# StackOverflow 问答 13021000-13021999

# php - 将 xml 元素与变量 php 进行比较

> ID：13021000
> 
> 赞同：0
> 
> 时间：2012-10-22T22:42:40.453
> 
> 标签：php, xml, simplexml

我正在尝试将 XML 中的元素与使用 simpleXML 的变量进行比较，但我做错了。这是我到目前为止所拥有的：

**PHP**

> $xml = simplexml_load_file('0.xml');

```
 if((string)$xml->stickers->sticker->id == $id) {  //<-- THIS LINE
        //code to be executed
    } 
```

**XML**

```
<stickers>
    <sticker>
        <id>1</id>
        <content>StickerContent</content>
    </sticker>
</stickers> 
```

这给我留下了**通知：***试图在我标记的行上获取非对象的属性，*但我不知道如何修复它。

**var_dump($xml)**

```
object(SimpleXMLElement)#1 (1) {
  ["sticker"]=>
  array(2) {
    [0]=>
    object(SimpleXMLElement)#2 (5) {
      ["id"]=>
      string(1) "1"
      ["content"]=>
      string(1) "p"
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:44:23.550

它应该是这样的：

```
if ((string) $xml->sticker->id == $id) 
```

虽然如果您有多个贴纸元素，它将是：

```
if ((string) $xml->sticker[0]->id == $id) 
```

# debian - 我的 deb 文件删除 /opt

> ID：13021002
> 
> 赞同：3
> 
> 时间：2012-10-22T22:42:50.213
> 
> 标签：debian, dpkg

我的 deb 文件安装到 /opt/myCompany/myProgram，当我使用 dpkg -P myProgram 清除包时，所有内容都被删除了 - 甚至 /opt（如果我的包是 /opt 中唯一包含文件的包） - 如何避免删除 /在清除期间选择文件夹？

我尝试检查 postrm 中是否存在 /opt ，如果不存在则添加它，但不高兴......似乎在 postrm 脚本运行后删除了该文件夹。目前我正在使用 postinst 在 /opt 中添加一个隐藏文件——这会阻止 opt 被删除，但感觉很糟糕——应该有更好的方法。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-09-23T15:59:08.383

这个问题是大约 7 年前提出的，但我在谷歌搜索类似问题时偶然发现了它，并认为无论如何我都会发布一个答案，因为这个问题的答案并不是真正的解决方案。

以下问题也是相关的（但与 /usr/local 而不是 /opt 相关）并且可以类似地解决：

[dpkg：警告：删除目录时 /usr/local 不为空，因此未删除](https://stackoverflow.com/questions/3704354/dpkg-warning-while-removing-directory-usr-local-not-empty-so-not-removed)

我能够使用以下技术解决此问题。

Debian 软件包 (.deb) 只是一个包含 3 个成员的“ar”归档文件：

```
$ ar t package.deb
debian-binary
control.tar.gz
data.tar.xz 
```

*data.tar.xz 成员可能被命名为 data.tar.gz，具体取决于 *.deb 的年龄。相应地调整命令。*

安装到目标系统的文件包含在 data.tar.xz 成员中。如果您提取 data.tar.xz 成员并列出其内容，您将看到例如以下内容。

```
$ ar p package.deb data.tar.xz | unzx -c | tar t
./
./opt/
./opt/myCompany/
./opt/myCompany/myProgram 
```

从 data.tar.xz 文件中删除 ./opt/ 目录成员（但不是其内容）将阻止 dpkg 在卸载软件包时尝试删除 /opt 目录。

```
$ ar x package.deb data.tar.xz
$ unzx data.tar.xz
$ tar --delete --occurrence -f data.tar ./opt/
$ #tar --delete --occurrence -f data.tar ./usr/local/ 
```

现在，如果您列出 data.tar 文件的内容，您应该会看到如下内容：

```
$ tar tf data.tar
./
./opt/myCompany/
./opt/myCompany/myProgram 
```

*   请注意 ./opt/ 成员已被删除。

最后一步是重新压缩data.tar文件，将deb中的data.tar.xz成员替换为修改后的成员。

这是从 tar 文件存档中删除 ./opt/ 条目并将 deb 中的 tar 文件存档替换为修改后的完整过程的一个示例：

```
$ ar x package.deb data.tar.xz
$ unzx data.tar.xz
$ tar --delete --occurrence -f data.tar ./opt/
$ xz data.tar
$ ar r package.deb data.tar.xz
$ rm data.tar.xz 
```

现在，当 deb 从系统中删除/卸载时，dpkg 将不会尝试删除 /opt 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:42:39.917

那只是Debian。每当它从非 debian 标准目录（例如`/opt`在您的情况下）中删除软件包并且该目录中没有文件时，`dpkg`将尝试删除该目录。

如果在删除时还有其他文件`/opt`，您会在“/opt 不是空的；未删除”行中收到一条消息，仅此而已。

另一种“hacky”方法是添加重新创建 /opt in `postrm`，但它并不比隐藏文件更干净:)

# ios - 如何在 cocos2d 中实现效果？

> ID：13021003
> 
> 赞同：0
> 
> 时间：2012-10-22T22:43:06.660
> 
> 标签：ios, cocos2d-iphone, effects

向使用 cocos2d 构建的游戏添加效果的最佳和最有效的方法是什么？
我的意思是像爆炸一样的效果。
它们只是动画/精灵吗？
如果没有，那我应该从设计师那里收到什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:17:01.350

您可以运行`cocos2d project`库附带的库，并在左上角的下拉列表中选择`Particle System Test`并构建它。这样你就可以看到 cocos2d 拥有的所有基本粒子效果。

还有一个不错的应用程序[ParticleDesigner](http://particledesigner.71squared.com/)，您可以在其中制作漂亮的粒子并生成文件以添加到 cocos2d 项目中，它还有很多示例，因此您可以下载并查看。

cocos2d 也支持动画，所以你可以从帧中制作动画，当然在爆炸的情况下粒子会更好看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:58:12.413

我会看看[CCParticleSystem](http://www.cocos2d-iphone.org/api-ref/latest-stable/interface_c_c_particle_system.html)和或[CCParticleSystemQuad](http://www.cocos2d-iphone.org/api-ref/latest-stable/interface_c_c_particle_system_quad.html)。您或您的设计师可以使用诸如[ParticleDesigner 之](http://particledesigner.71squared.com/)类的工具来创建外观精美的粒子效果。

# git - git checkout 删除网站上传

> ID：13021008
> 
> 赞同：2
> 
> 时间：2012-10-22T22:43:25.443
> 
> 标签：git, repository, web-deployment

我正在使用 Git 进行简单的网站开发和部署。

我在 localhost 上开发，将我的更改推送到服务器，该服务器通过 posthook 将 Web 部署到相应的目录和

```
GIT_WORK_TREE=/var/www/website/httpdocs/ git checkout -f 
```

我的问题是实时服务器上的所有用户上传（由网站用户或通过后端上传）都被删除

```
/var/www/website/httpdocs/assets/uploads 
```

在自动签出/部署网络时如何保留这些文件而不在我的存储库中跟踪它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:23:19.100

您要做的是将您的用户上传目录移到 webroot 之外，并将符号链接从 webroot 移动到用户上传目录。

供参考： [https ://serverfault.com/questions/147185/website-deployment-managing-user-uploaded-content](https://serverfault.com/questions/147185/website-deployment-managing-user-uploaded-content)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:41:25.923

我认为您想要的是*根本不*跟踪它们。

尝试将此添加到您的`.gitignore`文件中：

```
assets/uploads/* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:46:35.820

如果我正确理解您的问题，请使用 git stash 和 git stash pop。

# php - 在服务器（PHP）上存储文件的可扩展方式？

> ID：13021010
> 
> 赞同：2
> 
> 时间：2012-10-22T22:43:26.193
> 
> 标签：php, mysql, web, guid

我正在创建我的第一个 Web 应用程序 - 一个非常简单的在线文本编辑器。我需要做的是找到存储基于文本的文件的最佳方式——其中有很多。这些文本文件的大小可以超过 10,000 个字（文本字不是计算机字）。本质上，我希望文本文件的大小是无限的。

我正在考虑将文本文件存储在我的 MySQL 数据库中 - 但认为有更好的方法。相反，我计划将文本文件以基于 XML 的格式存储在我服务器上的目录中。数据库中的行定义了基于 xml 的文本文件的名称和创建文本的用户以及基本元数据。ID 是使用 V4 GUID 生成器生成的，它为文本提供一个 id 并将文本存储在我服务器上的“/store”目录中。我服务器中的文本定义包含此 id，我正在开发的 android 应用程序通过检索文本定义然后使用文本定义中的 GUID 将文本下载到本地设备来获取文本文件的内容。

我只是觉得这是一个拙劣的工作？我该如何改进这个系统？

有 GUID 冲突的案例。我不希望这种情况发生。“苗条”的可能性还不够好 - 我需要确保 GUID 碰撞绝对没有机会。我计划在存储具有特定 id 的文本之前检查数据库中具有相同 id 的文本 - 但是我相信我的数据库中有超过 20,000 条文本，这将花费很长时间并且对服务器产生不必要的压力。

如何使 GUID 安全？

当 GUID 发生冲突时会发生什么？

服务器后端将用 PHP 编写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:54:57.647

您在这里有几个问题，所以我会尽力回答所有问题。

> 带有 GUID 的 XML 是最好的方法吗？

“最佳”通常是主观的。这当然是一种方法，但您可能会增加不必要的开销。如果它只是你要存储的文本，为什么不把它放在 SQL 中[`varchar(MAX)`](https://stackoverflow.com/questions/140550/what-is-the-best-way-to-store-a-large-amount-of-text-in-a-sql-server-table)呢？

> 是否可能发生 GUID 冲突？

是的，但发生这种情况的可能性很小。 [小得离谱。](https://stackoverflow.com/a/2977648/1216976) 有更大的事情需要担心。

> 如何使 GUID 安全？

别再担心他们了。

> 当 GUID 发生冲突时会发生什么？

这取决于您如何使用它们。在这种情况下，存储在 GUID 指示的位置的旧数据可能会被新数据覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T22:49:48.150

好吧，我不知道 id 是否使用 guid，我可能只会使用 db 表上的 auto_increment 键并像这样命名文件，因为除非您在不清理文件系统的情况下从 db 中删除了记录，否则它们将始终是唯一的。我不知道 GUID 是否是 android 端的要求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T22:57:19.513

使用 MySQL 存储文档没有任何问题！

将它们存储在 XML 中将为您提供什么？添加额外的格式层只会增加读取和格式化它们的处理时间。

将它们作为文件*放在磁盘上*与将它们存储在 RDBMS 中没有什么不同，从长远来看，可能会导致您进一步出现问题。（想到文件访问、磁盘查找、锁定、竞争条件）。

# python - 在 PyContract 约束中的 __old__ 中引用 `self`

> ID：13021011
> 
> 赞同：0
> 
> 时间：2012-10-22T22:43:41.480
> 
> 标签：python, self, design-by-contract, contract

我正在使用[PyContract](http://pypi.python.org/pypi/contract/1.4)（不是[PyContracts](http://pypi.python.org/pypi/PyContracts/1.4.0)）为类方法编写一些约束。作为后置条件，我想确保实例的内存地址没有改变，即`id(self)`在调用函数之前和之后应该是相同的。我怎样才能用 PyContract 做到这一点？我有以下（最小）代码：

```
class Individual:
    def append(self, chrom):
        """
            post:
                __old__.self is self
                len(__old__.self.chromosomes)+1 == len(self.chromosomes)
                self.chromosomes[-1] == chrom
        """
        self.chromosomes.append(chrom) 
```

这里的约束问题是，在帖子中，我收到了这个错误：`_holder instance has no attribute 'self'`

这里有趣的是，`class Individual`它`__init__`的约束看起来像这样：

```
pre:
    isinstance(chromosomes, list)
post[chromosomes]:
    __old__.chromosomes is chromosomes
    __old__.chromosomes == chromosomes
post:
    hasattr(self, 'chromosomes')
    self.chromosomes == chromosomes 
```

据我所知，`PyContract`我不喜欢这样称呼`__old__.self`。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:56:32.067

这似乎解决了它：

```
class Individual:
    def append(self, chrom):
        """
            post[self]:
                __old__.self is self
                len(__old__.self.chromosomes)+1 == len(self.chromosomes)
                self.chromosomes[-1] == chrom
        """
        self.chromosomes.append(chrom) 
```

[资源](http://www.wayforward.net/pycontract/examples/circbuf.py)

# c# - ObjectTrackingEnabled 和 linq-to-sql

> ID：13021013
> 
> 赞同：7
> 
> 时间：2012-10-22T22:44:00.763
> 
> 标签：c#, linq-to-sql

我[在这里](http://www.sidarok.com/web/blog/content/2008/05/02/10-tips-to-improve-your-linq-to-sql-application-performance.html)读到，在查询数据以进行读取操作时，设置`ObjectTrackingEnabled`为`false`会在一定程度上提高性能。我的查询如下所示：

```
public return type TheQueryName (some parameters)
{
   using (TheDC MyDC = new TheDC())
   {
       var TheQuery = (...).ToList();

       return TheQuery;
   }
} 
```

**1）**如果我想添加性能增强，我只是在该行`ObjectTrackingEnabled = true;`之前添加该行`var TheQuery = (...).ToList();`

**2）**另外，如果我在查询中设置`ObjectTrackingEnabled`为`true`，是否需要在返回之前将其设置为 false 还是我只是`ObjectTrackingEnabled`为数据上下文的特定实例设置，接下来我将实例化一个新的数据上下文的值`ObjectTrackingEnabled` 将恢复到其默认状态`false`？

**注意：我只打算添加`ObjectTrackingEnabled = false;`到读取操作。**

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T23:02:18.727

ObjectTrackingEnabled 控制您的数据上下文（`TheDC`在您的情况下）是否会在加载实体后跟踪实体的更改。你是否想要这个取决于你的具体情况。

自然地，让数据上下文做更少的事情会使其运行得更快，但代价是*让您*承担跟踪更改的负担。为什么变更跟踪很酷？因为你能：

1.  从某些上下文加载一些实体
2.  修改它们
3.  添加新的，删除其他的
4.  调用`SaveChanges`并让数据上下文弄清楚对修改的实体进行 UPDATE 查询，对已删除的实体进行 DELETE 查询等

禁用更改跟踪后，您必须明确地告诉上下文发生了什么变化、新值是什么等。

假设您仍然不想要对象跟踪，则在每个特定数据上下文实例上设置该属性。这意味着您必须：

1.  为您创建的每个数据上下文手动设置它
2.  在上下文的构造函数中将其设置为上下文的默认值，如下所示：有关详细信息，`this.Configuration.AutoDetectChangesEnabled = true;`请参阅[此博客文章](http://www.shujaat.net/2012/03/entity-framework-code-first-change.html)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-25T21:53:04.990

您的标签和主题行说“Linq2SQL”，但您的问题是关于实体框架的。

对于“传统”Linq2SQL，您需要这个：

```
 linq2SqlDBContext.ObjectTrackingEnabled = false; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-24T22:29:29.420

在参照：

1）如果我想添加性能增强，我只是添加行`ObjectTrackingEnabled = true; just before the line var TheQuery = (...).ToList();`

查询性能增强来自于不跟踪。因此，您希望在`READ`为此目的创建新数据上下文之后立即禁用查询的此功能。

```
ObjectTrackingEnabled = FALSE 
```

# c - 将参数传递给循环中的线程

> ID：13021015
> 
> 赞同：2
> 
> 时间：2012-10-22T22:44:04.113
> 
> 标签：c, multithreading, winapi

我需要创建 10 个线程并打印出打印线程的 threadId。

```
#include <windows.h>
#include <stdio.h>

DWORD WINAPI xprint(LPVOID Param)
{
DWORD tID = GetCurrentThreadId();
int count = *(int*)Param + 1;

fprintf(stderr, "Thread Number:%d ThreadID:%d\n", count, tID);

return 0;
}

int main ()
{
   DWORD ThreadID[10];
   HANDLE ThreadHandle[10];
   int i;

   for(i=0; i<10; i++){

    ThreadHandle[i] = CreateThread(
      NULL,
          0,
          xprint,
          &i,
          0,
          &ThreadID[i]);

    if (ThreadHandle[i] == NULL) {
        fprintf(stderr,"Can't create thread!\n");
        return -1;
        }
    }

    for (i=0; i<10; i++){
            WaitForSingleObject(ThreadHandle[i],INFINITE);
        CloseHandle(ThreadHandle[i]);
    }
} 
```

输出：

```
Thread Number:1 ThreadID:4952
Thread Number:1 ThreadID:5284
Thread Number:1 ThreadID:5084
Thread Number:1 ThreadID:5656
Thread Number:1 ThreadID:5292
Thread Number:1 ThreadID:3072
Thread Number:1 ThreadID:5904
Thread Number:1 ThreadID:3620
Thread Number:1 ThreadID:6056
Thread Number:1 ThreadID:5676 
```

我不知道我哪里做错了。我想要的输出应该是这样的。

输出：

```
Thread Number:10 ThreadID:4952
Thread Number:8 ThreadID:5284
Thread Number:3 ThreadID:5084
Thread Number:9 ThreadID:5656
Thread Number:1 ThreadID:5292
Thread Number:2 ThreadID:3072
Thread Number:5 ThreadID:5904
Thread Number:6 ThreadID:3620
Thread Number:4 ThreadID:6056
Thread Number:7 ThreadID:5676 
```

线程号应该是*乱序的。

***发布此问题后，我又运行了几次程序输出：

```
Thread Number:2 ThreadID:4500
Thread Number:7 ThreadID:5740
Thread Number:7 ThreadID:3772
Thread Number:1 ThreadID:4732
Thread Number:2 ThreadID:4252
Thread Number:2 ThreadID:4264
Thread Number:2 ThreadID:5544
Thread Number:2 ThreadID:4116
Thread Number:2 ThreadID:5240
Thread Number:2 ThreadID:4804 
```

似乎线程号是随机的。但无论如何，相同的数字不应出现两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:45:40.447

而不是`&i`，你为什么不`i`根据需要传递并把它扔回去？您将相同的地址传递给所有线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:47:40.103

我不在 Windows 机器上，所以我无法对此进行测试，但在我编写的一个程序中，我创建了一个包含所有值的数组，并创建了一个指向数组元素 ( `int numbers[100]; &number[i]`) 的指针。这样做的原因是我在第二个线程运行时发生了变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T01:58:43.877

改变这个：

```
&i 
```

对此：

```
(void*)i 
```

还有这个：

```
int count = *(int*)Param + 1 
```

对此：

```
int count = ((int)Param) + 1; 
```

# iphone - 从 iOS 中的后台应用程序打开应用程序？

> ID：13021016
> 
> 赞同：1
> 
> 时间：2012-10-22T22:44:04.313
> 
> 标签：iphone, objective-c, ios, background-process

我有一个在后台运行的应用程序，我需要它使用前置摄像头伪随机拍照并将其发送到数据库。

我想到的一个可能的解决方案是使用 URL 方案打开另一个应用程序，该应用程序将拍照并发送它，然后使用另一个 URL 方案打开后台应用程序备份。有谁知道这是否可能？

或者也许有更好的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T22:50:23.400

iOS 应用程序不可能在后台初始化、利用或抓取相机硬件中的照片，更不用说将它们存储或上传到本地数据库。

这不仅是一种安全风险，而且还构成潜在的隐私侵犯，而且简直令人毛骨悚然。此外，后台应用程序只能存活 10 分钟左右，所以即使这个活动是可能的，维持它也是不可能的。

但是，可以直接从活动应用程序中使用相机，而无需将任务委托给另一个应用程序（也许您的想法有点像 Android 开发人员：p）。看看[UIImagePickerController](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:50:40.583

后台应用程序可以执行的操作非常有限——GPS、音频、电话和 VOIP 呼叫以及其他一些。访问相机不是允许的操作之一，因此您无法在后台拍照。

作为替代方案，您可以设置一个通知系统来提醒用户该拍照了（无论出于何种原因），如果他们选择打开应用程序，那么它可以执行您所需的操作。

# functional-programming - 如何以函数式编程风格实现这种深拷贝？

> ID：13021018
> 
> 赞同：0
> 
> 时间：2012-10-22T22:44:14.987
> 
> 标签：functional-programming, purely-functional

给定以下结构：

```
class G {
    Node[] nodes;
}
class Node {
    Node neighbour;
} 
```

深拷贝操作可以定义为：

```
function G copy (G g) {
    G r = new G();
    Map isom = new Map();
    for (Node node in g.nodes) {
        Node c = isom.get(node);
        if (c == null) {
            c = copy(node, isom);
            isom.put(node, c);
        }
        r.nodes.add(c);
    }
    return r;
}
function Node copy(Node n, Map isom) {
    Node r = isom.get(n);
    if (r == null) {
        r = new Node();
        isom.put(n, r);
        r.neighbour = copy(n.neighbour);
    }
    return r;
} 
```

我的问题是如何以函数式**编程**风格设计一个函数，`copy(Node n, Map isom)`使其不会改变参数。`isom`

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:00:44.317

发布这个问题后，我认真地做了一些调查。我的发现是**函数式编程**不擅长处理*流行的* **图算法**。

**具有纯粹功能偏好的人必须以与普通**文献不同的方式对待图表。这就是推动人们创作以下作品的动机：

*   具有深度优先搜索的功能图算法
*   图算法惰性函数式编程语言
*   归纳图和函数图算法
*   纯函数式数据结构
*   具有功能性的图算法

> 长期以来，图算法一直是用纯函数式语言编程的挑战。以前的尝试要么往往难以理解，要么未能达到标准的渐近复杂性度量。

---*约翰·兰伯里。1995\. 具有功能特征的图算法。在高级函数式编程中，First International Spring School on Advanced Functional Programming Techniques-Tutorial Text，Johan Jeuring 和 Erik Meijer (Eds.)。Springer-Verlag，伦敦，英国，308-331。***

# ruby-on-rails - 如何在 Rails 3.2 中隐藏模型中的列？

> ID：13021019
> 
> 赞同：2
> 
> 时间：2012-10-22T22:44:19.837
> 
> 标签：ruby-on-rails, activerecord

在 Rails 3.1 之前，我们可以更新 ActiveRecord::Base 的**self.columns**方法。但这现在似乎不起作用。

现在看来，如果我从表中删除一列，我将被迫重新启动 Rails 服务器。如果我不这样做，当插入到表中时，我会不断收到错误。Rails 仍然认为旧列存在，即使它不再在数据库中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:57:26.810

Active Record 不支持开箱即用，因为它查询数据库以获取模型的列（与 Merb 的 ORM 工具[Datamapper 不同](http://datamapper.org/)）。

尽管如此，您可以使用以下方法在 Rails 上修补此功能（例如，假设您想忽略以“已弃用”字符串开头的列）：

```
module ActiveRecord
  module ConnectionAdapters
    class SchemaCache

      def initialize(conn)
        @connection = conn
        @tables = {}

        @columns = Hash.new do |h, table_name|
          columns = conn.columns(table_name, "#{table_name} Columns").reject { |c| c.name.start_with? "deprecated"}
          h[table_name] = columns
        end

        @columns_hash = Hash.new do |h, table_name|
          h[table_name] = Hash[columns[table_name].map { |col|
            [col.name, col]
          }]
        end

        @primary_keys = Hash.new do |h, table_name|
          h[table_name] = table_exists?(table_name) ? conn.primary_key(table_name) : nil
        end
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:56:17.413

您可以清除 ActiveRecord[模式缓存](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaCache.html)：

```
ActiveRecord::Base.connection.schema_cache.clear_table_cache(:table_name)! 
```

然后它会在您下次引用使用该表的模型时重新加载。

# html - 居中左对齐的表单元素

> ID：13021021
> 
> 赞同：-2
> 
> 时间：2012-10-22T22:44:30.317
> 
> 标签：html, forms, text, center

我想将表单中的元素居中而不移动文本或按钮在左侧对齐。

所以它看起来像这样：

![在此处输入图像描述](../Images/64a1ba4ebf9fdb2896f53d7b13ce50a9.png)

底部方块应该是一个按钮。

我希望它居中，但`<center>`标签移动文本和按钮，使它们居中于输入框。

这是我的代码：

```
<form action="login.php" method="post">
    <div class="aside">
        <div id="center">
            Username:<br>
            <input type="text" name="username"><br>
            Password:<br>
            <input type="password" name="passwor"><br>
            <input type="submit" class="button" name="submit" value="Login"><br><br>
        </div>
    </div>
</form> 
```

和CSS：

```
#center{
    width: 250px;
    margin-left: auto;
    margin-right: auto;
}

div.aside {
    margin-left: 15px;
    margin-top: 10px;
    width: 250px;
    background: #f5f5f5;
    border: 1px solid #e9e9e9;
    line-height: 150%;
}

div.aside .button{
    padding:3px;
    width: 50px;
    margin-top: 3px;
    background-color: #00A1E6;
    border: 1px solid #0184BC;
    text-decoration:none;
    color: #ffffff;
    text-align: center;
    -webkit-appearance: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:56:35.290

您可以将父 div 设置为最大宽度，并将子 div 设置为您的内容（左对齐，较小的宽度）并用于`margin-left:auto;margin-right:auto;`将子 div 置于父元素的中心。但是，如果您这样做，您将需要设置子 div 的宽度。

[jsFiddle](http://jsfiddle.net/BSXvw/1/)

# java - 根据 Long 的值对 ArrayList 进行排序

> ID：13021023
> 
> 赞同：0
> 
> 时间：2012-10-22T22:44:42.177
> 
> 标签：java, sorting, collections, arraylist

我正在尝试根据每个对象中 long 的值对 ArrayList 进行排序。在遵循互联网上的各种示例之后，我提出了以下代码，但它没有按预期排序（它似乎截断了对象的某些部分）。

```
public static Comparator<Customer> compareSIN = 
         new Comparator<Customer>() {
            public int compare(Customer cust1, Customer other) {
               String sin1 = "" + cust1.sin;
               String sin2 = "" + other.sin;
               return sin1.compareTo(sin2);
            }
         }; 
```

请告诉我我在第一个代码片段中缺少什么，这会阻止我正确排序对象。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:48:44.633

从我假设的标题`Customer.sin`是`long`- 问题是你试图将它们作为`String`s 而不是通过它们的数值进行比较。

（例如： 10000 在字典上小于 2 - 所以`String`在这里使用 s 是错误的）

您应该使用[`Long.compare()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#compare%28long,%20long%29)（假设 java 7）：

```
public static Comparator<Customer> compareSIN = 
         new Comparator<Customer>() {
            public int compare(Customer cust1, Customer other) {
               return Long.compare(cust1.sin,other.sin);
            }
         }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T22:48:19.573

您实际上不需要`compareTo()`在自己的方法中使用`compareTo()`方法。

比较声明如果它们相等则必须返回 0，如果不相等则必须返回负数或正数。

出于这个原因，您可以通过返回从另一个中减去的一个来比较两个 long。

```
public int compare(Customer cust1, Customer other) {
           return cust1.sin - other.sin;
} 
```

如您所见，如果它们相等则返回 0，如果 other.sin 大于 cust1.sin 则返回负数，如果*cust1.sin**大于*other.sin*则**返回*正数。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:54:00.517

你比较`String`s 而不是`long`s。

因此，假设您想比较：“10”和“5”，结果将是**“10”<“5”**，而认为您正在使用`long`，您希望得到**10 > 5** ...

这可以解释你的问题。*

# javascript - AJAX 加载时的 Javascript 块

> ID：13021025
> 
> 赞同：0
> 
> 时间：2012-10-22T22:44:55.310
> 
> 标签：javascript, jquery, ajax, asynchronous

我正在寻找一种在 javascript 中发出 AJAX 加载请求的方法，但是在等待 AJAX 加载完成时让 javascript 代码暂停执行。换句话说，我正在尝试执行*同步*AJAX 加载请求（我知道 AJAX 中的“A”代表异步。我只是希望名称可能不完全正确。）。我所拥有的是

```
$('#my_id').load("my_page.pl?my_param=p1&my_other_param=p2");
//Please wait here
//Now do stuff after load is complete. 
```

我希望请求同步的原因是因为它创建了一个 HTML 表，然后后面的 javascript 解析了该表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:53:39.917

jQuery 的 'load()' 方法需要一个回调。回调通常是异步代码处理您想要的“等待”功能的方式。

```
$("#my_id").load("my_page.pl?my_param=p1&my_other_param=p2", function (response) {
    // do this stuff, which will run after the request is complete
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:55:48.807

看起来像 jquery ......我不能确定，因为我根本不知道 jquery，但如果是这样，你可能会得到更好的答案来标记它。我可以告诉你，javascript 有自己的同步或异步调用方法。这就是我使用的：

```
var xmlhttp;
if (window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();
}
else {
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
// Use the activeX object for old IE

xmlhttp.open("GET","http://some.internet.address/woot?foo=bar", false);
// The third argument in the open function determines the asynchronous nature, 
//it was set to false, so the code will halt at the send() point while the request is executed.
xmlhttp.send();
// Now, if the call succeeded...
if (xmlhttp.status==200) {
    response = eval('('+xmlhttp.responseText+')');
    // ...save the results to an object named response...
}
else {
    // ...Otherwise do some other stuff
    errorFunction(xmlhttp.status);
} 
```

这里也有很多好的信息 - [http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)

# google-checkout - 谷歌发给我的这个序列号到底是什么？

> ID：13021031
> 
> 赞同：0
> 
> 时间：2012-10-22T22:45:28.480
> 
> 标签：google-checkout

我正在使用 google checkout api 来处理我正在建立的在线商店中的订单。

我今天遇到了一个我无法超越的问题！哦，我为此感到非常头疼！所以这里是问题：

当我向谷歌发送一个基于 xml 的订单时，他们会向我发回一些看起来像这样的信息：

```
<?xml version="1.0" encoding="UTF-8"?>
    <checkout-redirect xmlns="http://checkout.google.com/schema/2"
    serial-number="981283ea-c324-44bb-a10c-fc3b2eba5707">
    <redirect-url>
        https://checkout.google.com/view/buy?o=shoppingcart&amp;shoppingcart=8572098456
    </redirect-url>
</checkout-redirect> 
```

我过去可以使用它，我刚刚在我的订单请求中传入了 <merchant-private-data> 标签来指定唯一的订单。我只是使用上面的重定向 URL 将他们发送到他们完成订单的页面，然后谷歌向我发送一个带有序列号的通知。我将序列号连同我的商家 ID 和商家密钥一起传回，他们将我的订单数据发回给我一堆 xml。

我已经让我的应用程序像这样工作了。问题是现在我正在尝试制作我的应用程序，以便您可以插入您的谷歌商家 ID 和密钥，我的应用程序将为您处理订单。这里的问题是，当他们在通知中向我发送序列号时，我不知道将哪个商家密钥或商家 ID 发回给他们。现在我们已经全面了解了我的问题的基础，即：

谷歌发给我的这个序列号是什么？？？这绝对不是通知 api 发送给我的序列号（除非我必须以某种方式解码？）。谷歌在他们的文档中没有对此给出任何解释，所有其他有关它的问题都可以通过简单地使用商家私人数据标签来回答。

请人！那里有一些巫师！请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:12:53.913

序列号仅与特定商家相关 - 根据您的帖子，您可以将其等同于*“特定回调 api url”*（在序列号通知中）。

如果/当您要求商家向您提供中间/密钥时，您必须向他们（商家）提供他们必须提供给 Google 的（唯一）网址。

所以“关系”将是“mid/key/callback api url”。

嗯。

# regex - 如何在 c# 中拆分字符串并将分隔符保留在数组中，同时在名称解析器中排除空格

> ID：13021033
> 
> 赞同：1
> 
> 时间：2012-10-22T22:45:33.923
> 
> 标签：regex, string, split, delimiter

这花了我一段时间才弄清楚，所以我将在问题中发布我的结果，因为这是已回答的。

问题：如何在名称字段中使用可能的分隔符数组拆分字符串，同时将分隔符保留在拆分数组中并排除拆分可能在数组中创建的空白。

示例：山姆华盛顿和珍娜

我的问题是我创建的名称解析器正在编写

名字：山姆

姓氏：珍娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:45:33.923

使用以下代码，我能够像这样解析它

名字：山姆

姓氏：华盛顿

名字 2 珍娜

但是要小心，因为如果您要使用我的加入者列表，则不包括可以在常见名称中找到的字符串值，例如“And”和“OR”

这将解析你的名字 EX: "Andy" 将是 "And" , "Y"

EX2：“Gregory 将是“Greg”“或”“y”

希望这可以帮助某人。如果您有任何问题，请随时给我留言。

```
 /// <summary>
    /// remove bad name parts
    /// </summary>
    /// <param name="parts">name parsed for review</param>
    public static void CheckBadNames(ref string[] parts)
    {
        string[] BadName = new string[] {"LIFE", "ESTATE" ,"(",")","*","AN","LIFETIME","INTREST","MARRIED",
                                         "UNMARRIED","MARRIED/UNMARRIED","SINGLE","W/","/W","THE","ET",
                                         "ALS","AS", "TENANT","WIFE", "HUSBAND", "NOT", "DRIVE" ,"INSURED",                 
                                         "EXCLUDED","DISABLED" ,"LICENSED","TRUSTEE","ATSOT","A T S O T",
                                         "AKA", "-ATSOT","OF","DBA","EVOCABLE","FAMILY","INTEREST","MASTER"};
        string[] joiners = new string[9] { "&", @"AND\", @"OR\", "\\", "&/OR", "AND/OR", "&-OR", "/", "OF/AND" };

    Restart:
        List<string> list = new List<string>(parts); //convert array to list
        foreach (string part in list)
        {
            if (BadName.Any(s => part.ToUpper().Equals(s)) || part == "-")
            {
                list.Remove(part);
                parts = list.ToArray();
                goto Restart;
            }
            //check to see if any part ends with joiner
            if (joiners.Any(s => part.ToUpper().EndsWith(s)))
            {
                //check if by ends with means that it is just a joiner
                if (joiners.Any(s => part.ToUpper().Equals(s)))
                {
                    continue;
                }
                else //name part ends with a joiner EX. Washington&
                {
                    foreach (string div in joiners.Where(s => part.ToUpper().Contains(s)))  // each string that contains a joiner
                    {
                        var temp = Regex.Split(part, "(" + div + ")").Where(x => x != String.Empty); // split into parts ignore leading or trailing spaces
                        int pos = list.IndexOf(part);
                        list.Remove(part);

                        for (int i = 0; i < temp.Count(); i++)
                        {
                            list.Insert(pos + i, temp.ElementAt(i));
                        }
                        parts = list.ToArray();
                        goto Restart;
                    }
                }
            }
        }

        if (parts.Count() == 0)
        {
            return;
        }
        if (joiners.Any(s => list.Last().ToUpper().Equals(s))) //remove last part if is a joiner
        {
            list.Remove(list.Last());
        }

        parts = list.ToArray(); // convert list back to array
    } 
```

# vb.net - 使用多种形式的最佳实践 - vb.net

> ID：13021036
> 
> 赞同：0
> 
> 时间：2012-10-22T22:45:39.620
> 
> 标签：vb.net

在 Visual Basic 程序中拥有许多不同的菜单/屏幕/表单的最佳实践是什么？是否只是为我想要的每个菜单或屏幕制作一个新表格？还是有其他更好的选择？

我不想让这件事变得过于复杂，我有一个小组项目要做，我们都有不同的技能水平。那就是说它已经达到了我的好奇心，所以我认为在我开始之前问它不会有什么坏处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:43:37.890

就我而言，当我处理多个表单时，我`MDI Parent Form`会避免在 Windows 任务栏中出现多个项目。

另一个不寻常的解决方案是将每个表单`ShowInTaskbar`属性设置为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:40:57.920

我可以看到这个问题很快就结束了，因为它太开放了，所以让我在此之前得到我的关键抱怨...... TabControl 页面没有 .Visible 属性？说真的，微软？？

这让我想到了关键点。如果表单在某种程度上相关但不一定相同，我更喜欢使用具有不同选项卡的单个表单，尽管控件中有明显的缺点。（在 SO 上您不必费力寻找解决方法，但解决方法仍然是一种解决方法。）在运行时动态操作控件是这枚硬币的另一面，尽管我倾向于很少使用它。 .但这只是个人的事情。

例如，在最近的一个应用程序中，我有几种类型的对象的列表。它们是相关的，但执行完全不同的功能，用户实际上不需要同时查看多个列表。因此，我为每个对象列表使用了一个带有选项卡的表单，以使用户的显示不那么混乱。

类似地，最近在做一个 GL 应用程序时，我在一个表单的不同部分中有日记帐标题和日记帐行条目（它们转到后端数据库中的不同表）。另一方面，资产创建完全不同，我创建了一个不同的表单，尽管创建过程共享一些基础数据。（即日记帐行数据。）

我不相信“最佳实践”的概念，因为在一种情况下是好的做法在另一种情况下可能是非常糟糕的做法。然而，我使用的“经验法则”是： - 将表单数量保持在最低限度，以保持低开销并减少维护但是 - 如果两个功能之间没有逻辑上的“联系”，不要害怕做一个新的形式，因为试图维持一种执行 7 种不同角色的形式肯定会导致疯狂和沮丧，特别是如果您无意中破坏了某些东西。

是的，这两条规则有冲突，但在某种程度上，我认为这方面的设计类似于数据库规范化；在过度规范化（每个显示器都有一个单独的形式）和规范化不足（试图将太多不相关的功能塞进一个形式）之间有一个最佳点。至少规则总是让我停下来思考“我需要这个表格，还是它与我已经做过的事情有关？”

显然，第三条经验法则是……始终从用户的角度来看待它。他们会觉得你在他们身边弹跳太多了吗？所有表单是否共享外观和感觉，更重要的是，控制布局，以便他们始终知道在哪里可以找到某些东西？

所有这些东西都会因应用程序而异，而且从来没有一种尺寸适合所有恕我直言。

# printing - 使用 GDB 和 Clang 漂亮地打印 STL

> ID：13021041
> 
> 赞同：5
> 
> 时间：2012-10-22T22:46:18.557
> 
> 标签：printing, stl, gdb, clang

我的机器上安装了 GDB 7.5。似乎 STL 的漂亮打印机已经与这个版本捆绑在一起，因为运行：

```
(gdb) info pretty-printers 
```

打印所有可用 STL 打印机的长列表。

调试已经用 g++ 编译的 C++ 代码可以获得漂亮打印的正确行为。但是，如果使用 clang++ 编译相同的代码，则不会观察到相同的情况。

`run`下面是我gdb时的输出：

```
BFD: /usr/lib/libstdc++.6.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/libstdc++.6.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/libSystem.B.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/libSystem.B.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/libc++abi.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/libc++abi.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libcache.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libcache.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libcommonCrypto.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libcommonCrypto.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libcompiler_rt.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libcompiler_rt.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libcopyfile.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libcopyfile.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libdispatch.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libdispatch.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libdnsinfo.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libdnsinfo.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libdyld.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libdyld.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libkeymgr.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libkeymgr.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/liblaunch.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/liblaunch.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libmacho.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libmacho.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libquarantine.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libquarantine.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libremovefile.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libremovefile.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libsystem_blocks.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libsystem_blocks.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libsystem_c.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libsystem_c.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libsystem_dnssd.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libsystem_dnssd.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libsystem_info.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libsystem_info.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libsystem_kernel.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libsystem_kernel.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libsystem_m.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libsystem_m.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libsystem_network.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libsystem_network.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libsystem_notify.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libsystem_notify.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libsystem_sandbox.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libsystem_sandbox.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libunc.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libunc.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libunwind.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libunwind.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libxpc.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libxpc.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/system/libcorecrypto.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/system/libcorecrypto.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/libobjc.A.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/libobjc.A.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/libauto.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/libauto.dylib(i386:x86-64): unknown load command 0x2b
BFD: /usr/lib/libc++.1.dylib(i386:x86-64): unknown load command 0x2a
BFD: /usr/lib/libc++.1.dylib(i386:x86-64): unknown load command 0x2b 
```

我想知道如何在使用 clang++ 编译代码时获得漂亮的 STL 容器？请注意，我可以调试应用程序；我只是不能很好地打印 STL 内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T21:35:07.787

您使用的 gdb 有一个已知的 Mach-O 加载命令编号列表，但在 Mac OS X 10.8 中添加了两个新命令编号（LC_SOURCE_VERSION，0x2a 和 LC_DYLIB_CODE_SIGN_DRS，0x2b），它抱怨它不知道这些。它不需要知道这些，这些加载命令中的调试器没有任何必要。警告应该是无害的。

您最好使用 Apple 提供的 gdb（我知道它不支持 python）或使用 Apple 支持的新调试器 LLDB。lldb 是一个非常令人兴奋的新调试器，它正在迅速改进，Apple 在过去几年中一直在从头开始开发它（尽可能利用 llvm 的现有基础架构和功能），今天它非常强大。它从一开始就被设计为可通过 Python 进行扩展，并且很容易为您可能遇到的容器类型创建新的数据格式化程序。

如果您以前没有使用过 lldb，但熟悉 gdb，那么一个有用的备忘单是[http://lldb.llvm.org/lldb-gdb.html上的命令等效页面](http://lldb.llvm.org/lldb-gdb.html)

试试 lldb。这是 Mac OS X 上支持调试的未来 - 今天有很多值得喜欢的地方，而且每个版本都在变得更好。它也是开源的，你可以从[http://lldb.llvm.org/](http://lldb.llvm.org/)查看它并自己玩。

# c++ - 在模板类中：使用一个类方法作为另一个类方法的模板参数

> ID：13021055
> 
> 赞同：2
> 
> 时间：2012-10-22T22:48:07.683
> 
> 标签：c++, templates

考虑以下代码：

```
template < class A >
class XX {
  public:
  template <int (*CC)() >
  int bla (){ return CC(); }
  int stam() {return 0;}
  int f() {
    return bla<stam>();
  }
};

int main()
{ 
  XX<int> xx;
  printf(" this is %d\n", xx.f());
  return 0;
} 
```

它失败了

```
test.cpp: In member function ‘int XX<A>::f() [with A = int]’:
test.cpp:14:   instantiated from here
test.cpp:8: error: ‘int XX<A>::stam() [with A = int]’ cannot appear in a constant-expression** 
```

想了想就明白了。`stam`在模板实例化之前不存在，因此它没有函数地址。当模板被实例化时，实例在代码中的某处被解开，然后`stam`得到一个地址。因此，地址在编译时不是常量（尽管有一些工作可能是 - 但不支持）。

那么我为什么要这样做。我可以使用函数指针或虚函数。实际上`bla`，使用`stam`（有`stam1`和`stam2`）称其为无数次，甚至是小的性能改进（例如不使用间接）都是受欢迎的。

当然也有解决方案： 创建`bla1`和`bla2`几乎相同。编写一个预处理器宏。我想知道是否有一个优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:28:14.340

这编译OK：

```
#include <cstdio>
using namespace std;

template < class A >
class XX {
  public:
  template <int (XX<A>::*CC)()>
  int bla (){ return (this->*CC)(); }
  int stam() {return 0;}
  int f() {
    return bla<&XX<A>::stam>();
  }
};

int main()
{.
  XX<int> xx;
  printf(" this is %d\n", xx.f());
  return 0;
} 
```

修复方法是为指向方法的模板参数使用正确的签名，并使用正确的语法来指定方法指针。（事实上​​，你可以忽略`<A>`那里。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:11:27.407

问题是 stam() 是成员函数，而不是自由函数，因此需要使用“this”指针调用它。

阅读有关指向成员函数的指针的教程：

[http://www.parashift.com/c++-faq/pointers-to-members.html](http://www.parashift.com/c++-faq/pointers-to-members.html)

# cakephp - CakePHP 高级认证和会话处理

> ID：13021057
> 
> 赞同：1
> 
> 时间：2012-10-22T22:48:43.813
> 
> 标签：cakephp, authentication, cakephp-2.0, cakephp-2.1, session-management

我正在寻找一个高级的 CakePHP 身份验证组件或插件。我已经使用了核心[身份验证插件](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)，它很好。然而，我正在寻找更高级的东西，允许跟踪同一用户的多个会话。主要特点/原因是： 用​​户查看活动会话并允许用户结束活动会话的能力。[facebook](https://www.facebook.com/settings?tab=security&section=sessions&view)和其他大型网站使用此方法。

如果您不知道执行我上面提到的功能的 Auth 组件，您是否知道任何 Auth 组件的功能超过 CakePHP 的核心/内置组件？

我搜索了 CakePHP bakery 部分并用 Google 搜索找到了一个 Auth 组件，但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:18:05.287

我不知道 CakePHP 中是否有内置的 Auth 复杂性，试试这个插件

[https://github.com/Theaxiom/SuperAuth](https://github.com/Theaxiom/SuperAuth)

或者查看 CakeDC 团队的官方 github 存储库[https://github.com/CakeDC](https://github.com/CakeDC)

也尝试在[http://plugins.cakephp.org/中找到一些东西](http://plugins.cakephp.org/)

顺便说一句，也许您可​​以直接向 irc 上的核心人员询问；）转到[http://webchat.freenode.net/](http://webchat.freenode.net/)和频道 cakephp。

# java - Java 日期输出错误。为什么？

> ID：13021060
> 
> 赞同：0
> 
> 时间：2012-10-22T22:48:44.533
> 
> 标签：java, date

我正在玩 Java Date，但无法理解：

```
Date myBirth = new Date(1991,01,21);
Log.d("DATE: ", "" + myBirth); 
```

这里我初始化了 Date 对象。为什么我得到这个输出？

```
DEBUG/DATE:(31693): Sat Feb 21 00:00:00 EET 3891 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:49:38.697

从[日期文档](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)：

> *   年份 y 由整数 y - 1900 表示。
> *   一个月用 0 到 11 的整数表示；0 是一月，1 是二月，以此类推；因此 11 是 12 月。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:53:41.340

引用此**已弃用**的 Date 构造函数[的 Javadoc ：](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28int,%20int,%20int%29)

 **```
Parameters:
    year - the year **minus 1900**.
    month - the month between 0-11.
    date - the day of the month between 1-31. 
```

所以输出是你要求的，而不是你想要的。**

# unix - 如何使用 Unix 命令从子文件夹中的文件中删除一行？

> ID：13021063
> 
> 赞同：1
> 
> 时间：2012-10-22T22:48:45.000
> 
> 标签：unix, sed, awk, grep

我有一个文件夹结构，其中起始文件夹是测试。test 里面有两个文件夹。test1 和 test2，加上一堆文件。在这一堆文件以及 test1 和 test2 中的文件中都有一个词欢迎。我试过了，但没有用

```
sed 's/\<welcome\>//g' **/* 
```

我究竟做错了什么？如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T00:21:38.573

这可能对您有用（GNU sed）：

```
find test -type f -exec sed -i '/welcome/d' '{}' \; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:50:06.497

尝试这样做（GNU `sed`）：

```
sed -i '/welcome/s/\<welcome\>//g' test/* 
```

`-i`开关修改文件，所以要小心。

如果`-i`您的 Unix 不支持 switch ：

```
for i in test/*; do
    sed '/welcome/s/\<welcome\>//g' "$i" > /tmp/.sed && mv /tmp/.sed "$i"
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T22:55:35.520

`sed -e 's/welcome//g' test > test2`

文件 test 有几个条目，包括*welcome*。上面的 sed 行从测试中删除了欢迎。

你可以把它放在一个循环中。我看到 sputnick 刚刚在很大程度上回答了你的问题！`:P`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T12:31:23.293

```
find . -type f|xargs perl -ni -e 'print unless(/<welcome>/)' 
```

# iphone - 在 ios5 中重置推送通知权限设置

> ID：13021066
> 
> 赞同：5
> 
> 时间：2012-10-22T22:48:59.057
> 
> 标签：iphone, push-notification

我正在开发一个使用推送通知的应用程序，并在装有 iOS 5.1.1 的设备上进行测试。我想测试在应用程序首次运行期间提示用户推送通知的场景。该对话框在我第一次调用 registerForRemoteNotificationTypes 时出现，但再也不会出现，即使该应用程序是从头开始重新安装的。如何清除设置以使对话框再次出现？

[之前发布了](https://stackoverflow.com/questions/2438400/reset-push-notification-settings-for-app)相同的问题，但答案不适用于 iOS 5 或更高版本，如评论中所述。

Apple 的[文档](http://developer.apple.com/library/ios/technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-TNTAG42)说要卸载该应用程序并弄乱时钟以使其看起来该应用程序已卸载一天，但这在 iOS5 上不起作用。

另一个答案建议运行 General -> Reset -> Erase All Content And Settings - 我试过这个，但它冻结了我的设备，我最终不得不重新启动它。无论如何，这是一个不实用的测试方法。

另一个答案建议从 /private/var/mobile/Library/RemoteNotification/Clients.plist 中删除您的应用程序条目，但该文件在 iOS5 上不存在。

有没有办法在 iOS5 上实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T18:23:14.270

如果您的设备越狱，我找到了一个可行的解决方案：

*   使用 iFile 之类的应用程序`/var/mobile/Library/SpringBoard/applicationstate.plist`通过属性列表查看器打开文件
*   找到您的应用的捆绑标识符并删除密钥`SBRemoteNotificationClient`
*   重新启动 SpringBoard - 重新启动设备，通过 SSH 连接到设备并运行`killall SpringBoard`，或者使用 Respring 应用程序。

下次运行您的应用程序时，它将再次显示通知权限对话框。

我已经在 iOS 5.1.1 上对此进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:56:26.923

如果您的 iOS 5 和 iOS 6 的代码路径没有太大差异，最简单的选择可能是只测试 iOS 6 上的特定行为——您在 iOS 5 上获得的回调应该足够相似，不会成为问题。

或者，更改应用程序的捆绑 ID。有点乏味（过去我需要重新启动 Xcode 才能注意到捆绑 ID 的变化），并且您需要一个方便的通配符配置文件。

# heroku - heroku 错误 R10

> ID：13021068
> 
> 赞同：2
> 
> 时间：2012-10-22T22:49:07.627
> 
> 标签：heroku

```
I created a sample app called stock portfolio manager 
```

[https://github.com/rohanmoitra/foliomanage](https://github.com/rohanmoitra/foliomanage)并将其部署在 heroku 上。但是每当我尝试运行 heroku rake db:migrate 时，它​​都会超时并给出以下错误。

```
2012-10-22T22:28:35+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process
 failed to bind to $PORT within 60 seconds of launch
2012-10-22T22:28:35+00:00 heroku[web.1]: Stopping process with SIGKILL
2012-10-22T22:28:36+00:00 heroku[web.1]: Process exited with status 137
2012-10-22T22:28:36+00:00 heroku[web.1]: State changed from starting to crashed

Has anyone encountered this error before? Any help would be deeply appreciated 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:35:55.837

您不应该在 heroku 启动时进行迁移。后者限制为 60 秒。作为 rake 任务单独运行迁移。但是，如果您真的非常想这样做，则必须解决启动超时问题（https://github.com/dblock/heroku-forward 可能会有所帮助）。

# windows - GNUPG - Windows 上的标准输入加密文件和密码

> ID：13021070
> 
> 赞同：1
> 
> 时间：2012-10-22T22:49:11.817
> 
> 标签：windows, gnupg

如何在 gpg.exe 中传输密码和加密文件？

我尝试了几种不同的组合，但我无法让它发挥作用。

这是我的尝试，

```
C:\>gpg.exe --output [OUTPUT_FILE] --batch --passphrase-fd 0 --decrypt < [INPUT_FILE] < [PASSPHRASE_FILE] 
```

从这里我得到错误

```
gpg: decrypt_message failed: eof 
```

交换输入和密码我得到错误

```
gpg: no valid OpenPGP data found.
gpg: decrypt_message failed: eof 
```

如果我不尝试通过标准输入发送加密文件，那么解密工作正常。

最终我想要做的是根据文件名中带有日期时间戳的文件掩码解密文件。下面列出，

```
C:\>gpg.exe --output yyyyMMdd.csv --batch --passphrase-fd 0 --decrypt < *_yyyyMMdd_*.txt < [PASSPHRASE_FILE] 
```

我不确定这是否可行，因为我无法使基本场景正常工作，如果有人能建议我实现这一目标的最佳方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:26:10.677

不要对要解密的文件使用重定向，仅对包含密码的文件使用重定向：

```
C:\>gpg.exe --output [OUTPUT_FILE] --batch --passphrase-fd 0 --decrypt [INPUT_FILE] < [PASSPHRASE_FILE] 
```

但老实说，您可能更容易从密钥中删除密码。毕竟，将密码存储在文件中并不是很安全。只需将您的密码短语更改为空白并保护您的 gpg 主目录以拒绝访问除您自己之外的任何进程。

# swing - 双击更改项目样式的 JList

> ID：13021072
> 
> 赞同：1
> 
> 时间：2012-10-22T22:49:14.133
> 
> 标签：swing, jlist, double-click, defaultlistmodel

我正在尝试创建一个允许用户双击一个项目并“收藏”该项目的 JList。然后该项目的样式会发生变化（例如：不同的边框颜色）。我了解如何捕获列表上的双击。我需要帮助将更改应用于列表中的项目。

```
listModel.getElementAt(index); 
```

这将返回一个字符串，我希望以某种方式检索一个可以用这些不同边框颜色重新绘制的对象。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:02:43.550

您是否能够将该对象转换为一些具有您可以设置的属性的 ui 对象？

# java - 如何在 Eclipse 中使用测试驱动设计概念测试异常

> ID：13021073
> 
> 赞同：1
> 
> 时间：2012-10-22T22:49:13.063
> 
> 标签：java, exception, junit, testdrivendesign

我正在使用测试驱动设计概念编写一个 Stack 类。

在 setUp() 方法中，我的堆栈是用 0 个这样的元素创建的

```
Stack stack = new Stack(); 
```

这是我试图捕获 StackEmptyException 的测试，它会在 setUp() 之后立即调用 top 时引发。

```
@Test
public final void testTopIsEmpty() throws StackEmptyException
{
  StackEmptyException thrown = null;
  try
  {
    stack.top();
  }
  catch (StackEmptyException caught)
  {
    thrown = caught;
  }
  assertThat(thrown, is(instanceOf(StackEmptyException.class)));
} 
```

我的问题在最后一行。我不明白为什么我的代码不起作用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:14:52.707

ExpectedException 可用于验证是否引发了异常。检查可以在方法的中间，以确保早期的方法调用不会意外抛出相同的异常。

```
@Rule
public ExpectedException thrown = ExpectedException.none();

@Test
public void testTopIsEmpty() throws StackEmptyException {
    thrown.expect(StackEmptyException.class);
    stack.top();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T22:52:19.387

在 JUnit 中[测试异常](http://kentbeck.github.com/junit/javadoc/latest/org/junit/Test.html#expected%28%29)的正确方法是：

```
@Test(expected = StackEmptyException.class)
public final void testTopIsEmpty() throws Exception
{
    stack.top();
} 
```

# c - 我在这个 C 程序中使用指针是否正确？

> ID：13021080
> 
> 赞同：-2
> 
> 时间：2012-10-22T22:49:48.400
> 
> 标签：c, pointers

例如：

这是我尝试过的：

```
#include "stdafx.h"
#include <ctype.h>

char *mystrcat(char *s1p, char *s2p); 
char main(void)
{
    ...........................
}

char *mystrcat(char *s1p, char *s2p) 
{

    printf("whatever = %s%s\n", s1p, s2p);
    return 0;   
} 
```

如何使用第三个指针使其工作并让它存储`p1`和`p2`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:56:31.303

替换： 替换为`*mystrcat(string1, string2);`
：`char *string3 = mystrcat(string1, string2);`

另外，如果您的老师想要 char* 而不是

```
char string1[80];  
char string2[80]; 
```

你可以做

```
char *string1 = malloc(80*sizeof(char));
char *string2 = malloc(80*sizeof(char)); 
```

连接你的字符串：

```
char *mystrcat(char *s1p,char *s2p) {
    char *cat = malloc(2*80*sizeof(char));
    int i = 0;
    while(s1p[i]!='\o') {
        cat[i] = s1p[i];
        i++;
    }
    int j = 0;
    while(s2p[j]!='\o') {
        cat[i+j] = s2p[j];
        j++;
    }
    return cat;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:52:19.627

除了不好的编码习惯（我已经做了一段时间的 C 语言，仍然没有修复一些 em），我看到了一个错误：*mystrcat(string1, string2)。返回类型是 char*，但函数本身具有“在其中”的指针（很难解释）。所以它应该只是 mystrcat(string1, string2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:02:31.240

听起来您想编写一个函数来连接字符串。为此，您需要能够可视化脑海中的字符串、2 个输入字符串和生成的字符串。

这是一个应该解决它的算法：

*   创建一个结果字符串，其空间足以容纳给定输入中的字符总数加上 1 用于终止 nul char。
*   将第一个字符串中的字节复制到结果中。
*   将 esconds 字符串中的字符附加到结果中
*   附加一个空字符
*   返回结果

编程是看到问题、设计算法然后用编程语言实现的能力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T19:01:09.737

```
#include "stdafx.h"
#include <stdlib.h>
#include <string.h>
#include <Windows.h>
#include <ctype.h>

char *mystrcat(char*s1p, char*s2p); // Prototype

int main(void)
{

    char *string1 = malloc(80*sizeof(char));
    char *string2 = malloc(80*sizeof(char));

    printf("Enter in string 1");
    scanf("%s", string1);

    printf("Enter in string 2");
    scanf("%s", string2);

    char *mystrcat((string1,string2));
return 0;

}

char *mystrcat(char *s1p,char *s2p) 
{

    char *cat = malloc(2*80*sizeof(char));
int i = 0;
while(s1p[i]!='\o') {
    cat[i] = s1p[i];
    i++;
}
int j = 0;
while(s2p[j]!='\o') {
    cat[i+j] = s2p[j];
    j++;
}
return cat;

} 
```

这是我到目前为止在您的所有帮助下得到的代码，我从上到下包括了所有内容，我正在使用 MSVS 2012 以及我发布此内容的原因，因为我在 'malloc' 上有一个错误，作为研究员的错误

```
3   IntelliSense: a value of type "void *" cannot be used to initialize an entity of type "char *"  c:\Users\Sid\Documents\Visual Studio 2012\Projects\PORTFOLIO QUESTION 3\PORTFOLIO QUESTION 3\PORTFOLIO QUESTION 3.cpp   32 
```

# php - Mysqli 多查询 - 排序结果

> ID：13021083
> 
> 赞同：0
> 
> 时间：2012-10-22T22:49:54.657
> 
> 标签：php, mysqli, multi-query

我想将 sql 语句的每个结果保存在不同的数组中。我试过：

```
 $sql = "SELECT * FROM `link_server` WHERE `in_use` = false;";
        $sql .= "SELECT * FROM `link_queue` WHERE `active` = false;";

        if ($db->multi_query($sql))
        {
            do
            {
                // Erstes Abfrageergebnis ausgeben
                if ($result = $db->store_result())
                {
                    // Abfrageergebnis ausgeben
                    while ($server_fetch = $result->fetch_array())
                    {
                        $server[] = $server_fetch;
                    }

                    $result->close();

                }
                // Trenner fuer Zweites Abfrageergebnis
                if ($db->more_results())
                {
                    echo "<hr />test";
                    $queue[] = $server_fetch;
                }
            } while ($db->next_result());
        echo "Servers:";
        print_r($server);
        echo "Queue:";
        print_r($queue);
        } 
```

第一条语句的结果应保存在数组`$server`中，第二条语句的结果应保存在数组中`$queue`。

上面的示例将完整的返回（来自两个语句）存储在第一个数组 ( `$server`) 中。第二个数组是空的。

我该如何解决？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:00:03.460

[`$db->more_results()`](http://php.net/manual/en/mysqli.more-results.php)是一种标记查询的结果已经到达末尾的方式，而不是获取下一组结果。您可以使用它来告诉您的循环开始加载下一个数组 - 例如通过设置一个标志。

```
if ($result = $mysqli->store_result()) {
    while ($server_fetch = $result->fetch_row()) {
        if (!$second) {
            $server[] = $server_fetch;
        } else {
            $queue[] = $server_fetch;
        }
    }
    $result->close();
}
/* next set of results */
if ($mysqli->more_results()) {
    $second = true;
} 
```

或者，您可以像这样使用变量变量：

```
/* set up variables  */
$server = array();
$queue = array();
$active = 'server';

/* execute multi query */
if ($mysqli->multi_query($query)) {
    do {
        /* store result set */
        if ($result = $mysqli->store_result()) {
            while ($server_fetch = $result->fetch_row()) {
                ${$active}[] = $server_fetch;
            }
            $result->close();
        }
        /* next set of results */
        if ($mysqli->more_results()) {
            $active = 'queue';
        }
    } while ($mysqli->next_result());
} 
```

尽管我必须同意评论者的观点，但这会给原本简单的一对请求增加大量的工作量和额外的代码复杂性。

# powershell - 'System.OutOfMemoryException'同时在powershell中循环遍历数组

> ID：13021084
> 
> 赞同：3
> 
> 时间：2012-10-22T22:49:54.437
> 
> 标签：powershell

我试图编写一个函数来查找 .sys 文件中的池标记。我创建了一个包含 .sys 文件的所有目录的数组，然后使用 sysinternals Strings 实用程序遍历它们。

这是数组：

```
$paths = Get-ChildItem \\$server\c$ *.sys -Recurse -ErrorAction SilentlyContinue | 
     Select-Object Directory -unique 
```

这是我第一次尝试循环：

```
foreach ($path in $paths) {

    #convert object IO fileobject to string and strip out extraneous characters
    [string]$path1 = $path
    $path2 = $path1.replace("@{Directory=","")
    $path3 = $path2.replace("}","")
    $path4 = "$path3\*.sys"
    Invoke-Command -ScriptBlock {strings -s $path4 | findstr $string}   
} 
```

我发现了一些对错误的引用，表明在`foreach`循环中，所有信息都存储在内存中，直到它完成处理。

所以我尝试了这个：

```
for ($i = 0; $i -lt $paths.count; $i++){
    [string]$path1 = $paths[$i]
    $path2 = $path1.replace("@{Directory=","")
    $path3 = $path2.replace("}","")
    $path4 = "$path3\*.sys"
    Invoke-Command -ScriptBlock {strings -s $path4 | findstr $string}       
} 
```

但它有同样的结果。我已经读过通过管道一次发送一个项目将防止这个错误/问题，但我不知道如何继续。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:45:18.427

是的，通常最好使用流来解决这个问题，这样您就不必缓冲一堆对象，例如：

```
Get-ChildItem \\server\c$ -r *.sys -ea 0 | Foreach {
    "Processing $_"; strings $_.Fullname | findstr $string} 
```

另外，我不确定您为什么`Invoke-Command`在可以直接调用时`strings`使用`findstr`。您通常用于`Invoke-Command`在远程计算机上运行命令。

# php - 从 FS 流式传输图片还是从 BLOB 流式传输图像更快？

> ID：13021087
> 
> 赞同：0
> 
> 时间：2012-10-22T22:50:04.437
> 
> 标签：php, mysql, streaming, blob, bandwidth

从文件系统流式传输图片/图像或从 BLOB、MySQL 数据库流式传输是否更快？

我实际上在问什么：

> **PHP 是从表格中读取图片并将其输出到浏览器，还是直接从文件系统中流式传输，会更快吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:55:02.277

首先：在大多数情况下，从文件系统中读取它会更快。

以“首先”开头的所有内容都需要“但是”或“另外” - 我将尝试同时提供：

*   **此外**，通过将缓冲区页面用于 BLOB 数据，您将使其他查询变慢，否则这些页面可能会用于数据或索引。

*   **但是**，如果您扩展到多服务器架构，您将需要一个共享文件系统，这本身就是一个雷区。这有时（在特殊用例中，不是常规情况下）是使陪审团倾向于存储 BLOBS 的论点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-09T08:43:32.097

没有任何研究，IMO 不可能做出有效的声明。本文例如得出结论[：](http://research.microsoft.com/apps/pubs/default.aspx?id=64525)

> 小于 256K 的对象最好存储在数据库中，而大于 1M 的对象最好存储在文件系统中。在 256K 和 1M 之间，读写比和对象覆盖或替换率是重要因素。

这仅适用于他们的环境（SQL Server 2005）。无论如何，我想说如果不是因为 PHP近十年来根本[不支持流式 BLOB （与手册所说的相反），那么在 DBS 中拥有资源（例如 ACID）的优势将占主导地位。](https://bugs.php.net/bug.php?id=40913)

# asp.net - 为什么 Web API 请求的主体被读取一次？

> ID：13021089
> 
> 赞同：24
> 
> 时间：2012-10-22T22:50:05.730
> 
> 标签：asp.net, asp.net-web-api

我的目标是使用 AuthorizationFilter 或 DelegatingHandler 对 Web API 请求进行身份验证。我想在几个地方查找客户端 ID 和身份验证令牌，包括请求正文。起初这似乎很容易，我可以做这样的事情

```
var task = _message.Content.ReadAsAsync<Credentials>();

task.Wait();

if (task.Result != null)
{
    // check if credentials are valid
} 
```

问题是 HttpContent 只能读取一次。如果我在 Handler 或 Filter 中执行此操作，则内​​容在我的操作方法中对我不可用。我在 StackOverflow 上找到了一些答案，例如：[Read HttpContent in WebApi controller](https://stackoverflow.com/questions/12494067/read-httpcontent-in-mvc-webapi-controller?rq=1)解释说这是故意的，但他们没有说为什么。这似乎是一个非常严重的限制，它阻止我在过滤器或处理程序中使用任何很酷的 Web API 内容解析代码。

是技术限制吗？它是否试图阻止我做我没有看到的非常糟糕的事情（tm）？

验尸：

我看了菲利普建议的来源。**ReadAsStreamAsync 返回内部流，如果流支持，**没有什么能阻止您调用 Seek 。在我的测试中，如果我调用 ReadAsAsync 然后这样做：

```
message.Content.ReadAsStreamAsync().ContinueWith(t => t.Result.Seek(0, SeekOrigin.Begin)).Wait(); 
```

自动模型绑定过程在遇到我的操作方法时可以正常工作。不过我没有使用这个，我选择了更直接的东西：

```
var buffer = new MemoryStream(_message.Content.ReadAsByteArrayAsync().WaitFor());
var formatters = _message.GetConfiguration().Formatters;
var reader = formatters.FindReader(typeof(Credentials), _message.Content.Headers.ContentType);
var credentials = reader.ReadFromStreamAsync(typeof(Credentials), buffer, _message.Content, null).WaitFor() as Credentials; 
```

使用扩展方法（我在 .NET 4.0 中没有 await 关键字）

```
public static class TaskExtensions
{
    public static T WaitFor<T>(this Task<T> task)
    {
        task.Wait();
        if (task.IsCanceled) { throw new ApplicationException(); }
        if (task.IsFaulted) { throw task.Exception; }
        return task.Result;
    }
} 
```

最后一个问题，HttpContent 有一个硬编码的最大缓冲区大小：

```
internal const int DefaultMaxBufferSize = 65536; 
```

因此，如果您的内容将大于该内容，则需要在尝试调用 ReadAsByteArrayAsync 之前手动调用更大尺寸的 LoadIntoBufferAsync。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-23T00:15:43.423

您指出的答案并不完全准确。

您始终可以读取为字符串（`ReadAsStringAsync`）或字节[]（`ReadAsByteArrayAsync`），因为它们在内部缓冲请求。

例如下面的虚拟处理程序：

```
public class MyHandler : DelegatingHandler
{
    protected override async System.Threading.Tasks.Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
        var body = await request.Content.ReadAsStringAsync();
        //deserialize from string i.e. using JSON.NET

        return base.SendAsync(request, cancellationToken);
    }
} 
```

同样适用于 byte[]：

```
public class MessageHandler : DelegatingHandler
{
    protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        var requestMessage = await request.Content.ReadAsByteArrayAsync();
        //do something with requestMessage - but you will have to deserialize from byte[]

        return base.SendAsync(request, cancellationToken);
    }
} 
```

每个都不会导致发布的内容在到达控制器时为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T08:49:19.210

我将 clientId 和身份验证密钥放在标题而不是内容中。

通过这种方式，您可以随心所欲地阅读它们！

# python - Python 正则表达式 (\..+)？

> ID：13021093
> 
> 赞同：2
> 
> 时间：2012-10-22T22:50:34.860
> 
> 标签：python, regex

我对以下 Python 正则表达式的语义感到困惑：

`r"/actors(\\..+)?"`

我查看了有关正则表达式的 Python 文档部分，但无法理解这个表达式。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T22:58:34.090

```
/        # literal /
actors   # literal actors
(        # starting a subpattern
\\       # (escaped) literal  \
.        # arbitrary character
.+       # 1 or more arbitrary characters
)?       # ends the subpattern and makes it optional 
```

这意味着，它匹配正斜杠、“演员”，然后是可选的反斜杠和 2 个或更多任意字符。

我想这里有一个错字。要么字符串不应该被标记为原始，要么反斜杠太多。在这两种情况下，都会出现转义`.`而不是转义`\`后跟任意字符。这反过来将匹配文件，调用`actors`具有任意或丢失的文件扩展名。

所以要么`"/actors(\\..+)?"`要么`r"/actors(\..+)?"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:59:56.427

```
\\..+ 
```

这里，`\\`是一个转义`\`字符，所以它确实与那个完全匹配。以下是一个`.`可以匹配任何字符，后跟另一个`.`必须至少存在一次（或更频繁。所以`..+`将匹配两个*或更多*字符。并且`\\..+`将匹配任何两个或更多字符，*前缀为反斜杠*。

```
(\\..+)? 
```

这一切都在一个可选的捕获组中，这意味着这一切也可以被排除在外。

请注意，表达式可能是错误的。看起来好像您正在尝试匹配某种 URL 并想要匹配由`.`字符引入的文件扩展名。但是，`\\`原始引用的字符串内部`r" "`将匹配`\`字符并且不会转义点本身。所以你可能想要`r"/actors(\..+)?"`or `"/actors(\\..+)?"`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T22:58:40.610

这意味着： string `/actors`，后跟一个可选的捕获组，其中包含一个 literal ，然后是一个或多个配置为匹配`.`的非文字。`.`

# php - 如何获取自上次在 PHP 中编辑 MySQL 数据库以来的时间

> ID：13021095
> 
> 赞同：1
> 
> 时间：2012-10-22T22:50:40.057
> 
> 标签：php, mysql, sql

我需要知道自从我的 MySQL 数据库中的表被编辑以来的时间。有没有办法在 PHP 中做到这一点？我能想到的唯一方法是获取更新时间，并将其与当前时间进行比较（这会有点麻烦）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:03:27.973

```
SELECT TIMEDIFF(CURRENT_TIME, UPDATE_TIME)
FROM   INFORMATION_SCHEMA.TABLES
WHERE  TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'my_table' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:58:57.927

一种解决方案是添加一个`timestamp`字段，该字段会在行更改时自动更新。然后您可以通过选择最后更新值来找到最后更改时间：

```
# Add a timestamp column:
ALTER TABLE [TABLENAME] add column `ts_update` timestamp NOT NULL default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP;

# Get the last update value:
SELECT MAX(ts_update) from [TABLENAME]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:03:34.917

这有点痛苦，因为`SHOW TABLE STATUS`似乎没有返回标准结果集。我试图将它用作子查询的每一种方式都失败了。似乎您需要以编程方式解决它。

```
SHOW TABLE STATUS
WHERE name = 'target_table'; 
```

如果您担心时区，只需单独`SELECT NOW()`获取 mysql 服务器的时间。

注意：这只会显示更新表架构的时间。如果您想知道最后一次插入/编辑行的时间，您必须像 Amirshk 建议的那样添加时间戳列。

# android - 为什么我的 if/else 语句不起作用？

> ID：13021096
> 
> 赞同：-1
> 
> 时间：2012-10-22T22:50:48.527
> 
> 标签：android, double, sharedpreferences, if-statement

我是 android 开发的菜鸟，我正在尝试使用共享首选项在 onCreate 期间获取 double 的值。但是，我这样做的代码似乎只在我第一次重新启动我的应用程序时才有效。在随后的重新启动期间，代码不起作用并跳过我的代码的 if/else 部分。这是非常令人沮丧的，因为如果它一次有效，它应该每次都有效。任何帮助是极大的赞赏。

```
public void LoadPreferences(){
                            double portfoliocurrency1 = null;
            SharedPreferences portfoliopreferences = getPreferences(MODE_PRIVATE);
            String isuser1created = portfoliopreferences.getString("U1C", "");
            if(isuser1created.equals("yes")){           
                String savedportfolioname = portfoliopreferences.getString("PN1", "");
                String saveddenomination = portfoliopreferences.getString("DN1", "");
                String savedporfoliocurrency = portfoliopreferences.getString("PC1", ""); //<--Always either "usd", "inr", or "eur".
                Log.d("test","SPConLoad=" + savedporfoliocurrency ); //<--Returns correct value on every restart.
                Log.d("test","USD=" + currencyUSD ); //<--Returns correct value on every restart.
                Log.d("test","EUR=" + currencyEUR ); //<--Returns correct value on every restart.
                pn1 = savedportfolioname;
                denomination1 = saveddenomination;
                if(savedporfoliocurrency=="usd"){ //<--If/else statement only works on first restart.  For some reason it is skipped on subsequent restarts.
                    portfoliocurrency1 = currencyUSD; 
                    Log.d("test","PC1USD=" + currencyUSD ); //<--Returns correct value on first restart.
                }else if(savedporfoliocurrency=="eur"){
                    portfoliocurrency1 = currencyEUR;
                    Log.d("test","PC1EUR=" + currencyEUR ); //<--Returns correct value on first restart.
                }else if(savedporfoliocurrency=="inr"){
                    portfoliocurrency1 = currencyINR; //<--Returns correct value on first restart.
                }
                Log.d("test","PC1onLoad=" + portfoliocurrency1 ); //<-- Only returns correct value during first restart.  Always returns null on subsequent restarts.
              } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:52:50.087

您应该在这里使用 String.equals()，而不是 ==。

```
if(savedporfoliocurrency=="usd"){ 
```

例如，请参阅 SO 问题[Java String.equals vs ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)。

==，正如您所发现的，有时会起作用，但这不是您想要在这里做的。您要检查内容，而不是存储它们的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:52:47.053

改变：

```
savedporfoliocurrency=="usd" 
```

到

```
savedporfoliocurrency.equals("usd") 
```

并在类似的 manar 修复其他字符串比较

# java - 搜索 Java 链表

> ID：13021097
> 
> 赞同：0
> 
> 时间：2012-10-22T22:50:51.227
> 
> 标签：java, search, linked-list

我正在尝试搜索使用名为 Name 的自定义对象的 Java LinkedList。我需要搜索名字（我在 Name 中的 compareTo 方法已经比较了姓氏，因为我需要使用它来按姓氏排序）。Name 有一个名为 getFirstName() 的观察者方法。

我从我的 LinkedList 访问名字没有任何成功。这是我想做的，但这（显然）不起作用。

```
if (iterator.next().getFirstName().equals(inputSearch)) 
```

有人可以指出我正确的方向吗？

这是我目前正在尝试编写的完整方法：

```
// Creating a method to search for a first name
  static void searchName()
{
  Scanner inData = new Scanner(System.in);

  // Label to request input from user
  System.out.println("Enter the first name that you would like to search for:");

  // Setting variable to capture input
  String inputSearch = inData.next();

  // Creating an iterator to search through the list
  iterator = list.iterator(); 

  // While loop to search each entry
  while (iterator.hasNext())
  {
      if (iterator.next().getFirstName().equals(inputSearch))
      {
          System.out.println("MATCH FOUND: " + iterator.next());
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:03:14.257

你打`iterator.next()`了两次电话。第二次将超过您想要的项目。相反，保存第一次调用的返回值`iterator.next()`并使用它。

```
 while (iterator.hasNext())
  {
      Name item = (Name) iterator.next();

      if (item.getFirstName().equals(inputSearch))
      {
          System.out.println("MATCH FOUND: " + item);
      }
  } 
```

或者，更惯用的说法

```
 for (Name item : list)
  {
      if (item.getFirstName().equals...
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T23:04:17.350

```
while (iterator.hasNext())  {  
   if (iterator.next().getFirstName().equals(inputSearch)) {  //iterator.next()          
                   System.out.println("MATCH FOUND: " + iterator.next());  //iterator.next()     
     }   
 } 
```

由于您调用 next() 两次，因此在打印时它将是下一个对象。

尝试将 iterator.next() 返回的任何内容存储在其相应的类型中，并在成功时使用它进行比较和打印。

前任：

```
while(iterator.hasNext(){
   Name name=iterator.next();
  if(name.getFirstName().equals(inputSearch)){
      System.out.println("Match Found"+name);
     }
} 
```

这是我看到的错误。别的什么都不知道。

# java - 在java中，我如何找到第n个斐波那契数？

> ID：13021102
> 
> 赞同：6
> 
> 时间：2012-10-22T22:51:22.853
> 
> 标签：java, loops, for-loop, fibonacci

确定斐波那契数列很容易弄清楚：

```
int num = 0;
int num2 = 1;
int loop;
int fibonacci;
System.out.print(num2);
for (loop = 1; loop <= 10; loop ++)
{
    fibonacci = num + num2;
    num = num2;
    num2 = fibonacci;
    System.out.print(" " + fibonacci);
} 
```

我的问题在于试图确定指定*N*的值。如，如果我想找到序列中的第 6 个元素，即 8，我将如何找到那个数字，并且只有那个数字？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T22:56:07.387

在您的代码中，`num`从第 0^个斐波那契数开始，然后`num1`作为第 1^个。因此，要找到第 n^个，您必须迭代步数`n`：

```
for (loop = 0; loop < n; loop ++)
{
    fibonacci = num + num2;
    num = num2;
    num2 = fibonacci;
}
System.out.print(num); 
```

并且仅在完成后打印。

当循环计数器`loop`的值为`k`时，`num`保存第 k^个斐波那契数和`num2`第 (k+1)^个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:06:20.650

要找到第 n 个数字，我们需要知道斐波那契数的长度。`Integer.toString(int)`您可以使用 Java 的函数将 int 转换为字符串。使用该字符串，可以确定转换后的斐波那契数的长度。

编辑：删除代码 b/c 可能是 hwk 问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-08T07:40:07.677

```
int n=5;//position of the fibonacci number to find
int fibonacci=0,num=0,num2=1;
for(int loop=1;loop<n;loop++)
{
   fibonacci=num+num2;
   num=num2;
   num2=fibonacci;
}
System.out.println(num); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-10T13:31:20.397

```
import java.util.Scanner;
public class fibonacci{
public static void main(String[]args){
    Scanner i=new Scanner(System.in);
    String n=System.getProperty("line.separator");

    int count=0,x=0,y=1,sum;

    System.out.println("Enter a number:  ");
    int n=i.nextInt();

    for(count=0;count<n;count++){
        System.out.print(" "+ x);
        sum=x+y;
        x=y;
        y=sum;
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-26T07:22:29.437

```
public static void main(String[] args) {
    Scanner s = new Scanner(System.in);

    int n = s.nextInt();
    int num = 1;
    int num2 = 1;
    int fibonacci;

    for (int i=1; i<n; i++) {
        fibonacci = num + num2;
        num = num2;
        num2 = fibonacci;
    }
    System.out.print(num);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-11T02:27:30.230

我希望我的回答有帮助。我试图用动态编程方法来解决它。您只需要跟踪两个元素直到 n 之前的一个索引。当您的代码在那里时，答案将是元素 n-1 和 n-2 的总和。

```
public class Fibonacci {

public static void main(String[] args) {
    System.out.println(fib(12));
}

/**
 * Calculate the Fibonacci of n with two int variables and one temp variable. This is using dynamic programming.
 * Time complexity of this approach is O(n). Space complexity of this approach is O(k).
 * 0,1,1,2,3,5,8,13,21,34,55,89,144,...
 *
 *
 * @param n The nth Fibonacci number
 * @return The nth Fibonacci
 */
public static int fib(int n) {
    if (n == 0 || n == 1) {
        return n;
    }
    // Element 1
    int element1 = 0;
    // Element 2
    int element2 = 1;
    // Move the 2 elements window till one index before the nth.
    for (int i = 2; i < n; i++) {
        // Move the 2 elements window forward.
        int temp = element2;
        element2 = element1 + element2;
        element1 = temp;
    }
    // Return the nth Fibonacci by summing Fibonacci n-1 and n-2
    return element1 + element2;
} 
```

}

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-24T14:47:59.243

```
import acm.program.*;

public class FibonacciToN extends ConsoleProgram {

    public void run() {

        println("This program will display a table of Fibonacci numbers up to value n.");
        int n = readInt("Enter an integer for value n: ");
        int result = sequence(n);  

    }

    private int sequence(int n) {

        int a = 0;
        int b = 1;

        while (a < n) {  
            println(a); 
            a = a + b;
            b = a - b;
            }

        return a;
    }
} 
```

# python - django模型中的继承和保存数据

> ID：13021103
> 
> 赞同：1
> 
> 时间：2012-10-22T22:51:31.653
> 
> 标签：python, django

我有一个问题，我有模型：

```
class Student (User):    
    student_number = models.IntegerField() 
```

然后我做：

```
user = Student()
#some code here
user.last_name = 'last_name'
user.student_number = 22 
```

并在调用 save 方法后：

```
user.save() 
```

只有字段 last_name 被更改，但在调用之后：

```
user.student.save() 
```

只有字段 student_number 被更改......两种方法都不起作用......那么，如何以正确的方式更新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:18:56.113

那是不可能的。如果您只是继承模型，那么您拥有其中的所有属性并直接调用 save 方法将保存它，前提是您没有以错误的方式覆盖 save 方法。我的意思是，

```
user.save() 
```

应该工作得很好。可能是你在某个地方犯了一些错误，请检查一下。否则，请发布您现在评论的代码。

# ios - 弹出 UIPickerView

> ID：13021104
> 
> 赞同：0
> 
> 时间：2012-10-22T22:51:43.507
> 
> 标签：ios, xcode, uipickerview

我知道很多人都问过同样的问题，我已经尝试了很多，我不知道我错过了什么，我仍然可以让它工作。

我有一个 9*9 的表格，我想显示和更改，因为 Iphone 屏幕的大小，我想一次显示一列。我想要的是按下左上角的按钮，UIPickerView 将弹出允许我选择要显示的列，然后重新加载 UITextFields。

谁能给我一个详细的答案？在这（几个月）中我还是比较新的。先感谢您。

![9*9桌](../Images/2711ade3ce2083c0bc2cfab9445908fe.png)

```
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil 
                                                delegate:nil
                                                cancelButtonTitle:nil
                                                destructiveButtonTitle:nil
                                                otherButtonTitles:nil];

[actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];
pickerView.showsSelectionIndicator = YES;
pickerView.dataSource = self;
pickerView.delegate = self;

[actionSheet addSubview:pickerView];

UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray     arrayWithObject:@"Close"]];
closeButton.momentary = YES; 
closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
closeButton.tintColor = [UIColor blackColor];
[closeButton addTarget:self action:@selector(dismissActionSheet:)   forControlEvents:UIControlEventValueChanged];
[actionSheet addSubview:closeButton];
[closeButton release];

[actionSheet showInView:[[UIApplication sharedApplication] keyWindow]];

[actionSheet setBounds:CGRectMake(0, 0, 320, 485)]; 
```

上面是我找到的代码，它弹出好了，我在将数组添加到pickerview时遇到问题，谁能告诉我dismissActionSheet方法应该如何？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:22:32.017

好的，所以我想我明白你在问什么，如果这不是你需要帮助的，请纠正我......但是要将一个数组（可能是 NSStrings）添加到你需要使用`- (NSString *)pickerView:titleForRow:forComponent:`委托方法的选择器视图中。这是一个简单的例子：

```
//Say you have an array of strings you want to present in the pickerview like this
NSArray *arrayOfStrings = [NSArray arrayWithObjects:@"One", @"Two", @"Three", @"Four", nil];

//First we need to say how many rows there will be in the pickerview
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return [arrayOfStrings count];
}

//Do the same for components (columns) in pickerview
    - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}
//Here we set the actual title/string on the pickerview
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{
    if(component==0){
        //Grab the nth string from array
        return [arrayOfStrings objectAtIndex:row];
    }
}
//This is called if a user taps a row
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{
    if(component==0)
    NSLog(@"The User Selected the row titled %@", [arrayOfStrings objectAtIndex:row]);
} 
```

与操作表类似，您需要添加委托方法来处理用户单击操作表上的按钮

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{
    if(buttonIndex==0){
        NSLog(@"First Button Clicked");
    } else if( buttonIndex == 1){
        NSLog(@"Second Button Clicked");
    }
} 
```

# php - 没有给出 mime 类型

> ID：13021110
> 
> 赞同：4
> 
> 时间：2012-10-22T22:52:20.930
> 
> 标签：php, mime-types

我目前正在构建一个允许用户上传文件的 PHP 应用程序。我目前在上传页面，但我的验证系统不起作用。我正在使用此系统将文件验证为音频文件。

```
// Set our file name and extension
$fname     = $_FILES['file']['name'];
$extension = strtolower(substr($fname, strpos($fname, '.') + 1));

// Check file
if ($extension == 'mp3' && $_FILES['file']['type'] == 'audio/mpeg') {
    //File is valid mp3
} else {
    //File is invalid
} 
```

现在这不起作用，但奇怪的是，当我回显时，`$_FILES['file']['type']`它不会回显音频文件的 mime 类型。当我对任何其他文件类型执行此操作时，它会成功回显。

它不仅仅为音频文件提供 mime 类型。我已经尝试过使用 WAV 和 M4A 文件，但它也不会返回任何这些文件。是文件类型的问题，还是我必须在我的 xampp 服务器中编辑 .htaccess 文件或 MIME.types 文件。还有更好的方法来验证上传的文件吗？

另请注意，它在我的 xampp 服务器和我用于测试目的的免费服务器上执行此操作。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:55:22.297

`$_FILES['file']['type']`来自上传文件的浏览器，所以你根本不能依赖这个值。

检查[`finfo_file`](http://www.php.net/manual/en/function.finfo-file.php)根据文件内容识别文件类型。该文件的扩展名也不可靠，因为用户可以上传带有 mp3 扩展名的恶意代码。

# unity-container - 在不知道实现类型的情况下在 Unity 框架中重新注册 ContainerRegistration

> ID：13021119
> 
> 赞同：0
> 
> 时间：2012-10-22T22:53:38.677
> 
> 标签：unity-container

我将 Unity Application 块用作简单的服务定位器。

我正在注册简单的对象，如下所示：

```
_serviceContainer.RegisterType<ISessionManager, SessionManager>(); 
```

我想通过仅指定 ISessionManager 在我的应用程序的其他位置重新注册该注册，这样我就不会在我的应用程序中分散接口实现逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:17:36.340

您不应滥用 Unity 作为服务定位器。[ServiceLocator 被认为是现代软件架构中的一种反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。

您不应在应用程序的多个位置注册映射。在您的应用程序中应该有一个[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)，您可以在其中连接依赖容器并解析应用程序的主要对象。您的容器不应出现在组合根之外的应用程序代码中。

如果你坚持让你的架构保持原样：

```
_serviceContainer.RegisterInstance<ISessionManager>(mySessionManagerObject); 
```

应该覆盖您的注册。但请注意，在应用程序运行时重新注册该依赖项可能会影响应用程序的其他部分。

# php - mysqli准备问题

> ID：13021122
> 
> 赞同：0
> 
> 时间：2012-10-22T22:53:43.420
> 
> 标签：php, mysql, database, mysqli, syntax-error

我`$mysqli->prepare`对以下代码有疑问：

```
if (!($stmt = $mysqli->prepare("INSERT INTO `Orders` (OrderID,IP.Email.File,Cat,Price,Discount,Size,Scaleby,Emailed,Downloaded,Payment,DateTime) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?)"))) {
echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
} 
```

当前代码：

```
if (!($stmt = $mysqli->prepare("INSERT INTO `Orders` (OrderID,IP,Email,File,Cat,Price,Discount,Size,Scaleby,Emailed,Downloaded,Payment,DateTime) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)"))) {
echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
} 
```

错误信息：

> 准备失败：（1136）列计数与第 1 行的值计数不匹配

用于制作表格的代码：

```
if ($mysqli->query('CREATE TABLE IF NOT EXISTS `Orders` (
ID BIGINT NOT NULL AUTO_INCREMENT,
PRIMARY KEY(ID),
OrderID CHAR(40),
IP CHAR(40),
Email VARCHAR(254),
File VARCHAR(30),
Cat VARCHAR(30),
Price DEC(5,2),
Discount DEC(3,2),
Size VARCHAR(30),
Scaleby DEC(3,2),
Emailed BOOL,
Downloaded BOOL,
Payment VARCHAR(30),
DateTime DATETIME)') === False){
printf("Error: %s\n", $mysqli->error);
} 
```

**我已**尝试删除`(...)`以`INSERT INTO...`尝试修复错误，但没有奏效。**我也**尝试将其简化为 3`?`分，但它仍然不起作用。

**`?`标记是准备好的语句中的占位符**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:55:52.637

问题不在于表中的列数，而在于`insert`语句中存在拼写错误。您有“IP.Email.File”而不是“IP,Email,File”，因此数据库引擎认为您的列数与插入语句中指定的文字数不同。

```
INSERT INTO `Orders`

-- 11 columns here, because "IP.Email.File" parses as one column
(OrderID,IP.Email.File,Cat,Price,Discount,Size,Scaleby,Emailed,Downloaded,Payment,DateTime) 

-- 13 values here
VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?) 
```

# ruby-on-rails-3 - Rails 处理在现有模型上添加必需属性的方法是什么

> ID：13021129
> 
> 赞同：1
> 
> 时间：2012-10-22T22:54:20.913
> 
> 标签：ruby-on-rails-3, rails-migrations

例如，我最近在我的用户模型中添加了“地址”字段。他们正在通过存在来验证。所以现在，当我去更新一个不同的属性时，例如电子邮件，我无法保存用户，因为它有无效的字段（地址仍然是空白的）。

您只需要使用空白字符串或其他东西迁移数据吗？

Rails 的处理方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:48:23.403

处理此问题的一种方法是在创建它的迁移中填充新字段。这样，您可以确保数据库中的所有内容根据模型都是有效的。该[指南](http://guides.rubyonrails.org/migrations.html#using-models-in-your-migrations)有一些关于这样做的指示 - 有几个问题。

另一种方法是通过选项指定验证仅在创建时运行，而不是在更新时运行`:on`。这可能看起来像：

```
validates :address, :presence => true, :on => :create 
```

这样，任何新用户都必须设置地址，但您仍然可以编辑现有用户的其他属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:43:57.780

我建议您每次添加新字段并对其进行验证时进行迁移。它将保持数据的完整性和一致性。

如果您真的想要做一个技巧，在验证中添加条件，在保存时有条件地放置“验证：false”，在修改现有记录时为地址字段添加空白值，所有这些都是您可以使用的技巧。

我还建议，当您添加地址时，创建一个地址模型并在需要它的其他模型中共享它，而不是仅在模型中添加字段。这将使您的验证更加灵活。

# bash - 在 awk 中重置行号计数

> ID：13021130
> 
> 赞同：4
> 
> 时间：2012-10-22T22:54:25.657
> 
> 标签：bash, awk

我有这样的文件

## 文件.txt

```
0   1   a
1   1   b
2   1   d
3   1   d
4   2   g
5   2   a
6   3   b
7   3   d
8   4   d
9   5   g
10   5   g
.
.
. 
```

`$1`每当第二列中的字段值`$2`发生更改时，我希望使用 awk 或 bash 脚本将第一列中的行号计数重置为 0 。

## 结果

```
0   1   a
1   1   b
2   1   d
3   1   d
0   2   g
1   2   a
0   3   b
1   3   d
0   4   d
0   5   g
1   5   g
.
.
. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T01:14:49.137

只要你不介意内存使用过多，并且第二列是排序的，我认为这是最好玩的：

```
awk '{$1=a[$2]+++0;print}' input.txt 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T23:41:16.870

这个 awk 单线似乎对我有用：

```
[ghoti@pc ~]$ awk 'prev!=$2{first=0;prev=$2} {$1=first;first++} 1' input.txt
0 1 a
1 1 b
2 1 d
3 1 d
0 2 g
1 2 a
0 3 b
1 3 d
0 4 d
0 5 g
1 5 g 
```

让我们分解脚本，看看它做了什么。

*   `prev!=$2 {first=0;prev=$2}`-- 这就是重置你的计数器的原因。由于初始状态`prev`为空，我们在输入的第一行重置，这很好。
*   `{$1=first;first++}`-- 对于每一行，设置第一个字段，然后增加我们用来设置第一个字段的变量。
*   `1`-- 这是“打印行”的 awk 简写。这确实是一个总是评估为“真”的条件，当一个条件/语句对缺少一个语句时，该语句默认为“打印”。

非常基本，真的。

当然，一个问题是，当您更改 awk 中任何字段的值时，它会使用设置的任何字段分隔符重写该行，默认情况下它只是一个空格。如果你想调整这个，你可以设置你的`OFS`变量：

```
[ghoti@pc ~]$ awk -vOFS="   " 'p!=$2{f=0;p=$2}{$1=f;f++}1' input.txt | head -2
0   1   a
1   1   b 
```

盐调味。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T23:45:16.287

一个纯[bash](/questions/tagged/bash "显示标记为“bash”的问题")解决方案：

```
file="/PATH/TO/YOUR/OWN/INPUT/FILE"

count=0
old_trigger=0

while read a b c; do
    if ((b == old_trigger)); then
        echo "$((count++)) $b $c"
    else
        count=0
        echo "$((count++)) $b $c"
        old_trigger=$b
    fi

done < "$file" 
```

该解决方案（恕我直言）具有使用可读算法的优势。我喜欢其他人给出的答案，但这对初学者来说并不*全面*。

**注意**：

`((...))`是一个算术命令，如果表达式非零，则返回退出状态 0，如果表达式为零，则返回 1。`let`如果需要副作用（分配），也用作 的同义词。见[http://mywiki.wooledge.org/ArithmeticExpression](http://mywiki.wooledge.org/ArithmeticExpression)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T23:14:53.533

Perl 解决方案：

```
perl -naE '
    $dec  =  $F[0] if defined $old and $F[1] != $old;
    $F[0] -= $dec;
    $old  =  $F[1];
    say join "\t", @F[0,1,2];' 
```

`$dec`每次从第一列中减去。当第二列发生变化（其先前的值存储在 中`$old`）时，`$dec`增加以再次将第一列设置为零。第一`defined`行工作需要条件。

# ruby-on-rails - 为什么 Jekyll 在我创建新帖子时会创建包含 index.html 文件的新目录？

> ID：13021132
> 
> 赞同：3
> 
> 时间：2012-10-22T22:54:36.437
> 
> 标签：ruby-on-rails, rack, jekyll

我在某处缺少设置吗？生成站点时，_posts 目录中的降价文件本身会转换为目录。这些目录中的每一个都有一个包含内容的 index.html 文件。

我显然更喜欢在不为每个帖子创建新目录的情况下生成帖子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T04:34:50.760

这与您将永久链接配置为具有漂亮的永久链接的方式有关。如果您不想要漂亮的永久链接，而只想拥有自己的 .html 文件而不是在自己的目录中，请在 _config.yml 文件中尝试更改

```
permalink: pretty 
```

至

```
permalink: date 
```

或者

```
permalink: none 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:50:55.217

目录有什么问题？如果您不希望您的帖子以 .html 结尾（我假设您不这样做），那么您肯定需要使用 directory/index.html 以使其可靠地工作，而不依赖于给定网络服务器的细节。目录很便宜。您也可以使用它们 - 这不像您手动通过 _site 目录。

# get - 从创建的c#中的特定标签获取值

> ID：13021134
> 
> 赞同：1
> 
> 时间：2012-10-22T22:54:38.260
> 
> 标签：get, controls, tagname

如何获取 de control aspx 中的值？

样本。

```
 <asp:TextBox ID="TextBox1" tag="value_test2"
        runat="server"></asp:TextBox> 
```

我想从 tag="..." 中获取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:02:32.410

```
var value = TextBox1.Attributes["tag"].Value 
```

# html - 带有特殊字符的 HTML 表单提交

> ID：13021136
> 
> 赞同：0
> 
> 时间：2012-10-22T22:54:51.460
> 
> 标签：html

我正在尝试提交其值为 Transaction ID-sample 的表单字段。提交日期时，值为 Transaction ID ？样本

我该如何摆脱？

我对破折号/长破折号/短破折号使用了 HTML 特殊代码，但仍然将值提交为？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:12:55.937

确保正确发送所有输入字符的唯一方法是对表单数据使用 UTF-8 字符编码。如果包含表单的页面是 UTF-8 编码的（并声明为），则会自动发生这种情况；否则，使用`accept-charset=utf-8`表单数据中的参数。

自然，您的表单处理程序必须准备好处理 UTF-8 编码的数据。

# c++ - 将 char* 整数数组转换为十六进制

> ID：13021137
> 
> 赞同：2
> 
> 时间：2012-10-22T22:54:53.213
> 
> 标签：c++

我有一个将整数值存储为自定义字符串类型的结构。

```
typedef char OneLine[MAX_LINE + 1]; 
```

所以我有一些实例，我希望将包含**"12"**的字符串转换为 **C**。

```
OneLine testString;
strcpy(testString, "12");

I'd like a way for me to convert testString to be "C" 
```

我应该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:58:14.610

您可以使用`sscanf`将“12”转换为整数 12。然后您可以使用`sprintf`with `%x`format 将整数 12 转换为“C”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:03:04.157

可以使用 stringstreams 完成转换

```
#include <iostream>
#include <sstream>
#include <string>
#include <ios>

int main()
{
  char const *str = "12";
  std::istringstream iss( str );
  int val;

  if( !( iss >> val ) ) { 
    // handle error 
  }
  std::ostringstream oss;

  oss << std::hex << val;
  std::cout << oss.str() << std::endl;
} 
```

* * *

或者使用 C++11 稍微不那么冗长的方式

```
char const *str = "12";
auto val = std::stoi( str );

std::ostringstream oss;
oss << std::hex << val;
std::cout << oss.str() << std::endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:13:26.373

首先，即使您要手动执行此操作，也不应将 char 数组用于字符串。使用`std::[w]string`.

其次，您可以这样做`std::[w][i|o]stringstream`：

```
istringstream iss("12");
int number;
iss >> number;

ostringstream oss;
oss << hex << number;

const string& hexNumber = oss.str();
// hexNumber now contains "C" 
```

# ruby-on-rails-3 - Rails 和 Postgres - 在跳过 created_at 列时从 .cvs 复制到表

> ID：13021145
> 
> 赞同：4
> 
> 时间：2012-10-22T22:55:23.617
> 
> 标签：ruby-on-rails-3, csv, postgresql-9.1

我的客户给了我一个项目的车辆清单。我需要将它们放入我可以使用的表中，但它们当前位于 .cvs 文件中。我已经[阅读](http://www.postgresql.org/docs/9.1/interactive/sql-copy.html) 并[找到](https://stackoverflow.com/questions/2987433/how-to-import-csv-file-data-into-a-postgres-table)[了](http://wiki.postgresql.org/wiki/COPY)一些信息，但没有解决我的特定问题。

我已经生成了一个与 .cvs 文件（id、年份、品牌、型号、修剪）中的信息匹配的模型，运行迁移，现在有了我需要的表。当我尝试使用 psql COPY 时出现问题。这是我读过的内容：

```
copy list_vehicles from '/path/to/list.csv' DELIMITERS ',' CSV; 
```

但它给了我

```
ERROR:  missing data for column "created_at" 
```

好吧，所以我试试这个：

```
copy list_vehicles (id, year, make, model, trim)  from '/path/to/list.csv' DELIMITERS ',' CSV; 
```

我回来了

```
ERROR:  null value in column "created_at" violates not-null constraint 
```

好的，那么这应该可以工作：

```
copy list_vehicles (id, year, make, model, trim)  from '/path/to/list.csv' DELIMITERS ',' WITH NULL AS ' ' CSV FORCE NOT NULL created_at; 
```

不，

```
ERROR:  FORCE NOT NULL column "created_at" not referenced by COPY 
```

我不知道从这里去哪里。我正在考虑暂时取消 created_at 列，然后将其添加到另一个迁移中？任何指导将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:06:06.820

`created_at`大多数情况下，当您运行迁移为新模型创建表时，Rails 会自动生成该列。当您在应用程序中创建新模型对象时，它通常由 Rails 默认代码填充。

但是，您将数据直接加载到数据库中，绕过了所有 Rails 代码。这很好，但您还需要做 Rails 所做的事情。

我认为最简单的方法是`created_at`直接从数据库中删除和其他列，加载您的 CSV 文件，然后重新添加这些列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:39:26.220

您还可以让 Postgres 从 STDIN 读取数据，允许您在加载数据之前对其进行修改。

我使用这样的东西，它未经测试，但应该给你一个大纲。

```
connection = ActiveRecord::Base.connection.raw_connection

connection.exec("COPY #{tablename} (#{fields},created_at,updated_at) FROM STDIN")

data = File.open(datafile)
data::gets # abandon the header line (if needed)
data.each_with_index do |line, index|
  connection.put_copy_data(line + ",,")
end

connection.put_copy_end

res = connection.get_result
if res.result_error_message
  puts "Result of COPY is: %s" % [ res.result_error_message ]
end 
```

# validation - 转换为 long 并验证

> ID：13021148
> 
> 赞同：1
> 
> 时间：2012-10-22T22:55:52.197
> 
> 标签：validation, jsf, converter, long-integer

我有一个带有 ICEfaces 组件的表单的 Facelets 页面。`empId`是一个长类型属性，必须检查 bean 中是否为 null。它采用`String`形式，我将其转换为 long 类型`Long.valueof(empId).longValue();`，以便将其传递给 DAO 以检查 DB 列。

这是我们应该做的方式吗？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:04:02.230

您想使用`Long`属性而不是`String`属性来强制`Long`通过 JSF/EL 自动转换为（即标准和类型的内置`Number`转换）`Boolean`。`Enum`

```
private Long empId; 
```

和

```
<h:inputText value="#{bean.empId}" /> 
```

您想使用`required`属性来验证所需的输入。

```
<h:inputText value="#{bean.empId}" required="true" /> 
```

可以使用 显示任何转换或验证错误消息`<h:message>`。

```
<h:inputText id="empId" value="#{bean.empId}" required="true" />
<h:message for="empId" /> 
```

如有必要，您可以按如下方式更改转换和所需消息：

```
<h:inputText id="empId" value="#{bean.empId}" required="true" 
    requiredMessage="Please enter employee ID." 
    converterMessage="Please enter digits only." />
<h:message for="empId" /> 
```

这样你就不需要在 bean 的 action 方法中执行任何转换/验证，无论如何这都是错误的地方。您应该使用 JSF 内置转换器或自定义`Converter`转换和 JSF 内置验证器或自定义`Validator`进行验证。支持 bean 属性应该已经拥有正确的类型，支持 bean 操作方法不应该进行任何转换/验证。

我只是想知道用于检查列的 DAO 方法调用是否不能由 custom 更好地处理`Validator`，但这完全取决于问题中不清楚的具体功能要求。

# regex - sed：混合显式和正则表达式短语

> ID：13021150
> 
> 赞同：1
> 
> 时间：2012-10-22T22:55:55.670
> 
> 标签：regex, bash, sed

我正在尝试编写一个 sed 命令来删除后跟两位数字的特定字符串。到目前为止，我有：

```
sed -e 's/bizzbuzz\([0-9][0-9]\)//' file.txt 
```

但我似乎无法正确使用语法。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:57:02.930

```
sed -re 's/bizzbuzz[0-9]{2}//' file.txt 
```

和

```
sed -re 's/\bbizzbuzz[0-9]{2}\b//' file.txt 
```

如果搜索到的字符串有[*单词边界*](http://www.regular-expressions.info/wordboundaries.html)

```
sed -e 's/bizzbuzz[0-9]\{2\}//' file.txt 
```

如果你没有`GNU sed`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:59:23.237

您当前的方法似乎应该可以正常工作：

```
$ echo 'FOO bizzbuzz56 BAR' | sed -e 's/bizzbuzz\([0-9][0-9]\)//'
FOO  BAR 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T02:59:21.453

正如其他答案中所说，语法似乎很好（带有不必要的括号）。但是您可能想替换每行中的*所有*字符串吗？在这种情况下，您应该在“s”命令的末尾添加一个“g”：

`sed -e 's/bizzbuzz\([0-9][0-9]\)//g' file.txt`

# r - ggplot2 手动为每个 geom_point 添加图例

> ID：13021158
> 
> 赞同：1
> 
> 时间：2012-10-22T22:56:44.673
> 
> 标签：r, ggplot2

我使用 2 个单独的数据集创建了一个图，以便创建不同的误差线。第一个数据集的误差线只下降，而第二个数据集的误差线只上升。这可以防止图中不必要的重叠。我还为其中一个组使用了复合形状。

我想根据这些形状（不是颜色）创建一个图例，但我似乎无法弄清楚。这是情节代码。

```
p <-ggplot()
p + geom_point(data=df.figure.1a, aes(x=Hour, y=Mean), shape=5, size=4) +
    geom_point(data=df.figure.1a, aes(x=Hour, y=Mean), shape=18, size=3) +
    geom_errorbar(data=df.figure.1a, aes(x=Hour, y=Mean, ymin = Mean - SD, ymax = Mean), size=0.7, width = 0.4) +
    geom_point(data=df.figure.1b, aes(x=Hour, y=Mean), shape=17, size=4) +
    geom_errorbar(data=df.figure.1b, aes(x=Hour, y=Mean, ymin = Mean, ymax = Mean + SD), size=0.7, width = 0.4) 
```

# c++ - c++ 程序在 Cygwin4（在 Netbeans 7.2 下）调试得很好，但在 MinGW（在 QtCreator 4.8.1 下）调试不好

> ID：13021160
> 
> 赞同：0
> 
> 时间：2012-10-22T22:57:02.740
> 
> 标签：c++, qt4, cygwin, mingw, netbeans-7

我有一个 c++ 程序，它接受一个地图文本文件并将其输出到我制作的图形数据结构中。我正在使用 QT，因为我需要跨平台程序和 GUI 以及地图的可视化表示。我有几张不同尺寸的地图（8x8 到 4096x4096）。我正在使用 unordered_map，向量作为键，顶点作为值，我正在发送 hash(1) 和我在创建时写入 unordered_map 的 equal 函数。

在 QT 下，我正在使用 QT 4.8.1 for desktop MinGW (QT SDK) 调试我的程序，该程序可以正常工作和调试，直到我尝试了 4096x4096 的最大地图，然后程序遇到以下错误：

> 下级停止了，因为它收到了来自操作系统的信号

调试时，程序在 unordered_map 内部使用的哈希函数处停止，而不是作为插入状态的一部分，而是在 getter(2) 处。

在 Netbeans IDE 7.2 和 Cygwin4 下一切正常（调试和运行）。

一些代码信息：

```
 typedef std::vector<double> coordinate;
`typedef std::unordered_map<coordinate const*, Vertex<Element>*, container_hash, container_equal> vertexsContainer;`

`vertexsContainer *m_vertexes` 
```

(1) 哈希函数：

```
struct container_hash
{
    size_t operator()(coordinate const *cord) const
    {
        size_t sum = 0;
        std::ostringstream ss;

        for ( auto it = cord->begin() ; it != cord->end() ; ++it )
        {
           ss << *it;
        }

        sum = std::hash<std::string>()(ss.str());
        return sum;
    }
}; 
```

(2) 吸气剂：

```
template <class Element>
Vertex<Element> *Graph<Element>::getVertex(const coordinate &cord)
{
    try
    {
        Vertex<Element> *v = m_vertexes->at(&cord);
        return v;
    }
    catch (std::exception& e)
    {
        return NULL;
    }
} 
```

一开始我在想这可能是一些内存问题，所以在我考虑尝试 Netbeans 之前，我在我朋友的 16GB RAM 电脑上用 QT 检查了它，并得到了同样的错误。

**更新：** 我尝试在 Visual Studio 2012 上运行它，我遇到了一个 bad_alloc 错误，它停止了我的程序，当查看任务管理器时，我看到分配给程序的内存高达 2GB，可能是因为它是一个 32 位程序吗？

**更新** 我用 32 位架构和 Cygwin4 在 Netbeans 下调试了我的程序，一切正常，所以也许这不是 32 位问题，netbeans 使用的内存也是 1.5GB，那么在 MinGW 和 VS2012 中它如何达到 2GB？

# javascript - JavaScript - 点击后收到多个信号

> ID：13021169
> 
> 赞同：2
> 
> 时间：2012-10-22T22:58:11.150
> 
> 标签：javascript, jquery-mobile

我正在使用 jQueryMobile 创建一个 webapp。当我使用该应用程序并单击一个按钮时，它会多次运行该脚本。

*例如：*

我有一个提交按钮：

```
<input type="submit" id="login-normal" value="Login" /> 
```

我有这个 JavaScript 用于调试发生此错误的原因：

```
$("input#login-normal").live('click',function() {
     console.log("Test");
}); 
```

在第一次单击时它可以工作（例如，它会转到另一个屏幕），但是当我返回该屏幕并再次单击时，它会输出多个 console.logs

*   编辑

这是我的 .js 文件中的确切代码。

```
$("div#login input#login-normal").live('click',function() { 
    var email = $("input#email").val();
    var password = $("input#password").val();

    user.checkUser(email, password, function(exists) {
        if (exists) {
            $.mobile.changePage("#home", { transition: "slidedown"});
        } else {
            console.log("Wrong email or password.");
        }
    });
    console.log("Login");
}); 
```

user.checkUser 是我的 User 类中的一个对象，它检查用户是否存在于数据库 (WebSQL) 中。在回调中返回 true 或 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:21:12.877

你可以使用`on`而不是`live`尝试一下吗

```
$("input#login-normal").off('click').on('click',function() {
    //...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:20:52.377

尝试

```
$.mobile.activePage.find("div#login input#login-normal").live('click',function() {...} 
```

如果仍然多次触发，您可以尝试

```
$(document).delegate("[data-role=page]", "pagebeforeshow", function () {                
        $("div#login input#login-normal").bind("click", function (e) {...}
} 
```

# java - 如何为安卓游戏加载位图？

> ID：13021178
> 
> 赞同：0
> 
> 时间：2012-10-22T22:59:08.807
> 
> 标签：java, android

我一直在开发一个没有位图或任何东西的游戏，我使用矩形作为对象，并根据它们的目的改变它们的颜色，比如玩家的红色矩形和墙壁的灰色矩形。我的问题是用位图/图像替换矩形的正确方法是什么？

我知道加载位图你可以这样做：

```
Bitmap randomBitmap = BitmapFactory.decodeResource(getResources(),
com.example.android4gametest.R.drawable.ic_launcher); 
```

我应该加载所有位图并将它们传递给他们的类，还是应该在他们的类中加载位图而不是传递它？以及我将如何做到这一点，因为我无法使用 BitmapFactory，因为我无法访问 getResources()！或者我应该从我的资产文件夹中加载我的位图/图像，我知道我不会有相同的“工具”，你可以说会弄乱位图。

主要活动

```
public class MainActivity extends Activity {
Game theGame;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(new Game(this));
}
} 
```

游戏面板公共类 Game 扩展 SurfaceView 实现 SurfaceHolder.Callback {

```
GameThread _thread;

public Game(Context context) {
    super(context);

    getHolder().addCallback(this);

    setFocusable(true);

    _thread = new GameThread(getHolder(), this);

}

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

public void surfaceCreated(SurfaceHolder holder) {
    _thread.setRunning(true);
    _thread.start();

}

public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}

@Override
protected void onDraw(Canvas canvas) {
    Log.d("OnDraw", "it is Drawing");
    canvas.drawColor(Color.BLUE);
}

public void update() {
    // TODO Auto-generated method stub  
}
} 
```

GameLoop 这里什么都没有

```
 public class GameThread extends Thread{
/*FPS Code*/
private final static int MAX_FPS = 30;
private static final int FRAME_PERIOD = 1000/MAX_FPS;

protected SurfaceHolder holder;
protected Game game;
private boolean isRunning = false;

public GameThread(SurfaceHolder _holder, Game _game) {
    this.holder = _holder;
    this.game = _game;
}

/**
 * Returns True if the game is still running and False if the game is over
 * @return
 */
public boolean isRunning() {
    return isRunning;
}
/**
 * Set to true for the game loop to start 
 * @param isRunning
 */
public void setRunning(boolean isRunning) {
    this.isRunning = isRunning;
}

@Override
public void run() {
    Canvas c;
    Log.d("Pallyways", "Starting game Loop");

    long beingTime;
    long timeDiff;
    int sleepTime;
    int framesSkipped;

    sleepTime = 0;

    while(isRunning){
        c = null;
        try{

            c = holder.lockCanvas();
            synchronized(holder){
                beingTime = System.currentTimeMillis();
                framesSkipped = 0;
                game.update();//Update
                game.onDraw(c);//Redraw

                timeDiff = System.currentTimeMillis() - beingTime ;
                sleepTime = (int) (FRAME_PERIOD - timeDiff);

                if(sleepTime>0){
                    try{
                        Thread.sleep(sleepTime);} 
                    catch (InterruptedException e) {
                        e.printStackTrace();}
                    finally{}
                }

                while(sleepTime<0 && framesSkipped < 5){
                    game.update();

                    sleepTime+= FRAME_PERIOD;
                    framesSkipped++;
                }

            }
        }finally{if(c!=null){
            holder.unlockCanvasAndPost(c);
        }
        }
    }
}

} 
```

英雄类我还没有开始，但我想知道如何在不同包上的类上加载位图

```
package com.example.android4gametest.Actors;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

import com.example.android4gametest.R;

public class Hero {
//getContext() gives me an error and that is because it does not have a reference

private Bitmap hero = BitmapFactory.decodeResource(getContext().getResources(),
R.drawable.ic_launcher);
public Hero(){

}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:47:02.050

不要`Bitmap`在游戏对象的构造函数中加载 。如果其中任何一个`Bitmaps`将被多个对象（即敌人类）使用，那么如果您将它们加载到对象的构造函数中，您将`Bitmap`在内存中拥有多个副本。这可能导致`OutOfMemoryException`. 而是加载您`Bitmap`的构造函数外部（在您的游戏线程或游戏面板中），然后将`Bitmap`对象传递给构造函数或设置器并以`Bitmaps`这种方式设置您的私有。您只需要`Bitmaps`在内存中保留有限的数量。

您可能还需要考虑加载“屏幕”，在加载这些`Bitmaps`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:30:47.693

根据位图的大小/数量，可以将它们加载到 Game 类的构造函数中。但是请注意，如果您一次将太多/太大的位图加载到内存中，您可能会遇到一些 OOM 错误或在进行第一次绘图调用时出现延迟。当您不再需要位图时，您必须确保将其归零并有效地回收它们。在我的第一场比赛中遇到了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:41:05.720

不要！使用动态对象.. 我的意思是根本不要在游戏中创建动态对象，这些会触发 GC 并使一切在它想要的时候运行时卡顿。您必须自己控制一切，并在障碍物和敌人上使用静态/最终“对象”和数组。对象将在启动时加载到堆中，这意味着您将加载它们直到应用程序关闭。因此，您必须在这些静态对象中拥有什么和不拥有什么之间找到平衡，但是当您找到它时就很容易了。

位图应该在这些静态非动态对象之外加载，对象应该只进行计算。

并且永远不要在你的 c = holder.lockCanvas(); 之间使用任何不必要的计算、循环或 Thread.sleep。和 holder.unlockCanvasAndPost(c); 就像您在代码中所做的那样。这可以并且最终会使游戏闪烁。

问候，我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T23:01:46.020

在哪里加载并不重要。我认为您的主要问题是访问资源。在视图中，您可以调用：

```
getContext().getResources() 
```

编辑：

所以在 Hero 的构造函数的方法签名中添加 Context 作为参数：

```
public Hero(Context context){
  private Bitmap hero = BitmapFactory.decodeResource(context.getResources(), R.drawable.ic_launcher);
} 
```

# asp.net - 在 aspx 中内联，从日期时间中剥离日期

> ID：13021179
> 
> 赞同：1
> 
> 时间：2012-10-22T22:59:13.123
> 
> 标签：asp.net

我认为，如果我只是向您展示以下内容，我的要求将是有意义的。

在我的 aspx 链接中，这有效：' title='<%# Container.DataItem["EventTime"].ToString()

但上面包含字符串的日期部分。

这不起作用（它的任何变体也不起作用）：' title='<%# Container.DataItem["EventTime"].ToString("hh:mm:ss tt", CultureInfo.InvariantCulture) %>

最终，我们希望链接的标题/悬停显示为“4:30 PM：@Forbes Field”

除了 1900 年 1 月 1 日在 4:30 之前，一切正常

如何从 EventTime 日期时间字段中获取日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:05:40.820

索引器`DataItem`返回一个`object`引用，因此您不能在`DateTime`不强制转换的情况下使用特定方法。您还可以使用以下`String.Format`方法：

```
<%# String.Format("{0:hh:mm:ss tt}", Container.DataItem["EventTime"]) %> 
```

# xml - Servlet 上未找到类异常

> ID：13021180
> 
> 赞同：2
> 
> 时间：2012-10-22T22:59:14.243
> 
> 标签：xml, maven, servlets, jetty

对于一个项目，我正在尝试实现[JSCSSMergeServlet](http://code.google.com/p/webutilities/wiki/JSCSSMergeServlet) servlet。

按照信中的说明并通过 Maven 启动 Jetty

我收到一条错误消息：

```
2012-10-22 17:54:14.240:WARN::Failed startup of context \
  org.mortbay.jetty.plugin.Jetty6PluginWebAppContext@7dc64183{/services,\
    C:\workspaceUI\services\src\main\webapp}
java.lang.ClassNotFoundException: \
    com.googlecode.webutilities.servlets.JSCSSMergeServlet 
```

而且我一生都无法弄清楚我为什么会得到这个。

我错过了一步吗？

我是否需要修改其他文件才能启动并运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:23:43.617

尝试将`webutilities-x.x.x.jar`包包含在`web-inf/lib`您的 Web 应用程序的目录中，或者它可以位于您的应用程序服务器/Web 服务器的其他位置`CLASSPATH`

**更新**

`webutilities-x.x.x.jar`您的应用程序无法访问该文件。[下载](http://code.google.com/p/webutilities/downloads/list)它并按照上面的说明使用它

# javascript - 保持提交按钮处于禁用状态，直到进行更改

> ID：13021182
> 
> 赞同：1
> 
> 时间：2012-10-22T22:59:29.103
> 
> 标签：javascript, jquery, asp.net

在我的 VB.NET 项目中，我有一个带有一些文本输入字段和一个保存/提交按钮的 UI。我希望保存按钮在页面加载时处于禁用状态，并保持这种状态，直到对其中一个输入进行更改。如果用户输入的值与页面加载时的值相同，则保存按钮应该再次被禁用。所以基本上，只有在实际发生变化时才应该启用保存按钮。

我怎样才能使用 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:02:57.767

```
$(':input').change( 
    function(){ 
       $("#submitButtonId").prop("disabled",false);
    } 
); 
```

既然您说它是动态的，请使用`on`.

```
$(document).on("change", ":input", 
    function(){ 
       $("#submitButtonId").prop("disabled",false);
    } 
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T23:03:07.447

你可以在`change`事件中处理

```
$('input[type="text"]').on('change', function() {

     // Change event fired..

     $('input[type="submit"]').prop('disabled', false);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T23:34:22.937

```
//This will bind all existing and dynamically added selects onChange to the handler
$(document).on('change', function(e) {
    onChangeHandler();
}

// handle the event
function onChangeHandler() {
    if (checkValues()) {
       $('#yourButtonId').prop("disabled", false);
    }
    else {
       $('#yourButtonId').prop("disabled", true);
    }
}

// check all values against originals - data-* attributes are a good way to store data on 
// an element. So have you can have:
<select id="id1" data-originalvalue="myValue"></select>

// compare the current value to the original value - if any one of them differ, return
// true
function checkValues() {
    $.each($('select[data-originalvalue]'), function() {
       if ($(this).val() !== $(this).attr(data-originalvalue){
           return true;
       }
       return false;
    });
} 
```

# javascript - 提交带有输入文件的表单后，$_FILES 数组为空

> ID：13021188
> 
> 赞同：0
> 
> 时间：2012-10-22T23:00:47.630
> 
> 标签：javascript, jquery, forms, input

我有一个表单，您必须通过添加链接或上传图像来添加图像。当您加载页面时，有一个 url 的输入文本，并且我编写了一个按钮，用于将输入文本的 HTML 更改为输入文件之一。

效果很好，但是提交表单时出现问题，该动态上传输入的 $_FILE 数组不存在。

这是交换输入的javascript代码：

```
function SwapImageMode()
{
    if(imageMode == 0)
    {
        imageMode = 1;
        $("#f_imagearea").html("<input type='file' name='addon_imgupld' id='f_upimgimput' name='addon_imgupld' style='margin-bottom:7px;' accept='image/*' onchange='inputFileChange();'/>");
    }
    else if(imageMode == 1)
    {
        imageMode = 0;
        $("#f_imagearea").html("<input type='text' name='addon_imgurl' class='styled_imput f_imgimput' onFocus=imgUrlImputFocus(); onBlur=imgUrlImputBlur(); />");  
    }
} 
```

表单提交时的php代码：

```
if(isset($_POST["addon_imgurl"]) && !isset($_POST["addon_imgupld"]))
{
    $formImgMethod = 1; // link
}
else if(isset($_POST["addon_imgupld"]) && !isset($_POST["addon_imgurl"]))
{
    $formImgMethod = 2; // upload
}

if($formImgMethod == 2)
{
    echo($_FILES["addon_imgupld"]["name"]);
} 
```

这是php的错误：

```
Notice: Undefined index: addon_imgupld in
C:\xampp\htdocs\addexp\agregar\index.php on line 49 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:55:10.550

该错误非常简单。您正在尝试访问一个不存在的数组键，因此您需要检查不同类型的表单提交。

只需在 PHP 表单处理程序中编写一个简单的条件：

```
if( !empty($_FILES["addon_imgupld"]) ){
  //file input
} elseif( !empty($_REQUEST["addon_imgurl"]) ) {
  //text input
} else {
  //error?
} 
```

您将希望将 $_REQUEST 与发出的任何类型的请求交换（$_POST，我假设...）。

更新：：

这个条件是错误的：

```
else if(isset($_POST["addon_imgupld"]) && !isset($_POST["addon_imgurl"])) 
```

应该：

```
else if(isset($_FILES["addon_imgupld"]) && !isset($_POST["addon_imgurl"])) 
```

更新 2::

您是否将表单编码类型设置为多部分？如果没有，请将此属性添加到您的表单标签中：

```
enctype="multipart/form-data" 
```

# wordpress - wp_pagenavi 无法使用每页的自定义帖子

> ID：13021189
> 
> 赞同：0
> 
> 时间：2012-10-22T23:00:52.473
> 
> 标签：wordpress

我有 wp-navi 插件可以在使用全局阅读配置的任何类别上顺利工作（每页发布“3”），但我有一个类别，我只需要每页显示 1 个，在循环外手动设置此值破坏了我的分页链接，它生成了很多页面（而不是两个，因为我只有两个帖子）并且它们带回家（我猜是某种 404），我尝试了尽可能多的解决方案我能找到在stackoverflow和google中，还没有运气，我已经使用wp几个星期了，所以我不确定我是否在这里做了一些非常愚蠢的事情，所以请帮帮我。

这是代码：

```
<?php
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1; 

    //query 1 post
    query_posts("posts_per_page=1&paged=$paged");       
?>
<?php while(have_posts()) : the_post(); ?>
    <div class="entry"> 
        <div class="single_entry">
            <p>
                <?php the_content(); ?>
                <div class="clear"></div>
            </p>
            <?=get_social(); ?>
            <div class="clear"></div>
        </div>
    </div>
<?php endwhile; ?>
<?php if(function_exists('wp_pagenavi')) { ?>
    <div id="pagination">
        <?php wp_pagenavi(); ?> 
    </div>
<?php } ?> 
```

在此先感谢=)。

**编辑：** 我发现了一些有趣的东西，如果我设置`&paged=2`它实际上显示第二页，并且页面导航显示“第 2 页，共 2 页”，但只有当我添加“ /page/2/" 到最后，它会将我重定向到损坏的主页。因此，即使 pagenavi 工作，“/page/#/”当然会破坏它，`the get_query_var('paged')`或者`get_query_var('page')`将返回其默认“1”，因为我没有使用“/page/”结构，也许我可以通过以下方式进行修复当我点击页面导航的每个数字时添加一个？p=#，不太确定如何在插件文件中执行此操作，所以我希望你们可以根据我现在所说的来帮助我，如果没有，好吧我会试着看看我如何以丑陋的方式解决这个问题。再次提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T04:52:55.303

好的，我使用 js/jq 解决了这个问题，我宁愿使用 wp codex 找到修复程序，但是我尝试过的所有东西都没有用，无论如何我都需要它来解决这个问题，此外我不确定这些永久链接如何在内部工作，并且编辑插件有点灾难性，在 url 中添加“&p=2”会造成与“/page/2”相同的损害，所以我用 jq 创建了一个脚本来从 pagenavi 中删除链接，获取他们的目标页面，为每个页面添加一个 onclick 并将目标页码作为参数传递，稍后替换表单上的隐藏值并发送表单，然后检索页码并将其添加到 query_posts，它就像一个魅力，但我希望我知道如何在 wp 中进行适当的修复，或者如果它是一个错误，我认为我必须提交一张票。感谢您的帮助，如果有人有更多的想法，欢迎

```
<form action="<?php echo $_SERVER['REQUEST_URI']; ?>" method="post" id="change_page">
    <input name="target_page" type="hidden" value="1" id="target_page" />
</form>
<script type="text/javascript">
    function go_to_page(target_page){
        var page = target_page;
        $("#target_page").val(page);
        $('#change_page').submit()
    }
    $(".wp-pagenavi").find("a").each(function(){
            var page = $(this).attr("href");
            page = page.slice(-3);
            page = page.replace("/","");
            page = page.replace("/","");
            // The if below, only apllies to the first link, since it doesn't use "/page/#" structure. 
            if(isNaN(page)) { page = 1; } 
            $(this).attr("href","javascript:void(0)");
            $(this).attr("OnClick","go_to_page("+page+")");
            console.log(page);
    });
</script> 
```

在页面顶部我使用这个：

```
if(isset($_POST["target_page"])) {
     $page = $_POST["target_page"];
} else {
    $page = 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T18:00:45.057

您应该使用 WP_Query 类来构建查询。并在 wp_pagenavi() 中将此对象用作变量。

所以你的代码应该是这样的。

```
<?php
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    $the_query = new WP_Query( $args );
    $the_query->query('showposts=1&paged='.$paged);
?>
<?php while ($the_query->have_posts()) : $the_query->the_post(); ?>
    <div class="entry"> 
        <div class="single_entry">
            <p>
                <?php the_content(); ?>
                <div class="clear"></div>
            </p>
            <?=get_social(); ?>
            <div class="clear"></div>
        </div><!-- fin expert -->
    </div><!-- fin entry -->

<?php endwhile; ?>
<?php if(function_exists('wp_pagenavi')) { ?>
    <div id="pagination">
        <?php wp_pagenavi(array( 'query' => $the_query )); ?>
    </div>
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T04:16:08.557

我也遇到了这个奇怪的分页问题。我不知道是不是因为最新版本的 wp，但我尝试了不同的解决方案，只有这个调整对我有用。将您的**get_query_var('paged')**更改为**get_query_var('page')**。尝试这个

```
<?php
    $paged = (get_query_var('page')) ? get_query_var('page') : 1; //notice this 
    $temp = $wp_query; 
    $wp_query= null;
    $wp_query = new WP_Query(); 
    $wp_query->query('showposts=1&paged='.$paged);
?>
<?php while ($wp_query->have_posts()) : $wp_query->the_post(); ?>
    <div class="entry">
        <div class="single_entry">
            <p>
                <?php the_content(); ?>
                <div class="clear"></div>
            </p>
            <?=get_social(); ?>
            <div class="clear"></div>
        </div><!-- fin expert -->
    </div><!-- fin entry -->

<?php endwhile; ?>
<?php if(function_exists('wp_pagenavi')) { ?>
    <div id="pagination">
        <?php wp_pagenavi(); ?>
    </div>
<?php } ?>

<?php $wp_query = null; $wp_query = $temp; ?> 
```

**注意：**我还注意到您的**if(function_exists('wp_pagenavi')) {**语句中没有右括号。也更正这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T01:44:13.183

试试这个从一个类别中获取一篇文章，并保持分页：

```
query_posts( "category_name=cat_slug_here&posts_per_page=1&paged=$paged"); 
```

# javascript - javascript捕捉彗星套接字断开连接

> ID：13021190
> 
> 赞同：2
> 
> 时间：2012-10-22T23:00:53.617
> 
> 标签：javascript, jquery

所以我已经在我的服务器上实现了彗星套接字，并且能够很好地将数据推送到浏览器。但是我想做的是在彗星服务器退出时在 javascript/jquery 中捕获。

我有我的 iframe：

```
<div id="iframeDiv" style="visibility:hidden; height:0px">
    <iframe id="comet" src="/messageSocket?-3711886712169888393"></iframe>
</div> 
```

我有我的 javascript 来处理新消息：

```
// Comet Server Processes actions
var messageReceived = function(message) {
var commandType = message[1];
switch (commandType) {
    case "1":
        processActionData(message);
        break;
    ...
    default:
        break;
}

} 
```

但例如让我们说连接因某种原因而断开？我怎样才能把它带回来？例如，如果托管网站的本地服务器关闭并重新启动，我想在客户端上捕获超时？然后重新加载页面。我该怎么做呢？我是否需要创建一个循环来发出 ajax ping 请求以确定连接是否仍然存在？当彗星插座死亡时，有没有更好的方法来捕捉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:04:36.117

我不确定彗星协议是如何工作的，但你可以做的一件事是每隔几秒钟发送一条 ping 消息。如果服务器在 10 秒内没有发送 ping，idk，则您认为服务器断开了连接。

我以前在客户端-服务器应用程序中使用过这种方法。

# alfresco - 上传文件的文件大小为 0

> ID：13021192
> 
> 赞同：1
> 
> 时间：2012-10-22T23:01:07.330
> 
> 标签：alfresco

我正在使用 Alfresco Enterprise Version 3.3.3 和 Alfresco WebServices API for Java。

上传超过 10MB 的文件时，它会出现在 Alfresco 中，大小为 0。控制台没有任何异常消息。为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T13:13:30.577

您可以在 catch 块中使用 Throwable 接口而不是 Exception 类。那么你可以得到适当的例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:51:59.640

我在我的项目中遇到了同样的问题，我发现了这个问题。

这背后的原因是我们实际上在两个操作中创建文件。首先我们在露天创建内容节点并添加基本属性。其次，我们获取新创建内容的内容编写器，并尝试从我们的源文件中写入数据。看来，如果我们的文件大小超过 10 Mb，它会在第二次操作期间引发异常。

现在一旦抛出异常，数据就不会被写入，但节点已经在露天创建，它保持原样。

# java - iText 中的图像定位 - Java

> ID：13021193
> 
> 赞同：5
> 
> 时间：2012-10-22T23:01:16.090
> 
> 标签：java, image, pdf, itext

我正在尝试阅读一个 PDF 并将其数据复制到另一个 PDF 中。第一个 PDF 包含一些文本和图像，我希望在第二个 PDF 中准确地在文本结束的地方写一个图像（这基本上是 PDF 文件的结尾）。现在它只打印在顶部。我怎样才能做出这种改变？

```
PdfReader reader = null;
reader = new PdfReader(Var.input);
Document document=new Document();
PdfWriter writer = null;
writer = PdfWriter.getInstance(document,new FileOutputStream(Var.output));
PdfImportedPage page = writer.getImportedPage(reader, 1); 
reader.close();  
document.open();
PdfContentByte cb = writer.getDirectContent();
// Copy first page of existing PDF into output PDF
document.newPage();
cb.addTemplate(page, 0, 0);

// Add your new data / text here
Image image = null;
image = Image.getInstance (Var.qr);
document.add(image);
document.close(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T00:58:50.683

尝试这个：

首先获取图像需要去的位置/坐标，然后只需将下面的第二行添加到您的代码中，以便将图像插入该位置“X，Y”

```
Image image = Image.getInstance(String RESOURCE);
image.setAbsolutePosition(X, Y);
writer.getDirectContent().addImage(image); 
```

在此处查看 iText 5 中的一些示例：[https ://itextpdf.com/en/resources/examples/itext-5-legacy/chapter-3-adding-content-absolute-positions](https://itextpdf.com/en/resources/examples/itext-5-legacy/chapter-3-adding-content-absolute-positions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:53:40.223

您应该在导入页面时使用 PdfStamper 而不是 PdfWriter。您的方法丢弃了所有交互式内容。你也可以在那里使用sorifiend的想法。

要确定给定页面上的文本在哪里结束，请查看 iText in Action，第 2 版示例[ShowTextMargins](https://raw.githubusercontent.com/itext/i5js-book/master/src/part4/chapter15/ShowTextMargins.java)，它解析 PDF 并广告显示文本边距的矩形。

# java - 以编程方式创建布局以添加到 ViewPager？

> ID：13021195
> 
> 赞同：0
> 
> 时间：2012-10-22T23:01:26.357
> 
> 标签：java, android

我正在开发一个家庭替换应用程序，我正在使用 viewpager 来拥有三个带有横向导航的 3 布局。问题是这些布局存储在三个不同的布局资源文件（layout1.xml、layout2.xml 和 layout3.xml）中，而不是它们，我想为每个屏幕动态创建内容。

这是 Adapter 的摘录，其中说明了每个页面的内容：

```
 public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.layout1;
            break;
        case 1:
            resId = R.layout.layout2;
            break;
        case 2:
            resId = R.layout.layout3;
            break;
        }
        View view = inflater.inflate(resId, null);
        ((ViewPager) collection).addView(view, 0);
        return view;
    } 
```

如何以编程方式创建一个简单的布局并将其放置在我的一个屏幕中？我一直在努力解决这个问题，找不到任何关于如何做到这一点的线索，任何指向我正确方向的信息都会很有用。

* * *

编辑：

这就是我现在正在尝试的，我不认为我离得很远，但是所有屏幕都是空白的：

```
Context context = collection.getContext();
LinearLayout layout = new LinearLayout(context);
TextView view = new TextView(context);
switch (position) {
    case 0:
       view.setText("some text");
       view.setPadding(5, 5, 5, 5);
       view.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
       break;
    case 1:
       view.setText("some text");
       view.setPadding(5, 5, 5, 5);
       view.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
       break;
    case 2:
       view.setText("some text");
       view.setPadding(5, 5, 5, 5);
       view.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
       break;
}
layout.addView(view);
return layout; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T05:23:16.457

不要膨胀布局，而是创建布局和视图的对象并将其返回。

位置 1 的示例，

```
LinearLayout layout = new LinearLayout(context);
 switch (position) {
        case 0:
           TextView tv = new TextView(context);
           tv.setText("some text");
           tv.setPadding(5, 5, 5, 5);
           tv.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
           // And so on customize and create as many views as you want. 

           // And finally add them to your layout
          layout.addView(tv);
          return layout;

        case 1:
          .
          .
          .
        case 2:
          .
          .
          .
} 
```

更新：

在您更新问题后编辑答案。

我已经获取了您的代码并对其进行了修改。这必须有效。

```
@Override
public Object instantiateItem(View container, int position) {
    Context context = collection.getContext();
    LinearLayout layout = new LinearLayout(context);
    TextView view = new TextView(context);

    switch (position) {

    case 0:
       view.setText("some text");
       view.setPadding(5, 5, 5, 5);
       view.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
       break;
    case 1:
       view.setText("some text");
       view.setPadding(5, 5, 5, 5);
       view.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
       break;
    case 2:
       view.setText("some text");
       view.setPadding(5, 5, 5, 5);
       view.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
       break;
    }
    layout.addView(view);
    ((ViewPager) container).addView(layout, 0); // This is the line I added
    return layout;
} 
```

# vim - 如何让 Vim 更快地识别 ESC 键？

> ID：13021196
> 
> 赞同：29
> 
> 时间：2012-10-22T23:01:37.800
> 
> 标签：vim

我几乎只在控制台中使用 Vim。当我按 退出插入模式时`<ESC>`，Vim 识别命令有明显的延迟。延迟类似于我按下`<leader>`键时的延迟，我假设给我时间在映射中输入其他字符。我可以设置一个选项来让 Vim 更快地识别转义键吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-11-19T19:19:38.893

如果您使用的是 tmux，则可能会引入延迟。把它放在你的 ~/.tmux.conf 文件中：

```
set -s escape-time 0 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T23:05:03.993

[明目张胆地从https://stackoverflow.com/a/10856095/157237](https://stackoverflow.com/a/10856095/157237)复制：

> 您可能需要`:help 'timeout'`相应地检查和调整设置。如果需要，您可以设置`timeoutlen`为更短的持续时间（`ttimeoutlen`默认设置为`-1`，因此不使用）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T18:18:01.350

当您离开插入模式时，您可能会执行一些缓慢的操作。

您可以通过使用 CTRL-C 离开插入模式或使用`:au InsertLeave`.

* * *

编辑：

`:iab`您还可以使用and检查是否有任何映射或缩写正在等待完成`:imap`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-27T13:22:07.687

我在此页面上找不到有效的答案。我在 iTerm2 中使用 vi 键绑定来快速编辑较大的命令。在进入 vi 命令模式之前，点击 esc 会增加延迟。您可以通过将以下属性添加到您的 z-shell 运行配置来关闭延迟：~/.zshrc

```
KEYTIMEOUT=1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-06T23:15:30.450

这*可能*就是发生在你身上的事情——这就是对我表现出这些症状的原因。

在`map`ping *Alt*键以便能够使用*Meta*组合键（在Debian 上的*Mate-Terminal*或*Konsole*中）之后，我注意到了同样的事情——退出插入模式需要`timeoutlen`. 这感觉是不可接受的，即使是很短的——但立即`timeoutlen`使用`nmap`：)

```
" Using `map` delays getting out of insert mode by timeoutlen!
for i in range(97,122)
    let c = nr2char(i)
    "exec "map \e".c." <M-".c.">"
    "exec "map! \e".c." <M-".c.">"
    exec "nmap \e".c." <M-".c.">"
endfor 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-24T14:50:20.967

`set noesckeys`

帮助esckeys：

> ```
> 'esckeys' 'ek'      boolean (Vim default: on, Vi default: off)
>                     global
>                     {not in Vi}
> 
>     Function keys that start with an <Esc> are recognized in Insert
>     mode.  When this option is off, the cursor and function keys cannot be
>     used in Insert mode if they start with an <Esc>.  The advantage of
>     this is that the single <Esc> is recognized immediately, instead of
>     after one second.  Instead of resetting this option, you might want to
>     try changing the values for 'timeoutlen' and 'ttimeoutlen'.  Note that
>     when 'esckeys' is off, you can still map anything, but the cursor keys
>     won't work by default.
>     NOTE: This option is set to the Vi default value when 'compatible' is
>     set and to the Vim default value when 'compatible' is reset. 
> ```

# javascript - Console.log 返回“未定义”

> ID：13021200
> 
> 赞同：0
> 
> 时间：2012-10-22T23:02:16.327
> 
> 标签：javascript, jquery

为什么这不起作用？

```
var names;

$.ajax({
     type : 'POST',
     url : postUrl+"/admin/returnUserJSON",
     success : function(data){
          names = data;
     }
});

console.log(names); 
```

**问题：** Console.log 返回未定义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T23:04:03.913

由于`$.ajax`call 是异步的，`console.log`将在line 执行*之前* 调用（因为它是回调函数的一部分，只有在服务器响应后才会调用）。因此它将输出.`names=data``$.ajax``undefined`

您可以通过两种方式修复它：将输出移动到回调函数中......

```
function(data){
  names = data;
  console.log(names);
} 
```

...或使用 Promise 接口：

```
$.ajax({
     type : 'POST',
     url : postUrl+"/admin/returnUserJSON",
     success : function(data){
          names = data;
     }
}).then(function() { console.log(names); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T23:04:41.430

您需要将您的 console.log 移动到`success`处理程序中。

```
 success : function(data){
      names = data;
      console.log(names);
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T23:05:21.497

您的 AJAX 请求在执行时尚未完成触发`console.log`。

如果将 移动`console.log`到`success`回调，您将正确获取数据。

```
var names;

$.ajax({
     type : 'POST',
     url : postUrl+"/admin/returnUserJSON",
     success : function(data){
          names = data;
          console.log(names);
     } 
}); 
```

我建议阅读[异步 javascript 编程](http://www.html5rocks.com/en/tutorials/async/deferred/)！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T03:21:47.600

AJAX 请求在页面加载后触发，这就是您收到错误的原因。当您将变量打印到控制台时，该变量不存在。

# box-api - 是否有 API 可以告诉我文件夹是否已同步？

> ID：13021205
> 
> 赞同：2
> 
> 时间：2012-10-22T23:02:35.240
> 
> 标签：box-api

我正在尝试编写一个脚本来以编程方式同步 Box 文件夹，我首先需要知道该文件夹是否已同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T07:08:07.240

获取文件夹信息时，可以请求该`sync_state`参数，默认不返回。`sync_state`的可能值为`synced`、`not_synced`和`partially_synced`。文件继承其父文件夹的同步状态。

文件夹信息：`GET https://api.box.com/folders/12345?fields=sync_state`

Box V2 API 文档中列出了这些参数：

[http://developers.box.com/docs/#folders-folder-object](http://developers.box.com/docs/#folders-folder-object)

# python - 如何使用 python 在我的图像上获得“智能锐化”效果？

> ID：13021206
> 
> 赞同：5
> 
> 时间：2012-10-22T23:02:34.593
> 
> 标签：python, image-processing, scipy, scikit-image

我想知道如何使用或任何相关的图像库（例如，甚至）**智能锐化**图像。我可以找到实际锐化我的图像但在放大时有很多噪音和像素化的方法。所以既然我知道我试图得到那个智能锐化效果，通过 python 以更少的噪点和漂亮的对比度来锐化图像，但我失败了。 `python``ndimage``skimage``PIL``Photoshop`

注：-
(1) 方法已经过测试：-

```
>>> # The 1st Method:  
>>> import Image                 
>>> import ImageFilter
>>> image.filter(ImageFilter.SHARPEN)               
>>> Image.filter(ImageFilter.EDGE_ENHANCE_MORE)    #Look down:1st image created  

>>> # The 2nd Method:
>>> blurred_l=scipy.ndimage.gaussian_filter(b,3)  
>>> filter_blurred_l = scipy.ndimage.gaussian_filter(blurred_l, 1)  
>>> alpha =30  
>>> sharpened = blurred_l + alpha * (blurred_l - filter_blurred_l)  

>>> # The 3rd Method:  
>>> shar=imfilter(Image,'sharpen')               #Look down:2nd image created 
```

(2) 我找到了一段代码，但它在`Perl`. 我只知道`Python` [在这里](http://astoryworthtelling.wordpress.com/2011/03/28/smart-sharpening-in-imagemagick/) 或[直接](http://www.columbia.edu/~jhb2147/smartsharp.pl) （3）这是使用上述方法锐化的图像中的 2 个，第三个是使用*smartsharp*完成的：
Original
[Original image http://imageshack.us/a/img600/6640/babyil.jpg](http://imageshack.us/a/img600/6640/babyil.jpg)
第一个... ..................................................... ................第二个
[http://imageshack.us/a/img803/3897/sharp1.png](http://imageshack.us/a/img803/3897/sharp1.png) [第二个 http://imageshack.us/a/img809/2235/sharp2 .png](http://imageshack.us/a/img809/2235/sharp2.png)
第三个我的目标>这就是我想要的效果
[第三个 http://imageshack.us/a/img832/4563/smartsharp.jpg](http://imageshack.us/a/img832/4563/smartsharp.jpg)
(4) 这是我用来创建上面第三个图像的工具：
[smrsharpm http:// imageshack.us/a/img210/2747/smartsharpentoolm.jpg](http://imageshack.us/a/img210/2747/smartsharpentoolm.jpg) [smrsharp http://imageshack.us/a/img193/490/smartsharpentool.jpg](http://imageshack.us/a/img193/490/smartsharpentool.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:32:12.487

不幸的是，如果不访问 Photoshop 代码，就很难知道“智能锐化”的作用。同时，您可以尝试混合使用不锐化蒙版、总变化过滤和一些颜色调整（也许是一点色调提升）。

另见：[http ://www.kenrockwell.com/tech/photoshop/sharpening.htm#](http://www.kenrockwell.com/tech/photoshop/sharpening.htm#)

更新：这是一个如何从图像中删除运动模糊的示例：

[https://github.com/stefanv/scikit-image-demos/blob/master/clock_deblur.py](https://github.com/stefanv/scikit-image-demos/blob/master/clock_deblur.py)

（时钟图像在同一个存储库中）。不幸的是，scikit-image 目前还没有成熟的去模糊/反向过滤——但我们正在努力！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T23:40:54.543

Photoshop 的“智能锐化”功能在内部使用称为*反卷积*的数学运算。`numpy`确实有一个`deconvolve()`功能可能会为此任务提供服务，但我找不到专门用于智能锐化的现成功能`numpy`，因此您可能必须自己编写代码。

另一种方法是使用 GIMP 来完成。有一个 GIMP 插件（直观地称为“G'Mic”）可以在其他锐化算法之间进行反卷积，您可以使用 Python 自动化 GIMP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-19T16:15:32.397

@StefanvanderWalt 不幸的是，维纳代码需要修改。我在上面添加了一个关于如何对图像进行运动去模糊的示例。如果您只知道模糊内核，也可以使用此方法 - 本质上，您将傅里叶变换应用于图像 (f -> F) 和内核 (h -> H)，然后返回 ( F / H），在确保幅度被限制在 H 接近零的地方之后。填充避免了边界效应，并且窗口化图像限制了重建中的振荡。 ***hann窗口使用了哪些值和尺寸？***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-08T23:12:36.027

嗯，这是一个相当老的问题，这可能也不是正确的答案，但我希望使用 Photoshop 2020 和 python 脚本来做到这一点，我很难找到关于如何做到这一点的零散信息，所以我会发布无论如何，如果有人需要类似的东西，这可以帮助他们。

首先，我使用了这个 python 库：[https](https://photoshop-python-api.readthedocs.io/en/0.14.0/index.html) ://photoshop-python-api.readthedocs.io/en/0.14.0/index.html 有了这个 API，我基本上可以用 python 脚本在 photoshop 中重新创建任何过滤器。

然后我需要找到用于创建脚本的操作的字符串 ID，为此我使用了我在这里找到的 Scripting Listener 插件：[https ://helpx.adobe.com/photoshop/kb/downloadable-plugins-and-content .html#ScriptingListenerplugin](https://helpx.adobe.com/photoshop/kb/downloadable-plugins-and-content.html#ScriptingListenerplugin)

> 我尝试按照 Windows 的指南进行操作，但起初它实际上并没有工作，在第 4 步中，您实际上必须将从 ZIP 中提取的 3 个文件夹放入“插件”文件夹“Program Files\Adobe\Adobe Photoshop 2020\Plug-ins”，就像 mac-os。

然后只需在 photoshop 中执行任何过滤器并从侦听器获取 JS 或 VBS 日志并将其转换为 python 即可。

这是 Smart Sharpen 的 JS 日志示例：

```
var idsmartSharpen = stringIDToTypeID( "smartSharpen" );
var desc186 = new ActionDescriptor();
var idpresetKind = stringIDToTypeID( "presetKind" );
var idpresetKindType = stringIDToTypeID( "presetKindType" );
var idpresetKindCustom = stringIDToTypeID( "presetKindCustom" );
desc186.putEnumerated( idpresetKind, idpresetKindType, idpresetKindCustom );
var iduseLegacy = stringIDToTypeID( "useLegacy" );
desc186.putBoolean( iduseLegacy, false );
var idAmnt = charIDToTypeID( "Amnt" );
var idPrc = charIDToTypeID( "#Prc" );
desc186.putUnitDouble( idAmnt, idPrc, 100.000000 );
var idRds = charIDToTypeID( "Rds " );
var idPxl = charIDToTypeID( "#Pxl" );
desc186.putUnitDouble( idRds, idPxl, 1.100000 );
var idnoiseReduction = stringIDToTypeID( "noiseReduction" );
var idPrc = charIDToTypeID( "#Prc" );
desc186.putUnitDouble( idnoiseReduction, idPrc, 50.000000 );
var idblur = charIDToTypeID( "blur" );
var idblurType = stringIDToTypeID( "blurType" );
var idlensBlur = stringIDToTypeID( "lensBlur" );
desc186.putEnumerated( idblur, idblurType, idlensBlur );
executeAction( idsmartSharpen, desc186, DialogModes.NO ); 
```

在 python 中，我只是复制了日志并更改了如下一些内容：

```
import photoshop.api as ps

app = ps.Application()
docRef = app.activeDocument

def SmartSharpen(amount: int, radius: float, denoise: float):
    idsmartSharpen = app.stringIDToTypeID( "smartSharpen" );
    desc179 = ps.ActionDescriptor();
    idpresetKind = app.stringIDToTypeID( "presetKind" );
    idpresetKindType = app.stringIDToTypeID( "presetKindType" );
    idpresetKindCustom = app.stringIDToTypeID( "presetKindCustom" );
    desc179.putEnumerated( idpresetKind, idpresetKindType, idpresetKindCustom );

    iduseLegacy = app.stringIDToTypeID( "useLegacy" );
    desc179.putBoolean( iduseLegacy, False );

    idAmnt = app.charIDToTypeID( "Amnt" );
    idPrc = app.charIDToTypeID( "#Prc" );
    desc179.putUnitDouble( idAmnt, idPrc, amount );

    idRds = app.charIDToTypeID( "Rds " );
    idPxl = app.charIDToTypeID( "#Pxl" );
    desc179.putUnitDouble( idRds, idPxl, radius );

    idnoiseReduction = app.stringIDToTypeID( "noiseReduction" );
    idPrc = app.charIDToTypeID( "#Prc" );
    desc179.putUnitDouble( idnoiseReduction, idPrc, denoise );

    idblur = app.charIDToTypeID( "blur" );
    idblurType = app.stringIDToTypeID( "blurType" );
    idlensBlur = app.stringIDToTypeID( "lensBlur" );
    desc179.putEnumerated( idblur, idblurType, idlensBlur );

    app.executeAction( idsmartSharpen, desc179, 3 );

SmartSharpen(50, 1.1, 100) 
```

实际上，在 python 库中，已经有一个 Smart Sharpening 示例，但是由于某种原因，我没有得到相同的结果。另外要更改模糊类型，您必须知道实际的 stringID，除非在某处我无法找到文档，否则我只能从日志中获取它。

* * *

为了结束这个，一个与这个问题无关的注释，对于我需要的一些过滤器，比如“减少噪音”，使用了“ActionList”类，但是在 python 库中目前还没有实现，现在我通过简单地自己创建它来管理通过简单地应对已经存在的“ActionDescription”并按照此处的文档更改我需要的名称和一些方法：[https ://www.adobe.com/content/dam/acom/en/devnet/photoshop/pdfs/ photoshop-cc-vbs-ref.pdf#ActionList](https://www.adobe.com/content/dam/acom/en/devnet/photoshop/pdfs/photoshop-cc-vbs-ref.pdf#ActionList)。我只是把它放在这里以防有人可能需要这个，因为我很难找到任何关于这个的东西：

```
"""This object provides an array-style mechanism for storing dta.

"""

# Import built-in modules
from pathlib import Path

# Import local modules
from photoshop.api._core import Photoshop
from photoshop.api.action_list import ActionList
from photoshop.api.action_reference import ActionReference
from photoshop.api.enumerations import DescValueType

class ActionList(Photoshop):
    object_name = "ActionList"

    def __init__(self):
        super().__init__()

    @property
    def count(self):
        """The number of keys contained in the descriptor."""
        return self.app.count

    def clear(self):
        """Clears the descriptor."""
        self.app.clear()

    def getBoolean(self, key: int) -> int:
        """Gets the text_font of a key of type boolean.

        Args:
            key (str): key of type boolean.

        Returns:
            bool: The text_font of a key of type boolean.

        """
        return self.app.getBoolean(key)

    def getClass(self, key):
        """Gets the text_font of a key of type class.

        Args:
            key (str): The key of type class.

        Returns:
            int: The text_font of a key of type class.

        """
        return self.app.getClass(key)

    def getData(self, key: int) -> int:
        """Gets raw byte data as a string value."""
        return self.app.getData(key)

    def getDouble(self, key: int) -> int:
        """Gets the value of a key of type double."""
        return self.app.getDouble(key)

    def getEnumerationType(self, index: int) -> int:
        """Gets the enumeration type of a key."""
        return self.app.getEnumerationType(index)

    def getEnumerationValue(self, index: int) -> int:
        """Gets the enumeration value of a key."""
        return self.app.getEnumerationValue(index)

    def getInteger(self, index: int) -> int:
        """Gets the value of a key of type integer."""
        return self.app.getInteger(index)

    def getKey(self, index: int) -> int:
        """Gets the ID of the key provided by index."""
        return self.app.getKey(index)

    def getLargeInteger(self, index: int) -> int:
        """Gets the value of a key of type large integer."""
        return self.app.getLargeInteger(index)

    def getList(self, index: int) -> ActionList:
        """Gets the value of a key of type list."""
        return ActionList(self.app.getList(index))

    def getObjectType(self, key: int) -> int:
        """Gets the class ID of an object in a key of type object."""
        return self.app.getObjectType(key)

    def getObjectValue(self, key: int) -> int:
        """Get the class ID of an object in a key of type object."""
        return self.app.getObjectValue(key)

    def getPath(self, key: int) -> Path:
        """Gets the value of a key of type."""
        return Path(self.app.getPath(key))

    def getReference(self, key: int) -> ActionReference:
        """Gets the value of a key of type."""
        return ActionReference(self.app.getReference(key))

    def getString(self, key: int) -> str:
        """Gets the value of a key of type."""
        return self.app.getString(key)

    def getType(self, key: int) -> DescValueType:
        """Gets the type of a key."""
        return DescValueType(self.app.getType(key))

    def getUnitDoubleType(self, key: int) -> int:
        """Gets the unit type of a key of type UnitDouble."""
        return self.app.getUnitDoubleType(key)

    def getUnitDoubleValue(self, key: int) -> int:
        """Gets the unit type of a key of type UnitDouble."""
        return self.app.getUnitDoubleValue(key)

    def hasKey(self, key: int) -> bool:
        """Checks whether the descriptor contains the provided key."""
        return self.app.hasKey(key)

    def isEqual(self, otherDesc) -> bool:
        """Determines whether the descriptor is the same as another descriptor.

        Args:
            otherDesc (.action_descriptor.ActionDescriptor):

        """
        return self.app.isEqual(otherDesc)

    def putBoolean(self, key: int, value: bool):
        """Sets the value for a key whose type is boolean."""
        self.app.putBoolean(key, value)

    def putClass(self, key: int, value: int):
        """Sets the value for a key whose type is class."""
        self.app.putClass(key, value)

    def putData(self, key: int, value: str):
        """Puts raw byte data as a string value."""
        self.app.putData(key, value)

    def putDouble(self, key: int, value: int):
        """Sets the value for a key whose type is double."""
        self.app.putDouble(key, value)

    def putEnumerated(self, key: int, enum_type: int, value: int):
        """Sets the enumeration type and value for a key."""
        self.app.putEnumerated(key, enum_type, value)

    def putInteger(self, key: int, value: int):
        """Sets the value for a key whose type is integer."""
        self.app.putInteger(key, value)

    def putLargeInteger(self, key: int, value: int):
        """Sets the value for a key whose type is large integer."""
        self.app.putLargeInteger(key, value)

    def putList(self, key: int, value: ActionList):
        """Sets the value for a key whose type is an ActionList object."""
        self.app.putList(key, value)

    def putObject(self, class_id: int, value):
        """Sets the value for a key whose type is an object."""
        self.app.putObject(class_id, value)

    def putPath(self, key: int, value: str):
        """Sets the value for a key whose type is path."""
        self.app.putPath(key, value)

    def putReference(self, key: int, value: ActionReference):
        """Sets the value for a key whose type is an object reference."""
        self.app.putReference(key, value)

    def putString(self, key: int, value: str):
        """Sets the value for a key whose type is string."""
        self.app.putString(key, value)

    def putUnitDouble(self, key: int, unit_id: int, value: int):
        """Sets the value for a key whose type is a unit value formatted as
        double."""
        self.app.putUnitDouble(key, unit_id, value)

    def toStream(self) -> str:
        """Gets the entire descriptor as as stream of bytes,
        for writing to disk."""
        return self.app.toSteadm() 
```

# salesforce - Salesforce (SFDC) - 公共、静态、全局关键字 - 为整个班级使用一个列表？

> ID：13021208
> 
> 赞同：2
> 
> 时间：2012-10-22T23:02:45.857
> 
> 标签：salesforce, apex-code, static-methods, public, visualforce

我很难理解在变量和方法中使用公共、静态和全局关键字。

下面是我的代码片段。我要做的是在页面加载时，在我的构造函数中创建一组用户可以访问的 accountID（8-33 这是有效的）。该集合将用于过滤后面方法中使用的查询。

我发现公共 pageReference runSearch() 可以访问“terrAccSet”，但公共静态 List getsearchAccounts 无权访问它。

如果我将其更改为公共静态 Set terrAccSet，我不会在任一 system.debugs 中获取数据 - 我该怎么办？

```
global with sharing class MyClass {

    public static List<FRM_Metrics_gne__c> accountSearchGmap {get; set;}
    public Set<Id> terrAccSet;
    public List<String> terrIdList;

//Constructor
public MyClass() {

    terrAccSet = new Set<Id>();
    terrIdList = new List<String>();
    Set<Id> grpIdSet = new Set<Id>();

    Id uid = '00570000001R95e'; //member of TWO territories
    //UserTerritory Utid =  [SELECT TerritoryId FROM UserTerritory where UserId = :userInfo.getUserId()];

    List<UserTerritory> Utid =  [SELECT TerritoryId FROM UserTerritory where UserId =: uid ];
    for(UserTerritory usrTerr: Utid){
        terrIdList.add(usrTerr.TerritoryId);
    }

    List<Group> grp = [Select Id from Group where RelatedID IN :terrIdList];
    for (Group eachgroupd : grp ){
        grpIdset.add(eachgroupd.Id);
    }

    List<AccountShare> accountidList = [SELECT AccountId,UserOrGroupId FROM AccountShare where UserOrGroupId in :grpIdset];
    //all accounst that the user has access according to territory hiearchy
    for(AccountShare eachas:accountidList ){
        terrAccSet.add(eachas.AccountId);
    }

}

public PageReference runSearch() {
    //Has Data
    system.debug('**terrAccSet runSearch**   '+terrAccSet);
}  

public static List<Custom_Object__c> getsearchAccounts(String multiSearchString) {
    //terrAccSet variable is missing
    system.debug('**terrAccSet getSearchAccounts**   '+terrAccSet);
        //logic
        return accountSearchGmap;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T02:47:57.613

> 下面是我的代码片段。我要做的是在页面加载时，在我的构造函数中创建一组用户可以访问的 accountID（8-33 这是有效的）。该集合将用于过滤后面方法中使用的查询。

这个集合应该是一个实例属性，而不是静态的。当你想创建一个不影响控制器或类状态的方法时使用静态，例如。文本解析器-文本输入文本输出。

如果您想创建一个包并使您的类在您的包外可用，以便其他 Apex 代码可以调用它，或者如果您的类将创建要公开的 webService 或 REST 方法，您应该将类​​设为 Global。

Public 应该用于向将使用这些属性的 VisualForce 页面公开属性。否则，使用 Private 方法和属性仅用于控制器端处理。

> public static List getsearchAccounts(String multiSearchString) { //terrAccSet 变量丢失 system.debug(' **terrAccSet getSearchAccounts** '+terrAccSet); //逻辑返回 accountSearchGmap; }

这个方法不应该是静态的，因为它访问一个实例属性（它读取状态）。

简单的经验法则，如果它是一个visualforce页面+控制器，你不应该需要任何静态的东西来完成查询数据库并将数据返回到页面的正常工作。

# php - 如何从我的查询中仅访问一条记录

> ID：13021209
> 
> 赞同：2
> 
> 时间：2012-10-22T23:02:52.120
> 
> 标签：php, mysql

我的粘贴箱：http: [//pastebin.com/PmfDEdEw](http://pastebin.com/PmfDEdEw)

你好，

我正在做一个公共汽车搜索脚本，这是一个名为“bus_notavailable”的表，它的字段为

```
nodate_id(PK)
bus_id(FK)
DD(INT 2)
MM(INT 2)
and YYYY(INT 4) 
```

我的问题是：假设 Bus ID 为 1，这两个日期不可用，分别是 15-08-2013 和 26-01-2013，因此将过滤这一天的记录...

节点表

```
Nodate_id             bus_id        DD     MM     YYYY
1                     1             15     08     2013
2                     1             26     01     2013 
```

• 所以 bus_notavailable.DD != '26' 它向我展示了一条记录

• bus_notavailable.DD != '11' 然后它向我显示 2 条记录

我知道我犯了错误或不知道解决方案因此想找到摆脱的方法，并且知道这是一个一对多关系的问题，其中“bus_notavailable”有两个相同总线的 id 它向我展示'bus' 表中的两条记录。

那么我需要一个子查询来实现这一点还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:14:53.890

男人））））））首先你没有说你想要实现什么。如果您想选择 DD 日可用的巴士，那么您做对了。

第二行返回 2 行的原因是因为正如您所说，您选择了 DD 不等于 11 的记录。在此表中，两条记录都是合适的。这就是为什么你得到 2 行。

如果您只想选择一个特定日期可用的巴士，以防此表中有很多日期，您应该使用 distinct 关键字。

选择 dd!=11 的不同总线。你会得到一排））

我的意思是每辆公共汽车只有一排。因此，如果您在该日期有 10 辆公共汽车可用，您将有 10 条记录。每辆公共汽车一个记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:10:00.210

你的情况在这里

```
 LEFT JOIN bus_notavailable ON bus.bus_id = bus_notavailable.bus_id
           .....
    WHERE   ...... 
            bus_notavailable.bus_id IS NULL
            AND bus_notavailable.DD != '$DD'
            AND bus_notavailable.MM != '$MM'
            AND bus_notavailable.YYYY != '$YYYY' 
```

是荒谬的，因为一旦 bus_id 为 NULL，就没有`bus_notavailable`记录可用于比较`DD`、`MM`或`YYYY`列。

您想要的条件是这样的（将 DD/MM/YYYY 移动到 LEFT JOIN `ON`cluse）：

```
 LEFT JOIN bus_notavailable ON bus.bus_id = bus_notavailable.bus_id
            AND bus_notavailable.DD = '$DD'
            AND bus_notavailable.MM = '$MM'
            AND bus_notavailable.YYYY = '$YYYY'
           .....
    WHERE   ...... 
            bus_notavailable.bus_id IS NULL 
```

# iphone - 用某个 div 类的 html 动态填充 uiwebview？

> ID：13021213
> 
> 赞同：1
> 
> 时间：2012-10-22T23:03:06.090
> 
> 标签：iphone, html, objective-c, ios, uiwebview

根据我访问的博客文章，我需要一个 uiwebview 来填充一个 div 类的 html。每次都是同一个html的div类，名字不变，只是内容。

div 类被称为：

```
<div class="field-item even" property="content:encoded"> 
```

内容如下所示：

```
 <div class="field-items"><div class="field-item even" property="content:encoded"><p>Data centre security is a big issue – especially for co-location centres hosting multiple racks for multiple, often competing, clients. Yet whilst security to access the data centre can often be impressive, individual rack level security is often inadequate. Given the number of in-house staff and external engineers, from cablers to storage and server providers, traipsing through a data centre on a near daily basis, poor rack level security is a potential risk.</p>
<p>According to a recent survey conducted by Lieberman Software, 42 percent of IT staff can get unauthorised access to their organisation’s most sensitive information – including the CEO’s private documents. The failing is blamed on management’s naivety when it comes to understanding just how much privileged access their IT departments actually have.</p>
<p>The fact that most racks are secured only with standard handles using a manual key, bears out this survey. Easily broken or bypassed, these locks provide minimal corporate protection; they offer no access control or audit trail of activity. Given the huge ongoing investment in data centres - during 2011-2012, the UK invested an estimated $3.35 billion in data centres; the second highest spending of any country, according to the Datacentre Dynamics Global Industry Census 2011 - extending standard access control techniques to the data centre racks is an important step.</p>
<p>Companies can opt for a rack specific key, combination locks or key cards that are IP enabled to allow an organisation to impose strict control over the time/day an individual is allowed to access the rack. Using standard access control software, all activity is recorded and audited, providing the organisation with a complete list of those who have accessed the racks.</p>
<p>For organisations, this approach adds control and addresses one important aspect of the internal threat. For co-location sites, rack level security removes the need to cage off client specific rack space areas freeing up space that can be used for more racks, delivering a return on investment, as well as improved client security.</p>
</div> 
```

该页面可以在[这里](http://2bm.co.uk/blog/how-secure-are-your-racks)找到。

我需要一种方法来仅从页面 url 获取该 div 中的 html，保留样式并将其放入字符串中，然后填充 uiwebview，有人可以帮我吗？

谢谢。

更好的代码场景：

基本上，我从博客文章的 rss 提要中填充了一个合适的视图。这工作正常。单击博客文章会返回单击的博客文章的 url，作为要使用的字符串。它从这里开始，我不明白如何将此字符串加载到 web 视图中，然后在该 web 视图上使用 jquery 仅在一个 div 类中显示所有内容（如上所述。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:33:30.880

您可以将页面上的所有内容加载到 webview 中，然后运行一些 javascript 来隐藏除 div 及其内容之外的所有内容。这个[stackoverflow问题](https://stackoverflow.com/questions/4277792/hide-all-elements-except-one-div-and-its-child-element)（嗯，真的，答案）看起来可以帮助你完成这个。如果页面不大，这可能是要走的路，因为样式会被保留为一个很好的副作用。

# postgresql - Yesod persistent-postgresql rawSql 查询带有列列表通配符会产生语法错误

> ID：13021218
> 
> 赞同：3
> 
> 时间：2012-10-22T23:03:30.887
> 
> 标签：postgresql, haskell, persistent, yesod

我正在使用 Yesod 的 persistent-postgresql 库，我想执行以下原始查询：

```
SELECT * FROM utterance WHERE is_target IS NULL ORDER BY RANDOM() LIMIT 1000 
```

选择 1000 个带有 NULL is_target 的随机话语。但是，当我通过以下方式运行代码时，持久性会生成以下 SQL `rawSql`：

```
SELECT * FROM utterance WHERE is_target IS NULL ORDER BY RANDOM() LIMIT 1000"utterance"."id", "utterance"."message", "utterance"."is_target" 
```

这会在 .postgresql 中生成错误`syntax error at or near ""utterance"" at character 77`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T18:33:47.880

我通过使用以下查询解决了这个问题：

```
SELECT ?? FROM utterance WHERE is_target IS NULL ORDER BY RANDOM() LIMIT 1000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T23:52:08.007

rawSql 不适用于列通配符，因为它对返回的数据强制执行强类型，因此它正在尝试（并且失败）找出将列名放在哪里。您需要明确列出列名或使用一些“？？” 语句中的占位符并在运行时绑定它们，例如，

```
$ (Entity myType utterance, .... ) -> do .... 
```

如果你不想要强类型，你可能也不想使用 Persistent；这就是它存在的全部原因。

# perl - 防止 Dist::Zilla 插入版权年份？

> ID：13021221
> 
> 赞同：2
> 
> 时间：2012-10-22T23:03:53.033
> 
> 标签：perl, dist-zilla

默认情况下，如果[Dist::Zilla](https://metacpan.org/module/Dist%3a%3aZilla)没有找到版权年份，它将使用当前年份，因为它似乎不支持多年或年份范围，我认为当前年份是最合适的。但是，每当我运行`dzil new Module`它时，它都会自动将版权年份插入我的`dist.ini`. 有没有办法阻止 Dist::Zilla 这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:32:30.000

[`[DistINI]`](https://metacpan.org/module/Dist%3a%3aZilla%3a%3aPlugin%3a%3aDistINI)从您的铸币配置文件中删除，并使用带有[GatherDir::Template](https://metacpan.org/module/Dist%3a%3aZilla%3a%3aPlugin%3a%3aGatherDir%3a%3aTemplate)`dist.ini`的模板文件。这要灵活得多。

例如，这是我的`skel/dist.ini`：

```
;                                                       -*-conf-windows-*-{{
    $license = ref $dist->license;
    if ( $license =~ /^Software::License::(.+)$/ ) {
        $license = $1;
    } else {
        $license = "=$license";
    }

    $authors = join( "\n", map { "author  = $_" } @{$dist->authors} );
    '';
}}
name    = {{$dist->name}}
{{$authors}}
license = {{$license}}
copyright_holder = {{$dist->copyright_holder}}

[@Author::CJM / CJM]

[AutoPrereqs]
skip = ^(?:lib|strict|utf8|warnings)$ 
```

然后我的`profile.ini`包括：

```
[GatherDir::Template]
root = skel
include_dotfiles = 1 ; want .gitignore 
```

# php - 使用 PHP 在六列表格中的网页上发布照片

> ID：13021237
> 
> 赞同：0
> 
> 时间：2012-10-22T23:05:41.693
> 
> 标签：php, for-loop, upload, html-table, logic

我正在处理一个上传链接，照片被重新采样到缩略图文件夹。如何将 /thumbnails 文件夹中的照片以 6 列的形式发布？

我下面的代码将扫描照片目录，文件的起始数量是2（因为我var_dump文件夹文件路径（$files），它说2，所以我已经构建了代码来处理它。当这个文件夹中有照片时， PHP脚本假设在一个6列的表格中显示这些照片。我在这部分有问题，我的代码只显示表格行，for循环下的所有内容都没有运行。我不知道为什么。

for 循环 ( `$i % $Num_COLUMNS == $isInt && $i != 0`)，我想说，当`$i`（文件夹中的照片数量）达到“6”时，`$i`除以`$Num_COLUMNS`1 或整数。这意味着是时候创建一个新行，图片上传将在当前行之后进行。这种逻辑在 IMO 中非常糟糕，我想不出……更好的方法。

```
$files = scandir("./thumbnails");
$numFiles = count($files);
$Num_COLUMNS = 6;
var_dump($files);
var_dump($numFiles);

if($numFiles < 3)
{
echo "<p>Gallery is empty </p>";
}
else 
{
echo "<p> Click on thumbnail to view larger picture! </p>";
echo "<table><tr>";
echo "the table row!";
for($i = 0; $i < $numFiles -2; $i++)
{

    if($i % $Num_COLUMNS == 0 && $i != 0)
        {
            echo "</tr><tr>";
            echo "The table row";
        }
    echo "<td>";
    echo "the table data, I CANNOT SEE ANYTHING HERE";
// below is the photo I post, and it is a link that views the picture. 
echo "<a href='ViewPicture.php?src=".urlencode($files[$i +2])."' target='_blank'><img src='".thumbnails.urlencode($files[$i + 2])."' alt='".$files[$i + 2]."' title='".$files[$i + 2]."'/></a>'";

    echo "end data table, CANNOT SEE THIS EITHER";
    echo "</td>";
}
echo "</tr> </table>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:20:12.643

你为什么要比较 $i % $Num_COLUMNS （一个整数）和 $isInt （一个布尔值）？

你可以这样做：

```
<?php
//if $i is divisible by the number of columns
//and it is not 0
if($i % $Num_COLUMNS == 0 && $i != 0)
{
    echo "</tr><tr>";
    echo "The table row";
}
?> 
```

此外，当您输出图像时，它应该是：

```
<?php
echo "<a href='ViewPicture.php?src=".urlencode($files[i +2])."' target='_blank'><img src='".urlencode('./thumbnails/'.$files[$i + 2])."' alt='".$files[$i + 2]."' title='".$files[$i + 2]."'/></a>'";
?> 
```

# gwt - 在端口 80 上链接 apache web 服务器和在端口 8080 上的 tomcat webapp

> ID：13021241
> 
> 赞同：1
> 
> 时间：2012-10-22T23:05:58.090
> 
> 标签：gwt, tomcat

在端口 80 上，我有普通的 apache web 服务器。

在端口 8080 上，我有带有客户端和服务器端内容的 tomcat。

我的目标是：

www.mydomain.com 在加载 javascript 内容时呈现静态且对 SEO 友好的 index.html。

在这个 index.html 的标题中，我加载 www.mydomain.com:8080/myapp/stuff.js

stuff.js 使用 gwt 编译并调用 RootLayoutPanel.get().add(nice_panel) 将删除静态内容并显示动态小部件。它还调用 servlet（服务器端代码）。

问题：出于安全原因，浏览器不允许我加载 www.mydomain.com:8080/myapp/stuff.js，因为它位于不同的端口上。

错误的尝试：我试图创建一个从“普通”apache web 服务器目录到包含 stuff.js 的 tomcat webapp 的符号链接。我现在可以加载 stuff.js，因为它的 url 是：www.mydomain.com/mysymlink_to_tomcat/stuff.js。但是由于浏览器的安全规则（“XMLHttpRequest 无法加载……来源……Access-Control-Allow-Origin 不允许”），stuff.js 不再能够再次调用服务器端的 servlet。

我想避免使用 header('location: [http://mydomain.com:8080/another_index_on_tomcat.html](http://mydomain.com:8080/another_index_on_tomcat.html) ') 从 index.html 重定向到 tomcat 的“疯狂”解决方案。该解决方案有效，但有许多缺点（SEO ...）

最好的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:40:08.397

您基本上有两种解决方案：

*   使其与 2 个来源一起工作：使用`xsiframe`GWT 中的链接器以允许页面`:80`加载脚本`:8080`（对于读者：这不是关于加载，而是关于脚本的作用）。将以下内容添加到您的 `gwt.xml：

    ```
    <add-linker name='xsiframe' /> 
    ```

    不幸的是，这并不能解决您使用 GWT-RPC 的问题（或者您用来与服务器交谈的任何东西）。为此，有[CORS](http://caniuse.com/cors)。

*   使用单一来源：使用 Apache `mod_proxy`（或`mod_jk`）通过 Apache 代理您的 Tomcat。没人会用`:8080`，一切都会过去`:80`。请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideRPCDeployment上](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideRPCDeployment)*的将 Tomcat 与 Apache HTTPD 和代理*一起使用

当然，还有放弃 HTTPD 并使用 Tomcat 提供所有服务的解决方案（最近的 Java 和 Tomcat 版本已经修复了它们的缓慢问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T06:55:16.460

最好的解决方案是当客户端调用请求 tomcat 应用程序时，将端口 80 调用重定向到 apache 上的 8080。

在 apache 上安装 mod_jk 并将其配置为在您想要的路径上安装上下文示例：（编辑 /mods_enabled/jk.conf）

```
# Configure access to jk-status and jk-manager
# If you want to make this available in a virtual host,
# either move this block into the virtual host
# or copy it logically there by including "JkMountCopy On"
# in the virtual host.
# Add an appropriate authentication method here!
<Location /jk-status>
    # Inside Location we can omit the URL in JkMount
    JkMount jk-status
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
</Location>
<Location /jk-manager>
    # Inside Location we can omit the URL in JkMount
    JkMount jk-manager
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
</Location>

JkMount /*/myAppDir/* ajp13 
```

然后在您的站点设置中添加一个虚拟主机（编辑 /apache2/sites-enabled/）

```
 <VirtualHost *:80>
    . Here is the rest of the
    . of the config of
    . the host
    # Tomcat jk connector settings
    JkMount /*.jsp ajp13_worker
    JkMount /myAppDir/* ajp13_worker
    JkMount /myAppDir* ajp13_worker
    JKMount /manager* ajp13_worker
    JkMount /manager/* ajp13_worker
    </VirtualHost> 
```

您还应该编辑 server.xml 文件并在标签内写入并注释先前的 Host name="localhost"

```
<!-- Define an AJP 1.3 Connector on port 8009 -->

<Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

<Host name="localhost" appBase="webapps" unpackWARs="true"
   autoDeploy="true" >

          <Context path="/" docBase="/var/lib/tomcat7/webapps/myAppDir/"
                       debug="0" reloadable="true" />
          <!-- please notes on logs down below -->
     <Valve className="org.apache.catalina.valves.AccessLogValve"
             directory="/var/lib/tomcat7/logs" prefix="tomcat_access_" 
            suffix=".log" pattern="common" resolveHosts="false" />
  </Host> 
```

剩下要做的就是编辑workers.properties 文件并添加

```
worker.myapp2.port=8009
worker.myapp2.host=localhost
worker.myapp2.type=ajp13
worker.loadbalancer.type=lb
worker.loadbalancer.balance_workers=ajp13_worker 
```

然后你应该开始工作，当一个包含 myAppDir 的 url 出现时，apache 服务器会将调用重定向到 tomcat，答案将从 apache 返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T23:08:25.333

我不确定这是否会避免安全错误，但您可以尝试使用 iframe。在 apache 上，你有 tomcat 的索引和 iframe，JS 在 iframe 中加载。不知道这是否有助于解决 SEO 问题。

# sql - 使用日志文件恢复数据库插入？

> ID：13021245
> 
> 赞同：0
> 
> 时间：2012-10-22T23:06:35.693
> 
> 标签：sql, database, logging, transactions

我正在开发一个程序，该程序应该在每次运行时向数据库插入数百行。

问题是一旦插入的数据是错误的，我们如何从那次运行中恢复？目前我只有一个日志文件（我创建了格式），它记录了插入的原始数据（没有元数据也没有主键）。有没有一种方法可以创建数据库可以理解的日志，并且一旦我们想要撤消插入，我们就可以向数据库提供该日志文件。

或者，如果有从程序中撤消操作的替代机制，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:19:20.547

事实上，这只有数百行，这使得它可以被所有撤消机制的曾祖母所接受：

*   每次运行都有一个表格`importruns`，其中有一行。我假设它有一个整数自增 PK
*   向您的数据表添加一个字段，该字段标识携带导入运行的 PK
*   对于仅插入运行，您只需要`DELETE FROM sometable WHERE importid=$whatever`

如果您也有替换/更新导入，请更进一步

*   对于每个数据表都有一个对应的表，该表多一个字段：`superseededby`
*   对于您更新/替换的每一行，在此表中放置该行的原始副本加上导入 id`superseededby`
*   要还原，您现在必须添加`INSERT INTO originaltable SELECT * FROM superseededtable WHERE superseededby=$whatever`

您可以清理`superseededtable`已知良好的进口，以确保存储不会无限增长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:13:53.537

你有几个选择。取决于您何时注意到错误。如果您知道数据有错误，您可以使用事务 API 回滚到当前事务的更改。

如果您稍后才知道有错误，那么您可以创建自己的日志。创建一个标识事务的索引，并将一个字段添加到将插入该 ID 的相关表中。这将允许您准确识别它来自哪个交易。您还可以创建一个存储过程，根据给定的事务 ID 删除行。

# python - numpy-->PIL int 类型问题

> ID：13021249
> 
> 赞同：4
> 
> 时间：2012-10-22T23:07:39.260
> 
> 标签：python, numpy, int, python-imaging-library

因此，我将要绘制的曲线的 x 和 y 值作为浮点值保存在 numpy 数组中。现在，我想将它们四舍五入到最接近的 int，并将它们绘制为空 PIL 图像中的像素值。省略我实际填充 x 和 y 向量的方式，以下是我们正在使用的内容：

```
# create blank image    
new_img = Image.new('L', (500,500))    
pix = new_img.load()

# round to int and convert to int    
xx = np.rint(x).astype(int)    
yy = np.rint(y).astype(int)

ordered_pairs = set(zip(xx, yy))

for i in ordered_pairs:    
    pix[i[0], i[1]] = 255 
```

这给了我一条错误消息：

```
 File "makeCurves.py", line 105, in makeCurve
    pix[i[0], i[1]] = 255        
TypeError: an integer is required 
```

但是，这对我来说毫无意义，因为`.astype(int)`应该将这些小狗转换为整数。如果我使用`pix[int(i[0]], int(i[1])]`它可以工作，但这很糟糕。

为什么我`.astype(int)`没有被 PIL 识别为 int？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:27:05.030

我认为问题在于您的 numpy 数组具有类型`numpy.int64`或类似的东西，PIL 不理解`int`它可以用来索引图像。

试试这个，它将所有`numpy.int64`s 转换为 Python `int`s：

```
# round to int and convert to int    
xx = map(int, np.rint(x).astype(int)) 
yy = map(int, np.rint(y).astype(int)) 
```

如果您想知道我是如何得出这个结论的，我`type`在 numpy 数组中的一个值上使用了该函数：

```
>>> a = np.array([[1.3, 403.2], [1.0, 0.3]])
>>> b = np.rint(a).astype(int)
>>> b.dtype
 dtype('int64')
>>> type(b[0, 0])
 numpy.int64
>>> type(int(b[0, 0]))
 int 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T23:17:43.630

不确定您在代码的第一部分中要做什么，但是为什么不使用此替换 pix = new_img.load() ：

```
# create blank image    
new_img = Image.new('L', (500,500))

pix = array(new_img) # create an array with 500 rows and 500 columns 
```

然后你可以按照你的原始代码：

```
# round to int and convert to int    
xx = np.rint(x).astype(int)    
yy = np.rint(y).astype(int)

ordered_pairs = set(zip(xx, yy))

for i in ordered_pairs:    
    pix[i[0], i[1]] = 255 

Out[23]: 
array([[  0,   0,   0, ...,   0,   0,   0],
       [  0, 255,   0, ...,   0,   0,   0],
       [  0,   0,   0, ...,   0,   0,   0],
       ..., 
       [  0,   0,   0, ...,   0,   0,   0],
       [  0,   0,   0, ...,   0,   0,   0],
       [  0,   0,   0, ...,   0,   0,   0]], dtype=uint8) 
```

# php - 在这个条件 css 函数中，应该使用哪个 jQuery 方法来加载标记块？

> ID：13021251
> 
> 赞同：0
> 
> 时间：2012-10-22T23:07:39.510
> 
> 标签：php, jquery, wordpress, responsive-design

我正在使用 WordPress根据视口大小[有条件地加载内容](http://css-tricks.com/examples/ConditionalCSS/)`load()`，但我需要用更合适的方法替换该方法。您可以通过调整浏览器大小并观看它根据浏览器大小加载自定义值来查看上面链接中的工作原理。

示例 CSS：

```
 body:after { 
        display: none; 

        /* Default */
        content: "Mobile";
    }

    @media (min-width: 35em) {
        body:after {
            content: "Desktop";
        }
    } 
```

具体来说，如果 JS 可以检测到它`content: "Mobile"`是活动的，它将加载移动内容。如果检测到`content: "Desktop"`，它将加载桌面内容。

这是我正在尝试使用的javascript：

```
$(function() {
    var currentSize = "Mobile";
    $(window).resize(function() {
        var size = window.getComputedStyle(document.body, ':after').getPropertyValue('content');

        /* Ridiculous thing to deal with inconsistent returning of
        value from query. Some browsers have quotes some don't */
        size = size.replace(/"/g, "");
        size = size.replace(/'/g, "");

        if (size != currentSize) {
            if (size == 'Desktop') {
               $(".content").load('file.php');
               currentSize = 'Desktop';
            }
        }

    }).resize();

} 
```

我只是意识到该`load()`方法不适合我正在尝试做的事情。如何加载带有自定义钩子的块？

这是我想插入桌面版本以替换移动版本代码的一些示例代码：

```
 <div class="item">
        <h2 class="nav-tab">One</h2>
        <?php the_block('One'); ?>
    </div>
    <div class="item">
        <h2 class="nav-tab">Two</h2>
        <?php the_block('Two'); ?>
    </div>
    <div class="item">
        <h2 class="nav-tab">Three</h2>
        <?php the_block('Three'); ?>
    </div> 
```

如您所见，有 3 个自定义挂钩包含更多标记和代码。我不知道如何正确地将其加载到 javascript 中，以便它替换移动版本代码。

# sql-server - 当您不知道受影响的表时处理分区

> ID：13021252
> 
> 赞同：0
> 
> 时间：2012-10-22T23:07:46.083
> 
> 标签：sql-server, sql-server-2008

我有一个小问题:(，我有一个数据库，一个partition_schema达到了1000个分区，上网看了一下发现是顶级但是可以增加到15000，我不能增加到15000 ，我可以做的解决方案是合并一些分区。

自20100101以来我每天都有一个分区，实际上有999，它不能再增加了，所以我想从一个月开始合并分区，但在此之前我想对将受到影响的信息进行备份, 但我不知道哪些表会受到具有 999 个范围的函数的影响。

问：我怎样才能知道哪些表受到该功能的影响？或者这是确保合并分区不会丢失数据的最佳方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:23:00.740

您不应该丢失数据合并分区。不过，请创建一个备份，以防万一。

这是一个查询，可以让您深入了解哪些表正在使用分区函数：

```
DECLARE @PartitionFunction sysname = 'YourPartitionFunctionName';

SELECT t.name TableName
     , pf.name PartitionFunction
     , ps.name PartitionScheme
     , pst.partition_number
     , pst.used_page_count
     , row_count
from sys.dm_db_partition_stats pst
JOIN sys.partitions p ON pst.partition_id = p.partition_id
JOIN    sys.tables t
        ON p.object_id = t.object_id
JOIN    sys.indexes i
        ON p.object_id = i.object_id
        AND p.index_id = i.index_id
JOIN    sys.allocation_units au
        ON p.hobt_id = au.container_id
JOIN    sys.filegroups f
        ON au.data_space_id = f.data_space_id
JOIN    sys.partition_schemes ps
        ON ps.data_space_id = i.data_space_id
JOIN    sys.partition_functions pf
        ON ps.function_id = pf.function_id
WHERE used_page_count > 0 
  AND pf.name = @PartitionFunction 
  AND pst.index_id IN (0,1)/*Remove Nonclustered index counts*/; 
```

[您还可以在此处](https://stackoverflow.com/questions/12688086/sql-server-partition-per-table-on-tenant-id-disk-space-used/12693894#12693894)参考我的答案，了解我经常用于监视分区卷的表值函数。

# ios - 如何根据框架的大小分隔 UIScrollView/UITextView 的字符串

> ID：13021253
> 
> 赞同：2
> 
> 时间：2012-10-22T23:07:49.413
> 
> 标签：ios, xcode, text, uiscrollview, scroll-paging

我目前正在尝试读取 RSS 提要并将长段落文本分离到启用分页的 UIScrollView 中。我需要将文本分成不同的页面，也就是适合每个页面的内容并将字符串分开。我不确定这样做是否有标准，我认为这是大多数 RSS 阅读应用程序在多个页面上分离信息的方式。有谁知道如何解决这个问题？在文本不适合并继续之前，我不想逐个字母地查看。

编辑：

这是一个好的开始，但是示例代码几乎遇到了我试图避免并且不知道如何解决的问题。此范围为 UITextView 计算不正确。我更改了字体，如下所示。一切都试图在 - (NSRange)visibleRangeOfTextView:(UITextView *)textView 内计算。此方法由 -(void)adjustTextDisplay 调用，该方法在为 UITextView 设置文本后由外部类调用。我不知道为什么将内容大小设置为屏幕的框架大小不会限制视图（如下所示），也不知道为什么此方法会返回完整的字符串长度作为范围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:30:26.707

我没有进行繁重的迭代计算，而是将完整的（当然从上一页开始）文本设置为 textView 并[获取最后显示的字符位置](https://stackoverflow.com/a/9283311/792677)。然后很容易执行快速向后搜索来截断单词/句子。

* * *

我有以下解决方案，跳过最后部分显示的行，以避免滚动并使其看起来更好看，这是一个有点棘手的部分。您仍然需要移动`endCutIndex`以使其为单词或句子换行。

带有寻呼机但没有文本视图的基础项目取自[这里](https://github.com/cwalcott/UIScrollView-Paging/tree/buttons-ib)

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSString * fullText = @"Lorem ipsum dolor sit er elit lamet, consectetaur cillium adipisicing pecu, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Nam liber te conscient to factor tum poen legum odioque civiuda.";

    pageControlBeingUsed = NO;

    int pageNumber = 0;
    UIFont * theFont = [UIFont boldSystemFontOfSize:30];
    const CGSize charSize = [@"A" sizeWithFont:theFont];

    while (fullText.length > 0) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * (pageNumber++);
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;

        UIView *subview = [[UIView alloc] initWithFrame:frame];

        UITextView * textView = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, frame.size.width, frame.size.height)];
        textView.font = theFont;
        [subview addSubview:textView];
        [textView release];

        textView.text = fullText;

        CGRect bounds = textView.bounds;
        // - charSize.height to skip a partially visible line
        // - charSize.width*2 to skip annoying character still displayed at partially visible line
        CGPoint endPoint = CGPointMake(CGRectGetMaxX(bounds) - charSize.width*2, CGRectGetMaxY(bounds) - charSize.height);
        UITextPosition *start = [textView characterRangeAtPoint:bounds.origin].start;
        UITextPosition *end = [textView characterRangeAtPoint:endPoint].end;

        const int startCutIndex = [textView offsetFromPosition:textView.beginningOfDocument toPosition:start];
        const int endCutIndex =   [textView offsetFromPosition:textView.beginningOfDocument toPosition:end];

        NSString * cutText = [fullText substringToIndex:endCutIndex];
        textView.text = cutText;
        fullText = [fullText substringFromIndex:endCutIndex];

        [self.scrollView addSubview:subview];
        [subview release];

        NSLog(@"Page (1-total) %d, start text index %d, end text index %d \ntext:%@", pageNumber, startCutIndex, endCutIndex, cutText);
    }

    const int totalPages = pageNumber;

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * totalPages, self.scrollView.frame.size.height);

    self.pageControl.currentPage = 0;
    self.pageControl.numberOfPages = totalPages;
} 
```

这是 .h 文件的一部分：

```
@interface FCContentViewController : UIViewController <UIScrollViewDelegate, UITextViewDelegate>{
    UIPageControl *pageControl;   
    NSString *trunkedString;
    UITextView *bodyText;
}
@property (nonatomic, retain) UIScrollView *scrollView;
@property (nonatomic, retain) NSString *bodyTextString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-26T15:08:52.623

从 iOS 7 开始，我在下面的示例代码中包含了一个更优雅的使用 TextKit 的解决方案。这个想法是让 TextKit 的布局管理器处理分离字形并以这种方式正确布置所有内容。这可以防止中途截断单词和大量的灵活性：

```
class BookView: UIScrollView {

    var bookMarkup: NSAttributedString!
    private let layoutManager = NSLayoutManager()

    override func layoutSubviews() {
        super.layoutSubviews()

        if layoutManager.textContainers.count == 0 {
            buildFrames()
        }
    }

    func buildFrames() {
        let textStorage = NSTextStorage(attributedString: bookMarkup)

        textStorage.addLayoutManager(layoutManager)

        var range = NSMakeRange(0, 0)
        var containerIndex = 0

        while NSMaxRange(range) < layoutManager.numberOfGlyphs {
            let textViewRect = frameForViewAtIndex(containerIndex)
            let containerSize = CGSizeMake(CGRectGetWidth(textViewRect), CGRectGetHeight(textViewRect) - 16) //UITextView adds an 8 margin above and below the container so we take that into consideration here with the 16\. heightTracksTextView causes a performance hit when adding multiple containers... so we don't do that instead
            let textContainer = NSTextContainer(size: containerSize)
            layoutManager.addTextContainer(textContainer)

            let textView = UITextView(frame: textViewRect, textContainer: textContainer)

            addSubview(textView)

            containerIndex++

            range = layoutManager.glyphRangeForTextContainer(textContainer)
        }

        contentSize = CGSize(width: CGRectGetWidth(bounds) / 2 * CGFloat(containerIndex), height: CGRectGetHeight(bounds))

        pagingEnabled = true
    }

    private func frameForViewAtIndex(index: Int) -> CGRect {

        var textViewRect = CGRect(origin: CGPointZero, size: CGSize(width: CGRectGetWidth(bounds)/2, height: CGRectGetHeight(bounds)))
        textViewRect = CGRectInset(textViewRect, 10, 20)
        textViewRect = CGRectOffset(textViewRect, CGRectGetWidth(bounds) / 2 * CGFloat(index), 0)
        return textViewRect
    }
} 
```

# google-app-engine - 使用 bottle.py 和 blobstore GAE

> ID：13021255
> 
> 赞同：1
> 
> 时间：2012-10-22T23:07:54.767
> 
> 标签：google-app-engine, blobstore, bottle

我最近开始使用瓶子和 GAE blobstore，虽然我可以将文件上传到 blobstore，但我似乎找不到从商店下载它们的方法。

我按照文档中的示例进行操作，但仅在上传部分成功。我无法将示例集成到我的应用程序中，因为我使用的框架与 webapp/2 不同。

我将如何创建一个上传处理程序和下载处理程序，以便我可以获取上传的 blob 的密钥并将其存储在我的数据模型中并稍后在下载处理程序中使用它？

我尝试使用`BlobInfo.all()`来创建对 blobstore 的查询，但我无法获取实体的键名字段值。

这是我与 blobstore 的第一次互动，所以我不介意关于更好地解决问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:04:38.227

对于提供 blob，我建议您查看[BlobstoreDownloadHandler 的源代码](http://code.google.com/searchframe#Qx8E-7HUBTk/trunk/python/google/appengine/ext/webapp/blobstore_handlers.py&l=216)。将其移植到瓶中应该很容易，因为该框架没有什么特别的。

这是一个关于如何使用的例子`BlobInfo.all()`：

```
for info in blobstore.BlobInfo.all():
  self.response.out.write('Name:%s Key: %s Size:%s Creation:%s ContentType:%s<br>' % (info.filename, info.key(), info.size, info.creation, info.content_type)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:28:06.197

对于下载，您只需要生成一个响应，其中包含标头“X-AppEngine-BlobKey:[your blob_key]”以及您需要的所有其他内容，例如 Content-Disposition 标头（如果需要）。或者如果它是一个图像，你可能应该只使用高性能图像服务 api，生成一个 url 并重定向到它....完成

对于上传，除了为 appengine 编写一个处理程序以在上传安全到 blobstore 后调用（在文档中）

您需要一种在传入请求中查找 blob 信息的方法。我不知道瓶子里的请求是什么样的。Blobstoreuploadhandler 有一个 get_uploads 方法，据我所知，它确实没有理由需要是一个实例方法。因此，这是一个需要 webob 请求的通用实现示例。对于瓶子，您需要编写与瓶子请求对象兼容的类似内容。

```
def get_uploads(request, field_name=None):
    """Get uploads for this request.
    Args:
      field_name: Only select uploads that were sent as a specific field.
      populate_post: Add the non blob fields to request.POST
    Returns:
      A list of BlobInfo records corresponding to each upload.
      Empty list if there are no blob-info records for field_name.

    stolen from the SDK since they only provide a way to get to this
    crap through their crappy webapp framework
    """
    if not getattr(request, "__uploads", None):
        request.__uploads = {}
        for key, value in request.params.items():
            if isinstance(value, cgi.FieldStorage):
                if 'blob-key' in value.type_options:
                    request.__uploads.setdefault(key, []).append(
                        blobstore.parse_blob_info(value))

    if field_name:
        try:
            return list(request.__uploads[field_name])
        except KeyError:
            return []
    else:
        results = []
        for uploads in request.__uploads.itervalues():
            results += uploads
        return results 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T20:33:03.877

对于将来寻找此答案的任何人，要做到这一点，您需要 bottle (d'oh!) 和 defnull 的[multipart](https://github.com/defnull/multipart)模块。

由于创建上传 URL 通常很简单，并且根据 GAE 文档，我将只介绍上传处理程序。

```
from bottle import request
from multipart import parse_options_header
from google.appengine.ext.blobstore import BlobInfo

def get_blob_info(field_name):
    try:
        field = request.files[field_name]
    except KeyError:
        # Maybe form isn't multipart or file wasn't uploaded, or some such error
        return None
    blob_data = parse_options_header(field.content_type)[1]
    try:
        return BlobInfo.get(blob_data['blob-key'])
    except KeyError:
        # Malformed request? Wrong field name?
        return None 
```

抱歉，如果代码中有任何错误，那我就想不通了。

# java - Java 同步方法和块

> ID：13021256
> 
> 赞同：0
> 
> 时间：2012-10-22T23:08:16.810
> 
> 标签：java, concurrency, synchronization, synchronized, concurrent-programming

我试图更全面地理解 Java 中多个线程的同步。我理解使用 synchronized 关键字背后的高级思想，以及它如何在线程之间提供互斥。

唯一的问题是，即使您删除了使该主题比我认为需要的更混乱的 synchronized 关键字，我在网上和教科书中阅读的大多数示例仍然可以正常工作。

谁能给我一个具体的例子，说明什么时候不包括 synchronized 关键字会产生错误的结果？任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:24:24.240

关于竞争条件的事情是，如果你不进行适当的同步，它们*不一定*会发生——事实上，经常它会工作得很好——但是一年后，在半夜，你的代码将因无法重现的完全不可预测的错误而崩溃，因为该错误仅随机出现。

竞争条件之所以如此阴险，正是因为它们并不*总是*让你的程序崩溃，而且它们或多或少是随机触发的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:35:29.433

您通常可以通过增加迭代次数来触发竞争条件。这是一个简单的示例，它适用于 100 和 1,000 次迭代，但在 10,000 次迭代（有时）时失败（至少在我的四核机器上）。

```
public class Race
{
    static final int ITERATIONS = 10000;
    static int counter;

    public static void main(String[] args) throws InterruptedException {
        System.out.println("start");
        Thread first = new Thread(new Runnable() {
            @Override
            public void run() {
                for (int i = 0; i < ITERATIONS; i++) {
                    counter++;
                }
            }
        });
        Thread second = new Thread(new Runnable() {
            @Override
            public void run() {
                for (int i = 0; i < ITERATIONS; i++) {
                    counter++;
                }
            }
        });
        first.start();
        second.start();
        first.join();
        second.join();
        System.out.println("Counter " + counter + " should be " + (2 * ITERATIONS));
    }
}

>>> Counter 12325 should be 20000 
```

此示例失败，因为访问`counter`未正确同步。它可能以两种方式失败，可能都在同一次运行中：

*   一个线程看不到另一个线程增加了计数器，因为它没有看到新值。
*   一个线程在另一个线程读取当前值和写入新值之间递增计数器。这是因为递增和递减运算符不是原子的。

这个简单程序的修复方法是使用`AtomicInteger`. 由于增量的问题，使用`volatile`还不够，但`AtomicInteger`提供了增量、获取和设置等的原子操作。

# flash - TEmbeddedWB/Webbrowser 设置本地区域安全性以接受加载本地 SWF 文件不起作用但在“真实”浏览器中工作

> ID：13021257
> 
> 赞同：3
> 
> 时间：2012-10-22T23:08:24.740
> 
> 标签：flash, delphi, internet-explorer-9, local, twebbrowser

**故事：** 我开发了一款游戏，我想使用目标操作系统的 webview/嵌入式浏览器部署到许多平台。一次编写，多次部署；-)

游戏本身是使用 HTML5/CSS3 和 javascript 开发的，并且还为支持 Flash 的平台（如 Windows 和 MacOsX）添加了一点 Flash。flash 文件仅用于音频，因为 HTML5 音频标签可以操作不同的平台，并且与 flash 相比没有太多功能。在移动平台上，它将切换回音频标签。

无论如何，我已经编写了一个“编译器”，它可以压缩我的代码并将资源/资产的路径更改/映射到本地文件系统。这是为了能够部署使用 HTML/etc 创建的游戏或其他应用程序，而无需访问互联网并将其组合成一个包。所有 javascript 都被缩小并“嵌入”在 HTML 文件中，包括 CSS 和一些小图像。但这不能用 Flash/SWF 文件完成（我认为？）。

**这是我的问题：** 我已经在 Firefox、Safari、Opera、Chrome 和 Internet Explorer 9 等“真正的”桌面浏览器中测试了游戏的本地版本。Flash 可在除 Chrome 之外的所有浏览器中运行。

但是：当我将它加载到 IE9 的嵌入式版本（使用 TEmbeddedWB 的 Delphi 可执行文件）时，它不会加载 flash 文件。我找到了一些设置区域映射安全性的代码，但似乎不起作用：

```
 var 
   sUrl : string;
   sw : WideString;
.....
.....
  sUrl:='file:///C:\mygame\mygame.html';
  sw:=WideString( sUrl );
  if( embeddedWB.SecurityManager.SetZoneMapping(URLZONE_LOCAL_MACHINE, PWideChar( @sw ),SZM_CREATE) = S_OK ) then
   showMessage( 'OK' )
  else showMessage( 'NOT SET' );  
  embeddedWB.Go( sUrl );

..... 
```

出现一个带有“OK”的消息框并加载文档，但没有闪烁（没有声音）。

问题：**出了什么问题，为什么它不起作用，有人知道如何解决这个问题吗？**

供您参考：

*   我已经测试过 IE9 正在运行
*   flash 文件使用 Security.allowDomain("*");
*   我为 SWF (crossdomain.xml) 创建了一个安全策略 xml 文件

跨域.xml：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <site-control permitted-cross-domain-policies="all" />
  <allow-access-from domain="*" />
  <allow-http-request-headers-from domain="*" headers="*"/>
</cross-domain-policy> 
```

感谢您的任何回复。如果您有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:43:00.517

有人告诉我，今年早些时候，Chrome 被更改为禁止加载本地 Flash 文件。（我不明白为什么只有*本地*文件会带来安全风险，而基于 Web 的文件不会......）

在此处查看与此主题相关的我的问题的评论：[Detect Chrome as browser associated with html files in Windows](https://stackoverflow.com/questions/11962753/detect-chrome-as-browser-associated-with-html-files-in-windows)。其中一位提到本地闪存文件在 IE 上也可能存在问题。

我们决定永远不要在我们的 applications.xc 中使用本地 flash 文件

**编辑**：这是 Chrome 上的错误报告的链接：[http](http://code.google.com/p/chromium/issues/detail?id=140755) ://code.google.com/p/chromium/issues/detail?id=140755 。这听起来不像一个漂亮的情况。

**更新**：在 Chrome 中尝试在 Techsmith 的 Camtasia 播放器中播放 MP4 时，我收到以下消息。这是对我上面描述的行为的确认。

![Chome 消息声明功能被禁用](../Images/4a9cabae6a8203c1a547caa6306b2afe.png)

# jquery - jQuery 按钮单击在 Rails 3.2.2 呈现部分中不起作用

> ID：13021259
> 
> 赞同：1
> 
> 时间：2012-10-22T23:08:36.450
> 
> 标签：jquery, ruby-on-rails-3, jquery-ui

这是具有附加按钮的部分（_lookup.html.erb）

```
<div class="lookupbtnrow">
    <button id="lookupappend" type="button" class="ui-corner-all">Append</button>
</div> 
```

这是在lookup.js 中的测试jquery 函数

```
$("#lookupappend").click(function(){
     alert("testing...");
}); 
```

如果我将**div**内容放在索引页面中，按钮单击工作正常，但是当我将**div**内容放入部分时，按钮根本不起作用。

我必须在部分中放置一个 <%= javascript_include_tag %> 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:01:34.750

如果问题源于`dom ready`仅适用于索引文档的函数，而不适用于加载部分，我不会感到惊讶，从而导致竞争条件。尝试将 javascript 链接放入部分中，看看会发生什么。或者将点击处理程序绑定到一个函数中，并在部分加载时调用该函数。

祝你好运
-布赖恩

# iphone - iOS：[imagePickerController.cameraOverlayView addSubview:] 不工作

> ID：13021261
> 
> 赞同：2
> 
> 时间：2012-10-22T23:08:49.967
> 
> 标签：iphone, ios, ios5, ios4, uiimagepickercontroller

我正在尝试将 UIToolbar 添加到我的 cameraOverlayView 以获取自定义 imagePickerController。这是我要使用的代码：

```
[self.imagePickerController.cameraOverlayView addSubview:self.topToolbar]; 
```

尝试添加 UIToolbar 时，没有显示任何内容。如果我使用，将其封装到 UIView 并将其设置为 view 属性有效：

```
[self.imagePickerController.cameraOverlayView addSubview:self.view]; 
```

但这限制了我在想要添加多个视图时为我的叠加层使用一个视图。我知道我可以将所有内容封装到一个大视图中，但是当我这样做时，我的底部工具栏无法正确显示。

有没有人成功地将 UIToolbar 作为子视图添加到 cameraOverlayView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:40:00.100

我认为你需要一个视图来把你需要的所有东西放在你的 cameraOverlay 中。例如：

TempView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)]; TempView.alpha = 1.0;

```
anImageView1 = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@""]];
anImageView1.frame = CGRectMake(0, 0, anImageView1.image.size.width, anImageView1.image.size.height-50);
anImageView1.hidden = NO;
anImageView1.alpha = 1.0f;

tabBarHolder = [[UIImageView alloc]init];
tabBarHolder.backgroundColor = [UIColor blackColor];
tabBarHolder.frame = CGRectMake(0, 415, 320, 80);

tampBtn = [[UIButton alloc] initWithFrame:CGRectMake(15, 430, 35, 35)];
[tampBtn setBackgroundImage:[UIImage imageNamed:@"iconBack.png"] forState:UIControlStateNormal];
[tampBtn addTarget:self 
            action:@selector(xup) 
  forControlEvents:UIControlEventTouchUpInside];

ctampBtn = [[UIButton alloc] initWithFrame:CGRectMake(145, 430, 35, 35)];
[ctampBtn setBackgroundImage:[UIImage imageNamed:@"iconCamera.png"] forState:UIControlStateNormal];
[ctampBtn addTarget:self 
             action:@selector(takephoto) 
   forControlEvents:UIControlEventTouchUpInside];

[TempView addSubview:ctampBtn];
[TempView addSubview:tampBtn];
[TempView addSubview:anImageView1];
[TempView addSubview:tabBarHolder];
[TempView bringSubviewToFront:tabBarHolder];
[TempView bringSubviewToFront: ctampBtn];
[TempView bringSubviewToFront:tampBtn];

imagePicker.cameraOverlayView =TempView; 
```

# plone - 重复的内容 ID 上传具有大文件名的文件

> ID：13021264
> 
> 赞同：0
> 
> 时间：2012-10-22T23:09:30.963
> 
> 标签：plone

我正在尝试使用`collective.quickupload`.

**这些是文件名的示例：**

```
'habana vedado casa edificio atlantic apartamento 11A (10).jpg'
'habana vedado casa edificio atlantic apartamento 11A (11).jpg'
'habana vedado casa edificio atlantic apartamento 11A (12).jpg' 
```

这个插件为每个文件生成相同的 id。

**它正在使用：**

```
normalizer = component.getUtility(IIDNormalizer)
newid = '.'.join ((normalizer.normalize(filename), fileextension)) 
```

但是使用此代码，它会为每个文件生成相同的 id。

我怎样才能解决这个问题？

# c - windows错误参数类型c编程

> ID：13021267
> 
> 赞同：1
> 
> 时间：2012-10-22T23:10:03.767
> 
> 标签：c, windows, winapi

我有这个代码，我在 Windows 中没有经验：

```
#include <windows.h>
#include <stdio.h>

   typedef BOOL (WINAPI *P_GDFSE)(LPCTSTR, PULARGE_INTEGER, 
                                  PULARGE_INTEGER, PULARGE_INTEGER);

   void main (int argc, char **argv)
   {
      BOOL  fResult;

      char  *pszDrive  = NULL,
             szDrive[4];

      DWORD dwSectPerClust,
            dwBytesPerSect,
            dwFreeClusters,
            dwTotalClusters;

      P_GDFSE pGetDiskFreeSpaceEx = NULL;

      unsigned __int64 i64FreeBytesToCaller,
                       i64TotalBytes,
                       i64FreeBytes;

      if (argc != 2)
      {
         printf ("usage:  %s <drive|UNC path>\n", argv[0]);
         printf ("\texample:  %s C:\\\n", argv[0]);
         return;
      }

      pszDrive = argv[1];

      if (pszDrive[1] == ':')
      {
         szDrive[0] = pszDrive[0];
         szDrive[1] = ':';
         szDrive[2] = '\\';
         szDrive[3] = '\0';

         pszDrive = szDrive;
      }

     // FIRST ERROR  kernel32.dll
      pGetDiskFreeSpaceEx = (P_GDFSE)GetProcAddress (
                               GetModuleHandle ("kernel32.dll"),
                                              "GetDiskFreeSpaceExA");
       // SECOND ERROR pszDrive
      if (pGetDiskFreeSpaceEx)
      {
         fResult = pGetDiskFreeSpaceEx (pszDrive,
                                 (PULARGE_INTEGER)&i64FreeBytesToCaller,
                                 (PULARGE_INTEGER)&i64TotalBytes,
                                 (PULARGE_INTEGER)&i64FreeBytes);
         if (fResult)
         {
            printf ("\n\nGetDiskFreeSpaceEx reports\n\n");
            printf ("Available space to caller = %I64u MB\n",
                    i64FreeBytesToCaller / (1024*1024));
            printf ("Total space               = %I64u MB\n",
                    i64TotalBytes / (1024*1024));
            printf ("Free space on drive       = %I64u MB\n",
                    i64FreeBytes / (1024*1024));
         }
      }
      else
      {
         // ERROR 3 pszDrive
         fResult = GetDiskFreeSpace (pszDrive, 
                                     &dwSectPerClust,
                                     &dwBytesPerSect, 
                                     &dwFreeClusters,
                                     &dwTotalClusters);
         if (fResult)
         {
            /* force 64-bit math */ 
            i64TotalBytes = (__int64)dwTotalClusters * dwSectPerClust *
                              dwBytesPerSect;
            i64FreeBytes = (__int64)dwFreeClusters * dwSectPerClust *
                              dwBytesPerSect;

            printf ("GetDiskFreeSpace reports\n\n");
            printf ("Free space  = %I64u MB\n", 
                    i64FreeBytes / (1024*1024));
            printf ("Total space = %I64u MB\n", 
                    i64TotalBytes / (1024*1024));
         }
      }

      if (!fResult)
         printf ("error: %lu:  could not get free space for \"%s\"\n",
                 GetLastError(), argv[1]);
   } 
```

我收到了这些错误（visual studio 2010 终极版）：

在 kernel32.dll：

pGetDiskFreeSpaceEx = (P_GDFSE)GetProcAddress (GetModuleHandle ("kernel32.dll"), "GetDiskFreeSpaceExA");

错误：const char* 类型的参数与“LPCWSTR”类型的参数不兼容

在 pszDrive：

```
fResult = pGetDiskFreeSpaceEx (pszDrive,
                                 (PULARGE_INTEGER)&i64FreeBytesToCaller,
                                 (PULARGE_INTEGER)&i64TotalBytes,
                                 (PULARGE_INTEGER)&i64FreeBytes); 
```

错误：char* 类型的参数与“LPCTSTR”类型的参数不兼容

在 pszDrive：

```
 fResult = GetDiskFreeSpace (pszDrive, 
                                     &dwSectPerClust,
                                     &dwBytesPerSect, 
                                     &dwFreeClusters,
                                     &dwTotalClusters); 
```

错误：char* 类型的参数与“LPCWSTR”类型的参数不兼容

多谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:36:21.943

最简单的解决方案是将项目设置更改为多字节字符集。

为此，在解决方案资源管理器中右键单击项目，选择属性。在属性对话框的左侧窗格中选择常规。找到字符集并将其更改为“使用多字节字符集”。

但是，如果您要进行大量 Windows 编程，您应该习惯 Unicode。基本上这意味着使用 wchar_t（或 TCHAR）而不是 char，包括在常量字符串中：

```
 pGetDiskFreeSpaceEx = (P_GDFSE)GetProcAddress (
                                          GetModuleHandle (L"kernel32.dll"),
                                          "GetDiskFreeSpaceExW"); 
```

在这种情况下，正如 Adam 正确指出的那样，您还需要将函数名称从 A 版本更改为 W 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:56:24.283

更改您的代码以更加`TCHAR`了解，因为当您像您一样将 Ansi 和 Unicode 代码混合在一起时，这是 Win2 API 所期望的：

```
#include <windows.h> 
#include <stdio.h> 
#include <tchar.h>

typedef BOOL (WINAPI *P_GDFSE)(LPCTSTR, PULARGE_INTEGER,  
                              PULARGE_INTEGER, PULARGE_INTEGER); 

void _tmain (int argc, TCHAR **argv) 
{ 
    BOOL  fResult; 

    TCHAR *pszDrive = NULL,
          szDrive[4]; 

    DWORD dwSectPerClust, 
          dwBytesPerSect, 
          dwFreeClusters, 
          dwTotalClusters; 

    P_GDFSE pGetDiskFreeSpaceEx = NULL; 

    unsigned __int64 i64FreeBytesToCaller, 
                     i64TotalBytes, 
                     i64FreeBytes; 

    if (argc != 2) 
    { 
        _tprintf (_T("usage:  %s <drive|UNC path>\n"), argv[0]); 
        _tprintf (_T("\texample:  %s C:\\\n"), argv[0]); 
        return; 
    } 

    pszDrive = argv[1]; 

    if (pszDrive[1] == TEXT(':')) 
    { 
        _stprintf(szDrive, _T("%s:\\"), pszDrive[0]); 
        pszDrive = szDrive; 
    } 

    // FIRST ERROR  kernel32.dll 
    pGetDiskFreeSpaceEx = (P_GDFSE) GetProcAddress ( 
                           GetModuleHandle (TEXT("kernel32.dll")), 
                                          #ifdef UNICODE
                                          "GetDiskFreeSpaceExW"); 
                                          #else
                                          "GetDiskFreeSpaceExA"); 
                                          #endif
                           );

    // SECOND ERROR pszDrive 
    if (pGetDiskFreeSpaceEx) 
    { 
        fResult = pGetDiskFreeSpaceEx (pszDrive, 
                             (PULARGE_INTEGER)&i64FreeBytesToCaller, 
                             (PULARGE_INTEGER)&i64TotalBytes, 
                             (PULARGE_INTEGER)&i64FreeBytes); 
        if (fResult) 
        { 
            _tprintf (_T("\n\nGetDiskFreeSpaceEx reports\n\n")); 
            _tprintf (_T("Available space to caller = %I64u MB\n"), 
                i64FreeBytesToCaller / (1024*1024)); 
            _tprintf (_T("Total space               = %I64u MB\n"), 
                i64TotalBytes / (1024*1024)); 
            _tprintf (_T("Free space on drive       = %I64u MB\n"), 
                i64FreeBytes / (1024*1024)); 
        } 
    } 
    else 
    { 
        // ERROR 3 pszDrive 
        fResult = GetDiskFreeSpace (pszDrive,  
                                 &dwSectPerClust, 
                                 &dwBytesPerSect,  
                                 &dwFreeClusters, 
                                 &dwTotalClusters); 
        if (fResult) 
        { 
            /* force 64-bit math */  
            i64TotalBytes = (__int64)dwTotalClusters * dwSectPerClust * 
                          dwBytesPerSect; 
            i64FreeBytes = (__int64)dwFreeClusters * dwSectPerClust * 
                          dwBytesPerSect; 

            _tprintf (_T("GetDiskFreeSpace reports\n\n")); 
            _tprintf (_T("Free space  = %I64u MB\n"),  
                i64FreeBytes / (1024*1024)); 
            _tprintf (_T("Total space = %I64u MB\n"),  
                i64TotalBytes / (1024*1024)); 
        } 
    } 

    if (!fResult) 
        _tprintf (_T("error: %lu:  could not get free space for \"%s\"\n"), 
             GetLastError(), argv[1]); 
} 
```

否则，由于您使用`UNICODE`启用编译，只需编写仅 Unicode 代码：

```
#include <windows.h> 
#include <stdio.h> 

typedef BOOL (WINAPI *P_GDFSE)(LPCWSTR, PULARGE_INTEGER,  
                              PULARGE_INTEGER, PULARGE_INTEGER); 

void wmain (int argc, wchar_t **argv) 
{ 
    BOOL  fResult; 

    wchar_t *pszDrive = NULL,
          szDrive[4]; 

    DWORD dwSectPerClust, 
          dwBytesPerSect, 
          dwFreeClusters, 
          dwTotalClusters; 

    P_GDFSE pGetDiskFreeSpaceEx = NULL; 

    unsigned __int64 i64FreeBytesToCaller, 
                     i64TotalBytes, 
                     i64FreeBytes; 

    if (argc != 2) 
    { 
        wprintf (L"usage:  %s <drive|UNC path>\n", argv[0]); 
        wprintf (L"\texample:  %s C:\\\n", argv[0]); 
        return; 
    } 

    pszDrive = argv[1]; 

    if (pszDrive[1] == L':') 
    { 
        _stprintf(szDrive, _T("%s:\\"), pszDrive[0]); 
        pszDrive = szDrive; 
    } 

    // FIRST ERROR  kernel32.dll 
    pGetDiskFreeSpaceEx = (P_GDFSE) GetProcAddress ( 
                           GetModuleHandle (TEXT("kernel32.dll")), 
                                          "GetDiskFreeSpaceExW"
                           ); 
    // SECOND ERROR pszDrive 
    if (pGetDiskFreeSpaceEx) 
    { 
        fResult = pGetDiskFreeSpaceEx (pszDrive, 
                             (PULARGE_INTEGER)&i64FreeBytesToCaller, 
                             (PULARGE_INTEGER)&i64TotalBytes, 
                             (PULARGE_INTEGER)&i64FreeBytes); 
        if (fResult) 
        { 
            wprintf (L"\n\nGetDiskFreeSpaceEx reports\n\n"); 
            wprintf (L"Available space to caller = %I64u MB\n", 
                i64FreeBytesToCaller / (1024*1024)); 
            wprintf (L"Total space               = %I64u MB\n", 
                i64TotalBytes / (1024*1024)); 
            wprintf (L"Free space on drive       = %I64u MB\n", 
                i64FreeBytes / (1024*1024)); 
        } 
    } 
    else 
    { 
        // ERROR 3 pszDrive 
        fResult = GetDiskFreeSpace (pszDrive,  
                                 &dwSectPerClust, 
                                 &dwBytesPerSect,  
                                 &dwFreeClusters, 
                                 &dwTotalClusters); 
        if (fResult) 
        { 
            /* force 64-bit math */  
            i64TotalBytes = (__int64)dwTotalClusters * dwSectPerClust * 
                          dwBytesPerSect; 
            i64FreeBytes = (__int64)dwFreeClusters * dwSectPerClust * 
                          dwBytesPerSect; 

            wprintf (L"GetDiskFreeSpace reports\n\n"); 
            wprintf (L"Free space  = %I64u MB\n",  
                i64FreeBytes / (1024*1024)); 
            wprintf (L"Total space = %I64u MB\n",  
                i64TotalBytes / (1024*1024)); 
        } 
    } 

    if (!fResult) 
        wprintf (L"error: %lu:  could not get free space for \"%s\"\n", 
             GetLastError(), argv[1]); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:13:13.503

您显然是在`UNICODE`模式下编译。更改以下内容：

```
void _tmain (int argc, TCHAR **argv) 
```

和

```
 TCHAR  *pszDrive  = NULL,
         szDrive[4]; 
```

那应该会让你走得更远。有关更多信息，请参阅以下问题：[C++ 中的 _tmain() 和 main() 有什么区别？](https://stackoverflow.com/questions/895827/what-is-the-difference-between-tmain-and-main-in-c)

# android - 可作为应用程序独立使用 ffmpeg

> ID：13021270
> 
> 赞同：0
> 
> 时间：2012-10-22T23:10:12.040
> 
> 标签：android, ffmpeg

这个应用程序可用吗？我不想编译 ffmpeg 并将其添加到 android 项目中。我想通过 sh 执行应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:04:09.453

在 kubuntu 中构建：

```
--target-os=linux --cross-prefix=arm-linux-androideabi- --arch=arm --sysroot=~/app/android-ndk-r8b/platforms/android-3/arch-arm --disable-doc --disable-htmlpages --disable-txtpages --disable-podpages --disable-ffplay --disable-ffprobe --disable-ffserver --disable-network --disable-debug --enable-libamr-wb --prefix=../build/ffmpeg/armeabi --extra-cflags= --extra-ldflags= 
```

# php - 尝试上传本地更改的HTML文件，apache只显示最后一个版本

> ID：13021271
> 
> 赞同：1
> 
> 时间：2012-10-22T23:10:16.143
> 
> 标签：php, html, windows, apache, winscp

我正在调试驻留在 Debian 和 Apache 上的大型 Web 应用程序的代码。即使我在更改和上传 .php 文件时没有任何问题，但当涉及到特定的 html 文件时，无论我上传多少次，网络服务器都会继续提供相同版本的 html。

其实我一开始改过一次，后来又改了，删了再上传，还是不行。当我转到 http://[HOST]/.../thisFile.htm 页面时，会显示我第一次更改的 thisFile.htm 的版本。奇怪的是，如果我在远程服务器中打开文件（使用 ssh），它确实被改变了，因为它应该是。

为了让它更奇怪，我的同事在他的 mac 上尝试了同样的事情（我使用 windows 和 winscp）。他在更改文件时没有任何问题。但是当我更改它时，服务器会继续显示 htm 文件的最新版本。我的同事通过 ssh 打开文件时可以看到我所做的更改，但看不到网站的更改，除非他自己进行了更改并上传了文件。

在这种情况下可能是什么问题？这很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:52:21.210

如果您使用的是 Windows XP 或更早版本，这可能是由于 WinSCP 将时间戳移动了一个小时以补偿 Windows DST“错误”。

有关详细信息，请参见此处：
[https ://winscp.net/eng/docs/timestamp#windows](https://winscp.net/eng/docs/timestamp#windows)

# ios - IOS 应用的图像显示选项

> ID：13021273
> 
> 赞同：1
> 
> 时间：2012-10-22T23:10:36.297
> 
> 标签：ios, cocoa

我正在开发一个 IOS 应用程序，该应用程序将显示用户从我的网站上传的图像。

在移动设备或服务器上调整图像大小的最佳做法是什么？

选项 A - 调整缩略图大小、所需大小并将其存储在云服务器上，例如 Amazon S3，其中托管 iphoneretina_ImgA、Iphone_ImgA、Ipad_ImgA、IphoneThumbnail_ImageA 的图像。

选项 B - 调整为缩略图大小，设备上的所需大小。

向 iphone/ipad 设备显示服务器图像的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T04:33:14.443

如果您可以在服务器端进行尽可能多的图像处理并向设备提供最佳尺寸的图像（即支持所需用户界面的最小可能图像），您将在设备上获得最佳性能，这不仅可以节省下载时间（尤其是如果用户使用较慢的蜂窝网络），还有宝贵的设备内存和处理时间（如果您将高分辨率图像下载到设备，将它们转换为适当大小的图像或更糟糕的是，不调整大小所需的 CPU 周期和内存量他们并尝试让可怜的ol'`UIImageView`尝试渲染它们）。

简而言之，如果您可以在服务器端进行操作，那就太理想了。如果您在设备上执行此操作，您将受到网络带宽、内存消耗和设备处理时间的影响。

但是，如果原始图像不是太大，您可以通过一些合理的折衷方案摆脱困境，这些折衷方案需要适度的设备端处理。例如，我正在与具有适度大小的图像和有限的现有服务器端图像处理能力的旧版 CMS 系统交互，因此我只是在下载/需要时在设备上懒惰地制作缩略图，但是 (a) 原始图像不是很大；(b) 我无论如何都需要设备上的原始分辨率图像；(c) 我必须做一些聪明的[GCD](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)（或者你可以使用一些其他等效的[并发处理](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)技术）来确保用户界面不会受到太明显的影响，因为应用程序会生成一次性缩略图（然后缓存的缩略图本地以在未来获得最佳性能）。

在这些情况下，您的最终架构将是关于您的图像、服务器功能、应用程序要求的详细信息的函数，但是，如果有任何经验法则，它将尽可能多地在服务器端进行，平衡网络带宽和服务器复杂性问题与设备上的其他需求。

# javascript - 如何构建 TypeScript

> ID：13021274
> 
> 赞同：1
> 
> 时间：2012-10-22T23:10:38.243
> 
> 标签：javascript, typescript

我负责调查是否为我们的产品使用 Type Script，我的主要目标之一是从 Type Script 生成的新脚本应该与旧 JS 具有相同的签名

我们现有的结构是稍微命名空间的，因为我们有一个基本的函数/命名空间，我们应用程序中的其他模块挂在基本命名空间之外。问题是基本命名空间也有挂在它上面的功能

```
CompanyName.doSomething = function() {}

CompanyName.module = { doSomethingElse: function() {} } 
```

所以理想情况下，在 TS 中，id 有一个名为 CompanyName 的模块，然后在该模块中存在其他类，但是我如何处理直接属于该根命名空间的函数，我如何在 TypeScript 中构造它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T23:14:55.310

这是在模块内嵌套函数和类的示例...

```
module CompanyName {
    export function doSomething () {
        return 1;
    }

    export class ModuleName {
        static doSomethingElse() {
            return 2;
        }
    }
}

var a = CompanyName.doSomething();
var b = CompanyName.ModuleName.doSomethingElse();

alert(a + ' ' + b); 
```

# python - gettext 窗口和域的问题

> ID：13021275
> 
> 赞同：0
> 
> 时间：2012-10-22T23:10:49.007
> 
> 标签：python, internationalization, wxpython

我在 Windows 上遇到了 gettext 问题。我正在使用来自 python 的 gettext 模块和名为 gettext_windows 的第三部分模块： [http](http://bazaar.launchpad.net/~bialix/gettext-py-windows/trunk/view/head:/gettext_windows.py) ://bazaar.launchpad.net/~bialix/gettext-py-windows/trunk/view/head:/gettext_windows.py 代码如下：

```
 gettext_windows.setup_env()
    _ = gettext.gettext
    self._appName = "bitbucket"
    self._localeDir = os.getcwd() + "\\data\\locale\\"
    self._languages = ["it_IT", "pl_PL"]
    if gettext_windows.get_language()[0] in self._languages:
        lang = gettext_windows.get_language()[0]
    self._translation = gettext.translation(self._appName, self._localeDir, lang)
    self._translation.install(unicode=True) 
```

使用 PoEdit创建一个*.po/ .mo 文件。*然后我保存这些文件并将它们放入：

```
data
----locale/
--------it_IT/
------------LC_MESSAGES/
----------------bitbucket.mo
----------------bitbucket.po

data
----locale/
--------pl_PL/
------------LC_MESSAGES/
----------------bitbucket.mo
----------------bitbucket.po 
```

当我尝试执行我的应用程序时，出现以下错误：

> 未找到域 bitbucket 的翻译文件

谁能解释我怎么了？

这些文件位于良好的目录中。

如果我尝试使用 gettext 模块中的用户 find() 方法：

```
print gettext.find('bitbucket', self._localeDir, self._languages, all=True) 
```

它可以正常工作并返回 it_IT/pl_PL 语言的 *.mo 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:57:55.787

我建议遵循 wxPython wiki 上的说明：[http ://wiki.wxpython.org/Internationalization#How_to_get_gettext_tools_for_Win32](http://wiki.wxpython.org/Internationalization#How_to_get_gettext_tools_for_Win32)

如果遇到困难，请在 wxPython 邮件列表上寻求帮助。那里有很多人将这种支持写入他们的应用程序。

# python - pjsua：无法导入 pjsua python 模块

> ID：13021277
> 
> 赞同：3
> 
> 时间：2012-10-22T23:11:14.380
> 
> 标签：python, sip, osx-mountain-lion, pjsip

尝试导入 python 模块 pjsua 时出现以下错误。我有 Mac OS 10.8.1 版本。我验证了[http://www.darrensessions.com/?p=292](http://www.darrensessions.com/?p=292)中提供的解决方案，该解决方案似乎已经在 MacOS-10.7 中解决了这个问题。对于 MacOS-10.8，这似乎又被打破了。编译代码时我没有遇到任何错误。仅在导入 PJSUA 模块时出现以下错误。

```
>>> import pjsua
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "pjsua.py", line 59, in <module>
    import _pjsua
ImportError: dlopen(/Library/Python/2.7/site-packages/_pjsua.so, 2): Symbol not found: _AudioOutputUnitStart
  Referenced from: /Library/Python/2.7/site-packages/_pjsua.so
  Expected in: flat namespace
 in /Library/Python/2.7/site-packages/_pjsua.so 
```

非常感谢您的帮助。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:09:03.743

一种直接的解决方案是（纯理论，尚未测试）：

1.  看看[http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2011-November/013722.html](http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2011-November/013722.html)
2.  看，补丁说：

    ```
    # OS X Lion Support
    if platform.mac_ver()[0].startswith("10.7"):
    extra_link_args += ["-framework", "AudioUnit"] 
    ```

3.  换线

    ```
    if platform.mac_ver()[0].startswith("10.7"): 
    ```

    到

    ```
    if platform.mac_ver()[0].startswith("10.7") or platform.mac_ver()[0].startswith("10.8"): 
    ```

4.  重新编译

- 编辑 -

好的，我按照我的建议对其进行了修补，并且：

```
> python ~/a.py 
a
> cat ~/a.py 
import pjsua

test = "a"
print test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T23:23:22.300

如上所示，此错误已在 PJSIP 2.4 python 包中得到修复：

```
# OS X Lion (10.7.x) or above support
    if version[0] == '10' and int(version[1]) >= 7:
        extra_link_args += ["-framework", "AudioUnit"] 
```

有趣的是，我遇到了同样的错误：

```
 macbookproloreto:python admin$ python samples/simplecall.py 
Traceback (most recent call last):
  File "samples/simplecall.py", line 23, in <module>
    import pjsua as pj
  File "/Library/Python/2.7/site-packages/pjsua.py", line 59, in <module>
    import _pjsua
ImportError: dlopen(/Library/Python/2.7/site-packages/_pjsua.so, 2): Symbol not found: _pj_atexit
  Referenced from: /Library/Python/2.7/site-packages/_pjsua.so
  Expected in: flat namespace
 in /Library/Python/2.7/site-packages/_pjsua.so 
```

不明白为什么，因为检查平台版本的 Python setup.py 脚本似乎很好：

```
>>> import platform
>>> version = platform.mac_ver()[0].split(".")
>>> version
['10', '10', '4']
>>> 
```

# android - AndroidManifest 中的条目将应用程序仅限于 ARMv7 设备？

> ID：13021279
> 
> 赞同：3
> 
> 时间：2012-10-22T23:11:36.440
> 
> 标签：android, android-manifest, armv7

是否有可以手动放入我的 AndroidManifest.XML 的设置来限制可以安装应用程序的设备仅限 ARMv7 架构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:15:01.240

当您将应用程序上传到 Google Play 时，如果您使用的是 NDK 并且仅包含 armeabi-v7a 二进制文件，那么具有 ARMv7 架构的设备将可以看到它。

# java - 在 Java 中，如何使用循环迭代数组的各个元素并打印每个元素？

> ID：13021281
> 
> 赞同：-2
> 
> 时间：2012-10-22T23:11:57.500
> 
> 标签：java, arrays, loops, factors

我正在编写一个程序，该程序将显示用户输入生成的数字的因子。我正在尝试使用由循环迭代的数组。main 方法将调用携带数组的方法，并根据用户输入打印其输出。

```
package arrayCalculateFactors;

import java.util.Scanner;

public class ArrayFactors {

    public static void main(String[] args) {
        int num = 0;
        int[] factorOutput = CalculateFactors(num); // Call method containing
                                                    // array.
        System.out.println("The factors of your number are " + factorOutput);
    }

    public static int[] CalculateFactors(int num) {
        Scanner numInitial = new Scanner(System.in);
        System.out.println("Please enter a number.");
        int numInput = numInitial.nextInt();
        int[] Factors;
        Factors = new int[18];
        for (int i = 1; i <= numInput / 2; i++)
            if (numInput % i == 0) {

            }
        return Factors;

    }
} // End class 
```

当我运行这个程序时，它会吐出内存地址，而不是因子（输入 10 将打印 1、2、5、10）。如何修改循环以迭代数组的每个元素？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:31:46.757

您将不得不遍历数组的每个元素并单独打印。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:34:38.583

使用 for 语句打印数组：

```
System.out.println("Your factor outputs are: " + factorOutput[0]);
for (int i = 1; i < factorOutput.length; i++)
    System.out.println(factorOutput[i]); 
```

编辑：这只是一个示例，假设它至少有 1 个项目，它将打印数组。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:36:12.680

> 当我运行这个程序时，它会吐出内存地址......

要将某些内容打印到标准输出，请使用`System.out.print(something)`或`System.out.println(something)`。如果`something`是引用类型，则该方法`print`调用`Object.toString()`. `something`对于大多数引用类型就足够了，但是`toString()`数组类型的方法会打印出数组的内部类型名称及其标识哈希。（它看起来像一个内存地址......但从技术上讲它不是。）

所以，要打印一个数组，你需要遍历元素，一次打印一个，元素之间有一个分隔符。或者使用为您进行格式化的库方法（例如`Arrays.toString()`）。

> 在 Java 中，如何使用循环迭代数组的各个元素并打印每个元素？

正如你所描述的那样。自己写代码。它将帮助您学习。（并且不要忘记数字之间的分隔符！！）

# tsql - 无法绑定多部分标识符“#tmpFullname.Item”。

> ID：13021282
> 
> 赞同：3
> 
> 时间：2012-10-22T23:12:00.287
> 
> 标签：tsql, stored-procedures

下面的代码应该采用一个可能是逗号分隔的字符串，也可能不是逗号分隔的字符串，并将其放入一个表（#tmpFullanme）中，该部分可以完美地工作。第二部分应该根据输入的内容返回所有带有或不带有 % 符号的 LIKE / NOT LIKE 值。我得到的错误是“无法绑定多部分标识符“#tmpFullname.Item”。” 我最好的猜测是它可能超出范围？

```
DROP PROCEDURE uspJudgments; 
GO 
CREATE PROCEDURE uspJudgments 
@fullName varchar(100), @SrchCriteria1 varchar(15), @SrchCriteria2 varchar(15), @qualifier varchar(10) 
AS 
BEGIN 

SELECT * 
INTO #tmpFullname 
FROM dbo.DelimitedSplit8K(@fullName, ',') 

DECLARE @Query NVarChar(1024) 
SET @Query = 'SELECT d.*' + ' FROM defendants_ALL d, #tmpFullname' + 
' WHERE d.combined_name' + ' ' + @qualifier + ' ' + '''' + @SrchCriteria1 + '''' + ' + ' + '''' + #tmpFullname.Item + '''' + ' + ' + '''' + @SrchCriteria2 + '''' 

END 

EXEC sp_executesql @Query 
PRINT(@Query) 

IF OBJECT_ID('#tmpFullname', 'U') IS NOT NULL 
DROP TABLE #tmpFullname 

EXEC uspJudgments @qualifier = 'LIKE', @fullName = 'johnson', @SrchCriteria1 = '%', @SrchCriteria2 = '%' 
```

无法访问 PRINT 输出，因为“无法绑定多部分标识符“#tmpFullname.Item”。” 如果我将 #tmpFullname.Item 更改为 '#tmpFullname.Item 它会通过并且不返回任何内容，但它表明查询是正确的减去该表的问题。

```
SELECT d.* FROM defendants_ALL d, #tmpFullname WHERE d.combined_name LIKE '%' + '#tmpFullname.Item' + '%' 
```

请注意，直到我把它变成一个动态查询，所以我可以将语句从 LIKE 更改为 IN 等它工作得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T23:25:06.213

我设置了一个完整的测试来获得正确的脚本来获得你想要的结果。我还有一个[**SQL Fiddle**](http://sqlfiddle.com/#!3/44ad9/4/0)来展示它是如何工作的。 **注意**您将要`EXECUTE sp_executesql @Query`在存储过程中运行

```
ALTER PROCEDURE uspJudgments @fullName varchar(100)
   , @SrchCriteria1 varchar(15)
   , @SrchCriteria2 varchar(15)
   , @qualifier varchar(10) 
AS 
BEGIN 

   --Simulates your split function
   SELECT *
   INTO #tmpFullName
   FROM
   (
     SELECT 'firstTest' AS Item
     UNION ALL SELECT 'secondTest'
     UNION ALL SELECT 'NotThere'
   ) AS t;

   DECLARE @Query NVARCHAR(1024);
   SELECT @Query = 'SELECT d.* '
      + ' FROM defendants_ALL d '
      + ' CROSS JOIN #tmpFullName AS t '
      + ' WHERE d.combined_name' + ' ' + @qualifier + ' '
      + '''' + @SrchCriteria1 + ''''
      + ' + ' + 't.Item' + ' + ' + '''' + @SrchCriteria2 + '''';

   EXECUTE sp_executesql @Query;

END

EXECUTE uspJudgments
@fullName = 'does not matter'
   , @SrchCriteria1 = '%'
   , @SrchCriteria2 = '%'
   , @qualifier = 'LIKE'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:10:04.020

在这种情况下，您必须使用 tempdb 前缀

```
insert into tempdb..#TABLENAME 
```

和

```
set @query = 'select * from tempdb..#TABLENAME' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T07:08:58.523

好吧，在我上一个回答之后，我发现了几件事。当我查看您的程序时，您从“ `BEGIN`”开始，接下来您插入“ `#tmpFullName`”表，声明“ `@Query`”变量并创建一个 select 语句。

之后你做和“ `END`”之后的逻辑。你做了“ `sp_executesql`”，然后你删除了 temptable，然后你执行了当前过程。

结构不是那么可读，很抱歉告诉你。所以也许你先去那里。除了一个奇怪的结构之外，您`#tmpFullName.Item`在某些动态 SQL 中使用“”作为参数，而它是在 SQL 查询中声明的。所以你必须做这样的事情：

```
SET @Query = 'SELECT d.*' + ' FROM defendants_ALL d, #tmpFullname' + 
  ' WHERE d.combined_name' + ' ' + @qualifier + ' ' + '''' + @SrchCriteria1 + '''' + ' + ' + ' #tmpFullname.Item ' + ' + ' + '''' + @SrchCriteria2 + '''' 
```

“ `#tmpFullName.Item`”驻留在代码中，而不是作为参数。但话又说回来，你想在这里实现什么？要完整地回答这个问题，我们必须知道其他变量是什么。您的结构并没有告诉我要达到的目标..

我实在是想不通了……

# android - callBatchTasks（来自 ORMLite）是否在单独的线程中运行？

> ID：13021285
> 
> 赞同：2
> 
> 时间：2012-10-22T23:12:16.230
> 
> 标签：android, ormlite

我正在使用[ORMLite](http://ormlite.com/)在我的 android 应用程序上管理我的数据库，它运行得很好。但有时，当我尝试更新数据时，我会收到一个包含有关约束的异常。该异常帮助我将其追踪到我调用[callBatchTasks()](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/Dao.html#callBatchTasks%28java.util.concurrent.Callable%29)的位置。

那时实际上是一系列 3 次调用。第一个调用 2 更新 Table1 和 Table2。最后一次调用更新了一个表（Table3），该表用于指定 Table1 和 Table2 之间的关系（因此具有约束）。这是获得异常的那个。

```
table1Dao.callBatchTasks(table1task);
table2Dao.callBatchTasks(table2task);
table3Dao.callBatchTasks(table3task);  // Exception here 
```

由于任务实现`callable`，我认为每个任务都在单独的线程上运行。因此，如果 table3task 领先于其他任何一个，它就会遇到约束问题。这是真的？如果是这样，推荐的解决方法是什么，以便它们按顺序执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T16:51:56.867

听起来你解决了你的问题，但我想我会回答更多信息。

`Dao.callBatchTasks(...)`与线程无关。所有[ORMLite](http://ormlite.com/)类的源代码都可以通过源 jars 或在线获得。查看调用 to[的 BaseDaoImpl.callBatchTasks(...) 的源代码](http://sourceforge.net/p/ormlite/code/HEAD/tree/ormlite-core/trunk/src/main/java/com/j256/ormlite/dao/BaseDaoImpl.java)[`StatementExecutor.callBatchTasks(...)`](http://sourceforge.net/p/ormlite/code/HEAD/tree/ormlite-core/trunk/src/main/java/com/j256/ormlite/stmt/StatementExecutor.java)，它：

1.  关闭自动提交（使用 android 事务）
2.  调用`Callable.call()`作为参数传入的方法`callbatchTasks(...)`
3.  恢复自动提交（关闭android事务）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:33:07.287

没关系，我发现了问题。这是一个线程的事情，但这是我的逻辑。对同一个更新任务的两次调用紧随其后，创建了 2 个线程。一个人会在另一个人已经拥有的时候尝试将东西插入到 table3 中，这会导致错误。

它似乎`callBatchTasks`没有在它自己的线程中运行，因为当我修复该问题时，它解决了错误。

# perl - 增加以 GPS 坐标为界的区域的大小

> ID：13021288
> 
> 赞同：0
> 
> 时间：2012-10-22T23:12:30.100
> 
> 标签：perl, google-maps, gps

我有一个 web 应用程序，可以在其中查询用户附近的结果。由于应用程序的工作方式，用户位于一个由 4 个点组成的正方形中，2 个用于左下角，2 个用于右上角：latsw,latne,longsw,longne。我需要增加“正方形”的大小，同时将用户保持在正方形的中心。我一直在尝试基本的东西，比如：

```
$latsw= $latsw - $increasing_factor;
$latne= $latne + $increasing_factor;
$longsw=$longsw - $increasing_factor;
$longne=$longne + $increasing_factor; 
```

和

```
$latsw= $latsw / $increasing_factor;
$latne= $latne * $increasing_factor;
$longsw=$longsw / $increasing_factor;
$longne=$longne * $increasing_factor; 
```

但结果只是给了我一个转移的区域或其他一些奇怪的行为。我想这是因为 GPS 坐标在 2D 平面上的行为并不真正呈线性。在保持相对简单的同时做这样的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:46:53.483

你可以尝试这样的事情：

你想保持相同的中心经度/纬度，所以首先计算（通过平均你已经拥有的两个经度和两个纬度）：

```
center_long = (ne_long + sw_long)/2
center_lat = (ne_lat + sw_lat)/2 
```

然后通过将两个经度和两个纬度进行差分来计算边界框的大小，得到delta_long，delta_lat。

```
delta_long = ne_long - sw_long
delta_lat = ne_lat - sw_lat 
```

通过乘以某个因子来调整 delta_long 和 delta_lat（例如，1.5 增加 50%）：

```
new_delta_long = delta_long * increasing_factor
new_delta_lat = delta_lat * increasing_factor 
```

最后计算新的边界点：

```
new_corner_long = center_long +/- new_delta_long
new_corner_lat = center_lat +/- new_delta_lat 
```

只要您不太靠近两极、赤道或本初子午线（以避免尴尬的范围/符号问题），或者不使用太大的边界框（以避免与二维平面行为的尴尬偏差），这应该让您大致了解您正在寻找的东西。

# jquery - jQuery 的 $.extend - 从文字创建新对象

> ID：13021291
> 
> 赞同：0
> 
> 时间：2012-10-22T23:12:49.057
> 
> 标签：jquery

我正在尝试将对象数组（都是对象文字）中的每个对象与一个“原型”合并，该“原型”也是一个对象文字：

```
var objArray = [{
    first: 123,
    second: "asd",
    third: function () {
        alert("hello");
    },
    items: {
        color: "brown",
        number: 10
    }
}, {
    first: 765,
    second: "lkj",
    third: function () {
        alert("goodbye");
    },
    items: {
        color: "yellow",
        number: 999
    }
}];

var obj2 = {
    first: 143,
    items: {
        color: "blue",
        number: false
    }
};

var combinedObjArray = [];

var i;
for (i = 0; i < objArray.length; i += 1) {
    var newObj = $.extend(true, obj2, objArray[i]);
    combinedObjArray.push(newObj);
}

alert(JSON.stringify(combinedObjArray));​ 
```

我的问题是“newObj”只是创建一个指针，而不是创建唯一的对象（我认为）：

[http://jsfiddle.net/RbabL/](http://jsfiddle.net/RbabL/)

提前致谢，任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:19:56.140

这条线...

```
var newObj = $.extend(true, obj2, objArray[i]); 
```

...实际上应该写成...

```
var newObj = $.extend(true, {}, obj2, objArray[i]); 
```

`obj2`...否则你会在每次调用它时增加：

> 请记住，目标对象（第一个参数）[*或第二个参数，当`deep`使用*参数时]将被修改，并且也将从 $.extend() 返回。但是，如果我们想保留两个原始对象，我们可以通过传递一个空对象作为目标来实现：

```
var object = $.extend(true, {}, object1, object2); 
```

# javascript - IE9 Alert() 现在阻止 range.select 显示选定的文本

> ID：13021294
> 
> 赞同：1
> 
> 时间：2012-10-22T23:12:58.250
> 
> 标签：javascript, internet-explorer-9, range, alert

我在页面上有一个按钮，按下该按钮时，会搜索表单上的数据，突出显示某个字段，并且 javascript ALERT() 是找到单词的用户。一旦用户确定了 ALERT()，javascript 就会搜索并突出显示下一次出现的单词，并发出警告，并继续此行为，直到找不到更多数据。

在 IE9 之前，下面的代码可以很好地产生这种行为（这是代码的一个非常简单的版本，它演示了问题）。通常（在 IE9 之前）在第一个 ALERT() 暂停时，文本会在屏幕上突出显示，但在 IE9 下则不是。在 IE9 中，直到整个脚本完成后（第二次警报之后），才会突出显示任何内容，此时仅突出显示最后找到的字符串。这可以防止应用程序单步执行并突出显示每个找到的单词并提醒用户。

尝试在 IE9 下运行以下命令，然后在 IE8 及更低版本下运行。在这种情况下，我不需要担心其他浏览器，只需 IE（它是一个受控的浏览器应用程序环境）：

* * *

```
<html>
<head>
</head>
<body>

<form name="MYFORM">
<input type="text" value="NAME/JONES   ADDR/123 MAIN" name="myinput" size="40">
</form>

<script type="text/javascript" language="JavaScript">

   var range = document.MYFORM.myinput.createTextRange();

   var strFound=range.findText("NAME/");
   range.select();
   alert("Message 1");

   var strFound=range.findText("ADDR/");
   range.select();
   alert("Message 2");

</script>

</body> 
```

感谢您对修复代码以在 IE9 下工作的任何见解。

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:04:40.990

您可能需要给 UI 时间来重新绘制 - 通过将代码拆分为可以使用`setTimeout(nextIteration, 0);`.

# web-services - 测试 Web 服务/API 时的 BDD

> ID：13021295
> 
> 赞同：3
> 
> 时间：2012-10-22T23:13:00.897
> 
> 标签：web-services, api, testing, bdd

我仍在尝试完全理解 BDD，但我面临一些疑问。根据我的小经验，我一直在使用它来自动化用户验收测试，我想知道是否可以使用它来测试没有 UI 的 Web API。

过去，我使用 given-when-then 行话来使用 BDD，并将步骤映射到 UI 交互。我已经用 ASP.NET 中的 Specflow 或 ruby​​ on rails 中的 cucumber/capybara 完成了这项工作。例如，我们可以有这样的场景：

```
Given I am in the home page 
When I click login button 
Then I should see the login page 
```

我正在从事的当前项目不同。我们正在实现一个基于 Web 服务的 API，它将被不同类型的客户端使用。就像一个 iphone 应用程序、android 应用程序和一个基于 asp 的 web 客户端。因此，我们的主要重点是基于后端，仅此而已。

在这种情况下，无法从 UI 的角度来面对测试。所以我们的端到端测试基于我们的服务端点。我们将一些输入参数传递给服务调用并检查输出。我们可以使用 BDD 做到这一点吗？这是正确的吗？或者也许使用像FitNesse这样的不同东西会更好？嗯..正在使用 FitNesse 做 BDD？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:54:17.210

我认为您可以在 BDD 中完成您所写的内容。我不确定这两个关于使用 SpecFlow 测试 Web 服务的链接是否会对您有所帮助，但如果您还没有看到，请查看它们。

[http://codedetective.blogspot.co.uk/2012/10/testing-webservices-with-specflow.html](http://codedetective.blogspot.co.uk/2012/10/testing-webservices-with-specflow.html)

[http://www.creamdog.se/blog/2011/02/24/webservices-automated-tests-using-specflow-and-babelfish/](http://www.creamdog.se/blog/2011/02/24/webservices-automated-tests-using-specflow-and-babelfish/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-01T18:44:39.870

看看[空手道](https://github.com/intuit/karate)，[Intuit](https://www.intuit.com/)的 Web 服务测试框架。它最近正在**开源**。它具有处理处理 HTML、JSON、XML、GraphQL 查询的 API 的能力，并且构建在[cucumber](https://cucumber.io/)之上。

简单介绍：[https ://medium.com/blueprint-by-intuit/karate-web-services-testing-made-simple-366e8eb5adc0#.qnpy5gagt](https://medium.com/blueprint-by-intuit/karate-web-services-testing-made-simple-366e8eb5adc0#.qnpy5gagt)

# c++ - 编译时的 C++ 语义错误

> ID：13021296
> 
> 赞同：-4
> 
> 时间：2012-10-22T23:13:06.343
> 
> 标签：c++, eclipse, compiler-errors

我在用 C++ 编程时遇到了麻烦，因为当我在做一个项目时，我得到了一堆不应该存在的语义错误。

当我的一位同事开始一个项目并将其发送给我时，我的电脑出现错误，而她没有。

这以前发生在我身上。我开始为一个项目工作，它出现了类似的错误。然后，在我老师的电脑上，它消失了。

我最近格式化了我的电脑，现在使用的是 Windows 8 64 位。我使用 Eclipse Juno C++ 64 位，但也在 Indigo 上尝试过，但没有成功。我的编译器是 MinGW 9.4。

我想肯定有一些配置问题。大概和大楼有关。

我想要一个不会停用我认为有用的错误的解决方案。

有人可以帮帮我吗？=)

**编辑：**几乎所有出现的错误都是

> 无法解决方法 X。

或者

> 无效参数

**编辑2：**

> 可能您的同事正在使用 Microsoft 编译器，与 gcc 相比，该编译器在允许非法代码方面明显更为宽松，而 gcc 可能是 MinGW 使用的编译器。– 马克 B

我的同事和教授也在使用 Eclipse 和 MinGW。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:18:16.337

首先，它们不被称为语义错误。语义是指您的程序的含义，表明存在逻辑错误。我假设您在谈论编译器错误，通常是指不正确的*语法*。

其次，您可能会在不同的计算机上收到不同的错误和警告，原因有很多。一些编译器和编译器版本在一致性方面比其他编译器更严格。有些有错误。您可能具有其他编译器无法识别的编译器特定扩展。您可能设置了不同的标志，这将影响您收到的错误的数量和类型。（一个极端的例子是 -wall -werror，但即使是在 C++03 与 C++11 中编译之类的东西也会导致许多差异）。

不同计算机的错误的另一个主要原因是图书馆放置。C 和 C++ 编译器/链接器在确保您在正确的位置拥有所有正确的头文件和库并设置正确的路径方面非常困难。

# java - 线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：0

> ID：13021297
> 
> 赞同：-2
> 
> 时间：2012-10-22T23:13:06.963
> 
> 标签：java

我想创建一个小型控制台程序，它可以从摄氏 - 华氏转换，反之亦然，这是我尝试过的代码：

```
import java.util.Scanner;

public class CelsiusFahrenheit {

    private static Scanner s;

    public static void main(String[] args) {

        s = new Scanner(System.in);
        char reponse = 'N', choixConvert;

        do
        {
            do
            {
                System.out.println("Choisie le mode de converstion : ");
                System.out.println("1 - Converstisseur Celesuis - Fahrenheit");
                System.out.println("2 - Converstisseur Fahrenheit - Celesuis");

                do
                {
                    System.out.print("Votre Choix: ");
                    choixConvert = s.next().charAt(0);
                    if(choixConvert != '1' && choixConvert != '2')
                          System.out.println("Mode inconnu, veuillez réitérer votre choix.");
                }
                while(choixConvert!='1' && choixConvert!='2');

                System.out.print("Température à convertir : ");
                double temp = s.nextDouble();
                System.out.print("Resultat est: " + ConvertCelesuisFahrenheit(choixConvert,temp));
                System.out.println("\nSouhaitez-vous convertir une autre température ? (O/N)");
                reponse = Character.toUpperCase(s.nextLine().charAt(0));

            }while(reponse != 'O' && reponse != 'N');
        }while(reponse == 'O');

        System.out.println("Au revoir !");
    }

    private static Double ConvertCelesuisFahrenheit(int choixConvert,double temp )
    {
        if(choixConvert == 1)
            return (9/5)*temp+32;
        else
            return (temp-32)*(5/9);
    }
} 
```

但是我遇到了一个问题，即函数 ConvertCelesuisFahrenheit() 总是返回 0.0 之后它给了我这个错误：

> 线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：CelsiusFahrenheit.main(CelsiusFahrenheit.java:33) 的 java.lang.String.charAt(Unknown Source) 处的 0

这是输出：

```
Choisie le mode de converstion : 
1 - Converstisseur Celesuis - Fahrenheit
2 - Converstisseur Fahrenheit - Celesuis
Votre Choix: 2
Température à convertir : 33
Resultat est: 0.0
Souhaitez-vous convertir une autre température ? (O/N)
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 0
    at java.lang.String.charAt(Unknown Source)
    at CelsiusFahrenheit.main(CelsiusFahrenheit.java:33) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T23:18:23.910

`nextDouble()`在输入流中留下换行符，所以当你然后调用

```
nextLine().charAt(0) 
```

的结果`nextLine()`是一个空字符串。像上面那样从流中删除换行符，或者使用`next()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T23:28:13.273

这里有几个问题..

`nextLine().charAt(0)`获取空字符串，因为 nextDouble() 不使用新行

您可以通过简单地添加一个

```
String continueString = s.next();
response = Character.toUpperCase(continueString.charAt(0)); 
```

此外，您的转换计算中的数学是不正确的。使用`5.0/9.0`而不是`5/9`.

最后，您将`choixConvert`字符读取为 a `char`，然后将其作为 a 传递`int`给您的方法，因此该`else`块将始终执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T23:21:50.887

更新这个`reponse = Character.toUpperCase(s.nextLine().charAt(0));`：

```
 String line = s.nextLine();
          while(line.length() <1){
             line = s.nextLine();
          }
          reponse = Character.toUpperCase(line.charAt(0)); 
```

# ios - iPhone 5 应用程序显示正确，但在“额外”空间中没有感应到触摸

> ID：13021298
> 
> 赞同：0
> 
> 时间：2012-10-22T23:13:09.353
> 
> 标签：ios, uiview, ios6, nib, iphone-5

我通过添加启动图像将我的应用程序“转换”为与 iPhone 5 兼容，`Default-568h@2x.png`并且一切似乎都运行良好。该应用程序是一个简单的导航控制器应用程序，以`UITableView`.

“似乎可以正常工作”是指`UITableView`iPhone 5 上的初始显示正常，正确占据了整个屏幕。但是，视图不响应底部 176 像素中的触摸事件，这正是 iPhone 5 的“新”区域。

在下面带注释的屏幕截图中，红色区域不响应触摸事件。该问题出现在我的应用程序的所有视图上。起初我以为是模拟器的bug，但我在iPhone 5上测试过，问题是一样的。此外，此特定应用程序是唯一存在此问题的应用程序。

我怀疑这与该应用程序是很久以前（大约在 iOS 3.x 时代）首次创建的事实有关，并且在那些旧的 NIB 文件中有一些东西把事情搞砸了。

我已经尝试更改视图大小和自动调整蒙版大小，但没有任何区别，这让我发疯了！

![红色区域不响应触摸事件](../Images/5cf6b6e81fda1ef0af5a57ed0bfa53ce.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:26:50.427

只需在您的`applicationDidFinishLaunching:`方法中添加这一行，它应该可以解决您的问题：

```
window.frame = [[UIScreen mainScreen] bounds]; 
```

或者，您可以在 xib 文件的 Attributes Inspector 下启用窗口的 F​​ull *Screen at Launch复选框。*

# ios - UIView 大小未使用动态 UILabel 更新

> ID：13021308
> 
> 赞同：0
> 
> 时间：2012-10-22T23:14:20.073
> 
> 标签：ios, uilabel

我有一个基于 NIB 和约束的 UIView，其中包含几个 UILabel 子项。每个 UILabel 都有一个行号 0 来设置它是动态的。

在我的特殊情况下，我将此 UIView 用作 UITableView 的标题（**而不是**部分标题）。UIView 正确绘制就好像它扩展以适合 UILabels，但是 UIView 的框架没有更新到它的新大小，因此表格单元格夹在表格标题的底部下方。

随着 UILabel 大小的变化，如何让它正确更新框架？

# wcf - 是否可以在 Windows 8 应用程序中使用 MTOM 编码调用 WCF 服务？

> ID：13021310
> 
> 赞同：1
> 
> 时间：2012-10-22T23:14:30.350
> 
> 标签：wcf, windows-8, basichttpbinding, mtom

我有一个 WCF 服务，其端点使用 basicHttpBinding 并将 messageEncoding 设置为 Mtom。我正在使用具有基本凭据的传输安全性。

```
<binding name="basic" messageEncoding="Mtom">
  <security mode="Transport">
    <transport clientCredentialType="Basic" />
  </security>
</binding> 
```

客户端是一个 Windows 8 应用商店应用程序：

```
BasicHttpBinding binding = new BasicHttpBinding(BasicHttpSecurityMode.Transport);
binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic;

var client = new MyClient(binding, new EndpointAddress("https://..."));
client.ClientCredentials.UserName.UserName = "...";
client.ClientCredentials.UserName.Password = "...";

var x = await client.GetX(); 
```

如果我使用 Mtom 编码，我会在 GetX 调用中得到一个讨厌的 ProtocolException。如果我使用文本编码，它可以工作。

有什么方法可以使服务与 Mtom 编码一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:23:54.280

MTOM 支持不在 .NET Framework for Windows Store 应用程序中包含的 WCF 子集中，因此简单的答案是否定的 - 无法调用它。更完整的答案是理论上仍然可以调用它，但是您需要编写一个自定义编码器来自己处理 MTOM 编码，这不是一件容易的事。

# php - 查询 MySQL 行数

> ID：13021312
> 
> 赞同：0
> 
> 时间：2012-10-22T23:14:44.000
> 
> 标签：php, mysql

试图在最多（如果数据存在于一个或多个）四行中获得名称的计数（稍后乘以一个比率）。换句话说，每人占用一个房间是有价格的。所以，我想通过在表格中输入并保存在数据库表中的名称来计算房间里的人数。

我*可以*简单地添加一个字段，除了填写姓名字段外，用户还可以选择人数，但这似乎是多余的（并且容易出错）。

## 设置

表：1.具有列的*客户：*

```
id, 
tourbk_id, 
tourstart, 
roomtype1, 
client1_name, 
client2_name, 
client3_name, 
client4_name 
```

## 问题

我有一个查询，它当前检查房间类型到该房间类型的每人价格，并正在努力产生结果，但当然，它只返回（对于一个房间里的两个人）双人入住的价格人。

例如：（每人价格）...单人 = 10 美元；双 = 20 美元；三倍 = 30 美元；四边形 = 40 美元

我目前双人房的结果是 20 美元（在“每人价格”旁边回显。我需要一个查询来计算这个双人房的总人数和价格的倍数……“总计：查询 [$20 * 2]”

如何编写查询以计算表中的*“client* _name”条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:25:35.747

在这里，我添加了一个名为的虚拟列`ClientCount`，它是房间中客户的数量。我喜欢使用它，`client1_name > ''`因为无论您使用空格还是 NULL，它都有效，并且可以让我免于提问。

```
SELECT
    id, 
    tourbk_id, 
    tourstart, 
    roomtype1, 
    client1_name, 
    client2_name, 
    client3_name, 
    client4_name,
    CASE WHEN client1_name > '' THEN 1 ELSE 0 end +
    CASE WHEN client2_name > '' THEN 1 ELSE 0 end +
    CASE WHEN client3_name > '' THEN 1 ELSE 0 end +
    CASE WHEN client4_name > '' THEN 1 ELSE 0 end    ClientCount
FROM TBL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:21:39.297

您应该考虑通过使用将*单个*名称列与*单个*预订标识符相关联的单独表来[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的架构：然后，多个客户将由该新表中的多个记录表示。您将计算客户：`client_names`

 **```
SELECT COUNT(*) FROM client_names WHERE booking_id = ... 
```

但是，使用您当前的结构（并假设名称列是`NULL`如果没有这样的客户端），您可以这样做：

```
SELECT (client1_name IS NOT NULL)
     + (client2_name IS NOT NULL)
     + (client3_name IS NOT NULL)
     + (client4_name IS NOT NULL)
    AS client_count
FROM   clients
-- etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:35:39.910

并且，作为一种迂回的方法，我想到了以下方法（只需要为1、2、3 和 4 ["if roomtype1='sgl', then $mult *=* 1，如果 roomtype='dbl'，则 $mult=2...] 乘法器来检查其他房间类型）：

```
$total = ($roomrate['roomprice'] * 2);
     echo "Total this booking : ";
     echo $total; 
```

感谢大家的帮助！**

# hash - 如何搜索哈希表？

> ID：13021318
> 
> 赞同：2
> 
> 时间：2012-10-22T23:14:57.457
> 
> 标签：hash, hashmap, hashtable

我刚刚开始学习哈希表，我了解如何插入但不了解如何搜索。这些是我将根据这个问题提出的算法：

散列密钥

```
int Hash (int key) {
    return key % 10;  //table has a max size of 10
} 
```

用于解决冲突的线性探测。

假设我使用键 1、11 和 21 调用 insert 两次。这将为所有 3 个键返回插槽 1。解决冲突后，表格在插槽 1、2 和 3 处的值将分别为 1、11 和 21。这是我假设根据我对插入的理解会发生的情况。

这样做之后，如果我搜索键 11 和 21，我将如何获得插槽 2 和 3？从我读过的内容来看，搜索哈希表应该做与插入相同的事情，除非当您到达所需的插槽时，您返回该插槽的值而不是向其中插入一些东西。

如果我从字面上理解并应用相同的算法，如果我搜索密钥 11，我将到达插槽 4，因为它将从插槽 1 开始并继续向前探测，直到找到一个空插槽。即使它是我想要的，它也不会停在插槽 2，因为它不是空的。

即使我使用单独的链接，我也在为此苦苦挣扎。所有 3 个键都将存储在插槽 1 中，但使用相同的算法搜索将返回插槽 1，而不是链表中的哪个节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:28:42.993

我通常更喜欢使表中的每个条目成为一个结构，这样我就可以创建一个链表来处理冲突。这显着减少了碰撞。像这样的东西。

```
struct hashtable
{
    int key;
    struct hashtable *pList;
};

struct hashtable ht[10];

void Insert(int key);
{
    index = Hash(key);
    if (!ht[index].key)
    {
        ht[index].key = key;
        ht[idnex].pList = 0;
    } 
    else
    {
        struct hashtable *pht;
        pht = ht[index].pList; 
        while (pht->pList)
            pht = pht->pList;
        pht->pList = new struct hashtable;
        pht->pList->key = key;
        pht->pList->pList = 0;
    }
    return;
} 
```

当然，如果查找函数没有找到第一个条目的键匹配项，则它必须遍历列表。如果性能很关键，您可以对链表使用其他策略，例如对它们进行排序和使用二分搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:30:43.370

每个插槽存储一个键/值对。当您搜索每个插槽时，请检查该键是否等于您正在搜索的键。找到相等的键时停止搜索并返回值。

使用单独的链接，您可以在列表中进行线性搜索，根据列表中的每个键检查键。

# c# - Fellow Oak DICOM - 更改图像窗口级别

> ID：13021320
> 
> 赞同：6
> 
> 时间：2012-10-22T23:15:06.910
> 
> 标签：c#, asp.net, dicom, fo-dicom

我不是经验丰富的程序员，只需要在我的 VS2010 项目中添加一个 DICOM 查看器即可。我可以在 Windows 窗体中显示图像，但不知道如何更改窗口中心和宽度。这是我的脚本：

```
DicomImage image = new DicomImage(_filename);
            int maxV = image.NumberOfFrames;
            sbSlice.Maximum = maxV - 1;
            image.WindowCenter = 7.0;
            double wc = image.WindowCenter;
            double ww = image.WindowWidth;

            Image result = image.RenderImage(0);
            DisplayImage(result); 
```

它不起作用。我不知道这是否是正确的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T15:49:02.693

创建 DicomImage 类的目的不是将其用于实现图像查看器。创建它是为了在 DICOM Dump 实用程序中渲染预览图像并测试图像压缩/解压缩编解码器。也许将它包含在库中是一个错误？

当代码被用于远远超出其预期功能的事情时，我很难在代码中发现错误。

也就是说，我花了一些时间来修改代码，以便将 WindowCenter/WindowWidth 属性应用于渲染的图像。您可以在 Git 存储库中找到这些修改。

```
var img = new DicomImage(fileName);
img.WindowCenter = 2048.0;
img.WindowWidth = 4096.0;
DisplayImage(img.RenderImage(0)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T02:23:15.180

我查看了代码，它看起来非常错误。[https://github.com/rcd/fo-dicom/blob/master/DICOM/Imaging/DicomImage.cs](https://github.com/rcd/fo-dicom/blob/master/DICOM/Imaging/DicomImage.cs)

在当前的错误实现中，设置`WindowCenter`or`WindowWidth`属性无效，除非 Dataset.Get(DicomTag.PhotometricInterpretation) 是`Monochrome1`or `Monochrome2`during `Load()`。这已经很荒谬了，但它仍然不能使用，因为`_renderOptions`变量只设置在一个地方并立即用于`_pipeline`创建（不给你机会使用`WindowCenter`属性来更改它）。您唯一的机会是灰度`_renderOptions`初始化：`_renderOptions = GrayscaleRenderOptions.FromDataset(Dataset);`.

当前的解决方案：您的数据集应该有

*   `DicomTag.WindowCenter`适当设置
*   `DicomTag.WindowWidth != 0.0`
*   `DicomTag.PhotometricInterpretation == Monochrome1`或者`Monochrome2`

以下代码实现了这一点：

```
DicomDataset dataset = DicomFile.Open(fileName).Dataset;
//dataset.Set(DicomTag.WindowWidth, 200.0); //the WindowWidth must be non-zero
dataset.Add(DicomTag.WindowCenter, "100.0");
//dataset.Add(DicomTag.PhotometricInterpretation, "MONOCHROME1"); //ValueRepresentations tag is broken
dataset.Add(new DicomCodeString(DicomTag.PhotometricInterpretation, "MONOCHROME1"));
DicomImage image = new DicomImage(dataset);
image.RenderImage(); 
```

最好的解决方案：等待这个有缺陷的库被修复。

# xcode - xcode 4.5 调试器带我进入标准头文件

> ID：13021325
> 
> 赞同：1
> 
> 时间：2012-10-22T23:15:38.383
> 
> 标签：xcode, debugging

我最近将我的 Mac 更新为 Mountain Lion 和 Xcode 4.5 。我经常做 C/C++ 编程，我喜欢 Xcode。我在 Xcode 4.5 中注意到的是，在调试时它会将我带入头文件，例如在调试时用于字符串和支架函数，例如

```
string tmp;
cin>>tmp;
for(int i=0;i<tmp.length();i++)
{
    //do something with the string
} 
```

现在，如果我在 for 循环中放置一个断点，每次我经过它时，它都会带我进入 C++ 字符串标题并在其中逐行运行代码，然后返回到我的代码。Xcode 4.4 并非如此。反正有没有禁用这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:06:13.070

这已经在[这篇文章](https://stackoverflow.com/questions/12651441/debugger-steps-deeper-when-trying-to-step-out-of-c11-std-lib%20%22another%20Stack%20Overflow%20post.)中得到了回答。简短的回答是 LLDB 似乎还没有跳过内联函数。

# xslt - XSLT 1.0 使用多个具有相同名称的元素进行分组

> ID：13021326
> 
> 赞同：2
> 
> 时间：2012-10-22T23:15:39.493
> 
> 标签：xslt, grouping

我有一个看起来像的 XML -

```
<resultset>
    <hit>
        <content>
            <ITEM>
                <TITLE>Office Cleaning</TITLE>
                <DESCRIPTION>blah blah blah</DESCRIPTION>
                <Hierarchy>level1A:level2A:level3A</Hierarchy>
                <Hierarchy>level1B:level2B:level3B</Hierarchy>
            </ITEM>
        </content>
    </hit>
    <hit>
        <content>
            <ITEM>
                <TITLE>Office Cleaning1</TITLE>
                <DESCRIPTION>blah blah blah</DESCRIPTION>
                <Hierarchy>level1A:level2A:level3A</Hierarchy>
            </ITEM>
        </content>
    </hit>
    <hit>
        <content>
            <ITEM>
                <TITLE>Office Cleaning2</TITLE>
                <DESCRIPTION>blah blah blah</DESCRIPTION>
                <Hierarchy>level1A:level2B:level3C</Hierarchy>
            </ITEM>
        </content>
    </hit>
</resultset> 
```

请注意，有多个层次结构元素，它们是 level1:level2:level3 的串联字符串，我希望将其转换为类似这样的内容-

```
<TREE>
<LEVELS>
<LEVEL1 name="level1A">
 <LEVEL2 name="level2A">
   <LEVEL3 name="level3A">
      <ITEM Name="Office Cleaning"/>
      <ITEM Name="Office Cleaning1"/>
   </LEVEL3>
 </LEVEL2>
</LEVEL1>
<LEVEL1 name="level1B">
 <LEVEL2 name="level2B">
   <LEVEL3 name="level3B">
        <ITEM Name="Office Cleaning"/>
   </LEVEL3>
 </LEVEL2>
</LEVEL1>
<LEVEL1 name="level1A">
 <LEVEL2 name="level2B">
   <LEVEL3 name="level3C">
      <ITEM Name="Office Cleaning2"/>
    </LEVEL3>
 </LEVEL2>
</LEVEL1>
</LEVELS>
</TREE> 
```

基本上每个项目都有多个与之相关的层次结构。我需要将它们组合在一起。

我只到了——

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:autn="http://schemas.autonomy.com/aci/">

<xsl:output method="xml" omit-xml-declaration="yes"/>

<xsl:key name="HIERARCHYLEVELS" match="resultset/hit/content/ITEM" use="HIERARCHY" />
<xsl:template match="/">
<TREE>

    <xsl:for-each select="resultset/hit/content/ITEM[generate-id()=generate-id(key('HIERARCHYLEVELS', HIERARCHY)[1])]">
        <xsl:for-each select="HIERARCHY">
        <xsl:variable name="level" select="HIERARCHY"/>
        <HIERARCHY name="{$level}" >

            <xsl:variable name="name" select="TITLE"/>

            <ITEM name="{$name}"/>

        </HIERARCHY>
        </xsl:for-each>
    </xsl:for-each>

</TREE>
</xsl:template>

</xsl:stylesheet> 
```

但问题是我只得到第一个匹配的层次结构标签。例如，我看不到“办公室清洁1”。我可以做些什么来确保考虑所有层次结构元素？我仍然需要把它分成不同的层次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:00:31.947

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kItemByHier" match="ITEM" use="Hierarchy"/>
 <xsl:key name="kHierByVal" match="Hierarchy" use="."/>

 <xsl:template match="/*">
     <xsl:apply-templates select=
     "*/*/*/Hierarchy[generate-id()=generate-id(key('kHierByVal',.)[1])]"/>
 </xsl:template>

  <xsl:template match="Hierarchy">
    <xsl:call-template name="makeTree">
      <xsl:with-param name="pHier" select="string()"/>
      <xsl:with-param name="pItems" select="key('kItemByHier', .)"/>
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="makeTree">
    <xsl:param name="pHier"/>
    <xsl:param name="pDepth" select="1"/>
    <xsl:param name="pItems" select="/.."/>

    <xsl:choose>
      <xsl:when test="not($pHier)">
        <xsl:for-each select="$pItems">
          <ITEM name="{TITLE}"/>
        </xsl:for-each>
      </xsl:when>
      <xsl:otherwise>
        <xsl:element name="LEVEL{$pDepth}">
          <xsl:attribute name="name">
            <xsl:value-of select="substring-before(concat($pHier,':'), ':')"/>
          </xsl:attribute>

          <xsl:call-template name="makeTree">
            <xsl:with-param name="pHier" 
                            select="substring-after($pHier,':')"/>
            <xsl:with-param name="pDepth" select="$pDepth+1"/>
            <xsl:with-param name="pItems" select="$pItems"/>
          </xsl:call-template>
        </xsl:element>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<resultset>
    <hit>
        <content>
            <ITEM>
                <TITLE>Office Cleaning</TITLE>
                <DESCRIPTION>blah blah blah</DESCRIPTION>
                <Hierarchy>level1A:level2A:level3A</Hierarchy>
                <Hierarchy>level1B:level2B:level3B</Hierarchy>
            </ITEM>
        </content>
    </hit>
    <hit>
        <content>
            <ITEM>
                <TITLE>Office Cleaning1</TITLE>
                <DESCRIPTION>blah blah blah</DESCRIPTION>
                <Hierarchy>level1A:level2A:level3A</Hierarchy>
            </ITEM>
        </content>
    </hit>
    <hit>
        <content>
            <ITEM>
                <TITLE>Office Cleaning2</TITLE>
                <DESCRIPTION>blah blah blah</DESCRIPTION>
                <Hierarchy>level1A:level2B:level3C</Hierarchy>
            </ITEM>
        </content>
    </hit>
</resultset> 
```

**产生想要的正确结果**：

```
<LEVEL1 name="level1A">
   <LEVEL2 name="level2A">
      <LEVEL3 name="level3A">
         <ITEM name="Office Cleaning"/>
         <ITEM name="Office Cleaning1"/>
      </LEVEL3>
   </LEVEL2>
</LEVEL1>
<LEVEL1 name="level1B">
   <LEVEL2 name="level2B">
      <LEVEL3 name="level3B">
         <ITEM name="Office Cleaning"/>
      </LEVEL3>
   </LEVEL2>
</LEVEL1>
<LEVEL1 name="level1A">
   <LEVEL2 name="level2B">
      <LEVEL3 name="level3C">
         <ITEM name="Office Cleaning2"/>
      </LEVEL3>
   </LEVEL2>
</LEVEL1> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:52:10.253

出于兴趣，这里是一个解决方案的草案。从输出中可以看出，它很接近，但并不安静，因为它使用不同的分组规则。我仍在尝试了解所需的分组规则。如果我有更好的理解，我会更新。

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:exsl="http://exslt.org/common"
  exclude-result-prefixes="xsl exsl">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:variable name="phase-1-output">
  <xsl:apply-templates select="/" mode="phase-1" />
</xsl:variable>

<xsl:variable name="phase-2-output">
  <xsl:apply-templates select="exsl:node-set($phase-1-output)" mode="phase-2" />
</xsl:variable>

<xsl:template match="/">
  <xsl:copy-of select="$phase-2-output" />
</xsl:template>

<!--================ Phase 1 ===============================-->    
 <xsl:template match="/" mode="phase-1">
   <t>
     <xsl:apply-templates select="*/*/*/ITEM/Hierarchy" mode="phase-1" />
   </t>
 </xsl:template>

 <xsl:template match="Hierarchy" mode="phase-1">
   <xsl:call-template name="analyze-hierarchy">
     <xsl:with-param name="levels" select="." />
     <xsl:with-param name="item" select="../TITLE" />
   </xsl:call-template>  
 </xsl:template>

<xsl:template name="analyze-hierarchy"><!-- phase-1 -->
  <xsl:param name="levels" />
  <xsl:param name="item" />
  <xsl:variable name="level" select="substring-before(concat($levels,':'),':')" />
  <xsl:variable name="e-level" select="
    translate(
      substring($level,1,string-length($level) - 1),
      'abcdefghijklmnopqrstuvwxyz',
      'ABCDEFGHIJKLMNOPQRSTUVWXYZ')" />
  <xsl:choose>
    <xsl:when test="$level">
      <xsl:element name="{$e-level}">
        <xsl:attribute name="name"><xsl:value-of select="$level" /></xsl:attribute>  
        <xsl:call-template name="analyze-hierarchy">
         <xsl:with-param name="levels" select="substring-after($levels,':')" />
         <xsl:with-param name="item" select="$item" />
        </xsl:call-template>  
      </xsl:element>
    </xsl:when>
    <xsl:otherwise>
      <ITEM Name="{$item}"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>  

<!--================ Phase 2 ===============================-->    
<xsl:key name="kLevel"
   match="*[starts-with(name(),'LEVEL')]"
   use="concat(generate-id(..),'|',@name)" />

 <xsl:template match="/" mode="phase-2">
  <TREE>
    <LEVELS>
      <xsl:variable name="t" select="concat(generate-id(t),'|')" />
      <xsl:apply-templates select="t/LEVEL1[
      generate-id() = generate-id( key('kLevel',concat($t,@name))[1])
      ]" mode="phase-2-head" />
    </LEVELS>  
  </TREE>  
</xsl:template>

<xsl:template match="*[starts-with(name(),'LEVEL')]" mode="phase-2-head">
  <xsl:copy>
    <xsl:copy-of select="@*" />
    <xsl:apply-templates select="key('kLevel',concat(generate-id(..),'|',@name))"  mode="phase-2" />
    <xsl:copy-of select="ITEM" />
   </xsl:copy>
 </xsl:template>   

 <xsl:template match="*[starts-with(name(),'LEVEL')]" mode="phase-2">
      <xsl:variable name="p" select="concat(generate-id(.),'|')" />
      <xsl:apply-templates select="*[starts-with(name(),'LEVEL')][
      generate-id() = generate-id( key('kLevel',concat($p,@name))[1])
      ]" mode="phase-2-head" />
 </xsl:template>   

</xsl:stylesheet> 
```

...带有样本输入会产生这个（不是安静的正确输出）...

```
<TREE>
  <LEVELS>
    <LEVEL1 name="level1A">
      <LEVEL2 name="level2A">
        <LEVEL3 name="level3A">
          <ITEM Name="Office Cleaning" />
        </LEVEL3>
      </LEVEL2>
      <LEVEL2 name="level2A">
        <LEVEL3 name="level3A">
          <ITEM Name="Office Cleaning1" />
        </LEVEL3>
      </LEVEL2>
      <LEVEL2 name="level2B">
        <LEVEL3 name="level3C">
          <ITEM Name="Office Cleaning2" />
        </LEVEL3>
      </LEVEL2>
    </LEVEL1>
    <LEVEL1 name="level1B">
      <LEVEL2 name="level2B">
        <LEVEL3 name="level3B">
          <ITEM Name="Office Cleaning" />
        </LEVEL3>
      </LEVEL2>
    </LEVEL1>
  </LEVELS>
</TREE> 
```

* * *

## 更新

好的，第 2 轮。我复制了 Dimitre 的分组规则，即对 Hierarchy 元素的内容全有或全无。此解决方案为样本输入生成预期输出。请注意，与 Dimitre 的`<xsl:element name="LEVEL{$pDepth}">`方法相比，我从层次结构步骤中派生了 LEVEL1 样式元素名称。我不确定这是否正确。

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:key name="kLevel" match="Hierarchy" use="." />

<xsl:template match="/">
  <TREE>
    <LEVELS>
     <xsl:apply-templates select="*/*/*/ITEM/Hierarchy[
        generate-id() = generate-id( key('kLevel',.)[1])
      ]" mode="group" />
    </LEVELS>
   </TREE>
</xsl:template>

 <xsl:template match="Hierarchy" mode="group">
   <xsl:call-template name="analyze-hierarchy">
     <xsl:with-param name="key" select="." />
     <xsl:with-param name="levels" select="." />
   </xsl:call-template>  
 </xsl:template>

<xsl:template name="analyze-hierarchy">
  <xsl:param name="key" />
  <xsl:param name="levels" />
  <xsl:variable name="level" select="substring-before(concat($levels,':'),':')" />
  <xsl:variable name="e-level" select="
    translate(
      substring($level,1,string-length($level) - 1),
      'abcdefghijklmnopqrstuvwxyz',
      'ABCDEFGHIJKLMNOPQRSTUVWXYZ')" />
  <xsl:choose>
    <xsl:when test="$level">
      <xsl:element name="{$e-level}">
        <xsl:attribute name="name"><xsl:value-of select="$level" /></xsl:attribute>  
        <xsl:call-template name="analyze-hierarchy">
         <xsl:with-param name="key" select="$key" />
         <xsl:with-param name="levels" select="substring-after($levels,':')" />
        </xsl:call-template>  
      </xsl:element>
    </xsl:when>
    <xsl:otherwise>
      <xsl:apply-templates select="key('kLevel',$key)" />
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>  

<xsl:template match="Hierarchy">
  <ITEM Name="{../TITLE}" />
</xsl:template>

</xsl:stylesheet> 
```

# codeigniter - 循环插入语句时，Codeigniter Error Duplicate entry '' for key 'PRIMARY'

> ID：13021328
> 
> 赞同：0
> 
> 时间：2012-10-22T23:15:56.700
> 
> 标签：codeigniter, activerecord, insert, foreach

我在 codeigniter 中设置这个函数作为 cron 作业运行并在 X 时间注销所有用户。在选择一个用户并将该用户注销时，我已成功使用此代码，但是在添加 foreach 时，出现以下错误：

```
Error Number: 1062

Duplicate entry '3858' for key 'PRIMARY'

INSERT INTO `time` (`id`, `projectid`, `phaseid`, `firstname`, `timest`, `status`, `activityid`, `todate`, `remark`, `time`, `workperiod`, `activitydate`, `entrydate`) VALUES ('3858', '212132 Unilever Nigeria Â 10000L Toothpaste Storage Tanks x 2', '1', 'BONGANI', '1347610976', '1', '1', '1', '1', 3335907, 'nothing', '2012-09-14 10:22:56', '2012-10-23 01:01:23')

Filename: C:\xampp\htdocs\projectfiles\protime\v2\system\database\DB_driver.php

Line Number: 330 
```

这是模型的代码：

```
function punch_out() {
    $this -> load -> database();
    $this -> load -> helper('date');
    //get people
    $this -> db -> select('*');
    $this -> db -> from('person');
    $this -> db -> order_by("department", "asc");
    $this -> db -> order_by("userid", "asc");
    $query = $this -> db -> get();
    foreach ($query->result_array() as $row) {
        $people[] = $row;

    }

    foreach ($people as $row) :

    $this -> db -> from('punch');
    $this -> db -> where('firstname', $row['firstname']);
    $this -> db -> order_by("id", "desc");
    $this -> db -> limit(1);
    $query = $this -> db -> get();
    foreach ($query->result_array() as $row) {
        $data = $row;
    }

    $data['workperiod'] = 'nothing';

    $current_time = getdate();

    if ($current_time['wday'] > '0' && $current_time['wday'] < '5') {
        if ($current_time['hours'] > '7' && $current_time['hours'] < '12') {
            $data['workperiod'] = 'stda';
        } else if ($current_time['0'] > strtotime('4:16am') && $current_time < strtotime('11:59pm')) {
            $data['workperiod'] = 'ota';
        }
    } else if ($current_time['wday'] == '5') {
        if ($current_time['0'] > strtotime('7:00am') && $current_time < strtotime('11:59am')) {
            $data['workperiod'] = 'stdb';
        } else if ($current_time['0'] > strtotime('1:01am') && $current_time < strtotime('11:59pm')) {
            $data['workperiod'] = 'otb';
        }
    } else if ($current_time['wday'] == '6') {
        $data['workperiod'] = 'otc';
    } else if ($current_time['wday'] == '0') {
        $data['workperiod'] = 'dtc';
    }

    if ($data['status'] == 1) {
        //MAKE TIME
        $now = time();
        $data['time'] = elapsed_time($data['timest'], $now);
        $data['entrydate'] = timestamp_to_mysqldatetime($now);
        $data['activitydate'] = timestamp_to_mysqldatetime($data['timest']);
        $this -> db -> insert('time', $data);
    }

    endforeach;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:29:59.613

如果您尝试更新您插入的同一 id 的数据（时间、入口日期、活动日期），我认为如果您只将数据放入一个新数组中会更好，例如：

```
if ($data['status'] == 1) {
    //MAKE TIME
    $now = time();
    $newdata['time'] = elapsed_time($data['timest'], $now);
    $newdata['entrydate'] = timestamp_to_mysqldatetime($now);
    $newdata['activitydate'] = timestamp_to_mysqldatetime($data['timest']);
    $this -> db -> where('id',$data['id']);
    $this -> db -> update('time', $newdata);
} 
```

或者，如果您尝试将新记录插入数据库，只需更改您尝试插入的数组名称：

```
if ($data['status'] == 1) {
    //MAKE TIME
    $now = time();
    $newdata['time'] = elapsed_time($data['timest'], $now);
    $newdata['entrydate'] = timestamp_to_mysqldatetime($now);
    $newdata['activitydate'] = timestamp_to_mysqldatetime($data['timest']);
    $this -> db -> insert('time', $newdata);
} 
```

以这种编码方式，这可能会避免将来出现更多错误并可能节省时间。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:23:34.037

如果我没看错的话，`$data`它会包含每个“拳头”的详细信息，包括`$data['id']`那个拳头的唯一 ID。由于您永远不会从 中删除该`$data['id']`字段`$data`，因此当您将条目插入到`time`数据库中时`$data`，您还指定新条目与`id`您从中提取的打孔相同。一旦您尝试运行两次，您将插入两行相同的`id`，并且从您的错误看来，您将表`id`上的`time`字段设置为 PRIMARY - 这意味着它不能有任何重复项。

我认为，如果我正确理解了您的代码和数据结构，则解决方案是`unset($data['id'])`在运行插入之前。

# linux - 在 Linux 中，我正在寻找一种方法让一个进程通过阻塞向另一个进程发出信号

> ID：13021331
> 
> 赞同：1
> 
> 时间：2012-10-22T23:16:22.317
> 
> 标签：linux, events, ipc, blocking

我正在寻找一个简单的事件通知系统：

1.  处理 A 阻塞，直到它得到通知...

2.  进程 B，它触发进程 A。

如果我在 Win32 中这样做，我可能会使用事件对象（'A' 块，当 'B' 执行 SetEvent 时）。我需要一些非常快速和肮脏的东西（更喜欢脚本而不是 C 代码）。你会建议什么样的事情？我想知道文件咨询锁，但它看起来很乱。其中一个进程必须主动打开文件才能持有锁。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T23:31:20.483

又快又脏？

然后使用[fifo](http://linux.die.net/man/7/fifo)。它是一个命名管道。进程A以阻塞模式从fifo的FD中读取。进程 B 在需要时写入它。

确实很简单。

这是 bash 脚本实现：

方案一：

```
#!/bin/bash

mkfifo /tmp/event
while read -n 1 </tmp/event; do 
    echo "got message";
done 
```

方案 B：

```
#!/bin/bash
echo -n "G" >>/tmp/event 
```

首先启动脚本 A，然后在另一个 shell 窗口中重复启动脚本 B。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:51:59.663

又慢又干净？

然后使用（命名）信号量：POSIX 或 SysV（不推荐，但可能更便携）。进程 A 执行 a `sem_wait`(or `sem_timedwait`) 并且进程 B 调用`sem_post`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:34:57.510

除了 fifo 之外，您还可以使用 signal 和 kill 来进行中断并让一个进程休眠，直到它接收到像 SIGUSR1 这样的信号，然后解除阻塞（您可以使用条件变量轻松实现此目的而无需轮询）。

# spring - 如何使用 Camel 2.9 定义自定义 CamelBeanPostProcessor

> ID：13021332
> 
> 赞同：3
> 
> 时间：2012-10-22T23:16:42.347
> 
> 标签：spring, apache-camel

Camel 使用[CamelBeanPostProcessor](http://camel.apache.org/maven/current/camel-spring/apidocs/org/apache/camel/spring/CamelBeanPostProcessor.html)类来支持使用注解将骆驼端点、生产者模板等自动装配到 bean 中。

该类的文档说：

> 如果您在 Spring XML 中使用该元素，则会为您隐式安装和配置这些 bean 后处理器之一。因此，您永远不必显式创建或配置这些实例之一。

但没有提及如何实际提供自定义实现。

我使用Spring和`<camelContext...>`配置camel的方式。我如何提供我自己的 CamelBeanPostProcessor 实现？原因是我想重写该`canPostProcessBean`方法以排除几个 bean 类型，因为后处理它们会给我们带来问题。他们永远不会有任何骆驼的特征，所以这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:58:57.033

我认为解决方案是定义自己的 BeanPostProcessor。正如[javadoc](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html)所述：

> ApplicationContexts 可以在它们的 bean 定义中自动检测 BeanPostProcessor bean，并将它们应用于随后创建的任何 bean。普通 bean 工厂允许后处理器的编程注册，适用于通过该工厂创建的所有 bean。

因此，如果您像这样使用骆驼 xml：

```
<camel:beanPostProcessor/> 
```

只需替换为：

```
<bean id="camel:beanPostProcessor"
        class="org.mael.sample.camel.postprocessor.CustomCamelBeanPostProcessor" /> 
```

这样你就不会使用xml注册的CamelBeanPostProcessor，而是你自己的BeanPostProcessor实现。

但要注意，如果你想扩展 CamelBeanPostProcessor 类，我已经看到了[源代码](http://www.jarvana.com/jarvana/view/org/apache/camel/camel-spring/2.3.0/camel-spring-2.3.0-sources.jar!/org/apache/camel/spring/CamelBeanPostProcessor.java?format=ok)，它使用[org.apache.camel.impl.DefaultCamelBeanPostProcessor](https://svn.apache.org/repos/asf/camel/trunk/components/camel-spring/src/main/java/org/apache/camel/spring/CamelBeanPostProcessor.java)的实例作为委托，扩展后者会导致一些错误，因为抛出的异常与Spring 接口中声明的异常。

最好的选择是在你自己的实现中也使用一个委托，并覆盖你想要的方法，即`canPostProcessBean`

编辑：

这是我做的事情，检查`TODO`评论以应用您的功能，还有[pastebin](http://pastebin.com/XtDiREPQ)：

```
package org.mike.sample.camel.postprocessor;

import java.util.LinkedHashSet;
import java.util.Map;
import java.util.Set;

import javax.xml.bind.annotation.XmlTransient;

import org.apache.camel.CamelContext;
import org.apache.camel.Endpoint;
import org.apache.camel.Service;
import org.apache.camel.core.xml.CamelJMXAgentDefinition;
import org.apache.camel.impl.CamelPostProcessorHelper;
import org.apache.camel.impl.DefaultCamelBeanPostProcessor;
import org.apache.camel.spring.GenericBeansException;
import org.apache.camel.util.ServiceHelper;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.BeanInstantiationException;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.config.BeanPostProcessor;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;

public class CustomCamelBeanPostProcessor implements BeanPostProcessor,
        ApplicationContextAware {

    private static final transient Logger LOG = LoggerFactory
            .getLogger(CustomCamelBeanPostProcessor.class);
    @XmlTransient
    Set<String> prototypeBeans = new LinkedHashSet<String>();
    @XmlTransient
    private CamelContext camelContext;
    @XmlTransient
    private ApplicationContext applicationContext;
    @XmlTransient
    private String camelId;

    // must use a delegate, as we cannot extend DefaultCamelBeanPostProcessor,
    // as this will cause the
    // XSD schema generator to include the DefaultCamelBeanPostProcessor as a
    // type, which we do not want to
    @XmlTransient
    private final DefaultCamelBeanPostProcessor delegate = new DefaultCamelBeanPostProcessor() {
        @Override
        public CamelContext getOrLookupCamelContext() {
            if (camelContext == null) {
                if (camelId != null) {
                    LOG.trace(
                            "Looking up CamelContext by id: {} from Spring ApplicationContext: {}",
                            camelId, applicationContext);
                    camelContext = applicationContext.getBean(camelId,
                            CamelContext.class);
                } else {
                    // lookup by type and grab the single CamelContext if exists
                    LOG.trace(
                            "Looking up CamelContext by type from Spring ApplicationContext: {}",
                            applicationContext);
                    Map<String, CamelContext> contexts = applicationContext
                            .getBeansOfType(CamelContext.class);
                    if (contexts != null && contexts.size() == 1) {
                        camelContext = contexts.values().iterator().next();
                    }
                }
            }
            return camelContext;
        }

        @Override
        public boolean canPostProcessBean(Object bean, String beanName) {
            // the JMXAgent is a bit strange and causes Spring issues if we let
            // it being
            // post processed by this one. It does not need it anyway so we are
            // good to go.
            // We should also avoid to process the null object bean (in Spring
            // 2.5.x)

            // TODO - DO YOUR STUFF HERE STRELOK

            if (bean == null || bean instanceof CamelJMXAgentDefinition) {
                return false;
            }

            return super.canPostProcessBean(bean, beanName);
        }

        @Override
        public CamelPostProcessorHelper getPostProcessorHelper() {
            // lets lazily create the post processor
            if (camelPostProcessorHelper == null) {
                camelPostProcessorHelper = new CamelPostProcessorHelper() {

                    @Override
                    public CamelContext getCamelContext() {
                        // lets lazily lookup the camel context here
                        // as doing this will cause this context to be started
                        // immediately
                        // breaking the lifecycle ordering of different camel
                        // contexts
                        // so we only want to do this on demand
                        return delegate.getOrLookupCamelContext();
                    }

                    @Override
                    protected RuntimeException createProxyInstantiationRuntimeException(
                            Class<?> type, Endpoint endpoint, Exception e) {
                        return new BeanInstantiationException(type,
                                "Could not instantiate proxy of type "
                                        + type.getName() + " on endpoint "
                                        + endpoint, e);
                    }

                    protected boolean isSingleton(Object bean, String beanName) {
                        // no application context has been injected which means
                        // the bean
                        // has not been enlisted in Spring application context
                        if (applicationContext == null || beanName == null) {
                            return super.isSingleton(bean, beanName);
                        } else {
                            return applicationContext.isSingleton(beanName);
                        }
                    }

                    protected void startService(Service service, Object bean,
                            String beanName) throws Exception {
                        if (isSingleton(bean, beanName)) {
                            getCamelContext().addService(service);
                        } else {
                            // only start service and do not add it to
                            // CamelContext
                            ServiceHelper.startService(service);
                            if (prototypeBeans.add(beanName)) {
                                // do not spam the log with WARN so do this only
                                // once per bean name
                                CustomCamelBeanPostProcessor.LOG
                                        .warn("The bean with id ["
                                                + beanName
                                                + "] is prototype scoped and cannot stop the injected service when bean is destroyed: "
                                                + service
                                                + ". You may want to stop the service manually from the bean.");
                            }
                        }
                    }
                };
            }
            return camelPostProcessorHelper;
        }
    };

    public CustomCamelBeanPostProcessor() {
    }

    public Object postProcessBeforeInitialization(Object bean, String beanName)
            throws BeansException {
        try {
            return delegate.postProcessBeforeInitialization(bean, beanName);
        } catch (Exception e) {
            // do not wrap already beans exceptions
            if (e instanceof BeansException) {
                throw (BeansException) e;
            }
            throw new GenericBeansException("Error post processing bean: "
                    + beanName, e);
        }
    }

    public Object postProcessAfterInitialization(Object bean, String beanName)
            throws BeansException {
        try {
            return delegate.postProcessAfterInitialization(bean, beanName);
        } catch (Exception e) {
            // do not wrap already beans exceptions
            if (e instanceof BeansException) {
                throw (BeansException) e;
            }
            throw new GenericBeansException("Error post processing bean: "
                    + beanName, e);
        }
    }

    // Properties
    // -------------------------------------------------------------------------

    public void setApplicationContext(ApplicationContext applicationContext)
            throws BeansException {
        this.applicationContext = applicationContext;
    }

    public CamelContext getCamelContext() {
        return camelContext;
    }

    public void setCamelContext(CamelContext camelContext) {
        this.camelContext = camelContext;
    }

    public String getCamelId() {
        return camelId;
    }

    public void setCamelId(String camelId) {
        this.camelId = camelId;
    }

} 
```

# javascript - 如何确定任何的 viewBox Element from JavaScript?

> ID：13021333
> 
> 赞同：2
> 
> 时间：2012-10-22T23:16:47.190
> 
> 标签：javascript, svg

我想从 JavaScript 函数中确定元素的 viewBox（即 SVGSVGElement）。来电：

```
svgElement.getAttribute("viewBox") 
```

当 viewBox 在元素上显式设置时效果很好。但我不能假设情况总是如此。例如，我希望我的函数适用于所有这些标签：

```
(400, 100) <svg width=400 height=100></svg>
(400, 100) <svg width="400px" height="100px"></svg>
(400, 100) <svg style="width: 400px; height: 100px"></svg>
(100,  25) <svg viewBox="0 0 100 25" style="width: 400px; height: 100px"></svg>
(100,  25) <svg viewBox="0 0 100 25" width=400 height=100></svg> 
```

（括号中的值是函数在每种情况下应返回的值）。我希望能够在所有支持 SVG 的浏览器和所有缩放级别上执行此操作。

这是一个尝试（失败）的 JSFiddle：http: [//jsfiddle.net/w4BTD/1/](http://jsfiddle.net/w4BTD/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-09T09:43:25.700

我知道这个问题相当老了..但我最近开始在跨浏览器上使用 SVG 并遇到了同样的问题。

给定一堆 SVG 文件，有些带有 viewBox，有些没有，每个浏览器在显示它们时的反应都会有所不同。

> 关键部分，也是我在这个网站上找不到的部分是，可以通过使用 DOMParser() 来假设 viewBox。

有了这个，丢失的 viewBox 可以在显示 svg 之前设置。

*这是一个简化的示例，但它可能会帮助其他遇到同样问题的人：*

```
//Parsing a svg-string ('<svg ...></svg>') to an actual element
var tP = new DOMParser().parseFromString(s, 'image/svg+xml');

//Assuming no errors happened, this is going to be the <svg>
tS = document.importNode(tP.documentElement, true);

//Check for a viewBox attribute
var tV = tS.getAttribute('viewBox');

//If it does not exists, it gets set to the actual document dimensions which are provided by the parser
(!tV) && tS.setAttribute('viewBox', [0, 0, tP.documentElement.attributes.width.value, tP.documentElement.attributes.height.value].join(' ')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:48:54.330

视图框用于指定一组给定的图形拉伸以适应特定的容器元素。当您需要该行为时，应设置此属性。

将属性设置为与 svg 元素相同的大小会有点多余（如果您不打算更改它），您可以使代码更小，但这是不必要的，甚至是错误的。

我会检查是否设置了 viewbox 属性，如果没有，请询​​问 svg 的大小，这将是相同的。SVG[规范](http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute)不会帮助你...

# html - 显示实时mysql数据的html5表

> ID：13021334
> 
> 赞同：0
> 
> 时间：2012-10-22T23:16:48.100
> 
> 标签：html

在我的 mysql 数据库中，我有一个表格，显示用户何时登录和注销。我想在 html5 中创建一个表格，它可以实时显示用户是否登录。该表将从 mysql 数据库中获取此数据。

任何人都可以就如何去做这件事提供任何建议吗？请记住，我只是从 html5 开始并一起编程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:44:19.593

您可能想要考虑使用类似[Node.js](http://nodejs.org/)的东西。

您可以使用众多[MySQL 驱动程序](https://github.com/joyent/node/wiki/modules#wiki-db-mysql)之一从 Node.js 与 MySQL 通信。

# php - Codeigniter - 上传时允许的内存大小耗尽

> ID：13021336
> 
> 赞同：1
> 
> 时间：2012-10-22T23:16:57.137
> 
> 标签：php, codeigniter

我注意到有类似的问题，但我已经尝试了建议的解决方案，但无法提出解决方案。

这是我的开发环境：

*   PHP 5.3.10-1ubuntu3.4 与 Suhosin-Patch (cli)
*   服务器版本：Apache/2.2.22 (Ubuntu)
*   Codeigniter_2.1.2

我正在尝试做的是图像上传的基本示例。这是控制器：

```
<?php

class Entry extends CI_Controller {

    function __construct() {
        parent::__construct();
        ini_set('memory_limit', "256M");
    }

    function index() {
        $this->load->view('upload_form');
    }

    function upload() {

        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|png|jpg';
        $config['max_size'] = 2048;
        $config['max_width'] = 1024;
        $config['max_height'] = 768;

        $this->load->library('upload', $config);

        if (! $this->upload()->do_upload('file')) {
            $error = array('error' => $this->upload->display_errors());

            $this->load->view('upload_form', $error);
        }
    }

}

?> 
```

我的视图文件是这样的：

```
<?php
    echo form_open_multipart('entry/upload');
    echo form_upload('file');
    echo form_submit('submit', 'Upload Fille');
?> 
```

在控制器中，您可以看到我尝试将内存限制设置为 256MB，我还尝试了 -1 选项。当我将 memory_limit 设置为 -1 时，计算机发疯了，它冻结了（（：

这是我尝试上传某事时遇到的错误。

```
PHP Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 523800 bytes) in /var/www/giydir/system/core/Common.php on line 358, referer: http://localhost/giydir/entry 
```

错误显示的行对我来说很有趣

```
$_log =& load_class('Log'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:22:22.970

根据您的反馈，您正在达到 128M 的内存限制......您的 256M 脚本内设置似乎没有坚持。尝试直接编辑您的ini文件以增加内存？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T22:21:55.040

对不起，这是我的错误。现在解决了。

线

```
if (! $this->upload()->do_upload('file')) { 
```

应该

```
if (! $this->upload->do_upload('file')) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T10:45:32.270

增加`php.ini`文件中的内存大小。它会解决你的问题。

```
memory_limit = 12M 
```

# php - 记忆策略

> ID：13021340
> 
> 赞同：1
> 
> 时间：2012-10-22T23:17:26.107
> 
> 标签：php, memory-management, file-get-contents, readfile

我有几个问题一直在寻找答案。

1：php内存分配。

如果我有一个 1 兆字节的变量`$img =file_get_contents('imageUrl');`

而我的php内存分配是64兆，100个人同时访问脚本，会不会导致内存分配错误？

2：如何更好地保存来自 url 的图像？我收到内存分配警告...

```
if ($fileName){
    //check to make sure filename is not taken
    if(!file_exists("img/".$fileName.$fileExt)){
            $image = file_get_contents("someURL".$fileName.$fileExt);
        //check to make sure the filesize is not rediculous 8 Megabytes.
        if(strlen($image) < (8 * 1048576)){                     
            if(file_put_contents("img/".$fileName.$fileExt, $image)){
                usleep((0.25 * 1000000)); //rest 1/4 second
                    if(!image_resize("img/".$fileName.$fileExt, 202, 202, 1))die('no rezize');
            //PRETEND THERE ARE CLOSING CURLY BRACES THANKS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:21:44.843

假设您正在谈论[`memory_limit`](http://www.php.net/manual/en/ini.core.php#ini.memory-limit)配置指令，即*每个脚本执行*可以消耗的内存量的限制，因此限制是`64M` *每个用户*同时访问，而不是同时访问*所有用户*`64M`的总数，并且您不会超过它。例如，它的目的是防止一个脚本试图调整需要数百兆内存才能完成的巨型图像的大小，或者防止一个失控的循环累积一个大数据字符串而不终止，而不是限制可能的并发访问。

 *这并不是说您不能用太多的脚本并发来耗尽*服务器的可用内存。*在这种情况下，服务器可能会开始分页，并对性能产生非常负面的影响。但是，它不应该出错并停止响应请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:21:49.560

PHP 的内存分配是每次调用。在许多 PHP 模型（例如 fcgi）中，一个 PHP 进程不知道其他的，所以这是唯一实用的版本。

所以：不，这不会引发分配错误，但会使用 100MB

要限制总内存使用量，您必须同时限制并发和每次调用的使用量。*

# python - 在 Python ObjectListView 中禁用搜索

> ID：13021341
> 
> 赞同：0
> 
> 时间：2012-10-22T23:17:41.317
> 
> 标签：python, wxpython, wxwidgets

我在 wxPython 中使用 ObjectListView 来呈现几百到几千条记录，每条记录都包含一两个字符的文本和一些数字字段。我想禁用 ObjectListView 的键入搜索功能，因为它对我的目的不是很有用，我想将这些键用于其他事情。但是，我无法弄清楚如何禁用所有搜索，而不仅仅是将其转移到另一列。

我想我可以拦截一个按键事件并阻止传播，但是如果有一个“正确”的方法来做到这一点，这似乎有点像黑客攻击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:39:09.453

您是否尝试过设置：

```
self.typingSearchesSortColumn = False 
```

在您的 OLV 实例上？

并通过：

```
isSearchable=False 
```

到您的所有列定义？

默认情况下，两者都设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T04:07:09.830

我在课堂文档中找不到“正确”的方法来执行此操作，并且阻止事件停止了主框架中的加速器和单元格编辑工作。但是，如果你稍微改变一下规则，你可以覆盖而不`_FindByTyping`做任何事情，从而删除所有的搜索代码。

```
def _FindByTyping(self, searchColumn, prefix):
    pass 
```

# file - 在程序的文件部分中带有 Cobol 表的 FD？

> ID：13021344
> 
> 赞同：1
> 
> 时间：2012-10-22T23:17:44.130
> 
> 标签：file, input, cobol

我有一个输入文件，其中包含前 40 个字节中的名称和编号，然后是该名称的四个不同的基金和基金编号。我想知道如何在我的 FILE SECTION 中创建一个 Cobol 表来读取这些数据。我有这个，但显然它大于或小于 80 字节？或者也许我的桌子错了？

```
FD  SALES-FILE                               
RECORDING MODE IS F.                     

01  SALES-RECORD.                            
    05  BROKER-REGION         PIC 9\.         
    05  BROKER-CITY           PIC X(19).     
    05  BROKER-NAME           PIC X(20).     

01  SALES-BROKER-TBL.                        
    05 BROKER-TBL-DATA        OCCURS 4 TIMES.
       10  FUND-NUMBER        PIC 9(2).      
       10  PRICE-FLAG         PIC 9\.         
       10  DEPOSIT-AMT        PIC 9(5)V99\. 
```

SALES-RECORD 有 40 个字节，那么该表每个条目有 10 个字节并且出现 4 次，所以加起来是 80 对吗？有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:12:26.810

尝试以下...

```
01  SALES-RECORD.                            
    05  BROKER-REGION         PIC 9\.         
    05  BROKER-CITY           PIC X(19).     
    05  BROKER-NAME           PIC X(20).                                    
    05 SALES-BROKER-TBL.                        
       10 BROKER-TBL-DATA        OCCURS 4 TIMES.
          15  FUND-NUMBER        PIC 9(2).      
          15  PRICE-FLAG         PIC 9\.         
          15  DEPOSIT-AMT        PIC 9(5)V99\. 
```

如果我理解正确，经纪人和 4 笔资金都出现在同一记录中。因此，您在这里要做的就是将两个记录布局合并到一个记录中。

Broker Region、City 和 Name 需要 40 个字节，然后每个 Broker Table 行需要 10 个字节。其中四个构成了销售代理表并需要另外 40 个字节。加起来，每条记录总共有 80 个字节。

# html - 使用 Outlook 发送的电子邮件中的 ol 和 ul 标记存在问题

> ID：13021345
> 
> 赞同：10
> 
> 时间：2012-10-22T23:17:48.030
> 
> 标签：html, css, email, outlook

所以我正在尝试创建一个将通过 Outlook 发送的 html 电子邮件。问题似乎与 ol 和 ul 分组有关，我不知道如何解决它。当我在点击发送按钮之前在浏览器或 Outlook 中查看 html 时，它看起来像这样：

[http://i.imgur.com/U3z7O.jpg](http://i.imgur.com/U3z7O.jpg)

但是，电子邮件显示为：

[http://i.imgur.com/KbCjF.jpg](http://i.imgur.com/KbCjF.jpg)

我不像列表样式被带走那样关心间距。

额外信息：使用 Outlook 发送，在 gmail webclient 中查看。另外，如果我在Outlook中查看它，它看起来很好。

有人要html。干得好：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
</head>

<body style="margin: 0 auto;">

<table width="640" border="0" cellspacing="0" cellpadding="0" style="border:thin #e7e8e9 solid;">
  <tr>
    <td style="padding: 10px 25px;"><p style="text-align:right; color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 12px;">Problems viewing email? <a href="#" style="color: #0077c0;">View online version</a></p></td>
  </tr>
  <tr>
    <td style="background-color: #0077c0"><a style="border: none; margin: 0; padding: 0" href="#"><img style="border: none; margin: 0; padding: 0;" src="images/top-image.jpg" width="640" height="300" alt="The 2013 Health and Group Benefit Options are Here." border="0" /></a></td>
  </tr> 
  <tr>
    <td style="border-bottom:thin #e7e8e9 solid; padding: 20px 20px;">
        <h1 style="color: #0077c0; font-family:Arial, Helvetica, sans-serif; font-size: 20px; font-weight: normal; line-height: 1.5; margin: 0 0 20px">Annual Enrollment for Your 2013 Benefits Is Open</h1>
        <h2 style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 20px; font-weight: normal; line-height: 1.5; margin: 15px 0 10px; ">Overview</h2>
        <p style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 12px; font-weight: normal; line-height: 1.5; margin: 15px 0 10px;">The Annual Enrollment period for 2013 health and group benefits is open <span style="letter-spacing: 1px; color: #0077c0;">now through Friday, Nov. 16.</span> Log on to <a style="text-decoration: none; color: #0077c0;" href="#">Your Benefits Resources</a> to review your options and enroll. The online tools can help determine the option that best meets your and your family’s needs.</p>
    </td>
  </tr>
  <tr>
    <td style="border-bottom:thin #e7e8e9 solid; padding: 20px 0;">
        <h2 style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 20px; font-weight: normal; line-height: 1.5; margin: 0 0 10px 20px;">Who should enroll</h2>
        <ul style="margin: 0 45px; padding: 0; list-style-type:disc;">
            <li style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 12px; font-weight: normal; line-height: 1.5; margin: 10px 0;">Anyone who wants to change their benefits coverage for 2013.</li>
            <li style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 12px; font-weight: normal; line-height: 1.5; margin: 10px 0;">Anyone who wants to enroll in a Health Care or Dependent Care Flexible Spending Account for 2013.</li>
        </ul>
    </td>
  </tr>
  <tr>
    <td style="border-bottom:thin #e7e8e9 solid; padding: 20px 0;">
        <h2 style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 20px; font-weight: normal; line-height: 1.5; margin: 0 0 10px 20px;">If you don't enroll</h2>
        <ul style="margin: 0 45px; padding: 0; list-style-type:disc;">
            <li style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 12px; font-weight: normal; line-height: 1.5; margin: 10px 0; padding: 0;">Your 2013 benefits enrollment will default to the coverage most similar to your 2012 coverage.</li>
            <li style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 12px; font-weight: normal; line-height: 1.5; margin: 10px 0; padding: 0;">You won’t be signed up for Health Savings Account or Flexible Spending Account deductions. Health Savings Account and Flexible Spending Account elections do not carry over from year to year. </li>
        </ul>
    </td>
  </tr>
  <tr>
    <td></td>
  </tr>
  <tr>
    <td>
        <table width="640" border="0" cellspacing="0" cellpadding="0" style="background-color:#f1f1f2;">
          <tr>
            <td colspan="2" style="padding:20px 20px;"><h2 style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 20px; font-weight: normal; line-height: 1.5; margin:0; padding:0;">How to Enroll</h2></td>
          </tr>
          <tr>
            <td colspan="2">
              <table width="640" border="0" cellspacing="0" cellpadding="0" style="background-color: #0077c0;">
                <tr>
                  <td><img style="margin: 0; padding: 0" src="images/enroll-online.jpg" width="197" height="70" alt="Enroll online" border="0" /></td>
                  <td><a style="border: none; margin: 0; padding: 0" href="#"><img style="margin: 0; padding: 0" src="images/enroll-now-button.jpg" width="108" height="70" alt="Enroll now!" border="0" /></a></td>
                  <td><img style="margin: 0; padding: 0" src="images/enroll-by-phone.jpg" width="335" height="70" alt="Enroll by Phone" border="0" /></td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td style="border-right:thin #e7e8e9 solid; width: 270px;">
                <ol style="margin: 15px 20px 0 40px; padding: 0; width: 260px; list-style-type:decimal;">
                    <li style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 12px; font-weight: normal; line-height: 1.5; margin: 10px 0;">Log on to <a style="text-decoration: none; color: #0077c0;" href="http://resources.hewitt.com/williams">Your Benefits Resources.</a> A log-on ID (your Social Security number) and password are required.</li>
                    <li style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 12px; font-weight: normal; line-height: 1.5; margin: 10px 0;">Use the online tools to compare your medical options to determine the best option for you and your family, and to estimate the amount to contribute to your Health Savings Account and Health Care and/or Dependent Care Flexible Spending Accounts. </li>
                    <li style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 12px; font-weight: normal; line-height: 1.5; margin: 10px 0;">Make your choices online.</li>
                    <li style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 12px; font-weight: normal; line-height: 1.5; margin: 10px 0;">Print your confirmation statement. You will also receive a confirmation of your enrollment at the home address on file. </li>
                </ol>
            </td>
            <td valign="top" style="width:280px; margin: 0 20px 0 20px;"><p style="color: #808285; font-family:Arial, Helvetica, sans-serif; font-size: 12px; padding: 0 20px; font-weight: normal; line-height: 1.5; margin: 15px 0;">Call the Williams Benefits Center (at Hewitt) at <span style="color: #0077c0;">866-</span> or <span style="color: #0077c0;">866-9</span> weekdays from 8am to 5pm CT.</p>  </td>
          </tr>
        </table>
    </td>
  </tr>
  <tr>
    <td style="padding: 10px 20px;"><p style="font-size: 10px; color: #939598; font-family:Arial, Helvetica, sans-serif; font-weight: normal; line-height: 1.5;">©2012 Williams Companies Inc</p></td>
  </tr>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-02-26T21:00:54.147

在电子邮件中制作项目符号列表的最佳方法是用表格模仿它们。[单击此处获取 JSFiddle](http://jsfiddle.net/GHC7m/2/)。

```
<table cellspacing="0" cellpadding="0">
    <tr><td width="20" align="center" valign="top">&bull;</td>
        <td width="200" align="left" valign="top">Text text text text text text</td>
    </tr>
    <tr><td align="center" valign="top">&bull;</td>
        <td align="left" valign="top">Really really really long and wrapping text here text here text here text here text here </td>
    </tr>
</table> 
```

请务必使用 align 和 valign="top" 以使您的项目符号与长的环绕文本的顶部保持齐平。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:10:16.060

在列表前添加`<br />`标签。注意：P、H 和 List 标记不能很好地用于所有电子邮件客户端。为段落结尾/间距使用`<br />`标签。样本：

```
<span style="font-size:14px; font-weight:bold;">Headline</span><br /><br />
my paragraph text here. <br />
<br />
<span... another headline here. 
<br /><br />
<ol>
<li> etc. 
```

创建列表的另一种方法是在表格中制作它们（不是那么容易，但可以保证电子邮件客户端之间的间距正确）。

有关电子邮件客户端可接受的 CSS 规则列表，请参阅活动监视器。 [这里](http://www.campaignmonitor.com/css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-26T18:38:59.083

在某些情况下，Microsoft Outlook 编译器有时会忽略填充和标准 CSS 样式。话虽如此，请尝试为打算通过电子邮件发送的 HTML 代码编写非常简单的代码和内联样式。

为您的列表项尝试以下代码：

```
<tr> 
  <!-- Row container for Intro/ Description -->
  <td align="left" style="font-size: 14px; font-style: normal; font-weight: 100; color: #191919; line-height: 1.8; text-align:justify; padding:0px 20px 0px 20px; font-family: sans-serif;">
    <ul>
      <li><a href="#">Item 1</a></li>
      <li><a href="#">Item 2</a></li>
      <li><a href="#">Item 3</a></li>
    </ul>
  </td>
</tr> 
```

我希望这会有所帮助，

谢谢！

~牛顿

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-18T10:47:07.070

`ul`我通过为和`ol`标签设置一些额外的边距来解决问题：

这是因为 Outlook 为列表设置了一些负边距（我认为），所以你应该为它们设置一些额外的边距：

```
 <!– [if gte mso 9]>
 <style>
     li {text-align:-webkit-match-parent; display:list-item;text-indent: -1em;}
     ul, ol{    margin-left: 40px !important;}
 </style>
 <![endif]–&gt; 
```

# javascript - 对 Django 服务器的跨域 AJAX 请求

> ID：13021347
> 
> 赞同：1
> 
> 时间：2012-10-22T23:18:13.970
> 
> 标签：javascript, django, jquery, cross-domain

我正在尝试使用 jQuery 从 Django 服务器获取数据。

这是我正在使用的代码：[myCode](http://jsfiddle.net/aABA3/)

```
 $(function(){
    function callback(res){
        console.log(res);
    }
    $.ajax({
            url: "http://www.chesno.org/ajax/dispatcher/",
            data: {
                "data": "{'cmd':'get_party_list'}"
            },
            dataType: 'json', 
            success: callback,
            complete: callback,
            crossDomain: true,
            async: false
        });
    })​ 
```

有趣的是，我能够通过浏览器或提琴手（[链接](http://www.chesno.org/ajax/dispatcher/?data=%7B%27cmd%27%3a%27get_party_list%27%7D)）访问数据。请给我一个提示我做错了什么。重要的是我无法访问服务器，我只能与网站的开发人员交流，他们还不知道问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:08:03.523

服务提供商需要使用[跨域资源共享](https://developer.mozilla.org/en-US/docs/HTTP_access_control)，并让它的资源响应一个[`Access-Control-Allow-Origin`](https://developer.mozilla.org/en-US/docs/HTTP_access_control#Access-Control-Allow-Origin)与您的来源匹配的标头。

# ruby-on-rails - 如何根据路径过滤 Rails 结果集？

> ID：13021349
> 
> 赞同：0
> 
> 时间：2012-10-22T23:18:16.000
> 
> 标签：ruby-on-rails, rest

我想创建一个安静的 API，用户可以在其中访问**foo.com/compani/users**，他们将获得该公司所有用户的列表。

我的 routes.rb 文件有：

```
resources :schools do
  resources :users
end 
```

我的模型是：

```
class User < ActiveRecord::Base
 belongs_to :school
end

class School < ActiveRecord::Base
 has_many :users
end 
```

但是，如果我去 /schools/1/users 我得到所有学校的所有用户（1、2、12314 等的相同列表）。据我了解，我应该获得所有 school_id 为“1”的用户的列表。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:23:18.367

如果您正确嵌套了资源，您应该能够执行以下操作：

```
Controller:

def index
   @users = School.find(1).users
end

View:

@users.each do |user|

user.name

end 
```

# c# - 为什么遇到断点后变量的值会发生变化？

> ID：13021350
> 
> 赞同：0
> 
> 时间：2012-10-22T23:18:21.910
> 
> 标签：c#, visual-studio, debugging, visual-studio-2012, conditional-breakpoint

我正在尝试调试大约 30% 的时间失败的单元测试。这似乎是某种时间问题，因为不幸的是，当我在代码中有断点时它永远不会失败。

因此，我在有问题的断言处设置了一个条件断点，该断点会在断言为假时触发。正如预期的那样，我大约有 1/3 的时间到达了断点。但是，当我实际检查表达式的值时，一切看起来都还不错。而且，果然，如果我点击继续，测试成功。

谁能帮我理解为什么会这样？如果另一个线程正在修改该值，当我到达断点时，线程不会停止吗？或者是否有可能发生这样的事情：

1.  检查条件...评估为真
2.  另一个线程修改变量
3.  休息

我真的不是在寻找针对我的问题的具体解决方案（有太多代码可以合理地发布，或者希望任何人都能艰难地完成）。我只是在寻找有关条件断点如何工作的一般输入，以及可能发生这种情况的原因。

注意：我使用的是 Visual Studio 2012（和 .NET 4.0 C#，如果重要的话）。

另请注意：

这是失败的断言：

```
foreach (KeyValuePair<Guid, DateTime> time in state.Times) {
    Assert.IsTrue(time.Value > DateTime.Now.AddYears(2) && time.Value <= DateTime.Now.AddYears(3));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:21:04.910

你碰巧有`get {}`副作用吗？有可能在观察对象的状态时，您已经更改了对象的状态。

例如 ：

```
class A {
    int one = 0;

    int two { 
        get { 
            one = 1; 
            return 2; 
        } 
    }
} 
```

现在，当您断言时`A.one == 1`，它会失败。如果你看它，你会看到`two == 2`和`one == 1`。当您再次点击重试时，断言通过，因为您已经更改`A.one`。

编辑 ：

看到你的代码，`DateTime.Now`每次你调用它都会改变。你不觉得可能是这样吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:41:46.740

我也遇到过这个问题。我有以下情况。我向外部设备发送命令，并启动计时器来监听答案。

如果我没有使用断点，它运行正常，没有错误。但是当我使用断点时，大约 70% 的时间我都会遇到错误。

出了什么问题？使用断点，我停止了我的代码监听。但是设备一直在发送信息；它确实发送了我正在寻找的答案，而我的代码不再听了。

希望这可以帮助 ：）

# algorithm - 迭代相关集合的循环的时间复杂度

> ID：13021352
> 
> 赞同：0
> 
> 时间：2012-10-22T23:18:23.100
> 
> 标签：algorithm, big-o, time-complexity

在这里，我再次提出基本问题:(

如果我有下一个伪代码：

```
iterate over set (A)
    //some *O(1)* operations

iterate over set (B)
    //another *O(1)* operations 
```

据我所知，时间是*O(numberOfElementsInA + numberOfElementsInB)*

但是，如果我知道*B*是*A*的子集并且*numberOfElementsInA*总是大于或等于 *numberOfElementsInB ，我可以通过只写**O(numberOfElementsInA)*来简化时间吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:19:47.173

是的，你是对的。

这是因为`numberOfElementsInA + numberOfElementsInB <= 2 * numberOfElementsInA`, 并且根据[大 O 符号的定义，](http://en.wikipedia.org/wiki/Big_O_notation#Formal_definition)它使得它`O(numberOfElementsInA)`(with `c=2`, and for each `N`)

* * *

**编辑**：确切地说，每个循环都是`O(numberOfElementsInSet_i)`- 因此每个循环都有常数`c_i, N_i`，因此`T(loop_i) <= numberOfElementsInSet_i * c_i`对于每个`numberOfElementsInSet_i > N_i`.
因此：

```
for each numberOfElementsInSet_1 > max{N1,N2}:
T(loop_1) + T(loop_2) <= numberOfElementsInSet_1 * c_1 + numberOfElementsInSet_2 * c_2
<= numberOfElementsInSet_1 * c_1 + numberOfElementsInSet_1 * c_2 //set1 is bigger
<= 2 * numberOfElementsInSet_1 * max{c_1,c_2} 
```

现在我们有一个正式的证明，循环一起也`O(numberOfElementsInSet_1)`与`N = max{N1,N2}`和`c = max{c_1,c_2} * 2`

# sitecore - 从 Sitecore 6.x 升级到 6.6 的路径

> ID：13021355
> 
> 赞同：1
> 
> 时间：2012-10-22T23:18:28.243
> 
> 标签：sitecore

我们目前正在开发的站点使用的是 Sitecore 6.5，我们希望将其升级到 6.6，以便测试该版本中可用的新功能。

通常，Sitecore 会发布描述如何从旧版本升级的详细信息，但我找不到 6.6 版本的任何此类信息。我假设这与该版本仍处于技术预览版的事实有关。

我们可以安装 6.6 CMS 的干净版本并在顶部构建我们网站的代码，但我们希望找到的是包含 6.6 版本中所有新项目的数据库更新脚本和/或 Sitecore 更新包.

在最坏的情况下，我们将不得不序列化整个数据库作为升级的一部分，但由于数据库的庞大规模，我们希望避免这样做。

有没有人遇到任何升级细节，还是我们必须等到 6.6 技术预览版出来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T22:08:36.337

Sitecore 6.6 现已发布，升级信息可在[此处的 SDN 上获得](http://sdn.sitecore.net/SDN5/Products/Sitecore%20V5/Sitecore%20CMS%206/Update/6_6_0_rev_120918.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T06:19:25.653

我可以想到两种可能的解决方案：

*   取空​​的 6.5 数据库并使用一些数据库比较工具将它们与空的 6.6 数据库进行比较。这样您就可以查看 6.6 中的更改并制作自己的数据库更新脚本

*   为您的 6.5 数据库制作一个 Sitecore 包，包括您创建的内容、布局、模板并将其安装在 6.6 环境中。这对我以前的版本有用，所以也可以在这里工作。

# actionscript-3 - 在 AS3 中嵌入资产、位图缓存和位图转换

> ID：13021360
> 
> 赞同：2
> 
> 时间：2012-10-22T23:18:55.360
> 
> 标签：actionscript-3, mobile

我确信这些话题已经被打死了，但是我有一个非常具体的问题，我一直无法找到答案。

我在我的程序中所做的是嵌入几个艺术资产以供使用，扩展它们以支持多个移动平台，然后继续我的方式。

我读过位图缓存是提高移动应用程序性能的好方法。对于嵌入式资产，这仅仅是制作嵌入式资产的单个实例并多次使用它的行为吗？例如：

```
`[Embed(source = "png.png")] private static var img:Class;
private static var data:BitmapData = new img().bitmapData;

private var bmp1:Bitmap = new Bitmap(data);
private var bmp2:Bitmap = new Bitmap(data);` 
```

`我假设在这种情况下，使用“new”关键字创建的所有资产都将引用存储在内存中的图像的单个实例，并在内存中的其他地方创建自己的唯一副本？

接下来，关于类中的`cacheAsBitmap`和`cacheAsBitmapMatrix`参数`Bitmap`，设置这些属性在使用嵌入式资产时会起到什么作用吗？

最后，在 AS3 中缩放位图时，使用类的`scaleX`和`scaleY`属性更有效`Bitmap`，还是`BitmapData`使用缩放矩阵重新绘制更好？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:33:42.627

是的，您从嵌入文件中提取的 BitmapData 只有一个实例。这可以节省内存，但确实意味着更改 BitmapData 将影响引用它的所有位图 - 但如果您不想编辑 BitmapData 本身，或者如果您希望它更新它们，这不是问题.

使用关键字创建的每个 Bitmap`new`都将是内存中的唯一对象，但它们都将引用相同的 BitmapData ( `data`) 作为其内容 - 将 BitmapData 视为像素数据的核心描述，将 Bitmap 视为允许该数据的包装器画在舞台上。您在代码中创建的每个位图都引用相同的 BitmapData，如果您想为位图提供数据的唯一副本，请实例化它：

```
var uniqueBitmap:Bitmap = new Bitmap(data.clone()); 
```

...如果您想稍后访问它，可以通过 Bitmap 实例进行：

```
uniqueBitmap.bitmapData; 
```

但是，这会在内存中创建另一个 BitmapData 对象，因此只有在您确实需要单独操作它时才这样做。

至于第二部分，如果缩放是为了纯粹的视觉效果（例如在游戏中）并且足够频繁，我个人会使用包装位图的 scaleX 和 scaleY - 使用矩阵不会调整您的 BitmapData 的大小，它会创建它的缩放副本，因此使用此方法进行常见转换可能并不理想，因为您每次都在创建新的 BitmapData 实例，尤其是在您针对移动设备时。这真的取决于你的目的 - 我可以问你想要做什么吗？`

# java - Java 正则表达式点子字符串以特定字符开头，后跟一些数字

> ID：13021362
> 
> 赞同：-1
> 
> 时间：2012-10-22T23:19:02.940
> 
> 标签：java, regex

我正在尝试找到像“ABCxxxxx”（x 是数字，例如我们有 5 个 x）这样的正则表达式模式来发现另一个字符串中的任何类似子字符串。

使用上述正则表达式

```
ABC12345 or
ABC09090 or
ABC 54321 etc. 
```

都是匹配的。

谁能帮我解决这个问题？

谢谢，

它仍然不起作用！这就是我根据您的回复尝试过的：我的文字是

```
Fwd: Fwd: kam rran 2323242 ojdwohejf ABC12345 dewfwe 
```

代码是：

```
String regex = "ABC\\s*\\d{5}";

java.util.regex.Pattern pattern = java.util.regex.Pattern.compile(
                 regex, 
                 java.util.regex.Pattern.CASE_INSENSITIVE
);

Matcher m = pattern.matcher(subject);

if (m.find()) {
   this.setThat(m.group());
} 
```

但它没有通过 if 条件！！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:26:31.270

你可以试试这个正则表达式：

```
ABC\s*\d{5} 
```

*   `ABC` => 匹配字母 ABC 的序列
*   `\s*` => 匹配一个或多个空白字符
*   `\d{5}`=> 匹配 5 位数字

注意：不要忘记在代码中使用“\”转义“\”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T23:26:45.790

For`ABC`后跟任意位数：

```
Pattern pat = Pattern.compile("ABC\\s*\\d+"); 
```

或特别是 5 位数字：

```
Pattern pat = Pattern.compile("ABC\\s*\\d{5}"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T23:27:20.053

这个正则表达式`"ABC[0-9]{5}"`应该有帮助。它将匹配前缀为“ABC”，后跟任何数字。

您可能希望在`"ABC[0-9]+"`之后使用任意数量的数字`ABC`。

# jquery - 用jquery循环遍历div

> ID：13021366
> 
> 赞同：1
> 
> 时间：2012-10-22T23:19:43.453
> 
> 标签：jquery, html, jquery-slider

我正在尝试制作一个 jQuery 滑块，但使用 div 的：

```
<div id="block-1">
        <div id="bannerleft">
            <div class="wsite-header-1"></div>
        </div>
        <div id="bannerright">
            <h2><span class='wsite-text'>CALL US NOW!</span></h2>
            <p><span class='wsite-text'>Call now and get&nbsp;professional service delivered to you by our team of professional plumbers and technicians.<br/><br/>24/7 Emergency Service available</span></p>
            <div style="text-align:left;"><div style="height: 0px; overflow: hidden;"></div>
<a class="wsite-button wsite-button-large wsite-button-highlight" href="contact-us" >
<span class="wsite-button-inner">CALL NOW 1</span>
</a>
<div style="height: 0px; overflow: hidden;"></div></div>
        </div>
        </div>

<div id="block-2" style="display:none;">
        <div id="bannerleft">
            <div class="wsite-header2"></div>
        </div>
        <div id="bannerright">
            <h2><span class='wsite-text'>CALL US NOW! 2</span></h2>
            <p><span class='wsite-text'>Call now and get&nbsp;professional service delivered to you by our team of professional plumbers and technicians.<br/><br/>24/7 Emergency Service available</span></p>
            <div style="text-align:left;"><div style="height: 0px; overflow: hidden;"></div>
<a class="wsite-button wsite-button-large wsite-button-highlight" href="contact-us" >
<span class="wsite-button-inner">CALL NOW 2</span>
</a>
<div style="height: 0px; overflow: hidden;"></div></div>
        </div>
        </div> 
```

这是jQuery部分

```
$(document).ready(function() {

     function animate(){
         $('#block-1').toggle().delay(3000);    
         $('#block-2').toggle().delay(3000); 
         $('#block-3').toggle().delay(3000);         
     } animate();  
     setInterval(animate, 10000);  

}); 
```

可悲的是它不起作用。它会立即转到第 2 块，当它显示第 1 块时，它也会在其下方显示第 3 块。有什么办法可以修复此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:27:59.637

如果您希望它们一个接一个地显示，您可以像这样链接它们：

```
function animate(){
     $('#block-1').toggle(3000, function() {
            $('#block-2').toggle(3000, function() {
                $('#block-3').toggle(3000);
            });
     });     
 } animate();  
 setInterval(animate, 10000); 
```

查看工作[**演示**](http://jsfiddle.net/gnel/Gq8Wk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:41:08.867

在这里，我创建了一个可以很好地淡化你的元素的演示。只需`.fade`为所有主要 DIV 添加一个类，并添加一个 CSS`position:absolute;`以使它们正确重叠。

## *[jsBin 演示](http://jsbin.com/aqukek/2/edit)*

这也将允许您在悬停时暂停幻灯片！

```
var S = 0,             // START 'SLIDE'
    $el = $(".fade"),  // FADE ELEMENTS
    Tim;               // TIMEOUT VAR

function anim(){
  $el.eq(S=++S%$el.length).fadeTo(500,1).siblings($el).stop(1).fadeTo(500,0);
}

function autoAnim(){
    Tim = setTimeout(function(){
      anim();
      autoAnim();
    },4000);
}
autoAnim();

$el.on('mouseenter mouseleave',function(e){
   var m = e.type==='mouseenter' ? clearTimeout( Tim ) : autoAnim();    
}).eq(S).show().siblings($el).hide(); 
```

HTML：

```
<div id="block-1" class="fade"></div>
<div id="block-2" class="fade"></div>
<div id="block-3" class="fade"></div> 
```

CSS：

```
.fade{
  position:absolute;
} 
```

代码是从我的一个插件里借来的，有兴趣可以[看看](http://roxon.in/scripts/fademe_jquery_plugin/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T00:04:04.293

好吧，我将只使用我拥有多年的工作 Mootools 代码

# cakephp - 烘焙视图 (index.ctp) 中的删除链接将我带到 view.ctp 而不是实际删除

> ID：13021371
> 
> 赞同：1
> 
> 时间：2012-10-22T23:20:10.380
> 
> 标签：cakephp, hyperlink, cakephp-2.0

我在 CakePHP 2.0.0 中有一个烘焙应用程序，并且在视图中烘焙 index.ctp (posts/) 中的链接正在发送我查看（posts/view/id 并且只有在那里我可以删除 Post），而不是实际上删除元素并闪烁消息“已删除”。这是为什么？

这是我在 View/Posts/index.ctp 中的烘焙链接：

```
$this->Form->postLink(__('Delete'), array('action' => 'delete', $post['Post']['id']), null, __('Are you sure you want to delete %s?', $post['Post']['id'])); 
```

这是 Controller/PostsController.php 中的烘焙函数删除：

```
 public function delete($id = null) {
    if (!$this->request->is('post')) {
        throw new MethodNotAllowedException();
    }
    $this->Post->id = $id;
    if (!$this->Post->exists()) {
        throw new NotFoundException(__('Invalid post'));
    }
    if ($this->Post->delete()) {
        $this->Session->setFlash(__('Post deleted'));
        $this->redirect(array('action'=>'index'));
    }
    $this->Session->setFlash(__('Post was not deleted'));
    $this->redirect(array('action' => 'index'));
} 
```

我必须有一天，我刚刚在 CakePHP 2.2.3 中测试了相同的代码，它按预期工作：它删除了元素并闪烁消息“删除后”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:10:51.613

我认为您应该传递将在 delete() 中删除的元素的 id，而不是单独指定元素的 id 来删除该元素

# ironpython - 在托管公司使用 IronPython

> ID：13021375
> 
> 赞同：0
> 
> 时间：2012-10-22T23:20:35.013
> 
> 标签：ironpython, web-hosting, shared-hosting

有没有人有在共享托管环境中运行 IronPython 的经验？我正在使用一家托管公司，但他们不支持它。这是一个混合了 ASP.NET MVC 4 和 IronPython 的项目。

如果一切都失败了，我会在某个地方做一个虚拟机，但我想我试一试可以节省几块钱。#lazystackoverflow

谢谢，-罗布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:03:21.950

IronPython 应该在共享托管环境中工作。我假设他们有某种部分信任设置而不是完全信任环境；如果它是完全信任的，则没有问题。如果不是，它应该仍然可以工作，但它还没有经过严格的测试。您必须将它与您的项目一起部署（在 bin 目录中），但除此之外，它应该可以正常工作。

您可以使用 NuGet 将 is 添加到您的项目（“IronPython”），或在安装的 Platforms/Net40 目录或 zip 文件中找到必要的文件。

# php - 使用 PHP 解析 XML - SimpleXML

> ID：13021379
> 
> 赞同：1
> 
> 时间：2012-10-22T23:21:02.917
> 
> 标签：php, xml-parsing

我有一个用 PHP SimpleXML 解析的 XML。我的 XML 文件的某些部分是这样的：

```
<deviceStatusPolling interval="60">
    <r:datapoint programmaticName="t_val_sys_pct_mssDbPartitionUsage" /> 
</deviceStatusPolling> 
```

当我解析它时，这就是我得到的：

```
Parsing 'deviceStatusPolling'...
    Has 1 attribute(s):
    - interval: 60 
```

它不解析孩子：

```
 <r: datapoint programmaticName="t_val_sys_pct_mssDbPartitionUsage" /> 
```

这是解析函数：

```
function parse_recursive(SimpleXMLElement $element, $level = 0) {
$indent = str_repeat("\t", $level); // determine how much we'll indent

$value = trim((string) $element);  // get the value and trim any whitespace from the start and end
$attributes = $element->attributes();   // get all attributes
$children = $element->children();     // get all children

echo "{$indent}Parsing '{$element->getName()}'...<br>";
if(count($children) == 0 && !empty($value)) // only show value if there is any and if there aren't any children
{
    echo "{$indent}Value: {$element}<br>";
}

// only show attributes if there are any
if(count($attributes) > 0)
{
    echo $indent.'Has '.count($attributes).' attribute(s):<br>';
    foreach($attributes as $attribute)
    {
        echo "{$indent}- {$attribute->getName()}: {$attribute}<br>";
    }
}

// only show children if there are any
if(count($children))
{
    echo $indent.'Has '.count($children).' child(ren):<br>';
    foreach($children as $child)
    {
        parse_recursive($child, $level+1); // recursion :)
    }
}

echo $indent; // just to make it "cleaner"
echo "<br>";
} 
```

这是 SimpleXML 的限制吗？还是我做错了什么？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:27:59.163

你的问题不是很清楚，但可能需要这样的东西：

```
$xmlDoc = new SimpleXMLElement($docStr);
$allNamespaces = $xmlDoc->getNamespaces(true);
foreach ($allNamespaces as $nspace => $nurl) {
      $xmlDoc->registerXPathNamespace($nspace, $nurl);
} 
```

阅读 SimpleXML 和命名空间。

这几乎可以肯定是解决您的问题的方法。见这里： http: [//blog.sherifmansour.com/ ?p=302](http://blog.sherifmansour.com/?p=302)

# c++ - .c 文件中的 std::string

> ID：13021381
> 
> 赞同：2
> 
> 时间：2012-10-22T23:21:09.257
> 
> 标签：c++, c, std

我见过`std::string`用在一个`.c`文件中。std 是一个 c++ 命名空间，命名空间是在 c++ 中引入的。为什么呢？它不应该抛出错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T23:23:02.657

是的，如果它被编译为 C 代码，它会导致许多编译器错误。如果它被编译为 C++，那么它会编译得很好。例如，GCC`-x`可以选择编译为的语言，因此您可以根据需要将 a 编译`.c`为 C++ `-x c++`。同样，Microsoft Visual C++ 编译器具有分别选择源语言 C 和 C++`/Tc`的选项。`/Tp`

我建议您修复您的构建系统，以便它不会将`-x c++`or`/Tp`标志传递给不以典型 C++ 源文件扩展名（`.cc`、`.cpp`、`.cxx`、`c++`和结尾的文件`.C`，尽管最后三个非常罕见）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:23:43.820

文件的扩展名只是为了帮助您作为读者。只要您使用 c++ 编译器，编译器就不会在意。

# javascript - 如何将新的谷歌地图标记居中

> ID：13021392
> 
> 赞同：1
> 
> 时间：2012-10-22T23:22:56.423
> 
> 标签：javascript, google-maps

我有这个功能，可以将新标记添加到谷歌地图。

但是中心不起作用。有什么建议吗？

```
function addMarker(lat, lng, name){
    new google.maps.Marker({
        map: map,
        icon: image,
        position: new google.maps.LatLng(lat, lng),
        title: name,
        center: new google.maps.LatLng(lat, lng),
        zoom: 6
    });
} 
```

但`center`不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T23:30:34.630

当您通过 Google Maps API 创建新的标记对象时，您可以调用地图对象的`setCenter`函数，并传入标记的位置：

```
map.setCenter(marker.position); 
```

这应该使地图以标记为中心。

如果要为该过程设置动画，请`panTo`改用：

```
map.panTo(marker.position); 
```

还应注意，您尝试在构造函数中为 Marker 对象设置的`center`和`zoom`属性不存在。这些是地图对象本身的属性，需要在那里设置。

我想象这样的事情：

```
function addMarker(lat, lng, name)
{ 
    var newMarker = new google.maps.Marker({ map: map, 
                                             icon: image, 
                                             position: new google.maps.LatLng(lat, lng), 
                                             title: name });
    map.setCenter(newMarker.position);
    map.setZoom(6);
} 
```

我还考虑将`map`and添加`image`到参数列表中，`addMarker`而不是使用“全局”范围的对象，或者我完全放弃使用函数。这有点挑剔，取决于您的代码的需要。

[更多信息在这里](https://developers.google.com/maps/documentation/javascript/reference#Map)

# macos - Github for mac 下载雪豹

> ID：13021398
> 
> 赞同：5
> 
> 时间：2012-10-22T23:23:27.277
> 
> 标签：macos, github

谁能给我指出一个可以与 Snow leopord 一起使用的以前版本的 Github mac 的下载链接的方向？最新版本已放弃对它的支持：http: [//mac.github.com/](http://mac.github.com/)

我一直在寻找，但我找不到任何东西。或者，我将研究 Tower，但与 Gits Free 选项相比，它的价格为 40 英镑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T21:54:19.840

mac.github.com 上的下载链接是[https://central.github.com/mac/latest](https://central.github.com/mac/latest)。

要查看重定向是什么，我使用 curl -D ，它为[https://github-central.s3.amazonaws.com/mac%2FGitHub%20for%20Mac%2076.zip提供 302](https://github-central.s3.amazonaws.com/mac%2FGitHub%20for%20Mac%2076.zip)

将我得到的版本号回溯到 2056，这是 Snow Leopard 的最后一个版本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-14T01:02:18.447

您可以在此链接中下载该应用程序[http://davidramos.poreexpertos.es/2012/10/github-para-snow-leopard/](http://davidramos.porexpertos.es/2012/10/github-para-snow-leopard/)

但是我无法使用我的帐户登录所以让我们看看你是否幸运谢谢

# python - 将 lambda 函数作为变量传递给 timeit 中的另一个函数

> ID：13021399
> 
> 赞同：2
> 
> 时间：2012-10-22T23:23:31.050
> 
> 标签：python, lambda, arguments, timeit

我有一个名为的 Python 函数`func`，我正在尝试使用`timeit`.

`func`接受一个参数，`f`，这也是一个函数。在我正在编写的程序中，它是一个 lambda 函数，但它也可以是一个定期定义的函数。重要的是这个函数的源代码不可用`func`，所有可用的只是对它的引用。

我正在尝试做的事情：

```
def testTimingOfFunc(f):
    time = timeit.timeit("package.func(f)", "from src import package") 
```

我收到一个错误，指出`f`未定义。

其他一切工作正常。当我打电话时：

```
testTimingOfFunc('lambda x:x**2') 
```

并将函数更改为：

```
def testTimingOfFunc(f):
    time = timeit.timeit("package.func(" + str(f) + ")",
                         "from src import package") 
```

一切正常，所以我知道有关该`timeit`功能的一切都很好。

但这不是`testTimingOfFunc`工作原理。传入的是函数引用，而不是字符串。

关于如何将我`f`作为参数传递给`func`in的任何想法`timeit`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T23:33:15.037

timeit 可以使用 python 可调用值调用：只需将您的方法更改为：

```
from src import package
import functools

def testTimingOfFunc(f):
    time = timeit.timeit(functools.partial(package.func, f)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T00:11:08.250

您可以将对 的引用存储`f`在`package`. 请注意，您没有名称冲突

```
def testTimingOfFunc(f):
    from src import package
    package.f = f
    time = timeit.timeit("package.func(package.f)", "from src import package") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:34:47.920

`timeit.Timer`接受无参数函数作为其参数之一：

```
def tester(f):
    from src import package
    def wrapper():
        package.func(f)
    return wrapper

def foo(x):
    return x * 2

print(timeit.timeit(tester(foo))) 
```

# r - 带有 data.table 的滞后面板数据

> ID：13021401
> 
> 赞同：4
> 
> 时间：2012-10-22T23:23:35.263
> 
> 标签：r, time-series, data.table

`data.table`我目前使用以下方式滞后面板数据：

```
require(data.table)
x <- data.table(id=1:10, t=rep(1:10, each=10), v=1:100)
setkey(x, id, t) #so that things are in increasing order
x[,lag_v:=c(NA, v[1:(length(v)-1)]),by=id] 
```

我想知道是否有更好的方法来做到这一点？我在网上找到了一些关于交叉连接的东西，这是有道理的。但是，交叉连接会`data.table`为大型数据集生成相当大的数据，因此我对使用它犹豫不决。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T00:10:23.597

我不确定这与您的方法有什么不同，但是您可以使用`x`由`id`

```
x[J(1:10), lag_v := c(NA,head(v, -1)) ] 
```

我没有测试这是否比 快`by`，特别是如果它已经被键入。

`t`或者，使用（不要使用函数作为变量名！）是时间 id的事实

```
x <- data.table(id=1:10, t=rep(1:10, each=10), v=1:100)
setkey(x, t)
replacing <- J(setdiff(x[, unique(t)],1))
x[replacing, lag_v := x[replacing, v][,v]] 
```

但同样，在这里使用双重连接似乎效率低下

# c# - 接口中缺少 async 关键字是否会破坏 C#5.0 中的 DI？

> ID：13021402
> 
> 赞同：6
> 
> 时间：2012-10-22T23:23:38.070
> 
> 标签：c#

我很高兴能用 C#5.0 创建我的第一个应用程序，我想使用 async/await 关键字来减轻异步数据调用的痛苦。

我有点困惑，接口不允许 async 关键字成为合同的一部分，因为 await 关键字仅适用于 async 标记的方法。这意味着不可能通过接口引用调用异步方法。这也适用于抽象方法。我在这里错过了什么吗？这意味着我的常规 DI-stuff 将不再起作用：

```
IAsyncRepository<T> {
 Task<IList<T>> GetAsync(); // no 'async' allowed
}

abstract class AsyncRepositoryBase<T> {
 public abstract Task<IList<T>> GetAsync(); // no 'async' allowed 
```

// 客户端代码：

```
IAsyncRepository<Model> repo = ioc.Resolve<IAsyncRepository<Model>>();
var items = await repo.GetAsync(); // DOOOOOH, will not compile! 
```

这是我目前的解决方案：

```
public abstract class AsyncRepositoryBase<T>
{
    protected Task<IList<T>> _fetcherTask;

    protected AsyncRepositoryBase(Task<IList<T>> fetcherTask)
    {
        _fetcherTask = fetcherTask;
    }

    public virtual async Task<IList<T>> GetASync()
    {
        return await _fetcherTask;
    }
} 
```

我必须在抽象和语言功能之间做出选择吗？请告诉我我错过了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T23:58:52.133

> await 关键字仅适用于异步标记的方法

有你的问题。虽然`await`必须*在*方法内部`async`，但它可以等待任何任务，无论是否通过*实现*`async`。

例如：

```
interface IFoo {
    Task BarAsync();
}

class Foo : IFoo {
    public async Task BarAsync() {
        // Implemented via async/await in this case.
        // You could also have implemented it without async/await.
    }
}

// ...

async void Test() {
    IFoo foo = ... ;
    await foo.BarAsync(); // Works no matter how BarAsync is implemented.
} 
```

至于您的语法错误：`await repo.GetAsync(); // DOOOOOH, will not compile!`-您是否忘记将包含这段代码的方法标记为`async`（您不必将其标记`IAsyncRepository.GetAsync`为`async`）？

# php - Echo Wordpress Post 标题中的特色图片 URL

> ID：13021406
> 
> 赞同：0
> 
> 时间：2012-10-22T23:23:53.643
> 
> 标签：php, image, wordpress, url, header

我想将帖子的特色图片 URL 添加到标题中。当 Facebook 用户共享 Wordpress 页面时，标题中的代码如下：

```
<link rel="image_src" href="FEATUREDIMAGEURL"> 
```

将返回共享的特定图像。但是，我不知道如何添加帖子的特色图片的 URL……你可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:42:22.530

像这样的东西应该有效，不是吗？

```
<?php if (has_post_thumbnail( $post->ID ) ): ?>
<?php $image = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID )); ?>
<link rel="image_src" href="<?php echo $image[0]; ?>">
<?php endif; ?> 
```

# clojure - 在 Clojurescript 中使用 -?>？

> ID：13021411
> 
> 赞同：4
> 
> 时间：2012-10-22T23:24:28.960
> 
> 标签：clojure, clojurescript

在我的 Clojure 共享源中，我有以下内容（我无耻地偷了）：

```
(defmacro hey-str [name]
  `(str "hey " ~name))

{:author "Laurent Petit (and others)"
  :doc "Functions/macros variants of the ones that can be found in clojure.core 
            (note to other contrib members: feel free to add to this lib)"}

(defmacro- defnilsafe [docstring non-safe-name nil-safe-name]
  `(defmacro ~nil-safe-name ~docstring
     {:arglists '([~'x ~'form] [~'x ~'form ~'& ~'forms])}
       ([x# form#]
         `(let [~'i# ~x#] (when-not (nil? ~'i#) (~'~non-safe-name ~'i# ~form#))))
     ([x# form# & more#]
         `(~'~nil-safe-name (~'~nil-safe-name ~x# ~form#) ~@more#))))

(defnilsafe 
  "Same as clojure.core/-> but returns nil as soon as the threaded value is nil itself (thus short-circuiting any pending computation).
   Examples :
   (-?> \"foo\" .toUpperCase (.substring 1)) returns \"OO\"
   (-?> nil .toUpperCase (.substring 1)) returns nil
   "
  -> -?>)

(defnilsafe 
  "Same as clojure.core/.. but returns nil as soon as the threaded value is nil itself (thus short-circuiting any pending computation).
   Examples :
   (.?. \"foo\" .toUpperCase (.substring 1)) returns \"OO\"
   (.?. nil .toUpperCase (.substring 1)) returns nil
   "
   .. .?.)

(defnilsafe
  "Same as clojure.core/->> but returns nil as soon as the threaded value is nil itself (thus short-circuiting any pending computation).
   Examples :
   (-?>> (range 5) (map inc)) returns (1 2 3 4 5)
   (-?>> [] seq (map inc)) returns nil
   "
  ->> -?>>) 
```

在我的 Clojurescript 代码中，我有以下内容（I :require-macros as c）

```
(def a nil)
(def b [])
(def c [{:a 23}])

(js/alert (c/hey-str "Stephen")) ;; should display "hey Stephen"
(js/alert (c/-?> a first :a)) ;; should display nil
(js/alert (c/-?> b first :a)) ;; should display nil
(js/alert (c/-?> c first :a)) ;; should display 23 
```

不幸的是，当我编译时，我得到：

```
WARNING: Use of undeclared Var webstack.client/-?> at line 56 cljs-src/webstack/client.cljs
WARNING: Use of undeclared Var webstack.client/-?> at line 57 cljs-src/webstack/client.cljs
WARNING: Use of undeclared Var webstack.client/-?> at line 58 cljs-src/webstack/client.cljs 
```

当我在浏览器中打开 javascript 时，出现“嘿斯蒂芬”警报对话框，但是在“嘿斯蒂芬”上按“确定”后立即出现普遍存在的“未捕获类型错误：无法调用未定义的方法‘调用’”错误警报。果然，查看生成的 javascript 代码，我的 js/alert 变成了：

```
alert([cljs.core.str("hey "), cljs.core.str("Stephen")].join(""));
alert(webstack.client.__QMARK__GT_.call(null, webstack.client.__QMARK__GT_.call(null, webstack.client.a, cljs.core.first), "\ufdd0'a"));
alert(webstack.client.__QMARK__GT_.call(null, webstack.client.__QMARK__GT_.call(null, webstack.client.b, cljs.core.first), "\ufdd0'a"));
alert(webstack.client.__QMARK__GT_.call(null, webstack.client.__QMARK__GT_.call(null, webstack.client.c, cljs.core.first), "\ufdd0'a")) 
```

很明显，我可以使用宏，但是 -?> （和相关）宏的编写方式导致它们无法编译。为了使用这些`-?>` `.?.`和 `-?>>' 宏，我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:07:59.580

-?> 使用 clojure 1.5.1 和 cljsbuild 0.3.0 对我有用，但前提是我使用 :use-macros 而不是 :require-macros。当我使用 :require-macros clojurescript 尝试将宏解析为本地命名空间中的 var 时，这是不正确的。我认为您在 clojurescript 中发现了一个错误，为什么不报告呢？

```
(ns test.test
  ;(:use-macros [test.nilsafe :only [hey-str -?>]]) ;uncomment and everything works!
  (:require-macros [test.nilsafe :as tn]))

(def a nil)
(def b [])
(def c [{:a 23}])

(.log js/console (tn/hey-str "Stephen")) ;; should display "hey Stephen"
(.log js/console (tn/-?> a first :a)) ;; should display nil
(.log js/console (tn/-?> b first :a)) ;; should display nil
(.log js/console (tn/-?> c first :a)) 
```

让我确定这是一个错误的事情是取消注释 :use-macros 将导致文件正确编译，即使我没有从变量中删除 tn/ 范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T14:01:56.137

马`->`可很简单。

```
(defmacro ->
  "Threads the expr through the forms. Inserts x as the
  second item in the first form, making a list of it if it is not a
  list already. If there are more forms, inserts the first form as the
  second item in second form, etc."
  {:added "1.0"}
  [x & forms]
  (loop [x x, forms forms]
    (if forms
      (let [form (first forms)
            threaded (if (seq? form)
                       (with-meta `(~(first form) ~x ~@(next form)) (meta form))
                       (list form x))]
        (recur threaded (next forms)))
      x))) 
```

写一个 nil 安全的应该很简单（下面的例子没有经过测试），但是你明白了这个概念。

```
(defmacro -?>
  [x & forms]
  (loop [x x, forms forms]
    (if (and forms (some? x)) ; check nil to exit eariler
      (let [form (first forms)
            threaded (if (seq? form)
                       (with-meta `(~(first form) ~x ~@(next form)) (meta form))
                       (list form x))]
        (recur threaded (next forms)))
      x))) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T16:32:59.793

可能是创建函数而不是宏中的另一个宏可以帮助您解决此问题：

```
(defmacro defnilsafe [docstring non-safe-name nil-safe-name]
  `(defn ~nil-safe-name ~docstring
     ([x# form#]
         (let [i# x#] (when-not (nil? i#) (~non-safe-name i# form#))))
     ([x# form# & more#]
         (apply ~nil-safe-name (~nil-safe-name x# form#) more#)))) 
```

# objective-c - 从 iOS 的边缘拖动时，如何模拟 Android OS 中的边缘发光动画？

> ID：13021415
> 
> 赞同：2
> 
> 时间：2012-10-22T23:24:53.600
> 
> 标签：objective-c, ios, animation, uigesturerecognizer

所以情况是我有一个 UIScrollView ，其中嵌入了 UITextField 和 UITextView 。我将 UITextField 放在顶部，并将 UITextView 设置为框架作为 contentSize 的高度。我有一个 UIPanGestureRecognizer 设置来检测从某个起点内右边缘的滑动，一旦你将它拖到足够远的距离，它就会激活一个动作。

我希望边缘像下图一样发光。从右边缘到强度增加，我越接近预设距离。我在绘画和动画方面还不是很擅长，所以我在想一个 CALayer？我只是无法形成正确的方法。我也一直在再次阅读所有文档，但仍然有 [code]writers 阻塞。 ![在此处输入图像描述](../Images/b546d9a8dd6fe6b18156497c5256ce00.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:00:39.800

您可以添加一个不透明度低的蓝色视图以使其半透明，并对该视图应用蒙版以仅查看椭圆。

您正在查看以下内容：

```
UIView* yourView = [[UIView alloc] init];
yourView.backgroundColor = [UIColor blueColor];
yourView.opacity = .3; // for e.g put you can set different opacity value of course
[yourView layer].mask = maskEllipse; // where maskEllipse is a white view with an ellipse shape 
```

似乎有一个不透明的蓝色视图在第一个视图的顶部逐渐消失。对于第二个视图，您可以采用相同的方法，但只需要在侧面应用蒙版。

# c - C中内存上的局部变量存储

> ID：13021421
> 
> 赞同：1
> 
> 时间：2012-10-22T23:25:35.717
> 
> 标签：c, memory, stack, stack-overflow

这些天我在阅读一篇关于堆栈溢出的文档，发现一句话让我很困惑。

> 顺便说一下，压入堆栈的项目只能放在字边界，这意味着地址必须是字长的倍数。因此，如果程序包含一个仅使用一个字节的局部变量，那么仍然会使用一个完整的字来存储该变量！

这是否意味着存储在 32 位机器堆栈上的短 int（2 字节）局部变量将浪费 2 个字节，因为系统将分配一个完整的字来存储？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:27:16.510

是的，就是这个意思。这取决于系统实现和寻址实现，但字对齐很常见。

# php - 我怎么做才能拥有

> ID：13021422
> 
> 赞同：-5
> 
> 时间：2012-10-22T23:25:41.703
> 
> 标签：php

我该如何做到这一点，以便我可以在我的 php 代码中使用逗号 / 和刹车来进行回复。当我尝试添加它时，我得到我的回复无法添加或我们出错，当我按 Enter 中断到下一行时，它只是产生了一个空格。这是我的代码：

```
 <?php 

    if($_SESSION['signed_in'])  
    { echo '
    <div style="clear: both;">&nbsp;</div>

    <div class="header">
        <h3>Post Reply</h3>
    </div>
    <div class="container_oro2">

    <div class="cpadding">
    <input type="button" class="bbbutton light" title="[color=][/color]" value="Color"  />
    <input type="button" class="bbbutton light" title="[size=11px][/size]" value="Size" />
    <input type="button" class="bbbutton light" title="[b][/b]" value="Bold" />
    <input type="button" class="bbbutton light" title="[i][/i]" value="Italic" />
    <input type="button" class="bbbutton light" title="[u][/u]" value="Underline" />
    <input type="button" class="bbbutton light" title="[img][/img]" value="Image" />
    <input type="button" class="bbbutton light" title="[url=http://][/url]" value="URL" />
    <input type="button" class="bbbutton light" title="[center][/center]" value="Center" />
    <input type="button" class="bbbutton light" title="[quote=][/quote]" value="Quote" />
    <input type="button" class="bbbutton light" title="[spoiler][/spoiler]" value="Spoiler" />
    <input type="button" class="bbbutton light" title="[youtube]http://www.youtube.com/watch?v=[/youtube]" value="YouTube Video" />
    </div>

    <br/>   <form action="" method="post">
        <div class="center">
            <textarea id="form" name="reply-content" cols="70" rows="8"> </textarea>
            <br/><input type="submit" name="add_submit" value="Submit Post" />       </div>
    </form>

 </div>';
     }  
     else  
     {  
                echo '<div style="clear: both;">&nbsp;</div>

        <div class="header">
        <h3>Post Reply</h3>
    </div>
    <div class="container_oro2">

    <div class="center"><B>You must <a href="/index.php?area=login">Login</a> or <a  href="/index.php?area=register">create an account</a> to 

    post.</B></div>

    </div>

                ';  
    } 
    if($_SERVER['REQUEST_METHOD'] != 'POST')
    {

    echo '';
    }
    else
    {

    if(!$_SESSION['signed_in'])
    {
        echo 'You must be signed in to post a reply.';
    }
    else
    {

        $sql = "INSERT INTO 
                    posts(post_content,
                          post_date,
                          post_topic,
                          post_by) 
                VALUES ('" . $_POST['reply-content'] . "',
                        NOW(),
                        " . mysql_real_escape_string($_GET['id']) .  ",
                        " . $_SESSION['user_id'] . ")";

        $result = mysql_query($sql);

        if(!$result)
        {
            echo 'Your reply has not been saved, please try again later.';
        }
        else
        { $Max_id = $rows['reply']+1;$id=($_GET['id']);
    header( 'Location: /index.php?area=topic&id=' . htmlentities($_GET['id']) . '' ) ;
            echo 'Your reply has been saved, check out <a href="">the topic</a>.';
    $sql2 = "UPDATE $topics SET reply='$Max_id' WHERE id='$id'"; $result2=mysql_query($sql2);}
    }
    } 
     ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:31:09.360

我不确定您要做什么，但我不会使用 PHP 来回显所有 HTML - 而是使用封闭标签：

```
<?php if($_SESSION['signed_in']) { ?>

HTML

<? } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:39:20.223

您可能不想在同一个文件中使用所有这些代码。但是，在回答您的问题时，您可以删除 echo 语句并只使用 HTML 块。例如：

```
<?php if($_SESSION['signed_in']){ ?>
    <div style="clear: both;">&nbsp;</div>
    <div class="header">
        <h3>Post Reply</h3>
    </div>
    <div class="container_oro2">
        <div class="cpadding">
            <input type="button" class="bbbutton light" title="[color=][/color]" value="Color"  />
            <input type="button" class="bbbutton light" title="[size=11px][/size]" value="Size" />
            <input type="button" class="bbbutton light" title="[b][/b]" value="Bold" />
            <input type="button" class="bbbutton light" title="[i][/i]" value="Italic" />
            <input type="button" class="bbbutton light" title="[u][/u]" value="Underline" />
            <input type="button" class="bbbutton light" title="[img][/img]" value="Image" />
            <input type="button" class="bbbutton light" title="[url=http://][/url]" value="URL" />
            <input type="button" class="bbbutton light" title="[center][/center]" value="Center" />
            <input type="button" class="bbbutton light" title="[quote=][/quote]" value="Quote" />
            <input type="button" class="bbbutton light" title="[spoiler][/spoiler]" value="Spoiler" />
            <input type="button" class="bbbutton light" title="[youtube]http://www.youtube.com/watch?v=[/youtube]" value="YouTube Video" />
        </div>

        <br/>
        <form action="" method="post">
            <div class="center">
                <textarea id="form" name="reply-content" cols="70" rows="8"> </textarea>
                <br/><input type="submit" name="add_submit" value="Submit Post" />
            </div>
        </form>
    </div>
<?php } else { ?>
    <div style="clear: both;">&nbsp;</div>
    <div class="header">
        <h3>Post Reply</h3>
    </div>
    <div class="container_oro2">
        <div class="center"><B>You must <a href="/index.php?area=login">Login</a> or <a  href="/index.php?area=register">create an account</a> to post.</B></div>
    </div>
<?php } 

if($_SERVER['REQUEST_METHOD'] != 'POST') { ?>

<?php } else {
    if(!$_SESSION['signed_in']){
        echo 'You must be signed in to post a reply.';
    }else{
        $sql = "INSERT INTO 
                    posts(post_content,
                          post_date,
                          post_topic,
                          post_by) 
                VALUES ('{$_POST['reply-content']}',
                        NOW(),
                        " . mysql_real_escape_string($_GET['id']) . ",
                        '{$_SESSION['user_id']}')";

        $result = mysql_query($sql);

        if(!$result) {
            echo 'Your reply has not been saved, please try again later.';
        } else {
            $Max_id = $rows['reply']+1;$id=($_GET['id']);

            echo 'Your reply has been saved, check out <a href="">the topic</a>.';
            $sql2 = "UPDATE $topics SET reply='$Max_id' WHERE id='$id'"; $result2=mysql_query($sql2);}
            header('Location: /index.php?area=topic&id=' . htmlentities($_GET['id'])) ;
        }
    } 
?> 
```

# java - 由 Maven shade 插件构建的无效或损坏的 JAR 文件

> ID：13021423
> 
> 赞同：34
> 
> 时间：2012-10-22T23:25:43.573
> 
> 标签：java, maven, jfreechart, maven-shade-plugin

将 Maven jFree 依赖项添加到我现有的应用程序后，我无法执行创建的 jar。

我得到的唯一错误消息如下：

```
java -jar target/com.company.product-1.0.0-SNAPSHOT.jar 
Error: Invalid or corrupt jarfile target/com. company.product-1.0.0-SNAPSHOT.jar 
```

完整的`pom.xml`样子是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion
<groupId>com.mycompany</groupId>
<artifactId>com.mycompany.test</artifactId>
<name>${project.artifactId}</name>
<version>1.0.0-SNAPSHOT</version>

<properties>
    <java-version>1.7</java-version>
    <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
    <org.springframework.data-version>1.0.3.RELEASE</org.springframework.data-version>
    <org.springframework.ws-version>2.0.4.RELEASE</org.springframework.ws-version>
    <org.springframework.ws.oxm-version>1.5.10</org.springframework.ws.oxm-version>
    <org.aspectj-version>1.6.12</org.aspectj-version>
    <org.slf4j-version>1.5.10</org.slf4j-version>
    <selenium-java-version>2.25.0</selenium-java-version>
    <browser-mob-version>2.0-beta-6</browser-mob-version>
</properties>

<dependencies>

    <!-- Hint A: If we delete this dependency it works -->
    <dependency>
        <groupId>org.jfree</groupId>
        <artifactId>jfreechart</artifactId>
        <version>1.0.14</version>
                    <exclusions>
            <exclusion>
                <artifactId>itext</artifactId>
                <groupId>com.lowagie</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>itextpdf</artifactId>
        <version>5.3.2</version>
    </dependency>

    <dependency>
        <groupId>de.schlichtherle.io</groupId>
        <artifactId>truezip</artifactId>
        <version>6.6</version>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>apache-log4j-extras</artifactId>
        <version>1.1</version>
    </dependency>

    <!-- Caching with ehcache -->
    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache</artifactId>
        <version>2.5.2</version>
        <type>pom</type>
    </dependency>

    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.0.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.0.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.0.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework-version}</version>
        <scope>test</scope>
    </dependency>
    <!-- Hibernate -->
    <dependency>
        <groupId>org.hibernate.java-persistence</groupId>
        <artifactId>jpa-api</artifactId>
        <version>2.0-cr-1</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.5.1-Final</version>
    </dependency>

    <!-- Database Connectors (HSQL should be removed later) -->
    <dependency>
        <groupId>hsqldb</groupId>
        <artifactId>hsqldb</artifactId>
        <version>1.8.0.7</version>
    </dependency>

    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.16</version>
    </dependency>

    <!-- AspectJ -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${org.aspectj-version}</version>
    </dependency>

    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>

    <!-- @Inject -->
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- Spring Data JPA dependencies -->
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-jpa</artifactId>
        <version>${org.springframework.data-version}</version>
    </dependency>
    <dependency>
        <groupId>javax.ws.rs</groupId>
        <artifactId>jsr311-api</artifactId>
        <version>1.1.1</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-oxm</artifactId>
        <version>${org.springframework.ws.oxm-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-xml</artifactId>
        <version>${org.springframework.ws-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.ws</groupId>
        <artifactId>spring-ws-core</artifactId>
        <version>${org.springframework.ws-version}</version>
    </dependency>
    <dependency>
        <groupId>javax.xml</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.1</version>
    </dependency>
    <dependency>
        <groupId>javax.xml</groupId>
        <artifactId>jaxb-api</artifactId>
        <version>2.1</version>
    </dependency>

    <!-- Test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.9.0</version>
        <scope>test</scope>
    </dependency>

    <!-- Common Utils -->
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency>

    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>

    <dependency>
        <groupId>commons-cli</groupId>
        <artifactId>commons-cli</artifactId>
        <version>1.2</version>
    </dependency>       

    <!-- Selenium -->
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>${selenium-java-version}</version>
    </dependency>

    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-firefox-driver</artifactId>
        <version>${selenium-java-version}</version>
    </dependency>

    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-chrome-driver</artifactId>
        <version>${selenium-java-version}</version>
    </dependency>

    <!-- CSV Lib for Keyword Checker -->
    <dependency>
        <groupId>net.sf.opencsv</groupId>
        <artifactId>opencsv</artifactId>
        <version>2.0</version>
    </dependency>

    <!-- Google Places API -->
    <dependency>
        <groupId>com.google.api-client</groupId>
        <artifactId>google-api-client</artifactId>
        <version>1.10.3-beta</version>
        <exclusions>
            <exclusion>
                <artifactId>jackson-core-asl</artifactId>
                <groupId>org.codehaus.jackson</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>com.google.api-client</groupId>
        <artifactId>google-api-client-appengine</artifactId>
        <version>1.10.3-beta</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.9</version>
    </dependency>

    <!-- Google Geocode -->
    <dependency>
        <groupId>com.google.code.geocoder-java</groupId>
        <artifactId>geocoder-java</artifactId>
        <version>0.9</version>
    </dependency>

    <dependency>
        <groupId>com.googlecode.json-simple</groupId>
        <artifactId>json-simple</artifactId>
        <version>1.1</version>
    </dependency>

    <dependency>
        <groupId>com.googlecode.json-simple</groupId>
        <artifactId>json-simple</artifactId>
        <version>1.1</version>
    </dependency>

    <dependency>
        <groupId>net.sf.jgrapht</groupId>
        <artifactId>jgrapht</artifactId>
        <version>0.8.3</version>
    </dependency>

    <dependency>
        <groupId>jgraph</groupId>
        <artifactId>jgraph</artifactId>
        <version>5.13.0.0</version>
    </dependency>

    <!-- Apache Http Client -->
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.2.1</version>
    </dependency>

    <!-- Amazon web services client -->
    <dependency>
        <groupId>com.amazonaws</groupId>
        <artifactId>aws-java-sdk</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <artifactId>jackson-core-asl</artifactId>
                <groupId>org.codehaus.jackson</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <!-- Docx4j - reading excel files  -->
    <dependency>
        <groupId>org.docx4j</groupId>
        <artifactId>docx4j</artifactId>
        <version>2.8.0</version>
    </dependency>

    <!-- Browser Mob Proxy -->

    <dependency>
        <groupId>biz.neustar</groupId>
        <artifactId>browsermob-proxy</artifactId>
        <version>${browser-mob-version}</version>
        <exclusions>
            <exclusion>
                <groupId>org.seleniumhq.selenium</groupId>
                <artifactId>selenium-api</artifactId>
            </exclusion>
            <exclusion>
                <artifactId>icu4j</artifactId>
                <groupId>com.ibm.icu</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jackson-mapper-asl</artifactId>
                <groupId>org.codehaus.jackson</groupId>
            </exclusion>
            <exclusion>
                <artifactId>jackson-core-asl</artifactId>
                <groupId>org.codehaus.jackson</groupId>
            </exclusion>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-jdk14</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <!-- Hint B: If we copy this Apache POI dependencies to the top, it works -->
    <!-- Apache POI - for reading xlsx files -->
    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi</artifactId>
        <version>3.8</version>
    </dependency>

    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi-ooxml</artifactId>
        <version>3.8</version>
    </dependency>

    <dependency>
        <groupId>org.apache.xmlbeans</groupId>
        <artifactId>xmlbeans</artifactId>
        <version>2.5.0</version>
    </dependency>

    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>ooxml-schemas</artifactId>
        <version>1.1</version>
    </dependency>

</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>${java-version}</source>
                <target>${java-version}</target>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                    <configuration>
                        <transformers>

                            <!-- must be SURE to do this with both spring.handlers and spring.schemas. 
                                otherwise you won't be able to use them in the spring config files. -->
                            <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                                <resource>META-INF/spring.handlers</resource>
                            </transformer>

                            <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                                <resource>META-INF/spring.schemas</resource>
                            </transformer>

                            <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                <mainClass>com.mycompany.test.Start</mainClass>
                            </transformer>
                        </transformers>

                        <filters>
                          <filter>
                            <artifact>bouncycastle:bcprov-jdk15</artifact>
                            <excludes>
                              <exclude>META-INF/BCKEY.DSA</exclude>
                              <exclude>META-INF/BCKEY.SF</exclude>
                              <exclude>META-INF/MANIFEST.MF</exclude>
                            </excludes>
                          </filter>
                        </filters>                          

                    </configuration>
                </execution>
            </executions>
        </plugin>

    </plugins>
</build> 
```

如果我执行 jar，我不会得到任何其他调试信息。

是否有任何选项来验证 jarfile？或者有类似`java -verbose`...的东西？

**重现步骤：**

1.  新建一个文件夹
2.  将上面的 Pom.xml 复制到文件夹中。
3.  保存小 `public static void main(...)。进入 src/main/java/com/mycompany/test/Start.java
4.  执行`mvn clean package`
5.  执行`java -jar target/com.mycompany.test-1.0.0-SNAPSHOT.jar`

**附件一：**

```
package com.mycompany.test;

public class Start
{
    public static void main(final String[] args) 
    {
        System.out.println("If you are able to get this printed with java -jar you made it. Thanks a lot! :)");
    }
} 
```

**编辑1：**

我开始删除一些依赖项以识别问题。但是我还没有清楚地了解出了什么问题。

现在我发现（参见 pom.xml 中的提示 B）将 Apache POI 依赖项移到顶部将解决问题。但我仍然不知道为什么以及是什么问题。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-30T06:23:21.510

最后，如果我使用`pom.xml`您向我们展示的内容构建您的项目，并`apache-poi`声明 after `jfreechart`，那么正如您所提到的，我会得到一个损坏的 JAR。交换这两个依赖项的顺序确实给了我一个正确的 JAR。

我有一些以前的经验，`maven-shade-plugin`当我使用它时，我对创建的 JAR`META-INF`目录有问题，所以我检查了它是否有缺陷。

我试图复制（使用 Total Commander）`META-INF`我本地文件系统上某处的目录，我注意到在将文件复制到`META-INF/licences/`. 如果我尝试将它们单独复制到某个地方并且它有效，但我无法复制整个内容。我的结论是 JAR/ZIP 存档已损坏。

我所做的是我在 Total Commander 中*输入*`Ctrl`了那个 JAR（ +`PgDown` *在*JAR 文件上），然后我*重命名* `thirdpartylicenses.txt`为`thirdpartylicenses.txt.wtf`. 这样做 Total Commander 可以保存它并重新打包 JAR（我已经安装了 Total7zip Total Commander 打包插件 - 如果有人尝试过这个并且它不起作用，请尝试安装这个）。

在这之后。有用。

（我也尝试过重新打包整个东西，而不使用 Cygwin 的`unzip`/`zip`命令重命名任何东西，但这不起作用，新存档仍然损坏。Total Commander 或我提到的插件有一些魔力。）

我猜这`maven-shade-plugin`只会创建一个损坏或无效的 ZIP/JAR 存档。我不确定为什么，也许我所描述的对其他人不起作用，但我想我会提到它，所以也许我可以提供帮助。

* * *

我不能只管这个，所以我深入挖掘，我想我已经找到了答案。

*坏*JAR 包含 65608 个条目。*好的*JAR 包含 65450 个条目。

[*猜猜一个普通*](http://en.wikipedia.org/wiki/ZIP_%28file_format%29#ZIP64)[ZIP 文件](http://en.wikipedia.org/wiki/ZIP_%28file_format%29#ZIP64)[的条目数](http://en.wikipedia.org/wiki/ZIP_%28file_format%29#ZIP64)*上限是多少？是的。Wiki 文章谈到了克服此限制的 ZIP64 格式。*

 **好的*JAR 具有较少的条目，因为实际依赖项会因`pom.xml`. （[如this answer所述。](https://stackoverflow.com/a/13088093/433835)）

我数过这样的条目。

```
Collections.list(new JarFile("...").entries()).size(); 
```

我使用的[Java 7 似乎支持新的 ZIP64 格式](https://stackoverflow.com/a/9616474/433835)，所以如果有人尝试使用 Java 5 或 6 计算*坏*JAR 中的条目，可能会收到错误（不过我不确定）。

我还尝试运行*爆炸*的 JAR 。我已经将整个 JAR 解压到一个目录中并像这样运行整个事情。

```
java -cp <dir/ com.mycompany.test.Start 
```

像魅力一样工作。

* * *

底线。不要*过度*使用`maven-shade-plugin`.

我有一个项目在工作，我像这样构建我的项目。

*   我使用[`maven-dependency-plugin`](http://maven.apache.org/plugins/maven-dependency-plugin/). 检查[`copy-dependencies`目标](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)。`target/dependency`如果我没记错的话，这会将您的依赖项复制到其中。
*   使用插件配置中的这些选项，我将这些依赖项作为条目[`maven-jar-plugin`](http://maven.apache.org/plugins/maven-jar-plugin/)添加到我的最终 JAR中。`MANIFEST.MF``Class-Path`

    ```
    <classpathPrefix>dependency/</classpathPrefix>
    <addClasspath>true</addClasspath> 
    ```

    所以我会有类似的`Class-Path`条目`dependency/<artifactId>-<version>.jar`，等等。

*   在此之后，我使用[`maven-assembly-plugin`](https://maven.apache.org/plugins/maven-assembly-plugin7)来创建一个包含我的最终 JAR 和整个`dependency/`文件夹的分发 ZIP。
*   当我部署我的应用程序时，我可以像`java -jar final.jar`.

主要我选择使用这个解决方案，因为在我的项目中我使用了一些 Bouncy Castle JARs，这些 JARs在他们的目录中有一些奢侈的*这个和那个。*`META-INF`当我使用`maven-shade-plugin`来创建我的最终可运行 JAR 时，一切都崩溃了，我很讨厌*找不到该方法，而且这个签名不是很正确的*错误。

你也应该做这样的事情。这个 Maven 阴影业务太*阴暗而无*用（双关语）。

* * *

这[是我试图在](http://ath3nd.wordpress.com/2013/12/25/packaging-a-multimodule-maven-spring-app-in-a-standalone-jar/)上面描述的整个过程的博客文章（感谢 [baba](https://stackoverflow.com/users/487649/baba)），也许它会在未来帮助某人。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-26T13:42:19.733

我使用您的设置运行，当您在依赖项声明中向上`mvn dependency:tree`移动时，它会有所不同。`org.apache.poi`

这取自关于依赖顺序[的依赖机制简介：](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)

> *依赖中介*——这决定了当遇到工件的多个版本时将使用哪个版本的依赖。目前，Maven 2.0 仅支持使用“最近定义”，这意味着它将使用依赖树中与您的项目最接近的依赖版本。您始终可以通过在项目的 POM 中明确声明来保证版本。请注意，如果两个依赖版本在依赖树中的深度相同，则在 Maven 2.0.8 之前没有定义哪个会获胜，**但从 Maven 2.0.9 开始，声明中的顺序很重要：第一个声明会获胜**。

您的依赖解决方案似乎存在冲突，这导致您的 jar 文件损坏（不知道为什么它会损坏）。

无论如何，这是两个 pom 之间的差异（左边是原点，右边是`org.apache.poi`更高的）：

![在此处输入图像描述](../Images/ee76a52390bffb92c900f581d9b05afd.png) ![在此处输入图像描述](../Images/c4242441cc98401655edec6c344ea8c1.png)

（*也许在图片上很难看到，但如果你放大你会看到。*）

最大的区别在于，在非工作 pom 中，`org.apache.httpcomponents:httpcore:jar:4.2.1`依赖于`commons-codec:commons-codec:jar:1.6`，而在工作 pom 中，依赖已被覆盖`commons-codec:commons-codec:jar:1.5`。

我猜是`1.6`版本`commons-codec`有问题`org.apache.poi:poi:jar:3.8`，需要的`1.5`版本。

* * *

**编辑**

在[这个解释为什么 jar 文件损坏（jar 中的条目太多）的出色答案](https://stackoverflow.com/a/13133719/1350762)之后，我只想添加一个简单的解决方案，该解决方案至少适用于您的特定问题。

将标签添加`<minimizeJar>true</minimizeJar>`到您的`maven-shade-plugin`配置中。

之后，您的`java -jar target/com.mycompany.test-1.0.0-SNAPSHOT.jar`命令行将起作用。*

# gnome - 在指定时间段内锁定 gnome 屏幕，但无法解锁

> ID：13021433
> 
> 赞同：1
> 
> 时间：2012-10-22T23:26:51.800
> 
> 标签：gnome

我在 CentOS 中使用 gnome。我想要实现的是在指定的时间段内完全锁定计算机，比如 23:00~7:00。

**尝试**

1.  我尝试创建 Python + Qt 应用程序，但可以通过切换到另一个会话并终止它来轻松解决它。
2.  有一个名为“打字中断”的应用程序，它与我想做的类似，但没有办法在时间点 A 启用它并在时间点 B 禁用它。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:09:54.093

您可以控制屏幕保护程序`gnome-screensaver-command`

```
$ gnome-screensaver-command --help
Usage:
  gnome-screensaver-command [OPTION…]

Help Options:
  -h, --help           Show help options

Application Options:
  --exit               Causes the screensaver to exit gracefully
  -q, --query          Query the state of the screensaver
  -t, --time           Query the length of time the screensaver has been active
  -l, --lock           Tells the running screensaver process to lock the screen immediately
  -a, --activate       Turn the screensaver on (blank the screen)
  -d, --deactivate     If the screensaver is active then deactivate it (un-blank the screen)
  -V, --version        Version of this application 
```

在您的情况下，一个 cronjob 可能就足够了。IE

```
0 23 * * * DISPLAY=:0 gnome-screensaver-command --lock
0  7 * * * DISPLAY=:0 gnome-screensaver-command --deactivate 
```

# sql-server - 为什么 SUM(real) 在 SQL Server 中返回浮点数据类型？

> ID：13021435
> 
> 赞同：3
> 
> 时间：2012-10-22T23:27:03.510
> 
> 标签：sql-server, sqldatatypes

如果我有这样的表：

项目

```
Name varchar(50)
Value real 
```

然后我创建一个视图：

```
select sum(Value) as ValueSum from Items 
```

ValueSum 数据类型是一个浮点数。为什么它不再是真正的数据类型？

此外，这在 SQL Server 2005 和 2008 之间是否发生了变化？我有一个旧的数据库备份，其中视图中的 ValueSum 作为真正的非浮点数返回。我可以恢复备份，如果我查看视图，它看起来像是在返回一个真实的，但如果重新保存它就会变成一个浮点数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:30:46.840

`real`只是 的同义词`float(24)`。参考：[浮点数和实数（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms173773.aspx)

当您对多个`real`s（甚至其中 2 个）求和时，您可能会溢出`real`数据类型，因此它会被提升为更大的数据类型。

测试：

```
declare @t table (a real);
insert @t select 123;
select SQL_VARIANT_PROPERTY(sum(a), 'basetype'),
       SQL_VARIANT_PROPERTY(sum(a), 'precision'),
       SQL_VARIANT_PROPERTY(sum(a), 'scale')
from @t;

-------------
float    53    0 
```

这与导致结果转到 (N)Varchar(MAX) 的某些字符串函数相同，这在公共表表达式中使用时很常见，需要显式 CAST 来消除表达式类型不等式错误。

# .net - .NET 中 DateTime 的 CompareTo() 有多精确

> ID：13021437
> 
> 赞同：0
> 
> 时间：2012-10-22T23:27:06.017
> 
> 标签：.net, datetime

当调用 .NET 中 DateTime 的 CompareTo() 时，是否将 DateTime 对象上的刻度与另一个对象上的刻度进行比较？比较的精确度如何？我正在从 sql 数据库中获取 datetime2(7) 值，并希望确保比较是逐个滴答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:31:48.923

是的，比较刻度。这是`Equals`在 DateTime 结构中实现的方式

```
public bool Equals(DateTime value)
{
    return (this.InternalTicks == value.InternalTicks);
} 
```

InternalTicks 返回`ulong`类型的字段。因此，日期时间的比较与长类型的比较具有相同的精度。单个滴答表示 100 纳秒。

顺便说一句，数据库可以以不同的精度存储时间 - 一些准确性可能会丢失。但是有一个技巧——你可以将`Ticks`值保存到数据库中。在这种情况下，您可以稍后恢复完全相同的 .net DateTime 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:32:07.777

数据库的精度与 DateTime 对象的精度无关。DateTime 对象存储 100ns 的内部滴答计数。所以这是相当精确的。是的，如果值相差 1 个刻度，CompareTo 将返回 false。

但是，您的 datetime 字段可能不会以如此高的精度存储日期（尽管 datetime2(7) 应该足够精确）。因此，如果您在数据库中存储两个 DateTime，并且它们的间隔非常短，那么您从数据库中获取的 BACK 值可能是相同的。

# cookies - Silex 设置饼干

> ID：13021440
> 
> 赞同：4
> 
> 时间：2012-10-22T23:27:12.937
> 
> 标签：cookies, silex

我正在使用 Silex 框架，我正在拼命尝试设置一个 cookie。在文档中找不到任何信息，我几乎尝试了任何东西！

有人可能有这方面的经验，并且可以提供一个小例子吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T08:49:39.017

这是我的一个网站的摘录，它设置了一个 cookie，然后提供一个 pdf：

```
$dt = new \DateTime();
$dt->modify("+1 year");
$c = new Cookie("juniorkupon_letoltve", "1", $dt);
$r = new Response(file_get_contents(ROOT . "/data/kupon.pdf"), 200, array("Content-Type" => "application/pdf"));
$r->headers->setCookie($c);

return $r; 
```

诀窍是您需要`Response`手动创建对象并在其上设置 cookie。您可以像这样设置对树枝渲染输出的响应：

```
$r = new Response($app["twig"]->render("filename", $params)); 
```

# asp.net - 使用 asp.net Application[] 缓存网站内容是否明智？

> ID：13021442
> 
> 赞同：-2
> 
> 时间：2012-10-22T23:27:17.610
> 
> 标签：asp.net

我正在尝试用 asp.net 做一个项目，我想知道使用应用程序缓存网站内容是否也是如此？

例如，我使用了一个 100 行代码的方法和连接到数据库的方法并做了很多事情......最后它返回一个长度为 10000 个字符的字符串.. 将这个字符串保存在 asp 中是真的吗？ net 应用程序并使用此应用程序直到程​​序正常工作而不是每次都执行该方法？还是每次用户检查我的网站时我都必须这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:35:23.307

1.  您可能应该使用“聪明”这个词而不是“真实”。

2.  你可以做你写的。您也可以简单地使用静态类来存储您的“缓存”。在我看来，这是最简单的方法。

# ruby-on-rails - Rails：复数不能正常工作？（快的）

> ID：13021446
> 
> 赞同：0
> 
> 时间：2012-10-22T23:27:50.627
> 
> 标签：ruby-on-rails

嗨，谁能告诉我为什么复数让我回来

`This album currently has 0 photos`

当我的 html.erb 是：

`<h1>This album currently has <%= pluralize(@album.photos.count, "photo") %></h1>`

? 我在滥用复数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:48:27.587

一切都很好：[http ://en.wiktionary.org/wiki/photos#English](http://en.wiktionary.org/wiki/photos#English)

Rails 可能有几个错误的复数形式/单数形式，例如：

```
"police".singularize
#=> "polouse" 
```

但“照片”不是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:59:41.500

正如前面提到的答案，这是正确的变形。然而，正如上面提到的 David Österreicher，Rails 有时确实会出错。您可以在 中指定其他规则`config/inflections.rb`。它附带了几个示例，可让您走上正确的道路。

# c# - 可以与 Windows Mobile 设备通信的浏览器外/浏览器内（或任何浏览器提供的平台）的 Silverlight？

> ID：13021455
> 
> 赞同：0
> 
> 时间：2012-10-22T23:28:42.623
> 
> 标签：c#, silverlight, windows-mobile, out-of-browser, rapi

我正在尝试编写一个浏览器交付的应用程序，该应用程序可以与 Windows Mobile 通信，最好使用 C# 并使用 RAPI2 库。

这是可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:39:01.667

尽管您可以编写 ActiveX（Internet Explorer Mobile）或 NPAPI（zetaKey 或其他 Windows Mobile HTML5 webkit 浏览器）“插件”，但必须先安装这些插件，然后才能在网页中使用它们。Windows Mobile 不支持这些的按需安装。

一般来说，移动浏览器应该是从操作系统封装出来的，不能访问操作系统或设备的硬件。我知道的唯一例外是 ActiveX 和 NPAPI 插件。

另一个“本地”网络应用程序框架是 PhoneGAP (http://en.wikipedia.org/wiki/PhoneGap)。它使您可以编写一次应用程序并将其分发到不同的移动设备。UI 以 HTML 格式呈现。另请参阅 Jo 框架。

根据这个网站（http://gizmodo.com/5037919/skyfire-mobile-browser-now-supports-microsoft-silverlight-plus-100-more-beta-codes）有一个名为 SkyFire wgich 的浏览器支持 MS Flash 替代Windows Mobile（5、6 或 6.5）上的（SilverLight）：http: [//get.skyfire.com/m/unknown.php](http://get.skyfire.com/m/unknown.php)

SilverLight 的问题在于它是为 Phone 7（不是 Windows Mobile）设计的，我担心，虽然 Windows 7 有本机扩展，但 Windows Mobile 和 Phone 7 都没有选项（http://www.networkworld.com /news/2010/031510-windows-phone-apps.html)

您究竟想使用 RAPI 做什么？

问候

约瑟夫

# r - 使用 ns() 进行样条预测

> ID：13021456
> 
> 赞同：2
> 
> 时间：2012-10-22T23:28:44.137
> 
> 标签：r, statistics

我试图重现 Hastie 等人（2008 年）的“统计学习要素”的图 5.4（第 147 页）的左上图。

这样做很容易：

```
library(splines)
library(gam)
sa=read.table("http://www-stat.stanford.edu/~tibs/ElemStatLearn/datasets/SAheart.data",
    sep=",",head=T,row.names=1)
mdl=glm(chd~ns(sbp,4)+ns(tobacco,4)+ns(ldl,4)+famhist+ns(obesity,4)+ns(age,4),data=sa,family=binomial())
plot.gam(mdl,terms="ns(sbp, 4)") 
```

这给出了所需的情节。

但是，如果我尝试直接应用我对该方法的粗略理解：

```
xvar=seq(min(sa$sbp),max(sa$sbp),length.out=200)
basis=ns(xvar,4)
sbpnames=c("ns(sbp, 4)1",  "ns(sbp, 4)2",  "ns(sbp, 4)3",  "ns(sbp, 4)4")
plot(xvar,basis%*%mdl$coef[sbpnames],type="l") 
```

情节不一样。有谁知道这是为什么？非常感谢所有反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:45:17.100

我认为他们以不同的 y 值为中心这一事实与 Simon Wood 上周在 R-help 上回答的一个问题有关。出现了一个关于在 gam 公式中使用“+0”的含义的问题，并且（希望这是一个相当准确的总结......）[西蒙的回答](https://stat.ethz.ch/pipermail/r-help/2012-October/326052.html)是假设样条拟合已经从拟合值。我假设他会为绘制例程做出类似的假设。他基本上暗示添加+0只是令人困惑的事情，并建议不要这样做。

“水平移动”与选择结位置以产生相同分位数的结位置有关，并且您的“新数据”在血压范围内均匀分布，而原始数据右偏，中间值为一个不同的位置。这是`ns`函数的效果，如果您改为为两次运行指定相同的结，则可以“修复”。

# cassandra - 卡桑德拉雨鸟

> ID：13021458
> 
> 赞同：0
> 
> 时间：2012-10-22T23:28:56.633
> 
> 标签：cassandra, real-time, analytics, complex-event-processing

有人知道 cassandra 中聚合的 Rainbird 项目是否已在主项目中提交？

有人对实时分析选择有什么建议吗？我也在考虑将 S4 用于 CEP 类型的功能。

问候。汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:01:03.840

据我所知，Rainbird 从未开源。我编写了一个非常基本的开源实现，用于教程（my-first-cassandra-app 类型的东西）：

*   [https://github.com/acunu/painbird](https://github.com/acunu/painbird)

可以在此处找到其中一个教程的视频：

*   [http://skillsmatter.com/podcast/home/tutorial-2-cassandra](http://skillsmatter.com/podcast/home/tutorial-2-cassandra)

（警告，插件！）我的公司 Acunu 在 Cassandra 之上构建了一个灵活的实时分析平台，我们称之为 Acunu Analytics。它像rainbird，但更灵活，涵盖更多分析功能（top-k，count distinct），对于来自 SQL 背景的人来说应该更熟悉。恐怕它不是免费的，但可以从我们的网站 (www.acunu.com) 下载试用版。有关更多信息，请参阅：

*   [http://www.acunu.com/2/post/2012/09/understanding-realtime-analytics.html](http://www.acunu.com/2/post/2012/09/understanding-realtime-analytics.html)
*   [http://www.acunu.com/2/post/2012/10/acunu-analytics-greater-than-10x-performance-vs-mysql.html](http://www.acunu.com/2/post/2012/10/acunu-analytics-greater-than-10x-performance-vs-mysql.html)
*   [http://www.acunu.com/2/post/2012/08/announcing-acunu-reflex-with-analytics-v3.html](http://www.acunu.com/2/post/2012/08/announcing-acunu-reflex-with-analytics-v3.html)
*   [http://www.acunu.com/2/post/2012/07/approximate-analytics.html](http://www.acunu.com/2/post/2012/07/approximate-analytics.html)
*   [http://www.acunu.com/uploads/1/1/5/5/11559475/acunu_reflex_with_analytics_datasheet.pdf](http://www.acunu.com/uploads/1/1/5/5/11559475/acunu_reflex_with_analytics_datasheet.pdf)

我们还准备发布一些基于 Acunu Analytics 的超酷仪表板功能。

谢谢

汤姆

# python - Python 3 变量列表的区别

> ID：13021460
> 
> 赞同：0
> 
> 时间：2012-10-22T23:29:15.603
> 
> 标签：python

我有两个列表，我正在尝试比较一定金额的美元金额差异。

清单是

```
file1 = ['file1,product1,-1000.56', 'file1,product2,500.43']

file2 = ['file2,product1,-1001.37', 'file2,product2,511.99'] 
```

如果超过 5 美元，我想以以下格式打印差异

```
file1 product2 500.43
file2 product2 511.99

Difference = $11.56 
```

产品 1 不会显示，因为它低于 5 美元

有没有好的方法来做到这一点？

我努力了...

```
for i in file1:
    i.split(",") 
```

这有助于拆分列表，但如何比较两个 $ 金额，并仅显示 $5 或更多。

如果有人能给我一种方法来比较两个超过 5 美元的差额，我可以找出其余的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:35:55.487

用于`zip()`遍历两个列表：

```
In [114]: file1 = ['file1,product1,-1000.56', 'file1,product2,500.43']

In [115]: file2 = ['file2,product1,-1001.37', 'file2,product2,511.99']

In [116]: for f1,f2 in zip(file1,file2):
    spl1=f1.split(',')     #returns something like ['file1', 'product2', '500.43']
    spl2=f2.split(',')     #returns something like ['file2', 'product2', '511.99']

    diff=abs(float(spl1[-1])-float(spl2[-1]))  ##use abs() to find the difference

    if diff>5:  
        print " ".join(spl1)                    #use print() as you're on py 3.x 
        print " ".join(spl2)                    #join the lists by " " 
        print "${0}".format(diff)
   .....:         
   .....:         
file1 product2 500.43
file2 product2 511.99
$11.56 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:38:42.560

如果您只关心两个文件中出现的相同产品，那么您可以创建一个 product->value 查找的字典，然后获取文件之间的差异（未经测试，可以做得更优雅）：

```
file1 = ['file1,product1,-1000.56', 'file1,product2,500.43']
file2 = ['file2,product1,-1001.37', 'file2,product2,511.99']

d1 = {k: float(v) for k, v in (el.split(',')[1:] for el in file1)}
d2 = {k: float(v) for k, v in (el.split(',')[1:] for el in file2)}

for key in d1.keys() & d2.keys():
    print (key, abs(d1[key] - d2[key]))

# product2 11.56
# product1 0.81 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:33:08.477

用逗号分割后，最后一个元素将是一个表示美元金额的字符串。第一步是使用 将其转换为数字[`float`](http://docs.python.org/library/functions.html#float)。将两美元金额作为浮点数后，您可以将它们减去并与 进行比较`5.0`，例如：

```
diff = abs(float('511.99') - float('500.43'))
if diff >= 5.0:
    # print it 
```

请注意，我还使用了内置函数[`abs`](http://docs.python.org/library/functions.html#abs)来确保我们得到了积极的差异，这样您就不需要先找出哪个值更大。

# .net - TDD 我怎样才能建立这个测试？不确定要针对什么进行验证

> ID：13021463
> 
> 赞同：0
> 
> 时间：2012-10-22T23:29:48.530
> 
> 标签：.net, tdd, nunit, moq, console-application

我正在使用 nunit、moq 并尝试做 TDD。

我有返回一些用户帐户的查询。我有另一个查询可以返回一组条件。

我将浏览每个帐户并根据集合检查每个帐户，并查看用户帐户属于什么条件（如果有）。

```
public void Test()
{
  var accounts = GetAccounts();
  var conditions = GetConditions();

  foreach(var a in accounts)
 {
    var found = conditions.Where(x => x.condition1 >= a.condition1 && x.condition2 <= a.condition2).FirstOrDefault();

    if(found)
    {
      // move on to next condition in flow chart
    }
    else
    {
       continue;
    }
 }

} 
```

我如何在 TDD 中进行测试。我想验证是否找到了正确的条件？我不认为将其作为公共方法是明智的，而且我认为在我申请某人检查条件时没有任何意义。

所以我不确定实际测试什么，因为这个条件稍后会用于计算一个数字，我可以用它来验证是否调用了正确的条件。问题是，这基本上意味着方法的结束，并且数字可能会受到任何其他东西的影响，并且会破坏我对 TDD 的理解（你一次写一个方法，但首先要进行单元测试测试一下）

**编辑**

是的，这就是我开始做的。我做了我的模拟和假物体。并完成了所有设置，但后来我被困在我将用来验证结果的到底是什么上。我正在制作的方法很可能会保持无效（它会记录错误或在某些时候更新客户帐户）。它确实是应用程序中唯一的公共方法，因为应用程序将作为计划任务运行（它是一个控制台应用程序），因此它基本上是“运行”方法。它将在所有业务案例的业务层中有许多私有方法。最后，用户要么被跳过，要么如果他们满足条件，他们就会受到惩罚。罚款将更新到他们的帐户。

是的，我可以将条件方法设为公开或内部，但我认为业务层之外的任何方法都不应该知道它们。它仅与该业务层相关，然后仅在运行该“运行”方法时才在其之上。

这就是让 TDD 对我来说如此困难的原因。他们说只测试公共方法，如果我说的是一个与用户交互的网站，并且很可能会向用户发送某种反馈（即成功消息/结果）。但是当你有一个应用程序应该作为计划任务运行时，它只通过一个公共方法运行，其余的只是业务规则，我很难弄清楚如何测试它。

什么是 SUT 内部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:02:59.690

与任何测试一样，您需要指定一些虚假的依赖项（在这种情况下是用户和条件），并将您正在测试的函数的输出与预定义的预期结果进行比较（在这种情况下，如果我理解正确，您想要验证每个帐户是否具有预期的条件）。

您可以编写一个测试，将假用户列表和假规则列表注入您的 SUT（被测系统），并将实际用户列表及其条件与预期列表进行比较。

您的测试可能如下所示：

```
[Test]
public void Rules_matcher_with_premium_users_should_have_free_access()
{
    var customer = Mock<IAccount>>);
    var condition = Mock<ICondition>();
    customer.Setup(c => ...); // set up condition
    condition.Setup(co => ...); // set up condition
    var sut = new MyBusinessLogic(customer.object, condition.object);
    var result = sut.DoConditionCheck();

    Assert.AreEqual(condition.object.Id, customer.object.Condition.Id);
} 
```

我在这里所做的是一个测试的例子，正如你所说，客户应该有正确的条件。我为条件和客户使用了存根，并假设规则引擎应该工作，客户应该*有*那个条件。

至于封装：根据大多数 TDD 纯粹主义者的说法，您只测试公共 API。其他任何东西都将作为被您测试的公共 API*调用*的副作用进行测试。如果不公开，则为实现细节，无需**直接**测试。如果需要测试，请公开。

我采取稍微轻松一点的看法。您可以将 SUT 设为内部，并使用**`InternalsVisibleTo`**属性将其公开以进行单元测试，并指定测试程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:29:58.420

您在评论中提到了流程图。那么，为什么不创建一个流程图对象并对其进行测试。您将有一个像 GetNextStep 这样的方法来接收一个帐户，然后您会看到返回的步骤是您期望的步骤。

# assembly - Using a virtual machine to learn assembly

> ID：13021466
> 
> 赞同：10
> 
> 时间：2012-10-22T23:30:18.570
> 
> 标签：assembly

I'm in the planning phases to learn assembly language and would like to take a start with x86 assembly but have computers around me with 64-bit processors (i7, i5 and a Core 2 Duo) and operating systems. Since I use my existing machines for work and don't want to things to go wrong while learning/practicing, I've been planning to buy or build a cheap 32-bit system using some old hardware that I may find. But before that, I'm wondering if it is possible to use a virtual machine for the same purpose. Would the machine instructions that are executed only be limited to virtual machine or would they be interacting with the virtual machine's host (i.e. my computer itself)?

I've looked around to see if someone has already tried such a thing, but seems like nobody has - so, my apologies if my question is naive as I don't know anything at all about assembly yet. But would be great if someone can shed some light on this subject and offer some pointers for people like me who want to learn assembly in a safe and isolated environment.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T00:10:51.063

I strongly suggest:

1) use an instruction set simulator (on par with what you are asking). much better visibility and a better chance at success, less frustration, less chance at giving up.

2) do NOT learn x86 assembly first. (having the hardware is a bad excuse for learning x86 first). very bad architecture, learn a good architecture first then if you bother to learn x86 learn it later and then learn 8088/86 first using one of the many simulators/emulators.

3) learn a few instruction sets, if you start with a good one, then all other instruction sets and even programming languages are a small matter of syntax.

4) you are not learning system calls that is a bad way to learn assembly, learn the instruction set and how to program with it, system calls is after you have learned the assembly and choose to continue to program applications in it.

msp430 (or pdp11/lsi11), arm, thumb, avr, mico8, and a list of others are much better. save mips for after you have learned a few as well, it has uncommon features that can put you in the wrong mindset for other architectures.

if your programming skills are strong already then you can pick up assembly in a matter of days and have a few to many instruction sets in a matter of weeks. If you follow this guide and learn a few unrelated (to each other)(good) instruction sets, then start to look at x86 you will see exactly why I am recommending learning it last or never. Like 6502 and pic and some others it has historic educational value, but due to the nature of the history of the family you cant get much out of it from a tuning/programming perspective. Actually I recommend reading The Zen of Assembly, and remember even when written it was about how to think about performance coding in general, not about 8088/86 performance tuning.

A good way to really learn assembly is by writing a disassembler, problem is that most instruction sets are variable word length and variable word length disassemblers are an advanced programming problem. ARM and thumb (not thumb2) are fixed word length and very easy to write disassemblers for.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T23:33:57.063

Start by using [qemu](http://www.qemu.org/). It's a lightweight VM that you can run programs (raw assembly, c, c++, etc) on without even installing an OS on it.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T23:34:08.540

Yes you can do assembly programming within a virtual machine, and you will be limited to the instruction set exposed by the virtual machine. If you do a 32 bit machine within a 64 bit host environment, you will only see the 32 bit instructions.

For what it's worth, assembly programming is not "unsafe" to do in your host environment, so there's not really any need to use a VM unless you are looking to emulate different hardware altogether, or are looking to write things like bootloaders and tiny operating systems.

For just learning assembly though, I certainly wouldn't start off writing bootloaders / operating systems, as you wont have access to debuggers and test cycles will be long. Start off with [http://www.nasm.us/](http://www.nasm.us/) to learn x86/x86-64 assembly, or look into [http://wiki.qemu.org/Main_Page](http://wiki.qemu.org/Main_Page) for doing things like ARM programming.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-27T13:36:33.503

try [Marss86](http://www.marss86.org/~marss86/index.php/Home)

> MARSSx86 (MARSS for short) is a tool for cycle accurate full system simulation of the x86-64 architecture, specifically multicore implementations. Our goal is to create a simple yet efficient full system architectural simulation environment based on existing tools.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-27T14:10:39.760

If you are trying to learn assembly language with respect to Arm architecture then my suggestion is learn basics from below sites .Here in these it explain how `to use qemu w.r.t assembly and its best place to start`

[http://www.bravegnu.org/gnu-eprog/index.html#intro](http://www.bravegnu.org/gnu-eprog/index.html#intro)

also [http://balau82.wordpress.com/2010/02/28/hello-world-for-bare-metal-arm-using-qemu/](http://balau82.wordpress.com/2010/02/28/hello-world-for-bare-metal-arm-using-qemu/)

so from above site u can try on virtual machine like `qemu` without need of `real hardware`

# java - 禁止子类覆盖 Java 方法

> ID：13021472
> 
> 赞同：37
> 
> 时间：2012-10-22T23:30:58.090
> 
> 标签：java, class, methods, subclass

假设我在 Java 类中有一个方法，并且我不希望该类的任何子类能够覆盖该方法。我可以这样做吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-22T23:32:19.303

您可以将方法声明为`final`，如下所示：

```
public final String getId() {
   ...
} 
```

有关详细信息，请参阅[http://docs.oracle.com/javase/tutorial/java/IandI/final.html](http://docs.oracle.com/javase/tutorial/java/IandI/final.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-22T23:32:30.110

只需将方法**设为 final**即可。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T23:38:12.300

如果您的方法不是您构建的 API 的一部分并且没有被子类直接调用，则更喜欢简单地创建您的方法`private`。

如果您的类层次结构包含在单个包中，请将您的方法置于包范围内（没有范围关键字）。因此，只有外部世界（包括您自己的其他软件包）无法访问它，因此无法覆盖它。

如果您的方法不是 API 的真正组成部分，但必须被子类甚至外部可见，则更喜欢 make it`protected`和`final`

最后，如果您的方法是 API 的一部分，请将其设置`public`为`final`.

# objective-c - 在 MacOsX（非 iPhone）上为 Objective C 编译 Tesseract-OCR 3.01

> ID：13021476
> 
> 赞同：2
> 
> 时间：2012-10-22T23:31:35.850
> 
> 标签：objective-c, macos, compilation, ocr, tesseract

我想在我的 Macintosh 应用程序之一中实现[Tesseract OCR 库](http://code.google.com/p/tesseract-ocr/)，但我遇到了一个我觉得自己无法解决的问题。

**我必须为用于 Mac 开发的 Objective C 编译文件。**我在网上搜索，我发现的每一篇文章都有近 2 年的历史。我发现了一些脚本（见下面的代码段），其中所有的旧 iOs 版本，只是用 MacOsX 相关的路径替换 iOs 相关的路径不起作用。

我以前从来没有做过这样的事情。如果您有解决方案，我将非常感激，但如果您能给我提示在哪里寻找它，我将不胜感激。我知道我不应该为 arm 架构编译，但是有很多代码段我不知道我在做什么，所以我需要一些帮助......

提前致谢！

```
#!/bin/sh
# build_fat.sh
#
# Created by Robert Carlsen on 15.07.2009\. Updated 24.9.2010
# build an arm / i386 lib of standard linux project
#
# initially configured for tesseract-ocr v2.0.4
# updated for tesseract prerelease v3

outdir=outdir
mkdir -p $outdir/arm $outdir/i386

libdirs=( api ccutil ccmain ccstruct classify cutil dict image textord training viewer wordrec )
libs=( api ccutil main ccstruct classify cutil dict image textord training viewer wordrec )
count=${#libdirs[@]}

make distclean
unset CPPFLAGS CFLAGS LDFLAGS CPP CXX CC CXXFLAGS DEVROOT SDKROOT LD

export DEVROOT=/Developer/Platforms/iPhoneOS.platform/Developer
export SDKROOT=$DEVROOT/SDKs/iPhoneOS6.0.sdk
export CPPFLAGS=”-I$SDKROOT/usr/lib/gcc/arm-apple-darwin10/4.2.1/include/ -I$SDKROOT/usr/include/ -miphoneos-version-min=3.0″
export CFLAGS=”$CPPFLAGS -arch armv6 -pipe -no-cpp-precomp -isysroot $SDKROOT”
export LDFLAGS=”-L$SDKROOT/usr/lib/”
export CXXFLAGS=”$CFLAGS”
export CPP=”$DEVROOT/usr/bin/cpp-4.2 $CPPFLAGS”
export CXX=”$DEVROOT/usr/bin/g++-4.2 $CXXFLAGS”
export CC=”$DEVROOT/usr/bin/gcc-4.2 $CFLAGS”
./configure LD=$DEVROOT/usr/bin/ld –host=arm-apple-darwin
make -j4
cp api/.libs/libtesseract_api.a libtesseract_api_armv6.a
cp ccutil/.libs/libtesseract_ccutil.a libtesseract_ccutil_armv6.a
cp ccmain/.libs/libtesseract_main.a libtesseract_main_armv6.a
cp ccstruct/.libs/libtesseract_ccstruct.a libtesseract_ccstruct_armv6.a
cp classify/.libs/libtesseract_classify.a libtesseract_classify_armv6.a
cp cutil/.libs/libtesseract_cutil.a libtesseract_cutil_armv6.a
cp dict/.libs/libtesseract_dict.a libtesseract_dict_armv6.a
cp image/.libs/libtesseract_image.a libtesseract_image_armv6.a
cp textord/.libs/libtesseract_textord.a libtesseract_textord_armv6.a
cp training/.libs/libtesseract_training.a libtesseract_training_armv6.a
cp viewer/.libs/libtesseract_viewer.a libtesseract_viewer_armv6.a
cp wordrec/.libs/libtesseract_wordrec.a libtesseract_wordrec_armv6.a

make distclean
unset CPPFLAGS CFLAGS LDFLAGS CPP CXX CC CXXFLAGS DEVROOT SDKROOT
export CFLAGS=”-arch i386 -pipe -no-cpp-precomp”
export CXXFLAGS=”$CFLAGS”
./configure
make -j4
cp api/.libs/libtesseract_api.a libtesseract_api_i386.a
cp ccutil/.libs/libtesseract_ccutil.a libtesseract_ccutil_i386.a
cp ccmain/.libs/libtesseract_main.a libtesseract_main_i386.a
cp ccstruct/.libs/libtesseract_ccstruct.a libtesseract_ccstruct_i386.a
cp classify/.libs/libtesseract_classify.a libtesseract_classify_i386.a
cp cutil/.libs/libtesseract_cutil.a libtesseract_cutil_i386.a
cp dict/.libs/libtesseract_dict.a libtesseract_dict_i386.a
cp image/.libs/libtesseract_image.a libtesseract_image_i386.a
cp textord/.libs/libtesseract_textord.a libtesseract_textord_i386.a
cp training/.libs/libtesseract_training.a libtesseract_training_i386.a
cp viewer/.libs/libtesseract_viewer.a libtesseract_viewer_i386.a
cp wordrec/.libs/libtesseract_wordrec.a libtesseract_wordrec_i386.a

$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_api_armv6.a -arch i386 libtesseract_api_i386.a -create -output libtesseract_api.a
$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_ccutil_armv6.a -arch i386 libtesseract_ccutil_i386.a -create -output libtesseract_ccutil.a
$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_main_armv6.a -arch i386 libtesseract_main_i386.a -create -output libtesseract_main.a
$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_ccstruct_armv6.a -arch i386 libtesseract_ccstruct_i386.a -create -output libtesseract_ccstruct.a
$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_classify_armv6.a -arch i386 libtesseract_classify_i386.a -create -output libtesseract_classify.a
$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_cutil_armv6.a -arch i386 libtesseract_cutil_i386.a -create -output libtesseract_cutil.a
$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_dict_armv6.a -arch i386 libtesseract_dict_i386.a -create -output libtesseract_dict.a
$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_image_armv6.a -arch i386 libtesseract_image_i386.a -create -output libtesseract_image.a
$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_textord_armv6.a -arch i386 libtesseract_textord_i386.a -create -output libtesseract_textord.a
$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_training_armv6.a -arch i386 libtesseract_training_i386.a -create -output libtesseract_training.a
$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_viewer_armv6.a -arch i386 libtesseract_viewer_i386.a -create -output libtesseract_viewer.a
$DEVROOT/usr/bin/lipo -arch armv6 libtesseract_wordrec_armv6.a -arch i386 libtesseract_wordrec_i386.a -create -output libtesseract_wordrec.a

unset CPPFLAGS CFLAGS LDFLAGS CPP CXX CC CXXFLAGS DEVROOT SDKROOT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:53:31.213

在过去的几天里，我一直在研究这个主题，并且设法针对**iOs SDK 5.0、4.2 和 Simulator i386**编译了一个工作库。

这两个教程对我帮助很大！希望他们也能帮助别人：

[如何：交叉编译 ios 库 (armv6/armv7/i386)](http://tinsuke.wordpress.com/2011/02/17/how-to-cross-compiling-libraries-for-ios-armv6armv7i386/)

[如何：在 ios (sdk 5) 上编译和使用 tesseract (3.01)](http://tinsuke.wordpress.com/2011/11/01/how-to-compile-and-use-tesseract-3-01-on-ios-sdk-5/)

不过，我仍在尝试让它们在 MacOsX 环境中工作。如果我设法完成它，我会再次发布。

# php - 非常基本的连接到 mysql / 测试问题

> ID：13021477
> 
> 赞同：1
> 
> 时间：2012-10-22T23:31:38.310
> 
> 标签：php, mysql, dreamweaver

如果这是一个非常愚蠢的问题，我提前道歉（我是 php 和 mysql 的新手。

基本上，我正处于设置 connect_to_mysql.php 文件的步骤，如 (5:50) 所示： [http ://www.youtube.com/watch?v=YaII5QhNCH0](http://www.youtube.com/watch?v=YaII5QhNCH0)

并如图所示：http: [//www.developphp.com/view_lesson.php?v=248](http://www.developphp.com/view_lesson.php?v=248)

我正在使用 MAMP。端口是 80 / 3306 但是我知道在 MAMP 起始页上它说，以下内容也不起作用。：

MySQL

MySQL 数据库可以使用 phpMyAdmin 进行管理。

要从您自己的脚本连接到 MySQL 服务器，请使用以下连接参数：

主机：localhost 端口：3306 用户：root 密码：root

这是我所拥有的：

这是connect_to_mysql.php：

```
 <?php  
    // Created BY Adam Khoury @ www.flashbuilding.com - 6/19/2008  
/*  
1: "die()" will exit the script and show an error statement if something goes wrong with     the     "connect" or "select" functions. 
2: A "mysql_connect()" error usually means your username/password are wrong  
3: A "mysql_select_db()" error usually means the database does not exist. 
*/ 
// Place db host name. Sometimes "localhost" but  
// sometimes looks like this: >>      ???mysql??.someserver.net 
$db_host = "localhost"; 
// Place the username for the MySQL database here 
$db_username = "builder2";  
// Place the password for the MySQL database here 
$db_pass = "builder2";  
// Place the name for the MySQL database here 
$db_name = "suitstore"; 

// Run the actual connection here  
mysql_connect("$localhost","$builder2","$builder2") or die ("could not connect to     mysql");
mysql_select_db("$suitstore") or die ("no database");              
?> 
```

这是test.php：

```
 <?php   
    // Connect to the file above here   
require "connect_to_mysql.php";  

echo "<h1>Success in database connection! Happy Coding!</h1>";   
// if no success the script would have died before this success message 
?> 
```

所以，当我在 Chrome 上加载测试站点时，它说：服务器错误网站在检索时遇到错误。它可能因维护而停机或配置不正确。以下是一些建议： 稍后重新加载此网页。HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。

所以，这可能是问题的一部分：在 DW 中，当我打开 test.php 时，它告诉我“这个站点可能有动态相关的文件，只能由服务器 [Discover] [Preferences] 发现”

然后，如果我单击发现，它会显示：“由于内部服务器错误，无法解析动态相关文件。[重试]”

谢谢，对不起，如果这是一个愚蠢的问题。我真的不知道关于 php / mysql 的杰克。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T23:35:10.590

我认为他们应该是。

```
mysql_connect($db_host,$db_username,$db_pass) or die ("could not connect to mysql");
mysql_select_db($db_name) or die ("no database"); 
```

# ruby-on-rails - 用红宝石测量时间

> ID：13021483
> 
> 赞同：1
> 
> 时间：2012-10-22T23:32:11.783
> 
> 标签：ruby-on-rails, ruby

我需要测量 java 类的执行时间，当我使用脚本文件并从终端运行“ruby file.rb”时，它总是完美无缺，我总是在 10 秒左右得到值：

```
ini = Time.now
`java file.class`
fin = Time.now
puts "#{fin-ini}" 
```

但是当我在 rails 应用程序的控制器中执行完全相同的操作时，我总是得到类似 5.626041666666666e-10 的值

任何人都知道发生了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:57:18.337

> 大多数计算器和许多计算机程序都以科学计数法显示非常大和非常小的结果。因为像 107 这样的上标指数不能总是方便地显示，所以字母 E 或 e 通常用于表示乘以 10 的次方（写作“x 10b”），然后是指数的值。

来自：[http ://en.wikipedia.org/wiki/Scientific_notation#E_notation](http://en.wikipedia.org/wiki/Scientific_notation#E_notation)

`ini`初始化和初始化之间的时间非常短`fin`，您所看到的是两者之间的区别。

它的真正含义是 5.626041666666666×10^(-10) 或 0.0000000005626041666666666 秒或毫秒或任何您的度量单位。

如果您对四舍五入感兴趣，您可以随时`#{(fin - ini).to_i}`将其转换为整数 0。

# css - 仅在 Firefox 中的奇数 HTML 间距

> ID：13021486
> 
> 赞同：2
> 
> 时间：2012-10-22T23:32:23.233
> 
> 标签：css, firefox

在我正在模拟的[证明](http://zslabs.com/sample/cofc/)中，有一个随机空间强制水平滚动条，我找不到原因。奇怪的是，这只发生在 Firefox (16 - Mac + PC) 中。如果您加载该页面，您会在页面右侧（在“标题”区域）看到一条黑线。Firebug 在这里没有多大帮助，只有当我清除 main 的内容时才会消失`.container`。老实说，我在这里有点迷失，因为我从未见过 Firefox 给我带来麻烦。任何帮助将不胜感激。谢谢！

![截屏](../Images/4f6090bcc86272f4fcf0aeea21282712.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:59:29.410

styles.css（第 764 行）——删除`right: -25px;`它就会消失......希望它有帮助！

看起来它也不会明显影响任何东西。

# java - 如何编译java.class文件

> ID：13021493
> 
> 赞同：-1
> 
> 时间：2012-10-22T23:33:26.083
> 
> 标签：java, eclipse, compilation

假设我有一个文件 MainClass.class 我认为它包含以下代码

```
public class MainClass {
public static void main(String[] args) {

    App app = new App(5,17);
    app.Answer();

}
} 
```

基于 MainClass.class 我写了一个名为 App.java 的简单类，添加 2 个数字。

```
public class App {
private int num1;
private int num2;
private int sum;

public App(int n1, int n2){
    num1=n1;
    num2=n2;
}

public void Answer(){
    sum=num1+num2;
    System.out.println("The sum of "+num1+" and " +num2+" is : "+sum);
}

} 
```

我的问题是如果我不知道 MainClass.class 中的内容，我如何链接它们并查看它是否编译

我希望我的问题很清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:46:13.383

正如 Edwin Dalorzo 所说，我建议尝试反编译 .class。但是对于你正在做的事情。你会：

1.  编译 App.java “javac App.java”
2.  运行 MainClass.class “java MainClass”

那会做你想说的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:46:48.193

您应该有一个 MainClass.java 文件和一个 App.java 文件。您编译这 2 个文件并运行 MainClass.class 文件（您的驱动程序）。

.class 文件包含 Java 字节码。如果 2 个 .class 文件在同一个文件夹中，则它们应该被链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T23:39:28.243

只需重新编译 App.java 并尝试运行 MainClass。你不需要链接它。

# c++ - 使用 CPPUNIT_TEST_SUITE 宏时出错

> ID：13021498
> 
> 赞同：0
> 
> 时间：2012-10-22T23:33:58.303
> 
> 标签：c++, cppunit

在阅读了 CppUnit 食谱和大量谷歌搜索之后，我无法弄清楚我得到的特定错误的原因。

我有一个非常基本的 CppUnit testFixture 类 -> 我有一个文件 - MyTest.h，只有一个 TestFixture 类定义。

```
// MyTest.h
#include <cppunit/ui/text/TestRunner.h>
#include <cppunit/extensions/TestFactoryRegistry.h>
#include <cppunit/extensions/HelperMacros.h>

class MyTest : public CppUnit::TestFixture
{
     CPPUNIT_TEST_SUITE(MyTest);    // Line num 8
     CPPUNIT_TEST(TestFailure);
     CPPUNIT_TEST_SUITE_END();

  public:
    void TestFailure()
    {
        CPPUNIT_ASSERT(false);
    }
 }; 
```

此外，还有一个用于驱动这个 MyTest 类的 MyTest.cpp。

```
 // MyTest.cpp
 #include "MyTest.h" 
```

然后，一个名为 main.cpp 的文件将实例化 runner 并运行实际的测试用例。

```
 // main.cpp 

 #include <cppunit/ui/text/TestRunner.h>
 #include <cppunit/extensions/TestFactoryRegistry.h>
 #include <cppunit/extensions/HelperMacros.h>

 // In my main, I define a macro ADD_TEST and do #include of file called "testList.h"
 // So my testList.h can have any number of ADD_TEST macros.
 int main(int argc, char **argv)
 {
      CppUnit::TextUi::TestRunner runner;

      #define ADD_TEST(_testName) \
              runner.addTest(_testName::suite());
      #include testList.h"   
      #undef ADD_TEST

      runner.run();
      return true;
  } 
```

这是我的 testList.h ->

```
#pragma once
#include MyTest.h

ADD_TEST(MyTest) 
```

现在，这个文件结构可以工作了——就像在 Windows 设置中一样。在 linux 中，我得到以下奇怪的错误 -

```
MyTest.h: In function 'int main(int, char**)': MyTest.h:8: error: 'main(int, char**)::MyTest' uses local type 'main(int, char**)::MyTest' 
MyTest.h:8: error: trying to instantiate 'template<class Fixture> class CppUnit::TestSuiteBuilderContext'
MyTest.h: In static member function 'static void main(int, char**)::MyTest::addTestsToSuite(CppUnit::TestSuiteBuilderContextBase&)':
MyTest.h:8: error: cannot convert 'CppUnit::TestSuiteBuilderContextBase' to 'int' in initialization 
```

这让我完全糊涂了。我知道宏正在被拾取，因为如果我在 MyTest.h 中注释掉 Line num8，则会出现“套件”未声明的错误。但是然后是 CPPUNIT_TEST_SUITE 等宏可用，那么为什么会出错？我正在使用 -lstc++、-ldl 和 -lcppunit 标志进行编译。

任何帮助表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T21:00:03.993

我尚未确定您的具体问题，但我确实确定了您可能会考虑的一些问题。您的 ADD_TEST 似乎是一种非常手动的方式来处理 CppUnit 测试注册表旨在为您执行的操作。调用 CPPUNIT_TEST_SUITE(MyTest) 的原因；宏是将您的测试注册到框架中，以便您可以在运行时访问它们。

考虑一个看起来像这样的 main：

```
int main(int argc, char **argv)
{
    CppUnit::TextUi::TestRunner runner;
    CppUnit::Test *test = CppUnit::TestFactoryRegistry::getRegistry().makeTest();

    runner.addTest( test );
    runner.run();
    return true;
} 
```

如果您想花哨并为要运行的测试提供不同的选择，您可以通过将特定的测试名称作为参数传递给 getRegistry 来选择它们，如`getRegistry("MyTest").makeTest();` 显然，这可以很容易地由命令行或配置文件驱动，但是你想实施和控制它。

# javascript - 使用 Javascript 将 HTML5 沙盒属性添加到 iframe

> ID：13021500
> 
> 赞同：6
> 
> 时间：2012-10-22T23:34:08.350
> 
> 标签：javascript, html, iframe, sandbox

我有一个空的 iframe 和一个按钮：

`<input type="button" name="B1" value="google" onclick="frames['IFrameName1'].location.href='https://www.google.com/'">`

但是（除了.location.href）我需要设置属性`sandbox="allow-forms allow-scripts allow-same-origin`，因为框架站点“deframes”。如何设置位置和沙箱？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-09-15T18:48:48.737

虽然您可以将`iframe.sandbox`属性设置为字符串，但从技术上讲，它是一个[DOMTokenList](https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList)`add()`接口，因此您也可以使用`remove()`单个标记：

```
let myIframe = document.createElement('iframe');
myIframe.sandbox.add('allow-scripts');
myIframe.sandbox.toggle('allow-forms');

console.log(myIframe.sandbox.toString())
// Returns: "allow-scripts allow-forms"

console.log(myIframe.outerHTML)
// Returns: <iframe sandbox="allow-scripts allow-forms"></iframe> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T23:41:57.320

如果你想在一次点击事件上做两件事。有一个函数来做这两件事并在点击时触发该函数。

```
window.onload = function(){
    var button = document.getElementsByName("B1")[0]
    var iframe = document.getElementsByName("IFrameName1")[0]
    button.addEventListener('click',addSandboxAndChangeLocation,false);

    function addSandboxAndChangeLocation(){
       frames['IFrameName1'].location.href='https://www.google.com/';
       iframe.sandbox = 'allow-forms allow-scripts allow-same-origin';
    }
} 
```

在[jsFiddle](http://jsfiddle.net/adamzr/73j5m/)上查看！

# javascript - Javascript字符串比较器函数

> ID：13021504
> 
> 赞同：2
> 
> 时间：2012-10-22T23:34:35.987
> 
> 标签：javascript

我有一个简单的问题。我想写一个字符串比较器函数，它会返回一个数字来指示第一个字符串是小于、等于还是大于第二个。

显然最简单的解决方案是：

```
function compare (x, y){
  return x < y ? -1 : (x === y ? 0 : 1);
} 
```

但是，这不是一个非常有效的方法，因为字符串可能会被比较两次。另一方面，实现一个典型的教科书解决方案（迭代两个字符串并比较各个位置的字符）可能会更加低效，因为 Javascript 没有单个字符的概念 - 而是有 1 个字符串。

那么，是否有使用一些内置 Javascript 功能（也许是 ES5？）来有效实现此类功能的技巧，或者我们是否坚持上述代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:35:56.947

也许您应该检查[localeCompare](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/localeCompare)功能？这正是它的目的：比较字符串。)

# razor - 在 WebMatrix Webgrid 中显示文档链接 (href) 的条件

> ID：13021512
> 
> 赞同：1
> 
> 时间：2012-10-22T23:35:07.120
> 
> 标签：razor, conditional-statements, webmatrix, webgrid

当文档（路径）存在时，我想在 Webgrid 中显示“DOC”链接。

文档完整路径由通用路径（存储在设置表中的路径数据）和文档特定路径（存储在另一个表中的路径数据）构成。

以下将起作用，但没有条件，也没有构建路径！

```
meetingsGrid.Column("Agenda", format: @<a href="document full path">DOC</a>) 
```

这不起作用：

```
meetingsGrid.Column("Agenda", format: @<a href="generic path" + "document specific path">DOC</a>) 
```

试过这个：

```
meetingsGrid.Column("Agenda", format: @<a href="@Url.Action(Path.Combine(@genericpath,specificpath))">DOC</a>) 
```

我尝试添加一些条件，但即使使用完整路径，我也无法使其工作:-(

```
meetingsGrid.Column("Agenda", format: @if(meetingsData.AgendaPath!=null){@<a href="fullpath">DOC</a>)}else{@Html.Raw("")}

meetingsGrid.Column("Agenda", format: (item) => @Html.Raw((item.AgendaPath!=null) ? (@<a href="fullpath">DOC</a>) : "")) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:12:04.887

至少在 webMatrix 1.0（我还没有使用 2.0）中，您必须在格式参数中明确指出您想要发出 html。这是我的生产代码中的一个示例：

```
format: @<text><a href="/Dashboard/DealerInfo/@item.Dealer">@item.Dealer</a> </text> 
```

或者，如果您的变量可能为空，则使用您的变量：

```
format:  ( meetingsData.AgendaPath.AgendaPath == null ) ? @<text>""</text> : @<text><a href="/Dashboard/DealerInfo/@item.Dealer">@item.Dealer)</a> </text> 
```

哪个？运算符表示 if 之前的语句？为真，返回一个空字符串，否则返回你想要的 href。

# c# - 对 cmd 字符串使用 C# 变量

> ID：13021513
> 
> 赞同：1
> 
> 时间：2012-10-22T23:35:07.737
> 
> 标签：c#, variables, cmd

我有一个 C# 脚本，我想使用我在 cmd 命令中声明的一些变量：

```
using System;
using System.Diagnostics;

namespace UserMake
{
    class Program
    {
        static void Main(string[] args)
        {
            string userName;
            string passWord;

            Console.WriteLine("Enter a username:");
            userName = Console.ReadLine();
            Console.WriteLine("Enter a password:");
            passWord = Console.ReadLine();
            Process.Start("cmd","net user userName passWord /add");
        } 
    }
} 
```

我不知道如何让“userName”和“passWord”读取为变量集，而不是让一个名为“userName”的用户使用密码“passWord”。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:37:26.240

使用[字符串连接](http://msdn.microsoft.com/en-us/library/ms228504.aspx)：

```
Process.Start("cmd","net user" +  userName + " " + passWord + " /add"); 
```

或者，您可以使用[`string.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)：

```
Process.Start(string.Format("net user {0} {1} /add", userName, passWord)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T23:38:00.850

您应该将变量值连接到作为参数传递给 Process.Start 方法的字符串中

```
Process.Start("cmd","net user " + userName + " " + passWord  + " /add"); 
```

但是，您所写的命令不起作用。正确的命令应该是

```
Process.Start("cmd","/C net user " + userName + " " + passWord  + " /add"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T23:38:35.833

除了连接字符串之外，您还可以使用**[`String.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)**

```
Process.Start("cmd", string.Format("net user {0} {1} /add", userName, passWord); 
```

# database - Postgres：连接到服务器时出错“尝试对不是套接字的东西进行操作。”

> ID：13021516
> 
> 赞同：1
> 
> 时间：2012-10-22T23:35:26.400
> 
> 标签：database, localhost, postgresql-9.2

我正在使用 Windows，试图让我的数据库正常工作，这样我就可以在我的本地主机上创建一个超级用户。

我成功安装了 Postgres 9.2.1，但是当我尝试连接到服务器时，我得到：

```
Error connecting to the server: server closed the connection unexpectedly
This probably means the server terminated abnormally before or while processing the request. 
```

在错误日志中：

```
PDT LOG:  incomplete startup packet
PDT WARNING:  pgstat wait timeout
LOG:  could not receive data from client: An operation was attempted on something that is not a socket. 
```

我完全卸载了我的防病毒软件并确保 Windows 防火墙已关闭。

我的服务器属性是默认的，并且 postgresql.conf 匹配它们：

```
Hostname: localhost
Port: 5432 
```

我很难过如何调试这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:34:44.303

根据 Microsoft 的说法，即使您已经卸载了 AV，您也可能需要使用[KB299357](http://support.microsoft.com/kb/299357)中的信息重置 TCP/IP 配置。

文章告诉你运行命令

```
netsh int ip reset resetlog.txt 
```

这将重置两个注册表项的值

```
SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\ 
SYSTEM\CurrentControlSet\Services\DHCP\Parameters\ 
```

# arrays - 计算数组索引

> ID：13021518
> 
> 赞同：1
> 
> 时间：2012-10-22T23:35:31.810
> 
> 标签：arrays, indexing, counting

如果我有一个数字数组，例如 [5, 2, 3, 2, 0, 2]

我想计算我可以连续索引数组的次数，直到我们到达我们已经访问过的索引，如下所示：

```
A[0] = 5 
A[5] = 2
A[2] = 3
A[3] = 2 stop here because we already indexed 2. 
```

所以我的问题是：不使用额外的数据结构来存储以前访问过的索引，有没有办法告诉我的程序何时停止索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:47:50.347

您似乎将此数组视为有向图。如果是这样，那么您真正需要的是如何检测有向图中的循环。

看：

*   [在有向图中检测循环的最佳算法](https://stackoverflow.com/questions/261573/best-algorithm-for-detecting-cycles-in-a-directed-graph)
*   [给定源顶点，在有向图中查找所有带环的路径](https://stackoverflow.com/questions/8885647/find-all-paths-with-cycles-in-directed-graph-given-the-source-vertex)
*   [如何检测有向图是否是循环的？](https://stackoverflow.com/questions/2525282/how-to-detect-if-a-directed-graph-is-cyclic)

不过，要具体回答您的问题：如果您在迷宫中四处游荡，如何判断您以前是否去过特定的路口？您可能会考虑放弃面包屑或取消线程以提醒您去过哪里。这里也是一样。您需要使用“已访问”标志来注释原始数组，或者将您访问过的索引的副本保留在您自己的数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:46:49.090

如果您开始时将数组元素初始化为无效值，例如 -1，那么如果已经分配了数组元素，则可以停止，如下面的伪代码所示：

```
if (A[x] == -1)
    A[x] = y
else
    stop 
```

# ios - 如何在仅纵向应用程序中使用 MPMovieViewController 播放横向视频

> ID：13021520
> 
> 赞同：6
> 
> 时间：2012-10-22T23:35:42.117
> 
> 标签：ios, mpmovieplayercontroller, uiinterfaceorientation

我的应用支持的界面方向是纵向和倒置。但是，当播放视频时，我希望它播放全屏横向。目前使用此代码，即使设备旋转，它也只能播放纵向：

```
[player.moviePlayer setControlStyle:MPMovieControlStyleFullscreen];
player.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
[self presentMoviePlayerViewControllerAnimated:player]; 
```

如何强制它进入横向模式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T00:11:57.943

我是这样做的：
在项目文件中，确保您支持横向方向 ![支持的界面方向](../Images/4f33488e38ff675dcc42b07e300fb78f.png)
现在在所有仍应为纵向的 ViewControllers 中，添加此代码

```
//ios6
- (BOOL)shouldAutorotate {
    return NO;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
}
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

//ios4 and ios5
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

我已经同时调用了 iOS5 和 iOS6，以便我的代码可以在两者上运行。

当您的 MPMoviePlayerController 视图变为全屏时，它将是一个新的 ViewController，位于其他所有视图之上。因此，将允许根据项目支持的界面方向旋转。它不会看到你在哪里强制其他 ViewControllers 进入 Portrait。

# java - 让程序在自身内部循环

> ID：13021521
> 
> 赞同：1
> 
> 时间：2012-10-22T23:35:43.343
> 
> 标签：java, loops, for-loop, while-loop

我需要帮助让该程序在第一次运行后在其自身中循环。它询问用户是否要编码、解码或退出。程序运行，它像它应该的那样编码/解码。我现在需要让另一个窗格弹出并询问他们的用户是否想要编写另一个输入，然后循环遍历它第一次运行的所有内容。我有一个窗格，它询问用户是否要再次运行但无法让它循环通过编码器。

```
public void encoding()
{
    int userChoice;
    int i;
    int p=1;
    int counter=0;
    counter++;
    String fin = "";

    String input = JOptionPane.showInputDialog("Want to ENCODE, DECODE or EXIT? Press 
    1, 2, or 3");
    userChoice = Integer.parseInt(input);    

    if (userChoice == 1 )
            {
                String encode = JOptionPane.showInputDialog(null, "What Are We 
                Encoding? ");

                char[] array = encode.toCharArray();      

                for(i=0; i <array.length; i++)
                    {                            
                        char Ecode = encode.charAt(i);
                        Ecode--;
                        Ecode--;
                        fin += Character.toString(Ecode);

                    }         

                JOptionPane.showMessageDialog(null, fin);
            }       

        else if (userChoice == 2)
            {
                    String decode =JOptionPane.showInputDialog(null, "What Are We 
                    Decoding? ");

                    char[] array1 = decode.toCharArray();

                    for(i=0; i < array1.length; i++)
                    {              
                        char Dcode = decode.charAt(i);
                        Dcode++;
                        Dcode++; 
                        fin += Character.toString(Dcode);
                    }

                JOptionPane.showMessageDialog(null,fin);

                    String again = JOptionPane.showInputDialog("Want to code another?
                    Press 1 or 2");

                    int aChoice = Integer.parseInt(again);

                    if (aChoice==1)
                        { 
                            System.out.print("bob"); 
                        }

                    else 
                        {
                            JOptionPane.showMessageDialog(null, "Good Bye");
                            System.exit(0);
                        }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:41:17.383

包装你的代码开始`int i;` 并包含`if-else block`在一个`do-while`循环中：

```
 do{
         int i;
         int p=1;
         .....
         .....
      }while(userChoice != 3); 
```

请注意：这不会让您退出，直到您输入`3`.

当用户输入 1,2 或 3 以外的任何内容时，您可能需要添加另一个块来处理条件。

或者，您可以这样做：

```
 do{
         String input = JOptionPane.showInputDialog...
         .....
         .....
       }while(userChoice == 1 || userChoice == 2); 
```

这将退出除 1 或 2 之外的任何选择的循环。

编辑：请在下面找到固定代码：

```
public void encoding(){
    int userChoice, i;
    do{
        String fin = "";
        String input = JOptionPane
            .showInputDialog("Want to ENCODE, DECODE or EXIT? Press 1, 2, or 3");
        userChoice = Integer.parseInt(input);    

        if (userChoice == 1 ){
        String encode = JOptionPane.showInputDialog(null, "What Are We Encoding?");
        char[] array = encode.toCharArray();      
        for(i=0; i <array.length; i++){                            
        char Ecode = encode.charAt(i);
        Ecode--;
        Ecode--;
        fin += Character.toString(Ecode);
        }         
        JOptionPane.showMessageDialog(null, fin);
    } else if (userChoice == 2) {
        String decode =JOptionPane.showInputDialog(null, "What Are We Dencoding?");
            char[] array1 = decode.toCharArray();
            for(i=0; i < array1.length; i++){              
       char Dcode = decode.charAt(i);
       Dcode++;
       Dcode++; 
       fin += Character.toString(Dcode);
    }
    JOptionPane.showMessageDialog(null, fin);
     }
    }while(userChoice != 3);
    JOptionPane.showMessageDialog(null, "Good Bye");
    System.exit(0);
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:41:27.243

您可以将`JOptionPane`输入 + 完整的相应`if`块包含在一个`while`循环中：

```
int userChoice = 0;
while (userChoice != 3) {

  int i;
  int p=1;
  // the rest of the params here

   String input = JOptionPane.showInputDialog(...)
   ...
} 
```

# python - 右对齐此列

> ID：13021523
> 
> 赞同：0
> 
> 时间：2012-10-22T23:35:52.460
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中右对齐文本？](https://stackoverflow.com/questions/1402048/how-do-i-right-align-my-text-in-python)

```
4   8   12   16   
20   24   28   32   
36   40   44   48   
52   56   60   64   
68   72   76   80   
84   88   92   96   
100   104   108   112   
116   120   124   128   
132   136   140   144   
148   152   156   160 
```

现在我有一个这样的专栏。有人可以帮我弄清楚如何正确对齐列，使其看起来像这样：

```
 4     8    12    16   
 20    24    28    32   
 36    40    44    48   
 52    56    60    64   
 68    72    76    80   
 84    88    92    96   
100   104   108   112   
116   120   124   128   
132   136   140   144   
148   152   156   160 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T23:39:01.953

```
>>> for line in data:
...     print '   '.join('{:>3}'.format(i) for i in line.split())
...
  4     8    12    16
 20    24    28    32
 36    40    44    48
 52    56    60    64
 68    72    76    80
 84    88    92    96
100   104   108   112
116   120   124   128
132   136   140   144
148   152   156   160 
```

请参阅有关[格式化字符串语法](http://docs.python.org/library/string.html#format-string-syntax)的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:55:31.290

除了字符串格式化之外，还有一个用于字符串的内置函数`str.rjust`：

```
for line in data.splitlines():
    print ' '.join(el.rjust(5) for el in line.split()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:40:51.167

```
cell_width = 6

for row in data:
    #"%-6s"%val will right format 6  spaces
    print ("%-"+cell_width+"s ")*len(row) % row 
```

无论如何，类似的东西......我应该注意 % 字符串格式被认为是折旧的......

# ios - 如何创建以暂停状态启动的 GLKViewController？

> ID：13021527
> 
> 赞同：4
> 
> 时间：2012-10-22T23:36:11.663
> 
> 标签：ios, glkit

我创建一个`GLKViewController`这样的：

```
// Create a GLK View Controller to handle animation timings
_glkVC = [[GLKViewController alloc] initWithNibName:nil bundle:nil];
_glkVC.preferredFramesPerSecond = 60;
_glkVC.view = self.glkView;
_glkVC.delegate = self;
_glkVC.paused = YES;
NSLog(@"initial state: %@", _glkVC.paused ? @"paused" : @"running"); 
```

但它立即开始调用委托更新方法，`NSLog`上面的输出是：`initial state: running`

我正在管理我的视图更新，`setNeedsDisplay`但我希望`GLKViewController`不时处理动画，所以我只想在需要时取消暂停它。有没有办法在暂停状态下启动控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T04:01:12.427

您是否尝试过暂停 viewDidAppear 方法而不是 viewDidLoad 方法？它应该看起来像这样：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];    
    // self.paused automatically set to NO in super's implementation
    self.paused = YES;
} 
```

轰隆隆，搞定！如果这可行，那么您每分钟保存数千次“if”检查，只是为了在启动时暂停！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-02T17:04:54.300

viewDidAppear 方法对我有用，但不是最佳的。在暂停生效之前会出现几帧可见动画。使用 viewWillAppear 效果更好：

```
- (void) viewWillAppear: (BOOL) animated
{
  [ super viewDidAppear: animated ];
  self.paused = YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T11:34:16.350

代替任何答案，我正在使用此解决方法：

我`.preferredFramesPerSecond = 1`最初设置，然后在更新方法中检查`if(preferredFramesPerSecond == 1)`并设置`.paused = YES`（并且还设置了我真正想要的值`preferredFramesPerSecond`）。然后我可以让更新方法的其余部分在初始化后运行一次，或者如果我不希望它运行则立即返回。

然后，我根据需要手动触发重绘，`setNeedsDisplay`并在需要动画时取消暂停。

如果有人有更好的解决方案，请照常回答。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-12T08:28:57.677

您是否尝试过覆盖`resumeOnDidBecomeActive`以返回**NO**？这应该使动画在任何激活时暂停，包括第一次。

# mysql - MySQL 选择不同的日期时间。无法弄清楚这个查询

> ID：13021528
> 
> 赞同：1
> 
> 时间：2012-10-22T23:36:18.553
> 
> 标签：mysql, distinct

我的用户回答了两个不同的问题，它们分别作为一行添加到我的 answers_table 中。我试图计算有多少用户回答了我的问题，这起初看起来很简单。计数（*）并除以 2。是的！但是：用户可以随时添加新问题，所以突然可能有三个问题，所有答案/3 变成不正确的用户数，如果有一段时间有两个问题然后三个问题，例如！

任何人都可以找出这样做的查询吗？到目前为止我有

```
SELECT COUNT(DISTINCT date) as totNum FROM login_answers 
```

但这并不需要考虑时间。这意味着我只得到了那天的答案总数，不知道那天有多少问题可用。

这是我的桌子：

qid 是 QuestionID，所以我想从某个地方开始？

```
id      qid answer  date                deviceID
1502    2   2       2012-10-19 08:42:41 7
1503    1   3       2012-10-19 08:51:53 7
1504    2   2       2012-10-19 08:51:53 7
1505    1   4       2012-10-19 09:05:23 7
1506    2   2       2012-10-19 09:05:23 7
1507    1   4       2012-10-19 09:40:59 7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:43:45.823

我提出的解决方案是存储一个会话 ID 或一些自动生成的密钥，以唯一地识别来自一个人的 2、3 个或更多答案的“会话”。

查询将只是

```
SELECT COUNT(DISTINCT session_id) totNum
FROM login_answers 
```

使用没有可识别密钥的当前架构，如果可能的话，很难正确回答您的问题。

# php - 使用相同 AJAX 调用但结果不同的多个表单？

> ID：13021530
> 
> 赞同：0
> 
> 时间：2012-10-22T23:36:26.470
> 
> 标签：php, ajax, jquery

如果我有许多由 PHP 生成的表单并且想要在每个表单上都有一个“回复”按钮，它通过 ajax 将表单的内容发送到另一个 php 页面，那么我可以对所有这些元素使用相同的 javascript 片段吗？

```
<form id="foo">
    <label for="bar">A bar</label>
    <input id="bar" name="bar" type="text" value="" />
    <input type="submit" value="Reply" />
</form> 
```

因此，如果我执行以下操作，那么我仍然可以单独处理所有响应并仅在单击“回复”的元素上显示响应吗？

```
$("#foo").submit(function(event){
    $.ajax({
        url: "/form.php",
        type: "post",
        data: serializedData,
        // callback handler that will be called on success
        success: function(response, textStatus, jqXHR){
            // log a message to the console
            console.log("Hooray, it worked only in the element it was clicked in!");
        });
    // prevent default posting of form
    event.preventDefault();
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:48:17.960

如果您想处理页面上的所有表单，您的代码只需稍作改动即可工作。

```
$("form").submit(function(event){
    $.ajax({
        url: "/form.php",
        type: "post",
        // You have to have a way to retrieve the form data
        data: getFormData(form),
        success: function(response, textStatus, jqXHR){
            console.log("Hooray, it worked only in the element it was clicked in!");
        });
    // prevent default posting of form or just return false
    event.preventDefault();
 }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T23:40:30.410

不，提交表单有多种方式。您可能希望将第一行更改为：

`$("#replybutton").click(function(event){`

然后，您必须将该回复按钮 ID 添加到您的按钮，并且您必须明确列出 ajax 调用中的数据元素。此外，这`event.preventDefault()`将是不必要的。想想看，整个`<form>`标签也是不必要的。

使用表单还有其他方法可以做到这一点，但这是最简单的。

# .htaccess - .htaccess 限制机器人活动

> ID：13021531
> 
> 赞同：1
> 
> 时间：2012-10-22T23:36:36.973
> 
> 标签：.htaccess, bots

我有一个机器人试图通过输入关键字或密码来访问我的网站。这些条目来自数十个不同的 IP 和位置，因此我无法通过 IP、位置或引用者进行阻止。

机器人尝试访问这样的页面：

[http://www.website.com/valid-page/?kwd=du2c3m](http://www.website.com/valid-page/?kwd=du2c3m)

始终采用这种格式，并且“有效页面”始终是同一页面。我每天要进行多达 400 次这样的尝试，并且已经进行了一个多星期。

我的问题是，如何使用 .htaccess 来阻止这些尝试？我敢肯定它相对简单——比如阻止所有“？kwd”网址或阻止“有效页面”的所有子目录

有什么想法吗？对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:47:54.280

这些机器人正在做哪些浏览您网站的普通人没有做的独特之处？如果这是用户代理的问题（应该在您的访问日志中），则阻止该用户代理：

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} the_bot_useragent
RewriteRule ^ - [L,F] 
```

如果这是奇怪的查询字符串的问题，则阻止该查询字符串：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} kwd=
RewriteRule ^ - [L,F] 
```

如果是来自 IP 或子网的所有机器人的问题：

```
Deny 123.45.67
# or
Deny 123.123.123.123 
```

# php - 如何在 Wamp 服务器中启用 curl

> ID：13021536
> 
> 赞同：34
> 
> 时间：2012-10-22T23:37:12.733
> 
> 标签：php, curl, wamp

我尝试了 30 种答案和论坛主题的组合，但没有找到正确的答案。

除了我需要如何启用 curl int wamp 服务器之外，我什么都做？

有什么解决办法吗？我尝试取消注释 - 不工作？我尝试检查 wamp 任务栏图标 - php 扩展 - php_curl 我尝试将 php_curl.dll 复制到 win sistem

不行

我需要做什么？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-06T18:31:40.700

The steps are as follows :

1.  Close WAMP (if running)
2.  Navigate to `WAMP\bin\php\(your version of php)\`
3.  Edit `php.ini`
4.  Search for curl, uncomment `extension=php_curl.dll`
5.  Navigate to `WAMP\bin\Apache\(your version of apache)\bin\`
6.  Edit `php.ini`
7.  Search for curl, uncomment `extension=php_curl.dll`
8.  Save both
9.  Restart WAMP

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-07-15T10:20:25.210

我遇到了同样的问题，这为我解决了。也许这也可以解决您的问题。

这是修复。按照此链接 [http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)

转到“固定 curl 扩展”并下载与您的 PHP 版本匹配的扩展。

将“php_curl.dll”提取并复制到您的 wamp 安装的扩展目录中。(即C:\wamp\bin\php\php5.3.13\ext)

重启阿帕奇

完毕！

参考： http: [//blog.nterms.com/2012/07/php-curl-issues-with-wamp-server-on.html](http://blog.nterms.com/2012/07/php-curl-issues-with-wamp-server-on.html)

干杯!

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-07-06T12:01:32.390

左键单击系统尝试的 WAMP 图标 -> PHP -> PHP Extensions -> 启用 php_curl

# magento - W3C 标记验证服务显示没有 DOCTYPE

> ID：13021537
> 
> 赞同：0
> 
> 时间：2012-10-22T23:37:18.787
> 
> 标签：magento, doctype, w3c-validation

为什么[W3C](http://validator.w3.org/)告诉我没有为我的页面（特别是[主页](https://www.goorin.com/)）设置文档类型？我[的主页](https://www.goorin.com/)使用的是 1column.phtml，它具有有效的 doctype（见下文），您可以在浏览器中查看源代码时看到它。w3c 标记验证服务告诉我没有设置文档类型，为什么？！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
```

我们的开发站点显示了一个有效的文档类型。我什至尝试从那里获取 1column.phtml （根）模板并替换实时模板，但仍然没有。我完全不知道问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:53:53.347

发送给验证器的主页的前 8 行在 doctype 之前，并说：

* * *

**严格标准**：Aitoc_Aitpagecache_Mobile_Detect::__construct() [aitoc-aitpagecache-mobile-detect.--construct]：依赖系统的时区设置是不安全的。请使用 date.timezone 设置、TZ 环境变量或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。**我们在第42**行的**/home/goorins/public_html/lib/Aitpagecache/Mobile/Detect.php**中为 'EDT/-4.0/DST' 选择了 'America/New_York'**注意**：未定义索引：**/home/goorins/public_html中的 HTTP_ACCEPT** **/lib/Aitpagecache/Mobile/Detect.php**第**42行****严格标准** **********: setcookie() [function.setcookie]: 依赖系统的时区设置是不安全的。请使用 date.timezone 设置、TZ 环境变量或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。**我们在第172**行的**/home/goorins/public_html/lib/Aitpagecache/Mainpage.php**中为 'EDT/-4.0/DST' 选择了 'America/New_York'**警告**：无法修改标头信息 - 标头已发送（输出开始于/home/goorins/public_html/lib/Aitpagecache/Mobile/Detect.php:42）在**/home/goorins/public_html/lib/Aitpagecache/Mainpage.php**第**172行************

 ******* * *

这似乎来自 AITOC magento 插件。对我来说意义不大（PHP/apache/magento 不是我的事），但看起来 Mobile/Detect.php 第 42 行假定将有一个 HTTP“接受”标头要处理。HTML 验证器不会发送 HTTP“接受”标头，因此会发生错误，该错误会在输出页面的顶部报告。可能是因为它正在报告错误，它还报告有关时区设置错误配置的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:10:58.520

如果没有深入的调试会话，很难肯定地说，但我的猜测是缺少任何字符编码与您的浏览器标头一起发回。

```
$ curl -I https://www.goorin.com/
HTTP/1.1 200 OK
Date: Tue, 23 Oct 2012 01:04:50 GMT
Server: LiteSpeed
Connection: close
Set-Cookie: frontend=7dcc17b985ecd8983ff6ade10e0f6f2c; expires=Tue, 23-Oct-2012 02:04:50 GMT; path=/; domain=..www.goorin.com; httponly
Set-Cookie: frontend=7dcc17b985ecd8983ff6ade10e0f6f2c; expires=Tue, 23-Oct-2012 02:04:50 GMT; path=/; domain=..www.goorin.com; httponly
Content-Type: text/html 
```

这会以某种方式导致字符编码被破坏，并且验证器不再识别它。

尝试使用 curl 下载您的主页

```
curl -I https://www.goorin.com/ > home.html 
```

然后使用 W3C 文件上传验证服务（“通过文件上传验证”选项卡）。当我这样做时，验证器停止抱怨你的`DOCTYPE`.

因此，即使您的标头中没有缺少字符编码，这也表明存在将 HTML 文档从您的服务器传送到验证器服务的问题。******

# jquery - jQuery自定义插件未定义js函数

> ID：13021541
> 
> 赞同：1
> 
> 时间：2012-10-22T23:37:48.790
> 
> 标签：jquery, plugins

不知道我做错了什么。我的自定义 jQuery 插件中有一个函数，我的浏览器告诉我它是未定义的。

谁能看到我在里面做错了什么：

```
(function($){

  $.fn.myCustomPlugin = function( ) {

    return this.each(function() {

        var theValue = $(this).text().trim().replace(/ /g,'');

        // STOP if theValue return nothing
        if (theValue === null || theValue === undefined || theValue == ""){ 
            $(this).html("nothing inside the span"); 
            return true; 
        }

        function clickActions()
        {
            alert("This alert shows when clicking on the element");     
            return false;
        }

        $(this).html('<a href="javascript:void(0);" onClick="clickActions()">'+theValue+'</a>');

    }); // eof .each

  };
})(jQuery); 
```

Html 是 span 内的简单电话号码：

```
<span class="formatme">123-8749674</span><br />
<span class="formatme">123-8749674</span><br />
<span class="formatme">123-8749674</span><br />
<span class="formatme">123-8749674</span><br />
<span class="formatme">123-8749674</span><br />

<script type="text/javascript"> 
$(document).ready(function() {
    $('.formatme').myCustomPlugin();
});
</script> 
```

函数 clickActions() 可能只是在错误的位置，但我已经将它移动到插件代码周围，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:43:28.887

你需要这样声明你的功能：

```
window.clickActions = function(){
    alert("This alert shows when clicking on the element");     
    return false;
} 
```

...如果要在您当前尝试访问它时具有全局范围，请在`onclick`处理程序中。

也就是说，作为最佳实践，我建议提供一个对象并将其范围限定在该对象内，以防止污染全局命名空间。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:58:53.657

你可以简单地使用

```
$(this).text(theValue).on('click', function(e){
    alert("This alert shows when clicking on the element");     
    return false;
}); 
```

也跟随线

```
var theValue = $(this).text().trim().replace(/ /g,''); 
```

应该`$.trim()`

```
var theValue = $.trim($(this).text()).replace(/ /g,''); 
```

[**工作示例在这里**](http://jsfiddle.net/SZPY4/1/)。

# php - 在页面加载时加载 php 表单搜索结果

> ID：13021542
> 
> 赞同：3
> 
> 时间：2012-10-22T23:37:58.757
> 
> 标签：php, forms

我有一个简单的 php 表单，它允许用户从主题区域的下拉列表中进行选择以返回一组数据库（例如[http://library.wabash.edu/biology.php](http://library.wabash.edu/biology.php)）。如您所见，在做出选择并单击提交之前，不会返回任何内容。是否有可能在页面加载时已经加载了一组数据库（生物学数据库将在生物学部门页面上加载等），但还允许用户做出另一个选择，就像我现在所做的那样？我的经验不足在这里显示，所以提前道歉。

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
   <select name="choice" id="choice">
      <option value="Biology">Biology</option>
      <option value="Chemistry">Chemistry</option>
      <option value="Computer Science">Computer Science</option>
      <option value="Mathematics">Mathematics</option>
      <option value="Medicine">Medicine</option>
      <option value="Physics">Physics</option>
</select>

   <input type="submit" name="submit" value="Go" style="margin-left: 10px">
   <input type="submit" name="reset" value="Clear" style="margin-left: 10px">
   <input type="hidden" name="submitted" value="true"/>
</form>

<?php
if(isset($_POST['submit']))   {

   $choice=$_POST['choice'];

   $localhost="localhost";
   $username="xxxxxxx";
   $password="xxxxxxx";
   $database="xxxxxxx";

   $linkid=mysql_connect($localhost,$username,$password);  
   @mysql_select_db($database) or die( "Unable to select database");

   mysql_select_db("databases",$linkid);
   $resultid=mysql_query("SELECT  name, mobile, app, tutorial, help
                          FROM databaselist
                          WHERE dept
                          LIKE '%{$choice}%'
                          ORDER BY sortname ASC", $linkid);

   echo"<table>";
   while ($row = mysql_fetch_row($resultid))
      {
         echo"<tr>";
         foreach ($row as $field)
            {
               echo"<td>$field</td>";
            }
         echo"</tr>";
      }
   echo"</table>";
   mysql_close($linkid);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:49:47.543

正如你现在所拥有的，如果你不打算使用 javascript，你可以做一件事：

1-删除$_POST['submit']的验证，你可以只检查$choice=$_POST['choice']变量。2-将选择变量从 $_POST 数组更改为 $_GET 数组，这样您就可以构建类似的链接。--> mypage.com/index.php?choice=生物学。有了这个，您将能够填写生物学页面上的列表，也可以让用户选择任何其他选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:03:39.597

从您的问题来看，您似乎只想要一个预先加载的资源列表来在访问者首次登陆时填充页面（也许只是为了填充空间？）。作为一个基本的 PHP 解决方案，只需在页面顶部运行一个初始查询，仅限于例如前 100* 个按字母顺序排列的记录，然后在表单下方的表格中回显它们。

不要忘记将初始查询包装在 if 语句中，例如：

```
if(!ISSET($_POST)) {
    //run query
} 
```

*（如果您对结果进行分页，显然您不需要 100 - 只需填充第一个屏幕即可。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:51:36.497

如果您愿意，您可以预加载不同主题的所有数据并将其保存到 Javascript 变量中，以便访问它们只需等待`SELECT`更改事件触发。

或者您可以使用 Ajax 加载相关的主题变量。相同的方式只是它是服务器端代码提供数据而不是存储的 Javascript 变量中的数据。

# c# - 从 C# 错误调用的 PowerShell cmdlet Install-WindowsFeature 并且未在命令集合中列出

> ID：13021547
> 
> 赞同：4
> 
> 时间：2012-10-22T23:38:34.827
> 
> 标签：c#, powershell, visual-studio-2012, windows-server-2012

我正在尝试通过 PowerShell 和 C# 在 Windows Server 2012 系统上安装新功能。尝试调用`Install-WindowsFeature`cmdlet 时出现此错误：

> 术语“Install-WindowsFeature”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称...

我可以通过 C# 甚至其他一些新的 cmdlet 调用其他 cmdlet。我做了一个`Get-Command`and `Install-WindowsFeature`, `Remove-WindowsFeature`, and`Get-WindowsFeatures`没有列出...但是其他大约 980 个是。

为什么我不能从我的 C# 程序调用这个 cmdlet，但是当我转到 PowerShell 时它调用它就好了？

```
runspace = RunspaceFactory.CreateRunspace();
runspace.Open();

Pipeline pipeline = runspace.CreatePipeline();
pipeline.Commands.AddScript("Install-WindowsFeature");
Collection<PSObject> output = pipeline.Invoke(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:31:20.837

在您的代码中尝试此命令而不是 Install-WindowsFeature：

> 调用表达式“Powershell -Command {Import-Module ServerManager ; Install-WindowsFeature XXXX}”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T22:20:02.570

尝试在 x64 中编译。在 Visual Studio 中，转到菜单*项目*→*属性*→*构建 - 平台目标*= x64。

# python - 从要索引的文本文件中返回项目列表

> ID：13021549
> 
> 赞同：1
> 
> 时间：2012-10-22T23:38:38.423
> 
> 标签：python, list, indexing

我正在尝试编写一个从文本文件返回城市列表的函数，以便在调用该函数时，您可以在其后放置一个索引，它将返回相应的城市。

例子：

```
citylist('MYFILE.txt')[3] 
```

到目前为止，我有

```
def citylist(filename):
    assert type(filename)==str

    with open(filename) as FileObject:
        for line in FileObject:
            q=line.split('\t')
            print q[12], 
```

有500个投诉。在我将每个字符串（投诉）拆分为一个列表后，城市名称是列表中的第 13 个索引。但是我被困住了，因为我所能做的就是将所有城市名称打印为无法索引的非数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:43:22.297

您可以创建一个列表并返回它：

```
def citylist(filename):
  assert type(filename)==str  #isinstance(filename,str) is more idiomatic here.

  output = []
  with open(filename) as FileObject:
    for line in FileObject:
      q = line.split('\t')
      output.append(q[12]) 
  return output 
```

或者，更简洁：

```
def citylist(filename):
    with open(filename) as f:
        return [ line.split('\t')[12] for line in f ] 
```

在最后一个示例中，我使用[列表理解构建了列表。](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:43:47.493

```
def citylist(filename):
  assert isinstance(filename, str)
  return [line.split('\t')[12] for line in open(filename)] 
```

列表推导等效于以下扩展`for`循环：

```
result = []
for line in open(filename):
  result.append(line.split('\t')[12]) 
```

# r - R中的图像图太大

> ID：13021557
> 
> 赞同：1
> 
> 时间：2012-10-22T23:39:44.513
> 
> 标签：r, image, matrix, plot

我有一个 65,000 x 160 的矩阵，然后我使用 R 中的 image(X) 将其转换为图像。

我还使用选项 useRaster = TRUE，这使得绘图速度更快，文件也更小。

但是，文件大小仍然相当大〜 60 Mb。无论如何可以控制R中图像的文件大小？如果是这样，我很想听听如何以及通过限制文件大小会损失多少分辨率。

该文件创建为 pdf 文件，代码如下：

```
# ----- Define a function for plotting a matrix ----- #
myImagePlot <- function(x, filename, ...){
  dev = "pdf"
  #filename = '/home/dnaiel/test.pdf'
  if(dev == "pdf") { pdf(filename, version = "1.4") } else{}
     min <- min(x)
     max <- max(x)
     yLabels <- rownames(x)
     xLabels <- colnames(x)
     title <-c()
  # check for additional function arguments
  if( length(list(...)) ){
    Lst <- list(...)
    if( !is.null(Lst$zlim) ){
       min <- Lst$zlim[1]
       max <- Lst$zlim[2]
    }
    if( !is.null(Lst$yLabels) ){
       yLabels <- c(Lst$yLabels)
    }
    if( !is.null(Lst$xLabels) ){
       xLabels <- c(Lst$xLabels)
    }
    if( !is.null(Lst$title) ){
       title <- Lst$title
    }
  }
# check for null values
if( is.null(xLabels) ){
   xLabels <- c(1:ncol(x))
}
if( is.null(yLabels) ){
   yLabels <- c(1:nrow(x))
}

layout(matrix(data=c(1,2), nrow=1, ncol=2), widths=c(4,1), heights=c(1,1))

 # Red and green range from 0 to 1 while Blue ranges from 1 to 0
 ColorRamp <- rgb( seq(0,1,length=256),  # Red
                   seq(0,1,length=256),  # Green
                   seq(1,0,length=256))  # Blue
 ColorLevels <- seq(min, max, length=length(ColorRamp))

 # Reverse Y axis
 reverse <- nrow(x) : 1
 yLabels <- yLabels[reverse]
 x <- x[reverse,]

 # Data Map
 par(mar = c(3,5,2.5,2))
 image(1:length(xLabels), 1:length(yLabels), t(x), col=ColorRamp, xlab="",
 ylab="", axes=FALSE, zlim=c(min,max), useRaster=TRUE)
 if( !is.null(title) ){
    title(main=title)
 }
# Here we define the axis, left of the plot, clustering trees....
#axis(BELOW<-1, at=1:length(xLabels), labels=xLabels, cex.axis=0.7)
# axis(LEFT <-2, at=1:length(yLabels), labels=yLabels, las= HORIZONTAL<-1,
# cex.axis=0.7)

 # Color Scale (right side of the image plot)
 par(mar = c(3,2.5,2.5,2))
 image(1, ColorLevels,
      matrix(data=ColorLevels, ncol=length(ColorLevels),nrow=1),
      col=ColorRamp,
      xlab="",ylab="",
      xaxt="n", useRaster=TRUE)

 layout(1)
  if( dev == "pdf") {
    dev.off() }
}
# ----- END plot function ----- # 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T02:32:27.460

当我创建这样的矩阵并`image`在`jpeg`调用中使用该设备的默认大小进行绘图时，我得到一个以 KB (90KB) 为单位的文件。

```
> bigm <-matrix(sample(1:8, 65000*160, repl=TRUE),  160, 65000)
> jpeg(filename="test.jpg")
> image(bigm)
> dev.off()
quartz 
     2 
```

这是否适合您的应用程序可能取决于此任务的确切性质和操作系统，两者都尚未指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-25T16:15:12.283

当您将其保存为 pdf 格式时，您实际上是在为矩阵中每个绘制的正方形保存矢量对象。通过这样做，您可以获得“无限”分辨率，因为通过获得每个元素的向量信息，当您放大它时，实际上您重新绘制了被缩放字段覆盖的整个元素子集。把它想象成你以不同的格式保存整个矩阵。

当您将其保存在任何类型的位图（bmp、jpeg、png）中时，您实际上并没有保存每个元素的信息，每个像素都获得了一个统计值，该统计值代表了每个像素所覆盖的所有元素的信息。可以将其想象为您正在平均矩阵的值以适应特定的像素网格，该像素网格由输出设备的分辨率决定。

快速搜索“”矢量图像和位图之间的差异将使您更加清楚。

# jquery - 安装 Jquery Gallery 插件

> ID：13021560
> 
> 赞同：1
> 
> 时间：2012-10-22T23:40:22.633
> 
> 标签：jquery, plugins, gallery, galleriffic

我现在已经尝试安装其中两个，但都没有成功，所以我很确定问题出在我身上而不是插件上，但我也看了半打 youtube 视频并重新阅读了几个说明次，我仍然无法使它工作。这似乎是有人已经澄清过的事情，但我一直找不到。

我在[http://www.sitesupandrunning.com/links.html](http://www.sitesupandrunning.com/links.html)有一个测试版本 。我已经尝试过测试功能并且它们有效，所以我认为我的 jquery 连接正确。我最初复制并粘贴了插件作者发布的确切代码，所以那里似乎不应该有任何错误。所以似乎它会缩小到图像，但作者有占位符文件名，我刚刚切换了，并且禁用了 jquery，缩略图显示并正确链接，所以我知道图像被标记为他们应该是。

我猜这个问题很简单，但是对于初学者的教程似乎都没有为安装这种插件提供任何有用的东西。

任何帮助将不胜感激——即使是实际使用这种插件的教程，而不仅仅是来自 jquery 主页的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:49:11.113

如果您正在寻找特定的 jQuery 画廊解决方案，您应该尝试 Cincopa[网站幻灯片](http://www.cincopa.com/media-platform/services/create-photo-gallery)。他们有大约 5-6 种不同的 jQuery 图库皮肤。您可能会找到适合您网站的设计

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:59:05.743

我使用 jQuery Cycle，它非常简单。这是一个简单的标记：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Test</title>
<!-- include jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<!-- include Cycle plugin -->
<script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
<script type="text/javascript"> 
$(document).ready(function() {
    $('.transitionPictures').cycle({
        fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
    });
});
</script>

</head>
<body> 
        <!-- TRANSITION SLIDESHOW -->
        <div class="transitionPictures">
        <img src="image01.jpg" width="400" height="300" alt="" />
        <img src="image02.jpg" width="400" height="300" alt="" />
        </div>
</body>
</html> 
```

您可以访问[jQuery Cycle 站点](http://jquery.malsup.com/cycle/)以获取更多选项以添加到准备好的脚本中。

# java - JMesa 样式消失时是 child 的

> ID：13021563
> 
> 赞同：0
> 
> 时间：2012-10-22T23:40:49.490
> 
> 标签：java, jsp, jmesa

我对 JMesa 有一个额外的案例..

当我在没有表单元素作为父元素（应用过滤器和页面）的情况下进行测试时，会呈现 JMesa 表。

但是当我将 Jmesa 元素作为表单的子元素时，样式会消失并呈现为没有颜色或边框的基本表格._。

```
<fieldset>
       <s:form action="listUsers">
        <jmesa:tableModel id="test" items="${users}" var="bean">
            <jmesa:htmlTable caption="${pageScope.caption}" width="100%">
                <jmesa:htmlRow>
                        ... Rows ....
                </jmesa:htmlRow>
            </jmesa:htmlTable>
        </jmesa:tableModel>
       </s:form>
        </fieldset> 
```

在头部标签上，我引用了 css 和 jmesa/jquery.jmesa ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:31:28.700

由于表格在未包含在表单标签中时以正确的样式呈现，但在将其插入表单标签的主体时呈现为没有样式，我的第一个想法是在表单标签级别的某处有一种样式导致要丢失或覆盖的表格样式。另一种可能性是，如果您的[CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)配置了非常具体的父/子关系，则可以想象，引入另一个标签可能会阻止应用样式。

如果没有关于存在哪些样式的更多信息，我能提供的最佳建议是使用一种工具，让您可以交互式地评估您的样式。Internet Explorer 8 具有[开发人员工具](http://en.wikipedia.org/wiki/Internet_Explorer_Developer_Tools)功能。方便的是，您可以使用一项功能单击网页上的项目，它将加载该元素及其样式。然后，您可以分析样式或动态调整样式以立即查看结果。

我建议加载有效的页面并在表格看起来不错时屏幕捕获表格的样式。然后，当样式未应用于表格时，您可以执行相同的操作，并将两者作为起点进行比较以确定导致差异的原因。

# php - 在多个表中添加记录 PHP MYSQL

> ID：13021571
> 
> 赞同：0
> 
> 时间：2012-10-22T23:41:26.987
> 
> 标签：php, mysql, phpmyadmin

我有两个表，用户和评论。我需要将名字和姓氏添加到用户，并将评论添加到评论表中，用户 ID 作为评论中的外键。我正在使用 phpmyadmin 来添加外键约束和关系。

这是我的html表单：

```
<form action="dbconnect.php" method="post">
Firstname: <input type="text" name="firstname"><br />
Lastname: <input type="text" name="lastname"><br />
Comments: <textarea cols="30" rows="5" name="comments"></textarea><br />
<input type="submit">
</form> 
```

这是我的 php 插入代码：

```
mysql_select_db("test", $db_server);

$sql="INSERT INTO users (Firstname, Lastname)
VALUES
('$_POST[firstname]','$_POST[lastname]')";

$sql="INSERT INTO comments (Comment)
VALUES
('$_POST[comments]')";

if (!mysql_query($sql,$db_server))
    {
    die('Error' . mysql_error());   
    }
echo "1 record added" ;

mysql_close($db_server); 
```

这是我得到的错误：

> 错误：无法添加或更新子行：外键约束失败（`test`. `comments`, CONSTRAINT `comments_ibfk_2`FOREIGN KEY ( `useridfk`) REFERENCES `users`( `id`) ON DELETE CASCADE ON UPDATE CASCADE）

我是 php 和 phpmyadmin 的新手，因此不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:49:52.600

首先，您需要在 users 表上运行 INSERT 查询，以便创建用户记录。

```
mysql_select_db("test", $db_server);

$sql="INSERT INTO users (Firstname, Lastname)
VALUES
('$_POST[firstname]','$_POST[lastname]')";

mysql_query($sql);

if (!mysql_query($sql,$db_server))
    {
    die('Error' . mysql_error());   
    }
echo "1 record added" ; 
```

然后，您需要在 users 表上检索新创建记录的 id

```
$newIdQuery = mysql_query("SELECT LAST_INSERT_ID() AS userId FROM users");
$newId = mysql_fetch_assoc($newIdQuery); 
```

然后，您可以使用该 userId 添加评论，并正确填充用户 id foriegn 键。

注意：当使用 mysql_* 函数构建 MySQL 查询时，如果您将 php 变量包装在 { } 中，它会将 php 变量的值插入到 SQL 语句中。

```
$sql="INSERT INTO comments (id, Comment)
VALUES
({$newId["userId"]}, '$_POST[comments]')";

if (!mysql_query($sql,$db_server))
    {
    die('Error' . mysql_error());   
    }
echo "1 record added" ;

mysql_close($db_server); 
```

# string - 关于字符串统计的python多处理

> ID：13021573
> 
> 赞同：0
> 
> 时间：2012-10-22T23:41:37.220
> 
> 标签：string, multiprocessing

我的文件格式如下：

```
45  TCGGCGCAGCGTTAGGATTAG 44    TTTCATCTGCCGCCGTTGCCG
43  CGTTTTCGGATGGATCATTGT 43    CTTGCGACGCATTTGGATCAG
35  CCGATTGCTAATCGGCAGTTG 32    TCGCGGTATCCGTCTCTTAAT
31  TTTAATGCTAAGACTACGTGG 31    TTGTGGGTGCATCAGGATTTG
31  ACTTGGCTGGCTAATGTGCAG 31    CGTTCTCTGCGGATTTATCAG
31  TCGCCGACGCCTTATTGTAAT 30    ACGAAGCCTTAGTGGATGCTT
15  ACGATGATGATGCCTCATCTT 3     ATTACTGAGCTTAAGGCGAAG 
```

它有 1000 万行，第一列是出现次数，第二列是 DNA 序列。我想先将 DNA 翻译成肽。然后我想计算 20 个氨基酸在 7 个位置（列）的总出现次数，400 个氨基酸对在 6 个位置的总出现次数，8000 个氨基酸三聚体在 5 个位置的总出现次数，以及 160000 在 4 个位置的总出现次数。这是我的代码：

```
#!/usr/bin/env python
#!/usr/bin/env python
def fre(aa,cn):
    import numpy as np
    m=len(aa)
    position_monomer=np.zeros((m,7))
    position_dimer=np.zeros((m,6))
    position_trimer=np.zeros((m,5))
    position_tetramer=np.zeros((m,4))
    fre_monomer=np.zeros((20,7))
    fre_dimer=np.zeros((400,6))
    fre_trimer=np.zeros((8000,5))
    fre_tetramer=np.zeros((160000,4))
    aa_default=['A','C','D','E','F','G','H','I','K','L','M','N','P','Q','R','S','T','V','W','Y']
    for i in xrange(m):
        for j in xrange(7):
            position_monomer[i][j]=aa_default.index(aa[i][j])
            fre_monomer[position_monomer[i][j]][j]=fre_monomer[position_monomer[i][j]][j]+cn[i]

    for i in xrange(m):
        for j in xrange(6):
            position_dimer[i][j]=20*aa_default.index(aa[i][j])+aa_default.index(aa[i][j+1])
            fre_dimer[position_dimer[i][j]][j]=fre_dimer[position_dimer[i][j]][j]+cn[i]

    for i in xrange(m):
        for j in xrange(5):
            position_trimer[i][j]=400*aa_default.index(aa[i][j])+20*aa_default.index(aa[i][j+1])+aa_default.index(aa[i][j+2])
            fre_trimer[position_trimer[i][j]][j]=fre_trimer[position_trimer[i][j]][j]+cn[i]

    for i in xrange(m):
        for j in xrange(4):
            position_tetramer[i][j]=8000*aa_default.index(aa[i][j])+400*aa_default.index(aa[i][j+1])+20*aa_default.index(aa[i][j+2])+aa_default.index(aa[i][j+3])
            fre_tetramer[position_tetramer[i][j]][j]=fre_tetramer[position_tetramer[i][j]][j]+cn[i]

    return fre_monomer,fre_dimer,fre_trimer,fre_tetramer 

#!/usr/bin/env python
#!/usr/bin/env python
from __future__ import division
import numpy as np
from Position import fre
from Xdelete import X_delete
from Bio.Seq import translate
import time

start=time.clock()
textfile = open(r"C:\Users\Shangyang Li\Desktop\FINAL 8 DATA SETS\illumina_phd7_allseqs.txt","r")

data = []
copy_number=[]
DNA=[]
peptide=[]

for line in textfile:
    data.append(line.split())

for row in range(len(data)):
    copy_number.append(int(data[row][0]))
    DNA.append(data[row][1])

peptide=[translate(line) for line in DNA]
(peptides,copy_numbers)=X_delete(peptide,copy_number)

(fre_monomer,fre_dimer,fre_trimer,fre_tetramer)=fre(peptides,copy_numbers) 
```

但我想尽可能快地获得单体、二聚体、三聚体、四聚体的频率，现在是 30 分钟到 1000 万个数据大小。我想使用多处理来处理这个问题，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:48:58.537

尝试组合一些循环。如果两个外部循环进行完全相同的迭代，则组合它们的内部循环以避免外部迭代：

```
for i in xrange(m):
    for j in xrange(7):
        ....

for i in xrange(m):
    for j in xrange(6):
        .... 
```

变成：

```
for i in xrange(m):
    for j in xrange(7):
        ....
    for j in xrange(6):
        .... 
```

另外，看看你是否可以避免一些`index()`调用，因为它们经常不得不在引擎盖下遍历整个列表。

# cordova - 我无法创建 PhoneGap 2.x 项目：权限被拒绝或找不到命令

> ID：13021579
> 
> 赞同：1
> 
> 时间：2012-10-22T23:42:20.160
> 
> 标签：cordova, cordova-2.0.0

在 2.0 中，PhoneGap 决定使用命令行来创建新项目 (iOS)。指令看起来很简单，但我无法执行任何脚本。也许这是我的笔记本电脑设置。我完全按照此链接（http://docs.phonegap.com/en/2.1.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS）中的说明进行操作，直至提供的确切参数样本：

```
./create ~/Desktop/HelloWorld org.apache.HelloWorld HelloWorld then press "Enter" 
```

结果：权限被拒绝

所以我想如果我以root身份运行它会起作用，所以我尝试了这个：

```
sudo ./create ~/Desktop/HelloWorld org.apache.HelloWorld HelloWorld then press "Enter" 
```

结果：提示我输入密码，输入后，找不到命令

正如我所说，这些说明非常简单，而且由于我还没有发现其他人有这个错误，所以我必须把它归结为一个菜鸟。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T20:38:37.783

万一其他人遇到这个问题，我找到了解决方案。我需要确保这些脚本是可执行的。我认为这是找不到命令错误的原因。为此，从我执行的终端

```
chmod 755 create 
```

然后我发现我需要对创建脚本引用的任何脚本执行此操作。

```
chmod 755 replaces
chmod 755 update_cordova_subproject 
```

然后我发现生成的项目归 root 所有，所以我下载了一个名为 BatChmod 的实用程序，它允许我更改项目目录的所有者以及其中的所有内容。很好的实用程序，你可以在这里得到它：http: [//www.macupdate.com/app/mac/6440/batchmod](http://www.macupdate.com/app/mac/6440/batchmod)

一旦我这样做了，我就能够构建并部署到模拟器。我仍然无法部署到我的设备，因为我需要实施修复以有条件地添加基于 iOS 版本的架构。它试图在设备上使用 i386。看到这个：[https ://issues.apache.org/jira/browse/CB-1360](https://issues.apache.org/jira/browse/CB-1360)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T15:11:52.813

我有同样的问题，但另一个原因和另一个解决方案。也许这对某人有帮助（之前，我也为所有 js 文件做了 chmod 755 ）。

启动 create 命令时，create.js 以“权限被拒绝”停止。我注销了 create.js 执行的命令，以找出哪个命令锁定了进程：

```
function exec(command) {
    Log("command=" + command);
    ... 
} 
```

事实证明，该命令

```
"jar -cfe ..\\appinfo.jar ApplicationInfo ApplicationInfo.class" 
```

锁定进程（在 createAppInfoJar() 方法中）。

我无法从控制台运行任何 jar 命令，但 java 命令有效。所以我用

```
"java jar -cfe ..\\appinfo.jar ApplicationInfo ApplicationInfo.class" 
```

并且创建过程成功进行。

# java - Java：在对象数组中存储对象

> ID：13021581
> 
> 赞同：0
> 
> 时间：2012-10-22T23:42:49.423
> 
> 标签：java

假设我有一组客户。每个 Client 都在其中存储三个对象，例如 Client[1] 有一个`CurrentAccount`, `CreditCard`,`DebitCard`类。

我将如何创建这样的数据库？假设`CurrentAccount`有一个公共方法“ `getAmount`”，如果我打电话：

```
int num = Client[1].CurrentAccount.getAmount(); 
```

我很确定它不会。但是你如何创建这个数据库呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:48:50.847

您必须创建一个客户端类，该类具有获取当前帐户、信用卡和借记卡的方法。然后，如果您有一组称为客户端的客户端，则可以执行以下操作：

```
int num = clients[1].getCurrentAccount().getAmount(); 
```

与此相同：

```
Client client = clients[1];
CurrentAccount account = client.getCurrentAccount();
int num = account.getAmount(); 
```

只是更短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:00:00.840

抱歉，我不喜欢这种代码；）

您使用以下代码违反**[了得墨忒耳法则：](http://en.wikipedia.org/wiki/Law_of_Demeter)**

```
int num = clients[1].CurrentAccount.getAmount(); 
```

由于`CurrentAccount`必须隐藏客户达到金额值的事实。实际上，这会增加`Client`类实现和您的语句之间的耦合。

`getCurrentAmount()`你应该在你的`Client`类中定义一个命名的方法：

```
public class Client{

    private CurrentAccount currentAccount;

    //supposing constructor setting currentAccount here 

    //and below here, the new method
    public long getCurrentAmount(){
      return currentAccount.getAmount();
    }
} 
```

现在您的`Client`类实现将被更好地封装：

```
int num = clients[1].getCurrentAmount(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:55:07.037

```
public class Client{
  public CurrentAccount ca = new CurrentAccount();
  public CreditCard cc = new CreditCard();
  public DebitCard dc = new DebitCard ();
}

public class CurrentAccount { 
  private int amount = 0;
  public int getAmount(){ return amount; } 
} 
```

某处...

```
client<Client>[] = new Client<Client>[3]();
client[1] = new Client();client[2] = new Client();client[3] = new Client();
int amount = client[1].ca.getAmount(); 
```

**编辑 1** 更好的做法是在客户端类中定义一个方法。

```
public class Client{
      private CurrentAccount ca = new CurrentAccount(); // note that its private now.
      public CreditCard cc = new CreditCard();
      public DebitCard dc = new DebitCard ();
      // define a property acccess getter method
      public int getCurrentAccountAmount(){return ca.getAmount();} 
} 
```

并将其称为：

```
int amount = client[1].getCurrentAccountAmount(); 
```

# c++ - C++ 通过引用传递大对象

> ID：13021583
> 
> 赞同：3
> 
> 时间：2012-10-22T23:43:00.620
> 
> 标签：c++

如果我有一个 C++ 函数声明：

```
int func(const vector<int> a) 
```

用它代替它总是有益的吗

```
int func(const vector<int> &a) 
```

因为后者不需要复制`a`来传递给函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:44:51.597

一般来说，是的。您应该始终通过引用传递大对象（或传递指向它们的指针，尤其是在使用 C 时）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T23:50:28.790

就您所想的效率而言，几乎总是肯定的。有时（据称）这可能会更慢，通常是基本类型或小型类型：

```
// copy x? fits in register: fast
void foo(const int x);

// reference x? requires dereferencing on typical implementations: slow
void foo(const int& x); 
```

但是内联无论如何都无关紧要，而且您可以自己按值键入它；这仅与通用模板函数有关。

然而，重要的是要注意您的转换可能并不总是有效的，即因为您的函数获得了自己的数据副本。考虑这个更简单的例子：

```
void foo(const int x, int& y)
{
    y += x;
    y += x;
}

int v = 1;
foo(v, v); // results in v == 3 
```

进行转型，您将获得：

```
void foo(const int& x, int& y)
{
    y += x;
    y += x;
}

int v = 1;
foo(v, v); // results in v == 4 
```

因为即使您无法写入`x`，也可以通过其他方式写入。这称为混叠。虽然可能与您给出的示例无关（尽管全局变量仍然可以别名！），但请注意原则上的差异。

最后，如果您仍然要制作自己的副本，只需在参数列表中进行即可；编译器可以为您优化，尤其是使用 C++11 的右值引用/移动语义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T23:45:43.023

大多数情况下它会更有效-但是如果发生`func`需要制作自己的向量副本并在它*无论如何*都做任何事情时破坏性地修改它，那么您最好保存几行并让语言制作副本为您隐含地作为按值传递的参数。*可以想象，如果调用者之后实际上没有使用其*向量的副本，编译器可能会发现可以省略复制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T23:44:52.317

正确的。传递引用将避免复制。当涉及副本而您实际上并不需要时，您应该使用参考。（或者是因为您不打算修改该值，在这种情况下对原始值进行操作很好并且您将使用 const 引用，或者因为您*确实*想要修改原始值而不是它的副本，在这种情况下您将使用非常量引用。）

当然，这不仅限于函数参数。例如，看这个函数：

```
std::string foo(); 
```

大多数人会以这种方式使用该功能：

```
std::string result = foo(); 
```

但是，如果您不修改`result`，这会更好：

```
const std::string& result = foo(); 
```

没有复制。此外，与指针相反，引用保证由返回的临时`foo()`对象保持有效并且不会超出范围（指向临时对象的指针是危险的，而对临时对象的引用是完全安全的。）

C++-11 标准通过使用移动语义解决了这个问题，但是大多数现有代码还没有使用这个新特性，所以尽可能使用引用是一个很好的习惯。

另外，请注意，在将临时对象绑定到引用时，您必须小心临时生命周期，例如：

```
const int& f(const int& x)
{ return x; }

const int& y = f(23);
int z = y; /* OOPS */ 
```

关键是值为 23 的临时变量的生命周期`int`不会超出表达式绑定`f(23)`到的结尾`y`，因此尝试分配`y`给会`z`导致未定义的行为（由于悬空引用）。

请注意，当您处理诸如`int`or之类的 POD 类型（普通旧数据）时，`char`避免复制不会赢得任何东西。通常引用与`int`或`long int`一样大（通常与指针一样大），因此`int`通过引用复制与复制`int`自身相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T23:45:22.937

简而言之，是的。由于无论如何您都无法修改`a`，因此您的函数体所能做的就是制作另一个副本，您也可以从 const-reference 制作它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T23:50:41.393

我可以想象按值传递*可能*更有效的一些原因：

*   它可以更好地并行化。因为没有混叠。原始可以更改而不影响函数内部的值。
*   更好的缓存局部性

# perl - Perl为什么这个while循环不起作用？

> ID：13021584
> 
> 赞同：-6
> 
> 时间：2012-10-22T23:43:02.263
> 
> 标签：perl

```
my $cmte_money_total = 0;
while ($cmte_money_total == 0){
  # body of function
} 
```

这种语法有什么问题吗？它一直给我一个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:47:34.907

不。

```
$ perl -c -e'
  my $cmte_money_total = 0;
  while ($cmte_money_total == 0){
    # body of function
  }
'
-e syntax OK 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T23:45:51.927

它没有任何问题。

问题出在其他地方。发布产生问题的完整最小代码。

# ruby-on-rails-3 - 在开发环境中离线运行 Rails 应用程序时，.js 和 .css 文件出现“加载资源失败”错误

> ID：13021586
> 
> 赞同：4
> 
> 时间：2012-10-22T23:43:12.553
> 
> 标签：ruby-on-rails-3

我正在尝试让 Rails 应用程序脱机工作。该应用程序在联机时似乎可以正常工作。

在 Chrome 中，当服务器运行时，我会在运行应用程序时从 Chrome 控制台看到这一点（部分被剪断）。：

```
Document was loaded from Application Cache with manifest
http://localhost:3000/application.manifest
Application Cache Checking event
Application Cache Downloading event
...
Application Cache Progress event (5 of 16) http://localhost:3000/assets/todos.css.scss
Application Cache Progress event (6 of 16) http://localhost:3000/assets/application.css
Application Cache Progress event (7 of 16) http://localhost:3000/assets/todos.js.coffee
Application Cache Progress event (8 of 16) http://localhost:3000/assets/jquery.tmpl.js
Application Cache Progress event (9 of 16) http://localhost:3000/assets/jquery.offline.js
...
Application Cache Progress event (11 of 16) http://localhost:3000/assets/jquery.js
...
Application Cache Progress event (13 of 16) http://localhost:3000/assets/json.js
Application Cache Progress event (14 of 16) http://localhost:3000/assets/scaffolds.css.scss
Application Cache Progress event (15 of 16) http://localhost:3000/assets/application.js
Application Cache Progress event (16 of 16) 
Application Cache UpdateReady event 
```

但是，离线我看到了这个（同样，有些被剪断了）。请注意，这些`GET`行是加载错误。：

```
Document was loaded from Application Cache with manifest http://localhost:3000/application.manifest
Application Cache Checking event
GET http://localhost:3000/assets/application.css?body=1  todos:5
GET http://localhost:3000/assets/scaffolds.css?body=1  todos:6
GET http://localhost:3000/assets/todos.css?body=1  todos:7
GET http://localhost:3000/assets/jquery.js?body=1  todos:8
GET http://localhost:3000/assets/jquery_ujs.js?body=1  todos:8
GET http://localhost:3000/assets/jquery.offline.js?body=1  todos:8
GET http://localhost:3000/assets/jquery.tmpl.js?body=1  todos:8
GET http://localhost:3000/assets/json.js?body=1  todos:8
GET http://localhost:3000/assets/offline.js?body=1  todos:8
GET http://localhost:3000/assets/todos.js?body=1  todos:8
GET http://localhost:3000/assets/application.js?body=1  todos:8
Application Cache Error event: Manifest fetch failed (-1) http://localhost:3000/application.manifest 
```

特别是，我注意到`?body=1`离线时附加到文件名。

**环境：**

*   导轨：3.2.8
*   红宝石 1.9.3p194
*   WEBrick：1.3.1
*   MySQL：5.5.28 MySQL 社区服务器
*   铬：版本 22.0.1229.94 m
*   操作系统：Windows 7 企业版 6.1（内部版本 7601：Service Pack 1）

**宝石**（我认为相关的宝石）：

*   jquery-rails (2.1.3)
*   json (1.7.5, 1.5.4)
*   机架离线（0.6.4）
*   链轮 (2.1.3)

**应用清单**：

```
CACHE MANIFEST
# ef05db1f746b226b3eb8b3673d65d3585eb8a9e1e35f79a6fc9d90693ff9a569
404.html
422.html
500.html
index.html
assets/application.js
assets/jquery.js
assets/jquery.offline.js
assets/jquery.tmpl.js
assets/json.js
assets/todos.js.coffee
assets/application.css
assets/scaffolds.css.scss
assets/todos.css.scss

NETWORK:
/ 
```

**application.html.erb**：

```
<!DOCTYPE html>
<html manifest="/application.manifest">
<head>
    <title>TestOffsite</title>
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
</head>
<body>

<%= yield %>

</body>
</html> 
```

**todos_controller.erb**（剪断）：

```
class TodosController < ApplicationController
  # GET /todos
  # GET /todos.json
  respond_to :html, :json   

  def index
    @todos = Todo.all
respond_with(@todos)
    #respond_to do |format|
    #  format.html # index.html.erb
    #  format.json { render json: @todos }
    #end
  end
... 
```

**manifest.yml 的内容**：

```
---
rails.png: rails-be8732dac73d845ac5b142c8fb5f9fb0.png
application.js: application-39fb9cbdc400e6885a41059ea60f3851.js
application.css: application-0149f820dbdd285aa65e241569d8c256.css 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T02:24:24.337

为了让我的本地环境从 app/assets/* 目录而不是 /public/assets 中提取资产，我必须在 development.rb 中设置以下内容：

```
 # Don't fallback to assets pipeline if a precompiled asset is missed (ON for Heroku)
  # config.assets.compile = true

  # Compress JavaScripts and CSS (ON for Heroku)
  # config.assets.compress = true

  # Generate digests for assets URLs (ON for Heroku)
  # config.assets.digest = true

  # Don't pull public assets in development mode - remove to check CDN/S3 assets (OFF for Heroku)
  config.assets.prefix = "/dev-assets"

  # Enable serving of images, stylesheets, and JavaScripts from an asset server (ON for Heroku)
  # config.action_controller.asset_host = "//#{ENV['FOG_DIRECTORY']}.s3.amazonaws.com"
  # config.action_controller.asset_host = "http://cdn%d.mydomain.com" 
```

当它准备好在我的 Heroku 登台服务器上运行时，它看起来像这样：

```
 # Don't fallback to assets pipeline if a precompiled asset is missed (ON for Heroku)
  config.assets.compile = true

  # Compress JavaScripts and CSS (ON for Heroku)
  config.assets.compress = true

  # Generate digests for assets URLs (ON for Heroku)
  config.assets.digest = true

  # Don't pull public assets in development mode - remove to check CDN/S3 assets (OFF for Heroku)
  # config.assets.prefix = "/dev-assets"

  # Enable serving of images, stylesheets, and JavaScripts from an asset server (ON for Heroku)
  # config.action_controller.asset_host = "//#{ENV['FOG_DIRECTORY']}.s3.amazonaws.com"
  config.action_controller.asset_host = "http://cdn%d.mydomain.com" 
```

我经常这样做 - 来回翻转它们 - 因为有时我想检查以确保 CloudFront 正在为新推送的资产提供服务，有时我只想要本地速度和开发我的 CSS 或 JS 文件的能力。

# json - Three.JS 的 JSON 格式

> ID：13021587
> 
> 赞同：2
> 
> 时间：2012-10-22T23:43:16.577
> 
> 标签：json, webgl, three.js

我对 JSON 格式有疑问。

我将自动生成 JSON 格式的 2D 建筑计划。然后将此 JSON 文件加载到 Three.JS 进行可视化。

目前，我可以轻松地创建基于 JSON 格式的各种几何类型： [https ://github.com/mrdoob/three.js/wiki/JSON-Model-format-3.1](https://github.com/mrdoob/three.js/wiki/JSON-Model-format-3.1)

但是，我需要更多地了解这种数据格式。

*   首先，如何在模型中添加文本？
*   其次，我找不到这种格式的线作为几何图形。有没有？
*   第三，是否有任何文件可供我参考以获取有关此格式的更多说明？
*   最后，如何在 JSON 格式中添加有关几何图形的附加信息？例如，当我以 JSON 格式创建多边形时，我想添加有关该多边形的其他信息，例如区域、所有者、...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:32:24.867

1.  通过纹理，或通过创建`THREE.TextGeometry`并将其与其他几何图形合并
2.  AFAIK，不。您可能能够通过加载您渲染为线框的单独对象来模拟线条。
3.  我使用了源代码：[Loader](https://github.com/mrdoob/three.js/blob/master/src/loaders/Loader.js)，[JSONLoader](https://github.com/mrdoob/three.js/blob/master/src/loaders/JSONLoader.js)
4.  我认为在保持兼容性的同时这是不可能的，即您需要修补 Three.js 加载器。

实现您想要的一种选择可能是将自定义条目添加到 JSON，例如`"lines": [], "customFaceProperties": []`，然后在 stock Loader 解析它理解的所有内容后自己解析它们。

此外，由于您可能正在创建包含不同内容的东西，您可能想看看场景加载功能：[例如](http://mrdoob.github.com/three.js/examples/webgl_loader_scene_blender.html)，[SceneLoader.js](https://github.com/mrdoob/three.js/blob/master/src/loaders/SceneLoader.js)

# erlang - Erlang 分布式消息发送 - 元组中的第一个原子是什么意思？

> ID：13021589
> 
> 赞同：5
> 
> 时间：2012-10-22T23:43:23.603
> 
> 标签：erlang

Erlang[用户指南](http://www.erlang.org/doc/reference_manual/expressions.html#send)将[发送操作符](http://erlang.org/doc/reference_manual/expressions.html#send)描述为

> ### 8.9 发送
> 
> ```
> Expr1 ! Expr2 
> ```
> 
> 将 的值`Expr2`作为消息发送到 指定的进程 `Expr1`。的值`Expr2`也是表达式的返回值。
> 
> `Expr1`必须评估为**pid**、**注册名称**（原子）或**tuple `{Name,Node}`**。`Name`是一个原子，`Node`是一个节点名，也是一个原子。
> 
> *   如果`Expr1`计算结果为一个名称，但该名称未注册，`badarg`则会发生运行时错误。
> *   向 pid 发送消息永远不会失败，即使 pid 标识了一个不存在的进程。
> *   分布式消息发送，也就是说，如果`Expr1`评估为一个元组 `{Name,Node}`（或位于另一个节点的 pid），也永远不会失败。

在分布式消息发送的情况下，我不清楚`{Name,Node}`远程节点或进程的代码中的第一个原子代表什么。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T00:13:01.823

您引用的句子中的语法有点模棱两可。这三个选项是：

*   进程 ID，它是从某些 Erlang 函数返回的不透明数据类型，主要是 spawn 和 spawn_link。
*   本地节点（即本地 VM）上的注册名称。需要这样做的一个示例是长时间运行的服务器应用程序，您希望进程能够与关键实用程序服务（例如 DNS 缓存）进行通信。
*   包含注册名称和它所在节点的名称的元组（如果是另一个 VM，可能在不同的主机上）。

第一个是迄今为止最常见的。注册名称旨在谨慎使用。

我建议从 Learn You Some Erlang 的并发章节开始，并根据需要回溯到前面的章节： http: [//learnyousomeerlang.com/the-hitchhikers-guide-to-concurrency#dont-panic](http://learnyousomeerlang.com/the-hitchhikers-guide-to-concurrency#dont-panic)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T12:48:09.103

假设您有两个节点：node1@localhost 和 node2@localhost，并且您在 node1 中将一个 erlang 进程注册为 process1。

您可以将消息从 node2 发送到 node1 中的 process1，如下所示：

```
{process1, node1@localhost} ! yourmessage. 
```

希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-07T13:30:28.557

在这个表达式中：

> 经验1！Expr2

**Expr1**必须评估为 (1)**一个 pid**，(2)**一个注册名称 (atom)**或 (3)**一个元组 {Name,Node}**。

在第三种情况下，正如您想知道的那样，当 Expr1 计算为**元组 {Name, Node}**时， Name 是进程的注册名称（原子），而 Node 是节点名称（也是原子），如*name@server*。

例如：

```
% ------- in your node -------
(you@server)> register(shell, self()).

% ------- in my node -------
(me@server)> {shell, you@server} ! "hey you!". 
```

请注意，在向其他节点中的其他进程发送消息之前，首先您必须连接到它们。例如使用**spawn(Node, Module, Function, Arguments)**或**net_adm:ping(Node)**。

出于测试目的，使用**nodes()**函数列出连接的节点。

# php - mysql UPDATE有问题

> ID：13021592
> 
> 赞同：0
> 
> 时间：2012-10-22T23:43:29.817
> 
> 标签：php, mysql

我在提交页面上有一个提交按钮，它返回空白且不更新，回显也是空白。

```
<?
    if (isset($_POST['submit'])) {
        $newtext = mysql_real_escape_string($_POST['text']);
        $doTextEdit = "UPDATE `$database_main`.`texts` SET `texts`.`text` = '$newtext' WHERE `texts`.`id` = '$sid' LIMIT 1" or die(mysql_error());

        $retval = mysql_query( $doArtistEdit, $main );
        if(! $retval )
        {
            die('Could not update data: ' . mysql_error());
        }
        header("Location: ".$_SERVER['HTTP_REFERER']);
        }
    ?> 
```

这是表单代码

```
 <form action="<?php echo $_SERVER['PHP_SELF']; ?>" name="$ID" method="post">
        Song Name : <input type="text" name="title" value="<?php echo $row_song['title']; ?>"> by Artist Name :<input type="text" name="artist" value="<?php echo $row_artist['artist']; ?>"><br><?php echo $sid; ?><?php echo $database_main; ?><?php echo $doTextEdit; ?>
        Lyrics :<br><textarea name="text" cols="72" rows="20"><?php echo str_replace("\n","\n",$row_Recordset1['text']); ?></textarea><br>
        <input type="submit" name="editlyrics" value="Edit"></form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:49:18.507

您正在检查是否`$_POST['submit']`已设置 -

```
if (isset($_POST['submit'])) 
```

但是您的提交按钮名称是`editlyrics`，所以它应该是 -

```
if (isset($_POST['editlyrics'])) 
```

在表单中添加隐藏输入 -

```
<input type="hidden" name="song_id" value="<?php echo $sid; ?>"> 
```

现在您的代码将类似于-

```
<?
if (isset($_POST['editlyrics'])) {
    $song_id = mysql_real_escape_string($_POST['song_id']);
    $newtext = mysql_real_escape_string($_POST['text']);
    $doTextEdit = "UPDATE `$database_main`.`texts` SET `texts`.`text` = '$newtext' WHERE `texts`.`id` = '$song_id' LIMIT 1" or die(mysql_error());

    $retval = mysql_query( $doTextEdit, $main );
    if(! $retval )
    {
        die('Could not update data: ' . mysql_error());
    }
    header("Location: ".$_SERVER['HTTP_REFERER']);
    }
?> 
```

请注意，您不应该使用过时的`mysql_`函数编写代码，并学习`mysqli`或`PDO`- [php.net/manual/en/mysqlinfo.api.choosing.php](http://php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:46:33.890

您正在设置 SQL 查询，`$doTextEdit`但您正在传递`$doArtistEdit`给`mysql_query()`函数。

# eclipse - Eclipse 给我 Invalid arguments ' Candidates are: void * memset(void *, int, ?)' 虽然我知道 args 是好的

> ID：13021594
> 
> 赞同：28
> 
> 时间：2012-10-22T23:43:44.217
> 
> 标签：eclipse, memset

尽管我相信我的论点是好的，但我在 Eclipse 中遇到了一个无效的论点错误。建议的参数包含一个“？” 我认为这可能表明问题所在，但我不知道如何解决它。

我已尽力复制我在这里看到的示例：
[http ://www.cplusplus.com/reference/clibrary/cstring/memset/](http://www.cplusplus.com/reference/clibrary/cstring/memset/)

为了确定我得到了正确的参数。

```
#include <stdio.h>
#include <string.h>
void foo()
{
    char str[] = "why oh why does my IDE give me errors when I know my args are good?";
    memset(str, '-', 4);
    puts(str);
} 
```

Eclipse 在 memset 行上给了我以下错误：

无效参数 ' 候选者是：void * memset(void *, int, ?) '

这可能是什么原因造成的？那是怎么回事？作为第三个参数？

提前致谢！

PS：刚刚注意到我在尝试使用 malloc、calloc 等操作时遇到了类似的错误。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-06-18T16:36:53.973

在 Eclipse 中：

*   右键单击项目
*   点击属性
*   通过单击箭头展开左侧树视图中的*“ **C/C++ 常规**”项目，（仅单击项目本身不会展开子选项）*
*   从子选项中选择*“**预处理器包括路径、宏等**”*
*   单击*“**提供者**”*选项卡
*   *选中“ **CDT GCC 内置编译器设置 [共享]** ”*旁边的框。

编辑：

这样做的原因是有一堆默认包含和定义，编译器在编译时会在后台默默添加。这些指令让 eclipse 获取这些原本无声的预处理器指令，以便它自己的索引器使用相同的设置

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-02-13T07:19:03.333

以下方法解决了我遇到的相同问题。（在日食 4.2 上）

*   清理你的项目 ( `Project`-> `Clean`)
*   重新索引文件 ( `Project`-> `C/C++ Index`-> `Rebuild`)
*   重建您的项目 ( `Project`-> `Build All`)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T19:19:00.647

如果您使用的是 Visual Studio，则 size_t 定义为

```
typedef unsigned __int64    size_t; 
```

在早期版本的 Eclipse CDT 中，没有定义 __int64。您可以通过添加到 C/C++ General -> Paths and Symbols -> Symbols 来解决该问题

*   符号：__int64
*   值：长长

或者您可以升级您的 Eclipse CDT 版本

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T03:27:46.300

我认为这与您的 Eclipse 设置有关，不知何故。

单独来看，该片段在 Mac OS X 10.7.5 上的 GCC (G++) 4.7.1 下使用命令行编译：

```
g++ -O3 -g -Wall -Wextra -c ms.cpp 
```

关于第三个参数的唯一令人惊讶的`memset()`是它是 type `size_t`，但标题应该声明它，所以它不应该是一个问题。

如果你使用`malloc()`et al，你当然会包括`<stdlib.h>`。也有争论你应该使用`<cstdio>`,`<cstring>`和的空间`<cstdlib>`，但这不应该阻止你提供的代码编译没有错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-13T14:53:49.013

我一直在使用第 3 方 C++ 库进行 BeagleBone 开发，并且尝试了所有可能的方式来包含它（如预处理器包含、源文件夹、汇编包含、库包含、C++ 编译器包含、C 编译器包含等）。为我尝试的每一个更改刷新、重新索引、清理和构建。我什至删除了项目，只将 .cpp 和 .h 文件复制到了一个新项目中。

我终于在我的设置中发现了问题并纠正如下。

右键单击项目 > 属性 > C/C++ 构建 > 工具链编辑器 > 当前构建器：> 选择**CDT 内部构建器**

我正在使用 g++，供您参考。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-25T18:35:22.773

我在编译某人的代码时遇到了类似的问题，问题是代码风格。他们以这种方式定义了一些方法：

```
// ... Inside a class

static void
sleep( u32 ms ); 
```

我想这是 GNU 风格。只需将声明更改为

```
static void sleep( u32 ms ); 
```

删除了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-01T20:37:12.370

我对 Eclipse CDT 也有类似的问题。但就我而言，问题是我把`using namespace std;`声明放在了几个标题中。在某些条件组合中，当我包含所有这些标头时，Eclipse 就会出现这种行为。

# mysql - 为什么这个外键引用不起作用？

> ID：13021595
> 
> 赞同：-4
> 
> 时间：2012-10-22T23:43:44.177
> 
> 标签：mysql

请考虑以下 SQL。我正在尝试创建一个引用另一个表的表。外键没有被强制执行，我不知道为什么。

```
--drop database test;
create database test;
use test;

create table person (
    id         int         auto_increment,
    name         varchar(30),
    primary key (id)
);

create table message (
    id         int         auto_increment,
    senderid    int,
    receiverid    int,
    primary key (id),
    foreign key (senderid) references person(id),
    foreign key (receiverid) references person(id)
); 
```

如果我做 a `SHOW CREATE TABLE message`，我会得到以下信息：

```
CREATE TABLE `message` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `senderid` int(11) DEFAULT NULL,
 `receiverid` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `senderid` (`senderid`),
  KEY `receiverid` (`receiverid`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

请注意，外键 senderid/receiverid 只是它们自己。不向 person 添加任何行：

```
mysql> insert into message (senderid, receiverid) values (1,2);
Query OK, 1 row affected (0.00 sec)

mysql> select * from person;
Empty set (0.00 sec)

mysql> select * from message;
+----+----------+------------+
| id | senderid | receiverid |
+----+----------+------------+
|  1 |        1 |          2 |
+----+----------+------------+
1 row in set (0.00 sec) 
```

为什么我的外键不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:46:52.883

您正在使用`MyISAM`但是，如[外键差异](http://dev.mysql.com/doc/en/ansi-diff-foreign-keys.html)下所述：

> 对于 以外的存储引擎`InnoDB`，MySQL Server 解析语句中的`FOREIGN KEY`语法`CREATE TABLE`，但不使用或存储它。

建议你`InnoDB`改用。

# xcode - 如何使用 Xcode 添加 README.md 文件？

> ID：13021599
> 
> 赞同：22
> 
> 时间：2012-10-22T23:43:51.883
> 
> 标签：xcode, git, github, push

我正在尝试在我的 Xcode 项目中添加一个 README.md 文件，并将其推送到 GitHub。我该怎么做？在项目的根目录中创建文件不起作用，因为 - 我认为 - Xcode 看不到它。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-09-06T03:00:46.290

我刚刚解决了同样的问题，所以请允许我分享我的发现。

1.  在 Xcode 中，在 Project Navigator 中选择项目根目录。
2.  右键单击，然后选择`Add Files to <Your Project>...`
3.  选择README.md；确保取消选中复制文件选项和任何组，如下所示： ![在此处输入图像描述](../Images/9ad047b7e6f29f219427d58da5da52c5.png)
4.  单击添加。
5.  完毕。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-04-14T18:34:33.787

我就是这样做的——

1 - 通过 ctrl+click 在 xCode 中项目的根文件夹中创建一个新文件。

[![在此处输入图像描述](../Images/53d5a7cfbe349abc8d085005f3764964.png)](https://i.stack.imgur.com/AaMpW.png)

2 - 完成后，从左侧面板中选择其他文件类型，然后选择空文件。`Readme.md`保存文件时将其重命名为。

3 -`Readme.md`文件应该在上面的屏幕截图中显示的根文件夹中创建。

这就是应该做的。当您将代码推送到存储库时，您的`Readme.md`文件应该正确显示。

BR

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-23T00:19:51.770

这里基本上有两个问题。首先是如何添加 README.md 文件并将其推送到 GitHub。`touch README.md; git add README.md; git commit -m "added README.md"; git push origin`

第二个是文件可见性之一。我认为您在这里遇到的是 Xcode 为其项目保留了各种文件清单记录。尝试通读这个问题：[Xcode does not pick up new class files in SVN](https://stackoverflow.com/questions/5036462/xcode-does-not-pick-up-new-class-files-in-svn)

您是在 Xcode 或终端/查找器中添加文件吗？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-23T00:25:41.673

您应该能够只添加到项目 File->New->File->Other->Empty

添加后，您需要选择并执行 File->Source Control->Add File->Source Control->Commit

# c# - 如何在 c# .net 中集中数据库连接？

> ID：13021606
> 
> 赞同：0
> 
> 时间：2012-10-22T23:44:29.603
> 
> 标签：c#, .net

有谁知道我如何在 c# .net 中集中数据库连接（可能在 mian.master 中）？

我有以下用于 db 连接的代码，并用于调用差异存储过程来检索数据。

```
 string strConnString = ConfigurationManager.ConnectionStrings["testString"].ConnectionString;
    SqlConnection mySqlConnection = new SqlConnection(strConnString);
    SqlCommand mySqlCommand = mySqlConnection.CreateCommand();

    mySqlCommand.CommandText = "EXEC app_campaign_select @CampaignID=" + Request.QueryString["ixCampaign"].ToString();
    mySqlConnection.Open();
    SqlDataReader mySqlDataReader = mySqlCommand.ExecuteReader(); 
```

而不是在每个页面中编码并多次连接到数据库，任何方式我都可以在母版页中编写以下连接代码并且只连接到数据库一次，然后每个页面可以在需要连接到数据库时调用它

```
 string strConnString = ConfigurationManager.ConnectionStrings["testString"].ConnectionString;
    SqlConnection mySqlConnection = new SqlConnection(strConnString);
    SqlCommand mySqlCommand = mySqlConnection.CreateCommand();
    SqlDataReader mySqlDataReader; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:45:51.440

将其添加到静态 DAL 类并根据需要添加参数。

```
public static void YourFunction() {
    // your code
} 
```

## 笔记：

当心这一行：`mySqlCommand.CommandText = "EXEC app_campaign_select @CampaignID=" + Request.QueryString["ixCampaign"].ToString();`

如果该 QueryString 来自用户在某处输入的值，则您可能会接受 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:48:50.850

当然。只需为您可能拥有的每种返回类型创建一个助手类，其中包含一些静态方法。将存储过程名称的字符串传递给一个字符串，并有一个重载的字符串，该字符串将一个字符串用于您要传入的 sql 语句。您也可以有一个只返回一个标量值的字符串。因此，您可能有 3 个左右的静态方法可以从任何页面调用。

# grails - 如何减少 Grails 开发对 Amazon EC2 的依赖

> ID：13021611
> 
> 赞同：1
> 
> 时间：2012-10-22T23:45:08.857
> 
> 标签：grails, amazon-ec2, grails-2.0

今天，当我注意到尝试编译和运行的响应时间越来越长时，我正在将使用 Grails 1.3 的 Web 应用程序转换为 2.0。一个小时后，在删除本地 ivy 缓存和一些与 IDE 相关的文件后，得出的结论是，问题是[Amazon EC2 中断影响了](http://www.theverge.com/2012/10/22/3539756/reddit-flipboard-minecraft-amazon-outage)包括 Grails 存储库在内的多个站点。每次我写一个简单的命令 as `grails compile`or even`grails help`时，框架都会尝试连接到 EC2。我们有一个 Nexus 存储库，用于存储我们的项目和依赖项。我们可以配置一些东西以避免这种行为并改用本地 Nexus？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:23:40.423

Glen Smith 写了一篇很棒的文章：http: [//blogs.bytecode.com.au/glen/2012/06/04/seriously-offline-grails-going-totally-sans-internet-with-nexus.html](http://blogs.bytecode.com.au/glen/2012/06/04/seriously-offline-grails-going-totally-sans-internet-with-nexus.html)

# php - 需要每 2 分钟 ping 1000 个 url

> ID：13021622
> 
> 赞同：8
> 
> 时间：2012-10-22T23:46:17.530
> 
> 标签：php, javascript, python, perl, curl

我在 MySQL 数据库表中有 1000 个提要 URL。我需要每 2 分钟对所有这些 url 进行一次 http 请求。我编写了一个 php 脚本来执行此操作，但该脚本需要 5 分钟 30 秒才能运行。

我希望能够在一分钟内完成所有 1000 个请求。有没有办法运行多个异步进程来更快地完成工作？任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T01:04:20.893

由于您的问题是关于发送 http 请求，而不是真正的 ping，因此您可以使用[`Grequests`](https://github.com/kennethreitz/grequests)（[Requests](http://docs.python-requests.org/en/latest/) + [gevent](http://www.gevent.org)）*轻松快速地完成此操作（根据我的经验，数百个 url 请求只需几秒钟）*：

```
import grequests

urls = [
    'http://www.python.org',
    'http://python-requests.org',
    'http://www.google.com',
]
rs = (grequests.get(u) for u in urls)
grequests.map(rs)    # [<Response [200]>, <Response [200]>, <Response [200]>] 
```

* * *

您的 PHP 脚本需要 5 分钟才能运行，因为它是同步代码，这意味着对于您发送的每个请求，您必须等待响应到达*，然后才能*继续发送下一个请求。

这里的技巧不是*等待*（或阻止许多人会调用）响应，而是直接发出下一个请求，您可以使用`gevent`（基于协程的）或`nodejs`. 你可以在[这里](http://www.slideshare.net/domenicdenicola/callbacks-promises-and-coroutines-oh-my-the-evolution-of-asynchronicity-in-javascript)阅读更多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T15:18:48.380

看看[CPAN](https://metacpan.org/)[`AnyEvent::Ping`](https://metacpan.org/module/AnyEvent%3a%3aPing)上的or[`AnyEvent::FastPing`](https://metacpan.org/module/AnyEvent%3a%3aFastPing)模块。

下面是使用`AnyEvent::Ping`ping 10000 url 的简单示例：

```
use strict;
use warnings;
use AnyEvent;
use AnyEvent::Ping;

my $cv   = AnyEvent->condvar;
my $ping = AnyEvent::Ping->new;
my @results;

for my $url (get_ten_thousand_urls()) {
    $cv->begin;

    # ping each URL just once
    $ping->ping( $url, 1, sub {
        # [ url address, ping status ]
        push @results, [ $url, $_[0]->[0][0] ];
        $cv->end;
    });
}

$cv->recv;

# now do something with @results 
```

以上使用 10,000 个*随机*URL 进行的一些快速测试在我的 Macbook Air 上运行只需 7 秒多一点。通过调整和/或使用更快的事件循环，这个时间将进一步下降（高于使用默认的纯 Perl 事件循环）。

注意。[`AnyEvent`](https://metacpan.org/module/AnyEvent)是一个抽象库，它允许您使用系统提供（或安装在）系统上的异步事件系统。如果您想使用特定的事件循环，请记住从 CPAN 安装相关的 Perl 模块，例如，[`EV`](https://metacpan.org/module/EV)如果使用`libev`. `AnyEvent`如果没有找到（安装）其他内容，将默认为纯 Perl 事件循环。

顺便说一句，如果您只需要检查 HTTP 请求（即不 ping），那么只需将`AnyEvent::Ping`部分替换为[`AnyEvent::HTTP`](https://metacpan.org/module/AnyEvent%3a%3aHTTP).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T00:07:46.310

你用“python”标记了这个，所以我假设在这里使用 Python 是一个选项。查看[多处理模块](http://docs.python.org/library/multiprocessing.html)。例如：

```
#!/usr/bin/env python

import multiprocessing
import os
import requests
import subprocess

addresses = ['1.2.3.4', '1.2.3.5', '4.2.2.1', '8.8.8.8']
null = open(os.devnull, 'w')

def fbstatus(count):
    """Returns the address, and True if the ping returned in under 5 seconds or
    else False"""
    return (count,
        requests.get('http://www.facebook.com/status.php').status_code)

def ping(address):
    """Returns the address, and True if the ping returned in under 5 seconds or
    else False"""
    return address, not subprocess.call(['ping', '-c1', '-W5', address],
        stdout=null)

pool = multiprocessing.Pool(15)
if False:
    print pool.map(ping, addresses)
else:
    pool.map(fbstatus, range(1000)) 
```

## 新 - 获取页面

该`fbstatus()`函数从 Facebook 获取页面。通过 30 个并发进程，这几乎与池的大小呈线性关系。它在我的笔记本电脑上的平均总运行时间约为 80 秒。在 30 名工人中，总共需要大约 3.75 秒的挂钟时间才能完成。

## 老 - 平

这使用模块以5 秒超时和 1 计数`subprocess`调用命令。它使用返回值（0 表示成功，1 表示失败）并取反以获取失败和成功。该函数返回它被调用的地址加上该布尔结果。`ping``ping``False``True``ping()`

最后一位创建一个包含 5 个子进程的多处理池，然后`ping()`调用`addresses`. 由于`ping()`返回其地址，因此很容易看到 ping 每个地址的结果。

运行它，我得到这个输出：

```
[('1.2.3.4', False), ('1.2.3.5', False), ('4.2.2.1', True), ('8.8.8.8', True)] 
```

那次运行花费了 5.039 秒的挂钟时间和 0% 的 CPU。换句话说，它几乎 100% 的时间都在等待`ping`返回。在您的脚本中，您可能希望使用诸如[请求](http://docs.python-requests.org/en/latest/)之类的东西来获取您的提要 URL（而不是`ping`我作为示例使用的文字命令），但基本结构可能几乎相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T00:01:21.017

您可以尝试在 python 上执行多线程 ping。这是一个很好的例子。

```
#!/usr/bin/env python2.5
from threading import Thread
import subprocess
from Queue import Queue

num_threads = 4
queue = Queue()
ips = ["10.0.1.1", "10.0.1.3", "10.0.1.11", "10.0.1.51"]
#wraps system ping command
def pinger(i, q):
    """Pings subnet"""
    while True:
        ip = q.get()
        print "Thread %s: Pinging %s" % (i, ip)
        ret = subprocess.call("ping -c 1 %s" % ip,
                        shell=True,
                        stdout=open('/dev/null', 'w'),
                        stderr=subprocess.STDOUT)
        if ret == 0:
            print "%s: is alive" % ip
        else:
            print "%s: did not respond" % ip
        q.task_done()
#Spawn thread pool
for i in range(num_threads):

    worker = Thread(target=pinger, args=(i, queue))
    worker.setDaemon(True)
    worker.start()
#Place work in queue
for ip in ips:
    queue.put(ip)
#Wait until worker threads are done to exit    
queue.join() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T00:18:07.280

[**更新**：使用 maxSockets = 100 重新测试，同时连接到*非常*好的网络连接。脚本在 < 1 秒内完成，这意味着最大的因素可能是网络吞吐量/延迟，如前所述。你的结果几乎肯定会有所不同。;) ]

您可以为此使用 node.js，因为它用于执行 HTTP 的 API 功能强大、干净且简单。例如，以下脚本在我的 MacBook Pro 上不到 1秒的~~10 秒内获取约 1000 个请求：~~

**测试.js**

```
var http = require('http');

// # of simultaneouse requests allowed
http.globalAgent.maxSockets = 100;

var n = 0;
var start = Date.now();

function getOne(url) {
  var id =  n++;
  var req = http.get(url, function(res) {
    res.on('data', function(chunk){
      // do whatever with response data here
    });
    res.on('end', function(){
      console.log('Response #' + id + ' complete');
      n--;
      if (n == 0) {
        console.log('DONE in ' + (Date.now() - start)/1000 + ' secs');
      }
    });
  });
}

// Set # of simultaneous connections allowed
for (var i = 0; i < 1000; i++) {
  getOne('http://www.facebook.com/status.php');
} 
```

输出...

```
$ node test.js  
Response #3 complete
Response #0 complete
Response #2 complete
...
Response #999 complete
DONE in 0.658 secs 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T22:31:31.120

我非常广泛地使用 Perl 的 [POE Ping 组件](http://search.cpan.org/~rcaputo/POE-Component-Client-Ping-1.173/lib/POE/Component/Client/Ping.pm)模块来完成这项任务。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T21:47:12.280

感谢 Alex Luunix 的建议。我查找了 curl_multi_* 并找到了在 curl 中执行此操作的解决方案，因此我不必对代码进行太多更改。但是感谢所有其他人的答案。这是我所做的：

```
<?php
require("class.php");
$obj=new module();

$det=$obj->get_url();

$batch_size = 40;

function curlTest2($urls) {
    clearstatcache();
    $batch_size = count($urls);

    $return = '';

    echo "<br/><br/>Batch:";
    foreach ($urls as &$url)
    {
        echo "<br/>".$url;
        if(substr($url,0,4)!="http") $url = "http://".$url;
        $url = "https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=-1&q=".$url;
    }

    $userAgent = 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.1.4322)';

    $chs = array();

    for ($i = 0; $i < $batch_size; $i++)
    {
        $ch = curl_init();
        array_push($chs, $ch);
    }

    for ($i = 0; $i < $batch_size; $i++)
    {
        curl_setopt($chs[$i], CURLOPT_HEADER, 1);
        curl_setopt($chs[$i], CURLOPT_NOBODY, 1);
        curl_setopt($chs[$i], CURLOPT_USERAGENT, $userAgent);
        curl_setopt($chs[$i], CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($chs[$i], CURLOPT_CONNECTTIMEOUT, 15);
        curl_setopt($chs[$i], CURLOPT_FAILONERROR, 1);
        curl_setopt($chs[$i], CURLOPT_FRESH_CONNECT, 1);
        curl_setopt($chs[$i], CURLOPT_URL, $urls[$i]);
    }

    $mh = curl_multi_init();

    for ($i = 0; $i < $batch_size; $i++)
    {
        curl_multi_add_handle($mh, $chs[$i]);
    }

    $active = null;
    //execute the handles
    do {
        $mrc = curl_multi_exec($mh, $active);
    } while ($mrc == CURLM_CALL_MULTI_PERFORM);

    while ($active && $mrc == CURLM_OK) {
        if (curl_multi_select($mh) != -1) {
            do {
                $mrc = curl_multi_exec($mh, $active);
            } while ($mrc == CURLM_CALL_MULTI_PERFORM);
        }
    }

    //close the handles
    for ($i = 0; $i < $batch_size; $i++)
    {
        curl_multi_remove_handle($mh, $chs[$i]);
    }

    curl_multi_close($mh);
}

$startTime = time();
$urls = array();

foreach($det as $key=>$value){
    array_push($urls, $value['url']);

    if (count($urls) == $batch_size)
    {
        curlTest2($urls);
        $urls = array();
    }
}

echo "<br/><br/>Time: ".(time() - $startTime)."sec";
?> 
```

这将我的处理时间从 332 秒减少到 18 秒。代码可能可以稍微优化一下，但你会明白它的要点。

# sql - 如何跨两个不相关的表进行求和？

> ID：13021623
> 
> 赞同：11
> 
> 时间：2012-10-22T23:46:19.323
> 
> 标签：sql, postgresql, sum

我试图用 postgres 总结两个不相关的表。使用 MySQL，我会做这样的事情：

```
SELECT SUM(table1.col1) AS sum_1, SUM(table2.col1) AS sum_2 FROM table1, table2 
```

这应该给我一个表，其中包含名为 sum_1 和 sum_2 的两列。但是，postgres 没有给我这个查询的任何结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T23:49:53.937

```
SELECT (SELECT SUM(table1.col1) FROM table1) AS sum_1,
       (SELECT SUM(table2.col1) FROM table2) AS sum_2; 
```

你也可以这样写：

```
SELECT t1.sum_c1, t1.sum_c2, t2.sum_t2_c1
FROM
(
     SELECT SUM(col1) sum_c1,
            SUM(col2) sum_c2
 FROM table1
) t1
FULL OUTER JOIN
(
     SELECT SUM(col1) sum_t2_c1
     FROM table2
) t2 ON 1=1; 
```

FULL JOIN 与无效条件一起使用，这样任何一个子查询都不会产生任何结果（空），而不会导致更大的查询没有结果。

我认为您编写的查询不会产生您期望得到的结果，因为它在 table1 和 table2 之间进行交叉连接，这会使每个 SUM 膨胀另一个表中的行数。请注意，如果 table1/table2 为空，则 CROSS JOIN 将导致 X 行乘 0 行返回空结果。

查看这个[SQL Fiddle](http://www.sqlfiddle.com/#!1/ab4b5/5/0)并比较结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T01:07:14.163

要组合来自*多个*表的*多个*聚合，请使用：*[`CROSS JOIN`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)*

 *```
SELECT sum_1, sum_2, sum_3, sum_4
FROM 
    (SELECT sum(col1) AS sum_1, sum(col2) AS sum_2 FROM table1) t1
CROSS JOIN
    (SELECT sum(col3) AS sum_3, sum(col4) AS sum_4 FROM table2) t2 
```

任何一个子查询中*总是*只有一行，即使源表中没有行。因此，a `CROSS JOIN`（或者甚至只是子查询之间的一个低级逗号——对于具有较低优先级的交叉连接来说，这不是那么容易阅读的简写）是最简单的方法。

请注意，这会在单个聚合行之间产生交叉连接，*而不是*在多个表的各个行之间产生交叉连接，就像您在问题中的错误陈述那样 - 从而相互相乘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T00:28:05.943

我建议类似以下内容，尽管我没有尝试过。

```
select sum1, sum2
from
   (select sum(col1) sum1 from table1),
   (select sum(col1) sum2 from table2); 
```

这个想法是创建两个内联视图，每个视图都有一行，然后对这两个视图进行笛卡尔连接，每个视图都有一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-29T13:02:50.260

```
SELECT SUM(table1_column1 + table2_column1)
FROM table1 
JOIN table2
ON table1_id= table2_id
WHERE account_no='${account_no}' 
```

Express-JS 与 PostgreSQL 通过邮递员 API*

# jquery - 砌体过滤器只工作一次

> ID：13021624
> 
> 赞同：0
> 
> 时间：2012-10-22T23:46:30.430
> 
> 标签：jquery, jquery-plugins, plugins, filter, jquery-masonry

我已经设法使用 jQuery Masonry 插件让多个过滤器工作，唯一的问题是一旦你使用了一个过滤器，你就不能使用另一个过滤器，直到你重新加载（忍受我，我对此还是很陌生）。这是我的代码：

```
jQuery('#menu1').click(function() {
      var menu = $(this).attr('menuref');
      jQuery('.pics').removeClass('pics').addClass('.hidden').hide().filter("[imageref='" + menu + "']").removeClass('.hidden').addClass('pics').show();
      jQuery('#projectimages').masonry('reload');
});

jQuery('#menu2').click(function() {
      var menu = $(this).attr('menuref');
      jQuery('.pics').removeClass('pics').addClass('.hidden').hide().filter("[imageref='" + menu + "']").removeClass('.hidden').addClass('pics').show();
      jQuery('#projectimages').masonry('reload');
}); 
```

所以有我的 2 个过滤器，这是我上传到服务器上的模板来演示我的意思：[http](http://nealfletcher.co.uk/testing-testing/)
://nealfletcher.co.uk/testing-testing/ 单击“过滤器 1”将成功过滤掉相关内容并按照指定重新加载砌体插件，但是如果您然后单击“过滤器 2”，它只会隐藏所有内容，反之亦然，如果您先单击“过滤器 2”，则可以使用，然后“过滤器 1”不会。 ..直到你重新加载。
有什么办法可以让两个过滤器同时工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:18:30.290

您将需要以某种方式重新触发 Masonry。但是[这种过滤方式](http://jsfiddle.net/vd4H6/)非常简单和灵活，因为它也允许组合过滤器。

```
$(function() {

var $container = $('#container');

$container.isotope({
    itemSelector: '.item',
    masonry: {
        columnWidth: your least common divisor in pixels here
    }
});

$('#filters').on('click', 'a', function() {
    var selector = $(this).data('filter');
    $container.isotope({
        filter: selector
    });
});

}); 
```

更新：请参阅开发人员关于在隐藏/显示项目（博客文章）后还需要重新布局的用户的这种两年前[的“黑客” 。](https://github.com/desandro/masonry/issues/40)他的解决方案是将砌体仅应用于可见元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T22:45:36.673

是的，我确实计划进一步使用同位素插件，但由于我有点赶时间，我只是想让这个过滤器工作以节省我更改其余代码的时间。反正有没有重新触发砌体？即使将课程从“.hidden”改回“.pics”似乎也不起作用。任何建议将不胜感激？

```
jQuery('#menu1').click(function() {
      var menu = $(this).attr('menuref');
      jQuery('.pics').removeClass('pics').addClass('.hidden').hide().filter("[imageref='" + menu + "']").removeClass('.hidden').addClass('pics').show();
      jQuery('#projectimages').masonry('reload');
});

jQuery('#menu2').click(function() {
      var menu = $(this).attr('menuref');
      jQuery('.pics').removeClass('pics').addClass('.hidden').hide().filter("[imageref='" + menu + "']").removeClass('.hidden').addClass('pics').show();
      jQuery('#projectimages').masonry('reload');
}); 
```

两者都是我的过滤器都在自己工作，但是当一个接一个使用时，它只会隐藏所有“.pics”内容，似乎根本无法弄清楚。

# javascript - jQuery 动画跳转

> ID：13021626
> 
> 赞同：2
> 
> 时间：2012-10-22T23:46:37.153
> 
> 标签：javascript, jquery, html, css, tumblr

我的 tumblr 页面的标题似乎有点跳动，当我尝试为其不再位于页面顶部时的增长和收缩设置动画时。

该网页是[Tobacco Endeavors](http://tobaccoendeavors.tumblr.com/)，是一个 tumblr 博客。

```
<script type="text/javascript">                                         
    $(window).scroll(function(){ 
        if ($(this).scrollTop() > 1) {
            $("#abracadabra").fadeOut(500, function(){ 
                $("#header").animate({padding:"1.5em 0"}, 500);
            });
        } else {
            $("#abracadabra").fadeIn(500, function(){ 
                $("#header").animate({padding:"1em 0"}, 500);
            });
        }
    }); 
</script> 
```

谢谢一群人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:57:02.890

`stop()`并且`fadeTo()`有时可以解决一些奇怪的问题:)

## *[jsBin 演示](http://jsbin.com/ucecop/1/edit)*

```
$(window).scroll(function(){ 
        if ($(this).scrollTop() > 1) {
            $("#abracadabra").stop().fadeTo(500,0, function(){ 
                $("#header").stop().animate({padding:"1.5em 0"}, 500);
            });
        } else {
            $("#abracadabra").stop().fadeTo(500,1, function(){ 
                $("#header").stop().animate({padding:"1em 0"}, 500);
            }); 
        }
}); 
```

关于你的问题：

来自文档：

> .fadeOut() 方法动画匹配元素的不透明度。一旦不透明度达到 0，显示样式属性设置为无，因此元素不再影响页面的布局。

导致跳动的结果。另一方面，**fadeTo()**方法

> 将持续时间设置为 0，此方法仅更改 opacity CSS 属性，因此 .fadeTo(0, opacity) 与 .css('opacity', opacity) 相同。

正如你所看到的，它很好地影响*了页面的布局。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:58:15.843

滚动事件可能会触发多次，您需要使用标志控制并发，如下所示：

```
<script type="text/javascript">
    window.flag = true;                                         
    $(window).scroll(function(){ 
        if ($(this).scrollTop() > 1) {
            if (window.flag) {
               window.flag = false;
               $("#abracadabra").fadeOut(500, function(){ 
                   $("#header").animate({padding:"1.5em 0"}, 500, function() {window.flag = true;});
               });
            }
        } else {
            if (window.flag) {
               window.flag = false;
               $("#abracadabra").fadeIn(500, function(){ 
                   $("#header").animate({padding:"1em 0"}, 500, function(){window.flag = true;});
               });
            }
        }
    }); 
</script> 
```

**更新**：

更新了代码中的错字。试试上面的新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:55:32.100

看[jQuery动画，不流畅](https://stackoverflow.com/questions/5696524/jquery-animate-not-smooth)

> ..只需将动画的缓动参数设置为线性。

如果您愿意，也可以使用人们制作的插件作为替代品。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T23:55:46.203

jQuery/JavaScript 动画有时会跳动，也可能取决于个人的个人硬件设置。我喜欢为动画做的是制作一个有过渡的 css 类，然后添加该类。此外，制作另一个具有相反过渡的 css 类，并添加该类以制作动画。这很好用，如果我没记错的话，它提供了更高的浏览器兼容性。

# c - 将整数存储在 char 数组中

> ID：13021633
> 
> 赞同：1
> 
> 时间：2012-10-22T23:47:10.337
> 
> 标签：c, arrays, types

我一直在阅读这个线程[Store an int in a char array?](https://stackoverflow.com/questions/1522994/store-an-int-in-a-char-array)

我需要将 int 存储在字符数组中。

所以我阅读了上一个帖子，并尝试制作自己的演示。但它不起作用，试图弄清楚为什么不这样做很长时间。也许你可以给我一些线索或想法吗？

```
#include <stdio.h>

int main(void) {

    char buffer[4];
    int y = 2200;
    buffer[0] = (y >> 0) & 0xff;
    buffer[1] = (y >> 8) & 0xff;
    buffer[2] = (y >> 16) & 0xff;
    buffer[3] = (y >> 24) & 0xff;

    int x = buffer[0];

    printf("%i = %i\n", y, x);
} 
```

输出

```
gcc tmp.c && ./a.out
2200 = -104 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T23:51:24.953

```
int x = buffer[0]; 
```

*`char`*将at的值（`buffer[0]`隐式转换为 int）复制到 中`x`。它不会解释以`sizeof int`开头的第一个字节`buffer`，`int`这是您想要的（想想这种行为在常见情况下会巧妙地破坏的邪恶方式，即`char c = 10; int x = c`. 哎呀！）。

意识到它`buffer[n]`不返回内存地址，它返回一个`char`. 要将`sizeof int`元素解释为一个整体`int`，只需`buffer`转换为`int*`第一个：

```
int x = *((int*)buffer); 
```

对于偏移量`n`（以`int`s 为单位，而不是`char`s）：

```
int x = *((int*)buffer + n); 
```

* * *

另请注意，您的代码假定`sizeof int == 4`为 ，但不能保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:49:10.913

`x = buffer[0]`不做你想做的事。试试`memcpy(&x,buffer,sizeof(x))`。（您需要添加`#include <string.h>`。）

# neo4j - neo4j 节点中的独特价值

> ID：13021636
> 
> 赞同：7
> 
> 时间：2012-10-22T23:47:37.127
> 
> 标签：neo4j

我如何定义一些值在 Neo4j 中应该是唯一的？

例如认为我想将用户数据存储在节点中，所以用户名应该是唯一的。有没有办法像我们在 sql 中所做的那样（将用户名定义为唯一属性）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T05:43:45.127

为此，您将需要使用节点索引和 API 中可用的唯一性功能，以确保每个键值对下仅归档一个节点。如果您正在使用嵌入的 Neo4j，请查看：

*   [http://api.neo4j.org/1.8/org/neo4j/graphdb/index/Index.html#putIfAbsent(T](http://api.neo4j.org/1.8/org/neo4j/graphdb/index/Index.html#putIfAbsent(T) , java.lang.String, java.lang.Object)
*   [http://api.neo4j.org/1.8/org/neo4j/graphdb/index/UniqueFactory.html](http://api.neo4j.org/1.8/org/neo4j/graphdb/index/UniqueFactory.html)

对于 REST 接口，您正在使用的库中可能已经有唯一性支持，或者，如果您没有使用库，此页面应该会有所帮助：

*   [http://docs.neo4j.org/chunked/milestone/rest-api-unique-indexes.html](http://docs.neo4j.org/chunked/milestone/rest-api-unique-indexes.html)

由于节点结构的实施方式与大多数 RDBMS 中记录结构的实施方式不同，因此没有直接等效于您提到的 UNIQUE KEY 功能。然而，索引唯一性应该给您相同的最终结果。

希望这可以帮助

尼日

# xcode4.3 - 如何在xcode中使用一根手指同时缩放和旋转文本？

> ID：13021638
> 
> 赞同：0
> 
> 时间：2012-10-22T23:47:49.103
> 
> 标签：xcode4.3

我的文本字段有问题，我可以使用手势旋转和缩放它，但我想同时进行单指旋转和缩放。请帮助我。我真的非常需要这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:57:07.230

我能想到的最接近的方法不是使用手指，而是使用滑块。考虑：

```
scale = scaleSlider.value;
currentAngle = rotationSlider.value;

//Create a transformation with just the rotation
CGAffineTransform transform = CGAffineTransformMakeRotation(currentAngle);

//Now apply our scale
transform = CGAffineTransformScale(transform, scale, scale);

//Now set the transform on the object to the combined rotation/scale transform.
[tmp setTransform: transform]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:04:20.657

要同时启用多个手势识别器，您应该添加此方法并返回 yes，我在我的项目中对其进行了测试：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
return YES;
} 
```

# python - 从python pandas中的列名获取列索引

> ID：13021654
> 
> 赞同：336
> 
> 时间：2012-10-22T23:48:58.210
> 
> 标签：python, pandas, dataframe, indexing

在 R 中，当您需要根据列名检索列索引时，您可以执行

```
idx <- which(names(my_data)==my_colum_name) 
```

有没有办法对熊猫数据框做同样的事情？

* * *

## 回答 #1

> 赞同：531
> 
> 时间：2012-10-23T00:06:36.177

当然，您可以使用`.get_loc()`：

```
In [45]: df = DataFrame({"pear": [1,2,3], "apple": [2,3,4], "orange": [3,4,5]})

In [46]: df.columns
Out[46]: Index([apple, orange, pear], dtype=object)

In [47]: df.columns.get_loc("pear")
Out[47]: 2 
```

虽然说实话，我自己并不经常需要这个。通常按名称访问可以满足我的要求（`df["pear"]`、`df[["apple", "orange"]]`或也许`df.columns.isin(["orange", "pear"])`），尽管我绝对可以看到您需要索引号的情况。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2017-09-09T08:20:46.310

这是通过列表理解的解决方案。cols 是要获取索引的列列表：

```
[df.columns.get_loc(c) for c in cols if c in df] 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-23T18:27:34.033

DSM 的解决方案有效，但如果您想要直接等效的解决方案，`which`您可以这样做`(df.columns == name).nonzero()`

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-07-20T19:37:26.323

当您可能要查找多个列匹配时，可以使用使用[`searchsorted`方法的矢量化解决方案。](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.searchsorted.html)因此，`df`作为数据框和`query_cols`要搜索的列名，实现将是 -

```
def column_index(df, query_cols):
    cols = df.columns.values
    sidx = np.argsort(cols)
    return sidx[np.searchsorted(cols,query_cols,sorter=sidx)] 
```

样品运行 -

```
In [162]: df
Out[162]: 
   apple  banana  pear  orange  peach
0      8       3     4       4      2
1      4       4     3       0      1
2      1       2     6       8      1

In [163]: column_index(df, ['peach', 'banana', 'apple'])
Out[163]: array([4, 1, 0]) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-03-02T11:35:52.260

如果您想要列位置的列名（与 OP 问题相反），您可以使用：

```
>>> df.columns.get_values()[location] 
```

使用@DSM 示例：

```
>>> df = DataFrame({"pear": [1,2,3], "apple": [2,3,4], "orange": [3,4,5]})

>>> df.columns

Index(['apple', 'orange', 'pear'], dtype='object')

>>> df.columns.get_values()[1]

'orange' 
```

其他方法：

```
df.iloc[:,1].name

df.columns[location] #(thanks to @roobie-nuby for pointing that out in comments.) 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-08-17T12:16:46.543

对于返回多个列索引，我建议使用`pandas.Index`方法[`get_indexer`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.get_indexer.html)，如果你有**唯一的标签**：

```
df = pd.DataFrame({"pear": [1, 2, 3], "apple": [2, 3, 4], "orange": [3, 4, 5]})
df.columns.get_indexer(['pear', 'apple'])
# Out: array([0, 1], dtype=int64) 
```

如果索引中有**非唯一标签**（列仅支持唯一标签）[`get_indexer_for`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.get_indexer_for.html)。它采用与以下相同的参数`get_indeder`：

```
df = pd.DataFrame(
    {"pear": [1, 2, 3], "apple": [2, 3, 4], "orange": [3, 4, 5]}, 
    index=[0, 1, 1])
df.index.get_indexer_for([0, 1])
# Out: array([0, 1, 2], dtype=int64) 
```

这两种方法还支持**非精确索引**，fi 用于浮点值，采用具有容差的最接近的值。如果两个索引与指定标签的距离相同或重复，则选择索引值较大的索引：

```
df = pd.DataFrame(
    {"pear": [1, 2, 3], "apple": [2, 3, 4], "orange": [3, 4, 5]},
    index=[0, .9, 1.1])
df.index.get_indexer([0, 1])
# array([ 0, -1], dtype=int64) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-11-15T07:01:17.680

这个怎么样：

```
df = DataFrame({"pear": [1,2,3], "apple": [2,3,4], "orange": [3,4,5]})
out = np.argwhere(df.columns.isin(['apple', 'orange'])).ravel()
print(out)
[1 2] 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-12-23T16:34:19.940

为了稍微修改 DSM 的答案，`get_loc`根据当前版本的 Pandas (1.1.5) 中的索引类型，有一些奇怪的属性，所以根据你的索引类型，你可能会得到一个索引、一个掩码或一个切片。这对我来说有点令人沮丧，因为我不想仅仅为了提取一个变量的索引而修改整个列。更简单的是完全避免该功能：

```
list(df.columns).index('pear') 
```

非常简单，可能相当快。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-01-04T22:16:49.063

当该列可能存在或可能不存在时，则以下（上述变体）起作用。

```
ix = 'none'
try:
     ix = list(df.columns).index('Col_X')
except ValueError as e:
     ix = None  
     pass

if ix is None:
   # do something 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-20T23:29:20.727

```
import random
def char_range(c1, c2):                      # question 7001144
    for c in range(ord(c1), ord(c2)+1):
        yield chr(c)      
df = pd.DataFrame()
for c in char_range('a', 'z'):               
    df[f'{c}'] = random.sample(range(10), 3) # Random Data
rearranged = random.sample(range(26), 26)    # Random Order
df = df.iloc[:, rearranged]
print(df.iloc[:,:15])                        # 15 Col View         

for col in df.columns:             # List of indices and columns
    print(str(df.columns.get_loc(col)) + '\t' + col) 
```

![结果]([结果](https://i.stack.imgur.com/E8VH8.png)

# java - 列表中的 GXT 模板事件句柄

> ID：13021655
> 
> 赞同：1
> 
> 时间：2012-10-22T23:49:02.267
> 
> 标签：java, gwt, gxt

我正在使用 Sencha 的 GXT 3.0 使用通过 XTemplate (html/css) 定义的自定义渲染来渲染 ListViewCustomAppearance。当事物是只读的或当交互发生在列表级别（即项目选择，项目取消选择）时，它工作得很好。

如何将鼠标事件添加到模板标记中定义的元素？我的最终目标是在列表中的项目内有一个可点击的元素。事件处理程序将在 java 中。

请让我知道这是否以错误的方式进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:04:34.813

`ListViewCustomAppearance`当您想要完全重组子 dom 时很有用，而不仅仅是每个子的绘制方式。通过其中之一，您将接管决定如何处理选择的责任（请参阅`com.sencha.gxt.widget.core.client.ListViewCustomAppearance.onSelect(XElement, boolean)`方法）。

这很重要，因为`ListView`已经知道如何管理选择！`ListViewSelectionModel`您可以在其自身上设置和配置一个`ListView`来处理各种交互，并可以在那里侦听事件。

相反，考虑只做一个自定义`Cell`（可能从`AbstractCell`类开始），以您希望的方式呈现您的数据。覆盖该`render`方法以指定如何附加新内容。

还有一个提示——这个`ListViewSelectionModel`想法可能不适合你，这取决于你试图获得什么样的用户交互数据。相反，还可以考虑覆盖该`onBrowserEvent`方法 - 这将为您提供已修改项目的模型对象、对渲染内容根目录的引用（来自您的`render`方法）以及事件本身。使用事件对象查看发生了什么（针对字符串事件类型测试 event.getType()）。子类化时`AbstractCell`，还需要将感兴趣的事件传递给超类的构造函数。

看看`ActionCell`一个很好的例子，说明如何粗略解决这个问题。它被设计得足够抽象，可以重用，但这也往往使它成为一个更糟糕的例子。

# android - 如何在移动设备的列表中建议向右滑动手势？

> ID：13021662
> 
> 赞同：0
> 
> 时间：2012-10-22T23:49:49.113
> 
> 标签：android, ios, gesture, user-experience

我已经对我的应用程序中的列表进行了实时用户测试，并且遇到了一个有趣的难题。

一个列表，特别是 iOS 中的单列表，通常可能有向右滑动手势来执行更多操作，例如 twitter 应用程序和邮件应用程序，以及一百万个其他应用程序。但是，当重要的功能嵌入到 UI 中超出该操作时，并且用户无法弄清楚时，唯一想到的缓解这种情况的就是附件按钮之类的东西，即。一个指向右边的三角形或 V 形按钮。

可能还有另一种方式，但它不会来找我。也许使行比正常高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:20:46.073

这是作为评论的意思，但因为太长而被拒绝。

所以在考虑更多之后，理想的解决方案是视觉线索，而不是痛苦的明显文字说“滑动一行以获得更多选项”。也许当显示列表（UITableView 等）并创建和添加行（UITableViewCell 等）时，当它们出现时，主要可见内容的动画开始在所需滑动动画的相反方向滑动到位，并带有之后的最小视觉指示器，提醒用户内容是可移动的！

听起来不错？可选地，在动画开始之前，任何底层内容都可能会显示片刻（如果它应该出现在下方）。甜的！

# facebook - 我的应用程序如何促进向多个朋友发送消息？

> ID：13021667
> 
> 赞同：0
> 
> 时间：2012-10-22T23:50:26.197
> 
> 标签：facebook

我有一个 facebook 应用程序需要允许用户一次向多个朋友（可能是他们的所有朋友）发送消息。这不是任何类型的垃圾邮件，我不需要应用程序隐身发送消息（在幕后），我只需要打开一个预先填充特定朋友的对话框（用户已在我的应用程序中选择）在前面的步骤中），然后向他们发送自定义消息。这可能吗？我看到了用于向单个朋友发送消息的 api，我看到了用于邀请用户到我的应用程序的 API（但这仅限于每天非常少量的邀请）......我需要的是一个对话框，让我向尽可能多的用户朋友发送消息，但我可以控制*选择哪些朋友...我不想让他们控制从朋友列表中添加/删除。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:22:02.823

不，发送对话框只允许预填充一个朋友，但如果您需要向收件人显示自定义消息，这将是这里的最佳选择。您可以通过预填充让用户循环发送给多个朋友 - 或者在不预填充的情况下触发对话框并让用户选择发送给谁 - 您的应用不会收到带有收件人 ID 的回调，但您可以放一个发送的 URL 中的referrer 参数？

如果做不到这一点，请求对话框/“邀请”是您唯一可以预先填写多个收件人的东西，而不会期望您的应用程序将在此后不久因垃圾邮件而关闭 - 每天发送的请求数量没有限制，但您不'无法设置显示给收件人的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T03:00:07.557

万一这对其他人有帮助，我刚刚发现...这是一个相对较新的 API（仍处于测试阶段），它允许（几乎）完全满足我的要求。我已经对其进行了测试，它似乎可以工作...... [https://developers.facebook.com/blog/post/2012/08/31/reach-users-1-1-with-the-notifications-api/](https://developers.facebook.com/blog/post/2012/08/31/reach-users-1-1-with-the-notifications-api/)

# magento - 设置 Magento 安全结帐商店视图

> ID：13021673
> 
> 赞同：1
> 
> 时间：2012-10-22T23:51:13.267
> 
> 标签：magento

当您对一个商店有三个商店视图时，每个商店视图都有自己的 URL。但是该网站的单个 HTTPS URL。

您如何设置以`config/.htaccess`在安全结账时维护商店视图？

例子：

```
mysite.it
mysite.fr
mysite.de 
```

语言的所有商店视图并通过*mysite.eu定位特定站点结帐*

Magento 似乎只使用默认的商店视图？

# java - scala中的OAuth消费者秘密消费者密钥生成

> ID：13021674
> 
> 赞同：0
> 
> 时间：2012-10-22T23:51:19.173
> 
> 标签：java, scala, oauth, cryptography

我试图在我的 scala play 应用程序中创建消费者密钥/密钥对，但我似乎无法让它正常工作。我有以下代码

```
import org.apache.commons.codec.binary.Base64
import javax.crypto.{KeyGenerator, Mac, SecretKey}
import javax.crypto.spec.SecretKeySpec

def hmacSha1(baseString:String) : String = {
    val MAC_NAME = "HmacSHA1"
    val keygen = KeyGenerator.getInstance(MAC_NAME);
    val macKey = keygen.generateKey();
    val mac = Mac.getInstance(MAC_NAME);
    val secret = new SecretKeySpec(macKey.getEncoded(), mac.getAlgorithm());
    mac.init(secret);
    val digest = mac.doFinal(s.getBytes());
    val result= new binary.Base64().encode(digest)
    result.toString
} 
```

但是当我为“Anthony”之类的东西添加baseString时，我总是会得到一个看起来像这样的字符串

```
"[B@2008bf02" 
```

我希望得到看起来更像这样的东西

```
“w/FdJ7y1qwe3HX/VmPiACTn01Zc=“ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:14:24.517

您没有正确地将编码的字节数组转换为字符串。Base64 类有一个方法可以帮助您。只需这样做：

```
 mac.init(secret);
    val digest = mac.doFinal(s.getBytes());
    new binary.Base64().encodeBase64String(digest);
} 
```

更传统的方法是：

```
 mac.init(secret);
    val digest = mac.doFinal(s.getBytes());
    val result= new binary.Base64().encode(digest)
    new String(result, "ASCII");
} 
```

# vba - Excel 宏将数据插入下一行

> ID：13021676
> 
> 赞同：1
> 
> 时间：2012-10-22T23:51:27.567
> 
> 标签：vba, excel, excel-2010

我似乎无法弄清楚如何将信息抵消到下一行。

我要做的是每次执行此宏时在下一行插入相同的信息。我将它用作学习管理系统的廉价工具来跟踪电子学习课程的完成情况，因此每次用户执行宏时，它都会列出日期、课程和他们的用户名。

中的信息`.Cells(1, 1)`不正确，但我只是用它来确保宏的其余部分正常工作。在这一点上，我只需要弄清楚每次执行宏时如何构建逻辑以向下移动一行。

在此先感谢您的帮助！

```
Sub Test()
    Dim objNetwork
    Set objNetwork = CreateObject("WScript.Network")
    strUserName = objNetwork.UserName

    Set objExcel = CreateObject("Excel.Application")
    Set objWorkbook = objExcel.Workbooks.Open("G:\Training\GPL\Test.xlsx")
    objExcel.Application.DisplayAlerts = False
    objExcel.Application.Visible = False
    objWorkbook.Worksheets(1).Activate
    objWorkbook.Worksheets(1).Cells(1, 1).Value = "GPL Overview"
    objWorkbook.Worksheets(1).Cells(1, 2).Value = strUserName
    objWorkbook.Worksheets(1).Cells(1, 3).Value = Date

    'objExcel.ActiveWorkbook.Save "G:\Training\GPL\Test.xlsx"
    objExcel.ActiveWorkbook.SaveAs "G:\Training\GPL\Test.xlsx"
    objExcel.ActiveWorkbook.Close
    'objExcel.ActiveWorkbook.

    'objExcel.Application.Quit
    'WScript.Echo "Finished."
    'WScript.Quit

    objExcel.Application.Quit
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:58:28.993

这应该会为您解决。之后添加这个`objWorkbook.Worksheets(1).Activate`

```
Dim lastrow as Long
lastrow = objExcel.Worksheets(1).Range("A" & objExcel.Worksheets(1).Rows.Count).End(xlup).Row + 1 
```

并将接下来的三行更改为：

```
objWorkbook.Worksheets(1).Cells(lastrow, 1).Value = "GPL Overview"
objWorkbook.Worksheets(1).Cells(lastrow, 2).Value = strUserName
objWorkbook.Worksheets(1).Cells(lastrow, 3).Value = Date 
```

**更新**

由于看起来您是在 Excel 本身中运行此代码，因此我将向您展示如何真正清理此代码并使其运行得更快且更容易破译。请看下面的代码：

```
Option Explicit

Sub Test()

Dim strUserName as String
strUserName = ENVIRON("username")

With Application
    .DisplayAlerts = False
    .ScreenUpdating = False
End With

Dim objWorkbook as Workbook
Set objWorkbook = Workbooks.Open("G:\Training\GPL\Test.xlsx")

Dim wks as Worksheet
Set wks = objWorkbook.Sheets(1)

With wks
    Dim lastrow as Long
    lastrow = .Range("A" & .Rows.Count).End(xlup).Row + 1

    .Cells(lastrow, 1).Value = "GPL Overview"
    .Cells(lastrow, 2).Value = strUserName
    .Cells(lastrow, 3).Value = Date

End WIth

objWorkbook.Close True

With Application
    .DisplayAlerts = True
    .ScreenUpdating = True
End With

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T03:50:03.180

感谢 Scott Holtzman
，虽然我不得不更改一些设置，但我遇到了类似的问题，但经过漫长的几天后，你来救我了。确实感谢您的帮助。
这是我实现的代码，您的回复帮助了我。

```
Private Sub Btn_Save_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Btn_Save.Click

        Dim MyExcel As Microsoft.Office.Interop.Excel.Application
        MyExcel = New Microsoft.Office.Interop.Excel.Application
        Dim wb As Microsoft.Office.Interop.Excel.Workbook
        wb = MyExcel.Workbooks.Open("C:\Users\IMTIYAZ\Desktop\try")
        Dim ws As Microsoft.Office.Interop.Excel.Worksheet
        ws = wb.Sheets("sheet1")
        With ws
            Dim irow As Long
            irow = ws.Range("A65536").End(Excel.XlDirection.xlUp).Offset(1, 0).Select
            irow = ws.Range("A" & ws.Rows.Count).End(Excel.XlDirection.xlUp).Row + 1
            ws.Cells(irow, 1).Value = Me.txtSn.Text
            ws.Cells(irow, 2).Value = Me.txtNa.Text
            ws.Cells(irow, 3).Value = Me.txtGpf.Text
            ws.Cells(irow, 4).Value = Me.txtBa.Text
            ws.Cells(irow, 5).Value = Me.txtBn.Text
            ws.Cells(irow, 6).Value = Me.txtAp.Text
            ws.Cells(irow, 7).Value = Me.txtBp.Text
            ws.Cells(irow, 8).Value = Me.txtGp.Text
            ws.Range(irow, 9).Formula = ("=$G$3+$H$3")
            Me.Lbl_Tt.Text = ws.Cells(irow, 9).Value
            ws.Cells(irow, 10).Value = Me.txtPp.Text
            ws.Cells(irow, 11).Value = Me.txtDa.Text
            ws.Cells(irow, 12).Value = Me.txtMa.Text
            ws.Cells(irow, 13).Value = Me.txtRa.Text
            ws.Cells(irow, 14).Value = Me.txtCa.Text
            ws.Cells(irow, 15).Value = Me.txtOa.Text
            ws.Cells(irow, 16).Formula = ("=i3+J3+K3+L3+M3+N3+O3")
            Me.Lbl_Gt.Text = ws.Cells(irow, 16).Value
            ws.Cells(irow, 17).Value = Me.txtFa.Text
            ws.Cells(irow, 18).Formula = ("=P3-Q3")
            Me.Lbl_Naf.Text = ws.Cells(irow, 18).Value
            ws.Cells(irow, 19).Value = Me.txtSf.Text
            ws.Cells(irow, 20).Value = Me.txtRf.Text
            ws.Cells(irow, 21).Value = Me.txtSi1.Text
            ws.Cells(irow, 22).Value = Me.txtSi2.Text
            ws.Cells(irow, 23).Value = Me.txtSi3.Text
            ws.Cells(irow, 24) = ("=S3+T3+V3+W3+U3")
            Me.Lbl_Td.Text = ws.Cells(irow, 24).Value
            ws.Cells(irow, 25).Formula = ("=R3-X3")
            Me.Lbl_Nad.Text = ws.Cells(irow, 25).Value
            ws.Cells(irow, 26).Value = Me.txtHl.Text
            ws.Cells(irow, 27).Value = Me.txtCsc.Text
            ws.Cells(irow, 28).Value = Me.txtMr.Text
            ws.Cells(irow, 29).Value = Me.txtIt.Text
            ws.Cells(irow, 30).Formula = ("=Y3-(AC3+Z3+AA3+AB3)")
            Me.Lbl_Np.Text = ws.Cells(irow, 30).Value
            MessageBox.Show("The last row in Col A of Sheet1 which has data is " & irow)
        End With
        MyExcel.Quit()
        MyExcel = Nothing
        Me.Update()
    End Sub
End Class 
```

# flash - 如何使用 actionscript 3 写入 zip 文件

> ID：13021681
> 
> 赞同：0
> 
> 时间：2012-10-22T23:51:56.043
> 
> 标签：flash

我正在使用 Adob​​e Creative Suite Extension 为 Flash CS 5.5 创建一个插件，我需要创建一个包含 3 个条目的 zip 文件。我需要使用外部库还是可以使用纯闪存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:13:21.447

查看[ByteArray.compress](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html#compress%28%29)方法。它支持多种压缩算法。据我所知 ZIP 也可以使用[许多压缩算法](http://en.wikipedia.org/wiki/Zip_%28file_format%29)。压缩 ByteArray 后，您可能需要添加适当的标头并将所有数据写入文件。

您也可以使用[FZIP](https://github.com/claus/fzip) AS3 库。

# java - 为 JTextField 添加标签

> ID：13021683
> 
> 赞同：4
> 
> 时间：2012-10-22T23:52:10.530
> 
> 标签：java, swing, jlabel, jtextfield

我有一个`JTextField`，我想在它旁边添加一个标签，让它看起来像这样......

```
 +---------------+
TEAM 1: |Text field here|
        +---------------+ 
```

这是我正在构建的代码`JTextField`...

```
jb = new JButton(">> FIGHT <<");
jt0 = new JTextField("", 25);
jt1 = new JTextField("", 25);
jt2 = new JTextField("<< BATTLE VICTOR >>", 35); 
```

有人可以告诉我如何添加标签。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T23:58:18.443

只需在您的 JTextField 旁边放置一个 JLabel。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-23T01:28:21.663

如果您想在界面中添加任何文本，您应该使用`JLabel`. 通过将 a 放在 a`JLabel`旁边`JTextField`，您可以获得所需的外观。

A`JLabel`是这样简单构造的......

```
JLabel myLabel = new JLabel("This is my message"); 
```

您添加`JLabel`到界面的方式取决于您的`JPanel`/`JFrame`布局，但我更喜欢`BorderLayout`，您会像这样使用它...

```
JLabel myLabel = new JLabel("Team 1");
JTextField myTextField = new JTextField("Team Awesome!");

JPanel panel = new JPanel(new BorderLayout());
panel.add(myLabel,BorderLayout.WEST);
panel.add(myTextField,BorderLayout.CENTER); 
```

这会将 a 放在`JLabel`的左侧 ( `WEST`) `JTextField`。

有关详细信息，请参阅以下文档：

*   JLabel：[http ://docs.oracle.com/javase/6/docs/api/javax/swing/JLabel.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JLabel.html)
*   边框布局：http : [//docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html](http://docs.oracle.com/javase/6/docs/api/java/awt/BorderLayout.html)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-23T03:18:32.683

除了[布局选择](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)之外，不要忘记“您可以通过使用该`setLabelFor()`方法来提高程序的可访问性”，如[*如何使用标签*](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)中所述。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-23T00:07:13.590

您想使用布局管理器和[`JLabel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html)s的组合

```
JLabel label = new JLabel("User name:");
JTextField field = new JTextField(12);

setLayout(new GridBagLayout());
GridBagConstraints gbc = new GridBagConstraints();

gbc.gridx = 0;
gbc.gridy = 0;
add(label, gbc);

gbc.grid++;
add(field, gbc); 
```

查看[如何使用标签](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)以获取更多示例

# facebook-graph-api - 在墙帖中显示元信息

> ID：13021685
> 
> 赞同：0
> 
> 时间：2012-10-22T23:52:25.023
> 
> 标签：facebook-graph-api, tags, facebook-apps, facebook-recommendations

我的页面有元信息 og:title og:category og:price

当一个人在他的墙上分享类似的东西时，是否可以显示这些信息？如何？从我尝试的内容来看，实际的 url + img 显示在帖子中：John 在 MyApp 上推荐 Title。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:54:40.097

不，没有办法在常规提要帖子中包含键/值对 - 如果您要发布 Open Graph 操作，您可以在提要故事中显示对象的一些属性，但在您自己提供提要数据时这是不可能的.

有关更多信息，请参阅[Open Graph](https://developers.facebook.com/docs/opengraph/)文档

# asp.net - ReportViewer 以编程方式使用数据集填充它

> ID：13021688
> 
> 赞同：0
> 
> 时间：2012-10-22T23:52:49.167
> 
> 标签：asp.net, rdlc

我有一个要连接的访问​​数据库，但是我想用取决于用户选项的数据刷新报表视图。

我该怎么做？

例如，我有一个名为 dsDealer 的数据集和一个 report.rdlc 文件

我想用新数据更新对象数据源。

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:40:46.550

What ever you did to put data in the dataset....do it again with the new data.

On the ReportViewer object, call DataBind().

[http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.reportviewer_members%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.reportviewer_members%28v=vs.80%29.aspx)

# jquery - CAML 查询不工作 - 难倒

> ID：13021689
> 
> 赞同：0
> 
> 时间：2012-10-22T23:52:50.320
> 
> 标签：jquery, sharepoint, caml

我正在尝试使用 CAML 查询根据通过 Javascript 检索的“cardID”值从 SharePoint 2007 列表中查找项目。我可以看到该值已分配给变量，但每当我尝试添加查询时，列表不再显示。我希望有更多经验的人可以澄清我做错了什么。

注意：我使用 u2u CAML 工具生成此查询。当我从那里执行它时，它返回一个有效的结果，而不是当我尝试将它与 jQuery 结合使用时。

```
 <script language = "javascript">  function GetAnnouncementData()  {  var soapPacket = "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'> \
    <soapenv:Body> \
     <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> \
      <listName>eCards</listName> \ 
      <View> \ 
      <Query><Where>
      <Eq>
         <FieldRef Name='Title' />
         <Value Type='Text'>116</Value>
      </Eq></Where> </Query>
       <ViewFields> \   
      <FieldRef Name='Title' /> \ 
      <FieldRef Name='Greeting' /> \   
      <FieldRef Name='Message'/> \
      <FieldRef Name='Card' /> \
       </ViewFields> \ </View> \
     </GetListItems> \
    </soapenv:Body> \    </soapenv:Envelope>";  jQuery.ajax({    >url: "http://localhost/place/_vti_bin/lists.asmx",    type: "POST",    dataType: "xml",    data: soapPacket,    complete: processResult,    contentType: "text/xml; charset=\"utf-8\""   });  }  function processResult(xData, status) {   jQuery(xData.responseXML).find("z\\:row").each(function() {

JSRequest.EnsureSetup(); var cardID = JSRequest.QueryString["cardID"];

 $("<li>" + $(this).attr("ows_Title") + "</li>").appendTo("#AnnouncementData");  });  }

$(document).ready( function(){  GetAnnouncementData();  });   </script> 
```

我还尝试用列表中的预定义值替换“cardID”。仍然没有返回任何结果。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:43:03.330

请先使用 u2u CAML Builder 工具测试您的 CAML 查询： [http ://www.u2u.be/res/tools/camlquerybuilder.aspx](http://www.u2u.be/res/tools/camlquerybuilder.aspx)

您可以使用 Fiddler 查看 Web 服务和运行 JavaScript 的浏览器之间的流量。使用 Chrome 调试 JavaScript（按 F12）。 [http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

此处类似代码：http: [//community.office365.com/en-us/forums/153/p/13711/63998.aspx](http://community.office365.com/en-us/forums/153/p/13711/63998.aspx)

# html - 在下拉菜单上选择项目时吐出信息？

> ID：13021690
> 
> 赞同：2
> 
> 时间：2012-10-22T23:52:53.450
> 
> 标签：html

我想知道在用户选择下拉菜单中列出的项目之一后，是否可以使用 JavaScript 之类的东西在下拉菜单下吐出文本？

**例如：** 用户单击下拉菜单并选择选项 B。在菜单下，它会显示“您已选择选项 B”或“选项 B 成本：0.00 美元”之类的内容

这可能吗？

我目前的代码是：

```
<form>
<p align="center"><b>Select a Payment:</b>
<select id="setit" style="color: #000" size="1" name="test">
<option value="">Select one</option>
    <option value="">1 Month: $4.99</option>
    <option value="">3 Months: $14.99</option>
     <option value="">6 Months: $29.99</option></select>
<br />
<br />
     <input type="button" value="Add to Cart"
onclick="window.open(setit.options[setit.selectedIndex].value)">
</p></form> 
```

有谁能够帮我？我目前迷路了，并且是编码的菜鸟，哈哈。我四处搜索，看到人们使用变量发布 JavaScript，但每次我插入编码时，什么都没有出现......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:05:42.800

您需要阅读有关`DOM`使用 JavaScript 进行操作的知识。这是很有可能的，我建议你看看[w3schools.org](http://www.w3schools.org)的 JavaScript 教程。它非常全面，准备好后，您应该下载 jQuery 并使用它：[jQuery](http://api.jquery.org)。

祝你好运
-布赖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:55:02.313

像这样：

```
<form> 
<p align="center"><b>Select a Payment:</b> 
<select id="setit" style="color: #000" size="1" name="test" > 
   <option value="http://www.msnbc.com">Select one</option>     
   <option value="http://www.microsoft.com">1 Month: $4.99</option>    
   <option value="http://google.com">3 Months: $14.99</option>      
   <option value="http://msn.com">6 Months: $29.99</option>
</select> 
<br /> <br />
<input type="button" value="Add to Cart" onclick="showLink()"> </p></form>

<script language="javascript">
<!--
function showLink()
{

var e = document.getElementById("setit");    
var strSel = e.options[e.selectedIndex].value;   
window.open(strSel);
}
-->
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:04:06.600

```
<form>
<p align="center"><b>Select a Payment:</b>
<select id="setit" onchange="javascript:showRelatedValue(this.value)">
<option value="">Select one</option>
    <option value="">1 Month: $4.99</option>
    <option value="">3 Months: $14.99</option>
    <option value="">6 Months: $29.99</option></select>
<br />
<br />
     <input type="button" value="Add to Cart"
onclick="window.open(setit.options[setit.selectedIndex].value)">
</p>
</form>

<script>
     function showRelatedValue(String value)
     {
         if(value==1 Month: $4.99)
         alert("you have selected choice A");
         if(value==3 Months: $14.99)
         alert("you have selected choice B");
         if(value==6 Months: $29.99)
         alert("you have selected choice C");
     }
</script> 
```

好吧，我只是通过 if 条件进行了比较，但是您应该与给定的数组进行比较，或者在最佳情况下，使用 ajax 调用从服务器带来相关的响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T00:08:57.613

```
<form> 
<p align="center"><b>Select a Payment:</b> 
<select id="setit" style="color: #000" size="1" name="test" onchange="displayValue();"> 
   <option value="">Select one</option>     
   <option value="">1 Month: $4.99</option>    
   <option value="">3 Months: $14.99</option>      
   <option value="">6 Months: $29.99</option>
</select> 
<br /> <br />
<input type="button" value="Add to Cart" onclick="window.open(setit.options[setit.selectedIndex].value)"> </p></form>
<div id="displayValue">here</div>

<script language="javascript">
<!--
function displayValue()
{

var e = document.getElementById("setit");    
var strSel = e.options[e.selectedIndex].text;     
document.getElementById("displayValue").innerHTML = strSel; 
}
-->
</script> 
```

# java - 你如何实现“添加”方法到单链表？

> ID：13021693
> 
> 赞同：0
> 
> 时间：2012-10-22T23:52:59.373
> 
> 标签：java

这是类头及其以下字段：

```
public class SinglyLinkedList <E> implements MiniList <E> 
{
   protected Entry <E> head = null;

   private int size = 0; 
```

我需要为我的实验室实现此方法，但我对 LinkedLists 一无所知：

```
 public boolean add(E element) 
   {

         //method should return true once element is added

         //EDIT: I THINK I SOLVED IT:
         head.element = element;
         return true;

         //Does everyone think the two lines above look correct?
   } 
```

所以非常简单的问题，我对非随机访问数据结构很陌生。有人可以为我解决上述问题吗？我需要一个基础，这样我才能继续实验室的其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:05:44.787

最初，您的**头**成员数据设置为空。如果这是一个要求（而不是最初分配它），您需要在 add() 方法中检查它并在必要时分配它：

```
if ( head == null )
{
    head = new Entry<E>();
    head.element = element;
} 
```

如果 head 不为空，则必须分配一个新条目并允许现有数据通过让新数据引用它来保留列表的一部分：

```
else
{
    Entry<E> new_entry = new Entry<E>();
    new_entry.element = element;
    new_entry.next = head;
    head = new_entry;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T00:11:32.867

好吧，链接列表的工作方式如下：

你有头节点，它有一个对下一个节点的引用，它有对下一个节点的引用，等等。这是我刚刚画的一个图表：

![链表图](../Images/8466986f364ebc5dd2568b64274905b6.png)

头部引用了以下节点，但其中也包含数据。因此，如果我创建一个字符串链接列表。

```
LinkedList<String> groceryList = new LinkedList<String>();
groceryList.add("VEGGIES");
groceryList.add("FRUITS"); 
```

头部有数据 VEGGIES，然后还有对列表中下一个对象的引用，换句话说，FRUITS 术语也是尾部。

假设我们的列表是空的。没有头，没有尾，没有数据。我们将这个头部指定为一个新条目。它将是列表中的第一个元素，也是我们访问列表的入口。如果列表不为空，为了添加到我们的列表中，我们必须访问列表中当前的最后一个元素。要做到这一点，我们必须顺着名单走。

```
//Some Pseudo Code
Entry current = head;
Entry last = null;
while(Not Done Looping)
{
    Entry temp = current.getNext();
    if(temp is not null) //We have a reference to another element
    {
        //We have more list to see
        current = temp;
    }
    else
        last = current;
} 
```

这将给我们最后一个条目。然后为了添加另一个元素，我们只需将最后一个对象的引用设置为我们尝试添加的条目。

这就是它的工作原理。现在你只需要根据你的“Entry”对象来实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:55:43.377

我假设添加意味着向该列表添加一个元素？你试过什么？

您必须处理两种情况：

1.  当列表为空时
2.  当列表不为空时

想想在这两种情况下你需要做什么。

# heroku - 安装heroku eclipse插件的问题

> ID：13021695
> 
> 赞同：1
> 
> 时间：2012-10-22T23:53:19.463
> 
> 标签：heroku

我收到这个错误

```
 Cannot complete the install because one or more required items could not be found. Software being installed: Heroku Eclipse Plugin 1.0.0 (com.heroku.eclipse.feature.feature.group 1.0.0) Missing requirement: Heroku Eclipse Plugin 1.0.0 (com.heroku.eclipse.feature.feature.group 1.0.0) requires 'org.eclipse.m2e.feature.feature.group 1.0.100' but it could not be found 
```

我有日食朱诺。

让我知道我是否可以为您提供任何其他信息以帮助解决此问题。

我有 Ubuntu 12.04LTS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:43:11.850

我收到了同样的错误信息。禁用我的 McAfee 然后重新启动解决了我的问题。我认为这是一个防火墙问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:20:37.663

我有类似的问题。请检查您的 Eclipse 版本。Heroku 说它需要 **Eclipse v 3.7 或更高版本（Java 或 Java EE 版本）** 以下版本适用于我，**Indigo（v 3.7）**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:34:00.463

这（org.eclipse.m2e.feature.feature.group 1.0.100）指的是缺少的插件 - Eclipse 的 Maven 集成。在 Eclipse Marketplace 中搜索该插件。安装完成后，再次尝试安装 Heroku 插件。这在 Indigo 上对我有用。奇怪的是，这没有被列为要求。

# c - C：编辑文件以删除空字符：

> ID：13021702
> 
> 赞同：0
> 
> 时间：2012-10-22T23:54:38.653
> 
> 标签：c, fopen, fclose, fgetc

我认为这将是一项简单的任务，经过几次尝试后，我尝试尝试将经过验证的真实写入临时文件，而不是重新打开并重写：

```
#include <stdlib.h>
#include <stdio.h>
int main()
{
     FILE *f = fopen("main2.c","r");
     FILE *t = fopen("temp","w");
     int c;
     int count = 0;
     while((c = fgetc(f))!=EOF)
     {
          if(c)
          {
               fputc(c,t);
          }
          else
          {
               printf("null found\n");
          }
    }
    fclose(f);
    fclose(t);
    FILE *n = fopen("main2.c","w");
    FILE *w = fopen("temp","r");
    while((c=fgetc(w))!=EOF)
    {
          fputc(c,n);
    }
    fclose(n);
    fclose(w);
    return 0;
} 
```

这只是吐出一堆汉字。潜在的字符编码可能是问题吗？还是我在这里只是个菜鸟？

我的十六进制编辑器不允许我复制/粘贴。我不知道如何才能将文件以原始状态保存在此处，因此我将其压缩在谷歌文档中，如果您无法获取，请立即通知我：

[https://docs.google.com/open?id=0B4UPOuCR5uRGZzJQZUpVaktKYlk](https://docs.google.com/open?id=0B4UPOuCR5uRGZzJQZUpVaktKYlk)

编辑：在这里等待它是通过 HxE 编辑：

```
FF FE 23 00 69 00 6E 00 63 00 6C 00 75 00 64 00 65 00 20 00 3C 00 73 00 74 00 64 00   
6C  00 69 00 62 00 2E 00 68 00 3E 00 0D 00 0A 00 23 00 69 00 6E 00 63 00 6C 00 75 00 64 00 
65 00 20 00 3C 00 61 00 6C 00 6C 00 65 00 67 00 72 00 6F 00 2E 00 68 00 3E 00 0D 00 0A 00 
23 00 69 00 6E 00 63 00 6C 00 75 00 64 00 65 00 20 00 22 00 6D 00 6F 00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:59:52.723

以二进制模式打开文件：

```
 FILE *f = fopen("main2.c","rb");
 FILE *t = fopen("temp","wb"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T02:17:32.330

奇怪的是您正在删除 NULL 字节，因为输入是 UTF-16 Unicode。如果是这样，您还必须删除文件开头的字节顺序标记 (BOM)。如果前两个字节是 0xFF、0xFE 那么你有一个 little-endian UTF-16 文件。丢弃它们！如果保留它们，源代码中的每一对 ASCII 字符都将被视为组合的 16 位字符代码。奇怪的事情会接踵而至。

同样，如果前两个字节是 0xFE、0xFF，则文件是大端 UTF-16，您还必须删除这两个字节，否则文件将再次被视为 16 位代码，只有高字节在前。

# php - 从链接激活外部href onclick

> ID：13021708
> 
> 赞同：0
> 
> 时间：2012-10-22T23:55:13.730
> 
> 标签：php, javascript, jquery

假设您的网站上有一个链接，当您单击该链接时，它会将您带到另一个网站。您不拥有的网站，我希望它已经激活了“onclick”，可能来自重定向到该链接的脚本。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:06:07.803

简单的答案**NO**。如果可能的话，它会被称为***“鼠标劫持”*** :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:58:39.150

在 javascript 中设置`window.location.href`为目标链接 URL，对于大多数浏览器来说，会将浏览器重定向到指定的 URL。

如果您特别想在您的网站上创建一个链接，将用户重定向到 Google 搜索，请阅读[此处](http://www.blueglass.com/blog/google-search-url-parameters-query-string-anatomy/)。

几乎没有*充分的*理由将您不拥有的外部网站包装在框架中。这种东西通常被认为是阴暗的/恶意的。

# c# - 如何使用 WebBrowser 控件捕获 JSON 响应

> ID：13021709
> 
> 赞同：16
> 
> 时间：2012-10-22T23:55:28.223
> 
> 标签：c#, json, webbrowser-control

我使用 POST 到网站的 JSON 响应 URL `WebBrowser.Navigate()`。

一切顺利，包括`webBrowser1_DocumentCompleted()`被调用的事件处理程序。

但是`webBrowser1.Document`，我没有得到一个我可以以编程方式处理的“安静”响应（例如），而是收到一个文件下载对话框：

![在此处输入图像描述](../Images/30cf4c89122f018a17fc876ecaa7f575.png)

如果我单击该`Save`按钮并稍后检查该文件，它将完全包含我期望的 JSON 响应。

但我希望程序在代码中捕获这个 JSON 响应，而不显示该对话框并且必须单击`Save`按钮。

如何使用 WebBrowser 控件捕获 JSON 响应？

*注意：*在发布这个问题之前，我搜索了 SO，我发现的只是一个类似的问题，接受的答案并没有真正解释如何做到这一点（我已经在处理[webBrowser1_DocumentCompleted](https://stackoverflow.com/a/10213240/1088880)）。有小费吗？

**更新：**到目前为止，我的所有搜索都没有产生关于使用 WebBrowser 控件获取 JSON 响应的任何信息。也许我正在接近这个完全错误的？我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T12:03:27.510

不要`WebBrowser`用于 JSON 通信。改用[WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)：

```
//
//    EXAMPLE OF LOGIN REQUEST 
//

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            // Create a request using a URL that can receive a post. 
            WebRequest request = WebRequest.Create("http://getting-started.postaffiliatepro.com/scripts/server.php");
            // Set the Method property of the request to POST.
            request.Method = "POST";
            // Create POST data and convert it to a byte array.
            //WRITE JSON DATA TO VARIABLE D
            string postData = "D={\"requests\":[{\"C\":\"Gpf_Auth_Service\", \"M\":\"authenticate\", \"fields\":[[\"name\",\"value\"],[\"Id\",\"\"],[\"username\",\"user@example.com\"],[\"password\",\"ab9ce908\"],[\"rememberMe\",\"Y\"],[\"language\",\"en-US\"],[\"roleType\",\"M\"]]}],  \"C\":\"Gpf_Rpc_Server\", \"M\":\"run\"}";
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);
            // Set the ContentType property of the WebRequest.
            request.ContentType = "application/x-www-form-urlencoded";
            // Set the ContentLength property of the WebRequest.
            request.ContentLength = byteArray.Length;
            // Get the request stream.
            Stream dataStream = request.GetRequestStream();
            // Write the data to the request stream.
            dataStream.Write(byteArray, 0, byteArray.Length);
            // Close the Stream object.
            dataStream.Close();
            // Get the response.
            WebResponse response = request.GetResponse();
            // Display the status.
//            Console.WriteLine(((HttpWebResponse)response).StatusDescription);
            // Get the stream containing content returned by the server.
            dataStream = response.GetResponseStream();
            // Open the stream using a StreamReader for easy access.
            StreamReader reader = new StreamReader(dataStream);
            // Read the content.
            string responseFromServer = reader.ReadToEnd();
            // Display the content.
            Console.WriteLine(responseFromServer);
            // Clean up the streams.
            reader.Close();
            dataStream.Close();
            response.Close();

        }
    }
} 
```

[您可以在此C# .NET 与 API 通信文章](http://support.qualityunit.com/354854-C-NET-communication-with-API)和[此线程](https://stackoverflow.com/q/5756147)中找到更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-12T13:36:34.887

我和 Scatmoi 有同样的问题，但由于登录要求，我无法使用 Web 请求。我试图修改上面的答案，看看我是否可以通过登录身份验证，但没有运气。

-更新-

我刚刚找到了适合我的解决方案。有关更多信息，请参阅以下链接，但以防万一我在此处粘贴了答案。[http://www.codeproject.com/Tips/216175/View-JSON-in-Internet-Explorer](http://www.codeproject.com/Tips/216175/View-JSON-in-Internet-Explorer)

需要在 IE 中查看 JSON 响应？1.打开记事本并粘贴以下内容：

```
Windows Registry Editor Version 5.00;
; Tell IE 7,8,9,10 to open JSON documents in the browser on Windows XP and later.
; 25336920-03F9-11cf-8FD0-00AA00686F13 is the CLSID for the "Browse in place" .
;
[HKEY_CLASSES_ROOT\MIME\Database\Content Type\application/json]
"CLSID"="{25336920-03F9-11cf-8FD0-00AA00686F13}"
"Encoding"=hex:08,00,00,00 
```

2.将文档另存为IE-Json.reg，然后运行。

注意：这已经在 Windows XP 和 Windows 7 上使用 IE 7、8、9、10 进行了测试。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-07T05:45:20.563

上面的解决方案缺少两件事，下面的代码应该适用于各种情况：

```
Windows Registry Editor Version 5.00
;
; Tell IE to open JSON documents in the browser.  
; 25336920-03F9-11cf-8FD0-00AA00686F13 is the CLSID for the "Browse in place" .
;  

[HKEY_CLASSES_ROOT\MIME\Database\Content Type\application/json]
"CLSID"="{25336920-03F9-11cf-8FD0-00AA00686F13}"
"Encoding"=hex:08,00,00,00

[HKEY_CLASSES_ROOT\MIME\Database\Content Type\application/x-json]
"CLSID"="{25336920-03F9-11cf-8FD0-00AA00686F13}"
"Encoding"=hex:08,00,00,00

[HKEY_CLASSES_ROOT\MIME\Database\Content Type\text/json]
"CLSID"="{25336920-03F9-11cf-8FD0-00AA00686F13}"
"Encoding"=hex:08,00,00,00 
```

只需将其保存为 json.reg 文件，然后运行以修改您的注册表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-02T15:40:45.207

作为对 gadildafissh 和 Tomasz Maj 的 awnser 的扩展，这可以通过编程方式完成。只有一个缺点，这必须以管理员权限完成。我的示例是针对 64 位设备上的 32 位应用程序。

```
 private bool SetRegistery()
    {
        try
        {
            using (var hklm = RegistryKey.OpenBaseKey(RegistryHive.ClassesRoot, RegistryView.Registry64))
            {
                using (RegistryKey key = hklm.OpenSubKey(@"MIME\Database\Content Type\application/json", true))
                {
                    if (key != null)
                    {
                        key.SetValue("CLSID", "{25336920-03F9-11cf-8FD0-00AA00686F13}");
                        key.SetValue("Encoding", new byte[] { 0x80, 0x00, 0x00, 0x00 });
                    }
                }
            }
            return true;
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        return false;
    } 
```

# ios - 在 Cocos2d for iPhone 中使用 GDataXmlNode 将 xml 文档解析为数组

> ID：13021710
> 
> 赞同：0
> 
> 时间：2012-10-22T23:55:29.180
> 
> 标签：ios, xml, cocos2d-iphone, xml-parsing

因此，我在网上找不到任何将 xml 文档解析为数组的方法的教程，所以我尝试自己以这种方式实现它：

```
NSMutableArray *data = [[[NSMutableArray alloc] init] autorelease];

NSString *filePath = [self dataFilePath:FALSE forWorld:world];
NSLog(@"filePath = %@",filePath);
NSData *xmlData = [[NSMutableData alloc] initWithContentsOfFile:filePath];
NSError *error;
GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:xmlData options:0 error:&error];
if (doc == nil) {return nil; NSLog(@"xml file is empty!");}
NSLog(@"Loading %@", filePath);

NSArray *dataArray = [doc nodesForXPath:@"//Levels/level" error:nil];
NSLog(@"Array Contents = %@", dataArray);

for (GDataXMLElement *element in dataArray) {
    NSArray *dataArrayContainer= [doc nodesForXPath:@"//Levels/level/data" error:nil];
    NSMutableArray *rowArray = [NSMutableArray array];
    int i=0;
    int j;

    for (GDataXMLElement *element in dataArrayContainer) {
        NSArray *dataPointArray = [element elementsForName:@"p"];
        if (dataPointArray.count > 0 && i <= dataPointArray.count) {
            NSLog(@"current i is %i",i);
            GDataXMLElement *dataArrayElement = (GDataXMLElement *) [dataPointArray objectAtIndex:i];
            NSNumber* dataElement = [NSNumber numberWithInt:[[dataArrayElement stringValue] intValue]];
            [data addObject: dataElement];

            i++;
        }
    }
Level *level = [[Level alloc] initWithdata:data];
[levels.levels addObject:level];
} 
```

我的 xml 看起来像这样：

```
<Levels>
<level>
    <name> world1Level1 </name>
    <number> 1 </number>
    <unlocked> 1 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>1</b> <b>15</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>1</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>1</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>1</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>1</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>1</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>1</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>1</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>1</b> <b>0</b> <b>0</b> </row>
    </blocks>

</level>

<level>
    <name> world1Level2 </name>
    <number> 2 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>

</level>

<level>
    <name> world1Level3 </name>
    <number> 3 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level4 </name>
    <number> 4 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level5 </name>
    <number> 5 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level6 </name>
    <number> 6 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level7 </name>
    <number> 7 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level8 </name>
    <number> 8 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level9 </name>
    <number> 9 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level10 </name>
    <number> 10 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level11 </name>
    <number> 11 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level12 </name>
    <number> 12 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level13 </name>
    <number> 13 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data> </data>

</level>

<level>
    <name> world1Level14 </name>
    <number> 14 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level15 </name>
    <number> 15 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level16 </name>
    <number> 16 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level17 </name>
    <number> 17 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level18 </name>
    <number> 18 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level19 </name>
    <number> 19 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>

<level>
    <name> world1Level20 </name>
    <number> 20 </number>
    <unlocked> 0 </unlocked>
    <cheeses> 0 </cheeses>
    <data>
        <p>3</p><p>9</p><p>6</p><p>9</p><p>3</p><p>1</p><p>0</p><p>15</p><p>25</p><p>0</p><p>0</p>
    </data>
    <blocks>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
        <row> <b>0</b> <b>0</b> <b>0</b> <b>0</b> <b>0</b> </row>
    </blocks>
</level>
</Levels> 
```

但是我只希望数组数据一次包含一个级别节点的值，显然问题在于当我编写时：`NSArray *dataArrayContainer= [doc nodesForXPath:@"//Levels/level/data" error:nil];`它将所有级别节点的数据节点放入数组 dataArrayContainer 中，这根本不是我想要的它只放置当前选定级别的数据节点。但是我似乎找不到任何方法来做到这一点，我在网上找不到任何地方显示如何将变量发送到 nodesForXPath 所以我不知道这将如何成为可能：/ 任何人?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:23:50.870

这将为您提供所有元素（级别）数据下的所有节点，其中元素“name”的值为“world1Level20”：

```
NSArray *nodes = [xmlDoc nodesForXPath:@"//*[contains(name,'world1Level20')]/data" error:nil]; 
```

# reporting-services - SSRS 2008 - 创建有向图图表以可视化 ETL 作业

> ID：13021714
> 
> 赞同：0
> 
> 时间：2012-10-22T23:55:40.390
> 
> 标签：reporting-services, ssrs-2008, directed-graph

我找不到任何暗示对图表数据结构（也被某些人称为“网络图”）以及在我的情况下是有向图的本机支持的任何内容。我想在工作中创建我们的 ETL 依赖链的可视化，以显示每个不同的“工作”在能够继续之前所依赖的步骤。

## 问题：

*   有没有人能够“模拟\破解\解决方法”这种在 SSRS 中缺乏开箱即用的功能？
*   如果以前没有人想过这样做，关于如何实现这一目标的任何想法？

**编辑 - 2014-10-30**
两年没有答案，所以我接受了最有希望的解决方法来获得所需的建议，因为没有找到直接的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:39:57.790

从左侧字段：您可以将 SSIS 包包裹在“ETL 作业”周围。SSIS 控制流表面有一个用于表达任务依赖关系的 GUI。如果不是视觉上的突出，它是功能性的。您的“ETL 作业”可以是执行 SQL 任务或执行流程任务对象。您可以连接优先约束以显示依赖关系。

这可以用于实际使用，也可以仅用于文档目的。如果您真正使用它，您会发现它是控制 ETL 依赖性和并行性的好方法。

# iphone - UIPopoverController？在弹出框控制器外点击时无法关闭

> ID：13021719
> 
> 赞同：0
> 
> 时间：2012-10-22T23:56:05.243
> 
> 标签：iphone, objective-c, ipad, uipopovercontroller

在我将项目更改为通用应用程序并切换到 Xcode 的更新版本后，我遇到了一个问题。

目前，我的应用程序有一个导航栏和一个带有按钮的控制器。当用户单击该按钮时，它将弹出一个 UIPopoverController。这里一切都很好。现在我尝试与 UIPopoverController 中的列表进行交互，列表中没有任何反应。此外，当我尝试通过在弹出框控制器外部点击来关闭弹出框控制器时，弹出框确实会关闭，我什至可以与弹出框控制器后面的控件进行交互。

在我将 Xcode 更新到最新的 IOS 之前，它运行良好。在我更改的代码中，让 xib 文件具有窗口视图，在应用程序委托文件中，我初始化了该 xib 文件。

这显示在下面的代码中。

```
TViewController* controller = [[TController alloc] initWithNibName:@"MainViewController_IPad" bundle:NULL];
[controller.navigationController setNavigationBarHidden:TRUE animated:TRUE];
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
[self.window setRootViewController:controller];
[self.window makeKeyAndVisible];

//((TopicShowViewController*)self.window.rootViewController).navigationController.navigationBarHidden = true;
self.navigationController = ((TopicShowViewController*)self.window.rootViewController).navigationController;
self.navigationController.navigationBarHidden = true;
[controller release]; 
```

上面的代码，我必须创建窗口对象，但 TViewController 本身已经有一个窗口对象。如果我在没有 xib 文件中的窗口对象或从上面的代码显式初始化窗口对象的情况下运行它，则 TViewController 将不会按预期显示。

我不知道这里出了什么问题...抱歉，描述可能太长而无法理解，但请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:01:52.560

*通用应用程序*是设计用于在 iPhone 和 iPad 上运行的应用程序。但是，iPhone 不支持 UIPopoverController。如果您尝试在 iPhone 上打开弹出框，您的应用程序将引发异常。

# javascript - 如果它们链接到比某个值更深的节点，则从 d3.layout.tree() 过滤线

> ID：13021722
> 
> 赞同：0
> 
> 时间：2012-10-22T23:56:17.787
> 
> 标签：javascript, d3.js

使用 a`d3.layout.tree()`我正在尝试过滤选择以仅包含链接`nodes`深度小于的链接线`leafDepth`

以下行是我尝试这样做的方式：

```
links.enter().filter(function(d){return d.target.depth < leafDepth;}).... 
```

没有过滤器，图形绘制得很好，但是添加过滤器后，我在控制台中收到以下错误：

```
Uncaught TypeError: Cannot read property 'depth' of undefined 
```

您可以看到我`d.target`在`linkKey`. 所以我不明白为什么`d.target`稍后当我尝试检查`d.target.depth`我知道所有元素都存在哪些时未定义？关于使用身份功能“获取”数据时会发生什么，我是否遗漏了什么？`var link = links.selectAll("path.treeline").data( function(d){return d;} , linkKey);`

再一次，这一切都很好，直到我添加该行`.filter(function(d){return d.target.depth < leafDepth;})`

这是我的图形绘制功能的主要部分（不包括随后的一堆 getter/setter）

```
Tree = function () {

    var width = 1000,  //default width
        height = 1000, //default height
        left = 0,
        top = 0,
        leafDepth = 5, // depth at which leaf nodes are at
        leafClick = function (d){return console.log(d);},
        linkKey, // key function for links
        pathGenerator = d3.svg.diagonal().projection( function(d) {  
                            return [d.x, height-d.y]; }),
        childrenKey = function(d) { 
                            return (!d.values || d.values.length === 0) ? null : d.values; },
        linkKey = function(d) { return d.source.key+"_"+d.target.key; }
    ;

    function chart(selection) {
        selection.each(function (d) {

            // setup layout
            var tree = d3.layout.tree()
                .size([width,height])
                .children( function(d) {
                    return (!d.values || d.values.length === 0) ? null : d.values;
                });

            var nodeData = tree.nodes(d);
            var linkData = tree.links(nodeData);

            // 'this' is the selection
            var links = d3.select(this).selectAll("g#links")
                .data( [linkData] );

            links.enter()
                .append("g")
                .attr("transform", "translate("+left+", "+top+")")
                .attr("id","links");

            var linkKey = function(d) { return d.source.key+"_"+d.target.key; }            
            var link = links.selectAll("path.treeline")
                .data( function(d){return d;} , linkKey);

            link.enter()
                .filter(function(d){return d.target.depth < leafDepth;}) // PROBLEM HERE !!
                .append("svg:path")
                .attr("class", "treeline")
                .attr("d", pathGenerator);

            link.transition()
                .attr("d", pathGenerator);

            link.exit()
                .remove();    

        });

        return chart;
    };

    // a bunch of getter/setters for the vars defined at top

    return chart; // this is using a version of the re-usable chart pattern by the way 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:28:26.123

将过滤器移动到数据分配是可行的，尽管这意味着它们已完全从`join`.

```
var linkLeafFilter = function(d){return d.target.depth < leafDepth;}
var link = links.selectAll("path.treeline")
                .data( function(d){return d.filter(linkLeafFilter);} , linkKey); 
```

# html - HTML5 可以与扫描仪和信用卡读卡器等外围设备通信吗？

> ID：13021723
> 
> 赞同：67
> 
> 时间：2012-10-22T23:56:54.747
> 
> 标签：html, peripherals

我的公司编写了安装在客户端机器上以执行销售点交易的软件。该软件与各种外围设备（收据打印机、条形码扫描仪、信用卡阅读器等）连接。我们使用 Microsoft OPOS 库在 Visual Studio 中创建的 WinForms 应用程序执行此操作，该库又与我们的云服务器通信。

这个模型有明显的低效率，主要是更新。我正在研究通过网络与这些外围设备进行通信的其他方法，最好是通过网络浏览器。据我所知，Java 是仅有的可以做我们正在寻找的事情的技术之一（通过小程序），我认为 Adob​​e Flash 也可以（通过 Air 平台）。这些都是可行的，但并不可取，因为我们希望在支持网络的移动设备上运行我们的软件。

有人对通过网络与外部外围设备进行通信的其他方式有建议吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-10-23T01:05:30.000

**更新（2019 年 1 月 16 日）：**凭据[管理 API](https://developer.mozilla.org/en-US/docs/Web/API/Credential_Management_API#Browser_compatibility)已发布。它[目前仅在 Chrome 和 Opera 上受支持，](https://caniuse.com/#feat=credential-management)但看起来很有希望。Google Developers 写[了一篇文章](https://developers.google.com/web/fundamentals/security/credential-management/)详细阐述了该规范。

**更新（2016 年 12 月 28 日）：**又过了几年，又一次更新。这将比其他任何事情都更关注两个新的发展。请参阅“完整设备 API”下的新“WebUSB 和 Web 蓝牙”部分。但答案还是一样的。

**更新（2014 年 11 月 3 日）：**距离原帖发布已经过去了两年多，但目前的答案基本相同。然而，我们在几个方面更接近您的原始目标。

**原始答案：**

有很多方法可以解决这个问题。

## 背景

HTML5 规范已进入“推荐”状态。这意味着 HTML5 几乎是为它的外观设置的。但是，我将按照世界上每个营销人员都认为最好的方式使用 HTML5。也就是说，我不会谈论 HTML。好吧，我会的，只要你会从 HTML 页面使用它，但不是真的。我实际上要讨论的是 JavaScript (JS)，[这是一匹不同颜色的马](http://en.wikipedia.org/wiki/ECMAScript#History)。但出于所有意图和目的，我们将其全部放在与 HTML5 相同的标题下，现在已决定将其表示为“闪亮和新”。

此外，我正在讨论的项目将在支持方面有所不同。有些是非常依赖于浏览器的项目（例如 Chromium 特定的实现），有些是更多标准驱动的项目，可能还没有浏览器实现或试验它们。我会尽量区分这两者。

## 完整的设备 API

**状态：即将到来，但尚未准备好**

能够从浏览器访问设备的进展缓慢但稳定。目前，许多现代浏览器都可以访问一些更常见的设备，例如[相机](https://developer.mozilla.org/en-US/docs/Web/Guide/API/WebRTC)或[游戏手柄](https://developer.mozilla.org/en-US/docs/Web/API/Gamepad)，但它们都是高级 API。[浏览器供应商](https://wiki.mozilla.org/WebAPI)、[标准组织](http://www.w3.org/2009/dap/)和许多与网络相关的公司都在努力使网络应用程序与本地应用程序一样强大。

但是您正在寻找的 API 仍在进行中，还有很长的路要走。对于您的特定情况，以及将您的 web 应用程序连接到大多数设备的更一般情况，我们距离我们可以使用的东西还有几年的时间。如果您想了解该领域正在发生的令人敬畏的事情，这里只是选择了一些可以直接帮助您的项目：

*   [Web 近场通信 (NFC) API](http://www.w3.org/TR/2014/WD-nfc-20140114/)
    不幸的是，这个 API 现在可能已经死了。但看起来最初 W3C 的一些人（看起来主要是英特尔）正在考虑向网络添加 NFC API。
*   [媒体捕获流](http://www.w3.org/TR/2012/WD-mediacapture-streams-20120628/)
    WebRTC 小组正致力于以编程方式访问像相机这样的媒体流，这将允许集成条形码扫描或其他功能等功能。这已达到 CR 状态并且[在浏览器中可用](http://caniuse.com/#feat=stream)，但它本身的帮助较小。
*   [网络蓝牙](https://webbluetoothcg.github.io/web-bluetooth/)
    如果您有支持蓝牙的工具，此 API 将帮助您从能够收听和连接的计算机和设备与它们连接。目前，主要驱动力似乎是 Chrome 团队，包括一个实验性实现，但我认为它还没有准备好使用（参见“WebUSB 和 Web 蓝牙”部分）。
*   [WebUSB](https://wicg.github.io/webusb/)
    这将允许完全访问低级 USB 信息，包括列出设备并与它们交互。与网络蓝牙相同，这似乎是当前的 Chrome 宠物项目，但我也不会依赖它（参见“WebUSB 和网络蓝牙”部分）。
*   [网络服务发现](http://www.w3.org/TR/2014/WD-discovery-api-20140220/)
    如果您在网络上有其他设备或项目广播和使用 HTTP，此 API 将允许您发现这些服务并与之交互。没有浏览器实现，但它在 W3C 的工作草案中。

最初，Mozilla 是因为 Boot2Gecko（或 Firefox OS）而推动了其中的一些发展。但是，随着该项目的正式取消，我们现在在这些领域没有看到他们取得太大进展。

然而，Chrome 团队的成员似乎已经决定深入研究并开始不仅致力于这些，而且将它们放在浏览器中。这导致我们...

### WebUSB & 网络蓝牙

> 像香肠一样，最好不知道 Web 标准是如何制定的
> ——Abraham Lincoln（可能）

在这个领域有一点点嗡嗡声，因为看起来 Chrome 团队偷偷地将这些作为实验性功能并为其开发了自己的规范。太棒了！只是也许不是你所希望的那样。

每个浏览器供应商和 W3C 贡献者组都有自己的风格，并以自己的方式为规范做出贡献。结果*通常*是浏览器同意的相当不错的规范。但是从无到有是……混乱。真乱。很多时候都是一个过程。它并不总是会产生一个好的规范（是的，我说的是你的弗洛里安妥协......）但即使它做到了，也需要一段时间。

然而，谷歌似乎是自己开发了这个版本的规范。而且，根据我的经验，Google 对规格的处理方式总是有点……嗯……抛开我的个人意见，我们会说“gung-ho”。他们倾向于直接潜入深渊。这似乎就是他们在这里所做的。

**我非常怀疑这些规范或实现在成为标准时会看起来像这样**。这并没有错。这是过程的一部分。但我不会依赖这个实现或开发任何代码或产品。这是网络上前所未有的功能，所有浏览器供应商都希望在这方面有很大的发言权。

也就是说，这实际上很好。在这种情况下，谷歌经常做的一件事（无论好坏）是强迫对话，它可以推动事情的发展。并且在浏览器中提供一个功能，即使是一个实验性功能，也会增加对它的需求。因此，我们可能很快会在该领域看到更多进展。

## ~~电话间隙~~阿帕奇科尔多瓦。你知道，为了你的手机

**状态：功能不全，仅电话**

[Apache Cordova](http://incubator.apache.org/cordova/)，以前的[Adob​​e PhoneGap](http://phonegap.com/)，是一种用 HTML、CSS 和 JS 编写程序的方法，它允许您访问手机等较低级别的功能，并跨设备编译。这将是实现您的程序的一种方式，但它将是一个电话应用程序，不一定是桌面应用程序。一个要考虑的选项，我想我会提到的。

Cordova 已经实现了上述一些功能，但没有一些更强大的功能，如 NFC 或蓝牙。

## Native-App 解决方案（适用于 Windows 8）

**状态：可能，但特定于操作系统和桌面应用程序**

Windows 8 提供了以 HTML 和 JS 构建应用程序的能力。这将允许您通过[其 API](http://msdn.microsoft.com/en-us/library/windows/apps/br211377)轻松访问操作系统上的较低级别功能。从外观上看，它非常广泛，您可以做很多事情。但是，您提到了跨操作系统支持，这显然将您限制在一个操作系统上。

## 太闪了！

**状态：Dying/Dead，无法作为 Web 应用程序**

Flash 无法通过网络直接访问系统。您可以创建一个 AIR 应用程序，但这会破坏基于 Web 的目的。此外，移动设备和网络上的 Flash 支持正在下降。

## 节点JS

**状态：可能有点痛苦，只能作为桌面应用程序**

NodeJS 和 JS 应用程序在过去几年一直是一个热门话题。我没有在我的原始帖子中讨论它，因为我觉得它还没有完全存在。然而，事情已经取得了进展，它更接近于为这类事情做好准备，并且拥有不断增长的用户群的支持和力量。也就是说，对于您的特定情况，我不建议使用它。它必须在用户机器上是本地的，并且由于 NodeJS（和类似引擎）目前的情况，它需要大量额外的配置和设置，这会使事情变得有点复杂。

因此，您可以使用带有 NodeJS 或类似引擎的 HTML、CSS 和 JS 构建应用程序，并且对您需要的内容具有低级别访问权限，但它必须是本地的，而且它需要的工作量比我确定的要多您想为客户安装它的时间。

## ...现在我在哪里？

那么，我们将何去何从？好吧，很简单：如果您想要一种语言/一组代码作为您的代码库，那么 HTML/CSS/JS 并不是一个很好的选择……但是。但他们可能有一天会到来。目前，您的选择仅限于您认为最适合您的客户的选项。Java 是您列出的稳定选项，但显然有其自身的缺点。随着网络的发展，我认为我们会看到很多非常酷的东西从新功能中涌现出来，但我们还有很长的路要走。

### 更多阅读：

*   [Brian.IO：超越 HTML5](http://brian.io/slides/beyond-html5/)
*   [Windows 8 上的 HTML5 应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/br211385.aspx)
*   [使用 JS 构建的项目的维基百科列表](http://en.wikipedia.org/wiki/JavaScript#Uses_outside_web_pages)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-22T23:59:52.600

这是可能的，但必须间接进行。理论上，您可以用低级语言编写一个套接字服务器，它获取 I/O，并通过套接字发送 I/O（我猜是中继）。HTML5 使用 WebSockets 或类似的东西来与这个套接字服务器通信。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-02T21:17:59.480

现在可以通过[WebUSB](https://wicg.github.io/webusb/) API 来实现。

从 54 版开始，它[在 Chrome 中可用。](https://developers.google.com/web/updates/2016/03/access-usb-devices-on-the-web)

这是 W3C 编辑的草稿，因此我们可以期待（希望）它会被其他浏览器供应商采用...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-14T20:21:34.473

我最近一直在考虑这个问题......有一个主要用 VB6 编写的 POS 应用程序，考虑下一步该做什么。HTML5 是一个选项，我想我会使用 VSPE 将串行内容放入 JS 中。

[http://www.eterlogic.com/Products.VSPE.html](http://www.eterlogic.com/Products.VSPE.html)

喜欢这个产品！非常适合在您需要的地方获取串行流量，所以我认为它会很好用，至少作为一个概念验证可以让您继续前进。您需要结合使用“连接器”类型以及“tcpclient”和“tcpserver”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-16T13:55:21.457

仅作记录，一种在 2016 年运行良好（自 chrome 26 起）但将[在未来 2 年内撤销的](https://blog.chromium.org/2016/08/from-chrome-apps-to-web.html)方法是将您的 html5 部署为 chrome 应用程序并使用[chrome.usb](https://developer.chrome.com/apps/app_usb)（或 chrome.serial 或 chrome.serial）。蓝牙）。

我目前正在使用 chrome.usb 并计划使用[WebUSB API](https://wicg.github.io/webusb/)迁移到 Web 应用程序（请参阅 Supersharp 的答案），我希望在 Google 停止 chrome 应用程序时能够采用。

# php - 使php文件对外界隐藏

> ID：13021724
> 
> 赞同：7
> 
> 时间：2012-10-22T23:56:54.207
> 
> 标签：php, mysql, apache, security

我的 php 网站有多个 php 文件，其中一些用于用户界面，其中一些是帮助文件（这些文件通过数据库通信并相互返回结果）。现在我需要该用户不能从他们的直接 url 执行帮助文件。

```
e.g. mydomain.com/login.php   ---------- (Interface file, must be accessible to user)
     mydomain.com/login_handle.php   ----(Healper file, must not be accessible to user) 
```

所以我需要的是用户可以执行和浏览mydomain.com/login.php但不能执行mydomain.com/login_handle.php，而login.php和handle_login.php保持通信并且可以互相访问。谢谢，

**编辑：**抱歉，我使用的是共享主机，**除了 public_html 之外没有其他文件夹**。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T01:42:12.247

我会尝试的第一件事：

1.  将包含的文件移到文档根目录之外

2.  将包含的文件移动到另一个文件夹中并使用`.htaccess`. 或者，重命名您的包含文件以结束`.inc`并基于此创建规则。

3.  确保包含的文件不输出任何内容；这不是很安全，但如果你的文件只包含函数、类定义等而不产生任何输出，它只会显示一个空页面。

可以通过使用常量来完成这种骇人听闻的方法：

索引.php

```
<?php

define('MY_CONSTANT', '123');

include('helper.php'); 
```

助手.php

```
<?php

if (!defined('MY_CONSTANT')) { exit; }

// we were called from another file
// proceed 
```

**编辑**

上面的第 2 种方法可以通过以下方式完成：

1.  在下面创建一个文件夹`public_html`，例如`includes/`

2.  将所有应该包含的文件移动到此文件夹中

3.  在里面添加以下`.htaccess`内容：

    ```
    <FilesMatch "\.php$">
    Order allow, deny
    Deny from all
    </FilesMatch> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T00:08:26.207

尝试使用 .htaccess。

而不是 127.0.0.1 这个 ip，你需要输入你的服务器 ip 地址。

```
<Files login_handle.php>
    Order Allow,Deny
    Deny from all
    Allow from 127.0.0.1
</Files> 
```

# javascript - 使用javascript随机点击div

> ID：13021727
> 
> 赞同：-1
> 
> 时间：2012-10-22T23:57:41.813
> 
> 标签：javascript, html, random, click

我有 2 个具有 2 个不同类别的 div：

1.  div类名是：好

2.  div类名是：坏

我想为这个 div 随机点击 javascript（用户脚本）。我从来没有用 javascript 编码，我只是在互联网上找到了这段代码。

我有这个代码：

```
function addJQuery(callback) {
  var script = document.createElement("script");
  script.setAttribute("src", "http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js");
  script.addEventListener('load', function() {
    var script = document.createElement("script");
    script.textContent = "(" + callback.toString() + ")();";
    document.body.appendChild(script);
  }, false);
  document.body.appendChild(script);
}

function main() {
setInterval(function(){
$('div.good').click();
$('div.bad').click();
}, 5000);

}
addJQuery(main); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:08:25.157

看起来您想要做的是使用这两个 div 之一执行操作。假装点击是没有意义的，因为它所做的只是运行代码，它可以很容易地以另一种更方便的方式执行。单击 div 时，您希望发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:19:24.123

首先，2个问题：

1.  你想达到什么目的？您提出的任务相当奇怪，我想不出任何无法以其他方式完成的应用程序。
2.  您是否有理由异步附加 jQuery？

尽管如此，以下代码将在页面加载后 30 秒将点击事件发送到随机选择的两个 div 之一。

```
function main() {
    setTimeout(function() {
        if (Math.random() < 0.5)
            $('div.good').click();
        else
            $('div.bad').click();
    }, 30*1000);
} 
```

一个更通用的解决方案是编写一个随机选择函数，它从一组 N 个项目中随机选择。

```
Math.randomChoice = function(collection) {
    return collection[Math.floor(Math.random() * collection.length)];
};

function main() {
    setTimeout(function() {
        var elem = Math.randomChoice(['good', 'bad']);
        $('div.' + elem).click();
    }, 30*1000);
} 
```

# c++ - 将可变数量的参数传递给构造函数

> ID：13021728
> 
> 赞同：4
> 
> 时间：2012-10-22T23:58:01.483
> 
> 标签：c++, c++11

我想完成以下任务：

```
Entity e;
e.AddComponent<CPosition>(128, 128); //method should instantiate a new CPosition(128,128)
e.AddComponent<CSprite>(some, other, args); //etc 
```

重要的部分是 AddComponent 方法。它应该尝试使用传递的参数构造泛型类型。我相信 C++11 的可变参数模板可以将参数转发给构造函数。但是，我还没有访问此功能（VS2010）。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T00:05:21.033

编写一堆重载，每个重载都有不同数量的参数。

```
class Entity
{
public:
 template<typename T>
 void AddComponent() { component_ = new T(); }

 template<typename T, typename T1>
 void AddComponent(T1 t1) { component_ = new T(t1); }

 template<typename T, typename T1, typename T2>
 void AddComponent(T1 t1, T2 t2) { component_ = new T(t1, t2); }

 // etc
 ...
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T00:06:30.803

检查 boost::container::vector::emplace_back 是如何实现的：http: [//www.boost.org/doc/libs/1_51_0/boost/container/vector.hpp](http://www.boost.org/doc/libs/1_51_0/boost/container/vector.hpp)

它使用 Boost.Preprocessor 自动生成采用不同数量参数的函数。它生成一些预定义数量的函数。

因此，您不必手动编写每个重载。相反，您只能编写一次您的模式。

例如：

```
#include <boost/preprocessor/iteration/local.hpp>
#include <boost/preprocessor/repetition/enum.hpp>
#include <boost/preprocessor/repetition/enum_trailing_params.hpp>

struct Entity
{
#define ENTITY_PP_PARAM_LIST(z, n, data) const BOOST_PP_CAT(P, n) & BOOST_PP_CAT(p, n)
#define ENTITY_PP_PARAM_PASS(z, n, data) BOOST_PP_CAT(p, n)

#define BOOST_PP_LOCAL_MACRO(n) \
    template<typename GenericType BOOST_PP_ENUM_TRAILING_PARAMS(n, typename P) > \
    void AddComponent(BOOST_PP_ENUM(n, ENTITY_PP_PARAM_LIST, _)) \
    { \
        something=new GenericType(BOOST_PP_ENUM(n, ENTITY_PP_PARAM_PASS, _)); \
    } \
    /**/

#define BOOST_PP_LOCAL_LIMITS (0, 3)
#include BOOST_PP_LOCAL_ITERATE()
}; 
```

预处理扩展为：

```
struct Entity
{
    template<typename GenericType  >
    void AddComponent()
    {
        something=new GenericType();
    }

    template<typename GenericType , typename P0 >
    void AddComponent( const P0 & p0)
    {
        something=new GenericType( p0);
    }

    template<typename GenericType , typename P0 , typename P1 >
    void AddComponent( const P0 & p0 , const P1 & p1)
    {
        something=new GenericType( p0 , p1);
    }

    template<typename GenericType , typename P0 , typename P1 , typename P2 >
    void AddComponent( const P0 & p0 , const P1 & p1 , const P2 & p2)
    {
        something=new GenericType( p0 , p1 , p2);
    }
}; 
```

# iphone - 从 UIViewcontroller 加载 UITabbarcontroller

> ID：13021730
> 
> 赞同：0
> 
> 时间：2012-10-22T23:58:17.030
> 
> 标签：iphone, ios, cocoa-touch

我正在尝试使用四个 UIViewController 开发一个标签栏控制器应用程序。我已经编写了我的应用程序。现在我需要在我的应用程序中添加登录。我添加了一个单独的 UIViewcontroller 用于登录（它不是 TabbarController 的一部分）。登录工作正常。登录成功后如何加载 UITabbarcontroller。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:01:49.727

一个解决方案是创建一个 UINavigationController 来容纳登录视图，并在登录完成后将 UITabViewController 推送到导航控制器上。它运作良好，您可以隐藏导航栏，这样用户就不会跳回登录（除非您想要这个）。

您也可以只换掉窗口的 rootviewcontroller，但我更喜欢导航控制器解决方案，您可以轻松地 popToRootViewController 在需要时返回登录。

# javascript - 如果源页面发生更改，则自动重新加载 iframe

> ID：13021732
> 
> 赞同：0
> 
> 时间：2012-10-22T23:58:19.617
> 
> 标签：javascript, iframe, automation, reload, detect

我不知道我的代码有什么问题，即使我更改了目标文件的内容，它仍然不会刷新 iframe。

```
<script type="text/javascript">
var page = 'data/apps/<? echo $_SESSION['name']; ?><? echo $_SESSION['last']; ?>App.html', lM;

function checkModified(){
   $.get(page, function(a,a,x){
      var mod = x.getResponseHeader('last-modified');
      if(lM != mod){
         lM = mod;
         document.getElementById("frame").src += "";
      }
   }
}

setInterval(checkModified, 5000); // every 5 seconds
</script> 
```

我想要实现的是当目标页面发生更改时，iframe 会自动重新加载，以便将更改显示给用户。两个页面都位于同一个域中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:56:58.837

首先，您在方法末尾缺少一个右括号“）” `$.get`。

但是，主要问题可能是您的服务器没有发送正确的`Last-Modified`标头。我测试的服务器没有发送任何内容，意思`mod`是未定义的。一种解决方法是改为检查`Content-Length`。这并不理想，因为编辑后的页面不一定会改变大小，但您似乎可以控制页面，因此您可以确保添加额外的字节来强制刷新。

这是您`checkModified`更新的功能，应该可以工作：

```
function checkModified() {
   $.get(page, function(a, b, x) {
      var mod = (x.getResponseHeader('Last-Modified')) ? x.getResponseHeader('Last-Modified') : x.getResponseHeader('Content-Length');
      if (lM != mod) {
         lM = mod;
         console.log('Fetched');
         document.getElementById("frame").src += "";
      }
   });
} 
```

# ios - CCSpriteBatchNode addChild？

> ID：13021737
> 
> 赞同：0
> 
> 时间：2012-10-22T23:58:52.453
> 
> 标签：ios, cocos2d-iphone, exc-bad-access, ccsprite, ccspritebatchnode

是否可以将一个子节点添加到本身作为批处理节点的子节点添加的 CCSpriteBatchNode 中？当我为它执行 CCAction 时，我几乎可以说 spriteA 我想在 spriteB 的相对位置。spriteB 被添加为批处理节点的子节点。现在我可以将 spriteA 添加为 spriteB 的子项吗？

编辑：似乎我遇到了这个崩溃，因为 spriteA 与 spriteB 的纹理不同。那么，即使 spriteB 具有不同的纹理，我如何将 spriteB 作为孩子添加到 spriteA 中呢？

现在我正在尝试这个，我遇到了 EXC_BAD_ACCESS 崩溃：

```
*** Assertion failure in -[CCSpriteExtended addChild:z:tag:], /cocos2d/CCSprite.m:568 
```

这可能吗？我总是希望 spriteA 与 spriteB 处于相对位置，即使它在屏幕上移动也是如此。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:27:08.653

SpriteBatchNode 中的所有精灵都应该使用相同的纹理。所以你想做的事情是不可能的。

您可能想要覆盖更新并手动相对于 B 定位 spriteA

# binary - armv6 / 或 lipo 命令错误

> ID：13021739
> 
> 赞同：1
> 
> 时间：2012-10-22T23:58:51.703
> 
> 标签：binary, armv6

您好，需要一些帮助...当我尝试在应用程序加载器中发送我的 zip 文件时，我收到一个错误，提示我需要 armv6..​​.所以当我在所有架构中包含 armv6 时，我会收到这些错误...

无法运行 lipo 命令 /Applications/Xcode.app...：无法打开输入文件：...（没有此类文件或目录）应用程序未通过代码设计验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。被分析的二进制文件必须存在： ...

一直在尝试一切。我正在使用 xcode 4.5.1 感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T12:57:41.273

> 想通了......不要担心架构中的 armv6..​​....只需将部署目标更改为 4.3 – Landon 2012-10-23 00:47:37

这终于对我有用。xCode 默认为 4.0 构建，它无法运行 armv7，如果您更改为 armv6，iTunes 商店将不会对其进行验证。改成4.3就好了。

# python - 在终端中导入 Python 模块，但不通过 Unix Shell

> ID：13021743
> 
> 赞同：5
> 
> 时间：2012-10-22T23:59:26.713
> 
> 标签：python, terminal, pythonpath

我刚刚开始使用 Python，需要一些指导。

我使用的是 Mac，但我安装了 python.org 构建的 python 以及原始的 Apple 安装。

我正在尝试加载一些第 3 方模块。当我在 IDLE 中或通过终端运行脚本时，一切正常。当我尝试将它作为 CRON 作业运行时，我收到一条错误消息，指出它找不到 3rd 方模块。

经过一番摸索，我一直相信它是 PYTHONPATH / sys.path。我创建了一个测试脚本来向我展示我的路径。那么，为什么当它通过终端窗口运行而不是直接作为 shell 脚本运行时，我会得到不同的路径呢？

我的两个问题是：

1.  为什么它们不同？
2.  如何获得直接 shell 进程来查找第 3 方模块？

这是我在终端中运行时的 sys.path 输出：

```
['/Library/Scripts',
 '/Library/Scripts/$',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python27.zip',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/plat-darwin',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/plat-mac',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/plat-mac/lib-scriptpackages',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/lib-tk',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/lib-old',
 '/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/lib-dynload',
 '/Library/Python/2.7/site-packages'] 
```

这是我在 shell 中运行时的 sys.path 输出（在这种情况下，我在 Applescript 中使用“执行 shell 脚本”步骤。

```
"['/Library/Scripts',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
 '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC',
 '/Library/Python/2.7/site-packages']" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T00:33:05.180

> 为什么它们不同？

因为您正在运行两个不同的 Python 解释器，并且它们具有不同的默认`sys.path`值。

这是故意的——它允许您修改 Python.org 安装的标准（或站点）库，而不会破坏系统安装（或依赖于该安装的任何 Apple 提供的工具）。

我猜当你`python`在终端中运行时，你会得到`/usr/local/bin/python`（你可以通过键入来检查`which python`），这可能是一个链接`/Library/Frameworks/Python.framework/Versions/7.3/bin/python`（或者可能是`Python.app/Contents/MacOS/python`该框架内的某个地方）。来自 python.org 的 Python 被编译为`sys.path`围绕 /Library/Frameworks/Python.framework/Versions/7.3/ 设置。

同时，当您`python`通过 Launch Services 运行时，您可能会得到`/usr/bin/python`，这是（希望）内置的 shim around `/System/Library/Frameworks/Python.framework/Versions/2.7/bin/python`，它被编译为设置`sys.path`around `/System/Library/Frameworks/Python.framework/Versions/2.7/`。

`python`在这些情况下做不同事情的原因`/usr/local/bin`是根本不在您的登录中，而是通过您（或其他）文件`PATH`中的一行添加到路径的头部。`~/.profile`该文件由终端中的 shell 会话读取，但不是由启动服务会话读取。

如果您想在所有环境中使用相同的 Python，您可以显式运行`/usr/local/bin/python`或`/usr/bin/python`而不是仅`python`. （您也可以`/usr/local/bin`进入您的登录路径，但这是一个非常糟糕的主意，或者将其从您的 PATH 中取出`~/.profile`，但这有点不方便。）

附带说明一下，这表明您的 python.org 安装非常损坏：

```
/Library/Frameworks/Python.framework/Versions/7.3/lib/python27.zip 
```

没有 Python 7.3。我强烈考虑卸载并重新安装 python.org 构建。

或者，更简单地说，卸载它并保持卸载状态，只使用内置的 Python 2.7。如果您想要多个环境，请使用`virtualenv`而不是多个安装。例如，如果 Apple 给你 2.7.2 而你真的需要 2.7.3，那么你需要另一个安装；否则，你只会让事情变得更难，没有任何好处。

# web - 如何更改 Flex 中绘图图表的单个项目的颜色？

> ID：13021750
> 
> 赞同：1
> 
> 时间：2012-10-23T00:00:20.797
> 
> 标签：web, flex4.5

我正在 Flex 中创建一个包含数组集合的绘图图表。数组集合具有以下格式：

```
var provinces:ArrayCollection = new ArrayCollection (
{PROVINCE:"Ha Noi", Male:50000, Female:20000},
{PROVINCE:"Ha Tay", Male:100000, Female:10000},
{PROVINCE:"Quang Ninh", Male:75250, Female:45021},
{PROVINCE:"Hai Phong", Male:10000, Female:25000}); 
```

我想用不同的颜色在绘图图上显示不同的省份。此外，我想为不同的省份创造一个传奇。有人知道该怎么做吗？一些代码示例会很棒。

谢谢你。

# c# - 当前上下文中不存在名称 form1

> ID：13021753
> 
> 赞同：0
> 
> 时间：2012-10-23T00:01:00.453
> 
> 标签：c#, asp.net, datatable

在我的 Default.aspx.cs 代码隐藏中，我用从制表符分隔的文本文件中读取的数据填充了一个 DataTable _dt。当用户单击 Default.aspx 上的按钮时，我想向用户显示 _dt 的所有内容。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Threading;
using System.Net;
using System.Text;
using System.Data;
using System.IO;

...

        String strLine = String.Empty;
        Int32 iLineCount = 0;
        System.IO.StreamReader srdr = new System.IO.StreamReader(filePath);
        do
        {
            strLine = srdr.ReadLine();
            if (strLine == null)
            { break; }
            if (0 == iLineCount++)
            {
                _dt = this.CreateDataTableForTabbedData(strLine);
            }
            this.AddDataRowToTable(strLine, _dt);
        }
        while (true);
        form1.Controls.Add(_dt); 
```

但是 VS 给了我错误：“名称 form1 在当前上下文中不存在”。form1 在 Default.aspx 中不存在，但在 Site.Master 中存在。

我意识到我可能需要在 Default.aspx 中存在 form1 才能使我的代码隐藏工作，但如果我尝试这样做，并将 Site.master 中的 ID 更改为 form2，我会收到错误“A page只能有一个服务器端 Form 标签。” 我必须将表单保留在 Site.Master 上，但我无法将生成表的代码隐藏移动到 Site.Master.cs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:15:53.307

页面控件（在您的情况下为 this 或 this.Page）具有对 Master 本身的引用，因此您必须遍历控件集合以找到 Master 的子控件 - 其中一个将是表单。它不能保证是唯一的，它显然是 M*N 数量级的东西，但它在很长一段时间内对我有用。

你会像这样使用它：

控制 oCtl = SomeUtilityClass.FindControlRecursive(this.Page, "form1"); （记得在这里检查 null ;-)

我写这个来处理这样的事情：

```
/// <summary>
        /// Recursive loop to find a control
        /// </summary>
        /// <param name="rootCtl">Control whose control collection we will begin traversing in search of the 
        ///     given ID</param>
        /// <param name="Id">ID to search for</param>
        /// <returns></returns>
        public static Control FindControlRecursive(Control rootCtl, string desiredCtlID)
        {
            //Make sure this thing exists
            if (rootCtl == null)
                return null;

            //See if it's the one we're after
            if (rootCtl.ID == desiredCtlID)
                return rootCtl;

            //Make sure it has controls to loop over
            if (!rootCtl.HasControls())
                return null;

            foreach (Control oCtl in rootCtl.Controls)
            {
                Control FoundCtl = FindControlRecursive(oCtl, desiredCtlID);
                if (FoundCtl != null)
                    return FoundCtl;
            }

            return null;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:07:41.750

通过在 OleDbDataAdapter 上使用[本教程](http://www.programmer.bz/Home/tabid/115/asp_net_sql/258/How-to-Read-a-Delimited-Text-File-in-AspNet-Using-OleDb-Including-CSV-or-Tab.aspx)，我能够显示我的数据。

```
 DataSet dataset = Read_File_Into_Dataset("C:\\TEMP\\", "input.txt");
        DataGrid dg = new DataGrid();
        dg.DataSource = dataset;
        dg.DataBind();
        this.Controls.Add(dg);

        public DataSet Read_File_Into_Dataset(string fullpath, string file)
        {
        string sql = "SELECT * FROM `" + file + "`"; // Read all the data
        OleDbConnection connection = new OleDbConnection // Connection
          ("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + fullpath + ";"
           + "Extended Properties=\"text;HDR=YES;FMT=Delimited\"");
        OleDbDataAdapter ole = new OleDbDataAdapter(sql, connection); // Load the data into the adapter
        DataSet dataset = new DataSet(); // To hold the data
        ole.Fill(dataset); // Fill the dataset with the data from the adapter
        connection.Close(); // Close the connection
        connection.Dispose(); // Dispose of the connection
        ole.Dispose(); // Get rid of the adapter
        return dataset;
        } 
```

# python - 在线程/进程中启动 python 瓶和旁边的另一个守护进程

> ID：13021762
> 
> 赞同：2
> 
> 时间：2012-10-23T00:02:02.363
> 
> 标签：python, multithreading, multiprocessing, bottle

好的，所以这可能有点不正统，或者我只是愚蠢或两者兼而有之:)

我正在尝试一个非常简单的设置，我在一个实例中启动一个瓶子服务器，`Process`并在另一个实例中启动一个小型 TFTP 服务器。

```
#!/usr/bin/env python
import bottle
import sys
import tftpy
from multiprocessing import Process

def main():
    try:
        t = Process(target=bottle.run(host='0.0.0.0', port=8080))
        t.daemon = True
        t.start()
        t.join()
        h = Process(target=tftpy.TftpServer('/srv/tftp').listen('0.0.0.0', 69))
        h.start()
        h.join()

    except KeyboardInterrupt:
        sys.stdout.write("Aborted by user.\n")
        sys.exit(1)

if __name__ == "__main__":
    main() 
```

除非我完全疯了，否则我希望它们并行启动。实际上，发生的事情是瓶子启动并锁定了整个东西。如果我退出瓶子，TFTP 守护程序就会启动。

我还尝试了与`threading`模块类似的方法，结果大致相同。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T00:10:35.093

有几个问题：

*   你`run()`在主线程中调用。您应该改为传递参数`args`：

    ```
    Process(target=bottle.run, kwargs=dict(host='0.0.0.0', port=8080)) 
    ```

*   你调用 t.join()，它会阻塞直到 t 进程在 h.start() 之前结束。改为在所有进程启动后加入

*   瓶子，tftpy 可能与多处理模块不兼容。如果是这样，您可以尝试子流程模块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:20:42.287

好吧，我不确定我是否理解你想要完成的事情，但如果我在你的位置，我会尝试使用[python-daemon 包](http://pypi.python.org/pypi/python-daemon/)

我认为两者都`bottle`可以`TFTP`被守护。由于您只是在寻找一个简单的测试，我猜 python-daemon 网页中给出的示例就足够了。

如果您真的喜欢将事物进行守护进程的想法，我还建议您搜索适合您平台的守护进程方法，因为这样您就有多种设施来管理您的守护进程，使它们与您的操作系统中找到的更相似。

对于一些简单的例子： [http ://troydhanson.wordpress.com/2012/08/21/minimal-sysvinit-launchd-and-upstart/](http://troydhanson.wordpress.com/2012/08/21/minimal-sysvinit-launchd-and-upstart/)

# heroku - 如何阻止heroku中的工头？

> ID：13021763
> 
> 赞同：5
> 
> 时间：2012-10-23T00:02:07.053
> 
> 标签：heroku, foreman

```
foreman start 
```

运行一个我可以在 localhost 上访问的应用程序

如何停止这种情况并返回提示符并继续使用heroku？

我在 Windows 机器上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:37:19.630

Ctrl-C 对我有用，但这会终止该过程。（虽然我在 Ubuntu 上，但我认为命令是一样的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T18:11:13.170

我还发现 Ctrl+C 可以工作，但只能在重新加载页面时使用。

如果我只是在没有任何页面请求的情况下按 Ctrl+C，他们似乎已经排队了。如果我多次点击它，当我最终刷新页面时，我会收到多条“Sinatra 已完成他的设置”消息。

# loops - Filemaker 在循环期间无法识别 Applescript 命令

> ID：13021767
> 
> 赞同：1
> 
> 时间：2012-10-23T00:02:58.567
> 
> 标签：loops, applescript, containers, paste, filemaker

我从 Filemaker 中调用的 Applescript 脚本得到了一个奇怪的结果，这是我以前从未见过的，也没有在此处或其他地方在线找到对它的引用。

以下脚本创建三个新记录并调用 Filemaker 脚本“paste_into_container”。FM 脚本 "paste_into_container" 非常简单，它将剪贴板上的任何内容粘贴到特定的容器字段中。当从 Filemaker 中调用脚本时，"paste_into"container" 下标只会将剪贴板的内容粘贴到最后一个新的记录。前两条记录的容器字段留空。

就好像循环创建了新记录，忽略了“paste_into_container”脚本，然后继续循环的下一次迭代。

该脚本在从 ScriptEditor 调用时工作正常，但从 Filemaker 中调用时失败。如果我放弃重复循环并仅创建一条记录，该脚本也将起作用。

我尝试增加在每个循环结束时添加的延迟，但无论是 1 秒还是 5 秒都没有任何区别。

我确定这很简单，但我没有看到它，两天后是时候寻求帮助（一种或另一种）

附加信息：通过 FM11 服务器运行的 Mac OS 10.6.8 FM 11

提前致谢

菲尔

```
tell application "FileMaker Pro"
 show every record in table "Image_Info" in database myDB
    repeat with i from 1 to 3
            go to layout 1 of database myDB
            set myNewRecord to create new record in database myDB
            go to last record
            do script "paste_into_container" 
            delay 1
    end repeat  
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:58:01.797

在另一个论坛上有一个非常好的讨论，专门针对这个问题。当 FM 从 FM10 迁移到 FM11 时，他们改变了程序处理来自嵌入式 applescript 的请求的方式。本质上，因为 FM11 Filemaker 异步处理 Applescript 命令，而不是同步处理 Applescript 使用 do script 命令调用内部 Filemaker 脚本时。这意味着 Filemaker 将允许 Applescript 继续运行，而无需等待 Filemaker 反馈说内部 FM 脚本已完成。有一种解决方法，但它并不优雅，而且似乎并不通用。请参阅下面的链接。

据我了解，这只影响调用其他本地 Filemaker 脚本的嵌入式 Applescripts。

[关联](http://forums.filemaker.com/posts/4b2544f7a4?page=2)

# c# - 无法访问从 VB6 exe 调用的 WPF dll 中的 UI 线程

> ID：13021769
> 
> 赞同：0
> 
> 时间：2012-10-23T00:03:09.773
> 
> 标签：c#, .net, wpf

我有一个调用 WPF 4.0 dll 的 VB6 exe。
在我的 WPF dll 中，我有一个需要更新 UI 的后台工作人员。
我似乎无法回到 UI 线程，因为 Application.Current 为空。

```
Application app = Application.Current;
if (app != null)
{
  Dispatcher disp = app.Dispatcher;
  if (disp != null)
  {
    if (!disp.CheckAccess())
    {
    }
    else
    {
    }
  }
} 
```

我也尝试过 Dispatcher.CurrentDispatcher 但这也没有将我切换到 UI 线程。

有谁知道当 VB6 exe 调用 WPF dll 时如何切换到 WPF 中的 UI 线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:16:54.550

在进入 WPF 端时存储 Dispatcher.CurrentDispatcher，以便您可以从 BackgroundWorker 中使用它。

# javascript - 谷歌图表 NumberRangeFilter SUM 而不是过滤器？

> ID：13021774
> 
> 赞同：1
> 
> 时间：2012-10-23T00:04:03.410
> 
> 标签：javascript, google-visualization

有没有办法强制**NumberRangeFilter**显示范围内其他行的总和结果？

例如，我有这张表：

```
A | B | C
----------
1 | 1 | 1
2 | 1 | 3
3 | 2 | 1
4 | 0 | 1
5 | 0 | 0 
```

如果我实现 RangeFilter 并将其设置为 2 到 4，我想要一个图表来显示**B2:B4**和**C2:C4**字段的总和值。

***这是默认功能：*** ![在此处输入图像描述](../Images/6f379f64efcb3b9dc43cdb3dc7f4d5d8.png)

***这就是我想要实现的目标：*** ![默认功能](../Images/313e9defa34af08328e8d38bac7b0715.png)

我怎样才能做到这一点？

# c# - protobuf-net 不支持指定的方法

> ID：13021778
> 
> 赞同：2
> 
> 时间：2012-10-23T00:04:32.450
> 
> 标签：c#, serialization, .net-4.0, protobuf-net

我最近决定使用[protobuf-net](http://code.google.com/p/protobuf-net/wiki/GettingStarted)来序列化我的应用程序使用的大型纯文本数据文件，以查看解析纯文本数据是否有任何性能提升。

数据类：

```
[ProtoContract]
public class ClimateFile : BaseModel
{
    #region Properties
    [ProtoMember(1)]
    public double Latitude { get { return GetValue(() => Latitude); } private set { SetValue(() => Latitude, value); } }

    [ProtoMember(2)]
    public double Longitude { get { return GetValue(() => Longitude); } private set { SetValue(() => Longitude, value); } }

    [ProtoMember(3)]
    public string Notes { get { return GetValue(() => Notes); } set { SetValue(() => Notes, value); } }

    [ProtoMember(4)]
    public DateTime MinDate { get { return GetValue(() => MinDate); } private set { SetValue(() => MinDate, value); } }

    [ProtoMember(5)]
    public DateTime MaxDate { get { return GetValue(() => MaxDate); } private set { SetValue(() => MaxDate, value); } }

    [ProtoMember(6)]
    public List<ClimateDailyData> DailyData { get { return GetValue(() => DailyData); } private set { SetValue(() => DailyData, value); } }
    #endregion

    #region Method
    public static ClimateFile Load(string filePath)
    {
        try
        {
            var ext = Path.GetExtension(filePath).ToUpper();
            if (ext == ".P51")
                return new ClimateFile(filePath);
            else if (ext == ".P51X")
            {
                ClimateFile climateFile;
                using (var file = File.OpenRead(filePath))
                {
                    climateFile = Serializer.Deserialize<ClimateFile>(file);
                }
                return climateFile;
            }
        }
        catch (Exception e)
        {
            throw new InvalidDataException(String.Format("The file \"{0}\" could not be opened, {1}", filePath, ExceptionUtilities.JoinExceptionMessages(e)));
        }

        throw new ArgumentException("filePath was not a .P51 or .P51X file.");
    }

    public void LoadP51File(string filePath)
    {
        List<string[]> lines = GetFileLines(filePath);
        Latitude = double.Parse(lines[0][0]);
        Longitude = double.Parse(lines[0][1]);
        for (int i = 2; i < lines[0].Length; ++i)
            Notes += String.Format("{0} ", lines[0][i]);
        MinDate = GetDate(lines[2][0]);
        MaxDate = GetDate(lines[lines.Count - 1][0]);

        // Parse daily data
        lines.RemoveRange(0, 2);
        var dailyData = lines.Select(row => new ClimateDailyData()
            {
                DataDate = GetDate(row[0]),
                MaxTemperature = double.Parse(row[2]),
                MinTemperature = double.Parse(row[3]),
                Rainfall = double.Parse(row[4]),
                Evaporation = double.Parse(row[5]),
                SolarRadiation = double.Parse(row[6])
            }).ToList();
        DailyData = dailyData;
    }

    public void SaveP51XFile(string filePath)
    {
        using (var file = File.Create(filePath))
        {
            Serializer.Serialize<ClimateFile>(file, this);
        }
    }

    public List<string[]> GetFileLines(string filePath)
    {
        var rows = new List<string[]>();
        var cells = new List<string>();
        var cell = new StringBuilder();
        using (var fs = new BufferedStream(File.OpenRead(filePath)))
        {
            int buffer;
            while ((buffer = fs.ReadByte()) != -1)
            {
                char nextChar = (char)buffer;

                if (nextChar >= '!') // If the character is a non-whitespace printable character
                {
                    cell.Append(nextChar);
                    continue;
                }

                if (nextChar == ' ' || nextChar == '\t')
                {
                    if (cell.Length > 0)
                    {
                        cells.Add(cell.ToString());
                        cell.Clear();
                    }
                    continue;
                }

                if (nextChar == '\r' || nextChar == '\n')
                {
                    if (cell.Length > 0)
                    {
                        cells.Add(cell.ToString());
                        cell.Clear();
                    }
                    if (cells.Count > 0)
                    {
                        rows.Add(cells.ToArray());
                        cells.Clear();
                    }
                    continue;
                }
                throw new InvalidDataException("The climate file contains unknown characters.");
            }

            if (cell.Length > 0)
                cells.Add(cell.ToString());
            if (cells.Count > 0)
                rows.Add(cells.ToArray());
        }
        return rows;
    }

    public DateTime GetDate(string date)
    {
        return DateTime.ParseExact(date, "yyyyMMdd", CultureInfo.InvariantCulture, DateTimeStyles.None);
    }

    public override void Dispose()
    {
        if (Disposed)
            return;
        if (DailyData != null)
            foreach (ClimateDailyData dailyData in DailyData)
                dailyData.Dispose();
        base.Dispose();
    }
    #endregion

    #region Initialization
    public ClimateFile()
    {
    }

    public ClimateFile(string filePath)
    {
        LoadP51File(filePath);
    }
    #endregion
} 
```

采集数据类：

```
 [ProtoContract]
public class ClimateDailyData : BaseModel
{
    [ProtoMember(1)]
    public DateTime DataDate { get { return GetValue(() => DataDate); } set { SetValue(() => DataDate, value); } }

    [ProtoMember(2)]
    public int JulianDay { get { return DataDate.DayOfYear; } }

    [ProtoMember(3)]
    public double MaxTemperature { get { return GetValue(() => MaxTemperature); } set { SetValue(() => MaxTemperature, value); } }

    [ProtoMember(4)]
    public double MinTemperature { get { return GetValue(() => MinTemperature); } set { SetValue(() => MinTemperature, value); } }

    [ProtoMember(5)]
    public double Rainfall { get { return GetValue(() => Rainfall); } set { SetValue(() => Rainfall, value); } }

    [ProtoMember(6)]
    public double Evaporation { get { return GetValue(() => Evaporation); } set { SetValue(() => Evaporation, value); } }

    [ProtoMember(7)]
    public double SolarRadiation { get { return GetValue(() => SolarRadiation); } set { SetValue(() => SolarRadiation, value); } }
} 
```

序列化命令：

```
public ICommand ImportP51
    {
        get
        {
            return new RelayCommand(delegate
                {
                    OpenFileDialog openDialogue = new OpenFileDialog()
                    {
                        AddExtension = true,
                        CheckPathExists = true,
                        CheckFileExists = true,
                        DefaultExt = ".p51",
                        Filter = "Climate Files|*.p51",
                        InitialDirectory = DataPath,
                        Multiselect = false,
                        Title = "Select a File to Open"
                    };

                    if ((bool)openDialogue.ShowDialog())
                    {
                        string filePath = String.Empty;
                        try
                        {
                            filePath = openDialogue.FileName;
                            var climate = new Climate();
                            climate.FilePath = filePath;
                            var savePath = String.Format("{0}\\{1}.p51x", ClimateDataPath, Path.GetFileNameWithoutExtension(filePath));
                            climate.FileData.SaveP51XFile(savePath);
                        }
                        catch (Exception e)
                        {
                            MessageBox.Show(String.Format("The file \"{0}\" could not be opened, {1}", filePath, ExceptionUtilities.JoinExceptionMessages(e)), "Invalid File");
                        }
                    }
                });
        }
    } 
```

执行时`ImportP51`，出现“不支持指定方法”异常，我使用的是 2012 年 12 月 10 日发布的 protobuf-net V2 r594，如果我无法获得它，我正在考虑尝试使用以前的版本之一使用此版本。有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:35:27.873

我试图重建代码的工作版本（因为我没有你的`BaseModel`），我已经通过使用自动实现的属性并为列表（`DailyData`）添加了一个初始化程序，并从谷歌代码中明确引用 r594。我得到的唯一错误是：

> 无法将更改应用于属性 ClimateDailyData.JulianDay

这是有道理的，因为它不能正确地将数据反序列化为只读属性，所以我从那个属性中删除了序列化标记：

```
// [ProtoMember(2)] removed - serialized implicitly via DataData
public int JulianDay { get { return DataDate.DayOfYear; } } 
```

之后它*工作正常*。因为我没有你的命令框架，所以我有：

```
static class Program
{
    static void Main()
    {
        var climateFile = new ClimateFile();
        climateFile.InitSomeDataForSerialization();

        climateFile.SaveP51XFile("foo.P51X");
        var clone = ClimateFile.Load("foo.P51X");
    }
} 
```

其中`InitSomeDataForSerialization`只设置了一些值（因为他们有私人设置器，我不能这样做`Main`）：

```
public void InitSomeDataForSerialization()
{
    Longitude = 10; Latitude = 4; Notes = "Test";

    DailyData.Add(
        new ClimateDailyData { DataDate = DateTime.Today, MinTemperature = 12, MaxTemperature = 35}
    );
} 
```

而且......它有效。

凭直觉，我检查了如果您引用“CoreOnly”而不是“Full”会发生什么，但是由于`Serializer.Serialize<T>`并且`Serializer.Deserialize<T>`不存在而拒绝编译。

我很乐意提供帮助，但据我所知，没有任何问题。

接下来我建议的事情：

*   显示此异常中发生的情况的完整堆栈跟踪，包括任何内部异常（请参阅下面的修复）
*   请**准确**检查您在 594 zip 中引用的文件（查看“What Files Do I Need.txt”，但我猜对您来说正确的是“Full/net30/...”；nuget 包配置最合适的文件自动）
*   请展示一个完全可重现的示例，即我可以在哪里按下`F5`并查看确切的异常（我必须更改示例中的代码才能编译，这意味着我不再测试相同的东西）

修复正确的异常包装：

```
catch (Exception e)
{
    throw new InvalidDataException(String.Format("The file \"{0}\" could not be opened", filePath), e);
} 
```

# jquery - 内联ajax验证完成后提交不起作用

> ID：13021781
> 
> 赞同：0
> 
> 时间：2012-10-23T00:04:43.027
> 
> 标签：jquery, ajax, validation, jquery-validation-engine

我正在使用 jquery 验证引擎来验证带有电子邮件字段和提交按钮的密码恢复表单。它使用内联 ajax 验证检查电子邮件地址是否在数据库中。如果我输入电子邮件地址并点击 Enter，则 ajax 验证工作正常并提交表单。但是，我单击提交按钮，电子邮件字段正在得到验证，但表单未提交。

```
<form action="/lost-password" method="post" id="checkmail">
    <input type="text" name="email" id="email" class="validate[required,custom[email],ajax[ajaxEmailCall]]"/>
    <input type="submit" value="Send password" name="submit"/>
</form> 
```

```
$(function(){       
    $("#checkmail").validationEngine();     
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:08:20.820

将按钮名称从`name="submit"`to更改为`name="btnSubmit"`，看看是否有区别。如果可行，则提交名称会破坏表单的提交方法。

# adobe - 如何通过 Adob e CQ 更改视口设置？

> ID：13021782
> 
> 赞同：2
> 
> 时间：2012-10-23T00:05:03.400
> 
> 标签：adobe, viewport, head, aem

我正在使用 Adob​​e CQ 的网站上工作，并且 CQ 会自动添加：

```
<meta name="viewport" content="width=device-width,initial-scale=1"> 
```

就在开头的头部标签之后。有谁知道我可以在 Adob​​e CQ 中的哪里进行更改，以便我可以让这个网站在 iPad 上正确显示？也许有一种方法可以覆盖页面上的任何其他视口设置？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:12:14.287

CQ5.5中移动页面默认的head脚本可以在`libs/wcm/mobile/components/page/head.jsp`

CQ5.5中网页默认的head脚本可以在`/libs/foundation/components/page/head.jsp`

您可以通过使用以下路径创建资源来覆盖基础 head.jsp `/apps/<site-id>/components/page/base/head.jsp`：。此资源中的任何内容都将覆盖 default(libs/) head.jsp 中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T10:48:49.460

其实是通过js添加进去的`/libs/cq/touch/widgets/source/jquerymobile/jquery.mobile.js`，搜索`metaViewportContent`字符串。

不过，我还没有找到如何以适当的方式改变它。

# c - 使用 libxml2 在 xml 文件中查找节点

> ID：13021785
> 
> 赞同：3
> 
> 时间：2012-10-23T00:05:19.160
> 
> 标签：c, xml-parsing, libxml2

我正在尝试编写一个函数，该函数将在 xml 文件中找到具有指定名称的节点。问题是该函数永远找不到指定的节点。

```
xmlNodePtr findNodeByName(xmlNodePtr rootnode, const xmlChar * nodename)
{
    xmlNodePtr node = rootnode;
    if(node == NULL){
        log_err("Document is empty!");
        return NULL;
    }

    while(node != NULL){

        if(!xmlStrcmp(node->name, nodename)){
            return node; 
        }
        else if(node->children != NULL){
            node = node->children; 
            xmlNodePtr intNode =  findNodeByName(node, nodename); 
            if(intNode != NULL){
                return intNode;
            }
        }
        node = node->next;
    }
    return NULL;
} 
```

我可以在调试器中看到该函数确实深入到子节点但仍返回 NULL。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-11-07T12:05:46.053

```
else if(node->children != NULL) {
    node = node->children; 
    xmlNodePtr intNode =  findNodeByName(node, nodename); 
    if (intNode != NULL) {
        return intNode;
    }
} 
```

这应该是：

```
else if (node->children != NULL) {
    xmlNodePtr intNode =  findNodeByName(node->children, nodename); 
    if(intNode != NULL) {
        return intNode;
    }
} 
```

它工作正常

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T06:20:01.630

你的功能是正确的。添加调试行以查看为什么它在您的情况下不起作用。例如：

```
 printf("xmlStrcmp(%s, %s)==%d\n", node->name, nodename,
        xmlStrcmp(node->name, nodename)); 
```

但你并不真的需要那个功能。您可以使用[xmlXPathEval](http://xmlsoft.org/html/libxml-xpath.html#xmlXPathEval)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-24T09:39:57.583

当@jarekczek 提到 XPath 时，他的意思是使用 XPath 而不是你的函数。

使用 XPath，您的函数将变为：

```
xmlNodeSetPtr findNodesByName(xmlDocPtr doc, xmlNodePtr rootnode, const xmlChar* nodename) {
    // Create xpath evaluation context
    xmlXPathContextPtr xpathCtx = xmlXPathNewContext(doc);
    if(xpathCtx == NULL) {
        fprintf(stderr,"Error: unable to create new XPath context\n");
        return NULL;
    }

    // The prefix './/' means the nodes will be selected from the current node
    const xmlChar* xpathExpr = xmlStrncatNew(".//", nodename, -1);
    xmlXPathObjectPtr xpathObj = xmlXPathNodeEval(rootnode, xpathExpr, xpathCtx);
    if(xpathObj == NULL) {
        fprintf(stderr,"Error: unable to evaluate xpath expression \"%s\"\n", xpathExpr);
        xmlXPathFreeContext(xpathCtx);
        return NULL;
    }

    xmlXPathFreeContext(xpathCtx);

    return xpathObj->nodesetval;
} 
```

注意：此函数返回匹配“nodename”的所有节点。如果您只想要第一个节点，则可以替换`return xpathObj->nodesetval;`为：

```
if (xpathObj->nodesetval->nodeNr > 0) {
    return xpathObj->nodesetval->nodeTab[0];
} else {
    return NULL;
} 
```

您还可以附加`[1]`到 XPath 查询以优化您的查询。

# iphone - 翻转细节视图控制器

> ID：13021788
> 
> 赞同：0
> 
> 时间：2012-10-23T00:05:37.820
> 
> 标签：iphone, sdk

我想为 DetailsViewController 创建第二个视图。计划是在 DetailsViewController 上有 info 按钮，当用户单击它时，它会将 DetailsView 翻转到另一个视图。只是想知道这是否有可能做到。我到处搜索，但找不到解决方案。请提前帮助和感谢。

PS该应用程序是标签栏应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:08:41.293

如果您使用故事板，您可以使用 segue 轻松完成此操作，只需将其样式设置为模态并将其转换为“水平翻转”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:08:09.877

```
Instead of Navigation you can use your own class.

[UIView beginAnimations:@"animation" context:nil];
[self.navigationController pushViewController: yourviewcontroller animated:NO]; 
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:NO]; 
[UIView commitAnimations]; 
```

# regex - Perl：我如何匹配这样的模式？

> ID：13021793
> 
> 赞同：0
> 
> 时间：2012-10-23T00:06:15.163
> 
> 标签：regex, perl

假设有两个词，例如：googleweb.us 和 google.us

这是我在单个正则表达式中匹配这些的一种方法，但它看起来很难看。

```
/(google|espn|foxtel)\w*[web\.\w+|\.\w+]/ 
```

我只想在“网络”存在与否时涵盖这两种情况。如何改进模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:16:39.977

这将允许“web”对于谷歌来说是可选的：

```
/(google(web)?|espn|foxtel)\.\w+/ 
```

这将允许“web”对于任何域都是可选的：

```
/(google|espn|foxtel)(web)?\.\w+/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T00:16:50.287

你需要修改你的“角色类”。方括号中的材料被视为字符类，而不是您的想法。

`googleweb.us`与您在单词（' ' 和 ' '）中询问的内容相匹配的正则表达式`google.us`是：

```
/^(google)(web)?\.us$/ 
```

当您定义了您希望它匹配的其他内容时，人们可以改进正则表达式。

# c++ - 在 C 或 C++ 中同时在同一个套接字上读写

> ID：13021796
> 
> 赞同：48
> 
> 时间：2012-10-23T00:06:30.617
> 
> 标签：c++, c, linux, sockets, nonblocking

我正在实现一个简单的服务器，它接受单个连接，然后使用该套接字同时从读写线程读取和写入消息。在 Linux 上的 c/c++ 中同时读取和写入同一个套接字描述符的安全且简单的方法是什么？我不需要担心从同一个套接字读取和写入的多个线程，因为将有一个专用的读取和一个专用的写入线程写入套接字。

在上述情况下，是否需要任何类型的锁定？

上述场景是否需要非阻塞套接字？

是否有任何开源库可以在上述情况下有所帮助？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-23T05:01:54.150

> 在上述情况下，是否需要任何类型的锁定？

没有任何。

> 上述场景是否需要非阻塞套接字？

您可能担心的一点 - 已建立连接上的读取和写入线程 - 如果您对这些线程坐在那里等待完成感到高兴，则不需要是非阻塞的。这通常是您使用线程而不是选择或轮询或异步操作的原因之一......也使代码更简单。

如果接受新客户的线程很乐意阻止对 的调用`accept()`，那么你也很好。

不过，您可能希望记住 TCP 服务器的一个微妙问题……如果您的程序增长到可以处理多个客户端并需要定期进行一些内务处理。`select`使用带有超时的语句来检查侦听套接字的可读性是很自然和诱人的- 这表明客户端连接尝试 - 然后`accept`是连接。那里有一个竞争条件：客户端连接尝试可能在`select()`and之间下降`accept()`，在这种情况下，`accept()`如果侦听套接字不是非阻塞的，则会阻塞，这可能会阻止及时返回`select()`循环并暂停周期性的超时处理，直到另一个客户端连接。

> 是否有任何开源库可以在上述情况下有所帮助？

There are hundreds of libraries for writing basic servers, but ultimately what you've asked for is easily achieved atop OS-provided BSD sockets or their Windows bastardisation.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-02-15T19:12:17.583

Sockets are BI-DIRECTIONAL. If you've ever actually dissected an Ethernet or Serial cable or seen the low-level hardware wiring diagram for them, you can actually SEE distinct copper wires for the "TX" (transmit) and "RX" (receive) lines. The software for sending the signals, from the device controller up to most OS APIs for a 'socket', reflects this and it is the key difference between a socket and an ordinary pipe on most systems (e.g. Linux).

To really get the most out of sockets, you need:
1) Async IO support that uses IO Completion Ports, epoll(), or some similar async callback or event system to 'wake up' whenever data comes in on the socket. This then must call your lowest-level 'ReadData' API to read the message off the socket connection.
2) A 2nd API that supports the low-level writes, a 'WriteData' (transmit) that pushes bytes onto the socket and does not depend on anything the 'ReadData' logic needs. Remember, your send and receive are independent even at the hardware level, so don't introduce locking or other synchronization at this level.
3) A pool of Socket IO threads, which blindly do any processing of data that is read from or will be written to a socket.
4) PROTOCOL CALLBACK: A callback object the socket threads have smart pointers to. It handles any PROTOCOL layer- such as parsing your data blob into a real HTTP request- that sits on top of the basic socket connection. Remember, a socket is just a data pipe between computers and data sent over it will often arrive as a series of fragments- the packets. In protocols like UDP the packets aren't even in order. The low-level 'ReadData' and 'WriteData' will callback from their threads into here, because it is where content-aware data processing actually begins.
5) Any callbacks the protocol handler itself needs. For HTTP, you package the raw request buffers into nice objects that you hand off to a real servlet, which should return a nice response object that can be serialized into an HTTP spec-compliant response.

Notice the basic pattern: You have to make the whole system fundamentally async (an 'onion of callbacks') if you wish to take full advantage of bi-directional, async IO over sockets. The only way to read and write simultaneously to the socket is with threads, so you could still synchronize between a 'writer' and 'reader' thread, but I'd only do it if the protocol or other considerations forced my hand. The good news is that you can get great performance with sockets using highly async processing, the bad is that building such a system in a robust way is a serious effort.

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-10-23T00:11:26.073

你不必担心。一个线程读取和一个线程写入将按您的预期工作。套接字是全双工的，所以你可以边写边读，反之亦然。如果您有多个作家，您将不得不担心，但事实并非如此。

# macos - 在使用 Applescript 单击之前验证复选框

> ID：13021798
> 
> 赞同：3
> 
> 时间：2012-10-23T00:06:45.853
> 
> 标签：macos, checkbox, applescript, osx-mountain-lion

我的一个applescript遇到了问题。我正在尝试创建一个applescript，在mac唤醒或屏幕保护程序在mac安全面板中停止后选中/取消选中调用密码的复选框。我将它与proximity.app一起使用，我的想法是当我回到家并且我的手机在范围内时，proximity.app会删除密码，但是当我超出范围时，它会放回密码。好吧...由于 Mountain Lion 中的新安全策略，我不得不使用 UI 脚本来执行此操作。

所以有超出范围的代码：

```
tell application "System Preferences"
set current pane to pane id "com.apple.preference.security"
tell application "System Events"
    tell process "System Preferences"
        tell first window
            tell first tab group
                click radio button 1
                if not 1 then click checkbox 1
                click menu item 6 of menu of pop up button 1
            end tell
        end tell
    end tell
end tell
quit 
```

结束告诉

并且在范围内时：

```
tell application "System Preferences"
set current pane to pane id "com.apple.preference.security"
tell application "System Events"
    tell process "System Preferences"
        tell first window
            tell first tab group
                click radio button 1
                click checkbox 1
            end tell
        end tell
    end tell
end tell
quit 
```

结束告诉

**我想要改进的是一种在选中或取消选中之前先验证该框是否选中或取消选中的方法。**

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T02:36:41.353

只需检查`checkbox`.

**0** = 取消选中，**1** = 选中

```
tell application "System Preferences" to ¬
    reveal anchor "Advanced" of pane id "com.apple.preference.security"
tell application "System Events"
    tell first tab group of first window of process "System Preferences"
        tell checkbox 1 to if value is 0 then click -- checkbox was not checked.
    end tell
end tell
quit application "System Preferences" 
```

# php - Netbeans PHP 项目 - 无法创建新项目

> ID：13021800
> 
> 赞同：1
> 
> 时间：2012-10-23T00:06:54.417
> 
> 标签：php, netbeans-7, netbeans-plugins

netbeans noob - 第一次运行 ubuntu 并且曾经使用过 netbeans 只是提醒一下..

我无法在 netbeans 中创建新项目。我下载了我想要的 PHP 插件

当我转到`File -> New Project`类别下看到的唯一项目时，`"Samples."`样本被分为两个子类别，即`ApiSupport`和`PHP`。

有想法该怎么解决这个吗？

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:31:59.267

确保您已安装并激活 PHP 插件。

单击工具（菜单）-> 插件（菜单）-> 已安装（选项卡）。

你应该看到这样的窗口：

![在 NetBeans 中安装并激活 PHP 插件](../Images/bf96e9357c702d82b59017f371837a8b.png)

如果没有 PHP 插件 - 安装它（转到可用并搜索与我的描述相似的 PHP）。

如果有 PHP 插件但未激活 - 在“选择”表列中选择它，然后按“激活”按钮。

如果有 PHP 插件并且它处于活动状态 - 使用插件窗口重新安装它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-24T23:24:00.473

我意识到这是一个旧线程，但我今天正在寻找答案并遇到了同样的问题。虽然前面的答案在技术上是正确的，但这不是我遇到的问题，因为我已经有了插件（它随 Netbeans 下载提供）。也就是说，问题在于没有灯环境。一旦安装了 apache、php 和 mysql，PHP 类别就会出现。可以在他们的网站上找到来自 Netbeans 的说明，但如果您使用的是 Ubuntu（或任何基于 Debian 的），您可以运行

```
sudo apt-get install php5 php5-mysql mysql 
```

PHP5 对 Apache 有一个依赖项，因此它会询问您是否要安装依赖项。你只是说是的。如果我没记错的话，Redhat（CentOS 和 Fedora）应该是：

```
yum install php php-mysql mysql 
```

# iolanguage - 如何在交互式 Io 解释器中输入多行方法？

> ID：13021801
> 
> 赞同：3
> 
> 时间：2012-10-23T00:06:54.353
> 
> 标签：iolanguage

我正在[7 周内尝试来自 7 种语言](http://pragprog.com/book/btlang/seven-languages-in-seven-weeks)的以下示例：

```
Object ancestors := method(
    prototype := self proto
        if(prototype != Object,
            writeln("Slots of ", prototype type, "\n---------------")
            prototype slotNames foreach(slotName, writeln(slotName))
            writeln
            prototype ancestors)) 
```

如果我将代码与示例的其余部分（例如`animals.io`）一起放在一个文件中并通过命令行执行它，`io animals.io`那么它会按预期工作。

但是，如果我尝试手动键入该方法并为任何对象执行它，我会收到以下错误：

```
Exception: Object does not respond to 'prototype'
---------
Object prototype                     Command Line 1
Object ancestors                     Command Line 1 
```

是否可以通过交互式解释器输入这种多行方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-30T06:30:17.373

在 REPL 中使用分号作为行分隔符。

```
Object ancestors := method(
    prototype := self proto;
        if(prototype != Object,
            writeln("Slots of ", prototype type, "\n---------------");
            prototype slotNames foreach(slotName, writeln(slotName));
            writeln;
            prototype ancestors)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:45:19.010

虽然 Io REPL 允许您输入多行语句 [1]，但不幸的是，它似乎只是将这些行连接在一起:(

```
Io> Object getSlot("ancestors")
==> method(
    prototype := self proto if(prototype != Object, writeln("Slots of ", prototype type, "\n---------------") prototype slotNames foreach(slotName, writeln(slotName)) writeln prototype ancestors)
) 
```

*[1] - 您可能需要在您的操作系统上安装 ReadLine*

# php - 如何在下面的代码中为 $_SESSION 使用 isset() 命令

> ID：13021803
> 
> 赞同：1
> 
> 时间：2012-10-23T00:07:07.760
> 
> 标签：php, pdo, mysqli

我有一个基本问题，询问如何使用 isset(); 命令以及如何在下面的示例中编写它。我正在尝试将值插入查询，然后检索插入的最后一个 ImageId 并将其插入另一个表

```
 session_start();

         $imagesql = "INSERT INTO Image (ImageFile) 
        VALUES (?)";

                if (!$insert = $mysqli->prepare($imagesql)) {
          // Handle errors with prepare operation here
        }

        //Dont pass data directly to bind_param store it in a variable
    $insert->bind_param("s",$img);

    //Assign the variable
    $img = 'ImageFiles/'.$_FILES['fileImage']['name'];

     $insert->execute();

            if ($insert->errno) {
              // Handle query error here
            }

            $insert->close();

            $lastImageID = $mysqli->insert_id;     

        $_SESSION['lastImageID'] = $lastImageID; 

$imagequestionsql = "INSERT INTO Image_Question (ImageId, SessionId, QuestionId)  
    VALUES (?, ?, ?)"; 

     if (!$insertimagequestion = $mysqli->prepare($imagequestionsql)) { 
      // Handle errors with prepare operation here 
       echo "Prepare statement err imagequestion"; 
    } 

$qnum = (int)$_POST['numimage'];

$insertimagequestion->bind_param("iii",$lastImageID, $sessionid, $qnum); 

    $insertimagequestion->execute(); 

                if ($insertimagequestion->errno) { 
          // Handle query error here 
        } 

        $insertimagequestion->close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:10:41.730

不完全确定你的要求，但疯狂猜测：

```
session_start();

...... //PDO code and commands

   $lastImageID = $mysqli->insert_id; 
   $_SESSION['lastImageID'] = $lastImageID; 

   if (isset($_SESSION['lastImageID'])) {
      // do this
   } else {
      // do that
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:46:47.253

`isset`仅当您正在读取可能未定义的变量时才需要调用。

在这种情况下，你正在写信给`$_SESSION['lastImageID']`，所以你不需要检查。

需要的示例`isset`：

```
if (isset($_SESSION['lastImageID']))
{
    $lastImageID = $_SESSION['lastImageID'];
}

else
{
    $lastImageID = get_this_from_db_or_something();
} 
```

# mercurial - Mercurial Hgflow：向发布分支添加新功能？

> ID：13021807
> 
> 赞同：2
> 
> 时间：2012-10-23T00:07:38.770
> 
> 标签：mercurial, workflow, release

从我读过的内容来看，不鼓励向版本添加新功能。

现在假设老板真的想要当前版本中的新功能，您将如何处理？

我可以想到两个选项，我认为 hgflow 不支持这些选项：

*   选项1：

    1.  在 release/xx 的分支点从 dev 分支
    2.  完成功能
    3.  合并到发布/xx
    4.  关闭功能分支
*   选项2：

    1.  从 release/xx 的最新点分支
    2.  发布/xx/featName
    3.  完成功能
    4.  合并到发布/xx
    5.  关闭功能分支

您将如何处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:37:14.803

yujiewu的[较新版本的 hgflow](https://bitbucket.org/yujiewu/hgflow/wiki/Home)（0.9.4 是最新的）支持 Option2。语法类似于以下内容：

```
# In release/x.x branch
hg flow release/x.x start boss_wants_new_feature
# Now you create a branch called release/x.x/boss_wants_new_feature.

(a bunch of commits to implement the feature)

# In release/x.x/boss_wants_new_feature branch
hg flow release/x.x finish 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:56:28.563

如果我理解正确，唯一的区别是选项 1 使用发布时的版本，选项 2 使用版本发布后添加的代码。如果是这种情况，这完全取决于您何时希望在发布新功能时包含此新代码。如果您不确定，请选择选项 1。

# windows-xp - 最小证书密钥长度和 WinXP

> ID：13021809
> 
> 赞同：1
> 
> 时间：2012-10-23T00:07:54.627
> 
> 标签：windows-xp, rsa, smartcard

当 Mircosoft 通过要求最小密钥长度为 1024 来更新系统的安全性时，问题就开始了。请参阅 Microsoft 安全公告 (2661254)。过去，我们使用的是内置于 Server 2008 R2 中的“智能卡登录”模板。这创建了一个具有 512 位公钥的证书并使用了“sha1RSA”签名算法。

由于无法更改模板中的密钥大小，我们复制了 Smardcard 登录模板并将其修改为使用 2048 位密钥。当我们在智能卡上重新颁发证书时，它使用“RSASSA-PSS”签名算法创建了证书。这些卡在 Vista、7 和 2008 中运行良好，但在 WinXP 中无法运行。

您能否详细概述一下创建一个模板需要遵循哪些步骤，该模板可用于发行在 XP 下工作的具有至少 1024 位公钥的卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:06:31.607

我怀疑 PSS 计划是罪魁祸首。尝试使用普通的 PKCS#1 v1.5 填充（此外，并非所有智能卡都支持它）

# python - 当我尝试部署时，Google App Engine 会抛出这个 InvalidURL("nonnumeric port: '%s'" % host[i+1:]) 异常。我如何解决它？

> ID：13021810
> 
> 赞同：1
> 
> 时间：2012-10-23T00:08:03.007
> 
> 标签：python, google-app-engine, invalid-url

当我为我的项目单击部署按钮时，它给了我以下错误： File "C:\Python27\lib\httplib.py", line 721, in _set_hostport raise InvalidURL("nonnumeric port: '%s'" % host [i+1:]) httplib.InvalidURL：非数字端口：“端口”。

我之前已经成功部署过这个项目，所以我尝试还原文件，以便在它正常工作时拥有相同的文件。似乎没有骰子。不过，这只是在黑暗中的一次尝试——完整的跟踪显示这是从 Google App Engine 的文件开始的，而不是我的。

有人知道我如何部署我的项目吗？

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\appcfg.py", line 171, in <module>
run_file(__file__, globals())
  File "C:\Program Files (x86)\Google\google_appengine\appcfg.py", line 167, in run_file
execfile(script_path, globals_)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 4191, in <module>
main(sys.argv)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 4182, in main
result = AppCfgApp(argv).Run()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 2579, in Run
self.action(self)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 3927, in __call__
return method()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 3040, in Update
updatecheck.CheckForUpdates()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appcfg.py", line 596, in CheckForUpdates
runtime=self.config.runtime)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\appengine_rpc.py", line 383, in Send
f = self.opener.open(req)
  File "C:\Python27\lib\urllib2.py", line 400, in open
response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 418, in _open
'_open', req)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1215, in https_open
return self.do_open(httplib.HTTPSConnection, req)
  File "C:\Program Files (x86)\Google\google_appengine\lib\fancy_urllib\fancy_urllib\__init__.py", line 370, in do_open
req)
  File "C:\Python27\lib\urllib2.py", line 1146, in do_open
h = http_class(host, timeout=req.timeout) # will parse host:port
  File "C:\Program Files (x86)\Google\google_appengine\lib\fancy_urllib\fancy_urllib\__init__.py", line 78, in __init__
httplib.HTTPSConnection.__init__(self, *args, **kwargs)
  File "C:\Python27\lib\httplib.py", line 1149, in __init__
source_address)
  File "C:\Python27\lib\httplib.py", line 693, in __init__
self._set_hostport(host, port)
  File "C:\Python27\lib\httplib.py", line 721, in _set_hostport
raise InvalidURL("nonnumeric port: '%s'" % host[i+1:])
httplib.InvalidURL: nonnumeric port: 'port'
2012-10-22 16:55:29 (Process exited with code 1)

You can close this window now. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:17:52.683

我会先说我不熟悉 GUI，所以请随意完全无视:)。

该错误似乎表明您正在尝试为部署指定特定端口，此外，该设置的值是“端口”一词。在开发服务器上使用命令行时，`port`是一个参数，您可以使用它来指定要使用的特定端口；`port`我最好的猜测是，当您尝试部署时，此关键字参数仍被定义（as ）。是否有可以指定命令行标志的部分？部署时是否可以在`port`那里定义？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:58:11.113

我通过完全卸载并重新安装 Python 2.7 和 GAE 解决了这个问题。此完整擦除应包括删除自您使用 GAE 以来设置的所有环境变量。

就我而言，我认为特别是环境代理变量的创建。彻底清除 Python 和 GAE 解决了这个问题。

# android - 如何修改应用程序“标题”中的“title_activity_main”文本颜色？

> ID：13021811
> 
> 赞同：0
> 
> 时间：2012-10-23T00:08:03.373
> 
> 标签：android

> **可能重复：**
> [ActionBar 文本颜色](https://stackoverflow.com/questions/5861661/actionbar-text-color)

![我想修改](../Images/8a13bb432d9e78f5c0a5ede77fe1dd44.png)

我想修改应用程序“标题”中文本的颜色（红色圆圈），有什么想法吗？清单还是在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:36:48.213

您的问题不在清单中。相反，转到值 -> 样式并将其设置为您选择的颜色。

# ruby - 使用 step 循环遍历数组

> ID：13021812
> 
> 赞同：25
> 
> 时间：2012-10-23T00:08:04.017
> 
> 标签：ruby, loops, iteration

我想查看数组中的每个第 n 个元素。在 C++ 中，我会这样做：

```
for(int x = 0; x<cx; x+=n){
    value_i_care_about = array[x];
    //do something with the value I care about.  
} 
```

我想在 Ruby 中做同样的事情，但找不到“一步”的方法。循环可以`while`完成这项工作，但我发现将它用于已知大小是令人反感的，并希望有更好（更多 Ruby）的方式来执行此操作。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-23T00:25:56.850

范围有一个`step`方法可以用来跳过索引：

```
(0..array.length - 1).step(2).each do |index|
  value_you_care_about = array[index]
end 
```

或者，如果您对使用`...`范围感到满意，以下内容会更简洁：

```
(0...array.length).step(2).each do |index|
  value_you_care_about = array[index]
end 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-23T10:12:52.330

```
array.each_slice(n) do |e, *_|
  value_i_care_about = e
end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-03T16:31:15.077

只需使用 Range 类中的 step() 方法，该方法返回一个枚举器

```
(1..10).step(2) {|x| puts x} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T00:11:49.907

我们可以在每次迭代时跳过一系列数字进行迭代，例如：

```
1.step(10, 2) { |i| print "#{i} "} 
```

[http://www.skorks.com/2009/09/a-wealth-of-ruby-loops-and-iterators/](http://www.skorks.com/2009/09/a-wealth-of-ruby-loops-and-iterators/)

所以像：

```
array.step(n) do |element|
  # process element
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T00:34:23.003

这是使用模运算符的一个很好的例子`%`

当你掌握了这个概念时，你可以将它应用到大量不同的编程语言中，而无需了解它们。

```
step = 2
["1st","2nd","3rd","4th","5th","6th"].each_with_index do |element, index|
  puts element if index % step == 1
end

#=> "2nd"
#=> "4th"
#=> "6th" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-15T18:17:35.767

```
class Array
def step(interval, &block)
    ((interval -1)...self.length).step(interval) do |value|
        block.call(self[value])
    end
end
end 
```

您可以将该方法添加到类 Array

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-23T17:36:48.017

关于什么：

```
> [1, 2, 3, 4, 5, 6, 7].select.each_with_index { |_,i| i % 2 == 0 }
=> [1, 3, 5, 7] 
```

迭代器的链接非常有用。

# java - GroupLayout 对齐问题

> ID：13021817
> 
> 赞同：3
> 
> 时间：2012-10-23T00:08:38.103
> 
> 标签：java, swing, boxlayout

我在 Java 中根据需要设置 GroupLayout 时遇到问题。

我的代码如下。组件的所需放置是：

```
++++++++++++++++++++++++++++++++++++++++++++++++++++
+LABEL_A       caseStudyComboBox           LABEL_B +
+LABEL_C       TextfieldE                  BtnD    +
++++++++++++++++++++++++++++++++++++++++++++++++++++ 
```

而不是上面的，输出是：

```
 +++++++++++++++++++++++++++++++++++++++++++++++++++
 +LABEL_A                                          +
 +                caseStudyCombBox                 +
 +                                  LABEL_B        +
 +       LABEL_C IS LONGER THAN A:                 +
 +                                TextfieldE       +
 +                                           BtnD  +
 +++++++++++++++++++++++++++++++++++++++++++++++++++ 
```

请提出一些补救措施。谢谢。

```
import java.awt.Component;
import java.awt.Dimension;

import javax.swing.*;
import static javax.swing.GroupLayout.Alignment.*;

public class EXP1 extends JFrame {
String [] caseStudyList = {
        "",
        "Case A",
        "Case B"
};
//
public EXP1() {
    JLabel Label_A = new JLabel("LABEL A ");
    JComboBox caseStudyComboBox = new JComboBox(caseStudyList);
    JLabel Label_B = new JLabel("LABEL B");
    JLabel Label_C = new JLabel("LABEL C IS LONGER THAN A: ");
    JButton BtnD = new JButton("BUTTON D");
    JTextField TextFieldE = new JTextField();

    GroupLayout layout = new GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setAutoCreateGaps(true);
    layout.setAutoCreateContainerGaps(true);

    layout.setHorizontalGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(TRAILING))
                .addComponent(Label_A, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(Label_C, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(LEADING))
                .addComponent(caseStudyComboBox, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(TextFieldE, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(LEADING))
                .addComponent(Label_B, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(BtnD, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );

    layout.linkSize(SwingConstants.HORIZONTAL, Label_B, BtnD);

    layout.setVerticalGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(BASELINE))
                .addComponent(Label_A)
                .addComponent(caseStudyComboBox)
                .addComponent(Label_B)
            .addGroup(layout.createParallelGroup(LEADING))
                .addComponent(Label_C)
                .addComponent(TextFieldE)
                .addComponent(BtnD)
    );

    setTitle("EXPERIMENT");
    this.pack();
    setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
}
public static void main(String[] args) {
    // TODO Auto-generated method stub
    //BPAOntoEIAUI mainUI = new BPAOntoEIAUI();
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                UIManager.setLookAndFeel(
                              "javax.swing.plaf.metal.MetalLookAndFeel");
                            //  "com.sun.java.swing.plaf.motif.MotifLookAndFeel");
                            //UIManager.getCrossPlatformLookAndFeelClassName());
            } catch (Exception ex) {
                ex.printStackTrace();
            }
            new EXP1().setVisible(true);
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:28:50.443

当您设置水平和垂直组时，括号看起来有点混乱。控件不属于您创建的预期组。

代替

```
layout.setHorizontalGroup(layout.createSequentialGroup()
 .addGroup(layout.createParallelGroup())
 .addComponent(Label_A)
 .addComponent(Label_C) 
```

它实际上应该是：

```
layout.setHorizontalGroup(layout.createSequentialGroup()
 .addGroup(layout.createParallelGroup()
 .addComponent(Label_A)
 .addComponent(Label_C)) 
```

在第一种情况下，您将标签添加到顺序组而不是像第二种情况那样的并行组。

这是使用以下稍微修改的代码的结果：

![在此处输入图像描述](../Images/cabd053b990b4de8deb8298e30ff94b7.png)

```
layout.setHorizontalGroup(layout.createSequentialGroup()
        .addGroup(layout.createParallelGroup(TRAILING)
            .addComponent(Label_A, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(Label_C, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        .addGroup(layout.createParallelGroup(LEADING)
            .addComponent(caseStudyComboBox, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(TextFieldE, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        .addGroup(layout.createParallelGroup(LEADING)
            .addComponent(Label_B, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(BtnD, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
);

layout.linkSize(SwingConstants.HORIZONTAL, Label_B, BtnD);

layout.setVerticalGroup(layout.createSequentialGroup()
        .addGroup(layout.createParallelGroup(BASELINE)
            .addComponent(Label_A)
            .addComponent(caseStudyComboBox)
            .addComponent(Label_B))
        .addGroup(layout.createParallelGroup(LEADING)
            .addComponent(Label_C)
            .addComponent(TextFieldE)
            .addComponent(BtnD))
); 
```

# php - klout api 还没有完成吗？让 issus 通过它获取数据

> ID：13021821
> 
> 赞同：0
> 
> 时间：2012-10-23T00:09:05.070
> 
> 标签：php, api, login, klout

嗨，我想使用 klout api 来获取用户的 facebook 或 twitter 分数。但是我无法制作像我在使用 facebook 或 twitter api 时所做的那样的应用程序。我有两个key：一个是oauth key，一个是partner key，有什么区别？？如何使用 klout api 拨打电话？[我在这里](http://klout.com/s/developers/v2)尝试过，但仍然无法成功调用，甚至无法在我的页面中添加登录按钮，有人可以帮助我并给我一些示例代码，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:46:45.383

您是否已注册帐户并收到 API 密钥？几点：

*   OAuth API 是经过审核的。为其生成的密钥在获得批准之前不会被激活。在申请并获得密钥批准之前，您将无法向页面添加登录按钮。
*   V2 API 更加开放，但仍需要您在[http://developer.klout.com/member/register进行注册](http://developer.klout.com/member/register)
*   由于 Facebook 的平台服务条款，您目前无法在 API 上查找 Facebook 用户。
*   页面上的示例通常不完整，因为它们要求您包含密钥、具有活动的应用程序配置文件以及在该应用程序配置文件上设置回调 URL。

# android - Android相机闪光灯关闭后无法打开

> ID：13021823
> 
> 赞同：0
> 
> 时间：2012-10-23T00:09:12.170
> 
> 标签：android, camera

我的相机预览屏幕上有一个按钮来切换相机的闪光灯。相机开始自动闪光，然后当按下按钮时闪光灯会关闭，但是当我尝试重新打开闪光灯时它不会打开，我不知道为什么？

```
Log.d("flash",mCamera.getParameters().getFlashMode()); 
```

当我按下它时显示关闭和自动。但它不会重新打开。这是我的完整代码

```
public void flashPressed(View v)
{
    ImageButton flashButton = (ImageButton)findViewById(R.id.flash);
    Camera.Parameters myP = mCamera.getParameters();
    if(flashOn == 0)
    {
        flashButton.setImageResource(R.drawable.device_access_flash_off);

        myP.setFlashMode(Camera.Parameters.FLASH_MODE_OFF);
        flashOn = 1;

    }
    else if(flashOn == 1)
    {
        myP.setFlashMode(Camera.Parameters.FLASH_MODE_ON);
        flashButton.setImageResource(R.drawable.device_access_flash_on);
        flashOn=2;
    }else{
        myP.setFlashMode(Camera.Parameters.FLASH_MODE_AUTO);
        flashButton.setImageResource(R.drawable.device_access_flash_automatic);
        flashOn =0;
    }

    mCamera.setParameters(myP);
    Log.d("flash",mCamera.getParameters().getFlashMode());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T23:41:11.130

这就是我用来创建 Flash 应用程序的方式。

```
public class Flash extends Activity {
    boolean cameraOpened;
    static Camera camFlash = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }

    @Override
    public void onPause() {
        super.onPause();
        if (camFlash != null) {
            camFlash.stopPreview();
            camFlash.release();
            camFlash = null;

        }

    }

    public void turnOnFlash(View view) {
        if (camFlash == null) {
            camFlash = Camera.open();
        }
        if (camFlash != null) {
            Parameters params = camFlash.getParameters();
            params.setFlashMode(Parameters.FLASH_MODE_TORCH);
            camFlash.setParameters(params);
            camFlash.startPreview();
            camFlash.autoFocus(new AutoFocusCallback() {
                public void onAutoFocus(boolean success, Camera camera) {
                }
            });

        }
    }

    public void turnOffFlash(View view) {
        if (camFlash != null) {
            camFlash.stopPreview();
            camFlash.release();
            camFlash = null;
        }
    }
} 
```

从 xml android:onClick 调用方法 turnOnFlash() 和 turnOffFlash。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:03:26.490

为了避免这个问题，我每次闪光灯选项更改时都创建了一个新相机

# iphone - 从另一个类调用时，对象为零

> ID：13021825
> 
> 赞同：2
> 
> 时间：2012-10-23T00:09:26.157
> 
> 标签：iphone, objective-c, ios, cocoa-touch

当在另一个类中调用方法时，我想更改另一个对象的属性。

更改此对象属性的代码位于第一个类的方法中，并且在从它自己的类调用它时起作用，但是当从另一个类调用时，方法中的对象返回 nil。

*这是代码：*

**视图控制器.h**

```
@interface ViewController : UIViewController {

    UIView *menuView; //the object

}

@property (nonatomic, retain) IBOutlet UIView *menuView;

-(void)closeMenu; //the method

@end 
```

**视图控制器.m**

```
@implementation ViewController

@synthesize menuView;

-(void)closeMenu{

    [menuView setFrame:CGRectMake(menuView.frame.origin.x, -menuView.frame.size.height, menuView.frame.size.width, menuView.frame.size.height)];

    NSLog(@"%f", menuView.frame.size.height); //returns height when method is called from it's own class. But returns 0 (nil) when called from the other class.

} 
```

**SDNestedTableViewController.h**（没什么重要的，但可能有帮助？）

```
@interface SDMenuViewController : SDNestedTableViewController{

} 
```

**SDNestedTableViewController.m**

```
#import "SDMenuViewController.h"
#import "ViewController.h"

- (void) item:(SDGroupCell *)item subItemDidChange:(SDSelectableCell *)subItem
{

    ViewController *firstViewController = [[[ViewController alloc] init] autorelease];

    SelectableCellState state = subItem.selectableCellState;
    NSIndexPath *indexPath = [item.subTable indexPathForCell:subItem];
    switch (state) {
        case Checked:
            NSLog(@"Changed Sub Item at indexPath:%@ to state \"Checked\"", indexPath);

            [firstViewController closeMenu]; //called from other class

            break;
        case Unchecked:
            NSLog(@"Changed Sub Item at indexPath:%@ to state \"Unchecked\"", indexPath);
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T00:21:05.547

您发布的内容如下所示：

```
-(void)closeMenu{
    // menuView is never initialized, == nil
    [nil setFrame:CGRectMake(0, -0, 0, 0)];

    NSLog(@"%f", 0); //returns height when method is called from it's own class. But returns 0 (nil) when called from the other class.

} 
```

所以你在做`NSLog(@"%f", 0);`。

如果您确实通过访问`view`属性来加载视图，则 menuView 将由 IB 规则初始化。有关 viewController 视图加载/卸载的详细信息，请参阅[参考文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T08:18:53.827

我想这可能会对你有所帮助。

在您的`AppDelegate`班级，您必须声明一个`ViewController`班级对象。使其成为`YourAppDelegate`类的属性。如下所示。（这将导入`ViewController`类并创建类的共享对象，`YourAppDelegate`以便您可以`YourAppDelegate`通过简单地导入来全局访问类的成员`YourAppDelegate.h`）。

```
#import "ViewController.h"

#define UIAppDelegate ((YourAppDelegate *)[UIApplication sharedApplication].delegate)

@interface YourAppDelegate : NSObject <UIApplicationDelegate> 
{
     ViewController  *objViewController;
}

@property (nonatomic, retain) ViewController  *objViewController;

@end 
```

`YourAppDelegate.m`并在文件中合成属性。

```
@implementation YourAppDelegate

@synthesize objViewController;

@end 
```

然后棘手的部分是，您必须在加载类时备份`ViewController`类中的类对象。`YourAppDelegate``ViewController`

为此，首先`YourAppDelegate.h`在`ViewController.h`类中和`ViewController.m`实现`viewWillAppear:`委托处导入 ，如下所示。

```
- (void)viewWillAppear:(BOOL)animated 
{
    [super viewWillAppear:animated];
    UIAppDelegate.objViewController = self;
} 
```

然后在`SDNestedTableViewController.m`,

```
#import "SDMenuViewController.h"
#import "ViewController.h"

- (void) item:(SDGroupCell *)item subItemDidChange:(SDSelectableCell *)subItem
{

    ViewController *firstViewController = (ViewController *)UIAppDelegate.objViewController;

    if(firstViewController && [firstViewController isKindOfClass:[ViewController class]])
    {
            SelectableCellState state = subItem.selectableCellState;
            NSIndexPath *indexPath = [item.subTable indexPathForCell:subItem];
            switch (state) {
              case Checked:
                        NSLog(@"Changed Sub Item at indexPath:%@ to state \"Checked\"", indexPath);

                        [firstViewController closeMenu]; //called from other class

                        break;
              case Unchecked:
                        NSLog(@"Changed Sub Item at indexPath:%@ to state \"Unchecked\"", indexPath);
                        break;
              default:
                        break;
            }
    }
} 
```

试试这个方法。我并不是说这是正确的方法，但是，这应该有效。很高兴这对您有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T00:53:16.857

问题是：

```
- (void) item:(SDGroupCell *)item subItemDidChange:(SDSelectableCell *)subItem {

    ViewController *firstViewController = [[[ViewController alloc] init] autorelease];

    ...

    [firstViewController closeMenu];

} 
```

当您`closeMenu`从那里调用时，它永远不会被初始化，因为没有足够的时间来初始化`view`视图控制器，此时也不会调用`viewDidLoad`您的方法。也不是从 nib 创建的，所以这就是它的原因。`firstViewController``menuView``nil`

也许由于某种原因，可能会产生足够长的延迟`menuView`，但这不是你应该在 iOS 中做事的方式。

因此，如果您不想显示您的`menuView`，只需向您的 and 添加一些布尔值，`firstViewController`而不是`closeMenu`这样做：

```
firstViewController.shouldCloseMenu = YES; 
```

然后在您的`ViewController`in`viewDidLoad`方法中执行以下操作：

```
if (self.shouldCloseMenu ) {
    [self closeMenu];
} 
```

也许这不是最好的方法，但现在你知道它应该如何工作了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T02:14:09.807

我相信您的问题与您初始化 viewController 的方式有关。

代替

```
ViewController *firstViewController = [[[ViewController alloc] init] autorelease]; 
```

采用

```
ViewController *firstViewController = [[[ViewController alloc] initWithNibName:@"yourNibName" bundle:nil] autorelease]; 
```

我假设您有一个笔尖，因为您使用的是 IBOutlet。但我相信 IBOutlet 永远不会设置，因为您尚未加载 nib 文件。

还要仔细检查您与界面生成器的 IBOutlet 连接并使用“self.menuView”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T21:25:42.433

编辑2：

好吧，你把你的代码发给了我，所以现在我不能再说我没有足够的信息来解决你的问题。

让我们来看看。

现在我看到您的 ViewController 是您的应用程序的 rootViewController，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

好，现在 ViewController 与您的 SDNestedTableViewController 有什么关系？

你在 ViewController 的 viewDidLoad 中有这个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    SDMenuViewController *mvc = [[[SDMenuViewController alloc] initWithNibName:@"SDNestedTableView" bundle:nil] autorelease];
    [self addChildViewController:mvc];
    [mvc didMoveToParentViewController:self];
    [menuView addSubview:mvc.view];

    // Some other stuff with gesture recognizers I'm omitting...

    [self openMenu];

} 
```

好的，所以看起来 SDMenuViewController 是 ViewController 的孩子。现在，您在 SDMenuViewController 中有一个名为 item:subItemDidChange 的方法：

```
- (void) item:(SDGroupCell *)item subItemDidChange:(SDSelectableCell *)subItem
{

    ViewController *firstViewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];

    SelectableCellState state = subItem.selectableCellState;
    NSIndexPath *indexPath = [item.subTable indexPathForCell:subItem];
    switch (state) {
        case Checked:
            NSLog(@"Changed Sub Item at indexPath:%@ to state \"Checked\"", indexPath);

            //close the menuView

            [firstViewController closeMenu];

            break;
        case Unchecked:
            NSLog(@"Changed Sub Item at indexPath:%@ to state \"Unchecked\"", indexPath);
            break;
        default:
            break;
    }
} 
```

所以，你希望引用回到*现有的*ViewController 对象，对吧？因为在那里你正在制作另一个。所以，你可以这样做：

```
ViewController *firstViewController = self.parentViewController; 
```

这让您可以参考 SDMenuViewController 的父级，即 ViewController 的实例。此属性在您`addChildViewController:`拨打电话时设置。

* * *

好的，虽然这很令人困惑：

在您的帖子中，您说您的`item:subItemDidChange:`方法在 SDNestedTableViewController 中，但在您发送给我的代码中，它在 SDMenuViewController 中。

在SDNestedTableViewController中，我找到了这个方法：

```
- (void) mainItem:(SDGroupCell *)item subItemDidChange: (SDSelectableCell *)subItem forTap:(BOOL)tapped
{
    if(delegate != nil && [delegate respondsToSelector:@selector(item:subItemDidChange:)] )
    {
        [delegate performSelector:@selector(item:subItemDidChange:) withObject:item withObject:subItem];
    }
} 
```

所以看起来你没有使用与原始帖子中相同的代码，但足够接近，无论如何。

* * *

现在，如果您想从应用程序中的*任何位置*获取对 ViewController 实例的引用，而不仅仅是您的 SDMenuViewController（恰好是 ViewController 实例的子实例），您应该使用 @Mathew Varghese 的[答案](https://stackoverflow.com/a/13118017/700471)。

这是此方法的重述：

1.  将该行添加`+ (AppDelegate *)instance;`到您的 AppDelegate.h 文件中。
2.  将以下方法添加到您的 AppDelegate.m 文件。

像这样：

```
+ (AppDelegate *)instance
{
    AppDelegate *dg = [UIApplication sharedApplication].delegate;
    return dg;
} 
```

然后，在任何你想要引用的对象中，你`#import AppDelegate.h`说`ViewController *vc = AppDelegate.instance.firstViewController;`

无论如何，这只是马修前面提到的另一种说法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T00:51:27.360

我建议您通过以下步骤解决此问题。

1.  不要`firstViewController`在`SDMenuViewController`.

2.  在案例检查块中，向`NSNotificationCenter`

3.  在`ViewController`注册具有相同消息 Id 的消息时，使用该`closeMenu`方法作为其处理程序。

对我来说，使用消息中心来调度处理可以解耦控制器之间的关系。这是一种更好的方法，您可以较少关注另一个控制器的生命周期。

希望它会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T07:19:37.917

`alloc-init`'ing 一个 ViewController 和`alloc-init`'ing 那个视图控制器的属性是有区别的。

关于你的第二个例子（从另一个班级打电话）。您当前的代码表明您`alloc-init`首先使用 ViewController，但随后不对其进行任何操作。假设您没有覆盖 ViewController 的`init`方法，它的属性和 iVar 应该是`nil`（或最坏的情况下未定义）。你需要`alloc-init`你的`firstViewController.menuView`第一个。IE：

```
firstViewController.menuView = [[UIView alloc] initWithFrame]; // Don't do this. 
```

这种方法的问题是您正在从另一个类设置 firstViewController 的属性，这通常是相当平均的设计实践。这个必需的设置通常会发生在`viewDidLoad`但是因为你还没有对 firstViewController 做任何事情，所以它永远不会被调用。

相反，当您`closeMenu`从它自己的 View Controller 调用时，您实际上是在对视图执行某些操作，并且`menuView = [[UIView alloc] init];`首先调用 viewDidLoad（或找到的任何位置），从而初始化您的 menuView 对象。

您需要确保首先初始化 menuView 对象，然后再尝试对其进行任何操作，仅初始化包含它的 View Controller 是不够的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-30T04:51:27.677

```
#import "SDMenuViewController.h"
#import "ViewController.h"

- (void) item:(SDGroupCell *)item subItemDidChange:(SDSelectableCell *)subItem
{ 
```

> // 我们为什么要在这里分配这个对象，如果它只是在 Checked 的情况下需要的话：

```
 ViewController *firstViewController = [[[ViewController alloc] init] autorelease];
    SelectableCellState state = subItem.selectableCellState;
    NSIndexPath *indexPath = [item.subTable indexPathForCell:subItem];
    switch (state) {
        case Checked:
            NSLog(@"Changed Sub Item at indexPath:%@ to state \"Checked\"", indexPath);

            [firstViewController closeMenu]; //called from other class

            break;
        case Unchecked:
            NSLog(@"Changed Sub Item at indexPath:%@ to state \"Unchecked\"", indexPath);
            break;
        default:
            break;
    }
} 
```

将其更改为

```
#import "SDMenuViewController.h"
#import "ViewController.h"

- (void) item:(SDGroupCell *)item subItemDidChange:(SDSelectableCell *)subItem
{ 
```

> // 我们为什么要在这里分配这个对象，如果它只是在 Checked 的情况下需要的话：

```
 SelectableCellState state = subItem.selectableCellState;
    NSIndexPath *indexPath = [item.subTable indexPathForCell:subItem];
    switch (state) {
        case Checked:
            NSLog(@"Changed Sub Item at indexPath:%@ to state \"Checked\"", indexPath);

            // here no need to put object in autorelease mode.
            ViewController *firstViewController = [[ViewController alloc] init];
            [firstViewController closeMenu]; //called from other class
            [firstViewController release];

            break;
        case Unchecked:
            NSLog(@"Changed Sub Item at indexPath:%@ to state \"Unchecked\"", indexPath);
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-30T06:57:44.123

一切都正确，更改**-(void)closeMenu**方法，如...

```
-(void)closeMenu
{
    menuView=[[UIView alloc]initWithFrame:CGRectMake(50.0,50.0,200.0,200.0)]
    NSLog(@"%f", menuView.frame.size.height); //returns height when method is called from it's own class. But returns 0 (nil) when called from the other class.
} 
```

试试这个，让我知道。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-31T02:02:54.037

尝试删除**UIView *menuView; //**接口文件中的对象

```
@interface ViewController : UIViewController {

    // try to remove this line
    UIView *menuView; //the object

} 
```

并更新此方法

```
-(void)closeMenu{

    [self.menuView setFrame:CGRectMake(self.menuView.frame.origin.x, -self.menuView.frame.size.height, self.menuView.frame.size.width, self.menuView.frame.size.height)];

    NSLog(@"%f", self.menuView.frame.size.height);

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-31T13:17:21.547

我建议你使用这个：

```
if(menuView) {
    [menuView setFrame:CGRectMake(menuView.frame.origin.x, -menuView.frame.size.height, menuView.frame.size.width, menuView.frame.size.height)];
} else {
    NSLog(@"menuView is nil");
} 
```

# c# - 如何防止将 Windows-1252 参数转换为 Unicode 字符串？

> ID：13021834
> 
> 赞同：2
> 
> 时间：2012-10-23T00:10:08.380
> 
> 标签：c#, com

我已经编写了我的第一个 COM 类。我的单元测试工作正常，但我第一次使用 COM 对象遇到了障碍。

COM 类提供接受字符串、操作字符串并返回字符串的方法。COM 对象的使用者是一个 dBASE PLUS 程序。

当输入字符串包含常用键盘字符（ASCII 127 或更低）时，COM 方法可以正常工作。但是，如果字符串包含超出 ASCII 范围的字符，其中一些会从 Windows-1252 重新映射到 C# 的 Unicode。此表显示发生的映射：[http ://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT](http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT)

例如，如果 dBASE 程序使用以下命令调用 COM 对象：

`oMyComObject.MyMethod("It will cost`€`123")`其中 € 是十六进制 80，

C# 方法将其作为 Unicode 接收：

```
public string MyMethod(string source)
{
    // source is Unicode and now the Euro symbol is hex 20AC
    ...
} 
```

我想避免这种重新映射，因为我想要字符串的原始十六进制内容。

我尝试将以下内容添加到 MyMethod 以将字符串转换回 Windows-1252，但欧元符号会丢失，因为它变成了一个问号：

```
 byte[] UnicodeBytes = Encoding.Unicode.GetBytes(source.ToString());
        byte[] Win1252Bytes = Encoding.Convert(Encoding.Unicode, Encoding.GetEncoding(1252), UnicodeBytes);
        string Win1252 = Encoding.GetEncoding(1252).GetString(Win1252Bytes); 
```

有没有办法防止将“源”参数转换为 Unicode？或者，有没有办法将它从 Unicode 100% 转换回 Windows-1252？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:04:30.073

是的，我正在回答我自己的问题。“Jigsore”的回答让我走上了正轨，但我想更清楚地解释一下，以防其他人犯我犯的同样错误。

我最终发现我误诊了这个问题。dBASE 很好地传递了字符串，而 C# 很好地接收了它。这就是我检查错误字符串内容的方式。

这个交钥匙工程建立在 Jigsore 的回答之上：

```
void Main()
{
    string unicodeText = "\u20AC\u0160\u0152\u0161";

    byte[] unicodeBytes = Encoding.Unicode.GetBytes(unicodeText);
    byte[] win1252bytes = Encoding.Convert(Encoding.Unicode, Encoding.GetEncoding(1252), unicodeBytes);
    for (int i = 0; i < win1252bytes.Length; i++)
        Console.Write("0x{0:X2} ", win1252bytes[i]); // output: 0x80 0x8A 0x8C 0x9A

    // win1252String represents the string passed from dBASE to C#
    string win1252String = Encoding.GetEncoding(1252).GetString(win1252bytes);

    Console.WriteLine("\r\nWin1252 string is " + win1252String); // output: Win1252 string is €ŠŒš
    Console.WriteLine("looking at the code of the first character the wrong way: " + (int)win1252String[0]);
    // output: looking at the code of the first character the wrong way: 8364

    byte[] bytes = Encoding.GetEncoding(1252).GetBytes(win1252String[0].ToString());

    Console.WriteLine("looking at the code of the first character the right way: " + bytes[0]);
    // output: looking at the code of the first character the right way: 128

    // Warning: If your input contains character codes which are large in value than what a byte
    // can hold (ex: multi-byte Chinese characters), then you will need to look at more than just bytes[0].
} 
```

第一种方法错误的原因是转换`(int)win1252String[0]`（或将整数 j 转换为带有 的字符的反面`(char)j`）涉及与 C# 使用的 Unicode 字符集的隐式转换。

我认为这已解决，并感谢每个花时间评论或回答他们的时间和麻烦的人。值得赞赏！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T03:09:38.037

实际上，您正在正确地进行 Unicode 到 Win-1252 的转换，但是您正在执行一个额外的步骤。Win1252原始码在**Win1252Bytes**数组中！检查以下代码：

```
string unicodeText = "\u20AC\u0160\u0152\u0161";

byte[] unicodeBytes = Encoding.Unicode.GetBytes(unicodeText);
byte[] win1252bytes = Encoding.Convert(Encoding.Unicode, Encoding.GetEncoding(1252), unicodeBytes);
for (i = 0; i < win1252bytes.Length; i++)
    Console.Write("0x{0:X2} ", win1252bytes[i]); 
```

输出显示**unicodeText字符串的****Win-1252**代码，您可以通过查看**CP1252.TXT**表来检查这一点。

# javascript - 调用 JSON 时，出现“200 ok”错误

> ID：13021837
> 
> 赞同：-1
> 
> 时间：2012-10-23T00:10:18.213
> 
> 标签：javascript, jquery, json

我已经克服了所有其他错误，但是现在我成功连接到页面后，firebug 中出现了 200 OK 错误，这当然是最没有帮助的错误。

```
<div class="placeholder"></div>
<script language="JavaScript" type="text/javascript">
   $(document).ready(function(){                     
     $(function(){
        $("a[href*='/site/apps/kb/cs/contactdisplay.asp']").click(function(e){
            var orgUrl = $(this).attr("href") + "&r=1";
           e.preventDefault();
           $.getJSON(orgUrl,
           function(data){
               $("placeholder").html("<strong>" + data.companyName + "</strong>");
           });
        });
     });
   });
</script> 
```

单击其中一个公司链接，它将调用动态 URL 从目的地获取值： [http ://www.kintera.org/site/apps/kb/cs/contactsearch.asp?c=biIQI0NJKiKYF&b= 8383853&提交=提交](http://www.kintera.org/site/apps/kb/cs/contactsearch.asp?c=biIQI0NJKiKYF&b=8383853&submit=submit)

会让你看到我在做什么。我无法控制呈现的源 html，但我能够将我想要的输出放到 json 对象中。现在的诀窍是归还它。

是的，它调用的页面是 HTML 格式，但里面有一个 JSON 对象。作为 Workplace 6 链接的示例，它从以下位置提取：[http](http://www.kintera.org/site/apps/kb/cs/contactdisplay.asp?c=biIQI0NJKiKYF&b=8383853&sid=efIOKYMEJhIKLYMxHkH&r=1) ://www.kintera.org/site/apps/kb/cs/contactdisplay.asp?c=biIQI0NJKiKYF&b=8383853&sid=efIOKYMEJhIKLYMxHkH&r=1 。如果您查看源代码，您将看到 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:04:56.497

部分问题（来自您发布的链接）是您从链接获得的 href 指的是`http://`……，而不是`https://`- 这些算作不同的来源，因此[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)规则将中止 ajax 请求并将请求标记为 '在您的 Web 控制台中取消。

另一部分是您请求的页面不返回 json。您需要让目标页面以类似`{"companyName":"foo"}`mime 类型的`application/json`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:37:57.657

通过从 JSON 更改为 .load() 来修复它。出于文档目的，这就是我最终得到的。

```
<script>
$(document).ready(function(){
    //Call for results
    $(function(){
        $("a[href*='/site/apps/kb/cs/contactdisplay.asp']").click(function(e){
            var orgUrl = $(this).attr("href") + "&r=1";
            e.preventDefault();
            $.get(orgUrl, function(data){
                $(".placeholder").html( $(data).find(".nameContainer").html());
            })
        });
    });
});
</script> 
```

这意味着我将代码从嵌入在 HTML 中的 JSON 中删除为 HTML。

# c++ - strtok()：将字符串转换为 char*

> ID：13021838
> 
> 赞同：0
> 
> 时间：2012-10-23T00:10:21.897
> 
> 标签：c++, string, tokenize

> **可能重复：**
> [在 C++ 中拆分字符串](https://stackoverflow.com/questions/236129/splitting-a-string-in-c)

```
char *strtok(char *s1, const char *s2) 
```

如何`string`根据要求将 a 转换为 char* `strtok`？我做了

```
for (string line; getline(sourceFile, line);) {
    tokens = strtok(line.c_str(), " {};");
} 
```

( )`sourceFile`在哪里`ifstream``sourceFile.open(filepath.c_str());`

我正进入（状态：

> “const char *”类型的参数与“char *”类型的参数不兼容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:19:46.400

正如其他人所说，您可能想要使用`strtok`.

但是，做你所要求的（你可能不应该）：

```
for (string line; getline(sourceFile, line);) {
    char* line_cstr = strdup(line.c_str());

    char* token = strtok(line_cstr, " {};");

    while ((token = strtok(NULL, " {};")) != NULL) {
        //code
    }

    free(line_cstr);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:17:14.977

如果你做这样的事情：

```
char fp[40];  // or some reasonable size
strcpy( fp, filepath.c_str()); // fp is not a const char* like c_str() returns 
```

您应该可以使用`strtok()`反对`fp`.

但是您可能需要考虑更多`C++`的拆分字符串的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T00:26:25.103

正如 Jonathan Leffler 的评论所解释的，strtok 实际上修改了缓冲区以终止连续的标记。这对速度很有好处 - 无需将每个令牌复制到其他内存区域，同时仍让您可以方便地访问它作为单独的 NUL 终止序列。这是一个有趣的问题，在实例上使用 strtok 是否合法`std::string`- 当然，`c_str()`成员返回 a`const char*`因为您不打算覆盖该缓冲区的部分内容。但是，只要您没有空字符串（它会给出未定义的行为），您就可以`char*`使用`&line[0]`. 完成后，您可以改变字符串，但只能在偏移量处`[0]..[size()-1]`......不能保证以 NUL 终止的方式`c_str()`-returned 缓冲区是，正是因为`&line[0]`-returned 缓冲区可能不适合`strtok`. 您可以附加一个 NUL（即`line += '\0'`- NUL 是合法`std::string`内容），但它会使代码有点骇人听闻且难以维护，如果您打算将原始值用于任何事情，您可能需要在之后删除 NUL。

如果你真的想使用`strtok`，似乎最好先将数据复制到一个单独的可写 NUL 终止缓冲区。例如：

```
char* p = strdup(line.c_str());
... use strtok on p ...
free(p); 
```

您可以使用`alloca()`智能指针 a`std::vector<char>`来最大程度地减少内存泄漏的可能性。（我看不出有什么特别的理由更喜欢 C++`new`和`delete`上述情况——`strtok`无论如何你都在使用，但如果你有智能指针库，希望它可以使用）。

综上所述，寻找另一种机制——比如 boost 中的机制——是一个更好的选择。我猜在您的问题下的评论中发布的链接克里斯中讨论了类似的替代方案....

# javascript - 对标准的权威 JavaScript 验证

> ID：13021846
> 
> 赞同：2
> 
> 时间：2012-10-23T00:10:47.627
> 
> 标签：javascript, validation, ecma262

我正在尝试验证我[网站](http://bharath.lohray.com/)上的 JavaScript 。这些脚本不会抛出任何错误，并且在 Chrome 和 Firefox（最新稳定版本）上运行良好。但是，动画部分绝对不能在 IE (9)[*1][*solved] 上运行。我已经为动画使用了 jQuery 和 jQueryUI，并希望它可以跨浏览器兼容。

通常我不会关心 IE 用户，但喜欢[anybrowser.org](http://www.anybrowser.org/campaign/)上人们的想法，并认为坚持标准而不是使用最低公分母，并将优雅的降级留给浏览器/JS 引擎。根据 w3c 验证器，我的页面是 HTML5 兼容的，我想用 JavaScript 做同样的事情，但找不到可接受的方法。

为什么 JSLint 不起作用 -

1.  它不会像 w3c 验证器一样获取页面并检查它。
2.  所以没有办法检查 jQuery 引用的脚本。（有一些关于此的帖子）。

我确实找到了一个[ECMA-264 测试页面](http://test262.ecmascript.org/)，可以检查浏览器，但不是我的 JavaScript。

所有序言之后的问题是：**如何验证网页上的 Javascript？**是否有 JavaScript 的权威验证器？

* *1 补充：缩小与脚本在 IE9 上不工作无关。即使是未[缩小的版本](http://bharath.lohray.com/index.full.php)也不起作用。*

**已解决：[此评论](https://softwareengineering.stackexchange.com/questions/170935/what-is-javascript-really/170944#comment328070_170944)解决了特定页面的问题。*

* * *

这开始是“[什么是 Javascript？](https://stackoverflow.com/q/13019045/482176) ”在这里关闭并迁移到[Programmers](https://softwareengineering.stackexchange.com/)。感谢[YannisRizos](https://chat.stackexchange.com/users/15752/yannis-rizos)帮助我将原始问题拆分为程序员和 SO 之间可以接受的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:26:20.187

一个测试套件。不完全是。

如果您想确保您的 javascript 在每个目标环境中都能完美运行，那么您可以为您的代码编写一个测试套件，并确保它在您的所有目标环境中都能通过。

测试套件有助于找到代码在不同平台上运行时的中断位置。因此可以帮助您修复它。

* * *

但是，假设您想要一些工作较少的东西，[http://www.jshint.com/](http://www.jshint.com/)是您最好的选择。

或者[http://www.jslint.com/](http://www.jslint.com/)如果你喜欢被人骂。

但老实说，没有任何验证器能够确保您的代码没有错误地运行，并且在任何地方都完全符合您的期望。仅仅因为您的代码正确地遵循了最佳实践，这并不意味着它可以在旧版本的 IE 中运行。

标准不断发展，但从不更新的旧浏览器会卡在浏览器制造商可能成功或准确实施或未成功实施的任何标准上。

测试，无论是自动的还是手动的，都是确保一切正常工作的唯一方法。

# java - 为什么这种洪水填充算法不起作用？

> ID：13021851
> 
> 赞同：0
> 
> 时间：2012-10-23T00:11:19.470
> 
> 标签：java

对于这个问题：[是否有合适的算法来检测图形的背景颜色？](https://stackoverflow.com/questions/12995378/is-there-a-proper-algorithm-for-detecting-the-background-color-of-a-figure)，我将需要创建一个[填充算法](http://en.wikipedia.org/wiki/Flood_fill)，以便能够将我的所有像素分成相同颜色的组。

我递归地这样做了，但它给了我一个堆栈溢出错误。所以我不得不选择在这里找到的基于队列的迭代算法：[http ://en.wikipedia.org/wiki/Flood_fill#Alternative_implementations](http://en.wikipedia.org/wiki/Flood_fill#Alternative_implementations)

首先，我开始搜索所有矩阵元素（元素是`Pixel`类的实例）。

```
private PixelGroup[] generatePixelGroupsFromMatrix(Pixel[][] matrix) {
    PixelGroup[] tempGroups = new PixelGroups[9999999]; // Nevermind the 9999999....
    int groupsFound = 0;
    Pixel pixel;

    for (int y = 0; y < matrix.length; ++y) {
        for (int x = 0; x < matrix[0].length; ++x) {
            pixel = matrix[y][x];
            if (!pixel.evaluated) {
                // This pixel has never been evaluated
                // Therefore, it belongs to a new group
                // First, we make a new group
                PixelGroup newGroup = new PixelGroup();
                // Begin search for connected pixels with the same color. All pixels found will belong to this new group.
                findPixelsConnectedWith(pixel,newGroup);
                tempGroups[groupsFound] = newGroup;
                ++groupsFound;
            }
        }
    }

    PixelGroup[] result = new PixelGroup[groupsFound];
    for (int i = 0; i < groupsFound; ++i) {
        result[i] = tempGroups[i];
    }

    return result;
} 
```

因此，`Pixel`具有以下值：x、y、评估（布尔）和颜色（整数）。然后，`PixelGroup`只是一个能够保存像素的类（它有效）。

这是给我带来麻烦的方法：

```
private void findPixelsConnectedWith(Pixel pixel, GroupOfPixels group) {
    QueueOfPixels queue = new QueueOfPixels();
    queue.add(pixel);

    Pixel currentPixel;
    int x,y;
    Pixel neighbor;
    while((currentPixel = queue.nextPixel()) != null) {
        if (currentPixel.color == pixel.color && !currentPixel.evaluated) {
            // This pixel has the required color, and has not been evaluated. It meets our needs.
            // Add to group.
            group.addPixel(currentPixel);
            // Flag it as evaluated. So in the future, it will be ignored.
            currentPixel.evaluated = true;
            // Evaluate all 8 possible directions to find neighbor pixels
            int[] xDirections = {0,1,1,1,0,-1,-1,-1};
            int[] yDirections = {-1,-1,0,1,1,1,0,-1};
            for (int i = 0; i < 8; ++i) {
                x = xDirections[i];
                y = yDirections[i];
                if (pixelExists(currentPixel.y + y,currentPixel.x + x)) {
                    // There exists a pixel in this direction!
                    neighbor = getPixel(currentPixel.y + y,currentPixel.x + x);
                    queue.add(neighbor);
                }
            }
        }
    }

} 
```

如果你好奇，这是我的`QueueOfPixels`课。我必须只用向量（学校作业要求）自己制作：[https](https://codereview.stackexchange.com/questions/17823/vector-based-flood-fill-algorithm-queue-class) ://codereview.stackexchange.com/questions/17823/vector-based-flood-fill-algorithm-queue-class （据我所知，它很简单）。

**问题是什么？**

好吧，我已经用这张 5x2 像素的图像进行了测试（你需要放大很多才能看到它）：http: [//i.stack.imgur.com/xV0Lf.gif](https://i.stack.imgur.com/xV0Lf.gif) - 第一行只有黑色像素，第二个它们是白色的。程序告诉我它找到了**6 个像素组**（本来应该只有 2 个！）

**我尝试过什么来调试问题？**

好吧，首先，在调用 findPixelsConnectedWith 之前，我放置了这一行：

```
System.out.println("The pixel (" + x + "," + y + ") has not been evaluated. Evaluating now."); 
```

结果是这样的：

```
The pixel (0,0) has not been evaluated. Evaluating now.
The pixel (1,0) has not been evaluated. Evaluating now.
The pixel (2,0) has not been evaluated. Evaluating now.
The pixel (3,0) has not been evaluated. Evaluating now.
The pixel (4,0) has not been evaluated. Evaluating now.
The pixel (0,1) has not been evaluated. Evaluating now. 
```

因此，如您所见，代码似乎无法处理第一行（黑色像素），因为它认为该行中的每个像素都没有被评估（我希望它会说 (0,0) 是未评估和完成）。但是当它开始使用第二行时，它似乎确实按预期工作（找到（0,1）然后结束）。

**但我仍然无法找出发生了什么。**有任何想法吗？

**编辑：** 我的`getPixel`和`pixelExists`功能：

```
private boolean pixelExists(int y, int x) {
    return (y > 0 && y < pixelMatrix.length) && (x > 0 && x < pixelMatrix[0].length);
}

private Pixel getPixel(int y, int x) {
    return pixelMatrix[y][x];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:31:13.350

您的 pixelExists 方法应使用 y >= 0 和 x >= 0 而不是 y > 0 和 x > 0。

```
private boolean pixelExists(int y, int x) {
    return (y >= 0 && y < pixelMatrix.length) && (x >= 0 && x < pixelMatrix[0].length);
} 
```

这可能不是唯一的问题，但它肯定会阻止你得到正确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:46:41.740

Maybe pixelExists method has "y > 0" part while it should has "y>=0"?

# security - 如何安全地发送数据作为 URL 中的参数？

> ID：13021854
> 
> 赞同：0
> 
> 时间：2012-10-23T00:11:39.220
> 
> 标签：security, http, encryption, ssl, get

正如[这个答案](https://stackoverflow.com/a/2629241/327528)所暗示的，在 URL 字符串中包含敏感信息并不是一个好主意。即使使用 SSL 会对其进行加密，它也会以明文形式存储在服务器日志中。

那么应该如何将 GET 参数安全地传递给 Web 服务器呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:16:34.267

您将 GET 与 POST 数据混淆了。该答案涉及查询字符串，即 url 中的参数，由 GET 传递，您不应该在它们上传递敏感数据，而是在[POST](http://en.wikipedia.org/wiki/POST_%28HTTP%29)字段和[Http-Headers](https://stackoverflow.com/questions/3561381/custom-http-headers-naming-conventions)中传递它。

# css - UL 的鼠标悬停事件

> ID：13021860
> 
> 赞同：0
> 
> 时间：2012-10-23T00:13:04.463
> 
> 标签：css, image, mouseevent, mouseover, imagesource

我正在尝试在 ul 导航中为鼠标悬停进行图像更改。我似乎无法让它发挥作用。这是我的代码：

```
<ul id="nav">
    <li><a href="index.html">Home</a></li>
<li><a href="about.html">About</a></li>
<li><a href="portfolio.html">Portfolio</a></li>
<li><a href="contact.html">Contact</a></li>
</ul> 
```

和CSS：

```
ul#nav {
width: 940px; list-style: none; overflow: hidden; margin: -134px auto 25px auto;}

ul#nav li {width: 126px; height: 33px; float: left; padding: 13px 0 0 0;
    font-weight: bold; text-align: center; text-transform: uppercase; }

    ul#nav li:nth-child(1) {
        margin: 0 60px 0 0;

    }
    ul#nav li:nth-child(2) {
        margin: 0 316px 0 0;
    }
    ul#nav li:nth-child(3) {
        margin: 0 60px 0 0;
    }
    ul#nav li:nth-child(4) {
        margin: 0;
    }

    ul#nav li a {
        color: white; text-decoration: none;
    }
        ul#nav li a:hover {
            color: #660066;
        } 
```

基本上我有“家”“关于”“投资组合”和“联系人”的地方，我想用一个图像替换，然后将鼠标悬停到不同的图像上，这可能吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:44:45.007

Without javascript, you're going to have to use the `background` css attribute, and then use the `:hover` pseudoclass to change the image source.

[This website](http://coding.smashingmagazine.com/2009/09/02/backgrounds-in-css-everything-you-need-to-know/) gives a fairly comprehensive overview of using the background attribute.

Basically it will be something like:

```
#nav li {
    background: url(images/image1.png) 0 0 no-repeat;
}
#nav li:hover {
    background-image: url(images/image2.png);
} 
```

# assembly - 如何在 Assembly/LC-3 中“返回”一个值？

> ID：13021861
> 
> 赞同：0
> 
> 时间：2012-10-23T00:13:28.660
> 
> 标签：assembly, return, lc3

我们应该根据给定的“伪代码”在 LC3 汇编中创建程序。

我将如何在装配中“返回”一个值？

任何和所有的帮助表示赞赏。

伪代码：

```
int brandonacci(int n) {
    if (n <= -16) {
        return -n/3 + 8;
    }
    else {
        int c1 = brandonacci(n - 2);
        int c2 = brandonacci(n - 7);
        return c1 / 2 - 2 * c2 - 3; }
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T17:37:35.697

通常，在 LC3 汇编中，您将使用您选择的寄存器返回一个值。

这意味着您将执行 JSR 或 JSRR 来调用您的子例程/函数，将值存储在最后的寄存器中，然后 RET。由于我们知道这些指令仅使用 R7 寄存器，因此我们可以根据需要使用其他寄存器。

# formula - 如何重新计算 R 模型的因变量

> ID：13021862
> 
> 赞同：0
> 
> 时间：2012-10-23T00:13:30.417
> 
> 标签：formula

结果~1+Speed+Reltailsize+tailcontrst+relsvl:Speed+Reltailsize:Speed+Reltailsize:relsvl+策略:relsvl+tailcontrst:Reltailsize

我已经使用
require(MASS) polr(result~1+Speed+Reltailsize+tailcontrst+relsvl:Speed+Reltailsize:Speed+Reltailsize:relsvl+strategy:relsvl+tailcontrst:Reltailsize, data=results) 安装了它

并得到了系数：我现在的问题是我现在如何重新计算“结果”的值来代替因子的值？

我对此有两个具体疑问，1）我用“：”代替什么？也许 ”/” ？2）我需要重新使用概率链接功能吗？我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T02:03:17.950

我更进了一步。现在我使用 nnet 包中的 multinom 拟合模型，并使用 predict.nnet 从具有真实数据的数据帧中获取预测值。

```
M=multinom(result~1+Speed+relsvl, data=results)
summary(M)

require(nnet)
d=predict (M, realdata) 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:33:53.937

我推进了我的问题。: 不能用 / 代替，因为这意味着因子向量应该按大小写相乘 (Venables & Ripley, 2002)。仍然不知道如何使用值 1,2 和 3 进行有序概率转换。欢呼 Agus

# r - 'plot' 和 'ggplot' 并排生成的图

> ID：13021863
> 
> 赞同：17
> 
> 时间：2012-10-23T00:13:49.347
> 
> 标签：r, plot, ggplot2, par

有没有办法将函数生成的`plot`图和`ggplot`R 中的函数生成的图并排放在一个页面中？

`par`使用or函数很容易将同一函数创建的图放到一页中`multiplot`，但我无法弄清楚上述问题。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-23T00:53:57.600

您可以使用`gridBase`包和视口来执行此操作。

```
library(grid)
library(gridBase)
library(ggplot2)

# start new page
plot.new() 

# setup layout
gl <- grid.layout(nrow=1, ncol=2)
# grid.show.layout(gl)

# setup viewports
vp.1 <- viewport(layout.pos.col=1, layout.pos.row=1) 
vp.2 <- viewport(layout.pos.col=2, layout.pos.row=1) 
# init layout
pushViewport(viewport(layout=gl))
# access the first position
pushViewport(vp.1)

# start new base graphics in first viewport
par(new=TRUE, fig=gridFIG())

plot(x = 1:10, y = 10:1)

# done with the first viewport
popViewport()

# move to the next viewport
pushViewport(vp.2)

ggplotted <- qplot(x=1:10,y=10:1, 'point')
# print our ggplot graphics here
print(ggplotted, newpage = FALSE)

# done with this viewport
popViewport(1) 
```

![在此处输入图像描述](../Images/7f9a49c602b27beadc06f31dd9758067.png)

此示例是[Dylan Beaudette的](http://casoilresource.lawr.ucdavis.edu/drupal/node/905)[此博客文章](http://casoilresource.lawr.ucdavis.edu/drupal/node/1007)的修改版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T02:21:06.713

是的。它们都是基于网格的图形系统并返回图形对象。看看 gridExtra 包中的 grid.arrange 函数

# php - 如何通过php为此编写正则表达式？

> ID：13021864
> 
> 赞同：0
> 
> 时间：2012-10-23T00:13:49.440
> 
> 标签：php, regex, html-parsing

> **可能重复：**
> [正则表达式 - 贪婪 - 匹配 HTML 标签、内容和属性](https://stackoverflow.com/questions/5272604/regex-greedyness-matching-html-tags-content-and-attributes)

我要解析的文本是这样的：

```
Dir: <a href="/name/nm0381817/">Vinton Heuck</a>, <a href="/name/nm1367649/">Ciro Nieli</a>
    With: <a href="/name/nm0519680/">Eric Loomis</a>, <a href="/name/nm0732436/">Bumper Robinson</a>, <a href="/name/nm1685408/">Dawn Olivieri</a> 
```

通常，“Dir”后面有一个或两个锚元素，“With”后面有多个锚元素。

我想要做的是在“Dir”之后和“With”之前获取所有锚元素的值。我尝试了一些这样的正则表达式：

```
preg_match_all("/Dir: <a href=\"\/name\/.+\/\">(.+)<\/a>/", $content, $matches); 
```

但这仅在“Dir”之后只有一个锚元素时才有效。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:33:39.660

假设包含“Dir:”的行只出现一次：

```
preg_match_all("/(<([[:graph:]]+)[^>]*>)(.*?)(<\/\\2>)/", preg_replace("/[[:blank:]]*With:.*/","",$content), $matches);

print_r($matches[3]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:22:09.370

我认为您缺少一些分组指令“（）+”来获得的不仅是一个，而是一个或两个链接，看看[这个](http://gskinner.com/RegExr/)来测试你的正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T00:24:44.563

您必须对正则表达式进行分组以查找锚标记，并使用 + 表示一个或多个。

就像是：

```
/Dir: (<a href=\"\/name\/.+\/\">(.+)<\/a>)+/ 
```

您必须进行编辑以考虑逗号，但这会让您入门。

# android - 转换为 Dalvik 格式失败：无法执行 dex：无法处理转换为巨型索引

> ID：13021865
> 
> 赞同：1
> 
> 时间：2012-10-23T00:14:12.630
> 
> 标签：android, eclipse, jar, build-error, dex

在 Eclipse 中编译 Android 项目时遇到问题。我添加了 3 个我需要的外部 jar，现在我遇到了这个问题：

```
Conversion to Dalvik format failed: Unable to execute dex: Cannot handle conversion to jumbo index! 
```

我遇到的唯一有任何解决方案的资源就是[这个](https://groups.google.com/forum/?fromgroups=#!topic/adt-dev/tuLXN9GkVas)。不幸的是，将引用的行添加到 project.properties 并清理作为推荐的资源不起作用。如果其他人以前遇到过这个问题，你能告诉我如何解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T03:14:42.880

有同样的问题增加 eclipse.ini 的堆大小 [http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F)

-XX:MaxPermSize=1024m -Xms512m -Xmx2g

是我当前的设置

# c# - 有什么方法可以使用 Stream.CopyTo 只复制一定数量的字节？

> ID：13021866
> 
> 赞同：16
> 
> 时间：2012-10-23T00:14:17.220
> 
> 标签：c#

有什么方法可以使用[Stream.CopyTo](http://msdn.microsoft.com/en-us/library/system.io.stream.copyto.aspx)仅将一定数量的字节复制到目标流？什么是最好的解决方法？

编辑：
我的解决方法（省略了一些代码）：

```
internal sealed class Substream : Stream 
    {
        private readonly Stream stream; 
        private readonly long origin;   
        private readonly long length; 
        private long position;        

        public Substream(Stream stream, long length)
        {
            this.stream = stream;
            this.origin = stream.Position;
            this.position = stream.Position;
            this.length = length;            
        }

public override int Read(byte[] buffer, int offset, int count)
        {
            var n = Math.Max(Math.Min(count, origin + length - position), 0);                
            int bytesRead = stream.Read(buffer, offset, (int) n);
            position += bytesRead;
            return bytesRead;            
        }
} 
```

然后复制 n 个字节：

```
var substream = new Substream(stream, n);
                substream.CopyTo(stm); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T00:48:13.357

[复制流](https://stackoverflow.com/questions/230128/best-way-to-copy-between-two-stream-instances-c-sharp)的实现并不过分复杂。如果您想调整它以仅复制一定数量的字节，那么调整现有方法应该不会太难，就像这样

```
public static void CopyStream(Stream input, Stream output, int bytes)
{
    byte[] buffer = new byte[32768];
    int read;
    while (bytes > 0 && 
           (read = input.Read(buffer, 0, Math.Min(buffer.Length, bytes))) > 0)
    {
        output.Write(buffer, 0, read);
        bytes -= read;
    }
} 
```

检查`bytes > 0`可能不是绝对必要的，但不会造成任何伤害。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T00:30:03.027

仅使用缓冲区复制所需的字节有什么问题？

```
long CopyBytes(long bytesRequired, Stream inStream, Stream outStream)
{
    long readSoFar = 0L;
    var buffer = new byte[64*1024];
    do
    {
        var toRead = Math.Min(bytesRequired - readSoFar, buffer.Length);
        var readNow = inStream.Read(buffer, 0, (int)toRead);
        if (readNow == 0)
            break; // End of stream
        outStream.Write(buffer, 0, readNow);
        readSoFar += readNow;
    } while (readSoFar < bytesRequired);
    return readSoFar;
} 
```

# sql - SQL Server 中导入记录的重复数据删除

> ID：13021868
> 
> 赞同：0
> 
> 时间：2012-10-23T00:14:32.373
> 
> 标签：sql, stored-procedures, sql-server-2012, deduplication

我有以下 T_SQL 存储过程，它目前占用了在新导入的记录上运行所有进程到我们的后端分析套件所需的总时间的 50%。不幸的是，这些数据每次都需要导入，并且随着我们的数据库大小的增长而导致瓶颈。

基本上，我们正在尝试识别记录中的所有重复项并只保留其中一个。

```
DECLARE @status INT
SET @status = 3

DECLARE @contactid INT
DECLARE @email VARCHAR (100)

--Contacts
DECLARE email_cursor CURSOR FOR 
SELECT email FROM contacts WHERE  (reference  = @reference AND status = 1 ) GROUP BY email HAVING (COUNT(email) > 1)
OPEN email_cursor

FETCH NEXT FROM email_cursor INTO @email

WHILE @@FETCH_STATUS = 0
    BEGIN
        PRINT @email
        UPDATE contacts SET duplicate  = 1, status = @status  WHERE email = @email and reference = @reference  AND status = 1
        SELECT TOP 1 @contactid = id FROM contacts where  reference = @reference and email = @email AND duplicate = 1
        UPDATE contacts SET duplicate  =0, status = 1 WHERE id = @contactid
        FETCH NEXT FROM email_cursor INTO @email
    END

CLOSE email_cursor
DEALLOCATE email_cursor 
```

我已经添加了我可以从查询执行计划中看到的所有索引，但是可能会更新整个 SP 以不同的方式运行，就像我已经设法与其他人一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:50:12.540

使用此单个查询进行重复数据删除。

```
;with tmp as (
select *
      ,rn=row_number() over (partition by email, reference order by id)
      ,c=count(1) over (partition by email, reference)
  from contacts
 where status = 1
)
update tmp
   set duplicate = case when rn=1 then 0 else 1 end
      ,status = case when rn=1 then 1 else 3 end
 where c > 1
; 
```

它只会在记录`where status=1`中去重复，并将具有相同（电子邮件，参考）组合的行视为重复。

# c# - 将事务与任务并行库一起使用

> ID：13021886
> 
> 赞同：2
> 
> 时间：2012-10-23T00:16:47.057
> 
> 标签：c#, task-parallel-library, transactionscope

我有 N 个进程在 SQL Server 2008 上运行。如果任何进程失败，我需要回滚所有其他进程。

我正在考虑使用 TPL 创建一个父任务和 N 个子任务。所有这些都包含在 transactionScope (IsolationLevel.ReadCommitted) 中，但在我下面的示例中，**child2**会引发错误（customers2 不是有效表）并且**child1**不会回滚。

我在这里假设有什么问题吗？还有其他方法来管理这种情况吗？

这是我的测试代码：

***编辑*** 我在当前事务上使用 DependClone 修改了如下代码。我认为正在工作。

```
try
        {
            using (TransactionScope mainTransaction = TransactionUtils.CreateTransactionScope())
            {
                var parentTransactionClone1 = Transaction.Current.DependentClone(DependentCloneOption.BlockCommitUntilComplete);
                var parentTransactionClone2 = Transaction.Current.DependentClone(DependentCloneOption.BlockCommitUntilComplete);

                var parentTask = Task.Factory.StartNew(() =>
                {
                    var childTask1 = Task.Factory.StartNew(() =>
                    {
                        using (TransactionScope childScope1 = new TransactionScope(parentTransactionClone1))
                        {
                            SqlConnection cnn = new SqlConnection("Server=.\\sqlexpress;Database=northwind;Trusted_Connection=True;");
                            cnn.Open();
                            SqlCommand cmd = new SqlCommand("update customers set city ='valXXX' where customerID= 'ALFKI'", cnn);
                            cmd.ExecuteNonQuery();
                            cnn.Close();
                            childScope1.Complete();
                        }

                        parentTransactionClone1.Complete();

                    }, TaskCreationOptions.AttachedToParent);

                    var childTask2 = Task.Factory.StartNew(() =>
                    {
                        using (TransactionScope childScope2 = new TransactionScope(parentTransactionClone2))
                        {
                            SqlConnection cnn = new SqlConnection("Server=.\\sqlexpress;Database=northwind;Trusted_Connection=True;");
                            cnn.Open();
                            SqlCommand cmd = new SqlCommand("update customers2  set city ='valyyy' where customerID= 'ANATR'", cnn);
                            cmd.ExecuteNonQuery();
                            cnn.Close();

                            childScope2.Complete();
                        }

                        parentTransactionClone2.Complete();

                    }, TaskCreationOptions.AttachedToParent);
                });

                parentTask.Wait();
                mainTransaction.Complete();
            }
        }
        catch (Exception ex)
        {
            // manage ex               
        }
public static TransactionScope CreateTransactionScope()
    {
        var transactionOptions = new TransactionOptions();
        transactionOptions.IsolationLevel = IsolationLevel.ReadCommitted;
        transactionOptions.Timeout = TransactionManager.MaximumTimeout;            
        return new TransactionScope(TransactionScopeOption.Required, transactionOptions);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T00:57:56.467

TransactionScope 类为当前线程设置环境事务（参见[Transaction.Current](http://msdn.microsoft.com/en-us/library/system.transactions.transaction.current.aspx) only。

您至少应该假设每个任务都在单独的线程中运行（尽管这对于 TPL 不是必需的）。

[查看相关文章](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)备注部分中的“重要”框- 如果要在线程之间共享事务，则需要使用 DependentTransaction 类。

就个人而言，我确信在多个线程之间共享事务的整个设施在技术上是有效的，但是，我总是发现编写一个每个线程使用单独事务的设计更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:56:49.670

任务并行库无法自行确定任务的详细信息，并且它不会自动回滚，您可以做的最接近的方法是从父任务中定义另一个任务 child1-rollback ，该任务仅在 child1 失败时执行，并且您可以通过将 TaskContinuationOption 设置为 OnlyOnFailure 来很好地定义这一点，因此只有在 child1 失败时任务才会执行，关于 child2 也可以这样说。

# css - 如何动态调整多 CSS 精灵图像的大小

> ID：13021888
> 
> 赞同：2
> 
> 时间：2012-10-23T00:17:12.347
> 
> 标签：css, css-sprites

我有一个由多个 css sprites 构建的图像，如以下问题所述：[css image building with sprites](https://stackoverflow.com/questions/12992931/css-image-building-with-sprites)

我将如何使用它以便我可以在顶部容器上应用一个大小来动态调整所有子级的大小？

这是到目前为止的工作小提琴：http: [//jsfiddle.net/hWhUb/3/](http://jsfiddle.net/hWhUb/3/)

这是当前的html结构：

```
<div class="icon">
    <div class="brigade brigade-purple-left">&nbsp;</div>
    <div class="brigade brigade-purple-middle">&nbsp;</div>
    <div class="brigade brigade-purple-right">&nbsp;</div>
    <div class="icon-type icon-hero">&nbsp;</div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T01:40:59.837

我有几个问题，可能会导致解决方案：

1.  为什么要使用多个图像来使用一些 css3 和单个图像（cross thingie）可以轻松实现？单个图像可以更容易地调整大小，作为容器宽度的百分比，甚至使用 css3 background-size 属性。

2.  如果您必须为每件事使用图像，您是否可以考虑永远不要使用精灵？它的可维护性是纯粹的烦恼，特别是如果有人后来不得不把这个项目从你手中夺走。

3.  也许两者兼而有之？

如果选择第二个选项，我建议使用 data uris。这里有一个简短的解释： [http](http://css-tricks.com/data-uris/) ://css-tricks.com/data-uris/ 它比 sprites 节省了一个 http 请求，更易于维护，而且总体大小的差异在我看来是微不足道的，并且支持很棒- IE8+ 和我们那里所有健全的浏览器。设置很容易，特别是如果您使用全能的 sass 解释器，但有一些漂亮的实用程序（命令行、gui 甚至基于 Web）可以将您的图像转换为 base64。它甚至可以用一点点努力支持IE7！

## 编辑 3.11.12

您还可以将[http://css3pie.com/](http://css3pie.com/)添加到选项中以查看 - 它可以让您使用 Internet Explorer 执行我们非常喜欢和喜欢的 css3 技巧。这对我来说有点难以预测，但对于像这样的小壮举，它绝对可以做到这一点。

此外，我在下面评论了您的浏览器支持需求。IE7 不会阻止你；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T10:56:01.340

您可以将**缩放**组合用于 webkit/ie 和**-moz-transform:scale**用于 Firefox

```
[class^="icon-"]{
    display: inline-block;
    background: url('../img/icons/icons.png') no-repeat;
    width: 64px;
    height: 51px;
    overflow: hidden;
    zoom:0.5;
    -moz-transform:scale(0.5);
    -moz-transform-origin: 0 0;
}

.icon-huge{
    zoom:1;
    -moz-transform:scale(1);
    -moz-transform-origin: 0 0;
}

.icon-big{
    zoom:0.60;
    -moz-transform:scale(0.60);
    -moz-transform-origin: 0 0;
}

.icon-small{
    zoom:0.29;
    -moz-transform:scale(0.29);
    -moz-transform-origin: 0 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T07:10:24.343

One of the ways to achieve it will be to use inline CSS and to dynamically generate attribute values in JavaScript or PHP/What you use.

Assuming you know the width of the top container and the position of the css sprites

Calculate the left middle and right

You can also opt to generate the CSS code in a separate file

[http://aquagraphite.com/2011/11/dynamically-generate-static-css-files-using-php/](http://aquagraphite.com/2011/11/dynamically-generate-static-css-files-using-php/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:18:48.730

您可以使用 css3 2d 转换：

```
.icon {
 transform: scale(2);
 -ms-transform: scale(2); /* IE 9 */
 -webkit-transform: scale(2); /* Safari and Chrome */
 -o-transform: scale(2); /* Opera */
 -moz-transform: scale(2); /* Firefox */
} 
```

并使用以下命令更改变换原点：transform-origin

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T02:47:38.573

虽然你想做的事情可以完成，但我认为你的做法是错误的。它比它需要的复杂得多，但这个想法是合理的。

看着你的精灵，唯一不能用 CSS 改变的是实际的图标（艺术品）。圆角和背景颜色——那是另一回事。

CSS

```
.icon-cross {
    background:purple url('cross.jpg') no-repeat 40px 12px;
    border-radius:5px;
    border:1px solid gray
}

@media only screen and (max-width:768px) {
    .icon-cross {
        background-size: 800px 1200px;
        background-position; ??px ??px
    }
}

@media only screen and (max-width:400px) {
    .icon-cross {
        background-size: 500px 900px;
        background-position; ??px ??px
    }
} 
```

HTML

```
<div class="icon-cross"></div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T10:02:59.103

使用一点 jQuery，我可以将元素调整为您想要的任何大小（`resizeTo`）：

```
$(document).ready(function () {
    $('#resize').click(function (e) {
        e.preventDefault();
        var resizeTo = 100,
            resizeRatio = Number(resizeTo) / Number($(".icon").width());

        $(".icon").css('width', resizeTo);
        $(".child").each(function () {
            var childWidth = Number($(this).width()),
                childHeight = Number($(this).height()),
                newChildWidth = childWidth * resizeRatio,
                newChildHeight = childHeight * resizeRatio;
            $(this).css({ 'width': newChildWidth, 'height': newChildHeight });
        });
    });
});​ 
```

然而，size 不会调整 sprite 的大小以适应新的盒子大小，所以这似乎是一项毫无意义的任务。

提琴手：http: [//jsfiddle.net/hWhUb/4/](http://jsfiddle.net/hWhUb/4/)

# apache - htaccess mod_rewrite 主机名

> ID：13021893
> 
> 赞同：3
> 
> 时间：2012-10-23T00:18:03.643
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, debian

如果它不匹配，我如何将域 url 重写为特定的域名..

假设我希望它只匹配 example.com 并且访问者来自服务器 ip (http://127.0.0.1/something/else) 或来自另一个域 (http://domain.com/something/else)

我如何重写域名并保留所有其他参数，只是域名到 example.com（结果应该是：[http](http://example.com/somthing/else) ://example.com/somthing/else ）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:21:36.553

尝试将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^(www\.)?example\.com$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [L,R] 
```

# php - 问题

> ID：13021899
> 
> 赞同：1
> 
> 时间：2012-10-23T00:18:55.020
> 
> 标签：php, count, echo

> **可能重复：**
> [PHP 脚本在 HTML 文件中不起作用](https://stackoverflow.com/questions/2198680/php-script-not-working-in-html-file)

我有这个：

```
<?php
if(isset($_POST['submit'])){
   $f = fopen('counter.txt', 'r+');
   flock($f, LOCK_EX);
   $total = (int) fread($f, max(1, filesize('counter.txt')));
   if (isset($_POST['submit'])) {
      rewind($f);
      fwrite($f, ++$total);
   }
   fclose($f);
}
?> 
```

它在 txt 文件中工作。它正确计算了点击次数。但是这个：

```
Times submited <?php echo $total; ?>. 
```

在我有表单的 index.html 文件中不起作用。请问你能帮忙吗？

这是我的文件行：

1.  表单（index.html）
2.  .php 文件
3.  header("位置：thankyou.php")
4.  然后回到 index.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:28:40.753

首先，php 不会在 html 文件中执行。您需要将文件设为 php 文件，以便服务器对其进行处理。

这就是它在文本文件中工作的原因。

如果它必须是html，你可以使用这个：

[http://php.about.com/od/advancedphp/p/html_php.htm](http://php.about.com/od/advancedphp/p/html_php.htm)

其次，$total 变量不是全局变量，因此在不同的 php 文件中不会知道它，您需要使用 get 或 post 传递它，或者将 php 包含在第一个 html 文件中。

我会选择后者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:30:26.887

要在不写入文件的情况下计算点击次数，您需要在会话中存储点击次数，因为它不是全局的，也不会在单个请求之后持续存在。这一切都需要在 .php 文件中完成。

```
<?php
$total = 0;

if(isset($_POST['submit'])){ 
```

1.  在递增之前将会话中的值读回 $total。

    ```
    if(isset($_SESSION["total"]))
       $total = $_SESSION["total"]; 
    ```

2 增量 $total

```
 $total++; 
```

1.  将 $total 存储回会话中

    ```
    $_SESSION["total"] = $total;
    } 
    ```

2.  然后你可以打印出总数。

    ```
    echo 'Times submited: ' . $total .'.';
    ?> 
    ```

# redirect - 将用户从主站点重定向到他们的国家网站

> ID：13021900
> 
> 赞同：2
> 
> 时间：2012-10-23T00:19:04.410
> 
> 标签：redirect

我有一个语言为 ES-ES 的网站，我正在一个新的国家 ES-MEX 推出它的版本。我想将所有访问者重定向到他们所在国家/地区的主网站，选择最佳选项以避免过载（我知道再运行一个脚本会增加我所有本地访问者的页面下载量，所以我宁愿避免那）你会使用htaccess还是php？什么样的代码？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:08:02.567

您需要设置 dns 服务器，该服务器将为您的域提供服务，并为来自墨西哥网络的 DNS 名称请求提供不同的服务器地址。允许您完成此操作的[BIND](https://www.isc.org/software/bind) DNS 服务器功能称为[视图](http://ftp.isc.org/isc/bind9/cur/9.9/doc/arm/Bv9ARM.ch06.html#view_statement_grammar)

因此，您定义了一个与墨西哥客户匹配的视图，然后此视图报告您域中名称的不同地址，而对于世界其他地区，您仍然报告原始地址。

您需要分析您的服务器日志并使用 whois 服务查找您从中获取连接的网络的位置。

第二种选择是使用 Apache httpd 服务器的[内容协商模块](http://httpd.apache.org/docs/2.4/content-negotiation.html)，使原始 Web 服务器上所有页面的 es_MX 语言协商的版本将重定向返回到其他服务器。

这两种方法都不是 100% 可靠的，因此来自墨西哥的客户可能会连接到您的原始服务器，我认为您应该同时使用这两种解决方案

# regex - Oracle PL/SQL 中的正则表达式从包含电话号码的字符串中删除不需要的字符

> ID：13021911
> 
> 赞同：4
> 
> 时间：2012-10-23T00:21:11.560
> 
> 标签：regex, string, oracle, plsql, replace

我需要从 Oracle 中的字符串中删除字符 -、+、(、) 和空格。字符串中的其他字符都是数字。可以做到这一点的函数是 REGEXP_REPLACE。我需要帮助编写正确的正则表达式。

示例：字符串 '23+(67 -90' 应该返回 '236790' 字符串 '123456' 应该返回 '123456'

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T00:33:14.570

就像是

```
SQL> ed
Wrote file afiedt.buf

  1  with data as (
  2    select 'abc123def456' str from dual union all
  3    select  '23+(67 -90' from dual union all
  4    select '123456' from dual
  5  )
  6  select str,
  7         regexp_replace( str, '[^[:digit:]]', null ) just_numbers
  8*   from data
SQL> /

STR          JUST_NUMBERS
------------ --------------------
abc123def456 123456
23+(67 -90   236790
123456       123456 
```

应该这样做。这将从字符串中删除任何非数字字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-15T10:09:14.367

regexp_replace 是一个了不起的功能，但它有点难。

您可以使用 TRANSLATE 函数替换字符串中的多个字符。TRANSLATE 函数与 REPLACE 的不同之处在于，TRANSLATE 函数提供单个字符的一对一替换，而 REPLACE 允许您将一个字符串替换为另一个字符串。

例子：

```
SELECT TRANSLATE('23+(67 -90', '1-+() ', '1') "Replaced" FROM DUAL; 
```

输出：

```
236790 
```

在此示例中，“1”将被“1”替换，“-+()”将被替换为空值，因为我们没有在“to string”中为其提供任何对应的字符。该语句还可以在不使用 regexp 的情况下回答您的问题。

你会认为你可以使用空字符串作为最后一个参数，但这不起作用，因为当我们将 NULL 参数传递给 TRANSLATE 函数时，它返回 null，因此我们没有得到想要的结果。

因此，如果我需要替换一个字符，我会使用 REPLACE，如果我想替换多个字符，我会使用 TRANSLATE。

资料来源：[https ://decipherinfosys.wordpress.com/2007/11/27/removing-un-wanted-text-from-strings-in-oracle/](https://decipherinfosys.wordpress.com/2007/11/27/removing-un-wanted-text-from-strings-in-oracle/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T00:37:51.247

搜索`\D`或`[\-\+, ]`替换为空字符串`''`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-04T13:55:39.613

regexp_replace 是一个了不起的功能，可以节省大量时间来替换字母数字字符串中的字母以转换为数字。

# sql-server - DBASE 文件读取限制

> ID：13021912
> 
> 赞同：0
> 
> 时间：2012-10-23T00:21:29.097
> 
> 标签：sql-server, ssis, geospatial, shapefile, dbase

我有一个 Dbase 文件 (*.dbf)，我目前正在使用 Microsoft OLEDG Jet Provier 读取它。

现在的问题是我的 Dbase 文件大小超过 2GB，并且根据 Jet Provider（仅在 32 位上运行）的限制，我只能读取 2GB 的数据。有没有其他方法可以读取 Dbase 文件？其他然后 Jet OLEDB 提供商。我尝试了所有 Microsoft OLEDB 提供程序，但似乎都只读取 2 GB 数据。

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:33:52.893

Sybase iAnywhere（Advantage-Database-Server），它可以直接工作/识别 DBF 文件...

# c++ - 未初始化的类数组

> ID：13021914
> 
> 赞同：0
> 
> 时间：2012-10-23T00:21:33.720
> 
> 标签：c++, class, constructor

我想在不调用构造函数的情况下在堆栈上分配类数组。以下示例说明：

```
template<class t,int SetNum> class set
{
private:
    t Storage[SetNum];
};

class myClass
{
private:
    int* Array;
public:
    myClass()
    {
        Array=new int[10];
    }
}
int main()
{
    set<myClass,10> Set;
} 
```

我不想为调用构造函数`Array`时发生`myClass`的分配 10 个新整数，但仍希望为 分配空间`myClass`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:25:11.317

您必须有一个`unsigned char`s （或此类）数组用作元素的“后备存储”，然后调用放置`new`运算符（参见例如[此处](http://www.parashift.com/c++-faq/placement-new.html)）在此处构造您的实例（顺便说一句，这`std::vector`已经是）。

***警告：***如果你使用placement new，你有责任手动释放你用它创建的对象，显式调用析构函数；此外，您传递给放置 new 的指针必须与您正在创建的对象正确对齐，否则可能会发生坏事。

另请参阅[此问题](https://stackoverflow.com/questions/222557/what-uses-are-there-for-placement-new)。

* * *

使用所描述技术的扭曲组合`std::array`和`std::vector`构建的示例（需要 C++11`union`才能工作）：

```
#include <cstddef>
#include <memory>
#include <stdexcept>
#include <iostream>

template<typename T, std::size_t N>
class array_noinit
{
    union storage_helper
    {
    private:
        // this member assures that the storage is properly aligned
        T t;
    public:
        unsigned char storage[sizeof(T)*N];

        // needed because T's constructor/destructor is implicitly deleted
        storage_helper() { };
        ~storage_helper() { };
    };

    storage_helper s;

    std::size_t _size;
    T * _storage;
public:
    array_noinit() :
        _size(0), _storage((T*)s.storage)
    {}

    ~array_noinit()
    {
        while(_size>0)
            pop_back();
    }

    void push_back(const T & elem)
    {
        if(_size>=N)
            throw std::runtime_error("Not enough capacity.");
        new(_storage+_size) T(elem);
        _size++;
    }

    void pop_back()
    {
        if(_size>0)
        {
            _size--;
            _storage[_size].~T();
        }
    }

    T & at(std::size_t Idx)
    {
        if(Idx>=_size)
            throw std::out_of_range("Idx out of range.");
        return _storage[Idx];
    }

    std::size_t size() const
    {
        return _size;
    }

    std::size_t capacity() const
    {
        return N;
    }
};

class A
{
    int _i;
public:
    A(int i) : _i(i)
    {
        std::cout<<"In A constructor - "<<_i<<"\n";
    }

    A(const A & right)
        : _i(right._i)
    {
        std::cout<<"In A copy constructor - "<<_i<<"\n";
    }

    ~A()
    {
        std::cout<<"In A destructor - "<<_i<<"\n";
    }
};

int main()
{
    std::cout<<"With ints\n";
    array_noinit<int, 4> arr;
    arr.push_back(1);
    arr.push_back(2);
    arr.push_back(3);
    arr.push_back(4);

    for(std::size_t i=0; i<4; i++)
        std::cout<<arr.at(i)<<" ";
    std::cout<<"\n";

    std::cout<<"With a class - we don't add anything\n";
    array_noinit<A, 10> arr2;

    std::cout<<"With a class - now we add stuff\n";
    array_noinit<A, 10> arr3;
    arr3.push_back(A(1));
    arr3.push_back(A(2));
    arr3.push_back(A(3));
    return 0;
} 
```

输出：

```
With ints
1 2 3 4 
With a class - we don't add anything
With a class - now we add stuff
In A constructor - 1
In A copy constructor - 1
In A destructor - 1
In A constructor - 2
In A copy constructor - 2
In A destructor - 2
In A constructor - 3
In A copy constructor - 3
In A destructor - 3
In A destructor - 3
In A destructor - 2
In A destructor - 1 
```

* * *

***编辑***有一个[更简单的方法来获得对齐的存储](http://en.cppreference.com/w/cpp/types/aligned_storage)。

# c++ - 破碎的烤箱键盘

> ID：13021918
> 
> 赞同：0
> 
> 时间：2012-10-23T00:21:51.350
> 
> 标签：c++

> 键盘坏了，所以输入数字 1、4 和 7 不起作用。计算机依次输出次低和次高的数字，其中 1、4 和 7 都不是数字。

我的目标是使用布尔函数检查数字并输出 true，然后输出下一个最高数字和下一个最低数字。我很确定我做了大部分我需要做的事情，但它没有成功。我已经输入了数字444，出来的结果是443，还有445。谢谢大家的帮助。

```
 #include <iostream>
 #include <conio.h>
 #include <cmath>

using namespace std;

bool containDigit(int number, int digit);

int main()
{
    int number, digit, lowNum, highNum;

cout<<"Enter a number between 1 and 999 for the oven temperature: ";
cin>>number;

//1st digit
digit = number / 100;
containDigit(number, digit);
if (containDigit(number, digit) == true)
{
    number = number - 100;
}

//2nd digit
digit = (number / 10) % 10;
containDigit(number, digit);
if (containDigit(number, digit) == true)
{
    number = number - 10;
}

//3rd Digit
digit = number % 10;
containDigit(number, digit);
if (containDigit(number, digit) == true)
{
    number = number - 1;
}

cout<<number<<endl;

getche();
return 0;

}

bool containDigit(int number, int digit)
{
    if ((digit == 1) || (digit == 4) || (digit == 7))
    {
        return true;
    }
    else
    {
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:29:14.763

该错误在 containsDigit 函数中。试试这个：

```
bool containDigit(int number, int digit) {
    if(digit == 1 || digit == 4 || digit == 7) return true;
    return false;
} 
```

您必须使用`==`而不是`=`. 你实际上也不需要`number`在那里争论。

也可以进行一些优化。请自己看（这是你的作业）并考虑重复的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:30:56.383

由于这看起来像家庭作业，因此我不会为您做这件事，并给您以下提示：

看起来您并不清楚“第一个数字”是什么。是左数第一个（数百个）还是右数个（个数）？查看您的代码并告诉自己它的每个部分将如何回答我的问题。

与您的代码一样，是否有可能`lowNum`或`highNum`有多个不同的数字？`number`如何？在哪里发生了变化，`lowNum`以及`highNum`如何变化？

此外，为了扩展@Al Kepp 所说的内容：当你有这样的功能时，尝试用一些非常简单的输入来测试它，而不是直接假设它有效。这称为（或类似于）“单元测试”，它要求您将程序划分为简单、独立的单元并分别测试它们。像`containDigit(999, 4)`返回这样的简单呼叫`true`会敲响警钟。

说到警告，总是，*总是*尽可能多地编译。（例如`-Wall`for `gcc`）这样做可能会警告您根本没有使用`number`内部参数这一事实`containDigit`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T00:40:26.740

您的函数 containsDigit 有两个问题：

1.  它不需要接收变量“number”，因为它不使用它
2.  你想比较 == 而不是 =

# java - 错误：给定最终块未正确填充

> ID：13021923
> 
> 赞同：1
> 
> 时间：2012-10-23T00:22:22.590
> 
> 标签：java, cryptography, aes, pkcs#5, cbc-mode

每次运行此程序时都会出现错误

“错误：给定最终块未正确填充”

基本上我试图暴力破解密钥的最后 3 个字节，前 13 个字节是正确的。知道我在做什么错吗？我尝试删除填充并且它可以工作，但它找不到我确定它存在并包含单词“Mary had”的明文。注意：我正在使用 sun.misc.BASE64Decoder

这是我的代码的一部分。

```
 String myiv = new String(new byte[] {
                0x31,0x32,0x33,0x34,0x35,0x36,0x37,0x38,0x39,0x31,0x30,0x31,0x31,0x31,0x32,0x33
        });

        char [] mykeyarray = new char[] {0x86,0xe5,0x30,0x90,0xff,0x62,0xa0,0x9a,0x81,0x00,0xad,0x9e,0x8f,0x00,0x00,0x00};
        String encoded = "dm8cfvs+c7pKM+WR+fde8b06SB+lqWLS4sZW+PfQSKtTfgPknzYzpTVOtJP3JBoU2Uo/7XWopjoPDOlPr24duuck0z+vAx91bYTwQo4INnIIBkj/lhJMWmvAKaUIO3qzBoGg8ynQOhuG6LY7Wo0uww==";

        IvParameterSpec ivspec = new IvParameterSpec(myiv.getBytes());

        byte [] decoded;    
        FileWriter fstream = new FileWriter("out.txt");
        BufferedWriter out = new BufferedWriter(fstream);
        String mykey;
        int repeat = 256;

        outerloop:
        for(int i=0;i<repeat;i++){
            for(int j=0;j<repeat;j++){
                for(int k=0;k<repeat;k++){

                    mykey = new String(mykeyarray);

                    SecretKeySpec keyspec = new SecretKeySpec(mykey.getBytes(), "AES");

                    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");

                    System.out.println("I: "+i+" J: "+j+" K: "+k); 

                    decoded = new BASE64Decoder().decodeBuffer(encoded); 

                    cipher.init(Cipher.DECRYPT_MODE, keyspec, ivspec);

                         byte [] decrypted = cipher.doFinal(decoded);
                         String dec = new String(decrypted);

                         if(dec.contains("Mary")){
                             out.write(dec);
                            out.write("\n");
                            System.out.println(dec);
                            break outerloop;
                         }

                            mykeyarray[15]++;
                }
                mykeyarray[14]++;
                mykeyarray[15]=0x00;
            }
            mykeyarray[13]++;
            mykeyarray[14]=0x00;
            mykeyarray[15]=0x00;
        }
            out.close();
    }

    catch(Exception e){
        System.out.println("Error: " + e.getMessage());
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:12:01.217

您的代码犯了很多错误，我不知道您要完成什么。因此，我将解释为什么您可能会收到`BadPaddingException`CBC 密码：

*   你的密钥不正确
*   最后两个密文块中的一个或两个已被更改
*   已从密文末尾删除一个或多个块
*   IV 不正确，密文由单个块组成

祝你好运找到异常的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:26:29.047

由于使用随机密钥解密会给您一条随机消息，因此您通常不会得到正确的填充。只需捕获异常并继续。

暴力破解 PKCS5 填充消息时，大约 93% 的时间会出现填充错误。PKCS5 填充使用包含填充长度的字节填充您的消息。所以有效的填充是 0x01, 0x2 0x02, 0x03 0x03 0x03, ...., 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF。随机消息中发生正确填充的几率是 1/16 + (1/16)^2 ... (1/16)^16 <.067。这意味着您在大约 1- %6.7 = 93% 的时间内得到不正确的填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T06:20:33.117

尝试了解有关 PKCS#5 填充的更多信息。这是在加密**之前**添加到纯文本中的特殊字节。如果文本是用错误的密钥解密的，它就不可能是正确的。如果你暴力破解一个键，除了正确的键之外，你将在每个键上都出现这个错误。

# jquery - 如何在窗口调整大小时将背景图像居中？

> ID：13021924
> 
> 赞同：1
> 
> 时间：2012-10-23T00:22:28.473
> 
> 标签：jquery, html, css

我正在使用本教程[http://www.queness.com/resources/html/scroll/horizo​​ntal.html](http://www.queness.com/resources/html/scroll/horizontal.html)来帮助我创建自己的网站，但我遇到了问题。

我想为每个页面添加特定的背景图像，并且我希望图像保持在页面的中心，无论窗口大小和屏幕分辨率如何。现在我以 1920x1080 的分辨率制作图像，当我调整浏览器窗口的大小时，图像会以一种奇怪的方式移动和堆叠。

有没有办法让这些背景图像在我调整窗口大小时始终保持原位而不移动？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:26:00.490

本教程展示了如何做你正在寻找的东西。唯一的缺点是 IE 的最早版本是 9。

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:28:19.757

尝试将其添加到您的 css-`img{margin:auto;}`

# javascript - 显示/隐藏表单元素的问题

> ID：13021925
> 
> 赞同：1
> 
> 时间：2012-10-23T00:22:33.987
> 
> 标签：javascript, jquery, html

我有一个通过使用表单元素更新用户位置的网站。

用户做的第一件事是单击标有**Check In**的按钮。这会更新数据库（通过使用 AJAX 在另一个页面上的 php）。单击**Check In**后，用户会看到一个带有位置列表的选择/下拉列表。用户单击选择上的位置之一，然后再次使用该位置更新 php 页面。用户可以多次执行此操作，每次都更新数据库。当用户完成后，他向下滚动选择/下拉菜单到最后一个名为**Check Out**的选项。当用户点击结帐时，数据库将再次更新，并出现红色文本而不是选择“已签出”。

这是我的代码（减去 php/database 的东西）：

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>

<script type="text/javascript">

$(document).ready(function() {
  // Hide the form on load      
  $('.locationSelect').hide();
  // Hide the completed message
  $('.finished').hide();
});

// When someone clicks checkin this function will be called
$('.checkIn').click(function(){
$e = $(this);
 $.ajax({
    type: "POST",
    url: "changeloc.php", // this page adds date to the database
    data: "checkIn="+$(this).val(), // we are sending $_POST['checkIn']
    success: function(){
       // Display the form once AJAX is finished 
       $('#myForm').show();
    }
 });
});

// This function will be called when someone uses the select field
$('.[locationSelect]').change(function(){
  $e = $(this);
  $.ajax({
    type: "POST",
    url: "changeloc.php",
    data: "locationSelect="+$(this).val(),
    success: function(){
       // Display the form once the AJAX is finished 
       alert('Done');
    }
  });
});

</script> 
```

这是html：

```
<button class="checkIn">Check In</button>

<form method='post' class='myForm' action=''>

<td>
<select name='locationSelect' class='locationSelect'>
    <option value='1'>Exam Room 1</option>
    <option value='2'>Exam Room 2</option>
    <option value='3'>Exam Room 3</option>
    <option value='4'>Exam Room 4</option>
    <option value='Check Out'>CheckOut</option>
</select>
</form>

<div class='finished' style='color:#ff0000;'>Checked Out</div> 
```

问题是当您点击**Check In**时，选择不显示。我检查了 Chrome 错误控制台，但没有出现错误。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:31:15.663

嗯，这里：

```
// Display the form once AJAX is finished 
$('#myForm').show(); 
```

应该是这样的：

```
// Display the form once AJAX is finished 
$('.myForm').show(); 
```

除此之外，请验证您的 Ajax 查询是否正确返回，否则此代码将不会运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:43:17.080

您可能需要考虑对 ajax 调用进行错误处理，以查看它们是否正确返回

```
 success: function(){
  alert('done');
 },
 error: function(request){
  alert(request.responseText);
 } 
```

这将有助于解决它是否是 ajax 问题或与其他问题有关，例如语法

# android - android默认浏览器页脚下的空白区域

> ID：13021935
> 
> 赞同：0
> 
> 时间：2012-10-23T00:23:34.750
> 
> 标签：android, google-chrome, webkit

我经历过很多次这个错误。FF和Chrome for android没有这样的错误，但是在portratir模式下的默认android浏览器中，当页脚粘在底部时，页面内容高度小于100%。它在页脚下显示白线，似乎不是 Body 和 HTML 的任何填充或边距，似乎是其他东西。

我可以使用 desctop 上的开发人员工具在 android 中调试 Chrome，但我不知道如何调试默认的 andoird 浏览器。

我已删除屏幕截图和链接。因为已经没有问题了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:11:52.753

在我将最小宽度从 1000 像素减少到 980 后，问题消失了。由于宽度较宽，似乎 min-height 在 android 和 iphone 默认浏览器中工作错误。例如，您可以使用粘性页脚的示例，将 body 的最小宽度更改为 1000-1040 像素，您将在页脚下看到空白区域。

粘性页脚示例[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

# javascript - 不同的画布渲染

> ID：13021936
> 
> 赞同：2
> 
> 时间：2012-10-23T00:23:38.290
> 
> 标签：javascript, css, html, canvas

[我为网站管理员 http://qcoder.ru/pixelfiller/](http://qcoder.ru/pixelfiller/)做了一项小服务，但我有一个问题。模式 #7 和 #8（对角线）在 Mozilla、Safari 和 Opera 中呈现不佳（模式之间有小空格）。如何像在 Chrome 中一样进行跨浏览器渲染？

这些模式的功能：

```
// #7
function template7() {
    c.beginPath();
    c.moveTo(size, 0);
    c.lineTo(0, size);
    c.stroke();
}

// #8
function template8() {
    c.beginPath();
    c.moveTo(0, 0);
    c.lineTo(size, size);
    c.stroke();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:22:57.407

看起来这可能是一个抗锯齿问题；从您共享的代码片段看来，您正在从一个角到对角画一条线。如果您改为在画布外绘制开始和结束一两个像素的线，您可能会看到更好的结果：

我的意思的错误图表：

```
This:         Not This:

\
 \++++        \++++
 +\+++        +\+++
 ++\++        ++\++
 +++\+        +++\+
 ++++\        ++++\
      \ 
```

# python - 从 python 调用时出现段错误，但从命令行正常运行

> ID：13021941
> 
> 赞同：3
> 
> 时间：2012-10-23T00:24:16.943
> 
> 标签：python, bash, googletest

我正在编写一个用于持续集成和测试的 python 脚本，它将被 bitten 调用。我们的单元测试使用 google 测试框架。每个软件组件都有一个运行配置和其他所需服务并运行 gtest 可执行文件的 bash 脚本。python 脚本遍历存储库以查找 bash 脚本，并使用 os.popen() 命令调用每个脚本。

Python 脚本 (UnitTest.py)

```
#!/usr/bin/python

import os
import fnmatch
import sys
import subprocess

repository_location = '/home/actuv/workspace/eclipse/iccs/'
unit_test_script_name = 'RunUnitTests.sh'

def file_locator(repo, script_name):
    # Function for determining all unit test scripts
    test_location = []
    for root, dirnames, filenames in os.walk(repo):
        for filename in fnmatch.filter(filenames, script_name):
            test_location.append(os.path.join(root))
    return test_location

def run_tests(test_locations, script_name):
    # Runs test scripts located at each test location
    for tests in test_locations:
        cmd = 'cd ' + tests + ';./' + script_name
        print 'Running Unit Test at: ' + tests
        os.popen(cmd)

################    MAIN    ################
# Find Test Locations
script_locations = file_locator(repository_location, unit_test_script_name)

# Run tests located at each location
run_tests(script_locations)

# End of tests
sys.exit(0) 
```

Bash 脚本

```
#!/bin/sh

echo "Running unit tests..."

# update the LD_LIBRARY_PATH to include paths to our shared libraries

# start the test server

# Run the tests

# wait to allow all processes to end before terminating the server
sleep 10s 
```

当我从终端窗口手动运行 bash 脚本时，它运行良好。当我让 python 脚本调用 bash 脚本时，我在 bash 脚本的 TestSingleClient 和 TestMultiClientLA 行上遇到分段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:37:46.663

尝试更换

```
os.popen(cmd) 
```

和

```
proc = subprocess.Popen('./scriptname', shell = True, 
                       cwd = tests)
proc.communicate() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T22:28:23.783

一定要查看[subprocess](http://docs.python.org/2/library/subprocess.htm)模块——特别是查看**subprocess.call()**便捷方法。我进行了 os.path 检查以确保您的测试目录也存在。

```
def run_tests(test_locations, script_name):
    # Runs test scripts located at each test location
    for tests in test_locations:
        #  Make sure tests directory exists and is a dir
        if os.path.isdir(tests):
            print 'Running Unit Test at: ' + tests
            subprocess.call(script_name, shell=True, cwd=tests) 
```

另外-您对 stdout 和 stderr 导致问题的观察是正确的，尤其是在有大量数据的情况下。当输出量很大或未知时，我将临时文件用于 stdout/stderr。
前任。

```
def execute_some_command(cmd="arbitrary_exe"):
    """ Execute some command using subprocess.call()"""
    #  open/create temportary file for stdout    
    tmp_out=file('.tmp','w+')

    #  Run command, pushing stdout to tmp_out file handle
    retcode = subprocess.call(cmd, stdout=tmp_out, shell=True)

    if retcode != 0:
        # do something useful (like bailout) based on the OS return code
        print "FAILED"

    #  Flush any queued data
    tmp_out.flush()
    #  Jump to the beginning
    tmp_out.seek(0)
    #  Parse output
    for line in tmp_out.readlines():
        # do something useful with output

    # cleanup 
    tmp_out.close()
    os.remove(_out.name)
return 
```

查看 python[文件](http://docs.python.org/2/library/stdtypes.html#bltin-file-objects)对象上的方法，了解如何处理来自***_out***文件句柄的标准输出数据。

很好的狩猎。

# cocoa - 让 NSSearchField 使用 NSTokenFieldCell？

> ID：13021946
> 
> 赞同：9
> 
> 时间：2012-10-23T00:25:07.787
> 
> 标签：cocoa, nscell, nstokenfield, nssearchfield, nstokenfieldcell

我正在尝试在 10.7+ 上模拟 Mail.app 和 Finder.app 的标记化搜索功能，其中看起来是一个 NSSearchField，左侧是搜索放大镜图标，右侧是取消 (x) 按钮，但是还包括搜索字段内的标记。

![带有标记的 NSSearchField](../Images/3f898f31d3ba945678f4dc4f1063b83d.png)

有没有办法让 NSSearchField 使用 NSTokenFieldCell 而不是 NSSearchFieldCell？我尝试调用`-setCell:`NSSearchField 实例，该实例有效并且似乎换出了单元格，正如调用`po [searchField cell]`调试器所证明的那样，但是搜索字段的绘图中断并且没有绘制文本字段。

我是以正确的方式解决这个问题还是有更好的方法来做到这一点？谢谢！

**2016 年10 月 25 日更新**：使用 Accessibility Inspector 我发现 Finder 和 Mail 使用混合私有子类：

*   `SGTSearchField : NSSearchField`
    *   `SGTSearchFieldCell : NSSearchFieldCell`
    *   `SGTTokenFieldCell : NSTokenFieldCell`

这些是名为`Suggestions.framework`. 希望苹果将来会公开这些课程。如果您也想公开此功能，请务必[提交雷达文件。](https://bugreport.apple.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-12T01:21:29.907

我对你们两个的最佳答案是简单地使用 NSTokenField。您也许可以对其进行修改以显示小搜索图标。但如果这不是成败，你可以从 NSTokenField 获得很多标记化的功能。

# ios - 添加/删除 MKCircle 不稳定/缓慢，试图模拟调整大小

> ID：13021955
> 
> 赞同：4
> 
> 时间：2012-10-23T00:26:02.763
> 
> 标签：ios, mkmapview, mkoverlay

因此 的`radius`属性`MKCircle`是只读的，因此必须通过`MKCircle`从地图视图中删除原始文件并添加新的来完成任何调整大小。

为了使事情更顺利，我在删除旧圆圈之前将新圆圈添加到地图视图中。

在 iOS 模拟器中调整大小的过程足够流畅，但在真实设备上进行测试会导致动画不连贯，并且在调整大小时 MKCircle 的颜色会出现一些临时“阻塞”伪影。

我能做些什么让它更顺畅？

# java - 如何获取对已调度线程池执行器的 Futures 的引用

> ID：13021957
> 
> 赞同：0
> 
> 时间：2012-10-23T00:26:14.540
> 
> 标签：java, concurrency, timeout, executorservice, executor

我有一个预定的执行器服务，我需要在安排任务后返回 Futures。Javadoc 说调度任务后会返回一个 ScheduledFuture - 但是，我怎样才能获得尚未运行的任务的后续未来？

我的调用如下所示： **exec.scheduleAtFixedRate(new Task(), 0, interval, TimeUnit.MINUTES);**

确实提交并运行了新任务，但是我只有第一次调用的未来。这个 Future 是可重用的还是可重用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:03:29.297

所有处决都是同一个未来。取消它会取消当前和所有未来的执行。

# javascript - 如何正确到达数组的开头或结尾？如何传递当前选定项目的引用？

> ID：13021960
> 
> 赞同：0
> 
> 时间：2012-10-23T00:26:46.357
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript

感谢您花时间提供帮助。CoffeeScript 版本为 1.3.3；jQuery 版本来自 Rails 3.2.8 jquery-rails gem 2.1.3。

我有一系列诗歌，它们各自的链接存储在 $poems_for_year_hrefs 中。我可以使用 $.each() 获取 $poems_for_year_hrefs 中元素的索引并将其存储在poemUrls 中。

页面的下一个链接在单击时用于将poemUrls 的索引增加到下一个元素并更新$next_link 的href 属性。如果索引超过了poemUrls 的长度，则将索引设置回0 以给出数组中的第一个元素。

页面的上一个链接在单击时用于通过将poems_for_year_hrefs 中的当前索引减1 来获取$poems_for_year_hrefs 中的下一个元素。然后它更新$prev_link 的href 属性。如果当前索引小于或等于 0，它会转到poemUrls 数组中的最后一个元素。

这是 CoffeeScript 代码：

```
$(document).ready ->
    $poem_years = $('#poems-for-year ul li a')
    $poem = $('#main-poem').hide()
    $poem_years.click -> 
      $poem.eq(0).fadeIn('slow', -> 
        $poem.slideDown('slow')
     )
     console.log "Clicked on a poem title with index of #{$poem_years.index(@)}"

    $poems_for_year_hrefs = $('#poems-for-year ul li a[href]')

    index = $poems_for_year_hrefs.index(@)
    poemUrls = []
    $($poems_for_year_hrefs).each((i)->
      poemUrls[i] = $(@).attr('href')
      poemUrls.join(",")
    )
    console.log "The poemUrls array contains: #{poemUrls}"

    $next_link = $('#previous-next li a').last()
    $next_link.click ->
      if index >= poemUrls.length
        index = 0
        $next_link.attr('href', poemUrls[index]).attr('href')
      else
        index += 1
        console.log "$next_link was clicked on!"
        $next_link.attr('href', poemUrls[index]).attr('href')
        console.log "$next_link href was set to #{$next_link.attr('href')}"

    $prev_link = $('#previous-next li a').first()
    $prev_link.click ->
      if index <= 0
        index = poemUrls.length
        $prev_link.attr('href', poemUrls[index]).attr('href')
      else
        index -= 1
        console.log "$prev_link was clicked on!"
        $prev_link.attr('href', poemUrls[index]).attr('href')
      console.log "$prev_link href was set to #{$prev_link.attr('href')}" 
```

和 HTML：

```
 <!DOCTYPE html>
    <html>
    <head>
    <title>...</title>
    <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
    <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
    <script src="/assets/poetry.js?body=1" type="text/javascript"></script>
    <script src="/assets/application.js?body=1" type="text/javascript"></script>
    <meta content="authenticity_token" name="csrf-param" />
    <meta content="XcXpd5Fg50gvWP8tVLB0/HOfBxoPaTOJ9q37zArrrFo=" name="csrf-token" />
    </head>
    <body>
    <div>
    <div id="content">
    <h1>poetry</h1>
    <section id="poem-selections">
    <article id="archives">
    <nav id="archive-year-nav">
    <ul>
    <li><a href="/poetry/2011">2011</a>
    <li><a href="/poetry/2012">2012</a>
    </ul>
    </nav>

    <div id="poems-for-year">
    <ul>
    <li><a href="/poetry/2012/1st%20poem%20title?id=16" data-remote="true">1st poem   title</a>
    </li>
    <li><a href="/poetry/2012/2nd%20poem%20title?id=17" data-remote="true">2nd poem  title</a>
    </li>
    <li><a href="/poetry/2012/3rd%20poem%20title?id=18" data-remote="true">3rd poem   title</a>
    </li>
    </ul>

   </div>
   </article>

   </section>

   <section id="main">

   <article>
   <div id="main-poem">
   <h3>2nd poem title</h3>
   <p>2nd poem verse</p>
   </div>
   <nav>
   <ul id="previous-next">
   <li><a href="/poetry/2012/previous_poem/2nd%20poem%20title?id=17" data-  remote="true">previous</a></li>
   <li><a href="/poetry/2012/next_poem/2nd%20poem%20title?id=17" data-remote="true">next</a>      </li>
   </ul>
   </nav>

   </article>

   </section>
   </div>
   </body>
   </html> 
```

我正在使用 Ajax 对 main-poem div 进行更新。如果我点击年度诗歌 div 中的第 2 首诗 (id=17)，主诗 div 将更新，显示第 2 首诗 (id=17) 的内容。如果我单击下一个链接，则会返回在poemUrls 中位置0 处索引的第一首诗。然后我单击下一步，将返回poemUrls 位置1 中的诗歌，然后再次单击下一步，返回位置2 会按照应有的方式移动。一旦我到达数组的末尾，我单击下一个链接将索引计数循环回 0 以到达poemUrls 数组的开头，我需要单击下一步两次。第一次单击什么也不做。

遇到同样的问题，如果我选择第三首诗，然后单击上一个链接。索引从 0 开始，然后返回poemUrl 数组的第一个位置。单击上一个，通过数组将索引减一。到达第一个元素，然后我需要单击两次才能到达数组中的最后一个位置。

***为什么我需要点击两次？它是一个失去上下文的变量吗？***

***另外，如何将当前选定元素的引用传递给 $next_link.click，以便它知道当前选定的元素是什么，并且可以获得正确的下一个元素，而不是从 0 开始？换句话说，如果我点击年度诗歌中的第 2 首诗 (id=17)，如何获取 $next_link.click 以返回第 3 首诗 (id=18)，或者如果我单击上一个获取 $prev_link .点击返回第一首诗（id=16）？***

CoffeeScript 编译为 JavaScript：

```
$(document).ready(function() {
  var $next_link, $poem, $poem_years, $poems_for_year_hrefs, $prev_link, index, poemUrls;
  $poem_years = $('#poems-for-year ul li a');
  $poem = $('#main-poem').hide();
  $poem_years.click(function() {
    $poem.eq(0).fadeIn('slow', function() {
      return $poem.slideDown('slow');
    });
    return console.log("Clicked on a poem title with index of " + ($poem_years.index(this)));
  });
  $poems_for_year_hrefs = $('#poems-for-year ul li a[href]');
  index = $poems_for_year_hrefs.index(this);
  poemUrls = [];
  $($poems_for_year_hrefs).each(function(i) {
    poemUrls[i] = $(this).attr('href');
    return poemUrls.join(",");
  });
  console.log("The poemUrls array contains: " + poemUrls);
  $next_link = $('#previous-next li a').last();
  $next_link.click(function() {
    if (index >= poemUrls.length) {
      index = 0;
      return $next_link.attr('href', poemUrls[index]).attr('href');
    } else {
      index += 1;
      console.log("$next_link was clicked on!");
      $next_link.attr('href', poemUrls[index]).attr('href');
      return console.log("$next_link href was set to " + ($next_link.attr('href')));
    }
  });
  $prev_link = $('#previous-next li a').first();
  return $prev_link.click(function() {
    if (index <= 0) {
      index = poemUrls.length;
      $prev_link.attr('href', poemUrls[index]).attr('href');
    } else {
      index -= 1;
      console.log("$prev_link was clicked on!");
      $prev_link.attr('href', poemUrls[index]).attr('href');
    }
    return console.log("$prev_link href was set to " + ($prev_link.attr('href')));
  });
}); 
```

**编辑**

```
 $next_link = $('#previous-next li a').last()
    $next_link.click ->
      nextPoemUrl = poemUrls[ if index >= poemUrls.length - 1 then 0 else index + 1 ]
      console.log "When I call $next_link_click, nextPoemUrl is: #{nextPoemUrl}"
      $next_link.attr('href', nextPoemUrl).attr('href')
      console.log "When I call $next_link_click, next_link href is: #{$next_link.href}"

    $prev_link = $('#previous-next li a').first()
    $prev_link.click ->
      prevPoemUrl = poemUrls[ if index <= poemUrls.length - 1 then 0 else index - 1 ]
      console.log "When I call $prev_link.click, prevPoemUrl is #{prevPoemUrl}"
      $prev_link.attr('href', prevPoemUrl).attr('href')
      console.log "When I call $prev_link_click, prev_link href is #{$prev_link.href}" 
```

**测试结果：** poemUrls 数组包含：/poetry/2011/1st%20poem%20title%202011?id=19,/poetry/2011/2nd%20poem%20title%202011?id=20,/poetry/2011/3rd% 20诗%20title%202011?id=21

单击索引为 2 的诗标题（数组中的最后一首诗包含 3 首诗）当我调用 $prev_link.click 时，prevPoemUrl 为 /poetry/2011/3rd%20poem%20title%202011?id=21（数组中的最后一首诗）当我调用 $prev_link_click 时，prev_link href 未定义

我再次点击最后一首诗：点击索引为 2 的诗标题（最后一首诗）

当我调用 $next_link_click 时，nextPoemUrl 是：/poetry/2011/1st%20poem%20title%202011?id=19

当我调用 $next_link_click 时，next_link href 是：未定义

似乎 prev 返回索引的最后一首诗， next 返回索引的第一首诗谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:36:07.837

你有[一个错误](http://en.wikipedia.org/wiki/Off-by-one_error)。错误在，

```
if index >= poemUrls.length
    index = 0
...
if index <= 0
    index = poemUrls.length 
```

在您的示例中，`poemUrls.length`是**3**，并且由于 JavaScript 数组是从零开始的（它们从零开始计数），因此有效索引是**0、1 和 2**。第一个片段将让索引在设置为**0之前达到****3**。第二个片段将在索引达到**0时将索引设置为****3**。更正后的代码是，

 ******```
if index >= poemUrls.length - 1
    index = 0
...
if index <= 0
    index = poemUrls.length - 1 
```

**编辑**

解决第二个问题，如果你想访问当前诗歌的兄弟姐妹，你可以使用你的数组和索引结构。快速的 CoffeeScript 解决方案是，

```
prevPoemUrl = poemUrls[ if index <= 0 then poemUrls.length - 1 else index - 1 ]
nextPoemUrl = poemUrls[ if index >= poemUrls.length - 1 then 0 else index + 1 ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:56:41.647

这是获取点击诗歌当前位置的来源，并相应地进行下一个和上一个链接。这是一个粗略的草案，但有效：

```
$(document).ready ->
    $poem_years = $('#poems-for-year ul li a')
    $poem = $('#main-poem').hide()
    $poem_years.click -> 
      $poem.eq(0).fadeIn('slow', -> 
        $poem.slideDown('slow')
      )
      console.log "Clicked on a poem title with index of #{$poem_years.index(@)}" # <-- where gets current index of clicked poem title!
      $poems_for_year_hrefs = $('#poems-for-year ul li a[href]')
      index = $poem_years.index(@) # <-- Assign the current reference to the index variable
      poemUrls = []
      $($poems_for_year_hrefs).each((i)->
        poemUrls[i] = $(@).attr('href')
        poemUrls.join(",")
      )

      console.log "The poemUrls array contains these: #{poemUrls}"

      $prev_link = $('#previous-next li a').first()
      $prev_link.click ->
       console.log "the prevPoemUrl is: #{poemUrls[index]}"
       if index <= 0
         index = poemUrls.length - 1
         $prev_link.attr('href', poemUrls[index]).attr('href')
         $('#main-poem').hide().fadeIn('slow')
         console.log "$prev_link href when <= poemUrls.length was set to #{$prev_link.attr('href')}"
         console.log "The poemUrls when <= poemUrls.length is: #{poemUrls[index]}"
       else
         index -= 1
         console.log "$prev_link was clicked on!"
         $prev_link.attr('href', poemUrls[index]).attr('href')
         $('#main-poem').hide().fadeIn('slow')
         console.log "$prev_link href was set to #{$prev_link.attr('href')}"   
         console.log "The poemUrls poemUrls.length is: #{poemUrls[index]}"

      $next_link = $('#previous-next li a').last()
      $next_link.click ->
        if index >= poemUrls.length - 1
          index = 0
          $next_link.attr('href', poemUrls[index]).attr('href')
          $('#main-poem').hide().fadeIn('slow')
          console.log "$next_link href when >= poemUrls.length was set to #{$next_link.attr('href')}"
          console.log "The poemUrl when >= poemUrls.length is: #{poemUrls[index]}"
        else
          index += 1
          console.log "$next_link was clicked on!"
          $next_link.attr('href', poemUrls[index]).attr('href')
          console.log "$next_link href was set to #{$next_link.attr('href')}"
          console.log "The poemUrls when < poemUrls.length is: #{poemUrls[index]}"
          $('#main-poem').hide().fadeIn('slow') 
```******

# android - Android 闹钟一经创建就会响起

> ID：13021968
> 
> 赞同：0
> 
> 时间：2012-10-23T00:28:30.670
> 
> 标签：android, android-intent, timepicker, android-pendingintent

编辑：我发现当您在当前时间之前设置警报时，它会立即响起

我正在创建一个警报应用程序，该应用程序具有用于创建警报的活动，然后将其注册到 android 系统。我遇到的***问题是，一旦您创建警报，它就会消失。***我还在进一步的测试中看到了一些奇怪的行为，如果您在更改名称***之前***更改时间选择器中的时间，它会在正确的时间关闭，如果不是，它会在创建后立即关闭。这是我的警报类，用于为警报创建待处理的意图（至少是重要部分）：

```
public class Alarm {
private String name;
private int id;
private Calendar time;
private boolean on = true;

public Alarm(String name, int id, Calendar time) {
    this.setName(name);
    this.setId(id);
    this.setTime(time);
}

public Alarm() {

}

    ...
public PendingIntent createPendingIntent(Context context) {
      Intent intent = new Intent(context, MathAlarmReceiverActivity.class);
      intent.putExtra("name", getName());
        PendingIntent pendingIntent = PendingIntent.getActivity(context,
            id, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        return pendingIntent;
}

    ... 
```

}

我认为问题可能出在我创建意图的位置，但是当我在更改名称***之前***更改时间选择器中的时间时，它在正确的时间消失了，所以我能够排除这种情况。

接下来我的活动实际上有时间选择器：

```
public class EditActivity extends Activity {

    public static int CODE_EDIT = 100;
    public static int CODE_ADD = 101;
    Button doneButton;
    TimePicker tp;
    EditText editName;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_edit);
        doneButton = (Button) findViewById(R.id.buttonDone);
        doneButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                done();

            }
        });
        tp = (TimePicker) findViewById(R.id.timePicker);
        editName = (EditText) findViewById(R.id.editTextAlarmName);

        if (getIntent().getExtras().getInt("requestCode") == CODE_ADD) {
            setTitle("Add Alarm");
            doneButton.setText("Add Alarm");
        } else {
            doneButton.setText("Edit Alarm");
            editName.setText(getIntent().getExtras().getString("name"));
            Calendar c = TimeUtils.stringToCalendar(getIntent().getExtras().getString("time"));
            tp.setCurrentHour(c.get(Calendar.HOUR_OF_DAY));
            tp.setCurrentMinute(c.get(Calendar.MINUTE));

            setTitle("Edit Alarm");

        }
        if (android.os.Build.VERSION.SDK_INT > 10) {

            getActionBar().setDisplayHomeAsUpEnabled(true);
        }
    }

       ...

    private void done() {
        String name = editName.getText().toString().trim();
        Calendar c = Calendar.getInstance();
        c.set(Calendar.HOUR_OF_DAY, tp.getCurrentHour());
        c.set(Calendar.MINUTE, tp.getCurrentMinute());
        String time = TimeUtils.calendarToString(c);
        if (name.length() == 0) {
            AlertDialog.Builder b = new AlertDialog.Builder(this);
            b.setMessage("Please enter an alarm name!");
            b.setNeutralButton("Ok", null);
            b.show();
        } else {
            Intent returnIntent = new Intent();
            returnIntent.putExtra("name", name);
            returnIntent.putExtra("time", time);
            if (getIntent().getExtras().getInt("requestCode") == CODE_EDIT) {
                returnIntent.putExtra("id", getIntent().getExtras()
                        .getInt("id"));
                returnIntent.putExtra("on",
                        getIntent().getExtras().getBoolean("on"));
            }

            setResult(RESULT_OK, returnIntent);
            finish();
        }
    }

    ...

} 
```

然后我想，也许当我没有这样做时，它会以某种方式改变时间选择器中的内容，但我不确定这是怎么发生的！在这里，我有将警报添加到 android 系统的方法：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == EditActivity.CODE_EDIT) {
            dataSource.update_byID(
                    data.getExtras().getInt("id"),
                    TimeUtils.stringToCalendar(data.getExtras().getString(
                            "time")), data.getExtras().getString("name"),
                    data.getExtras().getBoolean("on"));
            AlarmManager am = (AlarmManager) getSystemService(Activity.ALARM_SERVICE);
            for(int i = 0; i < dataSource.getAllAlarms().size(); i++) {
                if(dataSource.getAllAlarms().get(i).getId() == data.getExtras().getInt("id")) {
                    Alarm tempAlarm = dataSource.getAllAlarms().get(i);
                    am.setRepeating(AlarmManager.RTC_WAKEUP, tempAlarm.getTime()
                            .getTimeInMillis(), AlarmManager.INTERVAL_DAY, tempAlarm
                            .createPendingIntent(this));
                    break;

                }
            }
        }

        if (requestCode == EditActivity.CODE_ADD) {
            Alarm tempAlarm = dataSource.createAlarm(
                    data.getExtras().getString("name"),
                    TimeUtils.stringToCalendar(data.getExtras().getString(
                            "time")));
            AlarmManager am = (AlarmManager) getSystemService(Activity.ALARM_SERVICE);
            am.setRepeating(AlarmManager.RTC_WAKEUP, tempAlarm.getTime()
                    .getTimeInMillis(), AlarmManager.INTERVAL_DAY, tempAlarm
                    .createPendingIntent(this));

        }
    }
    refreshList();

} 
```

这些也是我用来将日历转换为字符串并返回的方法，我想也许我在这里犯了一个错误，但我测试了这些方法并且它们有效：

```
public static String calendarToString(Calendar c) {
    return String.valueOf(c.get(Calendar.HOUR)) + ":"
            + getMinuteInReadableFormat(c.get(Calendar.MINUTE))
            + (((c.get(Calendar.AM_PM)) == Calendar.AM) ? "AM" : "PM");
}

public static Calendar stringToCalendar(String s) {
    String[] t = s.split(":");
    Calendar c = Calendar.getInstance();
    c.set(Calendar.HOUR, Integer.valueOf(t[0]));
    c.set(Calendar.MINUTE, minuteToInt(t[1]));
    c.set(Calendar.AM_PM, (t[1].endsWith("AM") ? Calendar.AM : Calendar.PM));
    return c;
}

public static String convert12(String s) {
    String newString = null;
    if (s.startsWith("0")) {
        newString = s.replaceFirst("0", "12");
    }
    if (newString == null) {
        return s;
    } else {
        return newString;
    }
}

private static String getMinuteInReadableFormat(int m) {
    if (m < 10) {
        return "0" + String.valueOf(m);
    } else {
        return String.valueOf(m);
    }
}

private static int minuteToInt(String m) {
    String x = m;
    if (m.startsWith("0")) {
        x = m.replaceFirst("0", "");
    }
    String y = x.replace("AM", "");
    String z = y.replace("PM", "");
    return Integer.valueOf(z.trim());
} 
```

我的***问题是，一旦您创建警报，它就会消失。***我还在进一步的测试中看到了一些奇怪的行为，如果您在更改名称***之前***更改时间选择器中的时间，它会在正确的时间关闭，如果不是，它会在创建后立即关闭。而且我不确定该怎么做，因为我不知道问题出在哪里。

也感谢您花时间阅读我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:43:55.103

好吧，我已经解决了这个问题。对于任何有类似问题的人来说，这里就是解决方案。***当我在比当前时间更早***的时间创建警报时，它会立即响起。解决方案是在设置闹钟时将相当于 24 小时的时间添加到您想要的时间。

# php - php不能修改headers信息

> ID：13021969
> 
> 赞同：-3
> 
> 时间：2012-10-23T00:28:33.237
> 
> 标签：php, warnings

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我知道这是一个非常普遍的问题，我为此搜索了很多，但仍然没有成功。我收到此错误

```
Warning: Cannot modify header information - headers already sent by (output started at G:\xampp\htdocs\bidding_site\inc\header.php:88) in G:\xampp\htdocs\bidding_site\inc\add_project.php on line 8 
```

我检查了 . 之前没有空格`header()`。下面是我的**add_project.php代码**

```
<?php

if(isset($_SESSION['user'])) {
echo "hello world";
}
else {

header('location:../index.php');
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:32:37.640

错误信息已经解释了发生了什么；`inc\header.php`在第 88 行发送了一些输出（例如，使用 echo、print 或 PHP 标记之外的东西）。

也就是说，这是一个非常普遍的问题，这里还有其他答案，而且谷歌搜索显示了很多答案，所以应该关闭。

# tex - 如何在纯 TeX 中强制分页？

> ID：13021970
> 
> 赞同：7
> 
> 时间：2012-10-23T00:28:35.023
> 
> 标签：tex

如果这似乎是一个非常新的问题，我深表歉意，但我直接在谷歌上搜索这个问题的尝试似乎受到了 TeX 帮助页面的大量干扰，而且我手边没有 TeX 参考书。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T01:21:03.117

我从同学那里借了一本书，看来这对我来说还算不错。

```
\vfil \break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:59:09.993

\clearpage 应该做的伎俩，即使包括数字或表格。

# javascript - 只允许选中一个复选框。1 个复选框，每个复选框有两种独立的形式，都在一个页面上

> ID：13021972
> 
> 赞同：0
> 
> 时间：2012-10-23T00:28:48.057
> 
> 标签：javascript, html, forms, checkbox

我有一个 HTTP 接口页面，要求用户上传各种独立文件。为此，我创建了多个表格，每个表格都有自己的表格。

在其中两个表中，我需要一个复选框，每个复选框允许用户选择它，然后需要在系统启动时安装文件。

两张表用于上传系统固件，一张用于主固件，另一张用于备份固件。

如果同时上传两个固件，系统将崩溃，因此需要单独的表格。

由于这个崩溃问题，对于两个复选框，它需要：一个被选中，或者另一个被选中，或者没有被选中。

这是一个示例 html 代码：

```
<body>

<div id="container"> 
 <table width="1000" border="0" cellpadding="1" class="uploadBox">
   <tr>
     <td width="460" rowspan="2">
      <form action="fileupload.html" method="post" enctype="multipart/form-data">
       <b>Update Primary System Firmware</b>
        <p style="margin-bottom: 2px"> <b>File: </b>
          <input type="file" name="firmwaremain" size="30" />
          <input type="submit" value="Upload" />
        </p>

    </td>
    <td width="210" height="23">Current File Name:</td>
    <td width="117">Current File Size:</td>
    <td width="102">File Upload Date:</td>
    <td width="93">Install on Start</td>
   </tr>
   <tr>
    <td>~curFirmName~</td>
    <td width="117">~curFirmSize~</td>
    <td width="102">~curFirmDate~</td>
    <td width="93"><input type="checkbox" name="firmPrim" id="firmPrim" /></td>
   </tr>
 </table>
 </form>

 <table width="1000" border="0" cellpadding="1">
   <tr>
    <td width="460" rowspan="2">
     <form action="fileupload.html" method="post" enctype="multipart/form-data">
      <b>Update Backup System Firmware</b>
        <p style="margin-bottom: 2px"><b>File: </b>
          <input type="file" name="firmwarebackup" size="30" /> 
          <input type="submit" value="Upload" />
        </p>

   </td>
   <td width="210" height="23">Current File Name:</td>
   <td width="117">Current File Size:</td>
   <td width="102">File Upload Date:</td>
   <td width="93">Install on Start</td>
  </tr>
  <tr>
   <td>~curBackName~</td>
   <td width="117">~curBackSize~</td>
   <td width="102">~curBackDate~</td>
   <td width="93"><input type="checkbox" name="firmBackup" id="firmBackup" /></td>
 </table>
 </form>
</div> 
```

如您所见，它们的复选框采用两种独立的形式，因此我很难运行 JavaScript 代码，因为（我认为）它要求复选框采用一种形式。

我也不能使用单选按钮，因为它们的形式不同，而且必须有一个选项不能被选中。

有没有办法验证整个页面并检查所有表单，以便在页面上只能选择一个复选框？

谢谢！

问候，乔什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:37:13.267

如果选中了单击的复选框，则向两个复选框添加一个单击处理程序，以取消选中另一个表单中的复选框：

```
var primCheck = document.forms[0].firmPrim;
var backCheck = document.forms[1].firmBackup;
primCheck.onclick = checkClick;
backCheck.onclick = checkClick;

function checkClick(e) {
    var otherCheckbox = this === primCheck ? backCheck : primCheck;
    if (this.checked) {
        otherCheckbox.checked = false;
    }
} 
```

**工作演示：** [jsfiddle.net/QM6sy/1/](http://jsfiddle.net/QM6sy/1/)

# python - 解析字符串以查看它是否可以转换为浮点数

> ID：13021975
> 
> 赞同：1
> 
> 时间：2012-10-23T00:29:02.050
> 
> 标签：python, validation, floating-point

我的部分家庭作业是编写一个函数来解析一个字符串，例如`'-.4e-4'`并识别任何会阻止它被转换为浮点数的问题。例如，`'10e4.5'`我需要检测指数中的小数并提供相关的错误消息。

我尝试了很多事情。第一个也是最基本的当然是 try: except:。尝试将其转换为浮点数并让 Python 完成繁重的工作。但是，据我所见，它可以返回的错误对于这个分配来说不够描述。

我尝试的第二件事是规范化字符串，用 n 替换所有数字，用 s 替换符号，用 d 替换小数，用 e 替换指数（C 中的 maketrans 函数非常快）。然后，我将任何重复的 n 减少为单个 n。我列出了所有有效的浮点格式，并检查了标准化字符串是否在该列表中。又名，我将其列入白名单。它工作得很好，而且相当省时，但同样没有错误检查。该代码发布在下面。

```
import string,time
check_float_trans = string.maketrans("nsd0123456789-+.","???nnnnnnnnnnssd")
check_float_valids = 'n sn sndn ndn ndnen dn sdn sdnen sdnesn dnesn dnen nen nesn snesn sn snen sndnen sndnesn ndnesn'.split()
def check_float( test ):
    """Check if string <test> could be cast as a float, returns boolean."""
    test = test.translate(check_float_trans)
    test = ''.join([a for a,b in zip(test, ' '+test) if a != b])
    return test in check_float_valids 
```

我希望这里有人能给我一些指示。我不想把这个交给我，但我相对卡住了。我尝试对其进行监护人编码，试图找出字符串可能无法作为浮点数转换的原因，但我永远无法建立足够的墙来确保没有坏字符串得到误报。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:41:59.533

这就是我要做的......（这也是未经测试的）

```
def isValid(expression):

    if 'e' in expression:
        number, exponent = expression.split('e')
    else:
        print "not a valid format, no 'e' in expression"
        return False

    # a bunch of other if statments here to check for
    #certain conditions like '.' in the exponent component

    return float(number) ** float(exponent)

if __name__ == '__main__':
    print isValid('-.4e-4')
    print isValid('10e4.5') 
```

# ruby-on-rails - 如何以 Rails 样式读取文件

> ID：13021976
> 
> 赞同：3
> 
> 时间：2012-10-23T00:29:02.843
> 
> 标签：ruby-on-rails, ruby, nokogiri

我有一些数据存储为 XML 文件。我把它放到我创建的目录中，`app/data/myxml.xml`.

现在我想用 Nokogiri 解析它。要找到我引用绝对路径的文件：

```
@doc = Nokogiri::XML(open("/home/me/webA/myrailsproject/app/data/myxml.xml")) 
```

绝对路径肯定会让代码变得丑陋。是否有更短、更简洁的方式来引用文件？如：

```
@doc = Nokogiri::XML(open("myxml")) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T00:35:27.057

Rails 中的当前目录是应用程序根目录，所以你可以这样做

```
@doc = Nokogiri::XML(open("data/myxml.xml")) 
```

或者，如果您想确定，可以使用 RAILS_ROOT 常量 -

```
@doc = Nokogiri::XML(open("#{RAILS_ROOT}/data/myxml.xml")) 
```

# c# - 针对 Active Directory 组进行身份验证

> ID：13021977
> 
> 赞同：0
> 
> 时间：2012-10-23T00:29:13.967
> 
> 标签：c#, asp.net

我使用 HTML/CSS 创建了一个网站来显示 SQL 报告索引。到目前为止，这一直运行良好，因为用户需要访问安全组和 SQL 中的某些内容才能查看报告和数据字段。我们现在正处于报告过多且一些具有敏感名称的阶段，因此我们需要根据 Active Directory 安全组限制访问。问题是我根本不知道如何通过 AD 组管理访问。我已经设法让基本 AD 身份验证适用于我为公司部署的另一个项目，但这不需要域用户之外的访问权限。

谁能指出我正确的方向以通过 AD 进行身份验证，检查用户的组，然后根据他们的访问权限显示信息。最后一点应该很简单，最难的部分是检查组信息，然后填充一个变量，然后我可以使用该变量创建一个循环，该循环将显示用户有权访问的所有报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:48:50.620

我找到了部分答案。下面的链接是关于如何提取用户所属的所有 AD 组然后检查他们是否是某个组的成员的指南。这在很大程度上是我一直在寻找的，如果我能把它融入我想要的东西，我想我可以用它来做我需要的事情。

[http://www.c-sharpcorner.com/UploadFile/scottlysle/test-for-user-group-membership-in-Asp-Net-C-Sharp/](http://www.c-sharpcorner.com/UploadFile/scottlysle/test-for-user-group-membership-in-Asp-Net-C-Sharp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T00:58:19.443

或者，Microsoft windows 服务器也可以运行 LDAP，它有大量的兼容库可供编码。

教程链接，它只是您可以安装的另一个服务器角色/功能（如广告本身）

[http://osqa.sjsoft.com/questions/248/how-do-i-install-minimal-active-directoryldap-services-on-windows-server-2008](http://osqa.sjsoft.com/questions/248/how-do-i-install-minimal-active-directoryldap-services-on-windows-server-2008)

另外这里是查询用户组的 QAD SO 答案您是否使用像 asp 这样的 Windows 框架？你的服务器技术是什么？ [从 LDAP 查询用户组](https://stackoverflow.com/questions/5252108/query-from-ldap-for-user-groups)

# ruby-on-rails - 如何使用 gmaps4rails 将地理编码存储在 Mongoid 数组中

> ID：13021981
> 
> 赞同：0
> 
> 时间：2012-10-23T00:29:34.217
> 
> 标签：ruby-on-rails, mongoid, gmaps4rails

我可以在 gmaps4rails 中使用带有 mongoid 的基本地图显示功能，这很棒，但我在更高级的功能方面做得不够。我想我缺少一些基础知识并寻求指导。我能够获得基本的地理编码以使用名为 :latitude :longitude 和 :gmaps 的字段，但是当我尝试使用自述文件所建议的数组时，我无处可去。我已经阅读了 wiki 中的 Mongoid 提示，但无济于事。

谁能指出我正确的方向？

更新; 由于我没有收到任何回复，这里有一些代码示例，

该模型

在职的;

```
class Account
  include Mongoid::Document
  include Gmaps4rails::ActsAsGmappable
  acts_as_gmappable

  field :account_no
  field :owner_name
  field :address
  field :latitude,  :type => Float
  field :longitude, :type => Float
  field :gmaps,     :type => Boolean

  def gmaps4rails_address
    "#{self.address}"
  end

end 
```

不工作

```
 class Account
  include Mongoid::Document
  include Gmaps4rails::ActsAsGmappable
  acts_as_gmappable :position => :location

  field :account_no
  field :owner_name
  field :address
  field :location, :type => Array

  def gmaps4rails_address
  "#{self.address}"
  end

end 
```

根据 gmaps4rails 自述文件中的代码片段，这应该可以将地址地理编码到位置数组中，但我收到此错误

```
NoMethodError: undefined method `gmaps' for #<Account:0x007fc47d051ba0> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:00:33.007

正如[这里](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Model-Customization)所解释的，`gmaps`是一个布尔值，其目的是防止对同一地址进行多次地理编码。

所以这个字段是必要的，除非你明确地告诉它（见同一个文档）

# php - 适当地验证会话

> ID：13021982
> 
> 赞同：0
> 
> 时间：2012-10-23T00:29:41.810
> 
> 标签：php, session, authentication, redirect

我正在尝试会话。

我试图让它成为一个安全的会话，我让用户只有在通过加盐和散列验证后才收到一个等于 5 的“signin”会话变量。

```
 if($passwordhash == $tablehash)
    {
            session_start();
            $_SESSION['signin'] = 5;
            header("Location: /~cssgf3/cs3380/lab7/home.php"); 
```

然后我有它被重定向到通过此步骤进行验证的页面：

```
session_start();

$sessionValue = 5;//$_SESSION['sessionValue'];
$userSession = $_SESSION['signin'];

if($userSession == $sessionValue)
{ 
```

我很好奇这是否是验证会话的适当方式。在这一点上我不太担心安全性，但我感兴趣的是这是否安全，如果不安全，是否有一种简单的方法来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:43:47.113

Very broad question. To answer in simple terms, yes, that's the usual approach. It's usually the things like following that needs to be made secure

1.  Is your code SQL injection safe? Can someone bypass the login?
2.  Can someone use a bruteforce attack?
3.  Is your code XSS safe?
4.  Is your code CSRF safe?
5.  Is the session cookie stored securely? Do you need to use HTTPS only or secure properties
6.  Is it safe against rainbow-table attacks? Are you using salting when storing passwords?

List can go on and of course these depends on the level of security needed.

Also, if the page is user specific, you also need to verify each action can be performed on the given object. For example if it's an order, is the order owned by the current logged in user, not just if a user is logged in.

Hope this helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T00:38:20.113

从广义上讲，是的，但是如果不了解更多您的代码，就很难说。

您最好为用户分配一个唯一值 - 而不是`INT`5 的值。

# c++ - 在 C++ 中，CPython 字符串连接的等价物是什么？

> ID：13021985
> 
> 赞同：6
> 
> 时间：2012-10-23T00:30:17.520
> 
> 标签：c++, python

> **可能重复：**
> [简单的​​字符串连接](https://stackoverflow.com/questions/13013442/simple-string-concatenation)

昨天，在我写这篇文章的时候，有人问了 SO

> 如果我有一个字符串在 python 中`x='wow'` 应用该函数：`add`
> 
> ```
> x='wow'
> x.add(x)
> 'wowwow' 
> ```
> 
> 我怎么能在 C++ 中做到这一点？

随着`add`（不存在）纠正为**`__add__`**（标准方法），这是一个深刻而有趣的问题，涉及微妙的低级细节，高级算法复杂性考虑，甚至线程！简洁的方式。

我 [将原始问题](https://stackoverflow.com/questions/13013442/simple-string-concatenation) 作为我自己的问题重新发布，因为在删除之前我没有机会提供正确答案，并且我努力恢复原始问题，以便我可以帮助增加对这些问题的一般理解，失败的。

我把原来的标题“select python or C++”改成了……

*   在 C++ 中，CPython 字符串连接的等价物是什么？

从而缩小了问题的范围。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T00:30:17.520

## 代码片段的一般含义。

给定的代码片段

```
x = 'wow'
x.__add__( x ) 
```

在 Python 2.x 和 Python 3.x 中有不同的含义。

在 Python 2.x 中，字符串默认是**窄字符串**，每个编码单元一个字节，对应于基于 C++`char`的字符串。

在 Python 3.x 中，字符串是**宽字符串**，保证代表 Unicode，对应于基于 C++ `wchar_t`的字符串的实际使用，同样每个编码单元具有未指定的 2 或 4 个字节。

忽略效率，该**`__add__`**方法在两个主要 Python 版本中的行为相同，对应于 C++`+`运算符 for `std::basic_string` (ie, for `std::string`and `std::wstring`)，例如引用[CPython 3k 文档](http://docs.python.org/py3k/reference/datamodel.html#object.__add__)：

> `object.__add__(self, other)`
> ... 评估表达式`x + y`，其中`x`是具有`__add__()`方法的类的实例，`x.__add__(y)`被调用。

例如，CPython 2.7 代码

```
x = 'wow'
y = x.__add__( x )
print y 
```

通常会写成

```
x = 'wow'
y = x + x
print y 
```

并对应于此 C++ 代码：

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
    auto const x = string( "wow" );
    auto const y = x + x;
    cout << y << endl;
} 
```

[与为原始问题](https://stackoverflow.com/questions/13013442/simple-string-concatenation)给出的许多不正确答案的主要区别 在于，C++ 对应是一个*表达式*，而不是一个*更新*。

可能很自然地认为方法名称`__add__`表示字符串对象的值的更改，更新，但就可观察行为而言，Python 字符串是**不可变字符串**。只要可以在 Python 代码中直接观察到，它们的值就不会改变。这与 Java 和 C# 中的相同，但与 C++ 的可变`std::basic_string`字符串非常不同。

## CPython 中的二次到线性时间优化。

CPython 2.4 添加 [了以下](http://docs.python.org/release/2.4.2/whatsnew/node12.html#SECTION0001210000000000000000) 优化，仅*适用于窄字符串*：

> `s = s + "abc"`表单语句中的字符串连接`s += "abc"` 现在在某些情况下可以更有效地执行。这种优化不会出现在其他 Python 实现中，比如 Jython，所以你不应该依赖它；`join()`当您想有效地将​​大量字符串粘合在一起时，仍然建议使用字符串的方法。（由阿明·里戈提供。）

这听起来可能不多，但在适用的情况下，这种优化会减少从**二次时间**O( *n* ² ) 到**线性时间**O( *n* ) 的串联序列，最终结果的长度为*n*。

首先，优化用更新替换串联，例如

```
x = x + a
x = x + b
x = x + c 
```

或就此而言

```
x = x + a + b + c 
```

被替换为

```
x += a
x += b
x += c 
```

在一般情况下，将有许多对所引用的字符串对象的`x` 引用，并且由于 Python 字符串对象必须看起来是不可变的，因此第一次更新分配不能更改该字符串对象。因此，通常，它必须创建一个全新的字符串对象，并将该（引用）分配给`x`.

此时`x`持有对该对象*的唯一*引用。这意味着对象可以通过附加的更新分配来*更新*`b`，因为没有观察者。同样对于`c`.

这有点像量子力学：你无法观察到这个肮脏的事情正在发生，而且当有可能有人观察到这些阴谋时，它永远不会发生，但你可以通过收集的有关性能的统计数据*推断*它一定是在进行，因为线性时间与二次时间完全不同！

线性时间是如何实现的？好吧，通过更新，可以完成与 C++ 中相同的缓冲区加倍策略`std::basic_string`，这意味着只需在每次缓冲区重新分配时复制现有缓冲区内容，而不是每次追加操作。这意味着复制的 **总成本**在最坏的情况下与最终字符串大小呈线性关系，就像总和（表示每次缓冲区翻倍时的复制成本）1 + 2 + 4 + 8 + ... + N 小于2*N。

## C++ 中的线性时间字符串连接表达式。

为了忠实再现 C++ 中的 CPython 代码片段，

*   应该捕获操作的最终结果和表达式性质，

*   并且应该捕获它的性能特征！

`__add__`CPython到 C++的直接翻译`std::basic_string` `+`无法可靠地捕获 CPython 线性时间。*编译器可以*以与 CPython 优化相同的方式优化C++`+`字符串连接 。或者不是——这意味着有人告诉初学者，Python 线性时间运算的 C++ 等价物是具有二次时间的东西——嘿，这就是你应该使用的……

 *对于性能特征，C++`+=`是基本答案，但是，这并没有抓住 Python 代码的表达性质。

自然的答案是一个线性时间 C++**字符串构建器**类，它将连接表达式转换为一系列`+=`更新，以便 Python 代码

```
from __future__ import print_function

def foo( s ):
    print( s )

a = 'alpha'
b = 'beta'
c = 'charlie'
foo( a + b + c )    # Expr-like linear time string building. 
```

大致对应

```
#include <string>
#include <sstream>

namespace my {
    using std::string;
    using std::ostringstream;

    template< class Type >
    string stringFrom( Type const& v )
    {
        ostringstream stream;
        stream << v;
        return stream.str();
    }

    class StringBuilder
    {
    private:
        string      s_;

        template< class Type >
        static string fastStringFrom( Type const& v )
        {
            return stringFrom( v );
        }

        static string const& fastStringFrom( string const& s )
        { return s; }

        static char const* fastStringFrom( char const* const s )
        { return s; }

    public:
        template< class Type >
        StringBuilder& operator<<( Type const& v )
        {
            s_ += fastStringFrom( v );
            return *this;
        }

        string const& str() const { return s_; }
        char const* cStr() const { return s_.c_str(); }

        operator string const& () const { return str(); }
        operator char const* () const { return cStr(); }
    };
}  // namespace my

#include <iostream>
using namespace std;
typedef my::StringBuilder S;

void foo( string const& s )
{
    cout << s << endl;
}

int main()
{
    string const    a   = "alpha";
    string const    b   = "beta";
    string const    c   = "charlie";

    foo( S() << a << b << c );      // Expr-like linear time string building.
} 
```*

# python - 如何在新行中打印列表中的元素？

> ID：13021997
> 
> 赞同：4
> 
> 时间：2012-10-23T00:31:44.623
> 
> 标签：python, list, tuples, dictionary

我有一个清单

```
L = Counter(mywords) 
```

在哪里

```
mywords = ['Well', 'Jim', 'opportunity', 'I', 'Governor', 'University', 'Denver', 'hospitality', 'There', 'lot', 'points', 'I', 'make', 'tonight', 'important', '20', 'years', 'ago', 'I', 'luckiest', 'man', 'earth', 'Michelle', 'agreed', 'marry', '(Laughter)', 'And', 'I', 'Sweetie', 'happy'] 
```

它比那长得多，但那是一个片段。

现在我接下来要做的是：

```
print ("\n".join(c.most_common(10))) 
```

因为我希望它显示该列表中最常用的 10 个单词及其计数，但我希望它为列表中的每个项目打印到新行中，而不是我收到此错误：

```
TypeError: sequence item 0: expected str instance, tuple found 
```

任何帮助将不胜感激，使用 Python 3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T00:34:49.730

```
print ("\n".join(map(str, c.most_common(10)))) 
```

如果您想更好地控制格式，可以使用这样的格式字符串

```
print ("\n".join("{}: {}".format(k,v) for k,v in c.most_common(10))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T00:37:21.300

最简单的是：

```
for item, freq in L.most_common(10):
    print(item, 'has a count of', freq) # or
    print('there are {} occurrences of "{}"'.format(freq, item)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T00:40:57.753

如果你只想要字符串：

```
print("\n".join(element for element, count in c.most_common(10))) 
```

如果您希望以以下形式打印字符串和计数`('foo', 11)`：

```
print ("\n".join(str(element_and_count) 
       for element_and_count in c.most_common(10))) 
```

如果您想要您选择的其他格式的字符串和计数：

```
print ("\n".join("{}: {}".format(element, count) 
       for element, count in c.most_common(10))) 
```

为什么？该`most_common`函数返回`(element, count)`对。这些东西是元组，而不是字符串。你不能只是将元组连接在一起。当然，您可以将其转换为字符串（上面的选项 #2），但这仅在您确实需要`('foo', 11)`每行的格式时才有效。要获得其他两个选项，您想忽略一半的元组并使用另一个，或者编写自己的格式表达式。

在任何情况下，您都希望对返回的序列的每个成员执行一些操作`most_common`。Pythonic 的方法是使用列表推导或生成器表达式。

同时，您应该学习如何调试这些情况。什么时候`join`给你 a `TypeError`，把它分解成几块，直到你找到一个可以存储的东西（并用 2 而不是 10 尝试它，这样可以减少阅读量）：

```
>>> print("\n".join(c.most_common(2)))
TypeError: sequence item 0: expected str instance, tuple found
>>> c.most_common(2)
[('I', 4), ('man', 1)] 
```

啊哈！列表中的每个事物都是两个事物的元组，而不仅仅是一个字符串。为什么？

```
>>> help(c.most_common)
most_common(self, n=None) method of collections.Counter instance
    List the n most common elements and their counts from the most
    common to the least.  If n is None, then list all element counts.

    >>> Counter('abcdeabcdabcaba').most_common(3)
    [('a', 5), ('b', 4), ('c', 3)] 
```

好的，所以它返回最常见的元素*及其计数*。我只想要元素。所以：

```
>>> [element for element, count in c.most_common(2)]
['I', 'man'] 
```

现在我可以加入：

```
>>> '\n'.join([element for element, count in c.most_common(2)])
'I\nman' 
```

而且我不需要括号和父母（我可以只使用表达式而不是列表理解）：

```
>>> '\n'.join(element for element, count in c.most_common(2))
'I\nman' 
```

现在，我可以打印它了：

```
>>> print('\n'.join(element for element, count in c.most_common(2)))
I
man 
```

现在它正在工作，打印所有 10 个：

```
>>> print('\n'.join(element for element, count in c.most_common(10))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-27T08:45:29.940

我很惊讶没有人建议使用解包操作符`*`，既然你说 python3 那为什么不做下面的，你也可以[在这里测试一下](https://repl.it/CVnW)。

```
print(*[x[0]for x in L.most_common(10)], sep="\n") 
```

### 相关问题

*   [Python 3.3：分隔参数 (sep) 给出错误](https://stackoverflow.com/questions/16635241/python-3-3-separation-argument-sep-giving-an-error)
*   [**（双星）和*（星）对参数有什么作用？](https://stackoverflow.com/questions/36901/what-does-double-star-and-star-do-for-python-parameters)
*   [列表推导](http://www.diveintopython3.net/comprehensions.html)

# mysql - MySQL COUNT 耗时 11s，如何提高

> ID：13021999
> 
> 赞同：0
> 
> 时间：2012-10-23T00:32:02.960
> 
> 标签：mysql, indexing

我正在尝试计算销售的发生。

这是我的查询：

```
SELECT item, COUNT(item) FROM sales_raw
    GROUP BY item HAVING (count(item)>=1)
    ORDER BY COUNT(item) DESC 
```

此查询在大约 500,000 行的表上大约需要 11 秒。当我进行解释时，我得到：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  sales_raw   index   NULL    vendor_id   767 NULL    397431  Using temporary; Using filesort 
```

为什么这个查询需要这么长时间，我该如何改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:36:18.583

1.  将每个替换`COUNT(item)`为`COUNT(*)`。前者检查值`item`是否为 NULL，而不是后者。
2.  如果它仍然不够快，请在您的`item`列上添加一个索引，这应该会使您的查询明显更快。

此外，该`HAVING`子句似乎没有用，因为`COUNT(item)`它不能返回 0，因为该项目一开始就不会在表中。