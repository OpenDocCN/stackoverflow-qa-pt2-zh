# StackOverflow 问答 13677000-13677999

# scala - KeyEvent 的问题

> ID：13677001
> 
> 赞同：2
> 
> 时间：2012-12-03T04:10:38.060
> 
> 标签：scala, listener, scala-swing

我想知道为什么以下代码不起作用：

```
object Main extends SimpleSwingApplication {

  val dim = new Dimension(500, 110)

  def top = new MainFrame {
    contents = new FlowPanel{
      listenTo(keys, mouse.clicks)
      reactions += {
        case MouseClicked(_,_,_,_,_) => println("Mouse clicked")
        case KeyPressed(_, Key.C, _, _) => println("C pressed")
        case KeyTyped(_, Key.C, _, _) => println("C typed")
        case KeyReleased(_, Key.C, _, _) => println("C released")
      }
    }
    size = dim
  }

} 
```

鼠标点击会被识别，但击键不会。我也尝试了不同的键或修饰符，但似乎没有任何效果。我究竟做错了什么？

（在不太可能的情况下，这可能与环境有关：我在 Windows 7 上使用 SBT 运行此代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:40:28.930

从[这个答案](https://stackoverflow.com/a/11817490/770361)开始，您似乎需要包含该行

```
focusable = true 
```

为您的`FlowPanel`. 然后它应该工作。

# php - 使用 PHP htmlspecialchars() php 编辑输入标签内的 HTML 内容

> ID：13677003
> 
> 赞同：1
> 
> 时间：2012-12-03T04:10:40.283
> 
> 标签：php, htmlspecialchars

我在表单中有一个包含 HTML 的字段，所以我`htmlspecialchars`在向用户显示它之前使用它，所以它实际上显示为 HTML（带有标签），所以像这样

```
//in my php script, right after I get the values from the database
$someVar = htmlspecialchars($someVar);

//inside html (I use Smarty template)
<input id="someVar" name="someVar" type="text" size="50" value="{$someVar}"></input> 
```

现在问题发生在用户提交表单时，以某种方式在页面提交上丢失了标签，我只是将文本（解释的 HTML）写入数据库。

如何成功允许用户编辑包含 HTML 标记的字段？

# google-maps - 未定义的局部变量或方法“acts_as_gmappable”

> ID：13677009
> 
> 赞同：0
> 
> 时间：2012-12-03T04:11:25.917
> 
> 标签：google-maps, gmaps4rails

我创建了一个 Heroku 应用程序，它利用 gmaps4fails gem 来实现应用程序的一项功能。

当我尝试为数据库播种时，我得到

`rake aborted! undefined local variable or method 'acts_as_gmappable' for #<Class:0x00000004b5b928>`

任何想法如何解决这一问题？

在本地测试时一切正常。

编辑：这是我的模型代码

```
 class Hall < ActiveRecord::Base

      has_many :hall_features
      has_many :green_features, :through => :hall_features
      has_many :settings, :through => :pinned_halls
      belongs_to :operational_unit

      acts_as_gmappable
      ... 
```

移民：

```
class CreateHalls < ActiveRecord::Migration
  def up
    create_table 'halls' do |t|
      t.string 'name'
      t.text 'background'
      t.text 'energy_info'
      t.float 'latitude'
      t.float 'longitude'
      t.boolean 'gmaps'
      t.timestamps
    end
  end

  def down
    drop_table 'halls' # deletes the whole table and all its data!
  end
end 
```

这是来自我的终端的错误：http: [//i48.tinypic.com/zvoggg.png](http://i48.tinypic.com/zvoggg.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:10:00.870

呃 .. 仅将 gem 放在 Gemfile 中的 :development 下。将它包含在 :production 中解决了一切。

今晚我会哭着入睡。也有些幸福的泪水。

# java - 在包“android”中找不到属性“showAsAction”的资源标识符

> ID：13677014
> 
> 赞同：12
> 
> 时间：2012-12-03T04:11:51.767
> 
> 标签：java, android, android-xml, android-menu

正如标题所示，我在至少 3 个 XML 布局文件中遇到了该错误，但是，我在任何这些 XML 文件中都没有看到 attritube“showsAsAction”，是我遗漏了什么还是我只是瞎了眼？，在这里是有问题的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/findSelected"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Registrar Asistencia" 
        android:onClick="registrarAsistencia"/>

     <ListView 
         android:id="@+id/listaAlumnos" 
         android:layout_width="fill_parent"
         android:layout_height="fill_parent" />

</LinearLayout> 
```

* * *

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center|top"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/lblCuenta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Cuenta"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/txtCuenta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10" /> 

    <TextView
        android:id="@+id/lblPass"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Contraseña"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/txtPass"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPassword" />

    <Button
        android:id="@+id/btnIniciarSesion"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="iniciarSesion"
        android:text="Iniciar Sesion" />

</LinearLayout> 
```

* * *

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

另外，我使用 Android 2.2 (API 8) 作为目标版本。我知道“showAsAction”是在 API 11 中实现的，但我在这里找不到问题。

**更新：**问题面板显示以下错误：

> 生成最终存档时出错：java.io.FileNotFoundException: C:\Users\\Documents\Android\Registro de Asistencia\bin\resources.ap_ 不存在

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-03T18:10:35.043

当我忘记将**appcompat-v7:+**添加到我的项目依赖项时，我遇到了这个问题。你可以在 build.gradle 中这样做：

```
dependencies {
  compile 'com.android.support:appcompat-v7:+'
} 
```

这是因为我的 menu.xml 中有以下内容：

```
xmlns:app="http://schemas.android.com/apk/res-auto" 
```

和

```
app:showAsAction="never" 
```

当我删除**xmlns:app**命名空间并只使用`android:showAsAction="never"`时，我不再需要 appcompat-v7 库。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-15T17:50:12.240

您确定您正在查看正确的 *.xml 文件吗？您似乎在布局 xml 中寻找“showAsAction”，但它是菜单的参数。而是查看 .../menu/your_activity.xml

您正在处理的问题与使用小于 4.0 的目标和/或小于 14 的 API 有关。

所以，

a) 更改这些参数，

b) 将 showAsAction 的值从“never”更改为“ifRoom”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-22T09:03:12.590

如果您在 XML 中使用了资源标识符“ShowAsAction”，就会发生这种情况。我猜这个功能只能从ver11开始。如果您尝试在较低的 API 版本上运行相同的程序，则会产生此错误。解决方案->右键单击项目>属性> Android>构建目标>选择大于API 11的东西

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-20T16:50:47.217

您必须选择 4.0 或更高版本的 API 14，因为任何低于 4.0 的版本在其包中都不包含**showAsAction**属性

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-16T19:07:23.080

正确的答案是使用

```
android:showAsAction="ifRoom" 
```

而不是android在哪里

```
xmlns:android="http://schemas.android.com/apk/res/android" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-09T05:42:56.380

**安卓工作室**

如果您使用的是**ANDROID STUDIO** ......请使用此修复程序

添加

`xmlns:compat="http://schemas.android.com/tools"`

在菜单标签中，而不是

`xmlns:compat="http://schemas.android.com/apk/res-auto "`

在**菜单**标签中。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-01-07T11:15:02.497

如果您将项目从 Android Studio 导入到 Eclipse，只需添加：

```
<?xml version="1.0" encoding="utf-8"?> 
```

在 xml 的头部，然后它会全部修复。

# ruby - “ruby -v”不再返回当前版本

> ID：13677017
> 
> 赞同：1
> 
> 时间：2012-12-03T04:12:14.657
> 
> 标签：ruby, macos, terminal, rvm

在尝试升级到 Ruby 1.9.3 的过程中，我想我弄坏了一些东西。我相信我已经成功安装了 Ruby 1.9.3。但是，现在当我输入`ruby -v`终端时，我没有收到任何消息。这是示例输出：

```
rish-macbookair:~ rish$ ruby -v
rish-macbookair:~ rish$ 
```

我做的最后一件事是在 XCode 中安装“命令行工具”，因为我收到“缺少库”错误。

关于可能发生的事情或从哪里开始的任何想法？

**编辑：在尝试重新安装 1.9.3 时，我得到了这个：**

```
rish-macbookair:~ rish$ rvm reinstall 1.9.3
/usr/local/rvm/src/ruby-1.9.3-p327 has already been removed.
Removing /usr/local/rvm/rubies/ruby-1.9.3-p327...
https://rvm.io/binaries/osx/10.8/x86_64/ruby-1.9.3-p327.tar.bz2 - #configure
ruby-1.9.3-p327 - #download
ruby-1.9.3-p327 - #extract
ruby-1.9.3-p327 - #validate
ruby-1.9.3-p327 - #setup
sed: RE error: illegal byte sequence
Saving wrappers to '/usr/local/rvm/bin'.
ruby-1.9.3-p327 - #importing default gemsets (/usr/local/rvm/gemsets/), this may take time ...
Making gemset ruby-1.9.3-p327 pristine.
Making gemset ruby-1.9.3-p327@global pristine.
rish-macbookair:~ rish$ 
```

我也尝试过重新安装 RVM，但我又回到了同一个地方

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T05:04:53.830

您使用的是旧版本的 rvm，请尝试：

```
rvm get head
rvm reinstall 1.9.3
rvm use 1.9.3 
```

# php - 根据两个或多个单独的日期选择多行

> ID：13677023
> 
> 赞同：1
> 
> 时间：2012-12-03T04:13:01.663
> 
> 标签：php, mysql

好的，所以我在那里发现的一切似乎都在两个不同的日期之间。那不是我想要做的。我正在寻找一种基于两个或多个不同日期选择行的解决方案。

例如：

```
SELECT * FROM users
    WHERE DATE(date) IN ('2012-11-30','2012-11-01') 
```

只是试图提取这两个日期的信息。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:22:03.780

```
SELECT * FROM `users`
    WHERE DATE(`date`) = "2012-11-30" OR DATE(`date`) = "2012-11-01"; 
```

# c - 如何观察父进程和子进程之间的资源争用

> ID：13677026
> 
> 赞同：0
> 
> 时间：2012-12-03T04:13:44.500
> 
> 标签：c, process

以下是我的测试代码：

```
 #include <unistd.h>
    #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    int main()
    {
pid_t pid;

/* create first child process */
pid = fork();
if (pid < 0) {
    perror("fork error");
    exit(1);
}

if (pid > 0) {            // parent process
    pid = fork();
    if (pid < 0) {
        perror("fork error");
        exit(1);
    }

    if (pid > 0) {        // parent process
        for (int i = 0; i < 100; i++) {
            printf("aaaaaaaaaaa\n");
        }
    } else {               // second child process
        for (int i = 0; i < 100; i++) {
            printf("cccccccccc\n");
        }
    }
} else {                   // first child process
    for (int i = 0; i < 100; i++) {
        printf("bbbbbbbbbb\n");
    }
}

exit(0); 
```

}

这三个进程将内容打印到标准输出，但是每次我运行代码时，事实证明这三个进程一个接一个地运行，我看不到我期望的输出。我知道这是因为 cpu 太快了，几乎不可能看到我期望的输出。所以我编写了另一个死循环程序，就像这样：while (1) { i++; } 使 cpu 使用率高，但我仍然看不到我期望的输出。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:10:58.570

**它完全取决于操作系统调度**，因为它为特定进程提供了多少时间。

因此，**如果您分叉很多进程，那么分配给一个进程的时间会更少，那么您可以获得所需的结果**....

但是在**低负载 CPU 的情况下，分配给进程的时间变得更多，那么很有可能有足够的时间在分配给给定进程的时间段内打印数千个输出，这就是为什么你得到指定的（由你）结果**...

# c# - C# 3DES加密转C解密

> ID：13677032
> 
> 赞同：0
> 
> 时间：2012-12-03T04:14:32.427
> 
> 标签：c#, c++, winapi, encryption

我创建了一个执行 3DES 加密/加密的 C# 程序集并对其进行了测试。我现在需要解密远程机器上的数据以进行安装。当我的本机进程运行时，不保证存在 .NET，因此我需要使用 Win32 C++ 方法对其进行解密。这是针对商业应用程序的，因此第三方库需要灵活地使用许可。我更喜欢一个简单的例子来让我开始。到目前为止，我发现的大多数示例都需要导入会话密钥。我不使用那些。我正在使用 .NET 2.0 在 machineA 上加密，然后传递给 machineB，在那里我将检索密钥并使用本机 Win32 API 解密。谁能用一些例子指出我正确的方向？

我知道我需要从`CryptAcquireContext(&hProv, NULL, MS_ENHANCED_PROV, PROV_RSA_FULL, CRYPT_VERIFY_CONTEXT)`. 但是，下一步似乎是导入密钥，它看起来需要 ( [http://support.microsoft.com/kb/228786](http://support.microsoft.com/kb/228786) )。这是正确的，还是我让这太难了。我对加密有一个基本的了解。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:52:46.370

看看下面的代码：

```
#define TRIPLEDES_KEYSIZE 24
#define TRIPLEDES_BLOCKSIZE 8

...

BYTE key[TRIPLEDES_KEYSIZE] = { ... };

...

HCRYPTKEY hKey;

typedef struct
{
    BLOBHEADER hdr;
    DWORD cbKeySize;
    BYTE rgbKeyData [TRIPLEDES_KEYSIZE];
} KEYBLOB;

KEYBLOB keyBlob;
memset(&keyBlob, 0, sizeof(keyBlob));
keyBlob.cbKeySize = TRIPLEDES_KEYSIZE;
keyBlob.hdr.bType = PLAINTEXTKEYBLOB;
keyBlob.hdr.bVersion = CUR_BLOB_VERSION;
keyBlob.hdr.aiKeyAlg = CALG_3DES;
memcpy(keyBlob.rgbKeyData, key, TRIPLEDES_KEYSIZE);

BOOL res = CryptImportKey(hCryptProv, (const BYTE*)&keyBlob, sizeof(keyBlob), 0, 0, &hKey);
if (res)
{
    res = CryptSetKeyParam(hKey, KP_MODE, CRYPT_MODE_ECB, 0); 
```

请注意，您可以使用`CRYPT_MODE_ECB`或`CRYPT_MODE_CBC`调用`CryptSetKeyParam`带有`KP_MODE`选项的函数，具体取决于您要执行的操作。您可以通过例如以下代码设置 IV

```
res = CryptSetKeyParam(hKey, KP_IV, iv, 0); 
```

`CRYPT_MODE_CBC`这仅在类似模式下才有意义。

请注意，还有一种不同的 3DES 模式 ( `CALG_3DES_112`) 仅使用 112 位密钥（即使用两个普通 DES 密钥）。如果要使用此模式，则必须修改代码。

编辑：

You should write some classes in C++ to manage all things of the CryptoApi. It will save you a lot of headache.

# c# - 如何在 C# 中访问笔记本电脑内置的指纹扫描仪？

> ID：13677033
> 
> 赞同：5
> 
> 时间：2012-12-03T04:14:58.683
> 
> 标签：c#

我的 c# windows 应用程序使用外部 USB 指纹扫描仪捕获指纹，我想访问笔记本电脑内置指纹扫描仪而不是外部 USB 扫描仪。可能吗？如何访问？请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:19:03.713

最好的办法是弄清楚扫描仪的制造商是什么制造商以及它是什么型号，然后访问制造商的网站并查看他们提供的工具。如果网站上没有，请联系制造商。

请注意，扫描仪的 SDK (a) 很可能只有在您签署保密协议并且 (b) 需要付费时才可用。如果幸运的话，制造商的 SDK 符合 BioAPI 标准，这将使您的代码更容易（注意：不是“容易”）与其他供应商的扫描仪一起使用。

# java - 使用冒泡排序实现双向链表

> ID：13677035
> 
> 赞同：0
> 
> 时间：2012-12-03T04:15:02.007
> 
> 标签：java, linked-list, bubble-sort

我正在使用以下实现一个 Dobly 链接列表： **import java.util.LinkedList;** 使用冒泡排序进行作业。在研究了排序和链表之后，我了解到我不应该使用索引对链表进行冒泡排序，因为链表中不存在索引，否则执行成功太麻烦。

因此，读完之后，我编写了以下代码，但我仍然不确定我是否走在正确的道路上。

我需要一些帮助来理解带有 dobly 链表​​的冒泡排序实现背后的逻辑。

此外，我需要确信我是否正在有效地走在正确的道路上，或者我在尝试这个编码练习时是否完全错误。

```
 //This for loop sorts the smaller part of the bubble sort.
for(int i = 0; i < cars.size() - 1; i++)
    {        //This part creates the second "larger" part of the bubble sort.
        for(int j = i + 1; j < cars.size(); j++)
        {

//Did I do this part correctly?  This is where the swap and sort of the bubble sort        takes //place.
//Obviously, I am using the comparable interface, since I am using the compareTo method.
//

//with the bubblesort, all elements must be greater than zero because for the bubble          //sort, 0 is the smallest element in a set of integers.

            if(cars.get(i).getName().compareTo(cars.get(j).getName()) > 0)
            {
                CarName cari = cars.get(i);
                CarName CarNamej = cars.get(j);
                cars.remove(i);
                cars.add(i, carj);
                cars.remove(j);
                cars.add(j, cari);
                }
            }
        }
    } 
```

我用这个在main方法中输出这个方法来输出排序后的结果：

```
bubbleSort(cars); 
```

我是正确的，还是我在所有代码中都做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:36:48.930

在数组或向量中，您可以通过索引访问存储的变量，即在项目列表中的位置。

在链接列表中，您可以通过从一个项目跳到下一个项目来访问特定项目。

由于您`get(i)`在代码中使用，显然您使用的是数组或向量，因为您正在按列表中的位置进行索引。所以，不……不幸的是，你走错了路……

一旦你越来越近，你的代码看起来更像：

```
boolean changed = true;
while (changed) {  // keep going until we didn't make any more changes (not
                   // strictly the best condition for bubble sort, but it'll do)

    a = first;                  // grab first element
    b = a.next;                 // grab next element
    changed = false;
    while (b!=last) {           // run through all elements
        if (a.value>b.value) {  // compare the two elements; swap if out of order
            a.prev.next = b;    // update element before a to be followed by b
            b.next.prev = a;    // update element after b to be preceeded by a
            a.prev = b;         // b is now before a
            b.next = a;         // and a is after b
            changed = true;     // we made a change, so we're not done
        } else {
            a = b;              // if we didn't swap them, move to next pair
        }
        b = a.next;             // second half of next pair is next after a
    }
} 
```

这只是给你一个粗略的想法。它绝不是完整的或没有错误的。例如，如果您在列表的最开头，则需要更新`first`而不是`a.prev`在行`a.prev.next = b`中，等等。但是，嘿...无论如何，您不想让其他人为您做作业， 正确的？;)

基本上，在双向链表中，每个元素都知道如何到达下一个元素（a.next）和前一个元素（a.prev）。冒泡排序是对这种链表进行排序的一个很好的候选者，因为它只比较相邻元素。否则，快速排序或合并排序或它们的组合可能会快得多，但它们确实需要对元素进行索引访问，而链表通常不提供这种访问。

希望这可以帮助。

顺便说一句：Youtube 有一大堆很酷的视频很好地解释了这些事情。

更严重的一个：[http ://www.youtube.com/watch?v=P00xJgWzz2c](http://www.youtube.com/watch?v=P00xJgWzz2c)

还有一个更不寻常的：[http](http://www.youtube.com/watch?v=lyZQPjUT5B4) ://www.youtube.com/watch?v=lyZQPjUT5B4 （其中一个用于快速排序的音乐要好得多：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:19:31.143

它看起来不像你在正确的道路上。您需要完全消除索引的使用，而是使用节点引用。首先开发代码以从列表中删除一个元素，仅给出对该元素的引用。然后开发代码以在列表中已有元素之前将元素插入列表中，仅给出对这两个元素的引用。然后，您可以在这两种方法之上构建排序算法。

例如，以下是删除元素的方法：

```
void remove(Element element) {
    element.previous().setNext(element.next());
    element.next().setPrevious(element.previous());
} 
```

您应该充分了解双向链表的工作原理，以了解为什么此代码应适用于列表中间的元素。根据您表示列表的方式，您可能需要测试结束条件（`element.previous()`和/或`element.next()`存在`null`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T04:22:12.107

想想冒泡排序在常规数组上的工作方式。一个简单的冒泡排序实现如下所示：

```
 for (int i = array.Length; i > 0; i--)
        {
            for (int j = 0; j < i-1; j++)
            {
                if (array[j] > array[j+1])
                {
                    int tmp = array[j];
                    array[j] = array[j+1];
                    array[j+1]=tmp;
                }
                DisplayElements(array);
            }
        } 
```

不同之处在于，您必须将对下一个和上一个 Node 的引用存储在 List 中，而不是使用 temp int

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T04:56:19.517

为什么不将链表转换为数组，对数组进行排序，然后将内容复制回链表。

# android - ViewPager 图库替换

> ID：13677036
> 
> 赞同：1
> 
> 时间：2012-12-03T04:15:08.733
> 
> 标签：android, android-viewpager

我已经做了足够的搜索，最后我问了这个问题。

我正在将图像视图库转换为由 PagerAdapter 支持的 Viewpager。我能够做到这一点： -

![在此处输入图像描述](../Images/94cf1ef0e0abc0b3a978019deb3eb2ba.png)

在 onpageselected 中，我得到了用于获取红色边框的位置。

问题：- onpageselected() 只返回最左边的图像视图。最右边的 imageview 永远不会出现在左边，因此不能被选中。进一步触摸图像视图时 onpageselected() 不会被调用。只有当你滑动它时它才会被调用。

问题：- 如何使选定的图像视图居中？如何在触摸它时获得图像视图位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:51:14.830

感谢 NathanZ，他给了我一些方向。最后我不得不在 ImageView 而不是 ViewPager 上设置 OnClickListener()。

```
 public Object instantiateItem(ViewGroup container, int position) {
        // TODO Auto-generated method stub
        MyImageView grpView = new MyImageView(ctxt);
        final int temp=position;
        grpView.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                pos=temp;//This is the value what I am interested in
            }
        });
        grpView.setLayoutParams(new LayoutParams((int)(109*density), (int)(109*density)));

        myViewPager.addView(grpView);
        return grpView;
    } 
```

# linux - SCHED_FIFO 和 SCHED_RR 如何相互干扰？

> ID：13677047
> 
> 赞同：5
> 
> 时间：2012-12-03T04:16:22.720
> 
> 标签：linux, pthreads, thread-priority

SCHED_FIFO 和 SCHED_RR 都用于实时使用。我知道 SCHED_RR 可以被时间片抢占。但是假设我有一个线程设置为 SCHED_FIFO，另一个设置为 SCHED_RR，如果两个线程都准备好运行，它们是纯粹按优先级调度的吗？如果他们有相同的优先级怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T04:53:44.983

从概念上讲，有一个与每个静态优先级相关联的可运行进程列表。这些列表可以同时包含`SCHED_FIFO`和`SCHED_RR`进程——这两个调度策略共享同一组静态优先级。

在选择要运行的进程时，调度程序会采用具有最高静态优先级的非空列表头部的进程，而不管该进程的调度策略如何。

调度策略会影响进程在这些列表中的移动方式。对于`SCHED_FIFO`，一旦一个进程到达给定优先级的列表的头部，它将一直停留在那里，直到它阻塞或屈服。对于`SCHED_RR`，已超过其最大时间量的可运行进程将被移至列表的末尾以获取其静态优先级。

# python - 无效的语法与我的列表间距

> ID：13677048
> 
> 赞同：0
> 
> 时间：2012-12-03T04:16:31.447
> 
> 标签：python, syntax

我的 def spread_row() 语法无效

我有一个文本文件，它可以正常工作，但是当我将它复制到最终编码中时，它就不起作用了。帮助？

我要做的是制作一个随机 1 和 0 的 3x3 网格。代码不完整，所以一些编码还没有。

```
##variables to control all the games
##number of games played and points collected in total
games_so_far = 0
total_points = 0

## FOR ONE GAME
## variables that will be used for one single game
max_change = 0

## SUBROUTINES AND FUNCTIONS

import random

def invite_to_play():
  play = raw_input("Would you like to play " + ask_again + "? (y/n): ")
  if play == "y" or play == "Y":
    play_response = True
  else:
    play_response = False
  return play_response

def computer_play():
  computer = raw_input("Would you like that the computer also plays? (y/n): ")
  if computer =="y" or computer =="Y":
    computer_response = True
  else:
    computer_response = False
  return computer_response

def ask_user_int(question):
  response = raw_input(question)
  while not (response.isdigit()):
    print "Your input must be an integer number"
    response = raw_input(question)
  return int(response)

def generate_random_number(dim):
  ## Generate a board of 0's and 1's, up to the size set in "dim"
  return [random.randint(0,1) for i in range(dim)

def spread_row():
  ## Spaces the numbers evenly
  for dat in data:
        print "     ".join(map(str, dat))
  return data

def stop_max_changes()
  print "No more changes, the game is over!"
  return

def program_evaluates_board(numbers):
  ## Evaluates the rows and cols to see if they are even or odd
  row1 = sum(data[0])
  col1 = sum(row[0] for row in data)
  row2 = sum(data[1])
  col2 = sum(row[1] for row in data)
  row3 = sum(data[2])
  col3 = sum(row[2] for row in data)
  if row1%2 == 0:
    print "False"
  else:
    print "True"
  return 

## TOP LEVEL

print 'Welcome to the "An odd matrix" game' + \
      "====================================="

games_so_far = 0

wants_to play = invite_to_play("")
computer = computer_play()

## LOOP TO PLAY MORE GAMES
while wants_to_play:
  games_so_far = games_so_far + 1

  num = ask_user_int("Size of board (between 3 and 6 inclusive): ")
  dim = int(num)

  data = [random_row(dim) for i in range(dim)]

  spread_row()

  print "The board is"
  print "-------------"

  print "\n(initial board)"

  print "\n         Col 0   Col 1   Col 2"

  max_changes = ask_user_int("How many changes would you like to do?" + \
                       "\n > 0 and <= 2: ")
  changes_so_far = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:22:23.093

* * *

首先，你错过了一个“：”

```
def stop_max_changes():  # missing : there 
```

二、为什么这个返回值有空格？：

```
wants_to play = invite_to_play("")  # why space here ? 
```

第三，你缺少一个右括号

```
def generate_random_number(dim):
  ## Generate a board of 0's and 1's, up to the size set in "dim"
  return [random.randint(0,1) for i in range(dim) 
```

请过去完整的代码，我可以在这里进行全面诊断..

# assembly - MIPS 中的 .word 和 .equ 有什么区别？

> ID：13677055
> 
> 赞同：2
> 
> 时间：2012-12-03T04:17:10.210
> 
> 标签：assembly, mips

我认为两者都差不多：变量声明和初始化。你能详细说明一下吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T04:31:21.983

`.word`分配空间并初始化数据。`.equ`定义一个常量，但不为其分配任何空间。

因此，例如，您可能会说：

```
one .equ 1  ; defines a constant called "one"
counter: .word one ; allocates space and initializes it with the value 1 
```

不同之处在于该`.equ`指令不会在编译后的映像中分配任何空间。

# regex - 正则表达式可选地允许括号、点、破折号、空格和加号登录电话号码

> ID：13677058
> 
> 赞同：1
> 
> 时间：2012-12-03T04:17:41.140
> 
> 标签：regex, validation, phone-number

我正在尝试验证电话号码的值，我有这个正则表达式`/^\d+(-\d+)*$/`允许在数字之间带有破折号的数字。我在这里找到它，但我忘记了链接。我尝试将其编辑为可选允许的括号、点、破折号、空格和加号，但我是初学者，所以现在我不能这样做。请注意，用户可以自由选择他们喜欢使用的格式，它只允许他们输入破折号、空格、加号、圆点和括号。

**允许值**：

*   0123456789
*   012-345-6789
*   012-345-6789
*   (012)-345-6789
*   (012) 345-6789
*   +0123456789
*   +012-345-6789
*   +(012)-345-6789

有人请帮助我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T04:36:36.897

```
[0-9\-\(\)\+\s]+ 
```

您可以使用它来检查和/或使用正则表达式替换来删除所有这些字符并验证结果。

对于替换，您可能需要：`[^0-9]`

# c# - 获取颜色值 C#

> ID：13677060
> 
> 赞同：0
> 
> 时间：2012-12-03T04:17:42.113
> 
> 标签：c#

我在这个问题上遇到了麻烦。我正在尝试比较列表中的 Color RGB 并按 RGB 对它们进行排序。我曾考虑将其添加到字典中，但不知道将颜色添加到字典后如何获取颜色值。那么我如何才能在列表中获得颜色的 RBG 以将它们相互比较。任何帮助或建议，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:22:02.207

您可以轻松地为此使用 System.Drawing.Color 结构。它提供了一个[toArgb](http://msdn.microsoft.com/en-us/library/system.drawing.color.toargb.aspx)方法，您可以使用它来获取颜色的等效整数值。

```
List<Color> lc = new List<Color>();
Color c = new Color();
c.R = 0xFF;
c.G = 0x00;
c.B = 0x00;
lc.Add(c);
...
...
lc.Sort((c1, c2) => c1.ToArgb().CompareTo(c2.ToArgb)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:23:31.057

看这个例子

```
//if you want to compare each value
Color _color = Colors.AliceBlue;
byte R = _color.R;
byte G = _color.G;
byte B = _color.B; 
```

也使用[compareTo](http://www.dotnetperls.com/compareto)进行字节比较

# c# - 如何使用 ajaxfileupload asp.net 获取上传的图像宽度和高度

> ID：13677073
> 
> 赞同：0
> 
> 时间：2012-12-03T04:18:39.053
> 
> 标签：c#, asp.net

我认为 ajaxcontroltoolkit:ajaxfileupload 有太多的错误和衰落。因为我在我的项目中经常使用这个组件，所以我克服了这个控件的许多严重的令人不安的错误和功能。现在，我非常需要在保存之前使用 ajaxfileupload 获取上传的图像宽度和高度，以检查宽度或高度是否正确并根据检索到的信息通知用户图像宽度和高度不兼容，然后阻止该过程走得更远，保存图片。请问有什么想法吗？！

HTML 方面：

```
<asp:AjaxFileUpload ID="AjaxFileUpload1" runat="server"
        onuploadcomplete="AjaxFileUpload1_UploadComplete" ThrobberID="myThrobber" MaximumNumberOfFiles="1" AllowedFileTypes="jpg,jpeg"/> 
```

代码背后：

```
protected void AjaxFileUpload1_UploadComplete(object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
{
    string filePath = "~/upload/" + e.FileName;
    AjaxFileUpload1.SaveAs(filePath);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T08:53:34.233

AjaxFileUpload 只处理上传，但不会为您提供有关文件本身的任何信息。你需要使用类似的东西

```
System.Drawing.Image objImage = System.Drawing.Image.FromFile(Server.MapPath(filePath));
width = objImage.Width;
height = objImage.Height; 
```

如果您不想将文件加载到内存中，您可以检查[如何在不加载图像的情况下在 .NET 中可靠地获取图像尺寸？](https://stackoverflow.com/questions/552467/how-do-i-reliably-get-an-image-dimensions-in-net-without-loading-the-image)或[在不读取整个文件的情况下获取图像尺寸](https://stackoverflow.com/questions/111345/getting-image-dimensions-without-reading-the-entire-file)。

[另一种方法是使用诸如Plupload 之](http://plupload.com/)类的工具或类似工具在客户端检查图像宽度和高度。

# javascript - 带有图像的 Javascript 时钟

> ID：13677084
> 
> 赞同：0
> 
> 时间：2012-12-03T04:20:10.313
> 
> 标签：javascript, html, arrays, date

我正在拔头发：我的 Javascript 时钟不工作。我正在使用 Firebug 查找错误，但没有得到任何输出。

图像文件位于子文件夹`Dual_Months`和`Dual_Numbers`. 我已经添加`document.write();`了我的函数以查看它们是否正在触发，但我没有得到任何响应。如果有人看到任何明显的错误，我将不胜感激。

```
var imageclock=new Object()
imageclock.digits=["num_0.png", "num_1.png", "num_2.png", "num_3.png", "num_4.png", "num_5.png", "num_6.png", "num_7.png", "num_8.png", "num_9.png", "am.png", "pm.png", "colon.png"]
imageclock.months=["dual_jan.png", "dual_feb.png", "dual_mar.png", "dual_apr.png", "dual_may.png", "dual_jun.png", "dual_jul.png", "dual_aug.png", "dual_sept.png", "dual_oct.png", "dual_nov.png", "dual_dec.png"]
imageclock.instances=0
var preloadimages=[]
var preloadmonths=[]
for (var i=0; i<imageclock.months.length; i++){ //preload images
  preloadmonths[i]=new Image()
  preloadmonths[i].src="Dual_Months"+imageclock.months[i]
}
for (var i=0; i<imageclock.digits.length; i++){ //preload images
  preloadimages[i]=new Image()
  preloadimages[i].src="Dual_Numbers"+imageclock.digits[i]
}
imageclock.imageHTML=function(timestring){
//return timestring (ie: 1:56:38) into string of images instead
  var sections=timestring.split("/")
  for (var i=0; i<sections.length; i++){
    if (sections[i] == sections[0])
      sections[i]='<img src="Dual_Months/'+imageclock.months[0]+'" />'
    else if(sections[i].length==1 && sections[i] == sections[1])
      sections[i]='<img src="Dual_Numbers/'+imageclock.digits[0]'" />'+'<img src="Dual_Numbers/'+imageclock.digits[parseInt(sections[i])]+'" />'
    else if(sections[i].length!=1 && sections[i] != sections[0])
      sections[i]='<img src="Dual_Numbers/'+imageclock.digits[parseInt(sections[i].charAt(0))]+'" />'+'<img src="Dual_Numbers/'+imageclock.digits[parseInt(sections[i].charAt(1))]+'" />'
  }
  return sections[0]+'<img src="single_nums/'+imageclock.digits[12]+'" />'+sections[1]+'<img src="single_nums/'+imageclock.digits[12]+'" />'+sections[2]
}
imageclock.display=function(){
  var clockinstance=this
  this.spanid="clockspan"+(imageclock.instances++)
  document.write('<span id="'+this.spanid+'"></span>')
  this.update()
  setInterval(function(){clockinstance.update()}, 1000)
}
imageclock.display.prototype.update=function(){
  var dateobj=new Date()
  var currentdate=dateobj.getMonth()+"/"+dateobj.getDay()
  document.write(currentdate)
  var currenttimeHTML=imageclock.imageHTML(currentdate)
  document.getElementById(this.spanid).innerHTML=currenttimeHTML
}
new imageclock.display(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:31:11.200

您的脚本中有一些语法错误。

`'`在这一行的末尾缺少 a ：

```
sections[i]='<img src="Dual_Months/'+imageclock.months[0]+'" />

sections[i]='<img src="Dual_Months/'+imageclock.months[0]+'" />' 
```

`+`在这一行中缺少一个：

```
sections[i]='<img src="Dual_Numbers/'+imageclock.digits[0]'" />'+'<img src="Dual_Numbers/'+imageclock.digits[parseInt(sections[i])]+'" />'

sections[i]='<img src="Dual_Numbers/'+imageclock.digits[0]+'" />'+'<img src="Dual_Numbers/'+imageclock.digits[parseInt(sections[i])]+'" />' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T04:31:58.520

你的 javascript 得到了 snytax 错误，首先纠正它

```
 if (sections[i] == sections[0])

            sections[i]='<img src="Dual_Months/'+imageclock.months[0]+'" />'

        else if(sections[i].length==1 && sections[i] == sections[1])

        sections[i]='<img src="Dual_Numbers/'+imageclock.digits[0]+'" />'+'<img src="Dual_Numbers/'+imageclock.digits[parseInt(sections[i])]+'" />'

        else if(sections[i].length!=1 && sections[i] != sections[0]) 
```

# c# - 加载 XML 文件返回 System.StackOverflowException

> ID：13677093
> 
> 赞同：1
> 
> 时间：2012-12-03T04:21:57.443
> 
> 标签：c#, xml

我正在读取一个 XML 文件并`TreeView`在 C# 中使用我的数据。我的程序返回错误

> System.Windows.Forms.dll 中出现“System.StackOverflowException”类型的未处理异常。

为什么？

**XML 文件**

```
<ListOfTopics>
  <MainTopic url="index.html" title="Homes">
    <SubTopic url="index.html" title="Sub Topic1"/>
    <SubTopic url="index.html" title="Sub Topic2"/>
    <SubTopic url="index.html" title="Sub Topic3"/>
  </MainTopic>
</ListOfTopics> 
```

**C# 代码**

```
public void LoadTopics()    
{
    XmlDocument xml = new XmlDocument();
    xml.Load("topics.xml");
    int i = 0;

    foreach (XmlElement el in xml.DocumentElement.ChildNodes)
    {           
        TreeNode node = new TreeNode();
        node.ToolTipText = el.GetAttribute("url");
        node.Name = el.GetAttribute("title");
        node.Text = el.GetAttribute("title");
        topicTree.Nodes.Add(node);

        if (el.HasChildNodes)
        {
            foreach (XmlElement es in el.ChildNodes)
            {
                TreeNode nodes = new TreeNode();
                nodes.ToolTipText = es.GetAttribute("url");
                nodes.Name = es.GetAttribute("title");
                nodes.Text = es.GetAttribute("title");
                topicTree.Nodes[i].Nodes.Add(node);
            }

        }
        i++;   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:41:01.597

我运行了您的代码并且没有异常，但是我确实在您的代码中发现了一个错误：

```
topicTree.Nodes[i].Nodes.Add(node); 
```

您正在重新添加父节点，将其更改为：

```
topicTree.Nodes[i].Nodes.Add(nodes); 
```

# c++ - 如何让 C++ 预编译器做一个“循环”

> ID：13677100
> 
> 赞同：0
> 
> 时间：2012-12-03T04:22:25.080
> 
> 标签：c++, precompile

我想简化以下代码：

```
switch (index)
    {
    case 1:
        output = function1();
        break;
    case 2:
        output = function2();
        break;
    case 3:
        output = function3();
        break;
    .... 
```

哪里`index`是编译时间常数。

如果我要使用预编译器宏，我需要使用它的`n`次数，其中`n`的情况是多少。如何将上述代码减少到 O(1) 行代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T04:44:11.757

试试这个（假设函数 1-n 是真实姓名。正如你所说，该索引是编译时间常数）：

```
#define CALLFUNCTION(x) function##x()

output = CALLFUNCTION(1); 
```

**更正**：这不适用于变量，如果直接使用常量则将起作用。如果提供的代码是每个 case 语句中的全部内容，这可能会破坏目的。

根本不需要进行切换。或者，您可以使用模板专业化。

```
template<int index> function();

output = function<index>(); 
```

并为每个索引专门化函数模板。

```
template<> function<1>(){return 1;} // or {return function1();} 
```

如果它不是编译时间常数，则需要像 Fomin Arseniy 建议的那样生成开关。另一种选择是使用函数指针数组

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T05:14:47.147

你不能用宏来做——但这会起作用（我认为）：

```
int (*functions[])() = { &function1, &function2, &function3};

int output = functions[index](); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T04:42:57.413

可能是超宏可以稍微简化你的工作。只需使用代码创建“counter.def”文件：

```
COUNTER(1)
COUNTER(2)
COUNTER(3)
#undef COUNTER 
```

然后在任何情况下使用开关或任何其他重复计数的结构

```
switch(index)
{
    #define COUNTER(i) case i: output = function##i(); break;
    #include "counter.def"
} 
```

# php - 如何解决mysql中拒绝用户的UPDATE命令？

> ID：13677105
> 
> 赞同：0
> 
> 时间：2012-12-03T04:22:52.297
> 
> 标签：php, mysql

如何解决mysql中拒绝用户的UPDATE命令？昨天它正在执行更新操作，但今天它不工作。我正在检查我的权限，但更新在那里。出现此错误的原因是什么？

![在此处输入图像描述](../Images/387f56b18b08e6bcfae211acf9825386.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T04:35:55.790

当您的 mysql 数据库已满时，可能会发生这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T04:35:56.003

尝试以管理员身份执行

```
GRANT UPDATE ON <database name>.* TO <username> 
```

因为您似乎缺少`UPDATE`列表中的 。

或者使用工作台之类的东西来执行此操作。

**编辑**

从上面的评论

```
GRANT UPDATE ON <database name>.* TO 'b2c062bb7cfeaa' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T17:59:48.643

尝试这个

```
GRANT UPDATE ON `database_name`.`table_name` TO `username`@`localhost` 
```

# javascript - 如何将模型字段传递给视图中的 Javascript 函数？

> ID：13677107
> 
> 赞同：1
> 
> 时间：2012-12-03T04:23:09.817
> 
> 标签：javascript, asp.net-mvc, razor, asp.net-mvc-4

今晚我有一个简单的问题一直困扰着我……我有一个 ASP.NET MVC4 + Razor 应用程序。当用户单击单选按钮时，我想将模型中字段“时区”中的字符串值传递给 onclick 处理程序，这是一个 javascript 函数。在 javascript 函数中，我将获取字符串并做一些工作，但现在，我只是弹出一个 alert()。我发现了很多关于必须进行特殊引用的引用，并且我已经尝试了所有这些，但是无论我做什么，警报都没有显示，但是具有单选按钮的表单向我显示了它的有效值时区文本框。

我真的很感谢您帮助找出我做错了什么...如果这是不可能的（为什么？），那么我可以从 javascript 函数中访问模型的值吗？我试过@model.Timezone，但总是有一个空字符串。当我知道这一定很容易时，真的很烦人！无论如何，这里是单选按钮的代码和简单的 javascript 函数。我真的很感谢你的帮助！

谢谢，迈克

```
 @Html.RadioButtonFor(model => model.TimezoneSource, "C",
        new {propertyName = "UpdateTimezoneRadioButton", 
            onClick = "TimezoneClicked(@model.Timezone)" })Update Timezone

function TimezoneClicked(timezone) {
    alert(timezone);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:27:06.743

你不应该这样做

```
 onClick = "TimezoneClicked(@model.Timezone)" 
```

当您在 html 辅助函数中使用它时，它会被视为普通字符串。相反，您应该执行以下操作：

```
onClick = "TimezoneClicked('" + Model.Timezone + "')" 
```

这会将对象中的 Timzone 值传递给函数。如果它仍然是空的，尝试像下面这样打印出来，以确保该属性不为空。

```
<span> @Model.Timezone </span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:59:15.747

你可以试试下面的代码：

```
@Html.RadioButtonFor(model => model.TimezoneSource, "C",
    new {propertyName = "UpdateTimezoneRadioButton", 
        onClick = "TimezoneClicked('" + Model.Timezone + "')" })Update Timezone

function TimezoneClicked(timezone) {
alert(timezone);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T18:11:18.553

如果您需要在函数中获取任何 dom 元素，您可以这样做：

```
document.getElementById('@Html.IdFor(model => model.Draw)')
```

# c++ - 单线程设计还是多线程设计？

> ID：13677111
> 
> 赞同：1
> 
> 时间：2012-12-03T04:24:10.540
> 
> 标签：c++, multithreading, sockets, pthreads, low-latency

所以这是我的场景：我从套接字读取并根据数据包上的内容将数据包放入适当的队列中。因此，如果我有 10 个队列，则将有 10 个 if-else-ifs 或 10 个 switch 语句案例来选择正确的队列。因此，最多可以进行 10 次比较。

另一种方法可能是要求广播器/服务器在 10 个不同的端口上广播，其中来自每个端口的馈送将包含用于单个特定队列的数据包，在我这端，我可以通过单独的线程监听每个套接字（或者我可以使用线程如果某些端口上的流量较少/不均匀，则池）。所以现在我不必选择数据包属于哪个队列，但是现在引入了conext switch的现象。

从这里开始，我的智慧和技术知识阻止了我走得更远。关于哪种方法会表现更好的任何知识？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:09:21.667

如果您使用的是 Windows，请检查 IO 完成端口 (IOCP)，如果您使用的是 linux，请尝试 epoll。这些往往是两个系统上最有效的模型（在一般情况下）。Windows IOCP模型可以通过操作系统很好的绑定到线程池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:26:33.080

这是个人选择。如果流量足够或明显少于第一种方法更好。由于[线程](https://stackoverflow.com/questions/6261910/thread-confinement) [限制](http://www.quora.com/What-is-Thread-Confinement)，它是线程安全的。更容易维护。唯一的问题是 - 如果添加了额外的端口，那么您将不得不修改代码以获得额外的 if 子句。

但是在交通繁忙的情况下，这可能会更好。如果缓冲区已满，则会丢失较小的数据包。根据内核的数量可能会表现得更好，但如果执行得不好，可能会再次出现错误。

如果我是你，我会选择第一个。把事情简单化。

# java - ActionSupport类上的Struts2空指针异常

> ID：13677117
> 
> 赞同：0
> 
> 时间：2012-12-03T04:25:11.100
> 
> 标签：java, spring, struts2, transactions

我目前有两个 ActionSuppport 类，它们都是相同的类，唯一的区别是它们调用不同的服务方法。

当我使用此代码时（BaseAction.java）

```
public class BaseAction extends ActionSupport {

    protected Service services;

    protected String redirectUrl;

    public String getRedirectUrl() {
        return redirectUrl;
    }

    public void setRedirectUrl(String redirectUrl) {
        this.redirectUrl = redirectUrl;
    }

    public void setServices(Service services) {
        this.services = services;
    }
} 
```

Listing.java 扩展 BaseAction.java 一切似乎都很好

```
public class Listing extends BaseAction{
    public String execute(){
        events = services.getEvents();
        return "success";
    }

    List<Event> events;

    public List<Event> getEvents(){ return events; }
} 
```

这是另一个 ActionSupport 类（EventAction.java）

```
public class EventAction extends ActionSupport {

    protected EventService services;

    protected String redirectUrl;

    public String getRedirectUrl() {
        return redirectUrl;
    }

    public void setRedirectUrl(String redirectUrl) {
        this.redirectUrl = redirectUrl;
    }

    public void setEventService(EventService services) {
        this.services = services;
    }
} 
```

然后Listing.java 扩展到EventAction.java

```
public class Listing extends EventAction{
    public String execute(){
        events = services.getEvents();
        return "success";
    }

    List<Event> events;

    public List<Event> getEvents(){ return events; }
} 
```

我收到这个空指针错误。

```
java.lang.NullPointerException
    actions.events.Listing.execute(Listing.java:13)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:446)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:285)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:191)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:252)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:193)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:544)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    org.springframework.orm.hibernate4.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:119)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source) 
```

在 EventAction 类中分配的服务层是这个

```
@Transactional
public class EventService extends Service{
    // So Spring can inject the session factory
    SessionFactory sessionFactory;
    public void setSessionFactory(SessionFactory value) {
        sessionFactory = value;
    }

    // Shortcut for sessionFactory.getCurrentSession()
    public Session sess() {
        return sessionFactory.getCurrentSession();
    }

    @SuppressWarnings("unchecked")
    public List<Event> getEvents() {
        return sess().createQuery("from Event").list();
    }
} 
```

我不知道这是否有帮助，但我的 applicationContext.xml 中有这个

```
<bean id="services" class ="services.Service" scope ="singleton">
    <property name = "sessionFactory" ref = "sessionFactory"/>
</bean>

<bean  class ="services.EventService" scope ="singleton">
    <property name = "sessionFactory" ref = "sessionFactory"/>
</bean> 
```

为什么我会收到此错误？两个动作支持等级是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:55:15.073

根据评论将其发布为答案：

```
<bean  class ="services.EventService" scope ="singleton">
    <property name = "sessionFactory" ref = "sessionFactory"/>
</bean> 
```

Bean 是在没有任何 ID 的情况下创建的，因为在这种情况下，ID 将由 Spring 在内部创建，但与操作类中使用的定义不匹配。

向 bean 提供 ID 解决了问题。

# java - 字符串二进制到十六进制 Java

> ID：13677121
> 
> 赞同：1
> 
> 时间：2012-12-03T04:25:27.287
> 
> 标签：java, string, binary, hex

我有看起来像这样的代码

```
 public static void main(String[] args) {
    String string= "11011100010000010001000000000000";
   String string1= "00000000010000110000100000101100";

    System.out.println(Integer.toHexString(Integer.parseInt(string1,2)));

    System.out.println(Integer.toHexString(Integer.parseInt(string,2)));

} 
```

第一个字符串转换很好，但第二个有 java.lang.NumberFormatException 错误不知道问题是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T04:28:54.817

试试这个：

```
Long.toHexString(Long.parseLong(string,2)) 
```

（从 parsLong 编辑为 parseLong）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T04:47:17.313

值得一提的是，您还可以使用`BigInteger`该类：

```
String string  = "11011100010000010001000000000000";
String string1 = "00000000010000110000100000101100";

System.out.println(new BigInteger(string1, 2).toString(16));
System.out.println(new BigInteger(string, 2).toString(16)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T04:29:17.077

您可以使用`Long`代替`Integer`, (`Long.parseLong`和`Long.toHexString`方法)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T04:31:53.007

当 32 个字符的二进制数的最高位设置为`1`时，结果值超出了 支持的正数范围，`int`不能再被解释为有效整数。根据文档，这会导致异常：

如果发生以下任何一种情况，则会引发 NumberFormatException 类型的异常：

> *   第一个参数为空或长度为零的字符串。
> *   基数小于 Character.MIN_RADIX 或大于 Character.MAX_RADIX。
> *   字符串的任何字符都不是指定基数的数字，除非第一个字符可能是减号“-”（“\u002D”），前提是该字符串的长度大于 1。
> *   **字符串表示的值不是 int 类型的值。**（重点是我的）

为了输入这个负二进制值，`-`在数字前面使用符号，并将剩余位转换为 2-s 补码表示。

如果您需要超过 32 位的数字，或者您希望该值继续被解释为正数，则需要切换到 64 位整数数据类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T04:31:58.967

如果要解析为整数，则范围应为

`10000000000000000000000000000000`到`01111111111111111111111111111111`

# .htaccess - .htaccess 重定向代码

> ID：13677122
> 
> 赞同：2
> 
> 时间：2012-12-03T04:25:40.977
> 
> 标签：.htaccess, redirect, url-rewriting

我目前对我的 htaccess 文件使用以下代码。它重定向到[https://www.example.com](https://www.example.com)

```
#if not forum.example.com and not ssl then redirect
RewriteCond %{HTTP_HOST} !^forum\. 
RewriteCond %{SERVER_PORT} !443
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R,L]

#redirect if https://forum.example.com
RewriteCond %{HTTP_HOST} ^forum\.
RewriteCond %{SERVER_PORT} 443
RewriteRule ^(.*)$ http://forum.%{HTTP_HOST}/$1 [R,L] 
```

我遇到的问题是当我去

```
http://www.example.com 
```

，此代码使其重定向到

```
https://www.www.example.com 
```

代替

`https://www.example.com`.

有谁知道我该如何解决这个问题？

如果您需要其他信息来提供帮助，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:31:42.157

如果满足 2 个否定条件，则执行第一个重写规则： Not`forum`和 not `SSL`，但重写总是插入**www**，即使它已经在 URL 中。之前没有检查过。

我认为在不修改实际规则的情况下纠正问题的最佳方法，除了从第一个替换中删除**www**之外，是在开头添加另一个规则，如下所示：

```
#non-www to www
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example\.com/?$ 
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301]

#if not forum.example.com and not ssl then redirect
RewriteCond %{HTTP_HOST} !^forum\. 
RewriteCond %{SERVER_PORT} !443
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R,L] 

#redirect if https://forum.example.com
RewriteCond %{HTTP_HOST} ^forum\.
RewriteCond %{SERVER_PORT} 443
RewriteRule ^(.*)$ http://forum.%{HTTP_HOST}/$1 [R,L] 
```

What the added rule does, is to rewrite any URL without `www` to one with `www`. The resulting URL is then presented to the other rules.

I don't know if these 2 last rules work as intended, I guess they do. I am just trying to solve the **www** duplication issue in the question.

Hope this helps.

# git - 强制 git 运行 post-receive 钩子，即使一切都是“最新的”

> ID：13677125
> 
> 赞同：74
> 
> 时间：2012-12-03T04:26:29.840
> 
> 标签：git

即使我没有要推送的新提交，如何强制在服务器上`git`运行挂钩？`post-receive`

## 背景

我使用 git 自动将网站部署到服务器。我在服务器的受保护区域中有一个裸仓库，还有一个`post-receive`挂钩，可以检查内容并将某些文件系统地复制到`public_html`文件夹中。（受[本教程](http://toroid.org/ams/git-website-howto)启发）

我厌倦了`post-receive`在服务器上手动修改钩子，所以我的`post-receive`钩子现在实际上从 repo 复制了一个新版本：

```
#!/bin/sh

rm -rf ~/../protected/*
GIT_WORK_TREE=~/../protected git checkout -f

# Rewrite over this file with any updates from the post-receive file
cp ~/../protected/post-receive hooks/post-receive

# Delete public_html
# Copy stuff public_html 
```

当然，问题是新的`post-receive`钩子永远不会运行。一个看似简单的解决方案只是再次推送，但现在一切都已经是最新的了。这很烦人，因为每次更新`post-receive`钩子时都需要我伪造一个新的提交。有没有办法在`post-receive`不伪造提交或`ssh`ing 的情况下调用钩子？

## 我试过的

```
git push
git push -f 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2015-02-24T18:12:34.243

# 使用'--allow-empty'

在初始推送替换脚本后，您可以执行以下操作：

```
git commit --allow-empty -m 'push to execute post-receive' 
```

该`--allow-empty`标志覆盖了 git 的默认行为，即在没有更改时阻止您进行提交。

**使用别名，让您的生活更轻松**

将以下内容添加到`~/.gitconfig`

```
[alias]
    pushpr = "!f() { git push origin master;git commit --allow-empty -m 'push to execute post-receive';git push origin master; }; f" 
```

**现在就做`git pushpr`**

```
git pushpr 
```

这会将任何更改推送到 master，在您的情况下，这将触发您的 post 接收替换脚本，然后它将再次推送（使用`--allow-empty`标志），然后执行您更新的`post-receive`脚本。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-08-07T00:25:55.327

I know this probably going to be considered "dangerous" but I like to live on the edge.

I just delete the remote branch and then push it again. Make sure your local branch is up-to-date first to limit the chance of losing stuff.

So if I want to trigger post-receive, in my case to get the testing branch to provision, all I do is:

```
$ git push origin :testing
$ git push origin testing 
```

Don't accept this as the answer though. It's more of a just FYI thing.

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-02-27T22:30:18.687

如果您想避免做出虚假的*新*提交，您可以简单地使用

```
git commit --amend --no-edit 
```

这将修改最后一个提交记录，您将能够使用`git push -f`（假设您的回答可以覆盖）。

*   **方便：**它不会创建额外的提交
*   **好：**它不使用远程仓库中的挂钩的显式路径
*   **不好：**您覆盖历史记录，这在您的用例中很好，但不应该在共享存储库中使用

* * *

我相对经常使用这个命令来修复推送前最后一次提交中的某些内容，所以我为它起了一个别名：

```
git config --global alias.amend 'commit --amend --no-edit' 
```

现在我可以直接将它用于您的用例（`git amend`），或者

*   将（所有）修改后的文件添加到最后一次提交：`git amend -a`
*   修改消息：`git amend -m 'better message'`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-04-13T07:47:04.727

恐怕您必须 ssh 到服务器并手动运行挂钩脚本。如果没有添加任何内容（即当 git 打印*Everything up-to-date*`git push`时） ，不会使服务器运行*pre-push*、*pre-receive*和*post-receive*钩子。

 *其余的答案是关于版本跟踪*post-receive*钩子，因此您可以修改它而无需 ssh 到服务器。

`do-post-receive`向本地存储库添加一个名为的 shell 脚本：

```
$ ls -ld .git
$ echo 'echo "Hello, World!"' >do-post-receive
$ git add do-post-receive
$ git commit do-post-receive -m 'added do-post-receive' 
```

`hooks/post-receive`将服务器上的钩子替换为：

```
#! /bin/sh
while read OLDID NEWID BRANCH; do
  test "$BRANCH" = refs/heads/master && eval "$(git show master:do-post-receive)"
done 
```

（确保`chmod 755 hooks/post-receive`在服务器上。）

将您的更改从本地存储库推送到服务器，并观察您的`do-post-receive`代码运行：

```
$ git push origin master
...
remote: Hello, World!
... 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-08T00:10:50.577

我尝试了[空提交](https://stackoverflow.com/a/28703197/1197775)并[删除了上传分支](https://stackoverflow.com/a/15985535/1197775)。

但是直接 ssh 命令呢：

```
ssh your_host /path/to/your_repo/hooks/post-receive 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-09T18:33:48.663

我做了一个 bash 函数来做到这一点。它假定您具有 ssh 访问权限，可以`~/.ssh/config`进行相应设置。默认远程是原点

```
kick-git() {
    remote="${1:-origin}"
    ssh $(echo $(git remote get-url "$remote")/hooks/post-receive | tr ':' ' ')
} 
```

源和运行`kick-git [remote]`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-12-05T17:24:56.650

就我而言，我登录到远程并运行：

`$ sh project.git/hooks/post-receive`

工作正常！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-02-28T01:11:29.867

接收后是人工命令响应的错误位置。

您希望您的服务器端好东西在预接收出口中，这取决于更新的参考 - 例如`git update-ref refs/commands/update-hooks @`在服务器上执行，然后您可以例如`git push server +@:commands/update-hooks`，并且在服务器的预接收中您可以

```
while read old new ref; do case $ref in
commands/update-hooks)
        maybe check the incoming commit for authorization
        update hooks here
        echo the results from the update
        denypush=1
        ;;
refs/heads/master)
        extreme vetting on master-branch updates here
        ;;
esac; done

((denypush)) && exit $denypush 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-17T04:46:40.110

我喜欢 Jamie Carl 的建议，但它不起作用，我得到了错误：

> remote: error: 默认情况下，拒绝删除当前分支，因为下一个错误: 'git clone' 不会导致任何文件被检出，造成混乱。

就我而言，我正在我的本地主机上针对裸存储库测试接收后挂钩。警告/超级重要，*仅*在**`remote`**服务器位置运行此命令！

```
git update-ref -d refs/heads/develop 
```

它将删除开发分支的引用（您可能还需要删除为该分支部署的任何文件），然后您可以继续为该分支执行`git push deploy_localtest develop`或任何您想要的推送命令。*

# objective-c - NSMutable 对象数组中的 NSMutable 对象数组的计数返回 0

> ID：13677127
> 
> 赞同：0
> 
> 时间：2012-12-03T04:26:35.663
> 
> 标签：objective-c, xcode

我有一个 NSObjects (mapArray) 数组，并且关注的对象位于位置 0 (MAIN_MAP)。在每个 NSObject 中，都有一个名为 moonGateArray 的 NSMutableArray（具有 @property 和 @synthesize），我在其中添加了另一个名为 Moongate 的 NSObject。但是，moonGateArray 的计数一直为零。为什么会这样？

代码：

```
for (int i = 0; i < 8; i++) {
    [[[mapArray objectAtIndex:MAIN_MAP] moonGateArray] addObject:[Moongate new]];
}
[[[[mapArray objectAtIndex:MAIN_MAP] moonGateArray] objectAtIndex:0] setPosition:9 :3];
[[[[mapArray objectAtIndex:MAIN_MAP] moonGateArray] objectAtIndex:1] setPosition:16 :8];
[[[[mapArray objectAtIndex:MAIN_MAP] moonGateArray] objectAtIndex:2] setPosition:11 :6];
[[[[mapArray objectAtIndex:MAIN_MAP] moonGateArray] objectAtIndex:3] setPosition:16 :13];
[[[[mapArray objectAtIndex:MAIN_MAP] moonGateArray] objectAtIndex:4] setPosition:13 :10];
[[[[mapArray objectAtIndex:MAIN_MAP] moonGateArray] objectAtIndex:5] setPosition:3 :1];
[[[[mapArray objectAtIndex:MAIN_MAP] moonGateArray] objectAtIndex:6] setPosition:3 :12];
[[[[mapArray objectAtIndex:MAIN_MAP] moonGateArray] objectAtIndex:7] setPosition:22 :17];
NSLog(@"%i",[[[mapArray objectAtIndex:MAIN_MAP] moonGateArray] count]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:50:24.663

您可能尚未初始化 mapArray 或 moonGateArray，这就是您获得 0 计数的原因。在objective-c调用nil对象上的count没有给出任何异常，而是返回0。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:52:41.243

但是，对于您的计数 = 0，这很简单，您错过了分配/初始化您使用的任何数组。

您是在创建 2D 阵列还是 3D 阵列？

让你的逻辑变得混乱？

编辑：

如果您的 MAIN_APP 始终为 0，为什么您需要一个数组、一个简单的对象，或者您可以使用字典而不是存储在 2D 数组中。但是我可以猜到整个逻辑。

我想再补充一点关于你的命名约定......命名后缀或为你的变量加上数组、按钮等前缀。你可以使用“maps”、“moonGates”，所有复数都象征着它将成为一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:25:43.780

很可能您没有正确初始化数组。让您的喜好更容易，并稍微更改您的代码，使其更易于阅读和调试。您不会因为编写高度嵌套的方法调用而获得积分。它让你的生活更加艰难。拆分代码以使事情变得更容易。

改变这个：

```
for (int i = 0; i < 8; i++) {
    [[[mapArray objectAtIndex:MAIN_MAP] moonGateArray] addObject:[Moongate new]];
} 
```

对此：

```
// replace "SomeMapClass" with your actual class name
SomeMapClass *mainMap = mapArray[MAIN_MAP];
NSMutableArray *moonArray = mainMap.moonGateArray;
for (int i = 0; i < 8; i++) {
    [moonArray addObject:[Moongate new]];
} 
```

现在您可以在调试器中运行此代码或添加 NSLog 语句并验证流程的每个步骤。

是否`mapArray`正确初始化？属性是否`moonArray`初始化？

请记住，简单地定义一个属性并不会真正创建对象。你仍然需要初始化它。

# javascript - `req` 和 `res` 来自哪里？

> ID：13677130
> 
> 赞同：1
> 
> 时间：2012-12-03T04:26:52.660
> 
> 标签：javascript, node.js

*注意：这个问题几乎没有 jQuery、Drupal 或 node.js，它更多的是关于“框架如何实现 X，其中 X 是我提到的任何框架也提供的东西。*

我看到了一个示例 node.js 代码，如下所示：

```
var http = require('http');
var server = http.createServer();
server.listen(8000);
server.on('request', function(req, res) {
    // 在这里用 req 和 res 做一些事情
});

```

没有明显的地方 req 和 res 来自哪里。其实是什么`'request'`意思？它是从哪里供应的？

我在 jQuery .get() 和 .post() 函数中注意到了类似的事情，并且查看源代码并没有像我想要的那样有帮助。我什至已经在 Drupal 中看到过这种情况；`theme layer`我用特定的命名约定在or中定义了一个函数`module_hook`，但是参数突然出现，并且在这些魔术变量中存在可预测的数据结构（在手册中指定）。

那么这种技术叫什么，它是如何工作的。我听说过`Dependency Injection`……是这个吗？如果是，你能用 n00b 术语解释它是如何完成的吗？

这特别令人困惑，因为我从一开始就在程序中编码，我们总是知道变量来自哪里以及函数是如何被调用的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T04:29:15.217

框架为您构造对象，并将它们传递给您的回调。

**注意** `req`，`res`只是参数名称；你可以称它们为`spam`and `eggs`，或`hocus`and `pocus`，这很重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T04:59:13.977

> 其实是什么`request`意思？它是从哪里供应的？

每当您想访问一个网站时，您都在使用一种特殊的协议，即[超文本传输​​协议 (HTTP)](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)。该协议主要使用两件事：

1.  来自客户端的问题，例如“您的服务器上/是什么？” （*请求*）
2.  来自服务器的回答，例如“它是文本/html，长度为 2000 字节，这是文档”（*响应*）。

这个请求-响应模型直接在 node.js 中使用，因为您使用的服务器是 HTTP 服务器。

> [...] 你能用 n00b 术语解释它是如何完成的吗？

你知道什么是主循环或[事件循环](http://en.wikipedia.org/wiki/Event_loop)吗？几乎每个 GUI 应用程序都有一个。它基本上是这样的循环：

```
while(waitForNewEvent(&event)){
    handleMsg(&event);
} 
```

这个事件可以是任何东西，从键盘输入到另一个试图把你的窗口放在前面的软件。它也可以是“你准备好待机了吗？”。

node.js 在其服务器实现中使用了这样的事件循环。`server.on('request', callback)`基本上告诉 node.js 你想`callback`在请求到来时被使用：

```
while(waitForNewEvent(&event)){
    if(event == "request"){
        callback(request,&response);
        responseToClient(response);
    }
} 
```

### 实习生例子

或者更简单：想想一个实习生，他只是在建筑物里转圈子。他是事件循环。现在在你的服务器机房里，有人告诉他每个请求都应该提交给他们。他把这件事写下来，并继续他永无止境的旅行。

然后有人站在大楼前，想查看他的银行账户。他只需将请求放入邮箱，实习生就会冲到服务器机房，告诉技术人员特定站点已被请求，并为他们提供必要的信息。然而，他需要等待他们的回应，因为他们的回应不在他的名单上。

技术人员检查请求并发现用户不符合给定请求的资格 (*)。他们准备了一条错误消息并将其提供给实习生。他现在回到大楼前面，将错误消息提供给第一个客户，并准备好接收其他消息。

(*)：此时他们可能需要检查数据库中的某些内容，这可能需要一些时间。如果他们准备好了，他们可以告诉实习生稍后回来给他打电话。在这种情况下，实习生可以继续他的工作，直到技术人员准备好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T04:34:18.840

您正在将函数传递给`.on()`函数。当事件发生时，一些内部代码会调用您传递的函数，并为其提供参数。

这是一个例子。该`server`对象有一个名为 的方法`on`。它需要一个`name`字符串和一个`callback`函数。

它`setTimeout`在调用它给出的回调之前等待一秒钟。当它调用它时，它会将`name`所提供的内容以及静态消息传递给它`"hi there"`。

```
 // Think of this as the internal Node code...
var server = {         // v---this will be the function you pass
    on: function(name, callback) {
            setTimeout(function() {
                callback(name, "hi there"); // here your function is invoked
            }, 1000);
        }
}; 
```

* * *

所以在这里我们调用`.on()`，并将名称`"foo"`和`callback`函数传递给它。当`callback`被调用时，它会得到`name`, 和`"hi there"`消息。

```
 // ...and this is your code.
server.on("foo", function(name, message) {
    console.log(name, message);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T04:39:11.017

它们是“请求”和“响应”的缩写。许多 Web 框架的典型做法是将这两个对象传递到请求处理方法（操作或您想要调用的任何内容）中。

# ruby-on-rails - Rails SQLite3 重复列 - 树屋教程

> ID：13677131
> 
> 赞同：1
> 
> 时间：2012-12-03T04:27:05.063
> 
> 标签：ruby-on-rails, ruby, sqlite, devise

我刚刚开始了一个关于简单 Ruby 应用程序的 Treehouse 教程。为了提供上下文，我之前不得不删除并重新开始这个项目，我删除了主应用程序文件夹并重新开始。

按照教程，我们创建了一个用户数据库，其中包括所有设计包含的表（：电子邮件、：名称等）。我得到的错误表明我有一个重复的列名。在查看和修改后，我尝试注释掉问题列，以查看迁移中的事情是否会向前发展，但它只会为下一行提供相同的错误。

有几次我试图删除数据库，重新创建并重新迁移，但我遇到了同样的问题。

理想情况下，我只想删除数据库并重新创建它们，但这似乎不是我能做的事情。

这是错误：

```
SQLite3::SQLException: duplicate column name: email: ALTER TABLE "users" ADD "email" varchar(255) DEFAULT '' NOT NULL
/Users/pbj/Desktop/code/rails/treebook/db/migrate/20121130035155_add_devise_to_users.rb:5:in `block in up'
/Users/pbj/Desktop/code/rails/treebook/db/migrate/20121130035155_add_devise_to_users.rb:3:in `up'
Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

当我从 Devise 生成用户集时，它还给了我 create_status.rb、devise_create_user.rb 和 add_devise_to_users.rb（这是有问题的文件）。删除设计并重新开始的想法掠过我的脑海，但我已经完成了让我遇到这个新错误的事情。

如果这对所有经验丰富的程序员来说有点初级，请道歉，但如上所述，我正在学习，但刚刚脱离了本教程的原始路径。

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:36:52.093

我认为尽管`db/migrate/0000-00000_create_user.rb`您已经向您的模型添加了另一个`add_email_to_users`迁移。因此，检查您`create_user.rb`的 db/migration 文件夹并查看 email 列是否已经存在，然后检查其他迁移文件，例如`add_email_to_users.rb`db/migrate 文件夹，如果您发现这样的额外文件，则将`add_email migration`其删除。

最后重命名/删除您的`development.sqlite3`文件并尝试`rake db:migrate`从头开始。

这可能会帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T08:05:36.233

我正在学习相同的课程，我认为错误在于 Ruby 4 刚刚问世，它在 migrate 目录上有一个重复的行，我删除然后运行 ​​rake db:migrate。它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-07T16:47:31.253

您的错误消息是这样说的：

```
duplicate column name: email: ALTER TABLE "users" ADD "email" varchar(255) DEFAULT '' NOT NULL 
```

您的迁移文件（然后是一些随机数...）_add_devise_to_users.rb 正在添加您现在应该注释掉的这些行

```
# t.string :email,              null: false, default: ""

# add_index :users, :email,                unique: true 
```

这将允许您现在使用此命令进行迁移

```
rake db:migrate 
```

如果您仍在苦苦挣扎并且不介意破坏和重新创建数据库，您可以这样做以重新开始

```
rake db:drop db:create db:migrate 
```

希望这可以帮助！

# apache - Apache Velocity - 找不到资源异常

> ID：13677132
> 
> 赞同：1
> 
> 时间：2012-12-03T04:27:11.820
> 
> 标签：apache, servlets, tomcat7, velocity

我需要生成一些自动邮件，所以我想为这个任务使用速度。我已经将所有速度 jar 复制到 lib 文件夹并创建了一个 hello.vm 模板并放在 WEB-INF/templates 文件夹中。下面是异常我正进入（状态，

```
org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'hello.vm'
userCount incremented to :1
    at org.apache.velocity.runtime.resource.ResourceManagerImpl.loadResource(ResourceManagerImpl.java:474)
    at org.apache.velocity.runtime.resource.ResourceManagerImpl.getResource(ResourceManagerImpl.java:352)
    at org.apache.velocity.runtime.RuntimeInstance.getTemplate(RuntimeInstance.java:1533)
    at org.apache.velocity.runtime.RuntimeInstance.getTemplate(RuntimeInstance.java:1514)
    at org.apache.velocity.app.VelocityEngine.getTemplate(VelocityEngine.java:373)
    at indian.test.handleRequest(test.java:34)
    at org.apache.velocity.tools.view.VelocityViewServlet.doRequest(VelocityViewServlet.java:217)
    at org.apache.velocity.tools.view.VelocityViewServlet.doGet(VelocityViewServlet.java:182)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at listener.trimresponse.doFilter(trimresponse.java:46)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

我尝试了使用类加载器/webapps 加载资源的所有其他方法，但错误仍然存​​在。我使用的是 netbeans 7.2.x 和 tomcat 7.27。感谢有人可以为此提出建议。

下面是我的速度属性文件，

```
resource.loader = file
file.resource.loader.class = org.apache.velocity.runtime.resource.loader.FileResourceLoader
file.resource.loader.path = C:\Users\kiran\Desktop\Netbeans Projects\ourstory\web\WEB-INF\templates
file.resource.loader.cache = true
file.resource.loader.modificationCheckInterval = 2
runtime.log=/WEB-INF/logs/velocity.log 
runtime.log.logsystem.class=org.apache.velocity.runtime.log.Log4JLogSystem
runtime.log.logsystem.log4j.pattern=%d - %m%n
runtime.log.logsystem.log4j.file.size=10000
runtime.log.logsystem.log4j.file.backups=1 
```

下面是我正在使用的 servlet

```
import java.util.Properties;
import javax.servlet.http.*;
import org.apache.velocity.Template;
import org.apache.velocity.VelocityContext;
import org.apache.velocity.app.VelocityEngine;
import org.apache.velocity.context.Context;
import org.apache.velocity.tools.view.VelocityViewServlet;

public class test extends VelocityViewServlet {
    private String htmlTemplate = "hello.vm";

    VelocityContext context = new VelocityContext();

    @Override
    public Template handleRequest(HttpServletRequest request,
            HttpServletResponse response,
            Context context) {
   //    Properties props = new Properties();
    //    props.setProperty("resource.loader", "class");
    //    props.setProperty("class.resource.loader.class", "org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader");
    //    props.setProperty("webapp.resource.loader.path", "/WEB-INF/templates/");

        VelocityEngine engine = new VelocityEngine();

        engine.init();

        Template template = null;

        try {
            context.put("name", "Velocity Test");           
                    template = engine.getTemplate(htmlTemplate);
           } catch (Exception e) {
             e.printStackTrace();
            System.err.println("Exception caught: " + e.getMessage());
        }
        return template;
    }
} 
```

它的简单 servlet 但由于某种原因我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T15:35:44.343

（在评论和编辑中回答。请参阅[没有答案的问题，但问题在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 更新已解决。
> 
> 最后在浪费了 2 天时间并拔出很多头发并多次敲打头部之后，它解决了。这是我为解决这个问题所做的，添加了几个日志语句以确保它指向正确的模板文件夹，然后粘贴模板文件的绝对路径。注意反斜杠和正斜杠。需要记录文件夹路径并查看它的确切位置，然后继续调试。修复这么简单的东西真是让人头疼。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author kiran
 */
import java.io.File;
import java.util.Enumeration;
import java.util.Properties;
import javax.servlet.http.*;
import org.apache.velocity.Template;
import org.apache.velocity.app.VelocityEngine;
import org.apache.velocity.context.Context;
import org.apache.velocity.tools.view.VelocityViewServlet;

public class Hellotest extends VelocityViewServlet {

    @Override
    public Template handleRequest(HttpServletRequest request,
            HttpServletResponse response,
            Context context) {
        Properties prop = new Properties();
  //      prop.put("resource.loader", "class");
  //      prop.put("class.resource.loader.class", "org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader");
        String absolutePath = new File(Thread.currentThread().getContextClassLoader().getResource("").getFile()).getParentFile().getParentFile().getPath();
        prop.put("file.resource.loader.path", absolutePath + "\\templates\\");
        System.out.println("absolute path is : " + absolutePath);       
        System.out.println("keyset is : " + prop.keySet()); 
        Enumeration em = prop.keys();
        while (em.hasMoreElements()) {
            String str = (String) em.nextElement();
            System.out.println(str + ": " + prop.get(str));
        }
        VelocityEngine Velocity = new VelocityEngine();
        Velocity.init(prop);
        Template template = null;
        context.put("name", "Velocity Test");
        try {
            System.out.println("absolute path inside is : " + context); 
            template = Velocity.getTemplate("hello.vm","UTF-8");
        } catch (Exception e) {
            e.printStackTrace();
            System.err.println("Exception caught: " + e.getMessage());
        }

        return template;
    }
} 
```

> 这是更新的速度属性文件，

```
resource.loader = file
file.resource.loader.class = org.apache.velocity.runtime.resource.loader.FileResourceLoader
file.resource.loader.cache = true
file.resource.loader.modificationCheckInterval = 2 
```

> 最后我把模板放在网页文件夹下。也许我会尝试在 web-inf 中推送它，看看效果如何。鉴于我们正在公开它，将模板保留在网页下并不是一件好事。

# javascript - 具有属性长度的 JQuery HasAttribute 选择器

> ID：13677133
> 
> 赞同：1
> 
> 时间：2012-12-03T04:27:14.160
> 
> 标签：javascript, html, jquery, tooltip, jquery-events

目前我正在为我的网站开发一个自定义工具提示。它很重，所以它有大约 300 个元素，每页都有标题。它与这段代码配合得很好：

```
var title="";
$( document ).delegate( "[title]", "mouseover", function ( event ) {
    title = $( this ).attr( "title" );
    $( "#tooltip-div" ).delay( 250 ).animate( { top: newTop, opacity: 1 }, 'fast' );
 } ); 
```

但我面临的问题是：不幸的是，页面中有很多元素具有标题属性，但为空。例如：

```
<input type="image" id="clearBtn" title="" src="../../Images/unsearch.png" onclick="clearFilter();"> 
```

对于此元素，我的自定义工具提示显示为空值。所以我想知道是否有任何方法可以选择具有“title”属性且该属性不为空的元素。

所以我想排除上面显示的元素。有没有办法直接使用 JQuery 选择器来做到这一点，以确保我只将事件绑定到我想要的元素，除了检查事件处理程序中 title 属性的长度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T04:32:28.037

这是一个可能的解决方案，需要 a`[title]`和 a `[title!='']`。

```
var title="";
$( document ).delegate("[title][title!='']", "mouseover", function ( event ) {
    title = $( this ).attr( "title" );
    $( "#tooltip-div" ).delay( 250 ).animate( { top: newTop, opacity: 1 }, 'fast' );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:06:05.327

先前的解决方案（类似于使用[:not 来自 CSS 3 的选择器](http://www.w3schools.com/cssref/sel_not.asp)）是有效的，但它没有考虑以下情况（[参见 jsfiddle 的示例](http://jsfiddle.net/5hbjp/)）：

```
<a href="#" title=' '>anchor 1</a>
<span title='  '>anchor 2</span> 
```

因此，如果您想对标题值进行彻底检查，您可以使用长度和修剪，但使用 jquery 每种方法：

```
$('[title]').each(function() {
  var title = $(this).attr('title').trim();
  if (title =! '') {
    $(this).on("mouseover", function(event) {
      title = $( this ).attr( "title" );
      $("#tooltip-div").delay( 250 ).animate( { top: newTop, opacity: 1 }, 'fast' );
    })
  }

}); 
```

另外，请注意，[从 jQuery 1.7 开始，委托方法已被 .on() 方法取代](http://api.jquery.com/delegate/)

# python - 在 Python 中为 edmonds karp 最大流量算法创建容量图

> ID：13677136
> 
> 赞同：1
> 
> 时间：2012-12-03T04:27:50.723
> 
> 标签：python, algorithm, data-structures, max-flow, edmonds-karp

在我深入探讨这个问题之前，这里有一些我已经拥有的背景信息：

-我首先创建了一个基于美国城市的无向邻接矩阵图，边权重是计算距离（通过距离公式实现）。

-我还使用 prim 算法实现了最小生成树。

现在我需要实现我拥有的 Edmonds Karp 最大流量算法，但我对如何根据我拥有的数据创建容量图以实现以下代码中使用的算法感到困惑：

```
def edmonds_karp(C, source, sink):
    n = len(C) # C is the capacity matrix
    F = [[0] * n for i in xrange(n)]
    # residual capacity from u to v is C[u][v] - F[u][v]

    while True:
        path = bfs(C, F, source, sink)
        if not path:
            break
        # traverse path to find smallest capacity
        flow = min(C[u][v] - F[u][v] for u,v in path)
        # traverse path to update flow
        for u,v in path:
            F[u][v] += flow
            F[v][u] -= flow
    return sum(F[source][i] for i in xrange(n))

def bfs(C, F, source, sink):
    queue = [source]                 
    paths = {source: []}
    while queue:
        u = queue.pop(0)
        for v in xrange(len(C)):
            if C[u][v] - F[u][v] > 0 and v not in paths:
                paths[v] = paths[u] + [(u,v)]
                if v == sink:
                    return paths[v]
                queue.append(v)
    return None 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:23:27.273

Edmonds-Karp 算法所需要做的就是将所有边的权重更改为 1，因为在此问题中不需要它们来找到城市之间的边连通性。边权重为 1 的城市图将成为我的容量图。Edmonds-Karp 算法也需要有一个有向图。

# android - Android Eclipse android.view.InflateException 二进制 XML 文件行 #2 膨胀类错误

> ID：13677137
> 
> 赞同：1
> 
> 时间：2012-12-03T04:28:26.750
> 
> 标签：android, eclipse

所以我有一个应用程序，它有一个 MySQL，PHP 登录..它昨天工作得很好，但是今晚每当我尝试登录时都会给我这个错误：

这是我的 LogCat：

```
 12-02 23:20:57.259: D/dalvikvm(10592): GC_CONCURRENT freed 65K, 52% free 2617K/5379K, external 1565K/2077K, paused 7ms+2ms
12-02 23:21:03.709: E/JSON(10592): {"tag":"login","success":1,"error":0,"uid":"50bc1f349f8b78.26242231","user":{"name":"jon","email":"jon","created_at":"2012-12-02 22:40:36","updated_at":null}}n
12-02 23:21:03.809: D/AndroidRuntime(10592): Shutting down VM
12-02 23:21:03.809: W/dalvikvm(10592): threadid=1: thread exiting with uncaught exception (group=0x2aac8560)
12-02 23:21:03.839: E/AndroidRuntime(10592): FATAL EXCEPTION: main
12-02 23:21:03.839: E/AndroidRuntime(10592): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.groupone.the.health.effect/com.groupone.the.health.effect.DashboardActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class com.groupone.the.health.effect.dashboard
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.os.Looper.loop(Looper.java:123)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.app.ActivityThread.main(ActivityThread.java:3701)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at java.lang.reflect.Method.invokeNative(Native Method)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at java.lang.reflect.Method.invoke(Method.java:507)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at dalvik.system.NativeStart.main(Native Method)
12-02 23:21:03.839: E/AndroidRuntime(10592): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class com.groupone.the.health.effect.dashboard
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.app.Activity.setContentView(Activity.java:1657)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at com.groupone.the.health.effect.DashboardActivity.onCreate(DashboardActivity.java:27)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
12-02 23:21:03.839: E/AndroidRuntime(10592):    ... 11 more
12-02 23:21:03.839: E/AndroidRuntime(10592): Caused by: java.lang.ClassNotFoundException: com.groupone.the.health.effect.dashboard in loader dalvik.system.PathClassLoader[/data/app/com.groupone.the.health.effect-2.apk]
12-02 23:21:03.839: E/AndroidRuntime(10592):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
12-02 23:21:03.839: E/AndroidRuntime(10592):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
12-02 23:21:03.839: E/AndroidRuntime(10592):    ... 19 more
12-02 23:21:03.899: D/dalvikvm(10592): GC_CONCURRENT freed 224K, 50% free 2870K/5703K, external 1565K/2077K, paused 2ms+14ms 
```

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<com.groupone.the.health.effect.dashboard
     xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#3b3b3b">

    <TextView android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:text="WELCOME"
              android:textSize="40dip"
              android:gravity="center"
              android:layout_marginTop="20dip"/>

    <Button android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Log Me Out"
        android:textSize="20dip"
        android:textColor="#21dbd4"
        android:textStyle="bold"
        android:id="@+id/btnLogout"
        android:layout_marginTop="80dip"
        android:background="@null"/>

    <Button
        android:id="@+id/btn_news_feed"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/healthbook"
        android:text="Activities" />

    <Button
        android:id="@+id/btn_messages"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/mental"
        android:text="Mental Input" />

    <!--  Events Button -->
    <Button
        android:id="@+id/btn_events"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/graph"
        android:text="Results" />

    <!--  Photos Button -->
    <Button
        android:id="@+id/btn_photos"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/doctor"
        android:text="Map" />

    <!--  Friends Button -->
    <Button
        android:id="@+id/btn_friends"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/btn_facebook"
        android:text="Facebook" />

    <!--  Messages Button -->

    <!--  Places Button -->
    <Button
        android:id="@+id/btn_places"
        style="@style/DashboardButton"
        android:drawableTop="@drawable/twitter_logo"
        android:text="Health Tweets" />

</com.groupone.the.health.effect.dashboard> 
```

这是我的.LoginActivity：

```
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import com.groupone.the.health.effect.library.DatabaseHandler;
import com.groupone.the.health.effect.library.UserFunctions;

public class LoginActivity extends Activity {
    Button btnLogin;
    Button btnLinkToRegister;
    EditText inputEmail;
    EditText inputPassword;
    TextView loginErrorMsg;

    // JSON Response node names
    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR = "error";
    private static String KEY_ERROR_MSG = "error_msg";
    private static String KEY_UID = "uid";
    private static String KEY_NAME = "name";
    private static String KEY_EMAIL = "email";
    private static String KEY_CREATED_AT = "created_at";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        // Importing all assets like buttons, text fields
        inputEmail = (EditText) findViewById(R.id.loginEmail);
        inputPassword = (EditText) findViewById(R.id.loginPassword);
        btnLogin = (Button) findViewById(R.id.btnLogin);
        btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
        loginErrorMsg = (TextView) findViewById(R.id.login_error);

        // Login button Click Event
        btnLogin.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                String email = inputEmail.getText().toString();
                String password = inputPassword.getText().toString();
                UserFunctions userFunction = new UserFunctions();
                JSONObject json = userFunction.loginUser(email, password);

                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        loginErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS);
                        if(Integer.parseInt(res) == 1){
                            // user successfully logged in
                            // Store user details in SQLite Database
                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                            JSONObject json_user = json.getJSONObject("user");

                            // Clear all previous data in database
                            userFunction.logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                            // Launch Dashboard Screen
                            Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);

                            // Close all views before launching Dashboard
                            dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(dashboard);

                            // Close Login Screen
                            finish();
                        }else{
                            // Error in login
                            loginErrorMsg.setText("Incorrect username/password");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });

        // Link to Register Screen
        btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                Intent i = new Intent(getApplicationContext(),
                        RegisterActivity.class);
                startActivity(i);
                finish();
            }
        });
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:33:17.657

这可能意味着两件事：

1) 该类未包含在二进制文件中

2）您没有为该类引用正确的包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:52:56.663

仪表板是小写的，所以它看起来像一个包。如果创建自定义布局类，则应引用该类而不是 xml 标记中的父包。

# json - 在 node.js 中使用 JSON.parse 时出错

> ID：13677141
> 
> 赞同：0
> 
> 时间：2012-12-03T04:29:10.760
> 
> 标签：json, node.js, parsing

我正在编写一个简单的程序，它向 reddit 发出请求，并以 JSON 格式取回页面。我通过将“.json”附加到 reddit url 的末尾来做到这一点。例如，如果我想获取我的个人资料页面，我会执行“www.reddit.com/user/stebon24.json”。

到目前为止，这是我的程序。我将记录并描述下面的错误。

```
var http = require('http');
var options = {
    host: 'www.reddit.com',
    path: ''
};

module.exports = function(username) {

    console.log(username);

    options.path = '/user/' + username + '.json';

    var userData;

    http.get(options, function(res) { 

        res.on('data', function(data) {
            userData += data;
            console.log(userData);
        });

        res.on('end', function() {
            userData = JSON.parse(userData);
            console.log(userData);
        });
    });
}; 
```

至于错误，它发生在程序到达需要运行 JSON.parse() 的地步。我知道这一点，因为当我在“数据”事件上记录结果时，我可以看到它输出原始 JSON。然后输出此错误...

```
undefined:1
undefined{"kind": "Listing", "data": {"modhash": "", "children": [{"kind": "t1
^
SyntaxError: Unexpected token u
    at Object.parse (native)
    at IncomingMessage.module.exports (/home/stephen/Desktop/karmacrawler/engine/crawlUser.js:23:20)
    at IncomingMessage.EventEmitter.emit (events.js:126:20)
    at IncomingMessage._emitEnd (http.js:366:10)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
    at Socket.socketOnData [as ondata] (http.js:1367:20)
    at TCP.onread (net.js:403:27) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:32:01.133

请记住设置一个初始值，`userData`以便它不会初始化为“未定义”：

```
var userData = ''; 
```

# asp.net-mvc - Asp.NET MVC3 错误请求

> ID：13677145
> 
> 赞同：1
> 
> 时间：2012-12-03T04:29:20.253
> 
> 标签：asp.net-mvc, session, session-variables

这是我在 ASP.NET MVC (MVC3) 中的第一个项目，我在处理所有事情时遇到了很多麻烦。根据选择的语言，我在页面中的所有文本都将从数据库中选择。对于这种语言选择，我更喜欢使用 Session 变量。我需要一个语言的**图像链接**，所以我将以下行写入 .cshtml 页面。

```
@using (Html.BeginForm()) {
    <a href='<%: Url.Action("Index", "Home", new { lang="Tr" }) %>'>
        <img src="../../Content/Images/flag_tr.jpg" width="40" height="20" />
    </a>
    <a href='<%: Url.Action("Index", "Home", new { lang = "En" }) %>'>
        <img src="../../Content/Images/flag_en.jpg" width="40" height="20" />
    </a>
} 
```

在**HomeController**中：

```
 public ActionResult Index()

        ViewBag.Message = "Welcome to ASP.NET MVC!";
        ViewBag.Selected = "Not yet selected";
        return View();
    }

    [HttpPost]
    public ActionResult Index(String lang)
    {
        if (lang == "Tr")
        {
            System.Web.HttpContext.Current.Session["Language"] = "Tr";
        }
        else if (lang == "En")
        {
            System.Web.HttpContext.Current.Session["Language"] = "En";
        }
        ViewBag.Selected = System.Web.HttpContext.Current.Session["Language"];
        return View();
    } 
```

当我单击标志链接时，我得到“HTTP 错误 400 - 错误请求”。谁能告诉我我做错了什么，或者我应该怎么做？

PS：我也试过不使用Form，在Controller中添加一个名为**Lang**的新函数并从那里重定向到Index，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:07:10.493

您似乎正在混合使用 Razor 和 WebForms 语法。当您在页面上“查看源代码”时，我相信您不会在锚点中看到正确的 URL：

```
<a href='<%: Url.Action("Index", "Home", new { lang="Tr" }) %>'> 
```

应该：

```
<a href='@Url.Action("Index", "Home", new { lang="Tr" })'> 
```

另外，请注意，即使在表单中，锚也会导致 HTTPGET，因此您需要使用 JavaScript 覆盖它们的行为或将`lang`检查添加到控制器操作的 HTTPGET 版本。尝试这样的事情，将您的两个控制器操作合二为一：

```
public ActionResult Index(string lang)
{
    if (lang == "Tr")
    {
        System.Web.HttpContext.Current.Session["Language"] = "Tr";
    }
    else if (lang == "En")
    {
        System.Web.HttpContext.Current.Session["Language"] = "En";
    }

    ViewBag.Message = "Welcome to ASP.NET MVC!";
    ViewBag.Selected = System.Web.HttpContext.Current.Session["Language"] ?? "Not yet selected";
    return View();
} 
```

如果你不使用`[HttpGet]`or来装饰它`[HttpPost]`，那么任何 HTTP 动词都会被映射到这个动作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T04:43:14.843

如果我没记错的话，你的 HomeController 类名是**HomeController**。

```
<a href='<%: Url.Action("Index", "HomeController", new { lang="Tr" }) %>'>
    <img src="../../Content/Images/flag_tr.jpg" width="40" height="20" />
</a> 
```

因此，当您在 Url.Action 中指定 Controller 时，它应该只是**Home**而不是***HomeController***。

因此，您的代码将如下所示：

```
@using (Html.BeginForm()) {
    <a href='<%: Url.Action("Index", "Home", new { lang="Tr" }) %>'>
        <img src="../../Content/Images/flag_tr.jpg" width="40" height="20" />
    </a>
    <a href='<%: Url.Action("Index", "Home", new { lang = "En" }) %>'>
        <img src="../../Content/Images/flag_en.jpg" width="40" height="20" />
    </a>
} 
```

让我知道这是否适合您，或者您需要更多说明。谢谢

# c++ - 类的友元函数不能访问其私有向量；

> ID：13677146
> 
> 赞同：0
> 
> 时间：2012-12-03T04:29:24.890
> 
> 标签：c++, private, friend

我有以下声明：

```
friend ostream& operator<<(ostream&,const List&); 
```

我有以下定义：

```
ostream& operator<<(ostream& out,const List& item) {
    vector<List::Employee>::const_iterator It;
    for (It=item.employees.begin();It!=item.employees.end();It++) {}
} 
```

* * *

Employee是我自己的一个结构体，employees是Employee在List类中的一个私有向量。编译器给我以下错误：

```
std::vector<List::Employee,std::allocator<List::Employee>> List::employees is private 
```

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:03:09.403

朋友声明应该在 List 类定义中。

```
class List{
    ...
    friend ostream& operator<<(ostream&,const List&);
}; 
```

# android - 三星 Infuse 4G 上的 Android USB 调试

> ID：13677147
> 
> 赞同：0
> 
> 时间：2012-12-03T04:29:40.627
> 
> 标签：android, testing, usb, device, adb

我正在尝试通过 Eclipse 插件在真实设备上测试 Android 应用程序。它是三星 Infuse 4G。我相信我已经按照 Android 页面上的所有步骤在设备上进行测试。

首先，我无法弄清楚 Android 操作系统版本是什么，因为它没有显示在设置中。我可以看到固件版本是 2.2.1，所以我假设我也在运行该版本的 Android 操作系统。

接下来，当我将设备连接到我的计算机（运行 Vista，64 位）时，我会收到三个选项提示：Kies（固件更新）、媒体播放器和大容量存储。当我在 Internet 上查看时，我看到我应该选择“仅充电”，但这并没有出现在提示我的选项中。我已经通过 Settings > Applications > Development 将 USB Debugging 设置为 true。

第三，我已经根据我的型号（SGH-I997）从三星网站安装了正确的驱动程序，但是当我从我的平台工具目录中执行 adb 设备时（我尝试过 adb kill-server 和 adb start-server），我仍然没有列出我的设备。

我在使用 Android 方面不是很先进，并且一直在努力解决如何解决这个问题，所以任何帮助指导我解决这个问题的人都将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:44:58.060

您还需要在手机应用程序设置的开发选项中标记“允许模拟位置”。

还可以尝试启用，连接设备后用作大容量存储。

您可以在 Eclipse 的 DDMS 的设备选项卡中检查是否检测到您的设备。

即使尝试了所有这些事情，它也不起作用尝试连接您的设备 2 或 3 次，重新启动 eclipse 并再次启用 USB 调试和模拟位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:33:21.377

尝试安装此 PC 套件 ... **Samsung Kies** [http://www.samsung.com/in/support/usefulsoftware/KIES/JSP](http://www.samsung.com/in/support/usefulsoftware/KIES/JSP)这将帮助您获得设备的确切驱动程序，并且不要忘记检查 USB 调试设置中的选项。

# java - Java Applet，GridLayout水平拉伸TextFields

> ID：13677148
> 
> 赞同：0
> 
> 时间：2012-12-03T04:29:41.633
> 
> 标签：java, swing, cardlayout

我正在编写一个 Java 小程序，并且在我的一个 CardLayout 面板上，其中的 GridLayout`BorderLayout.CENTER`正在水平和垂直拉伸 TextField（这没关系，因为我可以设置网格各部分之间的垂直间距）。我可以阻止 TextFields 如此宽，并且可以将文本居中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T04:31:56.657

考虑使用 JPanel 将包含 JTextField 的 JPanel 嵌套在另一个 FlowLayout 中。这样，使用 JPanel 的 FlowLayout 会被拉伸，而 JTextField 的大小会根据您设置的 int col 属性进行调整。请注意，如果使用 JPanel 的嵌套 FlowLayout 小于其子 JPanel 的 PreferredSize，这将失败。

# javascript - AJAX 和 DJANGO 形式

> ID：13677149
> 
> 赞同：6
> 
> 时间：2012-12-03T04:29:43.050
> 
> 标签：javascript, jquery, python, ajax, django

我是 Ajax 和 Django 的新手。为了简化问题，假设我有一个隐藏表单和两个对象，并且我要求用户单击对象的某些位置。每次点击都会填写表格的一部分。我希望为每个对象填写一次表格。所以总共两次。当为第一个主题填写表单时，我想通过 Ajax 将表单发送到服务器，而不刷新页面，并允许为第二个对象重新填写表单。但是，由于某种原因，我无法通过 ajax 发送表单。

这是我的代码：index.html：

```
<html>
<body>
<script src="{{ STATIC_URL }}prototype.js"></script>
<script src="{{ STATIC_URL }}jquery.js"></script>
<script>

  objectID= 1;
  num_obj = {{num_obj}}

  function ajax_post(){
    $('#inputform').submit(function() {  
        $.ajax({ 
            type: 'POST',
            url: '/index/',
            data: $(this).serialize(),
            success: function(data){alert(data)}

         }); // end new Ajax.Request
    });
  }

 function onDocumentMouseDown( event ) {
        ....do stuff
        if (objectID < num_obj){
           ajax_post()
           }
        if (objectID == num_obj){ 
            $("form").submit();}
        objectID ++;
        $("form").clearForm();
        document.forms[0].ObjectID.value = objectID;
        }
  </script>
  <form action="" method="post" id="inputform">
      <div id="ajaxwrapper">
       {% csrf_token %}
       <table>
        {{ form.as_table }}
       </table>
     </div>
  </form>
</body>
</html> 
```

我的观点.py：

```
from django.http import HttpResponse, HttpResponseRedirect
from django.shortcuts import *
from firstapp.forms import PracForm3

num_obj=2

def index(request):
   Obj.objects.all().delete()
   if request.method == 'POST':
    form = PracForm3(request.POST)
    print "\n\n\n\n\n"
    if request.is_ajax():
      print "yaaaaay AJAX"
      print request.POST
    else:
      print "noooooo"
    print "\n\n\n\n\n"
    if form.is_valid():
      cd = form.cleaned_data
      .....
      if cd['ObjectID'] == num_obj:
        return HttpResponseRedirect('/submit')
   else:
     form = PracForm3()
     dic = {'form': form, 'num_obj': num_obj, ...}
   return render_to_response('index.html', dic, context_instance=RequestContext(request)) 
```

我的 urls.py：

```
from django.conf.urls import patterns, include, url
from firstapp.views import index, submit
from django.conf import settings

urlpatterns = patterns('',
('^index$', index),
('^submit$', submit),
) 
```

出于某种原因，我的 Ajax 无法工作任何人都知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:02:40.240

这可能是与 AJAX 帖子相关的 CSRF，您必须记住在每个 POST 请求中将 CSRF 令牌作为 POST 数据传递。您可能需要在[此处](https://docs.djangoproject.com/en/1.9/ref/csrf/#ajax)添加此代码，这是讨论 Django+CSRF+AJAX 的 Django 文档。

我在您的 Django 视图中注意到您正在重定向到“提交” 通常使用 ajax 我不会重定向到不同的 url，我会使用 HttpResponse 并返回一些字符串值，例如 JSON。我也不知道为什么您的视图中有打印语句，除非您在调试器中沉浸在该视图中。对于测试/调试，您应该有一个变量，您可以将一些字符串分配给，然后将其传递回您的 ajax。然后在您的 ajax 中，您可以从视图中读取消息，如下所示。

```
def index(request):
    ...
    if request.is_ajax():
        msg = 'it worked'
    else:
        msg = 'i am sad'
    return HttpResponse(msg)
    ... 
```

此外，您的 javascript 在 ajax 调用中应该有一个成功和错误函数，您只有成功，所以您不会捕获错误，因为您的 javascript 看起来有点像这样：

```
...
success: function(data){alert(data)}, 

error: function(data){alert(data)}
... 
```

看起来您可能遇到了几个问题。如果您还没有完成我给您链接的 CSRF 内容，那么如果您不想以首选方式进行测试，请使用 csrf_exempt 进行测试。尝试上面的代码位，看看是否对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T02:17:09.473

csrf 令牌包含在`$('#input-form')`发布请求中，所以我认为这不是问题。我认为问题在于您没有在视图中将上下文转换为 json。这是来自[文档示例](https://docs.djangoproject.com/en/1.5/topics/class-based-views/mixins/#more-than-just-html)：

```
import json
from django.http import HttpResponse

class JSONResponseMixin(object):
    """
    A mixin that can be used to render a JSON response.
    """
    response_class = HttpResponse

    def render_to_response(self, context, **response_kwargs):
        """
        Returns a JSON response, transforming 'context' to make the payload.
        """
        response_kwargs['content_type'] = 'application/json'
        return self.response_class(
            self.convert_context_to_json(context),
            **response_kwargs
        )

    def convert_context_to_json(self, context):
        "Convert the context dictionary into a JSON object"
        # Note: This is *EXTREMELY* naive; in reality, you'll need
        # to do much more complex handling to ensure that arbitrary
        # objects -- such as Django model instances or querysets
        # -- can be serialized as JSON.
        return json.dumps(context) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:11:39.430

可能是 csrf 引起的，`@csrf_exempt`在方法名前加上会有帮助。

```
@csrf_exempt
def method(args):
    pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T04:50:31.137

您`/index/`在 ajax 调用中请求，但您的模式匹配`/index`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T06:05:35.430

我注释掉了 CSRF，所以问题不是我的 ajax 函数。这是正确的方法：

```
function ajax_post(){ 
    $.ajax({ 
        type: 'POST',
        url: '/index/',
        data: $(this).serialize(),
        success: function(data){alert(data)}

     }); // end new Ajax.Request
} 
```

感谢您的输入

# c# - 单次调用的 Linq 缓慢

> ID：13677151
> 
> 赞同：2
> 
> 时间：2012-12-03T04:29:50.243
> 
> 标签：c#, linq, optimization

背景：我的游戏使用的是组件系​​统。我有一个`Entity`类，其中有一个`IComponent`实例列表`List<IComponent>`。我目前的实现`Entity.GetComponent<T>()`是：

`return (T)this.components.Single(c => c is T);`

添加碰撞检测后，我注意到我的游戏下降到 1FPS。分析显示罪魁祸首就是这个调用（每帧调用 3000 多次）。

除了 3000x，我注意到调用这 300k 次大约需要 2 秒。我将其优化为一个简单的迭代循环：

```
foreach (IComponent c in this.components) { 
  if (c is T) {
    return (T)c; 
  }
}

return default(T); 
```

这段代码现在运行时间大约为 0.4 秒，这要好一个数量级。

我认为`Single`会比单个 foreach 循环更有效。这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T04:53:15.837

的文档`Single`说：

> 返回序列的唯一元素，如果序列中不完全有一个元素，则抛出异常。

另一方面`First`：

> 通过指定谓词函数中测试的序列中的第一个元素。

因此，`Single`在没有 的情况下遍历整个序列`short circuiting`，这就是`foreach`上面的循环所做的。所以，使用`First`or`FirstOrDefault`代替`Single`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:48:33.643

Single 遍历整个集合并确保只找到一项。所以你最好的表现总是 O(N)

您的迭代搜索也受到 O(N) 性能的影响，但这是最坏的情况。

来源： [List<T>.Single 方法](http://msdn.microsoft.com/en-us/library/vstudio/bb919331%28v=vs.90%29.aspx)

# sharepoint - 使用客户端对象模型以编程方式添加的 Sharepoint 2013 用户无法对文档库做出贡献

> ID：13677152
> 
> 赞同：2
> 
> 时间：2012-12-03T04:29:59.610
> 
> 标签：sharepoint, permissions, sharepoint-clientobject

我对使用客户端对象模型以编程方式添加到 Sharepoint 2013 组的用户的用户权限存在问题。Web 应用程序允许匿名，但我也有一个文档库“Teacher Documents”，仅对某个组（比如说“Teachers”）**有贡献**权限，并且我也将用户添加到该站点的默认成员中（比如说“School成员”）。该代码工作正常，用户已成功添加到两个组中。

虽然看起来确实不错，并且用户名被列为组的成员，但他们仍然无法贡献。当我检查时，他们确实对文档库具有匿名访问权限，但没有贡献权限。这是我的代码：

```
public static string AddUserToGroup(string siteURL, string groupName, string userName, string name, string email, NetworkCredential impersonateCredential)
{
    try
    {
        ClientContext context = new ClientContext(siteURL);
        context.Credentials = impersonateCredential;

        Group oGroup = null;

        oGroup = context.Web.SiteGroups.GetByName(groupName);

        context.Load(oGroup);
        bool groupExists = false;

        try
        {
            context.ExecuteQuery();
            groupExists = true;
        }
        catch { }

        if (groupExists)
        {
            UserCreationInformation userCreationInfo = new UserCreationInformation();
            userCreationInfo.Email = email;
            userCreationInfo.LoginName = userName;
            userCreationInfo.Title = name;

            bool userExists = false;

            try
            {
                User checkUser = oGroup.Users.GetByLoginName(userName);
                context.Load(checkUser);
                context.ExecuteQuery();
                userExists = true;
            }
            catch { }

            if (!userExists)
            {
                User oUser = oGroup.Users.Add(userCreationInfo);
                context.ExecuteQuery();
            }
        }
        else
        {
            return "No associated group assigned";
        }

        return "Member " + userName + " has been added to group.";
    }
    catch (Exception ex)
    {
        return ex.Message.ToString();
    }
} 
```

这就是我所说的：

```
string siteURL = "http://spfe01.gilang.com/";
string username = "spfe01\\budi.utomo";
string name = "Budi Utomo";
string email = "budi.utomo@spfe01.gilang.com";

NetworkCredential impersonateCredential = new NetworkCredential("username", "password", "spfe01");

AddUserToGroup(siteURL, "Teachers", username, name, email, impersonateCredential)); 
```

（您可以在控制台应用程序上对其进行测试）

它有效，用户被添加到“教师”，但没有“教师文档”文档库的权限。将用户添加到对站点具有完全控制权的管理组“学校所有者”也不起作用。

**编辑：** 就我而言，我已手动将组添加到文档库，手动添加到组的用户被授予权限并允许参与。手动是指在 Web 浏览器上使用 Sharepoint 的标准“权限”功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-27T05:57:59.067

其实，你有没有打破传承？

很可能，文件夹和文件继承了主文件夹的权限

# 这是我的代码：

```
caml = new Microsoft.SharePoint.Client.CamlQuery();

caml.ViewXml = @"Caml to get the file";

items = objList.GetItems(caml);

clientContext.Load(items);

clientContext.Credentials = new NetworkCredential("LoginID", "LoginPW", "LoginDomain");

clientContext.ExecuteQuery();

item = items[0];

item.BreakRoleInheritance(true, true);

clientContext.ExecuteQuery(); 
```

# android - 如何在滑动时更新 viewpager 的视图 - android

> ID：13677153
> 
> 赞同：4
> 
> 时间：2012-12-03T04:30:06.407
> 
> 标签：android, android-viewpager, updates

我正在使用 view-pager。我有三个标签：1\. History，2\. Main，3\. Map。

我有秒表进入主要活动。当我按下开始，然后在该时间停止后，秒表的值添加到 sqlite 数据库中。在历史活动中，我从数据库中获取秒表的值并存储到列表视图中。它工作完美。

但是现在我想在从**Main > History**滑动时更新 History 活动，所以在按下停止按钮后，我将最后一个值放入历史活动的列表视图中。

我的问题是`how can I update the view on swipe the viewpager?`

```
public class SwipeyTabsSampleActivity extends FragmentActivity {

private static final String [] TITLES = {
    "HISTORY", 
    "MAIN",
    "MAP"  

};

private SwipeyTabs mTabs;
private ViewPager mViewPager;
//Handler handler=new Handler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_swipeytab);

    mViewPager = (ViewPager) findViewById(R.id.viewpager);
    mTabs = (SwipeyTabs) findViewById(R.id.swipeytabs);

    SwipeyTabsPagerAdapter adapter = new SwipeyTabsPagerAdapter(this,
            getSupportFragmentManager());
    mViewPager.setAdapter(adapter);
    mTabs.setAdapter(adapter);
    mViewPager.setOnPageChangeListener(mTabs);
    mViewPager.setCurrentItem(1); 
    mViewPager.setOffscreenPageLimit(3);

}

 private class SwipeyTabsPagerAdapter extends FragmentPagerAdapter implements
        SwipeyTabsAdapter, ViewPager.OnPageChangeListener {

    private final Context mContext;
    ViewPager viewpager;

    public SwipeyTabsPagerAdapter(Context context, FragmentManager fm, ViewPager mViewPager) {
        super(fm);

        this.mContext = context;
        viewpager = mViewPager;

        //viewpager.setAdapter(this);
        viewpager.setOnPageChangeListener(this);

    }

    @Override
    public Fragment getItem(int position) {

         Fragment f = new Fragment();

        switch (position) {
        case 0:
            f = History.newInstance(position);

            break;
        case 1:
            f = Main.newInstance(position);
            break;
        case 2:
            f = Map.newInstance(position);

            break;

        }
        return f;

    }

    @Override
    public int getCount() {
        return TITLES.length;
    }

     @Override
        public void destroyItem(ViewGroup container, int position, Object object) {

            ViewPager pager = (ViewPager) container;
            View view = (View) object;

            pager.removeView(view);
        }

    public TextView getTab(final int position, SwipeyTabs root) {
        TextView view = (TextView) LayoutInflater.from(mContext).inflate(
                R.layout.swipey_tab_indicator, root, false);
        view.setText(TITLES[position]);
        view.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mViewPager.setCurrentItem(position);

            }
        });

        return view;
    }

    @Override
    public void onPageScrollStateChanged(int state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPageSelected(int positiion) {
        // TODO Auto-generated method stub

    }

}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-17T23:46:44.330

添加 ViewPager OnPageChangeListener：

```
mViewPager.addOnPageChangeListener(new ViewPager.OnPageChangeListener() {
        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

        }

        @Override
        public void onPageSelected(int position) {
            // your code here
        }

        @Override
        public void onPageScrollStateChanged(int state) {

        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-08T05:48:25.560

这将影响视图寻呼机中从一页到另一页的更改。

```
OnPageChangeListener pagechangelistener =new OnPageChangeListener() {

            @Override
            public void onPageSelected(int arg0) {
                Logger.logMessage("Called first");

                pageAdapter.notifyDataSetChanged();
                indicator.setCurrentItem(arg0);
            }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) {

                Logger.logMessage("Called second");

            }

            @Override
            public void onPageScrollStateChanged(int arg0) {

                Logger.logMessage("Called third");

            }
        };
        myViewPager.setOnPageChangeListener(pagechangelistener); 
```

在您的页面适配器中使用它。

```
@Override
    public int getItemPosition(Object object) {

        return POSITION_NONE;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T09:22:44.083

取一个字符串并将 Getter 和 setter 添加到您的`FragmentActivity`类中。

喜欢...

```
String HistoryFragment;

public String getHistoryFragment() {
    return HistoryFragment;
}

public void setHistoryFragment(String historyFragment) {
    HistoryFragment = historyFragment;
} 
```

然后在我们可以通过调用从当前片段访问另一个片段之后`findFragmentByTag(<tag of target fragment>)`。

有关更多信息，请查看[ViewPager 中片段之间的通信](http://android-er.blogspot.in/2012/06/communication-between-fragments-in.html)链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T04:45:22.743

您是否尝试过实现 OnPageChanged ？您可以捕获用户开始滑动的时间。

做`pager.setOnPageChanged(new ....)`，Eclipse 将向您展示您可以覆盖的方法。然后你可以覆盖`onPageScrollStateChanged(int state)`

```
onPageScrollStateChanged(int state){
    if (state==OnPageChangeListener.SCROLL_STATE_DRAGGING){
       // update here
    }
} 
```

# python - 视图功能之外的 Django HTTP 重定向

> ID：13677159
> 
> 赞同：8
> 
> 时间：2012-12-03T04:31:09.583
> 
> 标签：python, django, django-views, python-2.6

有没有办法在视图函数之外重定向到 Django 中的另一个页面。

我需要能够在我的应用程序中的任何地方重定向，而不仅仅是当我将 HTTP 响应返回给客户端时。

我试过重定向快捷方式：

```
from django.shortcuts import redirect
redirect("/some/url") 
```

并且

```
redirect("http://someserver.com/some/url") 
```

但这并没有明显的动作。

我需要类似`header("Location: /some/url");`PHP 的东西，它可以在脚本中的任何地方使用。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T04:46:51.683

您可以滥用/利用`process_exception`中间件：

```
# middleware.py
from django import shortcuts

class Redirect(Exception):
    def __init__(self, url):
        self.url = url

def redirect(url):
    raise Redirect(url):

class RedirectMiddleware:
    def process_exception(self, request, exception):
        if isinstance(exception, Redirect):
            return shortcuts.redirect(exception.url) 
```

然后你可以这样做：

```
from middleware import redirect
redirect('/some/url/') 
```

也不要忘记添加`RedirectMiddleware`到您的`MIDDLEWARE_CLASSES`设置中。

# linux - 每个主机的具有自定义参数的并行 SSH

> ID：13677163
> 
> 赞同：4
> 
> 时间：2012-12-03T04:31:27.083
> 
> 标签：linux, bash, shell, ssh, distributed

有很多关于并行 ssh 的线程和文档，但我找不到将自定义参数传递给每个主机的任何内容。举`pssh`个例子，hosts文件定义为：

```
111.111.111.111
222.222.222.222 
```

但是，我想通过 shell 脚本将自定义参数传递给每个主机，如下所示：

```
111.111.111.111 param1a param1b ...
222.222.222.222 param2a param2b ... 
```

或者，更好的是，主机和参数将在 2 个文件之间拆分。

因为这并不常见，这是对并行 ssh 的滥用吗？我应该从我的脚本中创建许多 ssh 进程吗？我应该如何处理这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T11:54:33.167

您可以使用[GNU 并行](http://www.gnu.org/software/parallel/man.html)。

假设您有一个文件**argfile**：

```
111.111.111.111 param1a param1b ...
222.222.222.222 param2a param2b ... 
```

然后运行

```
parallel --colsep ' ' ssh {1} prog {2} {3} ... :::: argfile 
```

`prog`将使用相应的参数在每个主机上运行。每个主机的参数数量必须相同，这一点很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:22:46.997

以下是您可以使用的解决方案，根据您的需要对其进行定制：

```
#!/bin/bash
#filename: example.sh
#usage: ./example.sh <par1> <par2> <par3> ... <par6>

#set your ip addresses
$traf1=1.1.1.1
$traf2=2.2.2.2
$traf3=3.3.3.3

#set some custom parameters for your scripts and use them as you wish.
#In this example, I use the first 6 command line parameters passed when run the example.sh

ssh -T $traf1 -l username "/export/home/path/to/script.sh $1  $2" 1>traf1.txt 2>/dev/null &
echo "Fetching data from traffic server 2..."
ssh -T $traf2 -l username "/export/home/path/to/script.sh $3  $4" 1> traf2.txt 2>/dev/null &
echo "Fetching data from traffic server 3..."
ssh -T $traf3 -l username "/export/home/path/to/script.sh $5  $6" 1> traf3.txt 2>/dev/null &

#your application will block on this line, and will only continue if all 
#3 remotely executed scripts will complete
wait 
```

请记住，以上要求您在机器之间设置无[密码登录](http://www.debian-administration.org/articles/152)，否则解决方案将中断请求输入密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:25:59.090

如果你可以使用 Perl：

```
use Net::OpenSSH::Parallel;
use Data::Dumper;

my $pssh = Net::OpenSSH::Parallel->new;

$pssh->add_host('111.111.111.111');
$pssh->add_host('222.222.222.222');

$pssh->push('111.111.111.111', $cmd, $param11, $param12);
$pssh->push('222.222.222.222', $cmd, $param21, $param22);

$pssh->run;

if (my %errors = $ssh->get_errors) {
  print STDERR "ssh errors:\n", Dumper \%errors;
} 
```

# java - JPA - 由于外键约束而无法删除行

> ID：13677165
> 
> 赞同：3
> 
> 时间：2012-12-03T04:31:50.260
> 
> 标签：java, sql, database, jpa, eclipselink

我正在使用 JPA2 (EclipseLink)，我的实体对象如下所示：

```
@Entity
public class Dashboard
{
    @Id
    private String name;

    @OneToMany(cascade = CascadeType.ALL, mappedBy="dashboard", orphanRemoval = true)
    private List<LogResult> logResults;

    //getter-setters
}

@Entity
public class LogResult
{
    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    private long id;

    private Dashboard dashboard;

    //getter-setters
} 
```

我有这样的代码来删除仪表板：

```
EntityManager em = PersistenceInitializer.newEntityManager();
em.getTransaction().begin();
em.remove(dashboard);
em.getTransaction().commit(); 
```

但是，当我执行上面的代码时，我收到关于 logresult 表上的外键约束的错误消息。

为什么会这样？使用 CascadeType.ALL 不意味着应该为我处理所有这些吗？

**此处更新**是控制台上的实际错误输出

```
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`crs`.`logresult`, CONSTRAINT `FK_LOGRESULT_DASHBOARD_NAME` FOREIGN KEY (`DASHBOARD_NAME`) REFERENCES `dashboard` (`NAME`))
Error Code: 1451 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:53:42.927

对于 EclipseLink 实现，请参阅 EclispeLink JPA 扩展指南：[http ://eclipse.org/eclipselink/documentation/2.4/jpa/extensions/toc.htm](http://eclipse.org/eclipselink/documentation/2.4/jpa/extensions/toc.htm)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T04:36:16.420

显式添加`cascade = CascadeType.DELETE_ORPHAN`。当父实体首先被删除时，所有子对象都成为孤立对象。`CascadeType.DELETE_ORPHAN`级联类型使 JPA 删除那些孤立对象。

例如下面：

```
 @OneToMany(cascade={CascadeType.ALL, CascadeType.DELETE_ORPHAN}) 
```

# c# - 尝试读取或写入受保护的内存。这通常表明其他内存已损坏

> ID：13677172
> 
> 赞同：2
> 
> 时间：2012-12-03T04:32:06.657
> 
> 标签：c#, winforms, webbrowser-control, axwebbrowser

我在 C# 4.0 中创建了一个 Windows 应用程序。我尝试创建一个动态的`WebBrowser`.

此函数在循环内工作。请看下面我的功能代码：

```
public WebBrowser GetLoadText(string url)
{
    string html = string.Empty;
    WebBrowser browser = new WebBrowser();
    using (WebClient client = new WebClient())
    {
        Uri innUri = null;
        if (!url.StartsWith("http://"))
        url = "http://" + url;
        if (url.EndsWith("."))
        innUri = ManipulateBrokenUrl(url);
        else
        Uri.TryCreate(url, UriKind.RelativeOrAbsolute, out innUri);
        try
        {
            LogWriter.WriteLog(" Proxy is : " + client.Proxy.ToString(), "GetLoadTextException");
            client.Headers.Add("User-Agent", "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)");
            html = client.DownloadString(innUri);
            if (!string.IsNullOrEmpty(html))
            {
                browser.DocumentText = html;
                browser.AllowWebBrowserDrop = false;
                browser.ScriptErrorsSuppressed = true;
                browser.Document.Write(html);
                return browser;
            }
            else
            {
                return new WebBrowser();
            }
        }
        catch (WebException we)
        {
            LogWriter.WriteLog(" ", "GetLoadTextException");
            LogWriter.WriteLog(" Proxy is : " + client.Proxy.ToString(), "GetLoadTextException");
            LogWriter.WriteLog("WebException Status : " + we.Status, "GetLoadTextException");
            LogWriter.WriteLog("WebException Message : " + we.Message, "GetLoadTextException");
            if (we.Status == WebExceptionStatus.ProtocolError)
            {
                LogWriter.WriteLog("WebException Status Code : " + ((HttpWebResponse)we.Response).StatusCode, "GetLoadTextException");
                LogWriter.WriteLog("WebException Status Description : " + ((HttpWebResponse)we.Response).StatusDescription, "GetLoadTextException");
            }
            if (((HttpWebResponse)we.Response).StatusCode != HttpStatusCode.NotFound)
            {
                LogWriter.WriteLog("Start Thread Sleep After the WebException caught", "GetLoadTextException");
                LogWriter.WriteLog("Resume the extraction process after the sleep and over come the Server Timeout issue.", "GetLoadTextException");
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            browser = null;
            client.Dispose();
        }
        return new WebBrowser();
    }
} 
```

有时，`browser.Document.Write(html)`显示此错误。

> **尝试读取或写入受保护的内存。这通常表明其他内存已损坏。**

![在此处输入图像描述](../Images/ce434da07760ac5c27fee462d8a23517.png)

我`browser.Document.OpenNew(true);`在我的代码中添加了。我的操作系统是 Windows XP，浏览器是 IE8。

请帮忙。

# android - IllegalStateException：无法执行活动的方法

> ID：13677173
> 
> 赞同：2
> 
> 时间：2012-12-03T04:32:15.253
> 
> 标签：android, eclipse

我正在尝试在 eclipse java android 中编写代码以将两个字段输入到数据库中。在数据库中输入 3 行条目后，我单击“查看列表”数据库并收到错误消息。我已将我认为的错误缩小到`DetailActivity.java`

```
Intent intent = new Intent(this, RaceListActivity.class); 
```

存在一个`RaceListActivity.class`，`RaceListActivity.java.`但我收到了这个错误。 `DetailActivity.java`并且`RaceListActivity.java`代码低于错误退出的位置。`LogCat`低于那个 。

**详细活动.java**

```
// Shows/edits the data for one row.
public class DetailActivity extends Activity {
    private RaceDB mDB;
    private Long mRowId;
    private EditText mEditText1;
    private EditText mEditText2;
    private CheckBox mCheckBox;
    private static final String TAG = "INFORMATION";

    @Override
    protected void onCreate(Bundle bundle) {
        super.onCreate(bundle);

        setContentView(R.layout.activity_main);

        mEditText1 = (EditText) findViewById(R.id.editText1);
        mEditText2 = (EditText) findViewById(R.id.editText2);
        mCheckBox = (CheckBox) findViewById(R.id.checkBox1);

        mRowId = null;

        if (bundle == null) {  // initially, Intent -> extras -> rowID
            Bundle extras = getIntent().getExtras();
            if (extras != null && extras.containsKey(RaceListActivity.EXTRA_ROWID)) {
                mRowId = extras.getLong(RaceListActivity.EXTRA_ROWID);
            }
        }
        else {  // tricky: recover mRowId from kill destroy/create cycle
            mRowId = bundle.getLong(SAVE_ROW);
        }

        mDB = new RaceDB(this);
        mDB.open();
        Log.d(TAG, "Database is now open and saved");
        dbToUI();
        Log.d(TAG, "Database is now able to be shown");
        onPause();
    }       

    public void view_races(View v){
        Log.d(TAG, "Database is now almost shown");
        Intent intent = new Intent(this, RaceListActivity.class);
        startActivity(intent);    
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        mDB.close();
    }

    // Copies database state up to the UI.
    private void dbToUI() {
        if (mRowId != null) {
            Cursor cursor = mDB.query(mRowId);
            mEditText1.setText(cursor.getString(RaceDB.INDEX_TITLE));
            mEditText2.setText(cursor.getString(RaceDB.INDEX_BODY));
            mCheckBox.setChecked(cursor.getInt(RaceDB.INDEX_STATE) > 0);

            cursor.close();
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        save();
    }

    /** Save the state in the UI to the database, creating a new row or updating
     * an existing row.
     */
    private void save() {
        String title = mEditText1.getText().toString();
        String body = mEditText2.getText().toString();
        int done = 0;
        if (mCheckBox.isChecked()) done = 1;

        // Not null = edit of existing row, or it's new but we saved it previously,
        // so now it has a rowId anyway.
        if (mRowId != null) {
            mDB.updateRow(mRowId, mDB.createContentValues(title, body, done));
        }
        else {
            mRowId = mDB.createRow(mDB.createContentValues(title, body, done));
        }
    }

    public static final String SAVE_ROW = "saverow";
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putLong(SAVE_ROW, mRowId);
    }
} 
```

**RaceListActivity.java**

```
// Main activity -- shows data list, has a few controls.
public class RaceListActivity extends ListActivity {
    private RaceDB mDB;  // Our connection to the database.
    private SimpleCursorAdapter mCursorAdapter;
    private static final String TAG = "INFORMATION";

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        Log.d(TAG, "Database is now shown");
        setContentView(R.layout.activity_view_races);

/*        Button button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                startDetail(0, true);  // true = create new
            }
        });*/

        // Start up DB connection (closed in onDestroy).

        mDB = new RaceDB(this);
        mDB.open();

        // Get the "all rows" cursor. startManagingCursor() is built in for the common case,
        // takes care of closing etc. the cursor.
        Cursor cursor = mDB.queryAll();
        startManagingCursor(cursor);

        // Adapter: maps cursor keys, to R.id.XXX fields in the row layout.
        String[] from = new String[] { RaceDB.KEY_TITLE, RaceDB.KEY_STATE };
        int[] to = new int[] { R.id.rowtext, R.id.rowtext2 };
        mCursorAdapter = new SimpleCursorAdapter(this, R.layout.row2, cursor, from, to);

        // Map "state" int to text in the row -- intercept the setup of each row view,
        // fiddle with the data for the state column.
        mCursorAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
            public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
                if (columnIndex == RaceDB.INDEX_STATE) {
                    TextView textView = (TextView) view;
                    if (cursor.getInt(RaceDB.INDEX_STATE) > 0) {
                        textView.setText(" (done) ");
                    }
                    else {
                        textView.setText("");
                    }
                    return true;  // i.e. we handled it
                }
                return false;  // i.e. the system should handle it
            }
            });

        // Alternative: also have row.xml layout with just one text field. No ViewBinder
        // needed for that simpler approach.

        setListAdapter(mCursorAdapter);
        registerForContextMenu(getListView());

        // Placing a clickable control inside a list is nontrivial unfortunately.
        // see bug: http://code.google.com/p/android/issues/detail?id=3414

    }

    // Placing this next to onCreate(), help to remember to mDB.close().
    @Override
    protected void onDestroy() {
        super.onDestroy();
        mDB.close();
    }

    // Create menu when the select the menu button.
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.pref_menu, menu);
        return true;
    }

    // Called for menu item select. Return true if we handled it.
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.prefs:
                // open prefs, previous lecture
                return true;

            default:
                return super.onOptionsItemSelected(item);

        }
    }

    // Create context menu for click-hold in list.
    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
                                    ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.list_menu, menu);
    }

    // Context menu item-select.
    @Override
    public boolean onContextItemSelected(MenuItem item) {
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
        switch (item.getItemId()) {
            case R.id.menu_detail:
                startDetail(info.id, false);
                return true;

            case R.id.menu_delete:
                remove(info.id);
                return true;                
            default:
                return super.onContextItemSelected(item);
        }
    }

    // Removes the given rowId from the database, updates the UI.
    public void remove(long rowId) {
        mDB.deleteRow(rowId);
        //mCursorAdapter.notifyDataSetChanged();  // confusingly, this does not work
        mCursorAdapter.getCursor().requery();  // need this
    }

    public static final String EXTRA_ROWID = "rowid";

    @Override
    protected void onListItemClick(ListView l, View v, int position, long rowId) {
        super.onListItemClick(l, v, position, rowId);
        startDetail(rowId, false);
    }

    // Starts the detail activity, either edit existing or create new.
    public void startDetail(long rowId, boolean create) {
        Intent intent = new Intent(this, DetailActivity.class);
        // Our convention: add rowId to edit existing. To create add nothing.
        if (!create) {
            intent.putExtra(EXTRA_ROWID, rowId);
        }
        startActivity(intent);
        // Easy bug: remember to add to add a manifest entry for the detail activity
    }
}

/*
Customizing how the data goes into each list/row (use with row2 layout)

        mCursorAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
            public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
                if (columnIndex == RaceDB.INDEX_STATE) {
                    TextView tv = (TextView) view;
                    if (cursor.getInt(RaceDB.INDEX_STATE) > 0) {
                        tv.setText(" (done) ");
                    }
                    else {
                        tv.setText("");
                    }
                    return true;
                }
                return false;
            }
            });
*/ 
```

**日志猫**

```
12-02 22:37:47.785: D/INFORMATION(768): Database is now open and saved
12-02 22:37:47.785: D/INFORMATION(768): Database is now able to be shown
12-02 22:38:24.275: D/INFORMATION(768): Database is now almost shown
12-02 22:38:24.310: D/AndroidRuntime(768): Shutting down VM
12-02 22:38:24.310: W/dalvikvm(768): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-02 22:38:24.375: E/AndroidRuntime(768): FATAL EXCEPTION: main
12-02 22:38:24.375: E/AndroidRuntime(768): java.lang.IllegalStateException: Could not execute method of the activity
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.view.View$1.onClick(View.java:2144)
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.view.View.performClick(View.java:2485)
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.view.View$PerformClick.run(View.java:9080)
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.os.Handler.handleCallback(Handler.java:587)
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.os.Looper.loop(Looper.java:123)
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-02 22:38:24.375: E/AndroidRuntime(768):  at java.lang.reflect.Method.invokeNative(Native Method)
12-02 22:38:24.375: E/AndroidRuntime(768):  at java.lang.reflect.Method.invoke(Method.java:507)
12-02 22:38:24.375: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-02 22:38:24.375: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-02 22:38:24.375: E/AndroidRuntime(768):  at dalvik.system.NativeStart.main(Native Method)
12-02 22:38:24.375: E/AndroidRuntime(768): Caused by: java.lang.reflect.InvocationTargetException
12-02 22:38:24.375: E/AndroidRuntime(768):  at java.lang.reflect.Method.invokeNative(Native Method)
12-02 22:38:24.375: E/AndroidRuntime(768):  at java.lang.reflect.Method.invoke(Method.java:507)
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.view.View$1.onClick(View.java:2139)
12-02 22:38:24.375: E/AndroidRuntime(768):  ... 11 more
12-02 22:38:24.375: E/AndroidRuntime(768): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {edu.CIS2818.TriTracker/edu.CIS2818.TriTracker.RaceListActivity}; have you declared this activity in your AndroidManifest.xml?
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.app.Activity.startActivityForResult(Activity.java:2827)
12-02 22:38:24.375: E/AndroidRuntime(768):  at android.app.Activity.startActivity(Activity.java:2933)
12-02 22:38:24.375: E/AndroidRuntime(768):  at edu.CIS2818.TriTracker.DetailActivity.view_races(DetailActivity.java:62)
12-02 22:38:24.375: E/AndroidRuntime(768):  ... 14 more
</pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:37:16.417

不要手动调用 Activity 生命周期方法。就像您`onPause();`在`onCreate`Activity 中调用的当前代码一样。所以将您的代码更改为：

```
 mDB = new RaceDB(this);
    mDB.open();
    Log.d(TAG, "Database is now open and saved");
    dbToUI();
    Log.d(TAG, "Database is now able to be shown");
   /// onPause();  remove this method from here this 
                   //will called automatically by system 
```

并确保您已将`RaceListActivity`清单中的 Activity 声明为：

```
<activity android:name=".RaceListActivity" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T04:37:28.637

您必须在项目清单文件中添加 RaceListActivity 条目：

```
 <activity
        android:name=".RaceListActivity"
        android:label="@string/app_name" >

    </activity> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T04:37:04.690

错误原因如下：

```
Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class 
```

您是否在`<application>`标签内的清单中声明了您的活动？

```
<activity android:name=".RaceListActivity" android:label="@string/app_name"></activity> 
```

# php - 如何使用php删除表中的特定行数

> ID：13677176
> 
> 赞同：1
> 
> 时间：2012-12-03T04:32:27.520
> 
> 标签：php, mysql

如果我选择这些特定的行使用

```
select * from wp_posts where title like 'abc%' 
```

它现在显示行
我想使用 php 删除这些行
我可以这样做还是我错
了提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:36:39.120

如果您将代码更完整一点，那会更有趣。但基本上SQL命令如下：

```
delete from wp_posts where title like 'abc%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:41:27.210

如果有激活密钥之类的敏感数据，则需要使用mysql的二进制函数来检查abc是否与ABC匹配。

使用这个：

```
delete from wp_posts where title like binary('ABC%') 
```

# c# - 如何使用 ASP.NET 删除浏览器的服务器端缓存？

> ID：13677178
> 
> 赞同：-4
> 
> 时间：2012-12-03T04:32:47.423
> 
> 标签：c#, asp.net

如何使用 ASP.NET (C#) 删除浏览器的服务器端缓存？

优惠券会自行显示（我相信它来自缓存，因为我也浏览过其他服装网站）。它破坏了我的 JavaScript 以及我的服务器端代码，因为我正在为 Ajax 使用 UpdatePanel，并且它复制了 UpdatePanel 的 ID。我已经重命名了 UpdatePanel 的 ID，但这并没有什么区别。它生成“无效的视图状态”异常。优惠券名称为“FastSave”

我试过的：

```
Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetNoStore(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:40:17.290

你可以像这样停止缓存：

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.Cache.SetExpires(DateTime.Now);
    Response.Cache.SetNoServerCaching();
    Response.Cache.SetNoStore();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:56:40.400

以下是我在 ASP.NET MVC 2 应用程序中设置客户端浏览器缓存的方法：

```
public class CacheFilterAttribute : ActionFilterAttribute {

    /// <summary>
    /// Gets or sets the cache duration in seconds. The default is 10 seconds.
    /// </summary>
    /// <value>The cache duration in seconds.</value>

    public int Duration { get; set; }

    public CacheFilterAttribute() { Duration = 10; }

    public override void OnActionExecuted(ActionExecutedContext filterContext) {
        if (Duration <= 0) return;

        var cache = filterContext.HttpContext.Response.Cache;
        var cacheDuration = TimeSpan.FromSeconds(Duration);

        cache.SetCacheability(HttpCacheability.Public);
        cache.SetExpires(DateTime.Now.Add(cacheDuration));
        cache.SetMaxAge(cacheDuration);
        cache.AppendCacheExtension("must-revalidate, proxy-revalidate");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:06:01.193

你不能。

您可以告诉客户端不要缓存某些内容，但是一旦这样做了，就没有服务器端机制来清除缓存。您必须等待缓存过期或用户清除缓存。

# android - 在 Android 上使用适配器的最佳方式是什么？

> ID：13677182
> 
> 赞同：1
> 
> 时间：2012-12-03T04:33:16.363
> 
> 标签：android, adapter

在 Android 上使用适配器的最佳方式是什么？我们可以将它用于几个自定义操作。通过使用适配器，我们将包含一些预先实现的方法。我应该什么时候使用这些方法？我们如何通过使用 Adapter 实现的方法来提高应用程序的性能？

```
public int getCount() {
        // TODO Auto-generated method stub
        return country.length;
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:48:01.670

查看此示例示例和[链接](http://goo.gl/phvuz)

```
public class GridDemo extends Activity implements AdapterView.OnItemClickListener {
    private TextView selection;
    private static final String[] items={"lorem", "ipsum", "dolor", "sit", "amet", "consectetuer", "adipiscing", "elit", "morbi", "vel", "ligula", "vitae", "arcu", "aliquet", "mollis", "etiam", "vel", "erat", "placerat", "ante", "porttitor", "sodales", "pellentesque", "augue", "purus"};

    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        selection=(TextView)findViewById(R.id.selection);
        GridView g=(GridView) findViewById(R.id.grid);
        g.setAdapter(new ArrayAdapter<String>(this, R.layout.cell, items));
        g.setOnItemClickListener(this);
    }

    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        selection.setText(items[position]);
    }
} 
```

你可以得到这个适配器的想法..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:52:32.513

`BaseAdapter`是简单使用`ListView`or的绝佳选择`GridView`。但是如果你想从数据库中获取数据，a`CursorAdapter`更适合，尽管文档说这是用于`ListView`. 因此，如果在显示从数据库中获取的数据时既要两者又要使用，那么 a`SimpleCursorAdapter`将是您使用的另一种类型。但是当然知道你的实现会帮助我更好地给你最好的选择。`ListView``GridView`

我还应该补充一下，因为我在其中一个评论上看到了它，`ArrayAdapter`基本上是 a `BaseAdapter`，但不同之处在于它需要任意对象的数组，也就是最适合直接开箱即用的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T04:58:48.283

getCount() 是必须的。它告诉 ListView、GridView 等要显示多少项目。getItem() 和 getItemId() 在许多情况下（如果您通过自己的代码实现 getView()）实际上是可选的，它们只是辅助方法。有一些方法是适配器的基本方法，它对性能提升没有帮助。我认为getView()的实现效果表现最好。

# hive - 使用 hive 在组中出错

> ID：13677184
> 
> 赞同：4
> 
> 时间：2012-12-03T04:33:18.627
> 
> 标签：hive

我正在使用以下代码并收到以下错误

```
 select d.searchpack,d.context, d.day,d,txnid,d.config, c.sgtype from ds3resultstats d join       
     context_header c on (d.context=c.contextid) where (d.day>='2012-11-15' and d.day<='2012-11-25' and  c.sgtype='Tickler' and d.config like 
'%people%') GROUP BY d.context limit 10;
        FAILED: Error in semantic analysis: line 1:7 Expression Not In Group By Key d 
```

我猜我正在错误地使用该组

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T06:52:41.717

使用时`group by`，不能选择其他附加字段。您只能选择具有聚合功能的组键。

有关更多信息，请参阅[hive group by](https://cwiki.apache.org/Hive/languagemanual-groupby.html)。

[相关问题](https://stackoverflow.com/questions/5746687/hive-expression-not-in-group-by-key)。

代码示例：

```
select d.context,count(*)
from ds3resultstats
...
group by d.context 
```

或按乘法字段分组。

```
select d.context, d.field2, count(*)
from ds3resultstats
...
group by d.context, d.field2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-29T12:07:29.990

它期望所有的列都被添加到 group by。即使我面临同样的问题，但我设法解决了这些问题。您可以使用`collect_set`列名来获取输出。例如 `select d.searchpack,collect_set(d.context) from sampletable group by d.searchpack;`

# objective-c - 如何访问注释属性并将其传递给另一个视图控制器

> ID：13677187
> 
> 赞同：0
> 
> 时间：2012-12-03T04:34:05.180
> 
> 标签：objective-c, uiviewcontroller, annotations

因此，在我的应用程序中，我有一个 mapView，当屏幕被按下时，它会掉落针脚。一旦注释被删除，它们就会被放入一个数组中。地图上一次会有多个图钉，每个图钉都有一个标识符属性，即 NSNumber。当按下 annotationView 上的标注按钮时，我有另一个视图控制器被推送到堆栈上，并且该视图有一个按钮，我想在按下时从 mapView 中删除 pin。我的问题是，我不知道如何将引脚的标识符传递给第二个视图控制器。这是一些代码。

这是我放下别针的方法：

```
-(void)press:(UILongPressGestureRecognizer *)recognizer
{
  CGPoint touchPoint = [recognizer locationInView:_worldView];
  CLLocationCoordinate2D touchMapCoordinate = [_worldView convertPoint:touchPoint toCoordinateFromView:_worldView];

geocoder = [[CLGeocoder alloc]init];
CLLocation *location = [[CLLocation alloc]initWithCoordinate:touchMapCoordinate
                                                    altitude:CLLocationDistanceMax
                                          horizontalAccuracy:kCLLocationAccuracyBest
                                            verticalAccuracy:kCLLocationAccuracyBest
                                                   timestamp:[NSDate date]];
[geocoder reverseGeocodeLocation:location
               completionHandler:^(NSArray *placemarks, NSError *error) {
                   NSLog(@"reverseGeocoder:completionHandler: called");
                   if (error) {
                       NSLog(@"Geocoder failed with error: %@", error);
                   } else {
                       CLPlacemark *place = [placemarks objectAtIndex:0];
                       geocodedAddress = [NSString stringWithFormat:@"%@ %@, %@ %@", [place subThoroughfare], [place thoroughfare], [place locality], [place administrativeArea]];
                       if (UIGestureRecognizerStateBegan == [recognizer state]) {
                           value = [number intValue];
                           number = [NSNumber numberWithInt:value + 1];
                           addressPin = [[MapPoint alloc]initWithAddress:geocodedAddress coordinate:touchMapCoordinate
                                                                   title:geocodedAddress identifier:number];
                           NSLog(@"The identifier is %@", number);
                           [_annotationArray addObject:addressPin];
                           [_worldView addAnnotation:addressPin];
                           NSLog(@"The number of pins in the annotation array is: %u",_annotationArray.count);
                       }
                   }
               }];
} 
```

这是我创建第二个视图控制器的地方：

```
-(void)mapView:(MKMapView *)mapView
annotationView:(MKAnnotationView *)view
calloutAccessoryControlTapped:(UIControl *)control
{
  PinViewController *pinViewController = [[PinViewController alloc]init];
  [[self navigationController]pushViewController:pinViewController animated:YES];

  pinViewController.label.text = view.annotation.title;
} 
```

这是我的 MKAnnotation 类：

```
#import <CoreLocation/CoreLocation.h>
#import <MapKit/MapKit.h>

@interface MapPoint : NSObject <MKAnnotation>
{
NSString *_address;
CLLocationCoordinate2D _coordinate;
NSNumber *_identifier;
}

- (id)initWithAddress:(NSString*)address
    coordinate:(CLLocationCoordinate2D)coordinate
         title:(NSString *)t
    identifier:(NSNumber *)ident;

//This is a required property from MKAnnotation
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

//This is an optional property from MKAnnotataion
@property (nonatomic, copy) NSString *title;
@property (nonatomic, readonly, copy) NSString *subtitle;
@property (nonatomic) BOOL animatesDrop;
@property (nonatomic) BOOL canShowCallout;

@property (copy) NSString *address;
@property (copy, nonatomic) NSNumber *identifier;

@end

#import "MapPoint.h"

@implementation MapPoint

@synthesize title, subtitle, animatesDrop, canShowCallout;
@synthesize address = _address, coordinate = _coordinate, identifier = _identifier;

-(id)initWithAddress:(NSString *)address
   coordinate:(CLLocationCoordinate2D)coordinate
        title:(NSString *)t
   identifier:(NSNumber *)ident
{
self = [super init];

if (self) {
    _address = [address copy];
    _coordinate = coordinate;
    _identifier = ident;

    [self setTitle:t];

    NSDate *theDate = [NSDate date];

    subtitle = [NSDateFormatter localizedStringFromDate:theDate
                                              dateStyle:NSDateFormatterMediumStyle
                                              timeStyle:NSDateFormatterMediumStyle];
    }
return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:50:12.050

尝试以下操作：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {
    MyAnnotation *myAnnotation = view.annotation;
} 
```

* * *

只需将其作为属性添加到您的 SecondViewController 中：

```
-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
  PinViewController *pinViewController = [[PinViewController alloc]init];
  [[self navigationController]pushViewController:pinViewController animated:YES];

  pinViewController.label.text = view.annotation.title;
  pinViewController.annotation_id = view.annotation.some_id; 
} 
```

* * *

从你的第一个 ViewController 添加 segue 尝试到第二个 ViewController 并检查你的类，如下所示：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {
    [self performSegueWithIdentifier: @"segue_name" sender: view];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if([segue.identifier isEqualToString: @"segue_name"]) {
        SecondViewController *vc = segue.destinationViewController;
        vc.variable_name = view.annotation.title;
       MyAnnotation vc.annotation_id*myAnnotation = view.annotation.some_id;
    }annotation;
} 
```

# .htaccess - mod-rewrite，htaccess 和 pass through

> ID：13677190
> 
> 赞同：1
> 
> 时间：2012-12-03T04:34:31.727
> 
> 标签：.htaccess, mod-rewrite

我有一个 .htaccess 问题，它正在慢慢破坏我的理智。在我的项目中，我有一个包含 404.php 的根文件夹，以及一个名为**signup**的显式子目录。该子目录包含一个名为**index.php**的文件，该文件执行处理。该项目在 Windows 7 下使用 XAMPP。

根 .htaccess 文件包含以下内容：

```
Options +FollowSymlinks

RewriteEngine On

ErrorDocument 404 /404.php 
```

**注册**物理子目录中的 .htaccess包含：

```
RewriteEngine On
RewriteOptions inherit

Options +FollowSymlinks
RewriteCond %{REQUEST_URI} ^/signup/page1$ [NC]
RewriteRule (.*) signup/index.php?page=1 [NC,L] 
```

下面的重写日志似乎在重写模块甚至可以检查它之前决定*/signup/page1*不存在。有没有人对可能导致此问题的原因有任何想法？

```
10.1.1.201 - - [03/Dec/2012:15:06:58 +1100] [testsite.com/sid#463bd0][rid#4412b10/initial] (1) [perdir C:/workspace/project/public/signup/] pass through C:/workspace/project/public/signup/page1
10.1.1.201 - - [03/Dec/2012:15:06:58 +1100] [testsite.com/sid#463bd0][rid#4500fc0/initial/redir#1] (3) [perdir C:/workspace/project/public/] strip per-dir prefix: C:/workspace/project/public/404.php -> 404.php
10.1.1.201 - - [03/Dec/2012:15:06:58 +1100] [testsite.com/sid#463bd0][rid#4500fc0/initial/redir#1] (3) [perdir C:/workspace/project/public/] applying pattern '(.*)' to uri '404.php' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:24:11.097

你必须在你的目录里面`RewriteBase`这样使用：`.htaccess``signup`

```
RewriteEngine On
RewriteOptions inherit
Options +FollowSymlinks

RewriteBase /signup

RewriteRule ^page1$ /signup/index.php?page=1 [NC,L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:46:23.437

试试这个：

```
RewriteEngine On
RewriteRule ^signup/page1/?$  http://mydomain.com/signup/index.php?page=1 [L] 
```

# python - Windows 上的 iTunes 11 脚本

> ID：13677193
> 
> 赞同：10
> 
> 时间：2012-12-03T04:34:53.683
> 
> 标签：python, itunes, win32com, itunes-sdk

有谁知道以编程方式检查播客并通过 Python 为 Windows 上的 iTunes 11 创建播放列表的方法？

在 iTunes 11 之前，可以使用该`win32com.client`软件包在 Windows 上通过 Python 编写脚本。虽然从技术上讲这仍然是可能的，但 iTunes 11 已经删除了 API 的重要部分。Apple 还从其网站上删除了 iTunes COM SDK 文档，并且该`win32com.client`接口一直依赖于惰性方法查找（因此无法检查方法列表或其预期参数的包装 COM 对象）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:25:06.947

我发现的最佳解决方案是使用网络上的[示例脚本](http://samsoft.org.uk/iTunes/scripts.asp)来猜测 API 并使用 iPython 来验证假设。看起来好像布尔属性`Podcast`在 false 时不存在。

对于 iTunes 10，可以写

```
is_podcast = track.Podcast 
```

但在 iTunes 11 中，需要编写

```
is_podcast = getattr(track, 'Podcast', False) 
```

为了能够重新同步任何创建的播放列表，可以[恢复旧的侧边栏](http://howto.cnet.com/8301-11310_39-57556277-285/restore-the-traditional-sidebar-view-in-itunes-11/)，转到设备，转到播客选项卡，然后选中要同步的播放列表（与 iTunes 10 一样）。

# titanium - 使用 HTTPCLient Titanium 状态设置按钮的背景

> ID：13677198
> 
> 赞同：1
> 
> 时间：2012-12-03T04:35:19.233
> 
> 标签：titanium, httpclient

我有一个按钮，当我单击按钮时，我将操作发送一个 HTTPClient 请求。如果成功，我将更改按钮的背景图像并设置启用 = false ..如果不成功，请不要更改。我该怎么办？我使用了一个变量并基于它但没有成功。这是我的 HTTP 客户端代码

```
var added;
var url ="http://192.168.1.14/add/";
button.addEventListenner('click',function(e){
   add(url);
   if(added==1)
   {
        //set background for button 
   }
   else
   {
      //don't set background
   }
});
function add(url)
{
var client = Ti.Network.createHTTPClient({
enableKeepAlive : true,
onload : function(e) {
  added=1;
  Ti.API.info('Load success');
  Ti.API.info('Status:'+this.status);
},
onerror : function(e) {
  added=0;
  alert(L('cant_connect'));
},
timeout : 10000 // in milliseconds
});

client.open("GET",url);
client.send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:03:15.690

在函数 add(url) 中更改按钮背景。

```
onload : function(e) {added=1;Ti.API.info('Loadsuccess');Ti.API.info('Status:'+this.status);//set background for button }, 
```

如果您的回调返回错误，按钮背景将保持不变。这是因为它的异步调用。一旦你调用函数 add(url) ，它就会向 httpclient 发送一个请求。此调用旁边的代码将被执行，当 http 调用返回时，按钮的背景不会发生任何事情。

# android - JmDNS 在 android 4.1 上无法正常工作

> ID：13677199
> 
> 赞同：4
> 
> 时间：2012-12-03T04:35:26.843
> 
> 标签：android, jmdns

**域名解析系统**

我在[这里](http://home.heeere.com/tech-androidjmdns.html)实现 JmDNS 如下。在我的 android 2.3.5 htc Evo 上运行代码时，我能够发现我的 linux 计算机。但是，当我在我的三星 Galaxy s3 (4.1.0) 上运行相同的代码时，什么也没有出现。奇怪的是，一周前它还在我的 4.1 上工作，现在不行了。我在[这里](http://snctln.com/2012/08/03/jmdns-and-android-4-0/)尝试过其他人的解决方案，但没有运气。如果有人经历过这一点，并且可以阐明为什么姜饼与 jmdns 而不是 jellybean 合作。

**澄清：**

我的 android 4.1 设备不会解析除从设备创建的服务之外的任何服务。我的 2.3 设备将解析除从 4.1 设备创建的服务之外的服务。可以是ip6到ip4吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T05:32:29.327

**解决了：**

[我在这里](http://snctln.com/2012/08/03/jmdns-and-android-4-0/)部分遵循了建议，但我没有创建（字符串主机名）而是创建（InetAddress 地址）。

```
String ip = Formatter.formatIpAddress(wifiManager.getConnectionInfo().getIpAddress());
_bindingAddress = InetAddress.getByName(ip);
_jmdns.create(_bindingAddress); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T09:46:13.203

我很确定以下代码可以在我的手机（android 4.1）上运行，供其他人参考~

```
WifiManager wifi=(WifiManager)getSystemService(android.content.Context.WIFI_SERVICE);

WifiInfo wifiinfo = wifi.getConnectionInfo();
int intaddr = wifiinfo.getIpAddress();

byte[] byteaddr = new byte[] { (byte) (intaddr & 0xff), (byte) (intaddr >> 8 & 0xff), (byte) (intaddr >> 16 & 0xff), (byte) (intaddr >> 24 & 0xff) };
InetAddress addr=InetAddress.getByAddress(byteaddr); //Need to process UnknownHostException

jmdns=JmDNS.create(addr); 
```

# .net - 使用 RNGCRYPTOSERVICEPROVIDER 在指定范围内生成随机数

> ID：13677200
> 
> 赞同：2
> 
> 时间：2012-12-03T04:35:46.377
> 
> 标签：.net, vb.net, random, cryptography

我附带了以下编码来生成 1000-9999 内的范围：

```
Dim byt As Byte() = New Byte(1000) {}

Dim rngCrypto As New RNGCryptoServiceProvider()
rngCrypto.GetBytes(byt)

Dim randomNumber As Integer = BitConverter.ToInt32(byt, 9999)
Label4.Text = randomNumber 
```

它显示错误：

> 指数超出范围。必须是非负数且小于集合的大小。参数名称：`startIndex`

我已经完成了以下代码。这是正确的吗？

公共子secrand()

```
 Static r As Random = Nothing

    If r Is Nothing Then
        Dim seed() As Byte = New Byte(4) {}
        Dim rng As New RNGCryptoServiceProvider
        rng.GetBytes(seed)
        r = New Random(BitConverter.ToInt32(seed, 0))
        Label4.Text = r.Next(1000, 9999)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T12:16:38.357

第二个参数`BitConverter.ToInt32`是字节数组的偏移量。对你来说应该是 0。如果您只使用其中的 4 个字节，也没有理由获得 1000 个字节。

C# 中的工作版本：

```
public static int RandomUniform(int count)
{
    if(count <= 0)
         throw new ArgumentOutOfRangeException("count");
    var rng=new RNGCryptoServiceProvider();
    var bytes=new byte[8];
    rng.GetBytes(bytes, 0);
    return BitConverter.ToUInt64() % (uint)count;
}

Label4.Text = 1000 + RandomUniform(9000); 
```

在 VB.net 中，这看起来类似于

```
Public Shared Function RandomUniform(count As Integer) As Integer
    If count <= 0 Then
        Throw New ArgumentOutOfRangeException("count")
    End If
    Dim rng = New RNGCryptoServiceProvider()
    Dim bytes = New Byte(8) {}
    rng.GetBytes(bytes, 0)
    Return BitConverter.ToUInt64() Mod CUInt(count)
End Function 
```

这段代码有两个弱点：

1.  这很慢。的每次调用开销`RNGCryptoServiceProvider.GetBytes`很大。为了获得更好的性能，请使用几千字节的缓冲区，并且仅`GetBytes`在用完时调用。
2.  它不是完全一致的，但对于大多数应用程序来说，偏差应该足够小。

    即使使用`count`表现出最大偏差的值，您也需要超过 100 亿个样本来检测它，而`System.Random`少数样本就足够了。即偏差大约比 for 小 80 亿倍`System.Random`。

如果您无法接受其中任何一个弱点，您可以查看我的[随机数生成器项目](https://github.com/MerkatorProject/Merkator.Tools/tree/master/Merkator.Tools/Random)，该项目提供快速、安全和无偏的数字。但这是以添加外部库而不是简单地编写几行代码为代价的。

# android - 软输入键盘在 Android 中不可见

> ID：13677204
> 
> 赞同：1
> 
> 时间：2012-12-03T04:36:15.020
> 
> 标签：android, keyboard, window-managers, android-windowmanager

> **可能重复：**
> [关闭/隐藏 Android 软键盘](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)

我使用以下代码隐藏默认键盘以调出我自己的，它工作正常

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

但是现在当我单击一个按钮使用以下内容时，软键盘不会重新出现。为什么？

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:40:24.787

尝试这个

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,
InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

# java - 使用 String.matches() 抛出 PatternSyntaxException？

> ID：13677208
> 
> 赞同：0
> 
> 时间：2012-12-03T04:36:34.180
> 
> 标签：java, regex, exception

我正在编写一个汇编程序来分析汇编代码并生成目标代码。但是，我在使用其中一个正则表达式函数时遇到了一些问题。我没有使用 java 正则表达式的经验，所以我不太确定我在做什么来导致这个异常。下面是引发异常的函数。第一个被评估的操作数是“0”，它当然应该评估为假。

```
//Returns true if operand is a Symbol, false otherwise.
public boolean isSymbol(String operand){
    if(!operand.equals("")){
        if(((operand.matches("[a-zA-Z]*"))&&
                (!operand.matches(".'"))) ||(operand.matches("*"))){ //Exception
            return true;
        }
        else return false;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:47:25.143

```
operand.matches("*") 
```

匹配采用正则表达式的字符串表示形式，并且 '*' 不是有效的正则表达式。对于长的正则表达式介绍，你可以看这里：[http ://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

在正则表达式中，'*' 字符表示“匹配前一个事物 0 次或更多次”。例如：

```
"a".matches("a*")        // is true
"aaaaaaa".matches("a*")  // is true
"aaaaaab".matches("a*b") // is true 
```

如果要匹配*输入字符串中的文字 ' ' 字符，则必须*像这样对正则表达式中的 ' ' 进行转义：

```
operand.matches("\\*") 
```

然后

```
"a*".matches("a\\*")       // is true
"*".matches("\\*")         // is true
"aaaa*b".matches("a*\\*b") // is true
"0".matches("\\*")         // is false, which I think is what you want. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:40:59.443

我认为你的问题是`*`表达。`*`在 java regexpx 中，它本身是有意义的，它必须遵循其他的东西（它的意思是“零次或多次”）。如果您想要文字`*`，则需要对其进行转义-`\\*` 这是 Pattern 的 javadoc，其中列出了您的选项[http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:00:21.873

尝试替换 if 条件如下：

```
if(((operand.matches("[a-zA-Z]+")) && !operand.matches(".'")))){`enter code here` 
```

这里 + 表示 1 或更多，这确保 oprand 中至少有一个 az 或 AZ。

# jsf - 使用 primefaces 在 JSF 中选择行

> ID：13677216
> 
> 赞同：0
> 
> 时间：2012-12-03T04:38:01.397
> 
> 标签：jsf, datatable, primefaces

我在尝试选择数据表中的单行时遇到了一些麻烦（我不知道发生了什么，因为我的代码是基于 primefaces 展示的）。

该表首先填充了结果匹配，然后我尝试选择一行，最后尝试执行一些过程。当我尝试处理该单行时出现问题，没有调用它的实际方法。

```
 <h:form id="form2">
        <p:dialog header="Agregar Producto" widgetVar="dlgAgregarProducto" modal="true" width="800" height="300">  
            <h:outputText value="Código"/>   
            <h:inputText value="#{promocionController.strIdProducto}"/>
            <h:outputText value="Nombre"/>     
            <h:inputText value="#{promocionController.strNombre}"/>   
            <p:commandButton id="btnBuscarProducto" value="Buscar" action="#{promocionController.buscarProductosIdNombre}" update="tableBusqueda"/>  
            <p:commandButton id="btnAgregarProducto" value="Agregar" action="#{promocionController.agregarProductos}" />  

            <p:dataTable id="tableBusqueda" var="prod" value="#{promocionController.obtenerProductos()}" 
                         rowKey="#{prod.idProducto}" selection="#{promocionController.arrProductosSeleccionados}" selectionMode="single">

                <p:column style="width:24%">
                    <f:facet name="header">
                        <h:outputText value="Código"/>
                    </f:facet>
                    <h:outputText value="#{prod.idProducto}"/>
                </p:column>

                <p:column style="width:24%">
                    <f:facet name="header">
                        <h:outputText value="Foto"/>
                    </f:facet>
                    <h:outputText value="foto"/>
                </p:column>                

                <p:column style="width:24%">
                    <f:facet name="header">
                        <h:outputText value="Descripción"/>
                    </f:facet>
                    <h:outputText value="#{prod.descripcion}"/>
                </p:column>

                <p:column style="width:24%">
                    <f:facet name="header">
                        <h:outputText value="Marca"/>
                    </f:facet>
                    <h:outputText value=""/>
                </p:column>

                <p:column style="width:24%">
                    <f:facet name="header">
                        <h:outputText value="Modelo"/>
                    </f:facet>
                    <h:outputText value="#{prod.modelo}"/>
                </p:column>

                <p:column style="width:24%">
                    <f:facet name="header">
                        <h:outputText value="Precio"/>
                    </f:facet>
                    <h:outputText value="#{prod.precio}"/>
                </p:column> 

            </p:dataTable>                            
        </p:dialog> 
    </h:form> 
```

支持豆：

```
@ManagedBean(name = "promocionController")
@SessionScoped
public class PromocionCO {
    arrProductosPromocion = new ArrayList<Producto>();
    arrProductosSeleccionados = new ArrayList<Producto>();
}
public void buscarProductosIdNombre() {
    productoDAO = new ProductoDAO();
    arrProductosBusqueda = new ArrayList<Producto>();
    arrProductosSeleccionados = new ArrayList<Producto>();
    // si la búsqueda es por nombre
    if (strIdProducto.compareTo("") == 0) {
        arrProductosBusqueda = productoDAO.obtenerProductosPorNombre(strNombre);
    } // si la búsqueda es por id
    else {
        producto = productoDAO.obtenerProductoPorId(strIdProducto);
        if (producto != null) {
            arrProductosBusqueda.add(producto);
        } else {
            arrProductosBusqueda = null;
        }
    }
}

public void agregarProductos() {
    for (int i = 0; i < arrProductosSeleccionados.size(); i++) {
        arrProductosPromocion.add(arrProductosSeleccionados.get(i));
    }
}
public ArrayList<Producto> obtenerProductos() {
    return arrProductosBusqueda;
}
public ArrayList<Producto> getArrProductosSeleccionados() {
    return arrProductosSeleccionados;
}

public void setArrProductosSeleccionados(ArrayList<Producto> arrProductosSeleccionados) {
    if (arrProductosSeleccionados != null) {
        this.arrProductosSeleccionados = arrProductosSeleccionados;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:00:13.850

这是因为您的`selection`属性指向一个`ArrayList`of`Producto`而不是单个元素。由于您正在使用带有属性`selectionMode="single"`的数据表，因此`selected`应该指向支持 bean 中的单个元素：

```
Producto selectedProducto;

public Producto getSelectedProducto() {
    return selectedProducto;
}

public void setSelectedProducto(Producto producto) {
    selectedProducto = producto;
} 
```

最后，在你的 dataTable 中指定这个元素`selection`：

```
 <p:dataTable id="tableBusqueda" var="prod" selectionMode="single"
               value="#{promocionController.obtenerProductos}" 
               selection="#{promocionController.selectedProducto}"> 
```

现在，在选择一行后，`public void setSelectedProducto(Producto producto)`将调用该方法。

* * *

与具体问题无关，当指向支持 bean 中的值时，最好使用 getter/setter 方法：

```
<p:dataTable id="tableBusqueda" var="prod" 
             value="#{promocionController.obtenerProductos}" .../> 
```

一般来说，`get<NameOfTheObject>`在您的情况下，适当的 getter/setter 应该如下所示：

```
public List<Producto> getObtenerProductos() 
```

# php - PHP没有从一个来源写入文件

> ID：13677218
> 
> 赞同：0
> 
> 时间：2012-12-03T04:38:19.650
> 
> 标签：php, file

我有一个问题，我似乎无法找到解决方案。我正在尝试写入平面文本文件。我已经在屏幕上回显了所有变量，验证了用户的权限（www-data），只是为了咧嘴笑，将整个文件夹中的所有内容都设置为 777 - 一切都无济于事。最糟糕的是我可以从另一个文件调用相同的函数并写入。我看不到在这里找到共同点......

```
function ReplaceAreaInFile($AreaStart, $AreaEnd, $File, $ReplaceWith){
$FileContents = GetFileAsString($File);
$Section = GetAreaFromFile($AreaStart, $AreaEnd, $FileContents, TRUE);
if(isset($Section)){
    $SectionTop = $AreaStart."\n";
    $SectionTop .= $ReplaceWith;
    $NewContents = str_replace($Section, $SectionTop, $FileContents);

    if (!$Handle = fopen($File, 'w')) {
        return "Cannot open file ($File)";
        exit;
    }/*
    if(!flock($Handle, LOCK_EX | LOCK_NB)) {
        echo 'Unable to obtain file lock';
        exit(-1);
    }*/
    if (fwrite($Handle, $NewContents) === FALSE) {
        return "Cannot write to file ($File)";
        exit;
    }else{
        return $NewContents;
    }
}else{
        return "<p align=\"center\">There was an issue saving your settings. Please try again. If the issue persists contact your provider.</p>";
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:57:17.037

尝试...

```
$Handle = fopen($File, 'w');
if ($Handle === false) {
    die("Cannot open file ($File)");
}
$written = fwrite($Handle, $NewContents);
if ($written === false) {
    die("Invalid arguments - could not write to file ($File)");
}
if ((strlen($NewContents) > 0) && ($written < strlen($NewContents))) {
    die("There was a problem writing to $File - $written chars written");
}
fclose($Handle);
echo "Wrote $written bytes to $File\n"; // or log to a file
return $NewContents; 
```

并检查错误日志中的任何问题。应该有一些东西，假设您启用了错误日志记录。

您需要检查写入的字符数，因为在 PHP 中 fwrite 的行为如下：

> 在遇到 fwrite() 在完全期望返回值为 false 的情况下返回 0 的问题后，我查看了 php 的 fwrite() 本身的源代码。如果您传入无效参数，该函数只会返回 false。任何其他错误，如管道损坏或连接关闭，将导致返回值小于 strlen($string)，在大多数情况下为 0。

另外，请注意，您可能正在写入文件，但写入的是您期望写入的不同文件。绝对路径可能有助于跟踪这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:15:56.100

我最终为此使用的最终解决方案：

```
function ReplaceAreaInFile($AreaStart, $AreaEnd, $File, $ReplaceWith){
    $FileContents = GetFileAsString($File);
    $Section = GetAreaFromFile($AreaStart, $AreaEnd, $FileContents, TRUE);
    if(isset($Section)){
        $SectionTop = $AreaStart."\n";
        $SectionTop .= $ReplaceWith;
        $NewContents = str_replace($Section, $SectionTop, $FileContents);
        return $NewContents;
    }else{
        return "<p align=\"center\">There was an issue saving your settings.</p>";
    }
}

function WriteNewConfigToFile($File2WriteName, $ContentsForFile){
    file_put_contents($File2WriteName, $ContentsForFile, LOCK_EX);
} 
```

我确实最终使用了绝对文件路径，并且不得不检查文件的权限。我必须确保 Apache 中的 www-data 用户能够写入文件并且也是运行脚本的用户。

# jsoup - 使用 jsoup 从 html 中检索信息

> ID：13677219
> 
> 赞同：0
> 
> 时间：2012-12-03T04:39:05.420
> 
> 标签：jsoup

我想使用 Jsoup 从 html 中检索某些信息。

这些是我要检索的项目：

```
<td class="text" nowrap valign="top">&#x2022; 2012年05月14-23日&lt;/td>
<td class="text" valign="top"><a href="/events/2012/1205142301.pdf" target="new" class="text">北京、湖南商务考察团&lt;/a></td> 
```

我设法检索了第二个项目，其中包含一个 URL 和一个中文标题，但不是第一个项目。有人可以帮忙吗？

我使用以下代码检索第二项：

```
Element image = doc.select("td.text a").get(c);
String v = image.attr("href");
url = ("http://www.s-cba.org.sg" + v);
Log.d("url", url);

Element eventName = doc.select("td.text a").get(c);
event = eventName.text();
Log.d("event", event); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:48:59.857

```
Element link = doc.select("td.text a").first();
Element dateTd = link.parent().previousElementSibling();

String url = link.attr("href")
String title = link.text();
String date = dateTd.text(); 
```

# c++ - 在创建跨平台串行读/写应用程序以与我的 mbed 电子项目进行通信时，打包应用程序是否优于 C++？

> ID：13677222
> 
> 赞同：0
> 
> 时间：2012-12-03T04:39:14.047
> 
> 标签：c++, google-chrome, package

我想创建一个跨平台的串行读/写应用程序来与我的 mbed 电子项目进行通信。我无法决定是在 Chrome 打包应用程序还是 c++（使用 openFrameworks 框架）中编写此应用程序。我在 html 和 javascript 中编码的经验比在 c++ 中编码的经验要多，但我不介意学习 c++。打包应用程序的想法吸引我的是用 html 和 javascript 编写代码的能力。最终我的项目将是开源的。使用打包应用程序与 C++ 相比有哪些优缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:08:35.087

C++ 可用于进行芯片级编程和操作需要大量编码以实现您想要的功能的芯片。

打包的应用程序提供与原生应用程序一样强大的体验，但与网页一样安全。就像 Web 应用程序一样，打包的应用程序是用 HTML5、JavaScript 和 CSS 编写的。但是打包应用程序的外观和行为类似于本机应用程序，并且它们具有类本机的功能，这些功能比 Web 应用程序可用的功能强大得多。

打包应用程序将是一个现代概念，它将是一个更好的选择，因为当您的项目的审阅者发现您正在使用一个新概念时，它会更加重视您的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T00:00:34.560

我正在开发一个设置嵌入式设备所需的应用程序，该应用程序必须是跨平台的，因为它将在 Windows、OSX 和 Linux 中使用。我正在使用 RXTX 库在 java 中开发它，该库在三个平台上都经过测试并且工作正常。

# .net-4.0 - 用于 Web SSO 的自定义 STS

> ID：13677228
> 
> 赞同：1
> 
> 时间：2012-12-03T04:40:00.953
> 
> 标签：.net-4.0, wif, saml-2.0

我们有一个面向 Internet 的 Web 应用程序正在运行，最近我们公司与拥有另一个网站的第三方公司达成了一些协议。我们的想法是为我们当前的客户提供对这个外部网站的访问。我们的用户将单击我们解决方案中的内部链接，该链接将打开一个带有第三方站点的新浏览器窗口。用户无需在第 3 方公司站点再次进行身份验证。我们已同意为我们的用户发行 SAML2 代币，其中包含一组第三方网站用于查询向我们的用户呈现个性化视图的声明

在我们的场景中重要的是，当用户决定访问第 3 部分网站时，他们已经在我们的网站中进行了身份验证。

实现这一切的最佳方式是什么？我正在考虑使用 WIF SDK 实现自定义 STS 以生成这些 SAML2 令牌，然后使用 HTTP POST (cookie) 将其传递给第 3 方站点。如果这是正确的方法，那么任何指针，提示？ADFS 会有什么不同吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:55:09.777

听起来您将扮演身份提供者的角色 - 负责处理用户的“手动”身份验证并生成 SAML 响应以将用户 SSO 提供给第 3 方网站。

实现自己的 IdP 并非易事（需要了解一些[规范](http://saml.xml.org/saml-specifications)），因此除非您将其作为一个开发项目，否则您可能需要考虑像 Microsoft ADFS、PortalGuard（我为他们工作）这样的 COTS或 Ping 身份。

由于您专门询问了 ADFS，它对作为用户存储库的 Active Directory 提供本机支持，并且其声明转换引擎具有一些有趣的功能（如果您遇到复杂的 SP-IdP 链接场景）。除了 SAML，它还支持 WS-Federation，这对于与 Microsoft 堆栈中的其他产品集成非常重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:25:53.273

如果您的应用程序是 ASP.NET，则将您的应用程序连接到 ADFS。

因此，要访问您的应用程序，用户必须登录。

然后对于到第 3 方应用程序的链接，请使用 IDP 启动方案（[IdpInitiatedSignOnPage 类概述](http://msdn.microsoft.com/en-us/library/ee895361.aspx)）。这会将 SAML2 令牌发送到第 3 方应用程序。ADFS 将为您处理 SSO。

为此，您必须将第 3 方应用程序配置为 SAML 应用程序而不是 WS-Fed 应用程序。

# jquery - 停止 jQuery 动画“循环”

> ID：13677234
> 
> 赞同：0
> 
> 时间：2012-12-03T04:40:37.243
> 
> 标签：jquery, jquery-animate

我有一个由 jquery 提供支持的导航栏来扩展子导航。问题是，如果您快速将鼠标悬停在选项卡上，它们将开始循环，直到所有动画都完成，但我希望它在开始另一个动画之前完成一个动画，而不是“排队”它们。这是现场示例：[http](http://www.nicrogen.com/games/per/index.php) : //www.nicrogen.com/games/per/index.php 这是 jquery 代码：

```
var value='';

$(document).ready(function(){
$('nav li').on('mouseenter',function( e ){
    if((value==$(this).attr('data-open'))){

    }else{
        $('#'+value).slideUp();
        $('nav li').removeClass("selectednav");
        value = $(this).attr('data-open');
        $('#'+value).slideDown();
        if(value!='no'){
            $(this).addClass("selectednav");
        }   
    }     
});

$('nav li').on('mouseleave',function( e ){
    $('#'+value).on('mouseleave',function( e ){
        $('#'+value).slideUp();
        $('nav li').removeClass("selectednav");
        value='';
    });
});

$('#header').on('mouseenter',function( e ){
    $('#'+value).slideUp();
    $('nav li').removeClass("selectednav");
    value='';
});
}); 
```

我想提一下，我看到了类似问题的其他解决方案，他们只是在中途中断了动画，我希望它完成当前动画然后停止。

# c# - C# 关键字类似于“this”但适用于当前类类型？

> ID：13677237
> 
> 赞同：3
> 
> 时间：2012-12-03T04:40:52.673
> 
> 标签：c#, class, this, instance, keyword

是否有`keyword`类似于如何`this`引用当前实例来引用当前类类型？

我的意图是避免在引用静态成员或枚举时必须键入完整的类名，但我想在它前面加上“this”之类的前缀以提高可读性，就像我对实例成员所做的那样。原因是某些类名非常大并且导致过度包装。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T04:41:54.483

我不认为有一个关键字，但也许一样好：

```
this.GetType(); 
```

[`GetType`](http://msdn.microsoft.com/en-us/library/system.object_methods.aspx)是由`System.Object`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T15:18:47.623

如果您将命名空间包含在 中`using`，您将不会真正输入完整路径。

您可以使用 为类名命名`using`，例如：

```
using ClassA = Really.Deep.Class.In.Namepsace.For.SomePurpose.ClassA; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T04:42:06.903

`typeof(this)`会做你所追求的。

编辑：我的立场是正确的。 `typeof(this)`不是有效的 C#。dbaseman 是正确的： `this.GetType()`会工作。

# yii - 如何在特定的时间间隔内运行 Yii 控制器动作？

> ID：13677240
> 
> 赞同：2
> 
> 时间：2012-12-03T04:41:16.923
> 
> 标签：yii

我想在特定的时间间隔内运行 Yii 控制器动作。所以我使用 Windows 7 任务调度程序来执行此操作。但什么也没有发生。是否可以使用***Windows 任务调度程序***运行 Yii 控制器操作？

如果是这样，这样做的语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:37:57.840

您可以使用 cron 作业来实现这一点。以下是一些对您有帮助的链接。

**[1.使用 Yii 实现 cron 作业](http://www.yiiframework.com/wiki/91/implementing-cron-jobs-with-yii/)** （*也查看那里的评论*）

**[2.Yii和cron作业](https://stackoverflow.com/questions/5235888/yii-and-cron-jobs)**

**[3.控制台应用程序](http://www.yiiframework.com/doc/guide/1.1/en/topics.console)**

**[4.Yii-Crontab - 一个扩展（*管理系统cron作业。支持应用程序控制台命令*）](http://www.yiiframework.com/extension/yii-crontab/)**

**[5.Runactions](http://www.yiiframework.com/extension/runactions/)**

# c++ - 如何检查是否 EOF（使用 getline 后）

> ID：13677252
> 
> 赞同：0
> 
> 时间：2012-12-03T04:43:42.313
> 
> 标签：c++, ifstream, eof, getline

请参阅下面的更新！

我的代码（现在我包含更多）：

```
while(getline(checkTasks, workingString)){
            countTheDays = 0;
            // Captures a clean copy of the line in tasks.dat in it's entirety, stores in workingString.
            char nlcheck;
            checkTasks.get(nlcheck);
            if(nlcheck == '\n'){
            }
            else{
                checkTasks.unget();
                //getline(checkTasks, workingString);
                // Breaks that line up into more usable pieces of information.
                getline(check2,tName, '\t');
                getline(check2,tDate, '\t');
                getline(check2,trDate, '\t');
                getline(check2,tComplete, '\n');
                // Converts the string form of these pieces into usable integers.
                stringstream(tDate.substr(0,tDate.find_first_of('/'))) >> year;
                stringstream(tDate.substr(tDate.find_first_of('/')+1,tDate.find_last_of('/'))) >> month;
                stringstream(tDate.substr(tDate.find_last_of('/')+1,tDate.length()-1)) >> day;
                stringstream(tComplete) >> checkComplete;
                stringstream(trDate) >> checkReminder;              

                // Adds the number of days until your task is due!
                if(year != date[0]){
                    for(int i = date[1]; i <= 12; i++){
                        countTheDays += System::DateTime::DaysInMonth(date[0], i);                      
                    }
                    countTheDays-= date[2];
                    for (int i = 1; i<= month; i++){
                        countTheDays +=System::DateTime::DaysInMonth(year, i);
                    }
                    countTheDays -= (System::DateTime::DaysInMonth(year, month) - day);
                }
                else if(month != date[1]){
                    for(int i = date[1]; i <= month; i++){
                        countTheDays += System::DateTime::DaysInMonth(date[0], i);
                    }
                    countTheDays -= (date[2]);
                    countTheDays -= (System::DateTime::DaysInMonth(year, month) - day);
                }
                else{
                    countTheDays+= System::DateTime::DaysInMonth(date[0], month);
                    countTheDays -= (System::DateTime::DaysInMonth(year, month) - day);
                    countTheDays -= date[2];                    
                }

                // If the task is nearing it's due date (the time frame specified to be notified) it'll notify user. 
                // Only coded to work if the task is due in the current or following months.
                if(countTheDays <= checkReminder){
                    if( countTheDays < 0){
                        cout << endl << endl << tName << " is past due!" << endl;
                        cout << "Should I keep reminding you about this task? Enter Y or N. ";
                        cin >> continueToRemind;
                    }
                    else{
                        cout << endl << endl << tName << " is due in " <<countTheDays << " days! Don't forget!" << endl;
                        cout << "Should I keep reminding you about this task? Enter Y or N. ";
                        cin >> continueToRemind;
                        }

                    // If user doesn't want to be reminded, begins process of converting that line in the file to usable info
                    // and 'overwriting' the old file by creating a new one, deleting the old one, and renaming the new one.
                    if(continueToRemind == "n" || continueToRemind == "N"){
                        fileModified = true;
                        string line;
                    /*  vector<string> lines;
                        while(getline(tasksClone, line)){
                            lines.push_back(line);
                        }
                        lines.erase(remove(lines.begin(), lines.end(), workingString), lines.end());
                        if (!lines.empty()) {
                            auto i=lines.begin();
                            auto e=lines.end()-1;
                            for (; i!=e; ++i) {
                                saveTasks << *i << '\n';
                            }
                            saveTasks << *i;
                        }*/

                        // This writes a copy of the tasks.dat file, minus the task that the user elected not to be notified of.'
                        while(getline(tasksClone, testBuffer)){
                            if(testBuffer == workingString){
                                // This condition does nothing. Essentially erasing the 'completed' task from the list.
                            }
                            else if(testBuffer != workingString && tasksClone.eof()){
                                // This writes everything except the specified task to taskbuffer.dat
                                saveTasks << testBuffer;
                            }
                            else { 
                                saveTasks << testBuffer << '\n';
                            }
                        }                   
                    }                       
                }
            }       
        }
    }
    else{
        cout << "The tasks file is empty, you must not have any tasks!" << endl;
    } 
```

我希望这个问题是有道理的！

谢谢

马库斯

更新：再次修改代码。在告诉它删除 1 个任务后，它永远不会运行此循环。当前代码：

```
while(getline(tasksClone, testBuffer)){
        if(testBuffer == workingString){
            // This condition does nothing. Essentially erasing the 'completed' task from the list.
        }
        else if(testBuffer != workingString && tasksClone.eof()){
            // This writes everything except the specified task to taskbuffer.dat
                saveTasks << testBuffer;
                            }
        else { 
                saveTasks << testBuffer << '\n';
        } 
```

}

输入文件：

```
test1   2012/12/13  10  0;
test2   2012/12/23  20  0;
test3   2012/12/31  28  0;
\n 
```

输出文件（告诉它删除test1和2之后）：

```
test2   2012/12/23  20  0;
test3   2012/12/31  28  0;
\n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:13:11.133

我要做的第一件事就是将整个文件读入一个字符串向量，每个字符串对应于文件中的一行。这可以很容易地完成。

```
std::vector<std::string> lines;
std::string line;
while (std::getline(tasksClone, line))
    lines.push_back(line); 
```

一旦你有了它，处理就会变得容易得多。您可以像这样检查一行是否为空：

```
if (lines[i].empty()) 
```

这相当于检查换行符之后的下一个字符是否是另一个换行符。您可以从向量中删除您不想要的任何行，如下所示：

```
lines.erase(std::remove(lines.begin(), lines.end(), workingString), lines.end()); 
```

取而代之的是，您可以通过在从文件中读取行的循环中放置一个测试来避免将它们首先放入向量中。

完成所有处理后，您可以将这些行写回另一个文件，手动插入换行符。

```
if (!lines.empty()) {
    auto i=lines.begin(), e=lines.end()-1;
    for (; i!=e; ++i) {
        saveTasks << *i << '\n';
    }
    saveTasks << *i;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:20:24.530

而不是在每行的末尾添加一个换行符，但前提是之后还有另一行要写，我只会在每行*之前*添加一个换行符。这会让你在文件的开头得到换行符，最后没有换行符，就像你想要的那样。

像往常一样，类似的代码`while (!your_file.eof())`被破坏了。你可能想要这样的东西：

```
while (std::getline(taskClone, buffer)) {
    if (buffer.empty()) 
        continue;

    if (keep(buffer)) // whatever condition you need
        saveTasks << "\n" << buffer;
} 
```

`std::remove_copy_if`您可以使用and my更轻松地执行相同的操作`ostream_prefix_iterator`：

```
// prefix_iterator.h
#include <ostream>
#include <iterator>

template <class T, 
          class charT=char, 
          class traits=std::char_traits<charT> 
>
class prefix_ostream_iterator :
    public std::iterator<std::output_iterator_tag,void,void,void,void>
{
    charT const* delimiter;
    std::basic_ostream<charT,traits> *os;
public:
    typedef charT char_type;
    typedef traits traits_type;
    typedef std::basic_ostream<charT,traits> ostream_type;

    prefix_ostream_iterator(ostream_type& s) 
        : os(&s),delimiter(0) 
    {}
    prefix_ostream_iterator(ostream_type& s, charT const *d) 
        : os(&s),delimiter(d)
    {}
    prefix_ostream_iterator<T,charT,traits>& operator=(T const &item)
    {
        // Here's the only real change from ostream_iterator:
        // Normally, the '*os << item;' would come before the 'if'.
        if (delimiter != 0) 
            *os << delimiter;
        *os << item;
        return *this;
    }

    prefix_ostream_iterator<T,charT,traits> &operator*() {
        return *this; 
    }
    prefix_ostream_iterator<T,charT,traits> &operator++() { 
        return *this; 
    }
    prefix_ostream_iterator<T,charT,traits> &operator++(int) {
        return *this; 
    }
}; 
```

将它与我在[之前的答案](https://stackoverflow.com/a/1567703/179910)`line`中发布的代理一起使用，您可以使用以下代码完成这项工作：

```
#include "line.h"
#include "prefix_iterator.h"

std::remove_copy_if(std::istream_iterator<line>(taskClone), 
                    std::istream_iterator<line>(),
                    prefix_ostream_iterator<std::string>(taskSave, "\n"),
                    [](std::string const &line) { /* decide if to keep line*/}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:38:26.543

目前还不清楚您要做什么。 `std::getline` 去除尾随的新行，因此无论何时输出已阅读的内容，都必须添加它。（如果您正在写入文本文件，如果写入的最后一个字符不是 .，则它是未定义的行为 `'\n'`。）

另请注意，您的主循环不正确。的状态 `tasksClone.eof()`是不确定的，在执行`getline`. 你需要的是这样的：

```
std::string line
while ( std::getline( tasksClone, line ) ) {
    if ( line != workingString ) {
        saveTasks << line << '\n';
    }
} 
```

在您的示例输入中，您阅读的第一行将为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T23:59:59.410

我解决了我的问题，以防万一有人想知道。它的内存效率不如预期，但它的功能是：

```
// Reads the file, checks if it's due, and if it's due prompts user to either save or delete the task.
// Captures a clean copy of the line, in its entirety, and stores it to workingString.
while(getline(checkTasks,workingString)){
    countTheDays = 0;
    // Handles newline characters.
    char nlcheck;
    checkTasks.get(nlcheck);
    if(nlcheck == '\n'){
    }
    else{
        checkTasks.unget();
        // Breaks that line up into more usable pieces of information.
        getline(check2,tName, '\t');
        getline(check2,tDate, '\t');
        getline(check2,trDate, '\t');
        getline(check2,tComplete, '\n');
        // Converts the string from of these pieces into usable integers.
        stringstream(tDate.substr(0,tDate.find_first_of('/'))) >> year;                       stringstream(tDate.substr(tDate.find_first_of('/')+1,tDate.find_last_of('/'))) >> month;                  stringstream(tDate.substr(tDate.find_last_of('/')+1,tDate.length()-1)) >> day;
        stringstream(tComplete) >> checkComplete;
        stringstream(trDate) >> checkReminder;              

        // Adds the number of days until your task is due!
        if(year != date[0]){
            for(int i = date[1]; i <= 12; i++){
                countTheDays += System::DateTime::DaysInMonth(date[0], i);                      
            }
            countTheDays-= date[2];
            for (int i = 1; i<= month; i++){
                countTheDays +=System::DateTime::DaysInMonth(year, i);
            }
            countTheDays -= (System::DateTime::DaysInMonth(year, month) - day);
        }
        else if(month != date[1]){
            for(int i = date[1]; i <= month; i++){
                countTheDays += System::DateTime::DaysInMonth(date[0], i);
            }
            countTheDays -= (date[2]);
            countTheDays -= (System::DateTime::DaysInMonth(year, month) - day);
        }
        else{
            countTheDays+= System::DateTime::DaysInMonth(date[0], month);
            countTheDays -= (System::DateTime::DaysInMonth(year, month) - day);
            countTheDays -= date[2];                    
        }

        // If the task is nearing it's due date (the time frame specified to be notified) it'll notify user. 
        if(countTheDays <= checkReminder){
            if( countTheDays < 0){
                cout << endl << endl << tName << " is past due!" << endl;
                cout << "Should I keep reminding you about this task? Enter Y or N. ";
                cin >> continueToRemind;
            }
            else{
                cout << endl << endl << tName << " is due in " <<countTheDays << " days! Don't forget!" << endl;
                cout << "Should I keep reminding you about this task? Enter Y or N. ";
                cin >> continueToRemind;
            }

            // If user doesn't want to be reminded, begins process of converting that line in the file to usable info
            // and 'overwriting' the old file by creating a new one, deleting the old one, and renaming the new one.
            if(continueToRemind == "n" || continueToRemind == "N"){
                fileModified = true;
                // Adds workingString to deleteTasks[] to be compared against later.
                deleteTasks.push_back(workingString);
            }
        }
    }
}

        int match = 0;
        // Iterates through tempTasks.dat and compares lines to workingString.
        while(getline(tasksClone, testBuffer)){
            for(int i = 0; i< deleteTasks.size(); i++){
                // If a match is found, it sets the match flag to delete that line.
                if(testBuffer ==  deleteTasks[i]){
                    match = 1;
                }
            }
            // Deletes that task.
            if(match == 1){
                //Do nothing, erasing the task
            }
            // If EOF, writes only the task, without a newline character.
            else if(tasksClone.eof()){
                saveTasks << testBuffer;
            }
            // If !EOF, also writes a newline character.
            else{
                saveTasks << testBuffer << '\n';
            }
            match = 0;
        } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-03T05:00:11.173

如果您在 Windows 或 Mac 中查看文件，则问题可能在于使用“\n”。尝试改用“\r\n”。

# c - getch() 在 C 中究竟做了什么？

> ID：13677253
> 
> 赞同：4
> 
> 时间：2012-12-03T04:43:59.587
> 
> 标签：c, turbo-c, getch

我认为（到目前为止） getch() 函数从输入缓冲区（或键盘，简单地说）读取字符。但我不得不和我的实验室导师争论。他们说 getch() 的唯一工作是保持程序执行。我知道 getch() 可以这样使用。但我只是想知道这是发明它的真正目的吗？或者，它很少用于获取单字符输入吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T04:55:47.577

`getch`用于“从与当前窗口关联的终端读取单字节字符”，[由 POSIX 指定](http://pubs.opengroup.org/onlinepubs/7908799/xcurses/getch.html)。这是它的主要功能。它可以配置为非阻塞（例如，如果没有输入，该函数会立即返回），因此您的实验室指导员说它的唯一目的是暂停程序执行是错误的。

如果您谈论的是`getch()`由 Turbo-C 实现的，那么我不确定阻塞语义，但如果它的主要目的是暂停程序执行，则该函数*肯定会*被命名为更合适的名称，例如`pause()`or`waitkb()`或类似的名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T04:49:13.457

众所周知，getch() 从输入中读取一个单字节字符。

在 Turbo C 编译器的伟大时代，

> getch 的常见用途是，如果您使用的是 turbo c 编译器或者您没有从命令提示符运行程序，则无需打开输出窗口即可查看程序的输出（如果有）

啊，那是几天！

BTW [getch 据说已被弃用。](https://stackoverflow.com/questions/814975/getch-is-deprecated)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T04:47:28.820

是的，`getch()`得到一个字符，这是正确的，这意味着你必须给一个输入字符，这是主要工作

但是在您提供输入字符之前，它会等待，这意味着直到它返回按键的值

对于获取字符输入，您可以在程序中的任何地方使用它，但是为了查看程序的输出而无需打开输出窗口（在 Turbo C 编译器中），您可以将其用作程序的最后一条语句

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-03T04:51:57.867

getch() 是一种获取用户输入字符的方法。它可用于暂停程序执行，但“暂停”只是其主要目的的副作用，即等待用户输入字符。如果保持程序执行是其唯一目的，他们就不会使用 getch()，因为还有其他方法可以保持程序执行。另外，请记住 getch() 不是独立于平台的，因此使用风险自负...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T04:47:44.737

[这里](http://pubs.opengroup.org/onlinepubs/7908799/xcurses/getch.html)有getch()的描述

它确实将按键的值作为 int 返回。

# matlab - Matlab & 和 < 运算符

> ID：13677260
> 
> 赞同：0
> 
> 时间：2012-12-03T04:45:01.037
> 
> 标签：matlab

在这个表达式中

```
lmin=lminflag & ~kmod & actminsub<nsm*pminu & actminsub>pminu; 
```

& 运算符像按位 AND 运算符吗？lminflag 和 kmod 都是以逻辑 1 或 0 作为元素的数组，而 lmin 结果也是 1 或 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T04:58:10.850

是的。

1.  `&` 是每个元素的 AND 运算符。
2.  `&&`是一个标量 AND 运算符，有条件地执行语句的其余部分。

例如，给定：

```
a = true;
b = false;
aa = [true false];
bb = [true true];
fnA = @()rand>0.5; %An anonymous function returning true half the time 
```

然后：

```
a &  b;  %returns false
a && b; %returns false (same as above) 
```

然而

```
aa &  bb;  %this an error    
aa && bb; %returns the array [true false] 
```

当操作数是具有副作用的函数时会更有趣。

```
b &  fnA;  %Returns false, and the `rand` function is called (including a small performance hit, and an update to the random state)
b && fnA;  %Returns false, and the `rand` function was not called (since `b` is false, the actual value of `fnA` doesn;t effect the result 
```

# java - 如何保持 HttpClient 连接保持活动状态？

> ID：13677261
> 
> 赞同：11
> 
> 时间：2012-12-03T04:45:01.800
> 
> 标签：java, android, http, http-post, httpclient

我正在`HttpClient`使用 POST 方法。我需要创建`HttpClient`一次并且应该使用 Keep Alive Connection。但我认为在我的情况下，它每次都建立一个新的连接。

所以，我需要使用*Keep Alive*连接`HttpClient`。

这是我的代码片段，任何帮助将不胜感激。

```
ClientConnectionManager mgr = httpclient_recv.getConnectionManager();
    hp = httpclient_recv.getParams();
    httpclient_recv = new DefaultHttpClient(
    new ThreadSafeClientConnManager(hp,mgr.getSchemeRegistry()), hp);

    while (true) {

        try {

            java.util.logging.Logger.getLogger("org.apache.http.wire")
                    .setLevel(java.util.logging.Level.FINER);
            java.util.logging.Logger.getLogger("org.apache.http.headers")
                    .setLevel(java.util.logging.Level.FINER);

            System.setProperty("org.apache.commons.logging.Log",
                    "org.apache.commons.logging.impl.SimpleLog");
            System.setProperty(
                    "org.apache.commons.logging.simplelog.showdatetime",
                    "true");
            System.setProperty(
                    "org.apache.commons.logging.simplelog.log.httpclient.wire",
                    "debug");
            System.setProperty(
                    "org.apache.commons.logging.simplelog.log.org.apache.http",
                    "debug");
            System.setProperty(
                    "org.apache.commons.logging.simplelog.log.org.apache.http.headers",
                    "debug");

            ByteArrayEntity bae = new ByteArrayEntity(byteData);
            bae.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,
                    "binary/octet-stream"));

            httppost_recv.setHeader(HTTP.CONN_DIRECTIVE,HTTP.CONN_KEEP_ALIVE);
            httppost_recv.setEntity(bae);

            {
                System.out.println("res b4 response");
                 response_recv = httpclient_recv
                        .execute(httppost_recv);
                 response_recv.getEntity().consumeContent();
                System.out.println("res a4 response");
                if (response_recv != null) {
                    byteArray = EntityUtils.toByteArray(response_recv
                            .getEntity());
                    playing  = true;
                }
                        }
                 } 
```

还有 logcat 日志是：

```
12-03 10:07:29.466: I/System.out(1529): res b4 response
12-03 10:07:29.646: D/org.apache.http.wire(1529): >> "POST /ping HTTP/1.1[EOL]"
12-03 10:07:29.666: D/org.apache.http.wire(1529): >> "Connection: Keep-Alive[EOL]"
12-03 10:07:29.686: D/org.apache.http.wire(1529): >> "Content-Length: 1[EOL]"
12-03 10:07:29.705: D/org.apache.http.wire(1529): >> "Content-Type: binary/octet-stream[EOL]"
12-03 10:07:29.716: D/org.apache.http.wire(1529): >> "Host: 192.168.1.36[EOL]"
12-03 10:07:29.725: D/org.apache.http.wire(1529): >> "User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)[EOL]"
12-03 10:07:29.736: D/org.apache.http.wire(1529): >> "[EOL]"
12-03 10:07:29.746: D/org.apache.http.headers(1529): >> POST /ping HTTP/1.1
12-03 10:07:29.746: D/org.apache.http.headers(1529): >> Connection: Keep-Alive
12-03 10:07:29.756: D/org.apache.http.headers(1529): >> Content-Length: 1
12-03 10:07:29.756: D/org.apache.http.headers(1529): >> Content-Type: binary/octet-stream
12-03 10:07:29.765: D/org.apache.http.headers(1529): >> Host: 192.168.1.36
12-03 10:07:29.765: D/org.apache.http.headers(1529): >> User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)
12-03 10:07:29.776: D/org.apache.http.wire(1529): >> "[0x0]"
12-03 10:07:29.796: D/org.apache.http.wire(1529): << "HTTP/1.1 200 OK[EOL]"
12-03 10:07:29.805: D/org.apache.http.wire(1529): << "Server: gSOAP/2.8[EOL]"
12-03 10:07:29.816: D/org.apache.http.wire(1529): << "Content-Type: binary/octet-stream[EOL]"
12-03 10:07:29.826: D/org.apache.http.wire(1529): << "Content-Length: 2048[EOL]"
12-03 10:07:29.836: D/org.apache.http.wire(1529): << **"Connection: close[EOL]"**
12-03 10:07:29.887: D/org.apache.http.headers(1529): << HTTP/1.1 200 OK
12-03 10:07:29.896: D/org.apache.http.headers(1529): << Server: gSOAP/2.8
12-03 10:07:29.896: D/org.apache.http.headers(1529): << Content-Type: binary/octet-stream
12-03 10:07:29.906: D/org.apache.http.headers(1529): << Content-Length: 2048
12-03 10:07:29.906: D/org.apache.http.headers(1529): << **Connection: close**
12-03 10:07:29.916: I/System.out(1529): res a4 response 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T04:49:55.113

> 10:07:29.746: D/org.apache.http.headers(1529): >> 连接: Keep-Alive

您正在请求保活。

> 10:07:29.836：D/org.apache.http.wire(1529)：<< **“连接：关闭 [EOL]”**

服务器拒绝它。

你最终无能为力。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-31T02:26:17.197

从 HTTP 1.1 开始，默认情况下启用 keep-alive。如果您不希望在处理 HTTP 1.1 时显式重用它，则需要关闭连接。

对于 1.0，标头是您为此“连接：保持活动”设置的内容，这只会提示您要重用连接的服务器。当处于压力之下或出于其他原因时，服务器可能会选择不同的行为，如下所述。

对于大多数目的，这里的大多数答案都是正确的，在其中添加保持活动标题并且效果很好。以下说明适用于您执行此操作但仍然不起作用的情况。

* * *

## 服务器端问题

通常，当服务器正常运行时，答案将集中在设置上，但这并不完全正确。服务器（如[Rudra](https://bitbucket.org/maniagnihotri/rudra-server)）被构建为在不同情况下表现不同。Keep-alive 附带了许多请求，服务器会在断开连接之前为您提供服务，这也是为了允许为其他人提供服务，因此在高负载的情况下，某些服务器可能会诉诸于减少 keep-alive 请求的数量为每个新连接服务。

还从收到的最后一个请求设置了超时，如果在该时间窗口内没有进一步的请求，最终将导致断开连接。很少有现代服务器可能会根据它们目前的容量来改变这一点，或者在恐慌情况下将其降至 0，从而使保持活动变得毫无意义。因此，如果您尝试连接的服务器正在经历任何此类（竞争、恐慌）情况，它可能会选择丢弃您的请求。

* * *

## 客户端问题

出于文档目的。来自[hc.apache.org](http://hc.apache.org/httpclient-3.x/performance.html#Connection_persistence)：

> HttpClient 总是尽最大努力重用连接。默认情况下启用连接持久性，无需配置。在某些情况下，这可能会导致连接泄漏，从而导致资源丢失。禁用连接持久性的最简单方法是提供或扩展一个连接管理器，该管理器在 releaseConnection 方法中释放时强制关闭连接。

HttpClient 提供了这些（阅读：琐碎的）开箱即用的东西。但是 Apache 还提供了其他一些东西，您可以添加它们来提高它的性能。

例如，可以为 HttpClient 定制 ConnectionManager(s)。

因此，可以阻止保持活动/连接持久性的是您可能正在使用的连接管理器（在您的情况下这不是真的，但在其他几种情况下可能是真的）。如果您正在获取客户端对象以从某些 API 进行调用，这对您来说可能是一个完全未知/抽象的事实。下面列出了如何自定义的示例（来自 Apache 连接管理文档）

```
PoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager();
// Increase max total connection to 200
cm.setMaxTotal(200);
// Increase default max connection per route to 20
cm.setDefaultMaxPerRoute(20);
// Increase max connections for localhost:80 to 50
HttpHost localhost = new HttpHost("locahost", 80);
cm.setMaxPerRoute(new HttpRoute(localhost), 50);

CloseableHttpClient httpClient = HttpClients.custom()
    .setConnectionManager(cm)
    .build(); 
```

（有关详细信息，请参阅[有关连接管理](https://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html)的 Apache 文档）

如果您遇到此问题，请尝试不使用 CM 或创建您自己的 HttpClient 对象。也不必为多个连接使用 CM。内置的CM足够公平。如果您看到性能损失，您可以编写自己的连接管理器。

但是，在您的情况下，您的服务器不是很支持它可能根本不支持 Keep-alive，即使您有这些标头而没有。您需要检查超时标头作为响应，在向服务器发送新请求中的 keep-alive 以建立该服务器是投诉的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T00:55:43.823

你为什么不对所有请求使用同一个客户端？？？

我一直在开发一个需要向许多 Web 服务请求大量数据的应用程序，为此我只使用一个静态客户端并且工作完美！

我创建了一个返回 HttpClient 的类和另一个管理我的所有请求（POST 和 GET）的类，既简单又方便；）

# ruby - 检查元素是否存在

> ID：13677263
> 
> 赞同：8
> 
> 时间：2012-12-03T04:45:04.140
> 
> 标签：ruby, selenium, webdriver

无论如何要检查 Selenium Web 驱动程序中是否存在元素？我尝试使用此代码：

```
if @driver.find_element(:link, "Save").displayed? == true 
```

但它会出现异常，这不是我所期望的，因为我仍然希望脚本继续运行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T18:36:53.437

我不是 Ruby 专家，可能会犯一些语法错误，但您可以大致了解一下：

```
if @driver.find_elements(:link, "Save").size() > 0 
```

此代码不会抛出`NoSuchElementException`

`implicitlyWait`但是，如果您有多个零并且页面上没有元素，则此方法将“挂起”一段时间。第二个问题 - 如果页面上存在元素但未显示，您将得到`true`.

要解决方法尝试创建方法：

```
def is_element_present(how, what)
    @driver.manage.timeouts.implicit_wait = 0
    result = @driver.find_elements(how, what).size() > 0
    if result
        result = @driver.find_element(how, what).displayed?
    end
    @driver.manage.timeouts.implicit_wait = 30
    return result
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-03T05:02:02.817

`@driver.find_element`抛出一个名为`NoSuchElementError`.

因此，您可以编写自己的方法，该方法使用 try catch 块，并在没有异常时返回 true，在有异常时返回 false。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-15T19:22:35.130

如果期望元素无论如何都应该在页面上：使用[selenium 等待对象](http://www.rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/Wait)，`element.displayed?`而不是使用`begin/rescue`：

```
wait = Selenium::WebDriver::Wait.new(:timeout => 15)
element = $driver.find_element(id: 'foo')
wait.until { element.displayed? } ## Or `.enabled?` etc. 
```

这在页面的某些部分比其他部分需要更长的时间才能正确呈现的情况下很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-26T10:46:16.067

我正在使用`selenium-webdriver version 3.14.0`本月早些时候发布的。我试图检查`@web_driver_instance.find_element(:xpath, "//div[contains(text(), 'text_under_search')]").displayed?`使用：

```
element_exists = @wait.until { @web_driver_instance.find_element(:xpath, "//div[contains(text(), 'text_under_search')]").displayed? }

 unless element_exists
   #do something if the element does not exist
 end 
```

`NoSuchElementError`上面的异常失败，所以我尝试使用以下方法：

```
begin
   @wait.until { @web_driver_instance.find_element(:xpath, "//div[contains(text(), 'text_under_search')]").displayed? }

rescue NoSuchElementError
  #do something if the element does not exist
end 
```

这对我也不起作用，并且再次失败，但有`NoSuchElementError`例外。

由于我正在检查的文本存在在页面上可能是唯一的，因此在下面尝试了**这**对我有用：

```
unless /text_under_search_without_quotes/.match?(@web_driver_instance.page_source)
   #do something if the text does not exist
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-05T13:03:43.223

> 查找元素

## 解决方案#1

```
expect(is_visible?(page.your_element)).to be(false) 
[or]
expect(is_visible?(@driver.find_element(:css => 'locator_value'))).to be(false)
[or]
expect(is_visible?(@driver.first(:css => 'locator_value'))).to be(true) 
```

=>**通用红宝石方法**

```
 def is_visible?(element)
    begin
      element.displayed?
      return true
    rescue => e
      p e.message
      return false
    end
  end 
```

## 解决方案 #2

```
expect(is_visible?(".locator_value")).to be(false)  # default css locator
[or]
expect(is_visible?("locator_value", 'xpath')).to be(true)
[or]
expect(is_visible?("locator_value", 'css')).to be(false)
[or]
expect(is_visible?("locator_value", 'id')).to be(false) 
```

=>**通用红宝石方法**

```
 def is_visible?(value, locator = 'css')
    begin
      @driver.first(eval(":#{locator}") => value).displayed?
      return true
    rescue => e
      p e.message
      return false
    end
  end 
```

* * *

> 查找元素（元素列表）

## 解决方案#1

=>**在页面类中声明的变量**

```
proceed_until(@driver.find_elements(:css => 'locator_value').size == 0)
[or]
proceed_until(@driver.all(:css => 'locator_value').size == 0) 
```

=>**通用红宝石方法**

```
 def proceed_until(action)
    init = 0
    until action
      sleep 1
      init += 1
      raise ArgumentError.new("Assertion not matching") if init == 9
    end
  end 
```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-12-03T06:58:45.793

请查看以下链接，它将为您提供解决方案。

[http://code.google.com/p/selenium/wiki/RubyBindings](http://code.google.com/p/selenium/wiki/RubyBindings)

# android - 强制 9patch 图像适应宽度，带填充

> ID：13677264
> 
> 赞同：1
> 
> 时间：2012-12-03T04:45:08.183
> 
> 标签：android, nine-patch

我正在为我的`ListView`项目 xml 文件使用 9patch 图像。

但是，图像背景似乎不适合布局宽度。

项目.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="10dp"
    android:paddingTop="4dip"
    android:orientation="horizontal"
    android:background="@drawable/lvbg" >

      <TextView
    android:id="@+id/tvDate"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:text="Date"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/tvDate"
    android:gravity="center"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="#31B6E7" />

</RelativeLayout> 
```

列表.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#FFFFFF"
        android:cacheColorHint="#00000000"
        android:divider="#FFFFFF"
        android:listSelector="@drawable/list_selector"
        android:paddingBottom="10dp"
        android:saveEnabled="true"
        android:smoothScrollbar="true" />

</LinearLayout> 
```

我正在实现什么

![在此处输入图像描述](../Images/6580fb1e924393cbc7c0577662b54980.png)

我需要的 ：

![在此处输入图像描述](../Images/211a7540a0821d5afe85862da651135e.png)

这是我的 9patch 图片

![在此处输入图像描述](../Images/9677e56baa1e5c4f48344acc648e54d6.png)

是否可以在内部强制使用 textview，同时，9patch 图像能够在两侧填充一些 dp 填充来填充屏幕宽度。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:45:54.957

这可能与您如何膨胀布局有关。您应该在 getView() 方法中（在您的适配器中）执行以下操作：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {     
        LayoutInflater Inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = Inflater.inflate(mResourceId, parent, false); 
```

现在重要的部分是您使用`parent`并将其设置为不附加 ( `false`)。通过这样做，Android 可以正确测量组件，从而为其提供正确的尺寸。

# wordpress - 如何在 Wordpress 中获取第二篇文章的附加图片

> ID：13677265
> 
> 赞同：0
> 
> 时间：2012-12-03T04:45:18.163
> 
> 标签：wordpress, image, attachment

此功能无法显示第二张图片。我只想要帖子附件的第二张图片。

我只想要附件 src，例如： if post img =1 echo img src="img1src" and if post img=2 echo img src="img1src" src="img2src" and if img=3 echo img1src img2src img3src.. .

```
function the_images()
{
    global $post;
    $attachments = get_children(['post_type'      => 'attachment',
                                 'numberposts'    => -1,
                                 'post_mime_type' => 'image',
                                 'post_status'    => null,
                                 'post_parent'    => $post->ID,
    ]);
    if ($attachments) {
        foreach ($attachments as $attachment) {
            $src = wp_get_attachment_image_src($attachment->ID, "attached-image");
            $pics = count($attachments);
            if ($pics == 2) {
                echo '<img src="'.$src[0].'"/><img src="'.$src[1].'"/>';
            }
        }
    }
} 
```

我需要第二张图片的地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:22:03.653

我还没有测试它，但试试这个：

```
$pics = count($attachments, COUNT_RECURSIVE ); // For multidimensional array. 
```

# python - 如何仅使用 readline() 从文件中读取

> ID：13677270
> 
> 赞同：0
> 
> 时间：2012-12-03T04:46:16.577
> 
> 标签：python, python-3.x

我现在的代码是这个

```
f = open(SINGLE_FILENAME)
lines = [i for i in f.readlines()] 
```

但我的教授要求

您可以使用 readline()。您不能使用 read()、readlines() 或使用 for 遍历打开的文件。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T05:13:00.460

您可以使用[两个参数`iter()`版本](http://docs.python.org/3/library/functions.html#iter)：

```
lines = iter(f.readline, "") 
```

如果您需要行列表：

```
lines = list(lines) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T04:58:32.797

第一稿：

```
lines = []
with open(SINGLE_FILENAME) as f:
    while True:
        line = f.readline()
        if line:
            lines.append(line)
        else:
            break 
```

我相当肯定有更好的方法来做到这一点，但这确实避免了使用 for、使用 read 或使用 readlines 进行迭代。

您可以编写一个生成器函数来继续调用`readline()`，直到文件为空，但这似乎并不是一个很大的改进。

# sql - 排序规则冲突错误，将存储过程的排序规则设置为数据库默认值

> ID：13677272
> 
> 赞同：5
> 
> 时间：2012-12-03T04:46:37.107
> 
> 标签：sql, sql-server, collation

如何将存储过程的 COLLATION 设置为数据库默认值，而不是该过程中表的单个列。

```
Cannot resolve the collation conflict between “SQL_Latin1_General_Pref_CP1_CI_AS” and “Latin1_General_CI_AS” in the equal to operation 
```

我收到排序规则冲突错误，因为数据库服务器排序规则与数据库排序规则不同。该过程很大，我不知道发生在哪个表列冲突。

甚至可以为存储过程分配排序规则，以使该过程中的所有列都具有相同的排序规则？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T22:57:16.333

首先，排序规则是关于文本数据如何存储在表中，而不是存储过程级别。

比较来自文本排序规则存储不同的源的文本数据时，会出现排序规则问题。（我不是在说文本的数据类型，只是字符串数据）

检查 TSQL where 子句或表连接，这是最常见的文本比较发生的地方。您可以使用比较区域旁边的整理功能整理到数据库默认值。例如

```
SELECT
c.CustomerID
FROM
dbo.Customer c
INNER JOIN dbo.CustomerLog cl on c.CustomerName = cl.LogEntry collate     
database_default 
```

根据您的情况，这可能是不可能的，但我始终遵循这些规则。
- 在安装时选择正确的服务器默认排序规则，以便在排序规则下创建 tempdb，当您创建临时表时，这些是在 tempdb 中创建的
- 创建表时不要指定排序规则，除非您有特定原因

# c# - 更改文本块中单击文本的格式

> ID：13677275
> 
> 赞同：0
> 
> 时间：2012-12-03T04:47:12.180
> 
> 标签：c#, wpf, click, format, textblock

我有一个 textBlock，我在其中添加了一些文本，例如如下：

```
textBlock1.Inlines.Add(new Run("One "));
textBlock1.Inlines.Add(new Run("Two "));
textBlock1.Inlines.Add(new Run("Three ")); 
```

如何添加一个单击事件来更改已单击的内联文本的颜色？

例如，如果单击“一个”，我希望它具有红色字体；然后如果单击“Two”，我希望“One”再次变为黑色，“Two”变为红色，以便单击的最后一个单词的颜色为红色。

我对使用 c# 和 wpf 进行编程相当陌生。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:47:22.633

像这样的东西应该可以解决问题

```
 public MainWindow()
    {
        InitializeComponent();
        textBlock1.Inlines.Add(new Run("One "));
        textBlock1.Inlines.Add(new Run("Two "));
        textBlock1.Inlines.Add(new Run("Three "));
    }

    private SolidColorBrush _blackBrush = new SolidColorBrush(Colors.Black);
    private SolidColorBrush _redBrush = new SolidColorBrush(Colors.Red);
    private Run _selectedRun;

    private void TextBlock_MouseDown(object sender, MouseButtonEventArgs e)
    {
        var run = e.OriginalSource as Run;
        if (run != null)
        {
            if (_selectedRun != null)
            {
                _selectedRun.Foreground = _blackBrush;
                if (_selectedRun == run)
                {
                    return;
                }
            }
            run.Foreground = _redBrush;
            _selectedRun = run;
        }
    } 
```

但是您必须使用“MouseDown”或“MouseUp”处理单击，因为 Textblock 没有 Click 事件

要在某个索引处着色，这是一个简单的示例。

```
private void ColorInlineAtIndex(InlineCollection inlines, int index, Brush brush)
{
    if (index <= inlines.Count - 1)
    {
          inlines.ElementAt(index).Foreground = brush;
    }
} 
```

用法：

```
 ColorInlineAtIndex(textBlock1.Inlines, 2, new SolidColorBrush(Colors.Blue)); 
```

查找位置：

```
private void TextBlock_MouseDown(object sender, MouseButtonEventArgs e)
{
    var run = e.OriginalSource as Run;
    if (run != null)
    {
        int position = (sender as TextBlock).Inlines.ToList().IndexOf(run);
    }
} 
```

# c# - 如何在c#中从另一个窗体访问按钮

> ID：13677284
> 
> 赞同：0
> 
> 时间：2012-12-03T04:48:10.853
> 
> 标签：c#

我有两种形式。我在 mainForm 中有一个按钮。当我单击 button1 时，主窗体将显示，并且 button1 将启用 false。现在我想在我的 ChildForm 关闭时将其启用为 True。请帮我 。我的 Enable= False 代码是

```
 CstmersFrm cstFm = new CstmersFrm();
        cstFm.MdiParent = this;
        cstFm.Show();
        cstFm.BringToFront();
        btnCstmr.Enabled = false; 
```

我正在尝试 Enable=True 在 cstmersFrm _Closed 事件中

```
 mFrm = (mainForm)this.MdiParent;
        mFrm.btnCstmr.Enabled = true; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T05:09:22.427

您需要在主窗体上注册子窗体 Closed 事件：

```
 Form child = new Form();
        child.MdiParent=this;
        child.Show();
        child.FormClosed+=child_FormClosed; 
```

然后将按钮设置为启用：

```
void child_FormClosed(object sender, FormClosedEventArgs e)
{
     btnCstmr.Enabled = true;
} 
```

# php - Htaccess 重写（插入字符）

> ID：13677290
> 
> 赞同：0
> 
> 时间：2012-12-03T04:49:06.737
> 
> 标签：php, .htaccess, mod-rewrite

我有一个重要的临时重写需求。我需要重写：

```
http://www.mysite.com/product_info?products_id=23077 
```

至：

```
http://www.mysite.com/product_info.php?products_id=23077 
```

我认为这应该工作：

```
RewriteEngine on 
RewriteRule ^product_info\?(.*)$ product_info.php\?products_id=23077 
```

但它不起作用。我收到一个错误：

> 在此服务器上未找到请求的 URL /product_info

显然 23077 可以是任何数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:58:57.257

我没有测试过，但是这样的东西应该可以工作：

```
RewriteEngine on
RewriteRule ^(product_info)\?(products_id=23077)/?$  http://www.mysite.com/$1.php?$2 [NC] 
```

# javascript - 使用 Acrobat javascript 编写文本文件

> ID：13677295
> 
> 赞同：0
> 
> 时间：2012-12-03T04:49:17.893
> 
> 标签：javascript, text, adobe, acrobat

我正在使用 acrobat XI 编写一些脚本。我想做的是1）获取当前处理的pdf文件名和2）只是简单地输出一个文本文件

```
var textValue = "test";
var doc = this.createDataObject({cName: "test.txt", cValue: textValue});
this.exportDataObject({cName: "test.txt", nLaunch:0}); 
```

这是有效的，但我想提供一个固定的路径，我尝试了 saveAs 但它似乎只适用于 pdf，exportAsText 也不能​​正常工作。

有什么办法可以解决吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T00:05:20.943

### 官方文档说：

> 示例：以富文本格式保存当前文档：

`this.saveAs("/c/myDocs/myDoc.rtf", "com.adobe.acrobat.rtf");`

我猜你可以用 TXT ( ) 替换 RTF 格式`com.adobe.acrobat.plain-text`：

```
this.saveAs("test.txt", "com.adobe.acrobat.plain-text"); // try this 
```

# ios - 使用带有单点触控的游戏中心

> ID：13677301
> 
> 赞同：2
> 
> 时间：2012-12-03T04:49:56.987
> 
> 标签：ios, xamarin.ios, game-center

我正在尝试使用 MonoTouch 向我的应用程序添加游戏中心支持，我查看了示例代码......它甚至没有编译......它给出了根本没有意义的内部编译错误：我只是创建了一个类，添加了一个函数并将其代码直接粘贴到其中：

```
 public bool Authenticate ()
        {
        //
        // This shows how to authenticate on both iOS 6.0 and older versions
        //
        if (UIDevice.CurrentDevice.CheckSystemVersion (6, 0))
            {
            //
            // iOS 6.0 and newer
            //
            GKLocalPlayer.LocalPlayer.AuthenticateHandler = (ui, error) => {

                // If ui is null, that means the user is already authenticated,
                // for example, if the user used Game Center directly to log in

                if (ui != null)
                    current.PresentModalViewController (ui, true);
                else
                    {
                    // Check if you are authenticated:
                    var authenticated = GKLocalPlayer.LocalPlayer.Authenticated;
                    }
                Console.WriteLine ("Authentication result: {0}", err);
            };
            }
        else
            {
            // Versions prior to iOS 6.0
            GKLocalPlayer.LocalPlayer.Authenticate ((err) => {
                Console.WriteLine ("Authentication result: {0}", err);
            });
            }

        } 
```

它在调用 GKLocalPlayer 时爆炸了......

怎么了？有谁知道一个简单的例子来使用它？应该能够将所有这些包装到一个类中以创建所有这些......（这是我打算做的，如果它还没有完成的话。）

-Traderhut 游戏

# c# - 合并多个文件的 MD5 哈希

> ID：13677304
> 
> 赞同：7
> 
> 时间：2012-12-03T04:50:17.300
> 
> 标签：c#, hash, md5

我有 7 个要为其生成 MD5 哈希的文件。哈希用于确保数据存储的远程副本与本地副本相同。不幸的是，这两个数据副本之间的链接速度慢得令人麻木。对数据的更改非常少见，但我要求始终（或尽快）同步数据。我不想在我的（非常慢的）通信链路上传递 7 个不同的 MD5 散列，而是为每个文件生成散列，然后将这些散列组合成一个散列，然后我可以传输该散列，然后重新计算/用于比较在远端。如果“组合哈希”不同，那么我将开始发送 7 个单独的哈希以确定哪些文件已被更改。例如，

```
0709d609d69385255c496436eb50402c
709465a74411bd596595c7b9b158ae6a
4ab657320ef33e3d5eb498e4c13d41b7
3b49c6ab199994fd776bb63761414e72
0fc28c5a010fc3c06c0c930c88e31a15
c4ecd214662cac5aae0e53f6f252bf0e
8b086431e43148a2c2d943ba30d31cc6 
```

我想将这些散列组合在一起，以便获得一个唯一值（可能是另一个 MD5 散列？），然后我可以将其发送到远程系统。然后，在远程系统上，我将执行相同的计算以确定整个数据是否已更改。如果有，那么我将开始发送单个哈希等。最重要的因素是我的“组合哈希”足够短，因此它使用的带宽比首先发送所有 7 个哈希要少。我想将 7 个 MD5 哈希值写入文件，然后对该文件进行哈希处理，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T05:49:32.773

你为什么不：

*   生成 7 个 MD5 哈希（这就是你现在正在做的），然后
*   将这 7 个哈希输出组合成一个更大的字节数组和 MD5 哈希，以产生一个整体哈希。（每个 MD5 散列是 16 个字节，因此您最终将得到一个 112 字节的数组，您将对其进行散列以获得整体散列）。

如果您的整体哈希与另一端匹配，则无需执行任何操作。如果没有，那么您开始发送中间的 7 个哈希来计算哪些文件已更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T05:00:43.237

您可以计算连接在一起的所有七个文件的内容的哈希值。

但是，我不建议这样做，因为您会发现一些细微的错误，例如：

```
file1: 01 02 03 04 file2: 05 06 07 08 
```

将哈希相同

```
file1: 01 02 file2: 03 04 05 06 07 08 
```

你的通讯链接有多慢？单个 MD5 哈希为 32 个字节。

其中 7 个小于 1/4 KB；那只是没有多少数据。

文件将在链接的哪一侧更改？

您可以在该端缓存一组 MD5，然后定期将文件与缓存的哈希值进行比较，然后在发现差异时开始传输。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T05:21:35.593

`XOR`商场。

据我所知，这是最简单有效的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T13:31:00.183

另一种选择是首先生成单个哈希 - 请参阅[https://stackoverflow.com/a/15683147/188926](https://stackoverflow.com/a/15683147/188926)

此示例迭代文件夹中的所有文件，但您可以迭代文件列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T06:22:24.300

我知道这超出了左侧字段，但您可以简单地检查所有文件的存档属性，如果任何文件设置了此标志，则该文件已以某种方式更改。

然后，您可以继续创建散列，如果没有，甚至不必首先生成散列。

如果设置了存档属性，则生成哈希、同步文件并取消设置存档属性。

那将是我建议的解决方案。

# python - 数字求和练习 | n 是什么 // = 10

> ID：13677306
> 
> 赞同：1
> 
> 时间：2012-12-03T04:50:27.487
> 
> 标签：python

> **可能重复：**
> [在 Python 中使用“//”的原因是什么？](https://stackoverflow.com/questions/1535596/what-is-the-reason-for-having-in-python)

在尝试对数字求和进行练习时，我偶然发现了这个解决方案：

```
def sum_digits(n):
   import math
   total = 0
   for i in range(int(math.log10(n)) + 1):
      total += n % 10
      n //= 10
   return total 
```

我的问题是，倒数第二行是做什么的？正确的语法如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T04:56:24.907

这实现了所谓的`floor division`. 楼层除法（由`//`此处表示）截断小数并返回整数结果，而“正常”除法返回您可能“期望”的答案（带小数）。在 Python 3.x 中，两者之间的区别更大，这意味着这两个运算符返回不同的结果。这是一个使用 Python 3 的示例：

```
>>> 10 / 3
3.3333333333333335
>>> 10 // 3
3 
```

在 Python 3.x 之前，两者之间没有区别，除非您使用特殊的内置`from __future__ import division`，然后使除法运算符像在 Python 3.x 中一样执行（这是使用 Python 2.6.5）：

```
In [1]: 10 / 3
Out[1]: 3

In [2]: 10 // 3
Out[2]: 3

In [3]: from __future__ import division

In [4]: 10 / 3
Out[4]: 3.3333333333333335

In [5]: 10 // 3
Out[5]: 3 
```

因此，当您看到类似的内容时`n //= 10`，它使用与您可能看到的相同的`+=`// `-=`/ etc 语法，其中它获取 的当前值并执行等号之前的操作，并将以下变量作为第二个参数，返回结果进入. 例如：`*=``n``n`

```
In [6]: n = 50

In [7]: n += 10

In [8]: n
Out[8]: 60

In [9]: n -= 20

In [10]: n
Out[10]: 40

In [11]: n //= 10

In [12]: n
Out[12]: 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:57:34.807

倒数第二行是运算符的组合，在某种程度上，包括一个不常见的运算符，这就是它有点令人困惑的原因。

让我们把它分开。

首先，`//`在 Python 中是[floor division](https://stackoverflow.com/questions/183853/in-python-what-is-the-difference-between-and-when-used-for-division)，基本上是四舍五入到最接近的整数的除法。因此，

```
>>> 16//5
3
>>> 2//1
2
>>> 4//3
1
>>> 2//5
0 
```

最后，这`=`是因为 Python 语法允许对变量执行操作，然后立即将结果重新分配给变量。您可能在 中最常看到它`+=`，例如：

```
>>> a = 5
>>> a += 7
>>> a
12 
```

在这种情况下，`//=`表示“执行楼层除法，将变量除以第二个参数，然后将结果分配给原始输入变量。” 因此：

```
>>> a = 10
>>> a //= 6
>>> a
1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T04:53:53.367

`//`是楼层除法算子。它总是将返回值截断为小于或等于答案的最大整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T05:00:41.390

对于 Python 中的赋值 A += B 等于 A = A + B ，A *= B 等于 A = A * B 同样适用于“Floor Divide”，A //= B 等于 A = A / /乙

Floor Division 表示返回截断的整数

```
>>> 5 // 3   # 1.6
   1    # 0.6 will be throw off 
```

# javascript - 使用 jQuery 获取脚本

> ID：13677310
> 
> 赞同：-1
> 
> 时间：2012-12-03T04:50:47.923
> 
> 标签：javascript, jquery, ajax

询问getscript

html代码如下：

```
<!DOCTYPE html PUBLIC "- / / W3C / / DTD XHTML 1.0 Transitional / /
EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html>
    <head> 
        <title>jQuery GetScript</title> 
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
        <script type = "text / javascript "> 
            $(document). ready(function () {
                $getScript ('script.js', function (jd) {
                    $.each (test, function (index, value) {
                        console.log (value);
                    });
                });
            }); 
        </script> 
    </head> 
    <body> 
        <div id="dest"> </div> 
    </body> 
</html> 
```

js(1)代码如下：-

```
<script type='text/javascript'> var test = []; test [0] = ['111 ', '222']; </ script> 
```

js(2)代码如下：-

```
var test = []; test [0] = ['111 ', '222']; 
```

问题如下： - 运行js(1)代码会出现： - Uncaught SyntaxError: Unexpected token <

运行js没问题（二）

想问下js怎么才能跑（1）不能出错 谢谢！写的不好，请见谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:57:04.130

您不应`<script`在外部 javascript 文件中包含 > 元素。

js (1) 代码应该是这样的：

```
var test = []; test [0] = ['111 ', '222']; 
```

# opera - Opera 中的“reqAnimFrame”函数

> ID：13677313
> 
> 赞同：0
> 
> 时间：2012-12-03T04:51:10.453
> 
> 标签：opera, requestanimationframe

我尝试运行示例：[http](http://tutorials.jenkov.com/html5-canvas/animation.html) ://tutorials.jenkov.com/html5-canvas/animation.html 。
但它在 Opera 12+ 上给了我以下错误：
未捕获的异常：TypeError：'reqAnimFrame'不是函数。

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:48:45.260

提议的 requestAnimationFrame() 方法尚未在 Opera 中实现。它将在未来的版本中得到支持，现在你需要一个 JavaScript 来回退到在不支持 requestAnimationFrame() 的浏览器中使用 setTimeout()。

您链接到的脚本不会尝试与旧浏览器兼容。事实上，它不会尝试与*未来的*浏览器兼容，这些浏览器可能会删除前缀并只定义 window.requestAnimationFrame()。作者修改脚本以在他的演示中解决这些问题是一个好主意 - 这样做并不难。

# ruby-on-rails - 为什么 .where(:attribute => nil) 检查 nil 值？

> ID：13677314
> 
> 赞同：1
> 
> 时间：2012-12-03T04:51:11.657
> 
> 标签：ruby-on-rails, activerecord

所以这里是查询，非常简单：

```
字段 = :has_bill
值 = 无
scoped.where（字段 => 值）

```

它输出为：

```
（`electricity_profile_segment_summaries`.`has_swimming_pool` IN ('') OR `electricity_profile_segment_summaries`.`has_swimming_pool` 为 NULL）

```

其中也包括`nil`价值观和`0`价值观。这是不正确的，我只想代表`NULL`表格中的值。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:55:34.707

`NULL`对于这种情况，手动限制如何`nil`？

```
if value.nil?
  scoped.where( "#{field} IS NULL" )
else
  scoped.where( field => value
end 
```

# java - 你在哪里使用 Java 代码？发送 .jar 文件时遇到问题

> ID：13677316
> 
> 赞同：1
> 
> 时间：2012-12-03T04:51:36.597
> 
> 标签：java

为这个问题的一般性质道歉。

我已经学习 Java 几个月了，并且创建了一些具有某些功能的简单项目。我想将项目发送给朋友，但我遇到了无数错误和挣扎。当他们试图打开一个 .jar 文件时，会导致“找不到主类”错误。

我尝试使用第三方软件将 .jar 文件打包成 .exe 文件，但同样的错误仍然存​​在。

除此之外，我确信通过第三方软件传递包装成 .exe 文件的 .jar 文件并不是 Java 的预期用途。我读过两本关于 Java 的书，它们都在谈论构建语言，但我对我应该在哪里使用这段代码感到困惑，因为很明显它不打算在文件中传递格式。

这是一种服务器编程语言吗？主要用在网站后端？我不确定在哪里会使用 Java 编写的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T04:55:49.920

您应该构建一个可执行的 jar。

检查[这里](http://docs.oracle.com/javase/tutorial/deployment/jar/)和[这里](https://stackoverflow.com/questions/5258159/how-to-make-an-executable-jar-file)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T04:55:46.373

如果您希望有人能够运行它，您需要将您的 JAR 文件创建为可执行的 JAR 文件。这就是您发送 Java 可执行文件的方式。在这里查看更多信息：

[如何创建可执行的 Java 程序？](https://stackoverflow.com/questions/804466/how-do-i-create-executable-java-program)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T04:55:23.460

我建议您花一些时间在[http://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)上。Java 程序基本上运行在虚拟机之上（而不是直接在你的物理机上）。Java 程序被编译成 *.class 文件，而 *.class 的集合通常被捆绑到 *.jar 文件中。

如果你想运行你的java程序，一种常见的方法是执行java虚拟机运行时（JRE）并指定你的jar包被加载到类路径中，例如：

```
java -jar /path/to/my.jar 
```

您的 jar 文件必须正确打包，以便指示主类是什么（如果有）

将 jar 打包成 exe 是可能的，但不是最佳实践。Java 范式是一次编写和编译——到处运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T05:04:24.563

来自甲骨文：

> 如果您将应用程序捆绑在 JAR 文件中，则需要某种方式来指示 JAR 文件中的哪个类是您的应用程序的入口点。您使用清单中的 Main-Class 标头提供此信息，该标头具有一般形式：
> 
> Main-Class: classname 值 classname 是作为应用程序入口点的类的名称。
> 
> 回想一下，入口点是一个具有签名 public static void main(String[] args) 的方法的类。
> 
> 在清单中设置 Main-Class 标头后，然后使用以下形式的 java 命令运行 JAR 文件：
> 
> java -jar JAR-name 执行Main-Class头中指定的类的main方法。

使用 JAR 工具设置入口点：

> JDK 6 中引入的“e”标志（用于“入口点”）创建或覆盖清单的 Main-Class 属性。它可以在创建或更新 jar 文件时使用。使用它来指定应用程序入口点，而无需编辑或创建清单文件。例如，此命令创建 app.jar，其中清单中的 Main-Class 属性值设置为 MyApp：
> 
> jar cfe app.jar MyApp MyApp.class 您可以通过运行以下命令直接调用此应用程序：
> 
> java -jar app.jar 如果入口点类名在包中，它可以使用'.' （点）字符作为分隔符。例如，如果 Main.class 在名为 foo 的包中，则可以通过以下方式指定入口点：
> 
> jar cfe Main.jar foo.Main foo/Main.class

[设置应用程序的入口点](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T05:01:12.347

为了快速回答，库捆绑在 jar 中，然后添加到另一个应用程序的类路径中。

假设你发明了一种新的排序算法，它比所有其他算法都快。您可以将少量类捆绑到一个 jar 中，它基本上只是一个包含已编译 .class 文件的 zip 文件。

现在您的朋友需要对一些数据进行排序并希望使用您的类。他会编写代码来导入您的类（在他的 .java 文件顶部使用 import），然后在他的代码中使用它们。当他需要将他的 .java 文件编译成 .class 文件时，他会将您的 jar 添加到他的*classpath*中。Eclipse/netbeans 可以为您设置它，或者如果您从命令行运行 javac，它看起来像这样：

```
javac ... -cp "fastsorting.jar" ... 
```

有时（很少，在现实世界中）有人有一个 JAR，它实际上是一个完全成熟的程序，旨在运行。我很少说，因为 jar 不是分发软件的最常见方式。更流行的是作为网络服务或通过网站上的小程序。在这种情况下，一个 jar 的清单文件（只是一个告诉 java 关于这个 jar 信息的文本文件）将有一个主类，当通过 .jar 调用 jar 时会运行该主类`java`。

# c# - 如何在单个 SQL 连接中运行多个 SQL 命令？

> ID：13677318
> 
> 赞同：54
> 
> 时间：2012-12-03T04:51:56.647
> 
> 标签：c#, sql-server, ado.net, sqlconnection, sqlcommand

我正在创建一个项目，我需要在单个 SQL 连接中运行 2-3 个 SQL 命令。这是我写的代码：

```
SqlConnection con = new SqlConnection(@"Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\project.mdf;Integrated Security=True");
con.Open();
SqlCommand cmd = new SqlCommand("select *  from " + mytags.Text + " ", con);
SqlDataReader rd = cmd.ExecuteReader();
if (rd.Read())
{
    con.Close();
    con.Open();
    SqlCommand cmd1 = new SqlCommand("insert into " + mytags.Text + " values ('fname.lname@gmail.com','" + TextBox3.Text + "','" + TextBox4.Text + "','" + TextBox5.Text + "','"+mytags.Text+"')", con);
    cmd1.ExecuteNonQuery();
    label.Visible = true;
    label.Text = "Date read and inserted";
}
else
{
    con.Close();
    con.Open();
    SqlCommand cmd2 = new SqlCommand("create table " + mytags.Text + " ( session VARCHAR(MAX) , Price int , Description VARCHAR(MAX), Date VARCHAR(20),tag VARCHAR(10))", con);
    cmd2.ExecuteNonQuery();
    con.Close();
    con.Open();
    SqlCommand cmd3 = new SqlCommand("insert into " + mytags.Text + " values ('" + Session + "','" + TextBox3.Text + "','" + TextBox4.Text + "','" + TextBox5.Text + "','" + mytags.Text + "')", con);
    cmd3.ExecuteNonQuery();
    label.Visible = true;
    label.Text = "tabel created";
    con.Close();
} 
```

我试图消除错误，但我发现连接不会出现其他情况。请检查代码并建议是否有任何错误或任何其他解决方案。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-12-03T04:56:49.347

只需更改而不是每次都`SqlCommand.CommandText`创建一个新的。`SqlCommand`无需关闭并重新打开连接。

```
// Create the first command and execute
var command = new SqlCommand("<SQL Command>", myConnection);
var reader = command.ExecuteReader();

// Change the SQL Command and execute
command.CommandText = "<New SQL Command>";
command.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-12-03T05:00:39.830

以下应该工作。始终保持单个连接打开，只需创建新命令并执行它们。

```
using (SqlConnection connection = new SqlConnection(connectionString))
{
    connection.Open();
    using (SqlCommand command1 = new SqlCommand(commandText1, connection))
    {
    }
    using (SqlCommand command2 = new SqlCommand(commandText2, connection))
    {
    }
    // etc
} 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2014-04-27T10:01:41.673

Just enable this property in your connection string:

`sqb.MultipleActiveResultSets = true;`

This property allows one open connection for multiple datareaders.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-12-03T05:16:37.707

我没有测试过，但主要思想是：在每个查询上加上分号。

```
SqlConnection connection = new SqlConnection();
SqlCommand command = new SqlCommand();
connection.ConnectionString = connectionString; // put your connection string
command.CommandText = @"
     update table
     set somecol = somevalue;
     insert into someTable values(1,'test');";
command.CommandType = CommandType.Text;
command.Connection = connection;

try
{
    connection.Open();
}
finally
{
    command.Dispose();
    connection.Dispose();
} 
```

**更新：** 您可以关注 [ADO.NET Command.CommandText 属性中是否可以有多个 SQL 指令？](https://stackoverflow.com/questions/6696417/is-it-possible-to-have-multiple-sql-instructions-in-a-ado-net-command-commandtex)也

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-12-03T05:11:48.540

顺便说一句，这很可能是通过SQL注入攻击的。阅读并相应地调整您的查询是值得的。

也许甚至可以为此创建一个存储过程，并使用[sp_executesql 之](http://msdn.microsoft.com/en-us/library/ms188001.aspx)类的东西，当需要动态 sql 时（即未知表名等），它可以提供一些保护。有关更多信息，请查看[此链接](http://msdn.microsoft.com/en-us/library/ms175170%28v=sql.105%29.aspx)。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-04-16T15:18:31.750

没有人提到这一点，但您也可以使用 ; 分隔您的命令。同一命令文本中的分号：

```
using (SqlConnection conn = new SqlConnection(connString))
    {
        using (SqlCommand comm = new SqlCommand())
        {
                comm.Connection = conn;
                comm.CommandText = @"update table ... where myparam=@myparam1 ; " +
                                    "update table ... where myparam=@myparam2 ";
                comm.Parameters.AddWithValue("@myparam1", myparam1);
                comm.Parameters.AddWithValue("@myparam2", myparam2);
                conn.Open();
                comm.ExecuteNonQuery();

        }
    } 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-09-12T13:51:41.157

如果有人感兴趣，可以使用多个非查询示例。

```
using (OdbcConnection DbConnection = new OdbcConnection("ConnectionString"))
{
  DbConnection.Open();
  using (OdbcCommand DbCommand = DbConnection.CreateCommand())
  {
    DbCommand.CommandText = "INSERT...";
    DbCommand.Parameters.Add("@Name", OdbcType.Text, 20).Value = "name";
    DbCommand.ExecuteNonQuery();

    DbCommand.Parameters.Clear();
    DbCommand.Parameters.Add("@Name", OdbcType.Text, 20).Value = "name2";
    DbCommand.ExecuteNonQuery();
  }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-12-20T09:20:39.607

在这里您可以找到 Postgre 示例，此代码在单个 SQL 连接中运行多个 sql 命令（更新 2 列）

```
public static class SQLTest
    {
        public static void NpgsqlCommand()
        {
            using (NpgsqlConnection connection = new NpgsqlConnection("Server = ; Port = ; User Id = ; " + "Password = ; Database = ;"))
            {
                NpgsqlCommand command1 = new NpgsqlCommand("update xy set xw = 'a' WHERE aa='bb'", connection);
                NpgsqlCommand command2 = new NpgsqlCommand("update xy set xw = 'b' where bb = 'cc'", connection);
                command1.Connection.Open();
                command1.ExecuteNonQuery();
                command2.ExecuteNonQuery();
                command2.Connection.Close();
            }
        }
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-12T15:21:11.153

```
using (var connection = new SqlConnection("Enter Your Connection String"))
    {
        connection.Open();

        using (var command = connection.CreateCommand())
        {
            command.CommandText = "Enter the First Command Here";
            command.ExecuteNonQuery();

            command.CommandText = "Enter Second Comand Here";
            command.ExecuteNonQuery();

    //Similarly You can Add Multiple
        }
    } 
```

它对我有用。

# php - SQL选择并将结果合并到多维数组？

> ID：13677325
> 
> 赞同：0
> 
> 时间：2012-12-03T04:52:44.520
> 
> 标签：php, arrays, multidimensional-array

我有一个表来存储另外两个看起来像这样的表之间的关系

```
id_post | id_formation
______________________
 1      |    1
 1      |    3
 3      |    2
 3      |    4 
```

我想选择这个结果并将其存储到数组数组中：

示例（在这种情况下）：

```
array(
      1=>array(1,3),
      3=>array(2,4)
     ) 
```

谁能告诉我执行此操作的 SQL 语句？或 PHP 代码来格式化上面的结果？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T05:44:41.970

这将创建您想要的数组：

```
$result = mysql_query("SELECT id_post, id_formation FROM table");

$array = array(); //empty array to hold result
while ($row = mysql_fetch_array($result)) {
  $array[$row['id_post']][] = $row['id_formation'];
}

//print result
print_r($array); 
```

# android - 从 R.raw.some_file.m4a 将文件保存到外部临时目录

> ID：13677326
> 
> 赞同：0
> 
> 时间：2012-12-03T04:52:49.080
> 
> 标签：android

我需要能够将文件保存到外部存储临时目录。我保存的文件是我的应用程序的 R.raw 目录。

我在这里使用了这个例子。 [在 Android 中将原始文件移动到 SD 卡](https://stackoverflow.com/questions/6979521/move-raw-file-to-sd-card-in-android)

问题是 1\. 该应用程序似乎读取了我想要的 .m4a 文件（可能在这里读取错误的字节）。2\. 当文件保存到/tmp 目录时，文件大小完全错误。例如，一个文件从 30kb 到 300kb，另一个从 25kb 到 .25kb。

有什么建议么

```
public String saveAs(int ressound, String whipName){  

     byte[] buffer=null;  
     InputStream fIn = getBaseContext().getResources().openRawResource(ressound);  
     int size=0;  

     try {  
      size = fIn.available();  
      buffer = new byte[size];  
      fIn.read(buffer);  
      fIn.close();  
     } catch (IOException e) {  
      // TODO Auto-generated catch block
         Log.i("saveas", "did not save1");
      //return false;  
     }  

     String path= Environment.getExternalStorageDirectory().getAbsolutePath()+"/tmp/.pw2";
     String filename="/"+whipName+".m4a";  
     Log.i("path", "file path is " + path);
     boolean exists = (new File(path)).exists();  
     if (!exists){new File(path).mkdirs();}  

     FileOutputStream save;  
     try {  
      save = new FileOutputStream(path+filename);  
      save.write(buffer);  
      save.flush();  
      save.close();  
     } catch (FileNotFoundException e) {  
      // TODO Auto-generated catch block  
         Log.i("saveas", "did not save2");
         //return false;  
     } catch (IOException e) {  
      // TODO Auto-generated catch block
         Log.i("saveas", "did not save3");
      //return false;  
     }      

     File k = new File(path, filename);  

     return  k.getAbsolutePath();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:18:13.880

您可以像现在一样在一个完整的缓冲区中读取文件，但这通常是不好的做法，除非您知道文件很小，并且 InputStream 会提前知道完整大小并能够一次加载所有数据。

如果您不确定最大文件大小，尤其是在移动设备上，请不要尝试将整个文件加载到内存中。

有关经典示例，请参见 IOUtils 代码：

[http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/1.4/org/apache/commons/io/IOUtils.java#IOUtils.copyLarge%28java.io.InputStream% 2Cjava.io.OutputStream%29](http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/1.4/org/apache/commons/io/IOUtils.java#IOUtils.copyLarge%28java.io.InputStream%2Cjava.io.OutputStream%29)

```
public static long copyLarge(InputStream input, OutputStream output)
        throws IOException {
    byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
    long count = 0;
    int n = 0;
    while (-1 != (n = input.read(buffer))) {
        output.write(buffer, 0, n);
        count += n;
    }
    return count;
} 
```

此外，请确保明确关闭缓冲区。

# iphone - 如何在 iOS 中使用 jar

> ID：13677328
> 
> 赞同：0
> 
> 时间：2012-12-03T04:53:14.823
> 
> 标签：iphone, ios, cocoa-touch, jar

请告诉我是否可以在 iOS 开发中使用 jars？

我想在我的代码中使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:55:04.387

Jars 用于 Java，而不是 Objective-C。可能有一些超级专家的方法，但如果你不得不问，那么答案实际上是否定的。

在 Android 世界中使用 jar 会有更好的运气。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:36:15.947

.jar 文件实际上是具有不同扩展名的 ZIP 档案。我相信你可以在你的代码中提取它。但是从 .jar 文件执行类将不起作用，因为 iOS 不附带 JRE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T04:54:45.817

JAR 是一个 Java 存档。iOS 不支持 Java。

# php - 如何在php中合并数组字段值？

> ID：13677331
> 
> 赞同：0
> 
> 时间：2012-12-03T04:53:41.220
> 
> 标签：php, arrays, multidimensional-array

我的数组是这样的：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [name] => a
            [hardware_type] => keybord
        )

    [1] => Array
        (
            [id] => 2
            [name] => b
            [hardware_type] => mouse
        )

    [2] => Array
        (
            [id] => 1
            [name] => a
            [hardware_type] => mouse
        )

    [3] => Array
        (
            [id] => 1
            [name] => a
            [hardware_type] => moniter
        )

    [4] => Array
        (
            [id] => 2
            [name] =>b
            [hardware_type] => keyboad
        )

) 
```

像这样需要输出我只想合并硬件类型

```
Array(
    [0] => Array

        (
            [id] => 1
            [name] => a
            [hardware_type] => keybord, mouse, moniter
        )
[1] => Array
    (
            [id] => 1
            [name] => b
            [hardware_type] => keyboard, mouse
        )

 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:52:24.503

`$array`您描述的输入数组在哪里，您`$newarray`想要的输出数组在哪里，并假设 的每个值都与您的示例输入中`id`的相同：`name`

```
$temp = array();

foreach ($array as $item) {
  $temp[$item['id']] = array('id' => $item['id'], 'name' => $item['name']);
  if (empty($newarray[$item['id']]['hardware_type']))
    $temp[$item['id']]['hardware_type'] = $item['hardware_type'];
  else 
    $temp[$item['id']]['hardware_type'] .= ', ' . $item['hardware_type'];
}

$newarray = array_values($temp); 
```

如果您希望`hardware_type`是一个数组而不是逗号分隔的字符串列表，请改为执行以下操作：

```
$temp = array();

foreach ($array as $item) {
  $temp[$item['id']] = array('id' => $item['id'], 'name' => $item['name']);
  $temp[$item['id']]['hardware_type'][] = $item['hardware_type'];
}

$newarray = array_values($temp); 
```

# ruby-on-rails - rails 2 actionmailer 电子邮件地址别名

> ID：13677334
> 
> 赞同：0
> 
> 时间：2012-12-03T04:53:57.397
> 
> 标签：ruby-on-rails, alias, actionmailer, email-address

我正在使用 rails 2 。我想知道 ActionMailer 中是否有隐藏/别名电子邮件地址的方法？还有什么应该是发送批量电子邮件的最佳方法？？？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:34:09.720

# 邮车

邮车 0.1

Mailcar 是一个用于 Ruby on Rails 的非常简单（即功能不多）的批量电子邮件程序，使用 ActiveRecord 和 ActionMailer。

如果您需要向整个用户群发送电子邮件并且不想支付大多数大规模电子邮件服务收取的高昂价格，那么这就是您的插件！

警告！！！在没有正确设置 SMTP 服务器的情况下使用它可能会使您的服务器进入数百个黑名单。如果这个前景吓到您，请查看付费发送批量电子邮件。它很贵，但至少你知道你是安全的。

警告！！！事实上，这个脚本与我为其编写的代码库紧密相关。它不会开箱即用。我发布它是希望其他人需要类似的东西并且不想从头开始。请在您的升级中向我发送补丁或拉取请求，我会将它们包括在内并将您添加到学分中。

# 安装

要复制模型并创建迁移，请运行：

脚本/生成邮件车全部

然后执行迁移：

耙分贝：迁移

# 例子

要发送新的批量电子邮件，您必须首先创建邮件正文文件。我使用 Thunderbird 创建 HTML 电子邮件，然后将其保存为 HTML。

此时，您可以创建消息并按如下方式发送：

rake mailcar:new_message FROM='me@mydomain.com' SUBJECT='网站上的新功能' BODY_FILE=/path/to/email/body

耙邮车：prep_for_send MESSAGE_ID=99

耙邮车：发送 MESSAGE_ID=99

如果发送过程被中断，您可以通过另一个发送调用来恢复它。

# 去做

*   添加一个测试套件（希望我对插件测试有更多了解......）
*   轻松提供块（或其他东西）以生成电子邮件地址列表
*   通过 ERB 传递电子邮件以允许模板/动态电子邮件
*   添加对多部分电子邮件的支持
*   添加清理任务以删除旧消息
*   使发送延迟可配置

# search - Foursquare 中场地搜索应用程序的更大/中等图像

> ID：13677335
> 
> 赞同：0
> 
> 时间：2012-12-03T04:54:09.907
> 
> 标签：search, foursquare

[场地 API](https://developer.foursquare.com/docs/venues/search)仅提供图标图像。它没有为该场地提供更大的图像。是否可以检索更大/中等尺寸的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:03:46.360

您可以使用[场所/照片](https://developer.foursquare.com/docs/venues/photos)端点来获取场所的照片。有关如何将照片响应转换为照片 URL 的信息，请参阅[照片响应文档。](https://developer.foursquare.com/docs/responses/photo)照片的尺寸最大为 500x500 像素

# javascript - 获取特定类的选定单选按钮

> ID：13677337
> 
> 赞同：10
> 
> 时间：2012-12-03T04:54:23.370
> 
> 标签：javascript, jquery

我正在尝试获取已选择某个类的单选按钮。

获取该类的单选按钮

```
$("input:radio.someClass"); 
```

我认为这将有助于获得选定的单选按钮 -

```
$("input:radio.someClass:selected"); 
```

但这返回空 - 我做错了什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-03T04:57:07.943

根据 JQuery 文档。

选择`:selected`器适用于选项元素。它不适用于复选框或无线电输入；

尝试：

```
$("input:radio.someClass:checked"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T04:57:19.067

而不是这个

`$("input:radio.someClass:selected");`

试试这个

```
$("input:radio.someClass:checked"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T05:01:03.457

选择所有选中的具有某个类的单选按钮，然后遍历所有并获取它们的值

```
var v= $('input[type=radio].someclass:checked');
$(v).each(function(i){
alert($(this).val())
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-03T05:19:44.643

这可能会解决您的问题。

```
$('input[name=radioName].someClass:checked').val(); 
```

或者

```
$("input[type='radiobutton'].someClass:checked"); 
```

如果没有然后评论。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-03T04:57:20.103

试试这个，

```
$('input[class=someClass]:checked', '#yourForm').val(); 
```

为了获得最佳性能 jquery 文档推荐使用 type 而不是 :radio 选择器的[Jquery Documentation](http://api.jquery.com/radio-selector/)

```
$('input[name=radioName]:checked', '#yourForm').val(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-15T15:15:43.297

使用这个脚本

```
$("input:radio.classNmae:checked").val(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-27T06:36:54.840

这对我有用。

```
var template_id = $('input[name=template_id].checkbox-tools:checked').val();

$.ajax({

      url: campaign_email_url,
      type: 'POST',
      headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
      data: {
           template_id: template_id,
     },
     success: function (data) {
           alert('Campaign updated!!');
     },
     error: function (data) {
           alert('Campaign error!!');
      }

   }); 
```

# php - 显示阿拉伯文本的问题

> ID：13677350
> 
> 赞同：1
> 
> 时间：2012-12-03T04:55:31.500
> 
> 标签：php

我有这个网站 websiteaddress.com，我在显示阿拉伯语文本时遇到了麻烦。阿拉伯语文本仅显示 (?????) 问号。

我与支持人员进行了两次聊天，但到目前为止还没有结果。

**这些选项已经过测试，并没有解决问题：**

1.  实际上没有为阿拉伯文本建立数据库连接。所有阿拉伯文本都是静态的，没有数据库条目。因此，数据库编码不是问题。

2.  该站点基于wordpress，设置中的编码设置为“UTF-8”。还尝试了 ISO-8859-1，两者都给出了相同的结果。（阿拉伯语文本不是来自 wordpress 数据库，它是在主题文件中硬编码的）

3.  向 UTF-8 和 ISO-8859-1 的 htaccess 添加了一个默认字符集。

4.  使用带有 UTF-8 编码的 PHP 重新发送标头，还尝试了 ISO-8859-1。

5.  更改了我的托管根目录以及此特定帐户根目录下的 PHP.INI，并将编码从 ISO 更改为 UTF-8。

所以，以上所有都没有解决问题。

另外，我创建了两个测试页面，里面的文本完全相同（阿拉伯语）： websiteaddress.com/test.html 和 websiteaddress.com/test.php .. 都是相同的页面，我只是更改了扩展名文件。html 工作正常并显示阿拉伯语。php 不起作用并显示问号。

基本上是这个问题。

如果有人有任何其他选择让我尝试或知道如何去做，请告诉我！

I have searched alot on stackoverflow and found alot of solutions, mostly all the above solutions were mentioned in some questions on stackoverflow. But, none of them answered my question, hence the post here..

Thanks and have a great day everyone!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:24:24.093

It was solved by my hosting provider, just in case anyone need this. This is their reply:

I checked the php.ini and the changes were not made in there, so I changed them for you. I also edited the following in your php.ini. exif.encode_unicode I set it to UTF-8 and uncommented it. Now the arabic is rendering at: websiteaddress.com/test.php and websiteaddress.com/test.html You can add the following to your .htaccess to get a different php version rendered. The following code is for 5.3\. AddType application/x-httpd-php53 .php

# build - 从 cloudbees 上传工件到 S3

> ID：13677357
> 
> 赞同：0
> 
> 时间：2012-12-03T04:55:51.767
> 
> 标签：build, amazon-s3, cloudbees

在我内部的 jenkins 服务器上，我使用 S3 插件将战争文件上传到 s3 存储桶。我怎么能用 cloudbees 做到这一点？有集成这个插件的计划吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:39:11.963

此插件在 DEV@cloud 的 Pro 和 Enterprise 层上可用，但在 Free 和 Base 层上不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T06:53:15.180

如果除了 S3 文件传输之外，基本账户级别非常适合您，并且您还没有准备好为了获得 S3 文件副本而大幅提价，您可以考虑使用以下解决方法将文件传输到您的 EC2：

可以使用脚本从构建环境中获取内容：
[http ://wiki.cloudbees.com/bin/view/DEV/Accessing+Jenkins+using+HTTP+Basic+Authentication](http://wiki.cloudbees.com/bin/view/DEV/Accessing+Jenkins+using+HTTP+Basic+Authentication)

例如：
curl -u EMAIL:JENKINS_API_KEY [https://your_account_name.ci.cloudbees.com/job/job_name/ws/your_file_name](https://your_account_name.ci.cloudbees.com/job/job_name/ws/your_file_name) > your_file_name

您可以对您的文件进行指纹构建后处理，然后检查该指纹页面的 md5 哈希值。

# javascript - 在 JavaScript / JQuery 中查找连续重复值及其位置的最简单方法

> ID：13677358
> 
> 赞同：0
> 
> 时间：2012-12-03T04:56:09.280
> 
> 标签：javascript, jquery, html

我需要检查数组以查看数组中是否有任何连续的重复数字并找到它们的位置。

示例 究竟需要什么将清除您的想法

```
var myCars=[1 ,1 , 2, 3, 5];   O/P:- 1 is repeated at position 0 & 1.

var myCars=[1 ,1 , 2, 5, 5];   O/P:- 5 is repeated at position 3 & 4\. Since 5 is maximum number.

var myCars=[5 ,4 , 1, 1, 1];   O/P:- 1 is repeated at position 2 ,3 & 4.

var myCars=[5 ,5 , 1, 1, 1];   O/P:- 1 is repeated at position 2 ,3 & 4\. Since 1 is repeated more number of times. 
```

我尝试了多种方法，但找不到最好的方法。最简单的方法是什么？

以下代码我已经尝试过，但它没有给出确切的期望输出。

```
var myarray = ["John", "Doe", "Smith", "Doe", "Joe"];

var map = {};
var count = myarray.map(function(val) {
    return map[val] = (typeof map[val] === "undefined") ? 1 : map[val] + 1;
});

var newArray = myarray.map(function(val, index) {
    return val + (map[val] != 1 ? ' - ' + count[index] : '');
});

alert(newArray); 
```

假设只有元素在数组中

[http://jsfiddle.net/alnitak/Z4dgr/](http://jsfiddle.net/alnitak/Z4dgr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:01:03.847

这有效：迭代并检查当前与下一个和上一个项目。将每个项目的匹配计数和匹配索引添加到单独的对象中。

```
var results = {};
var positions = {};

myarray.forEach(function(item, index) { 

    if ((index > 0 && myarray[index-1] == item) || (index < myarray.length+1 && myarray[index+1] == item)) {
        results[item] = (results[item] || 0) + 1;
        (positions[item] || (positions[item] = [])).push(index);
    }
});

alert(JSON.stringify(results));
alert(JSON.stringify(positions));​ 
```

[JSFiddle](http://jsfiddle.net/9mQ2b/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:06:16.750

此代码完全按照预期工作

[http://jsfiddle.net/9mQ2b/11/](http://jsfiddle.net/9mQ2b/11/)

```
<!DOCTYPE html> 
<html> 
<script>
var myarray = ["1", "1", "4", "4", "3"];
var results = {};
var positions = {};
var j = count = -1;
for(i=0; i<=3; i++)
{ 
if (myarray[i] == myarray[i+1])  // check if num are equal
{
if (count != myarray[i])   //check if continuous num are not equal & set starting position..
{ j++; results[j] = myarray[i]; positions[j] = i; count = myarray[i];
}
if (i == 3) //  set last position of last number if last digit 
positions[j+1] = i+1;
}
else
{
if (count == myarray[i])  // set last position of digit
positions[++j] = i;
count = -1;
}
}
alert(JSON.stringify(results));
alert(JSON.stringify(positions));    
</script>
<body> 
</body> 
</html>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:07:23.977

我要做的是创建一个二维数组进行计数。第一个 simension 将是被计数的项目，第二个 simension 将是该项目的计数。然后做你的比较。填充阵列后。

我选择这个解决方案是因为我喜欢简单、易于理解的编程方法。让生活变得轻松。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T05:09:40.723

您可以`jquery inArray`为此使用函数：代码是

```
var myarray = ["John", "John", "John", "Doe", "Doe", "Smith",
               "John", "Doe", "Joe"];

var str='';var i=0;
$.each(myarray,function()
       {
           str+=myarray[i]+'='+$.inArray(myarray[i],myarray,i)+', ';
           i++;
       })

alert(str); 
```

或在这里测试小提琴[http://jsfiddle.net/Z4dgr/2/](http://jsfiddle.net/Z4dgr/2/)

# sql - 消除类似行但具有特定值

> ID：13677361
> 
> 赞同：1
> 
> 时间：2012-12-03T04:56:30.347
> 
> 标签：sql, oracle11g, analytic-functions

我有用户表和 user_group 表。单个用户可以在多个组中。我有两个组管理员和用户。管理员组的组 ID 为 1，用户组的组 ID 为 2。当我选择加入这两个表时。我想使用两个表之间的连接来选择它：

```
select * from users u
join user_groups ug
on u.user_id = ug.user_id; 
```

我在每行中两次获得管理员。我想在此查询中以组 id 为用户即 1 的管理员消除其他行，我该如何实现？**sqlfiddle**在[这里](http://sqlfiddle.com/#!4/d7ac5/1)。_ 组相关信息在 all_groups 表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:18:23.703

假设您要保留具有最大值的`group_id`行

```
select *
  from (select u.user_id,
               u.username,
               u.first_name,
               u.middle_name,
               u.last_name,
               u.password,
               ug.group_id,
               rank() over (partition by ug.user_id
                                order by ug.group_id desc) rnk
          from users u
               join user_groups ug
                 on u.user_id = ug.user_id)
 where rnk = 1; 
```

应该管用。这是[sqlfiddle](http://sqlfiddle.com/#!4/d7ac5/3)

# javascript - 如何在 PogoScript 中索引数组？

> ID：13677364
> 
> 赞同：2
> 
> 时间：2012-12-03T04:56:39.823
> 
> 标签：javascript, pogoscript

我不知道如何使用 PogoScript 中的变量来索引数组。

常量似乎有效：

```
xs = ['beef','wellington','ensemble']
console.log (xs.1) // prints wellington 
```

但变量不会：

```
xs = ['beef','wellington','ensemble']
i = 1
console.log (xs.i) // prints undefined 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:00:25.500

上周有这个问题我自己也无法弄清楚。

我在[PogoScript GitHub](https://github.com/featurist/pogoscript/issues/7)页面上创建了一张票，并在那里得到了答案。

您需要在变量周围放置括号以索引到数组中：

```
xs = ['beef','wellington','ensemble']
i = 1
console.log (xs.(i)) // prints wellington 
```

此外，[备忘单](http://pogoscript.org/cheatsheet.html)现在已使用此信息进行了更新！

# yui - 需要修改 yui 'key press' 事件处理

> ID：13677366
> 
> 赞同：0
> 
> 时间：2012-12-03T04:56:59.220
> 
> 标签：yui

我想对 key.js 文件进行一些修改，以便能够处理除“shift”、“alt”、“ctrl”或“meta”之外的修饰符，即类似“down:50+alt+49”（altkey +onekey+towkey) 也应该有效。

[url]http://yuilibrary.com/yui/docs/event/key.html[/url]

如何更改此文件并确保在我调用时使用修改后的文件

YUI().use("event-key", function(Y) { Y.on('key', function() {console.log('test'); }, '#my-input-element', '向下：50+alt+49');

提前致谢。KD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:22:28.700

您是否考虑过为特定的击键组合创建合成事件，而不是覆盖核心 YUI JS（更新 YUI 时可能会导致麻烦）？

此处的示例/文档：

*   [http://yuilibrary.com/yui/docs/event/synths.html](http://yuilibrary.com/yui/docs/event/synths.html)
*   [http://yuilibrary.com/yui/docs/event/synth-example.html](http://yuilibrary.com/yui/docs/event/synth-example.html)
*   [http://yuilibrary.com/gallery/show/event-konami](http://yuilibrary.com/gallery/show/event-konami)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:00:18.293

The easiest way is to load your modified file through a tag right after loading yui-min.js and before calling YUI().use. When your file is loaded, if it has the same name as the original in the YUI.add() wrapper, the loader will know the requirement for 'event-key' is fulfilled and it will not load the version from the Yahoo sites. It will, however, fill in the dependencies it needs.

# windows-phone - Windows Phone 动态表

> ID：13677367
> 
> 赞同：0
> 
> 时间：2012-12-03T04:57:02.553
> 
> 标签：windows-phone, tabular

这是我的第一个 WinPhone 应用程序。

所以，我需要创建动态表。以编程方式创建它，而不是从 XAML。

应用程序将从服务器下载一些信息并将其显示在表格上，这就是表格具有动态单元格计数的原因。

它看起来像在这个应用程序中：

![在此处输入图像描述](../Images/2ebe51750dafa3ad3287b163ec4cf0a9.png)

或这个：

![在此处输入图像描述](../Images/357d214f3e30c466df1133d7d1c950f1.png)

我该怎么做？请给我一些教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:46:46.063

你有很多样本指向这个解决方案。您需要从 Internet 或任何其他来源获取数据，然后使用 ListBox 控件绑定到此数据以获取您所谓的“动态表”或与您的数据源对应的行列表。

您在 dev.windowsphone.com 或 nokia.com 上有示例： **RSS 阅读器 Silverlight**： http: [//www.developer.nokia.com/info/sw.nokia.com/id/934cc415-474e-43a1-8edc-6d41aa238914 /RSS_Reader_Silverlight.html](http://www.developer.nokia.com/info/sw.nokia.com/id/934cc415-474e-43a1-8edc-6d41aa238914/RSS_Reader_Silverlight.html) **RSS 阅读器示例**：[http ://code.msdn.microsoft.com/wpapps/RSS-Reader-Sample-1702775f](http://code.msdn.microsoft.com/wpapps/RSS-Reader-Sample-1702775f)

或者我错过了你的问题！

希望这有助于最好的问候

# php - 出现错误“下面是第一个错误之前的页面呈现。”

> ID：13677369
> 
> 赞同：4
> 
> 时间：2012-12-03T04:57:05.643
> 
> 标签：php

我正在使用 XMLWriter 创建 xml。下面是我的代码，它工作正常。

```
<?php
header("Content-Type: text/xml;");
$writer = new XMLWriter(); 
$writer->openMemory();  
$writer->startDocument('1.0'); 
$writer->setIndent(4); 
$writer->startElement('epp'); 
$writer->startElement("command"); 
$writer->startElement("login"); 
$writer->writeElement('clID', 'hello'); //username
$writer->writeElement('pw', 'abcdefg'); //password
$writer->endElement(); //login
$writer->endElement(); //command
$writer->endElement(); //login
$writer->endDocument(); 
$file =  $writer->outputMemory(true); 
echo $file;

?> 
```

如果使用下面的代码，我会收到错误“Getting Error”Below is a rendering of the page up to the first error.”。

```
<?php
$time  = time();
echo $time;
header("Content-Type: text/xml;");
$writer = new XMLWriter(); 
$writer->openMemory();  
$writer->startDocument('1.0'); 
$writer->setIndent(4); 
$writer->startElement('epp'); 
$writer->startElement("command"); 
$writer->startElement("login"); 
$writer->writeElement('clID', 'hello'); //username
$writer->writeElement('pw', 'abcdefg'); //password
$writer->endElement(); //login
$writer->endElement(); //command
$writer->endElement(); //login
$writer->endDocument(); 
$file =  $writer->outputMemory(true); 
echo $file;

?> 
```

错误：对于下面的代码块是错误：我在谷歌浏览器中得到这个：

```
 This page contains the following errors:

 error on line 1 at column 1: Document is empty
 Below is a rendering of the page up to the first error. 
```

**如果我没有使用 header("Content-Type: text/xml;"); 然后上面的代码块正在工作，但时间正在显示并且没有给出 xml 格式。**以下是错误：

```
1354510317 hello abcdefg 
```

**编辑：** 在Mozilla我得到以下错误：

```
XML Parsing Error: not well-formed
Location: http://localhost/example.php
Line Number 1, Column 11:1354512268<?xml version="1.0"?>
 ----------^ 
```

如果我的代码做错了什么，请提出建议。

“下面是直到第一个错误的页面呈现。” 错误可以消除吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T05:42:36.760

如果您在 XML 内容之外回显时间，则它不再是有效的 XML，这就是浏览器抱怨的原因。

将内容类型指定为 text/xml 会告诉浏览器解析 XML 并将其呈现为可读格式。

如果您查看失败代码的来源，您应该看到后面的时间是原始 XML 内容。

当您不发送 text/xml 内容类型时它看起来不正确的原因是浏览器本质上将 XML 标记视为 HTML 并决定它们不会改变布局，因此它只显示来自的纯文本值标签内。

如果您想在页面中混合正常输出和 XML 输出，则需要很好地格式化 XML 并对其进行 HTML 编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-22T18:20:48.123

```
header("Content-Type: text/xml;"); 
```

您在那里使用什么类型的标头，以便输出应采用该格式。

例子 ：

```
header("Content-Type: text/xml;");

output : coutput in xml format

header("Content-Type: text/php;");

output : output in php format 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-02T14:56:41.263

很多时候，不需要结束标记的 HTML 元素会出现此错误。

```
Bad:  <img src="https://google.com">
Good: <img src="https://google.com"/> 
```

# windows - 如何获取 Windows 系统托盘上图标的大小？

> ID：13677374
> 
> 赞同：2
> 
> 时间：2012-12-03T04:57:28.373
> 
> 标签：windows, winapi

我想在 Windows 系统托盘上显示之前自己加载适当的图标大小。如果我让 Windows 执行此操作（如网络上许多页面上所建议的那样），它会使用错误的图标大小，并且生成的系统托盘图标看起来很糟糕。如果我找到一种方法来指定要加载的图标大小，我可以在 Photoshop 中做得更好。

使用 LoadIconWithScaleDown 甚至 LoadImage 加载特定图标大小的任务很容易，问题是如何找出系统托盘中显示的图标的当前大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T19:15:36.310

通知区域图标是方形图标，大小等于`GetSystemMetrics(SM_CXSMICON)`。换句话说，它们是小图标。

文档末尾的示例代码[`NOTIFYICONDATA`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb773352.aspx)默认了这一点。

# php - 在php中动态测量A4尺寸

> ID：13677376
> 
> 赞同：1
> 
> 时间：2012-12-03T04:57:35.477
> 
> 标签：php, html, css

我已经从数据库中获取数据并显示为 html 页面。我的要求是在具有固定页眉和页脚的 A4 大小页面中显示数据。

我的问题是如何在 php 中动态测量 A4 纸张大小？

我已经尝试过在下面的屏幕截图中看到。

![在此处输入图像描述](../Images/430a8927e68ef09c7b79c46df0a58808.png)

根据上面的屏幕截图，第 1 部分和第 3 部分是固定高度。只有第 1 部分和第 2 部分有动态显示数据。第 2 部分包含任意数量的记录。

是否可以显示 1 或 2 项然后自动增加第 2 部分的高度以适合 A4 尺寸。如果项目超过 1 页，则它会自动设置在具有固定页眉和页脚的另一页中。

**注意：我使用不同的 css 进行打印和显示**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:30:38.970

我会这样想：

您无法直接将 html 元素的高度输入到 php 中（至少您无法在不渲染内容的情况下轻松做到这一点，这将非常麻烦），因此唯一的方法是猜测未来元素的高度。身高有什么限制？它是应用于它的内容和样式。在PHP中你可以先得到，例如你可以得到描述的长度、到期日期、数量等等字符串。基于此并了解实际样式信息，您可以很好地预测行高。

像这样：

每一行都假设有一些固定的高度，所以只需计算有多少行适合 A4 格式，然后相应地计算 PHP 脚本中的行数。如果有多个高度，它们应该具有线性依赖关系，因此找出它应该不是很大的麻烦。

# ruby-on-rails - ruby 控制台和应用程序的不同输出

> ID：13677377
> 
> 赞同：0
> 
> 时间：2012-12-03T04:57:35.797
> 
> 标签：ruby-on-rails, debugging, console

我有一个遗留的 Rails 2.3.2 应用程序，它有一些功能允许用户通过浏览器访问一些 rake 任务。**就在最近，该应用程序停止在浏览器中**显示可用任务列表（通过运行 shell 命令获得）。

在我的开发机器上它工作得很好。它也适用于许多其他生产服务器。但是，我创建的任何新生产服务器都会停止工作。

现在这是令人沮丧的部分。如果我在控制台中测试代码，即使在有问题的生产服务器上也能完美运行。我什至通过`app.get`在控制台中拨打电话对其进行了测试，它始终有效。我已经在控制台的开发和生产环境中对此进行了测试。同样，它似乎只在浏览器中失败。

任何人都可以提出任何解决这个问题的策略吗？为什么通过浏览器和控制台的响应会有所不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:39:11.613

这需要一点挖掘，但我想通了，所以我想我会分享我发现的东西，以防其他人遇到类似的问题。

答案在于我们的生产服务器设置的两个方面。

1.  我们在我们的生产服务器上使用 Phusion Passenger（顺便说一句，优秀的系统！），作为乘客配置的一部分，它在与我通过控制台访问的**用户不同的用户下运行。**通常，这不是问题，因为两个用户（服务器用户和控制台用户）具有几乎相同的权限。

2.  在生产服务器的设置过程中出现了一个错误，其中一个 gem（在我的例子中是一个相当重要的 - `i18n`）安装在**错误的位置**。基本上，当它安装时`sudo`，在命令的开头就错过了。因此，这个 gem 安装在控制台用户的主文件夹中，而不是系统 gems 文件夹中。

通常这种特殊情况不是问题，因为所有应用程序都正常运行。只有当您尝试运行需要访问该 gem 的 shell 命令时，它才会让您感到悲伤。

顺便说一句，即使我尝试访问执行 rake 任务，这也**不会在日志中触发异常。**它给了我通常的***500 内部服务器错误***，但没有写入日志（这让我觉得有点奇怪）

如果你需要检查这样的事情，我最终发现它是以**服务器用户**身份登录到控制台，然后尝试运行 shell 命令。一旦我这样做，它就给了我一个错误，说它找不到所需的宝石。然后我使用命令检查了 gem 的位置，`gem which`发现它安装在错误的位置。

我希望有人觉得这很有帮助，并且可以节省他们的时间，因为我花了几天时间试图弄清楚这一点。

# magento - 如何在 .CSV 文件中编写 HTML 锚标记？

> ID：13677381
> 
> 赞同：1
> 
> 时间：2012-12-03T04:58:12.437
> 
> 标签：magento, csv, export-to-csv

我已经搜索过，但无法找到有关我的问题解决方案的任何信息。

我有一个包含 1000 多种产品的大型数据库，已格式化以上传到 Magento 电子商务软件。

描述是用 HTML 编写的，除了锚标记外，它工作正常。

当我使用双引号时，它被 ǎ 字符替换。当我从任何电子表格程序将文件另存为 .csv 时，链接如下所示：

```
< a href=ǎhttp://link.comǎ> Some Link < /a> 
```

我读到我需要使用双引号来转义并在 CSV 文件中使用单引号，即我现在编写的锚标记如下所示：

```
< a href=""http://link.com""> Some Link < /a> 
```

没用。

我总共尝试过：

*   使用不同的电子表格软件，包括 iWork Numbers、Microsoft Excel、OpenOffice Calc 和 Google Docs
*   将新电子表格中的所有单元格格式化为纯文本，导入单独的描述
*   试图通过使用双引号来转义引号（不确定我是否真的需要它是三引号，因为我只是想转义引号？）

我相当确定这是 .CSV 文件处理引号的方式存在问题，但我不确定如何在电子表格中写入引号，以便 .CSV 将其正确呈现为单引号而不是特殊引号特点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:19:50.477

将此行存储在 CSV 文件中：

```
Somelink,<a href="http://link.com">Some Link</a> 
```

你需要这样写：

```
Some Link,"<a href=""http://link.com"">Some Link</a>" 
```

如果要转义双引号`"`，请用双引号将整个单元格/值括起来`"`

# java - 使用 Java 应用程序将隐藏值 (ID) 存储在带有值的列表框中

> ID：13677382
> 
> 赞同：1
> 
> 时间：2012-12-03T04:58:22.703
> 
> 标签：java

我不知道这是否可能。

```
// Adding values to a listbox in Java
DefaultListModel<String> model = new DefaultListModel<String>();
model.addElement("One");
model.addElement("Two");
list1.setModel(model); 
```

我想要的是以某种方式在列表框中存储一个值，如下所示：

```
If user clicks on "One", ID=1 is retrieved.
If user clicks on "Two", ID=2 is retrieved. 
```

我知道如何检索选定的值，但我想存储一个隐藏的 ID。使用基于 Web 的编程很容易做到这一点，但不确定是否可以使用 Java 来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:00:49.380

是的，这是非常可能的，但关键不是在模型中存储字符串，而是保存字符串和 id 等的对象。

假设一个类 MyFoo 包含这些字段。

```
DefaultListModel<MyFoo> model = new DefaultListModel<String>();
model.addElement(new MyFoo("One", 1));
model.addElement(new MyFoo("Two", 2));
list1.setModel(model); 
```

唯一的问题是您需要为 JList 提供一个仅显示数字字符串的 ListCellRenderer，但这并不难，教程将向您展示如何做到这一点。

另一种解决方案是创建一个`HashMap<String, Integer>`将数字 String 与其相关 int 映射的方法，但我更喜欢第一个解决方案，因为它对我来说似乎更干净。

# javascript - 如何使用图像作为提交按钮，将自身提交到服务器？

> ID：13677383
> 
> 赞同：0
> 
> 时间：2012-12-03T04:58:22.770
> 
> 标签：javascript, html, image, forms, src

```
<form name="myform" action="app.py">
<div class="box">

<input type="image" id="image" src="http://mychickencoopplans.files.wordpress.com/2010/12/happy-chicken.jpg" >

</div>
</form> 
```

我正在尝试创建一张图片，点击后将其发送到服务器（app.py）？我将如何使用 HTML/javascript 完成此操作？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:03:36.463

尝试：

```
 <form name="myform" action="app.py">
        <input type="hidden" value="" id="hidSrc">
        <div class="box">
            <input type="image" id="image" onclick="document.getElementById('hidSrc').value = this.src;document.myform.submit();" src="http://mychickencoopplans.files.wordpress.com/2010/12/happy-chicken.jpg" >
        </div>
    </form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:06:09.073

你可以试试这个

```
<form name="myform" action="app.py">
    <input type="hidden" value="" id="hidimgSrc">
    <div class="box">
        <input type="image" id="image" onclick="document.getElementById('hidimgSrc').value = this.src;document.getElementById('myform').submit();" src="http://mychickencoopplans.files.wordpress.com/2010/12/happy-chicken.jpg" >
    </div>
</form> 
```

# java - 嵌套类 - 如何从内部类中获取变量？

> ID：13677387
> 
> 赞同：0
> 
> 时间：2012-12-03T04:58:44.467
> 
> 标签：java

```
class OuterClass {
    ...
    class InnerClass {
       int i;
       public void foo() {
          i = 2; 
       }
    }
} 
```

如何获得 i 的价值，以便可以在 OuterClass 的方法中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:00:03.407

由于变量`i`is not `static`，您需要一个内部类的实例来访问它。`new InnerClass().i;`足以在外部类中获取和使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:02:08.710

OuterClass.InnerClass innerObject = outerObject.new InnerClass(); 通过使用此对象，您可以调用方法。但是方法应该返回 i 值。公共 int foo() { i = 2; 返回我；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:06:32.960

```
OuterClass outer = new OuterClass();
outer.InnerClass inner = new InnerClass();
inner.foo(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T05:41:57.783

由于内部类变量 i 不是静态的，也没有在外部类上创建内部类的任何实例。您需要创建外部类的实例，获取与之关联的内部类的新实例，然后在该实例上调用使 i 值更改的方法，然后读取 i 值。为了让它更好，你可以考虑在 i 上添加 getter 方法。

# java - 在 Android (Java) 中关闭输入流

> ID：13677389
> 
> 赞同：2
> 
> 时间：2012-12-03T04:58:48.033
> 
> 标签：java, android, inputstream

所以。我正在尝试在 Android 上做一些网络工作。在我的异步任务中，我正在做：

```
InputStream streamOfDestiny = null;

try{
    // do some network stuff here...
}
finally{
    if(streamOfDestiny != null){
        streamOfDestiny.close(); // Build error here. Apparently, closing a stream can cause an IOException. Why this is the case, I do not know. But it is. And, since this is Java, I apparently need to care.
    }
} 
```

所以现在我有这个 IOException 把一切都搞砸了。我可以做这样的事情：

```
InputStream streamOfDestiny = null;

try{
    // do some network stuff here...
}
finally{
    if(streamOfDestiny != null){
        try{
            streamOfDestiny.close();
        }
        catch(IOException e){
            // Hey look! I'm inside a catch block, inside a finally block!
        }
    }
} 
```

但这看起来很糟糕。finally 块中的 try/catch 块？多么丑陋！我完全可以让它保持关闭状态，但这对我来说似乎是一种不好的做法，而且感觉不对（我开始直播，我想完成它）。我可以这样做：

```
IOUtils.closeQuietly(streamOfDestiny); 
```

但现在我必须找到 org.apache.commons.io.IOUtils 并以某种方式将其包含在我的包中。工作量太大，加上我只需要一个功能的东西增加了我的包大小。瘸。

我总是可以编写自己的 closeQuietly 版本：

```
public static void closeStreamQuietly(InputStream streamToClose){
    try{
        streamToClose.close();
    }
    catch (IOException e){
        // ignore it....
    }
} 
```

但这似乎是我在重新发明轮子，这几乎总是坏消息——感觉应该有一些不错的、优雅的方式来做这件事，而我在这里完全错过了。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:03:02.720

我不确定你为什么将你的 option-2（try-catch 块在 finally）或 option-4（创建一个小 util 方法）称为丑陋或额外的工作。这是正常的，也是意料之中的。

**如果您在内部编写任何代码，`finally`则应进行相关的异常处理**，这就是这种情况。

您已经通过`null`检查完成的一个异常处理（预防性），否则它可能会`NullPointerException`在`streamOfDestiny`为空时抛出。

需要第二次异常处理来处理 Stream 关​​闭的异常场景，这可能是由于 Stream is 等原因`not open`，`unavailable`或者像[这样](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6204940)`it's not able to release the underline resources`的场景等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:25:10.157

直接从网上复制 IOUtils 代码：

[http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/1.4/org/apache/commons/io/IOUtils.java#IOUtils.closeQuietly%28java.io.InputStream% 29](http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/1.4/org/apache/commons/io/IOUtils.java#IOUtils.closeQuietly%28java.io.InputStream%29)

此外，习惯于在 finally 块中处理异常。这不会是你最后一次看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:47:29.213

没有什么奥秘。`close()`在大多数实现中调用`flush()`（参见 Javadoc 的`FilterOutputStream`），并且`flush()`可以抛出`IOException,`，因为它可能执行 I/O。其他可能性是可以想象的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-09T23:28:03.827

您应该使用资源尝试。

```
try (InputStream streamOfDestiny = ...) {
    //Do you networking stuff
} catch (IOException ioe) {
    //Handle the exceptions
} 
```

# php - CSS 输出 php echo 没有表格

> ID：13677391
> 
> 赞同：0
> 
> 时间：2012-12-03T04:59:06.920
> 
> 标签：php, html, css

有没有办法在不使用表格的情况下，用我在 PHP 中回显的内容获得 excel 电子表格类型的格式？

```
$result = mysql_query("SELECT * FROM posts"); 
while($row = mysql_fetch_array($result))
{
    echo $row['user'] . " " . $row['email'] . " " . $row['age'] . " " . $row['image'] . " " . $row['created_at'];
    echo "<br />";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:17:58.740

尝试使用`div`. 根据需要设置`width`。

```
<?php
mysql_select_db("test",mysql_connect("localhost","root",""));

$result = mysql_query("select * from test");
$count = mysql_num_rows($result);
$counter = 0;
while($row = mysql_fetch_array($result))
{
    $counter++;
?>
<div style="clear:left; float:left; width:604px;<?php echo $counter == $count ? "border-bottom:1px solid black;" : ""; ?>">
    <div style="float:left; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; width:200px;"><?php echo $row['fullname'] ?></div>
    <div style="float:left; border-right:1px solid black; border-top:1px solid black; width:200px;"><?php echo $row['email'] ?></div>
    <div style="float:left; border-right:1px solid black; border-top:1px solid black; width:200px;"><?php echo $row['password'] ?></div>
</div>
<?php   
}
?> 
```

这会给你这样的输出，
![在此处输入图像描述](../Images/562e5e2932b6fff0d5b56a9fe28ae675.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:02:22.750

使用蓝色打印 CSS 来显示网格。

请看`http://www.blueprintcss.org/`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:09:21.197

您可以将 CSS 应用于代码中嵌入 PHP 的 HTML 元素。

例子：

```
<table class="style_1">
<?php
while($row = mysql_fetch_array($result))
{
?>
    <tr class="style_2">
        <td class="style3"> <? $row['user'] ?></td>
        <td class="style3"> <? $row['email'] ?></td>
        <td class="style3"> <? $row['age'] ?></td>
     </tr>

 <? } ?> 
```

# maple - 为什么这个程序不能运行？

> ID：13677399
> 
> 赞同：0
> 
> 时间：2012-12-03T04:59:32.780
> 
> 标签：maple

我被要求验证此功能是减少还是增加：

> f(x)=sqrt(2+5x)

我现在在课堂上使用 Maple 15，编写以下命令无法解决问题。

> f := x-> sqrt(2+5*x): 求解(diff(f(x), x) > 0, x);

运行后；它向我显示：

> *警告，解决方案可能已丢失*

事实上，我希望有一些间隔，但没有正确完成。我能做些什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:55:54.120

`Solve`对不平等没有那么好用。一个例子：

```
solve((sqrt(x^2))>0,x);
                     RealRange(Open(0), infinity) 
```

所以一半的解决方案在没有警告的情况下丢失了。你将不得不自己思考。我将计算原始函数的根，从中确定有效输入范围并计算导数的根。由于没有根，它的符号是恒定的，只需填写一个有效的 x 即可获得整个有效输入范围的导数符号。

```
solve(f(x)=0,x);

                                 -2/5
solve(diff(f(x),x)=0,x);

subs(x=0,diff(f(x),x));

                                   1/2
                                5 2
                                ------
                                  4 
```

所以正号意味着增加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:12:11.637

的域`sqrt(2+5*x)`是所有不小于零的点。`x``2+5*x`

对于此示例，您可以询问 Maple 是否可以判断域中`sqrt(2+5*x)`所有的导数大于零。`x`如果答案是，`true`那么它在其领域的任何地方都在增加。

```
restart:

is( diff(sqrt(2+5*x),x) > 0 ) assuming 2+5*x >= 0;

                          true 
```

# database - 问答网站应该使用什么数据库？

> ID：13677400
> 
> 赞同：0
> 
> 时间：2012-12-03T04:59:34.827
> 
> 标签：database

我正在构建一个包含许多类别的问答网站，就像 stackexchange 一样。但是，我想知道如何组织数据库。目前，我组织如下：

*   **类别**表：存储所有类别
*   **问题**表：所有问题都存储在这里并按CategoryID分类

但是，我担心 Question 表会快速增长，从而影响查询速度。所以，我想知道***我应该为每个类别创建每个问题表***吗？例如，我可能有：

*   **类别**表：存储所有类别
*   **技术问题**表：仅存储有关技术的问题
*   **科学问题**表：仅存储有关科学的问题
*   **法律问题**表：仅存储有关法律的问题

任何人都可以给一些建议吗？目前，我正在使用 MySQL DB。

另一个担心是我听说一些大的问答网站使用了 Hadoop 等 NoSQL DB，我不知道我是否应该使用这样的大数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:50:49.100

组织起来会更困难，因为如果要从结构中添加或删除某些内容，则必须为每个表都这样做，并且还必须检测哪些表是类别表。数据库可以处理大量记录，您应该使用一张表，但要仔细设计表和查询。如果您真的热衷于这个想法，我建议您使用一个表但多个视图来代替。

# mysql - 如果我为已在覆盖索引中编制索引的单个字段创建单独的索引，我会观察到性能提升吗？

> ID：13677401
> 
> 赞同：1
> 
> 时间：2012-12-03T04:59:43.563
> 
> 标签：mysql

我有一个包含字段的覆盖索引，`a` `b`并且`c`按该顺序。

```
ALTER TABLE table ADD INDEX covering(a, b, c) 
```

以下查询使用覆盖索引，更具体地说，只是覆盖索引中的第一个字段。

```
SELECT * FROM table
GROUP BY a 
```

如果我创建另一个专门包含的索引，我会观察到性能提升`a`吗？

```
ALTER TABLE table ADD INDEX a(a) 
```

`SELECT`还是上述索引的工作方式与语句中的覆盖索引完全相同？

如果我的查询是`GROUP`在一个不是覆盖索引中第一个序列的字段上执行的呢？

```
SELECT * FROM table
GROUP BY b 
```

我的索引是

```
ALTER TABLE table ADD INDEX b(b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:14:35.197

如果您有复合索引`(a, b, c)`并使用`ORDER BY a`，那么它将工作并使用该索引。在 just 上添加索引`(a)`将使查询计划器更可取，但这将是浪费的，因为您必须在索引中保留更多数据，并且在表更新时更新两个索引。使用较窄的指数会有少量收益，但可能难以量化这种优势。

至于使用 查询`ORDER BY b`，它不能使用上面的任何索引，您必须创建索引`(b)`或复合索引`(b, ...)`才能获得合理的性能。

# java - 关于xml流

> ID：13677405
> 
> 赞同：-1
> 
> 时间：2012-12-03T05:00:09.970
> 
> 标签：java, xml

我正在通过一个应用程序的方法，请根据我的理解告诉它它基本上做什么，它读取一个 xml 流并将其作为字符串返回

```
public static final int BUFFER_SIZE = 4096;

 protected Object processStream(InputStream inp) throws IOException
  {
    BufferedInputStream bis = new BufferedInputStream(inp);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    GZIPOutputStream zip = new GZIPOutputStream(baos);
    byte[] buffer = new byte[BUFFER_SIZE];
    int bufferLength = 0;
    while ((bufferLength = bis.read(buffer)) != -1)
    {
      zip.write(buffer, 0, bufferLength);
      zip.flush();
    }
    zip.close();
    baos.close();
    return baos.toByteArray();

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:04:44.623

它通过逐字节读取缓冲区来写入输出流，即 GZIP 中的压缩数据，直到缓冲区返回 null。

但在程序缓冲区是空的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:09:28.490

它读取输入流（例如从文件中）并以 zip（压缩）格式（GZIP 文件格式的精确压缩数据）写入输出流

# php - 如何检查来自 CodeIgniter 的所有发布请求

> ID：13677413
> 
> 赞同：0
> 
> 时间：2012-12-03T05:00:56.557
> 
> 标签：php, codeigniter

我想检查我的应用程序的所有发布请求。我创建了一个新的路线选项。

```
$route['(:any)'] = 'any'; 
```

这将调用任何控制器。这是我的 any.php

```
if ( !defined('BASEPATH') ) exit('No direct script access allowed');

class Any extends CI_Controller {

    public function __construct() {
        parent::__construct();

    }

    function index(){
        if(  $_POST ){
            if( validate() ){
                // redirect to error controller
            }else{
                //redirect to current page url
            }
        }else{
            //redirect to current page url
        }
    }
} 
```

但是当我通过这个函数重定向（$this->uri->uri_string）重定向时，我得到了一些错误页面。关于不能重定向到它自己。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:43:58.180

你做错了它会卡在一个重定向循环中......在第一次之后它总是会调用你放置重定向的 else 条件......你可以在 else 条件下加载视图或重定向到你所在的其他函数加载视图。

**更新**

这是您要实现的目标的工作： Create a post_controller_construct hook with following code

```
class validate_post_request
{
    function validate_request()
    {
        //Here i am supposing your validate function is in helper 
        //which is included in autoload. The function returns
        //true if validation passed and false on failure
        if( !validate() ) {
            show_error('Your error message to display');
            exit;
        }
    }
} 
```

# java - 可以使用扫描仪写入文件吗？

> ID：13677416
> 
> 赞同：1
> 
> 时间：2012-12-03T05:01:10.790
> 
> 标签：java, android, java.util.scanner

我有以下代码片段

```
 /* I have got the file. Now moving to the desired place */
Scanner in_chap = new Scanner(chap);
in_chap.useDelimiter(qa_delimiter);
while (in_chap.hasNext()) {
    String str = get_my_info();
            /* Now I need to replace the the current line with str */
     } 
```

有没有办法使用扫描仪引用将 str 写入新的偏移量？如果我不能，还有其他方法吗？我需要使用扫描仪到达那条线。现在我想用新字符串替换它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:05:02.367

不，顾名思义，它是一个`Scanner`，它只用于阅读，不用于写作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:06:26.613

> 有没有办法使用扫描仪引用将 str 写入新的偏移量？

不`Scanner`，课程仅用于阅读目的。

# jquery - 在选择框选择上更改 img src

> ID：13677428
> 
> 赞同：1
> 
> 时间：2012-12-03T05:02:27.590
> 
> 标签：jquery, ajax, json

我有一个使用 jQuery 和 AJAX 填充输入字段的表单。当我从动态填充的下拉列表中选择选项时，我无法`img`更改 URL 。`src`

JavaScript：

```
$(document).ready(function(){
    $("#id").change(function(){
        $.ajax({
            url     : 'get_driver_data2.php',
            type    : 'POST',
            dataType: 'json',
            data    : $('#ContactTrucks').serialize(),
            success: function( data ) {
                   for(var id in data) {        
                          $(id).val( data[id] );
                   }
            }
        });
    });
}); 
```

PHP：

```
$id_selected = $_POST['id']; // Selected  Id
$query  = "SELECT * from admin_dispatch_records where id = '$id_selected' AND     driver LIKE '%$username%'";
$result = mysqli_query($dbcon, $query);
while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC)) {
    $eta = $row['eta'];
    $time = $row['dispatch_time'];
    $date = $row['dispatch_date'];
    $name = $row['name'];
    $phone = $row['phone'];
    $vehicleyear = $row['vehicleyear'];
    $color = $row['color'];
    $make = $row['make'];
    $model = $row['model'];
    $vin = $row['vin'];
    $plate = $row['plate'];
    $mileage = $row['mileage'];
    $pickup = $row['pickup'];
    $dropoff = $row['dropoff'];
    $price = $row['price'];
    $invoice = $row['invoice'];
    $cash = $row['cash'];
    $credit = $row['credit'];
    $check = $row['check'];
    $po = $row['po'];
    $billed = $row['billed'];
    $need_to_bill = $row['need_to_bill'];
    $getphoto = $row['image_path'];
}

$arr = array( 'input#eta' => $eta, 'input#dispatch_time' => $time, 'input#dispatch_date' => $date, 'input#name' => $name, 'input#phone' => $phone, 'input#vehicleyear' => $vehicleyear, 'input#color' => $color, 'input#make' => $make, 'input#model' => $model, 'input#vin' => $vin, 'input#plate' => $plate, 'input#mileage' => $mileage, 'textarea#pickup' => $pickup, 'textarea#dropoff' => $dropoff, 'input#price' => $price, 'input#invoice' => $invoice, 'input#cash' => $cash, 'input#credit' => $credit, 'input#check' => $check, 'input#po' => $po, 'input#billed' => $billed, 'input#need_to_bill' => $need_to_bill, 'image#image_path' => $getphoto);
echo json_encode($arr); 
```

一些HTML：

```
<td>
<img id="image_path" src="????" />
</td>
</tr>
</table>

<p><strong>
<input type="submit" value="Complete Dispatch">
</strong></p> 
```

`src`当我更改选择框时，如何使用来自 AJAX 调用的数据库值填充？填充所有其他数据并正确返回字符串。我已经通过放置一个输入框并包含`input#image_path => $getphoto`. `img`标签的语法与`input`or不同`textarea`吗？我尝试过包含 PHP 内联并将其分配`src`给`$getphoto`没有运气。我希望使用 AJAX 传递的数据创建一个隐藏的输入字段，然后获取该数据并将其设为 var，但也无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:11:55.267

你的意思是

```
if (id=="image_path") $(id).attr("src", data[id] );
else $(id).val( data[id] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:15:06.680

您可以使用`attr()`以下方式进行更改`src`：

```
$(id).attr("src", data[id]);   // chnage the source of the img tag 
```

在这种情况下，您可以在`for`循环中使用条件语句，如下所示：

```
if(id=="image_path"){
   $(id).attr("src", data[id]);
}else{
   $(id).val(data[id]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:18:37.253

`src`您的JavaScript没有设置`<img>`.

在你的`for`循环之后，你可以像这样从数组中提取数据：

```
$("#image_path").attr("src", data['image#image_path']); 
```

* * *

或者，如果你想使用隐藏的`<input>`方法，那看起来像：

HTML：

```
<td>
<input type="hidden" id="image_path" value="default.png" />
<img id="photo" src="default.png" />
</td> 
```

PHP：

```
$arr = array('input#eta' => $eta,
             ...
             'input#image_path' => $getphoto); 
```

JavaScript：

```
$(document).ready(function(){
    $("#id").change(function(){
        $.ajax({
            url     : 'get_driver_data2.php',
            type    : 'POST',
            dataType: 'json',
            data    : $('#ContactTrucks').serialize(),
            success : function(data) {
                          for(var id in data) {        
                              $(id).val(data[id]);
                          }
                          $("#photo").attr("src", $("#image_path").val());
                      }
        });
    });
}); 
```

# python - Python 和显示 HTML

> ID：13677430
> 
> 赞同：3
> 
> 时间：2012-12-03T05:02:44.627
> 
> 标签：python, html

我对 Python 已经很熟悉了，现在我正在寻找一个基本的 Web 应用程序。我有点害怕 Django 和其他 Python 框架，所以我对它进行了深入研究，并决定使用另一个 Python 脚本自己生成 HTML。

也许这就是你的做法——但我只是在弄清楚这些东西。我真的在寻找关于下一步该做什么的提示。

我的 Python 脚本打印 HTML（这是否正确？我需要它出现在网页上！），但现在呢？

感谢您在我学习过程中一直以来的支持。总有一天我会发布答案！

-泰勒

这是我的代码：

```
from SearchPhone import SearchPhone

phones = ["Iphone 3", "Iphone 4", "Iphone 5","Galaxy s3", "Galaxy s2", "LG Lucid", "LG Esteem", "HTC One S", "Droid 4",
          "Droid RAZR MAXX", "HTC EVO", "Galaxy Nexus", "LG Optimus 2", "LG Ignite",
          "Galaxy Note", "HTC Amaze", "HTC Rezound", "HTC Vivid", "HTC Rhyme", "Motorola Photon",
          "Motorola Milestone", "myTouch slide", "HTC Status", "Droid 3", "HTC Evo 3d", "HTC Wildfire",
          "LG Optimus 3d", "HTC ThunderBolt", "Incredible 2", "Kyocera Echo", "Galaxy S 4g",
          "HTC Inspire", "LG Optimus 2x", "Samsung Gem", "HTC Evo Shift", "Nexus S", "LG Axis", "Droid 2",
          "G2", "Droid x", "Droid Incredible" 
          ]

print """<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>table of phones</title>
</head>

<body>
</body>
</html>
"""

#table
print '<table width="100%" border="1">'
for x in phones:
    y = SearchPhone(x)
    print "\t<tr>"
    print "\t\t<td>" + str(y[0]) + "</td>"
    print "\t\t<td>" + str(y[1]) + "</td>"
    print "\t\t<td>" + str(y[2]) + "</td>"
    print "\t\t<td>" + str(y[3]) + "</td>"
    print "\t\t<td>" + str(y[4]) + "</td>"
    print "\t</tr>"
print "</table>" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T05:06:24.770

不幸的是，你不太对。

对于python web开发，作为初学者，你应该选择一个web开发框架，（Django，Flask，Bottle）如果你害怕Django，我建议你尝试看一下Web.py/bottle，它们非常简单易懂赶上，您将学习基本的 Web 开发技能，了解工作流程，交互等。

或者，你只想写一个静态网页，写一个扩展名为“htm”“html”的文件

```
html_str = "<html><head>This is header</head><body>This is body</body></html>"
f = open("yourpage.html","w")
f.write(html_str)
f.close() 
```

然后你可以打开“yourpage.html”，让你的第一个网页**静态**地用 Python 编写..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:35:52.873

使用 Flask 框架，您可以按照[教程](http://flask.pocoo.org/docs/quickstart)在五分钟内编写您的第一个 web 应用程序。一开始它可能比 Django 更容易。

默认情况下，Flask 使用 Jinja2 模板引擎。您可以编写如下内容：

```
<table>
{% for phone in phones %}
    <tr><td>{{ phone.name }}</td></tr>
{% endfor %}
</table> 
```

其中`phones`是传递给模板的 Python 变量。不太复杂，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-13T10:08:38.327

尽管这个问题已经有几年了......

如果您使用的系统具有不错的外壳（您应该这样做），您可以保持代码不变（即写入标准输出）并将输出重定向到文件：

```
$ python html_generating_program.py > output.html 
```

# python - 在 mod_wsgi 下运行 CherryPy

> ID：13677431
> 
> 赞同：1
> 
> 时间：2012-12-03T05:02:58.213
> 
> 标签：python, ubuntu, apache2, mod-wsgi, cherrypy

我正在尝试让 CherryPy 应用程序在 ubuntu 上的 apache2/mod_wsgi 下运行。我正在按照[此处](http://tools.cherrypy.org/wiki/ModWSGI)概述的教程进行操作，并且我的配置几乎相同。访问站点的根目录时，我收到 500 Internal Server Error。日志中唯一的错误是：

```
[Mon Dec 03 04:43:06 2012] [error] [client 64.189.251.239] Premature end of script headers: index.py 
```

我尝试了本教程的几种变体，但没有收到任何重大错误。有任何想法吗？

我的阿帕奇`VirtualHost`：

```
...
    WSGIScriptAlias / /var/www/example.com/uba/index.py
DocumentRoot /var/www/example.com/uba/
<Directory />
    Options +ExecCGI Indexes FollowSymLinks
    AllowOverride All
</Directory>

<Directory /var/www/example.com/uba/>
    Options +ExecCGI -Indexes -FollowSymLinks -MultiViews
    WSGIApplicationGroup %{GLOBAL}
    AllowOverride All
    Order allow,deny
    allow from all
</Directory>
... 
```

我的 index.py 脚本：

```
#!/usr/bin/python

import sys
sys.stdout = sys.stderr

import atexit
import threading
import cherrypy

cherrypy.config.update({'environment': 'embedded'})

if cherrypy.__version__.startswith('3.0') and cherrypy.engine.state == 0:
    cherrypy.engine.start(blocking=False)
    atexit.register(cherrypy.engine.stop)

class Root(object):
    def index(self):
        return 'Hello World!'
    index.exposed = True

application = cherrypy.Application(Root(), script_name=None, config=None) 
```

**更新＃1：**

运行这个非常基本的 wsgi 应用程序会产生完全相同的错误：

```
#!/usr/bin/python

def application(environ, start_response):
    status = '200 OK'
    output = 'Hello World!'

    response_headers = [('Content-type', 'text/plain'),
                        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:15:38.627

我建议您通过用一个超级简单的 wsgi 应用程序替换您的 cherrypy index.py 脚本来测试您的 apache 配置。

```
def application(environ, start_response):
    status = '200 OK'
    output = 'Hello World!'

    response_headers = [('Content-type', 'text/plain'),
                        ('Content-Length', str(len(output)))]
    start_response(status, response_headers)

    return [output] 
```

在尝试使用cherrypy脚本之前确保它有效。

# r - 在 Rstudio 上浏览 R 代码的有效和递归方式？

> ID：13677435
> 
> 赞同：14
> 
> 时间：2012-12-03T05:03:12.207
> 
> 标签：r, ide, rstudio

我正在使用 RStudio。

我开始觉得有必要通过包代码来更深入地理解或破解某些功能。当我尝试[使用鼠标使用 Ctrl+Click](http://www.rstudio.com/ide/docs/using/navigation)进行导航时，对于包中定义的函数，代码将显示在特殊的 Source Viewer 中。

这种观点的问题

1.  它是只读视图（**为什么？**）。您无法查看其他调用和定义的函数代码。我知道其他 IDE（对于其他语言），我们可以在其中以只读模式递归地浏览代码。
2.  对于泛型函数，我们只有没有代码的 UseMethod 行。

我的解决方案是加载包（代码源）并使用 Find in files 选项浏览代码。

您有更有效的方法来分别浏览代码吗？我愿意接受建议：其他 IDE？Windows/Unix？网络解决方案：您认为可以在云端安装Rstudio服务器版本，无需加载即可通过所有R包吗？

PS：我的问题主要是关于通过代码而不是破解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:56:28.533

我通常发现 github 是挖掘软件包的最佳方式（对于那些张贴在那里的人）。虽然这远不是​​一个完美的解决方案，但它通常还包括测试和指向附加文档的链接，这些文档在标准“？”中并不总是可以找到。如果您需要真正了解一个包，而不是简单地理解一个记录不充分的签名，这种方法通常最有用。Hadley Wickham 的 lubridate 是一个包，这种方法为我带来了回报。此外，我发现通过检查测试和辅助文件可以更好地了解代码的质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T11:12:58.690

将光标放在功能上，然后按“F2”。这相当于Eclipse的'F3'

# android - 删除锁定屏幕上的小部件时未调用 onReceive - Nexus 7

> ID：13677436
> 
> 赞同：4
> 
> 时间：2012-12-03T05:03:13.747
> 
> 标签：android, android-appwidget, android-4.2-jelly-bean, lockscreen

我想在 Jelly Bean（Nexus 7、Android 4.2.1）的锁定屏幕上启用我的小部件

我的问题是`onReceive()`当您从锁定屏幕中删除小部件时永远不会调用它，创建与添加/删除一样多的幽灵小部件。

它在主屏幕上工作正常（你删除一个小部件，`onReceive()`被调用，然后`onDelete()`如果它是最后一个小部件`onDisable()`），但在锁定屏幕上不起作用。

在锁定屏幕`onReceive()`上调用`APPWIDGET_ENABLED`，`APPWIDGET_UPDATE`仅`APPWIDGET_UPDATE_OPTIONS`此而已。

要将小部件放置在锁定屏幕中，您只需添加`android:widgetCategory="home_screen|keyguard"`到您的小部件并在锁定屏幕上进行测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:04:03.113

对我的果冻豆锁屏小部件有同样的体验。onReceive()、onDelete() 和 onDIsable() 永远不会被调用，即使您从锁定屏幕中删除了小部件，它也会继续更新。我的 Galaxy Nexus (4.2.1) 和 Nexus 7 (4.2.1) 的行为相同。重新启动后，幽灵小部件消失。

可能与内置锁屏小部件的行为有关。删除后时钟会重新出现。

希望这在文档中得到澄清一段时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T12:49:41.573

试试这个

“需要导出 AppWidgetProvider，以便协调应用程序小部件（在主机和提供程序之间）的核心操作系统进程可以与其通信。因此，这`android:exported="false"`是不合适的。
老实说，我并不期望与提供程序一起工作，而是不仅仅是一些事件。”

共享软件

[https://stackoverflow.com/a/22719694/4683601](https://stackoverflow.com/a/22719694/4683601)

```
 <receiver 
            android:name=".AppWidgetBarProvider"
            android:exported="true"
            >

            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>
            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/appwidget_bar_info" />
        </receiver> 
```

# jqgrid - jqgrid 客户端排序 desc/asc

> ID：13677438
> 
> 赞同：2
> 
> 时间：2012-12-03T05:03:30.787
> 
> 标签：jqgrid

我已经看到了关于这个问题的许多变化，并且我尝试使用所有知识，但仍然没有运气。

我的日期从旧到新排序，我想将它们从新到旧排序。

在您看到 desc 的地方，我尝试过 asc，但没有任何变化。

当我尝试分页时，似乎触发了重新加载，并且排序正确，从新到旧。

将重新加载设置为 1 秒并清除间隔的最佳解决方案是什么？还是我有其他问题？

我无法对服务器端进行排序，这不是一个选择。

```
 $("#transactionList").jqGrid({
       url: "/cc/transaction/show/"+accountId,
       datatype: "local",
       autowidth: true,
       height: 'auto',
       sortname: 'tran_date',
       sortorder: 'desc',
       sortable:true,
       loadonce:true,
       viewrecords: true,
       gridview: true,
       firstsortorder: 'desc',
       colNames:['Date','Asset Name','Description','Amount','Actions'],
       colModel:[
 {name:'tran_date',index:'tran_date',sorttype:'date',sortable:true,formatter:'date',firstsororder: 'desc',datefmt: 'M d,Y',formatoptions: {srcformat:'Y-m-d H:i:s',newformat:'M d,Y'}},
{name:'assname',index:'assname',sortable:true,resizable:false},
{name:'desccription',index:'desccription',sortable:true,resizable:false},
{name:'net_proc', index:'net_proc',align:'right',formatter:'currency',formatoptions{decimalSeparator:".", thousandsSeparator: ",", decimalPlaces: 2, prefix: "$", defaultValue:'0.00'}, sortable:true,resizable:false},   {name:'ID',index:'ID',formatter:actionsFormatter,width:130,align:"center",key:true,resizable:false}
      ],
      caption: "Completed Transactions",
      rowTotal: -1,
      rowNum: 1000,
      rowList: [10,20,30],
      pager: '#pager',
      onSelectRow: function(row_id) {
      },
      jsonReader: {
          repeatitems: false,
          id: "ID",
          userdata: 'rows'
      },
      viewrecords: true,
      gridComplete: function() {
      //Attach action event handlers
      $('span[name="details"]').click(function() {
      var row_id = this.id;
      var data = $("#transactionList").getGridParam('userData');
      var rowData;

      $.each(data, function(index,el){
        if(el.ID==row_id)
            rowData = el;
        });

      var message = '<div class="sectionItem"><span class="label">Asset Name:&nbsp;&nbsp;</span><span class="value">'+rowData.assname+rowData.assname2+'</span></div>';
      message += '<div class="sectionItem"><span class="label">Amount:&nbsp;&nbsp;</span><span class="value">'+rowData.net_proc+'</span></div>';
      message += '<div class="sectionItem"><span class="label">Transaction Date:&nbsp;&nbsp;</span><span class="value">'+rowData.tran_date+'</span></div>';
      $.popMessage('Transactions Details', message);
      }).addToolTip('Details');
    }
})
    $("#transactionList").setGridParam({datatype: 'json'}).trigger("reloadGrid");
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:39:57.423

从您发布的代码中不清楚问题的确切根源。您`sortname: 'tran_date', sortorder: 'desc'`在发布的代码中使用，但`colModel`没有名称为 的列`'tran_date'`。

一般来说，理解服务器代码`url: "/cc/transaction/show/"+accountId`必须返回**排序**数据很重要。这些选项`sortname: 'tran_date', sortorder: 'desc'`将用于构建将发送到服务器的值`sidx`和参数。`sord`所以服务器必须返回按`sidx`unsing `sord`order 排序的数据。我想您当前的服务器代码不这样做。

**更新**：服务器*应该*返回排序的数据。如果*真的*不可能，您必须在第一次加载后直接使用数据。为此，您可以在`loadComplete`回调内部测试您是否*在第一次*加载数据。在第一次加载时，值`datatype`是原始值`"json"`或`"xml"`取决于从服务器返回的数据的格式。以后`datatype`会改成`"local"`。所以如果`datatype`选项的值不是`"local"`你可以触发`"reloadGrid"`。相应的代码如下所示

```
$("#transactionList").jqGrid({
    url: "/cc/transaction/show/" + accountId,
    datatype: "json",
    rowNum: 1, // initial small value
    loadonce: true,
    loadComplete: function () {
        var $this = $(this);
        if ($this.jqGrid("getGridParam", "datatype") !== "local") {
            setTimeout(function () {
                $this.jqGrid("setGridParam", { rowNum: 20 }); // the real value
                $this.trigger("reloadGrid");
            }, 50);
        }
    },
    ... // other options which you need
}); 
```

# u2netdk - 用于 Visual Studio 和实体数据模型的 U2 数据库插件

> ID：13677440
> 
> 赞同：0
> 
> 时间：2012-12-03T05:03:36.620
> 
> 标签：u2netdk

我想从 UniVerse/UniData 数据库创建实体数据模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:20:02.543

我想自己回答这个问题。

1.  下载并安装 U2NETDK v1.2.0 BETA ![在此处输入图像描述](../Images/608ea7ab0522c8aab64fe2f2f0e10338.png)

2.  使用VS2010确认安装->帮助->关于

![在此处输入图像描述](../Images/f5fa70d32f4e7056b97965dcb2218818.png)

3.  使用控制面板->程序功能确认安装

![在此处输入图像描述](../Images/1b57f6ed968ce065ed9ddcbf4c6285e8.png)

4.  启动 Visual Studio 2010。转到查看->服务器资源管理器->添加连接。转到“更改数据源”对话框。选择“U2 数据库” ![在此处输入图像描述](../Images/90af79609cd05f07e3e6a36c208d33a5.png)

5.  填写连接字符串。测试连接。选择“确定” ![在此处输入图像描述](../Images/f25ac4592498f5f4b9e26d0f9d370e3f.png)

6.  U2 连接将添加到服务器探索中 ![在此处输入图像描述](../Images/5132c6ae813d2159504bfc5a99919b7b.png)

7.  打开 VS2010 WinForm 应用程序。右键单击解决方案资源管理器并添加新项目。 ![在此处输入图像描述](../Images/67041850c5290afd5c43bf77b499a2b2.png)

8.  选择数据->ADO.NET 实体数据模型。给一个名字，例如“Student.edmx”。您将在 EDM Designer 中看到学生数据模型。 ![在此处输入图像描述](../Images/7fff4ba6e7948aea65fe40b18ab0d23f.png)

9.  选择“从数据库生成” ![在此处输入图像描述](../Images/33474833ece38510ecb8b4ed1e35acd8.png)

10.  选择“demoxxxxxx”连接字符串

![在此处输入图像描述](../Images/f3ccf1ca84817f292a18921fb6c325f1.png)

11.  选择所有表格并按“完成” ![在此处输入图像描述](../Images/c846841bb399ff533c536d2f9c5d8084.png)

12.  您将在实体数据设计器中看到学生模型 ![在此处输入图像描述](../Images/fe463f3b5c66ffe9579a460875962898.png)

13.  选择“数据->显示数据源” ![在此处输入图像描述](../Images/affebda9088dbc5055ee6c43772b61d0.png)

14.  在设计器模式下打开 Form1

![在此处输入图像描述](../Images/cfb729ed23cee9bbc27368f6af31bab8.png)

15.  打开工具箱。转到“数据”。将“DataGridView”拖放到表单设计器中。点击“选择数据源” ![在此处输入图像描述](../Images/198925ecfc7a54734ee59534e9b250af.png)

16.  选择“添加项目数据源” ![在此处输入图像描述](../Images/23b9c75bff694d58e9b1ef805332bd9c.png)

17.  选择“对象” ![在此处输入图像描述](../Images/5eeb60e4c73746a62e7911a90f8bf3ec.png)

18.  选择“STUDENT_NF_SUB” ![在此处输入图像描述](../Images/19f050f9d6671641688c85ca59f539ea.png)

19.  您将看到带有学生实体元数据的“DataGridView”。 ![在此处输入图像描述](../Images/eb85c73bd6512c14b26257afb04b3a26.png)

20.  双击表格。它将带你到后面的代码。创建一个 demoEntity 上下文。查询学生表并与数据网格绑定。 ![在此处输入图像描述](../Images/81be8ea72dc8a68450152480d6613951.png)

21.  转到调试-> 不调试就开始 ![在此处输入图像描述](../Images/8f29a59355c9aa6b3849278a409ec71c.png)

22.  查看已完成的申请 ![在此处输入图像描述](../Images/4c7fae9009c2a3a7f4f97c4ae4866863.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:17:15.843

Rajan - 你的演示展示了 1.2.0 版的 UniObjects Toolkit for DotNet，我很想看看这个，但在 Rocket 网站上搜索可下载的最新版本是 UO v1.1.1。有没有办法获得更新的位？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:42:58.407

请注意，U2NETDK v1.2.0 已经发布，不再处于测试阶段。要使用 Visual Studio 加载项，您必须从软件提供商处获得许可证。ADO.NET 提供程序和本机 API（以前称为 UO.NET）是免费提供的。U2askus@rocketsoftware.com 是获取一般产品信息的好电子邮件；如果您与 Rocket Software 签订了支持维护合同，请发送电子邮件至 u2support@rocketsoftware.com。如果您从 ISV 或分销商处获得维护，您将联系他们寻求支持。

# sas - 在 SAS 中转换日期时间格式

> ID：13677441
> 
> 赞同：1
> 
> 时间：2012-12-03T05:03:55.640
> 
> 标签：sas

我怎样才能转换这样的东西：

> 2006 年 1 月 1 日晚上 11:00

进入这个：

> 1JAN06:23:00:00

目前，我已从 txt 导入日期并将日期和时间合并在一起：

```
data date_time;
infile 'X:\date_time.txt' dlm=',' ;
length date $20;
input news $  time $ date  $ words $;
datetime =date || time;
run; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:35:13.317

处理混乱的数据可能很棘手。在这种情况下，您需要将传入的文本字符串分成几部分，然后将这些部分转换为日期时间值。这是一个应该有帮助的例子：

```
data want;
  input @1 date_string $23.;

  length DatePart $15 TimePart $7 DayMonthPart $5 YearPart $4;
  drop DatePart TimePart DayMonthPart YearPart;

  format DT datetime.;

  DatePart = scan(date_string,1);
  TimePart = scan(date_string,2);

  YearPart = substr(DatePart,length(DatePart) - 3);
  if notalpha(DatePart,2) = 2  /* Second character is a digit */
     then DayMonthPart =        substr(DatePart,1,5);
     else DayMonthPart = '0' || substr(DatePart,1,4);

  DT = input(DayMonthPart || YearPart || ' ' || TimePart,datetime.);

  put date_string= / DT= /;

  datalines;
30september2012 11:00PM
1january2012 11:00PM
31january2012 11:00PM
1july2012 11:00AM
30july2012 1:00AM
run; 
```

上面的代码是故意冗长的，所以你可以看到它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:03:21.777

虽然可能有一种更优雅的方式，但这里有一个选择：

```
data test;
  length dt $30;
  dt="1January2006 11:00PM";
  if length(dt)=20 then dt="0"||dt;
  date_num=input(substr(scan(dt,1),1,5)||compress(substr(scan(dt,1),3),,'kd'),date9.);
  time_num=input(scan(dt,2),time.);
  dt_num=dhms(date_num,hour(time_num),minute(time_num),0);
  put dt_num datetime.;
run; 
```

日志输出给出：

```
01JAN06:23:00:00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:04:15.837

我认为您最简单的方法是使用日期和时间信息而不是文本来读取日期和时间。然后，您可以使用 DHMS 函数创建日期时间列并应用您所需的格式。

```
datetime=dhms(date,0,0,time); 
```

# vb.net - vb/access 上的查询表达式中的语法错误（缺少运算符）

> ID：13677443
> 
> 赞同：0
> 
> 时间：2012-12-03T05:04:04.970
> 
> 标签：vb.net, operator-keyword

我一直在寻找答案，但我无法理解它们，因为我是 Visual Basic 的菜鸟（我没有在学校教过如何使用它，我只是在网上搜索学习）。

这是我的问题：`Syntax error (missing operator) in query expression 'pinN='.`

```
Dim con As New OleDbConnection("PROVIDER = Microsoft.ACE.OLEDB.12.0;Data Source =   C:\Users\Billy Otsuka\Desktop\VB Fiiles\Prototype-Prototype\Sample.accdb")
Dim cmd As OleDb.OleDbCommand = New OleDbCommand("SELECT * FROM [Table3] WHERE pinN= " & TextBox1.Text & "", con)
con.Open()
Dim sdr As OleDbDataReader = cmd.ExecuteReader()
If (sdr.Read() = True) Then
    adminLogin.Show()
    Me.Hide()
Else
    MsgBox("Invalid pin")
End If 
```

突出显示的单词是`sdr As OleDbDataReader = cmd.ExecuteReader()`

在这段代码中，我想输入一个 4 号密码，如果正确，我可以转到下一个表格，但如果错误则不会。我正在使用访问数据库。

如果有人能告诉我出了什么问题，我真的很感激，因为我不知道错误是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:37:26.380

用这个：

```
 Dim cmd As OleDb.OleDbCommand = New OleDbCommand("SELECT * FROM
 [Table3] WHERE pinN= '"  & TextBox1.Text & "'", con) 
```

您的选择中没有单引号

**编辑**：试试这个：

```
 New OleDbCommand("SELECT * FROM [Table3] WHERE pinN= " & TextBox1.Text, con) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T15:23:12.653

什么是 textbox1.text 类型？

```
If textbox1.text is **numeric** :
   New OleDbCommand("SELECT * FROM [Table3] WHERE pinN= " & TextBox1 & ""
else
   New OleDbCommand("SELECT * FROM [Table3] WHERE pinN ='" & TextBox1 & "'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T13:53:51.663

我在进行连接时遇到了问题，我使用了一个参数来解决这个问题。

```
Dim cmd As OleDb.OleDbCommand = New OleDbCommand("SELECT * FROM [Table3] WHERE pinN= @myPinN", con)
con.Open()  
cmd.Parameters.Add("@myPinN", OleDbType.VarChar, 100).Value = "myPinNValue" 
```

# java - JTable 未正确填充

> ID：13677448
> 
> 赞同：0
> 
> 时间：2012-12-03T05:04:58.753
> 
> 标签：java, swing, file-io, ubuntu-12.04

因此，在对我的问题进行了多次编辑之后，我仍然无法解决这个问题。我有一个名为 ProcessList.txt 的 .txt 文件，每次在我的 Java 应用程序中执行 ps -e 命令时都会填充该文件。这是我用来将 ps -e 的输出重定向到 ProcessList.txt 的代码。

```
import java.io.*;
import java.util.StringTokenizer;

public class GetProcessList
{

 private String GetProcessListData()
 {
 Process p;
 Runtime runTime;
 String process = null;
 try {
 System.out.println("Processes Reading is started...");

 //Get Runtime environment of System
 runTime = Runtime.getRuntime();

 //Execute command thru Runtime
// p = runTime.exec("tasklist");      // For Windows
 p=runTime.exec("ps -e");              //For Linux

 //Create Inputstream for Read Processes
 InputStream inputStream = p.getInputStream();
 InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
 BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

 //Read the processes from sysrtem and add & as delimeter for tokenize the output
 String line = bufferedReader.readLine();
 process = "&";
 while (line != null) {
 line = bufferedReader.readLine();
 process += line + "&";
 }

 //Close the Streams
 bufferedReader.close();
 inputStreamReader.close();
 inputStream.close();

 System.out.println("Processes are read.");
 } catch (IOException e) {
 System.out.println("Exception arise during the read Processes");
 e.printStackTrace();
}
    return process;
 }

 void showProcessData()
 {
 try {

 //Call the method For Read the process
 String proc = GetProcessListData();

 //Create Streams for write processes
 //Given the filepath which you need.Its store the file at where your java file.
 OutputStreamWriter outputStreamWriter =
 new OutputStreamWriter(new FileOutputStream("ProcessList.txt"));
 BufferedWriter bufferedWriter = new BufferedWriter(outputStreamWriter);

 //Tokenize the output for write the processes
 StringTokenizer st = new StringTokenizer(proc, "&");

 while (st.hasMoreTokens()) {
 bufferedWriter.write(st.nextToken());  //Write the data in file
 bufferedWriter.newLine();               //Allocate new line for next line
 }

 //Close the outputStreams
 bufferedWriter.close();
 outputStreamWriter.close();

 } catch (IOException ioe) {
 ioe.printStackTrace();
 }

 }
} 
```

它在我的工作区中创建了一个名为 ProcessList.txt 的文件。它看起来像这样，有 4 列：

```
1 ?        00:00:00 init
2 ?        00:00:00 kthreadd
3 ?        00:00:00 ksoftirqd/0
5 ?        00:00:00 kworker/u:0
6 ?        00:00:00 migration/0 
```

现在，创建 ProcessList.txt 文件后，我将此 .txt 文件的内容重定向到 JTable，如下所示：

```
import java.io.*;
import java.awt.*;
import java.util.*;import javax.swing.*;
import java.awt.event.*;
import javax.swing.table.*;

public class InsertFileToJtable extends AbstractTableModel{
Vector data;
Vector columns;
private String[] colNames = {"<html><b>PID</b></html>","<html><b>TTY</b></html>","<html><b>time</b></html>","<html><b>Process Name</b></html>",};

public InsertFileToJtable() {
String line;
data = new Vector();
columns = new Vector();
  try {
        FileInputStream fis = new FileInputStream("ProcessList.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(fis));
        StringTokenizer st1 = new StringTokenizer(br.readLine(), " ");
        while (st1.hasMoreTokens())
                columns.addElement(st1.nextToken());
        while ((line = br.readLine()) != null) {
                StringTokenizer st2 = new StringTokenizer(line, " ");
                while (st2.hasMoreTokens())
                       data.addElement(st2.nextToken());
        }
        br.close();
} catch (Exception e) {
        e.printStackTrace();
}  

}

public int getRowCount() {
return data.size() / getColumnCount();
}

public int getColumnCount() {
return columns.size();
}

public Object getValueAt(int rowIndex, int columnIndex) {
return (String) data.elementAt((rowIndex * getColumnCount())
                + columnIndex);
}
@Override
public String getColumnName(int column) {
return colNames[column];
}
@Override
public Class getColumnClass(int col){
return getValueAt(0,col).getClass();
}
} 
```

这是我的输出到目前为止的样子（如果我知道如何上传最终输出的屏幕截图 :( 但这里有一点关于输出 Jtable 到目前为止的样子。

```
=============================
PID  TTY  TIME      PROCESS NAME
=============================
2     ?   00:00:00  kthreadd
3     ?   00:00:00  ksoftirqd/0
5     ?   00:00:00  kworker/u:0
6     ?   00:00:00  migration/0 
```

请注意，ProcessList.txt 的内容被重定向到 JTAble，除了 ProcessList.txt 文件的第一行即

```
 1 ?        00:00:00 init 
```

似乎不在 JTable 输出中。任何帮助将不胜感激。我已经发布了很多关于此的问题，但没有运气:(

编辑：这是我的构造函数和 main()

```
public void InterfaceFrame(){
setTitle("My Frame");
add(tabbedPane);
Pack();
setVisible(true); 
```

}

```
public static void main(String[] args) throws
URISyntaxException,
IOException,
InterruptedException {
    panel.setSize(100,100);
      panel.add(table);
      model.fireTableStructureChanged();

        table.setModel(model);
        InsertFileToJtable model = new InsertFileToJtable();
      table.setPreferredScrollableViewportSize(new Dimension(500, 70));
      table.setFillsViewportHeight(true);

      RowSorter<TableModel> sorter =
              new TableRowSorter<TableModel>(model);
            table.setRowSorter(sorter);

        JScrollPane scrollpane = new JScrollPane(table);
        panel.add(scrollpane, BorderLayout.CENTER);

        JButton button = new JButton("Show View");
        panel.add( button, BorderLayout.SOUTH );

        tabbedPane.addTab("Process",null,scrollpane,"");

//////////////SOME OTHER TABS///////////////////////////
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:01:09.473

> [...] `ProcessList.txt`get 的内容被重定向到`JTAble`除了文件的第一行`ProcessList.txt`[...] 似乎不在`JTable`输出中的事实。

这是因为您正在将第一行读入`columns`向量，而将所有其他行读入`data`向量。我假设您采用它的核心使用带有标题行的输入文件。只需将所有内容读入数据，然后将列数以整数计算即可获得列数。

例如，您可以像这样编辑代码，`-`指示已删除的行并`+`指示添加的行。

```
 public class InsertFileToJtable extends AbstractTableModel{
 Vector data;
-Vector columns;
+int columnCount;
⋮
 data = new Vector();
-columns = new Vector();
+coumnCount = 0;
⋮
-        while (st1.hasMoreTokens())
-                columns.addElement(st1.nextToken());
+        while (st1.hasMoreTokens()) {
+                data.addElement(st1.nextToken());
+                ++coumnCount;
+        }
⋮
 public int getColumnCount() {
-return columns.size();
+return coumnCount;
 } 
```

# while-loop - 使用 while 循环如何计算两个值之间的总和，直到并包括这些值？

> ID：13677451
> 
> 赞同：0
> 
> 时间：2012-12-03T05:05:17.340
> 
> 标签：while-loop, java.util.scanner

```
import java.util.Scanner;
public class Q6 {
    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        System.out.print("Please type two numbers ");
        int a = keyboard.nextInt();
        int b = keyboard.nextInt();
        int sum = 0; 
        if (a <= b) {
            while (a <= b) {
                sum += a;
                a--;
            }
        }
        else if (b <= a) {
            while (b <= a) {
                sum += a;
                a++;
            }
        }
        System.out.print("The sum of the numbers between " + a + " and " + b + " is " + sum);
    }
} 
```

我遇到的主要问题是它给了我每个输入的总和 -1073741823。应该发生的是，当我输入两个值时，首先输入 1 然后 4 它应该将 1 + 2 + 3 + 4 加在一起，如果第一个输入大于第二个输入，例如 4 首先然后 1 它将变为 4 + 3 + 2 + 1。我不明白为什么它不这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:18:09.670

你需要切换`a--`和`a++`。您只需切换案例即可。

你现在拥有它的方式，如果`a`是 1 和`b`4，它将进入第一个 if/while 设置，它将第一个添加`a`到`sum`，然后递减`a`，将其移离 更远`b`，而不是更近。因此，您的循环将继续直到`a`溢出。可能不是你想要的。

`b`如果小于一`a`开始就会发生类似的事情。

此外，正如@rafael-rendon-pablo 的示例所示，还有很多其他方法可以重写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:11:27.873

您想对 [a,b] 范围内的数字求和，包括在内，请尝试以下操作。

```
import java.util.Scanner;
public class Q6 {
  public static void main(String[] args) {
    Scanner keyboard = new Scanner(System.in);
    System.out.print("Please type two numbers ");
    int a = keyboard.nextInt();
    int b = keyboard.nextInt();
    int sum = 0; 

    int s = Math.min(a, b);
    int e = Math.max(a, b);

    while (s <= e) {
      sum += s;
      s++;
    }

    System.out.print("The sum of the numbers between " + a + " and " + b + " is " + sum);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:14:21.837

你不应该首先减少`while loop`你应该增加

而不是`a--;`放`a++;`

而不是`while (b <= a) {`放 `while (b >= a) {`

全部一起

```
import java.util.Scanner;
public class Q6 {
    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        System.out.print("Please type two numbers ");
        int a = keyboard.nextInt();
        int b = keyboard.nextInt();
        int sum = 0; 
        if (a <= b) {
            while (a <= b) {
                sum += a;
                a++;
            }
        }
        else if (b <= a) {
            while (b >= a) {
                sum += b;
                b--;
            }
        }
        System.out.print("The sum of the numbers between " + a + " and " + b + " is " + sum);
    }
} 
```

# php - 自动将 Excel 导入 phpmyadmin

> ID：13677452
> 
> 赞同：4
> 
> 时间：2012-12-03T05:05:33.463
> 
> 标签：php, sql, database, import, phpmyadmin

我想通过网页将 excel 表导入数据库。

例如 - 管理员可以像上传一个简单的文件一样将 excel 表导入数据库。

我搜索了整个堆栈溢出，但找不到任何解决方案。

请提出一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:17:17.673

可能的解决方案是：

1.  将您的 excel 文件转换为 CSV 格式。您可以使用任何服务器端脚本语言（例如 PHP、JSP 等）轻松解析这个逗号分隔的 ASCII 文件，并准备适当的查询以将这些文件插入数据库。

2.  如果您不想将 Excel 文件转换为 CSV，那么您需要使用一些 API，如 Apache POI 和 Java Servlet/JSP 编程结合 JDBC 将您的数据放入数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:49:44.010

将电子表格导出为 CSV 格式并使用 phpMyAdmin 的“导入”选项卡导入此文件。您需要将电子表格中的列与数据库表中的字段相匹配。

# php - 如何检索 PDO 错误消息？

> ID：13677453
> 
> 赞同：0
> 
> 时间：2012-12-03T05:05:43.727
> 
> 标签：php, mysql, error-handling, pdo, prepared-statement

我只是将一个站点转换为 PDO，这是我第一次接触它，但我很难从 PDO 获得任何有用的错误信息。我已经阅读了很多关于这个主题的其他帖子，但似乎没有一个提供适合我的解决方案。

这是代码：

```
try {
    $dbh    = new PDO("mysql:host=".CO_DB_HOST.";dbname=".CO_DB_NAME, CO_DB_UNAME, CO_DB_PWORD);

    $dbh    ->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
}
catch(PDOException $e) {
    echo $e->getMessage();
}

function addRec($data) {

    global $part_id, $dbh;
    $part_id++;

    try {
        $sth=$dbh->prepare("
            INSERT INTO 
                non_existent_table
                (
                    name
                ) VALUES (
                    ?
                );
        ");

        for ($i = 0; $i < count($data); $i++) {
            $sth->execute($data[$i]);
        }
    }

    catch(PDOException $e) {
        echo "Something went wrong. Please report this error.";
        file_put_contents('/PDOErrors.txt', PDOStatement::errorInfo(), FILE_APPEND);
    }
}

// Insert a database record
$data = array(
        array(
            'joe blogs',    /* name */
        )
);
addRec($data); 
```

该表不存在，但我在 PDOError.txt 中没有收到任何错误，在我的 httpd 错误日志中也没有任何错误。有人可以阐明我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:11:14.100

[`errorInfo()`](http://php.net/manual/en/pdostatement.errorinfo.php)不是**静态**方法。此外，它返回一个数组，而不是一个字符串。

您应该对异常中的信息感到满意。改用这样的东西

```
file_put_contents('/PDOErrors.txt', $e->getMessage(), FILE_APPEND); 
```

有关更多信息，您还可以附加[stacktrace](http://php.net/manual/en/exception.gettraceasstring.php)。

**编辑**

您确定`/PDOErrors.txt`错误日志的文件路径正确吗？那在文件系统根目录中，我怀疑这是您想要的，甚至是可能的。

# asp.net-mvc - ASP.NET MVC / IIS 7.5：500 内部服务器错误仅适用于静态内容

> ID：13677458
> 
> 赞同：14
> 
> 时间：2012-12-03T05:06:11.677
> 
> 标签：asp.net-mvc, iis, mime-types

在 IIS 7.5 下运行的 ASP.NET MVC 项目（但早期版本和非 MVC 站点上可能存在问题）已开始返回 500 内部服务器错误，但仅适用于静态处理程序处理的内容 - 图像、页面等。由 MVC 本身通过控制器处理的工作正常。

我知道是什么原因造成的——我正在记录这一点，以防其他人遇到同样的问题。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-03T05:11:25.527

我启用了失败的请求跟踪，在搜索（巨大的）日志后，我发现了这一点：

```
 <EventData>
  <Data Name="ContextId">{00000000-0000-0000-3700-0080010000FC}</Data>
  <Data Name="ModuleName">CustomErrorModule</Data>
  <Data Name="Notification">536870912</Data>
  <Data Name="HttpStatus">500</Data>
  <Data Name="HttpReason">Internal Server Error</Data>
  <Data Name="HttpSubStatus">19</Data>
  <Data Name="ErrorCode">2147942583</Data>
  <Data Name="ConfigExceptionInfo">
    \\?\C:\Websites\xxx\www\web.config ( 58) :Cannot add duplicate collection 
    entry of type &apos;mimeMap&apos; with unique key attribute 
    &apos;fileExtension&apos; set to &apos;.woff&apos;
  </Data>
 </EventData> 
```

发生的事情是，一种新的用于提供网络字体 (.woff) 的 Mime 类型已明确添加到该站点。

后来，新的 Mime 类型 (.woff) 也被添加到全局 IIS mime 类型中。

不是网站设置覆盖全局设置，而是引发了异常。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-01-15T00:52:24.277

始终删除您要添加的任何 mimetype，以防它已在 IIS/服务器级别定义，例如：

```
<staticContent>
  <remove fileExtension=".otf" />
  <mimeMap fileExtension=".otf" mimeType="application/x-font-otf" />
</staticContent> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-23T06:00:05.763

在 godaddy.ocm 共享主机上部署 MVC 3.0 应用程序时，终于解决了这个 500 Internal server error

不知何故，引用的 DLL 版本和 web.config 中提到的版本存在差异。

尝试了各种论坛中提到的所有选项，没有任何帮助，虽然每个人都建议相同的修复方法，但不知何故在我的场景中不起作用。终于在敲了我的头两天之后。我决定从项目中删除所有 dll 引用并删除 web.cofig（制作本地副本）并让应用程序抛出错误，然后将 dll 一个一个添加到 local=true。添加所有dll之后。我创建了一个新的 asp.net mvc 应用程序并将新应用程序的 web.config 复制到我的实际应用程序中。所以我的实际应用程序现在有一个新的 web.config，然后我从我保存的 web.config 的本地副本中复制了连接字符串和其他引用。

刚刚编译了应用程序并发布到本地文件夹并将发布的文件夹通过 FTP 传输到 goDaddy

它奏效了，终于解决了我的问题

希望这会对人们有所帮助，他们不会像我一样浪费两天时间，

# ruby-on-rails - Rails 无法在显示视图中查看关联的模型详细信息

> ID：13677460
> 
> 赞同：0
> 
> 时间：2012-12-03T05:06:22.037
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我对此有一个展示视图：

```
<%= @application.application_name %>
<%= @application.application_field %> 
```

它产生了这个：

```
Application name: New Employment App [#<ApplicationField id: 1, application_id: 1, applicant_id: nil, field_name: "Previous Job", field_type: "String", created_at: "2012-12-03 04:26:06", updated_at: "2012-12-03 04:26:06">, #<ApplicationField id: 2, application_id: 1, applicant_id: nil, field_name: "Previous Address", field_type: "String", created_at: "2012-12-03 04:26:06", updated_at: "2012-12-03 04:26:06">] 
```

但如果我这样做：

```
<%= @application.application_name %>
<%= @application.application_field.field_name %> 
```

我得到错误：

```
undefined method `field_name' for #<ActiveRecord::Relation:0x007ff4ec822268> 
```

为什么我会收到此错误？

型号如下

```
class Application < ActiveRecord::Base
    belongs_to :company
    #has_many :applicants, :through => :application_field
    has_many :application_field
    accepts_nested_attributes_for :application_field, :allow_destroy => true
    attr_accessible :application_name, :application_field_attributes
end

class ApplicationField < ActiveRecord::Base
    belongs_to :application
    has_many :application_fields_value
    #belongs_to :applicant
    attr_accessible :field_name, :field_type, :field_value, :application_field_values_attributes
    accepts_nested_attributes_for :application_fields_value, :allow_destroy => true
end 
```

控制器的显示动作：

```
# GET /applications/1
  # GET /applications/1.json
  def show
    @application = Application.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @application }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:20:52.080

这里的Application有很多ApplicationField。例如，一个应用程序有 3 个 application_field。如果您放置 application.application_field 它将收集所有 3 application_field 记录并保存在一个数组中。因此，如果您输入@application.application_field.field_name，它将为数组抛出未定义的方法“field_name”。

```
 try with <%= @application.application_field[0].field_name %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:22:14.277

```
@application.application_field.first.field_name 
```

...应该让你得到实际的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T06:01:30.457

您可以按如下方式编写模型：
`class Application < ActiveRecord::Base`
   `belongs_to :company`

  `has_many :application_fields`
  `accepts_nested_attributes_for :application_fields, :allow_destroy => true`
  `attr_accessible :application_name, :application_fields_attributes`
end`

现在**Application**对象显然会有**application_fields**的集合。

现在您可以在显示页面中显示如下：

`<%= @application.application_name %>`
`<%= @application.application_fields.map{|af| .field_name}.join(',') %>`

# html - 在 HTML5 中将 div 与锚标记链接

> ID：13677464
> 
> 赞同：0
> 
> 时间：2012-12-03T05:06:38.190
> 
> 标签：html, css

我编写了一个这样的代码块： HTML：

```
<a href="#">
    <div class="aw">
        <div class="b1">Text</div>
        <div class="b2">Long Text</div>
        <div class="b3">Text</div>
    </div>
</a> 
```

CSS：

```
.aw{
  color:#AAA;
  background-color:#EFEFEF;
  width:332px;
  height:58px;
  margin:0 auto;
  border:1px solid #EFEFEF;
}
  .b1{
    display:inline-block;
    height:58px;
    width:58px;
    float:left;
  }
  .b2{
    display:inline-block;
    height:58px;
    width:198px;
    float:left;
    overflow:hidden;
  }
  .b3{
    display:inline-block;
    height:58px;
    width:58px;
    float:right;
  } 
```

我正在使用*overflow:hidden*和*text-overflow:ellipsis*作为**class=b2**。

发生的事情是一个 div ( **class=b2** ) 中的文本显示在一行中，而没有包装文本。

任何快速帮助/提示？

# php - 使用 php 将列表发布到数据库

> ID：13677466
> 
> 赞同：0
> 
> 时间：2012-12-03T05:06:56.247
> 
> 标签：php, database, list, post

我有清单：

```
<ul>
    <li>one</li>
    <li>two</li>
</ul> 
```

通常 php 使用表单将数据输入到服务器，但我想将列表发布/发送到数据库。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:14:41.140

使用 Jquery 获取列表中的值并存储在 js 变量中。通过包含该 js 变量（列表值）作为参数发送 ajax 请求并插入到数据库中或将此值保存在隐藏字段中并提交该表单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:45:28.417

好吧，我会将列表项转换为变量。从那里我会做这样的事情。这是如果您使用的是mysql。希望这可以帮助。

```
$one = "one";
$two = "two";

$SQLstring = "INSERT INTO tableName " .
    "(columnOne,columnTwo)" .
    "VALUES('$one', '$two')";

$QueryResult = @mysql_query($SQLstring, $DataBaseConnection); 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:58:22.163

你可以在列表上有一个隐藏的输入，然后在 jquery 上你可以在点击按钮时有这样的东西。

```
<li><input type="hidden" value="test" id="test">TEST</li>

<div id="content">
  <div id="sub_cont"><!--leave blank this is for the contents of postpage.php after button submit--></div>
</div>

<script>
$(document).ready(function(){
      $('#button').click(function() {
       $('#sub_cont').fadeIn('fast');
       $("#content #sub_cont").load("postpage.php?id="+ $("#test").val());
     });
 });
</script> 
```

在 postpage.php 上

```
$test = $_REQUEST['id'];
<div id="content">
   <!--contents/result/etc/display test-->
</div> 
```

抱歉懒惰的编码。您可以尝试其他事件。

# c - recv()/send() 第一次通过后出现故障

> ID：13677468
> 
> 赞同：0
> 
> 时间：2012-12-03T05:07:03.377
> 
> 标签：c, send, recv

我制作了一个基本的 tic-tac-toe 客户端-服务器游戏，我正在努力让它正常工作。一次通过它工作得非常好，但是一旦我循环回来尝试再次播放，`recv()`就会出现故障（我的客户端正在发送它之前应该发送一个`send()`命令的东西）。我已经看了我的代码一个小时左右，但我不知道为什么。

您可能会告诉我，我对套接字和 TCP 编程很陌生，所以我不知道如何解决这个问题。

有关如何解决此问题的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:12:31.583

您还没有发布代码，但是从您所说的来看.. recv() 并不能确保它会读取其他程序的 send() 发送的所有数据。它只返回读取的字节数。所以你需要保持计数并确保你已经阅读了所有内容。简而言之，您将不得不使用一些预定义的协议来处理双方读取和写入的字节数。如果你还没有，我建议你买一本关于这方面的好书，它真的很有帮助。

# java - Java 线程正在休眠但之后的代码不起作用？

> ID：13677472
> 
> 赞同：0
> 
> 时间：2012-12-03T05:07:29.867
> 
> 标签：java, multithreading, sleep

我有一个线程正在尝试在 Java 中运行，用于我正在制作的游戏。线程基本上休眠了一会儿，更新对象，然后调用 repaint()。看起来它应该很好用，它看起来像我在互联网上找到的代码，但它不起作用。

代码在这里：

```
@Override
public void run() {
    int sleep = 500;
    Dimension dim = getSize();
    while(true){
        try {
            Thread.sleep(sleep);
            System.out.println("Sleeping!");
        } catch (InterruptedException e) {
            System.out.println("interrupted");
        }
        for(int i = 0 ; i < poop.size() ; i++){
            poop.get(i).update(dim.width, dim.height);
            System.out.println("Y is: "+poop.get(i).getYCoord()+" Step is: "+poop.get(i).getYStep());
        }
        repaint();
        }
} 
```

当我将 try catch 块放入 for 循环时出现问题，调用正常，System.out 也打印 Y 坐标，但更新不再起作用。任何想法都会很棒。如果您需要更多代码，请告诉我，我也会将更新代码放在这里。也像对待线程的初学者一样对待我，因为我或多或少是我使用的摇摆库或多或少的初学者。

这是更新（）代码：

```
@Override public void update(int screenWidth, int screenHeight)
{
    xCoord += xStep;
    if (xCoord > screenWidth) {
        xCoord = 0;
    } else if (xCoord < 0) {
        xCoord = screenWidth;
    }

    yCoord += yStep;
    if (yCoord > screenHeight) {
        yCoord = 0;
    } else if (yCoord < 0) {
        yCoord = screenHeight;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:06:57.573

这里的问题是`Dimension dim = getSize();`由于某种原因将两者都设置为0。因此更新方法无法完成它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:10:12.177

即使此代码在`run()`方法中并且可能在 Runnable 对象中，您的描述也是调用`Thread.sleep(...)`Swing 事件线程的症状。如果你这样做，你会让整个 GUI 进入睡眠状态，因为你正在睡眠的事件线程负责绘制 GUI 并与用户交互。

解决方案：不要那样做。执行任何长时间运行的任务或在后台线程中休眠，例如在 SwingWorker 中。

或者，摆脱您`Thread.sleep(...)`的 's 并使用 Swing Timer 代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:31:13.537

`repaint()`在 for 循环完全完成之前，您不会调用。因此，将睡眠粘在里面不会导致它每 500 毫秒一次重新绘制一件东西。这将导致它只需要`size() * 500`通过循环，然后一次重绘所有内容。

# java - EJB 不支持 @Singleton 注释

> ID：13677473
> 
> 赞同：0
> 
> 时间：2012-12-03T05:07:46.393
> 
> 标签：java, jsf, tomcat, annotations, ejb

我正在创建一个将 EJB 作为托管 bean 的 JSF Web 项目。我在 Apache Tomcat 服务器上运行该项目。但我必须使其中一个 EJB 类成为单例。我正在尝试使用注释`@Singleton`，我的 Eclipse 不支持它。但我可以使用`@EJB`注释。有解决方案吗？

# java - 服务器端的 dhtmlx 日期格式不起作用

> ID：13677474
> 
> 赞同：0
> 
> 时间：2012-12-03T05:07:53.547
> 
> 标签：java, dhtmlx

在客户端：

```
{type: "calendar", name: "podatet", label: "PO Date To", value: "", dateFormat: "%d-%m-%Y", calendarPosition: "right","skin":"omega",inputWidth:200}, 
```

在服务器端：

```
"Wed Dec 05 2012 10:31:00 GMT 0530 (India Standard Time)" 
```

但是我想要dd/mm/yyyy，为什么我格式化后还是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:49:29.783

Form api 允许以对象的形式访问数据和以字符串的形式访问日期。如果您正在使用

```
myForm.getFormData() 
```

你会得到日期对象，它在服务器端看起来像上面的字符串。但是如果你会使用

```
myForm.getFormData(true) 
```

form 将返回根据 dateFormat 掩码格式化的字符串

# java - 在 Java 数组中设置布尔值

> ID：13677476
> 
> 赞同：1
> 
> 时间：2012-12-03T05:08:01.240
> 
> 标签：java, android, arrays

这是我非常非常精简的版本，仅包括布尔值及其周围的结构：

```
public int payoffDebt(Double totalDebt) {

    boolean booIsPaid[] = new boolean[c.getCount()];
    int bb = 0; 
    int bbb = 0;

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        booIsPaid[bb++] = false;
    }

    while (totalDebt > 0) {

        for (int i : rowCounter) { 

            if ((indBal[p] <= 0) && (booIsPaid[bbb] == false)) {
                booIsPaid[bbb++] = true;
            } 

        }

    }
    return monthTotal;
} 
```

这就是我正在尝试做的事情，在早期我循环用户“债务”并为每个名为 booIsPaid 的人分配一个布尔值。它们设置为 false，这很好用。但是，在下面，我认为我没有正确地遍历它们，因为在我的 Android 应用程序中，我在调用它的 Activity 中得到了 Window Leaking LogCat's。我注释掉我设置的位置`true`并且一切运行良好。有人能看出哪里不对吗？

**编辑：堆栈跟踪：**

```
12-02 21:14:35.121: E/AndroidRuntime(8832): FATAL EXCEPTION: AsyncTask #1
12-02 21:14:35.121: E/AndroidRuntime(8832): java.lang.RuntimeException: An error occured while executing doInBackground()
12-02 21:14:35.121: E/AndroidRuntime(8832):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at java.lang.Thread.run(Thread.java:856)
12-02 21:14:35.121: E/AndroidRuntime(8832): Caused by: java.lang.ArrayIndexOutOfBoundsException: length=4; index=4
12-02 21:14:35.121: E/AndroidRuntime(8832):     at com.---.---.DebtDataSource.payoffDebt(DebtDataSource.java:290)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at com.---.---.Planner$PlannerTask.doInBackground(Planner.java:73)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at com.---.---.Planner$PlannerTask.doInBackground(Planner.java:1)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-02 21:14:35.121: E/AndroidRuntime(8832):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
12-02 21:14:35.121: E/AndroidRuntime(8832):     ... 5 more
12-02 21:14:35.128: W/ActivityManager(291):   Force finishing activity com.---.---/.Planner
12-02 21:14:35.175: W/ActivityManager(291):   Force finishing activity com.---.---/.ManageDebts
12-02 21:14:35.285: W/ActivityManager(291): Duplicate finish request for ActivityRecord{41e0b390 com.---.---/.Planner}
12-02 21:14:35.496: I/ActivityManager(291): Displayed com.---.---/.Planner: +557ms
12-02 21:14:35.605: E/WindowManager(8832): Activity com.---.---.Planner has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4175e930 that was originally added here
12-02 21:14:35.605: E/WindowManager(8832): android.view.WindowLeaked: Activity com.---.---.Planner has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4175e930 that was originally added here
12-02 21:14:35.605: E/WindowManager(8832):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:374)
12-02 21:14:35.605: E/WindowManager(8832):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:292)
12-02 21:14:35.605: E/WindowManager(8832):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:224)
12-02 21:14:35.605: E/WindowManager(8832):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:149)
12-02 21:14:35.605: E/WindowManager(8832):  at android.view.Window$LocalWindowManager.addView(Window.java:547)
12-02 21:14:35.605: E/WindowManager(8832):  at android.app.Dialog.show(Dialog.java:277)
12-02 21:14:35.605: E/WindowManager(8832):  at com.---.---.Planner$PlannerTask.onPreExecute(Planner.java:56)
12-02 21:14:35.605: E/WindowManager(8832):  at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
12-02 21:14:35.605: E/WindowManager(8832):  at android.os.AsyncTask.execute(AsyncTask.java:534)
12-02 21:14:35.605: E/WindowManager(8832):  at com.---.---.Planner.onCreate(Planner.java:36)
12-02 21:14:35.605: E/WindowManager(8832):  at android.app.Activity.performCreate(Activity.java:5008)
12-02 21:14:35.605: E/WindowManager(8832):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-02 21:14:35.605: E/WindowManager(8832):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-02 21:14:35.605: E/WindowManager(8832):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-02 21:14:35.605: E/WindowManager(8832):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-02 21:14:35.605: E/WindowManager(8832):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-02 21:14:35.605: E/WindowManager(8832):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-02 21:14:35.605: E/WindowManager(8832):  at android.os.Looper.loop(Looper.java:137)
12-02 21:14:35.605: E/WindowManager(8832):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-02 21:14:35.605: E/WindowManager(8832):  at java.lang.reflect.Method.invokeNative(Native Method)
12-02 21:14:35.605: E/WindowManager(8832):  at java.lang.reflect.Method.invoke(Method.java:511)
12-02 21:14:35.605: E/WindowManager(8832):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-02 21:14:35.605: E/WindowManager(8832):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-02 21:14:35.605: E/WindowManager(8832):  at dalvik.system.NativeStart.main(Native Method) 
```

**编辑：我已经修改了所有内容，这是我的新方法：**

```
while (totalDebt > 0) {

booIsPaid = false;
remainingBalance = 0;

// Increment month
monthTotal = monthTotal + 1;

// update INDIVIDUAL debt Here
for (int i : rowCounter) { 

nameList.add(indName[r++]);

// Zero Balance, set Boolean true, add to Remainder     
if ((indBal[p] <= 0) && !booIsPaid) { 
        booIsPaid = true;
        remainingbalance = remainingbalance + indPay[q];
        indPay[q] = 0;
        indBal[p] = 0;
        payList.add(Double.valueOf(IndPay));
    // First balance after zero; set Boolean false, add to remainder to payment.
    } else if  ((indBal[p] > 0) && booIsPaid) { 
       booIsPaid = false;       
       indPay[q] = indPay[q] + remainingbalance;
        indPay[q] = Math.round(indPay[q] * 100.00) / 100.00;
        IndPay = myFormat.format(indPay[q]);
        payList.add(Double.valueOf(IndPay));

 // Other remaining balances
    } else if  ((indBal[p] > 0) && !booIsPaid) {        indPay[q] = 0;
        indPay[q] = Math.round(indPay[q] * 100.00) / 100.00;
        IndPay = myFormat.format(indPay[q]);
        payList.add(Double.valueOf(IndPay));
    }

// indPay[q] (should or should not include remainder here!
    indBal[p] = indBal[p] - (indPay[q] - interestFee);
    totalDebt = totalDebt - (indPay[q++] - interestFee);

    IndBal = myFormat.format(indBal[p++]);
    indBalList.add(Double.valueOf(IndBal));
    feeList.add(Double.valueOf(InterestFee));
}
} 
```

注意：输出存储在此处的四个 ArrayList 中，将按月打印给用户。

整个实际应用也提出了一个还债策略。我还没有对此进行测试，并将报告回来。任何反馈？让我知道！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:19:16.787

这是你的问题：

```
Caused by: java.lang.ArrayIndexOutOfBoundsException: length=4; index=4
at com.---.---.DebtDataSource.payoffDebt(DebtDataSource.java:290) 
```

您正在尝试访问超出数组范围的索引。查看[ArrayIndexOutOfBoundsException](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ArrayIndexOutOfBoundsException.html)文档。

你可以发布这个特定的行代码：

```
DebtDataSource.payoffDebt(DebtDataSource.java:290) 
```

您需要检查变量`bbb`是否在数组的范围内。我认为这是问题所在，请尝试将您的代码更改为：

```
if ((indBal[p] <= 0) && (booIsPaid[bbb] == false) && (bbb <= booIsPaid.length)){
      booIsPaid[bbb++] = true;
} 
```

我还建议您`bbb`在循环代码的某个点将 的值重新设置为零。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T05:20:28.363

下面的一些问题/意见：

1.  不需要第一个循环，因为`boolean []`已经用值初始化为`false`

2.  无需与`boolean`比较`false`，因为您可以简单地写`if ((indBal[p] <= 0) && !booIsPaid[bbb]) {`

3.  在您的 while 循环中没有检查数组长度（**导致您的问题）。**添加如下：

    ```
    while (totalDebt > 0 && bbb <booIsPaid.length) {
      for (int i : rowCounter) { 
        if (indBal[p] <= 0 && !booIsPaid[bbb]  &&  bbb <booIsPaid.length) {
            booIsPaid[bbb++] = true;
        } 
      }
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T05:20:30.397

首先，您不必将布尔数组中的每个值都设置为`false`. 默认情况下它们是这样设置的。

其次，您的循环确实看起来有点可疑。以下将解决您得到的 AIOOBException 。

```
while (totalDebt > 0) {
    for (int i : rowCounter) { 
        if (indBal[p] <= 0 && !booIsPaid[bbb]) {
            booIsPaid[bbb++] = true;
        } 
    }
    bbb = 0;
}
return monthTotal; 
```

原因： `bbb`在`while`and中迭代时无限制地增长`for`。

# php - 如何在 PyroCMS 的插件调用中调用插件

> ID：13677481
> 
> 赞同：0
> 
> 时间：2012-12-03T05:08:12.480
> 
> 标签：php, codeigniter, pyrocms

我有一个名为“查询”的插件，它通过以下格式调用：`{{ query:run query="SELECT * FROM table" }}` 我想根据前一个调用的输出对同一个插件进行重复调用。代码如下：

```
{{ if { query:run query="SELECT left_bar form default_blog_meta where blog_id == {{query:run query='SELECT id from default_blog where slug = {variables:seg4}' }} "} }}
  {{ code }}
{{ else }}
  {{ code }} 
```

它总是进入 else 条件，因为内部调用没有被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:48:11.357

不！

Lex 不是 PHP 的替代品。如果您想这样做，请将您的查询放入您自己的插件中，这样您就可以使用一种编程语言，而不是试图让一个标签表示系统为您做这件事。

请。停下来。

# yii - yii 多对多 CDbCriteria 与桥表中的类型列

> ID：13677483
> 
> 赞同：0
> 
> 时间：2012-12-03T05:09:07.013
> 
> 标签：yii

```
Table AgentType:
agent_type_id
agent_type_name

Table Agent:
agent_id
agent_name

Table Talent:
talent_id
talent_name

Table TalentAgent:
talent_id
agent_id
agent_type_id

Table AgentType
agent_id
agent_type_id 
```

人才模型关系：

```
public function relations() {
    return array(
       'talent_agent' => array(self::HAS_MANY, 'TalentAgent', 'talent_id'),
       'agent' => array(self::HAS_MANY, 'Agent', 'agent_id', 'through' => 'talent_agent'),
       'agents' => array(self::MANY_MANY, 'Agent', 'nca_talent_agent(talent_id,agent_id)'),
    );
} 
```

代理模型关系：

```
public function relations()
{
    return array(
        'talent_agent' => array(self::HAS_MANY, 'TalentAgent', 'agent_id'),
        'talent' => array(self::HAS_MANY, 'Talent', 'talent_id', 'through' => 'talent_agent'),
        'agent_type' => array(self::MANY_MANY, 'AgentType', 'nca_agent_agent_type(agent_id,agent_type_id)'),
    );
} 
```

AgentType 关系：

```
public function relations()
{
    return array(
        'talent' => array(self::MANY_MANY, 'Talent', 'nca_talent_agent(talent_id,agent_id,agent_type_id)'),
        'agent' => array(self::MANY_MANY, 'Agent', 'nca_agent_agent_type(agent_id,agent_type_id)'),
    );
} 
```

人才代理关系：

```
public function relations()
{
    return array(
        'talent' => array(self::BELONGS_TO, 'Talent', 'talent_id'),
        'agent' => array(self::BELONGS_TO, 'Agent', 'agent_id'),
        'agent_type' => array(self::BELONGS_TO, 'AgentType', 'agent_type_id'),
    );
} 
```

在我的网格视图中，我为每个人才列出了 3 种不同的代理类型：

```
array(
    'name'=>'agent_primary',
    'value'=>'$data->getPrimaryAgent($data->talent_id, false)',
    'filter'=>CHtml::activeDropDownList($model, 'agent_primary', CHtml::listData(Agent::model()->with('agent_type')->findAll(array('condition'=>'agent_type.agent_type_id = 1')),'agent_id', 'name')),
),
array(
    'name'=>'agent_voice',
    'value'=>'$data->getVoiceAgent($data->talent_id, false)',
    'filter'=>CHtml::activeDropDownList($model, 'agent_voice', CHtml::listData(Agent::model()->with('agent_type')->findAll(array('condition'=>'agent_type.agent_type_id = 2')),'agent_id', 'name')),
),
array(
    'name'=>'agent_commercial',
    'value'=>'$data->getCommercialAgent($data->talent_id, false)',
    'filter'=>CHtml::activeDropDownList($model, 'agent_commercial', CHtml::listData(Agent::model()->with('agent_type')->findAll(array('condition'=>'agent_type.agent_type_id = 3')),'agent_id', 'name')),
), 
```

在我的网格视图搜索过滤器中，我试图能够独立地按每种不同的代理类型进行过滤，但我不确定在哪里添加代理类型过滤器，这是我目前所拥有的：

```
$criteria=new CDbCriteria;
$criteria->with = array('agent');
$criteria->together = true;
$criteria->compare('agent.agent_id',$this->agent_primary); 
```

如何按 agent_type_id 过滤？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:41:08.627

为了帮助遇到这个问题的其他人，我最终做了以下事情：

标准：

```
$criteria=new CDbCriteria;
$criteria->with = array('agent','agent.agent_type');
$criteria->together = true; 
```

然后您可以应用您的比较标准（是的，我现在对 type_id 进行了硬编码）：

```
$criteria->compare("agent_type.agent_type_id",array(3));
$criteria->compare('agent.agent_id', $this->primary_agent_id); 
```

# spring - 使用 xml 请求的 Spring 3.1 Restful 服务中的 UnmarshalException

> ID：13677494
> 
> 赞同：2
> 
> 时间：2012-12-03T05:09:49.363
> 
> 标签：spring, jaxb2, spring-oxm

我使用 spring web 3.1.1 和 spring oxm 3.1.1。

当 jaxb2marshaller 尝试将 xml 源解组为对象时发生异常。

```
2012-12-03 13:38:41,152[k.c.s.s.c.r.AuthenticationController:154][ERROR] JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException: Namespace URIs and local names to the unmarshaller needs to be interned
org.springframework.oxm.UnmarshallingFailureException: JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException: Namespace URIs and local names to the unmarshaller needs to be interned
at org.springframework.oxm.jaxb.Jaxb2Marshaller.convertJaxbException(Jaxb2Marshaller.java:761) ~[org.springframework.oxm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.oxm.jaxb.Jaxb2Marshaller.unmarshal(Jaxb2Marshaller.java:682) ~[org.springframework.oxm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
at org.springframework.oxm.jaxb.Jaxb2Marshaller.unmarshal(Jaxb2Marshaller.java:665) ~[org.springframework.oxm-3.1.1.RELEASE.jar:3.1.1.RELEASE] 
```

我像这样在我的 sevlet 设置上配置了 jaxb2 marshall。

```
<oxm:jaxb2-marshaller id="marshaller">
    <oxm:class-to-be-bound name="kr.co.skcomms.simon.bean.rest.Authentication" />
</oxm:jaxb2-marshaller> 
```

并在控制器上尝试像这样解组。

```
@Autowired
public Jaxb2Marshaller marshaller;
....
Source source = new StreamSource(new StringReader(body));
Authentication authentication = (Authentication) marshaller.unmarshal(source); 
```

和我的身份验证对象。

 `````
@XmlRootElement
public class Authentication {
private String simon_auth;

private String client_ip;

private String request_url;

public Authentication(){
}

@XmlElement
public String getSimon_auth() {
    return simon_auth;
}

public void setSimon_auth(String simon_auth) {
    this.simon_auth = simon_auth;
}

@XmlElement
public String getClient_ip() {
    return client_ip;
}

public void setClient_ip(String client_ip) {
    this.client_ip = client_ip;
}

@XmlElement
public String getRequest_url() {
    return request_url;
}

public void setRequest_url(String request_url) {
    this.request_url = request_url;
} 
```` 

`}`

我参考了这篇文章.. [http://www.ibm.com/developerworks/webservices/library/wa-spring3webserv/index.html](http://www.ibm.com/developerworks/webservices/library/wa-spring3webserv/index.html)

我认为我的来源与文章的示例代码完全相同。

但效果不好。

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:00:26.593

自己解决了问题..（笑）

下载 springframework-oxm-3.1.1.source.. 的源代码并记录 org.springframework.oxm.jaxb.Jaxb2Marshaller 类的 orign 异常堆栈跟踪。

```
2012-12-03 21:28:14,864[o.s.o.j.Jaxb2Marshaller:698][DEBUG] [JAXBException] : javax.xml.bind.UnmarshalException: Namespace URIs and local names to the unmarshaller needs to be interned.
javax.xml.bind.UnmarshalException: Namespace URIs and local names to the unmarshaller needs to be interned.
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:631) ~[na:1.6.0_16]
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:236) ~[na:1.6.0_16]
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:231) ~[na:1.6.0_16]
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:103) ~[na:1.6.0_16]
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1038) ~[na:1.6.0_16]
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:467) ~[na:1.6.0_16]
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:448) ~[na:1.6.0_16]
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:137) ~[na:1.6.0_16]
    at com.caucho.xml.XmlParser.addElement(XmlParser.java:2615) ~[resin.jar:3.1.0]
    at com.caucho.xml.XmlParser.parseElement(XmlParser.java:663) ~[resin.jar:3.1.0]
    at com.caucho.xml.XmlParser.parseNode(XmlParser.java:381) ~[resin.jar:3.1.0]
    at com.caucho.xml.XmlParser.parseInt(XmlParser.java:256) ~[resin.jar:3.1.0]
    at com.caucho.xml.AbstractParser.parse(AbstractParser.java:644) ~[resin.jar:3.1.0]
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:200) ~[na:1.6.0_16]
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:173) ~[na:1.6.0_16]
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:137) ~[na:1.6.0_16]
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:105) ~[na:1.6.0_16]
    at org.springframework.oxm.jaxb.Jaxb2Marshaller.unmarshal(Jaxb2Marshaller.java:694) [classes:na]
    at org.springframework.oxm.jaxb.Jaxb2Marshaller.unmarshal(Jaxb2Marshaller.java:672) [classes:na] 
```

如你所见。java UnmarshallerImpl Object 选择 Resin 的 XmlPaser ...这就是问题所在.. Resin 设置了对 xml 处理很重要的 System Property

```
javax.xml.parsers.DocumentBuilderFactory
javax.xml.parsers.SAXParserFactory 
```

这些工厂 Bean 适用于 springframework-oxm 解析器。然后......它无法工作。

所以我改变了resin.conf文件（可能是[resin_dir]/conf/resin.conf）

```
<!-- Uncomment to use Resin's XML implementations
 -
 - <system-property javax.xml.parsers.DocumentBuilderFactory
 -                 ="com.caucho.xml.parsers.XmlDocumentBuilderFactory"/>
 - <system-property javax.xml.parsers.SAXParserFactory
 -                 ="com.caucho.xml.parsers.XmlSAXParserFactory"/>
--> 
```

结论 **Resin 的 XmlPaser 和其他 Factory 不具备 springframework-oxm 库的灵活性。**

我希望你不要浪费你的时间！`

# twitter-bootstrap - 主动类切换不起作用

> ID：13677495
> 
> 赞同：0
> 
> 时间：2012-12-03T05:09:52.350
> 
> 标签：twitter-bootstrap

我一生都无法弄清楚如何更改菜单上的活动课程。我决定将这些标签用于我的主要导航。任何帮助都会很棒。

```
 <nav>
            <ul class="nav nav-tabs">
                <li class="dropdown active">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="/home.php/">home<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <a href="/">Main Page</a>
                        <a href="/home.php/#wishlist">Wish List</a>
                        <a href="#services">Services</a>
                        <a href="#latestevents">Latest Events</a>
                        <a href="#latestnews">Latest News</a>
                    </ul>
                </li>
                <li><a href="/home.php/our-mission">our mission</a></li>
                <li><a href="/home.php/news-and-events">news and events</a></li>
                <li><a href="/home.php/links-and-info">links and info</a></li>
                <li><a href="/home.php/contact-us">contact us</a></li>
            </ul>
        </nav> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:57:26.317

我不明白你的问题..？

在您的标记中，只需将“活动”类添加到活动菜单项......

如果您正在使用模板（用于不同页面的相同 html 标记文件），请检查哪个菜单元素应该具有带有“if”语句的“活动”类。

# c++ - 新建和删除的经验法则

> ID：13677496
> 
> 赞同：0
> 
> 时间：2012-12-03T05:09:57.797
> 
> 标签：c++

我想知道经验法则`new`和`delete`是什么。我一直认为，每次打电话`new`，我都应该有一个`delete`。

在下面的情况下，如果我包含`destructor`但是，我会得到一个严重的过度错误。如果我不包含`destructor`，我的代码可以正常工作。

```
struct Foo
 {
     Foo(int A, int B)
     {
          bar = new std::vector< std::vector < int > >(A, std::vector<int>(B,2);
          //creates a vector of A vectors where each nested vector contains the number 2 B times. 
     }

     ~Foo() //Get bad access error if destructor included in code. 
     {
          delete[] bar;
     }     

     std::vector< std::vector < int > > *bar;
 };

int main()
{
    Foo X;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T05:11:10.273

应该`delete bar;`不是`delete [] bar;`

将另一条规则添加到您的规则列表中。

> 仅当新行具有 [某个数字] 时，删除行才应具有 []

在您的情况下，该`new`行没有`[some number]`

```
 bar = new std::vector< std::vector < int > >(A, std::vector<int>(B,2); 
```

所以你的删除行也不应该有一个。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T05:20:57.287

上面的类可能最好写成：

```
struct Foo   
 {
     Foo(int A, int B)
       :  bar(A, std::vector<int>(B,2)) //creates a vector of A vectors where each nested vector contains the number 2 B times. 
     {}
     // Default copy
     // Default destructor.

     std::vector< std::vector < int > > bar;
 }; 
```

这避免了显式`new`的 and `delete`; 通常是`rule of thumb`正确使用它们的最佳选择！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:14:09.470

对于像 c++ 这样的非托管代码，经验法则是您的设计所需的任何内容。

通常，清理对象以避免内存泄漏是一个好主意，但您可能会遇到希望将某些内容保留在内存中的情况。

# javascript - 如何使用Javascript动态更改点击按钮事件

> ID：13677499
> 
> 赞同：0
> 
> 时间：2012-12-03T05:10:55.563
> 
> 标签：javascript, html

我使用 java 脚本制作了一个反向计时器。我分别添加了启动和重置按钮，但需要在单击时更改按钮功能。如果我点击开始，那么开始功能应该运行，并且在开始的地方应该出现重置按钮，在再次点击重置后，重置功能应该开始并且应该出现开始按钮。我怎样才能做到这一点。请建议。

这是代码

```
var interval;
    var minutes = 1;
    var seconds = 00;

    function countdown(element) {
        interval = setInterval(function() {
            var el = document.getElementById(element);
            if(seconds == 0) {
                if(minutes == 0) {
                    alert(el.innerHTML = "countdown's over!");                    
                    clearInterval(interval);
                    return;
                } else {
                    minutes--;
                    seconds = 60;
                }
            }
            if(minutes > 0) {
                var minute_text = minutes + (minutes > 1 ? ' minutes' : ' minute');
            } else {
                var minute_text = '';
            }
            var second_text = seconds > 1 ? 'seconds' : 'second';
            el.innerHTML = minute_text + ' ' + seconds + ' ' + second_text + ' remaining';
            seconds--;
        }, 1000);
    }
var renew = document.getElementById('renew');
renew.onclick = function() {
    minutes = 1;
    seconds = 00;
    clearInterval(interval);
    interval = null;

     countdown('countdown');    
}

var start = document.getElementById('start');
start.onclick = function() {
    document.getElementById('renew').onclick = function (event){
        <input type="button" value="renew" id="renew" /> 
    };
    if (!interval) {
        countdown('countdown');
    }
} 
```

html代码是：

```
<div id="topmain">
        <div style="margin-left:15px; float:left;">
            <input type="button" value="start" id="start" /> 
            <input type="button" value="renew" id="renew" />
            <div id='countdown' style="color:#0FC;  margin-left:5px; " >

           </div> </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:16:52.400

重叠按钮并隐藏重置按钮，并在单击一个按钮时切换以显示另一个按钮..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:37:47.543

在这里查看代码，

[http://jsfiddle.net/86W5B/2/](http://jsfiddle.net/86W5B/2/)

您需要做的就是添加显示和隐藏按钮，例如，

```
start.style.display = 'block';
renew.style.display = 'none'; 
```

和

```
start.style.display = 'none';
renew.style.display = 'block'; 
```

这是完整的代码，

```
<div id="countdown"></div>
<input type="button" id="start" value="Start">
<input type="button" id="renew" value="renew" style="display:none">

<script>
var interval;
    var minutes = 1;
    var seconds = 00;

    function countdown(element) {
        interval = setInterval(function() {
            var el = document.getElementById(element);
            if(seconds == 0) {
                if(minutes == 0) {
                    alert(el.innerHTML = "countdown's over!");
                    start.style.display = 'block';
                    renew.style.display = 'none';        
                    clearInterval(interval);
                    return;
                } else {
                    minutes--;
                    seconds = 60;
                }
            }
            if(minutes > 0) {
                var minute_text = minutes + (minutes > 1 ? ' minutes' : ' minute');
            } else {
                var minute_text = '';
            }
            var second_text = seconds > 1 ? 'seconds' : 'second';
            el.innerHTML = minute_text + ' ' + seconds + ' ' + second_text + ' remaining';
            seconds--;
        }, 1000);
    }

var renew = document.getElementById('renew');
var start = document.getElementById('start');

renew.onclick = function() {
    minutes = 1;
    seconds = 00;
    clearInterval(interval);
    interval = null;

     countdown('countdown'); 
    start.style.display = 'block';
    renew.style.display = 'none';

}

start.onclick = function() {
    start.style.display = 'none';
    renew.style.display = 'block';

    if (!interval) {
        countdown('countdown');
    }
}
</script>
​ 
```

# android - LibGdx 游戏未在 android 中运行？

> ID：13677500
> 
> 赞同：0
> 
> 时间：2012-12-03T05:10:58.397
> 
> 标签：android, libgdx

我正在使用 LibGdx 框架制作游戏。这对于 dekstop 工作正常，但是当尝试为 android 运行时会出现异常：-

```
 12-03 10:39:46.687: E/AndroidRuntime(9487): FATAL EXCEPTION: main
       12-03 10:39:46.687: E/AndroidRuntime(9487): java.lang.NoClassDefFoundError: com.inoXmobile.glowjump.SuperJumper
        12-03 10:39:46.687: E/AndroidRuntime(9487):     at com.inoXmobile.glowjump.GlowJupmAndroid.onCreate(GlowJupmAndroid.java:35)
        12-03 10:39:46.687: E/AndroidRuntime(9487):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
        12-03 10:39:46.687: E/AndroidRuntime(9487):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
          12-03 10:39:46.687: E/AndroidRuntime(9487):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
          12-03 10:39:46.687: E/AndroidRuntime(9487):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
         12-03 10:39:46.687: E/AndroidRuntime(9487):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
           12-03 10:39:46.687: E/AndroidRuntime(9487):  at android.os.Handler.dispatchMessage(Handler.java:99)
           12-03 10:39:46.687: E/AndroidRuntime(9487):  at android.os.Looper.loop(Looper.java:130)
          12-03 10:39:46.687: E/AndroidRuntime(9487):   at android.app.ActivityThread.main(ActivityThread.java:3687)
         12-03 10:39:46.687: E/AndroidRuntime(9487):    at java.lang.reflect.Method.invokeNative(Native Method)
          12-03 10:39:46.687: E/AndroidRuntime(9487):   at java.lang.reflect.Method.invoke(Method.java:507)
          12-03 10:39:46.687: E/AndroidRuntime(9487):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
          12-03 10:39:46.687: E/AndroidRuntime(9487):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
             12-03 10:39:46.687: E/AndroidRuntime(9487):    at dalvik.system.NativeStart.main(Native Method)I 
```

**已将这些 jar 和 so 文件放在 android 项目 libs 文件夹中：-** **1- gdx.jar

2-gdx-backend-android.jar

3-armeabi

4-armeabi-v7a**

**我的 Android 活动是：-**

```
public class GlowJupmAndroid extends AndroidApplication {
        /** Called when the activity is first created. */
         private PowerManager.WakeLock wl;
          Bundle next;
       @Override
     public void onCreate (Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            this.initialize(new SuperJumper(), false);

          PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
         wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "DoNotDimScreen");
      }

      @Override
     protected void onResume() {
       super.onResume();
       wl.acquire();
       }

 @Override
 protected void onPause() {
  super.onPause();
  wl.release();
 } 
```

}

我的清单文件是这样的：-

```
 <?xml version="1.0" encoding="utf-8"?>
     <manifest xmlns:android="http://schemas.android.com/apk/res/android"
       package="com.inoXmobile.glowjump"
       android:versionCode="1"
       android:versionName="1.0"
       android:installLocation="auto">
    <application android:icon="@drawable/icon" android:debuggable="true" android:label="@string/app_name">
        <activity android:name=".GlowJupmAndroid"
              android:label="@string/app_name"
              android:configChanges="keyboard|keyboardHidden|orientation"
              android:screenOrientation="landscape">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
       </activity>

     </application>
     <uses-sdk android:minSdkVersion="3"/>
       <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
     <uses-permission android:name="android.permission.WAKE_LOCK" /> 
 </manifest> 
```

请任何人告诉我为什么这个异常发生了很多次我一直在尝试删除项目并尝试运行、清理和从 cod.google 下载新的 jar，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:47:21.390

这看起来像 ADT 17 问题。可以在[此处](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)找到一个很好的解释，但最简单的方法可能是按照[此处](http://www.badlogicgames.com/wordpress/?p=2362)的步骤进行操作。

# lucene - lucene 如何在倒排索引中使用跳过列表？

> ID：13677514
> 
> 赞同：4
> 
> 时间：2012-12-03T05:12:13.320
> 
> 标签：lucene, inverted-index, skip-lists

在一些博客和 lucene 网站中，我知道 lucene 在倒排索引中使用数据结构“跳过列表”。但我对此有些疑惑。

## 1：一般情况下，skip list可能用在内存中，倒排索引存储在磁盘中。那么 lucene 在索引上搜索时是如何使用它的呢？只是在磁盘上扫描或将其加载到内存中？

## 2：skip list的insert操作符经常使用random(0,1)来决定是否插入到下一级，但是在luncene的介绍中，似乎每一项都是固定的区间，那么lucene如何创建不同的“skip list”呢？

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:04:29.843

Lucene 以几种不同的方式使用内存，即使在为搜索和排序（字段缓存）等操作创建 IndexReader 时索引仍保存在磁盘上：

[http://blog.mikemccandless.com/2010/07/lucenes-ram-usage-for-searching.html](http://blog.mikemccandless.com/2010/07/lucenes-ram-usage-for-searching.html)

基本上，这些二进制文件会被复制到 RAM 中，以便更快地扫描并减少 I/O。您在上面的链接中得到了一个提示，使用某些参数进行搜索可以强制 Lucene“在搜索中跳过术语”因此，可以使用该数据结构的位置。

Lucene 是开源的，因此您可以自己查看在 Java 或 Lucene.NET 中用于 C# 实现的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-20T10:00:20.160

请参阅[为了加速发布列表跳过，Lucene 使用了跳过列表](https://issues.apache.org/jira/browse/LUCENE-866)

# php - PHP FTP 错误 - ftp_put(): Illegal PORT command

> ID：13677515
> 
> 赞同：4
> 
> 时间：2012-12-03T05:12:29.103
> 
> 标签：php, ftp

我在使用`ftp_put`. 我尝试过同时使用被动和主动模式。

**Active**返回此错误（使用 this 设置`ftp_pasv($connection, false)`）：

```
ftp_put(): Illegal PORT command. 
```

**被动**模式只是挂起：

```
ftp_pasv($connection, true) 
```

我可以使用 Filezilla 中的活动模式很好地连接到服务器。

# java - Hadoop：TaskTracker 和 JobTracker 不以 start-dfs.sh 开头

> ID：13677517
> 
> 赞同：0
> 
> 时间：2012-12-03T05:12:33.793
> 
> 标签：java, hadoop

我正在尝试使用此链接在我的笔记本电脑上设置 hadoop 0.22.0 以用于学习目的

[http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

当我运行脚本 start-dfs.sh 这是输出

```
starting namenode, logging to /usr/local/hadoop/bin/../logs/hadoop-raunak-namenode-ubuntu.out
localhost: starting datanode, logging to /usr/local/hadoop/bin/../logs/hadoop-raunak-datanode-ubuntu.out
localhost: starting secondarynamenode, logging to /usr/local/hadoop/bin/../logs/hadoop-raunak-secondarynamenode-ubuntu.out 
```

的输出`jps`是：

```
18106 Jps
17269 NameNode
17556 DataNode
17845 SecondaryNameNode 
```

但我看不到`TaskTracker`or`JobTracker`正在运行。所以，谁能告诉我我可能会错过什么。我是一个新手，不知道需要什么信息。所以，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T11:52:29.747

我同意 Chris Gerken 的评论，您正在运行`start-dfs.sh`仅启动 HDFS 服务的脚本。`start-mapred.sh`如果您想要地图缩减服务（作业跟踪器和任务跟踪器），则需要运行。

此外，来自`start-all.sh`提示的已弃用消息：

```
echo "This script is Deprecated. Instead use start-dfs.sh and start-mapred.sh" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-26T11:41:18.620

如果您使用的是较新版本的 hadoop，您可能会发现它与您提到的教程略有不同。现在所有`conf/`文件都将在`hadoop-installation/etc/hadoop`目录中。

所有的 hadoop 守护进程都在`sbin/`目录中。

此外，当您运行`sbin/start-all.sh`脚本时，会说此命令已弃用，并会要求您运行`start-dfs.sh`，`start-yarn.sh`就我而言。

`start-dfs.sh`开始`namenode`on master 和`data-nodes`on`slave`和`secondarynamenode`on `localhost`。

`start-yarn.sh`启动了两个新进程，即`ResourceManager`和`NodeManager`。因此，我猜在这种情况下，`ResourceManager`是`JobTracker`和`NodeManager`是。`TaskTracker`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-01T10:15:16.963

JobTracker 和 TaskTracker 是 MRv1（或 Hadoop 版本 1）中 MapReduce 执行所涉及的 2 个基本过程。这两个进程现在都在 MRv2（或 Hadoop 版本 2）中被弃用，并被资源管理器、应用程序主控和节点管理器守护进程所取代。如果您只使用 start-all.sh 那么它将启动您的以下服务。

```
7120 ResourceManager
6787 DataNode
6981 SecondaryNameNode
7573 Jps
6678 NameNode
7229 NodeManager 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T05:54:58.477

使用 JobTracker web 界面默认是`http://localhost:50030/`和 TaskTracker web 界面默认是`http://localhost:50060/`. 可能由于某种原因它没有在 JPS 中显示。

# php - 如何以编程方式从具有特殊语法的字符串中导出嵌套对象字段的值？

> ID：13677525
> 
> 赞同：0
> 
> 时间：2012-12-03T05:13:47.283
> 
> 标签：php, object

在下面的示例中，我们有一个由空格分隔的单词组成的字符串。字符串中的每个单词将代表对象的嵌套级别。在实际实现中，我不会提前知道字符串。

```
$string = "Actor Name";
$object->Actor->Name = "John Doe";

function getValue($string, $object) {
   // do stuff
   return $value; // John Doe
} 
```

另一个例子：

```
$string = "Actor Email";
$object->Actor->Email = "johndoe@example.com";

$value = getValue($string, $object); // johndoe@example.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:17:10.517

遍历由空格分割的字符串：

```
$last = $object;
foreach (explode(' ', $string) as $piece) {
   $last = $last->$piece
}
return $last; 
```

# android - 无法使用 android 模拟器将数据发布到 apache localhost

> ID：13677526
> 
> 赞同：2
> 
> 时间：2012-12-03T05:14:03.067
> 
> 标签：android, localhost, http-post, emulation

我正在尝试使用下面给定的代码使用端口号 8080 在 wamp 的 apache localhost 上发布数据。

```
public class postdata extends Activity
{
    Button btnpost;
    EditText txtname,txtsalary;
    TextView lblstatus;
    String hostname;
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.main3);
        btnpost=(Button)this.findViewById(R.id.btnpost);
        txtname=(EditText)this.findViewById(R.id.txtname);
        txtsalary=(EditText)this.findViewById(R.id.txtsalary);
        final HttpClient client = new DefaultHttpClient();
        final HttpPost post = new HttpPost("http://127.0.0.1:8080/andy1/script2.php");
        btnpost.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View arg0)
            {
                try
                {
                    List<NameValuePair> pair = new ArrayList<NameValuePair>(2);
                    pair.add(new BasicNameValuePair("txtname",txtname.getText().toString()));
                    pair.add(new BasicNameValuePair("txtsalary",txtsalary.getText().toString()));
                    post.setEntity(new UrlEncodedFormEntity(pair));
                    HttpResponse response = client.execute(post);
                    Toast.makeText(getApplicationContext(), "Record Saved",1000).show();
                }
                 catch (ClientProtocolException e)
                    {
                        // TODO Auto-generated catch block
                    }
                    catch (IOException e)
                    {
                        Toast.makeText(getApplicationContext(), "Error in uploading",1000).show();
                    }
            }
        });
    }

} 
```

每当我在模拟器上运行上述代码时，都会出现以下错误。

```
12-03 10:10:51.237: E/AndroidRuntime(281): FATAL EXCEPTION: main
12-03 10:10:51.237: E/AndroidRuntime(281): java.lang.IllegalArgumentException: Host name may not be null
12-03 10:10:51.237: E/AndroidRuntime(281):  at org.apache.http.HttpHost.<init>(HttpHost.java:83)
12-03 10:10:51.237: E/AndroidRuntime(281):  at org.apache.http.impl.client.AbstractHttpClient.determineTarget(AbstractHttpClient.java:497)
12-03 10:10:51.237: E/AndroidRuntime(281):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-03 10:10:51.237: E/AndroidRuntime(281):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
12-03 10:10:51.237: E/AndroidRuntime(281):  at demo.network.postdata$1.onClick(postdata.java:65)
12-03 10:10:51.237: E/AndroidRuntime(281):  at android.view.View.performClick(View.java:2408)
12-03 10:10:51.237: E/AndroidRuntime(281):  at android.view.View$PerformClick.run(View.java:8816)
12-03 10:10:51.237: E/AndroidRuntime(281):  at android.os.Handler.handleCallback(Handler.java:587)
12-03 10:10:51.237: E/AndroidRuntime(281):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-03 10:10:51.237: E/AndroidRuntime(281):  at android.os.Looper.loop(Looper.java:123)
12-03 10:10:51.237: E/AndroidRuntime(281):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-03 10:10:51.237: E/AndroidRuntime(281):  at java.lang.reflect.Method.invokeNative(Native Method)
12-03 10:10:51.237: E/AndroidRuntime(281):  at java.lang.reflect.Method.invoke(Method.java:521)
12-03 10:10:51.237: E/AndroidRuntime(281):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-03 10:10:51.237: E/AndroidRuntime(281):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-03 10:10:51.237: E/AndroidRuntime(281):  at dalvik.system.NativeStart.main(Native Method) 
```

我也尝试使用 10.0.0.2 作为 IP 地址，因为它是其他帖子中发布的解决方案之一，但根本不起作用。我已经尝试了很多使用 net 来解决这个错误，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:33:48.840

For accessing localhost (development sys) you have to use **10.0.2.2** (not 10.0.0.2).

for more information look [here](http://developer.android.com/tools/devices/emulator.html#networkaddresses)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:21:39.943

Unless you are running a Web server in the emulator you need to use the IP address of your development machine. Use `ifconfig` (Linux, etc.) or `ipconfig` (Windows) to find out what the address is. Should be something like '192.168.xxx.xxx` for a local network.

Or use 10.0.2.2 to refer to the development machine's loopback interface as suggested in the other answer. Here's the link to the relevant docs for the emulator: [http://developer.android.com/tools/devices/emulator.html#networkaddresses](http://developer.android.com/tools/devices/emulator.html#networkaddresses)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:21:21.753

你可以从互联网上找到 ip ..去[http://whatsmyip.net/](http://whatsmyip.net/)这个 ip 在你的项目中使用

final HttpPost post = new HttpPost("http:// **ip** :8080/andy1/script2.php");

# c# - 按钮将增量数字推送到文本框 c# winform

> ID：13677537
> 
> 赞同：0
> 
> 时间：2012-12-03T05:15:03.763
> 
> 标签：c#, winforms

这是针对我正在为课堂做的一个项目，我正在尝试创建一个具有 2 个按钮的 win 表单，其中一个按钮在按下按钮时会在文本框中增加，当按下不同按钮时会减少一个按钮. 我很难找到合适的线路来做我想做的事。有没有人可以帮助我？

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.Windows.Forms;

    namespace Project10TC
    {
        public partial class Form1 : Form

        {
            public Form1()
            {
                InitializeComponent();
            }

            private void exitToolStripMenuItem1_Click(object sender, EventArgs e)
            {
                this.Close();
            }

            private void aboutToolStripMenuItem_Click(object sender, EventArgs e)
            {
                MessageBox.Show("Teancum Project 10");
            }

            private void button1_Click(object sender, EventArgs e)
            {
                 int i = 1;

                textBox1.Text = Convert.ToString(i++);
            }

            private void button2_Click(object sender, EventArgs e)
            {
                 int i = 1;

                textBox1.Text = Convert.ToString(i--);
            }

            private void button3_Click(object sender, EventArgs e)
            {
                textBox1.Clear();
            }

            private void textBox1_TextChanged(object sender, EventArgs e)
            {

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T05:16:19.563

由于它是一个班级项目，我只能给你一个提示。

您需要在`i`按钮单击事件之外定义变量。在两个事件中使用相同的变量。

还要看看[和之间的](https://stackoverflow.com/a/3346729/961113)[区别`i++``++i`](https://stackoverflow.com/a/3346729/961113)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:17:55.723

`i`将变量声明为字段。此外，我会使用`++i`而不是`i++`. 否则，您在文本框和变量中有不同的值。此外，无需使用`Convert.ToString()`.

```
public partial class Form1 : Form
{
    int i;

    public Form1()
    {
        InitializeComponent();
        i = 0;
    }

    //...

    private void button1_Click(object sender, EventArgs e)
    {
        textBox1.Text = (++i).ToString();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        textBox1.Text = (--i).ToString;
    }
} 
```

# c# - 使用 C# 获取连接 gsm 调制解调器的端口号

> ID：13677540
> 
> 赞同：1
> 
> 时间：2012-12-03T05:15:17.990
> 
> 标签：c#, asp.net, asp.net-mvc-3, gsm

我打算使用 C# 中的调制解调器从 asp.net 应用程序发送短信。由于该项目将被集成到另一个项目中，因此它不会有任何字段供用户输入以输入 com 端口。我怎样才能获得端口号在哪里我的调制解调器从 C# 连接。

谢谢，萨加尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:30:26.513

要检查调制解调器是否连接到特定端口，您可以向该端口发送 AT 命令。如果我们在当前 COM 端口上找到调制解调器，则下面的此函数将返回 true：

```
 private bool CheckExistingModemOnComPort(SerialPort serialPort)
    {
        if ((serialPort == null) || !serialPort.IsOpen)
            return false;

        // Commands for modem checking
        string[] modemCommands = new string[] { "AT",       // Check connected modem. After 'AT' command some modems autobaud their speed.
                                                "ATQ0" };   // Switch on confirmations
        serialPort.DtrEnable = true;    // Set Data Terminal Ready (DTR) signal 
        serialPort.RtsEnable = true;    // Set Request to Send (RTS) signal

        string answer = "";
        bool retOk = false;
        for (int rtsInd = 0; rtsInd < 2; rtsInd++)
        {
            foreach (string command in modemCommands)
            {
                serialPort.Write(command + serialPort.NewLine);
                retOk = false;
                answer = "";
                int timeout = (command == "AT") ? 10 : 20;

                // Waiting for response 1-2 sec
                for (int i = 0; i < timeout; i++)
                {
                    Thread.Sleep(100);
                    answer += serialPort.ReadExisting();
                    if (answer.IndexOf("OK") >= 0)
                    {
                        retOk = true;
                        break;
                    }
                }
            }
            // If got responses, we found a modem
            if (retOk)
                return true;

            // Trying to execute the commands without RTS
            serialPort.RtsEnable = false;
        }
        return false;
    } 
```

在下一阶段，我们可以从调制解调器收集一些数据。

*   **ATQ0** - 打开确认（在每个请求上收到 OK）
*   **ATE0** - 打开回声
*   **ATI** - 获取调制解调器详细信息
*   **ATI3** - 获取扩展调制解调器详细信息（并非所有调制解调器都支持此命令）

# android - Android NDK 提供了对各种现有方法的未定义引用

> ID：13677542
> 
> 赞同：0
> 
> 时间：2012-12-03T05:16:00.763
> 
> 标签：android, android-ndk, native-code

我将我的 Android.mk 定义如下：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)

LOCAL_C_INCLUDES += $(LOCAL_PATH)
LOCAL_SRC_FILES := optplugin.c \
                   optionobjclass.c \

LOCAL_LDLIBS := -L$(SYSROOT)/usr/lib -llog 
LOCAL_MODULE:= optplugin
include $(BUILD_SHARED_LIBRARY) 
```

optplugin.c 文件对 optionobjclass.c 中实现的方法抛出了许多未定义的引用

我将不胜感激任何帮助。

optplugin.c 中的声明：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

//#include "pluginHelp.h"
#include "npapi.h"
#include "npruntime.h"
//#include "npupp.h"
#include "mcvdebug.h"
//#include "jritypes.h"
//#include "gogi_plugin_api.h"          /* GOGI Deprecated */
#include "optionobjclass.c"
#include "optionsClass.h"
#include "IOlsOptionObject.h"
#include "npunix.c"
#define TRACESYMBOL(...) extern int a;
#define TraceDebug(m, ...) printf(__VA_ARGS__)

#define TRUE 1
#define FALSE 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:33:41.887

由于您正在编译`optionobjclass.c`多次，因此发生了多个定义错误。

> LOCAL_SRC_FILES := optplugin.c \
> 
> ```
>  optionobjclass.c \ 
> ```

和

> #include "optionobjclass.c"

包含源文件时，将编译源文件。解决方案是`optionobjclass.c`从`LOCAL_SRC_FILES`.

但更好的方法是制作 heder 文件`optionobjectclass.h`并`optionobjclass.c`包含标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:20:59.017

尝试添加 C PLUS PLUS 标志，如果存在任何 c++ 代码，它可能正在使用 c++ 编译器。

```
#ifdef __cplusplus
extern "C" {
#endif

#ifdef __cplusplus
}
#endif 
```

# extjs4 - 加载到商店后读取 json 值

> ID：13677550
> 
> 赞同：1
> 
> 时间：2012-12-03T05:16:55.177
> 
> 标签：extjs4

我正在尝试从数据库返回的 json 中读取值。但我无法做到这一点。它的给未定义。在 Firebug 中，它以下列格式给出正确的值 { "COLUMNS":["B","C","D","E","F","G"], "DATA":[[1.253, 0.54,2.54,8.245,0,0.253]] }

当我给出console.log(response[0].DATA.B) 时，它给出的是未定义的。我试过 alert(response[0].get('B')); 这也是给未定义的。警报（成功）是真实的。

有人可以告诉我这里出了什么问题。

在此先感谢..这是我正在使用的代码

```
Ext.define('DBRec', {
extend: 'Ext.data.Model',
fields: [
{name:'A', type :'string'},
{name:'B', type:'string'},
{name:'C', type:'string'},
{name:'D', type:'string'},
{name:'E', type:'string'},
{name:'F', type:'string'},
{name:'G', type:'string'}
]
});

var DBRecStore=Ext.create('Ext.data.Store', {
model: 'DBRec',
proxy: {
type: 'ajax',
url : 'dbFunctions.cfc?method=getRec',
reader: {
    type:'json',
    root:'DATA',
    fields: ['B', 'C', 'D', 'E', 'F', 'G'] 
    } 
}
});

function loadLimits()
{
  DBRecStore.load({
  params: {
    reader: 'json',
    returnFormat: 'JSON'
  },
 callback: function(response, options, success){
    alert(DBRecStore.getCount());
    if (DBRecStore.getCount() == '0') {
       alert("no records found");

    }
   else
   {
       alert("records found");
       console.log(response[0].DATA.B+" "+response[0].DATA.C);
   }
 }
 });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:07:54.593

如果您不使用自己的阅读器，我认为您没有，那么您的**数据**数组必须是对象数组，而不是数组数组。

`{ "DATA":[{a:1.253,b: 0.54,c: 2.54,d:8.245,e:0,0.253}] }`

而且您不需要在商店中定义字段，它已经在模型中。

# jsp - JSTL 中的递减

> ID：13677553
> 
> 赞同：0
> 
> 时间：2012-12-03T05:17:10.610
> 
> 标签：jsp, jstl

如何使用 JSTL 制作类似下面的内容？

```
if(block > 0)
{
    //doSomething;
}
else   
{
    //idle;
}  
block--; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:32:09.397

您可以使用`<c:set />`.

```
<c:if test="${empty block}">
   <c:set var="block" value="0" scope="session"/>
</c:if>

<c:choose>
  <c:when test="${block ge 0}">
     ....
  </c:when>
  <c:otherwise>
     .....
  </c:otherwise>
</c:choose>

<c:set var="block" scope="session" value="${block-1}"/> 
```

# javascript - Jasmine jQuery：loadFixtures()“未定义”？

> ID：13677559
> 
> 赞同：2
> 
> 时间：2012-12-03T05:17:52.137
> 
> 标签：javascript, jasmine

我的设置

1.  Win7/64位
2.  Wamp 服务器
3.  崇高文本 2

我做了什么...

1.  通过红宝石加载茉莉花*（茉莉花初始化）*
2.  冉耙*（耙茉莉）*
3.  删除了所有默认的公共 javascript、规范文件和帮助文件。
4.  将 jquery 和 jasmine-jquery 添加到“helpers”目录
5.  打开浏览器，启动 liveReload 并运行以下测试...

...其中，只有“ **readFixtures()** ”通过了。所有其他人都失败了。什么？请指教！

“ **readFixtures()** ” 测试完美运行...

```
describe("test read fixtures", function() {
    it("should be able to read fixtures", function() {
        // expect(readFixtures()).toBeDefined();
        expect(readFixtures()).toBeDefined();
    });
}); 
```

“ **loadFixtures()** ” 测试返回“预期未定义的定义”。

```
describe("test load fixtures", function() {
    it("should be able to load fixtures", function() {
        // expect(loadFixtures()).toBeDefined();
        expect(loadFixtures()).toBeDefined();
    });
}); 
```

“ **setFixtures()** ” 测试返回“预期未定义的定义”。

```
describe("test set fixtures", function() {
    it("should be able to set fixtures", function() {
        // expect(setFixtures()).toBeDefined();
        expect(setFixtures()).toBeDefined();
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T19:21:36.113

我认为你没有在这里测试你想要的东西。函数`setFixtures`和`loadFixtures`没有返回值。这意味着当您调用`setFixtures()`它时，它将始终返回未定义。**您想测试是否定义了函数，而不是函数的返回值。**您的测试应如下所示：

```
it("should be able to set fixtures", function() {
    expect(setFixtures).toBeDefined(); // Notice I took out the ()
}); 
```

# asp.net - OrchardCMS 在远程访问时阻止匿名用户

> ID：13677561
> 
> 赞同：2
> 
> 时间：2012-12-03T05:17:55.337
> 
> 标签：asp.net, asp.net-mvc, configuration, permissions, orchardcms

我有一个运行良好的生产 OrchardCMS 站点。

今天，我将所有文件从该站点复制到本地服务器，以便在部署之前使用它来暂存和测试更改。我所做的另一项小改动是将 Orchard 实例更改为使用本地完整 SQL 实例而不是 Sql CE。（这也是我接下来几天在生产中要做的事情。）

迁移工作正常。我可以在端口 2764（我分配的那个）上使用 localhost 加载 Orchard 实例，它工作得很好……就像在生产环境中一样。

当连接到端口 2764 时，我在路由器上设置了端口转发以连接到这个登台/测试服务器。（并且还在本地服务器上创建了一个入站规则）。

当我从远程计算机访问该端口上的站点时，它会加载内容但不获取任何文件（CSS、JS 等）。所以我看到了内容，但它是未格式化的原始 html。

我在提琴手中加载了页面，它为会话显示了这样的标题......

```
HTTP/1.1 302 Found
Location: /Users/Account/AccessDenied?ReturnUrl=%2fThemes%2fBootstrap%2fStyles%2fbootstrap.min.css
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Mon, 03 Dec 2012 04:38:01 GMT
Content-Length: 205 
```

接着 ...

```
GET /Users/Account/AccessDenied?ReturnUrl=%2fThemes%2fBootstrap%2fStyles%2fbootstrap.min.css HTTP/1.1
HTTP/1.1 200 OK
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Content-Type: text/html; charset=utf-8
Content-Encoding: gzip
Expires: -1
Vary: Accept-Encoding
Server: Microsoft-IIS/7.5
X-AspNetMvc-Version: 3.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Mon, 03 Dec 2012 04:38:01 GMT
Content-Length: 2179 
```

如果我登录到该站点（我仍然可以看到登录按钮和后续登录页面），我已成功登录，然后该网站正常运行......直到我再次注销。

所以底线......匿名用户可以看到内容，但 OrchardCMS（或 IIS ......或两者兼而有之？）不会获取任何看起来的文件。

关于这个原因的任何想法？谢谢你的帮助。

赛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T02:03:55.313

事实证明这是一个直接的 NTFS 权限问题。匿名用户使用的是我没有授予任何权限的 IUSR 身份。我将其更改为使用 APP POOL 身份，一切都很好。我想我也可以授予 IUSR 读取权限。

# c - Malloc 编译错误：“int”类型的值不能用于初始化 int (*)[30] 类型的实体

> ID：13677566
> 
> 赞同：13
> 
> 时间：2012-12-03T05:18:35.930
> 
> 标签：c, pointers, malloc

到目前为止，我一定已经尝试了 20 种方法。我真的需要帮助，无论我做什么，我都会收到与此类似的错误。

```
a value of type "int" cannot be used to initialize an entity of type "int (*)[30]" 
```

即这会给我带来这样的错误

```
int(*array)[160] = malloc((sizeof *array) * 10); 
```

做这样的事情

```
int** Make2DintArray(int arraySizeX, int arraySizeY) {
    int** theArray;
    theArray = (int**) malloc(arraySizeX*sizeof(int*));
    int i;
    for (i = 0; i < arraySizeX; i++)
    {
        theArray[i] = (int*) malloc(arraySizeY*sizeof(int));
    }
    return theArray;
} 
```

会给我这个

```
"void *(size_t)" in "memory.c" at line 239 and: "int()" 
```

有没有人有解决方案如何成功分配 int[160][10] 的 2dArray

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T05:25:30.527

试试这个：

```
int **array;
array = malloc(rows * sizeof(int *));
for (i = 0; i < rows; i++)
  array[i] = malloc(cols * sizeof(int));

// Some testing
for (i = 0; i < rows; i++) {
  for (j = 0; j < cols; j++)
    array[i][j] = 0; // or whatever you want
}

for (i = 0; i < rows; i++) {
  for (j = 0; j < cols; j++)
    printf("%d ", array[i][j]);
} 
```

在您的情况下，rows = 160 和 cols = 10。是一种可能的解决方案。

使用这种方法，您可以使用两个索引：

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-03T05:25:41.650

这两个对我来说都很好。第一个错误很常见，因为您忘记**`#include <stdlib.h>`**在使用所述相同（例如`malloc(size_t)`）中声明的函数之前，我没有*忘记*这样做。

C 有一些有趣的编译时行为，其中包括调用以前从未见过的函数的能力（原型定义*和*实现都没有）。在遇到这样的调用时，C 假定函数是：

*   返回的东西`int`
*   接受未知数量的参数，因此调用者可以传递它想要的任何东西（包括错误的东西）。

例如，函数被隐式假设为以下形式：

```
int func(); 
```

通常你甚至不会注意到，除了来自编译器的警告，这些警告会报告以下内容：

```
Warning: implicit declaration of `func` assumed to return `int` 
```

如果你在球上，你的警告级别会在启用警告错误的情况下出现，并且会抓住这一点。

但如果你不这样做呢？如果从函数返回的“事物”不能由实现中的数据大小以内容表示`int`怎么办？例如，如果`int`是 32 位，但数据指针是 64 位怎么办？例如，假设`char *get_str()`在您*不*包含的某个头文件中声明，并在您编译并与程序链接的 .c 文件中实现，如下所示：

```
#include <stdio.h>

// Note: NO prototype for get_str
int main()
{
    char *s = get_str();
    printf("String: %s\n", s);
    return 0;
} 
```

好吧，编译器应该呕吐，告诉你`int`并且`char*`不兼容（在它警告你之后不久就`get_str`假定你返回`int`）。但是，如果您通过*告诉*编译器以`char*`一种或另一种方式来强制编译器怎么办：

```
#include <stdio.h>

// Note: NO prototype for get_str
int main()
{
    char *s = (char*)get_str(); // NOTE: added cast
    printf("String: %s\n", s);
    return 0;
} 
```

现在，如果没有启用错误警告，您将收到一个隐式声明警告，仅此而已。代码将编译。但它会*运行*吗？如果`sizeof(int)`!= `sizeof(char*)`，（32 位与 64 位）可能不会。从返回的值`get_str`是一个 64 位指针，但*调用者*假设只返回 32 位，然后将其强制为 64 位指针。简而言之，演员隐藏了错误并打开了未定义行为的潘多拉魔盒。

* * *

那么所有这些与您的代码有什么关系呢？通过不包括`<stdlib.h>`编译器不知道是什么`malloc`。所以它假设它的形式是：

```
int malloc(); 
```

然后，通过将结果转换为`(int**)`您告诉编译器“无论结果如何，都使其成为`int**`”。在链接时，`_malloc`找到（没有像 C++ 那样通过名称修改的参数签名），连接起来，你的程序就准备好了。但是在您的平台上`int`，数据指针*的*大小不一样，因此您最终会产生一些不良后果：

*   演员隐藏了真正的错误。
*   虚假指针是由*实际*返回指针的一半位制成的。
*   作为对伤口的残忍剂量，分配的内存被泄漏，因为在任何地方都没有引用它的有效指针（你只是通过只保留它的一半而破坏了唯一的指针）。
*   可能是*最*不受欢迎的，*如果在 where 的实现上编译代码将表现出正常行为* `sizeof(int) == sizeof(int**)`。

所以你在你的 32 位 Debian 机器上构建它，一切看起来都很好。你把你的作业交给教授，他在他的 64 位 Mac 上构建它，然后它崩溃了，你不及格，不及格，辍学，在接下来的十年里抚摸这只猫，同时在你妈妈的地下室看 Seinfeld 重播想知道出了什么问题。哎哟。

**不要把铸造当作银弹**。它不是。在 C 语言中，需要它的频率*远*低于人们使用它的频率，如果用在错误的地方，可能会隐藏灾难性的错误。如果您在代码中发现没有硬转换就无法编译的地方，*请再看一遍*。除非您绝对、肯定地确定演员阵容是正确的，否则很可能是*错误*的。

在这种情况下，它隐藏了真正的错误，即您忽略了向编译器提供足够的信息以了解`malloc`真正的作用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-03T05:21:42.380

分配数组：

```
int *array = malloc(sizeof(int) * 160 * 10); 
```

然后使用如下代码：

```
array[10 * row + column] = value; 
```

（其中`row`从 0 到 159（含）和`column`从 0 到 9（含）。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T18:46:48.573

我有一个关于rendon回答的注释：

对于他的代码，Visual C++ 对每个“=”操作说：`error C2440: '=' : cannot convert from 'void *' to 'int **'`

通过进行一些更改，它对我有用，但我不确定它是否相同，所以我害怕编辑他的代码。相反，这里是我的代码，这似乎适用于第一印象。

```
int **a;    

a = (int **)malloc(rows * sizeof(int));

for (i = 0; i < rows; i++)
{
    a[i] = (int *)malloc(cols * sizeof(int));
}

for (j=0;j<rows;j++)
{
    for (i=0;i<cols;i++)
    {
        a[i][j] = 2;
    }
} 
```

实际上，我是用 custom`struct`而不是`int`s 来做的，但我认为无论哪种方式都应该有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-12T16:56:14.213

别介意我只是在添加一个使用 calloc 的示例

```
void allocate_fudging_array(int R, int C)
{
    int **fudging_array = (int **) calloc(R, sizeof(int *));
    for(int k = 0; k < R; k++)
    {
        fudging_array[k] = (int*) calloc(C, sizeof(int));
    }
}

// a helper function to print the array 
void print2darr(int **arr, int R, int C)
{
    for(int i = 0; i < R; i++)
    {
        for(int j = 0; j < C; j++)
        {
            printf(" %d  ", arr[i][j]);
        }
        printf("\n");
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-01-31T22:39:29.017

**用于存储字符**的二维数组*

 **```
char ***array;
int rows = 2, cols = 2, i, j;
array = malloc(sizeof(char **)*rows);
for (i = 0; i < rows; i++)
  array[i] = malloc(cols * sizeof(char *));

array[0][0] = "asd";
array[0][1] = "qwe";
array[1][0] = "stack";
array[1][1] = "overflow";

for(i=0;i<rows;i++){
  for(j=0;j<cols;j++){
    printf("%s ",array[i][j]);
  }
  printf("\n");
} 
```**

# php - 从数据库中获取记录，搜索两个日期之间的时间段

> ID：13677568
> 
> 赞同：1
> 
> 时间：2012-12-03T05:18:51.217
> 
> 标签：php, mysql, date, calendar, datepicker

我正在尝试从 mysql 中获取包含在两个日期之间某个时期的记录（这两个日期分别是 date_start、date_end 并存储在两个不同的列中）。

我现在在我的选择查询中做的是：

```
 .. WHERE MONTH(date_start) >= '".$month_start."' and DAY(date_start) >= '".$day_start."'" AND MONTH(date_end) <= '".$month_end."' and DAY(date_end) <= '".$day_end."'" 
```

该查询有效，但仅在某些情况下有效，根本无效！

请问有什么建议吗？

此处的表格示例：

id_period;date_start;date_end; 27；0000-04-02；0000-05-31；

|| *id_period* || *日期开始* || *日期结束* || || 41 || 0000-11-01 || 0000-11-30 ||

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T05:23:06.253

为什么不使用`BETWEEN`

```
SELECT ...
FROM...
WHERE your_date BETWEEN date_start AND date_end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:29:26.313

尝试使用[DATE_FORMAT](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)函数而不是使用 MONTH 和 DAY。请确认 db 中的日期为**日期**格式

# media-queries - 如何运行 jquery 函数但仅当浏览器窗口宽度> 1024px 时？

> ID：13677571
> 
> 赞同：0
> 
> 时间：2012-12-03T05:18:53.963
> 
> 标签：media-queries, jquery, browser-width

这是我想添加到我的响应式单页网站的功能，但仅当浏览器宽度大于 1024 像素时。

我对 jQuery 的了解很少。这是我现在的代码：

```
$(document).ready(function() {
        var pageWidth = $(window).width();
        if (pageWidth > 1024) {

$('.footer a').mouseenter(function() {
$(this).effect("bounce", { times:1, distance:4 }, 250);
});

});
}); 
```

这是我在加载此函数的 HTML 中的代码：

```
<script type="text/javascript" src="js/tiny-bounce.js"></script> 
```

另一个问题，当这个函数没有被触发时——例如，当用户在宽度小于 1024 像素的设备上加载网站时，他们还需要加载 javascript 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:34:05.430

你需要做的就是

而不是这个

```
if (pageWidth > 1024) { 
```

做这个

```
if (pageWidth < 1024) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:34:32.827

是的，当宽度小于 1024 时，您仍然需要加载 JS 代码，除非您在 HTML 或现有 JS 脚本中包含此代码。

我相信您可以`$(window).width()`在没有的情况下调用`$(document).ready()`，因此这可能是减少在小屏幕上使用此额外代码的影响的一种方法。

# ios - 如何将数据从 AppDelegate 传递到 ViewController？

> ID：13677572
> 
> 赞同：2
> 
> 时间：2012-12-03T05:18:54.973
> 
> 标签：ios, uiviewcontroller, appdelegate

我正在使用 Safari 浏览网页。单击此页面上的按钮后，我的 Ipad 将启动我的应用程序。所以我`- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url`在`AppDelegate.m`.

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url{
    if (!url) {  return NO; }   
    NSString *URLString = [url absoluteString];
    self.paramArray = [URLString componentsSeparatedByString:@"@"];
    NSLog(@"%d",[self.paramArray count]);
    for (int i = 1; i < [self.paramArray count]; i++) {
        NSLog([self.paramArray objectAtIndex:i]);
    }
    return YES;
} 
```

我在网页上使用的 url 类似于`myapp://@first_part@second_part@third_part`. `self.paramArray`存储 url ( `myapp://` `first_part` `second_part` `third_part`) 的子字符串。

现在我想在我的`ViewController`. 如何将此 NSArray 传递给`ViewController`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T05:28:57.893

这只是完成它所需的几行代码。

将此行放入 appDelegate.h 文件中

首先，您需要遵守以下协议

```
@interface AppDelegate : UIResponder <UIApplicationDelegate> 
```

现在需要声明一个属性供它使用，如下所示

```
@property (strong, nonatomic) id<UIApplicationDelegate>delagete; 
```

现在在视图控制器中使用该属性的最后一个也是最后一个阶段如下

在 viewcontroller 的 .h 文件中首先
像这样引用 appdelegate`#import "AppDelegate.h"`
然后一个 iVar`AppDelegate *appDel;``@interface`

现在在 .m 文件中
放入`appDel = [[UIApplication sharedApplication]delegate];`视图确实加载方法并访问 appdelegate 的所有属性，如`appDel.paramArray`.

快乐编码:)

# javascript - mousemove 和 mouseenter 平滑左右滚动和 mouseleave 功能

> ID：13677574
> 
> 赞同：0
> 
> 时间：2012-12-03T05:18:59.497
> 
> 标签：javascript, jquery

有谁知道如何使这个动画左右滚动更顺畅它使用 $.throttle 类，它每毫秒从 github 执行一次有没有人知道另一种方法可以更好地左右平滑[jsFiddle](http://jsfiddle.net/RkbP6/182/)我也想做一个 mouseleave 和 mouseout从包装器中将滚动内容动画化回 0px 像素我该怎么做？我的尝试失败了

HTML

```
<div id="wrapper">
<ul id="scroll-content">
    <li class="item"><img src="http://placehold.it/100x150/09f" /></li>
    <li class="item"><img src="http://placehold.it/100x150/2f2" /></li>
    <li class="item"><img src="http://placehold.it/100x150/234" /></li>
    <li class="item"><img src="http://placehold.it/100x150/342" /></li>
    <li class="item"><img src="http://placehold.it/100x150/312" /></li>
    <li class="item"><img src="http://placehold.it/100x150/131" /></li>
    <li class="item"><img src="http://placehold.it/100x150/111" /></li>
    <li class="item"><img src="http://placehold.it/100x150/222" /></li>
    <li class="item"><img src="http://placehold.it/100x150/333" /></li>
    <li class="item"><img src="http://placehold.it/100x150/122" /></li>
</ul> 
```

CSS：

```
#wrapper {
width: 100%;
height: 170px;
overflow: hidden;
background-color: red;
}
#scroll-content {
width: 1050px;
}
.item {
float: left;
margin-right: 5px;
list-style-type: none;
} 
```

jQuery：

```
$(document).ready(function() {
var wrapper = $('#wrapper'),
    content = $('#scroll-content');

wrapper.bind('mouseenter mousemove', $.throttle(200, mousemove));

function mousemove(e) {
    var wrapper_width = wrapper.outerWidth(),
        content_width = content.outerWidth(),
        limits = 50,
        center = wrapper_width / 2,
        wrapper_pos = wrapper.offset(),
        mousePos = Math.min(Math.max(e.pageX,wrapper_pos.left + limits), wrapper_pos.left+wrapper_width-limits);

    //calculate new left margin
    var tmp
    if(e.pageX > center) {
    tmp = (mousePos + 50 - 5) * (content_width - wrapper_width) / wrapper_width;
}else{
         tmp = (mousePos - 50) * (content_width - wrapper_width) / wrapper_width;

        }

    content.stop().animate({
        'margin-left': '-' + tmp + 'px'
    }, 'fast', 'easeOutSine');
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:56:57.360

使用向左滚动动画感觉更好：

js：

```
$(document).ready(function() {

    var wrapper = $('#wrapper'),
        content = $('#scroll-content'),
        width=0.
        wrapper_width=wrapper.outerWidth(),
        w_half=wrapper_width/2;
    var w_left=wrapper.position().left;
    //FIXME wait for images load, to get  width or calculate width other way!

    //calculate inner width;
    $('#scroll-content .item').each(function() {
        width+=$(this).width()+5;
    });
    content.css('width',width);
    //

    content_width = content.outerWidth();
    wrapper.bind('mouseenter mousemove drag', mousemove);
    function mousemove(e) {
        var mouse_pos=e.pageX-w_left;
        var content_pos=mouse_pos/wrapper_width*content_width-w_half;
        //console.log(e);
        wrapper.stop();
        wrapper.animate({scrollLeft: content_pos},300);

    }
}); 
```

​</p>

[小提琴](http://jsfiddle.net/oceog/LZ7Eq/)

可能是某些浏览器不喜欢滚动位置不是 int 或超出范围，但我相信你可以自己修复它

# c# - XML 输出在使用 C# Linq to XML 创建后包含重复值

> ID：13677575
> 
> 赞同：1
> 
> 时间：2012-12-03T05:19:15.553
> 
> 标签：c#, xml, linq-to-xml

这是我创建 XML 文件的代码

```
public void CreateXml(string[] names, string[] values, string type)
{
        XElement xml = new XElement("Transaction",
            new XElement("TransactionType", type));
        foreach (var i in names)
        {
            foreach (var o in values)
            {
                xml.Add(new XElement(i.Replace(" ", string.Empty), o));
            }
        }
        xml.Save("C:\\Users\\PHWS13\\Desktop\\sample.xml");
} 
```

我的输出看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<Transaction> 
    <TransactionType>Void</TransactionType> 
    <Zip>1</Zip>
     <Zip>2</Zip> 
     <PNRef>1</PNRef> 
     <PNRef>2</PNRef> 
 </Transaction> 
```

但这是不对的，我期待更多这样

```
<?xml version="1.0" encoding="UTF-8"?>
<Transaction> 
    <TransactionType>Void</TransactionType> 
    <Zip>1</Zip>
     <PNRef>2</PNRef> 
 </Transaction> 
```

正如我注意到的值是正确的，但我只是重复，我该如何解决这个问题？

```
string[] textBoxNamesArray = flowLayoutPanelText.Controls.OfType<TextBox>()
                                  .Select(r => r.Name)
                                  .ToArray();

string[] textBoxTextsArray = flowLayoutPanelText.Controls.OfType<TextBox>()
                                  .Select(r => r.Text)
                                  .ToArray(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T05:23:33.137

那么你不应该使用两个嵌套循环：两个嵌套循环创建一个*笛卡尔积*（即每个名称都与每个值配对）。

如果您使用同时遍历名称和值的单个循环，您将获得预期的输出。

如果您使用的是 .NET 4，则可以使用`Zip`如下方法：

```
xml.Add(
    names
    .Zip(values, (n,v) => new XElement(n.Name(" ", string.Empty), v))
    .ToArray()
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T05:23:02.693

如果不知道如何在 2 个数组中构造数据，很难说，但我猜：

```
 for (int i = 0; i < names.Length; i++)
    {
        xml.Add(new XElement(names[i].Replace(" ", string.Empty), values[i]));
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T05:30:28.323

用字典试试这个。

```
public void CreateXml(Dictionary<string, string> myNameValuePairs, string type)
{
    XElement xml = new XElement("Transaction",
        new XElement("TransactionType", type));
    foreach (var key in names)
    {
        xml.Add(new XElement(key.Replace(" ", string.Empty), myNameValuePairs[key]));
     }
    xml.Save("C:\\Users\\PHWS13\\Desktop\\sample.xml");
} 
```

编辑：使用上述方法签名的解决方法。但是，只有当 values[i] 是 names[i] 的对应值时，这才有效。除非您确定数组长度以及名称和值的内容，否则我不会建议您这样做。

```
public void CreateXml(string[] names, string[] values, string type)
{
    XElement xml = new XElement("Transaction",
        new XElement("TransactionType", type));
    foreach (var i = 0; i < names.length; i++)
    {
        xml.Add(new XElement(names[i].Replace(" ", string.Empty), values[i]));
    }
    xml.Save("C:\\Users\\PHWS13\\Desktop\\sample.xml");
} 
```

# windows-phone-7 - 在 Windows Phone 应用程序中流式传输 YouTube 视频

> ID：13677578
> 
> 赞同：0
> 
> 时间：2012-12-03T05:19:23.697
> 
> 标签：windows-phone-7

如何在 Windows Phone 应用程序中流式传输 YouTube 视频？我尝试使用 MediaElement 控件并将其 Source 属性与视频的 URL 一起设置，并在媒体元素上调用 Play() 方法，但它不起作用。我想创建一个简单的视频播放器，可以在流式传输视频时播放视频。我需要使用哪种 .NET 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:20:07.163

YouTube 不会以可用于在 Windows Phone 应用程序或任何其他类型的应用程序中播放它们的格式公开其视频。这就是存在诸如[KeepVid](http://keepvid.com/)之类的服务存在的原因，这些服务提供“黑客”下载 YouTube 视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:49:11.080

请参阅我几个月前在@[可能在 wp7 应用中播放 Youtube 视频？](https://stackoverflow.com/questions/4869564/possible-to-play-youtube-video-in-a-wp7-app/4879138#4879138)

# android - 如何显示具有透明背景图像的弹出窗口？

> ID：13677586
> 
> 赞同：15
> 
> 时间：2012-12-03T05:20:08.907
> 
> 标签：android

![在此处输入图像描述](../Images/aac55ea258833a2c7c4e3448875b6b04.png)

大家好，我正在制作一个应用程序，在其中显示带有背景图像的弹出窗口，

我为弹出窗口设置的背景图像是透明图像，但问题是显示弹出窗口时背景图像无法正确显示....

虽然它是透明图像，但它会在图像的角落显示黑色条带..

有人可以帮帮我吗？

PopupDemoActivity.java

> 包 com.demo.popupwindow.;

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.widget.Button;
import android.widget.FrameLayout;  
import android.widget.LinearLayout.LayoutParams;
import android.widget.PopupWindow;

public class PopupDemoActivity extends Activity {

Button searchMenu, viewOrder;

PopupWindow popUp;
LayoutParams params;
FrameLayout layout;
// LinearLayout layout;
boolean click = true;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.popdemodemo);

    searchMenu = (Button) findViewById(R.id.menu);
    viewOrder = (Button) findViewById(R.id.order);
    popUp = new PopupWindow(this);

    // layout = new LinearLayout(this);
    layout = new FrameLayout(this);

    viewOrder.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            if (click) {
                popUp.showAtLocation(layout, Gravity.TOP | Gravity.RIGHT,
                        0, 0);
                popUp.update(30, 75, 500, 400);
                click = false;
            } else {
                popUp.dismiss();
                click = true;
            }

        }
    });

    // popUp.setContentView(layout);

    params = new LayoutParams(LayoutParams.WRAP_CONTENT,
            LayoutParams.WRAP_CONTENT);

    layout.setBackgroundResource(R.drawable.order_back);
    // layout.setBackgroundColor(Color.TRANSPARENT);
    popUp.setContentView(layout);
}

} 
```

弹出演示.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/white_color"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/header_lay"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <Button
        android:id="@+id/menu"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="30dp"
        android:text="Search Menu"
        android:textColor="@color/white_color"
        android:textSize="25sp"
        android:textStyle="bold" />

    <Button
        android:id="@+id/order"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="30dp"
        android:text="View Order"
        android:textColor="@color/white_color"
        android:textSize="25sp"
        android:textStyle="bold" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-05-17T05:23:06.663

Jayesh，试试这个：

```
popUp.setBackgroundDrawable(new ColorDrawable(
            android.graphics.Color.TRANSPARENT)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-04T13:01:35.750

放

```
popUp.setBackgroundDrawable(null); 
```

它应该做的工作。你在后台得到的是弹出窗口的某种背景内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T07:16:10.863

在您的 XML 中，您将弹出窗口的背景定义为

> android:background="@color/white_color"

尝试在此处而不是在运行时应用背景图像。

> android:background="@drawable/order_back"

或者

移动上面的弹出布局更改代码（之前 `popUp.showAtLocation(layout, Gravity.TOP | Gravity.RIGHT,0, 0);`）

# javascript - addEventListener 由于帧而导致内存泄漏

> ID：13677589
> 
> 赞同：3
> 
> 时间：2012-12-03T05:20:25.227
> 
> 标签：javascript, memory, greasemonkey, addeventlistener

我有一个 GreaseMonkey 脚本，该脚本在一个使用框架作为其界面不可或缺的一部分的网站上运行。该脚本像筛子一样泄漏内存，我相信这是由于我在其中一个帧中使用了 addEventListener 造成的。很简单，我附加了各种事件侦听器，然后重新加载框架并附加事件侦听器，然后重新加载框架，当您与该框架或其他框架中的各种元素交互时，围绕数百甚至可能数千次迭代。到最后，Firefox 的内存从约 300M 增加到了 2G（或在到达之前崩溃）。

我在某处读到，执行整页重新加载将允许 FireFox 的垃圾收集例程启动并从孤立事件处理程序中恢复所有内存，当我在脚本运行一段时间后按 F5 时，果然在大约 10 秒内内存回落到300M。不幸的是，这打破了网站中的另一个框架（一个非常受欢迎的聊天窗口），所以虽然它似乎证实了我怀疑 addEventListener 是罪魁祸首，但它并不是真正的解决方案。

在不强制刷新整页的情况下，我还能做些什么来正确释放内存？

（目前使用的是 GM 1.5 和 FF 17，但从 GM 0.8/FF 4 左右开始就存在这个问题。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T12:21:30.787

如果没有看到您的完整脚本或[***简短的、自包含的、可编译的示例***](http://sscce.org/)，我们无法确定发生了什么。这可能`addEventListener`不是问题所在。

以下是一些更好的代码策略，内存泄漏更少：

1.  内联/匿名函数*通常*是罪魁祸首，尤其是事件处理程序。

    **差/漏：**

    ```
    elem.onclick = function () {/*do something*/};
    elem.addEventListener ("click", function() {/*do something*/}, false);
    $("elem").click ( function () {/*do something*/} ); 
    ```

    **不漏水，也更容易维护：**

    ```
    elem.onclick = clickHandler;
    elem.addEventListener ("click", clickHandler, false);
    $("elem").click (clickHandler);

    function clickHandler (evt) {
        /*do something*/
    } 
    ```

    请注意，对于用户脚本，无论如何您都应该[避免使用`onclick`，等等。](http://commons.oreilly.com/wiki/index.php/Greasemonkey_Hacks/Getting_Started#Pitfall_.232:_Event_Handlers)

2.  同样不要在 HTML 属性上使用 JS。EG不要使用`<span onclick="callSomeFunction()">`等。

3.  将 iframe 中运行的代码最小化为您明确需要的代码。

    1.  使用`@include`、`@exclude`和`@match`指令尽可能多地阻止不需要的 iframe。
    2.  [将不需要在 iframe 中运行的所有代码包装在一个块中](http://wiki.greasespot.net/Prevent_Execution_in_Frames)，如下所示：

        ```
        if (window.top === window.self) {
          // Not in a frame
        } 
        ```

4.  不要使用`innerHTML`.

5.  对于很多元素，或者与 AJAX 一起出现的元素，不要使用`addEventListener()`或 jQuery 的`.bind()`,`.click()`等。
    这可能会在数千个节点上复制侦听器。

    使用[jQuery 的`.on()`](http://www.jqapi.com/#p=on). 这样，监听器只连接一次，并通过冒泡适当地触发。（请注意，在一些罕见的情况下`.on()`，页面的 javascript 可能会阻止。）

    在你的情况下，你可能想要这样的东西：

    ```
    $(document).on ("click", "YOUR ELEM SELECTOR", clickHandler);

    function clickHandler (evt) {
        /*do something*/
    } 
    ```

6.  为避免意外的循环引用或孤立项，请使用 jQuery 添加或删除元素，而不是直接使用 DOM 方法，如`createElement()`、`appendChild()`等
    。jQuery 的设计/测试旨在最大限度地减少此类事情。

7.  谨防过度使用[`GM_setValue()`](http://wiki.greasespot.net/GM_setValue)。它很容易使用大量全局资源或导致脚本实例崩溃。

    1.  对于同域值，请使用`localStorage`.
    2.  请勿`GM_setValue()`用于存储字符串以外的任何内容。对于其他任何事情，请使用序列化程序，例如[`GM_SuperValue`](http://userscripts.org/scripts/show/107941). 即使是看起来很无辜的整数也可能导致默认值`GM_setValue()`崩溃。
    3.  与其存储大量小变量，不如将它们包装在一个对象中并使用其中一个序列化程序存储*它。*
8.  始终检查返回值并假设可能缺少元素：
    这很**糟糕**（而且，唉，典型的）：

    ```
    $("selector").text($("selector").text().match(/foo=([bar]+)/)[1]); 
    ```

    **更好的：**

    ```
    var salesItemDiv    = $("selector");
    var fooMatch        = salesItemDiv.text ().match (/\bfoo\s*=\s*([bar]+)\b/i);
    if (fooMatch  &&  fooMatch.length > 1) {
        salesItemDiv.text ( fooMatch[1] );
    } 
    ```

    可能紧随其后：

    ```
    salesItemDiv = fooMatch = null; 
    ```

    见下文。

9.  当心递归/内联`setTimeout()`调用。用于`setInterval()`重复计时。就像事件处理程序一样，不要使用内联/匿名函数。

10.  通过[JSLint](http://www.jslint.com/)运行您的代码。

11.  避免`eval()`和[自动/隐藏`eval()`调用](http://commons.oreilly.com/wiki/index.php/Greasemonkey_Hacks/Getting_Started#Pitfall_.231:_Auto-eval_Strings)。

12.  将变量设置`null`为完成它们的时间。[例如，请参见此。](https://stackoverflow.com/a/768872/331508)

13.  参考：[“你知道什么可能导致 JavaScript 中的内存泄漏吗？”](https://stackoverflow.com/q/170415/331508)

14.  [关于 JS 内存泄漏的补充阅读](https://stackoverflow.com/search?tab=votes&q=%5Bjavascript%5D%20%2btitle:memory%20%2btitle:leaks)

15.  [Mozilla*性能：泄漏工具*](https://wiki.mozilla.org/Performance:Leak_Tools)

# python - 为什么我无法检测到 AuiNotebook 页面何时关闭？

> ID：13677595
> 
> 赞同：0
> 
> 时间：2012-12-03T05:20:50.973
> 
> 标签：python, wxpython

我将`EVT_AUINOTEBOOK_PAGE_CHANGE`事件绑定到`AuiNotebook`成功，但是`EVT_AUINOTEBOOK_PAGE_CLOSE`两者`EVT_AUINOTEBOOK_PAGE_CLOSED`都不做。绑定的处理程序永远不会运行。我的构造和绑定代码如下所示：

```
self.notebook = wx.aui.AuiNotebook(self)
self.Bind(wx.aui.EVT_AUINOTEBOOK_PAGE_CLOSE, self.on_page_close)
self.Bind(wx.aui.EVT_AUINOTEBOOK_PAGE_CHANGED, self.on_page_changed) 
```

我的事件处理程序看起来像这样：

```
def on_page_close(self, event):
    print 'Page closed', event 
```

为什么页面关闭事件不做任何事情？

* * *

*以防万一，[这里是](http://pastebin.com/iswgYEfM)突出显示相关行的完整源文件。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:16:03.590

`DeletePage`使用或删除页面时不会触发关闭事件`RemovePage`，仅在使用小关闭按钮关闭页面时才会触发。没有以编程方式关闭将触发页面关闭事件的页面的方法，因此无论您想要执行什么关闭例程，您都必须将它们放在一个单独的函数中，并从关闭事件处理程序和所有调用`RemovePage`或的函数`DeletePage`。

# android - 如何使用默认播放器在 Android 设备中播放 .mov 文件？

> ID：13677599
> 
> 赞同：-2
> 
> 时间：2012-12-03T05:21:31.240
> 
> 标签：android, iphone, ios, cocoa-touch, avcapturesession

我一直在开发 iOS 应用程序，在我的应用程序中，我使用 AVCaptureSession 录制了 .mov 文件，但是当我尝试在任何 Android 设备上播放时，它们的默认播放器不支持它。我现在应该怎么做，我是否只需要为 Android 录制 mp4 类型的文件，或者有什么方法可以使用他们的默认播放器在 Android 中播放 .mov 文件本身？

谢谢你的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T05:38:21.630

请参阅[Android 支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html)

.MOV 文件不是 Android 支持的标准视频格式。根据您所针对的 Android 版本，您最有可能需要将格式更改为 .mp4 (H.263)。

如果您无法更改在 iOS 中录制的视频的编码方式，那么也许您可以在服务器端进行从 .mov 到 .mp4 的转换，然后再将其发送到 Android。（假设你有一个服务器端）

# iphone - 如何使 UIButton 可拖动？

> ID：13677617
> 
> 赞同：1
> 
> 时间：2012-12-03T05:23:17.077
> 
> 标签：iphone, uiview, drag-and-drop, uibutton, ios-simulator

我只需要在子视图中拖放 uibutton。实际上我正在主视图中查看子视图。UIbutton 添加到子视图中。当我拖动按钮时，它会在两个视图上移动，但我只需要在子视图中拖动按钮。谁能帮助我。提前致谢。

```
- (void) drag
{
  //subview
  UIView *viewscramble = [[UIView alloc] initWithFrame:CGRectMake(0, 90, 320, 50)];
  [viewscramble setBackgroundColor:[UIColor redColor]];
  [self.view addSubview:viewscramble];

   //button
   UIButton  *btnscramble = [[UIButton alloc] initWithFrame:CGRectMake(5, 0, 50, 50)];
   btnscramble.titleLabel.text = @"A";
   [btnscramble setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
   [btnscramble addTarget:self action:@selector(imageMoved:withEvent:) forControlEvents:UIControlEventTouchDragInside];
   [btnscramble setBackgroundImage:[UIImage imageNamed:@"box.png"] forState:UIControlStateNormal];

   //add button`     
   [viewscramble addSubview:btnscramble];
   [btnscramble release];
}

- (IBAction)imageMoved:(id)sender withEvent:(UIEvent *) event
{
  CGPoint point = [[[event allTouches]anyObject] locationInView:viewscramble];
  UIControl *control = sender;
  control.center = point;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T05:30:54.863

我刚刚从以下位置找到了您的问题的解决方案：- [http://www.cocoanetics.com/2010/11/draggable-buttons-labels/](http://www.cocoanetics.com/2010/11/draggable-buttons-labels/)

```
- (void)viewDidLoad 
{
    [super viewDidLoad];

    // create a new button
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button setTitle:@"Drag me!" forState:UIControlStateNormal];

    // add drag listener
    [button addTarget:self action:@selector(wasDragged:withEvent:) 
        forControlEvents:UIControlEventTouchDragInside];

    // center and size
    button.frame = CGRectMake((self.view.bounds.size.width - 100)/2.0,
            (self.view.bounds.size.height - 50)/2.0,
            100, 50);

    // add it, centered
    [self.view addSubview:button];
}

- (void)wasDragged:(UIButton *)button withEvent:(UIEvent *)event
{
    // get the touch
    UITouch *touch = [[event touchesForView:button] anyObject];

    // get delta
    CGPoint previousLocation = [touch previousLocationInView:button];
    CGPoint location = [touch locationInView:button];
    CGFloat delta_x = location.x - previousLocation.x;
    CGFloat delta_y = location.y - previousLocation.y;

    // move button
    button.center = CGPointMake(button.center.x + delta_x,
        button.center.y + delta_y);
} 
```

希望它对你有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:27:30.800

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint pointMoved = [touch locationInView:"SUBVIEWNAME.view"];   
    button.frame = CGRectMake(pointMoved.x, pointMoved.y, 64, 64);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:31:07.030

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{

    UITouch *tap = [touches anyObject];
    CGPoint pointToMove = [tap locationInView:yourSubView]; // just assign subview where you want to move the Button
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T05:31:29.023

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    if([touch view] == YOUR_BUTTON_OBJECT){
       CGPoint point = [touch locationInView:YOUR_PARENT_VIEW];
       //YOUR_X_LIMIT is your subview end in x direction.
       //YOUR_Y_LIMIT is your subview end in y direction.
       if(point.x < YOUR_X_LIMIT && point.y < YOUR_Y_LIMIT){
          button.center = point;
       }else{
         // do nothing since touch is outside your limit.
       }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-11T14:10:18.993

使用 UIButton 的 UIControlEventTouchDragInside 和 UIControlEventTouchUpInside 事件，例如

```
// add drag listener
[button addTarget:self action:@selector(wasDragged:withEvent:) forControlEvents:UIControlEventTouchDragInside];
// add tap listener
[button addTarget:self action:@selector(wasTapped:) forControlEvents:UIControlEventTouchUpInside]; 
```

您可以使用[hbdraggablebutton](https://www.cocoacontrols.com/controls/hbdraggablebutton)控件..

# ios - MFMailComposeViewController 由于大附件而崩溃

> ID：13677622
> 
> 赞同：0
> 
> 时间：2012-12-03T05:23:33.997
> 
> 标签：ios

我正在使用 MFMailComposeViewController 发送电子邮件。
但是由于内存不足，发送大附件时它崩溃了。
“邮件”是否为附件分配内存？
我应该怎么做

```
>
Dec  3 11:57:36 unknown kernel[0] <Debug>: launchd[1507] Builtin profile: container (sandbox)
Dec  3 11:57:36 unknown kernel[0] <Debug>: launchd[1507] Container: /private/var/mobile/Applications/776D8BB7-805E-46B1-B208-DF2CFE46AB3A [69] (sandbox)

> > 
Dec  3 11:57:48 unknown MobileMail[1483] <Warning>: Received memory warning.
Dec  3 11:57:49 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.apple.mobilemail[0x26be]) Exited: Killed: 9
Dec  3 11:57:49 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.yourcompany.TestApp[0xc7ed]) Exited: Killed: 9
Dec  3 11:57:49 unknown UserEventAgent[12] <Notice>: jetsam: kernel termination snapshot being created
Dec  3 11:57:49 unknown SpringBoard[1186] <Warning>: Application 'TestApp' exited abnormally with signal 9: Killed: 9
>
Dec  3 11:57:50 unknown SpringBoard[1186] <Warning>: Application 'Mail' exited abnormally with signal 9: Killed: 9
Dec  3 11:57:50 unknown SpringBoard[1186] <Warning>: Received memory warning.
Dec  3 11:57:50 unknown ReportCrash[1509] <Error>: Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2012-12-03-115750.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0
Dec  3 11:57:50 unknown kernel[0] <Debug>: launchd[1510] Builtin profile: MobileMail (sandbox) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T05:33:01.683

如果您的附件数据是磁盘上文件的内容，作为调用者，您可以做的最好的事情是从映射文件创建一个 NSData 对象：

```
NSData * attachmentData = [NSData dataWithContentsOfFile:myPath 
      options:NSDataReadingMappedIfSafe error:&error]; 
```

这会透明地将文件保存在磁盘上，直到部分文件被访问，并允许系统尽可能高效。

但除此之外，如果您的设备内存不足，则附件太大。如果设备在尝试附加电子邮件时内存不足，电子邮件服务很可能不会接受电子邮件，因为它会很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:04:36.000

邮件没有限制，但 ISP 会。对于大多数人来说，现实的限制可能是 10MB，尽管您可能希望将其保持在 5MB 左右，并在电子邮件中拆分...

您可以使用以下代码计算 NSData 的大小

```
NSData *pdfData=[NSData dataWithContentsOfFile:strpdfpath];

        NSLog(@"PDFData Length is %.02fmb",(float)(int)[pdfData length]/1048576); 
```

然后你可以在成功附加后删除文件，

```
[[NSFileManager defaultManager] removeItemAtPath:[strpdfpath stringByDeletingLastPathComponent] error:&err]; 
```

# php - 到处点击时 Jquery 自动提示关闭

> ID：13677623
> 
> 赞同：-1
> 
> 时间：2012-12-03T05:23:34.450
> 
> 标签：php, javascript, jquery, html

我有一个 Jquery Autosuggest 下拉菜单。该功能运行正常。

现在我想当我右键单击或单击任何地方时，显示框必须保持显示。因为当自动建议搜索有链接时我发现了问题。链接无法打开，因为在单击链接之前下拉框已关闭。

到目前为止，这是我的 JS 代码：

```
$(document).ready(function(){
    $(".searchs").keyup(function()
    {
       var searchbox = $(this).val();
       var dataString = 'searchword='+ searchbox;
       if(searchbox=='')
       {
        $("#display").hide();
       }
       else
       {
          $.ajax({
              type: "POST",
              url: "searchs.php",
              data: dataString,
              cache: false,
              success: function(html)
              {
                 $("#display").html(html).show();
              }
           });
        }
       return false;
    }); 

        $(".searchs").blur(function(){
             $("#display").hide();
    });

    $(".searchs").focus(function(){
    var seachbox = $(searchbox).val();
    if(seachbox != '')
    {
       $("#display").show();
    }
    });
}); 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:01:24.363

这是保持显示自动完成结果列表的方式：[**DEMO**](http://jsfiddle.net/8Lsgk/)

```
$("#tags").autocomplete({
source: availableTags,

 close : function (event, ui) {
     val = $("#tags").val();
     $("#tags").autocomplete("search", val).focus();
    return false;  
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:08:00.373

您的下拉框关闭的原因是因为每当您取消选择“搜索”类时，都会隐藏下拉框。要解决此问题，您可以尝试几种不同的方法。

1：将您的下拉框（ID 为“display”的下拉框）放在“搜索”类中。这看起来类似于：

```
<div id = "display" class = "searchs"></div> 
```

2：当您的`$(".searchs").blur`事件被触发时，在执行之前`$("#display").hide();`检查新焦点是否是您的显示 div：

```
$(".searchs").blur(function(){
  if($("#display").blur(function(){ //<--- if the new focus is not the display div, then hide display
    $("#display").hide();
  }
}); 
```

# python - urllib2 和 wget 返回 HTTP 403（禁止），而浏览器返回 OK

> ID：13677625
> 
> 赞同：1
> 
> 时间：2012-12-03T05:24:19.560
> 
> 标签：python, http-headers, httprequest, urllib2, http-status-code-403

我的浏览器可以访问一个网页，但是 `urllib2.urlopen()`（Python）并且`wget`都返回 HTTP 403（禁止）。有没有办法弄清楚发生了什么？

我使用最原始的形式，例如`urllib2.urlopen("http://test.com/test.php")`，对浏览器和`wget`. 在测试之前，我已经清除了浏览器中的所有 cookie。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:16:37.870

Python 库 urllib 有一个默认的用户代理字符串，其中包含 Python 一词，而 wget 使用“wget/VERSION”。如果您正在连接的站点检查用户代理信息，它可能会拒绝这两个。例如，谷歌就会这样做。

修复起来很容易.. 对于 wget，使用 -U 参数，对于 urllib，使用适当的字符串创建 URLOpener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:36:04.637

有些网站不允许网页抓取。尝试使用[Python requests](http://docs.python-requests.org/en/latest/)。

这个库应该可以工作。

# android - 应用程序未请求安装权限

> ID：13677629
> 
> 赞同：0
> 
> 时间：2012-12-03T04:31:01.050
> 
> 标签：android, adb, android-permissions

我正在从我的构建环境中通过 ADB 安装一个应用程序。我正在部署到物理 Nexus 7。（部署到模拟器时，没有问题）

当我部署时，安装似乎成功，但是当初始意图丢失时，我收到权限错误。

```
[2012-12-02 23:24:04 - KillerAppRejji] ActivityManager: java.lang.SecurityException:
Permission Denial: starting Intent { act=android.intent.action.MAIN cat=
android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.killerapprejji/.SplashScreen }
from null (pid=6116, uid=2000) requires android.permission.NFC 
```

编辑：更新 manifest.xml 并更改为

AndroidManifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.killerapprejji"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />
    <uses-feature android:name="android.hardware.NFC" 
              android:required="true"/>
<uses-permission android:name="android.permission.BLUETOOTH"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>
<uses-permission android:name="android.permission.NFC"/>

<application
    android:icon="@drawable/ninjahead"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" android:allowClearUserData="true" android:logo="@drawable/ninjahead" android:persistent="true" android:permission="android.permission.NFC">
    <activity android:name=".MainActivity" android:label="@string/title_activity_main">
        <intent-filter>
          <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
          <data android:mimeType="application/com.killerapprejji.NfcHandle"/>
          <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
    </activity>
    <activity android:name=".SplashScreen" android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER"/>  
        </intent-filter>
    </activity>
    <activity android:name=".AttackActivity" android:theme="@style/AppTheme" android:label="@string/attack_button"></activity>
    <activity android:launchMode="standard" android:screenOrientation="portrait" android:label="@string/menu_settings" android:alwaysRetainTaskState="true" android:noHistory="false" android:description="@string/menu_settings" android:configChanges="keyboard" android:theme="@style/AppTheme" android:parentActivityName="@string/title_activity_main" android:icon="@drawable/ninjahead" android:name=".SetInfo"></activity>
    <activity android:name=".DefendActivity" android:label="@string/defend_button" android:theme="@style/AppTheme"></activity>
    <activity android:name="DisplayInteractions" android:theme="@style/AppTheme" android:label="@string/Stats" android:parentActivityName="@string/title_activity_main"></activity>
    <activity android:name="NfcHandle">
        <intent-filter >
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:mimeType="application/com.killerapprejji.NfcHandle"/>
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:25:52.033

我的问题来自

```
<application ... **android:permission="android.permission.NFC">** 
```

当我删除粗体区域时，我能够安装应用程序并运行已安装的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:29:43.067

尝试`<uses-permission ... />`而不是`<permission ... />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:29:48.390

您需要在您的清单中，而是对标签`<uses-permission android:name="android.permission.NFC" />`进行自己的许可。`<permission>`

# php - 在提交点击时翻译文本框中的语言

> ID：13677631
> 
> 赞同：1
> 
> 时间：2012-12-03T05:25:01.110
> 
> 标签：php, zend-framework, zend-translate

我是 Zend 框架的初学者。我有一个简单的表单，其中包含一个文本框和一个提交按钮。当我点击提交时，我想翻译该文本框中的语言，并且我想打印翻译后的语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:48:38.870

我明白了..有用的参考在下面给出..

```
http://www.codeproject.com/KB/IP/GoogleTranslator.aspx 
```

# php - 数据表价格列排序不起作用

> ID：13677634
> 
> 赞同：2
> 
> 时间：2012-12-03T05:25:17.460
> 
> 标签：php, jquery, datatable

我将以下代码用于数据表：

```
$('#example').dataTable( {
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "aoColumnDefs": [
        { "bSortable": false, "aTargets": [0] },
        { "sType": "numeric", "aTargets": [ 5 ] }
    ],
    "aaSorting": [[ 1, 'asc' ]]
} ); 
```

这里是第 5 列。我将排序类型用作“数字”，但排序不适用于该列。列值是：

```
$205.22
$247.24
$869.95 
$215
...... 
```

这里有什么问题？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:33:03.650

美元符号不是数字。那可能是你的问题。

我相信 datatables 提供了一个[货币排序插件](http://datatables.net/plug-ins/type-detection)。

编辑回应：完成排序后添加美元符号（或查看我提到的货币排序插件）

# php - 是否可以使用 cygwin 在 Windows 机器上完全模拟 linux Web 服务器？

> ID：13677640
> 
> 赞同：2
> 
> 时间：2012-12-03T05:26:26.060
> 
> 标签：php, mysql, apache, cygwin

这是一个理论问题，希望您不要直接拒绝。

我遇到的问题是我同时从事前端和后端开发。基本上白天我是前端开发人员，涉及许多不同的浏览器、Photoshop 和其他设计/前端工作所需的工具。但到了晚上，我是沉重的 php 开发人员。

现在这是一个相当棘手的情况。作为后端开发人员，我真的很喜欢使用 linux 服务器，就像项目的生产服务器一样，这将更容易同步。但作为前端开发人员，我需要所有工具，这些工具主要适用于 Windows。

我一直在寻找虚拟 linux 机器以外的解决方案。最后我遇到了Cygwin。看起来很有希望，但我的问题是，我可以用这个工具完全模拟 linux 网络服务器吗？有什么限制吗？

如果您有任何意见，我将不胜感激，如果您知道一些优雅的方式/工具如何实现我的需要，请与我分享。

谢谢！

编辑：为什么我不想使用虚拟机：

1.  它需要太多的内存。如果我运行 IDE、Photoshop、虚拟机等。我的电脑很难赶上
2.  我正在寻找“无缝”的解决方案。可以在我的后台安静运行的东西，最好是作为服务。
3.  文件共享。我知道可以在 PC 和虚拟机之间共享文件，但我觉得这不是一个非常优雅的解决方案

我有更多的想法，但这是我到目前为止所能想到的。基本上 Linux 是相当了不起的，我简直不敢相信没有比安装整个 linux 系统更简单、更不可靠的解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:41:04.787

希望我能提供更多帮助，但就在 cygwins 网站上，它说“Cygwin 不是：一种在 Windows 上运行本机 Linux 应用程序的方法。”

也就是说，似乎有些人[在 Cygwin](https://stackoverflow.com/questions/4806846/how-do-i-install-mysql-on-cygwin)和[这里都有一个灯组](https://stackoverflow.com/questions/8375670/is-installing-php-on-cygwin-just-like-it-being-on-a-real-linux-server)

所以这听起来可能，但我必须重新问你为什么要这样做的问题。当您可以安装 virtualbox 和[交钥匙 linux 解决方案](http://www.turnkeylinux.org)以获得更容易排除故障的真实环境时，这似乎非常复杂。

如果你真的让它工作，我很想看到一篇关于你如何得到它的博客文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:34:00.343

这取决于您所说的“完全模拟”是什么意思。

您可以在 cygwin 中运行 apache Web 服务器，但[设置起来非常困难](http://www.naiksblog.info/shantibhushan/cygwinapachephp.html)。按照“完全模拟”的严格定义，这已经完全不同了，设置 Web 服务器的步骤与真正的 linux 机器不同。

鉴于 PHP 已经从您那里抽象出许多底层系统，您可能会发现沿着这条路走下去与仅仅为您的开发安装[wamp几乎没有什么区别（在大多数情况下）。](http://www.wampserver.com/en/)

除了在您的开发系统上安装虚拟机，您还可以获得一个[免费的亚马逊实例](http://aws.amazon.com/free/)（第一年）并在其上进行 Web 开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:34:08.230

您可以毫不费力地在 Windows 机器上运行 Apache 和 PHP。你甚至不需要 Cygwin。

我运行 Apache+PHP 并将其用于开发。我在转移到 Linux 机器时没有任何问题。我使用[FTP Sync](http://www.cyberkiko.com/page/FTPSync.aspx)来更新 Linux 机器，只需单击一个图标，它只会更新必要的文件。

# firefox - phpmyadmin 中的“找不到对象”错误

> ID：13677641
> 
> 赞同：1
> 
> 时间：2012-12-03T05:26:44.000
> 
> 标签：firefox, phpmyadmin

我在窗口 7 中安装了 xampp。但是每当我尝试单击 phpmyadmin 中的主页按钮时。网址变得奇怪，它不会重定向到

```
http://localhost/phpmyadmin/main.php?token=b0ffa519161e4c2e54c230a2fe97107a 
```

并重定向到以下内容。

```
http://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/://localhost/phpmyadmin/navigation.php?server=1&token=b0ffa519161e4c2e54c230a2fe97107a&db=&table=&lang=en-utf-8&collation_connection=utf8_general_ci 
```

所以它显示“找不到对象消息”，因为该 url 不应该是 . 但是当我尝试使用 Control + Click 时它完全没问题。请帮我修复它。它仅在我单击 phpmyadmin 左侧的四个图标、主页、SQL、问号和其他 SQL 图标时发生是 3.3.9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:00:31.293

如果仅如您所述仅使用特定浏览器，则可以清除浏览器缓存并检查..

在 Firefox 主菜单下单击工具->清除最近历史记录并清除所有内容。

# android - 弹出菜单的宽度 - 如何更改

> ID：13677643
> 
> 赞同：1
> 
> 时间：2012-12-03T05:26:52.667
> 
> 标签：android, popup

我正在使用以下代码来显示弹出菜单

```
PopupMenu popupMenu = new PopupMenu(MainActivity.this, v);
                      popupMenu.getMenuInflater().inflate(R.menu.popupmenu, popupMenu.getMenu());
                      popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {

                   @Override
                   public boolean onMenuItemClick(MenuItem item) {
                    Toast.makeText(MainActivity.this,
                      item.toString(),
                      Toast.LENGTH_LONG).show();
                    return true;
                   }
                  });

                      popupMenu.show();
                  } 
```

但是菜单覆盖了我的大部分屏幕区域。如何指定弹出菜单的大小？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T05:33:14.837

您必须创建一个自定义对话框。在此处查看有关如何执行此操作的官方文档：

[https://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog](https://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)

# c++ - STL 容器、SBO 和自定义分配器冲突

> ID：13677646
> 
> 赞同：7
> 
> 时间：2012-12-03T05:27:35.550
> 
> 标签：c++, optimization, stl, shared-memory, allocator

我最近一直在开发基于内存池的自定义分配器，该内存池在分配器的多个实例之间共享。

目的是分配器与 STL 和基于标准 C++ 的容器兼容，例如向量、双端队列、映射、字符串等

然而，特别是一些事情让我有些困惑。容器的各种实现，例如**std::vector**，**std::string**使用小缓冲区优化 - 基于堆栈的分配来满足小的初始内存需求。

例如 MSVC9.1 在 basic_string 类中有以下成员：

```
union _Bxty
{   // storage for small buffer or pointer to larger one
   _Elem _Buf[_BUF_SIZE];
   _Elem *_Ptr;
   char _Alias[_BUF_SIZE];  // to permit aliasing
} _Bx; 
```

我看不出在实例化此类容器时如何哄骗实现只使用提供的分配器而不使用 SBO。我问是因为实现自定义分配器的目的之一是能够在共享内存上下文中使用它们，其中共享内存的数量可能小于 SBO 限制，一些不同的实现可能会使用。

例如，我希望有两个 std::string 实例，每个进程共享一个可能小于或等于 SBO 上限的公共内存块。

可能相关：[std::vector 可以利用小缓冲区优化吗？](https://stackoverflow.com/questions/8190950/may-stdvector-make-use-of-small-buffer-optimization)

```
typedef std::vector<int,mysharedmemallocator> shmvtype;

shmvtype v(2,0); //<-- if SBO then error as memory is allocated on
                 //stack not via the allocator

v[1] = 1234;  //<-- if SBO then error as wrong piece of memory
              // is being modified. 
```

让我们看另一个不基于共享内存的示例，因为它似乎对某些人来说过于复杂。假设我想用一个分配器专门化我的 std::basic_string 或 std::vector 等，该分配器在将指针返回给调用实体之前用值 0xAB 填充它分配的内存，除了奇思妙想之外没有其他原因。

专用于此新分配器但也使用 SBO 的容器将不会将其基于 SBO 的内存填充为 0xAB 模式。例如：

```
typedef std::basic_string<char,myfillmemallocator> stype

stype s;
s.resize(2);

assert(s[0] == 0xAB); // if SBO this will fail. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T05:42:56.717

> 实现自定义分配器的目的之一是能够在共享内存上下文中使用它们

这可能是你打算用它做的，但这不是它们存在的原因。事实上，除了在 C++98/03 中，在对象之间*共享*分配的内存`basic_string`是不合法的。它们可以共享分配器对象，因此它们可以从同一个地方获取它们的内存。但是修改一个对象影响另一个不相关的对象是违法的；每个实例必须是分开的。

 *写入时复制字符串仅起作用，因为系统假定对字符的任何非常量访问都将写入该字符，从而执行复制。而在 C++11 中，甚至`basic_string`禁止做这样的写时复制风格的东西。

> 例如，我希望有两个 std::string 实例，每个进程共享一个可能小于或等于 SBO 上限的公共内存块。

如果不编写自己的课程，这是不可能的。分配器只控制内存的来源。您想要的是有保证的写时复制字符串或某种共享字符串类。

你想要的需要一个专门为此目的设计的容器类。*

# matlab - 我想使用 Matlab 对卫星轨迹图进行彩色编码

> ID：13677648
> 
> 赞同：6
> 
> 时间：2012-12-03T05:27:57.890
> 
> 标签：matlab, colors, plot, gradient

我在 Matlab 中创建了一个绘图，它随着时间的推移绘制几个 GPS 卫星的方位角和仰角。下面是绘制的 GPS 卫星轨迹的图像示例。

![卫星轨迹图](../Images/fcf353627bf849df803f6e24d9778f63.png)

但是，我还想`S_4`在同一个图上绘制指数（电离层引起的闪烁效应）。我想对每个 GPS 卫星路径进行颜色编码，以将高`S_4`索引显示为红色，将低`S_4`索引显示为蓝色。我有所有这些的数据，但我无法找到对每条 GPS 路径进行颜色编码的方法。

目前我知道每颗卫星在一天中的每一秒的位置（这就是我绘制轨迹的方式）。我也有`S_4`不同时间和不同卫星的索引值（`S_4`索引矩阵与卫星位置矩阵的大小不同）。

有任何想法吗？

这是我使用的功能。它使用一个矩阵作为输入`plotMat`：

```
plotMat=[svID(satellite id number), gpsSec, elevation(radians), azimuth(radians)] 
```

我的功能：

```
% find out from 'plotMat' if plotting satellite locations or trajectories in
% addition determine how many satellites are being tracked and how many
% samples for each satellite (# samples / satellite must always be equal)
gpsTime = plotMat(1,2);
i = 1;
t = gpsTime;
while ((i ~= size(plotMat,1)) & (t == gpsTime))
  i = i + 1;
  t = plotMat(i,2);
end
if (t == gpsTime)
  sats = i;
else
  sats = i - 1;
end;
samples = size(plotMat,1) / sats;
SVs = plotMat(1:sats,1);
elevation = plotMat(:,3);
azimuth = plotMat(:,4);
% initialize polar - plotting area
figure(10);clf;
axis([-1.4 1.4 -1.1 1.1]);
axis('off');
axis(axis);
hold on;
% plot circular axis and labels
th = 0:pi/50:2*pi;
x = [ cos(th) .67.*cos(th) .33.*cos(th) ];
y = [ sin(th) .67.*sin(th) .33.*sin(th) ];
plot(x,y,'color','w');
text(1.1,0,'90','horizontalalignment','center');
text(0,1.1,'0','horizontalalignment','center');
text(-1.1,0,'270','horizontalalignment','center');
text(0,-1.1,'180','horizontalalignment','center'); 
% plot spoke axis and labels
th = (1:6)*2*pi/12;
x = [ -cos(th); cos(th) ];
y = [ -sin(th); sin(th) ];
plot(x,y,'color','w');
text(-.46,.93,'0','horizontalalignment','center');
text(-.30,.66,'30','horizontalalignment','center');
text(-.13,.36,'60','horizontalalignment','center');
text(.04,.07,'90','horizontalalignment','center');
% plot titles
if (samples == 1)
  title('Satellite Position Plot');
  subtitle = sprintf('GPS time : %.2f sec',plotMat(1,2));
else
  title('Satellite Trajectory Plot');
  subtitle = sprintf('GPS time range : %.2f sec to %.2f sec', ...
                     plotMat(1,2),plotMat(size(plotMat,1),2));
  text(-1.6,1,'SVID/Last Position','color','r');
  text(-1.6,.9,'Positive Elevation','color','y');
  text(-1.6,.8,'Negative Elevation','color','b');
end
text(0,-1.3,subtitle,'horizontalalignment','center');
% plot trajectories (or positions) and label the last postion with the
% satellite SV id; in addition, last postions are in red, otherwise position
% elevations are yellow and negative elavations are blue
%
% loop through samples
for s = 1:samples       
  % plot each satellite location for that sample
  for sv = 1:sats
    % check if positive or negative elevation
    if (elevation((s - 1) * sats + sv) < 0)
      elNeg = 1;
    else
      elNeg = 0;
    end
    % convert to plottable cartesian coordinates
    el = elevation((s - 1) * sats + sv);
    az = azimuth((s - 1) * sats + sv);
    x = (pi/2-abs(el))/(pi/2).*cos(az-pi/2);
    y = -1*(pi/2-abs(el))/(pi/2).*sin(az-pi/2);
    % check for final sample
    if (s == samples)
      plot(x,y,'r*');
      text(x,y+.07,int2str(SVs(sv)), ...
           'horizontalalignment', ...
           'center','color','r');
    else
      % check for +/- elevation
      if (elNeg == 0)
        plot(x,y,'y.');
      else
        plot(x,y,'b.');
      end
    end
  end
end

axis equal; 
```

在前面的代码中，我没有添加`S_4`索引。以下代码将闪烁 ( `S_4`) 数据上的 GPS 秒数与具有卫星位置数据的 GPS 秒数进行比较。矩阵`scint.mat`指闪烁数据，而`txinfo.mat`指卫星位置数据。此代码创建一个与 GPS 秒数和卫星识别号一致的组合代码。

```
load('scint_324_first')
scint = scint';

load('txinfo_324_first_wrw')
txinfo = txinfo';

k = 0;

for i = 1:length(scint)
    disp(num2str(i))
    for j = 1:length(txinfo)
        if scint(i,2) == txinfo(j,2) && scint(i,15) == txinfo(j,8)
            k = k+1;
            combo(k,:) = [scint(i,:) txinfo(j,:)];
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:44:45.893

如果 S_4 值随时间变化，颜色编码是否会在单行内变化？

这可能不是最有效的方法，但您可以只为每条轨道画线。喜欢

```
s4code = [1 0 0; 0 0 1]; % blue & red 

for i = time_vector
 if s4(i) > something
  s = 2
 else 
  s = 1
 end
 line(x(i:(i+1)), y(i:(i+1)), 'color', s4code(s, :))
end 
```

关于大小不同的轨道数据和 s4 数据...使它们具有相同的大小... interp1，例如 ;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T08:03:03.773

如果您使用极坐标图进行绘图，请尝试使用[3D 极](http://www.mathworks.com/matlabcentral/fileexchange/13200-3d-polar-plot)坐标图（Ken Garrard 的 FEX 代码）

![在此处输入图像描述](../Images/db3b5e04d0108eea80467871e9ab000d.png)

如果您正在使用`plot`，请尝试[彩色线或散点图](http://www.mathworks.com/matlabcentral/fileexchange/19476-colored-line-or-scatter-plot)或[cline.m](http://www.mathworks.com/matlabcentral/fileexchange/3747-cline-m)（再次 FEX 文件） ![在此处输入图像描述](../Images/a65f286bc5e4a58eada23c8635a19e63.png)

最后的情节是由：

```
x = 1:300
color_line(x,sin(x/20),sin(x/20)) 
```

# android - 使用 Android 4.0.3 在 webview 中运行 javascript 的问题

> ID：13677649
> 
> 赞同：1
> 
> 时间：2012-12-03T05:28:35.613
> 
> 标签：android, android-webview, android-version

我正在做一些事情。Webview 我遇到了令人难以置信的问题。我无法在 android 版本 4.0.3 中使用 webview 运行 javascript。我正在调用包含 java 脚本的网页。我可以使用剩余的所有版本 4.0.3 来运行它。这个特定版本是全球性问题还是我做错了什么？

这是我的代码：

```
mMainWebView = (WebView) findViewById(R.id.MainWebView);
mMainWebView.getSettings().setUserAgentString("Mozilla/5.0 (X11; Linux x86_64)    AppleWebKit/534.36 (KHTML, like Gecko) Chrome/13.0.766.0 Safari/534.36");
mMainWebView.getSettings().setJavaScriptEnabled(true);
mMainWebView.getSettings().setPluginState(PluginState.ON);
mMainWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(
            false);
mMainWebView.setWebChromeClient(new MyWebChromeClient());
mMainWebView.loadUrl("http://mypage.aspx?Go=Go&IMEI=11111111&MAC=00:00:00:00:00:00"); 
```

我在网页上的 Javascript：

```
javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl11", "", false, "", "http://mypage.com", false, true)) 
```

请帮助我提出你最好的建议。

谢谢，

# video - MPEG-TS文件音视频帧长

> ID：13677652
> 
> 赞同：2
> 
> 时间：2012-12-03T05:29:22.617
> 
> 标签：video, video-processing, mpeg

我可以发现MPEG2 TS文件中每个视频（I，P，B）和音频帧的字节长度，而不是逐字节读取帧内容（例如从NAL单元头）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T12:02:28.713

在 MPEG-TS 文件中，在 PES 层中，有一个称为“PES 长度”的字段，其中包括所有数据，但没有 PES 标头。要准确提取此信息，您必须了解每帧是否有 PES 标头。唉，在大多数视频中，该字段通常为 0，唯一真正计算每帧字节数的方法是在 ES 级别的视频起始码之间。

# c# - NServiceBus F5 负载均衡订阅者不使用分发器

> ID：13677655
> 
> 赞同：2
> 
> 时间：2012-12-03T05:29:38.483
> 
> 标签：c#, load-balancing, nservicebus, nservicebus-distributor

我们正在寻找使用我们的 F5 来负载平衡 MSMQ 消息而不使用分发器（我们的 windows 框当前没有集群）。

使用数据库订阅存储和发布到 VIP，3 个订阅者会向发布者注册吗？（即 VIP 和两个订阅者？）

使用 MSMQ 事务队列将 1 个订阅者只处理消息吗？因为我们只想发布到 VIP，所以 1 台服务器会处理消息以及对原始服务器的回调会成功吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:52:25.267

MSMQ 不适用于负载均衡器后面的事务消息：

[http://blogs.msdn.com/b/johnbreakwell/archive/2009/03/19/load-balancing-msmq-a-brief-discussion.aspx](http://blogs.msdn.com/b/johnbreakwell/archive/2009/03/19/load-balancing-msmq-a-brief-discussion.aspx)

# algorithm - 我应该实施什么算法来对房间清洁机器人进行编程？

> ID：13677658
> 
> 赞同：0
> 
> 时间：2012-12-03T05:29:51.840
> 
> 标签：algorithm, theory, robot

对于这个问题，假设以下事情是未知的：

*   房间的大小和形状
*   机器人的位置
*   任何障碍物的存在

还假设以下事情是不变的：

*   房间的大小和形状
*   所有（如果有的话）障碍物的数量、形状和位置

并假设机器人具有以下属性：

*   它只能以绝对单位的增量向前移动，并以度数为单位转动。此外，如果移动成功，则移动操作将返回 true；如果由于障碍物而移动失败，则返回 false
*   相当无限的电源（假设它是放置在空间站上的太阳能机器人，它始终面向太阳，没有天花板）
*   每次移动和旋转都以绝对精度进行（不用担心数据不可靠）

我被问到这个问题的一个更简单的版本（房间是一个矩形并且没有障碍物，你将如何移动它以保证你至少可以在每个部分上移动一次）并且在我开始想知道如果你能解决这个问题之后'不保证形状或障碍物的存在。我已经开始使用[Dijkstra 的算法来](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)研究这个问题，但我很想听听其他人是如何处理这个问题的（或者对此是否有公认的答案？（Roomba 是如何做到的？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:39:18.413

看看 SLAM [http://openslam.org/](http://openslam.org/)和更多的 [Wiki](http://en.wikipedia.org/wiki/Simultaneous_localization_and_mapping)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:33:56.633

你应该进一步调查

> Mark de Berg：计算几何算法和应用第 13 章机器人运动规划

# video - 将视频从应用程序上传到 YouTube iphone sdk

> ID：13677660
> 
> 赞同：1
> 
> 时间：2012-12-03T05:29:54.537
> 
> 标签：video, youtube-api, gdata-api, uploading

我正在尝试将在我的应用中拍摄的视频上传到 YouTube。我已将标题、用户名、密码、电影路径、长度、关键字和类别与我的应用程序密钥联系起来。然而，当我尝试上传时，我收到以下消息。

2012-12-02 21:29:33.235 我的小世界应用程序 [12790:907] *** -GDataServiceBase fetchObjectWithURL:objectClass:objectToPost:ETag:httpMethod:delegate:didFinishSelector:completionHandler:retryInvocationValue:ticket:, /Users/nilesh 中的断言失败/gdata-objectivec-client-read-only/Source/BaseClasses/GDataServiceBase.m:549 2012-12-02 21:29:33.238 my little world app[12790:907] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：'需要 GTMHTTPUploadFetcher'

这是我用来尝试上传的代码。

```
- (IBAction)publish: (id) sender;{

    self.mProgressView.hidden =NO;

    NSString *audioName = [pictureDictionary4 objectForKey:@"photoVideokey"];
    NSArray *pathsa = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectorya = [pathsa objectAtIndex:0];
    //Get a full path to the image in the documents directory.
    NSString *fullPatha = [documentsDirectorya stringByAppendingPathComponent:audioName];
    NSError *error = nil;
    NSDictionary *attributes = [[NSFileManager defaultManager]
                                attributesOfItemAtPath:fullPatha error:&error];

    if (!error) {
        NSNumber *size = [attributes objectForKey:NSFileSize];
    }

    NSString *devKey = @"xxxxxx";

    GDataServiceGoogleYouTube *service = [self youTubeService];
    [service setYouTubeDeveloperKey:devKey];

    NSString *username = self.accountView.text;
  NSURL *url = [GDataServiceGoogleYouTube youTubeUploadURLForUserID:username];
    NSData *data = [NSData dataWithContentsOfFile:fullPatha];
    NSString *filename = [pictureDictionary4 objectForKey:@"photoVideokey"];

    // gather all the metadata needed for the mediaGroup
    NSString *titleStr =self.movieNameField.text;
    GDataMediaTitle *title = [GDataMediaTitle textConstructWithString:titleStr];

    NSString *categoryStr = self.catagoryField.text;
    GDataMediaCategory *category = [GDataMediaCategory mediaCategoryWithString:categoryStr];
    [category setScheme:kGDataSchemeYouTubeCategory];

    NSString *descStr = self.descpView.text;
    GDataMediaDescription *desc = [GDataMediaDescription textConstructWithString:descStr];

    NSString *keywordsStr = self.tagsField.text;
    GDataMediaKeywords *keywords = [GDataMediaKeywords keywordsWithString:keywordsStr];

    BOOL isPrivate = NO;

    GDataYouTubeMediaGroup *mediaGroup = [GDataYouTubeMediaGroup mediaGroup];
    [mediaGroup setMediaTitle:title];
    [mediaGroup setMediaDescription:desc];
    [mediaGroup addMediaCategory:category];
    [mediaGroup setMediaKeywords:keywords];
    [mediaGroup setIsPrivate:isPrivate];

    NSString *mimeType = [GDataUtilities MIMETypeForFileAtPath:fullPatha
                                               defaultMIMEType:@"video/mp4"];

    // create the upload entry with the mediaGroup and the file data
    GDataEntryYouTubeUpload *entry;
    entry = [GDataEntryYouTubeUpload uploadEntryWithMediaGroup:mediaGroup
                                                          data:data
                                                      MIMEType:mimeType
                                                          slug:filename];

    SEL progressSel = @selector(ticket:hasDeliveredByteCount:ofTotalByteCount:);
    [service setServiceUploadProgressSelector:progressSel];

    GDataServiceTicket *ticket;
    ticket = [service fetchEntryByInsertingEntry:entry
                                      forFeedURL:url
                                        delegate:self
                               didFinishSelector:@selector(uploadTicket:finishedWithEntry:error:)];

    [self setUploadTicket:ticket];

    NSLog(@"%@",length.text);
    NSLog(@"%@",number.text);
     NSLog(@"%@",accountView.text);
     NSLog(@"%@",tagsField.text);
     NSLog(@"%@",catagoryField.text);
     NSLog(@"%@",movieNameField.text); 
     NSLog(@"%@",descpView.text);
     NSLog(@"%@",PasswordDisplayField.text);
     NSLog(@"%@",ViewingField.text);

    NSLog(@"%@",username);
    NSLog(@"%@",url);
    NSLog(@"%@",filename);
    NSLog(@"%@",titleStr);
    NSLog(@"%@",category);
    NSLog(@"%@",categoryStr);
    NSLog(@"%@",descStr);
    NSLog(@"%@",desc);
    NSLog(@"%@",keywords);
     NSLog(@"%@",keywords);
     NSLog(@"%@",keywordsStr);

}

    - (GDataServiceGoogleYouTube *)youTubeService {

        static GDataServiceGoogleYouTube* service = nil;

        if (!service) {
            service = [[GDataServiceGoogleYouTube alloc] init];

            [service setServiceShouldFollowNextLinks:YES];
            [service setIsServiceRetryEnabled:YES];
        }

        // update the username/password each time the service is requested
        NSString *username = [accountView text];
        NSString *password = [PasswordDisplayField text];

        if ([username length] > 0 && [password length] > 0) {
            [service setUserCredentialsWithUsername:username
                                           password:password];
        } else {
            // fetch unauthenticated
            [service setUserCredentialsWithUsername:nil
                                           password:nil];
        }

        NSString *devKey =  @"AI39si5rnzA1o82wzQj_kFFJBQRNEPv29OKD9hx6RxLPzvacvfvLFi_uI9eNj0uq8Cul8VQnBbDs4CAvq7ViKq-RnVCgh3OVBQ";
        [service setYouTubeDeveloperKey:devKey];

        return service;
    }

    // progress callback
    - (void)ticket:(GDataServiceTicket *)ticket
hasDeliveredByteCount:(unsigned long long)numberOfBytesRead
ofTotalByteCount:(unsigned long long)dataLength {

    [mProgressView setProgress:(double)numberOfBytesRead / (double)dataLength];
}

    // upload callback
    - (void)uploadTicket:(GDataServiceTicket *)ticket
finishedWithEntry:(GDataEntryYouTubeVideo *)videoEntry
error:(NSError *)error {
    if (error == nil) {
        // tell the user that the add worked
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Uploaded!"
                                                        message:[NSString stringWithFormat:@"%@ succesfully uploaded",
                                                                 [[videoEntry title] stringValue]]
                                                       delegate:nil
                                              cancelButtonTitle:@"Ok"
                                              otherButtonTitles:nil];

        [alert show];

    } else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error!"
                                                        message:[NSString stringWithFormat:@"Error: %@",
                                                                 [error description]]
                                                       delegate:nil
                                              cancelButtonTitle:@"Ok"
                                              otherButtonTitles:nil];

        [alert show];

    }
    [mProgressView setProgress: 0.0];

    [self setUploadTicket:nil];
}

#pragma mark -
#pragma mark Setters

    - (GDataServiceTicket *)uploadTicket {
        return mUploadTicket;
    }

    - (void)setUploadTicket:(GDataServiceTicket *)ticket {

        mUploadTicket = ticket;
    } 
```

我真的很感激这方面的一些方向。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:37:27.583

听起来您缺少[Google Toolbox for Mac - HTTP Fetcher](http://code.google.com/p/gtm-http-fetcher/)依赖项？

一般来说，如果您在专门的[问题跟踪器](http://code.google.com/p/gdata-objectivec-client/issues/list)或[讨论组](https://groups.google.com/forum/?fromgroups#!forum/gdata-objectivec-client)中提问，您可能会在特定于 Objective-C GData 客户端库的问题上获得更多帮助，因为这实际上是一个实现问题，而不是一般的 YouTube API 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T16:42:34.957

我终于通过将所有正确的 .h 文件添加到我的应用程序并导入它们（包括正确的 GTMHTTPUploadFetcher 文件）使这部分工作。谢谢您的帮助。

# java - Java：将额外的标记动态附加到字符串

> ID：13677661
> 
> 赞同：0
> 
> 时间：2012-12-03T05:29:55.640
> 
> 标签：java, file-io

我正在解析一个文件，有时我得到一条小线或大线。如果线很小，是否可以在 Line 上附加额外的标记？

这是我的程序

```
private static String[] LISTOFFIELDS = null;

String fields = "A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z";

String line = "OIUU||HHH|INBVC INB|PP|NN|OO|PPPPP||";

String[] totaltokens = line.split("\\|", LISTOFFIELDS.length);

private static HashMap<String, Object> ParsedValues(String[] totaltokens) {

        HashMap<String, Object> map = new HashMap<String, Object>();

        for (int i = 0; i < LISTOFFIELDS.length; i++) {
            String fieldName = LISTOFFIELDS[i];
            map.put(fieldName, totaltokens[i]);
        }

    } 
```

如您所见，如果线路很小，我会得到

线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：10

**如果我将字符串字段减少为字符串字段=“A|B|C|D|E|F|G|H|”，我可以避免 ArrayIndexOutOfBoundsException；**

**是否可以避免 Exception ，而不对 String 字段进行任何修改？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:39:40.143

在拆分并获取其子字符串之前检查字符串的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:41:05.740

只需减少循环中的迭代次数：

```
int size = Math.min(LISTOFFIELDS.length, totaltokens.length);
for (int i = 0; i < size; i++) {
    String fieldName = LISTOFFIELDS[i];
    map.put(fieldName, totaltokens[i]);
} 
```

# java - 无效的字符常量

> ID：13677664
> 
> 赞同：-1
> 
> 时间：2012-12-03T05:30:15.267
> 
> 标签：java, character, constants

我需要这样做：

```
if(']' == body.charAt(body.length()-1) || '锛� == body.charAt(body.length()-1) || '銆� == body.charAt(body.length()-1)){
    score++;
} 
```

我收到一条错误消息：无效的字符常量

为什么？我怎样才能克服它？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T05:41:52.347

查看您的源代码，它似乎是Java。此外，这似乎已损坏：

```
'锛� == body.charAt(body.length()-1) 
```

并且可能应该阅读

```
'锛' == body.charAt(body.length()-1) 
```

考虑到这一点，您有两个选择：

1.  确保您的源代码保存为 UTF-8。有几种方法可以检查这一点，在 Windows 上，我建议使用 Notepad++ 并选择*不带 BOM*选项的另存为 UTF-8。

2.  `\uHHHH`对非 ASCII 常量使用语法。据我所知，您的 锛 字符应编码为`U+951B`，因此您可以改用它： `'\U951B' == body.charAt(body.length()-1)`

# compiler-errors - 如何将外部程序集与 BCC 一起使用

> ID：13677665
> 
> 赞同：0
> 
> 时间：2012-12-03T05:30:18.907
> 
> 标签：compiler-errors, turbo-c

我有一个非常基本的 main.c 程序，我正在尝试编译，但我无法使用简单的外部汇编函数编译它。

让我告诉你我有什么

**主.c：**

```
extern void putc(char c);

int main()
{
    return (0);
} 
```

**终端：**

```
$ bcc -c main.c
main.c:13.21: error: need ')'
main.c:13.24: error: c not in argument list
main.c:13.24: error: need ';'
main.c:13.24: error: need '{'
main.c:13.24: error: bad expression
main.c:15.3: error: bad expression
main.c:15.8: error: need ';'
main.c:16.1: error: need ';'
main.c:17.15: error: compiler bug? - attempting to load non-scalar non-pointer
main.c:eof: error: need '}'
$ 
```

**更新：**
如果我将代码更改为

```
extern void putc(c) char c;

int main();
{
    return(0);
} 
```

然后我得到

```
$ bcc -c main.c 
main.c:8.11: error: main not in argument list
main.c:10.14: error: compiler bug? - attempting to load non-scalar non-pointer
$ 
```

# coding-style - 将方法参数作为对象提取是个好主意吗？

> ID：13677669
> 
> 赞同：1
> 
> 时间：2012-12-03T05:30:45.473
> 
> 标签：coding-style, refactoring

[http://www.jetbrains.com/idea/webhelp/extract-parameter-object.html](http://www.jetbrains.com/idea/webhelp/extract-parameter-object.html)

对于具有大量参数的方法，我一直发现将方法参数提取为对象是一个好主意。

```
public void Method(A a, B b, C c, D d, E e); 
```

变成

```
public class Wrapper {A; B; C; D}

public void Method(Wrapper wrapper); 
```

这使我能够：

*   在我的代码中具有更好的可读性
*   在 Wrapper 类中执行这些参数的验证，并在需要时跨层/组件重用它。
*   提供不那么脆弱的方法签名。

您对此是否有任何其他优点/缺点可以帮助说服正在编写具有大量参数的方法的人？如果这有所作为，我正在编写 C# 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:03:40.573

我能想到的唯一缺点是在您的系统中有一个额外的抽象，要求您在访问之前提取（尽管微不足道）实际数据。我什至不确定这是否可以称为劣势。

参数封装最重要的优点是拥有一个健壮的、定义良好的接口，可以适应未来的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:36:35.003

更深层次的优势是，当您将参数包装在新类中时，您会意识到某些行为可以移动到新类中。这是因为修改参数的方法的主体可能会类似地操作参数。将这种常见行为移到新类中可以让您删除大量代码重复。参数验证只是可以移动到新类中的行为的一个示例。

# javascript - Javascript从嵌套函数中调用外部函数

> ID：13677678
> 
> 赞同：4
> 
> 时间：2012-12-03T05:31:49.140
> 
> 标签：javascript, function, function-calls, nested-function

拥有我认为应该是一个相对容易的问题来处理是一个主要的痛苦......我正在尝试做：

```
a.b("param", function(data)
{
     logger.debug("a.b(" + data.toString() + ")");

     if (data.err == 0)
     {
           // No error, do stuff with data
     }
     else
     {
           // Error :(  Redo the entire thing.
     }
}); 
```

我的方法是尝试：

```
var theWholeThing = function() {return a.b("param", function(data)
{
     logger.debug("a.b(" + data.toString() + ")");

     if (data.err == 0)
     {
           // No error, do stuff with data
     }
     else
     {
           // Error :(  Redo the entire thing.
           theWholeThing();
     }
})}; 
```

上面的问题是前者确实有效（发生错误时没有处理除外），后者根本不会打印日志消息......它好像“theWholeThing（）”调用没有像我认为的那样工作它应该（再次调用整个事情）。

这里一定有一些微妙的错误，有什么提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T05:34:42.107

首先，直接回答您的问题，听起来您第一次忘记实际调用该函数。尝试：

```
var theWholeThing = function() {return a.b("param", function(data)
{
     logger.debug("a.b(" + data.toString() + ")");

     if (data.err == 0)
     {
           // No error, do stuff with data
     }
     else
     {
           // Error :(  Redo the entire thing.
           theWholeThing();
     }
})};

theWholeThing(); // <--- Get it started. 
```

但是，这可以在命名的 IIFE（立即调用的函数表达式）中更优雅地实现：

```
// We wrap it in parentheses to make it a function expression rather than
// a function declaration.
(function theWholeThing() {
    a.b("param", function(data)
    {
         logger.debug("a.b(" + data.toString() + ")");

         if (data.err == 0)
         {
               // No error, do stuff with data
         }
         else
         {
               // Error :(  Redo the entire thing.
               theWholeThing();
         }
    });
})(); // <--- Invoke this function immediately. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:49:59.590

如果把方法分开，用变量来表示，事情就清楚了。您只需要将您的 ab 和匿名函数视为方法引用。我认为此代码示例可以提供帮助：

```
var theWholeThing = a.b, //this is a reference of b method
    par = "param",
    callback = function(data){
     logger.debug("a.b(" + data.toString() + ")");

     if (data.err == 0)
     {
           console.log("no error");    
     }
     else
     {
           console.log("Error");
           // theWholeThing reference can be accessed here and you can pass your parameters along with the callback function using variable name 
           theWholeThing("param", callback); 
     }
}; //declare the callback function and store it in a variable

theWholeThing("param", callback); //invoke it 
```

​</p>

# php - 如何更新 HTML 表单数据？

> ID：13677679
> 
> 赞同：-5
> 
> 时间：2012-12-03T05:31:58.950
> 
> 标签：php, html

我有一个简单的 HTML 表单，其中包含多个字段（如 id、姓名、联系人和电子邮件）。用户填写表单并提交后，数据将存储在数据库中，同时（甚至在同一页面上），表格将显示已存储的数据。

现在，我想在表格底部放置一个更新按钮。当用户点击它时，他们可以查看表单，该表单将预先填写他们之前输入的数据，因此他们不需要输入两次数据。

我怎样才能做到这一点？如何根据 id 字段捕获其他字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:16:19.563

您将不得不使用如下所述的 javascript 和 ajax 代码。试着理解它。

```
<script type="text/javascript">  
$(document).ready(function(e) {
    $.ajax({
        //Your ajax here...
        success: function(response) {
            //Your code of showing inserted data in table....
            //get the inserted userid from response and set update button's ONCLICK attribute as mentioned below
            var userid = getuseridfromresponse;
            $("#updatebuttonid").attr("onclick","updaterecord("+userid+")");
        }
    });
});
function updaterecord(userid){
    $.ajax({
        //your ajax here you
        //send all the details from php code using JSON or whatever you are using.
        success: function(response) {
            //store all the data into js variables.
            var userid = response.userid;
            var fullname = response.fullname;
            // and so on..
            $("#fullname").val(fullname); //this will set the textbox value to fullname
            //and so on..
            $("#userid").val(userid); //this is a hidden input in inser form. by default it will be zero. you will need it while updating.
            $("#actionname").val("update"); //this is also hidden input in insert form. default value would be "insert"
            // you just need to check in php that which actionname you are getting.

            //if you will get actionname = insert Do insert code
            //if you will get actionname = update Do update code.
        }
    });
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:42:06.083

这些是简单的数据库操作。网上有很多教程，google一下。你可以参考[这个](http://www.developerdrive.com/2011/11/create-your-own-crud-app-with-mysql-and-php/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T05:43:14.807

如果您想在不刷新页面的情况下在页面上显示新条目，请使用`AJAX`..
否则刷新页面并用于`Select query`显示新条目。
对于第二个问题.. 使用`Select query`更新按钮按下然后你的`echo`每个字段这是一种简单的方法..`value``HTML input fields`

```
// php code
$result = mysql_query('Select * from table_name WHERE id = 1');
$row = mysql_fetch_assoc($result);
// use loop if query return multiple rows
// HTML code
<input type = "textbox" name="age" value="<?php echo $row['age'] ?>"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T06:56:29.017

带有更新按钮的表单需要一个`hidden`id 字段。然后 PHP 需要从数据库中选择对应 id 的记录，并以表格的形式显示出来。

如果每一页只有一条记录，您可以将预先填写的表格放在与`div`表格相同的页面上。然后，您可以使用 JavaScript 隐藏 `div`页面加载时间并显示`div`用户单击更新按钮的时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T05:37:15.327

单击表数据后，将其 ID 传递给它。然后检查 ID 并从数据库中获取数据并以 html 形式设置值。如果传递了 ID，则应该进行更新，如果没有 ID，则应该是新的插入。

# python - Python：组合然后排序列表

> ID：13677682
> 
> 赞同：0
> 
> 时间：2012-12-03T05:32:15.017
> 
> 标签：python, list, sorting

我有两个清单；说一个水果和另一个长度相等但数字无序的水果：

例如：

```
Fruits = ['apple', 'banana', 'pineapple', 'kiwifruit'],
Numbers = [3, 2, 4, 1] 
```

我怎样才能首先分配号码

*   3到苹果，
*   2香蕉，
*   4菠萝和
*   1到猕猴桃

然后根据他们的新号码对他们进行排序？

IE

```
sortedlist = ['kiwifruit', 'banana', 'apple', 'pineapple']. 
```

到目前为止，我的尝试包括 enumerate 函数和 sorted 函数，但我似乎无法分配然后排序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T05:35:37.933

```
sortedlist = [x[1] for x in sorted(zip(Numbers, Fruits))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:36:55.070

分配可以这样完成

```
In [25]: d = dict(zip(Numbers, Fruits))

In [26]: d
Out[26]: {1: 'kiwi', 2: 'banana', 3: 'apple', 4: 'pineapple'} 
```

然后您可以根据字典的键进行排序

```
In [27]: [d[i] for i in sorted(d.keys())]
Out[27]: ['kiwi', 'banana', 'apple', 'pineapple'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:38:04.590

numpy 很酷

```
import numpy as np
fruits = np.array(['apple', 'banana', 'pineapple', 'kiwi'])
sorted_list = fruits[[2, 1, 3, 0]] #note its 0 based indexing ...
print sorted_list 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T05:42:04.697

怎么样：

```
Fruits = ['apple', 'banana', 'pineapple', 'kiwi']
Numbers = [3, 2, 4, 1]

New_Fruits = [ Fruits[idx-1] for idx in Numbers ] 
```

这仅适用于您的索引列表 ( `Numbers`) 是顺序整数。如果 . 甚至会更干净一点`Numbers = [ 2, 1, 3, 0 ]`。

优点是它避免了对 的调用`zip`，因此它可能会更有效率。缺点是不太通用。您需要有一个适当的索引列表才能使其工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-23T16:35:38.553

```
Fruits = ['apple', 'banana', 'pineapple', 'kiwifruit'],
Numbers = [3, 2, 4, 1]
new = []
for x in range(len(Numbers)):
    new.append([Fruits[x],Numbers[x]])
new.sort(key=lambda x: x[1])
final = []
for x in new:
     final.append(x[0]) 
```

final是最终名单

# r - PerformanceAnalytics 中的 CAPM.alpha 错误

> ID：13677687
> 
> 赞同：2
> 
> 时间：2012-12-03T05:32:32.213
> 
> 标签：r, performanceanalytics

当我尝试从 PerformanceAnalytics 参考的第 22 页运行示例时，我收到一条错误消息。见下文。

PS我是一个初学者，这对我来说从来没有用过。此外，我的根本问题是，在尝试将 table.CAPM 与我自己的数据一起使用时，我遇到了完全相同的错误。

感谢您的任何帮助。

```
> search()
[1] ".GlobalEnv"                   "package:PerformanceAnalytics"
[3] "package:xts"                  "package:zoo"                 
[5] "package:stats"                "package:graphics"            
[7] "package:grDevices"            "package:utils"               
[9] "package:datasets"             "package:methods"             
[11] "Autoloads"                    "package:base"                
> version
           _                            
platform       x86_64-w64-mingw32           
arch           x86_64                       
os             mingw32                      
system         x86_64, mingw32              
status                                      
major          2                            
minor          15.2                         
year           2012                         
month          10                           
day            26                           
svn rev        61015                        
language       R                            
version.string R version 2.15.2 (2012-10-26)
nickname       Trick or Treat               
> data(managers)
> CAPM.alpha(managers[,1,drop=FALSE], managers[,8,drop=FALSE], Rf=.035/12)
Error in lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...) : 
  0 (non-NA) cases
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:58:44.917

该错误不在您的代码中，而是在 R 包本身中。它显示在[此处](http://www.r-project.org/nosvn/R.check/r-release-windows-ix86+x86_64/PerformanceAnalytics-00check.html)的包验证检查中，并且可以通过以下方式复制：

```
library(PerformanceAnalytics)
example(CAPM.alpha) 
```

错误似乎在 Return.excess.R 的第 40 行。它应该替换为：

```
xR = coredata(as.xts(R))-coredata(as.xts(Rf)) 
```

在实践中解决此问题的最简单方法是运行：

```
require(utils)
assignInNamespace(
  "Return.excess",
  function (R, Rf = 0)
  { # @author Peter Carl
    # edited by orizon
      # .. additional comments removed
      R = checkData(R)
      if(!is.null(dim(Rf))){
          Rf = checkData(Rf)
          indexseries=index(cbind(R,Rf))
          columnname.Rf=colnames(Rf)
      }
      else {
          indexseries=index(R)
          columnname.Rf=Rf
          Rf=xts(rep(Rf, length(indexseries)),order.by=indexseries)
      }
      return.excess <- function (R,Rf)
      { 
          xR = coredata(as.xts(R))-coredata(as.xts(Rf)) #fixed
      }
      result = apply(R, MARGIN=2, FUN=return.excess, Rf=Rf)
      colnames(result) = paste(colnames(R), ">", columnname.Rf)
      result = reclass(result, R)
      return(result)
  },
  "PerformanceAnalytics"
) 
```

然后您的原始命令有效：

```
> data(managers)
> CAPM.alpha(managers[,1,drop=FALSE], managers[,8,drop=FALSE], Rf=.035/12)
[1] 0.005960609 
```

请注意，我尚未验证该函数是否执行其声称的操作。

# apache - 每个用户的 ProFtpd 主目录

> ID：13677692
> 
> 赞同：1
> 
> 时间：2012-12-03T05:32:58.477
> 
> 标签：apache, ubuntu

我对 linux Ubuntu 很陌生，并从 Windows 迁移过来。

我遇到的问题与ftp有关。这就是我想要做的。我的网站位于/var/www。每个网站都有自己的根目录，例如 /var/www/site1 /var/www/site2

这就是我想要做的。我希望每个站点（目录）都有一个用户，这样他们就可以通过 ftp 访问他们的主目录。

看起来很简单，但做不到。任何帮助或方向表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:55:26.383

如果您希望每个站点都有一个用户，您可能需要在 apache 中创建虚拟主机，以便站点不是位于 /var/www 中，而是位于用户的主目录中。

然后，您可以允许用户通过 ftp 访问他们的主文件夹。这些是 Ubuntu 站点上提供的说明。[在此处](http://ubuntuforums.org/showthread.php?t=79588)访问它们

或者，您可以将用户添加为对位于 /var/www/ 下的文件夹具有正确权限的 FTP 用户。在 ProFTPd 网站上有很好的记录。

[这里](http://cviorel.easyblog.ro/2007/09/19/howto-create-a-ftp-server-with-user-access-proftpd/)有一个旧帖子，您可能仍然会发现有帮助

# ios - 更改 UIBarbuttonItems 颜色

> ID：13677703
> 
> 赞同：11
> 
> 时间：2012-12-03T05:33:48.600
> 
> 标签：ios, uinavigationbar, uibarbuttonitem

如何将`UIBarButtonItem's`颜色设置为绿色？我正在使用**iOS 4**，没有 tint 属性。请帮我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T05:41:51.857

在 iOS 4 中：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setBackgroundImage:[UIImage imageNamed:@"green.png"] forState:UIControlStateNormal];
button.frame=CGRectMake(0.0, 100.0, 60.0, 30.0);
[button setTitle:@"Green" forState:UIControlStateNormal];
[button addTarget:self action:@selector(yourAction) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *myButton = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

在这里，您需要一个绿色图像来执行此操作，您正在使用该图像创建一个自定义按钮并将其设置为 UIBarButtonItem 的视图。

在 iOS 5 中，您可以使用：

```
[[UIBarButtonItem appearance] setTintColor:[UIColor greenColor]]; 
```

请查看以下链接了解更多信息：

1.  [UI外观协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)
2.  [用户界面定制](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T06:02:25.090

请尝试以下代码。

```
self.navigationController.navigationBar.tintColor = [UIColor greenColor];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:nil action:NULL]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T16:03:55.857

我知道这是一个老问题，但如果有人使用 a `customView`，您可以尝试：

```
myButton.customView.tintColor = [UIColor blackColor]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-30T09:25:00.433

在**斯威夫特 4**

这就是如何将自定义颜色添加到 UIBarButtonItem

```
let barButtonItem = UIBarButtonItem.init(
        title: "Paired",
        style: .done,
        target: self,
        action: #selector(self.myAction(sender:))
      )
barButtonItem.tintColor = UIColor.init(red: 247/255, green: 65/255, blue: 126/255, alpha: 1.0)
self.navigationItem.rightBarButtonItem = barButtonItem 
```

# android - 在应用程序中打开一个较小的应用程序？

> ID：13677704
> 
> 赞同：0
> 
> 时间：2012-12-03T05:33:57.963
> 
> 标签：android

我希望能够在应用程序中打开一个应用程序的小版本，我可以为其创建自定义宽度/高度。所以在某种程度上，想想一个网络浏览器，我希望能够在主应用程序中“浏览”任何应用程序。是否可以编写这样的程序？在应用程序中运行应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T05:37:12.207

您可以通过[Intent](https://developer.android.com/reference/android/content/Intent.html)启动另一个应用程序。但是在您的应用程序的视图中运行另一个应用程序是不可能的。

看：

[在应用程序内启动 Android 应用程序？](https://stackoverflow.com/questions/4073671/launching-android-app-within-an-app?rq=1)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T05:38:29.403

[我们可以使用 Fragments http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)来实现这种功能。这可能是一个开始...

# ios - 推特 iOS 流

> ID：13677710
> 
> 赞同：1
> 
> 时间：2012-12-03T05:34:25.790
> 
> 标签：ios, ios5, twitter, twitter-oauth

我的应用程序会自动发送推文，我想知道这个流程是否允许。

用户单击我的一个页面上的 twitter 连接按钮，然后将它们定向到设置中的登录页面。他们登录后，我会向他们的页面发送一条自动推文。

这是合法的吗？只问这在法律上是否可行。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:39:23.380

Twitter 有一个页面告诉开发人员这些事情。

[https://dev.twitter.com/terms/api-terms](https://dev.twitter.com/terms/api-terms)

见第 II 节第 1 小节 B 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:36:18.237

**就合法性而言，如果他们知道**该应用会为他们发推文，我想这很好。

# scala - Scala：使用输出流时打印分隔符

> ID：13677714
> 
> 赞同：0
> 
> 时间：2012-12-03T05:34:50.720
> 
> 标签：scala

当我们需要连接一个字符串数组时，我们可以使用 mkString 方法：

```
val concatenatedString = listOfString.mkString 
```

但是，当我们有一个很长的字符串列表时，连接字符串可能不是一个好的选择。在这种情况下，直接打印到输出**流**会更合适，将其写入输出流很简单：

```
listOfString.foreach(outstream.write _) 
```

但是，我不知道附加分隔符的巧妙方法。我尝试过的一件事是使用索引循环：

```
var i = 0
for(str <- listOfString) {
  if(i != 0) outstream.write ", "
  outstream.write str
  i += 1
} 
```

这行得通，但它太罗嗦了。虽然我可以让一个函数封装上面的代码，但我想知道 Scala API 是否已经有一个函数做同样的事情。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T06:21:01.960

这是一个以更优雅的方式执行您想要的功能的函数：

```
def commaSeparated(list: List[String]): Unit = list match {
    case List() => 
    case List(a) => print(a)
    case h::t => print(h + ", ")
                 commaSeparated(t)
} 
```

递归避免了可变变量。

为了使其更具功能性风格，您可以传入要在每个项目上使用的功能，即：

```
def commaSeparated(list: List[String], func: String=>Unit): Unit = list match {
    case List() => 
    case List(a) => func(a)
    case h::t => func(h + ", ")
                 commaSeparated(t, func)
} 
```

然后通过以下方式调用它：

```
commaSeparated(mylist, oustream.write _) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T05:47:11.940

我相信你想要的是`mkString`.

的定义`mkString`：

```
scala> val strList = List("hello", "world", "this", "is", "bob")
strList: List[String] = List(hello, world, this, is, bob) 
```

`def mkString: String`

```
scala> strList.mkString
res0: String = helloworldthisisbob 
```

`def mkString(sep: String): String`

```
scala> strList.mkString(", ")
res1: String = hello, world, this, is, bob 
```

`def mkString(start: String, sep: String, end: String): String`

```
scala> strList.mkString("START", ", ", "END")
res2: String = STARThello, world, this, is, bobEND 
```

*编辑* 这个怎么样？

```
scala> strList.view.map(_ + ", ").foreach(print) // or .iterator.map
hello, world, this, is, bob, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T15:01:26.337

不适合并行化代码，但除此之外：

```
val it = listOfString.iterator
it.foreach{x => print(x); if (it.hasNext) print(' ')} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T06:37:18.697

**自我回答**：

我写了一个函数封装了原问题中的代码：

```
implicit def withSeparator[S >: String](seq: Seq[S]) = new {
  def withSeparator(write: S => Any, sep: String = ",") = {
    var i = 0
    for (str <- seq) {
      if (i != 0) write(sep)
      write(str)
      i += 1
    }
    seq
  }
} 
```

你可以像这样使用它：

```
listOfString.withSeparator(print _) 
```

也可以分配分隔符：

```
listOfString.withSeparator(print _, ",\n") 
```

谢谢大家回答我。我想使用的是简洁且不太慢的表示。withSeparator 的隐式函数看起来像我想要的东西。所以我接受我自己对这个问题的回答。再次感谢你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T19:48:44.857

这是另一种避免 var 的方法

```
listOfString.zipWithIndex.foreach{ case (s, i) =>
    if (i != 0) outstream write ","
    outstream write s } 
```

# google-apps-script - 无法插入工作表

> ID：13677716
> 
> 赞同：0
> 
> 时间：2012-12-03T05:35:18.177
> 
> 标签：google-apps-script, google-sheets, google-docs, google-spreadsheet-api

我收到错误消息：“指定的工作表必须是电子表格的一部分”。我假设“指定的工作表”是 sourceSheet ......但谁知道呢。这是想告诉我什么？更好的是，我该如何解决？我想将电子表格“File1”中的工作表插入电子表格“File2”。

谢谢

```
function copyTemplate() {

  var targetID="0Atn-Fxxxxt5YdF9VVxxxxxxxlZlVmeXoxxxzJuQ3c";

  // The code below will duplicate the sheet named "CellData" and insert it after 
  // the 1st sheet and call it "CellData"

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sourceSheet = ss.getSheetByName("CellData");

  var targetFile=SpreadsheetApp.openById(targetID);  

  targetFile.insertSheet("CellData", 1, {template:sourceSheet});   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:42:08.080

```
function copyTemplate() {
  SpreadsheetApp.getActiveSpreadsheet().getSheetByName('CellData')
  .copyTo(SpreadsheetApp.openById('0Atn-Fxxxxt5YdF9VVxxxxxxxlZlVmeXoxxxzJuQ3c'));
} 
```

# asp.net - 在 vb.net 的字典中使用对象

> ID：13677717
> 
> 赞同：1
> 
> 时间：2012-12-03T05:35:17.840
> 
> 标签：asp.net, vb.net, winforms, dictionary, datagridview

这就是我检查我的字典是否`occurences` 已经包含一个键和一个值并为其分配键和值的方式......但我需要另一个值，那么我如何在这里使用该对象？

```
Occurences.Add(xRows.Cells(4).Value.ToString(), Object) 
```

不知何故像这样：

```
occurences(xRows.Cells(4).Value.ToString()) = Double.Parse(occurences(xRows.Cells(4).Value.ToString()).ToString()) + <"1st object value here">) 
```

但这就是我目前的做法，它只有一个键和一个值，但我需要类似键、具有（值、值）的对象之类的东西：

实际代码：

```
If (occurences.ContainsKey(xRows.Cells(4).Value.ToString())) Then
    occurences(xRows.Cells(4).Value.ToString()) = Double.Parse(occurences(xRows.Cells(4).Value.ToString()).ToString()) + Double.Parse(xRows.Cells(7).Value.ToString())
Else
    occurences.Add(xRows.Cells(4).Value.ToString(), Double.Parse(xRows.Cells(7).Value.ToString()))
End If

Next 
```

然后我有另一个插入代码，我需要使用对象的第二个值。

```
Using commm As New MySqlCommand()
    With commm
         .Parameters.Clear()
         .Parameters.AddWithValue("@iBrnchCde", cmbBrnchCode.Text)
         .Parameters.AddWithValue("@iFCode", pair.Key)
         .Parameters.AddWithValue("@iDesc", <"2nd OBJECT VALUE HERE"> )
         .Parameters.AddWithValue("@iQty", pair.Value)
         .CommandText = oInsertString
         .Connection = _conn
         .CommandType = CommandType.Text
     End With
     commm.ExecuteNonQuery()
End Using 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:32:35.817

请执行下列操作：

```
Class CustomRowObject
    Public Property Name() As String
    Public Property Quantity() As Double
    Public Property Description() As String
End Class

If (occurences.ContainsKey(xRows.Cells(4).Value.ToString())) Then
    occurences(xRows.Cells(4).Value.ToString()).Quantity = Double.Parse(occurences(xRows.Cells(4).Value.ToString()).ToString()) + Double.Parse(xRows.Cells(7).Value.ToString())
Else
    occurences.Add(xRows.Cells(4).Value.ToString(),New CustomRowObject With { .Name = a.Cells("ProductName").Value.ToString(),.Description = .Cells("ProductDesc").Value.ToString(), .Quantity = a.Cells("Quantity").Value.ToString()})
End If

Next 
```

然后通过引用它`occurences("keynamegoeshere").Quantity`以在您的 SQL 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:08:22.370

我不确定我是否完全理解你的问题，但如果我这样做了，我会建议一种不同的方法：

为什么不创建一个包含您的值的类，然后将您的类添加到字典中 - 或者 - 创建一个类类型的字典：

```
Public myClass
    Public Code As String
    Public Desc as String
    ....
End Class

Dim myClassInstance as New myClass
'initialize fields
occurences.Add(key, myClassInstance) 
```

检索获取值作为对象并使用`if typeof value is myclass then`- 如果您选择对象作为字典的类型。

如果您选择对象，您当然可以存储不同的类和类型，但成本是铸造。如果可能的话，制作一个您将用来避免强制转换的类型的字典。

```
Private myDictionary as New Dictionary(Of String, myClass) 
```

# .htaccess - Htaccess/Htpasswd AutoType Basic 在 Chrome 中不起作用

> ID：13677718
> 
> 赞同：0
> 
> 时间：2012-12-03T05:35:29.677
> 
> 标签：.htaccess, google-chrome, .htpasswd

好的，所以我正在使用基本`.htaccess`/`.htpasswd`组合保护网页。

我的`.htaccess`文件看起来像这样：

```
DirectoryIndex index.php
AuthUserFile HOMEDIRECTORY/.htpasswd  
AuthName "Restricted Area"
AuthType Basic  
require valid-user 
```

在 Firefox 下一切正常，但 Chrome 给出了这个消息。我已经在多台计算机上对此进行了测试。

> 需要授权
> 
> 此服务器无法验证您是否有权访问所请求的文档。要么您提供了错误的凭据（例如，错误的密码），要么您的浏览器不了解如何提供所需的凭据。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

知道 Chrome 哪里出了问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:33:19.930

如果您在不同域之间使用*帧重定向，Chrome 将不会显示登录提示。*请改用 HTTP 302 或 301 重定向。

# python - Stream Parse Wiki Xml 转储

> ID：13677720
> 
> 赞同：2
> 
> 时间：2012-12-03T05:35:45.600
> 
> 标签：python, xml-parsing, lxml, wikipedia, topic-modeling

我不确定以前是否有人问过这个问题，但我一直找不到，请原谅我的无知。我想解析（流解析）大约 40 Gigs 的维基百科 xml 转储。我正在尝试使用 lxml iterparse aka 流解析器来为我完成这项工作，但由于某种原因，我编写的代码对我不起作用。在我解释我想要做什么之前，让我们考虑一下这种 xml 格式

```
<root>
  <page>
    <title> A  </title>
    <text> ..........blah blah...... </text>
  </page>

  <page>
  <title> B </title>
  <text> This is a line of sample text in title B  </text>
  </page>

  <page>
  <title> C </title>
  <text> ............blah blah........ </text>
  </page>
</root> 
```

在上面的 xml 结构中，这与 wiki 转储非常相似，我想要做的是使用 python 流解析器（例如 lxml）读取“页面”标签（基本上将转储中的不同文章分开）内的每一件事（无需将整个 xml 树加载到内存中，这是不可能的）并在其上执行正则表达式。正是我想要做的是，如果在当前的“页面”元素中查找文本标签“类别：活着的人”，如果找到这样的匹配正则表达式，则将“文本”标签内的全部内容写成文本文件。但在正则表达式部分之前，我遇到了 lxml 解析器本身的问题。我在下面尝试的示例代码。提前致谢 ：）

```
#LXML parser
from lxml import etree

def fast_iter(context, func):
    for event, elem in context:
        func(elem)
        elem.clear()
        while elem.getprevious() is not None:
            del elem.getparent()[0]
    del context

def process_element(elem):
    print elem.xpath( 'description/text( )' )

context = etree.iterparse( MYFILE, tag='item' )
fast_iter(context,process_element) 
```

随意完全更改代码并提供您自己的版本，只要我能解决我的问题，我真的不介意！

请有人帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T03:10:37.900

```
from xml.sax import ContentHandler, parseString
from StringIO import StringIO
from lxml import etree

CONTENT = """
<root>
  <page>
    <title> A  </title>
    <text> ..........blah blah...... </text>
  </page>

  <page>
  <title> B </title>
  <text> This is a line of sample text in title B  </text>
  </page>

  <page>
  <title> C </title>
  <text> ............blah blah........ </text>
  </page>
</root>
"""

def fast_iter(context, func):
    for action, elem in context:
        func(elem)
        elem.clear()
        while elem.getprevious() is not None:
            del elem.getparent()[0]
    del context

def process_element(elem):
    print elem.xpath( './text/text( )' )

class WikiContentHandler(ContentHandler):

    def startDocument(self):
        self.character_buffer = None

    def startElement(self, name, attrs):
        if name == 'text':
            self.character_buffer = StringIO()

    def endElement(self, name):
        if name == 'text':
            print self.character_buffer.getvalue()
            self.character_buffer.close()
            self.character_buffer = None

    def characters(self, content):
        if self.character_buffer != None:
            self.character_buffer.write(content)

def parse_wiki():
    parseString(CONTENT, WikiContentHandler())

if __name__ == '__main__':
    parse_wiki()

    context = etree.iterparse( StringIO(CONTENT), tag='page' )
    fast_iter(context, process_element) 
```

以上是解析XML的两种方式，一种使用lxml，另一种使用Python标准库。它们都打印出`<text>`标签中的所有信息。只需查看打印语句的位置并进行额外处理。

# tfs - 在 TFS 2010 中，电子邮件警报不起作用，发送邮件失败

> ID：13677724
> 
> 赞同：1
> 
> 时间：2012-12-03T05:36:04.073
> 
> 标签：tfs, tfs-2010

我正在使用 smtp4dev 从 TFS 发送电子邮件警报。我正在使用 Windows VIsta。在 TFS 管理控制台-> 电子邮件警报设置中，我将 SMTP 服务器设置为 localhost，来自地址的电子邮件是我的邮件 ID。在 Visual Studio 2010 的 Team->Project Alerts 中，我启用了“已签入任何内容”并在“发送到”字段中提供了另一个电子邮件 ID。签到后，我没有收到任何电子邮件。smtp4Dev 在系统托盘中可见。

在事件查看器中，我发现了以下错误，

```
TF53010: The following error has occurred in a Team Foundation component or extension:
Date (UTC): 12/3/2012 6:07:33 AM
Machine: MACHINE112
Application Domain: TfsJobAgent.exe
Assembly: Microsoft.TeamFoundation.Framework.Server, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a; v2.0.50727
Service Host: 
Process Details:
  Process Name: TFSJobAgent
  Process Id: 2804
  Thread Id: 6996
  Account name: NT AUTHORITY\LOCAL SERVICE 
```

> 详细消息：TF271001：尝试向以下地址发送电子邮件通知时出错：yyyy@example.com。在接下来的五分钟内发生的其他电子邮件通知错误可能不会被记录。验证 Team Foundation 管理控制台中的电子邮件通知设置是否正确。异常消息：发送邮件失败。（类型 SmtpException）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T18:26:03.533

请确认 IIS 中 Visual Studio Team Foundation Server 后台作业代理和 Team Foundation Server Web 访问应用程序池的身份。

Web Access 将使用此应用程序池的身份连接到 SMTP 服务器以发送邮件。如果您更改工作项，通知将由 Visual Stidio Team Foundation Server 后台作业代理发送。如果该帐户没有连接到 smtphost 的权限，您将不会收到邮件。

两项服务必须在同一帐户下运行。

# c# - 是否可以在 C#、asp.net 中更改复选框的 GUI？

> ID：13677732
> 
> 赞同：1
> 
> 时间：2012-12-03T05:36:40.673
> 
> 标签：c#, asp.net, .net, css

我尝试搜索，但找不到任何问题的答案。开始。

我想使用 asp.net 和 C# 更改 CheckBoxList 中复选框的 GUI。例如，我希望看到 ([] unchecked state) ([x]checked state) 而不是标准复选框。

1.这在 C# asp.net, webform 中可行吗？

我找到了关于 WPF 样式和控件模板的教程，但这对我来说是全新的，它说我必须使用 MS Silverlight，并在 .xaml 文件的控件模板中进行编码。

2.这是唯一的解决方案吗？

3.我在写我的问题时注意到如何添加标签，有人可以告诉我这是如何实现的吗？（这是我想到的最终结果）

由于防止垃圾邮件，我无法发布图片，请参阅链接：http: [//i50.tinypic.com/2dvqzc3.jpg](http://i50.tinypic.com/2dvqzc3.jpg)

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:23:45.647

可能有多种方法，具体取决于您想要实现效果的内容和方式。1\. CSS 2\. 从头开始​​自定义控件 3\. JQuery

请检查下面提供的一些链接

[使用 CSS 更改 Asp:CheckBox 的样式/外观](https://stackoverflow.com/questions/112883/change-style-look-of-aspcheckbox-using-css)

[具有自定义设计的 ASP.NET 复选框](https://stackoverflow.com/questions/8899213/asp-net-checkbox-with-custom-design)

[http://blogs.digitss.com/javascript/jquery-javascript/jquery-fancy-custom-radio-and-checkbox/](http://blogs.digitss.com/javascript/jquery-javascript/jquery-fancy-custom-radio-and-checkbox/)

code.google.com/p/jquery-checkbox

希望有帮助

# r - 将整列从数字转换为字符的数据框

> ID：13677734
> 
> 赞同：1
> 
> 时间：2012-12-03T05:36:49.523
> 
> 标签：r, casting, dataframe, numeric

假设我有一个`data.frame`that's fully `numeric`。如果我在第一列中输入一个`character`（例如），那么整个第一列将变为`character`.

**问题**：我该如何扭转这种情况。也就是说，我如何使它`character`内部的任何`data.frame`“明显”`numeric`对象的对象都被强制为`numeric`？

MWE：

```
test <- data.frame(matrix(rnorm(50),10))
is(test[3,1])
test[1,1] <- "TEST"
is(test[3,1])
print(test) 
```

所以我在这里的目标是从现在的方式到现在`test`的状态。所以我想我要求一个在整个.`test[2:10]``numeric``data.frame`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T05:49:59.120

简短的回答是你不能。
正如评论中提到的，在数据​​框中，列的所有元素必须具有相同的模式。

如果您想专门找到“类似数字”的值，您可以使用以下内容（`vec`例如，数据框列）

```
 vec[!is.na(as.numeric((vec)))] 
```

然后您可以转换这些，但不幸的是，您不能将转换后的值放回同一列。正如你所做的那样，他们将被强制返回`character`

* * *

至于可以将整个数据帧转换为数字的函数（意识到不可能将特定条目隔离为异常），您可以使用`sapply`

```
 sapply(dataFrameName, as.numeric) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T00:44:40.320

您可以在 data.frame 中拥有 list 类型的向量，并且该列表可以包含除函数之外的任何类型的对象，只要它与 data.frame 中的其他列的长度相同，例如：

```
mydataframe <- data.frame(numbers=1:3)
mydataframe$mylist <- list(1, 'plum', 5)
mydataframe
#  numbers mylist
#1       1      1
#2       2   plum
#3       3      5
sapply(mydataframe, typeof)
#  numbers    mylist 
#"integer"    "list" 
sapply(mydataframe$mylist, typeof)
#[1] "double"    "character" "double" 
```

# c - 如何为细微的错误设计软件测试

> ID：13677736
> 
> 赞同：2
> 
> 时间：2012-12-03T05:36:53.873
> 
> 标签：c, testing

这是一个超级简单的例子，在这里用 C 语言来说明一个我不知道如何通过测试将其暴露为 bug 的细微错误。

考虑：

```
#include <stdio.h>

int main() 
{
  int a;
  int b;
  int input;

  printf("Enter 1 or 2: ");
  scanf("%d", &input);

  switch(input) {
  case 1:
    a = 10;
    /* ERROR HERE, I FORGOT A BREAK! */
  case 2:
    b = 20;
    break;
  default:
    printf("You didn't listen!\n");
    return 1;
    break;
  }

  if(input == 1) {
    b = 30;
    printf("%d, %d\n", a, b);
  } else {
    printf("%d\n",b);
  }

  return 0;
} 
```

如代码中所述，`break`缺少 a ，因此当输入 1 时，它会落入案例 2。但 1 的输出并没有反映这一点，因为它`b`稍后会覆盖。因此，我们可以设计的所有测试，比如从集合中输入一个数字，`{1, 2, 10}`都会产生正确的输出。

实际上，内部的分配`switch`可能非常昂贵，因此这个错误可能非常昂贵。但是，假设从第一天开始就是这样写的，没有基准可以看出成本高于预期。

那么可以做些什么来清除这些类型的错误呢？有没有办法设计测试用例以在生产软件中公开它？

**编辑** 所以我想我并不完全清楚——我用 C 编写它来说明遇到的问题的*类型*，但实际上它并不特定于 C。我想要说明的一点是代码进入了我们的部分从来没有打算进入（在这种情况下，因为忘记`break`说明这一点）。我的实际案例是一个有 700,000 行的 Fortran 代码，它进入了我们从未打算进入的分支，因为 if/switch 设计不佳，从语言的角度来看这是合法的，但可能非常昂贵。

**是否有可能设计一个测试或查看来自某些工具的一些数据，这些数据会告诉我们它正在进入不应该进入的分支？**我在打印“我不应该在这里！”时发现了一个错误。在所有的情况下，看到它被打印出来，肯定有比随机看到它并放置打印语句更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:47:47.453

对于您的具体示例，根据定义，这绝不是错误/错误。语言中需要失败的可能性。如果你想禁止某些危险的语言特性，那么[linter](http://en.wikipedia.org/wiki/Lint_%28software%29)就是要走的路。

为了避免完全无法预料的错误，有一条规则：始终进行防御性编码，并在`assert`可以放置它们的任何地方使用 s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:22:01.223

案例 1 的正确状态是不会设置 b。

检查是否设置了 b。

如果您稍后设置 b，您可能需要将代码分解成更小的部分来测试它，但这只是很好的模块化。

似乎您在问“我如何测试不可测试的代码？”。答案是编写可测试代码需要技巧和计划，不能只是事后才想到。

网上有很多东西可以帮助你编写可测试的代码：

[https://www.google.com/search?q=writing+testable+code](https://www.google.com/search?q=writing+testable+code)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T06:11:20.367

您可以为 switch 语句定义编码约定，以便每个分支都会施加一个特殊的状态。就像一个变量被分配了这个案例的值。例如：

```
switch (v) {
case 1: 
    vcheck = 1;
    ...
    break;
case 2:
    vcheck = 2;
    ...
    break;
} 
```

并`vcheck`在您的测试用例中进行测试。

[除此之外，您可以使用对MISRA 规则](http://www.gimpel.com/html/misra.htm?gclid=CPvI2MjJ_bMCFUjwzAod7jIAOw)的验证执行静态代码分析的工具- 并将它们纳入您的构建过程。他们会引起一些想法...... :-)

最后，（我最喜欢的）您可以编写一个脚本来检查此类情况并再次发出警告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T09:55:40.410

为什么这是我问的错误？使用任何类型的黑盒测试代码都有效。所以，如果唯一的要求是代码可以工作，那么就没有错误。

但是代码有缺陷。这种缺失`break`使代码更难理解，更难维护。

编码约定是关于代码外观的规则。遵守编码约定不能通过测试编译的程序来完成，它们必须在源代码上完成。

测试编码约定是通过代码检查（自动或手动）完成的。

**编辑：**

如果您担心性能，请使用检测工具查找“热点”。你会发现大部分的执行时间可能只花在了几个模块上。查看这些模块以及对它们的每次调用。你会发现只需要查看 10-30 000 行代码。由于审稿范围有限，审稿时间应为1-3周。

底线：在发现细微错误方面，代码审查远远优于测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T06:31:14.900

如果`input==1`你`b = 30`在输出中看到，你就知道出了点问题。另外，请记住在 else 子句中，您应该在读取之前向 b 写入一些内容。在`default:`,（例如`input==100`）的情况下，您最终可能会在没有正确设置的情况下从某个位置读取。

此外，代码审查，如果你能负担得起的话，应该对找到类似的东西有很大帮助。

# android - 在android中插入数据库时 出错

> ID：13677738
> 
> 赞同：2
> 
> 时间：2012-12-03T05:37:00.647
> 
> 标签：android, database, sqlite

我正在尝试在 android 的 sqllite 数据库中插入数据。

**我的适配器类**

```
public class dbAdapter {
    // Database fields
    public static final String ID = "id";
    public static final String FULLNAME = "fullname";
    public static final String ADDRESS = "address";
    public static final String EMAIL = "email";
    public static final String MOBILE = "mobile";
    public static final String GENDER = "gender";
    public static final String DOB = "dob";
    public static final String CITY = "city";
    public static final String USERNAME = "username";
    public static final String PASSWORD = "password";

    private static final String DATABASE_TABLE = "myfirstanroidapp";

    private Context context;
    private SQLiteDatabase database;
    private databaseHelper dbHelper;

    public dbAdapter(OnClickListener onClickListener) {
        this.context = (Context) onClickListener;
        open();
    }

    public dbAdapter(Context context) {
        Log.e("Adapter","dbAdapter context");
        this.context = context;
    }

    public dbAdapter open() throws SQLException {

        dbHelper = new databaseHelper(context);
        Log.e("Adapter","getWritableDatabase");
        database = dbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        dbHelper.close();
    }

    // Put String values into a Content object(like AssignData to database field)
    private ContentValues createContentValues(String fullname, String address, String email,String mobile, String gender, String dob,String city, String username, String password) {
        ContentValues values = new ContentValues();
        values.put(FULLNAME, fullname);
        values.put(ADDRESS, address);
        values.put(EMAIL, email);
        values.put(MOBILE, mobile);
        values.put(GENDER, gender);
        values.put(DOB, dob);
        values.put(CITY, city);
        values.put(USERNAME, username);
        values.put(PASSWORD, password);
        return values;
    }

    // Create a new myfirstanroidapp. If the myfirstanroidapp is successfully created return the new
    // rowId for that note, otherwise return a -1 to indicate failure.
    public long insert(String fullname, String address, String email,String mobile, String gender, String dob,String city, String username, String password) {  
        ContentValues assigndata = createContentValues(fullname,address,email,mobile,gender,dob,city,username, password) ;  
        return database.insert(DATABASE_TABLE, null, assigndata);
    }
} 
```

**我的助手类**

```
public class databaseHelper extends SQLiteOpenHelper 
{
    private static final String DATABASE_NAME = "myfirstanroidapp";
    private static final int DATABASE_VERSION = 1;
    // Database creation SQL statement
    private static final String DATABASE_CREATE = 
            "create table myfirstanroidapp (id integer primary key autoincrement, " +
            "fullname text not null, address text, " +
            "mobile text not null, email text not null," +
            "city text not null, username text not null, " +
            "password text not null, dob text not null," +
            "gender text not null);";

    public databaseHelper(Context context){     
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        Log.e("Database",DATABASE_NAME);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        //Create Database
        db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        //Drop Database and ReCreate Database
        db.execSQL("DROP TABLE IF EXISTS myfirstanroidapp");
        onCreate(db);   
    }
} 
```

现在我从 onButtonClick 传递数据

```
dbAdapter = new dbAdapter(getApplicationContext());
dbAdapter.insert("XYZ", "XYZ", "xyz.gmail.com", "123456789", "male", "dob", "pune", "username", "password");
Log.e("Sucess","Register"); 
```

但出现错误 ![在此处输入图像描述](../Images/10711ad681e95c0b39148f3440160dce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:45:06.453

改变

```
public dbAdapter(OnClickListener onClickListener) {
        this.context = (Context) onClickListener;
        open();
    } 
```

和`dbAdapter = new dbAdapter(this);`

到

```
public dbAdapter(Context context) {
        this.context = context;
        open();
    } 
```

和`dbAdapter = new dbAdapter(Your_activity.this);`

# python - 带有 Popen 的异步子进程

> ID：13677740
> 
> 赞同：1
> 
> 时间：2012-12-03T05:37:12.650
> 
> 标签：python, asynchronous, multiprocessing, subprocess, executable

使用 Windows 7 + python 2.6，我正在尝试并行运行模拟模型。我可以通过在我的文件浏览器中双击它们来启动可执行文件的多个实例。但是，异步调用`Popen`会导致每个连续实例中断前一个实例。对于它的价值，可执行文件将文本返回到控制台，但我不需要以交互方式收集结果。

这是我到目前为止的位置：

```
import multiprocessing, subprocess

def run(c):
    exe = os.path.join("<location>","folder",str(c),"program.exe")
    run = os.path.join("<location>","folder",str(c),"run.dat")
    subprocess.Popen([exe,run],creationflags = subprocess.CREATE_NEW_CONSOLE)

def main():
    pool = multiprocessing.Pool(3)
    for c in range(10):
        pool.apply_async(run,(str(c),))
 pool.close()
 pool.join()

if __name__ == '__main__':
    main() 
```

在为解决方案搜索 SO 之后，我了解到使用多处理可能是多余的，但我需要一些方法来限制工作的核心数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:28:50.360

由@JF Sebastian 关于该`cwd`论点的评论启用。

```
import multiprocessing, subprocess

def run(c):
    exe = os.path.join("<location>","folder",str(c),"program.exe")
    run = os.path.join("<location>","folder",str(c),"run.dat")
    subprocess.check_call([exe,run],cwd=os.path.join("<location>","folder"),creationflags = subprocess.CREATE_NEW_CONSOLE)

def main():
    pool = multiprocessing.Pool(3)
    for c in range(10):
        pool.apply_async(run,(str(c),))
    pool.close()
    pool.join()

if __name__ == '__main__':
    main() 
```

# c# - 如何从数据库中的谷歌地图上添加位置（标记）..？

> ID：13677741
> 
> 赞同：1
> 
> 时间：2012-12-03T05:37:12.690
> 
> 标签：c#, javascript, asp.net, sql-server, google-maps

我正在创建一个谷歌地图，以显示一个品牌在印度的商店位置......

我已经在我的 SQL Server 数据库中存储了完整的地址，包括纬度和经度......

在这里，我可以从数据库中获取地址并显示在我的网页中，但我被困住了，将地址映射到谷歌地图上......

在这里我保留了一个文本框，以便用户输入他的州/城市/任何位置名称，然后单击搜索按钮，然后我必须用标记在地图上标记相应的商店位置..

这是我的谷歌地图代码...

```
<script type="text/javascript">
    var infowindow = null;
    function initialize() {
        //var centerMap = new google.maps.LatLng(13.040547,80.230805);
        var centerMap = new google.maps.LatLng(12.264864, 77.937012);
        var myOptions = {
            zoom: 7,
            center: centerMap,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(document.getElementById("map"), myOptions);
        setMarkers(map, sites);
        infowindow = new google.maps.InfoWindow({ });
    }

    //var sites = '<%=TextBox1.Text%>'
    //alert(sites);
    //[
    //// ['Ambattur', 13.119438,80.148182, 4, 'Ambattur, Chennai, Tamil Nadu, India, 600031'],['Avadi', 13.124453,80.101662,   1, 'Avadi, Tamil Nadu, India, 600017'],  ['Jayanagar', 12.928945,77.590599, 1, 'Jayanagar, Bangalore, Karnataka, India,     560041'],['Indira Nagar', 12.973697,77.641325, 1, 'Indira Nagar, Bangalore, Karnataka, India, 560038'],['TamilNadu',     11.415418,78.662109, 1, 'TamilNadu, India, 600017']
    //];

    function setMarkers(map, markers) {
        for (var i = 0; i < markers.length; i++) {
            var sites = markers[i];
            var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
            var marker = new google.maps.Marker({
                position: siteLatLng,
                map: map,
                icon: new google.maps.MarkerImage(
                'Images/R.png ',
                null, null, new google.maps.Point(0, 42)),
                title: sites[0],
                zIndex: sites[3],
                html: sites[4]
            });

            google.maps.event.addListener(marker, "click", function () {
                infowindow.setContent(this.html);
                infowindow.open(map, this);
            });
        }
    }
</script> 
```

在这里，我有站点变量，以便我可以在地图上映射我的位置，

但在这里我需要从数据库中映射它们......

任何帮助将不胜感激...

谢谢shamer ali shaik

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:22:31.733

乍一看，您的代码似乎没问题。但这是我的代码，对我来说非常好，可能对你有帮助。

myLatlng = 新 google.maps.LatLng(32.54681317351514, 15.1171875);

map = new google.maps.Map(document.getElementById("gmap"), {mapTypeId: google.maps.MapTypeId.ROADMAP,zoom:2,center:myLatlng});

```
/* loop which plot the markers on the map*/
// record[i] holds lat&lang in this format'32.54681317351514, 15.1171875'

    var points=record[i].geo_location.split(',');
    marker = new google.maps.Marker({
                 position: new google.maps.LatLng(points[0],points[1]),
                 draggable: false,
                 map: map
                 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:04:43.790

古鲁帕兰·吉里塔兰..

正如我在我的问题中所说，我想在印度找到商店.. 疼痛的详细信息将存储在数据库中.. 现在，我可以获取商店的详细信息并通过您的代码在地图上标记它们的位置.. 早些时候它适用于 pincode，从某种意义上说，如果您在搜索框中提供 pincode，它将检索相应的商店详细信息..

现在，根据我的代码，在我对您的博客文章的回复中，我只能在文本框中输入字符串值。在这里我还需要为数值（pincode）实现它，

这是我的更新面板和计时器点击事件的代码..

```
protected void UpdatePanel1_Load(object sender, EventArgs e)
    {
        //Linq is used to load the table to the code
        DataClassesDataContext data = new DataClassesDataContext();

        //Select all from the table
        //List<addressmap> lst = (from u in data.addressmaps select u).ToList();
        List<addressmap> lst = (from u in data.addressmaps where u.StoreLocation == TxtSearch.Text || u.StoreCity == TxtSearch.Text || u.StoreState == TxtSearch.Text || u.StoreCountry == TxtSearch.Text select u).ToList();

        //add the table contents to the javascript array so that new locations will be loaded
        foreach (addressmap item in lst)
        {
            ScriptManager.RegisterArrayDeclaration(UpdatePanel1, "infoarray", "'" + item.StoreAddress.ToString() + "'");
            ScriptManager.RegisterArrayDeclaration(UpdatePanel1, "lonarray", item.StoreLongitude.ToString());
            ScriptManager.RegisterArrayDeclaration(UpdatePanel1, "latarray", item.StoreLatitude.ToString());
            ScriptManager.RegisterArrayDeclaration(UpdatePanel1, "bounce", item.StoreBounce.ToString());
        }
    }

    protected void Timer1_Tick(object sender, EventArgs e)
    {
        //update the update panel every 10 seconds
        UpdatePanel1.Update();
    } 
```

在select语句中，我还需要pincode..

任何帮助将不胜感激..

# javascript - 使用 IE 开发人员工具栏检查元素在 IE 7 中不起作用

> ID：13677745
> 
> 赞同：1
> 
> 时间：2012-12-03T05:37:25.913
> 
> 标签：javascript, internet-explorer

我在 IE 7 中安装了 IE 开发人员工具栏。但在那之后为了检查元素我启用了

**视图 -> 资源管理器栏 -> IE 开发者工具栏**

它在页面底部显示一个检查元素工具栏。但它没有向我展示任何 CSS 样式或我想要检查元素的东西。

我还为脚本使用了 **firebug-lite-dev.js**

```
 <script type="text/javascript" src="js/firebug-lite-dev.js"></script> 
```

但这对我不起作用。任何人都可以请帮助解决这个问题。

# asp.net - 如何在asp.net中为Formview的参数提供源代码？

> ID：13677746
> 
> 赞同：1
> 
> 时间：2012-12-03T05:37:37.933
> 
> 标签：asp.net, formview

我已经创建了 Formview。并在 SqlDataSource 中手动创建更新查询并提供参数。但是我很困惑如何为参数提供 Source？

我尝试了命令和参数编辑器，但作为控件我只找到了 Formview2。那么，我怎样才能提供参数的来源呢？说 Param1 的来源 = (Formview1.FindControl(textbo1)).text, Param2 =(Formview1.FindControl(textbo2)).text

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-22T16:14:06.777

在您背后的代码中，您可以尝试这样的事情

```
 Dim txtBox as TextBox = Formview1.FindControl("TextBox1").text
 sqlDataSource1.Parameters.Add("@ParameterName", txtBox) 
```

这将手动设置您的参数@ParameterName = txtBox。SqlDataSource1 将是您已经创建的现有数据源。

另请参阅此处[无法在 ControlParameter 中找到控件 ID，](https://stackoverflow.com/questions/25386048/cannot-find-control-id-in-controlparameter)以便在标记中执行此操作

# sql - 使用函数的非常慢的 SQL Server 查询

> ID：13677755
> 
> 赞同：7
> 
> 时间：2012-12-03T05:38:56.823
> 
> 标签：sql, sql-server, performance, tsql, sql-function

这种继承自上一个问题：

[SQL Server 查询超时取决于 Where 子句](https://stackoverflow.com/questions/12362221/sql-server-query-time-out-depending-on-where-clause)

根据 where 子句，查询将在其中运行非常缓慢。我使用 CTE 重写了该查询并很好地避免了该问题，但从未找到答案。

另一个类似的查询最近被调整以添加另一个字段，突然它的性能从运行大约 30 秒并返回 10,000 行下降到需要 10 多个小时（最终返回相同的结果集）。今天我开始解决这个问题，发现了一些奇怪的东西。

我经常需要从日期时间值中仅提取日期部分，因此我将逻辑写入了一个函数：

```
CREATE FUNCTION [dbo].[cDate] ( @pInputDate    DATETIME )
RETURNS DATETIME
BEGIN
        RETURN CAST(CONVERT(VARCHAR(10), @pInputDate, 111) AS DATETIME)
END
GO 
```

我在这个新的、低效的查询中发现，如果我用查询中的`CAST(CONVERT(VARCHAR(10), @pInputDate, 111) AS DATETIME)`内联函数替换该函数，查询执行的速度会从大约 10 小时下降到不到 2 秒。我看不出估计的执行计划有什么不同。顺便说一句，这不是添加的字段。我假设添加另一个字段以某种方式导致执行计划发生变化并放大了上述情况。

我的问题是，这正常吗？如上所述，我将函数用于重复过程，因为如果你找到一种更有效的做事方式，它们更容易维护、记忆和更新。我应该对我的功能做些什么来提高它们的性能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-23T18:55:01.357

如果您必须将其封装在函数中，请参阅[标量函数、内联和性能：无聊帖子的有趣标题](http://dataeducation.com/scalar-functions-inlining-and-performance-an-entertaining-title-for-a-boring-post/)

改写如下

```
CREATE FUNCTION dbo.cDate_Inline
(
    @pInputDate DATETIME
)
RETURNS TABLE
AS
    RETURN
    (
        SELECT DATEADD(day, DATEDIFF(Day, 0, @pInputDate), 0) AS [Date]
    ) 
```

然后代替

```
SELECT *,
       [dbo].[cDate](modify_date) AS modified
FROM   sys.objects 
```

利用

```
SELECT *,
       ca.Date AS modified
FROM   sys.objects
       CROSS APPLY dbo.cDate_Inline(modify_date) ca 
```

这将由查询优化器内联到计划中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:19:09.667

我会尝试可能添加另一个变量来进行声明并返回。对此的思考过程可能是您的演员和转换以更改您输入的日期时间可能是瓶颈。情况可能并非如此，但通常如果您在范围内设置一个新变量，进行调节并将其绑定到该变量并返回该变量，这可能有助于提高速度。我倾向于尽可能远离标量函数，但当您开始将它们与更大的数据集一起使用时，它们会出现很多性能问题。只是一个建议，它可能会或可能不会有帮助，但它会将返回隔离到独立于输入的新对象：

```
CREATE FUNCTION [dbo].[cDate] ( @pInputDate    DATETIME )
RETURNS DATETIME
BEGIN
Declare @Output datetime  = CAST(CONVERT(VARCHAR(10), @pInputDate, 111) AS DATETIME)  -- 2008 method and newer

Declare @Output datetime;

Select @Output  = CAST(CONVERT(VARCHAR(10), @pInputDate, 111) AS DATETIME)  -- 2005 and prior method 

return @Output
END
GO 
```

# hibernate - @Where 不使用 @onetoone 在休眠

> ID：13677760
> 
> 赞同：0
> 
> 时间：2012-12-03T05:39:24.893
> 
> 标签：hibernate, jpa, hql

我有一个要求，应该根据特定条件获取 @OneToOne 关联。

```
class Entity2 {
    @OneToOne
    @Where(clause="epoch_end_time > current_timestamp() ")
    @JoinColumn(name="program_index",insertable=false,updatable=false,nullable=false)
    private ProgramHistory pgmHistory;
} 

class Entity1 {

@OnetoMany
@JoinColumn(...........)
private Entity2 entity;

} 
```

当我执行“从 Entity1”..Hibernate 创建具有如下条件的查询“..........,Entity2.proram_index = ProgramHistory.program_index”...但我也需要 @Where 子句作为此查询的一部分添加。但是休眠似乎从来没有添加它。知道吗？@Where..我的案例 epoch_end_time 是否有任何替代方案是 ProgramHistory 表中的一个 coloum。

@Where 与@OneToMany 一起正常工作......但我的要求是将条件放在@OneToOne 的关联实体中。@Filter 会有帮助吗？文档说@Where 和@Filter 是为了收集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T05:19:05.110

@Where 和 @Filter 用于收集。因此它不适用于 @OneToOne。

# java - 保护 Java Web 应用程序不被复制

> ID：13677761
> 
> 赞同：-1
> 
> 时间：2012-12-03T05:39:28.140
> 
> 标签：java, html, jsp, tomcat

我有一个带有基本 servlet 和 jsp 的 java 应用程序。现在我尝试使用在线下载源代码的 HTTrack 软件下载源代码。无论如何，完整的应用程序没有与那个应用程序一起下载，但我仍然觉得它不安全，因为下载的文件很少，我想以这样一种方式完全保护它，使客户端不应该能够下载任何文件。这怎么可能实现？请有人对此有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:06:49.627

如果您指的是 HTML、CSS 和 Javascript，那么您无法阻止它们被下载。这就是 HTTP 模型的重点。客户端从服务器请求一个页面，然后将其下载到客户端的机器上。

但我不认为如果您将它们正确放置在 WEB-INF/ 目录中，即使 HTTrack 也无法下载 Java 或 JSP 源代码。

避免客户端下载的最佳方法是使用 Applet 或 Flex，它消除了 HTML、CSS 和 Javascript，以便客户端仅下载 Applet 或 Flex 应用程序。

可以使用 Jarsigner 对 Applet 进行签名，从而确保它们的安全，并且可以对 Flex 应用程序进行混淆，从而使源代码不可见。

# jquery - 使用匹配函数的jquery验证

> ID：13677763
> 
> 赞同：1
> 
> 时间：2012-12-03T05:39:32.553
> 
> 标签：jquery, validation

我想确保一个 html 字段至少包含 7 个整数，以便在使用 jquery 的联系我们页面上进行表单验证。

我想将它集成到 JQuery 的验证功能中，做[类似的](http://docs.jquery.com/Plugins/Validation/Methods/minlength)事情。

我的问题是 - 如何将新功能集成到 JQuery 的验证中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:05:01.997

```
$.validator.addMethod('sevenDigitsOrMore', function( value ) {
  return /^\d{7,}$/.test( value );
}, 'Enter at least 7 digits'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:14:32.760

@elclanrs - 你得到了我大部分的帮助。

这就是我最终的结果：

```
<script type="text/javascript">
  jQuery.validator.setDefaults({
    success: "valid"
  });;

  jQuery.validator.addMethod('sevenDigitsOrMore', function( value ) {
      return value.replace(/[^0-9]/gi,"").length >= 7 ;
  }, 'Enter at least 7 digits');
</script>

<script>
  $(document).ready(function(){
    $("#myform").validate({
      rules: {
        field: {
          sevenDigitsOrMore: true
        }
      }
    });
  });
</script> 
```

# java - 输出 Java 地图并在 HTML 中混合

> ID：13677765
> 
> 赞同：0
> 
> 时间：2012-12-03T05:39:40.800
> 
> 标签：java, html, map

我目前正在编写自己的用 Java 编写的词汇表版本。老实说，这是学术性质的，我希望有人能指出我的第一个方向。无论如何，我正在从文本文件中读取文本并将单词及其相应的定义放入 Map（更具体的 Tree Map）。从那里一切都很好。一切都在地图中，因为它应该是。

现在我开始进入我想要进入 HTML 并输出地图内容的部分。我知道如何使用迭代器来做到这一点，这不是什么大问题。但是，当我尝试显示与 HTML 混合的内容时，我并没有得到我想要的所有内容。该页面最终应该如下所示：[http ://cse.osu.edu/~weide/rsrg/sce/now/321/421/labs/lab10/glossary.html#book](http://cse.osu.edu/~weide/rsrg/sce/now/321/421/labs/lab10/glossary.html#book)

还有一个特别棘手的部分，如果定义中包含一个术语，它应该是可点击的。这是我到目前为止所拥有的。同样，如果有人可以帮助我弄清楚为什么 HTML 的主要内容没有显示，我将非常感激！顺便说一句，我从中获取内容的文本文件称为：terms.txt，写入的 html 文件称为glossary.html。

这是我到目前为止所拥有的：

```
public class Glossary {

/**
 * @param args
 * @throws IOException
 */
public static void main(String[] args) throws IOException {
    Map<String, String> dictionary = new TreeMap<String, String>();

    File htmlFile = new File(
            "/Users/myname/Documents/workspace/Lab10/src/glossary.html");
    File file = new File(
            "/Users/myname/Documents/workspace/Lab10/src/terms.txt");
    Writer out = new OutputStreamWriter(new FileOutputStream(htmlFile));

    String term = null;
    String def = null;
    String key = null, value = null;
    String lead = null;
    String multiFinalDef = null;
     Set<String> checkValues = new HashSet<String>();
    String leftOver = null;
    boolean check = false;
    Scanner input = null;
    try {
        input = new Scanner(file);

        while (input.hasNext()) {
            String keepTrack;
            boolean multi = false;
            String line = input.nextLine();

            term = line;
            def = input.nextLine();
            keepTrack = def;

            while (def.length() > 0 && input.hasNext()) {
                def = input.nextLine();

                if (def.length() > 0) {
                    multiFinalDef = " " + keepTrack + def;
                    multi = true;
                }

            }

            if (multi) {
                dictionary.put(term, multiFinalDef);

            } else {
                dictionary.put(term, keepTrack);

            }
            checkValues.add(term);

        }

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        out.write("<HTML>\n");
        out.write("<HEAD>\n");
        out.write("</HEAD>\n");
        out.write("<BODY>\n");
        out.write("<H1>Glossary</H1>\n");
        out.write("<HR /\n");
        out.write("<H2>Index</H2>\n");
        out.write("<UL>\n");

    } catch (FileNotFoundException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Set s = dictionary.entrySet();
    Iterator iterator = s.iterator();

    while (iterator.hasNext()) {

        Map.Entry m = (Map.Entry) iterator.next();

        // getKey is used to get key of map.
        key = (String) m.getKey();

        // getValue is used to get the value of the key in map.
        value = (String) m.getValue();

        // this is just so I know the output from the map is actually correct. And indeed it is.
        System.out.println("Key:\t\t\tValue\n " + key + "\t\t\t " + value
                + "\n");
        try {
            out.write("<LI><A HREF=\"#" + key + "\">" + key + "</A></LI>\n");
            out.write("</UL>\n");
            out.write("<HR />\n");

        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    out.write("<H2>Terms and Definitions</H2>\n");
    out.write("<UL>\n" + "<P>\n");

    iterator = s.iterator();
    while (iterator.hasNext()) {
        Map.Entry temp = (Map.Entry) iterator.next();

        // getKey is used to get key of map.
        String keyTwo = (String) temp.getKey();

        // getValue is used to get the value of the key in map.
        String valueTwo = (String) temp.getValue();

        out.write("<H3><A NAME=\" " + keyTwo + "/><B><I><FONT COLOR=\"red\">"
                + keyTwo + "</FONT></I></B></LI></H3>\n");

    for(String getTerm : checkValues){

        if (valueTwo.contains(getTerm)) {

            check = true;
            int foundTermPosition = valueTwo.indexOf(getTerm);
            lead = valueTwo.substring(0, foundTermPosition - 1);
            //fix left over..
            leftOver = valueTwo.substring(foundTermPosition, valueTwo.length());
            out.write(lead);
            out.write("<A HREF=\"#" + keyTwo + "\">" + keyTwo + "</A>");
            out.write(leftOver + "\n");
            //out.write("</blockquote>\n");

        }
    }
            if( check == false)
            {
            out.write(lead + " " + valueTwo);
            }
        }

        //System.out.println(valueTwo + leftOver);

        // used to put words defined in file mentioned in definition
        // with hyperlinks to their associated locations, and output the
        // definition.

    out.write("</P>\n" + "</UL>\n");
    out.write("</BODY>\n");
    out.write("</HTML>");

    out.close();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:55:11.393

当您的程序到达时

```
out.write("<H2>Terms and Definitions</H2>\n");
out.write("<UL>\n" + "<P>\n");

while (iterator.hasNext()) {
   ... 
```

迭代器没有更多的项目，因为它在前几行的第一个 while 循环中耗尽，而您正在打印索引。要再次遍历地图，您需要再次调用迭代器方法。所以上面的块会变成：

```
out.write("<H2>Terms and Definitions</H2>\n");
out.write("<UL>\n" + "<P>\n");

iterator = s.iterator();
while (iterator.hasNext()) {
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:34:31.087

据我了解，您想生成 html 文档。以我的拙见，在您的案例中，最好和通用的方法 -**使用任何模板引擎**。例如 -[阿帕奇速度](http://en.wikipedia.org/wiki/Apache_Velocity)。

[浏览本教程](http://www.javaworld.com/javaworld/jw-12-2001/jw-1228-velocity.html?page=1)需要几分钟

# c# - 使用 C# 发送短信

> ID：13677768
> 
> 赞同：2
> 
> 时间：2012-12-03T05:40:06.563
> 
> 标签：c#, .net, sms

> **可能重复：**
> [.net 短信发送库](https://stackoverflow.com/questions/12840069/net-sms-sending-libraries)

我从过去 3-4 天开始使用 .NET 我成功地使用 .NET 发送电子邮件现在我想使用 .Net 发送 SMS 我已经搜索了很多但找不到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T05:42:27.380

你考虑过使用[Twillio](http://www.twilio.com/)吗？

Twillio 是一种通过 REST API 公开语音和短信服务的电话。API 有一个 C# 实现客户端

您将能够发送和接收消息。

至于从 C# 发送短信诞生，我不相信这可以做到。

**更新**

过去，我在[TwilioSharp](https://github.com/jgable/TwilioSharp)上取得了成功。

如果 TilioSharp 不起作用，还有其他 .Net[库可供选择。](http://www.twilio.com/docs/libraries)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T05:45:02.703

据我所知，从 .Net 发送 SMS 需要使用可以访问移动网络网关（GSM、CDMA ..）的 Web 服务。有一些服务提供商为 .Net 开发人员提供用于发送 SMS 的 API。还有一些付费服务，您也可以为某些短信支付一些固定金额。您也可以找到一些免费的服务提供商。只需通过关键字“SMS API for .Net”搜索谷歌兄弟。

这是一个例子：

[http://www.cardboardfish.com/products/aggregatoroperator/httpsms_xmlsms_codeexamples.html](http://www.cardboardfish.com/products/aggregatoroperator/httpsms_xmlsms_codeexamples.html)

再举一个例子：

[http://www.codeproject.com/Articles/19023/Sending-SMS-using-NET](http://www.codeproject.com/Articles/19023/Sending-SMS-using-NET)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T05:49:52.350

更简单的解决方案 - 根据服务向适当的地址发送电子邮件：

[http://www.emailtextmessages.com](http://www.emailtextmessages.com)

# iphone - 如何使用 AVCaptureSession 录制 mp4 文件？

> ID：13677769
> 
> 赞同：3
> 
> 时间：2012-12-03T05:40:20.837
> 
> 标签：iphone, ios, cocoa-touch, avcapturesession, avcapturemoviefileoutput

我正在`.mov`使用`AVCaptureMovieFileOutput`with录制`AVCaptureSession`。我想记录`.mp4`文件，我想这是不可能的`AVCaptureMovieFileOutput`，知道如何记录`.mp4`文件吗？

编辑：我用谷歌搜索发现，有一种方法`AVAssetWriter`，但它并不简单`AVCaptureMovieFileOutput`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:51:25.603

还有另一种录制 mp4 文件的方法，实际上它不是录制的，使用 .mov 录制后，我们可以根据需要将其转换为 mp4 文件。这不是问题的确切答案，它可能对某人有所帮助。

# html - 在 bash 中使用 TagSoup 将 HTML 转换为 XHTML

> ID：13677772
> 
> 赞同：1
> 
> 时间：2012-12-03T05:40:29.747
> 
> 标签：html, bash, xhtml, tag-soup

我的印象是您可以使用 TagSoup 将 HTML 转换为 XHTML。我将 tagsoup jar 文件保存为 tagsoup.jar 我使用了以下命令`wget -O usa_stock.html "http://markets.usatoday.com/custom/usatoday-com/new/html-mktscreener.asp#" | java -jar tagsoup.jar usa_stock.html`当我使用此命令时，它会生成 html 和 xhtml 文件，但是当我在 firefox 中打开 xhtml 时，它是空的。我怀疑当我流水线时它只是不知道我试图转换哪个文件。

有人可以帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T17:51:00.840

您的代码中使用的管道 ( `|`) 肯定是错误的，更改它`&&`可能会解决您的问题。

1.  由于`wget`没有将检索网页输出到`stdout`，因此您没有将任何内容输入到 tagoup 中。
2.  尽管您还为 jsoup 指定了输入文件和输出文件，但您使用了管道。所以在`java-jar`开始执行时，`wget`仍在运行。您为 tagoup 指定的输入文件尚未准备好。

所以你需要在 jsoup 启动之前先`wget`以退出状态退出，这里将用于此目的。`0``&&`

# php - 使用 PHP 从 Google Maps API 读取对象数组

> ID：13677775
> 
> 赞同：0
> 
> 时间：2012-12-03T05:40:53.800
> 
> 标签：php, google-maps-api-3

这似乎是一个新手问题，但我只是在这里用头撞键盘，我找不到任何已经回答的问题让我继续前进。

场景是我试图通过使用 Google Maps API 对其进行地理编码来获取邮政编码的 Lat/Lng。我已经从 Google Maps API 作为 JSON 字符串返回结果，并使用 json_decode 将其放入 PHP 数组中。但它看起来像是一个对象数组，我很难理解如何深入研究数据以获得我的 lat/lng 值。

这是当前的路障...代码然后结果：

```
<?php
$jsonData = '{"results":[{"address_components":[{"long_name":"33647","short_name":"33647","types":["postal_code"]},{"long_name":"Tampa","short_name":"Tampa","types":["locality","political"]},{"long_name":"Florida","short_name":"FL","types":["administrative_area_level_1","political"]},{"long_name":"United States","short_name":"US","types":["country","political"]}],"formatted_address":"Tampa, FL 33647, USA","geometry":{"bounds":{"northeast":{"lat":28.17150,"lng":-82.26235779999999},"southwest":{"lat":28.07291710,"lng":-82.42569910}},"location":{"lat":28.14343180,"lng":-82.33433749999999},"location_type":"APPROXIMATE","viewport":{"northeast":{"lat":28.17150,"lng":-82.26235779999999},"southwest":{"lat":28.07291710,"lng":-82.42569910}}},"types":["postal_code"]}],"status":"OK"}';
$phpArray = json_decode($jsonData);
print_r($phpArray);

foreach ($phpArray as $key => $value) { 
    echo "<p>$key | $value</p>";
}
?> 
```

结果：

```
stdClass Object ( [results] => Array ( [0] => stdClass Object ( [address_components] => Array ( [0] => stdClass Object ( [long_name] => 33647 [short_name] => 33647 [types] => Array ( [0] => postal_code ) ) [1] => stdClass Object ( [long_name] => Tampa [short_name] => Tampa [types] => Array ( [0] => locality [1] => political ) ) [2] => stdClass Object ( [long_name] => Florida [short_name] => FL [types] => Array ( [0] => administrative_area_level_1 [1] => political ) ) [3] => stdClass Object ( [long_name] => United States [short_name] => US [types] => Array ( [0] => country [1] => political ) ) ) [formatted_address] => Tampa, FL 33647, USA [geometry] => stdClass Object ( [bounds] => stdClass Object ( [northeast] => stdClass Object ( [lat] => 28.1715 [lng] => -82.2623578 ) [southwest] => stdClass Object ( [lat] => 28.0729171 [lng] => -82.4256991 ) ) [location] => stdClass Object ( [lat] => 28.1434318 [lng] => -82.3343375 ) [location_type] => APPROXIMATE [viewport] => stdClass Object ( [northeast] => stdClass Object ( [lat] => 28.1715 [lng] => -82.2623578 ) [southwest] => stdClass Object ( [lat] => 28.0729171 [lng] => -82.4256991 ) ) ) [types] => Array ( [0] => postal_code ) ) ) [status] => OK )

results | Array

status | OK 
```

用于创建输入 JSON 的 URL：

[http://maps.googleapis.com/maps/api/geocode/json?address=33647&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=33647&sensor=false)

寻找一些帮助以将 Lat 和 Long 值提取到 PHP 变量中。

提前致谢！乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:03:32.643

results 的值实际上是另一个数组 - 因此您需要深入数组以获取所需的值。

此页面 (http://json.parser.online.fr/) 可能会帮助您更清楚地可视化数据。

这是一个用您的数据展示深度的可怕示例（数组作为值）：

```
<?php
$jsonData = '{"results":[{"address_components":[{"long_name":"33647","short_name":"33647","types":["postal_code"]},{"long_name":"Tampa","short_name":"Tampa","types":["locality","political"]},{"long_name":"Florida","short_name":"FL","types":["administrative_area_level_1","political"]},{"long_name":"United States","short_name":"US","types":["country","political"]}],"formatted_address":"Tampa, FL 33647, USA","geometry":{"bounds":{"northeast":{"lat":28.17150,"lng":-82.26235779999999},"southwest":{"lat":28.07291710,"lng":-82.42569910}},"location":{"lat":28.14343180,"lng":-82.33433749999999},"location_type":"APPROXIMATE","viewport":{"northeast":{"lat":28.17150,"lng":-82.26235779999999},"southwest":{"lat":28.07291710,"lng":-82.42569910}}},"types":["postal_code"]}],"status":"OK"}';
$phpArray = json_decode($jsonData,true);
print_r($phpArray);

foreach ($phpArray as $key => $value) {
    if ( $key == "results") {
        foreach ($value as $key2 => $value2) {
            foreach ($value2 as $key3 => $value3) {
                echo "<p>$key3 | $value3</p>";
            }
        }
    }
}
?> 
```

您需要深入挖掘几个级别才能找到所需的所有数据。不过，这应该为您指明正确的方向。

# asp.net-mvc - ASP.NET MVC 中更改密码的可选验证

> ID：13677776
> 
> 赞同：1
> 
> 时间：2012-12-03T05:40:58.267
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-4, data-annotations

我有以下型号

```
public AccountInfo {

    // loads of other property here as well.

    public string Password { get; set; }

    public string NewPassword { get; set; }

    [Compare("NewPassword", ErrorMessage = "New Passwords dont match.")]
    public string ConfirmNewPassword { get; set; }

} 
```

我正在使用数据注释来显示客户端验证消息。

现在我正在处理更改用户个人资料详细信息页面。

我需要做的是，连同电子邮件、全名、地址等其他详细信息，我必须显示 3 个字段，即

*   当前密码
*   新密码
*   确认新密码

现在的情况是这些是可选字段，用户可能不会填写它。但是当他这样做时，**我想确保所有 3 个字段都已填写。**，如果不是，我想使用数据注释显示一些验证错误。

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:59:33.853

没有任何内置的数据注释。您可以创建自定义属性来进行验证，但这并不容易。因此，我建议您使用 Jquery Validation / Javascript 来处理这个问题。

基本上你会想要覆盖提交事件并在那里做你自己的验证逻辑。您的代码将与此类似：

```
function SubmitToServer() { 
    if ($('#Password').length == 0 || ($('#Password').length > 0 && $('#NewPassword ').length > 1 && $(formId).valid()) {
        $(formId).submit();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:39:45.330

你可以`[Required]`用来告诉 RAZOR 这些是必须的或强制性的。

```
[Required]
public string Password { get; set; }

 [Required]
 public string NewPassword { get; set; }

 [Required]
 [Compare("NewPassword", ErrorMessage = "New Passwords dont match.")]
 public string ConfirmNewPassword { get; set; } 
```

如果你想提供价值范围意味着使用这个 -`[Range(1, 100)]`

如果你想使用密码长度意味着使用这个 -`[StringLength(5)]`

# python - 让 SQLAlchemy 在 create_all 上发布 CREATE SCHEMA

> ID：13677781
> 
> 赞同：32
> 
> 时间：2012-12-03T05:41:30.347
> 
> 标签：python, postgresql, sqlalchemy

我有一个带有如下模式参数的 SqlAlchemy 模型：

```
Base = declarative_base()

class Road(Base):
  __tablename__ = "roads"
  __table_args__ = {'schema': 'my_schema'}
  id = Column(Integer, primary_key=True) 
```

当我正确使用它时，会在前面`Base.metadata.create_all(engine)`发出带有架构名称的 a ，但 Postgresql 正确地抱怨架构不存在。`CREATE TABLE``CREATE TABLE my_schema.roads (`

我是否错过了让 SqlAlchemy 发出的步骤，`CREATE SCHEMA my_schema`或者我是否必须手动调用它？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-03T05:41:30.347

我已经在我的 db init 脚本上手动完成了，如下所示：

```
from sqlalchemy.schema import CreateSchema
engine.execute(CreateSchema('my_schema')) 
```

但这似乎没有我预期的那么神奇。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-03-06T00:10:32.297

我遇到了同样的问题，并相信发布 DDL 的“最干净”的方式是这样的：

```
from sqlalchemy import event
from sqlalchemy.schema import CreateSchema

event.listen(Base.metadata, 'before_create', CreateSchema('my_schema')) 
```

这将确保在创建基础元数据中包含的任何内容之前，您拥有它的架构。但是，这不会检查模式是否已经存在。

`CreateSchema('my_schema').execute_if(callback_=check_schema)`如果您愿意编写`check_schema`回调（文档中的“[控制 DDL 序列](http://docs.sqlalchemy.org/en/rel_0_9/core/ddl.html#controlling-ddl-sequences)” ），您可以这样做。`should_create`或者，作为一种简单的方法，只需使用`DDL("CREATE SCHEMA IF NOT EXISTS my_schema")`（对于 Postgres）：

```
from sqlalchemy import DDL

event.listen(Base.metadata, 'before_create', DDL("CREATE SCHEMA IF NOT EXISTS my_schema")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-20T21:04:37.963

我编写了一个函数，它根据接受的答案创建声明的模式。它使用来自每个映射类的**__table_args__ dict 的****模式**值。

 **```
from sqlalchemy import event, DDL

# Import or write your mapped classes and configuration here

def init_db():
    for mapper in Base.registry.mappers:
        cls = mapper.class_
        if issubclass(cls, Base):
            table_args = getattr(cls, '__table_args__', None)
            if table_args:
                schema = table_args.get('schema')
                if schema:
                    stmt = f"CREATE SCHEMA IF NOT EXISTS {schema}"
                    event.listen(Base.metadata, 'before_create', DDL(stmt))
    Base.metadata.create_all(bind=engine) 
```**

# java - 如何将地图从控制器传递到 jsp/javascript？

> ID：13677784
> 
> 赞同：0
> 
> 时间：2012-12-03T05:41:38.453
> 
> 标签：java, jsp, map, hashmap

我正在尝试将存储在 a 中的值发送`Map<Integer, Integer>`到 javascript。每当使用警报加载和显示数据时：

![在此处输入图像描述](../Images/478b9d7b7e7f88544d7ce6f189509ba2.png)

我知道原因是 jsp/javascript 无法解释它。以下是我的代码。

在我的控制器中：

```
@ResponseBody
@RequestMapping(method = RequestMethod.GET, value="/privateChat/sizes", params = {"sender", "receivers"})
    return privateChatService.getPrivateChatSizes(sender, 
            receivers.charAt(receivers.length() - 1) == ';' ? receivers.substring(0, receivers.length() - 1) : receivers);
} 
```

在我的jsp中：

```
$("#hdnPcSizes").load(contextPath+"/dashboard/privateChat/sizes?sender="+sender+"&receivers="+receivers, 
                function (responseText, textStatus, xhr) {
            alert(responseText);
}); 
```

`#hdnPcSizes`是`hidden`在声明为 的同一 jsp 页面中找到的字段`<input type="hidden" id="hdnPcSizes" />`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:33:50.453

从 JSP 调用返回值的函数。

使用**net.sf.json**库

```
return JSONSerializer.toJSON(map); 
```

您不必担心写入响应。

# c# - Datagridview 中的复选框未更新

> ID：13677794
> 
> 赞同：4
> 
> 时间：2012-12-03T05:42:33.280
> 
> 标签：c#, winforms, datagridview, datagridviewcheckboxcell

我`Datagridview`在 winform 中使用 a 并使用虚拟模式来填充未绑定的数据。

我有一个复选框标题，带有一个静态复选框。当我单击复选框时，所有复选框状态都会切换。

但是，检查状态不会刷新。我需要将鼠标悬停在`Datagridview`刷新复选框的状态。

早些时候，虚拟模式设置为 false，我没有遇到这个问题。任何想法，如果我错过了什么。

![在此处输入图像描述](../Images/c1d1993d418ff174656c3764f8a1dd18.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-03T01:31:56.853

什么对我有用：

```
this.dataGridView2.CurrentCell = null (thanks silent winter) 
```

或者

```
this.dataGridView2.RefreshEdit();
this.dataGridView2.Refresh(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-08T20:32:45.593

请注意， Refresh() 对我不起作用。我不得不使用`this.dataGridView2.CurrentCell = null`

[DataGridView - 如果选择没有从单元格中丢失，则不会保存值](https://stackoverflow.com/questions/963601/datagridview-value-does-not-gets-saved-if-selection-is-not-lost-from-a-cell)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T02:58:50.193

我正在发布答案以供将来参考以及可能面临类似问题的用户。

添加`this.dataGridView2.Refresh();`复选框更改的事件处理程序解决了该问题。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-06T12:45:05.823

如果标题上的复选框是 datagridview 的子控件，请使用 RefreshEdit 方法刷新结果。我最近有同样的问题。

# java - 在链接列表中创建 x 个元素

> ID：13677796
> 
> 赞同：0
> 
> 时间：2012-12-03T05:42:44.057
> 
> 标签：java, linked-list

我的任务是制作一个包含`5, 7, 3,5, 7, 3`元素并`5, 7, 3`重复 100 次的链接列表

```
IntNode first = new IntNode() ;
first.value = 5 ; //first -> 5
first.next = new IntNode() ;
first.next.value = 7 ; //first -> 5 -> 7
first.next.next.next = new IntNode() ;
first.next.next.next.value = 3 ; 
```

而不是只是在接下来的 x 次中继续添加重复元素，有什么方法可以使用循环来创建链接列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:24:11.257

试试这个方法：

```
 // IntNode first = new IntNode();
    // first.value = 5; // first -> 5
    // first.next = new IntNode();
    // first.next.value = 7; // first -> 5 -> 7
    // first.next.next.next = new IntNode();
    // first.next.next.next.value = 3;
    int values[] = { 5, 7, 3 };     
    IntNode first = new IntNode();

    for (int i = 0; i < 100; i++) {
        IntNode temp = new IntNode();
        temp.value = values[i % 3];
        temp.next = new IntNode();
        first.next = temp;
        first = first.next;
    } 
```

# c++ - 使用 C++ 保存的文件未显示在目录中

> ID：13677801
> 
> 赞同：1
> 
> 时间：2012-12-03T05:43:22.063
> 
> 标签：c++, file, object, save, fstream

我有一个简单的 I/O 程序，但是当我保存一个文件时，它并没有在项目目录或我计算机上的其他任何地方创建。一切都编译得很好，所有功能都可以工作，但是在加载时我收到一个空白文件。我怎样才能解决这个问题？

我也在使用 Xcode。

```
 #include <iostream>
    #include <fstream>
    #include <string>
    #include <cstdlib>

    using namespace std;

    class Person
    {
        public:
            Person(){cout << "\n\tA person has been built. Edit their Info";}
            ~Person();

            void setName(string nameIn){name = nameIn;}
            void setOccupation(string occupationIn){occupation = occupationIn;}
            void setLocation(string locationIn){location = locationIn;}
            void setReferences(string referencesIn){references = referencesIn;}

            string getName(){return name;}
            string getOccupation(){return occupation;}
            string getLocation(){return location;}
            string getReferences(){return references;}

        private:
            string name;
            string occupation;
            string location;
            string references;
    };

    void CreatePerson();
    void EditPerson();
    void DisplayPerson();
    void SavePerson();
    void LoadPerson();

    Person * Pptr;

    int main(void)
    {
        char choice[10];
        Pptr = new Person();

        cout << "\n\tPersonnel Database";

        while (choice[0] != 'q')
        {
            cout << "\n\t--------------MAIN MENU---------";
            cout << "\n\t (C)reate a Person";
            cout << "\n\t (E)dit a Person";
            cout << "\n\t (D)isplay a Perosn";
            cout << "\n\t (S)ave a Perosn";
            cout << "\n\t (L)oad a Person";
            cout << "\n\t (Q)uit";
            cout << "\n\t";

            cin >> choice;

            switch(choice[0])
            {
                case 'c': CreatePerson();break;
                case 'e': EditPerson();break;
                case 'd': DisplayPerson(); break;
                case 's': SavePerson();break;
                case 'l': LoadPerson();break;
                case 'q': cout << "Exiting...";break;
                default: cout <<"\n\tInvalid Entry";
            }
        }
        return EXIT_SUCCESS;
    }

    void CreatePerson()
    {
        Pptr = new Person();

    }

    void EditPerson()
    {
        string tempInfo;

        cout << "\n\tEdit Personnel record";

        cout << "\n\tName: ";
        cin.ignore();
        getline(cin,tempInfo);
        Pptr->setName(tempInfo);

        cout << "\n\tOccupation: ";
        getline(cin,tempInfo);
        Pptr-> setOccupation(tempInfo);

        cout << "\n\tLocation: ";
        getline(cin,tempInfo);
        Pptr->setLocation(tempInfo);

        cout << "\n\tReferences: ";
        getline(cin,tempInfo);
        Pptr->setReferences(tempInfo);
    }

    void DisplayPerson()
    {
        cout << "\n\tPersonnel  Record";
        cout << "\n\tName: " << Pptr->getName();
        cout << "\n\tOccupation: "<< Pptr->getOccupation();
        cout << "\n\tLocation: " << Pptr->getLocation();
        cout << "\n\tReferences: " << Pptr->getReferences();
    }

    void SavePerson()
    {
        try
        {
            ofstream data;
            data.open("personnelData.file",ios::out);

            data << Pptr->getName() << "\n"; // \n is the delimiter
            data << Pptr->getOccupation() << "\n";
            data << Pptr->getLocation()<< "\n";
            data << Pptr->getReferences() << "\n";

            data.close();
            cout << "\n\tSuccessfully Saved";
        }
        catch (exception e) {
            cout << "\n\tcould not save Person.";
        }
    }

    void LoadPerson()
    {
        try
        {
            string tempInfo;
            Pptr = new Person();

            ifstream in;
            in.open("data.txt", ios::in);

            getline(in, tempInfo);
            Pptr->setName(tempInfo);

            getline(in, tempInfo);
            Pptr->setOccupation(tempInfo);

            getline(in, tempInfo);
            Pptr->setLocation(tempInfo);

            getline(in, tempInfo);
            Pptr->setReferences(tempInfo);
        }
        catch (exception e) {
            cout <<"\n\tUnable to load file";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:51:12.333

您的文件在`bin`目录中；检查那里。

因为您没有给出文件路径，这意味着它是默认在`bin`目录中创建的。

要将其保存在所需的目录中，您需要提供所需的目录路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:00:37.350

建议：执行以下所有操作，然后省略阶段：

1）`SavePerson`直接从main调用，以确保它被调用。

2) 给文件名一个完整的路径，比如`c:\\file.txt`.

3) 尝试使用与 不同的扩展名`.file`，例如`.txt`.

# javascript - 骨干网.js路由问题

> ID：13677802
> 
> 赞同：0
> 
> 时间：2012-12-03T05:43:27.557
> 
> 标签：javascript, html, json, backbone.js, handlebars.js

我对 js 和backbone.js 非常陌生，我向你保证我已经在文档和这里进行了广泛的搜索。我正在尝试构建一个显示照片（最终是其他内容）的简单站点，并且我希望能够单击照片以查看具有另一个视图/模板的不同“页面”。我似乎无法让它工作，现在我在路由器的 photoById 方法中收到“未捕获的类型错误：无法调用未定义的方法 'get'”。下面的代码...谢谢！

//-------- main.js

```
var photoListTemplate = Handlebars.compile($('#photo-list-template').html());
var photoTemplate = Handlebars.compile($('#photo-template').html());
var navTemplate = Handlebars.compile($('#navigation-template').html());

var Photo = Backbone.Model.extend({
  defaults: function() {
    return {

    };
  },
  initialize: function(options) {

  }
});
var PhotoCollection = Backbone.Collection.extend({
    model: Photo
});

var PhotoView = Backbone.View.extend({
    events: {

    },

    //tagName: 'td',
    className: 'photo',
    template: photoTemplate,

    initialize: function(options) {
        _.bindAll(this, 'render');
        this.model.on('change', this.render);
    },
    render: function() {
        $(this.el).empty().append(this.template(this.model.toJSON()));
        return this;
    }
});

var PhotoCollectionView = Backbone.View.extend({
    tagName: 'table',
    className: 'photo-list',
    template: photoListTemplate,
    events: {

    },
    initialize: function(options) {
        this.collection.on('add remove', this.render, this);
    },
    render: function() {
        $(this.el).empty();
        this.collection.each(function(photo){
            $(this.el).append(new PhotoView({model: photo}).render().el);
        }, this);
        return this;
    }
});

var PhotoRouter = Backbone.Router.extend({
    routes: {
        "": "list",
        "photo/:id": "photoById"
    },
    initialize: function(options) {

    },

    allPhotos: function() {
        this.photoList = new PhotoCollection();
        this.photoCollectionView = new PhotoCollectionView({collection: this.photoList});
        this.photList.fetch();
        $('#content').empty().append(this.photoCollectionView.render().el);
    },

    photoById: function(id){
        this.photo = this.photoList.get(id);
        this.photoView = new PhotoView({model: this.photo});
        $('#content').empty().append(this.photoView.render().el);
    }
});

var photos = null;
$.getJSON('http://localhost:3000/photos.json', function(response){
    photos = new PhotoCollection(response);
    $('#container').append(new PhotoCollectionView({collection: photos}).render().el);
    var photoRouter = new PhotoRouter();
    Backbone.history.start();
}); 
```

/----- index.html

```
<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/bootstrap.css">

    <link rel="stylesheet" href="css/main.css">
    <script src="js/vendor/modernizr-2.6.2.min.js"></script>
</head>
<body>
    <!--[if lt IE 7]>
        <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <!-- Add your site or application content here -->
    <!-- <p>Replace Me! Replace Me!</p> -->

    <div class='container' id='container'>
    </div>

    <script type="text/x-handlebars-template" id='navigation-template'>
        <div class='navbar'>
            <div class='navbar-inner'>
                <a class='brand' href=#>ohayon</a>
                <ul class='nav'>

                </ul>
            </div>
        </div>
    </script>

    <script type="text/x-handlebars-template" id='photo-template'>
        <div class='lead'>
        <a href='#photo/{{id}}'>{{name}}</a>
        <img src='http://localhost:3000{{image.url}}' height='200' width='200'>
        </div>
    </script>

    <script type="text/x-handlebars-template" id='photo-list-template'>
        <div class='lead'>
        <a href='#photos/{{id}}'>{{name}}</a>
        <img src='http://localhost:3000{{image.url}}'>
        </div>
    </script>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.2.min.js"><\/script>')</script>
    <script src="js/plugins.js"></script>

    <!-- If we want Boostrap components -->
    <script src="js/bootstrap.js"></script>

    <!-- Templating with Handlebars -->
    <script src="js/handlebars.js"></script>

    <!-- We Need Underscore.js -->
    <script src="js/underscore.js"></script>

    <!-- And Finally Backbone -->
    <script src="js/backbone.js"></script>

    <!-- Your Code goes here -->
    <script src="js/main.js"></script>

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
        var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:53:21.247

按照您对其进行编码的方式，无法保证`this.photoList`在您尝试在`photoById`. 您可能希望在路由器的 init 函数中创建它：

```
initialize: function(options) {
    this.photoList = photos;
}, 
```

`allPhotos`还要从-- 你不想重新创建`PhotoCollection`或调用中删除几行`fetch`，因为它已经在你的应用程序的第一步中创建和填充。应该是这样的：

```
allPhotos: function() {
    this.photoCollectionView = new PhotoCollectionView({collection: this.photoList});
    $('#content').empty().append(this.photoCollectionView.render().el);
}, 
```

（另一个问题，您`container`有时会使用其他问题`content`。）

[它在这里运行。](http://jsfiddle.net/UePL4/2/) （我使用了一些虚拟数据进行测试。）

# xcode - 模拟器上的越狱应用程序？

> ID：13677803
> 
> 赞同：2
> 
> 时间：2012-12-03T05:43:50.940
> 
> 标签：xcode, ios-simulator, jailbreak

我正在 Xcode 上为越狱的 iPhone 开发应用程序。我使用的是 Xcode 4.2，而我的 iPhone 操作系统是 iOS6。我无法将我的 iPhone 与 XCode 连接以进行测试，因为 XCode 4.2 不支持 iOS6。

每次编译代码并尝试在模拟器上运行时，我都无法摆脱*沙箱*。所以我尝试创建一个 .ipa 文件，将其安装在 iPhone 上并进行测试。

有没有办法在模拟器上测试越狱的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:22:05.237

这取决于您要测试哪种越狱功能。我有一个可以访问完整文件系统的越狱应用程序，当我在模拟器中运行它时，我可以访问我 Mac 上的所有文件，而不仅仅是从模拟器的主目录（参见[此处](http://erike.net/wordpress/wp-content/uploads/iOS-Simulator-Screen-shot-Nov-23-2012-8.07.04-PM.png)显示模拟器中 Mac 的应用程序目录的图片） . 如果这是您的应用程序中的内容，您可以在 Mac 上重建 iPhone 的文件系统并将其用于测试。但是，如果您正在做访问 iPhone 的串行端口之类的操作，那么 Simulator 显然不具备该功能。

或者，您是否尝试过创建构建后脚本以通过 SSH 将 .app 文件安装到您的 iPhone 上？这是我使用的脚本（变量`IPOD`是设备在我的 WLAN 中的 IP 本地地址，其他来自 Xcode）：

```
bundleid=`defaults read $BUILT_PRODUCTS_DIR/${WRAPPER_NAME}/Info.plist CFBundleIdentifier`
# kill if running, remove old version, copy new one and launch it
ssh -p $PORT root@$IPOD "killall $EXECUTABLE_NAME"
ssh -p $PORT root@$IPOD "rm -r /private/var/stash/Applications/$WRAPPER_NAME"
scp -P $PORT -r $BUILT_PRODUCTS_DIR/${WRAPPER_NAME} root@$IPOD://private/var/stash/Applications
ssh -p $PORT root@$IPOD "open $bundleid" 
```

该`open`命令在 Cydia 上可用。

这显然是一个非常简单的脚本，并且可能有更好的方法（如使用`dpkg`），但它为我完成了工作。

你显然需要在你的 iPhone 上安装和激活 SSH，以及其他一些东西`killall`（在 Cydia 中都可用）。

# gwt - 如果我转到选项卡面板中的另一个选项卡，这是我的 gwt 代码...弹出窗口仍然存在..我已附加快照

> ID：13677809
> 
> 赞同：0
> 
> 时间：2012-12-03T05:44:21.953
> 
> 标签：gwt

```
if (checked) {
    int left = toothWidget.getToothImage().getAbsoluteLeft(); 
```

* * *

```
 int top =  toothWidget.getVPanel().getAbsoluteTop();//toothWidget.getToothImage().getAbsoluteTop();
    Image im = new Image();                                         
    im.setUrl("images/"+ toothWidget.getToothNumber()+ menuItem.getImg());
    int offx = left;                                                
    int offy = top;                                                 
    final PopupPanel popup = new PopupPanel();                      
    popup.setStylePrimaryName("transparent");                       
    popup.setPopupPosition(Math.max(offx, 0),Math.max(offy, 0));    
    //popup.add(im);                                                
    ToothWidget wgt = new ToothWidget(toothWidget.getToothNumber(),toothWidget.getToothNumber()+menuItem.getImg(), toothWidget.getTeeth());
    toothWidget.getTeeth().getMap().get(toothWidget.getToothNumber()).put(menuItem.getName(), wgt);
    wgt.setMenu(toothWidget.getMenu());                             
    wgt.setPanel(popup);                                            
    popup.add(wgt);                                                 
    popup.show();                                                   
}                                                           
else {                                                      
    ToothWidget wgt = toothWidget.getTeeth().getMap().get(toothWidget.getToothNumber()).remove(menuItem.getName());
    wgt.getPanel().hide();                                          
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:54:10.507

为什么不使用调试器来找出代码的哪一部分没有按预期工作？也许你的 else-block 没有到达，或者toothWidget.gePanel() 没有返回你的 PopupPanel..

# c# - 使用事务时出错

> ID：13677812
> 
> 赞同：1
> 
> 时间：2012-12-03T05:44:52.287
> 
> 标签：c#, asp.net, sqltransaction

> **可能重复：**
> [ExecuteNonQuery 要求命令在我的代码中有事务错误](https://stackoverflow.com/questions/10648718/executenonquery-requires-the-command-to-have-a-transaction-error-in-my-code)

```
strSQL = "insert into............";

SqlTransaction objSqlTransaction = Master.objSqlDbComm.SqlConnectionObject.BeginTransaction();
try
{
    Master.objSqlDbComm.ExecuteNonQuery(strSQL);
    objSqlTransaction.Commit();
}
catch(Exception)
{
    objSqlTransaction.Rollback();
}
finally
{
    objSqlTransaction.Dispose();
} 
```

当我使用上面的代码得到错误

> *当分配给命令的连接处于挂起的本地事务中时，ExecuteNonQuery 要求该命令具有事务。该命令的 Transaction 属性尚未初始化。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:48:15.733

你需要给命令对象`ExecuteNonQuery`

做这样的事情：

```
SqlCommand cmd = new SqlCommand(your_sqlText, your_sqlcon, your_sqlTrans);  

    cmd.ExecuteNonQuery(); 
```

# php - 使用 cURL 发送文件

> ID：13677817
> 
> 赞同：0
> 
> 时间：2012-12-03T05:45:35.463
> 
> 标签：php, file, curl

我已经用 cURL 发送了一些帖子数据，现在正在尝试发送一个文件，但在此过程中迷路了。我正在使用带有文件输入的表单。然后希望 cURL 将其发送到我的服务器。这是我的上传页面。 `<form action="curl_page.php" method="post" enctype="multipart/form-data"> Filename: <input type="file" name="file" id="file" /> <br /> <input type="submit" name="submit" value="Submit" /> </form>`

这是我的卷曲页面，有一些问题。

```
<?php
$tmpfile = $_FILES['file']['tmp_name'];
$filename = basename($_FILES['file']['name']);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://my_server/file_catch.php");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);
$data = array(
    'uploaded_file' => '@'.$tmpfile.';filename='.$filename,
);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$output = curl_exec($ch);
curl_close($ch);
?> 
```

我服务器上的 file_catch.php 看起来像这样。

```
<?php
$folder = "audio/";

$path = $folder . basename( $_FILES['file']['name']);

if(move_uploaded_file($_FILES['file']['tmp_name'], $path)) {
    echo "The file ".  basename( $_FILES['file']['name']). " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
}
?> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:59:42.717

您没有发送通过发布请求获得的文件。使用以下代码通过 CURL 请求发布文件。

```
$tmpfile = $_FILES['image']['tmp_name'];
$filename = basename($_FILES['image']['name']);

$data = array(
    'uploaded_file' => '@'.$tmpfile.';filename='.$filename,
);

$ch = curl_init();   
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
// set your other cURL options here (url, etc.)

curl_exec($ch); 
```

有关更多参考，请查看以下链接 [Send file via cURL from form POST in PHP](https://stackoverflow.com/questions/4223977/send-file-via-curl-from-form-post-in-php)

# ios - 链接两个不同的库时出现重复符号错误

> ID：13677818
> 
> 赞同：1
> 
> 时间：2012-12-03T05:45:36.823
> 
> 标签：ios, xcode

平台和版本 iOS Mac OS X 10.7.4 XCode 4.5

硬件：Mac mini，型号 A1347，处理器：2.3 GHz，Intel Core i5，内存：8 GB，1600 MHz DDR3

**问题描述** 我负责为我公司的所有iOS团队将一些常用代码抽象成一个静态库，我必须解决这个问题。

如果我想与静态库 Aa 和 Ba 链接，并且 Aa 和 Ba 都依赖于 Ca，则链接进度将失败并出现重复符号错误。有解决办法吗？

这个问题可以再复杂一些，Aa、Ba、Ca都有分类，Aa用的是1.0版的Ca，而Ba用的是2.0版的Ca

我已经将情况抽象成一个项目，可以通过以下方式访问：http: [//dl.dropbox.com/u/89544999/%E5%BD%92%E6%A1%A3.zip](http://dl.dropbox.com/u/89544999/%E5%BD%92%E6%A1%A3.zip)

# gsutil - 使用 gsutil 下载

> ID：13677819
> 
> 赞同：0
> 
> 时间：2012-12-03T05:45:54.093
> 
> 标签：gsutil

我正在使用 gsutil 从谷歌存储下载跟踪文件。我使用的命令是：

gsutil/gsutil cp gs://clusterdata-2011-1/task_usage/part-00499-of-00500.csv.gz ./

但我得到一个错误：

GSReponseError：状态=404，代码=NoSuchKey，原因=未找到。

但是我在 gsutil 中使用了 ls 命令并且该文件存在。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:06:24.343

它终于起作用了。原因可能是 gsutil 版本或上次服务器不工作。

# .net - IIS 6 性能监视器

> ID：13677820
> 
> 赞同：2
> 
> 时间：2012-12-03T05:46:41.133
> 
> 标签：.net, iis-7, iis-6, performance-monitor

我想获取特定网站的活动用户会话。

我正在使用性能监视器来获取 IIS6 网站的当前活动会话。

**活动会话计数器为我提供了会话实例，因此在IIS 7 - windows server 2008 r2**上为特定网站提供了活动会话计数，但是当我在**IIS6 - windows server 2003 服务器**上尝试相同时，性能计数器不显示任何会话实例。

任何想法？

# vb.net - 如何在 Windows Store/WP8/WinRT 的可移植类库中使用反射？

> ID：13677822
> 
> 赞同：4
> 
> 时间：2012-12-03T05:46:47.760
> 
> 标签：vb.net, reflection, windows-runtime, windows-phone-8

我需要找到以下代码的等效项以在可移植库中使用：

```
 Public Overridable Function GetPropertyValue(ByVal p_propertyName As String) As Object
        Dim bf As System.Reflection.BindingFlags
        bf = Reflection.BindingFlags.IgnoreCase Or Reflection.BindingFlags.Public Or Reflection.BindingFlags.Instance Or Reflection.BindingFlags.NonPublic
        Dim propInfo As System.Reflection.PropertyInfo = Me.GetType().GetProperty(p_propertyName, bf)
        Dim tempValue As Object = Nothing

        If propInfo Is Nothing Then
            Return Nothing
        End If

        Try
            tempValue = propInfo.GetValue(Me, Nothing)

        Catch ex As Exception
            Errors.Add(New Warp10.Framework.BaseObjects.BaseErrorMessage(String.Format("Could not Get Value from Property {0}, Error was :{1}", p_propertyName, ex.Message), -1))
            Return Nothing
        End Try

        Return tempValue

    End Function 
```

BindingFlags 似乎不存在。System.Reflection.PropertyInfo 是有效类型，但我不知道如何填充它。有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T00:47:52.880

对于 Windows 8/Windows Phone 8，许多反射功能已移至新的 TypeInfo 类。[您可以在此 MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh535795.aspx)中找到更多信息。对于包括运行时属性（例如，包括那些继承的属性）在内的信息，您也可以使用新的[RuntimeReflectionExtensions 类](http://msdn.microsoft.com/en-us/library/windows/apps/system.reflection.runtimereflectionextensions.aspx)（其中过滤可以简单地通过 LINQ 完成）。

虽然这是 C# 代码（我很抱歉 :)），但使用这个新功能是相当等价的：

```
public class TestClass
{
    public string Name { get; set; }

    public object GetPropValue(string propertyName)
    {
        var propInfo = RuntimeReflectionExtensions.GetRuntimeProperties(this.GetType()).Where(pi => pi.Name == propertyName).First();
        return propInfo.GetValue(this);
    }
} 
```

如果您只关心在类本身上声明的属性，则此代码会更简单：

```
public class TestClass
{
    public string Name { get; set; }

    public object GetPropValue(string propertyName)
    {
        var propInfo = this.GetType().GetTypeInfo().GetDeclaredProperty(propertyName);
        return propInfo.GetValue(this);
    }
} 
```

# jquery - jqgrid 内联编辑仅在选定的单元格上，而不是行

> ID：13677823
> 
> 赞同：3
> 
> 时间：2012-12-03T05:46:52.810
> 
> 标签：jquery, asp.net-mvc, jqgrid

我的应用程序中有一个 jqgrid，它工作正常，但与我的要求略有不同，当单击特定单元格时，整行被选中，但我只想选择那个特定单元格...下一个我能够在点击“Enter”键时更新行值，但我希望在用户离开该特定单元格后立即更新单元格值

这是我的jQuery代码

```
<script type="text/javascript">
    $(function () {
        var lastsel;

        jQuery("#list").jqGrid({
            url: '/Home/GetStudents/',
            datatype: 'json',

            mtype: 'POST',
            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],
            colModel: [
      { name: 'StudentID', sortable: false, key: true },
      { name: 'FirstName', key: true },
      { name: 'LastName', sortable: false, key: true },
      { name: 'Email', width: 200, sortable: false, key: true}],
            cmTemplate: { align: 'center', editable: true },
            pager: '#pager',
            width: 750,
            rowNum: 15,
            rowList: [5, 10, 20, 50],
            sortname: 'StudentID',
            sortorder: "asc",
            viewrecords: true,
            caption: ' My First JQgrid',
            onSelectRow: function (StudentID) {

                if (StudentID != lastsel) {

                    jQuery('#list').jqGrid('restoreRow', lastsel);
                    jQuery('#list').jqGrid('editRow', StudentID, true);

                    lastsel = StudentID;

                }

            },

            editurl: '/Home/About/',

            caption: "jQgrid Sample"

        });

        jQuery("#list").jqGrid('navGrid', "#pager", { edit: false, add: false, del: false });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:47:53.293

看来您使用了错误的[编辑模式](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ajqgriddocs#editing)。jqGrid 支持树编辑模式，可以在许多变体中额外使用。

您的需求描述看起来您应该使用[单元格编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing)而不是您当前使用的[内联编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing)。

# css - 当光标位于页面上 li 元素的一部分上时，如何使光标显示为指针？

> ID：13677829
> 
> 赞同：1
> 
> 时间：2012-12-03T05:47:26.187
> 
> 标签：css, html

我有以下 HTML：

```
<ul id='x'> 
   <li>
      <a class="document-web1" data-href="/x">x</a>
   </li>
   <li>
      <a class="document-web2" data-href="/y">y</a>
   </li>
</ul> 
```

我设置了这个事件：

```
$("#content-button-panel")
   .on('click', 'a', function (event) {
      event.preventDefault();
      var $link = $(this);
      getContentAjax($link);
   }); 
```

这可行，但是当我的光标移动到文本上时，它会变为垂直文本选择栏而不是指针。有什么方法可以使光标在 li 元素的任何部分上时始终显示为箭头？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T05:50:32.543

如果您只想更改光标，可以在 CSS 中使用它：

```
li
{
 cursor: default;
 /*cursor: pointer;*/
} 
```

另外，如果您不确定哪个属性呈现哪个光标，请查看以下链接，它将消除您的困惑。

[CSS 游标](http://www.echoecho.com/csscursors.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T05:50:57.123

读完你的标题后，它看起来像你想要的

```
li:hover{

cursor:pointer;
} 
```

以上将使光标像

![在此处输入图像描述](../Images/d02040232683b7c1b32c3fa47e28f014.png)

但是在阅读了你的整个问题之后

```
li:hover{

cursor:default;
} 
```

这将显示光标

![在此处输入图像描述](../Images/b38ba1cc8c6b0b7fd683f750f0f5a68f.png)

[[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/2nVVh/)]]]

还可以通过实时取景[**检查它非常酷**](http://www.w3schools.com/cssref/playit.asp?filename=playcss_cursor&preval=se-resize)

现在我建议你写相关的标题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:50:25.160

你想要的 css 属性是`pointer`. 将其设置为该`default`值将强制浏览器将指针呈现为箭头，即使元素`href`上没有属性。`a`

```
#x a {
    cursor:default;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T05:50:40.047

我自己对 jquery 有点陌生，但我相信你必须使用 onhover 或 onmouseover 而不是点击。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T05:52:02.373

您可以使用 的`cursor`属性`css`，`css(cursor, pointer)`例如

# python - 如何在 django python 中为 servinf 可下载文件创建通用函数/视图

> ID：13677832
> 
> 赞同：0
> 
> 时间：2012-12-03T05:47:54.863
> 
> 标签：python, django, download

我在 html 表中显示对象列表。我希望他们下载链接文件的每一行前面都有下载链接。

我做了这个功能

```
def make_downloadable_link(path):
    #Prepare the form for downloading
    wrapper      = FileWrapper(open(mypath))
    response     = HttpResponse(wrapper,'application/pdf')
    response['Content-Length']      = os.path.getsize(mypath)  
    fname = mypath.split('/')[-1]  
    response['Content-Disposition'] = 'attachment; filename= fname'
    return response 
```

如果我将它用于单个文件的硬编码路径，这工作正常。但我想制作一个通用视图，以便它适用于表中的所有文件

我在变量中有可用的文件路径，`object.path`但我很困惑如何将路径对象传递给下载文件视图。因为我想向用户隐藏该实际路径。

我不知道在下载文件视图的 URLs.py 文件中写什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:01:55.753

你想做的是从对象获取实际的文件路径。正如您所说，文件路径存储在`object.path`其中，这很容易。

例如：

网址.py

```
url(r'^download/(?P<object_id>\d+)/$', "yourapp.views.make_downloadable_link", name="downloadable") 
```

在views.py中：

```
def make_downloadable_link(object_id):

    # get object from object_id
    object = ObjectModel.objects.get(id=object_id)
    mypath = object.path

    #prepare to serve the file
    wrapper      = FileWrapper(open(mypath))
    response     = HttpResponse(wrapper,'application/pdf')
    response['Content-Length']      = os.path.getsize(mypath)  
    fname = mypath.split('/')[-1]  
    response['Content-Disposition'] = 'attachment; filename= fname'
    return response 
```

# delphi - 如何同步 3 个无线电组（不处理 3 个 OnClick()S）？

> ID：13677833
> 
> 赞同：1
> 
> 时间：2012-12-03T05:47:56.673
> 
> 标签：delphi

我有 3 个单选组，它们显示在单个表单应用程序的不同选项卡上，但它们基本上都具有相同的基础功能（一次只能对用户可见一个）。

也就是说，如果用户选择其中任何一个的新单选按钮，我想以编程方式更新`ItemIndex`其他两个单选按钮，以匹配。

但是，我不想执行该`OnClick()`功能三次。

有没有一种简单的方法可以做到这一点，或者我应该只使用一个单选组并不断更改它`Parent`，`Top`并且`Left`随着用户更改可见选项卡？

该应用程序目前没有菜单，因此仅为此添加一个似乎很难看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:52:47.523

创建 3 个无线电组，但只有一个事件处理程序并将其分配给所有无线电组：

```
procedure TForm1.RadioGroupClick(Sender: TObject);

var Index : Integer;

begin
 RadioGroup1.OnClick := nil;
 RadioGroup2.OnClick := nil;
 RadioGroup3.OnClick := nil;
 Index := TRadioGroup(Sender).ItemIndex;
 RadioGroup1.ItemIndex := Index;
 RadioGroup2.ItemIndex := Index;
 RadioGroup3.ItemIndex := Index;
 RadioGroup1.OnClick := RadioGroupClick;
 RadioGroup2.OnClick := RadioGroupClick;
 RadioGroup3.OnClick := RadioGroupClick;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T07:21:15.267

您可以使用内存中的 TDataset 和许多 TDBRadioGroup 小部件

*   [http://lazarus-ccr.sourceforge.net/docs/lcl/dbctrls/tdbradiogroup.html](http://lazarus-ccr.sourceforge.net/docs/lcl/dbctrls/tdbradiogroup.html)
*   [http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/DBCtrls_TDBRadioGroup.html](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/DBCtrls_TDBRadioGroup.html)

# c++ - 如何在qt中做异步文件io？

> ID：13677834
> 
> 赞同：3
> 
> 时间：2012-12-03T05:48:08.790
> 
> 标签：c++, qt, file-io, asynchronous, libuv

我想知道如何在qt中实现异步文件io？这甚至可以在 vanilla qt 中实现，还是有人需要使用另一个库（例如 libuv）来实现这样的事情？我在看 QDataStream 但即使它是一个“流”，它也不是非阻塞的。我想一种解决方案是制作一个在内部使用 libuv 的自定义 QIODevice，然后可以与 QDataStream 一起使用，但不确定从哪里开始。有任何想法吗？

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:33:39.957

我将实现一个处理 I/O 的线程。您可以连接适当的 sig/slots 以将 IO 从主线程“调用”到 IO 线程。您可以将要读取/写入的数据作为参数传递给信号。像这样的东西：

```
class FileIOThread : public QThread
{
public: 
    void run();
public slots: 
    void writeData(QByteArray &)
    void readData(QByteArray &)
};

class MyClass
{
private:
    FileIOThread m_writerThread;
signals: 
    void sendData(QByteArray &);
 ....
};

MyClass::MyClass()
{
    connect(this, SIGNAL(sendData(QByteArray&)),
                  &m_writerThread,SLOT(writeData(QByteArray&)));
   ....
 } 
```

# jquery - jQuery 验证 onfocusout

> ID：13677837
> 
> 赞同：1
> 
> 时间：2012-12-03T05:48:31.243
> 
> 标签：jquery, asp.net-mvc, jquery-validate

我在 MVC 应用程序中启用了 jQuery 验证选项，如下所示。

```
$.validator.setDefaults({
    onkeyup: false,
    onfocusin: false
}); 
```

这意味着验证将发生在焦点之外。在以下情况下，我在这里遇到了一个问题。

1.  用户输入了无效数据并提交了表单（将显示验证错误）
2.  用户更正了数据并单击了提交按钮，而没有从当前文本框中移动焦点。在这一步中，提交将不起作用，只会清除验证错误。如果数据正确，我需要在这里提交表格。

我为此[http://jsfiddle.net/8r47E/15/](http://jsfiddle.net/8r47E/15/)创建了一个 jsfiddle， 请分享您对此的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:57:49.993

没有这样的事情`onfocusin:`。你的意思是`onfocusout:`？

您也没有使用[jsFiddle](http://jsfiddle.net/8r47E/15/)中的任何一个：

```
 debug: false,
    focusInvalid: false,
    onkeyup: false,
    onclick: false, 
```

这是你想要的吗？

```
 debug: false,
    focusInvalid: false,
    onkeyup: false,
    onclick: false,
    onfocusout: false, 
```

[http://jsfiddle.net/8r47E/24/](http://jsfiddle.net/8r47E/24/)

[单击此处查看详细描述每个`.validate()`选项的](http://docs.jquery.com/Plugins/Validation/validate#toptions)文档。

当然，[您的演示](http://jsfiddle.net/8r47E/15/)对我来说似乎工作正常。我在`submit`没有将光标从输入端移开的情况下获得了“成功”。

我不太确定你想做什么。您描述的所需行为是几乎每个人都希望此验证能够工作，而它恰好是默认情况下的工作方式。

即使您在`onfocusout`设置为时遇到错误`false`，您仍然可以在不移动光标的情况下提交表单（更正错误后），因为插件的内置提交处理程序会再次自动检查表单的有效性。

[http://jsfiddle.net/8r47E/25/](http://jsfiddle.net/8r47E/25/)

# solr - Solr 中的“文档流行度”是什么意思

> ID：13677841
> 
> 赞同：1
> 
> 时间：2012-12-03T05:48:59.010
> 
> 标签：solr, document, edismax

solr 索引中的***文档流行***度是什么？

EDisMax 解析器使用 boost 参数。在这样的示例`&boost=popularity`中，我注意到一个查询。我无法理解***boost***和***boost=popularity***是什么。在了解 boost 参数之前，我想知道文档索引中的“流行度”是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-11T17:36:27.090

`popularity`只是用作示例的“某些字段”，而是为请求处理程序`boost`定义的查询参数。`edismax`提升意味着根据某个字段值（或基于字段值的某些函数的结果）影响评分（每个搜索命中的相关性）。

请参阅[https://cwiki.apache.org/confluence/display/solr/The+Extended+DisMax+Query+Parser](https://cwiki.apache.org/confluence/display/solr/The+Extended+DisMax+Query+Parser)`The boost Parameter`中的部分。

如果你想`popularity`在你自己的索引中实现类似的东西，你必须：

1.  将一个字段添加到您的架构`popularity`中，使用 type `int`or `float`or调用`ExternalFileField`（取决于您如何索引和应用它）。
2.  收集搜索结果的统计数据并存储与文档 ID 相关的数据（例如，通过评估访问日志）
3.  在索引期间或通过`ExternalFileField`（或将来通过`docValues`部分更新）存储您从统计数据中获得的流行度值。
4.  `boost=popularity`通过设置参数（或`popularity`在函数查询中使用）在查询期间应用提升。

更多关于人气提升的信息：

[https://www.slideshare.net/lucenerevolution/potter-timothy-boosting-documents-in-solr](https://www.slideshare.net/lucenerevolution/potter-timothy-boosting-documents-in-solr)

docValues 部分更新： [https ://issues.apache.org/jira/browse/SOLR-5944](https://issues.apache.org/jira/browse/SOLR-5944)

外部文件字段： [http ://www.findwise.com/blog/externalfilefield-in-solr/](http://www.findwise.com/blog/externalfilefield-in-solr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:14:18.537

[Boosting](http://wiki.apache.org/solr/SolrRelevancyCookbook#Boosting_Ranking_Terms)用于增加某些文档的分数。您可以使用索引时间提升或查询时间提升。对于索引时间提升，您可以`boost`为您索引的文档设置属性和值。对于查询时间提升，您可以通过设置提升值来提升字段，也可以使用预定义的函数查询。

[有关在 Solr wiki 中](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_increase_the_score_for_specific_documents)提升检查文档的更多信息。

**boost=popularity**表示文档的流行度是在外部字段中计算的（使用[ExternalFileField](http://lucene.apache.org/solr/api-4_0_0-ALPHA/org/apache/solr/schema/ExternalFileField.html)），并用于通过使用流行度值来增加分数。可以使用查看次数或您想要的任何其他参数来计算文档的受欢迎程度。有关通过受欢迎程度提升文档的更多信息，您可以[查看此文档](http://www.slideshare.net/LucidImagination/boosting-documents-in-solr-by-recency-popularity-and-user-preferences)。

# c# - 以编程方式更改超网格 ROW 的可见位置

> ID：13677842
> 
> 赞同：1
> 
> 时间：2012-12-03T05:49:04.583
> 
> 标签：c#, winforms, ultrawingrid

我有一个带有未绑定布尔列的超网格，我将其命名为“选择”。

用户可以通过选中或取消选中该行的“选择”单元格来选择和取消选择该行。

但是如果网格行数很多，用户很难找到所有选中的行。

所以我想在用户选择它们之后将选定的行发送到网格的顶部。但我找不到任何可以帮助我的财产？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:52:54.713

我自己找到了解决方案：

```
private void ultraGrid1_AfterCellUpdate(object sender, CellEventArgs e)  
    {  
        if (e.Cell.Column.Key == "Select" && Convert.ToBoolean(e.Cell.Value))  
            {  
                ultraGrid1.Rows.Move(e.Cell.Row, newPosition);  
            }  
        } 
```

# axapta - 通过 X++ 在移动日记帐中设置分类帐维度（抵消帐户）

> ID：13677845
> 
> 赞同：1
> 
> 时间：2012-12-03T05:49:23.133
> 
> 标签：axapta, x++, dynamics-ax-2012

我正在 AX 2012 中开发一个小定制，这将使用户能够从 Excel 导入项目移动日记帐行，在项目移动日记帐中我们必须`OffsetAccount`为每一行设置，这对我来说是个问题，我想从excel 并将其设置为行（在我的情况下是“110110 Bank Account USD”），我注意到在`InventJournalTrans`表中字段（`LedgerDimension`）填充了 a `recId`，但是当我尝试从 excel 读取此记录 ID 并将其设置为`InventJournalTrans`，它告诉我这个字段不存在。

我的最终目标是为所有行设置一个单独的偏移帐户，我可以将其放入 excel 中，或者如果有人可以告诉我如何为此目的显示分段输入控件。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:51:58.220

为什么不使用[Excel 加载项](http://community.dynamics.com/product/ax/axtechnical/b/ax2012exceldataimport/default.aspx)？

它自动处理代理键（如果表定义正确）。永远不应该从 Excel 中读取 RecId！

关于期刊导入，请参阅[此链接](http://ax2012exceldataimport.blogspot.dk/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:55:23.850

我通过在我的类中创建一个方法解决了这个问题，该方法将考虑 no（从 excel 读取）并从表 DimensionAttributeValueCombination 表中获取它的 recid，然后我将此 recId 保存为 LedgerDimension，这是我的代码：

```
public RecId getDimensionRecID(str _DisVal) 
{    
    DimensionAttributeValueCombination davc;
    RecId rrr;
    Name disValue;
    disValue = _DisVal;    
    select firstOnly * from davc where davc.DisplayValue == disValue;
    rrr = davc.RecId;
    return rrr; 
} 
```

# java - 使用 Guice 为参数注释编写拦截器

> ID：13677849
> 
> 赞同：3
> 
> 时间：2012-12-03T05:49:33.630
> 
> 标签：java, annotations, aop, guice, interceptor

### 我的问题的主要参考资料：

*   为 Google Guice 编写方法拦截器：[http ://code.google.com/p/google-guice/wiki/AOP](http://code.google.com/p/google-guice/wiki/AOP)
*   MethodInterceptor 接口的 JavaDoc：http: [//aopalliance.sourceforge.net/doc/org/aopalliance/intercept/MethodInterceptor.html](http://aopalliance.sourceforge.net/doc/org/aopalliance/intercept/MethodInterceptor.html)
*   关于 Java 注释的一般参考：http: [//docs.oracle.com/javase/tutorial/java/javaOO/annotations.html](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)和[http://docs.oracle.com/javase/1.5.0/docs/guide/language/注释.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html)

* * *

### 现在我的问题：

我正在编写一个严重依赖 Google Guice 创建对象和处理依赖注入的 Java 应用程序。我正在尝试使用拦截器在执行某些带注释的方法之前运行预处理代码。到目前为止，我已经成功地能够`MethodInterceptor`使用 Guice 的指令对已注释的方法执行拦截器（使用接口）。但是，我现在想编写将在*Parameter Annotations*上执行的拦截器。

这是一个示例场景。首先，我创建自己的注释。例如：：

```
@BindingAnnotation
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.PARAMETER)
public @interface MyParameterAnnotation {
} 
```

接下来，我为此注释编写自己的拦截器：

```
public class MyParameterAnnotationInterceptor implements MethodInterceptor {
    @Override
    public Object invoke(MethodInvocation invocation) throws Throwable {
       // Do some stuff
       return invocation.proceed();
    }
} 
```

这是我打算如何使用的示例`@MyParameterAnnotation`：

```
public class ExampleObject {
    public String foo(@MyParameterAnnotation String param) {
        ...
    }
} 
```

最后，我需要创建一个 Guice Injector 并使用它来创建一个 instalce `ExampleObject`，否则我无法在这个项目中使用方法拦截器。我将 Injector 配置`MyParameterAnnotationInterceptor`为绑定到`@MyParameterAnnotation`，如下所示：

```
final MethodInterceptor interceptor = new MyParameterAnnotationInterceptor();
requestStaticInjection(MyParameterAnnotationInterceptor.class);
bindInterceptor(Matchers.any(), Matchers.annotatedWith(MyParameterAnnotation.class), interceptor); 
```

当我按照上述步骤执行对 的调用时`ExampleObject.foo()`，不幸的是，尽管参数标记为 ，但拦截器并未执行`@MyParameterAnnotation`。请注意，如果将注释放在*方法级别*，则这些类似的步骤将起作用。

这导致我得出两个可能的结论：Guice 不支持将拦截器绑定到参数注释，或者我正在做一些完全不正确的事情（也许我应该为拦截器使用另一个 AOP 联盟接口，如[FieldInterceptor](http://aopalliance.sourceforge.net/doc/org/aopalliance/intercept/FieldInterceptor.html)，但我非常怀疑这是因为[Guice 的 AbstractModule 的 JavaDoc](http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/Binder.html#bindInterceptor%28com.google.inject.matcher.Matcher%3C?%20super%20java.lang.Class%3C?%3E%3E,%20com.google.inject.matcher.Matcher%3C?%20super%20java.lang.reflect.Method%3E,%20org.aopalliance.intercept.MethodInterceptor...%29)建议该`bindInterceptor()`方法只能使用`MethodInterceptor`参数）。

尽管如此，所有帮助我们都非常感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:27:36.687

匹配器用于方法注释而不是方法参数注释。

Guice 没有为方法参数注释提供匹配器——您要么必须自己编写一个，要么使用其他方案。请注意，这是一个有点奇怪的用例——通常你可以侥幸逃脱

```
public class ExampleObject {
    @MyAnnotation
    public String foo(String param) {
        ...
    }
} 
```

对于上面的例子，你有正确的 Guice 拦截器配置。

# java - 在 JTable 中添加背景图片

> ID：13677850
> 
> 赞同：0
> 
> 时间：2012-12-03T05:49:36.747
> 
> 标签：java, swing, jtable

我正在使用`JInternalFrame`我添加`JTable`的 . 现在我想在`JTable`. 所以我在`JScrollPane's`自定义代码中添加了以下代码。

```
jScrollPane1 = new javax.swing.JScrollPane(ViewBalanceReportTable) {{
    setOpaque(false);
    getViewport().setOpaque(false);
}
@Override
protected void paintComponent(Graphics g) {
    final int imageWidth = image.getIconWidth();
    final int imageHeight = image.getIconHeight();
    final Dimension d = getSize();
    final int x = (d.width - imageWidth)/2;
    final int y = (d.height - imageHeight)/2;
    g.drawImage(image.getImage(), x, y, null, null);
    super.paintComponent(g);
}

} 
```

但它仍然没有显示背景图像，任何人都可以帮助我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T06:12:43.480

基本上，您需要确保位于框架顶部的所有内容都是透明的（不透明 == false）*。*

该表是一种特殊情况，它不倾向于尊重`opaque`设置，因为这很容易。相反，我们也可以使用透明颜色来欺骗它。

如果您想绘制到任何类型的框架，您最好更换内容窗格。这将允许您在内容区域内绘制，而不是在框架边框或菜单等使用的区域内绘制。

![在此处输入图像描述](../Images/392ec9979e6678b5971be94dc1c158a0.png)

```
public class TableWithBackground {

    public static void main(String[] args) {
        new TableWithBackground();
    }

    public TableWithBackground() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JDesktopPane desktopPane = new JDesktopPane();
                BackgroundInternalFrame backgroundInternalFrame = new BackgroundInternalFrame();
                desktopPane.add(backgroundInternalFrame);
                try {
                    backgroundInternalFrame.setMaximum(true);
                } catch (PropertyVetoException ex) {
                    ex.printStackTrace();
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(desktopPane);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class BackgroundInternalFrame extends JInternalFrame {

        public BackgroundInternalFrame() {
            super("Hello", true, true, true, true);

            setSize(100, 100);
            setLocation(10, 10);
            setVisible(true);

            setContentPane(new TransparentContentPane());

            JTable table = new JTable();
            table.setModel(new javax.swing.table.DefaultTableModel(
                    new Object[][]{
                        {null, null, null, null},
                        {null, null, null, null},
                        {null, null, null, null},
                        {null, null, null, null}
                    },
                    new String[]{
                        "Title 1", "Title 2", "Title 3", "Title 4"
                    }));

            JScrollPane scrollPane = new JScrollPane(table);
            setLayout(new BorderLayout());
            add(scrollPane);

            scrollPane.setOpaque(false);
            scrollPane.getViewport().setOpaque(false);
            table.setOpaque(false);
            table.setBackground(new Color(255, 255, 255, 0));
        }
    }

    public class TransparentContentPane extends JPanel {

        public TransparentContentPane() {
            setOpaque(false);
        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(getBackground());
            g2d.fillRect(0, 0, getWidth(), getHeight());
            g2d.setColor(Color.RED);
            g2d.drawLine(0, 0, getWidth(), getHeight());
            super.paintComponent(g2d); //To change body of generated methods, choose Tools | Templates.
            g2d.dispose();
        }
    }
} 
```

## 图像表

可能一个“更简单”的解决方案是将图像直接渲染到桌子的背景上。这意味着图像成为表格的一部分，并将随之滚动。

这有点棘手，因为`JTable#paintComponent`不仅填充了背景，还呈现了表格内容。

![在此处输入图像描述](../Images/d01b569bc1e5642d4b63770f1fb7c6be.png)

```
public class TableBackground {

    private BufferedImage background;

    public static void main(String[] args) {
        new TableBackground();
    }

    public TableBackground() {
        try {
            background = ImageIO.read(new File("C:/Users/swhitehead/Documents/My Dropbox/issue362.jpg"));
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JDesktopPane desktopPane = new JDesktopPane();
                JInternalFrame ittyFrame = new JInternalFrame("Hello", true, true, true, true);
                ittyFrame.setSize(100, 100);
                ittyFrame.setLocation(0, 0);
                ittyFrame.setVisible(true);
                desktopPane.add(ittyFrame);
                try {
                    ittyFrame.setMaximum(true);
                } catch (PropertyVetoException ex) {
                    ex.printStackTrace();
                }

                Object[][] data = new Object[50][4];
                for (int row = 0; row < 50; row++) {
                    for (int col = 0; col < 4; col++) {
                        data[row][col] = col + "." + row;
                    }
                }

                JTable table = new BackgroundImageTable();
                table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
                table.setModel(new javax.swing.table.DefaultTableModel(
                                data,
                                new String[]{
                                    "Title 1", "Title 2", "Title 3", "Title 4"
                                }));

                table.setForeground(Color.WHITE);
                JScrollPane scrollPane = new JScrollPane(table);
                ittyFrame.setLayout(new BorderLayout());
                ittyFrame.add(scrollPane);

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(desktopPane);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class BackgroundInternalFrame extends JInternalFrame {

        public BackgroundInternalFrame() {
            super("Hello", true, true, true, true);

            setSize(100, 100);
            setLocation(10, 10);
            setVisible(true);

            setContentPane(new TransparentContentPane());

            JTable table = new JTable();
            table.setModel(new javax.swing.table.DefaultTableModel(
                            new Object[][]{
                                {null, null, null, null},
                                {null, null, null, null},
                                {null, null, null, null},
                                {null, null, null, null}
                            },
                            new String[]{
                                "Title 1", "Title 2", "Title 3", "Title 4"
                            }));

            JScrollPane scrollPane = new JScrollPane(table);
            setLayout(new BorderLayout());
            add(scrollPane);

            scrollPane.setOpaque(false);
            scrollPane.getViewport().setOpaque(false);
            table.setOpaque(false);
            table.setBackground(new Color(255, 255, 255, 0));
        }
    }
} 
```

## 粘性视口

您的另一个选择是创建自定义视口。这允许您在其他组件的真实性后面呈现内容。这将遇到您之前遇到的相同问题。表格及其背景必须设置为透明。

这也意味着，通过一些巧妙的工作，您可以根据需要将图像“粘贴”或“跟随”内容。

```
public class TableBackground {

    private BufferedImage background;

    public static void main(String[] args) {
        new TableBackground();
    }

    public TableBackground() {
        try {
            background = ImageIO.read(new File("C:/Users/swhitehead/Documents/My Dropbox/issue362.jpg"));
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JDesktopPane desktopPane = new JDesktopPane();
                JInternalFrame ittyFrame = new JInternalFrame("Hello", true, true, true, true);
                ittyFrame.setSize(100, 100);
                ittyFrame.setLocation(0, 0);
                ittyFrame.setVisible(true);
                desktopPane.add(ittyFrame);
                try {
                    ittyFrame.setMaximum(true);
                } catch (PropertyVetoException ex) {
                    ex.printStackTrace();
                }

                Object[][] data = new Object[50][4];
                for (int row = 0; row < 50; row++) {
                    for (int col = 0; col < 4; col++) {
                        data[row][col] = col + "." + row;
                    }
                }

                JTable table = new JTable();
                table.setForeground(Color.WHITE);
                table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
                table.setModel(new javax.swing.table.DefaultTableModel(
                                data,
                                new String[]{
                                    "Title 1", "Title 2", "Title 3", "Title 4"
                                }));

                JScrollPane scrollPane = new JScrollPane();
                table.setOpaque(false);
                table.setBackground(new Color(255, 255, 255, 0));
                scrollPane.setViewport(new ImageViewport());
                scrollPane.setViewportView(table);
                ittyFrame.setLayout(new BorderLayout());
                ittyFrame.add(scrollPane);

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(desktopPane);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ImageViewport extends JViewport {

        public ImageViewport() {
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (background != null) {
                Rectangle bounds = getViewRect();
                int x = Math.max(0, (bounds.width - background.getWidth()) / 2);
                int y = Math.max(0, (bounds.height - background.getHeight()) / 2);
                g.drawImage(background, x, y, this);
            }
        }
    }
} 
```

很多都取决于您的实际要求

# java - 使用正则表达式忽略java中的模式

> ID：13677853
> 
> 赞同：-1
> 
> 时间：2012-12-03T05:49:49.327
> 
> 标签：java, regex

我有一句话：`"we:PR show:V"`。我只想在使用正则表达式模式匹配器之后`":"`和之前匹配那些字符。`"\\s"`我使用了以下模式：

```
Pattern pattern=Pattern.compile("^(?!.*[\\w\\d\\:]).*$"); 
```

但它没有用。获得输出的最佳模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:13:00.920

对于这种情况，如果您使用的是 java，使用子字符串可能会更容易：

```
String input = "we:PR show:V";
String colon = ":";
String space = " ";
List<String> results = new ArrayList<String>();
int spaceLocation = -1;
int colonLocation = input.indexOf(colon);
while (colonLocation != -1) {
    spaceLocation = input.indexOf(space);
    spaceLocation = (spaceLocation == -1 ? input.size() : spaceLocation);
    results.add(input.substring(colonLocation+1,spaceLocation);

    if(spaceLocation != input.size()) {
        input = input.substring(spaceLocation+1, input.size());
    } else {
        input = new String(); //reached the end of the string
    }
}
return results; 
```

这将比尝试匹配正则表达式更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:02:24.143

以下正则表达式假定冒号后面的任何非空白字符（依次以非冒号字符开头）都是有效匹配：

```
[^:]+:(\S+)(?:\s+|$) 
```

像这样使用：

```
String input = "we:PR show:V";
Pattern pattern = Pattern.compile("[^:]+:(\\S+)(?:\\s+|$)");
Matcher matcher = pattern.matcher(input);
int start = 0;
while (matcher.find(start)) {
    String match = matcher.group(1); // = "PR" then "V"
    // Do stuff with match
    start = matcher.end( );
} 
```

模式匹配，按顺序：

1.  至少一个*不是*冒号的字符。
2.  一个冒号。
3.  至少非空白字符（我们的匹配）。
4.  至少一个空格字符，或输入结束。

只要正则表达式匹配字符串中的某个项目，循环就会继续，从 index 开始`start`，始终调整为指向当前匹配结束之后。

# java - 点击图片下载图片

> ID：13677858
> 
> 赞同：0
> 
> 时间：2012-12-03T05:50:02.133
> 
> 标签：java, servlets, download

我想点击下载图片。我已经设置了内容类型，但我无法编写图像作为响应。在控制器中，我得到图像的 URL。

```
String image=myimageUrl;
File file = new File(image);  
String contentType = getServletContext().getMimeType(file.getName());
response.setBufferSize(DEFAULT_BUFFER_SIZE);
response.setContentType(contentType);
response.setHeader("Content-Length", String.valueOf(file.length())); 
```

为了写入响应，我使用了这段代码

```
DataInputStream input = new DataInputStream(new FileInputStream(file));
ServletOutputStream output  = response.getOutputStream(); 
```

这里输入返回`null`。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:48:47.647

请检查以下代码。

用于将图像上传到数据库。

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
                    String path=request.getParameter("h2");
                    out.println(path);
                    Connection connection=null;
                    ResultSet rs = null;
                    PreparedStatement psmnt = null;
                    FileInputStream fis;
                    Class.forName("com.mysql.jdbc.Driver");
                    connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/image", "root", "kshitij");
                File image = new File(path);
                    psmnt = connection.prepareStatement("insert into new1(id,imagepath)"+"values(?,?)");
                    String s1=request.getParameter("h1");
                    psmnt.setString(1,s1);
                    fis = new FileInputStream(image);
                    psmnt.setBinaryStream(2, (InputStream)fis, (int)(image.length()));

               int s = psmnt.executeUpdate();
               if(s>0) {
                      out.println("Uploaded successfully !");
               }
               else {
              out.println("unsucessfull to upload image.");
               }
           }
           catch (Exception ex) {
                  System.out.println("Found some error : "+ex);
           } 
```

并用于下载图像。

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        //response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

            Connection connection = null;
            ResultSet rs = null;
            PreparedStatement psmnt = null;
        InputStream sImage;

            try {
                    Class.forName("com.mysql.jdbc.Driver").newInstance();
                    connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/image", "root", "kshitij");
                    psmnt = connection.prepareStatement("SELECT imagepath FROM new1 WHERE id = ?");
                    psmnt.setString(1, "23");
                    rs = psmnt.executeQuery();
                if(rs.next()) {
                      byte[] bytearray = new byte[1048576];
                      int size=0;
                      sImage = rs.getBinaryStream(1);
                      //response.reset();
                      response.setContentType("image/jpeg");
                      while((size=sImage.read(bytearray))!= -1 ){
                            response.getOutputStream().write(bytearray,0,size);

                      }
                }
            }
            catch(Exception ex){
    //          out.println("error :"+ex);
            }
    } 
```

# opengl - CAD中的C2曲面是什么，C2是什么意思？

> ID：13677859
> 
> 赞同：2
> 
> 时间：2012-12-03T05:50:07.627
> 
> 标签：opengl, graphics, mesh, surface, cad

C2 曲面/网格是 CAD/OpenGL 中众所周知的曲面。但我只想知道 C2 是什么意思？

C 是什么意思？

2是什么意思？

C2 = 首字母缩略词?????????

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T05:59:40.200

[在二阶导数中连续。](http://en.wikipedia.org/wiki/Geometric_continuity#Smoothness_of_curves_and_surfaces)

[通常，您会在讨论各种样条曲线](http://en.wikipedia.org/wiki/Non-uniform_rational_B-spline#Use)时看到使用它。

# css - div 固定滚动

> ID：13677864
> 
> 赞同：0
> 
> 时间：2012-12-03T05:50:19.533
> 
> 标签：css

我了解如何在向下滚动页面时制作 div 幻灯片。但是我在这样做时遇到了麻烦。

如果我这样做，它会起作用：http: [//screensnapr.com/v/aLbYHE.png](http://screensnapr.com/v/aLbYHE.png)

但这将位置设置为“固定”，但我希望它保持“绝对”，因为绝对它会保持在它的 div 中，如下所示：[http ://screensnapr.com/v/Z93gKl.png](http://screensnapr.com/v/Z93gKl.png)

但是由于某种原因，这会取消滚动。这是CSS位：

```
<div style="float:right;position:absolute;right:25px;padding-top:35px;" style="top: 0px;">
      <a href="_lib/forms/comment.php?id=<?php echo $article_id; ?>" class="-button silver" rel="facebox"><span class="-paper">Post Comment</span>
      </a>
 </div> 
```

absolute = [http://screensnapr.com/v/Z93gKl.png](http://screensnapr.com/v/Z93gKl.png)（它的定位是我想要的，但我没有固定它，所以它不会和我一起滚动）

fixed = [http://screensnapr.com/v/aLbYHE.png](http://screensnapr.com/v/aLbYHE.png)（它的定位方式是我不想要的，但它正在滚动）

你们会碰巧知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:55:38.230

是的，`absolute`会打败你的“滑动”（假设你习惯`fixed`这样做）。 `absolute`将把一个元素放在那里，它不会移动。

我假设您正在谈论评论按钮。在没有看到任何代码的情况下，我帮不上什么忙，但是您可以做的是将其`absolute` *放置*在以某种`fixed`方式移动的父元素内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:56:29.413

使用`position:fixed`是你想要的。

您遇到的问题是`right:25px`声明现在意味着“距离浏览器窗口的右边缘 25px”。

您需要将该“正确”值更新为 50%，然后使用类似的属性`margin-left`并将按钮推到正确的位置。

# java - 检查布尔数组是否包含真值的最快方法

> ID：13677872
> 
> 赞同：8
> 
> 时间：2012-12-03T05:51:20.233
> 
> 标签：java

我有一个`array`条目`boolean`：

```
boolean[] myBooleanArray = new boolean[24]; 
```

目前我检查它是否包含 true 像这样：

```
Arrays.asList(myBooleanArray).contains(true); 
```

这是检查布尔数组的*最快方法吗？*如果没有，执行此检查的最快方法是什么？

编辑：

通过在 Android 4.03 Samsung S2 设备上将其作为应用程序运行，我将您的答案中的方法计时如下：

```
boolean[] myBooleanArray = new boolean[24];

long startTime = System.nanoTime();
suggestedMethod(myBooleanArray);
long endTime = System.nanoTime();

long duration = endTime - startTime;
Log.i("timetest", Long.toString(duration)); 
```

五次运行的时间排名分别为，最快的第一：

1.  在 5334 和 11584 ns 之间：

    ```
    for (boolean value : myBooleanArray) {
        if (value) {
            return true;
        }
    }
    return false; 
    ```

2.  在 160542 和 171417 ns 之间：

    ```
    Arrays.asList(myBooleanArray).contains(true); 
    ```

3.  在 191833 和 205750 ns 之间：

    ```
    Booleans.contains(myBooleanArray, true); 
    ```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T05:53:32.640

只需遍历数组

```
for(boolean value: myBooleanArray){
  if(value){ return true;}
}
return false; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T05:58:32.527

如果您使用的是[Guava](https://code.google.com/p/guava-libraries/)库（其中有很多有用的东西）：

```
Booleans.contains(myBooleanArray, true); 
```

( [JavaDoc](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/Booleans.html#contains%28boolean%5B%5D,%20boolean%29) )

该方法的文档还描述了另一种方法。您可以将 a 替换为`boolean[]`a `BitSet`（应该更节省内存）并调用`!bitSet.isEmpty()`以检查至少一位是否为真。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-03T06:01:10.153

一般来说，如果您有一个数组（或`List`），在其中查找项目的最快/唯一方法是遍历数组，直到找到您要查找的内容。`List`这是 arrays/ s的限制之一。

对于一个包含 24 个元素的数组，无论如何我都不会担心这个。如果您有数百万个项目并且期望很少`true`的 s（或可能没有），那么将数据封装在一个类中可能是有意义的：

```
public class BooleanArray
{
    boolean[] arr = new boolean[SIZE]; // or get size from a constructor
    boolean anyTrue = false;

    boolean get(int index) {
        return arr[index];
    }

    boolean set(int index, boolean value) {
        arr[index] = value;
        anyTrue |= value;
    }

    boolean containsAnyTrues() {
        return anyTrue;
    }
} 
```

重申一下，我不建议对您的 24 个元素数组使用此方法。我的意思是你的数据结构应该支持预期的用例。如果预期的用例是“很多元素，非常稀疏`true`的 s，需要找出是否有任何`true`s”，那么您对最快方式的关注更相关，并且像上面这样的数据结构会很有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-03T05:58:20.327

根据[这个先前的问题](https://stackoverflow.com/questions/1006395/fastest-way-to-iterate-in-java)，使用增强的 for 或普通的 for 遍历数组几乎是相同的，因为两者都使用数组访问。所以只需遍历你的数组：

```
public boolean containsTrue(boolean[] array){

    for(boolean val : array){
        if(val)
            return true;
    }

    return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T07:18:55.093

如果你有一个 0 和 1 的数组，你可以简单地 OR 每个元素。如果你得到一个 1，你知道至少有一个 TRUE。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-23T09:20:47.817

如果你没有绑定到布尔*数组*，你应该看看 class [`java.util.BitSet`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/BitSet.html)。尽管有这个名字，它更像是数组而不是集合。

如果“数组”中有任何内容，该方法[`BitSet.isEmpty`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/BitSet.html#isEmpty())正在回答您的问题`true`，并且它被实现为：

```
public boolean isEmpty()
{
    return wordsInUse == 0;
} 
```

我怀疑您能否获得更快的检查……</p>

但是必须在其他地方付出代价：设置/取消设置值可能比仅仅`boolean []`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-23T10:49:23.557

如果你知道数组的大小，并且数组很大。例如。24 很小，所以很难改进。Arrays.mismatch 似乎要快一些。

```
import java.util.Arrays;
import java.util.Random;

public class BenchMark{
    final static int N = Short.MAX_VALUE;
    static boolean[] base = new boolean[N];
    static boolean any1(boolean[] test){
        return Arrays.mismatch(base, test)==-1;
    }
    static boolean any2(boolean[] test){
        for(boolean b: test)
            if(b) return true;
        return false;
    }
    public static void main(String[] args){
        boolean[] test = new boolean[N];
        Random r = new Random(1);
        int last = 0;
        long start = System.nanoTime();
        int p = 0;
        for(int i = 0; i<100000; i++){
            test[last] = false;
            int s = r.nextInt(2);
            if(s == 0){
                last = r.nextInt(test.length);
                test[last] = true;
            } 
            if(any2(test)){
                p++;
            }
        }
        System.out.println( ( p + " in " + (System.nanoTime() - start ) / 1e9 ) + " seconds");
    }
} 
```

我没有设置适当的基准测试，但它的输出显示`any1`比`any2`标准循环技术快 4-5 倍。

要了解原因，请查看 jdk 源代码。我们发现[vectorizedMismatch](https://github.com/openjdk/jdk/blob/a7830958e36df78c1bd3ba7943147beaaa1a9c41/src/java.base/share/classes/jdk/internal/util/ArraysSupport.java#L112)似乎正在使用 unsafe 类将值转换为 long 并比较 long 值。

# javascript - 如何分配新的 ascii 键码值

> ID：13677874
> 
> 赞同：0
> 
> 时间：2012-12-03T05:51:28.410
> 
> 标签：javascript

如果用户按下`enter`键，它应该表现得像他按下`esc`键一样。

```
function OnEditorKeyPress(editor, e) {
    if (e.htmlEvent.keyCode == 13) {
        e.htmlEvent.keyCode = 27;
        //treeList.CancelEdit();
    }
} 
```

`e.htmlEvent.keyCode = 27;`但在此声明之后，值 13 也保持不变。如何分配新值或任何其他替代方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:12:44.970

事件对象的这些属性是只读的（包括`KeyCode`），所以你不能做这样的事情。为什么你不能做这样的事情？

```
function OnEditorKeyPress(editor, e) {
   //If user press enter or escape
   if (e.htmlEvent.keyCode == 13 || e.htmlEvent.keyCode == 27) // correct comparison operation
   {
      treeList.CancelEdit();
      e.htmlEvent.preventDefault
   }
} 
```

**编辑：**如果您坚持，请在 Mozilla 论坛上阅读：[需要覆盖按键替换键码](http://forums.mozillazine.org/viewtopic.php?f=25&t=1950767)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:10:16.083

您好，此代码可帮助您停止“Enter”按钮的默认功能但是，当用户按下“Enter”时，您可以输入代码以执行您想做的任何事情。尽管在 ENTER 上实现 ESC 功能将不受欢迎。

这是工作示例[http://jsfiddle.net/Z4dgr/11/](http://jsfiddle.net/Z4dgr/11/)

```
<!DOCTYPE html>
<html>
<body>
<script type="text/javascript">
function displayunicode(e){
e.preventDefault();
var unicode=e.keyCode? e.keyCode : e.charCode
alert(unicode)
}
</script>
<form>
Enter from keyboard <input type="text" size="2" maxlength="1" onkeypress="displayunicode(event); this.select()" />
</form>
</body>
</html>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:17:44.590

根据汤姆的回答，这就是您所需要的。

```
function OnEditorKeyPress(editor, e) {
   //If user press enter or escape
   if (e.htmlEvent.keyCode == 13 || e.htmlEvent.keyCode = 27) 
   {
      treeList.CancelEdit();
      e.htmlEvent.preventDefault();
   }
} 
```

# java - 高优先级运算符不会在条件表达式中首先被评估

> ID：13677877
> 
> 赞同：1
> 
> 时间：2012-12-03T05:52:05.260
> 
> 标签：java, while-loop, operators

看看下面的代码：

```
class experiment{
    public static void main(String[] args) {
        int k = 3;

        while (k-- > 0) {
            System.out.println(k + "\n");
        }
    }
} 
```

预期输出：

```
2
1 
```

实际输出：

```
2
1
0 
```

后缀运算符的优先级高于操作运算符。因此`k--`，应该在 之前首先评估`k > 0`，但查看输出，`k > 0`首先评估。我在这里想念一些简单的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:54:39.723

嗯你是对的。`k--`将首先进行评估。但它确实被评估为`k`。并且在涉及它的当前操作完成后，它的价值就会增加。因此，首先使用当前值，然后发生增量。

如果您使用`--k`，您将获得预期的输出。

试试这些例子，你就会明白：-

```
int k = 4;
System.out.println(k-- + " : " + k);  // prints 4 : 3

int x = 5;
System.out.println(--x + " : " + x);  // prints 4 : 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:54:46.817

你是对的，`k--`在`> 0`. 但是，该评估的结果是`k`，而不是`k - 1`，因为`--`是后修复，而不是前修复。

因此，第一次`>`计算 时，它是有效`3 > 0`的，因为虽然`k`现在是`2`，但*表达式* `k--`的结果是`3`。但是，当打印出现时，`k = 2`, 因此`2`首先输出。这就是为什么您获得的迭代次数比（我猜）您预期的要多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T06:04:30.493

优先级与它无关。“k--”的值是“k”。后减 'k'有一个*副作用*，但它不会影响操作数的值。

# c# - 我想将 XML Like 字符串拆分为 c# 或 sql 中的标记

> ID：13677879
> 
> 赞同：4
> 
> 时间：2012-12-03T05:52:05.273
> 
> 标签：c#, sql, xml, xml-parsing

我想将 XML Like 字符串拆分为 c# 或 sql 中的标记。例如输入字符串就像

```
<entry><AUTHOR>C. Qiao</AUTHOR> and <AUTHOR>R.Melhem</AUTHOR>, "<TITLE>Reducing Communication </TITLE>",<DATE>1995</DATE>. </entry> 
```

我想要这个输出：

```
C       AUTHOR
.       AUTHOR
Qiao    AUTHOR
and 
R       AUTHOR
.       AUTHOR
Melhem  AUTHOR
,   
"
Reducing        TITLE
Communication   TITLE
"
,
1995    DATE
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:09:12.183

这是如何解决这个问题的第一次尝试，考虑以下几点：
1\. XML 字符串将是有效的（即标签之间不会有任何无效字符）
像这样：

```
string xml = @"<ENTRY><AUTHOR>C. Qiao</AUTHOR>
                                  <AUTHOR>R.Melhem</AUTHOR>
                                  <TITLE>Reducing Communication </TITLE>
                                  <DATE>1995</DATE>
                           </ENTRY>"; 
```

2\. 拆分将按空间完成`' '`

```
string xml = @"<ENTRY><AUTHOR>C. Qiao</AUTHOR>
                              <AUTHOR>R.Melhem</AUTHOR>
                              <TITLE>Reducing Communication </TITLE>
                              <DATE>1995</DATE>
                       </ENTRY>";
        XElement doc = XElement.Parse(xml);
        foreach (XElement element in doc.Elements())
        {

            var values = element.Value.Split(' ');
            foreach (string value in values)
            {
                Console.WriteLine(element.Name + " " + value);
            }
        } 
```

会打印出来

```
AUTHOR C.
AUTHOR Qiao
AUTHOR R.Melhem
TITLE Reducing
TITLE Communication
TITLE
DATE 1995 
```

**编辑：**

现在，根据“。”进行拆分。和一个空间，最好的办法是使用正则表达式。像这样：

```
 var values = Regex.Split(element.Value, @"(\.| )");
        foreach (string value in values.Where(x=>!String.IsNullOrWhiteSpace(x)))
        {
            Console.WriteLine(element.Name + " " + value);
        } 
```

如果您愿意，可以添加更多分隔符。以下示例将为您提供以下内容：

```
AUTHOR C
AUTHOR .
AUTHOR Qiao
AUTHOR R
AUTHOR .
AUTHOR Melhem
TITLE Reducing
TITLE Communication
DATE 1995 
```

**Edit2：**
这是一个适用于您的原始字符串的示例，它很可能不是最好的方法，因为它没有正确的标记顺序，但它应该非常接近：

```
 string xml = @" <entry>
                            <AUTHOR>C. Qiao</AUTHOR> 
                            and 
                            <AUTHOR>R.Melhem</AUTHOR>, 
                            ""<TITLE>Reducing Communication </TITLE>""
                           ,<DATE>1995</DATE>. 
                           </entry>";
            //Parse xml to XDocument
            XDocument doc = XDocument.Parse(xml);

            // Get first element (we only have one)
            XElement element = doc.Descendants().FirstOrDefault();

            //Create a copy of an element for use by child elements.
            XElement copyElement = new XElement(element);
            //Remove all child nodes from root leaving only text
            element.Elements().Remove();

            //Splitting based on the tokens specified
                var values = Regex.Split(element.Value, @"(\.| |\,|\"")");
                    foreach (string value in values.Where(x => !String.IsNullOrWhiteSpace(x)))
                    {
                        Console.WriteLine(value);
                    }
            //Getting children nodes and splitting the same way
            foreach (XElement elem in copyElement.Elements())
            {
                var val = Regex.Split(elem.Value, @"(\.| |\,|\"")");
                foreach (string value in val.Where(x => !String.IsNullOrWhiteSpace(x)))
                {
                    Console.WriteLine(value + " " + elem.Name);
                }
            }
            //You can try to play with DescendantsAndSelf 
            //to see if you can do it in single action and with order preserved.
            //foreach (XElement elem in element.DescendantsAndSelf())
            //{
            //    //....
            //} 
```

这将打印出以下内容：

```
and
,
"
"
,
.
C AUTHOR
. AUTHOR
Qiao AUTHOR
R AUTHOR
. AUTHOR
Melhem AUTHOR
Reducing TITLE
Communication TITLE
1995 DATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:11:36.857

编辑：刚刚注意到我读错了问题 - 从第一个答案而不是从问题中复制了格式化的 XML，我没有注意到字符串中的混合内容节点。这使它更容易。解决方案可能如下所示：

```
using System;
using System.Linq;
using System.Text;

using System.Xml;
using System.Xml.Linq;

class Program
{
    static void Main(string[] args)
    {
        var xml = @"<entry><AUTHOR>C. Qiao</AUTHOR> and <AUTHOR>R.Melhem</AUTHOR>, ""<TITLE>Reducing Communication </TITLE>"",<DATE>1995</DATE>. </entry>";

        var elem = XElement.Parse(xml);

        var tokFunc = new Func<XNode, string>(node =>
            {
                var s = node.ToString().Replace(".", " . ").Replace(",", " , ");
                var nodeName = node.Parent != null && 
                    node.Parent.NodeType == XmlNodeType.Element && 
                    node.Parent.Name.LocalName.ToUpper() != "ENTRY"
                                   ? node.Parent.Name.LocalName
                                   : "";
                var sb = new StringBuilder();

                s.Split(new[] {' '}, StringSplitOptions.RemoveEmptyEntries).ToList().ForEach(e => sb.AppendFormat("{0}\t{1}\n", e, nodeName));
                return sb.ToString();
            });

        elem.DescendantNodes().Where(e => e.NodeType == XmlNodeType.Text).ToList()
            .ForEach(c => Console.Write(tokFunc(c)));

    }
} 
```

这会产生所需的输出：

```
C       AUTHOR
.       AUTHOR
Qiao    AUTHOR
and
R       AUTHOR
.       AUTHOR
Melhem  AUTHOR
,
"
Reducing        TITLE
Communication   TITLE
"
,
1995    DATE
. 
```

# php - 删除后PHP MySQL插入失败

> ID：13677881
> 
> 赞同：0
> 
> 时间：2012-12-03T05:52:11.843
> 
> 标签：php, mysql

我有两张桌子。一个是账户，另一个是利息。一个帐户可以有多个兴趣并且可以编辑。现在，该过程正在删除该帐户的所有兴趣，然后插入这些兴趣。查询是：

"从兴趣中删除 account_id='$id'"

"插入兴趣 (account_id, interest_name) VALUES('$id', '$name')"

当用户更新他们的帐户时，我使用这两个查询，但插入失败，表中没有插入任何内容（ps。interests_id 是 auto_increment 并且已被计算在内）但表中没有任何新内容。当我注释掉删除查询时。插入将成功。

有谁知道我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:13:02.873

如果你想更新你的表记录，你会做`update`操作。像这样：

```
UPDATE TABLE_NAME SET FIELD_NAME = 'VARIABLE_NAME' 
  WHERE PRIMERY_FIELD_NAME = 'VARIABLE_NAME' ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:23:34.407

你不必使用这两个查询，如果你想更新数据只需使用 mysql 的更新查询。使用这个：

```
<?php
$query = "UPDATE Interests SET interest_name = '".$name."' WHERE account_id = '".$id."'" ;
mysql_query($query);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T05:59:17.580

如果您的查询失败，您应该捕获错误并查看出现了什么问题。在所有用于 PHP 的 MySQL API 中，失败的查询会返回一个状态码来表明这一点。检查此状态代码的示例很容易在文档中找到。但大多数开发人员未能检查状态。

* * *

使用事务来确保两个更改一起成功或都不应用。

[如何决定使用数据库事务](https://stackoverflow.com/questions/1093762/how-to-decide-to-use-database-transactions)

MySQL 中事务的定义：http: [//dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_transaction](http://dev.mysql.com/doc/refman/5.5/en/glossary.html#glos_transaction)

在 MySQL 中启动和提交事务的语法：http: [//dev.mysql.com/doc/refman/5.5/en/commit.html](http://dev.mysql.com/doc/refman/5.5/en/commit.html)

您需要使用 InnoDB。MyISAM 不支持事务。 [http://dev.mysql.com/doc/refman/5.5/en/innodb-storage-engine.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-storage-engine.html)

在 PHP 中，您需要停止使用旧的 ext/mysql API 并开始使用 MySQLi 或 PDO。

[http://php.net/manual/en/mysqli.quickstart.transactions.php](http://php.net/manual/en/mysqli.quickstart.transactions.php)

[http://php.net/manual/en/pdo.begintransaction.php](http://php.net/manual/en/pdo.begintransaction.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T06:09:01.327

如果要更新表记录，则可以执行更新操作。它喜欢跟随

```
UPDATE Interests 
SET 
interest_name = '$name' 
WHERE
accountno = '$id' ; 
```

试试看。您可以通过这种方式解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-15T10:59:20.860

发生这种情况是因为查询被视为两个单一事务，因此无法保证执行顺序。您描述的效果是因为插入是在删除之前处理​​的，因此 `interests_id` 正确地自动递增，然后通过删除语句删除该行。您应该更改查询逻辑或在一个事务中执行两个查询。

# css - CSS - 绝对定位的孩子不会调整父母的大小

> ID：13677886
> 
> 赞同：2
> 
> 时间：2012-12-03T05:53:07.130
> 
> 标签：css

我有一个带有绝对定位菜单的页面（因为它需要在某个位置，别管它下面有什么）。如何使该页面调整大小以包含菜单？我[在 jsFiddle 上做了一个问题的例子](http://jsfiddle.net/CNfKn/)，虽然没有使用 Javascript，我不想使用它。

什么，我需要包含代码？很好...... jsFiddle 上更好的例子

```
#container {float: left; width: 500px;}
#content {float: right; width: 300px; height: 100px;}
#menu {position: absolute; width: 100px; height: 350px;} 
```

```
<div id="container">
    <div id="content">Content</div>
    <div id="menu">Menu</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:54:48.490

由于您在菜单上使用绝对定位，因此它不会影响父容器的高度。

`min-height`像这样使用`#container`：

```
#container {
    background: #ff00ff;
    float: left;
    width: 500px;
    padding: 10px;
    min-height: 350px;
} 
```

# c - 如何检查字符串是否在C中的字符串数组中？

> ID：13677890
> 
> 赞同：18
> 
> 时间：2012-12-03T05:53:57.613
> 
> 标签：c, arrays

如何用C编写下面的代码？另外：是否有任何用于检查数组长度的内置函数？

**Python代码**

```
x = ['ab', 'bc' , 'cd']
s = 'ab'

if s in x:
  //Code 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T05:57:22.653

C中没有检查数组长度的函数。但是，如果数组声明在与要检查的范围相同的范围内，则可以执行以下操作

```
int len = sizeof(x)/sizeof(x[0]); 
```

您必须遍历 x 并对数组 x 的每个元素执行 strcmp，以检查 s 是否与 x 的元素之一相同。

```
char * x [] = { "ab", "bc", "cd" };
char * s = "ab";
int len = sizeof(x)/sizeof(x[0]);
int i;

for(i = 0; i < len; ++i)
{
    if(!strcmp(x[i], s))
    {
        // Do your stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-03T05:59:10.513

像这样的东西？？

```
#include <stdio.h>
#include <string.h>

int main() {
    char *x[] = {"ab", "bc", "cd", 0};
    char *s = "ab";
    int i = 0;
    while(x[i]) {
        if(strcmp(x[i], s) == 0) {
            printf("Gotcha!\n");
            break;
        }
        i++;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-21T18:11:21.297

`in`Python方法的一个可能的C实现可能是

```
#include <string.h>

int in(char **arr, int len, char *target) {
  int i;
  for(i = 0; i < len; i++) {
    if(strncmp(arr[i], target, strlen(target)) == 0) {
      return 1;
    }
  }
  return 0;
}

int main() {
  char *x[3] = { "ab", "bc", "cd" };
  char *s = "ab";

  if(in(x, 3, s)) {
    // code
  }

  return 0;
} 
```

请注意，使用`strncmp`而不是`strcmp`可以更轻松地比较不同大小的字符串。更多关于他们两个的信息在他们的[手册页](http://man7.org/linux/man-pages/man3/strncmp.3.html)中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T06:57:46.257

有一个查找字符串长度的功能。它`strlen`来自`string.h`

然后你可以使用`strcmp`来自同一个标题的来比较字符串，就像其他答案所说的那样。

# linux - 如何在linux中退出窗口后运行命令

> ID：13677893
> 
> 赞同：0
> 
> 时间：2012-12-03T05:54:38.040
> 
> 标签：linux

我正在linux机器和另一台机器之间建立连接来运行我的脚本。但是一旦我关闭窗口，连接就会断开。关闭窗口后我应该怎么做才能使这个连接继续。因为多个用户执行脚本另一台机器，因此每次都很难建立连接。欢迎提出任何建议。

我在命令行中编写的建立连接的命令是

```
 java -jar /home/**/workspace/cli.jar -s https://****** 
     -i /home/**/.ssh/id_rsa -description TESTS 
     -fsroot /home/**/Jenkins -labels test -name TESTS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:04:36.133

在命令后使用“ **&** ”在后台运行它而不需要打开窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:58:19.307

如果我理解正确，屏幕就可以了。在谷歌中尝试“人屏”。

# iphone - 绘制到屏幕上

> ID：13677897
> 
> 赞同：0
> 
> 时间：2012-12-03T05:54:49.583
> 
> 标签：iphone, ios5, cgcontext

我只想根据手指触摸绘制点和线并在iphone屏幕中移动。在iphone中画点的最佳方法是什么？谁能告诉我如何根据手指触摸绘制点并在 iphone 中移动？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:14:42.440

检查本教程，我相信它肯定会帮助你。

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_freehand-drawing/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_freehand-drawing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T07:16:00.210

您可以在图像上或`UIView`使用`UIBezierPath`类上画线..在此类对象中，您可以存储用户触摸点并使用此点数组画线..

有关更多详细信息，请参阅此链接中的教程和演示。

[在视图和图像上绘图](http://soulwithmobiletechnology.blogspot.in/2011/05/uibezierpath-tutorial-for-iphone-sdk-40.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:29:51.373

你不能在屏幕上“只画”。最接近的近似值可能是从某些视图的触摸委托方法中保存一些坐标并调用 setNeedsDisplay。当调用视图的 drawRect 时，您可以使用一些核心图形 (CG) 绘图命令，并将这些保存的坐标放入给定的绘图上下文中。操作系统将很快将该视图上下文合成到显示屏上。

# javascript - 如何禁用 ACE 编辑器的查找对话框

> ID：13677898
> 
> 赞同：7
> 
> 时间：2012-12-03T05:54:48.693
> 
> 标签：javascript, html, ace-editor

我想禁用 ACE 编辑器的查找对话框，当编辑器获得焦点时，通过按 `Command`+组合键调用该对话框。`F`

我尝试了以下（除其他外）：

```
document.body.onkeydown = 
document.body.onkeyup = 
document.body.onkeypress = function(event) {      
    return false;
}; 
```

这可以防止一个人能够正常打字，但不会阻止`Command`+`A key`被处理。

如何防止`Command`+`F`组合被处理？

理想情况下，我希望能够仅阻止`Command`+`F`组合，因为我想继续使用其他`Command`组合键。

我已经为这个问题设置了一个[JSFiddle](http://jsfiddle.net/faceleg/S9CNT/)。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-01-06T11:04:39.327

最好使用“removeCommand”而不是使用带有假处理程序的“addCommand”

```
editor.commands.removeCommand('find'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T10:01:57.207

[Andrei Andrushkevich 的答案](https://stackoverflow.com/a/27797303/231788)现在是一个更好、更简单的解决方案。

* * *

您可以使用 重新定义与快捷方式关联的命令`editor.commands.addCommand`，然后只提供一个空函数。此自定义定义将优先于内置定义。在这种情况下：

```
editor.commands.addCommand({
    name: "unfind",
    bindKey: {
        win: "Ctrl-F",
        mac: "Command-F"
    },
    exec: function(editor, line) {
        return false;
    },
    readOnly: true
}) 
```

这是[更新的 JSFiddle](http://jsfiddle.net/S9CNT/6/)。我没有找到明确的文档，但[这里是`editor.commands`定义](https://github.com/ajaxorg/ace/blob/ac0a26d33334d4704a306294a09a3b91555daf2a/lib/ace/editor.js#L75)，[这里`.addCommands()`是](https://github.com/ajaxorg/ace/blob/8b971619b73f23df37c8ef915bd76d656b711943/lib/ace/keyboard/hash_handler.js#L88-L102). （注意：自编写此答案以来，代码可能已更改。）

*根据 jcubic 的评论编辑*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-10T06:12:08.653

我不喜欢 removeCommand 因为它会从菜单中删除它；通常，您将允许用户定义自己的密钥，并且*某些*用户可能希望将其重新添加。我开始认为我不想使用内置的，但后来我认为它有一些优势。

您只需清除绑定键即可禁用它。你可以做：

```
var find = editor.commands.byName['find'];
find.bindKey = {};
editor.commands.addCommand(find); 
```

这将完成你也可以做的很长的路要走：

```
editor.commands.addCommand({
    name: 'find',
    bindKey: {},
    exec: editor.commands.byName['find'].exec
}); 
```

这样，如果您有一个 GUI 供用户设置自己的键绑定，“查找”仍将在命令列表中；它只会被禁用，而 exec 仍然会在那里。

如果您有自己的查找功能，您还应该使用 addCommand 并将打开查找窗口的逻辑放在 exec 功能中：

```
editor.commands.addCommand({
    name: 'find',
    bindKey: { win:'Ctrl-F',mac:'Ctrl-F'},
    exec: function(){
        alert("My Function Here");
        openMyFinderModal();
    }
}); 
```

# android - 如何在android中关闭一个java类

> ID：13677900
> 
> 赞同：0
> 
> 时间：2012-12-03T05:54:54.240
> 
> 标签：android

大家好，我来自 iPhone 背景，是 android 的新手。我有两个 exitText 字段和一个 xml 布局中的按钮，连接到 AddKeyWord 类。当我单击按钮时，我想关闭我的 java 类。这可能吗？我不想单击后退按钮转到我以前的视图。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addkeyword);
    btnCreate=(Button) findViewById(R.id.button1);
    btnCreate.setOnClickListener(new OnClickListener() {
        @Override

       public void onClick(View v) {

    });

      }
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T05:57:10.870

如果您的 java 类是一个活动，请使用 ActivityName.this.finish()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:57:10.813

只需将 finish() 添加到您的 onClick 方法中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T06:03:08.213

因为有 onCreate(..) 方法所以我确定它是一个活动，所以你可以使用以下来完成这个活动

```
btnCreate.setOnClickListener(new OnClickListener() {
        @Override

       public void onClick(View v) {
       AddKeyWord.this.finish();
    });

      }
      } 
```

HTH :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T06:06:08.937

使用finish() 方法。但是，如果您之前的活动也完成了，那么您应该重新启动它

```
Intent intent = new Intent(getApplicationContext(), OldActivity.class);
startActivity(intent); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T06:26:31.177

点击事件调用您下一页的新活动

```
public void onClick(View v) {
if (arg0 == buttonSubmit) 
            {
                startActivity(new Intent(getApplicationContext(), NextPage.class));
            }

}); 
```

在下一页

```
public void onClick(View v) {
if (arg0 == backButton) 
            {
                startActivity(new Intent(getApplicationContext(), PrevPage.class));
            }

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T06:22:07.453

```
btnCreate.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View arg0) {
            Intent Nextpage= new Intent(ClassName.this,NextClassName.class);
            this.finish();
            startActivity(Nextpage);                
        }}); 
```

# c# - 如何使用带有动态查询的 LINQ 定义 SELECT TOP？

> ID：13677904
> 
> 赞同：5
> 
> 时间：2012-12-03T05:55:24.850
> 
> 标签：c#, sql, linq, lambda

我想将动态 lambda 表达式传递给下面的函数，但我不确定如何在表达式对象上定义 .Take() 或 .OrderByDescending() 。如果我想调用下面的函数，那么我希望能够做到这一点：

```
dbprovider.Query = (x => x.ConfigurationReference == "172.16.59.175")
                   .Take(100)
                   .OrderByDescending(x.Date)
FindEntities(db, dbprovider.Query) 
```

但我不能（这种语法无效）。有任何想法吗？

```
public static List<T> FindEntities<T>(TrackingDataContext dataContext, System.Linq.Expressions.Expression<Func<T, bool>> find) where T : class
{
    try
    {
        var val = dataContext.GetTable<T>().Where(find).ToList<T>();
        return val;
    }
    catch (Exception ex)
    {
        throw ex;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T06:17:15.510

参数类型为：

```
System.Linq.Expressions.Expression<Func<T, bool>> find 
```

这意味着它可以采用谓词（“where”子句），并且**只能**采用谓词。因此，您可以在那里传递的唯一位是过滤器：

```
x => x.ConfigurationReference == "172.16.59.175" 
```

要执行您想要的操作，您需要在 中添加其余代码`FindEntities`，使其变为：

```
var val = dataContext.GetTable<T>().Where(find)
              .OrderByDescending(x => x.Date).Take(100).ToList<T>(); 
```

（另请注意，`Take`应该真的在*之后*`OrderByDescending`）

您*可以*这样做的一种方法是：

```
public static List<T> FindEntities<T>(TrackingDataContext dataContext,
    System.Linq.Expressions.Expression<Func<T, bool>> find,
    Func<IQueryable<T>, IQueryable<T>> additonalProcessing = null
) where T : class
{
    var query = dataContext.GetTable<T>().Where(find);
    if(additonalProcessing != null) query = additonalProcessing(query);
    return query.ToList<T>();
} 
```

并致电：

```
var data = FindEntities(db, x => x.ConfigurationReference == "172.16.58.175",
    q => q.OrderByDescending(x => x.Date).Take(100)); 
```

但是，坦率地说，我不确定这样做的意义是什么......调用者可以更方便地在本地完成所有这些操作，而无需使用`FindEntities`。只是：

```
var data = db.GetTable<T>()
             .Where(x => x.ConfigurationReference == "172.16.58.175")
             .OrderByDescending(x => x.Date).Take(100).ToList(); 
```

甚至：

```
var data = db.SomeTable
             .Where(x => x.ConfigurationReference == "172.16.58.175")
             .OrderByDescending(x => x.Date).Take(100).ToList(); 
```

要不就：

```
var data = (from row in db.SomeTable
            where row.ConfigurationReference == "172.16.58.175"
            orderby row.Date descending
            select row).Take(100).ToList(); 
```

# c# - 在文本中查找 Chr(13) 并在 C# 中拆分它们

> ID：13677908
> 
> 赞同：5
> 
> 时间：2012-12-03T05:55:42.113
> 
> 标签：c#

我在vb6下面写了两行代码。代码是：

```
d = InStr(s, data1, Chr(13), 1) ' Fine 13 keycode(Enter) form a text data.

sSplit2 = Split(g, Chr(32))     ' Split with 13 Keycode(Enter) 
```

但是我不能用 C# 编写上面的代码。请帮帮我。如何用 C# 编写上述代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T05:58:50.093

我相信您正在寻找[string.Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)：

```
string str = "Test string" + (char)13 + "some other string";
string[] splitted = str.Split((char)13); 
```

或者您可以使用：

```
string[] splitted = str.Split('\r'); 
```

对于上述内容，您将在`splitted`数组中获得两个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T05:58:31.887

的等效代码`sSplit2 = Split(g, Chr(32))`是

```
string[] sSplit2 = g.Split('\n'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T06:08:23.773

```
int index = sourceStr.IndexOf((char)13);
String[] splittArr = sourceStr.Split((char)13); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T06:21:51.317

```
 const char CarriageReturn = (char)13;
        string testString = "This is a test " + CarriageReturn + " string.";
        //find first occurence of CarriageReturn
        int index = testString.IndexOf(CarriageReturn);
        //split according to CarriageReturn
        string[] split = testString.Split(CarriageReturn); 
```

如果您想根据您是在 unix 还是非 unix 环境中运行来封装回车，您可以使用 Environment.NewLine 。请参阅[http://msdn.microsoft.com/en-us/library/system.environment.newline(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.environment.newline(v=vs.100).aspx)。

```
 string testString2 = "This is a test " + Environment.NewLine + " string.";
        //find first occurence of Environment.NewLine
        int index2 = testString2.IndexOf(Environment.NewLine);
        //split according to Environment.NewLine
        string[] split2 = testString2.Split(new string[] { Environment.NewLine }, StringSplitOptions.None); 
```

# jquery - 按字母顺序显示下拉值

> ID：13677913
> 
> 赞同：2
> 
> 时间：2012-12-03T05:56:12.937
> 
> 标签：jquery, asp.net-mvc

我的下拉值显示字母顺序。但我不需要那样。因为当我添加值时，它会改变字母顺序。

例如，

我有很多功能

1.  -- 设计器-- // 子函数

2.  配饰设计师

..很快。

但我的下拉菜单显示

1.  配件设计师，

2.  ——设计师——。

我的 Jquery 代码在这里

```
 $('#dropdown').change(function () {
    $("#dropdown1").show();
    $.ajax({
        url: "/Jobs/dropdown1",
        type: 'GET',
        data: { 'dropdownId': $(this).val() },
        dataType: 'json',
        success: function (response) {
            if (response.Success) {
                $('#dropdown1').children().remove();

                $.each(response.dropdown1, dropdown (index, role) {
                    $('#dropdown1').append(
                        '<option value="' + dropdown1.Id + '">' +
                            dropdown1.Name +
                        '</option>');
                });
            }
        },
        error: function (xhr, status, error) {

        }
    });
}); 
```

当我单击第一个下拉菜单时，它会自动显示第二个下拉菜单。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:53:01.953

如果您不知道如何在服务器端更改订单，则必须在客户端进行。

根据您的描述，我收集到的结果是一个`JSON`对象，其中每个项目都具有`Id`and `Name`，并且您希望不是按名称而是按 id 来迭代它们。

因此，我建议对您的代码进行以下更改：

```
if (response.Success) {
    $('#Roles').children().remove();

    var results = [];
    // Converting the JSON object into an array
    $.each(response.Roles, function(index, role) {
        results.push(role);
    });

    // Sorting the array items by Id
    results.sort(function(a, b) {
        return a.Id - b.Id;
    });

    $.each(results, function (index, role) {
        $('#Roles').append(
            '<option value="' + role.Id + '">' +
                role.Name +
            '</option>');
    });
} 
```

这应该`Id`在将项目添加到之前对结果集进行排序`#Roles`。

# c# - 将数据表与 asp.net c#、LINQ 和具有寻呼机的存储过程一起使用

> ID：13677914
> 
> 赞同：0
> 
> 时间：2012-12-03T05:56:21.827
> 
> 标签：c#, asp.net, sql-server, linq, jquery-datatables

我正在使用带有 asp.net、c#、Linq 和 SQL Server 存储过程的数据表，并且我的过程在内部进行了分页，并获取了当前页面的参数。

我的 aspx 代码是这样的（用于数据表）

```
 $(document).ready(function () {
    function renderTable(result) {
        var dtData = [];
        $.each(result, function () {
        dtData.push([
            this.errorname,   
            this.Name,
            this.Family,
        ]);
    });
    $('#grid').dataTable({  //grid is the id of the table
        'aaData': dtData,
        'bInfo': false,
        'bLengthChange': true,
        'iDisplayLength': 2,
        'bSort': true,
        'bAutoWidth': false,
        'bProcessing': true,
        'sPaginationType': "full_numbers"
    }); 
```

这是我的 C# 代码

```
DataClassesErrorsDataContext conx = new DataClassesErrorsDataContext();
List<MK_Bad_Gridview_Paging_281_Rejected_linqResult> allresults =
    conx.MK_Bad_Gridview_Paging_281_Rejected_linq(PAGENUMBER).ToList();
return allresults; 
```

该`PAGENUMBER`参数需要获取用户在**datatables分页**结果表中点击的当前页面，然后将其发送到我在SQL Server中的存储过程以获取当前页面结果。

1.  如何首先将所有计数结果加载到数据表以正确分页？
2.  如何获取数据表中当前单击的页码以将其发送到我的 c# 代码以传递给 SQL Server 过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:21:16.650

我确信存储过程 - 不是通过分页获取网格数据的最便捷方式，因为除了当前页面之外，您迟早还会通过排序和过滤选项，而这些操作之后无法完成选择一页数据。丢弃存储过程，将您的 SQL 查询转换为链接查询，使用动态 linq 来使用字符串表达式。如果您需要，我可以编写 ac# 示例代码。然而，在我看来，没有什么比 ExtJS GridPanel 更好的发明了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-08T07:53:04.087

J query Datatable Using SQL server Stored Procedure
，具有动态高效的分页结构，
支持所有服务器版本

```
Step 1:(HTML)

 <link href="../Content/css/datatables.min.css" rel="stylesheet" />
 <script src="../Scripts/datatables.min.js"></script>
 <script src="../Scripts/jQuery-2.1.4.min.js"></script>

 <script>
 $(document).ready(function () {
      if ($.fn.dataTable.isDataTable('#tbl_category')) {
        t.destroy();
    }
    t = $("#tbl_category").DataTable({
        processing: true,
        serverSide: true,
        info: true,
        ajax: {
            url: '../Ajax/Category?option=GetAllAdminCategory&user_srno='+user_srno,
            data: function (data) {
                delete data.columns;
            }
        },
        columns: [
                    { "data": "abc" },
                    { "data": "name" },
                    { "data": "baseDiscount" },
                    { "data": "additionalDiscount" },
                    { "data": "specialDiscount" },
                    {
                        "render": function (data, type, full, meta) {
                            return '<a class="btn btn-warning" onClick="editdata(' + full.srno + ',\'' + full.name + '\',\'' + full.baseDiscount + '\',\'' + full.additionalDiscount + '\',\'' + full.specialDiscount + '\',\'' + full.specialDiscount + '\')" href="javascript://">Edit</a>&nbsp;&nbsp;<a class="btn btn-danger" onClick="deletePhantom(' + full.srno + ',\'DELETE\')" href="javascript://">Remove</a>';
                        }
                    }
        ],
        order: [[0, 'desc']],
        select: true,
        dom: 'lfrtip',
        responsive: true,
        buttons: true
    });
    t.on('order.dt search.dt', function () {
        t.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
            cell.innerHTML = i + 1;
        });
    }).draw();

});
 </script>

 <table id="tbl_category" class="display" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Base Discount</th>
                                <th>Additional Discount</th>
                                <th>Special Discount</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Base Discount</th>
                                <th>Additional Discount</th>
                                <th>Special Discount</th>
                                <th>Action</th>
                            </tr>
                        </tfoot>
                    </table>

STEP :2 (Stored Procedure)

Create procedure [dbo].[category_post]
 @srno int=null,
 @user_srno int=null,
 @catSrno int=null,
 @name varchar(200)=null,
 @baseDiscount numeric(18,2)=null,
 @additionalDiscount numeric(18,2)=null,
 @specialDiscount numeric(18,2)=null,
 @status int null,
 @Action_by int null,
 @option varchar(20) = null,
 @orderColumn  int =null,
@orderDir  varchar(20)=null,
@start  int =null,
@limit  int =null,
@searchKey varchar(20)
  as 
  BEGIN

if @option='GetAllAdminCategory'
  begin

    select IDENTITY(int,1,1) as SnoID, null as abc,specialDiscount, additionalDiscount, baseDiscount, name,cast(srno as varchar(20)) as srno
            --this method is userful for all sql server version (it can be made better by using fetch)
    into #tempCategory
     from categoryStd where [status] not in(4,14) and categoryStd.name like '%'+@searchKey+'%'

     declare @to as int = @start+@limit 

     select * from #tempCategory where SnoID>@start and SnoID<=@to

        order by
                    CASE WHEN @orderColumn = 1 AND @orderdir = 'desc' THEN #tempCategory.[name] END DESC,
                    CASE WHEN @orderColumn = 1 AND @orderdir = 'asc' THEN #tempCategory.[name] END ASC,
                    CASE WHEN @orderColumn = 2 AND @orderdir = 'desc' THEN #tempCategory.[name] END DESC,
                    CASE WHEN @orderColumn = 2 AND @orderdir = 'asc' THEN #tempCategory.[name] END ASC

             OFFSET @start ROWS FETCH NEXT @limit ROWS ONLY

        select count(*) from #tempCategory

  end           

STEP:3 (AJAX Page) C# form

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Configuration;
using AppBlock;
using System.Data.SqlClient;
using Newtonsoft.Json;

namespace alfest.Ajax
{
  public partial class Category : System.Web.UI.Page
  {
    string mode, option, user, limit, start, searchKey, orderByColumn, orderByDir, estMstSrno, pnlsrno, draw, jsonString;
    CommonClass cmnCls = new CommonClass();
    protected void Page_Load(object sender, EventArgs e)
    {
      mode = Request.QueryString["mode"] == null ? "" : Request.QueryString["mode"].ToString();
      option = Request.QueryString["option"] == null ? "" : Request.QueryString["option"].ToString();
      limit = Request.QueryString["length"] == null ? "" : Request.QueryString["length"].ToString();
      start = Request.QueryString["start"] == null ? "" : Request.QueryString["start"].ToString();
      user = Request.QueryString["user"] == null ? "" : Request.QueryString["user"].ToString();
      searchKey = Request.QueryString["search[value]"] == null ? "" : Request.QueryString["search[value]"].ToString();
      orderByColumn = Request.QueryString["order[0][column]"] == null ? "" : Request.QueryString["order[0][column]"].ToString();
      orderByDir = Request.QueryString["order[0][dir]"] == null ? "" : Request.QueryString["order[0][dir]"].ToString();
      estMstSrno = Request.QueryString["estMstSrno"] == null ? "" : Request.QueryString["estMstSrno"].ToString();
      pnlsrno = Request.QueryString["pnlsrno"] == null ? "" : Request.QueryString["pnlsrno"].ToString();
      draw = Request.QueryString["draw"] == null ? "" : Request.QueryString["draw"].ToString();

      if (option == "GetAllAdminCategory")
      {

       // Cls_Category CatgObj = new Cls_Category();
       // CatgObj.orderColumn = Convert.ToInt32(orderByColumn);
       // CatgObj.limit = Convert.ToInt32(limit);
       // CatgObj.orderDir = orderByDir;
       // CatgObj.start = Convert.ToInt32(start);
       // CatgObj.searchKey = searchKey;
       // CatgObj.option = "GetAllAdminCategory";

      // or user your own method to get data (just fill the dataset)

      //  DataSet ds = cmnCls.PRC_category(CatgObj);

        dynamic newtonresult = new
          {
            status = "success",
            draw = Convert.ToInt32(draw == "" ? "0" : draw),
            recordsTotal = ds.Tables[1].Rows[0][0],
            recordsFiltered = ds.Tables[1].Rows[0][0],
            data = ds.Tables[0]
          };
        jsonString = JsonConvert.SerializeObject(newtonresult);

        Response.Clear();
        Response.ContentType = "application/json";
        Response.Write(jsonString);

      }
    }
  }
} 
```

[![在此处输入图像描述](../Images/ed8e84d3ad9acf7e91e43a0f3407e074.png)](https://i.stack.imgur.com/GONzc.png)

# actionscript-3 - 在事件处理中注册一些属性

> ID：13677915
> 
> 赞同：0
> 
> 时间：2012-12-03T05:56:25.260
> 
> 标签：actionscript-3, blackberry-playbook

我想向我的应用程序显示几张图片

```
 sourceAudioFile =(event.target as File);
            sourceAudioFile.data;

            var myLoader:Loader = new Loader(); 
            var url :URLRequest = new URLRequest("file:///" + sourceAudioFile.nativePath);
            myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onImageLoaded);
            myLoader.load(url); 
```

注册监听器

```
private function onImageLoaded(e:Event):void 
{
            var image : Bitmap= new Bitmap(e.target.content.bitmapData);
            image.scaleX = 0.5 ; 
            image.scaleY = 0.5 ; 
} 
```

有什么方法可以将一些自定义值添加到 Event.COMPLETE 以了解正在加载的图像类型。

像 e.imageName ， e.noOfImage ，我可以在完整的处理程序中访问它们并在我注册此事件时为其提供值。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:31:04.387

是的，您可以尝试注册事件，例如：

```
myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,function(e:Event){

  dispatchEvent(new CustomEvent(CustomEvent.COMPLETE, "<imageType>"));

}, false, 0, true); 
```

并添加新类，扩展事件类：

```
public class CustomEvent extends Event {

        public static const COMPLETE:String  = "CustomEventComplete";

        public var imageType:String = "";

        public function CustomEvent(type:String, imageType:String = "", bubbles:Boolean = false, cancelable:Boolean = false){

            super(type, bubbles, cancelable);

            this.imageType = imageType;
        }

        override public function clone():Event {

            return new CustomEvent(type, customTarget, bubbles, cancelable);
        }

    } 
```

现在您可以注册 CustomEvent.COMPLETE 并在侦听器中获取图像类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:22:29.877

您可以通过检查 LoaderInfo 的 url 属性来了解已加载的内容

```
private function onImageLoaded(e:Event):void 
{
var cli:LoaderInfo = e.target as LoaderInfo;//you added listener to the contentLoaderInfo property
    trace(cli.url);//url of the media being loaded
    //do something with it
} 
```

同样在这个 SO 问题中，您可以更复杂地回答您的问题:)

[将参数传递给事件监听器](https://stackoverflow.com/questions/13486230/to-pass-a-parameter-to-event-listener-in-as3-the-simple-way-does-it-exist/13488344#13488344)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:31:32.757

是的，有一个简单的方法：

```
myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onImageLoaded(imageName, noOfImage));
myLoader.load(url);

function onImageLoaded(imageName:String, noOfImage:int):Function {
  return function(e:Event):void {
    // Respective "e", "imageName" and "noOfImage" are available for you here.
  }
} 
```

如果您以后需要删除它，请将第一行更改为：

```
var functionOnImageLoaded:Function = onImageLoaded(imageName, noOfImage);
myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, functionOnImageLoaded); 
```

然后稍后就这样做：

```
myLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE, functionOnImageLoaded); 
```

我以前回答过这个问题。[看这里。](https://stackoverflow.com/a/13488640)

# django - Linux 服务器上的 Sencha Touch 2 开发

> ID：13677918
> 
> 赞同：0
> 
> 时间：2012-12-03T05:56:48.750
> 
> 标签：django, web-applications, sencha-touch-2

**主要问题：**是否可以在 Linux 服务器上进行 Sencha Touch 2 Web 应用程序的所有开发？

我有一个 Linux 服务器已经为我工作的公司托管/运行了一个相当大的 Django Web 应用程序，并且想要构建一个 Web 应用程序以在现场的 iPad 上使用（该 Web 应用程序对于现场工作人员来说只有少量功能）。理想情况下，我可以在 linux 服务器上完成这个 web 应用程序的所有开发，而不是在我的个人 Windows 计算机上。

我找不到任何可以显示如何设置这样一个场景的东西。我是否将 SDK 文件放在我的 Django 项目目录中？他们会进入我的 Django 目录中的 app 目录吗？如何设置 apache 服务器来管理 Sencha Touch 应用程序？

Sencha“[入门](http://docs.sencha.com/touch/2-1/#!/guide/getting_started)”指南显示了看起来像 Linux 类型 shell 的代码（他们说通过执行`cd ~/webroot/sencha-touch-2.0.00gpl/`<- 更改到 ST 目录，这看起来像 Linux 命令行，不是吗？）

任何人都有关于此的任何指南、信息、教程、提示

# ios - 在ios中的电子邮件消息正文中插入带有行和列的表格

> ID：13677920
> 
> 赞同：2
> 
> 时间：2012-12-03T05:56:52.727
> 
> 标签：ios

我使用 MFMailComposeViewController 方法创建了电子邮件。我需要在电子邮件的邮件正文中插入一个包含行和列的表格。所以请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:01:21.883

您可以将 html 设置为内容正文并使用一些 html 代码在其中绘制表格。

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
NSString *emailBody = @"<html>....</html>"; //html code for drawing table
[picker setMessageBody:emailBody isHTML:YES]; 
```

要在 html 中绘制表格，请使用类似的东西，

```
<table border=1>
 <thead><tr><td>#</td><td>Name</td></tr></thead>
 <tbody>
  <tr><td>1</td><td>One</td></tr>
  <tr><td>2</td><td>Two</td></tr>
  <tr><td>3</td><td>Three</td></tr>
  <tr><td>4</td><td>Four</td></tr>
 </tbody>
</table> 
```

有关如何使用 html 代码绘制表格的更多详细信息，您可以查看一些 stackoverflow 问题，例如[HTML Table different number of columns in different rows](https://stackoverflow.com/questions/3838488/html-table-different-number-of-columns-in-different-rows)

# iphone - xcode中mapkit上的用户当前位置

> ID：13677921
> 
> 赞同：0
> 
> 时间：2012-12-03T05:56:54.973
> 
> 标签：iphone, ios, mapkit

我需要一个很好的教程，在该教程中，用户的当前位置（纬度、经度、城市、州、国家）随着位置的变化而不时更新并显示在地图工具包上，蓝色图标缩放。

我通过在 view.xib 上放置一个 MKMapView 来做到这一点，它仅第一次显示用户的当前位置（模拟器上的默认设置：SanFransisco），蓝点缩放。但是当我下次运行该应用程序时，它没有显示任何蓝点缩放。我应该写任何代码吗？直到现在我还没有写任何代码。刚刚在 xib 中放置了一个带有 Show UserLocation 的 mapkit。我怎样才能得到一个蓝点？

我还需要从用户位置找到附近的医生，并用红色标记指向同一张地图。

通过谷歌但很困惑。请在这方面向我推荐一些好的教程。

编辑：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.mapView.delegate = self;
    locationManager = [[CLLocationManager alloc] init];
    [locationManager setDelegate:self];
    [locationManager setDistanceFilter:kCLDistanceFilterNone];
    [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    [self.mapView setShowsUserLocation:YES];
    [locationManager startUpdatingLocation];
    [self queryGooglePlaces:@"doctor"];
}

-(void) queryGooglePlaces: (NSString *) googleType {

    // https://developers.google.com/maps/documentation/places/#Authentication
    NSString *url = [NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json?location=%f,%f&radius=300&types=doctor&sensor=true&key=%@",  coord.latitude, coord.longitude,kGOOGLE_API_KEY];

    NSURL *googleRequestURL=[NSURL URLWithString:url];

        dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL: googleRequestURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
    });
} 
```

//这里我将数组数据设为空，因为纬度和经度作为 0.000 传递。

如何在 viewDidLoad 上同时获取它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:48:59.607

如果您想找到附近的医生地址，您需要使用“GOOGLE PLACE API”

//获取用户当前位置

CLLocationCoordinate2D location = [[[mapview userLocation] location] 坐标];
NSLog(@"从地图中找到的位置：%f %f",location.latitude,location.longitude);

[检查此链接它是google place api的好例子](http://iphonebyradix.blogspot.in/2011/07/working-with-google-places-api.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:44:12.183

Add this Delegate method of ccl location manager

.h file

```
double currentLatitude;
double currentLongitude;

  - (void)locationManager:(CLLocationManager *)manager
        didUpdateToLocation:(CLLocation *)newLocation
               fromLocation:(CLLocation *)oldLocation
    {

        currentLatitude = newLocation.coordinate.latitude;

        currentLongitude = newLocation.coordinate.longitude;

        [self  queryGooglePlaces:somestring];
    }

-(void) queryGooglePlaces: (NSString *) googleType {

    // https://developers.google.com/maps/documentation/places/#Authentication
    NSString *url = [NSString stringWithFormat:@"https://maps.googleapis.com/maps/api/place/search/json?location=%f,%f&radius=300&types=doctor&sensor=true&key=%@",  currentLatitude , currentLongitude,kGOOGLE_API_KEY];

    NSURL *googleRequestURL=[NSURL URLWithString:url];

        dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL: googleRequestURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
    });
} 
```

pass the current latitude and longitude in your `-(void) queryGooglePlaces: (NSString *) googleType { }` method

# javascript - 从 JQuery 对象中获取选择器

> ID：13677925
> 
> 赞同：1
> 
> 时间：2012-12-03T05:57:12.923
> 
> 标签：javascript, jquery, jquery-selectors

例如，这会给我：

```
 console.log($(".smartgridview-normal").selector)
 //result is  '.smartgridview-normal'. 
```

![在此处输入图像描述](../Images/8113dd96e3d9bbdf251f96f5c27aeb5e.png)

我的代码是：

```
 $( '.smartgridview-normal th' ).live( 'dblclick', function () {
        var optimalWidth = parseFloat( $( this ).attr( 'data-width' ) );
        console.log( $(this).selector );// At this point I need the selector
        $(this).addClass('selected');
    } ); 
```

我的日志给了我一个空字符串。'this' 对象没有选择器。有什么方法可以获取“this”指向的元素的选择器？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:04:11.697

哦，我知道你的问题出在哪里了。`$(this)`不是使用选择器构造的，而是直接包装一个 DOM 元素，所以它不会携带它到任何地方。您可以通过以下方式获得原始选择器`$('.smartgridview-normal th').selector`；`$('.smartgridview-normal th')`但是和之间有很大的区别`$(this)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T06:19:04.357

正如 Amadan 所说，点击处理程序内部`this`指的是元素，而不是 jQuery 对象

它并不完美，但您可以缓存 jQuery 对象

```
var elements = $("#mySelector")
$elements.on("dblclick", function(event){
    console.log($elements.selector);
});​ 
```

用于测试的[小提琴](http://jsfiddle.net/K4uey/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T06:31:52.420

详细说明我的评论，`"#"+this.id`如果元素有一个 id，这是你可以期望的最好的。如果不是，则您拥有的唯一信息是该元素属于您的原始选择`'.smartgridview-normal th'`。

您始终可以自己在代码中添加 id（例如，基于当前日期和时间的唯一 id）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-03T06:15:41.627

尝试使用`nodeName`而不是`selector`,

```
var selector = $(this)[0].nodeName; 
```

或者，

```
var selector = this.nodeName; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-03T06:36:33.530

也许先将其设置为变量？

```
var sel = "answer";
$("#"+sel).on("dblclick", function(event){
   console.log("Current selector is "+sel);
});​ 
```

# android - Android 中的地图加载

> ID：13677931
> 
> 赞同：0
> 
> 时间：2012-12-03T05:57:42.590
> 
> 标签：android, google-maps, map

我对android中的这个地图功能非常陌生。我的 SDK 中没有安装 Google API。请帮助我安装 GoogleAPI。我找了很多文件。但我没有任何想法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:14:59.820

首先你必须加载 SDK Manager。然后在所需的 api 版本下选择“Google APIs”并安装它。然后您所要做的就是使用已安装的 Google API 创建一个新项目。（不使用标准的 Android SDK）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:06:11.390

就像你安装了 SDK 一样，你可以使用 SDK manager 安装相应的 google apis 参考这个链接：[https ://developers.google.com/android/add-ons/google-apis/installing](https://developers.google.com/android/add-ons/google-apis/installing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:14:03.060

只需按照以下步骤操作：

打开 Eclipse --> 点击“windows”选项 --> 之后选择 Android SDK Manager --> 你必须升级/安装你的谷歌 API 以获得所需的版本

![Android avd 管理器](../Images/b9fff1060ea91dd36aa437770485900a.png)

# svn - 提交到 VisualSVN 失败，身份验证被拒绝

> ID：13677932
> 
> 赞同：3
> 
> 时间：2012-12-03T05:58:04.913
> 
> 标签：svn, authentication, authorization, basic-authentication, visualsvn-server

我在提交由 VisualSVN 服务器支持的 subversion 存储库时遇到问题。我可以签出代码并更新，所以我使用的用户名和密码是正确的。但是，当我尝试提交时，我得到一致的授权失败。我尝试过非交互式、交互式、命令行、svnX、版本，结果都一样。

```
svn: Commit failed (details follow):
svn: MKACTIVITY of 'xxxxxx/4a1e3c7e-8efd-47f0-abf6-80239ee625c8': authorization failed: Could not authenticate to server: rejected Basic challenge 
```

该存储库显然是在 https 下运行的。

多年来，我一直在命令行中使用其他 SVN 存储库，但从未遇到过这个问题。我已经阅读了很多关于这个问题的帖子，但是他们都遇到了通过 subversion 在本地存储的身份验证无效的问题，我清除了这些缓存，但什么也没有。

特别是因为结帐和更新工作，我很难过。我还可以使用相同的凭据登录到运行 VisualSVN 服务器的 Windows 服务器。

VisualSVN 服务器版本是 2.5.1 svn 版本 1.6.17 (r1128011) 在 OSX 上运行

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:47:38.603

I've been using VisualSVN Server and TortoiseSVN client for a while, and several times I've experience authentication errors when trying to access the repository from a new client installation.

After having a look at the event log (VisualSVN Server logs to the Windows event log) I noticed the error messages saying that the user was not found. However I know the user exists, and I have configured the server to use Subversion authentication.

I found that **Subversion authentication uses case sensitive user names**. The Subversion user begins with a capital letter and I try to use only lower case on the client. This has probably been the reason every time I've had this problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:51:19.360

您不应该被错误措辞所迷惑。虽然错误指出的第一件事是`authorization failed`这里真正的信息部分是**`Could not authenticate to server: rejected Basic challenge`**.

如果不查看 VisualSVN 服务器日志顺便说一句，这种行为很难解决。

当您看到错误**拒绝基本质询**时，按照简单的检查表对问题进行故障排除是有意义的：

1.  *[Cpt。Obvious Mode ON]*检查密码是否有效。连续3次输入错误密码后可以看到错误，

2.  仔细检查密码是否包含非 ASCII 字符（例如**£**、**ü**、**ä**等）。您可以使用带有非 ASCII 符号的密码登录 Windows，但是基本身份验证类型不支持非 ASCII 字符。[您可以通过切换到集成 Windows 身份验证](http://www.visualsvn.com/server/features/windows-auth/#integrated)来解决此问题，但这是另一个问题。

如果上述步骤都不能帮助您解决更深层次的问题：

1.  [检查 VisualSVN 服务器日志](http://www.visualsvn.com/support/topic/00028/)。不成功的身份验证尝试会记录什么？

2.  检查 Windows 安全日志。您可以在那里看到可以澄清行为的相关事件。例如，您可以看到由[Windows Server 2003 错误](http://support.microsoft.com/kb/942636)引起的错误 0xC0000064 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:19:20.583

1.  如果您的 VisualSVN 服务器使用单独的用户文件进行身份验证，则登录 Windows 没有任何意义（与 SVN 登录无关）
2.  您必须使用 CLI 客户端并在提交时**强制授权，即使用**

    `--username ARG : specify a username ARG`

    `--password ARG : specify a password ARG`

    `--no-auth-cache : do not cache authentication tokens`

    在命令中（写入将用于*保证正确*登录/通过的事务）

如果即使此提交也会因“授权失败”而失败，那么它可能仅意味着一个：您在此存储库中具有只读访问权限（至少受存储库树的提交部分影响）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-05T10:35:16.143

就我而言..svn 文件夹位于 Caps 中，并且 repo 浏览器中给出的路径很小..

# ruby-on-rails - Rails - 按关联日期排序

> ID：13677934
> 
> 赞同：0
> 
> 时间：2012-12-03T05:58:19.227
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有以下两个模型：

```
class Shelf < ActiveRecord::Model
    has_many :wines

    def self.order_by_oldest_bottle_of_wine
        #TODO: order by the oldest wine bottle...
    end
end

class Wine < ActiveRecord::Model
    belongs_to :shelf

    attr_accessible :produce_date
end 
```

在货架模型中，我想按货架上最旧的酒瓶订购货架（即货架上最旧的酒瓶在前），但不能 100% 确定实施。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:07:36.550

您可以通过命名范围执行此操作

在您的`Shelf`模型中，您可以像这样定义它：

`named_scope :order_by_oldest_bottle_of_wine, joins: :wines, order: "wines.produce_date DESC"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:52:34.620

如果您使用的是 Rails 3.x，您可以使用以下任何一种

**解决方案1：**

```
def self.order_by_oldest_bottle_of_wine
  self.wines.order("produce_date DESC")
end 
```

**解决方案 2：** 如果要使用范围

```
class Wine < ActiveRecord::Model
  belongs_to :shelf
  scope :ordered_by_produce_date, order("produce_date DESC")
  attr_accessible :produce_date
end

class Shelf < ActiveRecord::Model
  has_many :wines
  def self.order_by_oldest_bottle_of_wine
    self.wines.ordered_by_produce_date
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:04:03.787

```
def self.order_by_oldest_bottle_of_wine
    self.wines.find(:all, :order=>"produce_date DESC")
 end 
```

# objective-c - 绘制到较小的图像时，drawInRect 会失去分辨率吗？

> ID：13677935
> 
> 赞同：0
> 
> 时间：2012-12-03T05:58:19.057
> 
> 标签：objective-c, ios, cocoa-touch, uiimageview, uiimage

当我使用大小为 200x200 像素的 drawInRect 方法绘制大图像（例如 1000x1000 像素）时，我再次使用 drawInRect 方法将图像绘制为其原始大小（1000x1000 像素）是否会影响分辨率？通过将大图像绘制成小图像并再次将相同的图像绘制成大图像，分辨率会降低吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:19:15.560

希望我的头脑中你的问题是正确的。

如果您拍摄大于 200x200 像素的图像并将其绘制成 200x200 像素的矩形，它将被缩小并丢失大部分细节。如果您然后获取生成的图像并尝试在更大的矩形中绘制它，它只会被放大。所以，回答你的问题，是的。它看起来会像地狱一样模糊。这与在图形编辑器中缩小图像大小然后将其恢复到原始大小没有什么不同。细节的丢失是永久性的；没有办法知道在向下过渡中丢失了什么。

# eclipse-plugin - RCP 用于创建独立应用程序，后来转换为插件

> ID：13677940
> 
> 赞同：0
> 
> 时间：2012-12-03T05:59:01.917
> 
> 标签：eclipse-plugin, swt, eclipse-rcp

我正在为我们的内部工具开发一个独立的 GUI。在它足够成熟之后，它应该作为插件集成到 Eclipse 中。

我是 Java 世界的新手。我已阅读有关 RCP 的信息。这是 RCP 的正确用例场景吗？如果是，我可以在 RCP 应用程序/插件中使用 SWT 视图吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:22:26.610

> 这是 RCP 的正确用例场景吗？

是的，RCP 非常适合。您可以使用相同的插件在 Eclipse 和独立应用程序中提供功能。

> 如果是，我可以在 RCP 应用程序/插件中使用 SWT 视图吗？

是的当然。在最新版本的 RCP (e4) 之前，您*只能*将 SWT 用于 GUI（当然，Swing/JavaFX/等可以与 SWT 集成）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T08:54:56.290

当您开发基于 Eclipse RCP 的应用程序时，实际上您开发了许多插件。如果您遵循一组特定的受限规则，那么您的插件可以作为 RCP 应用程序的一部分和更大的 Eclipse IDE 的一部分原样运行。

（人们很容易争辩说 IDE“只是”一个非常大的 RCP 应用程序。IDE 基于 Eclipse 平台，而 Eclipse RCP 只是其中的一个小子集......）

我会为你的项目推荐两本书：

*   Jeff McAffer、Jean-Michel Lemieux 和 Chris Aniszczyk 撰写的“Eclipse 富客户端平台（第 2 版）” - 请参阅[Amazon](https://rads.stackoverflow.com/amzn/click/com/0321603788)。
*   “Eclipse 插件（第 3 版）”，作者 Eric Clayberg 和 Dan Rubel - 参见[Amazon](https://rads.stackoverflow.com/amzn/click/com/0321553462)。

第一个或多或少是基于 RCP 的应用程序的圣经，后者为您提供了很多关于如何集成到 IDE 的好例子。非常先进，但也非常好。

# antlr - ANTLR 词法分析器错误：在字符 '\n' 处没有可行的替代方案

> ID：13677945
> 
> 赞同：0
> 
> 时间：2012-12-03T05:59:20.000
> 
> 标签：antlr, lexer

我正在编写一个 ANTLR 解析器，它试图识别来自给定输入字符串的 GDB 回溯输出。

我忽略了以下词法分析器语法的新行：

```
RETURN : ('\r' | '\n' | '\r\n') { skip(); }; 
```

但是，当我针对某些输入运行解析器时，ANTLR 会给出以下词法分析器错误：

```
line 20:21 no viable alternative at character '\n'
line 23:14 no viable alternative at character '\n'
line 30:21 no viable alternative at character '\n'
line 33:31 no viable alternative at character '\n' 
```

我不确定为什么会发生这种情况，因为我已经在词法分析器中指定了 '\n'。

有人有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:30:23.683

看起来问题出在您的语法中的其他地方：它仍在对尚未结束的不同元素进行词法分析，并且在仍期望完成当前元素时意外地遇到了行尾。

# macos - Monodevelop/MonoMac：没有“创建 Mac 安装程序”菜单项

> ID：13677946
> 
> 赞同：1
> 
> 时间：2012-12-03T05:59:21.013
> 
> 标签：macos, monodevelop, monomac, dmg

对于[我的 Mono 项目](https://github.com/nicolas-raoul/CmisSync/tree/master/SparkleShare/Mac)，我想使用 Monodevelop/MonoMac 生成一个 Mac 包，如下所述：
[http ://www.mono-project.com/MonoMacPackager#Bundle_Configuration](http://www.mono-project.com/MonoMacPackager#Bundle_Configuration)

上面页面上的屏幕截图显示了`Projects > Create Mac installer`
**问题：**我没有这个项目菜单。

![在此处输入图像描述](../Images/2561d07add2f86d929f3615cfe284d24.png)

我遵守以上页面的所有要求：

*   在 Snow Leopard 上，我安装了 XCode 3.2.6（在 Snow Leopard 上运行的最后一个 XCode 版本），最低要求是 XCode 3.2.5
*   `Application Tools`自 3.2.6 起似乎包含在 XCode 中，所以我不需要安装另一个包。
*   我安装了 Mono 2.10.9
*   我安装了 Monodevelop 3.0.5
*   我在 Monodevelop 中启用了 MonoMac 3.0.5

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:48:56.363

该网站上的文档已过时。在最新版本的 MonoDevelop 中，这些选项位于项目设置中的“Mac OS X 打包”项下。该应用程序现在将与构建过程一起打包，而不必每次都执行额外的步骤。

默认的 MonoMac 项目模板有一个“App Store”构建配置，它（默认情况下）捆绑了 mono 框架，对 .app 进行签名，并构建一个可以分发到应用商店的 .pkg。

# iphone - 如何在网格视图中显示来自 Web 服务的图像

> ID：13677953
> 
> 赞同：2
> 
> 时间：2012-12-03T06:00:04.527
> 
> 标签：iphone, objective-c, ios, xcode

我正在列表视图中从 Web 服务获取图像，但我想在网格视图中显示它们。当我在列表视图中显示图像时，在网格视图中我该怎么做？请帮助。这是我的代码的外观：-

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    NSString *CELLIDENTIFIER=@"CELL";
    UITableViewCell *cell=nil;
    if (cell==nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CELLIDENTIFIER] autorelease];
        CGRect imageFrame = CGRectMake(2, 8, 80, 60);
        NSURL *url = [NSURL URLWithString:[arrayListG objectAtIndex: [indexPath row]]];
        NSData *data = [NSData dataWithContentsOfURL:url];
        UIImage *img = [[[UIImage alloc] initWithData:data] autorelease];
        UIImageView *customImage = [[[UIImageView alloc] initWithFrame:imageFrame] autorelease];

        customImage.image=img;
        [cell.contentView addSubview:customImage];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:32:43.693

最好将这个很棒的库用于 gridview 如何在项目中实现和集成所有内容都记录在此链接上。[看看这个 AQGridview](https://github.com/AlanQuatermain/AQGridView)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:57:20.333

```
Gridview = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0, 320, 480)];//your frame        
Gridview.backgroundColor=[UIColor clearColor];
int row=0;
int column=0;
int rows=4;
int cols=5;
for (int i=0; i<rows*cols; i++)
{
    if((row%4==0)&&(row>0))
    {
        row=0;
        column++;
    } 
    else{
        row++; 
    }
CGRect imageFrame = CGRectMake(row*80+10, column*60+10, 80, 60);//your imageview frame
    NSURL *url = [NSURL URLWithString:[arrayListG objectAtIndex:i]];
    NSData *data = [NSData dataWithContentsOfURL:url];
    UIImage *img = [[[UIImage alloc] initWithData:data] autorelease];
    UIImageView *customImage = [[[UIImageView alloc] initWithFrame:imageFrame] autorelease];

    customImage.image=img;
    [Gridview addSubView:customImage];

}
[Gridview setContentSize:CGSizeMake(rows*90, cols*70)]; 
```

Gridview 是您的滚动视图，将其添加到 IB 中，或者根据您的需要以编程方式添加，在我的情况下，我已经以编程方式添加了它。根据您的要求设置内容大小和框架

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:16:21.607

请修改您的代码如下。

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    NSString *CELLIDENTIFIER=@"CELL";
    UITableViewCell *cell=nil;
    if (cell==nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CELLIDENTIFIER];

        CGRect imageFrame = CGRectMake(2, 8, 80, 60);
        UIImageView *customImage = [[UIImageView alloc] initWithFrame:imageFrame];
        customImage.tag = 1;
        [cell.contentView addSubview:customImage];
    }
    UIImageView *customImage = (UIImageView *)[cell viewWithTag:1];

    NSURL *url = [NSURL URLWithString:[arrayListG objectAtIndex: [indexPath row]]];
    NSData *data = [NSData dataWithContentsOfURL:url];
    UIImage *img = [[UIImage alloc] initWithData:data];
    customImage.image =img;

    return cell;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T07:09:17.913

你可以试试 UIcollectionView 一个新的 ios 控件，它类似于 UItabel 视图，易于集成。请查看这些链接

[http://ashfurrow.com/blog/uicollectionview-example](http://ashfurrow.com/blog/uicollectionview-example)

[http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

# c# - 字典 >> dict_Info_A = 新词典 >>();

> ID：13677956
> 
> 赞同：3
> 
> 时间：2012-12-03T06:00:20.010
> 
> 标签：c#, collections, dictionary

我正在使用带有元组的字典作为参数。

```
Dictionary<string, List<Tuple<string, int>>> dict_Info_A = 
new Dictionary<string,List<Tuple<string,int>>>(); 
```

我无法初始化它，编译错误即将到来。请提出一些初始化它的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:09:56.160

这就是你如何使用集合初始化器来初始化你的字典：

```
Dictionary<string, List<Tuple<string, int>>> dict_Info_A = new Dictionary<string, List<Tuple<string, int>>>
{
    { "a", new List<Tuple<string, int>> { new Tuple<string, int>("1", 1) } } 
    { "b", new List<Tuple<string, int>> { new Tuple<string, int>("2", 2) } } 
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:06:32.360

我想你应该先决定，你需要什么字典

1.  要么映射`string`到`List<Tuple<string,int>>`
2.  或映射`string`到`Tuple<string,int>`

* * *

有了这行代码

```
dict_Info_A.Add("A", new Tuple<string,int>("hello", 1)); 
```

你正在尝试使用`Dictionary<string, Tuple<string, int>>`

这样的字典应该像这样初始化：

```
var dict_Info_A = new Dictionary<string, Tuple<string, int>>(); 
```

* * *

这是您在原始问题中显示的字典：

[使用var](http://msdn.microsoft.com/en-us/library/bb383973.aspx)关键字初始化字典：

```
//you can also omit explicit dictionary declaration and use var instead
var dict_Info_A = new Dictionary<string, List<Tuple<string, int>>>(); 
```

初始化字典的一个元素：

```
dict_Info_A["0"] = new List<Tuple<string, int>>(); 
```

将元素添加到字典中的列表：

```
dict_Info_A["0"].Add(new Tuple<string, int>("asd", 1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T06:10:36.833

您不能使用（评论）：

```
dict_Info_A.Add("A", new Tuple<string,int>("hello", 1)); 
```

因为字典想要一个**list**作为值。您*可以*执行以下操作：

```
List<Tuple<string,int>> list... // todo...
     // for example: new List<Tuple<string, int>> { Tuple.Create("hello", 1) };
dict_Info_A.Add("A", list); 
```

如果您需要每个键多个值，并且想要*附加*到此列表，那么可能：

```
List<Tuple<string,int>> list;
string key = "A";
if(!dict_Info_A.TryGetValue(key, out list)) {
    list = new List<Tuple<string,int>>();
    dict_Info_A.Add(key, list);
}
list.Add(Tuple.Create("hello", 1)); 
```

# haskell - Haskell中的短路布尔二元运算符

> ID：13677961
> 
> 赞同：1
> 
> 时间：2012-12-03T06:00:35.957
> 
> 标签：haskell, boolean, interpreter, short-circuiting

我正在构建一个名为 Haskell 解释器的调用，并且我想实现一个函数`short :: Val -> Exp -> Error Val`来评估应用于表达式的值。我不想评估短路布尔二元运算符的第二个参数（即`((&&) False)`and `((||) True))`，也不想评估传递给单元 lambda ( `\() -> ...`) 抽象的参数。

在像 Haskell 这样的惰性语言中，我知道您会在 Prelude 中内置短路布尔二元运算符。我在想它可以做这样的事情：

```
short :: Val -> Exp -> Error Val
short (Partial (&&) False) = False
-- Making use of Partial Oper Val that is defined in Val 
```

但我已经知道会出现类型错误。我不确定该怎么做。有什么建议么？

一些额外的定义：

```
data Val = VUnit | VNil
         | VN Int | VB Bool | VOp Oper
         | Partial Oper Val
         | VLamUnit Exp (Env Val)
         | VLam String Exp (Env Val)
         | VListBool [Bool]
         | VListInt [Int]

data Exp = Unit | Nil
         | N Int | B Bool | Var String | Op Oper
         | App Exp Exp
         | LamUnit Exp
         | Lam String Exp
         | If Exp Exp Exp
         | Let [(String, Exp)] Exp

data Error a = S a
             | Error String 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T06:19:19.753

函数参数的评估首先由用于绑定参数的模式确定。

如果你有

```
short :: Val -> Exp -> Error Val
short val ex
   | condition on val only       = something
   | other condition on val only = somethingElse
   | condition involving ex too  = thirdPossibility
   | otherwise                   = whatever 
```

绑定参数时不会进行评估，因为模式是无可辩驳的可变模式，`val`部分或可能完全评估以确定第一个守卫的结果。如果计算结果为`True`，`exp`则仅当它被用于`something`并且它的评估是评估时才被评估`something`。只有当前两个条件评估为`False`,时，`ex`才会评估第三个守卫的值（甚至可能不是）。

如果您可以基于 的构造函数进行快捷方式`val`，则可以使用可反驳的模式 for`val`并且 let是可变模式（只是一个标识符），您将获得与 for等`ex`相同的短路。`(&&)`

```
short (Val foo) ex = Okay (foo bar ex)
short (Lav oof) _  = Okay oof
short val ex
  | isGood val = oomph
  | isBad ex   = error "Didn't expect that"
  | otherwise  = undefined 
```

如果你不使用`Exp`右边的参数，你甚至不需要给它一个名字，通配符`_`说“这是一个应该被忽略的参数”。

对于您想要的行为

```
short :: Val -> Exp -> Error Val
short (Partial (&&) False) = False 
```

那样不起作用，因为`False`is a`Bool`而不是 a `Val`，您可以使用

```
short (Partial OR (VB False)) _ = S False 
```

具有 的假设构造函数`OR`。`Oper`（你可以`(&&)`在那里使用，但这是一个匹配任何东西的变量模式。）该模式甚至不绑定`Exp`参数，所以除非它的评估是由先前的方程强制的`short`，否则它仍然是未评估的。

# mysql - python-mysql fetchone() 类型不匹配？

> ID：13677976
> 
> 赞同：0
> 
> 时间：2012-12-03T06:02:06.010
> 
> 标签：mysql, python-2.7, mysql-python

我有这段代码应该从数据库返回密码值并将其与输入的密码匹配。我在这一行附加了字符以匹配它打印的结果的格式。

```
appended_y= "(u'" + y + "'y,)" 
```

即使这两个打印出相同的值 if 语句拒绝它并且总是落入 else，任何人都可以指出我正确的道路吗？

```
print "Welcome to the online bookstore login!"
    x = raw_input('Please enter your user id. ')
    y = raw_input('Please enter your password. ')
    appended_y= "(u'" + y + "'y,)"  
    z = "SELECT password FROM members WHERE userid = %s"
    self.cursor.execute(z,(x,))
    pw=(self.cursor.fetchone())

    if appended_y == pw:
        self.member_menu()
    else:
        print "Incorrect name or password. Aborting connection" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:55:25.853

查看 的类型`pw`。它可能是列表或元组中的字符串。

# javascript - 网页上的图表中的 Html

> ID：13677985
> 
> 赞同：1
> 
> 时间：2012-12-03T06:03:21.893
> 
> 标签：javascript, html, raphael

我正在我的网页上创建一些几何图形，我正在使用`RaphaelJS`. 目前，我有一些动画圈子。

我也想在我的网页中添加饼形，而我不知道该怎么做的更棘手的事情是在这些饼形中添加内容。如何在我的网页上添加饼图，我可以在其中放置文本、图像等内容（或者其他 html 元素）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:51:02.997

使用 RaphaelJS，您可以创建如下文本：

```
paper.text(50, 50, "Blueberry\nPie!"); 
```

您将希望将 x,y 位置作为相对于饼图切片的变量传递。以下是饼图的一些示例代码：raphaeljs.com/pie.html。

另外，我发现这个教程看起来不错： http: [//net.tutsplus.com/tutorials/javascript-ajax/an-introduction-to-the-raphael-js-library/](http://net.tutsplus.com/tutorials/javascript-ajax/an-introduction-to-the-raphael-js-library/)

# bash - 如何打开默认终端而不是使用`xterm`？使用 ${TERM} 是否安全？

> ID：13677988
> 
> 赞同：0
> 
> 时间：2012-12-03T06:03:32.100
> 
> 标签：bash, xterm, gentoo

我想在linux上运行steam，又不想安装xterm，有两个时刻要xterm

```
echo -e "$*" >$tmpfile
xterm -T "$title" -e "cat $tmpfile; echo -n 'Press enter to continue: '; read input"
rm -f $tmpfile 
```

和

```
# Fall back to sudo in a terminal
xterm -e sudo -p "$prompt
[sudo] password for user: " $* 
```

posix 在这里使用 ${TERM} 而不是 xterm 是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:18:44.980

假设脚本将在 X 会话中运行；不，没有理由相信`TERM`会在这种情况下设置（如果是，那么它指向同名的二进制文件将是一个巧合——这个变量的内容应该是 Termcap 的键或 Terminfo；很多时候，在现代系统上，它可能类似于`vt220`不是`xterm`, 或`emacs`或`dumb`) 的变体。

另一方面，如果你的环境是 X，你基本上可以保证有`xterm`.

Debian 定义`x-terminal-program`(IIRC) 让用户或系统管理员选择不同的默认终端仿真器。

我认为 POSIX 1003 对您尝试解决的问题没有任何概念（我们也在猜测；也许您可以为您的问题添加更多细节？）

Freedesktop.org 是一个更好的要求用户使用的平台，但我不知道例如 Mac OSX 是否遵守其中任何有用的子集。（他们可能会实现所有这些；我根本不知道。）

另一方面，简单粗暴的解决方法是要求脚本首先从终端运行；然后，您可以简单地使用`cat`来显示文本文件（您的 EULA，我猜？）和`echo`（或`cat`再次）并`read`与用户交互。也就是说，不要试图为这些东西打开一个新的终端窗口。也许在脚本开头附近进行所有交互，以便于提早退出。

如果你想要图形交互，你需要限制你的目标平台，或者为每个不同的环境编写复杂的包装。

# c++ - C++ lambda 参数列表

> ID：13677990
> 
> 赞同：1
> 
> 时间：2012-12-03T06:03:35.110
> 
> 标签：c++, c++11, lambda

这是我目前正在使用的一些代码：

```
int Engine::getEntityCount(const int objectType)
{
    using namespace std;

    int total = 0;
    for_each(p_entities.begin(), p_entities.end(),
    [&objectType,&total](pair<const int, const list<Entity*>> pair)
    {   
        for_each((pair.second).begin(),(pair.second).end(),
        [&objectType,&total](Entity* &entity)
        {
            if ( entity->getAlive() == true && entity->getObjectType() == objectType )
                ++total;
        });
    });
    return total;
} 
```

我从 intel c++ 收到以下错误：

> 错误：无法使用给定的参数列表 c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\algorithm 调用函数“lambda [](Entity *&)->void::operator()”

我很难理解这里出了什么问题。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:07:24.243

您要求对`const`指向`Entity`. 包含该指针的列表是`const`. 您必须在非常量指针或 const 列表之间做出选择。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T06:14:46.227

```
....
    for_each((pair.second).begin(),(pair.second).end(),
    [&objectType,&total](const Entity* entity)
    {
        ....
    });
}); 
```

……

# c# - 更改组合框的整体外观和感觉/颜色

> ID：13677992
> 
> 赞同：1
> 
> 时间：2012-12-03T06:03:49.507
> 
> 标签：c#, winforms, colors, combobox, controls

我正在使用 Visual Studio 2010 在 C# 中编写一个 GUI 表单应用程序。我的应用程序的整体外观是黑色的。

我在表单中添加了一些组合框，但它们看起来很糟糕，因为颜色是浅灰色。我想让组合框变黑。（不是项目本身的背景/前景色，而是组合框本身的颜色。）

如何使 ComboBox 变黑？一个额外的好处是，如果我可以将组合框的角做成圆形而不是方形，所以如果你知道如何做到这一点，它也会很有帮助！

谢谢！

# iphone - MPMoviePlayer 不旋转

> ID：13677994
> 
> 赞同：0
> 
> 时间：2012-12-03T06:03:59.683
> 
> 标签：iphone, ios, ios5, mpmovieplayer

在我的应用程序中，我有一个 UIWebview ，其中显示了 Video Link 列表。单击其中一个链接，MPMoviePlayer 会自行启动。但在全屏模式下，它不会在需要时旋转。

现在如何旋转它，因为我在 webview 中无法控制它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:27:27.450

如果您使用的是 IOS 6，请使用`- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {}` ，因为 shouldautorotate 不再适用于 ios 6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:59:57.113

将此方法发布在`AppDelegate.m` 文件中..

```
 -(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
    {
         return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;    
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:04:08.517

对于 iOS6，您还应该确保在 info.plist 上支持的界面方向键中添加了横向。

# javascript - 带有 HTML/Javascript Windows 8 商店应用程序的 JQuery Gridster

> ID：13677995
> 
> 赞同：0
> 
> 时间：2012-12-03T06:04:00.760
> 
> 标签：javascript, jquery, html, windows-8, windows-store-apps

我决定用 html/javascript 创建我的第一个 windows 商店应用程序，因为你不能用 javascript 和 listview 进行拖放，所以我一直在寻找替代方案。Windows 商店应用程序支持 jquery，所以我找到了 Gridster。它是一个 jquery 插件，用于在网格中显示具有可拖动重新排序的内容。每个项目也可以调整大小。我想在我的 Windows 商店应用程序中使用它。这是我输入到混合中的代码的小提琴，进入 html 页面

```
var layout;
var grid_size = 100;
var grid_margin = 5;
var block_params = {
    max_width: 6,
    max_height: 6
};
$(function() {

layout = $('.layouts_grid ul').gridster({
    widget_margins: [grid_margin, grid_margin],
    widget_base_dimensions: [grid_size, grid_size],
    serialize_params: function($w, wgd) {
        return {
            x: wgd.col,
            y: wgd.row,
            width: wgd.size_x,
            height: wgd.size_y,
            id: $($w).attr('data-id'),
            name: $($w).find('.block_name').html(),
        };
    },
    min_rows: block_params.max_height
}).data('gridster');

$('.layout_block').resizable({
    grid: [grid_size + (grid_margin * 2), grid_size + (grid_margin * 2)],
    animate: false,
    minWidth: grid_size,
    minHeight: grid_size,
    containment: '#layouts_grid ul',
    autoHide: true,
    stop: function(event, ui) {
        var resized = $(this);
        setTimeout(function() {
            resizeBlock(resized);
        }, 300);
    }
});

$('.ui-resizable-handle').hover(function() {
    layout.disable();
}, function() {

    layout.enable();
});

function resizeBlock(elmObj) {

    var elmObj = $(elmObj);
    var w = elmObj.width() - grid_size;
    var h = elmObj.height() - grid_size;

    for (var grid_w = 1; w > 0; w -= (grid_size + (grid_margin * 2))) {

        grid_w++;
    }

    for (var grid_h = 1; h > 0; h -= (grid_size + (grid_margin * 2))) {

        grid_h++;
    }

    layout.resize_widget(elmObj, grid_w, grid_h);
}
});​ 
```

js 引用和 css 可以在源代码中看到（我得到代码的地方）

[http://jsfiddle.net/maxgalbu/UfyjW/show](http://jsfiddle.net/maxgalbu/UfyjW/show)

我得到了它的工作，可以拖动盒子并重新排序和调整它们的大小......我现在的问题是如何让它水平扩展而不是垂直扩展......我放入的东西越多，它们都会到底部。我希望它在添加新项目时向右扩展（如开始菜单）......如果我可以逆时针转动网格并保持项目相同的方向，那将是完美的......但我知道它可能不会就这么容易

我已经尝试在 html 中更改脚本中的一些值（在上面的代码示例中），并获得了更多列以便框捕捉到..但最终它们都只是恢复到捕捉到第一列之一的底部。 ..我必须编辑引用的 js 文件吗？好像有4个，哪个？