# StackOverflow 问答 15191000-15191999

# android - 不幸的是，k9-email 已停止

> ID：15191002
> 
> 赞同：2
> 
> 时间：2013-03-03T21:17:12.360
> 
> 标签：android

我正在尝试使用 eclipse indigo 在我的模拟器 winXP 中运行 K9 电子邮件 android 应用程序。我的项目完全没有错误，但是当我在其中运行它时，每当模拟器启动时，就会出现此错误。“不幸的是，k9-mail 已停止”在模拟器中。

apk 已成功安装在模拟器中，但我在 logcat- 中收到此错误：

03-10 16:30:23.620：E/AndroidRuntime(812)：java.lang.RuntimeException：无法实例化应用程序 com.fsck.k9.K9：java.lang.ClassNotFoundException：找不到类“com.fsck。 k9.K9" 在路径：/data/app/com.fsck.k9-1.apk 和

不幸的是，k9mail 已在模拟器中停止消息.. 请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T22:44:47.283

解决方案是使用最新的 Oracle JAVA SE *6* JDK 运行 Eclipse/来构建 apk。Java SE 7*不*工作。

# c++ - 在 Google 测试失败输出消息中自定义实际/预期的“值”字符串

> ID：15191004
> 
> 赞同：15
> 
> 时间：2013-03-03T21:17:21.377
> 
> 标签：c++, googletest

我有来自[Google 测试](https://code.google.com/p/googletest/)单元测试的以下输出：

```
UnitTests.cc:56: Failure
Value of: LineSegment2i(Vector2i(-10,0), Vector2i(-10,10)).toLine()
  Actual: 24-byte object <00-00 00-00 00-00 24-C0 00-00 00-00 00-00 00-00 00-00 2F-2B FF-7F 00-00>
Expected: Line(10, 3.14159265358979323846)
Which is: 24-byte object <00-00 00-00 00-00 24-40 18-2D 44-54 FB-21 09-40 00-00 64-00 00-00 00-00>
[  FAILED  ] LineSegmentTests.toLine (1 ms) 
```

该十六进制输出字符串不是很有用。有什么我可以添加到`Line`类（相等测试失败）以在这种情况下提供更多有用的错误吗？

有问题的类已将运算符重写`<<`为成员函数：

```
std::ostream& operator<<(std::ostream& stream) const
{
  return stream << "Line (radius=" << d_radius << " theta=" << d_theta << ")";
} 
```

~~您可以看到这适用于“预期”行，但不适用于“实际”行。~~这种说法是不正确的——显示的测试来自`TEST`宏的参数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-03T21:28:06.343

为了打印自定义类型，您可以“教”Google Test 如何打印您的自定义类型，如[教 Google 测试如何打印您的值](https://github.com/google/googletest/blob/master/docs/advanced.md#teaching-googletest-how-to-print-your-values)一节中所述。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-03T21:28:01.313

源文件中的标头`gtest-printers.h`提供了答案：

> 该文件实现了一个通用值打印机，可以打印任何类型 T 的值：
> 
> 无效 ::testing::internal::UniversalPrinter::Print(value, ostream_ptr);
> 
> 用户可以通过在定义 T 的命名空间中定义 operator<<() 或 PrintTo() 来教该函数如何打印类类型 T。更具体地说，将使用以下列表中第一个定义的函数（假设 T 是在命名空间 foo 中定义）：
> 
> 1.  foo::PrintTo(const T&, ostream*)
> 2.  operator<<(ostream&, const T&) 在 foo 或全局命名空间中定义。
> 
> 如果以上都没有定义，如果它是协议缓冲区，它将打印值的调试字符串，否则打印值中的原始字节。

所以看起来运算符覆盖需要是一个非成员函数。

```
std::ostream& operator<<(std::ostream& stream, Line const& line)
{
  return stream << "Line (radius=" << line.radius() << " theta=" << line.theta() << ")";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-14T20:47:10.973

在某些情况下，提供`PrintTo()`函数而不是流运算符可能会更好。例如，如果您想自定义容器（具有`begin()`/ `end()`）的打印方式，Google Test 的现有内部运算符当前将优先于自定义运算符。在这种情况下，您的操作员将无法工作，但`PrintTo()`功能会。定义如下所示：

```
void PrintTo(const Range& range, ::std::ostream* os)
{
   *os << range;
} 
```

另见此处：[https ://github.com/google/googletest/issues/3458](https://github.com/google/googletest/issues/3458)

# d3.js - 在没有通常的 svg:text 的 d3.js 和弦图中旋转文本路径

> ID：15191006
> 
> 赞同：5
> 
> 时间：2013-03-03T21:17:25.977
> 
> 标签：d3.js, label, chord-diagram

我正在尝试改编 Mike Bostock 的这个和弦图：

我想让文本标签像这个和弦图一样向外旋转：

[http://bost.ocks.org/mike/uberdata/](http://bost.ocks.org/mike/uberdata/)

![在此处输入图像描述](../Images/d021163052fbcaca1cccf5b623866877.png)

这里有一个例子

[http://bl.ocks.org/mbostock/910126](http://bl.ocks.org/mbostock/910126)

![在此处输入图像描述](../Images/670a7857d1741f920d5fb80b0fbfa59b.png)

但是，转换是使用 svg:text 完成的：

```
 g.append("svg:text")
      .each(function(d) { d.angle = (d.startAngle + d.endAngle) / 2; })
      .attr("dy", ".35em")
      .attr("text-anchor", function(d) { return d.angle > Math.PI ? "end" : null; })
      .attr("transform", function(d) {
        return "rotate(" + (d.angle * 180 / Math.PI - 90) + ")"
            + "translate(" + (r0 + 26) + ")"
            + (d.angle > Math.PI ? "rotate(180)" : "");
      })
      .text(function(d) { return nameByIndex[d.index]; }); 
```

我试图适应的那个使用“文本”和“文本路径”，我似乎无法简单地添加一个变换/旋转属性。添加这一行

```
.attr("transform",function(d,i){return "rotate(90)";}) 
```

下面的代码什么都不做：

```
 // Add a text label.
        var groupText = group.append("text")
            .attr("x", 6)
            .attr("dy", 15);

            groupText.append("textPath")
            .attr("xlink:href",  function(d, i) { return "#group" + i; })

           .text(function(d, i) { return cities[i].country; }); 
```

有什么想法可以向外旋转文本，以便可以显示更小的和弦组文本标签而不会被捆绑或（就像原始解决方案一样）完全关闭？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-12T14:57:02.810

我想你正在寻找[Mike Bostock 的这个例子](http://bl.ocks.org/mbostock/1046712)

至于修改初始和弦代码，以下更改应该可以满足您的要求：

```
// Add a text label.
// var groupText = group.append("text")
//     .attr("x", 6)
//     .attr("dy", 15);

//groupText.append("textPath")
//    .attr("xlink:href", function(d, i) { return "#group" + i; })
//    .text(function(d, i) { return cities[i].name; });

// Remove the labels that don't fit. :(
//groupText.filter(function(d, i) { return groupPath[0][i].getTotalLength() / 2 - 16 < this.getComputedTextLength(); })
//    .remove();

group.append("text")
  .each(function(d) { d.angle = (d.startAngle + d.endAngle) / 2; })
  .attr("dy", ".35em")
  .attr("transform", function(d) {
    return "rotate(" + (d.angle * 180 / Math.PI - 90) + ")"
        + "translate(" + (innerRadius + 26) + ")"
        + (d.angle > Math.PI ? "rotate(180)" : "");
  })
  .style("text-anchor", function(d) { return d.angle > Math.PI ? "end" : null; })
  .text(function(d, i) { return cities[i].name; }); 
```

# asp.net - 在控制器的构造函数/属性中获取 RouteData 以路由 [Authorize] 的 ConnectionString

> ID：15191015
> 
> 赞同：2
> 
> 时间：2013-03-03T21:17:59.413
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-membership, routedata

**背景**

我有一个多租户应用程序，每个租户使用多个数据库。我正在使用 CodeFirstMembership，所以我可以完全控制 SimpleMembership 的实现。我的两个用户/角色实体都与我的应用程序的其余部分在同一个 DbContext 中。

**问题**

为了促进多租户，我有一个自定义路由，它看起来与默认的 vanilla MVC 路由看起来完全一样，除了我抓取子域，检查有帐户的租户，然后抓取他们的特定的连接字符串。我在 RouteData 上有一个名为 .GetSubdomain() 的扩展方法，它将返回使用的子域，所以我可以真正进行检查并在任何地方获取连接字符串，如果这有助于你的答案。

我需要我的会员提供商能够访问子域检查信息，以便指向正确的数据库，以便 [Authorize] 方法正常工作。

**我试过的**

*   **在 InitializeSimpleMembershipAttribute 中初始化成员资格提供程序**
    *   这不起作用，因为您无法将动态参数传递给属性（例如 RouteData.GetSubdomain()）
*   **在构造函数中初始化成员资格。**
    *   虽然您可以在构造函数中调用 RouteData 方法并构建/运行应用程序，但 RouteData 尚未在控制器中的构造函数处填充，因此此方法也不起作用。
*   **我没有尝试过，但是在每个控制器方法的开头添加检查可能不起作用，因为授权已经运行。**

**所以......** 根据我的尝试，似乎我需要连接到填充 RouteData 和实际授权之间的点。有没有一点我可以有效地做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:58:11.570

WOW. In a total oversight, I failed to see the `ActionExecutingContext` that was being passed into the InitializeSimpleMembership attribute. The context being passed in actually contains RouteData, and the subdomain information needed to properly initialize the membership!

# c# - 带有嵌入式 LinqDataSource/ObjectDataSource 的 asp GridView

> ID：15191016
> 
> 赞同：0
> 
> 时间：2013-03-03T21:18:07.177
> 
> 标签：c#, gridview, user-controls, .net-datasourcecontrol

我想做的是继承一个 GridView 并以编程方式将一个 LinqDataSource 嵌入其中。这样做的原因是我想要一个通用的网格视图，它允许对列和网格属性进行标记定义，但它实现了一个 GetDataSourceEvent，它将传递 sortExpression、寻呼机页面索引和寻呼机行数以进行有效的模型查询。后者将通过订阅 DataSourceControl 的 Selecting 事件来完成。

我遇到的问题是，如果我将 LinqDataSource 添加到 UserControl，则找不到 DataSourceId。我尝试了 OnInit 和 EnsureChildControls 来创建 LinqDataSource，但没有运气。我已经看到了一些关于我们如何通过继承 gridview 创建自定义寻呼机的示例，但我似乎无法找到适合我情况的事件。

谁能指出我尝试以编程方式添加 DataSourceControl 并将 GridView DataSourceId 分配给它的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:00:41.780

您可以创建一个接受您的数据源类型的公共方法。然后，当您创建用户控件类的实例时，绑定到该方法。例如，如果您使用字符串列表作为数据源并且有一个名为 myUserControl 的用户控件：

```
Partial Class user_controls_myUserControl
    Inherits System.Web.UI.UserControl

    Public Sub bindMyData(ByVal myDataSource As List(Of String))
      'bind stuff here
    End Sub

End Class 
```

这将被称为：

```
dim myListOfString as new list(of String)
Me.myUserControl1.bindMyData(myListOfString) 
```

# c - 在 C 中扩展矩阵

> ID：15191017
> 
> 赞同：1
> 
> 时间：2013-03-03T21:18:07.337
> 
> 标签：c, matrix, malloc, realloc

我在 C 中有一个矩阵，我想创建另一个比第一个矩阵具有双行的矩阵。那些添加的行我想要第一个矩阵的值，但符号改变。我试图理解动态分配，但我不明白我错在哪里。编译器说的错误是：“ `invalid conversion from void* to int*"`。这是我的代码：

```
#include <stdio.h>
#include<conio.h>
#include<stdlib.h>
int *extend_matrix=NULL;
int *matrix=NULL;
int *negative_matrix=NULL;
int main(void)
{
    int i,j,m,n;
    printf("Enter the number of rows and columns of  matrix\n");
    scanf("%d%d", &m, &n);
    int *matrix = (int *)malloc(m * n * sizeof(int));
    int *negative_matrix=(int*)malloc(m*n*sizeof(int));
    printf("Enter the elements of first matrix\n");
    for (  i = 0 ; i < m ; i++ )
        for ( j = 0 ; j < n ; j++ )
            scanf("%d", &matrix[i][j]);
    for(i = 0 ; i < m ; i++)
        for(j = 0 ; j < n ; j++)
            printf("the matrix is: \n",matrix[i][j]);
    negative_matrix=-matrix[i][j];
    for(i=0;i<m+m;i++)
        extend_matrix[i]=realloc(matrix[i],sizeof(int)*(m+m));
    for(j=0;j<n;j++)
        extend_matrix[j]=realloc(matrix[j],sizeof(int)*n);
    extend_matrix[i][j]=matrix[i][j]+negative_matrix[i][j];//how to concatenate them?
    getch();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:46:09.413

看来你有点糊涂了。让我写一个简短的示例代码

编辑：好的，去[这里](http://pastebin.com/v9RwdLS0)

在那里你会找到我的例子。我还没有完成它，但只是提供了关于如何完成它的输入。

请注意这一点：

从 66 到 68 行，我们有以下代码：

```
for (i = 0; i < rows; i++){
    free(first_matrix[i]);
} 
```

这是因为我们矩阵的每个元素都是一个指针，它们都指向一个分配在堆上的数组。所以，如果你刚刚释放了 first_matrix，像这样：

```
free(first_matrix); 
```

您只会从堆上自己的内容中释放 first_matrix （而不是每个元素中的那个）

# python - Python基于值合并字典

> ID：15191023
> 
> 赞同：-1
> 
> 时间：2013-03-03T21:18:28.240
> 
> 标签：python, dictionary, merge

我有两个字典（Python），我根据值（不是键）合并它们。但是，我的方法效率很低，基本上是 O(n^2)。有没有更好的方法来解决它？

在这种情况下，字典本质上是一个整数键，值是一个元组（5 个元素长），都是整数。

谢谢！

例子：

字典 A：`{25: (1, 5, 1, 5), 34: (5, 24, 5, 24)}`

字典 B `{46: (1, 5, 1, 5), 29: (5, 23, 1, 5)}`：。

合并后的字典是：`{25: (1, 5, 1, 5), 34: (5, 24, 5, 24), 29: (5, 23, 1, 5)}`. 请注意，字典 A 的第一个元素与字典 B 的第一个元素具有相同的值元组，因此，我们只选择一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:27:14.113

可能是这样的？

```
a = {25: (1, 5, 1, 5), 34: (5, 24, 5, 24)}
b = {46: (1, 5, 1, 5), 29: (5, 23, 1, 5)}

for k, v in b.items ():
    if v not in a.values (): a [k] = v

print (a) 
```

但我想它仍然是 O(n**2)。

编辑：对于大型词典，这应该更快：

```
c = {}
for k, v in a.items (): c [v] = k
for k, v in b.items (): c [v] = k

c = dict ( (b, a) for a, b in c.items () )
print (c) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:28:53.370

我可能会做这样的事情：

```
from collections import defaultdict

A = {25: (1, 5, 1, 5), 34: (5, 24, 5, 24)}
B = {46: (1, 5, 1, 5), 29: (5, 23, 1, 5)}

vk = defaultdict(list)
sources = A, B
for source in sources:
    for k,v in source.iteritems():
        vk[v].append(k)

out = {v[0]:k for k,v in vk.iteritems()} 
```

这将始终采用最早的键`sources`，并产生

```
>>> out
{25: (1, 5, 1, 5), 34: (5, 24, 5, 24), 29: (5, 23, 1, 5)} 
```

如果内存是一个问题，你可以换`vk[v].append(k)`行；现在它建立了一个不需要的中间结构，但我不完全确定在碰撞情况下正确的选择逻辑应该是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T21:36:46.390

对我有用的是

```
C={v:k for k,v in {v:k for k, v in B.items()+A.items()}.iteritems()} 
```

..这是紧凑的代码，可能只和 .. 一样昂贵`O(n*log(n))`，因为所做的一切都是在字典中插入。

# sql - 选择一个表的所有记录和另一个表的少数记录

> ID：15191026
> 
> 赞同：0
> 
> 时间：2013-03-03T21:18:41.810
> 
> 标签：sql

我想做这个：

列出带有**客户详细信息**的订单，但包括所有客户，**即使他们没有下订单**

我写了以下

```
SELECT Customers.CompanyName,Customers.City,Customers.Country,Orders.OrderDate, Orders.RequiredDate
FROM Customers 
INNER JOIN Orders
        ON Orders.CustomerID = Customers.CustomerID 
ORDER BY Customers.CompanyName; 
```

但它只返回那些下订单的人。我也想得到那些不下订单的人。

数据库是**北风**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T21:24:12.500

使用 LEFT JOIN 并查看[w3school](http://www.w3schools.com/sql/sql_join_left.asp)中的示例。它将`CustomerID`从第一个表中获取所有具有共同和不共同的记录

```
 select Customers.CompanyName,Customers.City,Customers.Country,Orders.OrderDate, Orders.RequiredDate
    FROM Customers LEFT JOIN
      Orders
      ON Orders.CustomerID=Customers.CustomerID
      order by Customers.CompanyName; 
```

# android - How to add a folder to Android resources

> ID：15191028
> 
> 赞同：0
> 
> 时间：2013-03-03T21:18:48.053
> 
> 标签：android

I have a few thousand image files in a directory structure. There are a few hundred different subdirectories and each directory contains 10 images named 1.png - 10.png...

How can I add these folders to my app and access these images? Assuming I want foo/bar/1.png?

In android it doesn't appear like you have a string path to your assets or raw directories so I have no clue how I would do this. Please don't tell me I have to zip them then unzip them out of assets.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:20:51.477

the path to access the android asset folder is :

```
file:///android_asset/filename 
```

You should be able to access a folder with :

```
file:///android_asset/folder1/folder2/targetFolder/ 
```

Note that there is 3 '**/**' after '**file:**'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:26:42.957

> In android it doesn't appear like you have a string path to your assets

Sure you do. `getAssets().open("foo/bar/1.png")` will give you an `InputStream` to that PNG file, assuming that your project has `assets/foo/bar/1.png` in it. You can then use `BitmapFactory` to read it in.

However, resources cannot exist in subdirectories. You could write a script on your development machine that flattens the structure (e.g., `foo/bar/1.png` into `foo_bar_1.png`), then put the renamed files into whichever `res/drawable-NNNN/` directory is appropriate.

# javascript - window.open 不能与谷歌浏览器一起使用？

> ID：15191031
> 
> 赞同：1
> 
> 时间：2013-03-03T21:19:03.040
> 
> 标签：javascript, google-chrome

我正在尝试通过单击链接打开 2 个页面，这就是我目前所拥有的：

```
<a onclick="download()" href="?event=thanks&dl=<?php echo $_GET['dl']; ?>"><?php echo $linkname ?></a> 
```

和 Javascript 函数：

```
function download() {
    newwindow=window.open('http://www.google.com','download','height=200,width=150');
    if (window.focus) {newwindow.focus()}
    return false;
} 
```

上面的代码与 FireFox 和 Safari 完美配合，但无法使用 Google Chrome 打开新窗口。为什么是这样？我感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:32:35.010

`<a>`元素在 HTML5 中具有下载属性，如此处所述，默认值为 ""（空字符串）。

这意味着onclick处理程序中的download === this.download（这是onevent属性中的元素），因此该元素的download属性优于window的download属性。

哦，真是一场噩梦。您的函数不应命名为 download()。将您的函数名称更改为 download1() 并将您的 onclick 更改为 download1()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T07:19:02.530

您可以使用 HTML5 下载属性。该属性将告诉浏览器我们创建的虚拟链接仅供下载。它将从链接`s href to file with name specified as download attribute`的值下载文件。此功能适用于 Chrome。示例代码：

```
window.downloadFile = function(sUrl) {

    //If in Chrome or Safari - download via virtual link click
    if (window.downloadFile.isChrome || window.downloadFile.isSafari) {
        //Creating new link node.
        var link = document.createElement('a');
        link.href = sUrl;

        if (link.download !== undefined){
            //Set HTML5 download attribute. This will prevent file from opening if supported.
            var fileName = sUrl.substring(sUrl.lastIndexOf('/') + 1, sUrl.length);
            link.download = fileName;
        }

        //Dispatching click event.
        if (document.createEvent) {
            var e = document.createEvent('MouseEvents');
            e.initEvent('click' ,true ,true);
            link.dispatchEvent(e);
            return true;
        }
    }

    // Force file download (whether supported by server).
    var query = '?download';

    window.open(sUrl + query);
}

window.downloadFile.isChrome = navigator.userAgent.toLowerCase().indexOf('chrome') &gt; -1;
window.downloadFile.isSafari = navigator.userAgent.toLowerCase().indexOf('safari') &gt; -1; 
```

# css - 忽略容器父级的宽度增加 div 的宽度（并使用 x 滚动条）

> ID：15191034
> 
> 赞同：0
> 
> 时间：2013-03-03T21:19:13.377
> 
> 标签：css, html, sass, haml

让我用 madskillz 解释一下。

1.  当前状态 ![错误的](../Images/2023b191d2c6b3c588d0a9ef1482af46.png)

我正在做一个由 url 数组组成的画廊。哈姆代码：

```
%section#content
  %form
    %fieldset
      #gallery
        %i.gallery_title Все категории
        .cat-item
          - @all.zip(@all_thumbs).each do |full, thumb|
            .cat-pic
              %a{href:"#{full}", rel:'lightbox[roadtrip]'}
                %img{src:"#{thumb}", alt:"Панно \"#{full}\""}
              %br
              %input{type:'radio', name:'picture', value:"#{full}"} 
```

CSS（萨斯）

```
#content
  margin: auto
  margin-top: 25px
  padding-bottom: 100px
  width: 950px
  align: center
form
  display: inline-block
fieldset
  background-color: darken($bg, 10%)
  border-radius: 10px /* wtf firefox */
  @include round(10px)
.cat-item
  height: 150px
  overflow-x: scroll
  overflow-y: hidden
  background: $bg
  @include round(10px)
  min-width: auto !important
.cat-pic
  margin-left: 5px
  margin-top: 5px
  height: 120px
  float: left
  input
    width: 100px 
```

我想将所有图片放在一行中并添加一个x轴滚动条。我对css感到非常厌倦。希望你能帮忙。 ![我想要](../Images/24da5b767c4b892c65e908bf87c2c677.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:30:44.337

这是一个带有 CSS 的 HTML 的工作示例，可以达到您正在寻找的结果：http: [//jsfiddle.net/rey6G/](http://jsfiddle.net/rey6G/)

```
<html>
<head>
  <title>Test</title>
  <style type="text/css">
    #Outer {
      border: #000000 1px solid;
      background-color: #FFFFFF;
      width: 500px;
      overflow-x: scroll;
      overflow-y: hidden;
    }
    #Inner {
      list-style: none;
      white-space: nowrap;
      margin: 0;
      padding: 0;
    }
    #Inner > li {
      display: inline-block;
      vertical-align: top;
      margin-left: 5px;
      border: #CCCCCC 1px solid;
      padding: 10px;
      width: 80px;
      height: 80px;
      white-space: normal;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="Outer">
    <ul id="Inner">
      <li>Something</li>
      <li>Something Else</li>
      <li>Another thing</li>
      <li>Thing 4</li>
      <li>Badda thing</li>
      <li>Wee Thing</li>
      <li>This thing</li>
      <li>That thing</li>
    </ul>
  </div>
</body>
</html> 
```

**注意**这`display: inline-block`在非常旧的 IE 版本（我相信 IE7 及以下版本）中不起作用。我怀疑这是一个问题，但我觉得我应该提出来！

# android - 如何在谷歌地图api 2 android中反转地理编码

> ID：15191037
> 
> 赞同：16
> 
> 时间：2013-03-03T21:19:40.717
> 
> 标签：android, google-maps-android-api-2

我想在我的应用程序中使用 map api 2 进行反向地理编码。但我不知道该怎么做？有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-03T21:25:09.553

使用[地理编码器](http://developer.android.com/reference/android/location/Geocoder.html)：

```
Geocoder geoCoder = new Geocoder(context);
List<Address> matches = geoCoder.getFromLocation(latitude, longitude, 1);
Address bestMatch = (matches.isEmpty() ? null : matches.get(0)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-16T07:43:01.007

您可以通过两种方式进行反向地理编码

*   地理编码器
*   谷歌 API

**Geocoder** 应该在单独的线程中执行：

```
private class FindPlaces extends AsyncTask<String, Void, List<Address>> {

    @Override
    protected List<Address> doInBackground(String... params) {
        if (act == null)
            this.cancel(true);
        Geocoder geocoder = new Geocoder(act, Locale.getDefault());
        try {
            addresses = geocoder.getFromLocation(
                    Double.parseDouble(params[0]),
                    Double.parseDouble(params[1]), result);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return addresses;
    }

    @Override
    protected void onPostExecute(List<Address> addresses) {
        super.onPostExecute(addresses);
        if (act == null)
            return;
        if (addresses == null || addresses.size() == 0) {
            Toast.makeText(act, "No location found", Toast.LENGTH_SHORT)
                    .show();
            return;
        }
        address = addresses.get(0);

        String aLine = "";
        for (int addr = 0; addr <= address.getMaxAddressLineIndex() - 2; addr++) {
            aLine = aLine.length() > 0 ? aLine + ", "
                    + String.valueOf(address.getAddressLine(addr)) : String
                    .valueOf(address.getAddressLine(addr));
        }
        address.setAddressLine(0, aLine);
        if (act == null)
            return;

    }
} 
```

**Google API** 1) 在 google 控制台中启用 Google Maps Geocoding API 2) 在此 url [https://maps.googleapis.com/maps/api/geocode/json?latlng=中连接您的 latlong](https://maps.googleapis.com/maps/api/geocode/json?latlng=)

例如： [https ://maps.googleapis.com/maps/api/geocode/json?latlng=youlatitude,yourlongitude&key=yourapikey](https://maps.googleapis.com/maps/api/geocode/json?latlng=youlatitude,yourlongitude&key=yourapikey)

用你的 latlog 调用下面的 asyntask 这对我有用..

```
public class ReverseGecoding extends AsyncTask<Double, Void, String> {

Context context;**
private Address address;
private String GEOCODINGKEY = "&key=YourKey";
private String REVERSE_GEOCODING_URL = "https://maps.googleapis.com/maps/api/geocode/json?latlng=";

public ReverseGecoding(Context context) {
    this.context = context;
    this.listener = listener;
}

@Override
protected String doInBackground(Double... params) {
    if (params[0] != null) {
         String result = "";
    try {
        String mUrl = REVERSE_GEOCODING_URL + params[0] + ","
                + params[1] + GEOCODINGKEY;

        URL url = new URL(mUrl);
        HttpURLConnection httpsURLConnection = (HttpURLConnection) url.openConnection();
        httpsURLConnection.setReadTimeout(10000);
        httpsURLConnection.setConnectTimeout(15000);
        httpsURLConnection.setDoInput(true);
        httpsURLConnection.setRequestMethod("GET");
        httpsURLConnection.connect();
        int mStatus = httpsURLConnection.getResponseCode();
        if (mStatus == 200)
            return readResponse(httpsURLConnection.getInputStream()).toString();
        return result;

    } catch (Exception e) {
        e.printStackTrace();

    }
    return null;

}

private static StringBuilder readResponse(InputStream inputStream) throws IOException, NullPointerException {
        BufferedReader r = new BufferedReader(new InputStreamReader(inputStream));
        StringBuilder stringBuilder = new StringBuilder();
        String line;
        while ((line = r.readLine()) != null) {
            stringBuilder.append(line);
        }
        return stringBuilder;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T08:58:33.080

这就是它对我有用的方式..

```
MarkerOptions markerOptions;

 Location myLocation;
 Button btLocInfo;

String selectedLocAddress;
     private GoogleMap myMap;
LatLng latLng;
 LatLng tmpLatLng;
    @Override
public void onMapLongClick(LatLng point) {

    // Getting the Latitude and Longitude of the touched location
    latLng = point;
    // Clears the previously touched position
    myMap.clear();
    // Animating to the touched position
    myMap.animateCamera(CameraUpdateFactory.newLatLng(latLng));
    // Creating a marker
    markerOptions = new MarkerOptions();
    // Setting the position for the marker
    markerOptions.position(latLng);
    // Adding Marker on the touched location with address

    new ReverseGeocodingTask(getBaseContext()).execute(latLng);
    //tmpLatLng = latLng;

    btLocInfo.setEnabled(true);

    btLocInfo.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            double[] coordinates={tmpLatLng.latitude/1E6,tmpLatLng.longitude/1E6};

            double latitude = tmpLatLng.latitude;
            double longitude = tmpLatLng.longitude;

            Log.i("selectedCoordinates", latitude + " " + longitude);
            Log.i("selectedLocAddress", selectedLocAddress);

        }
    });
}

private class ReverseGeocodingTask extends AsyncTask<LatLng, Void, String>{
    Context mContext;
    public ReverseGeocodingTask(Context context){
        super();
        mContext = context;
        }
    // Finding address using reverse geocoding
    @Override
    protected String doInBackground(LatLng... params) {
        Geocoder geocoder = new Geocoder(mContext);
        double latitude = params[0].latitude;
        double longitude = params[0].longitude;
        List<Address> addresses = null;
        String addressText="";
        try {
            addresses = geocoder.getFromLocation(latitude, longitude,1);
            Thread.sleep(500);

        if(addresses != null && addresses.size() > 0 ){
            Address address = addresses.get(0);
            addressText = String.format("%s, %s, %s",
                    address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                            address.getLocality(),
                            address.getCountryName());
            }
        }
        catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        selectedLocAddress = addressText;
        return addressText;
    }

    @Override
    protected void onPostExecute(String addressText) {
        // Setting the title for the marker.
        // This will be displayed on taping the marker
        markerOptions.title(addressText);
        // Placing a marker on the touched position
        myMap.addMarker(markerOptions);
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-17T11:20:51.150

您可以这样做以获得完整的地址：

```
public class MainActivity extends AppCompatActivity {

     ...

private Geocoder geocoder;
private TextView mAddressTxtVu;

     ...

// assume that you got latitude and longitude correctly 

mLatitude  =  20.23232
mLongitude =  32.999

String errorMessage = "";

geocoder = new Geocoder(context, Locale.getDefault());

List<Address> addresses = null;

try {
          addresses = geocoder.getFromLocation(
                   mlattitude,
                   mlongitude,
                   1);
  } catch (IOException e) {
          errorMessage = getString(R.string.service_not_available);
          Log.e(TAG, errorMessage, e);
  } catch (IllegalArgumentException illegalArgumentException) {
                    // Catch invalid latitude or longitude values.
          errorMessage = getString(R.string.invalid_lat_long_used);
          Log.e(TAG, errorMessage + ". " + "Latitude = " + mlattitude +", 
  Longitude = " + mlongitude, illegalArgumentException);
  }

  // Handle case where no address was found.
  if (addresses == null || addresses.size() == 0) {
         if (errorMessage.isEmpty()) {
                  errorMessage = getString(R.string.no_address_found);
                  Log.e(TAG, errorMessage);
         }

  } else {
         Address address = addresses.get(0);
         ArrayList<String> addressFragments = new ArrayList<String>();

         // Fetch the address lines using getAddressLine,
         // join them, and send them to the thread.
         for (int i = 0; i <= address.getMaxAddressLineIndex(); i++) {
                  addressFragments.add(address.getAddressLine(i));
         }
         // Log.i(TAG, getString(R.string.address_found));

  mAddressTxtVu.setText(TextUtils.join(System.getProperty("line.separator"),
                            addressFragments));
                } 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-10T13:21:08.577

您无需为此目的使用 Google Maps Api。Android SKD 有一个类，您可以简单地使用它而无需注册任何 API 密钥等。班级是`android.location.Geocoder`。它具有地理编码和反向地理编码的方法。我在查看这个类的源代码，发现它有一个方法`android.location.Geocoder#getFromLocationName(java.lang.String, int)`，第一个参数是地址，第二个是你想要的最大结果数。它返回一个`List<Address>`. 该类具有和之`Address`类的方法。他们都回来了。`android.location.Address#getLatitude``android.location.Address#getLongitude``double`

试试看，让我知道它有多好:-)

# c++ - 在 C++ 中用 Char* 制作 std::string

> ID：15191039
> 
> 赞同：-1
> 
> 时间：2013-03-03T21:19:44.283
> 
> 标签：c++, string, type-conversion, macos-carbon

OSX 10.8，碳

我有一个我想从 Char* 派生的 std::string

例子：

```
CFStringRef *s;
char *c[128];

CFStringGetCString(*s, *c, 128, kCFStringEncodingUTF8);

int size = sizeof(c);
g_uid.assign(c, size); 
```

但我得到一个无效的转换，我不明白为什么

`error: invalid conversion from 'char**' to 'long unsigned int'`

`std::string g_uid = "";`被定义为全局

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:45:53.917

你对星号太慷慨了——你通常不需要指向 的指针`CFStringRef`，你的数组实际上是一个指针数组，这不是你想要的。

它应该看起来更像这样：

```
CFStringRef s;
char c[128];

if (CFStringGetCString(s, c, 128, kCFStringEncodingUTF8))
{
    g_uid = c;
}
else
{
     // 128 characters wasn't enough.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:21:56.637

如果`c`where a `char*`，以下将起作用：

```
g_uid.assign(c, size); 
```

问题是`c`不是`char*`，它是一个 128 秒的数组`char*`：

```
char *c[128]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:42:01.370

这是 C/C++ 中常见的初学者错误。我记得以前也犯过同样的错误。像这样的声明 `char *c[128];`并没有给你一个 128 个字符的数组，正如你可能被引导相信的那样。它实际上为您提供了一个包含 128 个指向`char`s 的指针的数组。你不想要那个。

您想声明一个 128 个字符的数组，如下所示：

```
char c[128]; 
```

现在您可能不会认为这`c`是 a `char*`，因为您看不到任何`*`s 但任何时候您声明一个数组时，该变量都会自动成为您指定的任何类型的指针。它实际上指向数组的第一个元素的地址。

# scala - 使用 SBT 0.12.x 交互式 shell 运行应用程序时将提供的依赖项添加到类路径

> ID：15191040
> 
> 赞同：2
> 
> 时间：2013-03-03T21:19:46.290
> 
> 标签：scala, sbt

在我们的项目中，我想在 sbt 交互式控制台中访问运行时提供的依赖项。它可以防止人们在每次想要测试某些东西时被迫部署到 Storm 集群。“运行”任务是否有任何选项可以完成此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T07:42:42.737

我想我得到了这个工作。

首先，我像往常一样创建了一个 build.sbt。

项目根目录下 build.sbt 的内容：

```
name := "Test"
version := "1.0"
scalaVersion := "2.10.1"
resolvers += "Typesafe Repository" at "http://repo.typesafe.com/typesafe/releases/"
libraryDependencies += "com.typesafe.akka" % "akka-actor_2.10" % "2.1.2"
libraryDependencies += "com.typesafe.akka" % "akka-kernel_2.10" % "2.1.2"
libraryDependencies += "com.typesafe.akka" % "akka-remote_2.10" % "2.1.2"
libraryDependencies += "org.jsoup" % "jsoup" % "1.7.2" 
```

然后我运行“sbt 控制台”。这下载了 build.sbt 中指定的项目依赖项（下载输出未显示）并启动一个 Scala shell，其中包含路径中的依赖项。

```
cortland:jjasinski$ sbt console
[info] Set current project to Jazstudios Bot (in build     
file:/Users/jjasinski/Documents/crawler/myproject/)
[info] Starting scala interpreter...
[info] 
Welcome to Scala version 2.10.1 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_37).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import org.jsoup
import org.jsoup 
```

我在这里找到了信息

[http://www.scala-sbt.org/0.12.3/docs/Howto/scala.html](http://www.scala-sbt.org/0.12.3/docs/Howto/scala.html)

# c++ - 为什么我收到错误消息，告诉我构造函数没有命名类型？

> ID：15191042
> 
> 赞同：0
> 
> 时间：2013-03-03T21:20:35.257
> 
> 标签：c++, compiler-errors, codeblocks

我正在使用`Code::Blocks`. 这是我的代码

```
#include "LargeInt.h"

LargeInt::LargeInt()
{

} 
```

标题

```
#ifndef LARGEINT_H
#define LARGEINT_H

class LargeInt
{
    public:
        LargeInt();
};

#endif // LARGEINT_H 
```

我得到的错误是

> 我班第 3 行中的“LargeInt 没有命名类型”

我所做的只是单击文件 > 新建 > 类，然后在不更改任何设置或类似内容的情况下开始编码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:23:15.833

您不应在构造函数中定义运算符。它们应该是 CPP 文件中的单独方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:28:16.483

`LargeInt`构造函数应该执行使类型对象进入有效状态所需的任何操作。似乎您正在尝试定义函数`operator<<`并`operator+`在构造函数内部 - 您不能这样做：

```
LargeInt::LargeInt()
{
    LargeInt::operator<<(String input){}
    LargeInt::operator+(LargeInt){}
} 
```

您应该定义具有类定义中相应声明的每个函数。您的实现文件应如下所示：

```
LargeInt::LargeInt()
{
    // ...
}

LargeInt LargeInt::operator<<(String str)
{
    // ...
    return some_large_int;
}

istream& operator>>(istream &is, LargeInt &large)
{
    // ...
    return is;
}

ostream& operator<<(ostream &os, LargeInt &large)
{
    // ...
    return os;
} 
```

# c - 使用 Fork() 的进程树是什么样的？

> ID：15191048
> 
> 赞同：2
> 
> 时间：2013-03-03T21:21:20.600
> 
> 标签：c, fork, conceptual

比如说，我们在 shell 中执行了以下命令：

```
ls | grep "abc" | wc 
```

我了解子进程如何从外壳分叉以及它的子进程如何，像这样，

```
Shell (pid=12)
       \
        \
         ls (pid=13) 
```

但我不确定管道和尾随命令如何适应。它们也是外壳的孩子，而不是`ls`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:30:57.220

管道的每个组件都将是 shell 的一个子进程。如果您[`pstree -p`](http://unixhelp.ed.ac.uk/CGI/man-cgi?pstree+1)从另一个终端使用，您可能会看到如下内容：

```
...
sshd(11)---bash(12)-+-ls(13)
                    |-grep(14)
                    \-wc(15)
... 
```

（假设您可以在管道仍在运行时运行它！）

但是，请注意，所有组件都将形成一个[*进程组*](http://en.wikipedia.org/wiki/Process_group)。

管道本身是 Linux（或您正在使用的任何操作系统）的一个特性，它不是一个单独的用户进程。shell 创建一些[*匿名管道*](http://en.wikipedia.org/wiki/Anonymous_pipe)，并将它们连接到管道中每对进程的相关文件描述符。

# c - 如何使用 Ctrl+D 像 bash 和 execl 一样退出？

> ID：15191049
> 
> 赞同：0
> 
> 时间：2013-03-03T21:21:23.970
> 
> 标签：c, linux, bash, exec

我正在做 ：

`execl("/bin/bash", "/bin/bash", NULL);`

当我做一个 Ctrl+D 时，它直接退出。如何`exit`在退出之前执行与 bash 相同的操作并写入？

我必须添加一个标志或其他东西`execl`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:31:32.250

当我编译`execl(...)`时，它打印退出`Ctrl-D`就好了

```
#include <unistd.h>

int main(int argc, char **argv)
{
    execl("/bin/bash", "/bin/bash", 0);
    return 0;
} 
```

也许，您`fork()`从终端执行或分离或执行其他操作，这让 bash 假设它是非交互式的。

`Ctrl-D`通常由终端解释。如果您想自己执行此操作，则必须`VEOF`在`termios`结构中重置，请参阅[`c_cc`](https://www.kernel.org/doc/man-pages/online/pages/man3/termios.3.html)详细信息。

这是一个处理`Ctrl-D`自己的简化示例。在处理任何内容之前它仍然会读取一整行，但你明白了

```
#include <sys/wait.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <termios.h>
#include <unistd.h>

int main(int argc, char **argv)
{
    char buf[100];
    int fd;
    struct termios tio;
    fd = open("/dev/tty", O_RDWR);
    if (fd < 0) {
        perror("open tty");
        exit(1);
    }

    memset(&tio, 0, sizeof(tio));
    tcgetattr(fd, &tio);
    tio.c_cc[VEOF] = 0;
    tcflush(fd, TCIFLUSH);
    tcsetattr(fd, TCSANOW, &tio);

    while (fgets(buf, sizeof(buf), stdin)) {
        if (buf[0] == 4) {
            printf("Got Ctrl-D\n");
            break;
        }
    }

    return 0;
} 
```

该程序从终端读取一行，直到它接收到以 . 开头的行`Ctrl-D`。

有关更多示例，请参阅[串行编程 HOWTO](http://www.tldp.org/HOWTO/Serial-Programming-HOWTO/x115.html)。

# vba - 在 VBA (MacOS) 中将 Web 中的图片添加到 Powerpoint 幻灯片

> ID：15191055
> 
> 赞同：2
> 
> 时间：2013-03-03T21:22:20.660
> 
> 标签：vba, ms-office, powerpoint

我很舒服地使用 VBA 来遍历 Excel 电子表格中的内容列表，并在单独的 Powerpoint 文件中创建幻灯片。那一点有效。

但是，我似乎无法将图片添加到 Powerpoint 演示文稿中。我试过了：

*   **使用带有图像 URL 的[Shapes.AddPicture 。](http://mac2.microsoft.com/vb/1033/PowerPoint/html/ppmthAddPicture.htm)**一些人提到这应该有效；显然它在某些 Office 版本中出现故障（请参阅[http://www.pcreview.co.uk/forums/powerpoint-2007-vba-addpicture-web-image-problem-t3171074.html](http://www.pcreview.co.uk/forums/powerpoint-2007-vba-addpicture-web-image-problem-t3171074.html)）；
*   **使用带有文件路径的 Shapes.AddPicture。**这*应该*有效，但是：

`Dim pic`
`Set pic = activeSlide.Shapes.AddPicture("/Users/Pedro/My_Picture.png", False, True, 10, 10)`

...失败并出现运行时错误 5（无效的过程调用或参数）。请注意我在**Mac OS X, Office 2011**上。

我还尝试通过 UserPicture() 设置对象的填充无济于事。

提前感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:08:10.827

这适用于 PPT 的 Windows 版本，但在 Mac 2011 中失败：

```
Sub thing()
Dim oPic As Shape
Set oPic = ActivePresentation.Slides(1).Shapes.AddPicture("http://www.somesite.xxx/directory/filename.jpg", False, True, 0, 0, -1, -1)
End Sub 
```

不幸的是，在 Mac PPT 中，相当多的应该可以工作（并且在 Win 版本中可以做）的事情都失败了。

最后两个 -1 参数告诉 PPT 以“自然”尺寸导入图片……即，如果您手动插入，它通常会插入图片的任何尺寸；这样可以避免图像失真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T06:58:37.453

问题是您使用的路径样式。以下将起作用：

```
#If Mac Then
    imagePath = (MacScript("get path to startup disk as string") & "Users:Pedro:My_Picture.png")
#Else
    imagePath = "C:\path\to\My_Picture.png"
#End If

activeSlide.Shapes.AddPicture(imagePath, False, True, 10, 10) 
```

# android - 阅读视频前 Vitamio 上的 Android 进度条图标

> ID：15191056
> 
> 赞同：0
> 
> 时间：2013-03-03T21:22:23.437
> 
> 标签：android, video, progress-bar

我有两个项目，一个是 vitamio 播放器，第二个是我想用 Vitamio 播放视频的项目，播放过程正常，我的问题是我想在阅读视频之前将一个图标作为进度条放在 VideoView 的中心并隐藏它视频准备好播放时的图标。具体来说，我在自己的项目中的布局中放置了一个进度条图标，即使媒体正在播放，该图标也会继续显示，如何在 vitmaio 项目中引用该进度条图标？或者（**我怎么知道媒体已准备好在我自己的项目中播放？**）谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:31:00.083

将您的**VideoView**放在**FrameLayout**中，在此布局中添加一个具有中心重心的圆形**ProgressBar 。**

在运行时在进度条上获取参考：

```
myProgressBar = (myProgressBar) findViewById(R.id.theprogressbarid); 
```

**如果您设置了OnPreparedListener** ，媒体播放器会向您发送一个“onPrepare”事件，在此事件上，隐藏**ProgressBar**：

```
myProgressBar.setVisibility(View.Gone); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T00:26:33.903

谢谢Gian，我解决了我遇到的问题：

```
 mVideoView.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer arg0) {

                mLoading=(ProgressBar) findViewById(R.id.progressBar1);
                mLoading.setVisibility(View.GONE);

            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T08:58:02.477

在 vitamio 4.2.2 中，您可以在视频视图中设置视图：

```
videoView.setMediaBufferingIndicator(yourProgressView) 
```

就是这样。Vitamio 在视频开始时隐藏您的进度视图

# scala - 如何使用 slick 进行聚合

> ID：15191057
> 
> 赞同：27
> 
> 时间：2013-03-03T21:22:31.130
> 
> 标签：scala, scalaquery, slick

我想强制 slick 创建查询，例如

```
select max(price) from coffees where ... 
```

但是[slick 的文档](http://slick.typesafe.com/doc/1.0.0-RC1/lifted-embedding.html#aggregation)并没有帮助

```
val q = Coffees.map(_.price) //this is query Query[Coffees.type, ...]
val q1 = q.min // this is Column[Option[Double]]
val q2 = q.max
val q3 = q.sum
val q4 = q.avg 
```

因为那些 q1-q4 不是查询，所以我无法获得结果，但可以在其他查​​询中使用它们。

这个说法

```
for {
  coffee <- Coffees
} yield coffee.price.max 
```

生成正确的查询但不推荐使用（生成警告：“不推荐使用类 ColumnExtensionMethods 中的方法 max：改用 Query.max”）。 **如何在没有警告的情况下生成这样的查询？**

另一个问题是与 group by 聚合：

```
"select name, max(price) from coffees group by name" 
```

试图解决它

```
for {
  coffee <- Coffees
} yield (coffee.name, coffee.price.max)).groupBy(x => x._1) 
```

这会产生

```
select x2.x3, x2.x3, x2.x4 from (select x5."COF_NAME" as x3, max(x5."PRICE") as x4 from "coffees" x5) x2 group by x2.x3 
```

这会导致明显的数据库错误

```
column "x5.COF_NAME" must appear in the GROUP BY clause or be used in an aggregate function 
```

**如何生成这样的查询？**

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-03T23:19:26.783

据我所知，第一个很简单

```
Query(Coffees.map(_.price).max).first 
```

而第二个

```
val maxQuery = Coffees
  .groupBy { _.name }
  .map { case (name, c) =>
    name -> c.map(_.price).max
  }

maxQuery.list 
```

或者

```
val maxQuery = for {
  (name, c) <- Coffees groupBy (_.name)
} yield name -> c.map(_.price).max

maxQuery.list 
```

# jquery - 带有 jquery.animate() 的 CSS 旋转跨浏览器

> ID：15191058
> 
> 赞同：87
> 
> 时间：2013-03-03T21:22:44.770
> 
> 标签：jquery, css, rotation, jquery-animate

我正在创建一个跨浏览器兼容的旋转（ie9+），我在[jsfiddle中有以下代码](http://jsfiddle.net/UB2XR/21/)

```
$(document).ready(function () { 
    DoRotate(30);
    AnimateRotate(30);
});

function DoRotate(d) {

    $("#MyDiv1").css({
          '-moz-transform':'rotate('+d+'deg)',
          '-webkit-transform':'rotate('+d+'deg)',
          '-o-transform':'rotate('+d+'deg)',
          '-ms-transform':'rotate('+d+'deg)',
          'transform': 'rotate('+d+'deg)'
     });  
}

function AnimateRotate(d) {

        $("#MyDiv2").animate({
          '-moz-transform':'rotate('+d+'deg)',
          '-webkit-transform':'rotate('+d+'deg)',
          '-o-transform':'rotate('+d+'deg)',
          '-ms-transform':'rotate('+d+'deg)',
          'transform':'rotate('+d+'deg)'
     }, 1000); 
} 
```

CSS 和 HTML 非常简单，仅用于演示：

```
.SomeDiv{
    width:50px;
    height:50px;       
    margin:50px 50px;
    background-color: red;}

<div id="MyDiv1" class="SomeDiv">test</div>
<div id="MyDiv2" class="SomeDiv">test</div> 
```

旋转在使用时有效，`.css()`但在使用时无效`.animate()`；为什么会这样，有没有办法解决它？

谢谢。

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2013-03-03T21:29:14.720

CSS-Transforms 还不能用 jQuery 制作动画。你可以这样做：

```
function AnimateRotate(angle) {
    // caching the object for performance reasons
    var $elem = $('#MyDiv2');

    // we use a pseudo object for the animation
    // (starts from `0` to `angle`), you can name it as you want
    $({deg: 0}).animate({deg: angle}, {
        duration: 2000,
        step: function(now) {
            // in the step-callback (that is fired each step of the animation),
            // you can use the `now` paramter which contains the current
            // animation-position (`0` up to `angle`)
            $elem.css({
                transform: 'rotate(' + now + 'deg)'
            });
        }
    });
} 
```

您可以在此处阅读有关步骤回调的更多信息：http: [//api.jquery.com/animate/#step](http://api.jquery.com/animate/#step)

[http://jsfiddle.net/UB2XR/23/](http://jsfiddle.net/UB2XR/23/)

而且，顺便说一句：您不需要使用 jQuery 1.7+ 为 css3 转换添加前缀

### 更新

您可以将其包装在一个 jQuery 插件中，以使您的生活更轻松：

```
$.fn.animateRotate = function(angle, duration, easing, complete) {
  return this.each(function() {
    var $elem = $(this);

    $({deg: 0}).animate({deg: angle}, {
      duration: duration,
      easing: easing,
      step: function(now) {
        $elem.css({
           transform: 'rotate(' + now + 'deg)'
         });
      },
      complete: complete || $.noop
    });
  });
};

$('#MyDiv2').animateRotate(90); 
```

[http://jsbin.com/ofagog/2/edit](http://jsbin.com/ofagog/2/edit)

### 更新2

我对其进行了一些优化，以使`easing`,`duration`和`complete`无关紧要的顺序。

```
$.fn.animateRotate = function(angle, duration, easing, complete) {
  var args = $.speed(duration, easing, complete);
  var step = args.step;
  return this.each(function(i, e) {
    args.complete = $.proxy(args.complete, e);
    args.step = function(now) {
      $.style(e, 'transform', 'rotate(' + now + 'deg)');
      if (step) return step.apply(e, arguments);
    };

    $({deg: 0}).animate({deg: angle}, args);
  });
}; 
```

### 更新 2.1

感谢[matteo](https://stackoverflow.com/questions/15191058/css-rotation-cross-browser-with-jquery-animate/15191130?noredirect=1#comment37890839_15191130)，他注意到`this`完整的 -context存在问题`callback`。如果通过在每个节点上*绑定*回调来修复它。`jQuery.proxy`

我在**Update 2**之前已将该版本添加到代码中。

### 更新 2.2

如果您想做一些类似来回切换旋转的操作，这是一个可能的修改。我只是在函数中添加了一个 start 参数并替换了这一行：

```
$({deg: start}).animate({deg: angle}, args); 
```

如果有人知道如何使所有用例更通用，无论他们是否想设置起始学位，请进行适当的编辑。

* * *

## 用法^(...很简单！)

主要有两种方法可以达到预期的结果。但首先，让我们看一下论点：

`jQuery.fn.animateRotate(angle, duration, easing, complete)`

除了“角度”之外，它们都是可选的并且回退到默认的`jQuery.fn.animate`-properties：

```
duration: 400
easing: "swing"
complete: function () {} 
```

### 第一

这种方式是短的，但是我们传递的参数越多看起来有点不清楚。

```
$(node).animateRotate(90);
$(node).animateRotate(90, function () {});
$(node).animateRotate(90, 1337, 'linear', function () {}); 
```

### 第二

如果参数超过三个，我更喜欢使用对象，所以我最喜欢这种语法：

```
$(node).animateRotate(90, {
  duration: 1337,
  easing: 'linear',
  complete: function () {},
  step: function () {}
}); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-07-10T19:23:44.390

谢谢yckart！伟大的贡献。我更加充实了你的插件。添加了 startAngle 以实现完全控制和跨浏览器 css。

```
$.fn.animateRotate = function(startAngle, endAngle, duration, easing, complete){
    return this.each(function(){
        var elem = $(this);

        $({deg: startAngle}).animate({deg: endAngle}, {
            duration: duration,
            easing: easing,
            step: function(now){
                elem.css({
                  '-moz-transform':'rotate('+now+'deg)',
                  '-webkit-transform':'rotate('+now+'deg)',
                  '-o-transform':'rotate('+now+'deg)',
                  '-ms-transform':'rotate('+now+'deg)',
                  'transform':'rotate('+now+'deg)'
                });
            },
            complete: complete || $.noop
        });
    });
}; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-03T21:38:16.507

如果您通过 jQuery 处理 CSS3 动画，[jQuery 传输可能会让您的生活更轻松。](http://ricostacruz.com/jquery.transit/)

***编辑 2014 年 3 月*** *（因为我的建议自发布以来一直在上下投票）*

让我解释一下为什么我最初暗示上面的插件：

在性能方面更新`DOM`每个步骤（即`$.animate`）并不理想。它可以工作，但很可能会比纯[CSS3 过渡](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Using_CSS_transitions)或[CSS3 动画](https://developer.mozilla.org/en-US/docs/tag/CSS%20Animations)慢。

这主要是因为如果您指示从开始到结束的过渡将是什么样子，浏览器就有机会提前思考。

为此，例如，您可以为过渡的每个状态创建一个 CSS 类，并且只使用 jQuery 来切换动画状态。

这通常非常简洁，因为您可以将动画与 CSS 的其余部分一起调整，而不是将其与业务逻辑混为一谈：

```
// initial state
.eye {
   -webkit-transform: rotate(45deg);
   -moz-transform: rotate(45deg);
   transform: rotate(45deg);
   // etc.

   // transition settings
   -webkit-transition: -webkit-transform 1s linear 0.2s;
   -moz-transition: -moz-transform 1s linear 0.2s;
   transition: transform 1s linear 0.2s;
   // etc.
}

// open state    
.eye.open {

   transform: rotate(90deg);
}

// Javascript
$('.eye').on('click', function () { $(this).addClass('open'); }); 
```

如果任何转换参数是动态的，您当然可以使用 style 属性：

```
$('.eye').on('click', function () { 
    $(this).css({ 
        -webkit-transition: '-webkit-transform 1s ease-in',
        -moz-transition: '-moz-transform 1s ease-in',
        // ...

        // note that jQuery will vendor prefix the transform property automatically
        transform: 'rotate(' + (Math.random()*45+45).toFixed(3) + 'deg)'
    }); 
}); 
```

[MDN](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Using_CSS_transitions)上有关 CSS3 转换的更多详细信息。

**然而**，还有一些其他的事情要记住，如果你有复杂的动画、链接等，这一切都会变得有点棘手，而[jQuery Transit](http://ricostacruz.com/jquery.transit/)只是做了所有棘手的事情：

```
$('.eye').transit({ rotate: '90deg'}); // easy huh ? 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-17T11:27:52.353

要实现包括 IE7+ 在内的跨浏览器，您需要使用转换矩阵扩展插件。由于供应商前缀是在 jquery-1.8+ 的 jQuery 中完成的，我将把它留给`transform`属性。

```
$.fn.animateRotate = function(endAngle, options, startAngle)
{
    return this.each(function()
    {
        var elem = $(this), rad, costheta, sintheta, matrixValues, noTransform = !('transform' in this.style || 'webkitTransform' in this.style || 'msTransform' in this.style || 'mozTransform' in this.style || 'oTransform' in this.style),
            anims = {}, animsEnd = {};
        if(typeof options !== 'object')
        {
            options = {};
        }
        else if(typeof options.extra === 'object')
        {
            anims = options.extra;
            animsEnd = options.extra;
        }
        anims.deg = startAngle;
        animsEnd.deg = endAngle;
        options.step = function(now, fx)
        {
            if(fx.prop === 'deg')
            {
                if(noTransform)
                {
                    rad = now * (Math.PI * 2 / 360);
                    costheta = Math.cos(rad);
                    sintheta = Math.sin(rad);
                    matrixValues = 'M11=' + costheta + ', M12=-'+ sintheta +', M21='+ sintheta +', M22='+ costheta;
                    $('body').append('Test ' + matrixValues + '<br />');
                    elem.css({
                        'filter': 'progid:DXImageTransform.Microsoft.Matrix(sizingMethod=\'auto expand\','+matrixValues+')',
                        '-ms-filter': 'progid:DXImageTransform.Microsoft.Matrix(sizingMethod=\'auto expand\','+matrixValues+')'
                    });
                }
                else
                {
                    elem.css({
                        //webkitTransform: 'rotate('+now+'deg)',
                        //mozTransform: 'rotate('+now+'deg)',
                        //msTransform: 'rotate('+now+'deg)',
                        //oTransform: 'rotate('+now+'deg)',
                        transform: 'rotate('+now+'deg)'
                    });
                }
            }
        };
        if(startAngle)
        {
            $(anims).animate(animsEnd, options);
        }
        else
        {
            elem.animate(animsEnd, options);
        }
    });
}; 
```

注意：参数`options`和`startAngle`是可选的，如果你只需要设置`startAngle`use`{}`或`null`for `options`。

示例用法：

```
var obj = $(document.createElement('div'));
obj.on("click", function(){
    obj.stop().animateRotate(180, {
        duration: 250,
        complete: function()
        {
            obj.animateRotate(0, {
                duration: 250
            });
        }
    });
});
obj.text('Click me!');
obj.css({cursor: 'pointer', position: 'absolute'});
$('body').append(obj); 
```

另请参阅此[jsfiddle](http://jsfiddle.net/PU3sJ/12/)以获取演示。

**更新**：您现在也可以传入`extra: {}`选项。这将使您能够同时执行其他动画。例如：

```
obj.animateRotate(90, {extra: {marginLeft: '100px', opacity: 0.5}}); 
```

这会将元素旋转 90 度，并将其向右移动 100 像素，并在动画期间同时使其半透明。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-09T17:54:05.457

这是我的解决方案：

```
var matrixRegex = /(?:matrix\(|\s*,\s*)([-+]?[0-9]*\.?[0-9]+(?:[e][-+]?[0-9]+)?)/gi;

var getMatches = function(string, regex) {
    regex || (regex = matrixRegex);
    var matches = [];
    var match;
    while (match = regex.exec(string)) {
        matches.push(match[1]);
    }
    return matches;
};

$.cssHooks['rotation'] = {
    get: function(elem) {
        var $elem = $(elem);
        var matrix = getMatches($elem.css('transform'));
        if (matrix.length != 6) {
            return 0;
        }
        return Math.atan2(parseFloat(matrix[1]), parseFloat(matrix[0])) * (180/Math.PI);
    }, 
    set: function(elem, val){
        var $elem = $(elem);
        var deg = parseFloat(val);
        if (!isNaN(deg)) {
            $elem.css({ transform: 'rotate(' + deg + 'deg)' });
        }
    }
};
$.cssNumber.rotation = true;
$.fx.step.rotation = function(fx) {
    $.cssHooks.rotation.set(fx.elem, fx.now + fx.unit);
}; 
```

然后你可以在默认的动画 fkt 中使用它：

```
//rotate to 90 deg cw
$('selector').animate({ rotation: 90 });

//rotate to -90 deg ccw
$('selector').animate({ rotation: -90 });

//rotate 90 deg cw from current rotation
$('selector').animate({ rotation: '+=90' });

//rotate 90 deg ccw from current rotation
$('selector').animate({ rotation: '-=90' }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-22T18:57:35.550

另一个答案，因为 jQuery.transit 与 jQuery.easing 不兼容。此解决方案作为 jQuery 扩展提供。更通用的是，旋转是一种特殊情况：

```
$.fn.extend({
    animateStep: function(options) {
        return this.each(function() {
            var elementOptions = $.extend({}, options, {step: options.step.bind($(this))});
            $({x: options.from}).animate({x: options.to}, elementOptions);
        });
    },
    rotate: function(value) {
        return this.css("transform", "rotate(" + value + "deg)");
    }
}); 
```

用法很简单：

```
$(element).animateStep({from: 0, to: 90, step: $.fn.rotate}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-15T10:13:08.887

没有带有 setInterval 的插件跨浏览器：

```
 function rotatePic() {
                            jQuery({deg: 0}).animate(
                               {deg: 360},  
                               {duration: 3000, easing : 'linear', 
                                 step: function(now, fx){
                                   jQuery("#id").css({
                                      '-moz-transform':'rotate('+now+'deg)',
                                      '-webkit-transform':'rotate('+now+'deg)',
                                      '-o-transform':'rotate('+now+'deg)',
                                      '-ms-transform':'rotate('+now+'deg)',
                                      'transform':'rotate('+now+'deg)'
                                  });
                              }
                            });
                        }

                        var sec = 3;
                        rotatePic();
                        var timerInterval = setInterval(function() {
                            rotatePic();
                            sec+=3;
                            if (sec > 30) {
                                clearInterval(timerInterval);
                            }
                        }, 3000); 
```

# ruby - 为什么 Guard (rspec) 停止在 jruby 上工作

> ID：15191060
> 
> 赞同：1
> 
> 时间：2013-03-03T21:22:50.403
> 
> 标签：ruby, rspec, jruby, guard, specifications

我无法让 Guard 在 jruby 上工作。我已经通过 rvm 在 1.9.3 旁边安装了 jruby。尝试在 1.9.3 上运行 Guard - 工作正常。如何使其在`spec`or的每次更改时自动运行规范`lib`？

这是我运行后得到`bundle exec guard`的，同时没有更改文件

```
vagrant@precise64:/vagrant/sample$ bundle exec guard
21:16:46 - INFO - Guard uses TerminalTitle to send notifications.
21:16:47 - INFO - Guard::RSpec is running
21:16:47 - INFO - Running all specs
...

Finished in 0.025 seconds
3 examples, 0 failures

21:17:20 - INFO - Guard is now watching at '/vagrant/sample'
before_session hook failed: Errno::ENOENT: No such file or directory - /vagrant/sample
org/jruby/RubyFile.java:333:in `initialize'
(see _pry_.hooks.errors to debug)
[1] guard(main)> 
```

再次运行规范的唯一方法是在此处按 ENTER。我也无法确定这`No such file or directory`件事的来源（它不会在 1.9.3 MRI 上弹出）。我不熟悉守卫的内部结构，也无法真正找到发生这种情况的原因。

我`Guardfile`的是标准的：

```
guard 'rspec' do        
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }
end 
```

并且`Gemfile`仅包含：

```
gem 'rspec', '~>2.13.0'
gem 'guard-rspec'
gem 'rb-inotify', '~>0.9' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:25:24.307

`before_session`钩子来自[Pry](https://github.com/pry/pry)，但 Guard 不使用这种类型的钩子（我们只使用 :when_started 和 :after_eval ）：

```
[1] guard(main)> Pry.hooks
=> #<Pry::Hooks:0x007ff0359a36c0
 @errors=[],
 @hooks=
  {:before_session=>
    [[:default,
      #<Proc:0x007ff0359a3648@/Users/michi/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/pry-0.9.12/lib/pry.rb:11>]],
   :when_started=>
    [[:load_guard_rc,
      #<Proc:0x007ff037a12910@/Users/michi/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/guard-1.6.2/lib/guard/interactor.rb:109>]],
   :after_eval=>
    [[:restore_visibility,
      #<Proc:0x007ff037a126e0@/Users/michi/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/guard-1.6.2/lib/guard/interactor.rb:116>]],
   :after_session=>[],
   :after_read=>[],
   :before_eval=>[]}> 
```

我会提交一个 Pry 错误并在没有交互器（`guard -i`）的情况下运行 Guard，直到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T09:12:58.863

将其添加到您的 Guardfile

```
# disable Pry for continious integration
interactor :off 
```

# javascript - 更改backboneJS webservice url

> ID：15191063
> 
> 赞同：0
> 
> 时间：2013-03-03T21:23:12.207
> 
> 标签：javascript, backbone.js, restful-url

BackboneJS 网络服务默认 URL 采用以下格式：

> /entities GET 获取实体
> 
> /entities/id GET 获取实体

我有一个 RESTful 网络服务，它需要这种格式的 url：

> /entities?id=n

有没有一种简单的方法可以强制主干使用这种格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:26:21.353

在您的模型中，覆盖该`urlRoot`属性。

```
urlRoot: "/entities?id=" 
```

或者，您可以覆盖`url`以进行更多控制。（您将不得不对此进行扩展）

```
url: function() {
   return "/entities?id=" + this.id;
} 
```

# jquery - 使用 JQuery 数据表得到 IE 停止运行脚本错误

> ID：15191066
> 
> 赞同：2
> 
> 时间：2013-03-03T21:23:22.283
> 
> 标签：jquery, performance, datatable

我正在使用 JQuery 数据表插件。我只有 5000 行，8 列，但我不断收到 IE 警报：停止运行脚本错误。

我正在为数据表使用 JSON 源。但似乎它没有做真正的分页，我不熟悉PHP，不知道如何使用php进行服务器端处理......

这是数据表的数据配置：

```
$('#example').dataTable( {
                          //"sScrollX": "100%",
                          //"sScrollXInner":  "150%",
                          "sScrollY": '350px',
                          "aLengthMenu": [[10, 30, 50, 100], [10, 30, 50, 100]],
                          "bJQueryUI": true,
                          //"bDeferRender": true,
                          //"bStateSave": true, //store the table state in localStorage and then load it back again when needed using cookies
                          'iDisplayLength': 30,
                          //"bPaginate": false,
                          "sPaginationType": "full_numbers",
                          //disable init sorting
                          "aaSorting": [],
                          "fnPreDrawCallback":function(){
                                $("#processDiv").show();
                      },
                      "fnDrawCallback":function(){//"fnInitComplete"
                          $("#processDiv").hide();
                      },

                      "bProcessing": true,
                      "sAjaxSource": "<%= dataTableStorageDir %>",
                      "aoColumns": [
                          { "mData": "cells.0.displayText" },
                          { "mData": "cells.1.displayText" },
                          { "mData": "cells.2.displayText" },
                          { "mData": "cells.3.displayText" },
                          { "mData": "cells.4.displayText" },
                          { "mData": "cells.5.displayText" },
                          { "mData": "cells.6.displayText" },
                          { "mData": "cells.7.displayText" }
                      ],

                      "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
                      $('td',nRow).each(function(i,v){
                                if (typeof aData.cells[i].title!='undefined'){ 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:02:51.160

服务器端示例中提供了足够的 php 代码，只需更改列数组和数据库连接参数即可帮助您入门

[http://datatables.net/release-datatables/examples/server_side/server_side.html](http://datatables.net/release-datatables/examples/server_side/server_side.html)

5000 行对于 html 表来说并不是微不足道的

# ios - 使用视觉格式化语言在代码中自动布局 UIViewController

> ID：15191077
> 
> 赞同：3
> 
> 时间：2013-03-03T21:24:42.110
> 
> 标签：ios, objective-c, uiview, uiviewcontroller, autolayout

我想使用可视格式化语言在代码中使用自动布局将视图*emptyAddButton*放置在左下角。这是我目前的方法。

初始化按钮*emptyAddButton*，自定义 UIViewController：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
...
        emptyAddButton = [[AddCardViewController alloc] init];
        [emptyAddButton.view setFrame:CGRectMake(50, 300, 190, 65)]; //to define width + height. x, y is random and should be overwritten by auto auto layout
        [self addChildViewController:emptyAddButton];
        [emptyAddButton.view setTranslatesAutoresizingMaskIntoConstraints:NO];
        [self.view addSubview:emptyAddButton.view];
...
} 
```

为左下位置 + 填充分配自动布局 (10)

```
-(void)viewWillAppear:(BOOL)animated{
...
    NSDictionary *viewToLayout = [NSDictionary dictionaryWithObject:emptyAddButton.view forKey:@"emptyAddButton"];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-(10)-[emptyAddButton]"
                                                                      options:0
                                                                      metrics:nil
                                                                        views:viewToLayout]];

    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat: @"V:[emptyAddButton]-(10)-|"
                                                                      options:0
                                                                      metrics:nil
                                                                        views:viewToLayout]];
...
} 
```

目前*emptyAddButton*根本不显示。

知道如何正确定位视图吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:23:32.363

您不能设置框架，关闭自动调整大小的蒙版并添加约束 - 它会丢弃您的框架并重新计算为零宽度和高度。您可以通过注销视图控制器的子视图来确认这一点。

也将大小添加到 VFL 字符串：

```
"H:|-(10)-[emptyAddButton(==190)]" 
```

垂直约束也是如此。

顺便说一句，将视图的创建和约束的设置分开没有任何好处。一次完成所有操作（我会在 viewDidLoad 中完成）。目前，每次视图出现时，您都在重新创建约束。

# ios - iOS隐藏和取消隐藏状态栏未正确移动子视图

> ID：15191085
> 
> 赞同：4
> 
> 时间：2013-03-03T21:25:21.777
> 
> 标签：ios, user-interface, statusbar, uiinterfaceorientation

我有一个可以包含两个子视图控制器的自定义视图控制器。当设备处于纵向时，可以看到其中一个控制器的视图。当设备处于横向时，另一个控制器的视图可见。但是，当横向视图可见时，状态栏会缩回，以便为特定视图腾出更多空间。设备转回纵向模式后，状态栏将取消隐藏。这是自定义视图控制器显示在`UINavigationController`.

我的问题是当状态栏的可见性发生变化时，我的子视图没有正确调整。当您以不同的方向转动设备时，最终会出现很大的间隙和/或重叠，如下图所示： ![在此处输入图像描述](../Images/47591b6089cb6805d09159a4f431d3a4.png)

如您所见，它最初很好（纵向），但是当设备转动时，状态栏所在的位置有一个白色间隙。当设备转回纵向时，`UINavigationController`会弹出导航栏并与状态栏重叠，并且导航栏与其下方的视图之间会出现间隙。如果您非常快速地从一个横向旋转 180 度到相反的横向，间隙就会消失并且看起来不错。

下面的方法属于自定义视图控制器，被调用`willAnimateRotationToInterfaceOrientation:duration:`（显然是为了处理旋转事件）和`viewDidAppear:`（当视图从导航堆栈中的前一个视图控制器推入时进行处理）。

```
- (void)cueAnimationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation fromViewDidAppear:(BOOL) fromViewDidAppear
{
    // Fading animation during orientation flip.
    // Make sure its not already animating before trying.
    BOOL barHidden =  [UIApplication sharedApplication].statusBarHidden;
    if (!isAnimating) {
        BOOL alreadyGoodGrid = (UIInterfaceOrientationIsLandscape(interfaceOrientation) && curView == self.gridViewController.view);
        BOOL alreadyGoodTable = (UIInterfaceOrientationIsPortrait(interfaceOrientation) && curView == self.tableViewController.view);
        if ((alreadyGoodGrid && barHidden) ||
            (alreadyGoodTable && !barHidden)) {
            // If views are the way they should be for this orientation. Don't do
            // anything.
            return;
        }
        isAnimating = YES;
        UIView *nextView;
        // Get starting orientation. This will determine what view goes on top
        if (UIInterfaceOrientationIsLandscape(interfaceOrientation))
            nextView = self.gridViewController.view;
        else
            nextView = self.tableViewController.view;

        if (nextView == self.tableViewController.view)
        {
            if (!alreadyGoodTable)
            {
                self.tableViewController.view.alpha = 0.0;
                [self.view bringSubviewToFront:self.tableViewController.view];
            }
            // Unhide the bar for the table view
            [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationSlide];
        }
        else // gridViewController
        {
            if (!alreadyGoodGrid)
            {
                self.gridViewController.view.alpha = 0.0;
                [self.view bringSubviewToFront:self.gridViewController.view];
            }
            // Hide the bar for the grid view
            [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide];
        }
        [UIView animateWithDuration:0.4
                              delay: 0.0
                            options: UIViewAnimationOptionAllowUserInteraction
                         animations:^{
                             if (nextView == self.tableViewController.view) {
                                 self.tableViewController.view.alpha = 1.0;
                             }
                             else {
                                 self.gridViewController.view.alpha = 1.0;
                             }                             
                         }
                         completion:^(BOOL finished) {
                             if (nextView == self.tableViewController.view) {
                                 curView = self.tableViewController.view;
                             }
                             else {
                                 curView = self.gridViewController.view;
                             }
                             isAnimating = NO;
                         }];
    }
} 
```

非常感谢任何可以花时间看这个的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:37:20.170

很多人似乎都有这个问题，就像我一样，还有其他关于它的 Q/A 线程你应该搜索——我可能永远找不到神奇的答案。在某些情况下，您可能会尝试一种似乎“解决”问题的方法，即当您将栏可见性更改为（重新）显示状态栏时：

*   隐藏导航栏。
*   取消隐藏状态栏。
*   取消隐藏导航栏。

或者，如果您要隐藏状态栏，则隐藏、隐藏、取消隐藏。

有时人们发现在取消隐藏导航栏之前需要稍微延迟 - 所以在异步调度块中执行此操作以在下一个运行循环中运行。就像是：

```
dispatch_async(dispatch_get_main_queue(), ^{
        [self.navigationController setNavigationBarHidden:NO animated:NO];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T13:21:16.423

对于 ios7，覆盖 prefersStatusBarHidden

```
- (BOOL)prefersStatusBarHidden {
    return NO if landscape and NO if landscape;
} 
```

在方向改变时调用下面的函数来触发 prefersStatusBarHidden 函数

```
[self setNeedsStatusBarAppearanceUpdate]; 
```

[请参阅https://stackoverflow.com/a/19194901/1939554](https://stackoverflow.com/a/19194901/1939554)中的详细答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T03:39:53.110

在摆弄了很多之后，我似乎想出了某种解决方案。它似乎可以正常工作。

这是我的代码：

```
- (void)cueAnimationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation fromViewDidAppear:(BOOL) fromViewDidAppear
{
    // Fading animation during orientation flip.
    // Make sure its not already animating before trying.
    BOOL barHidden =  [UIApplication sharedApplication].statusBarHidden;
    if (!isAnimating) {
        BOOL alreadyGoodGrid = (UIInterfaceOrientationIsLandscape(interfaceOrientation) && curView == self.gridViewController.view);
        BOOL alreadyGoodTable = (UIInterfaceOrientationIsPortrait(interfaceOrientation) && curView == self.tableViewController.view);
        if ((alreadyGoodGrid && barHidden) ||
            (alreadyGoodTable && !barHidden)) {
            // If views are the way they should be for this orientation. Don't do
            // anything.
            return;
        }
        isAnimating = YES;
        UIView *nextView;
        // Get starting orientation. This will determine what view goes on top
        if (UIInterfaceOrientationIsLandscape(interfaceOrientation))
            nextView = self.gridViewController.view;
        else
            nextView = self.tableViewController.view;

        if (nextView == self.tableViewController.view)
        {
            if (!alreadyGoodTable)
            {
                self.tableViewController.view.alpha = 0.0;
                [self.view bringSubviewToFront:self.tableViewController.view];
            }
            [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationSlide];
        }
        else
        {
            if (!alreadyGoodGrid)
            {
                self.gridViewController.view.alpha = 0.0;
                [self.view bringSubviewToFront:self.gridViewController.view];
            }
            [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide];
        }
        [UIView animateWithDuration:0.4
                              delay: 0.0
                            options: UIViewAnimationOptionAllowUserInteraction
                         animations:^{
                             CGRect r = self.navigationController.navigationBar.frame;
                             if (nextView == self.tableViewController.view) {
                                 self.tableViewController.view.alpha = 1.0;
                                 self.navigationController.navigationBar.frame = CGRectMake(0.0, 20.0, r.size.width, r.size.height);
                                 self.view.frame = CGRectMake(0.0, 20.0, self.view.frame.size.width, self.view.frame.size.height - 20.0);

                             }
                             else {
                                 self.gridViewController.view.alpha = 1.0;
                                 self.navigationController.navigationBar.frame = CGRectMake(0.0, 0.0, r.size.width, r.size.height);
                                 double y = 0.0, h = 0.0;
                                 if (fromViewDidAppear)
                                 {
                                     y = -20.0;
                                     h = 20.0;
                                 }
                                 self.view.frame = CGRectMake(0.0, y, self.view.frame.size.width, self.view.frame.size.height + h);
                             }                             
                         }
                         completion:^(BOOL finished) {
                             if (nextView == self.tableViewController.view) {
                                 curView = self.tableViewController.view;
                             }
                             else {
                                 curView = self.gridViewController.view;
                             }
                             isAnimating = NO;
                         }];
    }
} 
```

我所做的是检查该方法是从其他地方调用`viewDidAppear:`还是从其他地方调用（仅在这种情况下`willAnimateRotationToInterfaceOrientation:duration:`）。根据谁调用该方法，事情的行为会有所不同。无论哪种情况，我都会调整`self.view.frame`并`self.navigationController.navigationBar.frame`考虑状态栏位置的差异。当我们来自时，`viewDidAppear:`我需要输入状态栏高度的负 y 值，以使子视图正确向上移动。这似乎一切都很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-29T01:21:01.217

这解决了我的问题：

```
self.automaticallyAdjustsScrollViewInsets = false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-27T06:32:33.037

状态栏和导航栏在隐藏然后再次显示后重叠，我遇到了同样的问题。我在 github 上找到了一个解决方案[（](https://github.com/PaulWagener/Webcomics-App/blob/master/source/ComicViewer.m)请参阅`showUI`方法），我对其进行了修改以满足我的需要。

```
- (void)toggleNavBar:(BOOL)hide
{    
    navBarHidden = hide;

    //Fade status bar
    [[UIApplication sharedApplication] setStatusBarHidden:hide 
                                            withAnimation:UIStatusBarAnimationFade];

    //Fade navigation bar
    [UINavigationBar beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3]; // Approximately the same time the status bar takes to fade.

    self.navigationController.navigationBar.alpha = hide ? 0 : 1;

    [UINavigationBar commitAnimations];

    // Being invisible messes with the position of the navigation bar, every time it gets 
    // visible we need to set it to the correct y-offset (just below the status bar)
    [self adjustNavBarOrigin];
}

-(void)adjustNavBarOrigin
{
    CGRect r = self.navigationController.navigationBar.frame;
    r.origin.y = 20; //Height of the statusbar, can't find a reliable method in the SDK to get this value
    self.navigationController.navigationBar.frame = r;   
} 
```

# python - 如何用固定点进行多项式拟合

> ID：15191088
> 
> 赞同：20
> 
> 时间：2013-03-03T21:25:47.277
> 
> 标签：python, numpy, scipy

我一直在使用 numpy （使用最小二乘法）在 python 中进行一些拟合。

我想知道是否有办法让它适应数据，同时迫使它通过一些固定点？如果没有，python中是否还有另一个库（或我可以链接到的另一种语言-例如c）？

**注意**我知道可以通过将其移动到原点并将常数项强制为零来强制通过一个固定点，如此处所述，但更普遍地想知道2个或更多固定点：

[http://www.physicsforums.com/showthread.php?t=523360](http://www.physicsforums.com/showthread.php?t=523360)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-04T07:32:20.183

用固定点进行拟合的数学上正确的方法是使用[拉格朗日乘数](http://en.wikipedia.org/wiki/Lagrange_multiplier)。基本上，您修改要最小化的目标函数，这通常是残差的平方和，为每个固定点添加一个额外的参数。我没有成功地将修改后的目标函数提供给 scipy 的最小化器之一。但是对于多项式拟合，您可以用笔和纸找出细节并将您的问题转换为线性方程组的解：

```
def polyfit_with_fixed_points(n, x, y, xf, yf) :
    mat = np.empty((n + 1 + len(xf),) * 2)
    vec = np.empty((n + 1 + len(xf),))
    x_n = x**np.arange(2 * n + 1)[:, None]
    yx_n = np.sum(x_n[:n + 1] * y, axis=1)
    x_n = np.sum(x_n, axis=1)
    idx = np.arange(n + 1) + np.arange(n + 1)[:, None]
    mat[:n + 1, :n + 1] = np.take(x_n, idx)
    xf_n = xf**np.arange(n + 1)[:, None]
    mat[:n + 1, n + 1:] = xf_n / 2
    mat[n + 1:, :n + 1] = xf_n.T
    mat[n + 1:, n + 1:] = 0
    vec[:n + 1] = yx_n
    vec[n + 1:] = yf
    params = np.linalg.solve(mat, vec)
    return params[:n + 1] 
```

要测试它是否有效，请尝试以下操作，其中`n`是点数、`d`多项式次数和`f`固定点数：

```
n, d, f = 50, 8, 3
x = np.random.rand(n)
xf = np.random.rand(f)
poly = np.polynomial.Polynomial(np.random.rand(d + 1))
y = poly(x) + np.random.rand(n) - 0.5
yf = np.random.uniform(np.min(y), np.max(y), size=(f,))
params = polyfit_with_fixed_points(d, x , y, xf, yf)
poly = np.polynomial.Polynomial(params)
xx = np.linspace(0, 1, 1000)
plt.plot(x, y, 'bo')
plt.plot(xf, yf, 'ro')
plt.plot(xx, poly(xx), '-')
plt.show() 
```

![在此处输入图像描述](../Images/05926ae8918643cb0fda07526c6091c7.png)

当然，拟合多项式完全通过以下点：

```
>>> yf
array([ 1.03101335,  2.94879161,  2.87288739])
>>> poly(xf)
array([ 1.03101335,  2.94879161,  2.87288739]) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-04T01:53:23.017

如果你使用`curve_fit()`，你可以使用`sigma`参数给每个点一个权重。下面的例子给出了第一个、中间、最后一个点非常小的sigma，所以拟合结果会非常接近这三个点：

```
N = 20
x = np.linspace(0, 2, N)
np.random.seed(1)
noise = np.random.randn(N)*0.2
sigma =np.ones(N)
sigma[[0, N//2, -1]] = 0.01
pr = (-2, 3, 0, 1)
y = 1+3.0*x**2-2*x**3+0.3*x**4 + noise

def f(x, *p):
    return np.poly1d(p)(x)

p1, _ = optimize.curve_fit(f, x, y, (0, 0, 0, 0, 0), sigma=sigma)
p2, _ = optimize.curve_fit(f, x, y, (0, 0, 0, 0, 0))

x2 = np.linspace(0, 2, 100)
y2 = np.poly1d(p)(x2)
plot(x, y, "o")
plot(x2, f(x2, *p1), "r", label=u"fix three points")
plot(x2, f(x2, *p2), "b", label=u"no fix")
legend(loc="best") 
```

![在此处输入图像描述](../Images/9f149f157a8f374e2e0b2b8e5c35c9fe.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-07T21:07:13.817

一种简单直接的方法是利用约束最小二乘法，其中约束用较大的数 M 加权，例如：

```
from numpy import dot
from numpy.linalg import solve
from numpy.polynomial.polynomial import Polynomial as P, polyvander as V

def clsq(A, b, C, d, M= 1e5):
    """A simple constrained least squared solution of Ax= b, s.t. Cx= d,
    based on the idea of weighting constraints with a largish number M."""
    return solve(dot(A.T, A)+ M* dot(C.T, C), dot(A.T, b)+ M* dot(C.T, d))

def cpf(x, y, x_c, y_c, n, M= 1e5):
    """Constrained polynomial fit based on clsq solution."""
    return P(clsq(V(x, n), y, V(x_c, n), y_c, M)) 
```

显然，这并不是一个真正*包罗万象的灵丹妙药*解决方案，但显然，通过一个简单的示例 ( ) 似乎可以很好地工作`for M in [0, 4, 24, 124, 624, 3124]`：

```
In []: x= linspace(-6, 6, 23)
In []: y= sin(x)+ 4e-1* rand(len(x))- 2e-1
In []: x_f, y_f= linspace(-(3./ 2)* pi, (3./ 2)* pi, 4), array([1, -1, 1, -1])
In []: n, x_s= 5, linspace(-6, 6, 123)    

In []: plot(x, y, 'bo', x_f, y_f, 'bs', x_s, sin(x_s), 'b--')
Out[]: <snip>

In []: for M in 5** (arange(6))- 1:
   ....:     plot(x_s, cpf(x, y, x_f, y_f, n, M)(x_s))
   ....: 
Out[]: <snip>

In []: ylim([-1.5, 1.5])
Out[]: <snip>
In []: show() 
```

并产生如下输出： ![适合渐进式大 M](../Images/624be8213a58e61317fa458e683711bd.png)

**编辑：**添加了“确切”解决方案：

```
from numpy import dot
from numpy.linalg import solve
from numpy.polynomial.polynomial import Polynomial as P, polyvander as V
from scipy.linalg import qr 

def solve_ns(A, b): return solve(dot(A.T, A), dot(A.T, b))

def clsq(A, b, C, d):
    """An 'exact' constrained least squared solution of Ax= b, s.t. Cx= d"""
    p= C.shape[0]
    Q, R= qr(C.T)
    xr, AQ= solve(R[:p].T, d), dot(A, Q)
    xaq= solve_ns(AQ[:, p:], b- dot(AQ[:, :p], xr))
    return dot(Q[:, :p], xr)+ dot(Q[:, p:], xaq)

def cpf(x, y, x_c, y_c, n):
    """Constrained polynomial fit based on clsq solution."""
    return P(clsq(V(x, n), y, V(x_c, n), y_c)) 
```

并测试适合度：

```
In []: x= linspace(-6, 6, 23)
In []: y= sin(x)+ 4e-1* rand(len(x))- 2e-1
In []: x_f, y_f= linspace(-(3./ 2)* pi, (3./ 2)* pi, 4), array([1, -1, 1, -1])
In []: n, x_s= 5, linspace(-6, 6, 123)
In []: p= cpf(x, y, x_f, y_f, n)
In []: p(x_f)
Out[]: array([ 1., -1.,  1., -1.]) 
```

# css - CSS - 背景图像无法在移动浏览器上正确显示

> ID：15191089
> 
> 赞同：1
> 
> 时间：2013-03-03T21:26:13.043
> 
> 标签：css, image, mobile, browser, background

我正在处理的网站 ( [http://tinyurl.com/ax68brt](http://tinyurl.com/ax68brt) ) 的背景图片无法在手机浏览器上正确显示。问题出现在 outheader、outbeurzen 和 outtwitter div 上。标题背景未以 100% 宽度显示，并且 outbeurzen/outtwitter div 的背景也未正确显示。

这里出了什么问题？

html:

```
<div id="outheader"></div>
<div id="outintro"></div>
<div id="outbeurzen"></div>
<div id="outfoto"></div>
<div id="outtwitter"></div>
<div id="outfooter"></div> 
```

CSS：

```
#outheader {
background-image: url(images/achtergrond/header.jpg);
float: left;
height: 660px;
width: 100%;
background-attachment: fixed;
background-repeat: no-repeat;
background-position: 50% 0px;
margin: 0px;
padding: 0px;}

    #outintro {
background-image: url(images/achtergrond/body.jpg);
float: left;
height: auto;
width: 100%;
background-attachment: fixed;
background-repeat: repeat-y;
background-position: 50%;
padding-top: 60px;
padding-bottom: 60px;
    }

    #outbeurzen {
background-image: url(images/achtergrond/beurzen.jpg);
float: left;
height: 315px;
width: 100%;
background-attachment: fixed;
background-repeat: no-repeat;
background-position: 50% -300px;
    }

    #outfoto {
background-image: url(images/achtergrond/body.jpg);
float: left;
height: auto;
width: 100%;
background-attachment: fixed;
background-repeat: repeat-y;
background-position: 50%;
margin-bottom: 70px;
margin-top: 70px;
    }

    #outtwitter {
background-image: url(images/achtergrond/twitter.jpg);
float: left;
height: 315px;
width: 100%;
background-attachment: fixed;
background-repeat: no-repeat;
background-position: 50%;
font-family: 'Roboto Condensed', sans-serif;
    }

    #outfooter {
background-image: url(images/achtergrond/body.jpg);
float: left;
height: 240px;
width: 100%;
background-attachment: fixed;
background-repeat: repeat-y;
background-position: 50%;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T23:17:32.070

你不应该`background-attachment: fixed;`在移动浏览器上使用，它有问题而且重绘成本太高。见费

[Android/Mobile Webkit CSS Background-Attachment：固定不工作？](https://stackoverflow.com/questions/9350869/android-mobile-webkit-css-background-attachmentfixed-not-working)或者

[https://twitter.com/paul_irish/status/306818591196602368](https://twitter.com/paul_irish/status/306818591196602368)

您的`<meta name="viewport" … >`网站上还缺少一个（视口元）标签，请参阅[https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T09:54:50.517

在 html 标头部分给出元标记。

```
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> 
```

# c# - 用键盘移动后如何比较二维数组上的光标位置？

> ID：15191090
> 
> 赞同：1
> 
> 时间：2013-03-03T21:26:17.277
> 
> 标签：c#, .net

我有一个在屏幕上绘制文本地图的二维数组，我正在使用“WASD”在屏幕上移动一个字符。我想测试地图限制，这样角色就不会越界。

有什么线索吗？

这是我的代码：

```
static void Main(string[] args)
    {
        bool GameOver = false;
        int playerX = 1;
        int playerY = 1;
        char[,] myCharArray = new char[16, 8];
        string[] lol = new string[8];
        lol[0] = "----------------";
        lol[1] = "-              -";
        lol[2] = "-              -";
        lol[3] = "-              -";
        lol[4] = "-              -";
        lol[5] = "-              -";
        lol[6] = "-              -";
        lol[7] = "----------------";

        for (int i = 0; i < 8; i++)
        {
            char[] letters = lol[i].ToCharArray();

            for (int j = 0; j < 16; j++)
            {
                myCharArray[j, i] = letters[j];
            }
        }

        do
        {
            for (int i = 0; i < 8; i++)
            {
                for (int j = 0; j < 16; j++)
                {
                    if (playerX == j && playerY == i)
                    {
                        Console.Write('*');
                    }
                    else
                    {
                        Console.Write(myCharArray[j, i]);
                    }
            }
            Console.WriteLine();
            }

            ConsoleKeyInfo pressedKey = Console.ReadKey();
            Console.WriteLine(pressedKey.Key.ToString());
            if (pressedKey.Key.ToString() == "A")
            {                    
                playerX--;
            }
            if (pressedKey.Key.ToString() == "S")
            {
                playerY++;
            }
            if (pressedKey.Key.ToString() == "D")
            {
                playerX++;
            }
            if (pressedKey.Key.ToString() == "W")
            {
                playerY--;
            }
            Console.Clear();
        } while (GameOver == false);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:55:06.743

如果这里的条件：

```
 if (pressedKey.Key.ToString() == "A")
            {   
                //check if move left is possible
                if(playerX != 0)                  
                    playerX--;
            } 
```

**编辑**请找到一些丰富的版本，单独找出规则:]。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace FunnyStuff
{
    class Program
    {
        static void Main(string[] args)
        {
            bool GameOver = true;
            int playerX = 1;
            int playerY = 1;

            int[] enemy = new int[2];
            Random random = new Random();
            int randomNumber = random.Next(0, 100);
            enemy[0] = random.Next(1, 15);
            enemy[1] = random.Next(1, 6);
            char[,] myCharArray = new char[16, 8];
            string[] lol = new string[8];
            lol[0] = "----------------";
            lol[1] = "-              -";
            lol[2] = "-              -";
            lol[3] = "-              -";
            lol[4] = "-              -";
            lol[5] = "-              -";
            lol[6] = "-              -";
            lol[7] = "----------------";

            for (int i = 0; i < 8; i++)
            {
                char[] letters = lol[i].ToCharArray();

                for (int j = 0; j < 16; j++)
                {
                    myCharArray[j, i] = letters[j];
                }
            }

            do
            {
                for (int i = 0; i < 8; i++)
                {
                    for (int j = 0; j < 16; j++)
                    {
                        if (playerX == j && playerY == i)
                        {
                            Console.Write('*');
                        }
                        else if (enemy[0] == j && enemy[1] == i)
                        {
                            Console.Write('+');
                        }
                        else
                        {
                            Console.Write(myCharArray[j, i]);
                        }
                    }
                    Console.WriteLine();
                }

                int rx = random.Next(-1, 2);
                int ry = random.Next(-1, 2);
                enemy[0] = (rx+enemy[0] != 1 || rx+enemy[0] != 14) ? rx+enemy[0] : enemy[0];
                enemy[1] = (ry + enemy[1] != 1 || ry + enemy[0] != 6) ? ry + enemy[1] : enemy[1];

                ConsoleKeyInfo pressedKey = Console.ReadKey();
                Console.WriteLine(pressedKey.Key.ToString());
                if (pressedKey.Key.ToString() == "A")
                {
                    if (playerX != 1) 
                    playerX--;
                }
                if (pressedKey.Key.ToString() == "S")
                {
                    if (playerY != 6)
                    playerY++;
                }
                if (pressedKey.Key.ToString() == "D")
                {
                    if (playerX != 14)
                    playerX++;
                }
                if (pressedKey.Key.ToString() == "W")
                {
                    if (playerY != 1) 
                    playerY--;
                }

                if (playerX == enemy[0] && playerY == enemy[1])
                {
                    GameOver = false;
                }

                Console.Clear();
            } while (GameOver );

        }
    }
} 
```

# android - android.content.res.Resources$NotFoundException: Main 中的字符串资源 ID 致命异常

> ID：15191092
> 
> 赞同：70
> 
> 时间：2013-03-03T21:26:22.037
> 
> 标签：android, exception, random, textview

我一直在尝试制作一个简单的程序来获取一个小的随机数并在文本视图中将其显示给用户。在最终获得随机数生成（我认为）之后，每当我运行时，程序都会抛出一个致命的异常。代码没有错误，但我是一个完整的新手，我开始很简单，以便我可以学习。几个小时后，我已经提交请求帮助。我几乎可以肯定我的随机数片段在错误的区域，我只是不确定该放在哪里。我尝试过的所有地方都会引发相同的错误。

这是.java

```
package com.eai.vgp;

import java.util.Random;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;

    }

    Random pp = new Random();
int a1 = pp.nextInt(10);

TextView tv = (TextView)findViewById(R.id.tv);{

tv.setText(a1);}

    } 
```

XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" />

</RelativeLayout> 
```

日志猫

```
03-03 16:34:25.313: I/Process(740): Sending signal. PID: 740 SIG: 9
03-03 16:35:02.212: E/Trace(806): error opening trace file: No such file or directory     (2)
03-03 16:35:02.802: W/ResourceType(806): No package identifier when getting value for     resource number 0x00000001
03-03 16:35:02.813: D/AndroidRuntime(806): Shutting down VM
03-03 16:35:02.813: W/dalvikvm(806): threadid=1: thread exiting with uncaught exception     (group=0x40a13300)
03-03 16:35:02.833: E/AndroidRuntime(806): FATAL EXCEPTION: main
03-03 16:35:02.833: E/AndroidRuntime(806): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.eai.vgp/com.eai.vgp.MainActivity}:     android.content.res.Resources$NotFoundException: String resource ID #0x1
03-03 16:35:02.833: E/AndroidRuntime(806):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     android.app.ActivityThread.access$600(ActivityThread.java:130)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     android.os.Handler.dispatchMessage(Handler.java:99)
03-03 16:35:02.833: E/AndroidRuntime(806):  at android.os.Looper.loop(Looper.java:137)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     android.app.ActivityThread.main(ActivityThread.java:4745)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     java.lang.reflect.Method.invokeNative(Native Method)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     java.lang.reflect.Method.invoke(Method.java:511)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-03 16:35:02.833: E/AndroidRuntime(806):  at dalvik.system.NativeStart.main(Native     Method)
03-03 16:35:02.833: E/AndroidRuntime(806): Caused by:     android.content.res.Resources$NotFoundException: String resource ID #0x1
03-03 16:35:02.833: E/AndroidRuntime(806):  at     android.content.res.Resources.getText(Resources.java:229)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     android.widget.TextView.setText(TextView.java:3620)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     com.eai.vgp.MainActivity.onCreate(MainActivity.java:22)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     android.app.Activity.performCreate(Activity.java:5008)
03-03 16:35:02.833: E/AndroidRuntime(806):  at     android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-03 16:35:02.833: E/AndroidRuntime(806):      atandroid.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-03 16:35:02.833: E/AndroidRuntime(806):  ... 11 more
03-03 16:35:05.113: I/Process(806): Sending signal. PID: 806 SIG: 9 
```

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2013-03-03T21:28:36.330

移动

```
Random pp = new Random();
int a1 = pp.nextInt(10);
TextView tv = (TextView)findViewById(R.id.tv);
tv.setText(a1); 
```

到里面`onCreate()`，`tv.setText(a1);`改成`tv.setText(String.valueOf(a1));`：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

  Random pp = new Random();
  int a1 = pp.nextInt(10);

  TextView tv = (TextView)findViewById(R.id.tv);
  tv.setText(String.valueOf(a1));

} 
```

第一个问题：`findViewById()`被调用 before `onCreate()`，这会抛出一个 NPE。

第二个问题：将 int 直接传递给 TextView 调用查找 String 资源的重载方法（来自`R.string`）。因此，我们要使用`String.valueOf()`强制`String`重载的方法。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-04-18T15:00:38.973

你试图做 a.setText(a1)。a1 是一个 int 值，但 setText() 需要一个字符串值。出于这个原因，您需要使用 String.valueOf(a1) 将 a1 的值作为 String 而不是作为 int 传递给 a.setText()，如下所示：

`a.setText(String.valueOf(a1))`

这就是我的案子问题的确切解决方案。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-05-02T09:40:28.733

```
tv.setText( a1 + " "); 
```

这将解决您的问题。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-11-09T12:36:04.647

您正在尝试将 int 值设置为，`TextView`因此您遇到了这个问题。要解决此问题，请尝试以下一个选项

选项1：

```
tv.setText(no+""); 
```

选项2：

```
tv.setText(String.valueOf(no)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-18T12:48:17.020

其他可能的解决方案：

```
tv.setText(Integer.toString(a1));  // where a1 - int value 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-19T19:33:32.253

这总是可能发生在 DataBinding 中。尽量不要在绑定中添加逻辑，包括附加一个空字符串。您可以制作自己的自定义适配器，并多次使用它。

```
@BindingAdapter("numericText")
fun numericText(textView: TextView, value: Number?) {
    value?.let {
        textView.text = value.toString()
    }
} 
```

`<TextView app:numericText="@{list.size()}" .../>`

# ios - 如何从 AppDelegate.m 访问一些实例类变量

> ID：15191093
> 
> 赞同：0
> 
> 时间：2013-03-03T21:26:25.017
> 
> 标签：ios, objective-c, properties, instance-variables, appdelegate

这是一个老生常谈的问题，我有一些编程经验，但是 Objective-c 对我来说是全新的，我找不到关于整个 Objective-c 概念的任何明确定义。这里有一些我已经知道的理论：我不能直接访问类的实例变量，因此我必须使用属性或“访问器方法”来访问它。好的。我尝试了一些我的意思是访问器方法，但是嗯，这都是错误的。我想你可以帮我解决这个问题。

这是我的示例：我有 Cat 类，以及一个包含有关猫的信息的 plist。Plist 存储宠物的姓名和年龄。我想做这个：具有文本字段、标签和按钮的简单视图。Label - 是当前宠物名称，textField 用于更改在 textfield now 方法中的猫名称（更改猫名听起来令人毛骨悚然，但这只是一个示例），以及一个用于向更改名称功能发送消息的按钮。在我按下主页按钮后，我想通过 AppDelegate.m 文件将名称保存到文件中，这是一个问题，我将在下面描述。

我不知道如何将代码包装到一个隐藏的块中，直到你打开它，所以我不想在这里用大量的代码行打扰你的眼睛。我添加了一个代码链接和一些带有日志输出的屏幕。（如果有人会说我该怎么做，我会在这里添加代码），但现在这里是链接： [http ://shlonger.com/680dc6cf21aa426c4bed107213ab4467](http://shlonger.com/680dc6cf21aa426c4bed107213ab4467)

我无法从 AppDelegate 访问应用程序运行时实现的对象。我为类变量创建了一些属性和一些 getter/setter 方法，但是当我在 AppDelegate 中初始化 Cat 类时，它再次创建了另一个具有默认设置的对象（如在 plist 文件中）。如何以**正确的方式**通过 AppDelegate 保存当前设置？

抱歉，问题描述很长。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:12:16.033

您不一定需要与 通信`AppDelegate`，但您可以通过`[[UIApplication sharedApplication] delegate]`. 然后，您可以访问所需的任何属性，但您可能需要强制转换它：

```
// assuming your application delegate is of type 'AppDelegate' - usually the default provided by Xcode
AppDelegate *delegate = (AppDelegate*)[[UIApplication shared application] delegate];
// you can now all you application delegat's properties. 
```

在您的课程中，另一种方法`Cat`是注册[应用程序委托发布的通知](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)。例如：

```
@implementation Cat

-(id)init {
    if ( (self = [super init]) ) {
        // you can also attempt to read stored values form disk here
        // perform all your other initialization that you already have

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(handleNotification:)
                                                     name:UIApplicationDidEnterBackgroundNotification
                                                    obect:[UIApplication sharedApplication];
    }
} 
```

在您的`Cat`类中，定义一个方法`handleNotification:`，因为它是提供给通知中心的选择器。这是发布时通知中心将在您的`Cat`班级上调用的方法`UIApplicationDidEnterBackgroundNotification`：

```
-(void)handleNotification:(NSNotification*)notification {
   NSString *name = notification.name;
   id sender = notification.object;

   if ( [name isEqual:UIApplicationDidEnterBackgroundNotification] && [sender isEqual:[UIApplication sharedApplication] ) {
       // save `Cat` class to disk as plist or however you want 
   }
} 
```

你也可以`UIApplicationDidEnterBackgroundNotification`用`UIApplicationWillResignActiveNotification`. 我将由您决定哪个最适合您的需求。

[更多关于使用`NSNotificationCenter`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html).

**更新**：

`Cat`第二种方法的优点是你的类和应用程序委托之间不需要任何特定的知识或依赖关系。两个对象可以彼此独立运行。这`[UIApplication sharedApplication]`是一个可用于 iOS 应用程序中运行的任何对象的单例，但同样，您不需要知道确切的类型。唯一需要的特定知识是通知名称，但即使是这些名称也是全局可访问的。

# c# - 构建具有存储库模式但没有工作单元的单页应用程序 - 在哪里保存更改？

> ID：15191096
> 
> 赞同：2
> 
> 时间：2013-03-03T21:26:43.950
> 
> 标签：c#, asp.net, asp.net-mvc, design-patterns, asp.net-web-api

我正在阅读存储库和 UOW 模式，似乎 UOW 需要一堆数据，对内存中的数据进行修改，然后在某个点提交更改。如果不需要，我不想实现另一层*，*所以我试图将一些 UOW 职责委托给我的存储库（即保存）。

我当前应用程序的存储库立即执行保存，如下所示：

```
public void DeleteBox(int BoxId)
        {
            var Box = GetBox(BoxId);
            if (Box != null)
            {
                foreach (var subBox in Box.Boxes.ToList())
                {
                    DeleteBox(subBox.BoxId);
                }

                if (Box.ParentBox != null)
                {
                    Box.ParentBox.Boxs.Remove(Box);
                    _db.SaveChanges();
                }
                _db.Boxs.Remove(Box);
                _db.SaveChanges();
            }
            else throw new InvalidOperationException("Cannot delete Box because it doesn't exist");
        } 
```

代码当前“有效”，但我想知道在这里执行 SaveChanges 是否不太理想。当我开始构建 WebAPI 时，是否应该考虑从控制器操作调用 saveChanges，并修改存储库中应用程序的状态？任何帮助我更好地理解应该如何进行储蓄的文章或参考资料都会很棒——我现在有点不知所措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:50:57.430

就个人而言，我喜欢创建一个完整的存储库类来处理域模型对象的所有 CRUD 操作，并通过接口将此存储库传递给 MVC 控制器。然后，控制器根据应用程序逻辑在存储库上执行各种方法。

我觉得这种方法有两个主要优点：

1.  您可以将存储库中的数据访问代码与控制器中的应用程序逻辑代码完全分开。因此，您的存储库对数据访问负有全部责任，而您的控制器维护应用程序逻辑。
2.  这是为测试构建事物的有效方法。通过通过接口将存储库传递到控制器，您可以通过模拟框架（例如 RhinoMocks 或 Moq）对控制器进行完整的可测试性。您的数据访问代码很难或不可能进行有效测试，它们被集中到一个不可测试的类中。

例如，假设我想要一个控制器来对 Product 类执行完整的 CRUD 操作。我将创建一个存储库接口和实现，如下所示。请注意，存储库实现需要对象关系映射器 (ORM) 或数据访问层的实例。在此示例中，我通过构造函数中的 ISession 接口传入 nHibernate Session 对象的实例。

```
public interface IProductRepo
{
    List<Product> GetProducts();
    Product GetProduct(int Id);
    void DeleteProduct(int Id);
    void CreateProduct(Product product);
    void UpdateProduct(Product product);
}

public class ProductRepo : IProductRepo
{
    public ProductRepo(ISession session)
    {
         _session = session;  
    }

    public Product GetProduct(int Id)
    {
         return _session<Product>().Get(Id);
    }

    //Implementation of other methods of IProductRepo

     ISession _session;
} 
```

然后可以通过构造函数注入（我最喜欢的）或属性注入将这个 repo 传递给控制器​​。所以你的控制器看起来像这样：

```
public class ProductController : ApiController
{
    public ProductController(IProductRepo repo)
    {
        _repo = repo;
    }
    public List<Product> GetProducts()
    {
        //other code as needed
        return _repo.GetProducts();
    }
    public Product GetProduct(int id)
    {
        //other code as needed
        return _repo.GetProduct(id);
    }
    public void PostProduct(Product product)
    {
        _repo.CreateProduct(product);
        //other code as needed
    }
    public void PutProduct(Product product)
    {
        _repo.UpdateProduct(product);
        //other code as needed
    }
    public void DeleteProduct(int id)
    {
        _repo.DeleteProduct(id);
        //other code as needed
    }
} 
```

Microsoft 有一篇[很好的文章](http://www.asp.net/web-api/overview/creating-web-apis/creating-a-web-api-that-supports-crud-operations)，介绍了 Web API 的基本示例。

**编辑：存储库模式**

[用马丁·福勒](http://martinfowler.com/eaaCatalog/repository.html)的话说

> 存储库在域和数据映射层之间进行调解，就像内存中的域对象集合一样。

它通常与对象关系映射器 (ORM) 或数据访问层（如 nHibernate 或实体框架）结合使用。因此，您的存储库将采用 ORM 或数据访问类的实例，该实例实际上执行对持久层的写入和读取。存储库用于封装您对 ORM/数据访问类的所有查询和 CRUD 操作。

# eclipse - Eclipse Maven 插件推送到仓库

> ID：15191097
> 
> 赞同：0
> 
> 时间：2013-03-03T21:26:51.147
> 
> 标签：eclipse, maven, plugins

我的团队决定使用 GitHub 和 Maven 来管理我们的存储库。我有使用 Eclipse 和 BitBucket 的 Mercurial 插件的经验，但这似乎非常不同。

我设法通过帮助-> 安装新软件-> 使用：Indigo -> 通用工具-> m2e 下载了 Maven

所以此时我想连接到 GitHub 上的存储库，然后将我的内容推送到存储库。

我找不到任何关于这样做的教程。其他人似乎也有同样的问题；喜欢[这里](https://stackoverflow.com/questions/8620127/maven-step-by-step "这里没有好的答案")！

这是我的 Eclipse 设置的屏幕截图： ![在此处输入图像描述](../Images/4bc42956221029beac469a7cd8576f2d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:08:53.550

您应该安装[Eclipse:EGit](http://www.eclipse.org/egit/)，让 Eclipse 作为 SCM 与 Github 集成。有关详细信息，请查看[用户指南](http://wiki.eclipse.org/EGit/User_Guide)。

如果您想与源代码工作集一起进行问题管理。您可以使用[Eclipse Mylyn](http://www.eclipse.org/mylyn/)来满足您的要求。[这里](http://wiki.eclipse.org/Mylyn/Extensions#GitHub_Connector_.28egit-github.29)有一个 Github Mylyn 连接器。安装后，在“添加任务存储库...”期间，您将拥有以下内容：-

1.  Github 要点
2.  Github 问题
3.  Github 拉取请求

在将源代码更改集提交到版本控制 (SVN/Git/etc) 期间，您可以将问题从 Mylyn 连接器链接到它以便更好地管理。

请注意，我使用 Maven、SVN 作为我的 SCM 以及使用[Redmine Mylyn Connector的 Eclipse Mylyn 和](http://www.redmine.org/projects/redmine/wiki/HowTo_Mylyn)[Redmine](http://www.eclipse.org/mylyn/)。他们也给了我一个很好的结果。

我希望这可能会有所帮助。

问候，

查理·Ch。

# python - String.replace() Python 删除第一个巧合

> ID：15191098
> 
> 赞同：0
> 
> 时间：2013-03-03T21:26:52.053
> 
> 标签：python, replace

根据 string.replace 的 Python 文档，我正在尝试替换一个字符串，例如“843845ab38”。我怎样才能让 string.replace(old,new) 只替换第一个巧合？

例子：

```
a="843845ab38"
a.replace("8","")
print a 
```

我正在寻找的解决方案是“43845ab38”，用空格替换前 8 个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T21:28:48.507

[`str.replace()`](http://docs.python.org/2/library/stdtypes.html#str.replace)接受第三个参数，称为 count：

```
a.replace("8", "", 1) 
```

通过`1`作为计数传入，只有第*一次*出现的`'8'`被替换：

```
>>> a = "843845ab38"
>>> a.replace("8", "", 1)
'43845ab38' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T21:34:13.647

您不必使用替换功能。只需 a[1:] 就足够了，但是如果您想替换所有“8”，那么您可能需要使用替换

# c++ - 非整数/枚举类型的非类型模板参数的用例？

> ID：15191103
> 
> 赞同：6
> 
> 时间：2013-03-03T21:27:14.707
> 
> 标签：c++, templates, non-type

C++ 允许非类型模板参数为整数或枚举类型（整数包括布尔值和字符），以及指向任意类型的指针和引用。

我见过广泛使用的整数、布尔值和枚举参数，我很欣赏它们的实用性。我什至看到了在[编译时解析字符串时](http://abel.web.elte.hu/mpllibs/metaparse/index.html)巧妙地使用字符参数。

但我想知道作为指针或对任意类型的引用的非类型模板参数有哪些用例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-15T12:13:05.157

使用指向成员函数的指针作为模板参数使编译器可以内联对该函数的调用。在我对这个问题的回答中可以看到这种用法的一个例子：[How to allow templated functor work on both member and non-member functions](https://stackoverflow.com/questions/17218712/how-to-allow-templated-functor-work-on-both-member-and-non-member-functions/17237671#17237671)

在此示例中，模板参数中的指向成员函数的指针允许生成包含对指向成员函数的调用（内联）的“thunk”函数。指向 thunk 函数的指针具有通用签名（和固定大小），与指向成员函数的指针不同，它能够以最小的运行时成本进行存储和复制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T19:48:04.680

如果您在编译时知道缓冲区的地址，则可以根据其对齐方式（在编译时）做出决定，尤其是对于 memcpy 之类的东西，这允许您跳过任何运行时检查，直接跳转到使用最有效大小的类型复制数据。

（我猜）你也可以编译断言传入的指针是页面对齐的（例如对 nvme 协议有用），尽管我不知道那会是什么样子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-15T02:27:50.357

我认为重要的指针模板参数是*操作。* （更间接的方式是函数指针，而“更简单”的方式是函数对象[这又是一种类型。]）

```
template<typename Key, class Val, bool (*CMP)(Key const&, Key const&)>
class map
{
};

template<typename KEY, class VALUE, typename CMP = std::less<KEY>>
class map
{
public:
  CMP cmp;
}; 
```

由于您不知道预先应用哪个比较，因此您无法将其构建到容器中。它需要在外部提供给任何需要它的功能，或者通过模板提供。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-17T07:04:40.153

我之前使用过一个侵入式（存储在数据元素中的数据指针）单链表，它由指向数据成员的指针参数化，该指针指示列表存储其链接的位置。如果它们使用不同的链接成员，则该参数化可以将相同的数据元素存储在多个列表中：

```
template <class T, T* (T::*Link)> class ilist;

struct Node {
  Node* a_next;
  Node* b_next;
};

typedef ilist<Node, &Node::a_next> a_list;
typedef ilist<Node, &Node::b_next> b_list; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-16T14:38:52.213

这是一个有用的非整数模板参数示例。一些预先声明（不是全部，但足以理解这个想法）：

```
template <bool flag, class T, class F> struct SelectType
{
    typedef T Result;
};
template <class T, class F> struct SelectType<false, T, F>
{
    typedef F Result;
};

#define PARAMETER( selector, type ) typename SelectType<TypeTraits<T>::selector, type,

#define PTR_TRAITS typename ::Linderdaum::Utils::TypeTraits<T>::PointeeType
#define REF_TRAITS typename ::Linderdaum::Utils::TypeTraits<T>::ReferredType

using namespace ::Linderdaum::Utils;

template <class T> struct ParameterType
{
    typedef
    PARAMETER( IsString,         clStringParameter              )
    PARAMETER( IsReference,      clPODParameter<REF_TRAITS>     )
    PARAMETER( IsPointer,        clPointerParameter<PTR_TRAITS> )
    PARAMETER( IsFundamental,    clPODParameter<T>              )
    // default
    clPODParameter<T>
    >::Result
    >::Result
    >::Result
    >::Result
    Type;
}; 
```

以及实际使用代码：

```
 clParametersList Params;

 ParameterType<const LString& >::Type Param0;
 ParameterType<size_t >::Type Param1;
 ParameterType<clDownloadCompleteCallback >::Type Param2;

 Param0.ReadValue( &P0 );
 Param1.ReadValue( &P1 );
 Param2.ReadValue( &P2 );

 Params.push_back( &Param0 );
 Params.push_back( &Param1 );
 Params.push_back( &Param2 ); 
```

# python - 创建空列表并进行一些操作

> ID：15191107
> 
> 赞同：2
> 
> 时间：2013-03-03T21:27:31.727
> 
> 标签：python, regex, string

这是我想要做的。我有一个包含字符串作为元素的列表。现在我想用它做两件事以上。

1.  在类内创建空列表。
2.  对列表中的每个元素进行操作，然后将其添加到我创建的空列表中。

到目前为止我的代码。

```
class aer(object):
  def __init__(self):
    self.value = []
  def rem_digit(self,s):
    self.value.append(re.sub(" \d+"," ",s))
  def to_lower(self,s):
    self.value.append(self.s.lower()) 
```

如果有人能指出我所犯的错误，那就太好了。以及如何访问我在课堂上制作的“列表”。

样品清单：

```
mki = ["@tenSjunkie We're sorry for the inconvenience. Please call the Guest Service Desk using this link http://t.co/8Zv8DFwbbu and your receipt.",
 "@lindz_h We're sorry for the inconvenience. Please call the Guest Service Desk using this link http://t.co/Ak9fnazHZN and your receipt."] 
```

比上次有所改进，或者说我在 CLASS 面前被打败了

```
def some_mani(old_list):
    new_list = []
    for i in range(0,len(old_list)):
        new_list.append(re.sub(" \d+"," ",old_list[i]).lower())
    return new_list 
```

我仍然想知道是否有人帮助我在 CLASS 中构建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:48:56.933

我在理解你为什么想要这个时遇到了一些麻烦，但听起来你想要一个包含字符串列表的类以及一些方法来执行一些简单的字符串操作并将结果添加到该列表中。基于这个假设，这里有一些代码：

```
class MysteriousStringContainer(object):
    def __init__(self):
        self.values = []

    def remove_digits(self, s):
        self.values.append(re.sub("\d+", " ", s))

    def to_lower(self, s):
        self.values.append(s.lower()) 
```

现在你可以初始化一个 MysteriousStringContainer 并开始调用它的方法：

```
>>> m = MysteriousStringContainer()
>>> print m.values
[]
>>> for s in mki:
...     m.remove_digits(s)
...
>>> print m.values
["@tenSjunkie We're sorry for the inconvenience. Please call the Guest Service Desk using this link http://t.co/ Zv DFwbbu and your receipt.", "@lindz_h We're sorry for the inconvenience. Please call the Guest Service Desk using this link http://t.co/Ak fnazHZN and your receipt."] 
```

如您所见，数字已被删除，生成的字符串可在`m.values`. 不过，在你继续使用它之前，我必须强调，这**几乎可以肯定是**一种糟糕的方式来做你想做的任何事情。如果没有围绕它的类，上面的代码会写得**更好：**

```
>>> nodigits = re.sub("\d+", " ", mki[0])
>>> print nodigits
"@tenSjunkie We're sorry for the inconvenience. Please call the Guest Service Desk using this link http://t.co/ Zv DFwbbu and your receipt." 
```

在这里，`mki`列表中仍然有原始字符串，并且没有数字的新字符串存储为`nodigits`变量。我想不出任何理由使用奇怪且不直观的类设置来混淆预先存在的功能，但如果这是你需要做的，我认为上面的代码会做到这一点。

# ruby-on-rails - Rails 查询数组是否包含其他数组

> ID：15191110
> 
> 赞同：0
> 
> 时间：2013-03-03T21:27:37.723
> 
> 标签：ruby-on-rails, model, where

我有一个过滤器类，用于过滤转租列表。在我的过滤器类中，我有一个列表方法，它返回符合用户在表单中输入的条件的所有列表。这是过滤器类。

```
class Filter < ActiveRecord::Base

  attr_accessible :air_conditioning, :available_rooms, :bathrooms, :furnished, :negotiable, :new, :parking, :maximum_price, :private_bathroom, :show, :term, :total_rooms, :utilities, :washer_dryer
  serialize :term

  def listings
    @listings ||=find_listings
  end

private

    def find_listings
    listings=Listing.order(:price)
    listings=listings.where("listings.price <= ?", maximum_price) if maximum_price.present?
    listings=listings.where(total_rooms: total_rooms) if total_rooms.present?
    listings=listings.where(available_rooms: available_rooms) if available_rooms.present?
    listings=listings.where(bathrooms: bathrooms) if bathrooms.present?
    listings=listings.where(term: term)
    listings=listings.where(furnished: furnished)
    listings=listings.where(negotiable: negotiable)
    listings=listings.where(utilities: utilities)
    listings=listings.where(air_conditioning: air_conditioning)
    listings=listings.where(parking: parking)
    listings=listings.where(washer_dryer: washer_dryer)
    listings=listings.where(private_bathroom: private_bathroom)
    listings
  end

 end 
```

有问题是线路

```
listings=listings.where(term: term) 
```

术语保存为可以序列化的字符串。Aka ['Summer', 'Fall] 用户选中复选框以选择可用于转租的术语。但是，where 子句每次都失败。如何检查用户选择的元素是否包含在列表的条款中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:33:40.787

我不确定你打算用 term 做什么，但你能不能把它变成一个字符串类型然后使用这样的东西？

```
TERMS = %w(Spring Summer Fall Winter)
validates :term, :inclusion => { :in => TERMS } 
```

编辑：另外，您是否打算让 Filter 实际上是您数据库中的一个表，或者只是一个带有验证的模型？如果是后者，您可能想考虑使用 ActiveModel：http: [//yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/](http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/)

# javascript - Chrome UDP 套接字服务器发送到 localhost 以外的其他主机返回 -109 错误代码

> ID：15191114
> 
> 赞同：1
> 
> 时间：2013-03-03T21:28:14.667
> 
> 标签：javascript, sockets, google-chrome-extension, google-chrome-app

我正在使用 chrome 网络 API 打开一个 UDP 套接字，该套接字应该既监听又发送数据（服务器和客户端）。这就是为什么我使用带有`bind`/ `sendTo`/的服务器方式`recvFrom`。

但是，我无法将数据发送到本地主机以外的其他主机：请参见下面的示例。代码错误`-109` [对应](https://code.google.com/p/chromium/codesearch#chromium/src/net/base/net_error_list.h&l=119-121)于`ADDRESS_UNREACHABLE`。

```
chrome.socket.create('udp', function(socketInfo) {

  var socketId = socketInfo.socketId;

  chrome.socket.bind(socketId, '127.0.0.1', 3008, function(s) {

    chrome.socket.getInfo(socketId, function(info) {
      console.log(info);
      // {connected: false, localAddress: "127.0.0.1", localPort: 3008, socketType: "udp"} 
    });

    var arr = new Uint8Array(1);
    arr[0] = 123;
    var ab = arr.buffer;

    chrome.socket.sendTo(socketId, ab, "127.0.0.1", 3007, function(sendResult) {
      console.log("sendTo", sendResult);
      //sendTo {bytesWritten: 1}
    });
    chrome.socket.sendTo(socketId, ab, "google.com", 3007, function(sendResult) {
      console.log("sendTo", sendResult);
      //sendTo {bytesWritten: -109}
    });
  });
}); 
```

我的权限限制较少：`udp-send-to`和`udp-bind`.

使用`connect`/`write`方式有效，但这不是我想要实现的，因为我试图同时打开一个套接字而不是服务器和客户端。

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:01:25.863

我能够通过将套接字绑定到`0.0.0.0`而不是`127.0.0.1`.

```
chrome.socket.bind(socketId, '0.0.0.0', 3008, function(s) {
  //.. and so on
}); 
```

这也许就是@EJP 在[他的回答](https://stackoverflow.com/a/15197460/1501565)中的意思。我通过浏览[此线程](https://code.google.com/p/chromium/issues/detail?id=178488)找到了解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T08:33:47.467

如果将套接字绑定到 127.0.0.1，它只能发送和接收到本地主机。所以不要那样做。使用默认值。

# .net - 只允许访问组，但所有 API

> ID：15191117
> 
> 赞同：0
> 
> 时间：2013-03-03T21:28:21.723
> 
> 标签：.net, asp.net-mvc-4, active-directory, authorization, intranet

我有一个我正在开发的 mvc4 内部网网站，它有一个只有少数 AD 组可以访问的 Web 前端，但我也在使用 mvc4 的 Web API 功能，我需要向所有用户开放，甚至匿名的。我曾尝试使用 Web.config，但这会阻止所有不在其中一个组中的用户。

我将如何在保持 API 开放的同时保护前端？

**更新：**

我只是想，我想避免使用类似的属性标记每个方法`[Authorize]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:27:39.557

弄清楚了。

我只是应用了一个过滤器来检查每个控制器的命名空间。由于我所有的 API 控制器都在其中，`HSServer.Controllers.Api`并且所有 Web 控制器都在`HSServer.Controllers.Web`此代码中，因此我的`FilterConfig.cs`工作就像一个魅力。

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new FrontendAuthorize());
        filters.Add(new HandleErrorAttribute());
    }
}

public class FrontendAuthorize : AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        try
        {
            if (!filterContext.Controller.GetType().Namespace.StartsWith("HSServer.Controllers.Api"))
                base.OnAuthorization(filterContext);
        }
        catch (NullReferenceException)
        {
            base.OnAuthorization(filterContext);
        }
    }
} 
```

# sockets - 多个连接 Lua Sockets

> ID：15191122
> 
> 赞同：2
> 
> 时间：2013-03-03T21:28:44.237
> 
> 标签：sockets, lua

我正在使用 Lua 套接字和 TCP 制作一个类似聊天客户端和服务器的 IRC。我想弄清楚的主要事情是如何让客户端和服务器监听消息并同时发送它们。因为在服务器上执行 socket:accept() 时，它会暂停程序，直到创建连接。有没有办法接受多个连接并将它们存储到一个表中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:38:42.407

这看起来就像 Copas 这样的调度员解决的问题。您应该阅读以下内容：http: [//keplerproject.github.com/copas/manual.html#why](http://keplerproject.github.com/copas/manual.html#why) - 即使您不想使用 Copas，它也会帮助您弄清楚如何解决该问题。

基本上，你需要使用`select()` before `accept()`。请注意，即使您这样做，实际上也不能保证`accept()`会立即返回，因此您也应该使用`settimeout()`（参见[http://w3.impa.br/~diego/software/luasocket/socket.html#select](http://w3.impa.br/~diego/software/luasocket/socket.html#select)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-09T01:39:58.580

您需要在 accept() 之前设置超时以允许非阻塞套接字。根据 Lua 套接字的文档，accept() 方法将阻塞下一个连接。

> 默认情况下，所有 I/O 操作都是阻塞的。也就是说，对方法 send、receive 和 accept 的任何调用都将无限期地阻塞，直到操作完成。settimeout 方法定义了 I/O 方法可以阻塞的时间限制

以下是聊天服务器的工作演示。您可以使用 telnet 连接到它。

```
socket = require("socket") -- import lib

-- define host and port
host = "*"
port = 8080

-- create socket and bind to an available port
server = assert(socket.bind(host, port))

-- get local port number and IP
ip, port = server:getsockname()

totalclient = 0 -- store the total connections
clients = {} -- e.g. clients[1] = 0xSocketAddress
clientnames = {} -- e.g. clientnames[1] = "john"

-- start the loop to listening connection
while true do

  -- new client connected, settimeout to not block connetcion
  server:settimeout(0.01)
  local client, err = server:accept();

  -- print the info of new client and add new client to the table
  if (not err) then
    clientname = client:receive()
    totalclient = totalclient + 1
    clients[totalclient] = client
    clientnames[totalclient] = clientname
    print(">> "..clientname.." connected from " .. tostring(client:getsockname()) .." at " ..os.date("%m/%d/%Y %H:%M:%S"))
  end

  -- loop through the client table
  for i = 1, totalclient do
    -- if there is client, listen to that client
    if (clients[i] ~= nil) then
      clients[totalclient]:settimeout(0.01) -- prevent blocking
      clientmessage, err = clients[i]:receive() -- accept data from client

      -- check if there is something sent to server, and no error occured
      if (err == nil and clientmessage ~= nil) then

        -- loop through the list of client to send broadcast message
        else
          for j = 1, totalclient do
            -- check not to send broadcast to the speaker
            if clients[i] ~= clients[j] then
              clients[j]:send(tostring("["..clientnames[i]).."]: " ..clientmessage.."\r\n")
            end
          end--for
          logdbmessage(clientnames[i], clientmessage)
        end--if

      end--if

    end--if
  end--for

end--while 
```

# ruby - 为什么 .index 比 .all 快？

> ID：15191123
> 
> 赞同：8
> 
> 时间：2013-03-03T21:28:46.013
> 
> 标签：ruby, performance

这里有两个做同样事情的简单块：

```
a = (0..100).to_a

a.all? do |x|
  !(x == 1000)
end

nil == a.index do |x|
  x == 1000
end 
```

除了第二个总是快一点。为什么？

```
 user     system      total        real
testing all                      1.140000   0.000000   1.140000 (  1.144535)
testing index                    0.770000   0.000000   0.770000 (  0.769195) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T00:56:47.283

原因是那`index`是一种方法`Array`。Ruby 将迭代（在 C 中）这些项目，并依次将它们交给块。

另一方面，`all?`, `none?`, `one?`（都会慢 30% 左右）是`Enumerable`. 他们将调用`each`，这将屈服于 C 函数，该函数将屈服于块。时间上的差异是因为涉及到两个`yield`s。

请注意，`all?`等人的专门版本。可以在 上定义`Array`，您将获得与 相同的性能`index`，但这会有点丑陋和多余......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:38:02.747

这可能是因为`!`在迭代的每一轮中使用`all?`.

# php - 句子中出现的句子/单词/字符 - 只计算单词（如果可能，没有正则表达式）（PHP）

> ID：15191126
> 
> 赞同：2
> 
> 时间：2013-03-03T21:28:57.020
> 
> 标签：php, sentence

我正在寻找一种方法来查找另一个句子中的句子出现次数

例如（我有）：

```
Do you have a different language or operating system? JavaScript is currently disabled in your browser and is required to 
```

我正在寻找：

> 一个

这应该向我展示以下结果：

> 结果 = 1

因为如果你把 a 当作一个单词而不是一个 char 你会得到 1 作为结果：

“您有**不同的**语言或操作系统吗？JavaScript 目前在您的浏览器中被禁用，并且是必需的”Din。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:34:39.517

确实使用`substr_count`.

为了确保只匹配单词：在使用之前在单词前后添加一个空格，并使用.`substr_count`显式检查字符串开头或结尾处的单词`substr`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:38:27.337

至于快速/简单地计算单词“a”在字符串中使用的次数：

```
$sent = "Do you have a different language or operating system? JavaScript is currently disabled in your browser and is required to";

if( preg_match( '/ a /', $sent, $matches ) ) { # a space before and after makes it a word not a letter.
    echo count( $matches );            
} 
```

但这仍然不能告诉您在所有情况下肯定有多少个句子；要做到这一点需要一个非常复杂的正则表达式。

--> 编辑：

要在句子开头和其他任何地方添加单词“a”，您可以这样做：

```
$sent = "A different language or operating system? JavaScript is currently disabled in your browser and is required to eat a walrus";

$patterns = array( '/ a /', '/A /' );
$ctr = 0;

foreach( $patterns as $p ) {

    if( preg_match( $p, $sent, $matches ) ) {
        $ctr += count( $matches );             
    }

}

echo $ctr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:41:40.177

不是最有效的解决方案，但似乎可以满足您的需求。

```
$search = 'a';
$str = "Do you have a different language or operating system? JavaScript is currently disabled in your browser and is required to";
$count = array_sum(array_map(function($val) use ($search) {if ($val == $search) { return 1; } else { return 0; }}, str_word_count($str, 1))); 
```

# c++ - 从 typedef 改变含义

> ID：15191127
> 
> 赞同：1
> 
> 时间：2013-03-03T21:29:02.450
> 
> 标签：c++, typedef

我的代码中有以下声明：

```
typedef QString                          String; 
```

然后在另一个标题中我做：

```
class MyClass {
  typedef String String;
}; 
```

并发生以下错误：

```
error: changes meaning of 'String' from 'typedef class QString String' [-fpermissive] 
```

使用这个重新声明有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:45:40.990

由于类型别名的工作方式，它看起来像您试图`MyClass::String`在其自身内部定义的编译器。一切都变得混乱。

> `[C++11: 7.1.3/6]:`在给定范围内，`typedef`不得使用说明符重新定义在该范围内声明的任何类型的名称以引用不同的类型。*[..]*

这是一个完整的例子：

```
typedef int alias_t;

class T
{
  typedef alias_t alias_t;
}; 
```

[输出](http://codepad.org/X9Jl9dzH)：

> test.cpp:4：错误：'typedef alias_t T::alias_t'的
> 声明 test.cpp:1：错误：从'typedef int alias_t'更改'alias_t'的含义

* * *

我可以通过将前缀添加到现有类型来[修复此示例：](http://codepad.org/9FapZA4g)`::`

```
typedef int alias_t;

class T
{
  typedef ::alias_t alias_t;
}; 
```

* * *

在您的代码中，这将转换为以下内容：

```
class MyClass
{
   typedef ::String String;
}; 
```

# c# - 以编程方式有选择地为 Windows 上的特定程序禁用 UAC

> ID：15191129
> 
> 赞同：8
> 
> 时间：2013-03-03T21:29:04.663
> 
> 标签：c#, windows, scheduled-tasks, uac

在堆栈和其他论坛上有许多关于禁用/绕过/抑制 UAC 的帖子问题/答案。也有解决方案。但在程序上可能不是。我只能看到一种解决方案以[编程方式禁用 UAC](https://stackoverflow.com/questions/682182/disabling-uac-programmatically)，但那里可能没有真正的编程解决方案。

是否有一个程序化的解决方案来保存用户，每次他/她运行像 wamp 这样的程序时都会提示他们，他们总是必须点击是，所以最好告诉 windows 他们的选择总是是的。我相信会有

我在[**这里**](http://www.techrepublic.com/blog/window-on-windows/make-vista-launch-uac-restricted-programs-at-startup-with-task-scheduler/616)发现windows通过GUI在任务计划程序中提供了这个工具，所以它也必须可以通过代码实现。

### 更新：我准备了一个正在运行的纯程序化解决方案。看我的回答。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T23:53:52.053

**快速描述：**创建一个新的控制台/窗口应用程序以运行绕过 UAC 的任何应用程序，按照以下指导在此应用程序中选择目标应用程序的路径，编译该程序一次，并随时运行

**一步步**

1.  [从此Codeplex 链接](http://taskscheduler.codeplex.com/)下载 Microsoft.Win32.TaskScheduler.dll
2.  制作 ac# 应用程序（Windows 或控制台）并添加对上述 dll 的引用
3.  将新项目（应用程序清单文件）添加到您的项目（此应用程序）
4.  更改`<requestedExecutionLevel level="asInvoker" uiAccess="false" />` 为`<requestedExecutionLevel level="requireAdministrator" uiAccess="false" />`
5.  在您的 program.cs 文件中编写以下代码

* * *

```
using System;
using Microsoft.Win32.TaskScheduler;
class Program
{
   static void Main(string[] args)
   {
      TaskService ts = new TaskService();          
      TaskDefinition td = ts.NewTask();
      td.Principal.RunLevel = TaskRunLevel.Highest;
      //td.Triggers.AddNew(TaskTriggerType.Logon);          
      td.Triggers.AddNew(TaskTriggerType.Once);    // 
      string program_path = @"c:\wamp\wampmanager.exe"; // you can have it dynamic
//even of user choice giving an interface in win-form or wpf application

      td.Actions.Add(new ExecAction(program_path, null));
      ts.RootFolder.RegisterTaskDefinition("anyNamefortask", td);          
   }
} 
```

6.现在编译并运行你的应用程序（这个应用程序）

* * *

现在，您的应用程序（例如 WAMP）将运行，而不会在您想要的时间表上提示任何 UAC 对话框（在我的情况下，每次您登录 Windows 时）

**来源**

发起自：[您可以为单个应用关闭 UAC 吗？](https://superuser.com/questions/2699/can-you-turn-off-uac-for-a-single-app)和有[选择地为 Windows 7 上的特定程序禁用 UAC](https://superuser.com/questions/99286/selectively-disabling-uac-for-specific-programs-on-windows-7)

基本思想来自：[**使用任务计划程序使 Vista 在启动时启动 UAC 受限程序**](http://www.techrepublic.com/blog/window-on-windows/make-vista-launch-uac-restricted-programs-at-startup-with-task-scheduler/616)

**[创建定时任务](https://stackoverflow.com/questions/7394806/creating-scheduled-tasks)**的基本实现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T23:17:08.073

正确的方法不是忽略用户访问控制 (UAC)，而是在这些参数内进行测试。这样您就不会破坏安全性，而是在其范围内工作。

通过禁用安全性，您将面临漏洞利用的风险。据提供多项安全测试的 Secuna 称，小公司、懒惰的开发者应用程序以及公然无视安全性都是被关注的应用程序。

这意味着您的应用程序可能会在某个时候成为受害者。

我会采取的方法是在 UAC 中进行测试。确保存在适当的权限来执行您的任务，这样它就不会一直以提升的权限运行。一个例子可能是：

```
class Elevated_Rights
{
    // Token Bool:
    private bool _level = false;

    #region Constructor:
    protected Elevated_Rights()
    {
           // Invoke Method On Creation:
           Elevate();
     }
     #endregion
     public void Elevate()
     {
           // Get Identity:
           WindowsIdentity user = WindowsIdentity.GetCurrent();

           // Set Principal
           WindowsPrincipal role = new WindowsPrincipal(user);

           #region Test Operating System for UAC:
           if (Environment.OSVersion.Platform != PlatformID.Win32NT ||            Environment.OSVersion.Version.Major < 6)
            {
                 // False:
                 _level = false;
             }
             #endregion
             else
             {
                    #region Test Identity Not Null:
                    if (user == null)
                    {
                        // False:
                        _level = false;
                    }
                    #endregion
                    else
                    {
                        #region Ensure Security Role:
                        if (!(role.IsInRole(WindowsBuiltInRole.Administrator)))
                        {
                            // False:
                            _level = false;
                        }
                        else
                        {
                            // True:
                            _level = true;
                        }
                        #endregion
             } 
      }
} 
```

沿着这些思路，您可以针对 UAC 进行测试，然后执行任务。我不太确定您为什么要禁用 UAC，但这是我的方法。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-26T16:03:22.887

如果您想绕过作为标准用户运行所获得的保护，那么更好的解决方案是更改文件夹和注册表项的权限，以便允许所有用户修改您的应用程序的文件夹。

```
GrantAllUsersFullControlToFileOrFolder("C:\Program Files\Grobtastic"); 
```

具有以下伪代码实现：

```
void  GrantAllUsersFullControlToFileOrFolder(String path)
{
    PACL oldDACL;
    PACL newDACL;    
    PSECURITY_DESCRIPTOR sd;

    //Get the current DALC (Discretionary Access Control List) and Security Descriptor
    GetNamedSecurityInfo(path, SE_FILE_OBJECT, DACL_SECURITY_INFORMATION, 
          nil, nil, ref oldDACL, nil, ref sd);

    //Create an SID for the "Users" group
    PSID usersSid = StringToSid("S-1-5-32-545");

    // Initialize an EXPLICIT_ACCESS structure for the new Access Control Entry (ACE)
    EXPLICIT_ACCESS ea;
    ZeroMemory(@ea, SizeOf(EXPLICIT_ACCESS));
    ea.grfAccessPermissions  = GENERIC_ALL;
    ea.grfAccessMode         = GRANT_ACCESS;
    ea.grfInheritance        = SUB_CONTAINERS_AND_OBJECTS_INHERIT;
    ea.Trustee.TrusteeForm   = TRUSTEE_IS_SID;
    ea.Trustee.TrusteeType   = TRUSTEE_IS_GROUP;
    ea.Trustee.ptstrName     = PChar(usersSID);

    // Create a new ACL that merges the new ACE into the existing ACL.
    // SetEntriesInAcl takes care of adding the ACE in the correct order in the list
    SetEntriesInAcl(1, @ea, oldDACL, ref newDACL); //use LocalFree to free returned newDACL

    //Attach the new ACL as the object's new DACL
    SetNamedSecurityInfo(path, SE_FILE_OBJECT, DACL_SECURITY_INFORMATION,
          nil, nil, newDACL, nil);

    LocalFree(HLOCAL(sd));
    LocalFree(HLOCAL(newDACL));
    FreeSid(usersSID);
} 
```

这即使在禁用 UAC 的情况下也有效（即用户是标准用户并且没有方便的方式让他们提升）。它也适用于没有 UAC 便利功能的 Windows XP，您必须快速切换用户才能以管理员身份运行某些东西。

然后，您将可执行文件显示为运行**asInvoker**，因为您不需要管理权限。

* * *

问你自己：

> 我会在 Windows XP 上做什么？
> 在禁用 UAC 的 Windows 7 上我会做什么？

如果他们是标准用户，你的程序会死机吗？

# squid - Gentoo上的Squid，安装时出错

> ID：15191131
> 
> 赞同：0
> 
> 时间：2013-03-03T21:29:15.480
> 
> 标签：squid, gentoo

当我尝试在我的 Gentoo 上安装 squid

```
emerge squid 
```

我收到此错误：

```
 *                                                                             -
!!! All ebuilds that could satisfy "squid" have been masked.
!!! One of the following masked packages is required to complete your request:
- net-proxy/squid-3.1.22 (masked by: required EAPI 4, supported EAPI 1)
- net-proxy/squid-3.1.23 (masked by: required EAPI 4, supported EAPI 1)
- net-proxy/squid-3.2.5 (masked by: required EAPI 4, supported EAPI 1)
- net-proxy/squid-3.2.6 (masked by: required EAPI 4, supported EAPI 1)
- net-proxy/squid-3.2.7 (masked by: required EAPI 4, supported EAPI 1)
- net-proxy/squid-3.2.8 (masked by: required EAPI 4, supported EAPI 1)
- net-proxy/squid-3.3.1 (masked by: required EAPI 5, supported EAPI 1)
- net-proxy/squid-3.3.2 (masked by: required EAPI 5, supported EAPI 1) 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T17:53:13.950

安装列出的软件包之一 (#emerge -aDv squid-3.3.2)

应该告诉你包被屏蔽了，但包括在文件中添加一行的说明，例如 'probably net-proxy/squid-3.3.2' 到 /etc/portage/package.masks 然后再次运行（#emerge -aDv squid- 3.3.2）这次它应该可以工作（输入然后在提示符下按）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T06:47:14.427

你的搬运太旧了。

```
$ emerge portage 
```

# ios - 我应该如何打包 iOS 库？

> ID：15191132
> 
> 赞同：0
> 
> 时间：2013-03-03T21:29:16.060
> 
> 标签：ios, frameworks, static-libraries

我们提供了一个 iOS 框架，作为与拍照相关的扩展。你建议我们如何打包这个库以便于集成？

谢谢，乌里。

# c - C 指针算术和数组访问

> ID：15191134
> 
> 赞同：0
> 
> 时间：2013-03-03T21:29:24.863
> 
> 标签：c, arrays, pointers, pointer-arithmetic

我有一个函数，它需要一个指向结构数组的指针

```
typedef struct {
    bool isUsed;
    int count;
} MyStructure;

void Process(MyStructure *timeStamps, int arrayLength){
    for (int i = 0; i < arrayLength; i++){
        MyStructure *myStructure = &(*(timeStamps + i));
        if (myStructure->isUsed == true){
          /*do something*/
        }
    }

} 
```

我访问数组的方式似乎有点偏离。

```
&(*(timeStamps + i)) 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T21:32:03.250

```
&(*(timeStamps + i)) 
```

相当于

```
&timeStamps[i] 
```

反过来，也就是简单地

```
timeStamps + i 
```

就这样 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T21:32:25.650

参数`timeStamps`是 type `MyStructure*`，这意味着这一行：

```
MyStructure *myStructure = &(*(timeStamps + i)); 
```

相当于：

```
MyStructure *myStructure = timeStamps + i; 
```

这也相当于：

```
MyStructure *myStructure = &timeStamps[i]; 
```

请注意，在此表达式中：`&(*(timeStamps + i))`是`timeStamps + i`指向索引处元素的指针`i`（即该元素的地址），然后使用[解引用运算符 ( `*`)](http://en.wikipedia.org/wiki/Dereference_operator)将其解引用，该运算符返回类型的左值，`MyStructure`然后检索此元素通过使用*地址*运算符 ( `&`) 来实现，该运算符等于`timeStamps + i`在开头保存的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:31:09.070

```
MyStructure *myStructure = &timeStamps[i]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T21:33:07.727

自从我在 C 中工作以来已经有一段时间了，但据我所知，方括号索引运算符 ([]) 与添加到指针相同。所以：

`timeStamps[i]`应该相当于`*(timeStamps + i)`

因此你应该能够使用

`myStructure = &timeStamps[i]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T21:36:15.787

我会建议：

```
void Process(MyStructure *timeStamps, int arrayLength){
    for (MyStructure *i = timeStamps; i < timeStamps + arrayLength; i++) {
        if (i->isUsed == true) { 
```

# actionscript-3 - 调整窗口大小和移动元素，如何更改坐标

> ID：15191135
> 
> 赞同：0
> 
> 时间：2013-03-03T21:29:25.917
> 
> 标签：actionscript-3, apache-flex, actionscript, air, flex4.5

我有一个 1024x600 的 adobe air 应用程序。现在我想启用调整大小。当我为元素（如数据网格）提供百分比大小时，网格会正确更改其大小。

但是我可以用按钮的位置做什么？当我更改应用程序的宽度时，数据网格会增长，但按钮会保持在其位置。

我该如何改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:54:30.673

如前所述，actionscript 方法可以正常工作，如果您总是希望它在同一个地方。在 mxml 中，我经常使用水平位置为 0 的基于约束的布局，因此它会像您期望的那样向左/向右移动。在 y 轴上，如果您真的想要以 0 为基数的额外空间，有时这是一个判断要求，所以如果情况需要，我有时会保持 Y 依赖于顶部。

然而，我使用的另一种方法是将按钮组或对象组放在 HGroup 或其他容器中，然后对该较大对象使用基于约束或基于像素的定位，因此其中的任何内容都不会改变大小，但对象组会重新定位到你想要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:57:47.737

使用相对值而不是固定像素。例如

```
 function resizeListener (e:Event):void  {

             button.x = stage.stageWidth / 2;

  } 
```

在 mxml 中，您可以使用像素或百分比值作为宽度。您也可以使用 percentWidth 属性！

这都是有据可查的[实时文档](http://livedocs.adobe.com/flex/3/html/help.html?content=size_position_3.html)

对于定位，您必须使其成为[基于约束的布局](http://livedocs.adobe.com/flex/3/html/help.html?content=size_position_5.html)

# django - 如何将 django settings.py 指向 mongoDB？

> ID：15191137
> 
> 赞同：0
> 
> 时间：2013-03-03T21:29:34.790
> 
> 标签：django, mongodb, django-nonrel, django-mongodb-engine

目前我`settings.py`看起来像这样

```
DATABASES = {
    'default': {
        'ENGINE': 'django_mongodb_engine',   
        'NAME': 'gb',                      
        'USER': '',                      
        'PASSWORD': '',                  
        'HOST': 'localhost',                      
        'PORT': '27017'                      
    }
} 
```

我使用的 django 版本是 1.4。问题是当我尝试`python manage.py syncdb`它时会引发以下错误

```
 db = dbs[DEFAULT_DB_ALIAS]
 KeyError: 'default' 
```

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:37:30.817

基本上，您需要使用 Django 的 fork 而不是 vanilla django。不幸的是，该站点现在对我来说已关闭，但 django non-rel mongodb_engine 的文档和教程在这里： http: [//www.django-mongodb.org/](http://www.django-mongodb.org/)或者您可以通过用户组联系，查看 github 上的项目页面[https： //github.com/django-nonrel/mongodb-engine](https://github.com/django-nonrel/mongodb-engine)

# javascript - 如果再次调用预加载器，是否会再次下载预加载的图像？

> ID：15191139
> 
> 赞同：1
> 
> 时间：2013-03-03T21:30:19.257
> 
> 标签：javascript, image, image-preloader

我正在建立一个网页抽认卡来帮助我的学习。当我提出问题时，会显示一个图像，当我选择回答时，会显示另一个图像。选择答案后，我无需等待答案图像下载，而是在显示问题图像后立即开始预加载答案图像。我的预加载器是：

```
function preloadImage(src) {
    var image = new Image();
    image.src = src;
} 
```

我的理解是，这会将图像文件缓存在浏览器中。通过将文件名分配给图像标签的 src 来显示图像文件。一旦图像文件与 Image() 对象相关联，那么当该文件被分配给 src 时，浏览器就会从缓存中提供图像。

如果我对我的回答感到满意，抽认卡将从牌组中取出，如果我对我的回答不满意，抽认卡将放回包中，稍后会被问到。

如果再次询问返回到卡片组的抽认卡，则将再次调用预加载以获取答案图像。

我的问题是：对我的预加载器的第二次和后续调用会导致从服务器下载文件以分配给新的 Image() 对象，还是会从浏览器缓存中读取。

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:35:48.750

取决于服务器配置。任何文件都可以设置为缓存或不缓存。大多数情况下，图像被设置为缓存很长时间，因此很有可能不会再次下载。我建议在可以播放之前预加载所有图像，或者至少预加载大部分图像，具体取决于您如何设置应用程序。这样，对用户的干扰很小。

更直接地说，不，对该方法的后续调用不会强制下载（假设服务器设置有正确的过期标头）。

# django - 数据库存储与应用程序逻辑

> ID：15191143
> 
> 赞同：1
> 
> 时间：2013-03-03T21:30:50.707
> 
> 标签：django, django-models

我正在开发一个应用程序，我可以选择在数据库中存储布尔值或能够从其他数据库查询中计算它？哪个是更好的选择？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:11:59.910

如果将其存储在**数据库**中：

**缺点**是：

*   当其他相关字段被更新或删除时（通过触发器或类似的东西），您可能必须更新它。
*   您的数据库中将有冗余数据。

**优点**是：

*   您的查询会更简单，更易读（一般来说，您的模型和代码的可读性和可维护性会提高）

*   您的查询会更快。

所以在考虑这些**问题**后决定：

*   您所说的领域是容易计算还是需要更复杂的过程来计算？（涉及例如连接或查询多个表）

*   值是否经常变化？相关字段是否经常更新？

*   数据是否如此庞大以至于冗余的布尔字段有什么不同？（不太可能）

# c - char 类型变量的内存分配

> ID：15191145
> 
> 赞同：-2
> 
> 时间：2013-03-03T21:30:59.690
> 
> 标签：c, gcc

我有以下代码：

```
int main() { 
     char x='a';
     printf("integer = %ld\ncharacter  = %ld\nx = %ld\n", sizeof(int),sizeof('a'),sizeof(x);  
     return 0;  
} 
```

输出是：

> 整数 = 4 个
> 字符 = 4
> x = 1

我的问题是，为什么***char 变量 x***的大小不等于***'a'***的大小。

实际上带来了什么不同？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:32:22.623

因为在 C 中，单字符常量（例如，`'a'`或`'0'`）的类型为`int`not `char`。这在 C++ 中是不同的，它们的类型是`char`.

# r - 使用 Hmisc 包 (R) 生成类似输出的 proc 报告 (SAS)？

> ID：15191147
> 
> 赞同：4
> 
> 时间：2013-03-03T21:31:01.883
> 
> 标签：r, hmisc

我一直在尝试使用 Hmisc 包来产生类似于下面的输出。

```
 Group
Step      Method                   G1           G2         G3 .......   

s1          m1          N          45            26         17
                       Min          2             2         3
                       Max          7             6         4
                       Mean         3.5          4.5        2.5
                       Sdev         2.6          3.6         1

            m2          N          
                       Min          
                       Max          
                       Mean        
                       Sdev  

s2          m1          N          
                       Min          
                       Max        
                       Mean         
                       Sdev        

            m2          N          
                       Min          
                       Max          
                       Mean        
                       Sdev 
```

我的原始数据如下所示。

```
 Site    Step  Method   Group   Outcome
        a1      s1     m1      g1      3.6
        a1      s1     m4      g1      2.3
        a2      s2     m1      g2      14
        a3      s1     m3      g1      7
        a3      s3     m6      g1      1
        a4      s1     m1      g3      6.2 
```

我正在尝试按步骤和方法计算每个组中所有站点结果的 n、min、mean、sdev 和 max。我使用这些网站作为我的唯一标识符。不是每个站点都有每个步骤，也不是每个步骤都有每个方法，因此存在缺失值。我一直在使用 Hmisc 包，并且能够使用 计算 n、均值、最小值和最大值`fun=summary`，但我只能单独为每种方法执行此操作，并且它显示在一个不太漂亮的矩阵中. 我知道这个包使用乳胶（我完全是新手），我已经使用了这个选项`summary(....,file="data.tex")`我认为是保存一个 .dvi 文件，我右键单击它并告诉它转换为 pdf，但是 pdf 在错误的位置查找数据时全部损坏。我真的不知道我做错了什么，因此非常感谢任何反馈/输入。干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T22:10:20.443

包中的`tabular`函数`tables`用于创建类似 SAS 的表。您可以尝试这样的事情（`dat`蜜蜂您的示例数据）：

```
library(tables)
(tab1 <- tabular(Step*Method*Heading()*Outcome*((n = 1) + min + max + mean + sd) ~ Group, 
        data = dat))

                  Group          
 Step Method      g1    g2   g3  
 s1   m1     n     1.0     0  1.0
             min   3.6   Inf  6.2
             max   3.6  -Inf  6.2
             mean  3.6   NaN  6.2
             sd     NA    NA   NA
      m3     n     1.0     0  0.0
             min   7.0   Inf  Inf
             max   7.0  -Inf -Inf
             mean  7.0   NaN  NaN
             sd     NA    NA   NA
             ...   ...   ...  ... 
```

为了进一步处理数据，例如使用乳胶，`latex(tab1)`创建格式良好的乳胶表格。

注意：您可以像这样轻松改进表格的格式：

```
tabular(Step*RowFactor(Method, levelnames = c("M1", "M2", "M3", "M4"), spacing = 1)*
                Heading()*Outcome*
                (Format()*(N= 1) + (Min = min) + (Max = max) + (Mean = mean) + 
                    (Sdev = sd)) ~ 
                Factor(Group, levelnames = c("G1", "G2", "G3")), 
        data = dat) 
```

也将其应用于所有站点是直截了当的，使用`tabular(Site*Step*...)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T21:35:50.883

我假设您不关心格式（可能不正确），您可以使用该`aggregate`功能:)

```
# run any function, grouped by whatever variables you want..
aggregate( Outcome ~ Step + Method + Group , data = x , summary )

# the summary function doesn't include standard deviations,
# so run that separately
aggregate( Outcome ~ Step + Method + Group , data = x , sd ) 
```

假设您的数据看起来像这样..

```
# read in your data
x <- read.table( h = T , text = "Site    Step  Method   Group   Outcome
        a1      s1     m1      g1      3.6
        a1      s1     m4      g1      2.3
        a2      s2     m1      g2      14
        a3      s1     m3      g1      7
        a3      s3     m6      g1      1
        a4      s1     m1      g3      6.2") 
```

如果它只是按组执行任务，请查看`?aggregate`并`?tapply`在将来包含`groupwise`在您的搜索词中。

如果你想在一行中运行它，你可以创建一个快速的自定义函数，它将`summary`输出与`sd`..

```
# alternatively, you can tack a standard deviation onto the summary function if you like..
swsd <- function( x ) c( summary( x ) , sd( x ) )

# ..and then run that through `aggregate` instead :)
aggregate( Outcome ~ Step + Method + Group , data = x , swsd ) 
```

# bash - 如何删除文件中的0？

> ID：15191166
> 
> 赞同：0
> 
> 时间：2013-03-03T21:32:48.690
> 
> 标签：bash

如何删除文件中不等于 0 的字符之前的所有空格？

例子

```
000545 - delete 000
0184 - delete 0
000000547 - delete 000000
005000  - delete 00 
```

谢谢你 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:35:33.660

一种`sed`方式：

```
$ echo '000545
> 0184
> 000000547
> 005000
> ' | sed 's/^0*//'
545
184
547
5000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:35:54.507

您可以使用[`sed`](http://unixhelp.ed.ac.uk/CGI/man-cgi?sed)

```
sed -e 's/^00*//' file.txt 
```

这将删除行首的所有`0`字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T21:54:02.990

不确定它是否会更慢，但无论如何都可以作为解决方案：

```
awk '{printf "%d\n", $1}' 
```

或明确：

```
awk '{print int($1)}' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T21:54:28.343

这是另一种变体，更通用，也应该适用于 OP 的情况。

这将删除所有前导零，但如果该行仅包含一个`0`或一组零，它将确保保留一个零而不是使其空白（其他答案确实如此）。如果此行为不是有意的，并且您只想清除所有仅包含零的行，请不要使用此解决方案。

```
sed 's#^0\+\([^0]\+.*$\|0$\)#\1#' file 
```

示例文件：

```
000545
0184
000000547
005000
000a
00000
0
0045b
067800abc 
```

输出：

```
545
184
547
5000
a
0
0
45b
67800abc 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-04T01:52:08.350

我最近偶然发现了 Perl 这个神秘的部分：`perl -pe 's/\G0//g'`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T23:43:14.380

另一个awk：

```
awk '{$1+=0}1' file 
```

# ios - 是否可以根据 Target 更改“初始视图控制器”？

> ID：15191167
> 
> 赞同：0
> 
> 时间：2013-03-03T21:32:56.627
> 
> 标签：ios, xcode, storyboard

我有一个 iOS 产品，它有几个不同的 SKU，每个 SKU 都应该从不同的视图控制器开始。我有由 Targets 分隔的不同 SKU，这允许我指定该产品版本所需的预处理器。

但是，我希望能够做的一件事是更改情节提要中的“初始视图控制器”值，以便构建不同的 SKU，而无需根据我的身份手动打开或关闭该框建造。

所以我的问题是，这可以通过目标还是以编程方式完成（所以我可以使用带有特定 SKU 预处理器的#ifdef 来做到这一点）？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:39:48.780

您必须使用情节提要中分配的标识符在代码中执行此操作。您可以创建一个目标定义头文件或`#ifdef`在 AppDelegate.m 的开头执行 s：

```
#ifdef TARGET_FOO
#define INITIAL_VC_ID @"FOO_ID"
[...] 
```

然后在您的应用程序委托中`application:didFinishLaunchingWithOptions:`您可以执行以下操作：

```
UIWindow *window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.window = window;

UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];

[window setRootViewController:[mainStoryboard instantiateViewControllerWithIdentifier:INITIAL_VC_ID]];

[window makeKeyAndVisible];

return YES; 
```

这要求您从项目的 Info.plist 中删除任何“主故事板”引用，因此 UIKit 默认不会加载它。

# android - 没有 JNI_OnLoad 并且没有来自本机函数的返回值？

> ID：15191171
> 
> 赞同：1
> 
> 时间：2013-03-03T21:33:12.183
> 
> 标签：android, linux, android-ndk, java-native-interface, native

我需要通过 C++ 代码从本机方法制作 linux 命令。

这是我的类**Test.java**

```
public class Test {
 static { System.loadLibrary("NDK1");  }
     public  native String exec(String cmd);
  } 
```

然后我通过这个命令创建标题 .h ：

```
$ javah -classpath ../bin/classes com.example.new1.Test 
```

在此之后，在此路径 com.example.new1 中创建标头 .h 然后我创建**jni** 文件并复制 .h 文件并创建 .cpp 文件并将 .h 包含在其中。

```
#include <string>
#include <iostream>
#include <stdio.h>
#include <jni.h>
 #include "com_example_new1_Test.h"

std::string exec(const char* cmd) {
FILE* pipe = popen(cmd, "r");
if (!pipe) return "ERROR";
char buffer[128];
std::string result = "";
while(!feof(pipe)) {
    if(fgets(buffer, 128, pipe) != NULL)
    result += buffer;
}
pclose(pipe);
return result; 
```

}

```
 JNIEXPORT jstring JNICALL Java_com_example_new1_Test_exec(JNIEnv* env, jobject javaThis , jstring cmd) {
const char * res;

    //res = env->GetStringUTFChars(cmd ) ;

   // const char* utf_string;
    jboolean isCopy;
    res = env->GetStringUTFChars(cmd, &isCopy);
    /* ... use string ... */
    if (isCopy == JNI_TRUE) {
        (env)->ReleaseStringUTFChars(cmd, res);
    }

std::string result = exec(res);
return (env)->NewStringUTF((const char* )result.c_str());
  } 
```

然后调用**NDK**

```
$ /cygdrive/c/android-ndk-r4/ndk-build
make: Warning: File `/cygdrive/c/android-ndk-r4/build/core/import-locals.mk' has      modification time 140582392 s in the future
Cygwin         : Generating dependency file converter script
Compile++ thumb  : NDK1 <= NDK1.cpp
   Prebuilt       : libgnustl_static.a <= <NDK>/sources/cxx-stl/gnu-   libstdc++/4.6/libs/armeabi/
 SharedLibrary  : libNDK1.so 
 Install        : libNDK1.so => libs/armeabi/libNDK1.so
 Compile++ thumb  : NDK1 <= NDK1.cpp
 Prebuilt       : libgnustl_static.a <= <NDK>/sources/cxx-stl/gnu-   libstdc++/4.6/libs/armeabi-v7a/
 SharedLibrary  : libNDK1.so
Install        : libNDK1.so => libs/armeabi-v7a/libNDK1.so
 make: warning:  Clock skew detected.  Your build may be incomplete. 
```

当我运行我的应用程序时，没有发生错误或异常，但本机方法没有返回值！这是运行的日志

```
03-03 22:59:55.343: E/SpannableStringBuilder(9257): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-03 22:59:55.343: E/SpannableStringBuilder(9257): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-03 23:00:08.527: E/Trace(9852): error opening trace file: No such file or directory (2)
03-03 23:00:08.717: D/libEGL(9852): loaded /system/lib/egl/libEGL_mali.so
03-03 23:00:08.727: D/libEGL(9852): loaded /system/lib/egl/libGLESv1_CM_mali.so
03-03 23:00:08.727: D/libEGL(9852): loaded /system/lib/egl/libGLESv2_mali.so
03-03 23:00:08.747: D/OpenGLRenderer(9852): Enabling debug mode 0
03-03 23:00:21.960: D/dalvikvm(9852): Trying to load lib /data/data/com.example.new1/lib/libNDK1.so 0x41a1d8f8
03-03 23:00:21.980: D/dalvikvm(9852): Added shared lib /data/data/com.example.new1/lib/libNDK1.so 0x41a1d8f8
03-03 23:00:21.980: D/dalvikvm(9852): No JNI_OnLoad found in /data/data/com.example.new1/lib/libNDK1.so 0x41a1d8f8, skipping init 
```

> > 问题是什么 ？顺便说一句，我将“iwconfig”作为linux命令传递，这取决于命令是什么？我还需要 AndroidManifest 的任何许可吗？

# c# - 无法解密我用 BouncyCastle C# 加密的 OpenPGP 数据

> ID：15191172
> 
> 赞同：3
> 
> 时间：2013-03-03T21:33:15.930
> 
> 标签：c#, bouncycastle, pgp

我正在尝试使用 BouncyCastle 使用 OpenPGP 加密字符串（不是文件）。我使用 GPG4win (Kleopatra) 生成了一个公钥/私钥对进行测试。我的代码有效，并输出了加密文件，但是我无法使用 Kleopatra 再次解密该文件。我收到一条消息：“无法确定这是 OpenPGP 还是 S/MIME 签名 - 也许它根本就不是签名？”。

这是我用来加密文件的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;
using Org.BouncyCastle;
using Org.BouncyCastle.OpenSsl;
using Org.BouncyCastle.Crypto;
using Org.BouncyCastle.Crypto.Engines;
using Org.BouncyCastle.Security;
using Org.BouncyCastle.Bcpg;
using Org.BouncyCastle.Bcpg.OpenPgp;
namespace RXNet
{
public static class Encrypter //Inspired by http://blogs.microsoft.co.il/blogs/kim/archive/2009/01/23/pgp-zip-encrypted-files-with-c.aspx
{
    private const int BUFFER_SIZE = 1 << 16;
    public static string EncryptPackAndBase64(string strdata, string keyString)
    {
        if (strdata.Length == 0)
            throw new ArgumentException("A blank string was provided.");
        //Extract the key from PGP format
        PgpPublicKey enckey = readPublicKeyFromString(keyString);

        Stream outputStream = new MemoryStream(); 
        MemoryStream dataStream = new MemoryStream(Encoding.Unicode.GetBytes(strdata));

        using (Stream encryptedOut = ChainEncryptedOut(outputStream, enckey))
        using (Stream compressedOut = ChainCompressedOut(encryptedOut))
        {

            //PgpSignatureGenerator signatureGenerator = InitSignatureGenerator(compressedOut);

            using (Stream literalOut = ChainLiteralOut(compressedOut, dataStream.Length))
            {
                WriteOutput(literalOut, dataStream);
            }
            return System.Convert.ToBase64String(((MemoryStream)outputStream).ToArray());
        }

    }

    private static byte[] ReadFully(Stream input)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            input.CopyTo(ms);
            return ms.ToArray();
        }
    }

    private static PgpPublicKey readPublicKeyFromString(string base64str)
    {
        byte[] key = System.Convert.FromBase64String(base64str);
        using (Stream keyIn = new MemoryStream(key))
        using (Stream inputStream = PgpUtilities.GetDecoderStream(keyIn))
        {

            PgpPublicKeyRingBundle publicKeyRingBundle = new PgpPublicKeyRingBundle(inputStream);

            PgpPublicKey foundKey = getFirstPublicKey(publicKeyRingBundle);

            if (foundKey != null)
                return foundKey;

        }

        throw new ArgumentException("No encryption key found in public key ring.");
    }

    private static PgpPublicKey getFirstPublicKey(PgpPublicKeyRingBundle publicKeyRingBundle)
    {

        foreach (PgpPublicKeyRing kRing in publicKeyRingBundle.GetKeyRings())
        {

            PgpPublicKey key = kRing.GetPublicKeys()
                .Cast<PgpPublicKey>()
                .Where(k => k.IsEncryptionKey)
                .FirstOrDefault();

            if (key != null)
                return key;

        }

        return null;

    }

    private static Stream ChainCompressedOut(Stream encryptedOut)
    {

        PgpCompressedDataGenerator compressedDataGenerator =

            new PgpCompressedDataGenerator(CompressionAlgorithmTag.Zip);

        return compressedDataGenerator.Open(encryptedOut);

    }

    private static Stream ChainEncryptedOut(Stream outputStream, PgpPublicKey key)
    {

        PgpEncryptedDataGenerator encryptedDataGenerator;

        encryptedDataGenerator =

            new PgpEncryptedDataGenerator(SymmetricKeyAlgorithmTag.Cast5, new SecureRandom());

        encryptedDataGenerator.AddMethod(key);

        return encryptedDataGenerator.Open(outputStream, new byte[BUFFER_SIZE]);

    }

    private static Stream ChainLiteralOut(Stream compressedOut, long length)
    {

        PgpLiteralDataGenerator pgpLiteralDataGenerator = new PgpLiteralDataGenerator();

        return pgpLiteralDataGenerator.Open(compressedOut, PgpLiteralData.Binary, PgpLiteralData.Console, length, DateTime.Now);

    }

    private static void WriteOutput(Stream literalOut, Stream inputStream)
    {

        int length = 0;

        byte[] buf = new byte[BUFFER_SIZE];

        while ((length = inputStream.Read(buf, 0, buf.Length)) > 0)
        {

            literalOut.Write(buf, 0, length);

        }

    }
}
} 
```

然后我将其称为如下：

```
string encc = Encrypter.EncryptPackAndBase64("Test 123 123 123", @"mQENBFEznzsBCADIg9CTEJygWls+b+pGqFcD9rx8XjGfo9l513Av0GpDKuCEaP+Dq4A1wox3RcK/
GgPJFUR2uKOTjOR9DLOoUewOhbej4jD/k1I3Hy6uybICqy6Og2lnntErNT06qwRZZyTvgcWbIHzv
W3+RxursLPD6fHC1pf2FuiMTqM0Q11Y3CRn7auLu4EXUjYzNCSYUZNcPpAlh+GOmIuILUsZDpgks
qnEh3Bhzv+nhL8lgwUfmnGfUBjTTuVqqymoAIFZx1eJBBZiDdrMBX4uAxSjk6YI2fGcscvUOapyk
52FG58q8mAlxX+Ys8F60mm2A3kcMerkJQl5rQ5GTPGarTJ+Xn2oLABEBAAG0Ik1hdHQgSmFkY3ph
ayA8bWF0dEB3cGFuZGJhY29uLmNvbT6JATgEEwECACIFAlEznzsCGw8GCwkIBwMCBhUIAgkKCwQW
AgMBAh4BAheAAAoJEMMjybDZ/OUoT6sH/iw46MEWsc1A8447OUQ/7dqZpBrVXQZUzMkf7V/v/9bP
A0Zh5VTcvwRGBawOZGfML1uMGEuiVOS0y1zy7YAWNs4qUkmCIWg4CBwWRpGFu2aBMK70rsRRoNFO
GHYVVFwB7cS5qFZ2JUzI+SJb6BszV35TEeL1U/vkANRq3WSgDMCaHtWQbefVZ/3d4RYvBKujrASX
KoAcIMQAMRR9if994gxRSs9m3BbB8snNB8QT40cGG5HeOiaYBsxFV8leOpd34NzOfVr5KxeB/qm9
BdU8HW76FD+XPMONCCwCxZSRljUxcGzMPKZPb0OKaRFRXHcqvkd4SCJ6n1OGOcbeLdaXqFw=");
            FileStream st = new FileStream(@"D:\enc.bin", FileMode.Create, FileAccess.Write);
            var b = Convert.FromBase64String(encc);
            st.Write(b, 0, b.Length);
            st.Close(); 
```

在完整的环境中，我将获取作为 Base64 字符串的键，这就是我这样传递它的原因。我尝试使用装甲版本的钥匙，但没有用；这是我手动进行 Base64 处理的二进制版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-04T21:17:33.533

[在验证通过Kleopatra](http://www.gpg4win.org/)中的 Bouncy Castle 加密的文件时，我遇到了同样的错误。

我的解决方案是用`.gpg`扩展名重命名加密文件。

# sqlite - MAMP Pro 中的 SQLiteManger 面板给了我空白页

> ID：15191173
> 
> 赞同：0
> 
> 时间：2013-03-03T21:33:22.873
> 
> 标签：sqlite, mamp, administration, sqlitemanager

我最近开始研究通过 GUI 管理 SQLite 数据库，并想尝试与 MAMP Pro 捆绑在一起的 SQLite Manager，但是尝试从其面板（通过“Webstart”）访问该工具会给我一个空白页。我假设它将以与 PhpMyAdmin 相同的方式进行预配置，关于从哪里开始有什么想法吗？使用 MAMP Pro 1.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T07:13:30.187

似乎您使用的 PHP 版本太新。尝试在 MAMP 中使用较低版本的 PHP。这为我修好了。

KK

# assembly - AX、AH、AL 如何映射到 EAX？

> ID：15191178
> 
> 赞同：47
> 
> 时间：2013-03-03T21:33:38.210
> 
> 标签：assembly, x86, cpu-registers

我对 x86 寄存器的理解是，每个寄存器都可以被整个 32 位代码访问，并且它被分成多个可访问的寄存器。

在这个例子`EAX`中是一个 32 位寄存器，如果我们调用`AX`它应该返回前 16 位，如果我们调用`AH`or`AL`它应该返回 16 位之后的下一个 8 位并且`AL`应该返回最后 8 位。

所以我的问题，因为我并不真正相信这就是它的运作方式。如果我们存储 32 位值，也就是`EAX`存储：

```
0000 0100 0000 1000 0110 0000 0000 0111 
```

所以如果我们访问`AX`它应该返回

```
0000 0100 0000 1000 
```

如果我们阅读`AH`它应该返回

```
0000 0100 
```

当我们阅读`AL`它应该返回

```
0000 0111 
```

它是否正确？如果它是`AH`真正具有什么价值？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-03-03T21:37:23.360

不，这不太对。

```
EAX is the full 32-bit value
AX is the lower 16-bits
AL is the lower 8 bits
AH is the bits 8 through 15 (zero-based) 
```

所以 AX 由 AH:AL 两半组成，它本身就是 EAX 的低半部分。（EAX 的上半部分不能作为 16 位寄存器直接访问；如果你想得到它，你可以移位或旋转 EAX。）

为了完整起见，除了上述基于 32 位 CPU 的内容外，64 位 Intel/AMD CPU 还具有

```
RAX, which hold a 64-bit value, and where EAX is mapped to the lower 32 bits. 
```

所有这些也适用于 EBX/RBX、ECX/RCX 和 EDX/RDX。其他寄存器如 EDI/RDI 有一个 DI 低 16 位部分寄存器，但没有高 8 部分，低 8 DIL 只能在 64 位模式下访问：[64 位架构中的汇编寄存器](https://stackoverflow.com/questions/20637569/assembly-registers-in-64-bit-architecture)

* * *

**由于历史原因，**写入 AL、AH 或 AX 会使完整 AX/EAX/RAX 中的其他字节保持不变。**例如，它必须将一个新的 AL 合并到完整的 RAX 中。（在 32 位或 64 位代码中，如果您不特别想要这种合并，请首选 a`movzx eax, byte [mem]`或load：[为什么 GCC 不使用部分寄存器？](https://stackoverflow.com/questions/41573502/why-doesnt-gcc-use-partial-registers)）`movzx eax, word [mem]`**

 ****将 EAX 零扩展写入 RAX**。（[为什么 32 位寄存器上的 x86-64 指令将整个 64 位寄存器的上半部分归零？](https://stackoverflow.com/questions/11177137/why-do-x86-64-instructions-on-32-bit-registers-zero-the-upper-part-of-the-full-6)）

同样，所有这些都适用于每个寄存器，而不仅仅是 RAX。例如，写入 DI 或 DIL 会合并到旧 RDI，写入 EDI 零扩展并覆盖整个 RDI。对于 R10B 或 R10W 写入合并相同，写入 R10D 使 R10 独立于旧的 R10 值。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-03-03T21:38:10.130

AX 是 EAX 的低 16 位。AH 是 AX 的高 8 位（即 EAX 的 8-15 位），AL 是 EAX 和 AX 的最低有效字节（0-7 位）。

示例（十六进制数字）：

```
EAX: 12 34 56 78
AX: 56 78
AH: 56
AL: 78 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2018-10-19T12:50:03.797

```
| 0000 0001 0010 0011 0100 0101 0110 0111 | ------> EAX

|                     0100 0101 0110 0111 | ------> AX

|                               0110 0111 | ------> AL

|                     0100 0101           | ------> AH 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-26T11:12:43.727

不，你的答案是错误的

Al 和 Ah 的选择来自 AX 而不是来自 EAX

例如

```
EAX=0000 0000 0000 0000 0000 0000 0000 0111 
```

所以如果我们调用 AX 它应该返回

```
0000 0000 0000 0111 
```

如果我们调用 AH 它应该返回

```
0000 0000 
```

当我们调用 AL 它应该返回

```
0000 0111 
```

示例编号 2

```
EAX: 22 33 55 77
AX: 55 77
AH: 55    
AL: 77 
```

示例 3

```
EAX: 1111 0000 0000 0000 0000 0000 0000 0111    
AX= 0000 0000 0000 0111
AH= 0000 0000
AL= 0000 0111 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-03T21:37:31.150

否——AL 是 AX 的 8 个最低有效位。AX 是 EAX 的 16 个最低有效位。

如果我们从 eax 中的 04030201h 开始，也许最容易处理。在这种情况下，AX 将包含 0201h，AH 将包含 02h，AL 将包含 01h。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-11-28T03:40:59.403

下面的代码片段使用 GDB 检查 EAX。

```
 (gdb) info register eax
    eax            0xaa55   43605
    (gdb) info register ax
    ax             0xaa55   -21931
    (gdb) info register ah
    ah             0xaa -86
    (gdb) info register al
    al             0x55 85 
```

1.  EAX - 完整的 32 位值
2.  AX - 低 16 位值
3.  AH - 8 到 15 位
4.  AL - EAX/AX 的低 8 位**

# mysql - 如何从 MySQL 语句中获取所有数据？

> ID：15191181
> 
> 赞同：0
> 
> 时间：2013-03-03T21:33:47.820
> 
> 标签：mysql, join

在这份声明中，我的一些数据没有出来。特别是那些在哪里`retaurant_id = 0`。是因为，在我的身上没有什么可比的`entry_id`吗？

**MySQL**

```
"SELECT em.*, t.*, cd.*, ct.*, emd.*
FROM exp_members as em
Inner JOIN transactions as t on (em.member_id = t.cardid-10000000)
Inner JOIN exp_channel_titles as ct on (t.restaurant_id = ct.entry_id)
Inner JOIN exp_channel_data as cd on (ct.entry_id = cd.entry_id)
inner join exp_member_data as emd on em.member_id = emd.member_id
WHERE em.member_id = '".$_GET['cardid']."'" 
```

**电流输出**

```
Rest_navn   City        Postcode
San Remo    Roskilde    4000 
```

**期望的输出**

```
TransID    Rest_navn    City          Postcode
4214       San Remo     Roskilde      4000 
4212       0            0             0
4211       0            0             0 
```

你可以看到还有更多的数据要出来；但它不会出来。

我已经尝试更改`where`声明，但没有任何反应。

我的一些数据没有出现在这个声明中。特别是那些在哪里`retaurant_id = 0`。

是因为`t.restaurant_id = null`在这一行吗？

```
Inner JOIN exp_channel_titles as ct on (t.restaurant_id = ct.entry_id) 
```

它与我的`entry_id`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:35:23.213

听起来您需要使用 a `LEFT JOIN`-- 它不会返回 0，但会返回 NULL -- 如果需要，您可以使用`IFNULL`or`COALESCE`返回 0：

```
"SELECT em.*, t.*, cd.*, ct.*, emd.*
FROM exp_members as em
   LEFT JOIN transactions as t on (em.member_id = t.cardid-10000000)
   LEFT JOIN exp_channel_titles as ct on (t.restaurant_id = ct.entry_id)
   LEFT JOIN exp_channel_data as cd on (ct.entry_id = cd.entry_id)
   LEFT join exp_member_data as emd on em.member_id = emd.member_id
WHERE em.member_id = '".$_GET['cardid']."'" 
```

要获得 0 作为值而不是 NULL，这样的事情应该会有所帮助（不确定您的表结构）

```
SELECT COALESCE(Rest_navn,'0') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:37:08.560

我认为你想要外连接，从事务表开始：

```
SELECT em.*, t.*, cd.*, ct.*, emd.*
FROM transactions as t
     left outer JOIN exp_members as em on (em.member_id = t.cardid-10000000)
     left outer JOIN exp_channel_titles as ct on (t.restaurant_id = ct.entry_id)
     left outer JOIN exp_channel_data as cd on (ct.entry_id = cd.entry_id)
     left outer join exp_member_data as emd on em.member_id = emd.member_id
WHERE em.member_id = '".$_GET['cardid']."'" 
```

第一个join, between `transactions`and`exp_members`可以写成inner join，因为这个`where`子句会消除outer join带来的额外记录。但是，我认为保持所有连接相同并从您想要所有记录的表开始是最安全的方法。

# javascript - 将字符串时间转换为毫秒

> ID：15191184
> 
> 赞同：5
> 
> 时间：2013-03-03T21:34:06.493
> 
> 标签：javascript, datetime, d3.js, timestamp, milliseconds

我有一组单独的 json 数据，它们每个都有一个时间戳，用于以这种确切的格式创建它，例如

```
 [ {"Name": "Jake", "created":"2013-03-01T19:54:24Z" },
   {"Name": "Rock", "created":"2012-03-01T19:54:24Z" } ] 
```

因此，我希望在一个函数中使用“created”，该函数计算如果数据是从今天起 60 天或更短时间输入的，它将以斜体显​​示。但是，我尝试的功能没有效果。我正在尝试以毫秒为单位进行计算：

```
 node.append("text")
    .text(function(d) { return d.Name; })
    .style("font", function (d)
           { var date = new Date(d.created);
             var k = date.getMilliseconds;
             var time = new Date ();
             var n = time.getTime();

       if(k > (n - 5184000) )  {return " Arial 11px italic"; }
                     else { return " Arial 11px " ; }

        }) 
```

我很好奇我是否真的将数据转换为毫秒。另外，如果我以毫秒为单位获得今天的日期。

提前致谢

编辑：示例 - [http://jsfiddle.net/xwZjN/84/](http://jsfiddle.net/xwZjN/84/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-03T21:40:50.090

要获取像您这样的日期字符串的纪元以来的毫秒数，请使用[`Date.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)：

```
// ...
var k = Date.parse( d.created );
// ... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-04-18T15:38:19.650

```
let t = "08:30"; // hh:mm
let ms = Number(t.split(':')[0]) * 60 * 60 * 1000 + Number(t.split(':')[1]) * 60 * 1000;
console.log(ms);
```

```
let t = "08:30"; // mm:ss
let ms = Number(t.split(':')[0]) * 60 * 1000 + Number(t.split(':')[1]) * 1000;
console.log(ms);
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-08-16T11:45:29.880

按照程序解决，

```
var t = "08:00";
var r = Number(t.split(':')[0])*60+Number(t.split(':')[1])*1000;
console.log(r)
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-24T14:40:51.100

```
var timeInString = "99:99:99:99"; // Any value here
var milliseconds;
if (timeInString.split(":").length === 2) {
  /* For MM:SS */
  milliseconds =
    Number(timeInString.split(":")[0]) * 60000 +
    Number(timeInString.split(":")[1]) * 1000;
} else if (timeInString.split(":").length === 3) {
  /* For HH:MM:SS */
  milliseconds =
    Number(timeInString.split(":")[0]) * 3600000 +
    Number(timeInString.split(":")[1]) * 60000 +
    Number(timeInString.split(":")[2]) * 1000;
} else if (timeInString.split(":").length === 4) {
  /* For DD:HH:MM:SS */
  milliseconds =
    Number(timeInString.split(":")[0]) * 86400000 +
    Number(timeInString.split(":")[1]) * 3600000 +
    Number(timeInString.split(":")[2]) * 60000 +
    Number(timeInString.split(":")[3]) * 1000;
}

console.log(`Milliseconds in ${timeInString} - ${milliseconds}`); 
```

# ajax - Symfony2 Ajax 上传

> ID：15191191
> 
> 赞同：1
> 
> 时间：2013-03-03T21:35:14.397
> 
> 标签：ajax, symfony, symfony-2.1

我正在尝试使用 ajax 调用上传文件，但是当我去保存时，我只保存了与 anagrafic 的关系。我声明，如果我尝试保存正常工作。

就好像它没有加载对象 UploadFile！我根据 symfony 食谱[http://symfony.com/doc/2.1/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/2.1/cookbook/doctrine/file_uploads.html) 在我的控制器中创建了表格

```
public function fileCreateAction($id)
{
    $em = $this->getDoctrine()->getManager();

    $entity = $em->getRepository('MyBusinessBundle:Anagrafic')->find($id);
    $media = new Multimedia();
    $form = $this->createForm(new MultimediaType(), $media);

    if ($this->getRequest()->isMethod('POST')) {
        $form->bind($this->getRequest());
        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();

            $media->setAnagrafic($entity);
            $em->persist($media);
            $em->flush();

            $response = new Response();
        $output = array('success' => true);
        $response->headers->set('Content-Type', 'application/json');
        $response->setContent(json_encode($output));
        }
    } 
```

我试图做一个 var_dump 的 var_dump($media); 并返回：

```
object(My\BusinessBundle\Entity\Multimedia)[337]
  private 'id' => null
  private 'percorso' => null
  private 'alt' => null
  private 'type' => null
  public 'file' => null
  private 'anagrafic' => null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:16:39.417

我不明白为什么.. 但是如果我使用插件 jquery [https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)来传递文件，我会得到正确的文件，我可以继续使用烹饪书！我的解决方案：

```
public function fileCreateAction($id)
{
    $em = $this->getDoctrine()->getManager();

    $entity = $em->getRepository('MyBusinessBundle:Anagrafic')->find($id);
    $media = new Multimedia();
    $form = $this->createForm(new MultimediaType(), $media);

    $request = $this->getRequest();
    if ($request->isMethod('POST')) {
        $form->bind($request);
        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $media->setAnagrafic($entity);
            $em->persist($media);
            $em->flush();

            if ($request->isXmlHttpRequest()) {
                $response = new Response();
                $output = array('success' => true);
                $response->headers->set('Content-Type', 'application/json');
                $response->setContent(json_encode($output));

                return $response;
            } else {
                return $this->redirect($this->generateUrl('user_img', array('id' => $entity->getId())));
            }

    } else {
    if ($request->isXmlHttpRequest()) {
        $errors = $form->get('file')->getErrors();
        $response = new Response();
        $output = array('success' => false, 'errors' => $errors[0]->getMessage());
        $response->headers->set('Content-Type', 'application/json');
        $response->setContent(json_encode($output));

        return $response;
    }
    }
    } 
```

给定双重调用-> isXmlHttpRequest() 将是重构，但这个概念有效！我忘了..如果您将输入文件设置为“多个”，则会为每个文件发出请求！

解决了！

# c++ - PBO 的竞赛条件

> ID：15191192
> 
> 赞同：0
> 
> 时间：2013-03-03T21:35:15.960
> 
> 标签：c++, opengl, race-condition, pbo

我在 OpenGL 中读到了一些关于 PBO 的内容，我收到了一个关于竞态条件的问题。

让我们看下面的例子：我有两个 PBO，我想将它们的像素数据轮流传输到一个纹理对象。因此，当我为一个 PBO 启动异步像素传输时，我可以立即使用 CPU 执行其他操作，同时在后台传输像素数据。现在我对第二个 PBO 进行一些像素操作，完成后我想将像素从第二个 PBO 转移到纹理对象。但是，如果第一个 PBO 的转让还没有完成怎么办？就像在第一个示例中一样：http: [//www.songho.ca/opengl/gl_pbo.html](http://www.songho.ca/opengl/gl_pbo.html)

```
index = (index + 1) % 2;
nextIndex = (index + 1) % 2;

glBindTexture(GL_TEXTURE_2D, textureId);
glBindBufferARB(GL_PIXEL_UNPACK_BUFFER_ARB, pboIds[index]);

glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, WIDTH, HEIGHT, GL_BGRA, GL_UNSIGNED_BYTE, 0); 
```

glTextSubImage2D() 将立即返回，当第一个 PBO 的数据传输到 GPU 时，我可以开始处理第二个 PBO。如果在第一次传输完成之前到达 glTexSubImage()（现在应该传输第二个 PBO 的像素数据）怎么办？它会导致 CPU 停顿周期吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:08:07.900

OpenGL 将引入一个同步点，并确保进一步的异步操作不会影响以前调用使用修改后的 OpenGL 对象安排的任何操作。

> 如果在第一次传输完成之前到达 glTexSubImage()（现在应该传输第二个 PBO 的像素数据）怎么办？

没有什么意外。在调用 glTexSubImage 之后安排的所有调用都将使用修改后的数据。在它使用未修改数据之前安排的所有调用。OpenGL 规范要求这样做。

> 它会导致 CPU 停顿周期吗？

它可能会，也可能不会。OpenGL 没有指定这一点。

# java - 如何让我的 JSF 项目找到我的 css 文件？

> ID：15191193
> 
> 赞同：-1
> 
> 时间：2013-03-03T21:35:20.763
> 
> 标签：java, jsf, path

我在这个目录中有一个css文件：

> D:\JavaProjects\MyGuessNumber\web\resources\css\bootstrap.css

在我的 index.xhtml 文件中，我有：

```
<h:outputStylesheet library="css" name="bootstrap.css" /> 
```

当我运行此应用程序时：

```
localhost:8080/MyGuessNumber 
```

css 文件加载得很好。

当我使用：

```
http://localhost:8080/MyGuessNumber/faces/index.xhtml 
```

CSS仍然存在。

但是当我这样做时：

```
http://localhost:8080/MyGuessNumber/index.xhtml 
```

页面加载，但没有CSS？我怎样才能使这项工作？

**编辑：我正在使用：/faces/***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:07:10.207

如果没有 /faces/，此 URL：

```
http://localhost:8080/MyGuessNumber/index.xhtml 
```

不会被处理：

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet> 
```

因为您已在 web.xml 文件中指定：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

JSF2 不会从以下位置生成 HTML：

```
<h:outputStylesheet name="css/bootstrap.css" /> 
```

  即使您在页面 index.xhtml 中编写代码，我认为它也不会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:44:42.753

您可以通过在 index.html 中添加以下内容来使其工作，

```
<link rel="stylesheet" type="text/css" href="/resources/css/bootstrap.css"/> 
```

# php - PHPExcel 创建“不可读的内容”

> ID：15191199
> 
> 赞同：1
> 
> 时间：2013-03-03T21:35:41.357
> 
> 标签：php, phpexcel

我尝试了大约 1000 种不同的方法来解决这个问题。感谢其他人是否可以发现问题。

我有使用 PHPExcel 生成多个 Excel 工作表并将它们保存到磁盘的代码。

使用 MS Excel 2010 打开从第二个文件开始的所有内容时，我收到错误消息“Excel 在 FILENAME 中发现不可读的内容。您要恢复此工作簿的内容吗？” 该文件已“恢复”并且工作正常。在 OPen Office 中打开不会产生任何错误。

这是代码的简化版本。

```
<?php
$filenames = array("filenames go here");

$sheet1 = PHPExcel_IOFactory::load($template1);
$writer1 = new PHPExcel_Writer_Excel2007($sheet1);
$writer1->save('somefilename.xlsx');
//This file opens without problem
$sheet1->disconnectWorksheets();
unset($sheet1);
unset($writer1);

$i = 0;
foreach($filenames as $file){
    $template = "template2.xlsx";
    $fileName = 'filename' . $i . ' .xlsx';
    $spreadsheet = PHPExcel_IOFactory::load($template);
    $objWriter = new PHPExcel_Writer_Excel2007($spreadsheet);
    $objWriter->save($fileName);
    $spreadsheet->disconnectWorksheets();
    unset($spreadsheet);
    //This file throws error when opened in Excel 2007+
    $i++;
 }
?> 
```

我检查了以下内容：

1.  没有明显的 php 错误消息、空格或无关输入会破坏文件。
2.  模板文件在 Excel 2010 中打开良好。
3.  我尝试过使用不同的 PHPExcel 编写器方法，但它们都会产生相同的问题。

真正的代码做了一大堆额外的东西，但我已经通过注释它来检查它是否不负责任。上面的代码似乎是唯一可能引入问题的地方。

任何建议都非常感激。

====已编辑==== 这是 Excel 生成的错误日志：

```
<?xml version="1.0" encoding="UTF-8" standalone="true"?>
-<recoveryLog xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
     <logFileName>error049120_01.xml</logFileName>
     <summary>Errors were detected in file 'C:\Users\USERNAME\AppData\Local\Temp\FILENAME.xlsx'</summary>
     -<additionalInfo>
           <info>Excel completed file level validation and repair. Some parts of this workbook may have been repaired or discarded.</info>
     </additionalInfo>
</recoveryLog> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-11-18T15:43:44.840

我的文件中出现了类似的错误，并遵循了 Andrey Yanko 发布的建议，但是我仍然收到类似的错误。我在另一篇文章中找到了建议[并](https://stackoverflow.com/questions/10806617/excel-found-unreadable-content-warning-when-opening-excel-files-made-with-phpe)添加了一个

> “出口;”

在我的脚本结束时，这有助于消除剩余的错误

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-29T07:36:06.597

此错误与 php.ini 中的配置 mbstring.func_overload 有关。您可以使用解决方法来避免此错误 - 只需在脚本开头添加：

```
if (function_exists('mb_internal_encoding')) {
    $oldEncoding=mb_internal_encoding();
    mb_internal_encoding('latin1');
} 
```

最后：

```
if (function_exists('mb_internal_encoding'))
    mb_internal_encoding($oldEncoding); 
```

它帮助了我，所以，我相信它也会帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T21:52:42.560

明显的问题：

```
$sheet1 = PHPExcel_IOFactory::load($template1);
$writer1 = new PHPExcel_Writer_Excel2007($sheet1);
$writer1->save(sheet1); 
```

`save($sheet1)`- $sheet1 不是一个文件名，它是一个 PHPExcel 对象，一个完整的工作簿...... save 方法需要你想要保存的文件名作为它的参数

```
foreach($filenames as $file){
    $template = "template2.xlsx";
    $fileName = 'filename.xlsx';
    $spreadsheet = PHPExcel_IOFactory::load($template);
    $objWriter = new PHPExcel_Writer_Excel2007($spreadsheet);
    $objWriter->save($fileName);
    $spreadsheet->disconnectWorksheets();
    unset($spreadsheet);
} 
```

每个循环使用相同的文件名保存，覆盖以前迭代的任何保存

如果 MS Excel 抱怨内容不可读，但仍打开文件，它通常会告诉您丢弃了什么以使文件可读......但不知道该消息或查看实际文件的副本，无法提供帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T21:37:00.527

可能是您将其保存为`.xls`不保存`.xlsx`吗？

打开一个新的`.xlsx`，重命名为 have `.xls`，给了我一个类似的警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T22:02:03.183

看来此错误与我用作“模板”的单个 xlsx 文件有关。当使用另一个文件作为模板时，代码可以正常工作。

原始模板似乎没有损坏，所以 PHPExcel 的某个地方引起了问题，但不确定在哪里。

# javascript - 在 IE 和 Chrome 中按下浏览器后退按钮后，Jquery 复选框检查失败

> ID：15191200
> 
> 赞同：0
> 
> 时间：2013-03-03T21:35:42.193
> 
> 标签：javascript, jquery, browser

我有 asp.net 页面有复选框。

如果我选中复选框并转到不同的页面并使用浏览器的**后退按钮返回第一页，****则尽管选中了复选框**，但 Chrome 和 IE 中的以下 jquery 代码会失败。

```
 $('#keywordsdiv input[type=checkbox]').each(function () {
     attarr += this.checked ? "," + $(this).val() : "";
 }); 
```

这在 FF 中完美运行。

如果我从页面调用该函数，此脚本也适用于 Chrome 和 IE。

我已经确认 Chrome 和 IE 运行代码块，但他们认为复选框未选中，尽管它已选中。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:47:07.113

在没有看到其余代码的情况下有点长镜头，但是您可以将其包含在 document.ready() 语句中吗？这将确保在您尝试访问其中的复选框之前加载页面的其余部分。

IE：

```
$(document).ready(function(){
    .... your code ...        

    $('#keywordsdiv input[type=checkbox]').each(function () {
        attarr += this.checked ? "," + $(this).val() : "";
    });

    ... your code ...
}); 
```

# ember.js - 使用 ember-data 或 ajax 调用

> ID：15191207
> 
> 赞同：2
> 
> 时间：2013-03-03T21:36:17.200
> 
> 标签：ember.js, ember-data

我正在寻找一些关于是否使用 ember-data 的建议。我的偏好是使用它，但它也必须有意义。

我的主要记录集是经纬度记录，需要在地图上显示。我得到的记录将取决于地图的视口。理想情况下，如果视口发生变化，我会加载新记录，但也会从存储中删除一些记录（那些不再显示的记录）。

我只会从后端获取记录。我永远不会在需要保存的前端创建新的纬度/经度记录。

使用 ember-data 是否明智，还是使用简单的 ajax 调用会更好？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:58:57.187

我认为你应该使用简单的 ajax 调用。我的理解是，当您通过 id 查询记录或在前端创建记录时，ember 数据非常方便。实际上 ember 并不要求您使用 ember-data。在你的情况下，这似乎没有意义。我自己已经使用 emberjs 实现了一个谷歌地图，当用户拖动标记时，它会获取新的点以显示在地图上。在开发过程中我从未想过，我应该拥有用户 ember-data。

只是我的 2 美分 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:22:43.507

毫无疑问，ajax 调用在短期内会更容易，尤其是在它们非常简单的情况下。也就是说，Ember Data 的重点不仅仅是简化数据检索，它还可以抽象出后端的细节。稍后说您的 API 更改，或者您决定从 websocket 加载数据。使用 Ember Data，您只需要编写一个新的适配器，其余代码保持完全相同。深思熟虑。

# php - 知道你在 PayPal 上卖什么吗？

> ID：15191208
> 
> 赞同：2
> 
> 时间：2013-03-03T21:36:42.057
> 
> 标签：php, paypal

我想添加从我的网站购买商品的选项（用 PHP 编写），我认为最好的方法是将 PayPal 的开发人员工具集成到我的网站中。

鉴于待售商品是独一无二的，我需要在商品售出时采取行动，例如，停止显示“添加到购物车”按钮。因此，我按照PayPal 提供的[示例](https://www.x.com/instant-payment-notification-4)设置了即时付款通知 (IPN) 侦听器。在其当前实现中，一旦交易完成，监听器就会向我发送一封电子邮件。但是，我需要侦听器发送某种通知，告知某个商品（由 ID 唯一确定）已售出，以便我可以动态更新我的待售商品列表。

关于如何做到这一点的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T04:48:36.267

我建议在您的产品数据库中使用 qty_available 字段。然后仅在网站上显示 qty_available > 0 的产品。

当某样东西出售时，请在您的 IPN 脚本中更新您数据库中的 qty_available。这样，当某件商品售罄时，它将不再显示在网站上。

# javascript - 我可以给一个带有多个参数的 Jade mixin 变量吗？

> ID：15191210
> 
> 赞同：4
> 
> 时间：2013-03-03T21:36:47.393
> 
> 标签：javascript, variables, pug

我想创建一个包含 mixin 的所有参数的变量，然后将变量传递给 mixin。这是可能的，如果是这样，为什么这不起作用？

```
- var foo = "'arg1','arg2','arg3'"

mixin bar(arg1, arg2, arg3)
  div 
    #{arg1}, #{arg2}, #{arg3}

+bar(foo) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T07:23:30.677

您尝试的方法不起作用，因为您使用字符串作为单个参数并使用单个字符串调用 bar mixin。您不会在“，”字符处拆分字符串参数，因此只有您的 arg1 包含一个值。

首先让我们修复你的 bar mixin

```
mixin bar(args)
  div
    each arg in args
      | #{arg} 
```

该代码仅使用一个名为“args”的参数。对于此参数，需要一些可枚举或类似数组的类型。有关迭代的更多信息，请参阅[jade 文档](https://github.com/visionmedia/jade#iteration)。代码块`| #{arg}`将 arg 值写入纯文本。

如何调用这个mixin？您需要提供一个参数数组，而不是将参数作为字符串提供：

```
mixin bar(['arg1','arg2','arg3']) 
```

如果你想传递一个字符串作为参数，你必须重写你的混合栏：

```
mixin barString(argString)
  - args = argString.split(',');

  div
    each arg in args
      | #{arg} 
```

然后你可以调用 barString mixin：

```
mixin barString("arg1,arg2,arg3") 
```

请注意，我已删除此调用的单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-16T07:57:01.917

来晚了，你也可以这样

```
mixin bar(...args)
    each arg in args
        | #{arg}

+bar('arg1', 'arg2', 'arg3') 
```

# ios - 如何判断哪个 UIImageView 停止使用 CAKeyFrameAnimation 制作动画？

> ID：15191215
> 
> 赞同：0
> 
> 时间：2013-03-03T21:37:14.883
> 
> 标签：ios, uiimageview, cakeyframeanimation

我正在以编程方式创建名为 *fly 的 iVar 的 UIImageViews。

我正在调用一系列包含不同 CAKeyFrameAnimations 的方法。这些方法使用 CAKeyFrameAnimations 委托方法“animationDidStop:(CAAnimation *)anim finished:(BOOL)flag”链接在一起。

现在，如果我只有一个 *fly 实例，这很好。

但是，当我创建了许多 *fly 实例时，我如何判断哪个 UIImageView 已经完成了动画，然后是当前 CAKeyFrameAnimation 调用 'animationDidStop...' 方法？

我知道如何识别 CAKeyFrameAnimation，因为我给了他们一个密钥。我也将每个新的 *fly UIImageView 都标记为整数，但是如何将两者绑定到“animationDidStop ...”方法中？

非常感激任何的帮助。

提前致谢

保尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:27:29.183

您可以利用 CAAnimation 的 KVO 合规性。

```
[anim setValue:yourView forKey:"view"] 
```

并在 animationDidStop 中提取这个值

# c - c中的结构数组

> ID：15191219
> 
> 赞同：2
> 
> 时间：2013-03-03T21:37:34.390
> 
> 标签：c

我正在尝试用 C 编写一个函数，它从文件中读取一些用逗号分隔的值，每行有 4 个值，最后一个是整数，我想将它们放在分配的空间中。当我尝试在 while 循环中从内存中读取它们时，它们很好，但是从 for 循环或函数外部，我多次得到文件的最后一行，在少数情况下它们会丢失一些字符。我是 C 新手，但我认为它与`strtok()`功能有关。

这是我的代码：

```
 #include <stdio.h>
    #include <string.h>
    #include <stdlib.h>

    typedef struct {
        char * foo;
        char * bar;
        char * baz;
        int qux;
    }structure;

    char * readFile(const char * filename, structure * array){
        const int maxstring=100;
        FILE * fr=fopen(filename,"r");
        char * rc;
        char buf[maxstring];
        while(( rc = fgets(buf, maxstring, fr) )) {
            array->foo=strtok (buf,",");
            array->bar=strtok (NULL,",");
            char *aux=strtok (NULL,",");
            array->qux=atol(strtok (buf,","));
            array->baz=strtok(aux,"\n");
            printf("%s,%s,%s,%d\n",array->foo,array->bar,
            array->baz,array->qux);
            array++;
        }
        array=array-9;
        for (int i=0;i<10;i++){
            printf("%s,%s,%s,%d\n",array->foo,array->bar,
            array->baz,array->qux);
            array++;
        }
        return "Success";
    }

    int main(){
        structure * array=malloc(100*sizeof(structure));
        readFile("repository.txt",array);
        free(array);
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T21:41:23.887

问题是您正在存储由`strtok`. 该函数`strtok`返回**原始缓冲区内存中的**指针，即内部的指针`buf`。`buf`并且您在每次迭代时覆盖（通过`fgets`）。

解决问题的最简单方法是`strdup`返回的值`strotk`：

```
char * p = strtok (buf,",");
if (p)
    array->foo = strdup(p); 
```

你存储的其他东西也是如此。完成后别忘了打电话`free`。

# node.js - Node.js：成熟的 webapp

> ID：15191220
> 
> 赞同：0
> 
> 时间：2013-03-03T21:37:37.533
> 
> 标签：node.js, web-applications

我一直在阅读有关 Node.js 的文章，希望能够扩展我的 Web 开发技能。现在我不太明白它如何适合我的项目。它是否用于开发整个 Web 应用程序？因为我到处都能感觉到这种炒作。有人问他应该使用什么框架，人们去：嘿使用 node.js！

但是，如果我需要处理事务和业务逻辑，是在 node.js 中完成的吗？或者它是针对一组非常狭窄的用例，我应该只在某些事情上使用 Java EE 或 .NET 和 node.js？

如果我想构建一个 html5、CSS3、backbone.js、RESTful webapp，我可以使用 node.js 来提供一个 REST 端点吗？对象如何映射到 RDB 查询？有没有javascript ORM？

请原谅我的无知，我可以看到有人想如何结束这个问题，但我很谦虚地想了解它是如何使用的以及我什么时候使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:16:40.320

是的，你可以，但大多数人不是那样做的。大多数构建节点驱动的网站的人都使用带有 nosql 数据库的 express 框架（但你可以使用任何你想要的数据库）。Node 被设计为非常低级，因此如果您仅使用本机 api 构建网站，您很可能最终会构建自己的迷你框架。这就是为什么快递是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T11:40:23.890

您可以使用 ORM npmjs.org/package/rdb 。仅限 Postgres（到目前为止）它具有事务/提交/回滚。以承诺为基础

# javascript - 带停止点的滑块

> ID：15191221
> 
> 赞同：1
> 
> 时间：2013-03-03T21:37:43.303
> 
> 标签：javascript, jquery, html, css, jquery-ui

我想创建一个有一些停止点的滑块。每当我单击任何项​​目时，我都希望滑块在该点跳转并执行一些操作。我用 jQuery UI 的滑块创建了滑块。这很容易，但我不知道如何添加这些停止点。是否有现成的库，或者我应该自己实现它？如果是这样，你能帮我走上正轨吗？

![带停止点的滑块](../Images/ca51b11bb81b191481ddfc37c112c17f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T22:16:31.323

我以前做过类似的事情。它基本上是这样工作的：

*   我将所有可能的值存储在一个数组中（在我的情况下，“*关键帧*”就像你的“*停止点*”）
*   滑块的`stop()`-callback 触发一个调用的函数`_getClosest`并设置新值
*   单击滑块下方的链接，使其直接跳转到该位置

**演示**

[http://jsfiddle.net/eTTM2/](http://jsfiddle.net/eTTM2/)

**HTML**

```
<div id="slider"></div>
<div id="keyframes">
    <a>|</a><a>|</a><a>|</a><a>|</a><a>|</a><a>|</a><a>|</a>
</div> 
```

**滑块、链接和关键帧**

```
var slider = $('slider');
var links = $('#keyframes > a');
var values = [0, 10, 34, 67, 80, 85, 100];

// initiate slider
slider.slider({
    value: 0,
    min: 0,
    max: 100,
    animate: 500,
    stop: function( event, ui ) {
        slider.slider('value', _getClosest(ui.value) );
    }
});

// add click to the links
links.click(function() {
    slider.slider('value', values[$(this).index()]);
}); 
```

**如何获取要滑动到的最近元素**

最简单的方法是将当前滑块位置与可能的关键帧进行比较：

*   如果我已经走了一半或更远，我会移动到下一个元素
*   如果我还没有到达中间，我会回到之前的元素

所以`_getClosest()`可以看起来像这样：

```
function _getClosest(value) {
    var closest = null;
    $.each(values, function(_key, _value) {
        if (closest == null || Math.abs(this-value) < Math.abs(closest-value)) {
            closest = this;
        }   
    });
    return closest;
} 
```

**将链接放置在与其值相对应的滑块下方**

要将链接放置在它们各自的位置，只需循环它们并根据`values`-array 中的值设置左侧偏移量。这次我将值乘以一个因子，`2`因为演示中的滑块很`200px`宽，但范围为`0-100`：

```
$.each(links, function(key, value) {
    $(value).css('left', values[key] * 2);
}); 
```

# c# - 如何以正确的方式添加动态控件？

> ID：15191228
> 
> 赞同：1
> 
> 时间：2013-03-03T21:38:31.280
> 
> 标签：c#, microsoft-metro, windows-store-apps, winrt-xaml

我有以下代码：

```
 for (int i = 0; i < 4; i++)
        {

            TextBlock Tb = new TextBlock();
            Tb.Text = k[3+i];
            Tb.Width = 205*((i<2)?1:0.5);
            Tb.Height = (stala*10)/3;
            Tb.Margin = margin;
            margin.Top += ((stala * 10) / 3);
            this.Str1.Children.Add(Tb);

        } 
```

添加了文本块，但只是一秒钟......当动画停止时，控件也消失了......谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:31:20.067

不，如果您在运行时需要一组在设计时数量未知的重复控件，正确的方法是使用itemscontrol 或从itemscontrol 继承的某些控件（如gridview）并将该itemscontrol 绑定到值observablecollection 的属性。然后你操作 observablecollection 的成员，itemscontrol 会根据它的 itemtemplate 属性为你创建相应的控件。

```
<ItemsControl ItemsSource="{Binding}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel>
                <StackPanel.ChildrenTransitions>
                    <AddDeleteThemeTransition />
                </StackPanel.ChildrenTransitions>
            </StackPanel>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBox Text="{Binding}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

此外，如果您想要动画，那么在 itemscontrol 的项目面板上，您可以使用动画库中的某些内容设置 childrentransitions，您就可以开始了。

听起来绑定对您来说可能是新的。您可能想在这里查看我关于该主题的入门：http: [//blog.jerrynixon.com/2012/10/xaml-binding-basics-101.html](http://blog.jerrynixon.com/2012/10/xaml-binding-basics-101.html)

# python - 从空集和列表中弹出不同的例外？

> ID：15191230
> 
> 赞同：5
> 
> 时间：2013-03-03T21:38:45.400
> 
> 标签：python, list, exception, set

为什么调用 .pop() 时空集和列表会引发不同的异常？

```
>>> l = []
>>> l.pop()
Traceback (most recent call last):
  File "<pyshell#15>", line 1, in <module>
    l.pop()
IndexError: pop from empty list
>>> l = set()
>>> l.pop()
Traceback (most recent call last):
  File "<pyshell#17>", line 1, in <module>
    l.pop()
KeyError: 'pop from an empty set' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T21:40:18.197

因为`sets`很像`dict`s 但没有值：

```
>>> d = {}
>>> d.pop('foo')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'pop(): dictionary is empty' 
```

字典和集合都没有索引，就像列表一样，所以`IndexError`这里没有意义。但*就像*字典一样，集合中的每个“键”只有一个值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T21:40:32.153

列表是有序序列，按索引访问；集合是无序且非顺序的，可以通过键访问，因此会出现错误消息。

# jquery - jQuery水平滑动背景

> ID：15191231
> 
> 赞同：-1
> 
> 时间：2013-03-03T21:38:47.517
> 
> 标签：jquery, menu, background, sliding

有谁知道如何把这个水平？[CSS 垂直 JQuery 菜单](https://stackoverflow.com/questions/6799716/css-vertical-jquery-menu)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T21:59:18.983

有很多事情需要做。您可能应该阅读 CSS。

这里是水平的。 [http://jsfiddle.net/eUSNd/51/](http://jsfiddle.net/eUSNd/51/)

基本上我`float:left`在新创建的样式上使用了`#nav li`然后添加了一个最小宽度（这样它们就会正确传播）。

然后我不得不调整容器 div 的大小。绝对定位一切都是一种非常冒险的做法。请查看定位和浮动。

# sql - 选择具有相同列和不同列的行

> ID：15191238
> 
> 赞同：0
> 
> 时间：2013-03-03T21:39:43.087
> 
> 标签：sql, northwind

我正在尝试列出与任何员工不在同一州（或地区）的所有美国**客户**的**公司名称。**它应该**返回 10 行**。我为此使用了以下查询

 ****```
SELECT Customers.CompanyName
FROM Customers
WHERE Customers.Country='USA'
  AND Customers.Region IN
    (SELECT Customers.Region
     FROM Customers
     GROUP BY Customers.Region HAVING COUNT(Customers.Region)=1); 
```

但它只返回 6。

数据库是**北风**。**公司名

* * *

```
here is the output
Old World Delicatessen
Let's Stop N Shop
Save-a-lot Markets
The Cracker Box
Rattlesnake Canyon Grocery
Split Rail Beer & Ale** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T22:04:56.717

试试这个

```
SELECT CompanyName
  FROM Customers
 WHERE Country='USA' AND 
       Region NOT IN
           (SELECT DISTINCT Region
              FROM Employees 
             WHERE Region IS NOT NULL); 
```

输出

```
CompanyName
----------------------------------------
Great Lakes Food Market
Hungry Coyote Import Store
Let's Stop N Shop
Lonesome Pine Restaurant
Old World Delicatessen
Rattlesnake Canyon Grocery
Save-a-lot Markets
Split Rail Beer & Ale
The Big Cheese
The Cracker Box

(10 row(s) affected) 
```

在您的问题中，您说您需要与***任何员工****不在同一州（或地区）的所有美国客户的公司名称。***但是在您的查询中，您试图从**客户**表中获取区域。**

 ****更新**：我相信你知道，但以防万一：

显式检查`NULL`子查询 ( `WHERE Region IS NOT NULL`) 中的值是**至关重要**的。没有它，查询将成功运行，但不会返回任何行。

```
SELECT CompanyName
  FROM Customers
 WHERE Country='USA' AND 
       Region NOT IN
           (SELECT DISTINCT Region
              FROM Employees); 
```

输出：

```
CompanyName
----------------------------------------

(0 row(s) affected) 
```

我想您尝试完成的练习是为了确保您了解子查询中的 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:06:23.433

您的查询根本不检查`Employees`表！看看：

```
SELECT Customers.CompanyName, customers.Region
FROM Customers
WHERE Customers.Country='USA'
AND NOT EXISTS(SELECT 1 FROM Employees WHERE Employees.Region = Customers.Region) 
```

或者

```
SELECT Customers.CompanyName, customers.Region
FROM Customers
WHERE Customers.Country='USA'
AND  Customers.Region NOT IN (SELECT DISTINCT Employees.Region FROM Employees WHERE Employees.Region IS NOT NULL) 
```

两个查询都返回：

```
Great Lakes Food Market         OR
Hungry Coyote Import Store      OR
Let's Stop N Shop               CA
Lonesome Pine Restaurant        OR
Old World Delicatessen          AK
Rattlesnake Canyon Grocery      NM
Save-a-lot Markets              ID
Split Rail Beer & Ale           WY
The Big Cheese                  OR
The Cracker Box                 MT 
```******

# ruby-on-rails - Rails 实现自动完成搜索

> ID：15191240
> 
> 赞同：5
> 
> 时间：2013-03-03T21:40:14.657
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, autocomplete

我不确定如何为我的搜索功能添加一个自动完成表单。

```
<%= form_tag "/search", :method => "get" do %>
    <%= text_field_tag :query, params[:query] %>
    <%= image_submit_tag "site/blankimg.png", :name => nil %>
<% end %> 
```

我有一个具有自定义操作的以下控制器

```
 def query
     @users= Search.user(params[:query])
     @article= Search.article(params[:query])
   end 
```

模型如下：

```
def self.user(search)
 if search
    User.find(:all, :conditions => ['first_name LIKE ?', "%#{search}%"])
  else
    User.find(:all)
  end
end

def self.article(search)
  if search
    Article.find(:all, :conditions => ['title LIKE ?', "%#{search}%"])
  else
    Article.find(:all)
  end
end 
```

现在这对搜索很有用，但是我希望它向我展示我正在编写它的结果，并且我不能使用 jquery 自动完成，因为它是两个对象。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-03T21:45:50.340

使用**Twitter 预输入**。这里有一些例子：

[http://twitter.github.com/typeahead.js/examples/](http://twitter.github.com/typeahead.js/examples/)

Twitter typeahead 和您需要的所有信息都可以从[https://github.com/twitter/typeahead.js/获得](https://github.com/twitter/typeahead.js/)

**如何使用**

使用取决于您将拥有的“建议”数据。例如，如果它是静态数据（总是相同的），您可以这样实现：

```
$('input.typeahead').typeahead({
  local: ['suggestion1', 'suggestion2', 'suggestion3',...., 'suggestionN']
  #The typeahead is going to load suggestions from data in local.
}); 
```

如果数据发生变化并且来自模型或数据库表，那么您可以尝试：

```
Controller:
def load_suggestions
  @suggestions = MyModel.select(:name) or MyModel.find(:all, conditions: [...]) #Select the data you want to load on the typeahead.
  render json: @suggestions
end

JS file:
$('input.typeahead').typeahead([
  {
    prefetch: 'https://www.mipage.com/suggestion.json' #route to the method 'load_suggestions'
    #This way, typeahead will prefecth the data from the remote url
   }
]); 
```

# javascript - Node.js Web 服务器中的并行请求

> ID：15191248
> 
> 赞同：2
> 
> 时间：2013-03-03T21:41:20.730
> 
> 标签：javascript, node.js, webserver

如果我有一个运行 Node.js 的 Web 服务器，那么我可以同时处理多个请求吗？从我的初步测试中我可以看到，主要是单线程的 Node 目前只能处理一个 HTTP 请求。但是如果一个请求完成的时间太长（例如，上传大量数据），那么所有其他请求都必须等待。

这种情况有解决方法吗？我们能否编写代码使其可以同时处理多个 HTTP 请求？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T21:49:08.267

Node 是单线程的这一事实并不一定意味着它一次只能处理 1 个请求。

Node 中的很多*东西*都是故意异步的。例如许多文件系统操作、数据库查询等。这是以下心态：

> 我知道你会花一些时间来做这件事，所以当你完成后打电话给我，同时我会更好地使用我的单线程操作，而不是等待你完成.

正是在这一点上处理其他*工作*（可以是其他请求）。当然，如果*他们*必须执行异步操作，操作流程可能会回到我们之前暂停的地方，因为其他操作已经完成。

在您进行大量上传的情况下，传入流将异步处理并通过[`data`event](http://nodejs.org/api/http.html#http_event_data)进行管理。如果您想将此流写入磁盘，同样[可以异步执行写入](http://nodejs.org/api/fs.html#fs_fs_write_fd_buffer_offset_length_position_callback)；即在文件上传过程中有一些点可以处理其他请求。

只有当你有多个 CPU 内核时，拥有多个操作线程才是有益的；然后每个操作线程可以在不同的核心上运行。为此，Node 具有你应该查看的[`cluster`模块。](http://nodejs.org/api/cluster.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:50:44.193

正如我们在 node.js 中看到的，我们有一个非阻塞 I/O 服务器平台。所以我们可以同时服务多个请求。例如：-

将文件处理视为一个案例：-

```
var fs=require("fs");
console.log("starting");
fs.readFile("path-to-file", function(error, data){
    console.log("Content:"+data);
});
console.log("Carry on executing"); 
```

输出：-

```
starting
carry on executing
Content: data 
```

所以我们可以看到，当我们等待文件的内容时，我们的代码将继续执行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T21:53:35.633

当请求需要很长时间时，这并不是因为处理器需要很长时间来处理请求。这是因为它要花很长时间等待每一块数据进来。正是在这个等待时间内，node.js 可以处理其他请求，这使得它非常具有可扩展性，并且比大多数其他平台使用的线程模型效率更高. 有关详细讨论，请参阅Dan Kegel[的 C10k 问题](http://www.kegel.com/c10k.html)。

JavaScript 事件通过有一个事件队列来工作。每次触发事件（例如文件读取操作或来自服务器请求的数据块）时，都会添加此队列。只要生成的事件处理代码不是处理器密集型的，队列通常不会变得很长，并且代码几乎立即执行。这就是为什么 node.js 中几乎所有东西都是异步的。

# c++ - C++ STL：为什么 STL 数据结构不提供测量内存消耗的功能？

> ID：15191253
> 
> 赞同：2
> 
> 时间：2013-03-03T21:41:59.793
> 
> 标签：c++, stl

在决定任务的最佳数据结构时，需要考虑三个方面：

*   功能：数据结构是否提供了我需要的操作
*   性能：这些操作有多快
*   内存消耗：数据结构使用了多少内存

第一个考虑可以通过检查数据结构的接口找到，第二个只能在基准测试中测量。但是，如果数据结构仅提供一种计算当前使用的内存的方法，则第三种方法非常简单，否则很难。

STL 数据结构没有这种方法。但为什么？在 STL 中为所有数据结构实现这样的方法将非常简单。对于我作为客户来说，写这样的方法是相当困难的，因为我必须熟悉内部实现。此外，实现隐藏在私有成员后面，所以我根本无法访问它们。

那么为什么他们被排除在外呢？目前，在选择数据结构时，许多其他实现，例如当前发布的 google btree 实现都提供了这些方法。比较这些数据结构很容易。但是，当询问 STL 数据结构在内存消耗方面的表现如何时，我基本上能做的就是猜测。

我找不到任何理由为什么忽略这些方法可能是设计决策。此外，C++ 是一种针对高性能和低内存占用而调整的语言。尤其是在这样的语言中，我认为评估数据结构的内存消耗是一个非常常见的用例。所以我也不能认为它们被排除在外，因为没有人会使用它们。另外，STL 也是一个相当成熟的库，所以也不应该是这个库不够完善。那么省略这些方法的原因可能是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T22:07:05.757

全局，毫无疑问是因为容器无法知道它使用了多少内存。它可以（并且确实）有一个函数来返回它包含的元素数量，并且在`std::vector`容器*过度分配*的情况下，它有一个函数（`std::vector<>::capacity`）告诉你它已经分配了多少元素。但它无法考虑此类分配的任何额外开销（并且肯定会有一些）。这种开销将取决于分配器，并且通常取决于分配器使用的更低级别的函数。在最低级别，甚至不清楚这意味着什么：如果 I`malloc`一个字节，`malloc`实际上可能根据其“分配”概念分配 16 个。但如果 `malloc`当我分配一个字节时，它的池中没有空闲内存，它将进入系统，可能分配一个兆字节或更多。那么在这种情况下使用的内存是多少：1 字节、16 字节，还是 1 兆字节或更多？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:54:11.110

> 但为什么？

因为他们的任务是纯粹的抽象。`std::vector`并不意味着存储对象数组**并**告诉它们当前在实现中消耗了多少字节。它仅用于存储对象数组**。**

我发现这个问题与经常出现的“我怎样才能找出一个`malloc()`ated 指针指向多少内存”的问题非常相似（并且可能相关），也许答案也是一样的：你需要跟踪你自己的东西。（这可能不方便，但这是另一个问题......）

# database - 如何对我的流星方法进行单元测试？

> ID：15191257
> 
> 赞同：8
> 
> 时间：2013-03-03T21:42:35.883
> 
> 标签：database, unit-testing, meteor

我为我的应用程序编写了一些 Meteor 方法，其中包含各种业务逻辑块。现在我想为这些方法编写单元测试。通过单元测试，我特别指的是快速测试，它不会：

*   执行 XHR 或
*   写入数据库

我该怎么做呢？我目前的想法是，当我在测试配置中启动 Meteor 服务器时，我应该用虚拟集合替换我的集合（通过传递`new Meteor.Collection(null)`）并让我的单元测试在服务器端运行，在我的每个方法上调用 Meteor.call()反过来从那里。我不完全确定如何开始测试，可能我想`/tests`在我的应用程序中构建一个自定义 URL 来触发它们。这种方法看起来合理吗？是否有任何库/包可以让我的方法更容易编写单元测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:31:59.913

好吧，这就是我想出的对我的方法进行单元测试的方法。我将是第一个承认这方面有很大改进空间的人！

首先，在我的`server.coffee`文件中，我有以下代码：

```
Meteor.startup ->
  return unless Meteor.settings["test"]
  require = __meteor_bootstrap__.require
  require("coffee-script")
  fs = require("fs")
  path = require("path")
  Mocha = require("mocha")

  mocha = new Mocha()
  files = fs.readdirSync("tests")
  basePath = fs.realpathSync("tests")
  for file in files
    continue unless file.match(/\.coffee$/) or file.match(/\.js$/)
    continue if file[0] == "."
    filePath = path.join(basePath, file)
    continue unless fs.statSync(filePath).isFile()
    mocha.addFile(filePath)
  mocha.run() 
```

首先，此代码仅在 Meteor.settings["test"] 已定义的情况下运行，当我在本地运行测试时我可以这样做，但在生产中永远不应该这样做。然后它在“tests”目录中搜索javascript或coffeescript文件（在我的实现中没有搜索子目录，但添加它很容易）并将它们添加到`mocha`实例中。我在这里使用了优秀的[mocha](http://visionmedia.github.com/mocha/) javascript 测试库，并结合了[chai](http://chaijs.com/)断言库。

所有这些代码都包含在一个`Meteor.startup`调用中，以便我的单元测试在服务器启动时运行。这特别好，因为每当我更改任何代码时，Meteor 都会自动重新运行我的测试。由于决定隔离数据库而不执行 XHR，我的测试在几毫秒内运行，所以这不是很烦人。

对于测试本身，我需要做

```
chai = require("chai")
should = chai.should() 
```

拉入断言库。不过，仍有一些棘手的问题需要解决。首先，如果 Meteor 方法调用没有封装在 Fiber 中，它们将失败。我目前对这个问题没有很好的解决方案，但是我创建了一个`itShould`函数来替换 mocha 的`it`函数并将测试体包装在 Fiber 中：

```
# A version of mocha's "it" function which wraps the test body in a Fiber.
itShould = (desc, fn) ->
  it(("should " + desc), (done) -> (Fiber ->
    fn()
    done()).run()) 
```

接下来是为了测试目的，用模拟集合替换我的集合的问题。如果您遵循将集合放入全局变量的标准 Meteor 实践，这将非常困难。但是，如果您在全局对象上创建集合*属性*，则可以这样做。只需通过`myApp.Collection = new Meteor.Collection("name")`. 然后，在您的测试中，您可以使用一个`before`函数来模拟集合：

```
realCollection = null
before ->
  realCollection = myApp.Collection
  myApp.Collection = new Meteor.Collection(null)
after ->
  myApp.Collection = realCollection 
```

这样，您的集合在测试运行期间被模拟出来，但随后它会被恢复，以便您可以正常与您的应用程序交互。其他一些东西可以通过类似的技术来模拟。例如，全局`Meteor.userId()`函数仅适用于客户端发起的请求。我实际上已经针对 Meteor 提交[了一个错误](https://github.com/meteor/meteor/issues/781)，看看他们是否可以为这个问题提供更好的解决方案，但现在我只是用我自己的版本替换该函数进行测试：

```
realUserIdFn = null
before ->
  realUserIdFn = Meteor.userId
  Meteor.userId = -> "123456"
after ->
  Meteor.userId = realUserIdFn 
```

这种方法适用于 Meteor 的某些部分，但不是全部。例如，我还没有找到一种方法来测试调用的方法`this.setUserId`，因为我认为没有很好的方法来模拟这种行为。不过，总的来说，这种方法对我很有效……我喜欢在更改代码时能够自动重新运行我的测试，并且单独运行测试通常是一个好主意。服务器上的测试可以阻塞也非常方便，使得它们在没有回调链的情况下更容易编写。这是测试的样子：

```
describe "the newWidget method", ->
  itShould "make a new widget in the Widgets collection", ->
    widgetId = Meteor.call("newWidget", {awesome: true})
    widget = myApp.Widgets.findOne(widgetId)
    widget.awesome.should.be.true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:59:51.610

我一直在使用[jasmine](http://pivotal.github.com/jasmine/)来测试我正在开发的更大的 Meteor 应用程序。它可以做的不仅仅是单元测试，而且运行得相当好。我的待办事项清单上有一篇关于此的博客文章。现在我可以给你这个 CoffeeScript：

```
if were_testing()
  describe 'something', ->
    it 'should be greater than 0', ->
      expect(theThing).toBeGreaterThan 0

were_testing = -> document.location.pathname.replace(/^\/([^\/]*).*$/, '$1') == 'tests'

jasmine_test = ->
  jasmineEnv = jasmine.getEnv()
  jasmineEnv.updateInterval = 1000

  htmlReporter = new jasmine.HtmlReporter()
  jasmineEnv.addReporter htmlReporter

  jasmineEnv.execute() 
```

此代码在浏览器中运行。如果要编写脚本，可以在 casperjs 实例中运行它。由于它正在客户端上进行 Meteor 初始化，它将执行 XHR 和数据库查询，但您可以轻松编写不会执行任何额外查询的测试。或者编写访问 /unittests 时触发的函数子集

我们的东西还没有投入生产，但 deployscript 只是删除了上面的 jasmine 代码和所有`*.spec.coffee`文件。

我想将其插入 Jenkins 以进行适当的持续集成设置，但除了基础知识之外，还没有时间来设置 Jenkins。我还尝试使用 casperjs 进行无头浏览，效果很好。

您还可以采取不同的方法，将您的测试代码放入`tests/`（不是由 Meteor 执行），然后使用`require`. 我很快尝试了这个，发现它很乏味。

# javascript - 使用 dc.js 和 crossfilter.js 在 barChart 中正确显示 bin 宽度

> ID：15191258
> 
> 赞同：22
> 
> 时间：2013-03-03T21:43:06.567
> 
> 标签：javascript, d3.js, crossfilter, dc.js

我正在使用基于 d3 和 crossfilter的 Dimensional Charting javascript 库[dc.js制作条形图。](http://nickqizhu.github.com/dc.js/)

我想要做的就是显示一个具有指定数量的 bin 的直方图，这应该很容易使用该`barChart`功能。

我有一个名为的数组`data`，其中包含 0 到 90000 之间的浮点值，我只想使用具有 10 个 bin 的直方图显示分布。

我使用以下代码生成下面的直方图：

```
 var cf = crossfilter(data);
  var dim = cf.dimension(function(d){ return d[attribute.name]; });

  var n_bins = 10;
  var xExtent = d3.extent(data, function(d) { return d[attribute.name]; });
  var binWidth = (xExtent[1] - xExtent[0]) / n_bins;
  grp = dim.group(function(d){return Math.floor(d / binWidth) * binWidth;});
  chart = dc.barChart("#" + id_name);
  chart.width(200)
    .height(180)
    .margins({top: 15, right: 10, bottom: 20, left: 40})
    .dimension(dim)
    .group(grp)
    .round(Math.floor)
    .centerBar(false)
    .x(d3.scale.linear().domain(xExtent).range([0,n_bins]))
    .elasticY(true)
    .xAxis()
    .ticks(4); 
```

![直方图](../Images/de8e2515cc88c7c3220cb15e50813452.png)

这看起来不太对劲：每个酒吧都非常瘦！我想要一个看起来很正常的直方图，其中的条很粗并且几乎相互接触，每个条之间可能有几个像素的填充。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-03T22:25:58.217

dc.js 中的条形图使用[xUnits 函数](http://dc-js.github.io/dc.js/docs/html/dc.coordinateGridMixin.html#xUnits)根据 x 轴的范围自动计算直方图中条形的宽度。如果要将宽度设置为静态值，可以使用自定义 xUnits 函数，例如：

```
chart.xUnits(function(){return 10;}); 
```

这应该给你一个更合适的宽度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-27T09:31:42.127

[user2129903 给出的](https://stackoverflow.com/a/15191659/1025391)使用`chart.xUnits()`指定自定义函数的建议`xUnits`确实是要走的路。我想添加一个示例和一些解释，以选择该自定义函数的返回值。

医生说：

> 此函数应返回 x 轴上所有数据点的 Javascript 数组，或轴上的点数。

也就是说，假设您要制作直方图，您可以直接指定 bin 的数量，也可以根据所需的 bin 大小计算它并从该函数返回。当分组的数字键不是连续的等距整数时，您需要指定此项。

这是一个例子：

```
<!DOCTYPE html><meta charset="utf-8">
<head>
    <link rel="stylesheet" type="text/css" href="js/dc.css"/>
    <script src="js/crossfilter.js"></script>
    <script src="js/d3.js"></script>
    <script src="js/dc.js"></script>
</head>
<body>
    <div id="chart"></div>
</body>
<script>
    // generate data
    var min_value = 0, max_value = 18, value_range = max_value-min_value;
    var data = [];
    for (var i = 0; i < 1000; i++)
        data.push({x: Math.random()*value_range+min_value});
    // create crossfilter dimension for column x
    var cf = crossfilter(data),
        x = cf.dimension(function(d) {return d.x;});
    // create histogram: group values to `number_of_bins` bins
    var number_of_bins = 10,
        bin_width = value_range/number_of_bins,
        //number_of_bins = value_range/bin_width,
        x_grouped = x.group(
            function(d) {return Math.floor(d/bin_width)*bin_width;});
    // generate chart
    dc.barChart("#chart").dimension(x)
        .group(x_grouped)
        .x(d3.scale.linear().domain([min_value,max_value]))
        // let the bar widths be adjusted correctly
        .xUnits(function(){return number_of_bins;})
        .xAxis();
    dc.renderAll();
</script> 
```

请注意，在此示例中，它还可以从组对象本身检索 bin 的数量或 bin 的键值，例如，像这样

```
// number of bins
chart.xUnits(function(){return x_grouped.all().length;});
// bins' key values
chart.xUnits(function(){return x_grouped.all().map(function(d) {return d.key;});}); 
```

然而，当有空箱时，这将失败（即，产生错误的条宽）。

以供参考：

*   [http://dc-js.github.io/dc.js/docs/html/dc.units.html](http://dc-js.github.io/dc.js/docs/html/dc.units.html)
*   [http://dc-js.github.io/dc.js/docs/html/dc.coordinateGridMixin.html#xUnits](http://dc-js.github.io/dc.js/docs/html/dc.coordinateGridMixin.html#xUnits)

# mysql - 如何将本地 MySQL 数据库部署到 Heroku

> ID：15191259
> 
> 赞同：74
> 
> 时间：2013-03-03T21:43:11.487
> 
> 标签：mysql, heroku

我是使用 Heroku 的新手，我有一个 Ruby/Sinatra 应用程序，我计划在其中使用 MySQL 数据库作为主要数据存储。

但是，我不想将结果直接写入 Heroku 上的数据库。相反，我想将结果写入本地数据库，然后能够轻松地将本地数据库部署/更新/复制到 Heroku 上的“生产”数据库。

我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-03T21:56:23.530

首先 Heroku 原生使用 postgres。如果您在本地使用它，您的生活会更轻松。

您可以从 heroku 导入/导出 postgres 转储文件，如下所述：[https ://devcenter.heroku.com/articles/heroku-postgres-import-export](https://devcenter.heroku.com/articles/heroku-postgres-import-export)

如果你真的想使用 mysql，你有两条路可以走。

1) 在本地运行 mysql，但在使用 mysql2psql gem 迁移到 Heroku 时转换为 postgres，如下所述：[https ://devcenter.heroku.com/articles/heroku-mysql](https://devcenter.heroku.com/articles/heroku-mysql)

2）使用像[https://addons.heroku.com/cleardb这样的 mysql 插件](https://addons.heroku.com/cleardb)

但是我的建议是端到端使用 postgres，因为它已融入 Heroku，您将使用默认的 Heroku 使用方式，而不是反对它们。

Postgres 也非常好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-13T21:41:29.203

我对 Ruby 和 Sinatra 一无所知，所以请随时发表评论，让我知道如果是这样的话，我有多么错误。但是，我认为在 Heroku 上提及 JawsDB 插件可能是相关的，因为这里的最佳答案来自 2013 年，可能有点过时了。

这是有关 JawsDB 插件信息的链接： [https ://devcenter.heroku.com/articles/jawsdb](https://devcenter.heroku.com/articles/jawsdb)

配置插件就像在 CLI 中运行以下命令一样简单：

```
heroku addons:create jawsdb 
```

然后使用 MySQL Workbench（或您使用的任何 GUI）中的参数配置主机、用户名、密码和数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-03T14:07:57.690

我写了一篇短文

[https://medium.com/@michaeltendossemwanga/import-mysql-database-to-heroku-with-one-command-import-db-sql-a932d720c82b](https://medium.com/@michaeltendossemwanga/import-mysql-database-to-heroku-with-one-command-import-db-sql-a932d720c82b)

这是一个用于加快进程的批处理脚本 [https://gist.github.com/MichaelTendoSsemwanga/f013963092e3abcce801834871d14b03](https://gist.github.com/MichaelTendoSsemwanga/f013963092e3abcce801834871d14b03)

将此批处理脚本另存为 import.bat

```
@echo off
heroku config | findstr CLEARDB > config.txt
set /p url=<config.txt

set "string=%url:?=" & set "x=%"
set "x=%string:/=" & set "dbname=%"
echo DB name:   %dbname%
echo DB name:   %dbname% >> config.txt

set "x=%string:@=" & set "substring=%"
set "host=%substring:/=" & set "x=%"
echo Host:      %host%
echo Host:      %host% >> config.txt

set "x=%string::=" & set "substring=%"
set "password=%substring:@=" & set "x=%"
echo Password:  %password%
echo Password:  %password% >> config.txt

set "x=%string:://=" & set "substring=%"
set "user=%substring::=" & set "x=%"
echo User:      %user%
echo User:      %user% >> config.txt

mysql -u %user% -p%password% -h %host% -D %dbname%  < %1 
```

在 heroku 应用程序目录中，运行

```
import db.sql 
```

[命令行输出](https://i.stack.imgur.com/NxaYv.png)

# iphone - 如何将字符串中的单个字符保存到 NSDictionary 对象中

> ID：15191260
> 
> 赞同：0
> 
> 时间：2013-03-03T21:43:20.300
> 
> 标签：iphone, ios, nsstring, nsdictionary

我在我的标题中定义了一个 const char 像这样

```
const char *storageIcon;

@property (assign) const char *storageIcon; 
```

我的字典中有一个字符串值，它是单个字符，我很奇怪下面的代码是否以正确的方式将其放入我的变量中？

```
storageIcon = [[tempDict valueForKey:@"STORAGEICON"] UTF8String]; 
```

问题是后来这个元素被破坏了..几乎就像内存泄漏一样，我无法弄清楚出了什么问题。

任何帮助/提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:48:38.123

从文档中`NSString UTF8String`：

> 返回的 C 字符串会自动释放，就像释放返回的对象一样；如果需要将 C 字符串存储在创建 C 字符串的自动释放上下文之外，则应该复制它。

您正在将此“即将被释放”的 C 字符串指针分配给已分配的属性。基本上价值立即丢失。

您可以正确使用属性的 setter`malloc`和`free`getter 方法，也可以使事情变得更容易，并将属性更改为`NSString`a 而不是 a `const char *`。

任何需要实际 C 字符串的属性客户端都可以`UTF8String`根据需要调用该方法。

另一件事。你问题的标题是关于一个字符的。将是`char`，不是`char *`。如果您真的只想要 的第一个字符`NSString`，那么您需要一种与现在不同的方法。

# c++ - 需要澄清数组语法

> ID：15191262
> 
> 赞同：3
> 
> 时间：2013-03-03T21:43:29.730
> 
> 标签：c++, arrays

像这样在 C++ 中声明二维数组有什么区别：

```
int mp[3][3]={{0,2,1},
              {0,2,1},
              {1,2,0}}; 
```

和这个？

```
int mp[3][3]={0,2,1,
              0,2,1,
              1,2,0}; 
```

上面是一个数组，其中所有 3 个元素本身都是数组，而底部是一个非数组元素的数组，还是编译器都读取相同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T21:48:25.513

它们是等价的。第一个是完全支撑的形式。当解释明确时（例如在第二种形式中），标准允许省略大括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:53:31.780

两者都是相同的，您可以使用以下循环访问矩阵的元素：

```
for (i=0;i<3;i++)   
     for(j=0;j<3;j++)     
        printf("%d ",mp[i][j] ); 
```

在第一种情况下给出大括号时的一个区别是可以省略第一个参数，例如：

```
int mp[][3]={{0,2,1},
              {0,2,1},
              {1,2,0}}; 
```

但是 C++ 编译器会给你**警告：**缺少**第二类声明的大括号。**

**编辑：**
正如你所说：我的程序给了我不同的结果

我已经写了一个代码。在 C++ (gcc-4.7.2) 上工作正常。[在这里检查](http://ideone.com/IvWgzL)

# matlab - 如何矢量化多锥度谱的计算？

> ID：15191264
> 
> 赞同：0
> 
> 时间：2013-03-03T21:44:11.443
> 
> 标签：matlab, fft, spectrum

通常我使用 pmtm 计算信号的频谱：

```
signal = rand(1000,1);
NW = 4;
Fr = 1:50;
Fs = 200;
[p, fr] = pmtm( signal, NW, Fr, Fs); 
```

但是，我正在寻找一种对其进行矢量化的方法，以便我可以同时计算多个光谱。我试过了：

```
signal = rand(1000,10); %<--- notice I have 10 columns instead of 1
NW = 4;
Fr = 1:50;
Fs = 200;
[p, fr] = pmtm( signal, NW, Fr, Fs); 
```

但它会产生一个错误，并不能真正告诉我我做错了什么。我知道我可以将调用包装`pmtm`在一个循环中。

这是错误：

> 错误使用 .* 矩阵尺寸必须一致。
> 
> pmtm>mtm_spectrum 中的错误（第 231 行）[Xx,w] = computeDFT(E(:,1:k).*x(:,ones(1,k)),nfft,Fs);
> 
> pmtm 中的错误（第 142 行）[S,k,w] = mtm_spectrum(x,params);

这让我怀疑没有一种矢量化的方式来实现我想要的。我希望这里有人知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:25:43.183

是什么让您认为 pmtm 旨在处理矩阵？帮助菜单特别需要一个向量：

```
>> help pmtm
 pmtm   Power Spectral Density (PSD) estimate via the Thomson multitaper 
    method (MTM).
    Pxx = pmtm(X) returns the PSD of a discrete-time signal vector X in 
    the vector Pxx.  Pxx is the distribution of power per unit frequency.
    The frequency is expressed in units of radians/sample.  pmtm uses a 
    default FFT length equal to the greater of 256 and the next power of
    2 greater than the length of X.  The FFT length determines the length
    of Pxx.
... 
```

如果您追求性能，您可能希望使用 2D fft (fft2) 获得信号的频谱表示，然后自行计算功率分布。这将允许您在没有任何 for 循环的情况下处理 2D 数组，但这肯定意味着您需要更多编码:-(

# ios - 按钮之间的自动布局边距仅在 4" 屏幕上不正确

> ID：15191266
> 
> 赞同：1
> 
> 时间：2013-03-03T21:44:29.680
> 
> 标签：ios, interface-builder, autolayout

我有一堆在 3.5 英寸屏幕上看起来很完美的视图。当我在具有 4 英寸屏幕的 iPhone 5 模拟器上对其进行测试时，按钮之间的填充距离很远。

不仅仅是这个视图，填充问题似乎总是发生在某些地方（例如，在 2 个按钮之后）。我认为这与 iOS 6 的约束的新功能有关。我曾尝试在没有运气的情况下弄乱这些值。我在 IB 中做所有事情并且启用了自动布局。

谁能向我解释我必须做什么？

3.5英寸屏幕iPhone 4看起来不错！4 英寸屏幕 iPhone 5 边距关闭。

![3.5英寸屏幕iPhone 4看起来不错！](../Images/f0ceab532d2059b5e6c83a41fb9a1141.png) ![4 英寸屏幕 iPhone 5 边距关闭](../Images/e8e44277d8a462936a0ca97750403ced.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:13:12.137

默认情况下，IB 将视图固定到其父视图的最近边缘；在您的情况下，顶部的两个按钮固定在顶部，底部的两个按钮固定在底部。当视图被拉伸以适应 4 英寸屏幕时，它们就会分开。

使用固定菜单显式创建您需要的约束（可能固定所有按钮之间的间距），然后删除将按钮固定到超级视图底部的约束。

如果您想要更详细的解释，我已经[在此处](http://commandshift.co.uk/blog/2013/01/18/autolayout-in-interface-builder/)写了有关此主题的更多信息（包括对您的确切案例的讨论） 。

# javascript - 如何处理 Windows 8 WinJS 游戏中的分辨率？

> ID：15191267
> 
> 赞同：2
> 
> 时间：2013-03-03T21:44:32.107
> 
> 标签：javascript, windows, windows-store-apps, winjs

我正在使用 HTML5、canvas 和 WinJS 为 Windows 8 创建游戏。游戏即将完成，一切正常。但是，我将继续研究图形，并开始关注我实现对不同分辨率的支持的方式。在我开始这个项目的时候，我已经阅读了很多关于如何处理分辨率的信息，尽管很少与画布相关。我最终实现了这样的东西：

```
if (window.innerWidth >= 2560 && window.innerHeight >= 1440) {           //Full 2560x1440(16:9) / Letterbox 2560x1600(16:10)
    canvas.width = 2560;
    canvas.height = 1440;
} else if (window.innerWidth >= 1920 && window.innerHeight >= 1080) {    //Full 1920x1080(16:9) / Letterbox 1920x1200(16:10)
    canvas.width = 1920;
    canvas.height = 1080;
} else if (window.innerWidth >= 1600 && window.innerHeight >= 900) {     //Full 1600x900(16:9) / Border 1680x1050(16:10)
    canvas.width = 1600;
    canvas.height = 900;
} else if (window.innerWidth >= 1360 && window.innerHeight >= 768) {     //Full 1366x768(16:9) / Border 1440x900 (16:10) / Cut 1360x768(<16:9)
    canvas.width = 1366;
    canvas.height = 768;
} else if (window.innerWidth >= 1280 && window.innerHeight >= 720) {     //Full 1280x720(16:9) / Letterbox 1280x768(<16:9) / Letterbox 1280x800(16:10) / Letterbox 1280x1024(5:4)
    canvas.width = 1280;
    canvas.height = 720;
} else {                                                                 //Letterbox 1024x768(4:3)
    canvas.width = 1024;
    canvas.height = 575;
}

pixelScale = canvas.height / 768;
assetScale = canvas.height; 
```

它背后的基本思想是它在给定的分辨率下找到最适合画布的尺寸（在屏幕比例不同的情况下使用信箱）。然后将assetScale应用于清单中的所有图像，以便PreloadJS加载正确大小的位图（例如images/1080/myimage.png），并且pixelScale用于将坐标从1366x768的工作分辨率缩放到操作分辨率（所以事情在其他分辨率上正确定位）。

但是，我不再确定这是否真的是处理它的最佳/正确方法，以及我是否可能过于复杂。在 body 元素中添加了一个类来帮助缩放菜单元素后，我突然注意到在 Blend for VS2012 中，高 DPI 设备（即 1920x1080 @ 140%）将分辨率选为 768 而不是 1080。这不会导致降低高 DPI 设备的视觉效果？我是否需要单独考虑这一点，如果需要，如何处理？还是我只是忽略了什么？

我遇到的其他方法包括以高分辨率渲染整个画布元素，然后缩小整个画布元素（再次降低视觉效果？）并让 WinJS 通过附加带有“-100”、“-140”和“-180”（似乎这只适用于内联/css图像而不是canvas/PreloadJS）。

有人可以指出我如何处理这个问题的正确方向吗？似乎有很多错误信息。最后，我只想确保所有用户都能获得适合他们计算机/设备分辨率的最佳质量图像。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:35:14.153

在这里有帮助的控件是[ViewBox 控件](http://msdn.microsoft.com/en-us/library/windows/apps/br229771.aspx)，它位于 WinJS.UI 命名空间中。

ViewBox 控件会自动缩放其中包含的 UI 元素，因此您不必担心手动确定如何使 UI 适应当前分辨率。

查看 Visual Studio 中的 Fixed Layout App 模板，了解如何快速开始使用 ViewBox 控件。您可以在 Windows 开发中心阅读有关应用程序模板的更多信息，包括固定布局应用程序模板。

并且一定要查看[缩放到屏幕的指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)。

有关 Windows 应用商店应用开发的更多信息，请注册[Generation App](http://bit.ly/gd30tolaunch)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:32:37.307

ViewBox 控件会将画布缩放到设备分辨率，这可能是也可能不是您想要的。缩放一个充满像素的画布会产生更大的像素。它不会像您所追求的那样产生更高质量的图像。

如果您想要一款真正具有自适应性和高性能的游戏，那么您将需要根据分辨率动态渲染您的画布对象。如果设备是 1366x768，那么画布应该是 1366x768，一些精灵应该是 100x100 像素。如果设备是 1600x900，那么画布应该是 1600x900，同样的精灵应该是 140x140。这将在您的代码中使用一些逻辑。

首先，您将在原始帖子中设置画布的大小，然后每个视觉资产都需要相对于该画布大小定义其大小。最好编写一些代码来抽象任务。

# javascript - JavaScript 对象难题

> ID：15191268
> 
> 赞同：1
> 
> 时间：2013-03-03T21:44:36.700
> 
> 标签：javascript, jquery, object

我试图通过使用对象来提高我糟糕的 JavaScript 技能，而不仅仅是使用全局变量和随机函数集。到目前为止，我的 PHP 框架对任何给定的（一组）页面都使用了两个文件......`functions.js`和`ajax.js`​​. 我想保持分离，但使用对象来达到相同的结果。

如果我有一个对象...

```
var testJS = {

    init: function(options) {
        var defaultSettings = {
            someOption: false,
            fadeLogo: false
        },

        settings = $.extend({}, this.defaultSettings, options),

        base = this;

        // call ajax function...
        ajax.doSomething();

    },

    somethingElse: function() {
        // whatever
    }
});

$(document).ready(function() {
    testJS.init();
}); 
```

然后我创建一个`ajax`对象...

```
var ajax = {
    doSomething: function(some_var) {
        $.post("Ajax.class.php", {"mode": 'doSomething', 'some_var': some_var}, function(data) {
            something = $.parseJSON(data);
            $('#someId').html(something);

            // call somethingElse function from testJS

        });
    }
} 
```

我的问题似乎很愚蠢......

如何`somethingElse`从`ajax`对象调用（如果可以）函数？似乎它应该可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:51:36.217

由于您只有一个对象实例，您可以只使用包含该实例的全局变量：

```
testJS.somethingElse(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:57:25.423

我认为您想创建一个新*类*，而不仅仅是一个对象。然后你可以在你的回调中构建一个新`testJS`对象。`ajax`

```
function testJS() {
        this.init = function(options) {
            var defaultSettings = {
                    someOption: false,
                    fadeLogo: false
            };

            this.settings = $.extend({}, this.defaultSettings, options);

            var base = this;

            // call ajax function...
            ajax.doSomething();

        };

        this.somethingElse = function() {
            // whatever
        };
} 
```

然后，在`ajax`回调内部：

```
var myTestJS = new testJS({ /* Your options here */ });
myTestJS.somethingElse(); 
```

我比其他答案更喜欢这个，因为虽然这个对象的*构造函数*仍然是全局的，但对象本身只存在于回调范围内。如果您想要全局行为，您仍然可以使用此方法。只需在回调之外调用构造函数。

## 编辑

我在上面定义`init`函数的方式，你的`base`变量将无法做任何事情。我应该这样声明：

```
function testJS() {
    var base = this;
    ... 
```

然后去掉`var base = this;`里面的线`init`。对于那个很抱歉。

# php - 如何通过电子邮件向用户发送新链接以创建密码

> ID：15191269
> 
> 赞同：1
> 
> 时间：2013-03-03T21:44:49.553
> 
> 标签：php, email, passwords, reset

根据this other post，我需要：

[PHP 密码恢复](https://stackoverflow.com/questions/4763719/php-password-recovery) 您不会“恢复”密码。你所做的是两件事之一。

1.  通过电子邮件向用户发送一个链接以创建新密码，覆盖当前密码。
2.  通过电子邮件向用户发送一个随机生成的密码，然后要求他们更改密码。

我已经完成了一个巨大的项目，我迫切地要求提供工作示例，或者至少是你关于如何做到这一点的最佳建议；例如：#1 电子邮件用户链接以创建新密码，覆盖当前密码。我被告知数据库有密码盐渍，并使用河豚。我真的不知道这到底是什么意思，我正在检查代码以试图弄清楚如何添加“重置密码？” 链接到他们当前的登录页面。

然后，如果您愿意，您能否帮助如何通过电子邮件向用户发送随机生成的密码，然后让他们更改它[上面的#2？

任务是原样的，到目前为止我不知道要提供什么代码；我希望做过这件事的人可以告诉我什么是有效的，我会尝试实现它。我感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T09:27:39.290

生成密码重置的常用方法如下所示：

1.  检查电子邮件地址是否属于注册用户。
2.  生成随机不可预知的代码。
3.  将此代码与用户 ID 和到期日期一起存储在数据库中。
4.  将此代码的链接发送到给定的电子邮件地址，因此只有用户自己会获得此链接。
5.  当用户单击链接时，提取代码，并检查其哈希是否在数据库中。
6.  如果它在数据库中并且尚未过期，则您知道用户 ID，并且可以允许用户输入新密码（不要将自己生成的密码发送给用户）。
7.  将代码标记为已使用或将其从数据库中删除。

我希望这可以让您了解必要的步骤。如果你想了解更多关于 BCrypt 和 salting 的知识，你可以看看这个关于散列密码的[教程。](http://www.martinstoeckli.ch/hash/en/index.php)

# php - 如何使用两个 htaccess 文件？

> ID：15191271
> 
> 赞同：0
> 
> 时间：2013-03-03T21:45:10.063
> 
> 标签：php, .htaccess

我有一个用于从 url 中删除 .php 的脚本，第二个通过用户名

```
# activate rewrite engine
RewriteEngine On

# WordPress rules
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

# username in url
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /x/profile.php?username=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:47:26.083

超级简单，将它们合并到一个文件中：

```
RewriteEngine On

# Combined rules
RewriteRule ^(.*)$ /x/profile.php?username=$1
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

# php - 处理 mysqli 准备好的语句时获取的替代方法？

> ID：15191284
> 
> 赞同：3
> 
> 时间：2013-03-03T21:46:13.117
> 
> 标签：php, mysql, mysqli

我有以下代码使用准备好的语句执行 MySQL 查询：

```
$selectStatement = "SELECT " . implode(", ", $allFields); // cat select w/ allFields
$stmnt = $mysqli->prepare($selectStatement . 
     "FROM Musicians WHERE name = ?");
$stmnt->bind_param('s', $name);
$stmnt.execute(); 
```

在这一点上，我读过的大部分内容都告诉我应该使用`bind_result()`然后`fetch()`在 $stmnt 上。但是，我更愿意得到一个填充了值的数组，而不是像这样迭代一堆转储变量`fetch()`。有没有办法在使用准备好的语句和结果时获得类似于`fetch_assoc()`给我的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T08:27:04.013

你是对的，要使用熟悉的 fetch() 和 mysqli，必须先调用 get_result() 并且它并不总是可用。
更不用说如果没有一些复杂的代码，您也无法绑定可变数量的占位符。
这使得**mysqli**绝对**无法**与**准备好的语句**一起使用。

所以，有2个解决方案。

1.  不要使用 mysqli
2.  不要使用准备好的语句。

对于第一个选项，选择 PDO。
与 mysqli 不同，它拥有[**mysqli 所需的一切以及更多**。](https://stackoverflow.com/tags/pdo/info)

```
$stm = $pdo->prepare("SELECT * FROM Musicians WHERE name = ?");
$stm->execute(array($name));
$row = $stm->fetch(); // or fetchAll() depends on the numer of rows expected. 
```

对于第二个，您可以使用手动处理的占位符。
这种方法将比 PDO 更有用，PDO 是一个真正简洁的代码：

```
$row = $db->getRow("SELECT * FROM Musicians WHERE name = ?s",$name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T10:32:58.950

添加解决方案以澄清：

如果我们可以在启动时选择服务器，我更喜欢使用 php-mysqlnd 模块，而不是 php-mysql 模块，用于 PHP。然后，我们可以使用：

```
...
$stmnt.execute();
$res = $stmnt->get_result();
$row = $res->fetch_assoc(); 
```

这对我来说似乎更简单。

# c - C 通过主机名获取 ip

> ID：15191286
> 
> 赞同：-5
> 
> 时间：2013-03-03T21:46:35.887
> 
> 标签：c, sockets, dns

有谁知道如何从主机名获取 IP 以在交流套接字中使用？（winsock）我有一个插座，但是当我使用时： `sock.sin_addr.s_addr=inet_addr("example.no-ip.org");`它不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:51:35.610

[`inet_addr()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738563%28v=vs.85%29.aspx)只处理文本写入的已经数字的 IP 号码。您需要先翻译域名[`getaddrinfo().`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T21:53:21.257

该功能`inet_addr()`仅适用于编号的 IP 地址，例如 1.2.3.4。要查找通用主机名的 IP 地址，您需要函数`gethostbyname()`. 例如，请参阅[Microsoft 的此文档和示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738524%28v=vs.85%29.aspx)。或者，由于它已被弃用，函数`getaddrinfo()`.

哦，既然你在 Windows 上，别忘了`WSAStartup()`提前打电话。

# regex - 使反向的非贪婪正则表达式的行为与正向相同

> ID：15191291
> 
> 赞同：13
> 
> 时间：2013-03-03T21:47:13.897
> 
> 标签：regex, pcre, regex-greedy, non-greedy

这种模式：

```
/a+?b+?/ 
```

针对以下字符串：

```
aaaaaabbbbbb 
```

火柴：

```
aaaaaab 
```

我们看到非贪婪的行为在向后/向左（全部取走）和向前/向右方向（只取一个）上表现不同。

有没有办法让一开始的非贪婪匹配所有的`a`, 也尽可能少地匹配？所以它的行为方式与`b`结尾部分的 at 相同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T14:12:51.997

## 简短的回答

正则表达式通常从左到右匹配，除非您设置从右到左的标志（很少有风格支持）。在任何一种情况下，它们都不会从中间开始，然后在两个方向上进行，即使您使用后视。

## 惰性量词如何工作？

它有助于停下来问 - 为什么惰性量词首先存在？它打算解决什么问题？

正常（贪婪）量词的工作原理是找到匹配的文本模式，然后重复匹配一系列字符，直到它们不再匹配为止。这种行为通常是需要的，但是当您有一个非常通用的模式后跟一个非常具体的模式（其中特定模式是通用模式的子集）时，您会遇到问题。

例如，考虑以下输入：

```
_abc_END_def_END 
```

而这种模式：

```
(\w+END) 
```

目的是匹配`_abc_`然后`END`. 问题是它`END`是 的一个子集`\w+`。使用标准的“贪婪”规则，`\w+`尽可能多地匹配。所以不是匹配`_abc_`，而是匹配`_abc_END_def`。

`+`这种情况的解决方案是使用惰性修饰符更改量词 () 的行为方式`?`。通过将表达式更改为`\w+?`，正则表达式引擎被迫仅匹配满足表达式所需的匹配量，仅此而已。当`\w+?`匹配`_abc_`并`END`匹配其文字字符串时，表达式得到满足。

惰性量词的目的不是匹配“最小”数量的字符 - 它是关于给第二个模式（第一个模式的子集）一个匹配的机会。

## 回到你的问题

在您的示例中，`b`不是 的子集`a`，因此不需要惰性量词。如果您想匹配一个或多个 a，但尽可能少，以及一个或多个 b，但尽可能少，那么您只需使用：

```
ab 
```

或者，如果您`a`是某个可能包括 b 的超集的替身：

```
[ab]b 
```

例如：

```
\wb 
```

两者都将匹配：

```
ab 
```

例子：

```
const input = "aaabbb"

console.log(/ab/.exec(input)[0])
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-27T17:21:37.687

前面有贪婪的非捕获组：

```
/(?:a)*a+?b+?/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-10T20:55:15.657

如果您没有能力进行前面提到的从右到左匹配，那么您可以简单地反转字符串，反转正则表达式，然后在最后反转结果。

工作如下：

```
Start with aaaaaabbbbbb
Reverse to bbbbbbaaaaaa
Reverse /a+?b+?/ to /b+?a+?/
The resulting Match is bbbbbba
Reverse the resulting match to get abbbbbb 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-03T21:53:28.333

他们的行为是*一样*的！一个惰性量词（在这种情况下是一个惰性`+`）告诉正则表达式引擎

*   从第一个可能的位置开始，
*   然后匹配尽可能少的字符（在 a 的情况下至少一个 `+`）
*   但尽可能多地匹配以允许发生整体匹配。

正如您似乎暗示的那样，正则表达式不匹配“向左”或“向后”。

你到底想达到什么目的？我想这不是这个简单的例子 - 修复起来很简单（只需制作 regex `ab`，这可能不是你想要的）。

# git - 脚本/cibuild：使用 Jenkins 构建时权限被拒绝

> ID：15191294
> 
> 赞同：2
> 
> 时间：2013-03-03T21:47:27.630
> 
> 标签：git, github, jenkins

使用 Jenkins 构建时出现以下错误：

```
Building in workspace /var/lib/jenkins/jobs/test-1b8ac945ebc2383345391847605819c5/workspace
[workspace] $ /bin/sh -xe /tmp/hudson5014904737097448499.sh
+ [ ! -d ./.git ]
+ git fetch -q origin
+ git reset -q --hard a3ff7b59246560719bc3a8f2e89f0b5720fa32c3
+ [ -f script/cibuild ]
+ script/cibuild
/tmp/hudson5014904737097448499.sh: 9: /tmp/hudson5014904737097448499.sh: script/cibuild: Permission denied
Build step 'Execute shell' marked build as failure
Finished: FAILURE 
```

配置脚本是 janky 默认值：

```
if [ ! -d "./.git" ]; then
  git init
  git remote add origin git@github.com:repo/my_repo
fi
git fetch -q origin
git reset -q --hard $JANKY_SHA1
if [ -f script/cibuild ]; then
  script/cibuild
else
  bundle install --path vendor/gems --binstubs
  bundle exec rake
fi 
```

我已经创建了自己的脚本/cibuild，但是从错误来看，它看起来没有正确的权限。如何从 Jenkins 自动正确设置权限？文件本身存储在 repo 中，所以我不想每次都登录 Jenkins 并设置权限。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:09:18.753

为了解决，我添加`chmod 700 script/cibuild`了脚本/cibuild 是否存在。要使此更改在 Janky 中是全局的，您需要编辑 Janky 文件夹中的 config/default.xml.erb

```
if [ ! -d "./.git" ]; then
  git init
  git remote add origin git@github.com:repo/my_repo
fi
git fetch -q origin
git reset -q --hard $JANKY_SHA1
if [ -f script/cibuild ]; then
  chmod 700 script/cibuild
  script/cibuild
else
  bundle install --path vendor/gems --binstubs
  bundle exec rake
fi 
```

# java - WebView --- 无法在谷歌文本框中写入

> ID：15191295
> 
> 赞同：0
> 
> 时间：2013-03-03T21:47:34.920
> 
> 标签：java, android, webview, android-webview

**已编辑 - 图片链接：** [http ://tinypic.com/view.php?pic=4qir6v&s=6](http://tinypic.com/view.php?pic=4qir6v&s=6)

如图所示，我在 webview 中创建了一个简单的 Web 浏览器。我可以通过单击站点或在文本列（GO 按钮左侧）中写入 url 来浏览网站，但无法在 webview 内写入，即无法在搜索框中写入，如图所示。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="10" >

        <EditText
            android:id="@+id/etURL"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="2" >
        </EditText>

        <Button
            android:id="@+id/bGo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="8"
            android:text="Go" >
        </Button>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="8" >

        <Button
            android:id="@+id/bBack"
            android:layout_width="115dp"
            android:layout_height="wrap_content"
            android:text="Back" >
        </Button>

        <Button
            android:id="@+id/bForward"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Forward" >
        </Button>

        <Button
            android:id="@+id/bRefresh"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="8"
            android:text="Refresh" >
        </Button>
    </LinearLayout>

    <WebView
        android:id="@+id/WebEngine"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="17.26" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:56:34.690

终于在下面的链接 [http://code.google.com/p/android/issues/detail?id=7189得到了答案](http://code.google.com/p/android/issues/detail?id=7189)

```
webview.requestFocus(View.FOCUS_DOWN);
        webview.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                    case MotionEvent.ACTION_UP:
                        if (!v.hasFocus()) {
                            v.requestFocus();
                        }
                        break;
                }
                return false;
            }
        }); 
```

# php - 在php中将静态值从一个类复制到另一个类

> ID：15191299
> 
> 赞同：1
> 
> 时间：2013-03-03T21:48:05.837
> 
> 标签：php, class, static, copy

我正在尝试将值从静态数组复制到另一个类参数。所以，我不知道这是可能的，或者我只是在处理一个简单的错误。

```
class EstadosConstantes
{
    const NO_APLICA = 0;
    const LIBRE = 1;

    public static $celdas = array(
        self::LIBRE => array(
            'id' => self::LIBRE , 
            "estilo" => "libre"
        ), 
        self::NO_APLICA => array(
            'id' => self::NO_APLICA, 
            "estilo" => "no-aplica"
        ),
    );
} 
```

这是另一个类：

```
class Reservacion
{

     public static $estados = array(
        \models\EstadosConstantes::LIBRE => \models\EstadosConstantes::$celdas[\models\EstadosConstantes::LIBRE],
    ); 
```

正如您在上面提到的，我想将 LIBRE 数组从类复制`EstadosConstantes`，`Reservacion`但如果我尝试该选项，我会收到此错误：

> 解析错误：语法错误，意外的 T_VARIABLE，在第 22 行的 /models/Reservacion.php 中需要 T_STRING

在哪里`line 22`：

```
\models\EstadosConstantes::LIBRE => \models\EstadosConstantes::$celdas[\models\EstadosConstantes::LIBRE], 
```

我只是将所有可能的值集中在 中`EstadosConstantes`，然后，每个类都可以复制所需的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:04:42.827

来自[PHP 手册](http://fr2.php.net/manual/en/language.oop5.static.php)

> 因此，虽然您可以将静态属性初始化为整数或数组（例如），但您不能将其初始化为另一个变量、函数返回值或对象。

因此，你不能这样做，因为`EstadosConstantes::$celdas`是一个变量

或者，正如 Michel Feldheim 在评论中建议的那样，您可以在构造函数中初始化它，但它只有在创建实例后才可用

```
class Reservacion
{
    public static $estados;

    public function __construct() {
        self::$estados = array(EstadosConstantes::LIBRE => EstadosConstantes::$celdas[EstadosConstantes::LIBRE]);
    }
}

$reservacion = new Reservacion();

var_dump(Reservacion::$estados); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:26:52.753

出色地，

这就是我的工作方式：只保留引用，而不是整个数组：

```
class Reservacion
{

     public static $estados = array(
        \models\EstadosConstantes::LIBRE
    ); 
```

然后，如果想要一个特定的值，我可以这样做：

```
$estilo = models\EstadosConstantes::$celdas[models\Reservacion::$estados[\models\EstadosConstantes::LIBRE]]['estilo']; 
```

# ruby-on-rails - Capybara 测试 javascript 无法刷新 .count

> ID：15191304
> 
> 赞同：3
> 
> 时间：2013-03-03T21:48:27.453
> 
> 标签：ruby-on-rails, rspec, tdd, capybara

在 rspec 中使用 Capybara 测试 javascript 警报。为什么

```
expect{
  click_link "Cancel my account"
  page.driver.browser.switch_to.alert.accept
}.to change(User, :count).by(-1) 
```

失败。然而

```
puts User.count
expect{
  click_link "Cancel my account"
  page.driver.browser.switch_to.alert.accept
  puts User.count
}.to change(User, :count).by(-1) 
```

没有？如何修复测试？没有`reload`功能`User`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T21:54:52.667

由于您使用的是 javascript 规范，因此浏览器/JS 与您的测试在不同的进程中运行，并且 Capybara 不知道要等到浏览器请求完成后再继续，因为您在接受后没有发出任何 Capybara 命令警报。我猜测`puts`增加的时间延迟足以让实际数据库发生变化。如果您想等待 Capybara 返回直到下一页开始加载（因此数据库已更新），您可以在块的末尾执行以下操作：

```
page.find('head'). 
```

# laravel - Laravel：为什么缓存数据是二进制的？

> ID：15191307
> 
> 赞同：3
> 
> 时间：2013-03-03T21:48:50.603
> 
> 标签：laravel, laravel-4

我不确定，但我认为使用存储的数据`Cache::remember`是二进制的。它看起来像这样并继续：`3133 3632 3334 3838 3533 613a 343a 7b73`.

为什么它被编码/二进制/不管它是什么？

编辑：我目前正在使用文件缓存，因为数据库缓存给了我错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:05:50.657

您正在查看的是编码的加密缓存

所有缓存都源自`Store.php`. `DatabaseStore.php`是存储功能包含加密的唯一方法。Laravel 数据库缓存源代码包含以下注释：

> 数据库中的所有缓存值都被加密，以防消费者将其用作会话数据存储

换句话说，如果您的数据库遭到破坏 - 如果数据也无法访问您的源代码，理论上数据就会受到保护。

缓存使用您的密钥（在 中定义`app.php`）作为密码来加密/解密这个密钥。加密发生在`Encrypter.php`文件中，在 get/set 缓存调用期间由继承的存储文件（即 DatabaseStore.php）调用。

编辑：作为演示 - 以下文件缓存

```
Cache::remember('test', 5, function()
{
    return 'example';
}); 
```

结果是

```
 1362413945s:1:"example"; 
```

# c++ - 如何直接从通过模板函数而不是变量传递的类型检查类型？

> ID：15191315
> 
> 赞同：0
> 
> 时间：2013-03-03T21:49:46.633
> 
> 标签：c++

我在头文件中定义了以下模板函数。

```
template <class T> T* spawnEnemy(SpawnDirection dir); 
```

我的目的是创建一个通用的生成函数，它接受敌人**类型**作为模板参数并从函数返回生成的对象。

以下是**不正确**的实现，但我用它来表达我想要实现的目标。

```
template <class T> T* ObjectSpawner::spawnEnemy(SpawnDirection dir)
{
    if(_enemiesPool->isAnyFreeObjects())
    {
        T* enemy = NULL;
        if(typeof(T*) == Zombie01)   // This line is INCORRECT
            enemy = dynamic_cast<T*>(_enemiesPool->popFreeObjectAndAddToActiveListForType(ZOMBIE));
        else if ...

        return enemy;
    }
    else
        return NULL;
} 
```

那就是我需要能够从**T**进行类型检查，所以我可以适当地调用函数

```
popFreeObjectAndAddToActiveListForType(int type) 
```

以正确的值作为输入。

那么如何在模板函数中进行类型检查呢？

编辑：在得到了[stephen lin](https://stackoverflow.com/questions/15191315/how-to-check-type-directly-from-type-that-passed-through-template-function-not-f#comment21403834_15191315)和[nvoigt](https://stackoverflow.com/questions/15191315/how-to-check-type-directly-from-type-that-passed-through-template-function-not-f/15191385#comment21403895_15191315)的建议后，我发现这个设计有一个缺陷，但这是因为我已经将它加满了。更容易的是让函数有另一个**类型**参数并且不涉及模板但需要稍后转换为特定类型。无论如何，很高兴知道这种情况的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:56:46.597

一种可能性是使用`dynamic_cast`，如果`T`是 的基类`Zombie01`：

```
T *enemy = dynamic_cast<Zombie01*>(x);
if (!enemy)
{
   // x can not cast to Zombie01
   // do something else
} 
```

但是，建议尽量减少使用`dynamic_cast`

另一个想法是使用[`std::is_same`](http://en.cppreference.com/w/cpp/types/is_same)：

> 如果 T 和 U 以相同的 const-volatile 限定命名同一类型，则提供等于 true 的成员常量值。否则值为假。

但是，我正在尝试使用来自 Effective C++ 的 Scott Meyers 的提示：

> “任何时候你发现自己在编写“如果对象是 T1 类型，那么做某事，但如果它是 T2 类型，那么做其他事情”形式的代码，”打自己一巴掌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:58:46.703

我*想*你想要这样的东西（使用类型特征）：

以下代码部分必须放在类部分之外。

```
template <typename T>
struct EnemyTraits { };

template <>
struct EnemyTraits<Zombie01> { static const int pop_type = ZOMBIE; };

template <>
struct EnemyTraits<Vampire01> { static const int pop_type = VAMPIRE; }; 
```

[应按照this](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)中的建议在头文件中定义以下函数。

```
template <typename T> T* ObjectSpawner::spawnEnemy(SpawnDirection dir)
{
    if(_enemiesPool->isAnyFreeObjects())
    {
        const int pop_type = EnemyTraits<T>::pop_type;
        return dynamic_cast<T*>(_enemiesPool->popFreeObjectAndAddToActiveListForType(pop_type));
    }
    else
        return NULL;
} 
```

# android - 尝试使用电话类获取单元位置时发生 ClassCastExeption 错误

> ID：15191316
> 
> 赞同：1
> 
> 时间：2013-03-03T21:49:52.337
> 
> 标签：android, location, telephony

我在 Google Play 上收到了一些关于 CdmaCellLocation 的报告（来自同一用户）：

```
 java.lang.ClassCastException: android.telephony.cdma.CdmaCellLocation 
```

这是一项使用 Cell Network 报告 Approximativ 用户位置的服务，请注意它 100% 为我工作，我没有任何其他关于此错误的报告，这里是来自 onStart() 的代码：

```
 public class ServiceLocation extends Service{
int myLatitude , myLongitude;
private String str2;    
static SharedPreferences prefs;
private String numtosend;

public int onStartCommand(Intent itn,int num1, int num2){

     prefs = getSharedPreferences("Preferences", 
             Context.MODE_PRIVATE);

        if(isAirplaneModeOn(this)){
            stopSelf();
        }

    Bundle extras = itn.getExtras();

     if(extras.containsKey("ExtraName") != true){
     str2 = itn.getStringExtra("Number");
     }
     location(str2);

     return 0;

   } 
```

这里的位置方法代码：

```
 public void location(String num){
    // TODO Auto-generated method stub

     TelephonyManager telephonyManager = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
     if(telephonyManager.getSimState() != TelephonyManager.SIM_STATE_ABSENT){
     numtosend = "Phone Number (If Avaible) : " + " " + telephonyManager.getLine1Number() + "  " + " Sim Serial : " + telephonyManager.getSimSerialNumber() + "  " + "IMEI : " + telephonyManager.getDeviceId();
     }
     else {
         numtosend = this.getResources().getString(R.string.txtNoSimCard) + telephonyManager.getDeviceId();
     }
     GsmCellLocation cellLocation = (GsmCellLocation) telephonyManager.getCellLocation();

        int cid = cellLocation.getCid();
        int lac = cellLocation.getLac();

        if(RqsLocation(cid, lac)){

      if(str2.equals("") != true && str2.equals(null) != true) {
      SmsManager.getDefault().sendTextMessage(num, null, this.getResources().getString(R.string.txtGPSPosition) + "(40-250 Meters Accuracy) : "+"http://maps.google.com/?q="+String.valueOf((float)myLatitude/1000000) +","+String.valueOf((float)myLongitude/1000000), null, null);

        }

        if(gmailaccount.equals("") != true && gmailpass.equals(null) != true){

                 P m = new P(gmailaccount , gmailpass);

                             String[] Mail = {mail};
                             m.setTo(Mail);
                             m.setFrom("AnonymousMail@gmail.com"); 
                             m.setSubject("Location");
                             m.setBody(this.getResources().getString(R.string.txtGPSPosition) + "(~300 Meters Accuracy) : " + "http://maps.google.com/?q="+String.valueOf((float)myLatitude/1000000) +","+String.valueOf((float)myLongitude/1000000) + " " + str2 + "  " + numtosend); 

                             try {
                                if(m.send()){
                                     stopSelf();
                                 }
                                else {

                                     if(str2.equals("") != true) {
                                            SmsManager.getDefault().sendTextMessage(str2, null, "Impossible to Send a Message to your Emergency Mail Address !", null, null);
                                                 }
                                     stopSelf();
                                }
                            } catch (Exception e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }

    }

        }

      else{
          if(str2.equals("") != true && str2.equals(null) != true) {
            SmsManager.getDefault().sendTextMessage(num, null, this.getResources().getString(R.string.txtInternetOffLocation), null, null);
          }

          if(gmailaccount.equals("") != true && gmailpass.equals(null) != true){
             P m = new P(gmailaccount , gmailpass);

                         String[] Mail = {mail};
                         m.setTo(Mail);
                         m.setFrom("AnonymousMail@gmail.com"); 
                         m.setSubject("Location");
                                m.setBody(this.getResources().getString("Internet Off)); 

                         try {
                            if(m.send()){
                                 stopSelf();
                             }
                            else {

                                 if(str2.equals("") != true) {

                                             }
                                 stopSelf();
                            }
                        } catch (Exception e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
          }

          }

        stopSelf();

} 
```

最后是来自 Google Play 的 LogCat：

```
 java.lang.RuntimeException: Unable to start service com.xxx.xxx.xxx.ServiceLocation@4051b930 with Intent {            cmp=com.xxx.xxx.xxx/.ServiceLocation (has extras) }: java.lang.ClassCastException:                 android.telephony.cdma.CdmaCellLocation
   at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2052)
   at android.app.ActivityThread.access$2800(ActivityThread.java:117)
   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:994)
   at android.os.Handler.dispatchMessage(Handler.java:99)
   at android.os.Looper.loop(Looper.java:130)
   at android.app.ActivityThread.main(ActivityThread.java:3683)
   at java.lang.reflect.Method.invokeNative(Native Method)
   at java.lang.reflect.Method.invoke(Method.java:507)
   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:875)
   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:633)
   at dalvik.system.NativeStart.main(Native Method)
   Caused by: java.lang.ClassCastException: android.telephony.cdma.CdmaCellLocation
   at com.xxx.xxx.xxx.ServiceLocation.location(ServiceLocation.java:83)
   at com.xxx.xxx.xxx.ServiceLocation.onStartCommand(ServiceLocation.java:53)
   at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2039)
  ... 10 more 
```

您认为这是电话提供商的问题，还是来自平板电脑？

[Off-Topic] 顺便说一下，我在哪里以及如何报告这个：

![在此处输入图像描述](../Images/0eb3ab3b5dfe11cdd50a44ee6e268b27.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:09:17.363

```
GsmCellLocation cellLocation = (GsmCellLocation) telephonyManager.getCellLocation(); 
```

这是一个不安全的演员表。您的代码假定此方法将始终返回一个实例，`GsmCellLocation`但事实并非如此。有两种类型的蜂窝网络。GSM和CDMA。

如果手机在 CDMA 网络上运行，`getCellLocation()`则将返回`CdmaCellLocation`.

您可以致电`telephonyManager.getPhoneType()`获取有关设备使用的无线电类型的信息。此方法将返回以下四个值之一：

**PHONE_TYPE_NONE** - 设备没有蜂窝无线电。例如，它可能是没有 3G 调制解调器的平板电脑。`getCellLocation()`将返回`null`。

**PHONE_TYPE_GSM** - 该设备有一个 GSM 无线电。您可以放心拨打`(GsmCellLocation) telephonyManager.getCellLocation();`

**PHONE_TYPE_CDMA** - 该设备有一个 GSM 无线电。您可以放心拨打`(CdmaCellLocation) telephonyManager.getCellLocation();`

**PHONE_TYPE_SIP** - 设备使用 SIP（​​会话发起协议）进行通信。`getCellLocation()`将返回`null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T22:12:47.613

研究这一点，您可以使用`getPhoneType()`TelephonyManager 类确定电话类型。

我会尝试以下方法：

```
switch( telephonyManager.getPhoneType() ) {

    case PHONE_TYPE_GSM: {
         // Handle GSM phone
         GsmCellLocation cellLocation = (GsmCellLocation) telephonyManager.getCellLocation();
         break;
    }
    case PHONE_TYPE_CDMA: {
         // Handle CDMA phone
         CdmaCellLocation cellLocation = (CdmaCellLocation) telephonyManager.getCellLocation();
         break;
    }
    default: {
        // can't do cell location
    } 
```

# ios - 有阴影的视图

> ID：15191319
> 
> 赞同：1
> 
> 时间：2013-03-03T21:50:28.407
> 
> 标签：ios, objective-c, uiview, core-graphics

![在此处输入图像描述](../Images/55f466ff44cfc436adcabb09459b1b00.png)

我正在寻找一种方法来编写类似上图的效果（来自 Groupon 应用程序）以供查看。使用下面的代码，我试图让阴影出现，但它不起作用。我正在寻找的效果是视图从上到下变暗。谁能告诉我我做错了什么，以及如何更接近 Groupon 的效果？

```
 view.layer.shadowColor           =   [[UIColor blackColor] CGColor];
   view.layer.shadowRadius          =   8.0f;
   view.layer.shadowOpacity         =   0.75f;
    UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:view.bounds cornerRadius:4.0];
   view.layer.shadowPath            =   path.CGPath; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:50:43.950

您正在寻找的效果称为渐变。（在 iOS 术语中，阴影是某个对象的复制品，经过模糊、着色和偏移。）

您可以使用[CAGradientLayer](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAGradientLayer_class/Reference/Reference.html)来获得您正在寻找的那种效果；尝试将其中之一添加为视图的子层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T04:02:32.873

只是重申上面 Jesse Rusak 的解决方案，在你的 UIView 的 Drawrect 中，你创建一个从清晰到黑色的渐变并将它添加到你的视图的子层：

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    UIColor * darkerColor = [UIColorcolorWithWhite:0.0alpha:0.5];
    CGContextSetFillColorWithColor(context, darkerColor.CGColor);
    CGContextFillRect(context, self.bounds);
    NSArray *colors = [NSArrayarrayWithObjects:
                   ((id)[self.backgroundColorcolorWithAlphaComponent:0.0f].CGColor),
                   ((id) [UIColorcolorWithWhite:0.0alpha:1.0].CGColor), nil];
    gradientLayer = [[CAGradientLayeralloc] init];
    gradientLayer.startPoint = CGPointMake(0.5, 0);
    gradientLayer.endPoint = CGPointMake(0.5,1);
    gradientLayer.frame = self.frame;
    gradientLayer.colors = colors;
    [self.layerinsertSublayer:gradientLayeratIndex:0];
} 
```

# c# - C# 鼠标移动 (WinForm)

> ID：15191329
> 
> 赞同：0
> 
> 时间：2013-03-03T21:51:39.060
> 
> 标签：c#, winforms

我一直在试图弄清楚如何做到这一点，我需要一些帮助。

您将如何创建它：当您单击按钮时，鼠标光标将移动到特定位置，然后在 3 秒后左键单击，然后在 1 秒后将光标移动到不同位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:58:53.817

Cursor.Position 将获取或设置位置。查看 .NET 游标类[http://msdn.microsoft.com/en-us/library/sf27z138.aspx](http://msdn.microsoft.com/en-us/library/sf27z138.aspx)

您可以使用 mouse_event win32 API 模拟点击

[http://msdn.microsoft.com/en-nz/library/windows/desktop/ms646260%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-nz/library/windows/desktop/ms646260%28v=vs.85%29.aspx)

如何获取位置：

```
 Point FormLocation = this.Location;

   Point ButtonLocation = this.button1.Location; 
```

# ruby-on-rails - capistrano 帽部署：冷错误

> ID：15191332
> 
> 赞同：0
> 
> 时间：2013-03-03T21:52:31.427
> 
> 标签：ruby-on-rails, deployment, capistrano

生产服务器：Ubuntu 12.04、Apache、Passenger、RVM、Ruby 2、Rails 4、Postgresql

cap deploy:cold 后出现此错误（我更改了用户名和 IP）：

```
* 2013-03-04 12:17:56 executing `deploy:cold'
  * 2013-03-04 12:17:56 executing `deploy:update'
 ** transaction: start
  * 2013-03-04 12:17:56 executing `deploy:update_code'
    updating the cached checkout on all servers
    executing locally: "git ls-remote git@github.com:user/captest.git master"
    command finished in 4655ms
  * executing "if [ -d /home/user/apps/captest/shared/cached-copy ]; then cd /home/user/apps/captest/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 0ad1ab0c9e73b41959981a1415f71a42e80c0443 && git clean -q -d -x -f; else git clone -q git@github.com:user/captest.git /home/user/apps/captest/shared/cached-copy && cd /home/user/apps/captest/shared/cached-copy && git checkout -q -b deploy 0ad1ab0c9e73b41959981a1415f71a42e80c0443; fi"
    servers: ["192.33.33.333"]
    [192.33.333.333] executing command
    command finished in 5870ms
    copying the cached version to /home/user/apps/captest/releases/20130304111807
  * executing "cp -RPp /home/user/apps/captest/shared/cached-copy /home/user/apps/captest/releases/20130304111807 && (echo 0ad1ab0c9e73b41959981a1415f71a42e80c0443 > /home/user/apps/captest/releases/20130304111807/REVISION)"
    servers: ["192.33.333.333"]
    [192.33.333.333] executing command
    command finished in 122ms
  * 2013-03-04 12:18:07 executing `deploy:finalize_update'
    triggering before callbacks for `deploy:finalize_update'
  * 2013-03-04 12:18:07 executing `deploy:assets:symlink'
  * executing "rm -rf /home/user/apps/captest/releases/20130304111807/public/assets && mkdir -p /home/user/apps/captest/releases/20130304111807/public && mkdir -p /home/user/apps/captest/shared/assets && ln -s /home/user/apps/captest/shared/assets /home/user/apps/captest/releases/20130304111807/public/assets"
    servers: ["192.33.333.333"]
    ["192.33.333.333"] executing command
    command finished in 134ms
  * 2013-03-04 12:18:07 executing `bundle:install'
  * executing "cd /home/user/apps/captest/releases/20130304111807 && bundle install --gemfile /home/user/apps/captest/releases/20130304111807/Gemfile --path /home/user/apps/captest/shared/bundle --deployment --quiet --without development test"
    servers: ["192.33.333.333"]
    [192.33.333.333] executing command
 ** [out :: 192.33.333.333] sh: 1:
 ** [out :: 192.33.333.333] bundle: not found
 ** [out :: 192.33.333.333] 
    command finished in 110ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/user/apps/captest/releases/20130304111807; true"
    servers: ["192.33.333.333"]
    [192.33.333.333] executing command
    command finished in 118ms
failed: "sh -c 'cd /home/user/apps/captest/releases/20130304111807 && bundle install --gemfile /home/user/apps/captest/releases/20130304111807/Gemfile --path /home/user/apps/captest/shared/bundle --deployment --quiet --without development test'" on 192.33.333.333 
```

我基本上遵循了 railscasts 剧集“部署到 vps”的说明。这是我的 deploy.rb 文件：

```
require "bundler/capistrano"

server "192.33.333.333", :web, :app, :db, primary: true

set :application, "captest"
set :user, "user"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :repository, "git@github.com:user/#{application}.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  task :start do; end
  task :stop do; end
  task :restart, roles: :app, except: {no_release: true} do
    run "touch #{deploy_to}/current/tmp/restart.txt"
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/apache.conf /etc/apache2/sites-available/#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.example.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"
end 
```

我尝试直接从服务器进行捆绑安装，但不知道在哪里，因为我对应用程序结构感到困惑。还尝试了“需要 rvm/capistrano”，但也出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T00:46:02.227

您需要在目标服务器上安装捆绑程序。

```
gem install bundler 
```

它通常是您需要以这种方式安装的唯一 gem，因为它不能自行安装。

这个要点并不完全适合您的需求，但我是如何引导 Ruby 2.0 Ubuntu 服务器的，可能会有所帮助：[https ://gist.github.com/cmaitchison/4083459](https://gist.github.com/cmaitchison/4083459)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:21:16.343

你仍然没有看到真正的错误是什么。

如果 cap deploy:cold 命令上的 -v（表示详细）没有告诉您真正的问题，则 ssh 进入服务器并运行命令：`cd /home/user/apps/captest/releases/20130304111807 && bundle install --gemfile /home/user/apps/captest/releases/20130304111807/Gemfile --path /home/user/apps/captest/shared/bundle --deployment --quiet --without development test`

听起来您的 ruby​​ 环境可能未在服务器上正确设置。

编辑：实际上，如果它被删除，那可能不起作用。我有一个类似的问题，我通过手动将项目克隆到我的生产服务器并运行 bundle install 来调试任何问题来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:55:12.763

我遇到了同样的问题并确定了解决方案。

在您的服务器上，卸载所有版本的 Bundler。系统将提示您删除可执行文件。选择是。然后`gem install bundler`应该安装 1.3.2 或更高版本。

在您的 Gemfile 中，确保来源是`https`，而不是`http`.`source 'https://rubygems.org'`

引用：[https ://github.com/carlhuda/bundler/issues/2378#issuecomment-14714639](https://github.com/carlhuda/bundler/issues/2378#issuecomment-14714639)

# php - Facebook api 结果仅适用于我的计算机，但不适用于其他计算机

> ID：15191333
> 
> 赞同：0
> 
> 时间：2013-03-03T21:52:32.270
> 
> 标签：php, api, facebook-graph-api, facebook-fql

所以我使用了 facebook 图形 API 来拉取我喜欢的 Facebook 页面，它可以在我的基于 windows 的计算机上，在所有浏览器上运行。但是当谈到从另一台计算机检查结果时，它不起作用......知道为什么吗？沙盒模式也被禁用

这是我使用的方法，我使用带有页面思想的Graph API来获取关于它的信息，包括页面的封面图片..下面是一个例子

```
 $pages = $facebook->api("/224837280446"); 
```

它可以在我的基于 Windows 的笔记本电脑上运行，但不能在 Mac 上运行。非常感谢您的帮助。

这是我的配置

```
<?php

    //facebook application
    $fbconfig['appid' ]     = "xxxxxxxxxxxxxxxxxxxxxxxx";
    $fbconfig['secret']     = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
    $fbconfig['baseurl']    = "http://xxxxxxxxxxx.php"; 

    //
    if (isset($_GET['request_ids'])){
        //user comes from invitation
        //track them if you need
    }

    $user            =   null; //facebook user uid
    try{
        include_once "facebook.php";
    }
    catch(Exception $o){
        error_log($o);
    }
    // Create our Application instance.
    $facebook = new Facebook(array(
      'appId'  => $fbconfig['appid'],
      'secret' => $fbconfig['secret'],
      'cookie' => false,
    ));

    //Facebook Authentication part
    $user       = $facebook->getUser();
    // We may or may not have this data based 
    // on whether the user is logged in.
    // If we have a $user id here, it means we know 
    // the user is logged into
    // Facebook, but we don稚 know if the access token is valid. An access
    // token is invalid if the user logged out of Facebook.

    $loginUrl   = $facebook->getLoginUrl(
            array(
                'scope'         => 'email,offline_access,publish_stream,user_birthday,user_location,user_work_history,user_about_me,user_hometown',
                'redirect_uri'  => 'http://www.europe-zone.com/members.php'
            )
    );

    $logoutUrl  = $facebook->getLogoutUrl();

    if ($user) {
      try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
      } catch (FacebookApiException $e) {
        //you should use error_log($e); instead of printing the info on browser
       // d($e); d is a debug function defined at the end of this file
        $user = null;
      }
    }

    //if user is logged in and session is valid.
    if ($user){
        //get user basic description
        $userInfo           = $facebook->api("/$user");

        //Retriving movies those are user like using graph api
        try{
            $movies = $facebook->api("/$user/movies");
           // $pages = $facebook->api("/224837280446");
           // $feeds = $facebook->api("/224837280446/feed");
        }
        catch(Exception $o){
            d($o);
        }

        //update user's status using graph api
        //http://developers.facebook.com/docs/reference/dialogs/feed/
        if (isset($_GET['publish'])){
            try {
                $publishStream = $facebook->api("/$user/feed", 'post', array(
                    'message' => "I love thinkdiff.net for facebook app development tutorials. :)", 
                    'link'    => 'http://ithinkdiff.net',
                    'picture' => 'http://thinkdiff.net/ithinkdiff.png',
                    'name'    => 'iOS Apps & Games',
                    'description'=> 'Checkout iOS apps and games from iThinkdiff.net. I found some of them are just awesome!'
                    )
                );
                //as $_GET['publish'] is set so remove it by redirecting user to the base url 
            } catch (FacebookApiException $e) {
                d($e);
            }
            $redirectUrl     = $fbconfig['baseurl'] . '/members.php?success=1';
            header("Location: $redirectUrl");
        }

        //update user's status using graph api
        //http://developers.facebook.com/docs/reference/dialogs/feed/
        if (isset($_POST['tt'])){
            try {
                $statusUpdate = $facebook->api("/$user/feed", 'post', array('message'=> $_POST['tt']));
            } catch (FacebookApiException $e) {
                d($e);
            }
        }

        //fql query example using legacy method call and passing parameter
        try{
           $fql    =   "SELECT page_id FROM page_fan WHERE uid = me()";
            $param  =   array(
                'method'    => 'fql.query',
                'query'     => $fql,
                'callback'  => ''
            );
            $fqlResult   =   $facebook->api($param);
        }
        catch(Exception $o){
           // d($o);
        }

// Second query

 try{
           $sql    =   "SELECT page_id FROM page_fan WHERE uid = me()";
            $param  =   array(
                'method'    => 'fql.query',
                'query'     => $sql,
                'callback'  => ''
            );
            $sqlResult   =   $facebook->api($param);
        }
        catch(Exception $o){
          //  d($o);
        }
    }

    function d($d){
        echo '<pre>';
        print_r($d);
        echo '</pre>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T21:34:33.100

这段代码是从 Windows 上的 WAMP 和 Mac 上的 MAMP 等本地运行的吗？或者您是从不是您本地的 Web 服务器运行它吗？

如果它是本地的，我会说检查您的配置，或者至少在两者上尝试 XAMPP 并镜像设置。

# c++ - STL 矢量化地图 - 寻找最佳实践

> ID：15191337
> 
> 赞同：0
> 
> 时间：2013-03-03T21:53:03.740
> 
> 标签：c++, map, vector, stl

我对 STL 不太熟悉，所以我不确定这里的最佳方法。

我有一组动作，每个动作都与一个唯一的 ID 相关联。为了确保我不会重复这些操作，我最初想将它们存储在一个`std::map`, 键入 ID 中。但是，我需要在内部保留严格*的顺序 la* `std::vector`，这样当我展开我的操作时，它们会以添加时的相反顺序出现。

任何给定的操作列表可以是从一两个项目到数千个项目的任何地方。如果我切换到手动检查`vector`重复项（即遍历和检查 ID），我会丢失任何东西吗？或者是否有某种形式的`map`容器或其他容器可以让我按 ID 查找，但不会在内部对元素进行排序或重新排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:55:30.500

您可能想要使用[boost:multi_index](http://www.boost.org/doc/libs/1_48_0/libs/multi_index/doc/index.html)映射，它可以支持映射的插入顺序。

```
struct Item 
{
      string name;
      int data;
};
struct ItemTag {};
typedef multi_index_container<
    Item,
    indexed_by<
        random_access<>, // this index represents insertion order
        hashed_unique< tag<ItemTag>, member<Item, string, &Item::name> >
    >
> ItemsMap; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T21:56:25.287

听起来你需要[Boost.MultiIndex](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/index.html)

> Boost Multi-index Containers Library 提供了一个名为 multi_index_container 的类模板，它支持构建容器来维护一个或多个具有不同排序和访问语义的索引。索引提供类似于 STL 容器的接口，使使用它们变得熟悉。对同一元素集合进行多索引的概念是从关系数据库术语中借用的，它允许本着多索引关系表的精神来规范复杂的数据结构，其中简单的集合和映射是不够的。提供了广泛的索引选择，模仿类似的 STL 容器，如 std::set、std::list 和散列集。

# ios - 如何在单独的线程中刷新单元格（从车道内的时间递减，UTC，并显示新值）以避免阻塞 UI？

> ID：15191338
> 
> 赞同：0
> 
> 时间：2013-03-03T21:53:05.760
> 
> 标签：ios, ios5, ios6

我在 UITableView 时间标签内有自定义单元格，我需要每 10 毫秒递减一次，直到它达到零。如何在单独的线程中刷新单元格（从车道内的时间递减，UTC，并显示新值）以避免阻塞 UI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:47:44.107

这行得通。如果您需要每 10 毫秒执行一次，请设置一个[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

```
[self.tableView reloadRowsAtIndexPaths:<#(NSArray *)#> withRowAnimation:<#(UITableViewRowAnimation)#>]; 
```

# php - 在交替背景表上显示评论的友好方式

> ID：15191340
> 
> 赞同：0
> 
> 时间：2013-03-03T21:53:27.053
> 
> 标签：php, html, css

我有一个使用 PHP 从 sql server 数据库动态构建的表，如下所示：

![在此处输入图像描述](../Images/0fe464d94aa61bcb65862749484d3be3.png)

对于每个`TYPE`我有文本**READY**或**NOT READY**的地方，我想在下面显示一行，如下所示：

```
Comment: Resident is having trouble with paperwork 
```

我试着用EXCEL做一个模型，但我的艺术能力是不存在的。

![在此处输入图像描述](../Images/652e60d029984195c5f629a7b19a160b.png)

我将非常感谢有关如何使该表仍然交替且看起来不错的建议，即使我需要为这些特定条目添加额外的行。

# php - 用于解析类似 Google 的搜索运算符的 PHP 库？

> ID：15191345
> 
> 赞同：7
> 
> 时间：2013-03-03T21:53:41.757
> 
> 标签：php, search

我想创建一个 PHP 搜索功能，但使用类似 Google 的运算符。例如：

```
these words "this phrase" location:"Los Angeles" operator:something 
```

重要的是，像 location: 这样的运算符支持在其中包含空格的值（因此在此示例中使用引号），因此我不能只拆分或使用标准标记。我想有人在某个时候为此创建了一个库，但我找不到。

或者，如果它不需要库，那​​么这样做的好方法会很好。

这只是我需要的搜索查询的解析；即从上面的查询中可以得到一个包含以下内容的数组：

```
[0] => these
[1] => words
[2] => "this phrase"
[3] => location:"Los Angeles"
[4] => operator:something 
```

由此我可以为数据库构建一个搜索功能。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-03T22:02:19.170

您可以从[str_getcsv()](http://php.net/manual/en/function.str-getcsv.php)开始并使用空格作为分隔符，但您可能必须预处理 location & 运算符以处理特定情况下的引号。

```
<?php
$str = 'these words "this phrase" location:"Los Angeles" operator:something';

// preprocess the cases where you have colon separated definitions with quotes
// i.e. location:"los angeles"
$str = preg_replace('/(\w+)\:"(\w+)/', '"${1}:${2}', $str);

$str = str_getcsv($str, ' ');

var_dump($str);
?> 
```

输出

```
array(5) {
  [0]=>
  string(5) "these"
  [1]=>
  string(5) "words"
  [2]=>
  string(11) "this phrase"
  [3]=>
  string(20) "location:Los Angeles"
  [4]=>
  string(18) "operator:something"
} 
```

# regex - Bash 正则表达式未捕获

> ID：15191346
> 
> 赞同：0
> 
> 时间：2013-03-03T21:53:48.580
> 
> 标签：regex, bash, shell

我有一个包含文本的字符串：

```
...,"names":"exampleName",... 
```

我有以下 if 语句来检查正则表达式模式是否与字符串匹配：

```
if [[ $string =~ names\":\"(\w+)\" ]]; then
      echo "Matches"
fi 
```

问题是 echo 语句永远不会被执行，这本质上意味着正则表达式不匹配。

我在这里做错了吗？因为它应该匹配...

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:54:44.453

这里的问题似乎是您使用了不受支持的字符类标识符。根据下面的参考文献 1，似乎 bash 使用 POSIX 字符类，而不是 vi 和其他地方使用的斜线转义字符类。

而不是使用`\w`你应该使用`[[:alnum:]_]`（字母数字加下划线）。我会说使用`[[:word:]]`，但显然并非所有版本的 bash 都支持（因为我的不支持）。

适当修改的代码版本如下所示：

```
string='...,"names":"exampleName",...'

if [[ $string =~ names\":\"([[:alnum:]_]+)\" ]]; then
  echo "Matches"
fi 
```

**参考：**

1.  [http://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html](http://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html)
2.  [http://www.regular-expressions.info/posixbrackets.html](http://www.regular-expressions.info/posixbrackets.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:18:16.423

这是一个引用问题，参见例如[这个](https://stackoverflow.com/questions/218156/bash-regex-with-quotes)

尝试：

```
$ string='...,"names":"exampleName",...'

$ re='names":"(\w+)"'

$ if [[ $string =~ $re ]]; then echo match; fi
match 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T23:22:43.257

尝试：

```
if [[ $string =~ names\":\"[[:alnum:]_]+\" ]]; then 
```

# jquery - 使用 YQL、flot 和 jquery 处理一些 github 参与数据，但 JSON 不合作

> ID：15191348
> 
> 赞同：1
> 
> 时间：2013-03-03T21:54:06.850
> 
> 标签：jquery, json, flot, yql

所以我在搞乱 YQL 看看我是否可以从 github 获取一些数据来用 Flot 创建一些动态图表。

在 YQL 控制台中，如果您使用以下查询：

从 json 中选择总计，其中 url="https://github.com/twitter/bootstrap/graphs/commit-activity-data" 和 itemPath="json.json"

你会得到以下 JSON 结构：

```
{
"query": {
"count": 52,
"created": "2013-03-03T19:56:17Z",
"lang": "en-US",
"results": {
 "json": [
  {
   "total": "55"
  },
  {
   "total": "64"
  },
  {
   "total": "50"
  },
  .....
  {
   "total": "24"
  }
 ]
}
}
} 
```

count 是 52，它是针对项目提交的滚动 52 周跟踪。我只是想用这个 JSON 输出的浮点数创建一个条形图，但我在渲染数据时遇到了麻烦。

我的 javascript 可能是一团糟，因为我掉进了兔子洞。我只想创建一个简单的条形图，其中包含 52 个条形图，表示对项目的提交次数

```
$(function() {
var data = [];
var myData = [];
var placeholder = $("#placeholder");
$.ajax({
    url: "data/latest-yql.json",
    type: "GET",
    dataType: "json",
    complete: function() {
        //called when complete
        console.log('complete');
    },
    success: function(data) {
        var items = data.query.results.json;
        for (var i = 0; i < items.length; i++) {
            var d1 = i;
            var d2 = items[i].total;
            var myData = [
                [d1, d2]
            ];
        };
        $.plot($("#placeholder"), [{
            data: myData,
            bars: {
                show: true
            }
        }]);
    },
    error: function() {
        //called when there is an error
        console.log('error');
    },
}); 
```

});

是否有一个合理的解决方案，我只是因为缺乏睡眠和盯着代码几个小时尝试各种事情而错过了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:21:30.690

有关如何失败的更多信息会有所帮助，但让我感到震惊的一件事是，您在循环的每次迭代中都在重置 myData，因此它始终只包含一个数据点。您已经在准备好的函数顶部将 myData 创建为数组，因此您在循环中要做的就是将数据推送到其中。

# git - 为现有的拉取请求做出贡献

> ID：15191350
> 
> 赞同：5
> 
> 时间：2013-03-03T21:54:12.617
> 
> 标签：git, github

我拥有一个存储库，并且有人提交了拉取请求。我想在引入之前对该拉取请求进行一些更改，这可能吗？

请注意，我希望我的提交显示在拉取请求线程中，以便对话可以继续，等等。

我知道我可以去克隆他的 fork，并在我完成后拉入我的分支，但这并不真正适合围绕讨论和改进的工作流程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-10-17T13:31:09.903

GitHub 添加了一项功能，允许对提出 PR 的分支具有写入权限的用户对原始分支具有写入权限。

这是一个选择退出功能，即

> 只有拉取请求创建者才能授予上游存储库维护者或对上游存储库具有推送访问权限的维护者，以向其拉取请求的比较分支提交提交。
> 
> [..]
> 
> 拉取请求创建者可以在他们最初从分叉创建拉取请求时或在创建拉取请求之后为其每个拉取请求授予这些权限。

[https://help.github.com/articles/allowing-changes-to-a-pull-request-branch-created-from-a-fork/](https://help.github.com/articles/allowing-changes-to-a-pull-request-branch-created-from-a-fork/)

### 例子

让我们以这个 PR 为例，[https://github.com/gajus/table/pull/19](https://github.com/gajus/table/pull/19)。

用户[epoberezkin](https://github.com/epoberezkin)针对[`gajus:master`](https://github.com/gajus/table/tree/master). 此请求的来源是[`epoberezkin:precompile-schemas`](https://github.com/epoberezkin/table/tree/precompile-schemas). 因此，作为具有写入权限的用户，`gajus:master`我可以推送到`epoberezkin:precompile-schemas`分支，这些更改将反映在 PR 中，即

```
git clone git@github.com:gajus/table.git
cd table
git remote add epoberezkin git@github.com:epoberezkin/table.git
git fetch epoberezkin
git checkout epoberezkin/precompile-schemas
# Make changes, commit changes.
git push epoberezkin HEAD:precompile-schemas 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T21:59:00.960

如果您拥有的存储库上有一个开放的拉取请求，那么只有当您提交到具有开放拉取请求的存储库和分支（*他们的*存储库和*他们的*分支）时才会起作用。

所以..如果你想真正实现你所要求的，你需要创建一个到 forker 仓库的拉取请求——你的提交出现在他们的拉取请求中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T22:03:48.470

你只需要

1.  下载分支
2.  做出改变
3.  提交他们
4.  推他们

推送更改后，您将在 Github 拉取请求中看到它们，并且将遵守工作流程。

# animation - 将动画从 Maya 导入 DirectX 应用程序？

> ID：15191352
> 
> 赞同：0
> 
> 时间：2013-03-03T21:54:28.533
> 
> 标签：animation, directx, maya

我目前正在使用 DirectX 开发游戏。我已经在这个项目上使用动画很长一段时间了。我花了一段时间才注意到，但我看到从 Maya 导出时，我的模型和动画在 X 轴上翻转。我曾尝试在这件事上寻求帮助，但互联网实际上并没有太大帮助。我有两个问题。这是个常见的问题吗？有没有“简单”的解决方案来解决这个问题？

我研究了矩阵中的左手习惯变化。这让我参加了许多辩论，其中没有在矩阵中显示惯用手。这个对吗？我只是不确定如何解决这个问题，所以对此事的任何帮助将不胜感激。

提前致谢！亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:10:16.290

Did you try multiplaying your model, or your animation matrices by a scaling matrix (Scaling(-1,0,0)). This will invert all the x coordinates. Your complete transformation should be = model * scaling(-1,0,0) * animation * worldviewproj.

# string - Erlang http客户端正文未解析为字符串

> ID：15191360
> 
> 赞同：0
> 
> 时间：2013-03-03T21:55:37.893
> 
> 标签：string, erlang, httprequest

```
>inets:start().
>{ok, {{NewVersion, 200, NewReasonPhrase}, NewHeaders, NewBody}} = 
httpc:request(get, {"http://msn.com/", [{"connection", "close"}]},[],[]).

> NewBody. 
[60,33,100,111,99,116,121,112,101,32,104,116,109,108,62,60,
 104,116,109,108,32,120,109,108,110,115,61,34,104|...] 
```

Erlang 新手在这里 - 我希望 NewBody 是可读的输出。它没有所以我猜一些字符不能用erlang表示为字母？另外，上面结果末尾的 |... 语法究竟意味着什么——它只是一个缩短器吗？

主要问题 - 如何强制使用上述`NewBody`列表的表示形式的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:01:08.200

您可以使用

```
io:format("~s~n", [NewBody]). 
```

用于“可读”表示。

# c++ - 'boost::Q_FOREACH' 尚未声明

> ID：15191361
> 
> 赞同：0
> 
> 时间：2013-03-03T21:55:43.783
> 
> 标签：c++, qt, boost

在我的代码中，我使用 boost (1.52) 和 qt (4.8.3)，我遇到的第一个编译错误如下

```
D:\qt\4.8.3\x86_64-w64-mingw32\include/QtCore/qglobal.h:2439:21: error: 'boost::Q_FOREACH' has not been declared 
```

它是一个错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-12T08:32:45.093

使用 .cpp 文件启动您的 .cpp 文件`#include <QObject>`。

例如，这个：

```
#include <boost/foreach.hpp>
#include <QObject>
#include <boost/multi_index/hashed_index.hpp> 
```

...编译为`error: 'boost::Q_FOREACH' has not been declared`而这个：

```
#include <QObject>
#include <boost/foreach.hpp>
#include <boost/multi_index/hashed_index.hpp> 
```

...编译得很好。

* * *

`qglobal.h`（包含在所有 Qt 头文件中）创建一个宏，该宏在或之`#define foreach Q_FOREACH`类的引用中扩展，但仅在宏声明之后遇到的引用中。尽早定义宏所有引用都以相同的方式扩展。`boost::foreach::foo``namespace foreach`

我`hashed_index.hpp`在示例中使用，因为它恰好使用了 foreach 命名空间。重命名命名空间很难看，但不会影响客户端代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T22:55:53.130

对于遇到此问题的其他人，另一种解决方法是在 Qt 包含之前包含 Boost

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T22:06:23.983

这可能是由于 boost 和 Qt 之间的冲突引起的。看到这个[帖子](https://stackoverflow.com/questions/13686283/boost-foreach-conflicts-with-q-foreach-qt-and-moc-generation)

有人建议在您的项目文件中使用 CONFIG += no_keywords 。

但我也看到解决此问题的票已关闭.. [https://svn.boost.org/trac/boost/ticket/6455](https://svn.boost.org/trac/boost/ticket/6455) 所以不确定这是否可以帮助您解决问题

# ruby - 哈希解构

> ID：15191364
> 
> 赞同：6
> 
> 时间：2013-03-03T21:55:58.167
> 
> 标签：ruby, hash, splat

您可以使用 splat 运算符解构数组。

```
def foo(arg1, arg2, arg3)
  #...Do Stuff...
end
array = ['arg2', 'arg3']
foo('arg1', *array) 
```

但是有没有办法为了选项类型的优点而破坏哈希？

```
def foo(arg1, opts)
  #...Do Stuff with an opts hash...
end
opts = {hash2: 'bar', hash3: 'baz'}
foo('arg1', hash1: 'foo', *opts) 
```

如果不是原生 ruby​​，Rails 是否添加了类似的东西？

目前我正在做这个大致

```
foo('arg1', opts.merge(hash1: 'foo')) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T22:39:48.187

是的，有一种方法可以解构散列：

```
def f *args; args; end
opts = {hash2: 'bar', hash3: 'baz'}
f *opts  #=> [[:hash2, "bar"], [:hash3, "baz"]] 
```

问题是你想要的实际上*根本不是*解构。你试图从

```
'arg1', { hash2: 'bar', hash3: 'baz' }, { hash1: 'foo' } 
```

（请记住，这`'arg1', foo: 'bar'`只是 的简写`'arg1', { foo: 'bar' }`）

```
'arg1', { hash1: 'foo', hash2: 'bar', hash3: 'baz' } 
```

根据定义，这就是合并（注意周围的结构 - 哈希 - 仍然存在）。而解构从

```
'arg1', [1, 2, 3] 
```

至

```
'arg1', 1, 2, 3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-08-10T18:07:59.120

现在是 2018 年，这值得更新。[Ruby 2.0 引入了关键字参数](https://www.ruby-lang.org/en/news/2013/02/24/ruby-2-0-0-p0-is-released/)以及 hash splat 运算符[`**`](https://ruby-doc.org/core-2.0.0/doc/syntax/calling_methods_rdoc.html#label-Hash+to+Keyword+Arguments+Conversion)。现在您可以简单地执行以下操作：

```
def foo(arg1, opts)
  [arg1, opts]
end

opts = {hash2: 'bar', hash3: 'baz'}
foo('arg1', hash1: 'foo', **opts)
#=> ["arg1", {:hash1=>"foo", :hash2=>"bar", :hash3=>"baz"}] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T22:35:23.820

没有这样的事情（尽管已经提出）。由于这会改变解析规则，它不能在 Ruby 中实现。我能想到的最好的方法是`*`在哈希上定义

```
class Hash; alias :* :merge end 
```

并以下列方式之一使用它：

```
foo('arg1', {hash1: 'foo'}*opts)
foo('arg1', {hash1: 'foo'} *opts)
foo('arg1', {hash1: 'foo'}. *opts) 
```

我认为最后一个与您想要的相当接近。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-14T01:37:50.647

如果您可以使用 active_support：

```
require 'active_support/core_ext/hash/slice.rb'

def foo(*args)
  puts "ARGS: #{args}"
end

opts = {hash2: 'bar', hash3: 'baz'}
foo *opts.slice(:hash2, :hash3).values 
```

...或者您可以修改自己的解决方案：

```
class Hash
  def pluck(*keys)
    keys.map {|k| self[k] }
  end
end

def foo(*args)
  puts "ARGS: #{args}"
end

opts = {hash2: 'bar', hash3: 'baz'}
foo *opts.pluck(:hash2, :hash3) 
```

# c# - MySql gridview 更新命令

> ID：15191370
> 
> 赞同：1
> 
> 时间：2013-03-03T21:56:45.567
> 
> 标签：c#, mysql, .net

我有这个网格：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
        CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333" 
        GridLines="None" DataKeyNames="id,email,first,last">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
            <asp:TemplateField ShowHeader="False">
                    <EditItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" 
                            CommandName="Update" Text="Update"></asp:LinkButton>
                        &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                            CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                            CommandName="Edit" Text="Edit"></asp:LinkButton>
                        &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                            CommandName="Delete" 
                            onclientclick="javascript:return confirm('are you sure you want to delete.');" 
                            Text="Delete"></asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>
            <asp:BoundField DataField="id" HeaderText="id" SortExpression="id"/>
            <asp:BoundField DataField="email" HeaderText="email" SortExpression="email" />
            <asp:BoundField DataField="first" HeaderText="first" SortExpression="first"/>
            <asp:BoundField DataField="last" HeaderText="last" SortExpression="last" />

        </Columns>
        <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
        <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
        <SortedAscendingCellStyle BackColor="#FDF5AC" />
        <SortedAscendingHeaderStyle BackColor="#4D0000" />
        <SortedDescendingCellStyle BackColor="#FCF6C0" />
        <SortedDescendingHeaderStyle BackColor="#820000" />
    </asp:GridView> 
```

这`SqlDataSource`：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ClientrConnectionString %>" 
        ProviderName="<%$ ConnectionStrings:ClientConnectionString.ProviderName %>" 
        SelectCommand="SELECT * FROM Client;" 
        DeleteCommand="DELETE FROM Client WHERE id = @id AND email = @email;"
        UpdateCommand="UPDATE Client SET first = @first WHERE id = @id;">

        <DeleteParameters>
            <asp:Parameter Name="id" Type="String" />
            <asp:Parameter Name="email" Type="String" />
        </DeleteParameters>
        <UpdateParameters>
            <asp:Parameter Name="id" Type="String" />
            <asp:Parameter Name="first" Type="String" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

我执行更新但值相同，知道为什么会发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-10T05:15:28.313

我也试过了。它对我有用。看起来有点问题`connectionstring`。

我已经给出了`connectionstring`对我有用的。

我正在使用 MySQL：

```
ConnectionString="server=localhost;user id=root;password=*****;persistsecurityinfo=True;database=coffeedb" ProviderName="MySql.Data.MySqlClient" 
```

# visual-studio-2010 - 添加服务引用错误“无法导入 wsdl:portType”

> ID：15191372
> 
> 赞同：7
> 
> 时间：2013-03-03T21:56:59.310
> 
> 标签：visual-studio-2010, soap, visual-studio-2012, servicestack, service-reference

我无法让 VS 2010 或 2012 中的 Add Service Reference 用于基于 ServiceStack 构建的 Web 服务。我遵循了github 上的[指南，包括将 ContractNameSpace 属性添加到 AssemblyInfo.cs 文件并确保我所有的 DTO 都在同一个命名空间中，但没有运气。](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support)相反，我收到了一些我在下面包含的构建警告错误消息。

有人对出了什么问题有任何建议吗？

```
Warning 1 Custom tool warning: Cannot import wsdl:portType
Detail: An exception was thrown while running a WSDL import extension: System.ServiceModel.Description.DataContractSerializerMessageContractImporter
Error: Schema with target namespace 'http://schemas.servicestack.net/types' could not be found.
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:portType[@name='ISyncReply']

Warning 2 Custom tool warning: Cannot import wsdl:binding
Detail: There was an error importing a wsdl:portType that the wsdl:binding is dependent on.
XPath to wsdl:portType: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:portType[@name='ISyncReply']
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:binding[@name='WSHttpBinding_ISyncReply']

Warning 3 Custom tool warning: Cannot import wsdl:port
Detail: There was an error importing a wsdl:binding that the wsdl:port is dependent on.
XPath to wsdl:binding: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:binding[@name='WSHttpBinding_ISyncReply']
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:service[@name='SyncReply']/wsdl:port[@name='WSHttpBinding_ISyncReply']

Warning 4 Custom tool warning: Cannot import wsdl:portType
Detail: An exception was thrown while running a WSDL import extension: System.ServiceModel.Description.XmlSerializerMessageContractImporter
Error: Schema with target namespace 'http://schemas.servicestack.net/types' could not be found.
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:portType[@name='IOneWay']

Warning 5 Custom tool warning: Cannot import wsdl:binding
Detail: There was an error importing a wsdl:portType that the wsdl:binding is dependent on.
XPath to wsdl:portType: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:portType[@name='IOneWay']
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:binding[@name='WSHttpBinding_IOneWay']

Warning 6 Custom tool warning: Cannot import wsdl:port
Detail: There was an error importing a wsdl:binding that the wsdl:port is dependent on.
XPath to wsdl:binding: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:binding[@name='WSHttpBinding_IOneWay']
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:service[@name='AsyncOneWay']/wsdl:port[@name='WSHttpBinding_IOneWay']

Warning 1 Custom tool warning: Cannot import wsdl:portType
Detail: An exception was thrown while running a WSDL import extension: System.ServiceModel.Description.DataContractSerializerMessageContractImporter
Error: Schema with target namespace 'http://schemas.servicestack.net/types' could not be found.
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:portType[@name='ISyncReply']

Warning 2 Custom tool warning: Cannot import wsdl:binding
Detail: There was an error importing a wsdl:portType that the wsdl:binding is dependent on.
XPath to wsdl:portType: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:portType[@name='ISyncReply']
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:binding[@name='WSHttpBinding_ISyncReply']

Warning 3 Custom tool warning: Cannot import wsdl:port
Detail: There was an error importing a wsdl:binding that the wsdl:port is dependent on.
XPath to wsdl:binding: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:binding[@name='WSHttpBinding_ISyncReply']
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:service[@name='SyncReply']/wsdl:port[@name='WSHttpBinding_ISyncReply']

Warning 4 Custom tool warning: Cannot import wsdl:portType
Detail: An exception was thrown while running a WSDL import extension: System.ServiceModel.Description.XmlSerializerMessageContractImporter
Error: Schema with target namespace 'http://schemas.servicestack.net/types' could not be found.
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:portType[@name='IOneWay']

Warning 5 Custom tool warning: Cannot import wsdl:binding
Detail: There was an error importing a wsdl:portType that the wsdl:binding is dependent on.
XPath to wsdl:portType: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:portType[@name='IOneWay']
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:binding[@name='WSHttpBinding_IOneWay']

Warning 6 Custom tool warning: Cannot import wsdl:port
Detail: There was an error importing a wsdl:binding that the wsdl:port is dependent on.
XPath to wsdl:binding: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:binding[@name='WSHttpBinding_IOneWay']
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://schemas.servicestack.net/types']/wsdl:service[@name='AsyncOneWay']/wsdl:port[@name='WSHttpBinding_IOneWay'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T11:20:50.193

我发现了我的问题的根源。我的一个 DTO 没有装饰`[DataContract]`和`[DataMember]`属性。

这意味着 ServiceStack 生成的 WSDL 不包含此 DTO 的类型信息，因此当 WSDL 的消息子部分之一引用此 DTO 类型时，VS 找不到它并抛出异常。

希望这会对其他人有所帮助。我花了很长时间才弄清楚我做错了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T12:01:50.140

另一个原因可能是：检查 targetNamespace 可能会产生冲突，删除 tempuri.org 的任何实例 - 适当地放置一致的命名空间，将解决上述错误。

```
targetNamespace='http://tempuri.org/']/wsdl:portType[@name='IMyInterafaceService' 
```

希望能帮助到你

# php - require_once() 链接出子目录时出错

> ID：15191373
> 
> 赞同：0
> 
> 时间：2013-03-03T21:57:03.933
> 
> 标签：php, warnings, fatal-error, include-path

我正在尝试 require_once() 位于我根目录中的文件夹中的文件...我需要来自根目录另一个子文件夹中的文件中的此文件。

*   根

    *   包括

        *   include_all.php
    *   我的

        *   question_history.php

这是我的/question_history.php：

```
 <?php require_once("./includes/include_all.php"); ?> 
```

我收到这些错误：

> 警告：require_once(./includes/include_all.php) [function.require-once]：无法打开流：第 3 行的 /Applications/XAMPP/xamppfiles/htdocs/AnswerTree2/my/question_history.php 中没有这样的文件或目录
> 
> 致命错误：require_once() [function.require]：无法打开所需的 './includes/include_all.php' (include_path='.:/Applications/XAMPP/xamppfiles/lib/php:/Applications/XAMPP/xamppfiles/lib/第 3 行 /Applications/XAMPP/xamppfiles/htdocs/AnswerTree2/my/question_history.php 中的 php/pear')

我对将文件保存在不同的文件夹中有点陌生，因为我以前只是将所有内容都放在根文件夹中。我知道的不好的做法。但无论如何希望这是足够的细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:59:52.167

正确的代码是：

```
<?php require_once("../includes/include_all.php"); ?> 
```

错误来了，因为`./`要求文件位于同一文件夹中，因此您的代码将要求`includes`文件夹位于`my`文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T21:59:47.493

`./`是当前目录。试试`/includes/include_all.php`吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T22:03:21.823

另请查看魔术常数，可能会有所帮助。例如使用 __DIR__ 可能很有用：[PHP Magic Constants](http://php.net/manual/en/language.constants.predefined.php)

# php - 如何从运行时生成的网页中提取 HTML 标签

> ID：15191374
> 
> 赞同：1
> 
> 时间：2013-03-03T21:57:05.847
> 
> 标签：php, html-parsing, simple-html-dom

我正在使用 SimpleHTMLDOM 解析器从网页中提取 HTML 数据。但是我遇到了诸如[www.coursera.com](http://www.coursera.com)之类的网站，其中网页是在运行时生成的。

我需要知道有没有人尝试解析这样的页面？

我是这个领域的新手，所以关于这个主题的一些理论将有助于我理解解析网页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:04:05.563

在这种情况下，它可能更容易（尽管并非总是如此）。用于生成内容的数据可能是 ajax 请求的一部分，您可以直接向这些 ajax 端点发送请求并解析来自端点的响应。

通常这将是 JSON，与 HTML 相比，它很容易解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:12:23.673

John Resig 编写了一个 HTML 解析器。

> **[演示](http://ejohn.org/apps/htmlparser/)**： [http ://ejohn.org/blog/pure-javascript-html-parser/](http://ejohn.org/blog/pure-javascript-html-parser/)

这可以为你锻炼。

# c - D 绑定生成工具

> ID：15191377
> 
> 赞同：5
> 
> 时间：2013-03-03T21:57:06.987
> 
> 标签：c, header, wrapper, d, auto-generate

是否有从 C 头文件自动创建 D 绑定的工具？我在 github 上遇到了一些过时的 D 包装器问题，如果有一个工具为我完成所有手动工作并确保我的绑定是最新的，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T07:59:45.197

Jacob Carlborg还提供了[dstep](https://github.com/jacob-carlborg/dstep "步长")，它使用 LLVM 提供标头转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T22:27:36.033

[htod](http://dlang.org/htod.html)可从 dlang 网站获得

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:03:08.383

看到这个线程：

[http://forum.dlang.org/thread/mfkesujhjrcqlxxrhmtl@forum.dlang.org?page=1](http://forum.dlang.org/thread/mfkesujhjrcqlxxrhmtl@forum.dlang.org?page=1)

有'dstep'。

'swig'（很可能是最佳选择）。

'mkconfig' 在[http://gentoo.com/di/mkconfig.html](http://gentoo.com/di/mkconfig.html)

# javascript - getElementsByTagName 中只选择 Checkbox 输入，排除 Textbox 输入

> ID：15191384
> 
> 赞同：3
> 
> 时间：2013-03-03T21:58:44.120
> 
> 标签：javascript, checkbox, textbox

我有一个问题。当我选择复选框时，系统工作正常，总值会发生变化，但是一旦我修改文本输入，它就会变为 0。我需要从更改值中排除此文本框输入。

这是html：

```
 <input type="checkbox" id="15000"/>$15000<br/>
       <input type="checkbox" id="9400"/>$9400<br/>
       <label>Quantity</label><input class="text" type="text" maxlength="3" size="2" value="1" name="qty"></input>

       <div id="total">$5000</div> 
```

这是javascript：

```
 var input = document.getElementsByTagName("input");
  var total = document.getElementById("total");

  var prev;

  for(i=0;i<input.length;i++){
  input[i].onchange = function(){
    if(this.checked){
    $("#total").fadeOut(300);
    $("#total").fadeIn(300);
    prev=parseFloat(total.innerHTML.replace(/[^0-9\,]+/g,"")) + parseFloat(this.id);
         total.innerHTML = "$ " + prev.formatMoney(0, ',', '.');
    }else{
     $("#total").fadeOut(300);
     $("#total").fadeIn(300);
     prev=parseFloat(total.innerHTML.replace(/[^0-9\,]+/g,"")) - parseFloat(this.id);
         total.innerHTML = "$ " + prev.formatMoney(0, ',', '.');
    }
  }
} 
```

这是小提琴：http: [//jsfiddle.net/M7My9/1/](http://jsfiddle.net/M7My9/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T22:07:55.387

试试下面

```
if(document.getElementsByTagName("input").type == "checkbox") 
```

[请在此处](http://jsfiddle.net/M7My9/26/)检查更新的小提琴

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T22:05:31.767

添加`if(this.type=='text')`onchange 处理程序的第一行以检测输入的类型

# python - NumPy+MKL 如何避免这种四行内存泄漏？

> ID：15191391
> 
> 赞同：7
> 
> 时间：2013-03-03T21:59:10.687
> 
> 标签：python, memory-leaks, numpy, intel-mkl

以下简单的四行代码在我的 Python 2.6.6 / NumPy 1.7.0 / MKL 10.3.6 设置中产生了内存泄漏：

```
import numpy as np

t = np.random.rand(10,10)
while True:
  t = t / np.trace(t) 
```

每次操作，使用的内存都会增长 10x10 矩阵的大小。但是，当我使用 NumPy 1.4.1/ATLAS 设置时，没有这样的行为。

我读过 MKL 不一定会自动释放内存，所以我想这就是爆炸的原因。有没有一种简单的方法来修改 NumPy（在编译之前或之后），这样这个四行代码就可以正常工作了？

np.show_config() 的输出

```
numpy 1.7.0

lapack_opt_info:
    libraries = ['mkl_rt', 'pthread']
    library_dirs = ['$MKLPATH/lib/intel64']
    define_macros = [('SCIPY_MKL_H', None)]
    include_dirs = ['$MKLPATH/include']
blas_opt_info:
    libraries = ['mkl_rt', 'pthread']
    library_dirs = ['$MKLPATH/lib/intel64']
    define_macros = [('SCIPY_MKL_H', None)]
    include_dirs = ['$MKLPATH/include']
lapack_mkl_info:
    libraries = ['mkl_rt', 'pthread']
    library_dirs = ['$MKLPATH/lib/intel64']
    define_macros = [('SCIPY_MKL_H', None)]
    include_dirs = ['$MKLPATH/include']
blas_mkl_info:
    libraries = ['mkl_rt', 'pthread']
    library_dirs = ['$MKLPATH/lib/intel64']
    define_macros = [('SCIPY_MKL_H', None)]
    include_dirs = ['$MKLPATH/include']
mkl_info:
    libraries = ['mkl_rt', 'pthread']
    library_dirs = ['$MKLPATH/lib/intel64']
    define_macros = [('SCIPY_MKL_H', None)]
    include_dirs = ['$MKLPATH/include'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T00:28:24.357

这确实是一个 NumPy 的错误，它已经知道了几个月，并在[这里](https://github.com/numpy/numpy/issues/2969)讨论过；它将在 1.7.1 中修复。修复是[item_selection.c 中的这个不错的单行](https://github.com/numpy/numpy/commit/80b3a3401382cb3f14c5b76dd90d9f932f50ad15)。添加此行并重新编译后，一切正常。

# asp.net-mvc - 我可以避免这种永久重定向来修复或添加 slug 吗？

> ID：15191392
> 
> 赞同：4
> 
> 时间：2013-03-03T21:59:15.353
> 
> 标签：asp.net-mvc, seo, asp.net-mvc-routing, slug, redirecttoaction

我正在用 MVC 4 编写一个网站，并且想部分复制 Stack Exchange 的路由问题样式。例如：

[stackoverflow.com/questions/15191392](https://stackoverflow.com/questions/15191392)和
[stackoverflow.com/questions/15191392/not-the-real-title](https://stackoverflow.com/questions/15191392/not-the-real-title)和
[stackoverflow.com/questions/15191392/can-i-avoid-this-redirect-to-fix-or-add-蛞蝓](https://stackoverflow.com/questions/15191392/can-i-avoid-this-redirect-to-fix-or-add-a-slug)

所有路由到相同的问题并更正 URL。我希望 slug 始终存在且正确，即使路由不需要它。

这是我目前的实现：

```
routes.MapRoute("Item", "{id}/{slug}/{action}",
                new {controller = "Item", action = "Index", slug = UrlParameter.Optional},
                new { id = @"\d+", slug = @"(?-i)[-a-z]*", action = @"(?-i)(|[A-Z][a-zA-Z]*)" });
routes.MapRoute("Default", "{controller}/{action}/{id}",
                new {controller = "Home", action = "Index", id = UrlParameter.Optional}); 
```

在`ItemController.cs`：

```
public ActionResult Index(int id, string slug = null)
{
    var item = GetItem(id);
    var itemSlug = ToSlug(item.Title);
    if (slug != itemSlug)
    {
        return RedirectToActionPermanent("Index", new {id, slug = itemSlug});
    }
    return View(item);
} 
```

如果 slug 错误/丢失，我关心的是重定向。此实现可能需要两倍于解析视图所需的工作量（通过 ID 查询项目并 slug-ify 标题）。更糟糕的是，我需要为每个操作复制重定向代码。

关于代码重复、性能和 SEO 影响，我可以使用更好的实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:13:45.090

只需为您的页面实现 rel="canonical" 标记...无论如何这都很好，因为默认情况下，谷歌将您的普通域和 www 版本视为 2 个不同的站点，但它会在这里为您提供帮助，因为谷歌会理解您可能显示的所有重复项实际上是一个规范版本的所有副本（我会使用漂亮的 slug 格式），并且任何建立到任何副本的链接都将被记入正确的漂亮 url，这将是它们在搜索结果中显示的那些页面

您可以在此处阅读有关该标记及其实施的更多信息：http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=139394](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)

# django - Django模板不显示模型数据

> ID：15191393
> 
> 赞同：1
> 
> 时间：2013-03-03T21:59:17.723
> 
> 标签：django, django-models, django-templates, django-views

我浏览了不同的教程和 Stack Overflow 问题，但我不确定为什么我仍然遇到这个问题：

我在将模型数据显示到模板上时遇到了问题，我可以看到 python 代码正在执行，但无论我尝试了什么，我都无法让我的数据通过，我的相关代码片段如下：

模型.py

```
class GoogleData(models.Model):
    placeID = models.CharField(max_length=999)
    name = models.CharField(max_length=200)
    phoneNumber =  models.CharField(max_length=800)
    busAddress = models.CharField(max_length=2000)
    openinghours = models.CharField(max_length=9999) 
```

视图.py

```
from django.http import HttpResponse
from django.shortcuts import render_to_response, render, get_object_or_404
from django.template import Context, loader
from hoursofDEV.models import GoogleData

def home(request):
    entries = GoogleData.objects.all()[:5]
    return render_to_response('index.html', {'entries': entries,}) 
```

索引.html

```
 {% if entries %}
<ul>
{% for GoogleData in entries %}
    <li><a href="/GoogleData/{{ GoogleData.name }}/">{{ GoogleData.name }}</a></li>
{% endfor %}
</ul>
{% else %}
    <p>Where's the Data?.</p>
{% endif %} 
```

使用我显示的代码，我经常看到我的其他“数据在哪里？”，我在 GoogleData 中有数百行，但我无法在 html 页面上显示它们中的任何一行

任何指导或指出我的新手错误都会非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:08:22.870

您没有添加`RequestContext`，您的退货声明应如下所示 >>

```
return render_to_response('index.html', {'entries': entries}, RequestContext(request)) 
```

并且不要忘记导入 RequestContext >>`from django.template import RequestContext`

# jekyll - Octopress/Jekyll 语法高亮：```（反引号）与 {% codeblock %}（液体扩展）等有什么优势？

> ID：15191396
> 
> 赞同：8
> 
> 时间：2013-03-03T21:59:24.730
> 
> 标签：jekyll, octopress

我正在使用[Octopress](http://octopress.org/)来写博客，但我仍然没有完全理解“液体扩展”风格的代码块之间的区别，如果有的话，使用`{% codeblock %}`，和更正常的降价代码块，使用反引号，以及这些变化提供了我的[kramdown](http://kramdown.rubyforge.org/)和其他降价转换器。那是：

```
{% codeblock haskell %}
main = putStrLn "Hello world"
-- liquid style
{% endcodeblock %} 
```

对比

```
```haskell
main = putStrLn "Hello world"
-- backtick fencing style (GitHub-flavored)
``` 
```

对比

```
~~~ haskell
main = putStrLn "Hello world"
-- kramdown's tilde fencing
~~~ 
```

对比

```
 main = putStrLn "Hello world"
    -- another kramdown style, I think
{:lang="haskell"} 
```

等等

Octopress 提供了`{% codeblock %}`“插件”和反引号版本，它们似乎支持相同的东西：语法高亮、代码块的文件名、URL 等。

我还没有让 kramdown 特定的那些能够正常工作，我想是因为它们依赖于我下载但无法工作的[coderay或其他东西。](http://coderay.rubychan.de/)

无论如何，这是我的**问题**：

有什么理由更喜欢一种句法风格而不是另一种？一方面，我喜欢 backtick fencing，因为它是 GitHub 风格的 markdown，我已经习惯了，而且看起来“更简单”，但另一方面，对于 Octopress 来说，流畅的语法似乎更“原生”。

任何想法将不胜感激。目前，我的帖子有随机的样式组合，我真的很想将它们精简为一种样式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T07:28:40.390

```
{% codeblock haskell %}
main = putStrLn "Hello world"
-- liquid style
{% endcodeblock %} 
```

需要[液体](http://github.com/Shopify/liquid)

```
```haskell
main = putStrLn "Hello world"
-- backtick fencing style (GitHub-flavored)
``` 
```

不是“[便携](https://github.com/gettalong/kramdown/issues/31)”的

```
~~~ haskell
main = putStrLn "Hello world"
-- kramdown's tilde fencing
~~~ 
```

是[我的选择](http://svnpenn.github.io/2013/01/coderay)

```
 main = putStrLn "Hello world"
    -- another kramdown style, I think
{:lang="haskell"} 
```

已[过时](http://github.com/gettalong/kramdown/pull/15)

# microsoft-metro - 在 Windows 8 应用商店应用中使用 ContactPickerUI

> ID：15191399
> 
> 赞同：1
> 
> 时间：2013-03-03T21:59:31.647
> 
> 标签：microsoft-metro, windows-runtime, contacts, windows-store-apps

我想从我的 Windows 8 应用商店应用程序中添加一个新联系人并将其保存，以便它出现在操作系统附带的人脉应用程序中。

文档说有一个类`ContactPickerUI`具有该方法`public AddContactResult AddContact(string id, Contact contact)`，并且似乎完全可以完成我需要它做的工作。

问题是我不知道如何获取对`ContactPickerUI`对象的引用，因为无法实例化该类。

如果我尝试做

```
var contactPickerUi = new ContactPickerUI(); 
```

我收到一条错误消息：**“'Windows.ApplicationModel.Contacts.Provider.ContactPickerUI' 类型没有定义构造函数”**

Microsoft 提供了一个在线代码示例，他们在`ContactPickerUI` [此处](http://code.msdn.microsoft.com/windowsapps/Contact-Picker-App-sample-fc6677a1)使用.

问题是，在该代码中，当应用程序从外部源（即它是一个共享目标）激活时，它们会在该对象上获得一个引用，而我的应用程序并非如此。

有没有办法访问`ContactPickerUI`您的应用程序正常启动的时间？或者是否有另一种方式以编程方式添加新联系人，而无需通过超级按钮栏分享？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T05:48:26.237

我猜你误解了`ContactPickerUI`. API 不用于添加联系人，因此它们会出现在 People 应用程序中（为此，您必须使用 People 应用程序从中检索联系人的服务之一的 API），而是将联系人添加到列表中当用户选择您的应用程序作为联系人选择器提供程序时，将显示给用户。这就是为什么您只能在您的应用程序被激活时获得该类的实例的原因`ActivationKind.ContactPicker`。

# php - base64_encode 是否转义

> ID：15191401
> 
> 赞同：0
> 
> 时间：2013-03-03T21:59:41.143
> 
> 标签：php

```
$token = base64_encode( openssl_random_pseudo_bytes(32));

<input type="hidden" name="csrf_token" value="<?=$token?>"> 
```

我需要转义`$token`输出吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:01:11.043

转义 base64 编码数据是没有意义的，根据定义，它内部不会有任何控制字符（或引号等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:15:58.283

实际上，**你可能**. 问题在于，[base64 编码字符](http://en.wikipedia.org/wiki/Base64)之一，即索引为 62 的字符，实际上被 PHP 编码为加号 (+)，并且该加号在发送时*可能会*被浏览器URL 解码为*空格*沿着（或者更确切地说，通过浏览器和服务器之间的某些东西 - 代理，负载平衡器，过滤器......）。

因此，*某些*数据可能会以一种形式编码，然后将其解码为不同的字符串（实际上根本不会被解码，因为空间会破坏 base64 方案）。

现代 Firefox 和 Chrome 都正确地将 + 编码为 %2B （我刚刚测试过），并且标准似乎规定 + 必须始终进行编码，并且**base64 不需要进一步转义**，但在某些情况下会出现问题（参见[URL 和 plus标志](https://stackoverflow.com/questions/1005676/urls-and-plus-signs)）。

与其冒险代币在 99.97% 的时间里工作（0.03% 是你最需要它的日子，墨菲规定），一个简单的解决方法是将代币转换为*十六进制*字节表示：

```
$token = bin2hex(openssl_random_pseudo_bytes(32));

<input type="hidden" name="csrf_token" value="<?=$token?>"> 
```

# cakephp - 为什么我的 CakePHP 登录脚本不起作用？

> ID：15191406
> 
> 赞同：0
> 
> 时间：2013-03-03T22:00:23.197
> 
> 标签：cakephp, cakephp-2.3

我正在做我的第一个 CakePHP 项目。我以前只在程序 PHP 中工作过，而且我没有处理过像 Cake 框架这样的东西，所以遇到了一些初期问题。我非常感谢我的登录脚本的帮助，该脚本不起作用。

我的应用程序将成为橄榄球俱乐部的系统。因此，登录页面要求用户从下拉列表中选择他们的俱乐部，然后输入密码。

**编辑：**

工作如下：

**/App/Webroot/View/Clubs/login.ctp**

```
 <div class="clubs form">
<?php echo $this->Session->flash('auth'); ?>
<?php echo $this->Form->create('Club'); ?>
    <fieldset>
        <legend><?php echo __('Please select your club and enter your password'); ?></legend>

        <table>

           <tr> 

                <?php 
                echo $this->Form->input('id', array('label' => 'Club name', 'before' => '<td>', 'after' => '</td>', 'between' => '</td><td>', 'type'=>'select','options'=>$clubs)); 
           ?>
           <tr>
               <?php echo $this->Form->input('password', array( 'before' => '<td>', 'after' => '</td>', 'between' => '</td><td>')); 
           ?>
           </tr>
      </table>
    </fieldset>
<?php echo $this->Form->end(__('Login')); ?>
</div> 
```

**/App/Controller/AppController.php**

```
 public $components = array(
     'Session',
        'Auth' => array(
            'authenticate' => array(
                'Form' => array(
                    'userModel' => 'Club',
                    'fields' => array(
                        'username' => 'id',
                        'password' => 'password'
                    )
                )
            ),
            'loginRedirect' => array('controller' => 'clubs', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'pages', 'action' => 'display', 'home'),
            'loginAction' => array('admin' => false, 'controller' => 'clubs', 'action' => 'login')
        ),
       'DebugKit.Toolbar'
   );

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('logout', 'display');
    } 
```

**/App/Controller/ClubsController.php**

```
 public function login() {

    if ($this->request->is('post')) {

        if ($this->Auth->login()) {
            return $this->redirect($this->Auth->redirectUrl());         
        } 
        else {
            $this->Session->setFlash(__('Invalid club or password, try again.', 'default', array(), 'auth'));
            $this->set('clubs', $this->Club->find(
                'list', array(
                    'fields' => array('club_name'),
                    'conditions' => array('status' => '2')
                    )
                  )
            );
        }
    }
    else {
        $this->set('clubs', $this->Club->find(
            'list', array(
                'fields' => array('club_name'),
                'conditions' => array('status' => '2')
                )
            )
        );
    }

}

public function logout() {
    $this->Session->setFlash(__('You have been logged out.'));
    $this->redirect($this->Auth->logout());
}

public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow('add', 'login', 'index', 'logout', 'view');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:06:21.277

这不是调用名为 的函数`login`，而是在测试是否存在名为 的属性`login`：

```
if ($this->request->is('post')) {
    if ($this->Auth->login) { 
```

auth 组件没有名为 的属性`login`，因此此测试将始终为 false。

如[书中](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#identifying-users-and-logging-them-in)所示，需要调用*函数*login 来登录用户：

```
if ($this->request->is('post')) {
    if ($this->Auth->login()) { 
```

# performance - 选择哪个广告首先出现的算法是什么？

> ID：15191407
> 
> 赞同：0
> 
> 时间：2013-03-03T22:00:27.017
> 
> 标签：performance, algorithm, formula, advertisement-server, serving

我需要一个公式来计算哪个广告将首先出现。

好的，问题来了：我正在开发一种新的广告方式的系统。广告商将定义一个类别的总预算和最高每次点击费用。

如果同一类别中有多个广告客户，谁的广告会先投放，顺序是什么？

这是一个例子：

```
Advertiser # | Total Budget | Max CPC
-------------|--------------|---------
1            | $1000        | $1
2            | $1,000       | $5
3            | $500         | $10
4            | $10,000      | $4 
```

并且类别的平均点击率为 %2

是的，所有数字都是假的。

那么，谁的广告将首先投放，为什么以及如何投放？我该如何制定这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:09:50.230

通常 CPC 在竞价系统上工作 - 那些愿意为点击支付最高费用的人将首先显示，因为这将为广告服务器带来最高利润（假设所有广告都同样吸引点击）。

假设广告商 1 愿意为每次点击支付 0.60c，而广告商 2 愿意为每次点击支付 0.75c

在达到他们的预算之前，您每次都首先为广告客户 2 提供服务，然后再继续为广告客户 1 提供服务。

获得服务是每个广告商的目标，因此您可能应该向人们展示他们的排名，以鼓励他们为每次点击支付更多费用。

然而，这不是一种“新的广告方式”。

执行此操作的算法如下：

```
 function get_best_ad(var category){

            //get all ads in that category                      
            array ads = get_ads_by_category('category'); 

            //sort them so the highest big is first in the array
            ads = ads.sort_by_bid('desc');

            /*the owner is the advertiser, their wallet is how much remains of their budget, the bid is how much is costs for that ad to be clicked. The first ad that can be served is returned; breaking out of the loop and method*/
            foreach(ads as ad){
                if( ad.owner().wallet > ad.bid() ){
                   return ad;
                }
            }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-20T19:15:35.610

根据我开发广告平台的经验，最好的选择是首先显示点击次数最多的广告，就像在发布商眼中，他们想从广告中赚钱，如果您的广告服务器在 10 次以 0 收入显示相同的广告，为什么发布商继续使用您的系统？

分析广告的点击率并使用 CPC 进行排序，并根据用户兴趣/性别/位置等搜索最佳广告。

# smalltalk - Smalltalk，在 BlockClosure 上使用“价值”

> ID：15191410
> 
> 赞同：1
> 
> 时间：2013-03-03T22:00:58.657
> 
> 标签：smalltalk, extend

我正在尝试为现有的 BlockClosure 类创建一个方法。这是我们在课堂上写在黑板上的一种方法，但它的行为并不完全符合我的预期。这是代码：

```
BlockClosure extend[
   times: count[
      count = 0
      ifTrue:
      [^self value.]
      ifFalse:
      [self value. self times: count - 1.].
   ]
]. 
```

我尝试通过将其输入 gst 解释器来测试它：

```
st> x:= 5
5 
st> y := [x-1] times: 4.
a BlockClosure 
```

但在这种情况下，我希望 y 等于 1。为什么 y 的值变成“一个 BlockClosure”？

编辑：正确的时间方法。

```
BlockClosure extend[
   times: count[
      count = 0
      ifFalse:
      [self value. ^self times: count - 1.].
   ]
]. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:39:52.573

首先，您缺少条件语句分支`^`中`ifFalse:`的 ，这会阻止返回值从递归调用传播回来：

```
ifFalse:
[self value. ^self times: count - 1] 
```

其次，这实际上将设置`y`为`4`，因为您每次都`x - 1`使用相同的值进行计算。`x`您可能的意思是`x`每次重新分配回：

```
y := [x := x - 1] times: 4 
```

# java - 如何从 JMS 读取和收集响应消息，并使它们可用于正确的 servlet 线程？

> ID：15191416
> 
> 赞同：0
> 
> 时间：2013-03-03T22:02:10.927
> 
> 标签：java, multithreading, servlets, jms, sonicmq

我们有一个用于异步 JMS 消息系统的同步 HTTP 请求-响应前端。

每个 HTTPRequest 的 HTTP 查询 servlet 在查询队列中创建相应的 JMS 消息。此查询由后端处理，并为此查询创建几个响应消息。在 JMS 中组织响应消息的接收并确保它们到达正确的 servlet 线程以便它可以制定 HTTPResponse 的好方法是什么？

查询和响应是非事务性的，不需要持久化。其中大多数是读取查询。如果在 45 秒内没有读取响应，则 servlet 生成超时响应。然而，吞吐量很重要。我们需要处理越来越多的查询。该系统已经使用了大约十年，并且必须再运行两年左右。

我们正在使用 SonicMQ。我们为所有响应创建了一个队列。servlet 容器与代理有一个连接，它用于读取和写入。我们为每个登录用户生成一个侦听器线程（大约 1500 个并发）。这个线程有一个带有消息选择器的接收器，它只为这个特定用户选择响应消息。一旦 servlet 线程发送了它的查询消息，它就会等待用户的侦听器线程通知它它已读取响应。

我们曾经让所有发送者和所有接收者共享一个 QueueSession。这实际上有效（！）虽然会话正式不是线程安全的。每个线程创建一个 QueueSession（servlet 线程和侦听器线程）在一定程度上提高了性能，但事情仍然不太稳定，我们希望更好地组织事情。

我尝试为每个用户会话创建一个临时队列，而不是一个带有消息选择器的队列，但这大大减慢了速度。

什么是更好/正确的组织方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:26:07.863

我开始这是作为评论，但它有点增长。

根据您的描述，听起来每个请求至少需要两个线程，甚至可能更多。如果您已经有 1500 个并发用户，并且您的查询已经足够工作，您需要将它们分流到其他节点，那么我会说您已经进入了危险的领域，因为有多少活动线程将有效地运行在一个JVM 没有大量的 CPU/内存分配和一些严重的设置调整。

我对删除 JMS 的评论是因为从您的应用程序的 servlet 方面，您只是在做很多额外的工作以使 JMS 成为一个同步请求/响应机制，而一个简单的线程池也可以为能够运行提供服务多个并发查询以响应 HTTP 请求。不过，听起来 JMS 是后端接收工作请求的一种不错的方式，因此可能不值得进行重大重写。

我认为组织这个的更好方法是每个 tomcat 实例的一组消费者，而不是每个请求线程的消费者。每个 webhead 都可以有自己的响应队列，或者在单个队列上使用 MessageSelector。然后当请求进来时，发送请求 JMS 消息并为消费者留出回调调用线程的方式，就像调用者正在等待从中[获取（）的](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html#take%28%29)[SynchronousQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html)。如果您必须等待多条消息来服务单个请求，则可以将[ConcurrentLinkedQueue与](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)[CountdownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)结合使用以丢弃响应在收到所有响应时向请求线程发出信号。这样，您可以拥有一个相对较小的线程池来负责在消息进来时接收消息。我觉得应该有一些东西可以帮助您解决这个问题，但我想不出任何手边的东西。

之后，如果您仍然发现性能是一个问题，您可以通过添加 tomcat 实例进行扩展，或者查看用于 HTTP 请求处理的非阻塞 IO，对前门应用与后门相同的策略：使用一个小的池处理大量请求的线程，其中等待会在每个请求线程模型中占用大量线程。

# c++ - LNK 2019 C++ 错误

> ID：15191426
> 
> 赞同：0
> 
> 时间：2013-03-03T22:02:52.220
> 
> 标签：c++

我有一个在 NewTree.h 中定义的 NewTree 类。当我在 main 方法中创建 NewTree 的新实例时，它会引发 LNK 2019 错误。

新树.h：

```
template <class T>
class NewTree
{
public:

treeNode<T> *current;
treeNode<T> *root;

NewTree();
~NewTree();
bool insert(T *data, treeNode<T> *parent);
treeNode<T> search(T *target);
}; 
```

创建 NewTree 的新实例的行：

```
NewTree<xml_node<>> *tree = new NewTree<xml_node<>>(); 
```

为什么 Visual Studio 给我一个 LNK 错误？

完全错误：

```
main.obj : error LNK2019: unresolved external symbol "public: __thiscall NewTree<class rapidxml::xml_node<char> >::NewTree<class rapidxml::xml_node<char> >(void)" (??0?$NewTree@V?$xml_node@D@rapidxml@@@@QAE@XZ) referenced in function _main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:06:48.447

您的模板类必须[在头文件中实现](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)。我认为这是问题的原因。这是我可以从您提供的代码中得出的唯一结论。

# chef-infra - 在 Chef 中使用自定义 LWRP

> ID：15191428
> 
> 赞同：0
> 
> 时间：2013-03-03T22:03:00.493
> 
> 标签：chef-infra, vagrant, chef-recipe

我正在尝试编写一个自定义 LWRP 来部署烧瓶应用程序。

我广泛引用了以下食谱：

[https://github.com/opscode-cookbooks/application_python](https://github.com/opscode-cookbooks/application_python)

我的食谱中有以下内容

```
application "packaginator" do
  path "/my/apps/packaginator"
  owner "root"
  group "root"
  repository "https://github.com/coderanger/packaginator.git"
  revision "master"
  migrate false
  packages ["libpq-dev", "git-core","python-pip"]

  flask do
    packages ["boto"]
  end
end 
```

在我的食谱食谱文件夹中，我有一个名为 flask.rb 的文件，其中包含资源定义。

同样，在我的食谱提供者文件夹中，我有一个名为 flask.rb 的文件，它是提供者。

每当我尝试在我的 vagrant box 上应用这个食谱时，我都会收到以下信息：

致命：NameError：找不到烧瓶的资源。试过application_flask，flask

这是我的第一个自定义 LWRP，所以我缺少哪些简单的步骤才能使用我的自定义 LWRP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:45:08.383

您的 flask.rb 不应位于**配方**文件夹中，而应位于**资源**文件夹中。然后你可以在你的食谱中将它引用为**application_flask**。

# java - Java - 在链表中返回最大的字符串

> ID：15191429
> 
> 赞同：0
> 
> 时间：2013-03-03T22:03:11.773
> 
> 标签：java, recursion, iterator, linked-list, compare

编辑：我更新了线程以回答您的一些问题。这是一个编程作业。我的解决方案不起作用：要回答此线程上的评论，它应该按字母顺序找到最大的字符串。例如，“汤姆”比“安迪”大。

编写一个递归方法来查找单链表中的最大值。从类 LinkedList 继承并添加递归方法。您将需要使用迭代器来访问链表的每个节点。您可能需要添加一个辅助方法来启动递归。使用驱动程序类填充您的链接列表并证明您的方法有效。向驱动程序类添加额外的测试。提供的驱动程序类中最大的是汤姆。

提供的驱动程序类：

```
public class MyLinkedListDriver {

public static void main(String[] args) {
    // TODO Auto-generated method stub

    MyLinkedList myLinkedList = new MyLinkedList();
    myLinkedList.add("Sarah");
    myLinkedList.add("Barbara");
    myLinkedList.add("Tom");
    myLinkedList.add("George");
    String largest = myLinkedList.findLargest();
    System.out.println(largest);
    System.out.println(myLinkedList.get(0));
}} 
```

我的解决方案（不起作用）：嗯，我得到空指针异常。

```
import java.util.Iterator;
import java.util.LinkedList;

public class MyLinkedList extends LinkedList<String> {

Iterator<String> it = super.iterator();
String largest=it.next();

public String findLargest(){
    if (it.hasNext()==false){
        return largest;
    }
    else{
        String temp = it.next();
        int x=largest.compareTo(temp);
        if(x>0){
            largest=temp;
        }
        findLargest();
    }
    return largest;
}} 
```

有人可以告诉我我做错了什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:36:17.860

问题在于您初始化类的方式： MyLinkedList ..

你有 ：

```
String largest=it.next(); 
```

在构造时，列表为空，因此`it`为空。因此`it.next()`为空；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:42:58.843

这远非最佳解决方案，但此解决方案是通过修改您提供的代码。

```
import java.util.Iterator;
import java.util.LinkedList;

public class MyLinkedList extends LinkedList {

Iterator<String> it = null;
String largest="";

public String findLargest(){
    if (it == null) {
        it = super.iterator();
    }   

    if (it.hasNext()==false){
        it = null;
        return largest;
    }
    else{
        String temp = it.next();
        int x=largest.compareTo(temp);
        if(x<0){
            largest=temp;
        }
        findLargest();
    }
    return largest;
}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T22:47:19.290

抱歉，我看不出您的代码如何抛出 NullPointerException。

它应该抛出 NoSuchElementException ，因为您尝试在构造时获取迭代器的第一项，此时集合仍然为空。这显然是一个错误。

关于如何解决这个问题的提示：迭代器不应该是数据成员。它没有描述对象的状态。考虑将迭代器的新实例传递给辅助方法，该方法是递归的：

```
public String findLargest(){
    return findLargest(iterator());
}

private static String findLargest(Iterator<String> it) {
    // Think how you implement this part recursively WITHOUT using any data member
} 
```

# java - 我传递给 JVM 的选项似乎没有效果

> ID：15191430
> 
> 赞同：1
> 
> 时间：2013-03-03T22:03:12.030
> 
> 标签：java, memory, jvm

我正在使用一个使用 bean shell 脚本来传递 java (jvm) 参数的应用程序。我的应用程序需要的不仅仅是默认的 88M PermGen。我尝试了各种方法，从单独指定参数，到一起指定参数，再到由他们孤独地指定参数。特别是我正在尝试使用`-XX:PermGen=128M`and加载 JVM `-XX:MaxPermGen=256M`。无论我尝试过什么，这些论点似乎都没有任何效果（我正在使用 VisualVM 来监控资源使用情况）。

我认为，我最后的手段是将机器的 JVM 配置为默认为 256M perm gen，但我无法在网上找到任何说明如何（或如果）在不将选项作为标志传递的情况下执行此操作的内容。

有人知道我是不是在叫错树吗？如果我不是，你能告诉我如何更改默认值吗？(JDK6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:38:50.610

如果您查看[Hotspot JVM options](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)，可能会看到没有选项`-XX:PermGen`或`-XX:MaxPermGen`，但`-XX:MaxPermSize`默认情况下是 64m。

所以你只需要使用正确的选项名称：

```
-XX:MaxPermSize=256m 
```

# html - IE中带有两行的Html输入按钮

> ID：15191432
> 
> 赞同：1
> 
> 时间：2013-03-03T22:03:20.400
> 
> 标签：html, css, internet-explorer, button

我试图制作一个有两行的按钮。我正在使用以下html

```
<input type="button" value="line1&#10;line2"/> 
```

但在 IE 中，我得到以下信息

![在此处输入图像描述](../Images/8b532a7ed8241a0ab86c35f896f628dc.png)

有没有办法使用 html 或 css 来修复对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:12:37.970

使用一个`button`元素。你会遇到更少的问题，因为任何东西都可以放在里面。

# sql - 如何使用本地镜像生产 SQL Server 数据库并能够在一段时间内更改本地数据库？

> ID：15191436
> 
> 赞同：2
> 
> 时间：2013-03-03T22:03:40.803
> 
> 标签：sql, sql-server, database, mirroring

我目前有一个设置，其中有一个本地网站、一个临时网站和一个生产网站。我使用暂存数据库在我的本地开发，然后一旦进行更改，它就会移动到暂存，配置明智，应该与生产相匹配。如果它在舞台上工作，我几乎知道它会在现场工作，然后我将它转移到生产中。

截至目前，暂存数据库已经过时，因为我们的用户在生产中所做的更改。

我希望完成的是有某种方式可以使登台数据库每晚自动更新。这将允许 staging 是最新的，但允许我们对测试新更改可能需要的 staging 进行更改，而不会立即被生产更新覆盖。

Microsoft SQL Server 如果有帮助的话。相信这是2008年。

总而言之，我如何能够每晚自动将生产数据库镜像到临时数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T03:47:25.553

如果您可以确保在 24 小时内将架构更改从暂存转移到生产。然后实际上您的任务很容易完成，只需备份生产数据库并在登台时恢复。

日志传送和数据库镜像只能给你一个只读数据库。复制没有只读限制，但如果在更新暂存数据库上的架构和数据时发生冲突，复制将失败。

您的 prod db 压缩后大约 25G，我认为它太大而无法每天传输。如果它的增量变化不大，比如说一天压缩不到500M，我建议你可以使用周全备份和日差异备份的策略。这样，您只需要在 prod 上设置 2 个备份作业，在 staging 上设置一个还原作业，它始终只是还原本周的完整备份和新的差异备份。

请注意，您需要在恢复之前终止 staging db 上的所有连接，更改数据库以单用户模型来执行此操作。

完整备份和日志备份策略也应该有效，并且需要更少的数据来传输，但是设置恢复作业会有点复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:12:15.997

（免责声明 - 我本质上熟悉@SolidSnake4444 的设置和目标）

@jmoreno 正确地观察到了矛盾。

大数据库大小是不利于依赖计划完整还原的解决方案的另一个因素。

我觉得最好的解决方案是混合@JohnyWeil 和@SteveStedman 的建议，如下所示： 1\. 创建第二个“真实”暂存本地数据库——这将是生产数据和模式的镜像。2\. 开始将您当前的“暂存”称为“测试”或“开发”。3\. 设置从生产到新阶段的日志传送，但延迟应用日志。

注意，3\. 是必需的，因为隐含的要求是这个“登台”数据库必须是可操作的，以允许“登台”或“部署前测试”本地活动。“操作”要求排除了任何类型的“实时”同步——镜像或复制，因为日常“本地”活动肯定会生成大量数据，与生产中生成的数据相冲突；架构更改也是可能的。（如果我错了，请有人纠正我）。

此外，每周或每两周（基本上是当所需的事务日志备份恢复的数量变得不切实际时），从生产环境中删除完整备份并删除旧的累积事务日志备份以重置周期。

所有这些都可以完全自动化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T00:00:53.597

你提出了两个相互矛盾的目标。

1.  您希望每晚都更新数据。
2.  您希望保留您的架构更改。

这些目标相互冲突，因为数据和模式可能不再兼容。简单的例子是添加或删除列，稍微复杂一点的例子是添加到暂存数据库的表约束......如果您正在修复一些不良数据并确保它不会再次发生，您的生产数据库仍然会里面有坏数据。

我建议您每天备份恢复到登台（又名测试）的生产数据，然后运行您将用于修改生产的脚本，当时间到了测试时。除非您有一些非常重要的数据和更改，否则这应该相当快。可能足够快以至于你不想让它自动化（更容易看到它失败时会发生什么）。

如果您愿意，可以使用 sql 代理自动执行这两个步骤。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T02:26:50.187

好问题。我在我的开发环境中做了与此非常相似的事情。

我所做的是拥有多个暂存数据库。一个是活动的，一个可用于从生产系统恢复备份。随着事情的进展，我最终使用登台服务器从一个登台数据库切换到另一个。

为了移动架构，我使用了 RedGate 的 2 个工具。第一个 SQL 源代码控制允许我签入所有数据库架构，以便将其保存在源代码控制中。其次是 SQL 比较，它允许我比较 2 个数据库之间的模式，然后将一个迁移到另一个。

该过程涉及将生产备份带入开发，然后使用 SQL 比较将架构更改从旧的暂存数据库迁移到新的暂存数据库。然后将所有开发和登台服务器切换为指向新的登台数据库。

随着时间的推移，在两台登台服务器之间来回切换，您始终拥有一台处于活动状态的开发服务器，以及一台可以恢复的服务器。

当您想将架构更改移动到生产环境时，只需使用 RedGate 中的 SQL 比较来创建更改脚本。

我已经使用这个过程将近 4 年了（SQL Source Control for 2），它适用于多个开发人员，以及将更改推送到生产环境。

查看 RedGate 的 SQL 比较和 SQL 源代码控制。如果您有任何问题，请告诉我。

# python - 短 如果在 Python-Jinja2 中使用

> ID：15191437
> 
> 赞同：0
> 
> 时间：2013-03-03T22:03:42.043
> 
> 标签：python, jinja2

我正在用 Python 建立一个网站，并想写一个简单的`<select>`盒子。

这是我的代码：

```
<td>Posts Per Page</td>
<td>
    {{ g.blogOptions['posts_per_page'] }}
        <select name="posts_per_page">                        
            {% for counter in range(5, 20, 5) %}
                <option value="{{counter}}" {{ "selected=true" if counter == g.blogOptions['posts_per_page'] else '' }}> {{ counter }}</option>
            {% endfor %}
        </select>
</td> 
```

在此代码的第 3 行，它打印`10`但在`for`循环中它没有命中`if`并且没有写入`selected=true`

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:07:13.267

你想使用`{% if %}`/ `{% endif %}`：

```
<select name="posts_per_page">                        
    {% for counter in range(5, 20, 5) %}
        <option value="{{counter}}" {% if counter == g.blogOptions['posts_per_page']  %} selected="selected" {% endif %}> {{ counter }}</option>
    {% endfor %}
</select> 
```

确保它`g.blogOptions['posts_per_page']`是一个整数；如果它是一个字符串，你需要转换它：

```
{% set posts_per_page = int(g.blogOptions['posts_per_page']) %}
<select name="posts_per_page">                        
    {% for counter in range(5, 20, 5) %}
        <option value="{{counter}}" {% if counter == posts_per_page  %} selected="selected" {% endif %}> {{ counter }}</option>
    {% endfor %}
</select> 
```

# mysql - 选择在逗号分隔的单元格中找到变量的行

> ID：15191447
> 
> 赞同：0
> 
> 时间：2013-03-03T22:04:30.290
> 
> 标签：mysql

我有一个表格，每行都有一个单元格，里面有几个逗号分隔的值，比如`TAGS=1,2,3,4,5`. 如何选择包含例如 TAG 5 的所有行？

我已经尝试过，但是如果=2 例如，`SELECT * FROM videos WHERE tags LIKE %$id%`我会遇到问题，因为 12 或 22 也被选中...`$id`

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:08:01.860

哦，我很久以前就这样做了——当我认为自己是如何解决问题的天才时，这是我一生中最大的错误。您会看到，“Like”是一个非常昂贵的比较运算符，需要一段时间才能查找任何内容，尤其是在您将百分比放入其中的那一刻。

您最好创建一个单独的表，将不同的 id 链接到每一行，查找速度会快得多。

但是，您想解决上述问题。我建议更新您的专栏以在开头或结尾使用逗号，然后搜索在它之前或之后有逗号的任何内容。

例如

```
LIKE '%,12,%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:13:41.293

您希望将`where`语句设置为：

```
where concat(',', tags, ',') like concat('%,', 5, ',%') 
```

在您的情况下，这将是：

```
where concat(',', tags, ',') like concat('%,', $id, ',%') 
```

也就是说，您要确保分隔符围绕您要查找的值。因此，右手边被评估为`'%,5,%'`。然后，您需要确保列表的每个元素都被分隔符包围，包括第一个和最后一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T22:20:29.257

使用`FIND_IN_SET()` [http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set) `select * from videos where FIND_IN_SET('22',tags)>0;` [http://sqlfiddle.com/#!2/5a699/1](http://sqlfiddle.com/#!2/5a699/1)

# java - 缺少使用 hashMap、YAML 进行序列化的输出

> ID：15191449
> 
> 赞同：0
> 
> 时间：2013-03-03T22:04:41.973
> 
> 标签：java, serialization, hashmap, yaml, snakeyaml

您好我正在尝试学习如何使用snakeYAML。

我想保存一个**库**对象，以便在启动应用程序时再次加载它。只是我想在我的图书馆里存放书籍。互联网告诉我**yaml**是一个很好的方法。

我必须上课：

```
public class Library {
private HashMap<String, List<Book>> library; 

public Library() {
    library = new HashMap<String, List<Book>>();
}

//getter
public HashMap<String, List<Book>> getHashMap() {
    return library;
}

//setter
public void setHashMap(HashMap<String, List<Book>> library) {
    this.library = library;
}
} 
```

现在我想使用 main 方法对其进行序列化：

```
public static void main(String[] args) {

    Library library = new Library();
    LinkedList<Book> books = new LinkedList<Book>();

    books.add(new Book("Some title", false));
    books.add(new Book("Other Title", true));

    library.putMany("books", books);

    System.out.println(new Yaml().dump(books)); 
```

但我只得到输出：

```
- !!model.Book {done: false, title: Some title}
- !!model.Book {done: true, title: Other Title} 
```

有些东西告诉我，我错过了**图书馆**本身之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:20:29.053

那一定是因为您只是`dump()`在 ing 两个列表`books`，而不是整个列表`Library`。

# perl - 使用 Perl 通过 api 在 tumblr 上发布几张图片

> ID：15191454
> 
> 赞同：0
> 
> 时间：2013-03-03T22:05:03.690
> 
> 标签：perl, api, tumblr

我正在尝试通过 perl API 在 tumblr 中发布 3 张图片...

我有这个代码在一张图片上工作得很好：

```
use LWP::Authen::OAuth;
use Data::Dumper;

my $ua = LWP::Authen::OAuth->new(
            oauth_consumer_key => 'xxx',
            oauth_consumer_secret => 'xxx',
            oauth_token => 'xxx',
            oauth_token_secret => 'xxx',
    );
my $url  = 'http://publicpics.free.fr/856833_10151249956981150_1285625380_o.jpg';
my %elements = (  
  'type' => 'photo', 
  'source' =>  $url,
);

print Dumper (\%elements);
print $ua->post( 'http://api.tumblr.com/v2/blog/xxxx.tumblr.com/post', [%elements] )->as_string; 
```

我使用这个 API 文档[http://www.tumblr.com/docs/en/api/v2#posting](http://www.tumblr.com/docs/en/api/v2#posting)

对于几张图片，您必须在参数中传递一个数组......所以我试试这个但不工作：

```
use LWP::Authen::OAuth;
use Data::Dumper;

my $ua = LWP::Authen::OAuth->new(
            oauth_consumer_key => 'xxx',
            oauth_consumer_secret => 'xxx',
            oauth_token => 'xxx',
            oauth_token_secret => 'xxx',
    );
my @url  = ( 'http://publicpics.free.fr/856833_10151249956981150_1285625380_o.jpg' );
my %elements = (  
  'type' => 'photo', 
  'data' =>  \@url,
);

print Dumper (\%elements);
print $ua->post( 'http://api.tumblr.com/v2/blog/xxxx.tumblr.com/post', [%elements] )->as_string; 
```

**我有这个回报：**

```
$VAR1 = {
      'data' => [
                  'http://publicpics.free.fr/856833_10151249956981150_1285625380_o.jpg'
                ],
      'type' => 'photo'
    };
HTTP/1.1 400 Bad Request
Connection: close
Date: Sun, 03 Mar 2013 22:01:13 GMT
Server: Apache
Vary: Accept-Encoding
Content-Length: 92
Content-Type: application/json
Client-Date: Sun, 03 Mar 2013 22:01:13 GMT
Client-Peer: 66.6.36.55:80
Client-Response-Num: 1
P3P: CP="ALL ADM DEV PSAi COM OUR OTRo STP IND ONL"
X-Tumblr-Usec: D=112074

{"meta":{"status":400,"msg":"Bad Request"},"response":{"errors":["Error uploading photo."]}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:11:12.037

数据用于本地文件，使用互联网可访问图像的来源

```
my %elements = (  
  'type' => 'photo', 
  'source' =>  \@url,
); 
```

问候，

# java - 根据是否启动活动来更改按钮的行为

> ID：15191455
> 
> 赞同：0
> 
> 时间：2013-03-03T22:05:20.213
> 
> 标签：java, android

我有一个透明的活动，它在另一个活动之上启动。为了清楚起见，假设透明活动称为 CommentsView，它是从名为 ArticleView 的活动启动的。

ArticleView 活动的底部是一个按钮，用于在其顶部启动 CommentsView 活动。在启动 CommentsView 活动时，我想更改该按钮的功能，以便在再次单击时取消 CommentsView 活动并返回到 ArticleView。

我该怎么做。我尝试在 CommentsView 活动中向该按钮添加一个新的 onclicklistener，但我得到了一个`NullPointerException`（可能是因为该按钮在该活动中不存在）。我还尝试在 ArticleView 活动中处理此问题，方法是创建一个布尔变量`commentsLaunched`并使用 if 语句来启动 CommentsView (if `commentsLaunched == false`) 或取消它 (if `commentsLaunched == true`)。但是，当我尝试这种方法时，我得到一个编译器错误：`The final local variable commentClicked cannot be assigned, since it is defined in an enclosing type`. 我无法在侦听器中定义 commentClicked 变量，否则每次点击都会重新初始化，因此毫无价值。

我怎样才能实现我的目标？

# java - 如何验证多封电子邮件并获取电子邮件数据？

> ID：15191468
> 
> 赞同：1
> 
> 时间：2013-03-03T22:06:47.290
> 
> 标签：java, sql

假设我的桌子是这样的：

```
table user
id | email | password | age | gender
1 | yao@a.com | password | 1 | m
2 | yao@c.com | password | 2 | m 
```

假设作为普通用户，我对表及其数据一无所知。在一个表格中，我输入以下电子邮件以获取他们的 ID 号：

```
(yao@a.com, yao@b.com, yao@c.com) 
```

所以查询将是：

```
select id from user where email in (yao@a.com, yao@b.com, yao@c.com) 
```

应该返回：

```
(1,2) 
```

现在，我如何确定哪个 id 是哪个用户的？我想一次查询一个用户，但如果列表变得太大，那将是不好的做法。

有什么更好的方法来实现这样的事情？

我需要知道哪个 id 属于哪个用户的原因是因为前端需要告诉用户哪些电子邮件不起作用等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:09:48.303

`select email,id from user where email in ('yao@a.com', 'yao@b.com', 'yao@c.com')`将返回电子邮件和 id（匹配）。

# ruby-on-rails - 将 heroku 托管的 rails 应用程序连接到我创建的单独服务

> ID：15191471
> 
> 赞同：0
> 
> 时间：2013-03-03T22:06:53.077
> 
> 标签：ruby-on-rails, web-services, heroku, soa

我目前在 heroku 上托管一个 Rails 3.2.11 应用程序。我想创建一个单独的应用程序，rails 应用程序将用作服务。我还没有决定确切的 API 或实现。我希望读取比写入多得多，并且读取速度更快更重要。至少最初，只有我的 Rails 应用程序会访问该服务。

我目前的方法只是将服务创建为另一个 heroku 应用程序。rails 应用程序将使用 HTTParty 或其他一些库来使用它。这种幼稚的方法会奏效吗？

理想情况下，我希望优化这两个应用程序之间的通信，因为它们都在 heroku 上运行。但是，我也希望 rails 应用程序不关心服务的位置/实施细节；即使我将服务移至其他主机，它也应该继续工作。

鉴于我提供的信息，简单的 HTTP 服务是最好的选择，还是有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:17:04.007

我已经创建了几个站点和服务，例如您描述的。对我来说，关键是开发我的服务以响应 RESTful 操作，包括 XML 和后来的 JSON。服务到位后，我的应用程序可以轻松地进行必要的调用，以使用这些 RESTful 端点检索数据。如果您担心请求的延迟较低，那么将两个站点都放在一家托管公司上可能会有所作为。

Ruby on Rails 的一大优点是其本质上非常便携。我已经将网站从 EngineYard 移到 Heroku 并返回，没有任何问题，而且我的用户从未意识到这一变化。

最后一条评论：永远不要将 Heroku 用作您唯一的 Git 存储库。我总是将我的项目检查到我在 GitHub 上的私人遥控器以及 Heroku 存储库中。

# android - 可以从 Android 应用程序调用它们的合法 linux 命令？

> ID：15191472
> 
> 赞同：1
> 
> 时间：2013-03-03T22:07:01.317
> 
> 标签：android, c++, linux, android-ndk, java-native-interface

我需要从本地方法 in 制作一个 linux 命令`C++`，即**iwconfig**，也`popen`用于获取该命令的输出。

这是我的代码

```
std::string exec(const char* cmd) {
FILE* pipe = popen(cmd, "r");
if (!pipe) return "ERROR";
char buffer[128];
std::string result = "";
while(!feof(pipe)) {
  if(fgets(buffer, 128, pipe) != NULL)
  result += buffer;
  }
  pclose(pipe);
  return result;
 } 
```

我想知道是否可以调用它！

所以我在这个[链接中有这个代码](https://stackoverflow.com/questions/15191171/no-jni-onload-and-no-return-value-from-native-function#comment21403673_15191171)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:29:46.967

将 'iwconfig' 放在 shell 脚本中，您可以直接从 android 运行进程，处理 stdout 直到完成。此示例执行 shell name=./bin/pars_submit。

```
 public String getFfmpeg(@QueryParam("infil1") String infil1, 
                @QueryParam("infil2") String infil2, @QueryParam("otfil") String otfil,
                @QueryParam("t") String time) {         
        String outfil = "dummy.mp4";

          List<String> command = new ArrayList<String>();
            command.add("vendor/bin/pars_submit");

            command.add(infil1);     

            command.add(infil2);
            command.add(otfil);
            command.add(time);

System.out.println("Starting process " +command.toString());
            ProcessBuilder builder = new ProcessBuilder(command);
            Map<String, String> environ = builder.environment();
//          for(Entry<String, String> entry : environ.entrySet()){
    //          System.out.println("ENV " +entry.getKey() + " " +entry.getValue());
      //      }
//          builder.redirectErrorStream(true);
            Process process = null;
            try {
                process = builder.start();

            InputStream is = process.getInputStream();

            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);
            String line;
            while ((line = br.readLine()) != null) {  
              //System.out.println(line);
                outfil=line;
            }

//          int exitVal = process.waitFor();
 //           System.out.println("Process exitValue: " + exitVal);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }  
            finally {
                  if (process != null) {
                    process.destroy();
                    process = null;
                  }

                }           

            return outfil;

                } 
```

# android - android compile proguard中的错误，参考？

> ID：15191476
> 
> 赞同：0
> 
> 时间：2013-03-03T22:07:09.083
> 
> 标签：android, compilation, export, proguard

嗨，我是新来的，但是当我尝试将我的 android 导出到 apk 时遇到问题，我尝试多次使用 -dontwarn android.support.**、库等。

```
[2013-03-01 21:08:42 - CaptureActivity] Proguard returned with error code 1\. See console

[2013-03-01 21:08:42 - CaptureActivity] Unexpected error while evaluating instruction:

[2013-03-01 21:08:42 - CaptureActivity]   Class       = [android/support/v4/view/AccessibilityDelegateCompat$AccessibilityDelegateJellyBeanImpl]

[2013-03-01 21:08:42 - CaptureActivity]   Method      = [newAccessiblityDelegateBridge(Landroid/support/v4/view/AccessibilityDelegateCompat;)Ljava/lang/Object;]

[2013-03-01 21:08:42 - CaptureActivity]   Instruction = [18] areturn

[2013-03-01 21:08:42 - CaptureActivity]   Exception   = [java.lang.IllegalArgumentException] (Can't find any super classes of [android/support/v4/view/AccessibilityDelegateCompatIcs$1] (not even immediate super class [android/view/View$AccessibilityDelegate]))

[2013-03-01 21:08:42 - CaptureActivity] Unexpected error while performing partial evaluation:
[2013-03-01 21:08:42 - CaptureActivity]   Class       = [android/support/v4/view/AccessibilityDelegateCompat$AccessibilityDelegateJellyBeanImpl]
[2013-03-01 21:08:42 - CaptureActivity]   Method      = [newAccessiblityDelegateBridge(Landroid/support/v4/view/AccessibilityDelegateCompat;)Ljava/lang/Object;]
[2013-03-01 21:08:42 - CaptureActivity]   Exception   = [java.lang.IllegalArgumentException] (Can't find any super classes of [android/support/v4/view/AccessibilityDelegateCompatIcs$1] (not even immediate super class [android/view/View$AccessibilityDelegate]))
[2013-03-01 21:08:42 - CaptureActivity] java.lang.IllegalArgumentException: Can't find any super classes of [android/support/v4/view/AccessibilityDelegateCompatIcs$1] (not even immediate super class [android/view/View$AccessibilityDelegate])
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.evaluation.value.ReferenceValue.generalize(ReferenceValue.java:287)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.evaluation.value.IdentifiedReferenceValue.generalize(IdentifiedReferenceValue.java:65)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.evaluation.value.ReferenceValue.generalize(ReferenceValue.java:481)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.optimize.info.MethodOptimizationInfo.generalizeReturnValue(MethodOptimizationInfo.java:247)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.optimize.evaluation.StoringInvocationUnit.generalizeMethodReturnValue(StoringInvocationUnit.java:195)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.optimize.evaluation.StoringInvocationUnit.setMethodReturnValue(StoringInvocationUnit.java:126)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.evaluation.BasicInvocationUnit.exitMethod(BasicInvocationUnit.java:134)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.evaluation.Processor.visitSimpleInstruction(Processor.java:514)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.classfile.instruction.SimpleInstruction.accept(SimpleInstruction.java:218)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.optimize.evaluation.PartialEvaluator.evaluateSingleInstructionBlock(PartialEvaluator.java:753)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.optimize.evaluation.PartialEvaluator.evaluateInstructionBlock(PartialEvaluator.java:587)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.optimize.evaluation.PartialEvaluator.evaluateInstructionBlockAndExceptionHandlers(PartialEvaluator.java:560)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.optimize.evaluation.PartialEvaluator.visitCodeAttribute0(PartialEvaluator.java:264)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.optimize.evaluation.PartialEvaluator.visitCodeAttribute(PartialEvaluator.java:181)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.classfile.attribute.CodeAttribute.accept(CodeAttribute.java:101)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.classfile.ProgramMethod.attributesAccept(ProgramMethod.java:79)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.classfile.attribute.visitor.AllAttributeVisitor.visitProgramMember(AllAttributeVisitor.java:95)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.classfile.util.SimplifiedVisitor.visitProgramMethod(SimplifiedVisitor.java:91)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.classfile.ProgramMethod.accept(ProgramMethod.java:71)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.classfile.ProgramClass.methodsAccept(ProgramClass.java:504)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.classfile.visitor.AllMethodVisitor.visitProgramClass(AllMethodVisitor.java:47)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.classfile.ProgramClass.accept(ProgramClass.java:346)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.classfile.ClassPool.classesAccept(ClassPool.java:116)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.optimize.Optimizer.execute(Optimizer.java:372)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.ProGuard.optimize(ProGuard.java:306)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.ProGuard.execute(ProGuard.java:115)
[2013-03-01 21:08:42 - CaptureActivity]     at proguard.ProGuard.main(ProGuard.java:492) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T22:20:38.807

您应该指定一个目标 SDK `project.properties`，在这种情况下包含“android.view.View$AccessibilityDelegate”（SDK 级别 14 或更高）。ProGuard 的收缩/优化/混淆至少需要与用于编译应用程序及其库的基本 SDK*相同*。支持库是针对这个更新的 SDK 编译的，所以 ProGuard 也需要它。

您仍然可以在您的`AndroidManifest.xml`, 中指定不同的目标/最小/最大 SDK 来运行应用程序。您当然应该确保应用程序确实与那些指定的 SDK 兼容。

# html - 单击主题标签超链接时，文本隐藏在浮动导航菜单下

> ID：15191481
> 
> 赞同：0
> 
> 时间：2013-03-03T22:07:29.373
> 
> 标签：html, css, css-float

我有一个用于词汇表页面的浮动水平导航菜单。当我单击主题标签超链接以将我带到页面上的另一个定义时，该`<dt>`部分隐藏在导航菜单下方。

是否可以确保文本显示在浮动导航菜单下方？

请查看我草绘的[jsfiddle](http://jsfiddle.net/MmDyn/)并单击黄色突出显示的超链接。

希望你能帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:24:25.990

在 javascript 或不推荐使用的框架集之外，您可以执行以下操作：

```
<dt class="highlight" id='ccdcd'><div class='jump-to-able'></div>ccdcd</dt>

.jump-to-able {
    padding-top: 20px;
    margin-top: -20px;
} 
```

[http://jsfiddle.net/bQ4kH/1/](http://jsfiddle.net/bQ4kH/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:34:24.083

根据@Brandon 的解决方案，我针对锚点：

```
div > a, dt > a {
padding-top: 22px;
margin-top: -22px;
} 
```

这不需要任何额外的标记。

# java - 平方和计算

> ID：15191482
> 
> 赞同：1
> 
> 时间：2013-03-03T22:07:33.063
> 
> 标签：java

> 编写一个程序，显示乘法表中每个整数的平方和。整数 1-10
> 来自教授：表中的值应该是 rowNum 的平方加上 colNum 的平方。所以，第一个条目是 2 (rowNum = 1, colNum = 1\. 1^2 + 1^2 = 1 + 1 = 2)。下一个条目是 5 (rowNum = 1, colNum = 2\. 1^2 + 2^2 = 1 + 4 = 5)。

我的代码除了标题不会打印任何东西。没有计算。表应该是这样的：

```
    1 2 3 4 5 ....
1 2 5 10 17 26....
2 5 8 13 20 29....

```

```
public class Mobilesumcp3ex3 {

    /**
     * @param args the command line arguments
     */

    public static void main ( String [] args )
    {
        // Display a title
        System.out.println( " Sum of Multipication Table" );
        System.out.println( "-------------------" );             

        int num[] = new int[10];          
        int sq[] = new int[10];                
        int sum = 0;              
        for (int i = 0; i < num.length; i++) {                       

            sq[i] = num[i] * num[i];                       
            sum += sq[i];   
        } 
        System.out.println(num+"\t"+sum);
        System.out.println("Sum of the square of numbers: " + sum);    
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:12:53.603

数组 num[] 未初始化。所以，`sq[i] = num[i] * num[i];`有一个问题，因为 num[i] 不存在（那里没有价值）。除此之外，代码看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:20:23.230

**一些问题：**

*   你不需要数组
*   您可能需要 2 个循环
*   你在错误的地方打印
*   你不需要`sum`
*   你永远不会设置`num`. 当你说

    ```
    int num[] = new int[10]; 
    ```

    数组中的所有值都将被初始化为 0（或者`null`如果我们正在处理对象），这就是 Java 所做的（就此而言，我所知道的任何语言都不会自动将数组的值设置为自动递增的值，除非明确告知这样做）。

**暗示：**

```
int max = 10;

for (int i = 1; i <= max; i++)
  /* Print each cell of the header row here */

for (int i = 1; i <= max; i++)
{
  /* Print the first column of a row */
  for (int j = 1; j <= max; j++)
    /* Print each cell for this row, which will be (i*i + j*j) */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T22:21:03.337

恕我直言，您的问题是您*有*数组：您不需要它们。

使用迭代逻辑，在这种情况下用`num[i]`简单`i`（或类似）替换。解决方案是让循环正确。

# python - Python 中的 Web Scraping 和 Beautiful Soup

> ID：15191492
> 
> 赞同：1
> 
> 时间：2013-03-03T22:08:04.480
> 
> 标签：python, web-scraping, screen-scraping, beautifulsoup, scraper

我一直在使用 Python 的 Beautiful Soup 库来抓取页面，但是我遇到了一些限制。我一直在抓取不同的（通常是新闻）网站，并且提前不知道网站的轮廓是什么样的。理想情况下，我想要一个只从网站上抓取正文的功能（而不是链接到其他文章的标题）。我注意到文本通常位于`<p>`网站的标签内，但并非总是如此，所以我创建了这个函数：

```
def get_text(html):
    soup = BeautifulSoup(html)
    text = ""
    for node in soup.findAll('p'):
        inner_node = node.findAll(text=True)
        for inner_text in inner_node:
            text += ' ' + inner_text
    return text 
```

但是，它并非一直都有效，我经常会错过项目。我会假设必须存在已经制作的东西，我可以使用这些东西和/或在抓取文本时遵循一些最佳实践。感谢您对此事的指导。

# ruby-on-rails - Rails：在“新”链接上使用 AJAX 以不显眼地添加多个表单？

> ID：15191495
> 
> 赞同：0
> 
> 时间：2013-03-03T22:08:13.073
> 
> 标签：ruby-on-rails

我正在制作一个关于烹饪的页面，我希望它可以轻松添加“厨房”（它只有一个`name`属性），这样如果我点击“创建新厨房”链接，创建新厨房的表单将每次点击都会弹出，这样您就可以通过点击一个提交按钮来创建多个厨房。

是否可以使`kitchens#new`操作返回 javascript 格式，以便我可以在控制器中执行`respond_to do |format|`js`kitchens#new`并在我的 new.js.erb 文件中使用 javacsript 添加表单？还是有其他方法可以做到这一点？

index.html.erb

```
<div class="createkitchendiv">

    <%= link_to "Create new kitchen", new_kitchen_path, :id => "createkitchenlink" %>

        <%= form_tag "/kitchen", :method => :post, :remote => true do %>

        <div class="blahblah">
        <%= render :partial => "box" %>

        </div>
        <%= submit_tag "Submit" %>

    <% end %>
    </div> 
```

_box.html.erb（我希望能够通过单击“创建新厨房”不显眼地添加到页面的部分/表单。我不确定此设置是否适用于/不使用 js。感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:53:52.867

当然，您可以通过操作显示您想要的任何内容`new`;-)

生成的表单应如下所示：

```
<form>
  <div id="container">
    <input type="text" name="kitchenname[]"/>
  </div>
  <input type="submit"/>
</form>

<input type="button" id="addNewInput" /> 
```

然后你只需使用 jQuery 来监听`addNewInput`-button。如果它被单击，则将一个新`<input type="text" name="kitchenname[]" />`标签插入到`container`-div。

然后，当单击提交按钮时，您的控制器将收到一个数组`params[:kitchenname]`，您可以将其保存到 DB 或其他任何地方。

* * *

您可能希望在 assets/javascripts/... 文件夹中包含必要的 JS 代码。一个简单的小型侦听器，用于侦听`#addNewInput`.

* * *

编辑：您也可以在没有 JS 的情况下执行此操作，但它可能会变得更复杂一些。您必须制作第二个按钮，该按钮负责`add new input field`使控制器比以前多输出一个输入字段。此外，您可能希望在单击按钮之前保留字段中的所有值。

我会选择 jQuery 解决方案。它非常简单（以及更多的 Web 2.0）；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:25:17.480

我还建议你看一下关于 Ajax 的 Railscasts 修订集[http://railscasts.com/episodes/136-jquery-ajax-revised](http://railscasts.com/episodes/136-jquery-ajax-revised)

您的问题将在 6:44 分钟前得到解决；）

# python - 如何解释 Python 文档中的“额外”

> ID：15191496
> 
> 赞同：0
> 
> 时间：2013-03-03T22:08:15.917
> 
> 标签：python

在文档中，给出了以下行来描述如何启动类对象

```
class xml.etree.ElementTree.Element(tag, attrib={}, **extra) 
```

在它下面有一行说

> extra 包含附加属性，作为关键字参数给出。

我一直在尝试，但我不确定这到底意味着什么。例如，我想添加**text**属性，但它不能正常工作。我的论点似乎转而使用**attrib**属性。

这是突出我的问题的示例代码

```
>>> import xml.etree.ElementTree as ET
>>> tree = ET.Element('Level 0',text = 'test text')
>>> tree.attrib #This should be empty
{'text': 'test text'}
>>> tree.text #test text should be here
>>> 
```

下面是参考文档的链接。

[http://docs.python.org/3.3/library/xml.etree.elementtree.html#element-objects](http://docs.python.org/3.3/library/xml.etree.elementtree.html#element-objects)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:09:12.827

这是完全正确的。XML 标记属性存储在`Element.attrib`结构中。

然后，当您将 ElementTree 结构输出到 XML 时，这些`.attrib`值将用于生成 XML 属性：

```
>>> elem = ET.Element('Level0', text='test text')
>>> ET.tostring(elem)
'<Level0 text="test text" />' 
```

函数签名中的`**keywords`语法捕获函数调用的附加关键字参数；您可以传入显式字典*，*也可以使用关键字参数来定义属性。请参阅[函数定义文档](http://docs.python.org/2/reference/compound_stmts.html#function-definitions)。

因此，以下两种形式是等价的（对于`ElementTree.Element()`调用）：

```
ET.Element('Level0', text='test text')

ET.Element('Level0', {'text': 'test text'}) 
```

# c# - 方法参数 C# 中的有界泛型类型

> ID：15191498
> 
> 赞同：4
> 
> 时间：2013-03-03T22:08:45.043
> 
> 标签：c#, generics, bounded-types

**问题**：C# 是否支持方法参数中的有界泛型类型？如果是这样，语法是什么？

**上下文**：我正在编写一个实用方法，`Dictionary`对字典中的值进行排序。因此，`Dictionary`必须实现`IComparable`接口中的值。

**Attempt(s)**：下面的代码采用 a `Dictionary`，获取 的列表`KeyValuePair`，对 进行排序`Value`，然后返回字典中的顶部键，如它们的值所报告的那样。

```
private string[] getTopWords<T , U>(Dictionary<T, U> similarWordsAndWeights)
{
    var myList = similarWordsAndWeights.ToList();

    myList.Sort((firstPair, nextPair) =>
    {
        return -firstPair.Value.CompareTo(nextPair.Value);
    }
    );
    var dictionary = myList.ToDictionary((keyItem) => keyItem.Key, (valueItem) => valueItem.Value);
    return createStringArrayFromGenericList(dictionary.Keys.ToList().GetRange(0, 10));
} 
```

但是，此代码不会编译，因为`U`不是“保证”实现`IComparable`。语法`private string[] getTopWords<T, U : IComparable>`也不会编译。

我可以输入检查以查看我的`U`工具，`IComparable`但我宁愿不这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T22:08:45.043

因此，在写完我的问题后不久，我在 MSDN 上查找了一篇关于[泛型](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)的文章，我已经通过了该文章，但是在页面的中途我找到了我正在寻找的答案。这是解决方案的代码：

```
private string[] getTopWords<T , U>(Dictionary<T, U> similarWordsAndWeights) where U : IComparable
{
    var myList = similarWordsAndWeights.ToList();

    myList.Sort((firstPair, nextPair) =>
    {
        return -firstPair.Value.CompareTo(nextPair.Value);
    }
    );
    var dictionary = myList.ToDictionary((keyItem) => keyItem.Key, (valueItem) => valueItem.Value);
    return createStringArrayFromGenericList(dictionary.Keys.ToList().GetRange(0, NUMBER_OF_WORDS_TO_RETURN));
} 
```

您似乎在参数之后进行了边界声明。我之前一直在寻找一些东西（具有 Java 背景），当然找不到任何东西。一个人在谷歌上只需要多花几分钟就能完成的事情真是太神奇了……

我认为分享我的解决方案是明智的，因为我无法在 SO 上找到任何具体的内容，它可能对最终搜索相同内容的其他人有所帮助。

# c# - 在 XNA 中禁用第三方覆盖

> ID：15191499
> 
> 赞同：1
> 
> 时间：2013-03-03T22:08:47.633
> 
> 标签：c#, xna, directx, overlay

我的 (C#) XNA Game 应用程序使用 WPF 从用户那里获取输入，这工作正常，但是当 TeamSpeak 等其他应用程序在我的游戏之上放置覆盖时，我的程序不稳定。

我所有的 WPF 对象都变得有点“不稳定”，并且在一段时间`game.Run()`后`Main(Program.cs)`抛出一个错误：

> *AccessViolationException - 试图读取或写入受保护的内存。这通常表明其他内存已损坏。*

有没有一种简单的方法可以防止覆盖连接到我的 XNA 应用程序？

编辑：（要澄清的更多信息）这只发生在我将 WPF 与 XNA 一起使用时，如果我只运行 XNA，则根本没有问题。该应用程序在窗口模式下运行，因此无论如何覆盖连接到它有点烦人。我在 C#Corner 使用了一个教程来实现： [http ://www.c-sharpcorner.com/uploadfile/iersoy/windows-controls-and-wpf-usercontrols-inside-an-xna-game-project/](http://www.c-sharpcorner.com/uploadfile/iersoy/windows-controls-and-wpf-usercontrols-inside-an-xna-game-project/)

我很确定这是导致 TeamSpeak 覆盖与 WPF 发生冲突的`[STAThread]`部分。`static void Main(string[] args)`

# javascript - Google Maps API v3 仅接受“google_map”元素 ID

> ID：15191502
> 
> 赞同：-1
> 
> 时间：2013-03-03T22:09:09.530
> 
> 标签：javascript, html, google-maps

我需要在我的网站上显示多张地图，但 API 仅在地图容器的 ID 为“google_map”时才有效。我不能使用任何其他 ID。
有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:29:54.517

创建地图对象时

`var map = new google.maps.Map(document.getElementById("map_canvas"))`

挂钩到对应的div

`<div id="map_canvas"></div>`

您可以根据需要创建任意数量的地图对象：

`var mapTwo = new google.maps.Map(document.getElementById("map_canvas_two"))`

`<div id="map_canvas_two"></div>`

# php - 在调整大小之前猜测 gif 文件大小

> ID：15191507
> 
> 赞同：1
> 
> 时间：2013-03-03T22:09:21.213
> 
> 标签：php, imagick, animated-gif

我有一个动画 gif，我提供了使用拖动来调整大小的能力。我想知道我是否可以在调整大小完成服务器端之前猜出调整大小的 gif 的文件大小。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:20:10.983

是的，您可以使用不同的方法进行猜测。

给出一个相当好的结果的最简单的猜测是假设调整大小的图像每个像素包含大约相同数量的信息，即文件大小变化的线性函数。您只需将原始大小乘以像素数的变化即可计算调整后的图像大小。

例如，如果您将图像的大小从 100x100 像素调整为 200x200 像素，则文件大小将更改为`(200x200)/(100x100)`，即原始大小的 4 倍。

从中，您可以根据您获得的实际结果制作更高级的算法来猜测大小，即当您缩小或放大图像时，文件大小会发生多少变化的线性或非线性函数。

# node.js - 在 Express Node.js 中禁用 etag 标头

> ID：15191511
> 
> 赞同：40
> 
> 时间：2013-03-03T22:10:06.877
> 
> 标签：node.js, express

我们需要`etag`从我们的 Node.js Express 应用程序中的所有 HTTP 响应中删除标头。我们有一个用 Express 编写的 Web 服务 API，当我们发送 etag 并且客户端发回标头时，会在客户端看到意外结果`if-none-match`。

我们已经尝试过`app.disable('etag')`and `res.removeHeader('etag')`，但都不起作用；无论如何，该应用程序都会发送标头。

是否有任何其他方法可以在所有响应中禁用此标头？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-11-12T06:56:50.437

`app.disable('etag')`现在应该可以工作了，已经合并了一个拉取请求来处理这个问题：

[https://github.com/visionmedia/express/commit/610e172fcf9306bd5812bb2bae8904c23e0e8043](https://github.com/visionmedia/express/commit/610e172fcf9306bd5812bb2bae8904c23e0e8043)

**更新**：正如 Bigood 在评论中指出的那样，新的做事方式如下

```
app.set('etag', false); // turn off 
```

版本 3.9.0 发生了变化：[https ://github.com/strongloop/express/releases/tag/3.9.0](https://github.com/strongloop/express/releases/tag/3.9.0)

有关设置 etag 的更多选项，请查看此处的 4.x 文档：http: [//expressjs.com/4x/api.html#app.set](http://expressjs.com/4x/api.html#app.set)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-04-30T07:22:40.230

```
app.disable('etag') 
```

这将禁用所有请求的 etag 标头，但不会禁用静态内容。以下内容适用于静态内容：

```
app.use(express.static(path.join(__dirname, 'public'), {
        etag: false
})); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-13T06:44:45.903

查看 express response.js，仅当请求方法为 GET 时才会发送 Etag。您可以通过在调用 response.send() 之前将 request.method 设置为其他内容来阻止 express 在响应中发送 etag。

例如：

```
app.get('/path/returnsJSON', function(req, res){
/* HACK to workaround the framework sending e-tags and "304 NOT MODIFIED" responses */
req.method="NONE"; // was "GET"
res.status(200).send({data:1}); 
}); 
```

这对我来说没问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T22:51:43.523

在我看来，解决您的问题的真正方法是弄清楚为什么它由于 etags 而表现异常。

不过，要回答您的问题，Express 目前不支持禁用 etags 标头。它实际上已[在此拉取请求中](https://github.com/visionmedia/express/pull/1421)进行了讨论和合并，但后来被恢复了。如果您真的需要这个并且不想尝试解决根本问题，您可以随时应用该补丁并从那里开始。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-05T12:52:23.553

该示例完美运行。

1.  没有未记录的黑客行为
2.  微调每个端点
3.  可以添加/删除任何标题:)

    ```
    var onHeaders = require('on-headers')

    function myRoute(req, res) {
      scrubETag(res)
      // do the rest
      res.send('something')
    }

    function scrubETag(res) {
      onHeaders(res, function () {
        this.removeHeader('ETag')
      })
    } 
    ```

来源：[https ://github.com/expressjs/express/issues/2472](https://github.com/expressjs/express/issues/2472)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-13T20:13:00.013

**你不能使用快递**

您只能制作它们`false`，但这仍然会导致 304 重定向，因为您的 etag 将匹配最后一个请求（返回的`false`）

**我从另一个 npm 包**（[https://github.com/helmetjs/nocache/issues/9](https://github.com/helmetjs/nocache/issues/9)）中使用了这个解决方案，它使用npm 包在express 添加 etag**后**`on-headers`修改标头。

 **这可以添加到您`res`被呼叫的任何地方，用于特定路线或所有路线：

```
const onHeaders = require('on-headers');

onHeaders(res, function () {
    this.removeHeader('etag');
}); 
```

**请注意**，您可能还需要更改缓存设置。但这会删除您的快递 etags :)**

# c++ - 如果绝对或相对误差小于 10^(−6)，则您的答案将被视为正确

> ID：15191512
> 
> 赞同：2
> 
> 时间：2013-03-03T22:10:11.127
> 
> 标签：c++, c, algorithm

在许多编程问题中，都提到了上述约束。我在 codechef 和 SPOJ 中都看到了这一点。

例如[Link-1](http://www.codechef.com/JAN13/problems/ANDOOR)、[Link-2](http://www.codechef.com/problems/PARCOS)等等。（请参阅这两个示例链接中的输出部分）

这个约束是什么意思？以及如何确保我的输出指定了此约束？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T22:12:06.903

绝对错误是：

```
|computedAnswer - correctAnswer| 
```

相对误差为：

```
|(computedAnswer - correctAnswer) / correctAnswer| 
```

直观地说，绝对误差是计算出的答案（或近似值）与正确（可能未知）答案的差距。相对误差是绝对误差与正确答案的比率。

因此，无论您是使用激光测距仪测量到月球的距离，还是在狐步小跑中尝试正确放置左脚，在任何一种情况下，您的绝对误差都可能是半米。对于月球距离测量，那将是相当不错的；对于狐步舞，它会让你开始与星共舞。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T22:32:22.920

除了 Ted Hopp 所说的之外，减少错误的一个可能重要因素是通过以下方式最大限度地减少浮点漂移/不准确性：

*   通过简化/评估将在您的输入上起作用的操作集来减少总浮点计算。（例如，尽可能简化数学表达式）。这是因为浮点错误会在后续操作中复合。
*   使用最高精度（例如双精度）进行计算。
*   或者，您可以使用分数类型或更数字化的类，然后在最后将其评估为浮点值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T06:26:02.360

这是一个简单的计算机问题：计算 1/3。

如果您使用“普通”计算机数字，例如浮点数、双精度等，那么您计算出的 1/3 版本将不会是 0.3333 ....，它将是 0.333333333332 或 0.333333333334 或类似的东西，因为 1/3 不能完全正确表示为浮点数或有限十进制扩展。当然可以将 1/3 评估到 10^-6 的相对和绝对误差范围内；0.333333333332 和 0.333333333334 都满足这个精度要求。

因此，答案仅在 10^-6 以内的要求允许使用浮点数和双精度的计算机解决方案来解决仅使用浮点数和双精度没有精确数值解的问题。这实际上是几乎所有的数字问题——大多数分数不能精确地用数字计算；计算机使用近似值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T23:41:55.457

问题提出者说，如果：

sqrt((your_answer - their_answer)^2) < 1*10^-6

那么你是“正确的”

准确地比较浮点值是非常有问题的。这是因为在有限精度的机器中进行四舍五入（即某些数学答案不能用有限的数字表示，例如 1.0/3.0）。

在计算机上执行的许多问题的解决方案都是迭代的。这意味着，您从第一个猜测开始，然后计算要更改多少猜测。然后你重复这个，计算多少可以改变你的猜测。重复此过程后，您更改猜测的量会越来越小（它会收敛）。一旦变化小于某个指定量，您可以认为您的答案已经收敛，您现在有一个“正确”的答案。梯度体面算法是这种技术的一个典型例子。我没有仔细查看提供的链接，但也许要获得答案，您需要一个迭代解决方案，在这种情况下，您应该使用 1.0 * 10^-6 作为限制来测试您的解决方案是否已经收敛。

[http://en.wikipedia.org/wiki/Gradient_descent](http://en.wikipedia.org/wiki/Gradient_descent)

看来您发布的网站的链接是可以将它们借给数值方法的问题：

[http://en.wikipedia.org/wiki/Numerical_analysis](http://en.wikipedia.org/wiki/Numerical_analysis)

这似乎是一个有趣的网站，有一些具有挑战性的问题。

# javascript - 由另一个函数设置的对象属性（不是预期的）javascript

> ID：15191516
> 
> 赞同：0
> 
> 时间：2013-03-03T22:10:32.653
> 
> 标签：javascript, object

遇到对象方法未按预期运行的问题。当我运行时`ndData.recipe()`，它会按预期更新`ndData.recipeData`对象，向以前的值添加新值。

但是当我调用`ndData.update()`，然后`ndData.recipe()`再次运行时，不是将新值添加到旧值中，而是将旧值替换为新值。

我认为我的错误可能与变量范围不当有关，但我不确定。

```
var ndData = {

initData: null,
newData: null,
recipeData: null,
ingredients : 0,

load : function(NDB_No){

    var options = [];
    $.getJSON(('scripts/jsonencode.php?q=' + NDB_No), function(data) {
        $.each(data.measurements, function(key, val) {
            options.push('<option id="wgt' + val.Seq + '" value="' + val.Gm_Wgt + '">'+ val.Amount + ' ' + val.Msre_Desc + '</option>');
            options.join('');
            $('#servSelect').html(options);
         }); 

        ndData.initData = data;
        ndData.newData = data;
        ndData.recipeData = data;

        ndData.print(ndData.initData, '#ndDataTbl');

      });

},

print : function(pdata, div){
    var items=[];
    var options=[];
    var wtRatio = 1;

    $.each(pdata.properties, function(key, val) {

        if ($.isNumeric(val)){
            val = Math.round((val * wtRatio)*10)/10;
            }

        items.push('<tr>');
        items.push('<td id="">'+ key +" : " + val + '</td>');
        items.push('</tr>');
    });

  $(div).html((items.join('')));
},

//Seems that when this update() function is called, ndData.recipeData is set to ndData.newData

update : function(){ 

    var GmWt = ($('#servSelect').val())*($('#servQty').val());
    var wtRatio = GmWt/ndData.initData.properties.GmWt_1;

    $.each(ndData.newData.properties, function(key, val) {

        if ($.isNumeric(val)){
            parseFloat(val);
            parseFloat(wtRatio);

            val = Math.round((val * wtRatio)*10)/10;
            }

        ndData.newData.properties[key] = val;

    });
    console.log('update val: ' + ndData.newData.properties.Refuse_Pct);
    ndData.print(ndData.newData, '#ndDataTbl');
},

recipe : function(){

    if (ndData.ingredients > 0){
        console.log("inregedients > 0"); 

         $.each(ndData.newData.properties, function(key, val){

            if($.isNumeric(val)){
                val = parseFloat(val);
                ndData.recipeData.properties[key] = parseFloat(ndData.recipeData.properties[key]);
                ndData.recipeData.properties[key] += val;

                console.log('val: ' + ndData.recipeData.properties[key]); // after ndData.update() is called,
                                                                          // this is logging the value of ndData.newData.properties[key]
            }
        });

    }else{
       console.log("inregedients == 0");
       ndData.recipeData = ndData.newData; 
    }

// after calling ndData.update(), this is printing properties of ndData.newData,
// when I expect properties of ndData.recipeData

 ndData.print(ndData.recipeData, '#recipeDataTbl');

 ndData.ingredients++ ;

}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:18:49.170

您将您的类设置为对象文字。这不是一件坏事，但对象文字的工作方式是它只能有一个实例，并且其中的任何数据都将被替换。

您可能想查看[创建类的其他方法](http://www.phpied.com/3-ways-to-define-a-javascript-class/)，也许查看 stackoverflow 上的[这个线程](https://stackoverflow.com/questions/4859800/should-i-be-using-object-literals-or-constructor-functions)以了解更多关于对象字面量的信息。

# sql - SQL Server 存储过程参数

> ID：15191517
> 
> 赞同：29
> 
> 时间：2013-03-03T22:10:57.243
> 
> 标签：sql, sql-server-2008, stored-procedures, optional-parameters

我正在开发一个框架，其中我是一个带有动态创建参数的调用存储过程。我正在运行时构建参数集合。

当我将参数传递给存储过程时会出现问题，但存储过程不接受这样的参数。

例如，我的存储过程是：

```
CREATE PROCEDURE GetTaskEvents
    @TaskName varchar(50)
AS
BEGIN
-- SP Logic
END 
```

调用存储过程为：

```
EXEC GetTaskEvents @TaskName = 'TESTTASK', @ID = 2 
```

这会引发以下错误：

```
Msg 8144, Level 16, State 2, Procedure GetTaskEvents, Line 0
Procedure or function GetTaskEvents has too many arguments specified. 
```

这在 Sybase ASE 中运行良好，它只是忽略任何附加参数。这可以通过 MSSQL server 2008 实现吗？任何帮助，非常感谢。谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-03T22:24:53.660

SQL Server 不允许您将参数传递给尚未定义的过程。我认为最接近这种设计的方法是使用可选参数，如下所示：

```
CREATE PROCEDURE GetTaskEvents
    @TaskName varchar(50),
    @ID int = NULL
AS
BEGIN
-- SP Logic
END; 
```

您需要在定义中包含**所有可能使用的参数**。然后你可以自由地调用这个过程：

```
EXEC GetTaskEvents @TaskName = 'TESTTASK', @ID = 2;
EXEC GetTaskEvents @TaskName = 'TESTTASK'; -- @ID gets NULL here 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T22:18:08.913

为什么要将参数传递给不使用它的存储过程？

在我看来，您可能会更好地构建动态 SQL 语句然后执行它们。你试图用 SP 做什么是行不通的，即使你可以改变你正在做的事情以适应不同数量的参数，那么你基本上是在使用动态生成的 SQL，你违背了首先拥有/使用SP。SP 有作用，但并非在所有情况下都有解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T22:33:27.777

I'm going on a bit of an assumption here, but I'm assuming the logic inside the procedure gets split up via task. And you cant have nullable parameters as [@Yuck](https://stackoverflow.com/a/15191644/1105314) suggested because of the dynamics of the parameters?

So going by my assumption

> If TaskName = "Path1" Then Something
> 
> If TaskName = "Path2" Then Something Else

My initial thought is, if you have separate functions with business-logic you need to create, and you can determine that you have say 5-10 different scenarios, rather write individual stored procedures as needed, instead of trying one huge one solution fits all approach. Might get a bit messy to maintain.

But if you must...

Why not try dynamic SQL, as suggested by [@E.J Brennan](https://stackoverflow.com/a/15191584/1105314) (Forgive me, i haven't touched SQL in a while so my syntax might be rusty) That being said i don't know if its the best approach, but could this could possibly meet your needs?

```
CREATE PROCEDURE GetTaskEvents
    @TaskName varchar(50)
    @Values varchar(200)
AS
BEGIN
  DECLARE @SQL VARCHAR(MAX)

  IF @TaskName = 'Something'
  BEGIN
    @SQL = 'INSERT INTO.....' + CHAR(13)
    @SQL += @Values + CHAR(13) 
  END

  IF @TaskName = 'Something Else'
  BEGIN
    @SQL = 'DELETE SOMETHING WHERE' + CHAR(13)
    @SQL += @Values + CHAR(13) 
  END

  PRINT(@SQL)
  EXEC(@SQL)    
END 
```

(The CHAR(13) adds a new line.. an old habbit i picked up somewhere, used to help debugging/reading dynamic procedures when running SQL profiler.)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-17T09:06:41.077

```
CREATE PROCEDURE GetTaskEvents
@TaskName varchar(50),
@Id INT
AS
BEGIN
-- SP Logic
END 
```

Procedure Calling

```
DECLARE @return_value nvarchar(50)

EXEC  @return_value = GetTaskEvents
        @TaskName = 'TaskName',
        @Id =2  

SELECT  'Return Value' = @return_value 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-27T08:18:12.543

You are parsing wrong parameter combination.here you passing `@TaskName =` and `@ID` instead of `@TaskName =` .SP need only one parameter.

# javascript - Highcharts 在浮点数中创建了太多值

> ID：15191519
> 
> 赞同：1
> 
> 时间：2013-03-03T22:11:16.997
> 
> 标签：javascript, jquery, html, highcharts

以下绘制饼图的函数在绘制图表时生成了太多小数点。我应该修改什么以使其仅保留两位小数？代码如下：

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container2',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'Risk Score for countries'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
            percentageDecimals: 1
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'Risk Score',
            data: <?php echo json_encode($names1,JSON_NUMERIC_CHECK); ?>
        }]
    });
});

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:07:15.383

```
formatter: function() {
    return '<b>'+ this.point.name +'</b>: '+ Highcharts.numberFormat(this.percentage, 2); +' %';
} 
```

并添加它的工具提示格式

```
tooltip: {
    pointFormat: '{series.name}: <b>{point.percentage}%</b>',
    percentageDecimals: 1,
    formatter: function() {
        return '<b>'+ this.point.name +'</b>: '+ Highcharts.numberFormat(this.percentage, 2); +' %';
    }
}, 
```

作为[PHP 数字格式](http://php.net/manual/en/function.number-format.php)

[演示](http://jsfiddle.net/pJdhf/)

# php - mySQL 上一个/下一个查询

> ID：15191522
> 
> 赞同：0
> 
> 时间：2013-03-03T22:11:44.907
> 
> 标签：php, mysql

我正在尝试找到一种方法来使用**上**一个和**下一个**按钮来为给定的查询排序显示更多数据，就像分页一样。

查询是这样的：

```
$query = "SELECT * 
        FROM wp_posts p
            LEFT OUTER JOIN wp_term_relationships r ON r.object_id = p.ID
            LEFT OUTER JOIN wp_term_taxonomy x ON x.term_taxonomy_id = r.term_taxonomy_id
            LEFT OUTER JOIN wp_terms t ON t.term_id = x.term_id
            LEFT JOIN wp_postmeta pm ON p.id = pm.post_id
        WHERE p.post_status = 'publish'
        AND pm.meta_key = 'xTraData'
        AND p.post_type = 'post'
        AND t.slug = 'press-coverage'
        ORDER BY p.post_date DESC LIMIT 0,6;"; 
```

如何获取上**一个 id**和**下一个 id**用于下一个/上一个按钮以刷新查询字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:18:32.930

您可以使用可以从 URL 发送的 $_GET 变量来获取它们。处理它们以提高您的极限。

mysql 限制定义了要获取多少行以及从哪里获取。

因此，`0, 6`在您的查询中说从`0`（第一）开始并选择`6`行。

```
$p_num = isset($_GET['pagenumber']) && (int)$_GET['pagenumber'] > 0 ? $_GET['pagenumber'] : 0;
$p_size = 6;

$query = "SELECT * 
        FROM wp_posts p
            LEFT OUTER JOIN wp_term_relationships r ON r.object_id = p.ID
            LEFT OUTER JOIN wp_term_taxonomy x ON x.term_taxonomy_id = r.term_taxonomy_id
            LEFT OUTER JOIN wp_terms t ON t.term_id = x.term_id
            LEFT JOIN wp_postmeta pm ON p.id = pm.post_id
        WHERE p.post_status = 'publish'
        AND pm.meta_key = 'xTraData'
        AND p.post_type = 'post'
        AND t.slug = 'press-coverage'
        ORDER BY p.post_date DESC LIMIT ".(($p_num-1) * $p_size).",".$p_size.";"; 
```

现在，发送如下请求：`yourpage.php?pagenumber=2`它将查询第二个页面，其中一个页面将包含大约 6 个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:17:42.920

您可以传入 LIMIT 界限的变量。在这种情况下，**前一个 id**将是`null`，**下一个 id**可能是 7。如果您一次总是想要**X**条记录，您可以相应地`LIMIT $next_ID, ($next_ID + $X)`修改您的上一个和下一个变量。

# c - 使用 C 从结构写入文本文件

> ID：15191527
> 
> 赞同：-1
> 
> 时间：2013-03-03T22:12:17.690
> 
> 标签：c, file, function, save, structure

我想对我的保存功能有一些帮助 - 将结构保存在我选择将要调用的文件中。

所以我的代码是：

```
#include <stdio.h>
#define MAX_NAME_LENGTH  100
#define MAX_STRUCTS  100  

struct students
{
char name[MAX_NAME_LENGTH]; 
char last[MAX_NAME_LENGTH];
char g[MAX_NAME_LENGTH];
char s[MAX_NAME_LENGTH];
};

/* Load from the named file, into the `analg` array provided, but no more than `max` entries */
/* Returns the number of entries loaded */

int load(char *filename, struct students *h, int max)
{
int count = 0;  /* The number of entries we have loaded */

FILE *fp = fopen(filename, "r");

char line[MAX_STRUCTS * 4];  /* *4 for first and last name grade and score*/

if (fp == NULL)
    return;  /* File could not be opened */

/* Read all lines, but only as long as we have available entries in the array */
while (count < max && fgets(line, sizeof(line), fp) != NULL)
{
    /* Extract the first and last names from the newly read line */
    sscanf(line, "%s %s %s %s", h[count].name, h[count].last, h[count].g, h[count].s);
    count++;  /* Increase counter so we have the current size */
}

/* All done loading */
fclose(fp);

return count;  /* Return the number of entries we loaded */

}

/* Print from the structure array, there are `count` entries in the array */
void print(struct students *h, int count)
{

int i;
for (i = 0; i < count; i++)
{
    /* Print the number and the names */
    /* +1 to the index, because it starts from zero and we want to print it nicely to the user and start from 1 */

    printf("%2d) %s     %s      %s  %s\n", i + 1, h[i].name, h[i].last, h[i].g, h[i].s);
    }
}

int save (struct students *h, FILE *oput, char name){

            printf("Enter file name: " );
            scanf("%s", name); 
        fwrite(h.f_name, h.last, h.s,h.g ,sizeof(struct students),1,oput);

}

int main(void)
{
    struct students h[MAX_STRUCTS];
    FILE *oput
    char choice;
    int count = 0;  /* Initialize to zero, in case user chooses `print` first */
    char filename[100];

    int coun1t;  /* The current number of entries in the array */
    int remove; /* The entry to remove (index into array, so zero based) */

    /* Move the still valid entries one step "down" in the array */
    char line[MAX_STRUCTS * 4]; 
    char name;
    do
     {
    printf("choose L for load , P for print or S for save: \n");

    /* Read input from user, as a character, while skipping leading and trailing whitespace */
    scanf("%c", &choice);

    switch (choice)
    {
    case 'l':
        printf("file name? : ");
        scanf("%s", &filename);
        count = load(filename, h, MAX_STRUCTS);

        if (count == 0)
            printf("No structures loaded\n");
        else (
        printf("Data loaded\n")
        );
        break;
    case 'p':
        print(h, count);
        break;
    case 's':
        count = save(h, name, oput);
        break;
    case 'q': 
        break;
    default:
        break;
    }
} while ((choice) != 'q');

return 0;
    } 
```

在我的文本文件中：

```
 1)Joe Fanskol     10,4     100

       2)Marina Jake     15.5     99 
```

我无法运行程序，出现错误，**`int save`** 我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:28:08.073

好的，我将对此进行尝试。我会这样写：

```
int save (struct students *h, int num_students){
    char name[1024];
    printf("Enter file name: " );
    scanf("%s", name); // Read in filename
    FILE *output = fopen(name, "w"); // open the file to write
    if (!output) {
        return -1; // error
    }
    for (int i = 0; i < num_students; ++i) {
        // write a line - see fprintf documentation
        fprintf(output, "%s %s %s %s\n", h[i].f_name, h[i].last, h[i].s,h[i].g);
        // I'm missing some error checks here - you should not
    }
    fclose(output); // close
    return 0;
} 
```

然后你通过传入你的学生数组和数组中的学生人数来调用它。我希望这至少对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:29:30.697

```
 scanf("%s", name); 
```

您将字符串输入到`char name`. `name`如果您传递打开的输出文件，则不需要这个。或者，如果您需要在此处打开文件，则需要`name`作为字符缓冲区传递，例如`char name[MAX_FILE_NAME_LEN];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T07:42:20.473

我认为该脚本缺少一些＆符号'&'

```
scanf("%s", name); >> scanf("%s", &name); ? 
```

# c# - 在 Windows Phone 中使用 SVG 文件，如 PNG 文件

> ID：15191536
> 
> 赞同：1
> 
> 时间：2013-03-03T22:12:54.773
> 
> 标签：c#, windows-phone-7, svg, windows-phone-8

我已经用谷歌搜索了一些答案，但它没有想出任何对我有用的东西。是否可以在 Windows Phone 8 的图像控件中使用 svg 文件，如 png（jpeg 或任何其他光栅图形格式）？结果类似于以下（不工作）代码：

```
<Image Margin="0,0,0,-19" Source="/Assets/SVG/image.svg" 
Stretch="Fill" HorizontalAlignment="Center"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T23:30:14.513

我不认为 SVG 在 Windows Phone 中是原生支持的（也许在 IE10 移动设备中除外）。但是，您可以使用[Inkscape](http://inkscape.org/)等工具轻松地将 SVG 图像转换为 XAML 。

# javascript - CSS & JS 库不服务于浏览器

> ID：15191537
> 
> 赞同：0
> 
> 时间：2013-03-03T22:13:00.133
> 
> 标签：javascript, css, apache, browser-cache

`css`我知道浏览器会发送一个 if-modified-since 标头（带有时间戳） ，以保持文件的更新缓存`js`。

因此，当加载特定页面时，我第一次遇到了加载一些随机 css 和 js 文件的问题。

我正在使用 jQuery 的`html()`API 加载一个特定页面。简而言之，我只是用（jquery 无法处理的东西）替换了我当前的一个不错`index.html`的`snippet.html` 部分

问题是我包括了一些`js`和`css`文件`snippet.html`

看着我的浏览器加载文件，看着我的 apache 请求日志，我清楚地看到里面有这些文件的命中和未命中请求`snippet.html`

片段.html

```
<script type="text/javascript" src="/js/scripts/lib1.js"></script>
<script type="text/javascript" src="/js/scripts/lib2.js"></script>
<link type="text/css" rel="stylesheet" href="/styles/libs.css"/>
<table>
  <tr>
    <td>Whatever I do here</td>
  </tr>
</table> 
```

索引.html

```
<html>
<head>......</head>

  <div id="loadshippets"> <!-- later, load snippet.html into here --></div>

</html> 
```

如果我硬刷新我的浏览器，库加载得很好而且很花哨。但是，如果我清除缓存并尝试加载`snippet.html`到`<div id="loadshippets">`我遇到同样的问题。

我所能推断的是，`html()`API 对浏览器有限制。

我总是可以在里面加载这些库`index.html`，但我希望先了解这个结果。（我稍后可能会加载随机库，并且不希望它们成为通用包的一部分）

任何人都知道为什么我的`lib1.js`, `lib2.js`, 和`libs.css`会被浏览器忽略吗？（在 Chrome 和 FF 中测试）

如果有帮助，我注意到在 FF 的错误控制台中出现了这条消息： `can't load xregexp twice in the same frame`

# gtk - 列出 gtkwidgets 的正确方法是什么

> ID：15191538
> 
> 赞同：0
> 
> 时间：2013-03-03T22:13:02.147
> 
> 标签：gtk

我在制作自定义 GtkWidgets 列表时遇到了一些困难。

我的自定义小部件包含一个 GtkImage 和一个 GtkLabel。

为了制作小部件列表，我使用了一个打包在 GtkScrolledWindow 中的 gtkbox，我的 GtkBox（一个垂直框）用于打包我所有的自定义小部件，但我得到的并不好。滚动时，整个表面被重绘，并且出现一些闪烁，这是不好的。

所以我想知道它是否存在以一种好的方式完成这项工作的另一种方式。使用 Qt 是可能的，所以我希望在 Gtk 中也是可能的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:25:27.727

从滚动的 GtkVBox 中创建一个列表是一种相当常见的方法。您可以创建一个自定义 GtkVBox 子类，仅显示屏幕上的小部件，隐藏其余小部件。

您可能想检查[EggListBox](http://git.gnome.org/browse/egg-list-box/tree/)小部件是否满足您的需求（显然是许可允许的）。它是一个可以处理滚动的 GtkContainer，您只需要添加小部件`gtk_container_add`

# jenkins - Jenkins - 如何在不重新运行作业的情况下运行构建后操作？

> ID：15191539
> 
> 赞同：6
> 
> 时间：2013-03-03T22:13:07.020
> 
> 标签：jenkins, continuous-integration

我有一个漫长的 Jenkins 工作，但构建后操作失败。

如何在不重新运行整个作业的情况下重复运行构建后操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T19:28:25.147

如果不能将作业分成 2 个作业，您可以考虑
[https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)
（我相信这是预装的 Jenkins）。这将使“促销”步骤成为一个单独且可重复的过程。您可以将其配置为在构建后自动运行，然后在需要时按需手动运行。

如果您的后期构建步骤需要访问构建工件，您将需要使用[https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)将构建工件复制到促销工作区。

另一种解决方案是根据参数**跳过构建步骤。**有一个名为*SkipBuild的***选择**参数或其他东西。将可能的值设置为 TRUE/FALSE，默认为 FALSE

 *在您的**构建**步骤中，在实际构建之前，检查*SkipBuild*是否设置为 TRUE。如果为 TRUE，则退出 0，如果为 FALSE（默认），则运行 build 命令。

这样，自动构建执行将始终运行构建步骤。但您也可以手动运行构建并选择“SkipBuild=TRUE”以跳过构建步骤并直接进行构建后操作。如果您需要跳过一些构建后操作，则还需要在此处实现此*SkipBuild*参数。

但是要小心，因为构建的后续执行，即使使用“SkipBuild=TRUE”仍将执行 SVN 检出，因此您的工作区可能会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:17:57.863

根据您的构建步骤，您可能能够“跳过”它们。

例如，我的构建步骤是 powershell 和 windows 批处理文件。

如果我想跳过一个步骤，我只需将“exit 0”添加为 powershell 或批处理命令的第一行。

请注意，这仍会导致其他预构建步骤，例如运行工作区清理和 scm 签出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T22:34:17.963

根据动作是什么，一个粗略的选择可能只是将其拆分为一个独立的作业，由原始作业触发。这样，您就可以自由地手动重新运行它。

要在两个作业之间共享工件或工作区，我会想到以下插件：

*   [*复制工件插件*](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)
*   [*克隆工作区 SCM 插件*](https://wiki.jenkins-ci.org/display/JENKINS/Clone+Workspace+SCM+Plugin)*

# c++ - 使用 Boost Fusion 显示扁平化的 Phoenix 表达式

> ID：15191540
> 
> 赞同：1
> 
> 时间：2013-03-03T22:13:11.927
> 
> 标签：c++, boost, boost-fusion, boost-phoenix, boost-proto

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T04:52:37.170

没有 ostream 插入器`phoenix::arg_names::_1`。不过，我们可以轻松地添加一个。这用 clang++ (trunk) 为我编译：

```
#include <iostream>
#include <boost/phoenix.hpp>

namespace proto   = boost::proto;
namespace fusion  = boost::fusion;
namespace phoenix = boost::phoenix;

struct display
{
  template<typename T>
  void operator()(T const &t) const
  {
    std::cout << t << std::endl;
  }
};

namespace boost { namespace phoenix
{
  template<int N>
  std::ostream& operator<<(std::ostream& sout, argument<N> const& arg)
  {
    return sout << "_" << N;
  }
}}

int main()
{
  fusion::for_each(
    fusion::transform(
      proto::flatten(phoenix::arg_names::_1 + 2 + 3 + 4)
    , proto::functional::value()
    )
  , display()
  );
} 
```

# core-data - NSPersistentStoreDidImportUbiquitousContentChangesNotification 未在任一 iOS 设备上触发

> ID：15191546
> 
> 赞同：2
> 
> 时间：2013-03-03T22:13:49.200
> 
> 标签：core-data, icloud, nspersistentstore

我已经使用 SQLite 日志设置了核心数据以与 iCloud 一起使用，我同时打开了核心数据和 SQLite 日志并在我的架构中达到了 3 级，这些都不会在从本地存储或云中获取或放置数据时产生错误店铺。

我的本地存储存储所有 SQLite 数据，而云存储配置为仅移动 2 个实体，因为所有本地存储都不需要更新。

记录持久存储时，它们都会出现。

在 developer.icloud.com 上，该文件夹用于存储数据，有两个子文件夹（一个用于 iPad，另一个用于 iPhone）。每个文件夹中都有两个子文件夹和一个`receipt.0.cdt`文件。

即使一切似乎都已设置，但当我在我的应用程序中操作两个实体之一时，`NSPersistentStoreDidImportUbiquitousContentChangesNotification`永远不会触发（在任一设备上）。

即使本地数据存储（保存所有实体的本地副本）已更新，并且此更改也会反映在 UI 中。

这是被操纵的商店（在操纵发生时记录）

```
2013-03-03 22:02:49.826 Clueless[1168:907] MOC P-Stores: (
        "<NSSQLCore: 0x1d5b1180> (URL: file://localhost/private/var/mobile/Library/Mobile%20Documents/<id~com~company~appname>/Data.nosync/CategoryModel.sqlite)",
        "<NSSQLCore: 0x1d5ca280> (URL: file://localhost/var/mobile/Applications/EEBE0D5E-1AC0-4A11-AA4B-FB9A63A7F95A/Documents/CategoryModel.sqlite)"
    ) 
```

下面是我操作实体后产生的数据的日志：

```
2013-03-03 22:02:49.836 Clueless[1168:907] CoreData: sql: BEGIN EXCLUSIVE
2013-03-03 22:02:49.839 Clueless[1168:907] CoreData: sql: UPDATE ZIMAGEANSWERAVAILABILITY SET Z_OPT = ?  WHERE Z_PK = ? AND Z_OPT = ?
2013-03-03 22:02:49.842 Clueless[1168:907] CoreData: details: SQLite bind[0] = (int64)2
2013-03-03 22:02:49.844 Clueless[1168:907] CoreData: details: SQLite bind[1] = (int64)18
2013-03-03 22:02:49.845 Clueless[1168:907] CoreData: details: SQLite bind[2] = (int64)1
2013-03-03 22:02:49.851 Clueless[1168:907] CoreData: sql: UPDATE ZIMAGEANSWERAVAILABILITY SET Z_OPT = ?  WHERE Z_PK = ? AND Z_OPT = ?
2013-03-03 22:02:49.861 Clueless[1168:907] CoreData: details: SQLite bind[0] = (int64)2
2013-03-03 22:02:49.863 Clueless[1168:907] CoreData: details: SQLite bind[1] = (int64)13
2013-03-03 22:02:49.865 Clueless[1168:907] CoreData: details: SQLite bind[2] = (int64)1
2013-03-03 22:02:49.866 Clueless[1168:907] CoreData: sql: UPDATE ZSYMBOL SET ZANSWERSTATE = ?, Z_OPT = ?  WHERE Z_PK = ? AND Z_OPT = ?
2013-03-03 22:02:49.868 Clueless[1168:907] CoreData: details: SQLite bind[0] = 2
2013-03-03 22:02:49.870 Clueless[1168:907] CoreData: details: SQLite bind[1] = (int64)2
2013-03-03 22:02:49.875 Clueless[1168:907] CoreData: details: SQLite bind[2] = (int64)8
2013-03-03 22:02:49.878 Clueless[1168:907] CoreData: details: SQLite bind[3] = (int64)1
2013-03-03 22:02:49.880 Clueless[1168:907] CoreData: sql: COMMIT
2013-03-03 22:02:49.909 Clueless[1168:907] CoreData: sql: pragma page_count
2013-03-03 22:02:49.911 Clueless[1168:907] CoreData: annotation: sql execution time: 0.0026s
2013-03-03 22:02:49.913 Clueless[1168:907] CoreData: sql: pragma freelist_count
2013-03-03 22:02:49.915 Clueless[1168:907] CoreData: annotation: sql execution time: 0.0021s 
```

这真的让我感到困惑，因为在加载或向数据存储中添加数据时不会产生错误，所以理论上它应该可以工作。

非常感谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-07T09:01:32.650

对于仍在试图弄清楚为什么他们没有收到此通知的人：将通知的名称提供为常量而不是字符串（Swift 中的代码）。

不要这样做：

```
"NSPersistentStoreDidImportUbiquitousContentChangesNotification" 
```

相反，请执行以下操作：

```
NSPersistentStoreDidImportUbiquitousContentChangesNotification 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T14:41:58.717

在我看来，您的数据库存储是为 iCloud 创建的，但没有放入任何内容。

收据.0.cdt 文件出现在通过 iCloud 使用该应用程序的每台设备的事务日志文件夹中，但仅在最初出现（在商店创建时，或从另一台设备连接到现有商店时）。实际包含数据的事务日志命名更像：

```
FFFE99DC-87D7-5CBE-BFD8-32E11-D3E934.1.cdt 
```

并且大小与该事务中插入/更新/删除等记录的数量成正比。这些事务日志出现在与生成这些事务的设备相关的 iCloud 设备文件夹中。

已为该应用程序连接到 iCloud，但未执行任何自己的交易的设备将只包含收据.0.cdt 文件。

如果你解压缩receipt.0.cdt，你最终会得到一个文本文件——所有这些似乎都包含对生成这些事务日志的设备的引用（尽管最初是空的）。

```
mobile.DEVICE_ID:NUMBER_OF_TRANSACTIONS 
```

然后这表明：

```
mobile.DEVICE_TWO:2:mobile.DEVICE_ONE:4 
```

因此receipt.0.cdt 只是针对连接到iCloud 中该商店的每台设备记录的交易数量的内务参考。

集中精力确保您实际上将数据放入您的**iCloud**存储（使用正确的上下文，不会与本地存储上下文等混淆），然后实际保存它。

如果这些都不起作用，请尝试吹走整个 iCloud 容器并重新开始，以防万一您的 ubiquity 存储中出现问题（对几乎每个 Core Data iCloud 难题的标准响应！）。

# testing - 是否有可以测试 OAuth 1.0a 签名的测试站点？

> ID：15191548
> 
> 赞同：1
> 
> 时间：2013-03-03T22:13:59.130
> 
> 标签：testing, oauth

理想情况下，它将是一个站点，它为您提供密钥、令牌和秘密，然后根据您发送的信息告诉您它对您的签名的期望。我正在尝试为特定情况构建一个带有一些可测试控件的 OAuth 库，但我不知道它是否像它应该做的那样......也许像 jsfiddle 一样，但是对于 OAuth？有这样的东西存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T08:26:43.870

[您可以在http://developer.linkedin.com/oauth-test-console](http://developer.linkedin.com/oauth-test-console)尝试 LinkedIn OAuth 测试控制台。

# java - 将 XML 中的项目复制到 for 循环中

> ID：15191549
> 
> 赞同：0
> 
> 时间：2013-03-03T22:13:59.527
> 
> 标签：java, android, xml, android-layout

我的 XML 文件中有诸如按钮和 scrollview 、 tablelayout .. 等服务项，具有自定义高度和宽度以及 Y 、 X 。

我想在 for 循环中复制这个项目，以使在每个 for 循环阶段自动创建这些项目，而无需再次编辑 xml。

它应该首先将此 XML 项转换为编程代码吗？如何 ？

代码 XML：

```
 <ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="394dp"
    android:layout_height="389dp"
    android:layout_x="-12dp"
    android:layout_y="106dp" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/back1" >

        <TableRow
            android:id="@+id/TableRow18"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/back1" >

            <CheckBox
                android:id="@+id/CheckBox18"
                android:layout_width="20dp"
                android:layout_height="20dp"
                android:layout_marginLeft="20dp"
                android:layout_marginTop="4dp"
                android:button="@drawable/test"  />

            <TextView
                android:id="@+id/TextView34"
                android:layout_width="220dp"
                android:layout_height="22dp"
                android:layout_marginLeft="23dp"
                android:text="hesham abdulhamid elnemr" />

            <TextView
                android:id="@+id/TextView35"
                android:layout_width="110dp"
                android:layout_height="22dp"
                android:layout_marginLeft="0dp"
        android:text="095110263" />

        </TableRow>
    </TableLayout>

</ScrollView> 
```

# android - Android 以编程方式创建一个简单的菜单

> ID：15191550
> 
> 赞同：59
> 
> 时间：2013-03-03T22:14:16.387
> 
> 标签：android, menu

我正在尝试使用一个按钮创建一个简单的菜单，该按钮将调用一种方法来清除数组。我不想使用 xml，因为我只需要一个按钮。

像这样的东西-

```
public boolean onCreateOptionsMenu(Menu menu) {
    button "Clear Array";
    onClick{// run method that wipes array};
    return true;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-03T22:23:32.260

A--C 的方法有效，但您应该避免手动设置点击侦听器。特别是当您有多个菜单项时。

我更喜欢这种方式：

```
private static final int MENU_ITEM_ITEM1 = 1;
...
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(Menu.NONE, MENU_ITEM_ITEM1, Menu.NONE, "Item name");
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case MENU_ITEM_ITEM1:
        clearArray();
        return true;

    default:
        return false;
  }
} 
```

通过使用这种方法，您可以避免创建不必要的对象（侦听器），而且我还发现此代码更易于阅读和理解。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-03T22:18:24.527

像这样的东西可能会起作用：

```
public boolean onCreateOptionsMenu(Menu menu) {
  MenuItem item = menu.add ("Clear Array");
  item.setOnMenuItemClickListener (new OnMenuItemClickListener(){
    @Override
    public boolean onMenuItemClick (MenuItem item){
      clearArray();
      return true;
    }
  });
  return true;
} 
```

`Menu`为我们提供了一个方便的方法，[`add()`](http://developer.android.com/reference/android/view/Menu.html#add%28java.lang.CharSequence%29)它允许您添加一个 MenuItem。所以我们做一个。[`OnMenuItemClickListener`](http://developer.android.com/reference/android/view/MenuItem.html#setOnMenuItemClickListener%28android.view.MenuItem.OnMenuItemClickListener%29)然后我们为 the分配一个`MenuItem`并覆盖它[`onMenuItemClick()`](http://developer.android.com/reference/android/view/MenuItem.OnMenuItemClickListener.html#onMenuItemClick%28android.view.MenuItem%29)来做我们想要它做的事情。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2015-06-13T07:17:15.073

以编程方式，我能够使用以下代码创建一个简单的菜单。

```
private final int MenuItem_EditId = 1, MenuItem_DeleteId = 0;

@Override
  public boolean onCreateOptionsMenu(Menu menu){

    MenuItem edit_item = menu.add(0, MenuItem_EditId, 0, R.string.edit);
    edit_item.setIcon(R.drawable.edit);
    edit_item.setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    MenuItem delete_item = menu.add(0, MenuItem_DeleteId, 1, R.string.edit);
    delete_item.setIcon(R.drawable.delete);
    delete_item.setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-11-09T04:53:31.373

在这里，我使用点击监听器动态实现了弹出菜单。

```
 Dynamic_PopUpMenu.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            PopupMenu menu = new PopupMenu(DialogCheckBox.this, v);
            menu.getMenu().add("AGIL");  // menus items
            menu.getMenu().add("Dash");  // menus items
            menu.getMenu().add("AGILarasan");
            menu.getMenu().add("Arasan");
            menu.show();
        }
    }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-20T23:11:09.670

如果您正在寻找带有回调的生成弹出项目，请使用此。

**爪哇**

```
public static void popupMenu(final Context context, View anchor, final LinkedHashMap<String,IPopupMenu> options){
        PopupMenu popupMenu = new PopupMenu(context, anchor);
        for(String key : options.keySet()){
            popupMenu.getMenu().add(key);
        }
        popupMenu.getMenuInflater().inflate(R.menu.popup_menu,popupMenu.getMenu());
        popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() {
            @Override
            public boolean onMenuItemClick(MenuItem menuItem) {

                options.get(menuItem.getTitle()).onClick();
                return true;
            }
        });

        popupMenu.show();
    }

public interface IPopupMenu{
        void onClick();
    } 
```

**XML**

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">

</menu> 
```

**例子**

```
LinkedHashMap<String,IPopupMenu> menu_items = new LinkedHashMap<>();
menu_items.put("Item Name", new Utils.IPopupMenu() {
         @Override
         public void onClick() {
            //do your code
         }
});
menu_items.put("Clear Array", new Utils.IPopupMenu() {
         @Override
         public void onClick() {
            //clear array
         }
});

popupMenu(context,button,menu_items); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-09T18:11:16.277

在 Kotlin 中，您可以像这样动态添加菜单项：

```
class MyFragment : MyBasicFragment() {
    companion object {
        const val MENU_ITEM_ID_UPDATE = 0
    }

    override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {
        // consider you have called 'inflater.inflate(R.menu.app_bar_menu, menu)' in the MyBasicFragment
        super.onCreateOptionsMenu(menu, inflater)

        menu.add(0, MENU_ITEM_ID_UPDATE, 0, R.string.menu_item_update).apply {
            setIcon(R.drawable.ic_baseline_refresh_24)
            setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM)
        }
    }
} 
```

# python - XML-RPC python 客户端引发 xml.parsers.expat.ExpatError 异常

> ID：15191551
> 
> 赞同：1
> 
> 时间：2013-03-03T22:14:17.933
> 
> 标签：python, xml, xml-rpc, rpc, xmlrpclib

我正在尝试使用 xmlrpclib python 的库来执行 XMP-RPC，但我得到了

```
xml.parsers.expat.ExpatError: XML or text declaration not at start of entity: line 1, column 1 
```

这是带有参数的字典：

```
{'cliente_chave': 'hUi238sh328sjk37Hms8Kisjeg9',
     'cliente_codigo': 164,
     'imovel_bairro': u'Renascen\xe7a',
     'imovel_banheiros': u'5',
     'imovel_cidade': u'S\xe3o Lu\xeds - MA',
     'imovel_codigo_imobiliaria': u'757',
     'imovel_descricao': u'\n\t\t\t\n\t\t\tCasa em otima localiza\xe7\xe3o ideal tanto para empresas quanto para moradia tendo:\r\nTerra\xe7o\r\nSala Ampla para 03 ambientes\r\nLavabo\r\nHall\r\n03 su\xedtes\r\nEscritorio\r\nCozinha\r\nQuintaL\r\n\xc1rea de Servi\xe7o\r\nDCE\r\nGaragem coberta para 02 carros\r\nPort\xe3o eletronico\r\nCisterna\r\nNascente',
     'imovel_estado': 'MA',
     'imovel_negociacao': 'venda',
     'imovel_novo': False,
     'imovel_quartos': u'3',
     'imovel_subtipo': u'padr\xe3o',
     'imovel_suites': u'3',
     'imovel_tipo': u'casa',
     'imovel_vagas': u'2',
     'imovel_valor': u' 480.000,00',
     'url': 'http://www.estiloma.com.br/imoveis/para-venda/em-sao-luis/no-bairro-renascenca/casa-padrao/id-774.html'} 
```

这是异常的回溯：

```
Traceback (most recent call last):
      File "/Library/Python/2.7/site-packages/Twisted-12.2.0-py2.7-macosx-10.8-intel.egg/twisted/internet/defer.py", line 551, in _runCallbacks
        current.result = callback(current.result, *args, **kw)
      File "/Users/bslima/Documents/Aptana Studio 3 Workspace/aqueleimovel/aqueleimovel/pipelines.py", line 31, in process_item
        result = server.salvar_imovel(dict(item))
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1224, in __call__
        return self.__send(self.__name, args)
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1575, in __request
        verbose=self.__verbose
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1264, in request
        return self.single_request(host, handler, request_body, verbose)
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1297, in single_request
        return self.parse_response(response)
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 1467, in parse_response
        p.feed(data)
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xmlrpclib.py", line 557, in feed
        self._parser.Parse(data, 0)
    xml.parsers.expat.ExpatError: XML or text declaration not at start of entity: line 1, column 1 
```

我只对字符串使用 UTF-8，如果没有运气，我会尝试编码或解码为 UTF-8。我也尝试用谷歌搜索，但没有成功。有人见过这个吗？

哦，这是客户端代码：

```
server = ServerProxy(uri=settings.RPC_SERVER, verbose=True)
server.salvar_imovel(item) 
```

我在这里先向您的帮助表示感谢。

正如我评论的那样，ExpatError 在响应对象中。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T02:24:43.457

[已解决] 响应在开头发送了空格。我不得不从 xmlrpc 扩展 Transport 类并简单地剥离响应。

```
from xmlrpc.client import SafeTransport, Transport
from xmlrpc.client import GzipDecodedResponse

is_https = False
if is_https:
    BaseTransport = SafeTransport
else:
    BaseTransport = Transport

class CustomTransport(BaseTransport):
    def parse_response(self, response):
        # read response data from httpresponse, and parse it

        # Check for new http response object, else it is a file object
        if hasattr(response,'getheader'):
            if response.getheader("Content-Encoding", "") == "gzip":
                stream = GzipDecodedResponse(response)
            else:
                stream = response
        else:
            stream = response

        p, u = self.getparser()

        while 1:
            data = stream.read(1024)
            data = data.strip()
            if not data:
                break
            if self.verbose:
                print "body:", repr(data)
            p.feed(data)

        if stream is not response:
            stream.close()
        p.close()

        return u.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:45:59.567

您似乎将对象传递`dict`给期望的对象`XML`-这条线

```
server.salvar_imovel(dict(item)) 
```

如果你*真的*必须传入`dict`，你可以尝试序列化第`dict`一个。[这里](http://code.activestate.com/recipes/415983/)有一些示例代码。

# ubuntu - cv.h 没有这样的文件或目录但是有这样的文件

> ID：15191552
> 
> 赞同：0
> 
> 时间：2013-03-03T22:14:48.453
> 
> 标签：ubuntu, opencv

我尝试通过在我的代码块中使用 Kinect 和 openCV 库来运行 c++ 程序。其他一切似乎都很好，因为我总是收到一个错误说：

> /home/maoyi/Documents/practice/practice2.cpp:10:16：致命错误：cv.h：没有此类文件或目录编译终止。

谁能告诉我说没有这样的文件或目录到底是什么意思？因为我很确定那里有一个 practice2.cpp 文件，但我安装了 46% 的 OpenCV 库。我按照以下说明如何安装 OpenCV2.1.0 教程：

> [http://www.samontab.com/web/2010/04/installing-opencv-2-1-in-ubuntu/](http://www.samontab.com/web/2010/04/installing-opencv-2-1-in-ubuntu/)

我在“CMAKE”遇到了问题。一步，得到一些这样的提示：

> -- 检测到的 GNU GCC 版本：46 (406) -- 检查模块 'gstreamer-base-0.10' -- 未找到包 'gstreamer-base-0.10' -- 检查模块 'gstreamer-app-0.10' --未找到包“gstreamer-app-0.10”-检查模块“gstreamer-video-0.10”-未找到包“gstreamer-video-0.10”-检查模块“libdc1394-2”-包“libdc1394- 2' 未找到 -- 检查模块 'libdc1394' -- 未找到包 'libdc1394' -- 检查模块 'libv4l1' -- 未找到包 'libv4l1' -- 找不到 PythonLibs（缺少：PYTHON_INCLUDE_DIRS） Traceback（大多数最近通话最后）：文件“”，第 1 行，在 ImportError 中：没有名为 numpy.distutils 的模块 - 检测到 IPP：-- 解析'cvconfig.h.cmake'

而且我还尝试打开我的*突触包管理器*来手动安装所有这些缺失的模块，但是我什至找不到其中的一些。（例如gstream-app-0.10）......所以我不知道这是否会导致“没有这样的文件或目录”错误或其他东西。我对 OpenCV 很陌生，所以如果问题非常愚蠢，请不要感到惊讶。但无论如何我继续下一个“制作”步骤，并在下面得到了更多绝望的提示。安装在 46% 处停止，我被提到有很多错误......所以我希望有人可以看看它，也许可以用一些解决方案提示我。非常感谢！

> :Point&) const': /home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:387:5: 错误: 'ptrdiff_t' 未在此范围内声明/home/maoyihuang/Downloads/OpenCV -2.1.0/include/opencv/cxmat.hpp:387:5：注意：建议的替代方案：/usr/include/c++/4.6/i686-linux-gnu/./bits/c++config.h:156： 28：注意：'std::ptrdiff_t'/usr/include/c++/4.6/i686-linux-gnu/./bits/c++config.h:156:28：注意：'std::ptrdiff_t'/home /maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:387:15：错误：预期';' 在'delta1'之前/home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:389:9：错误：'delta1'没有在这个范围内声明/home/maoyihuang/Downloads/OpenCV-2.1 .0/include/opencv/cxmat.hpp:398:31：错误：'delta2'未在此范围内声明/home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp：在成员函数'cv::Point cv::MatConstIterator_<_Tp>::pos() const': /home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:3459:9: 错误： 'ptrdiff_t' 未在此范围内声明/home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:3459:9：注意：建议的替代方案：/usr/include/c++/4.6/i686- linux-gnu/./bits/c++config.h:156:28: 注意：'std::ptrdiff_t' /usr/include/c++/4.6/i686-linux-gnu/./bits/c++config .h:156:28：注意：'std::ptrdiff_t'/home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:3459:19：错误：预期';' 在'ofs'之前/home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:3460:23：错误：'ofs'没有在这个范围内声明/home/maoyihuang/Downloads/OpenCV-2.1 .0/include/opencv/cxmat.hpp:3460:66: 错误：'y'之前的预期'）' /home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:3465:9：错误：'ptrdiff_t'未在此范围内声明/home/maoyihuang/Downloads /OpenCV-2.1.0/include/opencv/cxmat.hpp:3465:9：注意：建议的替代方案：/usr/include/c++/4.6/i686-linux-gnu/./bits/c++config.h： 156:28：注意：'std::ptrdiff_t'/usr/include/c++/4.6/i686-linux-gnu/./bits/c++config.h:156:28：注意：'std::ptrdiff_t' /home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:3465:19：错误：预期';' 在'ofs' /home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:3466:23 之前：错误：在此范围内未声明'ofs' make [2]：建议的替代方案：/usr/include/c++/4.6/i686-linux-gnu/./bits/c++config.h:156:28：注意：'std::ptrdiff_t'/usr/include/c++/4.6/ i686-linux-gnu/./bits/c++config.h:156:28: 注意: 'std::ptrdiff_t' /home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp: 3465:19: 错误: 预期 ';' 在'ofs' /home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:3466:23 之前：错误：在此范围内未声明'ofs' make [2]：建议的替代方案：/usr/include/c++/4.6/i686-linux-gnu/./bits/c++config.h:156:28：注意：'std::ptrdiff_t'/usr/include/c++/4.6/ i686-linux-gnu/./bits/c++config.h:156:28: 注意: 'std::ptrdiff_t' /home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp: 3465:19: 错误: 预期 ';' 在'ofs' /home/maoyihuang/Downloads/OpenCV-2.1.0/include/opencv/cxmat.hpp:3466:23 之前：错误：在此范围内未声明'ofs' make [2]：*** [src/cxcore/CMakeFiles/cxcore_pch_dephelp.dir/cxcore_pch_dephelp.o] 错误 1 ​​make[1]: *** [src/cxcore/CMakeFiles/cxcore_pch_dephelp.dir/all] 错误 2 make: *** [all] 错误 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:12:44.383

为你做的第一件事是使用 ccmake（包 cmake-curses-gui）。它使 cmake 的使用更容易。其次，只要 cmake 报告错误，您甚至不应该尝试编译。尝试使用带有 gui 的包管理器来安装缺少的库。仅使用库名称进行搜索，因为版本可能会有所不同。大多数库都列在 opencv 网页的部分中，用于从 linux 上的源代码安装。还有简单的方法。使用包管理器从存储库安装 opencv。

# iphone - 设置动画曲线

> ID：15191553
> 
> 赞同：1
> 
> 时间：2013-03-03T22:15:02.070
> 
> 标签：iphone, objective-c, ipad

我正在动态滚动滚动视图，它使用

```
 -(IBAction) animateTestingTwo{

    [UIView  animateWithDuration:4 animations:^{scroller.contentOffset = CGPointMake(0, 2000);}];

} 
```

但是动画曲线不是线性的，它必须是这样的，所以我正在使用这个：

```
-(IBAction) animateTestingTwo{

    [UIView  animateWithDuration:4 options:UIViewAnimationOptionCurveLinear animations:^{scroller.contentOffset = CGPointMake(0, 2000);}];

} 
```

但是它不起作用。有任何想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:40:48.057

如果持续时间对您来说不重要，可以使用：

```
[scrollview setContentOffset:CGPointMake(10, 200) animated:YES]; 
```

根据[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/doc/uid/TP40006922)：

> **动画** YES 以恒定速度动画过渡到新的偏移量，NO 使过渡立即进行。

您也可以尝试在动画块中执行此操作，看看会发生什么。

# ios - IPAD 与 Iphone TableView 行

> ID：15191554
> 
> 赞同：0
> 
> 时间：2013-03-03T22:15:06.283
> 
> 标签：ios, objective-c, tableview

我创建了一个通用主详细信息应用程序。我在 iPad 和 iPhone 上使用了 Storyboard。我实际上是在发出一个 HTTP 请求来检索将在主表视图中显示的所需数据。我从 requestFinished 方法重新加载 tableview 数据。

```
- (void)requestFinished:(ASIHTTPRequest *)request {

NSString *responseString = [request responseString];

ConversationDataController *dataControllerSingleton = [ConversationDataController sharedInstance];

conversationList = [responseString JSONValue];

[dataControllerSingleton setConversationList:conversationList];

[self.tableView reloadData];
} 
```

我将返回的数据存储在 dataControllerSingleton 中，它有一个名为 conversationList 的 NSMutableArray 属性。

在 numberOfRowsInSection 中，我根据 fetchedResultsController 打印出该部分中的对象数。我还打印出我的 NSMutableArray 对话列表中的值的数量。在 numberOfSectionsInTableView 我打印出部分的数量。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];
NSLog(@"Number OF Objects in section %lu",(unsigned long)[sectionInfo numberOfObjects]);
ConversationDataController *dataControllerSingleton = [ConversationDataController sharedInstance];

NSLog(@"ConversationList count %lu",(unsigned long)[dataControllerSingleton.conversationList count]);

return [sectionInfo numberOfObjects];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
 {
NSLog(@"Number of sections: %d",[[self.fetchedResultsController sections] count]);
return [[self.fetchedResultsController sections] count];
} 
```

所以，当我使用 NSLog 查看我有多少部分和行时，我得到了第 2 部分中的对象数 ConversationList count 46
Number of Sections 1

在我的 cellForRowAtIndexPath 中，我从 NSMutableArray 添加单元格文本

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tableView
                         dequeueReusableCellWithIdentifier:@"ConversationCell"];
[self configureCell:cell atIndexPath:indexPath];

ConversationDataController *dataControllerSingleton = [ConversationDataController sharedInstance];
cell.textLabel.text = [dataControllerSingleton.conversationList objectAtIndex:indexPath.row];

return cell;
} 
```

因此，通过此设置，我在 iPhone 和 iPad 的主视图中看到了两个值。当我在主视图中选择其中一个值时，我会进入详细视图（现在它只是空的）。这对于显示的两行没有任何错误。

如果我更改 numberOfRowsInSection 以返回 NSMutableArray 中的值数，则返回 [self.conversationList count]; 我遇到错误。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController sections][section];
NSLog(@"Number OF Objects in section %lu",(unsigned long)[sectionInfo numberOfObjects]);
ConversationDataController *dataControllerSingleton = [ConversationDataController sharedInstance];

NSLog(@"ConversationList count %lu",(unsigned long)[dataControllerSingleton.conversationList count]);

//return [sectionInfo numberOfObjects];
return [self.conversationList count];
} 
```

在 iPhone 模拟器上，我在主视图中看到了 46 个值。我可以选择其中任何一个，然后我会看到（空的）详细视图。在 iPad 模拟器上，如果我选择前两个单元格中的一个，我会按预期显示（空）详细视图。但是，当我选择前两个以外的任何值时，会出现以下错误；

```
Terminating app due to uncaught exception 'NSRangeException', reason: '*** -     [_PFBatchFaultingArray objectAtIndex:]: index (2) beyond bounds (2)'
*** First throw call stack:
(0x19a5012 0x17cae7e 0x19a4deb 0x156941a 0x15e9511 0x42fe9 0x4ae285 0x4ae4ed 0xeb85b3   0x1964376 0x1963e06 0x194ba82 0x194af44 0x194ae1b 0x249b7e3 0x249b668 0x3feffc 0x40e0d 0x2ac5)
libc++abi.dylib: terminate called throwing an exception 
```

任何帮助将不胜感激。提前致谢。蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T02:33:42.473

如果您使用多个部分（看起来像您），那么委托方法

```
tableView:(UITableView *)tableView cellForRowAtIndexPath: 
```

真的应该处理这个。

您似乎还混合使用 NSFetchedResultsController 来计算节数和行数，然后使用属性 self.conversionList 来返回行数。但是对于哪个部分。如果您想使用核心数据，那么不要使用带有数组的单例，而是将 Web 服务器中的数据缓存到核心数据表中，然后在您的

```
- (NSFetchedResultsController *)fetchedResultsController 
```

方法。

你也在混合使用 self.conversionList &

```
ConversationDataController *dataControllerSingleton = [ConversationDataController sharedInstance];
dataControllerSingleton.conversationList 
```

他们都一样吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T04:42:03.420

请将 libz.dylib 添加到您的项目中。它可以添加到构建阶段选项卡中。那里有二进制库部分的链接。单击“+”符号并将 libz.dylib 添加到您的项目中

# database - 究竟什么是数据库模式？

> ID：15191555
> 
> 赞同：-1
> 
> 时间：2013-03-03T22:15:19.217
> 
> 标签：database, entity-framework, database-schema

我希望我不会让自己完全荒谬，但我不得不承认这个定义`database schema`对我来说并不是 100% 清楚。

我*认为*这将是我数据库中表的某种蓝图。就实体框架而言，我`DbContext`将是我的“数据库模式”。

我开始意识到我看错了[这篇](http://msdn.microsoft.com/en-us/library/aa479086.aspx)文章（在[这个](https://stackoverflow.com/questions/15179407/ef-database-design-issues-regarding-cross-database-relations#comment21403824_15179407)问题中建议），其中多租户可以通过**Shared Database, Separate Schemas**来实现。

有人可以详细说明吗？

PS：我读[了这个](https://stackoverflow.com/questions/298739/what-is-the-difference-between-a-schema-and-a-table-and-a-database)问题，但这并没有真正回答我有点n00bish的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:49:11.953

一般理解与您引用的问题中的解释相同

> 架构：数据库：表：：平面图：房屋：房间

这是一个模式是你数据库的蓝图，从这个意义上说，你 DBContext + 迁移可以松散地被认为是一个数据库模式。

然而，在数据库中还有第二种方式使用模式一词，即作为数据库中的分区集（租户）。这通常用于安全性。

所有表都在特定模式（例如 DBO）中定义，当您查询时，您实际上是在查询特定模式中的表，因此

```
SELECT * FROM [database].[schema].[table] 
```

要回答您的问题，有两种含义，一种是该词的英语含义，另一种是实际的 SQL 含义（与租户有关）

![在此处输入图像描述](../Images/69876a823052efc9015bc6abd60393da.png)

# java - 如何使用枚举生成 switch 语句框架

> ID：15191556
> 
> 赞同：3
> 
> 时间：2013-03-03T22:15:20.993
> 
> 标签：java, enums, switch-statement, generator

`Day`如果在例如with `SunDay`,等中有一个枚举`MunDay`。是否有一种简单的方法来生成如下`switch`语句？手头有这么多。

```
switch(day) {

     case SunDay :
            break;

     case MunDay :
            break;

     // and so on
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T22:21:49.603

如果您使用的是 Eclipse IDE，您可以构造一个空开关，Eclipse 会为您提供一个名为“添加缺失的 case 语句”的选项来自动生成开关。见下图：

（在另一个窗口中打开图像以更好地查看它。）

![在此处输入图像描述](../Images/c641c28f0d1c2ee4830cd4e796612011.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:27:32.670

像这样的东西应该工作

```
public class DaySwitchGenerator {
    public static void main(String...args) {
        System.out.println("switch(day) {");

        for (Day e : Day.values() ) {
            System.out.println("    case " + e.name() + " :");
            System.out.println("        break;");
        }

        System.out.println("}");
    }
} 
```

# rdf - SPARQL DESCRIBE 查询

> ID：15191557
> 
> 赞同：14
> 
> 时间：2013-03-03T22:15:22.217
> 
> 标签：rdf, sparql

似乎我不了解 SPARQL DESCRIBE 查询。我需要检索与条件匹配的资源的完整图表。在我尝试过的一个 SPARQL 端点上（Norwegian Rådata Nå，[http](http://data.bibsys.no/data/query_authority.html) ://data.bibsys.no/data/query_authority.html ）这工作得很好：

```
PREFIX foaf: <http://xmlns.com/foaf/0.1/> 
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>

DESCRIBE ?person WHERE {
  ?person rdf:type foaf:Person .
  FILTER EXISTS { ?person owl:sameAs ?sameAs }
}
LIMIT 100 
```

我得到了具有`owl:sameAs`三元组的 Person 资源的结果。

在其他 SPARQL 端点上，Onki Light ( [http://sparql.onki.fi/sparql.tpl](http://sparql.onki.fi/sparql.tpl) ) 和 DBPedia ( [http://dbpedia.org/sparql](http://dbpedia.org/sparql) ) 也有类似的查询

```
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>

DESCRIBE ?x WHERE {
  ?x rdf:type skos:Concept .
  FILTER EXISTS { ?x skos:prefLabel ?prefLabel }
}
LIMIT 100 
```

返回很多既没有`rdf:Type = skos:Concept`也没有 a的资源`skos:prefLabel`，所以我显然没有正确地进行查询。应该如何陈述这种查询以产生我需要的结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T08:48:54.383

“*收到的资源*”没有`skos:prefLabel`或`skos:Concept`可能*与满足您要求的资源有关*。

SPARQL DESCRIBE 查询实际上并不返回与查询的图形模式匹配的资源，而是一个“描述”这些资源的 RDF 图。由 sparql 服务选择包含哪些三元组来描述资源。（见下面的标准）

W3C 关于 SPARQL 1.1的[建议建议](http://www.w3.org/TR/sparql11-query/#describe)说：

> DESCRIBE 表单返回单个结果 RDF 图，其中包含有关资源的 RDF 数据。[...]**描述由查询服务确定。**

因此，**您意外收到**的资源可能**描述了您真正想要的资源。**调查您的问题：检查您应该实际收到的三元组与您想要的资源的关系。一个好的方法是先`LIMIT 1`查看 DESCRIBE 查询的效果。

也许您需要一个 SELECT 查询？它仅返回与图形模式匹配的资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-25T14:11:58.830

正如@Thomas 所说，`DESCRIBE`标准对它的指定有点不足，因此您将得到不一致的结果。但是，使用`CONSTRUCT`，您可以返回许多引擎将返回的值`DESCRIBE`，即 SPO 加上 OPS，并且跨服务始终如一地这样做。这是一个执行此操作的查询：

```
CONSTRUCT {
   ?person ?p ?o .
   ?s ?p1 ?person .
}
WHERE {
   ?person rdf:type foaf:Person .
   FILTER EXISTS { ?person owl:sameAs ?sameAs } .
   ?person ?p ?o .
   ?s ?p1 ?person .
} 
```

这将为您提供一个 RDF 图，该图“描述”绑定到 的资源`?person`，即 的所有属性`?person`以及其值（对象）为 ?person 的所有属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-08T10:18:35.480

> SELECT 或 CONSTRUCT 在手头的情况下不是可行的选择，因为我不知道数据的实际结构

你为什么这么说？我认为您要么只想获得资源：

```
select ?x WHERE {
  ?x rdf:type skos:Concept .
  FILTER EXISTS { ?x skos:prefLabel ?prefLabel }
}
LIMIT 100 
```

或他们所有传出的三元组：

```
select ?x ?p ?y WHERE {
  ?x rdf:type skos:Concept.
  FILTER EXISTS { ?x skos:prefLabel ?prefLabel }
  ?x ?p ?y
}
LIMIT 100 
```

# javascript - 在加载时添加淡入淡出效果

> ID：15191558
> 
> 赞同：0
> 
> 时间：2013-03-03T22:15:24.863
> 
> 标签：javascript, jquery

如何为此特定代码添加淡入淡出？我希望图片在加载时淡入。对 Stackoverflow 进行了一些研究，但找不到任何有用的东西。一些帮助将不胜感激。

```
<script type="text/javascript">
window.onload = function(){
       var img = document.getElementById('img')
       if(img.clientHeight<$('#div').height()){
            img.style.height=$('#div').height()+"px";
       }
       if(img.clientWidth<$('#div').width()){
            img.style.width=$('#div').width()+"px";
       } 
}
</script> 
```

额外的问题：是否也可以在此代码中添加加载功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:40:12.837

Sj 可以使用 jQuery 简化您尝试做的事情。jQuery 是一个 JavaScript 库，它使处理 HTML 文档变得更加容易。

这是一个演示他们的fadeIn方法的小小提琴：http: [//jsfiddle.net/zgRtd/3/](http://jsfiddle.net/zgRtd/3/)

只是为了确保您清楚正在发生的事情：

* * *

我们声明了一个名为 load Image 的函数——这个函数使用 jQuery 将fadeIn 方法附加到我们的 jQuery 对象（通过 CSS 选择器引用）。

图像设置为显示：无；最初。

```
function loadImage () {
    $('#your-image').fadeIn('slow', function () {
        // Animation complete
    });
} 
```

我们在文档加载后调用该函数（这可以绑定到任何事件），我在 JSFiddle 示例中对此进行了注释。

```
$(document).on('ready', function () {
    loadImage();
}); 
```

# asp.net - ASP.NET Web API 在错误的位置寻找 web.config

> ID：15191559
> 
> 赞同：1
> 
> 时间：2013-03-03T22:15:29.517
> 
> 标签：asp.net, visual-studio-2012, asp.net-web-api, iis-7.5

IIS 7.5 在映射路由中而不是在实际文件夹位置中查找我的 web.config 文件。

示例 C:\inetpub\wwwroot\api\thedoors\1 <-- 是它正在寻找的地方 这不是目录，而是 WebApiConfig 类中指定的 url

它应该看的地方是 c:\inetpub]wwwroot\thedoors\

我正在使用 VS 2012 的发布在本地发布到我的 IIS 7.5 Web 服务器。

# 应用程序“THEDOORS”中的服务器错误

互联网信息服务 7.5

错误摘要

## HTTP 错误 404.0 - 未找到

### 您要查找的资源已被删除、名称已更改或暂时不可用。

详细错误信息模块IIS Web Core NotificationMapRequestHandler HandlerStaticFile Error Code0x80070002 Requested URLhttp://localhost:80/api/thedoors/1 Physical PathC:\inetpub\wwwroot\TheDoors\api\thedoors\1 登录方式Anonymous Logon UserAnonymous 最可能的原因：

*   指定的目录或文件在 Web 服务器上不存在。
*   URL 包含印刷错误。
*   自定义过滤器或模块（例如 URLScan）限制对文件的访问。

你可以尝试的事情：

*   在 Web 服务器上创建内容。
*   查看浏览器 URL。
*   创建一个跟踪规则来跟踪此 HTTP 状态代码的失败请求，并查看哪个模块正在调用 SetStatus。有关为失败的请求创建跟踪规则的更多信息，请单击[此处](http://go.microsoft.com/fwlink/?LinkID=66439)。

链接和更多信息 此错误意味着文件或目录在服务器上不存在。创建文件或目录并再次尝试请求。

[查看更多信息 »](http://go.microsoft.com/fwlink/?LinkID=62293&IIS70Error=404,0,0x80070002,7600)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:52:25.740

Benny，这不是您的 web.config 文件的虚拟位置的问题。它告诉您有关您的 web.config 文件的某些内容不正确。`C:\inetpub\wwwroot\api\thedoors\web.config`它似乎在您的 Web API 执行的位置找不到物理 web.config 。您在指定位置有文件吗？

更新：我会打开 IIS 管理控制台并检查文件夹映射。

我刚刚创建了一个示例 Web API 项目并将其发布到本地 IIS，但我无法重现该问题。我的文件夹映射似乎没问题。该文件夹是 C:\inetpub\wwwroot\sampleapi 并且 web.config 在那里。

# visual-studio-2012 - 监视窗口不适用于 F#

> ID：15191561
> 
> 赞同：1
> 
> 时间：2013-03-03T22:15:45.080
> 
> 标签：visual-studio-2012, f#

前段时间我注意到 VS2012 for Web 中的“监视”窗口不适用于 FSharp 中的默认功能。例如，`cos someValue`不起作用，在函数开头插入`let _cos = cos`或插入并使用的解决方法也不起作用。错误类似于“cos 在当前上下文中不存在”或“_cos 在当前范围内无效”等。`let _cos x = cos x``_cos(someValue)`

我应该更改一些设置还是这是一个意外的错误？当然，我可以声明我需要观看的所有结果，但这有点开销，而且非常不切实际。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T02:11:35.297

如[参考答案](https://stackoverflow.com/questions/3322027/how-do-i-invoke-an-f-function-from-the-vs2010-immediate-window)中所述，手表和即时窗口仅支持 C#，因此它们无法评估 F# 表达式并且它们不知道 F# 上下文（例如打开的命名空间）。

**总之**，将结果存储在局部变量中（编译为普通的局部变量）是查看结果的最佳方式。

**更多详细信息：** 在某些情况下，您可以编写与您想在 F# 中执行的操作相对应的 C# 代码。这可能只适用于简单的情况，当相应的 C# 不太难编写时，但通常可以做到。例如要调用`cos 3.14`，您需要编写如下内容：

```
Microsoft.FSharp.Core.Operators.Cos(3.14) 
```

如果您`cos`在 F# 源代码中找到该函数（在[此处，在 prim-types.fsi 中](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/prim-types.fsi#L2383)），那么您可以看到它带有`CompiledName`告诉编译器将其编译为名为的方法的属性`Cos`（遵循 .NET 命名准则）。它是在名为的模块中定义的`Operators`（参见[此处](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/prim-types.fsi#L1812)），它带有注释，`AutoOpen`因此您无需`open`在 F# 代码中显式编写，但它实际上是 F# 编译器在编译代码时生成的类的名称。

# ruby-on-rails - activerecord：检查列的前 X 个字符

> ID：15191563
> 
> 赞同：0
> 
> 时间：2013-03-03T22:15:54.607
> 
> 标签：ruby-on-rails, activerecord

我想直接在我的模型中检查一个数字的前两个字符。首先我定义当前登录用户的数量（设计）：

```
user_number = current_user.number.first(2) 
```

然后我想获取该值并在“数字” mobel 中的 where 语句中检查它，所以我尝试了这个

```
@numbers = Number.where(:number_value.first(2) => user_number) 
```

这显然与

```
@numbers = Number.where(:number_value.first(2) => current_user.number.first(2)) 
```

不，那是行不通的。

如何检查模型中 :number_value 列的前 2 个字符？任何帮助表示赞赏。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:48:38.987

解决方案（SQLite）

```
@numbers = Number.where("number_value like '" + current_user.number.first(2) + "%'") 
```

因为这不是延迟加载，所以我还不相信它是最聪明的解决方案。如果你知道更好，如果你能分享会很酷

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:30:54.127

首先，您应该阅读[ActiveRecord 查询指南](http://guides.rubyonrails.org/active_record_querying.html)。我还想象有一种更直接的方式可以让您实现目标。

但是，为了回答您的具体问题，这是一种适用于 Postgresql 的方法。

```
Number.where("number_value::text like ?", current_user.number.to_s[0,2] + "%") 
```

# python - 使用 QTextCursor、QTextEdit 选择 textEdit 对象的文本

> ID：15191565
> 
> 赞同：1
> 
> 时间：2013-03-03T22:16:11.157
> 
> 标签：python, qt, pyqt4

我有一个 textEdit 字段，我想在该字段中处理一些选定的文本（但不是它的格式）。

到目前为止，我将按钮连接到：

QtCore.QObject.connect(self.ui.mytext_button,QtCore.SIGNAL("clicked()"), self.mytext)

方法：

```
def mytext(s):
     return s.upper() 
```

但是我如何告诉 Python s 是选定的文本？我知道这是 selectionStart()、selectionEnd() 的问题。以及如何将其更改为 mytext 返回的内容？我认为是 insertText() 的东西，但在这里我也迷失了细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:54:30.250

回答我自己的问题。在这里为 Python 新手发帖：

获取选中的文本：

```
cursor = self.ui.editor_window.textCursor()
textSelected = cursor.selectedText() 
```

将文本插入编辑器。

```
self.ui.editor_window.append(s) 
```

append() 也有替代方法，用于将文本插入到原始文本中。
因此，要将选定的文本变为大写：

```
def mytext(self):
        cursor = self.ui.editor_window.textCursor()
        textSelected = cursor.selectedText()
        s = textSelected.upper()
        self.ui.editor_window.append(s) 
```

# cordova - 如何在 Google 上允许 file:// 进行 OAuth 请求

> ID：15191573
> 
> 赞同：2
> 
> 时间：2013-03-03T22:16:51.680
> 
> 标签：cordova, google-oauth

我正在尝试在我的 phonegap 应用程序中使用 Google Drive ( [https://developers.google.com/drive/v2/reference/ )。](https://developers.google.com/drive/v2/reference/)

现在我目前遇到的问题是，在设置“已安装应用程序的客户端 ID”后，不支持来自 file:// 的 api 请求？还是他们不允许？

以下代码以 400 Bad Request 结尾： gapi.auth.authorize({ 'client_id' : CLIENT_ID, 'scope' : SCOPES, 'immediate' : false }, handleAuthResult);

调用的 URL [https://accounts.google.com/o/oauth2/auth?client_id=XXX&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&immediate=true&proxy=oauth2relay427605398&redirect_uri=postmessage&origin=file%3A%2F %2F&response_type=token&state=2033446467%7C0.4181954479&authuser=0](https://accounts.google.com/o/oauth2/auth?client_id=XXX&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&immediate=true&proxy=oauth2relay427605398&redirect_uri=postmessage&origin=file%3A%2F%2F&response_type=token&state=2033446467%7C0.4181954479&authuser=0) **不适用于原始文件**？

我可以允许从文件范围访问吗？或者如何在 phonegap 容器中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:40:21.990

我不相信您可以使用 file:// 作为来源。我还没有找到以这种方式使用 phonegap 的示例。

但是，您可以使用子浏览器并从中发出经过身份验证的请求并将其传递回您的浏览器。下面的链接中有一篇文章和一个使用 Google Tasks 的示例应用程序。

[http://www.itsalif.info/content/oauth-google-api-gapi-phonegap-childbrowser-jquery](http://www.itsalif.info/content/oauth-google-api-gapi-phonegap-childbrowser-jquery)

[https://github.com/liquidlabs/phonegap-oauth-google-api-mobile](https://github.com/liquidlabs/phonegap-oauth-google-api-mobile)

# node.js - 使用节点 mongodb 本机客户端更新的对象计数

> ID：15191574
> 
> 赞同：1
> 
> 时间：2013-03-03T22:16:53.070
> 
> 标签：node.js, mongodb, node-mongodb-native

我有以下更新 MongoDB 查询，通过 MongoDB 本机客户端在 Node.js 中运行。查询正常工作 - 运行此代码后，我看到 MongoDB 中的对象正在修改：

```
collection.update(
    {
      _id : request.query.person,
    },
    {
      $inc: {
        score : 1
      }
    },
    { safe : true},
    this /* "this" is for Step */
  ); 
```

我想知道查询后在 MongoDB 中更新的记录数是多少。我已经看到我可以通过在 MongoDB 中运行 getLastError 来检查它，但我不确定如何使用本机客户端从 Node.js 进行检查。

任何提示如何做到这一点？除了调用 getLastError 还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:52:42.257

`update`回调的第二个参数是受影响文档的数量：

```
collection.update(
    { _id : request.query.person },
    { $inc: { score : 1 }},
    { safe : true},
    function (err, numAffected) {
        ...
    }
); 
```

**原生驱动**2.x版本****更新：****

 **回调的第二个参数`update`现在是一个嵌套对象，其中更新的文档数量可以在`result.nModified`. 但`update`现在已弃用，因此[`updateOne`](http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#updateOne)应改为使用。

```
collection.updateOne(
    { _id : request.query.person },
    { $inc: { score : 1 }},
    { safe : true},
    function (err, response) {
        console.log(response.result.nModified);
        // Also available at response.modifiedCount for updateOne, but not update
        console.log(response.modifiedCount);
    }
); 
```

可以在[此处](http://mongodb.github.io/node-mongodb-native/2.0/api/Collection.html#~writeOpCallback)找到 2.x 回调参数的文档。**

# javascript - 如何使超链接在 Chrome 打包应用程序中工作？

> ID：15191576
> 
> 赞同：0
> 
> 时间：2013-03-03T22:17:04.413
> 
> 标签：javascript, html, google-chrome

我有一个包含多个页面的打包应用程序。当我单击主页中的按钮时，它不会打开链接。有没有办法为谷歌浏览器打包的应用程序在同一框架中打开超链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:43:51.053

您将需要使用 javascript 来管理您的链接并禁用它的默认行为。

像这样的东西（如果你使用 jQuery 或类似的）：

```
$("a").live("click keydown", function (event) {
    event.preventDefault();
    $.get( $(this).attr("href") )
        .success(function(data, status, ajax){
             $('body').empty().replaceWith( $(data).find('body') );
        })
}); 
```

# oop - Scala：从抽象父类参数派生正确的子类

> ID：15191579
> 
> 赞同：0
> 
> 时间：2013-03-03T22:17:25.517
> 
> 标签：oop, scala, inheritance

我是 scala 的新手并且遇到了一些继承问题......我的 NodeVisitor 类无法区分 GreenBasket 中的“b1”和“b2”，并提供错误说明 Basket 中没有“访问”方法。GreenBasket 必须能够容纳带有“b1”和“b2”的 GreenBasket 或 OrangeBasket 对象。如何根据“b1”和“b2”的类型调用适当的“访问”方法？谢谢你。

```
trait Visitor{
  def visit(o: OrangeBasket): Int
  def visit(g: GreenBasket): Int
}

sealed abstract class Basket() {
  def accept(visitor: Visitor): Unit
}

case class OrangeBasket(count: Int, kilos: Double) extends Basket(){
  def this(count: Int) = this(count, 0)
  def accept(visitor: Visitor) = visitor.visit(this)
}

case class GreenBasket(b1: Basket, b2: Basket) extends Basket(){
  def this(b1: Basket) = this(b1, null)
  def this() = this(null)
  def accept(visitor: Visitor) = visitor.visit(this)
}

class NodeVisitor() extends Visitor{
  def visit(o: OrangeBasket) = 1
  def visit(g: GreenBasket) = this.visit(g.b1) + this.visit(g.b2) + 1
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:37:54.767

如果我理解正确，您应该以不同的方式调用这些方法。这个怎么样：

```
class NodeVisitor() extends Visitor{
  def visit(o: OrangeBasket) = 1
  def visit(g: GreenBasket) = g.b1.accept(this) + g.b2.accept(this) + 1
} 
```

请注意，您应该更改接受方法签名。

# pagination - 我如何阻止 rdlc tablix 行在中间分页

> ID：15191595
> 
> 赞同：0
> 
> 时间：2013-03-03T22:19:52.203
> 
> 标签：pagination, rdlc, ssrs-tablix, localreport

我有一个 tablix，其中行由两列组成。每列内有一个包含两个段落的文本框。我想要生成的是：

行高为 1/2 英寸。文本框底部对齐。输出应该是：

****__ *_* __ *_* __ *_* __ *_* __ *_* ___*******__ *_* __ *_* __ *_* __ *_* __ *_* ____**
姓名 日期***** 

 *****并且对数据表中的每个名称重复此操作。我正在把头撞到墙上的问题是下划线有时会出现在页面底部，而下一行的名称和日期会出现在下一页的顶部。

什么设置可以保证下划线及其下方的文本永远不会超出页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:28:42.033

首先检查 KeepTogether 设置。如果这没有帮助，请将它们放在一个矩形中。确保将它们拖到矩形上以使它们与之关联。*****

# javascript - 删除对象属性并且仍然能够循环通过该对象

> ID：15191609
> 
> 赞同：0
> 
> 时间：2013-03-03T22:21:10.933
> 
> 标签：javascript

我正在尝试模仿 setInterval：

```
var Animator=new (function(){
var jobs={
    interval:{}
}

var self=this;
var assignedIntervalNum=0;

this.setInterval=function(func,interval){
    jobs.interval[assignedIntervalNum]={
        func:func,
        latest:Date.now()-interval,
        interval:interval
    };
    assignedIntervalNum++;
    return assignedIntervalNum-1;
}

this.clearInterval=function(key){
    delete jobs.interval[key];
}

var requestNextFrame=function(){
    var now=Date.now();
    for (var key in jobs.interval){
        if (jobs.interval[key].latest + jobs.interval[key].interval < now){
            jobs.interval[key].func();
            jobs.interval[key].latest=now;
        }
    }

    setTimeout(function(){requestNextFrame();},1);
}
requestNextFrame();
})(); 
```

但我不断收到一个错误，指出 jobs.interval[key] 未定义。所以我猜删除并没有完全删除该属性，而只是将其分配给`undefined`！？

对于支持删除对并循环遍历每个对的键/值存储，我有哪些选择？

**编辑**

我的错！

在函数 func() 中调用了 clearInterval，因此导致错误的行是 jobs.interval[key].latest=now; 就在它被删除之后。

所以，是的，javascript 对象仍然是键/值存储的好选择，支持删除对并循环遍历它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:42:59.297

“删除”不会从数组中删除对象，它会将对象设置为未定义，这就是您收到该错误的原因。

如果要从索引为 i 的数组中删除对象，可以使用：

```
array.splice(i, 1); 
```

其中 1 是要从位置 i 开始删除的元素数。

如果要通过键从数组“array”中删除一个元素，可以使用：

```
for (var i=0; i<array.length; i++){
    if (array[i]==key){
        array.splice(i, 1);
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:15:15.187

如问题所述，这是一个错误！

# java - 方法必须返回 int

> ID：15191611
> 
> 赞同：1
> 
> 时间：2013-03-03T22:21:14.377
> 
> 标签：java, while-loop, greatest-common-divisor

我正在编写一个使用 GCD(a, b) = GCD(b, r) r = a%b 的欧几里得算法的程序。我写了一个方法，它应该返回一个整数以便主方法吐出，但是当我要求它这样做时，它说它没有返回一个整数。这是代码

```
public class Euclid {

    public static int GCD(int a, int b)
    {
        while (b != 0)
        {
            int r = a%b;
            System.out.println("(" +a+ "," +b+ ")");
            b = r;
            a = b;
            if(b == 0)
            {
                return a;
            }
        }
    }
    public static void main(String[] args)
    {
        System.out.println(GCD(36, 20));    
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T22:23:24.727

编译器无法判断您的方法最终会达到`b == 0`条件并返回。您可以将其重构为：

```
 int ret = 1;
    while (b != 0)
    {
        int r = a%b;
        System.out.println("(" +a+ "," +b+ ")");
        b = r;
        a = b;
        if(b == 0)
        {
            ret = a;
            break;
        }
    }
    return ret; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T22:23:36.867

在代码中，如果`b == 0`它不会`int`为此返回一个或任何值。您必须处理这种情况，很可能通过指定默认返回值来处理。

```
 public static int GCD(int a, int b)
    {
        while (b != 0)
        {
            int r = a%b;
            System.out.println("(" +a+ "," +b+ ")");
            b = r;
            a = b;
            if(b == 0)
            {
                return a;
            }
        }
        return 0;
    } 
```

# javascript - 在这个 pdf.js 演示中更改 PDF 的 url？

> ID：15191614
> 
> 赞同：0
> 
> 时间：2013-03-03T22:21:37.150
> 
> 标签：javascript, jquery, html, html5-canvas

我正在尝试在此 pdf.js HTML5 pdf 查看器中更改 pdf 的 url，但是当我这样做时，画布是空白的，而不是显示新的 pdf。

为什么它会这样做，我怎样才能让它显示和 pdf ？

这是：http: [//jsbin.com/pdfjs-helloworld-v2/1/edit](http://jsbin.com/pdfjs-helloworld-v2/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:16:20.567

感谢您回答我上面的问题 - 问题可能在于 pdf 文件所在的位置。

当您从 jsbin.com 运行它并调用您在评论中描述的 pdf 文档时，浏览器控制台会返回以下错误：

XMLHttpRequest 无法加载[http://www.onwardsearch.com/UX-Career-Guide/UX-Career-Guide-Infographic.pdf](http://www.onwardsearch.com/UX-Career-Guide/UX-Career-Guide-Infographic.pdf)。Access-Control-Allow-Origin 不允许来源[http://jsbin.com 。](http://jsbin.com)

stackoverflow 上的这两个线程应该可以帮助您进一步

[为什么我在这里看到“Access-Control-Allow-Origin 不允许来源”错误？](https://stackoverflow.com/questions/9310112/why-am-i-seeing-an-origin-is-not-allowed-by-access-control-allow-origin-error)

和

[XmlHttpRequest 错误：Access-Control-Allow-Origin 不允许 Origin null](https://stackoverflow.com/questions/3595515/xmlhttprequest-error-origin-null-is-not-allowed-by-access-control-allow-origin)

以后在 Chrome 中查看控制台框架 - Ctrl+Shift+J

Firefox 中的控制台框架 - 添加 firebug - 将为您节省大量时间

# .net - 在 Elastic Beanstalk 上部署 2 个 .NET 应用程序的经济高效方式

> ID：15191615
> 
> 赞同：0
> 
> 时间：2013-03-03T22:21:48.090
> 
> 标签：.net, amazon-web-services, amazon-ec2, amazon-elastic-beanstalk

我看到了这个问题： [Deploy multiple applications to a single EC2 instance using AWS Elastic Beanstalk](https://stackoverflow.com/questions/10973956/deploy-multiple-applications-to-a-single-ec2-instance-using-aws-elastic-beanstal)

所以我的下一个问题是：处理这种情况最划算的方法是什么？

我需要部署两个密切相关但截然不同的基于 MVC 的 web 应用程序。我试图找到部署它们的最有效方法，而不会造成太多浪费。我在想：

1.  将它们组合成一个 Web 部署包并让 beanstalk 部署它？
2.  重用beantalk的某些元素，例如负载均衡器？我真正需要的是另一个 EC2 实例（假设我仍然无法将多个应用程序部署到单个 IIS），并共享扩展组、负载均衡器等......

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T09:19:05.537

我建议为 .NET 应用程序创建基于 AWS Beanstalk AMI 的自定义 AMI，而不是将其用于部署。

# python - Python中的统计引导库？

> ID：15191617
> 
> 赞同：5
> 
> 时间：2013-03-03T22:21:50.490
> 
> 标签：python, statistics

中是否有统计引导库`Python`？

我希望具有类似于以下功能的功能`R bootstrap`：

[http://statistics.ats.ucla.edu/stat/r/library/bootstrap.htm](http://statistics.ats.ucla.edu/stat/r/library/bootstrap.htm)

搜索我发现：

[http://mjtokelly.blogspot.com/2006/04/bootstrap-statistics-in-python.html](http://mjtokelly.blogspot.com/2006/04/bootstrap-statistics-in-python.html)（代码链接已损坏）

[http://adorio-research.org/wordpress/?p=9048](http://adorio-research.org/wordpress/?p=9048)

[https://github.com/cgevans/scikits-bootstrap](https://github.com/cgevans/scikits-bootstrap)

但上述这些似乎并没有提供所有功能（特别是概率权重）。

任何指针？

这最近被添加到[numpy.random](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.choice.html)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T00:50:05.883

如果您只是在寻找 R 示例函数的 python 版本，请尝试以下操作：

```
import collections
import random
import bisect

def sample(xs, sample_size = None, replace=False, sample_probabilities = None):
    """Mimics the functionality of http://statistics.ats.ucla.edu/stat/r/library/bootstrap.htm sample()"""

    if not isinstance(xs, collections.Iterable):
        xs = range(xs)
    if not sample_size:
        sample_size = len(xs)            

    if not sample_probabilities:
        if replace:
            return [random.choice(xs) for _ in range(sample_size)]
        else:
            return random.sample(xs, sample_size)
    else:
        if replace:
            total, cdf = 0, []
            for x, p in zip(xs, sample_probabilities):
                total += p
                cdf.append(total)

            return [ xs[ bisect.bisect(cdf, random.uniform(0, total)) ] 
                    for _ in range(sample_size) ]
        else:            
            assert len(sample_probabilities) == len(xs)
            xps = list(zip(xs, sample_probabilities))           
            total = sum(sample_probabilities)
            result = []
            for _ in range(sample_size):
                # choose an item based on weights, and remove it from future iterations.
                # this is slow (N^2), a tree structure for xps would be better (NlogN)
                target = random.uniform(0, total)
                current_total = 0                
                for index, (x,p) in enumerate(xps):
                    current_total += p
                    if current_total > target:
                        xps.pop(index)
                        result.append(x)
                        total -= p
                        break
            return result 
```

# sql - 使用单个 SQL 语句插入多个表，保留自动编号

> ID：15191622
> 
> 赞同：2
> 
> 时间：2013-03-03T22:22:33.573
> 
> 标签：sql, ms-access

我有两张桌子。

`Payments`由一个自动编号字段组成 - `PaymentID`。`

`PaymentsMain`包含两个字段 -`MainID`和`PaymentID`。它连接到`Payments`on `PaymentsMain.PaymentID = Payments.PaymentID`。

如何将单个值插入`PaymentsMain.MainID`，并添加一个新的相应记录，`Payments`其中自动编号计算为`Payments.PaymentID`，并将计算的自动编号用作“PaymentsMain.PaymentID”的值？

我想如果我手动生成- 基于添加到初始最大值`PaymentID`的 s 的某种运行总和，这是可能的，但我想知道这是否可以单独使用自动编号来完成。`MainID``PaymentID`

**编辑**

关系如下：![关系](../Images/cbee0d0b3b5429de86bc4b92ca6f0312.png)

**编辑**

如果可以指定 Access 应该插入 的`DEFAULT`值`PaymentID`，那也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T23:05:42.147

鉴于以下情况：

*   `INSERT`如果语句的目标是已保存的查询，则可以从多个表中插入字段。
*   可以插入自动编号字段。
*   可以在 SQL 中模拟自动编号序列。

第一步是创建一个保存的查询，如下所示（`target`在本例中命名）：

```
SELECT PaymentsMain.MainID, PaymentsMain.PaymentID, Payments.PaymentID
FROM PaymentsMain 
INNER JOIN Payments ON PaymentsMain.PaymentID = Payments.PaymentID; 
```

然后计算当前在数据库中的最大自动编号（在本例中为 1626）。

最后，`INSERT`查询：

```
INSERT INTO target (MainID, PaymentsMain.PaymentID, Payments.PaymentID)
SELECT MainID, NewPaymentID, NewPaymentID
FROM (
    SELECT Main.MainID, Sum(1) + 1626 AS NewPaymentID
    FROM Main 
    LEFT JOIN Main AS m2 ON Main.MainID>=m2.MainID
    GROUP BY Main.MainID
) 
```

（这假设自动编号是连续的，而不是随机的）。

# ruby-on-rails - Ruby/Rails CalDAV API

> ID：15191623
> 
> 赞同：3
> 
> 时间：2013-03-03T22:22:38.303
> 
> 标签：ruby-on-rails, events, calendar, google-calendar-api

因此，我为此进行了高低搜索，但我似乎无法找到任何确凿的结论。这似乎是关于日历、日程安排、事件等的大多数事情的一般情况。

所以我的项目进展顺利，我一直致力于实施日历、事件等。将完整的日历与我的 rails 应用程序一起使用，它可以完成工作。我最近一直在想，我可以把它提高到一个合适的水平，但是因为我找不到任何全面的日历解决方案（无法嵌入谷歌日历功能等），如果我创建了一个“restful”呢？CalDAV 连接的接口？我不太确定从哪里开始，或者 CalDAV 是否​​甚至使用类似 RESTful 接口的东西......

谷歌和苹果是如何做到的？

如果我能做到这一点，那么我就可以让人们使用他们选择的日历应用程序。反正。你们对这个领域有什么想法或见解吗？

干杯!

〜D

# php - 以百分比计算总分

> ID：15191627
> 
> 赞同：0
> 
> 时间：2013-03-03T22:23:19.210
> 
> 标签：php

```
<?php
$value1 = rand (1,10);
$value2 = rand (1,10);
?>
<form action="mathq.php" method="post">

<input type="text" name="input1a" value="<?php echo $value1; ?>" class="value" />

<input type="text" value="x" class="equa" />

<input type="text" name="input2a" value="<?php echo $value2; ?>" class="value" />

<input type="text" value="=" class="equa" />

<input id="answer" type="text" name="answer" value="" class="answer" /><br /><br />

<input type="submit" value="Submit answer" class="submit">

<INPUT TYPE="RESET" VALUE="Clear all fields of this form">

</form>

<?php

if(isset($_POST['input1a']) && isset($_POST['input2a']) && isset($_POST['answer'])) {

$result = $_POST['answer'];
$input1a = $_POST['input1a'];
$input2a = $_POST['input2a'];

if (!empty($input1a) && !empty ($input2a) && !empty($result)) {
    //echo '<span class="success">Success!&nbsp;&nbsp;';

}
     if ($result == $input1a * $input2a)
    {
        print($input1a . ' x ' . $input2a . ' = ' . '<span class="correct">' . $result . '</span>' . '<br />Correct!');

    }
    else
    {
        print($input1a . ' x ' . $input2a . ' = ' . '<span class="incorrect">' . $result . '</span>' . '<br />Wrong!<br /> The correct answer was: ' . '<span class="correct">' . $input1a * $input2a . '</span>');
    }

}
?> 
```

我想知道在用户点击提交按钮后如何计算正确答案的总分？我怎样才能创建一个循环来处理随机数的问题，并在它完成后退出并输出人员得分作为正确或错误答案的百分比。我被困在这部分。

我也在想另一种方法可以解决这个问题。

用户完成练习题后，他或她点击完成按钮并输出他的分数。你能指导我如何做到这一点吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:32:07.910

在问题进行时，您需要一个存储数据的地方。

这通常在会话数据或本地数据库中完成。它可以在 cookie 中完成，但不可取。它也可以在平面文本文件中完成。

您需要计算完成了多少问题、多少正确答案，然后您可以得出结果百分比以反馈给用户。

如果没有地方存储中间数据，您将无法执行此操作。

# .net - aspose.words 在负数周围加上括号

> ID：15191633
> 
> 赞同：0
> 
> 时间：2013-03-03T22:23:39.113
> 
> 标签：.net, mailmerge, aspose

我对word文档中的数字有一点问题。我需要使用 Aspose.Words 将数据合并到一个表中，这部分工作正常。只有我需要在负数周围加上括号（并乘以-1）。

我一直在四处寻找，找不到任何地方。那么有谁知道我是否可以以编程方式执行此操作，甚至可以为 docX 文档添加格式？

谢谢，瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:36:56.320

我解决了这个问题，并认为我应该分享以防其他人发现它有用。

在 docX 文档中，您可以在 MergeField 中添加格式选项。右键单击要格式化的字段并选择“切换字段代码”，这会将 MergeField 更改为如下所示：

```
{MERGEFIELD NetGoodsAmount \* MERGEFORMAT} 
```

将 '\*' 替换为您的格式选项。因此，如果您想要括号中的负数将其更改为：

```
{MERGEFIELD NetGoodsAmount \#"#,##0.00;(#,##0.00)"\* MERGEFORMAT} 
```

我找不到任何涉及这些选项的 GUI，所以看起来您必须手动执行此操作。

希望对某人有所帮助，Ryan M

# jquery - 如果用户在动画时单击，则防止单击触发

> ID：15191634
> 
> 赞同：0
> 
> 时间：2013-03-03T22:23:47.770
> 
> 标签：jquery, jquery-animate

我有一个`.box`div，点击它会展开。

问题是，如果您在该 div 上快速单击多次，则单击事件将触发新动画，并且每次单击都会运行动画。

**HTML**

```
<div class="box">
    <div class="title">
        <label>Some title</label>
    </div>
    <div class="text">
        <label>Some text that is longer then the title text</label>
    </div>
</div> 
```

**jQuery**

```
$('.box').toggle(function() {
    $(this).attr("selected", "true");
    $(this).animate({"height": "529px", "width": "460px"}, "slow");
},function() {
    $(this).animate({"height": "163px", "width": "220px","z-index":"10"}, "slow");
}); 
```

我想以某种方式禁用点击，直到**动画完成一次**。

那可能吗 ？

[在黄色 div 上快速单击多次](http://jsfiddle.net/EZVK3/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:29:00.227

用于`.is(':animated')`检查对象是否处于动画状态，例如[http://jsfiddle.net/65W2G/](http://jsfiddle.net/65W2G/)这样做：

```
$('.box').toggle( function () {
    if ($(this).is(':animated')) {
        return;
    }
    $(this).attr("selected", "true");      
    $(this).animate({"height": "529px", "width": "460px"}, "slow");
}, function () {
    if ($(this).is(':animated')) {
        return;
    } 
    $(this).animate({"height": "163px", "width": "220px","z-index":"10"}, "slow");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T22:33:50.740

您应该绑定到 click 事件处理程序而不是使用切换，因为它在 jQuery 1.8 中已被弃用并从 jQuery 1.9 中删除

```
$('.box').click(function() {
    var $this = $(this);
    if($this.is(':animated')){
        return false;   // return false if it's already animating
    }
    // determine height/width to animate too
    var height = $this.height() == 529 ? '163px': '529px';
    var width = $this.width() == 460 ? '200px' : '460px';

    $this.attr("selected", "true");
    $this.animate({"height": height, "width": width}, "slow");
}); 
```

[小提琴](http://jsfiddle.net/TgaAj/)

# perl - perl telnet - 如何处理多页输出

> ID：15191635
> 
> 赞同：0
> 
> 时间：2013-03-03T22:24:08.543
> 
> 标签：perl, telnet, multipage

我正在编写一个脚本来通过保存输出“show run”来保存交换机配置，因为固件在通过 tftp 工作时存在问题。“show run”的输出除以帖子`More: <space>, Quit: q, One line: <return>`。

```
# sh run
no spanning-tree
interface port-channel 1
shutdown
exit
interface port-channel 2
shutdown
exit
interface port-channel 3
shutdown
exit
interface port-channel 4
shutdown
exit
interface port-channel 5
shutdown
exit
interface port-channel 6
shutdown
exit
interface port-channel 7
shutdown
exit
More: <space>,  Quit: q, One line: <return> 
```

我的部分脚本如下：

```
foreach (@linksys_sps){
  print ("Connecting to ",$_,"\n");
  my $telnet = new Net::Telnet ( Timeout=>10,Errmode=>'return');
  $telnet->open($_);
  if ($telnet->errmsg){
    print "Can't connect to " . $_ . " Error: " . $telnet->errmsg . "\n";
  } else {
    $telnet->waitfor('/User Name:$/i');
    $telnet->print('admin');
    $telnet->waitfor('/Password:$/i');
    $telnet->print('password');
    my @lines = $telnet->cmd("sh run");
    print @lines;
    sleep(5);
    $telnet->print('exit');
  }
} 
```

以及他的工作成果：

```
# sh run
no spanning-tree
interface port-channel 1
shutdown
exit
interface port-channel 2
shutdown
exit
interface port-channel 3
shutdown
exit
interface port-channel 4
shutdown
exit
interface port-channel 5
shutdown
exit
interface port-channel 6
shutdown
exit
interface port-channel 7
shutdown
exit
More: <space>,  Quit: q, One line: <return> 
```

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:15:53.107

您的交换机上是否有将页面长度设置为零 (0) 的选项？如果是这样，您必须在执行“sh run”命令之前添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T15:14:42.290

在阿尔卡特 6224 和相同的戴尔 powerconnect 3548 上它可以工作：

```
my @lines = $telnet->cmd("terminal datadump");
@lines = $telnet->cmd("show run"); 
```

# ios - 使用 GData 按时长过滤 YouTube 视频源

> ID：15191636
> 
> 赞同：0
> 
> 时间：2013-03-03T22:24:12.623
> 
> 标签：ios, objective-c, youtube-api, gdata, gdata-api

我正在使用 GData API 方法

```
- (GDataServiceTicket *)fetchFeedWithQuery:(GDataQuery *)query
                                  delegate:(id)delegate
                         didFinishSelector:(SEL)finishedSelector; 
```

获取 YouTube 视频。我正在尝试按持续时间过滤搜索提要。例如，我希望提要只返回超过 20 分钟的视频。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:18:08.393

1) 您可以通过使用[videoDuration](https://developers.google.com/youtube/v3/docs/search/list#videoDuration) = long使用[YouTube Data API v3来实现这一点](https://developers.google.com/youtube/v3/)

您的请求将类似于“GET [https://www.googleapis.com/youtube/v3/search?part=id%2Csnippet&videoDuration=long&key=](https://www.googleapis.com/youtube/v3/search?part=id%2Csnippet&videoDuration=long&key=) {YOUR_API_KEY}”

2）如果您想对持续时间进行更细粒度的搜索，您可以使用[视频列表查询](https://developers.google.com/youtube/v3/docs/videos/list)迭代视频并检查每个视频的[videoDuration](https://developers.google.com/youtube/v3/docs/videos#contentDetails.duration)。

# cron - Cron 作业不会“取消链接”文件 - 为什么？

> ID：15191641
> 
> 赞同：0
> 
> 时间：2013-03-03T22:24:38.780
> 
> 标签：cron, crontab, file-exists, unlink

我有一个 php 脚本，可以从我的服务器上的特定文件夹中删除一个文件：

```
if (file_exists($_SERVER['DOCUMENT_ROOT']."/folder/file1"))
{
unlink($_SERVER['DOCUMENT_ROOT']."/folder/file1");
} 
```

当我使用浏览器访问此脚本地址时，它工作正常。

我创建了一个 cron 作业来每小时运行这个脚本，并从 cron 作业运行这个脚本 - 该文件没有被删除。

我还创建了一个向我发送电子邮件的标志，我怀疑 cron 作业对“file_exists”测试得到错误响应，而不是继续执行“取消链接”操作。

知道为什么 cron 作业不会删除文件吗？

谢谢

任何人？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:05:33.820

解决了它：

而不是 $_SERVER['DOCUMENT_ROOT']."/folder/file1

不得不把这个：/home/public_html/folder/file1

# java - 子阵列最大和

> ID：15191642
> 
> 赞同：1
> 
> 时间：2013-03-03T22:24:41.760
> 
> 标签：java

我正在查看几天前完成的作业，并意识到我不应该使用常量。分配是众所周知的“使用分而治之的方法递归地找到正负整数子数组的最大和”问题。我的算法有效，但它的一部分使用一个常量来计算包含数组中间的子数组的最大总和。

以下是相关代码：

```
lfSum = Integer.MIN_VALUE;
sum = 0;
// Sum from left to mid
for (int i = mid; i >= LF; i--) {
    sum += array[i];
    if (sum > lfSum) {
        lfSum = sum;
        if (lfSum > lfMax) {
            lfMax = lfSum;
        }
    }
}

rtSum = Integer.MIN_VALUE;
sum = 0;
// Sum from mid to right
for (int j = mid+1; j <= RT; j++) {
    sum += array[j];
    if (sum > rtSum) {
        rtSum = sum;
        if (rtSum > rtMax) {
            rtMax = rtSum;
        }
    }
}

// Largest sum spanning whole array
midMax = lfSum + rtSum; // midMax = leftMid + midRight; 
```

它的作用是遍历整个数组的每一半，并检查总和是否大于可能的最小整数，以防整个数组为负数。如果是，它将那一侧的最大总和设置为总和的值。如果该值大于返回的递归调用之一（lfMax 或 rtMax），则将相应侧的递归值设置为它。

就像我之前说的，这很好用，但我不应该使用“Integer.MIN_VALUE”。还有其他方法吗？显然我可以将 lfSum/rtSum 初始化为 Integer.MIN_VALUE 的数值，但我想知道是否还有其他选项。

我尝试删除 rtSum/lfSum 并将 sum 与递归值进行比较，并将 lfSum/rtSum 初始化为 0，但两者都无法正常工作。感谢您抽时间阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:33:20.153

您可以初始化`lfSum`为`null`：

```
Integer lfSum = null; 
```

并像这样修改 if 条件：

```
if (lfSum == null || (lfSum != null && sum > lfSum.intValue())) {
    lfSum = sum;
    if (lfSum > lfMax) {
        lfMax = lfSum;
    }
} 
```

类似的策略适用于`rtSum`.

# java - Java 应用程序从本地包编写 CSS

> ID：15191645
> 
> 赞同：1
> 
> 时间：2013-03-03T22:24:55.990
> 
> 标签：java, file, writer

我正在尝试以编程方式构建使用相同 css 的 html 页面。为此，我正在创建必要的目录和 css 文件。

如下图所示，我的包“资源”中有 css 文件，我想在调用**writeCss方法时获取它并编写一个本地副本**

![在此处输入图像描述](../Images/30341e9c6bf9e664bf615bae915dcece.png)

这是该方法的样子：

```
private void writeCss(){
        try {
        BufferedWriter out = new BufferedWriter(new FileWriter("new_project/css/style.css"));
            //take the style.css from the package resources

            //write the css to a local file
            out.write("");

            out.close();
        } catch (IOException e) {}
    } 
```

我首先想到的只是将整个 CSS 代码复制并粘贴到其中，`out.write("")`但代码对于缓冲区来说太长了。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:16:05.553

您可以使用类加载器读取文件的内容以帮助您找到文件，例如：

```
InputStream is = getClass().getResourceAsStream("/resources/style.css"); 
```

请注意，如果类加载器无法找到该文件，它将返回 null，但我认为它在您的情况下可以正常工作。通常，您会使用缓冲区读取整个文件，然后将其直接写入输出流，直到输入流被消耗，如果您在写入之前不修改或处理 CSS 文件，则无需编写器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:20:03.097

最简单的方法是：

```
Files.copy(Gui.class.getResourceAsStream("style.css"),
    Paths.get("new_project", "css", "style.css")); 
```

# multithreading - 纯 Haskell 代码是否需要线程池？

> ID：15191649
> 
> 赞同：34
> 
> 时间：2013-03-03T22:25:11.613
> 
> 标签：multithreading, haskell

在[Real World Haskell，第 28 章，软件事务内存中](http://book.realworldhaskell.org/read/software-transactional-memory.html)，开发了一个并发 Web 链接检查器。它获取网页中的所有链接，并使用 HEAD 请求命中每一个链接，以确定链接是否处于活动状态。采用并发的方法来构建这个程序，并做出以下声明：

> 我们不能简单地为每个 URL 创建一个线程，因为如果（如我们所料）大多数链接都是活动的和响应式的，这可能会使我们的 CPU 或网络连接负担过重。相反，我们使用固定数量的工作线程，它们从队列中获取要下载的 URL。

我不完全理解为什么需要这个线程池而不是`forkIO`为每个链接使用。AFAIK，Haskell 运行时维护一个线程池并适当地安排它们，所以我没有看到 CPU 过载。此外，在[Haskell 邮件列表上关于并发的讨论中](http://www.haskell.org/pipermail/haskell/2011-April/022735.html)，我发现以下语句朝着相同的方向发展：

> 在 Haskell 中没有意义的一种范式是工作线程（因为 RTS 为我们做到了）；而不是取一个工人，只是 forkIO 代替。

**线程池是否只需要网络部分，还是有 CPU 原因？**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-04T04:47:53.163

我想，核心问题是网络方面。如果您有 10,000 个链接和每个链接的 forkIO，那么您可能有 10,000 个套接字尝试一次打开，这取决于您的操作系统的配置方式，甚至可能都不可能，效率要低得多。

然而，我们拥有跨多个操作系统线程“虚拟”调度的绿色线程这一事实并不意味着我们可以随机分配工作而不考虑 cpu 使用情况。这里的问题不在于 CPU 本身的调度不会为我们处理，而是上下文切换（甚至是绿色切换）会花费周期。如果每个线程处理不同的数据，则需要将该数据拉入 cpu。如果有足够的数据，这意味着将东西拉入和拉出 cpu 缓存。即使没有，这也意味着将缓存中的内容拉到寄存器等。

即使一个问题是微不足道的平行问题，将它分解得尽可能小并尝试“一次完成”实际上*也不是正确的想法。*

# microsoft-metro - 我想为我的 android 应用程序设计一个 Metro 风格的 UI

> ID：15191650
> 
> 赞同：1
> 
> 时间：2013-03-03T22:25:14.263
> 
> 标签：microsoft-metro, android-ui

我想为我的 android 应用程序设计 Metro 风格的 UI。怎么做？有什么捷径吗？我尝试使用图像视图制作一个。如何给它效果？还有其他方法吗？请帮我....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:46:46.197

试试 Sergey Pimenov 的 Metro UI CSS。检查[http://metroui.org.ua/](http://metroui.org.ua/)

# glsl - Sampler 2D Alpha 值保持在 1

> ID：15191652
> 
> 赞同：0
> 
> 时间：2013-03-03T22:25:29.530
> 
> 标签：glsl, textures, terrain

我创建了一个用于 2D 采样器的纹理，作为镶嵌地形网格的置换贴图。使用传入的顶点坐标，我对后续顶点的补丁角有一个平滑的插值。当使用来自采样器的高度值时，我收到的只是一个平面。当我将该值乘以 100 时，平面的高度增加了 100 左右，这让我相信 alpha 值始终是 1。

这是 GLSL 评估着色器和纹理设置。

```
 #version 430

layout(triangles, equal_spacing, ccw) in;

uniform mat4 camera;
uniform mat4 model;

uniform sampler2D terrain;
//uniform float lod_factor;
uniform float size;

in vec4 WorldPos_ES_in[];
in vec2 TexCoord_ES_in[];
in vec3 Normal_ES_in[];

out vec4 WorldPos_FS_in;
out vec2 TexCoord_FS_in;
out vec3 Normal_FS_in;

vec3 interpolate3D(vec3, vec3, vec3);
vec2 interpolate2D(vec2, vec2, vec2);

void main()
{
 // Interpolate the attributes of the output vertex using the barycentric coordinates
 TexCoord_FS_in = interpolate2D(TexCoord_ES_in[0], TexCoord_ES_in[1], TexCoord_ES_in[2]);
 Normal_FS_in = interpolate3D(Normal_ES_in[0], Normal_ES_in[1], Normal_ES_in[2]);
 Normal_FS_in = normalize(Normal_FS_in);
 WorldPos_FS_in = vec4(interpolate3D(WorldPos_ES_in[0].xyz, WorldPos_ES_in[1].xyz,       WorldPos_ES_in[2].xyz),1);
 vec2 position=WorldPos_FS_in.xz;
 float Displacement = texture(terrain, position/size).a;

 //gl_Position = camera*model * WorldPos_FS_in;
 gl_Position = camera*model * vec4(WorldPos_FS_in.x, Displacement,WorldPos_FS_in.z, 1.0);

}
vec2 interpolate2D(vec2 v0, vec2 v1, vec2 v2)
{
 return vec2(gl_TessCoord.x) * v0 + vec2(gl_TessCoord.y) * v1 + vec2(gl_TessCoord.z) * v2;
}

vec3 interpolate3D(vec3 v0, vec3 v1, vec3 v2)
{
 return vec3(gl_TessCoord.x) * v0 + vec3(gl_TessCoord.y) * v1 + vec3(gl_TessCoord.z) * v2;
} 
```

和

```
glActiveTexture(GL_TEXTURE1);
GLuint tex2 = createTerrainMap();
glBindTexture(GL_TEXTURE_2D, tex2);
shader->setUniform("terrain", 1); 

static GLuint createTerrainMap(){

GLuint texName;
glGenTextures(1, &texName);    
glBindTexture(GL_TEXTURE_2D, texName);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA32F, size+1, size+1, 0, GL_RGBA, GL_FLOAT, terrainM);

return texName;
} 
```

地形M被声明为

```
GLfloat terrain[size+1][size+1][4]; 
```

如前所述，使用顶点坐标会产生正确的结果，但会违背置换贴图的目的。此外，我使用文件中的另一个纹理作为 GL_TEXTURE1，它是 TexCoord_ES_in，它用于片段着色器并正确应用。关于是什么导致平面而不是位移值的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:24:04.707

由于 TEC 不提供关于三角形在其内部的重心坐标之外的位置的数据。使用三角形的插值数据是没有用的。在我的世界坐标从 0 到任意数量的情况下，需要另一组 UV 坐标来找到正确的高度。

# ruby-on-rails - Rails 应用程序中的单个模板

> ID：15191657
> 
> 赞同：0
> 
> 时间：2013-03-03T22:25:46.677
> 
> 标签：ruby-on-rails, angularjs

我正在尝试将 Rails 与[Angularjs](http://angularjs.org/)一起使用。Angular 将完成所有客户端工作，而 Rails 控制器假设处理列出和修改信息的请求（在数据库中）。

我在views/layouts/application.html.erb 中有一个简单的模板：

```
<!DOCTYPE html>
<html>
<head>
  <title>SomeApp</title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= stylesheet_link_tag    "vendors", :media => "all" %>

  <%= csrf_meta_tags %>
</head>

<body>
  <div id="wrapper" ng-app="app" ng-controller="AppCtrl">
    <div ng-controller="SomeApprCtrl">
      <%= render 'header' %>
      <div ng-view=""></div>
      <%= render 'footer' %>
    </div>
  </div><!-- End on wrapper -->
  <%= javascript_include_tag "application" %>
</body>
</html> 
```

这个模板完成了我启动 Angular 所需的一切。但我需要在 Rails 路线中放一些东西。我需要定义控制器和动作。说这样的话：

```
root :to => 'main#index' 
```

这意味着我需要`index`在views/main/index.html 中只使用一个空方法和完全空的模板文件来定义控制器Main。我怎样才能避免出现这个空无用的文件？

我正在考虑在 ApplicationController 中使用`root :to => 'application#index'`和定义空`index`方法，但由于这个控制器是继承所有其他控制器的基础，我不希望它们有任何废话。这种方法也不能解决空`index.html`模板的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:32:09.377

虽然它是空的，但控制器实际上按照惯例处理了很多。它会自动显示`index.html.erb`视图，并且由于尚未指定布局，它会将其包装在`application.html.erb`布局中。

因此，虽然文件可能很稀疏，但幕后发生了很多事情。

# php - 使用 HTML 表单和 PHP 添加数字

> ID：15191660
> 
> 赞同：0
> 
> 时间：2013-03-03T22:26:22.543
> 
> 标签：php, html, forms, variables, math

我正在尝试制作一个简单的网络应用程序，它可以从诸如拼字游戏之类的物理游戏中添加分数。大部分代码是一个 HTML 表单，要求每个表单元素输入一个。然后，它将表单生成的数据放入并初始化适当的变量。我无法弄清楚的一个部分是如何将新分数添加到最后一个分数。我尝试添加变量，例如 $lastScore，但这似乎也不起作用。有没有人有什么建议？

```
<?php
//Gets data from HTML form
$addScore1 = $_REQUEST['addScore1'];
$addScore2 = $_REQUEST['addScore2'];

//Generates HTML form
echo "<!DOCTYPE html>

<html>

<head>
<title>Score Add</title>
</head>

<body>
<div id=\"displayNames\">

    <p>
    $player1
        <form method=\"post\" action=\"\">
            <label for=\"addScore1\">Enter your score:</label>
            <input type=\"text\" name=\"addScore1\" id=\"addScore1\" />

            <input type=\"submit\" />
        </form>
    </p>

    <p>
    $player2
        <form method=\"post\" action=\"\">
            <label for=\"addScore2\">Enter your score:</label>
            <input type=\"text\" name=\"addScore2\" id=\"addScore2\" />

            <input type=\"submit\"/>
        </form>
    </p>
</div>
</body>

</html>";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:32:47.420

提交时，脚本会调用自身并丢失所有变量。您需要存储他们当前的分数，例如在会话中、在数据库中或在表单中的隐藏字段中。

在表单中使用隐藏字段：

```
<form method="post" action="">
    <label for="addScore1">Enter your score:</label>
    <input type="text" name="addScore1" id="addScore1" />
    <--! the addition is done in the next line in value-->
    <input type="hidden" name="oldScore1" id="oldScore1" value="<?=($oldscore1 + $addScore1)?>" />
    <input type="submit" />
</form> 
```

对您的第二种形式执行相同的操作->`oldScore2`等...
在脚本的顶部，阅读 oldscore`$_REQUEST`

```
//Gets data from HTML form
$addScore1 = $_REQUEST['addScore1'];
$addScore2 = $_REQUEST['addScore2'];
$oldScore1 = $_REQUEST['oldScore1'];
$oldScore2 = $_REQUEST['oldScore2'];

// as alternative, do the addition here:
$oldScore1 += $addScore1;
$oldScore2 += $addScore2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:28:10.167

整体重写你的代码，试试看：

我编辑了所有这些`<?php=$somevalue?>`，因为它们似乎不适用于您的 PHP 设置，并将它们替换为`<?php echo $somevalue> ?>`......让我知道它是如何工作的......

```
<?php
// Get data from HTML form. $_POST is fine, because form method is set to POST.
$addScore1 = $_POST['addScore1'];
$addScore2 = $_POST['addScore2'];
$oldScore1 = $_POST['oldScore1'];
$oldScore2 = $_POST['oldScore2'];

// if these are numeric values, add them up
if (is_numeric($addScore1) && is_numeric($oldScore1)) $oldScore1 += $addScore1;
if (is_numeric($addScore2) && is_numeric($oldScore2)) $oldScore2 += $addScore2;

// Generate HTML form -- in HTML, much to complicated in PHP, unless it is necessary for sth else
?>
<html>
    <head>
        <title>Score Add</title>
    </head>

    <body>
        <div id="displayNames">   
            <p><?php echo $player1; ?> current score: <?php echo $oldScore1; ?>
            <form method="post" action="">
                <label for="addScore1">Enter your score:</label>
                <input type="text" name="addScore1" id="addScore1" />
                <input type="hidden" name="oldScore1" id="oldScore1" value="<?php echo $oldscore1; ?>" />
                <input type="submit" />
            </p>

            <p><?php echo $player2; ?> current score: <?php echo $oldScore2; ?>
                <label for="addScore2">Enter your score:</label>
                <input type="text" name="addScore2" id="addScore2" />
                <input type="hidden" name="oldScore2" id="oldScore2" value="<?php echo $oldscore2; ?>" />
                <input type=\"submit\"/>
            </form>
            </p>
        </div>
    </body>
</html> 
```

# php - 更改多维数组键名

> ID：15191661
> 
> 赞同：0
> 
> 时间：2013-03-03T22:26:23.837
> 
> 标签：php, arrays, codeigniter, multidimensional-array

我已经有以下数组；

```
Array
(
[0] => Array
    (
        [id] => 1
        [name] => Categorie 1
    )

[1] => Array
    (
        [id] => 2
        [name] => Categorie 2
    )

[2] => Array
    (
        [id] => 3
        [name] => Categorie 3
    )
) 
```

我想得到的是这个（对于CodeIgniter中的选择下拉表单）

```
 array(
     '1'  => 'Categorie 1',
     '2'    => 'Categorie 2',
     '3'   => 'Categorie 3'
 ); 
```

剩下的 2 个小时我一直在寻找这个，但仍然不知道什么是正确的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:28:36.883

```
$newArray();
foreach ($oldArray as $k => $v) {
    $newArray[$v['id']] = $v['name'];
} 
```

您可以使用`$oldArray as $v`或使用不同的名称作为键。

# android - Textview 不会显示已在模型（MVC）中更新的数据

> ID：15191662
> 
> 赞同：0
> 
> 时间：2013-03-03T22:26:39.920
> 
> 标签：android, multithreading, android-activity, action

我尝试了以下方法来尝试从模型中更新 TextView：

1.  TextChangeListeners - 错误
2.  其他主题
3.  异步任务
4.  添加了更新数据的刷新按钮，我强制点击

场景如下：

1.  标准线程运行，每秒更新模型（MVC）对象，完美运行。
2.  当模型对象更新时，它会通知所有实现“观察者”的类。
3.  我的 GolfHomeScreen 扩展了 Activity 并实现了 Observer（下面的代码）。
4.  GolfHomeScreen.update (Observable observable, Object data) 方法完美运行。它按预期每秒执行一次，并 SOP 正确的数据（参见 --> // *** #1 ***）。
5.  然后这会启动一个线程。我在这个网站上读到，你必须使用 UI 线程来执行更新小部件的代码，然后运行“runOnUiThread”方法 - 代码看起来像我在下面所做的，但我发现它有点难以理解。无论如何，这个线程运行（见 --> // *** #2****) 然后执行 onClick(View v) 方法（参见 --> //*****#3 ***）。***
****   `System.out.println("driverType :" + mvcModel.getDriverName());`（参见 --> // *** #4 ***）完美运行。*   // *** #5 *** - 它必须更新，但它没有。*   如果我实际单击按钮，则数据会正确显示在屏幕上。我唯一的猜测是屏幕不能在强制点击时刷新，否则我没有使用 UI 线程进行更新。***

 ***注意：如果下面的代码缺少某些内容，那是因为我删除了大量代码以简化对正在发生的事情的理解。

```
public class GolfHomeScreen extends Activity implements Observer
{
    GolfHomeScreen golfHomeScreen = null;
    TextView driverName = null; // Type of driver used by golfer (eg: 1 wood)
    Button refreshData = null;

  @Override public void onClick(View v) //*** #3 ***
  {
    if ((v.getId()) == 12345) // ID of wood (12345 = 1 wood)
    {
                    //*** #4 ***
        System.out.println("driverType              :" + mvcModel.getDriverName()); //THIS PRINTS OUT THE LATEST DATA!!!

                    //*** #5 ***
                    driverName.setText(String.valueOf(mvcModel.getDriverName()));   //THIS DOESN'T AFFECT THE SCREEN?? WHY  :-(
    }
  }

  @Override public void onCreate(Bundle savedInstanceState)
  {
    golfHomeScreen = this;
    refreshData = indViewById(R.id.golfhomescreen_button_refreshData);
    driverName = (TextView) findViewById(R.id.golfhomescreen_text_drivername);
  }

  @Override public void update(Observable observable, Object data)
  {
     // #1 ***
    System.out.println("driverType              :" + mvcModel.getDriverName());

    golfHomeScreen.runOnUiThread(new Runnable()
    {
        @Override
        public void run()
        {
            refreshData.performClick(); //*** #2 ***
        }
    });
  } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:45:12.157

我会提出一些建议和一些修复，希望你的问题会消失。我说这是因为从概念上讲你确实有一些错误的东西，我的回答是修正这些概念：

*   remove`GolfHomeScreen golfHomeScreen = null;`并且`golfHomeScreen = this;`您不需要引用自身的对象。这只是在制造混乱。这条线`golfHomeScreen.runOnUiThread(new Runnable()`你应该打电话`runOnUiThread(new Runnable()`
*   改变`System.out.pr***`那`Log.d(TAG, MESSAGE);`只是因为这是 Android 专门的转储日志的方式，它对你的结果并不重要。它比标准的 Java System.out 更好，因为它允许您按 TAG 和严重性过滤这些日志。
*   不要打电话`refreshData.performClick();`或任何类似的事情，因为您希望执行该按钮内的操作。如果您希望某件事从多个来源发生，请创建一个方法`doThatThing()`，将操作放在那里，然后从`Click`和 从`Update`调用该方法。你正在做的方式有点像“Rube Goldberg 机器”，它正在更新一些东西，点击一个按钮，改变一个文本。只需更改文本。
*   切勿将视图 ID 与数字进行比较`if ((v.getId()) == 12345)`，从 XML 创建的视图 ID 是系统在编译期间生成的，您无法知道它是否是固定数字。您应该与该视图的静态 int ID 进行比较，如下所示：`if(v.getId() == R.id.golfhomescreen_text_drivername)`。如果视图不是在 XML 中创建的（这里不是这种情况），您可以与实际对象进行比较`if(v.equals(driverName))`

通过这些更改，我相信您的代码将起作用。如果确实如此，请务必让我知道并标记为正确答案。***

# c - C - 将 char 转换为 int 以对输出执行按位运算

> ID：15191664
> 
> 赞同：3
> 
> 时间：2013-03-03T22:27:02.303
> 
> 标签：c, floating-point, binary, bitwise-operators

我正在使用一个函数（从：[http](http://www.exploringbinary.com/converting-floating-point-numbers-to-binary-strings-in-c/) ://www.exploringbinary.com/converting-floating-point-numbers-to-binary-strings-in-c/ 借用代码）将浮点数转换为二进制数；存储在一个字符中。我需要能够对结果执行按位运算，所以我一直在尝试找到一种方法来获取字符串并将其转换为整数，以便我可以根据需要移动位。我试过 atoi() 但这似乎返回-1。

到目前为止，我有：

```
char binStringRaw[FP2BIN_STRING_MAX];
float myfloat;

printf("Enter a floating point number: ");
scanf("%f", &myfloat);
int castedFloat = (*((int*)&myfloat));
fp2bin(castedFloat, binStringRaw); 
```

当输入为“12.125”时，binStringRaw 的输出为“10000010100001000000000000000000”。但是，尝试对此执行按位运算会报错：“二进制表达式的操作数无效（'char[1077]' 和 'int'）”。

PS - 如果这是一个简单的问题，或者我的代码存在一些一般性问题，我深表歉意。我对来自 Python 的 C 编程非常陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:37:11.867

“castedFloat 已经是浮点数的二进制表示，因为投射操作告诉它将 myfloat 的位解释为整数位而不是浮点数。”

**编辑：**感谢[Eric Postpischil](https://stackoverflow.com/users/298225/eric-postpischiltpischil][1]:)：

> Eric Postpischil 在评论中：“C 标准不保证上述内容。标准没有完全指定取消引用转换的指针。正确的方法是使用联合：`int x = (union { float f; int i; }) { myfloat } .i;`。（并且仍然必须确保 int 和float 在使用的​​ C 实现中是相同的大小。)"

位运算仅针对整数类型的值定义，例如 char、int、long、...，这就是为什么在字符串（char-array）上使用它们时会失败的原因

顺便提一句，

```
int atoi(char*) 
```

返回写入该字符串中的数字的整数值，例如。

```
atoi("12") 
```

将返回一个值为 12 的整数

如果要转换存储在字符串中的二进制表示，则必须逐位设置与字符对应的整数，执行此操作的函数可能如下所示：

```
long intFromBinString(char* str){
   long ret=0;          //initialize returnvalue with zero
   int i=0;             //stores the current position in string
   while(str[i] != 0){  //in c, strings are NULL-terminated, so end of string is 0
      ret<<1;           //another bit in string, so binary shift resutl-value 
      if(str[i] == '1') //if the new bit was 1, add that by binary or at the end
         ret || 0x01;
      i++;              //increment position in string
   }
   return ret;          //return result
} 
```

函数 fp2bin 需要获取一个 double 作为参数。如果你用 castedFloat 调用它，（现在解释为整数）值将被隐式转换为 float，然后将其传递。

我假设您想获得浮点数的二进制表示，对其进行一些按位操作，然后将其传递。为了做到这一点，你必须把它放回浮动，你以前做的相反的方式，所以

```
int castedFloat = (*((int*)&myfloat));
{/*** some bitwise magic ***/}
float backcastedFloat = (*(float*)&castedFloat);
fp2bin(castedFloat, binStringRaw); 
```

**编辑：（**再次感谢，埃里克）：

```
union bothType { float f; int i; }) both;
both.f = myfloat;
{/*** some bitwise magic on both.i ***/}
fp2bin(both.f, binStringRaw); 
```

应该管用

# ruby-on-rails - 捆绑失败并在 vagrant 上出现 rake 错误

> ID：15191672
> 
> 赞同：1
> 
> 时间：2013-03-03T22:28:06.580
> 
> 标签：ruby-on-rails, vagrant, rbenv

我一直在关注使用此处找到的 Rails 设置 Vagrant 的 railscast： [http ://railscasts.com/episodes/292-virtual-machines-with-vagrant](http://railscasts.com/episodes/292-virtual-machines-with-vagrant)

我在 vagrant 上运行了 rbenv，并使用了稍微更新的 ruby​​(1.9.3p125) 版本。一切都很好，直到我尝试捆绑。这是我得到的错误：

vagrant@lucid32:/vagrant$ bundle
从 http:rubygems
获取 gem 元数据... 从 http:rubygems 获取 gem 元数据...
解决依赖关系...
使用 rake (10.0.3)

Errno::EPROTO: Protocol error - /vagrant/bin
安装 rake (10.0.3) 时出错，Bundler 无法继续。在捆绑之前
确保成功。`gem install rake -v '10.0.3'`

我试过 gem 安装那个版本的 rake，然后运行似乎安装的 rbenv rehash ，但是再次运行 bundle 仍然给我同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:31:52.580

我可以通过将 bundler 从 1.3.2 降级到 1.2.5 来解决这个问题。

```
rvm use @global
gem uninstall bundler
gem install bundler -v 1.2.5
# switch back to the default gemset
rvm use
bundle install
# everything should work now 
```

我唯一改变的另一件事是我从 rvm 1.18.19 恢复到 1.17.10，但我不肯定这一步是必要的。

# android - 设置图像视图的路径

> ID：15191675
> 
> 赞同：-2
> 
> 时间：2013-03-03T22:28:09.730
> 
> 标签：android

我的 android 应用程序中有一个 ImageView，我的桌面上有一张图片。我想将此 imageView 与桌面图像的路径相关联，以便在我运行我的应用程序时显示图像。有人可以帮我写代码吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:34:45.970

您无法打开不在运行应用程序的设备上的文件。

将您的图片移动到`/res/drawable`应用程序的目录中或目录中，然后您将能够在`ImageView`.

如果您的图像被调用`picture1.png`并且它位于应用程序的目录`/res/drawable`中，您可以`ImageView`像这样设置查看它：

```
imageView.setBackgroundResource(R.drawable.picture1); 
```

# mysql - 在 Coldfusion 中写入数据库时 ，如何防止字段长度错误破坏脚本？

> ID：15191676
> 
> 赞同：0
> 
> 时间：2013-03-03T22:28:10.183
> 
> 标签：mysql, csv, coldfusion, import, insert

我正在尝试在我的数据库中创建一个 CSV 导入（使用 Coldfusion8）。

CSV 文件首先被解析为 Coldfusion 数组（`"x"`使用[此 UDF](http://www.bennadel.com/blog/2041-UPDATE-Parsing-CSV-Data-Files-In-ColdFusion-With-csvToArray-.htm)完成），然后我将其输入到一个临时表中进行验证，然后再使用要导入的 CSV 列的 JSON 映射将其实际提交到数据库）。

一切正常，除了字段长度......仍然抛出错误。

现在我正在像这样导入：

```
...
<cfif variables.c_comp NEQ "">
, <cfqueryparam value = "#x[variables.c_comp]#" cfsqltype="cf_sql_varchar" maxlength="50">
</cfif>
... 
```

`x`是被解析的 CSV 行，并且是`variables.c_comp`指定字段的 JSON 映射列号。

我的问题是，如果用户提交长度为 51 个字符的字段，则整个导入失败。

**问题：**
有没有办法导入前 50 个字符而不抛出错误？或者也许只设置一个标志。

感谢您的投入！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T22:42:23.647

只需使用 Left() 函数将其修剪为最大长度

```
<cfqueryparam value = "#Left(x[variables.c_comp], 50)#" cfsqltype="cf_sql_varchar" maxlength="50"> 
```

# coldfusion - FireBase 连接到服务器（不是 NodeJS）

> ID：15191678
> 
> 赞同：1
> 
> 时间：2013-03-03T22:28:45.887
> 
> 标签：coldfusion, railo, firebase, cfml

所以我已经看到了这个答案[Using NodeJs with Firebase - Security](https://stackoverflow.com/questions/14673929/using-nodejs-with-firebase-security/14676060#14676060)，它谈到了将 NodeJS 与 Firebase 数据结构同步。

我不使用 NodeJS（作为 Railo/Coldfusion 开发人员），我想知道在 NodeJS 之外是否可以实现这样的事情？通过 java 或者只是使用 REST 端点。还是我必须使用上面链接中的原始解决方案，分别更新我的网络服务器中的数据。

另一种措辞是；我可以从 firebase 到不是 nodeJS 的 HTTP 服务器进行往返吗？

**编辑：**澄清一下，我真正想做的是将电子邮件网络服务发布到 Firebase 的 REST API，然后 firebase 将其发布到我的外部 railo 服务器上的 URL，因为我的用户需要知道电子邮件何时到达，但服务器只是需要确保它存储它。

据我了解，我最好的选择是让电子邮件网络服务发布到我的 railo 服务器上的 URL，然后再发布到 firebase 上的 REST API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-16T03:45:49.643

是的你可以。

Firebase 没有 Coldfusion 客户端库，因此您需要使用[REST API](https://www.firebase.com/docs/rest/api/)。您可以使用 REST API 从您的服务器代码中读取/写入 Firebase 数据。

您将缺少的一件事是数据更改时的通知。使用[node.js 客户端](https://www.firebase.com/docs/web/quickstart.html)，您可以订阅数据更新，但无法通过 REST API 来做到这一点。

因此，如果您需要知道 Firebase 数据何时发生变化，并且您使用的是 REST，则必须定期轮询数据。

（注意：这主要是在评论中复制@Michael的答案）

# javascript - IE 不会提交动态添加的表单字段

> ID：15191681
> 
> 赞同：0
> 
> 时间：2013-03-03T22:28:54.373
> 
> 标签：javascript, jquery, internet-explorer, dom

我在 7、8 和 9 之后的 IE 中遇到问题都给我这个问题。但是 IE 7 和所有其他浏览器都不会注意到。

在我的表单中，我动态克隆了`DIV`我拥有的第一个，这给了我一个带有克隆字段的新 div，这些字段是字段数组，如下所示`name="myfield[]"`。

当我在 IE 8 和 9 中提交时，它只是返回它，就好像数组中只有一个元素而不是我克隆的许多元素一样。

这是 HTML 和 JS 的完整形式：

```
<p><strong>Choose the number of certificates you would like:</strong></p>
<label><input name="type" value="1" checked="checked" type="radio" onclick="oneCert();" checked /> $25 for one (1) certificate</label><br>
<label><input name="type" value="3" type="radio" onclick="threeCerts();" /> $50 for three (3) certificates</label><br>
<label><input name="type" value="5" type="radio" onclick="fiveCerts();" /> $75 for five (5) certificates</label>
<br><br>
<p>A personal message for each selection is optional and must be 20 words or less.</p>
<p><i>If you would like to purchase more than five (5) certificates, please select the $75 for five (5) certificates option and you will be able to add two (2) certificates for $25.</i></p>
<div id="mainForm">

<div id="people" style="border: 2px solid #000; padding: 10px; margin: 5px;">
Please enter Teacher or Staff Member’s First and Last Name:<br />
First and Last Name of Person: <input name="person[]" value="" style="margin: 5px;" type="text" /><br />
<div class="error-message-person"></div>
Teacher/Staff School: <input name="school[]" value="" style="margin: 5px;" type="text" /><br />
<div class="error-message-school"></div>
Student's Full Name: <input name="student[]" value="" style="margin: 5px;" type="text" /><br />
<div class="error-message-student"></div>
Parent(s) Full Name(s): <input name="parents[]" value="" style="margin: 5px;" type="text" /><br />
<div class="error-message-parents"></div>
Personal message to teacher or staff member:<br />
<textarea name="pmes[]" cols="40" rows="3" maxlength="200"></textarea><br />
</div>

</div>

<input value="Order Now" type="submit" />

<script>
function cloner () {
  jQuery('#people').clone().appendTo('#mainForm').attr('class', 'people').removeAttr('id');
  jQuery('.people:last').children('input[name="person[]"]').val('').parent()
                        .children('input[name="student[]"]').val('').parent()
                        .children('input[name="school[]"]').val('').parent()
                        .children('input[name="parents[]"]').val('');
  jQuery('#mainForm').html(jQuery('#mainForm').html());
}

function addInd () {
  jQuery('#mytext').remove();

  cloner();
  cloner();

  jQuery('#mainForm').append('<div id="mytext">Need more? Add 2 more for $25 by clicking <a href="#" onclick="addInd(); return false;">here</a>.</div>');
}

function threeCerts () {
  while(jQuery('.people').length < 2) {
    cloner();
  }

  while(jQuery('.people').length > 2) {
    jQuery('.people:last').remove();
  }

  jQuery('#mytext').remove();
}

function fiveCerts () {
  while(jQuery('.people').length < 4) {
    cloner();
  }

  while(jQuery('.people').length > 4) {
    jQuery('.people:last').remove();
  }

  jQuery('#mytext').remove();
  jQuery('#mainForm').append('<div id="mytext">Need more? Add 2 more for $25 by clicking <a href="#" onclick="addInd(); return false;">here</a>.</div>');
  jQuery('.people:last div').css('display', 'block');
}

function oneCert () {
  if(jQuery('.people').length > 1) {
    jQuery('.people').each(function(index) {
      this.remove();
    });
  }

  jQuery('#mytext').remove();
}

</script> 
```

如您所见，我尝试使用`html()`命令将 DOM 刷新`innerHTML`从自身更改为自身，但这也不起作用。这个`html()`技巧在让 IE7 工作时对我有用，但 IE 9 和 8 仍然不接受动态添加的字段，或者在这种情况下是克隆的字段。

我也尝试将`html()`呼叫从 DIV ID 更改为表单 ID，但仍然没有成功。

我还尝试在按钮和函数上调用 an `alert()`，`onSubmit`认为`cloner()`这可能会迫使 IE 刷新 DOM。但也不起作用。

IE 8 和 9 中总是返回的数组是：

```
Array ( [type] => 3 [person] => Array ( [0] => ) [school] => Array ( [0] => ) [student] => Array ( [0] => ) [parents] => Array ( [0] => ) [pmes] => Array ( [0] => ) [04a9ffd12221f8353baf957d190ee2e6] => 1 ) 
```

无论我选择什么，理论上如果我选择选项 2 或 3，我应该在每个数组中获得更多，它在 IE 7 和 Chrome、Opera、FF 等中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:22:36.733

在反复使用 JS 代码并添加新元素然后重新做之后，`innerHTML`我找到了我认为唯一的解决方案。似乎无论我在 IE 7 到 9 中做了什么，这个问题都会继续存在。但只有使用在 JS 中动态创建的新表单，然后在最后将新创建的表单附加到正文然后提交才能修复它。不确定 Windows 8 中的 IE，还没有进行那么远的测试，但也应该在那里工作。

完成它的一种技巧，不喜欢完全动态的隐藏形式，但它似乎在上述 IE 中完美地工作。

首先使用 JS 获取 IE 版本并存储到变量中：

```
var ie = (function(){

    var undef,
        v = 3,
        div = document.createElement('div'),
        all = div.getElementsByTagName('i');

    while (
        div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',
        all[0]
    );

    return v > 4 ? v : undef;

}()); 
```

然后我们需要遍历整个表单并将每个元素克隆到我们新创建的表单中，然后追加：

```
function subber () {
    if(ie >= 7) {
      var postto = jQuery('#chronoform_PATS').attr("action");
      var form = document.createElement("form")
      jQuery(form).attr("id", "patsform").attr("name", "patsform").attr("action", postto).attr("method", "post");

      jQuery('input:text').each(function() {
          jQuery(form).append(jQuery(this).clone());
      });

      jQuery('textarea').each(function() {
          jQuery(form).append(jQuery(this).clone());
      });

      jQuery('input:radio').each(function() {
          jQuery(form).append(jQuery(this).clone());
      });

      document.body.appendChild(form);
      form.submit();
      document.body.removeChild(form);

      return false;
    } else { jQuery('#chronoform_PATS').submit(); }
} 
```

当然，如果您不在 IE 浏览器中它只是提交，否则它会创建新表单，然后将找到的所有元素克隆到该表单，附加然后提交。最后，它会删除该表单并返回 false 以阻止之前的表单提交。

按钮元素如下：

```
<input value="Order Now" type="submit" onclick="subber(); return false;" /> 
```

# php - 如何使用 php 读取 csv 文件的特定列

> ID：15191682
> 
> 赞同：1
> 
> 时间：2013-03-03T22:28:54.690
> 
> 标签：php, csv

我正在使用下面的代码将 csv 文件显示为带有 php 的 html 表。我的问题是如何仅显示 csv 文件的特定列。例如，我将显示列号 1、5、9、15。如何修改代码以选择特定字段？

提前致谢， 马特

```
 <?php
 $row = 1;
 if (($handle = fopen("donors.csv", "r")) !== FALSE) {
      while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $num = count($data);
    if ($row == 1) {
        echo '<tr>';
    }else{
        echo '<tr>';
    }

    for ($c=0; $c < $num; $c++) {

        if(empty($data[$c])) {
           $value = "&nbsp;";
        }else{
           $value = $data[$c];
        }
        if ($row == 1) {

             echo '<td style="border-top: 1px solid rgb(111,180,224); border-left: 1px solid rgb(111,180,224); border-bottom: 1px solid rgb(111,180,224);"  align="left" bgcolor="#0066cc" height="36" valign="middle" ><b><font color="#ffffff" size="2">&nbsp;&nbsp;'.$value.'&nbsp;&nbsp;</font></b></td>';
        }else{

            echo '<td style=" border-bottom: 1px solid rgb(111,180,224);" sdval="9" sdnum="1040;" align="left" bgcolor="#ffffff" height="25"  valign="middle"><font color="#000000" size="2">&nbsp;&nbsp;'.$value.'&nbsp;&nbsp;</font></td>';
        }
    }

    if ($row == 1) {
        echo '</tr>';
    }else{
        echo '</tr>';
    }
    $row++;
   }

  echo '</tbody></table>';
echo '</center>';   
    fclose($handle);
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:43:31.693

```
// before your while loop 
$wantedColumns = array(1,5,9,15);

// ...

for ($c=0; $c < $num; $c++) {
   if (!in_array($c,$wantedColumns)) continue;
   // .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:45:17.573

将您的 CSV 字符串转换为数组：

```
$data_as_array = explode(',',$data_as_csv);
echo "This is the value in column #2: ".$data_as_array[1]; 
```

此解决方案尚未考虑行数，这篇文章确实（请参阅接受的答案）：
[How to create an array from a CSV file using PHP and the fgetcsv function](https://stackoverflow.com/questions/1269562/how-to-create-an-array-from-a-csv-file-using-php-and-the-fgetcsv-function)

# java - 为什么不工作？Java 中的 Math.pow

> ID：15191684
> 
> 赞同：-9
> 
> 时间：2013-03-03T22:29:08.960
> 
> 标签：java

我的教授告诉我们做一个java程序来做指数。所以我尝试编写这段代码：

```
System.Out.PrintLn("Enter a number/integer to do raise to a power: ");
Scanner MyScanner = new Scanner(System.In);
int Integer = MyScanner.NextInt();

System.Out.PrintLn("Enter an exponential power: ");
Scanner MyScanner1 = new Scanner(System.In);
int Power = MyScanner1.NextInt();

int Answer=Math.pow(Integer, Power);

System.Out.PrintLn(Integer + "^" + Power + "=" + Answer); 
```

但它给了我一个错误:(

```
Exception in thread "main" java.lang.NoClassDefFoundError 
```

但是我的代码哪里错了？？我认为结构是正确的。

**编辑：**

我正在使用 Eclipse IDE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:31:24.413

Java 是*区分大小写*的，你有很多大小写错误，例如，替换

```
System.Out.PrintLn("Enter a number/integer to do raise to a power: "); 
```

和

```
System.out.println("Enter a number/integer to do raise to a power: "); 
```

此外，如果不确定方法名称，请务必查阅[文档，您需要：](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)

```
MyScanner.nextInt(); 
```

您没有提供任何关于为什么`NoClassDefFoundError`会发生的信息。您是否尝试在*没有*成功编译的情况下运行应用程序？

另外：Java 命名约定表明变量以*小写*字母开头，这将使`MyScanner` `myScanner`.

# php - PHP - 将类视为对象

> ID：15191688
> 
> 赞同：0
> 
> 时间：2013-03-03T22:29:50.970
> 
> 标签：php, oop

我需要将一个类（不是对象）分配给一个变量。我知道这在其他编程语言（如 Java）中非常简单，但我找不到在 PHP 中完成此操作的方法。

这是我正在尝试做的一个片段：

```
class Y{

    const MESSAGE = "HELLO";

}

class X{

    public $foo = Y; // <-- I need a reference to Class Y

}

$xInstance = new X();
echo ($xInstance->foo)::MESSAGE; // Of course, this should print HELLO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:34:45.607

在 php 中，您不能将对类的引用存储在变量中。所以你存储一个带有类名的字符串并使用[`constant()`](http://www.php.net/manual/en/function.constant.php)函数

```
class Y{

    const MESSAGE = "HELLO";

}

class X{

    public $foo = 'Y';

}

$xInstance = new X();
echo constant($xInstance->foo . '::MESSAGE'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:36:55.330

您可以使用反射来找到它（请参阅[Can I get CONST's defined on a PHP class?](https://stackoverflow.com/questions/956401/can-i-get-consts-defined-on-a-php-class)），或者您可以使用如下方法：

```
<?php

class Y
{
    const MESSAGE = "HELLO";
}

class X
{
    function returnMessage()
    {
        return constant("Y::MESSAGE");
    }
}

$x = new X();
echo $x->returnMessage() . PHP_EOL; 
```

编辑 - 还值得指出的是，您可以使用[重载](http://www.php.net/manual/en/language.oop5.overloading.php)来模拟这种行为并可以访问由用户定义的方法处理的属性或静态属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:53:37.630

我发现您可以像处理任何常规字符串一样处理对类的引用。以下似乎是最简单的方法。

注意：在以下代码段中，我对问题中显示的代码段进行了一些修改，以使其更易于阅读。

```
class Y{
    const MESSAGE="HELLO";

    public static function getMessage(){
        return "WORLD";
    }

}
$var = "Y";
echo $var::MESSAGE;
echo $var::getMessage(); 
```

这提供了一个统一的机制来访问常量和/或静态字段或方法。

# html - 如何在链接到 shadowbox vimeo 视频的缩略图图像上覆盖播放按钮 png

> ID：15191690
> 
> 赞同：0
> 
> 时间：2013-03-03T22:29:59.987
> 
> 标签：html, css, overlay, shadowbox

如何在链接到 shadowbox vimeo 视频的缩略图图像上覆盖播放按钮 png

影子盒有效，那不是问题。在缩略图上实现透明播放按钮的问题

html:

```
enter code here
<div class="postsingle">

        <a href="http://player.vimeo.com/video/55138154" rel="Shadowbox" title="demo">
            <img class="demothumbnail" src="https://secure-b.vimeocdn.com/ts/410/203/410203139_640.jpg" alt="thumbnail image"> 
            <span class="playIcon"><img src="images\PlayButton.png">  </span>
        </a>

    </div> 
```

css: .postsingle { 边距：10px 4px 0 12px; 边框：2px纯黑色；}

```
.demothumbnail{
    position: absolute;
    width: 400px; height: auto;
    z-index: 1;

}

.demothumbnail span.playIcon{
    float: auto;
    position:absolute;
     z-index: 0;
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:45:51.097

为什么要`float: auto`声明？

这`.playIcon`跨度未嵌套在 中`.demothumbnail`就是您的 CSS 规则不适用的原因。

如果您希望播放图标覆盖整个缩略图，请使用：

```
.postSingle a {
    position: relative; /* The parent has to be set to relative */
}
.playIcon {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    z-index: 10;
} 
```

如果您的意思是要选择 的直接兄弟`.demothumbnail`，请使用：`.demothumbnail + .playIcon`。查看有关兄弟选择器和子选择器的更多详细信息[在此处](http://css-tricks.com/child-and-sibling-selectors/)。

p/s：请在未来使用 Fiddle 来说明您的问题。

# asp.net-mvc - 2个MVC项目之间的分离模型？

> ID：15191691
> 
> 赞同：0
> 
> 时间：2013-03-03T22:30:00.090
> 
> 标签：asp.net-mvc, entity-framework

我有 2 个项目。移动应用程序和标准网站。

**我想使用 Entity Framework - Code First 在两个项目之间共享我的模型。**

**我如何实现这一目标？**

我看了这个 Q: [MVC and separate projects](https://stackoverflow.com/questions/4581569/mvc-and-separate-projects)，这是否意味着我应该只将我的 DTO 放在单独的程序集中？

1.  **将视图模型和 DTO 放在单独的项目中是否可能和/或明智？**

2.  **如果是这样，我也可以将我的模型查询放在这个单独的程序集中吗？**

还有一个例子来帮助投射我的想法：

```
 ExtAssembly.Product product = new ExtAssembly.Product();
        product.Name = "Dave";

        ExtAssembly.ProductQueries.Create(product);

        var products = ExtAssembly.ProductQueries.Search("Dave"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:56:41.613

> Is it possible and/or wise to put both View Models and DTOs inside a separate project?

Yes, it is possible, however, it might not be the right separation. View models usually are bound to the View, so they would usually stay closer to the View than the Model. I'm not sure what role your DTOs are playing here, but you want to ask yourself what concern (M,V or C) owns them and then group them there.

> If so, can I also put my model queries inside this separate assembly?

Based on your example, placing the Model and your model queries in a separate assembly seems sensible. I have seen the Model separated into a new project many times. It doesn't make sense always to package the Model in the same assembly as your controllers or view for exactly the reasons you are stating in your question.

Namely, you usually want to use your Model (where the core business logic exists) for more than one UI.

# android - 保持安卓应用程序打开

> ID：15191692
> 
> 赞同：0
> 
> 时间：2013-03-03T22:30:08.727
> 
> 标签：android, multitasking

在 Android Market 上有一个名为 Sleep Timer 的应用程序，它是一种闹钟，即使您在 facebook 上锁定了手机，它也会运行闹钟。我制作了一种检测运动的应用程序，但它仅在手机留在该应用程序上时才有效......当应用程序没有提前离开但仍在后台运行时，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:40:51.370

您应该查看 Android 服务，它提供了您所寻求的功能。基本上，它们使您能够创建在后台运行的组件，即使用户离开您的应用程序也是如此。

你可以在这里找到一个很好的介绍：http: [//developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

# c# - 在类和表单之间传递值

> ID：15191693
> 
> 赞同：4
> 
> 时间：2013-03-03T22:30:09.193
> 
> 标签：c#, forms, class

我对 C# 还很陌生——但一切都很顺利——到目前为止。

我从一个完成大部分工作的表单和一个类开始（非静态和程序部分）。我以表格 1 实例化该类的一个对象并进行登录。

然后我切换到下一个表单，form2。实际上，班级就是这样做的。我在那里有一个方法，其中包含以下行：

```
this.f2 = new Form2(); 
```

接着：

```
f2.Show(); 
```

f2 是 Form2 类型的类成员 - 到目前为止一切正常。

这个 Form2 只包含一个大文本框，我想在其中显示网络事件。事件处理程序工作得很好 - 但对表单的引用似乎不起作用。如果我做

```
f2.tetBox1.Text = "Some text"; 
```

它只是不会更改文本框中的文本。

我在这里做错了什么？

这是对我正在做的事情的更详细描述：

`Form1`将一些登录信息传递给`myProg`，作为 的一个实例`MyClass`。如果登录成功，Form1 调用`myProg.makeForm();`

这是 MyClass 中的方法的样子：

```
public void makeForm() {
            this.f2 = new Form2();
            f2.Show();
            this.sendString("start f2");
} 
```

这是`MyClass.sendString()`：

```
private void sendString(string text) {
            SystemSounds.Beep.Play();
            this.f2.setTextBox(text);
} 
```

如您所见，这调用`setTextBox()`了`Form2`- 我按照这里的建议实现的。奇怪的是，到目前为止一切正常。Form2 显示一个 textBox1 包含“start f2” - 正如预期的那样。但是当一个事件进来时，textBox1 中的文本不会改变。哔哔声可以正常播放 - 所以方法 sendString() 可以正常调用。

我观察到的一件事：如果在调用之后放置哔声线 `this.f2.setTextBox(text);`，则如果从事件处理程序调用该方法，则不会播放它。

`f2`，顺便说一句，是 的私有成员`MyClass`：

```
private Form2 f2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:49:02.790

设计者创建的任何控件（例如在设计时从工具箱中删除）都会自动设置为私有。因此，您无法从其他表单访问它。

您不想开始与设计器混淆，而是在您的上创建一个属性，该属性`Form2`将允许您从`Form1`.

一个简短的例子是这样的：

表格2：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    // When modifying the Text property it will change the text in textbox1
    public string Text
    {
        get { return textBox1.Text; }
        set { textBox1.Text = value; }
    }
} 
```

然后，在 Form1 中：

```
Form2 frm2 = new Form2();
frm2.Text = "123"; // Uses the public Text property declared in Form2
frm2.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:49:34.457

默认情况下，当您通过设计器放置文本框时，它是私有的，这意味着您无法从 Form2 外部访问 textBox1（它仅对 Form2 类中的代码“可见”）。您*可以*将文本框更改为内部或公共（这将让您执行以下操作（来自 Form1）：

```
f2.tetBox1.Text = "Some text"; 
```

*但是*，这将暴露 Form2 的部分，只有 Form2 应该真正知道......所以它不是最干净的解决方案（尽管它可能是最快的））

更好的解决方案可能是在 Form2 中创建一个方法或属性（内部或公共）来设置文本值。例如：

```
internal  void SetText(string value)
{
   textBox1.Text = value;
} 
```

由于方法（或属性）位于 Form2 中，因此它可以访问文本框，因此它可以在 textBox1 仍为私有时设置值。

将此方法暴露给“外部”代码（而不是使文本框对他们可见）更安全，因为他们所能做的就是更改文本 - 而暴露整个文本框可能会让调用者尝试更改背景颜色等。

# html - Joomla - 样式分类博客文章内容

> ID：15191694
> 
> 赞同：1
> 
> 时间：2013-03-03T22:30:09.273
> 
> 标签：html, css, joomla, styling, article

我正在尝试设计文章在类别博客中的布局方式，并且一直停留在文章实际内容的样式上。

我在类别博客上的第一篇文章的代码是这样的：

```
<div class="items-leading">

<div class="leading-0">

    <h2>
        <a href="/news/5-news-post-1">News Post 1</a>
    </h2>

    <dl class="article-info">

        <dt class="article-info-term">Details</dt>

        <dd class="published">2nd Mar 2013</dd>

    </dl>

    Lorem ipsum dolor sit amet etc...

    <div class="item-separator"></div>

</div> 
```

我正在尝试通过将 lorem ipsum 示例文本包装在某种标签中来设置它的样式，无论是 div 还是我不介意的段落，所以我可以给它的包装容器一个 div 和字体样式等。

以下是其当前所在网站的链接：

[http://test.studevent.co.uk/news](http://test.studevent.co.uk/news)

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:48:44.197

您想更改博客中文章项目的默认模板吗？/components/com_content/views/category/tmpl/blog_item.php - 它是默认模板。将其复制到您的模板中 (/templates/{your_template_name}/html/com_content/category/blog_item.php)。之后，在第 137 行的副本中，您可以找到`<?php echo $this->item->introtext; ?>`- 这是您的文本“Lorem ipsum ...”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T18:49:36.573

为此，您需要编辑的文件位于此处：

```
YOURSITEROOT/layouts/joomla/content/blog_style_default_item_title.php 
```

为了编辑文件，创建一个新文件夹（在您的模板中）并将文件移动到此处，因此它将是：

```
YOURSITEROOT/templates/YOURTEMPLATE/html/layouts/joomla/content/blog_style_default_item_title.php 
```

# sql - 比较同一行的两列

> ID：15191695
> 
> 赞同：2
> 
> 时间：2013-03-03T22:30:18.863
> 
> 标签：sql, northwind

我想显示在**底部美元市场下的所有订单****之后**下达的所有订单的**OrderID**。

 ****我使用了以下查询

```
select 
    Orders.OrderID 
from 
    Orders 
where 
    Orders.OrderDate > (
        select 
            Orders.OrderDate 
        from 
            Orders 
        where 
            Orders.CustomerID = (
                select 
                    Customers.CustomerID 
                from 
                    Customers 
                where 
                    Customers.CompanyName='Bottom-Dollar Markets'
            ) 
        ); 
```

但它使错误**子查询返回多个值**

我正在使用北风数据库

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T22:36:24.237

您的两个子查询都可能返回多行，这在您使用标量比较操作时是不允许的 -`>`和`=`，在您的情况下。

试试这个：

```
select Orders.OrderID
from Orders
where Orders.OrderDate > (
  select max(Orders.OrderDate)
  from Orders
  where Orders.CustomerID in (
    select Customers.CustomerID
    from Customers
    where Customers.CompanyName='Bottom-Dollar Markets'
  )
); 
```

您实际上不需要比较**所有订单**，因为如果客户的订单大于底部美元市场的**最新订单**，那么它也将大于之前的订单。

或者，这将与 a 一起使用`JOIN`：

```
select Orders.OrderID
from Orders
where Orders.OrderDate > (
  select max(Orders.OrderDate)
  from Orders join Customers on Orders.CustomerID = Customers.CustomerID
  where Customers.CompanyName='Bottom-Dollar Markets'
); 
```****

# ruby-on-rails - 验证包含不适用于创建

> ID：15191698
> 
> 赞同：0
> 
> 时间：2013-03-03T22:30:34.153
> 
> 标签：ruby-on-rails, validation

好的，我有一个很奇怪的场景，我不知道如何处理，所以请耐心等待我尝试向您解释。

我有以下模型。

```
class User < ActiveRecord::Base
  Roles = { pending: 'pending_user', role2: 'role2', etc: 'etc' }
  attr_accessible :role
  validates :role, inclusion: {in: Roles.values}
  before_create :add_pendng_role #Set user role to Roles[:pending]
end 
```

现在的问题是第一次创建记录时，此验证失败！例如在我的控制器中，我有以下代码：

```
class UsersController < ActionController::Base
  @user = User.new params[:user]
  if @user.save  # ---------------   ALWAYS FAILS -------------------------------
    #do something
  else
    #do something else
  end
end 
```

现在我认为它失败的原因是因为只添加了一个`before_create`在验证通过后调用的角色。现在我知道我**不能用 with 替换**`before_create :add_role` **，** 因为`before_validation :add_role`我认为每次验证完成时它都会添加角色。我不能这样做的原因是用户角色将在应用程序中更改，并且我不想在每次对用户进行验证时重置角色。

关于我如何解决这个问题的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:34:30.667

使用 *before_validation*，如[rails 回调指南中所述](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

```
class User < ActiveRecord::Base
  Roles = { pending: 'pending_user', role2: 'role2', etc: 'etc' }
  attr_accessible :role
  validates :role, inclusion: {in: Roles.values}
  before_validation :add_pendng_role, on: :create #Set user role to Roles[:pending]
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T22:34:31.687

你可以试试：

```
before_validation :add_role, on: :create 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T22:38:08.830

如果您使用参数，看起来您将能够更改`before_create`为：`before_validation``:on`

```
before_validation :add_pendng_role, :on => :create 
```

# python - 如何只打印字符串中的每个字母一次

> ID：15191704
> 
> 赞同：0
> 
> 时间：2013-03-03T22:31:15.803
> 
> 标签：python, sorting, for-loop

大家好，我有一个 python 问题。

我试图只打印给定字符串中的每个字母一次。如何使用 for 循环执行此操作并将字母从 a 排序到 z？

这就是我所拥有的；

```
import string

sentence_str = ("No punctuation should be attached to a word in your list, 
                e.g., end.  Not a correct word, but end is.")

letter_str = sentence_str 
letter_str = letter_str.lower()

badchar_str = string.punctuation + string.whitespace

Alist = []

for i in badchar_str:
    letter_str = letter_str.replace(i,'')

letter_str = list(letter_str)
letter_str.sort() 

for i in letter_str:
    Alist.append(i)
    print(Alist)) 
```

我得到的答案：

```
['a']
['a', 'a']
['a', 'a', 'a']
['a', 'a', 'a', 'a']
['a', 'a', 'a', 'a', 'a']
['a', 'a', 'a', 'a', 'a', 'b']
['a', 'a', 'a', 'a', 'a', 'b', 'b']
['a', 'a', 'a', 'a', 'a', 'b', 'b', 'c'].... 
```

我需要：

```
['a', 'b', 'c', 'd', 'e', 'g', 'h', 'i', 'l', 'n', 'o', 'p', 'r', 's', 't', 'u', 'w', 'y'] 
```

没有错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:34:57.447

只需在添加之前检查该字母是否已在您的数组中：

```
for i in letter_str:
    if  not(i in Alist):
        Alist.append(i)
    print(Alist)) 
```

或者使用`Set`Python 提供的数据结构而不是数组。集合不允许重复。

```
aSet = set(letter_str) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T22:48:52.730

Malvolio 正确地指出答案应该尽可能简单。为此，我们使用 python 的`set`类型，它以最有效和最简单的方式处理唯一性问题。

但是，他的回答并未涉及删除标点符号和空格。此外，所有答案以及问题中的代码都非常低效（循环通过 badchar_str 并替换原始字符串）。

查找句子中所有唯一字母的最佳（即，最简单、最有效以及惯用的 Python）方法是：

```
import string

sentence_str = ("No punctuation should be attached to a word in your list, 
                e.g., end.  Not a correct word, but end is.")

bad_chars = set(string.punctuation + string.whitespace)
unique_letters = set(sentence_str.lower()) - bad_chars 
```

如果要对它们进行排序，只需将最后一行替换为：

```
unique_letters = sorted(set(sentence_str.lower()) - bad_chars) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T22:39:27.750

使用 itertools [ifilter](http://docs.python.org/2.7/library/itertools.html#itertools.ifilter)你可以说它有一个隐式的for循环：

```
In [20]: a=[i for i in itertools.ifilter(lambda x: x.isalpha(), sentence_str.lower())]

In [21]: set(a)
Out[21]: 
set(['a',
     'c',
     'b',
     'e',
     'd',
     'g',
     'i',
     'h',
     'l',
     'o',
     'n',
     'p',
     's',
     'r',
     'u',
     't',
     'w',
     'y']) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T22:40:29.413

[第一原则，克拉丽斯。简单。](http://www.youtube.com/watch?feature=player_detailpage&v=f33ieCWRWlI#t=7s)

```
list(set(sentence_str)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T22:39:08.840

如果您要打印的顺序无关紧要，您可以使用：

```
sentence_str = ("No punctuation should be attached to a word in your list, 
                e.g., end.  Not a correct word, but end is.")
badchar_str = string.punctuation + string.whitespace
for i in badchar_str:
    letter_str = letter_str.replace(i,'')
print(set(sentence_str)) 
```

或者，如果您想按排序顺序打印，您可以将其转换回列表并使用`sort()`，然后打印。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T22:53:59.683

您可以使用 set() 删除重复字符和 sorted()：

```
import string

sentence_str = "No punctuation should be attached to a word in your list, e.g., end.  Not a correct word, but end is."

letter_str = sentence_str 
letter_str = letter_str.lower()

badchar_str = string.punctuation + string.whitespace

for i in badchar_str:
    letter_str = letter_str.replace(i,'')

characters = list(letter_str);

print sorted(set(characters)) 
```

# clojure - 打嗝表单助手与 compojure

> ID：15191715
> 
> 赞同：4
> 
> 时间：2013-03-03T22:32:52.277
> 
> 标签：clojure, compojure, hiccup

异常：线程“主”java.io.FileNotFoundException 中的异常：无法在类路径上找到打嗝/form_helpers__init.class 或打嗝/form_helpers.clj：

我正在尝试启动并运行一个玩具组合应用程序。最初的应用来自 CloudBees 和他们的 Clojure/Compojure 的 ClickStart 应用。我正在尝试使用打嗝 form_helpers 添加一个简单的表单（它不会保留任何东西），但我得到了一个 ClassNotFound 异常。这是我所做的：

项目.clj：

```
(defproject mywebapp "0.1.0-SNAPSHOT"
:description "FIXME: write description"
:url "http://example.com/FIXME"
:dependencies [[org.clojure/clojure "1.4.0"]
             [compojure "1.1.1"]
             [hiccup "1.0.1"]]
:plugins [[lein-ring "0.7.3"]]
:ring {:handler mywebapp.routes/app}
:profiles
{:dev {:dependencies [[ring-mock "0.1.3"]]}}) 
```

意见.clj：

```
(ns mywebapp.views
(:use [hiccup core page]
    [hiccup form-helpers :only [form-to label text-area submit-button]]))
...
(defn shout-form []
[:div {:id "shout-form" }
 (form-to [:post "/form"]
        (label "shout" "What do you want to SHOUT?")
        [:br]
        (text-area "shout")
        [:br]
        (submit-button "SHOUT!"))])
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:49:05.033

啊，看起来我刚刚有一个打嗝形式的旧例子。form_helpers 来自以前的版本。

如果我从这里更改我的 views.clj 文件：

```
(:use [hiccup form-helpers]) 
```

看起来像这样：

```
(:use [hiccup form]) 
```

（虽然我没有测试过，但大概这会起作用）：

```
(:use [hiccup form :only [form-to label text-area submit-button]]) 
```

我不再收到错误消息。

澄清一下：这个包曾经被称为“form_helpers”，现在简称为“form”。

# php - Kohana 日志文件可写但权限被拒绝

> ID：15191716
> 
> 赞同：0
> 
> 时间：2013-03-03T22:32:57.210
> 
> 标签：php, kohana

我检查了 install.php，它给了我日志文件的绿灯。但是，我的应用程序收到一条错误消息

```
ErrorException [ 2 ]: file_put_contents(/my/app/path/logs/2013/03/04.php): failed to open stream: Permission denied ~ SYSPATH/classes/Kohana/Log/File.php [ 90 ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T10:44:23.973

我也面临同样的问题，我在下面的评论的帮助下解决了这个问题，使所有子目录都可写。

```
 chmod -R 777 cache/ logs/ 
```

这可能有助于未来的推荐人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:55:33.147

Even if `logs/` directory exists and have proper permissions set, it's subdirectories (like `logs/2013/` and `logs/2013/03`) could have improper permissions, for example due to some file copying or so... Be sure that **all** subdirectories allow **writting** for `user`/`group`/`other`.

# html - 可以将 css 从样式属性移动到类定义的编辑器/IDE

> ID：15191717
> 
> 赞同：0
> 
> 时间：2013-03-03T22:33:18.640
> 
> 标签：html, css

有谁知道具有转换能力的编辑器/IDE？

```
.my_class {
    color: black;
}

<span class="my_class" style="font-size: 200%;">test</span> 
```

至

```
.my_class {
    color:black;
    font-size: 200%;
}
<span class="my_class" style="">test</span> 
```

为什么我需要那个？通过属性更快地测试/更改样式，尤其是在有多个外部 css 文件的情况下。它应该集成在 IDE/编辑器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:32:46.097

[Sublime Text](http://www.sublimetext.com)有一个*正则表达式*选项，用于跨多个文件进行搜索和替换。我没有写任何东西，但如果你想经常使用它，我相信你可以把它变成一个插件。

* * *

**从内联 CSS 中删除：**

寻找：`(<.*class=".*(my_class).*".*style=".*)(font-size: ?200%;?)(.*">)`

代替：`\1\4`

**添加到样式表：**

寻找：`(\.my_class \{\n)((\s*)[^}]*\n)*\}`

代替：`\1\2\3font-size: 200%;\n\}`

# c++ - g++ 中的右值引用

> ID：15191718
> 
> 赞同：0
> 
> 时间：2013-03-03T22:33:19.560
> 
> 标签：c++

我正在将编译器从 Visual Studio 更改为 g++，并且在函数参数中通过引用传递存在一些问题。

在 Visual Studio 中，函数为：

```
void Foo(int&a, int&b) 
```

以便在此函数中修改 a、b。因此我不能在 g++ 中使用

```
void Foo(const int&a, const int &b) 
```

而且我的 g++ 中也不允许右值引用：

```
void Foo( int&& a, int&& b) 
```

那么使用指针是转换代码的唯一方法吗？

```
void Foo( int* a, int* b) 
```

P/S：这是使用 g++ 编译时的错误：

```
error: no matching function for call to ‘Steerable::buildSCFpyrLevs(Tensor<double, 2ul>, std::vector<Tensor<double, 2ul> >&, int&, int&, int&, bool&)’
Steerable.cpp:63:100: note: candidate is:
Steerable.h:93:7: note: void Steerable::buildSCFpyrLevs(Steerable::data_ref, std::vector<Tensor<double, 2ul> >&, int, int, int, bool)
Steerable.h:93:7: note:   no known conversion for argument 1 from ‘Tensor<double, 2ul>’ to ‘Steerable::data_ref {aka Tensor<double, 2ul>&}’ 
```

函数声明是：

```
typedef Tensor<value_type,2> data_type;
typedef data_type& data_ref;

vector<Steerable::data_type>& Steerable::buildSCFpyr(Steerable::c_data_ref im, int nLevel, int nDir, int twidth, bool subsample) 
```

有错误的行：

```
buildSCFpyrLevs(imdft.FreqComplexFilter(toComplex(lo0mask)),pyr_freq,nLevel,nDir,twidth, subsample); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:51:20.710

`FreqComplexFilter`可能不会通过引用返回。

**一个肮脏的修复：**

```
Tensor<double, 2> tempVal = imdft.FreqComplexFilter(toComplex(lo0mask));
buildSCFpyrLevs(tempVal, pyr_freq, nLevel, nDir, twidth, subsample); 
```

它很脏，因为它只是使代码编译，它没有解决底层设计问题（问题是为什么`buildSCFpyrLevs`要修改由返回的临时值`FreqComplexFilter`）。

# sunspot - 数组类型属性的太阳黑子刻面选项

> ID：15191724
> 
> 赞同：2
> 
> 时间：2013-03-03T22:33:58.927
> 
> 标签：sunspot, facet, sunspot-rails

我已经研究过这个问题，但没有发现任何问题。这就是为什么我决定问。Stackoverflow 对我来说是一个巨大的帮助。

我有一张`jobs`表，其中一个属性是位置。每个`job.location`都在纽约，波士顿，或两者（纽约和波士顿）。

在 sunspot solr for rails 中，如何为此属性创建构面，以便如果 a`job.location`在两个城市中，当在构面中选择纽约或波士顿时，该作业可以显示在结果中？

它应该像一个数组`['New York', 'Boston']`吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:16:46.940

您应该更改您的设计，以便拥有一个单独的 Location 类并将 Job 类设置为 have `has_and_belongs_to_many :locations`，因为它是多对多的关系。然后，您可以在 Job 类可搜索块中为该位置创建一个整数范围：

```
integer :locations, :multiple => true 
```

允许每个作业有多个位置。

现在很容易添加一个`facet(:locations)`可以完全满足您的要求。

以上适用于任意数量的位置，而不仅仅是两个。但是，如果您不想创建新的类/表并且确定只有 1 或 2 个位置，则可以只创建一个查询范围字段：

```
integer :locations, :multiple => true do
  if location == 'NY & Boston'
    ['NY', 'Boston']
  else
    [location]
  end
end 
```

# orientdb - OrientDB REST API 在与嵌入式服务器相同的 Web 应用程序上可用（使用相对路径）

> ID：15191726
> 
> 赞同：1
> 
> 时间：2013-03-03T22:34:01.863
> 
> 标签：orientdb

我正在编写一个用于分发的 Web 应用程序，它带有一个嵌入式 OrientDB，并且想知道您是否可以给我一些关于如何捆绑 OrientDB Studio 的线索，而不必使用内置的 Web 服务器。（这样做的原因是许多托管服务提供商不允许使用其他端口，因此仅通过部署应用程序就无法使工作室可用）这个想法是让 OrientDB 的 REST API 可从相对路径中使用我的网络应用程序，以便工作室可以与之通信，但我不知道从哪里开始寻找。首先，我需要知道如果不使用内置 Web 服务器上提供的侦听器，是否可以使 REST 协议可用，然后是否可以将工作室操作指向相对地址。

这似乎是其他人可能遇到过的问题，所以如果不是使用 OrientDB，也许使用其他可嵌入数据库遇到类似问题可能会对我有所帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:38:32.307

您可以在 Apache 中创建一个反向代理，以将地址“/orientdb”下的端口 80 绑定到 -> localhost:2480。

# python - 我的文本中的分隔符是什么

> ID：15191728
> 
> 赞同：1
> 
> 时间：2013-03-03T22:34:03.907
> 
> 标签：python, split

我有一个很长的凌乱文件，我的朋友告诉我他已经用制表符分隔了那个文件。但是当我这样做时：

```
 tokens = line.split("\t") 
```

它不分裂...

但我不知道我是否遗漏了一些东西。我的朋友似乎很确定他的文件是制表符分隔的。它看起来也像制表符分隔

样本文件

```
10      AccessibleComputing     0       381202555       2010-08-26T22:38:36Z    OlEnglish       7181920 #F3#    [[Help:Reverting|Reverted]] edits by [[Special:Contributions/76.28.186.133|76.28.186.133]] ([[User talk:76.28.186.133|talk]]) to last version by Gurch  #REDIRECT#F0#[[Computer#F0#accessibility]]#F0#{{R#F0#from#F0#CamelCase}}        lo15ponaybcg2sf49sstw9gdjmdetnk ,Computer_accessibility 
```

有没有办法知道python中的隐藏分隔符？

也许以另一种格式编码字符串....？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T22:43:40.413

只需在空格上拆分：

```
line.split() 
```

[`str.split()`](http://docs.python.org/2/library/stdtypes.html#str.strip)没有参数将在可变宽度空格上拆分，并根据需要删除前导和尾随空格。空白是任何制表符、空格、换行符或回车符：

```
>>> '10      AccessibleComputing     0       381202555       2010-08-26T22:38:36Z    OlEnglish       7181920 #F3#    [[Help:Reverting|Reverted]] edits by [[Special:Contributions/76.28.186.133|76.28.186.133]] ([[User talk:76.28.186.133|talk]]) to last version by Gurch  #REDIRECT#F0#[[Computer#F0#accessibility]]#F0#{{R#F0#from#F0#CamelCase}}        lo15ponaybcg2sf49sstw9gdjmdetnk ,Computer_accessibility'.split()
['10', 'AccessibleComputing', '0', '381202555', '2010-08-26T22:38:36Z', 'OlEnglish', '7181920', '#F3#', '[[Help:Reverting|Reverted]]', 'edits', 'by', '[[Special:Contributions/76.28.186.133|76.28.186.133]]', '([[User', 'talk:76.28.186.133|talk]])', 'to', 'last', 'version', 'by', 'Gurch', '#REDIRECT#F0#[[Computer#F0#accessibility]]#F0#{{R#F0#from#F0#CamelCase}}', 'lo15ponaybcg2sf49sstw9gdjmdetnk', ',Computer_accessibility'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:39:01.057

你能把制表符和空格弄乱或转换吗？也许在制表符和空格上分开会有所帮助

```
import re
re.split('\t|    ', line) 
```

# perltk - PerlTk 画布 + 像素操作

> ID：15191739
> 
> 赞同：1
> 
> 时间：2013-03-03T22:35:14.037
> 
> 标签：perltk

我在理解 PerlTk 中的图像类型如何工作时遇到了一些问题。

我基本上想要一种创建“空”图像（例如全白）然后操纵像素数据的方法。我需要能够将像素更改为黑色或白色。

我尝试了几种方法，但似乎没有一种方法有效。文档似乎非常稀缺且非常陈旧。这是我最接近的。

```
#args name, width, height, data
my $bitmap = $mw->DefineBitmap('cells', 1, 1, pack("b1", "1")); 

#args x-pos, y-pos, bitmap-name 
$canvas->createBitmap(0, 0, -bitmap => 'cells'); 
```

我的另一个想法是使用 Photo 元素，但我找不到任何关于如何使用“-data”选项创建一个的文档。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-04T08:11:19.190

`put()`如果必须设置单个像素，请使用该方法。这是一个完整的例子：

```
use Tk;
my $mw = tkinit;
my $p = $mw->Photo(-width => 100, height => 100);
my $l = $mw->Label(-image => $p, -border => 0)->pack;
for (0..99) {
    $p->put("#000000", -to => $_,$_);
    $p->put("#000000", -to => 100-$_,$_);
}
MainLoop; 
```

# php - PHP 验证一次显示所有错误

> ID：15191740
> 
> 赞同：0
> 
> 时间：2013-03-03T22:35:15.473
> 
> 标签：php, arrays, validation

我正在使用以下脚本进行验证。我想知道是否有办法将此脚本转换为一次显示所有错误而不是一次显示一个错误？另外，我还能做些什么来防止标头注入？

谢谢。

```
<?php

session_start();

/* Check all form inputs */
$fname   = check_input($_POST['fname'], "Friend's Name cannot be empty.");
$femail  = check_input($_POST['femail'], "Friend's email cannot be empty.");
$yname   = check_input($_POST['yname'], "Your Name cannot be empty.");
$yemail  = check_input($_POST['yemail'], "Your email cannot be empty.");
$subject  = check_input($_POST['subject'], "Subject cannot be empty.");
$comments  = check_input($_POST['comments'], "Comments cannot be empty.");

/*  alphabet only */
if(!preg_match("/^([A-Za-z\s\-]{2,45})$/i", $fname))
{ 
show_error("Friend's name is not valid.");
}

/* If e-mail is not valid show error message */
if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $femail))
{
show_error("Your friend's email address is not valid.");
}

if(!preg_match("/^([A-Za-z\s\-]{2,45})$/i", $yname))
{ 
show_error("Your name is not valid.");
}

/* If e-mail is not valid show error message */
if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $yemail))
{
show_error("Your email address is not valid.");
}

htmlentities ($message, ENT_QUOTES);

function check_input($data, $problem='')
{
$data = trim($data);
$data = stripslashes($data);
$data = htmlentities($data);
if ($problem && strlen($data) == 0)
{
    show_error($problem);
}
return $data;
}

function show_error($myError)
{
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:39:34.550

我经常做的是使用 $errors 数组。因此，您将在所有检查之前定义一个空数组，然后在每次检查 show_error 时将该字符串添加到您的错误数组中：

```
$errors[] = "Friend's name is not valid."; 
```

然后在最后，检查错误数组是否为空。如果是，那么就没有失败。否则，您现在有一个包含所有错误的数组，您可以随意显示。

# c++ - deque 的默认构造函数是否抛出？

> ID：15191741
> 
> 赞同：-1
> 
> 时间：2013-03-03T22:35:15.550
> 
> 标签：c++, stl, deque

（假设分配器的默认构造函数不抛出）

Deque 的[Boost 实现说：](http://www.boost.org/doc/libs/1_50_0/boost/container/deque.hpp)

> 如果 allocator_type 的默认构造函数抛出，则抛出

C++ 标准规定了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:46:41.770

C++11 标准（第 23.3.3.2 段）规定：

```
explicit deque(const Allocator& = Allocator()); 
```

> 1 效果：使用指定的分配器构造一个空的双端队列。
> 
> 2 复杂性：恒定。

而已。没有提到这个构造函数可能抛出或不抛出的条件，第 23 条（专用于序列容器）也没有指定任何一般的异常安全保证，构造函数本身也没有被标记为（有条件地）`noexcept`。

因此，人们必须假设它可以抛出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:47:31.743

`std::allocator``noexcept`正如它所说，s 的要求使它的构造函数`shall not exit via an exception`。但是，双端队列的构造函数可以抛出，因为它不是`noexcept`。

# javascript - 相机旋转指针锁控件

> ID：15191742
> 
> 赞同：2
> 
> 时间：2013-03-03T22:35:15.930
> 
> 标签：javascript, camera, three.js

我在这个项目中使用了 mrdoob 的 PointerLockControls.js 示例。一切正常，直到我改变

```
 camera.position.set(2, 2, 3 ); 
```

对此

```
 camera.position.set(1100, 150, -50 ); 
```

它似乎沿着 z 轴“旋转”，而不仅仅是看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:34:46.340

你需要这样做：

```
controls.getObject().position.set( 1100, 150, -50 ); 
```

这是因为巧妙的方式`PointerLockControls`处理相机移动。

# javascript - 多维 Javascript 数组/对象

> ID：15191743
> 
> 赞同：0
> 
> 时间：2013-03-03T22:35:17.883
> 
> 标签：javascript, multidimensional-array

我正在尝试在javascript中构造一个多维数组，到目前为止没有成功。我在 Stackoverflow 上阅读了其他一些帖子，并阅读/观看了有关该主题的教程，都对我有所帮助，但我无法让它发挥作用。

大多数时候我收到以下错误：

> 未捕获的 SyntaxError：意外的令牌

基本上，我有一个表格，我网站的访问者可以输入他们的年龄、血压、胆固醇以及他们是否吸烟。

```
riscTable = {      
'68': {    // AGE
    '170': {    // BLOODPRESSURE
                   // M, MS,  W, WS
        '275':     { 27, 48, 16, 30 },  // CHOLESTEROL
        '225':     { 22, 41, 13, 24 },  // CHOLESTEROL
        '175':     { 18, 34, 10, 20 },  // CHOLESTEROL
        '0':       { 15, 28, 8, 16 }    //  ...
    },
    '150': {
        '275':     { 20, 36, 11, 22 },
        '225':     { 16, 30, 9, 18 },
        '175':     { 13, 25, 7, 14 },
        '0':       { 10, 20, 6, 12 }
    },
    '130': {
        '275':     { 14, 27, 8, 15 },
        '225':     { 11, 22, 6, 13 },
        '175':     { 9, 18, 5, 10 },
        '0':       { 7, 15, 4, 8 }
    },
    '0': {
        '275':     { 10, 19, 5, 11 },
        '225':     { 8, 16, 4, 9 },
        '175':     { 6, 13, 3, 7 },
        '0':       { 5, 10, 3, 6 }
    }
},
'63': ...  // AGE
} 
```

我添加了注释标签以使我的数组结构更易于理解。

我想做的是用数学逻辑遍历键值（始终将最高值放在顶部）以确定结果。

**上面的代码示例：**

一位不吸烟的女性，65 岁（身高为 63，因此她属于 68 数组），血压为 150，胆固醇为 175，应返回值：**7**

我做错了什么来得到“Uncaught SyntaxError: Unexpected token”错误，我怎样才能让我的脚本在数组上运行以返回正确的结果，如上面的示例所示？

感谢您阅读我的问题，我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T22:40:39.173

包含实际值的代码部分正在尝试使用对象表示法。

```
'170': {    // BLOODPRESSURE
                   // M, MS,  W, WS
        '275':     { 27, 48, 16, 30 },  // Should be an array
        '225':     { 22, 41, 13, 24 },  // Should be an array
        '175':     { 18, 34, 10, 20 },  // Should be an array
        '0':       { 15, 28, 8, 16 }    //  ...
    }, 
```

把这些变成数组。

```
var riscTable = {      
'68': {    // AGE
    '170': {    // BLOODPRESSURE
                   // M, MS,  W, WS
        '275':     [ 27, 48, 16, 30 ],  // Is an array
        '225':     [ 22, 41, 13, 24 ],  // Is an array
        '175':     [ 18, 34, 10, 20 ],  // Is an array
        '0':       [ 15, 28, 8, 16 ]    //  ...
    },//Rest of object
}}; 
```

然后，您可以按如下方式访问这些值：

```
alert(riscTable['68']['170']['275'][0]);  //68 Year old male with bp of 170 and cholesterol of 275 
```

请注意，这不是多维数组。它是一个对象，具有分配给它们的其他对象的属性。只有最后一个属性 , `275`,`225`包含实际`175`的`0`数组。

我会犹豫将这个复杂的对象转换为数组，因为它会产生管理每个数组和后续嵌套数组的索引的需要。请记住，多维数组只不过是嵌套在数组中的数组。如果您采用这种方法，您将需要知道第一个索引对应于 68 岁的年龄范围，以及与其他年龄范围相关的索引以及胆固醇和血压等嵌套属性。

# iphone - 重复之前的 CAKeyframeAnimation 延迟

> ID：15191755
> 
> 赞同：34
> 
> 时间：2013-03-03T22:36:35.720
> 
> 标签：iphone, ios, core-animation, core-graphics

我有一个`CAKeyframeAnimation`动画，我想永远重复使用`repeatCount = HUGE_VALF`. 动画的持续时间为 2 秒，但我想在每个循环之前暂停 3 秒。

我能想到的唯一两种方法是：

1.  使整个动画持续 5 秒并添加额外的 keyTimes 和值，以便在 5 秒动画的最后 3 秒内获得我正在寻找的暂停。这感觉有点hacky。

2.  让动画只重复一次，然后添加使用类似的东西`performSelector:afterDelay:2`再次运行动画，依此类推。这也感觉很脏。也意味着我需要`addAnimation:`每 5 秒调用一次，我不确定这在性能方面是否最佳。

我可能会错过其他选择吗？这两种方法中的一种是否比另一种更好？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-03-03T23:39:47.590

通过转储 Apple 的动画`MKUserLocationView`，我能够看到他们是如何做到的。原来这是`CAAnimationGroup`为了这个。通过将 2 秒的动画封装到 5 秒的动画组中，您将得到一个 2 秒的动画，然后是 3 秒的延迟：

```
CAAnimationGroup *animationGroup = [CAAnimationGroup animation];
animationGroup.duration = 5;
animationGroup.repeatCount = INFINITY;

CAMediaTimingFunction *easeOut = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];

CABasicAnimation *pulseAnimation = [CABasicAnimation animationWithKeyPath:@"transform.scale.xy"];
pulseAnimation.fromValue = @0.0;
pulseAnimation.toValue = @1.0;
pulseAnimation.duration = 2;
pulseAnimation.timingFunction = easeOut;

animationGroup.animations = @[pulseAnimation];

[ringImageView.layer addAnimation:animationGroup forKey:@"pulse"]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-12T01:57:31.727

samvermette 在 Swift 3 中的回答：

```
let animationGroup = CAAnimationGroup()
animationGroup.duration = 5;
animationGroup.repeatCount = .infinity

let easeOut = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseOut)

let pulseAnimation = CABasicAnimation(keyPath: "transform.scale.xy")
pulseAnimation.fromValue = 0
pulseAnimation.toValue = 1.0
pulseAnimation.duration = 2
pulseAnimation.timingFunction = easeOut

animationGroup.animations = [pulseAnimation]

ringImageView.layer.add(animationGroup, forKey: "pulse") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-17T00:33:09.757

**在 Swift 4.2 上测试**

只需实现以下扩展，然后您就可以在任何 UI 组件上获得漂亮的脉冲动画

```
//MARK:- Pulse animation
extension UIView {

    func applyPulse(_ apply: Bool = true) {
        if apply {
            let animation = CABasicAnimation(keyPath: "transform.scale")
            animation.toValue = 1.5
            animation.duration = 0.8
            animation.timingFunction = CAMediaTimingFunction(name: CAMediaTimingFunctionName.easeOut)
            animation.autoreverses = true
            animation.repeatCount = Float.infinity
            self.layer.add(animation, forKey: "pulsing")
        } else {
            self.layer.removeAnimation(forKey: "pulsing")
        }
    }
} 
```

用法：

1.  开始

    yourUiComponent.applyPulse()

2.  停止

    yourUiComponent.applyPulse(false)

# objective-c - AFNetworking 请求超时但仍完成请求

> ID：15191758
> 
> 赞同：1
> 
> 时间：2013-03-03T22:36:50.227
> 
> 标签：objective-c, cocoa-touch, file-upload, afnetworking

我正在通过 AFNetworking 将许多文件上传到我的服务器，无论是许多小文件还是几个大文件，但一次上传的文件总数从未超过 250MB。为了在我退出应用程序或关闭 iPhone 时继续上传，我说：

```
 [operation setShouldExecuteAsBackgroundTaskWithExpirationHandler:^{
        NSLog(@"Request time out");
    }]; 
```

我的问题是我的上传可能需要大约 10-20 分钟才能完成，即使我的所有文件都已上传，完成后我会收到“请求超时”消息。任何人都知道到底发生了什么以及我应该做些什么来解决这个问题？

```
NSMutableURLRequest *apiRequest =
[self multipartFormRequestWithMethod:@"POST"
                                path:kAPIPath
                          parameters:params
           constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
               //attach file if needed
               if (uploadFile) {
                   [formData appendPartWithStreamingURL:uploadFile
                                               name:@"file"
                                           //fileName:[params objectForKey:@"title"] //Change to test.mp4 or .m4v I'm not sure
                                           mimeType:@"video/quicktime"]; //Change to video/quicktime
               }
           }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:37:41.227

您发布的第一个代码块注册了一个后台任务到期处理程序，无论您的请求是否完成，都会调用该处理程序。

如果请求尚未完成，您应该签入该块，以便稍后重试。

# jquery - 如何将 2 个或多个 jquery keydown 函数组合成一个函数？

> ID：15191764
> 
> 赞同：1
> 
> 时间：2013-03-03T22:38:02.777
> 
> 标签：jquery, html

**我的目标：**

通过使其成为一项功能来清理导致同一按钮按下的多个 keydown 功能。

**我的问题：**

***我做了很多这样的功能：***

```
$("#username").keydown(function(event){
    if(event.keyCode == 13) {
        $('#loginbtn').click();
    };
});
$("#password").keydown(function(event){
    if(event.keyCode == 13) {
        $('#loginbtn').click();
    };
}); 
```

那个触发按钮点击按钮。它太乱了，使用了很多行。我想将这些线条组合成一个功能。我的注册表也有很多盒子。

**我尝试了什么？**

**1.** ***我尝试了以下代码和其他不起作用的复制：***

```
$("#username","#password").keydown(function(event){
    if(event.keyCode == 13) {
        $('#loginbtn').click();
    };
}); 
```

**2.** ***我的另一个想法是使用一个类，我只是不知道这是否被认为是“正确”的方式，所以我需要意见：***

```
$(".logintextbox").keydown(function(event){
    if(event.keyCode == 13) {
        $('#loginbtn').click();
    };
}); 
```

然后我还会在我的 html 中添加该类，以便所有登录文本框和所有注册文本框都有唯一的类“分组”它们。

**我的问题/tl；博士：**

*如何使用多个 id 或一个类将 2 个或多个 jquery keydown 函数组合成一个函数？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:43:44.023

我建议从您的表单中委派而不是单个元素。

```
$("#your_form_id").on('keydown', 'input', function(event){
    if(event.keyCode == 13) {
        $('#loginbtn').click();
    };
}); 
```

这将捕获表单中所有输入上按下的键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T22:39:49.947

选择多个元素。`$('#username, #password')`. 第二个参数`$`是上下文。

# c - 2 的补码中的 16 位值，令人困惑

> ID：15191768
> 
> 赞同：0
> 
> 时间：2013-03-03T22:38:16.770
> 
> 标签：c, raspberry-pi, gyroscope

我正在从陀螺仪读取数据，我得到的数据很好，但值不符合预期。我认为这是由于我在四处寻找解决方案后编码错误所致，我在[此处发表](https://electronics.stackexchange.com/questions/39024/how-do-i-get-gyro-sensor-data-l3g4200d-into-degrees-sec)了一篇文章，其中指出：

> 确保正确读取输出寄存器，数据是 2 的补码中的 16 位值（即 MSB 是符号位，然后是 15 位的值）

这让我很困惑，我不确定我的编码是否按预期读取值。我正在使用`wiringPi`I2C 库将 Arduino 的现有代码转换为在 Raspberry Pi 上运行。我在下面有我的代码我希望有人能告诉我他们是否看到正确尝试读取 2 的恭维中的 16 位值。在`getGyroValues`函数内部是我唯一能看到这种情况发生的地方。我的代码是否正确读取了这些值？

```
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdint.h>
#include <time.h>

#include <wiringPi.h>
#include <wiringPiI2C.h>

#define CTRL_REG1 0x20
#define CTRL_REG2 0x21
#define CTRL_REG3 0x22
#define CTRL_REG4 0x23

int fd;
int x = 0;
int y = 0;
int z = 0;
int main (){

    fd = wiringPiI2CSetup(0x69); // I2C address of gyro
    wiringPiI2CWriteReg8(fd, CTRL_REG1, 0x1F); //Turn on all axes, disable power down
    wiringPiI2CWriteReg8(fd, CTRL_REG3, 0x08); //Enable control ready signal
    wiringPiI2CWriteReg8(fd, CTRL_REG4, 0x80); // Set scale (500 deg/sec)
    delay(100);                    // Wait to synchronize

void getGyroValues (){
    int MSB, LSB;

    LSB = wiringPiI2CReadReg16(fd, 0x28);
    MSB = wiringPiI2CReadReg16(fd, 0x29);
    x = ((MSB << 8) | LSB);

    MSB = wiringPiI2CReadReg16(fd, 0x2B);
    LSB = wiringPiI2CReadReg16(fd, 0x2A);
    y = ((MSB << 8) | LSB);

    MSB = wiringPiI2CReadReg16(fd, 0x2D);
    LSB = wiringPiI2CReadReg16(fd, 0x2C);
    z = ((MSB << 8) | LSB);
}

    for (int i=0;i<10;i++){
    getGyroValues();
    // In following Divinding by 114 reduces noise
    printf("Value of X is: %d\n", x / 114);
    printf("Value of Y is: %d\n", y / 114);
    printf("Value of Z is: %d\n", z / 114);
    int t = wiringPiI2CReadReg8(fd, 0x26);
    t = (t*1.8)+32;//convert Celcius to Fareinheit
    int a = wiringPiI2CReadReg16(fd,0x2B);
    int b = wiringPiI2CReadReg16(fd,0x2A);
    printf("Y_L equals: %d\n", a);
    printf("Y_H equals: %d\n", b);
    int c = wiringPiI2CReadReg16(fd,0x28);
    int d = wiringPiI2CReadReg16(fd,0x29);
    printf("X_L equals: %d\n", c);
    printf("X_H equals: %d\n", d);
    int e = wiringPiI2CReadReg16(fd,0x2C);
    int f = wiringPiI2CReadReg16(fd,0x2D);
    printf("Z_L equals: %d\n", e);
    printf("Z_H equals: %d\n", f); 

    printf("The temperature is: %d\n\n\n", t); 
    delay(500);
}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:44:50.167

以下是您可以轻松地将最高有效字节和最低有效字节组合的方法，将 2 的补码 16 位整数的一半表示为 int：

```
int Bytes2Short(unsigned char msb, unsigned char lsb)
{
  long t = msb * 0x100L + lsb;
  if (t >= 32768)
    t -= 65536;
  return (int)t;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T02:44:49.693

为了清楚起见，请使用 Alexey Frunze 的方法，但这里有一个没有测试的版本（在某些情况下可以编译为更快的内联代码）。此模式也适用于其他大小的无符号位模式——例如，处理 12 位整数，使用`0x0800`，对于 17 位整数，使用`0x10000`等等。

我将它与一个小驱动程序捆绑在一起`main`以显示输出。

```
#include <stdio.h>

int comb(unsigned char msb, unsigned char lsb) {
        long t = ((long)msb << 8) | lsb;
        if (t >= 32768)
                t -= 65536;
        return t;
}

int comb2(unsigned char msb, unsigned char lsb) {
        unsigned long t = ((unsigned long)msb << 8) | lsb;
        t ^= 0x8000UL;
        return (int)((long)t - (long)0x8000);
}

int main(void) {
        printf("%6s %6s\n", "comb", "comb2");
        printf("%6d %6d\n", comb(0, 0), comb2(0, 0));
        printf("%6d %6d\n", comb(127, 255), comb2(127, 255));
        printf("%6d %6d\n", comb(128, 0), comb2(128, 0));
        printf("%6d %6d\n", comb(255, 255), comb2(255, 255));
        return 0;
} 
```

# jquery - jQuery Countdown 仅对正在变化的动画进行动画处理

> ID：15191770
> 
> 赞同：0
> 
> 时间：2013-03-03T22:38:37.020
> 
> 标签：jquery, jquery-countdown

我正在尝试使用以下插件： http: [//keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

我正在尝试仅在数字更改的情况下为块设置动画（使用 CSS）：每秒秒块，每分钟分钟块等。

问题是插件每秒都会将所有计数器 HTML 再次附加到容器中。所以我应该需要一个`.changed`类或块上当前已在当前第二个更改的东西。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-11T09:34:28.447

```
$("your_counter").countdown({
    /* your settings */
    onTick: tickHandler
    }

var tickStorage = [0,0,0,0,0];
function tickHandler(data){
    $(".countdown-amount").each(function(index){
        if(this.innerText !== tickStorage[index]){
            $(this).parent().addClass("changed")
        } else {
            $(this).parent().removeClass("changed")
        }
        tickStorage[index] = this.innerText
    })
} 
```

也许有点像这样？

# sencha-touch-2 - 如何使用 deviceType=Tablet 在包含 Cordova 的桌面上进行测试？

> ID：15191771
> 
> 赞同：0
> 
> 时间：2013-03-03T22:38:43.820
> 
> 标签：sencha-touch-2, cordova, sencha-touch-2.1

在 desktopC 上的 Sencha Touch 2.1 应用程序上进行测试时，您可以附加`deviceType=Phone`或 deviceType=Tablet 来模拟不同的设备类型。`/index.html?deviceType=Tablet`如果您的 Sencha Touch 2.1 项目中不包含 Cordova，这可以正常工作。但是，当包含cordova（PhoneGap）时，它不会去任何地方并且卡在加载屏幕上而没有任何错误消息。

无论如何在包含 Cordova 的桌面上进行测试？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:01:21.877

使用包含重定向页面的脚本创建一个测试版本：

`document.location.ref=app.html?deviceType=Tablet;`

也就是把它放在一个 js 文件中并包含该文件。

# php - PHP 将 HTML 编码和解码为二进制

> ID：15191772
> 
> 赞同：0
> 
> 时间：2013-03-03T22:38:46.953
> 
> 标签：php, html, postgresql, base64

我使用的数据库是 Postgresql，我下载了一个网页并存储在一个 BLOB 中。像这样：

```
<?php
$html = file_get_contents('http://www.example.com');
$encoded_html = base64_encode($html);

//Store encoded data in blob in database
?> 
```

那部分工作正常。但是当我尝试对其进行解码并显示它时，它会出现 garabled。

```
<?php echo base64_decode($encoded_html); ?> 
```

编码和解码数据时是否必须添加额外的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:44:41.980

如果这可行，则编码/解码功能可以正常工作

```
<?php
$html = file_get_contents('http://www.example.com');
$md5 = md5($html);
$encoded_html = base64_encode($html);
$decoded_html = base64_decode($encoded_html);
echo (md5($decoded_html) == $md5) ? 'OK' : 'FAIL';
echo PHP_EOL; 
```

如果不是，那么我建议将您放入数据库的 base64 数据与输出的数据进行比较。

# google-apps-script - Google 表格脚本执行过时的版本。我怎样才能让工作表加载最新的脚本？

> ID：15191773
> 
> 赞同：0
> 
> 时间：2013-03-03T22:38:52.150
> 
> 标签：google-apps-script, google-sheets

我正在编写一个脚本以使用 onOpen() 触发器从 Google 电子表格中的菜单项执行。我正在使用电子表格菜单中的脚本编辑器。我已经为此工作了几天，添加功能并通过菜单执行来尝试它们。今天，我的脚本更改并未反映在我执行添加的菜单选择时发生的情况。旧版本的脚本似乎已嵌入工作表中，当我将脚本更改保存在脚本编辑器中时，它永远不会更新。我尝试关闭所有内容并重新打开浏览器，然后重新打开电子表格，但旧代码继续执行。

如何将更新的代码连接到电子表格并返回将代码保存在编辑器中使电子表格能够访问更新的代码的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:46:20.623

我已经制作了我的代码文件的副本，并且正在运行的是该副本。显然，它一定是愚蠢的，而且确实如此。

# html - 接下来我应该学什么？在 HTML 和 CSS 之后

> ID：15191775
> 
> 赞同：0
> 
> 时间：2013-03-03T22:39:04.727
> 
> 标签：html, css, web

我的梦想是学习如何建立一个像[funcage.com](http://funcage.com)这样的网站——这是一个有趣的图片网站，但我希望用户可以注册和上传他们自己的图片、为这些图片投票、对它们发表评论等。

所以，无论如何，我花了一年多的时间学习和试验 HTML 和 CSS 经历了 nettuts HTML 和 CSS 课程，我已经建立了一些我很满意的小型项目网站，我想学习如何接近我的梦想。

你下一步怎么做？我已经研究过了，如果你知道我接下来应该学习什么，请给我一些好的资源:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:43:52.430

下一个合乎逻辑的步骤（在我看来）是[PHP](http://php.net/)。

大多数现代网站，例如图片托管网站，都是基于[PHP](http://php.net/)或[ASP.NET](http://www.asp.net/)构建的。这使它能够根据用户的交互“动态”更改您看到的内容。

您需要的另一件事是数据库。[MySQL](http://www.mysql.com/)是很多人喜欢的一种常见的免费软件（它现在归甲骨文所有）。

如果您使用的是 Windows PC，则可以通过下载[Xampp](http://www.apachefriends.org/en/xampp.html)开始，它是一个简单的安装程序，可让您开始使用 PHP 和 MySQL。它还包含流行的网络服务器[Apache](http://httpd.apache.org/)。

我也同意其他人对[JavaScript](http://en.wikipedia.org/wiki/JavaScript)的回答——它现在是一个非常广泛使用的东西......但我认为作为初学者，你应该看看一些 PHP 教程。

Apache、PHP 和 MySQL 都是开源软件。您会惊讶于您的图片网站运行速度有多快！关于如何连接到数据库等的小教程，都很快发展成更大的东西。

PHP[手册](http://www.php.net/manual/en/index.php)是寻找如何使用特定函数的好地方，而且一如既往，[Google 是您的朋友](https://www.google.co.uk/search?q=connect%20to%20mysql%20database%20php&aq=f&oq=connect%20to%20mysql%20database%20php&aqs=chrome.0.57j0l3j62l2.8638&sourceid=chrome&ie=UTF-8)！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T22:48:05.740

HTML 和 CSS 仅用于结构和演示。您需要某种服务器端语言来动态生成 HTML 并将数据存储在数据库中。

有*大量*的服务器端语言可用，但最常见的是：

*   Python
*   红宝石
*   PHP
*   节点.JS
*   ASP.NET

[除了服务器端语言之外，您还将从学习 JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Guide)中获益良多。我会从 JavaScript 开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T22:41:10.287

合乎逻辑的下一步将是javascript

[Mozilla 开发人员](https://developer.mozilla.org/en-US/docs/JavaScript/Guide)

**附加说明**

使用node.js作为后端，只需要多学一门语言——Javascript——客户端和服务器端

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-03T22:42:19.800

如果您不专注于网络。Python是你可以考虑的。

# .net - 为测试用户设置生日

> ID：15191776
> 
> 赞同：1
> 
> 时间：2013-03-03T22:39:05.130
> 
> 标签：.net, facebook, facebook-graph-api

是否可以使用 SDK 或 API 更改测试用户的生日？正如我在这里看到的，不能修改生日：http: [//developers.facebook.com/docs/reference/api/publishing/](http://developers.facebook.com/docs/reference/api/publishing/)

测试用户也是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:27:56.483

是的，这对用户也是如此。

为什么 API 允许测试用户更改他们的生日日期而普通用户不能，因为测试用户的目标是测试和自动化普通用户的行为？

另外，如果测试用户可以通过 API 修改他们的生日日期，这对您有什么用处？

# javascript - 与 InAppBrowser 在 Phonegap 中等效的 window.close

> ID：15191793
> 
> 赞同：17
> 
> 时间：2013-03-03T22:40:40.343
> 
> 标签：javascript, android, cordova

我打开一个新页面`window.open("apphelp.html", "_blank", "location=no")`，然后它向我显示一个带有我的页面的新窗口。在这个页面的最后，我想放一个“关闭按钮”，这样用户就可以回到他们来自的地方。我试过了，`window.close()`但没有用。有什么建议么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-12T22:39:32.863

我使用了一种解决方法......因为只能使用后退按钮或通过 javascript 来关闭 inAppBrowser。我从服务器端显示一个关闭按钮，该按钮将更改当前的 url 触发以及事件 'loadstop' 让使用 .close() 方法，这样只有子浏览器将被关闭，您的应用程序将保持在相同的状态。

例如，我的服务器显示一个带有关闭按钮的网页，如下所示：

```
<a href="/mobile/close">Close</a> 
```

在我的客户端 javascript（Phonegap 应用程序）中：

```
var ref = window.open(encodeURI(url), '_blank', options);
ref.addEventListener('loadstop', function(event) {        
    if (event.url.match("mobile/close")) {
        ref.close();
    }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-10T03:27:03.650

我这样转换为多平台支持：</p>

**在第三页html和js**

```
closeBrowser(){
    if(history.length==1){
        window.open('mobile/close');
    }else{
        history.back();
    }
}

<a href="javascript:;" onclick="closeBrowser()">Close</a> 
```

**在我的客户端 javascript（Phonegap 应用程序）中：**

```
var ref = window.open(encodeURI(url), '_blank','location=no');
 ref.addEventListener('loadstart', function(event) {
     if (event.url.match("mobile/close")) {
         ref.close();
     }
 }); 
```

谢谢一楼！

# android - 为什么我的查看器返回空白视图？

> ID：15191794
> 
> 赞同：0
> 
> 时间：2013-03-03T22:40:46.463
> 
> 标签：android, android-viewpager

我有一个浏览器，用作杂志电子阅读器应用程序中的主要导航元素。我已经为每篇文章定义了一个扩展为“封面页”的布局，这些都显示得很好。但是，我想增加一个不同的布局，以在每 6 次查看时显示一个广告。所以，在 viewpager 适配器的 instantiateItem 方法上，我有以下语句`if ((position != 0) && (position%6 == 0) && (adsShown < ads.size()))`：该程序启动良好，并且文章视图正确膨胀。但是，当我到达应该显示广告的位置时，视图是空白的。为什么是这样？

这是 instantiateItem 方法的完整代码：

```
 @Override
    public Object instantiateItem(View arg0, int position) {

        if ((position != 0) && (position%2 == 0) && (adsShown < ads.size())){
            View v = getLayoutInflater().inflate(R.layout.adview, null);

            ImageView adImg = (ImageView)v.findViewById(R.id.adImage);
            adImg.setImageBitmap(ads.get(adsShown).image);
            v.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {

                    Intent intent = new Intent();
                    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(ads.get(adsShown).linkURL));
                    startActivity(browserIntent);
                }
            });
            adsShown++;         
            System.out.println("ADSSHOWN" + adsShown);
            return v;
        }

        else{   

    Article s = toShow.get(position-adsShown);

    View v = getLayoutInflater().inflate(R.layout.previewpage, null);

    TextView hl = (TextView)v.findViewById(R.id.coverHl);
    ImageView img = (ImageView)v.findViewById(R.id.coverImg);
    TextView blurb = (TextView)v.findViewById(R.id.coverBlurb);
    TextView author = (TextView)v.findViewById(R.id.coverAuthor);
    TextView bot = (TextView)v.findViewById(R.id.coverBot);

    hl.setText(s.title);
    img.setImageBitmap(s.image);
    blurb.setText(Html.fromHtml(s.excerpt));
    author.setText("by "+ s.author.name);           
    bot.setText(s.cats.get(0).name + "   //   " + s.date);

    v.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent intent = new Intent();
            Article topass = showing;
           // System.out.println("XXYYZZAA: " + topass.headline);
            intent.setClassName("com.calib.caliber", "com.calib.caliber.ArticleView");
    //      intent.putExtra("title", topass.title);
            intent.putExtra("a", topass);
    //      intent.putExtra("author", topass.author.name);
        //  intent.putExtra("content", topass.content);
    //      intent.putExtra("id", topass.ID);

            startActivityForResult(intent, 1);              
        }
    });

    ((ViewPager) arg0).addView(v);

    return v;
        }
} 
```

这是 adview 活动的 XML 布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:background="#000000">

<TextView
    android:id = "@+id/adText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text = "advertisement"
    android:textColor="#FFFFFF"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"></TextView>

<ImageView
    android:id = "@+id/adImage"
    android:layout_width="match_parent"
    android:layout_height="match_parent"     
    android:layout_below = "@id/adText">
   </ImageView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:47:00.210

我认为您忘记了`((ViewPager) arg0).addView(v);`if() 第一部分中的 if () 而 else 包含它。

# javascript - 在 Javascript 中导出为 CSV

> ID：15191795
> 
> 赞同：0
> 
> 时间：2013-03-03T22:40:49.947
> 
> 标签：javascript, csv

我的网络应用程序中有一个要求，我必须将 html 表中的数据导出到 csv 文件。html 数据表是使用[Datatables](http://datatables.net/)插件编写的。

为上述数据表提供了一个[表格工具，它在客户端执行 CSV、PDF、XLS 导出。](http://datatables.net/extras/tabletools/)缺点是上面的插件使用了flash，这不是一个好的解决方案。

我还在[这里查看了另一种基于纯 JavaScript 的客户端解决方案](https://gist.github.com/syntagmatic/2202660)

这似乎不起作用，因为我无法指定文件名。

在搜索论坛上，我了解到在纯 javascript 中我将无法创建文件并命名它。（我猜一旦所有浏览器都发展/接受 HTML5 标准，HTML5 中的文件系统 API 可能会解决这个问题）

鉴于这种情况，我很好奇以下是否可能：

1.  要在我的客户端导出的数据
2.  我可以对我的服务器进行 ajax 调用以获取一个空白的 csv 文件并在客户端对其进行操作并将其附加到我在客户端拥有的数据中吗？

除了上面提出的解决方案和纯服务器端方法之外，还有其他可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T14:26:23.060

我认为更好的*混合*解决方案将涉及一个通用的服务器端 csv 生成脚本，通过简单的重定向（ GET 参数）或表单提交（POST 参数）。

使用 GET 参数，您可以避免更改内容结构（即不需要表单和输入）并使用纯 JavaScript*序列化脚本*来调用您的 csv 生成器。

顺便说一句，如果您真的不想弄乱服务器端，Flash 和 HTML5 是唯一可用的解决方案。

# eclipse - Eclipse IDE 设计问题

> ID：15191799
> 
> 赞同：0
> 
> 时间：2013-03-03T22:41:10.373
> 
> 标签：eclipse, windows-8, eclipse-juno

我的日食遇到了一些问题。我希望你能给我一些建议。我喜欢深色主题，所以我找到了[Eclipse Color Themes 插件](http://eclipsecolorthemes.org/)，这很酷，但它只使编辑器窗口变暗，但我想要完整的深色主题。不仅编辑视图。这取决于什么？（我的操作系统是 Windows 8）

[说明性屏幕](http://prntscr.com/uxd2m)

第二个想法是设置工具栏。我试图隐藏一些我从未使用过的功能（fe“快速访问”）。所以我打开 Window->Customize Perspective，取消选中我不想要的，然后点击确定。但什么也没发生。我试图重新启动eclipse，但仍然没有改变。当我打开自定义透视窗口时，仍然检查所有内容。这会一次又一次地发生。有任何想法吗？

[说明性屏幕 2](http://prntscr.com/uxd7l)

我为我的英语道歉:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-07T13:08:36.917

这很简单，只是不要使用eclipse。

# jakarta-ee - apache tile 3 - 如何访问会话范围

> ID：15191800
> 
> 赞同：2
> 
> 时间：2013-03-03T22:41:39.303
> 
> 标签：jakarta-ee, tiles, session-scope

我想使用 ViewPreparer 来修改布局菜单，具体取决于会话范围。我不知道如何访问会话范围。在视图准备器中，我实现了这样的方法：

```
public void execute(Request tilesContext, AttributeContext attributeContext) 
```

我花了很多时间尝试访问会话但没有成功。我设法访问的唯一与会话相关的东西是`tilesContext.getAvailableScopes()`. 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T14:06:42.990

请试试这个：

```
public void execute(Request tilesContext, AttributeContext attributeContext){

HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();

HttpSession session = request.getSession();

// your code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T05:27:53.790

```
public void execute(Request tilesContext, AttributeContext attributeContext){

    Map<String, Object> request = tilesRequest.getContext("request");

    request.get("{attributeName}"); // this will return your object in request

} 
```

如果您想获取会话属性，您可以将请求更改为会话。

# android - 总是在后台运行线程/进程？

> ID：15191804
> 
> 赞同：0
> 
> 时间：2013-03-03T22:41:51.607
> 
> 标签：android

在这一点上，我不是 100% 了解 Android 生命周期。我想运行一个进程/线程，我不确定这里的正确术语，手机一直处于开启状态，并且它在没有用户激活应用程序的情况下运行。对于我正在开发的游戏的一部分，我想定期将用户的粗略位置传输回服务器，并从服务器获取一些数据。在android中解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:44:21.533

你必须看看Android服务。[在这里](http://developer.android.com/reference/android/app/Service.html)你可以找到关于这个主题的很好的介绍。

此外，为了检测用户何时插入/拔出耳机，您必须使用`BroadcastReceiver`. [这里](https://stackoverflow.com/questions/6249023/detecting-whether-a-headset-is-plugged-in-or-not)已经是关于这个的话题了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:54:10.243

如果此后台进程所做的工作不仅仅是上传位置，那么@niculare 的答案确实是正确的。

但是，如果这个后台进程唯一能做的就是这个上传，那么有更多的电池效率方法可以做到这一点。您可以创建一个[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)来接收来自系统的位置更新并进行上传。如果你在上传前需要一些小的处理，你甚至可以从 BroadcastReceiver 启动一个服务，然后服务将处理数据，上传完成。

同样对于这两种情况，您可能需要一个 BroadcastReceiver 来接收`OnBoot`广播，知道移动设备刚刚启动，并注册这些东西。

**小更新** 您注册[此方法以使用](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates%28long,%20float,%20android.location.Criteria,%20android.app.PendingIntent%29)[此侦听](http://developer.android.com/reference/android/location/LocationListener.html)器进行位置更新

# c# - 当行的字节位置已知时，从 C# 中的文件中删除一行文本

> ID：15191808
> 
> 赞同：4
> 
> 时间：2013-03-03T22:42:20.193
> 
> 标签：c#, buffer, filestream

我有一个大文本文件 (>2gb)。我目前正在使用 Filestream 以 1kb 的块读取文件。在每个块中，我计算行数并使用此计数在文件中找到必须删除行的位置。

例如，如果我要删除的行的字节位置是 4097，那么在 C# 中有没有办法可以删除从 4097 开始的行中的字符，直到我遇到 \n 字符。

我在看 Filestream.Seek() 方法直接去删除位置。但是，我不确定如何进一步进行。

因为它是一个大文件，所以我不想创建另一个会消耗大量系统空间和内存的文件。有没有一种有效的方法可以在不创建新文件的情况下删除该行。

任何建议和帮助将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:10:59.843

我觉得缩短文件的唯一方法是真正复制其中一些，然后跳过，然后复制其余部分。如果您真的需要就地执行，您可以选择某种形式的**逻辑删除**。例如，您可以仅使用 LF 对文本文件中的新行进行编码（这*不是*Windows 上的默认设置，而是使用一对 CR-LF），这很可能需要 8 位 ASCII 并选择类似这样的内容：

```
 public static void LogicalEraseLine(string filename, int toDel)
    {
        FileStream fs = new FileStream(filename, FileMode.Open, FileAccess.ReadWrite);

        fs.Seek(toDel, SeekOrigin.Current);
        int c;

        while ((c = fs.ReadByte()) != -1)
        {
            if (c == '\n')
            {
                break;
            }
            else
            {
                fs.Seek(-1, SeekOrigin.Current);
                fs.WriteByte((byte)'\n');
            }
        }

        fs.Close();
    } 
```

注意**toDel**是要删除的*第一个字符*的索引，而不是要删除的行的索引。这段代码只是用相同数量的空行替换了**toDel 处**和行尾之间的所有字符。然后你需要另一个函数将文件复制到另一个文件，但跳过所有空行。您可以在将来任何方便的时间进行此*清理。*不过，您的实际算法需要能够处理文件中的大量空白行。此外，您应该分块读取文件是对的，但是在这种情况下也可以应用此示例中显示的基本思想。

**编辑** 您可以使用此功能擦除逻辑删除的行：

```
 public static void Cleanup (string filename)
    {
        FileStream input = new FileStream(filename, FileMode.Open, FileAccess.Read);
        FileStream output = new FileStream(filename + ".tmp", FileMode.Create, FileAccess.Write);

        bool emptyLine = true;
        int c;

        while ((c = input.ReadByte()) != -1)
        {
            if (c == '\n')
            {
                if (!emptyLine)
                {
                    output.WriteByte((byte)c);
                    emptyLine = true;
                }
            }
            else
            {
                output.WriteByte((byte)c);
                emptyLine = false;
            }
        }

        input.Close();
        output.Close();

        File.Delete (filename);
        File.Copy(filename + ".tmp", filename);
        File.Delete(filename + ".tmp");
    } 
```

此外，在删除文件时，最好*非常*小心并仔细检查可能出错的所有内容。

**编辑** 第一个算法有点没有意义，因为我还在阅读整个文件；现在它是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:58:34.610

处理大文件最有效的方法是使用[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)。这样做的好处是您不需要读取整个文件，修改它然后再次写入，您只需修改数据中感兴趣的部分即可。将 4097 设置为偏移量并加载大约 100 KB。这个来自 MSDN 的示例应该可以帮助您入门。

```
long offset = 0x10000000;  
long length = 0x20000000; // 512 megabytes 

// Create the memory-mapped file. 
using (var mmf = MemoryMappedFile.CreateFromFile(@"c:\ExtremelyLargeImage.data", FileMode.Open,"ImgA"))
{
    // Create a random access view, from the 256th megabyte (the offset) 
    // to the 768th megabyte (the offset plus length). 
    using (var accessor = mmf.CreateViewAccessor(offset, length))
    {
        int colorSize = Marshal.SizeOf(typeof(MyColor));
        MyColor color;

        // Make changes to the view. 
        for (long i = 0; i < length; i += colorSize)
        {
            accessor.Read(i, out color);
            color.Brighten(10);
            accessor.Write(i, ref color);
        }
    }
} 
```

# graphviz - 用点强制正交（垂直或水平）边缘

> ID：15191811
> 
> 赞同：32
> 
> 时间：2013-03-03T22:42:43.913
> 
> 标签：graphviz, dot, edges, orthogonal

我想强制点仅显示节点之间的垂直或水平边缘。

我在[使用 Dot/GraphViz 的家庭树布局](https://stackoverflow.com/questions/2271704/family-tree-layout-with-dot-graphviz)后发现了一个类似的请求，但我不是在处理树，所以我希望有一个解决方案而不插入额外的节点......

如果我构建以下图表：

```
有向图 G {

    样条=正交

    A [形状=盒子]
    B [形状=盒子]
    C [形状=盒子]
    D [形状=盒子]

    A -> B
    A -> C

    B -> D
    C -> D

}

```

我得到的是：

![在此处输入图像描述](../Images/3e4b1fcc90a27e11659a3c4d53c21cb2.png)

但我想要一张这样的图表：

![在此处输入图像描述](../Images/d7ec0a69aaaca398737342fa3499ae9f.png)

我怎样才能得到这样的渲染？

编辑：“样条线”属性似乎没有按预期工作......我做错了什么吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-17T12:35:31.777

您的语法似乎正确。当我运行它时，我得到正交边缘路由（排序）：

![在此处输入图像描述](../Images/f2e8647ef491390399e282cd050fb54a.png)

你有哪个版本？

我问是因为正交边缘路由仅在 2010 年 9 月 28 日及更高版本的 Graphviz 版本中可用。并非所有系统都打包了更新的版本。在我的系统上，我必须[下载](http://www.graphviz.org/Download..php)并手动安装 Graphviz 以获得比 2.26.3 更新的版本（从 2010 年 1 月 26 日开始）。

假设您的实际图形包含超过 4 个节点，如果您希望线条弯曲并且不想添加额外（不可见）节点，则应该尝试使用 graphs`nodesep`属性。请参阅下面的代码和图像。

```
digraph G {

    graph [splines=ortho, nodesep=1]
    node [shape=record]

    A -> {B, C} -> D
} 
```

![在此处输入图像描述](../Images/0951e6f0f08835fa5e088960326d2ca3.png)

# php - 我使用 Group_ConCat 函数选择查询？

> ID：15191816
> 
> 赞同：1
> 
> 时间：2013-03-03T22:43:10.770
> 
> 标签：php, mysql, database

我使用 Group_ConCat 函数选择查询？现在的问题是回显行后ID没有显示在页面上？

```
<?php 
$querypid=mysql_query("SELECT GROUP_CONCAT(`id`) FROM products ORDER BY id") or die("PID  Query");
$rowpid=mysql_fetch_array($querypid); 
echo $ids=$rowpid['0'];
?> 
```

我想在

```
header("location:registration.php?id=$ids"); 
```

现在我怎样才能得到一个一个的ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:06:47.933

根据我对您的代码的理解，您正在重定向到 URL 如下所示的页面：

> [http://example.com/registration.php?id=1,2,3,4,5](http://example.com/registration.php?id=1,2,3,4,5)

如果是这种情况，那么`registration.php`可以简单地使用这个：

```
$idlist = explode(",",$_GET['id']); 
```

这将产生一个数组，其中每个项目都是 ID 之一。然后，您可以使用循环遍历它们`foreach(){}`。

# android - 我的 gridview 不工作，因为找不到 id

> ID：15191817
> 
> 赞同：1
> 
> 时间：2013-03-03T22:43:31.113
> 
> 标签：android, gridview, grid

这是我的代码：

```
package com.example.whs;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ActionBar;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.GridView;

public class ViewAlbum extends ListActivity {
    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser fotoJParser = new JSONParser();

    // Array for the list
    ArrayList<HashMap<String, String>> photoList;

    // JSON variables
    public static final String TAG_SUCCESS = "success";
    public static final String TAG_MESSAGE = "message"; 

    //JSON array
    JSONArray items = null;

    GridView grid;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_albums);

        // Set actionbar
        ActionBar actionBar = getActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);

        // HashMap for the items
        photoList = new ArrayList<HashMap<String, String>>();

        GridView grid = (GridView) findViewById(R.id.grid);;

        // Loading the items on the background
        new LoadAllItems().execute();       
    }

    // class for loading all items
    class LoadAllItems extends AsyncTask<String, String, String> {
        private static final String TAG_ID = "id";
        private static final String TAG_ITEMS = "items";
        public String TAG_NAME = "name";

        // Before 
        @Override
        protected void onPreExecute(){
            super.onPreExecute();
            pDialog = new ProgressDialog(ViewAlbum.this);
            pDialog.setMessage("Foto's laden...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        // Get the products     
        @Override
        protected String doInBackground(String... params) {
            // Build Parameters
            List<NameValuePair> params1 = new ArrayList<NameValuePair>();

            // get the id
            Intent intent = getIntent();
            String id = intent.getStringExtra(TAG_ID);

            params1.add(new BasicNameValuePair("id", id));

            // url to get the items
            String url_foto = "<here is my url>";

            //Get the JSON string           
            JSONObject json = fotoJParser.makeHttpRequest(url_foto, "POST", params1);

            try {
                // check for success tag
                int success = json.getInt(TAG_SUCCESS);

                if(success == 1) {
                    // found the items
                    items = json.getJSONArray(TAG_ITEMS);

                    // loop through the items
                    for (int i = 0; items.length() > i; i++){
                        // Get the item in variable c
                        JSONObject s = items.getJSONObject(i);

                        // Store in a variable
                        String name = s.getString(TAG_NAME);

                        // Create the HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // add it
                        map.put(TAG_NAME, name);

                        // to arraylist
                        photoList.add(map);                     
                    }
                }else{
                    //
                }
            } catch (JSONException e){
                throw new RuntimeException(e);
            }
            return null;
        }       

        protected void onPostExecute(String result){
            // dismiss dialog
            pDialog.dismiss();      
            // Add adapter to the list
            ViewAlbumAdapter adapter = new ViewAlbumAdapter(ViewAlbum.this, photoList);
            grid.setAdapter(adapter);
            grid.setOnItemClickListener(new OnItemClickListener(){
                public void onItemClick(AdapterView<?> a, View v,
                        int position, long id) {
                // do something
                }
            });
        }
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        return false;
        // to do
    }

} 
```

问题是他找不到gridview。网格视图的 id 是`android:id="@+id/grid"`. 日志在带有`grid.setAdapter(adapter)`. 错误是`java.lang.NullPointerException`。

我试过在`getActivity()`前面加`findViewById`，但是他不认识getActivity()方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:44:55.237

取出变量阴影：

```
GridView grid = (GridView) findViewById(R.id.grid);; 
```

应该

```
grid = (GridView) findViewById(R.id.grid); 
```

您已经声明`grid`为实例变量。通过在 中再次重新声明它`onCreate()`，您将实例保留为`grid`空。

# ssl - 使用 Coldfusion 在本地测试 HTTPS

> ID：15191831
> 
> 赞同：6
> 
> 时间：2013-03-03T22:44:28.507
> 
> 标签：ssl, coldfusion, https, coldfusion-9, cfml

我想在我的本地机器上测试与 https 相关的开发，然后再将其推送到登台和生产。

当前的网址是：`http://localhost:8500/mysite/index.cfm`工作正常

如果我尝试将其修改为 https，则页面只会加载并加载并且没有任何反应（在 chrome 中它会进入“此网页不可用”页面）

我已经用谷歌搜索了与此相关的信息，但没有发现任何有用的信息。我发现的唯一信息与旧版本的 CF 有关。由此我创建了一个 my.keystore 文件，但不确定在 CF9 中如何处理它。

如果可以提供任何信息来帮助我进行设置/使其工作和测试，我将非常感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T05:01:29.420

如果您想在内置 JRUN 网络服务器上启用 SSL，请按照此处描述的步骤操作：[在 ColdFusion 8 内置网络服务器上启用 SSL](http://www.cfchimp.com/wordpress/2008/08/enabling-ssl-on-the-coldfusion-8-built-in-web-server/)。请务必阅读评论部分，尤其是其中关于 JVM 参数的内容。对于 ColdFusion 9，同样的程序也适用。

我个人支持 Paul 的回答，并建议使用 IIS 或 Apache，即使在开发环境中也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T23:16:31.777

安装 IIS / Apache，将 ColdFusion 挂接到网络服务器，然后在本地安装 SSL 证书。

就我个人而言，我认为最好在开发中尽可能地复制生产，所以我不喜欢使用内置服务器并且总是使用网络服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T08:49:59.103

使用 IIS7 并使用自签名证书属性。您可以参考下面的 URL 来做自我证书。

[http://weblogs.asp.net/scottgu/archive/2007/04/06/tip-trick-enabling-ssl-on-iis7-using-self-signed-certificates.aspx](http://weblogs.asp.net/scottgu/archive/2007/04/06/tip-trick-enabling-ssl-on-iis7-using-self-signed-certificates.aspx)

# hadoop - 第一个hadoop项目报错：“输入路径不存在”

> ID：15191832
> 
> 赞同：12
> 
> 时间：2013-03-03T22:44:34.037
> 
> 标签：hadoop

要设置一个简单的 hadoop 项目，我正在关注本教程：[http ://ebiquity.umbc.edu/Tutorials/Hadoop/23%20-%20create%20the%20project.html](http://ebiquity.umbc.edu/Tutorials/Hadoop/23%20-%20create%20the%20project.html)

我的 hadoop 单节点似乎运行正常。

当我`In`使用此代码指定文件夹时：

```
FileInputFormat.setInputPaths(conf, new Path("In")); 
```

我收到此错误：

```
13/03/03 22:05:27 ERROR security.UserGroupInformation: PriviledgedActionException as:DEVUSER cause:org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: hdfs://localhost:9100/user/DEVUSER/In 
```

目前该`In`文件夹创建于`C:\homedir\hadoop-1.0.4\In`

我需要在哪里创建“In”文件夹以便它出现在`hdfs://localhost:9100/user/DEVUSER/In`？我是否需要更新 xml 文件以指向本地文件系统上的文件夹？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-03T22:58:26.403

您需要先将输入文件上传到 HDFS 文件系统：

```
bin/hadoop fs -mkdir In 
```

将创建一个以`/user/DEVUSER/In`HDFS 命名的目录。

```
bin/hadoop fs -put *.txt In 
```

将所有`*.txt`文件从当前目录复制到集群（HDFS）。

您似乎跳过了教程中的[上传数据一章。](http://ebiquity.umbc.edu/Tutorials/Hadoop/20%20-%20upload%20data.html)遵循它，您的问题应该得到解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:58:37.997

如果您不想将文件上传到 hdfs 而是从本地系统访问它，请尝试像这样设置输入路径。

```
FileInputFormat.setInputPaths(conf, new Path("file://path of the In Folder on your File system ")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-23T13:27:38.283

正如 harpun 所说，但在某些情况下，即使您尝试在 HDFS 下创建该目录，它也不会并给您该消息： mkdir: `In': No such file or directory 作为解决方案，您需要：

> bin/hadoop fs -mkdir /tmp/In

然后将文本文件复制到 HDFS 集群

> bin/hadoop fs -put *.txt /tmp/In

# android - 为什么 Worklight 应用程序需要 Worklight Server？

> ID：15191841
> 
> 赞同：2
> 
> 时间：2013-03-03T22:45:36.653
> 
> 标签：android, eclipse, ibm-mobilefirst

我在 IBM worklight for android 上开发了一个应用程序。我必须使用 Web 服务，但我需要 worklight 服务器。我想知道为什么在 worklight 上开发的应用程序需要 worklight 服务器。我不是在没有 worklight 服务器的情况下开发应用程序吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T01:41:09.867

IBM Worklight 提供的各种功能需要Worklight Server。例如：

*   允许您通过 HTTP、[SQL](https://en.wikipedia.org/wiki/SQL) DB、[JMS](https://en.wikipedia.org/wiki/Java_Message_Service)和[IBM Cast Iron从](http://www-01.ibm.com/software/integration/cast-iron-cloud-integration/)[REST](https://en.wikipedia.org/wiki/Representational_state_transfer)和[SOAP API 获取数据的](https://en.wikipedia.org/wiki/SOAP)[适配器](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#server-side-development)。这些存在于 Worklight Server 上，并且总是将[JSON](https://en.wikipedia.org/wiki/JSON)发送回客户端，而不管原始服务返回什么（例如 XML）。[您可以在入门模块](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html)中找到更多信息。但是，这不会阻止您在不使用 Worklight Server 的情况下从客户端执行正常的 AJAX 请求。[我在这里](https://stackoverflow.com/a/15104033/186909)发布了一个执行简单 AJAX 请求的示例。另一个特性是您可以使用 Java（而不是 JavaScript）代码在这些适配器中提供功能。

*   [直接更新](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_17_-_Direct_Update.pdf)- 一旦您将 Worklight 混合应用程序部署到 Worklight Server，当安装了该应用程序的现有移动设备联系服务器时，他们将收到更新通知。用户选择升级后，将从 Worklight Server 下载资源（HTML、CSS、JS）文件，他/她将拥有更新的应用程序，而无需通过 Apple 或 Google 的应用程序商店。还有一种方法可以禁用对 Worklight 混合应用程序的访问。

*   安全性 - 有各种依赖于 Worklight Server 的安全功能。例如：[自定义设备配置](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_25_-_Custom_Device_Provisioning.pdf)和各种类型的[身份验证](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#authentication)。数据存储功能需要与 Worklight Server 进行某种程度的通信，例如：[JSONStore](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_07_9_-_Overview_of_JSONStore.pdf)和[Encrypted Cache](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_07_8_-_Encrypted_Cache.pdf)。

**不需要**使用 Worklight Server ，但它会限制您的应用程序可以利用的功能的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:01:03.420

没有 WL 服务器的应用程序只是一个 PhoneGap/Cordova 应用程序。WL 的全部意义在于让服务器后端提供更新、用户访问控制和安全数据通信，例如使用适配器与可能位于防火墙后面的服务器连接。

如果您不需要服务器，那么您可能并不真正需要 WL。如果您确实使用 WL，只需使用适配器与 Web 服务器通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-19T23:31:18.220

> Worklight Server 是您在 Worklight Studio 中开发的移动应用程序的运行时容器。它不是 Java™ Platform, Enterprise Edition (JEE) 意义上的应用服务器。它充当 Worklight 应用程序包的容器，实际上是在传统应用程序服务器之上运行的 Web 应用程序（可选地打包为 EAR 文件）的集合。
> 
> Worklight Server 旨在集成到企业环境中并使用其现有资源和基础架构。这种集成基于适配器，这些适配器是服务器端软件组件，负责将后端企业系统和基于云的服务引导至用户设备。您可以使用适配器从信息源检索和更新数据，并允许用户执行事务并启动其他服务和应用程序。
> 
> 您可以将 Worklight Server 用于以下任务：
> 
> *   为数十万用户提供交易能力，让他们能够直接访问后端系统和基于云的服务。
>     
>     
> *   使用标准 Worklight Studio 工具配置、测试和部署描述性 XML 文件以连接到各种后端系统。
>     
>     
> *   直接更新已部署的混合应用程序和 Web 应用程序，无需通过不同的应用商店（受供应商服务条款的限制）。
>     
>     
> *   自动将分层数据转换为 JSON 格式，以实现最佳交付和使用。
>     
>     
> *   通过统一的推送通知架构增强用户交互。
>     
>     
> *   定义多个数据源的复杂混搭以减少总体流量。
>     
>     
> *   与组织现有的安全和身份验证机制集成。

[http://pic.dhe.ibm.com/infocenter/wrklight/v6r0m0/index.jsp](http://pic.dhe.ibm.com/infocenter/wrklight/v6r0m0/index.jsp)

# node.js - 复合服务器 8888 失败并显示“无法连接到 [localhost:27017]”

> ID：15191842
> 
> 赞同：1
> 
> 时间：2013-03-03T22:45:39.583
> 
> 标签：node.js, mongodb, compoundjs

我正在尝试在 Windows 机器上使用 nodejs 启动一个项目。我知道 windows 不是正确的环境，但这就是我使用的！

我在使用`compound server 8888`. 我通过生成所有文件

```
compound init photo --tpl jade --css less --db mongodb
cd photo
npm install -l
compound generate crud album title images createdAt:date 
```

在我意识到您可以将复合安装为复合或复合**js**之后，这一代运行良好（安装了复合**js**时它不起作用，但是当我安装复合时它起作用了 - 我认为它们都是相同的 :-/）。

但是当我尝试使用 `compound server 8888` 它启动服务器时，会出现以下错误：

```
在开发环境中监听 0.0.0.0:8888 的复合服务器

{PATH}\photo\node_modules\jugglingdb-mongodb\lib\mongodb.js:74
        if (err) 抛出错误；
                       ^
错误：无法连接到 [localhost:27017]
    在 Server.connect.connectionPool.on.server._serverState ({PATH}\photo\node_modules\jugglingdb-mongodb\node_modules\mongodb\lib\mongodb\connection\server.js:564:74)
    在 EventEmitter.emit (events.js:126:20)
    在 connection.on._self._poolState ({PATH}\photo\node_modules\jugglingdb-mongodb\node_modules\mongodb\lib\mongodb\connection\connection_pool.js:124:15)
    在 EventEmitter.emit (events.js:99:17)
    在 Socket.errorHandler ({PATH}\photo\node_modules\jugglingdb-mongodb\node_modules\mongodb\lib\mongodb\connection\connection.js:465:10)
    在 Socket.EventEmitter.emit (events.js:96:17)
    在 Socket._destroy.self.errorEmitted (net.js:329:14)
    在 process.startup.processNextTick.process._tickCallback (node.js:244:9)

```

显然它无法连接到 MongoDB，但为什么呢？我是否必须在 MySQL 之类的地方启动这个数据库？

任何帮助，将不胜感激。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:58:44.917

您需要先启动 MongoDB 守护程序。为此，请转到 MongoDB 文件所在的目录并`mongod.exe`在该`bin`文件夹下运行。

换句话说，运行：

```
<MONGO_HOME>\bin\mongod.exe 
```

要确保主要的 MongoDB 数据库进程正在运行，请运行`mongo.exe`(Mongo Shell)，它也位于同一文件夹下。如果它成功连接并用等待您命令的 shell 迎接您，那么您的数据库已启动并正在运行。返回并重新启动复合服务器以查看它是否有帮助。如果没有，请检查您的数据库连接设置。

# javascript - 是否将 document.getElementById 作为字符串提取？

> ID：15191844
> 
> 赞同：-3
> 
> 时间：2013-03-03T22:45:53.237
> 
> 标签：javascript, string, innerhtml

有人可以告诉我 document.getElementById 是否将元素作为字符串获取？我正在用它创建一个变量，然后尝试将它与某些范围进行比较，但它不起作用。

```
google.setOnLoadCallback(queryValue3);
function queryValue3 () {
var query3 = new google.visualization.Query('https://spreadsheets.google.com/spreadsheet/tq?range=B2:B17&key=0Ai_2YLvaQba0dFlQQnU2ZWV1SFp2QUZMcHVfcnVQcFE&gid=10');
query3.send(function (response) {
    if (response.isError()) {
        alert('Error in query3: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    }
var data3 = response.getDataTable();
var m1 = data3.getValue(0, 0);
var red22 = "<span style='color:#ff0000'>" + a22 + "</span>";
var yellow22 = "<span style='color:#FF9900'>" + a22 + "</span>";
var green22 = "<span style='color:#009900'>" + a22 + "</span>";
if (m1 <= 70)
{
m1 = green22;
}
else if (71 === m1 && m1 <= 89)
{
m1 = yellow22;
}
else if (m1 >=90)
{
m1 = red22;
}
console.log ("m1= " +m1)
document.getElementById('m1').innerHTML = m1;
console.log ("m1= "+m1)
});
} 
```

谢谢...

编辑 2014 年 3 月 24 日 - 在这篇文章中的交流之后不久，我得到了这个东西来处理 16 个指标。上周我把它扔到了 GitHub 上。您将在[此处找到代码](https://github.com/davelalande/Business_Intelligence_Dashboard/blob/master/cms_dashboard.html)。希望这将有助于其他想要使用 Google 电子表格作为网络仪表数据源的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T22:53:20.390

该`getElementById`方法返回对 DOM 对象的引用，而不是字符串。

但是，我不认为这是你的问题。在比较中，您尝试使用`=<`不存在的运算符。

此外，您在代码中做了一些令人困惑的事情。您正在创建字符串`red22`,`yellow22`和`green22`，然后将其中一个替换为`m1`您未在此处定义的值 from 。然后你`innerHTML`从一个带有 id 的元素中获取`m1`，但你不使用它做任何事情。似乎您想以某种方式将字符串和元素一起使用，但随后您将全部倒退。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T22:46:32.930

不，它没有（[文档](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)），它将返回[DOM 元素](https://developer.mozilla.org/en-US/docs/DOM/element)，或者`null`如果该 ID 不存在任何内容。

但是，您正在调用`.innerHTML`which 返回一个字符串。这是你问题的根源吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T22:48:21.663

该方法[`document.getElementById()`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-getElBId)返回一个 DOM [`Element`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-745549614)，而不是一个字符串。

单击上面的链接，它们会将您带到 W3C 推荐标准。

这是 MDN 必须说的： [https://developer.mozilla.org/en-US/docs/DOM/document.getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById) [https://developer.mozilla.org/en-US/docs/DOM/element](https://developer.mozilla.org/en-US/docs/DOM/element)

基本上你会得到一个由浏览器本身定义的底层原生 DOM 对象。'native DOM Object' 的作用以及它实现的接口取决于具体情况，并且必须在例如 W3C 或 MDN 中查找。

# vba - 在 HTMLElement 上使用 getElementById 而不是 HTMLDocument

> ID：15191847
> 
> 赞同：14
> 
> 时间：2013-03-03T22:46:24.573
> 
> 标签：vba, web-scraping

我一直在使用 VBS/VBA 从网页中抓取数据。

如果它是 Javascript，我会很容易地离开，但它在 VBS/VBA 中似乎并不那么直接。

这是我为回答而制作的一个示例，它有效，但我曾计划使用访问子节点，`getElementByTagName`但我不知道如何使用它们！该`HTMLElement`对象没有这些方法。

```
Sub Scrape()
Dim Browser As InternetExplorer
Dim Document As HTMLDocument
Dim Elements As IHTMLElementCollection
Dim Element As IHTMLElement

Set Browser = New InternetExplorer

Browser.navigate "http://www.hsbc.com/about-hsbc/leadership"

Do While Browser.Busy And Not Browser.readyState = READYSTATE_COMPLETE
    DoEvents
Loop

Set Document = Browser.Document

Set Elements = Document.getElementsByClassName("profile-col1")

For Each Element in Elements
    Debug.Print "[  name] " & Trim(Element.Children(1).Children(0).innerText)
    Debug.Print "[ title] " & Trim(Element.Children(1).Children(1).innerText)
Next Element

Set Document = Nothing
Set Browser = Nothing
End Sub 
```

我一直在查看该`HTMLElement.document`属性，看看它是否像文档的一个片段，但它要么难以使用，要么不是我想的那样

```
Dim Fragment As HTMLDocument
Set Element = Document.getElementById("example") ' This works
Set Fragment = Element.document ' This doesn't 
```

这似乎也是一种冗长的方式（尽管这通常是 vba imo 的方式）。任何人都知道是否有更简单的方法来链接函数？

`Document.getElementById("target").getElementsByTagName("tr")`会很棒...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T00:44:13.873

```
Sub Scrape()
    Dim Browser As InternetExplorer
    Dim Document As htmlDocument
    Dim Elements As IHTMLElementCollection
    Dim Element As IHTMLElement

    Set Browser = New InternetExplorer
    Browser.Visible = True
    Browser.navigate "http://www.stackoverflow.com"

    Do While Browser.Busy And Not Browser.readyState = READYSTATE_COMPLETE
        DoEvents
    Loop

    Set Document = Browser.Document

    Set Elements = Document.getElementById("hmenus").getElementsByTagName("li")
    For Each Element In Elements
        Debug.Print Element.innerText
        'Questions
        'Tags
        'Users
        'Badges
        'Unanswered
        'Ask Question
    Next Element

    Set Document = Nothing
    Set Browser = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T23:40:32.910

我也不喜欢。

所以使用javascript：

```
Public Function GetJavaScriptResult(doc as HTMLDocument, jsString As String) As String

    Dim el As IHTMLElement
    Dim nd As HTMLDOMTextNode

    Set el = doc.createElement("INPUT")
    Do
        el.ID = GenerateRandomAlphaString(100)
    Loop Until Document.getElementById(el.ID) Is Nothing
    el.Style.display = "none"
    Set nd = Document.appendChild(el)

    doc.parentWindow.ExecScript "document.getElementById('" & el.ID & "').value = " & jsString

    GetJavaScriptResult = Document.getElementById(el.ID).Value

    Document.removeChild nd

End Function

Function GenerateRandomAlphaString(Length As Long) As String

    Dim i As Long
    Dim Result As String

    Randomize Timer

    For i = 1 To Length
        Result = Result & Chr(Int(Rnd(Timer) * 26 + 65 + Round(Rnd(Timer)) * 32))
    Next i

    GenerateRandomAlphaString = Result

End Function 
```

如果您对此有任何问题，请告诉我；我已将上下文从方法更改为函数。

顺便问一下，你用的是什么版本的IE？我怀疑您使用的是< IE8。如果您升级到 IE8，我想它会将 shdocvw.dll 更新为 ieframe.dll，您将能够使用 document.querySelector/All。

**编辑**

不是真正的评论的评论响应：基本上在 VBA 中执行此操作的方法是遍历子节点。问题是你没有得到正确的返回类型。您可以通过创建自己的类（分别）实现 IHTMLElement 和 IHTMLElementCollection 来解决此问题；但这对我来说太痛苦了，无法获得报酬:)。如果您下定决心，请阅读 VB6/VBA 的 Implements 关键字。

```
Public Function getSubElementsByTagName(el As IHTMLElement, tagname As String) As Collection

    Dim descendants As New Collection
    Dim results As New Collection
    Dim i As Long

    getDescendants el, descendants

    For i = 1 To descendants.Count
        If descendants(i).tagname = tagname Then
            results.Add descendants(i)
        End If
    Next i

    getSubElementsByTagName = results

End Function

Public Function getDescendants(nd As IHTMLElement, ByRef descendants As Collection)
    Dim i As Long
    descendants.Add nd
    For i = 1 To nd.Children.Length
        getDescendants nd.Children.Item(i), descendants
    Next i
End Function 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-25T20:00:37.603

我会使用 XMLHTTP 请求来更快地检索页面内容。然后很容易使用 querySelectorAll 来应用 CSS 类选择器来按类名抓取。然后通过标签名称和索引访问子元素。

```
Option Explicit
Public Sub GetInfo()
    Dim sResponse As String, html As HTMLDocument, elements As Object, i As Long

    With CreateObject("MSXML2.XMLHTTP")
        .Open "GET", "https://www.hsbc.com/about-hsbc/leadership", False
        .setRequestHeader "If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT"
        .send
        sResponse = StrConv(.responseBody, vbUnicode)
    End With
    Set html = New HTMLDocument
    With html
        .body.innerHTML = sResponse
        Set elements = .querySelectorAll(".profile-col1")
        For i = 0 To elements.Length - 1
            Debug.Print String(20, Chr$(61))
            Debug.Print elements.item(i).getElementsByTagName("a")(0).innerText
            Debug.Print elements.item(i).getElementsByTagName("p")(0).innerText
            Debug.Print elements.item(i).getElementsByTagName("p")(1).innerText
        Next
    End With
End Sub 
```

* * *

**参考：**

VBE > 工具 > 参考 > Microsoft HTML 对象库

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-18T22:00:31.653

感谢 dee 使用 Scrape() 子例程提供的上述答案。该代码在编写时完美运行，然后我能够将代码转换为与我试图抓取的特定网站一起使用。

我没有足够的声誉来投票或发表评论，但实际上我确实有一些小的改进可以添加到 dee 的答案中：

1.  您需要通过“Tools\References”将 VBA 引用添加到“Microsoft HTML 对象库”，以便编译代码。

2.  我注释掉 Browser.Visible 行并添加如下注释

    ```
    'if you need to debug the browser page, uncomment this line:
    'Browser.Visible = True 
    ```

3.  我在 Set Browser = Nothing 之前添加了一行来关闭浏览器：

    ```
    Browser.Quit 
    ```

再次感谢迪！

ETA：这适用于 IE9 的机器，但不适用于 IE8 的机器。有人有解决办法吗？

我自己找到了修复，所以回到这里发布它。ClassName 函数在 IE9 中可用。为了在 IE8 中工作，您可以使用 querySelectorAll，在您要查找的对象的类名前加一个点：

```
'Set repList = doc.getElementsByClassName("reportList") 'only works in IE9, not in IE8
Set repList = doc.querySelectorAll(".reportList")       'this works in IE8+ 
```

# avfoundation - AVAssetWriter 代码运行时没有错误但生成的格式视频无效

> ID：15191855
> 
> 赞同：2
> 
> 时间：2013-03-03T22:47:05.470
> 
> 标签：avfoundation, avassetwriter

我有以下测试代码，它应该在 OSX 中创建图像文件的视频文件。然而，尽管成功运行视频文件无法播放....

谁能想到我可能做错了什么或错过了什么？

```
- (void)testVideoWriter {

    NSImage *someImage = [NSImage imageNamed:@"002"];

    CGSize size = CGSizeMake(someImage.size.width, someImage.size.height);
    CMTime frameLength = CMTimeMake(1, 5);
    CMTime currentTime = kCMTimeZero;
    NSError *error = nil;

    //remember to delete video before re-runnign or you will get fails...

    AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:[NSURL fileURLWithPath:@"/Users/petertribe/Desktop/testvideo.mov"] fileType:AVFileTypeMPEG4 error:&error];

    NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:AVVideoCodecH264, AVVideoCodecKey,
                                   [NSNumber numberWithInt:size.width ], AVVideoWidthKey,
                                   [NSNumber numberWithInt:size.height ], AVVideoHeightKey, nil];

    AVAssetWriterInput *writerInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoSettings];

    NSDictionary *sourcePixelBufferAttributesDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                                           [NSNumber numberWithInt:k32ARGBPixelFormat],
                                                           kCVPixelBufferPixelFormatTypeKey, nil];

    AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput sourcePixelBufferAttributes:sourcePixelBufferAttributesDictionary];

    [videoWriter addInput:writerInput];

    [videoWriter startWriting];
    [videoWriter startSessionAtSourceTime:kCMTimeZero];

    for (int i = 0; i < 100; i++)
    {

        CVPixelBufferRef pixel_buffer = [self fastImageFromNSImage:someImage];

        while (adaptor.assetWriterInput.readyForMoreMediaData == FALSE) {
            NSDate *maxDate = [NSDate dateWithTimeIntervalSinceNow:0.1];
            [[NSRunLoop currentRunLoop] runUntilDate:maxDate];
        }

        if(![adaptor appendPixelBuffer:pixel_buffer withPresentationTime:currentTime]) {
            NSLog(@"FAIL");
        } else {
            NSLog(@"Success:%d", i);
            currentTime = CMTimeAdd(currentTime, frameLength);
        }

        CVPixelBufferRelease(pixel_buffer);
    }

    [writerInput markAsFinished];
    NSLog(@"Done");
}

- (CVPixelBufferRef)fastImageFromNSImage:(NSImage *)image
{
    CVPixelBufferRef buffer = NULL;

    // config
    size_t width = [image size].width;
    size_t height = [image size].height;
    size_t bitsPerComponent = 8;
    CGColorSpaceRef cs = CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);
    CGBitmapInfo bi = kCGImageAlphaNoneSkipFirst; 
    NSDictionary *d = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], kCVPixelBufferCGImageCompatibilityKey, [NSNumber numberWithBool:YES], kCVPixelBufferCGBitmapContextCompatibilityKey, nil];

    // create pixel buffer
    CVPixelBufferCreate(kCFAllocatorDefault, width, height, k32ARGBPixelFormat, (__bridge CFDictionaryRef)d, &buffer);
    CVPixelBufferLockBaseAddress(buffer, 0);
    void *rasterData = CVPixelBufferGetBaseAddress(buffer);
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(buffer);

    // context to draw in, set to pixel buffer's address
    CGContextRef ctxt = CGBitmapContextCreate(rasterData, width, height, bitsPerComponent, bytesPerRow, cs, bi);
    if(ctxt == NULL){
        NSLog(@"could not create context");
        return NULL;
    }

    // draw
    NSGraphicsContext *nsctxt = [NSGraphicsContext graphicsContextWithGraphicsPort:ctxt flipped:NO];
    [NSGraphicsContext saveGraphicsState];
    [NSGraphicsContext setCurrentContext:nsctxt];
    [image drawAtPoint:NSMakePoint(0, 0) fromRect:NSMakeRect(0, 0, image.size.width, image.size.height) operation:NSCompositeCopy fraction:1];
    [NSGraphicsContext restoreGraphicsState];

    CVPixelBufferUnlockBaseAddress(buffer, 0);
    CFRelease(ctxt);

    return buffer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:14:01.247

好吧，我一定有一些有趣的时刻，修复很简单......

只是添加

```
[videoWriter finishWriting]; 
```

到 testVideoWriter 方法结束，修复问题

# android - 替换选项卡中的片段。上一个片段在新片段后面仍然处于活动状态

> ID：15191857
> 
> 赞同：2
> 
> 时间：2013-03-03T22:47:16.120
> 
> 标签：android, android-fragments, android-viewpager, android-tabs

我目前有 3 个标签。通过滑动或按下选项卡进行选择的每个选项卡都会加载一个片段，然后扩展 XML 布局。我还使用 viewpager 和 fragmentPagerAdapter。

在其中一个选项卡（以及将来的其余选项卡）中，我希望能够单击片段中的按钮，并将当前选项卡中的当前片段替换为新选项卡。在我走到一半的那一刻，按钮将显示新标签，但它在旧标签之上，我仍然可以看到调用新片段并与之交互的旧按钮，以及按钮新标签。

如何确保正确替换片段？而且旧片段被放置在后台，所以我可以用标签回到它？

这是我更改片段的代码

```
public class CreateWorkoutFragment extends Fragment {

    private Button addExerciseButton;
    private FragmentNavigationHelper fragmentNavigationHelper;
    static CreateWorkoutFragment instance;

    public CreateWorkoutFragment() {
    }

    /*public static CreateWorkoutFragment newInstance()
    {
          if(instance == null)
          {
              instance = new CreateWorkoutFragment();
          }

        return instance;
    } */

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        ViewGroup view = (ViewGroup) inflater.inflate(R.layout.create_workout, null);

        fragmentNavigationHelper = new FragmentNavigationHelper();
        addExerciseButton = (Button) view.findViewById(R.id.addExercise_button);
        addExerciseButton.setOnClickListener( new OnClickListener()
        {
            @Override
            public void onClick(View v) {
                //fragmentNavigationHelper.changeFragmentWithTab((Fragment) new ExerciseCategoryFragment());

                Fragment newFragment = new ExerciseCategoryFragment();
                FragmentTransaction transaction = getChildFragmentManager().beginTransaction();
                transaction.replace(R.id.fragment_container, newFragment);
                transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
                transaction.addToBackStack(null);
                transaction.commit();
            }
        });

        return view;
    }
} 
```

我认为问题可能是因为我使用了相关布局的 ID，所有内容都包含在我的 createWorkout.xml 中

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/createWorkout_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/createWorkoutTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/begin_workout_title_description"
        android:src="@drawable/create_workout_image"
        android:visibility="visible" />

    <TextView
        android:id="@+id/day_textview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/createWorkoutTitle"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="19dp"
        android:layout_marginLeft="14dp"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/dateMonth_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/day_textview"
        android:layout_alignParentRight="true"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Button
        android:id="@+id/addExercise_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true" />

    <Button
        android:id="@+id/NFCToggle_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toLeftOf="@+id/addExercise_button"  />

</RelativeLayout> 
```

任何帮助或朝着正确的方向推动将不胜感激，因为我真的被难住了，似乎找不到任何能让我接近答案的东西。

提前致谢

# c++ - C++代码风格：SHA2算法

> ID：15191859
> 
> 赞同：0
> 
> 时间：2013-03-03T22:47:23.660
> 
> 标签：c++, templates, coding-style

我正在犹豫如何在 C++ 中组织实现 SHA2 算法。

我的犹豫来自这样一个事实，即 SHA2 可以以 4 种方式实现，这将产生 4 种不同的摘要大小（224、256、384 和 512 位）。

我正在考虑一个专门用于可以使用 SHA2 生成的摘要大小的模板类。那么问题是为非专业类写什么。我能想到一些可能性：

```
//1 : throw exception on instantiation.
template<size_t bits> class SHA2 : public HashAlgorithm<Bits,Bits>{

public:
    SHA2(){
        throw SHA2NotImplementedException(bits);
    }
    virtual ~SHA2() throw(){}
    virtual Bits hash(const Bits& data)const = 0;
}

//2 : throw exception on use.
template<size_t bits> class SHA2 : public HashAlgorithm<Bits,Bits>{

public:
    virtual ~SHA2() throw(){}
    virtual Bits hash(const Bits& data)const{return SHA2NotImplementedException(bits);}
}

//3 : forbid instantiation and inheritance.
template<size_t bits> class SHA2 : public HashAlgorithm<Bits,Bits>{

private:
    SHA2(){}

public:
    virtual ~SHA2() throw(){}
    virtual Bits hash(const Bits& data)const = 0;
}

//4 : forbid instantiation.
template<size_t bits> class SHA2 : public HashAlgorithm<Bits,Bits>{

public:
    virtual ~SHA2() throw(){}
    virtual Bits hash(const Bits& data)const = 0;
}

//5 : dummy return.
template<size_t bits> class SHA2 : public HashAlgorithm<Bits,Bits>{

public:
    virtual ~SHA2() throw(){}
    virtual Bits hash(const Bits& data)const{return Bits();}
}

//Write template specialization for bits = 224, 256, 384 and 512 
```

那么，你会写什么呢？哪个选项比其他选项更清晰，为什么？

*PS：我也可以只写 4 个独立的算法，而不需要**与代码风格相匹配*。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:50:39.357

如果您使用模板参数，则该值必须在编译时可用。如果没有可能的实现，等到运行时标记错误似乎很愚蠢。

所以不要指定未指定的非专业模板，让它产生编译时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T22:49:34.217

把它完全留空（没有声明成员函数或变量）......为什么不呢？如果不使用非专业类，那是标准技术。

模板实例化不必具有相同的接口：它们基本上是完全独立的类*

# scheme - 为什么返回空而不是列表本身？

> ID：15191863
> 
> 赞同：2
> 
> 时间：2013-03-03T22:47:42.057
> 
> 标签：scheme, racket, htdp

第 4 章，HtDP。

注意：我在其他问题中也看到了这一点。

是出于清晰的原因还是算法的原因，我不知道，基本情况返回空而不是列表本身是空的。

例子：

```
; List-of-numbers -> List-of-numbers
; compute the weekly wages for all given weekly hours
(define (wage* alon)
  (cond
    [(empty? alon) empty] ;<---- see here
    [else (cons (wage (first alon)) (wage* (rest alon)))]))

; Number -> Number
; compute the wage for h hours of work
(define (wage h)
  (* 12 h)) 
```

我认为这同样正确。

```
; List-of-numbers -> List-of-numbers
; compute the weekly wages for all given weekly hours
(define (wage* alon)
  (cond
    [(empty? alon) alon] ;<---- see here
    [else (cons (wage (first alon)) (wage* (rest alon)))]))

; Number -> Number
; compute the wage for h hours of work
(define (wage h)
  (* 12 h)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T22:52:17.533

两种形式都是正确的并且完全等效，这只是风格问题。尽管可以说这更清楚一点，因为它*更*明确地返回了什么：

```
(if (empty? lst)
  empty
  ...) 
```

最后，这是个人品味与编码约定的问题。如果你是一个团队的成员并且每个人都在使用第一种形式，那么你应该使用它。另一方面，如果你是一个孤独的程序员，那么使用更适合你口味的形式。

# ruby-on-rails - 默认个人资料图片图片助手

> ID：15191866
> 
> 赞同：3
> 
> 时间：2013-03-03T22:47:51.500
> 
> 标签：ruby-on-rails, ruby, image, profile

如果在注册时未设置默认个人资料图片，我会被困在一种辅助方法上。假设我有一个这样的辅助方法：

```
def blank_image (user)
  base_image = ""
  if @user.image.empty?
    base_image
  else
    @user.image
  end
end 
```

我需要的是指向的网址，`base_image`所以我知道在哪里保存这张图片。我在猜测资产/图像，但如果有意义的话，我不知道如何“拼出”图像位置。以及如何在我看来实现这一点。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T23:10:27.143

像这样的东西？

```
def blank_image.url(user)
  if @user.image.empty?
    "/assets/default_photo.jpg"
  else
    @user.image.url
  end
end 
```

资产上的图像，一旦它们被预编译，它们将可以从 /assets 中获得（与样式表和 javascripts 相同），“/images”路径被删除。

* * *

根据您的新评论，最好的解决方案可能是为 Carrierwave 提供 default_url，如果您查看[文档](https://github.com/jnicklas/carrierwave)，您可以执行以下操作：

```
class MyUploader < CarrierWave::Uploader::Base

  version :thumb do
    process resize_to_fill: [280, 280]
  end

  version :small_thumb, :from_version => :thumb do
    process resize_to_fill: [20, 20]
  end   

  def default_url
    "/assets/default_images/" + [version_name, "default.png"].compact.join('_')
  end
end 
```

然后在你的 /app/assets/images/default_images/ 你应该添加照片创建文件**default.png**这是默认图像，**thumb_default.png**这是版本：thumb，最后是**small_thumb_default.png**这是版本：小拇指。

请注意 :thumb 和 :small_thumb 都是一个示例，以防您为上传的图像处理不同的图像版本。

# deployment - 使用 SQL db 将 MVC 4 部署到 Azure 网站

> ID：15191868
> 
> 赞同：2
> 
> 时间：2013-03-03T22:47:52.490
> 
> 标签：deployment, azure, asp.net-mvc-4, azure-sql-database

我刚刚从 ASP.NET MVC 4 Internet 应用程序模板中部署了我的第一个 Azure 网站。该应用程序在我的本地计算机上运行良好。我按照这里找到的教程来部署网站：

[http://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/](http://www.windowsazure.com/en-us/develop/net/tutorials/web-site-with-sql-database/)

部署站点后，我可以进入网站主页，我的家庭控制器不需要身份验证。当我尝试登录时，我被定向到错误页面。

我修改了我的 web.config 文件以获取自定义错误消息，并收到以下信息：

> 数据库中已经有一个名为“UserProfile”的对象。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：数据库中已经有一个名为“UserProfile”的对象。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [SqlException (0x80131904): 数据库中已经有一个名为 'UserProfile' 的对象。] System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action `1 wrapCloseInAction) +1753346 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +5295154 System.Data.SqlClient.TdsParser。 ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +242 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean & dataReady) +1682 System.Data.SqlClient.SqlCommand .RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout) +280 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite) +405 System.Data.SqlClient.SqlCommand.ExecuteNonQuery() +160 System.Data.Entity.Migrations.DbMigrator.ExecuteSql(DbTransaction transaction, MigrationStatement migrationStatement) +125 System.Data.Entity.Migrations.DbMigrator.ExecuteStatements(IEnumerable`1 migrationStatements) +113 System.Data.Entity.Migrations.DbMigrator.ExecuteOperations(String migrationId, XDocument targetModel, IEnumerable `1 operations, Boolean downgrading, Boolean auto) +672 System.Data.Entity.Migrations.DbMigrator.ApplyMigration(DbMigration migration, DbMigration lastMigration) +267 System.Data.Entity.Migrations.DbMigrator.Upgrade(IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId) +133 System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration) +455 System.Data.Entity.MigrateDatabaseToLatestVersion `2.InitializeDatabase(TContext context) +62 System.Data.Entity.<>c__DisplayClass2`1.b_ *0(DbContext c) +70 System.Data.Entity.Internal.<>c* _DisplayClass8.b_ *6() +19 System.Data.Entity.Internal.InternalContext.PerformInitializationAction(动作动作）+60 System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization() +181 System.Data.Entity.Internal.LazyInternalContext.b* _4(InternalContext c) +7 System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input) +110 System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 个动作）+185 System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase() +73 System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +28 System.Data.Entity.Internal.Linq.InternalSet `1.Initialize() +52 System.Data.Entity.Internal.Linq.InternalSet`1\. get_InternalContext() +15 System.Data.Entity.Internal.Linq.InternalSet `1.Find(Object[] keyValues) +23 EnergyToolbase.Controllers.AccountController.Login(LoginModel model, String returnUrl) +94 lambda_method(Closure , ControllerBase , Object[] ) +147 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +14 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 个参数) +182 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary `2 parameters) +27 System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +28 System.Web.Mvc.Async.<>c__DisplayClass8`1.b__7(IAsyncResult *) +10 System.Web. Mvc.Async.WrappedAsyncResult `1.End() +50 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +32 System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +58 System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +225 System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +225 System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +10 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +34 System.Web.Mvc.Async.<>c* _DisplayClass2a.b_*20() +24 System.Web.Mvc.Async.<>c* _DisplayClass25.b_ *22(IAsyncResult asyncResult) +99 System.Web.Mvc.Async.WrappedAsyncResult `1.End() +50 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +27 System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55 System.Web.Mvc.Controller。 EndExecuteCore(IAsyncResult asyncResult) +39 System.Web.Mvc.Async.<>c* _DisplayClass4.b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult `1.End() +55 System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +29 System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10 System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +25 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55 System.Web.Mvc.MvcHandler .EndProcessRequest(IAsyncResult asyncResult) +31 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult 结果) +9 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()+9629708 系统。 Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155

有人可以指点帮助我在这里找到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:16:45.773

看起来**System.Data.Entity.Migrations.DbMigrator.ApplyMigration**正在呕吐。听起来您已经设置了实体框架，以通过已经存在的迁移将某些内容插入到您的数据库中（在本例中为*userprofile*）

我会说确保您正在针对正确的数据库进行部署。然后检查您是否已经在数据库中创建了所需的对象并相应地对迁移进行故障排除（*或删除数据库中的所有对象并重试，因为您似乎希望此部署使用干净的数据库。*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-04T09:15:06.703

我有一个类似的问题。我的问题是我用 emailid、电话等扩展了 userprofile 表，并将它放在我的数据上下文中。当我为它创建迁移时，它为用户配置文件表创建了迁移。虽然默认的成员身份安全代码已经在应用程序启动时创建了用户配置文件、角色和其他表，但当它尝试运行我的迁移（这意味着它试图重新创建用户配置文件表）时，它抱怨“已经有一个名为 'UserProfile 的对象'在数据库中。”

我的解决方案是从迁移中手动删除用户配置文件表，然后通过 sql server 中的 alter table query 添加我需要的其他列。

由于我的数据模型已经期望 UserProfile 表中的这些列，它运行良好。希望这可以帮助其他人节省时间。

# ios - 更改财产类别

> ID：15191869
> 
> 赞同：2
> 
> 时间：2013-03-03T22:47:54.427
> 
> 标签：ios, objective-c, ios6

请原谅对编程术语的任何错误使用，我正在寻找 ios6 解决我的问题的方法：

我的头文件中有以下属性：

```
@property (nonatomic, strong) AClass *myExample; 
```

但在我的 .m 文件中，我实际上可能希望 _myExample 是 AClass、BClass 或 CClass。

```
_myExample = [[BClass alloc] init]; // incompatible pointer types 
```

实现这一点的最佳方法是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T22:50:19.890

`AClass`您可能会考虑`BClass`出您需要对所有三个.`CCLass``ICDoSomethingProtocol``id <NSObject, ICDoSomethingProtocol> myExample``AClass *`

您可以跳过协议并继续使用，`id <NSObject>`但您将获得更少的编译时检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:10:53.167

通常您应该创建 XClass 并创建 XClass 的 AClass、BClass 和 CClass 子类。然后使用`@property (nonatomic, strong) XClass *myExample;` 但是如果你“懒惰”（这不是编程罪），你可以使用 NSObject 的预退出类，或者简单地将属性声明为`@property (nonatomic, strong) id myExample;`. （请注意，没有`*`。）

在任何这些情况下，您都需要（或至少可能应该）在使用它之前将属性“转换”到正确的子类（调用超类的方法除外）。例如，`int aValue = [(BClass*)self.myExample doSomeOperationOnBClass];`。

为了避免像这样进行强制转换（以及相关的混淆），简单地为三个类声明单独的属性并不罕见，即使三个类中的两个总是未使用。（同样，懒惰不是编程的罪过。）

# actionscript-3 - adobe flash actionscript 3 TypeError：错误＃2007：参数子必须为非空

> ID：15191872
> 
> 赞同：1
> 
> 时间：2013-03-03T22:48:23.450
> 
> 标签：actionscript-3, flash

我创建了一个 Flash 文档，但出现此错误

TypeError：错误 #2007：参数 child 必须为非空。在 Flash.display::DisplayObjectContainer/setChildIndex() 在 VersiontwoFlashwebsite_fla::MainTimeline/navOverF()

我不完全理解它，所以任何帮助都会很棒......这是我认为错误所在的代码......

```
import flash.filters.GlowFilter;
import flash.events.MouseEvent;
import flash.display.MovieClip;

var navBtnGlow:GlowFilter = new GlowFilter(0x999999,0.5,0,15,1,2,true,false);
mc_navbar.addEventListener(MouseEvent.MOUSE_OVER, navOverF);
mc_navbar.addEventListener(MouseEvent.MOUSE_OUT, navOutF);
function navOverF(event:MouseEvent):void
{
    event.target.filters = [navBtnGlow];
    mc_navbar.setChildIndex(event.target as MovieClip, 1);
    dropdown.gotoAndStop(mc_navbar.getChildAt(1).name);

}
function navOutF(event:MouseEvent):void
{
    event.target.filters = [];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:37:41.210

看起来它正在抛出一个错误

```
mc_navbar.setChildIndex(event.target as MovieClip, 1); 
```

因为`event.target`不是孩子`mc_navbar`

您可能希望使用调试器检查 event.target 所指的内容，并确保它是您认为的内容。

# vim - Vim：打开一个新缓冲区，其中包含当前文件中与模式匹配的所有行

> ID：15191875
> 
> 赞同：0
> 
> 时间：2013-03-03T22:48:44.703
> 
> 标签：vim

我正在 Vim 中编辑一个 Python 文件，我有几行要提取：所有行匹配 pattern `REGEX`。

我可以列出所有这些行`:g/REGEX`。

如何使用上述命令返回的选择内容打开一个新缓冲区？

现在，我正在诉诸于退出编辑器并使用`cat`并`grep`实际创建一个新文件......必须有一个集成的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:37:05.543

试试这个：

```
$ vim file.txt

:e new.txt
:0r!grep REGEX # 
```

最后一个命令调用 external `grep`with`REGEX`和备用缓冲区名称`#`（与 相同`file.txt`），然后将结果读取到当前缓冲区（`new.txt`）

* * *

也试试这个：

```
$ vim file.txt

:v/REGEX/d
:w new.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:58:28.063

如果你对命令行 Vim 而不是 gVim 很感兴趣，我相信：

```
vim `grep REGEX file.txt` 
```

会做的伎俩。

# iphone - 在 iPhone App 中使用 Box2d 应用交互

> ID：15191879
> 
> 赞同：0
> 
> 时间：2013-03-03T22:49:07.613
> 
> 标签：iphone, box2d, box2d-iphone

我目前正在使用 box2D 和 UIKit 来创建应用程序。Gravity 对我添加的对象非常有效。但是，我希望对象通过触摸进行用户交互。网上的文章和指南大多参考box2d和cocos2d（cocos2d我没用）。

任何人都可以提供一些帮助来让 TouchesBegan、TouchesMoved 和 TouchesEnded 识别 Box2d 对象并对其做出反应。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:57:09.753

把它想象成一个鼠标：你有三个事件可以被称为 onMouseDown、onMouseDrag 和 onMouseUp……但是你有……多个鼠标……

然后，你想用鼠标做的是：

*   点击时检查身体是否在您的“鼠标”下方；
*   如果鼠标下方有一个身体，则创建一个鼠标关节，并将其连接到这个身体和你的“鼠标”（你的 b2MouseJoint 的锚点）；
*   当“鼠标”启动时破坏鼠标关节。

您可以在 box2d 中创建多个鼠标关节。

# c# - 什么是startswith和/或包含搜索最快的字符串集合结构/算法

> ID：15191885
> 
> 赞同：9
> 
> 时间：2013-03-03T22:49:34.957
> 
> 标签：c#, string, algorithm, search, collections

我有以下情况：我有一大堆平均长度可能为 30 的字符串（比如说 250.000+）。我要做的是在这些字符串中进行很多搜索.. 大部分都是 StartsWith 和 Contains 类型的。

该集合在运行时是静态的。这意味着选择集合的初始读取和填充只进行一次..因此构建数据结构的性能绝对不重要。内存也不是问题：这也意味着如果需要，我不介意在每个集合中有两个具有相同数据的集合（比如一个用于startswith，另一个用于包含）。唯一重要的是搜索的性能，它应该返回与搜索条件匹配的所有元素。

首先，我遇到了 Trie 或 Radix-tree .. 但也许还有更好的选择？

For contains .. 我还没有好主意（除了在列表上运行 linq 查询，该列表不会很快处理大量数据）。

提前谢谢大家！

更新：我忘记了一个重要部分：使用包含我的意思是集合中没有完全匹配..但我想找到集合中包含给定搜索字符串的所有字符串

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T23:59:43.457

构建[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)将允许您对所有字符串并行进行子字符串搜索`O(1)`。我的书呆子不禁注意到，与您的子字符串匹配的字符串数量以及被查询的子字符串的大小实际上`O(n + m)`在哪里。`n``m`

那么你问的后缀树是什么？在其最基本的实现中，它是一个带有更高级插入方法的 trie：除了添加字符串之外，它还将该字符串的所有可能后缀添加到 trie。在这个数据结构上，子串搜索变成了所有可能后缀的前缀搜索。由于您还想进行前缀搜索，因此您需要在每个插入的字符串和查询子字符串的前面添加一个特殊字符。特殊字符将允许您区分后缀和完整字符串。

虽然后缀树的这种实现非常简单，但它也非常低效（`O(n^2)`空间和构建时间）。幸运的是，还有其他更有效的实现可以大大减少空间和时间限制。[其中之一，Ukkonen 的算法，在这个 SO 答案](https://stackoverflow.com/questions/9452701/ukkonens-suffix-tree-algorithm-in-plain-english/9513423#9513423)中得到了很好的解释，并将空间限制到`O(n)`. 您可能还想研究[后缀数组](http://en.wikipedia.org/wiki/Suffix_array)，它们是后缀树的等效但更有效的表示。

虽然我知道还有更多后缀树的实现（其中一个可能会达到您的用例的最佳位置），但我只是不知道它们。我建议您在确定实施之前对该主题进行一些研究。

# ruby - rails webrick httpserver编码问题

> ID：15191886
> 
> 赞同：0
> 
> 时间：2013-03-03T22:49:39.417
> 
> 标签：ruby, encoding, webrick, ruby-1.9.2

我试图打开一个小而简单的 http 服务器来共享 LAN 上的一些文件（或在公共 IP 上在线）。经过一番研究，我发现 python -m SimpleHTTPServer 可以完成这项工作，但它存在可怕的并发请求问题。用户告诉我，当他们下载文件（通常是大文件，如电影）时，浏览变得非常缓慢。

作为一名 Rails 程序员，我发现了这一点：

```
s=WEBrick::HTTPServer.new({DocumentRoot: ".", Port: 8000 })
trap("INT"){s.shutdown}
s.start 
```

这对于简单来说是完美的，并且没有像 python 那样的问题。然而，有一件事让我感到困惑。当我的 Ubuntu 上的文件名包含非 ascii 编码的字符时，它会引发错误：US-ASCII 中的无效字节序列。

我对 webrick gem 的搜索显示它采用 US-ASCII 编码。我想知道为什么不是 UTF-8。我尝试过的东西包括： 1\. 在我的 ruby​​ 文件的开头：

```
Encoding.default_external = Encoding::UTF_8
Encoding.default_internal = Encoding::UTF_8 
```

1.  在ubuntu环境中：

    导出 LANGUAGE=en_US.UTF-8 导出 LANG=en_US.UTF-8 导出 LC_ALL=en_US.UTF-8

2.  Iconv 转换

天知道我在这 4 个小时里还有什么。

我真的不明白如何告诉 webrick 对其服务器使用 utf-8 字符编码。

问候，哈桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:20:01.827

尝试在文件顶部添加“魔术”注释：

```
# encoding: utf-8 
```

# c# - 如何将泛型类型参数传递给从构造函数调用的方法？

> ID：15191888
> 
> 赞同：9
> 
> 时间：2013-03-03T22:49:40.027
> 
> 标签：c#, generics, constructor

这是构造函数：

```
 public PartyRoleRelationship(PartyRole firstRole, PartyRole secondRole)
        {
            if (firstRole == secondRole)
                throw new Exception("PartyRoleRelationship cannot relate a single role to itself.");

            if (firstRole.OccupiedBy == null || secondRole.OccupiedBy == null)
                throw new Exception("One or both of the PartyRole parameters is not occupied by a party.");

            // Connect this relationship with the two roles.
            _FirstRole = firstRole;
            _SecondRole = secondRole;

            T = _FirstRole.GetType().MakeGenericType();

            _SecondRole.ProvisionRelationship<T>(_FirstRole); // Connect second role to this relationship.
        } 
```

在最后一行，它在 _SecondRole 上调用 ProvisionRelationship，它给了我运行时错误：找不到类型或命名空间“T”...

我如何（a）正确分配 T，或（b）使用构造函数传递泛型类型？我一直在浏览很多帖子，但可能由于缺乏理解而错过了一些东西。任何人对此的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-03T22:59:26.407

你的类需要是通用的。所以`PartyRoleRelationship`需要看起来像这样：

```
public class PartyRoleRelationship<T>
{
    public PartyRoleRelationship(T arg, ...)
    {
    }
} 
```

在此处阅读有关泛型类的更多信息：

[http://msdn.microsoft.com/en-us/library/sz6zd40f(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/sz6zd40f(v=vs.80).aspx)

[http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx)

编辑：

您可能可以稍微简化您的代码并这样做：

```
public class RoleRelationship<T>
{
    public RoleRelationship(T firstRole, T secondRole)
    {
        if (firstRole.OccupiedBy == null || secondRole.OccupiedBy == null)
            throw new Exception("One or both of the Role parameters is not occupied by a party.");

        // Connect this relationship with the two roles.
        _FirstRole = firstRole;
        _SecondRole = secondRole;

        _SecondRole.ProvisionRelationship<T>(_FirstRole);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T23:15:54.803

创建一个泛型类，其中泛型类型 T 是基类 PartyRole 的类型：

```
public class PartyRoleRelationship<T> where T : PartyRole 
{
     T _FirstRole;
     T _SecondRole;

     public PartyRoleRelationship(T role1, T role2) {
         _FirstRole = role1;
         _SecondRole = role2;
         role1.ProvisionRelationship(role2)
     }

     public ProvisionRelationship(T otherRole) {
          // Do whatever you want here
     }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T22:59:52.520

如果您静态知道 _FirstRole 的类型（是 PartyRole 吗？），您可以使用它：

```
_SecondRole.ProvisionRelationship<PartyRole>(_FirstRole); 
```

# c# - 分配给空委托的事件声明

> ID：15191892
> 
> 赞同：4
> 
> 时间：2013-03-03T22:50:09.490
> 
> 标签：c#

我对我经常在网上偶然发现的一段代码有疑问。例如

```
 public static event Action<Foo> foo = delegate{  }; 
```

我得到了声明的左侧。但右手边令人困惑。将事件分配给带空括号的委托有什么意义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T22:52:41.333

更新：在现代版本的 C# 中，推荐使用的模式是将其保留为 null 并使用`?.`运算符：

```
event Action<Foo> foo; // leave it as null as the default
// ...
foo?.(new Foo()); 
```

* * *

在旧版本的 C# 中，这种模式的原因可能是`event`字段的默认值为`null`. 这需要每次您想要引发事件时都使用空检查 - 调用`foo()`未初始化的`event`字段将导致`NullReferenceException`. 只给它一个合理的默认值（如 no-op）会更方便，这样您就可以直接引发事件，而无需使用包装方法或任何东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T22:59:48.463

委托成员的默认值为`null`，因此，如果您不为其分配任何内容，则`NullReferenceException`在您尝试调用它时会抛出 a 。您可以很容易地看出这可能是一个问题：想象一下，如果您必须订阅`OnKeyDown`每个*控件*！

方便地，标准库中的事件是受*保护*的，它做同样的事情：

```
Event handler = OnClick
if (handler != null)
    handler(this, new EventArgs()); 
```

这是我推荐的形式，因为 - 无论如何对我来说 - 它看起来更干净。另外，请注意局部变量的使用。写成这样是合法的

```
if(OnClick != null) OnClick(this, new EventArgs()); 
```

但这不是线程安全的，因为 OnClick 的侦听器可以在 null 检查和调用之间取消订阅。

# mysql - 使用 substring_index 在第一个逗号和第二个逗号之后搜索

> ID：15191893
> 
> 赞同：0
> 
> 时间：2013-03-03T22:50:11.530
> 
> 标签：mysql, inner-join

这是我可以用于第一个的 SQL 查询

```
update Table1 t1
        inner join Table2 t2
        on  SUBSTRING_INDEX(t1.Location, ',', 1) = t2.Location 
    SET t1.Latitude = t2.Latitude ,
        t1.Longitude = t2.Longitude 
```

例如，上面的查询将显示曼彻斯特，因为它在列中排在首位：曼彻斯特、德比、伯明翰

但我还想执行一个可以搜索 Derby 或 Birmingham 的查询，因此如果需要可以超越第一个逗号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:53:15.873

这是一种方法：

```
update Table1 t1
        inner join Table2 t2
        on  find_in_set(t2.location, t1.Location) > 0
    SET t1.Latitude = t2.Latitude ,
        t1.Longitude = t2.Longitude 
```

这也可以让您搜索特定位置，例如第二个：

```
update Table1 t1
        inner join Table2 t2
        on  find_in_set(t2.location, t1.Location) = 2
    SET t1.Latitude = t2.Latitude ,
        t1.Longitude = t2.Longitude 
```

# r - 如何根据流矩阵在ggplot2中绘制流

> ID：15191898
> 
> 赞同：3
> 
> 时间：2013-03-03T22:50:46.040
> 
> 标签：r, ggplot2, ggmap

我有 2001 年人口普查的通勤流量数据。我使用 R 包将其从“扁平”形式转换为“长”形式`melt`，`reshape2`并将起点和终点放在同一行，因为 ggplot2 仅接受数据帧输入。

我的问题是我最终将每行的数据加倍，以便每一行（行）都有一个起点和一个目的地。我确信有一个更简洁的解决方案，可能涉及更长的数据形式。

为了具体说明问题，我从赫里福德制作了一个小型工作示例：

```
# prepare data + packages
library(ggplot2)
library(ggmap)
flows.mini <- flows.ft[1:100,]
save(flows.mini, file="flows.mini.RData")
load("flows.mini.RData")
head(flows.mini)

 variable    X.1 value      X1.x     X2.x      X1.y     X2.y   n nr
1   00GANY 00GANY   605 -2.699389 52.06554 -2.699389 52.06554 605  1
2   00GANY 00GAPA   135 -2.742064 52.04099 -2.699389 52.06554 135  2
3   00GANY 00GAQD    25 -2.733890 51.93402 -2.699389 52.06554  25  3
    fcols
1    500+
2 100-500
3  10-100 
```

要重现最后两行的步骤，请下载 RData 文件 (2 kb)：[http](http://dl.dropbox.com/u/15008199/flows.mini.RData) ://dl.dropbox.com/u/15008199/flows.mini.RData并重现该图：

![迷你流图](../Images/86b9f457fd832422e56a8098f2ecf0c3.png)

这就是我绘制它的方式：

```
# plot flows by doubling-up
hford <- qmap("hereford", source = "stamen", maptype = "toner", extent = "normal", maprange=FALSE)

hford + geom_path(data= flows.mini, aes(x=c(X1.x,X1.y), y=c(X2.x, X2.y), 
      group = c(nr, nr), color = c(fcols,fcols), size= c(n,n)), 
      lineend = "round") +
  scale_size_continuous(range = c(0.05,5)) +
  scale_color_discrete(breaks = c("0-10", "10-100", "100-500", "500+")) + 
  coord_map() 
```

我想你会同意双重属性效率低下，所以，重新表述我的问题：我怎样才能删除它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:14:30.637

我不确定我是否真的理解这个问题，但是如果你使用`geom_segment`而不是`geom_path`，它是否解决了你描述的“属性加倍”的问题？

就像是 ：

```
hford + geom_segment(data= flows.mini, aes(x=X1.x,y=X2.x, xend=X1.y, yend=X2.y, 
      group = nr, color = fcols, size= n), 
      lineend = "round") +
  scale_size_continuous(range = c(0.05,5)) +
  scale_color_discrete(breaks = c("0-10", "10-100", "100-500", "500+")) + 
  coord_map() 
```

![在此处输入图像描述](../Images/d03a9a5c8385bbe0384928759bb9dd36.png)

# c# - WCF 客户端无法连接到同一应用程序实例中的主机

> ID：15191899
> 
> 赞同：0
> 
> 时间：2013-03-03T22:50:47.567
> 
> 标签：c#, wcf, named-pipes

我有一个有两个按钮的 WPF GUI。按钮 1 创建一个新的 WCF 主机，它通过命名管道侦听请求。按钮 2 使用客户端代理 DLL 通过命名管道查询主机。

单击按钮 2，客户端部分无法连接。

但是，如果我运行客户端的第二个实例并单击按钮 2。它可以连接吗？

一旦服务器启动，WCF 主机运行良好。我也可以使用 WCFTestClient 查询它......所以问题只存在于同一个实例中。

抛出的异常是。

* * *

## 发送到 net.pipe://localhost/SvcName 的此请求操作在配置的超时 (00:01:00) 内未收到回复。分配给此操作的时间可能是较长超时的一部分。这可能是因为服务仍在处理操作，或者因为服务无法发送回复消息。请考虑增加操作超时（通过将通道/代理转换为 IContextChannel 并设置 OperationTimeout 属性）并确保服务能够连接到客户端。

任何想法将不胜感激。

谢谢沃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:09:02.023

你能用这个标记实现你的服务的类吗：

```
[服务行为（UseSynchronizationContext = false）]
```

然后再试一次。

# php - 将关联数组转换为 php 中其值的简单数组

> ID：15191903
> 
> 赞同：103
> 
> 时间：2013-03-03T22:51:14.170
> 
> 标签：php, arrays, associative-array

我想转换数组：

```
Array ( 
[category] => category 
[post_tag] => post_tag 
[nav_menu] => nav_menu 
[link_category] => link_category 
[post_format] => post_format 
) 
```

至

```
array(category, post_tag, nav_menu, link_category, post_format) 
```

我试过了

```
$myarray = 'array('. implode(', ',get_taxonomies('','names')) .')'; 
```

这呼应了：

```
array(category, post_tag, nav_menu, link_category, post_format) 
```

所以我可以

```
echo $myarray;
echo 'array(category, post_tag, nav_menu, link_category, post_format)'; 
```

它打印完全相同的东西。

...但是我不能`$myarray`在函数中使用代替手动输入的数组，因为该函数不会将其视为数组或其他东西。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2013-03-03T22:53:00.533

只需使用[`array_values`](http://php.net/manual/en/function.array-values.php)功能：

```
$array = array_values($array); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-03T22:59:29.023

您应该使用该`array_values()` **功能**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-21T07:01:25.813

创建一个新数组，在 PHP 中使用 foreach 循环将关联数组中的所有值复制到一个简单数组中

```
 $data=Array(); //associative array

      $simple_array = array(); //simple array

      foreach($data as $d)
      {
            $simple_array[]=$d['value_name'];   
      } 
```

# java - 获取 0 到 255 之间数字的字节值？

> ID：15191905
> 
> 赞同：0
> 
> 时间：2013-03-03T22:51:20.887
> 
> 标签：java, file, byte

我需要获取 0 到 255 之间数字的字节/8 位表示形式。在 Java 中是否有任何舒适的方法可以做到这一点？似乎大多数方法都适用于 4 字节长的整数？我的最终目标是将几个 8 位值写入文件。

感谢您对此的任何提示！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-03T22:59:00.427

完成亚历克斯的回答：

```
int i = 255;
byte b = (byte) i;
System.out.println("b = " + b); // b = -1
int i2 = b & 0xFF;
System.out.println("i2 = " + i2); // i2 = 255 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T23:02:52.060

小心字节。它是有**符号**的，例如 -128 到 127。如果你想要 0-255，当你去打印它时，你总是需要`&255`（就像 JB Nizet 在他的例子中所做的那样）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T22:54:37.467

What's wrong with [`byte`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html) type? If you only store data and don't do arithmetic and don't need decimal representation for other reasons then it should not matter that it is signed.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-08T02:26:54.437

> 1 字节 = 8 位 = 00000000~11111111（二进制）= 0~255（无符号字节）= 0x00~0xFF（十六进制）

C＃：

> 1字节值是：0~255

爪哇：

> 1字节值是：-128~127

如果您想在 java 中获得 0~255（无符号字节）值：

> 字节 b = **（字节）**值；

例如：字节 b = **（字节）** 200；

> int b = 值**& 0xFF** ;

例如： int b = 200 **& 0xFF** ;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T23:02:10.370

如果您要将其读入`int`，只需用`& 0xff`. 我建议在`(In|Out)putStream`. 涵盖诸如字节顺序之类的细节。

在写入对象中：

```
public void unsignedByte(int value) throws IOException {
    if (!(0 <= v && v <= 0xff) {
        throw IllegalArgumentException();
    }
    out.write(v);
} 
```

在读取对象中：

```
public int unsignedByte() throws IOException {
    int v = in.read();
    if (v == -1) {
        throw EndOfFileException();
    }
    assert 0 <= v && v < 0xff; 
    return v;
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-01-23T15:03:01.217

Java字节从-128签名到127，如果你想得到0到25​​5的表示，我使用这2个函数

```
public static byte fromIntToByte(String value) throws Exception {
        return fromIntToByte(Integer.parseInt(value));
    }

    public static byte fromIntToByte(int value) throws Exception {
        String stringByte = "";
        if (value < 0 && value > 255) {
            throw new Exception("Must be from 0<=value<=255");
        }
        if (value <= 127) {
            for (int i = 0; i < 8; i++) {
                stringByte = String.valueOf(value % 2) + stringByte;
                value = value / 2;
            }
        } else {
            value = value / 2;
            for (int i = 0; i < 7; i++) {
                stringByte = String.valueOf(value % 2) + stringByte;
                value = value / 2;
            }
            stringByte = "-" + stringByte;
        }
        System.out.println(stringByte);
        byte b = Byte.parseByte(stringByte, 2);
        return b;
    } 
```

# c - Bsearch在C中匹配一系列元素，而不是特定元素

> ID：15191917
> 
> 赞同：1
> 
> 时间：2013-03-03T22:53:38.170
> 
> 标签：c, search, bsearch

我正在尝试对包含十六进制地址的结构数组进行二进制搜索。每个结构都有几个地址，当我给出输入地址时，我想找到具有跨越我输入地址的范围的结构，而不仅仅是与结构开始的地址完全匹配。

我可以用 bsearch 做到这一点吗？我很难找到适用于此的比较功能。

ptrSymbolArray 包含原始数据。这个函数看起来有点毫无意义，因为为了让这个更简单，我已经消除了我在 ptrSymbolArray 的数据上使用的条件。在这里，我包括来自原始数据的所有内容。

```
typedef struct{
  int name;
  int address;
} testStruct

static testStruct **fillArray(testStruct *ptrSymbolArray, int *arraySize,
                char *ptrNameArray, int *arrcount){
  testStruct **fillArray = malloc((*arraySize)*sizeof(testStruct));
  for(int i=0; i< *arraySize; i++){  
      fillArray[*arrcount] = ptrSymbolArray+i;
      (*arrcount)++;
    }
  }
  return fillArray;
} 
```

我实际处理的数据是在 ac 文件中存储函数名称、地址等的文件。我想输入一个地址来知道我在哪个函数中。为此，我需要能够匹配结构内的地址，而不仅仅是结构开头的地址。

# python - 将python dicts的最坏情况时间复杂度优化为O(1)

> ID：15191918
> 
> 赞同：2
> 
> 时间：2013-03-03T22:53:48.617
> 
> 标签：python, memory, dictionary, hashtable, complexity-theory

我必须在内存（RAM）中存储 500M 两位 unicode 字符。

我使用的数据结构应该有：

```
Worst Case Space Complexity: O(n)
Worst Case Time Complexity: O(1) <-- insertion, read, update, deletion 
```

我正在考虑选择 dict ，它是 python 中哈希的实现，但问题是它仅在平均情况下确保所需操作的 O(1) 时间复杂度，而不是最坏情况。

我听说如果知道条目的数量，在最坏的情况下可以实现 O(1) 的时间复杂度。

怎么做？

万一这在 python 中是不可能的，我可以直接在我的 python 代码中访问内存地址和数据吗？如果是，那么如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T23:14:24.847

大多数情况下，性能损失（通常发生在碰撞中）会在所有调用中摊销。因此，对于最实际的使用，您不会`O(n)`每次通话都收到。事实上，唯一会导致`O(n)`每次调用都受到打击的情况是每个键的哈希与现有键的哈希值冲突的病态情况（即哈希表的最坏可能（或最不幸）的使用）。

例如，如果您事先知道您的一组键，并且您知道它们不会发生散列冲突（即它们的所有散列都是唯一的），那么您将不会遇到冲突情况。另一个主要`O(n)`操作是哈希表调整大小，但这种操作的频率取决于实现（扩展因子/哈希函数/冲突解决方案等），并且它也会根据输入集在运行之间变化。

在任何一种情况下，如果您可以使用所有键预先填充字典，您都可以避免突然的运行时减速。这些值可以设置为无，然后用它们的实际值填充。当最初用键“启动”字典时，这应该会导致唯一明显的性能损失，并且未来的值插入应该是恒定的时间。

一个完全不同的问题是您打算如何读取/查询结构？您是否需要附加单独的值并通过密钥访问它们？应该订购吗？也许 a`set`可能比 a 更合适`dict`，因为您实际上并不需要`key:value`映射。

**更新：**

根据您在评论中的描述，即使您正在使用临时集，这听起来更像是数据库要做的工作。您可以使用内存中的关系数据库（例如使用 SQLite）。此外，您可以使用像 SQLAlchemy 这样的 ORM 以更 Python 的方式与数据库交互，而无需编写 SQL。

甚至听起来您可能一开始就从数据库中读取数据，所以也许您可以进一步利用它？

存储/查询/更新大量唯一键入的记录正是 RDBMS 经过数十年的开发和研究专门从事的工作。使用预先存在的关系数据库（例如 SQLite 的）的内存版本可能是更实用和可持续的选择。

尝试使用 python 的内置模块并通过在构建时提供 db 文件路径来[`sqlite3`](http://docs.python.org/2/library/sqlite3.html)尝试内存版本：`":memory:"`

```
con = sqlite3.connect(":memory:") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T23:07:46.597

从技术上讲，字典的最坏情况是 O(n)，但它极不可能发生，而且在你的情况下也可能不会发生。我会尝试使用 Dictionary 并且仅在这不足以满足您的需求时才切换到不同的实现。

[这是关于该主题的有用线程](https://stackoverflow.com/questions/4857919/why-is-does-dict-have-worst-case-on-for-so-many-operations)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T00:35:56.330

您是否有理由关心最坏情况下的性能而不是平均性能？任何合理的哈希表都会给你 O(N) 的平均性能。

如果您真的想要 O(1) 的最坏情况性能，这里有两种可能的方法：

1.  有一个`max(charCode)-min(charCode)`条目向量，并直接从 unicode 字符代码中查找您想要的值。如果您的键位于足够紧凑的范围内，您可以将其放入 RAM 中，这将很有效。

2.  使用蛮力方法来选择散列函数或字典大小（使用字典的自定义实现，让你控制它），并不断尝试新的函数和/或大小，直到你得到一个没有冲突的函数和/或大小。预计这需要很长时间。 *我不推荐这个。*

**编辑：**

假设您知道您将看到的最小字符代码是 1234，而您将看到的最大字符代码是 98765。进一步假设您有足够的 RAM 来容纳 98765-1234 个元素。我还将假设您愿意使用该`numpy`库或其他一些有效的数组实现。在这种情况下，您可以像这样将值存储在向量中：

```
# configuration info
max_value = 98765 # replace with your number
min_value = 1234  # replace with your number
spread = (max_value - min_value)
dtype = object # replace with a primitive type if you want to store something simpler

# create the big vector
my_data = numpy.empty((spread,), dtype=dtype)

# insert elements
my_char_code              = ...
my_value_for_my_char_code = ...

assert min_value <= my_char_code < max_value
my_data[my_char_code - min_value] = my_value_for_my_char_code

# extract elements
my_char_code              = ...
assert min_value <= my_char_code < max_value
my_value_for_my_char_code = my_data[my_char_code - min_value] 
```

这是 O(1)，因为查找是使用指针算法实现的，并且不依赖于存储在数组中的元素数量。

如果您实际要存储的元素数量远小于`spread`. 例如，如果`spread`是 40 亿（全部 UTF32），那么`my_data`仅此一项就将消耗至少 40 亿 * 8 字节/指针 = 32 GB 的 RAM（可能更多；我不知道 Python 引用有多大）。另一方面，如果`min_value`是 30 亿 和`max_value = min_value + 100`，那么内存使用量会很小。

# c# - Visual Studio - 从异常返回

> ID：15191922
> 
> 赞同：4
> 
> 时间：2013-03-03T22:54:21.647
> 
> 标签：c#, visual-studio-2010, visual-studio, exception

如何处理正在 Visual Studio 2012 中调试/运行的程序，该程序显示未处理的异常并且程序停止（我的程序有错误）？有没有办法在异常发生之前将程序上的堆栈返回到上一行？

现在，每当程序中出现异常时，我都必须重新启动程序并捕获（在我的情况下，这需要很长时间）。在 Visual Studio 中抛出/显示异常之后，我想回到异常行之前的上一行，然后从那里开始。

有没有办法在 Visual Studio 中做到这一点？任何命令或按钮？

像这样：

```
line 1: object _hello = GetSomeObject()

line 2: if(_hello.Property == true) {
} // exception line - _hello is null 
```

我想在不停止调试的情况下在同一实例中返回第 1 行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T22:57:31.763

Once the exception is thrown you can't backtrack, you will need to first use the call stack to identify how the exception occurs, and then set a break point just before it.

The next time you debug your code, when when the debugger hits your breakpoint, you can drag the arrow pointer up to a previous line to backtrack execution to that line, then use Watch/Quick Watch, etc.

The Call Stack can be accessed in VS2012 via *Debug menu -> Other Windows -> Call Stack*.

Once you have looked at the call stack you will know how your program reaches the exception condition and therefore where to set your breakpoint. It depends on your situation but, just using the call stack and intellisense may solve your problem without stepping through code.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T23:11:00.287

右键单击要返回的行并选择“设置下一条语句”（Ctrl + Shift + F10）。这通常会将您带回该位置，而无需重新开始。我听说你只能这样做一次，但我并不经常使用它，所以不知道为什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T23:06:14.257

有关使用调用堆栈的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/a3694ts5.aspx)。

调用堆栈顶部的行是您的异常发生的地方。

如果单击顶部的第二行，您可以查看在异常行之前发生的函数或过程调用。

![在此处输入图像描述](../Images/e72f2d886ccd9e773f6096abef52e110.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T23:17:33.413

我不知道您使用的是 VS 2012 的哪个 SKU，但如果它具有[IntelliTrace](http://msdn.microsoft.com/en-us/library/dd264915.aspx)功能，您绝对应该检查一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-01T15:51:00.573

转到菜单中的调试-> 异常。对于您要查找的任何异常，单击已抛出复选框。程序运行时

# css - 部门边界不被尊重

> ID：15191923
> 
> 赞同：1
> 
> 时间：2013-03-03T22:54:24.253
> 
> 标签：css, layout, css-float

尽可能简洁明了。我有一个分区，“盒子”，固定宽度为 1200 像素，用于包含其他几个分区。其中一个分区是链接栏，“粉色栏”，宽度为 100%，高度为 25px；。我正在尝试在这个“pinkbar”部门中添加一个无序列表，内联显示并向右浮动。列表显示，向右浮动，但在分区下方的行上，而不是在分区内。该部门有足够的空间，绝对没有理由需要新的生产线。我尝试修改各种参数，例如将“pinkbar”的宽度设置为 1200px，但没有任何效果。有人可以解释为什么这些列表元素能够存在于它们被调用的部门之外吗？

```
#thebox{
   padding-top: 0px; 
   margin-top: 0px; 
   margin-left: auto; 
   margin-right: auto; 
   width: 1200px; 
   height: 250px;
}

#pinkbar{
   background-image: url(../visual/pinkMenuBar.jpg); 
   background-repeat: no-repeat; 
   padding-top: 3px; 
   padding-left: 30px;
   padding-right: 10px; 
   margin-top: 0px; 
   margin-left: 0px; 
   margin-right: 0px; 
   width: 100%; 
   height: 25px; 
}

ul.nav{ 
    list-style-type: none; 
}

ul.nav li{
   border-left-width: 2px;
   border-left-style: groove;
   border-left-color: grey;
   display: inline;
   float: right; 
}

<div id="pinkbar" class="cambria3black">Tel: 111 111 1111
   <ul class="nav">
        <li>Testimonials</li>
        <li>About</li>
        <li>Fees</li>
    </ul>
</div> 
```

同样，列表元素内联显示、向右浮动并有边框。他们只是不在部门的范围内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:00:22.440

您也应该浮动容器 ( `ul`)，因为它是一个块元素，所以它会尝试填充它可以填充的最大空间宽度 - 从而落入下一行。

```
ul.nav { 
    list-style-type: none; 
    float: right; /* floats to the right, so will fit on the same line */
    margin: 0; /* gets rid of the default list margins */
} 
```

我创建[了一个小 jsFiddle](http://jsfiddle.net/TUvSJ/)，其中包含您的代码的缩小（和工作）版本。

# ruby-on-rails-3 - create a "POST" form

> ID：15191924
> 
> 赞同：0
> 
> 时间：2013-03-03T22:54:37.260
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

I am not sure how to create a POST form. I currently have a form that takes users input and create an entry in my movies table. I want to have a button that takes a set of given attributes and is added to the table once a user only clicks a button.

In my searches controller I have:

```
def index
  @movie = Movie.new   
end 
```

This is in the index view of searches:

```
<%= simple_form_for(@movie, :url => { :action => "create" }) do |f| %>
    <%= f.input :title, :as => :hidden, :input_html => { :value => "Skyfall" } %>
    <%= f.input :year, :as => :hidden, :input_html => { :value => "2012" } %>
    <%= f.input :description, :as => :hidden, :input_html => { :value => "James Bond" } %>
    <%= f.association :genres, include_blank: false, :as => :hidden, :input_html => { :value => "some value" } %>
    <%= f.button :submit, class: "btn btn-warning" %>
<% end %> 
```

Currently it routes to [http://localhost:3000/search.4] Ideally I want it to route to [http://localhost:3000/movies/4]

routes:

```
 searches GET    /searches(.:format)          searches#index
            POST   /searches(.:format)          searches#create
 new_search GET    /searches/new(.:format)      searches#new
edit_search GET    /searches/:id/edit(.:format) searches#edit
     search GET    /searches/:id(.:format)      searches#show
            PUT    /searches/:id(.:format)      searches#update
            DELETE /searches/:id(.:format)      searches#destroy
     movies GET    /movies(.:format)            movies#index
            POST   /movies(.:format)            movies#create
  new_movie GET    /movies/new(.:format)        movies#new
 edit_movie GET    /movies/:id/edit(.:format)   movies#edit
      movie GET    /movies/:id(.:format)        movies#show
            PUT    /movies/:id(.:format)        movies#update
            DELETE /movies/:id(.:format)        movies#destroy
     search GET    /search(.:format)            movies#search
     genres GET    /genres(.:format)            genres#index
            POST   /genres(.:format)            genres#create
  new_genre GET    /genres/new(.:format)        genres#new
 edit_genre GET    /genres/:id/edit(.:format)   genres#edit
      genre GET    /genres/:id(.:format)        genres#show
            PUT    /genres/:id(.:format)        genres#update
            DELETE /genres/:id(.:format)        genres#destroy
       root        /                            movies#index 
```

routes.rb

```
Movies::Application.routes.draw do
  resources :searches
  resources :movies
  get 'search', to: 'movies#search', as: :search

  resources :genres
  root :to => 'movies#index'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:49:54.953

那是因为你是从搜索控制器/视图调用它，尝试类似：

```
<%= simple_form_for @movie do |f| %> 
```

或者

```
<%= simple_form_for @movie, url: movie_path(@movie) do |f| %> 
```

或最坏的情况（因为它将是固定路径）：

```
<%= simple_form_for @movie, url: movies_path, method: post do |f| %> 
```

# sql - Selecting region information of product in northwind

> ID：15191927
> 
> 赞同：0
> 
> 时间：2013-03-03T22:54:40.493
> 
> 标签：sql, northwind

I want to to do following in northwind database:

**Display the Product Names of all products that were placed by customers in CA** but I'm confused how to relate a **product** with **customer**.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:34:04.800

根据我的回忆，您需要将`products`表加入`orders`,`orderDetails`和`customers`表以获取客户订购的产品列表`CA`：

```
select distinct p.ProductName
from customers c
inner join orders o
  on c.customerId = o.customerId
inner join orderDetails od
  on o.orderId = od.orderid
inner join products p
  on od.productid = p.productid
where c.Region = 'CA' 
```

或者您可以使用`EXISTS`：

```
select p.ProductName
from products p
where exists (select od.productid
              from customers c
              inner join orders o
                on c.customerId = o.customerId
              inner join orderDetails od
                on o.orderId = od.orderid 
              where c.Region = 'CA'
                and p.productid = od.productid) 
```

请参阅带有 两个查询[示例的 SQL Fiddle 演示。](http://sqlfiddle.com/#!6/7dbe0/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T01:27:51.123

```
SELECT DISTINCT PRD.PRODUCTNAME 
FROM CUSTOMERS AS CUST
INNER JOIN ORDERS AS ORD
ON CUST.CUSTOMERID=ORD.CUSTOMERID
INNER JOIN [ORDER DETAILS] AS ORDDETAILS
ON ORD.ORDERID=ORDDETAILS.ORDERID
INNER JOIN PRODUCTS AS PRD
ON ORDDETAILS.PRODUCTID=PRD.PRODUCTID
WHERE CUST.REGION='CA' 
```

要按产品名称升序列出结果，请将其添加到末尾

```
ORDER BY PRD.PRODUCTNAME ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T17:59:02.233

以下为我完成了这项工作

```
Select distinct Products.ProductName From Products 
Where Products.ProductID in 
 (Select [Order Details].ProductID From [Order Details] Where [Order Details].OrderID in(select Orders.OrderID from Orders where Orders.CustomerID in(select Customers.CustomerID from Customers where Customers.Region='CA')))
 order by Products.ProductName; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T22:59:05.327

尝试这个：

```
Select o.pdt_name From orders o 
Where o.cust_no in 
 (Select c.cust_no From customers c Where c.state = 'CA')
order by o.pdt_name 
```

# c++ - 在赋值运算符中分配 std::shared_ptr

> ID：15191931
> 
> 赞同：5
> 
> 时间：2013-03-03T22:55:31.087
> 
> 标签：c++, c++11

我正在创建自己的自定义过滤器类以在 boost::filtered_graph 中使用。WeightMap 概念必须具有默认构造函数、复制构造函数和赋值运算符。

我创建了下面的类，它有一个 std::shared_ptr 私有成员。我的问题是我应该如何编写赋值运算符。复制构造函数没有问题，但赋值运算符不起作用。

```
class BFDMFilter
{
private:
const BGraph* m_battlemap;
const std::shared_ptr<MoveAbility> m_mv_ab;

public:
BFDMFilter() : m_battlemap(nullptr), m_mv_ab() { }
BFDMFilter(const BGraph* bmap, std::shared_ptr<MoveAbility> mv) : m_battlemap(bmap), m_mv_ab(mv) { }

BFDMFilter(const BFDMFilter& filter) : m_battlemap(filter.m_battlemap), m_mv_ab(filter.m_mv_ab) { }
BFDMFilter& operator=(const BFDMFilter& filter) 
{
  if(this != &filter)
  {
m_battlemap = filter.m_battlemap;
m_mv_ab = filter.m_mv_ab;
  }

  return *this;
}

bool operator()(const Edge& edge) const 
{ 
  Tile::TileEdge path = (*m_battlemap)[edge];

  return m_mv_ab->CanMove(path.TerrainType()) > 0.0;
}

bool operator()(const Vertex& vertex) const 
{ 
  Tile tile = (*m_battlemap)[vertex];

  return m_mv_ab->CanMove(tile.TerrainType()) > 0.0;
}
}; 
```

然后给我一个编译错误：

```
error: passing ‘const std::shared_ptr<momme::battle::MoveAbility>’ as ‘this’ argument of ‘std::shared_ptr<_Tp>& std::shared_ptr<_Tp>::operator=(std::shared_ptr<_Tp>&&) [with _Tp = momme::battle::MoveAbility, std::shared_ptr<_Tp> = std::shared_ptr<momme::battle::MoveAbility>]’ discards qualifiers [-fpermissive] 
```

我明白为什么；赋值运算符在进行赋值时修改 shared_ptr 的引用计数，以便它可以跟踪有多少打开的引用。但是，我该如何编写赋值运算符呢？std::weak_ptr 具有相同的行为，如果我将引用设为非常量，则 boost 库会抱怨该函数已被删除。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T23:00:05.993

您的代码似乎没有任何理由声明`m_mv_ab`为

```
const std::shared_ptr<MoveAbility> m_mv_ab; 
```

这是以下的智能指针版本：

```
MoveAbility * const m_mv_ab; 
```

（指向非常量的常量指针`MoveAbility`）

如果您不想修改指向的`MoveAbility`对象并希望它是`const`，您应该这样做：

```
std::shared_ptr<const MoveAbility> m_mv_ab; 
```

这是以下的智能指针版本：

```
const MoveAbility * m_mv_ab; 
```

（指向常量的非常量指针`MoveAbility`）

为了使它更直观一点，您可以始终将`const`其用作后缀并且始终从右到左读取，除了`std::shared_ptr<X>`读取“（智能）指向 X 的指针”：

```
std::shared_ptr<MoveAbility> const m_mv_ab; // const ptr to non-const MoveAbility
MoveAbility * const m_mv_ab; // const ptr to non-const MoveAbility

std::shared_ptr<MoveAbility const> m_mv_ab; // non-const ptr to const MoveAbility
MoveAbility const * m_mv_ab; // non-const ptr to const MoveAbility 
```

但是大多数人`const`尽可能使用前缀，这会让人感到困惑。

# internet-explorer - IE rendering mode

> ID：15191933
> 
> 赞同：0
> 
> 时间：2013-03-03T22:55:35.707
> 
> 标签：internet-explorer

I am a bit confused on how IE 9 and IE 10 decide to render

On one of my customers machine it was using IE 7 document mode and on another it was using standard mode.

Does the doctype affect how it renders?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T22:58:39.200

The mode could be controlled by the [X-UA-Compatible](http://msdn.microsoft.com/en-us/library/ie/ms533876%28v=vs.85%29.aspx) meta tag or HTTP response header:

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

or if you want to render with the latest available mode you could use `edge`:

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

# javascript - Inverse regex javascript

> ID：15191935
> 
> 赞同：3
> 
> 时间：2013-03-03T22:55:48.480
> 
> 标签：javascript, regex-negation

I'm trying to remove everything in a string that does not match 'standard' characters. Heres what I have so far:

```
var result = myString.replace(/^(?![A-Za-z0-9]+)/g, ''); 
```

Which does not work. Can someone point to me what I'm not doing right?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T22:57:21.240

I think you mean this:

```
var result = myString.replace(/[^a-z0-9]/gi,''); 
```

# c - How to disable GtkColorButton?

> ID：15191938
> 
> 赞同：1
> 
> 时间：2013-03-03T22:56:21.363
> 
> 标签：c, gtk

So I'm using a GtkColorButton as a color sampler (to show what color is currently being used). For complicated reasons I don't want the selection options to come up when I click on it (I have another way of picking the color). Is there a way to disable this functionality? In other words, I just want the GtkColorButton to sit there so I can change the color shown on it through gtk_color_button_set_color (), but I don't want it to be able to be clicked.

Thanks in advance for any help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:19:14.673

`gtk_widget_set_sensitive (widget, FALSE);`将禁用小部件，但仍会显示颜色

# jquery - Using conditional statements in jquery append

> ID：15191940
> 
> 赞同：2
> 
> 时间：2013-03-03T22:56:41.473
> 
> 标签：jquery, json

Total noob here, trying to conditionally append some values to an html object. This is built from sample code I found so be kind...

```
$.getJSON('url to facebook json feed', function(fbresults){
    $.each(fbresults.data, function(){
        $('<div></div>')
        .append('<h1>' + this.from.name + '</h1>')
        .append('<p>' + this.story + '</p>')
        $if (typeof this.picture !== "undefined") {
            .append('<img src="' + this.picture + '">')};
        .appendTo('#facebook')
          });
     }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-30T20:47:27.087

jQuery 的`append`方法接受多个元素，包括 null 对象，例如：

```
$('<div>').append(
    $('<p>').text('First paragraph'),
    $('<p>').text('Second paragraph'),
    null,
    $('<p>').text('Third paragraph')
); 
```

这相当于

```
$('<div>').append(
    $('<p>').text('First paragraph')
).append(
    $('<p>').text('Second paragraph')
).append(
    null
).append(
    $('<p>').text('Third paragraph')
); 
```

请注意，`null`在最终的 DOM 元素中将简单地忽略对象。

因此，您可以按如下方式调整代码：

```
$.getJSON('url to facebook json feed', function(fbresults){
    $.each(fbresults.data, function(){
        $('<div></div>').append(
            $('<h1>').html(this.from.name),
            $('<p>').html(this.story),
            (this.picture) ?
                $('<img>').attr('src', this.picture) :
                null
        ).appendTo('#facebook')
    });
}); 
```

附加到的第三个元素`div`是`img`元素或`null`取决于`this.picture`是否定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T23:02:10.330

您不必将它们全部链接在一起：

```
$.getJSON('url to facebook json feed', function(fbresults){
    $.each(fbresults.data, function(){
        var element = $('<div></div>');
        element.append('<h1>' + this.from.name + '</h1>');
        element.append('<p>' + this.story + '</p>');

        if (typeof this.picture !== "undefined") {
            element.append('<img src="' + this.picture + '">')
        };
        element.appendTo('#facebook');
    });
}); 
```

构建您想要在字符串中附加的内容并将其附加在 $.each 之后也被认为是一种很好的做法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T22:59:45.557

jQuery 只是一个 JavaScript 库。您仍在使用 JavaScript：

```
$.getJSON('url to facebook json feed', function(fbresults){
    $.each(fbresults.data, function(){
        var $div = $('<div>');

        $('<h1>', {text: this.from.name}).appendTo($div);
        $('<p>', {text: this.story}).appendTo($div);

        if (this.picture) {
            $('<img>', {src: this.picture}).appendTo($div);
        }

        $div.appendTo('#facebook');
     });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T23:00:43.797

尝试这样的事情：

```
$.getJSON('url to facebook json feed', function(fbresults){
    $.each(fbresults.data, function(){
        var $wrapper = $('<div></div>')
            .append('<h1>' + this.from.name + '</h1>')
            .append('<p>' + this.story + '</p>');

        if (this.picture) {
            $wrapper.append('<img src="' + this.picture + '">');
        } else {
            $wrapper.appendTo('#facebook');
        }
    });
}); 
```

# mysql - MySQL is so slow on Amazon EC2 m1.large

> ID：15191943
> 
> 赞同：0
> 
> 时间：2013-03-03T22:57:06.023
> 
> 标签：mysql

I'm migration my .NET/MSSQL to RoR/MySQL/EC2/Ubuntu platform. After I transferred all my existing data into MySQL, I found the MySQL querying speed is incredibily slow, even for a super-basic query , like querying a `select count(*) from countries`, it's just a country table, only contains around 200 records, but it takes 0.124ms for the query. It's obviously not normal.

I'm a newbie to MySQL, can anyone tell me what would be the possible problem? Or any initial optimization button I should turn on after installing MySQL?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:15:59.860

`count(*)`操作无法真正优化，因为它必须进行全表扫描（`O(n)`）或读取缓存表计数（`O(1)`），具体取决于您使用的数据库引擎。无论哪种方式，您的查询都不应该那么慢。您可能想要联系 AWS 支持。盒子可能被其他运行在上面的进程阻塞了。

# symfony - PayPal in Symfony2

> ID：15191944
> 
> 赞同：8
> 
> 时间：2013-03-03T22:57:08.460
> 
> 标签：symfony, paypal, paypal-sandbox

I'm trying to use `JMSPaymentCoreBundle` with `JMSPaymentPaypalBundle` and I can't find a clear example anywhere on how to do it.

I've done all steps specified in the documentation and I'm not able to get it working. Can anybody help me please?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-19T09:38:55.717

[Payum 捆绑包支持通过](http://payum.org/doc#PayumBundle)[桥接](http://payum.org/doc#JMSPaymentBridge)的 jms 支付。这些链接描述了如何开始。

使用捆绑包给您带来了几个优势：

*   安全的捕获操作。
*   有信用卡表格，可以向用户索要信用卡
*   能够轻松设置 IPN。通知操作也是安全的。
*   内置支持所有omnipay 网关（25 +）、jms 插件（+ 10）和payum 本机库。
*   Payum paypal lib 支持开箱即用的定期付款和数字商品。
*   存储集成到支付流程中，因此您不必担心数据可能会丢失。
*   域友好。Payum 确实提供了一些模型，但并不限制您使用它们。
*   它已经支持 PSR-0 记录器。在 dev 中，它记录执行的 payum 操作，以便于调试（访问 symfony 配置文件日志选项卡）。
*   可以设置多个付款（例如，一个用于欧盟的贝宝账户，一个用于美国的）
*   非常可定制。添加您的自定义支付操作、扩展或存储。
*   有一个 symfony 沙箱（[代码](https://github.com/Payum/PayumBundleSandbox)| [web](http://sandbox.payum.forma-dev.com/)）可以帮助您开始。

PS 这不是完整的功能列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-03T23:20:17.453

创建支付指令的默认方式是通过 jms_choose_payment_method 表单：

```
$form = $this->getFormFactory()->create('jms_choose_payment_method', null, array(
        'amount'   => 12.99,
        'currency' => 'EUR',
        'default_method' => 'payment_paypal', // Optional
        'predefined_data' => array(
            'paypal_express_checkout' => array(
                'return_url' => $this->get('router')->generate('payment_complete', array(
                    'number' => $order->getOrderNumber(),
                ), true),
                'cancel_url' => $this->get('router')->generate('payment_cancel', array(
                    'number' => $order->getOrderNumber(),
                ), true)
            ),
        ),
    )); 
```

您也可以手动创建付款指令：

```
 use JMS\Payment\CoreBundle\Entity\ExtendedData;
        use JMS\Payment\CoreBundle\Entity\Payment;
        use JMS\Payment\CoreBundle\PluginController\Result;
        use JMS\Payment\CoreBundle\Plugin\Exception\ActionRequiredException;
        use JMS\Payment\CoreBundle\Plugin\Exception\Action\VisitUrl;
        use JMS\Payment\CoreBundle\Entity\PaymentInstruction;

        $extendedData = new ExtendedData();
        $extendedData->set('return_url', $this->get('router')->generate('payment_complete', array(
                'number' => $order->getOrderNumber(),
            ), true));

        $extendedData->set('cancel_url', $this->get('router')->generate('payment_cancel', array(
                'number' => $order->getOrderNumber(),
            ), true));

        $instruction = new PaymentInstruction((float)$order->getCharge() > 0 ? $order->getCharge() : $order->getAmount(), 'EUR', 'paypal_express_checkout', $extendedData);
        $this->get('payment.plugin_controller')->createPaymentInstruction($instruction);

        $order->setPaymentInstruction($instruction);
        $em = $this->get('doctrine.orm.entity_manager');
        $em->persist($order);
        $em->flush(); 
```

我的 payment_complete 路线如下所示：

```
public function completeAction(Booking $order)
{
    $instruction = $order->getPaymentInstruction();
    if (($instruction->getAmount() - $instruction->getDepositedAmount()) > 0) {
        if (null === $pendingTransaction = $instruction->getPendingTransaction()) {
            $payment = $this->get('payment.plugin_controller')->createPayment($instruction->getId(), $instruction->getAmount() - $instruction->getDepositedAmount());
        } else {
            $payment = $pendingTransaction->getPayment();
        }

        $result = $this->get('payment.plugin_controller')->approveAndDeposit($payment->getId(), $payment->getTargetAmount());
        if (Result::STATUS_PENDING === $result->getStatus()) {
            $ex = $result->getPluginException();

            if ($ex instanceof ActionRequiredException) {
                $action = $ex->getAction();

                if ($action instanceof VisitUrl) {
                    return new RedirectResponse($action->getUrl());
                }

                throw $ex;
            }
        } else if (Result::STATUS_SUCCESS !== $result->getStatus()) {
            throw new \RuntimeException('Transaction was not successful: '.$result->getReasonCode());
        }
    }

    $order->setTransactionAmount((float)$order->getAmount());
    $creditPurchased = (float)$order->getCharge() > (float)$order->getAmount() ? (float)$order->getCharge() - (float)$order->getAmount() : 0;
    $em->persist($order);
    $em->flush(); 
```

我已经通过[http://jmsyst.com/bundles/JMSPaymentCoreBundle/master/usage运行它](http://jmsyst.com/bundles/JMSPaymentCoreBundle/master/usage)

# actionscript-3 - How can I detect when the cursor changes to I-beam in AS3?

> ID：15191948
> 
> 赞同：5
> 
> 时间：2013-03-03T22:57:49.073
> 
> 标签：actionscript-3

I have a custom cursor in my flash project. By default the custom cursor remains visible when you hover over a textfield and you get the I-beam cursor and your custom cursor visible at the same time. To avoid this I need to hide my custom cursor whenever the I-beam cursor appears (i.e. when you hover the mouse over a textfield). Also the cursor is always set to MouseCursor.AUTO state. So how can I detect when it changes to I-beam? Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:23:03.987

这是试图模仿您想要的东西，它向舞台添加了一个事件侦听器，并检测是否在文本字段上发生翻转/滚动事件并相应地更改光标：

```
package 
{
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.text.TextField;
    import flash.ui.Mouse;
    import flash.ui.MouseCursor;

    public class Main extends Sprite 
    {

        private var textField1:TextField = new TextField();
        private var textField2:TextField = new TextField();

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);
            // entry point

            var loader:Loader = new Loader();
            loader.load(new URLRequest('bg.png'));
            addChild(loader);               

            textField1.text = "Text Field 1";
            textField1.border = true;
            textField1.x = 100;
            addChild(textField1);

            textField2.text = "Text Field 2";
            textField2.border = true;
            textField1.x = 400;
            addChild(textField2);

            Mouse.cursor = MouseCursor.HAND;

            stage.addEventListener(MouseEvent.ROLL_OVER, onRollOver, true);
            stage.addEventListener(MouseEvent.ROLL_OUT, onRollOut, true);
        }

        private function onRollOver(e:MouseEvent):void 
        {
            var tf:TextField = e.target as TextField;
            if (tf)
            {
                Mouse.cursor = MouseCursor.IBEAM;
                //hide your custom cursor here
            }
        }

        private function onRollOut(e:MouseEvent):void 
        {
            var tf:TextField = e.target as TextField;
            if (tf)
            {
                Mouse.cursor = MouseCursor.HAND;
                //show your custom cursor here
            }
        }
    }

} 
```

# c++ - Pass by reference

> ID：15191952
> 
> 赞同：-3
> 
> 时间：2013-03-03T22:58:16.827
> 
> 标签：c++

What is wrong with this code? This is a simplified version of what I'm doing. It's a recursive function calls on the same variable.

```
#include <iostream>

using namespace std;
void Foo(int& x)
{
    x++;
    Foo(x);
    cout<<x<<"\n";
    if(x==10)
        return;
}

int main()
{
    int x=0;
    Foo(x);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T22:59:52.037

这个函数没有终止条件，它只是无条件地调用自己，试图建立一个无限递归：

```
void Foo(int& x)
{
    x++;
    Foo(x); // <==== UNCONDITIONALLY RECURSIVE
    cout<<x<<"\n";
    if(x==10)
        return;
} 
```

由于每个函数调用的堆栈帧都会占用一些内存空间，因此不可能进行无限递归：迟早，您的堆栈将超出其限制大小，并且您的程序将被迫终止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T23:00:53.133

```
x++;
Foo(x);
cout<<x<<"\n";
if(x==10)
    return; 
```

问题是这会导致无限递归。您仅在函数调用自身`if (x == 10)` **后**检查，因此它不可能到达返回条件。通过编写解决此问题

```
x++;
if(x==10)
    return;

Foo(x);
cout<<x<<"\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T23:02:50.857

你有一个无限递归。它将继续创建堆栈帧，直到堆栈空间耗尽。在递归调用之前，您需要一个出口警卫：

```
void Foo(int& x)
{
    cout<<x<<"\n";
    if(x==10)
        return;
    x++;
    Foo(x);
} 
```

# wordpress - Wordpress 使用预定义的字符数；不使用更多标签

> ID：15191958
> 
> 赞同：0
> 
> 时间：2013-03-03T22:58:46.510
> 
> 标签：wordpress, tags

我的新 WordPress 网站在其首页上使用了预定义数量的字符，而不是允许我在我认为合适的地方使用标签。我该如何解决这个问题？我知道发布我的网址是违反政策的，但如果您能找到帮助我的方法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:35:39.867

WordPress 是否在您的`more`标签之前截断？如果是这样，您可以尝试使用[excerpt_length](http://codex.wordpress.org/Plugin_API/Filter_Reference/excerpt_length)过滤器增加摘录长度。让它返回适当数量的单词。

正如法典所说，请确保您使用高优先级（例如，如示例中的 999）以确保您的过滤器在任何其他过滤器之后运行。

# python - 如何使用python向wav文件添加噪声？

> ID：15191959
> 
> 赞同：1
> 
> 时间：2013-03-03T22:58:55.157
> 
> 标签：python, wav, noise

我有一个干净的 wav 和一个包含预先生成的噪声的 wav，我想将噪声添加到干净的 wav 文件中，以创建一个嘈杂的 wav。

我在[这里](http://uk.answers.yahoo.com/question/index?qid=20100407103425AA1oBjf)看到这可以用matlab轻松完成。

这怎么能用python完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:01:57.750

```
import numpy as np
from scikits.audiolab import wavread, wavwrite

data1, fs1, enc1 = wavread("file1.wav")
data2, fs2, enc2 = wavread("file2.wav")

assert fs1 == fs2
assert enc1 == enc2
result = 0.5 * data1 + 0.5 * data2

wavwrite(result, 'result.wav') 
```

但是，如果您有不同的采样率 ( `fs*`) 或编码 ( `enc*`)，那么您可能需要尝试更复杂的方法。（来自[这里](https://stackoverflow.com/questions/4039158/mixing-two-audio-files-together-with-python)）

**额外的**

如果您`data*`的数组大小不同，您可以将最短数组与较长数组的子集匹配：

```
min_size = min(len(data1), len(data2))

result = 0.5 * data1[:min_size] + 0.5 * data2[:min_size] 
```

或者您可以`wrap`使用最短的数组，使其与最长数组的长度相匹配：

```
short, long = (data1, data2) if len(data1) < len(data2) else (data2, data1)
n = len(long) / len(short)
new_array = np.tile(short, n)

result = 0.5 * long[:n] * 0.5 * new_array 
```

这些注释超出了您的问题范围。如果您还有其他问题，您可能应该将其标记为已解决并提出一个新问题。

# r - 如何在 R 包中构建具有恒定和线性趋势的 HoltWinters 和逐步自回归时间序列模型

> ID：15191960
> 
> 赞同：0
> 
> 时间：2013-03-03T22:58:56.027
> 
> 标签：r, statistics, time-series

我正在尝试在 R 中构建四个时间序列模型

1）趋势不变的HoltWinters，

2）具有线性趋势的HoltWinters，

3）具有恒定趋势的逐步自回归，

2) 具有线性趋势的逐步自回归

在 SAS 中，我可以使用 PROC Forecast 并指定方法和趋势选项来做到这一点。

你能帮我做这件事吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:57:11.667

对于 1 和 2：

```
library(forecast)
fit1 <- ets(x, model="ANA", damped=FALSE)
fit2 <- ets(x, model="AAA", beta=0, damped=FALSE, lower=rep(0,4)) 
```

默认情况下，`ets`不允许恒定分量（例如线性趋势），但将下限设置为 0 允许。

对于 3 和 4，我不确定您所说的“逐步自回归”是什么意思。也许您的意思是使用逐步过程选择术语的子集自回归。为此，请参阅 FitAR 包 ( [http://www.jstatsoft.org/v28/i02/paper](http://www.jstatsoft.org/v28/i02/paper) )。但是，我不认为它允许确定性趋势。

# 3d - java中的3D图形。投影

> ID：15191965
> 
> 赞同：0
> 
> 时间：2013-03-03T22:59:33.967
> 
> 标签：3d, projection

所以我正在编写这个简单的粒子系统/3D 程序，但我无法让投影工作。我对这些东西了解不多，所以我阅读了维基百科，我认为透视投影可能有用。我正在使用这个公式 [http://en.wikipedia.org/wiki/3D_projection#Perspective_projection](http://en.wikipedia.org/wiki/3D_projection#Perspective_projection)

我的画布没有显示任何东西，所以我认为投影是错误的。我有一个边缘在 (200, 200, 200) 和 (300, 300, 300) 的立方体，但它没有出现在屏幕上。我想也许我选择了错误的相机旋转值或其他东西，所以我尝试在所有 x、y 和 z 轴上以 10 个单位间隔绘制很多点，范围从 -100 到 100。然后我将相机放在 (0,0,0) 并认为我会看到一些东西，但我没有。它将所有内容投影到 NaN 或 (0,0)。我真的不明白我应该为 e 值选择什么。

这是代码。我省略了绘画和其他东西，并试图专注于投影。

```
package org.gcs.kinetic;

import java.awt.Color;
import java.util.ArrayList;

public class StillParticle extends Particle{
    Color getColor(){
        return Color.YELLOW;
    }

    @Override
    public void iterate(){

    }

    public static ArrayList<Particle> getCube(){
        ArrayList<Particle> result = new ArrayList<Particle>();
        StillParticle p;
        for(int i = -100; i < 100; i+=10){
            for(int j = -100; j < 100; j+=10){
                for(int k = -100; k < 100; k+=10){
                    p = new StillParticle();
                    p.setColor(Color.YELLOW);
                    p.setPosition(i, j, k);
                    p.setR(2);
                    result.add(p);
                }
            }
        }
        return result;
    }

} 
```

和

```
package org.gcs.kinetic;

public class Camera {
    Vector3D c;
    Vector3D o;
    Vector3D e;

    public Camera(Vector3D c, Vector3D o, Vector3D e) {
        this.c=c;
        this.o=o;
        this.e=e;
    }

    double[] project(Vector3D a){
        double dx = cos(o.y)*(sin(o.z)*(a.y-c.y)+cos(o.z)*(a.x-c.x))-sin(o.y)*(a.z-c.z);
        double dy = sin(o.x)*(cos(o.y)*(a.z-c.z)+sin(o.y)*(sin(o.z)*(a.y-c.y)+cos(o.z)*(a.x-c.x)))+cos(o.x)*(cos(o.z)*(a.y-c.y)-sin(o.z)*(a.x-c.x));
        double dz = cos(o.x)*(cos(o.y)*(a.z-c.z)+sin(o.y)*(sin(o.z)*(a.y-c.y)+cos(o.z)*(a.x-c.x)))-sin(o.x)*(cos(o.z)*(a.y-c.y)-sin(o.z)*(a.x-c.x));
        double[] result = new double[2];
        System.out.println(dx + ", "+ dy+ ", " + dz);
        result[0] = (dx-e.x)*(e.z/dz);
        result[1] = (dy-e.y)*(e.z/dz);
        System.out.println(a+ " projected to " + result[0]+ "," + result[1]);
        return result;
    }

    double cos(double x){
        return Math.cos(x);
    }
    double sin(double x){
        return Math.sin(x);
    }
} 
```

和

```
 /** Free for non-military use */
package org.gcs.kinetic;

import java.awt.*;

/**
 * A Particle is assumed to be spherical. The particle's mass
 * is assumed to be proportional to r^3\. Vector p is the center
 * of the particle's enclosing square, and Vector v contains
 * the particle's velocity components.
 *
 */
class Particle extends Object {

    private double radius = 0;
    private double mass = 0;
    protected int age = 0;
    int MAXAGE = 60;
    private Color color = new Color(0, true);
    private Image image = null;
    private Vector3D p = new Vector3D();
    private Vector3D v = new Vector3D();
    private Vector3D a = new Vector3D(0.0,0.1,0.0);
    public static Ensemble world;

    /**
     * Construct a dimensionless, massless, invisible,
     * stationary particle at the origin.
     */
    public Particle() {
    }

    /** Return a new Vector with this particle's position. */
    public Vector3D getPosition() {
        return new Vector3D(p);
    }

    /** Return the given Vector set to this particle's position. */
    public Vector3D getPosition(Vector3D p) {
        p.x = this.p.x; p.y = this.p.y; p.z=this.p.z;
        return p;
    }

    public double getX() {
        return this.p.x;
    }

    public double getY() {
        return this.p.y;
    }

    public double getZ() {
        return this.p.z;
    }

    public void setPosition(Vector3D p) {
        this.p.x = p.x;
        this.p.y = p.y;
        this.p.z = p.z;
    }

    public void setPosition(double x, double y, double z) {
        this.p.x = x;
        this.p.y = y;
        this.p.z = z;
    }

    public Vector3D getVelocity() {
        return new Vector3D(v);
    }

    public Vector3D getVelocity(Vector3D v) {
        v.x = this.v.x; v.y = this.v.y;v.z = this.v.z;
        return v;
    }

    public double getVx() { return this.v.x; }
    public double getVy() { return this.v.y; }
    public double getVz() { return this.v.z; }

    public double getVNorm() {
        return v.norm();
    }

    public void setVelocity(Vector3D v) {
        this.v.x = v.x; this.v.y = v.y; this.v.z = v.z;
    }

    public void setVelocity(double vx, double vy, double vz) {
        this.v.x = vx; this.v.y = vy; this.v.z=vz;
    }

    /** Set this particle's radius and imputed mass. */
    public void setR(double radius) {
        this.radius = radius;
        this.mass = radius * radius * radius;
    }

    public double getR() { return this.radius; }

    public double getM() { return this.mass; }

    Color getColor() {
        double factor = age/(double)MAXAGE;
        int red = (int) ((1-factor)*color.getRed());
        int green = (int) ((1-factor)*color.getGreen());
        int blue = (int) ((1-factor)*color.getBlue());
        return new Color(red, green, blue);
    }

    public void setColor(Color color) { this.color = color; }

    public Image getImage() { return image; }

    public void setImage(Image image) { this.image = image; }

    public void iterate() {
        age++;
        updatePos();
        updateVelocity();
        //updateAcceleration();
        if(age==MAXAGE)
            world.removedParticles.add(this);
    }

    protected void updatePos() {
        p.x += v.x;
        p.y += v.y;
        p.z += v.z;
    }

    protected void updateVelocity() {
        v.x += a.x;
        v.y += a.y;
        v.z += a.z;
    }

    private void updateAcceleration() {

    }
} 
```

和

```
/** Free for non-military use */
package org.gcs.kinetic;

/**
 * Vector represents a 3D-Vector
 *
 * @see Particle
 * @see Ensemble
 */
class Vector3D extends Object {

    /** The Vector's x and y component. */
    public double x;
    public double y;
    public double z;

    /** Construct a null Vector, <0, 0, 0> by default. */
    public Vector3D() {
    }

    /**
     * Construct a new Vector from two doubles.
     * @param x the x component
     * @param y the y component
     * @param z the z component
     */
    public Vector3D(double x, double y, double z) {
        this.x = x; this.y = y; this.z = z;
    }

    /**
     * Construct a new Vector from two integers.
     * @param x the x component
     * @param y the y component
     * @param z the z component
     */
    public Vector3D(int x, int y, int z) {
        this.x = x; this.y = y; this.z = z;
    }

    /**
     * Construct a new Vector from an existing one.
     * @param v the source Vector
     */

    public Vector3D(Vector3D v) {
        this.x = v.x; this.y = v.y; this.z = v.z;
    }

    /** Set the components of this Vector.
     * @param x the x component
     * @param y the y component
     * @param z the z component
     * @return this Vector.
     */
    public Vector3D set(double x, double y, double z) {
        this.x = x; this.y = y; this.z = z;
        return this;
    }

    /**
     * Set the coordinates of this Vector3D to those of v.
     * @param v the source Vector3D
     * @return this Vector3D.
     */
    public Vector3D set(Vector3D v) {
        this.x = v.x; this.y = v.y; this.z = v.z;
        return this;
    }

    /**
     * Return the length of this Vector.
     * @return the length of this Vector
     */
    public double norm() {
        return  Math.sqrt(x*x + y*y + z*z);
    }

    /**
     * Add the given Vector to this Vector; return this Vector.
     * @param v the given Vector
     * @return the sum
     */
    public Vector3D add(Vector3D v) {
        this.x += v.x;
        this.y += v.y;
        this.z += v.z;
        return this;
    }

    /**
     * Subtract the given Vector from this Vector; return this Vector.
     * @param v the given Vector
     * @return the difference
     */
    public Vector3D subtract(Vector3D v) {
        this.x -= v.x;
        this.y -= v.y;
        this.z -= v.z;
        return this;
    }

    /**
     * Multiply the given Vector by this Vector; return the scalar product.
     * @param v the given Vector
     * @return the scalar (dot) product
     */
    public double dot(Vector3D v) {
        return (this.x * v.x) + (this.y * v.y) + (this.z*v.z);
    }

    /**
     * Scale this Vector by the given scale factor.
     * @param s the scale factor
     * @return the this Vector, scaled by s
     */
    public Vector3D scale(double s) {
        this.x *= s; this.y *= s; this.z *=s;
        return this;
    }

    /**
     * Scale this Vector by 1 / norm(); return this Vector.
     * The result is a unit Vector parallel to the original.
     * This is equivalent to this.scale(1 / this.norm()),
     * with a check for division by zero.
     * @return the this Vector, scaled to unit length
     */
    public Vector3D unitVector() {
        double d = norm();
        if (d != 0) { this.x /= d; this.y /= d; this.z /= d;}
        return this;
    }

    /** Return this Vector's String representation. */
    public String toString() {
        return "<" + this.x + ", " + this.y +", "+ this.z + ">";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:29:58.183

您的 3d 投影公式应为：

```
proj.x = x * factor / (z + factor) + center.x
proj.y = y * factor / (z + factor) + center.y 
```

其中 factor 是个人选择的数量（我选择 250）， center 是消失点。

例子：

*   如果 z 是无限的，则 proj = center。
*   如果 z 为 0，则 proj 将保持不变。

笔记：

x 和 y 是相对于相机的，为此你从它们的真实位置中减去相机位置（我认为你也必须应用旋转）。

# java - 无法在java中读取文件

> ID：15191966
> 
> 赞同：0
> 
> 时间：2013-03-03T22:59:40.117
> 
> 标签：java

我试图让用户输入一个整数，基于整数值，我正在调用 mix 函数来读取文件内容，如下面的代码所示。我得到了，这个错误：

```
Project2.java:43: variable urlScan might not have been initialized
                        while (urlScan.hasNext())
                               ^
Project2.java:34: unreported exception java.io.FileNotFoundException; must be caught or declared to be thrown
                fileScan = new Scanner (new File("input.txt"));
                       ^ 
```

任何想法，我可能在这里做错了什么？

```
import java.util.Scanner;
import java.io.*;

public class Project2
{
    public static void main(String[] args) 
    {

                System.out.println("Select an item from below: \n");
                System.out.println("(1) Mix");
                System.out.println("(2) Solve");
                System.out.println("(3) Quit");

                int input;
                Scanner scan= new Scanner(System.in);
                input = scan.nextInt();

                System.out.println(input);  
                if(input==1) {
                    mix();
                }
                else{
                    System.out.println("this is exit");
                    } 
        }

        public static void mix()
          {
                String url;
                Scanner fileScan, urlScan;
                fileScan = new Scanner (new File("input.txt"));
                // Read and process each line of the file
                while (fileScan.hasNext())
                    {
                        url = fileScan.nextLine();
                        System.out.println ("URL: " + url);
                        //urlScan = new Scanner (url);
                        //urlScan.useDelimiter("/");
                        //  Print each part of the url
                        while (urlScan.hasNext())
                        System.out.println ("   " + urlScan.next());
                        System.out.println();
                     }
            }
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:02:13.590

这些错误非常具有表现力。

*   初始化你的`urlScan` **局部变量**（局部变量没有默认值）
*   环绕`fileScan = new Scanner (new File("input.txt"));`四周`try/catch`。或声明您的方法可能会在您的方法签名中抛出 FileNotFoundException。（new File(str) 可能会抛出`FileNotFoundException`已**检查的异常**，编译器将强制您处理它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:02:29.633

首先，`urlScan`没有初始化。

其次，你应该`fileScan = new Scanner (new File("input.txt"));`用 try/catch for包围`FileNotFoundException`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T23:03:52.653

局部变量**必须**在使用前初始化，所以取消注释这一行：

```
urlScan = new Scanner (url); 
```

# java - 制作可在 jar 中访问的文件夹

> ID：15191974
> 
> 赞同：0
> 
> 时间：2013-03-03T23:00:13.600
> 
> 标签：java, swing, file

我想要一个选项，当用户选择自动登录选项时...我的程序将创建一个文件夹并将文件保存在其中...当程序启动时，它将在其中查找文件夹而不是文件。问题是当我通过 netbeans 运行我的代码时，它运行良好，但是当我通过 jar 运行它时，它找不到任何文件夹。任何人都可以指导我，在运行时创建文件夹并访问它的最佳方法是什么。下来是我的文件编写代码...

```
private void writeSerializableUserObject(boolean isAutoLogin , boolean isAutoRemember){
    SerializableUser serializeUserObj = new SerializableUser();
    serializeUserObj.setUserEmail(TempSessionUser.getTempUser().getEmail());
    serializeUserObj.setUserPassword(TempSessionUser.getTempUser().getPassword());
    serializeUserObj.setUserName(TempSessionUser.getTempUser().getF_name());
    serializeUserObj.setIsAutoLogin(isAutoLogin);
    if(isAutoRemember){
        serializeUserObj.setIsAutoRemember(true);
    }
    System.out.println("in side method......."); 
```

**编辑**

```
 String path = System.getProperty("user.home");
    File file = new File(path+"/user.ser");
    if(!file.exists()){
          file.mkdir();
    }
    try {
        FileOutputStream fileOutPut = new FileOutputStream(file);
        ObjectOutputStream oos;
        try {
            oos = new ObjectOutputStream(fileOutPut);
            oos.writeObject(serializeUserObj);
            oos.flush();
            oos.close();
        } catch (IOException ex) {
            Logger.getLogger(MainFrame.class.getName()).log(Level.SEVERE, null, ex);
        }//Inner catch statment end

    } catch (FileNotFoundException ex) {
        Logger.getLogger(MainFrame.class.getName()).log(Level.SEVERE, null, ex);
    }//Outer Catch statment end
} 
```

编辑后它给了我这个例外......在netbeans execution.her uptill HaseebAimal是我的主目录路径

```
 java.io.FileNotFoundException: C:\Users\HaseebAimal\UserData\user.ser (Access is denied)

    at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:194)
at java.io.FileOutputStream.<init>(FileOutputStream.java:145) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:11:56.507

`getClass().getResource("/UserData")`为您提供类路径中的位置，该位置有时（通常）不是文件系统中的目录。相反，您可能应该选择以下一项或多项：

*   提示用户保存位置。
*   使用用户主目录中某些文件或文件夹的默认位置，您可以使用`System.getProperty("user.home")`.
*   将其保存在当前工作目录中，您可以使用`System.getProperty("user.dir")`.

最后一个选项可能是最糟糕的，除非您*知道*工作目录将始终是什么，因为您已经以某种方式处理了应用程序的安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:46:56.997

在创建之前`FileOutputStream`检查做什么`file.canRead()`和`file.canWrite()`返回。

您需要确保应用程序*可以*写入该位置。如果您无权访问该位置，请尝试将目录更改为您具有写入权限的其他位置。

就像是：

```
String path = "D:/test"; 
```

# zend-framework - 此适配器需要 PDO 扩展，但 CRON 作业未加载扩展错误

> ID：15191983
> 
> 赞同：0
> 
> 时间：2013-03-03T23:01:07.350
> 
> 标签：zend-framework, pdo, cron, jobs

我正在尝试运行访问我的数据库并进行一些文件传输的 CRON 作业。从另一个刚刚进行文件传输的 CRON 作业中调整它，我输入了以下命令：

```
php -qn -d memory_limit=128M 
```

在我的 CRON 文件前面。我记得我添加了 memory_limit 是因为我正在传输文件，但我一生都记不起为什么要使用 -qn -d。将相同的命令复制到另一个需要使用 Zend_Db_Adapter_Pdo_Mysql 访问数据库的 CRON 作业，我得到了错误：

“此适配器需要 PDO 扩展，但未加载扩展错误”

而且，只有当我使用命令时

```
php -q 
```

错误消失了。2个问题，然后：

1) 关于 CRON 作业，“-qn -d memory_limit=128M”和“php -q”有什么区别？

2) 为什么我使用前一个命令而不是后一个命令时会出现 PDO 问题？

-埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:58:40.610

该`-n`标志表示“不要使用任何 php.ini 文件”，因此它不会加载任何扩展名（导致 PDO 错误）。该`-d`标志允许您设置 PHP 配置变量，因此在您的示例中，您将覆盖默认内存限制。

# c# - Windows 8 的 WebClient 替代品？

> ID：15191984
> 
> 赞同：5
> 
> 时间：2013-03-03T23:01:14.010
> 
> 标签：c#, windows, webclient

我用来`WebClient`为 Windows Phone 8 和 Android HttpClient 获取 Yahoo 数据 使用 WebClient 我可以做到

```
 WebClient client = new WebClient();
   client.DownloadStringCompleted += new     DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
    client.DownloadStringAsync(url); 
```

发送事件后；

```
 StringReader stream = new StringReader(e.Result)

   XmlReader reader = XmlReader.Create(stream);
   reader.ReadToFollowing("yweather:atmosphere");
   string humidty = reader.MoveToAttribute("humidity"); 
```

但在 Windows 8 RT 中没有这样的东西。

如何获取以下数据？> [http://weather.yahooapis.com/forecastrss?w=2343732&u=c](http://weather.yahooapis.com/forecastrss?w=2343732&u=c)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T23:04:39.310

您可以使用 HttpClient 类，如下所示：

```
public async static Task<string> GetHttpResponse(string url)
{
    var request = new HttpRequestMessage(HttpMethod.Get, url);
    request.Headers.Add("UserAgent", "Windows 8 app client");

    var client = new HttpClient();
    var response = await client.SendAsync(request, HttpCompletionOption.ResponseHeadersRead);

    if (response.IsSuccessStatusCode)
      return await response.Content.ReadAsStringAsync();
    else
     throw new Exception("Error connecting to " + url +" ! Status: " + response.StatusCode);
} 
```

更简单的版本就是：

```
public async static Task<string> GetHttpResponse(string url)
{
    var client = new HttpClient();
    return await client.GetStringAsync(url);
} 
```

但是如果发生 http 错误，GetStringAsync 将抛出 HttpResponseException，并且据我所知，除了异常消息中没有指示 http 状态。

更新：我没有注意到您实际上正在尝试阅读 RSS Feed，您不需要 HttpClient 和 XML 解析器，只需使用 SyndicationFeed 类，这是示例：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh452994.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh452994.aspx)

# mysql - hasMany 关联上的双重 JOIN 和 GROUP

> ID：15191986
> 
> 赞同：1
> 
> 时间：2013-03-03T23:01:26.080
> 
> 标签：mysql, sql

我有 3 个模型（表）：

```
Presentation hasMany PresentationView hasMany SlideView 
```

领域：

介绍：`id, title`

演示视图：`id, presentation_id`

幻灯片视图：`id, presentation_view_id, duration`

我需要一个查询来获取每个演示文稿的统计信息。统计数据为：

1.  每个 PresentationView 的数量
2.  属于 Presentation 的幻灯片视图中所有 SlideView.duration 的总持续时间（通过 PresentationView）

所以基本上它看起来像双重 JOIN 和双重 GROUP 但连接对我不起作用 - 我尝试了 LEFT/INNER/RIGHT 双连接的每种组合，但我无法使其工作。我所拥有的最好的结果是 Presentation 已经对 PresentationView 进行了分组，但持续时间仅来自 SlideViews 的 SUMed，该 SlideViews 仅属于一个 PresentationViews 而不是全部用于 Presentation...

如果可能，我想避免嵌套 SELECT。只需加入/组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:18:22.993

首先是一个简单的 JOIN 和 COUNT：

```
SELECT p.id, COUNT(*)
FROM Presentation p
JOIN PresentationView v ON p.id = v.presentation_id
GROUP BY p.id 
```

第二个必须使用 SUM（和 JOIN）：

```
SELECT p.id, SUM(s.duration)
FROM Presentation p
JOIN PresentationView v ON p.id = v.presentation_id
JOIN SlideView s ON v.id = s.presentation_view_id
GROUP BY p.id 
```

如果您想在一个查询中同时使用两者：

```
SELECT p.id, SUM(s.duration), COUNT(DISTINCT v.id)
FROM Presentation p
JOIN PresentationView v ON p.id = v.presentation_id
JOIN SlideView s ON v.id = s.presentation_view_id
GROUP BY p.id 
```

* * *

## 原因`DISTINCT`：

表：

```
Presentation:    PresentationView:          SlideView:
p.id | title     v.id | presentation_id     s.id | presentation_view_id | duration
1    | abc       1    | 1                   1    | 1                    | 100
2    | xyz       2    | 1                   2    | 1                    | 150
                 3    | 1                   3    | 2                    | 200
                 4    | 1                   4    | 2                    | 250
                 5    | 1                   5    | 3                    | 300
                 6    | 2                   6    | 3                    | 400
                 7    | 2                   7    | 4                    | 500
                                            8    | 5                    | 600
                                            9    | 6                    | 100
                                            10   | 6                    | 200
                                            11   | 7                    | 350 
```

组之前的示例结果集：

```
p.id | v.id | s.id | s.duration
-------------------------------
1    | 1    | 1    | 100
1    | 1    | 2    | 150
1    | 2    | 3    | 200
1    | 2    | 4    | 250
1    | 3    | 5    | 300
1    | 3    | 6    | 400
1    | 4    | 7    | 500
1    | 5    | 8    | 600
2    | 6    | 9    | 100
2    | 6    | 10   | 200
2    | 7    | 11   | 350 
```

在没有不同的组之后：

```
p.id | SUM | COUNT
------------------
1    | 8   | 2500
2    | 3   | 650 
```

具有鲜明的：

```
p.id | SUM | COUNT
------------------
1    | 5   | 2500
2    | 2   | 650 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:28:10.437

与此同时，我找到了答案：

```
SELECT presentations.title, SUM(slide_views.duration), COUNT(DISTINCT presentation_views.id) 
FROM presentations 
LEFT JOIN presentation_views ON presentations.id = presentation_views.presentation_id 
LEFT JOIN slide_views ON presentation_views.id = slide_views.presentation_view_id 
GROUP BY presentations.id 
```

# jquery - jquery简单函数

> ID：15191988
> 
> 赞同：0
> 
> 时间：2013-03-03T23:01:42.990
> 
> 标签：jquery, function

我想知道如何简化此功能。在第一个条件下，我有自己的带有回调的函数 contentClose()。我知道，我可以使用 load ($('#content').load("cz/"+url+".h ETC...) 创建新的小函数，但我想知道不同的方式。它存在吗？

```
 if($('nav').hasClass('on')) {
            contentClose(function() {
              $('#content').load("cz/"+url+".htm", function() {
                        $('#gallery').photobox('a',{ time:0 });
                        $('#gallery li:first-child a').click();
                });  
            });
        } else {
            $('#content').load("cz/"+url+".htm", function() {
                    $('#gallery').photobox('a',{ time:0 });
                    $('#gallery li:first-child a').click();
            });    
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:05:32.227

你的意思是这样的？

```
function contentLoad(){
    $('#content').load("cz/"+url+".htm", function() {
        $('#gallery').photobox('a',{ time:0 });
        $('#gallery li:first-child a').click();
    });  
}

if($('nav').hasClass('on')) {
    contentClose( contentLoad );
} else {
    contentLoad();
} 
```

# android - 为什么 Nexus 7 的操作栏这么高？

> ID：15191989
> 
> 赞同：0
> 
> 时间：2013-03-03T23:01:50.463
> 
> 标签：android

为了我自己的娱乐，我正在编写我的第一个安卓应用程序。在我的 Nexus 7 纵向模式下，操作栏看起来太高了，例如它比 gmail 应用程序中的操作栏高得多（[http://www.flickr.com/photos/matthelliwell/8526407062/](http://www.flickr.com/photos/matthelliwell/8526407062/)）

我在 HTC Sensation 手机上运行了相同的应用程序，操作栏看起来更像我期望的高度。对于我使用 Theme.Holo.Light 和 showHome 设置的样式：

```
<resources>
  <style name="GedcomTheme" parent="android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/GedcomActionBarStyle</item>
    <item name="android:textViewStyle">@style/GedcomTextView</item>
    <item name="android:editTextStyle">@style/GedcomEditText</item>
  </style>

  <style name="GedcomTextView" parent="android:Widget.TextView">
    <item name="android:textAppearance">?android:attr/textAppearanceSmall</item>
  </style>

  <style name="GedcomEditText" parent="android:Widget.EditText">
    <item name="android:textAppearance">?android:attr/textAppearanceSmall</item>
  </style>

  <style name="GedcomActionBarStyle" parent="@android:style/Widget.Holo.ActionBar">
    <item name="android:displayOptions">showHome</item>
  </style>
</resources> 
```

菜单本身创建为：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/open_menu_item"
        android:title="Open"
        android:icon="@drawable/ic_menu_archive"
        android:showAsAction="ifRoom"/>
    <item
        android:id="@+id/delete_menu_item"
        android:title="Delete"
        android:icon="@drawable/ic_menu_delete"
        android:showAsAction="ifRoom"/>
</menu>

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.home_menu, menu);
    return true;
} 
```

那么如何在 Nexus 上缩小它而不使其在其他设备上过小呢？

# java - 如何在内存不足错误时进行线程转储

> ID：15191999
> 
> 赞同：2
> 
> 时间：2013-03-03T23:02:37.763
> 
> 标签：java, jvm, out-of-memory, sun

我知道这`-XX:+HeapDumpOnOutOfMemoryError`将在 OutOfMemoryError 上启用堆转储。

线程转储有类似的东西吗？我需要这个以防服务器上发生错误 - 发生错误时我无权访问进程本身

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:46:01.427

引发 OutOfMemoryError 的确切执行点非常随机（除非您有一个单线程应用程序），所以我认为在 OOM 上获取线程转储没有太大意义。如果它是“Java 堆空间”类型的 OOM，至少这是正确的，但也可能适用于其他类型的 OOM 错误。

无论如何，看看[这个较早的帖子](https://stackoverflow.com/q/2787976/1276804)解决了同样的问题。

然而，解决 OOM 错误的更好方法是使用[Eclipse Memory Analyzer Tool](http://www.eclipse.org/mat/)检查堆转储。它通过将对象图转换为所谓的[支配树](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Fconcepts%2Fdominatortree.html)来帮助您识别内存泄漏。这种结构揭示了对象之间的保持活动依赖关系，因此很容易识别负责保留最大内存块的那些（参见[Shallow vs. Retained Heap](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Fconcepts%2Fdominatortree.html)）。