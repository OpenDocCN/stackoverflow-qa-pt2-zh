# StackOverflow 问答 14724000-14724999

# mysql - Mysql Inner Join 基于条件

> ID：14724007
> 
> 赞同：0
> 
> 时间：2013-02-06T07:48:42.533
> 
> 标签：mysql, inner-join, case-when

我有两个表，我试图从中检索特定信息（我知道）。第一个表`seasons`是半静态数据存储，第二个表`users_cards`用于存储用户选择。

我希望达到的结果将通过每个赛季，为第 1-3 季和第 11 季分配一个“card_total”= 10 为前进的每个赛季。结果看起来类似于：

```
SEASON_ID   |   TOTAL   |
------------ ------------
1           |   123
2           |   234
3           |   345
4           |   456 
```

缩写和相关的列/示例数据如下：

```
# `seasons`:

ID  |   ACTIVE  |   COMPLETE    |
---- ----------- ---------------
1   |   0       |   1
2   |   0       |   1
3   |   0       |   1
4   |   1       |   0
5   |   0       |   0

# `users_cards`
# DESC: this table can store up to 10 choices per user for seasons 1-3 
#       and up to 11 choices for every season thereafter.

USER_ID     |   SEASON_ID   |
------------ ---------------
1           |   1
1           |   1
2           |   1
2           |   1
1           |   2
1           |   2
1           |   2 
```

我已经玩过这个查询的一些变体，但似乎没有任何效果。此查询返回每个季节的总数，但它不是基于我上面提到的“card_total”。

```
SELECT
    c.season_id AS season_id,
    c.card_total AS card_total,
    c.total AS total
FROM seasons s
INNER JOIN (
    SELECT
        uc.season_id,
        COUNT(DISTINCT(user_id)) AS total,
        CASE WHEN 
                uc.season_id = 1
                OR uc.season_id = 2
                OR uc.season_id = 3
            THEN 10
            ELSE 11
        END AS card_total
    FROM users_cards uc
    GROUP BY uc.season_id
) AS c ON c.season_id = s.id
WHERE s.is_active = 1 
    OR s.is_complete = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:07:45.717

把`SUM()`你的`CASE...END`.

# java - 使用文本文件中的数据创建 JTree

> ID：14724014
> 
> 赞同：-1
> 
> 时间：2013-02-06T07:49:08.057
> 
> 标签：java, swing, text-files, jtree, defaulttreemodel

如何`JTree`从`.txt`文件中创建使用数据？文本文件格式如下：

```
Root Node
        Category A
            Sub-Category A1
                Item A1.0
                Item A1.1
                Item A1.2
            Sub-Category A2
                Item A2.0
                Item A2.1
                Item A2.2       
        Category B
            Sub-Category B1
                Item B1.0
                Item B1.1
            Sub-Category B2
                Item B2.0
                Item B2.1
            Sub-Category B3
                Item B3.0
                Item B3.1
                Sub-Sub-Category B3_1
                    Item B3_1.0
                    Item B3_1.1
        Category C
            ... etc 
```

该`.txt`文件包含 700 多行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:16:45.013

如果 txt 的表格（或空格）格式良好，您可以逐行读取文件，计算空格数，然后根据需要将节点添加到树中。

[您可以在 java 教程How to Use Trees](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)中阅读有关 JTree 的更多信息。

但正如@Abhishekkumar 所说，您尝试过什么？为什么你做不到？完成你的答案，不要让别人做你的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T15:44:37.220

正如[PhoenixS](https://stackoverflow.com/users/491245/phoneixs)在上面的回答中提到的那样，该过程涉及以下步骤：

1.  `.txt`逐行读取文件。在此示例中，我们将[BufferedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)与[InputStreamReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStreamReader.html)或[FileReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileReader.html)结合使用，具体取决于我们是分别将`.txt`文件作为资源读取还是从文件系统读取。
2.  根据文件的格式`.txt`，使用分隔符来确定每行在读取时的层次结构级别。使用它来创建您的`Jtree`. 在这种情况下，`.txt`文件是制表符分隔的，制表符的数量表示层次结构级别。

这是`TreeFromTextFile`我写的课程：

```
/*
 * File: TreeFromTextFile.java
 * Created 2013-02-06
 * This Class creates a JTree using data from a Specially formatted text File.
 * The supplied text file is tab-delimited, as illustrated at:
 * https://stackoverflow.com/questions/14724014/create-jtree-using-data-from-text-file
 * 
 * You can use either InputStreamReader to read thetext file as a resource
 * or use FileReader to read the text file from the file System
 */

import java.io.BufferedReader;
//import java.io.FileReader;
import java.io.InputStreamReader;
import java.io.LineNumberReader;
import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.TreeSelectionModel;

/**
 * @author engineervix
 *
 */
public class TreeFromTextFile {

private BufferedReader in;
private LineNumberReader ln;
private String line;    //value of a line in the text file
private String root;    //value to be used for the root Node of our JTree                         
private String filename = "TheTextFile.txt";
private String encoding = "UTF-8";
private DefaultMutableTreeNode top;
private JTree tree;

public TreeFromTextFile() {
    getRootNode();
    top = new DefaultMutableTreeNode(root);
    createNodes(top);

    //Create a tree that allows one selection at a time.
    tree = new JTree(top);
    tree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
}

//this method reads the file and prints all the lines to standard output
//for testing purposes
public void readFile() {
    try {
        //in = new BufferedReader(new FileReader("Path\\To\\File.txt"));
        in = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(filename), encoding));

        while ((line = in.readLine()) != null) {
            System.out.println(line);
        }
        in.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

//this method reads the first line in the text file and assigns it 
//to the root variable which will be used for the root node of our JTree
private void getRootNode() {
    try {
        //in = new BufferedReader(new FileReader("Path\\To\\File.txt"));
        in = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(filename), encoding));
        ln = new LineNumberReader(in);

        if (ln.getLineNumber() == 0) {
            root = ln.readLine();
            //System.out.println(root);
        }

        in.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * this method counts the number of occurrences of a given
 * <code>char</code> in the Specified
 * <code>String</code> source:
 * https://stackoverflow.com/questions/275944/how-do-i-count-the-number-of-occurrences-of-a-char-in-a-string
 */
private int countOccurrences(String haystack, char needle) {
    int count = 0;
    for (int i = 0; i < haystack.length(); i++) {
        if (haystack.charAt(i) == needle) {
            count++;
        }
    }
    return count;
}

//create the Nodes
private void createNodes(DefaultMutableTreeNode top) {
    DefaultMutableTreeNode category = null;     // Level 1 in Hierarchy
    DefaultMutableTreeNode subCategory = null;  // Level 2 in Hierarchy
    DefaultMutableTreeNode leaf = null;         // Level 3 in Hierarchy    

    try {
        //in = new BufferedReader(new FileReader("Path\\To\\File.txt"));
        in = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(filename), encoding));

        while ((line = in.readLine()) != null) {
            if (countOccurrences(line, '\t') == 1) {
                category = new DefaultMutableTreeNode(line);
                top.add(category);
            } else if (countOccurrences(line, '\t') == 2) {
                subCategory = new DefaultMutableTreeNode(line);
                category.add(subCategory);
            } else if (countOccurrences(line, '\t') == 3) {
                leaf = new DefaultMutableTreeNode(line);
                subCategory.add(leaf);
            } //continue the else...if - if you have more levels
        }
        in.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

    public JTree getTree() {
        return tree;
    }
} 
```

为了测试上面的内容，我写了一个`TreeFromTextFileDemo`类，如下图：

```
/*
 * Requires TreeFromTextFile.java
 */

import java.awt.BorderLayout;
import java.awt.Container;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;

/**
 * @author engineervix
 */
public class TreeFromTextFileDemo {

private static TreeFromTextFile tr = new TreeFromTextFile();

public static void main(String[] args) {
    JFrame frame = new JFrame("Demo | Creating JTree From File.txt");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Container content = frame.getContentPane();

    JTree t = tr.getTree();

    content.add(new JScrollPane(t), BorderLayout.CENTER);
    frame.setSize(275, 300);
    frame.setLocationByPlatform(true);
    frame.setVisible(true);

    }
} 
```

* * *

以下屏幕截图说明了输出。您可以[将此文件](http://pastebin.com/40dAucNS)用作示例文本文件。

![<code>TreeFromTextFileDemo.java</code> 的输出](../Images/7824896556b754db61f4626d17c618a3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-22T03:02:24.860

如果您希望它更灵活，请不要对级别进行硬编码。只需使用 Map 将最后一个节点保留在任何给定级别。当您遍历文件中的项目时，您将可以通过地图访问任何父节点。这是代码...

```
public class StructureBuilder {

    public static final DefaultMutableTreeNode getTreeNode(File file) throws IOException  {

        DefaultMutableTreeNode rootNode = null;
        Map<Integer, DefaultMutableTreeNode> levelNodes = new HashMap<Integer, DefaultMutableTreeNode>();
        BufferedReader reader = new BufferedReader(new FileReader(file));
        String line;

        while( (line = reader.readLine()) != null ) {

            int level = getLevel(line);
            String nodeName = getNodeName(line, level);
            DefaultMutableTreeNode node = new DefaultMutableTreeNode(nodeName);               
            levelNodes.put(level, node);
            DefaultMutableTreeNode parent = levelNodes.get(level - 1);

            if( parent != null ) {
                parent.add(node);
            }
            else {
                rootNode = node;
            }
        }    
        reader.close();
        return rootNode;
    }

    private static final int getLevel(String line) {

        int level = 0;
        for ( int i = 0; i < line.length(); i++ ) {
            char c = line.charAt(i);
            if( c == '\t') {
                level++;
            }
            else {
                break;
            }
        }
        return level;
    }

    private static final String getNodeName(String line, int level) {
        return line.substring(level);
    }      
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-23T12:42:38.867

我有一个类似的问题并为此编写了一个通用的构建器类。它需要我们的源数据集合和层次结构描述和宾果游戏。树模型。

您还可以实时交换结构。

[https://stackoverflow.com/a/29823595/4824123](https://stackoverflow.com/a/29823595/4824123)

项目：[https ://github.com/mnrussell/collectionTreeModel](https://github.com/mnrussell/collectionTreeModel)

希望这可以帮助

# c++ - 使用 Valgrind 检测内存泄漏

> ID：14724015
> 
> 赞同：1
> 
> 时间：2013-02-06T07:49:10.287
> 
> 标签：c++, mysql, valgrind

我正在用 C++ 编写一个守护进程，它的任务很简单，就是将一些事件插入到 mysql 数据库中。

当我运行 top 命令时，我看到进程的内存需求增加了，我以为我有内存泄漏，我开始使用 Valgrind

我这样运行 valgrind：

> valgrind --tool=memcheck --leak-check=yes --show-reachable=yes --num-callers=20 --track-fds=yes ./my_app

我得到以下报告：

```
==17045== 128 bytes in 1 blocks are definitely lost in loss record 6 of 11
==17045==    at 0x402A629: calloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==17045==    by 0x40AAB63: my_thread_init (in /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0)
==17045==    by 0x40AAE43: my_thread_global_init (in /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0)
==17045==    by 0x40A92D7: my_init (in /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0)
==17045==    by 0x40863FA: mysql_server_init (in /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0)
==17045==    by 0x4087B28: mysql_init (in /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0)
==17045==    by 0x8049890: write_db(std::string, std::string, std::string) (Listener.cpp:76)
==17045==    by 0x804A692: SocketListener(void*) (Listener.cpp:182)
==17045==    by 0x4052D4B: start_thread (pthread_create.c:308)
==17045==    by 0x4582D3D: clone (clone.S:130) 
```

函数 write_db 是这样的：

```
void write_db(std::string userid,std::string zona,std::string eveniment)
{
    try
    {
    MYSQL * connect;
    connect = mysql_init(NULL);
    connect = mysql_real_connect(connect,"127.0.0.1","myusr","mypwd","mytbl",0,NULL,0);
    std::string stmt = "INSERT INTO t_evenimente(placaid,codev,zona,cand) VALUES(\"" + userid + "\"," + eveniment + ",\"" + zona + "\",NOW())";
    std::cout << stmt << std::endl;
    mysql_query(connect,stmt.c_str());
    mysql_close(connect);
    std::cout << "Inserat eveniment obiectiv " << userid << std::endl;
    }
    catch (...)
    {
        std::cout <<"Exceptie MYSQL" << std::endl;
    }
} 
```

内存泄漏在哪里？我正在使用 mysql_init 并按照文档所述关闭...这可能是误报吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:54:33.953

mysql_init 返回一个需要被 mysql_close 释放的堆分配对象。如果 mysql_init 和 mysql_close 之间的某些东西抛出异常，你永远不会调用 close。快速修复 - 将 mysql_close 添加到 catch 块。更好的修复 - 了解/使用 RAII。

正如 Angew 指出的那样，当您调用 mysql_real_connect 时，实际上可能更有可能泄漏连接（除非您在日志中看到异常文本）。您也可以使用 RAII 来避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:10:19.100

由于您`connect`仅在函数内部使用，因此更容易不动态分配它并冒内存泄漏的风险（很可能是您所看到的）。此外，MySQL API 是一个 C API，不会抛出任何异常供您捕获，这将简化您现在所拥有的内容；

```
void write_db(std::string userid,std::string zona,std::string eveniment)
{
    MYSQL connect;
    mysql_init(&connect);
    mysql_real_connect(&connect,"127.0.0.1","myusr","mypwd","mytbl",0,NULL,0);
    std::string stmt = "INSERT INTO t_evenimente(placaid,codev,zona,cand) VALUES(\"" + userid + "\"," + eveniment + ",\"" + zona + "\",NOW())";
    std::cout << stmt << std::endl;
    mysql_query(&connect,stmt.c_str());
    mysql_close(&connect);
    std::cout << "Inserat eveniment obiectiv " << userid << std::endl;
} 
```

当然，这仍然忽略了错误处理，您需要将其添加回来。

# php - 在发送任何其他输出之前使用的 cookie

> ID：14724017
> 
> 赞同：0
> 
> 时间：2013-02-06T07:49:12.423
> 
> 标签：php, cookies

我有三个页面：

*   索引.php,
*   login.php 和
*   注销.php。

如果您未登录，索引页面会将您重定向到登录页面。当您登录时，它会将您重定向到索引页面，您可以在其中注销。一切都运行良好。但这是奇怪的事情，在我看来它不应该。

我所知道的。Header、setcookie 和 session 语句只能在向浏览器发送任何输出之前使用，但如果您查看 login.php 页面，它已经发送了 HTML 代码。为什么这不起作用？我在这里想念什么？

索引.php：

```
<?php
    if (isset ($_COOKIE['uid'])) {
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Index Page</title>
    </head>
    <body>
    Logged in with UID: <?php echo $_COOKIE['uid']; ?>
    <br/>
    <a href="logout.php">Log Out</a>
</body>
</html>
<?php
    } else {
        /* If no UID is in the cookie, we redirect to the login page */
        header('Location: http://localhost/cookie/login.php');
    }
?> 
```

登录.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Login</title>
    </head>
    <body>
<?php
    function check_auth() { 
        return 4; 
    }
    if (isset ($_POST['login']) &&  ($uid = check_auth($_POST['email'], $_POST['password'])))
    {
        /* User succesfully logged in, setting cookie */
        setcookie('uid', $uid, time() + 14400, '/');
        header('Location: http://localhost/cookie/index.php');
    } elseif (isset($_COOKIE['uid'])) {
        /* If try to  go to login.php when you already logged in, we redirect to the index page */
        header ('Location: http://localhost/cookie/index.php');
    } else {
?>
    <h1>Log-in</h1>
    <form method="post" action="login.php">
        <table>
        <tr><td>E-mail address:</td><td><input type='text' name='email'/></td></tr>
        <tr><td>Password:</td><td><input type='password' name='password'/></td></tr>
        <tr><td colspan='2'><input type='submit' name='login' value='Log in'/></td></tr>
        </table>
    </form>
<?php
    }
?>
</body>
</html> 
```

注销.php：

```
<?php
    setcookie('uid', '', time() - 86400, '/');
    header('Location: http://localhost/cookie/login.php');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:14:58.590

login.php 文件中的 header() 函数确实很奇怪。标头应该已经发送并且它不应该工作。你为什么不试试

```
bool headers_sent ([ string &$file [, int &$line ]] ) 
```

看看标头是否已经发送？

[http://www.php.net/manual/en/function.headers-sent.php](http://www.php.net/manual/en/function.headers-sent.php)

# javascript - 使用 javascript 获取 js 错误列表

> ID：14724018
> 
> 赞同：0
> 
> 时间：2013-02-06T07:49:20.773
> 
> 标签：javascript

我想创建一个 js 代码片段，它将在页面上单击按钮时运行。点击那个按钮后会发现控制台是否有错误？（即，如果它在 IE 的状态栏中显示一些错误）如果它有错误，那么它将显示一个警告框，说明此页面上的某些 js 代码失败。否则会显示 msg "Passed"

是否可以从页面中获取 js 错误列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:53:23.117

您可以使用“try”和“catch”指令

```
try
    {
    // code that may have an error
    }
catch(e)
    {
    alert('There was an error: '+e.message);
    }
finally
    {
    alert('Execute this bit anyway');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:55:02.500

据我所知，无法读取控制台输出。但是，您可以分配一个处理程序[`window.onerror`](https://developer.mozilla.org/en-US/docs/DOM/window.onerror)来捕获页面内发生的所有 JavaScript 错误。

请注意，这并非在所有浏览器中都实现。不过，我现在找不到它的兼容性表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:03:03.703

```
<button id="button">Bug out</button>
<script>
var myErrors = [],
startTrackingErrors = false;

window.onerror = function (errorMessage, url, lineNumber) {
    if (!startTrackingErrors) { return false; }
    myErrors.push({
      errorMessage : errorMessage,
      url : url,
      lineNumber : lineNumber
    });
    return true;
};

document.getElementById('button').click = function() {
    startTrackingErrors = true;
    // put your buggy code here

    // loop through "myErrors" array when done
};
</script> 
```

# tfs - Team Explorer Builds 不显示构建定义，显示“已添加具有相同键的项目”

> ID：14724029
> 
> 赞同：3
> 
> 时间：2013-02-06T07:50:31.230
> 
> 标签：tfs, visual-studio-2012

我最近从 Visual Studio 2010 迁移到 2012（版本：11.0.51106.01 Update 1）。在 Team Explorer -> Builds 中，我将一些构建定义添加到我的收藏夹中。现在，当我打开 Team Explorer -> Builds 时，我看不到任何构建定义，而是看到一个错误：
`An item with the same key has already been added.`

为什么会这样？
我该如何解决这个问题？
我想我可以以某种方式删除那些最喜欢的构建定义，但是它们存储在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T08:35:20.353

这似乎是 TFS2012 的一个已知问题。

**原因：**当收藏的构建定义有多个构建队列（例如，门控和私有构建）时，VS2012 将创建一个空白的收藏构建，然后在重新加载收藏时发出此错误。

**修复：**还没有 AFAIK。

**解决方法：**编辑`%LOCALAPPDATA%\Microsoft\Team Foundation\4.0\FavoritesStore\<GUID>.xml`：

*   临时解决方法：删除该`<FavoriteItem Name="" ...`行。但是，VS2012 将再次创建它。
*   永久解决方法：从收藏夹中删除相关的构建定义。

一些（[博客文章](http://henrywrites.wordpress.com/2012/11/19/tfs-vs2012-an-item-with-the-same-key-has-already-been-added/)、[连接错误](http://connect.microsoft.com/VisualStudio/feedback/details/778725/tfs-2012-agile-6-1-template-problem-an-item-with-the-same-key-has-already-been-added)、[连接错误 2](https://connect.microsoft.com/VisualStudio/feedback/details/779288/an-item-with-the-same-key-has-already-been-added-from-builds-view-of-team-explorer)）建议删除 TFS 缓存，但这不起作用。

# mobiscroll - FF18中的轮数

> ID：14724037
> 
> 赞同：0
> 
> 时间：2013-02-06T07:51:43.537
> 
> 标签：mobiscroll

回复：[轮#s外轮](https://stackoverflow.com/questions/14678963/wheel-numbers-visible-outside-wheel)（@dioslaska）

该问题已解决，但现在数字在轮子内产生了有趣的阴影（也在演示页面中）......

![演示页面](../Images/b5593c8e0c29c8e1acf032f27c3e9f45.png)

还是有另一个动画参数来禁用它？

# objective-c - 将 NSNumber 对象添加到 NSMutableArray

> ID：14724038
> 
> 赞同：2
> 
> 时间：2013-02-06T07:51:49.607
> 
> 标签：objective-c, xcode, cocoa-touch

这段代码会导致错误，但它应该是正确的。

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSNumber *rowNumber = [[NSNumber alloc] initWithInt:indexPath.row];
    [genreArray addObject:rowNumber];
    [self.tableView reloadData];
} 
```

`genreArray`是一个`NSMutableArray`

但是在触摸一个单元格时，我得到了这个错误

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[__NSCFArray insertObject:atIndex:]: mutating method sent to immutable object'
*** First throw call stack:
(0x1c9c012 0x10d9e7e 0x1c9bdeb 0x1d1c9a5 0x1d1c8b0 0x7b4c 0xcd285 0xcd4ed 0xad75b3 0x1c5b376 0x1c5ae06 0x1c42a82 0x1c41f44 0x1c41e1b 0x1bf67e3 0x1bf6668 0x1dffc 0x271d 0x2645)
libc++abi.dylib: terminate called throwing an exception 
```

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:53:13.157

因为您的数组是不可变的...检查您实例化的代码`genreArray`：类型声明和实例化都必须使用`NSMutableArray`

```
//valid declaration + instantiation
NSMutableArray *genreArray = [NSArray array]; 

//valid at compile-time : genreArray is supposed to be mutable
//however will result in runtime error : genreArray is actually immutable
[genreArray addObject:anObject]; 
```

# visual-c++ - 如何实时进行离线检测？

> ID：14724040
> 
> 赞同：0
> 
> 时间：2013-02-06T07:51:54.670
> 
> 标签：visual-c++, image-processing, opencv

我已经使用 opencv 2.3 实时实现了轮廓检测代码。我已经使用了我的网络摄像头。现在我想在之前记录并在我的数据库中的捕获视频中实现它。

```
cv::Mat frame;
cv::Mat back;
cv::Mat fore;
cv::VideoCapture cap(0);
cv::BackgroundSubtractorMOG2 bg;
bg.nmixtures = 3;
bg.bShadowDetection = true;

std::vector<std::vector<cv::Point> > contours; 
```

我没有提到我的整个代码，因为要加载一个 AVI 文件，我只需要在这里进行构建。

请问有人可以指导我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:14:38.893

您可以使用以下代码片段打开视频并读取帧：

```
cv::Mat frame;
cv::VideoCapture cap("/path/to/file.avi");
bool ok = cap.open();
// check for errors
cap >> frame; // or cap.read(frame); 
```

您可以阅读有关[VideoCapture](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-videocapture)的文档以获取更多详细信息。如果遇到问题，您应该检查[您的视频的编解码器是否受支持](http://opencv.willowgarage.com/wiki/VideoCodecs)。

# c# - datagridview 多彩多姿的文本

> ID：14724041
> 
> 赞同：0
> 
> 时间：2013-02-06T07:52:08.883
> 
> 标签：c#, .net, winforms, datagridview

我正在尝试在 datagridviewcell 中显示多色文本，而且我快到了。但是发现双击列分隔符有点问题。

当我双击列分隔符时，部分单元格背景颜色未正确绘制。我忘了用我的代码做什么？请给我建议。

这是我的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace MulticoloredGridViewTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            dataGridView1.Rows.Add("niaz,rahim,azme,niaz,rahim,azme", "123,677,111", "dhaka,dhaka,dhaka");

        }

        private void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
        {
            if (e.RowIndex >= -1)
            {
                // Rectangle newRect = new Rectangle(e.CellBounds.X + 1, e.CellBounds.Y + 1, e.CellBounds.Width - 1, e.CellBounds.Height - 1);

                e.Paint(e.ClipBounds, DataGridViewPaintParts.All & ~DataGridViewPaintParts.ContentForeground);

                StringFormat sf = new StringFormat();
                sf.Alignment = StringAlignment.Center;
                sf.LineAlignment = StringAlignment.Center;
                Point startPoint = e.CellBounds.Location;

                if (e.Value != null)
                {
                    string[] dataList = e.Value.ToString().Split(',');
                    foreach (string data in dataList)
                    {
                        SizeF tmpSize = e.Graphics.MeasureString(data.Trim(), e.CellStyle.Font);
                        Rectangle txtRegion = new Rectangle(startPoint, new Size((int)(tmpSize.Width + 3), e.CellBounds.Height));

                        Color clr = new Color();
                        if (data.Trim().Contains("rahim"))
                            clr = Color.Red;
                        else
                            clr = Color.Black;

                        using (SolidBrush br = new SolidBrush(clr))
                        {
                            e.Graphics.DrawString(data.Trim(), e.CellStyle.Font, br, txtRegion, StringFormat.GenericDefault);
                        }
                        startPoint = new Point(startPoint.X+txtRegion.Width+1, e.CellBounds.Location.Y);
                    }
                    e.Handled = true;
                }

            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string[] cell = textBox1.Text.Split(',');
            string value = dataGridView1.Rows[int.Parse(cell[0])].Cells[int.Parse(cell[1])].Value.ToString();
            label1.Text = value;
        }

        private void dataGridView1_ColumnDividerDoubleClick(object sender, DataGridViewColumnDividerDoubleClickEventArgs e)
        {
            dataGridView1.Columns[e.ColumnIndex].DividerWidth = dataGridView1.CurrentCell.Value.ToString().Length + 10;
            dataGridView1.Invalidate();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:01:34.427

尝试扩展所有列，然后应用绘画。

像这样的东西：

```
private void btnAutoResizeContactNameColumn_Click(object sender, EventArgs e)
{
// Perform Auto Resize on Contact column
this.ultraGrid1.DisplayLayout.Bands[0].Columns["ContactName"].PerformAutoResize();
} 
```

[看看这个链接](http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.2/CLR4.0/html/WinGrid_Resizing_Columns.html)

# c# - DependencyProperty 奇怪的行为

> ID：14724044
> 
> 赞同：0
> 
> 时间：2013-02-06T07:52:21.167
> 
> 标签：c#, wpf, dependency-properties, contentcontrol

我尝试了这个只是为了看看会发生什么并且它确实有效，但我不知道为什么会这样。有人可以解释一下背景中发生了什么`DependencyProperties`吗？

我有一个声明 a 的类，`DependencyProperty`然后在另一个类中我`DependencyProperty`使用`GetValue`and来定位它`SetValue`。

这是一个例子：

```
public class DependencyProperties : DependencyObject
{
    public Size EstimatedSize
    {
        get { return (Size)GetValue(EstimatedSizeProperty); }
        set { SetValue(EstimatedSizeProperty, value); }
    }

    public static readonly DependencyProperty EstimatedSizeProperty =
        DependencyProperty.Register("EstimatedSize", typeof(Size), typeof(DependencyProperties), null);
}

public class MyControl: ContentControl
{
    public Size CalculatedSize
    {
        get { return (Size)GetValue(DependencyProperties.EstimatedSizeProperty); }
        set { SetValue(DependencyProperties.EstimatedSizeProperty, value); }
    }

    protected override OnApplyTemplate()
    {
      // This works but why? How is it possible to do this? What is happening under the hood?
      this.CalculatedSize = new Size(123, 123);
    }
} 
```

为什么可以做到这一点？这个例子的背景发生了什么？MyControl 类没有注册 DP，但它可以使用它。有人可以告诉我引擎盖下发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:10:21.917

我用谷歌搜索了我想给你看的图片。请参阅下面的链接，DP 的概念有据可查。

[http://www.abhisheksur.com/2011/07/internals-of-dependency-property-in-wpf.html](http://www.abhisheksur.com/2011/07/internals-of-dependency-property-in-wpf.html)

而且，我们直接上底线，当你在你的应用中邀请和使用 MyControl 时，包含的 DP 会自动注册。这就是 DP 使用静态前缀的原因。由于`static readonly`DP 声明中的原因，请阅读[https://stackoverflow.com/a/5610015/361100](https://stackoverflow.com/a/5610015/361100)链接（Priyank 引用的答案）。

# image-processing - 如何在opencv中找到图像的最大和最小亮度值？

> ID：14724047
> 
> 赞同：1
> 
> 时间：2013-02-06T07:52:24.820
> 
> 标签：image-processing, opencv, computer-vision

我需要计算图像的动态范围。所以我需要计算图像的最大和最小亮度值。我需要使用opencv来做到这一点。知道如何在opencv中做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:22:25.187

这可能会有所帮助：

```
 // find minimum intensity and location of minimum intensiy
void min_Loc(Mat* img, Point* minloc, double* minVal)
{
    Mat dst2gray;
    double maxVal;
    Point maxloc;
    cvtColor(*img, *img, CV_RGB2GRAY);
    minMaxLoc(*img, minVal, &maxVal,minloc,&maxloc); //find minimum and maximum intensities and their positions

} 
```

# c++ - 文件流、STL 容器和可变长度数组

> ID：14724052
> 
> 赞同：1
> 
> 时间：2013-02-06T07:52:32.690
> 
> 标签：c++, stl, ofstream

最初，我有一些看起来像的代码

```
class Ball
{
public:
    double x , y ;
    ofstream out ;
} ;

int main()
{
    Ball array[N] ;

    array[0].out.open("./position_1.txt") ;
    array[1].out.open("./position_2.txt") ;

    ......
} 
```

其中 N 是运行时确定的常数。但它最近遇到了可变长度数组问题。

我尝试遵循这篇文章的建议[Can't set variable length with variable](https://stackoverflow.com/questions/10045266/cant-set-variable-length-with-variable) by using STL container。

```
int main()
{
    vector<Ball> Balls ;
    Ball b ;

    b.out.open( "./position_1.txt" ) ;
    Balls.push_back( b ) ;
    ......
} 
```

它在 失败`push_bak()`，因为无法复制流。

在运行之前我无法确定球的数量，我必须存储文件流而不是路径以提高效率（防止打开和关闭文件）。

有什么方法可以实现目标吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:55:52.107

C++ 流不可复制，但它们是可移动的，因此您可以这样做：

```
Balls.push_back( std::move(b) );

//DO NOT use b after push_back, as it has been moved! 
```

并且编译器为您的类生成的默认移动语义可以正常工作。

在 C++11 中，你可以这样写：

```
std::vector<Ball> balls(N); //N is known at runtime

balls[i].out.open( "./position_1.txt" ); //i <= i < N 
```

Note that this will not work in C++03, as in C++03 vector's constructor creates N *copies* of a default created object of type `Ball`. In C++11, however, it doesn't make any copy!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:02:23.707

If your compiler/library are old enough that they don't support move semantics for streams yet (many don't) you might consider storing a (smart) pointer to a stream in the structure instead. You do probably want it to be a smart pointer though -- handling ownership transfer correctly on your own is likely to be quite a bit of work to get right.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:04:23.950

Then make Balls a vector of pointers to Ball. Allocate the Ball objects with new and push_back the pointers.

Note that, if you use simple pointers, you must delete the Ball objects at the end with a loop. You can avoid this by using smart pointers, like `std::tr1::shared_ptr`.

# android - 如何在phonegap中创建吐司？

> ID：14724053
> 
> 赞同：17
> 
> 时间：2013-02-06T07:52:35.530
> 
> 标签：android, cordova, toast

如何使用phonegap/cordova在android应用程序中创建toast？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-06T06:46:48.693

首先创建一个`ToastPlugin.java`

```
package com.company.plugins;

import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;
import org.json.JSONArray;
import org.json.JSONException;

import android.util.Log;
import android.widget.Toast;

public class ToastPlugin extends CordovaPlugin {
    @Override
    public boolean execute(String action, JSONArray args,
            CallbackContext callbackContext) throws JSONException {

        String message = args.getString(0);

        // used to log the text and can be seen in LogCat
        Log.d("Toast Plugin", "Calling the Toast...");
        Log.d("Toast Plugin", message);

        if (action.equals("shortToast")) {          
            this.shortToast(message, callbackContext);
            return true;
        } else if (action.equals("longToast")) {
            this.longToast(message, callbackContext);
            return true;
        }
        return false;
    }

    private void shortToast(String message, CallbackContext callbackContext) {
        if (message != null && message.length() > 0) {
            Toast.makeText(cordova.getActivity().getApplicationContext(),
                    message, Toast.LENGTH_SHORT).show();
            callbackContext.success(message);
        } else {
            callbackContext.error("Expected one non-empty string argument.");
        }
    }

    private void longToast(String message, CallbackContext callbackContext) {
        if (message != null && message.length() > 0) {
            Toast.makeText(cordova.getActivity().getApplicationContext(),
                    message, Toast.LENGTH_LONG).show();
            callbackContext.success(message);
        } else {
            callbackContext.error("Expected one non-empty string argument.");
        }
    }
} 
```

然后创建一个`toastPlugin.js`

```
//Plugin file should be always after cordova.js
//There is always better way to create, but this also works

window.shortToast = function(str, callback) {   
    cordova.exec(callback, function(err) {
        callback('Nothing to echo.');
    }, "ToastPlugin", "shortToast", [ str ]);
};

window.longToast = function(str, callback) {
    cordova.exec(callback, function(err) {
        callback('Nothing to echo.');
    }, "ToastPlugin", "longToast", [ str ]);
}; 
```

在你的项目中链接这些文件，现在你可以调用`JavaScript`：

*   shortToast("这里有简短的 Toast 消息...");
*   longToast("这里的祝酒长消息...");

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T07:54:08.037

[PhoneGap-Toast](https://github.com/m00sey/PhoneGap-Toast "PhoneGap-Toast Github 项目")是一个开放源代码（MIT 许可）的 PhoneGap 桥，允许您执行此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-25T18:15:27.723

寻找一个通用的 iOS/Android/WP8 Toast 插件，查看这个：[http ://www.x-services.nl/phonegap-toast-plugin/796](http://www.x-services.nl/phonegap-toast-plugin/796)

# css - 如何使浮动元素的结果只影响其后续兄弟而不影响其他后续元素？

> ID：14724054
> 
> 赞同：1
> 
> 时间：2013-02-06T07:52:36.893
> 
> 标签：css, css-float

如何使浮动元素的结果只影响其后续兄弟而不影响其他后续元素？

我的意思是在由浮动兄弟创建的列下通常呈现的块级元素之后的其他（不是兄弟）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:55:35.533

您将不得不告诉浮动的父级的兄弟姐妹清除。您可以通过在父级上使用 clearfix 或直接将 clear 应用于父级的直接兄弟来执行此操作。

例如，如果您有这样的结构：

```
<div class="parent">
    <div>Float</div>
    <div>Float, following sibling</div>
    <div>Float, following sibling</div>
</div>
<div>Outside of .parent</div>
<div>Outside of .parent</div> 
```

使用这个 CSS：

```
.parent div {
    float: left;
} 
```

您可以通过告诉其中的第一个清除浮动来防止浮动影响外部元素：

```
.parent + div {
    clear: both;
} 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/uNeGb)

您不必告诉这些浮动的后代清除，因为浮动的后代*永远不*应该干扰浮动。这里唯一需要关注的是跟随不是浮动的兄弟的元素。

# uml - UML 图：如何在我的类图中显示由大多数类实现的接口

> ID：14724056
> 
> 赞同：10
> 
> 时间：2013-02-06T07:52:42.793
> 
> 标签：uml, class-diagram

我有一个类似的界面：

```
public interface MyEntity {

    //HIbernate version
    public long getOptLock();

    //these method are used to keep track of Last modified timestamp 
    public void update();

    public void persist();

} 
```

这是由我的对象模型中的大多数类实现的。现在，我知道如何在类图中显示[接口实现。](http://publib.boulder.ibm.com/infocenter/rsmhelp/v7r0m0/index.jsp?topic=/com.ibm.xtools.modeler.doc/topics/cimplement.html)

问题是因为这个特定的接口是由大多数类实现的，它使类图变得混乱。是否有其他方法来显示界面实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T00:40:16.867

另一种方法是使用**棒棒糖符号**，就在实现接口的每个类之上：

从 msdn 网站查看此[图像。](http://i.msdn.microsoft.com/dynimg/IC267834.png)

有关完整的文章，请参阅此[链接](http://msdn.microsoft.com/en-ca/library/vstudio/dd409416.aspx#Inheritance)。

# android - 在方法android中添加布局

> ID：14724057
> 
> 赞同：0
> 
> 时间：2013-02-06T07:52:44.590
> 
> 标签：android, android-layout

我想知道如何创建将线性布局添加到其他布局的方法。我想创建一个方法，当我在活动中使用此方法时，此方法会在我的活动布局顶部添加线性布局。我怎样才能做到这一点？

编辑：我做这样的事情：

```
public class SecondActivity extends Activity {

    LinearLayout layout;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second_activity);

        layout = (LinearLayout) findViewById(R.id.lay);
        Button next = (Button) findViewById(R.id.nextActivity);
        layout.addView(addNewLinearLayout(getApplicationContext()));

        next.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(SecondActivity.this, ThirdActivity.class);
                startActivity(intent);
            }
        });
    }
    private View addNewLinearLayout(Context context) {
        LinearLayout linearLayout = new LinearLayout(context);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        linearLayout.setLayoutParams(params);
        linearLayout.setBackgroundColor(getResources().getColor(R.color.black));
        // Do something else here on your linear layout or to customize your linear layout
        return linearLayout;
    }

} 
```

这是xml：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/lay"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/nextActivity"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" 
        android:layout_marginTop="100dp"
        />

</LinearLayout> 
```

但我的布局并没有改变他的颜色。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:00:22.327

尝试这样的事情：

```
private View _addNewLinearLayout(context) {
    LinearLayout linearLayout = new LinearLayout(context);
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
    linearLayout.setLayoutParams(params);
    // Do something else here on your linear layout or to customize your linear layout

    return linearLayout;
} 
```

主要你可以这样称呼：

```
getView().addView(_addNewLinearLayout(context)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:59:29.860

您可以像这样轻松地创建一个新的 LinearLayout：

```
LinearLayout linLayout = new LinearLayout(this);
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,LinearLayout.LayoutParams.FILL_PARENT); 
```

然后将其设置为：

```
setContentView(linLayout, layoutParams); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:00:29.073

您使用此示例方法。如果需要，您可以添加更多参数。

```
public LinearLayout addLinearLayout(Context context) {
    LinearLayout newLayout = new LinearLayout(context);

    //Add stuffs here, like LayoutParams

    return newLayout;
}

yourLinearLayoutName.addView(addLinearLayout(yourClassName.this)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T08:01:19.880

```
LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View detailView = inflater.inflate(R.layout.yourNewLayout, l_details, false); 
```

其中 l_details 是您要在其中添加另一个线性布局的线性布局的实例。

# jira - 将 JIRA 与 3rd 方系统同步，例如错误跟踪系统

> ID：14724059
> 
> 赞同：2
> 
> 时间：2013-02-06T07:52:55.573
> 
> 标签：jira

我想将我的错误跟踪系统同步到 JIRA。我使用不同的 rest api 方法来获取错误信息，但没有得到适当的信息。

[http://example.com:8080/jira/rest/api/2/issue/](http://example.com:8080/jira/rest/api/2/issue/) {issueIdOrKey} [GET, DELETE, PUT] [http://example.com:8080/jira/rest/api/2/search](http://example.com:8080/jira/rest/api/2/search) [获取，发布]

但是这两个都不能给我适当的信息。

还有一个是我无法解析的 json 的受保护属性。

```
[requestLength:protected] => 0
[acceptType:protected] => application/json
[responseBody:protected] => {"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog", .... 
```

查看 json 的受保护属性。

我正在寻找的是：

1.  获取错误的最新状态。
2.  解析 JSON 的受保护属性。

# c# - 什么是 HTTP 错误 414 请求 URI 太长

> ID：14724062
> 
> 赞同：2
> 
> 时间：2013-02-06T07:53:19.633
> 
> 标签：c#, azure

我正在使用 Windows azure 表存储。我正在尝试在表存储表上实现 insertorreplace 操作。像这样：

[http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/#insert-or-replace-entity](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/#insert-or-replace-entity)

当我从表中检索小字符串值时，它工作正常，但是当我有长字符串值时，我得到这个错误。

“远程服务器返回错误：(414) Request-URI Too Long。”

我用谷歌搜索了它，但我不明白它是什么意思。我找到的最好的解释是：http: [//www.checkupdown.com/status/E414.html](http://www.checkupdown.com/status/E414.html)

有人可以帮我理解这个问题吗？

# c++ - 升压中的毫米::单位

> ID：14724063
> 
> 赞同：7
> 
> 时间：2013-02-06T07:53:22.150
> 
> 标签：c++, boost, boost-units

我想将 boost::units 用于某些 SI 指标。但是我们的代码主要处理毫米而不是使用

```
quantity<length> value = 1*milli*meter; 
```

我们更喜欢类似的东西

```
quantity<length> value = 1*millimeter; 
```

但是我不确定如何定义“毫米”（不使用#define）。

其次，使用前缀单位的开销是多少？

更新：这需要在没有 C++11 特性的情况下运行（即没有 UDL）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T08:05:02.180

C++11 确实是最简单的解决方案。你可以做

```
static const auto millimeter = milli * meter; 
```

或者

```
auto operator"" _mm (long double val) -> decltype(val * milli * meter)
{
     return val * milli * meter;
} 
```

只要您不转换为其他前缀，就不应该有性能损失。即使你这样做，它也应该可以忽略不计。

如果您不想使用 C++11，则需要找出表达式的相应类型`milli * meter`，尽管您可以替换`auto`为`int`并阅读编译器消息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T18:53:51.743

我正在使用以下方法：

```
// your namespace name for units
namespace outernamespace {
    namespace millimeter_system {
        typedef boost::units::scaled_base_unit<boost::units::si::meter_base_unit, boost::units::scale<10, boost::units::static_rational<-3>>> millimeter_base_unit;

        typedef boost::units::make_system<millimeter_base_unit>::type system;
        typedef boost::units::unit<boost::units::length_dimension, system> length;

        BOOST_UNITS_STATIC_CONSTANT(millimeter, length);
        BOOST_UNITS_STATIC_CONSTANT(millimeters, length);
    }

    typedef boost::units::quantity<millimeter_system::length> quantity_millimeter;
    using millimeter_system::millimeter;
    using millimeter_system::millimeters;
}

// demonstration of usage
void foo() {
    using namespace outernamespace;
    using namespace boost::units;
    using namespace boost::units::si;

    quantity_millimeter mm = 5 * millimeter;
    quantity<boost::units::si::length> m = 0.004 * meter;
    if (mm < static_cast<quantity_millimeter>(m)) {
        std::cout << 'lt ' << std::endl;
    }
    else {
        std::cout << 'geq ' << std::endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-06T07:58:52.887

如果你有一个支持 C++11 的编译器，你可以使用[用户定义的文字](http://en.cppreference.com/w/cpp/language/user_literal)来定义你的单位。

```
double operator"" _millimeter ( double value )
{
    return value;
} 
```

你可以像这样使用它：

```
double foo = 1000_millimeter; 
```

# c# - SendInput 隐藏重复符号（似乎它不执行 KEYUP 事件）

> ID：14724069
> 
> 赞同：1
> 
> 时间：2013-02-06T07:53:47.430
> 
> 标签：c#, keyup, sendinput

我有将字符输入发送到另一个应用程序的应用程序。一切正常，但如果文本包含重复字符（例如“app”），那么只有一个字母“p”会到达目标窗口。

发送“app”时，我收到“ap”。在网上搜索后，我发现这是因为缺少 KEYUP 事件。但我在下面的代码中肯定有一个。怎么了？

```
void SendText(string text)
{
    int len = text.Length;
    int inputsSize = len * 2;

    INPUT[] inputs = new INPUT[inputsSize];

    for (int i = 0; i < len; i++)
    {
        INPUT inp = new INPUT();
        inp.type = 1; //INPUT_KEYBOARD;
        inp.U.ki.dwFlags = KEYEVENTF.UNICODE;
        inp.U.ki.time = 0;
        inp.U.ki.wVk = 0;
        inp.U.ki.wScan = (short)text[i];
        inp.U.ki.dwExtraInfo = GetMessageExtraInfo();

        inputs[i] = inp;

        INPUT inpUp = inp;

        inpUp.U.ki.dwFlags = KEYEVENTF.UNICODE | KEYEVENTF.KEYUP;

        inputs[i + 1] = inpUp;

    }

    SendInput((uint)inputsSize, inputs, INPUT.Size);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:34:50.477

嗯..我自己找到了决定。但我仍然不知道为什么第一个代码不起作用。这是工作示例。如您所见 - 每个 keyevent 都由单独的 SendInput 发送，而不是一个 keyevent 包。按我的需要工作。

```
void SendText(string text)
{
    int len = text.Length;
    int inputsSize = len * 2;

    //INPUT[] inputs = new INPUT[inputsSize];
    INPUT[] inputs = new INPUT[1];

    for (int i = 0; i < len; i++)
    {
        INPUT inp = new INPUT();
        inp.type = 1; //INPUT_KEYBOARD;
        inp.U.ki.dwFlags = KEYEVENTF.UNICODE;
        inp.U.ki.time = 0;
        inp.U.ki.wVk = 0;
        inp.U.ki.wScan = (short)text[i];
        inp.U.ki.dwExtraInfo = GetMessageExtraInfo();

        //inputs[i] = inp;
        inputs[0] = inp;
        SendInput(1, inputs, INPUT.Size);

        inp = new INPUT();
        inp.type = 1; //INPUT_KEYBOARD;
        inp.U.ki.dwFlags = KEYEVENTF.KEYUP | KEYEVENTF.UNICODE;
        inp.U.ki.time = 0;
        inp.U.ki.wVk = 0;
        inp.U.ki.wScan = (short)text[i];
        inp.U.ki.dwExtraInfo = GetMessageExtraInfo();

        //inputs[i + 1] = inp;
        inputs[0] = inp;
        SendInput(1, inputs, INPUT.Size);
    }

    //SendInput((uint)inputsSize, inputs, INPUT.Size);
} 
```

# python - 请求示例返回错误

> ID：14724077
> 
> 赞同：1
> 
> 时间：2013-02-06T07:54:17.907
> 
> 标签：python, python-requests

我正在做一个需要网络抓取的项目。因此，我正在查看 Python 中的 Requests 库。在库的快速入门页面中，[给出](http://docs.python-requests.org/en/latest/user/quickstart/#response-content)了以下代码示例：

```
>>> import requests
>>> r = requests.get('https://github.com/timeline.json')
>>> r.text
'[{"repository":{"open_issues":0,"url":"https://github.com/... 
```

在尝试该代码时，我发现尝试打印 r.text 时返回以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Response' object has no attribute 'text' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:25:23.560

try `r.content`- 它应该适用于旧版本的请求或升级。`python 2.7`升级使用请求`sudo pip-2.7 install requests --upgrade`

# php - 输入字段不允许打印某些运算符

> ID：14724078
> 
> 赞同：0
> 
> 时间：2013-02-06T07:54:18.560
> 
> 标签：php

我有一个输入表单，用于在数据库中发布一些数据，问题是它不允许我发布诸如“+”、“&”等字符。

现在我使用了这种格式：

```
$postPagesashtepi = $_POST["postPagesashtepi"]; 
```

表格如下所示：

```
<input id="pagesashtepi" name="pagesashtepi" type="text" size="40" value="<?php echo $row['pagesashtepi'];?> 
```

我也用过`filter sanitized`但没有成功..有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:57:54.453

每当您将用户提供的内容输出到浏览器时，您应该始终调用[`htmlspecialchars`](http://php.net/htmlspecialchars)它以确保人们不会将 HTML 注入您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:00:01.757

你在帖子中传递了错误的名字。

`$postPagesashtepi = htmlspecialchars($_POST["postPagesashtepi"]);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:01:16.510

您可以使用

```
 $string=stripslashes($string); 
```

这使您的输入取消引用 DB

使用此功能进行安全输入

```
function dbcodec($string){
    $string=stripslashes($string);
    $string=str_replace("\\",'\\',$string);
    $string=str_replace("'","\'",$string);
    $string=str_replace("`","\`",$string);
    $string=str_replace('"','\"',$string);
    $string=str_replace('*','\*',$string);
    return $string;
} 
```

并且您可以使用**mysql_real_escape_string**进行转义输入

# sql - 在 UDF 中使用游标，返回具有不同表名称的列

> ID：14724080
> 
> 赞同：1
> 
> 时间：2013-02-06T07:54:27.967
> 
> 标签：sql, sql-server-2005, cursor, user-defined-functions

```
Create FUNCTION [dbo].[fn_GetStockDeatils]()
RETURNS @Results TABLE
(
PurchaseData nvarchar(50) NOT NULL 

)
AS
    BEGIN

    Declare @tableName varchar(25)
    Declare @PKKey numeric(18,0)

    DECLARE StockCursor CURSOR FOR Select tableName ,PKKey from INVM 
    OPEN StockCursor
    FETCH StockCursor INTO @tableName ,@PKKey 
       Begin

         Insert @Results Select PurchaseData from @tableName.PKKey =@PKKey 

       END      
    FETCH StockCursor INTO @tableName ,@PKKey 
    close StockCursor
    DEALLOCATE StockCursor

        Return  

    END 
```

我已经写了这个，但它不能正常工作。`@tableName`包含表的名称。如果可能，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:15:52.333

听起来您需要[**动态 SQL 命令**](http://www.mssqltips.com/sqlservertip/1160/execute-dynamic-sql-commands-in-sql-server/)，但您不能从函数中使用动态 SQL。为此，您必须创建存储过程。

```
CREATE PROCEDURE [dbo].[GetStockDeatils]
AS
BEGIN
DECLARE @tableName varchar(25),
        @PKKey numeric(18,0),
        @dsql nvarchar(max) = N''

IF OBJECT_ID('tempdb.dbo.#Results') IS NOT NULL DROP TABLE dbo.#Results
CREATE TABLE dbo.#Results(PurchaseData nvarchar(50) NOT NULL)

DECLARE StockCursor CURSOR LOCAL FAST_FORWARD FOR 
SELECT tableName ,PKKey 
FROM INVM 
OPEN StockCursor
FETCH NEXT FROM StockCursor INTO @tableName, @PKKey
WHILE @@FETCH_STATUS = 0
BEGIN 
  SET @dsql = 'Insert dbo.#Results Select PurchaseData from ' + @tableName + ' WHERE PKKey = ' + CAST(@PKKey AS varchar(10))
  EXEC sp_executesql @dsql  
  FETCH NEXT FROM StockCursor INTO @tableName, @PKKey 
END
CLOSE StockCursor
DEALLOCATE StockCursor

SELECT *
FROM dbo.#Results
END

EXEC [dbo].[GetStockDeatils] 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/3271c/1)上的演示[](http://sqlfiddle.com/#!3/3271c/1)

 **创建视图的过程

```
CREATE PROCEDURE [dbo].[GetStockDeatils]
AS
BEGIN
DECLARE @dsql nvarchar(max) = N''
IF OBJECT_ID('dbo.v_Results') IS NOT NULL DROP VIEW dbo.v_Results
SELECT @dsql += 
  'UNION ALL SELECT PurchaseData FROM ' + tableName + 
  ' WHERE PKKey = ' + CAST(PKKey AS varchar(10))                
FROM dbo.INVM
SET @dsql = N'CREATE VIEW dbo.v_Results AS ' + STUFF(@dsql, 1, 10, '')
EXEC sp_executesql @dsql
END

EXEC [dbo].[GetStockDeatils]

SELECT *
FROM dbo.v_Results 
```**

# javascript - 数组递归开始端点

> ID：14724084
> 
> 赞同：2
> 
> 时间：2013-02-06T07:54:48.717
> 
> 标签：javascript, loops, recursion

我有一个这样的数组：

```
["one", "foo", "two", "baz", "two", "one", "three", "lulz", "wtf", "three"]
   1             2             2      1       3                       3 
```

每个字符串都是访问对象字面量的键。我想要做的是在这种情况下添加由主键分隔的子键的完整路径`one`，`two`和`three`。这是预期的结果：

```
[
  'one', 'one.foo', 'one.two', 'one.two.baz', 'one.two', 'one',
  'three', 'three.lulz', 'three.wtf', 'three'
] 
```

在过去的几个小时里，我一直在尝试使用循环并首先提取重复的项目，然后尝试通过给定的起点和终点对数组进行切片。然后我尝试了正则表达式，只是想看看它是否可能，但 JS 不处理正则表达式中的递归，它变得非常复杂并且可能没有必要。我当时很沮丧，没有任何效果。我不知道现在该去哪里。我被困住了。

**编辑：**我已经尝试了一段时间，因为它看起来更简单，但理想情况下我想要提取的只是没有关闭“标签”的键链。

```
[
  'one', 'one.foo', 'one.two', 'one.two.baz',
  'three', 'three.lulz', 'three.wtf'
] 
```

![](../Images/7cd7cb0639f7e5e55753597235f1f43a.png)

有人可以在这里启发我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:24:44.747

没有递归，你可以像这样解决它；它保持一个共同的前缀，并且在每次迭代时它都会左右扫描以找到相同的项目。

如果左侧有相同的项目，则减少前缀（在发出之前）；如果右侧有项目，则增加前缀（在发出后）。

```
var a = ["one", "foo", "two", "baz", "two", "one", "three", "lulz", "wtf", "three"];

var prefix = '',
    keys = [];

for (var i = 0, len = a.length; i < len; ++i) {
  var left = a.indexOf(a[i]),
      right = a.indexOf(a[i], i + 1);

  if (left >= 0 && left < i) {
    prefix = prefix.substr(0, prefix.lastIndexOf(a[i]));
  }
  keys.push(prefix + a[i]);
  if (right !== -1) {
    prefix = prefix + a[i] + '.';
  }
}

console.log(keys); 
```

[**演示**](http://jsbin.com/okalul/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:05:58.093

您可以在这里避免递归。只需步行阵列。将当前数组元素与您正在累积的字符串进行比较。当您第一次看到一个新的“主要”元素时，将它附加到您正在构建的字符串中。当您看到与您目前拥有的字符串后缀匹配的主元素的关闭实例时，弹出它。走路时建立结果数组。

例如，给定

```
["one", "foo", "two", "baz", "two", "one", "three", "lulz", "wtf", "three"] 
```

你首先看到“一个”，所以发出那个

```
result = ["one"]
working = "one" 
```

然后您会看到`"foo"`如此发出，但仅保留`"one"`作为要比较的字符串。

```
result = ["one", "one.foo"]
working = "one" 
```

接下来，您必须`"two"`如此发出并保持`"one.two"`。

```
result = ["one", "one.foo", "one.two"]
working = "one.two" 
```

接下来是`"baz"`发射但不保留。

```
result = ["one", "one.foo", "one.two", "one.two.baz"]
working = "one.two" 
```

接下来是一个`"two"`这样你就可以流行了！

```
result = ["one", "one.foo", "one.two", "one.two.baz"]
working = "one" 
```

接下来，`"one"`再次流行！

```
result = ["one", "one.foo", "one.two", "one.two.baz"]
working = "" 
```

现在是一个三，这是一个主标签，所以发出并保持：

```
result = ["one", "one.foo", "one.two", "one.two.baz", "three"]
working = "three" 
```

直截了当！我想你可以从这里拿走。不需要花哨的递归。当然，您可能必须检查嵌套和平衡中的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:39:14.410

这是一个递归解决方案。该函数采用当前前缀和它正在使用的数组。如果数组为空，它返回一个空的键数组，否则它通过将项目移出数组的前面来构建具有当前前缀的键。如果在该过程中它到达数组的末尾，或者数组中稍后出现的元素，它将停止构建新的键并递归。

递归的工作原理是在下一次发现重复的元素时拆分数组。当前键与左子数组一起用作前缀用于一次调用，空白前缀与右子数组一起用于另一次调用。该函数返回它找到的键加上两个递归调用找到的键。

不是最有效的解决方案，迭代的解决方案在这方面更好，但我想我会为任何感兴趣的人发布递归解决方案。

```
function foldKeys(prefix, arr) {
    var keys = [],
        key,
        i;

    if (arr.length == 0) {
        return keys;
    }

    do {
        next = arr.shift();
        key = prefix + (prefix == '' ?  next : ('.' + next));
        keys.push(key);
    } while (arr.length && (i = arr.indexOf(next)) === -1);

    return keys
        .concat(foldKeys(key, arr.slice(0, i)))
        .concat(foldKeys('', arr.slice(i + 1)));
}

var arr = ["one", "foo", "two", "baz", "two", "one", "three", "lulz", "wtf", "three"];
var keys = foldKeys('', arr);
console.log(keys.toString()); 
```

# c# - 在单个程序集 C# 中具有多个命名空间是好还是坏的编码实践？

> ID：14724085
> 
> 赞同：0
> 
> 时间：2013-02-06T07:54:57.370
> 
> 标签：c#, namespaces, .net-assembly

我正在创建一个 C# 程序集，其中包含逻辑文件夹。每次我将文件添加到文件夹时，它都有不同的命名空间，因为文件夹。

我很好奇我应该将每个重命名为相同的命名空间还是保持原样。

哪一个是最佳实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T07:57:54.420

[命名空间](http://msdn.microsoft.com/en-us/library/z2kcy19k%28v=vs.110%29.aspx)组织代码元素并创建全局唯一类型。如果您希望您的代码位于单个命名空间中，那么请确保您可以重命名所有它们，但是由于您将代码放在不同的文件夹中以进行组织，因此为了清楚起见，您可以将它们留在不同的命名空间中。但这取决于您和您的要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T07:58:17.540

你绝对应该让它们保持原样。如果您觉得需要为程序集中的类创建文件夹，因为您觉得它们在逻辑或语义上相关，那么命名空间应该反映这一点。

[这是为每个文件夹创建命名空间的一个很好的论据](https://stackoverflow.com/questions/4664/should-the-folders-in-a-solution-match-the-namespace)。

# wordpress - 如何在我的插件中添加 admin_init 以便贡献者可以上传图片

> ID：14724090
> 
> 赞同：0
> 
> 时间：2013-02-06T07:55:18.880
> 
> 标签：wordpress

我有我编写的名为 MyPlugin 的插件。我有一个是或否单选按钮，如果选项是是意味着它应该允许贡献者上传图片，而不是意味着它不应该允许。

这是允许贡献者上传图片的代码

```
if ( current_user_can('contributor') && !current_user_can('upload_files') )
    add_action('admin_init', 'allow_contributor_uploads');
function allow_contributor_uploads() {
    $contributor = get_role('contributor');
    $contributor->add_cap('upload_files');
} 
// this is the code to remove if the capabilities if it is added

if ( current_user_can('contributor') && current_user_can('upload_files') )
    add_action('admin_init', 'remove_contributor_upload');
function remove_contributor_upload(){
    $con = get_role('contributor');
    $con->remove_cap('upload_files');
} 
```

我需要帮助我应该把这段代码放在插件的哪里，我试过了，但我得到了错误

```
Error in wp-includes/capabilities.php on line 1059 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:43:03.003

您正在调用无法在 init() 之前调用的函数，因此它们是未定义的（具体而言，wp_get_current_user() 是在 wp-includes/pluggable.php 中定义的，并且在加载所有插件之后才会加载）。在调用 admin_init**后**，您需要重新排列代码以检查用户权限，例如

```
add_action('admin_init', 'allow_contributor_uploads');
function allow_contributor_uploads() {
    if ( current_user_can('contributor') && !current_user_can('upload_files') ) {
        $contributor = get_role('contributor');
        $contributor->add_cap('upload_files');
    }
}
// this is the code to remove if the capabilities if it is added

add_action('admin_init', 'remove_contributor_upload');
function remove_contributor_upload(){
    if ( current_user_can('contributor') && current_user_can('upload_files') ) {
        $con = get_role('contributor');
        $con->remove_cap('upload_files');
    }
} 
```

注意：只是在这里解决你的错误问题，没有看过你在做什么的逻辑！

# c# - MVC.NET HttpSessionStateWrapper - 最佳使用实践是什么？

> ID：14724091
> 
> 赞同：1
> 
> 时间：2013-02-06T07:55:22.877
> 
> 标签：c#, asp.net-mvc-4, httprequest, httpcontext

我们正在开发大型 MVC 项目，我们打算使用 HttpSessionStateWrapper（以及 HttpRequestWrapper、HttpResponseWrapper 等）来添加扩展功能来执行此对象。它将添加会话消息、额外的集合、带有响应的 html 元数据——诸如此类的东西，可从控制器管理并在需要时在视图中访问。

我在一个较小的项目中完成了它，它通常运行良好，除了这里和那里的一些铸造问题，但它可以通过不使用控制器外部的包装器或最终视图来解决。每个控制器都将是一个自定义控制器，其代码如下：

```
public class Controller : System.Web.Mvc.Controller
{
    public new CustomHttpResponse Response
    {
        get
        {
            return (CustomHttpResponse)HttpContext.Response;
        }
    }

    public new CustomHttpRequestRequest
    {
        get
        {
            return (CustomHttpRequestRequest)HttpContext.Request;
        }
    }
    //etc...

} 
```

ContextWrapper 将在自定义 MvcHandler 中创建。响应、请求和会话包装器将被创建并取自 ContextWrapper 。

这是使用包装器扩展功能的好策略，还是仅用于创建测试模拟？

# jquery - jquery在codeigniter中发布加载索引页面

> ID：14724097
> 
> 赞同：0
> 
> 时间：2013-02-06T07:55:34.903
> 
> 标签：jquery, codeigniter-2

Jquery -> 查看 -> v_addEmployee::

```
function get_subdepartment() {
var dep_selected = $('select[name=txtDept]').val();
$.ajax({
    data: {
        dept: dep_selected,
    },
    type: 'POST',
    url: 'addEmployee/getSubDept',
    success: function(data){ 
        console.log(data);
        alert(dep_selected);
        $('.subDept').html(data);
    }
}) 
```

}

查看-> v_addEmployee：

```
 $rs_dept = $this->m_addVacancy->getDepartment();
                $deptOption['-'] = 'Select Department';
                if ($rs_dept){
                    foreach($rs_dept as $row_dept){
                        $deptOption[$row_dept->dept] = $row_dept->dept;
                    }
                }
            //echo form_dropdown($name = 'txtDept',$Options = $department, array($this->input->post('txtDept')) ,'class="txt2" style="width: 96% " onChange="get_subdepartment1();"');
            echo form_dropdown('txtDept',$deptOption, array($this->input->post('txtDept')),'class="txt2" style="width: 96% " onChange="get_subdepartment();" onSelect="get_subdepartment();"'); 
```

控制器：在 addEmployee/getSubDept 中是否存在 addEmployee/index

```
 function index(){
        $this->load->helper('form');
        $this->load->view('v_addEmployee');
    }

function getSubDept(){ echo $this->input->post(dept); } 
```

在 .subDept 中，它显示 addEmployee/index 页面。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:04:51.007

这可能是路由问题，请尝试更改：

```
url: 'addEmployee/getSubDept', 
```

至

```
url: '/addEmployee/getSubDept', 
```

或者

```
url: '<?php echo base_url(); ?>addEmployee/getSubDept', 
```

检查控制台以查看您的 ajax 帖子是否被重定向。

# xml - 将 Excel 导出为 XML 时如何设置标签 ID？

> ID：14724098
> 
> 赞同：2
> 
> 时间：2013-02-06T07:55:42.453
> 
> 标签：xml, excel

我有一个非常简单的三列 excel 文件：

![在此处输入图像描述](../Images/136cce5e7b6a22759dadb663c89dba9f.png)

我想将其导出到具有以下结构的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<translations>
<item id="USER_NAME">
    <en>Username</en>
    <de>Username_D</de>
</item>
<item id="PASSWORD">
    <en>Password</en>
    <de>Password_D</de>
</item>
</translations> 
```

到目前为止，我只设法使用了以下映射文件

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="translations">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="item" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
<xs:element name="item" id="pippo">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="en" type="xs:string"/>
            <xs:element name="de" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>
</xs:schema> 
```

这几乎给出了我想要的：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<translations>
<item>
    <en>Username</en>
    <de>Username_D</de>
</item>
<item>
    <en>Password</en>
    <de>Password_D</de>
</item>
</translations> 
```

如何将 id 字段设置到 idem 节点中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:11:35.947

好的，我找到了解决方法。

我创建了一个这样的 XML（即类似于最终结果）

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<translations xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<item id="USER_NAME">
    <en>Username</en>
    <de>Username_D</de>
</item>
<item id="PASSWORD">
    <en>Password</en>
    <de>Password_D</de>
</item>
</translations> 
```

通过“开发人员”选项卡将 XML 导入 Excel。将它拖到一个新的电子表格中，这样我就有了一个新的基于 XML 的 Excel 工作表。复制/粘贴我需要的所有值并导出。因此，例如，这张表

![在此处输入图像描述](../Images/842d38eb106e6637df650524cdff1c86.png)

将生成此 XML

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<translations xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<item id="USER_NAME">
    <en>Username</en>
    <de>Username_D</de>
</item>
<item id="PASSWORD">
    <en>Password</en>
    <de>Password_D</de>
</item>
<item id="SOME">
    <en>A</en>
    <de>B</de>
</item>
</translations> 
```

# c# - 为什么 c# 垃圾收集器在满足请求之前不会继续尝试释放内存？

> ID：14724107
> 
> 赞同：9
> 
> 时间：2013-02-06T07:56:26.133
> 
> 标签：c#, garbage-collection, finalizer

考虑下面的代码：

```
using System;

namespace memoryEater
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            Console.WriteLine("alloc 1");
            var big1 = new BigObject();

            Console.WriteLine("alloc 2");
            var big2 = new BigObject();

            Console.WriteLine("null 1");
            big1 = null;

            //GC.Collect();

            Console.WriteLine("alloc3");
            big1 = new BigObject();

            Console.WriteLine("done");
            Console.Read();
        }
    }

    public class BigObject
    {
        private const uint OneMeg = 1024 * 1024;
        private static int _idCnt;
        private readonly int _myId;
        private byte[][] _bigArray;

        public BigObject()
        {
            _myId = _idCnt++;
            Console.WriteLine("BigObject {0} creating... ", _myId);

            _bigArray = new byte[700][];

            for (int i = 0; i < 700; i++)
            {
                _bigArray[i] = new byte[OneMeg];
            }

            for (int j = 0; j < 700; j++)
            {
                for (int i = 0; i < OneMeg; i++)
                {
                    _bigArray[j][i] = (byte)i;
                }
            }
            Console.WriteLine("done");
        }

        ~BigObject()
        {
            Console.WriteLine("BigObject {0} finalised", _myId);
        }
    }
} 
```

我有一个类 BigObject，它在其构造函数中创建一个 700MiB 数组，并且有一个 finalize 方法，除了打印到控制台之外什么都不做。在 Main 中，我创建了两个这样的对象，释放一个，然后创建第三个。

如果这是为 32 位编译的（以便将内存限制为 2 gigs），则在创建第三个 BigObject 时会抛出内存不足异常。这是因为当第三次请求内存时，无法满足请求，因此垃圾收集器运行。然而，准备好被收集的第一个 BigObject 有一个终结器方法，因此不是被收集，而是被放置在终结队列中并被终结。然后垃圾收集器停止并抛出异常。但是，如果取消注释对 GC.Collect 的调用，或者删除 finalize 方法，代码将运行良好。

我的问题是，为什么垃圾收集器不能尽其所能满足内存请求？如果它运行两次（一次完成，一次释放），上面的代码就可以正常工作。垃圾收集器不应该继续完成和收集，直到在抛出异常之前没有更多的内存可以被释放，并且有没有办法将它配置为这种方式（在代码中或通过 Visual Studio）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:22:14.747

GC 何时工作并尝试回收内存是不确定的。

如果在`big1 = null`. 但是，您应该小心强制 GC 收集。除非您知道自己在做什么，否则不建议这样做。

```
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

[在 C# 中强制垃圾回收的最佳实践](https://stackoverflow.com/questions/233596/best-practice-for-forcing-garbage-collection-in-c-sharp)

[我什么时候应该使用 GC.SuppressFinalize()？](https://stackoverflow.com/questions/151051/when-should-i-use-gc-suppressfinalize)

[.NET 中的垃圾收集（世代）](https://stackoverflow.com/questions/978711/garbage-collection-in-net-generations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:15:04.907

我猜是因为终结器在垃圾收集期间执行的时间是未定义的。不能保证在任何特定时间释放资源（除非调用 Close 方法或 Dispose 方法。），终结器的运行顺序也是随机的，因此您可以让另一个对象上的终结器等待，而您的对象等待那个.

# json - 如何在 yii 中访问 extjs 的多值 json 输出

> ID：14724111
> 
> 赞同：0
> 
> 时间：2013-02-06T07:56:44.993
> 
> 标签：json, extjs, yii

我正在使用 extjs+yii 框架。我的客户端在 extjs 中，服务器端设计在 yii 框架中。所以 extjs 的表单输入通过 json 传入 yii framewok。这个 json 在 yii 控制器动作中被接受为-

```
 public function actionSetUserAnswer()
              {
     $postData = json_decode(file_get_contents("php://input"), true);
                 $clientData = $postData['data'];
                  } 
```

extjs 发送的实际 json 数据是-

```
'{"data":[{"optionId":"","questionId":"1","isAnswer":"","option":"Aus","media":"","keyword":"","mediaTypeId":"","id":null},{"optionId":"","questionId":"2","isAnswer":"","option":"india","media":"","keyword":"","mediaTypeId":"","id":null},{"optionId":"","questionId":"3","isAnswer":"","option":"England","media":"","keyword":"","mediaTypeId":"","id":null},{"optionId":"","questionId":"4","isAnswer":"","option":"Srilanka","media":"","keyword":"","mediaTypeId":"","id":null}]}'; 
```

因此，在 yii 中，如何使用 $clientdata 变量访问 json 的这些单独字段，例如 option、questionId 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:10:43.747

你可以只使用数组下标

```
$option = $clientData[0]['option'] 
```

或者

```
$questionId = $clientData[0]['questionId'] 
```

如果要检索用于 in 的多个值`findByAttributes`，则需要一个值数组。您首先`questionId`从 JSON 中检索 s

```
function get_question_id($elem) {
    return $elem['questionId'];
}

$questionIds = array_map('get_question_id', $clientData); 
```

然后在`findByAttributes`

```
$record=Question::model()->findByAttributes(array("questionId"=>$questionIds)); 
```

*更新*合并您的最后评论：

```
static public function get_question_id($elem)
{
    return $elem['questionId'];
}

public function actionSetUserAnswer() {
    $clientData = '{"data":[{"optionId":"","questionId":"1","isAnswer":"","option":"Au‌​s","media":"","keyword":"","mediaTypeId":"","id":null},...]}';
    $obj = json_decode($clientData['data']);
    $questionIds = array_map('get_question_id', $obj);
    var_dump($questionIds);
    $records = Question::model()->findByAttributes(array("questionId"=>$questionIds));
} 
```

# android - Android Flipboard 动画

> ID：14724116
> 
> 赞同：12
> 
> 时间：2013-02-06T07:57:06.007
> 
> 标签：android, xml, animation

我想在 Android 中更改视图时为 Flipboard 设置动画。

是否可以在整个布局上为 Flipboard 设置动画？类似于图片上的那些字母，但整个布局。

例如：

```
<LinearLayout
       android:layout_width="fill_parent"
       android:layout_height="fill_parent">

// whole layout design

<LinearLayout/> 
```

我想在更改此布局和/或充气另一个以执行 Flipboard 动画时制作动画。

![翻板动画](../Images/73e2c98796542a1029c835c25e8783aa.png)

动画应该看起来和[这个完全一样](http://www.youtube.com/watch?v=w1fTI7oYfbI)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T14:43:21.503

这个问题的答案在 GitHub 上。OpenAphid 提供的非常好的示例。访问此[链接](https://github.com/openaphid/android-flip)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:22:16.523

使用以下代码它们完全符合您的要求：

第一类：

```
import android.graphics.Color;
import android.view.Display;
import android.view.View;
import android.view.WindowManager;
import android.view.animation.AccelerateInterpolator;
import android.view.animation.Animation;

    /**
     * A class that is responsible switching the mode with the flip animation 
     */

    public class ViewSwitcher {

        private final static int DURATION = 500;
        private final static float DEPTH = 400.0f;

        public interface AnimationFinishedListener {
            /**
             * Called when the animation is finished.
             */
            public void onAnimationFinished();
        }

        public static void animationIn(View container, WindowManager windowManager) {
            animationIn(container, windowManager, null);
        }

        public static void animationIn(View container, WindowManager windowManager, AnimationFinishedListener listener) {
            apply3DRotation(90, 0, false, container, windowManager, listener);
        }

        public static void animationOut(View container, WindowManager windowManager) {
            animationOut(container, windowManager, null);
        }

        public static void animationOut(View container, WindowManager windowManager, AnimationFinishedListener listener) {
            apply3DRotation(0, -90, true, container, windowManager, listener);
        }

        private static void apply3DRotation(float fromDegree, float toDegree, boolean reverse, View container, WindowManager windowManager, final AnimationFinishedListener listener) {
            Display display = windowManager.getDefaultDisplay();
            final float centerX = display.getWidth() / 2.0f;
            final float centerY = display.getHeight() / 2.0f;

            final Rotate3dAnimation a = new Rotate3dAnimation(fromDegree, toDegree, centerX, centerY, DEPTH, reverse);
            a.reset();
            a.setBackgroundColor(Color.WHITE);
            a.setDuration(DURATION);
            a.setFillAfter(true);
            a.setInterpolator(new AccelerateInterpolator());
            if (listener != null) {
                a.setAnimationListener(new Animation.AnimationListener() {
                    public void onAnimationStart(Animation animation) {
                    }

                    public void onAnimationRepeat(Animation animation) {
                    }

                    public void onAnimationEnd(Animation animation) {
                        listener.onAnimationFinished();
                    }
                });
            }
            if(container != null){
                container.clearAnimation();
                container.startAnimation(a);
            }
            else if (listener != null)
                listener.onAnimationFinished();
        }
    } 
```

第 2 类：

```
import android.view.animation.Animation;
import android.view.animation.Transformation;
import android.graphics.Camera;
import android.graphics.Color;
import android.graphics.Matrix;

/**
 * An animation that rotates the view on the Y axis between two specified angles.
 * This animation also adds a translation on the Z axis (depth) to improve the effect.
 */
public class Rotate3dAnimation extends Animation {
    private final float mFromDegrees;
    private final float mToDegrees;
    private final float mCenterX;
    private final float mCenterY;
    private final float mDepthZ;
    private final boolean mReverse;
    private Camera mCamera;

    /**
     * Creates a new 3D rotation on the Y axis. The rotation is defined by its
     * start angle and its end angle. Both angles are in degrees. The rotation
     * is performed around a center point on the 2D space, definied by a pair
     * of X and Y coordinates, called centerX and centerY. When the animation
     * starts, a translation on the Z axis (depth) is performed. The length
     * of the translation can be specified, as well as whether the translation
     * should be reversed in time.
     *
     * @param fromDegrees the start angle of the 3D rotation
     * @param toDegrees the end angle of the 3D rotation
     * @param centerX the X center of the 3D rotation
     * @param centerY the Y center of the 3D rotation
     * @param reverse true if the translation should be reversed, false otherwise
     */
    public Rotate3dAnimation(float fromDegrees, float toDegrees,
            float centerX, float centerY, float depthZ, boolean reverse) {
        super.setBackgroundColor(Color.WHITE);
        mFromDegrees = fromDegrees;
        mToDegrees = toDegrees;
        mCenterX = centerX;
        mCenterY = centerY;
        mDepthZ = depthZ;
        mReverse = reverse;
    }

    @Override
    public void initialize(int width, int height, int parentWidth, int parentHeight) {
        super.setBackgroundColor(Color.WHITE);
        super.initialize(width, height, parentWidth, parentHeight);
        mCamera = new Camera();
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        super.setBackgroundColor(Color.WHITE);
        final float fromDegrees = mFromDegrees;
        float degrees = fromDegrees + ((mToDegrees - fromDegrees) * interpolatedTime);

        final float centerX = mCenterX;
        final float centerY = mCenterY;
        final Camera camera = mCamera;
        final Matrix matrix = t.getMatrix();

        camera.save();
        if (mReverse) {
            camera.translate(0.0f, 0.0f, mDepthZ * interpolatedTime);
        } else {
            camera.translate(0.0f, 0.0f, mDepthZ * (1.0f - interpolatedTime));
        }
        camera.rotateX(degrees);
        camera.getMatrix(matrix);
        camera.restore();

        matrix.preTranslate(-centerX, -centerY);
        matrix.postTranslate(centerX, centerY);

    }
} 
```

第 3 类：

```
This Will be Your Actual activity where you should call following two calls to AnimationOut and AnimationIn with passing old view, new view respectively whenever you require to make your disered animation. 
```

现在使用第一个参数调用 animationOut 作为要删除的旧视图，如下所示：

```
ViewSwitcher.animationOut(this.findViewById(android.R.id.content1), getWindowManager(), new ViewSwitcher.AnimationFinishedListener() {
            public void onAnimationFinished() {
            //Do Something here before removing this view from screen if required.
            }
        }); 
```

现在使用第一个参数调用 animationIn 作为要显示的新视图，如下所示：

```
ViewSwitcher.animationIn(this.findViewById(android.R.id.content2), this.getWindowManager()); 
```

# json - 将 UIObject 数据保存在 JSON 文件中

> ID：14724120
> 
> 赞同：2
> 
> 时间：2013-02-06T07:57:17.007
> 
> 标签：json, actionscript-3, apache-flex

如何在 JSON 文件中创建和保存 UIComponent 信息？我正在使用 as3corelib，但我无法将对象保存在磁盘上的文本文件中。

```
 var encodedObjectString:String =    com.adobe.serialization.json.JSON.encode(zorder.getItemAt(0)); 
```

我可以将 UIObject 保存在 JSON 文本文件中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:24:27.280

我猜你的序列化尝试是通过你想要序列化的 UIObject 的父链接，然后遍历遇到相同 UIObject 的子列表。堆栈溢出。

为了进行手动序列化，您只需要序列化对象的部分字段，不包括任何类型的 DisplayObjects 的任何链接（包括 UIObject 类）。`writeExternal()`为此，如果您为对象执行实现，通过 ByteArray 执行序列化，然后根据需要使用它，也许会更好。或者，您可以让您的 UIObject 有一个专用的“要序列化的数据”对象作为属性，该属性将被本机序列化，并且只包含您想要序列化的数据。

[这](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/IExternalizable.html)是关于可外部化对象的手册。

# javascript - 使用 ajax setInterval 发布动态内容

> ID：14724123
> 
> 赞同：0
> 
> 时间：2013-02-06T07:57:29.583
> 
> 标签：javascript

我有多个表格，如下所示，我想在第一个表格上每 2 秒打印一次名称而不会中断 table2，如果我使用 innerHTML，它总是在顶部打印（在 table1 和 table2 上方，但我需要在特定位置上的变量，例如在我的情况下 table1，如果我在 change() 函数上使用 document.write，它会无限循环函数并且不出来意味着 table1 & table2 没有出现？你能建议更好的方法来解决这个问题吗？

我的 update.php 上有以下代码

```
<html>  
<head>  
<link href="css/sample.css" rel="stylesheet" type="text/css" /> 

<div id="changeText" ></div>  

<script type="text/javascript">    
var text = ["Welcome", "David", "Paul", "John"];  
var counter = 0;  
var elem = document.getElementById("changeText");   

function change() {  
elem.innerHTML = text[counter];  
counter++;  
if(counter >= text.length) { counter = 0;   
}

</script> 

<body>  
<tr>  
<td> 
<table align="left" width=15%>  
<td <B><font color="green">Name:<script type="text/javascript">setInterval(change, 2000);
</script>  
</font><br>  
</td>  
</table>  
<table id="sample" width=70% cellpadding="2" cellspacing="1" border="1">
<th class="sno" colspan="2">SNO</th>
<th class="fname" colspan="2">FIRST NAME</th>
<th class="lname" colspan="2">LAST NAME</th> 
</table>
</td>
</tr>
</body>
</html> 
```

我的目标是打印此标签下的文本数组

```
<td <B><font color="green">Name:<script type="text/javascript">setInterval(change, 2000);</script></font> 
```

它应该每 2 秒打印一次并更改名称...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:39:25.533

你有一些语法错误：

[http://jsfiddle.net/gFWeF/6/](http://jsfiddle.net/gFWeF/6/)

```
<html>

    <head>
        <link href="css/sample.css" rel="stylesheet" type="text/css" />
    </head>

    <body>
        <tr>
            <td>
                <table align="left" width=15%>
                    <td><font color="green">Name:</font>
                    <span id="myname"></span>
                    </td>
                </table>
                <table id="sample" width=70% cellpadding="2" cellspacing="1" border="1">
                    <th class="sno" colspan="2">SNO</th>
                    <th class="fname" colspan="2">FIRST NAME</th>
                    <th class="lname" colspan="2">LAST NAME</th>
                </table>
            </td>
        </tr>
    </body>

</html>
<script>
    var text = ["Welcome", "David", "Paul", "John"];
    var counter = 0;
    var elem = document.getElementById("myname");

    function change() {
        elem.innerHTML = text[counter];
        counter++;
        if (counter >= text.length) counter = 0;
    }

    change();
    setInterval(function() {
        change()
    }, 2000);
</script> 
```

# c# - Deploy WCF service in IIS 7.5

> ID：14724125
> 
> 赞同：2
> 
> 时间：2013-02-06T07:57:40.440
> 
> 标签：c#, wcf, iis, wcf-hosting

I am newbie to WCF. I am looking to steps to deploy WCF on IIS and consume the service. I have follow the steps same as to deploy the Website on IIS, also set the default document to Service1.svc

Now when I am trying to consume this wcf service it is giving me the following error.

```
Metadata contains a reference that cannot be resolved: 'http://manish-pc:8000/Service1.svc?wsdl'.
The WSDL document contains links that could not be resolved.
There was an error downloading 'http://manish-pc:8000/Service1.svc?xsd=xsd0'.
The underlying connection was closed: An unexpected error occurred on a receive.
Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.
An existing connection was forcibly closed by the remote host
Metadata contains a reference that cannot be resolved: 'http://localhost:8000/Service1.svc'.
Content Type application/soap+xml; charset=utf-8 was not supported by service http://localhost:8000/Service1.svc.  The client and service bindings may be mismatched.
The remote server returned an error: (415) Cannot process the message because the content type 'application/soap+xml; charset=utf-8' was not the expected type 'text/xml; charset=utf-8'..
If the service is defined in the current solution, try building the solution and adding the service reference again. 
```

Follwing is my Service Details in Web.Config file

```
<system.serviceModel>
    <services>
      <service behaviorConfiguration="DemoWCF.Service1Behavior" name="DemoWCF.Service1">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8000/Service1.svc"/>
          </baseAddresses>
        </host>
        <endpoint address="http://localhost:8000/Service1.svc"
                  binding="basicHttpBinding"
                  contract="DemoWCF.IService1"
                  bindingConfiguration="basicBinding">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint> 
        <endpoint address="mex" 
                  binding="mexHttpBinding" 
                  contract="IMetadataExchange" />
      </service>
    </services>

    <bindings>
      <basicHttpBinding>
        <binding name="basicBinding" textEncoding="utf-8"></binding>
      </basicHttpBinding>
    </bindings>

    <behaviors>
      <serviceBehaviors>
        <behavior name="DemoWCF.Service1Behavior">
          <serviceMetadata httpGetEnabled="True" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

Please guide me where I'm lacking and what steps to make. Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T12:00:50.657

After search on google and watching videos. Finally I got the solution.

This error occur due to IIS configuration that I was not bother about.

1.  open your IIS Manager console.
2.  Make a separate applicaiton pool.
    a). Set .NET Framework version to 4.0
    b). Managed pipeline mode : Classic
3.  Set Applicaiton Pool Identity to "LocalSystem".
4.  Follow the steps same as to deploy a web application on IIS like creating a Virtual Directory.
5.  Creatig the Virtual Directory set that Application Pool you have created.

And consume the WCF Service in Client application.

[Click here to watch the video](http://www.youtube.com/watch?v=nIfx5qbx5MA)

Kindly Update this question / answer thread, if you find more about this.
Thanks :)

# python - 检查字典中是否存在密钥

> ID：14724126
> 
> 赞同：0
> 
> 时间：2013-02-06T07:57:42.327
> 
> 标签：python, django, dictionary

我有一本这样的字典

```
odict([(1, {'media_one': '000121'}), (2, {'media_two': '201984'}), (3, {'media_three': '301984'})]) 
```

我想检查此字典中是否存在密钥 media_two 或 media_one 或 media_three。如果存在做其他事情什么都不做。我们如何检查

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:06:00.507

```
>>> odict = OrderedDict([(1, {'media_one': '000121'}), (2, {'media_two': '201984'}), (3, {'media_three': '301984'})])
>>> any("media_one" in item for item in odict.values())
True 
```

这将检查其中一个键是否存在。要检查所有键：

```
>>> all(any(key in item for item in odict.values()) 
...                     for key in ("media_one", "media_two", "media_three"))
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:10:54.893

`(lambda d: ["media_one" in m for m in d.values()])(odict)`

输出

`[True, False, False]`

# php - 为什么 $_SERVER["PHP_AUTH_USER"] 和 $_SERVER["PHP_AUTH_PW"] 没有设置？

> ID：14724127
> 
> 赞同：13
> 
> 时间：2013-02-06T07:57:42.500
> 
> 标签：php, web-services, authentication, basic-authentication

在开始之前，我想指出我已经浏览过 Stack Overflow 并发现了其他类似的问题 - [PHP_AUTH_USER not set？](https://stackoverflow.com/questions/3663520/php-auth-user-not-set)和[通过 PHP 的 HTTP 身份验证 - PHP_AUTH_USER 未设置？](https://stackoverflow.com/questions/7053306/http-auth-via-php-php-auth-user-not-set)- 这些已经指出，如果“服务器 API”设置为“CGI/FCGI”，则不会设置身份验证 $_SERVER 变量，但我检查了我的 ''phpinfo()'' 输出和我的' “服务器 API”设置为“Apache 2.0 处理程序”。

好的，所以我有一个简单的脚本如下：

```
<?php
    echo "Username: " . $_SERVER["PHP_AUTH_USER"] . ", Password: " . $_SERVER["PHP_AUTH_PW"];
?> 
```

...我通过以下方式远程调用：

```
wget -v --http-user=johnsmith --http-password=mypassword http://www.example.com/myscript.php 
```

...但仅输出：

```
Username: , Password: 
```

我还尝试使用 PHP cURL 调用脚本并适当地设置身份验证参数，如下所示：

```
 curl_setopt($ch, CURLOPT_USERPWD, "johnsmith:mypassword"); 
```

...但我得到与上面相同的输出。

知道我做错了什么吗？也许我还需要启用/配置其他东西？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-21T08:52:22.407

对于 PHP-CGI：

在 .htaccess 添加这个：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
</IfModule> 
```

并在脚本的开头添加以下内容：

```
list($_SERVER['PHP_AUTH_USER'], $_SERVER['PHP_AUTH_PW']) = explode(':' , base64_decode(substr($_SERVER['HTTP_AUTHORIZATION'], 6))); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-11T10:06:49.607

感谢 Naktibalda 在 irc.freenode.net 上 ##php 的帮助，我终于找到了答案

以下页面总结了该问题： http: [//php.net/manual/en/features.http-auth.php](http://php.net/manual/en/features.http-auth.php)

引用相关位：

> 从 PHP 4.3.0 开始，为了防止有人编写脚本来泄露通过传统外部机制进行身份验证的页面的密码，如果为该特定页面启用了外部身份验证并且安全，则不会设置 PHP_AUTH 变量模式已启用。无论如何，REMOTE_USER 可用于识别经过外部验证的用户。因此，您可以使用 $_SERVER['REMOTE_USER']。
> 
> ...
> 
> PHP 使用 AuthType 指令的存在来确定外部身份验证是否有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-07T19:50:08.583

尝试了之前的建议，没有用，也发现了

```
CGIPassAuth On 
```

是建议的 htaccess 添加的更新版本，但这仍然对我不起作用，而是我使用

```
SetEnvIf Authorization .+ HTTP_AUTHORIZATION=$0 
```

（必须在您的根 htaccess 文件中）然后在 php 文件中

```
list($_SERVER['PHP_AUTH_USER'], $_SERVER['PHP_AUTH_PW']) = explode(':' , base64_decode(substr($_SERVER['REDIRECT_HTTP_AUTHORIZATION'], 6))); 
```

如果有人仍然有问题，我建议他们检查服务器变量，因为数据可能在不同的变量中，你正在寻找以基本开头的东西

* * *

## 回答 #4

> 赞同：-7
> 
> 时间：2014-03-26T10:49:13.573

这应该是这样的

```
echo "Username: " . $_SERVER[PHP_AUTH_USER] . ", Password: " . $_SERVER[PHP_AUTH_PW]; 
```

# java - Spring 3.0 使用单选按钮

> ID：14724129
> 
> 赞同：0
> 
> 时间：2013-02-06T07:57:46.107
> 
> 标签：java, jsp, spring-mvc

我正在尝试在 Spring 中使用单选按钮。

我已按照本教程进行操作，效果很好：

[http://www.mkyong.com/spring-mvc/spring-mvc-radiobutton-and-radiobuttons-example/](http://www.mkyong.com/spring-mvc/spring-mvc-radiobutton-and-radiobuttons-example/)

但是，本教程使用的是 Spring 2.5，我正在考虑在 Spring 3.0 中是否还有其他方法可以做到这一点。

在上面的教程中，需要自定义模型来存储单选按钮的值。

那么有没有办法将单选按钮值直接传递回控制器，而不是通过自定义模型？

在控制器中是这样的：

```
public void handleExport(@ModelAttribute("exportType") String exportTye) 
```

而 exportType 是单选按钮的值。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T15:51:23.323

我相信您可以使用 @RequestParam 访问它：

```
<form:radiobutton path="exportType" value="MyType"/>

public void handleExport(@RequestParam("exportType") String exportTye) 
```

# jsf - 日志语句不会进入提到的日志文件

> ID：14724132
> 
> 赞同：0
> 
> 时间：2013-02-06T07:57:50.817
> 
> 标签：jsf, jakarta-ee, logging, log4j

我有如下所示的 log4jConfig.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration debug="false" xmlns:log4j='http://jakarta.apache.org/log4j/'>

    <appender name="abcLog4j" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="/myapp/app/myserver/myproj/domains/logs/abcLog.log"/>
        <param name="Append" value="true"/>
        <param name="MaxFileSize" value="5000KB"/>
        <param name="MaxBackupIndex" value="5"/>
        <layout class="org.apache.log4j.PatternLayout">
          <param name="ConversionPattern" value="%d %-5r %-5p [%c] (%t:%x) %m%n"/>
        </layout>
      </appender>

    <logger name="com.mywhole.mysub.abc" additivity="false">
         <level value="INFO"/>
         <appender-ref ref="abcLog4j"/>
    </logger>

    <appender name="xyzLog4j" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="/myapp/app/myserver/myproj/domains/logs/xyzLog.log"/>
        <param name="Append" value="true"/>
        <param name="MaxFileSize" value="5000KB"/>
        <param name="MaxBackupIndex" value="5"/>
        <layout class="org.apache.log4j.PatternLayout">
          <param name="ConversionPattern" value="%d %-5r %-5p [%c] (%t:%x) %m%n"/>
        </layout>
      </appender>

    <logger name="com.mywhole.mysub.xyz" additivity="false">
         <level value="INFO"/>
         <appender-ref ref="xyzLog4j"/>
    </logger>

      <appender name="STDOUT" class="org.apache.log4j.ConsoleAppender">    
        <layout class="org.apache.log4j.PatternLayout">
          <param name="ConversionPattern" value="%d %-5r %-5p [%c] (%t:%x) %m%n"/>
        </layout>   
     </appender>

    .......................

    <root>
        <priority value="ERROR"/>
        <appender-ref ref="sysoutLog4j"/>       
    </root>

   </log4j:configuration> 
```

我面临的问题是从 com.mywhole.mysub.xyz 中的类生成的日志语句将进入 abcLog.log，反之亦然。谁能解释我如何解决这个问题

```
package com.mywhole.mysub.xyz.model;
// import ....
public class MyBeackingBean extends MySuperBB{
    public static final LoggerInterface log = LoggerFactory
            .getLogger(MyBeackingBean.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:23:12.860

配置看起来正确，它看起来像代码中的复制粘贴错误。假设`LoggerFactory`is`org.slf4j.LoggerFactory`和`LoggerInterface`is `org.slf4j.Logger`，请检查`MyBeanClass.class`in

```
package com.mywhole.mysub.xyz;
// ...
LoggerFactory.getLogger(MyBeanClass.class); 
```

不是`com.mywhole.mysub.abc.MyBeanClass`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T11:56:05.150

log4j的`xml format`应该遵循这个模式

```
<!ELEMENT log4j:configuration (renderer*, appender*,(category|logger)*,root?, categoryFactory?)> 
```

所有的附加程序都应该是`declared before`记录器

所以你`log4j.xml`应该如下所示

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration debug="false" xmlns:log4j='http://jakarta.apache.org/log4j/'>

<appender name="abcLog4j" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="/myapp/app/myserver/myproj/domains/logs/abcLog.log"/>
    <param name="Append" value="true"/>
    <param name="MaxFileSize" value="5000KB"/>
    <param name="MaxBackupIndex" value="5"/>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d %-5r %-5p [%c] (%t:%x) %m%n"/>
    </layout>
  </appender>

  <appender name="STDOUT" class="org.apache.log4j.ConsoleAppender">    
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d %-5r %-5p [%c] (%t:%x) %m%n"/>
    </layout>   
 </appender>

<appender name="xyzLog4j" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="/myapp/app/myserver/myproj/domains/logs/xyzLog.log"/>
    <param name="Append" value="true"/>
    <param name="MaxFileSize" value="5000KB"/>
    <param name="MaxBackupIndex" value="5"/>
    <layout class="org.apache.log4j.PatternLayout">
      <param name="ConversionPattern" value="%d %-5r %-5p [%c] (%t:%x) %m%n"/>
    </layout>
  </appender>

<logger name="com.mywhole.mysub.xyz" additivity="false">
     <level value="INFO"/>
     <appender-ref ref="xyzLog4j"/>
</logger>

<logger name="com.mywhole.mysub.abc" additivity="false">
     <level value="INFO"/>
     <appender-ref ref="abcLog4j"/>
</logger>

.......................

<root>
    <priority value="ERROR"/>
    <appender-ref ref="sysoutLog4j"/>       
</root> 
```

[在此处](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)查看此链接以获取更多详细信息

# mysql - 如何将两个连续查询作为两列放入同一个表中

> ID：14724133
> 
> 赞同：-1
> 
> 时间：2013-02-06T07:57:49.647
> 
> 标签：mysql, sql, concat

我刚开始使用 MySQL，我在任何地方都找不到答案，可能是因为它不存在？

我想把这两个放在一张表中作为两列

```
SELECT CONCAT(Name, ' ',Category) as Pet_Name_and_Category
FROM Animal

SELECT CONCAT(firstname, ' ',lastname) as Customer_Name
From PetCustomer 
```

所以我想要的表看起来像：

```
Gary, Snail               Spongebob Squarepants

Sandy, Squirrel           Patrick Star 
```

这些是同一个表中的两个单独的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:03:26.683

尝试这个，

```
select Name || ' ' || Category from Animal
union
select firstname || ' ' || lastname from PetCustomer; 
```

如果您希望这些作为单独的列，那么您可以使用它，

```
select Name || ' ' || Category as pet, firstname || ' ' || lastname as owner
from Animal, PetCustomer
where <join_condition_depending_on_table_structure>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:06:42.757

你需要使用一个[`INNER JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)，所以像：

```
SELECT 
    CONCAT(Name, ' ',Category) as Pet_Name_and_Category, 
    CONCAT(firstname, ' ',lastname) as Customer_Name
FROM Animal 
    INNER JOIN PetCustomer ON Animal.Customer_id = PetCustomer.id 
```

连接语法取决于 2 个表的关联方式。换句话说

> **你怎么知道“海绵宝宝”拥有“加里，蜗牛”？**

* * *

如果它们不相关并且您只想将它​​们显示在彼此旁边，请使用 2 个单独的查询。*（PHP 中的示例）*

```
$animals = $db->query("SELECT CONCAT(Name, ' ',Category) as Pet_Name_and_Category FROM Animal");
$customers = $db->query("SELECT CONCAT(firstname, ' ',lastname) as Customer_Name From PetCustomer");

while (list($animal) = $animals->fetch_row() || list($customer) = $customers->fetch_row()) {
    echo $animal, "\t", $customer, "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:11:19.207

也许尝试子查询：

```
SELECT 
    (SELECT CONCAT(Name, ' ',Category) 
     FROM Animal 
     WHERE <column> = <search_argument>)  as Pet_Name_and_Category ,
    (SELECT CONCAT(firstname, ' ',lastname) 
     FROM PetCustomer 
     WHERE <column> = <search_argument>) AS Customer_Name
FROM <first table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-11T21:25:45.727

如果您需要对`CONCAT`同一张表使用两次，无论条件如何，都可以使用：

```
SELECT 
    CONCAT(TitleOfCourtesy, ' ', FirstName, ' ', LastName) AS NameEmployee, 
    CONCAT(PostalCode, ' ', Country, ' ', Region, ' ', City, ' ', [Address]) AS FullAddress
FROM Employees 
WHERE 1=1 
```

# android - FTDI d2xx 安卓通信

> ID：14724138
> 
> 赞同：0
> 
> 时间：2013-02-06T07:58:10.020
> 
> 标签：android, usb, usbserial, ftdi

我一直在尝试使用 TN_134 FTDI Android D2XX 驱动程序和测试应用程序，但惨遭失败。LogCat 告诉我它无法加载 .jni 文件，并且每次尝试加载时应用程序都会崩溃...无法加载 .jni 库，因为我的设备没有植根（而且我不打算植根它）。有没有办法绕过这个，使用相同的芯片组？有没有办法将 .jni 代码集成到测试应用程序代码中，这样就不需要库文件了？我愿意接受任何不涉及植根设备的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:37:25.877

我有一个类似的问题，我只是将代码（D2xx 类）中 JNI 的位置更正为正确的位置，即从默认位置到“/data/data/com.ftdi.d2xx/lib/libftd2xx-jni.so ”。

顺便说一句，您正在使用的驱动程序需要 root 访问权限。FTDI 发布了一个新驱动程序，他们说不需要 root 访问权限。只需从他们的网站[FTDI Android D2xx 驱动程序中查看](http://www.ftdichip.com/Android.htm)

# php - Google Docs Form Formkey in 2013 Custom Google Form

> ID：14724139
> 
> 赞同：1
> 
> 时间：2013-02-06T07:58:13.763
> 
> 标签：php, web

您好我正在尝试开发一个 CURL PHP 以首先通过 PHP 发送我的 Google 表单，然后重定向到登录页面。但是，我的问题在于旧的 Google Formkey 响应。

在您可以查看表单源之前，它会有一个表单密钥 ID 号，您可以轻松地将其插入到 PHP 脚本中。

这是我的脚本示例：

```
//Google Form Key
$formkey = "WHERE IS THE FORMKEY";

$thankyou = "http://www.eksenaevents.com/submission-successful/";

//Change this URL to your google form address
$googleformURL = "https://docs.google.com/forms/d/1pCIHFvau8KuR_J1gSAx2weGcdRGjNH0MERdeinbWd-  0/viewform";

//----------------Send Form Fields to Google--------------------
//Loops through the form fields and creates a query string to submit to google
foreach ($_POST as $var => $value) {

if ($var != "ignore") {
$postdata=$postdata . htmlentities(str_replace("_", "." , $var)) . "=" . $value . "&";
}
 } 

//remove the extra comma
$postdata=substr($postdata,0,-1); 

//Submit the form fields to google
$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL,$googleformURL);
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;   rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6");
curl_setopt ($ch, CURLOPT_TIMEOUT, 60);
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata);
curl_setopt ($ch, CURLOPT_POST, 1);
$data = curl_exec ($ch);
curl_close($ch); 
//echo $data;

//Redirect to your thank you page
header( "Location: $thankyou" ) ;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:15:44.250

我知道这个人可能不会看到这个，但对于其他人来说，你的表单键是。. 1pCIHFvau8KuR_J1gSAx2weGcdRGjNH0MERdeinbWd

你的谷歌表单网址也应该是这样的

[https://docs.google.com/yourdomainwhatev/spreadsheet/formResponse?formkey=](https://docs.google.com/yourdomainwhatev/spreadsheet/formResponse?formkey=insert)在此处插入您的表单密钥#gid=0

如果您打开表单，只需复制网址并撕下表单密钥

# html - 是否可以检测 iphone/Android 的手机语言？

> ID：14724144
> 
> 赞同：0
> 
> 时间：2013-02-06T07:58:41.403
> 
> 标签：html, localization

一直在寻找这个，但看不到明确的答案。

--> 有没有办法从移动网络中检测 iphone/android 手机的手机语言。

我们希望尝试改进我们为英语以外的语言提供页面的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:37:55.917

在 JavaScript 中`window.navigator.language`通常可以工作，但早期版本的 Android 将其硬编码为`en`.

对于较旧的 Android，我建议从 UserAgent 字符串中提取语言参数（是的嗅探！），例如

```
if (navigator && navigator.userAgent && (androidLang = navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))) {
   lang = androidLang[1];
} 
```

在这里， lang 可能还包含国家代码（例如“en-IE”），因此您可能还必须删除它：

```
if (lang.indexOf('-') != -1) lang = lang.substring(0, lang.indexOf('-')); 
```

这是我在最近的应用程序中使用的，它运行良好。

# html - 在徽标下方添加导航

> ID：14724145
> 
> 赞同：0
> 
> 时间：2013-02-06T07:58:42.233
> 
> 标签：html, css

我需要在屏幕顶部中心有徽标。在徽标下我需要导航栏。

我有以下CSS：

```
 * {
    margin: 0;
    padding: 0;
}

body {
    background: url(images/bg_image.jpg);
    background-size: 100%;      
    font-size: 14px;
    font-family: Verdana;
    color: #ffffff;
}
    #header {
    background: url(images/logo2.png);    /* THIS IS LOGO IMAGE IN CENTER*/     
    background-repeat:no-repeat;
    background-position: center 20px;    /* CENTERING AND TOP MARGIN IS 20PX*/
    height: 180px;      
}
/* NAVIGATION BAR */
#top-nav{       
    border:0px solid #ccc;      
    list-style:none;    
    /*margin-top:135px;*/
    padding: 0;
    text-align:center;              
    background-color: #000000;
}

#top-nav li {       
    display:inline;
    width:130px;
}

#top-nav a{
    display:inline-block;
    padding:10px;
    text-decoration: none;
    color: white;
}   

#top-nav a:hover{
    background: url(images/selected_menu.png);      
    background-repeat:repeat-x; 
} 
```

和 HTML

```
 <body>

    <div id="header">           
        <ul id="top-nav">
            <li><a href="">Home</a></li>
            <li><a href="">Home</a></li>
            <li><a href="">Home</a></li>
            <li><a href="">Home</a></li>
            <li><a href="">Home</a></li>
            <li><a href="">Home</a></li>
        </ul>           
    </div>
            .... 
```

这给了我在中心和顶部的标志。但导航栏上的标志。我需要它在徽标下（它应该距离屏幕顶部 135 像素）。如果我将边距添加到#top-nav margin-top: 135px，那么徽标也会移动 135px。解决这个问题的正确方法是什么？

我想这是一个简单的问题，但这是我第一次将 psd 切片为 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:02:30.150

向 Header div 元素添加填充，例如`padding-top:135px`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:06:33.437

你应该像这样将你的标志和你的导航分开

```
<header>
   <div id="logo"></div>
  <ul id="top-nav">
     <li><a href="">Home</a></li>
     <li><a href="">Home</a></li>
     <li><a href="">Home</a></li>
     <li><a href="">Home</a></li>
     <li><a href="">Home</a></li>
     <li><a href="">Home</a></li>
   </ul>  
</header> 
```

并提供您的徽标`width:100%`和背景图像。

# c# - 获取内部服务器错误

> ID：14724151
> 
> 赞同：-1
> 
> 时间：2013-02-06T07:58:49.843
> 
> 标签：c#, .net, httpwebrequest, httpwebresponse

这是我的代码，我在其中使用 HttpWebRequest 请求 URL 并从 HttpWebResponse 获取响应。但是 httpwebresponse 对象会抛出一个异常，即 Internal Server Error！

```
url="http://www.google.com/"

Uri urlCheck = new Uri(url);
request = (HttpWebRequest)WebRequest.Create(url); 
request.Timeout = 5000000;
response = (HttpWebResponse)request.GetResponse();    //Here Getting The Exception..
receiveStream = response.GetResponseStream();
Encoding encode = System.Text.Encoding.GetEncoding("utf-8");
strmRead = new StreamReader(receiveStream, encode);
result = strmRead.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:06:55.253

如果客户端不支持 cookie，则该站点似乎正在崩溃。因此，您可以通过设置 CookieContainer 在客户端启用对 cookie 的支持：

```
using System;
using System.IO;
using System.Net;

class Program
{
    static void Main()
    {
        var url = "http://links.casemakerlegal.com/states/MS/books/Case_Law/results?search[Cite]=77%20So.3d%201094";
        var request = (HttpWebRequest)WebRequest.Create(url);
        request.CookieContainer = new CookieContainer();
        using (var response = request.GetResponse())
        using (var stream = response.GetResponseStream())
        using (var reader = new StreamReader(stream))
        {
            string result = reader.ReadToEnd();
            Console.WriteLine(result);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:05:49.763

“内部服务器错误”正是指您正在调用的服务器上的内部错误。

这可能是服务器上的一个临时问题，与您无关，或者可能是服务器不喜欢您传递给它的数据。检查以下内容：

*   是`77%20So.3d%201094`有效的搜索值吗？
*   您是否应该与请求一起发送 API 密钥？
*   您是否应该对自己进行身份验证，例如使用 HTTP 用户名/密码摘要或 X509 证书？

# ios - 如何在 Keychain 中安装 Apple 推送通知服务证书？

> ID：14724154
> 
> 赞同：0
> 
> 时间：2013-02-06T07:58:54.373
> 
> 标签：ios, xcode, macos, keychain

> “无法修改“系统根”钥匙串。要更改根证书是否受信任，请在钥匙串访问中打开它并修改其信任设置。新的根证书应添加到当前用户的登录钥匙串中，或添加到系统中如果要由这台机器的所有用户共享钥匙串。”

当我尝试安装证书时，它显示上述警告。

如何解决这个问题？需要紧急响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:07:57.423

据我记得，您应该将证书安装到`login`钥匙串。

# http - 如何在缓存中真正“不存储”文件

> ID：14724155
> 
> 赞同：3
> 
> 时间：2013-02-06T07:58:57.367
> 
> 标签：http, caching, browser-cache

我想知道是否有办法告诉浏览器不要将特定文件的条目放入缓存中。我知道我可以只发送 no-store、Expires 等标题，但所有这些都会导致条目出现在缓存中，尽管日期已过。

我想知道缓存中什么都没有出现的解决方案 - 我只是不想用数百个过时的条目乱扔浏览器内存。例如，我不想缓存 png，所以我使用 no-store no-cache，在“about:cache”中我看到了很多关于这个文件的信息，以及到期日期 1970-01-01 01:00 :00。我不想在那里看到任何带有 png 扩展名的东西，因为我在每个会话中创建了数百个，而且它们只需要一次，所以我不想用这个垃圾填充缓存。

我认为“无商店”真的不应该储存，而是储存，但有过去的日期！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T22:55:05.810

不，没有办法阻止浏览器将文件存储在缓存中。no-cache 指示浏览器不要使用文件的旧版本，但不会阻止它存储文件。

# jquery - jquery.validate focusCleanup 仅对某些元素

> ID：14724157
> 
> 赞同：0
> 
> 时间：2013-02-06T07:59:00.487
> 
> 标签：jquery, validation, jquery-validate, focus

我只需要在表单的一个或两个元素上而不是每个元素上使用 focusCleanup。有没有办法将 jquery.validate 中的[focusCleanup](http://jqueryvalidation.org/)应用到几个输入字段而不是全部？例如，我想在焦点上清理 input1 和 input2 而不是 input3。我尝试将 focusCleanup 添加到规则中，但这不起作用。有任何想法吗？

```
$("#myForm").validate({
    onkeyup: false,
    focusCleanup: true,
    rules: {
        input1: {
            required: true,
        },
        input2: {
            required: true,
        },
        input3: {
            required: true,
        },
    },
    messages: {
        input1: {
            required: Messages.ERR_USERNAME_GUIDE,
        },
        input2: {
            required: Messages.ERR_PASSWORD_GUIDE,
        },
        input3: {
            required: Messages.ERR_PASSWORD_GUIDE,
        },
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:09:16.377

[在jquery validate](http://docs.jquery.com/Plugins/Validation/validate#toptions)的文档选项中没有推荐的方法来执行此操作，但是您可以通过传入您自己的 onfocusin 函数作为选项来实现此目的。

在下面的示例中，我给不需要清理的元素一个类“nocleanup”。然后我复制了[默认的 onfocusin 方法](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js#L220)，插入了一个 if 语句来检查这个类的存在。

html表单摘录

```
<input name="fname" id="fname" class="required">
<input name="sname" id="sname" class="required nocleanup">
<input name="other" id="other" class="required"> 
```

带验证码

```
$("form").validate({
    focusInvalid: false,
    focusCleanup: true,
    onfocusin: function (element, event) {
        this.lastActive = element;

        if (!$(element).hasClass("nocleanup")) {
            if (this.settings.focusCleanup && !this.blockFocusCleanup) {
                if (this.settings.unhighlight) {
                    this.settings.unhighlight.call(this, element, this.settings.errorClass, this.settings.validClass);
                }
                this.addWrapper(this.errorsFor(element)).hide();
            }
        }
    },
    submitHandler: function () {
        alert('form ok');
    }
}); 
```

注意。focusin 是[默认 focusin 方法](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js#L220)的直接副本，只是添加了一个 if 语句。

试试[这里的小提琴](http://jsfiddle.net/xaw5x/)

# ruby-on-rails - 您如何在 STI 中使用默认范围？

> ID：14724163
> 
> 赞同：0
> 
> 时间：2013-02-06T07:59:31.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 STI 情况下，我无法解决 default_scope 问题。有什么方法可以防止子类中存在 default_scope 或覆盖查询条件？

```
class Parent < ActiveRecord::Base
  default_scope where(:type => ["Child", "OtherChild"])
  scope :flag, where(:flag => true)
end

class Child < Parent
end

class OtherChild < Parent
end 
```

Parent.all => 产生正确的结果，返回所有 Child 和 OtherChild 项。它不会返回具有“RemovedChild”类型的对象，该类型在系统中不再具有模型。

Child.all => 产生正确的结果，所有 Child 结果。

Child.flag.all => Broken，而不是所有具有 flag = true 的 Child，它返回与 Parent.flag.all 相同的结果，添加来自 Parent 类的 default_scope，它替换了 Child 类添加的 type = Child。

我必须假设 Parent 表将包含类型与当前可用类不对应的项目，这是我的默认范围试图解决的问题。如果有一种方法可以全局捕获并忽略 ActiveRecord::SubclassNotFound 的任何实例也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:55:35.943

要延迟范围解析和解决方法，您可以切换到定义类方法而不是范围。

```
class Parent < ActiveRecord::Base
  default_scope where(:type => ["Child", "OtherChild"])
  def self.flag
    where(:flag => true)
  end
end 
```

# actionscript-3 - 碰撞检测测试不起作用并且还收到错误 2025

> ID：14724168
> 
> 赞同：0
> 
> 时间：2013-02-06T07:59:37.747
> 
> 标签：actionscript-3, flash

这是我的播放器类

```
package 
{
import flash.display.MovieClip;
import flash.events.*;
import flash.display.Stage;

public class Player extends MovieClip
{
    //private var stageRef:Stage;
    //var xx:Number;
    //var yy:Number;
    private var BG:MovieClip;
    var speed:Number = 7;

    public function Player(xx:Number,yy:Number,BG:MovieClip) : void
    {
        x = xx;
        y = yy;

        this.BG = BG;

        addEventListener(Event.ENTER_FRAME, loop, false, 0, true);
    }
    private function loop(e:Event) : void
    {

        var yDistance:Number = BG.mouseY - y;
        var xDistance:Number = BG.mouseX - x;
        var radian:Number = Math.atan2(yDistance, xDistance);
        rotation = radian * 180 / Math.PI;
    }

}

} 
```

子弹类

```
 package 
   {
    import flash.display.*;
    import flash.events.*;
    import flash.utils.getTimer;

    public class Bullet extends MovieClip
    {
        private var dx,dy:Number;
        private var lastTime:int;

        public function Bullet(mX,mY:Number, rotate:Number, speed:Number)
        {
            // set start position
            var GunLength:Number = 70;
            this.x = 600 + GunLength*Math.cos(2*Math.PI*rotate/360);
            this.y = 450 + GunLength*Math.sin(2*Math.PI*rotate/360);
            this.rotation = rotate;

            // get speed
            dx = speed*Math.cos(2*Math.PI*rotate/360);
            dy = speed*Math.sin(2*Math.PI*rotate/360);

            // set up animation
            lastTime = getTimer();
            addEventListener(Event.ENTER_FRAME,moveBullet);

        }
        public function moveBullet(event:Event)
        {
            // get time passed
            var timePassed:int = getTimer() - lastTime;
            lastTime +=  timePassed;

            // move bullet
            this.x +=  dx * timePassed / 1000;
            this.y +=  dy * timePassed / 1000;
        }

    }

    } 
```

敌人等级

```
package 
{
import flash.display.MovieClip;
import flash.events.*;
import flash.display.Stage;

public class Enemy1 extends MovieClip
{
    private var BG:MovieClip;
    private var speed:Number = 0.5;

    public function Enemy1(BG:MovieClip) : void
    {
        var RandomX:Array = new Array(100,200,300,400,800,900,1000,1100);
        var RandomY:Array = new Array(100,200,300,600,700,800);
        var r:int = (Math.random() * 8);
        var s:int = (Math.random() * 6);

        x = RandomX[r];
        y = RandomY[s];

        this.BG = BG;

        addEventListener(Event.ENTER_FRAME, moveEnemy); //false, 0, true);.
    }
    private function moveEnemy(e:Event):void
    {
        if (this.x > 660)
        {
            this.x -=  speed;
            this.rotation = 180;
        }

        if (this.x < 540)
        {
            this.x +=  speed;
            this.rotation = 0;
        }

        if (this.y > 510)
        {
            this.y -=  speed;
            this.rotation = 270;
        }

        if (this.y < 390)
        {
            this.y +=  speed;
            this.rotation = 90;
        }

        if (this.x > 660 && this.y > 510)
        {
            this.x -=  speed;
            this.y -=  speed;
            this.rotation = 225;
        }

        if (this.x < 540 && this.y < 390)
        {
            this.x +=  speed;
            this.y +=  speed;
            this.rotation = 45;
        }

        if (this.x < 540 && this.y > 510)
        {
            this.x +=  speed;
            this.y -=  speed;
            this.rotation = 315;
        }

        if (this.x > 660 && this.y < 390)
        {
            this.x -=  speed;
            this.y +=  speed;
            this.rotation = 135;
        }
    }

}

} 
```

主班

```
package 
{
import flash.display.*;
import flash.events.*;
import flash.utils.Timer;
import flash.text.TextField;
import flash.ui.Mouse;

public class Main extends MovieClip
{
    // Player Var
    private var player:MovieClip;
    private var bunker_mc:MovieClip;
    // Bullet var & Array
    private var b:MovieClip;
    private var bullets:Array;
    private var gunFire:Boolean = false;
    // Enemies, deadAnimation var & Array
    private var enemy1:MovieClip;
    private var tempEnemy1:MovieClip;
    private var dead1:MovieClip;
    private var enemies1:Array;
    private var deadArray1:Array;
    private var dustArray:Array;
    // Effect  var
    private var dust:MovieClip;
    // Score & other Helper var
    private var Level:int = 1;
    private var Score:int = 0;

    public function startMain()
    {
        // Timers Initialisation
        var GameLevelTimer:Timer = new Timer(1000,15);     
        var EnemyTimer:Timer = new Timer(1000,10);      
        //
        var bg_mcX = bg_mc.width/2;
        var bg_mcY = bg_mc.height/2;
        // Variable initialisation          
        bunker_mc = new bunker();
        bunker_mc.x = stage.stageWidth/2;
        bunker_mc.y = stage.stageHeight/2;
        addChild(bunker_mc);
        Lvl_txt.text = String(Level);
        Scr_txt.text = String(Score);
        if(Level == 1)
        {
            player = new Player(bg_mcX,bg_mcY,bg_mc);
            bg_mc.addChild(player);
        }

        // Objects arrays
        bullets = new Array();
        enemies1 = new Array();
        deadArray1 = new Array();
        dustArray = new Array();

        // Event Listeners
        stage.addEventListener(MouseEvent.MOUSE_DOWN,mouseDownFun);
        stage.addEventListener(Event.ENTER_FRAME,updateBullet);
        stage.addEventListener(KeyboardEvent.KEY_DOWN,moveBG);
        // Timer Events Start
        EnemyTimer.addEventListener(TimerEvent.TIMER,EnemyTimerStart);
        EnemyTimer.start();
            GameLevelTimer.addEventListener(TimerEvent.TIMER_COMPLETE,GameLevelTimerEnd);
        GameLevelTimer.start();
    }

    //Mouse Down Event Handler
    private function mouseDownFun(event:MouseEvent):void
    {
        fire();
    }
    private function moveBG(e:KeyboardEvent):void
    {

    }
    private function EnemyTimerStart(e:TimerEvent):void
    {
        if(Level == 1)
        {
            enemy1 = new Enemy1(bg_mc);
            enemies1.push(enemy1);
            bg_mc.addChild(enemy1);
        }
    }
    private function updateBullet(e:Event):void
    {
        var i:int;
        var tempBullet:MovieClip;

        // loop for _bullets array
        for (i = 0; i < bullets.length; i++)
        {
            // save a reference to current bullet
            tempBullet = bullets[i];

            // check for collision with Enemies.
            if (checkCollision(tempBullet.x,tempBullet.y))
            {
                destroyBullet(tempBullet);
            }
        }
    }

    private function fire()
    {
        player.play();
        if(Level == 1)
        {
            b = new Bullet(mouseX,mouseY,player.rotation,500);
            bullets.push(b);
            bg_mc.addChild(b);
        }
    }

    private function checkCollision(testX:Number,testY:Number):Boolean
    {
        for (var i = 0; i < enemies1.length; i++)
        {
            tempEnemy1 = enemies1[i];
            if(tempEnemy1.hitTestPoint(testX,testY,true))
            {
                enemies1.splice(i, 1);
                //tempEnemy1.parent.removeChild(tempEnemy1);
                bg_mc.removeChild(tempEnemy1);
                dead1 = new     Dead1(tempEnemy1.x,tempEnemy1.y,tempEnemy1.rotation);
                deadArray1.push(dead1);
                bg_mc.addChild(dead1);
                Score += 10;
                Scr_txt.text = String(Score);
                return true;
            }
        }
            //removeChild(b,enemy1);
        return false;//}
    }
    private function destroyBullet(bullet:MovieClip):void
    {
        var tempBullet:MovieClip;
        for (var i = 0; i<= bullets.length;i++)
        {
            bg_mc.tempBullet = bullets[i];
            if (tempBullet == bullet)
            {
                dust = new dust_mc();
                dust.x = bullet.x;
                dust.y = bullet.y;
                dust.rotation = (Math.random() * 360);
                // remove from array
                bullets.splice(i, 1);
                bullet.parent.removeChild(bullet);
                //bg_mc.removeChild(bullet);
                dustArray.push(dust);
                bg_mc.addChild(dust);
                return;
            }
        }
    }
    private function GameLevelTimerEnd(e:TimerEvent):void
    {
        var tempDead:MovieClip;
        var tempDust:MovieClip;
        removeChild(player);
        removeChild(bunker_mc);
        stage.removeEventListener(MouseEvent.MOUSE_DOWN,mouseDownFun);
        stage.removeEventListener(Event.ENTER_FRAME,updateBullet);
        for (var i = 0; i < deadArray1.length; i++)
        {
            tempDead = deadArray1[i];
            removeChild(tempDead);
        }
        for (var j = 0; j < dustArray.length; j++)
        {
            tempDust = dustArray[j];
            removeChild(tempDust);
        }
        Level += 1;
        gotoAndStop("end");
    }
    //Mouse Up Event Handler
    /*private function mouseUpFun(event:MouseEvent):void
    {

    }*/

}

} 
```

我面临的问题是我的命中测试属性不起作用，还有错误 2025

```
 "ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
at flash.display::DisplayObjectContainer/removeChild()
at Main/GameLevelTimerEnd()
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at flash.utils::Timer/tick()" 
```

我是否缺少任何代码，以便该属性可以工作..？

请帮我解决这个问题.. 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:22:16.550

关于 2025 错误：

这是因为 Player、Dead1 和dust_mc 实例都是 bg_mc 的子级。

所以要删除它们：

```
bg_mc.removeChild( player );
bg_mc.removeChild( tempDead );
bg_mc.removeChild( tempDust ); 
```

hitTestPoint 不起作用，因为它是“x 和 y 参数指定舞台坐标空间中的一个点，而不是包含显示对象的显示对象容器”（ as3 文档），在本例中为 bg_mc。

对此的一种补救方法是将子弹本身作为 checkCollision() 的参数，这样我们就可以获得它的舞台坐标（这里命名为“test”）：

```
private function checkCollision( mc:MovieClip ):Boolean
{
    // be sure to import flash.geom.Point;
    var test:Point = mc.localToGlobal( new Point() ); 

    for ( var i = 0; i < enemies1.length; i++ )
    {
        tempEnemy1 = enemies1[ i ];
        if ( tempEnemy1.hitTestPoint( test.x, test.y, true ) )
        {
            enemies1.splice( i, 1 );
            // tempEnemy1.parent.removeChild( tempEnemy1 );
            bg_mc.removeChild( tempEnemy1 );
            dead1 = new Dead1( tempEnemy1.x, tempEnemy1.y, tempEnemy1.rotation );
            deadArray1.push( dead1 );
            bg_mc.addChild( dead1 );
            Score += 10;
            Scr_txt.text = String( Score );
            return true;
        }
    }
        // removeChild( b,enemy1 );
    return false; // }
} 
```

在我的游戏中，虽然我总是使用 hitTestObject()，但不那么令人困惑：

```
private function checkCollision( mc:MovieClip ):Boolean
{
    for ( var i = 0; i < enemies1.length; i++ )
    {
        tempEnemy1 = enemies1[ i ];
        if ( tempEnemy1.hitTestObject( mc ) )
        {
            enemies1.splice( i, 1 );
            // tempEnemy1.parent.removeChild( tempEnemy1 );
            bg_mc.removeChild( tempEnemy1 );
            dead1 = new Dead1( tempEnemy1.x, tempEnemy1.y, tempEnemy1.rotation );
            deadArray1.push( dead1 );
            bg_mc.addChild( dead1 );
            Score += 10;
            Scr_txt.text = String( Score );
            return true;
        }
    }
        // removeChild( b,enemy1 );
    return false; // }
} 
```

我希望这行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:56:49.117

这是MovieClips内部MovieClips之间碰撞检测的图示

[http://www.swfcabin.com/open/1360154866](http://www.swfcabin.com/open/1360154866)

这是代码：

```
package com.hittestpoint
{
import flash.display.*;
import flash.events.*;
import flash.geom.*;
import flash.text.*;

public class Application extends Sprite {

    private var bg:MovieClip;
    private var bullets:Array = [];
    private var enemies:Array = [];
    private var tf:TextField = new TextField();

    public function Application() {
        bg = makeBg();
        for ( var i:int = 0; i < 3; i++ )
            enemies.push( makeActor( 1 ) );
        addEventListener( MouseEvent.CLICK, fire );
        tf.text = "Click stage to throw in bullets."
        tf.width = 300;
        addChild( tf );
    }

    private function
    checkCollision():void {
        for ( var i:int = 0; i < bullets.length; i++ ) {
            var enemyHitIndex:int = getEnemyHitIndex( bullets[ i ].mc );
            if ( enemyHitIndex > - 1 ) {
                bg.removeChild( bullets.splice( i--, 1 )[ 0 ].mc );
                bg.removeChild( enemies.splice( enemyHitIndex, 1 )[ 0 ].mc );
            }
        }
    }

    private function
    fire( e:MouseEvent ):void {
        for ( var i:int = 0; i < 1; i++ )
            bullets.push( makeActor( 0 ) );
    }

    private function
    getActorObj( mc:MovieClip, type:int ):Object {
        var a:Array = type == 0 ? bullets : enemies;
            for ( var i:int = 0; i < a.length; i++ )
                if ( mc == a[ i ].mc )
                    return a[ i ];

        return null;
    }

    // Using hitTestPoint
    private function
    getEnemyHitIndex( mc:MovieClip ):int {
        var test:Point = mc.localToGlobal( new Point() );
        // or // var test:Point = localToGlobal( new Point( mc.x, mc.y ) );

        for ( var i:int = 0; i < enemies.length; i++ )
            if ( enemies[ i ].mc.hitTestPoint( test.x, test.y, true ) )
               return i;

        return -1;
    }

    // Using hitTestObject
    private function
    getEnemyHitIndex2( mc:MovieClip ):int {
        for ( var i:int = 0; i < enemies.length; i++ )
            if ( enemies[ i ].mc.hitTestObject( mc ) )
                return i;

        return - 1;
    }

    private function
    killActor( e:Event ):void {
        var mc:MovieClip = e.currentTarget as MovieClip;
        mc.removeEventListener( Event.ENTER_FRAME, moveActor );
        mc.removeEventListener( Event.REMOVED_FROM_STAGE, killActor );
    }

    private function
    makeActor( type:int ):Object {
        var actor:Object = {};
        var mc:MovieClip = new MovieClip();

        with( mc.graphics ) {
            beginFill( type == 0 ? 0x0000ff : 0xff0000 );
            lineStyle( 0, 0, 0 );
            drawCircle( 0, 0, type == 0 ? 4 : 16 );
            endFill();
        }
        mc.x = bg.width / 2;
        mc.y = bg.height / 2;
        bg.addChild( mc );

        actor.mc = mc;
        actor.vx = Math.random() * 8;
        actor.vy = Math.random() * 8;

        mc.addEventListener( Event.ENTER_FRAME, moveActor );
        mc.addEventListener( Event.REMOVED_FROM_STAGE, killActor );

        return actor;
    }

    private function
    makeBg():MovieClip {
        var mc:MovieClip = new MovieClip();

        with( mc.graphics ) {
            beginFill( 0x00ffff );
            lineStyle( 0, 0, 0 );
            drawRect( 0, 0, stage.stageWidth, stage.stageHeight );
            endFill();
        }
        addChild( mc );

        return mc;
    }

    private function
    moveActor( e:Event ):void {
        var mc:MovieClip = e.currentTarget as MovieClip;
        var actor:Object = getActorObj( mc, mc.width == 8 ? 0 : 1 );
        var wHalf:Number = mc.width / 2;
        var hHalf:Number = mc.height / 2;

        mc.x += actor.vx;
        mc.y += actor.vy;

        if ( mc.x > bg.width * .999 - wHalf ) {
            mc.x = bg.width * .999 - wHalf;
            actor.vx = - actor.vx;
        }
        else if ( mc.x < wHalf ) {
            mc.x = wHalf;
            actor.vx = - actor.vx;
        }

        if ( mc.y > bg.height * .999 - hHalf ) {
            mc.y = bg.height * .999 - hHalf;
            actor.vy = - actor.vy;
        }
        else if ( mc.y < hHalf ) {
            mc.y = hHalf;
            actor.vy = - actor.vy;
        }

        checkCollision();
    }
}
} 
```

# facebook-graph-api - 2 月重大更改 - 我的操作链接停止工作

> ID：14724178
> 
> 赞同：0
> 
> 时间：2013-02-06T08:00:32.227
> 
> 标签：facebook-graph-api, custom-action, actionlink

我的应用程序允许两种操作：询问和提供建议。这两项行动我都得到了批准。显然，这两种行为都是非内容消费（基于 Facebook 指南中的定义）。“询问行动”的提要有一个“给予行动”的行动链接。在我启用 2 月重大更改后，操作链接停止工作。我怎样才能再次启用它？

# c++ - Qt 停止应用程序一段时间

> ID：14724184
> 
> 赞同：0
> 
> 时间：2013-02-06T08:01:14.233
> 
> 标签：c++, qt, qt4

我正在开发一个 Qt 应用程序。在我的程序中的某个时刻，我必须暂停应用程序，然后启动一个函数。

```
QTimer::singleShot(10000, this, SLOT(testFuntion()));
qDebug() << "after Singleshot"; 
```

这就是我的问题。计时器启动，我可以看到 my 的输出`testFuntion()`，但它不会暂停应用程序。我可以在 SingleShot 后立即看到`qDebug`输出，在 10 秒后可以看到我的`testFuntion()`.

你能帮我解决这个问题吗？或者是否有任何其他命令可以让我暂停我的应用程序一段时间然后运行一个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:11:35.170

它正在以应有的方式工作。这一行：

```
QTimer::singleShot(10000, this, SLOT(testFuntion())); 
```

当计时器滴答作响时将启动该功能。但是，计时器独立于应用程序的其余部分运行，因此在此行执行后，主应用程序将继续执行此`qDebug()`行。

如果你真的想暂停应用程序（我真的不建议这样做，因为应用程序变得无响应），你可以使用`sleep()`和`usleep()`函数。

更好的方法是为用户显示某种通知（可能是进度条）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:57:01.087

您可以使用[QEventLoop](http://qt-project.org/doc/qt-4.8/qeventloop.html)。它的优势`sleep`在于它不会使您的应用程序无响应。它基本上创建了一个嵌套事件循环。

```
QEventLoop loop;
QTimer::singleShot(10000, &loop, SLOT(quit()));
loop.exec();
qDebug() << "after Singleshot"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T07:56:22.657

我找到了一个非常简单的解决方案。

首先，如果你使用你的计时器这样

```
QTimer *test = new QTimer();
test->isSingleshot(true);
connect(test, SIGNAL(timeout()), this, SLOT(testFunction()));
test->start(10000)

test->isActive 
```

正在工作中。

但是只有当这个检查为真时，我才需要在我的应用程序中启动另一个计时器。

把事情弄清楚一点。我检查某个值是否在文本文件中。如果它不存在，我将在 5 分钟内再试一次。如果是他们，我会启动一个计时器来计算大量时间。但是这个计时器只有在他从文件中取出值时才有效。所以如果我得到这个值，我会启动 1 秒计时器。在我在我的 MainWindows 构造器中启动这个计时器之前。如果这个计时器没有运行，一切都会像它应该的那样工作。

用户收到一条带有描述的消息，然后启动我的 MainWindow 并没有挂起。

感谢您的帮助问候克里斯

# iphone - 在 touchesMoved 中，如何检测滑动然后停止？

> ID：14724188
> 
> 赞同：1
> 
> 时间：2013-02-06T08:01:32.590
> 
> 标签：iphone, ios, objective-c, touch, touchesmoved

我已经可以在 touchesMoved 中检测到滑动动作，但我想知道如何检测滑动，然后检测滑动停止但手指仍按在屏幕上的时间？

到目前为止，这是我的代码：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

if(self.tutorialView.alpha != 1.0 || self.tutorialView.hidden)
{

UITouch *touch = [touches anyObject];
CGPoint gestureEndPoint = [touch locationInView:self.view];

int dx = abs(gestureStartPoint.x - gestureEndPoint.x);
int dy = -1 * (gestureEndPoint.y - gestureStartPoint.y);

if(dx > 20) {
    // too much left/right, so don't do anything
    return;
}

if((gestureStartPoint.x - gestureEndPoint.x) < 20 && (gestureStartPoint.x - gestureEndPoint.x) > -20)
{

    if((gestureStartPoint.y - gestureEndPoint.y) > (gestureStartPoint.x - gestureEndPoint.x))
    {

        if(dy > 0)
        {

            // User has made an upwards slide motion

        }

        else
        {

            // User has made a downwards slide motion

    else
        self.number = 0;

    }

    }

}

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T13:14:18.753

您可以使用计时器，在 中`touchesMoved`，使旧计时器无效并创建一个新计时器，这将触发“检测到停止运动”选择器。

像这样的东西

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
     //NSTimer *_timer; // as an iver
    if (/* check move distance, if big enough */) {
        [_timer invalidate];
        _timer = [NSTimer scheduledTimerWithTimeInterval:0.2 target:self selector:@selector(slideStopped) userInfo:nil repeats:NO];
    }
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
     [_timer invalidate]; // you may handle touch up differently and don't want slideStopped get called
     _timer = nil;
}

- (void)slideStopped {
    // handle slide stopped event
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:14:15.963

当运动停止时，将调用以下方法。所以你可以在这里跟踪它。

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event

# sql-server-2008 - 将 CSV 导入到 SQL server 2008 或 Excel 与分隔符逗号和数据也包含逗号

> ID：14724192
> 
> 赞同：1
> 
> 时间：2013-02-06T08:01:39.240
> 
> 标签：sql-server-2008, csv

我必须将 csv 文件导入 excel 或直接导入 SQL Server 数据库。

这是数据格式

1.  列用逗号 (,) 分隔。
2.  字符串包含在 ~ 和 ~ 之间，其中可能包含逗号 (,)
3.  当我尝试使用分隔符 Comma(,) 导入 excel 时，它会创建额外的列，其中 ModelName 包含逗号。

这是 CSV 文件的几行，检查最后一项“~Express，Commercial Cutaway~”，其中包含逗号。

~ChromeStyleID~,~Country~,~Year~,~DivisionName~,~SubdivisionName~,~ModelName~ 349645,~US~,2013,~GMC~,~GMC Pickups~,~Sierra 2500HD~

349646,~US~,2013,~GMC~,~GMC Pickups~,~Sierra 2500HD~

349649,~US~,2013,~雪佛兰~,~Chevy Specialty Vehicles~,~Express, Commercial Cutaway~

那么如何将它导入到sql或excel中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:37:06.407

导入 SQL Server 可以像这样进行。

在导入/导出屏幕上，确保将“~”指定为文本限定符。选中“第一个数据行中的列名”框。

不幸的是，您的列名仍将包含波浪号，但您可以手动编辑。

至于 Excel，最好将文本限定符替换为双引号或更标准的东西，如单引号。事实上Excel只允许你这两个选项，也许有办法改变它，但我不知道怎么做。

![在此处输入图像描述](../Images/9524284e835a4fe5e5ce37bbe662f2ba.png) ![在此处输入图像描述](../Images/1a37ea65cb9245d9a361cb87494ead32.png) ![在此处输入图像描述](../Images/d57ede69547e14054ab044a70ebf9c45.png) ![在此处输入图像描述](../Images/fde86243e8972fb34e1665f770d49eff.png) ![在此处输入图像描述](../Images/e3f6ba304f5aad91b73698e93ce0185c.png) ![在此处输入图像描述](../Images/fce13e6b5a24358a0d0fff623ee74211.png)

# libreoffice - LibreOffice Calc：访问宏中用户选择的范围

> ID：14724193
> 
> 赞同：1
> 
> 时间：2013-02-06T08:01:45.100
> 
> 标签：libreoffice, libreoffice-basic

我希望将 MS Excel 电子表格转换为 LibreOffice Calc 电子表格。

Excel 文件包含一个 VBA 宏，它遍历用户选择的一系列单元格，Visual Basic 代码如下所示：

```
For Each Value In Selection
    ' Manipulate Value
Next Value 
```

其中`Selection`包含用户手动选择的工作表中的单元格。

所以，我的问题是：如何在 Libre Basic 中重现这一点，访问用户选择的单元格范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:51:12.440

如果要使用单元格的值

```
Sub Learn
    Dim myController as Object, myRange as Object
    Dim Tmp as Integer
    Dim i, j

    myController = ThisComponent.getCurrentController()
    myRange = myController.getSelection().getDataArray()

    'additional info that we can use
    print myRange.AbsoluteName
    print myRange.RangeAddress.StartColumn
    print myRange.RangeAddress.StartRow

    Tmp = 0
    For Each i in myRange
        For Each j in i
            Tmp = Tmp + j
        Next j
    Next i
    print Tmp
End Sub 
```

如果要操作单元格的值，请使用二维数组

```
Sub Learn2
    Dim myController as Object, myRange as Object
    Dim newRange(0, 0)
    Dim Tmp as Integer
    Dim i, j, col, row

    myController = ThisComponent.getCurrentController()
    myRange = myController.getSelection().getDataArray()
    Redim newRange(UBound(myRange, 1), UBound(myRange(0), 1))
    row = 0
    col = 0
    For row = 0 to UBound(myRange, 1)
        For col = 0 to UBound(myRange(0), 1)
            newRange(row, col) = myRange(row)(col) * 2
        Next col
    Next row
    myController.getSelection().setDataArray(newRange)
End Sub 
```

# c# - jquery 和 RESTful wcf 服务

> ID：14724198
> 
> 赞同：0
> 
> 时间：2013-02-06T08:02:10.593
> 
> 标签：c#, jquery, wcf

我在 vs2012 中创建了一个 RESTful wcf 服务。我可以访问这个 sservice frfom 网络浏览器。我的接口文件是这样的：

```
namespace RestService
{
    [ServiceContract]
    public interface IRestServiceImpl
    {
        [OperationContract]
        [WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Xml,
            BodyStyle=WebMessageBodyStyle.Wrapped,
            UriTemplate = "xml/{id}"
            )]
        string XMLData(string id);

        [OperationContract]
        [WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Wrapped,
            UriTemplate = "json/{id}"
            )]
        string JSONData(string id);

    }
} 
```

我的配置文件是：

```
 <system.serviceModel>
    <services>
      <service name="RestService.RestServiceImpl" behaviorConfiguration="ServiceBehavior">
        <endpoint address="" binding="webHttpBinding" contract="RestService.IRestServiceImpl" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <protocolMapping>
        <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

当我用 ctr+F5 运行我的服务时，它给了我那个 url`localhost:50046/RestServiceImpl.svc`

当我向网络浏览器写入该代码时，我可以访问我的服务并得到响应：

代码是`//localhost:50046/RestServiceImpl.svc/json/123` 响应是`{"JSONDataResult":"you requested product 123"}`

现在我的问题是，我将从我的 html 代码访问该服务。我将向服务发送数据并获得该服务的响应。我的简单 jquery 代码是：

```
$("input:#giris").click(function(){
    function GetCategoriesJson() {

        $.ajax(
        {
            type:"GET",
            url:"localhost:50046/RestServiceImpl.svc",
            data:"{123}",
            contentType: "application/json; charset=utf-8", 
            dataType: "json/{123}", 
            success: OnSuccessJson, 
            error: OnErrorJson
        });
        function OnSuccessJson(data, status) {
            alert("basarili")
        }
        function OnErrorJson(data, status) {
            alert("Exception");
        }
        }   
    }); 
```

我必须做什么，我必须写什么类型，url，数据，内容类型，数据类型等。请帮助我已经工作了几天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:43:08.080

我不确定，但你可以试试这个： -

在 ajax 调用中将 url 更改为此

`url:"localhost:50046/RestServiceImpl.svc/json/123"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:58:50.377

从客户端调用它时会出现什么错误？

因为它是 WCF，我猜它是一个配置问题，在你的 .config 文件中试试这个。

```
<standardEndpoint name="" helpEnabled="true" 
    automaticFormatSelectionEnabled="false" 
    defaultOutgoingResponseFormat ="Json" /> 
```

这是一个很好的例子： http: [//www.codeproject.com/Articles/128478/Consuming-WCF-REST-Services-Using-jQuery-AJAX-Call](http://www.codeproject.com/Articles/128478/Consuming-WCF-REST-Services-Using-jQuery-AJAX-Call)

# symfony - 将论坛软件集成添加到 Symfony2

> ID：14724208
> 
> 赞同：0
> 
> 时间：2013-02-06T08:03:18.570
> 
> 标签：symfony, forum, mybb

有谁知道是否有办法将诸如 mybb 之类的论坛集成到 symfony 中？

我希望有一个存储用户信息的中心位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:58:09.253

**FriendsOfSymfony / FOSCommentBundle** [https://github.com/FriendsOfSymfony/FOSCommentBundle](https://github.com/FriendsOfSymfony/FOSCommentBundle)

或者

**FriendsOfSymfony / FOSMessageBundle** [https://github.com/FriendsOfSymfony/FOSMessageBundle](https://github.com/FriendsOfSymfony/FOSMessageBundle)

您需要编写自己的模板，但功能很棒

# ruby-on-rails - 自定义模块中的 Rails 异常处理

> ID：14724210
> 
> 赞同：1
> 
> 时间：2013-02-06T08:03:37.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我在 lib/assets 文件中有一个模块，如下所示：

```
require 'net/http'
require 'cgi'
require 'json'

 module FetchRec
  rate.sample(5).each do |result|
    begin
      url = URI.parse("http://www.url.com/dprc=Y&item_id=#{result["item"]}")
     rescue
        next 
      end
     r = JSON.parse(Net::HTTP.get_response(url).body)
  end 
```

当我启动我的服务器时，我得到一个异常：语法错误——“下一个无效”

如何处理此模块中的异常，以便如果 url 无效，json 解析脚本将跳到下一个 url 并解析它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:06:02.657

尝试删除开始救援块并替换为

```
url = URI.parse("http://www.url.com/dprc=Y&item_id=#{result["item"]}") rescue nil
next if url.nil? 
```

# python - 如何从 Python 中的 xml 文件生成 DTD？

> ID：14724215
> 
> 赞同：0
> 
> 时间：2013-02-06T08:03:59.187
> 
> 标签：python, xml, dtd

我需要从 xml 文件生成 DTD 文件。我尝试使用一些软件，如 Oxygen，但文件看起来太大而无法执行。有没有办法用 Python 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T02:00:30.413

这不是涉及 Python 的答案，但您提到使用 oXygen，因此基于 java 的命令行选项应该可以工作。

试试`DTDGenerator`Saxon 开发的： http: [//saxon.sourceforge.net/dtdgen.html](http://saxon.sourceforge.net/dtdgen.html)

我在 385MB 的 XMark“standard.xml”文件的修改版本上对其进行了测试，创建 DTD 大约需要 5 秒。( [http://www.xml-benchmark.org/downloads.html](http://www.xml-benchmark.org/downloads.html) )

# iphone - IOS中哪些设备支持远程控制事件

> ID：14724221
> 
> 赞同：0
> 
> 时间：2013-02-06T08:04:47.377
> 
> 标签：iphone, ios5, xcode4

我正在尝试从蓝牙设备（Apple 无线键盘等）执行功能。我在按键时实现了 UIControlEvent，但没有收到任何事件。是否可以通过单击蓝牙设备上的任何按钮来接收事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:55:21.533

使用蓝牙 LE 应该是可能的。您必须实现 CBPeripheralDelegate 协议的 *- (void)peripheral:(CBPeripheral *)peripheral didDiscoverServices:(NSError *)error*。在您的设备添加外围设备并且方法 discoverService: 被发送后，此消息将发送到委托对象

# asp.net-web-api - asp.net web api 路由设计（多路由）

> ID：14724227
> 
> 赞同：3
> 
> 时间：2013-02-06T08:04:56.693
> 
> 标签：asp.net-web-api, asp.net-routing, asp.net-web-api-routing

我目前正在使用 ASP.NET Web API 设计一个 REST api。

我想提供这样的方法（http方法无关紧要 - 应该适用于所有人）：

*   /api/客户端
*   /api/client/CID1234（CID1234 = ID）
*   /api/client/CID1234/orders（订单=操作）

问题是： **Id**应该是可选的 - /api/client 可能会返回客户端列​​表 **Action**也应该是可选的 - 在一种情况下，我想获取特定的客户端，而在另一种情况下，我想对该客户端执行*特定*操作. （RPC 风格）

我认为我不能使用约束，因为我使用的“ID”看起来非常不同。

**这种方法不起作用：**

```
config.Routes.MapHttpRoute(
            name: "RpcStyleApi",
            routeTemplate: "rest/{controller}/{action}",
            defaults: new { action = RouteParameter.Optional, id = RouteParameter.Optional }
        ); 
```

**这种方法也不起作用：**

```
config.Routes.MapHttpRoute(
            name: "RpcStyleApi",
            routeTemplate: "rest/{controller}/{action}"
        );

        config.Routes.MapHttpRoute(
            name: "RpcStyleApi2",
            routeTemplate: "rest/{controller}/{id}/{action}",
            defaults: new { action = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "rest/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

例如，这会返回 404，因为它无法区分“action”和“id”。“在与名称“CID1234”匹配的控制器“客户端”上未找到任何操作。

为了获得我需要的灵活性，我应该使用自定义 Actionselector 吗？或者是否有可能使用内置功能的 Web API？我了解有人可能希望将订单用作单独的实体。但我还不如在那里有真正的“行动”（而不是“实体”）。像“丢失密码”，“更改密码”等等。

感谢您的意见

PS：[这里](https://stackoverflow.com/questions/14717040/web-api-routing-issue-with-default-custom-route)描述的事情并不是我愿意做的事情。糟糕的 api 设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-30T20:53:02.137

这实际上是构建 RESTful API 时的最佳实践之一，这里有一个关于构建 API 时要考虑的不同方面的小视频 [https://www.youtube.com/watch?v=ZpqCN8iO9Y8](https://www.youtube.com/watch?v=ZpqCN8iO9Y8)

**解决方案：**您不需要更改映射路线，您所需要的只是使用每个方法顶部的方法属性，如下所示

```
\\ api/clients [this should be clients not client if its returning a list]
[Route("api/clients")]
public IHttpActionResult Get()
{
   return Ok("here you list of clients");
}

/api/client/CID1234 (CID1234 = Id)
[Route("api/clients/{Id}")]
public IHttpActionResult Get(string Id)
{
   return Ok("use the Id to retrieve the client details");
}

/api/client/CID1234/orders (orders = action)
[Route("api/clients/{Id}/orders")]
public IHttpActionResult GetOrders(string Id)
{
   return Ok("use the Id to retrieve the client orders");
} 
```

关于可选的，现在您在获取其值时在方法内部构建自己的逻辑。

这篇文章有更多关于这一点的细节

[https://aspnetwebstack.codeplex.com/wikipage?title=Attribute%20Routing%20in%20MVC%20and%20Web%20API](https://aspnetwebstack.codeplex.com/wikipage?title=Attribute%20Routing%20in%20MVC%20and%20Web%20API)

**PS：**这是使用 .Net framework 4.5.2 using owin

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:39:48.160

如果您按如下方式定义路线：

```
config.Routes.MapHttpRoute(
    name: "RpcStyleApi1",
    routeTemplate: "rest/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional, action = "Get" }
);

config.Routes.MapHttpRoute(
    name: "RpcStyleApi2",
    routeTemplate: "rest/{controller}/{id}/{action}"
); 
```

然后，您可以像这样在控制器上创建方法：

```
public string Get()
{
    return "GET";
}

public string Get(string id)
{
    return "GETID";
}

public string Orders(string id)
{
    return "GETORDERS";
} 
```

这应该可以应对您的 url 组合

*   /休息/客户
*   /rest/client/CID1234
*   /rest/client/CID1234/orders

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T22:08:21.990

不完全确定为什么您的第二种方法不起作用，但以下路由配置对我有用

```
config.Routes.MapHttpRoute(
            name: "WebApiWithActionRouteName"
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        config.Routes.MapHttpRoute(
            name: "WebApiDefaultRouteName",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

# google-apps-script - 从电子表格数据创建文档时，有没有办法保持单元格格式？

> ID：14724229
> 
> 赞同：0
> 
> 时间：2013-02-06T08:05:01.310
> 
> 标签：google-apps-script

我有一个脚本，用于从表单提交（电子表格）创建文档（pdf）。这个脚本运行良好。但是，当一个特定列的值从电子表格传输到文档时，它不会保留数字格式。我厌倦了 .setNumberFormat 但它的使用非常模糊（在我看来），我没有成功。

示例：在下面的脚本中（第 12 行）“var Length_ = row[4];” 其值为 9,651（或任何其他数字），在电子表格中显示为 9,651，但是当它将此值放入我的“新”文档时，它显示为 9651，没有逗号分隔千位。有没有办法保持这种格式，所以它在我的文档中显示为 9,651 而不是 9651？

```
function sendDocument() {
 var sheet = SpreadsheetApp.getActiveSheet();  
 var startRow = sheet.getLastRow();  // First row of data to process  
 var numRows = 1;   // Number of rows to process  // Fetch the range of cells  
 var dataRange = sheet.getRange(startRow, 1,numRows,sheet.getLastColumn())  // Fetch values for  each row in the Range. Needs 4 parameters :start row, start column, number of rows, number of columns 
 var data = dataRange.getValues();  //returns a 2D array with 0 indexed values : data[0] is row nr 1 and data[0][0] is first cell in this first row
for (i in data) {    
 var row = data[i];    
 var ID_ = row[1];  // First column is index 0   
 var facility_name = row[2];       // Second column is index 1  
 var facility_type = row[3]; 
 var Length_ = row[4];
 var Acres_ = row[5]; 
 var Submission_Date = row[6];
 var email_address1 = row[7];
 var email_address2 = row[8];
// Get document template, copy it as a new temp doc, and save the Doc’s id
 var copyId   = DocsList.getFileById("162VlFMAMHad4i2FvuzSL5eAT98-j8SFx6TNXaiBe3DQ")
            .makeCopy("POD BBC Prickly Pear Contraction"+' for '+ID_)
            .getId();
// Open the temporary document
 var copyDoc  = DocumentApp.openById(copyId);
// Get the document’s body section
 var copyBody = copyDoc.getActiveSection();
// Replace place holder keys/tags,  
 copyBody.replaceText('keyID', ID_);
 copyBody.replaceText('keyFacilityName', facility_name);
 copyBody.replaceText('keyFacilityType', facility_type);
 copyBody.replaceText('keyLength', Length_);
 copyBody.replaceText('keyAcres', Acres_);
 copyBody.replaceText('keySubmissionDate', Submission_Date);
// Save and close the temporary document
 copyDoc.saveAndClose();
// Convert temporary document to PDF by using the getAs blob conversion
 var pdf = DocsList.getFileById(copyId).getAs("application/pdf");
  // Attach PDF and send the email
   var subject = "POD BBC Prickly Pear Contraction"+' for '+ID_;
   var body    = "Document for POD BBC Prickly Pear Contraction"+' for '+ID_+" has been created.  Please see attached PDF";
   MailApp.sendEmail(email_address1, subject, body, {htmlBody: body, attachments: pdf});
   MailApp.sendEmail(email_address2, subject, body, {htmlBody: body, attachments: pdf});
// Delete temp file
 DocsList.getFileById(copyId).setTrashed(false);  
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:51:30.140

你必须自己处理格式化，有很多方法可以做到这一点，我通常用字符串操作来做，因为我发现这更容易。

这是一个用这种固定模式格式化数字的小函数`###,###.##`

```
function toFormatedNumbers(val){
  if(val==''){temp='';return temp}
  var temp = val.toString().replace(/[^\d\.-]/g,'').split('.');
  if(temp[0]==''){temp[0]='0'}
  if(temp.length==1){var result = temp[0]+'.00'}
  else{
  var int = temp[0]
  var dec = temp[1]
      if(dec.length==1){var result=int+'.'+dec+'0'}else{var result=int+'.'+dec}
  }
  var out=result;// result is in the form ######.##
  Logger.log(result.length)
  if(result.length>6){out=result.substring(0,result.indexOf('.')-3)+','+result.substring(result.indexOf('.')-3)}
  return out;// out has the comma separator for thousands
} 
```

您可以使用记录器对其进行测试，它会返回`34,567.40`

```
function test(){
Logger.log(toFormatedNumbers(34567.4))
} 
```

# winforms - 什么可能导致我的实体框架模型的设计器文件中出现大量错误？

> ID：14724231
> 
> 赞同：0
> 
> 时间：2013-02-06T08:05:06.260
> 
> 标签：winforms, entity-framework, visual-studio-2008, asp.net-3.5

我在创建/更新 EntityFramework 模型时遇到问题。我有一个已经编译和运行多年的 Visual Studio 2008 Windows 窗体项目。

然后今天，我决定触摸它以添加新功能。经过一些修改后，我决定更新 .edmx 文件，以便它可以与数据库同步，但突然在模型设计器.vb 文件中出现了很多不同的错误。

下面是错误窗口的示例屏幕截图。

![在此处输入图像描述](../Images/ac1740aeafae4bcd365da9dccc8f273f.png)

现在，例如，当我单击上面屏幕截图中的第一个错误时，我会转到下面屏幕截图中的代码。（其中“**属性'SerializableAttribute'不能多次应用**”错误是。）

这只是几个不同的错误之一。

![在此处输入图像描述](../Images/ae18887103077133a1bbb474e8d2bde4.png)

我已经尝试从项目中完全删除模型，然后重新创建它，但我一次又一次地遇到相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:24:16.300

如果您在分部类的帮助下扩展了类的定义并使用`Serializable`属性修饰了它们，则需要从手动创建的分部类中删除此属性。

此外，这个答案可能会有所帮助：[https](https://stackoverflow.com/a/7809482/674700) ://stackoverflow.com/a/7809482/674700 。

# android - Android首先检测没有单击的双击

> ID：14724234
> 
> 赞同：8
> 
> 时间：2013-02-06T08:05:12.767
> 
> 标签：android, events, android-asynctask, double-click

我想检测双击但不先触发单击。我试过双击监听器，但你总是在检测到双精度之前得到一个 onSingleTapUp，我猜这是合理的。但在我的应用程序中，我真的不希望在途中双击时单击回调。

我意识到没有应用程序可以预测未来（或者我会非常富有），但我在想，只需单击一下就启动一个计时器，如果在一段时间内没有双击，然后单击。但这似乎不起作用，因为一旦我启动计时器并且计时器正在运行，第二次点击永远不会产生事件。这是我使用 aync 任务的代码，我也用计时器尝试过。

```
mGD = new GestureDetector(getContext(), new SimpleOnGestureListener() {

            @Override
            public boolean onSingleTapUp(MotionEvent ev) {
                //Log.d("KitView", "onSingleTapUp "+ev.toString());

                class DblTapTask extends AsyncTask<Void, Void, Void> {

                    @Override
                    protected void onPreExecute() {
                        Log.d("KitView", "onPreExecute");
                    }

                    protected Void doInBackground(Void... args) {
                        Log.d("KitView", "doInBackground");
                        try {
                            Thread.sleep(1000);
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        return null;
                    }

                    protected void onPostExecute(Void result) {
                        Log.d("KitView", "onPostExecute");
                                            doSigleTapAction();
                        mDblTapTask=null;
                    }
                };

                if(mDblTapTask==null) {
                    Log.d("KitView", "START TASK");
                    mDblTapTask = new DblTapTask();
                    mDblTapTask.execute();
                } else {
                    Log.d("KitView", "TASK RUNNING");
                                    doDoubleTapAction();
                }

                Log.d("KitView", "onSingleTapUp DONE");
                return true;
            }   // end onSingleTapUp

        });     // end new GestureDetector 
```

在这个例子中，我在第一次点击时得到了 onSingleTapUp。我的超时时间是 1 秒，用于在 doInBackground 中进行测试，所以我有很多时间来进行第二次点击。注意 Log.d("KitView", "onSingleTapUp DONE"); 立即运行我第一次点击，所以 onSingleTapUp 没有挂起。

问题是，在 1 秒内再次录音无济于事。在睡眠完成并且 onPostExecute 运行之前，不会调用 onSingleTapUp。所以 Log.d("KitView", "TASK RUNNING"); 永远不会发生，这是我当然会检测到双击与单击的地方。

我不确定为什么 aynctask 会阻止事件，有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-06T08:16:38.383

我对你想要达到的目标感到困惑。`onDoubleTap()`单击时不会调用双击方法。另一方面，每次双击都有两个关联的单击`onSingleTapUp()`方法调用。

如果你想区分它们，你可以使用`onSingleTapConfirmed()`当手势检测器确定点击*是*单次时触发的。见参考：

> 发生单击时通知。
> 
> 与 不同`OnGestureListener.onSingleTapUp(MotionEvent)`的是，这只会在检测器确信用户的第一次点击之后没有导致双击手势的第二次点击之后调用

然后，您可以将此方法调用与`boolean`标志结合使用，以检测任何类型的单击/双击。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T08:11:41.190

尝试如下：

您可以使用 GestureDetector。请参阅以下代码：

```
public class MyView extends View {

GestureDetector gestureDetector;

public MyView(Context context, AttributeSet attrs) {
    super(context, attrs);
            // creating new gesture detector
    gestureDetector = new GestureDetector(context, new GestureListener());
}

// skipping measure calculation and drawing

    // delegate the event to the gesture detector
@Override
public boolean onTouchEvent(MotionEvent e) {
    return gestureDetector.onTouchEvent(e);
}

private class GestureListener extends GestureDetector.SimpleOnGestureListener {

    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }
    // event when double tap occurs
    @Override
    public boolean onDoubleTap(MotionEvent e) {
        Log.d("Double Tap", "Tapped Occured.");
        return true;
    }
}
} 
```

您可以覆盖侦听器的其他方法以获取单击、弹跳等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T08:24:02.133

我想我已经明白了

```
@Override
            public  boolean     onSingleTapConfirmed(MotionEvent e) {
                Log.d("KitView", "onSingleTapConfirmed");
                return true;
            }
            @Override
            public boolean onDoubleTap(MotionEvent e) {
                Log.d("KitView", "onDoubleTap");
                return true;
            } 
```

当我双击时不会调用 onSingleTapConfirmed，很好很容易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T08:42:29.590

你可以参考自爆：覆盖 onTouchEvent() 方法

在第一次下来，我们将记录时间。当第二次宕机到来时，我们将最后一次宕机时间与它进行比较，如果它们在 150ms 或更少之间，我们将发布一条消息，表明它是双击。

# javascript - 海图风向

> ID：14724237
> 
> 赞同：1
> 
> 时间：2013-02-06T08:05:22.300
> 
> 标签：javascript, highcharts

我正在尝试使用实时数据制作风向仪。
需要将风角以度数转换为 NNW、NW 等，我为此做了一个函数。
问题是标签在高图中偏斜。（不是 90、180 等）

这是一个pastebin：[http://pastebin.com/CjAWpFHJ](http://pastebin.com/CjAWpFHJ)

这是图片： http: [//postimage.org/image/c17tlf78l/](http://postimage.org/image/c17tlf78l/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:52:57.043

问题是您使用的是tickPixelInterval，而应该是tickInterval，看一下现场示例：http: [//jsbin.com/oyudan/19/edit](http://jsbin.com/oyudan/19/edit)

我的意思当然是这一行：

```
yAxis: {
    ....
    tickInterval: 22.5,
} 
```

您还设置了labels.step = 2，因此在您的代码中不会呈现标签：

```
yAxis: {
   ....
   labels: {
        step: 2
   }
} 
```

如果您需要所有标签，请删除该行。

# php - 用于实现 Comet 的 JS 未捕获的 ReferenceError

> ID：14724242
> 
> 赞同：0
> 
> 时间：2013-02-06T08:05:58.693
> 
> 标签：php, javascript, comet

我正在尝试使用彗星来实现聊天。因为我对彗星没有任何经验，所以我搜索了示例代码并找到[了这个网站](http://gonzalo123.com/2011/03/14/real-time-notifications-with-php/)

创建所有文件后，我得到了这个模棱两可的错误

> **未捕获的 ReferenceError: 未定义要求**(chrome 控制台)
> **ReferenceError: 未定义要求 var http = require('http');** （火狐控制台）

这是因为我在 localhost 服务器上测试此代码还是有其他问题？html代码是：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Comet Test</title>
    </head>
    <body>
        <p><a class='customAlert' href="#">publish customAlert</a></p>
        <p><a class='customAlert2' href="#">publish customAlert2</a></p>
        <script src="http://localhost:80/chekhabara/downloads/realtime/2/jquery.min.js" type="text/javascript"></script>
        <script src="http://localhost:80/chekhabara/downloads/realtime/2/NovComet.js" type="text/javascript"></script>
        <script type="text/javascript">

            var http = require('http');

            http.createServer(function (req, res) {
              res.writeHead(200, {'Content-Type': 'text/plain'});
              res.end('Hello World\n');
            }).listen(80, '127.0.0.1');
            console.log('Server running at http://127.0.0.1:80/');
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:09:49.087

`require`未定义，因为它不是`window`.

安装[NodeJS](http://nodejs.org)，将此代码放在一个新文件中，例如`myscript.js`：

```
 var http = require('http');

        http.createServer(function (req, res) {
          res.writeHead(200, {'Content-Type': 'text/plain'});
          res.end('Hello World\n');
        }).listen(80, '127.0.0.1');
        console.log('Server running at http://127.0.0.1:80/'); 
```

并从命令行运行它`% node myscript.js`。

# c++ - C++：虚拟继承

> ID：14724243
> 
> 赞同：5
> 
> 时间：2013-02-06T08:05:59.453
> 
> 标签：c++, virtual-inheritance

考虑下面的代码：

```
#...
class A {};
class B: public A{};
class C: virtual public A{};
class D: virtual public C{};
// No More Classes
...
int _tmain(int argc, _TCHAR* argv[]) {
 cout<<sizeof(A)<<" ";
 cout<<sizeof(B)<<" ";
 cout<<sizeof(C)<<" ";
 cout<<sizeof(D)<<".";

 ...
} 
```

输出：1 1 4 8。

问题：

1.  sizeof(A) = 1byte，这个位置对编译器/我们来说很重要。
2.  当实际上没有任何东西存在时，为什么编译器会费心在 C 类对象中添加 vptr。
3.  如果我们没有任何虚函数，编译器会向派生对象添加一个额外的 vptr。

*。这是我的第一个问题，如果您发现任何错误，请纠正我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T08:12:22.097

简而言之，这不是因为类是否是虚拟的，而是因为标准要求所有对象都可以通过它们的内存地址来区分。看到这个问题：

[为什么 C++ 中空类的大小不为零？](https://stackoverflow.com/questions/2362097/why-is-the-size-of-an-empty-class-in-c-not-zero)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:57:50.280

广告 1\. 查看[PeddleSpam 的回答](https://stackoverflow.com/a/14724349/341065)

ad 2\. IIRC 编译器将更多的信息放入所谓的 VMT 中，而不仅仅是虚函数指针。我认为还有一个信息是虚拟 A 在 C 中的位置。

广告 3。见 2。

# javascript - 如果动态附加，为什么 twitter 推文按钮不起作用？

> ID：14724247
> 
> 赞同：1
> 
> 时间：2013-02-06T08:06:27.727
> 
> 标签：javascript, jquery, twitter

我只是分别玩 Facebook 和 Twitter Like & Tweet Button。当我注意到动态附加的 Twitter 按钮不起作用但手动添加的 Anchor 起作用时。为什么会这样？

这是小提琴：[小提琴](http://jsfiddle.net/C5VrX/)

你可以看到它不起作用。

代码：

```
$("body").append('<a href="https://twitter.com/share" class="twitter-share-button" data-dnt="true" data-count="none" data-via="SitesTwitter">Tweet</a>'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T08:23:39.177

这是因为将链接转换为 twitter 链接的 Javascript 在您使用 javascript 添加新链接之前（可能会加载）被触发：如果您删除 html 中的部分并在添加按钮后在 js 中调用它，它可以工作（或留下它并在添加按钮后调用它）

```
 $("body").append('<a href="https://twitter.com/share" class="twitter-share-button" data-dnt="true" data-count="none" data-via="SitesTwitter">Tweet</a>');
 ! function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (!d.getElementById(id)) {
            js = d.createElement(s);
            js.id = id;
            js.src = "https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);
        }
    }(document, "script", "twitter-wjs"); 
```

检查 [JsFiddle](http://jsfiddle.net/C5VrX/ "提琴手")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:20:33.213

多么有趣。当前的代码实际上对我有用：[http](http://codepen.io/anon/pen/punfx) ://codepen.io/anon/pen/punfx但我在你的小提琴上遇到了同样的问题。

我认为这是一个时间问题。您必须在`twitter-wjs`动态添加按钮后注入。我相信这个脚本可能会扫描页面以修改任何具有`twitter-share-button`类的链接或类似的东西。因此，如果您在执行该脚本后添加按钮，则不会扫描您的链接。

# ruby - 如何将 Ruby 脚本作为可执行文件执行？

> ID：14724250
> 
> 赞同：6
> 
> 时间：2013-02-06T08:06:37.407
> 
> 标签：ruby, compilation, executable

我想将我的 ruby​​ 脚本作为可执行文件执行，并且我应该在 /usr/bin/ 目录中执行。我知道这是可能的。

```
#!/usr/bin/ruby
puts "hello" 
```

和

```
chmod +x hello 
```

但我也想需要一些 ruby​​ 文件。

例如，如果我添加

```
require './other_ruby_script' 
```

进入我的代码，我将 Ruby 可执行文件移动到 /usr/bin/，它给了我错误：

无法加载此类文件“other_ruby_script”

我想在 /usr/bin 目录中执行 Ruby 文件。

所以也许我应该编译它？但我无法编译，因为当谷歌搜索“如何编译？”时我不明白。

如何创建适合我的代码格式的可执行 ruby​​ 代码。（需要'./other_file'）。而且我不必像这样执行 ./hello 我的可执行文件。只是我应该像你好一样执行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-18T19:23:03.220

```
#!/usr/bin/env ruby
require_relative 'other_ruby_script'
puts "hello" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T09:17:33.103

我想你问如何[配置正确的 loadpath](https://stackoverflow.com/questions/6671318/understanding-rubys-load-paths)。首先，在您的脚本中，我会执行以下操作：

```
puts $: 
```

这应该打印您是否正在加载正确的 Ruby 环境（如果您使用的是 rbenv 或 rvm，可能会出现问题）。例如我得到：

```
/Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/site_ruby/1.9.1
/Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/site_ruby/1.9.1/x86_64-darwin11.3.0
/Users/pmu/.rbenv/versions/1.9.3-p194/lib/ruby/site_ruby 
```

只要您的加载路径不包含带有脚本“other_ruby_script”的目录，您就会收到此错误：

```
LoadError: cannot load such file -- other_ruby_script 
```

因此，您应该尝试使用以下命令添加加载路径：

```
$:.unshift "#{File.dirname(__FILE__)}/../some_path" 
```

如果您一开始没有加载 Ruby 环境，则您的行：

```
#!/usr/bin/ruby 
```

需要设置以从 Rbenv 或 Rvm 加载环境

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:14:15.683

您可以从执行 ruby​​ 文件的位置编写一个 shell 脚本。您需要在 shell 脚本中导出 PATH 和 GEM_HOME。shell 脚本将是这样的：

```
#!/bin/bash
export PATH = /usr/local/rvm/gems/ruby-1.9.3-p194
export GEM_HOME = /usr/local/rvm/gems/ruby-1.9.3-p194
cd /path/to/ruby_script
ruby file_name.rb 
```

您将通过以下命令获得 PATH 和 GEM_HOME：

```
echo $PATH
echo $GEM_HOME 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-07T09:54:48.610

问题是针对 linux 环境的，但这个答案可能会对将来偶然发现这个问题的 Windows 用户有所帮助。

[这里](https://www.ruby-toolbox.com/categories/packaging_to_executables)有一些用于 Ruby 的打包 Gems 。

最流行的是[OCRA](https://github.com/larsch/ocra)（一键式 Ruby 应用程序），它既可以作为 Gem 文件也可以作为独立的 Ruby 文件使用，并将您的 Ruby 项目打包成 Windows 可执行文件。

# .net - 使用期货的 Nhibernate 连接查询

> ID：14724259
> 
> 赞同：1
> 
> 时间：2013-02-06T08:07:08.597
> 
> 标签：.net, nhibernate

我正在尝试使用 3 个查询和期货来分批 3 个调用来提取一个完整的对象图。

这是我的对象图的精简版。

```
public class Talent
{
    public virtual int Id { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual string Slug { get; set; }
    public virtual IList<Credit> Credits { get; set; }
    public virtual IList<Show> Creations { get; set; }
} 
```

人才查询能够计算出如何获得创作者

但是学分没有，我可以看到正在生成另一个 SQL 查询以再次获取此数据。以下是查询。

```
//Selectes the root node
var talentQuery = session.QueryOver<Filmslave.Domain.Models.Talent>()
                    .Where(t => t.Slug == slug)
                    .Take(1)
                    .Future();

//Fills Talent.Creations
var creationsQuery = session.QueryOver<Filmslave.Domain.Models.Creator>()
                    .Fetch(c => c.Shows).Eager
                    .JoinQueryOver(c => c.Talent).Where(t => t.Slug == slug)
                    .Future();

//Fills Talent.Credits
var creditsQuery = session.QueryOver<Filmslave.Domain.Models.Credit>()
                    .Fetch(c => c.Role).Eager
                    .Fetch(c => c.Episode).Eager
                    .JoinQueryOver(c => c.Talent).Where(t => t.Slug == slug)
                    .Future();

talent = talentQuery.FirstOrDefault(); 
```

我如何让天赋获得它的学分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T12:09:29.647

它应该像那样工作，但我也发现使用逆向的急切加载关系是有问题的。如果您反转查询，它应该可以工作：

```
var creditsQuery = session.QueryOver<Filmslave.Domain.Models.Talent>()
                .Where(t => t.Slug == slug)
                .Fetch(t => t.Credits).Eager
                .Fetch(t => t.Credits[0].Role).Eager
                .Fetch(t => t.Credits[0].Episode).Eager                    
                .Future(); 
```

# php - 使用会话变量确定表单操作时未加载 PHP 页面

> ID：14724263
> 
> 赞同：0
> 
> 时间：2013-02-06T08:07:20.293
> 
> 标签：php, session, variables

我对表格比较陌生，如果我在发布时出错，请见谅。

```
<?php

require_once("login/include/membersite_config.php");

if(!$fgmembersite->CheckLogin())
{
    $fgmembersite->RedirectToURL("./login/login.php");
    exit;
}

include 'menu.php';

$is_student = $_POST["is_student"];

//echo "<br/> student $is_student <br/>";

?>

<html>
<head>
<title>Seat Selection</title>
<link href="xampp.css" rel="stylesheet" type="text/css">
</head>

<body>
<h1>
<?php
if ($is_student == "no") {
  $student = FALSE;
  $_SESSION['student'] = FALSE;
} elseif ($is_student == "yes") {
  $student = TRUE;
  $_SESSION['student'] = TRUE;
} else {
  echo "Please select Student or Parent before making reservation.";
  die();
}

if ($student)
  echo "Student Reservation";
else
  echo "Parent Reservation";

?>
</h1>
<h2>Step 1 of 2: Select Seats</h2>

<table>

<?php if ($student) { ?>
  <form name="seats" action="confirms.php" method="POST">
<?php } else { ?>
  <form name="seats" action="confirm.php" method="POST">
<?php } ?>

<?php

        $all_seats = $fgmembersite->GetAllSeats($student); // it's a 2 dimensional array $list[row][col]
                                               // the value of which is another array with seatid and whether it's
                                               // filled or not
        $reserved_seats = $fgmembersite->GetAllReservedSeats($student);

        //var_dump($reserved_seats);

        // merge the reserved seats into all seats
        foreach ($reserved_seats as $r => $arr) {
          //echo "R =$r <br/>";
          //var_dump($arr);
          foreach($arr as $c => $seatid) {
             //echo "R = $r, C = $c, S = $seatid><br/>";
            $all_seats[$r][$c] = array(seatid => $seatid, filled => TRUE);
          }
        }

        foreach ($all_seats as $r => $c) {
          echo $r. ">";
          foreach ($c as $value) {
            if ($value['filled']) {
              echo "x";
               } else {
              echo "<input type=\"checkbox\" name=\"seats[]\" value=\"$value[seatid]\"/>";
            }
          }
          echo "<br/>";
        }
?>

<input type="Submit" name="SeatsSelected" value="Select Seats">
</form>
</table>

</body>
</html> 
```

我正在尝试使用 $student 中的布尔值来确定它转到哪个确认页面，但是当我加载代码所在的文件（seats.php）时，它不会加载。它就像网页目录中缺少该页面一样。知道怎么了？这可能只是我的错误编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:11:37.490

试试这个 ：

```
<?php if ($student) { ?>
  <form name="seats" action="confirm.php" method="POST"> 
<?php } else { ?>
  <form name="seats" action="confirms.php" method="POST"> 
<?php } ?> 
```

# android - 用 Ant 构建两个 apk

> ID：14724267
> 
> 赞同：0
> 
> 时间：2013-02-06T08:07:44.393
> 
> 标签：android, ant, build, apk

请帮我解决一个问题。我需要创建一个 ant 脚本来构建两个具有 2 个包名称的 apk。第二个apk'pakage需要重命名。然后在sdk android中重建使用build.xml。但是这个文件相当复杂。我很努力，但没有效果。请告诉我我应该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:43:00.750

尽管并非不可能，但要实现这一目标需要付出相当大的努力，因为：

1.  您需要更改 AndroidManifest.xml 中的包。这可以通过在运行时选择 2 个文件来完成。但目前，AndroidManifest.xml 的名称是一个全局属性（`manifest.file`并且`manifest.abs.file`指的是第一个）。您应该小心修改它，因为 Android 团队将来对 build.xml 的任何更改都可能会破坏您的构建。
2.  生成的 R 文件将属于新包，并且从源代码中对此 R 的引用将失败，因为未导入新包（必须在每个引用的源文件中完成`R`）。

# php - 能够更改目录中的文件权限？

> ID：14724269
> 
> 赞同：0
> 
> 时间：2013-02-06T08:07:47.267
> 
> 标签：php, file-upload, permissions

我有这样一个目录：

```
uploads/
add1
add2
add3

thumbs/
image1
image2
image3 
```

问题是上传文件夹下的adeed文件或拇指下的图像不存在！如果用户创建了一个添加文件，则在上传时会下降，并且作为上传的图像，图像会在拇指下下降。

我的问题：添加的文件和图像默认获得 644 文件权限，我无法查看图像！

我的问题：如何使添加的文件默认获得文件权限 755？

到目前为止我做了什么：

*   我问过我的托管公司。他们想不通。
*   我试过`chmod("/uploads/thumbs", 0755);`我把它放在后面`mysql_connect`......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:34:49.517

也许您想递归地将文件夹和现有文件权限更改为 644。我找到了这个并做了一些调整。这个有用吗？

```
exec ("find /uploads/thumbs -type f -exec chmod 0644 {} +"); 
```

如果您`crop($file,$destination);`在写入文件后执行更改权限之类的操作：

```
chmod($file, 0644) 
```

# android - Android viewflipper 动画滞后

> ID：14724270
> 
> 赞同：1
> 
> 时间：2013-02-06T08:07:55.543
> 
> 标签：android, animation, transition, viewflipper, lag

我有一些基本动画，当它们用于活动之间的转换时，它们就像一个魅力。

问题是，当我在取景器上使用它们时，我看到了非常明显的延迟。这是我活动的代码片段：

```
 private void initUI(){
    layoutInflater = LayoutInflater.from(this);
    flipViewMain = layoutInflater.inflate(R.layout.flip_view_profile_main, null);
    flipListHolder = layoutInflater.inflate(R.layout.flip_view_profile_list, null);
    flipDescriptionHolder  =  layoutInflater.inflate(R.layout.flip_view_profile_description, null);

    profileFlipper = (ViewFlipper) findViewById(R.id.profile_flipper);

    profileFlipper.addView(flipViewMain);
    profileFlipper.addView(flipListHolder);
    profileFlipper.addView(flipDescriptionHolder);

    flipInNextAnimation = AnimationUtils.loadAnimation(this, R.anim.push_left_in);
    flipOutNextAnimation = AnimationUtils.loadAnimation(this, R.anim.push_left_out);
    flipInPreviousAnimation = AnimationUtils.loadAnimation(this, R.anim.push_right_in);
    flipOutPreviousAnimation = AnimationUtils.loadAnimation(this, R.anim.push_right_out);
 }

  private void handleFlip(int position){
    if(position<currentPosition){
        profileFlipper.setInAnimation(flipInPreviousAnimation);
        profileFlipper.setOutAnimation(flipOutPreviousAnimation);
    } else if(position>currentPosition){
        profileFlipper.setInAnimation(flipInNextAnimation);
        profileFlipper.setOutAnimation(flipOutNextAnimation);
    }
    currentPosition = position;

    profileFlipper.setDisplayedChild(position);
} 
```

所有的动画都是这样的：

```
<translate android:fromXDelta="100%p" android:toXDelta="0" android:duration="300"/>
<alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="300" />

 </set> 
```

我究竟做错了什么？我怎样才能摆脱这种滞后？我想也许我会更好地使用 ViewPager 但它似乎在动画修改方面不是很灵活。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:17:17.167

显然问题不是由 ViewFlipper 引起的。我只在我的 Galaxy Nexus 设备上调试时才注意到动画滞后。我在[这里](http://www.dkeesto.com/?p=198)发现：

> Galaxy Nexus 为 1280 x 720，屏幕总像素为 921K。所以基本上，Galaxy Nexus 上的 GPU 每帧绘制的像素数是 Infuse 或 S II 上的 2.4 倍。预计 Galaxy Nexus 的潜在帧速率大约是 Infuse 或 Galaxy S II 的 2.4 倍。

这就是我的动画问题的原因。通过启用硬件加速来解决它：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (android.os.Build.VERSION.SDK_INT >= 11) {
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED, WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);
    }
    setContentView(R.layout.content);

    initUI();

} 
```

# javascript - Twitter Live feed 有时不起作用

> ID：14724272
> 
> 赞同：0
> 
> 时间：2013-02-06T08:08:09.680
> 
> 标签：javascript, twitter

我已经使用以下代码在我的网站中显示了我的 twitter 实时提要：

```
<div id='twitter_div'>                        
    <ul id='twitter_update_list'>       
    </ul>                             
</div> 
```

JS

```
http://twitter.com/javascripts/blogger.js
https://api.twitter.com/1/statuses/user_timeline.json?exclude_replies=true&screen_name=MY_TWITTER_ID&callback=twitterCallback2&count=2 
```

并且还尝试了以下 `javascript`URL，但也不起作用。

```
http://api.twitter.com/1/statuses/user_timeline/MY_TWITTER_ID.json?callback=twitterCallback2&count=1 
```

但有时这不会加载 twitter 提要并显示空白 div。我是否需要更新或更改这些 URL 或更多`javascript`需要？

# ios - 没有启动图标的 iOS 应用程序

> ID：14724273
> 
> 赞同：1
> 
> 时间：2013-02-06T08:08:12.120
> 
> 标签：ios, launcher, invisible

有没有办法将应用程序取消标记为“启动器应用程序”？

在 Andorid 中，我可以在 manifest.xml “android.intent.category.LAUNCHER”中设置一个属性。如果未设置该属性，则安装后启动器图标不可见。

背景信息：我想安装（不可见）应用程序，这些应用程序在某个应用程序中始终可见。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T09:41:43.243

不，没有办法在 iOS 上执行此操作。

# cocos2d-iphone - 运行多个版本的 Cocos2d

> ID：14724275
> 
> 赞同：0
> 
> 时间：2013-02-06T08:08:22.510
> 
> 标签：cocos2d-iphone

我有一个用 cocos2d v1 制作的旧游戏，我必须能够支持和更新。但是我的下一个游戏我想用 cocos2d 版本 2 创建。是否可以在一个开发环境中运行这两个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:57:42.720

是的。每个项目都可以并且将使用它创建时使用的任何 cocos2d 版本。

唯一不支持的是能够同时安装同一个 cocos2d 分支（v1.x 和 v2.x）的多个 Xcode 模板。例如，您可以同时安装 v1.1 和 v2.1 的模板，但不能同时安装 v2.0 和 v2.1 模板。

# python - Pandas：通过创建索引来加速过滤？

> ID：14724276
> 
> 赞同：4
> 
> 时间：2013-02-06T08:08:23.583
> 
> 标签：python, pandas

我想将 Pandas 之类的 SQL 用于 Web 应用程序（而不是将数据保存在 pSQL 中，只需将其保存在 pandas DataFrame 中，因为数据不到 1GB 并且不会不断变化）。如果我基于列上的多个过滤器进行查找（例如，年龄 > x、年龄 < y、收入 > p、收入 < q），有什么方法可以加快过滤速度吗？还是已经在下面完成了。在 SQL 中，一个人会声明一个关于年龄和收入的索引来加速这样的查询，我想知道如果有的话，pandas 的做法是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T08:53:50.390

执行此查询的“熊猫方式”是：

```
df[(x < df.age) & (df.age < y) & (p < df.income) & (df.income < q)] 
```

*pandas 默认索引所有内容（包括所有列），因此您无需事先明确声明要查询的内容。*

（我不能说这种设置对您的数据集是否有意义。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T09:17:12.417

Pandas 实际上只是一个包装器`numpy.ndarray`。

所有搜索实际上都是使用`ndarray`内部完成的。

```
 df[(df.age > x) & (y < df.age) & (df.income > p) & (df.income < q)] 
```

应该做的伎俩。`numpy.ndarray`但是您可以通过直接使用或使用掩码数组来加快该过程：http: [//docs.scipy.org/doc/numpy/reference/maskedarray.html](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)

这些不会为您新生成的数组分配新内存。这意味着您没有时间/CPU 开销来为“过滤”结果查找和分配新内存，并且您不会有由副本本身引起的内存开销。（实际上，这并不完全正确，因为掩码必须存储在某个地方，但您仍然不必将表*值*复制到内存中的其他地方）

然而，这是有代价的：屏蔽数组的使用时间要长一些，因为进程必须检查内存中的每个值是否被屏蔽。但是，如果这只是为了“过滤”，那么这种特定的访问开销应该是不明显的（当人们想要使用掩码数组进行计算时，它变得非常重要）。

**编辑：**

对于磁盘和内存中的持久和优化数据访问，有 PyTables 以这种方式进行了优化。也就是说，Pytables 以及 Numpy/Pandas 并不被认为是这样使用的。

# ckeditor - CKEditor 4 inline - 如何在不聚焦的情况下在对象上显示工具栏

> ID：14724279
> 
> 赞同：0
> 
> 时间：2013-02-06T08:08:38.370
> 
> 标签：ckeditor, toolbar, inline-editing

当我使用“CKEDITOR.inline(myId)”时，它会将编辑器实例应用于对象，但如果我不关注对象，它不会将工具栏应用于它。

就我而言，我不喜欢将对象集中在启动上，因为它将页面滚动到开始/结束（IE 浏览器焦点到页面末尾）。

有没有一种方法可以应用工具栏并将其显示到对象而不聚焦它？

注意：“startupFocus”属性对我不好，因为我不喜欢聚焦对象，我只是喜欢工具栏向上而不聚焦对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:22:51.997

目前，如果不像这样关注编辑器，就没有这种可能性：

```
CKEDITOR.instances.yourEditorInstance.focus(); 
```

您可以查看负责内联编辑器工具栏的[*浮动*空间插件。](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/floatingspace/plugin.js)您可以**尝试**（纯粹猜测）这样的事情：

```
var instance = CKEDITOR.instances.editable;
var toolbar = CKEDITOR.document.getById( instance.ui.spaceId( 'top' ) );
toolbar.show(); 
```

[...但是在您调用layout()](https://github.com/ckeditor/ckeditor-dev/blob/master/plugins/floatingspace/plugin.js#L49)之前它不会显示工具栏， layout()是目前需要（以某种方式）公开的私有函数。这可能有点棘手，并且可能会导致一些冲突和麻烦，因为编辑器从来没有被设计成这样工作，相信我，你不想与之抗争。

无论如何，祝你好运！;)

# drop-down-menu - Twitter Bootstrap $().dropdown('toggle') keydown 事件未触发

> ID：14724282
> 
> 赞同：1
> 
> 时间：2013-02-06T08:08:47.043
> 
> 标签：drop-down-menu, twitter-bootstrap, onkeydown

我在导航栏上有一个 Twitter Bootstrap 下拉菜单，当我点击它时它会正确打开，并且光标向上/向下键工作正常。

但是，如果我使用以下命令打开相同的菜单： `$('#menu').dropdown('toggle');`在 keydown 或 keyup 事件处理程序中，菜单会正确打开/关闭，但是光标向上/向下键不起作用。事实上，下拉菜单`keydown`事件不会触发。

这是html和Javascript：

```
<ul class="nav">   <!-- "KB Menu"   -->
    <li class="dropdown kb_menu hideit">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Knowledge Bases<b class="caret"></b></a>
      <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel" id="kb_menu">
      </ul>
    </li>
</ul>

$(document).on('keydown', function( event ){
    if ( event.ctrlKey ){
        if ( event.keyCode == 191 ){   // Ctrl+/ = 191
            $('#kb_menu').dropdown('toggle');
        }
    }
}); 
```

到目前为止，我已经尝试了我能想到的一切都无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:09:32.580

在 之后添加以下行`$('#kb_menu').dropdown('toggle')`：

```
$('#kb_menu').find('li:first > a').focus(); 
```

# c# - 如何使用 c# 的 selenium rc 处理验证消息？

> ID：14724284
> 
> 赞同：2
> 
> 时间：2013-02-06T08:08:57.297
> 
> 标签：c#, validation, selenium-rc, messages

如果用户名字段为空，我想处理“请输入用户名”之类的验证消息。目前我正在从 excel 表中获取数据，我想将验证消息与列“预期结果”的行值进行比较，如果这两个匹配项将结果作为“通过”在 excel 表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:16:17.740

用两种方法试试

1) selenium.visible("text") 它将捕获隐藏的文本和客户端消息

2) 在等待 Alert 函数后尝试使用 Getalert() 和 .Isalertpresent()

> assertEquals("请输入用户名", selenium.getAlert());

或者

> assertTrue(selenium.isTextPresent("请输入用户名"));

详细信息链接：[http ://seleniumhq.org/docs/05_selenium_rc.jsp](http://seleniumhq.org/docs/05_selenium_rc.jsp)

# php - 设置 jquery timeago 插件

> ID：14724291
> 
> 赞同：0
> 
> 时间：2013-02-06T08:09:13.377
> 
> 标签：php, jquery, timeago

我正在尝试使用 PHP 格式的日期设置 jQuery timeago 插件：

```
d/m/Y H:i:s 
```

但收效甚微。这是我到目前为止所做的：

```
<script>
$(document).ready(function () {
    $("abbr.timeago").timeago();
});
});
</script>

<abbr class="timeago" title="30/01/2013 13:30:06">30/01/2013 13:30:06</abbr> 
```

我在这里包括了一个小提琴：http: [//jsfiddle.net/mc8ft/2/](http://jsfiddle.net/mc8ft/2/)

关于 timeago 插件的更多信息可以在这里找到：http: [//timeago.yarp.com/](http://timeago.yarp.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:16:10.393

您的脚本中有语法错误。删除最后一个`});`。

```
<script>
$(document).ready(function () {
   $("abbr.timeago").timeago();
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:21:26.633

首先，存在语法错误（`});`不需要最后一个）。其次，该插件似乎不接受您在小提琴中使用的格式的日期，它应该类似于`yyyy/mm/dd`.

工作示例[http://jsfiddle.net/mc8ft/4/](http://jsfiddle.net/mc8ft/4/)

# cocos2d-iphone - 即使上面有精灵，CCMenuAdvanced 也会被点击

> ID：14724292
> 
> 赞同：0
> 
> 时间：2013-02-06T08:09:14.257
> 
> 标签：cocos2d-iphone, ccmenu

在我的 Cocos2d 2.0 iOS 游戏中，我使用 CCMenuAdvanced 创建滚动菜单。问题是菜单的不可见部分似乎也在处理触摸。

这是代码（需要让边界矩形正确显示和裁剪）：

```
// background is full screen, with all pixels transparent 
// except the part where menu shows
CCSprite *menuBackground = [CCSprite spriteWithFile:@"scrollingmenubackground.png"];
//...
[self addChild:menuBackground];
//...    
//create menu items
CCMenuAdvanced *settingsMenu = [CCMenuAdvanced menuWithItems:item1, item2, item3, nil];
//...
[menuBackground addChild:settingsMenu];

// foreground is full screen, with an image    
// with a transparent hole where the menu shows
CCSprite *foreground = [CCSprite spriteWithFile:@"scrollingmenuforeground.png"];    
[menuBackground addChild:foreground];
//... 
```

现在这工作正常，菜单显示，正确裁剪并处理触摸。然而，问题是当我点击可见菜单下方时，它仍然会处理菜单上的触摸，即使前面有一个带有不透明像素的精灵（`foreground`）。

我尝试通过将前景设置为比菜单更高的 zorder 来摆弄 zorder，但这似乎并没有改变任何东西。

```
 menuBackground.zOrder = 1;
    settingsMenu.zOrder = 2;
    foreground.zOrder = 3; 
```

我还尝试将菜单优先级设置`INT_MIN`为 以及`kCCMenuHandlerPriority - 1`，但没有效果。

如何让菜单仅响应用户可见的部分？

谢谢阿南德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:09:11.097

要获得有效的“蒙版”，您应该使用启用了触摸的图层作为前景。在该层中，您可以接受菜单外的触摸，不对其进行任何操作，然后将它们传递到遮罩内。但是，这会导致问题：如果 touchBegan 在遮罩内，并且用户将其手指拖到外面，菜单仍将继续滚动。您可以继承 CCAdvancedMenu 来实现您自己的触摸处理要求，或者创建您自己的版本。我最终选择了后者，因为我的游戏设计师想要从中获得许多其他功能，而子类化成为障碍而不是帮助。顺便说一句，不要依赖 zOrder 进行触摸处理，它们不相关。

此外，“触摸蒙版”方法可能会在以后再次出现并困扰您（例如，如果您在滚动菜单旁边添加其他也需要触摸的对象，则触摸将被屏蔽），最好是所有对象与实现触摸相关的需求有关的那些封装了他们自己的实现。

# c# - ASP.Net GridView RowUpdate 未触发且 RowUpdating 没有 NewValues

> ID：14724295
> 
> 赞同：2
> 
> 时间：2013-02-06T08:09:26.057
> 
> 标签：c#, asp.net, events, gridview, datatable

我有以下 GridView：

```
<asp:GridView ID="gridCar" runat="server" RowStyle-ForeColor="Black" AllowSorting="true" OnSorting="gridCar_Sorting" AutoGenerateEditButton="true" OnRowEditing="gridCar_RowEditing" OnRowCancelingEdit="gridCar_RowCancelingEdit" OnRowUpdating="gridCar_RowUpdating" OnRowUpdated="gridCar_RowUpdated"></asp:GridView> 
```

我想更新编辑按钮选择的行。问题是，如果我尝试在 中执行此操作`gridCar_RowUpdating`，`e.NewValues`则不包含已编辑的值，而是包含旧的值。

我四处搜索，发现我可能不得不使用`onRowUpdated`事件，但后来我遇到了另一个问题；这个事件根本没有被触发。我试图设置`e.Cancel = false`，`gridCar_RowUpdating`但这不会解决问题。

GridView 绑定到 DataTable。

编辑：这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

using System.Data;

public partial class _Default : Page
{
    DataTable carsTable = new DataTable("cars");

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            carsTable.Columns.Add("CarID");
            carsTable.Columns.Add("CarRegNum");
            carsTable.Columns.Add("CarModel");
            carsTable.Columns.Add("CarType");
            carsTable.Columns.Add("CarOwner");

            carsTable.Rows.Add(1, "AAA-111", "Toyota", "Hatchback", "Matti");
            carsTable.Rows.Add(2, "BBB-222", "Mercedes-Benz", "Van", "Keijo");
            carsTable.Rows.Add(3, "CCC-333", "Renault", "Regular", "Matilda");

            carsTable.AcceptChanges();

            gridCar.DataSource = carsTable;
            gridCar.DataBind();
        }
    }

    protected string dataViewSortDirection(SortDirection direction)
    {
        switch (direction)
        {
            case SortDirection.Ascending:
                return "ASC";
            case SortDirection.Descending:
                return "DESC";
            default:
                throw new ArgumentOutOfRangeException();
        }
    }

    protected void gridCar_Sorting(object sender, GridViewSortEventArgs e)
    {
        gridCar.Sort(e.SortExpression, e.SortDirection);

        // update GridView
        gridCar.DataBind();
    }

    protected void gridCar_RowEditing(object sender, GridViewEditEventArgs e)
    {
        gridCar.EditIndex = e.NewEditIndex;
        gridCar.DataBind();
    }

    protected void gridCar_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        gridCar.EditIndex = -1;
        gridCar.DataBind();
    }

    protected void gridCar_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        labelDebug.Text += "b";
        //gridCar.EditIndex = -1;
        //gridCar.DataBind();
    }

    protected void gridCar_RowUpdated(object sender, GridViewUpdatedEventArgs e)
    {
        labelDebug.Text += "a";
        gridCar.EditIndex = -1;
        gridCar.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T08:16:54.907

你确定你没有`GridView`对回发进行数据绑定吗？你应该只这样做`if(!IsPostBack)`：

```
protected void Page_Load(Object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
        BindGridView();
    }
} 
```

否则，您将加载旧值并阻止该`RowUpdated`事件。

**更新**

> 我可能做错了很多事情，你能告诉我现在应该如何进行排序和更新吗？

这是一个完整的工作示例：

```
public partial class GridTest : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            BindGrid();
        }
    }

    private void BindGrid()
    {
        var source = GetCarTable().Select("", this.SortExpression).CopyToDataTable();
        GridCar.DataSource = source;
        GridCar.DataBind();
    }

    private string SortExpression
    {
        get
        {
            if (ViewState["SortExpression"] == null || string.IsNullOrEmpty((String)ViewState["SortExpression"]))
            {
                ViewState["SortExpression"] = "CarModel ASC";
            }
            return ViewState["SortExpression"].ToString();
        }
        set { ViewState["SortExpression"] = value; }
    }

    private static DataTable GetCarTable()
    {
        DataTable carsTable = new DataTable("cars");
        carsTable.Columns.Add("CarID");
        carsTable.Columns.Add("CarRegNum");
        carsTable.Columns.Add("CarModel");
        carsTable.Columns.Add("CarType");
        carsTable.Columns.Add("CarOwner");

        carsTable.Rows.Add(1, "AAA-111", "Toyota", "Hatchback", "Matti");
        carsTable.Rows.Add(2, "BBB-222", "Mercedes-Benz", "Van", "Keijo");
        carsTable.Rows.Add(3, "CCC-333", "Renault", "Regular", "Matilda");

        return carsTable;
    }

    protected void gridCar_Sorting(object sender, System.Web.UI.WebControls.GridViewSortEventArgs e)
    {
        string currentSortColumn = null;
        string currentSortDirection = null;
        currentSortColumn = this.SortExpression.Split(' ')[0];
        currentSortDirection = this.SortExpression.Split(' ')[1];

        if (e.SortExpression.Equals(currentSortColumn))
        {
            //switch sort direction
            switch (currentSortDirection.ToUpper())
            {
                case "ASC":
                    this.SortExpression = currentSortColumn + " DESC";
                    break;
                case "DESC":
                    this.SortExpression = currentSortColumn + " ASC";
                    break;
            }
        }
        else
        {
            this.SortExpression = e.SortExpression + " ASC";
        }

        //load the data with this SortExpression and DataBind the Grid
        BindGrid();
    }

    protected void GridCar_RowEditing(object sender, GridViewEditEventArgs e)
    {
        GridCar.EditIndex = e.NewEditIndex;
        BindGrid();
    }

    protected void GridCar_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        GridCar.EditIndex = -1;
        BindGrid();
    }

    protected void GridCar_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        var oldValues = e.OldValues;
        var newValues = e.NewValues;
        // BindGrid();
    }

    protected void GridCar_RowUpdated(object sender, GridViewUpdatedEventArgs e)
    {
        //BindGrid();
    }
} 
```

aspx 几乎保持不变：

```
<asp:GridView   ID="GridCar" 
            runat="server" 
            RowStyle-ForeColor="Black" 
            AllowSorting="true" 
            OnSorting="gridCar_Sorting" 
            AutoGenerateEditButton="true" 
            OnRowEditing="GridCar_RowEditing"
            OnRowCancelingEdit="GridCar_RowCancelingEdit"
            OnRowUpdating="GridCar_RowUpdating" 
            OnRowUpdated="GridCar_RowUpdated"
            AutoGenerateColumns="true">
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:28:16.067

您的代码没有 DataSourceID。我假设数据绑定在代码后面。

如果您只想编辑/更新 GridView 的行，您需要的是**ItemUpdating**事件（例如**gridcar_ItemUpdating**）而*不是 RowUpdating*。

我希望它对你有帮助。

# jquery - 是否有复选框更改状态的事件？

> ID：14724300
> 
> 赞同：2
> 
> 时间：2013-02-06T08:09:48.727
> 
> 标签：jquery, html, checkbox

当基于其他交互更改/修改状态时，是否存在复选框更改事件。我的意思不是点击文本框。

我试过这段代码：

```
$('input[type="checkbox"]').bind('change',function(){
    alert('Checkbox state is changed.');
}); 
```

...但正如您在[此演示](http://jsfiddle.net/ardeezstyle/wmVtB/)中看到的那样，如果我单击复选框，我会看到一个显示“复选框状态已更改”的警报。由 change 事件触发的消息。但是当使用按钮更改复选框状态时，不会触发相同的操作。

我错过了什么吗？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:23:54.967

问题是您正在修改 "checked" 中的属性，`DOM`但没有调用相同的事件处理程序。

在您的按钮事件单击中，您可以使用`trigger`并执行以下操作：

```
$('input[type="checkbox"]').trigger('change'); 
```

[http://jsfiddle.net/wmVtB/7/](http://jsfiddle.net/wmVtB/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:15:35.207

不，通过 JavaScript 设置`checked`属性不会触发任何事件。如果您需要触发一个，您必须自己编写脚本或触发一个`click`事件，然后触发状态更改。

# php - 如何将 id 存储在下拉列表中而不显示它们

> ID：14724302
> 
> 赞同：0
> 
> 时间：2013-02-06T08:09:57.643
> 
> 标签：php, jquery, drop-down-menu

我在表单上有两个下拉列表：

```
<select id="slctFirm">
<?php
$firmObj = new dbFirm($myDB);
echo $firmObj->DropdownOptions();
?> 

<select id="slctPerson">
<?php
$personObj = new dbPerson($myDB);
echo $personObj ->DropdownOptions();
?> 
```

PHP 代码正在调用我创建的对象来生成两个下拉列表的列表。第二个列表填充了属于在第一个下拉列表中选择的公司的人员。现在的问题是第一个列表只检索公司名称并按字母顺序排列它们，因为我不希望公司 ID 出现在第一个下拉列表中。为了过滤第二个列表，我需要 ID，但我不知道如何将这些 ID 存储在第一个下拉列表中而不出现在列表中？希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:13:58.480

每个`Firm`都可以在它的标签上有一个值`option`，可以存储`id`

```
<option value="10">Firm Name</option> 
```

所以你可以很容易地使用 jQuery 来获取它

```
alert($("#slctFirm").val()); 
```

# crystal-reports - 报表设计需要解决水晶报表

> ID：14724303
> 
> 赞同：1
> 
> 时间：2013-02-06T08:09:59.637
> 
> 标签：crystal-reports

我正在尝试生成一个生成结果的报告，如下所示：

如果图片存在针对常见模式编号的“是”和“否”结果，如图像编号 1 所示，我希望生成结果。

如果针对常见模式编号的图片存在只有“是”的结果，我希望不生成结果。

如果针对常见模式编号的图片存在只有 NO 的结果，我希望不生成结果。

图案编号是 TOOL_Tools.Tooling_Number 图片存在是@Picture Exist 的最大值，这是一个公式字段，如图片编号 2 所示。

* * *

图像编号 1

![在此处输入图像描述](../Images/6dba84b9fc535fb3e5160a3fbbe7fb3b.png)

* * *

图像编号 2

![在此处输入图像描述](../Images/ae4dcd190923c11e839ff02284ebddda.png)

* * *

图像编号 3

这就是表的链接方式。 ![在此处输入图像描述](../Images/85df7a600b039332a645b5ab135dcc32.png)

* * *

如果您需要更多信息，请询问

# python - python删除与未知模式匹配的旧文件（棘手）

> ID：14724304
> 
> 赞同：2
> 
> 时间：2013-02-06T08:10:08.397
> 
> 标签：python, regex, linux, algorithm

我的服务器已满，我需要自动删除文件。文件通常每天都会添加到我的服务器中，但有时会出现暂停，使其每两周或每月一次。他们停止进来几个月然后重新开始，这是不可预测的。

我的脚本需要删除超过 30 天的文件，**但始终保留它找到的任何文件模式的最新 5 个文件**。这是棘手的部分。

关于文件的唯一可预测的事情/模式是文件总是在某处包含一个 yyyymmddhhmmss 时间戳和一些重复的模式，文件名的其他部分并不总是可预测的。如果文件没有时间戳，我不想删除它。

一个示例目录我有这样的东西

20121118011335_team1-pathway_Truck_Report_Data_10342532.zip
20121119011335_team1-pathway_Truck_Report_Data_102345234.zip
20121120011335_team1-pathway_Truck_Report_Data_10642224.zip
20121121011335_team1-pathway_Truck_Report_Data_133464.zip
20121122011335_team1-pathway_Truck_Report_Data_126434344.zip
20121123011335_team1-pathway_Truck_Report_Data_12444656.zip
20121124011335_team1-pathway_Truck_Report_Data_1624444.zip
20121125011335_team1-pathway_Truck_Report_Data_3464433.zip
randomefilewithnodate.zip
20121119011335_team2-Paper_Size_Report_336655.zip
20121120011335_team2- Paper_Size_Report_336677.zip
20121121011335_team2-Paper_Size_Report_338877.zip
20121122011335_team2-Paper_Size_Report_226688.zip
20121123011335_team2-Paper_Size_Report_776688.zip
20121124011335_team2-Paper_Size_Report_223355.zip
20121125011335_team_Size_Report_11111_zipReport_11111_zip

在这种情况下，我的脚本应该只删除第一个模式的最旧的 3 个文件 20121118011335_team1-pathway_Truck_Report_Data_10342532.zip
20121119011335_team1-pathway_Truck_Report_Data_102345234.zip 20121120011335_team1-
pathway_Truck_zip_Data

和第二个模式最旧的 2 个文件
20121119011335_team2-Paper_Size_Report_336655.zip
20121120011335_team2-Paper_Size_Report_336677.zip

*这样它会保留 5 个最新文件，并且不会触及没有日期的文件*

我的问题是我无法知道 yyyymmddhhmmss_ 究竟会发生什么

到目前为止，如果时间戳存在，我已经想出了匹配的正则表达式，但我想不出如何让我的脚本足够聪明，以检测文件的其余模式并保持 5 天的模式。

欢迎任何想法！下面的脚本并不完美，*我可以修复一些小错误。*

**我真的需要帮助来保存 5 个最新的文件部分，主要是**

奖金问题是 epoc 时间部分。

```
def myCleansingMethod(self, client)

    # Get rid of things older than 30 days
    # 30 days has this many seconds 30 * 24 * 60 * 60
    numberOfSeconds = 2592000
    # establish what the epoc time of the oldest file I want to keep is
    oldestFileThatIWantToKeep = time.time() - numberOfSeconds
    #establish my working directory
    workingDirectory = "/home/files/%s" % (client)
    try:
        files = os.listdir(workingDirectory)
        except:
        print "Could not find directory"
        return

        files.sort()
        for file in files:
            # define Full File Name (path + file)
            fullFileName = "%s/%s" % (workingDirectory, file)
            # make sure the file contains yyyymmddhhmmss
            match = re.search(r'[0-9]{4}(1[0-2]|0[1-9])(3[01]|[12][0-9]|0[1-9])([01]\d|2[0123])([0-5]\d){2}', file)
            if match:
                #get what was matched in the RegEx
                fileTime = match.group()
                #convert fileTime to Epoc time
                fileTimeToEpoc = (fileTime + NOT SURE HOW TO DO THIS PART YET)

                if fileTimeToEpoc < oldestFileThatIWantToKeep AND (CODE THAT MAKES SURE   THERE ARE AT LEAST 5 FILES OF THE SAME PATTERN PRESENT) :
                print "Delete file: %s\t%s" % (fileTimeToEpoc, fullFileName)
                command = "rm -Rf %s" % fullFileName
                print command
                os.system (command)
                else:
                pass  
            else:
            pass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:38:48.613

这是一项不错的任务，我大量使用了功能模式，主要来自`itertools`. 我喜欢使用迭代器，因为它们是可扩展的，即使对于巨大的列表也是如此，并且所涉及的功能思想使代码可读和可维护。

首先，从 itertools 和 datetime 中导入我们需要的内容：

```
from itertools import groupby, chain
from datetime import datetime 
```

获取您的示例文件名作为列表：

```
filenames = """20121118011335_team1-pathway_Truck_Report_Data_10342532.zip
20121119011335_team1-pathway_Truck_Report_Data_102345234.zip
20121120011335_team1-pathway_Truck_Report_Data_10642224.zip
20121121011335_team1-pathway_Truck_Report_Data_133464.zip
20121122011335_team1-pathway_Truck_Report_Data_126434344.zip
20121123011335_team1-pathway_Truck_Report_Data_12444656.zip
20121124011335_team1-pathway_Truck_Report_Data_1624444.zip
20121125011335_team1-pathway_Truck_Report_Data_3464433.zip
randomefilewithnodate.zip
20121119011335_team2-Paper_Size_Report_336655.zip
20121120011335_team2-Paper_Size_Report_336677.zip
20121121011335_team2-Paper_Size_Report_338877.zip
20121122011335_team2-Paper_Size_Report_226688.zip
20121123011335_team2-Paper_Size_Report_776688.zip
20121124011335_team2-Paper_Size_Report_223355.zip
20121125011335_team2-Paper_Size_Report_111111.zip""".split("\n") 
```

一些辅助功能。名称应该是自我解释的。

```
def extract_date(s):
    return datetime.strptime(s.split("_")[0], "%Y%m%d%H%M%S")

def starts_with_date(s):
    try:
        extract_date(s)
        return True
    except Exception:
        return False 
```

如果它不涵盖所有情况，您可能需要调整下一个方法 - 对于您的样本数据，它确实如此。

```
def get_name_root(s):
    return "".join(s.split(".")[0].split("_")[1:-1])

def find_files_to_delete_for_group(group):
    sorted_group = sorted(group, key=extract_date)
    return sorted_group[:-5] 
```

现在，整个例程可以通过一些迭代来完成。首先，我过滤文件名列表，所有不以数据开头的文件（以您的格式）都被过滤掉。然后，其余的按其“名称根”分组（想不出更好的名称）。

```
fn_groups = groupby(
                filter(
                    starts_with_date,
                    filenames),
                get_name_root
            ) 
```

现在，对于每个组，我应用过滤方法（见上文）来查找所有不包含五个最新日期的文件名。为每个组找到的是`chain`ed，即从多个列表创建一个迭代器：

```
fns_to_delete = chain(*[find_files_to_delete_for_group(g) for k, g in fn_groups]) 
```

最后，为了方便检查结果，我将迭代器转换为列表并打印出来：

```
print list(fns_to_delete) 
```

这个脚本的输出是：

```
['20121118011335_team1-pathway_Truck_Report_Data_10342532.zip', '20121119011335_team1-pathway_Truck_Report_Data_102345234.zip', '20121120011335_team1-pathway_Truck_Report_Data_10642224.zip', '20121119011335_team2-Paper_Size_Report_336655.zip', '20121120011335_team2-Paper_Size_Report_336677.zip'] 
```

如果有任何不清楚的地方，请询问。

这是整个脚本，用于简单的 c&p-ing：

```
from itertools import groupby, chain
from datetime import datetime

filenames = """20121118011335_team1-pathway_Truck_Report_Data_10342532.zip
20121119011335_team1-pathway_Truck_Report_Data_102345234.zip
20121120011335_team1-pathway_Truck_Report_Data_10642224.zip
20121121011335_team1-pathway_Truck_Report_Data_133464.zip
20121122011335_team1-pathway_Truck_Report_Data_126434344.zip
20121123011335_team1-pathway_Truck_Report_Data_12444656.zip
20121124011335_team1-pathway_Truck_Report_Data_1624444.zip
20121125011335_team1-pathway_Truck_Report_Data_3464433.zip
randomefilewithnodate.zip
20121119011335_team2-Paper_Size_Report_336655.zip
20121120011335_team2-Paper_Size_Report_336677.zip
20121121011335_team2-Paper_Size_Report_338877.zip
20121122011335_team2-Paper_Size_Report_226688.zip
20121123011335_team2-Paper_Size_Report_776688.zip
20121124011335_team2-Paper_Size_Report_223355.zip
20121125011335_team2-Paper_Size_Report_111111.zip""".split("\n")

def extract_date(s):
    return datetime.strptime(s.split("_")[0], "%Y%m%d%H%M%S")

def starts_with_date(s):
    try:
        extract_date(s)
        return True
    except Exception:
        return False

def get_name_root(s):
    return "".join(s.split(".")[0].split("_")[1:-1])

def find_files_to_delete_for_group(group):
    sorted_group = sorted(group, key=extract_date)
    return sorted_group[:-5]        

fn_groups = groupby(
                filter(
                    starts_with_date,
                    filenames),
                get_name_root
            )

fns_to_delete = chain(*[find_files_to_delete_for_group(g) for k, g in fn_groups])

print list(fns_to_delete) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:36:12.543

您需要做的困难部分不是编码问题，而是定义问题，因此不能仅通过编写更好的代码来解决 :-)

为什么它与和`20121125011335_team1-pathway_Truck_Report_Data_3464433.zip`属于同一组？你（作为一个人）如何意识到重要的共同部分是和不是？`20121118011335_team1-pathway_Truck_Report_Data_10342532.zip``20121119011335_team1-pathway_Truck_Report_Data_102345234.zip``_team1-pathway_Truck_Report_Data_``_team1-pathway_Truck_Report_Data_1`

回答这个问题（我怀疑答案将涉及“下划线”和/或“数字”），你就会有前进的方向。

> 我只知道这将是 yyyymmddhhmmss_something_consistent_random_random 或 yyyymmddhhmmss_something_consistent_something_consistent_random_random.xyz 的各种迭代

如果这就是所有可能的变化，那么我会说你需要寻找下划线包围的常见初始序列。这是有效的，因为随机的东西总是在最后，所以如果你想包含重要的文件扩展名，那么你必须特别对待它（例如将它移动到你正在比较的字符串的前面）。如果您发现几个文件具有三个共同的“单词”但不是四个，那么您假设第四个块是“随机的”并且三个块是“一致的”。然后，您按日期对所有该类型的文件进行排序，从列表中删除最新的五个文件，并删除超过 30 天的所有文件。

找到那些常见的初始序列的“明显”方法是按照*除 date 之外的*组件的字典顺序对文件名进行排序。然后具有共同初始序列的文件是相邻的，因此您可以遍历列表，将每个文件与当前最长运行的 files-with-a-prefix-in-common 进行比较。

在编码时，请确保如果可能出现以下情况，请正确处理：

```
<some_date>_truck1_548372.zip
<some_date>_truck1_847284.zip
<some_date>_truck1_data_4948739.zip
<some_date>_truck1_data_9487203.zip 
```

也就是说，确保您知道在这种情况下您是在处理一个组（“truck1”）还是两个组（“truck1”和“truck1_data”）。这很重要，因为您可能希望`truck1_data`从保留 5 个文件的要求中排除任何`truck1`文件。

* * *

另一种方法：

*   查找所有超过 30 天的文件（例如`<some_date>_truck1_57349.zip`）并将它们从最旧到最新排序
*   对于每个文件，寻求“许可”将其删除，如下所示：
    *   从文件名的开头删除日期
    *   搜索所有文件（不仅仅是那些超过 30 天的文件），忽略它们自己的日期，与这个文件有一个共同的初始下划线包围的子字符串（所以我们在这里找到`truck1`文件和`truck1_data`文件）
    *   找到这些文件后，找到其中至少两个共享的最长子字符串 ( `truck1_data`)
    *   如果目标文件不共享该子字符串，请从集合中删除所有具有公共子字符串的文件并重复上一步（现在我们只处理`truck1`文件）
    *   一旦目标文件共享子字符串，就计算它们。如果至少有 5 个，则删除目标文件。

如前所述，这是不必要的缓慢，但我认为它简单地说明了这一点。在最后一步，您实际上可以删除除 5 个其余文件之外的所有文件，并将其他五个文件从未来考虑中删除，因为您已经确定了一组文件。同样，当您删除所有公共子字符串长于与目标文件共享的子字符串的文件时，您已经识别出一个组，您可以将其作为一个组进行处理，而不是仅仅将其扔回大海以供将来识别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:33:15.927

> 关于文件的唯一可预测的事情/模式是文件总是在某处包含一个 yyyymmddhhmmss 时间戳和一些重复的模式

要允许`yyyymmddhhmmss`文件名中的任何位置并自动查找重复模式，您可以首先`yyyymmddhhmmss`从文件名中删除，然后使用重复至少两次的最长前缀作为重复模式。

```
import os
from itertools import groupby
from os.path import commonprefix

def files_to_delete(topdir):
    for rootdir, dirs, files in os.walk(topdir):
        # find files with yyyymmddhhmmss
        files_with_date = []
        for filename in files:
            for m in re.finditer(r"(?:^|\D)(\d{14})(?:\D|$)", filename):
                date = parse_date(m.group(1))
                if date is not None: # found date in the filename
                   # strip date
                   no_date = filename[:m.start(1)] + filename[m.end(1):]
                   # add to candidates for removal
                   files_with_date.append((no_date, date, filename))
                   break

        # find repeating pattern
        files_with_date.sort() # sort by filename with a removed date
        # given ["team1-a", "team2-b", "team2-c"]
        # yield [["team1-a"], ["team2-b", "team2-c"]] where 
        #    roots are "team1" and "team2"
        # reject [["team1-a", "team2-b", "team2-c"]] grouping (root "team")
        #     because the longer root "team2" occurs more than once
        roots = [commonprefix(a[0],b[0]) for a,b in pairwise(files_with_date)]
        roots.sort(key=len, reverse=True) # longest roots first
        def longest_root(item):
            no_date = item[0]
            return next(r for r in roots if no_date.startswith(r)) or no_date
        for common_root, group in groupby(files_with_date, key=longest_root):
            # strip 5 newest items (sort by date)
            for _, d, filename in sorted(group, key=lambda item: item[1])[:-5]:
                if d < month_ago: # older than 30 days
                   yield os.path.join(rootdir, filename) 
```

注意：使用重复模式`['team1-a', 'team2-b', 'team3-c', ...]`组合在一起，即如果“重复模式”在文件列表中不重复，上述算法将失败。`[['team1-a', 'team2-b', 'team3-c', ...]]``'team'`

实用程序：

```
from datetime import datetime, timedelta
from itertools import izip, tee

month_ago = datetime.utcnow() - timedelta(days=30)

def parse_date(yyyymmddhhmmss):
    try: return datetime.strptime(yyyymmddhhmmss, "%Y%m%d%H%M%S")
    except ValueError:
         return None

def pairwise(iterable): # itertools recipe
    a, b = tee(iterable)
    next(b, None)
    return izip(a, b) 
```

要删除文件，您可以调用`os.remove(path)`而不是`os.system()`.

如果您以后可以将文件的命名方案更改为更具确定性，例如，`[]`在文件名中使用模式，那么您可以将 root 提取为：

```
root = re.match(r'[^[]*\[([^]]+)\]', filename).group(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T08:27:02.410

我的建议：

*   搜索文件，直到找到一个名称包含连续 14 位数字的文件。
*   检查这些数字是否可以是时间戳。
*   搜索名称包含相同余数的所有其他文件。
*   按日期的降序对它们进行排序。
*   从有序文件列表中的第 6 个文件开始删除所有超过 5 天的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T08:41:32.740

如果之前的随机部分`.zip`总是由数字和下划线组成，你可以使用这个正则表达式

```
(\d{14})_(.*?)[_\d]+\.zip 
```

匹配中的第一组是可能的日期，您可以使用`datetime.datetime.strptime`. 第二组是用于分组的常量部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T08:45:36.743

此功能会将带有日期戳的文件名转换为纪元时间它不使用正则表达式您必须在`import time`某个地方

```
def timestamp2epoch(str):
   x=[]
   for v in (str[0:4],str[4:6],str[6:8],str[8:10],str[10:12],str[12:14],0,0,0):
     x.append(int(v))
   return time.mktime(x) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-06T08:49:42.247

只需将问题分开，一种方法查找模式，另一种查找日期并删除内容

```
import os
import subprocess

def find_patterns():
    filenames = os.walk("/path/to/my/data/dir").next()[2]
    parsed_patterns = map(lambda file: "_".join(file.split("_")[1:-1]),filenames)
    unique_patterns = list(set(parsed_patterns))
    return unique_patterns

def delete_dates_after_past_five_days(unique_patterns):
    filenames = os.walk("/path/to/my/data/dir").next()[2]
    for pattern in unique_patterns:
        matched_files = filter(lambda file: pattern in file, filenames)
    sorted_files = sorted(matched_files) #Will sort by date
    if len(sorted_files) > 5:
        for file in sorted_files[:-5]:
            subprocess.call(["rm", os.path.join("/path/to/my/data/dir", file)])

unique_patterns = find_patterns()
delete_dates_from_past_five_days(unique_patterns) 
```

# javascript - 在 FileUpload 组件中选择文件时在页面上启用按钮

> ID：14724314
> 
> 赞同：4
> 
> 时间：2013-02-06T08:10:29.847
> 
> 标签：javascript, file-upload, asp.net-4.0

我`FileUpload`在我的 ASP.NET 4.0 页面上使用了一个组件，并且我还有一个按钮来开始实际上传文件。

现在，如果我可以`Upload`禁用该按钮，直到在`FileUpload`控件中选择了一个有效文件，那就太好了——但我似乎找不到任何方法来做到这一点。

我不是客户端脚本专家 - 但我想知道是否可以连接一些 Javascript“巫毒”来检测`FileUpload`组件中已选择文件，然后启用`Upload`页面上的按钮。

有人已经这样做了吗？如果是这样：你到底是怎么做到的？我被难住了，只见树木不见森林……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T08:29:33.060

FileUpload 具有`value`您可以使用的属性...

```
function ValidateUpload()
{
  var fuData = document.getElementById('fuUploadControl');

  if (fuData.value == '')
  {
       return false;
  }
  else
  {
       document.getElementById('btnSubmit').style.display = "";
  }
  return true;

} 
```

我从[CustomValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)运行这个函数（用于验证我的 FileUpload 控件）...
如果验证成功（例如选择了一个文件），按钮将显示（默认情况下它开始不可见）

ASP 代码：

```
<asp:FileUpload ID="fuUploadControl" runat="server" />
<asp:Button ID="btnSubmit" runat="server" Text="Upload" 
            OnClick="btnSubmit_Click" Style="display: none;" />
<asp:CustomValidator ID="CustomValidator1" runat="server"   
                     ControlToValidate="fuUploadControl"
                     ClientValidationFunction="ValidateUpload" /> 
```

# c - -c 选项在 GCC 中的作用

> ID：14724315
> 
> 赞同：14
> 
> 时间：2013-02-06T08:10:30.300
> 
> 标签：c, gcc, gdb

有谁知道`-c`flag的作用是`gcc`什么？

例如，有什么区别

```
gcc -c output0.c
vs gcc output0.c 
```

我知道第二个制作`.a`文件，但我不知道`.a`文件是什么。

另外，在`-o`做什么

```
gcc output0.o -o output0 
```

只是命名输出文件吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T08:15:52.473

> **-C**
> 
> 编译或汇编源文件，但不要链接。链接阶段根本没有完成。最终输出是每个源文件的目标文件形式。
> 
> 默认情况下，源文件的目标文件名是通过将后缀 .c、.i、.s 等替换为 .o 来创建的。无法识别的输入文件，不需要编译或汇编，将被忽略。

> **-o 文件**
> 
> 将输出放在文件文件中。这适用于任何类型的输出，无论是可执行文件、目标文件、汇编文件还是预处理的 C 代码。如果没有指定-o，默认是在a.out中放一个可执行文件，在source.o中source.suffix的目标文件，在source.s中它的汇编文件，在source.suffix.gch中的一个预编译头文件，以及标准输出上的所有预处理 C 源代码。

更多可以在[GCC 手册页中找到](http://linux.die.net/man/1/gcc)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T08:14:27.717

来自`man gcc`：

> ...
> 
> -c 编译或汇编源文件，但不链接。链接阶段根本没有完成。最终输出是每个源文件的目标文件形式。
> 
> 默认情况下，源文件的目标文件名是通过将后缀 .c、.i、.s 等替换为 .o 来创建的。
> 
> 无法识别的输入文件，不需要编译或汇编，将被忽略。
> 
> ...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T08:16:42.080

-c 将指示 gcc 仅将源文件编译为 .o（对象）文件，但不调用链接器。

对于包含许多 .c 文件的项目，通常首先将所有 .c 文件编译为 .o 文件，然后将所有内容与库链接在一起。

> **-C**
> 
> 编译或汇编源文件，但不要链接。链接阶段根本没有完成。最终输出是每个源文件的目标文件形式。
> 
> 默认情况下，源文件的目标文件名是通过将后缀 >.c、.i、.s 等替换为 .o 来创建的。
> 
> 无法识别的输入文件，不需要编译或汇编，将被忽略。

[资源](https://linux.die.net/man/1/gcc)

# javascript - 使用 ExtJS-4X 或 javascript 获取视口高度

> ID：14724320
> 
> 赞同：2
> 
> 时间：2013-02-06T08:10:53.187
> 
> 标签：javascript, extjs, extjs4, extjs4.1, extjs4.2

我想使用 ExtJs 或本机 javascript 获取视口的高度。

我怎样才能得到这个高度？我没有使用任何 extjs 视口容器。

如果使用 ExtJs 不可能，那么我怎样才能找到视口的确切高度？

谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T14:21:05.227

使用 window.innerHeight 解决了我的问题，并且 ExtJs 查找视口高度的方法如下 -

```
Ext.getBody().getViewSize().height 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T08:15:47.957

怎么样

```
window.innerWidth
window.innerHeight 
```

在 ExtJS 中你可以使用`getViewSize( )`

另一种简单的 JS 方法是

此函数将返回任何文档高度（跨浏览器），如果文档正文高度小于视口高度，则它将返回视口高度。因为我认为在您检查时您的文档是空的，这应该非常适合您。

```
function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
} 
```

# java - 使 ListView 项目单击以使用 JSON 数据创建新 Intent

> ID：14724322
> 
> 赞同：0
> 
> 时间：2013-02-06T08:10:58.773
> 
> 标签：java, android, json, listview, android-intent

我想为我的 ListView 中的每个项目创建一个新的意图。但首先我想看看数据 holder.title 是否可以通过日志读取。这不可以。我尝试使用 Toast，但在 makeText() 上也收到错误。

我的代码有什么问题？我不是java程序员，如果这是一个简单的问题，请原谅我。

此代码基于[如何解析 Sub JSONArray 并显示图像？](https://stackoverflow.com/questions/14701747/how-to-parse-sub-jsonarray-and-display-image)

我已经修改了一些代码，但我有足够的信心它不会影响这部分代码。

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        Data item = mObjects.get(position);
        View rowView = convertView;

        if (rowView == null) {
            LayoutInflater inflater = mActivity.getLayoutInflater();
            rowView = inflater.inflate(R.layout.item, parent, false);
            ViewHolder viewHolder = new ViewHolder();
            viewHolder.icon = (ImageView) rowView.findViewById(R.id.image);
            viewHolder.title = (TextView) rowView.findViewById(R.id.title);
            rowView.setTag(viewHolder);
        }

        ViewHolder holder = (ViewHolder) rowView.getTag();

        holder.title.setText(item.getmTitle());

        item.setOnClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

//Intent to be here. Now I am testing to see if data can be passed but it can't
                Log.e("log_tag","This is being clicked");
            }
        });

        holder.icon.setBackgroundResource(R.drawable.ic_launcher);
        holder.mTask = new DownloadImageTask(item.getmImageUrl(), holder.icon);
        if (!holder.mTask.isCancelled()) {
            holder.mTask.execute();
        }

        return rowView;
    } 
```

已编辑！我为上面的代码尝试了几个小时，但看起来毫无希望。所以我研究了 MainActivity 类。至少有一些东西出来了。当我单击列表项时，正在显示“正在单击”。但是我仍然无法在单击时显示任何 JSON 数据。我想知道我如何从这里做意图。

再次编辑。

在网上看到更多代码后，我更改了一些代码。而且还是卡住了。

```
mListView = (ListView) findViewById(android.R.id.list);
mAdapter = new Adapter(this, mSource);
mListView.setAdapter(mAdapter);

mListView.setOnItemClickListener(new OnItemClickListener() {

    //private Object title;
    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

        @SuppressWarnings("unchecked")
        HashMap<String, String> o = (HashMap<String, String>) mListView.getItemAtPosition(position);  
        //Selected item
        //String product = ((TextView) View).getText().toString();
        Toast.makeText(getApplicationContext(),o.get("title"), Toast.LENGTH_LONG).show();

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:55:07.367

请按照以下步骤操作：

**1** . 创建 getter 和 setter 方法的 bean 类。

**2** . 创建一个数组列表。

**3** . 将值存储到 bean 类中。

**4** . 将 bean 类对象添加到 arraylist。

**5** . 现在，单击列表视图项，使用 . 传递 bean 类对象`putExtra`。

走这条路。

**编辑：**

豆类：

```
 public class ActivitiesBean implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 1L;

public String title;
public String image;
........ 

public String getTitle() {
    return title;
}
public void setTitle(String title) {
    this.title = title;
}
public String getImage() {
    return image;
}
public void setImage(String image) {
    this.image = image;
}

..............

} 
```

Java类：

```
 ActivitiesBean bean;
ArrayList<Object> listActivities = new ArrayList<Object>();

............................

 public class FetchActivitesTask extends AsyncTask<Void, Void, Void> {

    int i =0;
    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
         pgb.setVisibility(View.VISIBLE);
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

         ............

                    Here your JSON code

            for (i = 0; i < jsonnodes.length(); i++) 
            {

                JSONObject jsonnode = jsonnodes.getJSONObject(i); 

                JSONObject jsonnodevalue = jsonnode.getJSONObject(node);

                bean = new ActivitiesBean();

                bean.title = jsonnodevalue.getString(title);
                bean.image = jsonnodevalue.getString(image_fid);

                                    .....................  

                listActivities.add(bean);

            }               
        }
        catch (JSONException e) {

            e.printStackTrace();
      }

        return null;
    }

    @Override
    public void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        pgb.setVisibility(View.GONE);
        displayAdapter();
    }
}

public void displayAdapter()
{
    adapter = new ActivityAdapter(this, listActivities);
    contests_listView.setAdapter(adapter);
    contests_listView.setOnItemClickListener(new OnItemClickListener() {

        //@Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                int position, long id) {

            bean = (ActivitiesBean) adapter.getItem(position);

            Intent in1 = new Intent(Activites_Activity.this, Activity_display.class);
            in1.putExtra("ActivityObject", bean);
            startActivity(in1);
        }

    });

} 
```

# opengl - 是否值得在代码中缓存 glsl 统一位置？

> ID：14724324
> 
> 赞同：7
> 
> 时间：2013-02-06T08:11:04.140
> 
> 标签：opengl, glsl

我希望能够通过着色器中的实际名称设置制服

```
myProgram.uniform3fv("uniformVector", 0.0f, 0.1f, 1.0f); 
```

我必须以某种形式的地图缓存位置吗？

```
std::map<std::string, unsigned int> // or unordered_map 
```

或者也许OpenGL（在桌面上）无论如何都会缓存这个，所以我不会有任何性能差异？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T09:11:45.870

OpenGL 规范定义了功能，而不是性能。所以没有办法知道任何特定的 OpenGL 实现将如何存储活动制服列表或`glGetUniformLocation`相对于`std::map`性能有多快。

所以真的，这取决于你。如果您想要一致的、*已知的*性能，请自己动手。如果您想抓住 OpenGL 实现的变幻莫测的机会，请随时查询。就个人而言，我会说沟名称和地点。这样您就可以获得最佳性能。

# php - 使用 PHP 缓存

> ID：14724325
> 
> 赞同：2
> 
> 时间：2013-02-06T08:11:06.587
> 
> 标签：php, caching

这个问题之前可能被问过，但我还不能决定我应该使用什么。我正在构建一个小型 API Wrapper，并且有一些方法可以使用我通过该方法获得的数据的一些缓存。

数据为 JSON 格式。因此，当我浏览时，我找到了一些存储这些数据的解决方案。其中之一是**APC**，它看起来非常简洁，更像是在客户端使用 localStorage。但是后来我发现这是一个没有预装 PHP 的扩展，并且对于最新版本的 PHP 有一些错误（开发人员认为它不稳定）。我也很难将它添加到 XAMPP，因此我可以在本地对其进行测试。

所以我忽略了它并考虑了其他选项，例如在服务器上创建文件。这似乎也是一个不错的主意，直到我发现当我创建一个文件夹时，`chmod`它`0755`不是很方便。我首先认为这是我做的事情，但后来我在这里读到一篇文章，说一些关于*Safe Mode*的内容，它不允许我使用`0777`模式创建文件夹。所以我一直在寻找一个解决方案，我发现使用 FTP 可以解决它。我尝试了 FTP 的东西，它工作得很好，只是我很难实现一种方法让连接保持打开状态，直到它超时，并且每次调用连接到 FTP 并创建的方法时不要覆盖连接文件夹。

如果我没记错的话，我听说的另一个解决方案是**Memcache**，但这似乎是一种开销。

所以我有点怀疑我应该用什么来缓存数据。如果有人有一些指示，将不胜感激:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T08:16:42.720

无论您做什么，都不要编写自己的缓存解决方案。能够做到这一点的人，不需要在 SO 上提出问题。

*   安装 APC。它将解决的问题远远多于它创造的问题。
*   使用 Memcache 和/或 Redis 缓存对象 - 会话、分数等。
*   使用 Varnish 在 Web 服务器前缓存 HTML。

我使用 APC、Redis、Memcache 和 Varnish 的组合处理每秒超过 10,000 个请求的应用程序。他们非常非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:52:36.420

我正在使用 Mac 进行开发，并使用以下内容从 php 创建文件夹：

```
$oldmask = umask(0);
chmod($structure, 0777);
umask($oldmask); 
```

如果你在 Windows 上可能是一些 Windows 设置......我没有太多的 Windows 经验。

如果您在创建文件夹时遇到问题，也可以对 MySQL 进行缓存。

尝试为需要缓存的结果创建一个 md5 哈希，并将其与结果和时间戳一起存储到数据库中的表 cacheTbl 中。

当您存储缓存添加到当前时间时，您需要缓存该数据；

接下来，当您需要这些数据时，您首先查看数据库中是否有您请求的有效缓存，如果是您从那里获取它，如果它不在缓存中，则生成它并将其存储为下一个请求。

它可以通过构建两个简单的函数来轻松实现：

```
SetCache($hash, $content, $seconds);

GetCache($hash); 
```

如果需要缓存方法结果，请在方法生成要缓存的数据后调用 SetCache 函数，并将 $hash 设置为方法名称之类的名称。

在您的方法之上，您检查 GetCache 是否有有效的缓存，如果有，您从那里获取结果并退出 thr 方法，或者如果没有缓存，您执行该方法的其余部分并存储缓存以供下一个请求。

您稍后可以添加一个 cronjob 来清理所有旧缓存。

如果您需要内存缓存，可以查看： http: [//memcached.org/](http://memcached.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-28T05:46:53.157

你可以试试这个，简单，[设置2个功能，搞定。](http://www.phpfastcache.com/) 首先，您从缓存中获取对象。如果它为 null，那么您执行查询，API 获取 JSON、XML 或您喜欢的任何内容，然后您将其设置回缓存，用 600 秒为 500、1000 干草 10,000 访问者等提供服务。

使用此缓存，您无需像 memcache 或 APC 一样访问您的 php.ini 或担心 root 权限来设置它。

```
<?php
    include("php_fast_cache.php");
    // try to get from Cache first.
    $html = phpFastCache::get("keyword,page");

    if($html == null) {
        $html = Render Your Page || Widget || "Hello World";
        phpFastCache::set("keyword,page",$html,600);
    }

    echo or return your $html;
?> 
```

# jquery - 打开多个手风琴标签

> ID：14724327
> 
> 赞同：0
> 
> 时间：2013-02-06T08:11:11.110
> 
> 标签：jquery, jquery-ui, css, accordion

我已经实现了一个手风琴内容选项卡。目前它允许一次打开一个菜单。我还需要同时打开其他选项卡。

这是我的代码

```
(function(jQuery){
     jQuery.fn.extend({  
         accordion: function() {       
            return this.each(function() {

                var $ul = $(this);

                if($ul.data('accordiated'))
                    return false;

                $.each($ul.find('ul, li>div'), function(){
                    $(this).data('accordiated', true);
                    $(this).hide();
                });

                $.each($ul.find('a'), function(){
                    $(this).click(function(e){
                        activate(this);
                        return void(0);
                    });
                });

                var active = (location.hash)?$(this).find('a[href=' + location.hash + ']')[0]:'';

                if(active){
                    activate(active, 'toggle');
                    $(active).parents().show();
                }

                function activate(el,effect){
                    $(el).parent('li').toggleClass('active').siblings().removeClass('active').children('ul, div').slideUp('fast');
                    $(el).siblings('ul, div').slideToggle("slow");((!effect)?'fast':null);
                }

            });
        } 
    }); 
        $('ul').accordion();
             $(".info").find("a").click(function(){
              var trid = $(this).parent().attr("idcust");                
              var trdata = $(this).parent().attr("custdata");
            // Hide all content divs and show only the one related to the click
             $("#"+trid).show().children().not(trdata).hide();
            $(trdata).toggle();
        });
})(jQuery); 
```

**[在这里演示](http://jsfiddle.net/RVJQN/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:31:39.627

首先，我想说 CSS 和 JS 中有很多垃圾代码。像这样写：

**JS**

```
$('.accordion a').click(function(){
    $('.accordion div').slideToggle("slow");;
}); 
```

**CSS**

```
.accordion div {  background: #fff;overflow:hidden;display:none;} 
```

检查这个[http://jsfiddle.net/RVJQN/1/](http://jsfiddle.net/RVJQN/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:35:26.400

Accordions 不支持多个打开的选项卡（没有要设置的 API 属性），请查看 - [http://docs.jquery.com/UI/Accordion](http://docs.jquery.com/UI/Accordion)

# python - 对象属性包含在 instatiaton 之前的值

> ID：14724332
> 
> 赞同：1
> 
> 时间：2013-02-06T08:11:34.637
> 
> 标签：python, django

在 Django 内部，我确实有：

```
class A(object):
    _attribute = [] 
```

当我在执行对一切的请求时创建对象时，`Django.runserver`一切正常。在这一步中，我填写`a = A()._attribute.extend(['string',])`.

当我第二次执行相同的请求时，我看到实例化对象之前

```
>>> print A._attribute
['string',] 
```

Memcached 已打开。但在我的理解中不缓存这些对象，因此不能负责

我过去从未见过这样的事情。谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T08:13:52.693

`_attribute`附加到整个类，因此所有实例都将具有相同的`_attribute`值。

为避免这种情况，请使用实例变量

```
class A(object):
    def __init__(self):
        self._attribute = [] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:14:32.250

您正在使用可变的类属性。`_attribute`不是实例的成员，而是类`A`本身的成员。当您使用`extend`时，只要 python 正在运行，您就会为所有实例更改该值。

# android - 如何用片段替换 tabhost、actvitygroup 和子活动

> ID：14724336
> 
> 赞同：1
> 
> 时间：2013-02-06T08:11:38.067
> 
> 标签：android, android-fragments, tabactivity, activitygroup

我已经使用 TabActivity 实现了一个应用程序。现在，我想从 TabActvity 更改为 Fragments，但在我的应用程序中，我需要显示 4 个选项卡，每个选项卡我想显示多个子活动，以前我创建了 TabActivity 并创建了 4 个 ActivityGroups，我需要从每个 ActivityGroup 显示多个子活动活动。现在，我怎样才能通过使用片段来实现这个场景。

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:15:17.803

查看[LINK](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)，它将向您展示将 TabActivity 转换为 FragmentActivity 的方式。

我希望它会帮助你。

谢谢。

# java - 蓝牙二串口传入连接

> ID：14724340
> 
> 赞同：0
> 
> 时间：2013-02-06T08:11:47.523
> 
> 标签：java, android, c++, bluetooth, serial-port

我的笔记本电脑有蓝牙。我可以分配一个传入端口，比如 6。我有一个侦听端口 6 的 PC 应用程序。然后我可以将我的 android 设备与它连接起来，我可以将数据从 android 发送到 PC。

现在在 PC 端，我可以将多个传入端口分配给蓝牙。我可以打开我的应用程序的多个实例，每个实例都连接到不同的端口。

问题出在android端？在 android 端，当我们连接时，我们无法指定要连接的端口，我们只需指定配对的计算机。所以，只有第一个 android 设备连接。下一个显示连接错误？

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:11:14.653

不要使用 COM 端口。呸！:-)

而是使用套接字或蓝牙 API，然后您可以接受到同一个蓝牙“服务器”的大量连接。例如我的图书馆[32feet.NET](http://32feet.codeplex.com/)。

参见例如[32feet.NET 文档——Bluetooth%20Server-side](http://32feet.codeplex.com/wikipage?title=Bluetooth%20Server-side)

然而。如果您的意思是一台客户端设备（例如此处的 Android）连接到一台服务器设备，则存在限制。对于 SPP 使用的 RFComm，从一台设备到同一个服务器应用程序只能有一个连接。要在两个设备之间建立两个连接，则需要运行两个 RFComm/SPP 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T22:17:58.397

问题是您的 android 设备作为*Client*连接。在蓝牙 RFComm 中，一个客户端只能建立一个连接。

要使您的 android 连接到多台 PC，您必须将其设为服务器。

看一下android的蓝牙聊天示例：[蓝牙聊天示例](http://jayxie.com/mirrors/android-sdk/resources/samples/BluetoothChat/index.html)

最后我想不出一种方法来同时允许两端的多个连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:47:09.963

@alanjmcf 谢谢。

[http://inthehand.com/forums/p/5488/13867.aspx](http://inthehand.com/forums/p/5488/13867.aspx)

使用 SdpBrowserDesktop 应用程序。

转到服务器选项卡。

选择串行端口。

点击收听按钮。

在 PC 上启动与 COM 端口一样多的服务器实例（我尝试了两个实例并有两个 COM 端口）

现在连接你的安卓应用。逐个。就是这样。

# ruby-on-rails - 使用设计 Ldap Authenticator gem 修改目录

> ID：14724342
> 
> 赞同：1
> 
> 时间：2013-02-06T08:11:54.403
> 
> 标签：ruby-on-rails, devise, ldap

是否可以使用 devise ldap gem 管理 ACL 和修改目录（创建条目/修改条目）。我可以成功地对用户进行身份验证，但还没有找到执行上述过程的任何方法。

# html - 设置动态创建的 HTML 输入的默认值（重置表单后显示的值）jQuery

> ID：14724344
> 
> 赞同：-1
> 
> 时间：2013-02-06T08:11:58.553
> 
> 标签：html, forms, input, default-value, reset

我有 jQuery 动态创建的输入，我为其设置了 init 值，并且我希望它保持该值作为默认值（将在重置表单后再次显示）。我四处寻找，但找不到解决方案。

为了清楚起见，在有人对我的问题进行评分后，这里的默认值不是存储在占位符中的值（当输入聚焦时会消失），它是真实的、可编辑的文本！

我找到了解决方案！重置表单时，Web 浏览器会将输入的“值”属性中的文本再次显示为默认文本。所以，如果我们创建一个新的输入元素，我们必须给它“值”属性。在 jQuery 中，我们应该使用 attr('value', newValue) 方法，而不是使用仅临时更改元素的可见值而不覆盖输入的 value 属性的方法 val()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:26:43.193

您可以尝试在创建元素时设置元素中的值。JSFiddle：http: [//jsfiddle.net/turiyag/UG7uw/6/](http://jsfiddle.net/turiyag/UG7uw/6/)

```
$("form").append('<input type="text" value="456" />');
$(":button").click(function(){
    $("form").reset();
}); 
```

**编辑：**

看到您的代码，我认为您需要仔细研究如何将事件附加到元素。此示例说明如何运行在“click”事件上运行的 Javascript 代码。请注意页面的 Javascript 如何位于 JSFiddle 的 Javascript 框中。[http://jsfiddle.net/turiyag/uUCGV/8/](http://jsfiddle.net/turiyag/uUCGV/8/)

此外，对于“空元素”，它们应该在标签末尾用“/>”关闭。例如：

```
<input type="text" value="foo" /> 
```

我会避免在分配了“id”的元素上使用克隆。clone() 还将复制 id 属性和初始值属性。创建新元素要干净得多。

此外，'$' 符号通常可以用来代替代码中的 'jQuery'。它可以减少打字。

示例中的代码会将初始值设置为“Input #1”、“Input #2”等。重置按钮会将表单重置为这些值。

event.preventDefault() 防止点击元素的默认表单提交动作。

这能回答问题吗？

# javascript - Javascript：延迟表单提交

> ID：14724345
> 
> 赞同：0
> 
> 时间：2013-02-06T08:12:02.187
> 
> 标签：javascript

我有几个 <select> 字段，我希望它们的父表单在其值更改时自动提交，但我希望有 1.5 秒的延迟，并在用户打开另一个选择时中止提交。

我试过这个：

```
var tmr;
var timerOn = false;

function submitSearchOptions() {
    $('#searchoptionsform').submit();
}

$('#searchoptionsform select').change(function() {
    if (!timerOn) {
        tmr = setTimeout(submitSearchOptions,1500);
        timerOn = true;
    }
});

$('#searchoptionsform select').click(function() {
    if (timerOn) {
        clearTimeout(tmr);
        timerOn = false;
    }
}); 
```

但它不起作用。在 select 中选择一个值也会触发 click 事件，该事件会停止计时器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:19:12.083

您可以跟踪哪个`select`启动了计时器并忽略`click`它是否在计时器启动的 50 毫秒内。

```
var tmr;
var timerSelect = null;
var timerStarted = null;

function submitSearchOptions() {
    $('#searchoptionsform').submit();
}

$('#searchoptionsform select').change(function() {
    if (!timerStarted) {
        tmr = setTimeout(submitSearchOptions,1500);
        timerStarted = new Date();
        timerSelect = this;
    }
});

$('#searchoptionsform select').click(function() {
    if (timerStarted) {
        if (timerSelect !== this || (new Date() - timerStarted) > 50) {
            clearTimeout(tmr);
            timerStarted = null;
            timerSelect = null;
        }
    }
}); 
```

# android - 在代码中将 android 蓝牙与 pc 配对

> ID：14724346
> 
> 赞同：1
> 
> 时间：2013-02-06T08:12:03.473
> 
> 标签：android, bluetooth

我阅读了有关将设备相互连接（他们说配对）的 Google 文档。在谷歌中，他们说如果两个设备具有相同的 UUID，他们可以使用

BluetoothAdapter.listenUsingRfcommWithServiceRecord(name, uuid) 方法连接和配对此

方法将两个具有相同 UUID 的蓝牙设备配对，但在我的情况下，我有一个 PC 服务器，它的 UUID 0001 是不同，我将它用于流式消息。
我的问题是我可以使用代码将我的 android 手机与 PC 配对吗？如果答案是肯定的，那么如何？
我感谢您的帮助。

# css - 是否可以隐藏一个div（包含关键字）作为查看页面源

> ID：14724351
> 
> 赞同：0
> 
> 时间：2013-02-06T08:12:30.287
> 
> 标签：css, html, hide, keyword

当有人查看我的网页的页面源时，我想隐藏包含我网站关键字的 div。我不想显示我的网站关键字。那可能吗？你有什么主意吗？

```
 <div>
      keyword,keyword,keyword,keyword,keyword,keyword,keyword,keyword,
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:19:05.727

如果您希望出现在搜索引擎上，我建议您在此处遵循 Google 的建议：http: [//static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//webmasters/docs/search-engine -优化入门指南.pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//webmasters/docs/search-engine-optimization-starter-guide.pdf)

他们实际上建议不要将关键字填充到您的页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:14:37.673

如果它在页面上，它就在源代码中。这就是浏览器的工作原理。您可以将其隐藏在屏幕上：

```
<div style="display:none">
      keyword,keyword,keyword,keyword,keyword,keyword,keyword,keyword,
</div> 
```

或者

```
<div style="position:absolute; left:-99999px;">
      keyword,keyword,keyword,keyword,keyword,keyword,keyword,keyword,
</div> 
```

不要对用户隐藏关键字。谷歌会杀了你。

# sql-server - 如何通过sql server 2005中的sql查询从主键列中删除标识属性

> ID：14724355
> 
> 赞同：0
> 
> 时间：2013-02-06T08:13:02.277
> 
> 标签：sql-server

我有一个表，它不应该在多个数据库的主键列上设置 Identity 属性。可能有人无意中从设计视图中设置了它的属性。

因此，我想编写一个一次性查询，它将检测并从表中删除该身份规范。

我已阅读所有搜索文章，但对创建新表、复制其元数据/数据和重命名等解决方案并不满意，因为该表非常关键，并且列对其有很多限制。

我也试过，设置`Identity_insert`属性`ON`，但它只是一次。当服务器再次连接时，它不允许我保存。

```
SET IDENTITY_INSERT <tableName> ON; 
```

我也不想通过`IDENTITY_INSERT ON`在将数据插入其中之前进行设置来更改我的后端程序。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:55:49.517

不幸的是，没有其他方法可以从表中删除 IDENTITY 属性，而无需先创建删除重新创建表。因此，您需要将数据存储在新表中，删除原始表，然后将临时表重命名为正确的名称。

或者

您可以在表中添加一个新列，然后将您的数据复制到这个新列中，从表中删除您的标识列，最后将您的新列设置为主键。

如何找到您的 IDENTITY 列...

> ```
> select object_name(object_id) table_name,name column_name 
> from sys.columns
> where is_identity = 1 
> ```

# android - OpenGL ES2：片段着色器中使用 Mali GPU 的多个纹理

> ID：14724356
> 
> 赞同：1
> 
> 时间：2013-02-06T08:13:07.477
> 
> 标签：android, opengl-es, textures, mali

我目前正在尝试让多个纹理在 android 上工作（使用一个片段着色器）。它在我的 Nexus 4 上运行良好，但在我测试过的所有三星设备上，它根本不显示矩形。问题似乎是在片段着色器代码中调用了两次 texture2d：

```
precision mediump float;                
uniform sampler2D uTexture;
uniform sampler2D refractTexture;       
varying vec2 vTexCoordinate;
varying vec2 vRefTexCoordinate;

void main() {
    vec2 scaleVec = vec2(0.05, 0.05);
    vec4 bumpTex = 2.0 * texture2D(refractTexture, vRefTexCoordinate) - 1.0;
    vec2 refCoords = vTexCoordinate.xy + bumpTex.xy * scaleVec;

    gl_FragColor = texture2D(uTexture, refCoords);
} 
```

`uTexture`在这个着色器中，我使用法线贴图 ( )扭曲纹理 ( `refractTexture`)。我已经尝试使用正确的（不是计算的）坐标，`gl_FragColor`一旦我删除`vec4 bumpTex = 2.0 * texture2D(refractTexture, vRefTexCoordinate) - 1.0;`它就会出现在设备上。

任何提示都会有所帮助。

这里要求的是我用来设置纹理的 Java 代码：

```
 mTextureUniformHandle = GLES20.glGetUniformLocation(mProgram,
            "uTexture");

    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);

    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureDataHandle);

    GLES20.glUniform1i(mTextureUniformHandle, 0);

    if (refractNormal && textureRefBuffer != null) {
        mTextureRefUniHandle = GLES20.glGetUniformLocation(mProgram,
                "refractTexture");

        GLES20.glActiveTexture(GLES20.GL_TEXTURE1);

        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureRefDataHandle);

        GLES20.glUniform1i(mTextureRefUniHandle, 1);

        mTextureRefCoordinateHandle = GLES20.glGetAttribLocation(mProgram,
                "aRefTexCoordinate");

        GLES20.glVertexAttribPointer(mTextureRefCoordinateHandle,
                mTextureCoordinateDataSize, GLES20.GL_FLOAT, false, 0,
                textureRefBuffer);
        GLES20.glEnableVertexAttribArray(mTextureRefCoordinateHandle);

    }

    mTextureCoordinateHandle = GLES20.glGetAttribLocation(mProgram,
            "aTexCoordinate");
    GLES20.glVertexAttribPointer(mTextureCoordinateHandle,
            mTextureCoordinateDataSize, GLES20.GL_FLOAT, false, 0,
            textureBuffer);
    GLES20.glEnableVertexAttribArray(mTextureCoordinateHandle); 
```

以及顶点着色器的C代码：

```
 uniform mat4 uMVPMatrix;
        attribute vec4 vPosition;
        attribute vec2 aTexCoordinate;
        attribute vec2 aRefTexCoordinate;
        varying vec2 vTexCoordinate;
        varying vec2 vRefTexCoordinate;

        void main() {         
            vTexCoordinate = aTexCoordinate;
            vRefTexCoordinate = aRefTexCoordinate;
            gl_Position =   uMVPMatrix*vPosition;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:59:13.940

正如我在 ARM 论坛上寻求帮助的建议，有人问我要一个示例项目。我大量剥离了我拥有的东西并对其进行了测试。令人惊讶的是，它在 S3 上没有问题，我对其进行了测试。我试图通过从我的原始项目中复制代码来找到问题，最后我最终将着色器从小项目复制到原始项目中，并且以某种方式完成了这项工作。我真的不知道究竟是什么原因造成的，但这是对我有用的着色器代码：

```
 precision mediump float;
        uniform vec4 vColor;
        uniform sampler2D uTexture;
        uniform sampler2D refractTexture;   
        varying vec2 vTexCoordinate;
        varying vec2 vRefTexCoordinate;                     

        void main() {   

            vec2 scaleVec = vec2(0.05, 0.05);
            vec4 bumpTex = 2.0 * texture2D(refractTexture, vRefTexCoordinate) - 1.0;
            vec2 refCoords = vTexCoordinate.xy + bumpTex.xy * scaleVec;     
            gl_FragColor = texture2D(uTexture, refCoords);

        } 
```

和顶点着色器：

```
 uniform mat4 uMVPMatrix;
        attribute vec4 vPosition;
        attribute vec2 aTexCoordinate;
        attribute vec2 aRefTexCoordinate;
        varying vec2 vTexCoordinate;
        varying vec2 vRefTexCoordinate;

        void main() {         
            vTexCoordinate = aTexCoordinate;
            vRefTexCoordinate = aRefTexCoordinate;
            gl_Position =   uMVPMatrix*vPosition;

        } 
```

# joomla - Joomla 站点或模块中的图表

> ID：14724361
> 
> 赞同：-1
> 
> 时间：2013-02-06T08:13:26.193
> 
> 标签：joomla, module, charts

我有一个 joomla 网站，我想知道是否可以将您的图表集成到文章或模块中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:27:09.557

如果您想在 joomla 中集成来自 fusionchart.com 的任何图表，您只需下载该软件包并将其与纯 php 集成。[您可以在这里](http://docs.joomla.org/Creating_a_Hello_World_Module_for_Joomla_1.5)简单地遵循 joomla 的模块结构。

在 joomla 中使用模块的优点是，您可以在不同的地方和页面上多次使用它。您也可以在文章中使用该模块。[更多](http://docs.joomla.org/How_do_you_put_a_module_inside_an_article?)_

希望这可以帮助你..

# php - 无法向设备发送 C2DM 消息

> ID：14724369
> 
> 赞同：0
> 
> 时间：2013-02-06T08:14:18.117
> 
> 标签：php, android, google-cloud-messaging

我是 android 新手，我正在尝试在我的应用程序中开发推送通知。

我已经阅读了很多帖子并且能够生成设备注册密钥和身份验证密钥。

但是当我尝试向设备发送推送通知消息时，我收到了以下消息。

```
<HTML>
<HEAD>
<TITLE>Unauthorized</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Unauthorized</H1>
<H2>Error 401</H2>
</BODY>
</HTML> 
```

以下是我用来发送消息的 php 代码：

```
function sendMessageToPhone($authCode, $deviceRegistrationId, $msgType, $messageText) {

$headers = array('Authorization: GoogleLogin auth=' . $authCode);
$data = array(
    'registration_id' => $deviceRegistrationId,
    'collapse_key' => $msgType,
    'data.message' => $messageText //TODO Add more params with just simple data instead           
);

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "https://android.apis.google.com/c2dm/send");
if ($headers)
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

$response = curl_exec($ch);

curl_close($ch); 

echo "<pre>";
print_r($response); die;

}

sendMessageToPhone($auth_token, $device_id , "UTF-8","hello"); 
```

我还启用了 emaid 的“Google Cloud Messaging for Android”服务，我曾使用它来生成身份验证令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:19:40.297

这是错误的方式，因为您尝试使用 G2DM。G2DM 已弃用。

这是 GCM 的很棒的教程。您可以在 30 分钟内设置推送通知。[http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

# vb.net - VB.NET 类成员默认公开

> ID：14724374
> 
> 赞同：6
> 
> 时间：2013-02-06T08:14:39.510
> 
> 标签：vb.net

根据[MSDN](http://msdn.microsoft.com/en-us/library/9dc6we3z.aspx)：

> 当您不需要限制对编程元素的访问时，公共访问是编程元素的正常级别。请注意，如果您未另行声明，则在接口、模块、类或结构中声明的元素的访问级别默认为 Public。

因此，如果我在 VB.NET 中声明一个类方法而不指定访问修饰符，则默认情况下它是公共的：

```
Sub DoSomething()

End Sub 
```

疯了吧！我希望成员默认是私有的，并且只有那些特别标记为公共的成员才能在课堂外可见。就像在 C# 中一样...如何修改这种行为？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T08:28:49.097

> 疯了吧！我希望成员默认为私有

正如 Fredrik 已经评论的那样，您应该始终提供显式访问修饰符。

> 如果您始终显式包含访问修饰符，则其他读者的代码会更加清晰。

我认为这是由于向下兼容性或开发人员根本不熟悉访问修饰符。

但你是对的，就像在 C# 中一样，我建议默认情况下将所有内容都设为私有。您可以在需要时将其公开。

*[声明上下文和默认访问级别 (VB.NET)](http://msdn.microsoft.com/en-us/library/ms235296%28v=VS.100%29.aspx)*

> 知道如何修改这种行为吗？

我认为不可能在 Visual Studio 的某处指定默认访问修饰符。您可以尝试创建此处建议的模板类（未测试）：

*[Visual C# 2010 Express：为新类指定默认访问修饰符？](https://stackoverflow.com/a/4975378/284240)*

# c++ - 添加约 10000 个键后 unordered_map 中的分段错误

> ID：14724380
> 
> 赞同：1
> 
> 时间：2013-02-06T08:15:01.890
> 
> 标签：c++, unordered-map, segmentation-fault

尝试插入 unordered_map 时，当 datact=10736 时发生分段错误（请参阅调用引发错误的注释行）。请参阅下面的尝试修复。

当 SIGSEGV 被抛出时，它指向我的第 764 行`hashtable_policy.h`

INPUT：column1=counts, column2=16-character strings 的数据文件

目的：通过将所有 1 替换不同序列的计数相加来聚类 16 个字符的序列。看到的第一个序列是“起源”，通过它可以识别它的所有 1 替换朋友。

PSEUDOCODE：对于文件中的每一行：

1.  读计数，读序列。

2.  如果序列 key_value 存在于哈希“位置”（类型 unordered_map）中，则添加当前计数；

3.  否则创建一个新的 key_value，让它指向这里的计数，并分配所有 1 替换序列也指向这个计数。

代码：

```
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>
#include <cmath>
#include <vector>
#include <unordered_map>
#include <map>

#include "matrix.h"

using namespace std;

int nuc2num(char currchar)
{   // returns 0,1,2,3 for A,C,T,G respectively
    int outnum;

    if (currchar=='A')
    {
        outnum=0;
    }
    else if (currchar=='C')
    {
        outnum=1;
    }
    else if (currchar=='T')
    {
        outnum=2;
    }
    else
    {
        outnum=3;
    }
    return outnum;
}

int main(int argc, char* argv[])
{
    //command line arguments
    //  arg1=filename, arg2=barcode sequence length, arg3=#mismatches permitted

    //input handling
    //  file format: column 1 | column 2
    //               counts   | sequence    [int | string]

    string filename;
    string funnelstring;

    // define lookup matrix; rows=ACTG, cols = ACTG without row element
    Matrix <char> sub_lookup(4,3);
    sub_lookup[0][0] = 'C';
    sub_lookup[0][1] = 'T';
    sub_lookup[0][2] = 'G';
    sub_lookup[1][0] = 'A';
    sub_lookup[1][1] = 'T';
    sub_lookup[1][2] = 'G';
    sub_lookup[2][0] = 'A';
    sub_lookup[2][1] = 'C';
    sub_lookup[2][2] = 'G';
    sub_lookup[3][0] = 'A';
    sub_lookup[3][1] = 'C';
    sub_lookup[3][2] = 'T';

    int L,k;

    int j=0;

    const int buffersize=10000;
    int currentsize=buffersize;

    int datact=0;
    int currchar;

    vector <unsigned int> ctarr(buffersize);
    vector <string> seqarr(buffersize);

    filename=argv[1];
    L=atoi(argv[2]);
    k=atoi(argv[3]);

    unsigned int sct;
    int substrlen;
    string sequence,textct;
    ifstream seqfile (filename.c_str());

    //map <string,unsigned int*> location;
    unordered_map <string,unsigned int*> location;

    if (seqfile.is_open())
    {
        getline(seqfile,textct,'\n');
        while (textct != "")
        {
            sct=atoi(textct.c_str());
            substrlen=textct.length();
            //cout << textct << endl;
            sequence=textct.substr(substrlen-L,L);
            //cout << sequence << endl;

            //is there an associated guy?
            if (location.find(sequence) != location.end()) //just asks whether this key has been assigned
            {   //there's a value in the region
                *location[sequence]+=sct;
            }
            else
            {   //no value in region, make a footprint
                ctarr[datact]=sct;
                seqarr[datact]=sequence;
                location[sequence]=&ctarr[datact]; //assign current key to point to data count

                //assign k substitution "funnel" region to point to this count as well
                for (j=0; j<L; j++)
                {
                    funnelstring=sequence;
                    currchar = nuc2num(sequence[j]);

                    if (datact==10736 && j==13)
                    {
                        cout << "here" << endl;
                        cout << sequence << endl;
                    }

                    for (k=0; k<3; k++)
                    {
                        funnelstring[j]=sub_lookup[currchar][k];

//                    if (datact==10736 && j==13)
//                    {
//                        cout << funnelstring << endl;
//                        cout << location.max_size() << " | " << location.size() << endl;
//                        string asdf;
//                        asdf="AAAAAAAAAAAAAAAA";
//                        location[asdf]=&ctarr[datact]; //still segfaults
//                    }

                        if (location.find(funnelstring) == location.end()) // asks whether this key has been assigned
                        {   //this region is not assigned to another funnel
                            location[funnelstring]=&ctarr[datact]; //LINE THAT CAUSES SIGSEGV
                        }
                    }
                }
                datact++;
                cout << datact << endl;
                if (datact>=currentsize)
                {
                    ctarr.resize(currentsize+buffersize);
                    seqarr.resize(currentsize+buffersize);
                    currentsize+=buffersize;
                }
            }

            getline(seqfile,textct,'\n');
         }
        seqfile.close();
    } 
```

探索。

1.  添加什么键无关紧要，何时`datact==10736`和`j=13`，添加到 (unordered_map) 位置的任何键都会导致 SIGSEGV。
2.  有问题的代码行（由上面的注释标记）被多次调用，并且运行正确。
3.  将 unordered_map 交换为 map 会导致相同的事件，但 datact 的计数不同（更高）。仍然很低（在`datact`==16-35 千之间）。
4.  据我所知，几乎完全重写此代码，但随机生成的 16 个字符序列可以完美地工作（数据集没有段错误，最高 200,000，没有测试更高）。
5.  在 (4) 中的代码中，似乎在 10000 左右有一次重新散列，这可能是相关的，也可能是巧合。

如果需要，我可以发布读取的数据文件。

**编辑：解决** 而不是`unordered_map <string,unsigned int*> location`，替换为`unordered_map <string,unsigned int> location`（value_type 是 int 而不是 int*）。现在 value_type 将索引保存在 ctarr[] 中。运行良好。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T14:41:18.630

当`vector`您调用`vector::resize()`. 这是因为可能必须移动整个数据才能找到适合新大小的连续内存块。换句话说：一旦你调用`resize`，你所有的`location`数据突然变成无用的垃圾。

可能的解决方案：

*   让我们`location`将所需元素的索引存储`ctarr`为其值而不是指针。（这肯定不会改变程序的语义。）
*   让我们`location`存储实际`unsigned int` 值而不是指针。根据您的程序逻辑以及您更改和访问此数据的方式，这可能不是您想要的。

另请注意，虽然 segfault 发生在 中，但此错误与（或）`hashtable_policy.h`的实现无关- 不阅读参考完全是您的错 ;-) ：[http ://www.cplusplus.com/reference/](http://www.cplusplus.com/reference/vector/vector/resize/)[矢量/矢量/调整大小/](http://www.cplusplus.com/reference/vector/vector/resize/)（“迭代器有效性”部分）`unordered_map``vector``vector::resize()`

* * *

我注意到您的代码的另一件事是您`operator[]`用于访问您的`vector`元素。这将禁用越界检查。如果我在我的代码中遇到像你这样的错误（很难追溯，因为它发生在远离我的错误代码的某个地方），我的第一个行动方案将是交换`operator[]`（`vector::at()`实际上，我总是开始`at()`并且只有在我可以证明的情况下才切换毫无疑问，边界检查是这个特定目的的性能瓶颈）。这对您的问题没有帮助，但通常对发现错误很有帮助。

# php - 将 3 个数组合并为一个 foreach 循环

> ID：14724383
> 
> 赞同：0
> 
> 时间：2013-02-06T08:15:16.430
> 
> 标签：php

当将 2 个数组组合成一个 foreach 循环时，我尝试成功..

```
<?php
//var
$phone_prefix_array = $_POST['phone_prefix']; //prefix eg. 60 (for country code)
$phone_num_array    = $_POST['phone'];
$c_name_array       = $_POST['customer_name'];

foreach (array_combine($phone_prefix_array, $phone_num_array) as $phone_prefix => $phone_num) { //combine prefix array and phone number array
    $phone_var = $phone_prefix . $phone_num;
    $phone     = '6' . $phone_var;

    if ($phone_prefix == true && $phone_num == true) { //filter if no prefix number dont show

        echo $phone;
        //customer_name_here

    } else {
  }

}
?> 
```

结果应该是这样的：

```
60125487541 Jake
60355485541 Kane
60315488745 Ray
63222522125 Josh 
```

但现在我不确定如何将另一个数组组合`$c_name_array`到 foreach lopp

PHP版本：5.2.17

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:25:39.553

`array_combine`对于您的情况来说这是一个糟糕的解决方法，如果第一个数组中的任何值都不是有效的键（即不是 int 或 string），则将不起作用

PHP 5.3+ 有一个[`MultipleIterator`](http://de2.php.net/manual/en/class.multipleiterator.php)：

```
$iterator = new MultipleIterator();
$iterator->attachIterator(new ArrayIterator($phone_prefix_array));
$iterator->attachIterator(new ArrayIterator($phone_num_array));
foreach ($iterator as $current) {
    $phone_prefix = $current[0];
    $phone_num = $current[1];
    // ...
} 
```

自 PHP 5.4 起，您可以更简洁地编写循环：

```
foreach ($iterator as list($phone_prefix, $phone_num)) {
    // ...
} 
```

# c# - 将名为“其他”的项目保留在我的订购列表底部

> ID：14724385
> 
> 赞同：2
> 
> 时间：2013-02-06T08:15:23.653
> 
> 标签：c#, asp.net, asp.net-mvc

我有一个这样的 SelectListItems 列表：

```
List<SelectListItem> test = new List<SelectListItem>
{
    new SelectListItem { Text="aaa", Value ="1"},
    new SelectListItem { Text="ttt", Value="2"},
    new SelectListItem { Text="bbb", Value = "3"},
    new SelectListItem { Text="other", Value = "4"}
}.OrderBy(x => x.Text).ToList(); 
```

上面的代码返回这样的有序列表：

*   啊啊啊
*   bbb
*   其他
*   ttt

我想订购我的清单，但将名为“其他”的项目保留在清单底部。

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:28:10.720

也许这会奏效

```
List<SelectListItem> test = new List<SelectListItem>
{
    new SelectListItem { Text="aaa", Value ="1"},
    new SelectListItem { Text="ttt", Value="2"},
    new SelectListItem { Text="bbb", Value = "3"},
    new SelectListItem { Text="other", Value = "4"}
}.OrderBy(x => x.Text == "other").ThenBy(x => x.Text).ToList(); 
```

![在此处输入图像描述](../Images/3c08825f7f1b5d02b770c2c803c60345.png)

# keyboard - UITableViewController 覆盖键盘出现时的滚动行为

> ID：14724387
> 
> 赞同：2
> 
> 时间：2013-02-06T08:15:34.717
> 
> 标签：keyboard, scroll, overriding, uitextview, uitableview

在一个 UITableViewController 中，当键盘出现时的默认行为是像下面这样滚动键盘上方的编辑文本字段，当您需要连续编辑多个文本字段时，这真的很烦人（在这种情况下，在登录后输入密码信息）。

（老鼠！不会让我发布图像 - 但这会显示一个用户名文本字段单元格自动滚动到键盘上方，下一个密码输入字段隐藏在键盘下方）

相反，我希望它表现得像 Apple 自己的 Settings.app 并向上滚动，以便下一个文本字段也可见并准备好进行以下编辑，如下所示：

（Apple 自己的 Settings.app 屏幕截图会显示正在编辑的相同用户名字段单元格，自动向上滚动，因此下面的密码字段也会显示 - 您可以自己尝试）。

如何覆盖 UITableViewController 以达到相同的效果，即将文本字段滚动到比默认值高一个文本单元格高度？ViewWillAppear 中的一些修改可能吗？

# php - 试图让我的脚本将电子邮件发送到文本区域中的指定地址

> ID：14724388
> 
> 赞同：0
> 
> 时间：2013-02-06T08:15:35.563
> 
> 标签：php, email, textarea

我正在尝试创建一个非常简单的邮件表单。这是我到目前为止所拥有的：

```
<html>
    <h2>Email Verzenden</h2>
        <script language = "Javascript">
        function explodeArray(emailID,delimiter) {
            tempArray=new Array(1);
            var Count=0;
            var tempString=new String(emailID);

            while (tempString.indexOf(delimiter)>0) {
                tempArray[Count]=tempString.substr(0,tempString.indexOf(delimiter));
                tempString=tempString.substr(tempString.indexOf(delimiter)+1,tempString.length-tempString.indexOf(delimiter)+1);
                Count=Count+1
                }

            tempArray[Count]=tempString.replace("\r","");
            return tempArray;
        } 

          function checkEmail(hallo) {
            if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(hallo)){
            return true;
            }
            return false;
          }
          function validate(){
            var emailID=document.form.email;
            var delimiter="\n";
            var emailArray=explodeArray(emailID.value,delimiter);
            var textID=document.form.text;
            var length = emailArray.length,
            element = null;
            for (var i = 0; i < length; i++) {
                emailVar = emailArray[i];

                if (emailVar==null){
                alert("Email-adres bestaat niet")
                emailID.focus()
                return false
                }               
                if (emailVar==""){
                alert("Email-adres veld is leeg")
                emailID.focus()
                return false
                }
                if (checkEmail(emailVar)==false){
                emailVar.value=""
                alert("Ongeldig E-mail adres");
                emailVar.focus()
                return false
                }
            }   
                if ((textID.value==null)||(textID.value==""))
                {
                alert("E-mail textveld is leeg")
                textID.focus()
                return false
                }
            return true
          }
        </script>
        <form name="form" method="post" onSubmit="return validate()">
        <pre>
            Vul hier de/het E-mail adres(sen) in
            <textarea name="email" rows="5" cols="50"></textarea><br>
            Typ hier de E-mail
            <textarea name="text" rows="5" cols="50"></textarea><br>
                        <input type="submit" name="Submit" value="Submit">
        </pre>
</form>
</html> 
```

如您所见，有 2 个文本区域。在上面的一个中，您应该在彼此*下方*写下电子邮件地址，而在下面的一个中，您应该编写实际的电子邮件。我已经得到了我的脚本来检查电子邮件地址是否有效，以及实际的电子邮件是否真的有任何输入等等，但我不知道如何实现任何 PHP 代码以便将电子邮件实际发送给所有人在顶部文本区域中填写的地址。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:20:17.863

```
$emails = explode("\n", $_POST['email']);
if (!empty($emails)) {
    foreach($emails as $email) {
        mail($email, 'My Subject', $_POST['text']);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:28:29.240

```
<form method="post" action="yourscript.php" onsubmit="return validate()">
your textareas here
</form> 
```

制作 yourscript.php。

```
<?
if (!empty($_POST) && isset($_POST['email') && isset($_POST['text'])) {
 $emails = explode("\n", $_POST['email']);

 foreach($emails as $email) {
  if (filter_var($email, FILTER_VALIDATE_EMAIL)) { 
    mail($email, 'Subject', $_POST['text']);
  }
 }
}
?> 
```

# c++ - 对象的内存分配

> ID：14724390
> 
> 赞同：7
> 
> 时间：2013-02-06T08:15:46.510
> 
> 标签：c++, variables, heap-memory, stack-memory

当我们在 c++ 中像`int x`在函数中一样实例化一个变量时（即 x 是一个局部变量），它被分配在进程的堆栈顶部。但是如果我们这样做`int *x= new int`，空间是在堆中提供的。

所以，我的问题是：

1.  不同类的对象（由 c++ 提供的类或用户定义的类）呢？他们的对象在哪里实例化？例如：让 Employee 是一个类，我们声明`Employee emp;`. `emp`堆栈或堆中的空间在哪里？

2.  如果声明`int a[4]`在函数内，是否所有四个单元格都`a`在堆栈上获得空间？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T08:19:30.670

所有局部变量，无论是来自类的内置类型还是数组，都在堆栈上。所有动态分配都在堆上。

当然，像`static`局部变量这样的修饰符会使变量被放在其他地方，所以它在函数调用之间被保留。

此外，为了进一步混淆您，当您创建一个局部指针变量并使其指向动态分配的对象时，例如

```
Class* a = new Class; 
```

实际变量`a`在堆栈上，但它指向的内存在堆上。

* * *

附录：C++ 规范实际上并没有提到任何关于堆栈或堆的内容，只提到了不同类型变量的行为。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T08:18:14.153

它与普通类型完全相同。

```
Class a; //stack. Usage: a.somethingInsideOfTheObject
Class *a = new Class(); //heap. Usage: a->somethingInsideOfTheObject 
```

请注意，如果类本身在堆上分配某些东西，则该部分将始终在堆上，例如：

```
class MyClass
{
public:
    MyClass()
    {
        a = new int();
    }
private:
    int * a;
};

void foo()
{
    MyClass bar;
} 
```

在这种情况下，`bar`变量将在堆栈上分配，但`a`它的内部将在堆上分配。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T08:19:38.880

1.  这取决于。如果`Employee`有成员，仅在堆栈上分配，那么整个对象就是。但是，`Employee`可能有指针成员，并且`Employee`的构造函数可以在堆上为它们分配内存。然后一些成员在堆上，一些在堆栈上。

2.  是的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T08:21:14.373

用户定义的类（和类型）与内置类型没有什么不同。所以

```
Employee emp; // allocated in stack
Employee* emp = new Employee(); // allocated in heap 
```

至于你的第二个问题，本地数组是在堆栈上分配的

```
Employee emp[4]; // 4 instances on stack 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T08:23:48.497

通常，如果编译器在编译时知道它（即局部变量），它就在堆栈上。
如果编译器在编译时不知道它（即通过 等动态分配`new`）`malloc`，它就在堆上。

这个帖子有详细解释：[global-memory-management-in-c-in-stack-or-heap](https://stackoverflow.com/questions/1169858/global-memory-management-in-c-in-stack-or-heap)

# java - 模态对话框位于 Opensuse 其他窗口的后面

> ID：14724396
> 
> 赞同：2
> 
> 时间：2013-02-06T08:16:08.037
> 
> 标签：java, swt, modal-dialog, opensuse

在我的应用程序中，有 java SWT 编写的对话框屏幕。当打开一个模态对话框（警告/错误/文件对话框等）时，点击父屏幕后不能停留在父屏幕顶部，或者在主屏幕后面打开。该对话框只能通过按 ALT+tab 来打开。此问题发生在 Opensuse 11.04 上。它不会在 Windows 上发生。

Main 和 ShellExample 类用于测试问题。当您在打开的 shell 中按下“打开模式对话框”按钮时，FileDialog 会出现。MessageDialog 在顶部打开，但是当单击外壳时，它会返回。

这是主要课程；

```
public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        Display display = new Display();
        final Shell shell = new Shell(display);

        shell.setLocation(0,0);
        shell.setSize(500, 500);

        shell.setLayout(new GridLayout());
        FormToolkit  toolkit = new FormToolkit(shell.getDisplay());

        Button okButton = toolkit.createButton(shell, "  Open Shell  ", SWT.NONE);

        okButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                ShellExample mainDialog = new ShellExample(shell);
                mainDialog.open();
                }
          });

        shell.open();

        while (!shell.isDisposed()) {
          if (!display.readAndDispatch()) {
            display.sleep();
          }
        }
        display.dispose();

    }
} 
```

这是 ShellExample 类；

```
public class ShellExample extends Dialog {

    private Shell shell;
    public ShellExample(Shell parent) {
        super(parent, SWT.NO_TRIM | SWT.PRIMARY_MODAL);
        // TODO Auto-generated constructor stub
    }

    public Object open() {

        // TODO Auto-generated method stub
        shell = new Shell(getParent(), getStyle());
        createContents();

        shell.open();
        shell.layout();

        Display display = getParent().getDisplay();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }   
        return null;

    }

    private void createContents() {
        // TODO Auto-generated method stub

        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        shell.setSize(ge.getMaximumWindowBounds().width,ge.getMaximumWindowBounds().height);

        shell.setText(getText());
        shell.setLayout(new FillLayout());

        shell.setLayout(new GridLayout());
        FormToolkit  toolkit = new FormToolkit(shell.getDisplay());

        Button okButton = toolkit.createButton(shell, " open modal dialog ", SWT.NONE);

        okButton.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                FileDialog fd = new FileDialog(shell, SWT.SAVE);
                fd.setText("file dialog");
                fd.open();
             // MessageDialog.open(MessageDialog.WARNING  , shell, "warning_title", "warning_message", SWT.APPLICATION_MODAL);
            }
          });

    }
} 
```

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T04:44:07.993

在 Linux 中，由窗口管理器（Gnome、KDE、XFCE、Enlightenment 等）来实现此行为。我知道几个 Linux 窗口管理器的特殊性启示和平铺窗口管理器不支持模式窗口。要确定您尝试做的事情是否可行，您应该查看您正在使用的窗口管理器的文档，看看它是否支持它。这可以通过查看 NET_WM 标志找到，您可能正在寻找的是 _NET_WM_STATE_MODAL 一些关于此的文档可以在免费桌面标准网站上找到，撰写本文时的最新规范是[http://standards.freedesktop。 org/wm-spec/wm-spec-1.5.html](http://standards.freedesktop.org/wm-spec/wm-spec-1.5.html)

# c# - 使用 Noda Time，如何使用 LocalDate 和 LocalTime 创建 LocalDateTime

> ID：14724399
> 
> 赞同：9
> 
> 时间：2013-02-06T08:16:12.860
> 
> 标签：c#, .net, datetime, nodatime

我有一个 LocalDate 和一个 LocalTime 并且想简单地从它们创建一个 LocalDateTime 结构。我想到了以下扩展方法，我认为它是最快的，但由于一个模糊的原因，当前版本的 API 中不存在 localTime.TickOfMillisecond 字段。所以它不起作用。

```
 public static LocalDateTime At(this LocalDate localDate, LocalTime localTime) {
        return new LocalDateTime(localDate.Year, localDate.Month, localDate.Day, localTime.Hour, localTime.Minute, localTime.Second, localTime.Millisecond, localTime.TickOfMillisecond);
    } 
```

那么，我是否被困在使用的同时：

```
 public static LocalDateTime At(this LocalDate localDate, LocalTime localTime) {
        return localDate.AtMidnight().PlusTicks(localTime.TickOfDay);
    } 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T16:49:09.223

它比您目前获得它的方式要容易得多 - 只需使用[`+`操作符](http://noda-time.googlecode.com/hg-history/1.0.x/docs/api/html/M_NodaTime_LocalDate_op_Addition.htm)：

```
LocalDate date = ...;
LocalTime time = ...;
LocalDateTime dateTime = date + time; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-18T07:32:42.573

有一种方法可以将 LocalDate 和 LocalTime 结合起来形成 LocalDateTime

```
LocalDate date = ...;
LocalTime time = ...;
LocalDateTime dateTime=date.atTime(time); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T01:49:11.847

好吧，我不确定为什么它不在 API 中。也许 Jon Skeet 可以回答这个问题。

我认为您在第二个示例中的处理方式没有任何问题，但您可以这样计算`tickOfMillisecond`：

```
public static LocalDateTime At(this LocalDate localDate, LocalTime localTime)
{
    var tickOfMillisecond = localTime.TickOfSecond - localTime.Millisecond * 10000;
    return new LocalDateTime(localDate.Year, localDate.Month, localDate.Day, localTime.Hour, localTime.Minute, localTime.Second, localTime.Millisecond, tickOfMillisecond);
} 
```

就个人而言，我认为应该有一个构造函数，`LocalDateTime`以便您可以这样做：

```
var ldt = new LocalDateTime(localDate, localTime); 
```

另一件事-也许您的扩展方法应该验证日期和时间都在同一个日历系统中，然后将其传递给结果？除了 ISO，我从未使用过任何日历，所以我不确定。

# java - SmartGWT 按钮监听器

> ID：14724400
> 
> 赞同：0
> 
> 时间：2013-02-06T08:16:13.800
> 
> 标签：java, smartgwt

我想将处理程序或侦听器添加到按钮，每次我按下键盘上的键时都会响应，即使它没有专注于它。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:41:16.683

```
import com.google.gwt.user.client.Event;
import com.google.gwt.user.client.Event.NativePreviewEvent;
import com.google.gwt.user.client.Event.NativePreviewHandler;

Event.addNativePreviewHandler(new NativePreviewHandler() {

   @Override
   public void onPreviewNativeEvent(NativePreviewEvent event) {
      if (event.getNativeEvent().getKeyCode() == KeyCodes.KEY_DELETE) { //needs an int code
         //fire an event to your button or call your method

         event.getNativeEvent().stopPropagation(); //optional
         event.getNativeEvent().preventDefault(); //optional
      }
   }
}); 
```

我在我的 onModuleLoad() 方法中使用这样的代码来捕获按键事件并将其隐藏在浏览器中。您还可以使用

```
import com.google.gwt.user.client.Element;

Element as = (Element) Element.as(event.getNativeEvent().getEventTarget());
as.getTagName(); 
```

检查它来自哪里（例如标签名称是“input”，“textarea”），并根据它进行事件处理。

# ios - iPhone - 某个区域的动画

> ID：14724403
> 
> 赞同：1
> 
> 时间：2013-02-06T08:16:16.433
> 
> 标签：ios, uiview, uianimation

在我的项目中，我必须创建某种特定的动画。这个想法是我必须移动两个 UILabel，它们都应该下降，但最初一个在另一个之上。最初我还有一个矩形区域，底部 UILabel 位于其中，当动画开始时，它应该看起来像两个 UILabel 都在某种旋转轮上，当它下降时，底部的消失（因为它再也不能通过那个矩形窗口看到了），顶部的窗口取而代之。

我试图通过定时 UILabel 的淡入和淡出来达到这种效果，但这看起来真的很糟糕。我想解决它的唯一方法是为矩形周围的区域设置动画，但只在该区域显示动画。你能给我一些建议吗？

这是一张照片：

![这是一张照片：](../Images/9b75c1ec46b6afbdc0c59df19c5f0b16.png)

这是一些代码，我试图这样做以实现这一点：

```
[UIView animateWithDuration:0.3 animations:^{
encouragementLabel.alpha = 1.0;
encouragementLabel.center = CGPointMake(encouragementLabel.center.x,encouragementLabel.center.y+40);}];

[UIView animateWithDuration:0.3 animations:^{
answer.alpha = 0;
answer.center = CGPointMake(answer.center.x, answer.center.y+40);}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:24:02.930

尝试将标签添加为矩形视图的子视图。确保矩形视图的`clipsToBounds`属性或`layer.masksToBounds`设置为 YES，这将隐藏矩形边界之外的任何子视图。现在，当您为标签设置动画时，它们会在离开矩形后自动隐藏，并在进入矩形时出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T12:31:04.127

你可以简单地试试这个......

```
[UIView animateWithDuration:0.3 animations:^{
       encouragementLabel.alpha = 1.0;
       encouragementLabel.center = 
           CGPointMake(encouragementLabel.center.x,encouragementLabel.center.y+40);
} completion:^(BOOL finished) {
       [UIView animateWithDuration:0.3 animations:^{
       answer.alpha = 0;
       answer.center = CGPointMake(answer.center.x, answer.center.y+40);}];
}]; 
```

# jquery - 站点计数器图像 - 如何将数字放入其中

> ID：14724406
> 
> 赞同：1
> 
> 时间：2013-02-06T08:16:33.067
> 
> 标签：jquery, html, css, image

![在此处输入图像描述](../Images/a6b992c205de98874d80dfbc63fc7f05.png)

我有上面的图像，我将用作站点计数器。我现在需要得到白色数字来坐在上面，我可以用 Jquery 增加。

我可以很容易地在上面放一个数字并用 JQUERY 增加它，但我只是不确定如何让数字正确间隔。例如：前 3 位距离与第四位不同。

有没有人有关于如何获得一个数字的建议——比如 100 万（1000000）到这个后面的站点，所以它可以通过 JQUERY 增加？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:44:06.617

将值放入 html 无序列表并应用适当的 css 属性以获取图像上方的值。之后使用 jquery 增加第 3 和第 6 li 元素的 margin-right 以正确对齐元素。使用 jquery nth 子属性来改变样式：

```
 $('ul li:nth-child(3n)').addClass('extra-margin-class') 
```

演示：http: [//jsfiddle.net/gVVAV/4/](http://jsfiddle.net/gVVAV/4/)

> 使用您的图像更新了演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:45:02.640

将您的每个号码包装到`<span>`并给出`float:right`：

```
span
{
    padding-left: 3px;
    float: right;
} 
```

最后是 jQuery：

```
$('span').each(function(index){
    if((index+1) % 3 == 0 && index != 0) 
        $(this).css('padding-left', '20px');
}); 
```

[jsfiddle 示例](http://jsfiddle.net/5M7n6/3/)

请记住：您必须以其他方式传递您的号码。

# ios - iOS 中 UITableViewCell 的页脚文本

> ID：14724415
> 
> 赞同：2
> 
> 时间：2013-02-06T08:16:54.397
> 
> 标签：ios, cocoa-touch, uitableview

我想做像下面的图片。

![在此处输入图像描述](../Images/7525380178561d2e1b6437ceecef4611.png)

我该怎么做才能这样使用？

是下面这个方法吗？

```
- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T08:18:45.857

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {
    UIView *footer = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 540, 10)];
    footer.backgroundColor = [UIColor clearColor];

    UILabel *lbl = [[UILabel alloc]initWithFrame:footer.frame];
    lbl.backgroundColor = [UIColor clearColor];
    lbl.text = @"Your Text";
    lbl.textAlignment = NSTextAlignmentCenter;
    [footer addSubview:lbl];

    return footer;
}

- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
    return 10.0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-04T03:15:48.637

我宁愿把它放进去，`viewDidLoad()`否则它会产生一种我不喜欢的浮动效果。这是我的快速解决方案

```
 let footerView = UIView(frame:CGRectMake(0,0,self.view.frame.size.width,30))
    footerView.backgroundColor = UIColor.clearColor()
    let footerLabel = UILabel(frame: footerView.frame)
    footerLabel.textColor = UIColor.flatGrayColor()
    footerLabel.textAlignment = NSTextAlignment.Center
    footerView.addSubview(footerLabel)
    footerLabel.text="\(self.items.count) Items";
    self.tableView.tableFooterView=footerView 
```

# java - Java线程生命周期

> ID：14724417
> 
> 赞同：1
> 
> 时间：2013-02-06T08:16:55.810
> 
> 标签：java, multithreading

Java 执行器有一个线程池。如果我有固定长度的池（例如 8 个）。如果应用程序不终止，这 8 个线程是否会永远存在？如果部分代码抛出异常，池中的线程会死吗？

另一方面，如果我想终止线程，如何终止线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T08:21:54.030

是的，只要`ExecutorService`存在，他们就会永远活着。您可以通过调用来关闭它们`ExecutorService.shutdown()`。至于你问题的另一部分，[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)解释了这一切：

> 如果任何线程在关闭之前的执行过程中由于失败而终止，如果需要执行后续任务，新的线程将取代它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T08:28:35.113

简而言之，线程具有以下生命周期阶段：

1.  `Thread myThread = new Thread();`- 创建线程。它还没有运行。
2.  `myThread.start()`- 现在线程已启动并`run()`执行其方法。
3.  当`run()`方法终止时，线程退出。一旦线程终止，它就不能再次启动。

简单线程池通常会启动 N 个线程，这些线程通过`wait()`在其`run()`. 提交任务时，线程池的调度程序通过将其入队并调用线程的方式将其提供给其中一个线程，`notify()`以便`wait()`退出并开始执行任务。完成后，线程返回等待状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T12:54:55.617

**查询一：**

> 如果我有固定长度的池（例如 8 个）。如果应用程序不终止，这 8 个线程是否会永远存在？如果部分代码抛出异常，池中的线程会死吗？

我假设您在谈论固定线程池。请参阅以下中的[newFixedThreadPool](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool-int-) API `Executors`：

```
 public static ExecutorService newFixedThreadPool(int nThreads) 
```

> 创建一个线程池，该线程池重用在共享无界队列上运行的固定数量的线程。在任何时候，最多 nThreads 个线程将是活动的处理任务。如果在所有线程都处于活动状态时提交了其他任务，它们将在队列中等待，直到有线程可用。
> 
> ***如果任何线程在关闭之前的执行过程中由于失败而终止，如果需要执行后续任务，新的线程将取代它。***
> 
> ***池中的线程将一直存在，直到显式关闭。***

**查询 2：**

> 如果我想终止线程，如何终止线程？

看看相关的 SE 问题：

[ExecutorService 的 shutdown() 不会等到所有线程都完成](https://stackoverflow.com/questions/36376179/executorservices-shutdown-doesnt-wait-until-all-threads-will-be-finished/36434278#36434278)

# git - Azure 网站的权限问题？

> ID：14724418
> 
> 赞同：2
> 
> 时间：2013-02-06T08:16:58.507
> 
> 标签：git, azure, upload, permissions, ftp

有人见过 Azure 网站的权限问题吗？在最近的 Git 部署（来自之前部署过多次的用户）我的网站在每个页面上只有 500 秒后，跟踪显示访问被拒绝问题。

通过 git 部署产生：

远程：收到新的部署。远程：更新分支“主”。远程：....远程：更新子模块。远程：为提交 id '1d9b57677f' 准备部署。远程：准备部署文件。remote：指定的网络名称不再可用。远程：远程：错误 - 更改已提交到远程存储库，但您的网站未更新。

尝试通过 FTP 手动重新部署会产生几个“拒绝访问”错误 - 如果不联系 azure 支持，我看不到任何简单的方法来修复它？

非常感谢任何帮助

此致，

亨利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:26:02.253

之前我遇到过这样的间歇性问题，似乎只是在一段时间后自行解决。网站仍处于预览阶段，所以这里和那里有点不稳定。最好的办法是在[Git 部署到 Windows Azure 论坛](http://social.msdn.microsoft.com/Forums/en-US/azuregit/threads)上发布消息，以防其他人遇到同样的问题。如果不出意外，大卫埃博读到:)

这是一组有用的[故障排除技巧](https://stackoverflow.com/a/14379981/1859009)

# c - SSE 寄存器中的“扩展”数据类型大小

> ID：14724419
> 
> 赞同：3
> 
> 时间：2013-02-06T08:17:00.987
> 
> 标签：c, sse, simd

我正在使用 VS2005（在工作中）并且需要执行以下操作的 SSE 内在函数：

我有一个预先存在的`__m128i` *n*填充 16 位整数`a_1,a_2,....,a_8`。

由于我现在想做的一些计算需要 32 位而不是 16 位，所以我想从*n*中提取两个四组 16 位整数，并将它们放入两个分别`__m128i`包含`a_1,...,a_4`和的分隔 s 中`a_5,...,a_8`。

我可以使用各种`_mm_set`内在函数手动执行此操作，但这些会导致`mov`汇编中的 8 个 s，我希望有一种更快的方法来执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T08:28:47.447

假设我正确理解了您想要实现的目标（将一个向量中的 8 x 16 位解压缩为两个 4 x 32 位整数的向量），我通常在 SSE2 及更高版本中这样做：

```
__mm128i v = _mm_set_epi16(7, 6, 5, 4, 3, 2, 1, 0);  // v = { 7, 6, 5, 4, 3, 2, 1, 0 }
__mm128i v_lo = _mm_srai_epi32(_mm_unpacklo_epi16(v, v), 16); // v_lo = { 3, 2, 1, 0 }
__mm128i v_hi = _mm_srai_epi32(_mm_unpackhi_epi16(v, v), 16); // v_hi = { 7, 6, 5, 4 } 
```

# ios - 我应该如何管理 Xcode 工作区中的依赖项？

> ID：14724421
> 
> 赞同：0
> 
> 时间：2013-02-06T08:17:08.660
> 
> 标签：ios, workspace

我正在开发一个 iOS 应用程序项目。我的工作区中有三个项目（ProjA、ProjB、ProjC）。

*   ProjA是我的主要项目，目标是一个APP
*   ProjB 和 ProjC 是库项目，目标是 libProjB.a、libProjC.a

*   ProjA 应该链接到 libProjB.a 和 libProjC.a

*   ProjB 应该链接到 libProjC.a

如何在工作区中设置正确的依赖关系？（我刚才有“重复符号”）

# php - PHP会话文件权限

> ID：14724422
> 
> 赞同：3
> 
> 时间：2013-02-06T08:17:11.830
> 
> 标签：php, chmod

我想`session_id($id)`用现有的替换会话。我将会话目录移至`/tmp/php_sess`，并为该文件夹设置了 777 权限。

但是 PHP 在该文件夹中创建具有权限的会话文件：

```
-rw------- 
```

另一个脚本（来自 CLI）无法读取它。如何告诉 PHP 以所有人的权限创建文件 ( **777** )？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-22T16:37:17.473

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:17:54.923

我找到了一些解决方案。当 PHP 创建会话时，它可以设置文件的权限。

```
session_start();
$path = session_save_path().'/sess_'.session_id();
chmod($path, 0777); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T22:25:55.987

您可以设置[incron](http://inotify.aiken.cz/?section=incron&page=about&lang=en)来监视目录并在创建文件时将其 chmod 设置为 777。不漂亮，但有效。配置看起来像：

```
/tmp/php_sess IN_CREATE chmod 777 $@/$# 
```

这必须在 root incron 配置中，以便以 root 权限执行命令。有关配置选项的更多信息[在这里](http://www.cyberciti.biz/faq/linux-inotify-examples-to-replicate-directories/)。

# bash - 需要重启失败的后台进程 Shell Script

> ID：14724424
> 
> 赞同：1
> 
> 时间：2013-02-06T08:17:18.120
> 
> 标签：bash, process, restart

我一直在处理的一个 Bash 脚本在后台调用一些进程。我在父 Bash 脚本中使用了“等待”来等待所有后台进程完成。运行良好。

但是，问题在于重新启动。我希望如果任何子进程结束，它应该重新开始。我使用 While 尝试了一个永久循环，并使用 pgrep 检查进程状态并发出重启。但这会消耗资源。

一旦子后台进程停止/杀死/终止，是否还有其他可能重新启动子后台进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:36:42.993

不要重新发明轮子，使用[daemon 命令](http://libslack.org/daemon/)和`--respawn`.

您还应该考虑 options `--acceptable`，`--attempts`并`--delay`确保错误的进程不会导致无休止的重生循环（例如，当它们由于错误的命令行选项而立即死亡时）。

# ruby - 在 Rails 3.2 中使用 Minitest 设置 Guard

> ID：14724427
> 
> 赞同：1
> 
> 时间：2013-02-06T08:17:41.503
> 
> 标签：ruby, ruby-on-rails-3.2, guard, minitest

我在让 Guard 在我的 Rails 3.2 项目中运行时遇到问题。我的测试文件夹看起来像默认的 rails 测试结构：

```
▾ test/
  ▾ fixtures/
      customers.yml
  ▾ functional/
  ▾ integration/
  ▾ performance/
      browsing_test.rb
  ▾ unit/
      customer_test.rb
    test_helper.rb 
```

我的 Guardfile 看起来像这样：

```
guard 'minitest' do
  # with Minitest::Unit
  watch(%r|^test/(.*)\/?test_(.*)\.rb|)
  watch(%r|^lib/(.*)([^/]+)\.rb|)     { |m| "test/#{m[1]}test_#{m[2]}.rb" }
  watch(%r|^test/test_helper\.rb|)    { "test" }

  # with Minitest::Spec
   watch(%r|^spec/(.*)_spec\.rb|)
   watch(%r|^lib/(.*)([^/]+)\.rb|)     { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
   watch(%r|^spec/spec_helper\.rb|)    { "spec" }

  # Rails 3.2
  watch(%r|^app/controllers/(.*)\.rb|) { |m| "test/controllers/#{m[1]}_test.rb" }
  watch(%r|^app/helpers/(.*)\.rb|)     { |m| "test/helpers/#{m[1]}_test.rb" }
  watch(%r|^app/models/(.*)\.rb|)      { |m| "test/unit/#{m[1]}_test.rb" }  

  # Rails
  # watch(%r|^app/controllers/(.*)\.rb|) { |m| "test/functional/#{m[1]}_test.rb" }
  # watch(%r|^app/helpers/(.*)\.rb|)     { |m| "test/helpers/#{m[1]}_test.rb" }
  # watch(%r|^app/models/(.*)\.rb|)      { |m| "test/unit/#{m[1]}_test.rb" }  
end 
```

但是在运行警卫时，它只是说它正在监视，但实际上并没有运行 customer_test.rb 中的任何测试，即使我明确要求它运行迷你测试。如果我从命令行使用 运行测试`ruby -Itest test/unit/customer_test.rb`，它们会按预期运行。我知道我在 Guardfile 配置中做错了什么，但它到底是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T23:37:45.383

关于该`run_all_on_start`功能，这目前是[v1.0.0 的未发布功能的](https://github.com/guard/guard-minitest/blob/master/CHANGELOG.md#unreleased-changes)一部分。希望很快就会发布一个新的测试版。与此同时，您可以尝试使用 master 的 guard-minitest：

```
gem 'guard-minitest', github: 'guard/guard-minitest' 
```

请在尝试 master 分支后向[GitHub 问题跟踪器](https://github.com/guard/guard-minitest/issues/new)报告任何问题，谢谢！

# c# - ConfigurationSettings.AppSettings 在自动启动中调用时返回 null

> ID：14724428
> 
> 赞同：0
> 
> 时间：2013-02-06T08:17:41.703
> 
> 标签：c#, .net, vb.net, windows-7

我有以下代码行：

```
MsgBox(ConfigurationManager.AppSettings.Get("Path")) 
```

在 app.config 文件中这个 xml：

```
<appSettings>
    <add key="PATH" value="myPath"/>
</appSettings> 
```

然后我部署解决方案并将其（exe 和 xml-config 文件）保存到 appdata-roaming 路径：

```
C:\Users\<username>\AppData\Roaming\<solutionname> 
```

当我双击运行它时，按摩框显示值“myPath”。当我将它设置为在自动启动中运行并重新启动我的机器时，massege-box 是空的（null）。为什么无法在自动启动时读取 config-xml 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:19:03.727

考虑看看这个文档[ConfigurationManager.OpenExeConfiguration](http://msdn.microsoft.com/en-us/library/ms224437%28v=vs.100%29.aspx)

它说 ：

> 客户端应用程序使用适用于所有用户的全局配置、适用于单个用户的单独配置以及适用于**漫游用户**的配置。userLevel 值确定正在打开的配置文件的位置。它指示它是否没有用户级别（配置文件与应用程序位于同一目录中）或具有每个用户级别（配置文件位于由用户级别类型确定的应用程序设置路径中。）。

我不确定这是否相关（因为您说双击时它有效）。但如果你尝试没有坏处。

# android - Android：撤消、重做操作不起作用。

> ID：14724431
> 
> 赞同：0
> 
> 时间：2013-02-06T08:17:46.090
> 
> 标签：android

以下是我的代码。我可以画线，但重做和撤消按钮不起作用。请任何人都可以帮忙。

这是我下面的活动。请检查撤消和重做方法...

```
public class Paint_main extends Activity implements OnTouchListener {

    static Paint p1;
    static Paint p2;
    ImageView img;
    Bitmap bm;
    Float startx;
    Float starty;
    Float endx;
    Float endy;
    Button b1;
    EditText et;
    File file; 
    File myDir;
    private static ToggleButton toggleButton;
    private Canvas mCanvas;
    private Path mPath;

    private ArrayList<Path> paths = new ArrayList<Path>();
    private ArrayList<Path> undonePaths = new ArrayList<Path>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button btn_undo = (Button) findViewById(R.id.undoButton);

        btn_undo.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) { onClickUndo(); }
        });

        Button btn_redo = (Button) findViewById(R.id.redoButton);

        btn_redo.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) { onClickRedo(); }
        });

        bm = Bitmap.createBitmap(getWindowManager().getDefaultDisplay().getWidth(),
                                 getWindowManager().getDefaultDisplay().getHeight(),
                                 Bitmap.Config.ARGB_8888);

        img = (ImageView) findViewById(R.id.imageView1);    
        img.setImageBitmap(bm);

        p1 = new Paint();
        p1.setAntiAlias(true);
        p1.setDither(true);
        p1.setStyle(Paint.Style.STROKE);
        p1.setStrokeJoin(Paint.Join.ROUND);
        p1.setStrokeCap(Paint.Cap.ROUND);
        p1.setColor(Color.GREEN);
        p1.setStrokeWidth(6);
        mCanvas = new Canvas(bm);
        mPath = new Path();
        // paths.add(mPath); 
        img.setOnTouchListener(this);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }

    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);

        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }

    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, p1);
        // kill this so we don't double draw            
        // mPath = new Path();
        // paths.add(mPath);
        paths.add(mPath);
        mPath = new Path();
    }

    public void onClickUndo () { 
        if (paths.size() > 0) { 
            undonePaths.add(paths.remove(paths.size()-1));
            img.invalidate();
            onDraw(mCanvas);
        }
    }

    public void onClickRedo (){
        if (undonePaths.size() > 0) { 
            paths.add(undonePaths.remove(undonePaths.size()-1)); 
            img.invalidate();
            onDraw(mCanvas);
        } 
    }

    public boolean onTouch(View arg0, MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                img.invalidate();
                onDraw(mCanvas);
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                img.invalidate();
                onDraw(mCanvas);
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                img.invalidate();
                onDraw(mCanvas);
                break;
        }
        return true;
    }

    protected void onDraw(Canvas canvas) {
        //mPath = new Path();
        //canvas.drawPath(mPath, mPaint);

        for (Path p : paths) { canvas.drawPath(p, p1); }
        canvas.drawPath(mPath, p1);
    }
} 
```

可能是我错误地调用了上面的 onDraw 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:43:37.867

我得到它。问题是：`img.setOnTouchListener(this);`这个get事件，处理它并返回true，这意味着这个事件被处理了。

您有 3 个选项：

1）设置`onTouchListener`为父视图并手动将触摸事件发送给孩子 2）您可以确定用户是否触摸图像`return true`，否则返回 false 3）编写自己的类和覆盖`onTouchEvent(..)`方法

我推荐3个选项。我为你重写：

```
package com.example.paint_main;

import java.io.File;
import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.os.Bundle;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ToggleButton;

public class Paint_main extends Activity  {

    MyImageView img;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_paint_main);

        img = (MyImageView) findViewById(R.id.imageView1);
        img.init(getWindowManager().getDefaultDisplay().getWidth(), getWindowManager().getDefaultDisplay().getHeight());

        Button btn_undo = (Button) findViewById(R.id.undoButton);

        btn_undo.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) { img.onClickUndo(); }
        });

        Button btn_redo = (Button) findViewById(R.id.redoButton);

        btn_redo.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) { img.onClickRedo(); }
        });
    }

    static class MyImageView extends ImageView {

        static Paint p1;
        static Paint p2;
        Bitmap bm = null;
        Float startx;
        Float starty;
        Float endx;
        Float endy;
        Button b1;
        EditText et;
        File file; 
        File myDir;
        private static ToggleButton toggleButton;
        private Canvas mCanvas;
        private Path mPath;

        private ArrayList<Path> paths = new ArrayList<Path>();
        private ArrayList<Path> undonePaths = new ArrayList<Path>();

        static {
            p1 = new Paint();
            p1.setAntiAlias(true);
            p1.setDither(true);
            p1.setStyle(Paint.Style.STROKE);
            p1.setStrokeJoin(Paint.Join.ROUND);
            p1.setStrokeCap(Paint.Cap.ROUND);
            p1.setColor(Color.GREEN);
            p1.setStrokeWidth(6);
        }

        public MyImageView(Context context, AttributeSet attrs, int defStyle) {
            super(context, attrs, defStyle);
        }

        public MyImageView(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

        public MyImageView(Context context) {
            super(context);
        }

        public void init(int width, int height) {
            bm = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(bm);
            mPath = new Path();
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    touch_start(x, y);
                    this.invalidate();
                    onDraw(mCanvas);
                    break;
                case MotionEvent.ACTION_MOVE:
                    touch_move(x, y);
                    this.invalidate();
                    onDraw(mCanvas);
                    break;
                case MotionEvent.ACTION_UP:
                    touch_up();
                    this.invalidate();
                    onDraw(mCanvas);
                    break;
            }
            return true;
        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }

        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);

            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }

        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, p1);
            // kill this so we don't double draw            
            // mPath = new Path();
            // paths.add(mPath);
            paths.add(mPath);
            mPath = new Path();
        }

        public void onClickUndo () { 
            if (paths.size() > 0) { 
                undonePaths.add(paths.remove(paths.size()-1));
                invalidate();
                onDraw(mCanvas);
            }
        }

        public void onClickRedo (){
            if (undonePaths.size() > 0) { 
                paths.add(undonePaths.remove(undonePaths.size()-1)); 
                invalidate();
                onDraw(mCanvas);
            } 
        }

        protected void onDraw(Canvas canvas) {
            //mPath = new Path();
            //canvas.drawPath(mPath, mPaint);

            if (bm == null)
                return;

            for (Path p : paths) { 
                canvas.drawPath(p, p1); }
                canvas.drawPath(mPath, p1);
        }
    }
} 
```

不要忘记将您的课程添加到布局中：

```
<view class="com.example.paint_main.Paint_main$MyImageView"
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/redoButton"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true" /> 
```

此外，您应该使用 View 而不是 ImageView，因为您不使用任何特定的 ImageView 函数。我用 ImageView 重写，以便更容易理解我在第三个选项中的意思。

# c# - 将 GUI 排列成多种形式

> ID：14724434
> 
> 赞同：0
> 
> 时间：2013-02-06T08:18:10.177
> 
> 标签：c#, forms, user-interface

我用单个（只有一个）表单开发了 ac# 应用程序。

现在我想将该 GUI 分成多种形式。如果我将文本框和按钮剪切并粘贴到其他表单中，我们必须更改代码以再次链接所有项目以使代码正常工作。

有没有简单的方法可以在不更改和修改代码的情况下做到这一点？（类似于拖放而不更改代码结构？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:53:31.200

它可以拖放控件，但您需要手动执行事件和代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:53:49.230

尝试使用用户控件重构表单。将 GUI 的所有相似部分组合到一个用户控件中，然后将其作为控件包含在您的主窗体中。

例如 - 如果您的表单包含支持不同功能的网格（排序、过滤、编辑......），您可能希望将其重构为用户控件。

不幸的是，没有简单的方法可以做到这一点，但这将是您下次的一个很好的练习。

# actionscript-3 - ipad 视频显示使用 as3 质量问题

> ID：14724439
> 
> 赞同：0
> 
> 时间：2013-02-06T08:18:49.333
> 
> 标签：actionscript-3, ipad, camera

我可以使用 as3 代码在 ipad 中安装前置摄像头，但视频质量非常低。我用过下面的代码

```
camera=Camera.getCamera(frontcamIndex);
camera.setQuality (0,90);
user1video.width = 320;
user1video.height =240;
user1video.attachCamera(camera); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:54:57.027

设置关于以下代码的 setMode 函数。

`camera.setMode(320, 240, <#your value#>);`

请参阅以下文档。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#setMode()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#setMode())

我推荐CameraUI。CameraUI 类允许您使用设备上的默认相机应用程序捕获静止图像或视频。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/CameraUI.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/CameraUI.html)

以下示例使用 CameraUI 类在设备上启动默认相机应用程序。当用户拍摄照片时，该示例将图像放置在显示列表中。

```
package  {
 import flash.desktop.NativeApplication;
 import flash.display.Loader;
 import flash.display.MovieClip;
 import flash.display.StageAlign;
 import flash.display.StageScaleMode;
 import flash.events.ErrorEvent;
 import flash.events.Event;
 import flash.events.IOErrorEvent;
 import flash.events.MediaEvent;
 import flash.media.CameraUI;
 import flash.media.MediaPromise;
 import flash.media.MediaType;

     public class CameraUIStillImage extends MovieClip{

          private var deviceCameraApp:CameraUI = new CameraUI();
          private var imageLoader:Loader; 

          public function CameraUIStillImage() {
               this.stage.align = StageAlign.TOP_LEFT;
               this.stage.scaleMode = StageScaleMode.NO_SCALE;

               if( CameraUI.isSupported )
               {
                trace( "Initializing camera..." );

                deviceCameraApp.addEventListener( MediaEvent.COMPLETE, imageCaptured );
                deviceCameraApp.addEventListener( Event.CANCEL, captureCanceled );
                deviceCameraApp.addEventListener( ErrorEvent.ERROR, cameraError );
                deviceCameraApp.launch( MediaType.IMAGE );
               }
               else
               {
                trace( "Camera interface is not supported.");
               }
          }

          private function imageCaptured( event:MediaEvent ):void
          {
               trace( "Media captured..." );

               var imagePromise:MediaPromise = event.data;

               if( imagePromise.isAsync )
               {
                trace( "Asynchronous media promise." );
                imageLoader = new Loader();
                imageLoader.contentLoaderInfo.addEventListener( Event.COMPLETE, asyncImageLoaded );
                imageLoader.addEventListener( IOErrorEvent.IO_ERROR, cameraError );

                imageLoader.loadFilePromise( imagePromise );
               }
               else
               {
                trace( "Synchronous media promise." );
                imageLoader.loadFilePromise( imagePromise );
                showMedia( imageLoader );
               }
          }

          private function captureCanceled( event:Event ):void
          {
               trace( "Media capture canceled." );
               NativeApplication.nativeApplication.exit();
          }

          private function asyncImageLoaded( event:Event ):void
          {
               trace( "Media loaded in memory." );
               showMedia( imageLoader );    
          }

          private function showMedia( loader:Loader ):void
          {
               this.addChild( loader );
          }

          private function cameraError( error:ErrorEvent ):void
          {
               trace( "Error:" + error.text );
               NativeApplication.nativeApplication.exit();
          }
     }
} 
```

# javascript - 在运行时添加 jquery 移动可拖动按钮

> ID：14724440
> 
> 赞同：1
> 
> 时间：2013-02-06T08:18:49.893
> 
> 标签：javascript, jquery, jquery-mobile

我正在构建 jquery 移动原型。我想在运行时在其中添加应该是可拖动和可调整大小的按钮。当我在代码中手动添加按钮但不是动态添加按钮时，它运行良好。任何人请帮助:(

动态代码：$("#myframe").contents().find("#drag").append('Dynamic');

移动内容标签：

按钮1

Jquery 可拖动：

$(".draggable").draggable();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:30:30.593

尝试这个 ：

动态插入按钮后，重新创建页面...

```
$("div[data-role='page']").page('destroy').page(); 
```

上次我遇到了类似的问题。我是这样解决的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:06:40.600

这是一个工作示例：http: [//jsfiddle.net/Gajotres/vjGmt/](http://jsfiddle.net/Gajotres/vjGmt/)

代码：

```
$('<a>').data('role','button').attr({'href':'#', 'id':'test-button'}).html('Dynamic button').button().appendTo('[data-role="content"]');
$('#test-button').draggable(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:31:07.833

由于您没有显示您的代码，我们只能猜测

您是否考虑过使用 jquery [.on()](http://api.jquery.com/on/)？

# .htaccess - htaccess 301 重定向到重写规则

> ID：14724441
> 
> 赞同：0
> 
> 时间：2013-02-06T08:18:50.093
> 
> 标签：.htaccess, redirect, rewrite

我知道这一定有一个答案，但我无法找到/找到它。

同域有一个典型的301重定向规则：

```
Redirect 301 /path/to/strange-url.htm /path/to/new/canonical-url.htm 
```

稍后在 htaccess 文件中，canonical-url 有一个重写规则

```
RewriteRule ^([^/]+)/([^/]+)([^/]+)/([^-]+)-([^.]+)\.htm$ php/page.php?var1=$1&var2=$2&var3=$3&var4=$4&var5=$5 [NC,L] 
```

问题是，一旦 301 重定向激活，我的新网址就会变成：

```
/path/to/new/canonical-url.htm?var1=xxxx&var2=xxxx&var3=xxxx&var4=xxxx&var5=xxxx 
```

我怎样才能避免这种情况并只维护干净的 url: `/path/to/new/canonical-url.htm`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:06:15.650

好的，我终于找到了一个可行的解决方案

我将所有 Redirect 301 规则更改为 RewriteRule [R=301,L]，所以：

```
Redirect 301 /path/to/strange-url.htm /path/to/new/canonical-url.htm 
```

变成

```
RewriteRule ^/path/to/strange-url.htm http://www.example.com/path/to/new/canonical-url.htm [R=301,L] 
```

此外，在实际重写之前，我已经移动了所有以前的重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:26:40.877

似乎您有一个循环，请尝试在请求的 URI 上添加条件，例如：

```
RewriteCond %{REQUEST_URI} !^php/page.php
RewriteRule ^([^/]+)/([^/]+)([^/]+)/([^-]+)-([^.]+)\.htm?$ php/page.php?var1=$1&var2=$2&var3=$3&var4=$4&var5=$5 [NC,L] 
```

# orbeon - 无法在 Orbeon 代理 portlet 中检索请求/会话数据

> ID：14724447
> 
> 赞同：0
> 
> 时间：2013-02-06T08:19:09.000
> 
> 标签：orbeon

我正在运行 Orbeon 4.0 Beta 2，并且无法使用 Liferay 中的代理端口来检索表单中的任何请求或会话数据。

我尝试了以下元素：

```
xxf:get-request-parameter('myParameter')
xxf:get-session-attribute('myAttribute', 'text/plain') 
```

当我直接使用 Orbeon Form Runner ( `http://localhost:8080/orbeon/fr/test-app/test-form/new?myParameter=foo`) 中的表单时，这两种方法都有效。

我在 Orbeon servlet 中有一个 Tomcat servlet 过滤器，它在每个请求中将一个值设置为“myAttribute”。我在 Liferay 中使用的网址是`http://localhost:8080/liferay/orbeon-form?myParameter=foo`

此外，我在使用表单中获取请求标头时遇到问题（在 Orbeon 表单运行器和 Liferay proxy-portlet 中测试）

```
xxf:get-request-header('OAM_REMOTE_USER') 
```

这是我的properties-local.xml：

```
 <property as="xs:anyURI" name="oxf.url-rewriting.service.base-uri" value="http://localhost:8080/orbeon"/>
    <property as="xs:string" name="oxf.fr.authentication.method" value="header"/>
    <property as="xs:string" name="oxf.fr.authentication.header.username" value="OAM_REMOTE_USER"/>
    <property as="xs:string" name="oxf.xforms.forward-submission-headers" value="OAM_REMOTE_USER"/>
    <property as="xs:string" name="oxf.http.forward-headers" value="OAM_REMOTE_USER"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T19:24:23.440

Orbeon Forms 4.1 支持通过代理 portlet 的配置转发请求参数和标头。这在 4.1 之前是不可能的。请参阅[问题](https://github.com/orbeon/orbeon-forms/issues/886)和[文档](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/form-runner-proxy-portlet-guide#TOC-Configuring-header-and-URL-parameter-forwarding)。

# java - Java 编译时错误和异常处理中的多个 catch 块

> ID：14724449
> 
> 赞同：1
> 
> 时间：2013-02-06T08:19:12.577
> 
> 标签：java, exception, compile-time

给定一段java代码：

```
class SampleExpcetion {
  public static void main(String args[]){
        try {
                 int a[]= new int[15];
                 a[5]= 30/0;
         } 
         catch(Exception e) {System.out.println("task completed");}  
         catch(ArithmeticException e) {System.out.println("task1 completed");}  
         catch(ArrayIndexOutOfBoundsException e) { System.out.println("task2 completed");}

         System.out.println("Rest of the code......");
   }
} 
```

为什么这段代码会给出编译时错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:21:23.710

第一个 catch 块捕获所有异常，因此永远无法到达其他异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T08:21:26.760

因为`catch(Exception e) {System.out.println("task completed");}`会捕获所有异常。

```
 catch(ArithmeticException e) {System.out.println("task1 completed");}  
 catch(ArrayIndexOutOfBoundsException e) { System.out.println("task2 completed");} 
```

是死代码。

像这样重新排序，甚至更好地消除：`catch(Exception e)`

```
 catch(ArithmeticException e) {System.out.println("task1 completed");}  
  catch(ArrayIndexOutOfBoundsException e) { System.out.println("task2 completed");}
  catch(Exception e) {System.out.println("task completed");} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-28T10:32:54.577

因为“Exception e”能够捕获所有异常对象，因此其他的catch块将无法到达。这被称为“无法到达的代码”。无法访问的代码是 Java 语言中的错误。

例如：-如果 Clothes 是一个异常类并且有子类-> Shirt 和 Trouser。如果 Shirt 类的异常发生了，但是我们在 Shirt 之前用 Clothes 捕获了它，那么它永远不会到达下一个带有 Shirt Exception 的 catch 块，因为它已经被处理了。这会导致下一个 catch 块无法访问。

希望能帮助到你！！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T08:30:07.607

在一个`try catch`块中，所有后续的 catch 块都不应该在 catch 块中有任何子类异常。这将导致死代码。

另外要补充的是，在 SE 7 中，您可以指定要检查的所有异常类型，例如：

```
catch (IOException|SQLException ex) {
    //...
} 
```

您是否想了解什么是[NullPointerException](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/NullPointerException.html)？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T08:20:52.547

编译器发现在它的超类`ArithmeticException` *之后*捕获一个是不可能的；第一个 catch 子句将始终匹配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-23T14:32:08.567

`Exception`class 是`ArithmeticException`and`ArrayIndexOutOfBoundsException`和其他异常的父级。因此，如果发生异常并且 then 存在捕获，`Exception`那么肯定会捕获它。因此，无法到达写在它下面的其他 catch 块，它们根本没用。因此，它将成为无法访问的代码，并且我们知道当某些语句无法访问时 JAVA 会出错。因此，它给出了编译时错误。

以防万一，如果您在子异常之后编写它，那么它的编译将没有任何错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-08T09:28:06.807

就是这么简单……这里发生的异常是除以零异常，属于**算术异常**。所以它必须被“算术异常”捕获块捕获。但是这里它被 catch(exception e) 捕获了......所以必须像这样对 catch 进行排序以避免编译时错误：

catch(ArithmeticException e) {System.out.println("task1 completed");}
catch(ArrayIndexOutOfBoundsException e) { System.out.println("task2 completed");} catch(Exception e) {System.out.println( "任务完成");}

# java - 如何使用 ASM 为方法和类更改最终修饰符

> ID：14724451
> 
> 赞同：2
> 
> 时间：2013-02-06T08:19:17.727
> 
> 标签：java, java-bytecode-asm

实际上，我在一个类中有一种方法，如下所示。

```
public static final void print(String str){
       System.out.println(str);
} 
```

我想`final`从方法中删除修饰符。因此，在这样做之后，我的方法将如下所示：

```
public static void print(String str){   
       System.out.println(str);
} 
```

使用 ASM，我们将在

```
public MethodVisitor visitMethod(int access, String name, 
                                 String desc, String signature, 
                                 String[] exceptions) { } 
```

在上面，我认为要实现上述情况，我们需要玩访问参数。但是访问是公共+静态+最终的总和。如何仅删除 final 是我的问题？

类级别的最终修饰符也是如此？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T08:47:44.783

您只需要像这样清除“最终”位：

```
public MethodVisitor visitMethod(int access, String name, 
                             String desc, String signature, 
                             String[] exceptions) { 
    return super.visitMethod(
        access & (~Opcodes.ACC_FINAL), 
        name, desc, signature, exceptions);
} 
```

# linux - Mercurial 时间设置

> ID：14724454
> 
> 赞同：0
> 
> 时间：2013-02-06T08:19:28.767
> 
> 标签：linux, ubuntu, time, mercurial, ubuntu-12.04

我想知道一件事.. 我在 linux ubuntu 12.04 上安装了 mercurial 版本控制管理作为 web 应用程序，因此我们通过导航 local.mercurial.ge （例如我们的域）进入 mercurial 项目，然后我们选择了合适的项目以及何时我查看项目提交的时间被错误地拍摄了！，就像它说的虚幻/错误时间，但是当我通过单击变更集详细信息进入时，它显示正确的时间！（作者下方有日期）。所以我在 mercurial 服务器（linux 机器）上检查了时间，一切正常，！我不知道为什么 mercurial 项目的提交时间不正确，有时它是正确的。

请帮忙，以防万一！

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:30:25.250

提交时间取自您输入的 PC `hg commit`。尝试找到执行提交的用户并让他们检查他们的 PC 时间。

您还可以添加一个[pretxnchangegroup 挂钩](http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html)以确保只有有效时间可以推送到服务器。

# python - 使用 xmltodict 从 python 中的 xml 文件创建 json 文件

> ID：14724462
> 
> 赞同：3
> 
> 时间：2013-02-06T08:19:48.400
> 
> 标签：python, xml, json, xmltodict

我正在尝试使用带有以下代码的 xmltodict 从输入 xml 文件创建一个 json 文件

```
import io, xmltodict, json
infile = io.open(filename_xml, 'r')
outfile = io.open(filename_json, 'w')
o = xmltodict.parse( infile.read() )
json.dump( o , outfile ) 
```

最后一行给我以下错误

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/json/__init__.py", line 182, in dump
    fp.write(chunk)
TypeError: must be unicode, not str 
```

我想我需要更改编码。我最初的 xml 文件似乎是 ascii。关于如何使这项工作的任何想法？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T08:49:05.413

您可以以二进制模式打开文件

```
outfile = io.open(filename_json, 'wb') 
```

这也将允许`str`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:26:23.330

`unicode`并且`str`是 Python 版本 3 之前的两种不同类型的对象。您可以`unicode`通过强制将值转换为对象（基本上也是一个字符串）：

```
my_var = unicode(my_str) 
```

# css - IE9 在对面加载内容 url

> ID：14724463
> 
> 赞同：1
> 
> 时间：2013-02-06T08:19:50.553
> 
> 标签：css, internet-explorer

我有导航菜单，只有在 IE 中，箭头图像才会加载到相反的位置。内部子菜单 li 由 javascript 插入，并且工作正常。

```
<HTML>
<ul id="navigation">

       <li id="region" class="mainM"  ><a id="item_1" href="#">Area</a>
        <ul id="regionChildren">

        </ul>
    </li>
    <li id="topic" class="mainM"><a id="item_2" class="mainM" href="#">Topic</a>
        <ul id="topicChildren">

        </ul>
    </li>
    <li id="subTopic" class="mainM"><a  id="item_3" class="mainM" href="#">Sub Topic</a>
        <ul id="subTopicChildren">

         </ul>
            </li>
            <li id="mapList" class="mainM"><a  id="item_4" class="mainM" href="#">Map Name</a>
         <ul id="mapListChildren">

        </ul>
            </li>

        </ul>
</HTML>

<style type="text/css">
ul#navigation{
    margin-top:0.5em;
}

ul#navigation ul {
    padding: 0;
    list-style: none;
    font-family:Arial;      
    list-style: none;
    font-family:Arial;
}
ul#navigation > li { 
    position: relative;
    float: right;
    background-color: #e7e7e7;
    border-radius: 7px;
          box-shadow: 3px 3px 6px 1px #333;
          padding:  0 0.35em 0 0.35em;
          margin-right:1em;
}

ul#navigation > li ul li { 
    position: relative;
    float: right;
    background-color: #e7e7e7;
    border-radius: 7px;
          box-shadow: 3px 3px 6px 1px #333;
          z-index: 9999;
}
#navigation a {
    display: block;
    min-width: 7em;
    height: 1.5em;
    padding: 3px  10px 3px 10px;
    text-decoration:none;
          color:#003366;
    text-align:right;
    direction:rtl;
    /* top right bottom left*/
}

ul#navigation li ul {
    position : absolute;
    right: -999em;
    width: 100%;
}
ul#navigation li ul li
{
          margin:0;
          width:100%;
}
#navigation li:hover
{
          background-color:#dddddd;
}
#navigation li:hover ul {
    right: 0;   
    margin-left: 0;
}
#navigation li > a:after { 
          margin-right: 5px; 
          vertical-align:-30%;  
          content: url(images/hebrew/atlas/arrow10.png); 
}
#navigation li:hover > a:after { 
          margin-right: 5px; 
          vertical-align: text-top; 
          content: url(images/hebrew/atlas/arrow10DWN.png); 
}
#navigation > li > a:after { 
          margin-right: 5px; 
          vertical-align:-30%; 
          content: url(images/hebrew/atlas/arrow10.png);
}
#navigation li > a:only-child:after { margin-left: 0; content: ''; }
</style> 
```

在 FF 和 chrome 中，箭头应该向左加载（我的网站在 RTL 方向）。并且在悬停时它得到向下的方向，悬停后它像以前一样返回到左方向。

在 IE 中，箭头以相反的方向加载，在悬停时，我们可以看到它应该向下，但在 IE 中鼠标移出后，它看起来像这样：我无法添加图片，我将尝试解释。在 IE 中，它加载箭头两次 - 一次向左而不是向右，一次向好的方向。它看起来像 boe tie。

感谢帮助！大理

# python - Python :unbound 方法 receive() 必须以 MessageNet 实例作为第一个参数调用（改为使用 MessageGlobal 实例）

> ID：14724465
> 
> 赞同：0
> 
> 时间：2013-02-06T08:20:00.393
> 
> 标签：python, django

我有一个问题是我的 django 视图

```
 def home(request):
        try:
            from_number  = request.GET['from_number']
            to_number  = request.GET['to_number']
            messagetext  = request.GET['msg_text']
            date_time  = request.GET['date_time']
            date_received  = request.GET['date_received']
            status = 0
        except:
            LOG_ERROR('Invalid Parameter')

            #Return to some product page or 500 error with message
            #pass    #  return some value  after discussing with sir 
     #      #Based on from number identify the Vmn and his class anc class the respective receieve method of that class
        if from_number !=None  and to_number != None:
            try:getvmn = ServiceProvider.objects.get(status = False)
            except:
                LOG_FATAL("VMN doesn't exists ")
                getvmn = False
            if getvmn:
                print "-=-=-=-=-==-=-=-==================="
    #           get_related_class = ServiceProvider.objects.filter(id  = getvmn.merchant,status = False)
                get_related_class = ServiceProvider.objects.get(status = False)
                b = SMSMgr()
                for objec in b._allsp:
                    if objec.class_Name == 'MessageNet':
                       # messageglobalobject  =     
                        MessageNet.receive(MessageGlobal(from_number,to_number,messagetext,date_received,status)) 
```

这是 smsmessage.py

```
class MessageGlobal():
    def __init__(self,from_number,to_number,messagetext,date,status = None):
        self.messagetext = messagetext
        self.to_number = to_number
        self.from_number = from_number
        self.date = date
        self.status = status 
```

这是 MessageNet 类

```
class MessageNet():
    def __init__(self,username,password,sendingurl,class_Name):
        self.username = username
        self.password = password
        self.messagetext = None
        self.sendingurl = sendingurl
        self.class_Name = class_Name
        self.PhoneNumber = None
       # self.apiurl = apiurl

    def send(self,mg):

        payload = {'username': self.username, 'Pwd': self.password,'PhoneNumber':mg.tonumber,'PhoneMessage':mg.messagetext}
        r = requests.get(self.sendingurl, params=payload)
        LOG_INFO("Message sent to %s  via  %s", self.PhoneNumber,'Messagenet')
        #   Call to ms manager 

    def receive(self,getmessageobject):

        print "receive and notify the user " 
```

我收到错误消息

```
MessageNet.receive(MessageGlobal(from_number,to_number,messagetext,date_received,status))
of my views . 
```

我正在尝试将 MessageGlobal 的对象传递给接收方法，以便我可以在 MessageNet 类的接收方法中访问它们。

请告诉我为什么会收到此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:28:50.433

您在类而不是实例上调用实例方法。您需要实例化一个`MessageNet`对象，然后调用`receive`该实例，而不是类。

或者，您可以将其设为类方法，但您将无法访问任何实例属性（密码等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:22:36.257

你得到它是因为你将一个`MessageGlobal`实例传递给`MessageNet`. 要么传递一个`MessageNet`实例，要么将方法转换为普通函数。

# ios - XCode - 图像上触摸事件的确切相对坐标 - iOS

> ID：14724467
> 
> 赞同：0
> 
> 时间：2013-02-06T08:20:16.457
> 
> 标签：ios, objective-c, xcode

我正在尝试构建一个简单的照片裁剪实用程序，用户可以在其中触摸并选择图片边界。我需要图像的确切触摸坐标。

当我使用

```
 CGImageRef imageRef = [staticBG.image CGImage];
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:[self view]];
    y3=location.y;
    x3=location.x; 
```

坐标 (x3,y3) 采用绝对比例，对于处理 imageRef 没有用处。

我尝试使用

```
 UITouch *touch = [touches anyObject];
    CGPoint touchPoint = [touch locationInView:staticBG]; 
```

但坐标仍然不完全匹配。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:32:31.163

**使用以下代码:)**

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

        UITouch *touch = [touches anyObject];

        if ([touch tapCount] == 2) {
            //self.imageView.image = nil;
            return;
        }

        CGPoint lastPoint = [touch locationInView:self.YourImageView];
        NSLog(@"%f",lastPoint.x);
        NSLog(@"%f",lastPoint.y);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:14:38.360

我认为我们不需要用户触摸的精确坐标，但要裁剪图像，我会：

1.  在图像上布局一个 maskView 让用户选择要裁剪的区域。**maskView 有一个**很容易知道的精确框架。
2.  `touchesBegan`使用和检测用户触摸`touchesMoved`。当用户触摸移动时，同时移动 maskView（更改 maskView 的框架）。在这一步中，我们需要确定 maskView 的哪个顶点最接近`Point`用户触摸的位置——leftTop、rightTop、leftBottom 或 rightBottom。
3.  上`touchesEnded`，我们使用 maskView 的 frame 来[裁剪图像](https://stackoverflow.com/a/10081576/889538)。在这里，坐标足够精确。请注意，我们需要更改图像坐标系的 maskView 框架。

希望有所帮助。:)

# winapi - 无法在远程会话中获取用户令牌

> ID：14724468
> 
> 赞同：2
> 
> 时间：2013-02-06T08:20:17.487
> 
> 标签：winapi, token

*所以我想 LoadLibrary 和 GetProcAddress wtsapi32.dll 在我的服务器中使用 Windows Server 2008 调用 WTSQueryUserToken()。当我实际**走到**服务器并执行该程序时，可以明确加载该文件而不会出现问题。但是，当我通过 Mstsc.exe 访问我的服务器并执行相同操作时，它最终会导致 GetProcAddress() 失败，并显示来自 GetLastError() 的错误代码 2。wtsapi32.dll 确实与远程桌面服务 API 有关，但我不知道如何跟踪这个问题。任何提示将不胜感激。提前致谢。*

**编辑：**

事实证明，我有另一个想法来思考我真正遇到的问题。

所以 wtsapi32.dll 在任何情况下都会被加载，即使当我使用 Mstsc.exe 我的服务器时也是如此。

真正的问题是 WTSQueryUserToken() 总是失败，**只有**当我 Mstsc.exe 服务器时才返回 FALSE。我的服务器操作系统是 Windows Server 2008。我使用 Windows 7 的桌面上的 WTSQueryUserToken() 工作正常。

我的代码在这里。

```
HANDLE hTokenImperson = nullptr;

HMODULE hModWtsapi32 = LoadLibrary(TEXT("wtsapi32.dll"));
HMODULE hModKernel32 = LoadLibrary(TEXT("kernel32.dll"));
auto lpfnWTSQueryUserToken = reinterpret_cast<bool(*)(ULONG, PHANDLE)>(GetProcAddress(hModWtsapi32, "WTSQueryUserToken"));
auto lpfnWTSGetActiveConsoleSessionId = reinterpret_cast<DWORD(*)(void)>(GetProcAddress(hModKernel32, "WTSGetActiveConsoleSessionId"));

// dwSessionId is not 0.
dwSessionId = lpfnWTSGetActiveConsoleSessionId(); 

// FALSE returns only when I do mstsc.exe.
// Works well when I walk to my server and execute this application.
lpfnWTSQueryUserToken(dwSessionId, &hTokenImperson) 
```

我已经重命名了我的问题的标题，因为它与我正在寻找的内容没有任何关系。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T05:05:10.460

`WTSGetActiveConsoleSessionId`返回当前附加到物理控制台 ( [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383835%28v=vs.85%29.aspx) ) 的会话。如果您需要获取远程会话的令牌，您可以先调用[WTSEnumerateSessions](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383833%28v=vs.85%29.aspx)并查找活动会话。

```
BOOL WTSEnumerateSessions(
  _In_   HANDLE hServer,
  _In_   DWORD Reserved,
  _In_   DWORD Version,
  _Out_  PWTS_SESSION_INFO *ppSessionInfo, // <------
  _Out_  DWORD *pCount
); 
```

检查结构*状态*。`PWTS_SESSION_INFO`

获得活动会话的会话 ID 后，调用`WTSQueryUserToken`以获取访问令牌。

# node.js - 在一个连接中从 node.js 向多个用户发送苹果推送通知

> ID：14724471
> 
> 赞同：2
> 
> 时间：2013-02-06T08:20:25.290
> 
> 标签：node.js, apple-push-notifications

我见过节点模块“node-apn”，但我看不到如何在一个连接中向多个用户发送相同的通知？我也看到可以用 PHP 做，但我使用的是 node.js

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T15:19:48.133

使用 node-apn v1.3.x（强烈推荐升级），您可以向许多设备发送相同的通知，而根本不需要循环。该模块将自动为您处理向多个设备发送一个通知的复杂性。

```
// Instantiate a new message
// and set message defaults
var note = new apns.Notification();
note.expiry = Math.floor(Date.now() / 1000) + 3600; // Expires 1 hour from now.
note.badge = 3;
note.sound = "ping.aiff";
note.alert = "You have a new message";
note.payload = {'messageFrom': 'Caroline'};

// List of user tokens
var userTokens = ['token1', 'token2', 'token3'];
// Send the message
apnsConnection.pushNotification(note, userTokens); 
```

# mysql - Solr 完全导入几个较小的块

> ID：14724477
> 
> 赞同：0
> 
> 时间：2013-02-06T08:20:35.613
> 
> 标签：mysql, solr

我正在尝试将大型 MySQL 数据库导入 Solr，并且服务器上的导入查询非常繁重（这可能会影响当时正在运行和使用数据库的实际产品）。有没有办法将完整的导入分成几个更小的块？我在这里或 Solr 的文档中都没有找到关于这个主题的任何内容。

我知道增量导入功能，但我将它用于新/更改数据的增量导入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:19:51.813

当然，您可以添加一个条件，例如

```
WHERE pk<'${dataimporter.request.INDEX}' 
```

并在请求参数中传递 INDEX。因此，每次调用完全导入时，只会索引部分记录。当然记得使用**&clean=false**否则每次都会清除内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:32:51.473

可能您可以检查[批量](http://wiki.apache.org/solr/DataImportHandler#Configuring_JdbcDataSource)大小：-

batchSize（默认值：500）——设置在一次查询中从数据库检索到数据库的最大记录数（或者更确切地说是对驱动程序的建议）。在查询返回大量结果的情况下，更改此参数会有所帮助。这可能无济于事，因为这种机制的实现取决于 JDBC 驱动程序。

[http://lucene.472066.n3.nabble.com/DataImportHandler-running-out-of-memory-td490797.html](http://lucene.472066.n3.nabble.com/DataImportHandler-running-out-of-memory-td490797.html)

# php - PHP 无法检查 Session 是否正在运行

> ID：14724478
> 
> 赞同：0
> 
> 时间：2013-02-06T08:20:38.300
> 
> 标签：php, session, login

我尝试用 php 编写登录页面，但是我遇到了会话问题。

我有一个 index.php 文件，它应该显示内部/登录页面。来源：

```
<?php
include ("session_management.php");

if($_SESSION["UserID"] == -1 )
    include("login.php");
else
    include("calendar.php");
?> 
```

我的 session_management.php 看起来像这样：

```
<?php

    if(session_status() == PHP_SESSION_ACTIVE) {
        PRINT "session exists<br>";
        //session exists...
    }
    else {
        session_start();
                PRINT "new session<br>";

        $_SESSION["Username"] = 0;
        $_SESSION["UserID"] = -1;
    }
?> 
```

最后，我的 login.php 文件：

```
<?php
    if ($_SERVER['REQUEST_METHOD'] == 'POST') {
        if (isset ($_POST["username"]) && isset ($_POST["pwd"])
                && $_POST["username"] != '' && $_POST["pwd"] != ''){
            $_SESSION["UserID"] = 1;
            $_SESSION["Username"] = "abc";

        }
        else
            PRINT "need name AND pwd";
    }
//.. some code... 
```

我不知道为什么这不起作用（用户ID一直是-1，登录后也是如此，所以login.php一直显示）

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:23:00.183

`session_status() == PHP_SESSION_ACTIVE`总是返回 false，因为您在测试之前没有执行 session_start()。

你总是需要做一个`session_start()`. 如果未收到会话 cookie，它将启动一个新会话，或者重新打开现有会话。

将您的 session_management.php 更改为：

```
<?php
    session_start();
    if ( empty($_SESSION["Username"]) ) $_SESSION["Username"] = 0;
    if ( empty($_SESSION["UserID"]) ) $_SESSION["UserID"] = -1;
?> 
```

它会起作用的。

如果您在某个时候真的想销毁会话（注销）：

```
<?php
    session_start();
    session_regenerate_id(true);
?> 
```

# android - 在 Android 的 Junit 中使用 FEST-assert 的正确方法？

> ID：14724479
> 
> 赞同：2
> 
> 时间：2013-02-06T08:20:39.443
> 
> 标签：android, maven, junit, fest

我是 Android 上 JUnit 和 FEST 的新手。我正在尝试在课堂上使用[FEST-Android](https://github.com/square/fest-android)，但在编译时不断出错：

```
Android Dex: [ZHoltoTest] trouble processing "javax/xml/parsers/DocumentBuilder.class":
Android Dex: [ZHoltoTest] Ill-advised or mistaken usage of a core class (java.* or javax.*)
Android Dex: [ZHoltoTest] when not building a core library.
Android Dex: [ZHoltoTest] This is often due to inadvertently including a core library file 
```

到目前为止，没有 FEST 库，我在创建一个简单的类方面取得了一些成功，如下所示。

```
package com.monster.beta.tests;

import android.graphics.Rect;
import android.test.ActivityInstrumentationTestCase2;
import android.widget.Button;
import com.monster.beta.R;
import com.monster.beta.activity.WelcomeActivity;

public class WelcomeActivityTest extends ActivityInstrumentationTestCase2<WelcomeActivity> {
    WelcomeActivity activity;
    public WelcomeActivityTest() {
        super("com.monster.beta", WelcomeActivity.class);

    }
    protected void setUp() throws Exception {
        super.setUp();
        activity = getActivity();
    }

    public void testCloseWording(){
        Button btnSync = (Button) activity.findViewById(R.id.btnClose);

        assertTrue("Text is<" + btnSync.getText().toString() + "> expect<close me>", "close me".equalsIgnoreCase(btnSync.getText().toString()));
    }

    public void testCloseBtn(){
        Button btnSync = (Button) activity.findViewById(R.id.btnClose);
        btnSync.callOnClick();

        int btnSyncLoc[] = new int[2];
        btnSync.getLocationOnScreen(btnSyncLoc);

        Rect btnRect = new Rect();
        btnSync.getDrawingRect(btnRect);

        assertTrue("btnSyncLoc is<" + btnSyncLoc[0] + "> not less than hundred", (btnSyncLoc[0] < 100));
    }

    public void testCloseBtn2(){
        Button btnSync = (Button) activity.findViewById(R.id.btnClose);

        int btnSyncLoc[] = new int[2];
        btnSync.getLocationOnScreen(btnSyncLoc);

        Rect btnRect = new Rect();
        btnSync.getDrawingRect(btnRect);

        assertTrue("btnSyncLoc is<" + btnSyncLoc[1] + "> not less than hundred", (btnSyncLoc[1] < 100));
    }

} 
```

一旦我使用 Maven 将 FEST-Android 库包含到测试项目中，错误就会出现（我不熟悉 Maven，但直接下载 jar 对我来说是关闭的）。

这是 FEST-Android 1.0.1 包内的内容

```
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\android-4.1.1.4.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\commons-codec-1.3.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\commons-logging-1.1.1.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\fest-android-1.0.1.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\fest-assert-core-2.0M8.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\fest-util-1.2.3.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\httpclient-4.0.1.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\httpcore-4.0.1.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\json-20080701.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\opengl-api-gl1.1-android-2.1_r1.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\support-v4-r7.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\xmlParserAPIs-2.6.2.jar
C:\Users\poohdish.SPHINXPARTNERS\git\FEST-Android\xpp3-1.1.4c.jar 
```

我需要删除一些东西吗？我的项目使用 ActionBarSherlock，为了让 JUnit 工作，我还需要导出项目使用的所有库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:57:00.840

您正在尝试将核心 java 类添加到 android 应用程序。不要这样做。您的类路径中不需要 XML API。Android jar 包含您将需要的所有 XML API。

我敢说列表中唯一需要打包的库是`android-support-v4`

此外，如果您正在使用 eclipse，请记住它只有一个类路径范围。没有单独的测试范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:38:17.997

来自[https://github.com/square/fest-android](https://github.com/square/fest-android)

通过 Maven 抓取：

```
<dependency>
  <groupId>com.squareup</groupId>
  <artifactId>fest-android</artifactId>
  <version>1.0.1</version>
</dependency> 
```

将此添加到您的测试项目的 pom.xml 中。

您不需要使用 Eclipse 导出或导入库，因为 maven 和[m2e](http://www.eclipse.org/m2e/)会在您*定义*所需内容时为您完成。Maven (m2e) 将下载所有需要的 jars。

# excel - Excel 撤消按钮

> ID：14724480
> 
> 赞同：0
> 
> 时间：2013-02-06T08:20:46.940
> 
> 标签：excel, excel-2010, vba

当我更改单元格中的某些值时，撤消选项不可用。是因为我在后台有 vba 编程代码，我该如何启用撤消？

另一个问题。当我尝试保存 excel 文件时，它为我提供了 xltm 格式。由于我没有任何宏（但我有 vba 代码），我将其保存为 xlsx。看起来现在一切正常，背景中的 vba 代码也是如此。如果有的话，xltm 和 xlsx 格式有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:20:38.397

不幸的是，在运行一个宏之后，撤销的缓存信息被删除了。Excel+Vba 就是这样工作的。

但是，在过程（Vba）内部和结束之前，您可以使用该行`Application.Undo`撤消最后一个操作。但是一旦 VBA 过程结束并将控制权返回给 Excel，就不再有撤消操作了。

XLSM 是允许电子表格具有宏的文件格式。XLSX 是没有宏的电子表格文件格式。没有 .xlsx 文件可以有宏。

在您的情况下，代码可能位于加载项或personal.xlsb 文件中。在这种情况下，vba 代码可用于任何 Excel 文件，无论它是 .xlsm、.xlsx 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:28:13.590

您是否使用代码更改单元格值？

关于文件类型，xltm 几乎可以肯定是启用宏的模板。从 2007 年起，两种主要的文件类型是 xlsx 和 xlsm。XLSX，不会包含任何 VBA，XLSM 是启用宏的并且可以包含 VBA。

# extjs - 如何更改 ExtJs 3.0 中的 DisplayField 文本？

> ID：14724482
> 
> 赞同：3
> 
> 时间：2013-02-06T08:21:01.567
> 
> 标签：extjs, extjs3

我想在 DisplayField 中将“Labelxx”更改为“新标签”。我怎样才能做到这一点？下面是我的代码：

```
MyFormUi = Ext.extend(Ext.form.FormPanel, {
    title: 'Rates ',
    id: 'id_form',
    initComponent: function() {
        this.items = [{
            xtype: 'displayfield',
            fieldLabel: 'Labelxx',
            anchor: '100%',
            name: 'name_lb',
            ref: 'localCurrencylbl',
            id: 'id_lb'
        }];
        MyFormUi.superclass.initComponent.call(this);
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T09:03:24.490

要更改 DisplayField `text`：

```
Ext.getCmp('id_lb').setValue('New text'); 
```

要更改`fieldLabel`：

```
Ext.getCmp('id_lb').setFieldLabel('New Label'); 
```

**注意：**不建议使用 id's tho。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-04T19:10:10.607

在 ExtJs 3.X 中更改 fieldLabel：

```
Ext.getCmp('id_lb').label.update("Dynamically changed text"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:20:27.620

setValue 将改变显示字段的值。它不会改变 fieldLabel。

# jquery - 如何使用 jQuery 获取表格单元格的内容？

> ID：14724490
> 
> 赞同：-1
> 
> 时间：2013-02-06T08:21:34.887
> 
> 标签：jquery, datatables

当我将鼠标悬停在表格单元格上时，内容旁边会出现一个编辑链接。我想获取该单元格的内容。jQuery可以吗？

HTML页面是这样的：[https ://gist.github.com/anonymous/4721230](https://gist.github.com/anonymous/4721230)

表格的一部分，由 JavaScript 生成。[https://gist.github.com/anonymous/4721245](https://gist.github.com/anonymous/4721245)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:54:43.650

这是一个可能的解决方案 -[这里是小提琴](http://jsfiddle.net/HmgBW/2/)

**js代码**

```
var table = $('#tblFollow');

table.dataTable({
    sDom: "t",
    aoColumns: [
      null,
      null,
      { bSortable: false }
    ]
});

table.on('click', 'a', function(e){
    var followingCell = $(this).parents('td').prev();
    var rowIndex = table.fnGetPosition( $(this).closest('tr')[0] );
    var aData = table.fnGetData( rowIndex  );
    alert (aData[0] + " / " + aData[1]+ " / " + aData[2]);

    return false;
}); 
```

**html代码**

```
<table id="tblFollow">
    <thead>
        <tr>
            <th>id</th>
            <th>name</th>
            <th>link</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>John</td>

            <td><a  href="#">Link</a></td>
        </tr>
        <tr>
            <td>2</td>
            <td>Bill</td>

            <td><a  href="#">Link</a></td>
        </tr>
        <tr>
            <td>3</td>
            <td>Anna</td>

            <td><a  href="#">Link</a></td>
        </tr>
        <tr>
            <td>4</td>
            <td>Dick</td>
            <td><a  href="#">Link</a></td>
        </tr>
        <tr>
            <td>5</td>
            <td>Jane</td>

            <td><a href="#">Link</a></td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:25:32.187

绝对地。

```
<table id="this_is_the_one">
 <tbody>
  <tr>
   <td>
     content 1
   </td>
   <td>
     content 2
   </td>
  </tr>
 </tbody>
</table>

<script type="text/javascript">
$('#this_is_the_one td').on('click', function() {
  alert($(this).html());
  //$(this) returns the <td> element being pressed
});
</script> 
```

如果您在表格单元格中有格式化代码 (HTML) 并且您不希望它们显示，您也可以获取 HTML 并将[其显示在对话框中](http://jqueryui.com/dialog/)，或者您可以（当表格在PHP 脚本）向具有纯内容的属性添加属性并使用 $(elem).prop(prop-name) 函数来获取该属性的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:31:09.963

你可以这样做：

```
$("#test td").on("mouseover",function(){
    alert($(this).text())
}) 
```

这里也是一个[jsFiddle](http://jsfiddle.net/7cqxK/)

# windows - Windows 发展战略 手机 平板 桌面

> ID：14724493
> 
> 赞同：2
> 
> 时间：2013-02-06T08:21:44.680
> 
> 标签：windows, windows-phone

不久，我们将开始开发一个应用程序，我们希望它可用于 windows phone 7、windows phone 8 和 windows 8（平板电脑和台式机）。

稍后我们还希望通过 Xamarin 产品使其可用于 iPhone 和 Android 手机。

我过去做过很多 Windows 开发，但那是很久以前的事了（6 年）。

问题 1：针对所有这些平台获得尽可能多的代码重用的最终开发策略是什么？

问题 2：windows 版本需要选择什么 UI 框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T12:47:11.977

正如 HellScream 所建议的，您可以使用类库在不同的 .net 应用程序之间共享代码。您还可以使用 Web 服务 (WCF) 并选择 SOA 架构。当转向 IOS/Android 开发时，这可能会派上用场......

至于 UI 框架，我认为要走的路是带有 MVVM 模式的 XAML。MVVM 是专门为 XAML 设计的 MVC 设计模式的后代。它使您可以将 UI 与模型分离，这在同一模型之上创建不同视图（WP 与窗口）时可能会派上用场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T10:00:51.820

**策略：**我不是 WP 专家，但您可以通过使用可移植类库重用您在 Windows 8 和 WP8 中使用的代码。它让您可以选择要在单个类库中使用的框架，例如“我将使用 Windows RT 和 Windows Phone 8”。通过这样做，它为您的解决方案中的两个应用程序提供您的代码。我不确定 Windows Phone 7 是否可以做到这一点，但您可以尝试一下 :)

但这也可能是个婊子，因为 WP8 支持某些代码，而 W8 不支持，反之亦然，这需要解决方法。

阅读有关[跨平台开发](http://msdn.microsoft.com/en-us/library/gg597391.aspx)和[便携式类库](http://msdn.microsoft.com/en-us/library/vstudio/gg597391%28v=vs.100%29.aspx)的更多信息。

**UI：**我会选择 XAML，因为它太棒了，WP 和 W8 都支持它。它给你

阅读有关[XAML](http://msdn.microsoft.com/en-us/library/ms752059.aspx)的更多信息。

**iPhone & Android :**没有这方面的经验，抱歉。

# svn - svn 存储库的实际大小限制是多少？

> ID：14724498
> 
> 赞同：3
> 
> 时间：2013-02-06T08:22:00.737
> 
> 标签：svn

我计划建立一个 svn 存储库，其中包含我工作场所的各种产品构建将依赖的 3rd 方二进制文件。因为这些都是二进制文件而不是文本文件，所以任何添加到这个存储库都会复制工件，我有点担心大小限制。

现在我正在查看大约 15 GB 的二进制文件，并且我知道 350GB 是可能的（从这个问题可以明显看出 - [350GB SVN 存储库为分支/标签等最简单的任务创建至少 1MB 的修订版](https://stackoverflow.com/questions/3910387/350gb-svn-repo-creates-atleast-1mb-revision-for-even-a-simplest-task-like-branch)）。

我也知道底层操作系统施加了一些限制（例如，最大单个文件大小为 2GB，我不希望达到），并且 svn 代码中没有硬限制。

我要问的是人们在没有重大问题的情况下看到 svn 有多大？还请记住，这个存储库将（相对）很少更新 - 大约每几周更新一次。

我的操作系统选项是 windows x64（很可能是 server 2008）和 linux x64（可能是 red hat ent.）。文件系统将是 Windows 中的 ntfs 和我想要的 linux 上的任何文件系统。

客户主要是乌龟 svn 1.7

那么我的实际限制是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:52:08.983

首先，Subversion 是一个现代版本控制系统，所以二进制数据本身不是问题。Subversion 可以从二进制数据创建增量，因此提交将尽可能小。

问题通常是二进制数据主动阻止生成小的增量。一个原因是二进制数据可以被压缩，这通常会导致巨大的差异。

也就是说，您的回购可能无论如何都不会增长得非常快。我们有一个大产品，目前使用大约 400 个第三方依赖项。每个月，其中的一些变化。或者换一种说法：你的依赖不会*每周**都*改变。这意味着您每个月只会添加几 MB（除非您有一个非常不稳定的依赖项，它会发生很多变化，但同样，大多数依赖项都不是那样的）。

 *所以我的直觉只是尝试它并解决出现的任何问题，因为无论如何可能不会有任何大/不可用的问题。*

# go - 生成 Go 源代码

> ID：14724499
> 
> 赞同：9
> 
> 时间：2013-02-06T08:22:07.560
> 
> 标签：go, generated-code

我正在寻找一种生成 Go 源代码的方法。

我发现 go/parser 可以从 Go 源文件生成 AST，但找不到从 AST 生成 Go 源的方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-06T08:47:13.430

要将 AST 转换为源形式，可以使用[go/printer](http://golang.org/pkg/go/printer/)包。

示例（另一个[示例](http://golang.org/pkg/go/ast/#example_Print)的改编形式）

```
package main

import (
        "go/parser"
        "go/printer"
        "go/token"
        "os"
)

func main() {
        // src is the input for which we want to print the AST.
        src := `
package main
func main() {
        println("Hello, World!")
}
`

        // Create the AST by parsing src.
        fset := token.NewFileSet() // positions are relative to fset
        f, err := parser.ParseFile(fset, "", src, 0)
        if err != nil {
                panic(err)
        }

        printer.Fprint(os.Stdout, fset, f)

} 
```

（也在[这里](http://play.golang.org/p/7ubbUA1T3R)）

* * *

输出：

```
package main

func main() {
        println("Hello, World!")
} 
```

# java - 在 WSDL-first 方法中如何使用一些（例如：验证）方法编写 DTO？只是不要写“贫血的领域模型”

> ID：14724501
> 
> 赞同：0
> 
> 时间：2013-02-06T08:22:13.233
> 
> 标签：java, wsdl, dto, contract-first

我首先使用 WSDL。我有 WSDL 并使用 Maven 插件“cxf-codegen-plugin”生成 Java 代码。使用 Code-first 可以编写 DTO，例如：

```
public class ServiceSearchCriteria {
    private String phoneNumber;
    private String businessId;

    public boolean validateSearchCriteria() {
        if ((phoneNumber != null) || (businessId != null)) {
            return true;
        }
        return false;
    }
    //... setters/getters etc.
} 
```

所以使用 Code-First（Java-First）很容易用验证方法编写 DTO。客户可以检查搜索条件是否得到很好的满足。此类将由使用@WebService 注释的 WebService 类返回。这将起作用。

但是如何使用 WSDL-First 方法编写这样的 DTO（使用某种方法）？

我非常喜欢 WSDL-First 方法（它有很多优点，但这里不是写它们的地方）但我想添加方法......只是不写“贫血域模型”并允许客户端检查之前满足的搜索条件发送到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:34:26.430

您似乎在混合各种概念。您不想拥有一个贫血的域模型很酷，但这与您的 DTO 无关，而 DTO 又与 WSDL 中的类的外观无关。

[DTO](http://en.wikipedia.org/wiki/Data_transfer_object)有状态但没有行为。因此，它们只有 getter/setter，但不包含逻辑（例如验证）。

域模型中的对象具有状态*和*行为（当然，除非它们是贫血的）。

因此，如果需要 DTO，这取决于您的架构，您需要将业务对象从域模型转换为 DTO，反之亦然。如果您认为从您的 WSDL DTO 生成的类没问题，那么您需要将它们转换为您的业务对象。“转换”在这方面意味着转移他们的状态。

# laravel - 过滤前的 Laravel

> ID：14724505
> 
> 赞同：0
> 
> 时间：2013-02-06T08:22:19.797
> 
> 标签：laravel

有人可以指导我这一行吗？我已经在论坛上读过一些博客，但没有清除逻辑

```
 array('before' => 'auth', 'do' => function() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T22:48:28.603

简单地假设您想在执行某些操作之前检查用户是否已登录，它由称为过滤器的东西完成。“之前”过滤器意味着在执行操作之前执行过滤器。

有关过滤器的更多信息，请查看[此链接](http://laravel.com/docs/routing#filters)

例子：

```
Route::get('home', array('before' => 'auth', 'do' => function()
{
    // your action here
}));

Route::filter('auth',function(){
     if(Auth::guest())
         return Redirect::to('login');

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:50:01.677

这意味着必须在执行“执行回调”中的操作之前执行身份验证过滤器。如果过滤器返回响应（如[CodeHappy 示例](http://codehappy.daylerees.com/authentication)中），则不会执行 do 回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:29:46.127

此[链接](http://codehappy.daylerees.com/authentication)解释相同。简单的意思是*，如果当前状态是“验证前”，则执行该功能*。

当您尝试发帖时，如果您没有登录，这会将您重定向到`function()`执行登录目的的位置。这`auth`是事件，`function`是事件处理程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-16T05:47:14.943

“auth”过滤器用于在访问功能之前对应用程序中的用户进行身份验证。

让我们考虑一下，您在 routes.php 中有以下代码

```
 Route::get('index', array('before' => 'auth', 'do' => function()
  {
       // application logic goes here
  })); 
```

因此，您必须在 filters.php 文件中指定特定的身份验证过滤器，如下所示

1）返回json响应

```
 Route::filter('auth', function()
   {
      if (!Auth::check()) {
        return Response::json(array('flash' => 'Please log in.'), 401);
      }
   }); 
```

或者

2）重定向到登录视图

```
 Route::filter('auth', function()
    {
       if (!Auth::check()) {
         return Redirect::to('login');
       }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-26T19:43:42.630

让我们一步一步来，

```
array('before' => 'auth', 'do' => function() 
```

参数到数组，

***前***

这是指过滤器。过滤器是在处理请求之前执行的功能。

在上述情况下，数组参数的***do***部分是指将在当前请求中执行的函数。但在该函数可以执行之前，运行***auth***过滤器。

您还可以使用***before***参数指定要执行的多个过滤器。

```
for example: 'before' => array('csrf', 'auth', 'mycustomfilter') 
```

# java - 配置中的属性占位符

> ID：14724512
> 
> 赞同：8
> 
> 时间：2013-02-06T08:23:06.177
> 
> 标签：java, spring

在 xml 上下文中使用 Spring，我们可以像这样简单地加载属性：

```
<context:property-placeholder location:"classpath*:app.properties"/> 
```

有没有机会在没有样板的情况下在@Configuration bean（〜来自java代码）中配置相同的属性？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-05T16:26:54.320

`@PropertySource`您可以像这样使用注释

```
@Configuration
@PropertySource(value="classpath*:app.properties")
public class AppConfig {
 @Autowired
 Environment env;

 @Bean
 public TestBean testBean() {
     TestBean testBean = new TestBean();
     testBean.setName(env.getProperty("testbean.name"));
     return testBean;
 }
} 
```

请参阅：[http ://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/PropertySource.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/PropertySource.html)

编辑：如果您使用的是spring boot，您可以使用`@ConfigurationProperties`注释将属性文件直接连接到bean属性，如下所示：

测试属性

```
name=John Doe
age=12 
```

人属性.java

```
@Component
@PropertySource("classpath:test.properties")
@ConfigurationProperties
public class GlobalProperties {

    private int age;
    private String name;

    //getters and setters
} 
```

来源： [https ://www.mkyong.com/spring-boot/spring-boot-configurationproperties-example/](https://www.mkyong.com/spring-boot/spring-boot-configurationproperties-example/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T08:37:43.557

手动配置可以通过以下代码完成

```
public static PropertySourcesPlaceholderConfigurer loadProperties(){
  PropertySourcesPlaceholderConfigurer propertySPC =
   new PropertySourcesPlaceholderConfigurer();
  Resource[] resources = new ClassPathResource[ ]
   { new ClassPathResource( "yourfilename.properties" ) };
  propertySPC .setLocations( resources );
  propertySPC .setIgnoreUnresolvablePlaceholders( true );
  return propertySPC ;
} 
```

来源：[属性占位符](http://www.baeldung.com/2012/02/06/properties-with-spring/#byhandnew)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:27:36.397

一个简单的解决方案是您的 bean 还将包含一些 init 函数：

在你的 spring 配置中，你可能会提到它：

`<bean id="TestBean" class="path to your class" init-method="init" singleton="false" lazy-init="true" >`

init 将在所有属性通过 setter 设置后调用，在此方法中您可以覆盖已设置的属性，也可以设置任何属性。

# java - 当用户无权访问struts中的页面时如何重定向到homepage.do？

> ID：14724514
> 
> 赞同：1
> 
> 时间：2013-02-06T08:23:23.063
> 
> 标签：java, struts, acl, roles

我的应用程序正在使用 struts 1，并且页面使用 struts-config.xml 中操作路径的属性“roles”受角色保护（即：如果用户的角色不允许他访问页面，则用户无法访问页面）：

```
<action path="/ProtectedPageAction" type="org.apache.struts.actions.ForwardAction"
    parameter="ProtectedPage" roles="admin" /> 
```

这样，如果用户没有登录或没有“管理员”角色，他会看到主页而不是受保护的页面。

现在，所有这些都完美运行，唯一的问题是浏览器中的 URL（因此 servlet_path 的值）不是“homepage.do”而是“ProtectedPageAction.do”，或者换句话说，servlet_path 不是“in同步”与显示的页面。

我需要使用 servlet_path 的值，因此当用户无权查看页面时，浏览器中显示的 url 必须是“homepage.do”而不是“ProtectedPageAction.do”；这也是出于安全原因：如果用户注意到 URL 中的“ProtectedPageAction.do”可能会开始想知道它的用途以及如何访问它等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:59:23.557

重定向通常通过设置动作转发属性redirect="true" 来完成。在您的情况下，您需要创建操作

```
public class RedirectAction extends ForwardAction {
  @Override
  public ActionForward execute(
    ActionMapping mapping,
    ActionForm form,
    HttpServletRequest request,
    HttpServletResponse response)
    throws Exception {

    // Create a RequestDispatcher the corresponding resource
    String path = mapping.getParameter();

    if (path == null) {
        throw new ServletException(messages.getMessage("forward.path"));
    }

    // Let the controller handle the request
    ActionForward retVal = new ActionForward(path, true);
    retVal.setContextRelative(true);

    return retVal;
  }
} 
```

或者自然使用配置

```
<action path="/ProtectedPageAction" type="org.yourname.struts.actions.ProtectedPageAction"
    parameter="ProtectedPage" roles="admin">
  <forward name="success" path="/Homepage.do" redirect="true"/>
</action>

public class ProtectedPageAction extends Action {
  @Override
  public ActionForward execute(
    ActionMapping mapping,
    ActionForm form,
    HttpServletRequest request,
    HttpServletResponse response)
    throws Exception {

    // Let the controller handle the request
    ActionForward retVal = mapping.findForward("success");
    retVal.setContextRelative(true);

    return retVal;
  }
} 
```

# boost - Boost串口写错数据发送

> ID：14724515
> 
> 赞同：0
> 
> 时间：2013-02-06T08:23:23.253
> 
> 标签：boost, serial-port, boost-asio

我正在使用 boost asio 串行函数通过串行端口发送数据。我过去曾使用过它，它按我的意愿工作。但现在它的行为很奇怪。这是我用来发送数据的代码：

```
int data = 97;    //represents 'a'
string sendThis = "0";
sendThis[0] = (char)data;
cout<<sendThis<<" "<<data<<endl;
boost::asio::write(serial,boost::asio::buffer(sendThis,1)); 
```

问题是：当我发送大于 128 的数据时，我得到的正是我发送的数据。但是当我尝试发送小于 128 的字符时；在另一边，我得到了 128，这是 225 的“a”。由于这个问题，我总是在 128 到 255 之间。我尝试了不同的发送方法，结果总是相同的。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:28:03.093

我解决了我的问题。问题是前面在评论中提到的数据位选项。所以**永远不要相信默认值**，尤其是在它可以保护以前的状态的情况下。所以我认为数据位选项以某种方式发生了变化，并且它总是使用该值。我通过摘要设置选项：

```
serial_port_base::character_size x(8);
serial_port serial(io,"COM58");
serial.set_option(x); 
```

之后它起作用了。比我通过评论设置选项再次尝试。它再次奏效了。所以我想它保护了以前的状态。所以要小心使用默认值。**它们可能不再是默认值了。**

# jsf - p:commandLink 无法在新窗口/选项卡中打开页面

> ID：14724518
> 
> 赞同：22
> 
> 时间：2013-02-06T08:23:46.430
> 
> 标签：jsf, jsf-2, primefaces, commandlink

我正在尝试创建一个链接以在不同的窗口/选项卡中打开一个新页面并显示来自支持 bean 的一些消息但未能做到，想知道为什么？

这是我的 xhtml 文件：

```
<html:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:ui="http://java.sun.com/jsf/facelets">
  <h:body>
    <h:form id="form66">
    <p:commandLink actionListener="#{testing.getMessage}" action="msg.xhtml" target="_blank">get Msg</p:commandLink>
    </h:form>
  </h:body>
</html> 
```

这是我的 Msg.xhtml 页面

```
<HTML xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:ui="http://java.sun.com/jsf/facelets">
  <h:head>
    <title>testing</title>
  </h:head>
  <h:body>
    <div class="div">
      <p:panel>
        <f:facet name="header">
          testing
        </f:facet>
        <div class="paddingForPanel">
          <h:outputText value="#{testing.msg}" escape="false"/>             
        </div>
      </p:panel>            
    </div>
  </h:body>
</HTML> 
```

这是我的 testing.java

```
public void getMessage() {      
    this.msg = "haha";
}

private String msg;
public String getMsg() {
    return msg;
}
public void setMsg(String msg) {
    this.msg = msg;
} 
```

上面的代码无法打开一个新标签/窗口，我尝试像下面这样，它成功在新标签中打开新页面但味精是空的，当我调试时，它成功调用监听器getMessage，我想知道为什么 msg.xhtml 页面中的 msg 为空？提前致谢....

```
<p:commandLink actionListener="#{testing.getMessage}" oncomplete="window.open('msg.xhtml')">broadcast Msg</p:commandLink> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-06T10:22:50.253

`<p:commandLink>`有一些 ajax 问题，请 `<h:commandLink>` 改用。

```
 <h:commandLink actionListener="#{testing.printMessage}" action="/Msg.html" target="_blank">get Msg</h:commandLink> 
```

更改`<p:commandLink>`为`<h:commandLink>`，您的代码工作正常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-14T05:49:09.173

两者都不起作用，所以问题不在 primefaces ajax 中。p:commandLink 的目标属性中的问题它不起作用...

```
<p:commandLink value="New Window" ajax="false" target="_blank" action="test"/>

<p:commandLink value="New Window" target="_blank" action="test"/> 
```

所以我们必须使用

```
<h:commandLink value="New Window" target="_blank" action="test"/> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-20T06:46:14.687

我这样做：

```
<p:commandLink id="link" actionListener="#{testing.getMessage}" 
    oncomplete="popupwindow('msg.xhtml', 'newwindow');" >  
    <h:outputText value="broadcast Msg" />
</p:commandLink> 
```

使用一些javascript：

```
<script type="text/javascript">    
function popupwindow(url, title) {      
    window.open(url , title, "toolbar=no, scrollbars=yes, resizable=yes, top=170, left=170, width=800, height=600");        
}    
</script> 
```

在此示例中，您打开一个新窗口，希望对您有所帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-18T12:29:15.787

## 如果您使用的是远程命令，那么您可以这样做

```
<p:remoteCommand name="lookAndBookNewTab"
     process="@this" action="#{lookAndBookMB.onPageLoadForNewTab()}"
     rendered="#currentUserManager.
     hasPermission('LookAndBook','View')}"             update=":messageForm:growl" /> 
```

还有我的 javascript：

```
<script> 
    if(event.ctrlKey &amp;&amp; event.shiftKey &amp;&amp; event.keyCode == 119) {
     lookAndBookNewTab(); 
    event.preventDefault();
</script> 
```

* * *

服务器端动作方法：

```
public String onPageLoadForNewTab(){
    HttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest(); String url = req.getRequestURL().toString();
        url=(url.substring(0, url.length() - req.getRequestURI().length()) + req.getContextPath() + "/"); url=url+navigationpagename+".jsf"; RequestContext.getCurrentInstance().
        execute("window.open('"+url+"','_blank')");** 
    return ""; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-22T14:51:30.553

如果有人对此感到疑惑，请使用 Primefaces 9、10、11 执行此操作

```
<p:commandLink value="New Window" ajax="false" target="_blank" action="test"/> 
```

在您不想使用 h:commandLink 的情况下确实有效

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-24T07:30:30.967

在你的控制器代码中试试这个，它对我很有效。

```
HttpServletResponse res = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
            HttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
            String uri = req.getRequestURI();
            res.getWriter().println("<script>window.open('" + myUrl + "','_blank', 'location=yes,height=600,width=800,scrollbars=yes,status=yes'); window.parent.location.href= '"+uri+"';</script>");
            FacesContext.getCurrentInstance().responseComplete(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-01-19T17:02:12.773

像这样，

```
<h:link target="_blank" value="Other page" outcome="your url"></h:link> 
```

祝你好运！

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-08-05T04:28:24.250

像这样

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
     'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>

     <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <h:outputStylesheet library="base" name='jquery-ui-1.8.16.custom.css' />
    </h:head>
    <span style="background-color: rgb(192, 192, 192);">
      <h:form target="_blank">
        <p:commandButton value="Run" action="#{bean.createReport}"  />
      </h:form>
    </span>
    </html> 
```

请参阅：[在此处输入链接描述](https://stackoverflow.com/questions/13146940/jsf-target-blank-not-working-with-primefaces-commandbutton)

# git - 无法使用 TeamCity 和一个 git 子模块构建

> ID：14724520
> 
> 赞同：1
> 
> 时间：2013-02-06T08:23:52.580
> 
> 标签：git, teamcity

我正在尝试使用带有一个子模块的 repo 进行构建，`TeamCity 6.5.6`但`git`“无法开始构建”。

`.gitmodules`文件：

```
[submodule "src/shared-contracts"]
path = src/shared-contracts
url = gitolite@myserver:shared-contracts 
```

堆栈跟踪：

`Failed to start build: Server was not able to build correct patch, most likely due to VCS errors, will try again. jetbrains.buildServer.agent.impl.patch.PatchDownloaderImpl$1: Server was not able to build correct patch, most likely due to VCS errors, will try again.`

`Caused by: jetbrains.buildServer.vcs.patches.UnsuccessfulPatchException: Failed to build patch for build #s5 {build id=19947}, VCS root: gitolite@myserver:myrepo#mapi-qa {instance id=1152, parent id=280}, due to error: Patch building failed: org.eclipse.jgit.errors.CorruptObjectException: Repository 'gitolite@myserver:myrepo' has submodule in commit 'c8f8416d86e3ed274302ff2f316792a37f041322' at path 'src/shared-contracts', but has no entry for this path in .gitmodules configuration.`

我在本地做了一个全新的克隆，从 TC 配置中检查了分支，`git submodule update --init`并将子模块正确地检查到了 src/shared-contracts。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T23:48:45.860

我更新到`TeamCity`7.1.3，问题继续出现。

我在回答[如何删除子模块后删除了子模块？](https://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule)

然后我重新添加了它，但这次将 URL 设置为

`url = gitolite@myserver:shared-contracts.git`

代替

`url = gitolite@myserver:shared-contracts`问题就解决了。

# php - PHP 中不推荐使用派生类构造函数名称？

> ID：14724530
> 
> 赞同：6
> 
> 时间：2013-02-06T08:24:48.460
> 
> 标签：php, oop, syntax

目前，PHP 支持构造函数的两种命名约定。PHP 4 支持 Java 风格的构造函数：

```
class A
{
    public function A()
    {
        echo "I'm a constructor for class A!";
    }
} 
```

PHP 5 支持 Java 风格的构造函数和“魔术方法”语法：

```
class A
{
    public function __construct()
    {
        echo "I'm a constructor for class A!";
    }
} 
```

Java 风格的语法将被弃用，并且[它的某些功能在最新的 PHP 中不起作用](http://php.net/manual/en/language.oop5.decon.php)。但是，它有一个有趣的属性，我不知道与“魔术方法”语法类似。如果派生类`foobar`没有显式构造函数，则`foobar`基类的方法成为`foobar`构造函数：

```
class A
{
    public function A()
    {
        echo "I'm a constructor for class A!";
    }

    public function B()
    {
        echo "I'm a constructor for class B!";
    }
}

class B extends A
{
} 
```

由于 Java 风格的构造函数已被弃用，那么 set-the-constructor-in-the-parent 语言特性会变成什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:52:33.353

对于 PHP 4，您可能在[这里学到了这一点。](http://php.net/manual/en/oop4.constructor.php)

如您所知，在 PHP 5 文档（[此处](http://php.net/manual/en/language.oop5.decon.php)）中指出，如果没有使用或继承 __construct()，则旧语法将作为后备使用：

> 为了向后兼容，如果 PHP 5 找不到给定类的 __construct() 函数，并且该类没有从父类继承一个，它将按类的名称搜索旧式构造函数。实际上，这意味着唯一会出现兼容性问题的情况是，如果该类有一个名为 __construct() 的方法，该方法用于不同的语义。

所以旧语法应该仍然有效，如 PHP 5.4.11。即使可以预见，目前也没有明确的弃用计划。

无论如何，当（以及是否）它们将被删除时，此功能也将被删除，因为无法使用 __construct() 语法重现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:32:07.410

你现在在做什么 PHP 安装？

如果您有 PHP 5 安装：

如果您正在制作新课程，请使用新样式。如果您已经有以前样式的类，它们仍然可以工作，但是，如果可以的话，最好更新它们。

如果您有 PHP 4 安装：

Yopu 必须使用以前的样式。如果您稍后更改为 PHP 5，它们也可以工作。

干杯。

# c# - c# windows 应用程序中如何通过单击 TableLayoutPanel 中的子控件来获取父控件索引

> ID：14724534
> 
> 赞同：0
> 
> 时间：2013-02-06T08:24:51.957
> 
> 标签：c#, windows

我需要一些澄清，请任何人帮助我提前谢谢。

我有一个面板，其中包含多个控件，例如标签、datagridview、文本框和按钮。我将“n”个面板动态添加到`TableLayoutPanel`. 我需要将记录从一个 datagridview 传输到另一个 datagridview，其中一个位于对应的`TableLayoutPanel`. 我的问题是，如何识别发送到哪个数据网格的数据。是否有可能通过单击子控件来获取列索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:42:04.433

在每个单元格中放置虚拟图像对象。在 TableLayoutPanel 的 Drop 事件上试试这个

```
private void tableLayoutPanel1_DragDrop(object sender, DragEventArgs e)
{
    Point p = tableLayoutPanel1.PointToClient(new Point(e.X, e.Y));
    Control c = tableLayoutPanel1.GetChildAtPoint(p);
    int row = tableLayoutPanel1.GetRow(c);
    int col = tableLayoutPanel1.GetColumn(c);
} 
```

如果您想知道在 Gridview 中单击的说按钮的索引...

1-在创建它们时动态地将行列信息存储在标签中，例如“1-2”，然后再使用它

2-您可以迭代查找 row-col 以查看匹配的位置。

如果您有 DataGridViewCell 的参考

然后很简单：

DataGridViewCell.RowIndex DataGridViewCell.ColumnIndex

# c# - 是否可以通过 WCF 实现/保留延迟执行？

> ID：14724542
> 
> 赞同：0
> 
> 时间：2013-02-06T08:25:37.387
> 
> 标签：c#, wcf, linq, entity-framework-4, deferred-execution

最初，我有一个预期延迟执行的 LINQ 查询（比如 EF 或任何其他查询）：

```
class Provider : IProvider
{
    public IEnumerable<Any> GetSome()
    {
         yield return new Any(); // LINQ query
    }
} 
```

但是现在这样的提供者转移到了 WCF 服务（和 IoC）中：

```
unityContainer.RegisterType<IProvider>(
    new PerResolveLifetimeManager(),
    new InjectionFactory(c => new ChannelFactory<T>("IService").CreateChannel())); 
```

是否可以通过 WCF 调用保留延迟执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:10:44.750

这个答案实际上是对您对 Ladislav Mrnka 的最后评论的回答。你说：

> 好的，我明白了，所以不可能有“免费甜甜圈”。在 LINQ to Any 中，我们有这样的行为，但有必要跨越服务边界，即要（反）序列化的数据会破坏它，对吗？

虽然它不是免费的，但它仍然是可能的！

在服务器端，您必须提供一个初始化请求的方法和一个获取结果的方法，一个一个。

在客户端——特别是在它的一个低级基础设施类中——您可以将它包装在一个枚举器中，最后，您的“业务”类可以像使用其他枚举器一样使用该枚举器。

我们已经讨论过，它将在每个项目所需的请求-响应方式中引入额外的开销。这将引入延迟并增加网络负载。

使用伪 RESTful API 的这种方法的示例可能如下所示：

服务器端：

*   `POST http://server/api/search-specification`:
    正文包含搜索所需的参数，例如开始日期和结束日期
    。响应将是标识搜索规范的 URI。
*   `GET http://server/api/search-specification/1/next-result`：
    响应将是下一个项目。

这个控制器看起来像这样：

```
public Response PostSearchSpecification(SearchSpecification spec)
{
    int id = _searches.Max(x => x.Key) + 1; // Make thread-safe
    _searches[id] = _provider.GetSome().GetEnumerator();
    return ...;
}

public Item GetNextResult(int searchSpecId)
{
    if(_searches[searchSpecId].MoveNext())
        return _searches.Current;
    else
        return null; // or return a HTTP status code that tells the
                     // client that there are no more items.
} 
```

我称它为伪 RESTful API，因为它看起来确实像一个，但它需要在内部保持每个规范的状态以启用延迟执行。另外`GET http://server/api/search-specification/1/next-result`不是幂等的。
但我认为它证明了我的意思:)

客户端会像这样封装它：

```
class Search
{
    public IEnumerable<Item> Start(params)
    {
        var client = new HttpClient(...);
        var resultsUri = client.Post(new SearchSpecification(params)).Response;
        Item item = client.Get<Item>(resultsUri);
        while(item != null)
        {
            yield return item;
            item = client.Get<Item>(resultsUri);
        }
    }
} 
```

你会像这样使用它：

```
var search = new Search();

foreach(var item in search.Start(...))
    // ... 
```

只是一个关于如何实现这样的东西的原始草图。

# c# - Handle OemMinus key in custom Numeric TextBox control - Silverlight

> ID：14724547
> 
> 赞同：0
> 
> 时间：2013-02-06T08:25:49.133
> 
> 标签：c#, silverlight, silverlight-4.0, custom-controls

I have custom control (Numeric TextBox- which allows only numeric keys). When i am pressing subtract key from NumPad, it's working fine. But when i am pressing OemMinus key(key near to '0'[DPad key]), OnKeyDown event returns 'unknown' key.

I want to handle OemMinus Key.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T20:12:00.060

I guess that this key cannot be identified because it is platform specific. ie it only appears on Windows keyboards (as distinct from Mac keyboards). Silverlight is cross-platform.

You should be able to identify the key using the `KeyEventArgs.PlatformKeyCode` property, but note that this is platform specific.

Perhaps you can check for `(e.Key == Key.Unknown && e.PlatformKeyCode == x)`

# haskell - Haskell 的图形和网络库

> ID：14724548
> 
> 赞同：9
> 
> 时间：2013-02-06T08:25:57.000
> 
> 标签：haskell, tree, haskell-platform

对 Haskell 的良好图形和网络库有什么建议吗？

我正在寻找类似[networkx](http://networkx.github.com/) 库为 Python 提供的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T09:24:22.280

我发现[fgl](http://hackage.haskell.org/package/fgl/)（另见[主页](http://web.engr.oregonstate.edu/~erwig/fgl/haskell/ "fgl 主页")）很容易使用。我对networkx不熟悉，所以我不知道它如何比较。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T09:26:49.283

[容器](http://hackage.haskell.org/package/containers-0.5.2.1)包中有一个图形数据结构。[你可以在这里](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Graph.html)查看它的界面。

[此外，您可以使用Hayoo](http://holumbus.fh-wedel.de/hayoo/hayoo.html)搜索 haskell 平台上的所有可用软件包或通过 Cabal 的其他软件包！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-14T12:38:09.943

这是一个超过一年的问题，但如果有人寻找 lib - [igraph 包提供了与](https://hackage.haskell.org/package/igraph)**igraph-C**库的图形属性有关的所有函数的绑定。它不会与比**0.6.5更新的****igraph-C**版本一起编译，因为作者没有时间维护它，正如 Nils Schweinsberg 所说：Pull requests are wellcome。此外，并非原始库中的所有函数都具有 Haskell 绑定，但可以使用**FFI**编写一些函数。

 ******fgl**是一个非常漂亮的库，实现了归纳图的功能概念，但它缺乏**igraph 库**的功能：您可以创建有向/无向加权/未加权图，并在考虑到这一点的情况下实现算法。

**如果有经验的haskeller 进一步照顾它 **，igraph 包对于Haskell 社区来说可能是一个非常有价值的库。********

# php - Yii addInCondition 与浮点数：如何？为什么 addInCondition('column', array(1.1, 1.3)) 不起作用？

> ID：14724551
> 
> 赞同：9
> 
> 时间：2013-02-06T08:26:02.523
> 
> 标签：php, sql, yii

如何用浮点数添加InCondition？

我尝试了很多。

这工作正常：

```
$criteria=new CDbCriteria();
$criteria->addInCondition('order_id',array(36907));
$tasks=OrderTask::model()->findAll($criteria); 
```

就我而言，它返回 4 个模型：

![](../Images/9652abac58d8b3147d65ff14921962e5.png)

但如果我尝试

```
$criteria=new CDbCriteria();
$criteria->addInCondition('order_id',array(36907));
$criteria->addInCondition('step',array(3.20));
$tasks=OrderTask::model()->findAll($criteria); 
```

或者

```
$criteria=new CDbCriteria();
$criteria->addInCondition('step',array("3.20"));
$tasks=OrderTask::model()->findAll($criteria); 
```

或者

```
$criteria=new CDbCriteria();
$criteria->addInCondition('step',array('3.2'));
$tasks=OrderTask::model()->findAll($criteria); 
```

结果为空。

根据日志，查询为：

> system.db.CDbCommand.query(SELECT * FROM `orders_tasks` `t`WHERE step=:ycp1\. 绑定:ycp1=3.2)

phpmyadmin 中的此查询返回 5360 行

```
SELECT * FROM  `orders_tasks`  `t` WHERE step = 3.20 
```

phpmyadmin 中的此查询返回 0 行

```
SELECT * FROM  `orders_tasks`  `t` WHERE step = '3.20'
SELECT * FROM  `orders_tasks`  `t` WHERE step = '3.2'
SELECT * FROM  `orders_tasks`  `t` WHERE step = "3.20" 
```

这次尝试

```
$criteria=new CDbCriteria();
$criteria->addInCondition('step',array("3,20"));
$tasks=OrderTask::model()->findAll($criteria); 
```

返回 step=3 OR 20 的模型

phpmyadmin 中的此查询返回 step=3 OR 20 的行

```
SELECT * FROM  `orders_tasks`  `t` WHERE step = '3,20' 
```

那么，如何`addInCondition`使用花车呢？

# 细节，例如

`step`字段是`float(8,2)`

Sql 表转储：

```
CREATE TABLE IF NOT EXISTS `orders_tasks` (
  `task_id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `step` float(6,2) NOT NULL,
  `done` int(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`task_id`),
  KEY `order_id` (`order_id`),
  KEY `step` (`step`),
  KEY `orderstep` (`order_id`,`step`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ; 
```

Yii 版本：1.1.10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:45:14.227

```
DROP TABLE IF EXISTS `prefix_test`;

CREATE TABLE IF NOT EXISTS `prefix_test` (
  `task_id` int(11) NOT NULL AUTO_INCREMENT,
  `order_id` int(11) NOT NULL,
  `step` float(6,2) NOT NULL,
  `done` int(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`task_id`),
  KEY `order_id` (`order_id`),
  KEY `step` (`step`),
  KEY `orderstep` (`order_id`,`step`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;

INSERT INTO `prefix_test` VALUES (1,36907,3.20,0);
INSERT INTO `prefix_test` VALUES (2,36907,3.21,0);
INSERT INTO `prefix_test` VALUES (3,37907,4.13,0);

$criteria=new CDbCriteria();
$criteria->addInCondition('order_id',array(36907));
$criteria->addInCondition('step',array(3.20));
$tests=Test::model()->findAll($criteria);

echo "Rows: ".count($tests)."<br>";
#Returns Rows: 0 
```

Yii 日志中的查询

```
SELECT * FROM `prefix_test` `t` WHERE (order_id=:ycp0) AND (step=:ycp1). Bound with :ycp0=36907, :ycp1=3.2 
```

MySql 日志中的真实查询

```
SELECT * FROM `prefix_test` `t` WHERE (order_id=36907) AND (step='3.2') 
```

这将解决您的问题

```
ALTER TABLE `prefix_test` CHANGE `step` `step` decimal(10,2) NOT NULL; 
```

之后您的查询返回

```
#Returns Rows: 1 
```

# ruby-on-rails-3 - PaperClip 和 Rails 3 的图像调整大小问题

> ID：14724557
> 
> 赞同：2
> 
> 时间：2013-02-06T08:26:47.850
> 
> 标签：ruby-on-rails-3, imagemagick, paperclip, ruby-1.9.3

自从升级到 Ruby 1.9.3、Rails 3.1.0.rc4 和 Paperclip 3.4.0 后，我的应用程序图像渲染出现了严重问题。

无论我给 Paperclip 提供何种设置变化，链接到下面的 infile 都会*变得模糊*，如链接的 outfile 所示。

输出文件必须适合 620x412 的盒子，如此处[所示](http://www.rightmove.co.uk/property-to-rent/property-25482672.html)。

[链接到输入文件](https://docs.google.com/file/d/0B9sM1xgTybOWNFpwVnkzdTZKSUk/edit?usp=sharing)

[链接到此代码生成的输出文件](https://docs.google.com/file/d/0B9sM1xgTybOWS01EQy14Q2I3R3M/edit?usp=sharing)

该模型的完整代码如下...

```
class Propertyimage < ActiveRecord::Base

  belongs_to :property

  validates_presence_of :description
  validates_presence_of :sortorder

  has_attached_file :image, :styles => { :export => {:geometry => "620x412#", :quality =>    100, :format => 'JPG'} },
  :path => ":rails_root/public/system/:attachment/:id/:style/:filename",
  :url => "/system/:attachment/:id/:style/:filename"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T05:00:02.500

我遇到了类似的问题，经过大量试验和错误后，我能够使用三个标准进行修复：图像大小规范、convert_options 和缩放图像。例如，在您的 Propertyimage 类中尝试：

```
has_attached_file :image, 
  :styles => { :original => ["640x480", :jpg], :export => {:geometry => "620x412#", :quality => 100, :format => 'JPG'} },
  :convert_options => { :all => "-quality 100" },
  :path => ":rails_root/public/system/:attachment/:id/:style/:filename",
  :url => "/system/:attachment/:id/:style/:filename" 
```

然后您可以使用图像标签的大小，或者在我使用 PDF 的情况下，Id 使用了 scale 选项：

```
pdf.image the_file_name, :at => [0, 720], :scale => 0.75 
```

# objective-c - xib 参考 IBOutlet / IBAction 未由 XCode 正确重构

> ID：14724559
> 
> 赞同：1
> 
> 时间：2013-02-06T08:26:57.727
> 
> 标签：objective-c, xcode, refactoring

好的，这是一个非常奇怪的错误。我有一个`UIViewController`子类和一个关联的 Xib

它是最初由外包商构建的继承项目的一部分，并且许多属性和方法的名称拼写错误，`categorys`而不是`categories`，`merchantes`而不是`merchants`，`don`而不是`done`等等......

大多数重构这些都很简单，XCode 的符号重命名重构工具可以很好地处理它们。

但是对于有问题的 xib 和控制器，在重构之后，存在一些运行时错误，即`this class is not key value coding-compliant`和`unrecognised selector`错误，它们都命名为旧的`IBOutlet`和`IBAction`名称。

搜索名称时，它们不会出现，并且专门在 xib 中作为 XML 源进行搜索，它们也不会出现。

我通过添加两个有问题的符号来解决这个问题，同时保留对更正名称的引用和所有其他调用。（即旧名称不链接到任何其他代码或 xib 引用。）

问题是，为什么以及在哪里调用这些旧符号名称？

（注：所有的IB引用都检查过了，项目也清理了好几次。）

这是有问题的参考文献（在 IB 中正确映射。）

![ib 属性参考](../Images/cff40643cb840d43f4fbdc93b4f96631.png)

![ib 选择器参考](../Images/03ac6e455a0f36d7fbc27f14db17f28a.png)

源视图中显示的*连接...*

请注意，旧引用“navTitleLavel”和“donAction”如果从源中删除，则会引发错误，尽管它们在边距中未显示为*连接。*

![在此处输入图像描述](../Images/6fa4cdc79bdcb8315aab1379d6ab6317.png)

![在此处输入图像描述](../Images/61403ffcf26f40d96b1b7233715690eb.png)

# 现在已修复

## （不做任何事情，假设缓存保存了符号）

请参阅下面的答案，似乎符号引用被缓存在*某处*，并且没有其他操作，不再抛出错误（删除旧名称引用时。）

请注意，这对清理项目有抵抗力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:38:27.607

我以前遇到过这样奇怪的错误并通过

1.  清理项目（Command + K）。

2.  检查 IB 中的每个连接，以免它们链接到旧的东西（don、类别等）

3.  重新启动 xCode。（真正退出应用程序并重新启动它）

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T21:16:11.810

我也遇到了这个问题，简单的清理并不总是足以摆脱设备上缓存文件中可能存在的剩余引用。如果简单的清理不能解决问题，请确保从 iOS 设备上实际删除应用程序或重置模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:09:50.353

尽管进行了多次清理和三重检查，`grep`但`ack`XCode`ag`和 XCode 的项目范围的文本搜索**无法**找到引发错误的引用。错误仍然存​​在。

然而，今天早上我又试了一次，你瞧，幽灵引用不再抛出错误。

似乎有某种 nib 引用缓存在 Project Clean 之后仍然存在，但在 x 时间后过期。

注意：clean 操作运行了超过 10 次，没有修复错误。

我还更新了问题以提供一些说明性细节。

# oracle-apex - 更改 APEX 页面的宽度和高度

> ID：14724562
> 
> 赞同：2
> 
> 时间：2013-02-06T08:27:25.777
> 
> 标签：oracle-apex

我有一个 APEX 页面，上面有一个按钮，当他们单击该按钮时，它会在主页顶部打开另一个页面，我正在尝试设置此弹出窗口的宽度和高度。我在页面属性的 CSS 部分下的“内联”框中尝试了以下内容，但它并没有像它所说的那样推翻主要的 CSS，任何人都可以看到它有任何问题吗？

```
.body{
width:200px;
height:200px;
     } 
```

我真的不想在共享组件中设置它，因为我只需要这个 IE 窗口/页面是特定大小。

这些大小还会设置 IE 窗口的大小还是仅设置页面的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:27:16.497

你不能用 CSS 做到这一点。
您可以尝试使用 window.resizeTo 函数，如下所示：[Javascript set browser window size](https://stackoverflow.com/questions/5238603/javascript-set-browser-window-size)

编辑您的弹出页面，并将代码添加到“页面加载时执行”部分：`window.resizeTo(200,200);`

我在 IE8 和 firefox 中试过这个，它可以工作。

# iphone - 通过使用单个语句执行多个查询来获取最大值

> ID：14724568
> 
> 赞同：0
> 
> 时间：2013-02-06T08:27:54.660
> 
> 标签：iphone, objective-c, sqlite

我是 iphone 开发的新手。我有一个 sql 查询**“从测试中选择 pubdate，其中 rowid 在（从测试中选择 max（rowid））”**。当我执行这个查询时，我没有得到适当的结果。源代码：

```
NSString *query=[NSString stringWithFormat:@"select pubdate from %@ where rowid in(select max(rowid) from %@)",tableName,tableName];
const char *  sql = [query UTF8String];
sqlite3_stmt *lastInsVal_statement = nil;
NSArray * paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString * docsDir = [paths objectAtIndex:0];
NSString * thePath = [docsDir stringByAppendingPathComponent:
                      @"Training_Project2.sqlite"];
sqlite3_open([thePath UTF8String], &database);
sqlite3_prepare_v2(database, sql, -1, &lastInsVal_statement, NULL);
NSString* pubdate;
while(sqlite3_step(lastInsVal_statement)==SQLITE_ROW){
    const char* str = (const char*)sqlite3_column_text(lastInsVal_statement, 2);
    pubdate = [NSString stringWithCString:str encoding:NSUTF8StringEncoding];
}
sqlite3_finalize(lastInsVal_statement);
sqlite3_close(database);
return pubdate; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:06:34.943

这一行：

```
const char* str = (const char*)sqlite3_column_text(lastInsVal_statement, 2); 
```

应该改成这一行：

```
const char *str = (const char *)sqlite3_column_text(lastInsVal_statement, 0); 
```

`0`表示您想要获取您在查询中选择的第一列！

# gwt - 当客户端处于调试模式时，GWT 应用程序抛出异常

> ID：14724569
> 
> 赞同：0
> 
> 时间：2013-02-06T08:27:59.240
> 
> 标签：gwt

如果我启动 URL [code]http://localhost:8888/app1.html?[/code] 并单击一个按钮，它工作正常。在本地主机上调用我的 RPC 很好。但是，如果我随后更改 URL 以使客户端处于调试模式，即 [code]http://localhost:8888/app1.html?gwt.codesvr=localhost:[/code] 然后它会在它的位置引发异常调用本地服务器上的 RPC 服务。

这是异常代码。

```
08:08:41.482 [ERROR] [nquizitive] Uncaught exception escaped

com.google.gwt.event.shared.UmbrellaException: One or more exceptions caught, see full set in UmbrellaException#getCauses
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:129)
    at com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:129)
    at com.google.gwt.event.dom.client.DomEvent.fireNativeEvent(DomEvent.java:116)
    at com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:177)
    at com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1351)
    at com.google.gwt.user.client.DOM.dispatchEvent(DOM.java:1307)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.AssertionError: null
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.&lt;init&gt;(RequestCallbackAdapter.java:182)
    at com.google.gwt.user.client.rpc.impl.RemoteServiceProxy.doCreateRequestCallback(RemoteServiceProxy.java:347)
    at com.google.gwt.user.client.rpc.impl.RemoteServiceProxy.doPrepareRequestBuilderImpl(RemoteServiceProxy.java:433)
    at com.google.gwt.user.client.rpc.impl.RemoteServiceProxy.doInvoke(RemoteServiceProxy.java:368)
    at com.google.gwt.user.client.rpc.impl.RemoteServiceProxy$ServiceHelper.finish(RemoteServiceProxy.java:74)
    at com.app.nquizitive.client.service.CategoryService_Proxy.createCategory(CategoryService_Proxy.java:32)
    at com.app.nquizitive.client.presenter.HomeViewPresenter$2.onClick(HomeViewPresenter.java:60)
    at com.google.gwt.event.dom.client.ClickEvent.dispatch(ClickEvent.java:54)
    at com.google.gwt.event.dom.client.ClickEvent.dispatch(ClickEvent.java:1)
    at com.google.gwt.event.shared.GwtEvent.dispatch(GwtEvent.java:1)
    at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
    at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
    at com.google.web.bindery.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:88)
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:127)
    at com.google.gwt.user.client.ui.Widget.fireEvent(Widget.java:129)
    at com.google.gwt.event.dom.client.DomEvent.fireNativeEvent(DomEvent.java:116)
    at com.google.gwt.user.client.ui.Widget.onBrowserEvent(Widget.java:177)
    at com.google.gwt.user.client.DOM.dispatchEventImpl(DOM.java:1351)
    at com.google.gwt.user.client.DOM.dispatchEvent(DOM.java:1307)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source) 
```

导致问题的行是对类别服务的调用。

```
public void onClick(ClickEvent event){
    display.getNewCategoryName();
    categoryService.createCategory( display.getNewCategoryName(), null )
} 
```

刚刚注意到我得到了异常，因为异步回调为空。如果我对响应不感兴趣，我可以不将其设置为 null。这基本上是一个火灾和忘记电话。

这是有效的代码

```
public void onClick(ClickEvent event){

     display.getNewCategoryName();
     categoryService.createCategory( display.getNewCategoryName(), new AsyncCallback(){

         public void onFailure(Throwable caught){
             Window.alert("Error fetching categorys");
         }

         @Override
         public void onSuccess(Object result){
             //New Category added so update display
             fetchCategorys();
         }

     });
} 
```

仍然不明白为什么 null Async 回调对象在运行模式下工作:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:08:16.043

在 prod 模式下它不会失败的原因是这是一个断言 ( `assert callback != null`)，并且断言在 prod 模式下默认禁用。

鉴于没有代码在调用之前`onSuccess`或`onFailure`在它上检查回调是否为空（因为，你知道，我们已经断言它是非空的），我敢打赌它实际上在 prod 模式下**确实**失败了：如果你看JS 控制台在您的浏览器中，您应该会看到一个错误，例如*cannot call method 'xxx' of null*。如果你有一个`GWT.UncaughtExceptionHandler`它会被回调那个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:06:06.040

如果您在调试配置参数选项卡中看到

```
-remoteUI "${gwt_remote_ui_server_port}:${unique_id}" -startupUrl index.html -logLevel INFO -codeServerPort 9997 -port 8888 -war E:\workspace 
```

远程Ui服务器端口应该有一个`codeServerPort` 端口9997 ..所以你必须提供你的网址，如下所示

```
http://127.0.0.1:8888/app1.html?gwt.codesvr=127.0.0.1:9997 
```

您可以在 eclipse debug config 中更改端口。

# java - 我得到 NullPointer Excpetion 如何解决它。我正在使用 Spring 3.0 和 jdbcTemplate

> ID：14724572
> 
> 赞同：1
> 
> 时间：2013-02-06T08:28:11.200
> 
> 标签：java, spring, jakarta-ee, jdbctemplate

//在这里我定义了我使用的所有类和接口

//服务接口

```
public interface CustomerService {
public void addCustomer(CustomerTO cto);
 } 
```

//服务类实现

```
public class CustomerServiceImpl implements CustomerService {

@Autowired
CustomerDAO cdao=null;

public void addCustomer(CustomerTO cto){
    cdao.addCustomer(cto);      
}
} 
```

//CustomerTO类

```
public class CustomerTO {

private int cid;
private String cname;
private String email;
private long phone;
private String city; 
public CustomerTO(int cid, String cname, String email, long phone,
        String city) {

    this.cid = cid;
    this.cname = cname;
    this.email = email;
    this.phone = phone;
    this.city = city;
}
     //Setter and Getters

 public class JdbcCustomerDAO implements CustomerDAO { 
@Autowired
JdbcTemplate jdbcTemp;

public void addCustomer(CustomerTO cto){
    String sql="insert into customer values(?,?,?,?,?)";
    Object ar[]={cto.getCid(),cto.getCname(),cto.getEmail(),cto.getPhone(),cto.getCity()}; 
    jdbcTemp.update(sql,ar);
} 
```

//客户端代码

```
 public class Lab24Client {
public static void main(String[] args) {
    ApplicationContext ctc=new ClassPathXmlApplicationContext("applicationContext.xml");
    CustomerService c=(CustomerService)ctc.getBean("cs");

    //add Customer
    CustomerTO cust=new CustomerTO(102,"vsa","vsa@gmail.com",6154,"Pune");
    c.addCustomer(cust);
   } 
```

//客户DAO

```
 public interface CustomerDAO {

public void addCustomer(CustomerTO cto);

  } 
```

//spring ApplicationContext.xml文件

```
 <?xml version="1.0" encoding="UTF-8"?>
 <beans>    
<bean id="dataSource class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="com.mysql.jdbc.Driver"/>
<property name="url" value="jdbc:mysql://localhost/vik"/>
<property name="username" value="root"/>

</bean>

<bean id="jdbcTemp" class="org.springframework.jdbc.core.JdbcTemplate" autowire="constructor"/>
<bean id="cdao" class="com.jlc.JdbcCustomerDAO"/>
<bean id="cs" class="com.jlc.CustomerServiceImpl"/> 
```

//CustomerRowMapper

```
 public class CustomerRowMapper implements RowMapper<CustomerTO>{

@Override
public CustomerTO mapRow(ResultSet rs, int rn) throws SQLException {

    CustomerTO cto=new CustomerTO();
    cto.setCid(rs.getInt(1));
    cto.setCname(rs.getString(2));
    cto.setEmail(rs.getString(3));
    cto.setPhone(rs.getLong(4));
    cto.setCity(rs.getString(5));
    return cto;
}

   } 
```

//当我运行客户端时，我得到了以下异常

```
 Exception in thread "main" java.lang.NullPointerException
at com.spring.CustomerServiceImpl.addCustomer(CustomerServiceImpl.java:11)
at com.spring.Lab24Client.main(Lab24Client.java:12) 
```

//请告诉我我在代码中犯了什么错误或者下面的程序有什么问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T09:06:01.933

您必须在 xml 中启用/注册注释配置，如下面的代码。

```
<context:annotation-config/> 
```

# html - 使用贝塞尔曲线

> ID：14724574
> 
> 赞同：1
> 
> 时间：2013-02-06T08:28:17.923
> 
> 标签：html, canvas, bezier, polygons

我正在为我的项目创建一种自定义方法，该方法将创建多边形。我有这个：

```
var c2 = document.getElementById('c').getContext('2d');
c2.fillStyle = '#f00';
c2.beginPath();
c2.moveTo(10, 20);
c2.lineTo(20, 10);
c2.lineTo(60, 10);
c2.lineTo(60, 30);
c2.lineTo(20, 30);
c2.lineTo(10, 20);
c2.closePath();
c2.fill(); 
```

现场演示： http: [//jsfiddle.net/yd7Wv/4292/](http://jsfiddle.net/yd7Wv/4292/) 现在，我需要使用贝塞尔曲线，因为**我需要圆角边缘** ，你能帮我处理贝塞尔曲线吗？最好的问候，丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T09:33:16.750

要么使用`bezierCurveTo`已经实现的方法：

```
bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y); 
```

[http://www.w3schools.com/tags/canvas_beziercurveto.asp](http://www.w3schools.com/tags/canvas_beziercurveto.asp)

或者您可以编写自己的 bazier 曲线方法，如下所示，它具有更大的近似值：

```
coord = function (x,y) {
  if(!x) var x=0;
  if(!y) var y=0;
  return {x: x, y: y};
}

function B1(t) { return t*t*t }
function B2(t) { return 3*t*t*(1-t) }
function B3(t) { return 3*t*(1-t)*(1-t) }
function B4(t) { return (1-t)*(1-t)*(1-t) }

function getBezier(percent,C1,C2,C3,C4) {
  var pos = new coord();
  pos.x = C1.x*B1(percent) + C2.x*B2(percent) + C3.x*B3(percent) + C4.x*B4(percent);
  pos.y = C1.y*B1(percent) + C2.y*B2(percent) + C3.y*B3(percent) + C4.y*B4(percent);
  return pos;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:22:21.620

您可以使用绘制贝塞尔曲线

```
canvas_context.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y); 
```

和

```
canvas_context.quadraticCurveTo(cpx, cpy, x, y); 
```

这些文档将为您提供帮助

1.  [http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/](http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas/)
2.  [http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element)

# c# - 为什么 Console.In.ReadLineAsync 会阻塞？

> ID：14724582
> 
> 赞同：12
> 
> 时间：2013-02-06T08:28:44.077
> 
> 标签：c#, async-await

使用以下代码启动一个新的控制台应用程序 -

```
class Program
{
    static void Main(string[] args)
    {
        while (true)
        {
            Task<string> readLineTask = Console.In.ReadLineAsync();

            Debug.WriteLine("hi");
        }
    }
} 
```

Console.In.ReadLineAsync 是阻塞的，直到在控制台中输入一行才会返回。所以“嗨”永远不会被写入控制台。

在 Console.In.ReadLineAsync 上使用 await 也会阻塞。

据我了解，新的异步 CTP 方法不会阻塞。

这是什么原因？

* * *

这是另一个例子

```
static void Main(string[] args)
{
    Task delayTask = Task.Delay(50000);

    Debug.WriteLine("hi");
} 
```

这正如我预期的那样，它直接进入下一行并打印“hi”，因为 Task.Delay 不会阻塞。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T21:12:55.747

daryal 在这里提供了答案 [http://smellegantcode.wordpress.com/2012/08/28/a-boring-discovery/](http://smellegantcode.wordpress.com/2012/08/28/a-boring-discovery/)

似乎 ReadLineAsync 实际上并没有做它应该做的事情。框架中的错误。

我的解决方案是在循环中使用 ThreadPool.QueueUserWorkItem，这样每次调用 ReadLineAsync 都在一个新线程上完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-30T18:55:07.920

现在可以在[文档](https://docs.microsoft.com/en-us/dotnet/api/system.console.in?view=netframework-4.7#Remarks)中找到：

> 标准输入流上的读取操作同步执行。也就是说，它们会一直阻塞，直到指定的读取操作完成。即使在[In](https://docs.microsoft.com/en-us/dotnet/api/system.console.in?view=netframework-4.7)属性返回的[TextReader](https://docs.microsoft.com/en-us/dotnet/api/system.io.textreader?view=netframework-4.7)对象上调用异步方法（例如[ReadLineAsync ）也是如此。](https://docs.microsoft.com/en-us/dotnet/api/system.io.textreader.readlineasync?view=netframework-4.7)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-18T14:07:49.147

另一种解决方案：

```
static void Main()
{
    using (var s = Console.OpenStandardInput())
    using (var sr = new StreamReader(s))
    {
        Task readLineTask = sr.ReadLineAsync();
        Debug.WriteLine("hi");
        Console.WriteLine("hello");

        readLineTask.Wait();// When not in Main method, you can use await. 
                            // Waiting must happen in the curly brackets of the using directive.
    }
    Console.WriteLine("Bye Bye");
} 
```

# python - Web2py 自定义验证器

> ID：14724584
> 
> 赞同：4
> 
> 时间：2013-02-06T08:28:47.077
> 
> 标签：python, web2py, customvalidator, custom-validators

我是 Web2py 的新手，正在尝试使用自定义验证器。

```
class IS_NOT_EMPTY_IF_OTHER(Validator):

    def __init__(self, other,
                 error_message='must be filled because other value '
                               'is present'):
        self.other = other
        self.error_message = error_message

    def __call__(self, value):
        if isinstance(self.other, (list, tuple)):
            others = self.other
        else:
            others = [self.other]

        has_other = False
        for other in others:
            other, empty = is_empty(other)
            if not empty:
                has_other = True
                break
        value, empty = is_empty(value)
        if empty and has_other:
            return (value, T(self.error_message))
        else:
            return (value, None) 
```

**我不明白如何在我的桌子上使用它：**

```
db.define_table('numbers',

    Field('a', 'integer'),
    Field('b', 'boolean'),
    Field('c', 'integer') 
```

我想以一种在勾选“b”时不能将“c”保留为黑色的方式使用它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T13:06:40.563

将代码保存在 /modules/customvalidators.py

```
from gluon.validators import is_empty
from gluon.validators import Validator

class IS_NOT_EMPTY_IF_OTHER(Validator):

    def __init__(self, other,
                 error_message='must be filled because other value '
                               'is present'):
        self.other = other
        self.error_message = error_message

    def __call__(self, value):
        if isinstance(self.other, (list, tuple)):
            others = self.other
        else:
            others = [self.other]

        has_other = False
        for other in others:
            other, empty = is_empty(other)
            if not empty:
                has_other = True
                break
        value, empty = is_empty(value)
        if empty and has_other:
            return (value, T(self.error_message))
        else:
            return (value, None) 
```

然后在模型/db.py

```
from customvalidator import IS_NOT_EMPTY_IF_OTHER

db.define_table("foo",
    Field('a', 'integer'),
    Field('b', 'boolean'),
    Field('c', 'integer')
)

# apply the validator
db.foo.c.requires = IS_NOT_EMPTY_IF_OTHER(request.vars.b) 
```

另外，请注意，如果没有上述验证器，它可以很**容易地完成。**忘记上面的所有代码并尝试这种简化的方式

**版本 2：**

```
controllers/default.py

def check(form):
    if form.vars.b and not form.vars.c:
        form.errors.c = "If the b is checked, c must be filled"

def action():
    form = SQLFORM(db.foo)
    if form.process(onvalidation=check).accepted:
        response.flash = "success"
    return dict(form=form) 
```

# c++ - C ++将数组传递给函数错误：赋值中的类型不兼容

> ID：14724589
> 
> 赞同：1
> 
> 时间：2013-02-06T08:28:56.603
> 
> 标签：c++, arrays, function

我知道这个问题已经在别处被问过了，但我一直不明白这里出了什么问题。也许我做错了什么，因为这两个数组在一个结构内。

（编辑：我从其他代码中获取结构，我无法更改它）

我试图将两个浮点数组传递给一个函数，然后将操作结果保存在第一个数组中。

核心.h：

```
typedef struct{
    //other stuff
    float m_vector[16];
} structure_t;

class CoreClass{
    private:
        structure_t s1;
        structure_t s2;

       float *MyFunction(const float *vDest, const float *vNew);
} 
```

核心.cpp：

```
#include "core.h"
#include "another_file.h"

void anotherFunction(){
    //....
    s1.m_vector = MyFunction(s1.m_vector, s2.m_vector); //error here
    //....    
}

float *CoreClass::MyFunction(const float *vDest, const float *vNew){
    return yet_another_function(vDest, vNew);
} 
```

但是，当我调用该函数时，出现此错误：

```
error: incompatible types in assignment of ‘float*’ to ‘float [16]’ 
```

为了完整起见，这是我正在调用的函数，尽管它在编译时似乎没有任何问题：

另一个文件.h

```
static __inline float *yet_another_function(const float *vDest, const float *vNew){
    float *tmp = new float[16];
    //tmp = matrix multiplication (vDest * vNew)
    for(int i=0; i<4; i++)
        for(int j = 0; j<4;j++)
            for(int k = 0; 4; k++)
                tmp[i + j*4] += vDest[i + k*4] * vNew[k + j*4];

    return tmp;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:35:40.353

问题是因为您将指针分配给数组。在 C++ 中，您不能将指针分配给数组。

```
s1.m_vector = MyFunction(s1.m_vector, s2.m_vector);
  ^^ array   ^^ return pointer 
```

`MyFunction`您可以使用从to复制返回值`s1.m_vector`。但是为什么你需要重新分配价值`s1.m_vector`呢？你可以让`MyFunction`函数引用`structure_t`并在内部修改`m_vector`。

```
void MyFunction(structure_t& vDest, const structure_t& vNew)
{
    vDest.m_vector[0] = vNew.m_vector[0];
    //...
    vDest.m_vector[15] = vNew.m_vector[15];
} 
```

编辑

```
yet_another_function(structure_t* t, structure_t& vDest, const structure_t& vNew)
{
    // blah blah
    t->m_vector[i + j*4] += vDest.m_vector[i + k*4] * vNew.m_vector[k + j*4];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:34:29.220

看起来您返回了一个指向 float 的指针并试图将其保存到您的数组中。structure_t.m_vector 是一个数组而不是指针。

你可以像这样修复它：

```
float * temp = MyFunction(s1.m_vector, s2.m_vector);
for(int i=0; i<16;i++)
    s1.m_vector[i] = temp[i];
delete[] temp; 
```

这仍然很容易出错，如果你在 yet_another_function 中新的大小不是 16，你就会遇到错误。作为一般规则，建议使用 std::array 或 std::vector 并按值返回。如果您的编译器支持 c++ 11，则按值返回的移动语义不会影响性能。

# javascript - JS：动态创建不存在属性的子属性

> ID：14724591
> 
> 赞同：0
> 
> 时间：2013-02-06T08:28:56.240
> 
> 标签：javascript

我想要这样的东西：

```
var myObj = {};
myObj["a"]["b"].push({"c":"d"}); 
```

我希望 myObj 变为：`{"a":{"b":[{"c":"d"}]}}`但出现错误

> 无法设置未定义的属性“b”

是的，我知道我可以像这样一步一步地创建它：

```
var myObj={};
myObj["a"]={};
myObj["a"]["b"]=[];
myObj["a"]["b"].push({"c":"d"}); 
```

但是如果 myObj 已经有一些结构并且我不想破坏它怎么办。例如：

```
var myObj={"a":{"e":"f"}}; 
```

如果我写`myObj["a"]={};`，我会丢失数据。
当然可以写

```
if(myObj["a"]==null){
myObj["a"]={}
} 
```

但是它太笨重了！`myObj["a"]["b"].push({"c":"d"});`如果我可以只写 smth而不在每一步都检查 null，那就太好了。
任何建议如何做到这一点？可能有一种方法可以覆盖 JS 原生 Object 或类似的东西吗？
先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:30:19.153

你不能。Netscape 为大量代码道歉。为什么不是这个？

```
var myObj = {};
myObj.a = {b:[{c:'d'}]}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:32:34.080

恐怕不可能像那样覆盖 JS 的原生功能。

您将不得不检查子属性。

如果要确保对象上存在属性而不覆盖它，请执行以下操作：

```
myObj['a'] = myObj['a'] || {}; 
```

如果它有值，则设置`myObj['a']`为自身，如果没有，则设置为新的空对象。

然后对 做同样的事情`myObj['a']['b']`，然后推动：

```
myObj['a']['b'] = myObj['a']['b'] || [];
myObj['a']['b'].push({"c":"d"}); 
```

# java - 如何获取 geoLocation positionError 原因的详细信息

> ID：14724592
> 
> 赞同：1
> 
> 时间：2013-02-06T08:28:57.897
> 
> 标签：java, gwt, geolocation, gps

我正在使用 gwt 地理位置 API (com.google.gwt.geolocation.client.Geolocation) 来读取 gwt 移动客户端上的当前位置。

我可以区分错误，是由于没有打开 gps 功能还是由于没有从 gps 获取信号引起的？它是否也尝试在没有位置的情况下获取位置，还是仅尝试使用 gps？

*我通过有线连接用台式机编写了一个 gwt 应用程序，因此通过实时测试来验证这一点并不容易。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:40:16.800

Geolocation API 在失败时抛出 PositionError。它有一个代码，它告诉你是哪种情况：

> `POSITION_UNAVAILABLE`说gps关了。
> `TIMEOUT`说它未能恢复价值。

我必须检查这个变量，我知道是哪种情况。

# ios - 将转义的 unicode char[] 转换为 NSString

> ID：14724593
> 
> 赞同：0
> 
> 时间：2013-02-06T08:29:02.043
> 
> 标签：ios, unicode, utf-8, nsstring

我有以下内容`char[] str = "\xe7a"`；

这是将“ça”转换为使用 python 转义的 unicode 的结果`.encode('unicode-escape')`

当它进入 iOS 时，我试图再次将其转换为“ça”......但我找不到正确的方法来做到这一点。

如何使用 iOS 函数将 \x 转义字符转换为正确的字符？

```
str = [[NSString alloc] initWithBytes:m.param5 length:STRING_PARAM_LENGTH encoding:NSASCIIStringEncoding] UTF8String]; 
```

不工作

```
str = [[NSString alloc] initWithBytes:m.param5 length:STRING_PARAM_LENGTH NSUTF8StringEncoding]; 
```

不工作

```
str = [NSString stringWithUTF8String:m.param5]; 
```

也不行

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:04:47.573

假设`\xe7`是 byte `0xe7`，则 char 数组被编码为 Windows-1252/ISO-8859-1... 所以：

```
NSString *string = [NSString stringWithCString:str encoding:NSISOLatin1StringEncoding]; 
```

如果内容实际上是反斜杠、、、`x`和`e`，`7`则需要在运行上述代码之前将其转换为真正的隐含字节值

# adobe-edge - 是否可以动态克隆 Adob e Edge 动画符号并单独操作每个克隆？

> ID：14724595
> 
> 赞同：1
> 
> 时间：2013-02-06T08:29:15.323
> 
> 标签：adobe-edge

我有一个包含 Adob​​e Edge 动画的网页。动画包含一个阶段和一个符号。我想将符号元素用作按钮。

问题是我需要多个相同的按钮，每个按钮在视觉上表现相同，但位置不同。有没有办法以编程方式（通过 JavaScript）“克隆”一个符号，以便多个副本动态出现在舞台上？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T14:46:22.310

无需使用 Javascript。这就是符号的用途。

假设您有一个名为“按钮”的符号。

通过多次拖动舞台上的符号（从右侧的“库”>“符号”面板），您可以在舞台上创建任意数量的符号，并将它们放置在不同的位置。这样您就可以创建符号的实例。

然后您所要做的就是绑定单击事件，而不是在符号上（这样所有按钮都会做同样的事情，而不是想要的），而是在舞台上的符号实例上。

打开代码窗口（窗口 > 代码）并选择阶段。

单击舞台旁边的加号按钮，然后单击元素，您将看到一个包含所有按钮的列表。

随心所欲地处理按钮上的点击事件。

# java - java: 怎么可能看到 JScrollPane 的后面？

> ID：14724609
> 
> 赞同：0
> 
> 时间：2013-02-06T08:30:11.710
> 
> 标签：java, swing, jscrollpane, opacity, jviewport

怎么可能看到后面`JScrollPane`？我试图通过以下方式做到这一点：

```
JScrollPane.setOpaqe(false); 
```

但它没有用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:31:48.900

一起尝试：

```
jScrollPane.setOpaque(false);
jScrollPane.getViewPort().setOpaque(false); 
```

# android - 黑莓浏览器错误

> ID：14724610
> 
> 赞同：2
> 
> 时间：2013-02-06T08:30:11.807
> 
> 标签：android, blackberry, android-intent, blackberry-playbook, blackberry-10

当我将应用程序从 android 移植到黑莓时遇到问题。该应用程序是一个 web 应用程序，它可以在 android 上正常运行，但是当我将它移植并部署到 playbook 上时，我收到一条错误消息

不支持操作

```
Intent { act=android.intent.action.View cat=[android.intent.category.BROWSABLE] dat=file:///android_asset/process.html (has extras)} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:16:01.150

Intent.ACTION_VIEW 不适用于 bb10

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T09:01:25.367

我在应用程序中的 webView 也遇到了同样的问题，但是在创建 webView 时设置 webViewClient 解决了它：

```
webView.setWebViewClient(new WebViewClient() 
{
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) 
    {
        view.loadUrl(url);
        return true;
    }
}); 
```

祝你好运 ：）

# moodle - 从老师创建新课程

> ID：14724611
> 
> 赞同：0
> 
> 时间：2013-02-06T08:30:17.240
> 
> 标签：moodle

我想由moodle的老师创建新课程。现在只有管理员可以在我的moodle中创建新课程并上传文件。我在我的moodle中定义了管理员，老师，学生。要由老师上传文件。我想知道我在哪里更改权限，老师可以上传文件并创建新课程。请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:45:21.247

教师无权创建课程。

你可以做三件事

1.  让您希望允许创建课程的教师课程创建者（请参阅[http://docs.moodle.org/22/en/Course_creator_role](http://docs.moodle.org/22/en/Course_creator_role)）这是我做的顺便说一句。

2.  您可以修改教师的默认权限以允许他们也创建课程（查看默认权限）

3.  您可以复制标准角色“老师”并创建一个名为“老师+”或其他内容的新角色，并授予该角色创建课程的权限。

选项 1 是迄今为止最简单的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:10:54.273

要覆盖默认教师的权限，请检查 moodle doc -

[http://docs.moodle.org/23/en/Permissions#Course_and_activity_permissions](http://docs.moodle.org/23/en/Permissions#Course_and_activity_permissions)

要创建课程和上传文件，以下功能是负责的，因此您需要为教师允许这些功能 -

[http://docs.moodle.org/23/en/Capabilities/moodle/course:create](http://docs.moodle.org/23/en/Capabilities/moodle/course:create) [http://docs.moodle.org/23/en/Capabilities/moodle/course:managefiles](http://docs.moodle.org/23/en/Capabilities/moodle/course:managefiles)

# c# - 数据传输对象模式

> ID：14724612
> 
> 赞同：19
> 
> 时间：2013-02-06T08:30:17.777
> 
> 标签：c#, .net, design-patterns, dto

对不起，我是企业应用程序和设计模式的新手。可能是这个问题缺乏对设计模式的了解。我发现使用 DTO 传输数据更好。

我的业务实体类如下：

```
public class Patient
{    
    public string ID { get; set; }
    public string FullName { get; set; }
    public string FirstName { get; set; }
    public string Surname { get; set; }
} 
```

所以在我的应用程序中，用户只提供 ID 和 HospitalID。所以它需要另一个 Web 服务并获取人员信息

```
 public class PersonDTO
 {
     public string NIC { get; set; }
     public string FullName { get; set; }
     public string FirstName { get; set; }
     public string BirthPlace { get; set; }
     public string BirthCertificateID { get; set; }
 } 
```

所以基于这些信息我要去病人对象。（使用 DTO 模式）

所以我想写一个新的类来转换它，如下所示。

```
public class PatientDO
{
    public static Patient ConvertToEntity(
        PatientRegistrationDTO pregDTO,
        PersonDTO person
    )
    {
        Patient p = new Patient();
        p.NIC = pregDTO.NIC;
        p.FullName = person.FullName;
        p.FirstName = person.FirstName;
        return p;
    }
} 
```

但最近我读了几篇[文章](http://www.codeproject.com/Articles/8824/C-Data-Transfer-Object)，他们使用`Serializer Helper class`得很好，`XmlSerializer`我不明白他们为什么使用这样的东西。

对于 DTO 模式来说，需要使用 XmlSerializer，为什么要使用它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-06T08:33:04.083

你真的应该看看 AutoMapper。

[http://automapper.org](http://automapper.org)

这是一款可以包含在解决方案中的软件，它会自动将值从一个类映射到另一个类。

它会自动映射具有相同名称的属性，并且在涉及子对象时也非常聪明。但是，它还可以在您需要时提供完整的映射控制。

**编辑**

几个例子来展示 AutoMapper 是如何工作的。请注意，在现实生活中我永远不会这样编码。简洁！

示例类。

```
// Common scenario.  Entity classes that have a connection to the DB.
namespace Entities 
{
   public class Manager
   {
      public virtual int Id { get; set; }
      public virtual User User { get; set; }
      public virtual IList<User> Serfs { get; set; }
   }

   public class User
   {
      public virtual int Id { get; set; }
      public virtual string Firstname { get; set; }
      public virtual string Lastname { get; set; }
   }
}

// Model class - bit more flattened
namespace Models 
{
   public class Manager 
   {
      public int Id { get; set; }
      public string UserFirstname { get; set; }
      public string UserLastname { get; set; }
      public string UserMiddlename { get; set; }
   }
} 
```

通常，您需要在项目中配置所有 AutoMapping。通过我刚刚给出的示例，您可以配置 Entities.Manager 和 Models.Manager 之间的映射，如下所示：-

```
// Tell AutoMapper that this conversion is possible
Mapper.CreateMap<Entities.Manager, Models.Manager>(); 
```

然后，在您的代码中，您将使用类似这样的东西从实体版本中获取一个新的 Models.Manager 对象。

```
// Map the class
var mgr = Map<Entities.Manager, Models.Manager>
  ( repoManager, new Models.Manager() ); 
```

顺便说一句，如果您一致地命名事物，AM 足够聪明，可以自动解析许多属性。

上面的示例，应该自动填充 UserFirstname 和 UserLastname，因为：-

*   Manager 有一个名为 User 的属性
*   用户具有名为 Firstname 和 Lastname 的属性

但是，在 Entities.Manager 和 Models.Manager 之间进行映射操作后，Models.Manager 中的 UserMiddlename 属性将始终为空，因为 User 没有名为 Middlename 的公共属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-23T04:43:54.800

CodeProject 中有一个不错但简单的演示。值得通过它。新手可以对设计 DTO 有一个基本的了解。

[http://www.codeproject.com/Articles/8824/C-Data-Transfer-Object](http://www.codeproject.com/Articles/8824/C-Data-Transfer-Object)

以下是内容摘要：

数据传输对象“DTO”是一个简单的可序列化对象，用于跨应用程序的多个层传输数据。DTO 中包含的字段通常是原始类型，例如字符串、布尔值等。其他 DTO 可能包含或聚合在 DTO 中。例如，您可能有一个包含在 LibraryDTO 中的 BookDTO 集合。我创建了一个由多个应用程序使用的框架，该框架利用 DTO 跨层传输数据。该框架还依赖于其他 OO 模式，例如 Factory、Facade 等。与 DataSet 相比，DTO 的一大优点是 DTO 不必直接匹配数据表或视图。DTO 可以聚合来自另一个 DTO 的字段

这是所有数据传输对象的基类。

```
using System;

namespace DEMO.Common
{
/// This is the base class for all DataTransferObjects.
    public abstract class DTO
    {
        public DTO()
        {
        }
    }
} 
```

这是 DTO 的派生类：

```
using System;
using System.Xml.Serialization;
using DEMO.Common;

namespace DEMO.DemoDataTransferObjects
{
public class DemoDTO : DTO
{
    // Variables encapsulated by class (private).
    private string demoId = "";
    private string demoName = "";
    private string demoProgrammer = "";

    public DemoDTO()
    {
    }

    ///Public access to the DemoId field.
    ///String
    [XmlElement(IsNullable=true)]
    public string DemoId
    {
        get
        {
            return this.demoId;
        }
        set
        {
            this.demoId = value;
        }
    }

    ///Public access to the DemoId field.
    ///String
    [XmlElement(IsNullable=true)]
    public string DemoName
    {
        get
        {
            return this.demoName;
        }
        set
        {
            this.demoName = value;
        }
    }

    ///Public access to the DemoId field.
    ///String
    [XmlElement(IsNullable=true)]
    public string DemoProgrammer
    {
        get
        {
            return this.demoProgrammer;
        }
        set
        {
            this.demoProgrammer = value;
        }
    }

} 
```

这是 DTO 的助手类。它具有序列化和反序列化 DTO 的公共方法。

```
using System;
using System.Xml.Serialization;
using System.IO;

namespace DEMO.Common
{
public class DTOSerializerHelper
{
    public DTOSerializerHelper()
    {
    }

    /// 
    /// Creates xml string from given dto.
    /// 
    /// DTO
    /// XML
    public static string SerializeDTO(DTO dto)
    {
        try
        {
            XmlSerializer xmlSer = new XmlSerializer(dto.GetType());
            StringWriter sWriter = new StringWriter();
            // Serialize the dto to xml.
            xmlSer.Serialize(sWriter, dto);
            // Return the string of xml.
            return sWriter.ToString();
        }
        catch(Exception ex)
        {
            // Propogate the exception.
            throw ex;
        }
    }

    /// 
    /// Deserializes the xml into a specified data transfer object.
    /// 
    /// string of xml
    /// type of dto
    /// DTO
    public static DTO DeserializeXml(string xml, DTO dto)
    {
        try
        {
            XmlSerializer xmlSer = new XmlSerializer(dto.GetType());
            // Read the XML.
            StringReader sReader = new StringReader(xml);
            // Cast the deserialized xml to the type of dto.
            DTO retDTO = (DTO)xmlSer.Deserialize(sReader);
            // Return the data transfer object.
            return retDTO;
        }
        catch(Exception ex)
        {
            // Propogate the exception.
            throw ex;
        }            
    }

} 
```

现在开始序列化/反序列化：

```
using System;
using DEMO.Common;
using DEMO.DemoDataTransferObjects;

namespace DemoConsoleApplication
{
public class DemoClass
{
    public DemoClass()
    {
    }

    public void StartDemo()
    {
        this.ProcessDemo();
    }

    private void ProcessDemo()
    {
        DemoDTO dto = this.CreateDemoDto();

        // Serialize the dto to xml.
        string strXml = DTOSerializerHelper.SerializeDTO(dto);

        // Write the serialized dto as xml.
        Console.WriteLine("Serialized DTO");
        Console.WriteLine("=======================");
        Console.WriteLine("\r");
        Console.WriteLine(strXml);
        Console.WriteLine("\r");

        // Deserialize the xml to the data transfer object.
        DemoDTO desDto = 
          (DemoDTO) DTOSerializerHelper.DeserializeXml(strXml, 
          new DemoDTO());

        // Write the deserialized dto values.
        Console.WriteLine("Deseralized DTO");
        Console.WriteLine("=======================");
        Console.WriteLine("\r");
        Console.WriteLine("DemoId         : " + desDto.DemoId);
        Console.WriteLine("Demo Name      : " + desDto.DemoName);
        Console.WriteLine("Demo Programmer: " + desDto.DemoProgrammer);
        Console.WriteLine("\r");
    }

    private DemoDTO CreateDemoDto()
    {
        DemoDTO dto = new DemoDTO();

        dto.DemoId            = "1";
        dto.DemoName        = "Data Transfer Object Demonstration Program";
        dto.DemoProgrammer    = "Kenny Young";

        return dto;
    }
} 
```

最后这段代码在主应用程序中执行

```
static void Main(string[] args)
{
    DemoClass dc = new DemoClass();
    dc.StartDemo();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-02T10:59:02.510

XmlSerializer 或 JsonSerializer 可用于从源（Web 服务）序列化（加载）XML 或 Json 数据。或解释 DTO 的名称：您将数据从源（Web 服务）序列化（传输）到（通用 DTO）对象。所以 DTO 是通用对象。有时，制作尽可能宽的 DTO 对象并完全填充它是很聪明的，这样您就可以从该对象中使用您喜欢的任何内容并将其复制到您“自己的”程序对象中。

示例：我开发了一个显示运输导航数据的程序。我在 DTO 对象中序列化整个 xml 或 json 消息。在这个 DTO 对象中包含更多信息，然后我将在我的程序中需要它并且它可以采用不同的形式，所以我将只使用需要的东西。DTO 对象使从源（Web 服务）中提取数据变得更加容易。

由于名称为“Auto”，我不想使用 AutoMapper。我想知道我在做什么，并想我的数据要去哪里。

# javascript - 锚点下载链接在 Firefox 中不起作用

> ID：14724615
> 
> 赞同：2
> 
> 时间：2013-02-06T08:30:26.453
> 
> 标签：javascript, html, internet-explorer, google-chrome, firefox

我用过这个

```
<A HREF="/admin/con/image/StudentImportFileTemplate_Create.csv" download="StudentImportFileTemplate_Create.csv">Download</A> 
```

我`download`为 chrome 添加了属性，但 Firefox 不支持它

这在 IE 中运行良好，并且正在下载 chrome 文件 谁能解释我如何让它也适用于 firefox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:55:29.587

简单地写成这样。

```
<a href="/admin/con/image/StudentImportFileTemplate_Create.csv">Download the document</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:04:54.067

您实际上不需要使用任何此类属性来开始文件下载。

只需使用：

```
<a href="/admin/con/image/StudentImportFileTemplate_Create.csv">Download</a> 
```

如果您的 CSV 正在打开而不是被下载，并且仍想使用下载属性，那么正确的方法是：

[http://davidwalsh.name/download-attribute](http://davidwalsh.name/download-attribute)

# android - 通过亚马逊 Kindle Fire HD 中的 adb 截图

> ID：14724618
> 
> 赞同：1
> 
> 时间：2013-02-06T08:30:32.623
> 
> 标签：android, adb, screen-capture

实际上，Amazon Kindle Fire HD 中没有开箱即用的屏幕截图实用程序。我想通过 adb 将它安装到 /system/bin/ 以在我需要截图并且 logcat 不足以附加到错误描述的时候从命令行调用（仍然通过 adb）。

有一些描述如何为此目的使用 screencap 实用程序：http: [//habrahabr.ru/company/intel/blog/152122/](http://habrahabr.ru/company/intel/blog/152122/) （见

```
adb shell screencap /sdcard/screen.png
adb pull /sdcard/screen.png screen.png
adb shell rm /sdcard/screen.png 
```

)

但是，我的设备似乎使用的是 Android 2.3 Gingerbread，因此没有开箱即用的屏幕截图实用程序。所以，问题是 1）有没有办法将其他 Android 版本的屏幕截图推送到 /system/bin/ 2）我可以在哪里在线下载？

欢迎使用 adb shell 的其他方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T09:12:10.047

我不知道这是否会对你有所帮助，但我曾经碰巧找到了其他几种截屏的方法。据我所知，它们不依赖于ADB 守护进程，`screencap`而是依赖于 ADB 守护进程。所有这些都需要您的设备打开 USB 调试。

*   我真的建议尝试这个简单的实用程序：[http](http://www.roman10.net/a-program-for-taking-screenshot-for-android-device-from-command-line/) : //www.roman10.net/a-program-for-taking-screenshot-for-android-device-from-command-line/ 它基本上重新实现了 DDMS 屏幕截图功能，而无需整个图形用户界面。它会自动将其写入您的计算机，因此无需推/拉。它是纯 Java，所以这是一个很大的好处。

    向下滚动到下载部分，您可以在其中仅下载二进制文件并进行测试。

*   另一种方法是使用此处描述的 MonkeyRunner：http: [//developer.android.com/tools/help/monkeyrunner_concepts.html](http://developer.android.com/tools/help/monkeyrunner_concepts.html)。您需要做的就是编写一个简单的脚本来捕获屏幕，该屏幕显示在链接的页面上。

    不幸的是，我不知道是否`android-tools-adb`提供 MonkeyRunner。

*   另一个工具是*Android Screenshots 和 Screen Capture*：http: [//sourceforge.net/projects/ashot/](http://sourceforge.net/projects/ashot/)

    它只需要安装 Android SDK，我怀疑它的运行原理与 DDMS 或第一个程序相同——来自 Roman10。

希望有帮助！

# php - 为什么复合主键中的列顺序对 Doctrine 很重要？

> ID：14724619
> 
> 赞同：1
> 
> 时间：2013-02-06T08:30:34.317
> 
> 标签：php, mysql, doctrine-orm

我正在尝试在数据库优先实现上使用 Doctrine 2.3.2 建立一个项目。生成 xml 和映射后，然后调用 orm:validate-schema 它显示映射是正确的，但数据库验证失败。在使用架构工具查找我的问题时，我发现 2 个问题一遍又一遍地重复：

1.  将我所有不在 255 的 varchar 更改为 varchar(255)
2.  删除我的主键，例如列（A、B、C），然后以不同的顺序（B、A、C）创建具有相同列的新主键

这两件事似乎都没有任何改变的意义。为什么 Doctrine 会强迫我以看似毫无意义的方式改变我的模式？

在不更改数据库架构的情况下解决这两个问题的方法是：

1.  转换映射似乎没有将长度属性添加到 id 字段 - 将其添加到 xml
2.  这似乎是由表中列的顺序与主键中的列顺序之间的差异引起的。重新排序 xml 条目的顺序以匹配主键的顺序。

不得不 2 #1 我假设是一个错误 - 我将很快报告。但是，#2 上面是一个错误还是在某种程度上改变了 Doctrine 的逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:18:44.540

我越想这个，我就越相信这是一个疏忽，而不是故意的。我在想我遗漏了一些东西，但我认为这些是图书馆的问题，并已将它们添加到学说的 JIRA 中。

编辑：每个请求的链接

*   [http://www.doctrine-project.org/jira/browse/DDC-2280](http://www.doctrine-project.org/jira/browse/DDC-2280)
*   [http://www.doctrine-project.org/jira/browse/DDC-2281](http://www.doctrine-project.org/jira/browse/DDC-2281)

# jquery - 使用 jQuery 跟踪访问者的来源？

> ID：14724622
> 
> 赞同：0
> 
> 时间：2013-02-06T08:30:47.920
> 
> 标签：jquery, google-analytics

我想找到一种方法来跟踪访问者的来源。几乎就像一个迷你谷歌分析。我在他们的网站上放了一个小部件，我想知道用户是否来自例如谷歌直接点击、引用链接等。

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:34:00.670

您可以使用该`document.referrer`函数返回用户来自哪里。

# python - Transfer-encoding: chunked 应该如何渲染？

> ID：14724624
> 
> 赞同：0
> 
> 时间：2013-02-06T08:30:59.930
> 
> 标签：python, http, transfer-encoding

当浏览器呈现使用分块编码传输的数据时，浏览器应该呈现原始数据而不添加块大小和 CRLF 来编码数据，对吗？

使用此代码作为示例：

[https://gist.github.com/josiahcarlson/3250376](https://gist.github.com/josiahcarlson/3250376)

我的浏览器（Chrome 和 FF）呈现

```
12
this is chunk: 0

12
this is chunk: 1

12
this is chunk: 2

12
this is chunk: 3

12
this is chunk: 4

12
this is chunk: 5

12
this is chunk: 6

12
this is chunk: 7

12
this is chunk: 8

12
this is chunk: 9

0 
```

我没想到会看到块大小。

是否应该在浏览器中使用我们的不带编码信息的数据来呈现数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:15:58.037

HTTP 1.0 客户端不需要解码分块数据。python 的 BaseHTTPServer 类发送的默认 http 版本是 HTTP 1.0。如果您发送 1.1 版本，浏览器将按照您的预期呈现数据。我想 curl 只是想通过做正确的事情来变得聪明，即使服务器发送了错误的协议版本。

在发送响应之前修补代码以设置 BaseHTTPServer 实例的 protocol_version 属性。在示例的第 73 行添加此内容。

self.protocol_version = 'HTTP/1.1'

有关 HTTP 1.0 和 HTTP 1.1 之间差异的更多详细信息，您可以参考此[http://www8.org/w8-papers/5c-protocols/key/key.html](http://www8.org/w8-papers/5c-protocols/key/key.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:42:44.833

您是否在标头中指定了内容编码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:37:43.410

代码显式发送该消息。生成器创建这些块：

```
yield "this is chunk: %s\r\n"%i 
```

然后将它们写入套接字

```
def write_chunk():
    tosend = '%X\r\n%s\r\n'%(len(chunk), chunk)
    self.wfile.write(tosend) 
```

如果你适应它，你可以发送任何你想要的东西。

因此，如果生成的块是`"this is chunk: 0\r\n"`write_chunk 方法实际上发送`"18\r\nthis is chunk: 0\r\n\r\n"`

`"\r\n"`是转义序列，表示回车、换行。或 windows 版本的换行符。在 Linux 上，您可以使用`\n`

# haskell - Haskell 中的语句评估器跟踪

> ID：14724625
> 
> 赞同：1
> 
> 时间：2013-02-06T08:31:00.733
> 
> 标签：haskell, expression-evaluation

我正在尝试编写一个程序，该程序接受任何通用语句，对其进行评估，并在评估时显示每个步骤。

例如，如果我们有一系列赋值语句，它应该运行为：

*   评估作业声明 1

*   显示评估结果1

*   评估赋值语句 2

*   显示评估结果 2

现在，它只显示最终结果。代码是

```
> evalS_maybe :: Statement -> Store -> Maybe Store

> evalS_maybe w@(While e s1) s   = evalS_maybe (If e 
>                                                   (Sequence s1 (While e s1)) 
>                                                       Skip) 
>                                               s 
> evalS_maybe Skip s             = Just s
> evalS_maybe (Sequence s1 s2) s = do
>                                   sq <-evalS_maybe s1 s
>                                   evalS_maybe s2 sq
> evalS_maybe (Assign x e ) s    = do 
>                                   ag <-evalE_maybe e s
>                                   return ( Map.insert x ag s )
> evalS_maybe (If e s1 s2) s     = do
>                                       b2 <- evalE_maybe e s 
>                                       case b2 of 
>                                           BoolVal True    ->  evalS_maybe s1 s
>                                           BoolVal False   ->  evalS_maybe s2 s
>                                           _               ->  return s 
```

编辑：

其余使用的数据类型是：

```
> type Variable = String

> data Statement =
>     Assign Variable Expression         
>   | If Expression Statement Statement   
>   | While Expression Statement          
>   | Sequence Statement Statement       
>   | Skip                                
>   deriving (Show)

> data Expression =
>     Var Variable                        
>   | Val Value                          
>   | Op  Bop Expression Expression
>   deriving (Show)

> data Bop =
>     Plus    
>   | Minus   
>   | Times   
>   | Divide  
>   | Gt      
>   | Ge      
>   | Lt      
>   | Le      
>   deriving (Show)

> data Value =
>     IntVal Int
>   | BoolVal Bool
>   deriving (Show)

>   type Store = Map Variable Value 
```

有人可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:18:17.947

如果您只想查看痕迹，您可以使用`trace`from`Debug.Trace`来“欺骗”引用透明度并输出中间信息。

另一种方法是将 a 包裹`WriterT`在您的`Maybe`, 并用于`tell`发出中间信息。这实际上会返回一些您可以在 Haskell 中检查的值。

请注意，仅当您的评估成功时才会返回您的跟踪信息。为了*总是*回馈一个踪迹，你改为换行`MaybeT`。`Writer`

# c++ - C++：二进制到十进制转换

> ID：14724627
> 
> 赞同：6
> 
> 时间：2013-02-06T08:31:08.900
> 
> 标签：c++

我正在尝试通过以下方式将二进制数组转换为十进制：

```
uint8_t array[8] = {1,1,1,1,0,1,1,1} ;
int decimal = 0 ;    

for(int i = 0 ; i < 8 ; i++)
    decimal = (decimal << 1) + array[i] ; 
```

实际上我必须将 64 位二进制数组转换为十进制，并且我必须这样做一百万次。

任何人都可以帮助我，有没有更快的方法来完成上述操作？还是上面那个好看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T08:39:08.197

你的方法是足够的，称之为*好*我不会混合按位运算和转换为十进制的“数学”方式，即使用

```
 decimal = decimal << 1 | array[i]; 
```

或者

```
 decimal = decimal * 2 + array[i]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T09:51:17.630

在尝试任何优化之前，分析代码很重要。计时，查看正在生成的代码，并仅在您了解正在发生的事情时进行优化。

正如已经指出的那样，最好的优化不是做某事，而是进行更高级别的更改以消除需求。

然而...

您可能希望在此处轻松进行的大多数更改可能是编译器已经完成的事情（移位与编译器的乘法相同）。有些实际上可能会*阻止*编译器进行优化（将 an 更改`add`为 an`or`将限制编译器 - 还有更多添加数字的方法，只有您知道在这种情况下结果将是相同的）。

指针算法可能更好，但编译器并不愚蠢——它应该已经生成了用于取消引用数组的体面的代码，所以你需要检查你实际上没有通过引入一个额外的变量来使事情变得更糟。

在这种情况下，循环计数是明确定义和限制的，因此展开可能是有意义的。

此外，这取决于您希望结果对目标架构的依赖程度。如果您想要可移植性，则很难（呃）进行优化。

例如，下面的代码在这里产生了更好的代码：

```
unsigned int x0 = *(unsigned int *)array;
unsigned int x1 = *(unsigned int *)(array+4);

int decimal = ((x0 * 0x8040201) >> 20) + ((x1 * 0x8040201) >> 24); 
```

我可能还可以推出一次 8 位而不是 4 位的 64 位版本。

但它绝对不是可移植的代码。如果我知道自己在运行什么并且只想快速处理数字，我可能会在本地使用它。但我可能不会把它放在生产代码中。当然不是没有记录它做了什么，也没有附带的单元测试来检查它是否真的有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T09:51:52.443

您可以使用`accumulate`, 加倍并添加二进制操作：

```
int doubleSumAndAdd(const int& sum, const int& next) {
    return (sum * 2) + next;
}

int decimal = accumulate(array, array+ARRAY_SIZE,
                         doubleSumAndAdd); 
```

这产生大端整数，而 OP 代码产生小端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:43:52.727

二进制“压缩”可以概括为加权和问题——为此有一些有趣的技术。

*   X mod (255) 本质上是对所有独立的 8 位数字求和。
*   X mod 254 表示将每个数字加倍权重，因为 1 mod 254 = 1、256 mod 254 = 2、256*256 mod 254 = 2*2 = 4 等等。

    如果编码是大端，那么 *(unsigned long long)array % 254 将产生加权和（截断范围为 0..253）。然后删除权重为 2 的值并手动添加将产生正确的结果：

    uint64_t a = *(uint64_t *)数组；返回 (a & ~256) % 254 + ((a>>9) & 2);

获得权重的其他机制是将每个二进制数字预乘 255 并屏蔽正确的位：

```
uint64_t a = (*(uint64_t *)array * 255) & 0x0102040810204080ULL; // little endian
uint64_t a = (*(uint64_t *)array * 255) & 0x8040201008040201ULL; // big endian 
```

在这两种情况下，都可以取 255 的余数（现在用权重 1 更正）：

```
return (a & 0x00ffffffffffffff) % 255 + (a>>56); // little endian, or  
return (a & ~1) % 255 + (a&1); 
```

对于持怀疑态度的人：我实际上确实将模数版本（略）比 x64 上的迭代快。

继续 JasonD 的答案，可以迭代地使用并行位选择。但首先以完整形式表达方程将有助于编译器消除使用累积的迭代方法产生的人为依赖：

```
ret =  ((a[0]<<7) | (a[1]<<6) | (a[2]<<5) | (a[3]<<4) |
        (a[4]<<3) | (a[5]<<2) | (a[6]<<1) | (a[7]<<0)); 
```

对比

```
HI=*(uint32_t)array, LO=*(uint32_t)&array[4];
LO |= (HI<<4);    // The HI dword has a weight 16 relative to Lo bytes
LO |= (LO>>14);   // High word has 4x weight compared to low word
LO |= (LO>>9);    // high byte has 2x weight compared to lower byte
return LO & 255; 
```

一种更有趣的技术是使用 crc32 作为压缩函数。那么结果恰好是 LookUpTable[crc32(array) & 255]; 因为与这个给定的 256 个不同数组的小子集没有冲突。然而，要应用它，人们已经选择了更不便携的道路，并且最终可能会使用 SSE 内在函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-15T11:10:38.283

试试这个，我转换了一个最多 1020 位的二进制数字

```
#include <sstream>
#include <string>
#include <math.h>
#include <iostream>
using namespace std;

long binary_decimal(string num) /* Function to convert binary to dec */
{
    long dec = 0, n = 1, exp = 0;
    string bin = num;
       if(bin.length() > 1020){
          cout << "Binary Digit too large" << endl;
       }
       else {

            for(int i = bin.length() - 1; i > -1; i--)
            {
                 n = pow(2,exp++);
                 if(bin.at(i) == '1')
                 dec += n;
            }

       }
  return dec;
} 
```

从理论上讲，这种方法适用于无限长度的二进制数字

# javascript - 不确定在 Backbone 视图中声明 2D 上下文变量的位置

> ID：14724634
> 
> 赞同：0
> 
> 时间：2013-02-06T08:31:47.830
> 
> 标签：javascript, backbone.js, canvas

我刚刚开始学习 Backbone，并想尝试使用该`canvas`元素创建一个简单的绘图应用程序。问题是，我不确定在视图中应该在哪里声明 2D 上下文对象（如果我应该在哪里声明它）？

**[我在这里有一个小提琴](http://jsfiddle.net/jlowgren/QFgpc/)**，虽然它目前不起作用。不过，它确实适用于我的本地开发环境。

# c# - 检查字符串是否在 Tuple 的 ObservableCollection 中

> ID：14724637
> 
> 赞同：0
> 
> 时间：2013-02-06T08:31:55.087
> 
> 标签：c#, wpf, linq, observablecollection

我有一个 ObservableCollection，如下所示：

```
ObservableCollection<Tuple<Guid, string>> _taskCollection 
```

我想编写一些代码来检查集合中是否存在给定的字符串。该字符串保存在“TaskName”中，我编写的代码如下所示：

```
_taskCollection.Select(x => x.Item2 == TaskName.Trim()).Any() 
```

我遇到的问题是，无论“TaskName”中的值是否在某个元组中，这行代码总是返回“true”。谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:33:35.153

您应该`Any`直接使用而不是之后使用`Select`：

```
_taskCollection.Any(x => x.Item2 == TaskName.Trim()) 
```

这段代码：

```
_taskCollection.Select(x => x.Item2 == TaskName.Trim()) 
```

将返回一个`bool`长度与 等价的列表`_taskCollection`，所以你打电话`Any`，它总是`true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:43:55.573

`Select`将 N 个输入项转换为 N 个输出项。这里的项目数量没有变化。

您想要的是过滤项目。这`Where`就是为了。

使用`Where`您的第二个查询将是正确的：

```
_taskCollection.Where(x => x.Item2 == TaskName.Trim()).Any(); 
```

这可以缩短为以下内容：

```
_taskCollection.Any(x => x.Item2 == TaskName.Trim()); 
```

原因是它`Any`提供了一个接受条件的重载。

而且我认为它真的很直观地读到：“里面有物品`Any`吗？”`_taskCollection``Item2 == TaskName.Trim()`

# android - AsyncTask 没有取消 android 中长时间运行的操作

> ID：14724640
> 
> 赞同：4
> 
> 时间：2013-02-06T08:32:06.597
> 
> 标签：android, android-asynctask, cancellation

我必须从服务器下载大量数据。下载至少需要 10 秒。这是我使用 asyntask 类下载的代码。如果用户在下载操作进行时单击主页按钮，我想无条件取消下载操作。问题是......我正在执行 cancel() 方法，但它没有取消下载操作。即使我退出应用程序，我也看到该操作在 logcat 视图中在后台运行。我只想停止执行 doInBackground() 方法。请指导/帮助我。

点击下载按钮：

```
 dwnldTask = new DownloadTask ();
  dwnldTask.execute(SERVER_URL); 
```

这是 Asynctask 类：

```
 class DownloadTask extends AsyncTask<String, Void, Object>{
    private Object response = null;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

         displaying progress dialog on UI 
    }
    @Override
    protected Object doInBackground(String... params) {
        try{   

             DataConnection dc = new DataConnection();

             this.response = dc.connectToServer(params[0]);

            if(isCancelled()){
                return null;
            }

        }catch (Exception e) {
            if(isCancelled()){
                return null;
            }   
            e.printStackTrace();
            showToastMSG(e.getMessage());
        }  

        return this.response ;
    }

    @Override
    protected void onPostExecute(Object response) {
        super.onPostExecute(response);

        if(response != null ){ 
            successfully downloaded...  go to next activity
             } 
            cancel progress dialog here
    }

} 
```

在 onPause()..

```
 @Override
protected void onPause() {
    super.onPause();
    if(dwnldTask != null && dwnldTask.getStatus() == AsyncTask.Status.RUNNING){
        dwnldTask.cancel(true);
    }  
     cancel the progress dialog if it is showing

} 
```

这是位于另一个名为 DataConnection 的类中的方法...

```
 public Object connectToServer(String url) throws Exception{
    HttpGet request = new HttpGet(url);
    request.addHeader("accept","application/json");
    HttpResponse response = httpClient.execute(request);   
    HttpEntity httpEntity = response.getEntity();
    InputStream responseInputStream = httpEntity.getContent();
    return myUtilObject.convertInputStreamToString(responseInputStream);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:34:42.973

您`isCancelled()`在执行下载后检查方法，因此没有理由在中间取消它。

通常你会做这样的事情：

```
while (!isCancelled()) {
 // Download next buffer..
} 
```

在这种情况下，一旦发出取消请求，循环就会停止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T09:43:52.727

我同意 Ran - 您没有编写以下代码： `myUtilObject.convertInputStreamToString` 但我猜您在输入流上循环使用您预定义其大小的缓冲区（可能使用 BufferedReader？） - 在此循环中，您应该检查异步线程的停止条件- [isCancelled()](http://developer.android.com/reference/android/os/AsyncTask.html#isCancelled%28%29)就是一个很好的例子。

如果线程被取消，循环应该停止，即：

```
String line = "";
StringBuilder total = new StringBuilder();
BufferedReader rd = new BufferedReader(new InputStreamReader(is), 1024);
while ((line = rd.readLine()) != null && !isCancelled())
{
     total.append(line);
} 
```

# regex - 用 SED 重复正则表达式替换

> ID：14724643
> 
> 赞同：5
> 
> 时间：2013-02-06T08:32:16.847
> 
> 标签：regex, linux, sed

我有以下几行（实际上有大约 1M 这些行）：

```
foo|||bar
qux||boo|fzx 
```

请注意，每行正好包含 4 个字段，但字符数可以超过 3 个。

我想要做的是`||`用`|nil|`结果替换每个：

```
foo|nil|nil|bar
qux|nil|boo|fzx 
```

用 sed 的方法是什么？

我试过这个但失败了：

```
sed 's/||/|nil/g' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-06T08:40:44.490

您需要重复替换，直到它不改变：

```
sed ':a; s/||/|nil|/g; ta' 
```

但是，这不会处理开头或结尾的空字段，因为您需要另外两种模式：

```
sed 's/^|/nil|/; s/|$/|nil/; :a; s/||/|nil|/g; ta' 
```

*测试*

输入：

```
cat << EOF > infile
foo|||bar
qux||boo|fzx
|||
EOF 
```

运行：

```
<infile sed 's/^|/nil|/; s/|$/|nil/; :a; s/||/|nil|/g; ta' 
```

输出：

```
foo|nil|nil|bar
qux|nil|boo|fzx
nil|nil|nil|nil 
```

### 一种尴尬的方式

```
awk '{ for(i=1;i<=NF;i++) if(length($i)==0) $i="nil" } 1' FS='|' OFS='|' 
```

# xaml - xaml 中的元素是否可以绑定多个路径？

> ID：14724645
> 
> 赞同：0
> 
> 时间：2013-02-06T08:32:22.863
> 
> 标签：xaml, binding, path

在 XAML 中，我有一个按钮已经绑定到它的可见性标记上的路径“HasWritePermission”。是否可以在同一个标​​签上添加另一条路径？假设我想根据某些逻辑完全隐藏按钮。

为了给出一些上下文，该按钮是一个删除按钮，如果给定列表为空，则该按钮不可见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:38:56.920

看看多重绑定

```
<DataGridTextColumn.Binding>
    <MultiBinding Converter="{Quire_UI_Value_Converters:DiscountConverter}" Mode="TwoWay" NotifyOnSourceUpdated="True" UpdateSourceTrigger="LostFocus">
        <Binding Path="Discount_Taken_Value" Mode="TwoWay"/>
        <Binding Path="Discount_Taken_Type" Mode="TwoWay"/>
    </MultiBinding>
</DataGridTextColumn.Binding> 
```

# javascript - 无法检索标记为脏的行（jqGrid（“setCell”，rowId，'area'，''，“dirty-cell”）（使用getChangedCells（'dirty'）；

> ID：14724652
> 
> 赞同：0
> 
> 时间：2013-02-06T08:32:39.417
> 
> 标签：javascript, jquery-ui, jsp, jquery

我在下面使用此代码将特定列“区域”标记为脏。

```
 $("#list4").jqGrid("setCell", rowId ,'area' ,'', "dirty-cell" ); 
```

我想使用下面的代码检索标记为脏的这一行：

```
var retCol = $('#list4').getChangedCells('dirty'); 
```

我无法使用 getChangedCells('dirty'); 检索此修改后的行；

但是，如果我使用如下硬编码值

```
$("#list4").jqGrid("setCell", rowId ,'area' ,'200', "dirty-cell" ); 
```

我可以在 jqGrid 中看到这个更改的值，但我仍然无法使用

```
getChangedCells('dirty'); 
```

任何帮助都将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:58:22.057

```
//With the help i got from Oleg, it works like i wanted.. 

    var $grid = $("#list4");
    $("#" + $.jgrid.jqID(rowId)).addClass("edited");
    $grid.jqGrid("setCell", rowId, "area", "", "dirty-cell"); 
```

# django - 错误：尝试创建数据库 django 时权限被拒绝

> ID：14724656
> 
> 赞同：4
> 
> 时间：2013-02-06T08:33:14.267
> 
> 标签：django, postgresql, virtualbox, vagrant

我正在尝试为 django 项目创建数据库，但出现以下错误：

> (blog-venv)vagrant@precise64:/vagrant/django_projects/microblog$ createdb microblog createdb: 数据库创建失败: 错误: 权限被拒绝创建数据库

我在 vagrant/virtualbox 环境中工作。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-06T09:02:37.703

通过确保我具有超级用户权限解决了这个问题。

=> ALTER USER myusername CREATEDB

# php - 致命错误：使用批处理文件调用未定义的函数 curl_init()

> ID：14724661
> 
> 赞同：1
> 
> 时间：2013-02-06T08:33:46.287
> 
> 标签：php, curl

我有一个从后端下载文件的 PHP。我在 Windows 7 中使用 WAMP，通过浏览器完成后它可以完美运行。

现在我创建了一个批处理文件来执行 php，它显示：

> 致命错误：调用未定义的函数 curl_init()

不知道为什么可以在浏览器中工作的东西在批处理文件中不起作用。以下是我的批处理文件代码：

```
@ECHO OFF
php.exe -f "C:\wamp\www\test\test.php" 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T08:42:30.650

取消注释您的 php.ini 上的以下内容

```
;extension=php_curl.dll 
```

并重新启动网络服务器。这可能是由于您的 php.ini 中禁用了 curl。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-15T00:30:58.100

当您使用 wamp、xamp 或其他一体式服务器时，它使用位于 bin/conf/ 中的覆盖的 php.ini，而不是原始位置。

您需要从中复制或编辑位于 php.exe 文件夹中的 ini。

如果您无法访问它（共享服务器等），您可以在脚本文件夹中创建一个自定义 php.ini 文件，并放入所需的说明：

```
extension_dir = "c:/wamp/bin/php/php5.3.5/ext/" // change version if needed to yours
extension = php_curl.dll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:49:50.873

通过浏览器使用时，它使用的是 WAMP，PHP ini 来自 C:\wamp\bin\php\php5.4.3

但是我在环境变量中将我的 php 目录设置为 C:\php-5.4.9，因此当使用 windows 批处理时，它会从该目录调用 php，并且那里没有 php.ini 文件。

我将 PHP ini 文件从 wamp 复制到 php 文件夹，现在它可以工作了。

显然我已经安装了 php 然后 wamp，因此存在重叠导致混乱。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-29T00:02:52.290

我的解决方案：

1)`sudo apt-get install php5-curl`

2) 重启服务器

# ruby-on-rails - 仅在登录和 GUI 自定义后实现聊天应用程序

> ID：14724662
> 
> 赞同：1
> 
> 时间：2013-02-06T08:33:47.443
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, chat

我正在制作一个应用程序，该应用程序在应用程序内的成员之间执行聊天功能，以便两个人在登录后可以聊天。这个聊天功能在图形用户界面和功能方面应该类似于 gmail 聊天服务。我正在使用喋喋不休的宝石。使用它，我能够创建类似的 GUI 和功能。

但是现在我有两个问题：

1.  它在登录后工作，但我也可以在登录前聊天。我不知道如何将其限制为仅在登录后才能使用。

2.  如何自定义 GUI 以使其更友好。我的意思是有什么替代方法可以根据适合的方式更改 GUI。

还告诉我是否有更好的方法来实现类似于 gmail 聊天的聊天功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:15:47.547

1.）很高兴看到一些代码并帮助你。通常，您需要将一些自定义逻辑放入控制器中，以负责将使用限制为登录后的聊天功能。我对“喋喋不休”不太熟悉，但我知道它与设计宝石有关，因此请具体看一下这种关系。最有可能的是，您需要`before_filter`在控制器中确保用户经过身份验证。

2.) 查看以下链接，了解有关用户之间实时聊天的更多详细信息：

[https://softwareengineering.stackexchange.com/questions/104611/real-time-chat-in-ruby-on-rails](https://softwareengineering.stackexchange.com/questions/104611/real-time-chat-in-ruby-on-rails)

[在 Rails 中实现聊天](https://stackoverflow.com/questions/10369263/implementing-chat-in-rails)

[Ruby on Rails 3 - 公共实时聊天](https://stackoverflow.com/questions/7156729/ruby-on-rails-3-public-live-chat)

# css - 具有相对 URL 的 CSS 图像有时相对于 IE 中的页面 URL

> ID：14724664
> 
> 赞同：4
> 
> 时间：2013-02-06T08:33:58.100
> 
> 标签：css, image, internet-explorer, internet-explorer-8, relative-url

我似乎发现 IE 有时会尝试使用相对 URL 加载 CSS 图像，相对于页面 url 而不是 CSS 文件 url。

示例...有人加载此网址：

`https://www.main-events.com/event/234/my-awesome-show/onlineentry/step-four/do-something`

那有一个CSS文件：

`<link rel="stylesheet" type="text/css" href="/content/core/MainEvents.min.css" />`

里面有这个：

```
.fade-red
{
    background: url("../../img/fade-red.png") repeat-x scroll 0 100% #9D0032;
} 
```

然后我得到一个看起来像这样的异常：

`HttpException: The controller for path '/event/234/my-awesome-show/onlineentry/img/fade-red.png' was not found or does not implement IController.`

看看发生了什么？

而不是像这样加载`../../img/fade-red.png`相对于 CSS url 的 url ...它错误地尝试像这样相对于页面 url 加载它。`/content/core/MainEvents.min.css``/img/fade-red.png``/event/234/my-awesome-show/onlineentry/step-four/do-something``/event/234/my-awesome-show/onlineentry/img/fade-red.png`

我检查了 UserAgent 字符串，它似乎总是 IE8。这是我见过的一些：

```
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; GTB5; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; GTB7.4; .NET CLR 1.1.4322; .NET CLR 2.0.50727; WinNT-PAI 22.06.2009; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; HPNTDF; .NET4.0C; BRI/1; BRI/2)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 1.1.4322; .NET CLR 2.0.50727; OfficeLiveConnector.1.3; OfficeLivePatch.0.0; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.2; Trident/4.0; .NET CLR 1.1.4322; .NET4.0C) 
```

**我想我的问题是，有人遇到过这个吗？这是 IE8 的已知问题吗？将我的 css 图像网址更改为绝对唯一的解决方法吗？**

# sql - 使用 NHibernate 删除带有复合键的表的前 X 行

> ID：14724666
> 
> 赞同：1
> 
> 时间：2013-02-06T08:34:00.720
> 
> 标签：sql, nhibernate

我们有下表：

```
CREATE TABLE TagValueDouble(
    TagIdentity [int] NOT NULL,
    TimestampInUtcTicks [bigint] NOT NULL,
    DoubleValue [float] NULL,
CONSTRAINT [PK_TagValueDouble] PRIMARY KEY CLUSTERED 
(
    TagIdentity ASC,
    TimestampInUtcTicks ASC
) 
```

该表充满了来自不同来源（例如风速）的许多测量值。TagIdentity，代表来源，结合时间戳代表唯一的记录。

这个表变大了，比如 2000 个不同的源，更新率为 2Hz。

不经常，但有时我们删除一个源，我们需要删除表中该源的所有记录。问题是使用 NHibernate 查询超时。

我的计划是一次删除 X 行不再属于系统的记录。类似的东西：

```
DELETE FROM TagValueDouble 
WHERE TagIdentity in
(SELECT TOP 10 TagIdentity, TimestampInUtcTicks
  FROM TagValueDouble
  Where TagIdentity not in (12, 14)) 
```

但这不起作用。

关于如何在不冒超时风险的情况下清理桌子的任何想法？

我正在寻找稳定性而不是性能。删除源的所有值是很少做的事情。

PS。它必须在 SQL Server、Oracle、Posgres 和 SQL CE 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:38:30.263

您似乎缺少 TagIdentity 上的索引。创建索引并确保在删除记录之前正确填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:46:16.407

一个想法是做这样的事情：

```
DELETE FROM TagValueDouble
WHERE (TagIdentity + 4000) * 315360000000000 + TimestampInUtcTicks IN
(SELECT TOP 1000 (TagIdentity + 4000) * 315360000000000 + TimestampInUtcTicks 
 FROM TagValueDouble
 WHERE TagIdentity NOT IN (5, 10, 12, 13)) 
```

理由是我不希望系统在 4000 年运行。所以我将 TagIdentity 和 TimestampInUtcTicks 组合为一个唯一值。但这最终检查了表中的所有整数。

我最终得到的是查询一个不在“允许的”TagIdentity 集中的值。然后从该值时间戳和 24 小时前删除任何值。如果该查询也超时，请减少删除成功前的小时数。执行此工作直到找不到更多值来清理数据库。

# android - Android Activity 不会退出，onResume() 在 onPause() 之后立即被调用

> ID：14724667
> 
> 赞同：1
> 
> 时间：2013-02-06T08:34:08.817
> 
> 标签：android, android-activity, onresume, onpause

我似乎遇到了一个有两个活动的应用程序的奇怪问题，这两个活动都使用媒体播放器：

我正在创建一个 Android 游戏。它有两种活动：一种用于菜单（在启动时启动），另一种用于游戏（在您选择关卡时启动）。我已经设置好了，如果你在游戏中然后点击后退按钮，它会返回到菜单活动。然后，理想情况下，如果您再次点击后退按钮，它应该完全退出应用程序。它不是。我 `LogCat`在菜单活动`onPause()`和`onResume()`方法中放置了调试语句。我可以看到它`onResume()`在之后立即被调用`onPause()`。如果我禁用音乐，那么它会正确退出。

以下是我`onPause()`的菜单活动方法。我没有正确完成媒体播放器吗？有什么会导致`onResume()`被调用的吗？

`GlMainMenu`是我的`GLSurfaceView`

```
protected void onPause() {
    GlMainMenu.onPauseCalled = true;
    GlMainMenu.mediaPlayer.release();
    GlMainMenu.hasPlayedStartMusic = false;

    if (isShowingPauseDialog) {
        pauseDialog.cancel();
    }

    super.onPause();
    MMglSurfaceView.onPause();
    finish();
} 
```

一些注意事项：

*   如果我启动应用程序并立即按下后退按钮，它工作正常。只有当我启动应用程序，进入游戏，返回菜单，然后尝试使用返回按钮时它才会失败。

*   使用主页按钮始终正确退出。

*   以防万一，这两个活动都`opengl`用于图形

# c++ - 两个 C++/CX Platform::Array:s 之间的高效复制方法？

> ID：14724668
> 
> 赞同：1
> 
> 时间：2013-02-06T08:34:11.520
> 
> 标签：c++, windows-runtime, copy, c++-cx

我想将一个对象中的一系列项目复制`Platform::Array`到另一个`Platform::Array`. 我当然可以用一个`for`循环来解决这个问题：

```
int srcIdx = srcIdx0;
int destIdx = destIdx0;
for (int i = 0; i < count; ++i, ++srcIdx, ++destIdx)
    dest[destIdx] = src[srcIdx]; 
```

我想知道的是，C++/CX（组件扩展）中是否有一些内置功能可以更有效地执行此操作且不那么冗长？

在 C# 中，有[Array.Copy](http://msdn.microsoft.com/en-us/library/z50k9bft.aspx)方法，使用 C++/CLI [Marshal.Copy](http://msdn.microsoft.com/en-us/library/4cew0s1h.aspx)至少是复制“原始”类型的一个选项。

在 C++ STL 中，有`std::copy`and `std::copy_n`，但据我所知，这些算法不适用于`Platform::Array`“迭代器”`begin()`和`end()`.

某处是否有“隐藏”的 C++/CX 便捷复制方法，或者我是否必须回退`for`此操作的显式循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:08:16.110

此时似乎没有内置的`Platform::Array`复制方法，因此我实现了自己的模板功能：

```
template<typename T> void Copy(
    const Platform::Array<T>^ sourceArray, 
    int sourceIndex, 
    Platform::Array<T>^ destinationArray, 
    int destinationIndex, 
    int length)
{
    for (int i = 0; i < length; ++i, ++sourceIndex, ++destinationIndex)
        destinationArray[destinationIndex] = sourceArray[sourceIndex];
}; 
```

关于如何改进复制部分的建议非常受欢迎:-)

# java - 尝试/捕获异常，以便我可以返回一个数组值并打印出一个异常？

> ID：14724670
> 
> 赞同：1
> 
> 时间：2013-02-06T08:34:18.073
> 
> 标签：java, arrays, exception, try-catch

嗨，我正在编写一个彩票方法，用户必须输入两个数字 n 和 k 作为参数。彩票被一个随机队列填满，该队列最多为 k。因此，如果我输入 k=10，队列将容纳 1、2、3、4、5、6、7、8、9、10。参数 n 是必须随机删除的项目数。所以如果我选择 3 那么它可以返回 4,6,8 或者它可以是 1,3,10。

现在如果 n 大于 k 它必须抛出一个错误，说明队列中没有足够的项目可以拉取。因此，如果我输入 n=5 和 k=3，队列中仍有 3 个项目，但我无法从队列中选择 5，因为这太多了。

现在我的问题是我必须返回仍在队列中的项目。所以 n=5 和 k=3 将返回 1,3,2 或 2,3,1 等等。但是我必须在返回该数组后打印一个异常。到目前为止，我能够返回数组，但我无法让 try catch 异常工作。是否有另一种方法我可以尝试返回数组，然后打印出异常，所以它看起来像这样：

```
%java Lottery 5 2 //calls the method with the arguments n=5 k=2
2  1    //still prints the items in the queue
java.lang.Exception: Not enough items in your queue. // returns the error as well
at Lottery.pickNumbers(Lottery.java:29) //dont pay attention to these line numbers, this was a test case given to us
at Lottery.main(Lottery.java:56) 
```

这是我的代码：

```
import java.util.*;
import java.math.*;
public class Lottery{
    RandomizedQueue rq;
    Random Rnum = new Random();
    int [] Larray;

    // constructs a Lottery class
    public Lottery(){
    }

    // picks the numbers and store them in an array of integers
    // int n: number of items to pick
    // int k: maximum integer to be picked

   public int [] pickNumbers(int n, int k) throws Exception{

        rq = new RandomizedQueue();

        int [] remainQueue = new int [k];

        if(n>k) 
        {
            for(int i=1; i<=remainQueue.length;i++)
            {
                rq.enqueue(i);
            }
                for(int i=0; i<remainQueue.length;i++)
                {
                    remainQueue[i] = rq.dequeue();
                }
                return remainQueue; 
        }  

        for(int i =1;i<=k;i++)
        {
            rq.enqueue(i);
        }

        Larray = new int[n];
        for(int i = 0;i< Larray.length;i++)
        {
            Larray[i] = rq.dequeue();
        }

        return Larray;

    }

    // Do not change main().
    public static void main(String [] args) throws Exception{
        if (args.length<2){
           System.out.println("Please enter your input values.");
           System.out.println("e.g. java Lottery [number of integers to pick] [Maximum integer to be picked]");
       }else{
           int n = Integer.parseInt(args[0]);
           int k = Integer.parseInt(args[1]);
           Lottery l = new Lottery();
           try{
           int [] picked = l.pickNumbers(n,k);
           for (int i = 0; i< picked.length; i++){
               System.out.print(picked[i]+" ");
           }
           System.out.println();
           }catch (Exception e){
           e.printStackTrace();
           }
       }

    } 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:45:31.307

为此，您需要创建自己的自定义异常。按照步骤。-> 创建一个扩展异常的类 -> 编写自己的异常并处理说，

```
public class MyException extends Exception {
// special exception code goes here
} 
```

将其扔为：

```
throw new MyException ("Something happened")

Catch as:

catch (MyException e)
{
// something
} 
```

在您的情况下，如果（n

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:52:19.973

更改您的主要方法，如下面的代码。在没有异常的情况下，您将按预期获得 Result，如果出现异常，则会获取先前填充的 Array 并显示它。通过这种方式，您将获得填充结果和异常。

```
import java.util.*;
import java.math.*;
public class Lottery{
    RandomizedQueue rq;
    Random Rnum = new Random();
    int [] Larray;

    // constructs a Lottery class
    public Lottery(){
    }

    // picks the numbers and store them in an array of integers
    // int n: number of items to pick
    // int k: maximum integer to be picked

   public int [] pickNumbers(int n, int k) throws Exception{

        rq = new RandomizedQueue();

        int [] remainQueue = new int [k];

        if(n>k) 
        {
            for(int i=1; i<=remainQueue.length;i++)
            {
                rq.enqueue(i);
            }
                for(int i=0; i<remainQueue.length;i++)
                {
                    remainQueue[i] = rq.dequeue();
                }
                return remainQueue; 
        }  

        for(int i =1;i<=k;i++)
        {
            rq.enqueue(i);
        }

        Larray = new int[n];
        for(int i = 0;i< Larray.length;i++)
        {
            Larray[i] = rq.dequeue();
        }

        return Larray;

    }

    // Do not change main().
    public static void main(String [] args) throws Exception{
        if (args.length<2){
           System.out.println("Please enter your input values.");
           System.out.println("e.g. java Lottery [number of integers to pick] [Maximum integer to be picked]");
       }else{
           int n = Integer.parseInt(args[0]);
           int k = Integer.parseInt(args[1]);
           Lottery l = new Lottery();
           try{
           int [] picked = l.pickNumbers(n,k);
           for (int i = 0; i< picked.length; i++){
               System.out.print(picked[i]+" ");
           }
           System.out.println();
           }catch (Exception e){
               int [] picked = l.Larray;
               for (int i = 0; i< picked.length; i++){
                   System.out.print(picked[i]+" ");
               }
               System.out.println();

           e.printStackTrace();
           }
       }

    } 

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:53:43.357

你不能。这样做甚至没有意义。异常用于异常行为。据我了解，要求比队列中更多的项目是预期的行为（即，您有一个用例说“返回剩余的队列”。因此，如果您想处理错误，您应该简单地执行类似的操作。

```
if (picked.length != k)
{
  System.out.println("You are attempting to choose more numbers than there are items (left) in the pool");
} 
```

或者，由于您预先知道值 n 和 K，您可以简单地进行一些输入验证

```
if (k>n)
{
  System.out.println("The amount of available numbers is smaller than the amount of numbers you wish to draw.")
} 
```

此外，您可能应该使用 Set 而不是 Array。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T09:19:31.553

我就是这样做的。完整的工作代码：

```
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class Lottery {
    public void pickNumbers (int n, int k, List<Integer> values)
        throws Exception
    {
        RandomizedQueue <Integer> rq = new RandomizedQueue <Integer> ();

        for (int i = 0; i < k; i++)
            rq.enqueue (i);

        if (n <= k)
        {
            for (int i = 0; i < n; i++)
                values.add (rq.dequeue ());
        }
        else
        {
            for (int i = 0; i < k; i++)
                values.add (rq.dequeue ());

            throw new Exception ("N > K");
        }
    }

    public static void main (String [] args)
    {
        int n = Integer.parseInt (args [0]);
        int k = Integer.parseInt (args [1]);
        Lottery l = new Lottery ();
        List <Integer> picked = new ArrayList <Integer> (n);
        try
        {
            l.pickNumbers (n, k, picked);
        } 
        catch (Exception e)
        {
            e.printStackTrace();
        }

        for (int i = 0; i < picked.size (); i++){
            System.out.print (picked.get (i) + " ");
        }
        System.out.println();
    }

    private static class RandomizedQueue <T> extends ArrayList <T>
    {
        private final Random r = new Random ();

        public void enqueue (T x)
        {
            add (x);
        }

        public T dequeue ()
        {
            return remove (r.nextInt(size ()));
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T08:53:14.307

*   您可以创建自己的`Exception`覆盖类型`setMessage`

*   或简单而不是`e.printStackTrace()`使用`e.getMessage()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T08:40:41.137

*您可以从方法中返回 throw Exception 的值，两者都不能同时完成。*

您可以创建自定义 Exception 类，并在其中保存处理结果并在出现异常时抛出该结果。

```
public class MyException extends Exception{
     private int[] processedResult;
     public MyException(String str,int[] result){
        this.processedResult = result;
     }
     ...
     @override
     public String toString(){
       ....
     }
} 
```

...

```
public int [] pickNumbers(int n, int k) throws MyException{
    int[] larray = new int[n];
    try{
       ...
    }catch(Exception ex){
        new MyException("...",larray );
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-06T08:44:19.933

试试这个方法：

1.  在中创建列表`main()`
2.  将该列表传递给`pickNumbers()`
3.  `pickNumbers()`返回`void`并将结果添加到列表中。
4.  当你遇到错误时，抛出异常
5.  在`main()`中，捕获异常。然后该列表将包含到目前为止已计算的所有结果。

或者，编写您自己的异常，它接受现有结果作为参数。`main()`然后可以从异常中读取它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-06T09:27:30.350

您不能同时抛出异常和返回值。

退后一步，看看你想要实现的目标。您需要从您的方法返回多个值 - 一个数字列表和一个状态 - 这会建议我返回一个包含这些值的复杂对象，而不是一个简单的`int[]`：

```
public class LotteryPick {
    public int status;
    public int[] numbers;
}

public LotteryPick pickNumbers(int n, int k) {
...
} 
```

实际上，我会使用`Set<Integer>`for `numbers`， enum for `status`，并且可能使用 getter/setter 作为字段。

或者，如果您必须抛出异常，请创建一个自定义异常类 ( `... extends IllegalArgumentException`?)，该类也有一个 int[] 字段来保存选取的数字。不过我不推荐这种方法，无论如何它在功能上都等同于上述方法。

# google-maps - 谷歌地图和api显示不同的结果

> ID：14724672
> 
> 赞同：1
> 
> 时间：2013-02-06T08:34:27.113
> 
> 标签：google-maps, google-maps-api-3, google-api

我很惊讶我是否做错了什么。当我在谷歌地图上找到两个位置之间的距离时，说 maps.google.co.uk，当我查询他们的 API 时，我得到不同的结果。我错过了什么吗？

起点：英国伦敦骑士桥海德公园角站目的地：英国伦敦丽兹酒店结果：1.2 英里

当我使用 api 时：

[http://maps.googleapis.com/maps/api/directions/json?origin=Hyde%20Park%20Corner%20Station,%20Knightsbridge,%20London,%20United%20Kingdom&destination=The%20Ritz%20London,%20United%20Kingdom®ion= gb&sensor=false&alternatives=true&units=英制](http://maps.googleapis.com/maps/api/directions/json?origin=Hyde%20Park%20Corner%20Station,%20Knightsbridge,%20London,%20United%20Kingdom&destination=The%20Ritz%20London,%20United%20Kingdom&region=gb&sensor=false&alternatives=true&units=imperial)

结果：4.3 英里或 5.0 英里等。

为什么会有这么大的区别。我是不是错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T13:18:41.373

谷歌地图和路线（或地理编码）等服务之间存在显着差异

Google Maps 最初是 Google Places 的一个实现，这就是这里的问题。方向服务使用地理编码来解析地址，而谷歌地图使用 PlacesService。

当您使用方向渲染器绘制路线时，您会看到有不同的起点和终点位置。

但是当你第一次请求 PlacesService 获取地点的坐标，并使用这些坐标来请求方向服务时，你会得到一个接近谷歌地图结果的结果（持续时间可能不同，因为方向服务默认不会返回结果取决于当前流量）

# ajax - 如何为这个简单的 ajax 提供 1 个以上的输出？

> ID：14724674
> 
> 赞同：0
> 
> 时间：2013-02-06T08:34:33.237
> 
> 标签：ajax

这是我从 w3schools 学到的用于加载 AJAX 的脚本。

```
document.getElementById("sendInvoiceButton").innerHTML = '';
  var xmlhttp;
  if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  }
  else
  {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange=function()
    {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
        document.getElementById("invoiceIDStatus").innerHTML = '';
        document.getElementById("invoiceIDStatus").innerHTML=xmlhttp.responseText;
      }
    }

  var invoiceID = document.getElementById("cred_form_4684_1_wpcf-ticket-invoice-id").value;
  var text = "invoiceID=" + encodeURIComponent(invoiceID);
  document.getElementById("invoiceIDStatus").innerHTML = '<img src="http://www.lessons.com.sg/freshbooks/demo_wait.gif" />';
  xmlhttp.open("POST","/freshbooks/getInvoice.php",true);
  xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
  xmlhttp.send(text);
} 
```

我只能输出 1 xmlhttp.responseText；

我也想将发票号码发送到文本框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:39:19.567

简单的方法

```
if (xmlhttp.readyState==4 && xmlhttp.status==200) {
    ...
    document.getElementById("yourTextboxId").innerHTML=xmlhttp.responseText;
} 
```

或者如果使用文本框，您的意思是文本字段

```
if (xmlhttp.readyState==4 && xmlhttp.status==200) {
    ...
    document.getElementById("yourTextfieldId").value=xmlhttp.responseText;
} 
```

* * *

我建议使用jquery，更简单且跨浏览器兼容

使用 jquery 这将是

```
$.ajax({
    url:'/freshbooks/getInvoice.php',
    method:'POST',
    data: {invoiceID: $('#cred_form_4684_1_wpcf-ticket-invoice-id').val()},
    success: function(data) { 
       $('#invoiceIDStatus').html(data);
       $('#yourTextfieldId').val(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:41:28.250

我不确定您收到的数据结构，但您可以将其发送为 html 格式，然后将`find()`其拆分并放入不同的输入字段。

# c# - 如何打开对话中心屏幕或中心所有者？

> ID：14724676
> 
> 赞同：0
> 
> 时间：2013-02-06T08:34:37.590
> 
> 标签：c#, wpf, mvvm, dialog

我有一个 MVVM 应用程序，我有一个主视图模型。在此模型中，我使用以下代码打开一个对话框：

```
dlgViewModel myDlgViewModel = new dlgViewModel();
dlgView myDlgView = new dlgView();
myDlgView.DataContext = myDlgViewModel;
myDlgView.Owner = App.Current.MainWindow;
myDlgView.WindowStartupLocation = WindowStartupLocation.CenterOwner;
myDlgView.ShowDialog(); 
```

此外，在我的 dlgView 上的 XAML 中，我将 WIndowsStartupLocation 设置为 CenterOwner。然而，窗户并没有在主人的中心打开。我试过CenterScreeen，但这也不起作用。

如何使用 centerOwner 或 centerScreen 选项打开新视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T09:40:53.807

好吧，第一次是在我的对话框 WindowsStartUpLocation 的 axml 中设置为中心所有者。

然后，在主视图模型中，我使用以下代码：

```
dlgViewModel myDlgViewModel = new dlgViewModel();
dlgView myDlgView = new dlgView();
myDlgView.DataContext = miDlgViewModel;
myDlgView.Owner = App.Current.MainWindow;
myDlgView.ShowDialog(); 
```

# asp.net-mvc - ASP MVC 3：运行 cron 作业而不影响用户

> ID：14724679
> 
> 赞同：0
> 
> 时间：2013-02-06T08:34:51.943
> 
> 标签：asp.net-mvc, asp.net-mvc-3

对于我的网站，我需要：

*   记录动作和渲染时间
*   记录某个产品的访问
*   不时汇总选票
*   时事通讯
*   不时在社交网络上发帖

我的方法是创建一个全局过滤器和**OnResultExecuted**我进行检查和所需的操作。

我有一些疑问：

1.  当 OnResultExecuted 运行时，用户是否收到了呈现的页面并且基本上没有等待其他任何内容？我阻止它吗？
2.  在 OnResultExecuted 中为此作业启动一个新线程是个好主意吗？
3.  这种方法在 ASP MVC 4 中可以吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:42:15.353

根据 MSDN，在响应写入后调用此方法（[http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onresultexecuted(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.onresultexecuted(v=vs.108).aspx)）所以你不会阻止响应。

除了前两点（操作记录和访问记录）之外，其他点可能会根据任务的大小占用大量资源。

我的建议是为前两个任务覆盖 OnResultExecuted，并使用 Windows 服务（可以很容易地用 C# 编写）在后台执行其他任务。这样，您可以使用成本较低的 clr 线程而不是 iis 工作线程。

在后台运行耗时/资源消耗任务将增加 Web 应用程序的可扩展性

希望这可以帮助

# scala - Scala 集：+ 与 ++

> ID：14724682
> 
> 赞同：4
> 
> 时间：2013-02-06T08:35:13.620
> 
> 标签：scala, set

应用于集合的 + 和 ++ 有什么不同？

```
scala> val set = Set[String]("a","b")
set: scala.collection.immutable.Set[String] = Set(a, b)

scala> set + "c"
res2: scala.collection.immutable.Set[String] = Set(a, b, c)

scala> set ++ "c"
res3: scala.collection.immutable.Set[Any] = Set(a, b, c) 
```

第一个返回 Set[String]，第二个返回 Set[Any]。看起来 ++ 更通用，但 ++ 附加值究竟是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T08:41:25.543

这应该清楚地表明：

```
 ( set ++ "c") contains "a"  // true; "a" is a String in this set.

 ( set ++ "c") contains "c"  // false, "c" is a NOT a string in this set.

 ( set ++ "c") contains 'c'  // true, 'c' is a CHAR in this set. 
```

因此`( set ++ "c")`产生了一个集合，其中包含原始`Set[String]`的`"a"`and`"b"`并且现在还包含`'c'`which 是 a `Char`，因此 of 的类型`( set ++ "c")`现在是 a `Set[Any]`。

可以将 String`"c"`视为 的可遍历对象`Chars`。集合上的`++`方法接受可遍历。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T08:38:10.320

从[斯卡拉多克](http://www.scala-lang.org/api/current/index.html#scala.collection.Set)

它看起来像是`+`被设计为直接添加元素，而`++`被设计为从另一个集合中添加。

也许 `"c"`被转换成一个集合，如果是这样，这个方法可能会有点重，因为正在创建一个临时对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T08:44:19.327

Karthik T 是对的，String 是（编辑：隐式转换为）一个集合，因此您可以在`++`此处使用。如您所见，结果集不再是类型`Set[String]`，而是 if `Set[Any]`。那是因为 a`String`是and`Char`的公共超类型的集合。`String``Char``Any`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T08:46:04.800

如果您查看Set 的 ++ 方法的[API 文档，您会发现它需要一个 GenTraversableOnce](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Set)

```
scala> val c:GenTraversableOnce[Any] = "c"
c: scala.collection.GenTraversableOnce[Any] = c 
```

这意味着在这种情况下：

```
scala> set ++ "c"
res3: scala.collection.immutable.Set[Any] = Set(a, b, c) 
```

“c”是一个 GenTraversableOnce[Any]，然后 ++ 方法将添加该集合的所有元素。

（我怀疑像许多其他回答者一样，我只是在 Scala 控制台中进行了一些摆弄以检查然后仔细检查这是否是通过隐式转换。是的，它似乎是。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T12:41:07.973

在你的 REPL 中尝试一下，以获得明显的区别

```
val set = Set[Int](1,2)

set + 3 //res0: = ...set[Int] = (1,2,3)
set + Set[Int](3,4)  //Type mismatch
set ++ Set[Int](3,4) //res5: ...set[Int] = (1,2,3,4) 
```

如果您将 Set 添加到另一个 set 使用`++` 如果您将元素添加到 Set 使用`+`

# datagrid - EasyUI 重新加载不会更新数据

> ID：14724685
> 
> 赞同：0
> 
> 时间：2013-02-06T08:35:22.317
> 
> 标签：datagrid, jquery-easyui

我通过 AJAX 提交表单，成功后我尝试重新加载数据网格。网格确实刷新了，但它没有反映我刚刚发布的值 - 就好像它没有查询更新的数据库一样。

```
$('#mupdate').live('click',function(){      
    var objectid=$('#objectid').val();
    var docname=$('#docname').val();
    var jsonurl = urlcurrentbase + '/doc/update/'+ docname +'/'+ objectid;

    $.ajax({
        type: "POST",
        url: jsonurl,
        data: $("#mainform").serialize(),
        success: function(data){
            $('#mrdg').datagrid('reload');
        }
    });
}); 
```

我通过 PHP 加载网格。

```
 <table id="mrdg" class="mrdg" data-options="url:'<?php echo URL::base();?>/json/getmainlist/<?php echo $urldocname?>',pagination:true,singleSelect:true,striped:true,fit:true,pageSize:50"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:57:44.660

你能试一下吗，

```
<table id="mrdg" class="easyui-datagrid" data-options="url:'<?php echo URL::base();?    >/json/getmainlist/<?php echo $urldocname?>',pagination:true,singleSelect:true,striped:true,fit:true,pageSize:50"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:53:04.780

无需调用 ajax，因为 datagrid 已经这样做了.. 只需调用 datagrid 的 url 中的 url ..

尝试这个，

```
 $('#mupdate').live('click',function(){      
 var objectid=$('#objectid').val();
 var docname=$('#docname').val();
 var jsonurl = urlcurrentbase + '/doc/update/'+ docname +'/'+ objectid;

 $('#mrdg').datagrid({url: jsonurl}); 
```

这应该做...

# bash - 使用没有 rsync 的 bash 脚本同步文件夹

> ID：14724691
> 
> 赞同：0
> 
> 时间：2013-02-06T08:35:48.083
> 
> 标签：bash, sync, scp

我的任务是执行 VMware vCenter 设备数据库的备份。我们无法安装适用于 Linux 的 Backup Exec 代理，因此我们将数据库转储到磁盘，然后使用脚本 SCP 将它们转移到另一个 *nix 机器上。

这工作正常，而且我在设备上拥有它，我们只保留一周的备份。

我遇到的问题是确保远程机器上的备份是同步的，所以两台机器上只有几周的时间。

Rsync 没有安装，所以我不知道如何在远程机器上不设置另一个脚本的情况下远程删除它们，而我不想这样做。

任何方式都可以在一个脚本中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:40:51.300

如果你可以使用`scp`，你可能也可以使用`ssh`来执行远程命令。

尝试：

```
ssh user@remote find /some/folder/with/backups -mtime +7 -type f -print 
```

当它工作时，替换`-print`为`-delete`（或者`-exec rm "{}" \;`如果`-delete`不支持）。

# jquery - 实时搜索仅适用于分页器的第一页

> ID：14724694
> 
> 赞同：1
> 
> 时间：2013-02-06T08:36:03.157
> 
> 标签：jquery, paginator, livesearch

我已经设置了 jQuery 实时搜索，它运行良好：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#peopleSearch").keyup(function() {
            if ($(this).val()) {
                var search = $(this).val().toLowerCase();
                $(".user").hide();
                $("[user*='"+search+"']").show();
            }
            else {
                $(".user").show();
            }
        });
    });
</script> 
```

但是，我有分页器，我的搜索只在当前页面上有效。我怎样才能让它在所有页面上工作？

```
<div class="paginator">
    {include file="ComEurolab/Views/paginator.tpl"}
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:39:53.520

在您的搜索结果容器中使用 ajax，以便您的 JS 变量保持其状态。

# java - 如何将 SlidingDrawer 作为系统覆盖？

> ID：14724698
> 
> 赞同：1
> 
> 时间：2013-02-06T08:36:11.177
> 
> 标签：java, android, service, overlay, slidingdrawer

如何将 SlidingDrawer 作为系统覆盖（或始终显示在顶部）？我将使用服务来显示它，但我不知道该怎么做（使用服务将 SlidingDrawer 显示为系统覆盖） 我该怎么做才能像[这张图片](https://lh4.googleusercontent.com/-kgurQ50Rf4g/URIVpRSUP1I/AAAAAAAADVc/Ja7yXEKzf4k/s787/example.png)一样？任何教程或示例资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:19:55.350

您可以使用 SlidingMenu 库，因为不推荐使用默认的 android 滑动抽屉。

[https://github.com/jfeinstein10/slidingmenu](https://github.com/jfeinstein10/slidingmenu)

# zend-framework - 如何使用 Zend 框架在亚马逊的 api 中搜索 EAN 代码？

> ID：14724700
> 
> 赞同：0
> 
> 时间：2013-02-06T08:36:15.303
> 
> 标签：zend-framework, amazon-web-services, barcode

我有这个：

```
 $barCode = '5055060927427';
  $amazon = new Zend_Service_Amazon($this->AMAZON_API_KEY, 'UK', $this->AMAZON_API_SECRET);
  $amazon = null;

  $amazonRes   = $amazon->itemLookup($barCode,
    array(
      'SearchIndex'   => 'All',
      'AssociateTag'  => 'NON ASSOCIATE',
      'IdType'        => 'EAN',
      'ResponseGroup' => 'Large,ItemAttributes,Images',

    )
  ); 
```

但这只是给了我一个错误：

致命错误：带有消息“5055060927427”的未捕获异常“Zend_Service_Exception”不是 ItemId 的有效值。请更改此值，然后重试您的请求。(AWS.InvalidParameterValue)' 在 C:\wamp\www\easionline\src\Zend\Service\Amazon.php 第 319 行

我试图找到的游戏是：[http ://www.amazon.com/Asuras-Wrath-Playstation-3/dp/B003O6HLOK/ref=sr_1_1?ie=UTF8&qid=1360139714&sr=8-1&keywords=azuras+wrath](https://rads.stackoverflow.com/amzn/click/com/B003O6HLOK)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T09:59:46.017

这是来自 API 的正常响应，当 EAN 在该语言环境中不存在时。

当您使用确实存在的 ean 时，您不会收到此错误。

# c# - 如何判断一个对象是否是实体模型的一部分？

> ID：14724701
> 
> 赞同：3
> 
> 时间：2013-02-06T08:36:28.680
> 
> 标签：c#, entity-framework

本质上，我试图找到一种不那么糟糕的方法来做到这一点：

```
foreach (var k in someList)
{
    try
    {
        var temp = Database.Set(k.GetType()).Local;
        newList.Add(k);
    }
    catch (InvalidOperationException)
    {

    }
} 
```

`Database`是我`DbContext`模型的实例。

`someList`是对象的集合，有些是实体模型的一部分，有些不是。我想创建一个新列表 ( `newList`)，其中仅包含属于模型的对象。中的对象`someList`可以是任何类型（在我的情况下，其中之一`List<string>`显然与我的底层数据库无关）。

当来自的对象不是实体模型的一部分`InvalidOperationException`时会引发。`someList`通过这样做，我得到了我想要的东西，但是这似乎是一个 hack。我正在寻找更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:57:41.950

这似乎不是一个直接的答案，但`DBContext`您可以只使用标记接口，而不是尝试使用实例进行检查。然后您可以直接检查，而无需使用`DBContext`. 例如，

```
public interface IEntity
{
}

public clas SomeEntity : IEntity
{
    ... some properties
} 
```

另外，作为旁注，我想知道您如何能够将不同类型的实例存储在同一个列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T15:38:11.257

我正在添加这个答案，以便任何发现这个问题的人都可以看到我是如何解决它的。话虽如此，真正的解决方案是避免在同一集合中包含实体和非实体（如对原始问题的评论中所述）。

要过滤集合`someList`，您需要知道哪些类型是实体，哪些不是。为此，我从我的`DbContext`.

```
types = (from t in typeof (Entities).GetProperties()
         where t.PropertyType.IsGenericType
         where
             t.PropertyType.GetGenericTypeDefinition() ==
             typeof (DbSet<object>).GetGenericTypeDefinition()
         select t.PropertyType.GetGenericArguments()[0]).Distinct(); 
```

`Entities`是代表我的数据库模型的类（它继承自`DbContext`）。

这通过定位 中的所有`DbSet<T>`属性`Entities`，然后构造所有`T`类型的集合来工作。这些类型中的每一个都代表一个实体类型。

要过滤`someList`，我只需检查每个成员的类型是否包含在集合中`types`。

# asp.net - 从后面的代码（asp.net）下载后打开一个word文件

> ID：14724707
> 
> 赞同：0
> 
> 时间：2013-02-06T08:36:48.313
> 
> 标签：asp.net

我已经编写了代码以在后面的代码中下载 Word 文档后打开它。文档可以正常打开，但没有以 Word 格式保存。当我要打开它时，它要求选择打开文件的格式。

代码如下：

```
string FullFilePath = "D:\\ASP\\ASP.doc";
FileInfo file = new FileInfo(FullFilePath);

if (file.Exists)
{
    Response.ContentType = "application/vnd.ms-word";
    Response.AddHeader("Content-Disposition", "inline; filename=\"" + txtDate.Text  + "\"");
    Response.AddHeader("Content-Length", file.Length.ToString());
    Response.TransmitFile(file.FullName);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:47:54.580

将您的内容类型设置为`application/msword`.

参考：[Microsoft Office MIME 类型](http://filext.com/faq/office_mime_types.php)

发送文件名时未指定扩展名。
如果您的文件在没有扩展名的情况下保存，您将收到提示，要求您使用应用程序打开它。

此外，`"Content-Disposition", "Attachment"`如果您想告诉浏览器保存文件，请使用。`inline`将使浏览器尝试直接在 Word 中打开文件。

```
string FullFilePath =//path of file //"D:\\ASP\\ASP.doc";
FileInfo file = new FileInfo(FullFilePath);
if (file.Exists)
{
  Response.ContentType = "application/msword";
  Response.AddHeader("Content-Disposition", "Attachment; filename=\"" + txtDate.Text  + ".doc\"");
  Response.AddHeader("Content-Length", file.Length.ToString());
  Response.TransmitFile(file.FullName);
} 
```

# javafx-2 - FXCollections.observableArrayList 有什么用？

> ID：14724708
> 
> 赞同：1
> 
> 时间：2013-02-06T08:37:03.657
> 
> 标签：javafx-2

在 Javafx 2.X 中使用了选择框

```
ChoiceBox cb = new ChoiceBox();
cb.setItems(FXCollections.observableArrayList(
   "New Document", "Open ", 
    new Separator(), "Save", "Save as")
); 
```

在用于 FXCollection.observableArraylist 的表视图中。

为什么用于 observableArraylist？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T09:15:22.570

它返回一个 ArrayList 可以观察到变化（添加/删除新项目）。

# spring - 休眠以在不同的事务中初始化对象

> ID：14724713
> 
> 赞同：2
> 
> 时间：2013-02-06T08:37:18.917
> 
> 标签：spring, hibernate, jpa, jpa-2.0, spring-transactions

我得到了著名的 LazyInitializationException。

我有一个对象 User 存储在会话中。该对象包含另一个延迟初始化的对象 Market。当我在会话中加载用户时，我不加载 Market，因为它太重了，我不需要每次都需要它。

当我想加载市场时，我处于不同的事务中，我不想从数据库中重新加载用户。如何检索 Market 对象？知道 User.market 包含 Hibernate 代理和市场的 id，并且我不想使用反射来破解 Hibernate。

如果我可以加载市场而不将其加载到用户中，那就更好了。由于用户在会话中，我不想在会话中放很多东西。

JPA 兼容的解决方案会更好。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:43:21.123

如果急切模式获取不可接受，并且如果交易无法维持到市场检索，则可以实现特定的 dao 方法来专门从用户那里检索市场

```
public List<Market> retrieveMarketFromUser (final User user) {
  Query query = session.createQuery("SELECT m FROM User AS u INNER JOIN u.market as m WHERE u.userid = :uid");
  query.setParameter("uid", user.getId());
  List<Market> list = query.list();
  return list;
} 
```

或短版

```
 Query query = session.createQuery("SELECT u.market FROM User AS u WHERE u.userid = :uid"); 
```

这可能不是您期望的 JPA 解决方案，只是一种解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T05:48:48.900

您需要做的是注释访问器而不是字段。这将允许您在最初加载用户时避免加载市场对象，但您可以从 Hibernate 代理对象访问市场的 id，而不会触发延迟加载或获得 LazyInitializationException。然后稍后当您想要加载市场本身时，您会根据其 id 进行正常的实体检索。[您可以在此处](http://www.catalysts.cc/wissenswertes/ejb-annotations-hibernate-lazy-loading/?lang=en)阅读有关其工作原理的详细说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T10:57:34.137

为什么明显的解决方案不好？就像建议的一个[ring0](https://stackoverflow.com/users/338904/ring0)一样，或者如果您已经在对象中拥有 id，则只需使用`findById`or方法。`find``User`

```
//if using a session factory
session.findById(Market.class, marketId); 

//if using the EntityManager
em.find(Market.class, marketId); 
```

根据`current_session_context_class`配置方式（我有它`hibernate.cfg.xml`），您可能与每个新事务都有一个新会话。如果是这种情况，您无需担心在其中放太多东西。[您可以在此处](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/architecture.html#architecture-current-session)找到有关上下文会话的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T10:36:08.220

如果关系是双向的，那么您可以使用带有子句的查询独立加载市场`where market.user.id = ?`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T10:46:31.747

既然您提到了新事务，那么您可能会使用属于线程的新休眠会话，

在与休眠会话直接交互的情况下使用此

```
 obj = session.merge(obj); 
```

如果您使用 JPA2 Api

```
 obj=   entityManager.merge(obj); 
```

如果有帮助，请评价答案。干杯

# visual-c++ - 将定义的符号与预编译的标头相乘？

> ID：14724714
> 
> 赞同：3
> 
> 时间：2013-02-06T08:37:31.990
> 
> 标签：visual-c++, compiler-errors, precompiled-headers, cryengine

好吧，我这几天一直在为此苦苦挣扎。我正在从头开始为 CryENGINE 编写自定义游戏 DLL，我什至无法使用一个简单的类 (Game.cpp) 和预编译的头文件 (StdAfx.h) 来编译解决方案。

**Game.cpp 和 StdAfx.cpp 都可以自行完美编译，但编译解决方案会引发大量多重定义错误。**该类很简单，因为定义只是占位符。

**游戏.h**

```
#if !defined __GAME__H__
#define __GAME__H__

#pragma once

class CGame : public IGame
{
public:
CGame();
VIRTUAL ~CGame();

//IMPLEMENT: IGame Interface, all methods declared.
};
#endif 
```

**游戏.cpp**

```
 #include "StdAfx.h" //PreComp header
 #include "Game.h"

 //Define all methods, each one has a simple definition. 
```

**标准Afx.h**

```
#if !defined __STDAFX__H__
#define __STDAFX__H__

#pragma once

//Various CryENGINE includes

#endif 
```

**输出**

```
error LNK2005: "struct SSystemGlobalEnvironment * gEnv" (?  gEnv@@3PEAUSSystemGlobalEnvironment@@EA) already defined in StdAfx.obj
error LNK2005: "public: static long volatile _CryMemoryManagerPoolHelper::allocatedMemory" (?allocatedMemory@_CryMemoryManagerPoolHelper@@2JC) already defined in StdAfx.obj
error LNK2005: "public: static long volatile _CryMemoryManagerPoolHelper::freedMemory" (?freedMemory@_CryMemoryManagerPoolHelper@@2JC) already defined in StdAfx.obj
error LNK2005: "public: static long volatile _CryMemoryManagerPoolHelper::requestedMemory" (?requestedMemory@_CryMemoryManagerPoolHelper@@2JC) already defined in StdAfx.obj
error LNK2005: "public: static int volatile _CryMemoryManagerPoolHelper::numAllocations" (?numAllocations@_CryMemoryManagerPoolHelper@@2HC) already defined in StdAfx.obj

The list goes on... 
```

真正让我失望的是，每一个都可以单独编译，所以语法和引用都很好。将解决方案作为一个整体编译时，什么可能导致多重定义的错误？

对于这个令人沮丧的问题，我非常感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T08:56:19.187

我不确定错误是由预编译头引起的，但这里是设置预编译头的正确方法：

1.  右键单击解决方案资源管理器中的项目名称，选择**Properties**，转到**Configuration Properties | C/C++ | Precompiled Headers**并将**Precompiled Header**设置设置为**Use (/Yu)**。将其下方的其他两个设置保留为默认值。

2.  右键单击 StdAfx.cpp，转到相同的设置并将其设置为**Create (/Yc)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T14:15:00.597

嗯，我想通了。有一个聪明的复杂包含不属于预编译的头文件：

```
#include <Platform_Impl.h> 
```

这导致了我所有的问题，通过将其移至 Game.cpp，一切都很好。

# c# - 不止一个，独立的dispatchertimer？

> ID：14724716
> 
> 赞同：1
> 
> 时间：2013-02-06T08:37:34.167
> 
> 标签：c#, windows-phone-8, dispatchertimer

我想创建几个计时器，倒计时 x 时间，独立工作，更新 textBlock 中的时间，并在完成后做一些事情。

所以我写道：

```
private DispatcherTimer d1, blueTimer;

private void but1_Click(object sender, RoutedEventArgs e)
{
    if (redTimer == null)
    {
        d1 = new System.Windows.Threading.DispatcherTimer();
        d1.Tick += new EventHandler(d1_Tick);
        d1.Interval = new TimeSpan(0, 0, 1);
        d1.Start();
    }
}

private void but2_Click(object sender, RoutedEventArgs e)
{
    if (d2 == null)
    {
        d2 = new System.Windows.Threading.DispatcherTimer();
        d2.Tick += new EventHandler(d2_Tick);
        d2.Interval = new TimeSpan(0, 0, 1);
        d2.Start();
    }
}

private void d1_Tick(object sender, EventArgs e)
{
    int time = string2time(t1.Text);
    if (time > 0)
    {
        t1.Text = time2string(--time);
    }
    else
    {
        d1.Stop();
    }
}

private void d2_Tick(object sender, EventArgs e)
{
    int time = string2time(t2.Text);
    if (time > 0)
    {
        t2.Text = time2string(--time);
    }
    else
    {
        d2.Stop();
    }
} 
```

时间例如是15秒。当我点击but1时，时间正在倒计时，当t1为10秒时，我点击but2，t2也是10秒，倒计时时间相同。

为什么会这样？如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:46:15.250

Sry 误读了代码。会再看一遍。

你能发布“string2time”和“time2string”的代码吗？

还要检查您的实际代码是否与您发布的代码相同：

```
private DispatcherTimer d1, blueTimer;    // <-- d1 and blueTimer? blueTimer is never 
                                          //mentioned. However a "redTimer" object appears in your code

private void but1_Click(object sender, RoutedEventArgs e)
{
    if (redTimer == null)   // <-- shouldn´t this be "(d1 == null)"?
    {
        d1 = new System.Windows.Threading.DispatcherTimer();
        d1.Tick += new EventHandler(d1_Tick);
        d1.Interval = new TimeSpan(0, 0, 1);
        d1.Start();
    }
}

private void but2_Click(object sender, RoutedEventArgs e)
{
    if (d2 == null)
    {
        d2 = new System.Windows.Threading.DispatcherTimer();
        d2.Tick += new EventHandler(d2_Tick);
        d2.Interval = new TimeSpan(0, 0, 1);
        d2.Start();
    }
} 
```

我不确定问题是什么。据我所知，您有 2 个输入时间的文本框。在您的示例中，第一个读取“15”，第二个读取“10”。现在单击第一个按钮，“d1”开始倒计时第一个框中的时间。当它达到“10”时，与另一个一样，单击第二个按钮。以“d2”开头，然后以相同的间隔倒计时第二个框中的文本。如果这是正在发生的事情，那么代码正在做它应该做的事情吗？或者你想达到什么效果。没有把握。

请澄清问题。

编辑：

你可以简化这个：

```
private string time2string(int time) 
{
    string stime = "";
    int m, s = 0;

    m = time / 60;
    //s = time - m * 60;
    s = time % 60;  // this is a modulo, it will divide the number by 60 and provide the 
                    // rest. Learn to use it, it may save you a lot of work sometimes.

    //stime = m < 10 ? "0" + m.ToString() : m.ToString();
    //stime += ":" + (s < 10 ? "0" + s.ToString() : s.ToString());
    stime = string.Format("{0:D2}:{1:D2}", m, s};    // does the same as the two previous lines
    return stime;
} 
```

除此之外，我也看不出您的代码哪里出错了。您可以检查一个或两个文本框是否具有“xyz_Changed”事件，该事件的处理方式使两者都显示相同的值。也许您使用它是为了便于让两者显示相同的起始值或其他东西。

我唯一可以建议的另一件事是您可以发布到目前为止的完整代码。

# ios - iOS 视图控制器生命周期

> ID：14724717
> 
> 赞同：2
> 
> 时间：2013-02-06T08:37:37.373
> 
> 标签：ios, grand-central-dispatch, lifecycle, viewcontroller

我在基于地图的应用程序中遇到了一些奇怪的行为。我正在获取一些数据以使用一些路线服务显示路线。它使用 GCD 在后台线程中运行。获取数据后，我返回主线程以更新 UI：

```
 dispatch_async(dispatch_get_main_queue(), ^{
            [self.mapProvider addToExistingPolyLinePoints:coordinates withTitle:@"line" removeOldOne:NO useCurrentIndex:NO];

            [_distanceLabel setText:[NSString stringWithFormat:@"%.2lf km",[self.draggingLogic getOverallDistance]]];
            [self.progress setHidden:YES];
        }); 
```

这一切都在我的 RouteViewController 中运行良好。但是，如果我使用后退按钮返回 RootViewController 并重新进入 RouteViewController 并重新获取整个内容，则不会对 UI 进行评估。它显示的行为与未在主线程中完成 UI 更新相同。数据到达正确。

我想知道这是否是关于 iOS 的视图控制器生命周期的某种问题，我没有完全理解。当我按下返回按钮时会发生什么。显然 ViewController 没有被破坏，但如果我重新输入它会创建一个新的。是否可以从 RootViewController 确定目标视图控制器的实例是否存在并使用它执行 Segue？

无论如何，我不确定这是否与我的问题有关。

感谢您的任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:39:43.163

如果我理解你写的正确的话，你每次“进入”时都会创建一个新的控制器，但调度块总是引用你创建的第一个，所以新的会显示，但旧的会收到通知......有很多方法可以避免这种情况，取决于您的实现，但一个简单的解决方案可能是在根视图控制器的属性中保留对地图视图控制器的（强）引用：如果它是 nil（第一次），则创建地图控制器并做所有需要的东西，否则你会简单地展示它，而不需要创建部分。

示例代码，在 .h 中：

```
@property (strong,nonatomic) MyMapController* mapController; 
```

以 .m 为单位：

```
if (!self.mapController)
{
    // create the controller and the update handler...
    self.mapController = ... //created object
}

// show it and everything... 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T10:19:31.960

```
You are needed to do the stuff given here....   
you create a new controller every time you "enter" but the dispatching block always refer to the first one you create, so the new one is displayed but the old one get the notifications... 

Ex-code, in Interface file :

@property (strong,nonatomic) MyMapProvider* mapProvider;

And in implementation file :

if (!self.mapProvider)
{
    self.mapProvider = ... //create object
}

// do your stuff.. 
```

# c# - asp mvc razor 存储 lambda 表达式以列出并重用它

> ID：14724724
> 
> 赞同：4
> 
> 时间：2013-02-06T08:37:54.857
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4, lambda

我正在使用 asp.mvc 4。假设我有一个名为 Person 的模型，其中包含字段

```
public class Person
{
    public int ID { get; set; }
    public string FirstName { get; set; }
    public string SecondName { get; set; }
    public DateTime DateOfBirth { get; set; }
    public DateTime DateOfWorkstart { get; set; }
    public int NumberOfChildren { get; set; }
    public int DepartmentID { get; set; }
    public virtual Department Department { get; set; }
}

public class Department
{
    public int ID { get; set; }
    public int NameOfDepartment { get; set; }
} 
```

在我自动生成的 razor-edit-view 字段中显示如下（为了清楚起见，我只在这篇文章中包含了重要的行）

```
@Html.DisplayFor(modelItem => item.FirstName)
@Html.DisplayFor(modelItem => item.SecondName) 
```

现在我想将 linq-lambda 表达式存储在一个列表中以供以后使用，我不知道该怎么做，我需要这样的东西：

```
@{
    string itemsToShow = "namepart"; // this could also be "otherpart"
    List <Expression<>> list = new List();
    if (itemsToShow.equals("namepart")
    {
        list.add(modelItem => item.FirstName);
        list.add(modelItem => item.SecondName);
    }
    else
    {
        list.add(modelItem => item.DateOfBirth);
        list.add(modelItem => item.DateOfWorkStart);
        list.add(modelItem => item.NumberOfChildren);
    }
} 
```

最后我想像这样使用生成的列表

```
@foreach (var lambda in list)
{
    @Html.DisplayFor(lambda)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:07:25.750

我的大脑有一点点进步。感谢您的建议。正如@darin-dimitrov 所说，秘诀是存储一个表达式树。我更新了我的第一篇文章并添加了一个相关表格。此示例仅在模型已从数据库表中获取“1 单行”时才有效，例如在编辑视图中；

```
// first a small helper, which creates the member and checks nullable fields
public static Expression getExpressionPart(ParameterExpression param,
  String s1, String s2)
{
    Expression member = null;
    if (s2 == null)
    {
        member = Expression.Property(param, s1);
    }
    else
    {
        // the second string is to deal with foreign keys/related data
        member = Expression.PropertyOrField(
          Expression.PropertyOrField(param, s1), s2
        );
    }

    Type typeIfNullable = Nullable.GetUnderlyingType(member.Type);
    if (typeIfNullable != null)
    {
        member = Expression.Call(member, "GetValueOrDefault", Type.EmptyTypes);
    }
} 
```

现在创建列表和表达式

```
List<Expression<Func<Person, object>>> list =
  new List<Expression<Func<Person, object>>>();
ParameterExpression param = Expression.Parameter(typeof(Person), "p");

// maps to expression p => p.FirstName
Expression member = getExpressionPart(param, "Firstname", null);
list.Add(Expression.Lambda<Func<Person, object>>(member, param));

// maps to expression p => p.Department.NameOfDepartment
member = getExpressionPart(param, "Department", "NameOfDepartment");
list.Add(Expression.Lambda<Func<Person, object>>(member, param)); 
```

现在它可以工作了！

```
@foreach (var lambda in list)
{
    @Html.DisplayNameFor(lambda)
    @Html.DisplayFor(lambda)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:33:15.410

我会为此编写一个自定义助手：

```
public static class HtmlExtensions
{
    public static IHtmlString MyHelper(this HtmlHelper<MyViewModel> html, string itemsToShow)
    {
        var sb = new StringBuilder();
        if (itemsToShow == "namepart")
        {
            sb.Append(html.DisplayFor(x => x.FirstName));
            sb.Append(html.DisplayFor(x => x.SecondName));
        }
        else
        {
            sb.Append(html.DisplayFor(x => x.DateOfBirth));
            sb.Append(html.DisplayFor(x => x.DateOfWorkStart));
            sb.Append(html.DisplayFor(x => x.NumberOfChildren));
        }
        return new HtmlString(sb.ToString());
    }
} 
```

然后在视图中简单地：

```
@Html.MyHelper("namepart") 
```

如果你想渲染另一部分：

```
@Html.MyHelper("otherpart") 
```

作为替代方案，只需将此内容放入 2 个不同的局部视图中，然后：

```
@if (itemsToShow == "namepart")
{
    @Html.Partial("_NamePart", Model)
}
else
{
    @Html.Partial("_OtherPart", Model)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T09:13:52.110

您是否尝试过像这样存储 lambda：

```
Func<Person,bool> personExpression = (u => u.FirstName == firstname);

@Html.DisplayFor(personExpression) 
```

对于 2 种输入类型，您的代码将如下所示：

```
Func<Person,Ticket,bool> personExpression =
        ((u,t) => u.FirstName == firstname && u.SecondName == t.SecondName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T20:05:46.837

要在剃刀视图中循环浏览模型属性，您应该`ViewData.ModelMetadata.Properties`在[此答案](https://stackoverflow.com/a/9916988/5301903)中使用。例如：

```
@* Loop through properties. *@
@foreach (var property in ViewData.ModelMetadata.Properties)
{
    @Html.Display(property.PropertyName)
} 
```

# c# - SignalR 仅为一个用户实例创建实时数据库通知

> ID：14724728
> 
> 赞同：1
> 
> 时间：2013-02-06T08:38:16.000
> 
> 标签：c#, signalr, sqldependency

我正在尝试使用 SignalR 创建像 facebook 这样的实时通知我使用 c# 作为服务器端语言 1-我在 github 中阅读了 wiki，我知道我只能通知连接的用户我的主要目标是使用带有 sql 的 signalR 从数据库中获取数据并通知连接的用户 2-我知道我应该使用 sql 依赖项类，但我在互联网上看到的示例是关于 MVC 的，我的项目不是 MVC，它是纯网站

谁能帮我举个例子来说明如何做到这一点？

关于 signalR 的参考：

```
https://github.com/SignalR/SignalR/wiki/Hubs 
```

感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:53:25.973

您可以使用数据库来持久化数据，但使用 SignalR，无需从数据库中轮询数据即可提供“推送”通知。

在服务器端，每当客户端说“发送消息”时，只需使用 SignalR 服务器通知当前连接的任何需要通知的人

如果您想通知离线用户，请将该数据保存到数据库中，然后在离线用户首次登录时提取该数据并相应地通知他们。

JabbR 是利用 SignalR 推送通知（聊天消息）并仍然保持数据的一个很好的示例：**[https ://github.com/davidfowl/JabbR](https://github.com/davidfowl/JabbR)**

# javascript - 从网格中获取一行 ExtJs 4

> ID：14724732
> 
> 赞同：3
> 
> 时间：2013-02-06T08:38:27.590
> 
> 标签：javascript, extjs, datagrid, extjs4

我认为回答这个问题很简单：

我的自定义商店有简单的网格：

```
//other code
{
    xtype: 'grid',
    store: 'SecondStore',
    itemId: 'mainTabPanel2',
    columns: [
        //this is not from the store
        {
            header: 'Not Form Store',
            id: 'keyId2',
        },
        //from the store
        {
            header: 'From Store',
            dataIndex: 'label',
            id: 'keyId',
        }
    ]
} 
```

商店仅使用 id: keyId 填充第二列。事实上它有：

```
fields: [{ name: 'label' }] 
```

这很好用。

我想从函数中获取该网格的第 n°1 行。

```
handler: function() {
    var grid = Ext.ComponentQuery.query('grid[itemId="mainTabPanel2"]')[0];
    //var row= get row(1) <- i don't know how to get the complete row
} 
```

我正在使用 ExtJs 4，所以我无法使用命令获取它`grid.getView().getRow(1);`

我无法从商店中获取它，因为我还想获取未存储在商店中的 id:keyId2 列的内容，所以我不能执行以下操作：

```
grid.getStore().getAt(1); 
```

有人知道如何在 ExtJs 4 中获得完整的行吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-31T11:25:12.547

你可以在这个 ExtJS 4.x 中使用`getNode`：`grid.getView().getNode(index)`

[`getNode`](http://docs.sencha.com/extjs/4.2.1/#!/api/Ext.view.AbstractView-method-getNode)可以采用 HTML ID（不是很有用）、索引或商店记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:54:03.877

我认为你需要这样的东西：

```
Ext.onReady(function () {
    var store = Ext.create('Ext.data.Store', {
        storeId: 'simpsonsStore',
        fields: ['name', 'email', 'phone'],
        data: {
            'items': [{
                'name': 'Lisa',
                "email": "lisa@simpsons.com",
                "phone": "555-111-1224"
            }, {
                'name': 'Bart',
                "email": "bart@simpsons.com",
                "phone": "555-222-1234"
            }, {
                'name': 'Homer',
                "email": "home@simpsons.com",
                "phone": "555-222-1244"
            }, {
                'name': 'Marge',
                "email": "marge@simpsons.com",
                "phone": "555-222-1254"
            }]
        },
        proxy: {
            type: 'memory',
            reader: {
                type: 'json',
                root: 'items'
            }
        }
    });

    var grid = Ext.create('Ext.grid.Panel', {
        title: 'Simpsons',
        store: Ext.data.StoreManager.lookup('simpsonsStore'),
        columns: [{
            text: 'Name',
            dataIndex: 'name'
        }, {
            text: 'Email',
            dataIndex: 'email',
            flex: 1
        }, {
            text: 'Phone',
            dataIndex: 'phone'
        }],
        height: 200,
        width: 400,
        renderTo: Ext.getBody()
    });

    alert(grid.getStore().getAt(1).data.name);

}); 
```

jsFiddle：http: [//jsfiddle.net/RftWF/](http://jsfiddle.net/RftWF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T09:47:33.167

我已经解决了访问 DOM：

```
 /* Get Dom of the first grid */
   var DOMgrid = Ext.select('#'+gridview.getId());
   var gridChild = DOMgrid.elements[0].children[1].children[0].children; 
```

然后你应该得到你感兴趣的“孩子”来简单地遵循 DOM 结构。

您还可以获得应用命令的单例享元元素`Ext.fly()`并使用命令更新内容`update()`：

```
 Ext.fly(/*DOM object here*/).update(/*raw content here*/) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T17:53:29.013

获取 FireBug 插件并在“处理程序”处监视网格。如果您看到来自 keyId2 列的数据，那么您也可以在萤火虫中看到方式。即网格对象->存储对象->数据数组。

您能告诉我们您是如何在网格的 keyId2 列中添加数据的吗？

# google-chrome-extension - 任何方式来启动扩展？chrome.management.launchApp 不允许

> ID：14724742
> 
> 赞同：1
> 
> 时间：2013-02-06T08:39:14.160
> 
> 标签：google-chrome-extension

我想从我的扩展运行另一个扩展；chrome 有一个非常好的管理 api 和一个方法，但是 chrome.management.launchApp 不允许这样做，它会抛出“不是应用程序”错误。是的，它不是应用程序，而是扩展程序。

您可以启用/禁用/卸载！扩展但无法启动它。还有其他方法吗？

# c# - 如何使用c#获取包含特定文件的目录列表

> ID：14724745
> 
> 赞同：2
> 
> 时间：2013-02-06T08:39:19.323
> 
> 标签：c#, file, file-io

我希望获取其中包含特定文件的所有文件夹/目录的列表。如何使用 C# 代码执行此操作。

例如：考虑我有 20 个文件夹，其中 7 个有一个名为“abc.txt”的文件。我想知道所有包含“abc.txt”文件的文件夹。

我知道我们可以通过查看路径中的所有文件夹并检查 File.Exists(filename); 来做到这一点。但我想知道是否有任何其他方法可以做同样的事情，而不是循环遍历所有文件夹（在有很多文件夹的情况下，这可能会耗费我很少的时间）。

谢谢
-纳扬

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T08:43:40.460

我会使用带有搜索模式的 Directory 类的[EnumerateFiles方法和 SearchOption 来包含 AllDirectories。](http://msdn.microsoft.com/en-us/library/dd383571.aspx)这将返回与模式匹配的所有文件（包括目录的完整文件名）。

使用[Path](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)类，您可以获得文件的目录。

```
string rootDirectory = //your root directory;
var foundFiles = Directory.EnumerateFiles(rootDirectory , "abc.txt", SearchOption.AllDirectories);

foreach (var file in foundFiles){
  Console.WriteLine(System.IO.Path.GetDirectoryName(file));
} 
```

EnumerateFiles 仅从 .NET Framework 4 开始可用。如果您使用的是旧版本的 .NET Framework，则可以使用Directory 类的[GetFiles](http://msdn.microsoft.com/en-us/library/ms143316.aspx)。

更新（见 PLB 的评论）：

如果拒绝访问目录，上面的代码将失败。在这种情况下，您将需要一个接一个地搜索每个目录以处理异常。

```
public static void SearchFilesRecursivAndPrintOut(string root, string pattern)
{
    //Console.WriteLine(root);
    try
    {
        var childDireactory = Directory.EnumerateDirectories(root);
        var files = Directory.EnumerateFiles(root, pattern);

        foreach (var file in files)
        {
            Console.WriteLine(System.IO.Path.GetDirectoryName(file));
        }

        foreach (var dir in childDireactory)
        {
            SearchRecursiv(dir, pattern);
        }
    }
    catch (Exception exception)
    {
        Console.WriteLine(exception);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T14:59:59.037

下面显示了如何按特定条件缩小搜索范围（即仅包括名称中包含“Microsoft”、“IBM”或“nHibernate”的 DLL）。

```
var filez = Directory.EnumerateFiles(@"c:\MLBWRT", "*.dll", SearchOption.AllDirectories)
        .Where(
            s => s.ToLower().Contains("microsoft")
            && s.ToLower().Contains("ibm")
            && s.ToLower().Contains("nhibernate"));
string[] allFiles = filez.ToArray<string>();
for (int i = 0; i < allFiles.Length; i++) {
    FileInfo fInfo = new FileInfo(allFiles[i]);
    Console.WriteLine(fInfo.Name);
} 
```

# android - Achart 引擎条形图 setMarginColor - 如何将图像添加到边距？

> ID：14724754
> 
> 赞同：2
> 
> 时间：2013-02-06T08:39:45.570
> 
> 标签：android, bar-chart, achartengine

我有一个生成的图表如下![在此处输入图像描述](../Images/cdbef3086c503b980e7dcb2c86e3fe6a.png)

我在这里有几个问题：

1）如何删除黑色边框 2）如何向条形添加渐变。3）如何去除图例下方的空格。

这是我的代码：

对于背景问题，这是我的代码：添加可绘制对象后，我遇到了这个问题，并且我想向其中添加图像而不是颜色，我尝试过使用白色它不显示黑色边框？这是为什么？

```
XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();
        multiRenderer.setInScroll(true);
        multiRenderer.setShowAxes(false);
        multiRenderer.setApplyBackgroundColor(true);
        multiRenderer.setBackgroundColor(Color.TRANSPARENT);
        multiRenderer.setMarginsColor(R.drawable.background); 
```

对于渐变我试过这样但没有奏效：

```
samplseries.setGradientEnabled(true);
samplseries.setGradientStart(Color.rgb(120,188,219));
samplseries.setGradientStop(Color.rgb(74, 155, 192)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T09:15:57.227

1.  我建议您避免使用透明颜色作为背景。
2.  您为此尝试了代码，但它甚至没有编译。`setGradientStart`and`setGradientStop`方法需要两个参数：开始/停止颜色的值和颜色。

3.  `renderer.setFitLegend(true);`

# actionscript-3 - 设置弹出窗口特定位置？

> ID：14724759
> 
> 赞同：0
> 
> 时间：2013-02-06T08:40:13.043
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

实际上在我的应用程序登录页面中是弹出窗口..

```
private var login:Login;

        protected function loginPopUpHandler(event:MouseEvent):void
        {
            login = new Login();
            PopUpManager.addPopUp(login,this,true);
            PopUpManager.centerPopUp(login);
        } 
```

听到弹出中心..但我想弹出按钮下方..

即..当我们点击登录按钮弹出将在按钮下方打开..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:51:11.547

尝试：

```
var sym:Login = PopUpManager.createPopUp( this, Login) as Login;
    sym.x     = button.x; 
    sym.y     = button.y+button.height; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:04:05.527

首先，这取决于是什么`this`。例如，如果`this`是您的登录按钮，您可以轻松地这样做：

```
protected function loginPopUpHandler(event:MouseEvent):void
            {
                login = new Login();
                PopUpManager.addPopUp(login,this,true);
                PopUpManager.centerPopUp(login);
                login.x += loginButton.width / 2; // or any other number
                login.y += 123; //whatever number. try tweaking it
            } 
```

如果您想使用显示对象，`FlexGlobals.topLevelApplication as DisplayObject`那么您可能希望从中获取登录按钮`event.target`并使用其坐标进行操作。只是尝试进行实验。此外，您可能在使用坐标时
必须使用属性。`localToGlobal`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-14T06:18:40.057

为我工作：

```
protected function loginPopUpHandler(event:MouseEvent):void
            {
                login = new Login();
                login.x = 10; // x value relative to "this"
                login.y = 123; // y value relative to "this"
                PopUpManager.addPopUp(login,this,true);

             } 
```

# ios - iOS：在 XIB 中禁用 UI 镜像

> ID：14724767
> 
> 赞同：5
> 
> 时间：2013-02-06T08:40:42.313
> 
> 标签：ios, user-interface, ios6, xib, mirroring

如果用户使用从右到左的语言环境（希伯来语、阿拉伯语） ，`iOS 6`则有一个新的“功能”可以反映 xib 文件中的 UI 元素。（[http://developer.apple.com/library/ios/#documentation/miscellaneous/conceptual/iphoneostechoverview/iPhoneOSTechnologies/iPhoneOSTechnologies.html](http://developer.apple.com/library/ios/#documentation/miscellaneous/conceptual/iphoneostechoverview/iPhoneOSTechnologies/iPhoneOSTechnologies.html)）

它完全弄乱了我的界面。

有没有办法在不禁用自动布局的情况下禁用它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-22T23:05:58.530

接下来是@silyevsk 的解决方案 - 这是我修复 UI 镜像的一种快速方法：在文本编辑器（xcode/textedit/atom 等）中打开您的 xib 文件。使用替换工具，替换以下内容：

> firstAttribute="trailing" 与：firstAttribute="right"
> 
> secondAttribute="trailing" 与： secondAttribute="right"
> 
> firstAttribute="leading" with: firstAttribute="left"
> 
> secondAttribute="leading" with: secondAttribute="left"

为我工作并在 IB 上节省了许多苦苦挣扎的时间。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-21T06:06:42.823

水平约束在 Interface Builder 中有“方向”选项。默认情况下，它设置为“Leading to Trailing”，这会导致镜像。您可以将其设置为“从左到右”以禁用镜像。

请注意，通过编辑 storyboard/xib 文件更改所有约束会导致异常或混乱的布局，似乎 Interface Builder 在更改方向设置时会创建/更改一些额外的约束。

因此，我发现更改现有 xib/storyboard 的更快方法是选择所有设置了“Leading to Trailing”的约束，将它们全部更改为“Left to Right”，然后检查是否自动创建了一些新的水平约束- 他们的方向也应该改为“从左到右”。

# android - Android Horizo ntalScrollView 禁用触摸处理但允许子获取事件

> ID：14724769
> 
> 赞同：1
> 
> 时间：2013-02-06T08:40:45.393
> 
> 标签：android, android-layout, horizontalscrollview, android-scrollview

我有一个案例，其中包括`ScrollViews`以下 3 种堆叠方式：

`HorizontalScrollView`在顶部，它包含布局，其中`ScrollView`包含 ，其中包含包含另一个的布局`HorizontalScrollView`。

水平滚动视图

--------滚动视图

------------Horizo​​ntalScrollView

没有顶部`HorizontalScrollView`触摸事件的工作还可以，现在我需要禁用顶部`HorizontalScrollView`，但允许孩子正常获取事件，孩子`HorizontalScrollView`最终会滚动顶部`HorizontalScrollView`。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:55:44.127

我不太清楚你想做什么，但这应该可行，

```
OnTouchListener skipTouchListener = new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            //do nothing
            return false;
        }
};
yourView.setOnTouchListener(skipTouchListener); 
```

这种方式`yourView`不会处理触摸事件。

# excel - 使用 VB 无法正确复制公式

> ID：14724774
> 
> 赞同：0
> 
> 时间：2013-02-06T08:41:03.117
> 
> 标签：excel, excel-2007, vba

我希望有人能解释我在这里做错了什么，因为我想清楚地了解如何正确地做到这一点。当我将以下公式从一个选项卡上的单元格 (C10) 复制到另一个选项卡上的单元格 (AC3) 时，“$B10 部分“#ref！” - 但剩余部分看起来不错。请告诉我我需要做什么以及导致问题的原因 - 谢谢。

公式（一个选项卡上的单元格 C10）：

=IFERROR(SUMIFS($O:$O,$B:$B,$B10)/COUNTIFS($B:$B,$B10,$O:$O,"<>0"),"")

要复制的VB代码是：

```
Sheets(gcsCombinedSheetName).Cells(lngLastRow, columnletter) = getConfigPosition.Offset(0, 2).Formula 
```

谢谢，

夏兰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:29:49.163

感谢 t0 Peter L 和 Peter S 对此的支持。我用 .formulaR1C1 替换了 .formula 并使用相关引用编写了公式。然后我在上面放了一个错误检查器，我可以清楚地看到代码的哪些元素超出了范围。

再次感谢，

夏兰。

# jquery - 在动态选择中选择第一个选项不触发附加事件

> ID：14724782
> 
> 赞同：1
> 
> 时间：2013-02-06T08:41:17.923
> 
> 标签：jquery, option

我有一个使用 Jquery 选择选项的 HTML 页面，如下所示。

```
<select id="select-stage" class="spinner" data-inline="true" >
    <option value="-1">-Select Stage-</option>
</select> 
```

现在这个选择选项的内容是由 ajax 调用结果动态给出的。

这是它的样子

![在此处输入图像描述](../Images/88057a555b41ffa0e39116b3c3456155.png)

**我现在的问题：**

现在我的问题是当我第一次单击该`user`选项时，它没有被选中。但是，其他选项`HOD1`,`HOD2`等`HOD3`正在被正确选择。

此外，此问题仅在加载后第一次发生。如果我选择其他选项然后再次选择`user`它被选中。

它不是第一次被选中。我无法发现问题。

有人可以帮忙吗？

**设置选项的代码：**

```
var option=[];
$.each(myData, function(key, val) {
    sessionStorage.setItem(trim(val),trim(key));
    option.push('<option value="' + trim(key) + '">' + trim(val) + '</option>');
});
$('#select-stage').html(option.join(''));
}

//changing values on user selection//
$('#select-stage').live('change',function(){
    stageId = sessionStorage.getItem($(this).find('option:selected').text());
    selecttext = $(this).find('option:selected').text();
    noselection = true;
    listStageselectedIndexChanged(selecttext);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:43:29.757

这是因为您要替换`select`- 中已选择的第一项，因此永远不会触发更改事件。

您需要将其中的`-Select Stage-`选项保留为默认选项，并在其下方附加新选项。然后选择任何其他选项时，`change`将触发事件。

*更新*

要实现这一点，请修改您的代码以添加默认选项，如下所示：

```
var option=[];
$.each(myData, function(key, val) {
    sessionStorage.setItem(trim(val),trim(key));
    option.push('<option value="' + trim(key) + '">' + trim(val) + '</option>');
});
$('#select-stage')
    .html(option.join(''))
    .prepend('<option value="-1">-Select Stage-</option>')
    .val('-1'); 
```

# scala - Playframework 设置取决于环境

> ID：14724788
> 
> 赞同：10
> 
> 时间：2013-02-06T08:41:46.570
> 
> 标签：scala, playframework, configuration-files, playframework-2.1

我正在使用 playframework 2.1-RC2。首先，我已经看到[了所有](https://stackoverflow.com/questions/10391987/how-do-i-configure-multiple-databases-work-in-play-2-0) [类似的](https://stackoverflow.com/questions/9723224/how-to-manage-application-conf-in-several-environments-with-play-2-0) [问题](https://stackoverflow.com/questions/12992834/play-framework-2-development-configuration)，所以我遵循了每个环境分离 application.conf 文件的通用指令。所以我有 application.test.conf 并以这种方式运行测试：

```
play -Dconfig.file=./conf/application.test.conf "test" 
```

我尝试了不同的组合，比如

```
play -Dconfig.file=./conf/application.test.conf ~test 
```

或者

```
play -Dconfig.file=conf/application.test.conf ~test 
```

仍然没有运气，它只是没有被选中，而是默认一个（application.conf）。

从另一边，如果我这样做

```
play -Dconfig.file=./conf/application.dev.conf "run" 
```

然后应用程序选择正确的配置。

那么如何指定测试配置文件呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-06T09:12:24.187

我发现以跨平台兼容的方式指定它的最可靠方法是将其直接包含在 Build.scala 中：

```
val main = play.Project(appName, appVersion, appDependencies).settings(
    javaOptions in Test += "-Dconfig.file=conf/test.conf",
    ...
) 
```

奖励：配置一次就忘记了 ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T16:50:49.343

另一种方法是覆盖 GlobalSettings / Global 上名为**onLoadConfig**的方法，这使您能够控制您的应用程序将在何处查找您的配置。

所以在我们的一个应用程序中，我在下面为我的 conf/ 文件夹设置了这个设置。

```
 conf/application.conf --> configurations common for all environment
 conf/dev/application.conf --> configurations for development environment
 conf/test/application.conf --> configurations for testing environment
 conf/prod/application.conf --> configurations for production environment 
```

这样，您就可以实现继承，例如用于配置的设置，您可以使用通用和其他 3 个用于特定环境模式。

onLoadConfig 方法中的代码应该只加载主配置并为您的环境设置正确的回退配置，然后返回配置实例，如下所示：

```
**return new Configuration(baseConfig.withFallback(envConfig));** 
```

尝试查看此[博客文章以获取完整](http://bit.ly/1AiZvX5)的代码片段。

我希望这有帮助。

# php - 这是实时通知的正确选择吗？php + 棘轮 (websockets)

> ID：14724790
> 
> 赞同：1
> 
> 时间：2013-02-06T08:41:53.340
> 
> 标签：php, websocket, ratchet

我是 websocket 和实时应用程序的新手，我需要一些说明。

我为一位客户开发了一个涉及一些用户和产品数据的应用程序。它是`PHP`在内部 apache 服务器上运行的 Web 应用程序。该应用程序的客户端主要基于 JQuery，对于某些可在平板设备上使用的部分，我们使用`JQuery mobile`/ `html5`。

现在客户要求以这种方式添加一些消息/通知功能：用户将能够发布有关产品的消息，并且必须“显示”其他用户的 Web 控制台实时通知。我们正在考虑在页面标题中添加一些内容，以通知存在新消息。

我做了一些研究，因为所有的应用程序都已经用 PHP 构建了，所以我想去[Ratchet](http://socketo.me/docs)。这是一个好主意吗？

如果我理解这一点，我将需要在服务器上安装棘轮服务器组件并用于客户端集成，例如[AutobahnJS](http://autobahn.ws/js)库；这样对吗？

有没有人已经建立了这样的东西？Apache 和 Ratchet 服务器之间的通信有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T10:05:31.613

那个好，

我尝试使用 Ratchet/AutobahnJs Websocket，太棒了。但我有（特别？）问题：o在[这里](https://stackoverflow.com/questions/16334989/ratchet-websocket-cant-send-data-to-client)。

在您的情况下，我认为您可以使用 AJAX，它比 Websocket 更简单。您可以将多条通知“压缩”到 1 个响应中，并每 5 秒请求一次服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-18T14:30:09.263

是的，这是一个很好的方法，ajax 会给你带来很多开销。使用棘轮非常简单，它将使您能够实时发送通知，以及允许您编辑页面的通知，即更改计数器/图标/消息计数等，基本相同仅实时作为 ajax，无需轮询新数据。

这也意味着你会学到一些新的东西，这总是一个额外的收获，因为我会这样做。

# hadoop - 如何使用 BMC Control-M 安排 hadoop 作业？

> ID：14724800
> 
> 赞同：1
> 
> 时间：2013-02-06T08:42:36.663
> 
> 标签：hadoop, scheduling, control-m

有人知道如何使用 BMC Control-M 软件控制/调度 Hadoop 作业吗？甚至可能吗？

我已经尝试过 Ooozie 并想探索更多安排 hadoop 作业的选项。

请赐教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:14:58.120

答案是肯定的。

这个答案会变得更好。

今天，您可以使用各种 Hadoop 组件提供的丰富命令行界面。然后，您可以将这些 CLI 作为命令单独运行，或者将它们组合到直接嵌入到 Control-M 作业中或包装在 shell 脚本（Bash 是一种流行的脚本）中并使用 Control-M 进行调度的脚本中。我提供了一个示例脚本，它执行一些 HDFS 操作，然后运行 ​​MapReduce 作业。

更好的部分将在几个月后发布，届时我们将发布对 Hadoop 的集成支持。那时（我假设您熟悉 BMC Control-M）我们将提供类似于我们其他 CM 的图形表单，用于定义各种作业类型（Pig、Hive、MapReduce 都在考虑中，但我不确定是什么将实际实施），对状态监控、作业输出检索等的集成支持。

我们已经收到了许多使用 Control-M 来管理其 Hadoop 环境的客户的反馈。

除了运行 Hadoop 作业的“机制”之外，您还可以获得 Control-M 管理图形流的功能、与广泛的平台和应用程序的集成、管理服务级别、预测、审计、报告等的能力。

我很乐意与您进一步讨论这个问题，特别是因为我们仍处于这项工作的早期阶段，我们很想了解您在这方面的要求。请发送邮件至 joe_goldberg@bmc.com，我很乐意安排电话会议或演示。

```
#!/bin/csh
#
cd /h/gron/java/hadoop/hadoop-1.0.3
bin/hadoop dfs -rmr  output_$UUID 'dfs[a-z.]+'
bin/hadoop  jar  hadoop-examples-1.0.3.jar  grep input output_$UUID 'dfs[a-z.]+' 
```

# c# - 使用 AutoMapper 将字符串字典动态转换为强类型类

> ID：14724801
> 
> 赞同：2
> 
> 时间：2013-02-06T08:42:40.177
> 
> 标签：c#, asp.net-mvc, automapper

我已经搜索了几天，还没有找到答案。情况是，我想从格式化的字符串中填充类属性。

例子 ：

```
Class Name : Country
Property Name : CountryCode ,CountryName
Value : 'MAL' , 'Malaysia' 
```

字符串：`CountryCode=INA&CountryName=Malaysia`

我想要的是要动态评估的类的类型。所以我使用 Automapper，这是我的代码：

```
public class ConvertToType<T>
{
    public T FillClass(string expression)
    {
        Dictionary<string, string> varlist = new Dictionary<string, string>();
        string[] _arrayOfExpression = expression.Split('&');
        foreach (string item in _arrayOfExpression)
        {
            string _prop = item.Split('=')[0];
            string _val = item.Split('=')[1];
            if (!string.IsNullOrEmpty(_val))
                varlist.Add(_prop, _val);
        }
        var user = Mapper.Map<Dictionary<string, string>, T>(varlist);
        return user;
    }
}

Country data = new Country();
ConvertToType<Country> _countryConverter = new ConvertToType<Country>();
data = _countryConverter.FillClass(model); 
```

使用该代码，我得到了错误：

`Missing type map configuration or unsupported mapping`

还有其他方法吗，或者我的代码应该是什么？

非常感谢您的解决方案

# php - 有序列表重复编号 1

> ID：14724802
> 
> 赞同：0
> 
> 时间：2013-02-06T08:42:41.367
> 
> 标签：php, html

我的 index.php 文件：

```
 <?php
$query = mysql_query("SELECT `pic_id` FROM image_tag ORDER BY `pic_id`");

    while($run = mysql_fetch_array($query)){
    $pic_id = $run['pic_id'];
    $left = $run['left'];
    $top = $run['top'];
?>

<div id = "taggednum" style = "top:<?php echo $top; ?>; left:<?php echo $left; ?>;">
<ol><li rel ="<?php echo $pic_id; ?>"></li></ol>
</div>

<?php
    }
?> 
```

它没有在列表中显示正确的数字。整个列表编号为“1”。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:45:03.200

您始终使用 重新启动您的订单列表`<ol></ol>`。修复，你应该有这样的结果：

```
<ol>
   <li>item 1
   <li>item 2
</ol> 
```

为此，请将您的`<ol>`和`</ol>`标签放在`while`循环之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:45:11.947

你每次都把你的`<ol>`和放在那里。`</ol>`你不应该

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:45:29.330

```
<div id = "taggednum">
    <ol><?php
    $query = mysql_query("SELECT `pic_id`, `left`, `top` FROM image_tag ORDER BY `pic_id`");

        while($run = mysql_fetch_array($query)){
            $pic_id = $run['pic_id'];
            $left = $run['left'];
            $top = $run['top'];
            ?><li style="top:<?php echo $top; ?>; left:<?php echo $left; ?>;" rel="<?php echo $pic_id; ?>"></li><?php
        }
    ?></ol>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T08:46:15.940

把你`<ol>`的外侧`while`循环

请检查这部分代码，

```
$left = $run['left'];
$top = $run['top']; 
```

我想您应该在查询中使用 *

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T08:47:22.193

```
<div id = "taggednum">

<ol>
<?php
$query = mysql_query("SELECT `pic_id` FROM image_tag ORDER BY `pic_id`");

    while($run = mysql_fetch_array($query)){
    $pic_id = $run['pic_id'];
    $left = $run['left'];
    $top = $run['top'];
?>

<li rel ="<?php echo $pic_id; ?>" style = "top:<?php echo $top; ?>; left:<?php echo $left; ?>;"></li>

<?php
    }
?>
</ol>
</div> 
```

这应该可以解决问题。您每次都在创建一个新的有序列表。

# target - 如何将 target="_blank" 添加到 markItUp 插件

> ID：14724804
> 
> 赞同：0
> 
> 时间：2013-02-06T08:42:44.510
> 
> 标签：target, markitup

**我正在尝试做的事情：**

[默认情况下，当您使用标记](http://markitup.jaysalvat.com/home/)中的链接选项添加链接时，似乎默认情况下，单击该链接会在同一页面中打开它。

**我试过的：**

我查看了 sets.js 文件，发现以下行：

```
{name:'Link', key:'L', openWith:'<a href="[![Link:!:http://]!]"(!( title="[![Title]!]")!)>', closeWith:'</a>', placeHolder:'Your text to link...' } 
```

我尝试添加`target:'_blank'`（见下文）但不起作用：

```
{name:'Link',target:'_blank', key:'L', openWith:'<a href="[![Link:!:http://]!]"(!( title="[![Title]!]")!)>', closeWith:'</a>', placeHolder:'Your text to link...' } 
```

有人可以帮忙解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T02:11:31.187

发现我做错了什么。以下作品：

```
{name:'Link', key:'L', openWith:'<a href="[![Link:!:http://]!]"(!( title="[![Title]!]")!) target="_blank">', closeWith:'</a>', placeHolder:'Your text to link...' }, 
```

# windows-ce - 如何将应用程序从 Windows 6.5 迁移到 Windows RT (ARM)？

> ID：14724806
> 
> 赞同：-2
> 
> 时间：2013-02-06T08:42:48.273
> 
> 标签：windows-ce, windows-rt

我想将用 Windows 6.5 手机编写的现有工作应用程序迁移到 Windows 8 RT (ARM)。

我正在寻找我们是否可以使用一些工具来完成，或者我们必须手动完成？

期待更详细的文档和信息的链接

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:35:19.750

您需要手动完成，没有自动化工具。

Win rt是windows 8的轻量版，所以很多库要么不可用，要么引用不同。

# javascript - 如何更改 Jquery/Javascript 中的日期格式？

> ID：14724814
> 
> 赞同：1
> 
> 时间：2013-02-06T08:43:25.993
> 
> 标签：javascript, jquery

如何更改 Jquery/Javascript 中的日期格式？

我已经下载了 [date.js](https://raw.github.com/vitch/jquery-methods/master/date.js)。然后，我按照下面的例子：

```
var d1 = Date.parse('2010-10-18, 10:06 AM');
alert(d1.toString('dd/mm/yyyy HH:mm:ss GMT')); 
```

所以我为以下日期编写了自己的代码：

> 2013 年 1 月 31 日星期四 16:29:30 GMT+0700 (WIT)

```
var d1 = Date.parse("Thu Jan 31 2013 16:29:30 GMT+0700 (WIT)");
alert(d1.toString('dd/mm/yyyy')); 
```

我的 logcat 打印了这个：

> CordovaLog(31455)：未捕获 RangeError：toString() 基数参数必须介于 2 和 36 之间

我将 Phonegap 用于我的 android 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T09:03:30.690

试试这个..

```
var d = new Date(); 
var newDate = d.getDate()+'/'+(d.getMonth()+1)+'/'+d.getFullYear();

alert('newDate '+newDate); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T09:38:49.450

您可以使用 JavaScript 来格式化日期和时间。[http://www.webdevelopersnotes.com/tips/html/10_ways_to_format_time_and_date_using_javascript.php3](http://www.webdevelopersnotes.com/tips/html/10_ways_to_format_time_and_date_using_javascript.php3)

```
function formatDate(date) {
    var d1 = Date.parse(date);
    var d = new Date(d1);
    var curr_date = d.getDate();
    if (curr_date.toString().length == 1) {
        curr_date = "0" + curr_date;
    }
    var curr_month = d.getMonth();
    curr_month++;
    if (curr_month.toString().length == 1) {
        curr_month = "0" + curr_month;
    }
    var curr_year = d.getFullYear();
    console.log(curr_date + "/" + curr_month + "/" + curr_year);
}

formatDate("Thu Jan 31 2013 16:29:30 GMT+0700 (WIT)");
//Returns the date in "dd/mm/yyyy" format 
```

# c# - 如何在 C# 运行时向类添加属性？

> ID：14724822
> 
> 赞同：17
> 
> 时间：2013-02-06T08:43:48.750
> 
> 标签：c#, .net, reflection, .net-4.0, properties

我有一堂课：

```
class MyClass 
{
}
...
MyClass c = new MyClass(); 
```

是否可以在运行时向此类添加属性/字段？

（*我不知道它们在编译时的类型或名称是什么，并且它们没有我可以使用的通用接口。*）

伪示例：

```
 Add property named "Prop1" [type System.Int32]
 Add property named "Prop900" [type System.String] 
```

*我已经读过[这个问题](https://stackoverflow.com/questions/2244617/how-can-i-add-property-to-a-class-dynamically)，但它使用界面*

提前致谢。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-06T08:47:08.437

您不能在运行时使用新成员扩展现有类。但是，您可以使用[System.Reflection.Emit](http://msdn.microsoft.com/en-us/library/system.reflection.emit.aspx)创建一个将现有类作为基类的新类。

```
typeBuilder.SetParent(typeof(MyClass));
typeBuilder.DefineProperty("Prop1", ..., typeof(System.Int32), null);
... 
```

有关完整示例，请参阅[TypeBuilder.DefineProperty Method (String, PropertyAttributes, Type, Type[])](http://msdn.microsoft.com/en-us/library/2sd82fz7.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T09:09:32.620

我想你误解了什么是反射。反射不允许您更改正在运行的代码。它可以让您阅读自己的代码，甚至运行该代码。

使用 Reflection.Emit，您可以编写一个全新的程序集，然后将其加载到内存中。

但是，您不能在运行时更改类。想象一下，你有一个 Foo 类，你实例化了一大堆它们，然后决定改变这个类。

你已经实例化的所有 Foo 应该怎么办？

但是，您可以使用 Reflection.Emit 创建一个继承 Foo 的新类，称为 Bar，然后将您需要的任何内容添加到该类中。

或者，如果您想在编译时间之后但在运行时间之前以编程方式将属性添加到类，您可以查看 IL Weaving/AOP。如果您对此感兴趣，我建议您查看[PostSharp](http://www.postsharp.net/)或[Fody 。](https://github.com/Fody/Fody)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T08:45:20.220

是的，您可以使用`ExpandoObject`该类来实现这一点。

```
dynamic expando = new ExpandoObject();
expando.Prop1 = 10;
expando.Prop900 = string.Empty; 
```

# css - 将光标设置为单击后等待

> ID：14724824
> 
> 赞同：1
> 
> 时间：2013-02-06T08:43:56.757
> 
> 标签：css

当我点击一个按钮时，光标不会改变加载。任何想法如何实现这一目标？

这是我的代码：

```
<div class="signup">
    <input type="submit" value="Sign Up" title="SignUp" id="SignUp" class="btn" />
</div> 
```

CSS

```
#SignUp
{
    float: left;
    padding-left: 20px;
    padding-right: 20px;
    padding-bottom: 20px;
    vertical-align: central;
    margin-top: 0px;
    width: 100px;
    color: white;
    background-color: #5BB75B;
    background-image: -moz-linear-gradient(top, #62C462, #51A351);
    background-image: -ms-linear-gradient(top, #62C462, #51A351);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#62C462), to(#51A351));
    background-image: -webkit-linear-gradient(top, #62C462, #51A351);
    background-image: -o-linear-gradient(top, #62C462, #51A351);
    background-image: linear-gradient(top, #62C462, #51A351);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#62c462', endColorstr='#51a351', GradientType=0);
    border-color: #51A351 #51A351 #387038;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
    margin-left: 10%;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:58:46.713

您可以使用 jQuery 绑定到按钮的 onclick 事件，然后在正文/页面内容上设置一个类，该类将导致光标等待。

```
// Javascript
$(function() {
  $('input#SignUp').click(function() {
    $('body').addClass('cursor_wait');
  }
});

/* CSS */
.cursor_wait {
  cursor: wait
} 
```

# javascript - 如何将函数应用于两个元素？

> ID：14724825
> 
> 赞同：3
> 
> 时间：2013-02-06T08:44:00.003
> 
> 标签：javascript, jquery

我有两个元素`#DateTimeStart`，`#DateTimeEnd`我想同时应用我 `datetimepicker`的两个元素。

使用此代码，我无法获得结果..知道我在这里做错了什么吗？

```
$(document).ready(function () {
    // This does not work
    $('#DateTimeStart', '#DateTimeEnd').datetimepicker({
        addSliderAccess: true,
        sliderAccessArgs: { touchonly: false }
    });
}); 
```

我想要实现的目标是，但代码更少

```
// This code works
$(document).ready(function () {
    $('#DateTimeStart').datetimepicker({
        addSliderAccess: true,
        sliderAccessArgs: { touchonly: false }
    });  
    $('#DateTimeEnd').datetimepicker({
        addSliderAccess: true,
        sliderAccessArgs: { touchonly: false }
    });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T08:44:37.523

只需用逗号分隔选择器：

```
$("#DateTimeStart, #DateTimeEnd").datetimepicker({
    addSliderAccess: true,
    sliderAccessArgs: { touchonly: false }
}); 
```

在 jQuery 文档中，它被称为[**Multiple Selector**](http://api.jquery.com/multiple-selector/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:48:11.623

为两个元素分配一个类，比如“datepickerclass”，然后使用下面的代码 `$('.datepickerclass').datetimepicker({ addSliderAccess: true, sliderAccessArgs: { touchonly: false } });`
这样你就可以有任意数量的元素附加了 datepicker

# android - Android：加载时自动放大网站 - 响应式设计

> ID：14724832
> 
> 赞同：0
> 
> 时间：2013-02-06T08:44:23.133
> 
> 标签：android, html, css, viewstate

这是我第一次做网站的响应式设计。我的智能手机有问题。

我正在使用以下元标记来使网站“放大”加载。（我关注[了 https://stackoverflow.com/a/12785631/1716195](https://stackoverflow.com/a/12785631/1716195)）

```
<meta name="viewport" content="width=device-width; minimum-scale=0.5; initial-scale=0.5; maximum-scale=0.5; user-scalable=yes;" /> 
```

我也试过

```
<meta name="viewport" content="width=320; minimum-scale=0.5; initial-scale=0.5; maximum-scale=0.5; user-scalable=no;" /> 
```

和

```
<meta name="viewport" content="width=320; minimum-scale=0.5; initial-scale=0.5; maximum-scale=0.5; user-scalable=no;" /> 
```

它适用于我在**三星 Galaxy S-ICS，默认浏览器**上。但如果同一个页面是用**HTC Desire HD Android 2.3.5 默认浏览器**加载的，它会以缩小的方式加载页面。

同样的问题，当我使用**Mobile Opera在我的****SGS上加载相同的页面时**

 **我真的不知道，问题可能出在哪里。你有什么建议可以重点关注吗？

所以我决定问题必须在浏览器或视图状态的某个地方。我会很高兴有任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:16:52.640

手机中的跨浏览器测试通常受到浏览器能力的限制。我也感觉到了问题。

我的建议是保持初始比例为 1.0，并通过媒体查询调整大小。根据我的经验，它不能涵盖所有设备，但它会有所帮助。

您可能会看到有关[视口支持的参考](http://www.quirksmode.org/mobile/tableViewport.html)**

# php - Mysql 查询 - 显示在几个表中找到匹配的行并显示空行

> ID：14724836
> 
> 赞同：0
> 
> 时间：2013-02-06T08:44:47.553
> 
> 标签：php, mysql

我目前正在处理一个表，该表包含例如客户编号，该客户编号位于另外两个表中，我想提取有关该编号的详细信息（姓名，电话技术）。
所以我的查询只显示在某个代码号的查询中匹配的客户，这是因为我正在使用 INNER Join。
我想在其他表中显示不匹配的行。它们在我从中选择但没有代码的表中。（就像我要显示的空行）
下一个查询会更容易理解

```
$sql="SELECT $tbl_name.*,customers.fname,eventcodes.DISCODE,eventcodes.AREA
                FROM $tbl_name
                    INNER JOIN customers
                        INNER JOIN eventcodes
                                ON $tbl_name.Ccode=eventcodes.MokedCcode AND eventcodes.Ccode=customers.Ccode  AND $tbl_name.CODE=eventcodes.CODE
                                                                ORDER By `id` DESC
                                                                        LIMIT $start, $limit"; 
```

如您所见，我想在 $tbl_name 上找到我要显示的所有行，此查询有效，但它仅向我显示符合条件的行，我想显示表中没有 CODE 的所有行，但我可以从客户表中提取他们的名字，例如（fname），因为我有他们的代码（客户编号）。
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:49:42.693

试试这个

```
SELECT $tbl_name.*,customers.fname,eventcodes.DISCODE,eventcodes.AREA
                FROM $tbl_name
                    LEFT JOIN customers
                        LEFT JOIN eventcodes
                                ON $tbl_name.Ccode=eventcodes.MokedCcode AND eventcodes.Ccode=customers.Ccode  AND $tbl_name.CODE=eventcodes.CODE
                                                                ORDER By `id` DESC
                                                                        LIMIT $start, $limit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:50:23.810

使用`LEFT JOIN`insted of`INNER JOIN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T09:00:15.207

使用`LEFT JOIN`并注意连接条件：

```
SELECT 
  t.*,
  c.fname,
  e.DISCODE,
  e.AREA
FROM $tbl_name       AS t
LEFT JOIN customers  AS c ON t.Ccode = c.Ccode
LEFT JOIN eventcodes AS e ON t.Ccode = e.MokedCcode 
ORDER By `id` DESC
LIMIT $start, $limit"; 
```

**请注意：**我将条件`customers.Ccode = $tablename.Ccode`移至第一个连接，并删除了条件`$tbl_name.CODE=eventcodes.CODE`，因为前两个连接将确保该条件。

# java - 如何在 java 接口中定义 Getter 和 Setter（属性）

> ID：14724857
> 
> 赞同：0
> 
> 时间：2013-02-06T08:46:03.847
> 
> 标签：java

我想在我的应用程序中使用 RMI。所以使用接口是必须的。我想强制开发人员实现 getter 和 setter。所以我想在我的界面中定义 getter 和 setter 方法。我怎样才能做到这一点？不幸的是，没有有用的文章或链接可以帮助我。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:54:17.917

您可以`declare`在接口中使用方法，但不能`define`在其中使用它的主体。

> 接口在类和外部世界之间形成了一个契约，并且这个契约在编译时由编译器强制执行。如果您的类声称实现了一个接口，则该接口定义的所有方法都必须出现在其源代码中，然后该类才能成功编译。

它将被定义在哪里`interface`实施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T08:49:08.587

```
public interface MyInterface {
    PropertyType getProperty();
    void setProperty(PropertyType property);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:49:51.717

编写没有正文的方法

```
public interface MyInteface {
    public String getSomething();
    public void setSomething(String str);
} 
```

那么任何实现这个接口的类都必须实现这些get/set方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T08:48:33.603

Java 没有对 get-set 属性的内置支持。您已经定义了自己的 get-set 属性，例如

```
int getCount();
void setValue(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T08:49:33.017

如果您在接口中声明 getter 和 setter，任何合理的 IDE 都会告诉您必须在实现接口的类中实现它们。即使 IDE 没有告诉您，java 也会打印出一个足够合理且易于理解的错误。那里几乎没有出错的余地。

# ssas - Powerpivot DAX - 如何获取“倒数第二个”日期

> ID：14724859
> 
> 赞同：1
> 
> 时间：2013-02-06T08:46:04.973
> 
> 标签：ssas, powerpivot, dax

在有 DateTime 列的 Period 维度表中，我需要从该表中获取“倒数第二个”日期。我需要在不允许 MAX() 函数的过滤器表达式中使用结果。

我能够获得最新日期并将其用于具有以下表达式的过滤器：

`FILTER(PeriodForecastEuro, RELATED(DimPeriod[PeriodDate]) = LASTDATE(VALUES(DimPeriod[PeriodDate])))`

但我不知道如何获得“倒数第二个”和“倒数第三个”。

我对整个 SSAS 都是新手。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-18T19:05:06.273

```
=Calculate(LASTDATE(Table[Date]), FILTER(Table, Table[Date]< LASTDATE(Table[Date]))) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T16:18:47.787

LASTDATE(值(DimPeriod[PeriodDate]))-1

# debugging - 从 .NET Compact Framework 3.5 中的 GC 获取调试数据

> ID：14724863
> 
> 赞同：0
> 
> 时间：2013-02-06T08:46:14.190
> 
> 标签：debugging, .net-cf-3.5

我们正在尝试调试在 Windows Embedded Compact 7 上运行的 .NET Compact Framework 应用程序中的内存泄漏。不幸的是，我们无法使用 CLR Profiler，因为它会生成“不支持的指令集”错误消息，并且显然与该设置不兼容-向上。

我们可以看到我们所有的对象都被释放了，但它们从未最终确定和释放，导致应用程序最终耗尽内存。必须在某处留下参考，但没有任何调试工具，我们无法追踪它们。有没有办法从代码内部转储垃圾收集器中的数据以进行调试？似乎没有 API，但显然 CLR Profiler 有一些方法可以做到这一点。

或者有什么方法可以修复 CLR Profiler？有人问过这个问题（[Visual Studio Device: Unsupported Instruction Set error while connected to .Net CF CLR Profiler](https://stackoverflow.com/questions/14135850/visual-studio-device-unsupported-instruction-set-error-while-connecting-to-net/)）但没有人理解这个问题，更不用说回答了。

注意：我不是在寻求有关我们代码的帮助，也不能在此处发布（它是专有的且巨大的），只能使用调试工具。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T16:04:47.987

问题是 ActiveSync，如果您将其设置为 TCP 设备，它确实可以工作。

按照此处的说明操作：http: [//social.msdn.microsoft.com/Forums/en-US/0fd6095d-3532-460a-9a2e-5beb1d823781/unsupported-instruction-set-message-to-connect-to-netcf-35 -device-for-using-remote-performance?forum=winembmngdapp](http://social.msdn.microsoft.com/Forums/en-US/0fd6095d-3532-460a-9a2e-5beb1d823781/unsupported-instruction-set-message-to-connect-to-netcf-35-device-for-using-remote-performance?forum=winembmngdapp)

宽广地：

将 rtfhost3_5.exe 和 rtf3_5.dll 复制到设备上的 \Windows 目录。这些文件位于 Program Files\Microsoft.NET\SDK\CompactFramework\version\bin 中。

运行 rtfhost3_5.exe 以获取 IP 地址。

添加一个新的“手动 TCP”设备，使用 rtfhost3_5.exe 显示的 IP 地址。

从各种工具连接时使用该新设备。

# ios - AFNetworking base64 参数，字符被 NSJSONSerialization 转义

> ID：14724868
> 
> 赞同：2
> 
> 时间：2013-02-06T08:46:44.923
> 
> 标签：ios, json, base64, afnetworking, nsjsonserialization

我正在尝试使用 AFNetworking 向[CardShark 的 API](http://www.fullcontact.com/developer/docs/cardshark/)提交图像。

```
NSData *imageData = UIImageJPEGRepresentation(cardImage, 1.0);
NSDictionary *parameters = @{@"front" : [imageData base64EncodedStringWithSeparateLines:NO]};

NSString *path = [NSString stringWithFormat:@"cardShark?webhookUrl=%@&apiKey=%@", kCardSharkWebHookURLEncodedString, kCardSharkAPIKey];

[self postPath:path parameters:parameters
       success:^(AFHTTPRequestOperation *operation, id responseObject)
{
    completion(responseObject, nil);
}
       failure:^(AFHTTPRequestOperation *operation, NSError *error)
{
    completion(nil, error);
}]; 
```

我已经尝试了 base64 字符串的所有组合。

```
base64EncodedStringWithSeparateLines:YES
base64EncodedStringWithSeparateLines:NO
base64EncodedString` 
```

无济于事，在检查了`HTTPBody`生成的请求后，我看到事情正在被转义。

原始 base64 以

`/9j/4AAQSkZJRgABAQAAAQABAAD/4QBYRXhpZgAATU0AKgAAAAgAAgESAAMAAAAB AAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAEOKAD AAQAAAABAAACrAAAAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB`

但是一旦它通过 AFNetworking 并且大概是 NSJSONSerialization 它就会被发布为

`\/9j\/4AAQSkZJRgABAQAAAQABAAD\/4QBYRXhpZgAATU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAEOKADAAQAAAABAAACrAAAAAD\/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH\/`

如您所见，`/`正在逃脱。如何防止逃跑？通过另一个工具（例如 curl）将确切的 JSON 正文传递给 API 会导致 API 产生错误。那么这里最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:22:41.503

事实证明，这更多是 API 的错。AFNetworking 具有以下代码，将 Content-Type 标头设置为`charset=utf-8`.

```
case AFJSONParameterEncoding:;
                    [request setValue:[NSString stringWithFormat:@"application/json; charset=%@", charset] forHTTPHeaderField:@"Content-Type"];
                    [request setHTTPBody:[NSJSONSerialization dataWithJSONObject:parameters options:0 error:&error]];
                    break; 
```

无论出于何种原因超出我的理解，他们的 API 不支持`charset`标题上的属性。

话虽如此，他们很快就解决了这个问题，现在它可以在没有修改上面显示的代码的情况下工作。

# linq - linq where 与容器类型

> ID：14724870
> 
> 赞同：1
> 
> 时间：2013-02-06T08:46:51.713
> 
> 标签：linq

我有一个存储库方法，例如，

```
 public List<Township> lst(string multipletownship)
    {
        var foo = from x in db.Townships
                  select new { x.TownshipID, x.JTownshipName };
        string[] sarr;
        if (multipletownship.Contains(','))
        {
            sarr = multipletownship.Split(',');

            foo = foo.Where(s => s.TownshipID == sarr[0] || s.TownshipID==sarr[1]);
        }
        else
        {
            foo = foo.Where(s => s.TownshipID == multipletownship);
        } 
```

multipletownship 参数值是`1,2`。这些是乡镇 id。问题是我如何将 townshipid 过滤为多个。`if condition`这可能或者我必须处理一些循环......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:52:37.280

如果`,`在 multipletownship 字符串中没有，那么您将得到一个包含单个项目的数组：

```
public List<Township> lst(string multipletownship)
{
    string[] sarr = multipletownship.Split(',');
    var foo = from x in db.Townships
              where sarr.Contains(x.TownshipID)
              select new { x.TownshipID, x.JTownshipName };

    // return
} 
```

# css - CSS 预处理器（ASS、SCSS、LESS）对响应式网页设计有多大用处？

> ID：14724871
> 
> 赞同：0
> 
> 时间：2013-02-06T08:46:56.553
> 
> 标签：css, responsive-design, less

我必须从事 RWD 项目。我想知道是否应该使用 LESS 来简化这项任务。在使用 RWD 时，使用 CSS 预处理器有什么好处吗？
*我有一种预感，在 LESS mixins 中使用媒体查询可能会节省时间。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:53:28.097

我发现它们非常节省时间，尤其是带有[Compass的](http://compass-style.org/)[SCSS](http://sass-lang.com)。但是有些人只是觉得它令人困惑，并且有一些新的东西需要学习。

我为 compass 制作了一些 mixin，可以自动生成视网膜和非视网膜精灵并将它们映射到媒体查询，这帮助我在文本编辑器和 Photoshop 中节省了大量时间。[您可以在此处阅读有关精灵的更多信息。](http://compass-style.org/help/tutorials/spriting/)

这是我如何使用 mixin 函数的示例。

```
@mixin pixel-ratio($ratio: 1.5) {
    $dpi: $ratio * 96;
    $opera-ratio: $ratio * 100;
    @media
        only screen and (-webkit-min-device-pixel-ratio: #{$ratio}),
        only screen and ( min--moz-device-pixel-ratio: #{$ratio}),
        only screen and (-o-min-device-pixel-ratio: '#{$opera-ratio}/100'),
        only screen and (   min-device-pixel-ratio: #{$ratio}),
        only screen and (           min-resolution: #{$dpi}dpi),
        only screen and (           min-resolution: #{$ratio}dppx) {
            @content;
    }
}

@include pixel-ratio() {
    //Code here
} 
```

我也有这个 mixin，它可以对普通版本和视网膜版本进行媒体查询，我不确定它是否是最后一个，但它应该让您了解一旦开始使用它是多么容易。

```
// Usage: @include retina-sprite($name);
@mixin retina-sprite($name, $offset-x: 0, $offset-y: 0, $downscale-adjust: 0, $map: $sprite-sprites, $mapx2: $sprite-retina-sprites) {
    background-image: sprite-url($map);
    background-position: sprite-position($map, $name);
    background-repeat: no-repeat;
    display: block;
    height: (image-height(sprite-file($map, $name)) );
    width: image-width(sprite-file($map, $name));
    @include pixel-ratio() {
        // Workaround for https://gist.github.com/2140082
        @if (sprite-position($map, $name) != sprite-position($mapx2, $name)) {
            $posX: round(nth(sprite-position($mapx2, $name, 0, 2 * $offset-x), 1) / 2);
            $posY: round(nth(sprite-position($mapx2, $name, 0, 2 * $offset-y), 2) / 2);
            background-position: $posX $posY;
        }
        // Set image size to the orginal size of the image
        @include background-size(floor(image-width(sprite-path($map)) - $downscale-adjust) auto);
        background-image: sprite-url($mapx2);
    }
} 
```

[您可以通过安装Yeoman](http://yeoman.io)以简单的方式尝试使用 Compass 的 SCSS 。这允许您启动一个带有所有基本 SCSS 设置的项目，然后您可以自己尝试一下。

但是它本身并不难[安装](http://compass-style.org/install/)，它只需要 Ruby。

正如其中一条评论指出的那样，[thesassway.com](http://thesassway.com/)是一个非常好的 SCSS/SASS 指南资源。

# eclipse - ScalaIDE：当鼠标悬停在错误上时，如何获得 Java 中的工具提示？

> ID：14724872
> 
> 赞同：5
> 
> 时间：2013-02-06T08:46:59.680
> 
> 标签：eclipse, scala, scala-ide

当 ScalaIDE 检测到源代码中的错误时，它会以与 JDT 相同的方式下划线。但是，要查看错误消息，我必须将鼠标移到行号左侧的红色图标上。要选择快速修复，我必须在光标位于错误上时按 Ctrl+1。

在 JDT 中，我可以将鼠标悬停在错误上，它会向我显示错误消息以及所有可能的修复。

是否可以在某处为 Scala 激活该功能？我在设置中没有找到任何东西。

这是在 Eclipse 4.2 和 ScalaIDE 2.1.0 M3 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:49:04.560

是的，这很烦人。

我将“**问题”选项卡**作为标准可见，并且您的错误也将在那里打印，因此您无需悬停即可直接看到它。

要启用选项卡：Windows -> 显示视图 -> 问题

# javascript - 为什么 JavaScript 函数返回未定义

> ID：14724882
> 
> 赞同：-2
> 
> 时间：2013-02-06T08:47:37.870
> 
> 标签：javascript

我不知道为什么当 console.log 打印正确的结果时这个小东西会返回“未定义”。提前谢谢。

```
App.Presentation.prototype.getLeaf = function(leafSlug, tree) {
    for (var key in tree.content) {
        if (tree.content[key].type === 'leaf' && tree.content[key].slug === leafSlug) {
            console.log(tree.content[key]) // this works Correct
            return tree.content[key]; // this returns undefined :<
        } else {
            this.getLeaf(leafSlug, tree.content[key]);    
        }
    } 
```

};

我在控制台中这样调用它：

```
Presentation.getLeaf("chpl", Presentation.tree); 
```

并得到这个结果：

（第一个结果来自`console.log`）

```
Object {type: "leaf", alias: "Chpl bla bla bla", slug: "chpl", group: "", order: ""…}
alias: "Chpl bla bla bla"
group: ""
html: "<img src='bg.png' />"
order: ""
parent: "chpl"
slug: "chpl"
type: "leaf"
__proto__: Object 
```

（下一个结果来自`return`）

```
undefined 
```

`Presentation.tree`是一个包含解析为对象的 JSON 的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:55:50.537

如果`tree.content`在你的条件为真的地方没有键，你的函数永远不会`return`有任何东西，所以你会回来`undefined`。

即使某些递归调用可能`log`有所作为，它们的结果也不会在任何地方使用。您还需要从调用函数返回递归调用的结果！将 else 分支更改为

```
var res = this.getLeaf(leafSlug, tree.content[key]);
if (res)
    return res; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:55:02.683

您不会从递归调用中返回任何内容。这里可能还有其他考虑因素，但在某些时候你会想要返回递归调用的结果，比如：

```
App.Presentation.prototype.getLeaf = function(leafSlug, tree) {
    for (var key in tree.content) {
        if (tree.content[key].type === 'leaf' && tree.content[key].slug === leafSlug) {
            console.log(tree.content[key]) // this works Correct
            return tree.content[key]; // this returns undefined :<
        } else {
            return this.getLeaf(leafSlug, tree.content[key]);    
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T12:33:03.577

解决了。对嵌套对象树的正确递归搜索应如下所示：

```
Presentation.prototype.getLeaf = function(leafSlug, tree) {
    var tempReturn;
    for (var key in tree.content) {
        if (tree.content[key].type === 'leaf' && tree.content[key].slug === leafSlug) {
            return tree.content[key];
        }  else {
            if (tree.content[key] instanceof Object && tree.content[key].hasOwnProperty('content')) {
                tempReturn = this.getLeaf(leafSlug, tree.content[key]);
                if (tempReturn) { return tempReturn }
            }
        }
    }
    return false;
}; 
```

而不是在没有找到任何东西时调用`this.getLeaf(leafSlug, tree.content[key]);`，我必须将此调用的结果分配给变量`tempReturn = this.getLeaf(leafSlug, tree.content[key]);`，检查是否返回了某些`if (tempReturn)`内容，如果是，则返回该结果`{ return tempReturn }`。

我还添加了针对分支结束的测试，以不调用`undefined`元素上的递归：

```
if (tree.content[key] instanceof Object && tree.content[key].hasOwnProperty('content')) {...} 
```

# javascript - 我发现自己在使用 Backbone.js 或其他 MVC 时重复了很多代码

> ID：14724883
> 
> 赞同：4
> 
> 时间：2013-02-06T08:47:37.607
> 
> 标签：javascript, model-view-controller, backbone.js, client

和你们中的许多人一样，我已经开始使用只支持 JSON 的后端（在我的例子中是 Django 或 Rails）来编写越来越多的 Web 应用程序。

作为前端，我一直在使用 MVC 客户端，例如 Backbone.js。据我说，这个解决方案非常好，并且适用于许多类型的应用程序。

我发现烦人的是，我发现自己编写了大量的 Javascript 代码，它们几乎做同样的事情。感觉就像我正在为每个新应用程序在 Backbone 之上创建一个新层。我在这里思考的方式一定有问题。

给你举个例子：

假设您有一个提供六个集合的 API，并且您想使用 Twitter Bootstrap 来展示这一点。您将有一个导航菜单，您可以在其中选择要查看的每个集合。

将有大量的 Javascript 代码来设置所有模型、集合、视图以及围绕路由和导航的逻辑。您还必须考虑哪个视图处于活动状态。

如：

**获取集合时的错误处理**

如果一个集合正在加载，我们希望看到“正在加载”。如果它失败了，我们会看看为什么。创建/保存/删除也是如此。

**路由**

我发现自己编写了一个复杂的逻辑，最终只是在匹配的 URL:s 上呈现一个特定的视图。它只是一个包含所有实例化视图的数组。有时您甚至不需要视图，只需要与 URL 关联的模板。好吧，如果你有六个菜单，你就可以有六个功能。但是，如果菜单是三层深度，每层有六个选项，您就不能*为每个视图*设置一个路由功能。

**导航栏和面包屑**

这将是从我上面的复杂逻辑中调用的视图。如果导航是多层次的深度，这可能真的很复杂。

我的问题是：我在这里有那么独特吗？如果没有，你如何解决这个问题？

Backbone.js 不适合我吗？什么替代品更适合（哦，是的，我已经搜索过）？

谢谢你的时间，我真的很感激你的所有想法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T09:18:48.220

我想说这里有两个因素在起作用：

1.  **骨干应用程序确实很容易变得冗长**，因为框架本身是如此的小而简单。对于 Backbone 所没有的每个功能和代码行，您必须编写。这是其基本理念的一部分。引用文档：

    > Backbone.js 旨在提供具有雄心勃勃的界面的数据丰富的 Web 应用程序所需的通用基础——同时通过做出任何你更有能力自己做出的决定来刻意避免将你逼入绝境。

    所以这是一个权衡。还有其他更全面的框架，例如[**Ember.js**](http://emberjs.com/) 和[**AngularJS**](http://angularjs.org/)，它们往往会在您自己的代码库中生成更少的样板代码。它们都是一流的框架，你可能想看看。当然，代价是更大的框架规模、更多的第三方复杂性以及“将自己画在角落里”的风险。

    如果您想继续使用 Backbone，但您觉得需要框架提供更多帮助，请查看[**Backbone.Marionette**](https://github.com/marionettejs/backbone.marionette)。我没有亲自使用过它，但对我来说，它看起来是用更少的代码和可维护的结构解决许多常见问题的好方法。

2.  **仅使用 Backbone 可能会做得更好**。Backbone `Model`- `View`-`Router`模式只能让你到目前为止，在谈论复杂、更大的应用程序时，Backbone 并不是特别擅长向你展示正确的方式。

    当你开始重复代码时，你必须重构、概括并保持 DRY。例如：

    *   要在一个地方定义加载图标，请连接到`jQuery.ajax`事件或覆盖`Backbone.sync`。
    *   对于简单的路由操作，请定义声明性`route->view`映射，根据需要使用可选的路由参数和自动装配依赖项。使这些分层并基于此地图生成导航视图组件。
    *   在路由更改时自动连接您的面包屑`Backbone.history.navigate`并将路由片段映射到本地化的 UI 文本。

    .

    通过应用一些通用的软件开发模式，将逻辑封装到基类、服务、实用程序、小部件、装饰器、mixin 和你所拥有的东西中，我已经设法让 Backbone 应用程序从微小的 50 行扩展到 50 000 多个 LOC 野兽. 这实际上与大型 Rails 项目没有什么不同：当应用程序的复杂性和规模增长时，对代码卫生和结构化模式的需求也会增长。

    要在项目之间转移通用解决方案，请从每个项目中创建独立组件。在您提供的示例中，我可以很容易地看到 a`Backbone.LoadingIndicator`和形成。[**为了更进一步，用Bower**](https://github.com/twitter/bower)之类的东西打包你的组件，并将它们作为依赖项包含在你的项目中。`Backbone.Navigation``Backbone.Breadcrumb`[](https://github.com/twitter/bower)

 **您的问题没有正确答案，但可以肯定地说，Backbone 应用程序的扩展性远远超出了您所描述的范围。它只是希望您进行扩展，作为回报，它使您可以自由地按照您的应用程序需要构建的方式构建您的应用程序，而不是按照框架所说的方式构建您的应用程序。选择是你的，一如既往。**

# javascript - 如何通过单击按钮禁用/启用 Jquery 事件

> ID：14724888
> 
> 赞同：-1
> 
> 时间：2013-02-06T08:47:57.367
> 
> 标签：javascript, jquery

我有一个 Jquery 事件附加到某个`id="myid"`& 希望通过`<button>`单击禁用它 & 然后通过相同的`<button>`单击重新启用 & 反之亦然无限次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:52:22.263

```
$('button').toggle(function() {
    $('#myid').unbind();
}, function() {
    // attach your event
}); 
```

[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/) [http://docs.jquery.com/Events/toggle](http://docs.jquery.com/Events/toggle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:54:45.023

你可以用 off 分离。

```
var fn = function() {
  alert('my function');
};

$('#myid').on('mouseenter', fn);

var enable = true;
$('button').click(function(){
  if (enable) {
    $('#myid').off('mouseenter', fn);
  } else {
    $('#myid').on('mouseenter', fn);
  }
}); 
```

[http://jsbin.com/iyemij/1/edit](http://jsbin.com/iyemij/1/edit)

# php - 输出显示空白页

> ID：14724890
> 
> 赞同：0
> 
> 时间：2013-02-06T08:47:58.480
> 
> 标签：php, joomla, eval, jumi

5 我正在使用一个 jumi 组件来运行 php 文件。有些文件运行得很好，但有些文件在我使用 require_once 函数时并不特别。错误显示如下：

> 警告：require_once（`http://bphf2012.org/..._jumi&fileid=10`）[function.require-once]：无法打开流：/home/content/13/10377813/html/components/com_jumi/views/application/view.html.php（40）中没有这样的文件或目录) : eval()'d 代码在第 21 行
> 
> 致命错误：require_once() [function.require]：`http://bphf2012.org/..._jumi&fileid=10`在/home/content/13/10377813/html/components/com_jumi 中打开所需的“”(include_path='.:/usr/local/php5_3/lib/php') 失败/views/application/view.html.php(40) : eval()'d 代码在第 21 行

如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:55:13.063

您使用的 require_once 方法不适用于外部 URL。本地文件和外部文件是有区别的。您正试图要求一个外部文件。对于外部文件（在本例中为网页），您可以使用 curl ( [http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php) ) 或 file_get_contents ( [http://php.net/manual/en/function .file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php) )

如果文件在您的本地磁盘上，则需要+一次磁盘上的文件路径。

要求（'/home/content/13/10377813/html/components/com_jumi/views/application/view.html.php'）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:59:12.810

如果您真的想包含远程文件，请将 allow_url_include 设置为 On。

在此处阅读更多信息 -[包括 PHP 中的远程文件](https://stackoverflow.com/questions/1158348/including-a-remote-file-in-php)

# ruby-on-rails - 如何在此 Rails 查询中按 created_at 排序

> ID：14724894
> 
> 赞同：0
> 
> 时间：2013-02-06T08:48:14.930
> 
> 标签：ruby-on-rails, postgresql, rails-activerecord

鉴于以下 AR 查询将消息检索为对话（按 sender_id 分组），我如何首先显示最近的消息？此查询显示发送的第一条消息，但不显示最新消息。

```
User.find(1).messages.select("DISTINCT ON (messages.sender_id(created_at)) * ")
  .where("messages.sender_id = (?)",friend.id)
  .group("messages.sender_id, messages.updated_at, messages.id, messages.user_id, messages.sent, messages.read") 
```

我有点迷失在哪里以及如何在这里添加订单子句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:56:11.610

`ORDER BY`并且`DISTINCT`不要一起工作。

正确的做法是使用`group by`and`order by`代替。

最大的问题是它`SELECT *`不起作用`GROUP BY`，因此您必须放弃以下之一：

*   `GROUP BY`
*   `DISTINCT`
*   `ORDER BY`

一种选择是您可以更改`SELECT *`以手动列出所有列，并且可以将那些不希望分组的列放入聚合中，例如`min()`（这是我在 SQL 查询中所做的。

我不使用 ORM，但希望这能让你知道该怎么做，尤其是。因为无论如何你已经非常接近SQL了。

# python - django 中原始 MySQL 查询的问题

> ID：14724900
> 
> 赞同：0
> 
> 时间：2013-02-06T08:48:46.307
> 
> 标签：python, mysql, django, django-queryset

我正在使用 Django 原始 sql 查询使用连接和别名从数据库中获取数据 **我的查询：**

```
SELECT DISTINCT
   A.entity_id AS entity_id,
   A.email AS email,
   A.catquizid AS style_quiz_score,
   A.catquizquesans AS style_quiz_answer,
   A.created_at AS date_joined,
   A.is_active AS is_active,
   B.attribute_id AS attribute_id,
   B.value AS info
FROM
   customer_entity AS A INNER JOIN customer_entity_varchar AS B
   ON A.entity_id=B.entity_id WHERE B.attribute_id LIMIT 2 
```

我正在获取这样的结果：

```
row = cursor.fetchall() 
```

当我返回`HttpResponse`一行时，它会显示正确的结果，但如果我返回`HttpResponse(row['entity_id'])`，则会显示错误`Sorry, an error occurred.`

所以请告诉我如何`row`使用他的别名访问数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T10:50:21.770

**从这里：[https ://docs.djangoproject.com/en/dev/topics/db/sql/](https://docs.djangoproject.com/en/dev/topics/db/sql/)**

默认情况下，Python DB API 将返回不带字段名称的结果，这意味着您最终会得到一个值列表，而不是一个字典。以较小的性能成本，您可以使用以下内容将结果作为 dict 返回：

```
def dictfetchall(cursor):
    "Returns all rows from a cursor as a dict"
    desc = cursor.description
    return [
        dict(zip([col[0] for col in desc], row))
        for row in cursor.fetchall()
    ] 
```

这是两者之间差异的示例：

```
>>> cursor.execute("SELECT id, parent_id from test LIMIT 2");
>>> cursor.fetchall()
((54360982L, None), (54360880L, None))

>>> cursor.execute("SELECT id, parent_id from test LIMIT 2");
>>> dictfetchall(cursor)
[{'parent_id': None, 'id': 54360982L}, {'parent_id': None, 'id': 54360880L}] 
```

# php - 使用广度优先搜索在无向图中查找所有可能的路径

> ID：14724902
> 
> 赞同：1
> 
> 时间：2013-02-06T08:48:56.310
> 
> 标签：php, graph, breadth-first-search

```
$grph = array(                                                      
    array(1,2),
    array(0,2,3),
    array(0,1,4),
    array(1,5,4),
    array(2,3,5),
    array(3,4));

//The $grph[0] is all the nodes connected to node 0 etc 
```

我需要一个 PHP 代码来计算此图中从源到目标的所有可能路径，例如使用广度优先搜索 Source=0 和 Destination=5

# c++ - 编写新的“malloc”和“free”函数

> ID：14724905
> 
> 赞同：7
> 
> 时间：2013-02-06T08:49:01.277
> 
> 标签：c++, c, windows, memory-management

对于一个面试问题：我将如何编写新的“malloc”和“free”函数？我不认为“使用 new 和 delete”是一个可以接受的答案或使用类似 LocalAlloc/HeapAlloc 的东西

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T09:03:13.980

由于这是一个面试问题，它可能不会有一个“正确”的答案，而且他们对你的思维过程以及你对该主题的一般知识更感兴趣。

您应该要求澄清要求，或根据情况给出一系列答案。以下是一些需要考虑的问题：

*   避免内存碎片重要吗？固定的分配大小可能会有所帮助。
*   您需要分配速度保证吗？使用/空闲块的使用索引。
*   您是否需要轻松跟踪执行的分配？将日志结构添加到 malloc/free 库。
*   您是否需要防止或检测内存不足/溢出？额外的填充和定期填充检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T09:04:44.373

简单的说，

您的`malloc`函数应该能够从操作系统获取内存并将其提供给请求动态分配内存的客户端（例如，您的 C 程序）。为了实现这一点，malloc 库通常具有许多数据结构（取决于实现） - 例如，`malloc`实现可以选择使用链表跟踪空闲内存块。一种更有效的方法是拥有一个链表列表，每个链表都包含特定大小范围的块。

我碰巧在[TCMalloc](http://goog-perftools.sourceforge.net/doc/tcmalloc.html)库上工作，这可能会帮助您更清楚地理解这一点

![通过空闲列表分配内存](../Images/217f6a1789ca7b19f08bedc50502f41a.png)

**通过freelists分配内存**

可以说，0 类是大小为 4k 的空闲块的链表，1 类是大小为 8k 的空闲块的链表，依此类推。

当调用 malloc 时（例如，大小为 10k），您的 malloc 实现将遍历*freelist*以找出满足请求的最小空闲块（在这种情况下，4k 块是不够的，所以它将获取一个 8k 块，将其从*freelist*中删除，然后将其返回给您的程序）。

同样，当调用到时`free`，您的实现（除其他外）应该从程序中回收块并将其添加到*freelists*之一的适当位置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T09:03:11.730

这个网站回答了你的问题。

[http://www.codeproject.com/Questions/177316/Write-your-own-malloc](http://www.codeproject.com/Questions/177316/Write-your-own-malloc) - 同样的问题 [http://www.inf.udec.cl/~leo/Malloc_tutorial.pdf](http://www.inf.udec.cl/~leo/Malloc_tutorial.pdf)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T09:06:15.483

如果面试官问你

> 我将如何编写新的“malloc”和“free”函数？

你开始谈论你要做什么，你已经失败了。在手之前，您需要问几个问题才能更精确地使用 malloc 函数。在我的头上，一些第一个问题是：

*   适用于哪个操作系统？
*   对于哪个内存？用户 malloc 还是内核 malloc？
*   最常见的使用场景是什么？通用malloc？大块还是小块更好？

在开始讨论代码之前，需要进行第一轮的需求获取。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T08:56:28.873

这取决于要求，例如，假设您想创建嵌入式软件，有时在运行时或由于性能原因不允许执行 malloc/free。然后，您可以创建自己的 malloc/free 版本，它不分配/释放内存，而只是从预分配的堆中获取/重新运行块。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-06T09:02:40.820

如果您正在谈论挂钩`malloc()`和`free()`呼叫，您可以使用以下方式进行操作：

```
#define malloc(x) your_malloc(x)
#define free(x) your_free(x) 
```

但是，如果您正在谈论创建自己的内存分配器，那么您可能想要查看 Kernighan 和 Ritchie 在他们的“The C Programming Language 2nd Edition”一书中的堆分配器实现之一。它基本上依赖于使用`sbrk()`系统函数来增加进程的**数据段的大小。**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-06T08:59:49.860

我想他们可以/应该用另一种方式表达这个问题：“堆内存如何由 malloc 和 free 管理？”。

然后你可以用一种稍微不同的方式来思考这个问题——给定一个线性的值列表，你如何划分列表的块并跟踪它们，你如何把那个列表的块还给你，你如何管理碎片清单等

简而言之，尽管下一个空闲块的地址存储在分配出的块旁边的堆中，但下一个空闲内存块存储位置的信息对用户是不可见的，但仍然是同一个堆的一部分。这就是为什么超出分配的内存会完全破坏堆并导致 malloc 和 free 之类的崩溃。

* * *

通常，面试官会用这个问题让你自由地展示你的知识。你可以从基本功能开始，然后如果你知道你的洋葱如何管理它，不同的算法是什么等等。毕竟，无论你描述什么都不太可能涵盖过去二十年的研发学科！

# doctrine-orm - 从 Doctrine 2 中的插入或更新中删除列

> ID：14724909
> 
> 赞同：1
> 
> 时间：2013-02-06T08:49:11.427
> 
> 标签：doctrine-orm

我将 Doctrine 2 Entity 映射到 Oracle DB 表，并且该表有一个由某个触发器自动生成的 ID 列，所以我想在没有 ID 列的情况下插入数据，我怎样才能使它类似于只读列？即不包括在插入？我知道我可以为 ID 执行自定义生成策略，但我只是希望它由数据库处理，并且我希望能够读取它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:02:57.590

您是否尝试如下映射您的字段？

```
/**
 * @Id
 * @Column(type="integer")
 * @GeneratedValue(strategy="IDENTITY")
 */
protected $id; 
```

这将告诉 ORM 使用插入的行的值来填充`$id`您的对象。

# java - 我可以通过rabbitmq使用java发送任务到芹菜吗？

> ID：14724910
> 
> 赞同：3
> 
> 时间：2013-02-06T08:49:27.317
> 
> 标签：java, json, rabbitmq, celery, django-celery

我刚接触 celery 和 java 2 天。:(

现在，我有一个java客户端通过rabbitmq发送任务的任务。Celery 将是处理任务的工人。

我知道 Python->rabbitmq->celery 很容易。但是我可以通过 java->rabbitmq->celery 做到这一点吗？

草案思路是通过json序列化java函数，然后通过rabbitmq发送，再通过celery处理。

最好有示例代码，可以直接运行

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T09:28:13.237

您当然可以从 Java 通过 RabbitMQ 发送消息。有一个用于与 RabbitMQ 交互的 Java 客户端库 - [http://www.rabbitmq.com/api-guide.html](http://www.rabbitmq.com/api-guide.html)

此页面描述了 Celery 消息格式 - [http://docs.celeryproject.org/en/latest/internals/protocol.html](http://docs.celeryproject.org/en/latest/internals/protocol.html)。一种风格使用 JSON，并且有很多现有的 Java 库用于 JSON 读写；见[http://json.org](http://json.org)

> 最好有示例代码，可以直接运行

你是对的。

上面链接的页面包含代码片段，RabbitMQ Java 库有一些（小）示例。（至少，这就是页面所说的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T12:16:28.857

最简单的形式是编写一个简单的 python 脚本，它只是向 celery 添加一个任务，然后从 java 调用这个 python 脚本（Runtime.exec() 或类似方法）。

# jquery - 延迟的 jQuery AJAX 包装器

> ID：14724911
> 
> 赞同：3
> 
> 时间：2013-02-06T08:49:30.283
> 
> 标签：jquery, ajax, deferred

我正在为 jQuery AJAX 方法创建一个包装器，因为我的 AJAX 请求在实际继续之前依赖于异步工作。

我目前正在做的是： http: [//pastie.org/private/bfdvep4kcdclzupsyddmiq](http://pastie.org/private/bfdvep4kcdclzupsyddmiq)

```
var ajax = function (options) {
    var deferred = $.Deferred();

    doAsyncWork()
    .done(function (attributes) {
        $.ajax(options)
        .done(function () {
            deferred.resolve.apply(this, arguments);
        })
        .fail(function () {
            deferred.reject.apply(this, arguments);
        });
    })
    .fail(function () {
        deferred.reject();
    });

    return deferred.promise();
};

ajax().readyState // undefined 
```

它有一个返回承诺的外部延迟。在实际执行 AJAX 请求之前，我触发 doAsyncWork() 并等待它完成。现在，虽然这可行，但问题是当其他脚本使用包装器时，因为它们无法访问 jQuery XHR 对象的属性。

有没有办法优雅地解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:01:24.030

问题是：他们为什么要这样做？您是否尝试`$.ajax()`用包装器透明地替换？这将很快变得复杂，因为您必须考虑[`jqXHR`](http://api.jquery.com/jQuery.ajax/#jqXHR).

理论上，这样的事情是可能的，但我不会称之为优雅，**也不推荐**它：

```
var ajax = function (options) {
    var deferred = $.Deferred();
    var promise = deferred.promise();

    doAsyncWork()
    .done(function (attributes) {
        $.ajax(options)
        .done(function () {
            promise.readyState = 4
            deferred.resolve.apply(this, arguments);
        })
        .fail(function () {
            promise.readyState = 4
            deferred.reject.apply(this, arguments);
        });
    })
    .fail(function () {
        deferred.reject();
    });

    promise.readyState = 0;
    return promise;
}; 
```

其他的 readystate 设置应该去适当的回调（`onreadystatechange`在 JQuery 中没有）。

**那么，该怎么做呢？**

如果其他脚本想要使用您的包装器，它们将不得不使用 Deferred API。如果出于某种原因他们确实需要访问该`jqXHR`对象，您可以像这样提供它：

```
var ajax = function (options, xhrReadyCallback) {
    var deferred = $.Deferred();

    doAsyncWork()
    .done(function (attributes) {
        var xhr = $.ajax(options)
        .done(function () {
            deferred.resolve.apply(this, arguments);
        })
        .fail(function () {
            deferred.reject.apply(this, arguments);
        });
        xhrReadyCallback(xhr);
    })
    .fail(function () {
        deferred.reject();
    });

    return deferred.promise();
}; 
```

用法：

```
ajax(options, function(xhr) {
    // now available:
    xhr.readyState;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:53:12.787

无法直接传递 jqXHR 对象，因为它在函数返回时尚未创建。

但是 - 不要忘记 jqXHR在和回调中*都*可用，分别作为第三个和第一个参数。`done``fail`

# oracle - Oracle 故障转移和 SCN 号

> ID：14724913
> 
> 赞同：3
> 
> 时间：2013-02-06T08:49:39.093
> 
> 标签：oracle, plsql

我在故障转移解决方案中有 2 台 Oracle 服务器。我还有一个使用 SCN 编号的 PL/SQL 过程。

如果在这个过程的执行过程中，一台服务器出现故障，切换到第二台服务器处理，是否意味着第二台服务器上的SCN号会相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:28:38.293

如果您的故障转移解决方案是 Oracle RAC
，并且从技术上讲，您正在使用具有单个数据库的多个 oracle 实例，那么：
由于 SCN（系统更改号）是一个数据库概念而不是 oracle 实例概念，那么在执行此过程期间，当一台服务器出现故障并且处理切换到第二台服务器时，SCN 将与 事实相同
但

> 数据库总是有事务在进行，总是。SMON 和许多其他后台进程总是在工作，数据库（除非它以只读方式打开）总是在做事务。

所以 SCN 一直
**在变化，因为你不能在 SCN 上中继的 Oracle 内部操作在实例切换过程中不会改变**

看看这个： [汤姆凯特的SCN](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:48052838748707)

# xml - XPath 搜索子项

> ID：14724916
> 
> 赞同：0
> 
> 时间：2013-02-06T08:49:44.127
> 
> 标签：xml, xpath, simplexml

我有一个这样的 XML：

```
<document>
  <FileDetails>
  </FileDetails>
  <Clients>
    <Client>
      <ClientDetails>
        <clientName>xxxx</clientName>
        <clientContact>xxxx</clientContact>
        <clientContactEmail>info@xxxx.com</clientContactEmail>
        <clientTelephone>xxxx</clientTelephone>
      </ClientDetails>
      <properties>
        <Property>
          <propertyid>Foo1</propertyid>
          <category>Commercial</category>
        </Property>
        <Property>
          <propertyid>Foo2</propertyid>
          <category>Residential</category>
        </Property>
        <Property>
          <propertyid>Foo3</propertyid>
          <category>Residential</category>
        </Property>
      </properties>
    </Client>
  </Clients>
</document> 
```

如何检索具有名为“propertyid”且值为 Foo1 的子对象的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:53:57.807

我只为 html 文档使用过 xpath，不确定是否同样适用于 xml。

我会做一些类似的事情：

```
//Property/propertyid[@text() = "Foo1"]/.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:20:34.930

使用**祖先**。

```
//Property/propertyid[text()='Foo1']/ancestor::Property 
```

这将为您提供最近的祖先属性元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T09:24:49.923

最直接的方法如下：

```
 //Property[propertyid = 'Foo1'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T09:28:45.147

您可以在 xpath 表达式中的任何级别使用谓词

```
//Property[propertyid = 'Foo1'] 
```

将为您提供具有属性id子的元素，其值恰好是`Foo1`，如果您想要子字符串匹配，您可以使用嵌套谓词

```
//Property[propertyid[contains(., 'Foo1')]] 
```

如果您知道每个`Property`人都会有*一个* `propertyid`孩子，那么您可以使用更简单的

```
//Property[contains(propertyid, 'Foo1')] 
```

但是对于可能有多个子元素的其他类似情况，嵌套方法 with`contains(., '...')`更安​​全（特别是，`contains(x, '...')`仅检查第一个子元素`x`，而`x[contains(., '...')]`检查所有子元素）。

# jquery - 如何使用 window.history.replaceState()....？

> ID：14724918
> 
> 赞同：0
> 
> 时间：2013-02-06T08:49:49.267
> 
> 标签：jquery, html, browser-history

我正在尝试更改 url 栏中的内容。现在我正在尝试使用替换状态将一些 url 发送到 url 栏。我通过单击一个按钮来调用它。浏览器控制台没有显示任何类型的错误，但没有显示 url。我更喜欢使用 Jquery。

```
 <!DOCTYPE HTML>
    <html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>          
        <script>
           $(document).ready(function() { 

        $("#123").click(function(){
        alert("in submit");
        window.history.replaceState({foo: 'bar'}, 'Nice URL Title', '/nice_url');        
                }); 
            </script>

    </head>
    <body>

    <div id="outer">
    <p>This is My Div</p>
    <button id="123" type="button" >click me</button>
    </div>

    </body>

    </html> 
```

# web-applications - 不使用 www 的博客中自定义域出现 404 错误

> ID：14724926
> 
> 赞同：2
> 
> 时间：2013-02-06T08:50:12.800
> 
> 标签：web-applications, web, dns, http-status-code-404, blogger

我的网站[http://www.thelyricsworld.com](http://www.thelyricsworld.com)是通过 godaddy 注册的。该网站托管在 blogger.com 上。我按照所有说明在 godaddy 帐户中配置 dns。

目前dns设置为：

一个记录：

thelyricsworld.com ....... 216.239.32.21

thelyricsworld.com ....... 216.239.34.21

thelyricsworld.com ....... 216.239.36.21

thelyricsworld.com ....... 216.239.38.21

CNAME 设置为：

万维网…………@

我也曾尝试将 CNAME 中的 www 设置为 ghs.google.com

我的问题是当没有前缀“www”时我无法访问该网站。即它适用于[http://www.thelyricsworld.com](http://www.thelyricsworld.com)但不适用于[http://thelyricsworld.com](http://thelyricsworld.com)。

当不使用 www 时，错误图像如下所示。

![在此处输入图像描述](../Images/085c39981604413603f5b8b306faee57.png)

我需要在 dns 配置中进行哪些更改才能使其正常工作。谷歌的答案似乎都没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:47:27.303

尝试联系 GoDaddy。我遇到了同样的问题，我给他们发了电子邮件，要求他们查看我的 DNS 设置，看看问题出在哪里。他们回了邮件，他们（Joe M.）纠正了他们在我的 DNS 设置中发现的错误（例如指向不同 IP 地址的 A 记录等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:23:45.817

我遇到了同样的问题。与谷歌官方人员进行了交谈，经过长时间的讨论后得到了解决。

您必须通过 Google Apps 重做。您必须启用重定向。

**1.**转到 Google Apps 并登录域管理。

**2.**然后点击域设置。

**3.**然后点击域名。

**4.**然后单击突出显示的单词以通过谷歌应用程序设置重定向，您应该会在 3 小时或 MAX 2 天内看到它完成（尽管在极少数情况下通常不会超过一天）。只需按照简单的英文说明进行操作在那里，你应该看到它完成了。
[http://img.ctrlv.in/5138cbea1bba2.jpg](http://img.ctrlv.in/5138cbea1bba2.jpg)如果它不起作用，请随时给我回消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T14:03:52.223

我面临同样的问题。在博客的域设置中，他们提供重定向链接。见附图：

![博主设置图片](../Images/bdec7b105254994ee030512e6eeeda37.png)

# hadoop - Hadoop JAVA MR 作业

> ID：14724929
> 
> 赞同：1
> 
> 时间：2013-02-06T08:50:24.370
> 
> 标签：hadoop

嗨，我是 Hadoop MR 的新手。我尝试编写一个简单的 MR 作业来计算节点到其目标节点的最短路径。基本上逻辑是这样的：

如果输入文本文件具有以下路径： ABCD ABD ACD BED BD BACD

输出应为：ABD BD

它只给出了节点 A 和 D 之间的最短路径以及 B 和 D 之间的最短路径。

我得到的输出是：[ABCD ABD ACD BED BD BACD]

我写了以下 MR 来做同样的事情。但它没有给出想要的答案。我在独立模式下运行 MR。

请让我知道代码有什么问题及其解决方案。非常感谢您的时间。

```
public class Shpath {

    public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, Text> {

        public void map(LongWritable key, Text value, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {
            String[] line = value.toString().split("\t");
            List<String> l = new ArrayList<String>();

            for(String lin :line){
                l.add(lin);
            }

            List <String>startEnd = new ArrayList<String>();
            for(String s : l){
                String g = s.substring(0,1)+s.substring((s.length())-1);
                if(!startEnd.contains(g))
                {
                    startEnd.add(g);
                }
            }

            List <String> uniqueStringList = new ArrayList<String>();
            java.util.Map finalMap = new HashMap();
            for(String s1 : startEnd){

                for(String s : l) {
                    if(s.startsWith(s1.substring(0,1)) && (s.endsWith(s1.substring((s1.length())-1)))){
                        uniqueStringList.add(s);
                    }
                 }
                 String smallestKey = null;
                 int minSize = Integer.MAX_VALUE;
                 String smallest = null;
                 for(String s2 : uniqueStringList){

                     if(s2.length() < minSize) {
                         minSize = s2.length();
                         smallest  = s2;
                         smallestKey  = s1;
                     }    
                     finalMap.put(s1,smallest);

                 }
                 uniqueStringList.clear();
            }output.collect(new Text(),new Text(finalMap.values().toString()));
        }
    }

    public static class Reduce extends MapReduceBase implements Reducer<Text, Text, Text, Text> {
        public void reduce(Text key, Iterator<Text> value, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {

           while (value.hasNext()){
               output.collect(new Text(key),new Text(value.next()));
           }
        }
    }

    public static void main(String[] args) throws Exception {
        JobConf conf = new JobConf(Shpath.class);
        conf.setJobName("shpath");

        conf.setOutputKeyClass(Text.class);
        conf.setOutputValueClass(Text.class);

        conf.setMapperClass(Map.class);
        conf.setCombinerClass(Reduce.class);
        conf.setReducerClass(Reduce.class);

        conf.setInputFormat(org.apache.hadoop.mapred.TextInputFormat.class);
        conf.setOutputFormat(org.apache.hadoop.mapred.TextOutputFormat.class);

        org.apache.hadoop.mapred.FileInputFormat.setInputPaths(conf, new Path(args[0]));
        org.apache.hadoop.mapred.FileOutputFormat.setOutputPath(conf, new Path(args[1]));

        JobClient.runJob(conf);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:20:16.173

我不确定，但它必须是这样的：

```
public void map(LongWritable key, Text value, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {
        Map<String , HashMap<Integer, String> > outMap = new HashMap<String, HashMap<Integer, String> >();
        HashMap<Integer, String> tempMap = new HashMap<Integer, String>();
        tempMap.put(Integer.MAX_VALUE, "");
        outMap.put("AD", tempMap);
        outMap.put("BD", tempMap);

        String[] line = value.toString().split("\t");
        for (String path : line) {
            String tempPath = new String( new char[]{path.charAt(0) , path.charAt(path.length() - 1)});
            if(outMap.containsKey(tempPath)) {
                HashMap<Integer, String> tempOutMap = outMap.get(tempPath);
                for (Iterator itr =  tempOutMap.keySet().iterator(); itr.hasNext(); ) {
                    Integer count = (Integer) itr.next();
                    if(count > tempPath.length()){
                       tempMap.remove(count);
                       tempMap.put(tempPath.length(), tempPath);
                    }
                }
            }
        }
        for (String str : outMap.keySet()) {
          output.collect(new Text(str), new Text(outMap.get(str).values().toString()));    
        }        
    }

public void reduce(Text key, Iterator<Text> value, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {
           String outString;
           int smallest = Integer.MAX_VALUE;
           while (value.hasNext()){
               String str = value.next();
               if(str.length() < smallest) {
                  outString = str;
                  smallest = str.length();
               }
           }
           output.collect(new Text(key),new Text(outString));
    } 
```

# node.js - 节点 | Mongoose - 根据多个不同的字段查找文档

> ID：14724930
> 
> 赞同：1
> 
> 时间：2013-02-06T08:50:25.507
> 
> 标签：node.js, mongodb, mongoose

文件：

```
{ "group" : "G1", "cat" : "Cat1", "desc": "Some description 1"}
{ "group" : "G1", "cat" : "Cat2", "desc": "Some description 2"}
{ "group" : "G1", "cat" : "Cat1", "desc": "Some description 3"}
{ "group" : "G1", "cat" : "Cat3", "desc": "Some description 4"}
{ "group" : "G1", "cat" : "Cat2", "desc": "Some description 4"} 
```

有人可以帮助我，使用猫鼬，如何找到具有独特`group`和的记录`cat`？

从 Mongoose API for 中`distinct`，我了解到我只能使用一个字段。但是可以`Model.distinct`用于根据两个字段查找文档吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T14:48:25.670

我不能给你一个猫鼬的具体例子，你的问题有点含糊。“但是可以使用 Model.distinct 来查找基于两个字段的文档吗？”的聚合等价物？是：

```
db.test.aggregate( { $group: { _id: { group: "$group", cat: "$cat" } } } ); 
```

返回：

```
{
    "result" : [
        {
            "_id" : {
                "group" : "G1",
                "cat" : "Cat3"
            }
        },
        {
            "_id" : {
                "group" : "G1",
                "cat" : "Cat2"
            }
        },
        {
            "_id" : {
                "group" : "G1",
                "cat" : "Cat1"
            }
        }
    ],
    "ok" : 1
} 
```

如果您想查找只出现**一次**的组/猫组合，那么您将使用：

```
db.test.aggregate(
    { $group: {
        _id: { group: "$group", cat: "$cat" }, 
        c: { $sum: 1 }, 
        doc_ids: { $addToSet: "$_id" }
    } },
    { $match : { c: 1 } }
); 
```

返回：

```
{
    "result" : [
        {
            "_id" : {
                "group" : "G1",
                "cat" : "Cat3"
            },
            "c" : 1,
            "doc_ids" : [
                ObjectId("5112699b472ac038675618f1")
            ]
        }
    ],
    "ok" : 1
} 
```

从[http://mongoosejs.com/docs/api.html#model_Model.aggregate](http://mongoosejs.com/docs/api.html#model_Model.aggregate)我了解到您可以在 Mongoose 中使用聚合框架，例如：

```
YourModel.aggregate(
    { $group: { _id: { group: "$group", cat: "$cat" } } },
    function(err, result) {
        console.log(result)
    }
) 
```

# python - 凸包和 SciPy

> ID：14724933
> 
> 赞同：6
> 
> 时间：2013-02-06T08:50:47.387
> 
> 标签：python, geometry, scipy, computational-geometry, convex-hull

我正在尝试使用 scipy (0.10.1) 进行快速破解以可视化凸包。

我可以使用以下代码获得凸包：

```
vecs = [[-0.094218, 51.478927], [-0.09348,  51.479364], [-0.094218, 51.478927],
        ...
        [-0.094218, 51.478927], [-0.094321, 51.479918], [-0.094218, 51.478927],
        [-0.094222, 51.478837], [-0.094241, 51.478388], [-0.094108, 51.478116],
        [-0.09445,  51.480279], [-0.094256, 51.478028], [-0.094326, 51.500511]]
hull = scipy.spatial.Delaunay(vecs).convex_hull 
```

结果数组如下所示：

```
[[56,  9], [16,  1], [56,  1], [55,  9], [53, 55], [53, 16]] 
```

数字是顶点索引。我的问题是**它们没有被订购**。我需要它们按 CW 或 CCW 顺序排列，以便在 KML 中轻松可视化它们。

有没有简单的方法让 scipy.spatial 计算正确的顺时针顺序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T09:25:55.887

所以这段代码似乎可以解决问题，但可能更简单......基本上，我首先从船体中收集顶点数。然后我计算平均值，重新定位数据集并按平均值的角度对其进行排序。

```
ps = set()
for x, y in hull:
    ps.add(x)
    ps.add(y)
ps = numpy.array(list(ps))
center = vecs[ps].mean(axis=0)
A = vecs[ps] - center
h = vecs[ps[numpy.argsort(numpy.arctan2(A[:,1], A[:,0]))]] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-27T17:20:33.530

在当前的开发文档（0.13.0.dev）中[`scipy.spatial.ConvexHull`](http://docs.scipy.org/doc/scipy-dev/reference/generated/scipy.spatial.ConvexHull.html#scipy.spatial.ConvexHull)，有一个`vertices`属性在 2D 中是逆时针方向的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-11T09:34:24.647

我发现了一个不错的方法，但它需要 scipy 0.11.0 (sparse.csgraph)

这是一个完整的示例，实际排序是“sort hull ...”注释后面的 2 线。

```
import numpy as np
import scipy as sp

# random point cloud and hull
X = np.random.randint(0,200,(30,2))
hull = sp.spatial.qhull.Delaunay(X).convex_hull

# sort hull indices using (sparse) adjacency matrix graph stuff
g = sp.sparse.csr_matrix((np.ones(hull.shape[0]),hull.T), shape=(hull.max()+1,)*2)
sorted_hull = sp.sparse.csgraph.depth_first_order(g,hull[0,0],directed=False)[0]

# display with matplotlib
from matplotlib import pyplot as plt
plt.plot(X[:,0],X[:,1],'.')
plt.plot(X[sorted_hull,0],X[sorted_hull,1]) 
```

# mysql - 如何可靠地插入表中，然后在多用户系统中检索自动编号

> ID：14724939
> 
> 赞同：0
> 
> 时间：2013-02-06T08:50:58.207
> 
> 标签：mysql, table-locking

假设我运行这样的插入语句：

```
 $sql = "insert into tbl_features (feature_class, feature_name, description) values (?, ?, ?)";
        $q = $pdo_conn->prepare($sql);
        $q->execute(array($_GET['new_feature_class'], $_GET['new_feature_name'], $_GET['new_description'])); 
```

然后我想检索刚刚插入的行的 id 以在另一个表中使用它。我可以使用 select max() 但我怎么能确定没有其他人做过插入，从而给两个用户相同的最大值来尝试塞进其他表？我很高兴锁定整个表，代码很少运行，不会产生明显的差异。也许我很迂腐，但我想在晚上睡觉，因为我知道我的代码是防弹的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:56:06.590

您可以使用 lastInsertId 来检索它： [http](http://php.net/manual/en/pdo.lastinsertid.php) ://php.net/manual/en/pdo.lastinsertid.php 。

# jaxb - 如何从 XMLAdapter 返回 SOAPFault？

> ID：14724941
> 
> 赞同：1
> 
> 时间：2013-02-06T08:51:08.597
> 
> 标签：jaxb, jax-ws, jax-ws-customization

我正在开发一个基于 SOAP 的 WebService (JAX-WS)，日期带有特定格式“yyyymmdd”。我的 WSDL 将日期定义为字符串，但我想在预期格式后面没有元素值时返回 SOAP 错误响应。我已经定义了一个`XMLAdapter`for 元素并在 unmarshall 方法中尝试了以下操作：

```
public XMLGregorianCalendar unmarshal(String value) throws Exception {
    if (!checkCorrectFormat(value)){
        throw new RuntimeException();
    }

    return ParseHelper.getInstance().parseStrDateToXMLDate(value);
} 
```

但是异常丢失了，WebService 继续`XMLGregorianCalendar`为未编组的元素获取空值没有问题。也许这不是实现此格式控制的正确位置...任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:01:22.050

考虑在您的 xsd 中实施此正则表达式限制：

```
 <xsd:simpleType name="MySpecialDate">
    <xsd:restriction base="xsd:string">
      <xsd:pattern value="\d{4}\d{2}\d{2}"/>
      <xsd:whiteSpace value="collapse"/>
    </xsd:restriction>
  </xsd:simpleType> 
```

\d{4}-\d{2}-\d{2} 可能不像您需要遵循公历规则那么严格。例如，2012 **13** 12 不是有效[的公历日期，因为公历中没有第 13 个月，](http://en.wikipedia.org/wiki/Gregorian_calendar#Months_of_the_year)但它仍然会通过您的正则表达式限制。但是你绝对可以通过几个谷歌搜索创建一个符合公历规则的正则表达式。

然后，让 JAXWS 为您进行模式验证。[请参阅http://www.jroller.com/gmazza/entry/soap_xml_schema_validation](http://www.jroller.com/gmazza/entry/soap_xml_schema_validation)上的“激活服务端验证”

此外，如果您必须使用 ccyymmdd 格式，则不能使用 xsd:date，在我看来，这会更好，因为 Jaxb 会从一开始就为您创建一个 java.util.Date 作为您的财产。您仍然可以使用您的自定义 ccyymmdd 格式来实现这一点（生成 java.util.Date），但需要做更多的工作。您可能会使用[jaxb 自定义绑定](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing4.html#wp148224)。像这样的东西会进入你的 .jxb 文件并与 xjc 任务一起使用：

```
<jxb:bindings node="//xs:simpleType[@name='MySpecialDate']">
  <jxb:javaType name="java.util.Date"
        parseMethod="com.company.DateConverter.parseMySpecialDate" 
        printMethod="com.wpsic.tricare.ws.converter.DateConverter.printMySpecialDate" />
</jxb:bindings> 
```

# hibernate - GWT - 合并错误消息以跨服务器和客户端使用它们

> ID：14724942
> 
> 赞同：1
> 
> 时间：2013-02-06T08:51:11.573
> 
> 标签：hibernate, gwt, error-handling, resourcebundle

我正在做一个 GWT 项目。我现在在两个地方提供错误消息 - Hibernate Validator 注释和 setter 验证。这些消息是相同的。此外，它们在 UI 方面也可能相同。

我不想在三个不同的地方编写相同的字符串，而是想将它们合并到一个资源中，并使项目可以访问该资源。

我曾想过在“共享”包中使用属性文件，然后可以使用 ResourceBundle 访问它。但是，这意味着我将不得不在实体类中实例化包，我觉得这不好。实体类本质上依赖于捆绑包。但是，我也找不到其他方法。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T08:13:03.043

我会使用纯抽象类来“隐藏”我使用 ResourceBundle 的事实。就像是 ：

```
public abstract class MyAppMessages {

    private static ResourceBundle messagesBundle = ResourceBundle.getBundle("messages", Locale.FRANCE);

    private MyAppMessages() {
        // hide the utility class constructor
    }

    public static String getMessage(String key) {
        return messagesBundle.getString(key);
    }
} 
```

当然，它并没有消除实体类和包访问之间的依赖关系，但至少你对静态资源使用了单例设计模式，并且只有一个类仍然依赖于 ResourceBundle。如果有一天您希望使用 ResourceBundle 以外的其他东西，则只需重构 1 个类。

# android - 如何检测另一个 Android 设备？

> ID：14724949
> 
> 赞同：3
> 
> 时间：2013-02-06T08:51:45.693
> 
> 标签：android, android-emulator

我有一个要求，如果我在一个 Android 设备上运行我的应用程序，然后尝试在另一个 Android 设备上运行相同的应用程序，我需要先检查它是否是另一台设备，如果是，那么我应该继续。您能否告诉我是否有任何方法可以实现这一目标？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:56:49.793

你可以使用这个：

```
telephonyManager = (TelephonyManager) getContext().getSystemService(Context.TELEPHONY_SERVICE);
telephonyManager.getDeviceId();
telephonyManager.getSimSerialNumber(); 
```

`getDeviceId`并且`getSimSerialNumber`每个设备都是唯一的，因此您可以检查此值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:50:50.407

要实现这一点，问题是这样的：

```
How can we differentiate, if we are installing app,
first time on 1st device or first time on second device.
so for that we have to use a unique key for app to run 
on each different device.
So that before saving shared pref,
we can validate the unique key for that device. 
```

现在的问题是用户将如何获得唯一密钥？因此，假设应用程序供应商将为每个设备提供密钥。但为此，应用程序应该有一些算法来验证我们提供的密钥。

但不幸的是，如果供应商提供密钥，用户也可以使用该密钥安装在另一台设备上。

**所以最终解决方案是在首次运行应用程序之前必须在某些 Web 服务上注册设备以进行激活。**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T08:57:36.863

在第一次运行时在共享首选项中设置一个标志

```
SharedPreferences preferences = getSharedPreferences("PREF_NAME", 0);
boolean onlyonce = preferences.getBoolean("FLAG_NAME", false);

if (!onlyonce ) {
   SharedPreferences.Editor editor = preferences.edit();
   editor.putBoolean("FLAG_NAME", true);
   editor.commit();
} 
```

如果用户重置应用程序，它也会被清除，这是有风险的。这会解决你的问题吗？

# png - 如何在 WTL 应用程序的工具栏中显示 PNG 图像

> ID：14724950
> 
> 赞同：1
> 
> 时间：2013-02-06T08:51:55.350
> 
> 标签：png, toolbar, wtl

我有一个遗留的 WTL 应用程序，我想使用 CToolBarCtrl [http://msdn.microsoft.com/en-us/library/tf5d6ca2(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/tf5d6ca2(v=vs.80).aspx)类在工具栏中显示 png 图像。到目前为止，BMP 图像显示在工具栏中（通过调用 LoadToolBar 函数并使工具栏在资源中可用）。

我想修改它以使用 PNG 图像。我曾尝试使用 CToolBarCtrl 类加载 png 图像，但徒劳无功。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:11:14.610

[这](http://www.viksoe.dk/code/photothing.htm)是一个将 PNG 转换为 HBITMAP 的示例：

```
#include <gdiplus.h>
#pragma comment(lib, "gdiplus.lib")

ATLINLINE HBITMAP AtlLoadGdiplusImage(ATL::_U_STRINGorID bitmap, ATL::_U_STRINGorID type = (UINT) 0)
{
   USES_CONVERSION;
   static bool s_bInitied = false;
   if( !s_bInitied ) {
      s_bInitied = true;
      Gdiplus::GdiplusStartupInput gsi;
      Gdiplus::GdiplusStartupOutput gso;
      ULONG uToken = 0;
      Gdiplus::GdiplusStartup(&uToken, &gsi, &gso);
   }
   Gdiplus::Bitmap* pBitmap = NULL;
   if( HIWORD(bitmap.m_lpstr) != NULL ) {
      // Load from filename
      pBitmap = new Gdiplus::Bitmap(T2CW(bitmap.m_lpstr)); 
   }
   else if( type.m_lpstr != NULL && type.m_lpstr != RT_BITMAP ) {
      // Loading PNG, JPG resources etc
      WTL::CResource res;
      if( !res.Load(type, bitmap) ) return NULL;
      DWORD dwSize = res.GetSize();
      HANDLE hMemory = ::GlobalAlloc(GMEM_MOVEABLE, dwSize);
      if( hMemory == NULL ) return NULL;
      ::memcpy(::GlobalLock(hMemory), res.Lock(), dwSize);
      ::GlobalUnlock(hMemory);
      IStream* pStream = NULL; 
      if( FAILED( ::CreateStreamOnHGlobal(hMemory, TRUE, &pStream) ) ) {
         ::GlobalFree(hMemory);
         return FALSE;
      }
      pBitmap = new Gdiplus::Bitmap(pStream);
      pStream->Release();
   }
   else {
      // This only loads BMP resources
      pBitmap = new Gdiplus::Bitmap(_Module.GetResourceInstance(), (LPCWSTR) (UINT) bitmap.m_lpstr);
   }
   if( pBitmap == NULL ) return NULL;
   HBITMAP hBitmap = NULL;
   pBitmap->GetHBITMAP(NULL, &hBitmap); 
   delete pBitmap;
   return hBitmap;
} 
```

# php - PHP 中 cookie 的默认生命周期是多少？

> ID：14724953
> 
> 赞同：1
> 
> 时间：2013-02-06T08:52:12.200
> 
> 标签：php, cookies

如果我没有在 cookie 中设置任何生命周期，那么 cookie 中的默认生命周期是多少？

例如

```
setcookie("cookiename", $value); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T09:03:25.700

当您通过 PHP 创建 cookie 时，其过期日期的默认值为 0，这意味着当您从手册中**关闭选项卡时 cookie 过期：**

> 如果设置为 0 或省略，cookie 将在会话结束时过期（当您的浏览器关闭时）

否则，您可以将 cookie 的生命周期设置为以秒为单位的第三个参数：

[http://www.php.net/manual/en/function.setcookie.php](http://www.php.net/manual/en/function.setcookie.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:55:08.297

从[文档](http://php.net/manual/en/function.setcookie.php)中：

> **到期**
> 
> 如果设置为 0 或省略，cookie 将在会话结束时（浏览器关闭时）过期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:56:02.690

带有示例的[cookie](http://www.w3schools.com/php/func_http_setcookie.asp)

如果未设置该参数，则 cookie 将在会话结束时（浏览器关闭时）过期..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T09:00:36.830

```
When you create a cookie via PHP Default Value is 0

If set to 0, or omitted, the cookie will expire at end of the session 
ie when the browser  closes 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T08:53:50.573

如果设置为 0 或省略，cookie 将在会话结束时（浏览器关闭时）过期。

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

# html - 占用前一个div底部的空闲空间

> ID：14724957
> 
> 赞同：0
> 
> 时间：2013-02-06T08:52:32.923
> 
> 标签：html

找到下面的html代码，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<style>
.numbercontainer{
    float:left;
    width:220px;
}
.number{
    float:left;
    width:100px;
    margin-right: 10px;
}
.head{
    float:left;
    width:100px;
    background-color:#29ABE2;
}
li {
    margin-left: 20px;
}
</style>
</head>
<body>
    <div class="numbercontainer">
        <div class="number">
            <div class="head">One</div>
            <li>1</li>
        </div> 
        <div class="number">
            <div class="head">Two</div>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
        </div> 
        <div class="number">
            <div class="head">Three</div>
            <li>1</li>
            <li>2</li>
            <li>3</li>
        </div> 
        <div class="number">
            <div class="head">Four</div>
            <li>1</li>
        </div> 
        <div class="number">
            <div class="head">Five</div>
            <li>1</li>
            <li>2</li>
        </div> 
        <div class="number">
            <div class="head">Six</div>
            <li>1</li>
            <li>2</li>
        </div>      
    </div>
</body>
</html> 
```

在这个示例中，我在每行 2 列中显示了 div(class="number") 元素。一，二在第一行，然后三，四……第一个div“一”的内容少，所以它的高度小，二的内容多，所以它的高度大。因为第二个 div 有更高的高度，所以第一行需要第二个 div 高度。现在第三个 div 进入第二行，我希望它占据第一行第一个 div 中未使用的空白空间。

我该如何为此编写样式？

问候，卡提克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:04:44.433

左列向左浮动，右列向右浮动：

[http://jsfiddle.net/2jk6U/1/](http://jsfiddle.net/2jk6U/1/)

```
.number{
    width:100px;
    margin-right: 10px;
}
.number:nth-child(odd) {
    float:left;
}
.number:nth-child(even) {
    float:right;
} 
```

如果您需要更高的跨浏览器兼容性，请将 class="even" 和 class="odd" 添加到相应的元素中。和造型：

[http://jsfiddle.net/2jk6U/2/](http://jsfiddle.net/2jk6U/2/)

```
.number{
    width:100px;
    margin-right: 10px;
}
.number.odd {
    float:left;
}
.number.even {
    float:right;
} 
```

# json - 在 BlackBerry 中将 Java 对象转换为 Json

> ID：14724963
> 
> 赞同：0
> 
> 时间：2013-02-06T08:52:40.573
> 
> 标签：json, blackberry, java-me

我正在将 java bean 对象转换为 json 对象。是否有任何适用于 BlackBerry 的库，类似于 Android 上适用于 Java 的库，可以自动进行转换？Android 库不适用于 BlackBerry。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T09:10:05.670

对于 OS 6.0 及更高版本，API 中包含 JSON ME。检查包装`org.json.me`。对于 OS 5.0 及更小版本，您必须使用第三方库。您可以从这里下载 JSON ME：

[https://github.com/upictec/org.json.me/](https://github.com/upictec/org.json.me/)

# linq - LINQ 中的部分字符串匹配

> ID：14724965
> 
> 赞同：3
> 
> 时间：2013-02-06T08:52:56.367
> 
> 标签：linq, c#-4.0

考虑以下 SQL 语句 -

```
SELECT * FROM Customers WHERE FirstName LIKE '%IS%' 
```

这将搜索名字中包含“IS”的客户，对吧？

我喜欢在 LINQ 中使用相同的语句 -

```
var names = from cust in customers where cust.FirstName ...... 
```

我无法指定该条件。任何人都可以帮我解决这个问题。

感谢您分享您的时间和智慧。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T08:54:32.777

大多数 LINQ -> SQL 翻译器会从 c# 中获取一些常规方法并将它们翻译成 SQL。Contains 是一种非常常用的翻译方法，可与 linq2sql 和 EF 一起使用

```
var names = from cust in customers 
            where cust.FirstName.Contains("IS")
            select cust; 
```

**编辑：（不区分大小写）**

```
var names = from cust in customers 
            where cust.FirstName.ToLower().Contains("is")
            select cust; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T10:39:19.790

对于不区分大小写`contains`，您可以将字符串转换为相同的大小写（小写或大写），或者如果您可以使用[String.IndexOf Method (String, StringComparison)则](http://msdn.microsoft.com/en-us/library/ms224425.aspx)**更好**

```
var names = from cust in customers 
            where cust.FirstName.IndexOf("IS",StringComparison.InvariantCultureIgnoreCase) >= 0
            select cust; 
```

尽管这种方法的性能增益可能可以忽略不计，但它可以确保进行适当的不区分大小写的比较。`StringComparison`使用枚举进行不区分大小写的字符串比较始终是一个好习惯。您可能会看到：[土耳其 İ 问题以及您应该关心的原因](http://haacked.com/archive/2012/07/05/turkish-i-problem-and-why-you-should-care.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:54:57.410

试试这个：

```
var names = from cust in customers where cust.FirstName.Contains("IS") 
```

# css - css中的标题高度

> ID：14724966
> 
> 赞同：0
> 
> 时间：2013-02-06T08:52:56.290
> 
> 标签：css

```
<div class="products_list products_slider">
<ul>
<li>
<a id="ContentPlaceHolder1_rptCategoryProducts_hlProductImg_0" class="product_image" href="/Urun/Oyuncak/woodoy-100-parca-kovali-ahsap-oyuncak-bloklar/7078">
<div class="product_info">
<h3>
<a id="ContentPlaceHolder1_rptCategoryProducts_hlProduct_0" href="/Urun/Oyuncak/woodoy-100-parca-kovali-ahsap-oyuncak-bloklar/7078"> Woody 100 Parça Kovalı Ahşap Oyuncak Bloklar</a>
</h3></div>
<div class="price_info"></li><li><li><li><li><li<li><li></ul></div> 
```

CSS：

```
 /*PRODUCTS List*/
.products_list{ margin-bottom:17px; display:inline-block; width:100%;border-bottom:solid 2px #e9e9e9;}
.products_list li{width:221px; margin-left:31px; float:left; padding-bottom:15px; }
.products_list li:first-child{ margin-left:0px;}
.products_list a.product_image{display:block;}
.products_list a.product_image img{ border:solid 2px #fff;}
.products_list li:hover img{-moz-transition:all 0.3s ease-out 0s; -webkit-transition: all 0.3s ease-out;}
.products_list .product_info{ margin-bottom:10px; padding-bottom:12px; border-bottom:solid 1px;}
.products_list .product_info h3{ font-size:14px; font-weight:normal; padding:12px 0px; height:20px; }
.products_list .product_info h3 a{color:#000000; text-decoration:none;}
.products_list .product_info small{ color:#a2a2a2; font-size:13px; line-height:16px;}
.products_list .price_info button{ float:right; background:none;border:0px; padding:0px; height:32px; line-height:100%; overflow:hidden; cursor:pointer;}
.products_list .price_info button .pr_price{ background:#544f4b;  padding:10px; color:#fff; font-size:14px; font-weight:bold; float:left; clear:both; width:83%; text-transform:uppercase;}
.products_list .price_info button .pr_add{ padding:10px; color:#fff; font-size:11px; font-weight:bold; text-transform:uppercase;  float:left; clear:both; width:83%; margin-top:0px;}
.products_list li:hover .pr_add{ margin-top:-32px;-moz-transition:all 0.3s ease-out 0s; -webkit-transition: all 0.3s ease-out;}
.products_list .price_info a{ color:#a2a2a2; text-decoration:none; font-size:11px; display:inline-block; padding-top:10px;} 
```

现在看起来像这样：http: [//imageshack.us/scaled/landing/715/29985979.jpg](http://imageshack.us/scaled/landing/715/29985979.jpg)

我应该使用什么功能才能成为直 3 线？

应该如下（我做了photoshop）：http: [//imageshack.us/photo/my-images/690/29344438.jpg/](http://imageshack.us/photo/my-images/690/29344438.jpg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:17:38.907

尝试为实际的 li 元素添加一个高度，以使它们全部对齐并具有相同大小的框。

```
.products_list li{width:221px; margin-left:31px; float:left; padding-bottom:15px; height:200px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:20:49.047

改变

*   显示到内联块，并像这样删除浮动：

    ```
    .products_list li{width:221px; margin-left:31px; display:inline-block; padding-bottom:15px; height:200px;} 
    ```

    没事的

# php - 在 php 中使用 httpcode 进行测试

> ID：14724972
> 
> 赞同：0
> 
> 时间：2013-02-06T08:53:05.990
> 
> 标签：php

我在我的应用程序 php 中使用此代码

```
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_HEADER, false); 
curl_setopt($ch, CURLOPT_NOBODY, false); // remove body 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
$data = curl_exec($ch);  
$httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch); 

if ( $httpCode == 500 ) {
  $result["status"] = 0;
  $result["go"] = 0;
  $result["message"] = "Une erreur s'est produite ";
  echo $_REQUEST["callback"] . "(" . json_encode($result) . ");" ;
  exit;
}

$data   = json_decode($data, true);
$result = array();

$result["status"]  = -1;
$result["go"]      = -1;
$result["message"] = ""; 
```

当我执行我的应用程序时，我会收到以下消息：

> Une erreur s'est 产品

我想知道在哪种情况下 httpCode 等于 500

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:56:48.150

根据您的代码，`$url`未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T08:59:16.900

我不太确定我是否理解您的问题，但如果您正在寻找各种 HTTP 状态代码的定义，请参阅[此处](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

正如 W3 引用的`500`错误：

> 服务器遇到了一个意外情况，导致它无法完成请求。

这意味着您请求的服务器上存在问题。这通常可以归因于网络服务器配置错误，或者服务器的`.htaccess`.

# wso2 - 使用 WSO2 BAM 安装 JMX 代理

> ID：14724984
> 
> 赞同：1
> 
> 时间：2013-02-06T08:53:43.433
> 
> 标签：wso2, jax-rs, wso2bam

我正在尝试从 BAM 中的 JMX 服务器监视一些 MBean。我按照[http://docs.wso2.org/wiki/display/BAM201/Setting+Up+JMX+Agent+for+BAM](http://docs.wso2.org/wiki/display/BAM201/Setting+Up+JMX+Agent+for+BAM)在 BAM 中设置 JMX 代理。我使用 WS02 BAM 2.0.1 版本并得到以下错误。

我正在尝试获取支持 JMX 代理的正确 BAM 版本。

> 由于依赖项冲突，无法完成安装。正在安装的软件：WSO2 Carbon - BAM JMX Agent Aggregate Feature 4.0.5 (org.wso2.carbon.bam.jmx.agent.feature.group 4.0.5) 当前安装的软件：WSO2 Carbon - Data Bridge - All Cassandra Features Aggregator Feature 4.0.2 (org.wso2.carbon.databridge.cassandra.feature.group 4.0.2) 一次只能安装以下其中一项：WSO2 Carbon - Data Bridge - Cassandra Defn Storage Server Feature 4.0.2 (org.wso2 .carbon.databridge.streamdefn.cassandra.server.feature.jar 4.0.2) WSO2 Carbon - 数据桥 - Cassandra Defn 存储服务器功能 4.0.5 (org.wso2.carbon.databridge.streamdefn.cassandra.server.feature.jar 4.0.5) 无法满足依赖关系：来自：WSO2 Carbon - BAM JMX 代理聚合功能 4.0.5 (org.wso2.carbon.bam.jmx.agent.feature.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:07:08.593

我认为这个与 JMX 代理相关的文档在 BAM 2.0.1 中可用是一个错误。该文档 ( [http://docs.wso2.org/wiki/display/BAM201/Setting+Up+JMX+Agent+for+BAM](http://docs.wso2.org/wiki/display/BAM201/Setting+Up+JMX+Agent+for+BAM) ) 与未来即将推出的 BAM 2.2.0 版本有关。( [http://docs.wso2.org/wiki/display/BAM220/Setting+Up+JMX+Agent+for+BAM](http://docs.wso2.org/wiki/display/BAM220/Setting+Up+JMX+Agent+for+BAM) ) JMX 代理与已发布的 BAM 版本不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:20:13.350

几天前，我能够使用以前版本的 BAM 2.0.0 设置 JMX 数据代理，并且我得到了示例工作

# clojure - 在 Datomic 中建模多个多对多关系

> ID：14724991
> 
> 赞同：12
> 
> 时间：2013-02-06T08:54:05.507
> 
> 标签：clojure, datomic

也许我还在考虑 sql，但我在为一个简单的博客编写 datomic 模式时遇到了麻烦。我不太了解该`:db/cardinality`属性及其含义。

对于这种类型的系统，我们如何对这些关系进行建模

*   系统支持多用户
*   每个用户可能有很多类别
*   每个用户可能有很多文章
*   每个类别可能有很多用户
*   每个分类可能有很多文章
*   每篇文章可能有很多评论
*   每条评论都有一个用户

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-26T02:01:26.153

查看下图并阅读[https://gist.github.com/a2ndrade/5651419](https://gist.github.com/a2ndrade/5651419)上的完整代码示例（架构、示例数据和查询） 。它应该可以帮助您了解如何在 Datomic 中对数据进行建模。

![原子架构：博客](../Images/0db86d9074288fc302d2f2f0d6509d56.png)

### 查询

请注意，某些关系没有显式建模，因为 Datomic 中的关系是双向的，并且您可以使用简单的 Datalog 查询来检索其余信息。例如，查询：

```
(d/q '[:find ?cid ?c
   :in $ ?u
   :where
   [?uid :user/username ?u]
   [?aid :article/category ?cid]
   [?aid :article/author ?uid]
   [?cid :category/name ?c]]
 (d/db conn) "john.smith") 
```

查找用户（“john.smith”）为其撰写文章的所有类别 ID 及其名称。

### 收容关系

一个重要的建模决策是让文章指向评论并将关系标记为`:db/isComponent`因为评论不应该单独存在，而是作为文章的一部分。如果文章本身被撤回，Datomic 将确保撤回与文章相关的所有评论。

### 执行业务规则

如果你想强制执行特定于应用程序的一致性规则（例如文章和评论必须有作者，评论必须有一定的长度等），你需要使用[数据库函数](http://docs.datomic.com/database-functions.html)。它们在交易者内部运行，可以原子地强制执行任意约束，中止不符合它们的交易。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-12T15:39:11.483

让我们首先看一个更简单的情况，在这种情况下，您在各种实体（在您的情况下是用户和评论）之间存在一对多关系：

```
user ---- * comment 
```

您可以选择通过让每个评论精确指向一个用户，通过属性，比如**:comment/user**类型为**:db.type/ref**来对此进行建模。

这将是一个自然模型，因为评论最多可以有一个用户。我们说基数最多为1，即。值的计数（在这种情况下是对用户的引用）不能超过 1。

这可以通过**:db/cardinality :db.cardinality/one**在模式中指定，这实际上是默认设置，因此我们不必明确说明。

请注意，由于没有类型化 Datomic 实体，因此无法*强制执行*实际基数 1，即。任何属性都可以不存在。（实体通过它们的实际属性具有隐式类型。这些的维护和解释完全取决于您的应用程序）

另一方面，如果您希望任何评论适用于多个用户，则您具有多对多关系：

```
user * ---- * comment 
```

这可以通过允许属性**:comment/user**为**:db/cardinality :db.cardinality/many**来实现，即。通过允许从评论到用户的多个引用。

这样每个用户可以被多个评论引用，并且每个评论可以引用多个用户。

您同样可以选择在用户而不是评论上引用基数。

我希望这足够清楚，可以帮助您入门:)

# ios - XCode 4 gSOAP 架构 armv7 的未定义符号

> ID：14724992
> 
> 赞同：0
> 
> 时间：2013-02-06T08:54:06.217
> 
> 标签：ios, objective-c, xcode, webservice-client, gsoap

我正在为基于 SOAP 的 Web 服务编写客户端。我正在使用 gSOAP，它在~~发布~~和调试版本中运行良好，但无法使用仪器进行分析。

弹出这些错误：

```
Undefined symbols for architecture armv7:
  "_soap_set_recv_logfile", referenced from:
      _main2 in gSOAPService.o
  "_soap_set_test_logfile", referenced from:
      _main2 in gSOAPService.o
  "_soap_set_sent_logfile", referenced from:
      _main2 in gSOAPService.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

此处引用的函数用于抑制 gSOAP 日志记录，这会大大减慢有关请求/响应序列的应用程序执行时间。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:30:23.017

`SOAP_DEBUG`这些函数仅在定义时才存在。运行 Release 或 Profile 时，此指令已关闭。

`#ifdef SOAP_DEBUG`通过在调用这些函数之前放置来解决它。

```
#ifdef SOAP_DEBUG
    soap_set_sent_logfile(soap, NULL);
    soap_set_recv_logfile(soap, NULL);
    soap_set_test_logfile(soap, NULL);
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:58:36.633

它可能会帮助你。转到**Targets**中的**构建设置**。在那里您可以找到**有效的架构**行。（删除 armv7s 只使用 armv7）。

# facebook - Facebook like 按钮链接到 FB 应用程序 - 这是如何工作的？

> ID：14724993
> 
> 赞同：0
> 
> 时间：2013-02-06T08:54:16.380
> 
> 标签：facebook, wordpress, facebook-like, facebook-opengraph

当我在我的 Facebook 帐户最近的活动中“喜欢”我的博客 ( [www.words4u.cz](http://words4u.cz) ) 中的某些帖子时，它会显示类似“Filip 喜欢在应用程序 words4u 中发布 XY”的内容。如何删除有关应用程序的部分（我只想显示“Filip likes post XY”）？

我把它放在我的 header.php 文件中：

```
 <?global $wp_query;
$Magic_no = get_permalink();
$Magic_no_postid = $wp_query->post->ID; 

//echo get_permalink(); 
$data = file_get_contents('http://graph.facebook.com/?id='. $Magic_no);

$json = $data;

$obj = json_decode($json);
$like_no = $obj->{'shares'};
$meta_values = get_post_meta($Magic_no_postid, '_my_key', true);
//$meta_values = 1;
//if ($like_no == '2') {
//   echo "Number of Likes".$meta_values;
if ($like_no == $meta_values) {

} else if (empty($meta_values)) {
add_post_meta($Magic_no_postid , '_my_key', $like_no, true);
update_post_meta($Magic_no_postid , '_my_key', $like_no, false);

} else {
update_post_meta($Magic_no_postid, '_my_key', $like_no, false);

}?> 
```

然后，当我想显示类似按钮时，我将此代码直接插入 php 文件（index.php，single.php ...）：

```
 <div class="fb_like_div">
    <iframe src="http://www.facebook.com/widgets/like.php?href=<?php the_permalink(); ?>&amp;layout=button_count&amp;show_faces=false&amp;width=95&amp;action=like&amp;font&amp;colorscheme=light&amp;height=20&amp;locale=cs_CZ" scrolling="no" frameborder="0" class="fb_like_div_inside" allowTransparency="true"></iframe>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:08:45.060

为此使用[社交](http://wordpress.org/extend/plugins/sociable/)插件，并从 wp-admin->Select Sociable Plugin->Sociable Options 中选择 facebook like social icon

并放在邮政编码的代码末尾

```
<?php if (function_exists('sociable_html')) { echo sociable_html(); } ?> 
```

我希望它会帮助你，如果你有任何进一步的问题，请使用它告诉我

# eclipse - Eclipse：不要关闭丢失的（因为网络资源不可用）文件

> ID：14724996
> 
> 赞同：7
> 
> 时间：2013-02-06T08:54:25.280
> 
> 标签：eclipse, settings

**介绍：**

我在两个不同的地方使用笔记本电脑工作，并且只在其中一个地方使用 Eclipse。我正在使用网络资源 (SAMBA) 来保留我的资源，我完全可以使用该设置，除了

**问题：**

即使我在无法访问这些资源的地方工作，我也不喜欢关闭 Eclipse。另一方面，每当我不小心打开 Eclipse 窗口时，它都会开始刷新项目，认为所有打开的文件都已删除（因为无法访问网络资源）并关闭所有编辑器。除了完全禁用自动刷新之外，我怎样才能防止这种情况发生？

**更新**

我正在寻找 Eclipse 设置或配置文件或其他任何内容中的设置，但我也会接受有争议的“不可能”的答案。

**更新2**

将标题更新为更详细，以引起对该问题的更多关注。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T10:05:22.953

我建议您简单地使用某种版本控制。:)

这样文件将始终在磁盘上，这意味着您始终可以访问它们，无论如何，您也不必使用 samba，只是让您自己更难丢失您对代码/版本所做的任何更改你有过。

如果您担心事情不会自动更新，您可以运行一个 cronjob，它会自动将您的更改提交到服务器上的 repo。（例如进入自动保存分支）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:11:04.950

**通过日食“不可能”**

当 Eclipse 重新启动时，您正在寻找已删除文件的缓存机制，为此，您需要在本地保存一些东西，或者至少在网络驱动器中复制一份（为了您的安全）。

*   **替代方法一**

因此，如果您仍然想这样做，请在网络上以您的名义创建您的代码副本，并将权利授予其他人，这样其他人就不会删除它，您可以将其用作您的工作场所。**请确保不要从工作区中删除文件**

*   **替代方法二**

您实际上可以在网络上拥有您的回购和签出代码，并直接从网络使用签出的代码进行编码。

*   **最坏的方法**

您可以继续查看网络驱动器历史记录并恢复已删除的文件并让代码在您的本地运行

**更新：**

再次，在您的情况下解决方案是不可能的

1.  当打开的项目列表中缺少文件时。当用户访问它时，会弹出一个窗口供用户保存文件。
2.  由于您不希望将任何内容保存在本地，因此**您不能选择将文件保存在本地**
3.  由于您已与网络断开连接，**因此您也无法选择保存在网络上**。

但是有可能应该以某种方式覆盖检测丢失文件的 eclipse 侦听器以使用 eclipse 可用的缓存版本。它还应该检测文件何时再次可用等等..考虑到仅为您的目的而保存在缓存中的不需要的数据，我认为这不是一个好的选择。

# java - 在 Java 中的 CPU 密集型程序中写入文件

> ID：14724998
> 
> 赞同：-1
> 
> 时间：2013-02-06T08:54:29.190
> 
> 标签：java, file-io

我正在编写一个执行数百万单位计算的 Java 程序。每个单元大约需要 1 秒，因此总体上需要几天时间才能完成。在计算每个单元之后，我想将一些结果（几行文本）写入文件。由于写入文件需要时间，我想知道我是否应该创建一个单独的线程来写入文件，这样它就不会阻塞主计算。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T09:06:28.610

我假设您在主流操作系统上运行，而不是在异国情调的操作系统上运行。如果你只是写`FileOutputStream`而不做`flush()`，数据很可能会被写入内存缓冲区，这几乎不需要时间。磁盘上的真正写入将在稍后异步发生，所以不要介意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:59:16.037

编写文件几乎不需要任何时间。与读取不同，执行写入的线程不必等待实际的磁盘 I/O 操作完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T09:14:00.710

除非写入的大小很大，否则只需在计算每个单元后将其写入磁盘，内联并稍后担心线程，也许在您真正知道您花费可测量百分比的时间写入磁盘而不是进行计算之后.

但是如果你真的必须在另一个线程中执行它，请使用固定大小的执行器：

```
// somewhere during initialisation 
ExecutorService threadPool = Executors.newFixedThreadPool(1);

// after each unit

final Unit unit = null; // your stuff
threadPool.submit( new Runnable() {
  public void run() {
    try ( FileOutputStream fos = new FileOutputStream(yourFileHere, true) ){
      fos.write( unit.toBytes() );
    } catch ( IOException e) {
      // guess you need to handle this ??
    }
  }
});

// do make sure that when you finish you call
// to wait for tasks to finish
threadPool.shutdown(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T08:57:54.497

您可以简单地使用[Java Logging API](http://docs.oracle.com/javase/7/docs/api/java/util/logging/Logger.html)或一些日志框架，例如[Log4J](http://logging.apache.org/log4j/2.x/)。

就在您的线程结束之前，它可以将一些信息写入日志文件。它是线程安全的，几乎不需要任何时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T09:12:16.190

Java 7 添加了异步 IO，因此您可以使用这些 API 来解耦计算和结果保存任务，但正如其他人指出的那样，考虑到您似乎需要的磁盘 IO 数量，这可能是矫枉过正。

# html - 如何使用 HTML 和 ASP 从 SQL 数据库中搜索和显示结果？

> ID：14724999
> 
> 赞同：0
> 
> 时间：2013-02-06T08:54:30.177
> 
> 标签：html, sql-server-2005, search, asp-classic

我目前正在创建一个带有 Web 前端的新数据库。该数据库的关键功能之一是搜索和返回结果的能力。我已经设置了数据库并用信息填充了所有表格。我已经创建了所有所需信息的视图（按照我工作的公司的指示）。我已经将页面设置为我希望它的外观，这里是代码：

```
<!-- #include file="inc.head.asp" -->
<html>

<head>
</head>

<body>
<h1><i>Find User by Name</i></h1>
<div id="displayBox" style="border: 3px solid #9C9595; height: 500px; width: 425px" class="blackBox">

<h2> Search for User </h2>

<form name="Enter New Model" method="Post" action="">

<table>
<tr><td><h3>Name: </td></h3>
<td><input type="text" name="Model" size="50"></td></tr>
<tr><td><h3>Section: </td></h3>
<td><input type="text" name="NextUpgrade" size="50"></td></tr>
<tr><td><h3>Directorate: </td></h3>
<td><input type="text" name="Stock" size="50"></td></tr>
</table>
&nbsp;      
<table>
<textarea name="UserHistory" cols="50" rows="10"></textarea></tr>
</table>

<input type="submit" name="Submit" value="Search">
</body>
<br>
<br>
<h3><a href="page.index.asp">Return Home</a></h3>
</div>
</body>

</html> 
```

所以我希望能够在 textarea 中显示结果。目前我只会使用姓氏进行搜索，但还有其他搜索要做，但是一旦我完成了这个搜索，我就可以为其他人调整它。您能给我的任何帮助将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:00:04.040

您必须根据数据库连接的类型自己弄清楚一些事情，但基本情况是这样的（未经测试）：

```
<%
    Dim strUserHistory: strUserHistory = ""
    Dim strModel : Trim(request.form("Model"))
    Dim strNextUpgrade : Trim(request.form("NextUpgrade"))
    Dim strStock : Trim(request.form("Stock"))

    If strModel<>"" OR strNextUpgrade<>"" OR strStock<>"" Then
        Dim strQuery: strQuery = "SELECT Username FROM Users where Model= """ & strModel & """ OR NextUpgrade= """ & strNextUpgrade & """ OR Stock= """ & strStock & """

        Dim objConn: Set objConn = Server.CreateObject("ADODB.Connection")
        Dim DSN: DSN="Driver={SQL Server};Server=DATABASEIP;Database=DATABASENAME;UID=USERNAME;PWD=PASSWORD"
        objConn.Open(DSN)

        Dim objRS: Set objRS = objConn.Execute(strSQL)

        If objRS.EOF Then
             strUserHistory = "No Users found"
        Else
            Do While Not objRS.EOF
                strUserHistory = strUserHistory & objRS.Fields("Username").value & "\n"
                objRS.MoveNext()
            Loop
        End If
    End If
 %> 
```

将其放在页面顶部（或从中创建一个函数）并更新您的 HTML 表单字段，例如：

```
<input type="text" name="Model" size="50" value="<%=strModel%>">
<input type="text" name="NextUpgrade" size="50" value="<%=strNextUpgrade %>">
<input type="text" name="Stock" size="50" value="<%=strStock%>">
<textarea name="UserHistory" cols="50" rows="10"><%=strUserHistory %></textarea> 
```

有点警告，如果你把它暴露给邪恶的互联网，你将不得不照顾 SQL 注入等。关于这个的一个很好的[Stackoverflow 问题，](https://stackoverflow.com/questions/149848/classic-asp-sql-injection-protection)显示了各种预防方法。

但是，这应该让你开始。