# StackOverflow 问答 15566000-15566999

# java - 作业：Java 二叉搜索树。编辑特定节点

> ID：15566005
> 
> 赞同：1
> 
> 时间：2013-03-22T08:42:01.550
> 
> 标签：java, binary-search-tree

我需要二叉搜索树的帮助。以下是节点和 BST 类：

```
public class Node {
    private int key;
    private Node parent;
    private Node leftChild;
    private Node rightChild;

    public Node(int key, Node leftChild, Node rightChild) {
        this.setKey(key);
        this.setLeftChild(leftChild);
        this.setRightChild(rightChild);
    }

    public void setKey(int key) {
        this.key = key;
    }

    public int getKey() {
        return key;
    }

    public void setParent(Node parent) {
        this.parent = parent;
    }

    public Node getParent() {
        return parent;
    }

    public void setLeftChild(Node leftChild) {
        this.leftChild = leftChild;
    }

    public Node getLeftChild() {
        return leftChild;
    }

    public void setRightChild(Node rightChild) {
        this.rightChild = rightChild;
    }

    public Node getRightChild() {
        return rightChild;
    }
}

public class BinarySearchTree {

    private Node root;

    public void insert(int key) {
        insert(new Node(key, null, null));
    }

    public void insert(Node z) {

        Node y = null;
        Node x = root;

        while (x != null) {
            y = x;

            if (z.getKey() < x.getKey()) {
                x = x.getLeftChild();
            } else {
                x = x.getRightChild();
            }
        }

        z.setParent(y);

        if (y == null) {
            root = z;
        } else if (z.getKey() < y.getKey()) {
            y.setLeftChild(z);
        } else {
            y.setRightChild(z);
        }
    }

    public void preorderTraversal() {
        preorderTraversal(root);
    }

    public void preorderTraversal(Node node) {
        if (node != null) {
            System.out.print(node.getKey() + " ");
            preorderTraversal(node.getLeftChild());
            preorderTraversal(node.getRightChild());            
        }
    }

    public void inorderTraversal() {
        inorderTraversal(root);
    }

    private void inorderTraversal(Node node) {
        if (node != null) {
            inorderTraversal(node.getLeftChild());
            System.out.print(node.getKey() + " ");
            inorderTraversal(node.getRightChild());
        }
    }

    public void postorderTraversal() {
        postorderTraversal(root);
    }

    private void postorderTraversal(Node node) {
        if (node != null) {
            postorderTraversal(node.getLeftChild());
            postorderTraversal(node.getRightChild());
            System.out.print(node.getKey() + " ");
        }
    }
} 
```

（取自[http://www.brilliantsheep.com/java-implementation-of-binary-search-tree-insert-and-traversal-methods/](http://www.brilliantsheep.com/java-implementation-of-binary-search-tree-insert-and-traversal-methods/)）这是一个相对简单的实现。但是，我需要在每个节点中存储额外的信息该节点必须包含选举的候选人和候选人的票数。有很多关于这项任务的抱怨（以及为什么必须使用 BST），但请不要讨论这个问题。

我将我的候选人编号为 1-20，并将其用作我的二进制搜索树中的键。我的问题是，使用此代码（或稍作修改的版本），如何根据其密钥更新特定节点信息？

例如。如果该人投票给候选人 4)，我如何更新候选人 4 的投票信息？

我见过一些 find 方法，但我不知道应该在哪个节点上调用它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:48:52.860

您可以在类中再添加两个属性`Node`来存储您需要的额外信息。所以你的 Node 类看起来有点像这样：

```
public class Node {

  private int key;
  private Node parent;
  private Node leftChild;
  private Node rightChild;

  public string candidateName;
  public int votes;

  // .. other properties and methods
} 
```

当您获得对候选人 4 的投票时，遍历您的树以找到键为 4 的节点，然后执行`node.votes++`

在伪代码中，它看起来像这样：

```
Node node = root;

while (node.key != 4) {
  // implement your tree traversal algorithm here
}

// when you reach here, node is the candidate you were searching
// for, or null if not found

if (node != null) {
  node.votes++;
} 
```

*确保`votes`在 Node 构造函数中初始化为 0。*

# html - 错误：看到一个开始标签，但同类型的元素已经打开

> ID：15566013
> 
> 赞同：0
> 
> 时间：2013-03-22T08:42:45.000
> 
> 标签：html, validation

我的文档类型是**html5**。我正在验证这个 HTML：

```
<a class="article-link-block" href="http://localhost/article/231">

    <img src="http://localhost/images/article-image.jpg">

    <div class="article-info">
        <a class="title" href="http://localhost/article/231">Title of the article</a>
        <a class="category" href="http://localhost/category/5">Category</a>
        <div class="views">24x</div>
        <div class="date">13.3.2013</div>
    </div>

</a> 
```

我收到此错误：

```
Error: An a start tag seen but an element of the same type was already open. 
```

我希望整体`div`成为一个锚标签（**article-link-block**），并在其中另一个锚标签到类别、用户等和其他 div（上面的代码被简化为只有文章和类别链接。）

如何在 html 验证期间摆脱此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:03:45.710

如果您希望这一切都得到验证，您将不得不选择是想要块级链接还是子链接。你不能两者兼得。从[规格](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-a-element)：

> 内容模型：透明，但不能有交互式内容后代。

[互动内容](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#interactive-content)是：

> `a` `audio`(如果`controls`属性存在) `button` `details` `embed` `iframe` `img`(如果`usemap`属性存在) `input`(如果`type`属性不处于隐藏状态) `keygen` `label` `object`(如果`usemap`属性存在) `select` `textarea` `video`(如果`controls`属性存在)

所以你的选择是：

1.  忽略验证器并保持原样（在这种情况下，您无权期望所有浏览器都以相同的方式运行）
2.  完全选择不同的标记结构
3.  `click`用普通元素和事件替换块级或子链接

# lambda - lambda 表达式错误：表达式必须是可修改的左值

> ID：15566023
> 
> 赞同：5
> 
> 时间：2013-03-22T08:43:11.177
> 
> 标签：lambda, parallel-processing, tbb

好的，代码是：

```
vector<vector<double>> imageFiltered;

// some processing codes here

parallel_for( blocked_range<unsigned>(0, imageFiltered.size()),
    [=](const blocked_range<unsigned>& r) {
        for( unsigned i = r.begin(); i != r.end(); ++i ){
            for( unsigned j = 0; j != imageFiltered[i].size(); ++j ) {
                imageFiltered[i][j] = 0; // error here：expression must be a modifiable lvalue
            }
        }
}); 
```

而且我编写了另一个类似的代码块，它工作得很好。所以，这里有点帮助。PS：parallel_for 来自 Interl TBB。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T14:39:52.760

[=] 导致 lambda 按值捕获，这意味着它制作了 imageFiltered 的副本，并且该副本被标记为“const”。将 [=] 更改为 [&] 以通过引用捕获 imageFiltered，这应该可以消除问题。

# git - 带有 Git 的 IntelliJ IDEA 记住作者

> ID：15566025
> 
> 赞同：66
> 
> 时间：2013-03-22T08:43:16.737
> 
> 标签：git, intellij-idea

我正在将 IntelliJ 与 Git 项目一起使用，并且已经正确设置了我`user.name`的`user.email`。问题是在使用 IDE 接口提交时，默认情况下未选择作者。我可以单击并获得一个下拉列表来选择它，但有时我会忘记这样做，并且每次忘记时都修改提交是很痛苦的。

有没有办法在提交时自动设置作者，因为它只有一个，它会为我省去一些麻烦？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-03-22T11:16:36.330

IntelliJ IDEA 不会在组合框中预先选择作者，这是一个[已知的外观问题](http://youtrack.jetbrains.com/issue/IDEA-63926)，但它应该默认使用 git 配置中定义的作者。

请仔细检查`user.name`并`user.email`在全局 git 配置中正确指定。

一些用户在使用 cygwin git 时提到了一个问题，当时 IDEA 可能找不到全局 git 配置。在这种情况下，如果您为本地项目配置指定用户可能会有所帮助：

```
git config --local user.name "John Doe"
git config --local user.email john@doe.com 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-10-28T16:30:51.767

转到**初始化**git 的项目。

然后启用隐藏文件夹并找到“ `.git`”并进入文件夹。

找到名为“ `config`”的文件并添加以下代码并保存。

```
[user]
      name = username
      email = username@domaim.com 
```

输入正确的用户名和相应的电子邮件。这将被永久选中，您无需再次更改。

# c# - 装箱和拆箱

> ID：15566026
> 
> 赞同：2
> 
> 时间：2013-03-22T08:43:18.850
> 
> 标签：c#, value-type, boxing

我对 C# 中的装箱和拆箱有一点疑问。

```
int i=1;
System.Int32 j = i; 
```

上面的代码可以称为拳击吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T08:44:22.243

不，那根本不是拳击。`int`只是. *_* _ `System.Int32`该代码相当于：

```
int i = 1;
int j = i; 
```

要发生装箱，必须转换为引用类型，例如

```
int i = 1;
object j = i; 
```

或者：

```
int i = 1;
IComparable j = i; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:48:17.097

只是为了稍微扩展乔恩的答案，当您调用基类的非覆盖或非虚拟方法时，也会发生装箱，例如

```
i.GetType(); //boxing occur here 
```

或传递`int`给需要引用类型的方法

```
void Foo(object obj) {}

Foo(i); //boxing, no overload takes an int 
```

在第一个示例`IL`中，您可以清楚地看到`box`说明

```
int i = 5;
i.GetType();

IL_0000:  ldc.i4.5    
IL_0001:  stloc.0     // i
IL_0002:  ldloc.0     // i
IL_0003:  box         System.Int32    //<---- boxing
IL_0008:  call        System.Object.GetType 
```

如果你不覆盖值类型中的虚方法，它们在调用它们时也会被装箱

```
enum MyEnum {}

var e = new MyEnum();
e.ToString(); //box will occur here, see IL for details

IL_0000:  ldc.i4.0    
IL_0001:  stloc.0     // e
IL_0002:  ldloc.0     // e
IL_0003:  box         UserQuery.MyEnum
IL_0008:  callvirt    System.Object.ToString 
```

与结构相同的情况，除了它们将使用`callvirt`操作码，如果需要，它将对结构进行装箱，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:45:20.393

不。 int 是一种值类型。

将值类型分配给对象时会发生装箱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:48:05.693

这不是*拳击*。

`int`是 的别名`System.Int32`。所以你的代码等同于；

```
int i = 1;
int j = i; 
```

对于拳击，应该有一个*对象*或接口的转换。像;

```
int i = 1;
object j = i; 
```

> 只需在编译时将引用视为另一种类型，即可将类类型的值转换为对象类型或由该类实现的接口类型。同样，对象类型的值或接口类型的值可以在不更改引用的情况下转换回类类型（但在这种情况下当然需要运行时类型检查）。

*   [`Boxing and Unboxing (C# Programming Guide)`](http://msdn.microsoft.com/en-us/library/yz2be5wk%28v=vs.80%29.aspx)
*   [`Boxing and unboxing`](http://msdn.microsoft.com/en-us/library/aa664476%28v=vs.71%29.aspx)

# postgresql - 在 Bluehost 共享 Postgresql 数据库上的 PostgreSql 中创建基本类型

> ID：15566029
> 
> 赞同：0
> 
> 时间：2013-03-22T08:43:25.563
> 
> 标签：postgresql, bluehost

我从另一个数据库创建了一个转储，并试图在新的 postgresql 数据库上的 bluehost 上运行它。我收到以下错误：

**import.sql:27：错误：必须是超级用户才能创建基本类型**

这来自我的 sql 文件中的一行：

**创建类型 box2d;**

谁能告诉我这是什么意思。我不能在共享主机上运行此脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:19:14.610

通常，不，您不能在共享主机上运行这种扩展。请记住，基本类型需要用不受信任的语言 C 编写内部存储、输入和输出功能（以及索引支持、分组支持等）。从安全角度来看，C 程序可以做 PostgreSQL 可以做的任何事情，包括可能监视其他用户的数据库。

由于这个和其他原因，除非您是数据库超级用户，否则您不能安装 C 模块，并且您不应该在共享主机环境中拥有这种访问权限，至少在您与其他用户共享 postgresql 集群的情况下。

# windows - Qt 5.0 程序在 QtCreator 中运行，但不在外部

> ID：15566037
> 
> 赞同：4
> 
> 时间：2013-03-22T08:44:04.497
> 
> 标签：windows, qt, qt-creator

这是上下文：

*   我在 Windows 7 x64 下用 Qt 开发了一个程序。
*   我已经升级到 Qt 5.0.1、QtCreator 2.6.1、编译器 VS2010。

现在状态：

*   我的程序在 QtCreator 中运行良好，但是当我在外面尝试时，我收到了几个错误。
*   我检查了这个主题，它给了我一些答案： [qtcreator - exe 在 qtcreator 内部运行良好，但在外部运行良好](https://stackoverflow.com/questions/14537651)
*   因此，我添加了 Qt dll，它有所帮助，不再有**Missing Libraries**消息。
*   不过，它不会在 QtCreator 之外运行（没有更多错误消息，我只是不运行）所以我添加了带有**qminimal**和**qwindows dll 的****平台**目录，它没有帮助。
*****   我还按照建议下载并添加了**libEGL.dll**，但没有结果。****

 ****我被困住了，真的可以提供一点帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T11:21:10.320

这是一个依赖问题，您的程序无法加载其依赖关系，将依赖文件（DLL文件）复制到应用程序目录是一种临时方式，这是一种非常危险的方式，您的应用程序可能会在目标机器上遇到问题，如果目标机器没有安装了正确版本的 Microsoft 运行时库，您的应用程序无法正常运行，您可以使用[Dependency Walker](http://www.dependencywalker.com/)找到您的应用程序需要哪些依赖项（DLL 文件）。

有两种方法可以解决这个问题：

第一个是在您的 installshield 中使用[Microsoft Visual C++ 2010 运行时](http://www.microsoft.com/en-us/download/details.aspx?id=5555)组件（或其他版本取决于您使用它编译的运行时库的版本），该用户可以静默安装它，或者在不使用 installshield 的情况下使用其可执行二进制文件安装，然后将 DLL 文件复制到应用程序目录并分发它。

其次是使用静态编译方法来避免此类问题，但是对于应用程序的静态编译，如果您想在目标机器上分发它，则需要商业许可证。

对于在目标机器上部署您的应用程序：

1) 将[Microsoft Visual C++ 2010 Runtime](http://www.microsoft.com/en-us/download/details.aspx?id=5555) Library 放入您的应用程序文件夹中，以便用户将其安装在他们的机器上。

`DLL files`2）从`Qt's bin`应用程序文件夹（`bin`文件夹路径：）中的文件夹复制应用程序所需的依赖项（`C:\Qt\Qt5.0.2\5.0.2\msvc2010\bin`）。

3）`imageformats`从`Qt's plugins`应用程序文件夹中的文件夹复制文件夹（如果您在应用程序中使用任何图像资源文件）。

4）`platforms`从`Qt's plugins`应用程序文件夹中的文件夹复制文件夹。

Qt的插件文件夹路径：`C:\Qt\Qt5.0.2\5.0.2\msvc2010\plugins\`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T09:45:03.513

Qt 项目站点充满了此类主题。跟踪依赖项只会通知编译时依赖项。还有一些动态加载的 DLL，你不会得到任何错误、警告或任何东西。如果您使用库存构建的 DLL（不包括 Qt5*.dll），您需要的是：

*   D3DCompiler_46.dll（有时是 D3DCompiler_43.dll）
*   libEGL.dll
*   libGLESv2.dll
*   icudt49.dll
*   icuin49.dll
*   icuuc49.dll
*   平台\qwindows.dll（或任何你的操作系统）

加上编译器运行时 dll，具体取决于您使用的构建。

如果您使用桌面 OpenGL 支持而不是 ANGLE 并且没有 webkit 构建，您可以显着减少依赖关系。然后你只需要你正在使用的平台插件和 Qt 模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-08T13:25:18.170

只需将文件 qt.conf 添加到您的应用程序目录中，内容如下

[路径]

库=./平台

然后将您可以在以下位置找到的子目录“platforms”复制到同一应用程序目录：C:\Qt\Qt5.1.1\Tools\QtCreator\bin

就这样。

这是因为 qtcore.dll 是使用 qt 安装的内部路径编译的。（我不知道为什么！）。由于 t.conf 在应用程序启动时总是由 qtcore 读取，因此“平台”中的库将被包含在内，并且该应用程序将适用于任何主机。

警告：qtcore 和平台子目录必须来自同一个 qt 安装。****

# java - 使用 paint 或 repaint 方法在 applet JAVA 上绘制线条

> ID：15566041
> 
> 赞同：-2
> 
> 时间：2013-03-22T08:44:27.547
> 
> 标签：java, swing, applet, awt, paint

我想知道是否可以在小程序上绘制线条。我正在从外部源加载小程序，但我想在光标在屏幕上的位置绘制线条。

有人可以告诉我我会怎么做吗？

这是一个例子。

```
 g.drawLine(mouse.getLocation().x - 6, mouse.getLocation().y,
            mouse.getLocation().x + 6, mouse.getLocation().y);
            g.drawLine(mouse.getLocation

            ().x, mouse.getLocation().y - 6,

            mouse.getLocation().x, mouse.getLocation().y + 6); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:36:54.513

> 我想知道是否可以在小程序上绘制线条。

你当然可以。只需在小程序中放置一个面板，添加一个鼠标运动侦听器并根据事件在该面板上绘图。

说明这一点的小例子

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.lang.reflect.InvocationTargetException;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JApplet;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestAppletDraw extends JApplet {

    public static class MyDrawPanel extends JPanel {

        private List<Point> points = new ArrayList<Point>();

        public MyDrawPanel() {
            setBackground(Color.WHITE);
            MouseAdapter listener = new MouseAdapter() {

                @Override
                public void mouseClicked(MouseEvent e) {
                    points.clear();
                    repaint();
                }

                @Override
                public void mouseMoved(MouseEvent e) {
                    points.add(e.getPoint());
                    repaint();
                }
            };
            addMouseListener(listener);
            addMouseMotionListener(listener);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(300, 300);
        }

        @Override
        protected void paintComponent(java.awt.Graphics g) {
            super.paintComponent(g);
            Point p1 = null;
            Point p2 = null;
            g.setColor(Color.BLUE);
            for (Point p : points) {
                p2 = p1;
                p1 = p;
                if (p1 != null && p2 != null) {
                    g.drawLine(p1.x, p1.y, p2.x, p2.y);
                }
            }
        }
    }

    protected void initUI() {
        add(new MyDrawPanel());
        validate();
    }

    @Override
    public void init() {
        super.init();
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    initUI();
                }
            });
        } catch (InvocationTargetException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

} 
```

注意：使用缓冲图像而不是存储点可能在很长一段时间内更具可扩展性（否则点列表可能会变得巨大），但需要注意面板尺寸的增加。

# java - 如何在java中使用XPath解析这个xml？

> ID：15566043
> 
> 赞同：0
> 
> 时间：2013-03-22T08:44:29.773
> 
> 标签：java, xml, xpath, xml-namespaces

`<?xml version="1.0" encoding="utf-8"?> <double xmlns="http://www.somewebsite.com/">2.0</double>`

我在使用 XPath 1.0 解析它时遇到了一些麻烦。

这就是我所做的：

`XPath xpath = XPath.newInstance("/double"); Element returnElement = (Element) xpath.selectSingleNode(doc);`

返回元素为空，但它应该是 2.0。

注意：它应该使用 XPath 1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:46:31.320

该`double`元素位于`http://www.somewebsite.com/`命名空间中。将命名空间映射到前缀（例如`foo`）并使用限定表达式（例如`/foo:double`）解析。

使用标准 API：

```
String xml = "<double xmlns='http://www.somewebsite.com/'>2.0</double>";
Reader reader = new StringReader(xml);
XPath xpath = XPathFactory.newInstance()
                          .newXPath();
NamespaceContext context = new NamespaceContextMap("foo", "http://www.somewebsite.com/");
xpath.setNamespaceContext(context);
String value = xpath.evaluate("/foo:double", new InputSource(reader));
System.out.println(value); 
```

您可以在[我的博客上找到](http://illegalargumentexception.blogspot.co.uk/2009/05/java-using-xpath-with-namespaces-and.html)[NamespaceContext](http://docs.oracle.com/javase/7/docs/api/javax/xml/namespace/NamespaceContext.html)的示例实现。

# xml - 是否有一些工具可以在 Mac OS（或 >=XCode 4.5）中将 wbxml 转换为 xml

> ID：15566049
> 
> 赞同：0
> 
> 时间：2013-03-22T08:44:49.610
> 
> 标签：xml, macos, wbxml

是在 MacOS 中从 wbxml 转换为 xml 的工具，还是为 >=XCode 4.5 提供对话的简单项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:47:10.630

没有内置任何内容，但您可以安装[wbxml gem](http://wbxml.rubyforge.org)或[XML::WBXML](http://search.cpan.org/~glasser/XML-WBXML-0.03/lib/XML/WBXML.pm)并使用其中之一转换文件。

# android - 检查电话号码是否存在于android的联系人列表中

> ID：15566050
> 
> 赞同：5
> 
> 时间：2013-03-22T08:44:49.627
> 
> 标签：android, android-intent

我试图检查联系人列表中存在的号码，我使用下面的代码，但我总是在这一行得到错误

```
 Cursor cur = this.getContentResolver().query(lookupUri,mPhoneNumberProjection, null, null, null); 
```

谁能帮我找出问题所在，我已经允许在清单中阅读我的联系人

```
 public String getContactName(String number)
{
    String name = null;
    Uri lookupUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));
    String[] mPhoneNumberProjection = { PhoneLookup._ID, PhoneLookup.NUMBER, PhoneLookup.DISPLAY_NAME };
    Cursor cur = this.getContentResolver().query(lookupUri,mPhoneNumberProjection, null, null, null);
    try 
    {
       if (cur.moveToFirst())
       {
           name = cur.getString(cur.getColumnIndex(PhoneLookup.DISPLAY_NAME));
           return name;
       }
    }
    finally 
    {
    if (cur != null)
       cur.close();
    }
    return "unknown number";
} 
```

这是我的错误日志！![错误日志](../Images/09c563ac1defd6fb6e13e6cbcd98df99.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T09:08:46.603

试试这个代码：（使用上下文）

```
public boolean contactExists(Context context, String number) {
    /// number is the phone number
    Uri lookupUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number));
    String[] mPhoneNumberProjection = { PhoneLookup._ID, PhoneLookup.NUMBER, PhoneLookup.DISPLAY_NAME };
    Cursor cur = context.getContentResolver().query(lookupUri,mPhoneNumberProjection, null, null, null);
    try {
        if (cur.moveToFirst()) {
            return true;
        }
    }
    finally {
        if (cur != null){
            cur.close();
        }
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-05T18:20:46.463

这个对我有用。处理 NullPointerException。

```
public boolean contactExists(Context context, String number) {
    if (number != null) {
        ContentResolver cr = context.getContentResolver();
        Cursor curContacts = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);

        while (curContacts.moveToNext()) {
            String contactNumber = curContacts.getString(curContacts.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            if (number.equals(contactNumber)) {
                return true;
            }
        }
        return false;
    } else {
        return false;
    }
} 
```

# c# - NHibernate 什么时候执行我的查询？

> ID：15566053
> 
> 赞同：2
> 
> 时间：2013-03-22T08:44:51.653
> 
> 标签：c#, linq, nhibernate

我正在尝试为我的 NHibernate 数据访问编写一个通用存储库。该`Get<T>()`方法应该能够采用一个可选的谓词，该谓词应该包含在查询中——也就是说，NHibernate 应该在 SQL 中生成 WHERE 子句。

```
 public virtual IList<T> Get(Func<T, bool> predicate = null)
    {
        // Open NHibernate Session
        using (var session = NHibernateHelper.OpenSession())
            return (predicate != null
                       ? session.Query<T>().Where(predicate)
                       : session.Query<T>()).ToList();

    } 
```

当我传入一个谓词并观察 NH 生成的 SQL 语句时，我看不到 where 子句。

NHibernate 什么时候执行查询？打电话的时候对`.Query<T>()`吗？如果是这样，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T08:56:56.367

查询应由 call 执行`ToList()`。

WHERE 子句未包含在您的 sql 语句中的情况是您需要将 an 传递`Expression<Func<T,bool>>`给您的方法。

```
public virtual IList<T> Get(Expression<Func<T, bool>> predicate = null)
    {
        // Open NHibernate Session
        using (var session = NHibernateHelper.OpenSession())
            return (predicate != null
                       ? session.Query<T>().Where(predicate)
                       : session.Query<T>()).ToList();

    } 
```

扩展方法在[Enumerable](http://msdn.microsoft.com/en-us/library/bb534803.aspx)`Where(Func<T,bool>>)`上定义，以便查询加载所有数据，然后在内存中应用 WHERE 过滤器。

扩展方法是在[Queryable](http://msdn.microsoft.com/en-us/library/bb535040.aspx)`Where(Expression<Func<T,bool>>)`上定义的，因此查询提供程序 (NHibernate) 可以构建一个 sql 语句，包括在数据源上执行的 WHERE 条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:21:44.683

由于@Jehof 给了你正确的解释，我只想添加单独的注释 - 你不应该`IList<T>`从你的存储库方法返回，因为任何其他 linq 操作都将在内存中而不是在数据库中执行。假设以下调用

```
var data = repository.Get<Company>(c=>c.Name.StartsWith("MyCompany"));
... some other operations / method calls etc.
var companySubset = data.Where(...); 
```

所以现在如果你`IList<T> Get<T>()`降低了性能，但`IQueryable<T> Get<T>`你仍然会将第二个 Where() 附加到数据库查询中。

Of course not all linq operations are supported by `IQueryable` like (join , last ) and this is the only place to call `ToList()` extension to evaluate expression.

# c# - 如何检测虚拟键盘开关以及用户在哪台计算机上打字？

> ID：15566056
> 
> 赞同：0
> 
> 时间：2013-03-22T08:45:10.213
> 
> 标签：c#, keyboard, virtualization

虚拟键盘切换程序（如 Kavoom 或无边框鼠标）允许您通过单个键盘控制多台 PC。

我使用全局键盘挂钩检测键入的击键：如何检测用户是在本地计算机内部的应用程序中还是在远程计算机中键入？

谢谢

# c# - 基于单选按钮选择在运行时更改图像

> ID：15566057
> 
> 赞同：1
> 
> 时间：2013-03-22T08:45:12.143
> 
> 标签：c#, wpf, xaml, imagesource

我需要在运行时根据`RadioButton`用户单击更改背景图像。我在 Visual Studio 的 WPF 项目中执行此操作，我需要将代码放在`Checked`xaml.cs 文件中的事件中

我有一个名为 imgBackground 的图像控件，它的源集合中有 6 个图像，这些图像列在解决方案资源管理器的图像文件夹中。

我试过了：

```
this.imgBackground.Source = "filename.jpg"; 
```

带引号和不带引号，以及各种路径（我尝试了太多不同的变体，无法在此处全部列出）并且没有任何效果 - 我尝试的所有内容都在编辑器中出现错误，甚至在我尝试构建和运行任何东西（给出的错误取决于我当时正在尝试的内容）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:52:28.010

如果您使用相对路径作为文件名，例如

```
this.imgBackground.Source = "filename.jpg"; 
```

那么这些文件必须与程序的 .exe 位于同一目录中。一种解决方法是使用绝对路径，例如

```
this.imgBackground.Source = @"C:\MyFolder\MyProject\filename.jpg"; 
```

或者，甚至进一步使用 WPF 的打包机制或将您的图像作为资源打包到您的程序集中。看看[这个](https://stackoverflow.com/questions/5552618/how-to-reference-image-resources-in-xaml)线程。

编辑：

为了您的澄清：

`Source`-property 需要一个`System.Windows.Media.ImageSource`-object，您必须提供它。像这样做：

```
BitmapImage bi3 = new BitmapImage();
bi3.BeginInit();
bi3.UriSource = new Uri("filename.jpg", UriKind.Relative);
bi3.EndInit();
this.imgBackground.Source = bi3; 
```

请在此处参考[此](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.source.aspx)文档。

# matlab - 究竟什么是边缘密度？

> ID：15566063
> 
> 赞同：3
> 
> 时间：2013-03-22T08:45:23.973
> 
> 标签：matlab, opencv, image-processing

我有点混淆边缘密度的含义。从方程，

```
edge density = sum(x=1,w) sum(y=1,h) e(x,y)/N 
```

其中e是边缘图图像（（x，y）处垂直边缘的大小），有两个版本的N。第一个版本-N = wxh（宽度x高度）第二个版本-N =非零垂直边缘像素的数量

我不明白的是如何计算边缘密度？它只是白边像素的总和吗？

**已编辑**

大家好，从我阅读@Gilgamesh给出的论文中了解到，N是该区域的面积，宽度乘以它的高度，但从给出的答案看来存在冲突，其中N指的是非白色像素的数量（黑色像素）。那么，哪个是正确的呢？这是 N 值[计算边缘密度](http://www.google.com.my/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://digital.liby.waikato.ac.nz/conferences/ivcnz07/papers/ivcnz07-paper42.pdf&ei=jhFNUcH_DJGIrAeH-oBI&usg=AFQjCNEM3r1UfPTFiBGPfWGi_w-Wy0F8pg&bvm=bv.44158598,d.bmk)的另一个参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:25:46.993

基本上，边缘密度实际上只是（局部）平均密度，您可以在二值化图像上计算，或者更常见的是在灰度图像上计算。

是的，在大多数情况下，它基本上只是对子图像中的 x 和 y 坐标求和，请参见此处的等式 (1)

[http://ro.uow.edu.au/cgi/viewcontent.cgi?article=1517&context=infopapers](http://ro.uow.edu.au/cgi/viewcontent.cgi?article=1517&context=infopapers)

然后平均。

问候，G。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-26T05:13:38.673

From what I understand about edge density, it is defined as ![formula](../Images/12fae169d8c0f041c9413b8ad63a1009.png) where ![W](../Images/9ee32409618c4257022205212df8a0f1.png) are the white pixels and [![N](../Images/61aeb76c97b9b34127274760e2e51b0e.png)](https://i.stack.imgur.com/XONjD.png) is the total number of pixels i.e. ![widthxheight](../Images/4ea9d56b0f911f1a8bb2f3ad3aed06e4.png).

![N](../Images/61aeb76c97b9b34127274760e2e51b0e.png) cannot be the number of black pixels because the number could be arbitrary, ranging from zero to all pixels and the range of edge density will then be ![zti](../Images/85374809cf445ca090d76df4fecec367.png).

When ![N](../Images/61aeb76c97b9b34127274760e2e51b0e.png) is the area, the range will be ![zto](../Images/802b1cd097c899623780e7bf897ea6d5.png) which portrays just what we want, the places where edges are dense (or sparse depending on your requirement).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:10:33.873

边缘图是梯度幅值的图（即梯度向量的长度）。因此，边缘密度是邻域上梯度幅度的平均值。如果您有一个二进制边缘图，其中 0 表示无边缘，1 表示边缘（这可以通过对梯度幅度进行阈值化来获得），那么边缘密度就是边缘/非边缘像素的比率。

# php - PHP：这是使用循环创建数组的正确方法吗？

> ID：15566066
> 
> 赞同：0
> 
> 时间：2013-03-22T08:45:52.417
> 
> 标签：php, arrays, json, for-loop

我正在这个电子商务网站上工作，我正在尝试创建一个 JSON 数组，其中包含 PHP 中的购物车项目。

到目前为止，我有：

```
for ($i=0; $i < count($_SESSION['cart']); $i++) {
  $prodid = $_SESSION['cart'][$i][0];
  $sizeId = $_SESSION['cart'][$i][1];
  $colorId = $_SESSION['cart'][$i][2];
  $qty = $_SESSION['cart'][$i][3];
  $inslagning = $_SESSION['cart'][$i][4];
  $wrapCost += ($inslagning == 'YES' ? 20 : 0);
  $row = get_product_buy($prodid, $sizeId, $colorId);
  $prodname = $row['prodname'];
  $color = $row['color'];
  $size = $row['size'];
  $prodCatid  = $row['catid'];
  $image = $row['biggerimage'];
  $box = $row['box_number'];

  for ($j=0;$j<$qty;$j++) {
    $cart = array(
        'reference' => '123456789',
        'name' => $prodname,
        'quantity' => $qty,
        'unit_price' => $price,
        'discount_rate' => 0,
        'tax_rate' => 2500
    );
  }
} 
```

我知道我在循环中有 $cart var，这可能是错误的。最终结果应该是这样的：

```
$cart = array(
    array(
        'reference' => '123456789',
        'name' => 'Klarna t-shirt',
        'quantity' => 1,
        'unit_price' => $att_betala * 100,
        'discount_rate' => 0,
        'tax_rate' => 2500
    ),
    array(
        'reference' => '123456789',
        'name' => 'Klarna t-shirt',
        'quantity' => 1,
        'unit_price' => $att_betala * 100,
        'discount_rate' => 0,
        'tax_rate' => 2500
    )
); 
```

感谢所有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T08:50:06.460

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:47:39.863

像这样使用

```
$cart[] = array(
    'reference' => '123456789',
    'name' => $prodname,
    'quantity' => $qty,
    'unit_price' => $price,
    'discount_rate' => 0,
    'tax_rate' => 2500
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:51:28.567

Try Using

```
for ($j=0;$j<$qty;$j++) {
$cart[] = array(
    'reference' => '123456789',
    'name' => $prodname,
    'quantity' => $qty,
    'unit_price' => $price,
    'discount_rate' => 0,
    'tax_rate' => 2500
);
}

$json_enc  = json_encode($cart); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:52:19.010

You are not appending to the $cart variable, you are overwriting it on every pass of the loop.

Use the `[]` syntax to append to an array:

```
$cart[]=... 
```

Also, its good to declare an empty array at the top of the code:

```
$cart=array(); 
```

# c# - 在 MVC 应用程序中显示/隐藏文本

> ID：15566071
> 
> 赞同：1
> 
> 时间：2013-03-22T08:45:59.143
> 
> 标签：c#, jquery, asp.net-mvc

我有一个使用引导响应 CSS 的 MVC 应用程序。在应用程序中，我有一个显示零到多行的视图，如下所示：

```
@model List<SearchItem>

<section>
    @foreach (SeachItem searchitem in @Model)
    {
        @Html.Partial("Searchitem", searchitem)
    }
</section> 
```

在 SearchItem 中显示了很多字段。（我可能应该对每个领域都有看法，但这是另一个问题）。像这样：

```
foreach (string descShort in descriptions)
{
     <div class="row-fluid">
          <div class="span2">@header</div>
          <div class="span10">@descShort</div>
     </div>
} 
```

有时这些“描述”字段真的很长，然后我选择只显示前 20 个字符。但我希望用户可以选择查看整个字段，如果她愿意的话。我有两个字段：descLong 和 descShort，现在我只显示 descShort（缩短的字段）。但是通过单击鼠标，我想隐藏 descShort 字段并显示 descLong 。

所以我打算做这样的事情：

[http://www.mkyong.com/jquery/jquery-show-and-hide-example/](http://www.mkyong.com/jquery/jquery-show-and-hide-example/)

但是我在使用这种方法时遇到了一些问题，因为理论上我可以拥有数十万个应该是可隐藏/可显示的字段，而不仅仅是示例中的一个（“p”）。

**那么，我最好的方法是什么？**

我是否应该将每个“描述”放在自己的视图中并将 descShort 和 descLong 传递给该视图？如果是这样，我如何将这两个字符串传递给该视图，然后我可以将 jQuery 示例放在该视图中并调用显示/隐藏字段“<p>”，即使我可能调用了数千个字段，它也会起作用“<p>” 整个页面呈现后？

或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:53:41.183

我选择“有没有更好的方法”选项。我的建议是使用 CSS 来限制显示的文本，并使用 CSS 类的简单切换在完整版和短版之间切换：

这是我的示例，您可以[看到它在 JS Fiddle 上运行](http://jsfiddle.net/fapAc/)：

*HTML*

```
<div class="description">
    Imagine some really long description here. It is really long. Imagine some really long description here. It is really long. Imagine some really long description here. It is really long. Imagine some really long description here. It is really long. Imagine some really long description here. It is really long. 
</div> 
```

*CSS*

```
.description {
    height: 2.5em;
    overflow: hidden;
    text-overflow: ellipsis;
}

.full {
    height: auto;
} 
```

*jQuery*

```
$('.description').click( function () {
   $(this).toggleClass('full'); 
}); 
```

您可以扩展此示例以显示一个可见指示器，用户可以采取行动查看更多信息 - 或者您可以在悬停时执行此操作等 - 这只是概念。

# python - Webdriver 能以 Selenium IDE 的速度运行吗？

> ID：15566081
> 
> 赞同：1
> 
> 时间：2013-03-22T08:46:39.683
> 
> 标签：python, selenium, webdriver

我正在使用自定义测试运行程序在 TeamCity 中执行 Selenium 测试。最新的特性是能够在 IDE 中创建测试并将它们保存在 html 中，然后测试运行程序将在 Python 中运行。

将 Python 测试与 IDE 测试进行比较时，最直接的区别是 IDE 的执行速度是最快的。我了解`set_speed()`我在 Selenium 中看到的功能前段时间已从 WebDriver 中弃用，但有没有办法更快地运行 WebDriver 测试？

添加更多测试的主要缺点将是执行时间（显然），因此在可能的情况下加快速度会很棒。

还有一些测试运行器的代码......

```
class BPTSeleniumTestCase(test.TransactionTestCase):
    @classmethod
    def setUpClass(cls):
        cls.driver = webdriver.Firefox() # can you set speed here somehow?
        super(BPTSeleniumTestCase, cls).setUpClass()

    def setUp(self):
        self.live_server_url = settings.BASE_URL
        self.driver.live_server_url = self.live_server_url
        self.wait = Wait(self.driver) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:11:33.290

没有可用于加速 WebDriver 执行的设置。WebDriver 的执行速度也因使用的浏览器驱动程序和编程语言而异。我试图探索 FireFoxDriver 配置文件设置以提高执行速度，但没有可用的设置。

# c++ - tcmalloc 的分片

> ID：15566083
> 
> 赞同：3
> 
> 时间：2013-03-22T08:46:55.267
> 
> 标签：c++, linux, glibc, fragmentation, tcmalloc

我们的软件实现了一个actor模型系统，我们经常分配/释放小对象。我非常确定每个对象都会被销毁而不会发生内存泄漏。（我已经使用 valgrind 和 tcmalloc 工具检查了我的软件中的内存泄漏。没有发现泄漏。）

当我们改用 tcmalloc 替换 glibc 中的 malloc 时，我们发现内存不断增加，直到进程被 OOM（Out of Memory）杀死。然后我们发现 glibc 也有同样的问题，但是增长率低于 tcmalloc。

我使用 malloc_stats() 来显示内存信息

首次执行后（顶部显示 0.96G）'

* * *

*   MALLOC：960110592（915.6 MB）堆大小
*   MALLOC：15886016 (15.2 MB) 应用程序正在使用的字节数
*   MALLOC：907419648（865.4 MB）页堆中的可用字节
*   MALLOC: 0 ( 0.0 MB) 在页堆中未映射的字节
*   MALLOC：27121208（25.9 MB）中央缓存中的可用字节
*   MALLOC：151040（0.1 MB）传输缓存中的可用字节
*   MALLOC：9532680（9.1 MB）线程缓存中的可用字节
*   MALLOC：14275 跨度正在使用中
*   MALLOC：27 个线程堆正在使用中
*   MALLOC: 7602176 (7.2 MB) 已分配元数据

* * *

## 第 5 次相同执行后（顶部显示 1.2G）

*   MALLOC：1173131264（1118.8 MB）堆大小
*   MALLOC：18001048（17.2 MB）应用程序正在使用的字节
*   MALLOC：1082458112（1032.3 MB）页堆中的可用字节
*   MALLOC：21168128（20.2 MB）字节未映射到页堆中
*   MALLOC：37992328（36.2 MB）中央缓存中的可用字节
*   MALLOC：252928（0.2 MB）传输缓存中的可用字节
*   MALLOC：13258720（12.6 MB）线程缓存中的可用字节
*   MALLOC: 17651 使用中的跨度
*   MALLOC：27 个线程堆正在使用中
*   MALLOC: 8126464 (7.8 MB) 已分配元数据

* * *

我们可以从这样的数据中看出。在第 5 次相同的行为之后，我们的软件中只使用了 17.2。但是 tcmalloc 持有 1.1G 内存，不返回系统。当然，tcmalloc 持有那些内存也没关系。但是当我们的程序被OOM杀死时它会不断增加（实际使用的内存小于1G）。

我们怀疑它与堆碎片有关。有人有经验可以和我们分享吗？我想我的情况和 [https://bugzilla.redhat.com/show_bug.cgi?id=843478一样](https://bugzilla.redhat.com/show_bug.cgi?id=843478)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:01:10.283

我建议使用[Boehm 的保守 GC](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)并在您的应用程序中使用`GC_MALLOC`and`GC_MALLOC_ATOMIC`而不是（而不是，但您甚至可以避免任何显式-ing，GC 会这样做）。或者也许使用[valgrind](http://valgrind.org/)（使用系统 Glibc malloc）来查找内存泄漏。如果使用 Boehm 的 GC，不要忘记显式清除分配的内存区域。`malloc``GC_FREE``free``free`

最好确保您的许多小对象具有粗粒度的大小。例如，分配 8 或 12 或 16 个字的对象，而不是 8、9、10、11、12、13、14、15 或 16 个字的对象...例如，您可能只分配大小为 2 或3 次方 2。

另外，不要忘记您可以使用[setrlimit(2)](http://man7.org/linux/man-pages/man2/setrlimit.2.html)来限制内存空间，例如使用`ulimit`在终端中运行的内置 bash。这应该可以简化测试。此外，也许使用`pmap`or`/proc/$(pidof yourapp)/maps`可以帮助您了解所使用的地址空间。

PS。Boehm GC 和任何类型的`malloc`（包括`tcmalloc`或 Glibc `malloc`）都无法解决内存碎片问题。如果您怀疑有碎片，您必须在地址空间中移动内存区域（即您可能想要编写自己的精确、复制、分代 GC 或重新使用一些现有的 GC）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:08:54.820

tcmalloc 尝试做一些聪明的事情来预测您的内存使用情况，但即使在您释放内存之后，将内存释放回系统也不是很好。实际上，它可能驻留在内存中并导致 OOM。

做这个 ：

MallocExtension::instance()->ReleaseFreeMemory();

当您的应用程序预期释放了它预计不会很快使用的内存时。

查看“将内存释放回系统”部分了解更多信息 [http://google-perftools.googlecode.com/svn/trunk/doc/tcmalloc.html](http://google-perftools.googlecode.com/svn/trunk/doc/tcmalloc.html)

还有其他方法，例如设置释放速率，但作为开始，您可以将其洒在代码中并检查驻留内存是否按预期下降。

# sql - SQL：如何通过单个查询获取每天的 AVG

> ID：15566084
> 
> 赞同：0
> 
> 时间：2013-03-22T08:47:02.850
> 
> 标签：sql

我想得到每天的平均值。例如，我想在“20130511”上获得 4 而不是获得 3 和 5。如何在单个查询中做到这一点？（不是硬编码）

```
Select Val from Table 1 where?????????? 
```

**表格1 ：**

```
日期值
----------------

20130511 | 3

20130511 | 5

20130512 | 5

20130512 | 1

20130512 | 2

20130512 | 6

20130512 | 2

20130513 | 2

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:48:49.913

您必须对日期进行分组

```
SELECT Date, AVG(Val) FROM TABLE GROUP BY Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T08:51:09.390

您可以按日期分组并一次性完成

```
SELECT DATE, SUM(VALUE)/COUNT(*) AS AVERAGE 
FROM TABLE 
GROUP BY DATE 
```

# wordpress - Wordpress 按多个元值对帖子进行排序

> ID：15566085
> 
> 赞同：1
> 
> 时间：2013-03-22T08:47:08.123
> 
> 标签：wordpress, loops, metadata

我想首先按“时间”元值对我的帖子进行排序，然后按“点击次数”元值对我的帖子进行排序。因此，如果 2 个帖子具有相同的“时间”，则点击次数较少的帖子将排在第一位。

```
 $args=array(
    'post_type' => 'post',
    'category_name' => 'players',
    'order' => 'ASC', 
    'meta_key' => 'times',
    'posts_per_page'=> '15',
    'orderby' => 'meta_value_num',
    'offset' => $offsetnumber

    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:49:45.077

您可以连接到`posts_orderby`过滤器以自定义 sql 查询以按多个字段排序。

这里有一些细节：

[http://jeffgran.com/262/blog/wordpress-sort-posts-by-multiple-fields-part-ii](http://jeffgran.com/262/blog/wordpress-sort-posts-by-multiple-fields-part-ii)

# plsql - 如何插入nextval以在for循环内触发

> ID：15566087
> 
> 赞同：0
> 
> 时间：2013-03-22T08:47:14.217
> 
> 标签：plsql, unique-constraint, nextval, database-trigger

这是触发器的代码，它有一个 for 循环。当触发器被触发（插入或更新）时，另一个表数据必须包含它是 MICL_SUP

```
 OPEN  projMgrsCursor;
        LOOP
        FETCH projMgrsCursor INTO projMgr;  
        select micl_sup_id_seq.nextval into  SUPID from dual;
        insert into MICL_SUP VALUES ((SUPID), (SELECT SYSDATE FROM DUAL),                             :NEW.ENTRYADDEDBY_EMP_NO, 3000, 0,projMgr, NULL,:NEW.EMP_NO);
       END LOOP;    

      CLOSE projMgrsCursor; 
```

这是表结构。`Sup_ID`主键和唯一键。我无法对表结构进行任何更改

```
SUP_ID  -primary key             
ASSIGNED_DATE            
ASSIGNED_BY_EMP_NO          
AMOUNT_LIMIT            
IS_OVVERRIDDEN      
SUP_EMP_NO          
RTD_EMP     
EMP_NO 
```

要输入我使用的 sup_ID，`select micl_sup_id_seq.nextval into SUPID from dual;` 但是当我运行此代码时出现错误 `"RA-00001: unique constraint violated"`（这不是编译错误）还有其他方法可以添加`sup_ID`吗？我哪里出错了？

这个问题与这个触发器[PlSQL触发器错误ORA-0000 ORA-06512有关：](https://stackoverflow.com/questions/15496584/plsql-trigger-error-ora-0000-ora-06512)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:01:24.397

`micl_sup_id_seq.nextval`为什么不在光标 中包含计算？

```
cursor  projMgrsCursor is 
  select b.BU_MEMBER_ID, micl_sup_id_seq.nextval SUPID
  from ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T02:28:44.300

尝试将您的代码重写为：

```
DECLARE
  nSupid   NUMBER;
  projMgr  VARCHAR2(32767);
BEGIN
  OPEN  projMgrsCursor;

  LOOP
    FETCH projMgrsCursor INTO projMgr;
    EXIT WHEN projMgrsCursor%NOTFOUND;

    select micl_sup_id_seq.nextval into nSUPID from dual;

    insert into MICL_SUP 
      (SUPID, ASSIGNED_DATE, ASSIGNED_BY_EMP_NO,   AMOUNT_LIMIT,
       IS_OVERRIDDEN, SUP_EMP_NO, RTD_EMP, EMP_NO)
    VALUES
      (nSupid, SYSDATE,  :NEW.ENTRYADDEDBY_EMP_NO, 3000,
       0,              projMgr,   NULL,    :NEW.EMP_NO);
   END LOOP;    

  CLOSE projMgrsCursor;

  DBMS_OUTPUT.PUT_LINE('Successful completion');
EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE('Exception: ' || SQLCODE || '  ' || SQLERRM);
    RAISE;
END; 
```

分享和享受。

# c# - 正则表达式匹配一段文本中的一个部分

> ID：15566089
> 
> 赞同：1
> 
> 时间：2013-03-22T08:47:24.060
> 
> 标签：c#, regex, text

我已经考虑了好几个小时了，但我还没有想出一个有效的正则表达式:(

我有文本段落，其中一些行是部分标题，这些是我想要匹配的。

每个部分都以数字开头，数字可以是 1 或 1.1 或 1.1.1 或 1.1.1.1 等。在一个或多个空格或制表符之后，部分标题以 CR 或 LF 开始和结束。

例如

3.4.1 关于如何构建正则表达式的部分。

我需要在纯文本正文中匹配上面的字符串。

任何指针将不胜感激。：） 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:52:51.303

几位数字后跟几组点在几位数字前

```
\d+(\.\d+)+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:54:35.000

您可以使用这样的表达式来匹配这样的行：

```
(?m)^\d+(?:\.\d+)*[ \t]+\S.*$ 
```

[在regex101.com](http://regex101.com/r/pY1iL0)上解释和测试

# function - 在汇编程序中调用函数 (AT&T, IA-32)

> ID：15566093
> 
> 赞同：1
> 
> 时间：2013-03-22T08:47:43.560
> 
> 标签：function, assembly, x86, call

我刚开始学习汇编程序，我一开始就被困住了——我试图调用一个简单的函数——实际上它主要是从一本书中复制而来的，而且我一直遇到分段错误。也许更有经验的人可以指出这段代码有什么问题：

```
.code32
SYSEXIT = 1
.data
.text
.globl _start
_start:
        push $28  #just some random argument
        push $33 
        call myfunc
        mov $SYSEXIT, %eax
        #exit code is stored in ebx after calling  function
        int $0x80
.type myfunc, @function
myfunc:
        push %ebp #save old base pointer on a stack
        movl %esp, %ebp
        movl 8(%ebp), %ebx #first argument to ebx
        movl 12(%ebp), %ecx #second argument to ecx
        addl %ecx, %ebx  #add arguments together - store them in ebx
        movl %ebp, %esp
        pop %ebp
        ret 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:57:34.840

您的函数期望参数为 long（32 位），因此您应该使用`pushl`而不是`push`.

您还应该确保在函数返回后平衡堆栈。即类似的东西：

```
pushl $28
pushl $33
call myfunc
addl $8,%esp  # "removes" two 32-bit arguments off the stack 
```

# mysql - 本月的sql查询，发帖较多的用户

> ID：15566094
> 
> 赞同：-3
> 
> 时间：2013-03-22T08:47:44.473
> 
> 标签：mysql, sql

我试图向用户展示本月添加到列表中的更多帖子。但不起作用。

```
SELECT *,SUM(post_id) FROM `posts` Where YEAR(date) = YEAR(NOW()) AND MONTH(date) = MONTH(NOW()) GROUP BY user_id ORDER BY id DESC LIMIT 0 , 18 
```

sql表数据：

```
INSERT INTO `posts` (`id`, `api_id`, `user_id`, `group_id`, `message`, `mentioned`, `attached`, `posttags`, `comments`, `reshares`, `date`, `date_lastedit`, `date_lastcomment`, `ip_addr`) VALUES
(1, 0, 1, 0, 'text', 0, 0, 0, 0, 0, 1360378616, 0, 1360378616, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:52:32.413

您应该将 select 子句中的列名指定为与 group by 子句中的相同，试试这个。

```
SELECT user_id,SUM(post_id) FROM `posts` Where YEAR(date) = YEAR(NOW()) AND MONTH(date) = MONTH(NOW()) GROUP BY user_id ORDER BY user_id DESC LIMIT 0 , 18 
```

# java - 从与应用程序相同的 JAR 文件中引用文件

> ID：15566101
> 
> 赞同：0
> 
> 时间：2013-03-22T08:48:13.847
> 
> 标签：java, reference, jar, internal

我在 Eclipse 中有一个 Java 应用程序，它引用 .XML 文件作为其他功能的模板。通常我打包 .JAR 文件时不包含这些文件，因为将它们放在与 .JAR 文件相同的文件夹中似乎可以很好地使用此参考：

```
File myFile = new File("templates/templateA.xsd"); 
```

我现在要求将这些模板放在与此应用程序相同的 .JAR 文件中。我可以毫无问题地包含它们，但这些引用似乎不再起作用。

是否有正确的方法从运行应用程序的同一个 .JAR 中引用 .XML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:55:04.923

您需要知道如何从类路径加载文件。其中一种方法如下

```
class XMLLoader {

    public String loadXML(String fileName){
         InputStream inputStream = this.getClass().getClassLoader().getResourceAsStream(fileName);
    // do the loading of the file from the given input stream.
   } 
```

}

你知道“模板”文件夹应该在你的 jar 里面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:51:57.070

如果你只需要阅读这个文件，你可能不需要 java.io.File 而只需要一个可以通过的 InputStream

```
this.getClass().getResourceAsStream("templates/templateA.xsd") 
```

如果你真的需要一个 java.io.File... 我不知道... 上次真的需要一个 File，我只是将 InputStream 复制到一个临时文件，但这很难看。

# java - 时间戳响应错误

> ID：15566103
> 
> 赞同：0
> 
> 时间：2013-03-22T08:48:24.773
> 
> 标签：java, http, http-headers, timestamp

我必须从 tsa 服务器获取时间戳。我正在发送一个文件（转换为`byte[]`）。
但是当我试图得到回应时，它会给我一个`NullPointerException`.

这是我的代码：

```
public static void timeStampServer () throws IOException{
        //String TSA_URL1    = "http://tsa.starfieldtech.com/";
        String TSA_URL2 = "http://ca.signfiles.com/TSAServer.aspx";
        //String TSA_URL3 = "http://timestamping.edelweb.fr/service/tsp";
        try {
            byte[] digest = leerByteFichero("C:\\deskSign.txt");

            TimeStampRequestGenerator reqgen = new TimeStampRequestGenerator();
            TimeStampRequest req = reqgen.generate(TSPAlgorithms.SHA1, digest);
            byte request[] = req.getEncoded();

            URL url = new URL(TSA_URL2);
            HttpURLConnection con = (HttpURLConnection) url.openConnection();

            con.setDoOutput(true);
            con.setDoInput(true);
            con.setRequestMethod("POST");
            con.setRequestProperty("Content-type", "application/timestamp-query");

            con.setRequestProperty("Content-length", String.valueOf(request.length));

            if (con.getResponseCode() != HttpURLConnection.HTTP_OK) {
                throw new IOException("Received HTTP error: " + con.getResponseCode() + " - " + con.getResponseMessage());
            }
            InputStream in = con.getInputStream();
            TimeStampResp resp = TimeStampResp.getInstance(new ASN1InputStream(in).readObject());
            TimeStampResponse response = new TimeStampResponse(resp);
            response.validate(req);
            System.out.println(response.getTimeStampToken().getTimeStampInfo().getGenTime());
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

我尝试使用 3 个 tsa 服务器，但其中任何一个都返回给我一个有效的 TSA。所有一个都在“ ”
中抛出 NullPointerException 。抛出一个
`TimeStampResponse response = new TimeStampResponse(resp);`

`TSA_URL2`

> java.io.IOException：收到 HTTP 错误：411 - 需要长度。

我不知道问题出在 tsa 服务器还是我的代码中。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:21:03.243

我能看到的问题在于您的请求（NullPointer 来自一个空的响应，因为您没有得到响应）。具体来说，问题是您的 HTTP 请求标头后没有冒号。这使得服务器无法读取强制性的 Content-length 标头。来自[RFC2616](http://www.ietf.org/rfc/rfc2616.txt)第 4.2 节（HTTP 文档）：

> HTTP 标头字段，包括 general-header（第 4.5 节）、request-header（第 5.3 节）、response-header（第 6.2 节）和 entity-header（第 7.1 节）字段，遵循与第 7.1 节中给出的相同的通用格式RFC 822 的第 3.1 节。**每个标头字段由一个名称后跟一个冒号（“：”）和字段值组成**。

TL;博士：

改变：

```
 con.setRequestProperty("Content-type", "application/timestamp-query");
        con.setRequestProperty("Content-length", String.valueOf(request.length)); 
```

到：

```
 con.setRequestProperty("Content-type:", "application/timestamp-query");
        con.setRequestProperty("Content-length:", String.valueOf(request.length)); 
```

# java - Selenium-Webdriver-java+TestNg 与 ruby

> ID：15566110
> 
> 赞同：0
> 
> 时间：2013-03-22T08:48:52.553
> 
> 标签：java, ruby, selenium-webdriver, testng

我在 selenium-webdriver ruby​​::TestUnit 中有一个自动化套件。我发现在java中，我们可以有TestNg，它提供了很多便利。将我的所有套件都更改为 java+TestNg 是否值得？还是我应该自己用红宝石实现它们？特别是，我正在寻找这些功能.. 数据驱动，基于页面对象，综合报告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:04:51.523

我强烈建议您在转向 Java 之前尝试**Capybara ：**

[https://github.com/jnicklas/capybara](https://github.com/jnicklas/capybara)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T10:10:13.130

两者各有优缺点

Java selenium :help 将在网上提供，如果您遇到困难，更多 API 将可用于任何集成

Ruby Selenium：在线帮助将减少，因为用户数量非常少 Ruby gems 受限于任何类型的集成

Ruby 是一种非常简单易用的语言 如果你的项目在复杂度方面可以被评为中等或低，我更愿意使用 Ruby。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-29T13:34:41.343

您可以使用 Rspec（BDD 工具）代替 Test NG（设置注释、测试流程/顺序等）。您还可以使用 page-object-gem 将每个功能页面分类到一个类中。Ruby 的 Page-object-gem 比 Java 中使用的页面对象模型强大得多。当您使用定位器声明元素时，这是一个带有 3-5 种方法（.click、getAttribute、选择单选按钮、选中/取消选中复选框等）的 API（而在 Java 中，开发人员必须对所有这些进行编码方法本身）。我已经将我的项目从使用 selenium java 转移到 selenium/watir/rspec/page-object-gem，我们将代码行数减少了三倍。与之前相比，团队可以在一个 sprint 中完成更多的故事。

# matlab-guide - 自适应对比度增强 (ACE)

> ID：15566114
> 
> 赞同：-1
> 
> 时间：2013-03-22T08:48:55.880
> 
> 标签：matlab-guide

如何将图像分离为三个区域（暗、中、亮）？任何 matlab 命令都可以使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:13:36.970

图像处理工具箱有一些基于颜色分割图像的选项。更多信息[在这里](http://www.mathworks.com/discovery/image-segmentation.html)。如果您只需要根据强度选择像素，则可以使用布尔运算符。这是该方法的示例：

```
% create an example image with three regions of intensity
im = ones(100,100);
im(1:25, 1:30) = 256;
im(75:end, 7:end) = 128;
% add some random noise
im = im + 10*rand(size(im));

% display image
figure
subplot(2,2,1)
image(im)
colormap gray

% segment image based on intensity
bottomThird = 256/3;
topThird = 2*256/3;
index1 = find(im < bottomThird);
index2 = find(and((im > bottomThird),(im <topThird)));
index3 = find(im > topThird);

%create images for each segmented region
im1 = ones(size(im));
im2 = ones(size(im));
im3 = ones(size(im));
im1(index1) = 0;
im2(index2) = 0;
im3(index3) = 0;

%display sub-regions
subplot(2,2,2)
imagesc(im1)
subplot(2,2,3)
imagesc(im2)
subplot(2,2,4)
imagesc(im3) 
```

# python - 我如何测试/重构我的测试？

> ID：15566117
> 
> 赞同：9
> 
> 时间：2013-03-22T08:49:10.517
> 
> 标签：python, unit-testing, testing, language-agnostic

我的应用程序有一套测试服。随着测试套件的有机增长，测试有很多可以重构的重复代码。

但是我想确保测试套件不会随着重构而改变。如何测试我的测试与重构无关。

（我正在使用 Python+UnitTest），但我想这个问题的答案可能与语言无关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T20:50:18.877

测试的真正测试是生产代码。

检查测试代码重构是否没有破坏您的测试的一种有效方法是执行[Mutation Testing](http://en.wikipedia.org/wiki/Mutation_testing)，其中对被测代码的副本进行变异以引入错误，以验证您的测试是否捕获了错误。这是一些测试覆盖工具使用的策略。

我没有使用过它（我也不是真正的 python 编码器），但这似乎得到了[Python Mutant Tester](https://pypi.python.org/pypi/pymutester)的支持，所以这可能值得一看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T23:04:41.900

Coverage.py 是你的朋友。

将您要重构的所有测试移至“系统测试”（或某些此类标记）。重构你想要的测试（你会在这里做单元测试吗？）并监控覆盖率：

*   在运行新的单元测试之后但在运行系统测试之前
*   在运行新的单元测试和系统测试之后。

在理想情况下，覆盖率将相同或更高，但您可以修改旧系统测试。

FWIW，py.test 提供了轻松标记测试和仅运行特定测试的机制，并且与 unittest2 测试兼容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T09:23:28.913

有趣的问题 - 我总是热衷于听到“我如何测试测试？！”类型的讨论。还有上面@marksweb 的优点。

检查你的测试是否真的在做你想让他们做的事情并测试你想要做的事情总是一个挑战，但是把它做好并正确地做是很好的。我总是试图考虑一个经验法则，即测试应该占任何项目*开发工作*的 1/3……不管项目时间限制、压力和不可避免地出现的问题。

如果您打算继续和发展您的项目，您是否考虑过像您说的那样进行重构，但是以一种创建适当的测试框架的方式，该框架允许测试驱动开发 (TDD) 的任何未来添加功能或项目的一般扩展？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-23T04:14:19.510

尽管您提到了 Python，但我想评论一下如何在 Smalltalk 中应用重构。大多数现代 Smalltalk 实现包括集成在系统浏览器中的“[重构浏览器”以重构源代码。](http://www.refactory.com/tools/refactoring-browser)RB 包含一个重写框架，用于动态执行您询问的有关保持系统行为和稳定性的转换。使用它的一种方法是在通过差异工具提交之前打开范围浏览器，应用重构并查看/编辑更改。我不知道 Python 重构工具的成熟度，但 Smalltalk 社区花了很多迭代周期（年）才拥有如此出色的软件。

Don Roberts 和 John Brant 编写了第一个重构浏览器工具，现在它已成为重构工具的标准。有一些[视频](http://vimeo.com/8861620)，[这里](http://www.youtube.com/watch?v=jih7QVlbzj8)展示了其中一些功能。要将方法提升为超类，在[Pharo](http://www.pharo-project.org/)中，您只需选择方法、重构和“上拉”菜单项。该规则将检测并让您在执行之前检查建议的重复子实现程序以进行删除。重构的应用与测试代码无关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T09:43:52.970

从理论上讲，您可以为测试编写一个测试，模拟被测试的实际对象。但我想这只是做很多工作的方式，不值得。

所以你剩下的是一些策略，这会有所帮助，但不会让这个失败安全。

1.  工作非常仔细和缓慢。尽可能多地使用 IDE 的功能，以减少人为错误的可能性。

2.  成对工作。看着你肩膀的伙伴可能会发现你错过的故障。

3.  复制测试，然后重构它。完成后在生产代码中引入错误以确保两个测试以相同（或等效）的方式发现问题。然后才删除原来的测试。

4.  最后一步可以通过工具来完成，虽然我不知道 python 的风格。要搜索的关键字是“突变测试”。

说了这么多，我个人对步骤 1+2 很满意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T09:10:20.817

我看不到重构测试套件的简单方法，并且根据重构的程度，您显然将不得不更改测试套件。你的测试套件有多大？

正确地重构需要时间和对细节的关注（还有很多`Ctrl`++ ！）`C` `Ctrl`。`V`每当我重构我的测试时，除了查找和替换之外，我不会尝试找到任何快速的方法，因为这涉及太多风险。

如果你想保持测试的质量，你最好是正确地手动做事，尽管速度很慢。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T09:33:31.150

不要重构测试套件。

重构的目的是让代码更容易维护，*而不是*满足一些抽象的“代码美观”标准。测试代码不需要很好，不需要避免重复，但它确实需要彻底。一旦你有一个有效的测试（即它确实测试了被测代码的必要条件），你不应该删除它或更改它，因此测试代码不需要易于维护。

如果您愿意，您可以重写现有的测试，使其变得更好，并在旧测试*之外*运行新测试。这保证了新的组合测试套件可以捕获旧版本所做的所有错误（当您将来扩展新代码时，可能还会有更多错误）。

有两种方法可以认为测试无效——你意识到它是错误的（即，它有时会因为正确的被测代码而错误地失败），或者被测接口已经改变（删除被测试的 API，或者允许行为以前是测试失败）。在这种情况下，您可以从套件中删除测试。如果您意识到一大堆测试是错误的（因为它们包含错误的重复代码），*那么*您可以将它们全部删除并用重构和更正的版本替换它们。你不会仅仅因为你不喜欢它们源代码的风格就删除测试。

要回答您的具体问题：要测试您的新测试代码是否等同于旧代码，您必须确保（a）所有新测试都通过您当前正确的代码库，这很容易，而且 (b) 新测试检测旧测试检测到的所有错误，这通常是不可能的，因为您手头没有被测代码的一套错误实现。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-23T13:31:46.590

测试代码可以成为 API 的最佳低级文档，因为只要它们通过且正确，它们就不会过时。但是凌乱的测试代码并不能很好地达到这个目的。所以重构是必不可少的。

您的测试代码也可能会随着时间而改变。测试也是如此。如果您希望它顺利进行，则必须尽量减少代码重复，并且可读性是关键。

测试应该易于阅读，并且总是一次测试一件事并明确以下内容：

*   有什么先决条件？
*   正在执行什么？
*   预期的结果是什么？

如果考虑到这一点，重构测试代码应该是相当安全的。一次一步，正如@Don Ruby 提到的，让您的生产代码成为测试的测试。

对于许多重构，您通常可以安全地依赖高级 IDE 工具——如果您要注意提取代码中的副作用。

尽管我同意应避免在没有适当测试覆盖的情况下进行重构，但我认为为测试编写测试在通常情况下几乎是荒谬的。

# java - XML 不会显示存储的 SQLite 数据

> ID：15566127
> 
> 赞同：0
> 
> 时间：2013-03-22T08:49:43.027
> 
> 标签：java, android, xml, eclipse

我有一些 XML 应该显示来自 TimePicker 数据的小时，但每次我尝试查看它强制关闭的数据时。我已将问题缩小到我的 XML 文件中的错误设置，但我似乎无法纠正问题并阻止应用程序强制关闭。

view_country xml

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content"
android:stretchColumns="1" 
android:layout_margin="5dp">

<TableRow>         
<TextView 
style="@style/StyleLabel"
android:text="@string/name_lbl"/>
<TextView 
android:id="@+id/nameText" 
style="@style/StyleText"/>         
</TableRow>

<TableRow>         
<TextView 
style="@style/StyleLabel"
android:text="@string/cap_lbl"/>         
<TextView 
android:id="@+id/capText"
style="@style/StyleText"/>         
</TableRow>

<TableRow>       
<TextView 
style="@style/StyleLabel"
android:text="@string/code_lbl"/>                    
 <TextView 
android:id="@+id/codeText"
style="@style/StyleText"/>         
</TableRow>
<TableRow>         
<TextView 
style="@style/StyleLabel"
android:text="Linked Users"/>         
<TextView 

style="@style/StyleText"/>         
</TableRow>
<TableRow>         
<TextView 
style="@style/StyleLabel"
android:text="Time Limit"/>         
<TextView 
android:id="@+id/timeEdit"
style="@style/StyleText"/>  

</TableRow>
</TableLayout>  

ViewCountry java 

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;
import android.widget.TimePicker;

public class ViewCountry extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 
   private TextView timeTv; 

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       timeTv = (TextView) findViewById(R.id.timeEdit);
       codeTv = (TextView) findViewById(R.id.codeText);
   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");
         int timeIndex = result.getColumnIndex("time");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         timeTv.setText(result.getInt(timeIndex));
         codeTv.setText(result.getString(codeIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());
            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
}

Database Connector

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DatabaseConnector {

private static final String DB_NAME = "WorldCountries";
private SQLiteDatabase database;
private DatabaseOpenHelper dbOpenHelper;

public DatabaseConnector(Context context) {
    dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
}

   public void open() throws SQLException 
   {
      //open database in reading/writing mode
      database = dbOpenHelper.getWritableDatabase();
   } 

   public void close() 
   {
      if (database != null)
         database.close();
   }       

   public void insertContact(String name, String cap, String code, String time) 
           {
              ContentValues newCon = new ContentValues();
              newCon.put("name", name);
              newCon.put("cap", cap);
              newCon.put("time", time);
              newCon.put("code", code);

              open();
              database.insert("country", null, newCon);
              close();
           }

           public void updateContact(long id, String name, String cap,String code,  String time) 
           {
              ContentValues editCon = new ContentValues();
              editCon.put("name", name);
              editCon.put("cap", cap);
              editCon.put("time", time);
              editCon.put("code", code);

              open();
              database.update("country", editCon, "_id=" + id, null);
              close();
           }

           public Cursor getAllContacts() 
           {
              return database.query("country", new String[] {"_id", "name"}, 
                 null, null, null, null, "name");
           }

           public Cursor getOneContact(long id) 
           {
              return database.query("country", null, "_id=" + id, null, null, null, null);
           }

           public void deleteContact(long id) 
           {
              open(); 
              database.delete("country", "_id=" + id, null);
              close();
           }
} 
```

AddEditCountry java

```
import android.app.Activity; 
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener; 
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;

public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;
 private TimePicker timeEt;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.nameEdit);
      capEt = (EditText) findViewById(R.id.capEdit);
      codeEt = (EditText) findViewById(R.id.codeEdit);
      timeEt = (TimePicker) findViewById(R.id.timeEdit);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
         timeEt.setCurrentHour(extras.getInt("time"));  
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask<Object, Object, Object> saveContactTask = 
                   new AsyncTask<Object, Object, Object>() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  timeEt.getCurrentHour().toString(),
                  codeEt.getText().toString());
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(),
            timeEt.getCurrentHour().toString(),
            codeEt.getText().toString());
      }
   }
} 
```

add_country xml（首先将导致崩溃的 TimePicker 数据输入到系统中）

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" android:layout_weight="1">

<LinearLayout android:id="@+id/linearLayout"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" 
  android:padding="5dp">

  <EditText android:id="@+id/nameEdit"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/name_hint"
     android:inputType="textPersonName|textCapWords"/>

  <EditText android:id="@+id/capEdit"
     android:layout_width="fill_parent" 
     android:layout_height="wrap_content" 
     android:imeOptions="actionNext" 
     android:hint="@string/cap_hint"
     android:inputType="textPersonName|textCapWords"/>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Data Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10MB" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="right"
        android:textColor="#ffffff"
        android:text="Unlimited Data" />
</LinearLayout>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Bandwidth Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:gravity="left"
        android:textColor="#ffffff"
        android:text="10kbs" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:textColor="#ffffff"
        android:gravity="right"
        android:text="Unlimited Bandwidth" />
</LinearLayout>

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textAppearance="?android:textAppearanceSmall" />

<TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="WiFi Time Limit"
    android:textColor="#ffffff"
    android:textAppearance="?android:textAppearanceMedium" />

<TimePicker
    android:id="@+id/timeEdit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:layout_weight="1.0" />

<EditText
    android:id="@+id/codeEdit"
    android:inputType="textUri"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:lines="1"
    android:hint="@string/code_hint"
    android:imeOptions="actionNext" />

  <Button android:id="@+id/saveBtn" 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginTop="15dp"
     android:layout_gravity="center_horizontal"
     android:text="@string/save_btn"/>
</LinearLayout>
</ScrollView> 
```

（更新）LOGCAT：

```
03-22 06:14:34.855: D/Activity(4860): Activity.onPause(), editTextTapSensorList size: 0
03-22 06:14:34.915: I/Adreno200-EGLSUB(4860): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-22 06:14:34.915: D/memalloc(4860): ion: Mapped buffer base:0x5d4c3000 size:614400 offset:0 fd:60
03-22 06:14:34.965: D/memalloc(4860): ion: Mapped buffer base:0x5d8f7000 size:614400 offset:0 fd:64
03-22 06:14:34.985: D/memalloc(4860): ion: Unmapping buffer  base:0x5ca41000 size:614400
03-22 06:14:34.985: D/memalloc(4860): ion: Unmapping buffer  base:0x5dc05000 size:614400
03-22 06:14:34.985: D/memalloc(4860): ion: Unmapping buffer  base:0x5dc9b000 size:614400
03-22 06:14:35.035: D/memalloc(4860): ion: Mapped buffer base:0x5ca41000 size:614400 offset:0 fd:56
03-22 06:14:37.748: D/Activity(4860): Activity.onPause(), editTextTapSensorList size: 0
03-22 06:14:37.828: I/Adreno200-EGLSUB(4860): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-22 06:14:37.828: D/memalloc(4860): ion: Mapped buffer base:0x5e131000 size:614400 offset:0 fd:59
03-22 06:14:37.828: W/ResourceType(4860): No package identifier when getting value for resource number 0x00000000
03-22 06:14:37.828: W/dalvikvm(4860): threadid=1: thread exiting with uncaught exception (group=0x410889d8)
03-22 06:14:37.838: E/AndroidRuntime(4860): FATAL EXCEPTION: main
03-22 06:14:37.838: E/AndroidRuntime(4860): android.content.res.Resources$NotFoundException: String resource ID #0x0
03-22 06:14:37.838: E/AndroidRuntime(4860):     at android.content.res.Resources.getText(Resources.java:247)
03-22 06:14:37.838: E/AndroidRuntime(4860):     at android.widget.TextView.setText(TextView.java:3622)
 03-22 06:14:37.838: E/AndroidRuntime(4860):    at com.nfc.linkingmanager.ViewCountry$LoadContacts.onPostExecute(ViewCountry.java:74)
03-22 06:14:37.838: E/AndroidRuntime(4860):     at com.nfc.linkingmanager.ViewCountry$LoadContacts.onPostExecute(ViewCountry.java:1)
 03-22 06:14:37.838: E/AndroidRuntime(4860):    at android.os.AsyncTask.finish(AsyncTask.java:602)
 03-22 06:14:37.838: E/AndroidRuntime(4860):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
 03-22 06:14:37.838: E/AndroidRuntime(4860):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
 03-22 06:14:37.838: E/AndroidRuntime(4860):    at android.os.Handler.dispatchMessage(Handler.java:99)
 03-22 06:14:37.838: E/AndroidRuntime(4860):    at android.os.Looper.loop(Looper.java:137)
03-22 06:14:37.838: E/AndroidRuntime(4860):     at android.app.ActivityThread.main(ActivityThread.java:4477)
03-22 06:14:37.838: E/AndroidRuntime(4860):     at java.lang.reflect.Method.invokeNative(Native Method)
03-22 06:14:37.838: E/AndroidRuntime(4860):     at java.lang.reflect.Method.invoke(Method.java:511)
03-22 06:14:37.838: E/AndroidRuntime(4860):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
03-22 06:14:37.838: E/AndroidRuntime(4860):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
03-22 06:14:37.838: E/AndroidRuntime(4860):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:18:05.740

`"@+id/timeEdit"`布局中定义的UI 元素`view_country.xml`是一个 TextView。您正在尝试将其投射到`android.widget.TimePicker`您的活动`ViewCountry`中。

还有另一个具有相同 id ("@+id/timeEdit") 的 UI 元素确实**是**TimePicker，但它被放置在`AddEditCountry`活动布局中。

检查您的`ViewCountry`布局和代码，可能元素`@+id/timeEdit`不应该是 TextView，或者您应该在您的`onCreate`方法中将其转换为 TextView。

# windows-phone-7 - 如何获取列表框选定项值传递到 Windows Phone 7 的另一个页面？

> ID：15566129
> 
> 赞同：1
> 
> 时间：2013-03-22T08:49:45.620
> 
> 标签：windows-phone-7, c#-4.0, linq-to-xml

嗨，我正在使用下面给出的 xaml 文件。我想将选定的项目值获取到详细信息视图。

```
<StackPanel Width="Auto">
<StackPanel VerticalAlignment="Top" Width="Auto">
    <ListBox ItemsSource="{Binding Images}"  Width="Auto" ScrollViewer.VerticalScrollBarVisibility="Disabled" SelectionChanged="NotchsList11_SelectionChanged">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
             <StackPanel Orientation="Horizontal"  VerticalAlignment="Top">
            </StackPanel>
                </ItemsPanelTemplate>
                   </ListBox.ItemsPanel>
                    <ListBox.ItemTemplate>
                       <DataTemplate>
                          <Border BorderBrush="White" Margin="0,0,8,0" BorderThickness="1">
                            <Image Source="{Binding}" Width="152" Height="90"  Stretch="Fill"  VerticalAlignment="Top"></Image>
                          </Border>
                            </DataTemplate>
                                </ListBox.ItemTemplate>
                         </ListBox>
                      </StackPanel>
                     <StackPanel Orientation="Horizontal"  VerticalAlignment="Top"  ScrollViewer.VerticalScrollBarVisibility="Disabled" Width="Auto">
                    <ListBox ItemsSource="{Binding Titles}"   ScrollViewer.VerticalScrollBarVisibility="Disabled" SelectionChanged="NotchsList11_SelectionChanged">
                   <ListBox.ItemsPanel>
                         <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal">
                        </StackPanel>
                          </ItemsPanelTemplate>
                            </ListBox.ItemsPanel>
                               <ListBox.ItemTemplate>
                                    <DataTemplate >
                                        <Border BorderBrush="White" Margin="0,0,8,0"
                                            BorderThickness="1"> 
                                       <TextBlock Text="{Binding}"  Width="152" Height="80" Padding="5,10,0,0"  TextWrapping="Wrap"></TextBlock>    
                                        </Border>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                    </StackPanel>
                    </StackPanel> 
```

我的 Main.Cs 代码

```
private void NotchsList11_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

            NavigationService.Navigate(new Uri("/Test.xaml?parameter={0}",UriKind.Relative));
            //NavigationService.Navigate(new Uri("/Page1.xaml?parameter=test", UriKind.Relative));
        }

    } 
```

我用这个东西我不能用选定的项目去其他页面。我想要如下图所示的输出 ![在此处输入图像描述](../Images/eb2092a8678f72ac02fa8f66a6d27b15.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:34:08.883

简单有效的方法 - 拥有一个`ViewModel`. 选择项目后（挂钩`SelectionChanged`事件处理程序），将实例传递给`ViewModel`并导航到将显示项目详细信息的第二页。确保页面绑定到`ViewModel`并简单地从您传入的项目中读取。

# python - Python - 布尔值

> ID：15566130
> 
> 赞同：0
> 
> 时间：2013-03-22T08:49:52.170
> 
> 标签：python

论据是：

> 给定 2 个字符串，将它们更改为小写并检查其中一个是否在另一个的末尾

我的回答是：

```
a="xyz"
b="12xyz"
a = a.lower()
b = b.lower()
c=max(a,b)
d=min(a,b)
e=len(d)
if d==c[-e:]:
 print True
else:
 print False 
```

它应该返回`True`。但它返回`False`。当我给出这个值时：

```
a="ambala12xyz"
b="12xyz" 
```

它返回`True`。这里有什么问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T08:52:49.920

你应该使用`endswith`

```
In [13]: a="ambala12xyz"

In [14]: b="12xyz"

In [15]: b.endswith(a)
Out[15]: False

In [16]: a="xyz"

In [17]: b="12xyz"

In [18]: b.endswith(a)
Out[18]: True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:54:51.750

您正在比较字符，您需要按长度比较字符串：

```
a="xyz"
b="12xyz"
a = a.lower()
b = b.lower()
if len(a) > len(b):
  c, d = a, b
else:
  c, d = b, a
e=len(d)
# print d==c[-e:]
# or:
if d==c[-e:]:
 print True
else:
 print False 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T09:04:11.310

我认为最短和最直观的方法是：

```
a = a.lower()
b = b.lower()
print a.endswith(b) or b.endswith(a) 
```

或者，如果您想使用 max、min 函数：

```
a = a.lower()
b = b.lower()
c = max(a, b, key=len)
d = min(a, b, key=len)
print d == c[-len(d):] 
```

但在我看来，它不像`endswith`函数那样明确。此外，此功能不适用于相同长度的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T08:59:50.640

另一个想法：

打印 (a.lower().endswith(b.lower()) 或 b.lower().endswith(a.lower()))

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T08:59:18.050

如果你看看你的变量，你会很快发现出了什么问题：

```
a: xyz
b: 12xyz
c: xyz
d: 12xyz
e: 5
c[-e]: xyz 
```

那么很明显 d != c[-e:] (12xyz != xyz)。

你做错了什么是你假设

```
min("abc", "defgh") 
```

将返回 3，但是在对字符串执行 max() 和 min() 时，您正在比较哪个字符串“更高”或“更低”，因此实际上将返回“abc”。

# android - Android：横向模式下的 TableLayout 有问题

> ID：15566131
> 
> 赞同：1
> 
> 时间：2013-03-22T08:49:52.077
> 
> 标签：android, landscape, tablelayout

我已经编写了以下 xml 代码来以表格格式排列按钮，但是当在模拟器或我的手机设备中运行时它无法与我一起使用，其中按钮一个接一个地显示（垂直）并且最后一个按钮根本没有显示.

代码是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/background"
android:orientation="horizontal"
android:padding="15dip"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >
<LinearLayout
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:paddingLeft="20dip"
android:paddingRight="20dip"
    android:orientation="vertical" >
<TextView
    android:text="@string/main_title"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="20dip"
    android:textSize="24.5sp"/>
<TableLayout 
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:stretchColumns="*">
<TableRow >
 <Button 
    android:id="@+id/continue_button"
    android:text="@string/continue_label" />
 <Button
    android:id="@+id/game_button"
    android:text="@string/new_game_label" />
</TableRow>
<TableRow>
  <Button
    android:id="@+id/about_button"
    android:text="@string/about_label" />
    <Button 
    android:id="@+id/exit_button"
    android:text="@string/exit_label"       />
  </TableRow>
  </TableLayout> 
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:00:13.143

这是创建表格布局的示例，请使用此验证您的

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/button3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

        </TableRow>

    </TableLayout>

</LinearLayout> 
```

尝试这样做并进行澄清

# ruby - WEBrick 套接字返回 eof？== 真

> ID：15566132
> 
> 赞同：0
> 
> 时间：2013-03-22T08:49:54.060
> 
> 标签：ruby, sockets, proxy, phantomjs, webrick

我正在编写一个支持 webrick 和 ssl 的 MITM 代理（对于在客户端使用 VCR 模拟请求，请参阅此线程[VCRProxy：Record PhantomJS ajax calls with VCR inside Capybara](https://stackoverflow.com/questions/13039251/vcrproxy-record-phantomjs-ajax-calls-with-vcr-inside-capybara?answertab=active#tab-top)或我的 github 存储库[https://github.com/23tux/ vcr_proxy](https://github.com/23tux/vcr_proxy)），而且我做得很远（在我看来）。我的配置是 phantomjs 配置为使用代理并忽略 ssl 错误。该代理（用 webrick 编写）使用 VCR 记录正常的 HTTP 请求。如果发出 SSL 请求，代理会启动另一个 webrick 服务器，将其挂载`/`并重新写入`unparsed_uri`请求，这样就不会调用原始服务器，而是调用我刚刚启动的 webrick 服务器。然后新启动的服务器处理请求，用 VCR 记录它等等。

使用 cURL 测试 MITM 代理时一切正常。例如 curl 发出的请求，例如

```
curl --proxy localhost:11111 --ssl --insecure https://blekko.com/ws/?q=rails+/json -v 
```

被处理，被记录...

但是：当我尝试使用 jsonp ajax 请求在 poltergeist 提供的页面内执行相同的请求时，出现问题。我将它调试到导致问题的行。它在(Ruby 1.9.3)`httpserver.rb`的 ruby​​ 源代码中的 from webrick 内：`line 80`

```
def run(sock)
  while true
    res = HTTPResponse.new(@config)
    req = HTTPRequest.new(@config)
    server = self
    begin
      timeout = @config[:RequestTimeout]
      while timeout > 0
        break if IO.select([sock], nil, nil, 0.5)
        timeout = 0 if @status != :Running
        timeout -= 0.5
      end
      raise HTTPStatus::EOFError if timeout <= 0
      raise HTTPStatus::EOFError if sock.eof? 
```

**使用phantomjs**进行请求时，最后一行`raise HTTPStatus::EOFError if sock.eof?`会引发错误，因为：**`sock.eof? == true`**

 **```
1.9.3p392 :002 > sock
 => #<OpenSSL::SSL::SSLSocket:0x007fa36885e090> 
1.9.3p392 :003 > sock.eof?
 => true 
```

我用**curl**命令尝试了它，它就在那里`sock.eof? == false`，所以不会引发错误，并且一切正常：

```
1.9.3p392 :001 > sock
 => #<OpenSSL::SSL::SSLSocket:0x007fa36b7156b8> 
1.9.3p392 :002 > sock.eof?
 => false 
```

我对 ruby​​ 中的套接字编程经验很少，所以我有点卡住了。

如何根据变量找出两个请求之间的区别`sock`？正如我在 ruby​​ 的 IO 文档中看到的那样，`eof?`阻塞直到对方发送一些数据或关闭它。我对吗？但是为什么用phantomjs调用同一个请求，同一个参数，同一个方法的时候是关闭的，而使用curl的时候却没有关闭呢？

希望有人可以帮助我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:18:54.747

Since this is a HTTPS I bet the client is closing the connection. In HTTPS this can happen when the server certificate is for example not valid. What kind of HTTPS library do you use? These libraries can be usually configured to ignore SSL CERT and continue working when it is not valid.

In curl you are actually doing that using -k (--insecure), without this it would not work. Try this without this option and if curl fails, then your server certificate is not valid. Note to get this working you usually either need to turn the checking off or to provide valid certificate to the client so it can verify it.**

# nsmutabledictionary - 以编程方式创建新的 NSDictionaries

> ID：15566146
> 
> 赞同：0
> 
> 时间：2013-03-22T08:50:37.560
> 
> 标签：nsmutabledictionary

我想根据输入数据创建一组具有不同名称的新 NSDictionaries。这可能吗？例如

for (int i = 0; i < [holidayDestination 长度]; i++) { NSMutableDictionary *[NSString stringWithFormat:@"holidayDestination%d", i] = [[NSMutableDictionary alloc] init]; // 这里的其他代码... }

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:01:36.870

不，虽然 Objective-C 力求像 Smalltalk 一样，但它只是 C 的一层薄薄的外衣，所以你真的不能做这些很酷的“元”技巧。您可以做的是设置一个可变数组并为每个元素`i`创建您的可变字典。像这样的东西：

```
NSMutableArray *holidayDestinations = [NSMutableArray new];
for (int i = 0; i < [holidayDestination length]; i++)
{
    [holidayDestinations addObject:[NSMutableDictionary new]];
    NSMutableDictionary *working = [holidayDestinations objectAtIndex:i];
    // Add elements to "working"
} 
```

# android - 无法在 EditText 中输入值

> ID：15566149
> 
> 赞同：0
> 
> 时间：2013-03-22T08:50:42.500
> 
> 标签：android, android-layout, android-edittext, android-view

我是Android开发的新手。**最近，我在我目前在Emulator**中运行的应用程序中使用的 EditTexts（尽管我没有更改 EditText 的任何属性）中遇到了一个问题。单击 EditText 时，它会获得焦点，但**在键入内容时，焦点会更改为其他视图。**但是，如果我使用键盘的 Tab 按钮导航到 EditText，我就可以输入值。这发生在我的应用程序中的所有 EditTexts 上。上网寻求解决方案，但没有找到。帮助...

我的EditText之一的实现：

```
<EditText                   
    android:id="@+id/edittext_testname"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="@string/hintEditText1"/> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:55:12.227

曾经在物理设备上尝试过您的应用程序吗？

但是，我看不出您的 EditText xml 有什么问题。也许您的活动中有一些 Java 代码捕获与该 EditText 相关的任何事件？或者也许是您提到的其他视图元素获得焦点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-18T09:20:35.870

我有一个类似的问题，但是我为我的 EditText 定义了一个自定义样式。我是怎么修的？

`<item name="android:focusable">true</item> <item name="android:focusableInTouchMode">true</item>`

所以尝试应用“android:focusable”和“android:focusableInTouchMode”属性，看看是否有什么不同。默认情况下，它们应该应用于 EditText，但试一试。

（我会将此作为评论发布，但我需要更多代表）

# php - $_GET 和 table.php?ini=ABC

> ID：15566151
> 
> 赞同：0
> 
> 时间：2013-03-22T08:50:44.640
> 
> 标签：php, mysql

我正在尝试从用户那里获取输入，然后从表中提取数据并显示它。

我的代码是

```
$ini = $_GET["ini_id"];
$con=mysqli_connect("localhost","root","","globalgoals");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
else

{
    $country = array();
    //country
    $sql="";
 //!mysqli_query($con,$sql))
    $result = mysqli_query($con,"SELECT * FROM country WHERE metrics="$ini");/*table name*/
    while($row = mysqli_fetch_array($result))
    {
        array_push($country,$row['country']);/*column name*/
    }
    // 
```

当我输入网址时`http://localhost/xampp/testing/Int/table.php?ini=C2C`

我得到错误

```
Notice: Undefined index: ini_id in C:\xampp\htdocs\xampp\Testing\Int\table.php on line 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T08:52:25.973

得到`$ini = $_GET["ini"];`是因为你没有通过`ini_id`。

**第二**

```
$result = mysqli_query($con,"SELECT * FROM country WHERE metrics='".$ini."'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:01:29.623

使用伊塞...

```
$ini = (isset($_GET['ini_id'])) ? $_GET['ini_id'] : null; 
```

但也许更重要的是，在将它用作数据库查询的一部分之前，您需要保护该变量。由于您的 id 是字母数字，请使用 mysqli_real_escape_string()：

```
$ini = (isset($_GET['ini_id']) ? $_GET['ini_id'] : null;
$ini = mysqli_real_escape_string($con, $ini); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:53:46.253

还有一件事，

```
$result = mysqli_query($con,"SELECT * FROM country WHERE metrics='".$ini."'"); 
```

您错过了变量前后的点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:20:38.173

在这里你试图变得像这样`$_GET['ini'];`

```
http://localhost/xampp/testing/Int/table.php?ini=C2C 
```

如果你想得到它`$_GET['ini_id']`

```
http://localhost/xampp/testing/Int/table.php?ini_id=C2C //change here 
```

# java - Java中朱利安日期的解释

> ID：15566159
> 
> 赞同：0
> 
> 时间：2013-03-22T08:51:10.750
> 
> 标签：java, eclipse, julian-date

我正在尝试调整工作中的代码，我面临的问题是使用 Eclipse 的 JAVA 脚本。我无法理解 Julian Date 或 Number 是如何计算或选择的，因为我需要对其进行调整。

对这个脑筋有什么建议吗？

一个例子是：

```
jToday=2456324.5 
```

非常感谢您的意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-21T15:56:57.570

您可以使用 Joda lib 将儒略日转换为 java 日期

```
DateTime dt =  new DateTime(DateTimeUtils.fromJulianDay(2456324.5)); 
```

[儒略日期](http://en.wikipedia.org/wiki/Julian_day) ——小数点前的数字表示自公元前 4713 年 1 月 1 日中午以来的天数，小数点后表示当天的小数部分；例如，1.1.2013 UT 0:30:00 的儒略日期是 2456293.520833

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:01:49.507

您可以使用 joda-time 在您拥有的儒略日期和任何其他日历之间进行转换：

[http://joda-time.sourceforge.net/cal_julian.html](http://joda-time.sourceforge.net/cal_julian.html)

您还可以使用此功能：

[http://www.rgagnon.com/javadetails/java-0506.html](http://www.rgagnon.com/javadetails/java-0506.html)

# php - Twig 标签包含 vs 函数包含

> ID：15566167
> 
> 赞同：19
> 
> 时间：2013-03-22T08:51:46.223
> 
> 标签：php, twig

Twig 的[标签 include文档看起来与](http://twig.symfony.com/doc/tags/include.html)[函数 include](http://twig.symfony.com/doc/functions/include.html)的文档非常相似。

标签包括：

```
{% include 'header.html' %} 
```

功能包括：

```
{{ include('template.html') }} 
```

有人可以指出在什么情况下，一种优于另一种？谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-16T14:38:27.623

`{{ include() }}`在 Symfony 2.2 中引入：

使用函数可以让你对输出做任何你想做的事情（这对标签是不可能的），就像一个简单的：

```
{{ set content = include('some_template') }} 
```

但正如 Fabien Potentier（树枝创始人）所说

> 函数和标签确实做同样的事情

你可以在这里找到关于它的介绍的disution：[https ://github.com/twigphp/Twig/pull/926](https://github.com/twigphp/Twig/pull/926)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-25T07:48:19.097

[包含标签](https://twig.symfony.com/doc/3.x/tags/include.html)的 Twig 3.x 文档现在指出：

> 建议使用 include 函数，因为它提供了相同的功能，但灵活性更高：
> 
> *   include 函数在语义上更“正确”（包括模板在当前范围内输出其呈现的内容；标签不应显示任何内容）；
>     
>     
> *   include 函数更“可组合”：
>     
>     
> *   由于命名参数，include 函数不会对参数施加任何特定的顺序。

# html - 检测平板电脑的完美方法是什么？

> ID：15566168
> 
> 赞同：10
> 
> 时间：2013-03-22T08:51:50.410
> 
> 标签：html, css, desktop, tablet

我正在寻找检测平板电脑的完美方法。使用媒体查询，您可以为特定 CSS 设置最小和最大宽度。但是有些平板电脑的分辨率比 soms 桌面显示器更高。所以这会产生冲突。

使用 Javascript（Modernizr、Detectivizr）可以识别平板电脑，并在 HTML 中使用 HTML 标签上的“平板电脑”类进行设置。但是... 并非所有用户都启用了 Javascript。

所以你想要的是（在我看来）使用 CSS 来检测平板电脑。有谁知道这个的完美解决方案？

提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T09:27:10.160

您可以通过使用 CSS 媒体查询获得合理的准确度：

```
@media only screen 
and (max-device-height : 768px) 
and (max-device-width : 1024px)
{
    /* CSS Styles go here..... */
} 
```

上面应该检测设备屏幕尺寸何时**小于**1024x768（桌面的常见屏幕尺寸）。

正如您在上面所说，如果您只使用 CSS 并不完美，因为某些平板电脑的屏幕尺寸大于 1024x768。

我知道提高准确性的唯一方法是使用 javascript 来嗅探`userAgent`字符串。请参阅 GeenHenk 链接到的问题（[What is the best way to detect a mobile device in jQuery?](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:54:40.873

您可以检查`navigator.userAgent`, 但它的 JavaScript，如下所示：

```
var isMobile = navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/); 
```

* * *

### 编辑

我找到了这个：

```
@media only screen and (max-width: 760px) {
    /* Styles for phones */
} 
```

这似乎可以检测浏览器的宽度是否是智能手机的大小。

有关更多信息，请参阅[此问题中的答案](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-21T16:20:26.760

使用[mobile-detect.js](https://github.com/hgoebl/mobile-detect.js)怎么样？我刚刚将它用于我的项目 - 它有很好的`.tablet()`方法。

更新（对于 maxshuty）

我通过以下方式使用它：

```
var md = new MobileDetect(window.navigator.userAgent);
if( md.tablet() || !md.phone() ) {
    // your code here
} 
```

# wcf - 错误 500.19 本地 IIS

> ID：15566170
> 
> 赞同：0
> 
> 时间：2013-03-22T08:51:57.283
> 
> 标签：wcf, iis

我有一个 wcf 服务。它使用本地 IIS 服务器。

我的 web.config 是：

```
<?xml version="1.0"?>
<configuration> 
  <system.web>
    <authentication mode="Windows"/>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
      <customBinding>
        <binding name="InstantMessagingBinding" closeTimeout="00:00:45">
          <textMessageEncoding>
            <readerQuotas maxStringContentLength="200000" maxArrayLength="200000" />
          </textMessageEncoding>
          <httpTransport keepAliveEnabled="false" maxReceivedMessageSize="200000" authenticationScheme="Ntlm"/>
        </binding>
      </customBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="InstantMessagingBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <services>
      <service name="Isima.InstantMessaging.WcfService.ContactService" behaviorConfiguration="InstantMessagingBehavior">
        <endpoint address=""
          binding="customBinding" bindingConfiguration="InstantMessagingBinding"
          contract="Isima.InstantMessaging.WcfService.IContactService" >
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
      </service>          
    </services>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

当我运行我的服务时，我得到一个错误 ![在此处输入图像描述](../Images/5b2d891a3455e9e862d3cceb96abdf4d.png)

此错误是关于“当 IIS 配置文件的指定部分被锁定在更高级别的配置时，可能会出现此问题。”

为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T18:00:36.150

检查是否为 IIS 安装了所有应用程序开发组件。例如.NET 和 ASP.NET。请参阅控制面板中的添加/删除窗口功能对话框并检查已安装的 IIS 组件。

我总是安装所有开发组件（ASP.NET，...）。

# php - FB API 插入属于 Open User 帐户的 user_id

> ID：15566173
> 
> 赞同：1
> 
> 时间：2013-03-22T08:51:57.660
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

这很容易成为我在使用 FB api 时遇到的最奇怪的问题。也许我对他们的 API 太过分了，但是就这样吧。

我正在为我的网站使用登录按钮。点击后，用户将看到来自 FB 的弹出窗口，告诉他们有关我的应用程序的一些基本信息（基本详细信息、活跃用户数量和它请求的权限）

这一切都很好，花花公子。如果用户接受应用程序，页面将被重新加载，并且从应用程序请求的他们的信息将被插入到数据库中，并且将创建一个会话。

```
session_start();
require_once("model/functions.php");
require_once("controller.php"); 
require_once("model/facebook_api/src/facebook.php");

$facebook = new Facebook(array(
            'appId' => '123456789',
            'secret' => '123456789',
            'cookie' => true
        ));

        $access_token = $facebook->getAccessToken();
        $facebook->setAccessToken($access_token);

        if($access_token != "") 
        {
            $user = $facebook->getUser();

            if($user != 0)
            {
                $user_profile = $facebook->api("/".$user);  

                $fb_id = $user;
                $fb_first_name = $user_profile['first_name'];
                $fb_last_name = $user_profile['last_name'];
                $fb_email = $user_profile['email'];

//              The FB user_id and all of their other info is correct. Seriously!! 
                echo $fb_id."<br />";
                print_r($user_profile);

//              Query the DB to see if this person's info from FB is in there
                $query = "SELECT * 
                        FROM users 
                        WHERE fb_id = :fb_id";
                $stmt = $db->prepare($query);
                $stmt->execute(array(':fb_id' => $fb_id));
                $count = $stmt->rowCount();

                if($count == 1)
                {
                    while($row = $stmt->fetch(PDO::FETCH_ASSOC))
                    {
                        $_SESSION['id']      = $row['user_id'];
                        $_SESSION['fb_id']   = $row['fb_id'];
                        $_SESSION['first']   = $row['first_name'];  
                        $_SESSION['last']    = $row['last_name'];
                        $_SESSION['email']   = $row['email'];   
                        $_SESSION['photo']   = $row['photo'];   
                        $_SESSION['accuracy'] = $row['accuracy_rate'];
                    }
                } else
                {   
                    $img_data = file_get_contents('https://graph.facebook.com/'.$fb_id.'/picture?type=large');
                    $save_path = 'img/profile_pics/large/';
                    file_put_contents($save_path.''.$fb_id.'.jpg', $img_data);

                    $insert = "INSERT INTO 
                            users 
                            (first_name, 
                            last_name, 
                            email, 
                            photo, 
                            fb_id, 
                            accuracy_rate, 
                            date_joined, 
                            date_joined_int) 
                            VALUES 
                            (:first_name, 
                            :last_name, 
                            :email, 
                            :photo, 
                            :fb_id, 
                            :points, 
                            :date_joined, 
                            :date_int)";    
                    $params = array(':first_name' => $fb_first_name, 
                                ':last_name' => $fb_last_name, 
                                ':email' => $fb_email, 
                                ':photo' => $fb_id.'.jpg', 
                                ':fb_id' => $fb_id,
                                ':points' => '100',
                                ':date_joined' => date("M j, Y"),
                                ':date_int' => idate('z'));
                    $stmt = $db->prepare($insert);
                    $stmt->execute($params)or die('error');

                    print_r($params);
//                      Query the DB to see if this person's info from FB is in there
                    $query = "SELECT * 
                            FROM users 
                            WHERE fb_id = :fb_id";
                    $stmt = $db->prepare($query);
                    $stmt->execute(array(':fb_id' => $fb_id));

                    while($row = $stmt->fetch(PDO::FETCH_ASSOC))
                    {
                        $_SESSION['id']      = $row['user_id'];
                        $_SESSION['fb_id']   = $row['fb_id'];
                        $_SESSION['first']   = $row['first_name'];  
                        $_SESSION['last']    = $row['last_name'];
                        $_SESSION['email']   = $row['email'];   
                        $_SESSION['photo']   = $row['photo'];   
                        $_SESSION['accuracy'] = $row['accuracy_rate'];
                    }
                }
            } else
            {

            }
        }  else
        {

        } 
```

每次刷新页面时都会在数据库中插入一行。从未创建任何会话。更奇怪的是，插入到数据库中 fb_id 列中的 facebook id 属于属于测试帐户的帐户，FB 使用该帐户来测试提交以供批准的打开图形操作。我知道是因为在深入研究了数据库之后，我在数据库中看到了属于 FB 开放图形操作测试人员的一行。ID 是“2147483647”。这显然不是我打印出 $user_profile 数组时打印出的 ID。此外，在第一次重新加载页面后，甚至不应该发生插入查询，因为返回的 rowCount 设置为 1。插入查询仅在用户是第一次使用时才应该执行。沙盒模式未开启。我想可能与它有关。但是，它没有。

在不相关的说明中，FB 的 api 是否存在错误

```
$facebook->api("/me"); 
```

这似乎行不通。

```
$facebook->api("/".$user); 
```

似乎工作得很好。

现场示例可以在[这里找到](http://www.sportannica.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T05:01:43.617

Facebook`user_id`可能会超出支持的整数长度。在长 ID上发现了这一点，`iPhone SDK`例如。' `10000328862128237`'。我怀疑这也是你的问题，因为我得到了完全相同的数字' `2147483647`'。

# maven - 如何在 Maven 构建过程中压缩和优化 Javascripts？

> ID：15566174
> 
> 赞同：1
> 
> 时间：2013-03-22T08:52:05.617
> 
> 标签：maven, build, maven-3, maven-plugin

我很感兴趣有没有办法在 Maven 构建过程中压缩和优化 Javascripts 和 CSS？例如，我可以使用 Maven 插件或外部脚本来执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:05:20.353

您可以参考[Maven Javascript Compressor](https://stackoverflow.com/questions/3586455/maven-javascript-compressor)，尤其是[yuicompressor-maven-plugin](http://alchim.sourceforge.net/yuicompressor-maven-plugin/)。

> **使用Julien Lecomte 的[YUI Compressor](http://yui.github.com/yuicompressor/)**压缩 (Minify + Ofuscate) Javascript 文件和 CSS 文件。**因为 Javascript 压缩可能需要时间和资源，并且为了避免在运行时消耗重复（愚蠢）资源，这个插件在编译时对静态文件进行压缩。**

 **无论如何，您可能对[javascript-maven-tools感兴趣](https://code.google.com/p/javascript-maven-tools/)

> **JavaScript Compressor Maven Plugin** 使用 YUICompressor 作为压缩后端的灵活的 JavaScript 源压缩。具有压缩能力的选择性捆绑生成。

我希望这可能会有所帮助。**

# c# - 在等待主 UI 线程完成的单独线程上运行表单

> ID：15566176
> 
> 赞同：0
> 
> 时间：2013-03-22T08:52:10.753
> 
> 标签：c#, .net, vb.net, thread-safety

在 .NET 4.0 中，我正在处理一个加载时间很长（大约 20 秒）的应用程序，所以我想在加载时应用程序顶部的表单上显示一个嗖嗖的滚动选取框。

由于主 UI 线程正在执行所有数据 UI 元素的加载，我无法让它在单独的线程上执行，所以我最终尝试在新线程上运行表单。我最终将这段代码粘贴在表单本身中，让它在一个新线程上显示出来，如下所示：

```
Public Class frmWait

Public Property Message As String
    Get
        Return Me.lblMessage.Text
    End Get
    Set(value As String)
        If Not String.IsNullOrEmpty(value) Then
            Me.lblMessage.Text = value
        Else
            Me.lblMessage.Text = DefaultMessage
        End If
    End Set
End Property

Private OwnerThread As Thread
Private OwnerForm As Form
Private Const DefaultMessage As String = "しばらくお待ちください..."

Public Sub New(ByVal ParentForm As Form)

    InitializeComponent()

    Me.Message = DefaultMessage
    Me.OwnerForm = ParentForm

End Sub

Public Sub New(ByVal Message As String, ByVal ParentForm As Form)

    Call InitializeComponent()

    Me.Message = Message
    Me.OwnerForm = ParentForm

End Sub

Public Sub ShowOnThread()

    ' Position the form in the center of the owner
    With Me.OwnerForm
        Dim ownerCenter As New Point(.Location.X + CInt(.Width / 2), .Location.Y + CInt(.Height / 2))
        Me.Location = New Point(ownerCenter.X - CInt(Me.Width / 2), ownerCenter.Y - CInt(Me.Height / 2))
    End With

    Me.OwnerThread = New Thread(New ThreadStart(AddressOf Me.ShowDialog))
    Call Me.OwnerThread.Start()

End Sub

Public Shadows Sub Close()

    If Me.OwnerThread IsNot Nothing AndAlso Me.OwnerThread.IsAlive Then
        Call Me.OwnerThread.Abort()
    Else
        Call MyBase.Close()
    End If

End Sub

End Class 
```

这可能很笨拙，但我在应用程序的不同位置显示它，所以这似乎是最高效的代码方式......

它实际上工作得很好，但我不时遇到问题，需要一些帮助来解决这些问题。

*   有时，当表单关闭时，我会收到有关线程以不安全方式中止的错误。

*   目前我将表单手动放置在表单的中心，我希望它覆盖表单。理想情况下，我希望能够调用`.ShowDialog(ParentForm)`它，但是由于从一种形式到另一种形式的跨线程访问，这当然会引发异常。

任何有关如何解决此问题的建议将不胜感激。因为我对线程几乎一无所知，所以我可能像猴子一样编码，所以如果有更好的方法来完成这项工作，我非常想知道它。

我列出的代码在 VB.NET 中，但 C# 中的答案代码也很好（对于任何过分热心的重新标记者）

更新：

我现在意识到我应该在我的问题中提供更多细节......等待表单实际上不是我显示应用程序的第一个表单。首先是一个登录屏幕。当用户通过身份验证时，登录表单会启动应用程序的主界面，这是实际需要很长时间才能加载的表单。

我在登录表单和主界面之间显示等待表单。我还使用此表单来涵盖用户在主界面上启动的任何长时间运行的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:03:02.797

而不是尝试在单独的线程上显示对话框，您应该将加载代码移动到单独的线程/后台工作人员。

然后只需启动您的线程并在 form_load 上显示进度条并在线程完成时隐藏进度条：

```
Dim _progressForm As frmLoading

    Private Sub frmMain_Load(sender As System.Object, e As System.EventArgs) Handles Me.Load
        'start loading on a separate thread
        BackgroundWorker1.RunWorkerAsync()
        'show a marquee animation while loading
        _progressForm = New frmLoading
        _progressForm.ShowDialog(Me)
    End Sub

    Private Sub BackgroundWorker1_DoWork(sender As System.Object, e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
        'simulate a long load
        For i As Integer = 1 To 10
            System.Threading.Thread.Sleep(1000)
        Next
    End Sub

    Private Sub BackgroundWorker1_RunWorkerCompleted(sender As Object, e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
        _progressForm.Close()
    End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:30:01.580

VisualStudio 可以为您做到这一点。当然，您当然可以编写自己的，但如果您查看项目选项下`Application`的`Splash Screen`. 您可以将任何表单（启动表单除外）指定为初始屏幕。它在自己的线程上运行，您可以在启动期间编组调用它以推进进度条等。

[MSDN：启动画面](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.applicationservices.windowsformsapplicationbase.splashscreen.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:01:38.130

看看 TaskFactory.New

运行不同线程的线程代码以保持 UI 响应

[http://msdn.microsoft.com/en-us/library/ee782519.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-3](http://msdn.microsoft.com/en-us/library/ee782519.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:12:26.957

您可以使用`ApplicationContext`该类来允许先运行初始屏幕，然后在准备好时切换到主窗体。在对 Application.Run 的调用中使用它代替主窗体：

```
Application.Run(new MyApplicationCtx()) 
```

刚刚也为您搜索了一篇文章：

[http://www.codeproject.com/Articles/5756/Use-the-ApplicationContext-Class-to-Fully-Encapsul](http://www.codeproject.com/Articles/5756/Use-the-ApplicationContext-Class-to-Fully-Encapsul)

# c# - 如何从给定的纬度和经度中找到左下角和右上角的纬度和经度？

> ID：15566179
> 
> 赞同：0
> 
> 时间：2013-03-22T08:52:17.253
> 
> 标签：c#, google-maps, google-maps-api-3, map, latitude-longitude

我想按以下方式转换给定的纬度和经度：-

1.  左下纬度
2.  左下经度
3.  右上纬度
4.  右上角的经度

例如，我有一个纬度：29.0167 和经度：77.3833。现在我如何将这些坐标转换为左下纬度、左下经度、右上纬度和右上经度。

请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:06:24.243

我不确定我是否理解您要做什么，但如果我理解，您可以使用 Math.Floor 和 Math.Ceiling。他们给你的第一个整数更小，提供的数字分别更大。

```
float lon =77.38;
float lat = 29.01;
float loLat=Math.Floor(lat); //29
float upLat=Math.Ceiling(lat); //30
float loLon=Math.Floor(lat); //77
float upLon=Math.Ceiling(lat); //78 
```

然后，您可以从中计算出您想要的角。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:43:37.417

计算两点之间的距离。如果距离很小（比如 100 公里左右），那么您通常可以使用平面地球近似值。对于更长的距离，您需要使用“大圈”距离。AKA Haversine 公式。您计算的这个距离是正方形的对角线距离。请参阅此站点以获取您需要的所有公式：[http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

计算从左下角到右上角的方位角。同样，请参阅上面的站点以计算两个纬度/经度点之间的方位。

要获得右下角，您知道框边的距离是对角线距离除以 2 的平方根。这是来自直角三角形几何：x^2 + x^2 = 斜边。

从上面计算的方位角，加上 45 度。您现在有了一个范围 (D/sqrt(2)) 和一个指向右下角的方位。使用上面的站点从带有范围和方位的 lat/lon 计算 lat/lon。

通过减去 45 度重复左上角。

# c# - 将拖放事件推迟到容器 (WinForms)

> ID：15566185
> 
> 赞同：2
> 
> 时间：2013-03-22T08:52:31.980
> 
> 标签：c#, winforms, drag-and-drop

我有一个基本的 winforms MDI 应用程序，用作多文档编辑器。

**什么工作**

*   在没有打开文档的情况下，将文件从资源管理器拖到客户区会按预期触发容器拖放事件。
*   如果打开的文档不表明它支持拖放，则将文件从资源管理器拖放到它也会触发容器拖放事件。

**什么不工作**

*   如果我打开了一个支持拖放的文档，那么当文件被拖到它上面时，它会获取拖放事件。这是预期的，也是必需的，因为文档使用了拖动。但是对于某些数据类型（特别是在拖动文件时），我仍然希望父级处理它。

基本上我需要一种方法来选择性地将拖放事件推迟到父容器。

可以在此处下载基本示例应用程序。

[https://www.dropbox.com/sh/0iefczgq6bqmgwg/7F-SfeJLBL/Code/DragDropTest.zip](https://www.dropbox.com/sh/0iefczgq6bqmgwg/7F-SfeJLBL/Code/DragDropTest.zip)

本质上我想做的是

```
 private void EditorControl_DragEnter(object sender, DragEventArgs e)
    {
        Debug.WriteLine(this.Name + " DragEnter");

        // if we know about the data being dragged 
        if (e.Data.GetDataPresent("MyData"))
        {
            // control specific drag handler
        }
        else
        {
            // we don't know how to deal with the drop data so
            // pass the event to the parent form/control
            this.ParentForm.FireDragEnter();
        }
    } 
```

有什么想法吗？

# javascript - 两个 Javascript 函数，第二个仅适用

> ID：15566188
> 
> 赞同：1
> 
> 时间：2013-03-22T08:52:44.443
> 
> 标签：javascript, jquery

我有两个 javascript 函数，第一个从文本区域保存草稿，第二个是文本编辑器插件。如果我将它们一起加载，则只会显示第二个，但它们单独工作正常 - 不幸的是，不能一起使用。我将把这两个函数放在下面，如果你看到这两个函数的修复，请告诉我；如有必要，我可以显示外部插件 JS，但它相当大。预先感谢您的协助！

要补充的是，两者都使用相同的 jQuery 版本。

```
#1:

$(function() {
    setInterval(function (){
        var body = $("#body").val(); 
        var title = $("#title").val();
        var forum = $("#forum_id").val();

        DATA = "mid=" + <?php echo $mid ?> + "&body=" + body + "&title=" + title + "&forum=" + forum + "&draft_id=" + <?php echo $draft_id ?>;

        if (body.length > 0) 
        { 
            $.ajax({
                type: "POST",
                url: "inc/save_draft.php",
                data: DATA,
                cache: false,
                success: function(){
                    $("#timestamp").show().html("Saved as a draft!");
                }
            });
        }
        setTimeout(function(){
            $("#timestamp").hide();
        }, 500);// 15 seconds
    }, 1000);// 1 minute
});

#2:

$(function() {
    $("textarea").sceditor({
        plugins: 'bbcode'
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:07:35.090

这里的问题是您的`sceditor`插件将 textarea 转换为可编辑的 iframe，这`$("#body").val()`将产生一个空字符串，因为在表单提交之前编辑器不会填充它的值。

您需要更新您的第一个插件，以便它不获取`$('#body').val()`，而是`$('#body').sceditor('instance').val()`。

[演示](http://jsfiddle.net/6EQHA/)。尝试更改该文本区域中的内容，然后使用两种不同的方法来检索更改的内容。只有后者会起作用。

# javascript - 不允许元素在 y 轴上溢出

> ID：15566189
> 
> 赞同：0
> 
> 时间：2013-03-22T08:52:45.117
> 
> 标签：javascript, html, css, scrollbar

我有一个固定高度的 div。当我调整浏览器窗口的大小并且 div 的宽度变小时，div 内的元素会跳到扩展高度的下方。如何通过添加水平滚动条使元素可见？

我已经尝试了所有 CSS 滚动属性，但无法使其工作：

```
.dhButtonToolbar{
    position:absolute;
    top:6px;
    left:0;
    bottom: 5px;
    width: 60px;

    background-color:yellow;
    border:0px solid white;
    margin-left: 5px;
    margin-right:5px;
    margin-top: 5px;

}

@media screen and (max-aspect-ratio: 1/1) { 
    .dhButtonToolbar {
        height: 55px;
        left:5px;
       overflow-y:auto; //here my elements jump below I want to add a horizontall scrollbar
        right: 5px; 
    } 
```

JSFidlee：http: [//jsfiddle.net/x7xm3/2/](http://jsfiddle.net/x7xm3/2/)

尝试调整大小，元素会落在下面！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:11:24.023

只需添加一个主体并给它一个`min-width`. 这是**[你](http://jsfiddle.net/x7xm3/11/)**想要的吗？

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:37:30.800

我改变了你的jsfiddle。请检查这个。

```
jsFiddle: http://jsfiddle.net/x7xm3/16/ 
```

它完全工作。请检查。

# iphone - 由于 FB sdk 3.2 导致应用程序崩溃

> ID：15566196
> 
> 赞同：0
> 
> 时间：2013-03-22T08:52:56.023
> 
> 标签：iphone, ios, facebook

我正在使用新的 FB IOS SDK 和应用程序崩溃并得到以下错误

> -FBCacheIndex _updateEntryInDatabaseForKey:entry:, /Users/chrisp/src/ios-sdk/src/FBCacheIndex.m 中的断言失败由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“” ***第一次抛出调用堆栈：（0x334072a3 0x3b0a197f 0x3340715d 0x33cdcb13 0x10b3b1 0x10b635 0x10a7bf 0x3b4b911f 0x3b4b899b 0x3b4b8895 0x3b4c7215 0x3b4c73b9 0x3b4eda11 0x3b4ed8a4)

我制作了谷歌并在其他链接器标志中找到了像 -lsqlite3.0 这样的解决方案，并添加了 -lsqlite3 框架，缺少 FBsession。我已经完成了所有工作，但我仍然遇到同样的问题。

我的代码如下：

在 NSObject 类型的 FBClass.m 中

```
-(void) getFriendListForInvitation
 {

@ try {

    if (self.friendPickerController == nil) {
        // Create friend picker, and get data loaded into it.
        self.friendPickerController = [[FBFriendPickerViewController alloc] init];

        self.friendPickerController.title = @"Invite Friends";
        self.friendPickerController.delegate = self;
        [self.friendPickerController clearSelection];
        [self.friendPickerController loadData];
        self.friendPickerController.itemPicturesEnabled = TRUE;

    }
    else{
        [self.friendPickerController clearSelection];
        [self.friendPickerController updateView];
    }
    self.friendPickerController.allowsMultipleSelection = FALSE;

    // iOS 5.0+ apps should use [UIViewController presentViewController:animated:completion:]
    // rather than this deprecated method, but we want our samples to run on iOS 4.x as well.
    if([[[UIDevice currentDevice] systemVersion] intValue] >= 5.0)
        [[[appdelegate.navigationController viewControllers] lastObject] presentViewController:self.friendPickerController  animated:TRUE completion:nil];
    else
        [[[appdelegate.navigationController viewControllers] lastObject] presentModalViewController:self.friendPickerController animated:YES];

}
@catch (NSException *exception) {
    NSLog(@"%@",[exception description]);
} 
```

}

请帮我解决这个问题......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:39:38.900

你设法解决了这个问题吗？我遇到同样的问题。
我确定此异常是由`cache.db`facebook 正在寻址的目录中缺少文件引起的。您可以在模拟器的帮助下进行检查。缺少的模拟器文件的目录是：

```
/Users/<user name>/Library/Application Support/iPhone Simulator/6.1/Applications/<app id>/Library/Caches/DataDiskCache 
```

但是我不知道为什么文件丢失了。

编辑：
我想出的唯一方法是使用简单的两行代码从应用程序中清除会话数据：

```
FBSession.activeSession = nil;
[[NSUserDefaults standardUserDefaults] removeObjectForKey:@"FBAccessTokenInformationKey"]; 
```

不幸的是，这个解决方案从未真正关闭会话，但至少它提供了应用程序的正确工作流程。

# javascript - 如何根据从cookie中检索的值来选择选择框值

> ID：15566201
> 
> 赞同：0
> 
> 时间：2013-03-22T08:53:17.917
> 
> 标签：javascript, jquery

我能够获取存储在会话中的值。现在我想在我的选择框中显示 cookie 值作为选定值。

我尝试使用下面的代码，但不幸的是我的 cookie 值没有被选中。

请帮我解决我的问题。

```
<script>
        $(document).ready(function(){  
            $('#continue').click(function() {
                 var singleValues = $("#select_letter").val(); 
                $.cookie("language", singleValues); 
            }) 

    alert($.cookie('language')); //getting the correct value which are set in cookie

    $('#select_letter option[value="'+$.cookie('language')+'"]').attr('selected','selected');       
           //This is not working,Not setting the cookie value as selected

        });
    </script>  
        </head>
        <body> 
            <select id='select_letter'>
                <option>Java</option>
                <option>C</option>
                <option>php</option>
                <option>python</option>
                <option>c sharp</option> 
            </select> 
            <input type="button" id='continue' value="Save as default value"/>                
                   <!-- On click of this link the current page will load -->
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:09:10.863

每个选项都应该有“价值”

```
<select id='select_letter'>
    <option value="Java">Java</option>
    <option value="C">C</option>
    <option value="php">php</option>
    <option value="python">python</option>
    <option value="c sharp">c sharp</option> 
</select> 
```

进而

```
$("#select_letter").val($.cookie("language")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:17:02.917

您可以使用以下代码设置选定的值

```
$('#select_letter').val($.cookie('language')).attr('selected', true); 
```

# jquery - 检查是否有课程并检查是否被点击

> ID：15566203
> 
> 赞同：1
> 
> 时间：2013-03-22T08:53:24.730
> 
> 标签：jquery, css

我有以下脚本：

```
 $(document).ready(function(){      
        if($('.shoppers-images ul li').hasClass('selected2') && $('#the-selector div.jqTransformSelectWrapper ul li a').data('clicked')){
             $('.content-register').show(1000);
                return true;
        }
        }); 
```

我想要做的是检查是否`$('.shoppers-images ul li')`有一个“selected2”类并且第二个元素已被点击......所以我可以继续我的代码......

有什么建议么？谢谢

这是我添加课程的地方：

```
 $(document).ready(function () {
            $('.shoppers-images ul li').click(function () {
                $('.shoppers-images ul li').removeClass('selected2');
                $(this).addClass('selected2');
            });
        });

resolved code!

   $(document).ready(function () {
        $('#the-selector div.jqTransformSelectWrapper ul li a.selected').addClass('default');
        $('.shoppers-images ul li').click(function () {
            $('.shoppers-images ul li').removeClass('selected2');
            $(this).addClass('selected2');
            if($('#the-selector div.jqTransformSelectWrapper ul li a.selected').hasClass('default') === false)
            {
               $('.shoppers-images ul li').each(function() {
                if($(this).hasClass('selected2')){
                    $('.content-register').show(1000);
                 }
                });
            }
        });
        $('#the-selector div.jqTransformSelectWrapper ul li a').click(function(){
            $('#the-selector div.jqTransformSelectWrapper ul li a.default').removeClass('default');
            var countrySect = $('#the-selector div.jqTransformSelectWrapper span').text(); 
            $('.register-state div.jqTransformSelectWrapper span').html(countrySect);

            $('.shoppers-images ul li').each(function() {
                if($(this).hasClass('selected2')){
                    $('.content-register').show(1000);
            }
        });
      });
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:59:44.580

```
$("#the-selector div.jqTransformSelectWrapper ul li a").click(function(e) {
    e.preventDefault();
    $('.shoppers-images ul li').each(function() {
        if($(this).hasClass('selected2')){
          // do something
        }
    });
}); 
```

# java - JMX 中的最大 MBean 数

> ID：15566204
> 
> 赞同：1
> 
> 时间：2013-03-22T08:53:35.243
> 
> 标签：java, monitoring, jmx, max, mbeans

JMX 应用程序可以支持的 MBean 的最大数量是多少？如果有，那是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-10T21:21:51.253

我使用一个相当大的多租户应用程序。我们更改了与库的交互，最终每个租户都有多个 MBean。这会导致大量 MBean 注册（数万）。我们观察到，就注册 bean 的时间而言，这开始曲棍球棒的速度非常快（在 2,000 时需要几秒钟）。我们在 mbean 注册中观察到很多线程阻塞，具体来说：

*   com.sun.jmx.mbeanserver.Repository.contains(ObjectName):461
*   com.sun.jmx.mbeanserver.Repository.addAllMatching（地图，集，ObjectNamePattern）：229
*   com.sun.jmx.mbeanserver.Repository.addMBean（DynamicMBean，ObjectName，RegistrationContext）：415
*   com.sun.jmx.mbeanserver.Repository.ObjectNamePattern.matchKeys(ObjectName):190

`addAllMatching`and`matchKeys`似乎遍历所有条目，而不是使用`Map.get`. 另外两个是锁获取或同步。

我们有大量的空闲堆，CPU 使用率是正常的（3-5%）。我们应用程序的其他部分表现正常。简而言之，随着 MBean 的数量以指数方式增长，围绕创建 MBean 存在争议。所有这些都在 JDK 11 上。

更糟糕的是，我们禁用了 JMX，问题仍然存在。该解决方案涉及确保库不尝试通过配置注册 mbean。

简而言之：是的，在 ~2000 年之后添加 MBean 变得不切实际。我没有在不同的环境中对此进行过测试，因此个人体验可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:22:50.463

不，您仅受分配给 JVM 的堆的限制。

# html - 每个屏幕的 Div 大小相同

> ID：15566206
> 
> 赞同：1
> 
> 时间：2013-03-22T08:53:35.373
> 
> 标签：html, css

在我的网站上，人们可以在板上发布图像并拖动它们。

目前我使用以下内容：

```
width:60%;

height 40%; 
```

他们可以保存他们的工作。

该位置保存有边距，因此图像可以`top:50px;`和`left:150px;`

所以它在 div 左边框的右侧 50px 和从 div 顶部向下 50px 的位置。

如果他们加载他们的工作，它必须看起来完全一样。

因此，如果图像位于右下角，则加载文件时它必须位于右下角。

我的问题是，如果用户以不同的分辨率加载它，它会占用边距，如果下一个屏幕上的屏幕分辨率更大，则图像不会出现在右下角，因为有更多空间，因为 1200 的 50% 是不到 1900 年的 50%。

所以我必须在 px 中使用`width`and`height`但是如果我在 1200 px 上设置 600px 它会很好看，但是在 1900px 上设置 600px 就不会很好看。

有没有办法使用 px 但让它在每个页面上看起来都很好？

**所以基本上我想使用 px 但它必须看起来相同（就像我使用 % 时一样）所以边距将相同并且页面看起来相同在大分辨率上没有大的开放空间。**

![例子](../Images/9cbd93798b3c01bab3391b1d713253cc.png)

在示例中，我在 1366 年制作了一块板，并在 1024 年重新打开了它，图像从左侧占据边距，因此它不在原始板上。

但是板（黄色背景）是屏幕的相同百分比。

所以我想要一个屏幕百分比相同的板，但在每个分辨率上加载的图像都相同，所以 1025 屏幕的右下角必须是 1366 屏幕的右下角。

如果我只使用 px，则该网站在所有分辨率上看起来都不同，这就是我想要阻止的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T09:01:07.217

听起来你必须做的是 CSS 中的自适应主题或响应式设计。

```
@media screen and (max-width: 1024px){
  img.bg {
    left: 50%;
    margin-left: -512px; }
} 
```

对于最大宽度为 1024px 的屏幕，设置 img 元素。您为要考虑的每个屏幕尺寸创建其中的一些，瞧，您应该能够对用户看到的内容进行完全细粒度的控制，而不管他们的屏幕尺寸是什么。

# c# - sqldatetime溢出异常c#.NET

> ID：15566210
> 
> 赞同：5
> 
> 时间：2013-03-22T08:53:49.463
> 
> 标签：c#, sql, sqlexception

```
string con = ConfigurationManager.ConnectionStrings["connectionString"].ConnectionString;

        SqlConnection cn = new SqlConnection(con);
        string insert_jobseeker = "INSERT INTO JobSeeker_Registration(Password,HintQuestion,Answer,Date)"
      + " values (@Password,@HintQuestion,@Answer,@Date)";

        SqlCommand cmd = new SqlCommand();
        cmd.Connection = cn;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = insert_jobseeker;

 cmd.Parameters.Add(new SqlParameter("@Password", SqlDbType.VarChar, 50));
            cmd.Parameters["@Password"].Value = txtPassword.Text;
            cmd.Parameters.Add(new SqlParameter("@HintQuestion", SqlDbType.VarChar, 50));
            cmd.Parameters["@HintQuestion"].Value = ddlQuestion.Text;
            cmd.Parameters.Add(new SqlParameter("@Answer", SqlDbType.VarChar, 50));
            cmd.Parameters["@Answer"].Value = txtAnswer.Text;

            **cmd.Parameters.Add(new SqlParameter("@Date", SqlDbType.DateTime));
            cmd.Parameters["@Date"].Value = System.DateTime.Now** 
```

我得到了错误

> *“SqlDateTime 溢出。必须在 1/1/1753 12:00:00 AM 和 12/31/9999 11:59:59 PM 之间。”*

解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:11:13.203

尝试将`@Date`SQL Server 端的类型更改为`DATETIME2(7)`

然后在您的代码中使用此行：

```
cmd.Parameters.Add(new SqlParameter("@Date", SqlDbType.DateTime2)); 
```

如图所示，您的代码看起来不错，但由于本地化问题或您的区域/时间设置有问题，转换可能发生了一些问题，所以看看这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:12:58.793

“日期”是关键字，请勿将其用作列名。如果必须，请在插入语句中将其括在 [] 中：[Date] 但最好将其更改为其他内容，例如“RegistrationDate”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:02:55.047

如果您正在使用`SQL Server 2008`及以上，您可以这样做：

`@Date`第 1 步：将数据类型从更改`DATETIME`为`DATETIME2(7)`

第 2 步：在您的代码隐藏中，使用以下命令：

```
SqlDbType.DateTime2 
```

# android - Android检查设备上是否可以使用意图RECORD_SOUND_ACTION

> ID：15566217
> 
> 赞同：0
> 
> 时间：2013-03-22T08:54:03.293
> 
> 标签：android, android-intent, audio-recording

我使用 Intents 进行录音。在一个上，我的设备 RECORD_SOUND_ACTION 无法访问。如何检查设备上是否有 RECORD_SOUND_ACTION 可用？

我使用这部分代码

```
Intent intent = new Intent(MediaStore.Audio.Media.RECORD_SOUND_ACTION);
startActivityForResult(intent, RQS_RECORDING); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:00:39.430

请试试这个：

```
Intent intent =
new Intent(MediaStore.Audio.Media.RECORD_SOUND_ACTION);  
if (isAvailable(getApplicationContext(), intent)) {  
startActivityForResult(intent, RQS_RECORDING);
} 

public static boolean isAvailable(Context ctx, Intent intent) {  

   final PackageManager mgr = ctx.getPackageManager();  

   List<ResolveInfo> list =  
      mgr.queryIntentActivities(intent,   
      PackageManager.MATCH_DEFAULT_ONLY);  

      return list.size() > 0;  

  } 
```

这对我来说可以。

# ruby - 在带有偏移量的字符串中搜索所有出现的字母

> ID：15566220
> 
> 赞同：0
> 
> 时间：2013-03-22T08:54:15.707
> 
> 标签：ruby

我有一个字符串如下：

```
--d--d-d---d-- 
```

我想在这个字符串中找到所有出现的 'd' 及其偏移量。

但是，执行以下操作只会让我返回第一个结果：

```
irb(main):001:0> m = /d/.match "d--d-d---d"
=> #<MatchData "d">
irb(main):002:0> m.size
=> 1 
```

我究竟做错了什么？我认为`match`将匹配字符串中所有出现的正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:10:02.207

要获得偏移量，您可以使用如下循环：

```
s = '--d--d-d---d--'
offset = 0
while md = /d/.match(s,offset)
  p md.offset(0)[1]          
  # MatchDate#offset Returns a two-element array 
  # containing the beginning and ending offsets 
  offset = md.offset(0)[1]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:49:22.990

[`Regexp#match`](http://www.ruby-doc.org/core-2.0/Regexp.html#method-i-match)只运行一次模式。`MatchData`可以包含多个匹配项，因此可以包含[多个偏移量](http://www.ruby-doc.org/core-2.0/MatchData.html#method-i-offset)。第一个是整个匹配，其他是正则表达式中捕获组的内容。正则表达式的多次应用导致 MatchData 中没有任何内容。

[`String#index`](http://www.ruby-doc.org/core-2.0/String.html#method-i-index)直接产生偏移量并且可以很容易地用于遍历字符串。

```
s = '--d--d-d---d--'
[].tap{ |offsets| i=-1; while i = s.index('d', i+1); offsets << i; end }
=> [2, 5, 7, 11] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:44:16.187

我正在寻找的答案实际上是在这个问题上：[如何获取字符串中所有出现的 Ruby 正则表达式的匹配数据？](https://stackoverflow.com/questions/6804557/how-do-i-get-the-match-data-for-all-occurrences-of-a-ruby-regular-expression-in)

就像我说的，我认为 MatchData 结果应该包含所有匹配项。（我从这里的 Ruby 核心文档中得到了这个印象：[http](http://www.ruby-doc.org/core-2.0/MatchData.html) ://www.ruby-doc.org/core-2.0/MatchData.html ）。

因此，虽然我仍然不完全理解那部分，但至少上面的答案可以帮助我了解所有情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T12:05:44.277

作为变体：

```
str = '--d--d-d---d--'
str.each_char.with_index.select{|el| el[0] == "d"}.map(&:last) 
```

结果：

```
[2, 5, 7, 11] 
```

只是字母的位置从 0 开始。如果你需要它从 1 开始使用`with_index(1)`，那么结果将是：

```
[3, 6, 8, 12] 
```

# actionscript-3 - 应用内购买允许什么

> ID：15566224
> 
> 赞同：0
> 
> 时间：2013-03-22T08:54:27.607
> 
> 标签：actionscript-3, cocos2d-iphone, in-app-purchase

我想了解一些有关苹果应用内购买选项的信息。

我似乎找不到他们解释实际允许的任何地方。因为我想在 asctionscript 中创建一个带有交互式书籍的数字书店，并通过应用内购买为用户提供交互式书籍（单独的 swf 文件），但显然不允许在您的 swf 文件中包含任何代码，因此该选项不可用窗口（顺便说一句，如果有人知道另一个选项而不是 swf 文件，请告诉我）。

然后有想过可能从 cocos2d 开始，但我不知道如何将单独的交互式书籍分发给用户。这里有哪些选择？

所以我的问题是：应用内购买允许什么，我如何通过应用内购买提供交互式书籍（可以点击元素和查看动画等）。

其次，更重要的是：

是否有可能通过 as3.0 做到这一点？最好我想通过actionscript来做，但谁能告诉我它是否可能？我可以通过应用内购买为用户提供可按元素和动画等的交互式书籍吗？并且将所有书籍都放在应用程序中并解锁它们不是一种选择。我希望能够单独提供书籍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:22:32.927

1) 你不能在 iPhone 上播放 swf 文件。并非没有将它们转换为 HTML5 或视频。这可能使它们无法交互（不确定 HTML5）。

2) 将任何可执行代码下载到 iOS 设备是不可能的。有一些灰色区域，例如下载的 Lua 脚本，它只包含数据，但由于它们的性质是可执行代码。这样做是有风险的，而不仅仅是下载 XML 或纯文本/二进制文件。

3) 苹果从来没有告诉你到底什么是允许的。他们告诉你什么是不允许的，即使在那里他们仍然含糊不清。总有一些灰色区域，Apple 保留定义灰色区域中的内容是否为他们所接受的权利。如果您认为您的应用程序处于灰色区域，则需要制定备份计划以防 Apple 不喜欢它，或者删除该应用程序，因为他们最初没有发现它有问题但后来改变了主意。

4) 阅读[iOS Developer Program License Agreement](https://developer.apple.com/programs/terms/ios/standard/ios_program_standard_agreement_20120912.pdf)和[App Store Review Guidelines](https://developer.apple.com/appstore/resources/approval/guidelines.html)。你可能需要重新阅读一些句子，因为它有点像律师说话，虽然不是很难理解。

5) 没有任何保证。最佳选择：查看与您类似的应用程序，看看您是否可以找到其他应用程序实施的支付模式。如果您找到几个这样的应用程序，那么这样做很可能是可以的。如果您找不到任何可以远程执行您想做的事情的应用程序，请当心。

6）我认为你走错了路。使用 iBooks。问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:30:32.537

绝对走在正确的轨道上，

我认为，如果您正在寻找动画书籍系列或比简单文本格式更具交互性的东西，您应该可以使用应用内购买。如果您复制 iBooks 已经提供的内容，您只会遇到麻烦。

你需要一个 ANE 才能让你从 AS3 访问 InApp Purchases API，那里有一些，我会无耻地插入我的：

[http://distriqt.com/native-extensions#in-app-purchase](http://distriqt.com/native-extensions#in-app-purchase)

您将遇到的主要问题实际上是分发附加内容，因为您可能无法像在普通 flash/AIR 应用程序中那样加载 swf 并在编译的 iOS AIR 应用程序中播放它。您必须进行一些研究，看看您是否可以创建一个只加载图像和动画序列（以 xml 或其他格式）的播放器。

祝你好运

# c# - Visual Studio - 平台

> ID：15566228
> 
> 赞同：1
> 
> 时间：2013-03-22T08:54:38.573
> 
> 标签：c#, c++, visual-studio-2012, platform

我在一个解决方案中有几个项目。项目使用：C++、C++/CLI、C# 编写。

目标是只选择 x86/x64 平台，而不是 Win32、x86、x86、Mixed、AnyCPU。

我不能将 C++ 平台目标更改为 x86，仅更改为 Win32。我该怎么做，或者如何屏蔽，以便我在工具管理器中只有 x86/x64 选择？（编译只针对 Intel/AMD cpus）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:12:58.670

从菜单构建 > 配置管理器，您可以编辑解决方案的所有配置。您可以根据需要命名一个解决方案（在*活动解决方案平台*中选择“新”时，您可以编写您想要的名称）并为每个项目分配您想要的配置（Win32、x86 等......）

您在 VS2012 的工具栏中看到的是活跃的解决方案平台。如果您希望将其命名为“我的 x86 平台”，您可以这样做；）

# mysql - 连接来自 2 个 MySQL 表的数据

> ID：15566233
> 
> 赞同：0
> 
> 时间：2013-03-22T08:54:45.013
> 
> 标签：mysql, join

我有一个关于从 MySQL 数据库中加入 2 个表中的数据的问题。首先，我将解释我目前拥有的东西，然后我希望尽可能清楚。

我在数据库中有 2 个表，如下所示：

```
Table: Subscriptions
Columns:
ID          int(11) PK AI
Klant ID    int(11) 
Mail ID     int(11) 
Status      varchar(15) 
Datum       varchar(15)

ID   Klant_ID Mail_ID Status Datum
123  6        6       90     21-03-2013
124  6        6       10     21-03-2013
125  6        5       90     21-03-2013
126  6        5       10     21-03-2013
127  6        1       90     20-03-2013
128  6        1       10     20-03-2013
129  6        2       10     21-03-2013
130  6        2       90     21-03-2013
131  6        4       90     21-03-2013
132  6        4       10     21-03-2013 
```

和：

```
Table: Mail
Columns:
ID  int(11) PK AI
Content longtext 
Datum   varchar(15) 
Titel   varchar(150) 

ID  Content                 Datum       Titel
1   (alot of encoded html)  18-03-13    test
2   (alot of encoded html)  18-03-13    test2
4   (alot of encoded html)  18-03-13    alles weer testen
5   (alot of encoded html)  20-03-13    testje
6   (alot of encoded html)  21-03-13    Statusupdate week 6 
```

我现在正在使用这两个查询从表中选择数据：

```
SELECT ID, Titel FROM Mail
SELECT * FROM Subscriptions,
(SELECT MAX(ID) as ids, Mail_ID FROM Subscriptions
    WHERE Klant_ID = '".$_GET["ID"]."' GROUP BY Mail_ID) table2
WHERE ID=table2.ids 
```

我想使用 JOIN 获取查询，以便能够使用 html 创建此表：

![在此处输入图像描述](../Images/b344ac4cc682d962c47473f4465e3faa.png)

自从我昨天第一次使用 JOIN 以来，我个人并没有太多使用 JOIN 的经验，我可以进行简单的 JOIN 查询，但我只是不知道该怎么做。如果您有更多问题，请在评论中提问。如果有人可以帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:00:06.020

这是您的表之间的简单连接

```
SELECT Mail_ID, Titel, Status, Subscriptions.Datum FROM Subscriptions
JOIN Mail ON (Subscription.Mail_ID=Mail.ID)
    WHERE Klant_ID = '".$_GET["ID"]."' GROUP BY Mail_ID 
```

行的顺序是随机的，如果你想得到最后的数据，你的查询是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:00:06.207

尝试：

```
select mail.id, mail.titel, subscriptions.status, subscriptions.datum
from mail join subscriptions on mail.id = subscriptions.mail_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:05:07.213

```
SELECT e.ID ,e.Titel,ea.Status,ea.Datum 
    FROM Mail e 
        LEFT JOIN Subscriptions ea 
            ON e.ID = ea.Mail_ID
            WHERE ea.Klant_ID = '".$_GET["ID"]."' 
            GROUP BY Mail_ID)
    ORDER BY e.ID ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:35:50.903

Tyvm @kolonel peteruk、@Kaii 和 @JaMaBing 为您解答！

在您的帮助下，我能够将我的查询与您的合并。我终于用这个查询让它工作了：

```
SELECT Mail.ID, Mail.Titel, Subscriptions.ID, Subscriptions.Status, Subscriptions.Datum,      Subscriptions.Mail_ID, Subscriptions.Mail_ID, Subscriptions.Klant_ID 
FROM NAW.Subscriptions
JOIN NAW.Mail 
ON Mail.ID = Subscriptions.Mail_ID, 
(SELECT MAX(Subscriptions.ID) as ids, Mail_ID 
FROM NAW.Subscriptions
WHERE Klant_ID =6  
GROUP BY Mail_ID) table2
WHERE Subscriptions.ID=table2.ids 
```

# android - Android：file.getName() 错误

> ID：15566238
> 
> 赞同：0
> 
> 时间：2013-03-22T08:55:01.513
> 
> 标签：android, file, filenames

我正在开发一项活动以探索平板电脑中包含的文件，用户也可以在其中选择其中一个并打开它。但是，当我检索文件名时，它说有一个 NPE。我怎样才能检索文件名以便以后打开它？这是我的代码：文件资源管理器：

```
public class MainActivity extends ListActivity {

private List<String> item = null;
private List<String> path = null;
private String root;
private TextView myPath;
static String A;
static File file;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    myPath = (TextView)findViewById(R.id.path);

    root = Environment.getExternalStorageDirectory().getPath();

    getDir(root);
}

private void getDir(String dirPath)
{
    myPath.setText("Location: " + dirPath);
    item = new ArrayList<String>();
    path = new ArrayList<String>();
    File f = new File(dirPath);
    File[] files = f.listFiles();

    if(!dirPath.equals(root))
    {
        item.add(root);
        path.add(root);
        item.add("../");
        path.add(f.getParent());    
    }

    for(int i=0; i < files.length; i++)
    {
        File file = files[i];

        if(!file.isHidden() && file.canRead()){
            path.add(file.getPath());
            if(file.isDirectory()){
                item.add(file.getName() + "/");
            }else{
                item.add(file.getName());
            }
        }   
    }

    ArrayAdapter<String> fileList =
            new ArrayAdapter<String>(this, R.layout.row, item);
    setListAdapter(fileList);   
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    File file = new File(path.get(position));

    if (file.isDirectory())
    {
        if(file.canRead()){
            getDir(path.get(position));
        }else{
            new AlertDialog.Builder(this)
                .setIcon(R.drawable.ic_launcher)
                .setTitle("[" + file.getName() + "] folder can't be read!")
                .setPositiveButton("OK", null).show();  
        }   
    }else {
            file.getName();
            XMLPullParserActivity.Parsear(this);
                Intent i = new Intent(MainActivity.this, Correccion.class);
                 startActivity(i);

}

  }
public static String getA(){
    A = XMLPullParserHandler.getA();
    return A;
   }
public static String fileName(){
    return file.getName();
}
} 
```

在 Activity 中打开选定的文件：

```
public class XMLPullParserActivity {

ListView listView;
public static  void Parsear(Context context){

    List<Puntuacion> puntuacion = null;
    try {
        XMLPullParserHandler parser = new XMLPullParserHandler();
        puntuacion = parser.parse(context.getAssets().open(MainActivity.fileName()));

    } catch (IOException e) {
        e.printStackTrace();
    }
}

} 
```

日志猫：

```
03-22 09:57:44.296: W/ActivityThread(4943): Application com.example.androidexplorer can be debugged on port 8100...
03-22 09:57:44.398: D/AbsListView(4943): Get MotionRecognitionManager
03-22 09:57:44.507: D/libEGL(4943): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
03-22 09:57:44.523: D/libEGL(4943): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
03-22 09:57:44.523: D/libEGL(4943): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
03-22 09:57:44.640: D/OpenGLRenderer(4943): Enabling debug mode 0
03-22 09:58:02.656: D/AndroidRuntime(4943): Shutting down VM
03-22 09:58:02.656: W/dalvikvm(4943): threadid=1: thread exiting with uncaught exception (group=0x410a42a0)
03-22 09:58:02.679: E/AndroidRuntime(4943): FATAL EXCEPTION: main
03-22 09:58:02.679: E/AndroidRuntime(4943): java.lang.NullPointerException
03-22 09:58:02.679: E/AndroidRuntime(4943):     at com.example.androidexplorer.MainActivity.fileName(MainActivity.java:104)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at com.example.androidexplorer.XMLPullParserActivity.Parsear(XMLPullParserActivity.java:25)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at com.example.androidexplorer.MainActivity.onListItemClick(MainActivity.java:90)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at android.widget.AbsListView.performItemClick(AbsListView.java:1280)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:3067)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at android.widget.AbsListView$1.run(AbsListView.java:3968)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at android.os.Handler.handleCallback(Handler.java:615)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at android.os.Looper.loop(Looper.java:137)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at android.app.ActivityThread.main(ActivityThread.java:4895)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at java.lang.reflect.Method.invokeNative(Native Method)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at java.lang.reflect.Method.invoke(Method.java:511)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
03-22 09:58:02.679: E/AndroidRuntime(4943):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:14:24.253

你神经兮兮`initilize`的`static File file`。在每个方法中，您都在本地重新声明 File 文件，因此您永远不会为类变量分配有效的引用。这里`NPE`. 大概

例如，在`onListItemClick`

```
File file = new File(path.get(position)); 
```

将隐藏类变量的声明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:16:47.157

文件为空，因为它没有被初始化，你不能在空指针上调用 .getName() 方法

# c# - 创建可用作 Func/method 的类型

> ID：15566240
> 
> 赞同：2
> 
> 时间：2013-03-22T08:55:02.803
> 
> 标签：c#, linq, types, expression

我一直在玩[LINQ to Z3](http://channel9.msdn.com/Shows/Going+Deep/Bart-De-Smet-LINQ-to-Z3)以获得乐趣（不是生产用途）。

我最终以这种语法作为开始：

```
var i = 123;
var test2 = from t in TheormProver.NewTheorm()
            let f = TheormProver.Func<int, bool>()
            let a = TheormProver.Int
            let g = TheormProver.Func<bool, int>()
            where !f(a * 2) && g(f(g(f(4)))) == i * a && a < g(f(a))
            select new { f = f.ToString(), g = g.ToString(), a, asd = "Test extra property" };

var solution = test2.Solve(); // Edited in for clarification
// note that test2 is a TheormProver<T> which has a "T Solve()" method defined. 
```

静态`TheromProver.Int`和`TheormProver.Func`方法/属性当前仅返回一个基本类型（根据它们的名称）。

展望未来，我想制作一种`Variable<T>`包含更多信息的类型，而不仅仅是一个值。

**TL; DR：**我遇到的问题是我希望变量是一种自定义类型，我可以向其中添加字段和属性，`f`但**我**仍然希望能够使用我在 where 中获得的语​​法来使用它们子句（即作为方法/ ）。`g`**`Func`**

 **那么，**如何在添加/拥有自己的属性时创建可用于方法语法的自定义类型？**

请注意，我不在乎调用该方法是否什么都不做，或者不起作用，因为我将操纵 where 子句，因此它们永远不会被调用/执行。

* * *

**例子：**

```
var test2 = from t in TheormProver.NewTheorm()
            let f = TheormProver.Func<int, bool>()
            let a = TheormProver.Int
            where !f(a * 2) && a > 3 // f is used to create a method call expression
            select new { f , a };

var testSolution = test2.Solve();

var fSolution = testSolution.f; // F is its own type with unique properties/fields.

var fConstraints = fSolution.Constraints;

var fSomeProperty = fSolution.SomeProperty;

foreach(var constraint in fConstraints)
{
    //.....
} 
```

到目前为止，我已经模拟了一个正在进行的语法的快速示例：

[http://liveworkspace.org/code/3Fm6JM$0](http://liveworkspace.org/code/3Fm6JM%240)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Linq.Expressions;

namespace ConsoleApplication1
{
    class TheormProver
    {
        public static int Int { get { return default(int); } } // Really this would return my Variable<int>
        public static Func<T, TResult> Func<T, TResult>() { return default(Func<T, TResult>); } // Really this would return my Variable<Func<T, TResult>>

        protected List<Expression> Constraints; // Holds constraints / where clauses that get translated into the Z3 language

        //This gets called when we do the first "let" and gets us into the correctly typed world with a generic parameter
        public virtual TheormProver<T> Select<T>(Func<TheormProver, T> sel)
        {
            return new TheormProver<T>(Constraints);
        }
    }

    // This is what the user of the library sees and is returned by a from t in new TheormProver(). T will be the anonymous type from the last let
    class TheormProver<T> : TheormProver
    {
        public TheormProver(List<Expression> Constraints)
        {

        }

        // This gets called on subsequent "let"s, going from the anonymous type with one property "f" to one with 2, "f, g". Chaining this way allows as many lets as we want
        public virtual TheormProver<U> Select<U>(Expression<Func<T, U>> sel)
        {
            return new TheormProver<T, U>(sel, Constraints.ToList());
        }

        public virtual TheormProver<T> Where(Expression<Func<T, bool>> constraint)
        {
            var result = (TheormProver<T>)this; // This should be a clone to allow composable queries

            result.Constraints.Add(constraint);

            return result;
        }

        public virtual T Solve(out bool foundSolution)
        {
            // TODO: Call Z3 and get a solution
            foundSolution = false;
            return default(T);
        }
    }

    internal class TheormProver<T, U> : TheormProver<U>
    {
        private LambdaExpression Selector;
        private TheormProver<T> InternalTheorumProver;

        public TheormProver(Expression<Func<T, U>> selector, List<Expression> constraints)
            : base(constraints)
        {
            Selector = selector;
            InternalTheorumProver = new TheormProver<T>(constraints);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var test = from t in new TheormProver()
                       let f = TheormProver.Func<int, bool>()
                       let g = TheormProver.Func<bool, int>()
                       let a = TheormProver.Int
                       where g(f(a)) == 0
                       select new { f, g, a };

            bool foundSolution;
            var testSolution = test.Solve(out foundSolution);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:50:38.653

我为您的原始代码创建了一个简单的“测试平台”：http: [//liveworkspace.org/code/3Bl7wC$0](http://liveworkspace.org/code/3Bl7wC%240)。

借助一点动态魔法，您可以使用以下类作为替代品`Func<T1, T2>`：

```
public class MyCallable<T1, T2> : DynamicObject
{
    private readonly Expression<Func<T1, T2> > _wrapped;
    private readonly Func<T1, T2> _compiled;

    public MyCallable(Expression<Func<T1, T2>> towrap) 
    { 
        _wrapped = towrap; _compiled = _wrapped.Compile(); 
    }

    public override bool TryInvoke(InvokeBinder binder, object[] args, out object result)
    {
        if ( (args.Length == 1) && 
             (args[0].GetType() == typeof(T1)))
        {
            Console.WriteLine(@"Invoking ""{0}"" on {1}", _wrapped, args[0]);
            result = _compiled((T1) args[0]);
            return true;
        }
        else
        {
            //throw new ArgumentException("Cannot invoke " + _wrapped + " with the arguments passed");
            result = null;
            return false;
        }
    }
} 
```

如您所见，它将您的类定义为“动态”的，并允许您尝试调用它，就好像它是委托/函数/...一般可调用：

```
// in "TheormProver"
public static dynamic Func<T1, T2>() { return new MyCallable<T1, T2>(arg1 => default(T2)); } 
```

这是它有效的证明：http: **[//liveworkspace.org/code/4kBypd$0](http://liveworkspace.org/code/4kBypd%240)**

输出：

```
Invoking "arg1 => False" on 0
Invoking "arg1 => False" on 4
Invoking "arg1 => 0" on False
Invoking "arg1 => False" on 0
Invoking "arg1 => 0" on False
Invoking "arg1 => False" on 0
Invoking "arg1 => 0" on False 
```

完整代码供参考：

```
using System;
using System.Linq;
using System.Linq.Expressions;
using System.Dynamic;

public class Program
{
    public class MyCallable<T1, T2> : DynamicObject
    {
        private readonly Expression<Func<T1, T2> > _wrapped;
        private readonly Func<T1, T2> _compiled;

        public MyCallable(Expression<Func<T1, T2>> towrap) 
        { 
            _wrapped = towrap; _compiled = _wrapped.Compile(); 
        }

        public override bool TryInvoke(InvokeBinder binder, object[] args, out object result)
        {
            if ( (args.Length == 1) && 
                 (args[0].GetType() == typeof(T1)))
            {
                Console.WriteLine(@"Invoking ""{0}"" on {1}", _wrapped, args[0]);
                result = _compiled((T1) args[0]);
                return true;
            }
            else
            {
                //throw new ArgumentException("Cannot invoke " + _wrapped + " with the arguments passed");
                result = null;
                return false;
            }
        }
    }

    public static class TheormProver
    {
        public static object[] NewTheorm() { return new object[] { 1 }; }
        public static dynamic Func<T1, T2>() { return new MyCallable<T1, T2>(arg1 => default(T2)); }
        public static int Int { get; set; }
    }

    public static void Main(string[] args)
    {
        var i = 123;
        var test2 = from t in TheormProver.NewTheorm()
            let f = TheormProver.Func<int, bool>()
            let a = TheormProver.Int
            let g = TheormProver.Func<bool, int>()
            where !f(a * 2) && g(f(g(f(4)))) == i * a && a < g(f(a))
            select new { f = f.ToString(), g = g.ToString(), a, asd = "Test extra property" };

        test2.ToList().ForEach(Console.WriteLine);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:37:38.083

您不能将自定义成员添加到委托类型，也不能`operator ()`在 C# 中重载。这给你留下了扩展方法。

现在，您不想为非常通用的委托类型添加扩展，`Func<int, int>`因为这会污染命名空间。我建议您像这样创建自定义委托：

```
delegate TResult Z3Func<T1, TResult>(T1 arg1); 
```

然后，您可以将扩展名添加到`Z3Func`.

扩展调用最终将作为您正在分析的表达式树中的静态方法调用。**

# amazon-web-services - 在本地云中使用 AWS-Cloudformatting-Resources 和 Heat 和 Openstack？

> ID：15566241
> 
> 赞同：2
> 
> 时间：2013-03-22T08:55:03.847
> 
> 标签：amazon-web-services, openstack, amazon-cloudformation, heat

[我们已经使用 Openstack (essex) 和Heat](https://wiki.openstack.org/wiki/Heat)建立了一个本地云环境。但是我们面临的问题是我们想在第一次启动实例时添加额外的文件/包。据我所知，这可以通过[AWS::CloudFormation::Init](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-init.html)完成。

但是当通过执行产生一个新实例时

> 热创建测试--template-file=test.template

使用以下简约模板

```
{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Create and provision a web server",
    "Resources": {
        "NewServer": {
            "Type": "AWS::EC2::Instance",
            "Properties": {
                "ImageId": "fedora18ami_neu",
                "InstanceType": "m1.large",
                "KeyName": "poc",
                "UserData": {
                    "Fn::Base64": "#!/bin/sh\n/opt/aws/bin/cfn-init -s test--region RegionOne -r NewServer\n"
                }
            },
            "Metadata": {
                "AWS::CloudFormation::Init": {
                    "config": {
                        "packages": {
                            "yum": {
                                "httpd": []
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

我们得到了错误：

```
 File "/usr/lib/python2.7/site-packages/cfnbootstrap/aws_client.py", line 149, in sign
    derived_key = hmac.new(("AWS4" + creds.secret_key).encode('utf-8'), timestamp_short.encode('utf-8'), hashlib.sha256).digest()
TypeError: cannot concatenate 'str' and 'NoneType' objects 
```

似乎 cfn-init 正在尝试连接到某些亚马逊云服务，并且需要凭据才能执行该操作！？为什么它需要连接到 Amazon-Services，有没有可能避免它？还是有另一种方法可以在模板中实现[AWS::CloudFormation::Init的功能？](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-init.html)我是否必须在 UserData-Element 中将所有内容都声明为 Shellscript？

谢谢你的帮助！

# php - Joomla 不显示任务视图

> ID：15566244
> 
> 赞同：0
> 
> 时间：2013-03-22T08:55:07.113
> 
> 标签：php, url, joomla

我有一个名为 mycomponent 的组件

**模型** paypal.php

**控制器** paypal.php

**意见**

**贝宝** view.html.php index.html

tmpl(文件夹) default.php index.html

在控制器中我有这个代码

```
 <?php

// No direct access.
defined('_JEXEC') or die;

jimport('joomla.application.component.controlleradmin');

/**
 * Objectdefects list controller class.
 */
class MycomponentControllerPaypal extends JControllerAdmin
{
         public function paypaldetails()
    {
        $model = $this->getModel('paypal');
        // Get token
                $token = urlencode(htmlspecialchars(JRequest::getVar('token')));
        if (!$token)
        {
            // Missing $token parameter
            $app = JFactory::getApplication();
            $app->enqueueMessage(JText::_('COM_INSTALLER_MSG_MISSING_TOKEN'));
        }
        else
        {
            // Install plugin
            $model->paypaldetails($token);
        }
    }
} 
```

在模型中，我有这段代码

```
 public function paypaldetails($token){
            $environment=  $this->environment;
            // Add request-specific fields to the request string.
           $nvpStr = "&TOKEN=$token";
// Execute the API operation; see the PPHttpPost function above.
$httpParsedResponseAr = $this->PPHttpPost('GetExpressCheckoutDetails', $nvpStr);
//var_dump($httpParsedResponseAr);
if("SUCCESS" == strtoupper($httpParsedResponseAr["ACK"]) || "SUCCESSWITHWARNING" == strtoupper($httpParsedResponseAr["ACK"])) {

    $paypaldetails=array();
        $paypaldetails["firstname"]= $httpParsedResponseAr['FIRSTNAME'];
        $paypaldetails["lastname"]  = $httpParsedResponseAr["LASTNAME"];
        $paypaldetails["countrycode"] = $httpParsedResponseAr["COUNTRYCODE"];
       $this->paypaldetails=$paypaldetails;
       $a=$this->paypaldetails;
       var_dump($a);
} else  {
    exit('GetExpressCheckoutDetails failed: ' . print_r($httpParsedResponseAr, true));
}
        } 
```

在 view/template/default.php 我有这个

```
<?php
// no direct access
defined('_JEXEC') or die;
// Import CSS
$document = JFactory::getDocument();
$document->addStyleSheet('components/com_mycomponent/assets/css/defects.css');
        $results = $this->items;
        var_dump($results);
        echo 'Firstname: '.$results[firstname];
        echo '<br>Lastname: '.$results[lastname];
        echo '<br>Countrycode: '.$results[countrycode]; 
```

当我运行这个网址时`index.php?option=com_fewostar&view=paypal&task=paypal.paypaldetails&token=EC-92L7275685367793U&PayerID=TGWAUKNJLH2WL` ，我首先查看 var_dump($a); 位于模型上，但第二个 var_dump($results); 位于views/paypal/tmpl/default.php 中不显示，视图中的字段不显示。出于任何原因，此 url 不调用视图。当我在没有任务的情况下运行此 url`index.php?option=com_fewostar&view=paypal`代码时，会显示视图。但是对于这个 url `index.php?option=com_fewostar&view=paypal&task=paypal.paypaldetails&token=EC-92L7275685367793U&PayerID=TGWAUKNJLH2WL`没有显示视图。我如何为这个任务调用视图，可能我需要其他视图文件，不同于 default.php？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:59:26.853

我在这里看到了几个问题。首先，代码并没有完全使用 Joomla MVC 风格（即使它适合你，对于熟悉 Joomla 的人来说可能更难调试）。

**应该调用模型方法`getPaypaldetails`并返回一些东西**

```
public function getPaypaldetails()
{
    // For Joomla 1.7+ use JInput instead of JRequest (deprecated)
    $token = JFactory::getApplication()->input->getVar('token');

    // some code

    return $paypaldetails;
} 
```

**view.html.php 应该并从模型中获取数据并分配给自己**

```
public function display($tpl = null)
{
    // Get some data from the models
    $items = $this->model->get('paypaldetails');

    // If data are incorrect, show nice error message
    // ...

    $this->items = $items;
} 
```

**视图布局文件应该放在`/com_fewostar/views/paypal/tmpl/default.php`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:56:44.483

默认情况下，视图仅由“显示”任务（这是默认任务）调用。由于您使用自己的任务，因此您需要在任务完成后重定向到视图或尝试在最后加载显示功能。

# r - 带有 all=True 的 merge.data.table 引入了 NA 行。它是否正确？

> ID：15566250
> 
> 赞同：8
> 
> 时间：2013-03-22T08:55:36.410
> 
> 标签：r, data.table, outer-join

在填充的 data.table 和另一个空的 data.table 之间进行合并会在结果 data.table 中引入一个 NA 行：

```
a = data.table(c=c(1,2),key='c')
b = data.table(c=3,key='c')
b=b[c!=3]
b
# Empty data.table (0 rows) of 1 col: c
merge(a,b,all=T)
#     c
# 1: NA
# 2:  1
# 3:  2 
```

为什么？我希望它只返回 data.table 的行`a`，就像它对 merge.data.frame 所做的那样：

```
> merge.data.frame(a,b,all=T,by='c')
#  c
#1 1
#2 2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-31T00:39:21.340

问题中的示例太简单了，无法显示问题，因此造成了混乱和讨论。使用两个 one-column `data.table`s 不足以显示`merge`它的作用！

这是一个更好的例子：

```
> a = data.table(P=1:2,Q=3:4,key='P')
> b = data.table(P=2:3,R=5:6,key='P')
> a
   P Q
1: 1 3
2: 2 4
> b
   P R
1: 2 5
2: 3 6
> merge(a,b)  # correct
   P Q R
1: 2 4 5
> merge(a,b,all=TRUE)  # correct.  
   P  Q  R
1: 1  3 NA
2: 2  4  5
3: 3 NA  6
> merge(a,b[0],all=TRUE)  # incorrect result when y is empty, agreed
    P  Q  R
1: NA NA NA
2: NA NA NA
3:  1  3 NA
4:  2  4 NA
> merge.data.frame(a,b[0],all=TRUE)  # correct
  P Q  R
1 1 3 NA
2 2 4 NA 
```

Ricardo 深入了解并在 v1.8.9 中对其进行了修复。来自新闻：

> 当 y 为空且 all.y=TRUE（或 all=TRUE）时，merge 不再返回虚假的 NA 行，[#2633](https://r-forge.r-project.org/tracker/?func=detail&group_id=240&aid=2633&atid=975)。感谢 Vinicius Almendra 的报道。添加了测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:01:43.183

> > 全部：逻辑；all = TRUE 是保存设置 all.x = TRUE 和 all.y = TRUE 的简写。
> > 
> > all.x：逻辑；如果为 TRUE，那么额外的行将被添加到输出中，x 中的每一行在 y 中没有匹配的行。这些行将在那些 通常用来自 y 的值填充***的列中具有 'NA' 。***默认值为 FALSE，因此只有包含 x 和 y 数据的行才会包含在输出中。
> > 
> > all.y ：逻辑；类似于上面的 all.x。

这取自**[data.table 文档](http://cran.r-project.org/web/packages/data.table/data.table.pdf)**。`merge`有关更多信息，请查看那里对函数参数的描述。

我认为这回答了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:59:01.887

给定你定义`a`和`b`你的方式。的简单用法`rbind(a,b)`将仅返回 的行`a`。

但是，如果您想将 NULL 数据表`b`与其他一些非空数据表合并`a`，则有不同的方法。当我不得不在不同的循环中合并不同的数据表时，我遇到了类似的问题。我使用了这个解决方法。

```
 #some loop that returns data.table named a
  #another loop starts
  if(all.equal(a,b<-data.table())==TRUE){
  b<-a
  next
  }
  merge(a,b,c("Factor1","Factor2")) 
```

这对我有帮助，也许对你也有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T10:41:27.487

这是可以预料的，因为`merge.data.frame` `all=T`是 a `full outer join`，所以你得到两个表的所有键，看看[合并](https://stackoverflow.com/questions/14076065/data-table-inner-outer-join-with-na-in-join-column-of-type-double-bug)

# jquery - 如何将触摸事件 [向左/向右滑动] 添加到图库

> ID：15566251
> 
> 赞同：5
> 
> 时间：2013-03-22T08:55:36.907
> 
> 标签：jquery

我一直在研究图片库 [html5] 并且它在桌面版本中运行良好我想为 Ipad/Tablet 设备添加基于触摸的事件。

您能否建议如何使用 javascript/jquery 添加基于触摸的事件。

谢谢， 斯里尼瓦斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:10:13.513

你可以使用这个功能

向右滑动或其他方向

```
// jquery mobile
    $("#id").swiperight(function() {
        //do some with $.mobile.changePage function
    });
    $("#id").swipeleft(function() {
        //do some $.mobile.changePage function
    });

// javascript
document.ontouchmove = function(e) {
    var target = e.currentTarget;
    while(target) {
        if(checkIfElementShouldScroll(target))
            return;
        target = target.parentNode;
    }

    e.preventDefault();
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T03:05:10.273

这个 jQuery 插件运行良好。[http://www.netcu.de/jquery-touchwipe-iphone-ipad-library](http://www.netcu.de/jquery-touchwipe-iphone-ipad-library) 易于使用。前任：

```
$('.slideshow').touchwipe({
 wipeLeft: function() {$('.slideshow').cycle('next');},
 wipeRight: function() { $('.slideshow').cycle('prev');},
 min_move_x: 60         
}); 
```

# javascript - 画布剪辑图像在一个圆圈

> ID：15566253
> 
> 赞同：6
> 
> 时间：2013-03-22T08:55:47.403
> 
> 标签：javascript, html, canvas

我只是想以曲线剪辑图像..但没有发生这种情况..只有图像显示，但没有剪辑。

**HTML**

```
<canvas id="leaf" width="500" height="500" style='left: 0; 
position: absolute; top: 0;'></canvas> 
```

**JavaScript**

```
var canvas = document.getElementById('leaf');
var context = canvas.getContext('2d');

/*
* save() allows us to save the canvas context before
* defining the clipping region so that we can return
* to the default state later on
*/

context.save();
context.beginPath();
context.moveTo(188, 150);
context.quadraticCurveTo(288, 0, 388, 150);
context.lineWidth = 10;
context.quadraticCurveTo(288, 288, 188, 150);
context.lineWidth = 10;

context.clip();

context.beginPath();
var imageObj = new Image();
imageObj.onload = function()
{
context.drawImage(imageObj, 10, 50);
};

imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg';

/* context.beginPath();
context.arc(x - offset, y - offset, radius, 0, 2 * Math.PI, false);
context.fillStyle = 'yello';
context.fill();
*/

/*
* restore() restores the canvas context to its original state
* before we defined the clipping region
*/

context.restore();
context.beginPath();
context.moveTo(188, 150);
context.quadraticCurveTo(288, 0, 388, 150);
context.lineWidth = 10;
context.quadraticCurveTo(288, 288, 188, 150);
context.lineWidth = 10;

context.strokeStyle = 'blue';
context.stroke(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T09:14:05.133

您必须将所有内容从行移动`context.save();`到您的处理程序`context.clip();`的函数对象内部：`imgObj``onload`

```
imageObj.onload = function()
{
    context.save();
    context.beginPath();
    context.moveTo(188, 150);
    context.quadraticCurveTo(288, 0, 388, 150);
    context.lineWidth = 10;
    context.quadraticCurveTo(288, 288, 188, 150);
    context.lineWidth = 10;
    context.clip();
    context.drawImage(imageObj, 10, 50);
}; 
```

有关示例，请参见[http://jsfiddle.net/CSkP6/1/ 。](http://jsfiddle.net/CSkP6/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:17:30.417

当你的脚本启动几次后，你的图像被加载，你没有更多的剪辑画布，因为你之后恢复它。
你需要做一个 drawClipped 函数，并在你的 onload 函数中调用它，例如：

```
function drawClipped(context, myImage) = {
   context.save();
   context.beginPath();
   context.moveTo(188, 150);
   context.quadraticCurveTo(288, 0, 388, 150);
   context.lineWidth = 10;
   context.quadraticCurveTo(288, 288, 188, 150);
   context.lineWidth = 10;
   context.clip();
   context.drawImage(myImage, 10, 50);
   context.restore();
};

var imageObj = new Image();
imageObj.onload = function()  {
    drawClipped(context, imageObj);
};

imageObj.src = 'http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg'; 
```

# php - Symfony 1.4 图像未从上传目录显示

> ID：15566257
> 
> 赞同：0
> 
> 时间：2013-03-22T08:56:21.117
> 
> 标签：php, html, symfony-1.4

我使用 symfony 1.4 制作了一个包含图像上传小部件的基本表单，（它可以很好地上传图像）但是当我稍后尝试回显图像时它没有显示。这是我用来（尝试）输出我的图像的代码：

```
 <img src="<?php echo sfConfig::get('sf_upload_dir').'\\'.$post->getImagename() ?>" /> 
```

快速浏览一下 firebug 向我展示了 firefox“无法加载给定的 url”。但是如果我将 url 复制并粘贴到地址栏中，它会很好地加载图像。

（请注意，我是在windows环境下开发的，我的项目目录不包含空格。）

谁能向我解释为什么会发生这种情况或我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:23:48.930

您不应使用该`sf_upload_dir`密钥，因为它会返回网络服务器内图像的完整路径。喜欢：`c:\website\project\web\uploads`。

您应该改用`sf_upload_dir_name`它，它返回web 文件夹**内的上传文件夹的路径。**

尝试：

```
<img src="/<?php echo sfConfig::get('sf_upload_dir_name').'/'.$post->getImagename() ?>" /> 
```

# c# - IControllerFactory 'xxx.WindsorInstallerBase+WindsorControllerFactory' 没有返回名称为 '~' 的控制器

> ID：15566264
> 
> 赞同：0
> 
> 时间：2013-03-22T08:56:53.817
> 
> 标签：c#, asp.net-mvc-3, castle-windsor

我有以下错误“IControllerFactory 'xxx.WindsorInstallerBase+WindsorControllerFactory' 没有返回名称为 '~' 的控制器。”。当我实现错误处理程序时，我能够得到那个错误。尽管该错误不是致命的，因为我们的 Web 应用程序仍在运行，但它会继续保存在我们的错误日志中。我不知道在哪里可以找到该错误的原因或原因。如果有人遇到它或熟悉它，请帮助。此错误的原因是什么，以防万一，解决方案是什么？

这是 StackTrace **

> **在 System.Web.Mvc.MvcHandler 的 System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& 控制器, IControllerFactory& factory)
> 在 System.Web.Mvc.MvcHandler.<>c_ *DisplayClass6.b* _2() 在 System.Web.Mvc.SecurityUtil.< >c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust[TResult](Func`1 func) 在 System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) 在 System.Web.Mvc 的 System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback 回调, 对象状态)。 MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) 在 System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 在 System.Web.HttpApplication.ExecuteStep(IExecutionStep 步骤, Boolean & completedSynchronously)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:33:58.290

猜测代码中的某处，您的 .cshtml 文件中将有一个波浪号 ~ 未正确标记。

也许通过所有 .cshtml 文件寻找链接？

# java - Jersey 的 ServletContainer 位于哪里

> ID：15566269
> 
> 赞同：0
> 
> 时间：2013-03-22T08:57:13.333
> 
> 标签：java, rest, servlets, jersey

我想在 REST Jersey 上尝试一些示例。Jersey servlet 需要添加到 web.xml 我将以下条目添加到 web.xml

```
com.sun.jersey.spi.container.servlet.ServletContainer 
```

我只是在[jersey-server](https://maven.java.net/content/repositories/releases/com/sun/jersey/jersey-server/1.17/jersey-server-1.17.jar)中查找，根本找不到 ServletContainer SPI 类。我看错罐子了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:42:22.733

`ServletContainer`存在于[Jersey-servlet.jar](http://mvnrepository.com/artifact/com.sun.jersey/jersey-servlet/1.17.1)中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:42:53.107

在较新版本的 jersey 中，从 开始`1.10`，`ServletContainter`在[**jersey-servlet**](http://mvnrepository.com/artifact/com.sun.jersey/jersey-servlet)中，

在旧版本中，它包含在[**jersey-bundle**](http://mvnrepository.com/artifact/com.sun.jersey/jersey-bundle)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:23:46.977

在以下位置下载 Jersey 捆绑包 JAR 并尝试：

[http://jersey.java.net/nonav/documentation/latest/user-guide.html#chapter_deps](http://jersey.java.net/nonav/documentation/latest/user-guide.html#chapter_deps)

# macos - Bash 变量在 OSX 终端中返回“找不到命令”

> ID：15566271
> 
> 赞同：1
> 
> 时间：2013-03-22T08:57:28.183
> 
> 标签：macos, bash

我尝试使用一些变量来重命名一些文件，但它失败了。我尝试了不同的方法让它工作，但无济于事。据我了解文档，这是正确的做事方式 - 但是现在我很难过......

这是代码（如文件中所写`rename_prefix.sh`）：

```
 #!/bin/sh
 NEWPREF="LALA"
 OLDPREF="LULU"
 for f in $OLDPREF*; do mv $f $(echo $f | sed 's/^$OLDPREF/$NEWPREF/g'); done 
```

这是错误消息：

```
 usage: mv [-f | -i | -n] [-v] source target
   mv [-f | -i | -n] [-v] source ... directory 
```

最初我认为问题在于使用我认为是正则表达式的变量，但从错误消息中可以看出，问题在于首先声明变量的位置。

这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T09:24:55.077

这可以完全在 shell 中完成，这也避免了为 sed 替换模式转义元字符的可能问题。它也非常快，因为它为每个重命名的文件节省了两个分叉。

```
NEWPREF="LALA"
OLDPREF="LULU"
for f in "$OLDPREF"*; do
   mv "$f" "$NEWPREF${f#$OLDPREF}"
done 
```

如果您想了解有关从 shell 变量值中删除后缀和前缀的更多信息，请阅读[关于参数扩展的 POSIX 规范](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_06_02)（zsh、ksh、mksh 和 bash 都支持）。

PS：你会得到一个错误的**唯一**方法`rename_prefix.sh: line 2: NEWPREF: command not found`是如果你`NEWPREF`在`=`. 看起来您发布的程序与您运行的程序非常相似。您是键入它而不是剪切粘贴它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:25:38.557

好吧，假设您不需要 POSIX，并且猜测某些其他细节，这与应用了一般更正的情况相同。

```
#!/bin/bash
newpref=LALA
oldpref=LULU

shopt -s nullglob

for f in "$oldperf"*; do
    mv -- "$f" "${f/#"$oldpref"/$newpref}"
done 
```

或 POSIX

```
#!/bin/sh
newpref=LALA
oldpref=LULU

for f in "$oldpref"*; do
    [ -e "$f" ] || break
    mv -- "$f" "${newpref}${f#"$oldpref"}"
done 
```

# php - 最佳实践 - 导出 CSV

> ID：15566274
> 
> 赞同：0
> 
> 时间：2013-03-22T08:57:36.883
> 
> 标签：php, mysql, sql, csv, export

我正在寻找导出 CSV 文件的最佳方式。使用 MySQL 和 PHP。目前我用 INTO OUTFILE 生成一个 CSV，它是这样工作的，但我认为这不是好方法。

没有更好的选择来为用户单击下载按钮的每一刻制作一个 CSV 导出下载按钮吗？

*   INTO OUTFILE 导出只能用于一个实例，并且不可覆盖。

我必须生成时间戳并保存文件，然后从我的目录中获取最新文件。

这种从服务器下载 CSV 文件的方法看起来有点乱……有没有人有更好的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:10:43.040

我认为您很适合通过`INTO OUTFILE`. 原因是发送内容到 CSV 文件是由 MySQL 服务器完成的。使用 PHP 脚本执行此操作会更慢（首先因为它是一个脚本，其次因为需要将来自 SQL 服务器的数据传递给脚本）并且会花费更多资源。

如果 CSV 文件变大，您应该记住您的脚本仍然可能过期。您可以通过在配置中为脚本的最大运行时间设置更高的值或让外部进程/脚本创建 CSV 文件来遇到此问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:12:32.817

也许是这样的：

```
`echo $query | mysql > $unique`;
$contents = file($unique); 
```

# c# - C# 控制台应用程序无效操作异常

> ID：15566277
> 
> 赞同：11
> 
> 时间：2013-03-22T08:57:41.323
> 
> 标签：c#, sql-server, console, invalidoperationexception

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Data.Sql;
using System.Data.SqlClient;

namespace BissUpdater
{
    class Program
    {
        static void Main(string[] args)
        {
            string connectionString = "Data Source=H....; 
                Initial Catalog=LANDesk; Persist Security Info=True; 
                User ID=Mainstc; Password=xxxxxxxx";

            SqlConnection con = new SqlConnection(connectionString);
            con.Open();
        }
    }
} 
```

SQL 连接引发了无效操作异常。

> *“无效操作。连接已关闭”。*

这是我的完整代码。在其他程序中，它运行完美。

这是第二次了，没用。我正在使用 VS2005 ...也许我的程序已损坏？

堆栈跟踪：

> 在 System.Data.SqlClient.SqlConnection.GetOpenConnection()
> 在 System.Data.SqlClient.SqlConnection.get_ServerVersion()

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T09:03:36.940

这样做的正确方法应该是：

```
static void Main(string[] args) {
    string connectionString = "Data Source=H....; 
    Initial Catalog=LANDesk;User ID=Mainstc; Password=xxxxxxxx"; 
    // removed Persist Security Info=True; 

    using(SqlConnection con = new SqlConnection(connectionString))
    {
      if (con.State==ConnectionState.Closed)
      {                      
          con.Open();   
      }
    }

} 
```

使用`Using Statement`它会自动处理你的 SQL 连接。

还要检查这个：[MSDN 上使用 ADO.NET 的最佳实践](http://msdn.microsoft.com/en-us/library/ms971481.aspx#adonetbest_topic4)

其他要做的事情：使用 SQL Management Studio 并尝试使用连接字符串中的 sql 身份验证登录凭据，如果您已使用该帐户成功连接到数据库，则上述代码应该适合您。

最好的祝福

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T09:03:58.833

代码应阅读

```
using (SqlConnection con = new SqlConnection(connectionString))
{
    con.Open();

    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:02:46.493

尝试添加此代码。您可能已打开连接，并且在重新运行程序时您尝试再次打开连接，或者您的服务器或连接字符串有问题

```
con.Close(); 
```

有关更多信息，请参见此处[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.open.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.open.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:03:21.950

您可以在打开它之前检查[连接状态试试这个：](http://msdn.microsoft.com/en-IN/library/system.data.connectionstate.aspx)

```
SqlConnection con = new SqlConnection(connectionString);
if (con.State==ConnectionState.Closed)
{                      
    con.Open();   
}

// here your code goes for sql operations

con.Close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T09:03:37.227

尝试使用`using`语句。在大型数据库的情况下直接手动打开和关闭数据库是个坏主意。

```
using(SqlConnection con = new SqlConnection(connectionString)) 
```

尝试这样做以打开和关闭连接>>

```
public DB(string conStr):base()
{
con = new OracleConnection(conStr);
con.Open();
}

public void Close()
{
con.Close();
//con.Dispose();

} 
```

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-19T09:24:50.113

我遇到了同样的问题，我在 VB 中的解决方案是：

```
Dim db As New Database

' ... Some Work with EF without procedures (90 seconds)

db.SaveChanges()

For Each p In list

    If db.Database.Connection.State <> ConnectionState.Open Then
        ' This is only executed 1 time
        db.Database.Connection.Open()
    End If

    ' ... Some Work with EF but calling a mapped procedure (1 or 2 seconds each call)
    db.MyProcedure(p.FieldId)

Next

db.Dispose() 
```

但是总时间是 200 秒，所以我不得不在我`WebConfig`的`WebService`:

```
<system.web>
    <httpRuntime executionTimeout="600" /> <!--10 min-->
... 
```

# xslt - XSLT 逻辑 覆盖临时变量

> ID：15566282
> 
> 赞同：-1
> 
> 时间：2013-03-22T08:58:07.640
> 
> 标签：xslt

我们如何实现以下逻辑。

UniqueID 是临时变量。PALLET_NUMBER 来自输入。

如果 PALLET_NUMBER!=NULL 那么

UniqueID=子字符串 (PALLET_NUMBER, 10)

如果 PALLET_NUMBER =NULL 则

UniqueID=子字符串 (CARTON_NUMBER, 7)

我们可以从上述两个条件中得到UniqueID的值。这些事情发生在迭代循环中。我们如何覆盖UniqueID临时变量。

因为以后有一个条件我们需要放像

```
<foreach>   
 If previous UniqueID != current UniqueID then

        <Some code>
        <IF>
</foreach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:52:51.393

您不能覆盖 xslt 中的变量。

您可能需要查找 xslt 扩展函数来实现您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:05:09.163

正如 Treemonkey 所说，不可能覆盖变量，但您可以使用递归来实现您所描述的内容：

假设你有这样的事情：

```
<xsl:for-each select="my/node/isNamed/something" /> 
```

你可以这样做：

```
<xsl:variable name="items" select="my/node/isNamed/something" />
<xsl:apply-templates select="$items[1]">
  <xsl:with-param name="remainder" select="$items[position() > 1" />
</xsl:apply-templates>

<!-- Separate template -->
<xsl:template match="something">
  <xsl:param name="remainder" />
  <xsl:param name="lastId" />

  <xsl:variable name="uniqueId" select="..." />
  <!-- Contents of the xsl:for-each -->

  <xsl:apply-templates select="$remainder[1]">
    <xsl:with-param name="remainder" select="$remainder[position() > 1]" />
    <xsl:with-param name="lastId" select="$uniqueId" />
  </xsl:apply-templates>
</xsl:template> 
```

# image - 从 CDATA-xml rss 文件中提取图像到 xslt

> ID：15566285
> 
> 赞同：1
> 
> 时间：2013-03-22T08:58:31.190
> 
> 标签：image, xslt, cdata

我需要显示有关 xml RSS 提要的 xslt 信息。xml源是：

```
<description><![CDATA[<p>
<img style="margin: 10px; 
     float: left;" alt="Nuevo modelo general de negocio" 
     src="http://mysite.es/images/figure1.jpg" width="196" height="147" />
     La compañía apuesta por un marcado giro en el modelo]]>
</description> 
```

我正在使用：

```
<xsl:value-of select="description" disable-output-escaping="yes"/> 
```

但是渲染效果不好，因为我需要显示一个调整大小的图像，大小，例如 70x70。

我已经尝试过了，但它是错误的：

```
<xsl:value-of select="replace("description","images/","images/resized/images/")" 
   disable-output-escaping="yes"/> 
```

对我来说完美的解决方案是从标签中提取分离的 src 属性和文本。

问候，玛丽亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T11:51:06.673

如果你的 xml 总是像你的例子那么你应该能够使用这样的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
exclude-result-prefixes="xsl">

  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="/">
    <div>
      <xsl:apply-templates select="rss/channel"/>
    </div>
  </xsl:template>
  <xsl:template match="rss/channel">
    <ul>
      <xsl:apply-templates select="item"/>
    </ul>
  </xsl:template>
  <xsl:template match="item">
    <xsl:variable name="item_link" select="link"/>
    <xsl:variable name="item_title" select="substring-after(description, '/&gt;')"/>
    <xsl:variable name="item_image" select="substring-before(substring-after(description, 'src=&quot;'), '&quot;')" />
    <li>
      <a href="{$item_link}">
        <img alt="" src="{$item_image}" width="70" height="70" />
        <xsl:value-of select="$item_title"/>
      </a>
    </li>
  </xsl:template>
</xsl:stylesheet> 
```

# php - Google API Contacts v.3，PHP：将联系人添加到组

> ID：15566287
> 
> 赞同：4
> 
> 时间：2013-03-22T08:58:34.110
> 
> 标签：php, xml, curl, google-contacts-api

我成功地使用 cURL 创建了一个新联系人，但是当我想为此联系人添加组成员身份时，我收到 400 错误。我已经阅读[了这个文档](https://developers.google.com/google-apps/contacts/v3/#changing_group_membership) 并提出了同样的要求，但它没有用。我究竟做错了什么？感谢您的任何想法！

这就是我使用组信息创建 XML 的方式：

```
$doc = new DOMDocument('1.0', 'UTF-8');
$doc->formatOutput = true;

$entry = $doc->createElement('entry');
$entry->setAttribute('gd:etag', $etag);
$doc->appendChild($entry);

$category = $doc->createElement('category');
$category->setAttribute('scheme', 'http://schemas.google.com/g/2005#kind');
$category->setAttribute('term', 'http://schemas.google.com/contact/2008#contact');
$entry->appendChild($category);

$id = $doc->createElement('id', 'http://www.google.com/m8/feeds/contacts/default/base/'.$idgmail);
$entry->appendChild($id);

$updated = $doc->createElement('updated', $update_info);
$entry->appendChild($updated);

// Add group info (My Contacts)

$group = $doc->createElement('gContact:groupMembershipInfo');
$entry->appendChild($group);
$group->setAttribute('deleted', 'false');
$group->setAttribute('href', 'http://www.google.com/m8/feeds/groups/default/base/6');

// Add another group info

$group = $doc->createElement('gContact:groupMembershipInfo');
$entry->appendChild($group);
$group->setAttribute('deleted', 'false');
$group->setAttribute('href', 'http://www.google.com/m8/feeds/groups/default/base/'.$my_group_id);

$group_info = $doc->saveXML(); 
```

这是我的卷曲：

```
$url = 'https://www.google.com/m8/feeds/contacts/default/full/'.$idgmail.'/';

$headers = array(
'Host: www.google.com',
'Gdata-version: 3.0',
'Content-length: '.strlen($group_info),
'Content-type: application/atom+xml',
'If-Match: *',
'Authorization: OAuth '.$access,
);

$curl = curl_init();

curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $group_info);
curl_setopt($curl, CURLOPT_FAILONERROR, true);

$resp = curl_exec($curl); 
print_r($resp); // Prints nothing
echo curl_getinfo($curl, CURLINFO_HTTP_CODE); // Gives 400
curl_close($curl); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T19:57:30.757

好的，我自己想通了:)
1) 首先，要更新联系人，您应该使用 PUT 请求，而不是 POST。
2）在您的 XML 中，您不能使用“默认”（您会收到另一个错误），您应该使用完整的电子邮件地址：

```
$group = $doc->createElement('gContact:groupMembershipInfo');
$entry->appendChild($group);
$group->setAttribute('deleted', 'false');
$group->setAttribute('href', 'http://www.google.com/m8/feeds/groups/user.email@gmail.com/base/6'); 
```

3) 如果您没有指定命名空间 gContact，您将收到 400 错误。入口标签的整个内容应该是这样的：

```
$entry = $doc->createElement('entry');
$entry->setAttribute('xmlns', 'http://www.w3.org/2005/Atom');
$entry->setAttribute('xmlns:gd', 'http://schemas.google.com/g/2005');
$entry->setAttribute('xmlns:gContact', 'http://schemas.google.com/contact/2008');
$doc->appendChild($entry); 
```

4）最后，要将联系人添加到特定组，您不需要更新它（正如我从文档中想到的那样），您可以在创建联系人时进行（是的，现在看起来很明显）。如果您尝试更新联系人组而不先创建它，您将收到 400 错误（条目没有设置任何字段）。
希望这会对某人有所帮助！
PS 为了解决这些问题，我使用了 Google 的“OAuth 2.0 Playground”，非常有用！[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

# opencv - openCV上的圆检测

> ID：15566290
> 
> 赞同：0
> 
> 时间：2013-03-22T08:59:08.827
> 
> 标签：opencv

我在 openCV 2.1 和 Visual Studio 2008 中编译以下代码，

```
 int main()
        {
            Mat src, src_gray;

           /// Read the image
          src = cvLoadImageM("Circle_3.jpg",1);

          if( !src.data )
          {
           cout<<"   "<<"Error!!!!!!!!!!"<<endl;
           return -1; 
          }

          /// Convert it to gray
         cvtColor( src, src_gray, CV_BGR2GRAY );

        /// Reduce the noise so we avoid false circle detection
            GaussianBlur( src_gray, src_gray, Size(9, 9), 2, 2 );

           vector<Vec3f> circles;

      /// Apply the Hough Transform to find the circles
             HoughCircles( src_gray, circles, CV_HOUGH_GRADIENT, 1, src_gray.rows/8, 200, 100, 0, 0 );
       /// Draw the circles detected
          for( size_t i = 0; i < circles.size(); i++ )
         {
               Point center(cvRound(circles[i][0]), cvRound(circles[i][1]));
                int radius = cvRound(circles[i][2]);
                        // circle center
             circle( src, center, 3, Scalar(0,255,0), 3, 8, 0 );
               // circle outline
            circle( src, center, radius, Scalar(0,0,255), 3, 8, 0 );

             }

               /// Show your results

            imshow( "Hough Circle Transform Demo", src );

              waitKey(0);
               return 0;

                     } 
```

这段代码有两个问题：1.）它没有给出想要的结果（构建得很好！）2.）它没有多次输入：（

期待指导...

# jenkins - 如何将 CSS Jelly 文件添加到 Jenkins 插件？

> ID：15566292
> 
> 赞同：2
> 
> 时间：2013-03-22T08:59:12.690
> 
> 标签：jenkins, jenkins-plugins, jelly

我制作了自己的样式表，我需要将其包含在 Jenkins 插件中。

```
 <l:layout css="/plugin/myPlugin/css/jquery-ui.css">
        <link rel="stylesheet" href="${rootURL}/plugin/myPlugin/jquery-ui.css" type="text/css" media="screen" /> 
```

请给我建议。。

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:57:01.160

不推荐在 Jelly 文件中链接 CSS 文件，[请参阅 jelly 标签文档](https://jenkins-ci.org/maven-site/jenkins-core/jelly-taglib-ref.html#isAdminOrTest)：

```
This was originally added to allow plugins to load their stylesheets, but the use of thie 
attribute is discouraged now. plugins should now do so by inserting <style> elements 
and/or <script> elements in <l:header/> tag. 
```

请改用内联 css 标签（[代码示例](https://github.com/jenkinsci/sloccount-plugin/blob/master/src/main/resources/tabview/css.jelly)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-13T06:36:13.197

将您的 css 文件放在

> /src/webapp/css

并将它们引用为 ..

> " href="${rootURL}/plugin//css/layout.css"

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-08T20:18:47.840

`<link>`如上所述，使用带有 $rootURL 的元素对我有用。我注意到的重要一点是确保将`<link>`元素放在`<l:layout>`. 我`<j:jelly>`最初在标签之后拥有它，但它无法呈现 ${rootURL}。

`<link>`标签将比内联样式更干净。

# string - Haskell printf 到字符串

> ID：15566299
> 
> 赞同：21
> 
> 时间：2013-03-22T08:59:47.990
> 
> 标签：string, haskell

Haskell 中是否有 sprintf 等价物？

我需要将双精度值转换并格式化为字符串。

有没有不使用*printf*类函数的另一种方法？

主要问题是避免：

```
Prelude> putStrLn myDoubleVal
1.7944444444444447e-2 
```

相反，我想要这个：

```
Prelude> putStrLn . sprintf "%.2f" $ myDoubleVal
1.79 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-22T09:03:07.557

是的，它在[Text.Printf](http://hackage.haskell.org/packages/archive/base/4.2.0.1/doc/html/Text-Printf.html)模块中，它只是被称为`printf`.

```
> import Text.Printf
> let x = 1.14907259
> putStrLn . printf "%.2f" $ x
1.15 
```

请注意，返回类型 of`printf`是重载的，因此它能够返回 a `String`（如上例所示），但它也能够返回执行打印的 I/O 操作，因此您实际上不需要调用`putStrLn`：

```
> printf "%.2f\n" x
1.15 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T09:02:52.513

[Text.Printf](http://hackage.haskell.org/packages/archive/base/4.2.0.1/doc/html/Text-Printf.html)可能是您需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-04T03:49:15.023

[格式化](https://hackage.haskell.org/package/formatting)是创建格式化字符串的一个选项，如果您想要 '"s"printf' 并且不需要与 printf 样式完全兼容。

# java - java android中NSOperationQueue的等价物是什么？

> ID：15566302
> 
> 赞同：11
> 
> 时间：2013-03-22T08:59:51.540
> 
> 标签：java, objective-c, nsoperation, nsoperationqueue

我喜欢 iOS 中的 nsoperationqueue。java中的等价物是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T09:05:45.777

我认为您正在寻找[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)。

Lars Vogel 有一个很好的[教程](http://www.vogella.com/articles/JavaConcurrency/article.html#threadpools)。

# html - 为什么不应该重复id？

> ID：15566303
> 
> 赞同：-7
> 
> 时间：2013-03-22T08:59:53.707
> 
> 标签：html, css

```
<div id="full-width">
<div id="wrap><!--contents with fixed width:: 950px--></div>
</div>

<div id="full-width">
<div id="wrap><!--contents with fixed width:: 950px--></div>
</div>

<div id="wrap"><!--contents with fixed width:: 950px--></div>

<div id="wrap"><!--contents with fixed width:: 950px--></div>

<div id="full-width"><!--contents with full width:: 100%--></div> 
```

**关键问题**

这很好用，但是许多编码人员或说 css 规则指示我们不应多次使用相同的 id。那么我该如何放置我的标记呢？任何人都可以描述我们应该只使用 1 个 id 不超过这个不起作用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T09:15:58.627

就像我之前的其他人所说的那样，您正在使用`id`作为唯一标识符的标签。而您应该使用 a`class`跨多个元素应用样式。

查看 W3C 定义的内容`id`：( [http://www.w3.org/TR/html401/struct/global.html#h-7.5.2](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2) )

> 元素标识符：id 和 class 属性
> 
> 属性定义
> 
> **id** = name [CS] 此属性为元素分配名称。此名称在文档中必须是唯一的。
> 
> **class** = cdata-list [CS] 此属性将一个类名或一组类名分配给一个元素。可以为任意数量的元素分配相同的类名或名称。多个类名必须用空格字符分隔。

更有趣的是，您说您的示例有效，并且在**大多数浏览器**中都有效。这并不能使它有效甚至是好的 HTML/CSS，只是**某些浏览器会发现开发人员的缺点**，并将呈现不符合标准的代码，就好像它符合标准一样。

这是一个永远行不通的例子。您可能知道`id`标签可用于命名锚点。例如

```
<a href="#content">Jump to content</a>
<div id="content">
  some content
</div>
<div id="content">
  some other content
</div> 
```

在这个例子中，命名锚应该链接到哪个元素？在大多数情况下，我会假设它会转到第一个元素。然而，这可能不是开发人员想要的。

该`id`元素的用途不仅仅是将样式应用于元素，W3C 继续声明：

> id 属性在 HTML 中有几个角色：
> 
> *   作为样式表选择器。
> *   作为超文本链接的目标锚。
> *   作为从脚本中引用特定元素的一种方式。
> *   作为声明的 OBJECT 元素的名称。
> *   用于用户代理的通用处理（例如，在从 HTML 页面提取数据到数据库时识别字段，将 HTML 文档转换为其他格式等）。
> *   另一方面，class 属性将一个或多个类名分配给一个元素；该元素可以说属于这些类。一个类名可以由多个元素实例共享。
> 
> class 属性在 HTML 中有几个角色：
> 
> *   作为样式表选择器（当作者希望将样式信息分配给一组元素时）。
> *   用于用户代理的通用处理。

您应该编写符合标准的代码，以便知道它在符合标准的浏览器中起作用。结果在更广泛的浏览器中更加可预测和稳定，并且更有可能在未来的版本中工作。

**编辑：回应OP的评论：**

CSS：

```
.content {
    width: 950px;
    margin: auto; // Assuming you want to centre this
} 
```

无论您应用该类`.content`，其宽度都是 950 像素。您不需要在`#top`元素上设置 100% 的宽度，因为它是块级 div，自然会扩展到 100% 的宽度。

HTML：

```
<div id="top">
    <div id="navigation" class="content">
    </div>
</div>

<div id="main" class="content">
</div>

<div id="footer" class="content">
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T09:01:19.843

ID 是唯一标识符，因此[每个文档应该只有 1 个](http://webdesign.about.com/od/css/f/blfaqmultiIDs.htm)（否则它不是唯一的）。

替换`id`并`class`更改您的 CSS 以使用类选择器而不是 ID 选择器。

因此，而不是：

```
#full-width { ... }
#wrap { ... } 
```

采用：

```
.full-width { ... }
.wrap { ... } 
```

* * *

为清楚起见，您的标记应为：

```
<div class="full-width">
<div class="wrap><!--contents with fixed width:: 950px--></div>
</div>

<div class="full-width">
<div class="wrap><!--contents with fixed width:: 950px--></div>
</div>

<div class="wrap"><!--contents with fixed width:: 950px--></div>

<div class="wrap"><!--contents with fixed width:: 950px--></div>

<div class="full-width"><!--contents with full width:: 100%--></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T09:01:41.860

雅编码员说对了，您不能`ID`多次定义相同的内容，因为`ID`必须是唯一的。

您可以使用`class`而不是`ID`

试试这个

```
<div class="full-width">
<div class="wrap><!--contents with fixed width:: 950px--></div>
</div>

<div class="full-width">
<div class="wrap><!--contents with fixed width:: 950px--></div>
</div>

<div class="wrap"><!--contents with fixed width:: 950px--></div>

<div class="wrap"><!--contents with fixed width:: 950px--></div>

<div class="full-width"><!--contents with full width:: 100%--></div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T09:02:08.157

id*唯一*标识页面中的元素。浏览器会执行一定量的错误恢复，但是当您开始使用`<label for...>`JavaScript 根据 ID 从 DOM 中获取元素时，事情肯定会中断。

提供类来标记属于组的元素。改用它们。

```
<someElement class="one_class another_class">

.one_class {
    /* ... */
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T09:04:09.223

`IDs`是[*唯一标识符*](http://www.w3.org/TR/html5/dom.html#the-id-attribute)，唯一标识页面上的各个元素。

对于这种情况，您希望拥有多个相互关联的元素，您可以使用`classes`：[http ://www.w3.org/TR/html5/dom.html#classes](http://www.w3.org/TR/html5/dom.html#classes)

然后，您将使用`.`而不是设置样式`#`：

```
<div class="full-width">
   <div class="wrap">...</div>
</div>

div.full-width {
    width:100%;
    ...
}

div.wrap {
    width:950px;
    ...
} 
```

> 非常感谢你！但是我想在一个容器中使用以方便使用如何使用？

根据您想要实现的目标，您可以简单地将所有`.wrap`元素包装在一个`.full-width`容器中：

```
<div class="full-width">
    <div class="wrap">...</div>
    <div class="wrap">...</div>
    <div class="wrap">...</div>
    <div class="wrap">...</div>
</div> 
```

或者你可以只使用一个`.wrap`元素：

```
<div class="full-width">
    <div class="wrap">
        ...
    </div>
</div> 
```

我假设您还希望将`.wrap`分隔线水平居中：

```
div.wrap {
    width:950px;
    margin:0 auto;
} 
```

[JSFiddle 示例](http://jsfiddle.net/NaGwL/1/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T09:01:44.673

您在 DOM 中重复 ID`<div id="full-width"><div id="wrap>`是错误的。

使用类`<div class="full-width"><div class="wrap>`

申请如下`css`。`class`

```
.full-width { /** css code **/ }
.full-width .wrap { /** css code **/ }
.wrap { /** css code **/ } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T09:02:37.720

如果你想在多个对象上应用相同的样式，你应该使用 class 属性。当您在多个对象上使用相同的 id 属性时，您无法通过其 id 访问特定对象（因为它应该由 eg 访问`getElementById()`）

# jquery - jquery轮询不会发生HttpSession超时

> ID：15566309
> 
> 赞同：5
> 
> 时间：2013-03-22T09:00:19.443
> 
> 标签：jquery, ajax, spring-security, timeout, httpsession

我们在 Jquery 中使用短轮询来定期向服务器发送 ajax 请求，以检查服务器上是否有任何更新。轮询工作正常，但正因为如此，会话始终保持活动状态。除非用户手动注销或关闭浏览器，否则会话永远不会超时。这可以通过在轮询本身中设置超时来实现，但我们希望在服务器端处理超时逻辑。

有没有办法在这些 ajax 调用期间保持会话空闲。或者我们需要手动处理超时。

我们使用 tomcat 作为应用服务器，使用 spring mvc 作为视图和控制器。创建新会话后，我已设置会话超时。

session.setMaxInactiveInterval(7200); //2小时

感谢您在这方面的任何帮助。

谢谢， 埃卡纳特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T08:21:47.873

您不能为 HTTP Servlet 容器会话管理配置 am ignore URL。（web.xml 的 session-config 中只有一个设置：session-timeout）你需要实现自己的计时器，并在需要时使 session 无效。

# jsf - 跨多个视图持久化 ViewScoped bean

> ID：15566310
> 
> 赞同：3
> 
> 时间：2013-03-22T09:00:30.803
> 
> 标签：jsf, managed-bean, view-scope

好的，我知道范围问题一直都会出现，但我对解决方案的稍微不同的方法很感兴趣。是介于和之间的`@ViewScope`奇妙桥梁。`@RequestScope``@SessionScope`

但是，仍然有一个常见的用例（至少对我而言），我真的不想使用`@SessionScope`，但我需要几个视图中的数据。一个非常简单的情况是，当我根据先前的选择将多个数据表链接在一起时。

完全可以在`<f:paramView>`地址中使用和传递单个甚至几条数据作为参数，然后再次从数据库中检索所有内容。我更感兴趣的是找到一种方法来创建 bean 状态/变量的“快照”，创建新的`@ViewScope`，然后将“快照状态”“恢复”到新的 bean。

这样的事情存在吗？想法？意见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:21:02.913

我不知道这是否是“*公认的解决方案*”，但我已经实现了一个适合我的想法。（反馈赞赏！）

所以我创建了一个`@SessionScoped`带有几个静态映射的类：

```
private static Map<String, Object> objectVariableMap;

// Getters, setters and methods etc. are omitted for simplicity 
```

我的想法是我指定了一个接受**String**作为键和**Object**作为值的映射。我没有专门设置对象的类型以允许我在其中存储*任何*类型的对象。需要注意的是，在检索对象时需要确定对象的类型，以便可以将其转换回其原始类型。

现在是从第一个设置数据的时候了`@ViewScoped`。我生成一个随机 UUID（或您想要的任何内容）作为 Map**键**，然后将**值**设置为我正在使用的对象（即 . `this`，或者实际上您可能想要传递到下一个视图的任何其他对象）。将键、值保存到地图中并将 URL 参数设置为键。

我从不热衷于在 URL 参数中传递用户 ID 等数据（即使它已加密）。这个想法还有一个额外的好处，那就是提供具有可指定生命周期的一次性 URL 值。

在接收端（即新`@ViewScoped`bean 或任何其他范围），您使用读取 URL 参数（映射键）`<f:paramView>`，然后使用`preRenderView`事件来检索和设置使用的对象。

此时，您可以选择从 Map 中删除密钥对并使检索该对象的能力无效，或者您可以通过在有任何更改时简单地更新对象来保持密钥对更长的时间。

**更新：**从概念上讲，这真的很成功（至少对我来说）。我围绕这个概念创建了一些有用的方法和类，以使其更加通用。如果有人想要更具体的说明，或者如果有人想要，我什至可以创建一个小型图书馆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:14:47.293

您可以为此使用 CDI“对话范围”。这比会话范围窄，但比视图范围宽。

如果您传递参数的页面是一个单元，您还可以在 JSF 2.2 中将它们设为流并使用流范围。

像 CODI 这样的项目提供了可以在页面之间使用的各种其他范围。

# ruby - 如何在ruby中复制文件夹及其内容

> ID：15566311
> 
> 赞同：0
> 
> 时间：2013-03-22T09:00:34.207
> 
> 标签：ruby

我试图在 ruby​​ 中复制一个文件夹，但收到“无法将目录复制到自身”的错误

我不明白为什么会发生这种情况，有人可以解释一下吗？以及如何实现它以复制具有新名称的完整文件夹。这是我的代码，我尝试在其中复制名称中带有时间戳的源文件夹。

```
$releaseFolder = 'D:\ruby_workspace\fpsupdater\release'
$frontendSubPath = '\server\pdixfrontend\tomcat\conf'
$backendSubPath = '\server\pdixbackend\tomcat\conf\Catalina'

def println(text)
  puts $timestamp.inspect + ': ' + text
end

def getFileTimestamp()
 stamp = $timestamp.inspect
 stamp.gsub!(/\s+|:|\++/,"_")
end

def backupContext()

target = @configHash["target"]

if (Dir.exists?(target))

  println("backup of target " + target)
  println("need to backup: " + target + $frontendSubPath)
  println("need to backup: " + target + $backendSubPath)
  source = "#{target}#{$frontendSubPath}"
  backup = "#{target}#{$frontendSubPath}\\" + getFileTimestamp + "_conf" 
  println(source)
  println(backup)

  FileUtils.cp_r source , backup

else
  puts "cannot backup because target does not exists"
end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:10:25.960

您不能将目录复制到同一目录，例如：

```
FileUtils.cp_r "C:/TEST", "C:/TEST" 
```

您甚至不能对要复制到的目录进行递归复制，因为那样您可能会陷入永无止境的循环！

```
FileUtils.cp_r "C:/TEST", "C:/TEST/SUBFOLDER" 
```

如果您需要这样做，请使用临时目录，然后将其移回。还要优化你的代码，getFileTimestamp 会更好:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:08:23.563

```
backup = "#{target}#{$frontendSubPath}\\" + getFileTimestamp + "_conf" 
```

请注意，您仍在使用 frontedSubPath 而不是 backendSubPath

# excel - 在范围内查找部分文本，返回索引

> ID：15566316
> 
> 赞同：26
> 
> 时间：2013-03-22T09:00:51.863
> 
> 标签：excel

我需要在特定范围内查找部分文本并获取一个值，该值是找到文本的单元格索引下的 X 行。我尝试过使用 INDEX 和 MATCH 函数，但没有成功。

![示例](../Images/3ca370b72aad9066a77b60c6475f82a1.png)

如示例：查找部分文本`ASDFGHJK`并需要返回以下三行的值：（`I NEED THIS VALUE`）。我试图获取找到的单元格的行索引和 +3 以获得所需的值（“我需要这个值”）但没有成功。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-22T13:12:57.977

您可以使用“通配符”，`MATCH`因此根据彼得的回复假设 H1 中的“ASDFGHJK”，您可以使用这个常规公式

`=INDEX(G:G,MATCH("*"&H1&"*",G:G,0)+3)`

MATCH 只能引用单个列或行，因此如果要搜索 6 列，则必须设置具有 6 个 MATCH 函数的公式或更改为另一种方法 - 尝试此“数组公式”，假设在 A2:G100 中搜索数据

`=INDIRECT("R"&REPLACE(TEXT(MIN(IF(ISNUMBER(SEARCH(H1,A2:G100)),(ROW(A2:G100)+3)*1000+COLUMN(A2:G100))),"000000"),4,0,"C"),FALSE)`

确认`Ctrl`- `Shift`-`Enter`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-22T10:16:27.150

这个公式将完成这项工作：

```
=INDEX(G:G,MATCH(FALSE,ISERROR(搜索(H1,G:G)),0)+3)

```

您需要将其作为数组公式输入，即按`Ctrl`- `Shift`- `Enter`。它假定您要搜索的子字符串在 cell 中`H1`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-25T23:57:47.780

我只是在谷歌搜索解决同样的问题时发现了这一点，并且不得不对解决方案进行微小的更改以使其适用于我的情况，因为我有 2 个类似的子字符串“Sun”和“Sunstruck”要搜索。提供的解决方案是在搜索“Sun”时找到错误的条目。B列中的数据

我添加了另一列 C，公式 C1=""&B1&"" 并将搜索更改为 =COUNTIF(B1:B10,"* "&A1&" *")>0，额外的列允许查找最后一个条目中的第一个串联的字符串。

# variables - “检查不等式并设置”或仅“直接设置”变量是否更快

> ID：15566317
> 
> 赞同：2
> 
> 时间：2013-03-22T09:00:56.993
> 
> 标签：variables

哪个更快：

```
if (someValue != otherValue) someValue = otherValue; 
```

或者

```
someValue = otherValue; 
```

还是将它们优化为相同的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:11:18.360

在我使用的代码库中，大多数对象设置器都有类似的东西：

```
void SetSomeValue(T otherValue)
{
    if(someValue!=otherValue)
    {
       cout << "Somevalue has changed from " << someValue << " to " << othervalue << endl;
       someValue=otherValue;
    }
} 
```

这使得非开发调试更容易。（是的，它会在日志中放置大量文本，但我们可以使用运行时开关打开或关闭日志记录，这只是一个示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:24:01.967

这是一个微优化的案例（参见[Jeff Atwood 2005 年](http://www.codinghorror.com/blog/2005/01/micro-optimization-and-meatballs.html "微优化和肉丸")关于该主题的帖子）。如果您真的担心在项目中使用哪个，请不要。很有**可能根本不重要**。

但是，如果您有兴趣了解为什么引擎盖下可能存在差异，请继续阅读。

是否存在速度差异（甚至哪一个在整体性能方面可能更好）取决于变量的数据类型、编程语言和用户的系统架构等因素。

在使用 s 的 C++ 中`int`，在绝大多数情况下，您的“直接设置”代码段将比您的“检查和设置”代码段更快。这是因为当值相等时执行的比较和分支（或比较和条件移动，或等效的）实际上将比本应执行的（不需要的）移动慢。但是，差异是如此之小，以至于您必须多次这样做才能有所作为。此外，优化编译器可能会为您删除死代码。

当然，也有可能的例外。一个潜在的情况是缓存一致的多处理器系统，即使值没有改变，写入也会导致其他处理器使其缓存行无效（我不确定这种情况的频率，但至少看起来是可能的）。然后，如果变量经常读取但不经常更改（即代码运行多次，但通常是这种情况`someValue == otherValue`），最好先进行检查。同样，在内存绑定的程序中，检查缓存是否总是刷新到内存（对于直写缓存）或在写入时设置脏位（对于回写缓存）可能是有意义的，即使该值没有改变（再次，听起来合理）。

如果`someValue`和`otherValue`是比较和/或赋值被覆盖的更复杂的类型，那么两个给定的代码甚至可能不等价，更不用说性能了。

# amazon-web-services - Amazon s3 存储桶 ListObject

> ID：15566330
> 
> 赞同：0
> 
> 时间：2013-03-22T09:01:29.933
> 
> 标签：amazon-web-services, amazon-s3, amazon-ec2, amazon

我正在尝试使用 PutBucketRequest 通过 vb.net sdk 将我的静态图像上传到亚马逊 s3 存储桶上。它创建了所需的存储桶。但是当我使用 ListObjectsRequest() 列出对象时，它给了我以下错误。

1.  AWSSDK.dll 中发生了“Amazon.S3.AmazonS3Exception”类型的第一次机会异常（在我的 Visual Studio 编辑器的即时窗口中）

2.  达到最大重试次数：3（在异常块中）

我的代码如下所示：

```
Dim s3Client = AWSClientFactory.CreateAmazonS3Client("xxxx", "xxxx", regionEndpoint.APSoutheast1) 

client.PutBucket(New PutBucketRequest().WithBucketName(BucketName).WithBucketRegion(S3Region.APS1))

Dim listObjectsRequest As ListObjectsRequest = New   ListObjectsRequest().WithBucketName(BucketName).WithPrefix(FolderName).WithDelimiter("/")
listObjectsRequest.MaxKeys = 1
listObjectsRequest.Timeout = 400
objects = client.ListObjects(listObjectsRequest) //Here i got error. 
```

我看过很多例子，但我找不到任何解决方案。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T20:37:45.937

此错误与超时值有关。超时以毫秒为单位。您的意思是使用 400（4/10 秒）吗？那是相当快的，所以可能会超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:28:10.920

我已经使用 AmazonS3Config CommunicationProtocol to Protocol.HTTP 解决了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:08:56.080

您是否尝试在 ListObjectsRequest 上设置存储桶区域？

# android - Android XML Textview 粗体

> ID：15566338
> 
> 赞同：0
> 
> 时间：2013-03-22T09:01:51.573
> 
> 标签：android, xml

下面是我的代码，我正在尝试使用 XML Parser DOM 将 Bold 设置为我的 XML 文件。谁能告诉我它是怎么做的？我只希望我的“标题：”是粗体的。

```
textview.setText(textview.getText() + "<b>Title :</b> " //This line
                            + getValue("title", eElement) + "\n" + "\n");

                    textview.setText(textview.getText() + "Description : "
                            + getValue("description", eElement) + "\n" + "\n");

                    textview.setText(textview.getText() + "Link : "
                            + getValue("link", eElement) + "\n" + "\n");

                    textview.setText(textview.getText() + "Date : "
                            + getValue("date", eElement) + "\n" + "\n" + "\n"
                            + "\n"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:04:45.390

用这个 ，

```
 textView.setTypeface(null, Typeface.BOLD_ITALIC); or
  textView.setTypeface(null, Typeface.BOLD); 
```

使用 html，

```
tetview.setText(Html.fromHtml(somestring)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T09:06:21.767

您可以直接在`textView`标签中执行此操作：

```
android:textStyle="bold" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T09:06:59.383

您缺少的是告诉 textview 从 HTML 转换。

所以把它改成 textview.setText(Html.fromHtml(yourtext));

编辑：如果您在将生成的 charSequence 添加到现有文本时遇到问题，请使用：

```
Html.fromHtml(yourtext).toString() 
```

你不能像你做的那样简单地连接它，因为 Html.fromHtml() 返回一个 charSequence，而不是一个字符串

在布局文件中设置样式将导致所有文本变为粗体、斜体、wahtsoever

# javascript - e.keycode 在 firefox 19.0.2 ,chrome 25.0.1364.172 m,IE 8 中未定义

> ID：15566339
> 
> 赞同：0
> 
> 时间：2013-03-22T09:01:53.060
> 
> 标签：javascript, jquery, html, browser, keycode

我希望通过正则表达式监视字符。

```
$('#searchContent').keyup(function(e){

        e = e || window.event;

        var patt =/\w/g;
        var key = String.fromCharCode(e.keyCode);

        console.log ( "key " + key + e.keycode+ " is pressed!!");

        if( e.keycode != 8 && e.keyCode != 46){ //Will return if printable char is not typed. But the datagrid will still refresh on  pressing backspace.
            console.log ( "key " + key+ e.keycode + "is about to take test!!" );
            if(!patt.test(key)){ 
                console.log ( "key " + key+e.keycode + "is failed!!");
                return;
            }
            console.log ( "key " + key +e.keycode+ "is pressed passes the test!!");
        }
        else{
            console.log ( "backspace or delete has ByPasses the conditoin!!");
        }
          //  other operations....
}
    //Result of my log. INPUT : RIS(<-backspace)
    key R undefined is pressed!! index_tab.php:173
    key R undefined is about to take test!! index_tab.php:176
    key R undefined is pressed passes the test!! index_tab.php:181
    key I undefined is pressed!! index_tab.php:173
    key I undefined is about to take test!! index_tab.php:176
    key I undefined is pressed passes the test!! index_tab.php:181
    key S undefined is pressed!! index_tab.php:173
    key S undefined is about to take test!! index_tab.php:176
    key S undefined is pressed passes the test!! index_tab.php:181
    key  undefined is pressed!! index_tab.php:173 //here backspace was pressed
    key  undefined is about to take test!! index_tab.php:176
    key  undefined is failed!! 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T09:05:07.727

简而言之，JavaScript**区分**大小写。

`e.keycode != e.keyCode`.

而且，你应该使用[camelCase](http://en.wikipedia.org/wiki/CamelCase) 'd one -`e.keyCode`

假设`$`标志是 jQuery，我建议您`e.which`在查找代码时使用。它已被规范化以与每个浏览器兼容。

见这里：[http](http://api.jquery.com/event.which/) ://api.jquery.com/event.which/ ，基本上[在源代码是](https://github.com/jquery/jquery/blob/master/src/event.js#L449)：

```
// Add which for key events
if ( event.which == null ) {
    event.which = original.charCode != null ? original.charCode : original.keyCode;
} 
```

# html - 向 CSS 询问网站

> ID：15566342
> 
> 赞同：0
> 
> 时间：2013-03-22T09:02:20.013
> 
> 标签：html, css

嗨，我想问一些关于 css 的问题。我想制作一个使用 css 来设计它的网站.. 但我被 css 代码所困扰，这让我感到困惑..

这是我想成为的网络： ![在此处输入图像描述](../Images/a54717e8e55b5f04ca4f911a812654d2.png)

网页的内容中间只有1000px，我做的是这样的：

![在此处输入图像描述](../Images/e68f841ac9d0a8205b23bb90b10c12fd.png)

我不知道如何使角落变成那样，就像丝带角落一样。而且我想让功能区的其余部分更长到网站的末尾（如果你放大或缩小它仍然是成比例的）

第二个问题是当我尝试在 Mozilla 上打开它时，登录框会像这样： ![在此处输入图像描述](../Images/714af77f959af3ad0fc47fed0f21c182.png)

这是代码：

```
<html>
    <head>
        <script src="js/jquery-1.9.1.min.js"></script>
        <script src="js/jquery-migrate-1.1.1.min.js"></script>
        <style>
            a{
                text-decoration:none;
            }

            html{
                height: 100%;
                overflow-y: scroll;
            }

            body {
                margin:0px;
                font-size:8pt;
                font-family: Verdana, Helvetica, Arial, Sans-Serif;
                background-color:#ffbeec;
            }

            .clearBoth{
                clear:both;
            }

            #divHeader{
                height:321px;
            }

            #menuHeader{
                height:50px;
                background-color:#93113d;
            }

            #isiMenuHeader {
                margin:0px auto;
                width:1000px;
                height:100%;

                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=#93113d, endColorstr=#d41a59);
                background-image:-moz-linear-gradient(left, #93113d 0%, #d41a59 50%,#93113d 100%);
                background-image:linear-gradient(left, #93113d 0%, #d41a59 50%,#93113d 100%);
                background-image:-webkit-linear-gradient(left, #93113d 0%, #d41a59 50%,#93113d 100%);
                background-image:-o-linear-gradient(left, #93113d 0%, #d41a59 50%,#93113d 100%);
                background-image:-ms-linear-gradient(left, #93113d 0%, #d41a59 50%,#93113d 100%);
                background-image:-webkit-gradient(linear, left bottom, right bottom, color-stop(0%,#93113d), color-stop(50%,#d41a59),color-stop(100%,#93113d));
            }

            #logoHeader{
                height:221px;
                background-color:#000000;
            }

            #isiLogoHeader{
                margin:0px auto;
                width:1000px;
                height:100%;
                background-color:#000;
            }

            #lineHeader{
                height:13px;
                background-color:#986f39;
            }

            #isiLineHeader{
                margin:0px auto;
                width:1000px;
                height:100%;

                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=#986f39, endColorstr=#d3944d);
                background-image:-moz-linear-gradient(left, #986f39 0%, #d3944d 50%,#986f39 100%);
                background-image:linear-gradient(left, #986f39 0%, #d3944d 50%,#986f39 100%);
                background-image:-webkit-linear-gradient(left, #986f39 0%, #d3944d 50%,#986f39 100%);
                background-image:-o-linear-gradient(left, #986f39 0%, #d3944d 50%,#986f39 100%);
                background-image:-ms-linear-gradient(left, #986f39 0%, #d3944d 50%,#986f39 100%);
                background-image:-webkit-gradient(linear, left bottom, right bottom, color-stop(0%,#986f39), color-stop(50%,#d3944d),color-stop(100%,#986f39));
            }

            #menu2Header{
                height:37px;
                background-color:#93113d;
            }

            #isiMenu2Header{
                margin:0px auto;
                width:1000px;
                height:100%;

                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=#93113d, endColorstr=#d41a59);
                background-image:-moz-linear-gradient(left, #93113d 0%, #d41a59 50%,#93113d 100%);
                background-image:linear-gradient(left, #93113d 0%, #d41a59 50%,#93113d 100%);
                background-image:-webkit-linear-gradient(left, #93113d 0%, #d41a59 50%,#93113d 100%);
                background-image:-o-linear-gradient(left, #93113d 0%, #d41a59 50%,#93113d 100%);
                background-image:-ms-linear-gradient(left, #93113d 0%, #d41a59 50%,#93113d 100%);
                background-image:-webkit-gradient(linear, left bottom, right bottom, color-stop(0%,#93113d), color-stop(50%,#d41a59),color-stop(100%,#93113d));
            }
        </style>
    </head>

    <body>
        <div id="divHeader">
            <div id="menuHeader">
                <div id="isiMenuHeader">
                    <div style="float:left">
                        dsfasfas
                    </div>
                    <div style="float:right;background-color:#f782af;height:52px;width:241px;margin-top:24px;">
                        dsfdsfds
                    </div>
                </div>
            </div>

            <div class="clearBoth"></div>

            <div id="logoHeader" style="margin-top:-26px">
                <div id="isiLogoHeader">
                    <div style="float:left;margin-left:24px;position:absolute;">
                        <img src="images/logo.png">
                    </div>
                    <div style="float:right;color:#fff;margin-right:34px;margin-top:50px;">
                        <div>
                            Member Login<br>
                            <input type="text" style="width:204px"><br>
                            <input type="text" style="width:156px">
                        </div>
                        <div>
                            What are you looking for?<br>
                            <input type="text" style="width:156px">
                        </div>
                    </div>
                </div>
            </div>

            <div class="clearBoth"></div>

            <div id="lineHeader"><div id="isiLineHeader"></div></div> <!--136-->

            <div id="menu2Header">
                <div id="isiMenu2Header">
                    sdasdsas
                </div>
            </div>      
        </div>

        <div class="clearBoth"></div>

        <div id="divBody"> <!--86-->
            <div style="margin:0px auto;width:1000px;height:100%;">
                sfasfasdfas
            </div>
        </div>
    </body>
</html> 
```

非常感谢..希望有人可以帮助我..谢谢... :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T09:10:09.080

至于功能区角，您可以使用这段代码：

**HTML**

```
<div>Lorem ipsum</div> 
```

**CSS**

```
div {
  width: 200px;
  height: 100px;
  margin-left: 30px;
  background: pink;
  position: relative;
}
div:before {
  content: '';
  position: absolute;
  top: 0;
  left: -30px;
  width: 0;
  height: 0;
  border-left: 30px solid transparent;
  border-top: 50px solid pink;
  border-bottom: 50px solid pink;
} 
```

[工作示例](http://codepen.io/anon/pen/JEspu)

它应该适用于所有主流浏览器，包括 IE8（不是 IE7）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:10:10.963

我不太确定 css 功能区，但您可以将功能区绝对定位并设置为 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:30:35.053

在 nd_macias 解决方案的基础上，尝试添加这些：

```
div:after {
content: '';
position: absolute;
width: 2500px;
height: 100px;
background: pink;
} 
```

这会将粉红色延伸到功能区的右侧。然后，由于您的容器 div 的宽度设置为 1000px，并且我假设您不会将其左右的空格用于任何重要的事情，请在您的 body 标签上设置 overflow-x: hidden。添加到您当前的 CSS 中，您将获得：

```
body {
margin:0px;
font-size:8pt;
font-family: Verdana, Helvetica, Arial, Sans-Serif;
background-color:#ffbeec;
overflow-x: hidden;
} 
```

[看这里](http://codepen.io/anon/pen/tdquF)

# python - 如何在 Python 格式字符串中包含符号“{”？

> ID：15566344
> 
> 赞同：3
> 
> 时间：2013-03-22T09:02:25.447
> 
> 标签：python, string

如何在字符串中包含 { 符号？

我的弦

```
str2="call_function(Macro, {0});\n \{ \t int n;\n".format("value") 
```

我收到错误：

```
ValueError: unmatched '{' in format 
```

我已经转义了 { 符号并尝试过没有转义。在这两种情况下我都会遇到同样的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T09:03:32.243

> 格式字符串包含用大括号 {} 包围的“替换字段”。大括号中未包含的任何内容都被视为文字文本，它会原封不动地复制到输出中。**如果您需要在文字文本中包含大括号字符，可以通过加倍将其转义： {{ 和 }}**。 ^([文档](http://docs.python.org/2/library/string.html#format-string-syntax))

* * *

```
In [1]: '{{{0}'.format('foo')
Out[1]: '{foo' 
```

# java - lucene 返回的结果是否比预期的少

> ID：15566349
> 
> 赞同：4
> 
> 时间：2013-03-22T09:02:41.920
> 
> 标签：java, lucene

抱歉标题含糊。这是我的问题。我正在使用以下代码从 lucene 搜索中检索结果

```
scoreDoc[] hits = results.scoreDocs;
int numTotalHits = results.totalHits;
for (int i = 0; i < numTotalHits; i++) {
    int docId = hits[i].doc;
    Document d = searcher.doc(docId);
    System.out.println(i+":File name is: "+d.get("filename"));
    System.out.println(i+":File content is: "+d.get("contents"));
} 
```

现在这段代码有时会弹出一个异常，指出索引超出数组边界。所以我使用了下面的代码，它不会导致任何异常

```
scoreDoc[] hits = results.scoreDocs;
int numTotalHits = results.totalHits;
for (int i = 0; i < numTotalHits-1; i++) {
    int docId = hits[i].doc;
    Document d = searcher.doc(docId);
    System.out.println(i+":File name is: "+d.get("filename"));
    System.out.println(i+":File content is: "+d.get("contents"));
} 
```

这是否意味着`results.totalHits`返回`results.totalHits-2`搜索结果的数量？

谢谢你..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:36:13.747

`totalHits`是与您的查询匹配的文档总数，通常与您从 lucene 返回的文档数不同，后者是您在`hits`数组中得到的。

这是为什么？想想一个搜索引擎：你执行一个查询，一百万个文档匹配，但你只在一个页面中返回 10 或 20 个。100 万将是`totalHits`您从 lucene 返回的，但您只会向 lucene 询问前 10 或 20 个文档，这些文档将在`hits`数组中返回。

只有一种情况`totalHits`与`hits.length`: 当您的查询匹配的文档数量少于或等于您在执行查询时要求的文档数量时，在下面的示例中为 10：

```
TopDocs results = searcher.search(query, 10); 
```

# java - 为什么 InetAddress.getLocalHost() 在 Java 1.7 中表现不同？

> ID：15566350
> 
> 赞同：0
> 
> 时间：2013-03-22T09:02:44.220
> 
> 标签：java, networking, java-7

```
String hostAddress = InetAddress.getLocalHost().getHostAddress(); 
```

上面的代码在 Java 1.7 和 1.6 上的工作方式不同。在 1.6 中，它返回分配给系统的正确 IP (10.4...)。在 1.7 中，它返回 127.0.0.1。

要解决此问题，我必须使用`NetworkInterface.getNetworkInterfaces()`并从中获取`InetAddress`。我将尝试连接到每一个`InetAddress`可用的，直到一次成功。这很好用，但我想知道为什么 Java 1.7 的行为不同？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:28:13.747

很难说清楚，但有一些想法：

从[文档](http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#getLocalHost%28%29)：

> 返回本地主机的地址。**这是通过从系统中检索主机的名称**，然后将该名称解析为 InetAddress 来实现的。

*将*表明`gethostname`@Jayamohan 提到的更改是相关的。

 ** * *

也来自文档

> 如果不允许该操作，则返回表示环回地址的 InetAddress。

这就是你得到的。

* * *

127.0.0.1 确实是您机器的有效地址（很可能）。在多地址系统中，JVM如何确定*你*想要哪个IP？

[更多阅读，类似问题](https://stackoverflow.com/questions/2381316/java-inetaddress-getlocalhost-returns-127-0-0-1-how-to-get-real-ip)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:07:59.893

这是因为自`JDK 7u4`.

详细信息可[在此处获得](http://bugs.sun.com/view_bug.do?bug_id=7166687)

> 这不是真正的错误，而是 7u4 中的行为更改。在 7u4 之前，Linux 实现使用 gethostname，而 7u4 使用 getnameinfo。此更改是 Mac 端口出现的错误。*

# c# - PCL - 无法从 Func 转换 > 到功能 for some targets I currently have a PCL library that incorporates a factory something like this (names changed to protect the innocent): public abstract class ThingFactory : ITh 问问题 问问题 2013-03-22T09:03:05.933 135 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I currently have a PCL library that incorporates a factory something like this (names changed to protect the innocent): public abstract class ThingFactory : IThingFactory { private readonly Dictionary<string, func<object="">> _registrations = new Dictionary<string, func<object="">>(); protected void Register<t>(string name, Func<ithing<t>> resolver) where T : IModel <t>{ _registrations.Add(name, resolver); } // ... Resolve casts invocation back to IThing<t>. } The library builds and tests perfectly for .NET 4.0 above and SL 5. Any other targets (SL 4, Windows phone etc) cause a compilation failure with the conversion message: Error 2 Argument 2: cannot convert from 'System.Func<ithing<t>>' to 'System.Func' Any suggestions? You can fix it using this code: protected void Register<t>(string name, Func<ithing<t>> resolver) where T : IModel <t>{ Func wrapper = () => resolver(); _registrations.Add(name, wrapper); } I guess the reason is that pre .NET 4.0 there is no variance support for func/action c#.netportable-class-library 4 2 回答 2 This answer is useful 5 That's because Func <t>was declared this way in .NET 3.5 public delegate TResult Func<tresult>() Starting from .NET4 the declaration changed to public delegate TResult Func<out tresult="">() Notice lack of out keyword in .NET 3.5 declaration. It makes the generic type covariant. You can read really good explanation about .NET covariance and contravariance support on MSDN. 于 2013-03-22T09:15:44.297 回答 This answer is useful 2 您可以使用以下代码修复它： protected void Register<t>(string name, Func<ithing<t>> resolver) where T : IModel <t>{ Func wrapper = () => resolver(); _registrations.Add(name, wrapper); } 我猜原因是 .NET 4.0 之前没有对 func/action 的差异支持 于 2013-03-22T09:08:54.347 回答 Related 1 c - 为什么不在 tcp 的情况下重用消息缓冲区 1 java - 功能类似于 Django 的默认 ORM 的 Java ORM？ 1 iphone - 如何在 xcode/iPhone SDK 中创建设置 1 postgresql - JPA、EclipseLink、PostgreSQL 和模式 0 c# - C# 客户端验证 2 个证书？ 1 .net - 如果另一个服务依赖于它，我如何导致尝试卸载我的 Windows 服务失败？ 1 exception - 刮擦未处理的异常 1 mysql - 如果日期存在于表列中的任何位置，则返回单行 1 php - 如何配置kohana数据库文件 1 c# - 从 string[] 转换为 int[] 的 xna 4.0 错误 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15566358
> 
> 赞同：2
> 
> 时间：
> 
> 标签：c#, .net, portable-class-library

I currently have a PCL library that incorporates a factory something like this (names changed to protect the innocent):

```
public abstract class ThingFactory : IThingFactory
{
    private readonly Dictionary<string, Func<object>> _registrations = new Dictionary<string, Func<object>>();

    protected void Register<T>(string name, Func<IThing<T>> resolver) where T : IModel<T>
    {
        _registrations.Add(name, resolver);
    }

    // ... Resolve casts invocation back to IThing<T>.
} 
```

The library builds and tests perfectly for .NET 4.0 above and SL 5.

Any other targets (SL 4, Windows phone etc) cause a compilation failure with the conversion message:

```
Error 2 Argument 2: cannot convert from 'System.Func<IThing<T>>' to 'System.Func<object>' 
```

Any suggestions?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T09:15:44.297

That's because `Func<T>` was declared this way in .NET 3.5

```
public delegate TResult Func<TResult>() 
```

Starting from .NET4 the declaration changed to

```
public delegate TResult Func<out TResult>() 
```

Notice lack of `out` keyword in .NET 3.5 declaration. It makes the generic type covariant. You can read really good explanation about .NET [covariance and contravariance](http://msdn.microsoft.com/en-us/library/dd799517.aspx) support on MSDN.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T09:08:54.347

您可以使用以下代码修复它：

```
 protected void Register<T>(string name, Func<IThing<T>> resolver) where T : IModel<T>
    {
        Func<object> wrapper =  () => resolver();
        _registrations.Add(name, wrapper);
    } 
```

我猜原因是 .NET 4.0 之前没有对 func/action 的差异支持</t></ithing<t></t></out></tresult></t></t></ithing<t></t></ithing<t></t></t></ithing<t></t></string,></string,>

# android - 在 Android 上使用 Flex 播放 NetStream

> ID：15566367
> 
> 赞同：0
> 
> 时间：2013-03-22T09:03:38.317
> 
> 标签：android, apache-flex, netstream

我使用 flex 开发一个 android 应用程序，并使用 Red5 Server 作为媒体服务器来共享视频数据。

我希望应用程序从 Red5 播放 NetStream。

```
var ns:NetStream = new NetStream(nc);
var video:Video = new Video();
video.width = 313;
video.height = 194;
video.attachNetStream(ns);

ns.play("fromPC");

videoDisplay.addChild(video); 
```

VideoDisplay 声明如下：

```
<s:VideoDisplay x="10" y="10"
                width="320" height="193"
                id="videoDisplay"/> 
```

Adobe 建议避免`<s:VideoDisplay/>`在移动设备上使用，但我发现它适用于 Android 3.X 而不是 Android 4.X。

所以我想知道我可以用什么来`NetStream`在Android 4.0及更高版本上玩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T19:30:38.083

使用 StageVideo 而不是 Video/VideoDisplay。使用 StageVideo，移动设备的性能要好得多。

确保应用 xml 中的颜色深度为 32 位。还要确保应用程序阶段没有背景，并且 StageVideo 顶部没有任何内容。

此外，您正在测试哪些设备？至少有一台设备（Galaxy Tab 7" 2.0）从未通过 AIR 为我播放过视频。

# php - 从一维数组创建层次数组

> ID：15566370
> 
> 赞同：0
> 
> 时间：2013-03-22T09:03:49.070
> 
> 标签：php, arrays, recursion, multidimensional-array, jstree

我想从从数据库获得的一维数组创建一个层次数组。语言是PHP。

在下面提到的示例中，键 id -3 表示它是根节点。

输入数据：

```
Array
(
    [-2] => Array
            (
                [data] => A-2
                [attr] => Array
                (
                    [id] => -2
                    [parent_id] => -3
                    [title] => A-2
                )
                [state] => open
            }
    [-1] => Array
            (
                [data] => A-1
                [attr] => Array
                (
                    [id] => -1
                    [parent_id] => -2
                    [title] => A-1
                )
                [state] => open
            }
    [0] => Array
            (
                [data] => A0
                [attr] => Array
                (
                    [id] => 0
                    [parent_id] => -1
                    [title] => A0
                )
                [state] => open
            }
    [1] => Array
            (
                [data] => A1
                [attr] => Array
                (
                    [id] => 1
                    [parent_id] => -1
                    [title] => A1
                )
                [state] => open
            }
    [2] => Array
            (
                [data] => A2
                [attr] => Array
                (
                    [id] => 2
                    [parent_id] => -1
                    [title] => A2
                )
                [state] => open
            }
    [3] => Array
            (
                [data] => A3
                [attr] => Array
                (
                    [id] => 3
                    [parent_id] => 2
                    [title] => A3
                )
                [state] => open
            }
    [4] => Array
            (
                [data] => A4
                [attr] => Array
                (
                    [id] => 4
                    [parent_id] => 2
                    [title] => A4
                )
                [state] => open
            }
    [5] => Array
            (
                [data] => A5
                [attr] => Array
                (
                    [id] => 5
                    [parent_id] => -2
                    [title] => A5
                )
                [state] => open
            }
} 
```

输出预期数据：

```
Array
(
    [-2] => Array
    (
        [data] => A-2
        [attr] => Array
        (
            [id] => -2
            [parent_id] => -3
            [title] => A-2
        )
        [state] => open
        [children] => Array
        (
            [-1] => Array
            (
                [data] => A-1
                [attr] => Array
                (
                    [id] => -1
                    [parent_id] => -2
                    [title] => A-1
                )
                [state] => open
                [children] => Array
                (
                    [0] => Array
                    (
                        [data] => A0
                        [attr] => Array
                        (
                            [id] => 0
                            [parent_id] => -1
                            [title] => A0
                        )
                        [state] => open
                    }
                    [1] => Array
                    (
                        [data] => A1
                        [attr] => Array
                        (
                            [id] => 1
                            [parent_id] => -1
                            [title] => A1
                        )
                        [state] => open
                    }
                    [2] => Array
                    (
                        [data] => A2
                        [attr] => Array
                        (
                            [id] => 2
                            [parent_id] => -1
                            [title] => A2
                        )
                        [state] => open
                        [children] => Array
                        (
                            [3] => Array
                            (
                                [data] => A3
                                [attr] => Array
                                (
                                    [id] => 3
                                    [parent_id] => 2
                                    [title] => A3
                                )
                                [state] => open
                            }
                            [4] => Array
                            (
                                [data] => A4
                                [attr] => Array
                                (
                                    [id] => 4
                                    [parent_id] => 2
                                    [title] => A4
                                )
                                [state] => open
                            }
                        )
                    )
                )
            )
            [5] => Array
            (
                [data] => A5
                [attr] => Array
                (
                    [id] => 5
                    [parent_id] => -2
                    [title] => A5
                )
                [state] => open
            )
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:01:28.440

```
$a1 = array( ... your data is here ... );
$a2 = array(); # there are root nodes
$root_ids = array();

foreach($a1 as &$a)
{
    if( isset($a1[$a['attr']['parent_id']]) )
        $a1[$a['attr']['parent_id']]['children'][$a['attr']['id']] = &$a;
    else
        $a2[$a['attr']['id']] = &$a;
}

print_r( $a2 ); 
```

诀窍是使用 &$a 表示法，它为我们提供引用而不是变量副本。基本上非根节点附加到父节点，根节点进入结果数组。

# android - IF 语句在 Android 中不起作用

> ID：15566371
> 
> 赞同：0
> 
> 时间：2013-03-22T09:03:54.727
> 
> 标签：android, if-statement

我正在使用 if 语句来限制用户必须在 editText 中输入电话号码，但是在按下按钮后，editText 的活动开始事件为空

```
 et= (EditText) findViewById(R.id.editText1);
    Button b1 = (Button) findViewById(R.id.button1);   
    if (et != null){
    b1.setOnClickListener(new OnClickListener() {
            @Override
        public void onClick(View v) {
            MediaPlayer mp1=        MediaPlayer.create(MainActivity.this,R.raw.button_test);
            mp1.start();

            startActivity(new Intent(MainActivity.this, Register.class));  
            }   
    });      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:06:26.247

你的 if 条件是错误的。试试这个：

```
if (!et.getText().toString().trim().equals("")){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:08:24.757

et 不会为空，如果是 editText，et 将有地址。采用

```
if(!et.getText().toString().equals("")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:09:09.837

你可以试试这个。

```
 et= (EditText) findViewById(R.id.editText1);
 Button b1 = (Button) findViewById(R.id.button1); 
 b1.setOnClickListener(new OnClickListener() {
        @Override
    public void onClick(View v) {
    if(et.getText().toString().length!=0){
    MediaPlayer mp1= MediaPlayer.create(MainActivity.this,R.raw.button_test);
        mp1.start();

        startActivity(new Intent(MainActivity.this, Register.class));
        }

     }   
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:09:13.360

`et`是控件的实例。请`if`在以下代码中使用

```
et= (EditText) findViewById(R.id.editText1);
Button b1 = (Button) findViewById(R.id.button1);   

b1.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        if (et.getText() != null && et.getText().toString().length > 0){
            MediaPlayer mp1 = MediaPlayer.create(MainActivity.this,R.raw.button_test);
            mp1.start();
            startActivity(new Intent(MainActivity.this, Register.class));  
        }
    }   
}); 
```

# web-applications - BI 仪表板和 Web 报告开发所需的技能和技术

> ID：15566378
> 
> 赞同：3
> 
> 时间：2013-03-22T09:04:14.923
> 
> 标签：web-applications, reporting, business-intelligence, dashboard

我是一名来自分析领域的年轻开发人员，我正在申请一个项目，包括**开发和定制**：

*   **仪表板**和
*   **BI（商业智能）的基于网络的报告**。

正如我所说，我很**年轻，正在学习**，所以我没有列出我做过的好项目，所以现在我的问题如下：

> **问：需要具备哪些技能和需要了解的技术？**

如果由于他们在项目中使用的 BI 技术而无法轻易回答这个问题，那么我应该关注哪些主要*群体？*

我现在的立场：

> *   HTML
> *   PHP
> *   AJaX (JavaScript + XML)
> *   CSS **(?)**
> *   SQL
> *   用于 Oracle 和 IBM Cognos 的 JDBC **(?)**
> *   最终成为专有语言（ABAP / SAS /**其他任何主要语言？**）

如果以上所有听起来我不知道我在说什么（这可能是真的），你会建议我做什么？首先看看他们使用什么作为BI平台？是否有可能覆盖所有平台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:17:29.713

我会说你在正确的轨道上。保持你的 PHP 强大。如果您要进行任何服务器端处理，您还可以考虑熟悉 BASH 和 Perl。在客户访问您的站点之前，他们可以成为您在 cron 作业中处理数据的最佳朋友。这样，他们可以看到预先计算的数据，我们不必让他们在加载页面时等待生成报告，它只是被缓存了。网页设计的蓬勃发展部分之一是内容管理系统，如 Drupal 、Joomla、Wordpress 等。我个人知道，许多内置于 Drupal 框架中的工具都可以轻松进行数据报告（例如，使用 Views）。

如果你打算在网络世界工作，mySQL 很重要。大多数建立在 Unix 平台上的网站都使用它来进行持久数据存储。我还推荐 MongoDB，因为当您处理大量数据时，它是一种非常有用的数据库类型。Mongo 在创建和插入方面工作正常，但它适用于选择语句。如果您有大量静态或变化缓慢的数据，请使用 Mongo。在 Windows IIS 环境之上工作时，了解 MSQL 很重要。

如果您想学习一些漂亮的数据可视化工具，请使用 Google Graphs API 和 FLEX 或 Silverlight 等平台。这些将使您能够展示您的实时数据。

不过，如果您真的想和大佬们一起玩，请使用 Node.JS 进行异步数据收集。例如，您可以创建一个网页，您可以在其中投票并实时查看他们的投票信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:54:00.780

我一直在使用 Joomla！CMS + 用于分析和内联网的平台/框架，我对此非常满意。它非常好且灵活。您还可以使用 LDAP 目录设置 SSO。

我也会坚持使用 PHP，因为构建一些小脚本来从不同系统获取数据也相对容易。如果某些事情不起作用，您可以直接从项目开始就解决它。

**从 PHP 连接到 3rd 方数据库得到了很好的支持。**此外，使用基于 SOAP 的 Web 服务与大型 ERP 系统交互也相对容易。

使用 Joomla 的公司的相当大**的例子！**用于分析/大数据的东西（当然，修改和改编的版本）是[eBay](http://www.computerworld.com/s/article/9189958/EBay_deploys_Joomla_for_analytics_portal)和 Sears Holdings。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:07:48.653

如果您正在定制一些已经存在的东西，那么您将没有太多选择要使用的技术，否则，我建议您查看 Java，因为大多数开源报告解决方案都是用 Java 编写的（ Jasper Reports 和 Pentaho），如果您更喜欢 Microsoft 世界，那么 C# 和 ASP.NET 是必须的，您可以使用来自多个供应商（Devexpress 和 Telerik 等等）的控件和解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:09:31.347

我是 RazorFlow 的开发者——一个 PHP 仪表板框架。它旨在帮助您构建适用于台式机、平板电脑和移动设备的 HTML5 仪表板，而无需担心 JS 和 CSS 部分。它与 MySQL 无缝协作。

如果您有兴趣，可以考虑将其用于您未来的项目。

链接：[RazorFlow PHP](http://razorflow.com)

演示：[RazorFlow 演示](http://razorflow.com/demo/)

（完全披露：我是这个框架的开发者，我发布它只是因为它是原作者提出的问题的相关资源。我不打算在堆栈溢出时自我推销。）

# java - 返回特定格式的值（java）

> ID：15566380
> 
> 赞同：0
> 
> 时间：2013-03-22T09:04:16.037
> 
> 标签：java, tostring

不确定标题是否解释了我真正想做的事情，但是，

我有一条信息当前打印为

```
[[1/2, 1/2], 1] 
```

但是我需要它以格式打印出来

```
{{true@1/2, false@1/2}@1} 
```

我将如何执行此操作，我确实设置了 toString 方法，但是我不确定如何获取“true@”并删除 [[，但是我得到了 {。

目前我有，

```
@Override
public String toString() {
    String s = "{" + this.knowledge + "}";
    return s; 
```

任何帮助将非常感激。

问候，

辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:25:43.277

我假设您只能访问这种格式的字符串（this.knowledge）：，`[[str,str], str]`在这种情况下，以下解决方案将起作用：

```
@Override
public String toString() {
   StringBuilder strB = new StringBuilder();
    for (int i=0; i<this.knowledge.length(); i++) {
        if(this.knowledge.charAt(i)!='[' && this.knowledge.charAt(i)!=']' && this.knowledge.charAt(i)!=',') 
           strB.append(this.knowledge.charAt(i));
    }
    String[] strs = strB.toString().split("\\s+");
    return "{{true@" + strs[0] + ", false@" + strs[1]+ "}@" + strs[2] + "}";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:38:00.923

不确定这个答案是否解释了你真正想做的事情，但是，

您拥有的“信息”看起来很像您可能从列表中获得的默认打印输出。我能够看到“类似”的东西：

```
List<String> inner = new ArrayList<String>();
inner.add("1/2");
inner.add("1/2");

List<Object> outer = new ArrayList<Object>();
outer.add(inner);
outer.add("1");

System.out.println(outer); 
```

如果假设这`knowledge`是一些已知的集合（集合）是正确的，那么您可以创建一个格式方法，该方法能够获取已知元素并将它们放在正确的位置。如果“true”和“false”是硬编码的文本字符串，它可能看起来像：

```
public String formatKnowledge(List list) {
    return "{{true@" + ((List)list.get(0)).get(0) + ", false@" + 
        ((List)list.get(0)).get(1) + "}@" + list.get(1) + "}";
} 
```

现在很明显，这只适用于那种确切类型的列表输入。如果列表可能更复杂，则需要更复杂的逻辑来在适当的位置创建正确的文本（和大括号）。此外，如果以某种方式计算“真”和“假”，则还需要添加该逻辑。

**免责声明：**以上格式方法仅供说明之用。作者不容忍使用疯狂的盲投和更疯狂的盲索引......

# c++ - 日食链接错误

> ID：15566383
> 
> 赞同：0
> 
> 时间：2013-03-22T09:04:28.377
> 
> 标签：c++, eclipse, mingw

在尝试使用eclipse编译一个cpp程序。我遇到了以下链接错误。

```
Description Resource    Path    Location    Type
undefined reference to `gsl_isnan'  mrconvert       line 453, external location: C:\mrtrix\source\mrtrix-0.2.11\lib\mrtrix.h    C/C++ Problem 
```

首先，我不确定如何找到所有需要的库。非常感谢这方面的帮助。

但是，当我尝试向 Eclipse 添加库时，例如 C:\GnuWin32\lib\libgsl "Project > Properties > C/C++ General > Paths and Symbols > Libraries。在 GNU C++ 下单击添加，然后单击文件系统并放入文件的路径。”

我收到此错误：

```
Description Resource    Path    Location    Type
cannot find -lC:/GnuWin32/lib/libgsl    mrconvert           C/C++ Problem 
```

如何正确链接到 Eclipse 中的库？

非常感谢杰西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:39:06.430

您应该从库名称中删除“lib”和“.a”：使用“gsl”而不是“libgsl.a”

并删除完整的库路径“C:/GnuWin32/lib/”。使用“-LC:/GnuWin32/lib/”，从链接器库设置中进行设置。

![在此处输入图像描述](../Images/dd9bae039f73e42240b71e38f83eb1fc.png)

检查库“libgsl.a”是否位于指定路径中。

问候

# jquery - 检查输入字段不是空的并触发表单

> ID：15566387
> 
> 赞同：0
> 
> 时间：2013-03-22T09:04:45.183
> 
> 标签：jquery

**jQuery**

```
$('.sendButton').click(function(e){
        e.preventDefault();
        var errors = 0;
        $("#steps input").each(function(){
            if ($.trim($(this).val()).length == 0){
                errors = 1;
            } else {
                errors = 2;
            }
        });
        if (errors == 2){
            $('#general').submit();
        }
    }); 
```

上面的代码有效，但它会根据#steps div 中有多少输入来触发我的表单。有人可以帮我只开火一次吗？

#steps 中的输入可以在 1 个输入字段和 4 个输入字段之间变化，具体取决于用户从下拉列表中选择的数量。

因此，当用户尝试提交表单时，上面的代码实质上会检查从下拉列表中选择的金额字段是否为空。

因此，如果我从下拉列表中选择 2，则会出现 2 个输入，并且当表单值填满时，表单会触发 2 次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:09:35.540

假设如果任何输入为空，您不想提交表单。

```
$('.sendButton').click(function(e){
    e.preventDefault();
    var errors = 0;
    $("#steps input").each(function(){
        if ($.trim($(this).val()).length == 0)
            errors = 1;           
    });
    if (errors != 1){
        $('#general').submit();
    }
}); 
```

# java - iText 如何创建不可分割的文本

> ID：15566391
> 
> 赞同：1
> 
> 时间：2013-03-22T09:04:48.013
> 
> 标签：java, pdf, itext

我想在生成 pdf 文件时添加签名，但有时，根据文本签名的数量分为两侧。我在想如果我把它放在一个看不见的签名方块里？

签名：

```
Yours sincerely
John Kowalski 
```

错误的结果：

```
Yours sincerely
                Page1
---------------------
---------------------
                Page2
John Kowalski 
```

如何创建这样的算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:06:22.600

有许多不同的方法可以实现这一目标。

可以创建一个`PdfTemplate`，添加文本，将模板包装在一个`Image`中，然后添加`Image`.

可以创建一个`PdfPTable`1 列 1 行，确保行没有分成两部分，然后添加表。

可以检查当前的 Y 位置，计算文本需要多少空间，`newPage()`如果没有足够的空间则触发。

ETC...

# asp.net - 从 C# 代码调用存储过程

> ID：15566393
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:04:55.580
> 
> 标签：asp.net, database, stored-procedures

![ss](../Images/621e67f1a1a1c6b1621b58b3585dc0c2.png)

我有一个存储过程，用于检查输入的电子邮件（和手机）是否已存在于数据库中。如果存在（存在）则返回 True，否则返回 False。如果返回 False（即电子邮件和手机是唯一的），另一个存储过程会将用户详细信息插入数据库并注册他。所有这一切都只需单击一个按钮即可完成。

需要此代码的帮助：

编辑2：

```
 protected void btnRegister_Click(object sender, EventArgs e)
{

    SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
    con.Open();

    SqlCommand Cmd = new SqlCommand("usp_CheckEmailMobile", con);
    Cmd.CommandType = CommandType.StoredProcedure;
    Cmd.CommandText = "Registration";
    Cmd.Parameters.AddWithValue("@Name", txtName.Text);
    Cmd.Parameters.AddWithValue("@Email", txtEmailAddress.Text);
    Cmd.Parameters.AddWithValue("@Password", txtPassword.Text);
    Cmd.Parameters.AddWithValue("@CountryCode", ddlCountryCode.Text);
    Cmd.Parameters.AddWithValue("@Mobile", txtMobileNumber.Text);
    //Cmd.Parameters.Add("@Result", DbType.Boolean);
    SqlParameter sqlParam = new SqlParameter("@Result", DbType.Boolean);
    //sqlParam.ParameterName = "@Result";
    //sqlParam.DbType = DbType.Boolean;
    sqlParam.Direction = ParameterDirection.Output;
    Cmd.Parameters.Add(sqlParam);
    Cmd.ExecuteNonQuery();
    con.Close();
    Response.Write(Cmd.Parameters["@Result"].Value);

} 
```

问题：我如何使它工作？如何使用最少的资源使其工作？我在复制代码吗？我想以最有效/合乎逻辑/正确的方式做到这一点。

编辑：

```
ALTER PROCEDURE [dbo].[usp_CheckEmailMobile]
(   @Name VARCHAR(50), 
@Email NVARCHAR(50), 
@Password NVARCHAR(50), 
@CountryCode INT, 
@Mobile VARCHAR(50), 
@Result BIT OUTPUT)
AS 
BEGIN 

  IF EXISTS (SELECT COUNT (*) FROM AUser WHERE  [Email] = @Email AND [Mobile] = @Mobile) 
 Begin 
 Set @Result=0; --Email &/or Mobile does not exist in database
End
 ELSE
 Begin
 --Insert the record & register the user 
INSERT INTO [AUser] ([Name], [Email], [Password], [CountryCode], [Mobile]) VALUES (@Name, @Email, @Password, @CountryCode, @Mobile)  
  Set @Result=1;
 End

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:09:37.897

ExecuteNonQuery 返回受影响的行数。我认为你应该使用 ExecuteScalar （因为你的过程只返回真或假）。并将执行标量的结果转换为布尔值。

您可以将它们合二为一，而不是使用两种不同的程序。proc将首先检查电子邮件和手机是否存在，如果为false将添加用户，如果为true则不会添加用户并返回false给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:16:06.687

您可以通过`usp_CheckEmailMobile`存储过程执行操作：

在您的存储过程中进行如下检查：

```
-- Check that record doesn't exist
IF NOT EXISTS (SELECT TOP 1 FROM AUser WHERE Email=@Email and Mobile=@Mobile)
       -- Insert record
       INSERT INTO [AUser] ([Name], [Email], [Password], [CountryCode], [Mobile]) 
       VALUES  (@Name, @Email, @Password, @CountryCode, @Mobile) 
```

如果记录不存在，这将插入记录。您只需将其他参数添加到此存储过程中。

您可以使用 True / False 值并根据返回的值说“注册成功”或“用户已存在”。

# bazaar - BZR：是否可以完全删除旧版本？

> ID：15566395
> 
> 赞同：1
> 
> 时间：2013-03-22T09:04:57.337
> 
> 标签：bazaar

是否可以删除一些旧版本以压缩数据库？我并不是要还原任何东西或从中间删除某事。我只想从数据库中删除早于指定日期的所有内容。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:01:31.723

“删除旧版本”是不可能的。

如果你想压缩存储，我可以想到 2 个选项。

1.  运行`bzr reconcile`。该命令的主要功能是修复由 检测到的不一致`bzr check`，但正如它的帮助所说，它也可能会做一些额外的优化：

    > 在运行的同时，它可能会重新压缩数据，从而可能节省磁盘空间或提高性能。

    在执行此操作之前，您可能需要备份存储库！

2.  用干净的新副本替换您的存储库和分支。`bzr branch`您可以使用或命令创建 Bazaar 分支的副本，`bzr push`目标位置位于当前共享存储库之外（如果您正在使用），新的副本分支将自动优化和压缩。

示例：将独立分支复制`/srv/mybranch`到`/newsrv/mybranch`：

```
bzr branch /srv/mybranch /newsrv/mybranch 
```

示例：将共享存储库复制`/srv/repo`到`/newsrv/newrepo`：

```
bzr init-repo /newsrv/newrepo --no-trees
cd /srv/repo
bzr branches -R | while read branch; do bzr push -d "$branch" /newsrv/newrepo/"$branch" --create; done 
```

# asp.net-mvc-2 - 如何使用javascript在asp.net MVC2中的光标位置插入文本

> ID：15566399
> 
> 赞同：0
> 
> 时间：2013-03-22T09:05:19.527
> 
> 标签：asp.net-mvc-2

我正在 asp.net 中开发，屏幕上有一个 CKEDITOR，光标位于应该添加一些文本的位置。页面上存在一个按钮，按下时将打开一个具有文本区域的模态框，用户可以在其中插入文本到光标所在位置，但在该位置不应丢失或替换文本光标。这可能在javascript中吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:59:41.257

您可以将用户输入传递给 ckeditor 的 insertText 或 insertHtml 函数，具体取决于您要将其作为文本插入还是作为 html 源插入。这些将插入编辑器中的光标/焦点位置。

所以如果用户输入是这样的：

```
 Some text and link: <a href="www.on47.com">on47</a> 
```

insertText 将用户输入作为文本放置。即使它包含 html，内容也会显示为文本而不是可点击的链接，因此它会将其插入为：

```
 Some text and link: <a href="www.on47.com">on47</a> 
```

insertHtml 实际上会将其作为 html 源代码，因此任何超链接都将显示为可点击的链接。

一些文字和链接：[on47](http://www.on47.com)

```
//you can get the user input from text area using javascript like below
var insertMe = document.getElementById('textAreaId').value;

//or using jquery as below
//var insertMe = $('#textAreaId').val();

//get your editor instance and insert the text or html
var editor = CKEDITOR.instances.wckEditor;

editor.insertText(insertMe); 
            OR
//editor.insertHtml(insertMe); 
```

让我知道您使用的是哪个版本的 ckeditor ckeditor 4 的 insertHtml 接受第二个参数，该参数是可选的，默认设置为 html 插入模式 insertHtml 中的第二个参数是可以是文本、html、unfiltered_html 等的模式。

```
 editor.insertHtml(insertMe, 'text'); 
```

# django - newrelic-1.10.2.38/newrelic/api/web_transaction.py self.generator.close() 启动 IOError

> ID：15566404
> 
> 赞同：0
> 
> 时间：2013-03-22T09:05:28.283
> 
> 标签：django, uwsgi, gevent, newrelic

将 uwsgi 1.4.2 (gevent = 100) 与 newrelic 一起使用，我遇到重复的错误

```
[pid: 24340|app: 0|req: 1335/4305] 199.27.128.147 () {54 vars in 722 bytes} [Fri Mar 22 16:49:41 2013] HEAD / => generated 0 bytes in 158 msecs (HTTP/1.1 200) 5 headers in 269 bytes (4 switches on core 99)
IOError: write error
Traceback (most recent call last):
  File "/home/web/.virtualenvs/myproject/lib/python2.7/site-packages/newrelic-1.10.2.38/newrelic/api/web_transaction.py", line 539, in close
    self.generator.close()
  File "/home/web/.virtualenvs/myproject/src/django/django/http/response.py", line 227, in close
    for closable in self._closable_objects:
IOError: write error
Exception AssertionError: AssertionError() in <generator object __iter__ at 0x4ed2e10> ignored 
```

我在哪里可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:39:57.693

通过使用正确处理 gevent 的 uwsgi 1.9 解决。

# linux - 从makefile运行可执行文件

> ID：15566405
> 
> 赞同：18
> 
> 时间：2013-03-22T09:05:43.893
> 
> 标签：linux, command-line, makefile, executable

嘿，我只是有一个关于makefile 的快速问题。有没有办法自动运行从makefile生成的可执行文件？

就像我只输入“make”一样，它会编译和构建并自动执行，所以我可以跳过 ./myExecutable 的额外步骤

我在我的笔记中有：

```
run: prog1
        ./prog1 
```

但这似乎不起作用。

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-22T09:09:12.930

如果您在没有指定任何目标的情况下运行 make，它将执行它在 Makefile 中找到的第一个目标。按照惯例`all`是这样一个目标的名称。

如果您为 PHONY 目标`run`设置了先决条件并将`all`两者都标记为 PHONY 目标，那么您应该一切顺利。`all``run`

```
all: run

run: prog1
    ./prog1

.PHONY: all run 
```

顺便说一句，我认为您已经有一些构建`prog1`Makefile 的规则，因此没有将其包含在上面显示的 Makefile 中。

另一种方法是只使用`run`目标显式调用 make，即执行以下命令：

```
make run 
```

# c++ - 创建飞镖游戏并出现两个错误“函数调用中的参数太少”和“游戏，找不到标识符”

> ID：15566407
> 
> 赞同：0
> 
> 时间：2013-03-22T09:05:45.907
> 
> 标签：c++, function, identifier

创建飞镖游戏并出现两个错误

```
too few argurments in function call 
```

和

```
game, identifier not found 
```

我正在尝试为一项任务创建一个游戏，该游戏将使两名玩家“joe 和 sid”从 301 玩飞镖，没有双打，只有公牛和 21 个数组中的数字，非常感谢解决问题的任何帮助，下面的代码有四个主要功能，每个功能都会降低分数，首先是 50 分（公牛），然后是 20 分，然后是单打，两个玩家都必须以公牛结束，当分数达到 50 时，任何不是公牛的分数都会被丢弃.

下面是我的代码，任何帮助将不胜感激。

```
#include <iostream>
using namespace std;

int dartScores[] = {20, 1, 18, 4, 13, 6, 10, 15, 2, 17, 3, 19, 7, 16, 8, 11, 14, 9, 12, 5, 20};

void makeThrow( int &score );

int main () 
{
    int joeScore = 301;
    int sidScore = 301;

    for (int i = 0; i< 1000;i++){
    while( joeScore > 0 || sidScore > 0 )
    {
        //do a throw
        game( joeScore);
        game( sidScore);

    }
    // remember to reset the score value

    }

}
void makeThrow_50( int &score, int acc )
{
    if ( rand()%100 < acc )
    {
        score -= 50;
    }
    else
    {
        //select a random
        int missedScore = dartScores[ rand()%20 ];

        // Only reduce score when thrown score is less than remaining score
        if (missedScore > score)
        {
            // Valid dart, take from score
            score -= missedScore;
        }
        else
        {
            // Invalid throw - BUST
            //cout << " BUST ";
        }

        //if (score <0) score=0;
    }
}

void makeThrow_20( int &score, int acc )
{
    if ( rand()%100 < acc )
    {
        score -= 20;
    }
    else
    {
        //select a random
        int missedScore = dartScores[ rand()%20 ];

        // Only reduce score when thrown score is less than remaining score
        if (missedScore > score)
        {
            // Valid dart, take from score
            score -= missedScore;
        }
        else
        {
            // Invalid throw - BUST
            //cout << " BUST ";
        }

        //if (score <0) score=0;
    }
}

void makeThrow_Single( int &score, int acc )
{
    if ( rand()%100 < acc )
    {
        score -= 1;
    }
    else
    {
        //select a random
        int missedScore = dartScores[ rand()%20 ];

        // Only reduce score when thrown score is less than remaining score
        if (missedScore > score)
        {
            // Valid dart, take from score
            score -= missedScore;
        }
        else
        {
            // Invalid throw - BUST
            //cout << " BUST ";
        }

        //if (score <0) score=0;
    }
}

void makeThrow_bull( int &score, int acc )
{
    if ( rand()%100 < acc )
    {
        score -= 50;
    }
    else
    {
        //select a random
        int missedScore = dartScores[ rand()%20 ];

        // Only reduce score when thrown score is less than remaining score
        if (missedScore > score)
        {
            // Valid dart, take from score
            score -= missedScore;
        }
        else
        {
            // Invalid throw - BUST
            //cout << " BUST ";
        }

        //if (score <0) score=0;
    }
}

int game(int& score, int acc) {
    if (score >= 100)
        makeThrow_50(score, acc);
    else if (score >= 70)
        makeThrow_20(score, 80);
    else if (score >= 51)
        makeThrow_Single(score, 80);
    else 
        makeThrow_bull(score, 80);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:10:43.200

1.  你需要在`game`之前声明`main`
2.  `game`函数接受 2 个参数，而您只传递了一个（在`main`）
3.  你需要`#include <cstdlib>`为`rand()`.
4.  我还建议`#include <time.h>`并`srand (time(NULL))`在`main`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:14:10.517

1.  `game`在调用它之前声明或定义它的原型。
2.  该函数`game`有两个参数。

# ios - 进度 HUD 未显示在正确的视图控制器上

> ID：15566408
> 
> 赞同：3
> 
> 时间：2013-03-22T09:05:50.730
> 
> 标签：ios, objective-c, xcode

我正在使用 SVProgressHUD 类（[https://github.com/samvermette/SVProgressHUD](https://github.com/samvermette/SVProgressHUD)），我有一个主视图控制器，上面有一个按钮，它使用 segue 推送与另一个视图控制器连接。在主视图控制器中，我添加了以下代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   [SVProgressHUD showWithStatus:@"Loading"];
   NSLog(@"segue test");
} 
```

我想要做的是，在加载其他视图控制器之前，需要显示 HUD。如果我运行我的程序，它首先打印出 NSLog “segue test”，然后从另一个 View Controller 打印出 NSLog，问题是当按下按钮时 HUD 不直接显示，当另一个视图控制器已加载...

这就是我现在所拥有的：

![http://i47.tinypic.com/jphh0n.png](../Images/72613631e6f72da7724e3b13e8fcca9e.png)

![http://i50.tinypic.com/vzx16a.png](../Images/ad092177cb05a925b6ebfd5184151b49.png)

这就是我需要的：

![http://i45.tinypic.com/2vcb1aw.png](../Images/fdde8dd6c6a0dc337b91c757ca79f35d.png)

蓝屏加载后，“正在加载”HUD 需要消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:26:07.597

您可以从视图控制器类连接segue，而不是直接从按钮连接segue。确保你给 segue 一个名字，因为你需要这个名字，这样你以后可以调用它。

然后，您可以将您的按钮连接到`IBAction`第一个，该按钮将首先加载您正在加载的内容。加载完成后，您可以关闭进度 HUD 并调用 segue。

```
- (IBAction)loadStuff:(id)sender
{
    [SVProgressHUD showWithStatus:@"Loading"];
    [self retrieveStuff];
}

- (void)retrieveStuff
{
    // I'll assume you are making a NSURLConnection to a web service here, and you are using the "old" methods instead of +[NSURLConnection sendAsynchronousRequest...]
    NSURLConnection *connection = [NSURLConnection connectionWith...];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // Do stuff with what you have retrieved here
    [SVProgressHUD dismiss];
    [self performSegueWithIdentifier:@"PushSegueToBlueScreen"
           sender:nil];
} 
```

如果你只想先模拟会发生什么，你可以试试这个：

```
- (IBAction)loadStuff:(id)sender
{
    [SVProgressHUD showWithStatus:@"Loading"];
    [self retrieveStuff];
}

- (void)retrieveStuff
{
    [NSTimer scheduledTimerWithTimeInterval:2 // seconds
                                     target:self
                                   selector:@selector(hideProgressHUDAndPush)
                                   userInfo:nil
                                    repeats:NO];
}

- (void)hideProgressHUDAndPush
{
    // Do stuff with what you have retrieved here
    [SVProgressHUD dismiss];
    [self performSegueWithIdentifier:@"PushSegueToBlueScreen"
                              sender:nil];
} 
```

**编辑：**您可以尝试使用此 GCD 块下载单个图像。我认为您可以对此进行修改，以便支持下载多个图像。

```
- (IBAction)loadStuff:(id)sender
{
    [SVProgressHUD showWithStatus:@"Loading"];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),
                   ^{
                        // ... download image here
                        [UIImagePNGRepresentation(image) writeToFile:path
                                                          atomically:YES];

                        dispatch_sync(dispatch_get_main_queue(),
                                      ^{
                                            [SVProgressHUD dismiss];
                                            [self performSegueWithIdentifier:@"PushSegueToBlueScreen"
                                                                      sender:nil];
                                       });
                    });
} 
```

# php - 即时检查帖子中的新评论并将其添加到 div 而不刷新页面

> ID：15566409
> 
> 赞同：0
> 
> 时间：2013-03-22T09:05:51.470
> 
> 标签：php, ajax, comments

[我在这里](http://vortexdev.netii.net/article_12/Ajax_comments_system_with_jQuery_and_CodeIgniter)找到了使用 ajax 添加评论的教程

得到它的工作，但注意到你需要刷新页面才能看到你旁边的其他人的评论，你如何检查如果有人添加评论，你会立即看到评论，而无需像 facebook 那样刷新页面。

![在此处输入图像描述](../Images/434b05864405f4c0e2d5eaf16c9c8c74.png)

此处示例某人张贴在墙上，然后当他添加评论时，您会立即看到更改而无需刷新页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:10:53.043

Javascript - [`setInterval`](http://www.w3schools.com/jsref/met_win_setinterval.asp).
在传递给的函数中`setInterval`，您检查后端是否有任何新评论。如果是这样，您会收到它们并动态添加到现有的评论块中。

**更新：**

```
$.ajax(your_url_to_script, {
    type: 'post',
    data: {
        last: last_comment_time, // or just last comment, or Id doesn't matter
    },
    success: function(data)
    {
        if ( '' != data.content.trim() )
        {
            // code, that will add new comments to comments block
        }
    }
}); 
```

# java-me - 在设备上运行 J2ME 应用程序

> ID：15566412
> 
> 赞同：0
> 
> 时间：2013-03-22T09:06:00.160
> 
> 标签：java-me

我为显示纬度经度的 gps 制作了简单的 j2me 应用程序。

CLDC 1.0 MIDP 2.0

我想在 HTC widows 手机上运行它。

请帮助我如何做到这一点。

希望早日收到你的消息。

研究生，

帕尔马南德·索尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:31:28.330

您需要在 Windows Mobile 设备上安装 Java2ME 虚拟机，然后运行编译/组合的 jar 文件。请参阅某些 JVM 的文档。

例如：

*   Mysaifu JVM - [http://www2s.biglobe.ne.jp/~dat/java.../index_en.html](http://www2s.biglobe.ne.jp/~dat/java.../index_en.html)
*   CrEme - [http://www.nsicom.com/Default.aspx?tabid=138](http://www.nsicom.com/Default.aspx?tabid=138) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:25:16.180

如先前的答案所述；为了能够运行 JavaME 应用程序，您需要在设备上安装 JavaME VM。

正如 Nokilay Antipov 所说，Windows Mobile 手机通常配备 Esmertec JBed。它的图标是一个大红色的“e”。如果 Esmertec JBed 没有安装，你可能可以在网上找到它。但 JBed 并不是您唯一的选择。

我个人最喜欢的 JavaME VM 是 phoneME，可在此处为许多平台下载，包括 Windows Phone 6： [http ://davy.preuveneers.be/phoneme/?q=node/10](http://davy.preuveneers.be/phoneme/?q=node/10)

在为 Android 寻找一个好的 JavaME VM 之后，我找到了 phoneME，在我看来，它绝对是最好的 Android 版本。我还在 Windows Mobile 2003 Pocket PC 上成功地对其进行了测试。

对于智能手机来说，JavaME VM 的唯一问题是大多数时候它们不支持或者很少支持 JSR。它直接在phoneME页面上说它不支持像蓝牙这样的额外JSR，所以我也不希望它支持你的应用程序需要的GPS。我怀疑您必须很幸运才能找到支持此类内容的适用于 Windows Mobile 6 的 JavaME VM。但是你可以试一试。

请注意，对于某些 JavaME VM，您无法通过单击本机文件管理器中的 jar 来安装 MIDlet。您必须启动 JavaME VM 的文件管理器安装，然后选择从那里安装。我尝试过的平台上的phoneME就是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:22:24.717

每次我尝试将 jar/jad 文件复制到我的存储卡然后执行它时，它都没有成功。

所以我通常在网络上的某个地方上传 jar/jad 文件，然后使用该 url 使用我想要安装应用程序的手机下载文件，下载后它通常会自动安装 jar/jad 文件。

我习惯使用功能（低端）手机，并且认为HTC不会有任何不同。

# asp.net-mvc - 延迟加载类未加载 - MVC

> ID：15566413
> 
> 赞同：3
> 
> 时间：2013-03-22T09:06:03.890
> 
> 标签：asp.net-mvc, entity-framework, lazy-loading

我有客户：

```
public class Client
{
    public int ClientID { get; set; }
    public string ClientName { get; set; }
    public virtual List<Project> Projects { get; set; }
} 
```

和项目：

```
public class Project
{
    public int ProjectID { get; set; }
    public string ProjectName { get; set; }
} 
```

客户端控制器有一个详细信息获取操作：

```
public ActionResult Details(int id)
{
    Client client = db.Clients.Find(id);
    return View(client);
} 
```

还有一个详细信息发布操作：

```
[HttpPost]
public ActionResult Details(Client client)
{
    if (ModelState.IsValid)
    {
        db.Entry(client).State = EntityState.Modified;
        db.SaveChanges();
                    // reload object from db to populate projects property
        client = db.Clients.Find(client.ClientID);
    }
    return View(client);
} 
```

我的客户详细信息视图：

```
@model Client
<h1>@Html.DisplayFor(model => model.ClientName)</h1>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Client</legend>

        @Html.HiddenFor(model => model.ClientID)

        <div class="editor-label">
            @Html.LabelFor(model => model.ClientName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ClientName)
            @Html.ValidationMessageFor(model => model.ClientName)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

<h2>Projects</h2>

<ul>
@foreach (Project project in Model.Projects)
{
    <li>@Html.ActionLink(project.ProjectName, "Details", "Project", new { id = project.ProjectID }, null)</li>
}
</ul> 
```

现在，如果我去一个有项目的客户，它工作正常，我在文本框中看到客户名称和项目列表。我编辑名称并单击保存。但随后子类列表迭代的视图错误，“对象引用未设置为对象的实例”。

我在这一行中添加了专门从数据库重新加载实例，假设它会重新填充延迟加载列表类，并且我将拥有与获取请求中相同的实例数据，只是名称更改：

```
client = db.Clients.Find(client.ClientID); 
```

为什么它没有在回发中加载子类？

一旦我解决了这个问题，在 Client 类中添加一个实例化 List 类的构造函数是否是一个好主意，以防我导航到数据库中没有任何记录的 Client？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T23:29:46.723

原因是在 MVC 后构建实际 POCO 的实例，而*不是*从 POCO 派生的代理类的实例。因此，没有重写的虚拟属性来执行延迟加载。

解决方案是通过条目显式加载集合（以替换您的 Clients.Find(id) 调用）：

```
db.Entry(client).Collection( c => c.Projects ).Load(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T11:45:13.170

我将不得不研究 ApplyCurrentValues，但目前，这就是我让它工作的方式：

```
 [HttpPost]
    public ActionResult Details(Client client)
    {
        if (ModelState.IsValid)
        {
            db.Entry(client).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Details", new { msg = "saved" });
        }
        client.Projects = db.Clients.Find(client.ClientID).Projects;
        return View(client);
    } 
```

如果验证失败，项目将重新附加，然后再传递回视图。理论上，这应该可以代替 Action 重定向。我也会试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:17:30.577

您添加以重新加载客户端的行不会做任何事情，因为上下文已经具有客户端的本地副本。您可以通过在进行更新之前预先加载客户端/项目来证明这一点。（像这样）

```
client = db.Clients.Find(client.ClientID);
client.Projects.ToList();
db.Entry(client).State = EntityState.Modified;
db.SaveChanges(); 
```

# c# - LINQ to Entity - 在查询中使用匿名对象

> ID：15566416
> 
> 赞同：1
> 
> 时间：2013-03-22T09:06:18.793
> 
> 标签：c#, linq-to-entities, anonymous-objects

我正在尝试编写 LINQ2Entity 查询，它将仅从表中返回 3 列，然后将结果设置为 a`DataSource`的 a `ComboBox`。

我遇到的问题是这个。首先 - 从表中选择所有我使用这样的服务：

```
IList<SoleColor> soles = SoleColorService.All().ToList(); 
```

可以将其设置为等待此类数据的 ComboBox 的 DataSource。但是，因为我想选择匿名对象来仅存储查询结果的 3 列，所以我修改了我的查询，如下所示：

```
IList<SoleColor> soles = SoleColorService.All()
                    .GroupBy(t => t.Sole.Code)
                    .Select(g => new
                    {
                        SoleCode = g.Key,
                        SoleName = g.Select(t => t.Sole.Name),
                        SoleId   = g.Select(t => t.SoleID)
                    }); 
```

这导致`.Select`使用以下文本“无法将类型 System.Linq.IQueryable 隐式转换为 System.Collections.Generic.IList”标记为错误。如果我`IList<SoleColor> soles =`改为`var soles =`它很好，但是分配匿名类型（如 DataSource）时会出现问题，但我认为这可以在查询中修复，所以我在那里得到正确的类型。另外在某些时候我必须添加类似`First()`or`FirstOrDafult()`到 y 查询，因为我有许多相同的记录，`SoleCode`我只想为每个 unique 保留一个`SoleCode`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:09:00.080

第一：如何每组只得到一个结果我已经在上一个问题中向您展示过。结合匿名类型，这将如下所示：

```
SoleColorService.All()
                .GroupBy(t => t.Sole.Code)
                .Select(g => g.First())
                .Select(x => new
                {
                    SoleCode = x.Sole.Code,
                    SoleName = x.Sole.Name),
                    SoleId   = x.SoleID)
                }); 
```

第二：如果您需要从您的方法中以强类型的方式返回此查询的结果，则不能使用匿名类型。您必须创建一个命名类型并使用它来代替：

```
public class SoleModel
{
    private readonly string _code;
    private readonly string _name;
    private readonly int _id;

    public SoleModel(string code, string name, int id)
    {
        _code = code;
        _name = name;
        _id = id;
    }

    public string Code { get { return _code; } }
    public string Name { get { return _name; } }
    public int Id { get { return _id; } }
}

SoleColorService.All()
                .GroupBy(t => t.Sole.Code)
                .Select(g => g.First())
                .Select(x => new SoleModel(x.Sole.Code, x.Sole.Name x.SoleID)); 
```

第三：将匿名类型列表分配给数据源应该可以工作。

```
var result = SoleColorService.All()
                             .GroupBy(t => t.Sole.Code)
                             .Select(g => g.First())
                             .Select(x => new
                             {
                                 SoleCode = x.Sole.Code,
                                 SoleName = x.Sole.Name),
                                 SoleId   = x.SoleID)
                             }); 
someControl.DataSource = result; 
```

# java - 如何让安卓产品变得可消费

> ID：15566417
> 
> 赞同：2
> 
> 时间：2013-03-22T09:06:19.700
> 
> 标签：java, android

我正在做一个项目，我需要把它变成消耗品。

点击购买按钮，使用以下代码进行消费。

```
inventory=new Inventory();
mHelper.consumeAsync(inventory.getPurchase(SKU_SUCCESS),mConsumeFinishedListener1); 
```

但它在 IabHelper 类中得到了“购买的空指针异常”。

```
void consume(Purchase itemInfo) throws IabException {
    checkSetupDone("consume");

    if (!itemInfo.mItemType.equals(ITEM_TYPE_INAPP)) {
        throw new IabException(IABHELPER_INVALID_CONSUMPTION,
                "Items of type '" + itemInfo.mItemType
                        + "' can't be consumed.");
    }

    try {
        String token = itemInfo.getToken();
        String sku = itemInfo.getSku();
        if (token == null || token.equals("")) {
            logError("Can't consume " + sku + ". No token.");
            throw new IabException(IABHELPER_MISSING_TOKEN,
                    "PurchaseInfo is missing token for sku: " + sku + " "
                            + itemInfo);
        } 
```

如果有人对此有想法，请告诉我。

consumeAsync() 的代码

```
public void consumeAsync(Purchase purchase, OnConsumeFinishedListener listener) {
    checkSetupDone("consume");
    List<Purchase> purchases = new ArrayList<Purchase>();
    purchases.add(purchase);
    consumeAsyncInternal(purchases, listener, null);
}

public void consumeAsync(List<Purchase> purchases, OnConsumeMultiFinishedListener listener) {
    checkSetupDone("consume");
    consumeAsyncInternal(purchases, null, listener);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:56:54.243

看来您正在使用我今天偶然发现的 Google 的[marketbilling 项目。](http://code.google.com/p/marketbilling/ "code.google.com 上的marketbilling 项目")我不知道这是否是进行应用内计费的“标准”方式，但知道您从一开始就使用它会很有帮助。

无论如何，该`Inventory`课程也是该项目的一部分。`Inventory`当您执行以下操作时，您正在创建一个空对象`inventory=new Inventory();`。`inventory.getPurchase(SKU_SUCCESS)`那么，这将返回 null 也就不足为奇了：

```
/** Returns purchase information for a given product, or null if there is no purchase. */
public Purchase getPurchase(String sku) {
    return mPurchaseMap.get(sku);
} 
```

您将该值传递给`mHelper.consumeAsync`，最终将其传递给`consume`as `itemInfo`。当 consumer 执行 check`!itemInfo.mItemType.equals(ITEM_TYPE_INAPP)`时，会得到空指针异常。

简而言之，将一个有效`Purchase`对象传递给该`consumeAsync`方法。

# django - Django - 自定义小部件 - 为什么 Django 认为我没有“属性”？

> ID：15566418
> 
> 赞同：1
> 
> 时间：2013-03-22T09:06:19.903
> 
> 标签：django, django-widget

*编辑：使用 Django 1.3*

我已经构建了一个自定义小部件来教育自己，但我无法解决在获取页面时 Django 说的问题：

```
'FooTestWidget' object has no attribute 'attrs' 
```

我不想使用 'attrs' 参数，并且我已将其设置为默认值 None（也尝试了一个空字典，例如 {}），所以我对 Django 抱怨的原因感到困惑。

**小部件.py**

```
class FooTestWidget(Widget):
    """
    A very silly widget to test I can do anything
    """
    def __init__(self, attrs=None):
        pass

    def render(self, name, value, attrs=None):
        tpl = Template(u"""<h1>This is here instead of a CharField</h1>""")
        return mark_safe(tpl.substitute(colour=value)) 
```

**管理员.py**

```
class UserAdminForm(ModelForm):
    class Meta:
        model = User
        widgets = {
                'name_family': FooTestWidget,
        }

class UserAdmin(admin.ModelAdmin):
    form = UserAdminForm 
```

**模型.py**

```
class User(models.Model):
    id = models.AutoField(primary_key=True, db_column='USE_ID')
    name_given = models.CharField(max_length=200, db_column='USE_NAME_GIVEN')
    name_family = models.CharField(max_length=200, db_column='USE_NAME_FAMILY') 
```

* * *

**丹尼尔帮助后的工作版本**

这是widgets.py的工作版本，在接受了丹尼尔在他的回答中解释的内容，然后我做了一两个其他的小改动（这与这里描述的问题无关，但它停止了它应该正常工作）。这个版本现在可以像我预期的那样工作：

```
from datetime import date
import re

from django.forms.widgets import Widget, Select
from django.utils.safestring import mark_safe
from django.forms import widgets
from django.template.base import Template

__all__ = ('FooTestWidget',)

RE_DATE = re.compile(r'(\d{4})-(\d\d?)-(\d\d?)$')

class FooTestWidget(Widget):
    """
    A very silly widget to test I can do anything
    """
    #def __init__(self, attrs={}):
    #    pass

    def render(self, name, value, attrs=None):
        sout = u"""<h1>This is here instead of a CharField</h1>"""
        return mark_safe(sout) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T10:03:57.803

问题是你已经`__init__`用一个什么都不做的方法覆盖了。由于您甚至没有调用超类方法，因此 Django 所期望的设置都不会发生：包括将`attrs`参数设置为`self.attrs`属性。

基本上，如果你真的必须覆盖`__init__`，那么至少`super(FooTestWidget, self).__init__(attrs)`在某个地方打电话。但是，如果你在那个方法中没有做任何特别的事情，最好不要覆盖它，让 super 方法自动使用。

# machine-learning - k-最近邻算法

> ID：15566423
> 
> 赞同：1
> 
> 时间：2013-03-22T09:06:25.590
> 
> 标签：machine-learning, knn

我正在我的智能设备上实施 k-最近邻算法，以便从识别数据中识别人类活动。我将解释我将如何实现它。你们能否建议我对我正在采取的步骤进行任何改进，并回答我在途中可能会问的任何问题？

这些是步骤：

1.  我下载了一个带[标签的数据集](http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones)，其中包括来自加速度计的三轴加速度以及描述活动的标签。我将在这个数据集中选择一些我希望识别的活动（在我的例子中是步行、坐着、站立）的数据。
2.  然后，我将从数据集中的加速度计数据的每个窗口（即从包含加速度计数据的 128 个读数的数据集中的每条记录）中提取特征（在我的情况下，从幅度加速度的平均值、最小值、最大值、标准偏差）和我将以 JSON 格式将这些特征与窗口标签（作为一条记录）一起存储在设备上的文本文件中。因此，训练数据集中的一个记录/样本将包括：平均值、最小值、最大值、标准差和一个标签
3.  在分类步骤中，从收集的数据中，我还将有一个加速度计数据窗口，从中提取上述 4 个特征。因此，我需要将收集到的数据的 4 个特征与训练数据中的每个样本进行比较。我应该如何找到它们之间的相似性，因为一条记录将包含 4 个特征？

作为第 (3) 点问题的解决方案，我正在考虑通过计算每个特征之间的差异来获取每个特征的 k 最近邻，然后从每个特征中挑选出大多数。请问你怎么看？你能提出任何优化吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T16:12:22.083

相当有趣和有趣的应用程序！;-)

好吧，其中一个问题当然是知道何时开始和停止计算这些功能，但我想你已经有了一些解决方案（固定时间窗口，或按钮......）。你当然可以使用 knn 分类器来做到这一点，但这肯定不是我的首选，因为它对异常值非常敏感（如果你的测量在一次训练中搞砸了，它将永远影响你的下一个分类） . 所以我宁愿选择高斯模型：

1.  为每个活动记录大约 10 到 20 个示例（即，4 个值的向量）
2.  计算每个活动的平均向量和对角协方差矩阵
3.  在测试时，您计算新观察向量由三个高斯模型之一生成的高斯似然性，然后选择似然性最大的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T11:13:20.793

我会以不同的方式处理这个问题。我会在更长的时间内（比如 1 周）采集大量样本，然后在其中找到集群。之后，只要当前测量值接近其中一个集群，用户就可以标记这些集群。集群的数量应该限制在几个活动中，以便用户只需要标记几个集群。

缺点：

*   需要来自用户的训练数据/没有即时满足感。
*   实现起来比较复杂。

优点：

*   为用户定制。
*   不受外部/非个人培训数据的限制。
*   使用其他数据（光/温度/GPS/时间/声音/相机）。
*   可能更准确。
*   算法的连续重新训练是可能的。
*   随着更多数据的可用，准确性会随着时间的推移而提高。
*   可以将标记数据上传到中央服务器并在应用程序的未来版本中使用。

# sgmlreader - 如何停止 SGMLReader 添加缺少的标签，如输出

> ID：15566429
> 
> 赞同：0
> 
> 时间：2013-03-22T09:06:36.807
> 
> 标签：sgmlreader

我正在使用 SGML Reader 来格式化我的 html 片段，如下所示[https://github.com/MindTouch/SGMLReader](https://github.com/MindTouch/SGMLReader)。问题是它在代码中添加了缺失的标签。有什么办法可以阻止它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:14:25.900

SgmlReader 旨在将源代码转换为有效的 HTML 文档。因此，它总是用 . 如果要删除某些标记，可以遍历 XML 文档并删除不需要的节点，或者仅将需要的节点复制到新的 XML 文档中。

# c# - 如何获取 Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItemLink 的类型？

> ID：15566432
> 
> 赞同：0
> 
> 时间：2013-03-22T09:06:46.923
> 
> 标签：c#, visual-studio-2010, tfs

我想获取诸如“Parent”、“Child”、“Related”等字符串，但经过长时间的搜索，我没有找到任何方法。

我找到的文档在[这里](http://msdn.microsoft.com/zh-cn/library/microsoft.teamfoundation.workitemtracking.client.workitemlink.aspx)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:22:56.657

如果我没记错，您需要检查您提供的文档页面上的 WorkItemLink.LinkTypeEnd 属性。您还可以在[此页面](http://blogs.msdn.com/b/dgorti/archive/2007/09/26/querying-on-workitem-links-through-the-api.aspx)上找到一些信息。

# asp.net-mvc - ASP.NET MVC：更改容器的可见性会破坏模型绑定

> ID：15566436
> 
> 赞同：0
> 
> 时间：2013-03-22T09:06:59.863
> 
> 标签：asp.net-mvc, jquery-ui-dialog

我的模型上有一个字段，显示在页面上，如下所示：

```
<label id="someId">@Model.TextProperty</label> 
```

TextProperty 第二次显示在页面上：

```
<div id="hiddenEditForm" style="display: none;">
    @Html.TextAreaFor(m => m.TextProperty, new
    {
         @Id = "textPropertyValue"
    })
</div> 
```

在不触碰的情况下提交表单时`hiddenEditForm`，Controller 接收到 TextProperty 的原始值，没有问题。

但是，如果在（jQuery UI Dialog）之后提交表单`$("#hiddenEditForm").dialog()`，则控制器中 Model 上的 TextProperty 为空，并且验证失败。看起来它与 jQuery 插件显式耦合，因为执行 a`$("#hiddenEditForm").show()`不会破坏绑定。

这里发生了什么事？如何在控制器中保留我的 TextProperty？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:04:44.607

这个问题很好地讨论了 jQuery 对话框：[jQuery modal window removes elements from my form](https://stackoverflow.com/questions/567637/jquery-modal-window-removes-elements-from-my-form)。

我模糊记得以前遇到过这个问题。

# winforms - Windows 窗体中的验证

> ID：15566438
> 
> 赞同：1
> 
> 时间：2013-03-22T09:07:02.213
> 
> 标签：winforms

我正在开发一个 Windows 窗体应用程序，它有很多窗体，每个窗体都有几个控件。为了实现验证，我必须为每个控件实现“验证”事件，如下所示：

```
 private void txtSalary_Validating(object sender, CancelEventArgs e)
    {
        if (txtSalary.Text.Trim() == String.Empty)
        {
            errorProvider1.SetError(txtSalary, "Salary is Required");
            e.Cancel = true;
        }
        else
            errorProvider1.SetError(txtSalary, "");

    } 
```

有什么方法可以让我做一些通用的事情吗？我可以通过代码以通用方式将事件与控件相关联，而不是为每个控件（表单设计视图 - 控件属性）声明性地定义“验证”事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:10:27.323

如果您所有的输入都是相同的类型*，并且*您可以对每个输入进行相同的验证*并且*您一致地命名控件，那么可以通过在表单的构造函数中添加类似以下代码（在初始化之后）来扩展coolmine的答案：

```
foreach(Control c in Controls)
{
    if(c is TextBox)
    {
        c.Tag = c.Name.Replace("txt","");
        c.Validating += textboxValidation_Validating;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:22:20.270

对于每个表单，您只能使用一个事件，例如，您可以使用类似这样的东西

```
private void textboxValidation_Validating(object sender, CancelEventArgs e)
{
    TextBox tb = sender as TextBox;

    if (string.IsNullOrEmpty(tb.Text.Trim()))
    {
        errorProvider1.SetError(tb, tb.Tag +" is Required");
        e.Cancel = true;
    }
    else
        errorProvider1.SetError(tb, "");
} 
```

这可以用于表单中的所有文本框，您只需在其 Tag 属性中添加每个文本框所需的内容。

也可以对所有形式使用一个事件。看看[为多个表单设置单个事件处理程序](https://stackoverflow.com/questions/12092787/set-up-single-event-handler-for-multiple-forms)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:25:23.703

您可以创建一个用于验证的分隔符方法并在单击按钮时调用它，试试这个：

```
private void SubmitButton_Click(object sender, EventArgs e)
    {
        if (ValidateControls()==0)
        {
           //Form is validated
        }
    }

    int ValidateControls()
    {
        int flag = 0;
        errorProvider1.Clear();
        if (txtAge.Text.Trim() == String.Empty)
        {
            errorProvider1.SetError(txtAge, "Age is required");
            flag = 1;
        }
        ............................................
        ............................................
       // validate all controls
        ............................................
        ............................................

        if (txtSalary.Text.Trim() == String.Empty)
        {
            errorProvider1.SetError(txtSalary, "Salary is required");
            flag = 1;
        }

        return flag;
    } 
```

# apache - 如何重写子域 URL 的 URL 以访问主域页面？

> ID：15566439
> 
> 赞同：0
> 
> 时间：2013-03-22T09:07:04.603
> 
> 标签：apache, .htaccess, url-rewriting, rewrite

我必须在地址栏上显示类似 sub.mydomain.com/pages 的 URL。但文件将从 mydomain.com/pages 执行。

要求是显示

sub.mydomain.com/index.html => 索引文件位于根文件夹 (mydomain.com/index.html)

这意味着所有文件都位于根文件夹中，但是，我尝试显示带有子域的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:37:39.260

通过启用 mod_roxy、mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^sub\.(mydomain\.com)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [L,P] 
```

# ruby-on-rails - 在 Rails 中实现编辑时出现未初始化的常量错误

> ID：15566443
> 
> 赞同：0
> 
> 时间：2013-03-22T09:07:23.307
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我是 ruby​​ on rails 的新手。我正在尝试一个新的图书馆管理项目，但在这样做时遇到了一个错误，

我得到的错误是`uninitialized constant ActionView::CompiledTemplates::Library` 当我试图在 book_transactions 中实现编辑时。

```
Extracted source (around line #23):

20:   <div class="control-group">
21:     <%= f.label :reason_id, :class => 'control-label' %>
22:     <div class="controls">
23:       <%= collection_select(:book_transaction, :reason_id, LovHelper.getLov(Library::Library::USER_TYPE_LOV), :id, :lov_value) %>
24:     </div>
25:   </div>
26:   <div class="control-group"> 
```

我的看法如下：-

```
<%= form_for @book_transaction, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :book_id, :class => 'control-label' %>
    <div class="controls">
      <%= collection_select(:book_transaction, :book_id, Book.all, :id, :title) %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :action_date, :class => 'control-label' %>
    <div class="controls">
      <%= f.datetime_select :action_date, :class => 'datetime_select' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :num_copies, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :num_copies, :class => 'number_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :reason_id, :class => 'control-label' %>
    <div class="controls">
      <%= collection_select(:book_transaction, :reason_id, LovHelper.getLov(Library::Library::USER_TYPE_LOV), :id, :lov_value) %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :notes, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area(:notes, :size => '80x10', :class => 'text_field')%>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :entered_by, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :entered_by, :class => 'number_field' %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                book_transactions_path, :class => 'btn' %>
  </div>
<% end %> 
```

我的表如下：-

```
id serial NOT NULL,
  book_id integer,
  action_date timestamp without time zone,
  num_copies integer,
  reason_id integer,
  notes character varying(255),
  entered_by integer,
  created_at timestamp without time zone NOT NULL,
  updated_at timestamp without time zone NOT NULL,
  deleted integer NOT NULL DEFAULT 0,
  CONSTRAINT book_transactions_pkey PRIMARY KEY (id) 
```

我的 Lovhelper 文件如下：-

```
module LovHelper

    #----------------------------------------------------------------------------  
    #  getLov - Get a list of values for a particular LOV type
    #----------------------------------------------------------------------------
    def self.getLov(lov_type)
        lovs = LovValue.unscoped
        lovs = lovs.select('lov_values.id, lov_value')
        lovs = lovs.joins(:lov_name)
        lovs = lovs.where('lov_names.name = ? ', lov_type)
        lovs = lovs.order('sequence asc')
        lovs.all

        return lovs     
    end

    #----------------------------------------------------------------------------  
    #  getValue - Get the value pertaining to a particular LOV Value id
    #----------------------------------------------------------------------------
    def self.getValue(lov_value_id)
        lov = LovValue.find(:all,
                                :select => 'lov_value',
                                :conditions => ['id = ? ', lov_value_id]).first
        return lov.lov_value
    end

    #----------------------------------------------------------------------------  
    #  getLovNames - Get a list of LOV names
    #----------------------------------------------------------------------------
    def self.getLovNames
        lov_names = LovName.all
        return lov_names
    end

end 
```

现在我得到的代码是由我的前辈实现的，所以理解起来有点问题。

任何人都可以向我解释为什么我会收到这个错误。

# asp.net-mvc - 在 MVC .4 中发布起始页

> ID：15566445
> 
> 赞同：1
> 
> 时间：2013-03-22T09:07:32.377
> 
> 标签：asp.net-mvc, visual-studio-2010, asp.net-mvc-4, visual-studio-2012

（注意：我是 ASP.NET MVC 世界的初学者......）环境：Visual Studio 2012 项目应用程序：ASP.NET MVC 4.0

我确实将 /views/home/index.html 设置为起始页......事情并没有如我所愿，我无法调试。错误消息说：

* * *

```
Server Error in '/' Application.
--------------------------------------------------------------------------------
The resource cannot be found. 
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 
Requested URL: /Views/Home/Index.cshtml 
```

* * *

现在我想知道我怎么后悔这个举动...我什至不知道从哪个文件开始设置为启动页面...</p>

哪个文件通常是默认的启动文件？我可以从“启动页面”中释放文件吗？我在另一台计算机上也有旧版本。Environment Vs 2010\. 我可以在那里看到哪个文件设置为起始页吗？

我很感激任何提示或解决方案来解决我的任务……谢谢。希望这些信息足以让您了解我的问题。如果不是，我会尽量让它更容易理解。

**以下答案后使用的解决方案：我在“项目菜单”中选择了“yourprojectname-properties”。然后在属性窗口中选择“Web”。然后添加 / 如上所述...对于所有在我的这个问题上花了一些时间的人...你摇滚！没有明天...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:29:04.300

您必须将 route-url 设置为 starturl，而不是页面。在 ASP.NET MVC 中，您必须使用路由，并且每个路由都映射到一个操作。

# windows - 以编程方式在 Windows 8 中创建磁贴组

> ID：15566450
> 
> 赞同：3
> 
> 时间：2013-03-22T09:07:41.433
> 
> 标签：windows, windows-8, tiles

是否可以通过代码创建图块组？仅仅创建一个带有链接的文件夹是不够的/不起作用。我们想要组织我们的设置提供的图块。

谢谢。

# java - 鼠标拖动不返回准确的鼠标点

> ID：15566452
> 
> 赞同：0
> 
> 时间：2013-03-22T09:07:50.950
> 
> 标签：java, awt

如果我在我的 上使用快速或快速鼠标拖动`Panel`，鼠标拖动功能会跳过一些点，例如：

如果鼠标按下的点是：847，我快速拖动鼠标它返回：853,861,....

我希望该值精确到一个点。如何做到这一点？

这是我的代码。

```
package Main;

import java.awt.AWTException;
import java.awt.AlphaComposite;
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Cursor;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Insets;
import java.awt.KeyboardFocusManager;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.RenderingHints;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionAdapter;
import java.awt.event.MouseMotionListener;
import java.awt.geom.Area;
import java.awt.geom.Rectangle2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.net.MalformedURLException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Iterator;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.imageio.IIOImage;
import javax.imageio.ImageIO;
import javax.imageio.ImageWriteParam;
import javax.imageio.ImageWriter;
import javax.imageio.stream.ImageOutputStream;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.UIManager;
import javax.swing.filechooser.FileNameExtensionFilter;

public class ScreenCapture{
  static ImageArea ia = new ImageArea();
  static JFrame mainFrame = new JFrame();
  static Rectangle rectScreenSize = new Rectangle(Toolkit.getDefaultToolkit().getScreenSize());

  static Robot robot;
  private static File movieFolder=null;

  static String cl="null";
  JScrollPane jsp;
  static Date date = new Date();
  static SimpleDateFormat sdf = new SimpleDateFormat("yyyy_MM_dd_h_mm_ss_a");
  static String formattedDate = sdf.format(date);

  public ScreenCapture() throws AWTException {  }

 public static void save() {
   if (ia.getImage() == null) {
    System.out.println("No captured image.");
    return;
  }
   ImageWriter writer = null;
   ImageOutputStream ios = null;

   try {
     Iterator iter = ImageIO.getImageWritersByFormatName("jpeg");

     if (!iter.hasNext()) {
       System.out.println("Unable to save image to jpeg file type.");
       return;
     }
     //writer = (ImageWriter) iter.next();
     //ios = ImageIO.createImageOutputStream(new File("c:\\Users\\Aadi\\Desktop          \\a.jpg"));
  //writer.setOutput(ios);
  //ImageWriteParam iwp = writer.getDefaultWriteParam();
  //iwp.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
  //iwp.setCompressionQuality(0.95f);
    BufferedImage im = (BufferedImage) ia.getImage();
     BufferedImage im1 = im.getSubimage(ia.selectedRectangle.x+1,    ia.selectedRectangle.y+1, ia.selectedRectangle.width-1, ia.selectedRectangle.height-1);
          //robot.createScreenCapture(new Rectangle(ia.selectedRectangle.x+1,     ia.selectedRectangle.y+1, ia.selectedRectangle.width-1, ia.selectedRectangle.height-1));
  //writer.write(null,
    // new IIOImage(im.getSubimage(ia.selectedRectangle.x, ia.selectedRectangle.y, ia.selectedRectangle.width, ia.selectedRectangle.height), null, null), iwp);
  //Graphics g2d = im1.createGraphics();
  //ia.paint(g2d);
    if( movieFolder == null){
                                    movieFolder = null;
                       //MainIconPage d1 = new MainIconPage();
                    if(Main.MainIconPage.jfc == null)
                       Main.MainIconPage.jfc = new JFileChooser();
    // set selection to folders only
    Main.MainIconPage.filter = new FileNameExtensionFilter("Portable Network Graphics", "png", "png");

    Main.MainIconPage.jfc.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
    Main.MainIconPage.jfc.setSelectedFile(new File("C:/"+"screenShot"+formattedDate+".png"));
    Main.MainIconPage.jfc.setFileFilter(Main.MainIconPage.filter);
    // show chooser dialog
    int r = Main.MainIconPage.jfc.showSaveDialog(Main.MainIconPage.jfc);
    // on selection
    if (r == JFileChooser.APPROVE_OPTION) {
        // set the save folder
        movieFolder = Main.MainIconPage.jfc.getSelectedFile();
   //ImageIO.write(screenShot, "PNG", new File(movieFolder,""));
   ImageIO.write(im1, "PNG",  new File(movieFolder,""));
   cl = movieFolder.toURL().toString().substring(6);
    }else if(r == JFileChooser.CANCEL_OPTION){
    Main.MainIconPage.jfc.hide();
    Main.MainIconPage.jfc = null;
    }}

  } catch (Exception e2) {
    e2.printStackTrace();
  }

  }
  public static void main(String[] args) throws Exception {
     try{
     UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
     }catch(Exception ex){}

    final ScreenCapture sc = new ScreenCapture();
    sc.robot = new Robot();
    sc.mainFrame.setUndecorated(true);
    sc.mainFrame.setExtendedState(JFrame.MAXIMIZED_BOTH);
    sc.mainFrame.setVisible(false);

       BufferedImage biScreen = robot.createScreenCapture(rectScreenSize);
       sc.mainFrame.setVisible(true);

       ia.setImage(biScreen);
    sc.mainFrame.getContentPane().add(ia);
    sc.mainFrame.setVisible(true);
    sc.mainFrame.addKeyListener(new KeyListener() {

      @Override
      public void keyTyped(KeyEvent e) {
          //throw new UnsupportedOperationException("Not supported yet.");
      }

      @Override
      public void keyPressed(KeyEvent e) {
          char c = e.getKeyChar();
          if(c==KeyEvent.VK_ESCAPE){
          sc.mainFrame.dispose();
          }
      }

      @Override
      public void keyReleased(KeyEvent e) {
          //throw new UnsupportedOperationException("Not supported yet.");
      }
    });
   }
 }
  class ImageArea extends JPanel 
  implements MouseListener, MouseMotionListener{
  private Image image;
  final static float dash1[] = { 2.0f };
  final static BasicStroke dashed = new BasicStroke(1.0f,
    BasicStroke.CAP_BUTT, BasicStroke.JOIN_MITER, 10.0f, dash1, 0.0f);
  Point startPoint = new Point(), endPoint = new Point();
  buttonActions btAction = new buttonActions();
  Rectangle selectedRectangle=null;
  boolean dragging=false;
  ImageArea component;
   private int width1;
   private int height1;
   private final int PROX_DIST=3;
   private int mousePressedX;
   private int mousePressedY;
   private int x1;
   private int y1;
   private int x2;
   private int y2;
   private int x3;
   private int y3;
   private int width,height;
   static JButton btSave,btClose,btBrowse,btEdit,btSize;
   ImageIcon save = new ImageIcon(ClassLoader.getSystemResource("images/save.png"));
   ImageIcon close = new ImageIcon(ClassLoader.getSystemResource("images/close.png"));
   ImageIcon tool = new ImageIcon(ClassLoader.getSystemResource("images/tool.png"));
   ImageIcon browse = new    ImageIcon(ClassLoader.getSystemResource("images/browse.png"));
  private boolean move=false;
   private int moveX;
   private int moveY;
   boolean yes=true;
   private Point mouseDraggedPoint;
   private Point mousePressedPoint;
   private boolean not;
   private boolean reverse=false;
   private int resetHeight;
   private int resetWidth;
   private boolean resetRectangle=false;
   SwingUtil s = new SwingUtil();
   private Rectangle areaRect;
  public ImageArea() {
  component = this;
  btSave =new JButton(save);
  btSave.setPreferredSize(new Dimension(40,40));
  btSave.setToolTipText("Save");
  btSave.setActionCommand("btSave");
  btClose = new JButton(close);
  btClose.setPreferredSize(new Dimension(40,40));
  btClose.setToolTipText("Close");
  btClose.setActionCommand("btClose");
  btBrowse = new JButton(browse);
  btBrowse.setPreferredSize(new Dimension(40,40));
  btBrowse.setToolTipText("Browse");
  btBrowse.setActionCommand("btBrowse");
  btEdit = new JButton(tool);
  btEdit.setPreferredSize(new Dimension(40,40));
  btEdit.setToolTipText("Edit your image!");
  btEdit.setActionCommand("btEdit");
  btSize = new JButton();
  btSize.setEnabled(false);
  btSave.addMouseListener(new MouseStatic(this,1));
  btEdit.addMouseListener(new MouseStatic(this,2));
  btBrowse.addMouseListener(new MouseStatic(this,3));
  btClose.addMouseListener(new MouseStatic(this,4));
  this.add(btSave);
  this.add(btClose);
  this.add(btBrowse);
  this.add(btEdit);
  this.add(btSize);
  this.requestFocus(true);
  this.requestFocusInWindow(true);
  this.addKeyListener(new KeyListener() {

      @Override
      public void keyTyped(KeyEvent e) {
          //throw new UnsupportedOperationException("Not supported yet.");
      }

      @Override
      public void keyPressed(KeyEvent e) {
          char c = e.getKeyChar();
          if(c==KeyEvent.VK_ESCAPE){
          ScreenCapture.mainFrame.dispose();
          }
      }

      @Override
      public void keyReleased(KeyEvent e) {
          //throw new UnsupportedOperationException("Not supported yet.");
      }
  });
  this.setLayout(null);
    this.setFocusable(true);
    this.requestFocus(true);
    this.requestFocusInWindow(true);
     addMouseListener( this );        // listens for own mouse and
     addMouseMotionListener( this );
   }

  public Image getImage() {
   return image;
  }

 public void paintComponent(Graphics g) {
   super.paintComponent(g);
  if(image != null)
     g.drawImage(image, 0, 0, this);

   if (startPoint.x != endPoint.x || startPoint.y != endPoint.y) {
     x1 = (startPoint.x < endPoint.x) ? startPoint.x : endPoint.x;
     y1 = (startPoint.y < endPoint.y) ? startPoint.y : endPoint.y;
     x2 = (startPoint.x > endPoint.x) ? startPoint.x : endPoint.x;
     y2 = (startPoint.y > endPoint.y) ? startPoint.y : endPoint.y;
     if (Main.MainIconPage.isFirstTime) {
     areaRect = new Rectangle(Main.MainIconPage.d);
     Main.MainIconPage.isFirstTime = false;
    }
     Graphics2D g2 = (Graphics2D) g.create();
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
       RenderingHints.VALUE_ANTIALIAS_ON);
   g2.setStroke(dashed);

    if(x1 ==0 && y1 == 0){
     g2.dispose();
     }
   else{
       g2.setColor(Color.BLACK);
      g2.draw(selectedRectangle);
      g2.setColor(Color.black);
      Area area = new Area();

     area.add(new Area(new Rectangle2D.Float(0, 0, getWidth(), getHeight())));

      g2.setColor(Color.BLACK.brighter());

      int width = getWidth() - 1;
      int height = getHeight() - 1;

      int openWidth = 200;
     int openHeight = 200;

    int x = (width - openWidth) / 2;
    int y = (height - openHeight) / 2;

    area.subtract(new Area(selectedRectangle));

    g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.5f));
    g2.fill(area);
    g2.setColor(Color.WHITE);
    g2.setStroke(new BasicStroke(1.5f));

    g2.setColor(Color.BLACK.darker());
    g2.fillRect(selectedRectangle.x-4, selectedRectangle.y-4, 4, 4);
    g2.fillRect(selectedRectangle.x-4,     (selectedRectangle.y+selectedRectangle.height/2)-4, 4, 4);
    g2.fillRect(selectedRectangle.x-4, selectedRectangle.y+selectedRectangle.height, 4, 4);
    g2.fillRect((selectedRectangle.x+selectedRectangle.width/2)-4, selectedRectangle.y-4, 4, 4);
    g2.fillRect(selectedRectangle.x+selectedRectangle.width, selectedRectangle.y-4, 4, 4);
    g2.fillRect((selectedRectangle.x+selectedRectangle.width/2)-4,   selectedRectangle.y+selectedRectangle.height, 4, 4);
    g2.fillRect(selectedRectangle.x+selectedRectangle.width, selectedRectangle.y+selectedRectangle.height, 4, 4);
    g2.fillRect(selectedRectangle.x+selectedRectangle.width, (selectedRectangle.y+selectedRectangle.height/2)-4, 4, 4);
    g2.dispose();
   }}
   }

   public void setImage(Image image) {
   this.image = image;
   setPreferredSize(new Dimension(image.getWidth(this), image.getHeight(this)));
   revalidate();
   startPoint.x = endPoint.x;
   startPoint.y = endPoint.y;
   repaint();
  }

  @Override
   public void mouseClicked(MouseEvent e) {
    if(!selectedRectangle.contains(e.getPoint())){
    ScreenCapture.mainFrame.dispose();
    }
    if(selectedRectangle.x == selectedRectangle.y){
    ScreenCapture.mainFrame.dispose();
    Main.ScreenCapture.mainFrame=null;
    }
  }

   @Override
   public void mousePressed(MouseEvent e) {

    this.requestFocus(true);
    this.requestFocusInWindow(true);
    if(!dragging && !move){if (image == null) {
            return;
        }
    if(selectedRectangle==null)
        selectedRectangle = new Rectangle();
        startPoint = endPoint = e.getPoint();
        mousePressedX = e.getX();
        mousePressedY = e.getY();
        btSize.setVisible(true);
        repaint();
    }
    else if(move&&!dragging){
                    moveX =selectedRectangle.x- e.getX();
                    moveY = selectedRectangle.y-e.getY();
                    mousePressedPoint = e.getPoint();
                    btSave.setVisible(false);
                    btEdit.setVisible(false);
                    btBrowse.setVisible(false);
                    btClose.setVisible(false);
                    not=true;

   }
    else if(this.getCursor() != Cursor.getDefaultCursor() || component.getCursor()!= Cursor.getDefaultCursor()) {

        dragging = true;

    }
   }

   @Override
    public void mouseReleased(MouseEvent e) {

    if(selectedRectangle.x != selectedRectangle.y){   this.requestFocus(true);
    this.requestFocusInWindow(true);
    dragging = true;
    move=false;
    resetHeight = selectedRectangle.height;
    resetWidth = selectedRectangle.width;
    btSave.setBounds(selectedRectangle.x+selectedRectangle.width+2, selectedRectangle.y+selectedRectangle.height-174, 42, 42);
    btEdit.setBounds(selectedRectangle.x+selectedRectangle.width+2, selectedRectangle.y+selectedRectangle.height-130, 42, 42);
    btBrowse.setBounds(selectedRectangle.x+selectedRectangle.width+2, selectedRectangle.y+selectedRectangle.height-86, 42, 42);
    btClose.setBounds(selectedRectangle.x+selectedRectangle.width+2, selectedRectangle.y+selectedRectangle.height-42, 42, 42);
    btSave.setVisible(true);
    btEdit.setVisible(true);
    btBrowse.setVisible(true);
    btClose.setVisible(true);
    btSize.setVisible(true);
    if(selectedRectangle.y<20){
    btSize.setBounds(moveX+e.getX(),moveY+e.getY(), 80, 20);

    }else{
    btSize.setBounds(selectedRectangle.x,selectedRectangle.y-20, 80, 20);
    }
    if(yes){
        btSave.addActionListener(btAction);
    btClose.addActionListener(btAction);
    btBrowse.addActionListener(btAction);
    btEdit.addActionListener(btAction);
    yes=false;}}
  }

    @Override
    public void mouseDragged(MouseEvent e) {
    endPoint = e.getPoint();
    if(!dragging&&!move){

        if (image == null)
        return;
    int mouseDraggedX = e.getX();
    int mouseDraggedY = e.getY();
    width1 = Math.abs(mouseDraggedX - mousePressedX); 
    height1 = Math.abs(mouseDraggedY - mousePressedY); 

    x3 = Math.min(mouseDraggedX, mousePressedX);
     y3 = Math.min(mouseDraggedY, mousePressedY);

      x1 = (startPoint.x < endPoint.x) ? startPoint.x : endPoint.x;
      y1 = (startPoint.y < endPoint.y) ? startPoint.y : endPoint.y;
      x2 = (startPoint.x > endPoint.x) ? startPoint.x : endPoint.x;
      y2 = (startPoint.y > endPoint.y) ? startPoint.y : endPoint.y;
                        width = (x2-2 - x1) + 1;
                        height = (y2-2 - y1) + 1;
                        if(x1<x2 &&y1<y2 ){ 
              btSize.setBounds(x3, y3-20, 80, 20);
                        }
              selectedRectangle.reshape(x3, y3, width1, height1);      
              btSize.setText(width+"x"+height);
              repaint();
    repaint();}
    else if(move && component.getCursor().equals(Cursor.getDefaultCursor())){
    mouseDraggedPoint = e.getPoint();

    int resetY = Math.abs(mousePressedPoint.y-selectedRectangle.y);
    int resetX = Math.abs(mousePressedPoint.x-selectedRectangle.x);
    int y = mousePressedPoint.y-e.getPoint().y;
    int x = mousePressedPoint.x-e.getPoint().x;

    if(!checkRect() ||selectedRectangle.y<1)
    {
        if(not){
        mousePressedPoint=e.getPoint();
        selectedRectangle.y=selectedRectangle.y+1;

        selectedRectangle.height=resetHeight-y+1;
        not=false;
        }

        resetY = Math.abs(mousePressedPoint.y-selectedRectangle.y);
         if(resetY>e.getPoint().y){
    selectedRectangle.x=moveX+e.getX();
    selectedRectangle.y=selectedRectangle.y;
    selectedRectangle.width=selectedRectangle.width;
    selectedRectangle.height=resetHeight-y;
         }else{
         selectedRectangle.setLocation(moveX+e.getX(),moveY+e.getY());
         }

    }else{
    selectedRectangle.setLocation(moveX+e.getX(),moveY+e.getY());
    }

    if(selectedRectangle.y<20){
    btSize.setBounds(moveX+e.getX(),moveY+e.getY(), 80, 20);
    btSize.setBounds(selectedRectangle.x, 0, 80, 20);
    }
    else{
    btSize.setBounds(moveX+e.getX(),moveY+e.getY()-20, 80, 20);
    btSize.setBounds(selectedRectangle.x, selectedRectangle.y-20, 80, 20);
    }
    btSize.setText(selectedRectangle.width+"x"+selectedRectangle.height);
    repaint();
    }else {
    endPoint = e.getPoint();
        Point p1 = e.getPoint();
        Rectangle r = component.selectedRectangle;
        int type = component.getCursor().getType();
        int dx = p1.x - r.x;
        int dy = p1.y - r.y;
        switch(type) {
            case Cursor.N_RESIZE_CURSOR:
                int height=height1 = Math.abs(r.height - dy);
                selectedRectangle.reshape(r.x, r.y+dy, r.width, height);
                repaint();
                break;
            case Cursor.NW_RESIZE_CURSOR:
                int width =width1 = Math.abs(r.width - dx);
                height=height1 = Math.abs(r.height - dy);
                selectedRectangle.reshape(r.x+dx, r.y+dy, width, height);
                repaint();
                break;
            case Cursor.W_RESIZE_CURSOR:
                width =width1 = Math.abs(r.width - dx);
                selectedRectangle.reshape(r.x+dx, r.y, width, r.height);
                repaint();
                break;
            case Cursor.SW_RESIZE_CURSOR:
                width =width1 = Math.abs(r.width - dx);
                height=height1 = Math.abs(dy);
                selectedRectangle.reshape(r.x+dx, r.y, width, height);
                repaint();
                break;
            case Cursor.S_RESIZE_CURSOR:
                height=height1 = Math.abs(dy);
                selectedRectangle.reshape(r.x, r.y, r.width, height);
                repaint();
                break;
            case Cursor.SE_RESIZE_CURSOR:
                width =width1 = Math.abs(dx);
                height=height1 = Math.abs(dy);
                selectedRectangle.reshape(r.x, r.y, width, height);
                repaint();
                break;
            case Cursor.E_RESIZE_CURSOR:
                width =width1 = Math.abs(dx);
                selectedRectangle.reshape(r.x, r.y, width, r.height);
                repaint();
                break;
            case Cursor.NE_RESIZE_CURSOR:
                width =width1 = Math.abs(dx);
                height=height1 = Math.abs(r.height - dy);
                selectedRectangle.reshape(r.x, r.y+dy, width, height);
                repaint();
                break;
            default:
                System.out.println("unexpected type: " + type);
        }
        btSave.setVisible(false);
        btEdit.setVisible(false);
        btBrowse.setVisible(false);
        btClose.setVisible(false);
        btSize.setText(width1+"x"+height1);
        btSize.setBounds(selectedRectangle.x, selectedRectangle.y-20, 80, 20);
    }
   }

   @Override
   public void mouseMoved(MouseEvent e) {
    Point p = e.getPoint();
    if(!isOverRect(p)) {
        if(component.getCursor() != Cursor.getDefaultCursor()) {

            component.setCursor(Cursor.getDefaultCursor());
            dragging = true;
            move = false;

        }
        return;
    }else{

    dragging = false;
    move = true;

    }
    int outcode = getOutcode(p);
    Rectangle r = component.selectedRectangle;
    switch(outcode) {
        case Rectangle.OUT_TOP:
            if(Math.abs(p.y - r.y) < PROX_DIST) {
                component.setCursor(Cursor.getPredefinedCursor(
                                    Cursor.N_RESIZE_CURSOR));
            }
            break;
        case Rectangle.OUT_TOP + Rectangle.OUT_LEFT:
            if(Math.abs(p.y - r.y) < PROX_DIST &&
               Math.abs(p.x - r.x) < PROX_DIST) {
                component.setCursor(Cursor.getPredefinedCursor(
                                    Cursor.NW_RESIZE_CURSOR));
            }
            break;
        case Rectangle.OUT_LEFT:
            if(Math.abs(p.x - r.x) < PROX_DIST) {
                component.setCursor(Cursor.getPredefinedCursor(
                                    Cursor.W_RESIZE_CURSOR));
            }
            break;
        case Rectangle.OUT_LEFT + Rectangle.OUT_BOTTOM:
            if(Math.abs(p.x - r.x) < PROX_DIST &&
               Math.abs(p.y - (r.y+r.height)) < PROX_DIST) {
                component.setCursor(Cursor.getPredefinedCursor(
                                    Cursor.SW_RESIZE_CURSOR));
            }
            break;
        case Rectangle.OUT_BOTTOM:
            if(Math.abs(p.y - (r.y+r.height)) < PROX_DIST) {
                component.setCursor(Cursor.getPredefinedCursor(
                                    Cursor.S_RESIZE_CURSOR));
            }
            break;
        case Rectangle.OUT_BOTTOM + Rectangle.OUT_RIGHT:
            if(Math.abs(p.x - (r.x+r.width)) < PROX_DIST &&
               Math.abs(p.y - (r.y+r.height)) < PROX_DIST) {
                component.setCursor(Cursor.getPredefinedCursor(
                                    Cursor.SE_RESIZE_CURSOR));
            }
            break;
        case Rectangle.OUT_RIGHT:
            if(Math.abs(p.x - (r.x+r.width)) < PROX_DIST) {
                component.setCursor(Cursor.getPredefinedCursor(
                                    Cursor.E_RESIZE_CURSOR));
            }
            break;
        case Rectangle.OUT_RIGHT + Rectangle.OUT_TOP:
            if(Math.abs(p.x - (r.x+r.width)) < PROX_DIST &&
               Math.abs(p.y - r.y) < PROX_DIST) {
                component.setCursor(Cursor.getPredefinedCursor(
                                    Cursor.NE_RESIZE_CURSOR));
            }
            break;
        default:    // center
            component.setCursor(Cursor.getDefaultCursor());
    }

   }
   private int getOutcode(Point p) {
     Rectangle r = (Rectangle)component.selectedRectangle.clone();
    r.grow(-PROX_DIST, -PROX_DIST);
    return r.outcode(p.x, p.y);        
   }

   private boolean isOverRect(Point p) {
    Rectangle r = (Rectangle)component.selectedRectangle.clone();
    r.grow(PROX_DIST, PROX_DIST);
    return r.contains(p);
   }

   private String mouseDirection(Point mousePressedPoint, Point mouseDraggedPoint) {

    return "";
   }

   private static class buttonActions implements ActionListener {

    public buttonActions() {
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        switch(e.getActionCommand()){
            case "btSave":
                Main.ScreenCapture.save();
                break;
            case "btBrowse":
                Main.ScreenCapture.browse();
                break;
            case "btEdit":
                Main.ScreenCapture.edit();
                break;
            case "btClose":
                Main.ScreenCapture.close();

                break;
        }
    }
   }
   boolean checkRect() {
   if (this.areaRect == null) {
  return false;
   }

    if (this.areaRect.contains(this.selectedRectangle.x-10,    this.selectedRectangle.y-10, this.selectedRectangle.width, this.selectedRectangle.height))    {
  return true;
  }
  int new_x = this.selectedRectangle.x;
  int new_y = this.selectedRectangle.y;

  if ((this.selectedRectangle.x + this.selectedRectangle.width) >   this.areaRect.getWidth()) {
    new_x = (int) this.areaRect.getWidth() - (this.selectedRectangle.width-1);
   }
   if (this.selectedRectangle.x < 1) {
    new_x = -1;
   }
  if ((this.selectedRectangle.y + this.selectedRectangle.height) >    this.areaRect.getHeight()) {
    new_y = (int) this.areaRect.getHeight() - (this.selectedRectangle.height-1);
  }
  if (this.selectedRectangle.y < 1) {
    new_y = -1;
  }
  this.selectedRectangle.setLocation(new_x, new_y);
  return false;
  }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:23:22.580

我认为这是绝对正常的情况。鼠标驱动程序（在操作系统内）在特定频率下工作，它以恒定速度执行一系列测量。因此，如果您移动鼠标的速度比被监控的速度快，您可能会捕捉到您提到的行为。

解决方法：

*   在操作系统设置中增加鼠标指针的灵敏度；
*   在代码中执行插值（在已知点上构建函数，然后为未知点重新计算）。

# c - 在 C 语言中，当我在其他文件中声明不同数据类型的全局变量时，为什么不会出现错误？

> ID：15566453
> 
> 赞同：12
> 
> 时间：2013-03-22T09:07:55.293
> 
> 标签：c, extern

我尝试了以下代码：

文件1.c：

```
int x; 
```

文件2.c：

```
extern char x;
main()
{
    x=10;
    ....
    ....
} 
```

并编译为

$gcc 文件 1.c 文件 2.c

我没有收到任何错误，但我期待一个。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-22T09:11:33.890

在`File.c`中，您向编译器承诺`x`类型为`char`. 由于每个翻译单元都是单独编译的，编译器无法验证这一点，并相信你的话。并且链接器不做任何类型检查。您最终会得到一个构建时没有错误的无效程序。

这就是为什么你应该使用头文件。如果`File1.c`和`File2.c`都从同一个头文件中得到`extern`声明`x`，那么编译时会出错`File1.c`（因为定义与声明不匹配）。[帽子提示@SteveJessop]

# resources - 第三方服务有哪些好的资源监控框架或技术？

> ID：15566462
> 
> 赞同：1
> 
> 时间：2013-03-22T09:08:45.753
> 
> 标签：resources, monitoring

在我们的软件中，我们使用了许多第三方应用程序、服务和数据库。我们无法控制这些应用程序，但希望对这些服务进行我们自己的健康检查，并在出现任何问题时收到通知（电子邮件、墙板）。请注意，这些服务大多在我们的内部网络中，不公开可见。

*   任意情况是发送 SOAP 请求，获取响应并分析 XML 输出，寻找“成功”一词。

*   另一种情况是发送请求，期望 302 并查看重定向位置。

*   还有一种情况是简单地 ping 主机名。

在所有这些情况下，如果发生异常情况，可能会发送一封警报电子邮件。还可以在大型电视监视器上显示这些状态检查的网络视图。

你有什么样的安排来监控你的依赖关系？

我们的一个想法是编写单个网页来进行实际检查并返回 200 或 500 的状态代码。然后我们需要某种工具来查询我们编写的这些页面并提醒我们它是否500 被退回。

# selenium - Yii 功能测试的正确路由

> ID：15566465
> 
> 赞同：3
> 
> 时间：2013-03-22T09:08:50.327
> 
> 标签：selenium, yii

我尝试使用 Selenium 为我的 Yii 应用程序运行测试。一个简单的测试，我打开入口页面并检查文本是否有效。

让我们看下面的测试片段：

```
class ItemTest extends WebTestCase
{
    public function testCreateItem()
    {
        $this->open('admin/item');
        $this->click("link=create item...");
              ...
    }
} 
```

“admin”是我的应用程序中的一个模块。第一个函数 open() 正在工作。调用带有 index-test.php 的正确 url。

但是第二个函数 click() 以某种方式被路由到主 index.php 而不是 index-test.php。我想这与我的 url 管理器配置有关？

```
'urlManager'=>array(
    'urlFormat'=>'path',
'rules'=>array(
    ''=>'site/index',
    '<controller:\w+>/<id:\d+>'=>'<controller>/view',
    '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
    '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
    '<module:\w+>/<controller:\w+>/<action:\w+>/<id:\d+>'=>'<module>/<controller>/<action>',
    '<module:\w+>/<controller:\w+>/<action:\w+>'=>'<module>/<controller>/<action>',
),
'showScriptName'=>false,
), 
```

如果你能给我一些建议，我会很高兴如何最好地处理这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:50:16.283

在您的 config/test.php 中，您必须告诉它显示脚本文件名（index-test.php）：

```
return CMap::mergeArray(
    require(dirname(__FILE__).'/main.php'),
    array(
        'components'=>array(
            'fixture'=>array(
                'class'=>'system.test.CDbFixtureManager',
            ),
            /* uncomment the following to provide test database connection
            'db'=>array(
                'connectionString'=>'mysql:host=localhost;dbname=db-test',
            ),
            */
            'urlManager' => array(
                'showScriptName' => true,
            ),
        ),
    )
); 
```

# c# - 在实体框架 5 返回的 POCO 中激活 INotifyPropertyChanged 的 推荐做法

> ID：15566469
> 
> 赞同：3
> 
> 时间：2013-03-22T09:08:55.323
> 
> 标签：c#, entity-framework, entity-framework-5

我有一些从实现 INotifyPropertyChanged 的​​通用业务基类继承的 POCO。我也在 DAL 使用 EF5。如果我要获取单个竞争对手对象，如下所示：

```
public ICompetitorCard Fetch(long id)
        {
            return this.Fetch<ContactCardContext, ICompetitorCard>(
               () => { return ContactCardContext.GetInstance(this); },
               ctx =>
               {
                   var query = from competitor in ctx.Competitors
                               where competitor.Id == id
                               select competitor;

                   return query.SingleOrDefault();
               }, "ICompetitorCard Fetch(long id) failed");
        } 
```

我取回了被 EF5 很好地填充的 CompetitorCard 对象。问题是我不希望从 DAL 加载时触发通知。所以通常我可能会设置某种字段来跟踪对象是否已初始化。这很容易“正常”实现，但由于在这种情况下 EF 正在加载，我想知道我需要挂钩什么事件/虚拟方法才能设置

```
IsInitialised = true; 
```

这样之后财产通知就会触发。我想我可以做类似的事情：

```
ICompetitorCard card = query.SingleOrDefault();
if (card!=null){card.IsInitialised = true;}
return card; 
```

但这似乎过于冗长，破坏了封装并且对集合等来说是一种痛苦。因此，对于那些处理自己的 INotifyPropertyChanged 实现的人来说，他们如何使用 EF5 来管理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:38:52.677

您通过订阅对象内的事件来“激活” `INotifyPropertyChanged`，而这在对象被实例化之前无法完成。

在您的对象中，除非有订阅者，否则您不会引发更改事件。

有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms229614.aspx)。

* * *

更新：

您可以订阅 的`ObjectMaterialized`事件`ObjectContext`以将您的对象标记为已加载。像这样的东西：

```
((IObjectContextAdapter)this).ObjectContext.ObjectMaterialized += 
this.ObjectContext_OnObjectMaterialized; 
```

实现你的功能

```
ObjectContext_OnObjectMaterialized(object sender, ObjectMaterializedEventArgs e). 
```

`EventArgs`会给你你刚刚实现的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:13:59.143

通常，您用于实体框架的 poco 类型不会实现 INotifyPropertyChanged，您会将所需属性的值映射到新类型，然后绑定到视图（它确实实现 INotifyPropertyChanged）...取决于您的架构要么是业务对象，要么甚至是视图模型。

这在许多情况下都很有用，尤其是当您的数据库很少能完美地代表您的 UI 时。

# sql-server - asp.net mvc4中的表格值作为gridview标题

> ID：15566472
> 
> 赞同：1
> 
> 时间：2013-03-22T09:09:06.180
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-4

我想在我的 MVC4 应用程序中将列的值显示为 gridview 标题。表看起来像

Col1 Col2 Col3 Col4 A 1 5 B 2 4
A 3
A 6

我希望这张表在网格视图中如下所示

```
1   2   3   4   5   6 
```

AYYYY BYY

任何人都可以帮我提出任何想法。

感谢和问候迪维亚

# java - 如何在 java 的 ssl 会话中获取主密钥？

> ID：15566480
> 
> 赞同：2
> 
> 时间：2013-03-22T09:09:19.380
> 
> 标签：java, jsse

我的应用程序中有一个 sslscoket 作为服务器，我正在运行 java 1.6。我需要握手期间使用的主密钥来实现 MS-CHAP 质询响应等。我已经读过“这个主密钥的值只有底层安全套接字实现才知道，并且不会通过 SSLSession API 公开”

如何获取主密钥的值？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-17T09:29:10.290

```
Enumeration<byte[]> e = sslContext.sessionContext().getIds();
    while ( e.hasMoreElements() ) {
        byte[] b = e.nextElement();
        System.out.println("session id: " + DatatypeConverter.printHexBinary(b).toLowerCase());
        SSLSession session = sslContext.sessionContext().getSession(b);
        Class<?> c = Class.forName("sun.security.ssl.SSLSessionImpl");
        Field masterSecretField = c.getDeclaredField("masterSecret");
        masterSecretField.setAccessible(true);
        SecretKey k = (SecretKey)masterSecretField.get(session);
        System.out.println("secret: " + DatatypeConverter.printHexBinary(k.getEncoded()).toLowerCase());

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T13:48:53.047

过了一会儿，我设法获得了 TLS hanshake 中使用的主密钥。可以使用反射和 SSLSessionImpl.class 来获得它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T09:12:56.733

它不能通过 API 获得。正如你的报价所说。

注意主密钥不是密钥。

# mysql - 在Mysql中更新表的属性时触发

> ID：15566482
> 
> 赞同：3
> 
> 时间：2013-03-22T09:09:37.240
> 
> 标签：mysql, sql, database, database-design

有一个名为“Coach”的 MySQL 表，它具有以下属性。

```
coach_ID int
mileage_of_last_service_date double
mileage double
isAvailable boolean 
```

对于所有行，isAvailable 最初设置为 1。我想设置一个执行以下操作的触发器。当里程属性发生更新并且里程大于 100000 时，触发器必须为同一张表的该特定属性设置属性，如下所示。

```
isAvailable = 0
mileage_of_last_service_date = mileage_of_last_service_date + mileage
mileage = 0 
```

这是我写的查询。

```
create trigger set_availability_coach after update on coach 
for each row
when old.mileage > 10000 
begin 
update coach
set isAvailable = 0, mileage_of_last_service_date = mileage_of_last_service_date + old.mileage, mileage = 0
where coach.coach_ID = old.coach_ID;
end; 
```

当我运行它时，我在第 3 行得到一个语法错误。有解决办法吗？或者任何其他方式来实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:59:10.553

这个我改过了，应该没问题

```
CREATE TRIGGER set_availability_coach BEFORE UPDATE ON coach 
FOR EACH ROW BEGIN
  IF OLD.mileage > 10000 THEN
    SET NEW.isAvailable = 0,
        NEW.mileage_of_last_service_date = OLD.mileage_of_last_service_date + NEW.mileage,
        NEW.mileage = 0;
  END IF;
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:07:43.433

您`OLD`只能在`BEFORE`-trigger 处访问，[请参阅 MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)。而且您不需要`UPDATE ... SET ...`查询，您可以创建`BEFORE UPDATE`触发器并`NEW`就地修改字段。

# c# - 打开 Windows 资源管理器到组合 GUID 文件夹

> ID：15566485
> 
> 赞同：3
> 
> 时间：2013-03-22T09:09:43.753
> 
> 标签：c#, .net, windows

例如，我想打开“字体设置”页面。（它在控制面板的“字体”下。）

我得到它的 GUID 如下：

```
::{26EE0668-A00A-44D7-9371-BEB064C98683}\1\Fonts\::{93412589-74D4-4E4E-AD0E-E0CB621440FD} 
```

[我使用接口`URL`的`NavigateComplete2`事件得到它`InternetExplorer`。]

我尝试了许多不同的组合，例如：

```
Process.Start("explorer", @"::{26EE0668-A00A-44D7-9371-BEB064C98683}\1\Fonts\::{93412589-74D4-4E4E-AD0E-E0CB621440FD}"); 
```

和：

```
Process.Start("::{26EE0668-A00A-44D7-9371-BEB064C98683}", @"\1\Fonts\::{93412589-74D4-4E4E-AD0E-E0CB621440FD}"); 
```

但没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-17T22:18:27.160

痛苦的迟到的答案，但您的问题是/是您使用的 url 由于某种原因不被 shell url 处理程序接受。

要启动您想要的文件夹，您可以使用：`shell:::{26EE0668-A00A-44D7-9371-BEB064C98683}\1\::{93412589-74D4-4E4E-AD0E-E0CB621440FD}`. 如果您真的希望字体文件夹成为父文件夹，请尝试`shell:Fonts\::{93412589-74D4-4E4E-AD0E-E0CB621440FD}`. 它为您提供了看起来很荒谬的路径“C:\Windows\Fonts\Font settings”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:20:20.307

You need to use the [Environment.SpecialFolder Enumeration](http://msdn.microsoft.com/en-gb/library/system.environment.specialfolder.aspx):

```
System.Diagnostics.Process.Start(
    Environment.GetFolderPath(Environment.SpecialFolder.Fonts))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:02:35.967

您是否尝试指定**Shell**属性

```
System.Diagnostics.Process.Start("explorer", @"shell:::{93412589-74D4-4E4E-AD0E-E0CB621440FD}"); 
```

[资源](http://www.sevenforums.com/tutorials/110919-clsid-key-list-windows-7-a.html)

# php - 在“读取初始通信数据包”时失去与 MySQL 服务器的连接

> ID：15566486
> 
> 赞同：1
> 
> 时间：2013-03-22T09:09:44.647
> 
> 标签：php, mysql

警告：mysql_connect() [function.mysql-connect]：在“读取初始通信数据包”时丢失与 MySQL 服务器的连接，系统错误：第 7 行 C:\AppServ\www\phpdemo\newssave.php 中的 0

```
<?php 
    include"setup.php";

    $anonym=$_Post["anonym"];
    $sub=$_Post["sub"];
    $content=$_Post["content"];

    $sql= "insert into $newstable values('id','$anonym','$sub','$content');";
    $connect= mysql_connect($DB_SERVER,$DB_USER,$DB_PASS)or die("CONNECT WORNG");
    $db=mysql_select_db($DB_Name,$connect)or die("WORNG");
    $query= mysql_query($sql,$connect)or die("CONNECT WORNG");

    if(!$query) {
        print "POST ERROR";
    }
    else {
      print "post *** ok!";
    }
?> 
```

# php - 检查 mySQL 中现有条目的最佳方法是什么？（简单的表结构，大量的数据）

> ID：15566493
> 
> 赞同：1
> 
> 时间：2013-03-22T09:10:04.387
> 
> 标签：php, mysql

我有一张包含大量数据的表格——它只是一列一百万个电话号码。

我正在编写一个 PHP 脚本，它将接收一个上传的数字文件，我想针对数据库运行每个数字以查看该数字是否已经存在。如果它确实存在，我只需要一个真正的返回而不需要其他数据。

我有两个主要问题：

1.  出于性能/速度考虑，如果
    *   该列分为两列（A 列带有区号，B 列带有剩余数字）。这样我可以使用 WHERE 运行查询来查找给定号码的匹配区号，然后匹配剩余的 7 位数字？
    *   或者这与匹配整个 10 位数字没有区别吗？
2.  [测试 MySQL 表中是否存在行的最佳方法](https://stackoverflow.com/questions/1676551/best-way-to-test-if-a-row-exists-in-a-mysql-table)这个问题的答案是：

    ```
    SELECT EXISTS(SELECT 1 FROM table1 WHERE ...) 
    ```

    如果我没记错的话，如果您要搜索的内容存在，那只会返回值“1”，对吗？由于我将在 PHP 中接收结果，这是最有效的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:29:16.470

如果数字很小（并且总是很小），那么只使用 IN 就可以了。

如果数字可能很大，那么我会将它们加载到临时表中并在该临时表和现有表之间进行 JOIN。使用内连接只会返回匹配的记录，并且很容易只返回数字和 true。

如果您要处理数千个数字，那么：-

创建一个临时表（可能使用数字作为唯一键）。用数字加载临时表。根据现有表加入临时表：-

```
SELECT a.phoneNumber
FROM ExistingNumbers a
INNER JOIN SomeTempTable b
ON a.phoneNumber = b.phoneNumber 
```

这将为您提供表中已存在的所有数字的列表。

如果您希望列出表上尚不存在的所有数字的列表（如果您想在进一步处理后添加它们）：-

```
SELECT b.phoneNumber
FROM SomeTempTable b
LEFT OUTER JOIN ExistingNumbers a
ON a.phoneNumber = b.phoneNumber
WHERE a.phoneNumber IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T09:18:11.673

出于性能原因，我会在一个查询中选择所有数字。

```
SELECT `numbers` FROM `phone_numbers` WHERE `number` IN('123', '456', '789') 
```

然后您可以遍历结果并检查其中是否包含数字。如果不包含数字，则将其附加到您的插入查询中。所以你只有两个查询。一个用于选择，一个用于插入。

对于你的表现问题。您应该在存储电话号码的字段上有一个索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T19:09:01.713

只是想再添加一件事，如果 IN 子句包含大条目，则索引将不起作用。在没有几个条目之后，整个表将以正常方式扫描，忽略“数字”上的索引。

出于上述原因，我更喜欢使用临时表和内部联接的@Kickstart 解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:40:51.683

This is usually how I check if a searched data is stored in the table

```
<?php
function checkifexist($value){
$link = mysql_connect("localhost", "root", "password");
mysql_select_db("database", $link);    

$result = mysql_query("SELECT column FROM table where column='".$value."' ", $link);
$num_rows = mysql_num_rows($result);

if($num_rows > 0)
{
return true;
}
else
{
return false;
}
}
?> 
```

and then this

```
<?php 
$input = 'test';
if(checkifexist($input))
{
// the script returned true, now do something
}
?> 
```

all it does is count the number of results and made a conditional statement

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T09:22:44.313

我会这样做

```
SELECT COUNT(1) FROM table WHERE condition LIMIT 1 
```

# php - 用php上传视频

> ID：15566498
> 
> 赞同：2
> 
> 时间：2013-03-22T09:10:12.357
> 
> 标签：php, mysql

我正在尝试在 php 中上传视频的演示，但出现错误

> 注意：未定义索引：C:\wamp\www\upp\upload_file.php 中第 3 行调用堆栈中的文件

文件如下：

abcd.html

```
<html>
<body>

<form action="upload_file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file"><br>
<input type="submit" name="submit" value="Submit">
</form>

</body>
</html> 
```

上传文件.php

```
<?php
$allowedExts = array("wmv","avi","mpeg","mpg");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "video/avi")|| ($_FILES["file"]["type"] == "video/mpeg")
|| ($_FILES["file"]["type"] == "video/wmv")
|| ($_FILES["file"]["type"] == "video/mpg"))
&& ($_FILES["file"]["size"] < 200000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?>

enter code here 
```

当我尝试上传图片时，它可以工作，但上传视频时，我在 php 代码中更改了文件类型，因此出现上述错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:24:11.053

如果您在 $_FILE 中获得“未定义索引”，则 PHP、Apache 或安全工具（例如 suhosin、apparmor）按可能性顺序阻止了上传。后两者主要在您将代码放在 linux 生产服务器上时应用，因此我们将重点关注第一个。

在同一目录中创建一个文件并将此代码放入其中：

```
<?php phpinfo(); 
```

然后查找这些设置：

```
upload_max_filesize
post_max_size 
```

如果它们比您的视频小，则您需要更改第一个设置。

使用 windows 搜索在 wamp 目录中找到 php.ini，然后将这些行更改为以下内容：

```
upload_max_filesize = 100M
post_max_size = 100M 
```

然后停止并启动 Apache 并检查 phpinfo 值是否增加。如果他们这样做了，您的上传应该可以工作。

如果值改变了，但上传仍然不起作用，搜索 httpd.conf 并找到 LimitRequestBody 的值，增加它，然后重新启动 Apache。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:26:33.140

您遇到的错误是因为 php 代码正在运行，即使表单未提交也是如此。因此，由于您尚未上传任何文件，因此在开始时不会填充任何数组。事实上这是一个警告而不是错误

检查表单是否已提交 .. 使用 isset($_POST['submit'])

其次，我建议您优化代码..如果您检查文件类型，则无需检查扩展名..

我已经修改了你的代码..试试看

```
 <?php
            $is_form_submitted =  (isset($_POST['submit']))?true:false;

        if($is_form_submitted)
        {

            $allowedTypes   = array("video/wmv","video/avi","video/mpeg","video/mpg",'video/mp4');
            $is_valid_type  = (in_array($_FILES['file']['type'], $allowedTypes))?true:false;
           if ( $is_valid_type&& ($_FILES["file"]["size"] < 2000000))
          {
            if ($_FILES["file"]["error"] > 0)
            {
            echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
            }
            else
            {
            echo "Upload: " . $_FILES["file"]["name"] . "<br>";
            echo "Type: " . $_FILES["file"]["type"] . "<br>";
            echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
            echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

            if (file_exists("upload/" . $_FILES["file"]["name"]))
              {
              echo $_FILES["file"]["name"] . " already exists. ";
              }
            else
              {
              move_uploaded_file($_FILES["file"]["tmp_name"],
              "upload/" . $_FILES["file"]["name"]);
              echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
              }
            }
          }
        else
        {
          echo "Invalid file";
         }

        }
                ?> 
```

建议

在任何上传之前检查以下 php_ini 设置

```
file_uploads
upload_max_filesize
max_input_time
memory_limit
max_execution_time
post_max_size 
```

参考：[http ://www.radinks.com/upload/config.php](http://www.radinks.com/upload/config.php)

# charts - 如何处理 fusionchart 饼线？

> ID：15566502
> 
> 赞同：1
> 
> 时间：2013-03-22T09:10:23.027
> 
> 标签：charts, fusioncharts, pie-chart

![融合图 pie2D][1]

你好，伙计们，
我想知道如何处理饼线。
馅饼中有一些数据。
我希望他们进入圈子。
但我不知道该怎么做。
我已经搜索了 fusioncharts 的文档，但找不到任何解决方案。请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-07T05:26:40.720

饼图中的饼线或颜色代表不同类型的数据及其值。

在使用[**Fusioncharts**](http://www.fusioncharts.com/charts/pie-doughnut-charts/)时，您可以使用很多事件以及饼图的功能，但是这些值只能在图表附近看到，而不是在饼图内部。但是 Fusioncharts 的一些功能仍然[**是**](http://www.fusioncharts.com/charts/pie-doughnut-charts/)：

*   图表可以根据需要旋转。
*   提供 2D 和 3D 格式。
*   交互式旋转能力。

# javascript - 使用 WCF 从数据库中获取图像

> ID：15566507
> 
> 赞同：2
> 
> 时间：2013-03-22T09:10:51.923
> 
> 标签：javascript, ajax, database, wcf, mobile

我有一个移动应用程序，它需要从数据库中获取图像并显示它......我在与 DB 通信的服务器上有一个 WCF 服务。

是否可以**使用 WCF 从数据库中检索图像**？

如果是，

如何从我的 HTML/Javascript 页面使用 ajax 调用来获取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:48:46.530

我建议阅读这篇文章： [http ://www.c-sharpcorner.com/uploadfile/dhananjaycoder/fetching-image-using-wcf-rest-service/](http://www.c-sharpcorner.com/uploadfile/dhananjaycoder/fetching-image-using-wcf-rest-service/)

从那篇文章中，而不是从磁盘加载图像......

```
 FileStream fs = File.OpenRead(@"D:\a.jpg");
```

...您想从数据库中加载图像。REST 风格应该很适合您的 AJAX 需求。

# android - MapView 在双击缩放期间与 ListView 重叠

> ID：15566509
> 
> 赞同：2
> 
> 时间：2013-03-22T09:10:53.093
> 
> 标签：android, osmdroid

我对 osmdroid MapView 有问题，它在双击缩放期间与 ListView 重叠（以及当我点击内置缩放控件的加号时）。

在这里你可以看到发生了什么：

![地图视图问题](../Images/ecdd6a9f448328785ac4cc965ed5c4ad.png)

`android:layout_weight="1"`我用and添加到 LinearLayout MapView 和 ListView 中`android:layout_height="fill_parent"`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <org.osmdroid.views.MapView
            android:id="@+id/map_view"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1" />

    <ListView
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:id="@+id/list_view"
            android:layout_weight="1" />

</LinearLayout> 
```

如何解决我的问题？

# javascript - 与 Closure Compiler 一起使用的 JavaScript 类的实现

> ID：15566510
> 
> 赞同：2
> 
> 时间：2013-03-22T09:10:58.187
> 
> 标签：javascript, oop, class, google-closure-compiler

是否有任何适用于 Closure Compiler 的类类继承的 JavaScript 实现`ADVANCED_OPTIMIZATIONS`？

看起来[John Resig 的实现](http://ejohn.org/blog/simple-javascript-inheritance/)没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:18:01.670

这是设置继承的最简单且非常常见的方法之一：

```
function Parent() {}

function Child() {}

Child.prototype = Object.create(Parent.prototype);
Child.prototype.constructor = Child; 
```

它适用于闭包编译器。我不确定是否`Object.create`正确识别，但看看[`goog.inherits`](http://docs.closure-library.googlecode.com/git/closure_goog_base.js.html)闭包库的实现，它基本上是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:45:06.763

编译器目前仅识别“goog.inherits”并直接分配给原型：

```
Child.prototype = new Parent(); 
```

Object.create 隐喻是一个明显的补充，但还没有完成。要让其他任何东西被识别，要么需要定义新的编码约定类（这是在类型检查期间识别 goog.inherits 的方式），要么需要更改编译器（Object.create 可能需要）。

如果需要对 Object.create 的支持，您需要在此处提交问题：

[https://code.google.com/p/closure-compiler/issues/list](https://code.google.com/p/closure-compiler/issues/list)

# c++ - 动态规划 - 活动选择

> ID：15566511
> 
> 赞同：1
> 
> 时间：2013-03-22T09:11:02.543
> 
> 标签：c++

我是 C++ 新手。有人可以将此算法转换为 C++ 代码吗？我无法完全理解它，谢谢。

我能够使用表格矩阵在纸上解决问题，并且我了解其分而治之的策略，但是在将 s 和 f 数组都传递给 DP 函数后难以实现该算法。

```
for  i =1  to  n
do   m[i] = max(m[i-1], 1+ m [BINARY-SEARCH(f, s[i])])
             We have P(i] = 1 if activity i is in optimal selection, and P[i] = 0
             otherwise
             i = n
            while   i > 0
                 do if m[i] = m[i-1]
                         then P[i] = 0
                                    i = i - 1
                         else
                                   i = BINARY-SEARCH (f, s[i])
                                  P[i] = 1 
```

到目前为止，我已经能够用贪心算法做到这一点，

```
void MaxActGreedy(int s[], int f[], int n)
{
cout<<"\n Entering Greedy Programming Function \n";
clock_t startTime = clock();

cout<<" Greedy Solution (Index no. ) :";
int i;
int j;

i=0;
cout<<i;

for(j=1; j<n; j++)
{
    if (s[j]>=f[i])
    {
        cout<<j;
    i=j;
    }
}

clock_t endTime= clock();

endTime = endTime - startTime;
float timeinSeconds = endTime /  (float) CLOCKS_PER_SEC;

cout<<"\n Greedy Time: ";
cout<<timeinSeconds;
cout<<" Seconds";

}

 void Dynamic(int s[],int f[],int n)
{
int m[]={0};

for(int i=0; i<n; i++)
{

}
}

int main()
{
int s[]={1,3,0,5,3,5,6,8,8,2,12};//Start Time Si
int f[]={4,5,6,7,8,9,10,11,12,13,14};//Finish Times fi (sorted)

int n = sizeof(s)/sizeof(s[0]);

MaxActGreedy(s,f,n);
// MaxActDP(s,f,n);
Dynamic(s,f,n);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:31:11.870

我没有实现你的伪代码，我只是向你展示它是如何在 C++ 中实现的。一种可能性是：

```
// ...
// Declarations, prototypes, header file inclusions, ...
// ...
for (int i=1; i<=n; i++)
{
    m[i] = max(m[i-1], 1+ binarySearch(f, s[i]));

    if (activity_is_in_optimal_selection(i))
        P[i] = 1;
    else
        P[i] = 0;

    i = n;

    while (i>0)
    {
        if (m[i]==m[i-1])
        {
            P[i] = 0;
            i--;
        }
        else
        {
            i = binarySearch(f, s[i]);
            P[i] = 1;
        }
    }
} 
```

我不确定我是否理解您的算法，但请打开您的 IDE 并开始编写程序。

# iphone - 如何检查文本字段中是否有文本并单击按钮

> ID：15566515
> 
> 赞同：0
> 
> 时间：2013-03-22T09:11:13.280
> 
> 标签：iphone, objective-c, ipad, uitextfield

我有我想要的应用程序，如果其中没有任何数据`textfield`并且尚未单击按钮，则它会显示警报视图。否则，它调用一个方法。我有`BOOL isClicked`并且我已经设置了`YES`单击按钮的时间，但是如何检查这个和`textfield`.

```
BOOL isClicked;
feedbackTextfield; 
if(isClicked && feedbackTexfield) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:18:35.900

试试这个代码......

```
 if((!isCliked) && ([feedbackTexfield.text length] == 0))
    {
        //button may not clicked or feedbackTextfield not contains text block.

        //Display your alert stuff

         UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Button is not clicked" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
              [alertView show];  
    }
    else
    {
        //button may clicked or feedbackTextfield contains text block.
    } 
```

这是解决你的问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:17:04.967

```
if(yourTextField.text.length == 0 && isClicked == FALSE)
{
   // Here goes Alert
}
else
{
  // Write your stuff
} 
```

# websphere-7 - WebSphere Portal Server V8.0.0.5 上的 RMI 上下文查找失败

> ID：15566517
> 
> 赞同：0
> 
> 时间：2013-03-22T09:11:17.660
> 
> 标签：websphere-7, websphere-portal, websphere-8

我无法在 WebSphere Application server 8.0.0.5 上定位 EJB 3.0 业务接口。当我在配置文件目录上运行 dumpNamespace 时，我会在与 com.ibm.websphere.naming.WsnInitialContextFactory 使用的上下文不同的上下文中注册类。似乎当我运行以下代码时，它会在 Context: DeveloperCell/nodes/DeveloperNode/servers/WebSphere_Portal 上查找接口，而 dumpNameSpace 将接口定位在 (top)/nodes/DeveloperNode/servers/WebSphere_Portal/ejb/testEAR/{ myejb.jar/全限定接口名}

**[注意{}中的内容是真实jar和界面的占位符]**

哈希表环境 = 新哈希表（）；

```
 env.put(Context.INITIAL_CONTEXT_FACTORY, "com.ibm.websphere.naming.WsnInitialContextFactory");
        env.put(Context.PROVIDER_URL, "iiop://localhost:10035");
        Context ctx = new InitialContext(env);

        Object obj = ctx.lookup(ProvinceServiceLocal.class.getName());
        ProvinceServiceLocal provinceService = (ProvinceServiceLocal) PortableRemoteObject.narrow(obj, ProvinceServiceLocal.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T19:43:04.123

本地接口只能在同一个 JVM 中访问。无法执行本地接口的远程查找。

# javascript - javascript和柯里化

> ID：15566519
> 
> 赞同：2
> 
> 时间：2013-03-22T09:11:23.450
> 
> 标签：javascript, closures, anonymous-function, currying, partial-application

我正在阅读 John Resig 的 Javascript ninja 的秘密，并尝试了其中一个关于 currying 和 parital 函数的示例。代码如下：

```
<html>
<body>
<button id="test">Click Me!</button>
</body>

<script type="text/javascript">
    Function.prototype.curry = function() {
        var fn = this,
        args = Array.prototype.slice.call(arguments);

       return function() {
           return fn.apply(this, args.concat(
               Array.prototype.slice.call(arguments)));
           }; 
       };

    var elem = document.getElementById("test"); 
    var bindClick = elem.addEventListener.curry("click");
    bindClick(function(){   console.log("OK"); });
</script>
</html> 
```

但是，以下代码似乎会生成错误 Uncaught TypeError: Illegal invocation on apply 函数。

我似乎无法弄清楚原因，因为这一切似乎都是有道理的。 将返回一个匿名函数，该函数使用函数上下文 ( )`bindClick`调用该函数，并且参数将是`elem.addEventListener``window``this``["click", function() {console.log("OK"); }]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:20:08.067

问题是您丢失了元素的上下文。该`addEventListener`方法必须在元素上调用，但您是在函数上调用它：

```
// Here, `this` refers to a function, not an element
return fn.apply(this, args.concat(Array.prototype.slice.call(arguments))); 
```

您需要将元素传递给您的新函数。例如：

```
Function.prototype.curry = function () {
    var fn = this,
    args = Array.prototype.slice.call(arguments);

     return function (context) {
         return fn.apply(
             context,
             args.concat(Array.prototype.slice.call(arguments, 1))
         );
     }; 
}; 
```

这是一个[工作示例](http://jsfiddle.net/dbA4A/)。请注意向返回的函数添加了一个`context`参数，还请注意向`slice`调用添加了第二个参数 - 这是删除新`context`参数并仅应用任何后续参数所必需的。

# paypal - Android 库无法在沙盒中初始化

> ID：15566522
> 
> 赞同：1
> 
> 时间：2013-03-22T09:11:30.797
> 
> 标签：paypal, paypal-sandbox

方法

```
PayPal.initWithAppID(this, appID, server); 
```

在沙盒中失败。昨天相同的代码运行良好。

# c# - 使 xslt 2.0 文档成为 xslt 1.0 文档

> ID：15566524
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:11:33.157
> 
> 标签：c#, .net, xslt, xslt-1.0, xslt-2.0

我从谷歌搜索设备获得 xslt 2.0 形成的响应并使用 .net 3.5 我想将这些更改为 xslt 1.0 文档。原因是使用更新的 xslt 文档时 XSLCompileTransform 崩溃。

我会改变哪些属性来实现这一点？

由于所有者是政府，因此无法发布代码。//编辑：为什么人们会忽略这个问题？至少发表评论。我真的不能留下更多信息，并得到了我正在寻找的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:05:05.763

有一些 XSLT 2.0 处理器应该与 .NET 3.5 一起使用，例如[Saxon 9](http://saxon.sourceforge.net/#F9.4HE)的 .NET 版本、[AltovaXML](http://www.altova.com/altovaxml.html)（仅通过 COM 互操作）和[XmlPrime](http://www.xmlprime.com/xmlprime/index.htm)。使用其中之一，您应该能够使用 .NET 3.5 运行 XSLT 2.0 样式表。

如果您想更改 XSLT 2.0 代码以使用 XslCompiledTransform 等 XSLT 1.0 处理器运行，那么我同意评论中提出的建议，您需要检查代码或将其展示给我们以允许我们检查 XSLT 2.0只有功能。文章[http://blogs.msdn.com/b/xmlteam/archive/2011/10/09/xslt-1-0-biggest-issues-kind-of-solved.aspx](http://blogs.msdn.com/b/xmlteam/archive/2011/10/09/xslt-1-0-biggest-issues-kind-of-solved.aspx)可以提供帮助。

唯一简单而快速的更改是分别更改`version="2.0"`属性，但如果 XSLT 1.0 处理器使用 XSLT 2.0 功能（如.`xsl:stylesheet``xsl:transform``version="1.0"``for-each-group`

# actionscript-3 - as3 错误：提供的 DisplayObject 必须是调用者的子对象

> ID：15566526
> 
> 赞同：1
> 
> 时间：2013-03-22T09:11:34.683
> 
> 标签：actionscript-3, actionscript

我正在制作一个足够简单的照片库，但是当我尝试对照片进行分类时，当我按下按钮时，我不断收到此错误。分类按钮会删除拇指，但不会对其进行分类。

```
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
    at flash.display::DisplayObjectContainer/removeChild()
    at myGallery_fla::MainTimeline/removeAllMovieClips()
    at myGallery_fla::MainTimeline/loadConcert() 
```

我正在拔头发试图修复它，但我无法得到它。任何帮助将非常感激 ：）

这是我的代码很长：

```
//declaring my permanant variables.
var columns:Number;
var my_x:Number;
var my_y:Number;
var my_thumb_width:Number;
var my_thumb_height:Number;
var my_images:XMLList;
var my_total:Number;

var currentCategory:String = "concert";

//new movie clip to hold images.
var container_mc:MovieClip;
//new movie clip to do progress bar.
var preloaders_mc:MovieClip;
//to give full image a hand cursor. button mode does not work on loaders so i must create a new mc.
var full_mc:MovieClip;

var x_counter:Number = 0;
var y_counter:Number = 0;

//array to hold tweens.
var my_tweens:Array = [];
//array for categorizing
var movieClipArray:Array=new Array();

//permenant vars for tweens.
var container_mc_tween:Tween;
var full_tween:Tween;

var myNewXML:XMLList;
var myXML:XML;
//creater new urlLoader to load xml
var myXMLLoader:URLLoader = new URLLoader();
myXMLLoader.load(new URLRequest("gallery.xml"));
myXMLLoader.addEventListener(Event.COMPLETE, processXML);

function processXML(e:Event):void{
    //temperary will be deleted when executed.
     myXML= new XML(e.target.data);
    processXMLData();
}

function processXMLData()
{
myNewXML = myXML.GALLERY.(CATEGORY == currentCategory);
//trace(myNewXML);
    //set the values of the images 
    //@ retrives the attributes I need
    columns = myXML.@COLUMNS;
    my_x = myXML.@XPOSITION;
    my_y = myXML.@YPOSITION;
    my_thumb_width = myXML.@WIDTH;
    my_thumb_height = myXML.@HEIGHT;
    my_images = myXML.IMAGE;
    my_total = my_images.length();

    createContainer();
    callThumbs();

    //instance of the URLLoader and its associated event listener are 
    //both not required once we extract the data from our XML file.
    //delete these two once that task is finished.
    myXMLLoader.removeEventListener(Event.COMPLETE, processXML);
    myXMLLoader = null;

}

function createContainer():void{
    //creating movieclip to hold images
    container_mc = new MovieClip();

    //I position the MovieClip in accordance to the variables from xml.
    container_mc.x = my_x;
    container_mc.y = my_y;
    addChild(container_mc);

    //regestering the click event to the parent instead of the thumbs
    //instead of to each thumb.
    container_mc.addEventListener(MouseEvent.CLICK, callFull);
    //thumbs hover effects
    container_mc.addEventListener(MouseEvent.MOUSE_OVER, onOver);
    container_mc.addEventListener(MouseEvent.MOUSE_OUT, onOut);
    container_mc.buttonMode = true;

    preloaders_mc = new MovieClip();
    preloaders_mc.x = container_mc.x;
    preloaders_mc.y = container_mc.y;

    //movieClipArray.push(container_mc);
    //trace(movieClipArray);
    addChild(preloaders_mc);
    //trace(movieClipArray);
}

function callThumbs():void{
    //loop will cycle through as long as it does not exceed the total num of images.
    for (var i:Number = 0; i < my_total; i++){

        //retrives the url of the thumbs.
        var thumb_url = my_images[i].@THUMB;
        //creates temperary instance of loader
        var thumb_loader = new Loader();
        //loads the thumbs
        thumb_loader.load(new URLRequest(thumb_url));
        thumb_loader.contentLoaderInfo.addEventListener(Event.COMPLETE, thumbLoaded);

        //unique reference to each thumb to tell us what image to load from the xml array.
        //thus I set thumb's name property as its number in the XML list.
        thumb_loader.name = i;

        //position the thumbs horizontially
        thumb_loader.x = (my_thumb_width + 30)* x_counter;

        thumb_loader.y = (my_thumb_height + 30)* y_counter;

        if(x_counter+1 < columns){
            x_counter++;
        }
        else{
            x_counter = 0;
            y_counter ++;
        }

        var preloader_pb:ProgressBar = new ProgressBar();
        preloader_pb.source = thumb_loader.contentLoaderInfo;
        preloader_pb.x = thumb_loader.x;
        preloader_pb.y = thumb_loader.y;
        preloader_pb.width = my_thumb_width;
        preloader_pb.height = my_thumb_height;
        preloaders_mc.addChild(preloader_pb);

        preloader_pb.addEventListener(Event.COMPLETE, donePb);
    }
}

//loads the instances of thumbs to container_mc to be visable.
function thumbLoaded(e:Event):void{
    var my_thumb:Loader = Loader(e.target.loader);
    container_mc.addChild(my_thumb);
    //trace(container_mc);
    stage.addChild(container_mc);
    movieClipArray.push(container_mc);
    //trace(movieClipArray.length);

    //Fading in Each Thumb once it Loads.
    my_tweens[Number(my_thumb.name)]=new Tween(my_thumb, "alpha", Strong.easeIn, 0,1,0.5, true);

    //event listener used to check the download process of our thumbnails. 
    //These are only used once in the gallery and are never required again.
    my_thumb.contentLoaderInfo.removeEventListener(Event.COMPLETE, thumbLoaded);

}

//loads the full image by using an instance of loader class.
function callFull(e:MouseEvent):void{
    var full_loader:Loader = new Loader();
    var full_url = my_images[e.target.name].@FULL;
    full_loader.load(new URLRequest(full_url));
    //will only be displayed after it fully loaded
    full_loader.contentLoaderInfo.addEventListener(Event.INIT, fullLoaded);

    var full_pb:ProgressBar = new ProgressBar();
    full_pb.source = full_loader.contentLoaderInfo;
    full_pb.x = 100;
    full_pb.y = 400;
    preloaders_mc.addChild(full_pb);

    full_pb.addEventListener(Event.COMPLETE, donePb);

    container_mc.removeEventListener(MouseEvent.CLICK, callFull);
    container_mc.buttonMode = false;
    //hover effects for full.
    container_mc.removeEventListener(MouseEvent.MOUSE_OVER, onOver);
    container_mc.removeEventListener(MouseEvent.MOUSE_OUT, onOut);
    //Fading In and Out the Entire Gallery when a full image is shown
    container_mc_tween = new Tween(container_mc, "alpha", Strong.easeIn, 1,0.5,0.5, true);

}

//will load the full pic and position it
function fullLoaded(e:Event):void{
    //for the hand cursor.
    full_mc = new MovieClip();
    full_mc.buttonMode = true;
    addChild (full_mc);
    var my_loader:Loader = Loader(e.target.loader);
    full_mc.addChild(my_loader); // This line was addChild(my_loade), just add full_mc. before it.
    //Fading In of Full Image
    full_tween = new Tween(my_loader, "alpha", Strong.easeIn, 0,1,0.5, true);
    my_loader.x = 150;
    my_loader.y = 100
    my_loader.addEventListener(MouseEvent.CLICK,removeFull);

    my_loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, fullLoaded);
    //stage.addEventListener(MouseEvent.ROLL_OUT, disappear,false,0,true);
    full_mc.addEventListener(MouseEvent.ROLL_OVER,appear);

    }

function removeFull(e:MouseEvent):void{
var my_loader:Loader = Loader (e.currentTarget);
full_tween = new Tween(my_loader, "alpha", Strong.easeOut, 1,0,0.5, true);
full_tween.addEventListener(TweenEvent.MOTION_FINISH, tweenFinished);

container_mc_tween = new Tween(container_mc, "alpha", Strong.easeOut, 0.5,1,0.5, true);
my_loader.addEventListener(MouseEvent.ROLL_OUT,disappear);
}

function tweenFinished (e:TweenEvent):void{
var my_loader:Loader = Loader (e.target.obj);
my_loader.unload();
full_mc.removeChild(my_loader); // This line was removeChid(my_loader), just add full_mc before it.
removeChild(full_mc);
full_mc = null;

container_mc.addEventListener(MouseEvent.CLICK, callFull);
container_mc.buttonMode = true;
container_mc.addEventListener(MouseEvent.MOUSE_OVER, onOver);
container_mc.addEventListener(MouseEvent.MOUSE_OUT, onOut);

var my_tween:Tween = Tween(e.target);
my_tween.removeEventListener(TweenEvent.MOTION_FINISH, tweenFinished);
}

function donePb (e:Event):void{
    var my_pb:ProgressBar = ProgressBar(e.target);
    preloaders_mc.removeChild(my_pb);
    my_pb.removeEventListener(Event.COMPLETE, donePb);
}

function onOver (e:MouseEvent):void{
    var my_thumb:Loader = Loader(e.target);
    my_thumb.alpha = 0.5;
}

function onOut (e:MouseEvent):void{
    var my_thumb:Loader = Loader (e.target);
    my_thumb.alpha = 1;
}

//category buttons
var animal_btn:SimpleButton = new animals_mc();
addChild(animal_btn);
animal_btn.x = 50;
animal_btn.y =550;

var concert_btn:SimpleButton = new concert_mc();
addChild(concert_btn);
concert_btn.x = 180;
concert_btn.y =550;

var festival_btn:SimpleButton = new festival_mc();
addChild(festival_btn);
festival_btn.x = 310;
festival_btn.y =550;

var flowers_btn:SimpleButton = new flowers_mc();
addChild(flowers_btn);
flowers_btn.x = 440;
flowers_btn.y =550;

flowers_btn.addEventListener(MouseEvent.CLICK, loadFlowers);
function loadFlowers(event:MouseEvent)
{
    currentCategory = "flower";
    removeAllMovieClips();
    processXMLData();
}

animal_btn.addEventListener(MouseEvent.CLICK, loadAnimals);
function loadAnimals(event:MouseEvent)
{
    currentCategory = "animals";
    removeAllMovieClips();
    processXMLData();
}

concert_btn.addEventListener(MouseEvent.CLICK, loadConcert);
function loadConcert(event:MouseEvent)
{
    currentCategory = "concert";
    removeAllMovieClips();
    processXMLData();
}

festival_btn.addEventListener(MouseEvent.CLICK, loadFestival);
function loadFestival(event:MouseEvent)
{
    currentCategory = "festival";
    removeAllMovieClips();
    processXMLData();
}

function removeAllMovieClips(){
    trace(movieClipArray.length);
    for (var i =0; i<movieClipArray.length; i++){
        stage.removeChild(movieClipArray[i]);
    }
    movieClipArray = [];
    //trace(myMovieClipsOnStage);

}

var menu_mc:MovieClip = new fullPicMenu_mc();
addChild(menu_mc);
menu_mc.x = 150;
menu_mc.y =460;
menu_mc.visible= false;

var share_btn:SimpleButton = new share_mc();
addChild(share_btn);
share_btn.x = 80;
share_btn.y =350;
share_btn.visible= false;

var fav_btn:SimpleButton = new fav_mc();
addChild(fav_btn);
fav_btn.x = 93;
fav_btn.y =400;
fav_btn.visible= false;

var caption_btn:SimpleButton = new caption_mc();
addChild(caption_btn);
caption_btn.x = 80;
caption_btn.y =460;
caption_btn.visible= false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:22:43.757

您`container_mc`不止一次将其推入`movieClipArray`，然后您尝试将其从舞台上移除两次。每次加载拇指时在函数处创建一个新容器`thumbLoaded()`，或者完全摆脱数组，因为您将只有一个容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:57:20.280

```
function removeAllMovieClips(){
    trace(movieClipArray.length);
    for (var i =0; i<movieClipArray.length; i++){
        if(movieClipArray[i] is DisplayObject && movieClipArray[i].parent == stage)
            stage.removeChild(movieClipArray[i]);
    }
    movieClipArray = [];
} 
```

我没有通过你所有的代码来找出为什么你的电影剪辑不是舞台的孩子，但这将防止错误。

你也可以

```
if(movieClipArray[i].parent) movieClipArray[i].parent.removeChild(movieClipArray[i]); 
```

# android-ndk - NDK开发中，如何忽略系统头文件和libs？

> ID：15566527
> 
> 赞同：1
> 
> 时间：2013-03-22T09:11:38.973
> 
> 标签：android-ndk, include

在 NDK 环境下构建时，系统特定的 include 和 lib 路径

`platforms/android-X/arch-arm/usr/include/` 和

`platforms/android-X/arch-arm/usr/lib` 是自动添加的。

我正在尝试使用我的库和标头版本，我应该怎么做`Android.mk?`才能避免`ndk`自动添加这些路径？

# javascript - 如何使用nodejs通过套接字从服务器到客户端通信？

> ID：15566529
> 
> 赞同：3
> 
> 时间：2013-03-22T09:11:56.110
> 
> 标签：javascript, node.js, socket.io, appjs

目前我正在创建一个 Javascript 应用程序。我为此使用[AppJS](http://appjs.org/)。

我在理解客户端和服务器之间的连接时遇到了一些问题。

# 菜单栏 -> 套接字问题

问题是菜单栏和套接字组合。

## 套接字连接

```
io.sockets.on('connection', onSocketConnection)

function onSocketConnection(socket) {
    socket.emit('onMessage', {
        date: new Date(),
        message: 'Welcome!'
    })
} 
```

## 菜单栏

```
var menubar = app.createMenu([{
    label:'File',
    submenu:[{
        label:'New',
        action: function() {
            // Simply window.reload() or windows.frame.reload()?    
            // Reload window
        }
    },{
        label:'Change something in view...',
        action: function() {
            // How to speak to client from here?
            // I cannot use socket.emit()
        }
    }, {
        label:'Exit',
        action: function() {
            window.close()
        }
    }]
}]) 
```

但是当用户点击菜单栏项目时如何告诉客户端呢？

# 异步长函数 -> 套接字

使用套接字的另一个问题是异步长加载函数。

## 套接字连接

```
io.sockets.on('connection', onSocketConnection)

function onSocketConnection(socket) {
    var test = veryLongLoading()
    console.log(test) // undefined -.-'
    socket.emit('test', {
        test: test

    })
} 
```

所以我想我需要使用这样的回调：

```
io.sockets.on('connection', onSocketConnection)

function onSocketConnection(socket) {
    veryLongLoading(returnValue)
}

function veryLongLoadingFunction(next) {
    // Blablabla
    next('test')
}

function returnValue(value) {
    // Again socket is not available -.-'
    socket.emit('test', {
        test: test
    })
} 
```

任何人都面临同样的问题，或者任何可以为我指明正确方向的人。

也许我只是误解了流程（我通常用 PHP 编程）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T03:43:32.677

**问题 1**

对于第一部分，您需要监听来自服务器的事件：

```
socket.on('message-from-server', function(data) {
  // You need to trigger the sub-menu change here.
  // Which means you need a handle for the sub-menu object.
  subMenu.action(data)
}); 
```

**问题 2**

The pattern for long running async functions look like this:

```
var veryLongLoading = function(next) {
   // pass your value to next
   // like this
   next(someValue);
}; 
```

Then to use it, you would do this:

```
veryLongLoading(function(someValue) {
   socket.emit(someValue);
}); 
```

Hope that helps!

# c# - 检查数据库中哪些记录被删除以更新应用程序集合的有效方法

> ID：15566531
> 
> 赞同：2
> 
> 时间：2013-03-22T09:12:08.643
> 
> 标签：c#, sql-server, wcf, optimization, architecture

为了有效地保持应用程序集合与数据库同步，而无需每次加载相同的大量记录，我可以使用`datetime`带有表触发器的数据库“LastModified”字段。表触发器在更新或插入数据库操作时更新“LastModified”字段，然后我可以为数据库查询提供最后使用的时间戳值，以仅加载那些时间戳值晚于提供的参数的记录。

上述技术有助于保持较小的数据交换量，但存在一个问题：在数据库中删除的记录仍保留在应用程序集合中。

如何检查数据库中哪些记录被删除以相应地更新应用程序的集合，以使流量数据尽可能小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:25:48.743

您需要一个将在删除时调用的表触发器。当调用此触发器时，它会将索引和删除时间戳写入另一个跟踪表。在您下一次同步时，您只需从该表中检索自上次修改日期以来要删除的所有索引。

也许您应该看看[Microsoft Sync Framework](http://msdn.microsoft.com/en-us/library/bb902854.aspx)。它将在数据库中创建所有需要的表和触发器，以跟踪自上次同步以来所做的更改。只需按照[此示例](http://msdn.microsoft.com/en-us/library/ff928699.aspx)进行操作，然后查看您的数据库。您应该很容易看到所有添加的表和它们用来跟踪所有更改的触发器。

# java - 使用 UnboundID 的 LDAP 身份验证：哪种安全性？

> ID：15566535
> 
> 赞同：2
> 
> 时间：2013-03-22T09:12:20.380
> 
> 标签：java, android, authentication, encryption, unboundid-ldap-sdk

我正在使用 unboundid 原语通过以下代码对来自 Active Directory 上的 android 应用程序的用户进行身份验证：

```
public boolean getConnection() {
    LDAPConnection connection = new LDAPConnection();
    try {
        connection.connect("my.ldap.com", 389);
        SearchResult searchResult = connection.search("XXX",SearchScope.SUB, "(uid="+username+")");
        if(searchResult.getEntryCount() != 1) {
            return false;
        }
        else {
            String dn = searchResult.getSearchEntries().get(0).getDN();

            try {
                connection = new LDAPConnection("XXX", 389, dn, password);
                return true;
            }
            catch (LDAPException e) {
                return false;
            }
        }
    } catch (LDAPException e) {
        e.printStackTrace();
    }
    return true;
} 
```

我的问题是：既然密码在那个函数中是清晰可读的，你知道它是否以及如何被加密以“发送”到 LDAP 以与 AD 中的密码进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:48:32.603

一个简单的绑定请求，就像您正在使用的那样，不会做任何事情来保护密码。为了确保它不会暴露给可能能够观察到客户端和服务器之间通信的任何人，您应该使用 SSL 或 StartTLS 之类的东西来保护该通信。

还有其他身份验证机制（例如我相信 Active Directory 支持的 DIGEST-MD5 SASL 机制）即使通过未加密的连接也可以保护密码。不幸的是，在 Android 上使用这些身份验证机制并不容易，因为 Android API 不包含必要的 SASL 支持。

# r - 有没有办法在 R 进程之间共享锁（例如锁文件）？

> ID：15566536
> 
> 赞同：6
> 
> 时间：2013-03-22T09:12:26.543
> 
> 标签：r, locking, semaphore

我有一堆不同的 R 进程（从命令行独立启动），它们都需要加载不同的大文件。为了避免阻塞网络，我想添加一个锁/信号量，例如通过一个锁文件，以便他们一个接一个地获取他们的文件。在标准 Linux 系统上，应该只有一个进程能够获得锁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:15:24.777

虽然我找不到 R 包，但[`lockfile`](https://stackoverflow.com/questions/1715137/the-best-way-to-ensure-only-1-copy-of-bash-script-is-running)可以使用 Linux 命令：

```
write("Attempting to get lock", stderr())
system("lockfile /tmp/my_simple_lock")

# Do stuff

write("Releasing lock", stderr())
system("rm -f /tmp/my_simple_lock") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T14:58:48.310

先前答案的可能更明确的版本。如果您正在访问的文件称为文件名，并且您在单个目录中操作......（如果您使用不同的目录，那么显然将文件名替换为整个路径）

```
write("Attempting to get lock", stderr())
system("lockfile filename.lock")
\# do whatever you want to the file
write("Releasing lock", stderr())
remove.file("filename.lock") 
```

# c# - 不可能在 XNA 上的立方体上绘制不同的纹理

> ID：15566538
> 
> 赞同：2
> 
> 时间：2013-03-22T09:12:39.537
> 
> 标签：c#, graphics, xna, textures, draw

我在 Xna 上使用“ **DrawUserIndexPrimitive ”类绘制纹理时遇到了一些问题。**

我可以毫无问题地绘制我的立方体/模型。但我想**在我的立方体上绘制不同的纹理**。我循环应用到我的不同立方体的不同纹理的每个“ID”。但它不起作用。我每次都应用与我的类“GraphicData”不同的IndexBuffer 和vertexPosition。

要应用的最终纹理**在我所有的立方体上都是相同的**

谢谢你

这是我的函数“Draw”的代码

```
public void drawWorld(GameTime gameTime) 
    { 
        if (needToDraw) 
        { 
            int index = 0; 
            foreach (GraphicData data in graphicData) 
            { 

                effet.LightingEnabled = false; 
                effet.VertexColorEnabled = false; 
                effet.TextureEnabled = true; 
                effet.FogEnabled = false; 
                effet.FogStart = arcadia.camera.NearPlane; 
                effet.FogEnd = arcadia.camera.FarPlane; 
                effet.FogColor = new Vector3(1, 1, 1); 
                effet.View = arcadia.camera.View; 
                effet.Projection = arcadia.camera.Projection; 
                effet.Texture = data.Texture2D;
                //I hardcoded with a condition for check that the texture changes well in my loop
                /*
                if (index == 0) 
                { 
                    effet.Texture = Game.Content.Load<Texture2D>("Models\\Ground\\Land\\ground_land_text1"); 
                } 
                else 
                { 
                    effet.Texture = Game.Content.Load<Texture2D>("Models\\Ground\\Land\\ground_land_text2"); 
                } 
                */
                foreach (EffectPass pass in effet.CurrentTechnique.Passes) 
                { 
                    pass.Apply(); 
                    //Initialize et envoie à la carte graphique le buffer et les vertices 
                    if (data.vertexBuffer != null && data.indexBuffer != null) 
                    { 
                        Game.GraphicsDevice.SetVertexBuffer(data.vertexBuffer); 
                        Game.GraphicsDevice.Indices = data.indexBuffer; 
                        Game.GraphicsDevice.DrawUserIndexedPrimitives(PrimitiveType.TriangleList, data.vertexPosition, 0, data.vertexPosition.Length, data.indices, 0, data.indices.Length / 3); 
                    } 

                } 
                index++; 
            } 
        } 

    } 
```

# cassandra - Cassandra 中的数据分布

> ID：15566539
> 
> 赞同：4
> 
> 时间：2013-03-22T09:12:45.850
> 
> 标签：cassandra

我听说过 Cassandra 及其发行版。真的想知道数据在整个集群中是如何分布的现象吗？我的意思是 Cassandra 如何决定哪些节点拥有哪些数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-07-21T04:57:15.703

如果您了解 HastTable 数据结构以及如何在 Hashtable 中完成散列，则非常简单。

## 哈希表

**STEP 1.** 基本上，哈希表中键的索引是如何确定的

```
index = hashfunc(key_you_want_to_distribute) % array_size 
```

寻找[选择散列函数](https://en.wikipedia.org/wiki/Hash_table#Choosing_a_good_hash_function)的详细信息。

**第2 步。** 然后要检索您想要的数据，您只需给它您想要查找的值。它将为该值创建哈希并查找该索引。

## 卡桑德拉

它在 Distribute Hashtables/ Cassandra 中的工作方式相同。

**步骤1。**在 cassandra 中，您必须指定要包含的记录中的哪些字段以创建哈希。说，如果你有一张桌子`User`。您可能希望按用户分配用户`username`，因此您决定将其作为主键。

您选择创建哈希的字段在 Cassandra 世界中称为分区键，因为它是分区记录的决定因素。

然后，Cassandra 为您要插入的记录创建哈希，然后根据您的节点/机器的范围，分发记录。

假设您有 3 个节点，哈希范围如下，

```
node1 | 1    - 2000
node2 | 2000 - 4000
node3 | 4000 - 6000 
```

例如，见下表，我给出了随机散列以使其简单。Cassandra 实际使用 Murmur3 哈希。

```
username  | hash(example) | which node it goes to  |
----------|---------------|------------------------|
prayagupd | 1             | node1                  |
mike      | 3000          | node2                  |
zach      | 5000          | node3                  | 
```

**第2步。**然后，如果您想使用 username 检索用户`'prayagupd'`，cassandra 将为它创建哈希，说它`1`并且它知道 1 属于 node1 (1-2000)。

答对了！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T15:38:55.843

同样重要的是要了解 cassandra 中的一个分区都驻留在一个节点上，而其他东西（例如 cassandra 项目的开源 playorm）在所有节点上都有一个分区，因此在访问单个分区中的大量记录时可以获得更多的磁盘并行性。如果你需要从一个分区中获取 500k 条记录，你可能不想使用 cassandra 分区，而是像 PlayOrm 那样做你自己的虚拟分区。

[http://buffalosw.com/products/playorm/](http://buffalosw.com/products/playorm/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T09:14:06.457

负责任何给定数据的节点集（单个节点或多个节点）由以下因素决定：

*   行键（数据在行键上分区）
*   复制因子
*   复制策略

重要的是要了解 Cassandra 不会根据变化的特征（例如当前负载、哪些节点启动或关闭，或者您的客户端碰巧与哪个节点通信）来更改给定行键的副本集。

有关更多详细信息，请参阅[cassandra 常见问题解答](http://wiki.apache.org/cassandra/FAQ)

# mysql-workbench - MySQL Workbench 创建的数据库未显示在 SQL 编辑器的架构列表中？

> ID：15566545
> 
> 赞同：1
> 
> 时间：2013-03-22T09:13:03.397
> 
> 标签：mysql-workbench

一旦我使用 MySQL Workbench。我通过 EER 建模部分创建了数据库。然后我在我创建的主机的架构列表中看到了我创建的数据库。所以我可以从我的软件连接到主机。但是最近我新创建的数据库没有显示在主机的 Schema 列表中。我试图重新创建主机。但它仍然无法从应用程序访问数据库。

我希望清楚地描述我的问题，感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T09:56:34.610

确保用于访问架构的用户实际上具有这样做的权限。使用 Workbench 的管理部分向特定用户授予适当的权限。

# javascript - 淘汰赛不会更改对象数组中的复选框状态

> ID：15566547
> 
> 赞同：3
> 
> 时间：2013-03-22T09:13:08.757
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, knockout-2.0

我正在使用对象数组来创建一个复选框选择器，但由于某种原因，当我单击一个复选框时，它会返回默认值。为什么会这样？

```
 <html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="knockout-2.2.1.js"></script>
<script src="knockout.mapping-latest.js"></script>

</head>
<body>
<span data-bind="text: name"></span>

<ul data-bind="foreach: alldata">
    <li>
        Name at position <span data-bind="text: $index"> </span>:
        <span data-bind="text: $data.name"> </span>
        <input type="checkbox" data-bind="attr: { value: $data }, click: myFunction.bind($data),checked: $data.rc " />      
    </li>
</ul>

<hr />

<div data-bind="text: ko.toJSON(viewModel)"></div> 

<script type="text/javascript">

var tObj = {"name":"John", "roles":[{id:1, name:"Role1", desc:"Desc1"}, {id:2, name:"Role2", desc:"Desc2"}]};
var lstRoles=[{id:1, name:"Role1", desc:"Desc1", rc:true},{id:2, name:"Role2", desc:"Desc2", rc:false},{id:2, name:"Role3", desc:"Desc3",rc:true},{id:2, name:"Role4", desc:"Desc4", rc:false}];

var viewModel = ko.mapping.fromJS(tObj);
viewModel.alldata = ko.observableArray(lstRoles);
//viewModel.alldata.subscribe();

ko.applyBindings(viewModel); 
    function myFunction(data)
    {
       //viewModel.roles.push(data);
    }
</script>
</body>
</html> 
```

***更新代码：*** 我已经建立了问题的 1 部分，它与点击有关：myFunction.bind($data) 事件如果删除点击事件它开始工作。但仅适用于 tObj.Roles 不适用于 alldata 数组。

```
 <html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="knockout-2.2.1.js"></script>
<script src="knockout.mapping-latest.js"></script>

</head>
<body>
<span data-bind="text: name"></span>

<div data-bind="foreach: alldata">    
        <input type="checkbox" data-bind="attr: { value: $data }, checked: $data.rc, enable: $data.ds" />          
        <span data-bind="text: $data.name"> </span>
        <span data-bind="text: $data.desc"> </span></br>

</div>

<hr />

<div data-bind="foreach: roles">    
        <input type="checkbox" data-bind="attr: { value: $data }, checked: $data.rc" />          
        <span data-bind="text: $data.name"> </span>
        <span data-bind="text: $data.desc"> </span></br>

</div>

<hr />

<div data-bind="text: ko.toJSON(viewModel)"></div> 

<script type="text/javascript">

var tObj = {"name":"John", "roles":[{id:1, name:"Role1", desc:"Desc1", rc:true, ds:true},{id:2, name:"Role2", desc:"Desc2", rc:false, ds:false},{id:2, name:"Role3", desc:"Desc3",rc:true, ds:false},{id:2, name:"Role4", desc:"Desc4", rc:false, ds:true}]};
var lstRoles=[{id:1, name:"Role1", desc:"Desc1", rc:true, ds:true},{id:2, name:"Role2", desc:"Desc2", rc:false, ds:false},{id:2, name:"Role3", desc:"Desc3",rc:true, ds:false},{id:2, name:"Role4", desc:"Desc4", rc:false, ds:true}];

var viewModel = ko.mapping.fromJS(tObj);
viewModel.alldata = ko.observableArray(lstRoles);
//viewModel.alldata.subscribe();

ko.applyBindings(viewModel); 
    function myFunction(data)
    {
       //viewModel.roles.push(data);
    }
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:43:44.997

似是而非的，它与默认的点击动作有关，即复选框值的变化。尝试使用 return true; 从点击处理程序。

# c++ - “分配给索引”C++ 运算符重载脑筋急转弯

> ID：15566550
> 
> 赞同：3
> 
> 时间：2013-03-22T09:13:28.753
> 
> 标签：c++, operator-overloading

我正在编写一些时髦的音频代码并尝试使用运算符重载来创建一个非常干净和简单的 API。它变得有点像 C++ 脑筋急转弯......

我想要的将通过“分配给索引”的复合运算符立即解决，我很确定它不存在。可能有人对以下是否可能有任何见解？

我有 2 种对象类型....

```
Frames frames;  // audio data, contains 1 buffer (float *) for each channel
Sample s;       // a single sample, 1 float for each channel 
```

帧的正交切片也是如此`Sample`，即帧不是`Sample`'s 的数组。如果您知道音频，`Frames`则它是“非交错的”，并且`Sample`是。

圣杯...

```
s = frames[1];    // statement 1\. gets a copy of values in frame 1
frames[1] = s;    // statement 2\. replace values in frame 1 with those in Sample s 
```

第一个没问题：

```
// in class Frames...
Sample& operator[](size_t idx) const { 
    Sample s;
    s.left = _leftCh[idx];
    s.right = _rightCh[idx];
    return s;
} 
```

但是第二个赋值很棘手，因为上面的函数创建了数据的副本而不是引用。

我试过用引用定义 Sample ......

```
class Sample {
public:
    float& L;
    float& R;
    Sample(float& lt, float& rt) : L(lt), R(rt) {};
} 
```

但是你不能做一些简单的事情......

```
Sample s(0.0, 0.0);
s.left = 0.2; 
```

另一种可能的解决方案是让这两个语句调用两个不同的运算符重载。然后强制语句 2 调用这个 [] 重载，它返回一个指向值而不是对象的新 Frames`Sample`对象：

```
Frames& operator[](size_t idx) {
    // Construct an new Frames object whose which 
    // points to value idx in each channel
    Frames f(_size - idx);
    f._leftCh = &_leftCh[idx];
    f._rightCh = &_rightCh[idx];
    return f;
} 
```

然后添加一个赋值运算符，`Frames`它只是替换第一个值......

```
Frames& operator=(const Sample& s) {
    _leftCh[0] = s.left;
    _rightCh[0] = s.right;
    return *this;
} 
```

编译器告诉我，方法的区别不仅仅在于返回类型，但这可以通过`const`在方法名称之后为其中一个`operator[]`重载来解决。这里可能有线索吗？有没有办法让语句 1 调用`Sample& operator[]...`和语句 2 调用`Frames& operator[]...`。还是有更好的方法来实现这一点？

如果您已经做到了这一步，感谢您的耐心等待！非常感激...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T09:24:08.197

这个怎么样：

```
class SampleRef {
  float &left_, &right_;

public:
  SampleRef(float& left, float& right)
    : left_(left), right_(right)
  {}

  operator Sample () {
    return Sample(left_, right_);
  }

  SampleRef& operator= (const Sample &arg) {
    left_ = arg.left;
    right_ = arg.right;
    return *this
  }
};

SampleRef Frames::operator[] (size_t idx) {
  return SampleRef(_leftCh[idx], _rightCh[idx]);
} 
```

你当然也可以添加一个`const`重载，`operator[]`它只会返回一个`Sample`：

```
Sample Frames::operator[] (size_t idx) const {
  return Sample(_leftCh[idx], _rightCh[idx]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:30:03.073

您是否尝试过不重载只是为了解决细节？例如`sample = frame.getSample(); frame.setSample(sample);`，一旦细节得到您的满意，您就可以添加语法糖并重载`[]`and`=`运算符。

看起来您想保留对原始样本的引用，例如：

```
sample.right = oldR;
sample.left = oldL;
f[x] = sample;

sample.right = newR;
sample.left = newL;
newSample = f[x];

assert(sample.right == newSample.right && sample.left == newSample.left); 
```

这个对吗？如果是这样，我认为您不能这样做，因为您“分解”了样本以将其插入框架中，因此您失去了原始连接。

# android - 带有部分标题的列表视图，并从每个部分中仅选择一项

> ID：15566556
> 
> 赞同：1
> 
> 时间：2013-03-22T09:13:58.277
> 
> 标签：android

我想创建带有节标题的列表视图。在每个部分中，应该只允许用户选择一项。任何人都可以帮助我如何实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:21:14.720

I think this tutorial describes what you need:

[http://bartinger.at/listview-with-sectionsseparators/](http://bartinger.at/listview-with-sectionsseparators/)

# objective-c - 有人知道 VDADecoder 吗？如何调用创建函数？

> ID：15566560
> 
> 赞同：0
> 
> 时间：2013-03-22T09:14:07.927
> 
> 标签：objective-c, xcode, macos, video, h.264

我阅读了 Apple 技术说明[https://developer.apple.com/library/mac/#technotes/tn2267/_index.html](https://developer.apple.com/library/mac/#technotes/tn2267/_index.html)

我尝试调用示例代码“CreateDecoder()”，如下所示：

```
OSStatus stat = 0;
VDADecoder *decoder = NULL;
CFDataRef data;
char dataStr[] = "data";
data = CFDataCreate(kCFAllocatorDefault, (UInt8*)dataStr, 5);   
stat = CreateDecoder(320, 480, 'avc1', data, decoder); 
```

但它返回状态码 -50，表示“操作无法完成”。
为什么？我应该如何正确称呼它？我想传递“数据”字符串是错误的，坚果我不知道实际上要传递什么......

有人知道解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:43:58.353

根据我对技术说明的阅读，您不能只为 CreateDecoder 的 inAVCCData 参数（在您的情况下为字符串“data”）发送任何随机数据流。查看描述解码器配置键的技术说明部分：

> kVDADecoderConfiguration_avcCData - 包含来自 H.264 比特流的 avcC 数据的 CFDataRef。在 QuickTime 电影文件中，这与存储在图像描述中的数据与 avcC 原子相同。

这是您需要在解码器设置期间检索和传递的传输文件的一个组件。

# asp.net-mvc - 什么样的类可以被视为 asp.net mvc 中的强类型模型？

> ID：15566563
> 
> 赞同：0
> 
> 时间：2013-03-22T09:14:18.877
> 
> 标签：asp.net-mvc

在visual studio中，我右键单击视图文件夹并打开“**添加视图**”对话框，然后我选择**强类型模型**，但我发现**并非**模型文件夹下的每个类都会显示在下拉列表中。

我的问题是：为什么那里没有显示其他模型类？什么样的类有权被视为强类型模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:27:59.240

您可以将任何类用作您定义的视图模型并且是您项目的一部分。确保您已构建项目，以便 Visual Studio UI 拾取 Models 文件夹中的类。或者只是在文本框中输入类的名称，而不是依赖下拉菜单。

# c# - Winrt c#将图像从资产复制到本地存储

> ID：15566570
> 
> 赞同：4
> 
> 时间：2013-03-22T09:14:46.660
> 
> 标签：c#, image, windows-runtime, copy, local-storage

我今天来找你是因为我不知道如何将图像从资产复制到本地存储。我尝试类似的东西：

```
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(
    new Uri("appx:///Assets/image.png"));

await file.CopyAsync(ApplicationData.Current.LocalFolder, "image.png"); 
```

但它根本不起作用。有谁知道这样做对吗？谢谢你的时间，问候。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T11:31:20.487

您的 Uri 方案无效。它应该是`ms-appx:`，而不是`appx:`：

```
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(
    new Uri("ms-appx:///Assets/image.png"));

await file.CopyAsync(ApplicationData.Current.LocalFolder, "image.png"); 
```

有关有效的 Uri 方案，请参阅此帖子：[Windows 8 应用程序中支持的 URI 方案](https://stackoverflow.com/questions/12020014/uri-schemes-supported-in-windows-8-apps)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T09:20:42.507

Refer this link

[Download an image to local storage in Metro style apps](https://stackoverflow.com/questions/10836367/download-an-image-to-local-storage-in-metro-style-apps)

Also

[How ro store image locally once it was downloaded by Image control in Windows 8?](https://stackoverflow.com/questions/12441617/how-ro-store-image-locally-once-it-was-downloaded-by-image-control-in-windows-8)

Might be helpful.

# android - 将其可见性设置为 View.Gone 后，按钮/视图仍显示在 ListView 中

> ID：15566572
> 
> 赞同：2
> 
> 时间：2013-03-22T09:14:51.590
> 
> 标签：android, listview, listadapter

我有一个`ListView`显示要购买的不同物品。如果用户选择一个项目，那么我将“ `Buy`”和“ `Add`”按钮设置为可见。当用户单击任何其他项目`Visibility`时，之前选择的 "`Buy`和 " `Add`" 设置为`Gone`，同时，我再次将所选列表项`Visibility`的' 设置为。`Button``Visible`

但是，当我滚动列表视图 2-3 次时，首先选择的列表项不会隐藏（将可见性设置为`Gone`）“ `Buy`”和“ `Add`” `Button`s。是否与视图的回收有关？我将在这里显示代码：

```
ButtonVisibilityFunction(View v) {
   if(mBuyButton!=null && mAddButton !=null) {
      mBuyButton.setVisibility(View.Gone); 
      mAddButton .setVisibility(View.Gone);
   }
      mBuyButton = (ImageButton) v.findViewById(R.id.Buy);
      mAddButton = (ImageButton) v.findViewById(R.id.Add);

      mBuyButton.setVisibility(View.Visible); 
      mAddButton .setVisibility(View.Visible);
} 
```

`mlistView.setonItemClickListner()`我在......中调用了上述函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:25:51.603

这是一个众所周知的“问题”。实际上，您需要了解 listview 是如何工作的。为了节省内存，只有您在屏幕上显示的元素是实时的。当您滚动回它们时，其他的通常会被破坏并重新创建。

这就是为什么一旦你让你的元素不可见，它们就会再次可见，因为它们是重新创建的。

因此，为了使它们再次不可见，您需要在每次列表视图重新创建视图时执行此操作。

为此，您需要覆盖 getView 方法并将所需的元素设置为隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:20:07.720

我通过以下方式解决了这个问题： mAdapter.notifySetDataChanged(); ！！

# full-text-search - Hibernate 搜索只读数据库

> ID：15566573
> 
> 赞同：0
> 
> 时间：2013-03-22T09:14:59.227
> 
> 标签：full-text-search, hibernate-search, readonly

我需要用hibernate进行全文查询，而Hibernate Seach似乎是个不错的选择，匹配同义词等的能力也很有趣。问题是我的应用程序只执行查询，而另一个应用程序执行插入/更新/删除。我不知道“hibernate seach”是否可以维护在这种情况下更新的文本索引，如果不能，我认为在每个查询中重建索引不是一个选项（是吗？）。

在数据库中执行更新的应用程序能够为我的应用程序生成事件。这可能是刷新索引的机会...

任何建议将不胜感激。提前致谢：

卡洛斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:09:12.757

我假设这个其他应用程序不是可以触发索引更新的 Java 应用程序。在这种情况下，您确实必须确保索引正确更新。如果您可以向 Java 应用程序发送通知以触发更新，那么您已经赢得了很多。例如，如果您可以发送已更改实体的主键，则可以使用这些 id 仅更新索引中的这些实体。您不必重建整个索引。另一种方法是使用最后更新的列。当索引应用程序收到通知时，它会选择自上次触发更新以来已更改的记录。这在一定程度上取决于您的表格是什么样子以及您的要求是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:09:25.593

是的，在大多数情况下，完整索引重建时间过长。但是，如果您能够接收事件 - 这不是问题。只需在收到事件时[手动重新索引实体。](http://docs.jboss.org/hibernate/search/3.3/reference/en-US/html/manual-index-changes.html#d0e5407)

顺便说一句，如果您使用 PostgreSQL 或 Oracle，请检查[PostgreSQL FTS](http://www.postgresql.org/docs/9.2/static/textsearch.html)和[Oracle Text](http://docs.oracle.com/cd/B10501_01/text.920/a96517/cdefault.htm)。

# apache - mod_deflate gzip 对不应该 gzip 的 MIME 类型的响应

> ID：15566574
> 
> 赞同：0
> 
> 时间：2013-03-22T09:15:06.817
> 
> 标签：apache, http, gzip, mime-types, mod-deflate

我在 Red Hat 6.4 上的 Tomcat 应用程序前面有一个 Apache 2.2.15 实例作为代理。我正在尝试将 Apache 实例配置为对客户端的某些（列入白名单的内容类型）响应进行压缩。Apache 正在使用 mod_jk 连接到 Tomcat（尽管使用 mod_proxy 时存在相同的问题，所以我认为我的问题与 mod_jk 或 Tomcat 无关）。

我有这个非常简单的 mod_deflate 配置：

`AddOutputFilterByType DEFLATE text/html`

这会导致`text/html`响应按预期压缩。但是，当我尝试下载由 Tomcat 生成的文件时，例如内容类型为 的电子表格`application/vnd.ms-excel`，这些文件也会被压缩：

以下是直接从 Tomcat 下载文件时的响应标头：

```
Cache-Control:max-age=0
Content-Disposition:attachment; filename="file-20130322-104702.xls";
Content-Length:699904
Content-Type:application/vnd.ms-excel
Date:Fri, 22 Mar 2013 08:47:02 GMT
Expires:Thu, 01 Jan 1970 00:00:00 GMT
Pragma:public
Server:Apache-Coyote/1.1
Set-Cookie:fileDownloadToken=true; Path=/ 
```

这是通过 Apache 下载文件时：

```
Cache-Control:max-age=0
Connection:Keep-Alive
Content-Disposition:attachment; filename="file-20130322-104524.xls";
Content-Encoding:gzip
Content-Type:application/vnd.ms-excel
Date:Fri, 22 Mar 2013 08:45:24 GMT
Expires:Thu, 01 Jan 1970 00:00:00 GMT
Keep-Alive:timeout=30, max=100
Pragma:public
Server:Apache-Coyote/1.1
Set-Cookie:fileDownloadToken=true; Path=/
Transfer-Encoding:chunked
Vary:Accept-Encoding 
```

**我不明白为什么 mod_deflate 会压缩这个响应（上图）？**

注释掉该行后`AddOutputFilterByType DEFLATE text/html`，文件不再被 gzip 压缩，所以我确定触发 mod_deflate 的是该行。同样的问题也存在于内容类型为的文件下载中`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`，可能还有其他问题。但是，从 Tomcat（通过 Apache）下载 javascript 文件并没有被压缩（正如预期的那样，因为内容类型与规则不匹配）：

```
Accept-Ranges:bytes
Cache-Control:PUBLIC, max-age=28800, must-revalidate
Connection:Keep-Alive
Content-Length:5578
Content-Type:application/javascript
Date:Fri, 22 Mar 2013 09:09:35 GMT
ETag:W/"5578-1362994418000"
Expires:Fri, 22 Mar 2013 17:09:35 GMT
Keep-Alive:timeout=30, max=100
Last-Modified:Mon, 11 Mar 2013 09:33:38 GMT
Server:Apache-Coyote/1.1 
```

mod_deflate 压缩这些电子表格的事实是一个问题，因为它会导致响应被缓冲，触发分块编码，这是我不想要的，因为我希望浏览器显示进度监视器（这些可能是非常大的文件）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-22T00:25:30.943

使用文件扩展名匹配来添加标题：

```
<filesMatch "\.(html)$">
# Header set Content-Encoding x-deflate
# Header set Content-Encoding deflate
# Header set Content-Encoding gzip
</filesMatch> 
```

尝试每一种，然后选择最有效的一种。

# ios - 延迟进度/活动指示

> ID：15566579
> 
> 赞同：0
> 
> 时间：2013-03-22T09:15:26.170
> 
> 标签：ios, grand-central-dispatch

暂时使用下面的代码为用户激活一些正在进行的操作指示（将下载一些文件......如果花费的时间超过一秒钟，我会显示`UIActivityIndicatorView`和`UIProgressView。问题是由于某种原因它可以工作iPhone 但在 iPad 上不稳定，尤其是在时间接近极限的时候。

```
 __block BOOL hasDownloads = YES;
        __weak typeof(self) weakSelf = self;

        double delayInSeconds = 1.0;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            if (hasDownloads) {
                [weakSelf progressInformationShow:YES];
            }
        }); 
```

在该代码之后，我开始使用完成处理程序在后台线程中下载文件。完成处理程序检查剩余的文件下载，并在最后一次下载完成时将 hasDownloads 标志设置为 NO。

有没有更好的解决方案或者代码有什么问题？

编辑进度块和完成块在垫子上但在电话上被调用？！

# android - 哪个是创建视图的原始线程？

> ID：15566581
> 
> 赞同：1
> 
> 时间：2013-03-22T09:15:28.873
> 
> 标签：android, view, ui-thread, game-loop

我在名为 GameLoop 的类中有此代码（类似于 LunarLander 示例的代码）

```
while( running ) {
    Canvas canvas = null;
    try {
        canvas = mSurfaceHolder.lockCanvas(null);
        long t = System.currentTimeMillis();
        if( t - old[0] >= frame ) {
            old[0] = t;
            synchronized( mSurfaceHolder ) {
                mGame.update();
                mGame.onDraw(canvas);
            }
        }
    }
    finally {
        // Do this in finally so that if an exception is thrown
        // we don't leave the Surface in an inconsistent state
        if( canvas != null ) mSurfaceHolder.unlockCanvasAndPost(canvas);
    }

        } 
```

父类是GameView（参考mGame）。
当`mGame.update()`试图调用他自己的`announce`方法时，

```
public class GameView extends SurfaceView implements SurfaceHolder.Callback {

. . .
    private void announce(int resId) {
        synchronized( mSurfaceHolder ) {
            tv_announcement.setText(getContext().getString(resId));
            ObjectAnimator anim = ObjectAnimator.ofFloat(tv_announcement, "alpha", 0, 1);
            anim.setDuration(ANNOUNCE_DURATION).start();
        }
    }
. . . 
```

我得到这个例外：

```
 android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

这里有两个线程，**UI 线程**，运行 GameView 并拥有 SurfaceView，**以及 GameLoop**，它是 Thread 的扩展，只运行更新绘制循环。

据我了解，异常告诉我只有 UI 线程可以触摸 TextView `tv_announcement`。
但是不是`announce`在 UI 线程中运行吗？我在这里想念什么？

这是announce后异常的logcat：

```
03-22 07:20:19.096: D/GameView(28250): + update(): state:IDLE, next state:CHOOSE_SIDE
03-22 07:20:19.096: D/GameView(28250): + announce(resId:2131361803)
03-22 07:20:19.096: W/dalvikvm(28250): threadid=10: thread exiting with uncaught exception (group=0xb3040180)
03-22 07:20:19.096: E/AndroidRuntime(28250): FATAL EXCEPTION: Thread-192
03-22 07:20:19.096: E/AndroidRuntime(28250): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4039)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:709)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.view.View.requestLayout(View.java:12675)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.view.View.requestLayout(View.java:12675)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.view.View.requestLayout(View.java:12675)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.view.View.requestLayout(View.java:12675)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.view.View.requestLayout(View.java:12675)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:268)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.view.View.requestLayout(View.java:12675)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.widget.TextView.checkForRelayout(TextView.java:6773)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.widget.TextView.setText(TextView.java:3306)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.widget.TextView.setText(TextView.java:3162)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at android.widget.TextView.setText(TextView.java:3137)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at <package>.GameView.announce(GameView.java:436)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at  <package>.GameView.update(GameView.java:314)
03-22 07:20:19.096: E/AndroidRuntime(28250):    at  <package>.GameView$GameLoop.run(GameView.java:495)
03-22 07:20:19.126: D/GameView(28250): + onWindowFocusChanged(hasWindowFocus:true)
03-22 07:20:19.126: D/GameView(28250): - onWindowFocusChanged() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:28:36.920

> 只有创建视图层次结构的原始线程才能接触其视图。

抛出您的错误是因为您肯定是从非 UI 线程修改 UI，可能来自工作线程。

如果您想使用 Thread 中执行的操作或仅来自 Thread 中执行的某些进程的某些信息来更新 UI，您只能使用：

*   [runOnUiThread()](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)
*   [处理程序](http://developer.android.com/reference/android/os/Handler.html)
*   [异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

# java - Java 邮件 API 生成分段 IP 数据包，避免 EHLO 到 SMTP

> ID：15566587
> 
> 赞同：3
> 
> 时间：2013-03-22T09:15:55.210
> 
> 标签：java, tcp, smtp, ip, jakarta-mail

我们目前在 Tomcat 7 容器中运行的 JavaMail 应用程序遇到了一个相当奇怪的问题。Java Mail API 以经典的方式使用，并不太花哨（只发送电子邮件通知，没有附件等）。在测试环境中，此代码成功地将电子邮件发送到 MSExchangeServer。

该应用程序在 Xen Hypervisor 上运行，来宾是 Windows 2008R2，Xen 和 Windows 版本对于测试和生产是相同的。我们在JDK7u17（最新，昨天下载）上运行。

与 SMTP 服务器的通信在 EHLO/HELO 阶段中断

javax.mail.MessagingException：向 SMTP 服务器发送 HELO 命令失败

然后，我们尝试使用可行的 blat[命令行实用程序](http://sourceforge.net/projects/blat/files/latest/download?source=files,)发送电子邮件 。

我们已经尝试过使用 putty，我们可以在 telnet 模式下使用 putty 连接到邮件服务器时重现该问题，如果在 RAW 中使用 putty 连接，我们可以发送 EHLO 命令。

因此，我们在游戏中添加了一个嗅探器并记录了以下（可重现的）失败[会话数据](https://dl.dropbox.com/s/ivx0qmuisi5wyhy/failed_smtp_connection.zip?token_hash=AAEOKLHaJ60dmcewnTD4-F4DZ2ALLuP1F5MVhs73NzMJWw&dl=1)：

```
00000000  32 32 30 20 2a 2a 2a 2a  2a 2a 2a 2a 2a 2a 2a 2a 220 **** ********
00000010  2a 2a 2a 2a 2a 2a 2a 2a  2a 2a 2a 2a 2a 2a 2a 2a ******** ********
00000020  2a 0d 0a                                         *..
00000000  45                                               E
00000001  48 4c 4f 20 53 52 56 2d  46 50 53 2d 30 32 0d 0a HLO SRV- FPS-02..
00000023  35 30 32 20 75 6e 69 6d  70 6c 65 6d 65 6e 74 65 502 unim plemente
00000033  64 20 28 23 35 2e 35 2e  31 29 0d 0a             d (#5.5\. 1)..
00000011  48                                               H
00000012  45 4c 4f 20 53 52 56 2d  46 50 53 2d 30 32 0d 0a ELO SRV- FPS-02..
0000003F  35 30 32 20 75 6e 69 6d  70 6c 65 6d 65 6e 74 65 502 unim plemente
0000004F  64 20 28 23 35 2e 35 2e  31 29 0d 0a             d (#5.5\. 1)..
00000022  51                                               Q
00000023  55 49 54 0d 0a                                   UIT..
0000005B  35 30 32 20 75 6e 69 6d  70 6c 65 6d 65 6e 74 65 502 unim plemente
0000006B  64 20 28 23 35 2e 35 2e  31 29 0d 0a             d (#5.5\. 1).. 
```

请注意，EHLO 命令分为两段。

现在我们用 blat 录制了一个会话：

```
00000000  32 32 30 20 2a 2a 2a 2a  2a 2a 2a 2a 2a 2a 2a 2a 220 **** ********
00000010  2a 2a 2a 2a 2a 2a 2a 2a  2a 2a 2a 2a 2a 2a 2a 2a ******** ********
00000020  2a 0d 0a                                         *..
00000000  45 48 4c 4f 20 73 72 76  2d 66 70 73 2d 30 32 0d EHLO srv -fps-02.
00000010  0a                                               .
00000023  32 35 30 2d 72 65 6c 61  79 2e 6d 65 64 69 61 6e 250-rela y.median
00000033  65 74 2d 77 6f 72 6c 64  2e 64 65 0d 0a 32 35 30 et-world .de..250
00000043  2d 50 49 50 45 4c 49 4e  49 4e 47 0d 0a 32 35 30 -PIPELIN ING..250
00000053  20 38 42 49 54 4d 49 4d  45 0d 0a                 8BITMIM E.. 
```

如您所见，EHLO 不在包边界上，因此服务器回复 250-...

我们尝试了另一台邮件服务器来查看邮件服务器接收功能是否可能损坏，但另一台服务器表现出相同的行为。

我们现在已经意识到另一个 JavaMail 应用程序能够通过完全相同的邮件服务器发送邮件。乍一看，代码没有区别，但另一个应用程序使用的是 JavaMail 1.3，而失败的应用程序使用的是 JavaMail 1.4（取自 Geronimo 1.4 -1.7.1）。

任何想法，为什么数据包分割对邮件服务器有影响？在我看来，与 TCP 通信时，我不应该关心 IP 数据包分段。

任何帮助表示赞赏，在此先感谢！

托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:26:02.777

我们能够解决这个问题，主要原因是 geronimo 库。应该更好地检查 Maven 中心 :-(

我们现在已经切换到 javax.mail.mail:1.4，这解决了这个问题。

作为记录：

通信失败使用：

```
 <dependency>
            <groupId>org.apache.geronimo.specs</groupId>
            <artifactId>geronimo-activation_1.1_spec</artifactId>
            <version>1.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.geronimo.specs</groupId>
            <artifactId>geronimo-javamail_1.4_spec</artifactId>
            <version>1.7.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.geronimo.javamail</groupId>
            <artifactId>geronimo-javamail_1.4_provider</artifactId>
            <version>1.8.3</version>
        </dependency> 
```

通信使用：

```
<dependencies>
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4</version>
    </dependency>
</dependencies> 
```

感谢您抽出宝贵的时间，也许这会在将来对其他人有所帮助。至少我可以告诉自己我的时间得到了很好的投资:-)

最好的祝福，

托马斯

# apache-flex - flex textinput自定义上下文菜单不起作用

> ID：15566593
> 
> 赞同：0
> 
> 时间：2013-03-22T09:16:10.720
> 
> 标签：apache-flex, contextmenu, textinput

我定义了上下文菜单，并将其添加到按钮、标签和文本输入中，但是当我右键单击文本输入组件时，它不能正常工作。但是对于按钮，它可以工作。

在 textinput 中，它就像默认的上下文菜单覆盖我的。我应该怎么做才能显示我的菜单？

```
var myContextMenu:ContextMenu=new ContextMenu();
myContextMenu.hideBuiltInItems();
myContextMenu.clipboardMenu=false;

var myContextMenuItem:ContextMenuItem=new ContextMenuItem("tt");
myContextMenu.customItems=myContextMenu.customItems.concat(myContextMenuItem); 
```

如何防止文本输入焦点，停止选择操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:03:31.773

在 flex 4.6 spark TextInput 中使用属性 textDisplay 像：

```
var myContextMenu:ContextMenu=new ContextMenu();
myContextMenu.hideBuiltInItems();
myContextMenu.clipboardMenu=false;

var myContextMenuItem:ContextMenuItem=new ContextMenuItem("tt");
myContextMenu.customItems=myContextMenu.customItems.concat(myContextMenuItem);
RichEditableText(myInput.textDisplay).contextMenu = myContextMenu; 
```

# c# - System.Printing.PrintQueueException：PrintTicket 提供程序无法绑定到打印机。Win32 错误：访问被拒绝

> ID：15566594
> 
> 赞同：0
> 
> 时间：2013-03-22T09:16:12.393
> 
> 标签：c#, gembox-document

我有一个要打印 Word 文档的应用程序。我正在使用第三方 GemBox 软件，并且在我的开发环境中此代码有效；

```
public void OutputLetter(string outputFile, string placeholder, string newText)
{
    using (var document = DocX.Load(this.InputFile))
    {
        document.ReplaceText(placeholder, newText);
        document.SaveAs(outputFile);
    }

    this.PrintDocument(outputFile);
}

private void PrintDocument(string outputFile)
{
    var document = DocumentModel.Load(outputFile, LoadOptions.DocxDefault);
    document.Print(AppSettings.PrinterName);
} 
```

AppSettings.PrinterName 是存储在 web.config 中的打印机的名称。一旦我部署它，我就会在线得到这个错误；“document.Print(AppSettings.PrinterName);”

```
System.Printing.PrintQueueException: PrintTicket provider failed to bind to printer. Win32 error: Access is denied. 
```

在我得到的事件查看器上；

```
The machine-default permission settings do not grant Local Activation permission for the COM Server application with CLSID 
{BA7C0D29-81CA-4901-B450-634E20BB8C34}
 and APPID 
{AA0B85DA-FDDF-4272-8D1D-FF9B966D75B0}
 to the user IIS APPPOOL\Mulalley SID (S-1-5-82-1744840036-3971326342-2272496405-1389653927-2904033151) from address LocalHost (Using LRPC). This security permission can be modified using the Component Services administrative tool. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T09:38:52.583

这看起来可能是这个问题[Microsoft bk2872151](http://support.microsoft.com/kb/2872151)

他们为用户提供了一个修复程序，对开发人员的建议解决方案是确保您没有在 64 位服务器上以 32 位模式运行（即切换到 AnyCPU）。

请注意，在 VS2013 中，即使您选择 AnyCPU，也有一个额外的复选框选择 32Bit

# jquery - MouseUp 和 DoubleClick 都使用 Backbone js 附加到单独的事件处理函数

> ID：15566597
> 
> 赞同：7
> 
> 时间：2013-03-22T09:16:20.833
> 
> 标签：jquery, backbone.js, event-handling, double-click, mouseup

我有一个图表应用程序，其中我使用 Backbone.js 在图表图像的不同“区域”上为 mouseup 和双击事件附加单独的处理程序。

我需要 mouseup 来检测用户是单击图表图像的“区域”部分的左键还是右键，并根据我正在重定向我的流程。我还需要双击以放大或最小化包含图表图像的面板。

这是问题所在。由于每次双击都会隐式调用 mouseup，因此我的最大化/最小化功能会干扰左/右键单击功能。

我尝试使用诸如超时之类的各种技术来检查单击鼠标是否跟随双击（如以下线程中所建议： [检测到双击事件时需要取消单击/鼠标事件](https://stackoverflow.com/questions/1067464/need-to-cancel-click-mouseup-events-when-double-click-event-detected/1067484#1067484)

它对我不起作用。此外，我在同一页面上有包含图表的不同视图对象，因此我在每个事件处理程序中附加了唯一 ID 以区分它们我还尝试了简单的标志设置重置方法来检测双击并在发生双击时防止 mouseup 但因为在mouseup 在双击之前发生的事件层次结构也失败了。

总而言之，请帮助！提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:35:53.763

按照[您链接的答案](https://stackoverflow.com/questions/1067464/need-to-cancel-click-mouseup-events-when-double-click-event-detected/1067484#1067484)中给出的建议，您只需对 mouseup 的回调进行去抖动并检查在给定时间段内是否发生第二次点击。

假设以这种方式定义的视图（[http://jsfiddle.net/nikoshr/4KSZx/](http://jsfiddle.net/nikoshr/4KSZx/)）

```
var V = Backbone.View.extend({
    events: {
        'mouseup button': 'onmouseup',
        'dblclick button': 'ondblclick'
    },

    onmouseup: function() {
        console.log('mouseup');
    },    
    ondblclick: function() {
        console.log('dblclick');
    }
}); 
```

您可以修改它并“取消” mouseup 事件：

```
var V = Backbone.View.extend({
    events: {
        'mouseup button': _.debounce(function(e) {
            if (this.doucleckicked) {
                this.doucleckicked = false;
            } else {
                this.onmouseup.call(this, e);
            }
        }, 300),
        'dblclick button': function(e) {
            this.doucleckicked = true;
            this.ondblclick.call(this, e);
        }
    },

    onmouseup: function() {
        console.log('mouseup');
    },    
    ondblclick: function() {
        console.log('dblclick');
    }
}); 
```

还有一个演示[http://jsfiddle.net/4KSZx/6/](http://jsfiddle.net/4KSZx/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:29:53.723

那就不要使用backbone.js的事件注册了。

通过使用 [need-to-cancel-click-mouseup-events-when-double-click-event-detected来使用jQuery事件注册](https://stackoverflow.com/questions/1067464/need-to-cancel-click-mouseup-events-when-double-click-event-detected?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:32:38.830

我不知道我是否理解你所说的，但是......试试看：

```
$(document).click(function(event) {
    // Page variables of the mouse event
    var pageX = event.pageX;
    var pageY = event.pageY;
    var someFunctions = function() {
        /*
        if(pageX == 300 && pageY == 120) {
            event.preventDefault();
            // do functions
        }
        */
    };

    // start the functions
    someFunctions();
});

$(document).dblclick(function() {
   // functions here to dblclick    
}); 
```

对不起，如果不是这个，但我试过了。

# java - 设计模式中的参与者模式？

> ID：15566598
> 
> 赞同：5
> 
> 时间：2013-03-22T09:16:23.230
> 
> 标签：java, eclipse, design-patterns, plugins

我试图找到一些关于“参与者模式”的资料和文章，但我找不到任何东西。

在查看 org.eclipse.wst.jsdt 项目的过程中，我发现它在下面提供了一些扩展点。

我想使用这些扩展点。在此之前，如果我对“参与者模式”有所了解，了解整体架构会很棒。eclipse 源码中有很多 *Participant 类。（例如ValidationParticipant、SearchParticipant 等）你能帮我吗？

[http://wiki.eclipse.org/JSDT#Extension_Points](http://wiki.eclipse.org/JSDT#Extension_Points)

> JSDT 功能是可嵌入的。这意味着，例如，JavaScript 编辑功能可以嵌入到 HTML 和 JSP 编辑器中，包括脚本标记和脚本属性值。JSDT 很灵活，因此可以使用为 WTP 3.1 计划的翻译器接口支持其他语言的脚本。
> 
> 支持以下 JSDT 扩展点：
> 
> *   全局作用域变量初始化器
> *   全局范围容器初始化器核心
> *   代码格式化程序
> *   验证参与者
> 
> 将支持以下 jsdt.ui 扩展点：
> 
> *   全局范围容器初始化器 ui（向导、内容辅助图像和类型/文本命名）
> *   javascript元素过滤器
> *   javaScriptEditorTextHovers
> *   jsdocCompletionProcessor
> *   快速修复处理器
> *   快速辅助处理器
> *   折叠结构提供者
> *   查询参与者
> *   javaScriptCompletionProposalComputer
> *   javaScriptCompletionProposalSorters

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:54:20.263

从[SearchEngine](http://www.cs.utep.edu/cheon/download/jml4c/javadocs/org/eclipse/jdt/core/search/SearchEngine.html)和[SearchParticipant](http://www.cs.utep.edu/cheon/download/jml4c/javadocs/org/eclipse/jdt/core/search/SearchParticipant.html)的代码来看，它看起来像是*责任链*和*策略*模式的混合体。一方面各自`SearchParticipant`定义了自己的索引、搜索、报表等操作的逻辑，另一方面通过*参与者*`SearchEngine`链来执行组合[搜索](http://www.cs.utep.edu/cheon/download/jml4c/javadocs/org/eclipse/jdt/core/search/SearchEngine.html#search%28org.eclipse.jdt.core.search.SearchPattern,%20org.eclipse.jdt.core.search.SearchParticipant%5B%5D,%20org.eclipse.jdt.core.search.IJavaSearchScope,%20org.eclipse.jdt.core.search.SearchRequestor,%20org.eclipse.core.runtime.IProgressMonitor%29)。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:37:21.357

从我的角度来看，*Participant 类是 GoF[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)的一种变体。

一个基本插件，如您案例中的 Javascript 开发工具，提供了一个界面，参与者/其他策略可以在其中执行其他行为/算法。*

# sql - 如何查询以获取所需的数据

> ID：15566600
> 
> 赞同：0
> 
> 时间：2013-03-22T09:16:29.313
> 
> 标签：sql, group-by

下面是 mt 数据库表

```
CREATE TABLE [dbo].[mtblLog_Book](
[Logbook_Number] [int] IDENTITY(1,1) NOT NULL,
[Sno] [int] NULL,
[Vehicle_Number] [nvarchar](100) NULL,
[Vehicle_Booking_Date] [datetime] NULL,
[Time_From] [datetime] NULL,
[Time_To] [datetime] NULL,
[KM_Start] [int] NULL,
[KM_End] [int] NULL,
[Total] [int] NULL,
[Vehicle_Used_By] [varchar](100) NULL,
[Cost_Code] [nvarchar](50) NULL,
[Budget_Line] [nvarchar](50) NULL,
[Entry_Date] [datetime] NULL
) ON [PRIMARY] 
```

有重复`Cost_Code`。我需要一个查询，以便我可以获取以下格式的数据

```
CostCode1
......................
All data which belong to CostCode1
......................

CostCode2
......................
All data which belong to CostCode2
......................

CostCode3
......................
All data which belong to CostCode3
...................... 
```

继续.... 到 CostCode* *n* *

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:25:03.987

如果您想像上面显示的那样显示。thn 使用此代码

```
 protected void show()
    {
     Response.Clear();
     string sql = "select Cost_Code from mtblLog_Book";
     ds = obj.openDataset(sql, schoolCode);

     if (ds.Tables[0].Rows.Count == 0)
     {
        Response.Write("[{\"Records\":\"" + "NA" + "\"}]");
     }
     else
     {
        int i;
        string output;
        for (i = 0; i < ds.Tables[0].Rows.Count - 1; i++)
        {
        string sqlOutput ="Select * from mtblLog_Book where CostCode='"+ds.Tables[0].Rows[i][ "CostCode"].ToString()+ "';";
            Dataset dsOutPut= new Dataset;
          output = "[{\" Logbook_Number \":\"" +dsOutPut.Tables[0].Rows[i]["Logbook_Number"].ToString() + "\",\" Sno\": \"" + dsOutPut.Tables[0].Rows[i][" Sno"] + "\",\" Vehicle_Number\": \"" + dsOutPut.Tables[0].Rows[i][" Vehicle_Number"].ToString() + "\",\" Vehicle_Booking_Date\": \"" + dsOutPut.Tables[0].Rows[i][" Vehicle_Booking_Date"].ToString() + "\" }]"

            Response.Write(output);
            if (i < dsOutPut.Tables[0].Rows.Count - 1)
            {
                Response.Write("\n");
            }
        }
      }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:11:43.557

如果您使用的是 sql server 和 SSMS，您可以将其设置为将结果输出为文本并执行类似的操作

```
DECLARE @costCode NVARCHAR(50)

DECLARE cur CURSOR FOR
SELECT DISTINCT Cost_Code
FROM dbo.mtblLog_Book

OPEN cur
FETCH NEXT FROM cur INTO @costCode
WHILE @@FETCH_STATUS=0
BEGIN
    PRINT @costCode
    PRINT '......................................'
    SELECT * FROM dbo.mtblLog_Book
    WHERE Cost_Code = @costCode
    PRINT '......................................'
              PRINT ''  
END

CLOSE cur
DEALLOCATE cur 
```

然后将结果复制并粘贴到您需要的任何地方

# ios - 文件 79477bd-8433-4c41-ad1f-864996d663ae 无法打开，因为没有这样的文件

> ID：15566601
> 
> 赞同：1
> 
> 时间：2013-03-22T09:16:35.690
> 
> 标签：ios, objective-c

我有时会因为这个错误而让我的程序崩溃。

我不知道 79477bd-8433-4c41-ad1f-864996d663ae 是什么

```
self.searchBrochures = [brochuresIDs convertToFaultForClassWithThisIDs:[Image class]];

//PO(self.searchBrochures);
[self.myTableView reloadData]; //It crashes here 
```

我在以下位置设置断点：

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

**和**

```
- (NSInteger)tableView:(UITableView *)tableView
 numberOfRowsInSection:(NSInteger)section 
```

但是，仅调用 numberOfRowsInSection。cellForRowAtIndexPath 甚至没有被调用。然而事情还是崩溃了。

我想知道出了什么问题，我该如何调试？

当崩溃时它直接进入主程序，即使我对所有异常都有中断。

这是一个截图

![在此处输入图像描述](../Images/f11c5a25effb34586b8de20a8ab0f8e2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:01:57.867

我发现了问题所在。我尝试在模拟器上运行该应用程序。模拟器在同一地点崩溃，但消息更好。

模拟器说某些对象不符合某些键的键值。

结果我删除了一个属性，仍然有一个视图有一个引用出口。修复它可以解决问题。

这个错误有一个非常误导性的错误消息。

# r - 在时间戳值上绘制 (x,y) 坐标

> ID：15566602
> 
> 赞同：1
> 
> 时间：2013-03-22T09:16:37.200
> 
> 标签：r, visualization

我有带有相应时间戳值的运动数据（x，y）坐标，我需要在 R 中绘制它。`gvisMotionChart()`和其他`googleVis`产品似乎不接受时间戳值。有关可用于随时间可视化此运动数据的相关 R 包的任何想法？样本数据如下：

```
timestamp                    x    y
Feb 17, 2013 8:33:24 PM.000  724 414
Feb 17, 2013 8:34:24 PM.000  398 769
Feb 17, 2013 8:43:27 PM.000  398 769
Feb 17, 2013 8:44:15 PM.000  637 1083 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:09:45.123

尝试这个：

```
DF <- read.table(text="timestamp; x; y
Feb 17, 2013 8:33:24 PM.000; 724; 414
Feb 17, 2013 8:34:24 PM.000; 398; 769
Feb 17, 2013 8:43:27 PM.000; 398; 769
Feb 17, 2013 8:44:15 PM.000; 637; 1083",
header=TRUE,sep=";",stringsAsFactors=FALSE)

DF$timestamp <- as.numeric(strptime(DF$timestamp,
                                    "%b %d, %Y %I:%M:%S %p.000",tz="GMT"))
DF$timestamp <- DF$timestamp-min(DF$timestamp)
DF$ID <- 1

library(googleVis)
M1 <- gvisMotionChart(DF, idvar="ID", timevar="timestamp",xvar="x", yvar="y")
plot(M1) 
```

# mysql - bash mysql插入单个qoute

> ID：15566605
> 
> 赞同：2
> 
> 时间：2013-03-22T09:16:40.610
> 
> 标签：mysql, bash, insert, quote

我有时会在其中返回带有引号的 $title 。有没有合适的方法

1.  插入时保留它或
2.  只需简单地删除它，这样它就不会出现错误？

    echo "INSERT INTO $SQL_DATABASE.$SQL_TABLE SET $SQL_FILENAME_FIELD='$OUTPUTFILENAME'，title='$title'，url='$OUTPUTFILENAME'，cover='$OUTPUTFILENAME.jpg'，server='s2'，dateadd=now (), lastplayed=now()-interval 2 day, record='1000', channel='2', updated='1';" \ | mysql -h$SQL_HOST -u$SQL_USERNAME -p$SQL_PASSWORD $SQL_DATABASE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:33:51.950

要保留引号，您需要转义它们，而不是使用 $title 使用它：

```
${title//\'/\'\'} 
```

这将转变 `It's a beautiful day`为`It''s a beautiful day`.

这是完整的命令行：

```
echo "INSERT INTO $SQL_DATABASE.$SQL_TABLE SET $SQL_FILENAME_FIELD='$OUTPUTFILENAME', title='"${title//\'/\'\'}"', url='$OUTPUTFILENAME', cover='$OUTPUTFILENAME.jpg', server='s2', dateadd=now(), lastplayed=now()-interval 2 day, record='1000', channel='2', downloaded='1';" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:25:04.900

此处使用 tr 命令删除标题中的 ' 字符。

```
 title=$(echo $title | tr -d "'") 
```

要仅输出字母数字字符，-cd 选项将删除所有非字母数字字符。

```
 title=$(echo $title | tr -cd "[:alnum:]") 
```

# vba - 在 Word 2007 中制作 autoXrefs 以显示标题？

> ID：15566607
> 
> 赞同：0
> 
> 时间：2013-03-22T09:16:45.320
> 
> 标签：vba, ms-word

以下代码来自“Word Hacks: Tips & Tools for Taming Your Text”，自动将所选文本交叉引用到任何具有相同内容的标题。我一直在尝试调整它以自动交叉引用具有相同内容的图形标题，但没有成功。这个想法是，如果用户在任何文本行中选择“图 3-5”（例如在显示“更多信息，请参阅图 3-5”的段落中），代码应该查找相应的图标题和自动插入对它的交叉引用。

```
Sub MakeAutoXRef() 
    Dim sel As Selection 
    Dim rng As range 
    Dim para As Paragraph 
    Dim doc As Document 
    Dim sBookmarkName As String 
    Dim sSelectionText As String 
    Dim lSelectedParaIndex As Long 
    Set sel = Selection 
    Set doc = sel.Document 
    If sel.range.Paragraphs.Count <> 1 Then Exit Sub 
    lSelectedParaIndex = GetParagraphIndex(sel.range.Paragraphs.First) 
    sel.MoveStartWhile cset:=(Chr$(32) & Chr$(13)), Count:=sel.Characters.Count 
    sel.MoveEndWhile cset:=(Chr$(32) & Chr$(13)), Count:=-sel.Characters.Count 
    sSelectionText = sel.text 
    For Each para In doc.Paragraphs 
        Set rng = para.range 
        rng.MoveStartWhile cset:=(Chr$(32) & Chr$(13)), _ 
        Count:=rng.Characters.Count 
        rng.MoveEndWhile cset:=(Chr$(32) & Chr$(13)), _ 
        Count:=-rng.Characters.Count 
        If rng.text = sSelectionText Then 
            If Not GetParagraphIndex(para) = lSelectedParaIndex Then 
                sBookmarkName = GetOrSetXRefBookmark(para) 
                If Len(sBookmarkName) = 0 Then 
                    MsgBox "Couldn't get or set bookmark" 
                    Exit Sub 
                End If 
                sel.InsertCrossReference _ 
                referencekind:=wdContentText, _ 
                referenceItem:=doc.Bookmarks(sBookmarkName), _ 
                referencetype:=wdRefTypeBookmark, _ 
                insertashyperlink:=True 
                Exit Sub 
            Else 
                MsgBox "Can't self reference!" 
            End If 
        End If 
    Next para 
End Sub 

Function RemoveInvalidBookmarkCharsFromString(ByVal str As String) As String 
    Dim i As Integer 
    For i = 33 To 255 
        Select Case i 
        Case 33 To 47, 58 To 64, 91 To 96, 123 To 255 
            str = Replace(str, Chr(i), vbNullString) 
        End Select 
    Next i 
    RemoveInvalidBookmarkCharsFromString = str 
End Function

Function ConvertStringRefBookmarkName(ByVal str As String) As String 
    str = RemoveInvalidBookmarkCharsFromString(str) 
    str = Replace(str, Chr$(32), "_") 
    str = "_" & str 
    str = "XREF" & CStr(Int(90000 * Rnd + 10000)) & str 
    ConvertStringRefBookmarkName = str 
End Function 

Function GetParagraphIndex(para As Paragraph) As Long 
    GetParagraphIndex = _ 
    para.range.Document.range(0, para.range.End).Paragraphs.Count 
End Function 

Function GetOrSetXRefBookmark(para As Paragraph) As String 
    Dim i As Integer 
    Dim rng As range 
    Dim sBookmarkName As String 
    If para.range.Bookmarks.Count <> 0 Then 
        For i = 1 To para.range.Bookmarks.Count 
            If InStr(1, para.range.Bookmarks(i).name, "XREF") Then 
                GetOrSetXRefBookmark = para.range.Bookmarks(i).name 
                Exit Function 
            End If 
        Next i 
    End If 
    Set rng = para.range 
    rng.MoveEnd unit:=wdCharacter, Count:=-1 
    sBookmarkName = ConvertStringRefBookmarkName(rng.text) 
    para.range.Document.Bookmarks.Add _ 
    name:=sBookmarkName, _ 
    range:=rng 
    GetOrSetXRefBookmark = sBookmarkName 
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:24:46.773

所以，我希望我能明白你的意思。老实说，使用`insertCrossReference`方法有点复杂，因为它有一个缺点 - 当设置它时，它会将您捕获引用的标题的整个“名称”放入所选范围。换句话说：如果你的标题是“图 1.2\. 一月销售结果”，并且您希望“图 1.2”与标题链接，它会将您的“图 1.2”替换为长的原始标题。因此，您提出的基本思想保留了段落引用。但是，我进行了一些试验并提出以下建议： a)`MakeAutoXRef`将以下代码放入模块中，而不是子程序：

```
Sub findToReference()

Dim whatTo As Range
Set whatTo = Selection.Range

Dim whatToTxt As String
    whatToTxt = whatTo.text
Dim sBookmarkName As String

Dim rngDoc As Range
Set rngDoc = ActiveDocument.Content

With rngDoc.find
    .text = whatTo
    .Style = "Headings 1"   'place name of style here, like 'Headings 1' or something
    .Execute
End With

If rngDoc.find.Found = True Then
    'rngDoc.Select     'selection what was fount
    'found text to bookmark
    sBookmarkName = GetOrSetXRefBookmark(rngDoc)
    'copy from previous
     If Len(sBookmarkName) = 0 Then
                MsgBox "Couldn't get or set bookmark"
                Exit Sub
    End If

    whatTo.InsertCrossReference _
                referencetype:=wdRefTypeBookmark, _
                referencekind:=wdContentText, _
                referenceItem:=rngDoc.Bookmarks(sBookmarkName), _
                insertashyperlink:=True
 Else
    MsgBox "No headers matching selection found!"

End If
End Sub 
```

一些评论：我建议使用`find`查找您选择的文本并检查样式名称是否引用标题的功能。因此，您必须更改`Headings 1`为适当的样式名称。另一点是第一次出现将匹配并将引用设置为您选择的文本。

此外，您需要更改一项功能。`GetOrSetXRefBookmark`用下面的函数替换原来的函数。

```
Function GetOrSetXRefBookmark(paraRng As Range) As String
Dim i As Integer
Dim rng As Range
Dim sBookmarkName As String
   sBookmarkName = ConvertStringRefBookmarkName(paraRng.text)
   paraRng.Bookmarks.Add _
      Name:=sBookmarkName, _
      Range:=paraRng
GetOrSetXRefBookmark = sBookmarkName
End Function 
```

它适用于我的 Word 2010。提出的想法的一个缺点是每个人都会`crossreference`创建新书签的情况。但从原始代码中摆脱“段落匹配和全名复制”是我唯一的想法。所以，我希望你明白我的意思，这会有所帮助。

# mysql - MySQL sum avg of last x number of results where results can be in different columns

> ID：15566609
> 
> 赞同：1
> 
> 时间：2013-03-22T09:16:46.823
> 
> 标签：mysql, sql, sum, average

我有一个学校辩论数据库，我希望能够在其中查看每所学校在过去 5 场辩论中的平均得分。如果受过教育的学生正在主持辩论，则分数会记录在名为 hostcore 的列中，如果他们正在访问，则他们的分数会记录在访问分数中。

这是我正在使用的数据的摘录

```
CREATE TABLE schools (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255)
) DEFAULT CHARACTER SET utf8 ENGINE=InnoDB;

CREATE TABLE debates (
    debateid INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    debatedate DATE NOT NULL,
    hostid INT,
    visitid INT,
    hostscore INT,
    visitscore INT
) DEFAULT CHARACTER SET utf8 ENGINE=InnoDB; 
```

如果我做

```
SELECT debates.debateid, DATE_FORMAT(debates.debatedate,'%m-%d') AS DATE, school1.name AS HOST, school2.name AS VISITOR, debates.hostscore, debates.visitscore
FROM debates 
INNER JOIN schools as school1 ON debates.hostid=school1.id 
INNER JOIN schools as school2 ON debates.visitid=school2.id 
WHERE ((school1.id = 1 OR school2.id =1) ) AND debatedate < CURDATE()
ORDER BY debatedate DESC LIMIT 0 , 5 
```

我可以看到他们最近的 5 场辩论。

如果我执行以下操作。

```
SELECT visitid,
(
SELECT 
(
((SELECT sum(visitscore) FROM debates WHERE (visitid=1) AND debatedate < CURDATE()) + (SELECT sum(hostscore) FROM debates WHERE (hostid=1) AND debatedate < CURDATE()))
/
(SELECT COUNT(*) FROM debates WHERE ((visitid=1)or(hostid=1)) AND debatedate < CURDATE())
) 
FROM debates 
INNER JOIN schools as school1 ON debates.hostid=school1.id 
INNER JOIN schools as school2 ON debates.visitid=school2.id 
LIMIT 0,1
)
AS AVGSCORE 
FROM debates 
WHERE visitid=1 
LIMIT 0,1 
```

我可以看到他们今年每场辩论的平均得分。

但我不知道如何显示最后 5 场（整体）辩论（以下数据中 hostid=1 和 visitid =1 的平均值）

```
 ----------------------------------------------------------------------
    |DEBATEID   |DATE   |HOST       |VISITOR    |HOSTSCORE  |VISITSCORE |
    |20         |09-22  |St Luke    |St Thomas  |82         |84         |
    |16         |08-22  |St Thomas  |St Simon   |91         |88         |
    |15         |08-12  |St Luke    |St Thomas  |75         |64         |
    |11         |07-12  |St Thomas  |St Simon   |72         |64         |
    |10         |06-28  |St Luke    |St Thomas  |82         |84         |
    ---------------------------------------------------------------------- 
```

通过手动计算，这个例子中的结果应该是 79。我在这里尝试了很多东西。我认为这看起来不错，但它产生的结果与我正在寻找的结果相去甚远。我究竟做错了什么？有关测试数据，请参阅此[SQL Fiddle](http://sqlfiddle.com/#!2/88185/1)

```
SELECT sum(visitid),
(SELECT 
(
(
(SELECT sum(visitscore) FROM (SELECT visitscore FROM debates WHERE (hostid=1) AND debatedate < CURDATE() ORDER BY debatedate DESC LIMIT 0,5) as awayavgpg1)
+ 
(SELECT sum(visitscore) FROM (SELECT visitscore FROM debates WHERE (visitid=1) AND debatedate < CURDATE() ORDER BY debatedate DESC LIMIT 0,5) as awayavgpg2)
)
/
(SELECT COUNT(*) FROM (SELECT * FROM debates WHERE (hostid=1) or (visitid=1) AND debatedate < CURDATE()LIMIT 0,5) as awayavgpg3)
)
FROM debates 
LIMIT 0,1) AS AVSCORE
FROM debates 
WHERE visitid=1 
LIMIT 0,1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:31:04.103

使用 UNION 将列合并为一个：

```
SELECT AVG(score) avscore
FROM (SELECT debatedate, score
      FROM (SELECT debatedate, hostscore score
            FROM debates
            WHERE hostid = 1
            UNION
            SELECT debatedate, visitscore score
            FROM debates
            WHERE visitid = 1) x
      ORDER BY debatedate DESC
      LIMIT 5) y 
```

# quartz-scheduler - 如何使用石英在凌晨 1:00 到凌晨 5:00 之间每隔 2:30 安排一次工作

> ID：15566613
> 
> 赞同：0
> 
> 时间：2013-03-22T09:17:00.713
> 
> 标签：quartz-scheduler

我想在凌晨 1:00 到凌晨 5:00 之间每隔 2:30 安排一次作业，只使用单个 cron 表达式。有可能实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:47:16.327

我正在修改答案，请检查这个。可能这是正确的，但不确定。试试看嘛

0 30 2 1-5 * * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:28:24.067

根据我对你问题的理解。试试这个

0 150 1-5 ? * * *

有关更多信息，您可以通过以下链接获得帮助。可能这对你有帮助。

[http://sanjaal.com/java/tag/cron-expression-ever-hours/](http://sanjaal.com/java/tag/cron-expression-ever-hours/)

# c# - 网络矩阵搜索

> ID：15566614
> 
> 赞同：2
> 
> 时间：2013-03-22T09:17:02.517
> 
> 标签：c#, webmatrix

我的第一个站点在 webmatrix 中运行，`c#`具有各种基本搜索，但是我需要使用多个选项进行高级搜索。

它是一个房地产网站，所以我需要有一个搜索选项

```
1: property type(checkbox)

2: Region(dropdown),

3; Area(checkbox) 

4: min size - max size(text input). 
```

请有人指出我正确的方向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T17:23:00.893

你的尝试是有效的，我会帮你完成它。

```
if(IsPost){
var Pinsimg = "gmarker.png";    
var temp = Request["areaId"].Split(new[]{','}, StringSplitOptions.RemoveEmptyEntries).ToList();

    var parms = temp.Select((s, i) => "@" + i.ToString()).ToArray();

    var inclause = string.Join(",", parms); 

    var extraplaceholder = "@" + temp.Count();

    temp.Add(Pinsimg.ToString());

       categories = db.Query(String.Format("SELECT address, id, areaid, pinsimg FROM tblproperty WHERE areaId IN ({0}) and pinsimg = {1}", inclause, extraplaceholder), temp.ToArray());
} 
```

这对我有用。我从我最近的项目源代码中提取了它。该代码只是将您的参数捆绑为一个数组。要添加额外的占位符，首先将 temp 创建为 LIST，然后使用该`Add`方法构建一个列表。最后将其解析为数据库的数组。希望这可以帮助！！！

# python - 如何使用mysql将python代码连接到数据库

> ID：15566618
> 
> 赞同：0
> 
> 时间：2013-03-22T09:17:06.750
> 
> 标签：python

我正在使用以下代码进行连接：

```
 import MySQLdb

db = MySQLdb.connect("localhost","root","root","test" )

cursor = db.cursor()

cursor.execute("SELECT * from student")

data = cursor.fetchone()
print "Database result : %s " % data

db.close() 
```

我在运行文件时遇到以下错误：

```
Traceback (most recent call last):
File "C:/Python27/xsxs.py", line 5, in <module>
db = MySQLdb.connect("localhost","root","root","test" )
File "C:\Python27\lib\site-packages\MySQLdb\__init__.py", line 81, in Connect
return Connection(*args, **kwargs)
File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 187, in __init__
super(Connection, self).__init__(*args, **kwargs2)
OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (10061)") 
```

我该如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:21:19.477

问题似乎是您的windwos主机上没有运行mysql服务器。您要么必须安装它（[http://www.mysql.de/why-mysql/windows/](http://www.mysql.de/why-mysql/windows/)），要么必须选择另一个服务器，例如

```
db = MySQLdb.connect("my_mysql_host.mydomain.tld","root","root","test" ) 
```

而已。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:21:40.487

检查你的连接字符串：

```
db = MySQLdb.connect(host="localhost", # your host, usually localhost
                     user="username", # your username
                      passwd="Pswrd", # your password
                      db="MyDB") # name of the data base 
```

此 SO 将帮助您：

[如何在 Python 中连接到 MySQL 数据库？](https://stackoverflow.com/questions/372885/how-do-i-connect-to-a-mysql-database-in-python)

此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-03T13:30:53.730

使用 pip 安装 mysql 连接器，

```
sudo pip install mysql-connector-python 
```

连接名为 TCS 的本地数据库并从名为 student 的表中选择数据的示例代码，

```
import mysql.connector    
cnx = mysql.connector.connect(user='root', password='1234',
                              host='localhost',
                              database='TCS')

try:
   cursor = cnx.cursor()
   cursor.execute("select * from student")
   result = cursor.fetchall()
   print result
finally:
    cnx.close() 
```

# sql - SQL 素数函数

> ID：15566619
> 
> 赞同：11
> 
> 时间：2013-03-22T09:17:08.487
> 
> 标签：sql, sql-server, sql-server-2012, primes

如果我有一个数字 X 并且想说`IsPrime(X) = true/false`使用 sql-server 最好的方法是什么？

我只是导入一个素数表还是有一个算法对较小的素数相当有效？

注意：我对大于大约的数字不感兴趣。千万。

最终使用以下内容：

```
CREATE FUNCTION [dbo].[isPrime]
(
    @number INT
)
RETURNS VARCHAR(10)

BEGIN

    DECLARE @retVal VARCHAR(10) = 'TRUE';

    DECLARE @x INT = 1;
    DECLARE @y INT = 0;

    WHILE (@x <= @number )
    BEGIN

            IF (( @number % @x) = 0 )
            BEGIN
                SET @y = @y + 1;
            END

            IF (@y > 2 )
            BEGIN
                SET @retVal = 'FALSE'
                BREAK
            END

            SET @x = @x + 1

    END

    RETURN @retVal
END 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T11:51:40.907

正如你所说，你可以有一个[存储所有素数的表，最高可达 1000 万](http://www.mathematical.com/primelist1to100kk.html)。然后查找一个数字是否为素数将是微不足道的。那么问题是哪种方法会更快。我怀疑这张桌子会快得多（我没有测试过这个说法）。

### Prime Table 解决方案

*   [https://www.simple-talk.com/sql/t-sql-programming/celkos-summer-sql-stumpers-prime-numbers/](https://www.simple-talk.com/sql/t-sql-programming/celkos-summer-sql-stumpers-prime-numbers/)
    提供了一些解决方案，评论中还有更多。

*   [https://sqlserverfast.com/blog/hugo/2006/09/the-prime-number-challenge-great-waste-of-time/](https://sqlserverfast.com/blog/hugo/2006/09/the-prime-number-challenge-great-waste-of-time/)
    这里也一样。提供了一些解决方案。

### SQL 函数解决方案

**解决方案 0**

这是通过[使用 Transact-SQL 函数查找素数](http://tsqltricks.wordpress.com/2008/12/17/udf-isprime/)的一种解决方案：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
–- =============================================
–- Author:        Nicolas Verhaeghe
–- Create date: 12/14/2008
–- Description:   Determines if a given integer is a prime
/*

      SELECT dbo.IsPrime(1)

      SELECT dbo.IsPrime(9)

      SELECT dbo.IsPrime(7867)

*/
–- =============================================
CREATE FUNCTION [dbo].[isPrime]
(
      @NumberToTest int
)
RETURNS bit
AS
BEGIN
      -– Declare the return variable here
      DECLARE @IsPrime bit,
                  @Divider int

      –- To speed things up, we will only attempt dividing by odd numbers

      –- We first take care of all evens, except 2
      IF (@NumberToTest % 2 = 0 AND @NumberToTest > 2)
            SET @IsPrime = 0
      ELSE
            SET @IsPrime = 1 –- By default, declare the number a prime

      –- We then use a loop to attempt to disprove the number is a prime

      SET @Divider = 3 -– Start with the first odd superior to 1

      –- We loop up through the odds until the square root of the number to test
      –- or until we disprove the number is a prime
      WHILE (@Divider <= floor(sqrt(@NumberToTest))) AND (@IsPrime = 1)
      BEGIN

            –- Simply use a modulo
            IF @NumberToTest % @Divider = 0
                  SET @IsPrime = 0
            –- We only consider odds, therefore the step is 2
            SET @Divider = @Divider + 2
      END  

      –- Return the result of the function
      RETURN @IsPrime

END 
```

**解决方案 1**

这是另一种解决方案，[如何通过一个 select 语句查找是素数还是非素数？](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/90a58cc7-dada-476a-8d27-f744c71940e6/)其他评论中也有更多信息。

```
CREATE FUNCTION isPrime
(
    @number INT
)
RETURNS VARCHAR(10)
BEGIN
    DECLARE @prime_or_notPrime INT
    DECLARE @counter INT
    DECLARE @retVal VARCHAR(10)
    SET @retVal = 'FALSE'

    SET @prime_or_notPrime = 1
    SET @counter = 2

    WHILE (@counter <= @number/2 )
    BEGIN

        IF (( @number % @counter) = 0 )
        BEGIN
            set @prime_or_notPrime = 0
            BREAK
        END

        IF (@prime_or_notPrime = 1 )
        BEGIN
            SET @retVal = 'TRUE'
        END

        SET @counter = @counter + 1
    END
    return @retVal
END 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-30T11:41:15.827

我怀疑很多人没有发生过这种情况，但是您需要检查的是每个新数字是否可以被先前的素数整除...

```
create table prime (primeno bigint)
declare @counter bigint
set @counter = 2
while @counter < 1000000
begin
if not exists(select top 1 primeno from prime where @counter % primeno = 0 ) 
```

-- 上面，添加 AND prime < @counter / 2 等将进一步减少检查开销。

```
insert into prime select @counter
set @counter = @counter + 1
end
select * from prime order by 1 
```

懒惰的编码，但即使在像我旁边的那台缓慢的虚拟电脑上，你也会在几分钟内拥有高达一百万的一切。除非我忽略了某些东西，否则我将其设为 78,498 个（如果您不计算 1）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-22T04:13:55.420

有一种有趣的方法可以生成素数，而无需任何函数或`while`基于[序列生成](https://stackoverflow.com/a/21426929/2780791)的迭代过程 () 。基本上`2 .. @max`生成了一个序列，我们选择序列中没有其他的所有数字`current%other = 0`：

```
declare @max INT = 10000

;WITH all_numbers(n) AS
(
    SELECT 2
    UNION ALL
    SELECT n+1 FROM all_numbers WHERE n < @max
)
select all1.n as prime
from all_numbers all1
where not exists (select 1 from all_numbers all2 where all2.n < all1.n AND all1.n % all2.n = 0)
order by all1.n
-- beware, 0 means no limit. Otherwise 32767 can be the max specified
OPTION (MAXRECURSION 0) 
```

该解决方案的主要缺点是性能（例如，在 20000 之前生成所有素数大约需要 17 秒），但它更 SQLish，因为它不依赖于显式迭代块（即`while`）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-17T12:21:32.593

```
CREATE  proc prime  
@no int  
as   
declare @counter int  
set @counter =2  
begin  
while(@counter)<@no  
 begin  
 if(@no%@counter=0)  
  begin  
  select 'Not prime'  
  return  
  end  
  set @counter=@counter+1  
 end  
 select 'prime'  
 return  
end  

--exec prime 10 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-14T08:03:08.837

这个怎么样（在 PostgreSQL 上测试）：

```
SELECT Listagg (num, ',') 
         within GROUP (ORDER BY num) 
FROM   (SELECT n1.num   num, 
               SUM(CASE 
                     WHEN MOD(n1.num, n2.num) = 0 THEN 1 
                     ELSE 0 
                   END) AS cnt 
        FROM   (SELECT ROWNUM num 
                FROM   dual 
                CONNECT BY LEVEL <= 1000) n1, 
               (SELECT ROWNUM num 
                FROM   dual 
                CONNECT BY LEVEL <= 1000) n2 
        WHERE  n1.num <> 1 
               AND n2.num <> 1 
               AND n1.num >= n2.num 
        GROUP  BY n1.num) a 
WHERE  cnt = 1; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-10T09:57:36.987

```
declare @max INT = 50000
declare @all_numbers table (n int not null primary key, squareRoot decimal(10,1))
;WITH all_odds(n) AS
(
    SELECT 3
    UNION ALL
    SELECT n+2 FROM all_odds WHERE n+2 < @max
)
    INSERT INTO @all_numbers
    SELECT 2 as n, SQRT(2)
    UNION ALL
    SELECT n, SQRT(n) FROM all_odds
    OPTION (MAXRECURSION 0)

select all1.n as prime
from @all_numbers all1
where not exists (select 1 from @all_numbers all2 where all2.n <= all1.squareRoot AND all1.n % all2.n = 0)
order by all1.n 
```

这需要不到一秒的时间 50k

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-22T22:13:43.003

这是数字生成和检查素数的组合。

这是一个快速运行的素数检查器。

生成器将创建最多 10,000 个数字的列表。
@CheckNumber 可以设置为任何需要的值。

随意扩大最大生成数量以满足您的需求。

```
DECLARE @CheckNumber INT;
SET @CheckNumber = 29;

with data as (
    SELECT (ones.n + 10*tens.n + 100*hundreds.n + 1000*thousands.n ) + 1 as number
FROM (VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9)) ones(n),
     (VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9)) tens(n),
     (VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9)) hundreds(n),
     (VALUES(0),(1),(2),(3),(4),(5),(6),(7),(8),(9)) thousands(n)
)

select sub1.number1
from (
  select distinct d1.number as number1, d2.number as number2
  from data as d1 
  cross join data as d2
  where d1.number % d2.number != 0
) as sub1
group by sub1.number1
having count(sub1.number2) = max(sub1.number2)-2
and sub1.number1 = @CheckNumber
order by sub1.number1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-06T21:35:51.187

这是一个运行良好的简单脚本。根据需要调整@num：

```
declare @nonprimes table (number int) 
declare @primes table (number int) 
declare @num int = 2
declare @divisor int  = 1
while @num<10000
begin

while @divisor>1
begin
if @num % @divisor=0 
insert @nonprimes
select @num
if @@rowcount>0 goto A

set @divisor=@divisor-1

end
insert @primes
select @num
A: set @num=@num+1 
set @divisor=@num-1

end

select sum(number) from @primes 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2017-04-07T06:38:41.273

```
Create PROC prime @num int , @flag int OUTPUT
AS
   Declare @i=50
   set

   while (@i<@num)
Begin
     if @i%@num=0
     break
set
     @i=@i+1
  End
  if @i=@num
 set
    @glag=1
else
   set
      @flag=2

Declare @ans int
Exec prime 50,@flag=@ans OUTPUT
if @ans=1
print 'The number is prime'
else
print 'The number is composite' 
```

# sql - 如何获取多列的最大值（以及 datecolumn 为最大值的 stringcolumn 的值）并将其组合成一个查询？

> ID：15566630
> 
> 赞同：0
> 
> 时间：2013-03-22T09:17:39.137
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我怎样才能在 SQL 中做到这一点？

这是我的示例数据：

```
ColA   ColB   ColC   ColD   ColE
----   ----   ----   ----   ----
TR12   25     67    yey
TR11   28     99    apr     2/2/2013
TR12   78     55    apr     2/2/2013
TR12   20     35    olf     2/5/2013 
```

条件是得到ColA中某个值的ColB和ColC中的最大值。

对于 ColD 和 ColE 值，我想从具有最大 ColE 值的行中获取它们。

```
 ColA   ColB   ColC   ColD   ColE
 ----   ----   ----   ----   ----
*TR12*  25     *67*  yey
 TR11   28     99    apr     2/2/2013
 TR12   *78*   55    apr     2/2/2013
 TR12   20     35    *olf*   *2/5/2013* 
```

因此，我的预期结果是这样的：

```
ColA   ColB   ColC   ColD   ColE
----   ----   ----   ----   ----
TR12   78     67     olf    2/5/2013 
```

这就是我现在所拥有的，它可以返回列的正确最大值，但是*根据 ColE 是最大值的行返回一个字符串*呢？当我为 ColD 执行 max() 函数时，我得到的值不正确。我得到的是另一个词，而不是 ColE 最大的词。

```
SELECT 
   ColA, max(ColB) as ColB, max(ColC) as ColC,
   max(ColD) as ColD, -- this is where I got it wrong,
      this should return the string where its ColE is the maximum
   max(ColE) as ColE
FROM 
   dbo.SomeTable 
WHERE 
   ColA = 'TR12' 
```

我真的希望你能帮我解决这个问题..

感谢您的快速回复..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:44:39.793

你做得很好；尽管继续。max() 聚合函数适用于字符串和数字。

# email - 电子邮件中的不同内容类型

> ID：15566632
> 
> 赞同：2
> 
> 时间：2013-03-22T09:17:55.100
> 
> 标签：email, mime-types, content-type, html-email

我正在查看发送给我的一些电子邮件的来源，并注意到其中一封电子邮件的文本部分的内容类型与 HTML 部分不同 - 见下文。

```
--_----------=_MCPart_1153762294
Content-Type: text/plain; charset="us-ascii";

--_----------=_MCPart_1153762294
Content-Type: text/html; charset="utf-8"
Content-Transfer-Encoding: quoted-printable 
```

我想知道这样可以吗？该电子邮件是通过 MailChimp 服务器从 Monkey Wrench 发送的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:10:10.457

查看完整的标题和正文对于完全回答您的问题是必要的，但鉴于我们所拥有的： **是的，可以拥有这个。** 大概消息本身是`multipart`，这些是消息正文中两个部分的片段。

编辑：这是我无耻窃取的更完整的消息（来自：[Send Html page As Email using "mutt"](https://stackoverflow.com/questions/6805783/send-html-page-as-email-using-mutt)）。它包括你提到的所有部分，如果有点简单，它是完全合法的：

```
Subject: test html mail
From: sender@example.com
To: recipient@example.com
Content-Type: multipart/alternative; boundary=bcaec520ea5d6918e204a8cea3b4

--bcaec520ea5d6918e204a8cea3b4
Content-Type: text/plain; charset=ISO-8859-1

*hi!*

--bcaec520ea5d6918e204a8cea3b4
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<p><b>hi!</b></p>

--bcaec520ea5d6918e204a8cea3b4-- 
```

# ios - UITableView 选定的行加载新视图携带变量

> ID：15566634
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:17:57.850
> 
> 标签：ios, objective-c, xcode, xcode4.5

我的 ViewController1 上有一个 UITableView。选择后它会加载 ViewController2，携带一个**变量（我声明为“passedData”）** ，该变量也包含所选行的名称。在测试代​​码的可行性时，我将“passedData”分配给 ViewController2 上的标签，如下所示：

```
label.text = "passedData"; 
```

它工作得很好。ViewController1 中我的表视图中的列表具有从具有临时命名约定的数组加载的行：摘要、报告、详细信息等。

因此，想法是选择“摘要”时，它将加载ViewController2，然后加载与SumberViewController相关的另一个子视图。为了让 ViewController2 识别要子加载的视图控制器，我在`-(void) viewDidLoad:`

```
NSString *viewtoload = passedData;
    if (viewtoload == "Summary") {
        //Load summaryViewController
    }
    elseif (viewtoload == "Report") {
        //Load reportViewController
    }
    elseif (viewtoload == "Detail") {
        //Load detailViewController
    } 
```

我收到了这个错误：

```
1\. Implicit conversion of a non-objective-C pointer type 'char *' to 'NSString *' is disallowed with ARC.
2\. Result of comparison against a string literal is unspecified (use strncmp instead)
3\. Comparison of distinct pointer types ('NSString *' and 'char *') 
```

我的问题是：

1）这是一种正确的方法还是有更好的方法？

2）我如何解决上面遇到的这个错误？

3) 加载另一个子视图的语法是什么？

我提前感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:24:17.927

如果你想根据点击的单元格加载不同的视图控制器，你应该在你的

```
//handle selections of cell in specified row and section of table view
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //switch row
    switch(indexPath.row)
    {

        case:0
        {
            //Detail row
            Detail01 *viewController = [[Detail01 alloc] init];
            viewController.somePassedInData = theDataToPass;
            [self presentViewController:viewController animated:YES completion:nil];
            break;
        }
        case:1
        {
            //Report row
            Report01 *viewController = [[Report01 alloc] init];
            viewController.somePassedInData = theDataToPass;
            [self presentViewController:viewController animated:YES completion:nil];
            break;
        }
        case:2
        {
            //Summary row
            //Alloc and init VC here
            Summary01 *viewController = [[Summary01 alloc] init];
            viewController.somePassedInData = theDataToPass;
            [self presentViewController:viewController animated:YES completion:nil];
            break;
        }
        default:
        {
            break;
        }
    }

    //deselect table cell
    [_tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

然后，您可以在推送到导航控制器之前在 VC 中设置任何属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:21:25.667

使用正确的objective-c字符串文字`@""`而不是`""`

# html - 我应该如何在 HTML5 中标记度量单位？（厘米、克等）

> ID：15566636
> 
> 赞同：11
> 
> 时间：2013-03-22T09:18:05.003
> 
> 标签：html, accessibility, semantic-markup, units-of-measurement

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:55:26.053

我非常喜欢您使用`abbr`标签添加上下文信息和提高可访问性的第三种方法。这是个好主意。

但是，您的任何标记都不完全符合国际单位制的规则。请参阅[http://en.wikipedia.org/wiki/International_System_of_Units](http://en.wikipedia.org/wiki/International_System_of_Units)

您必须用一个空格字符分隔值和单位。

```
 <td>3.8&nbsp;<abbr title="Grams">g</abbr></td> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T20:05:17.690

使用`em`单位/值是不正确的（通常；当然，在某些情况下它可能是合适的，但不是一般情况下）。[`em`元素](http://www.w3.org/TR/html5/text-level-semantics.html#the-em-element)“表示其内容的重音强调”（“重音强调的位置改变了句子的含义。”）。

使用单元的[`abbr`元素](http://www.w3.org/TR/html5/text-level-semantics.html#the-abbr-element)是正确的（可能对各种用例有用）。

在您小时候使用的示例`table`中`td`。这不是有效的标记。如果您只有这样的名称-值对，您可以使用[`dl`](http://www.w3.org/TR/html5/grouping-content.html#the-dl-element)：

```
<dl>
  <dt>Brain weight</dt>
  <dd>3.8&nbsp;<abbr title="grams">g</abbr></dd>
</dl> 
```

* * *

有一个[测量微格式](http://microformats.org/wiki/measure)的草案。

* * *

在 WHATWG 版本的 HTML（“生活标准”）中，您可以找到一个[`data`元素](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-data-element). 一段时间以来，它也是 W3C HTML5 草案的一部分，但已被删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T10:52:02.650

HTML 中的度量单位或数字没有标记，因此如果您需要对它们进行一些标记（例如，为了统一样式或使用客户端脚本处理它们），请使用具有属性的`span`元素`class`对于数字或单位或两者，例如

```
<td><span class=number>3.8</span> <span class=unit>g</span></td> 
```

（请注意，按照国际标准，数字和单位应由空格分隔`&nbsp;`，如果需要，可以是不间断空格）。

通常，单位不需要标记。或者更确切地说，没有我们可以将标记用于有用的目的，而`span`仅仅为了好玩而编写标记会使 HTML 代码的可读性降低。

然而，在某些解释中，单位符号是缩写，因此`abbr`可以使用标记。请注意，在大多数浏览器中，默认情况下这会导致（下边框）下方出现虚线，这是一个非常令人讨厌的功能；要删除它，请`abbr { border: none }`在 CSS 中设置。本质上，单位符号是常规符号而不是缩写。

使用`title`属性 on `span`、`abbr`或其他元素，可使某些辅助软件在用户请求时显示属性值。它还倾向于使其显示在常见浏览器的工具提示中。值得怀疑的是，这些“提示”是否有用，而不仅仅是干扰众所周知的符号。

使用`em`将意味着原则上的强调，这很难被挪用，并且会导致在实践中使用斜体。按照国际标准，单位符号不得斜体。尽管您可以使用 CSS 删除斜体，但使用会导致斜体的标记会很奇怪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:46:26.443

```
<abbr title="Grams">g</abbr> 
```

为之前对这个问题的错误理解道歉……在 html5 之前，我使用了一个有意义的 id/class 之前的正确答案。为上述问题定义自己的标签没有任何好处。

谢谢大家纠正我。

# gate - 为什么 Minipar in Gate 永远运行？

> ID：15566638
> 
> 赞同：0
> 
> 时间：2013-03-22T09:18:11.513
> 
> 标签：gate

我使用的是 Win7 x64 系统。我将 MiniparBinaryFile 指向 gate/plugin/parser-minipar 中的 exe 文件，并将 MiniparDataDir 指向提取的 minipar-0.5-windows32 下的数据文件夹。

Gate 启动以运行 minipar，但启动后没有更多活动。我必须杀死 minipar-windows32.exe 进程。

什么是正确的使用方法？

干杯

马特

- - 更新 - -

感谢 Ian 的建议，这是 VisualVM 转储的一部分，希望它是正确的部分：

```
 "ApplicationViewer1" prio=2 tid=0x000000000c0ad000 nid=0x1fb8 runnable [0x000000000f39e000]
   java.lang.Thread.State: RUNNABLE
    at java.io.FileInputStream.readBytes(Native Method)
    at java.io.FileInputStream.read(Unknown Source)
    at sun.nio.cs.StreamDecoder.readBytes(Unknown Source)
    at sun.nio.cs.StreamDecoder.implRead(Unknown Source)
    at sun.nio.cs.StreamDecoder.read(Unknown Source)
    - locked  (a java.io.InputStreamReader)
    at java.io.InputStreamReader.read(Unknown Source)
    at java.io.BufferedReader.fill(Unknown Source)
    at java.io.BufferedReader.read(Unknown Source)
    - locked  (a java.io.InputStreamReader)
    at gate.util.BomStrippingInputStreamReader.stripBomIfPresent(BomStrippingInputStreamReader.java:93)
    at gate.util.BomStrippingInputStreamReader.(BomStrippingInputStreamReader.java:78)
    at gate.util.BomStrippingInputStreamReader.(BomStrippingInputStreamReader.java:45)
    at minipar.Minipar.runMinipar(Minipar.java:276)
    at minipar.Minipar.execute(Minipar.java:518)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.creole.ConditionalSerialController.runComponent(ConditionalSerialController.java:154)
    at gate.creole.SerialController.executeImpl(SerialController.java:153)
    at gate.creole.ConditionalSerialAnalyserController.executeImpl(ConditionalSerialAnalyserController.java:129)
    at gate.creole.AbstractController.execute(AbstractController.java:75)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.gui.SerialControllerEditor$RunAction$1.run(SerialControllerEditor.java:1619)
    at java.lang.Thread.run(Unknown Source)

   Locked ownable synchronizers:
    - None 
```

=====更新2======

感谢积极的开发协会，我在几个小时内安装了新版本（快照 4586）。

现在它起作用了！

但是，我遇到了另一个小问题。Gate 在处理以下句子时报告错误“Batten 病（也称为 Spielmeyer-Vogt-Sjögren-Batten 病）是一种罕见的、致命的常染色体隐性遗传神经退行性疾病，始于儿童时期。” （维基文章）在注释视图中，我看到 minipar 注释了句子，直到出现非注释字符 ö。那么，有没有办法跳过这些？

在消息选项卡中，它报告：

```
 gate.util.InvalidOffsetException
    at gate.annotation.AnnotationSetImpl.getNodes(AnnotationSetImpl.java:773)
    at gate.annotation.AnnotationSetImpl.add(AnnotationSetImpl.java:802)
    at minipar.Minipar.runMinipar(Minipar.java:419)
    at minipar.Minipar.execute(Minipar.java:527)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.creole.ConditionalSerialController.runComponent(ConditionalSerialController.java:154)
    at gate.creole.SerialController.executeImpl(SerialController.java:153)
    at gate.creole.ConditionalSerialAnalyserController.executeImpl(ConditionalSerialAnalyserController.java:129)
    at gate.creole.AbstractController.execute(AbstractController.java:75)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.gui.SerialControllerEditor$RunAction$1.run(SerialControllerEditor.java:1619)
    at java.lang.Thread.run(Unknown Source)
gate.creole.ExecutionException: gate.util.InvalidOffsetException
    at minipar.Minipar.runMinipar(Minipar.java:491)
    at minipar.Minipar.execute(Minipar.java:527)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.creole.ConditionalSerialController.runComponent(ConditionalSerialController.java:154)
    at gate.creole.SerialController.executeImpl(SerialController.java:153)
    at gate.creole.ConditionalSerialAnalyserController.executeImpl(ConditionalSerialAnalyserController.java:129)
    at gate.creole.AbstractController.execute(AbstractController.java:75)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.gui.SerialControllerEditor$RunAction$1.run(SerialControllerEditor.java:1619)
    at java.lang.Thread.run(Unknown Source)
Caused by: gate.util.InvalidOffsetException
    at gate.annotation.AnnotationSetImpl.getNodes(AnnotationSetImpl.java:773)
    at gate.annotation.AnnotationSetImpl.add(AnnotationSetImpl.java:802)
    at minipar.Minipar.runMinipar(Minipar.java:419)
    ... 9 more
gate.creole.ExecutionException: Document doesn't have sentence annotations. please run tokenizer, sentence splitter and then Minipar
    at minipar.Minipar.saveGateSentences(Minipar.java:194)
    at minipar.Minipar.execute(Minipar.java:525)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.creole.ConditionalSerialController.runComponent(ConditionalSerialController.java:154)
    at gate.creole.SerialController.executeImpl(SerialController.java:153)
    at gate.creole.ConditionalSerialAnalyserController.executeImpl(ConditionalSerialAnalyserController.java:129)
    at gate.creole.AbstractController.execute(AbstractController.java:75)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.gui.SerialControllerEditor$RunAction$1.run(SerialControllerEditor.java:1619)
    at java.lang.Thread.run(Unknown Source) 
```

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:06:25.353

这是由 Minipar 包装器 PR 中的错​​误引起的，它试图在错误的线程中从外部 minipar 进程的“错误流”中读取。这应该在 subversion（[修订版 16615](http://sourceforge.net/p/gate/code/16615/)）中修复，现在在[夜间构建](http://jenkins.gate.ac.uk/job/GATE-Nightly/)中。

# c# - 从 C# 到 SQL 的日期时间错误超出范围

> ID：15566641
> 
> 赞同：0
> 
> 时间：2013-03-22T09:18:20.600
> 
> 标签：c#, sql, datetime

我有一个 C# 窗口应用程序来填写出生日期并将数据发送到我的数据库，类型为 datetime。这是代码：

```
DateTime dateOfBirth;
try
{
    dateOfBirth = new DateTime(int.Parse(textBox54.Text), int.Parse(textBox53.Text), int.Parse(textBox52.Text));
}
catch (Exception ex)
{
    MessageBox.Show("Invalid");
    return;
} 
```

它适用于正确的日期，但是当我随机测试我的应用程序并为年份填写“234”时，语句中出现 varchar 转换超出范围错误的日期时间

```
cm.ExecuteNonQuery(); 
```

我怎么能抓住它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:25:55.073

您可以使用 DateTime.TryParseExact：

**更新：**

```
 string inputDate = int.Parse(textBox54.Text)+"-"+int.Parse(textBox53.Text)+"-"+int.Parse(textBox52.Text);
    DateTime dateOfBirth ;

    var DateFormat = new[] { "dd/MM/yyyy", "yyyy-MM-dd" };
    if (DateTime.TryParseExact(inputDate, DateFormat, CultureInfo.InvariantCulture, DateTimeStyles.None, out dateOfBirth ))
    {

       //Valid Date
      //Call DB here
    }
    else
    {

        // Invalid Date
    } 
```

# windows-8 - Proxy authentication error when connecting to Codeplex with Team Explorer

> ID：15566649
> 
> 赞同：1
> 
> 时间：2013-03-22T09:18:48.513
> 
> 标签：windows-8, visual-studio-2012

Similarly to [this question](https://stackoverflow.com/questions/1005955/connecting-to-team-foundation-server-tfs-with-proxy-authentication) I have a project on Codeplex and when I attempt to connect to the Codeplex TFS server in Visual Studio 2012 (on windows 8) I get a 407 'proxy authentication' server error.

My company does use a proxy server but I could previously connect to the Codeplex TFS server with Visual Studio 2010 on windows 7.

I have tried refreshing the start page as suggested in the linked question but this has no effect. Are there any other options to get connected to TFS?

To duplicate run VS2012 Premium in W8 click Team > Connect to Team Foundation Server, Click 'Servers...' then 'Add...', enter '[https://tfs.codeplex.com:443/tfs/TFS03](https://tfs.codeplex.com:443/tfs/TFS03)' in the first textbox then click OK. Error TF31002 popup appears.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T07:58:06.297

我刚刚在 Windows 7 下使用 VS2012 连接到我的 codeplex 项目时遇到了同样的问题。转到 Visual Studio 起始页，或进入扩展管理器以帮助设置代理身份验证没有帮助。

实际上，代理身份验证已在一天未收到我们的管理员 grrrr 通知的情况下开启。

我通过进入我的**Windows "Vault" => Manage Windows Credentials**解决了这个问题，并**删除了与 codeplex 相关的每个凭据条目**。然后我删除了 TFS 服务器并在 Visual Studio 中重新注册了它。

希望这可以帮助。

# ios - 使用和重用一些对象（UIView 的子类）

> ID：15566653
> 
> 赞同：0
> 
> 时间：2013-03-22T09:18:55.650
> 
> 标签：ios, objective-c, memory, memory-management

从记忆的角度来看，我想知道我所做的是否正确。首先，我要重用的文件是`UIViews`. 在我的`UIViewcontroller`中，我声明了一个这样的对象：

**World_1_ViewController.h ：**

```
#import "Level1.h"

@class Level1;

@interface World_1_ViewController : UIViewController <UIAccelerometerDelegate>
{
    Some things....
    Level1 * level1view;
} 
```

**World_1_ViewController.m ：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    level1view = [[Level1 alloc] init];
    [self.view addSubview:level1view];

    //Other things...
} 
```

您可以在方法中看到它是第一次在`UIViewController` `World_1_ViewController`打开时初始化`viewDidLoad`。

现在我需要重新使用这个对象，`level1view`所以在我之后的一个方法中，我使用：

```
[level1view release];
level1view = [[Level1 alloc] init];
[self.view addSubview:level1view];
//Some methods... 
```

从记忆的角度来看是正确的吗？或者我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:27:26.447

```
[level1view release];
level1view = [[Level1 alloc] init];
[self.view addSubview:level1view];
Some methods... 
```

在该代码中，您还应该从 superView 中删除当前视图，就像这样

```
[level1view removeFromSuperview];
[level1view release];
level1view = [[Level1 alloc] init];
[self.view addSubview:level1view];
Some methods... 
```

你也应该在`dealloc`和`didReciveMemoryWarning`方法中释放level1view，并将其设置为`nil`

**更新：**

```
- (void)dealloc
{
   [level1view release];
   [super dealloc];
}

- (void)didReciveMemoryWarning
{
    [super didReciveMemoryWarning];
    if (!self.isViewLoaded) {
        [level1view release];
         level1view = nil;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:25:08.350

如果您没有参数更改并且只想多次查看相同的视图，那么只需分配一次，如下所示

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    if(level1view==nil)
         level1view = [[Level1 alloc] init];
    [self.view addSubview:level1view];

    Other things...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:35:43.300

使用单例方法创建实例来处理这样的内存使用

```
 static Level1 *_sharedMySingleton;

  @implementation Level1

  +(Level1 *) getLevel1Instance
    {
        @synchronized([Level1 class])
        {
            if (!_sharedMySingleton)
            {
                _sharedMySingleton = [[self alloc] init];

            }
            return _sharedMySingleton;
        }
        return nil;
    }
@end 
```

在创建实例时替换这个

```
level1view = [[Level1 alloc] init];
[self.view addSubview:level1view]; 
```

和

```
 level1view = [level1view removeFromSuperview];
level1view = [Level1 getLevel1Instance];
[self.view addSubview:level1view]; 
```

像这样试试。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-22T09:44:26.510

我认为您需要声明这样的财产。

```
@interface World_1_ViewController : UIViewController <UIAccelerometerDelegate>
{
    Some things....
    Level1 * level1view;
}

@property (nonatomic,strong) Level1 * level1view; 
```

并且还使用“自我”。或“_”通过 setter 或 getter 访问变量。

如果你想检查对象是否被释放，你可以检查“retainCount”来使用“-（NSUInteger）retainCount”这样的。

```
printf("%d\n", [_level1view retainCount]); 
```

当 retainCount 为 0 时，该对象必须被释放。

# html - if div:target 改变另一个 div 的 css

> ID：15566655
> 
> 赞同：3
> 
> 时间：2013-03-22T09:19:04.190
> 
> 标签：html, css

我正在尝试构建响应式移动优先导航，尝试自学渐进增强。

我想要做的是通过单击菜单图标来定位我的#header，从而将我的#menu 设置为100% 的高度。基本上使它在单击图标时显示。

我尝试了以下方法：

```
#header:target #menu {
      height:100%;
} 
```

没有工作。如果#header 是目标，有人对如何更改#menu 高度有任何建议吗？

[jsFiddle](http://jsfiddle.net/XUC4B/)

*编辑：由于我正在使用渐进增强构建此导航，因此我不想使用任何 Jquery 或 JavaScript。关键是在添加下一级用户体验之前使其与所有设备兼容。所以它需要在没有 jQuery/JavaScript 的情况下工作*

```
<body id="home">

    <div class="wrapper">

        <header id="header">

            <h1 class="logo"><a href="">Nav</a></h1>
            <a href="#header"> <div id="nav_btn"> </div> </a>

        </header>

        <nav id="primary_nav">

            <ul id="menu">
                <li><a href="">Portfolio</a></li>           
                <li><a href="">About Me</a></li>            
                <li><a href="">Nonsense</a></li>            
                <li><a href="">Services</a></li>            
                <li><a href="">Contact</a></li>                     
            </ul>

        </nav><!--end primary_nav-->

    </div><!--end wrapper-->

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:27:12.927

`#menu`不是的*后代*，`#header`因此您不能简单地使用后代选择器。

它是下一个兄弟姐妹的孩子`#header`

```
header#header:target + nav#primary_nav > ul#menu { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:29:36.597

将`href`按钮的`#home`

所以以下

```
<a href="#header"> <div id="nav_btn"> </div> </a> 
```

变成

```
<a href="#home"> <div id="nav_btn"> </div> </a> 
```

并使用这个 CSS

```
#home:target #menu {
      height:100%;
} 
```

[例子](http://jsfiddle.net/axrwkr/6GHM9)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:28:25.130

是的，我们可以做，但不是您尝试的方式，

这是示例

```
http://jsfiddle.net/MarmeeK/svu5z/2/ 
```

选择器将像这样工作

```
#div2{height:100px;width:100px;background:red}//original color is red
#link1:hover ~ #div2{background:green} on link hover div color become green 
```

我相信这也适用于身高:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:29:05.433

你`#menu`不是 的直接孩子`#header`，所以你应该改变这个：

**HTML**

```
<a href="#menu"><div id="nav_btn"> </div></a> 
```

**CSS**

```
#menu:target {
  height: 100%;
} 
```

[工作示例](http://jsfiddle.net/XUC4B/2/)

# android - Divide a circle dynamically in android

> ID：15566660
> 
> 赞同：1
> 
> 时间：2013-03-22T09:19:15.343
> 
> 标签：android, custom-controls

I am working in an android application and I have a List of stings. If the List of string contains 3 string, I have to divide the circle into 3 equal parts and bind the three string in the divided area of the circle. How can I do this. Which widget should I use to make this circle. Please hel![enter image description here](../Images/17a1413b64575d0f317d1f591c293694.png)p me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T12:02:45.297

这只是一个样本。您需要根据自己的需要进行修改。由于您要求提供示例，因此我已粘贴以下代码。

[http://developer.android.com/training/custom-views/custom-drawing.html](http://developer.android.com/training/custom-views/custom-drawing.html)。关于绘图的文档。链接末尾有一个示例

使用 achartengine 很容易。[http://www.achartengine.org/](http://www.achartengine.org/)

对于使用 achartengine 的饼图。[http://wptrafficanalyzer.in/blog/android-drawing-pie-chart-using-achartengine/](http://wptrafficanalyzer.in/blog/android-drawing-pie-chart-using-achartengine/)。

要绘制视图，您可以使用以下示例。

```
 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    MyView mv= new MyView(this);
    setContentView(mv);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
class MyView extends View
{
    Context c;
      private Bitmap  mBitmap;
        private Canvas  mCanvas;
        private Path    mPath;
        private Paint   mBitmapPaint;
        private Paint mpaint,paint2;

    public MyView(Context context) {
        super(context);
        c= context;
        mpaint= new Paint();
        mpaint.setColor(Color.RED);
        mpaint.setStyle(Paint.Style.FILL);
        paint2 = new Paint();
        paint2.setColor(Color.GREEN);
        paint2.setStrokeWidth(10);
            mBitmapPaint = new Paint();
            mBitmapPaint.setColor(Color.RED);
        // TODO Auto-generated constructor stub
    }
      @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
            mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
        }

        @Override
        protected void onDraw(Canvas canvas) {
             Display display = ( (Activity) c).getWindowManager().getDefaultDisplay();  
            float w = display.getWidth(); 
            float h = display.getHeight();
           canvas.drawCircle(w/2, h/2, 350, mpaint);
           canvas.drawLine(w/2, h/2, 20, h/2, paint2);

        }
}
} 
```

您可以使用 canvas.drawText(text, x, y, paint) 绘制文本。根据您的需要进行相同的修改。在视图上添加动画。

![在此处输入图像描述](../Images/d1e83caffc78acf500281d8727ffd966.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:25:35.513

您可以使用[AChartEngine](http://www.achartengine.org/)来完成此操作。它有非常强大的方法来绘制饼图。

![在此处输入图像描述](../Images/0e6cca9ca8bbdf0c0088ce3ebc1f9212.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:18:25.973

```
public class Demo extends Activity {
    /** Called when the activity is first created. */
    float values[]={300,400,100,500};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        LinearLayout linear=(LinearLayout) findViewById(R.id.linear);
        values=calculateData(values);
        linear.addView(new MyGraphview(this,values));

    }
    private float[] calculateData(float[] data) {
        // TODO Auto-generated method stub
        float total=0;
        for(int i=0;i<data.length;i++)
        {
            total+=data[i];
        }
        for(int i=0;i<data.length;i++)
        {
        data[i]=360*(data[i]/total);            
        }
        return data;

    }
    public class MyGraphview extends View
    {
        private Paint paint=new Paint(Paint.ANTI_ALIAS_FLAG);
        private float[] value_degree;
        private int[] COLORS={Color.BLUE,Color.GREEN,Color.GRAY,Color.CYAN,Color.RED};
        RectF rectf = new RectF (10, 10, 200, 200);
        int temp=0;
        public MyGraphview(Context context, float[] values) {

            super(context);
            value_degree=new float[values.length];
            for(int i=0;i<values.length;i++)
            {
                value_degree[i]=values[i];
            }
        }
        @Override
        protected void onDraw(Canvas canvas) {
            // TODO Auto-generated method stub
            super.onDraw(canvas);

            for (int i = 0; i < value_degree.length; i++) {//values2.length; i++) {
                if (i == 0) {
                    paint.setColor(COLORS[i]);
                    canvas.drawArc(rectf, 0, value_degree[i], true, paint);
                } 
                else
                {
                        temp += (int) value_degree[i - 1];
                        paint.setColor(COLORS[i]);
                        canvas.drawArc(rectf, temp, value_degree[i], true, paint);
                }
            }
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-23T13:46:07.380

您可以创建一个自定义视图，并在其中绘制一个圆圈并使用绘制线划分任何部分。

在您的 onDraw() 方法中使用此代码。

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    this.canvas = canvas;

    int width = getWidth(); // get center point of view.
    // Draw circle
    Paint mPaintCircle = new Paint();
    mPaintCircle.setColor(Color.WHITE);
    mPaintCircle.setAntiAlias(true);
    mPaintCircle.setStyle(Paint.Style.STROKE);
    mPaintCircle.setStrokeWidth(5);

    canvas.drawCircle(width / 2, width / 2, width / 2, mPaintCircle);
    // Draw line
    Paint mPaintLine = new Paint();
    mPaintLine.setColor(Color.GREEN);
    mPaintLine.setStrokeWidth(5);

    //number of section you want to divide.
    int pointsTODraw = 8; 
    float pointAngle = 360 / pointsTODraw; //angle between points
    for (float angle = 0; angle < 360; angle = angle + pointAngle) { //move round the circle to each point
            float x = (float) (Math.cos(Math.toRadians(angle)) * radiusPart); //convert angle to radians for x and y coordinates
            float y = (float) (Math.sin(Math.toRadians(angle)) * radiusPart);
            canvas.drawLine(radiusPart, radiusPart, x + radiusPart, y + radiusPart, mPaintLine);
    }
} 
```

# java - Not able to read XML file

> ID：15566662
> 
> 赞同：0
> 
> 时间：2013-03-22T09:19:34.630
> 
> 标签：java, xml, struts

When I am trying to read xml file from my Java code, I getting error as shown in attached image. ![enter image description here](../Images/04c499e0c0d7a00905668c1ced14c524.png)

Java code :

```
public ActionForward xmlupload(ActionMapping mapping,
            ActionForm form, HttpServletRequest request,
            HttpServletResponse response) throws IOException, ServletException {

    String target = new String("success");

    System.out.println("I AM IN ACTION");
 List<XmltodbBO> branchList = new ArrayList<XmltodbBO>();
 try {
      File file = new File("D:\\FNDWRR.xml");
      DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
      DocumentBuilder db = dbf.newDocumentBuilder();
      Document doc = db.parse(file);
      doc.getDocumentElement().normalize();
      System.out.println("Root element " + doc.getDocumentElement().getNodeName());
  NodeList nodeLst = doc.getElementsByTagName("fsg:RptLine");
      System.out.println("Root Tag value");
      XmltodbDAO sim=new XmltodbDAO();

      for (int s = 0; s < nodeLst.getLength(); s++) {
          XmltodbBO bO=new XmltodbBO();
        Node fstNode = nodeLst.item(s);

        if (fstNode.getNodeType() == Node.ELEMENT_NODE) {

               Element fstElmnt = (Element) fstNode;
          NodeList fstNmElmntLst = fstElmnt.getElementsByTagName("fsg:RptCell");
          System.out.print(fstNmElmntLst.getLength());
          Node current = fstNmElmntLst.item(0);

              if(current.getNodeType() == Node.ELEMENT_NODE){

                 String nodeName = current.getNodeName();
              Element fstNmElmnt = (Element) fstNmElmntLst.item(0);

              NodeList fstNm = fstNmElmnt.getChildNodes();
              Text itemCheckedText = (Text) fstNm.item(0);
              if (itemCheckedText != null) {
              System.out.println("Tag value : "  + ((Node) fstNm.item(0)).getNodeValue());
              bO.setFirstfieldName( fstNm.item(0).getNodeValue());

              }

              }

             if( fstNmElmntLst.getLength()>1){

               Node current1 = fstNmElmntLst.item(1);
                 if(current1.getNodeType() == Node.ELEMENT_NODE){
                 Element fstNmElmnt = (Element) fstNmElmntLst.item(1);
                 NodeList fstNm = fstNmElmnt.getChildNodes();
              Text itemCheckedText1 = (Text) fstNm.item(0);
              if (itemCheckedText1 != null) {
              System.out.println("Tag value : "  + ((Node) fstNm.item(0)).getNodeValue());
              bO.setSecondfieldName( fstNm.item(0).getNodeValue());

              }
               }

              }

             if( fstNmElmntLst.getLength()>2){

               Node current1 = fstNmElmntLst.item(2);
                 if(current1.getNodeType() == Node.ELEMENT_NODE){
                 Element fstNmElmnt = (Element) fstNmElmntLst.item(2);
                 NodeList fstNm = fstNmElmnt.getChildNodes();
              Text itemCheckedText1 = (Text) fstNm.item(0);
              if (itemCheckedText1 != null) {
              System.out.println("Tag value : "  + ((Node) fstNm.item(0)).getNodeValue());
              bO.setThirdfieldName(fstNm.item(0).getNodeValue());

              }
               }

              }
        }  branchList.add( bO); }

      sim.adddb(branchList);

              }

catch (Exception e) {
    e.printStackTrace();
  }
     return (mapping.findForward(target));
 } 
```

When I am running the same application using main class, it is working fine. But when I am trying to do the same using struts action, I am getting this error. Please help me out.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:56:47.030

尝试使用阅读器来解析和指定字符集：

```
Document document = builder.parse(new InputStreamReader(new FileInputStream(file), Charset.forName("UTF-8")); 
```

我也同意另一个答案，即您可能错误地引入了旧的/不同的 xml 解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:50:11.780

堆栈跟踪表明您正在使用 xerces 作为您的 xml 解析器（而不是作为 jre/jdk 一部分的 xml 解析器）。使用不同的 xml 解析器可能会导致各种问题。除非您是故意这样做的，否则我建议您将其删除。（如果你使用像 maven 这样的构建系统，有时你会得到对“xercesImpl”或 xml-apis“jars 的传递依赖。你应该在你的 pom 中*排除这些。）*

# java - Unable to delete & update Entity using JPA on Google App Engine

> ID：15566666
> 
> 赞同：0
> 
> 时间：2013-03-22T09:19:57.127
> 
> 标签：java, google-app-engine, jsf, primefaces

I am doing a project with JSF (Primefaces), I load data from the Google Datastore and display it on p:dataTable, with Functions for Delete and Edit. But the delete doesnt work and no error messages, while the Edit using merge inserts new record. My code below.

**JSF PAGE**

```
 <h:form id="applicationsForm">
              <p:growl id="ngrowl" sticky="true" showDetail="true"/>
              <p:dataTable id="allEventsTable" var="events" value="#`{EventsMngtBean.events}">`

                  <p:column style="text-align: left; white-space: normal; width: 90%" headerText="Event Title">
                  <h:outputText value="#{events.eventTitle}" />
              </p:column>
              <p:column style="text-align: left; white-space: normal; width: 10%" headerText="Posted">
                  <h:outputText value="#{events.eventPostDate}">
                      <f:convertDateTime type="date"  dateStyle="short" pattern="dd/MM/yyyy" />
                  </h:outputText>
              </p:column>

              <p:column style="width:4%">
                  <p:commandButton id="editButton" update=":memDetailForm" oncomplete="appDialog.show()" value="Edit" title="Edit">
                    <f:setPropertyActionListener value="#{events}" target="#{EventsMngtBean.selectedEvent}" />
                </p:commandButton>

                  <p:commandButton id="showDialogButton" value="Delete" oncomplete="confirmation.show()" ajax="true" update=":delForm:confirmDialog">
                      <f:setPropertyActionListener target="#{EventsMngtBean.selectedEvent}" value="#{events}" />
                </p:commandButton>
              </p:column>
          </p:dataTable>
      </h:form>

        <h:form id="delForm">
            <p:growl id="growl" sticky="true" showDetail="true"/>
            <p:confirmDialog id="confirmDialog" message="Are you sure to delete this event (#{EventsMngtBean.selectedEvent.eventTitle})?"
                header="Delete Event" severity="alert" widgetVar="confirmation">

            <p:commandButton id="confirm" value="Yes" update="growl" oncomplete="confirmation.hide()"
                         actionListener="#{EventsMngtBean.deleteEvent}" />
            <p:commandButton id="decline" value="No" onclick="confirmation.hide()" type="button" />
            </p:confirmDialog>
        </h:form>

        <h:form id="memDetailForm">
          <p:dialog header="Event Details!" widgetVar="appDialog" resizable="false" id="stdappDlg"
                    showEffect="fade" hideEffect="slide" modal="true">
              <p:scrollPanel mode="native" style="width: 900px; height: 550px;">
                  <p:panelGrid columns="2" id="display" style="margin:0 auto; padding: 5px;">
                  <p:column>
                      <p:outputLabel value="Event Title!" />
                  </p:column>
                  <p:column>
                      <p:inplace editor="true">
                      <p:inputText size="50" value="#{EventsMngtBean.selectedEvent.eventTitle}" />
                      </p:inplace>
                  </p:column>
                  <p:column>
                      <p:outputLabel value="Event Date!" />
                  </p:column>
                  <p:column>
                      <p:inplace editor="true">
                      <p:calendar value="#{EventsMngtBean.selectedEvent.eventDate}" />
                      </p:inplace>
                  </p:column>
                  <p:column>
                      <p:outputLabel value="Event Details!" />
                  </p:column>
                  <p:column>
                      <p:editor value="#{EventsMngtBean.selectedEvent.eventDetails.value}" />
                  </p:column>
                  <p:column>
                      <p:outputLabel value="Event Location!" />
                  </p:column>
                  <p:column>
                      <p:inplace editor="true">
                          <p:inputText size="50" value="#{EventsMngtBean.selectedEvent.eventLocation}" />
                      </p:inplace>
                  </p:column>
                  <p:column>
                      <p:outputLabel value="Posting Time!" />
                  </p:column>
                  <p:column>
                      <p:outputLabel value="#{EventsMngtBean.selectedEvent.eventPostDate}">
                          <f:convertDateTime type="date"  dateStyle="short" pattern="dd/MM/yyyy hh:mm" />
                      </p:outputLabel>
                  </p:column>

                  <p:column style="width:4%">
                  <p:commandButton id="saveButton" update=":memDetailForm" oncomplete="appDialog.show()" value="Save Changes" title="Save">
                    <f:setPropertyActionListener value="#{events}" target="#{EventsMngtBean.selectedEvent}" />
                  </p:commandButton>
                  </p:column>
              </p:panelGrid>
              </p:scrollPanel>
          </p:dialog>
        </h:form> 
```

**THE JSF BEAN**

```
/* 
```

* To change this template, choose Tools | Templates * and open the template in the editor. */

```
package com.wayah.nsa.admin.jsfbeans;

import com.google.appengine.api.datastore.Text;
import com.wayah.nsa.dbo.Event;
import com.wayah.nsa.dbo.providerimpl.EMFProvider;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.faces.application.FacesMessage;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import javax.persistence.EntityManager;
import javax.persistence.Query;

/**
 *
 * @author MUHAMMAD
 */
public class EventsMngtBean {

    private Event selectedEvent = new Event();
    private List<Event> events = new ArrayList();
    private String value;
    /** Creates a new instance of EventsMngtBean */
    public EventsMngtBean() {
    }

    public List<Event> getEvents() {
        return events;
    }

    public String getValue() {
        value = selectedEvent.getEventDetails().getValue();
        return value;
    }

    public void setValue(String value) {
        selectedEvent.setEventDetails(new Text(value));
        this.value = value;
    }

    public void setEvents(List<Event> events) {
        this.events = events;
    }

    public Event getSelectedEvent() {
        return selectedEvent;
    }

    public void setSelectedEvent(Event selectedEvent) {
        this.selectedEvent = selectedEvent;
    }

    @PostConstruct
    public void getAllEvents(){
        EntityManager em = EMFProvider.get().createEntityManager();
        Query query = em.createQuery("Select e From Events e");

        events = query.getResultList();
    }

    public void deleteEvent(ActionEvent ae){
        try{
        EntityManager em = EMFProvider.get().createEntityManager();
        System.out.println("EM: "+ em.isOpen());
        em.getTransaction().begin();
        Event ev = new Event();
        ev.setEventDate(selectedEvent.getEventDate());
        ev.setEventDetails(selectedEvent.getEventDetails());
        ev.setEventLocation(selectedEvent.getEventLocation());
        ev.setEventPostDate(selectedEvent.getEventPostDate());
        ev.setEventTitle(selectedEvent.getEventTitle());
        ev.setKey(selectedEvent.getKey());

        em.remove(ev);
        em.getTransaction().commit();
        //getAllEvents();

        FacesMessage msg = new FacesMessage("Deleted", "Event Deleted");
        FacesContext.getCurrentInstance().addMessage(null, msg);

        }catch(Exception e){
            FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Error when deleting event!", null);
            FacesContext.getCurrentInstance().addMessage(null, msg);
            e.printStackTrace();
        }
    }

    public void saveChanges(ActionEvent ae){
        try{
        EntityManager em = EMFProvider.get().createEntityManager();
        em.getTransaction().begin();

        Event ev = new Event();

        ev.setEventDate(selectedEvent.getEventDate());
        ev.setEventDetails(selectedEvent.getEventDetails());
        ev.setEventLocation(selectedEvent.getEventLocation());
        ev.setEventPostDate(new Date());
        ev.setEventTitle(selectedEvent.getEventTitle());
        ev.setKey(selectedEvent.getKey());

        em.persist(ev);
        em.getTransaction().commit();

        FacesMessage msg = new FacesMessage("Saved", "Changes Saved!");
        FacesContext.getCurrentInstance().addMessage(null, msg);

        }catch(Exception e){
            FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Error when updating event!", null);
            FacesContext.getCurrentInstance().addMessage(null, msg);
            e.printStackTrace();
        }
    }
} 
```

**THE ENTITY**

```
@Entity(name="Events")
public class Event implements Serializable {
private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Key keys;

private String eventTitle;
private Text eventDetails;
private String eventLocation;
@Temporal(javax.persistence.TemporalType.DATE)
private Date eventDate;
@Temporal(javax.persistence.TemporalType.DATE)
private Date eventPostDate;

public Key getKey() {
    return keys;
}

public void setKey(Key keys) {
    this.keys = keys;
}

public Date getEventDate() {
    return eventDate;
}

public void setEventDate(Date eventDate) {
    this.eventDate = eventDate;
}

public Text getEventDetails() {
    return eventDetails;
}

public void setEventDetails(Text eventDetails) {
    this.eventDetails = eventDetails;
}

public String getEventLocation() {
    return eventLocation;
}

public void setEventLocation(String eventLocation) {
    this.eventLocation = eventLocation;
}

public Date getEventPostDate() {
    return eventPostDate;
}

public void setEventPostDate(Date eventPostDate) {
    this.eventPostDate = eventPostDate;
}

public String getEventTitle() {
    return eventTitle;
}

public void setEventTitle(String eventTitle) {
    this.eventTitle = eventTitle;
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (keys != null ? keys.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof Event)) {
        return false;
    }
    Event other = (Event) object;
    if ((this.keys == null && other.keys != null) || (this.keys != null && !this.keys.equals(other.keys))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "com.wayah.nsa.dbo.Event[key=" + keys + "]";
} 
```

# c# - 部分视图到字符串

> ID：15566670
> 
> 赞同：0
> 
> 时间：2013-03-22T09:20:06.663
> 
> 标签：c#, html, asp.net-mvc

我想获得由 PartialView 呈现的 HTML 代码。例如

```
var partView = PartialView("myView", myModel);
string content =??; 
```

我应该用什么代替问号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:23:37.930

```
public static string RenderPartialToString(string controlName, object viewData)
    {
        ViewPage viewPage = new ViewPage() { ViewContext = new ViewContext() };

        viewPage.ViewData = new ViewDataDictionary(viewData);
        viewPage.Controls.Add(viewPage.LoadControl(controlName));

        StringBuilder sb = new StringBuilder();
        using (StringWriter sw = new StringWriter(sb))
        {
            using (HtmlTextWriter tw = new HtmlTextWriter(sw))
            {
                viewPage.RenderControl(tw);
            }
        }

        return sb.ToString();
    }
string content = RenderPartialToString("myView", myModel); 
```

# image - how do i change content based on position of mouse over an image?

> ID：15566677
> 
> 赞同：0
> 
> 时间：2013-03-22T09:20:29.297
> 
> 标签：image, maps, hover

I have a picture of Country Norway : [https://autopower.no/images/geoLocation/NO-578.png](https://autopower.no/images/geoLocation/NO-578.png)
As you can see - sort of - the image is devided into counties.

When the user hover over the county names on the left side - The image switches between 20 equal images with the corresponding county highlighted along with some information on the right side : [https://autopower.no/?Page=Dealers](https://autopower.no/?Page=Dealers)

What I would like to do, is to have the exact same thing happen (to the content on the right) when the user hover over the image itself based on which county they hovering over.

I looked into some CSS image map, but I didn't get how I could use it in my case...

Could someone help me out by giving me some tips to what I should look into? how to get started or tell me if this is not possible with what I have set up so far - if I need/should use a different approach?

*I'm familiar with jQuery to some extent.*
*Was hoping not to use Flash.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:23:47.747

您可以使用 .mouseover() 和 mouseout() jQuery 方法来完成此操作，例如：

```
$(".county").mouseover(function() {
    var elementId = "#text-" + $(this).attr("id").split("-")[1];
    $(elementId).removeClass("hidden");
});

$(".county").mouseout(function() {
    var elementId = "#text-" + $(this).attr("id").split("-")[1];
    $(elementId).addClass("hidden");
}); 
```

我已经建立了一个简单的小提琴演示这个用法：http: [//jsfiddle.net/X2u2y/](http://jsfiddle.net/X2u2y/)

jQuery API 站点上提供了完整的文档：http: [//api.jquery.com/mouseover/](http://api.jquery.com/mouseover/)

**编辑：**

我可以看到您在这里想要的是使用带有可*悬停*区域（图像地图）的单个图形。为了做到这一点，不幸的是，您必须计算出每个*可悬停*区域的坐标，并组成一个由区域组成的地图元素，格式如下：

```
<map name="parts">  
  <area shape="rect" coords="20,6,200,60" text-ref="county1">  
  <area shape="rect" coords="100,200,50" text-ref="county2">  
</map> 
```

然后，您应该能够将这些区域中的每一个链接到不同的 jQuery mouseover 事件以完成您需要的操作。我已经创建了另一个小提琴来让你开始 - 很抱歉在这方面走了很长一段路！

[http://jsfiddle.net/jcAe9/](http://jsfiddle.net/jcAe9/)

# asp.net - Sys.ParameterCountException 使用 microsoft js 扩展简单文本框控件

> ID：15566681
> 
> 赞同：1
> 
> 时间：2013-03-22T09:20:45.463
> 
> 标签：asp.net, custom-controls, javascript, jscript, microsoft-ajax

这是我尝试使用 microsoft ajax 库扩展文本框的代码

页面代码如下：

![Default.aspx 页面上的代码](../Images/2461b824363c943120945bdebdcb1773.png)

.js 文件中的代码

![.js 文件](../Images/0d54888798fa6398907cbc107534ec93.png)

调试时的错误如下

![microsoft js 文件中的 Dubug 错误](../Images/153c3962836a6045d47b03b9fbea6985.png)

我在代码中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:42:29.100

错误出现在需要在 initializeBase 方法中传递元素的类的构造函数中。请看下文。

![在此处输入图像描述](../Images/c138066ea867733a6a3c36c6e812c02f.png)

# python - 在django中删除浮点数的小数部分？

> ID：15566683
> 
> 赞同：2
> 
> 时间：2013-03-22T09:20:47.737
> 
> 标签：python, django, templates

我有一个名为`{{value.item_total }}`which is的变量`499.00`，但我想在我的模板文件中删除这个值的小数点来生成它`499`。我怎么能这样做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T09:25:21.987

[在这里](https://stackoverflow.com/questions/4565876/django-templates-convert-float-to-integer-if-it-ends-with-0)看到：

> 您可以使用带有否定参数的[floatformat 过滤器！](http://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#floatformat)

答案是：

```
{{ value.item_total|floatformat }} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-22T09:29:26.163

您必须使用内置模板标签和过滤器（[https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#get-digit](https://docs.djangoproject.com/en/1.5/ref/templates/builtins/#get-digit)）。在你的情况下使用

```
{{ value.item_total|floatformat:"0" }} 
```

就是这样。

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T09:26:44.037

```
 {{value.item_total|floatformat }} 
```

# java - Communication between Broker in a Multicast Environment using ActiveMQ and Java

> ID：15566685
> 
> 赞同：1
> 
> 时间：2013-03-22T09:20:51.877
> 
> 标签：java, activemq, multicast, broker

I can't get several Broker to communicate with each other. Everything else works as expected (including the communication between producer and consumer). But how to I manage that Broker talk to each other using multicast?

Any advice would be highly appreciated

This is my environment:

*   10 virtual hosts using ubuntu 12 with working Multicast (ping tested)
*   Java-Application using ActiveMQ on every host
*   Every Host starts a client (Java-App), and every client is able to manage some agents, which can grab some jobs from a common joblist (just running "sleep" at the moment)

These are the Broker settings

```
private String brokerUri;
private String brokerName;
private String brokerProtokol = "tcp://";;
private int    brokerPort = 9999;
private String networkConName = "Network";
private String transportConName = "Transport";
private BrokerService broker;
brokerUri = Inet4Address.getLocalHost().getHostAddress();
brokerName = Inet4Address.getLocalHost().getHostName(); 
```

and this is the code snipped which is maybe not correct:

```
public void createBroker() throws UnknownHostException, InterruptedException{
try {
broker = new BrokerService();
TransportConnector transportCon = new TransportConnector();
NetworkConnector networkCon = new NetworkConnector(new URI("multicast://default")) {
};
broker.setBrokerName(brokerName);
transportCon.setUri(new URI(brokerProtokol+brokerUri+":"+brokerPort));
transportCon.setName(transportConName);
transportCon.setDiscoveryUri(new URI("multicast://default"));
final SystemUsage systemUsage = broker.getSystemUsage();
systemUsage.getMemoryUsage().setLimit(1024 * 1024 * 2); // 2 MB
systemUsage.getTempUsage().setLimit(1024L * 1024 * 1024 * 2); // 2 GB
systemUsage.getStoreUsage().setLimit(1024L * 1024 * 1024 * 2); // 2 GB
broker.setPersistent(true);
networkCon.setDuplex(true);
//                broker.setUseJmx(true);
broker.addConnector(transportCon);
broker.addNetworkConnector(networkCon);
broker.start(); 
```

# chef-infra - 尝试通过 chef-solo 将 nginx 安装到 vagrant 中会导致“NoMethodError: undefined method `[]' for nil:NilClass”

> ID：15566688
> 
> 赞同：0
> 
> 时间：2013-03-22T09:20:54.813
> 
> 标签：chef-infra

我有一个项目目录

```
/
  VagrantFile
  /cookbooks
    /nginx
      .. 
```

在`VagrantFile`：

```
# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.configure("2") do |config|
  config.vm.box = "mediapop"
  config.vm.box_url = "http://cloud-images.ubuntu.com/precise/current/precise-server-cloudimg-vagrant-amd64-disk1.box"

  config.vm.provision :chef_solo do |chef|
    chef.add_recipe "nginx"
  end
end 
```

我运行`vagrant up`并得到：

```
$ vagrant halt && vagrant up
[default] Attempting graceful shutdown of VM...
Bringing machine 'default' up with 'virtualbox' provider...
[default] Setting the name of the VM...
[default] Clearing any previously set forwarded ports...
[default] Fixed port collision for 22 => 2222\. Now on port 2201.
[default] Creating shared folders metadata...
[default] Clearing any previously set network interfaces...
[default] Preparing network interfaces based on configuration...
[default] Forwarding ports...
[default] -- 22 => 2201 (adapter 1)
[default] Booting VM...
[default] Waiting for VM to boot. This can take a few minutes.
[default] VM booted and ready for use!
[default] Configuring and enabling network interfaces...
[default] Mounting shared folders...
[default] -- /vagrant
[default] -- /tmp/vagrant-chef-1/chef-solo-1/cookbooks
[default] Running provisioner: VagrantPlugins::Chef::Provisioner::ChefSolo...
Generating chef JSON and uploading...
Running chef-solo...
stdin: is not a tty
[2013-03-22T09:16:26+00:00] INFO: *** Chef 10.12.0 ***
[2013-03-22T09:16:27+00:00] INFO: Setting the run_list to ["recipe[nginx]"] from JSON
[2013-03-22T09:16:27+00:00] INFO: Run List is [recipe[nginx]]
[2013-03-22T09:16:27+00:00] INFO: Run List expands to [nginx]
[2013-03-22T09:16:27+00:00] INFO: Starting Chef Run for vagrant-ubuntu-quantal-64
[2013-03-22T09:16:27+00:00] INFO: Running start handlers
[2013-03-22T09:16:27+00:00] INFO: Start handlers complete.
[2013-03-22T09:16:27+00:00] ERROR: Running exception handlers
[2013-03-22T09:16:27+00:00] ERROR: Exception handlers complete
[2013-03-22T09:16:27+00:00] FATAL: Stacktrace dumped to /tmp/vagrant-chef-1/chef-stacktrace.out
[2013-03-22T09:16:27+00:00] FATAL: NoMethodError: undefined method `[]' for nil:NilClass
Chef never successfully completed! Any errors should be visible in the
output above. Please fix your recipes so that they properly complete. 
```

nginx 目录来自克隆[https://github.com/opscode-cookbooks/nginx](https://github.com/opscode-cookbooks/nginx)。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:38:50.383

问题似乎是虚拟机上不喜欢某些日志记录设置的 Chef 版本，因此我需要在节点上升级 Chef，并将 ruby​​ 升级为一个单独的问题，因为`gem install`失败了。

```
sudo apt-get update
sudo apt-get install ruby-dev
sudo gem install chef 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T14:10:50.300

我遇到了同样的问题，我正在添加一个 bash 文件来检查您是否安装了厨师的综合安装，如果没有安装它。它还不能完美地工作，但我觉得我已经很接近了，它应该可以解决你的问题。

在您致电 chef 上方的 Vagrant 文件中，取消注释此行：

`config.vm.provision :shell, :path => "bootstrapvm.sh"`

然后创建`bootstrapvm.sh`文件。这应该在您的厨师调用之前运行，它所要做的就是安装厨师的综合版本（和最新版本）。

```
#! /bin/bash
apt-get install -y curl libcurl3
if ! [ -x /usr/bin/chef-solo ] ; then
  curl -L --insecure https://www.opscode.com/chef/install.sh | sudo bash
fi 
```

**注意：**我直接从 Opscode 站点获得的 curl 命令行可能与您的系统不同。请参阅站点以获取正确的线路。

# jquery - jquery output value pass to visualforce

> ID：15566689
> 
> 赞同：4
> 
> 时间：2013-03-22T09:20:55.983
> 
> 标签：jquery, salesforce, visualforce

How to pass jquery value result into visualforce code for example:

My jquery code is

```
 $j('[id$=submit]').on("click", function(){
 var output = [], $jselects = $j(".container .row .span6 #form-details select"), i;
 for (i=0; i < $jselects.length; i += 2)
    output.push($jselects.eq(i).find("option:selected").text() +
                ":" + $jselects.eq(i+1).find("option:selected").text());
}) 
```

When i click this id, the output values are generated like b:b,s:s,a:a This values are stroed in to variable as `output`

Here my visualforce code

```
<apex:commandButton id="submit" action="{!myMethod}" value="Submit" styleClass="btn btn-primary" reRender="block">
  <apex:param name="myParam" value="output"/>
</apex:commandButton> 
```

When I press the id `submit`, get the output value from jquery and it will be set in the place of `output` in `<apex:param name="myParam" value="output"/>` this line. Here the output text are generated, but I need to know how send that value inside this `<apex>` code.

Is it possible or not...?

Appreciate for your answer...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-09T20:41:02.623

你有三个选择

1）创建带有参数的动作函数。然后调用 actionfunction 并将生成的字符串作为参数传递，就像任何其他 javascript 函数一样。

2) 使用 Javascript 远程处理。它使您可以将参数与方法调用一起传递。但它要求方法是静态的。

3）使用隐藏`<apex:hiddeninput>`字段。然后使用此输入的 javascript 设置值作为您的字符串。然后这将通过任何常规的顶点发布事件传递给控制器​​（`apex:commandButton or apex:commandLink`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T13:30:10.540

在这里，您有一个关于如何将 javascript 值传递给 apex 方法的很好的示例：

[http://blogs.developerforce.com/developer-relations/2009/10/passing-javascript-values-to-apex-controller.html](http://blogs.developerforce.com/developer-relations/2009/10/passing-javascript-values-to-apex-controller.html)

你应该使用`apex:actionFunction`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T04:28:52.017

您可以像这样使用 RemoteAction：在 javascript 中执行以下操作：

```
Visualforce.remoting.Manager.invokeAction(
   '{!$RemoteAction.yourController.yourfunction}',your_data,
           function(result, event){
              //the result of your apex code
           }
); 
```

在你的顶点这样做：

```
@RemoteAction
public static string yourfunction(String your_data) {

    // do your stuff
    return result;

} 
```

# java - AOA USB connection issue

> ID：15566694
> 
> 赞同：5
> 
> 时间：2013-03-22T09:21:09.743
> 
> 标签：java, android, usb

I have been working on making USB connection specified in the link [here](http://code.google.com/p/usb-serial-for-android/) and successfully implemented it. Its working fine accept it is frequently getting disconnected. I got to know from [this](http://code.google.com/p/android/issues/detail?id=25703) link and [this](https://stackoverflow.com/questions/6981736/android-3-1-usb-host-broadcastreceiver-does-not-receive-usb-device-attached/9814826#9814826) link that there is a bug in android OS that there is no broadcast event of USB connection event. I have implemented a receiver for getting USB disconnecting event which is not too much important. Also I refer [this](http://code.google.com/p/usb-serial-for-android/source/browse/UsbSerialExamples/src/com/hoho/android/usbserial/examples/DemoActivity.java?r=bd50024ebcfd64ea8d031561bfc59e84104957e6) link to create stable connection with USB i.e. start data communication after USB connection without any loss. This whole thing is working fine when there is single activity or single screen in application.

For multiple screen this connection thing is having problem i.e. connection is not stable and I have multiple screen in application in which I can receive data via USB in any activity at any time. So I have 2 question which I am seeking answers of with some code if possible

1.  How can I make stable connection with device attached via serial USB in android over multiple screens
2.  How to get rid of this frequent disconnection problem in the application over multiple screens

Any help would be greatful

**EDIT:**

I am adding my service which is responsible for communication with usb and starts a thread for continuous receiving data

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;

import android.app.AlertDialog;
import android.app.Service;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.hardware.usb.UsbManager;
import android.os.IBinder;
import arya.omnitalk.com.usb.R;
import arya.omnitalk.com.usb.constants.FileReadingWritingConstants;
import arya.omnitalk.com.usb.constants.GeneralConstant;
import arya.omnitalk.com.usb.constants.UsbDataWriterConstants;

import com.hoho.android.usbserial.driver.UsbSerialProber;

public class UsbCommunicationService extends Service{

    public static ArrayList<String> _dataArray = new ArrayList<String>();
    private Thread mCommunicationThread = null;

    private class ReadThread implements Runnable {
        @Override
        public void run() {

            while (mCommunicationThread!= null && !mCommunicationThread.isInterrupted()) {

                // Here I write code to parse data received via USB

                 }          
        }
    }

    @Override
    public void onCreate() {
        super.onCreate();

        UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE); // Creating object of usb manager
        UsbDataWriterConstants.driver = UsbSerialProber.acquire(manager); // Acquiring usb channel

        if (UsbDataWriterConstants.driver != null) {
            try {
                UsbDataWriterConstants.driver.open();
            } catch (IOException e1) {
                e1.printStackTrace();
            }

            try {
                ReadThread mReadThread = new ReadThread();
                mCommunicationThread = new Thread(mReadThread);
                mCommunicationThread.start();
            } catch (SecurityException e) {
                DisplayError(R.string.error_security);
                DisplayError(R.string.error_security);
            }
        }

    }

    @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);

    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onDestroy() {
        if (mCommunicationThread != null)
            mCommunicationThread.interrupt();
        super.onDestroy();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:51:30.780

您可能会断开连接，因为您的服务只是绑定服务。第一个活动启动，绑定到服务，然后将启动。当您切换到另一个活动时，第一个活动会停止，因此它会解除绑定。此时，服务不再绑定，因此被杀死。绑定服务在这里解释：http: [//developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

只要连接了 USB，您可能需要保持服务运行。为此，您需要一个“持久”服务，一个已启动的服务，如下所述：http: [//developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html) 您可以在收到的活动的 onCreate 中启动您的服务CONNECTED 事件，使用：

```
public class HomeActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        // ...
        Intent intent = new Intent(this, UsbCommunicationService.class);
        startService(intent);
        // ...
    }
} 
```

UsbCommunicationService 将通过此方法启动（不推荐使用 onStart()）：

```
public class UsbCommunicationService extends Service {
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        // TODO : connect to USB...

        // We want this service to continue running until it is explicitly
        // stopped, so return sticky.       
        return START_STICKY;
    }
} 
```

接下来，您的所有活动都可以“绑定”、“取消绑定”和“重新绑定”到这个将继续存在的服务。不要忘记在 DISCONNECT 事件上停止它，使用：

```
stopSelf(); // Will actually stop AFTER all clients unbind... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:22:45.010

这是我为我的 USB 配件注册的活动代码。

```
 public class UsbAccessoryAttachedWorkaroundActivity extends Activity {

    /**
     * Used only to catch the USB_ACCESSORY_ATTACHED event, has it is not broadcasted to 
     * anything else than the activity with the right accessory_filter (no Service, nor Receiver...)
     * DETACHED event is broadcasted as other events. 
     */

     @Override
     public void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
             Intent intent = new Intent(this, UsbService.class);
             startService(intent);
             finish(); // <- die ASAP, without displaying anything.
     }
    } 
```

通过这种方式，您可以获得所有 CONNECT 事件，因为 Activity 不存在 => 每次发现附件时，Android 都会重新启动它...我的服务仅在没有人绑定到它时才启动我的 HomeActivity。如果有人被绑定，则意味着 UI 已经存在，因此我只是通知我的听众 USB 连接已恢复...

# clojure - 如何在 Clojure 中处理魔术字符串

> ID：15566696
> 
> 赞同：1
> 
> 时间：2013-03-22T09:21:13.227
> 
> 标签：clojure

我有代码可以探测 PostgreSQL 数据库的元数据，所以我发现我的代码中包含了魔法字符串：

```
(case data_type
   "integer"   ...
   "smallint"  ...
   "bigint"    ...
   "boolean"   ...
   ... 
```

其中“integer”“smallint”等是从数据库元数据表中的查询返回的值。

[这篇文章](https://stackoverflow.com/questions/11856077/enums-and-clojure)建议使用关键字，所以也许更好地组织这些字符串的一种方法是为每个这样的魔术字符串集合定义一对编码/解码函数？

例如：

```
(defn datatypes-val->kwd [val] ;; return keyword from value
(defn datatypes-kwd->val [kwd] ;; return value from keyword 
```

但它真的值得麻烦吗，因为它没有给我任何类型安全（就像Java 中的**枚举一样）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:30:36.667

您是对的，出于显而易见的原因，它不会为您购买“编译时间”类型安全。

您没有提供关于 case 语句的太多上下文，但我可以建议的一种设计方法是使用多种方法来调度数据类型，以便您可以轻松地为数据类型添加新案例。如下所示：

```
(defmulti get-data (fn [type val] type))

(defmethod get-data "integer" [type val]
  ;do something with val and return result
  )

(defmethod get-data "smallint" [type val]
  ;do something with val and return result
  ) 
```

# android - Android 上 Pocketsphinx 的输入

> ID：15566701
> 
> 赞同：2
> 
> 时间：2013-03-22T09:21:27.357
> 
> 标签：android, speech-recognition, cmusphinx

我制作了一个语音识别文本的演示。我刚刚 [在 Android 上构建了演示 Building Pocketsphinx](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/) ，它运行良好。但我的问题是如何从音频文件中进行输入，而不是实时发言。有什么办法解决吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:00:00.790

您可以使用 Pocketsphinx API 处理任何二进制数据，包括从文件中读取的二进制数据。您只需要确保数据采用所需的格式。将二进制数据读入 short[] 类型的缓冲区后，您可以使用 pocketsphinx API 调用对其进行处理：

导入 edu.cmu.pocketsphinx.pocketsphinx；

```
Pocketsphinx ps = new Decoder(....)
ps.processRaw(buf, buf.length, false, false); 
```

处理完所有数据后，您可以检索结果

```
Hypothesis hyp = pocketsphinx.getHyp();
System.out.println(hyp.getHypstr()) 
```

有关更多详细信息，请参阅[CMUSphinx 教程的 Pocketsphinx 部分](http://cmusphinx.sourceforge.net/wiki/tutorialpocketsphinx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T11:39:46.867

虽然今天有点晚了，但希望它可能对寻求解决类似要求的其他人有所帮助。在课堂上查看以下代码，`SpeechRecognizer`特别是在[声明 AudioRecord object](https://github.com/cmusphinx/pocketsphinx-android/blob/master/src/edu/cmu/pocketsphinx/SpeechRecognizer.java#L256) AudioRecord recorder = new AudioRecord(AudioSource.VOICE_RECOGNITION, sampleRate, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize * 2); 创建另一个类，如 SpeechRecognizer，您可以选择任何支持的音频源`MediaRecord`

# node.js - 运行节点应用程序时未捕获的未指定“错误”

> ID：15566702
> 
> 赞同：5
> 
> 时间：2013-03-22T09:21:28.013
> 
> 标签：node.js, express, mongoose

我是 node.js express.js 的初学者。（从今天早上开始:-)）我已经包含了 db.js，其中包含我与 mongolab 的连接详细信息和 User.js，这是我的模型。请在下面找到代码。

数据库.js

```
var mongoose = require('mongoose');
var Schema = mongoose.Schema;

module.exports.mongoose = mongoose;
module.exports.Schema = Schema;

// Connect to cloud database
var username = "Ausername"
var password = "Apassword";
var address = 'Aaddress';
connect();

// Connect to mongo
function connect() {
  var url = 'mongodb://' + username + ':' + password + address;
  mongoose.connect(url);
}
function disconnect() {mongoose.disconnect()} 
```

用户.js

```
var db = require('../lib/db');

var UserSchema = new db.Schema({
    username : {type: String, unique: true}
  , password : String
})

var MyUser = db.mongoose.model('User', UserSchema);

// Exports
module.exports.addUser = addUser;

// Add user to database
function addUser(username, password, callback) {
  var instance = new MyUser();
  instance.username = username;
  instance.password = password;
  instance.save(function (err) {
    if (err) {
      callback(err);
    }
    else {
      callback(null, instance);
    }
  });
} 
```

当我运行节点应用程序时，它报告以下错误

```
C:\Sripaul\Softwares\NodeJS\Projects\authentication>node app
Express server listening on port 3000

C:\Sripaul\Softwares\NodeJS\Projects\authentication\node_modules\mongoose\lib\utils.js:413
        throw err;
          ^
Error: Uncaught, unspecified 'error' event.
    at NativeConnection.EventEmitter.emit (events.js:68:15)
    at Model.init (C:\Sripaul\Softwares\NodeJS\Projects\authentication\node_modules\mongoose\lib\model.js:554:31)
    at exports.tick (C:\Sripaul\Softwares\NodeJS\Projects\authentication\node_modules\mongoose\lib\utils.js:408:16)
    at Db.ensureIndex (C:\Sripaul\Softwares\NodeJS\Projects\authentication\node_modules\mongoose\node_modules\mongodb\lib\mongodb\db.js:1066:28)
    at Db.indexInformation (C:\Sripaul\Softwares\NodeJS\Projects\authentication\node_modules\mongoose\node_modules\mongodb\lib\mongodb\db.js:1200:28)
    at Cursor.toArray (C:\Sripaul\Softwares\NodeJS\Projects\authentication\node_modules\mongoose\node_modules\mongodb\lib\mongodb\cursor.js:124:30)
    at Cursor.each (C:\Sripaul\Softwares\NodeJS\Projects\authentication\node_modules\mongoose\node_modules\mongodb\lib\mongodb\cursor.js:166:32)
    at Cursor.nextObject.self.queryRun (C:\Sripaul\Softwares\NodeJS\Projects\authentication\node_modules\mongoose\node_modules\mongodb\lib\mongodb\cursor.js:441:39)
    at Cursor.close (C:\Sripaul\Softwares\NodeJS\Projects\authentication\node_modules\mongoose\node_modules\mongodb\lib\mongodb\cursor.js:687:5)
    at Cursor.nextObject.commandHandler (C:\Sripaul\Softwares\NodeJS\Projects\authentication\node_modules\mongoose\node_modules\mongodb\lib\mongodb\cursor.js:441:21) 
```

app.js 中的代码如下

```
app.post('/signup', function(req, res) {
  var username = req.body.username;
  var password = req.body.password;
  User.addUser(username, password, function(err, user) {
    if (err) throw err;
    res.redirect('/form');
  });  
}); 
```

有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:04:39.263

看起来在 mongo lab 中发生了这个问题，因为它无法连接到亚马逊云。我尝试使用 Joyent Cloud，效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-03T17:32:37.480

面对类似的问题，错误消息相同，但堆栈跟踪不同，

```
/%/node_modules/mongoose/lib/utils.js:413
        throw err;
              ^
TypeError: Uncaught, unspecified "error" event.
    at TypeError (<anonymous>)
    at NativeConnection.EventEmitter.emit (events.js:74:15)
    at /%/authentication/node_modules/mongoose/lib/model.js:554:31
    at /%/authentication/node_modules/mongoose/lib/utils.js:408:16
    at /%/authentication/node_modules/mongoose/node_modules/mongodb/lib/mongodb/db.js:1066:28
    at /%/authentication/node_modules/mongoose/node_modules/mongodb/lib/mongodb/db.js:1200:28
    at /%/authentication/node_modules/mongoose/node_modules/mongodb/lib/mongodb/cursor.js:124:30
    at /%/authentication/node_modules/mongoose/node_modules/mongodb/lib/mongodb/cursor.js:166:32
    at /%/authentication/node_modules/mongoose/node_modules/mongodb/lib/mongodb/cursor.js:441:39 
```

修复了它在 db.js 中的地址变量之前删除额外的空间（如书中）。

```
var address = ' @dbh42.mongolab.com:27427/nockmarket'; 
```

应该是（注意空间）

```
var address = '@dbh42.mongolab.com:27427/nockmarket'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-04T17:23:43.260

我知道这是一个老话题，但我这样解决了这个问题：

在 package.json: 而不是 "mongoose": "2.6.5" 使它成为 "mongoose": "*"

然后在控制台（cd /home/yourusername/authentication）

输入“npm uninstall mongoose”，然后输入“npm install mongoose”

似乎 mongoose 2.6.5 是 mongolab 的弃用版本

欲了解更多信息：[http ://digiscape.co.uk/blog/tips/node/unspecified-error-event-not-authorized-for-query-on-db-system-indexes-at-model-js55431/](http://digiscape.co.uk/blog/tips/node/unspecified-error-event-not-authorized-for-query-on-db-system-indexes-at-model-js55431/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-21T04:50:24.123

我最初使用 mongolab 时也遇到了这个问题。即使你有一个 mongolab 用户，你也必须在用户选项卡下创建一个数据库用户

# eclipse - 蚀。将静态最终变量移动到静态嵌套类

> ID：15566703
> 
> 赞同：0
> 
> 时间：2013-03-22T09:21:33.773
> 
> 标签：eclipse, static, refactoring, move

怎么做？我在名为`Constants`. 现在我想将它移到名为`Constants.States`. 如果我只是右键单击并选择*Refactor - Move*，我将不会`Constants.States`在建议的目的地中看到类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:45:26.460

刚试过这个。虽然静态嵌套类确实似乎不在提议的类中，但您可以`Constants`从提议中选择类，然后简单地添加`.States`到文本字段中。Eclipse 识别了该类（不会抱怨该类不存在）并且重构按预期工作。

![在此处输入图像描述](../Images/4585e45d8348f0ffe117b3164a412ebb.png)

# highcharts - Highcharts - 森伯斯特分区

> ID：15566721
> 
> 赞同：0
> 
> 时间：2013-03-22T09:22:22.770
> 
> 标签：highcharts, sunburst-diagram

我想知道使用 Highcharts 创建向下钻取旭日形分区的最佳方法？我最初的方法是渲染所有系列，并根据所选系列动态更改系列（隐藏内部系列并更改其余系列的大小/内部大小）。

但是对于我无法隐藏它们的甜甜圈派，我将工作样本用于派，并修改为甜甜圈以向您展示我的意思：http: [//jsfiddle.net/abdPj/](http://jsfiddle.net/abdPj/)

```
var chart = new Highcharts.Chart({
    chart: {
        type : 'pie',
        renderTo: 'container'
    },

    xAxis: {
    },

    series: [{
        size: '30%',
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
    }, {
        innerSize: '35%',
        size: '60%',
        data: [129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4]        
    }]
});

// the button action
$button = $('#button');
$button.click(function() {
    var series = chart.series[0];

    if (series.visible) {
        series.hide();
        $button.html('Show series');
    } else {
        series.show();
        $button.html('Hide series');
    }

}); 
```

也不是 100% 确定可以即时更改大小和内部大小，我是否每次都必须重绘所有可见系列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:13:32.067

我认为您想使用`point.setVisible(boolean)`它，请参见示例：http: [//jsfiddle.net/Fusher/abdPj/2/](http://jsfiddle.net/Fusher/abdPj/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-27T11:03:52.940

现在有一个 sunburst 模块可以为您执行此操作 [http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/demo/sunburst/](http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/demo/sunburst/)

```
<script src="https://code.highcharts.com/modules/sunburst.js"></script> 
```

# android - 在 Android 中向 Wifi 网络广播服务

> ID：15566722
> 
> 赞同：3
> 
> 时间：2013-03-22T09:22:22.927
> 
> 标签：android, service, wifi, sync, broadcast

我正在开发**Android**项目，在该项目中我通过本地 WiFi 连接与 Mac 同步联系人和日历，在这里我必须通知 WiFi 网络设备存在（即**广播广告**），以便当 Mac 执行扫描设备操作时，我的设备必须被检测到，。所以为此我需要向 WiFi 网络广播服务。任何人都可以帮助我如何实现这一目标......？

并且广播服务必须包含 Android 设备信息。那么它将是哪种类型的数据包......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T19:52:00.867

You can use `android-mdns` for broadcasting. for more information have a look at [https://github.com/changyy/android-mdns](https://github.com/changyy/android-mdns).

# html - Nodejs+nginx服务静态文件VS编译模板

> ID：15566730
> 
> 赞同：5
> 
> 时间：2013-03-22T09:22:51.530
> 
> 标签：html, node.js, nginx, express

我很好奇人们使用 Nodejs 和 nginx 的方式。

使用 nginx 作为在 Nodejs 服务器前面提供静态文件（css、js、¿static html？）的网络服务器似乎很常见。采用这种方法的开发人员说，nginx 已经证明可以非常快地完成这项任务。

我的疑问如下：仅谈到 html 文件，为什么这种方法比使用 Nodejs 和模板（例如，用把手编写）编译并在内存中可用更好？直观地说，这不是比访问磁盘获取静态 html 更快吗？或者也许 nginx 也在内存中维护 html？我应该停止 expressjs 中的缓存工作以支持 nginx 吗？

我只是想从一开始就正确地构建东西。

非常感谢。

# wpf - 如何在 WPF ContextMenu 中对菜单项进行分组而不嵌套它们？

> ID：15566733
> 
> 赞同：4
> 
> 时间：2013-03-22T09:23:01.040
> 
> 标签：wpf, wpf-controls

我有`Visibility`属性由转换器控制的 MenuItems。大多数情况下，MenuItem 具有相同的可见性逻辑（相同的转换器、相同的参数）。为了避免重新输入，我想将它们虚拟地组合在一起，只设置一次可见性。

我知道我可以通过嵌套 MenuItems 来实现。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T10:39:49.337

我不太清楚你想做什么，但我怀疑一种风格会很方便。我举个例子。在这里，我在具有上下文菜单的网格中创建了一个按钮。在 Button 的资源中，我为 MenuItems 创建了一个样式（未命名）。在样式中，您可以通过替换我创建的绑定来指定可见性的行为方式。

```
<Window x:Class="StackOverflow.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Testing" VerticalAlignment="Center" HorizontalAlignment="Center">
            <Button.Resources>
                <Style TargetType="{x:Type MenuItem}">
                    <Setter Property="Visibility" Value="{Binding SomeBinding, Converter=SomeConverter}"/>
                </Style>
            </Button.Resources>
            <Button.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="1"/>
                    <MenuItem Header="2"/>
                    <MenuItem Header="3"/>
                    <MenuItem Header="4"/>
                </ContextMenu>
            </Button.ContextMenu>
        </Button>
    </Grid>
</Window> 
```

# android - Photoshop 中 android 和 iPhone 设计的屏幕分辨率

> ID：15566734
> 
> 赞同：10
> 
> 时间：2013-03-22T09:23:04.473
> 
> 标签：android, iphone, photoshop, resolution

对于 iPhone 和 Android 设计，为什么我们将 psd 分辨率设置为 72？为什么我们不使用 160 用于 mdpi 和 240 用于 hdpi 等等。设计 android app 或 iPhone app 超过 72 res 有什么区别？只是增加文件大小和清晰度？请告诉我。

谢谢，阿伦。 ![在此处输入图像描述](../Images/7ed09ee015ba4685867381f2bdd9e458.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T09:47:40.640

考虑可调整大小的设计比考虑固定设计更好。就像您开发旨在在常规桌面环境中工作的软件时一样。例如，无论显示器是 1024x768 还是 1680x1050，Microsoft Word 的行为都符合预期；UI 的不同部分根据窗口大小运行，一切顺利。因此，在手机上，应该是一样的。

在 iPhone 上，常规屏幕为 320x480。视网膜屏幕为 640x960。在 Android 上，有：240x320（很少见，在低端手机上……）、320x480（现在也很少见）、800x480、854x480、720x1280、800x1280、1080x1920……

为了抽象所有这些尺寸，有密度的概念。您可以利用此功能创建图像的多种分辨率，以满足手机上每组相似分辨率的需求。

做一个移动应用程序不像做一个网站。和iOS一样，只有2种屏幕尺寸，甚至一开始只有一种，很多人采取了固定的设计方式，这并不是最合适的。重要的是要针对任何分辨率进行良好的设计，并提前计划不同的 UI 元素将如何调整大小、保持其大小或简单地移动。此外，让用户在横向模式下使用应用程序是明智的，尤其是当它是标准信息屏幕（列表、数据、图形、地图......）的复合时。Android 框架有工具可以很容易地实现这种灵活性：大多数时候，它是将对应不同情况的图像放在相应的文件夹中。

这是有关该主题的一些建议阅读。即使您不是开发人员，您也可能对此感兴趣：

[支持多屏](http://developer.android.com/guide/practices/screens_support.html)

关于 Photoshop 中的分辨率：仅当您使用印刷媒体（如书籍、海报、传单等）时才有意义。此设置允许您说“我想在 A4 纸上打印高分辨率 (300dpi) 并且不打扰像素”，让软件为您进行转换。实际的 72dp 设置意味着您的作品的 72 像素将打印在一英寸的纸上。

移动应用程序是一种屏幕媒体，以像素创建，以像素为单位输出。dpi 设置或打印分辨率是无用的，对于任何类型的屏幕媒体都可以忽略，至少在使用图形程序时是这样。一旦图像被导入到 Android 项目中，就会考虑屏幕密度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-08T13:37:57.690

这个分辨率就是打印分辨率。据我了解，如果您想告诉打印机打印此图像有多大（在没有任何其他规则的情况下），您只会关心这一点。对于网络来说，这完全无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T09:26:47.577

我公司经常有一个项目同时有android和ios版本。通常设计是基于 ios 设备 (640x960) 在设计完成并确认我们的设计师对按钮、背景等每个部分进行切割。我建议在进行设计时创建设计分层每个对象这样设计对设计师来说更容易剪裁

# ios - 使用 invalidateLayout 调用的高级 UICollectionView 动画

> ID：15566735
> 
> 赞同：12
> 
> 时间：2013-03-22T09:23:18.803
> 
> 标签：ios, ios6, core-animation, uicollectionview

UICollectionView[编程指南](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/CollectionViewPGforIOS/CollectionViewBasics/CollectionViewBasics.html#//apple_ref/doc/uid/TP40012334-CH2-SW5)说：

> 除了动画插入、删除和移动操作之外，您可以随时使布局无效并强制它重新绘制其内容。使布局无效不会直接为项目设置动画；当您使布局无效时，collection view 会在它们新计算的位置显示项目而不进行动画处理。但是，使布局无效的行为会导致布局对象显式移动项目。在自定义布局中，您可以使用此行为定期定位单元格并创建动画效果。

我一直在尝试这样的事情，`AnimationStep`我的子类使用的枚举在哪里`UICollectionViewFlowLayout`有条件地设置具有三阶段动画的图块的位置：

```
-(void)update{
    [self animateLayoutAfterDelay:2.0 toStep:AnimationStepOne];
    [self animateLayoutAfterDelay:4.0 toStep:AnimationStepTwo];
    [self animateLayoutAfterDelay:6.0 toStep:AnimationStepThree];
}

-(void)animateLayoutAfterDelay:(NSTimeInterval)delay toStep:(MagazineLayoutAnimationStep)step {
    double delayInSeconds = delay;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [UIView animateWithDuration:2.0 animations:^{
            self.layout.animationStep = step;
            [self.layout invalidateLayout];
        }];
    });
} 
```

这具有相当不可预测的影响。有些单元格以我期望的方式动画，有些单元格被隐藏和显示，或者只是出现在它们的新位置。我在单元格上放置了随机背景颜色，以查看这是否可能是 UICollectionView 回收单元格的效果，果然，有时确实如此。这解释了一些奇怪的事情，但不是全部。

有人知道 Apple 希望我如何为单元格设置动画并移动它们吗？

（我需要这个，因为我的集合视图单元格往往会改变大小，并且我想要一个没有任何对角线移动的优美动画）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-27T15:03:34.537

答案是使用中间布局。

```
[self.collectionView setCollectionViewLayout: layoutForStepOne animated:YES completion:^(BOOL finished) {
    [self.collectionView setCollectionViewLayout: layoutForStepTwo animated:YES completion:^(BOOL finished) {
        [self.collectionView setCollectionViewLayout: layoutForStepThree animated:YES];

    }];
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T13:38:45.330

很简单：

创建一些 UICollectionViewLayout 的新实例并使用

```
- (void)setCollectionViewLayout:(UICollectionViewLayout *)layout animated:(BOOL)animated 
```

将 UICollectionView 上的布局设置为这个新的布局对象。确保对动画参数使用 YES。

编辑：为了做多阶段动画，我会尝试

```
performBatchUpdates:completion: 
```

并将下一个更新放入完成块并重复。

# mysql - 加入 3 个 mysql 表并检索所有相关数据

> ID：15566739
> 
> 赞同：2
> 
> 时间：2013-03-22T09:23:31.753
> 
> 标签：mysql, sql

我有 3 个 sql 表

`product_data`- 存储有关产品的所有详细信息

```
product_name  | description | ucode | heaven | star_rating | product_id 
```

`product_images`- 所有带有照片 ID 的图片网址（每个产品分配了 1 个或多个图片）

```
img_url | photo_id 
```

`product_img_map`- 将正确的图像与产品映射

```
photo_id  | product_id 
```

如果我有`product_id`，`product_images`我可以很容易地加入他们，但是有一个单独的表格可以将照片与产品对应起来。

谁能告诉我如何查询产品的所有产品详细信息和图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:27:59.580

`JOIN`两个表进入`product_data`：

```
SELECT *
FROM product_data p
LEFT JOIN product_img_map im ON im.product_id = p.product_id
LEFT JOIN product_images i ON i.photo_id = im.photo_id 
```

`LEFT JOIN`即使没有与该产品相关的照片，我也曾经获取产品信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:29:55.317

```
 product(product_id*)

 image(image_id*)

 product_image(product_id*,image_id*)

 * = (component of) PRIMARY KEY

 SELECT * 
   FROM product p 
   LEFT 
   JOIN product_image pi 
     ON pi.product_id = p.product_id
   LEFT
   JOIN image i
     ON i.image_id = pi.image_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:32:46.343

您可以在任意数量的键上组合任意数量的连接，因为每次连接都需要指定键。

```
SELECT *
    FROM product_data
    LEFT JOIN product_img_map
        ON product_data.id=product_img_map.product_id
    LEFT JOIN product_images
        ON product_images.id=product_img_map.photo_id 
```

这种带有缩短表名的变体也很常见，但它是同一件事，只是外观不同。

```
SELECT *
    FROM product_data d
    LEFT JOIN product_img_map m
        ON d.id=m.product_id
    LEFT JOIN product_images i
        ON i.id=m.photo_id 
```

您将多次获得每个产品的线条，每个关联图像一次。这很正常，但您可能需要编写一些代码来解析它。使这更容易是经常使用 ORM（“对象关系映射器”）的原因之一，这使得以任何您喜欢的方式循环数据或图像变得更加容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:34:46.623

```
select pi.img_url, pi.photo_id,pim.product_id,pd.* 
   FROM product_images as pi 
   left join product_img_map as pim on pim.photo_id  = pi.photo_id 
   left join product_data as pd on pd.product_id =  pim.product_id; 
```

请尝试以上查询。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-22T09:29:09.033

你需要做内部连接。试试下面

```
 select * from product_data pd
 left join product_img_map  im on pd. product_id = im.product_id
 left join product_images pi on im.photo_id   = pi.photo_id 
```

我认为左连接是正确的，因为可能有产品没有与之关联的照片。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-22T09:29:20.850

试试这个：

```
Select * From product_data pd Inner JOin product_img_map pim on pd.product_id=pim.product_id Inner JOin product_images pm on pm.photo_id=pim.photo_id 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-22T09:29:29.897

```
select * from product_data pd left join product_img_map pim 
on pd.product_id = pim.product_id
left join product_images pi on
pim.photo_id = pi.photo_id 
```

# html - 为什么我在 .css 文件中定义的元素的顺序会影响渲染时的显示方式？

> ID：15566754
> 
> 赞同：0
> 
> 时间：2013-03-22T09:24:18.400
> 
> 标签：html, css

（见下面的更新）

我有两个文件：一个 .css 文件和一个 index.html 文件。这个想法是在屏幕上有一个按钮面板[用于原型设计触摸屏界面的可用性]，每个按钮在屏幕上分配一个特定位置（参见 .css 文件中的“margin-top”和“margin-left”标签. 稍后我将添加 onclick 功能等。

不过现在，我只是想让它们在屏幕上正确显示。奇怪的是，.css 部分中的第一个元素（即 .aButton #....）在浏览器中显示时始终显示在位置 (0,0) 处。例如。目前，button1 将在 (0,0) 处向上，但所有其他按钮都在正确的位置。如果我更改 css 代码，并将 button2 部分向上移动到 button1 部分上方，则 button1 会呈现在正确的位置，但 button2 现在位于 (0,0)。

将非常感谢任何想法！

以下是相关部分：来自 index.html

```
<div id="buttonPanel" class="aButton">
            <div id="button1" class="aButton"></div>
            <div id="button2" class="aButton"></div>            
            <div id="button3" class="aButton"></div> 
            <div id="button4" class="aButton"></div>
            <div id="button5" class="aButton"></div>
</div> 
```

来自styles.css：

```
.aButton #button1
{
    margin-top: 262px;
    margin-left: 110px;
}

.aButton #button2
{
    margin-top: 24px;
    margin-left: 347px;
}

.aButton #button3
{
    margin-top: 32px;
    margin-left: 114px;
}

.aButton #button4
{
    margin-top: 524px;
    margin-left: 104px;
}
.aButton #button5
{
    margin-top: 392px;
    margin-left: 106px;
} 
```

**更新：**用整个 html 和 css 文件更新了 Fr0zenFyr 的 jsfiddle 并得到了相同的问题！[http://jsfiddle.net/b4NYd/](http://jsfiddle.net/b4NYd/) 我以前不包括它们是愚蠢的，因为我现在怀疑它与 .aButton #buttonx {} 定义与 #buttonx {} 定义的奇怪交互有关. 我可以通过合并两者来解决问题，但我真的很想了解为什么会出现这种问题，因为我想稍后在制作不同布局的原型时使用不同的类。

**更新：**全部排序！这是我的评论，啊！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:26:47.023

问题是你的评论。这不是用 CSS 编写评论的方式。你需要使用`/*`符号。

做这个

```
 /* interface 1 */
 /* need to change all of these according to what numbers I've got in my logbook.*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:21:16.447

在您的情况下，移动 CSS 的顺序不应影响 HTML 元素的输出。您可以反转按钮的所有 css 类的顺序，这不会影响任何事情。

您是否覆盖了任何其他CSS？您是否将元素设置为 inline-block，或者正如 btevfik 所提到的，您是否在元素上使用了任何定位？您是否稍后在您的 css 文件中覆盖您的按钮 css？

其他地方肯定有其他问题导致您的按钮在屏幕上移动。

# beanshell - beanshell 脚本无法将一组对象识别为 java.util.Collection

> ID：15566760
> 
> 赞同：0
> 
> 时间：2013-03-22T09:24:40.613
> 
> 标签：beanshell

我正在使用以下脚本使用索引从一组输入对象中选择一个对象。它不承认输入参数是一组三个值。我假设我在这条线上做错了什么：

```
if(setOfObjects  instanceof java.util.Collection)

if(setOfObjects != null)
{
   if(setOfObjects  instanceof java.util.Collection)
   {
      object = setOfObjects.get(index);
      if (object instanceof fUML.Semantics.Classes.Kernel.Object_)
      {
         fUML.Semantics.Classes.Kernel.Reference r = new fUML.Semantics.Classes.Kernel.Reference(object.getOwner());
         r.setReferent(object);
         object = r;
      }
   }
   Else print(index);
   if(index == 1)
   {
      print("ok");
      object = setOfObjects;
   }
   else
   {
      print("failed");
      object = null;
   }
}
else
{
   object = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:50:02.210

GaryMcM 的方法是正确的。当我在解释器命名空间中设置`setOfObjects`为实例时，代码对我来说是正确的`java.util.HashSet`，如下所示。

```
Set<String> setOfObjects = new HashSet<String>();
i.set("setOfObjects", setOfObjects );(i being beanshell interpreter's instance) 
```

一些观察：

1.  关键字`Else`应该是`else`（beanshell 不能容忍）
2.  `setOfObjects.get(index);`将抛出错误，因为`get(int)`Sets中没有

您确定`setOfObjects`您提供的不是`null`，或者没有拼写错误，因为 beanshell 将假定一个带有拼写错误的变量作为新变量。（在非严格的 java 模式下）。

# objective-c - Cocoa / NSUserNotificationCenter 获取所有 NSUserNotification 通知

> ID：15566761
> 
> 赞同：4
> 
> 时间：2013-03-22T09:24:47.993
> 
> 标签：objective-c, macos, cocoa, osx-mountain-lion, nsusernotificationcenter

每当*任何*应用程序交付或激活一个`NSUserNotification`?

*   我也无法确定通过 发送的任何内容`NSDistributedNotificationCenter`，
*   我也找不到像`NSUserNotificationDeliveredMask`[dummy name] 这样可以注册全局的掩码`[NSEvent addGlobalMonitorForEventsMatchingMask]`，
*   默认用户通知中心对象似乎也没有合适的观察者。

The`[NSUserNotificationCenter defaultCenter]`及其委托仅在我自己的应用程序发送通知时通知我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-18T13:15:41.543

这不可能。您只能收听`NSDistributedNotificationCenter`“全局”通知。应用程序开发人员必须广播才能`NSDistributedNotificationCenter`让您参与其中。

您不能劫持其他应用程序通知。大多数应用程序和通过 App Store 分发的所有应用程序都是沙盒化的。这本质上限制了你吸引他们的能力！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T21:08:42.837

[这个答案](https://stackoverflow.com/questions/12437149/available-notifications-for-nsdistributednotificationcenter)应该解决如何接收可用的通知`NSDistributedNotificationCenter`。不过，据我所知，[似乎没有任何方法](https://stackoverflow.com/questions/16761077/is-there-any-way-of-knowing-how-many-nsusernotifications-there-are-in-nsusernoti)可以获取所有信息。`NSUsernotifications`

# dynamic - 关于 Extjs 4.0.7 的一些问题

> ID：15566767
> 
> 赞同：0
> 
> 时间：2013-03-22T09:25:10.837
> 
> 标签：dynamic, extjs, gridpanel

我想在网格面板中实现一个动态列，我该怎么做？我使用了 Extjs 4.0.7：

```
var result = Ext.JSON.decode(response.responseText);
store.model.setFields(result.fields);
grid.reconfigure(store, result.columns);
store.loadRawData(result.data, false); 
```

该方法`setFields()`在 4.0.7 版本中不存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:16:06.500

尝试类似：

```
var store = new Ext.data.Store({fields: result.fields, data: result.data})

grid.reconfigure(store, result.columns}) 
```

Store 上的字段配置一直是这样的，能够传入字段而不是模型。 [http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-cfg-fields](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-cfg-fields)

# .net - C# 中supportedRuntime 中的完整形式的SKU

> ID：15566770
> 
> 赞同：2
> 
> 时间：2013-03-22T09:25:20.290
> 
> 标签：.net, visual-studio-2010, c#-4.0, visual-studio-2012, .net-4.5

我只是想知道在编译下启动时supportedRuntime中SKU的完整形式是什么。我知道这个词一般是指库存单位。但我正在网上搜索大多数博客甚至 MSDN 以获取其完整形式。任何人都可以帮助我吗？

如果有人问我，作为开发人员，我应该可以这么说，这就是为什么我很想知道:)

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-06-01T20:22:49.987

请阅读整个元素形式的 msdn 帮助：http: [//msdn.microsoft.com/en-us/library/w4atty68.aspx](http://msdn.microsoft.com/en-us/library/w4atty68.aspx)

# ios - UIScrollview 计算 ZoomToRect 后新的 CGRect

> ID：15566777
> 
> 赞同：1
> 
> 时间：2013-03-22T09:25:31.203
> 
> 标签：ios, objective-c, uiscrollview, zooming

我的问题是我`CGRect`在`UIScrollview`使用`zoomToRect`. `UIScrollview`缩放时我正在设置`contentOffset`属性。

**代码如下：**

```
if(image != nil) {

        CGSize zoomViewSize = image.frame.size;

        CGSize scrollViewSize = self.bounds.size;

        if(zoomViewSize.width < scrollViewSize.width) {
            anOffset.x = -(scrollViewSize.width - zoomViewSize.width) / 2.0;
        }

        if(zoomViewSize.height < scrollViewSize.height) {
            anOffset.y = -(scrollViewSize.height - zoomViewSize.height) / 2.0;
        }
    }
super.contentOffset = anOffset; 
```

缩放后，我正在设置内容插入属性，以便图像位于中心。对于内容插图，代码如下。

```
-(void)zoomtorect:(CGRect)rect animated:(BOOL)animated {

[super zoomtorect:rect animated:YES];

CGFloat pageWidth = image.image.size.height;

         CGSize imageSize = rect.size;
         CGSize zoomedImageSize = CGSizeMake(imageSize.width * 0.2, imageSize.height * 0.2);
         CGSize pageSize = self.bounds.size;

         //scLayer.frame = rect;
         UIEdgeInsets inset = UIEdgeInsetsZero;
         if (pageSize.width > zoomedImageSize.width) {
             inset.left = (pageSize.width - zoomedImageSize.width) / 2;
             inset.right = inset.left;
         }
         if (pageSize.height > zoomedImageSize.height) {
             inset.top = (pageSize.height - zoomedImageSize.height) / 2;
             inset.bottom = inset.top;
         }

         self.contentInset = inset;
} 
```

此代码在屏幕之间切换我的图像视图。在这里一切正常。我的问题是我必须只显示`imageView`其余部分的缩放部分是黑色的。为了计算缩放区域，我正在进行以下计算。

```
CGSize imageSize = rect.size;
    CGSize zoomedImageSize = CGSizeMake(imageSize.width * scroll.maximumZoomScale, imageSize.height *scroll.maximumZoomScale);
    CGSize pageSize = scroll.bounds.size;

    UIEdgeInsets inset = UIEdgeInsetsZero;
    if (pageSize.width > zoomedImageSize.width) {
        inset.left = (pageSize.width - zoomedImageSize.width) / 2;
        inset.right = inset.left;
    }
    if (pageSize.height > zoomedImageSize.height) {
        inset.top = (pageSize.height - zoomedImageSize.height) / 2;
        inset.bottom = inset.top;
    }

    CGRect zoomRect = [scroll convertRect:rect fromView:image];

    CGRect zoomRect1 = CGRectMake(inset.left, inset.top+50, zoomRect.size.width, zoomRect.size.height); 
```

这`zoomRect1`是图像的缩放区域，这个值与我在屏幕上看到的不完全相同。在我做计算错误的地方请帮帮我。但我没有得到缩放图像区域的确切值。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:27:30.237

使用这个..**完美工作**

```
- (void)handleDoubleTap:(UIGestureRecognizer *)recognizer
{
    if(isAlreadyZoomed)
    {
        CGPoint Pointview = [recognizer locationInView:recognizer.view];
        CGFloat newZoomscal = 3.0;
        CGSize scrollViewSize = self.scrollContainer.bounds.size;
        CGFloat width = scrollViewSize.width/newZoomscal;
        CGFloat height = scrollViewSize.height /newZoomscal;
        CGFloat xPos = Pointview.x-(width/2.0);
        CGFloat yPos = Pointview.y-(height/2.0);
        CGRect rectTozoom=CGRectMake(xPos, yPos, width, height);
        [self.scrollContainer zoomToRect:rectTozoom animated:YES];
        [self.scrollContainer setZoomScale:3.0 animated:YES];
        isAlreadyZoomed = NO;
    }
    else
    {
        [self.scrollContainer setZoomScale:1.0 animated:YES];
        isAlreadyZoomed = YES;
    }
} 
```

`isAlreadyZoomed`是一个`BOOL`值

# maven - 如何避免在执行“maven-release-plugin:prepare”时将目录上传到 SCM

> ID：15566781
> 
> 赞同：1
> 
> 时间：2013-03-22T09:25:38.240
> 
> 标签：maven, maven-release-plugin

发布 maven 项目时，'maven-release-plugin:prepare' 目标会将标签版本上传到 SCM。

1/ 'maven-release-plugin:prepare' 是否使用特定插件来执行上传到 SCM 的过程？还是它使用自己的类？

2/ 在我的 Maven 多模块项目目录中，有几个目录我希望避免将它们上传到每个版本的 SCM 标签版本中。

这些目录不包含要发布的代码，但是它们位于发布的 SCM 分支主题中：有没有办法告诉 'maven-release-plugin:prepare' 避免上传它们？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:46:46.140

发布插件在内部使用作为 SCM 项目设置的一部分指定的 SCM 提供程序。根据您提供的 URL，它将确定要使用的提供程序。更多信息在这里：[http ://maven.apache.org/guides/mini/guide-releasing.html](http://maven.apache.org/guides/mini/guide-releasing.html)

您在版本控制下的所有内容都将被标记 - Maven 不知道哪些目录重要，哪些不重要。如果这些目录不应该被标记，也许它们不应该是项目布局的一部分，也不应该首先出现在 SCM 中。您是否考虑过将它们转移到不同的位置？

# android - 从 baseadapter 传递项目 ID

> ID：15566784
> 
> 赞同：1
> 
> 时间：2013-03-22T09:25:40.160
> 
> 标签：android, android-activity, baseadapter

这里我有一个关于我的代码的简单问题，我如何从基本适配器获取项目 ID

在这里，我从活动中调用了适配器：

```
adapter = new sampleadapter(screen.this,imageIds);

      listview.setAdapter(adapter); 
```

适配器类：

```
public class  sampleadapter extends BaseAdapter {

    public sampleadapter(screen ListViewActivity,int[] imageIds) {
                // TODO Auto-generated constructor stub
            }

            public int getCount() {
                return imageIds.length;
            }

            public Object getItem(int position) {
                return position;
            }

            public long getItemId(int position) {
                return position;
            }

        public View getView(int position, View convertView, ViewGroup parent) {

                vi=convertView;

               vi = LayoutInflater.from(parent.getContext()).inflate(R.layout.explorescreen, null);

                  Holder.images=(ImageView) vi.findViewById(R.id.image);

                 Holder.images.setImageResource(imageIds[position]);

                 vi.setTag(ViewHolder);   

                      Holder = (ViewHolder) vi.getTag();

                        return vi;
            }

        }; 
```

这里 ：

我需要将值传递`imageIds[position]`给我的活动我该怎么做？

任何人都可以帮助我，@提前谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:38:46.400

将此接口添加到您的适配器类：

```
public interface MyItemFoundListener{
public void itemFound(int resourceId);
} 
```

在你的适配器类中创建一个变量

```
MyItemFoundListener mItemFoundListener; 
```

向您的适配器类添加一个方法

```
public void setOnMyItemFoundListener(MyItemFoundListener listener)
{
    mItemFoundListener = listener;
} 
```

在 getView 方法中放

```
if(mItemFoundListener!=null)
    mItemFoundListener.itemFound(imageIds[position]); 
```

现在在您的 Activity 类中实现接口

```
MyActivity implements MyItemFoundListener 
```

`adapter = new sampleadapter(screen.this,imageIds);` 添加后`adapter.setOnMyItemFoundListener(this);`

将此方法添加到您的 Activity 类

```
public void itemFound(int resourceId){
//Now whenever getView from adapter will be called it will pass the resourceId here in your activity
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:32:30.813

您的 getItem 和 getItemID 方法不正确。

GetItem 应该返回一个数组成员。不是数组索引。

GetItemID 应该使用 getitem，然后通过返回成员的 getter 返回 ID。

您还需要实现 hasStableIDs 以在您的适配器上返回 true。

然后，附加到使用您的适配器的列表视图的任何 setItemClickListener 实现将为您返回对象 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:38:19.867

在您的适配器 getView() 方法中添加以下行：

```
holder.img_p.setOnClickListener(mOnTitleClickListener_image); 
```

在你的课上放这个代码：

```
public OnClickListener mOnTitleClickListener_image = new OnClickListener() {
        public void onClick(View v) {
            final int position = listv.getPositionForView((View) v.getParent());

            Intent i = new Intent(Activity.this, nextactivity.class);
            i.putExtra("position",""+position);
            startActivity(i);

        }
    }; 
```

在 onCreate() 的下一个活动中：

```
String extras = getIntent().getStringExtra("position"); 
```

上面的代码仅适用于您可以为不同视图创建许多图像以获取更多详细信息，请参阅：[https ://stackoverflow.com/a/12813906/1168654](https://stackoverflow.com/a/12813906/1168654)

你的下一个活动

```
public class NextActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
                String extras = getIntent().getStringExtra("position");
// your position is below
                int pos = Integet.parseInteget(extras);
                Log.e("position-->",""+pos);
// now you can use this position any where in your class

  }

} 
```

# maven - 如何使用 maven 将外部 jar 打包到可运行的 jar

> ID：15566790
> 
> 赞同：0
> 
> 时间：2013-03-22T09:25:52.750
> 
> 标签：maven, executable-jar

我使用了一个可运行的 jar，类使用了 mysql-connector.jar 和 log4j.jar。

我如何将这些外部 jar 打包到可运行的 jar 中？还是我不必这样做，否则我可以访问它们？

目前我正在像这样启动可运行的 jar：java -jar /tomcat/webapps/TestApp/Test.jar

我可以在我的 java 调用中添加一个 -classpath 并将所有需要的库放入此调用或 Manifest！？

# solr - 如何使用 DIH 将多个文件导入 Solr

> ID：15566791
> 
> 赞同：1
> 
> 时间：2013-03-22T09:25:54.657
> 
> 标签：solr, dih

我有一些数据存储在文件中，每一行代表一个记录。所以，我正在使用 LineEntityProcessor 和 FileDataSource。Tt 可以导入一个文件，但我的数据存储在多个文件中。有什么方法可以同时将多个文件导入 Solr？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:03:24.587

您可能希望使用嵌套实体，外部实体为[FileListEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#FileListEntityProcessor)，您的实体（实体）位于其中并使用外部实体公开的变量。

您还需要在该外部实体**上将 rootEntity**属性设置为 false，以便为每个内部实体生成一个文档。

基本上，您需要在现有定义周围再增加一层实体。

或者，如果您有稍微不同的文件并且只有几个，您可以同时拥有几个实体定义，DIH 将运行它们。

# jsf-2 - Primefaces 向导 encodeStep NPE 异常抛出

> ID：15566795
> 
> 赞同：2
> 
> 时间：2013-03-22T09:26:07.707
> 
> 标签：jsf-2, primefaces

我已经为我的页面编写了一个 webdriver 测试，它测试了一个 primefaces 向导组件和行为。有一次，我收到此错误：

```
java.lang.NullPointerException
at org.primefaces.component.wizard.WizardRenderer.encodeStep(WizardRenderer.java:77)
at org.primefaces.component.wizard.WizardRenderer.encodeEnd(WizardRenderer.java:59)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
at com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewContextImpl.java:517)
at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1612)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIForm.visitTree(UIForm.java:362)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
at com.sun.faces.context.PartialViewContextImpl.processComponents(PartialViewContextImpl.java:378)
at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:298)
at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
at javax.faces.component.UIViewRoot.encodeChildren(UIViewRoot.java:982)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:411)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:286)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.meinanliegen.handlers.filters.NoCacheFilter.doFilter(NoCacheFilter.java:42)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.omnifaces.filter.FacesExceptionFilter.doFilter(FacesExceptionFilter.java:56)
at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.omnifaces.filter.GzipResponseFilter.doFilter(GzipResponseFilter.java:148)
at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.omnifaces.filter.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:115)
at org.omnifaces.filter.HttpFilter.doFilter(HttpFilter.java:75)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1812)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
at java.lang.Thread.run(Thread.java:722) 
```

我的 primefaces 向导看起来像：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui">

<p:growl id="growl" autoUpdate="true" life="6000" showDetail="true" />

<h:form prependId="false" style="height : 100%" id="registrationFormWizardId">
    <f:view beforePhase="#{userRegistrationWizard.afterPhase}">
    </f:view>
    <p:panel id="registrationFormWizardPanelGrid">
        <p:panelGrid>
            <p:row>
                <p:column>
                    <p:wizard widgetVar="wiz" flowListener="#{userRegistrationWizard.onFlowProcess}"
                        step="#{userRegistrationWizard.step}" backLabel="Zurück" nextLabel="Weiter">

                        <p:tab id="idOne" title="TITLE1">
                            <ui:include src="/WEB-INF/templates/steps/registration_step1.xhtml"></ui:include>
                        </p:tab>

                        <p:tab id="idTwo" title="TITLE2">
                            <ui:include src="/WEB-INF/templates/steps/registration_step2.xhtml"></ui:include>
                        </p:tab>

                        <p:tab id="idThree" title="TITLE3">
                            <ui:include src="/WEB-INF/templates/steps/registration_step3.xhtml"></ui:include>
                        </p:tab>
                    </p:wizard>
                </p:column>
            </p:row>
        </p:panelGrid>
    </p:panel>
</h:form> 
```

有人知道为什么会抛出这个异常吗？

更新 ：

我使用 Primefaces 3.5 和 MyFaces 2.1.17

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T09:34:43.857

根据`WizardRenderer`在向导中找不到应呈现的选项卡 ID 的 Java 代码。如果您的测试以某种方式回到第一页或最后一页，这可能是后果。

# actionscript-3 - 如何根据 as3 中的复选框值转到特定框架？

> ID：15566799
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:26:39.060
> 
> 标签：actionscript-3, flash

我正在尝试在 as3、Flash 中创建试卷。首先我创建了索引页。该索引页包含所有章节名称。我正在为这些章节使用复选框。

如果选择第 1 章，它将继续第 3 帧。第 1 章有 10 个问题。每个问题都在不同的框架上。如果选择第 2 章，它将在第 14 帧继续。第 2 章同样有 10 个问题。每个问题都在不同的框架上。

但是，如果使用复选框选择了两章，我想转到第 3 帧。通过单击下一步按钮，它将转到第 1 章的最后一个问题。即第13帧的问题10。然后它应该转到第2章的第一帧。即第14帧。

索引页共有10章。用户可以选择任何章节组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:26:52.823

你说你的代码是：

```
gobtn.addEventListener(MouseEvent.CLICK,fun2); 
function fun2(evt:Event):void { 
    if(chap1.selected==true) gotoAndStop(3); 
    if(chap2.selected==true) gotoAndStop(14); 
} 
backbtn.addEventListener(MouseEvent.CLICK,fun3); 
function fun3(evt1:Event):void { gotoAndStop(1); } 
```

为了使您的复选框按您的意愿工作（因此，如果`chap1`选中，则转到第 3 帧，无论是否`chap2`选中，`else`在您的第一个`if`.

```
gobtn.addEventListener(MouseEvent.CLICK,fun2); 
function fun2(evt:Event):void { 
    if(chap1.selected==true) gotoAndStop(3); 
    else // this is what's added
    if(chap2.selected==true) gotoAndStop(14); 
} 
backbtn.addEventListener(MouseEvent.CLICK,fun3); 
function fun3(evt1:Event):void { gotoAndStop(1); } 
```

# c++ - 确定字符串是否为 JSON 数字的快速方法

> ID：15566804
> 
> 赞同：1
> 
> 时间：2013-03-22T09:26:46.437
> 
> 标签：c++, json

检查不得使用 C++11 功能或其他库，例如 Boost、Regex 等。我想出了以下解决方案。不漂亮，但工作。它会从这里变得更优雅和/或更快吗？

```
bool isJsonNumber(const std::string& text)
{
    if(text.empty()) return false;

    bool foundE = false;
    bool foundESign = false;
    bool leadingZero = false;
    bool lastIsDigit = false;
    bool foundDot = false;

    for(uint32_t i=0; i < text.length(); ++i)
    {
        const unsigned char c = text[i];

        lastIsDigit = false;
        const bool currIsNoDigit = (c < '0' || c > '9');

        if(i == 0)
        {
            if(currIsNoDigit && c != '-' ) return false;
            if(c == '0') leadingZero = true;
            if(c != '-') lastIsDigit = true;
        }
        else
        {
            if(leadingZero)
            {
                leadingZero = false;
                if(c != '.') return false;
                foundDot = true;
            }
            else if(c == '.')
            {
                if(foundDot) return false;
                foundDot = true;
            }
            else if(c == 'e' || c == 'E')
            {
                if(foundE) return false;
                foundE = true;
            }
            else if(foundE && !foundESign)
            {
                if(currIsNoDigit && c != '-' && c != '+') return false;
                if(c == '+' || c == '-')
                {
                    foundESign = true;
                }
                else
                {
                    lastIsDigit = true;
                }
            }
            else
            {
                foundESign = false;
                if(currIsNoDigit) return false;
                lastIsDigit = true;
            }
        }
    }

    if(lastIsDigit == false) return false;

    return true;
} 
```

用例是一个小型嵌入式服务器，它接收巨大的 CSV 文件并用 JSON 格式向客户端提供部分响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:31:04.187

它可能更容易使用[`std::stod`](http://en.cppreference.com/w/cpp/string/basic_string/stof)：

```
size_t endpos;
std::stod(text, &endpos);

if (endpos != text.length())
{
    // Not a number
}
else
{
    // A number
} 
```

* * *

如果您没有`std::stod`.，因为它是 C++11 功能，您可以使用[`std::strtod`](http://en.cppreference.com/w/cpp/string/byte/strtof).

* * *

如果你想禁止`INFINITY`或`NAN`或十六进制浮点值，它就像检查字符串中的第二个或第三个字符不是字母一样简单：

```
if ((text.length() > 2 && std::isalpha(text[1])) ||
    (text.length() > 3 && std::isalpha(text[2])))
{
    // Not a number
} 
```

对于“更大”的数字，总是有`std::stold`or `std::strtold`。但是，如果您想要任意大小的数字，那么要么像现在一样做，要么使用诸如[GMP](http://gmplib.org/)之类的库（[`mpf_set_str`](http://gmplib.org/manual/Assigning-Floats.html#Assigning-Floats)这似乎是一个很好的功能）。

# matlab - 通过在 Matlab 中用 blockproc 划分图像网格进行图像过滤

> ID：15566805
> 
> 赞同：0
> 
> 时间：2013-03-22T09:26:47.510
> 
> 标签：matlab, grid, filtering

我尝试将图像划分为相同大小的网格，并获得过滤器对这些网格的响应。每个网格的每个响应矩阵都需要单独获得。例如，如果我过滤和图像大小为 500x500，网格大小为 100x100，则我需要获得 5*5 = 25 个大小为 100x100 的不同响应矩阵。我怎么能在 Matlab 上做到这一点？

我已经尝试过 blockproc，但它没有为每个图像网格提供单独的响应，而是对图像进行网格化并运行过滤器并给出更大的响应向量。这是我用于 blockproc 的代码

```
fun = @(x)  imfilter(x.data,filter,'conv');
img_res=blockproc(img,[100 100],fun,'UseParallel',1,'TrimBorder',1,'PadPartialBlocks',1); 
```

我可以按照我的建议去做吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:32:16.123

这是我所做的

```
% step 1 divide into blocks
szM = size(image)
nb = szM ./ grid_size % number of blocks in each dimension
C = mat2cell(image,repmat(grid_size(1),1,nb(1)), repmat(grid_size(2),1,nb(2)))

% step 2: do something for each block (here MIN)
C2 = cellfun(@(x) min(x(:)), C, 'un', 0)
M2 = cell2mat(C2) 
```

# c# - 伪造 IDbSet 支持异步操作

> ID：15566811
> 
> 赞同：13
> 
> 时间：2013-03-22T09:27:07.670
> 
> 标签：c#, entity-framework, unit-testing, async-await

我正在尝试在一个新项目中对我的第一个存储库进行单元测试，我们决定将 EF6 主要用于异步内容。我在为我的模型伪造 IDbSet 时遇到问题，并且在使用新的异步细节之前允许使用任何 Linq。

我正在使用本文中[提供](http://entityframework.codeplex.com/discussions/435590)的 FakeDbSet 。如果我做一个简单的查询，比如

```
await set.FirstOrDefaultAsync(e => e.Approved); 
```

这很好用。

当我尝试这样做时会出现问题：

```
await set.OrderByDescending(e => e.Date)
         .FirstOrDefaultAsync(e => e.Approved)` 
```

然后我得到一个错误：

> System.InvalidOperationException：源 IQueryable 的提供程序未实现 IDbAsyncQueryProvider。

通过分解流畅的语法并检查每一步的结果，我很清楚 IDbAsyncQueryProvider 在第一个“普通”Linq 运算符（例如`OrderBy`，`Where`或`Select`）之后消失了。

我怎样才能让它工作？

**更新**（因为有些混乱）：有 2 个项目；称他们为存储库和测试。测试当然参考存储库。调用`Where`发生在存储库中，它不知道 FakeDbSet（也不应该知道，因为它是一个仅测试类）。

**更新 2**：简单的演示[项目可以在这里下载](https://dl.dropbox.com/u/12591686/EFAsyncTestingIssues.zip)。在运行单元测试之前恢复 Nuget 包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-08T12:10:21.630

在这里，您有一个链接，其中包含您需要实现的确切类。 [http://msdn.microsoft.com/en-us/data/dn314429.aspx#async](http://msdn.microsoft.com/en-us/data/dn314429.aspx#async)

# go - 在 go 中，有没有办法在程序终止时执行代码？

> ID：15566812
> 
> 赞同：29
> 
> 时间：2013-03-22T09:27:09.140
> 
> 标签：go, deferred-execution

我知道你可以定义`init`在任何包中调用的函数，这些函数将在`main`. 我用它来打开我的日志文件和我的数据库连接。

有没有办法定义程序结​​束时将执行的代码，无论是因为它到达`main`函数的末尾还是因为它被中断？我能想到的唯一方法是在 main 使用的每个包上手动调用延迟`terminate`函数，但这非常冗长且容易出错。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-22T09:36:53.367

Go 开发人员考虑了C`atexit`功能，并拒绝了采用它的想法。

来自golang-nuts的相关[线程之一：](https://groups.google.com/d/topic/golang-nuts/qBQ0bK2zvQA/discussion)

[拉斯考克斯](https://groups.google.com/d/msg/golang-nuts/qBQ0bK2zvQA/vmOu9uhkYH0J)：

> Atexit 在单线程、短命的程序中可能有意义，但我怀疑它是否在长时间运行的多线程服务器中占有一席之地。我见过许多 C++ 程序在退出时挂起，因为它们正在运行并不真正需要运行的全局析构函数，并且这些析构函数正在清理和释放无论如何都会被操作系统回收的内存，只要程序可以到达退出系统调用。与所有这些痛苦相比，当您使用缓冲区时需要调用 Flush 似乎是完全合理的，并且无论如何对于正确执行长时间运行的程序都是必要的。
> 
> 即使忽略这个问题，atexit 引入了更多的控制线程，并且您必须回答诸如所有其他 goroutine 在 atexit 处理程序运行之前停止的问题吗？如果没有，他们如何避免干扰？如果是这样，如果一个人持有处理程序需要的锁怎么办？不断地。
> 
> 我根本不倾向于添加 Atexit。

[伊恩·兰斯·泰勒](https://groups.google.com/d/msg/golang-nuts/qBQ0bK2zvQA/W-GQviEvVSUJ)：

> 唯一完全可靠的机制是包装程序，它调用真实程序并在真实程序完成时进行清理。在任何语言中都是如此，而不仅仅是 Go。
> 
> 在我有点不成熟的意见中， os.AtExit 不是一个好主意。它是一种非结构化工具，会导致程序退出时以不可预测的顺序发生某些事情。它会导致奇怪的场景，例如程序需要很长时间才能退出，而这个操作应该非常快。它还会导致奇怪的函数，如 C 函数 _exit，或多或少意味着退出但不运行 atexit 函数。
> 
> 也就是说，我认为与 init 函数对应的特殊退出函数是一个有趣的想法。它将具有 os.AtExit 缺少的结构（即，退出函数的运行顺序与运行 init 函数时的顺序相反）。
> 
> 但是，如果您的程序被内核杀死，或者因为您调用了一些违反分段的 C 代码而崩溃，退出函数将无济于事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T20:40:53.453

如果在阅读完所有这些（并且可能看过[这个](http://pyvideo.org/video/647/make-sure-your-programs-crash)）之后，您仍然想要 atexit - 看看[https://github.com/tebeka/atexit](https://github.com/tebeka/atexit) :)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-22T09:59:01.320

总的来说，我同意 jnml 的回答。如果您仍然想这样做，您可以在函数中使用[defer ，如下所示：](http://golang.org/ref/spec#Defer_statements) [http](http://play.golang.org/p/aUdFXHtFOM) ://play.golang.org/p/aUdFXHtFOM 。`main()`

# c# - MVVM 中的上下文菜单

> ID：15566824
> 
> 赞同：11
> 
> 时间：2013-03-22T09:27:35.540
> 
> 标签：c#, wpf, mvvm, binding, contextmenu

我想将上下文菜单绑定到命令列表。

```
<Grid.ContextMenu>
    <ContextMenu ItemsSource="{Binding ItemContextCommands, Converter={StaticResource commandToStringConverter}}">
            <ContextMenu.ItemTemplate >
                    <DataTemplate DataType="MenuItem">
                            <MenuItem Command="{Binding}"></MenuItem>
                        </DataTemplate>
                </ContextMenu.ItemTemplate>
        </ContextMenu>
</Grid.ContextMenu> 
```

简单地将命令列表转换为对列表中的每个命令`commandToStringConverter`调用的字符串列表。`ToString()`

我怎样才能实现`Command`in each`MenuItem`被调用？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-22T09:44:45.597

我会使用一个小的“视图模型”来保存这样一个命令的信息。

```
class ContextAction : INotifyPropertyChanged
{
    public string Name;
    public ICommand Action;
    public Brush Icon;
} 
```

在您的视图模型中创建一个集合，该集合应该获得上下文操作，例如

```
ObservableCollection<ContextAction> Actions {get;set;} 
```

并简单地将这个集合绑定到你的`ContextMenu`.

```
<Grid.ContextMenu>
    <ContextMenu ItemsSource="{Binding Actions}" /> 
```

上下文菜单项现在`ItemTemplate`可以访问名称、命令以及您可能需要的任何其他内容。更改也可能很有用，`CommandParameter`以便它将使用操作拥有元素调用命令，而不是使用操作本身。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-22T09:48:37.477

我使用这样的东西：

```
public class ContextMenuVM
{ 
    public string Displayname {get;set;}
    public ICommand MyContextMenuCommand {get;set;}
} 
```

在您的上下文菜单数据上下文中：

```
public ObservableCollection<ContextMenuVM> MyCommandList {get;set;} 
```

在你的xml中

```
<ContextMenu ItemsSource="{Binding MyCommandList}">
        <ContextMenu.ItemTemplate >
                <DataTemplate DataType="MenuItem">
                        <MenuItem Header="{Binding Displayname}" Command="{Binding MyContextMenuCommand}"></MenuItem>
                    </DataTemplate>
            </ContextMenu.ItemTemplate>
    </ContextMenu> 
```

它是在没有 ide 的情况下编写的，所以可能存在一些语法错误

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-04-21T08:46:32.393

@blindmils 解决方案的改进 XAML 版本如下：

```
<ContextMenu ItemsSource="{Binding MyCommandList}">
    <ContextMenu.ItemContainerStyle>
        <Style TargetType="MenuItem">
            <Setter Property="Header" Value="{Binding Displayname}" />
            <Setter Property="Command" Value="{Binding MyContextMenuCommand }" />
        </Style>
    </ContextMenu.ItemContainerStyle>
</ContextMenu> 
```

# vbscript - 更改添加的工作表的名称

> ID：15566825
> 
> 赞同：1
> 
> 时间：2013-03-22T09:27:37.137
> 
> 标签：vbscript

```
objWriteWorkbook.sheets.add ,objWriteWorkbook.sheets(objWriteWorkbook.sheets.count)
Set NewWorksheetObject = objWriteWorkbook.Worksheets(num)
objWriteWorkbook.Sheets(num).Name = sheetName 
```

我想更改添加的工作表的名称。为该工作表添加工作表和对象创建工作正常但是当我尝试更改工作表的名称时出现错误**“未知运行时错误”**

任何人都可以帮助如何更改添加表的名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T14:02:59.643

添加时将新工作表分配给变量：

```
Set ws = wb.Sheets.Add(, wb.Sheets(wb.Sheets.Count))
ws.Name = sheetName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-14T18:40:56.827

```
set xlo=CreateObject("excel.application")
set wbo=xlo.workbooks.open("C:\Users\XXX\Desktop\Temp.xlsx")
Set ws = wbo.Sheets.Add(, wbo.Sheets("sheet1"))
ws.Name = "Priyesh"

wbo.save
wbo.close
xlo.quit
set wbo=nothing 
set xlo=Nothing 
```

# iphone - 插件在 cordova-2.3.0 和 iOS6 中没有触发几次

> ID：15566827
> 
> 赞同：0
> 
> 时间：2013-03-22T09:27:56.397
> 
> 标签：iphone, ios, cordova, phonegap-plugins

我正在使用cordova-2.3.0 和ios6 开发一个iphone 应用程序。在那个应用程序中，我使用的是 sherekit 插件。它在应用程序的主页上运行良好，当我们进入下一页时，所有插件大部分时间都没有触发。这是调用sharekit插件的代码。

```
cordova.exec(null, null, "ShareKitPlugin", "share", ["Hi", "http://www.google.com"]); 
```

谢谢。

# javascript - 使用 JavaScript 验证输入长度

> ID：15566833
> 
> 赞同：2
> 
> 时间：2013-03-22T09:28:20.540
> 
> 标签：javascript, html

如果用户在文本框中输入少于 4 个字母，我想显示错误。这是我现在正在使用的代码，它有点工作。问题是 - 它显示错误，然后它也在提交值。

如果用户输入少于 4 个字母，我想停止提交。

**JavaScript**

```
<script type="text/javascript">
function check(what)
{
    var length=what.search_text.value.length;   

    if (length >3 && length < 21)
        what.submit();
    else
        alert("Your nick should be 4-20 characters long.");
}
</script> 
```

**HTML**

```
<form method=post action=''><input type=hidden name=todo value=search>
<p align=center>
    Enter Your Name: 
    <input type=text name=search_text value='$search_text'>
    <input onclick=check(this.form); return false; type=submit value=Search>
</p>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:30:53.177

如果值无效，您需要

```
return false; 
```

这样表单提交就被取消了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:34:32.813

```
<script type="text/javascript">
function check(what)
{
    var length=what.search_text.value.length;   

    if (length >3 && length < 21){
        what.submit();
    }
    else {
        alert("Your nick should be 4-20 characters long.");
        return false;
    }

}
</script>

<?php
echo "<form method='post' action='' onsubmit='return check(this);'><input type=hidden name=todo value=search>
<p align=center>Enter Your Name: <input type=text name=search_text value='$search_text'><input type=submit value=Search></p><br>
</form>";
?> 
```

变化 ：

1.  `onsubmit='return check(this);'`在表单标签中添加
2.  `onclick`从按钮提交中删除
3.  `return false;`在 js 函数的 else 条件中添加

**建议**：总是尝试使用jQuery，它很简单并且会减少你的代码长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:36:57.400

您可以通过使用 RegularExpressionValidator 控件来实现这一点

像我正在使用的这个例子一样设计你的文本框。

```
<asp:TextBox ID="txtCityCode" runat="server" Width="147px" CssClass="txt" MaxLength="2"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="rfvCityCode" runat="server" ErrorMessage="City Code is required information."
                    ControlToValidate="txtCityCode" Display="None" ValidationGroup="Save" SetFocusOnError="True"></asp:RequiredFieldValidator>
                     <asp:RegularExpressionValidator ID="revCityCode" runat="server" ErrorMessage="Numbers and special characters not allowed in 'City Code' field."
                    ControlToValidate="txtCityCode" ValidationExpression="^[a-zA-Z\s]+$" ValidationGroup="Save"
                    Display="None" SetFocusOnError="True"></asp:RegularExpressionValidator> 
```

只需根据您的需要更改 ValidationExpression

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:47:54.030

```
 <script type="text/javascript">
        function check(what)
        {
            var length=what.search_text.value.length;   

            if (length >3 && length < 21)
               { what.submit(); return true; } 
            else
                {alert("Your nick should be 4-20 characters long."); 
                 return false;}
        }
        </script>

and in HTML 

  <input onclick='return check(this.form)' type="submit" value="Search"> 
```

# algorithm - 矩阵中可能的矩形数量

> ID：15566839
> 
> 赞同：2
> 
> 时间：2013-03-22T09:28:36.693
> 
> 标签：algorithm, permutation

我正在通过一种计算矩阵区域总和的算法。我阅读了一个预先计算总和以获得更好结果的解决方案。我想计算大小为 mXn 的二维矩阵中矩形（子 Maxtix）的可能数量。

任何人都可以使用排列和组合来解释解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:35:13.907

首先从最简单的情况开始：

```
Start with m x n, thats 1 rectangle.
Reduce n by 1, that gives another 2.
Reduce n by 1, that gives another 3.
Reduce n by 1, that gives another 4. 
```

你看到图案了吗？

当 n 下降到 1 时，从 m 中减去 1，然后重新开始：

```
Start with m-1 x n, thats 2 rectangles.
Reduce n by 1, that gives another 4.
Reduce n by 1, that gives another 6.
Reduce n by 1, that gives another 8. 
```

你看到模式了吗..？

现在您推断出 m-2、m-3、m-4、...、1。

现在从头开始减少 n，然后是 n（或者简单地将所有结果加倍，除了 mxn）。

所有这些结果的总和就是你的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:37:21.920

这不是算法，而是计数问题。尝试计算 1X1 矩阵和 1X2 2X1 3X2 等矩形的数量，然后你会看到

```
num_of_rect(mXn) = sum(i*j) for 0<i<m+1; 0<j<n+1 
```

* * *

在蟒蛇中：

```
def countRect(n,m):
    return sum([i*j for i in xrange(n+1) for j in xrange(m+1)])

if __name__ == "__main__":
    print countRect(2,3) 
```

给`18`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T10:04:10.843

![矩形计数](../Images/c3698505293cf2f7c3e36c736e9590ee.png)

您可以通过简单地选择要包含的行和列来计算所有矩形 a*b 和 a,b>=2（见图）：

```
C(m,2)*C(n,2) 
```

您可以通过 a>=2 计算 a*1 矩形

```
C(m,2)*n 
```

和 1*b 矩形 b>=2 通过

```
m*C(n,2) 
```

和 1*1 矩阵通过：

```
m*n 
```

所以添加这些作为最终答案：

```
C(m,2)*C(n,2) + C(m,2)*n + m*C(n,2) + m*n 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T10:16:39.657

mxn 矩阵中任意大小的可能矩形的数量

mn + (m-1)(n-1) + (m-2)(n-1) + .. + (m-m+1)(n-1) + (m-1)(m-2) + .. + (mm)(nn)

Sum { i * j } for i in [0,m]; j 在 [0,n]

# ios - ios中的日期和时间问题

> ID：15566841
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:28:44.170
> 
> 标签：ios, objective-c, datetime

我正在使用`datepicker`来选择，`time`但是在我检索时发送到服务器后，它显示了 5-6 小时的差异。

服务器托管在美国。

那么我将如何准确无误地做到这一点，用户可以从任何地方请求。

谢谢，

阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:38:22.450

UTC 是要使用的标准时区。以下是获取 UTC 日期的代码

```
+(NSString *)getCurrentTime{

    NSDate *date = [NSDate date];

    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];

    [dateFormat setDateFormat:@"yyyy-MM-ddHH:mm:ss"];

    [dateFormat setTimeZone:[NSTimeZone timeZoneWithName:@"UTC"]];

    NSString *dateStr = [dateFormat stringFromDate:date];

    RELEASE_OBJECT(date)

    RELEASE_OBJECT(dateFormat)

    return dateStr;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:35:07.187

如果您将 iPhone 默认时间发送到服务器，并且服务器也发送与您发送它的时间相同的时间，那么将您的时间转换`NSDate`为`NSString`具有`NSDateFormatter`不同时区的问题。

```
[dateFormatter setTimeZone:[NSTimeZone systemTimeZone]]; 
```

使用时使用上面的代码`NSDateFormatter`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:36:02.097

发送带有时区的日期。例如：

```
NSDateFormatter * formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'"];
NSDate *date = [formatter dateFromString:dateString]; 
```

将包括时区，服务器将能够转换为自己的时区。

我们使用[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)以获得更好的兼容性。还有 NSFormatter 子类可以从 ISO 8601 转换为 NSDate 并返回（[像这样](http://boredzo.org/iso8601unparser/)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:49:51.417

这是时区问题。您可以使用`[yourDate dateByAddingInterval:[NSTimeZone secondsFromGMT]];`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T09:51:12.080

请尝试设置时间的语言环境：

```
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd MM yyyy hh:mm:ss"];
    [dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"] autorelease]];

     NSDate* sourceDate = [dateFormatter dateFromString:dateString];

    //时区
    NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"UTC"];
    NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];

    //时区间隔
    NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:sourceDate];
    NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:sourceDate];
    NSTimeInterval 间隔 = 目的地GMTOffset - 来源GMTOffset；

    //转换日期
    NSDate* destinationDate = [[NSDate alloc] initWithTimeInterval:interval sinceDate:sourceDate] ;
    NSString *strFinalDate = [dateFormatter stringFromDate:destinationDate];

    [日期格式化程序发布]；

    [目的地发布日期]；

```

# javascript - 如何从此 json 字符串中获取值？

> ID：15566844
> 
> 赞同：0
> 
> 时间：2013-03-22T09:28:50.127
> 
> 标签：javascript, json

```
success: function(data){   alert(data[0].data.AVG(Rate)); } 
```

如何提醒 7.5？我试过 data[0].data.AVG(Rate), data.data.AVG(Rate), data.AVG(Rate)

```
([{"data":{"AVG(Rate)":"7.5"}}]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:32:01.233

```
alert(data[0].data["AVG(Rate)"]); 
```

如果这是数据的样子（对象数组）：

```
var data = [
    {
        "data": {
            "AVG(Rate)": "7.5"
        }
    }
]; 
```

关键是您的密钥的外观：`AVG(Rate)`

这有括号，因此如果您尝试使用符号访问它，JS 将尝试调用 AVG 函数`.`，这是行不通的。您需要使用方括号语法来避免语法问题。

在未来，我建议仅在键中使用字母数字（至少有一个字母前导）字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:38:15.327

这可能会帮助你:)

```
<script>
    var data = $.parseJSON('[{"data":{"AVG(Rate)":"7.5"}}]');
    alert(data[0]['data']['AVG(Rate)']);
</script> 
```

# java - 在eclipse中将java包中的所有标记为@Depracated

> ID：15566848
> 
> 赞同：6
> 
> 时间：2013-03-22T09:29:04.043
> 
> 标签：java, eclipse, deprecated

`@Depracated`如果文件太多无法手动制作，是否可以将java包（子包，类，方法，成员）的全部内容自动标记为使用eclipse（最好）或任何其他工具。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T09:36:53.640

您可以使用`sed`标记当前目录及以下目录中的所有类（在 Cygwin 中测试）。导航到所需的文件夹并运行：

```
for file in $(find . -name *.java); do sed -i 's/\(public class\)/@Deprecated\n\1/g' $file; done 
```

要标记接口，只需像这样添加它：

```
for file in $(find . -name *.java); do sed -i 's/\(\(public class\|interface\)\)/@Deprecated\n\1/g' $file; done 
```

**编辑**

正如@ŁukaszRzeszotarski 指出的那样，您可以在 Eclipse 中使用 Search/Replace 工具执行此操作。只需标记要执行操作的资源，然后按`Ctrl + h`。像这样填写：

![搜索](../Images/a75acf8dd661fd4b2af0b1fa6eb1690e.png) 然后，按`Replace`，然后像这样填写：

![代替](../Images/af318ad8ebfa5a63fcad2e3b8a9c5ee6.png)
全部做完！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T11:10:58.250

尝试创建一个名为`package-info.java`并弃用该包的文件。

```
@Deprecated
package foo; 
```

弃用`foo`且不会弃用`foo.bar`。

*在 Java 7 上测试；蚀。*

# android - 旋转后的OpenGL ES 2翻译

> ID：15566851
> 
> 赞同：3
> 
> 时间：2013-03-22T09:29:07.123
> 
> 标签：android, opengl-es, matrix, rotation, translation

我正在开发 android 中的增强现实应用程序。目前我对 Open GL ES 2.0 的东西有一些问题。首先我想旋转一个对象，然后翻译它，但它不起作用。单一的转换，意味着只有旋转或平移，正在工作。我认为我的问题类似于[OpenGL - 旋转后翻译，](https://stackoverflow.com/questions/13134107/opengl-translate-after-rotate)但那里的答案对我没有帮助。例如，如何将对象绕 z 轴旋转 45 度，然后将其向左或向右平移 100 像素？

这是一些代码：

```
Matrix.setIdentityM(mModelMatrix, 0);
// Euler angles in res[] from opencv 
Matrix.setRotateEulerM(mRotateMatrix, 0,  (float) res[0], (float) res[1], (float) res[2]);
Matrix.multiplyMM(mModelMatrix, 0, mRotateMatrix , 0, mModelMatrix, 0);
Matrix.translateM(mModelMatrix, 0, (x-hmWidth),(y-hmHeight)*(-1), 0);
Matrix.scaleM(mModelMatrix, 0, (float) arc.getSize().width, (float) arc.getSize().height, 10);
drawBlock(gl); 
```

**Udate：** 我发现有时欧拉角一定是错误的，或者我以不正确的方式使用它们。我不知道。当我使用`Matrix.rotateM(mModelMatrix, 0, 90, 0, 0, 1);` **AFTER**翻译时，一切正常。现在我不知道如何将欧拉角与 rotateM() 一起使用。我曾尝试调用该方法三次，但随后出现错误的轮换：

```
Matrix.rotateM(mModelMatrix, 0, (float) res[0], 1, 0, 0);
Matrix.rotateM(mModelMatrix, 0, (float) res[1], 0, 1, 0);
Matrix.rotateM(mModelMatrix, 0, (float) res[2], 0, 0, 1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:32:37.953

我认为我已经找到了一个可行的解决方案。函数“setRotateEulerM()”之前似乎在我的代码中产生了一些问题。现在我用“rotateM()”进行单次旋转。将 z 坐标设置为 -1 很重要。这是我的代码：

```
Matrix.setIdentityM(mModelMatrix, 0);
res = arc.getEulerAngles();

x = (int) ( (float) arc.getCenter().x / diffx);
y = (int) ( (float) arc.getCenter().y / diffy);
Matrix.translateM(mModelMatrix, 0, (x-hmWidth),(y-hmHeight)*(-1), -10f);
Matrix.rotateM(mModelMatrix, 0, (float) res[0], 1, 0, 0);
Matrix.rotateM(mModelMatrix, 0, (float) res[1], 0, 1, 0);
Matrix.rotateM(mModelMatrix, 0, (float) res[2], 0, 0, -1);

Matrix.scaleM(mModelMatrix, 0, (float) arc.getSize().width, (float) arc.getSize().height, 1);
drawBlock(gl); 
```

# sencha-touch - 如何在不离开我的混合应用程序的情况下进行 FB 提要分享帖子？

> ID：15566860
> 
> 赞同：1
> 
> 时间：2013-03-22T09:29:34.180
> 
> 标签：sencha-touch, sencha-touch-2, facebook-javascript-sdk, hybrid-mobile-app

我正在使用 Sencha touch 制作移动应用程序，它将作为本机应用程序捆绑并安装在设备上。在我的某些页面上的应用程序中，我想添加“共享”功能，该功能应该将一些数据发布到用户的提要中。在浏览器上进行测试时，我可以通过打开一个带有 FB 共享 URL 的窗口来做到这一点，例如“ [https://m.facebook.com/dialog/feed](https://m.facebook.com/dialog/feed) ”或“ [https://m.facebook.com/sharer.php](https://m.facebook.com/sharer.php) ”和传递所有相关参数，如[https://developers.facebook.com/docs/reference/dialogs/feed/中所述](https://developers.facebook.com/docs/reference/dialogs/feed/)

但是当这个应用程序被捆绑并且我与它共享时，用户被移动到浏览器并且不能返回到应用程序，因为`redirect_uri`不能指向应用程序，这就是为什么我想在我的应用程序中打开这个对话框，可能在一个 iFrame 中。这也是不可能的，因为这些对话框不允许通过 META 标签嵌入到 iframe 中，为了超越它，我必须进行用户登录，这又是另一个我无法在我的应用程序的 iFrame 中打开的对话框。

我还查看了示例 sencha 应用程序[http://blooming-day-7830.herokuapp.com/](http://blooming-day-7830.herokuapp.com/)但它也需要用户单独登录页面而不是打开应用程序内对话框。

所以我的问题是**混合应用程序如何在不将用户转移到浏览器的情况下与 FB 连接**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:07:32.843

如果您决定使用 PhoneGap，您可以尝试以下两个选项。在将 Phonegap 呼叫切换到之前，您必须检查 iOS 版本。. .

**选项 1：**适用于 6.0 之前的 iOS

Phonegap 有一个非常漂亮的 ChildBrowser 插件，您可以使用它来加载 FB 共享页面，而无需离开 iOS 5.0 及更低版本的应用程序。

**选项 2：**适用于 iOS 6.0+

Facebook Share 功能现已添加到 iOS。因此，您所要做的就是调用您创建的自定义插件类，并使用基本的 Phonegap 插件调用来调用标准 FB 共享代码。您不会离开应用程序，ChildBrowser 不必显示，相反，您将获得将显示的股票 iOS-FB 共享表，您可以添加图片、文本等，并发布到Facebook。

# javascript - 向 Sigma.js 中的节点添加 onclick 事件

> ID：15566861
> 
> 赞同：8
> 
> 时间：2013-03-22T09:29:35.413
> 
> 标签：javascript, graph, click

我在 sigma.js 中有一个非常简单的示例，它读取带有一些附加数据的 gexf 文件。

```
// Instanciate sigma.js and customize rendering :
var sigInst = sigma.init(document.getElementById('graph-container')).drawingProperties({
    defaultLabelColor: '#fff',
    defaultLabelSize: 14,
    defaultLabelBGColor: '#fff',
    defaultLabelHoverColor: '#000',
    labelThreshold: 6,
    defaultEdgeType: 'straight'
}).graphProperties({
    minNodeSize: 0.5,
    maxNodeSize: 5,
    minEdgeSize: 1,
    maxEdgeSize: 1
}).mouseProperties({
    maxRatio: 4
});

// Parse a GEXF encoded file to fill the graph
// (requires "sigma.parseGexf.js" to be included)
sigInst.parseGexf(gexfFile); 
```

这实际上只是取自教程。现在我想为所有节点添加一个点击事件。谁能告诉我一个正确的方法来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-06-30T21:32:52.560

根据官方文档：

```
s = new sigma({...});

// Bind the events:
s.bind('overNode outNode clickNode doubleClickNode rightClickNode', function(e) {
    console.log(e.type, e.data.node.label, e.data.captor);
}); 
```

[https://github.com/jacomyal/sigma.js/blob/master/examples/events.html](https://github.com/jacomyal/sigma.js/blob/master/examples/events.html)

（接受的答案对我不起作用。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-23T17:50:49.580

**Step1 - 编写事件处理程序**

```
function onClick(event) {
    window.console.log("clicked!");
} 
```

**第 2 步 - 查找事件名称**

我一直想知道事件名称可能是什么。似乎“onmouseover”、“onmousedown”等已被重命名，“onmouse”部分被截断，“节点”附加在末尾。

因此，对于单击事件，它将是“downnodes”

**第 3 步 - 将处理程序链接到点击事件：**

您必须使用 bind() 函数将事件处理程序绑定到事件名称。

```
sigInst.bind('downnodes',onClick).draw(); 
```

**事件列表@ v1.0.3**

感谢 Matt 提供的清单。

click、rightClick、clickStage、doubleClickStage、rightClickStage、clickNode、clickNodes、doubleClickNode、doubleClickNodes、rightClickNode、rightClickNodes、overNode、overNodes、outNode、outNodes、downNode、downNodes、upNode、upNodes - 都应该是小写的。

# php - 致命错误：在第 30 行的 C:\xampp\htdocs\CodeIgniter_2.1.3\application\controllers\customer.php 中的非对象上调用成员函数 register()

> ID：15566869
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:30:08.287
> 
> 标签：php, codeigniter

这是我的控制器类

```
public function _construct()
{
    parent::_construct();
    $this->load->model('customer_model');

}
public function create()
{

    $this->load->helper('form');
    $this->load->library('form_validation');
    $this->form_validation->set_rules('name', 'Title', 'required');
    $this->form_validation->set_rules('address', 'text', 'required');

    if ($this->form_validation->run() === FALSE)
    {

    $this->load->helper('url');
    $this->load->view('templates/header');  
    $this->load->view('master/customer');

    }
    else
    {
    $this->customer_model->register();
    //$this->load->view('news/success');
    } 
```

} }

这是我的穆德尔课

类 Customer_model 扩展 CI_model {

```
public function _construct()
{
    $this->load->database();
}

public function register()
{

    $data = array(
        'name' => $this->input->post('name'),

        'address' => $this->input->post('address')
    );
    return $this->db->insert('registration', $data);
} 
```

}

运行 codeigniter 时出现此错误

遇到 PHP 错误

严重性：通知

消息：未定义属性：Customer::$customer_model

文件名：控制器/customer.php

行号：30

致命错误：在第 30 行的 C:\xampp\htdocs\CodeIgniter_2.1.3\application\controllers\customer.php 中的非对象上调用成员函数 register()

我是codeigniter的新手，请告诉我为什么会发生这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:43:20.140

在控制器和模型中，尝试更改：

```
public function _construct() {
....
} 
```

到

```
public function __construct() { //double underscore
....
} 
```

# java - Eclipse中如何增加服务器的启动时间

> ID：15566870
> 
> 赞同：-5
> 
> 时间：2013-03-22T09:30:14.740
> 
> 标签：java, eclipse

如何在eclipse中禁用服务器启动超时因为它在启动服务器时出错“服务器无法在给定时间内启动”启动时间已过期。

请帮忙。

谢谢回答。实际上我使用的是 jboss 4.0 服务器，它需要太多时间才能启动。在完全开始之前。eclipse 显示错误“服务器无法在给定时间内启动”我想禁用 eclipse 的这个功能。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T09:56:41.707

在 eclipse open menu中，将打开`Window -> Show View -> Other`一个新窗口，然后在文件夹下选择，然后选择它（或）只需单击键盘打开 Show View [ ] 这是一个 eclipse 快捷键。见下图。`Show View``Server``Server``Alt + Shift + Q, Q`

![在此处输入图像描述](../Images/3119508bae700fb55841813cd19e67d7.png)

这里我使用了 JBOSS v5.0.2。然后打开一个服务器窗口`right click on JBOSS v5.0.2`并单击`Open`选项，见下图。

![JBOSS 服务器视图](../Images/2a98beaa509f92a8f35dd9f00247891a.png)

单击打开选项后会打开概览窗口，然后单击`Timeouts`左侧此处`Start`时间默认显示为 50 秒，然后将开始时间增加到`900`等于 15 分钟，然后单击`Save`按钮保存更改。下图显示了详细的透视图。

![JBoss 概述](../Images/008079e1cbd94807e1ac241e3581b365.png)

**如果您再次遇到此问题，请在“超时”选项卡中增加时间。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:36:00.267

由于我看到您使用的是 JBOSS，因此这里有一个链接，其中描述了如何操作： [link](http://techthinking.net/2010/02/how-to-increase-server-timeout-in-eclipse/)

# r - as.Date 在从 'ddmmmyyyy' 转换时返回 NA

> ID：15566875
> 
> 赞同：28
> 
> 时间：2013-03-22T09:30:53.497
> 
> 标签：r, date, r-faq

我正在尝试将字符串“2013-JAN-14”转换为日期，如下所示：

```
sdate1 <- "2013-JAN-14"
ddate1 <- as.Date(sdate1,format="%Y-%b-%d")
ddate1 
```

但我得到：

```
[1] NA 
```

我究竟做错了什么 ？我应该为此目的安装一个软件包吗（我尝试安装 chron）。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-22T09:34:50.420

为我工作。它不适合您的原因可能与您的系统语言环境有关。

`?as.Date`有以下说法：

```
## This will give NA(s) in some locales; setting the C locale
## as in the commented lines will overcome this on most systems.
## lct <- Sys.getlocale("LC_TIME"); Sys.setlocale("LC_TIME", "C")
x <- c("1jan1960", "2jan1960", "31mar1960", "30jul1960")
z <- as.Date(x, "%d%b%Y")
## Sys.setlocale("LC_TIME", lct) 
```

值得一试。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-06-27T01:46:07.863

如果您尝试将上课日期转换为上课日期，也会发生这种`factor`情况 `Date`。你需要先转换成`POSIXt`否则`as.Date`不知道你的字符串的哪一部分对应什么。

错误的方式：直接从因子转换为日期：

```
a<-as.factor("24/06/2018")
b<-as.Date(a,format="%Y-%m-%d") 
```

你会得到一个输出：

```
a
[1] 24/06/2018
Levels: 24/06/2018
class(a)
[1] "factor"
b
[1] NA 
```

正确的方法，将因子转换为 POSIXt，然后转换为日期

```
a<-as.factor("24/06/2018")
abis<-strptime(a,format="%d/%m/%Y") #defining what is the original format of your date
b<-as.Date(abis,format="%Y-%m-%d") #defining what is the desired format of your date 
```

你会得到一个输出：

```
abis
[1] "2018-06-24 AEST"
class(abis)
[1] "POSIXlt" "POSIXt"
b
[1] "2018-06-24"
class(b)
[1] "Date" 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-10T06:05:38.543

我下面的解决方案可能不适用于导致 as.Date() 返回 NA 的所有问题，但它确实适用于某些问题，即当以因子格式读取 Date 变量时。

只需使用 stringsAsFactors=FALSE 读取 .csv

```
data <- read.csv("data.csv", stringsAsFactors = FALSE)
data$date <- as.Date(data$date) 
```

在尝试（但失败）用我的系统语言环境解决 NA 问题后，这个解决方案对我有用。

# html - HTML5 应用程序缓存仅用于依赖项

> ID：15566877
> 
> 赞同：1
> 
> 时间：2013-03-22T09:31:03.720
> 
> 标签：html, browser-cache

我只想缓存一些文件，如 JavaScript 和 CSS、字体文件和图像精灵。

为文件添加清单文件更好还是让浏览器进行缓存？

如果清单更好，如果用户没有网络连接，我仍然可以让页面无法访问吗？如何？

我不希望这个网站离线工作，我只想在二级页面上更快地加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T13:49:38.210

不，您用来引用清单文件的页面本身将始终被缓存。看：

*   [HTML5缓存每次都下载root](https://stackoverflow.com/q/12419652/8655)
*   [HTML5 缓存清单没有 html 文件本身的缓存](https://stackoverflow.com/q/5045782/8655)

因此，您将始终拥有至少一个可离线使用的页面。但是，这可能是通常无法访问的页面，您可以`iframe`从在线页面中引用它。

# javascript - IE8 数组 filter() 不起作用

> ID：15566880
> 
> 赞同：1
> 
> 时间：2013-03-22T09:31:04.497
> 
> 标签：javascript, arrays, internet-explorer-8, array-difference

我知道在 IE8 中不支持数组过滤功能。在互联网上寻求帮助后，我发现了这个 - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

它表明 IE8 将使用上面的代码工作。

HTML 代码：

```
<body>
<a href="javascript:void(0)" onclick="calculateDiff()">Calculate</a>
</body> 
```

JS代码：

```
function calculateDiff() {
    var arr1 = new Array(1, 2, 3);
    var arr2 = new Array(3, 4, 5);
    var res = arr1.diff(arr2);

    alert(res);
}

Array.prototype.diff = function(a) {

    if(!Array.prototype.filter) {
        alert("not supported");
        Array.prototype.filter = function(fun) {
            "use strict";

            if(this == null)
                throw new TypeError();

            var t = Object(this);
            var len = t.length >>> 0;
            if(typeof fun != "function")
                throw new TypeError();

            var res = [];
            var thisp = arguments[1];
            for(var i = 0; i < len; i++) {
                if(i in t) {
                    var val = t[i]; // in case fun mutates this
                    if (fun.call(thisp, val, i, t))
                        res.push(val);
                }
            }

            return res;
        };
    }
    else {
        alert("supported");
        return this.filter(function(i) {
            return !(a.indexOf(i) > -1);
        });
    }
} 
```

我已经在这个小提琴中实现了解决方案 - [http://jsfiddle.net/7LFMA/](http://jsfiddle.net/7LFMA/)

代码有什么问题？为什么它不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:47:38.813

第一次运行`diff`时，它只会提示`"Not Supported"`，安装`filter`polyfill 但*什么也不做*。它只是返回`undefined`，而不是像它应该做的那样不同。

删除`else`，或者最好只是将`filter`安装移到`diff`功能之外 - 它不是它的一部分（例如，在关闭方面，尽管现代引擎会关心这一点）。

此外，IE8 不支持该`indexOf`方法，您还需要[将此兼容 shim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf#Compatibility)放入。

```
if (!Array.prototype.indexOf)
    Array.prototype.indexOf = function (searchElement) {…};

if (!Array.prototype.filter)
    Array.prototype.filter = function(fun) {…};

Array.prototype.diff = function(a) {
    return this.filter(function(i) {
        return !(a.indexOf(i) > -1);
    });
};

function calculateDiff() {
    var arr1 = new Array(1, 2, 3);
    var arr2 = new Array(3, 4, 5);
    var res = arr1.diff(arr2);

    alert(res);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:37:29.540

IE8 不支持数组的 indexOf - 你仍然在代码中使用它，所以一旦你实现过滤器，它确实存在，然后 IE8 将尝试使用 indexOf。

在您的代码中，一旦您调用 DIFF，您实际上并没有应用过滤器，但是一旦您这样做，您还需要实现 indexOf

[MDN 数组 indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

# java - 多线程错误

> ID：15566886
> 
> 赞同：1
> 
> 时间：2013-03-22T09:31:19.147
> 
> 标签：java, android, android-asynctask

我有一个需要使用 AsyncTask 的应用程序，但我遇到的问题是主线程走得太远并最终导致我的应用程序崩溃，因为我的 Connect1 线程尚未检索到需要继续的信息。我想知道我怎么能让线程等到 AsyncTask 线程消失，然后主线程才能继续。

代码：

```
private void gNameOriginTag() {

    TextView tV;

    Connect1 connect1 = new Connect1();
    connect1.execute();

    // Set the long name for the chosen.
    tV = (TextView) view.findViewById(R.id.gLName);
    tV.setText(columns.get(4));      //<<<< Error is here.

    ....
} 
```

Connect1 异步任务：

```
private class Connect1 extends AsyncTask<String, Void, String>{

    @Override
    protected String doInBackground(String... params) {

        Connection conn = null;
        Statement stmt = null;

        try {
            // STEP 2: Register JDBC driver
            Class.forName(JDBC_DRIVER);

            // STEP 3: Open a connection
            conn = DriverManager.getConnection(DB_URL, USER, PASS);

            // STEP 4: Execute a query
            stmt = conn.createStatement();

            // STEP 5a: Extract data from result set
            ResultSet rs = stmt.executeQuery("SELECT * FROM gs WHERE name ='"
                    + gSelected + "'");
            ResultSetMetaData rsmd = (ResultSetMetaData) rs.getMetaData();
            int x = 1;
            while (rs.next()) {
                while (x < rsmd.getColumnCount()) {

                    // Retrieve Strings & Add it to the ArrayList.
                    columns.add(rs.getString(x));
                    x++;
                }

            }
            rs.close();
            stmt.close();
            conn.close();

        } catch (SQLException se) {
            // Handle errors for JDBC
            se.printStackTrace();
        } catch (Exception e) {
            // Handle errors for Class.forName
            e.printStackTrace();
        } finally {
            // finally block used to close resources
            try {
                if (stmt != null)
                    stmt.close();
            } catch (SQLException se2) {
            }// nothing we can do
            try {
                if (conn != null)
                    conn.close();
            } catch (SQLException se) {
                se.printStackTrace();
            }// end finally try
        }// end try

        return "";
    }
} 
```

我这样做的原因是因为 android 2.3.3 没有在我学到的主线程上运行 mysql，所以我正在尝试学习 AsyncTask，所以我在“代码：”中试图完成的事情是以某种方式使主线程等待/加入（我还读到暂停主线程是不好的，所以我更加迷失在做什么）等待 Connect1 线程完成，以便：

```
tV.setText(columns.get(4)); 
```

可以检索，所以我的应用程序不会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:33:49.153

定义一个由 AsyncTask 在完成时调用的方法，然后再次在 UIThread 上运行。

MainThread：调用 AsyncTask

AsyncTask：完成工作并调用 doWhenDoneWithBackgroundWork

doWhenDoneWithBackgroundWork: 再次在 MainThread 上做一些工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:34:57.043

`onPostExecute`您可以在异步任务的方法上编写代码。

# java - 休眠：在会话刷新期间随机异常和记录未更新，使用 saveOrUpdate

> ID：15566888
> 
> 赞同：1
> 
> 时间：2013-03-22T09:31:21.647
> 
> 标签：java, mysql, hibernate, ubuntu

我正在尝试使用最新的时间戳更新记录。不久前，我遇到了一个例外。现在，我没有收到异常，但数据库中的记录没有更新。

```
ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper  - Duplicate entry '1584034242' for key 'PRIMARY'
org.hibernate.exception.ConstraintViolationException: Duplicate entry '1584034242' for key 'PRIMARY' 
```

`session.flush();`在finally块上线。

正在更新的记录具有相同的主键（数据库中现有记录的），但两列的值已更改，因此它**不是**重复的。我原以为这`saveOrUpdate`会救我到这里，而且它在不久前就开始工作了。

```
public void flush(Object dataStore) throws DidNotSaveRequestSomeRandomError {
        Transaction txD;
        Session session;
        session = currentSession();
        if (session.getTransaction() != null && session.getTransaction().isActive()) {
            txD = session.getTransaction();
        } else {
            txD = session.beginTransaction();
        }

        try {
            session.saveOrUpdate(dataStore);
        } catch (MappingException e) {
            e.printStackTrace();
        }
        try {
            txD.commit();
            while (!txD.wasCommitted())
                ;
        } catch (ConstraintViolationException e) {
            log.error("Unable to store data from " + dataStore.getClass().toString());
            txD.rollback();
            throw new DidNotSaveRequestSomeRandomError(dataStore, feedbackManager);
        } catch (TransactionException e) {
            log.debug("txD state isActive" + txD.isActive() + " txD is participating"
                    + txD.isParticipating());
            log.debug(e);
            txD.rollback();
        } finally {
            session.flush();
            txD = null;
            session.close();
        }
    } 
```

编辑：做了更多的谷歌搜索，发现我需要在我的 xml 定义中使用动态更新才能让它工作。

```
<class name="My.Java.Class"
    table="MyTable" dynamic-update="true"> 
```

仍然不起作用，我得到那个重复的条目。我没有使用更新子句，而是假设 saveORUpdate 应该可以工作。并且应该有某种方式让它工作。

**或者**

我应该抓住 constraintViolationException 并改为执行强制“更新”子句吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:07:22.697

我认为hibernate没有得到你的主键id值，你可以在你的DataStore bean中尝试在主键字段的getter方法中分配id，比如

```
String getPrimayValue(String primayValue)
{
    this.primayValue = primayValue;
    return primayValue;
} 
```

我以前遇到过同样的问题，它对我有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:29:49.380

做了更多的谷歌搜索，发现我需要在我的 xml 定义中使用动态更新才能让它工作。

```
<class name="My.Java.Class"
    table="MyTable" dynamic-update="true"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:38:12.800

flush() 方法只是与数据库同步，然后您需要提交或清除会话以查看更改。

如果你只是提交。它会自动刷新，你也可以从另一个会话中看到你的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:44:35.050

我认为你使用了太多的 try catch 块更好地做到这一点，以及带有**;的****while循环是什么？**不需要这样做。

 **```
 try {
            txD.commit();
            while (!txD.wasCommitted()) ;//this is not needed
        } 
```

您可以简单地执行以下操作：

```
try{
    session = currentSession();
        if (session.getTransaction() != null && session.getTransaction().isActive()) {
            txD = session.getTransaction();
        } else {
            txD = session.beginTransaction();
        }

    session.saveOrUpdate(dataStore);
    txD.commit();
   }catch (MappingException e) {
        e.printStackTrace();
    }catch (ConstraintViolationException e) {
        log.error("Unable to store data from " + dataStore.getClass().toString());
        txD.rollback();
        throw new DidNotSaveRequestSomeRandomError(dataStore, feedbackManager);
    } catch (TransactionException e) {
        log.debug("txD state isActive" + txD.isActive() + " txD is participating"
                + txD.isParticipating());
        log.debug(e);
        txD.rollback();
    } finally {
        session.flush();
        txD = null;
        session.close();
    } 
```**

# sitecore - 如何在 Sitecore MVC 中呈现字段 - 部分视图

> ID：15566889
> 
> 赞同：0
> 
> 时间：2013-03-22T09:31:25.167
> 
> 标签：sitecore, sitecore-mvc

如何在部分视图中从模板渲染字段或图像。我需要通过页面编辑器编辑内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:57:16.333

有几种方法可以做到这一点，但在最基本的层面上，您可以使用以下语法在局部视图中呈现字段：

```
@Html.Sitecore().Field("myFieldName") 
```

我建议查看 John West 的博客以获取更多与 MVC 相关的提示：[http ://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/06/Posts-about-Using- MVC-with-the-Sitecore-ASPNET-CMS.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/06/Posts-about-Using-MVC-with-the-Sitecore-ASPNET-CMS.aspx)

Sitecore 的 SDN 站点上也有文档：http: [//sdn.sitecore.net/Reference/Sitecore%206/MVC%20Reference.aspx](http://sdn.sitecore.net/Reference/Sitecore%206/MVC%20Reference.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T13:41:55.980

通过使用 FieldRenderer.Render 访问您的字段的值并在视图@Html.Raw(Model.Urfieldname) 中渲染它。这将起作用。

谢谢

# mysql - MySQL中的变量和@variable有什么区别

> ID：15566891
> 
> 赞同：5
> 
> 时间：2013-03-22T09:31:30.843
> 
> 标签：mysql, database

如果我们在 mysql 中声明一个变量为：

```
declare prev_year int; 
```

`set prev_year = 100;`和`set @prev_year = 100;`一样吗？

它们看起来像不同的变量有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:43:55.260

不，它们实际上并不相同……但根据使用的上下文，它们可以被视为相同。

我会解释的。MySQL 有会话变量，这些是您分配的变量，直到会话结束（想想连接变量）。这些变量用`@`符号声明。所以你可以执行这两个语句，它会起作用：

```
SET @myId := 123;

SELECT * FROM table
WHERE id = @myId; 
```

当您创建存储过程并使用 DECLARE 时，您的变量在该过程的范围内，例如

```
DECLARE myId INT;

SELECT id INTO myId FROM table
WHERE name = 'steve'; 
```

# ruby - 如何从 ruby 设置 iTunes 曲目位置

> ID：15566894
> 
> 赞同：0
> 
> 时间：2013-03-22T09:31:51.487
> 
> 标签：ruby, itunes

我想从 ruby​​ 更新 iTunes 中的曲目路径，但无法正常工作。出于某种原因，我对 track.setLocation() 的调用什么也没做。这是我正在使用的脚本：

```
require 'osx/cocoa'
include OSX
OSX.require_framework 'ScriptingBridge'

def getSourceLibrary(iTunes)
    iTunes.sources.each do |source|
        if (source.kind == 1800169826) # TV Kind
            return source
        end
    end
    return nil
end

iTunes = SBApplication.applicationWithBundleIdentifier:'com.apple.iTunes'
library=getSourceLibrary(iTunes)
libraryPlaylists=library.libraryPlaylists

libraryPlaylists[0].fileTracks.each do | track |
    if (track.videoKind==1800823892)
        loc = track.location.to_s
        puts "Before: #{loc}"
        loc = loc.gsub(/\/mounts\/TVShows/,'/mounts/TV')
        loc = loc.gsub(/\/mounts\/incoming/,'/mounts/TV')
        track.setLocation(loc)
        puts "After: #{track.location.to_s}"
    end
end 
```

该脚本遍历 iTunes 库并尝试更改路径。不过前后是一样的！即使正则表达式搜索和替换有效。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:46:19.953

我想出了一个解决我的问题的方法。为了设置位置，您必须传递一个 NSURL 类型的对象。因此，如果我使用以下内容修改问题中的代码，则一切正常：

```
track.setLocation(NSURL::URLWithString(loc)) 
```

# c# - iTextSharp：拆分页面大小等于文件大小

> ID：15566896
> 
> 赞同：2
> 
> 时间：2013-03-22T09:31:54.390
> 
> 标签：c#, itext

这是我拆分大型 PDF (144 mb) 的方法：

```
public int SplitAndSave(string inputPath, string outputPath)
{
    FileInfo file = new FileInfo(inputPath);
    string name = file.Name.Substring(0, file.Name.LastIndexOf("."));

    using (PdfReader reader = new PdfReader(inputPath))
    {
        for (int pagenumber = 1; pagenumber <= reader.NumberOfPages; pagenumber++)
        {
            string filename = pagenumber.ToString() + ".pdf";

            Document document = new Document();
            PdfCopy copy = new PdfCopy(document, new FileStream(outputPath + "\\" + filename, FileMode.Create));

            document.Open();

            copy.AddPage(copy.GetImportedPage(reader, pagenumber));

            document.Close();
        }
        return reader.NumberOfPages;
    }
} 
```

对于大多数 PDF（小尺寸，我猜是旧格式），一切正常。但是对于更大的页面（可能使用 refstreams 之类的东西来获得更好的压缩），拆分页面作为一页打开，但其大小等于原始 PDF 的大小。我能做些什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T15:05:16.493

如果您的文档[Top_Gear_Magazine_2012_09.pdf](http://www.filehost.ro/29380468/Top_Gear_Magazine_2012_09_pdf/)原因确实是我提到的原因：所有页面都将对象**2 0 R**称为**/Resources**，而**2 0 obj**中的字典又会引用 PDF 中的所有图像。

要将文档拆分为仅包含所需图像的部分文档，您应该通过首先找出哪些图像属于哪些页面然后为所有页面创建单独的**/Resources**字典来预处理文档。

由于您已经在此上下文中使用了 iText，因此您还可以使用它来找出哪些页面需要哪些图像。使用 iText`parser`包最初使用一个实现逐页解析 PDF，该`RenderListener`实现的`RenderImage`方法只记住当前页面上使用了哪些图像对象。（作为一个特殊的转折点，iText 隐藏了相关图像 XObject 的名称；不过，您会获得间接对象，并且可以查询其对象和世代编号，这足以满足下一步的需求。）

在第二步中，您在 a 中打开文档`PdfStamper`并遍历页面。对于每个页面，您检索**/Resources**字典并复制它，但仅复制那些 XObjects 引用，这些引用引用了您在第一步中为相应页面记住其对象编号和世代的图像对象。最后，您将缩小的副本设置为相关页面的**/Resources**字典。

生成的 PDF 应该拆分得很好。

**PS**最近在 iText 邮件列表中出现了一个非常相似的问题。[在该线程中，此处给出的解决方案已得到改进](http://itext-general.2136553.n4.nabble.com/Resources-All-on-First-Page-tp4660563p4660597.html)，为了解决 iText 隐藏 xobject 名称引起的困难，我现在建议通过使用不同`ContentOperator`的“Do”在名称丢失之前进行干预，这里是 Java 版本：

```
class Do implements ContentOperator 
{ 
    public void invoke(PdfContentStreamProcessor processor, PdfLiteral operator, ArrayList<PdfObject> operands) throws IOException 
    { 
        PdfName xobjectName = (PdfName)operands.get(0); 
        names.add(xobjectName); 
    } 

    final List<PdfName> names = new ArrayList<PdfName>(); 
} 
```

这个内容操作符简单地收集使用的xobjects 的名称，即为给定页面保留的xobject 资源。

# awk - awk：在不同文件中搜索字符串，然后将结果附加到输出中

> ID：15566911
> 
> 赞同：0
> 
> 时间：2013-03-22T09:32:51.213
> 
> 标签：awk

我有`file1.txt`以下

```
30012516|Geralyn|test|1010029|9985|0029|50|00|OneTime|1227065|2013-03-04|||||||Code4
30013017|tamara|test|3440029|1114|029|41|00|OneTime|1239244|2013-03-04|||||||Code3
30015518|daniel|test|3140029L|6440|0029|99|00|OneTime|1239306|2013-03-03|||||||Code2
30050011|first|test|1240030|1745|030|96|00|OneTime|1284010|2013-02-22|||||||Code1
10010905|madhu|com|5230029|614|029|29|10|OneTime|1293016|2013-03-04|||||||Code5 
```

这是另一个`file2.txt`包含上面最后一个字符串的值`file1.txt`

```
Code1=Results of code1
Code3=Results of code3 
Code2=Results of code2
Code5=Results of code5
Code6=Results of code6
Code4=Results of code4
Code7=Results of code7
Code8=Results of code8
Code9=Results of code9
Code10=Results of code10 
```

我想使用`awk`命令首先搜索`file1.txt`in的最后一个字符串`file2.txt`并附加结果值如下（这应该是最终输出）

```
30012516|Geralyn|test|1010029|9985|0029|50|00|OneTime|1227065|2013-03-04|||||||Code4|Results of code4
30013017|tamara|test|3440029|1114|029|41|00|OneTime|1239244|2013-03-04|||||||Code3|Results of code3
30015518|daniel|test|3140029L|6440|0029|99|00|OneTime|1239306|2013-03-03|||||||Code2|Results of code2
30050011|first|test|1240030|1745|030|96|00|OneTime|1284010|2013-02-22|||||||Code1|Results of code1
10010905|madhu|com|5230029|614|029|29|10|OneTime|1293016|2013-03-04|||||||Code5|Results of code5 
```

我尝试了下面的命令，但它只给出了值，但无法将结果附加到`file1.txt`

```
awk -F= 'NR==FNR{A[$1]=$2; next} $NF in A{print A[$NF]}' file2.txt FS=\| file1.txt  > output.out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:45:11.400

试试这一行：

```
 awk -F= 'NR==FNR{a[$1]=$2;next} {for(x in a) if($0~"\\|"x"$"){print $0"|"a[x];break}}' file2 file1 
```

或对您的陈述进行一些修正：

```
 awk -F= 'NR==FNR{A[$1]=$2; next} $NF in A{print $0,A[$NF]}' file2.txt FS=\| OFS="|" file1.txt 
```

# php - Php 前缀后更改

> ID：15566914
> 
> 赞同：0
> 
> 时间：2013-03-22T09:33:01.283
> 
> 标签：php, posts

在我的网站上，人们可以发布视频和图片。所有帖子都是这种格式

```
domain.com/gag/02938482 
```

如何更改帖子的前缀，而不是`gag`例如`p`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:40:20.293

Make sure you have `RewriteEngine on` in the `.htaccess` file

```
RewriteEngine on                                 # Turns the rewrite engine on
RewriteRule ^gag/([^/.]+)/?$ view.php?pid=$1 [L] 
```

*   `^` start of the string to rewrite
*   `gag/`
*   `(` start of capturing a variable
*   `[` start of a character group
*   `^/.` anything not equal to / with any character behind it (.)
*   `]` end of a character group
*   `+` one or more of the character(group)
*   `)` end of capturing a variable
*   `/?` zero or more slashes
*   `$` end of the string to rewrite
*   `view.php?pid=` string after rewriting
*   `$1` variable 1 (captured with the `()` )
*   `[L]` last rule to rewrite

# javascript - 如何使用节点异步来获取我的猫鼬电话？

> ID：15566917
> 
> 赞同：4
> 
> 时间：2013-03-22T09:33:14.287
> 
> 标签：javascript, node.js, mongodb, asynchronous, mongoose

我正在使用 node/express/mongoose 构建一个站点，它在查看提交时需要执行以下操作。

我遇到的问题是以非串行方式进行数据库获取。例如，我将执行一些调用来获取一些数据，但有些调用可能要等到执行上下文转到另一个调用才会完成。尝试使用 npm 模块 async，但在试图弄清楚如何集成它时遇到了麻烦。

这是我的代码：

```
var getViewCount = function(submissionId) {
  Submission.getSubmissionViewCount({
    submissionId : submissionId
  }, function(err, count) {
    if (err) {
      throw err;
    }

    if (count) {
      return count;
    }
  });
};

var getVotes = function(submissionId) {
  console.log('getvotes');
  Submission.getSubmissionVotes({
    submissionId : submissionId
  }, function(err, votes) {
    return votes;
  });
};

var getSubmission = function(id) {
  Submission.getSubmission({
    id : id
  }, function(err, submission) {
    if (err) {
      throw err;
    }

    if (submission) {
      return submission;
    }
  });
};

var renderSubmission = function(title, submission, views) {
  res.render('submission', {
      title: submission.title + ' -',
      submission: submission,
      views: views.length
  });
}; 
```

我如何将它与异步一起使用？或者我应该使用`async.series`isstead of`async.async`吗？

```
async.series([
  function(callback) {
    var submission = getSubmission(id);
    callback(null, submission);
  },
  function(callback) {
  //  getViewCount(submissionId);
  },
  function(callback) {
//    getVotes(submissionId);
  },
  function(callback) {
    //renderSubmission(title, submission, views);
  }
  ], function(err, results) {
    console.log(results);
  }); 
```

基本上我想先获取意见和投票，然后提交我的提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:20:55.587

TheBrain 对您应该对代码进行的整体结构更改的描述是准确的。Node 中的基本方法是嵌套一系列回调；您很少需要实际返回值的函数。相反，您定义一个将回调作为参数并将结果传递给该回调的函数。请查看以下代码以进行说明（`cb`回调函数在哪里）：

```
var getViewCount = function(submissionId, cb) {
    Submission.getSubmissionViewCount({
        submissionId : submissionId
    }, function(err, count) {
        if (err) {
            throw err;
        }

        if (cb) {
            cb(count);
        }
    });
};

var getVotes = function(submissionId, cb) {
    console.log('getvotes');
    Submission.getSubmissionVotes({
        submissionId : submissionId
    }, function(err, votes) {
        if (cb) {
            cb(votes);
        }
    });
};

var getSubmission = function(id, cb) {
    Submission.getSubmission({
        id : id
    }, function(err, submission) {
        if (err) {
            throw err;
        }

        if (cb) {
            cb(submission);
        }
    });
};

var renderSubmission = function(submissionId) {

    getSubmission(submissionId, function (submission) {
        if (!submission) {
            // unable to find submission
            // add proper error handling here
        } else {
            getViewCount(submissionId, function (viewCount) {
                res.render('submission', {
                    title: submission.title + ' -',
                    submission: submission,
                    views: viewCount
                });
            });
        }
    };
}; 
```

# java - 当我尝试使用反向代理时，J2EP 给出“NullPointerException”

> ID：15566919
> 
> 赞同：0
> 
> 时间：2013-03-22T09:33:15.960
> 
> 标签：java, reverse-proxy, j2ep

我在网站上使用 J2EP（其 1.0 稳定版本）作为反向代理服务器。首先我安装了 Apache Tomcat 来部署项目，然后我做了反向代理的配置。另外，服务器不支持“isRewriting = true”，所以我不得不使用“RoundRobinCluster”。

例如; 如果我用这样的表达方式，

```
"<server className="net.sf.j2ep.servers.BaseServer" 
    domainName="www.nytimes.com"
    path="/test">  
    <rule className="net.sf.j2ep.rules.AcceptEverythingRule" /> 
</server>" 
```

并转到：`http://localhost:8080/test`

没有页面出现，这导致我使用“RoundRobinCluster”，即；

```
<server className="net.sf.j2ep.servers.RoundRobinCluster">
    <server
        domainName="www.nytimes.com"
        path="/test"
    />
      <rule className="net.sf.j2ep.rules.AcceptEverythingRule" /> 
</server> 
```

并转到：`http://localhost:8080/test`

这次我面对这样的错误；

java.lang.NullPointerException

net.sf.j2ep.ServerChain.evaluate(ServerChain.java:104) net.sf.j2ep.RewriteFilter.doFilter(RewriteFilter.java:75)

我没想到稳定版本会出现这样的错误。或者我可能错过了一些东西，任何帮助都会很好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:42:39.817

Sorry I haven't met with j2ep earlier. To find out what happened I looked to SVN on `sourceforge.org`.

Problem code here is:

```
102     while (itr.hasNext() && !currentMatches) {
103     currentContainer = (ServerContainer) itr.next();
104     currentMatches = currentContainer.getRule().matches(request);
105     } 
```

.

It seems to you have some `Rule` which wasn't created, may be it had been declared in wrong way. Try to refine rule declaration (check spelling, attributes, etc.) or try to find other errors in log.

# css - 覆盖上标所需但由表属性应用的垂直对齐

> ID：15566931
> 
> 赞同：1
> 
> 时间：2013-03-22T09:33:50.497
> 
> 标签：css, html-table, superscript

下面是我的代码：

```
<table border="0" cellspacing="1" cellpadding="0" width="100%">
<tr>
<td width="31%" align="center" valign="middle">
<a href="http://google.com/"></a> 
</td>
<td width="69%" valign="top">
Terms and conditions
<sup>#</sup>
</td>
</tr>
</table> 
```

`superscript`不起作用（# 不在顶部。它与条款和条件文本在同一行）。

我的猜测是`vertical-align`被`superscript`属性覆盖`table`。

下面是`table`从 Web 开发人员那里获取的属性的默认使用样式表。我也抓到了`sup`。我没有看到它的价值观在 Web 开发人员中被取消了。

```
tbody {
display: table-row-group;
vertical-align: middle;
border-color: inherit;
}

tr {
display: table-row;
vertical-align: inherit;
border-color: inherit;
}

td, th {
display: table-cell;
vertical-align: inherit;
}

td[Attributes Style] {
width: 31%;
text-align: -webkit-center;
vertical-align: middle;
}

sup {
vertical-align: super;
font-size: smaller;
} 
```

如果我放置`sup`外部`table`属性，它工作正常。我怎样才能让我`sup`在里面工作`table`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:38:37.153

`valign="top"`是原因。如果您删除它，上标将起作用。

```
<td width="69%">
    Terms and conditions<sup>#</sup>
</td> 
```

或者如果你想保持 v-align，封装：

```
<td width="69%" valign="top">
    <span>Terms and conditions<sup>#</sup></span>
</td> 
```

# javascript - 自定义模态 Durandal

> ID：15566934
> 
> 赞同：1
> 
> 时间：2013-03-22T09:34:03.540
> 
> 标签：javascript, modal-dialog, durandal

我一直在尝试使用 durandal 框架，必须说我很高兴。我正在使用[http://stephenwalther.com/](http://stephenwalther.com/)的电影教程并进行了一些更改。在 Ryan Keeters Youtube 视频的帮助下。我已经完成了使用模态编辑电影。

但是我无法通过模态添加新电影。

我已经创建了一个 add.html 和 add.js，但是当单击用于创建新电影的链接并且模式显示它显示我在中间的页面时（当我进一步单击时就像一个循环）。

这是我对 show.html 的绑定：

```
<a data-bind="click: viewAddMovieModal">Add Movie</a> 
```

这是javascript：

```
define(function (require) {
    var self = this;

    var vm = {
        activate: activate,
        title: 'movies page',
        movies: ko.observableArray([])
    };
    //return vm;

   // self.moviesRepository = require("repositories/moviesRepository");
    self.router = require('durandal/plugins/router');
    self.system = require('durandal/system');
    self.app = require('durandal/app');
    self.movie = require('viewmodels/movie');
    self.addmovie = require('viewmodels/add');
    //self.Movies = ko.observableArray([]);
    self.viewMovieModal = function (movie, element) {
        self.app.showModal(movie).then(function (result) {
            if (result) {
                //self.app.showMessage(result.toString(), result.toString());
               vm.movies.remove(movie);
            }
        }).fail(function (result) {
            self.app.showMessage(result.toString(), "Something went wrong!");
        });
    };

    self.viewAddMovieModal = function (addmovie,element) {
      //  self.app.showModal(addmovie).then(function (result) {
         //   self.app.showMessage(result.toString(), result.toString());
      //  });
        self.app.showModal(null, element, addmovie);
    };

    init();

    function init() {
        vm.movies.push(new movie("Star wars", "Piet"));
        vm.movies.push(new movie("Harry Potter", "Jan"));
        vm.movies.push(new movie("Hangover", "Klaas"));
    }

    function activate() {
        self.system.log("I get in the activate function!");
    }

    return {
        activate: activate,
        movie: movie,
        addmovie:addmovie,
        vm:vm,
        viewMovieModal: viewMovieModal
    };
}); 
```

# c# - WPF 用户控件中的自定义属性

> ID：15566935
> 
> 赞同：2
> 
> 时间：2013-03-22T09:34:05.853
> 
> 标签：c#, wpf, user-controls

我想向我的用户控件添加自定义属性，以便 UserControl 在显示（或打开/关闭）各种选项时使用该属性

IE

```
<toolkit:UC_TitleBar title="My Application Title" showCloseButton="false" /> 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:38:45.467

你需要的是[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)

```
public class UC_TitleBar : UserControl
{
    public static readonly DependencyProperty ShowCloseButtonProperty = DependencyProperty.Register("ShowCloseButton", 
                                                    typeof(Boolean), typeof(UC_TitleBar), new FrameworkPropertyMetadata(false));
    public bool ShowCloseButton
    {
        get { return (bool)GetValue(ShowCloseButtonProperty); }
        set { SetValue(ShowCloseButtonProperty, value); }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:42:17.793

```
 //add dependency property
    public static DependencyProperty MyTestProperty;

    //init dependency property in static control constructor
    static MyControl()
    {
         var myTestPropertyMetadata = new FrameworkPropertyMetadata(string.Empty, FrameworkPropertyMetadataOptions.AffectsRender, MyTestPropertyChanged);

                MyTestProperty= DependencyProperty.Register("MyTest",
                                                       typeof(string),
                                                       typeof(MyControl),
                                                       myTestPropertyMetadata );
    }

   //implement property 
    public String MyTest
    {
        get { return (String)GetValue(MyTestProperty); }
        set
        {
            SetValue(MyTestProperty, value);
        }
    }

   //using in xaml
   <MyControls:MyControl MyTest="dfdsf" /> 
```

在 MSDN 中阅读有关依赖属性的更多信息

# c# - 从 openxml 获取字体信息的更好方法

> ID：15566937
> 
> 赞同：1
> 
> 时间：2013-03-22T09:34:07.047
> 
> 标签：c#, openxml, openxml-sdk

我正在用 OpenXML 填写一种模板 Word 文件（不是 .dot）。我遇到的问题是，当我向文档添加新文本时，会使用 Word 文档的默认字体和字体大小。我希望它使用我正在添加的段落的字体和大小，或者我正在添加的现有表格中的格式。

我找到了一种方法，但我认为这不是一个好方法。那么......有没有更好的方法呢？

这是从一个段落

```
 private RunProperties GetRunPropertyFromParagraph(Paragraph paragraph)
    {
        var runProperties = new RunProperties();
        var fontname = "Calibri";
        var fontSize = "18";
        try
        {
            fontname =
                paragraph.GetFirstChild<ParagraphProperties>()
                         .GetFirstChild<ParagraphMarkRunProperties>()
                         .GetFirstChild<RunFonts>()
                         .Ascii;
        }
        catch
        {
            //swallow
        }
        try
        {
            fontSize =
                paragraph.GetFirstChild<Paragraph>()
                         .GetFirstChild<ParagraphProperties>()
                         .GetFirstChild<ParagraphMarkRunProperties>()
                         .GetFirstChild<FontSize>()
                         .Val;
        }
        catch
        {
            //swallow
        }
        runProperties.AppendChild(new RunFonts() { Ascii = fontname });
        runProperties.AppendChild(new FontSize() { Val = fontSize });
        return runProperties;
    } 
```

这来自一个 TableCell

```
 private RunProperties GetRunPropertyFromTableCell(TableRow rowCopy, int cellIndex)
    {
        var runProperties = new RunProperties();
        var fontname = "Calibri";
        var fontSize = "18";
        try
        {
            fontname =
                rowCopy.Descendants<TableCell>()
                       .ElementAt(cellIndex)
                       .GetFirstChild<Paragraph>()
                       .GetFirstChild<ParagraphProperties>()
                       .GetFirstChild<ParagraphMarkRunProperties>()
                       .GetFirstChild<RunFonts>()
                       .Ascii;
        }
        catch
        {
            //swallow
        }
        try
        {
            fontSize =
                   rowCopy.Descendants<TableCell>()
                          .ElementAt(cellIndex)
                          .GetFirstChild<Paragraph>()
                          .GetFirstChild<ParagraphProperties>()
                          .GetFirstChild<ParagraphMarkRunProperties>()
                          .GetFirstChild<FontSize>()
                          .Val;
        }
        catch
        {
            //swallow
        }
        runProperties.AppendChild(new RunFonts() { Ascii = fontname });
        runProperties.AppendChild(new FontSize() { Val = fontSize });
        return runProperties;
    } 
```

该代码有效。至少在我尝试过的文件中。但这似乎是一种糟糕的方法，但我还没有找到更好的解决方案，所以如果你有一个，请分享:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:06:57.677

我这样做是这样的：当我更新或替换一个 Run 时，我一定要检查我什么时候删除旧的东西，一个元素是否有子元素，然后它是否有一个子元素是“RunProperties”。如果是这样，我只需保存这些属性并在删除旧内容后将它们添加到我的新 Run 中。

还没有让我失望。

```
var bkms = YourBookmarkStart;
OpenXmlElement elem = bkms.NextSibling();
RunProperties oldRunProperties = null;
while (elem != null && !(elem is BookmarkEnd))
{
    OpenXmlElement nextElem = elem.NextSibling();
    if (elem.HasChildren)
    {
        try
        {
             oldRunProperties = (RunProperties)elem.GetFirstChild<RunProperties>().Clone();
        }
        catch { }
    }
    if (!(elem is BookmarkStart))
        elem.Remove();
    elem = nextElem;
}

Run r = new Run(new Text(newText));
if (oldRunProperties != null) r.PrependChild<RunProperties>(oldRunProperties);
bkms.Parent.InsertAfter<Run>(r, bkms); 
```

它应该抓取给定段落的任何运行属性，除非它没有，在这种情况下它不会添加任何内容，因此使用文档中的默认值。

# objective-c - 错误“OBJC_CLASS_$_MainViewController”，引用自链接器命令失败，退出代码为 1

> ID：15566949
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:34:54.327
> 
> 标签：objective-c

但我不确定这个问题的原因在哪里。有人可以指导我吗？非常感谢！

如果您需要我的项目作为参考，我已将我的项目上传到此链接：[http ://www.mediafire.com/?l5cl3jegdb6x6bk](http://www.mediafire.com/?l5cl3jegdb6x6bk)

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:50:22.737

在您的项目中的某个地方，您引用了一个名为的类`MainViewController`，但您尚未定义该名称的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:43:21.343

您好，您的代码需要`MainViewController.m`在构建阶段编译文件中添加文件

单击 xcode 项目文件并在`testModel`目标下 **按 --> Build Phases**然后

**然后**按 --> 编译源****

 ****按下**底部栏中的“ **+ ”符号**

然后添加选择`MainVIewController.m`文件然后**按->添加**然后运行它将运行

我希望这将有助于解决您的问题

![**供您参考**](../Images/c7c8908c2ea1c2f5af928aa7eadacb14.png)**

# c# - C#：用于 URL 验证的 RegEx

> ID：15566951
> 
> 赞同：1
> 
> 时间：2013-03-22T09:35:01.863
> 
> 标签：c#, regex

我需要一个正则表达式验证网址：

这应该是有效的

```
http://www.google.com

https://www.google.com 
```

但不是这个：

```
google.com

www.google.com 
```

我知道这可以通过`Uri.IsWellFormedUriString`例如来完成，但我需要一个正则表达式。找到了几个类似的主题，但不适合我的情况。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:55:05.713

```
(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T10:24:28.477

试试这个

```
 Regex urlchk = new Regex(@"((file|gopher|news|nntp|telnet|http|ftp|https|ftps|sftp)://)+(([a-zA-Z0-9\._-]+\.[a-zA-Z]{2,15})|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(/[a-zA-Z0-9\&amp;%_\./-~-]*)?", RegexOptions.Singleline | RegexOptions.IgnoreCase); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T10:33:17.520

你确定你想要正则表达式而不是这个 - [Uri.TryCreate](http://msdn.microsoft.com/en-us/library/system.uri.trycreate.aspx)吗？

你也看过这篇文章 -[检查字符串是否为有效 URL 的最佳正则表达式是什么？](https://stackoverflow.com/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url)

# sql - 在 SQL Server 中按字母和字符排序

> ID：15566954
> 
> 赞同：0
> 
> 时间：2013-03-22T09:35:12.030
> 
> 标签：sql, sql-server, sorting, sql-order-by

运行我的sql查询后，结果是

```
1.12.1
1.12.2
1.12.3
1.12.4
1.12.5
1.12.6
1.12.7
1.12.8
1.12.9
1.12.10
1.12.11
1.12.2a 
```

但我想要这个结果（“2”之后的“2a”）

```
1.12.1
1.12.2
1.12.2a <-- This one must be here, not at the end of the result set
1.12.3
1.12.4
1.12.5
1.12.6
1.12.7
1.12.8
1.12.9
1.12.10
1.12.11 
```

什么样的sql查询可以做到这一点？

这是我的查询...我使用 SQL Server 2012

> sResultSqlBuilder.Append("ORDER BY {0} {1}")
> 
> 如果 sortExpression = " " 那么
> 
> sResultSql = String.Format(sResultSql, "Right('0000000000' + FirstNumber, 10),Right('0000000000' + SecondNumber, 10),Right('0000000000' + ThirdNumbersAndLetter, 10) ", " ")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:44:49.200

请尝试，它适用于 MS-Sql 服务器：

```
SELECT VersionNo, 
Cast(PARSENAME(VersionNo, 3)as int) as Num1, 
cast(PARSENAME(VersionNo, 2) as int) as Num2, 
cast(PARSENAME(VersionNo, 1) as nvarchar(2)) as Num3 
FROM 
(
    select '1.12.2' as VersionNo union
    select '1.12.3' as VersionNo union
    select '1.12.2a' as VersionNo union
    select '1.12.1' as VersionNo union
    select '1.12.4' as VersionNo
)x
Order by Num1, Num2, num3 
```

# c# - 将 PixelSense 升级到 Windows 8 会失去功能吗？

> ID：15566955
> 
> 赞同：0
> 
> 时间：2013-03-22T09:35:13.280
> 
> 标签：c#, .net, windows-8, signalr, pixelsense

默认情况下，PixelSense SUR40 的操作系统是 Win 7 [PixelSense 规格](http://en.wikipedia.org/wiki/Microsoft_PixelSense#Samsung_SUR40_with_Microsoft_PixelSense)

我正在考虑将 PixelSense 表升级（或双启动）到 Windows 8，以便充分利用 .Net Framework 4.5 功能，例如 WebSockets（带有 SignalR）。

有人执行过升级吗？如果是这样，是否有任何我应该注意的功能丢失？我害怕失去的一些例子是：

*   表面模式。
*   校准和管理工具。
*   表面“调试”模式。
*   基于 SDK 的功能：标签、Blob 和原生 PixelSense 触摸整体（方向等）

非常感谢您！

编辑：感谢 Gian Paolo Santopaolo ，我[在这里](http://thedarksideof.net/post/Win8-WinRT-on-large-format-multitouch-displays-and-the-need-of-Surface-SDK.aspx)找到了一部分答案 很高兴 知道这一点：

*   不支持表面输入（标签、斑点、方向），
*   默认的 Kiosk 模式也不会（您可以通过更改正确的 Windows 配置、注册键等来获得类似于 Kiosk 模式的内容）
*   也不是表面壳。

如果您知道任何其他您认为相关但可能会丢失的信息，请发布！(y)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:32:55.007

我已经更新了它。你可以在[这里](http://www.thedarksideof.net/post/Windows-8-on-Samsung-SUR40-for-Microsoft-PixelSense.aspx)阅读。

我建议您，如果您要尝试这样做，SUR40 上的 Windows 8 完全不受支持，并且您失败的风险很高，结果将是损坏的 SUR40，所以如果您决定这样做，您愿意自担风险，我的建议是不要尝试，我这样做只是为了测试目的

吉安·保罗

# java - Cron 表达式抛出 java.lang.NumberFormatException

> ID：15566961
> 
> 赞同：0
> 
> 时间：2013-03-22T09:35:33.987
> 
> 标签：java, spring-mvc, scheduler, cronexpression

我正在使用 springs [CronTrigger](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/scheduling/support/CronTrigger.html)类来构建具有以下 cron 表达式的触发器

```
0 10 12 ? 1/1 6#3 
```

我认为这是一个有效的，可以安排任务运行

> 每个月的第三个星期五下午 12:10

[当我在cronmaker.com](http://www.cronmaker.com/)上验证它时，这个表达式给出了预期的输出。但是在尝试使用这个表达式构建触发器时：

```
CronTrigger trigger=new CronTrigger("0 10 12 ? 1/1 6#3"); 
```

它把我扔了`java.lang.NumberFormatException For input string: "6#3"`。我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T11:55:07.937

我刚刚提出了一个应该可行的解决方法。您可以在这里查看 -[如何编写 Cron 表达式以在每个月的第三个星期日晚上 11 点执行触发器？](https://stackoverflow.com/questions/17357235/how-to-write-cron-expression-to-execute-a-trigger-on-3rd-sunday-of-every-month-a/19447517#19447517)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:49:28.097

您应该使用`org.springframework.scheduling.quartz.CronTriggerBean`而不是`CronTrigger`.
你的 cron 表达式也应该是这样的`0 10 12 ? * 6#3`

# regex - 使用perl拆分csv文件？

> ID：15566962
> 
> 赞同：1
> 
> 时间：2013-03-22T09:35:34.687
> 
> 标签：regex, perl, excel, csv

朋友们，我有两个 CSV 文件需要转换为电子表格。它包含以下数据；

```
"xxx","yyy","97,234"
     .
     .
     . 
```

和

```
abc,def,"23,475"
       .
       .
       .
       . 
```

现在问题是我需要打开这个 csv 文件并将每条记录写入另一个文件。我已经尝试使用 split 函数，因为`split(,@lines)`这将拆分所有逗号分隔值，所以第一个文件第三个记录也被分成两个！.so我尝试了另一种方法，`split(",@lines)`这种方法不支持第二个文件！使用***perl处理这种情况的任何方法***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:48:49.237

使用 Text::CSV 解析 CSV 文件。Text::CSV 的示例用法如下：

```
#!/usr/bin/perl
use strict;
use warnings;
use Text::CSV;
$\="\n";

open my $fh, '<', 'file.csv' or die $!;
my $csv=Text::CSV->new;
while(<$fh>){
        $csv->parse($_);
        my @fields=$csv->fields();
}
close $fh; 
```

该数组`@fields`包含 csv 文件的所有单个列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T09:46:42.403

如果您需要将两个 CSV 文件中的所有记录复制到第三个文件中，那么您根本不需要拆分数据：只需在记录级别读取和写入数据即可。

如果由于某种您没有解释的原因，您*确实*需要将数据拆分为字段，那么您应该使用[`Text::CSV`](https://metacpan.org/module/Text%3a%3aCSV)模块来完成。尝试使用正则表达式拆分 CSV 数据通常很难做到正确，并且该模块经过了尝试和测试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T09:38:25.243

假设您不希望`"`包含在输出中：

```
my @values = $line =~ /\"?(\w+)\"?,\"?(\w+)\"?,\"?([\d,]+)\"?/ 
```

将删除任何`"`文本/数字并将其存储在数组@values 中，然后您可以打印：

```
print join(";", @values) . "\n"; 
```

将它们打印`;`为分隔符。当我从你的问题中运行两行时，我得到了这个输出：

```
$ ./testregexp.pl 
xxx;yyy;97,234
abc;def;23,475 
```

# c# - SqlDependency OnChange 未触发

> ID：15566966
> 
> 赞同：5
> 
> 时间：2013-03-22T09:35:56.607
> 
> 标签：c#, sql, sql-server, sqldependency

这是我第一次需要使用 SqlDependency，所以我希望这是我犯的一个愚蠢的错误。

我遇到的问题是当 sql 表更改时 OnChanged 事件不会触发。没有错误或任何东西，它不会触发。

这是代码

```
public class SqlWatcher
{
    private const string SqlConnectionString = "Data Source = CN-PC08\\DEV; Initial Catalog=DEP; User = sa; Password=******";

    public SqlWatcher()
    {
        SqlClientPermission perm = new SqlClientPermission(System.Security.Permissions.PermissionState.Unrestricted);
        perm.Demand();

        SqlCommand cmd = new SqlCommand("SELECT [DataAvaliable], [RowNumber] FROM [dbo].[Trigger]", new SqlConnection(SqlConnectionString));
        SqlDependency sqlDependency = new SqlDependency(cmd);
        sqlDependency.OnChange += On_SqlBitChanged;
    }

    private void On_SqlBitChanged(object sender, SqlNotificationEventArgs sqlNotificationEventArgs)
    {
        SqlDependency dependency = (SqlDependency)sender;
        dependency.OnChange -= On_SqlBitChanged;

        // Fire the event
        if (NewMessage != null)
        {
            NewMessage(this, new EventArgs());
        }
    }

    public void Start()
    {
        SqlDependency.Start(SqlConnectionString);
    }

    public void Stop()
    {
        SqlDependency.Stop(SqlConnectionString);
    }

    public event EventHandler NewMessage; 
```

在我的主窗口中，我有这个

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        try
        {
            SqlWatcher sqlWatcher = new SqlWatcher();
            sqlWatcher.Start();
            sqlWatcher.NewMessage += On_NewMessage;
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    }

    private void On_NewMessage(object sender, EventArgs eventArgs)
    {
        MessageBox.Show("Message Received");
    }
} 
```

所以预期的行为是，如果我运行以下 sqlQuery，将显示一个 messageBox，说“收到消息”

```
INSERT INTO [DEP].[dbo].[Trigger] Values(0,3) 
```

谁能给我一个关于检查/更改什么的提示？

我知道只能在依赖项中使用 Sql 功能的一个子集，但我不认为我想在这里做任何花哨的事情。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-22T10:03:55.327

> 我希望这是我犯的一个愚蠢的错误。

不幸的是（或幸运的是？）你犯了几个错误。

1.  首先，您需要了解查询通知将使**一个查询**无效。因此，您最多只会收到*一次*通知，如果您想收到更多通知，则必须再次重新订阅（重新提交查询）。

2.  *接下来，您需要了解无论出于何种*原因都会通知您，而不仅仅是更改。在您的回调中，您*必须*检查您收到通知的原因，这些原因是通过`SqlNotificationEventArgs`.

3.  接下来，您需要了解异步编程的基本原则：如果您订阅了一个事件，请确保您在事件第一次发生**之前订阅。**举个例子：**只要你提交查询就**`On_SqlBitChanged`可以触发。这*应该*发生在构造函数中，但是您在构造函数运行*后*订阅。可以在连接事件回调之前在构造函数完成之间调用，在这种情况下，通知将被静默忽略。***`SqlWatcher.SqlWatcher``sqlWatcher.NewMessage` *`On_SqlBitChanged``NewMessage`****

*****   如果要使用服务，请确保在使用**之前**启动它。您正在使用 SqlDependency ，`SqlWatcher.SqlWatcher`但*在*调用`SqlWatcher.Start()`.

    *   最后，如果您想收到查询更改的通知，**您必须提交查询**。您正在构建`SqlCommand`对象，设置通知，然后...丢弃该对象。除非您实际提交查询，否则您还没有订阅*任何内容*。**** 

 ****修复建议：

*   制作`Start`和`Stop`静态，调用`Start`应用程序启动。
*   确保您在提交查询`NewMessage` *之前*订阅
*   实际提交查询（调用`SqlComamnd.ExecuteQuery()`）
*   检查`Info`,`Type`并`Source`在`On_SqlBitChanged`回调中，如果您的提交包含错误，这是唯一的学习方法（即使通知请求无效，SqlComamnd.ExecuteQuery() 也会成功）
*   一旦收到更改通知，您必须重新订阅，再次执行查询。

还有一件事：不要在后台回调中调用 UI 代码。您不能`MessageBox.Show("Message Received");`从回调中调用，您必须通过表单主线程通过[`Form.Invoke`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.invoke.aspx). 是的，我知道严格来说`MessageBox.Show` *确实*可以在非 UI 线程上工作，但您很快就会从警报框移到实际形成交互，然后事情就会中断。****

# r - 字符的起源返回一个因素并结合不同的类

> ID：15566970
> 
> 赞同：0
> 
> 时间：2013-03-22T09:36:11.533
> 
> 标签：r

我有一些与不同类的行为/属性有关的问题。

当尝试使用一列类字符创建数据框时，它会创建一个带有因子的数据框。

```
df1 <- data.frame(var1= character())
str(df1) 
```

这与

```
df2 <- data.frame(var1= factor())
str(df2) 
```

为什么不是第一种情况下的课程`chr`？

当尝试添加时间变量时，会发生错误，例如字符。这有效：

```
df3 <- data.frame( var1=as.POSIXct(0,origin="2012-12-31"))
str(df3) 
```

这不会：

```
df4 <- data.frame(var1= character(0),var2=as.POSIXct(0,origin="2012-12-31"))
str(df4) 
```

但这些确实：

```
df4.1 <- data.frame(var1= character(1),var2=as.POSIXct(0,origin="2012-12-31"))
str(df4.1)

df4.2 <- data.frame(var1= factor(0),var2=as.POSIXct(0,origin="2012-12-31"))
str(df4.2) 
```

似乎该行为与缺少字符、数字和整数类的级别或格式（与因子或日期类一起存在）有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:44:55.910

对于您的第一个问题，`stringsAsFactors = TRUE`创建`data.frame`. 改变它会得到你期望的结果。

```
> df1a <- data.frame(var1= character())
> str(df1a)
'data.frame':   0 obs. of  1 variable:
 $ var1: Factor w/ 0 levels: 
> df1b <- data.frame(var1= character(), stringsAsFactors=FALSE)
> str(df1b)
'data.frame':   0 obs. of  1 variable:
 $ var1: chr 
```

对于您的第二个，`character(0)`并且`factor(0)`是不同的东西。`character()`与 相同`character(0)`，但`factor()`与 不同`factor(0)`

尝试这个：

```
> a <- character()
> b <- character(0)
> A <- factor()
> B <- factor(0)
> sapply(list(a=a, b=b, A=A, B=B), length)
a b A B 
0 0 0 1 
```

* * *

具体来说，从`?character`，用法的形式为：

```
character(length = 0) ## Just the one argument 
```

而 from `?factor`，用法是：

```
factor(x = character(), levels, labels = levels,
       exclude = NA, ordered = is.ordered(x)) 
```

其中第一项是您将用于创建因子的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T09:44:13.597

阅读`help(data.frame)`。

`df1`：此行为由`stringsAsFactors`参数控制。

`df4`:`var1`长度为 0，`var2`长度为 1。data.frame 中的所有列必须具有相同的长度。通常，较短的向量会被回收，但对于长度为 0 的向量，这是不可能的。

`df4.2`:`factor(0)`不返回长度为 0 的因子变量，而是返回值为 0 的因子。因此两列的长度相等。

# sql-server - SQL Reporting Services 移动订阅

> ID：15566971
> 
> 赞同：2
> 
> 时间：2013-03-22T09:36:15.893
> 
> 标签：sql-server, reporting-services

我确实有一个关于 MS SQL 报告服务 2008 的一般性问题：是否可以将现有订阅从一个报告服务器移动到一个新的而不移动完整的报告服务和临时数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:42:46.343

要将现有订阅从一个报告服务器移动到新的，您需要移动两个数据库；reportservertempdb 数据库和 reportserver 数据库。

# c++ - QPrinter 报告中的显示问题

> ID：15566972
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:36:20.430
> 
> 标签：c++, qt, qpainter

我正在使用 QPrinter 创建报告并嵌入到 qt 应用程序中。创建报告没有问题，但显示是问题。

当我滚动报告时，显示问题来了。请看图片。

![报告](../Images/c8e0a65ee4a17e1b7d200526cfe58e52.png)

请参阅注释文本。如果我按 CTRL 并滚动，那么这不会出现。如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:23:47.983

我找到了解决方案。

实际上我使用半透明颜色作为文本。

```
painter.setPen(QPen(QColor(40,40,40,200),3,Qt::SolidLine)); 
```

在我移除并变成纯色后，它是固定的

```
painter.setPen(QPen(QColor(140,140,140,255),3,Qt::SolidLine)); 
```

谢谢...

# ios - 按顺序排列的 NSMutableArray - 按顺序替换中断

> ID：15566979
> 
> 赞同：0
> 
> 时间：2013-03-22T09:36:55.433
> 
> 标签：ios, objective-c, nsmutablearray, nsarray, nsdictionary

我一直对这个问题一无所知，所以我想也许你们中的一些人可以对这种情况有所了解。

长话短说，我正在构建一个应用程序，它从服务器获取学生的时间表，对其进行解析，并将其显示在表格视图中。每个学生每天有 7 节课，在两周内有 10 天的时间表（A 周 5 天，B 周 5 天）。

然而，问题在于一些学生有空闲时间——也就是说，他们在那段时间没有课。因为服务器没有考虑空闲时间，所以一些学生可能会在两周内返回 70 个总时间，而另一些学生可能会返回 66 个。

在这里切入正题...

我有一个有序的 NSMutableArray，里面装满了 NSDictionaries。输出到控制台时，数组中的典型对象如下所示：

```
{
    weekday = 12;
    period = 1;
    room = "Room D404";
    title = "English Extension";
}, 
```

我需要找出顺序中的中断位置，如果是，则在其中插入一个对象以填充空白。让我给你举个例子：

```
{
    dayweek = 12;
    period = 1;
    room = "Room D404";
    title = "English Extension";
},
    {
    dayweek = 12;
    period = 2;
    room = "Room W285";
    title = "Modern History";
},
    {
    dayweek = 12;
    period = 3;
    room = "Room W187";
    title = "Maths Extension 1";
},
    {
    dayweek = 12;
    period = 4;
    room = "Room W370";
    title = Economics;
},
    {
    dayweek = 12;
    period = 6;
    room = "Room D301";
    title = "English Advanced";
},
    {
    dayweek = 12;
    period = 7;
    room = "Room W282";
    title = "Studies of Religion";
},
    {
    dayweek = 13;
    period = 1;
    room = "Room W370";
    title = Economics;
}, 
```

没有对象 where `period = 5`，所以我需要添加一个。我说的很难理解吗？对不起，如果是。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:59:19.633

这将填补一天中从 1 到最后一个缺失的时段。它不会将天数填充到给定的最短期间。

```
NSMutableArray periods; // from somewhere else

NSUInteger count = [periods count];
NSUInteger currentPeriod = 0;
NSUInteger currentDayweek = 0;
for (NSUInteger i = 0; i < count; ++i)
{
    NSDictionary *periodDescription = periods[i];
    NSUInteger dayweek = [periodDescription[@"dayweek"] unsignedIntegerValue];
    if (dayweek != currentDayweek) {
        // another day
        currentPeriod = 0;
        currentDayweek = dayweek;
    }
    NSUInteger period = [periodDescription[@"period"] unsignedIntegerValue];
    currentPeriod += 1;
    while (period > currentPeriod) {
        NSDictionary *fillIn = @{ @"dayweek" : @(dayweek), @"period" : @(currentPeriod), @"room" : @"cafeteria", @"title" = "taking a break" };
        [periods insertObject:fillIn atIndex:i];
        currentPeriod += 1;
        i += 1;
        count += 1;
    }
} 
```

如果您不想在第一个现有时段之前填充上午时间，请直接在 while 循环之前添加：

```
 if (currentPeriod == 1)
        currentPeriod = period; 
```

注意：在浏览器中输入，可能会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:34:47.117

这只是部分答案，但作为评论发布太长了。

此代码段的目的只是用最少的代码识别缺失的时段。当然，您需要在两周的所有日子里循环执行此操作。

为此，您可以使用谓词：

```
// For each day create a list of all periods. 
// This is just a hard coded example
NSArray *allPeriodsForDay = @[@(1),@(2),@(3),@(4),@(5),@(6)];

// Get an array of the periods actually in the list
// It will look like this: @[@(1),@(2),@(4),@(5),@(6)]; // Period 3 missing
NSArray *studentsPeriods  = [periodRecords valueForKey: @"period"];

// Build a predicate to identify period(s) not in list
NSPredicate *freePredicate = [NSPredicate predicateWithFormat:@"not self in %@", studentsPeriods];

NSArray *freePeriods = [allPeriodsForDay filteredArrayUsingPredicate:freePredicate]; 
```

`freePeriods`现在包含当天学生日程表中“缺失”时段的列表。

然后，您可以创建一个新的`NSDictionary`并将其添加到列表中。然后按`period`字段排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:55:27.230

试试这个，如果您遇到任何问题，请告诉我

```
for (int i = 1; i<=self.arrayForRows.count; i++)
{
    if ([[[self.arrayForRows objectAtIndex:i]valueForKey:@"period"] intValue] == i)
    {
    }
    else
    {
        // Insert Here as [self.arrayForRows insertObject:yourObject atIndex:i];
         i=i-1;

    }
} 
```

# c# - 针对网格运行 SQL 语句

> ID：15566984
> 
> 赞同：-1
> 
> 时间：2013-03-22T09:37:05.690
> 
> 标签：c#, sql, wpf

是否有可能针对 datagridview 或 gridview 运行 SQL 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:40:59.453

You can make like this>>

```
 dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
   dataGridView1.AllowUserToAddRows = false;
    dataGridView1.AllowUserToDeleteRows = false;
    dataGridView1.AllowUserToOrderColumns = true;
    dataGridView1.ReadOnly = true;
   dataGridView1.MultiSelect = false;
    dataGridView1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.None;
    dataGridView1.AllowUserToResizeColumns = false;
    dataGridView1.ColumnHeadersHeightSizeMode = 
    DataGridViewColumnHeadersHeightSizeMode.DisableResizing;
    dataGridView1.AllowUserToResizeRows = false;
    dataGridView1.RowHeadersWidthSizeMode = 
    DataGridViewRowHeadersWidthSizeMode.DisableResizing; 
```

You can add columns by `dataGridView1.Columns["CompanyName"].ReadOnly = true;`

Can refer this>>[http://msdn.microsoft.com/en-us/library/cze614bb.aspx](http://msdn.microsoft.com/en-us/library/cze614bb.aspx)

Or simply another way is keep your database table name and gridview name same.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:41:23.107

No. But you can try using LINQ to objects instead.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T10:05:03.220

请参考[此](http://nquery.codeplex.com/%20.)链接，它将 sql 转换为 Linq 到对象

取自以下：

[在运行时将 SQL 转换为 Linq To Objects 表达式](https://stackoverflow.com/questions/7023708/transforming-sql-into-linq-to-objects-expressions-at-runtime)

希望这可以帮助

# php - PHP在单次迭代中获取2个数据行

> ID：15566986
> 
> 赞同：-5
> 
> 时间：2013-03-22T09:37:12.223
> 
> 标签：php, arrays, iteration

我试图在单次迭代中获得两个数据行：

```
$query = mysql_query("SELECT * FROM tbl_website_index")or die(mysql_error());

while($row = mysql_fetch_assoc($query)){
//returns single row`
} 
```

在 html 表中

单行2条数据线

```
<tr>
    <td>data 1</td>  
    <td>data 2</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:48:45.317

我不确定你是否想要这个，但试试：

```
<tr>
<?php
$query = mysql_query("SELECT * FROM tbl_website_index")or die(mysql_error());
while($row = mysql_fetch_assoc($query)){
?>
<td><?php echo $row['col'] ?></td>
<?php
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:53:50.693

首先 - 请不要使用 mysql_query 而是使用 PDO。其次 - 你永远不会这样做。使用引用 (next()) 可以通过多种方式实现这一目标。但这非常糟糕。因此，我提出这样的建议：

```
$query = $this->db->prepare("select * from tbl_website_index");
$query->execute();
$data = array();

while ($row = $query->fetch(PDO::FETCH_OBJ))
{
 $data[] = $row->fieldName;
}

$data = "<li>" . implode("</li><li>", $data) . "</li>";
print "<ul>" . $data . "</ul>"; 
```

那将实现您正在尝试做的事情。不过我还没有测试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T09:45:59.980

首先将所有数据放入一个数组中。然后组成该数组多维数组。因此，您可以在每个键中按两行类似的方式。

```
while($row = mysql_fetch_assoc($query)){
  $data[] = $row;
}

$last_data = array();
$key = 0;
for($i=0;$i<sizeof($data);$i++) {
  if($i%2 == 0)
  {
    $key++;
  } 
  $last_data[$key][] = $data[$i]; 
} 
```

然后你可以遍历 html 表。

```
<?php foreach ( $last_data as $key => $row) { ?>
<tr>
    <?php foreach ( $row as $k => $row1) { ?>
    <td> <?php echo $row1['field'] ?></td>
    <?php } ?>
</tr>
<?php } ?> 
```

（建议使用 mysqli_* 而不是 mysql_* 来保留您的代码使用已弃用的扩展。）

# jquery - 如何在jquery中克隆

> ID：15566992
> 
> 赞同：0
> 
> 时间：2013-03-22T09:37:24.220
> 
> 标签：jquery

我正在使用此代码进行克隆。

1.  **当我单击克隆**按钮时，我想修改此代码，它会一次又一次地克隆每个新生成的动态 div 的**克隆**和**删除**按钮。

2.  当我第一次单击**克隆**按钮时，它使用相同的 id **id =clonedInput1**克隆相同的 div ，然后开始递增。

你可以在这里找到一个工作版本[http://jsfiddle.net/shalucosmic/FEpMk/7/](http://jsfiddle.net/shalucosmic/FEpMk/7/)

```
 <script type="text/javascript">
  $(document).ready(function(){
        //jQuery(this).parent(".clonedInput")
           var regex = /^(.*)(\d)+$/i;
           var cloneIndex = $(".clonedInput").length;

           $("button.clone").live("click", function(){

           $(this).parents(".clonedInput").clone().appendTo("body").attr("id",  "clonedInput" +  cloneIndex)
           .find("*").each(function() {
            var id = this.id || "";
            var name = this.name || "";

            var match = id.match(regex) || [];

           var matchname = name.match(regex) || [];
           if (match.length == 3) {
            this.id = match[1] + (cloneIndex);
           }
          if (matchname.length == 3) {
            this.name = match[1] + (cloneIndex);
          }
 });
cloneIndex++;

});
$("button.remove").live("click", function(){
   $(this).parents(".clonedInput").remove();
});

}); 
```

```
 <div id="clonedInput1" class="clonedInput">
   <input type="text" name="contributer1" value="" id="contributer1"/>

   <div class="actions">
    <button class="clone">Clone</button> 
    <button class="remove">Remove</button>
   </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T09:56:48.457

您可以将其简化为

```
$(document).ready(function() {
    // jQuery(this).parent(".clonedInput")
    var regex = /^(.*)(\d)+$/i;
    var cloneIndex = $(".clonedInput").length + 1;

    $(document).on("click", 'button.clone', function() {
        $(this).closest(".clonedInput").clone().appendTo("body").attr("id",
                "clonedInput" + cloneIndex).find("[id], [name]").each(
                function() {
                    this.id = this.id.replace(/\d+$/, cloneIndex);
                    this.name = this.name.replace(/\d+$/, cloneIndex);
                });
        cloneIndex++;
    });

    $("button.remove").live("click", function() {
                $(this).parents(".clonedInput").remove();
            });

}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/GTXgw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T09:47:01.310

在声明`cloneIndex`时，您需要将其声明如下。

```
var cloneIndex = $(".clonedInput").length+1; 
```

**[演示](http://jsfiddle.net/FEpMk/9/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T09:41:41.097

you need to add 1 in cloned input length

```
var cloneIndex = $(".clonedInput").length + 1;
                                    // -----^^^^ here 
```

[fiddle here](http://jsfiddle.net/bipen/FEpMk/8/)

# javascript - 如何根据选择值显示表单输入字段？

> ID：15566999
> 
> 赞同：17
> 
> 时间：2013-03-22T09:37:41.527
> 
> 标签：javascript, jquery, html, jsp

我知道这很简单，我需要在 Google 中搜索。我尽了最大努力，但找不到更好的解决方案。我有一个表单字段，它需要一些输入和一个选择字段，它有一些值。它还具有“其他”值。

我想要的是：

如果用户选择“其他”选项，则应显示指定“其他”的文本字段。当用户选择另一个选项（不是“其他”）时，我想再次隐藏它。如何使用 JQuery 执行该操作？

这是我的 JSP 代码

```
<label for="db">Choose type</label>
<select name="dbType" id=dbType">
   <option>Choose Database Type</option>
   <option value="oracle">Oracle</option>
   <option value="mssql">MS SQL</option>
   <option value="mysql">MySQL</option>
   <option value="other">Other</option>
</select>

<div id="otherType" style="display:none;">
  <label for="specify">Specify</label>
  <input type="text" name="specify" placeholder="Specify Databse Type"/>
</div> 
```

现在我只想在用户选择其他时显示 DIV 标记**(id="otherType")**。我想试试 JQuery。这是我试过的代码

```
<script type="text/javascript"
    src="jquery-ui-1.10.0/tests/jquery-1.9.0.js"></script>
<script src="jquery-ui-1.10.0/ui/jquery-ui.js"></script>
<script>    
$('#dbType').change(function(){

   selection = $('this').value();
   switch(selection)
   {
       case 'other':
           $('#otherType').show();
           break;
       case 'default':
           $('#otherType').hide();
           break;
   }
});
</script> 
```

但我无法得到这个。我应该怎么办？谢谢

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-22T09:43:24.723

您的代码有一些问题：

1.  您在 select 元素的 id 上缺少一个开放引号，因此：`<select name="dbType" id=dbType">`

应该`<select name="dbType" id="dbType">`

2.  `$('this')`应该是`$(this)`：括号内不需要引号。

3.  当您想要检索选项的值时，使用 .val() 而不是 .value()

4.  当你初始化“选择”时，在它前面加上一个 var，除非你在函数开始时已经这样做了

尝试这个：

```
 $('#dbType').on('change',function(){
        if( $(this).val()==="other"){
        $("#otherType").show()
        }
        else{
        $("#otherType").hide()
        }
    }); 
```

[http://jsfiddle.net/ks6cv/](http://jsfiddle.net/ks6cv/)

**与开关一起使用的**更新：****

 **```
$('#dbType').on('change',function(){
     var selection = $(this).val();
    switch(selection){
    case "other":
    $("#otherType").show()
   break;
    default:
    $("#otherType").hide()
    }
}); 
```

**更新**jQuery 和 jQuery-UI 的链接：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>‌​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-09T09:58:28.973

**[JSFiddle 上的演示](https://jsfiddle.net/emresaracoglu/p9cxd7d1/)**

```
$(document).ready(function () {
    toggleFields(); // call this first so we start out with the correct visibility depending on the selected form values
    // this will call our toggleFields function every time the selection value of our other field changes
    $("#dbType").change(function () {
        toggleFields();
    });

});
// this toggles the visibility of other server
function toggleFields() {
    if ($("#dbType").val() === "other")
        $("#otherServer").show();
    else
        $("#otherServer").hide();
} 
```

HTML：

```
 <p>Choose type</p>
    <p>Server:
        <select id="dbType" name="dbType">
          <option>Choose Database Type</option>
          <option value="oracle">Oracle</option>
          <option value="mssql">MS SQL</option>
          <option value="mysql">MySQL</option>
          <option value="other">Other</option>
        </select>
    </p>
    <div id="otherServer">
        <p>Server:
            <input type="text" name="server_name" />
        </p>
        <p>Port:
            <input type="text" name="port_no" />
        </p>
    </div>
    <p align="center">
        <input type="submit" value="Submit!" />
    </p> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T09:38:26.653

你必须使用`val()`而不是`value()`你错过了起始报价 `id=dbType"`应该是`id="dbType"`

**[现场演示](http://jsfiddle.net/vyc7N/57/)**

*改变*

```
selection = $('this').value(); 
```

*至*

```
selection = $(this).val(); 
```

或者

```
selection = this.value; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T10:41:02.397

我得到了它的答案。这是我的代码

```
<label for="db">Choose type</label>
<select name="dbType" id=dbType">
   <option>Choose Database Type</option>
   <option value="oracle">Oracle</option>
   <option value="mssql">MS SQL</option>
   <option value="mysql">MySQL</option>
   <option value="other">Other</option>
</select>

<div id="other" class="selectDBType" style="display:none;">
<label for="specify">Specify</label>
<input type="text" name="specify" placeholder="Specify Databse Type"/>
</div> 
```

我的脚本是

```
$(function() {

        $('#dbType').change(function() {
            $('.selectDBType').slideUp("slow");
            $('#' + $(this).val()).slideDown("slow");
        });
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-16T07:00:57.220

```
<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>
function myfun(){
$(document).ready(function(){

    $("#select").click(
    function(){
    var data=$("#select").val();
        $("#disp").val(data);
                     });
});
}
</script>
</head>
<body>

<p>id <input type="text" name="user" id="disp"></p>

<select id="select" onclick="myfun()">
<option name="1"value="1">first</option>
<option name="2"value="2">second</option>
</select>

</body>
</html> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T09:40:39.303

```
$('#dbType').change(function(){

   var selection = $(this).val();
   if(selection == 'other')
   {
      $('#otherType').show();
   }
   else
   {
      $('#otherType').hide();
   } 

}); 
```**