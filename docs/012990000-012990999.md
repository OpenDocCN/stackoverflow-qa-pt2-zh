# StackOverflow 问答 12990000-12990999

# mongodb - NoSQL（例如 MongoDB）能否替代 Data Grid 解决方案，例如 Oracle Coherence

> ID：12990009
> 
> 赞同：4
> 
> 时间：2012-10-20T15:40:31.970
> 
> 标签：mongodb, caching, datagrid, oracle-coherence, nosql

我正在寻找关于用一些文档存储替代品（例如 NoSQL MongoDB）替换现有数据网格（即 Oracle Coherence）的意见。我正在考虑最重要的利弊，并提出：

**NoSQL**

*优点：*

1.  没有额外的数据库
2.  无需 ORM 映射
3.  虽然通过ID查询可以达到最好的查询效率，但其他查询可以通过map/reduce查询来满足

*缺点：*

1.  更新多个集合甚至同一集合中的多行时，很难实现数据一致性
2.  响应时间较慢？（我怀疑 Coherence 响应时间可能会更好）
3.  读操作可以返回旧数据

**数据网格**

*优点*

1.  使用数据网格，保持数据一致似乎更容易，例如数据网格变成了 SOR（记录系统）
2.  随着数据网格变为 SOR，所有数据都应始终在网格中可用
3.  远程执行器

*缺点*

1.  额外的数据库意味着额外的开销和系统/应用程序要求
2.  拥有大量数据和分片，任何类型的查询都可能需要大量时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:08:33.097

Couchbase Server 是 Oracle Coherence 的一个很好的替代品，特别是对于企业级应用程序。Orbitz 是一个很好的例子，其中大量的 Coherence 节点被 Couchbase 的 70 个节点所取代。

您可以在此处阅读有关 Coherence 替换的更多信息：http: [//gigaom.com/cloud/balancing-oracle-and-open-source-at-orbitz/](http://gigaom.com/cloud/balancing-oracle-and-open-source-at-orbitz/)

Orbitz 演示文稿中有关 Couchbase 的幻灯片也可在此处获得：[http ://www.slideshare.net/Couchbase/t1-s6-oww-usescouchbase](http://www.slideshare.net/Couchbase/t1-s6-oww-usescouchbase)

优点：

*   使用复制和故障转移的节点的高可用性（避免冷缓存场景）
*   亚毫秒级延迟（基于 memcached 的内置对象级缓存）
*   高读/写吞吐量（锁定粒度非常低）（[http://www.cisco.com/en/US/prod/collat](http://www.cisco.com/en/US/prod/collateral/switches/ps9441/ps9670/white_paper_c11-708169.pdf) ​​eral/switches/ps9441/ps9670/white_paper_c11-708169.pdf ）
*   文档/项目级别的强一致性
*   每个文件/项目的 TTL / 到期

缺点：

*   跨多文档更新难以实现一致性。可以使用哨兵来实现。（[http://www.amainhobbies.com/FromTheCEO/2012/09/09/invalidating-couchbase-cache-entries-with-sentinels/](http://www.amainhobbies.com/FromTheCEO/2012/09/09/invalidating-couchbase-cache-entries-with-sentinels/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:23:26.703

您已经详细说明了利弊……正如 iwein 所说，这取决于……

现有的关系系统强制执行哪些查询？

我们知道，nosql db 中的分区比 realtional db 中的分区更容易......所以如果你切换到 mongo，你可以以更便宜、更快捷的方式扩展你的系统性能......

如果人们现在对您的 Oracle 系统感到满意。不要碰它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:17:08.053

它可以，但笔和纸系统也可以。

问题是，它会是一个可以接受的替代品吗？这完全取决于情况。在某些情况下，NoSQL 解决方案比关系解决方案更快、更具可扩展性，但在某些情况下，必须对运行时间更长的事务和关系约束提供某种支持。

这取决于。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T16:48:50.793

是的——NoSQL 可以替代它。但很大程度上取决于你想要做什么。如果您只需要一个简单的文档存储和基于键的简单查找，那么 NoSQL 是不费吹灰之力的。

如果您需要一个具有付费支持和功能（例如自定义聚合、入口处理器等）的企业级解决方案。也许 Coherence 就是您想要的。

我见过人们在 Coherence 之上构建定制的 NoSQL 解决方案——这是一件非常昂贵的事情。

# ruby - 如何在输入值中显示文字 #{ @foo.bar }？

> ID：12990010
> 
> 赞同：3
> 
> 时间：2012-10-20T15:40:32.633
> 
> 标签：ruby, slim-lang

这是我的代码：

```
- snippets = ['state.name', 'city.name']
- snippets.each do |s|
    input type="text" value="#{ s }" 
```

我需要它返回（字面意思`#{ @foo.bar }`）：

```
<input type="text" value="#{ @state.name }" >
<input type="text" value="#{ @city.name }"  > 
```

我尝试的一切都会返回一个奇怪的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:28:52.387

尝试这个：

```
input type="text" value=( '\#{ @%s }' % s ) 
```

`\#`和单引号确保内部的代码不会被评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:45:45.913

只是

```
input type="text" value=#{ s } 
```

仅供参考

```
<input type="text" value="<%= @state.name %>" > 
```

# iphone - 在 CGAffineTransform 之后获取 UIView 的中心

> ID：12990014
> 
> 赞同：3
> 
> 时间：2012-10-20T15:40:59.383
> 
> 标签：iphone, ios, uiview, cgaffinetransform

假设我有一个小的 UIView 作为较大 UIView 的子视图/子视图，并且可以通过一些 CGAffineTransforms 移动该子视图。父级如何知道该视图的真正“中心”在其自己的坐标系内是什么？我曾尝试将 convertPoint 例程与 child.center 返回的任何内容一起使用，但它不起作用......在这种情况下，'center' 完全是假的，还是我只是使用了错误的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T18:07:09.897

**编辑：**

在做了一些测试后，我注意到以下几点：

UIViews 没有 anchorPoint 属性，但它们有 center 属性。center 属性在应用变换后总是会正确计算，除了平移变换，您必须执行以下操作：

```
CGPoint realCenter = CGPointMake(myView.center.x + myView.frame.origin.x, ...); 
```

至于`CALayer`s，它们确实具有 anchorPoint 属性，但缺少 center 属性。因此，您要做的是通过对位置属性、锚点属性和图层的平移进行计算来手动计算中心。

我无法提供任何代码，因为我不确定您使用的是哪种方法，但要结束它，您必须以任何一种方式推出自己的中心计算器。

* * *

请仔细看下面的图片（由斯坦福 iPhone 开发课程幻灯片提供）：

**在应用任何旋转之前：**

![在此处输入图像描述](../Images/71d4d123d70ba709486df07f3068e323.png)

**应用 45° 旋转后：**

![在此处输入图像描述](../Images/4ebe13ca9bb1cca49a1448cdebb9b235.png)

**结论：**

请注意旧中心是 (300, 225) 而新中心是，不是新的！一样的。如果你做的每件事都正确，你的中心应该是一样的。如果您想计算视图中的另一个点，那么您必须自己计算。

另请注意帧如何从 (200, 100, 200, 250) 更改为 (140, 65, 320, 320)。这就是 UIKit 的神奇之处。

# postgresql - PostgreSQL OperationalError：无法连接到服务器

> ID：12990023
> 
> 赞同：2
> 
> 时间：2012-10-20T15:42:14.337
> 
> 标签：postgresql

今天第一次遇到这个错误：

> 无法连接到服务器：没有这样的文件或目录服务器是否在本地运行并接受 Unix 域套接字“/tmp/.s.PGSQL.5432”上的连接？

我正在使用 PostgreSQL 在本地运行一个简单的 Django 博客。

当我运行时：

> ps辅助| grep postgres

我得到以下信息：

```
Chris    3260    0.5   0.0  2432768    620 s000  R+   11:37AM   0:00.00 grep postgres 
```

我最后一次能够成功使用 PostgreSQL 是在昨晚。从那以后我没有改变任何东西，所以这可能与我的电脑有关？

如果您需要更多信息，请问我 :) 感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:25:13.987

问题与我关闭计算机的方式有关。一个简单的重启解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-09T11:21:13.340

问题是 PostgreSQL 已经停止，所以必须启动它。尝试以下命令来启动 PostgreSQL：

检查状态：

> 须藤 /etc/init.d/postgres 状态

开始：

> 须藤 /etc/init.d/postgresql 启动

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-06-04T14:00:18.733

首先，您应该首先删除 postgres

去根

root@erp-Inspiron-1545:/home/erp# apt-get --purge 删除 postgresql

卸载 Postgres 后

rm -r /etc/postgresql/

rm -r /etc/postgresql-common/

rm -r /var/lib/postgresql/

userdel -r postgres

groupdel postgres

apt-get 安装 postgresql

现在转到 Postgres

su postgres

键入此命令：-

使用密码“postgres”更改用户 postgres；

现在回到 odoo 路径并重新启动您的服务器..!!!!

# c# - 从 listView 中仅选择一项

> ID：12990028
> 
> 赞同：3
> 
> 时间：2012-10-20T15:42:31.837
> 
> 标签：c#, .net, winforms, listview

我是 C# 的初学者。当用户选择一个项目名称时，我只需要显示一个项目`ListView`（及其子项目）`ComboBox`。

我知道要使用的事件，即`SelectedIndexChanged`事件。但我不知道该怎么做。

目前我正在使用包括 XML 文件和数据集的替代大流程，这使我的项目更加复杂。

里面有`ListView`很多东西。相同的项目名称也在`ComboBox`.

如果你有时间，请看看我的非常小的项目。**[下载](http://dl.dropbox.com/u/87374848/FlagsApp%201001.zip)**

**编辑**：这里“*仅显示一项*”意味着严格只显示一项，而不是选择特定项目并显示所有项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T15:54:42.160

为什么不直接使用这段代码来获得想要的结果：

**添加：**

按着这些次序：

1.  创建一个 Country 类，如下所示：

    ```
    class Country
    {
        public string Name { get; set; }
        public string Flag { get; set; }
        public string Continent { get; set; }
        public string Capital { get; set; }
        public string Population { get; set; }
        public string Currency { get; set; }
    } 
    ```

2.  根据您的要求填充国家信息，如下所示：

    ```
    List<Country> countryList = new List<Country>() { 
        new Country() { Name = "India", Capital = "Delhi", Continent = "Asia", Currency = "Rupee", Population = "1.2 Billion", Flag = "india.gif" }, 
        new Country() { Name = "Pakistan", Capital = "Islamabad", Continent = "Asia", Currency = "Rupee", Population = "0,5 Billion", Flag = "pakistan.gif" }, 
        new Country() { Name = "Sri Lanka", Capital = "Kotte", Continent = "Asia", Currency = "SriLankan Rupee", Population = "20277597", Flag = "sri_lanka.gif" } 
    }; 
    ```

3.  修改*frmFlag_Load*事件如下图：

    ```
    private void frmFlag_Load(object sender, EventArgs e)
    {
        lvMain.Items.Clear();
        tlstrpcmbCountries.Items.Clear();

        tlstrpcmbCountries.Items.Add("All");
        for (int i = 0; i < countryList.Count; i++)
        {
            tlstrpcmbCountries.Items.Add(countryList[i].Name);
        }

        tlstrpcmbCountries.SelectedIndex = 0;
        tlstrpcmbViews.SelectedIndex = 0;
    } 
    ```

4.  修改*ComboBox*和*ListView的**SelectedIndexChanged*事件，如下所示：

     **```
    private void tlstrpcmbCountries_SelectedIndexChanged(object sender, EventArgs e)
    {
        var country = countryList.Where(c => c.Name.Equals(tlstrpcmbCountries.SelectedItem.ToString())).Select(s => s).FirstOrDefault();

        if (country != null)
        {
            lvMain.Items.Clear();

            ListViewItem item = new ListViewItem(country.Name, country.Flag);

            item.SubItems.Add(country.Continent);
            item.SubItems.Add(country.Capital);
            item.SubItems.Add(country.Population);
            item.SubItems.Add(country.Currency);
            lvMain.Items.Add(item);

            lvMain.EnsureVisible(0);
            item.Selected = true;
            item.Focused = true;
            lvMain.Select();
        }
    }

    private void lvMain_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (lvMain.SelectedItems.Count > 0)
        {
            var selected = lvMain.SelectedItems[0];
            lblCountryName.Text = selected.SubItems[0].Text;
            lblContinent.Text = selected.SubItems[1].Text;
            lblCapitalCity.Text = selected.SubItems[2].Text;
            lblPopulation.Text = selected.SubItems[3].Text;
            lblCurrencyName.Text = selected.SubItems[4].Text;
        }
    } 
    ```** 

 **通过遵循这种方法，您甚至不需要匹配您的物品的顺序。

快乐的编码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:47:53.060

在尝试了许多尝试后，我决定使用`DataSet`or`DataTable`因为在这里我们需要保存对列表视图项目所做的更改，并且这些更改应该保存在`DataSet`or`DataTable`以便这些项目以后可以调用。**

# jquery - jquery jscrollpane 水平滚动方向向右滚动

> ID：12990030
> 
> 赞同：0
> 
> 时间：2012-10-20T15:42:48.717
> 
> 标签：jquery, jscrollpane, horizontal-scrolling

我如何通过从右到左的滚动拖动而不是标准显示来调整 jquery jscrollpane 水平滚动？我已经用 调整了 css `direction:rtt and float:right`，但是 jscroll 拖动无法正常工作。我如何调整`css/js`右`jscrollpane horizontal scroll`显示，我使用了 jquery.jscrollpane.min.js 插件？我怎么能调整`.jspContainer`，比如`Scrollbar on right`。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:55:58.683

如果在初始化滚动窗格后直接调用[scrollToX](http://jscrollpane.kelvinluck.com/api.html#scrollToX)，那么它应该直接滚动到右侧，用户将能够向后滚动。

就像是：

```
$(function()
{
    var pane = $('.scroll-pane');
    pane.jScrollPane(
        {
            // Any settings you need
        }
    );
    var api = pane.data('jsp');
    api.scrollToX(9999, false);
} 
```

# java - Twitter4J 访问令牌已经可用

> ID：12990031
> 
> 赞同：5
> 
> 时间：2012-10-20T15:42:52.690
> 
> 标签：java, twitter, oauth, twitter4j

我在使用 Twitter4J 时收到错误消息：

```
java.lang.IllegalStateException: Access token already available.
twitter4j.auth.OAuthAuthorization.getOAuthRequestToken(OAuthAuthorization.java:112)
twitter4j.auth.OAuthAuthorization.getOAuthRequestToken(OAuthAuthorization.java:104)
twitter4j.TwitterBaseImpl.getOAuthRequestToken(TwitterBaseImpl.java:276)
twitter4j.TwitterBaseImpl.getOAuthRequestToken(TwitterBaseImpl.java:269)
[...] 
```

调用该方法时会引发此异常`Twitter.getOAuthRequestToken()`。我想获取授权 URL 来验证下一个用户。

我怎么可能解决这个问题？我只将 OAuthConsumerKey、OAuthConsumerSecret、OAuthAccessToken 和 OAuthAccessTokenSecret 放到 Twitter4J 属性中。但是如何接收授权 URL 以验证新用户？

谢谢和问候，

马丁

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T12:09:47.750

对不起。

我正在设置由配置生成器硬编码的访问令牌。

删除它，现在可以使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-08T09:27:41.117

在请求新的访问令牌之前，您需要创建一个新的 twitter 实例并将其 accessToken 和 accessTokenSecret 字段设为空。

```
ConfigurationBuilder cb = new ConfigurationBuilder();
    cb.setDebugEnabled(true)
            .setOAuthConsumerKey(TWITTER_CONSUMER_KEY)
            .setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET)
            .setOAuthAccessToken(null)
            .setOAuthAccessTokenSecret(null);
    TwitterFactory tf = new TwitterFactory(cb.build());
    Twitter twitter = tf.getInstance(); 
```

# css - 覆盖 Chrome 中密码输入的默认字体大小以匹配 Firefox

> ID：12990034
> 
> 赞同：3
> 
> 时间：2012-10-20T15:42:59.550
> 
> 标签：css, firefox, google-chrome

Chrome 呈现的密码比 Firefox 小。如果我在 Chrome 中手动增加密码输入元素的字体大小以匹配 Firefox，那么插入符号的高度也会增加，这是我不想要的。对此有什么解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:13:58.757

给你（使用[媒体查询来选择 Chrome](https://stackoverflow.com/questions/8897063/is-it-possible-to-target-chrome-by-html-or-media-query-only) ...*和 Safari*，我不必检查）：

```
<input type="password" class="pass" value="dfjlfsdkljf"><br>
<input type="password" value="dfjlfsdkljf">​

@media screen and (-webkit-min-device-pixel-ratio:0) {
    .pass {
        -webkit-text-stroke-width: .2em;
        letter-spacing: 0.2em;
    }
}​ 
```

[http://jsfiddle.net/exbFb/3/](http://jsfiddle.net/exbFb/3/)

还有一个毯子选择器，用于影响`input[type=password]`元素：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
    input[type=password] {
        -webkit-text-stroke-width: .2em;
        letter-spacing: 0.2em;
    }
}​ 
```

[http://jsfiddle.net/exbFb/4/](http://jsfiddle.net/exbFb/4/)

# iphone - 如何禁用 UITextView 中的复制、粘贴选项并再次启用 iPhone 应用程序？

> ID：12990043
> 
> 赞同：0
> 
> 时间：2012-10-20T15:44:23.413
> 
> 标签：iphone, uitextview, uimenucontroller, disabled-control

我在基于 UITextView 的 iPhone 应用程序中工作。在我的一个屏幕中，当用户点击屏幕时，我有 3 个 UITextView 显示带有自定义 MenuItems 的 UIMenuController。`In this scenario UITextView is in Active means UITextView is becomResponder. So when i show UIMenuItem taping the screen UITextView UIMenuController showing with "Paste" option.`

当用户触摸屏幕时，我想从 UITextView 禁用 UIMenuController 项目。`Could you please anyone tell me how to disable UITextView with showing keypad and disable UIMenuController.?`提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:14:41.750

你可以这样编码：

```
-(BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if (action == @selector(paste:))
        return NO;
    return [super canPerformAction:action withSender:sender];
} 
```

否则你可以写：

```
- (BOOL)canBecomeFirstResponder {
    return NO;
} 
```

使您的文本文件不可编辑。希望对你有效。

# android - Android Monkey 未写入 scriptlog.txt（权限被拒绝）

> ID：12990045
> 
> 赞同：0
> 
> 时间：2012-10-20T15:44:28.537
> 
> 标签：android, android-monkey

刚开始尝试使用 android monkey 工具，它工作正常，除了在运行期间它会打印数千行以下内容：

```
java.io.FileNotFoundException: /mnt/sdcard/scriptlog.txt (Permission Denied) 
```

为什么它无法写入 /mnt/sdcard？是否可以选择写入主机上的不同目录，或完全禁用日志？

如果重要的话，我的设备没有植根。

我还尝试在 Windows 管理员 shell 中运行该命令，但没有帮助。

# ruby-on-rails - 通过会话进行验证的多页表单

> ID：12990047
> 
> 赞同：0
> 
> 时间：2012-10-20T15:44:32.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

美好的一天，我有一个通过多页表单创建用户的应用程序（除了最后一步，不允许与 db 交互！）

所以在第一页用户输入他的电子邮件第二他的地址第三公司信息（或任何）第四页 - 它显示了所有信息并将用户保存到数据库中。

我的解决方案如下： 第一步：users_controller 的新操作。这是观点

```
- if notice
  p[class='notice'] = notice
p Enter your personal data
= form_tag step2_path do 
  p
    = label_tag 'Email'
    = text_field_tag 'user[email]'
  p  
    = submit_tag 'Continue' 
```

用户#创建

```
def create
    session[:user] = {}
    redirect_to step2_path
  end 
```

step2,3,4是相同的动作。路线.rb

```
 match 'step2' => 'user_signup#steps'
  match 'step3' => 'user_signup#steps'
  match 'step4' => 'user_signup#steps'

class UserSignupController < ApplicationController

  def steps
    @check = true
    path = request.env['PATH_INFO'][1..-1]
    update
    if path == 'step4' 
      @user = User.create(session[:user])
    end
    render "user_signup/#{path}"
  end
def update
    session[:user] = if session[:user].present?
      session[:user].merge(params[:user]) { |key, old, new| new } 
    else
      params[:user]
    end
  end 
```

并在每一步 (2,3,4) 上创建 params[:user][xxx] ......会有任何提示吗？

**更新** 我决定申请[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) 然后使用演示者模式[http://blog.jayfields.com/2007/03/rails-presenter-模式.html](http://blog.jayfields.com/2007/03/rails-presenter-pattern.html)

# c# - C# 继承构造函数子和父 ??

> ID：12990048
> 
> 赞同：3
> 
> 时间：2012-10-20T15:44:49.413
> 
> 标签：c#, inheritance, constructor

我是 C++ 程序员，我是 C# 新手，我写了一个小程序来测试继承，所以这里是源代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Lesson3_Class_inherit_
{
   public class Personne
    {
        public string Name;
        public int Age;
        public Personne() { }
        public Personne(string _Name, int _Age) 
        {
            Name = _Name;
            Age = _Age;
            Console.WriteLine("Constrcut Personne Called\n");

        }
        ~Personne() 
        {
            Console.WriteLine("Destruct Personne Called\n");
        }

    };
    class Humain :  Personne 
    {
        public string Langue;
        public Humain(string _Name, int _Age,string _Langue)
        {
        Console.WriteLine("Constrcut Humain Called\n");
         Name = _Name;
         Age = _Age;
         Langue =_Langue;
        }

    };

    class Program
    {
        static void Main(string[] args)
        {
            Humain H1 = new Humain("majdi", 28, "Deutsch");

            Console.ReadLine();
        }
    }
} 
```

输出： Construct Humain Called\ 并且 Personne 类的构造没有被调用为什么！！！在 C++ 中，首先调用父类构造函数！请帮忙 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T15:51:01.433

在 C# 中，您必须使用 base 关键字显式调用父构造函数。所以Humain看起来像

```
class Humain :  Personne 
    {
        public string Langue;
        public Humain(string _Name, int _Age,string _Langue) : base(_Name, _Age)
        {
         Console.WriteLine("Constrcut Humain Called\n");
         Name = _Name;
         Age = _Age;
         Langue =_Langue;
        }

    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:51:32.503

因为它调用了默认构造函数。要调用另一个构造函数，您需要编写：

```
base(_Name, _Age); 
```

在 Humain 的构造函数的开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T15:57:19.570

```
public Humain(string _Name, int _Age,string _Langue) : base(_Name, _Age)
{
    Lange = _Langue;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T15:58:29.317

尝试以这种方式调用基类构造函数：

```
class Humain : Personne
{
    public string Langue;
    public Humain(string _Name, int _Age, string _Langue) : base (_Name, _Age)
    {
        Console.WriteLine("Constrcut Humain Called\n");
        Name = _Name;
        Age = _Age;
        Langue = _Langue;
    }
} 
```

根据您的要求，您甚至可以调用***默认构造函数***而不是***参数化构造函数***。

```
 public Humain(string _Name, int _Age, string _Langue) : base ()
    {
        Console.WriteLine("Constrcut Humain Called\n");
        Name = _Name;
        Age = _Age;
        Langue = _Langue;
    } 
```

# c# - 检测按键

> ID：12990049
> 
> 赞同：2
> 
> 时间：2012-10-20T15:44:54.297
> 
> 标签：c#, keyboard, keypress, slimdx

我目前正在检查程序中的键盘状态：

```
SlimDX.DirectInput.KeyboardState keyboardState = keyboard.GetCurrentState(); 
```

并像这样检测按键：

```
 if(keyboardState.IsPressed(SlimDX.DirectInput.Key.Q))... 
```

我不知道如何检测任何按键，而不是特定键。在浏览了 SlimDX API 文档后，我无法理解它。毫无疑问，我可能错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:50:57.370

KeyboardState 类有一个`PressedKeys`只读属性，其中包含一个`IList<Key>`按下的键。

您可以检查此列表是否为空，以了解未按下任何内容 ( `kbd.PressedKeys.Count == 0`)。

如果您想响应键盘事件并避免轮询模式（显式检查按键），您应该查看`SlimDX.RawInput`命名空间并使用按键事件处理，类似于 WinForms。

# emacs - Lisp 代码（s 表达式）格式化程序

> ID：12990052
> 
> 赞同：4
> 
> 时间：2012-10-20T15:45:05.717
> 
> 标签：emacs, formatting, lisp, textmate

jSIMLIB 检查器打印出本质上是 lisp 代码的 s 表达式代码

```
(set-option :print-success false) 
(set-logic QF_LIA) 
(declare-fun RETURN () Int)
(declare-fun refs_1_SYMINT () Int)
(declare-fun flags_2_SYMINT () Int)
(assert+ ( and ( or ( and (/= flags_2_SYMINT 0) (and (= RETURN flags_2_SYMINT)) ) ( and (/= refs_1_SYMINT 0) (and (= flags_2_SYMINT 0)) (and (= RETURN refs_1_SYMINT)) ) ( and (and (= refs_1_SYMINT 0)) (and (= flags_2_SYMINT 0)) (and (= RETURN 100)) ) ) ( not ( or ( and (/= flags_2_SYMINT 0) (and (= RETURN flags_2_SYMINT)) ) ( and (/= refs_1_SYMINT 0) (and (= flags_2_SYMINT 0)) (and (= RETURN refs_1_SYMINT)) ) ( and (and (= refs_1_SYMINT 0)) (and (= flags_2_SYMINT 0)) (and (= RETURN 10)) ) ) ) ) )
(check)
(exit) 
```

如何格式化代码，最好使用 emacs 或 TextMate？例如：

```
(set-option :print-success false) 
(set-logic QF_LIA) 
(declare-fun RETURN () Int)
(declare-fun refs_1_SYMINT () Int)
(declare-fun flags_2_SYMINT () Int)
(assert 
  (and  
    (and 
      (and  
        (distinct  flags_2_SYMINT 0)  
        (=  RETURN flags_2_SYMINT))
      (=  refs_1_SYMINT refs1_1_SYMINT)
      (=  flags_2_SYMINT flags1_2_SYMINT))
    (not 
      (and  
        (distinct  flags_2_SYMINT 0) 
        (=  RETURN flags_2_SYMINT))))) 
(check-sat) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T16:26:50.377

该`pp`功能可以很好地打印出来，但可能与您想要的格式不完全匹配。

这是您问题中的一行：

```
(pp '(assert+ ( and ( or ( and (/= flags_2_SYMINT 0) (and (= RETURN flags_2_SYMINT)) ) ( and (/= refs_1_SYMINT 0) (and (= flags_2_SYMINT 0)) (and (= RETURN refs_1_SYMINT)) ) ( and (and (= refs_1_SYMINT 0)) (and (= flags_2_SYMINT 0)) (and (= RETURN 100)) ) ) ( not ( or ( and (/= flags_2_SYMINT 0) (and (= RETURN flags_2_SYMINT)) ) ( and (/= refs_1_SYMINT 0) (and (= flags_2_SYMINT 0)) (and (= RETURN refs_1_SYMINT)) ) ( and (and (= refs_1_SYMINT 0)) (and (= flags_2_SYMINT 0)) (and (= RETURN 10)) ) ) ) ) )) 
```

输出是：

```
(assert+
 (and
  (or
   (and
    (/= flags_2_SYMINT 0)
    (and
     (= RETURN flags_2_SYMINT)))
   (and
    (/= refs_1_SYMINT 0)
    (and
     (= flags_2_SYMINT 0))
    (and
     (= RETURN refs_1_SYMINT)))
   (and
    (and
     (= refs_1_SYMINT 0))
    (and
     (= flags_2_SYMINT 0))
    (and
     (= RETURN 100))))
  (not
   (or
    (and
     (/= flags_2_SYMINT 0)
     (and
      (= RETURN flags_2_SYMINT)))
    (and
     (/= refs_1_SYMINT 0)
     (and
      (= flags_2_SYMINT 0))
     (and
      (= RETURN refs_1_SYMINT)))
    (and
     (and
      (= refs_1_SYMINT 0))
     (and
      (= flags_2_SYMINT 0))
     (and
      (= RETURN 10))))))) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-20T18:40:52.953

在 GNU Emacs 中，您可以使用`indent-pp-sexp`.

将 s 表达式之前的光标设置为 pretty-print 并键入`c-u m-x indent-pp-sexp`。

# neo4j - Neo4j 内部结构：inUse

> ID：12990059
> 
> 赞同：1
> 
> 时间：2012-10-20T15:45:32.360
> 
> 标签：neo4j

比特有什么作用`inUse`？它是否是已删除项目的标记，以便可以懒惰地重复使用它们？

参考[http://www.slideshare.net/thobe/an-overview-of-neo4j-internals的第 12 页](http://www.slideshare.net/thobe/an-overview-of-neo4j-internals)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:42:05.843

可能最好直接在 Twitter @thobe 上 ping Tobias :)

# java - Java - 通过 TCP/IP 发送 XML 文件。可能吗？

> ID：12990064
> 
> 赞同：-3
> 
> 时间：2012-10-20T15:45:50.720
> 
> 标签：java, xml, networking, tcp

我正在编写一个应用程序，其中一个过程是通过 tcp/ip 发送数据。我打算/已经将我的数据包装到一个 xml 文件中，但这是我的问题：

1.  实际上是否可以将整个 xml 文件作为一个整体发送，还是我需要逐行读取它？

2.  如果是这样，我将如何去做/我应该使用哪些方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T15:48:01.920

经常使用的尝试是从文件中读取 N 个字节，然后发送它们，然后再读取 N 个字节，忽略检查这是否是新行，因为这并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:57:14.490

> 实际上是否可以将整个 xml 文件作为一个整体发送，还是我需要逐行读取它？

TCP 套接字有一个字节流，您理论上一次发送一个字节。这意味着您不能通过套接字发送文件，但您可以发送文件中的所有字节并根据需要创建另一个具有相同字节的文件，可能具有相同的名称，甚至在相同的目录路径中。

大多数 XML 编写器和解析器都支持 OutputStream 和 InputStream 或 Writer 和 Reader。如果您使用那些您不需要知道如何或何时发送字节，也不应该关心。

# c# - wcf 类库中的 WCF 数据服务（让客户端通过该服务与数据库通信）

> ID：12990068
> 
> 赞同：2
> 
> 时间：2012-10-20T15:46:34.980
> 
> 标签：c#, wcf, ado.net, wcf-data-services

我正在创建一个简单的应用程序，客户端需要与服务器通信才能执行简单的任务。服务器由一个数据库和一个 WCF 服务组成。客户端连接到服务和数据库。

我正在使用 ado.net 实体数据模型在数据库上创建 CRUD 操作。**我想让客户端通过服务创建 CRUD 操作，并避免让客户端连接到数据库。**

当我在服务上创建返回实体对象的方法时，我得到一个异常。例如我有方法：

```
 public Data.Scheduling[] GetSchedules()
    {
        Data.TCEntities1 entities = new Data.TCEntities1();

        var a = entities.Schedulings.ToArray();

        return a;
    } 
```

我不想重新创建`Schedulings`类和其他实体类以使我的方法有效。**在不让客户端连接到数据库的情况下，我如何能够通过我的 wcf 类库服务公开创建、读取、更新和删除操作？**

## 编辑

如果它令人困惑，请对我的问题进行更多解释：

在我的服务器应用程序（wcf 服务）中，我具有基本功能以及 ado.net 实体数据类。因为我有 ado.net 实体数据类，所以我可以很容易地从数据库中提取结果，例如：

```
 Data.TCEntities1 entities = new Data.TCEntities1();
    var a = entities.Schedulings.ToList(); // schedulings is a table in my database 
```

如您所见，这些行将从数据库中的表调度中检索所有调度行，并且可以使用它（我将有一个 List ）。如果我的 wcf 服务返回 a ，为什么会出现错误`List<Data.Scheduling>`？我想防止客户端查询数据库，因为它们只是执行非常简单的操作（数据库只有 2 个表）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:30:12.147

WCF 通过公开合同来工作。因为您使用 ADO.NET 数据模型，您将获得自动生成的“部分”类。这些没有标记`DataContract`或`DataMember`WCF 要求它们在客户端工作。一种或另一种方式，您需要将部分类复制到新的类/文件中并添加属性，以便它们显示在客户端上。

```
[DataContract]
public partial class Entity1
{
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    public string Property1 { get; set; }

    [DataMember]
    public string Property2 { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:09:03.527

这是一个令人困惑的问题。您创建 CRUD WCF 调用，客户端调用 CRUD 函数。服务与数据库对话。客户与服务交谈。客户端不与数据库交谈。

# java - 如何使用 Java 从 Google App Engine 创建下载链接

> ID：12990072
> 
> 赞同：2
> 
> 时间：2012-10-20T15:46:43.537
> 
> 标签：java, google-app-engine, download

我正在构建一个 Google App Engine 应用程序，它处理用户输入文件，将其模型存储在数据存储中，并在处理模型后让用户以任何格式下载文件，为此我需要为我的处理过的文件。

我在 Python 中找到了一些东西，但我不熟悉它的工作原理。

*   [如何让 Google App Engine 具有从数据库下载内容的下载链接？](https://stackoverflow.com/questions/11604193/how-do-i-let-google-app-engine-have-a-download-link-that-downloads-something-fro)
*   [谷歌应用引擎python下载文件](https://stackoverflow.com/questions/2767910/google-app-engine-python-download-file)

我需要用Java来做。任何帮助表示赞赏。涵盖它的代码很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:37:36.080

这是jsp文件

```
<%@ page import="com.google.appengine.api.blobstore.BlobstoreServiceFactory" %>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreService" %>

<%
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
%>

<html>
<head>
    <%@ page
            language="java"
            contentType="text/html; charset=UTF-8"
            pageEncoding="UTF-8"
            %>
    <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Upload Test</title>
</head>
<body>
<form action="<%= blobstoreService.createUploadUrl("/upload") %>" method="post" enctype="multipart/form-data">
<table>
    <tr>
        <p>Bir seferde maksimum 20 dosya yükleyebilirsiniz.</p>
    </tr>
    <tr>
        <td><input type="file" name="myFile" multiple="multiple" size="20" style="width: 522px;"></td>
    </tr>
    <tr>
        <td>
            <input type="submit" value="Yükle">
        </td>
    </tr>
</table>
</form>
</body>
</html> 
```

这是对应的servlet

```
public class UploadDocument extends HttpServlet {
    private BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

    public void doPost(HttpServletRequest req, HttpServletResponse res)
            throws ServletException, IOException {

        Map<String, List<BlobKey>> blobs = blobstoreService.getUploads(req);
        List<BlobKey> blobKeys = blobs.get("myFile");

        if (blobKeys == null) {
            res.sendRedirect("/");
        } else {

            res.sendRedirect("/serve?blob-key=" + blobKeys.get(0).getKeyString());
        }
    }

} 
```

这是下载 servlet

```
public class ShowImage extends HttpServlet {
    private BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

    public void doGet(HttpServletRequest req, HttpServletResponse res)
            throws ServletException, IOException {
        doPost(req, res);
    }

    public void doPost(HttpServletRequest req, HttpServletResponse res)
            throws ServletException, IOException {
        String par = req.getParameter("name");
        if (par != null) {
            Query query = new Query("__BlobInfo__");
            query.addFilter("filename", Query.FilterOperator.EQUAL, req.getParameter("name"));

            DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
            PreparedQuery pq = datastore.prepare(query);
            List<Entity> entList = pq.asList(FetchOptions.Builder.withLimit(1));
            if (entList.size() > 0) {
                BlobKey blobKey = new BlobKey(entList.get(0).getKey().getName());
                BlobInfoFactory bi = new BlobInfoFactory();
                String fname = bi.loadBlobInfo(blobKey).getFilename();
                if (fname.contains(".jpg") || fname.contains(".JPG") || fname.contains(".jpeg") ||
                        fname.contains(".JPEG") || fname.contains(".png") || fname.contains(".PNG") ||
                        fname.contains(".GIF") || fname.contains(".gif") || fname.contains(".BMP") ||
                        fname.contains(".bmp")) {
                    res.setContentType("application/octet-stream");
                    res.setHeader("Content-Type", "save as filename=" + fname);
                    ImagesService imagesService = ImagesServiceFactory.getImagesService();

                    Image oldImage = ImagesServiceFactory.makeImageFromBlob(blobKey);
                    Transform resize = ImagesServiceFactory.makeResize(580, 270,true);

                    Image newImage = imagesService.applyTransform(resize, oldImage);

                    byte[] newImageData = newImage.getImageData();
                    OutputStream outputStream = res.getOutputStream();
                    outputStream.write(newImageData);
                } else {
                    res.setContentType("application/x-download");
                    res.setHeader("Content-Disposition", "attachment; filename=" + fname);
                    blobstoreService.serve(blobKey, res);
                }

            } else {
                res.setContentType("text/plain");
                res.setCharacterEncoding("UTF-8");
                res.getOutputStream().write("Bu isimde bir dosya bulunamadı".getBytes());
            }
        } else {

            res.setContentType("text/plain");
            res.setCharacterEncoding("UTF-8");
            res.getOutputStream().write("Lütfen parametre giriniz. Örnek: name=resim.jpg".getBytes());
        }
    }
} 
```

# emacs - 奇怪的错误：内部温度输出缓冲区显示

> ID：12990078
> 
> 赞同：2
> 
> 时间：2012-10-20T15:47:20.010
> 
> 标签：emacs, elisp

突然，我开始收到以下奇怪的消息`describe-function`：

```
ad-Orig-describe-function: Symbol's function definition is void: internal-temp-output-buffer-show 
```

我无法理解相关的 Google 点击。

任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:20:53.063

您几乎没有提供有关您正在使用的 Emacs 版本的信息，如果您最近更新了它等等。似乎这个调用在某些编译文件中有些固定，但您使用的是版本 24 之前的 Emacs，这是第一个包括这个功能。

我的建议是重新安装 Emacs（以及您安装的相关软件包，例如`org-mode`等），或者在没有站点配置（选项`-q`和`--no-site-file`）的情况下启动 Emacs，然后一一添加它们。此外，请确保您使用的是 Emacs 24（带有`emacs --version`）。

# android - 如何根据单击的按钮设置媒体播放器的数据源？

> ID：12990080
> 
> 赞同：1
> 
> 时间：2012-10-20T15:47:34.067
> 
> 标签：android, android-mediaplayer

我正在修补媒体播放器并将 mp3 存储在我的 res/raw 文件夹中。我想根据单击的按钮更改在媒体播放器中播放的 mp3。IE 如果单击按钮 1 播放 R.raw.sound1，如果单击按钮 2 播放 R.raw.sound2 等。我对单击按钮时如何获取数据源以及如何设置有点困惑要在媒体播放器中播放的数据源。我的按钮有一个 switch 语句。

```
 @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.button1:
                //get the resource and set to R.raw.sound1
        break;
            case R.id.button2:
                //get the resource and set to R.raw.sound2 
```

现在这是我的媒体播放器，我希望“声音文件”成为传递给它的 mp3/资源。

```
 if(mPlayer == null) {
            try {
                mPlayer = MediaPlayer.create(SoundActivity.this, soundfile);
                    mPlayer.start();
            } catch (Exception e) {
                e.printStackTrace();
            }
        } else {
            mPlayer.stop();
            mPlayer.release();
            mPlayer =null;

        }
    }

}; 
```

我想将上面的“声音文件”更改并设置为适当的 mp3，如果以这种方式可能的话，我会迷失如何提取和设置资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:50:25.477

所以就这样做：

```
 switch (v.getId()) {
    case R.id.button1:
        soundfile = R.raw.sound1;
        break;
    case R.id.button2:
        soundfile = R.raw.sound2;
        break; 
```

# multithreading - 线程中的 Perl 内存泄漏（线程不释放内存）

> ID：12990085
> 
> 赞同：8
> 
> 时间：2012-10-20T15:48:38.480
> 
> 标签：multithreading, perl, memory-leaks

我现在正在搜索有关此问题的 2 周，似乎仅在网上搜索时找不到任何答案。

所以，这里有两段代码：

1：

```
#! /usr/bin/perl

#
# RELEASE MEMORY
#

use threads;

my @child;

$ii=0;

while (1)
{
  my @child = threads->new(\&test, "test");
  $_->detach for @child;
  print "$ii\n";
  $ii++;
}

sub test {
    my ($ee) = 0;    
} 
```

2：

```
#! /usr/bin/perl

#
# DO NOT RELEASE MEMORY
#

use threads;

my @child;

$ii=0;

for($ii=0;$ii<2000;$ii++) {
    my @child = threads->new(\&test, "test");
    $_->detach for @child;
    print "$ii\n";
}

while(1)
{
  sleep(10);
}

sub test {
    my ($ee) = 0;    
} 
```

所以这就是问题所在。第一个代码只运行一个无限循环，它大约每 2 秒将内存释放回操作系统（根据 ps）

第二个代码也在释放内存，但仅当他在“for”循环内运行时。一旦它退出 for 循环并进入无限循环，所有尚未释放到 for 循环中的内存永远不会释放回操作系统。

有人遇到同样的问题吗？

Perl: (v5.16.1) 为 x86_64-linux-thread-multi 构建

操作系统：Debian 6.0.5

非常感谢

* * *

编辑 1：我使用了 800 个线程，并且都通过打印 $ee var 验证了它们是否退出。

但是一旦进入 while(1) 循环，这里就是 ps aux | grep perl 输出：

```
root@srv:~# ps aux | grep perl
root      6807 41.5  2.5 387780 209580 pts/0   S+   16:38   0:02 /opt/ActivePerl-5.16/bin/perl /home/tttlast.pl
root      7627  0.0  0.0   7548   856 pts/1    S+   16:38   0:00 grep perl 
```

所以所有线程都退出了，但内存使用量仍然是我服务器总内存的 2.5%。因此，除非我终止程序，否则内存仍在使用中。

* * *

编辑2：

我解决了我的问题，我改变了我的结构。事实上，主程序（长时间运行的程序）已经分开，我使用小程序等待所有线程完成退出。

这样它不会填满虚拟内存并且其他守护进程不会被杀死。

感谢所有引导我找到解决方案的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T23:25:34.157

这里没有“问题”。这都是正常的预期行为。如果这给您带来了某种问题，那么您还没有解释它是什么。

没有理由将虚拟内存归还给操作系统，因为虚拟内存不是稀缺资源。没有理由将物理内存归还给操作系统，因为无论如何，如果它有更好的用途，操作系统就会使用它。

没有证据表明这是内存泄漏。测试结果表明，内存使用不会无限制地增加——在所有情况下，它最终都会趋于平稳。

# javascript - 我如何告诉 elRte 不要替换/弄乱我的 Tenjin 标签？

> ID：12990087
> 
> 赞同：0
> 
> 时间：2012-10-20T15:48:52.407
> 
> 标签：javascript, elrte

当我插入如下代码时：

```
<?rb some_enumerator.each do |item| ?>
#{ item.name }
<?rb end ?> 
```

它被替换为：

```
<!--?rb some_enumerator.each do |item| ?-->
#{ item.name }
<!--?rb end ?--> 
```

任何选择禁止这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:22:24.167

您需要`restore`在您的选择中自定义回调。

像这样的东西：

```
var opts = {
  restore : [function(html) {
    return html.replace(/<!--\?rb\s+([^>]+)\s+\?-->/gi, function(t, statement) {
      return "<?rb " + statement + " ?>";
    });
  }]
}

$('your-selector').elrte(opts); 
```

elRte 仍将替换您的标签，但您将通过`retore`回调修复它们。

# c - 无法循环工作

> ID：12990089
> 
> 赞同：1
> 
> 时间：2012-10-20T15:49:11.287
> 
> 标签：c

```
void main(){
    char tech[30][30],fname[50];
    int tn,i=0;
    FILE *fp;

    printf("File name\n");
    gets(fname);

    printf("No of lines\n");
    scanf("%d",&tn);

    for(i=0;i<tn;i++){ //gets here will not take anything for the first line
        printf("%d",i+1);
        gets(tech[i]);
    }

    fp=fopen(strcat(fname,".txt"),"w");

    for(i=0;i<tn;i++)
        fprintf(fp,"%s\n",tech[i]);
    fclose(fp);
} 
```

在`for`循环中（在程序中提到）`gets()`不接受第一行的任何字符，它直接要求第二行输入。为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:53:58.630

你必须`stdin`在你的之后清理`scanf`，因为`scanf`没有消耗换行符。

```
#include <stdio.h>

/* Consume characters remaining in the input stream. */
void clean_stdin(void) 
{
    int c;
    while ((c = getchar()) != '\n' && c != EOF)
        ;
}

int main(void)
{
    int tn;

    /* ... */

    scanf("%d", &tn);
    clean_stdin();

    /* ... */

    return 0;
} 
```

你也应该避免`gets`，它是贬值的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-11T07:46:54.090

您可以在 gets() 函数之前使用另一个 scanf() 函数，例如，

#include<stdio.h>

#include<stdio.h>

#include<字符串.h>

主函数（）

{

整数 t,x,i;

字符 [101];

scanf("%d",&t);

for(i=0;i<t;i++)

{

scanf("%d",x); // 您可以使用不带与号 (&) 运算符的 scanf()。

printf("请输入你的字符串：");

获取（str）；

printf("\n 你的字符串是：");

放（str）；

printf("\n");

返回0；

}

# php - 蛋糕PHP。登录在部署服务器上不起作用

> ID：12990092
> 
> 赞同：0
> 
> 时间：2012-10-20T15:49:43.920
> 
> 标签：php, cakephp, login

我的系统在我的本地服务器上运行良好，它完美地执行了登录。问题是当我将它上传到我的主机时，我不断收到错误的密码消息，好像无法创建 sessio，我不知道为什么。我的 tmp 是可写的，我用 sql_dump 检查了查询中的用户名和密码，它们没问题，密码正确散列。

我确实更改了 cake 的配置以使用 tmp 文件夹来存储会话。我虽然也许这会是问题，但是noup。它仍然无法正常工作。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:27:20.133

听起来数据库连接设置对于实时环境不正确。

打开`app/config/database.php`并检查`class DATABASE_CONFIG`

每个环境都应该有一个数据库配置数组。此外，该类上方代码中的注释值得一读。

# javascript - 为什么这个“无效的调用对象”错误？

> ID：12990093
> 
> 赞同：17
> 
> 时间：2012-10-20T15:49:55.383
> 
> 标签：javascript

我编写了以下 JS 并在 IE 10 中运行：

```
function test() {
    var nodes = document.getElementsByTagName("h1");
    document.writeln(nodes.length);
    for (var j = 0; j < nodes.length; j++) {   <=== THIS LINE!
        document.writeln(j.toString());
        }
    document.writeln("abc");
} 
```

但是我一直收到标记行的“无效调用对象”错误。

为什么？

这是我的页面来源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
    <head>
        <title>This is JS fun!</title>
        <script type="text/javascript" language="javascript" src="test.js">
        </script>
    </head>
    <body>
        <h1>1111</h1>   
        <h1>2222</h1>   
        <h1>3333</h1>   
        <h1>4444</h1>   
            <input type="button" onclick="test()" value="click me!" />
    </body>
</html> 
```

下面是我的截图：

![在此处输入图像描述](../Images/7beeecd54bbbb8e3c7ad16ecc0d2f43b.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T16:13:38.190

出现错误是因为您在页面完成后运行代码。

第一次`document.writeln`调用创建一个新文档，其中仅包含字符串。这意味着集合`nodes`不再有效。它是文档中不再存在的元素的集合，因此您不能再使用`length`该集合的任何属性（如 ）。

如果您在创建页面时运行代码，它可以正常工作：http: [//jsfiddle.net/Guffa/4w949/](http://jsfiddle.net/Guffa/4w949/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T03:52:48.540

好吧，我可能已经想通了。

我试过这个：

```
function test() {
    var nodes = document.getElementsByTagName("h1");
    document.writeln(nodes.length); // 1st writeln
    nodes2 = document.getElementsByTagName("h1");
    alert(nodes2.length);  //  <========= MARK1
    for (var j = 0; j < nodes2.length; j++) {
        alert(j);
            }
    document.writeln("abc");
} 
```

以上代码没有错误。但是**MARK1**行给出了 0。因为在第**一次 writeln**之后，重新构建了完整的页面内容，**所以新构建的页面中不再有 <h1> 标记**。

然后我把上面的代码改成这样：

```
 function test() {
    var nodes = document.getElementsByTagName("h1");
    document.writeln(nodes.length + "<h1>new h1</h1>");   // ADD a new < h1 > tag
    nodes2 = document.getElementsByTagName("h1");
    alert("node2 length = " + nodes2.length);   //MARKED
    for (var j = 0; j < nodes2.length; j++) {
        alert(j);
            }
    document.writeln("abc");
} 
```

现在**MARKED**行给了我预期的长度，1。因为我在新构建的文档中添加了一个新的 < h1 > 标签。

至于**Invalid Calling Object**错误。我认为因为文档是用 writeln 重新构造的，所以之前用旧的无效文档对象获得的所有 DOM 对象也将无效。

**关键是通过 document.writeln 方法隐式创建一个新文档。**

如果我错了，请纠正我。

**感谢古法的洞察力。**

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-10-20T16:02:22.110

`j`是一个变量计数器，而不是对象。

你需要`nodes.item(j).toString();`

# php - PHP Stream Wrapper 元数据

> ID：12990098
> 
> 赞同：3
> 
> 时间：2012-10-20T15:50:38.120
> 
> 标签：php, stream, stream-wrapper

`Hello, world!`

我需要能够将信息从自定义流包装器传递到使用它的代码，但我一直遇到一些麻烦。最好的选择似乎是使用`stream_get_meta_data()`，但我无法在[文档](http://www.php.net/manual/en/class.streamwrapper.php)中找到允许我设置包装器特定`wrapper_data`数据的方法。

解决这个问题的最佳方法是什么？

# ios - 为 calayer 绘图添加委托使应用程序崩溃

> ID：12990103
> 
> 赞同：1
> 
> 时间：2012-10-20T15:51:20.560
> 
> 标签：ios, crash, calayer

我在一个名为 PieChartView.m 的文件中编写了以下代码：

```
#pragma mark DrawingDelegate
@interface DrawingDelegate : NSObject
@end

@implementation DrawingDelegate

- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx {
    //nothing here yet...
}

#pragma mark PieChartView
@implementation PieChartView

@synthesize pie_layer;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
            float pie_layer_width = 300.f;
            float pie_layer_height = 160.f;
            float pie_layer_PosX = 7.f;
            float pie_layer_PosY = 20.f;

            DrawingDelegate* layerDelegate = [[DrawingDelegate alloc] init];

            pie_layer = [[CALayer alloc] init];

            //when commenting the following assignment the app no longer crashes
            pie_layer.delegate = layerDelegate;
            pie_layer.bounds = CGRectMake( 0.f, 0.f, pie_layer_width, pie_layer_height );
            pie_layer.backgroundColor = [[UIColor whiteColor] CGColor];
            pie_layer.position = CGPointMake( pie_layer_width/2+pie_layer_PosX, pie_layer_height/2+pie_layer_PosY );
            pie_layer.cornerRadius = 10.f;
            CGFloat components[4] = { 0.0, 0.0, 0.0, 1.0 };

            CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
            CGColorRef black = CGColorCreate( colorspace, components );
            pie_layer.borderColor = black;
            pie_layer.borderWidth = 1.f;
            pie_layer.shadowRadius = 5.f;
            pie_layer.shadowColor = black;

            CGColorRelease( black );
            CGColorSpaceRelease(colorspace);

            pie_layer.shadowOffset = CGSizeMake( 0.f, 5.f ),
            pie_layer.shadowOpacity = 0.75f;
            [self.layer insertSublayer:pie_layer above:self.layer];
            [pie_layer setNeedsDisplay];
        }
        return self;
} 
```

奇怪的是，只要我执行“pie_layer.delegate = layerDelegate;”行，应用程序就会崩溃。崩溃看起来像给定的屏幕截图。

![在此处输入图像描述](../Images/50eb647ca7b4636f41269dbc9bdf333c.png)

为什么会这样？我的代码有什么问题？

这是另一个更详细的堆栈跟踪： ![在此处输入图像描述](../Images/5192edfbf92729d97822ac24f2123403.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:26:51.333

如果这是`ARC`并且委托是，`weak`那么绘图委托将被释放，因为没有任何东西拥有它。

按照惯例，委托很弱，但需要保留`strong`对您创建的 DrawingDelegate 对象的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:55:42.700

这让我在一天的大部分时间里都在追逐崩溃。Warren Burton 的答案与我找到的答案相同，我通过将辅助类 alloc/init 分配给一个强属性来解决它，因此它可以作为委托使用。

否则，弱 mylayer.delegate 引用不足以阻止它被释放。

这个崩溃也不明显，在 window.makeKeyAndVisible 的深处。

# mercurial - Mercurial - 获取最近变更集中已更改的文件列表

> ID：12990105
> 
> 赞同：4
> 
> 时间：2012-10-20T15:51:30.573
> 
> 标签：mercurial, command

我知道`hg export tip`包含上述信息。但是输出包含的信息比我需要的多。有没有办法只获取文件名而不解析输出`hg export tip`？也许其他一些善变的命令？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T16:22:44.117

你想要`status`，像这样使用它：

```
hg stat --change tip 
```

这将列出在变更集中更改的每个文件的文件名，`tip`并用前面`M`的标记表示已修改、`R`已删除或`A`已添加。

您可以`tip`用标签或修订号替换。

更多信息请访问`hg help status`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T20:09:08.903

您也可以使用模板来做到这一点。有关`hg help templating`更多信息，请参阅。

要获取仅在修订中更改的文件的列表：

```
hg log -r [rev] --template "{file_mods}\n" 
```

在您的情况下，替换`[rev]`为`tip`. 使用模板有时比`status`您需要批处理信息（例如来自脚本）并且不想要任何其他无关输出时更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T17:24:21.067

你可以尝试这样的事情：

```
$ hg diff | grep "^--- " 
```

或者，

```
$ hg diff -r 6755 | grep "^--- " 
```

它将向您显示`hg diff`所有差异，然后`grep`将清除除更改文件名称的行之外的所有内容。是的，它看起来确实有点杂乱无章，......所以不要告诉任何人我告诉过你这件事。

# php - 目录中托管的站点的 mod_rewrite 规则

> ID：12990111
> 
> 赞同：0
> 
> 时间：2012-10-20T15:52:08.917
> 
> 标签：php, .htaccess, mod-rewrite

我有一个要在目录中构建的站点，而不是在我的网络服务器的根目录中。

```
I would like  http://localhost/mysite/index.php?view=home

to rewrite to http://localhost/mysite/home 
```

我无法让它工作

在 .htaccess 中尝试这个

```
RewriteEngine On
RewriteBase /mysite/
RewriteRule ^([^/]*)$ index.php?view=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:39:25.417

我知道了！

```
RewriteEngine On
RewriteRule ^([A-Za-z0-9-]+)/?$ index.php?view=$1 [L] 
```

非常感谢[http://www.cheatography.com/davechild/cheat-sheets/mod-rewrite/](http://www.cheatography.com/davechild/cheat-sheets/mod-rewrite/)

# python - 如何在python中删除文件夹？rmtree onerror

> ID：12990112
> 
> 赞同：4
> 
> 时间：2012-10-20T15:52:18.583
> 
> 标签：python, windows, file, onerror

我最近遇到了这个麻烦：我需要一个在 Windows 中删除整个文件夹的功能，所以我进行了搜索，这就是我得到的：

[如何使用 Python 删除/删除不为空的文件夹？](https://stackoverflow.com/questions/303200/how-do-i-remove-delete-a-folder-that-is-not-) 空的蟒蛇

答案，看起来不错，对我来说似乎有点混乱和大......应该有一个更好的方法来解决 oneerror 同时使用 shutil.rmtree 访问 Windows 中的文件（引发错误尝试访问只读文件）.. .

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T15:52:18.583

我想分享一个对我有用的简单方法。

我刚刚做了一个函数来改变文件的写权限模式，然后删除它`os.remove`：

```
import stat # needed for file stat

# arguments: the function that failed, the path 
# it failed on, and the error that occurred.
def redo_with_write(redo_func, path, err):
    os.chmod(path, stat.S_IWRITE)
    redo_func(path) 
```

然后在使用时`rmtree`，将其添加到`onerror`参数中：

```
import shutil
shutil.rmtree(desiredpath, onerror = redo_with_write) 
```

希望它对我遇到同样麻烦的人有所帮助。

# c - C语言结构中的字符串

> ID：12990121
> 
> 赞同：1
> 
> 时间：2012-10-20T15:53:08.770
> 
> 标签：c, string, pointers, struct

> **可能重复：**
> [C 中的 char s[] 和 char *s 有什么区别？](https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c)
> [char *str = “…” 和 char str[N] = “…” 的区别？](https://stackoverflow.com/questions/12121759/difference-between-char-str-and-char-strn)

我有一个结构定义为：

```
typedef struct
{
  bool                  configured;
  bool                  active;
  uint32                lastComms;
  uint32                rxChRvdTime;
  char                  *name;
}vehicle; 
```

我将其初始化如下：

```
static vehicle *myVehicle; 
```

当我想初始化名称时，我使用：

```
myVehicle->name = "helloworld"; 
```

这很好用。但是当我不想将它设置为字符串文字以外的东西时，我似乎遇到了问题。

```
char *tmpName = "foobar";
strcpy(myVehicle->name, tmpName); 
```

那么为什么 strcpy 不起作用呢？我是否需要事先在结构中预先分配字符串大小？我不应该在“名称”字段中使用指针吗，因为只能有一辆车？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T15:54:39.050

您需要分配内存以复制到：

```
 myVehicle->name = malloc(strlen(tmpName) + 1);
 if (myVehicle->name)
 {
     strcpy(myVehicle->name, tmpName);
 } 
```

就像`myVehicle->name`未初始化的`char*`. 如果`malloc()`你需要`free()`。对字符串文字的分配有效，因为您`name`指向字符串文字的地址，该地址在程序的生命周期中存在。

但在此之前，您需要为`myVehicle`自己分配内存：

```
myVehicle = malloc(sizeof(*myVehicle)); 
```

或者只是制作`myVehicle`一个对象而不是一个指针：

```
static vehicle myVehicle; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T15:54:44.650

你要

```
 myVehicle->name = strdup("foobar"); 
```

但以后不要忘记`free`。

实际上，您通常不会使用`strdup`常量文字字符串（但是如果以后可以覆盖该字符串，则需要这样做，因为常量文字字符串通常保留在只读段中，并且写入它们是未定义的行为。）。您可能会在某个缓冲区和`strdup`该缓冲区中构建一个字符串。一个更现实的例子可能是：

```
 char buf[32];
 static int counter;
 counter++;
 snprintf(buf, sizeof(buf), "#%d", counter);
 myVehicle->name = strdup(buf); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T15:54:45.413

您只声明了一个指针，而不是它指向的实际内存。尝试：

```
char *tmpName = "foobar";
myVehicle->name = malloc(strlen(tmpName) + 1);
if (myVehicle->name)
    strcpy(myVehicle->name, tmpName);
else
{
    // error
} 
```

完成后不要忘记释放`myVehicle->name`它。

# ruby - 从子外壳推送到数组

> ID：12990123
> 
> 赞同：0
> 
> 时间：2012-10-20T15:53:17.573
> 
> 标签：ruby

我正在尝试从子外壳填充数组。这可能吗？

```
array = []
processes = []
limit = 10

File.foreach("/path/to/file") do |line|
  if processes.size == limit
    processes.delete Process.wait
  end

  processes << fork do
    begin
      something = so_something
      if something == something
        array.push(line)
      end
    end
  end
end
Process.waitall 
```

如果我这样做，则数组在 Process.waitall 之后显示为空。我想稍后引用该数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T15:57:12.453

当你 fork 一个进程时，它的内存被复制并且现在完全独立于父进程。如果您想将一些数据传递回父级，则使用一些 IPC（进程间通信）机制（管道、套接字等）

也许，您不想分叉，而是想创建一个线程？线程可以更新共享状态（这正是编写多线程程序困难的原因）。

# objective-c - IOS 保留在后端做什么

> ID：12990128
> 
> 赞同：0
> 
> 时间：2012-10-20T15:54:11.310
> 
> 标签：objective-c, ios, copy, retain, retaincount

考虑我正在分配一个对象。请看下图

![在此处输入图像描述](../Images/c7c07c982cf6d3e222ba867a6e4605b3.png)

在上图中，*myObject 是一个指针。它指的是分配给该对象的空间。当我们保留对象时，我想知道它在后端做了什么。我也想知道我们为什么要这样做。

此外，当我们发布它时，它在后端是如何工作的。

我也想知道当我们复制一个对象时后端会发生什么。

如果我的问题如此基本，我真的很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:27:28.447

保留在幕后的实际作用是：

1.  在 objc 运行时中获取全局锁
2.  根据指向被保留对象的指针查找哈希表条目
3.  在该条目中增加一个计数器
4.  释放锁

我不认为这在实践中会有那么大的帮助，但我认为这就是你所要求的。

# maven - 是否有指向 eclipse.jdt.core jar 的直接链接？

> ID：12990139
> 
> 赞同：6
> 
> 时间：2012-10-20T15:54:47.480
> 
> 标签：maven, sbt, eclipse-jdt

我注意到许多项目将 org.jdt.core jar 放在[lib 文件夹](https://github.com/branaway/japid42/tree/master/lib)中，因为它在 maven 存储库中不可用。我正在使用的构建工具 sbt 可以直接从 URL 中提取依赖项。但是，我在 Eclipse 下载页面上找不到任何指向该 jar 的直接链接。我可以找到的关闭是整个[jdt zip](http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops4/R-4.2.1-201209141800/org.eclipse.jdt-4.2.1.zip)的链接，其中包括许多 jar 文件。我不相信 sbt 可以从 zip 依赖项中提取 jar。是否有直接链接或其他解决方法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-20T18:11:03.403

取决于您想要的版本是否已经在存储库中。

**对于 org.eclipse.jdt.core：**

tycho 项目似乎将某些版本部署`org.eclipse.jdt.core`到中央。看：

```
http://central.maven.org/maven2/org/eclipse/tycho/org.eclipse.jdt.core/ 
```

我发现使用[search.maven.org](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22org.eclipse.jdt.core%22)。其中之一可能足以满足您的需求。但他们似乎没有“官方”二进制文件，只是重建它们。

（请注意，还有一个[maven.eclipse.org](http://maven.eclipse.org/nexus/index.html#welcome)，它可能对某些工件有用。但如果似乎没有任何东西适合您的特定问题。）

**对于一般情况：**

通常，尽管您无法在 Maven 存储库中找到所有 Eclipse 工件。因此，如果您在 maven 存储库中找不到所需的内容，则需要自己在 Eclipse p2 存储库中找到它。假设您想要`org.eclipse.jdt.core`Eclipse 3.8.1…</p>

[Eclipse 项目更新站点](http://wiki.eclipse.org/Eclipse_Project_Update_Sites)wiki 页面说 3.8.x的更新站点是

```
http://download.eclipse.org/eclipse/updates/3.8 
```

这实际上是 3.8、3.8.1 的“复合”p2 存储库……所以接下来我们需要弄清楚 3.8.1 存储库的名称。以下获取包含 的 jar 文件`compositeArtifacts.xml`，其中列出了子存储库和 greps `3.8.1`：

```
curl -s http://download.eclipse.org/eclipse/updates/3.8/compositeArtifacts.jar | \
  gunzip -c | \
  grep '3\.8\.1' 
```

结果？

```
<child location='R-3.8.1-201209141540'/> 
```

该位置是相对路径。它告诉我们 3.8.1 存储库位于

```
http://download.eclipse.org/eclipse/updates/3.8/R-3.8.1-201209141540/ 
```

现在获取该存储库的工件索引。同样，jar 中的单个 XML 文件。但这一次，它不是一个复合存储库，所以我们只要求`artifacts.jar`：

```
curl -s http://download.eclipse.org/eclipse/updates/3.8/R-3.8.1-201209141540/artifacts.jar | \
  gunzip -c | \
  grep org.eclipse.jdt.core[\'\"] | \
  sort -u 
```

结果：

```
<artifact classifier='osgi.bundle' id='org.eclipse.jdt.core' version='3.8.2.v20120814-155456'> 
```

（我不确定为什么`org.eclipse.jdt.core`在 3.8.1 中有一个以 3.8.2 开头的版本，但就是这样。让我们继续……）

`<mappings>`所以现在我们可以根据刚刚获取的 artifacts.xml 中的元素来拼接 URL 。将“plugins/”添加到存储库路径；将版本添加到插件名称中，然后我们可以获取它：

```
curl -Os http://download.eclipse.org/eclipse/updates/3.8/R-3.8.1-201209141540/plugins/org.eclipse.jdt.core_3.8.2.v20120814-155456.jar 
```

如果您发现自己需要的不仅仅是一两个 jar，您可能会考虑使用[Tycho](http://eclipse.org/tycho/)或[Eclipse p2 Ant 任务](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fp2_repositorytasks.htm&cp=2_0_20_3_3)在运行 sbt 构建之前将所需的工件解析到 lib 文件夹中。

# php - 如何从数组中提取值进行打印

> ID：12990140
> 
> 赞同：0
> 
> 时间：2012-10-20T15:54:49.227
> 
> 标签：php, arrays, printing

我是 php 新手，并试图完成一些必须很容易的事情，但无论出于何种原因，我都无法通过搜索找到答案。

基本上我有一个包含一些项目的数组。我想将它们打印在列表中，但我不想要数组箭头。

示例：使用`print_r($_SESSION[species]);` 给出：

```
Array ( [0] => value1 [1] => value2 [2] => value3 [3] => value4 [4] => ) 
```

但我只想：

```
value1
value2
value3
value4 
```

我怎样才能做到这一点？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:06:20.760

你可以内爆数组

```
$impl=implode("\n",$_SESSION[species]);
echo $impl 
```

会给你

```
value1
value2
value3 
```

这只会在 HTML 源代码中插入换行符。如果你想要 html 换行符，请使用

```
implode("<br />",$tmp); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T16:10:33.950

...或者你可以比上面的例子更简单，然后做一个 foreach

```
<?php

foreach($_SESSION['species'] as $value)
{
  echo $value."<br />";
}

?> 
```

# stl - 获取 STL 向量中大于某个值的元素的所有位置

> ID：12990148
> 
> 赞同：10
> 
> 时间：2012-10-20T15:56:38.097
> 
> 标签：stl, vector, std, c++

我想知道如何找到验证某个条件（例如大于）的元素的索引位置。例如，如果我有一个 int 值向量

```
vector<int> V; 
```

V 包含值`3 2 5 8 2 1 10 4 7`

我想获取大于 5 的元素的所有**索引位置**`std::find_if`。我知道，但根据文档，它只是找到满足条件的第一个元素。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-20T16:08:18.377

循环`std::find_if`，从上次停止的地方开始。

示例（[看到它的工作](http://liveworkspace.org/code/cab9da03219819a00c4dc97bfe49c4d6)）：

```
std::vector<size_t> results;

auto it = std::find_if(std::begin(v), std::end(v), [](int i){return i > 5;});
while (it != std::end(v)) {
   results.emplace_back(std::distance(std::begin(v), it));
   it = std::find_if(std::next(it), std::end(v), [](int i){return i > 5;});
} 
```

首先，我们使用第一个结果设置迭代器。如果没有找到，while 循环永远不会执行。否则，存储索引位置（`std::distance`基本上是更通用的`it - std::begin(v)`），然后继续搜索。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-20T16:44:39.503

我想我会使用`std::copy_if`：

```
std::vector<int> x{3, 2, 5, 8, 2, 1, 10, 4, 7};
std::vector<size_t> y(x.size());

std::iota(y.begin(), y.end(), 0);
std::copy_if(y.begin(), y.end(), 
             std::ostream_iterator<size_t>(std::cout, " "), 
             [&](size_t i) { return x[i] > 5; }); 
```

对我来说，这给出`3 6 8`了 8、10 和 7 in 的索引`x`——这正是我们想要的。

如果您坚持使用 C++98/03 编译器/库，您将`std::remove_copy_if`改为使用（并颠倒比较的意义）。在这种情况下，您显然也无法使用 lambda 进行比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T18:29:00.573

只是为了好玩，`transform_if`算法：

```
#include <vector>
#include <iterator>
#include <algorithm>
#include <iostream>

template<typename InputIterator, typename OutputIterator,
    typename UnaryPredicate, typename UnaryFunction>
OutputIterator
transform_if (InputIterator first, InputIterator last,
    OutputIterator result, UnaryPredicate pred,
    UnaryFunction func)
{
    for (; first != last; ++first, ++result)
        if (pred(*first))
            *result = func(*first);
    return result;
}

int main()
{
    std::vector<int> x {3, 2, 5, 8, 2, 1, 10, 4, 7};
    std::vector<size_t> indices;

    size_t index = 0;
    transform_if(x.begin(), x.end(), std::back_inserter(indices),
        [&](int i){ return ++index, i > 5; },
        [&](int){ return index-1; });

    std::copy(indices.begin(), indices.end(),
              std::ostream_iterator<size_t>(std::cout, " "));
} 
```

输出：`3 6 8`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-09T09:46:16.387

在 C++20 中，你可能会这样做

```
std::ranges::iota_view{0, (int)v.size()}
    | std::ranges::views::filter([&v](int i){ return v[i] > 5; }) 
```

[演示](http://coliru.stacked-crooked.com/a/c2fc9b8c8c7c5476)

# php - Magento - 将地理位置与 Multi 集成 - 网站设置 - 绕过重定向

> ID：12990149
> 
> 赞同：1
> 
> 时间：2012-10-20T15:56:50.880
> 
> 标签：php, magento

我正在实施一个 magento 商店，该商店具有来自同一安装的两个网站设置。一个是针对印度观众的，另一个是针对国际观众的。现在，当用户键入我的域说 abcd.com 时，首先会返回一个地理定位脚本，该脚本会返回用户是否在印度（基于他的 IP）。之后，用户将根据他的 IP 地理位置被重定向到合适的网站。此外，如果需要，他可以使用顶部菜单在商店/网站之间切换。我的要求是两个网站都应该在同一个“.com”域上，并且具有相同的“base_url”。

目前，我在 abcd.com/india 配置了印度商店，在 abcd.com 配置了另一家国际商店。在文件夹 - /magento-root/india 中创建了另一组 .htaccess 和 index.php。在 magento 根目录中的原始 index.php 中，我调用了一些地理定位 api 调用，然后根据地理定位结果的结果设置 $mageRunCode 和 $mageRunType 值。

虽然这似乎有效，但我遇到了问题 - 当我手动输入一个 url 说“abcd.com/xyz/pqrs/”时，我会被重定向到主页。任何有关在同一基本 url 上管理多个网站的帮助都会有所帮助。

# ffmpeg - 如何使用 ffmpeg 将 flv 文件实时发布到 RTMP 服务器？

> ID：12990152
> 
> 赞同：8
> 
> 时间：2012-10-20T15:57:05.450
> 
> 标签：ffmpeg, red5, rtmp

我想做的是将`.flv`媒体文件发布到`RTMP`服务器以让订阅者观看。我正在测试以查看多个订阅者（的`oflaDemo`）和使用的流`ffplay`。

问题是 ffmpeg 在近 20 秒内将 5 分钟的 .flv 文件发布到服务器，在这 20 秒内，流出现在订阅中，但之后它会中断。我使用的命令是：

```
ffmpeg -i file.flv -re -acodec copy -vcodec copy -f flv "rtmp://localhost/oflaDemo/aaa live=1" 
```

我如何强制`ffmpeg`在 5 分钟内流式传输 5 分钟文件或任何其他解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-20T18:26:49.237

我**解决**了

`-re`应该是第一个参数：

```
ffmpeg -re -i file.flv -acodec copy -vcodec copy -f flv rtmp://localhost/oflaDemo/a3 
```

来自[ffmpeg 官方文档](http://ffmpeg.org/ffmpeg.html)

> 通用语法是：

```
ffmpeg [global options] [[infile options][‘-i’ infile]]... {[outfile options] outfile}... 
```

> -re **（输入）**
> 
> 以原生帧速率读取输入。主要用于模拟抓取设备。默认情况下，ffmpeg 尝试尽可能快地读取输入。此选项会将输入的读取速度减慢到输入的本机帧速率.....

文档说该`-re`选项是输入标志，这意味着它应该`infile options`直接在`-i`标志之前

# c# - 获取 IP 地址 C#、asp.net 的位置

> ID：12990155
> 
> 赞同：-1
> 
> 时间：2012-10-20T15:57:18.320
> 
> 标签：c#, asp.net, xml

我正在使用此代码根据 IP 地址检索用户位置。它不返回任何位置，国家代码......数据表中的所有列都是空白的，除了 IP ![在此处输入图像描述](../Images/e36f6e4b49915a2a353b8b7c0ca8dc72.png)

```
string i = "aa.b.23.58";
            DataTable dt = GetLocation(i.Trim());
     public DataTable GetLocation(string strIPAddress)
        {
            //Create a WebRequest with the current Ip
        WebRequest _objWebRequest =
            WebRequest.Create("http://freegeoip.appspot.com/xml/"  +strIPAddress);

        //Create a Web Proxy
        WebProxy _objWebProxy =
           new WebProxy("http://freegeoip.appspot.com/xml/"
                     + strIPAddress, true);

        //Assign the proxy to the WebRequest
        _objWebRequest.Proxy = _objWebProxy;

        //Set the timeout in Seconds for the WebRequest
        _objWebRequest.Timeout = 2000;

        try
        {
            //Get the WebResponse 
            WebResponse _objWebResponse = _objWebRequest.GetResponse();
            //Read the Response in a XMLTextReader
            XmlTextReader _objXmlTextReader
                = new XmlTextReader(_objWebResponse.GetResponseStream());

            //Create a new DataSet
            DataSet _objDataSet = new DataSet();
            //Read the Response into the DataSet
            _objDataSet.ReadXml(_objXmlTextReader);

            return _objDataSet.Tables[0];
        }
        catch
        {
            return null;
        }
    } // End of GetLocation 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:02:31.770

试试这个示例 [http://www.codeproject.com/Articles/3265/GeoIP-Where-are-your-internet-visitors-coming-from](http://www.codeproject.com/Articles/3265/GeoIP-Where-are-your-internet-visitors-coming-from)

可能你对 freegeoip.appspot.com 有一些问题

您可以将 ip 保留到项目中的位置 db。

# facebook - Facebook Graph API 允许的请求数

> ID：12990156
> 
> 赞同：0
> 
> 时间：2012-10-20T15:57:19.083
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在使用 facebook php-sdk 进行开发。

我不太确定 Facebook 允许多少请求。我在一些 stackoverflow 答案中读到它的 600 个请求持续 600 秒。但是，我认为我无法正确理解它。我们可以发出 600 个批处理请求，每个批处理请求最多允许 50 个，如 Facebook 文档中给出的那样，还是总共 600 个，即只允许 12 个批处理请求？但即使在任何情况下，我所面临的情况也不能满足事实。

我对这个批量请求的体验非常糟糕而且非常奇怪。我将向您简要介绍我对 Facebook Graph API 的实验所发生的一切。

场景 1：我对 50 个帖子使用了批处理请求，它给了我 28 个帖子的数据，但没有返回其他帖子的数据。

场景2：我分批发了20个帖子，第一批给了我完整的数据，但是下一批，它只给了其中13个的数据。

场景 3：我将批次保持在 20 个 url，但引入了 2 秒的睡眠定时器。它给了我前 40 个帖子的数据，但在第三批请求中，只获取了 5 个帖子的数据，但对于剩下的 15 个帖子，facebook 没有返回数据。（这只是否定了 600 秒和 600 个请求的回答。）

场景 4：我将批次保持在 20 个 url，但引入了一个 5 秒的睡眠定时器。这帮助我获得了所有数据。

当帖子数量增加到 1000 或更多时，问题就出在我身上，即使在每次请求后休眠 2 秒后，facebook 在一段时间后也不会返回任何数据。

我希望有人知道这个答案！

# ruby - 无法在 rake 迁移中为 PG 创建索引 - Rails

> ID：12990159
> 
> 赞同：3
> 
> 时间：2012-10-20T15:57:23.320
> 
> 标签：ruby, ruby-on-rails-3, rake

我正在尝试编写一个将创建一个表并添加几个索引的迁移。

这是迁移：

```
class CreatePages < ActiveRecord::Migration
  def change
    create_table :pages do |t|
        t.string "name", :limit => 50
        t.string "permalink"
        t.integer "position"
        t.boolean "visible"
        t.integer "subject_id"

        add_index("pages","subject_id")
        add_index("pages","name")

      t.timestamps
    end
  end
end 
```

当我尝试并运行此迁移时，出现以下错误：

> PG ::错误：错误：关系“页面”不存在：在“页面”（“subject_id”）上创建索引“index_pages_on_subject_id”

有人可以告诉我我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:21:19.280

您需要在块`add_index`外调用方法`create_table`，或`index`在块内调用。

第一种方法：

```
class CreatePages < ActiveRecord::Migration
  def change
    create_table :pages do |t|
        t.string "name", :limit => 50
        t.string "permalink"
        t.integer "position"
        t.boolean "visible"
        t.integer "subject_id"

      t.timestamps
    end

    add_index("pages","subject_id")
    add_index("pages","name")
  end
end 
```

第二种方法：

```
class CreatePages < ActiveRecord::Migration
  def change
    create_table :pages do |t|
        t.string "name", :limit => 50
        t.string "permalink"
        t.integer "position"
        t.boolean "visible"
        t.integer "subject_id"
        t.index("subject_id")
        t.index("name")

      t.timestamps
    end

  end
end 
```

就我个人而言，我会选择第二个，因为这更整洁。

# php - 如何检查 UPDATE mysqli 查询是否正确执行？

> ID：12990164
> 
> 赞同：10
> 
> 时间：2012-10-20T15:57:59.943
> 
> 标签：php, mysqli, sql-update, prepared-statement

这是我的情况：

```
$sql = 'UPDATE user SET password = ? WHERE username = ? AND password = ?';
if($stmt->prepare($sql)) {
    $stmt->bind_param('sss', $newPass, $_SESSION['username'], $oldPass);
    $stmt->execute();
} 
```

现在，如何查看 UPDATE 查询是否成功执行？更准确地说，如何查看旧密码和用户名是否正确，以便我可以存储新密码？我试过这样做：

```
$res = $stmt->execute();
echo 'Result: '.$res; 
```

但我总是得到：

```
Result: 1 
```

即使旧密码不正确。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-20T15:59:22.927

不更新任何行的查询不是错误条件。这只是一个没有改变任何东西的成功查询。要查看更新是否确实改变了任何内容，您必须使用[mysqli_affected_rows()](http://php.net/manual/en/mysqli.affected-rows.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T15:59:36.213

您需要使用`affected_rows`您正在使用的 MySQL 扩展的功能。如果查询因没有匹配的行而失败，这将返回 0，如果发生错误，则返回 -1，或者显示更改的行数的正数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-20T15:59:24.540

尝试使用`mysqli_affected_rows()`获取受影响的行数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-07T19:33:22.277

```
 mysqli_query($link, "UPDATE Language SET Status=1 WHERE Percentage > 50");
 printf("Affected rows (UPDATE): %d\n", mysqli_affected_rows($link)); 
```

试试看。

# php - PHP 不能使用已编译的 memcache.so 扩展

> ID：12990168
> 
> 赞同：2
> 
> 时间：2012-10-20T15:58:44.147
> 
> 标签：php, memcached

我在 Ubuntu 12.04 上从源代码编译了 PHP 5.4.8。PHP 驻留在自定义目录中。

我编译了 memcache-2.2.7，最后得到了一个 memcache.so 扩展。

我修改了我的`php.ini`并添加了：

```
extension=/jusr/php5/ext/memcache.so 
```

但是当我在 CLI 上运行测试脚本时出现错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/jusr/php5/ext/memcache.so' - /jusr/php5/ext/memcache.so: undefined symbol: executor_globals in Unknown on line 0 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:10:02.230

我其实已经想通了。大多数“指南”不会告诉您，您需要将 memcache 与 PHP 安装中的 php-config 文件链接起来。

```
cd /home/user/memcache-2.2.7
phpize --clean && phpize
./configure --with-php-config=/path/to/php/bin/php-config
make
make install 
```

这就是你如何将 memcache 与 PHP 链接起来。我无法在任何地方得到这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:14:03.667

（来自 bugs.php.net）

*您使用错误的 PHP 标头构建了库。请确保您系统中的 phpize 和 php-config 与您正在使用的 PHP 版本一起提供。*

[https://bugs.php.net/bug.php?id=57263](https://bugs.php.net/bug.php?id=57263)

# linux - 在 Linux 上保持持久性需要什么？

> ID：12990180
> 
> 赞同：9
> 
> 时间：2012-10-20T15:59:43.577
> 
> 标签：linux, posix, mmap, fsync, durability

我正在编写一些软件来处理非常关键的数据，并且需要知道我需要做什么才能实现持久性。

我到处都是矛盾的信息，所以我很感激任何见解。

我有三种方式写入磁盘。

*   使用 O_DIRECT | O_DSYNC，先读后写 512 字节 - 16 MB 块。

*   使用 O_DIRECT，先读取然后写入 512 字节块，并根据需要定期调用 fdatasync。

*   使用内存映射文件，我根据需要定期调用 msync(..., MS_SYNC | MS_INVALIDATE)。

这一切都在带有默认标志的 ext4 上。

对于所有这些，数据是否可能丢失（在写入或同步返回后）或因电源故障、恐慌、崩溃或其他任何原因而损坏？

如果我的服务器在 pwrite 中间死机，或者在 pwrite 开始和 fdatasync 结束之间，或者在被更改的映射内存和 msync 之间，我会有新旧数据的混合，或者它会是一个还是其他？我希望我的个人 pwrite 调用是原子的和有序的。是这样吗？如果它们跨越多个文件，情况是否如此？所以如果我用 O_DIRECT | 写 O_DSYNC 到 A，然后是 O_DIRECT | O_DSYNC 到 B，我是否保证，无论发生什么，如果数据在 B 中，它也在 A 中？

fsync 是否甚至可以保证数据已写入？[这](http://lwn.net/Articles/270891/)说没有，但我不知道从那以后情况是否发生了变化。

ext4 的日志记录是否完​​全解决了[这个 SO 答案](https://stackoverflow.com/a/9706180/750875)所说的存在损坏块的问题？

我目前正在通过调用 posix_fallocate 然后 ftruncate 来增长文件。这两者都是必要的吗，它们是否足够？我认为 ftruncate 实际上会初始化分配的块以避免[这些问题](https://ext4.wiki.kernel.org/index.php/Clarifying_Direct_IO%27s_Semantics#Writes_into_preallocated_space)。

为了增加混乱，我在 EC2 上运行它，我不知道这是否会影响任何东西。尽管它使测试变得非常困难，因为我无法控制它被关闭的积极程度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-09-05T05:21:33.477

（2018 年，这个问题首次提出多年后）

> 在 Linux 上保持持久性需要什么？

通过阅读您的问题，我看到您和磁盘之间有一个文件系统。于是问题就变成了：

> 使用 Linux 文件系统的持久性需要什么？

您能做的最好的事情（在一般文件系统和未指定的硬件情况下）是“ **fsync dance** ”，它是这样的：

> ```
> preallocate_file(tmp);fsync(tmp);fsync(dir);rename(tmp, normal);fsync(normal);fsync(dir); 
> ```

[（从LWN 上留下的评论 Andres Freund（Postgres 开发人员）中](https://lwn.net/Articles/667863/)无耻地窃取），您**必须在继续之前检查每个调用的返回码，**看看它是否成功，如果任何返回码返回非零，则假设出现问题。如果您正在使用`mmap`then`msync(MS_SYNC)`相当于`fsync`.

Dan Luu的[“Files are hard”](http://danluu.com/file-consistency/)（其中有一个关于覆盖各种文件系统的原子性的好表）、[LWN 文章“确保数据到达磁盘”](https://lwn.net/Articles/457667/)和[Ted Ts'o 的“不要害怕同步！”](https://thunk.org/tytso/blog/2009/03/15/dont-fear-the-fsync/) .

> 对于所有这些 [ `O_DIRECT`| `O_DSYNC`, `O_DIRECT`+ `fdatasync`, `mmap`+ `msync`]，数据是否可能丢失（在写入或同步返回后）或因电源故障、恐慌、崩溃或其他任何原因而损坏？

是的，您可能没有注意到损坏，因为[由于文件增长超过其当前范围而导致的“分配写入”可能会导致元数据操作](https://ext4.wiki.kernel.org/index.php/Clarifying_Direct_IO%27s_Semantics#Allocating_writes)，并且您没有检查元数据的持久性（仅数据持久性）。

> 如果我的服务器在 pwrite 中间死机，或者在 pwrite 开始和 fdatasync 结束之间，或者在被更改的映射内存和 msync 之间，我将混合新旧数据，[等]

由于在中断覆盖的情况下数据的状态是未定义的， **它可能是任何东西**......

> 我希望我的个人 pwrite 调用是原子的和有序的。是这样吗？

之间`fsync`的重新排序可能会发生（例如，如果`O_DIRECT`默默地退回到缓冲）。

> 如果它们跨越多个文件？

你的麻烦就更大了。要涵盖这一点，您需要编写自己的日志并可能使用文件重命名。

> 如果我用 O_DIRECT | 写 O_DSYNC 到 A，然后是 O_DIRECT | O_DSYNC 到 B，

不。

> fsync 是否甚至可以保证数据已写入？

~~是~~有必要（如果不充分）确定上述内容（使用现代 Linux 和假设没有错误的真实磁盘堆栈）。

> ext4的journalling是否彻底解决了损坏块的问题

不。

（ETOOMANYQUESTIONS）

是的，Linux 软件堆栈可能有问题（2019 年：请参阅下面的附录）或硬件可能有问题（或以无法备份的方式存在），但这并不能阻止上述内容是您可以做的最好的事情，如果在 POSIX 文件系统上，一切都符合其讨价还价的要求。如果您知道您有一个具有特定文件系统（或没有文件系统）和特定硬件设置的特定操作系统，那么您确实可以减少对上述某些内容的需求，但通常您不应跳过任何步骤。

奖励答案：`O_DIRECT`单独使用文件系统时不能保证持久性（最初的问题是“你怎么知道元数据已经被持久化了？”）。有关这一点的讨论，请参阅[Ext4 wiki 中的“Clarifying Direct IO's Semantics” 。](https://ext4.wiki.kernel.org/index.php/Clarifying_Direct_IO%27s_Semantics)

## 附录（2019 年 3 月）

即使使用当前（在编写 5.0 时）Linux 内核`fsync`也并不总是能看到错误通知，而且 4.16 之前的内核甚至更糟。PostgreSQL 人员发现错误通知可能会丢失，并且未写入的页面标记为干净导致`fsync`返回成功的情况，即使在异步写回数据时存在（吞咽的）错误（大多数 Linux 文件系统不能可靠地保留脏数据）一旦失败如此反复地“重试”失败`fsync`并不一定表明您可能期望什么）。请参阅[PostgreSQL Fsync 错误 wiki 页面](https://wiki.postgresql.org/wiki/Fsync_Errors)LWN PostgreSQL的[fsync() 惊喜](https://lwn.net/Articles/752063/)文章和谈话[PostgreSQL 怎么可能错误地使用 fsync 了 20 年，我们](https://fosdem.org/2019/schedule/event/postgresql_fsync/)将从 FOSDEM 2019 开始详细说明。

所以学分后的结论很复杂：

*   舞蹈是必要的`fsync`（即使它并不总是足够的）至少涵盖非错误的 I/O 堆栈案例
*   如果您通过直接 I/O 进行（写入）I/O，那么当写入出错时，您将能够得到准确的错误
*   早期（早于 4.16）内核在通过以下方式获取错误时存在错误`fsync`

## 另见：

*   [编写程序以处理导致 Linux 上丢失写入的 I/O 错误](https://stackoverflow.com/questions/42434872/writing-programs-to-cope-with-i-o-errors-causing-lost-writes-on-linux)
*   [https://github.com/commercialhaskell/rio/issues/87](https://github.com/commercialhaskell/rio/issues/87)中的解释和链接

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T02:03:59.293

> 对于所有这些，数据是否可能丢失（在写入或同步返回后）或因电源故障、恐慌、崩溃或其他任何原因而损坏？

绝对地。

> fsync 是否甚至可以保证数据已写入？这说没有，但我不知道从那以后情况是否发生了变化。

不。答案取决于设备，并且可能取决于文件系统。不幸的是，该文件系统可能是“实际”存储设备之上的一层又一层。（例如`md`, `lvm`, `fuse`, `loop`,`ib_srp`等）。

> 尽管它使测试变得非常困难，因为我无法控制它被关闭的积极程度。

确实如此。但是您可能仍然可以使用 NMI 或`sysrq-trigger`创建一个非常突然的停止。

# java - 如何通过 JavaMail 从 Yahoo 服务器发送电子邮件？

> ID：12990183
> 
> 赞同：2
> 
> 时间：2012-10-20T15:59:54.013
> 
> 标签：java, email, smtp, jakarta-mail, yahoo

我一直在寻找一个更新到最新版本 JavaMail 的站点，但是每当我尝试时，我都会收到这个烦人的错误（启用调试）
帮助？

```
DEBUG: setDebug: JavaMail version 1.4.5
DEBUG: getProvider() returning javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun Microsystems, Inc]
DEBUG POP3: mail.pop3.rsetbeforequit: false
DEBUG POP3: mail.pop3.disabletop: false
DEBUG POP3: mail.pop3.forgettopheaders: false
DEBUG POP3: mail.pop3.cachewriteto: false
DEBUG POP3: mail.pop3.filecache.enable: false
DEBUG POP3: mail.pop3.keepmessagecontent: false
DEBUG POP3: mail.pop3.starttls.enable: false
DEBUG POP3: mail.pop3.starttls.required: false
DEBUG POP3: mail.pop3.apop.enable: false
DEBUG POP3: mail.pop3.disablecapa: false
DEBUG POP3: connecting to host "pop.mail.yahoo.com", port 110, isSSL false
S: +OK hello from popgate-0.8.0.357900 pop001.mail.ir2.yahoo.com 
C: CAPA
S: +OK CAPA list follows
IMPLEMENTATION popgate-0.8.0.357900
XOIP
EXPIRE-NEVER
PIPELINING
RESP-CODES
TOP
UIDL
USER
SASL LOGIN PLAIN
STLS
.
DEBUG POP3: PIPELINING enabled
DEBUG POP3: authentication command trace suppressed
DEBUG POP3: authentication command failed
C: QUIT
S: +OK
javax.mail.AuthenticationFailedException: [AUTH] Access to this service is not permitted.
    at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:208)
    at javax.mail.Service.connect(Service.java:295)
    at javax.mail.Service.connect(Service.java:176)
    at dong.pong.ping.Client.main(Client.java:42) 
```

**代码：**

```
String smtpHost = "smtp.mail.yahoo.com";
        String popHost = "pop.mail.yahoo.com";
        String from = "classified@yahoo.com";
        String to = "classified@yahoo.com";
        String username = "classified";
        String password = "secret";

        // Get system properties
        Properties props = System.getProperties();

        // Setup mail server
        props.put("mail.smtp.host", smtpHost);
        props.put("mail.smtp.port", 587);

        // Get session
        Session session = Session.getDefaultInstance(props, null);
        session.setDebug(true);

        Store store = session.getStore("pop3");
        store.connect(popHost, username, password);

        // Define message
        MimeMessage message = new MimeMessage(session);
        message.setFrom(new InternetAddress(from));
        message.addRecipient(Message.RecipientType.TO, 
          new InternetAddress(to));
        message.setSubject("Hello JavaMail");
        message.setText("Welcome to Yahoo's JavaMail");

        // Send message
        Transport.send(message); 
```

如果你们中的任何人有一个工作代码，你能发布它吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:22:44.087

你有高级帐户吗？

> 还是雅虎的问题？
> 
> 移至适当的论坛，但某些版本的 yahoo（特别是 yahoo.com）不支持 POP3 访问邮件，除非您已注册高级帐户或拥有合作伙伴服务（如 AT&T/Yahoo）。当它说“不允许访问”时，这可能就是它的意思——你没有高级帐户。

[[AUTH] 不允许访问此服务](http://my.opera.com/community/forums/findpost.pl?id=11622772)

**编辑：另请参阅[Java Mail: Unable to send email via Yahoo](https://stackoverflow.com/questions/12533394/java-mail-unable-to-send-email-via-yahoo?rq=1)作为工作示例。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:10:30.513

根据我看到的各种网站，雅虎的 SMTP 端口是 465

*   [http://email.about.com/od/accessingyahoomail/f/Yahoo_Mail_SMTP_Settings.htm](http://email.about.com/od/accessingyahoomail/f/Yahoo_Mail_SMTP_Settings.htm)

* * *

实际上，现在我查看堆栈跟踪，看起来问题是在您尝试连接到 POP3 存储时发生的。如果您只是想*发送*电子邮件，我完全不知道您为什么需要连接到 POP3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:11:22.243

我检查了[这个页面](http://email.about.com/od/accessingyahoomail/f/Yahoo_Mail_SMTP_Settings.htm)，看来您的用户名必须是完整地址，所以您必须更改：

```
String username = "classified"; 
```

到：

```
String username = "classified@yahoo.com"; 
```

雅虎的 SMTP 是 465，使用 TLS/SSL。

```
 props.put("mail.smtp.port", 465); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-25T15:55:39.197

使用 Spring Framework Mail 服务试试这个。这个对我有用：

```
Properties props = new Properties();
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.starttls.enable", "true");

        JavaMailSenderImpl mailSender = new JavaMailSenderImpl();
        mailSender.setHost("smtp.mail.yahoo.com");
        mailSender.setPort(587);
        mailSender.setUsername("username1");
        mailSender.setPassword("password");
        mailSender.setJavaMailProperties(props);

        SimpleMailMessage message = new SimpleMailMessage();

        message.setFrom(email);
        message.setTo(email);
        message.setSubject(subject);
        message.setText(text);
        mailSender.send(message); 
```

# c# - 自动实现的属性

> ID：12990188
> 
> 赞同：1
> 
> 时间：2012-10-20T16:00:53.420
> 
> 标签：c#, asp.net, properties

objectdatasource 没有根据参数引用正确的构造函数

我有（缩小版）

```
 private int m_Code;
    private string m_FamCode;
    private string m_LastName;
    private string m_FirstName;
    private string m_Init;
    private DateTime chargeDate;
    private string tranCode;
    private decimal paidAmt;
    private string description; 
```

然后我有每个 get\set

```
public int M_Code
        {
            get { return m_Code; }
            set { m_Code = value; }
        } 
```

然后我有 3 个不同的构造函数，如下所示，但向每个构造函数传递不同数量的属性。

```
public BBNMemberDetails(DateTime cDate, string tCode, decimal pAmt, string desc)
        {
            this.chargeDate = cDate;
            this.tranCode = tCode;
            this.paidAmt = pAmt;
            this.description = desc;
        }

 public BBNMemberDetails(int m_Code, string m_FamCode, string m_LastName, string m_FirstName, string m_Init)
    {
        this.m_Code = m_Code;
        this.m_FamCode = m_FamCode;
        this.m_LastName = m_LastName;
        this.m_FirstName = m_FirstName;
        this.m_Init = m_Init;
        this.m_Title = m_Title; 
```

}

默认构造函数

```
 public BBNMemberDetails() { } 
```

出于某种原因，唯一被引用的构造函数是具有我所有属性的构造函数。我只想获取交易信息的构造函数没有被引用。我正在结合使用一个引用存储过程的 sqldatareader 的 List 来获取值，然后只是前端的 objectdatasource 将其附加到 gridview。但是我的 gridview 显示了所有属性，而不仅仅是我希望它在构造函数中显示的少数属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:04:52.653

当你调用一个构造函数时，你会得到一个完整的对象。

该对象没有被缩减，因为您调用了一个初始化较少成员的构造函数。

# c# - C#中的ActiveX常见对话框控件错误

> ID：12990189
> 
> 赞同：1
> 
> 时间：2012-10-20T16:00:54.933
> 
> 标签：c#, .net

我在 Arcobjects 的示例代码中遇到了一个奇怪的错误，但该错误似乎不是 arcobjects 的一部分

这是发生错误的代码部分：

```
 // Get the typeinfo for the ActiveX common dialog control
        typ = Type.GetTypeFromProgID("MSComDlg.CommonDialog");

        // Create an instance of the control.  We pass it to the property frame function
        // so the property pages have an object from which to get current settings and apply
        // new settings.
        obj = Activator.CreateInstance(typ); ///////the error occurs here 
        // This handy function calls IPersistStreamInit->New on COM objects to initialize them
        ActiveXMessageFormatter.InitStreamedObject(obj); 
```

当执行到达这一行时， `obj = Activator.CreateInstance(typ);`我收到此错误`COM EXCEPTION WAS UNHANDELED BY THE USER`

请提供任何帮助

# opencv - opencv捕获网络摄像机

> ID：12990190
> 
> 赞同：1
> 
> 时间：2012-10-20T16:00:56.167
> 
> 标签：opencv

如果我不知道我的摄像头型号，如何为 opencv 捕获我的网络摄像头帧？例如，我可以观看网络摄像头， `http://192.168.1.25`但我不能用来`CvCapture *capture = cvCreateFileCapture("rtsp://192.168.1.25");`在 opencv 中捕获我的摄像头

当我知道相机的型号时，我找到了一些使用方法。所以我必须知道我的相机型号？或者有什么方法可以在opencv中捕捉我的相机？

对不起，我的英语很差，但我需要知道如何在 opencv 中使用网络摄像机......谢谢！

# jquery - 使用 scrollTop() 向下滚动时更改 DIV 位置；- jQuery

> ID：12990191
> 
> 赞同：1
> 
> 时间：2012-10-20T16:01:21.320
> 
> 标签：jquery, scrolltop

我被这个困住了，希望你们任何人都可以帮助我。

我有这个 HTML：

```
<body>
    <div id="one"></div>
    <div id="two"></div>
    <div id="three"></div>
<body> 
```

使用这个 CSS：

```
#one, #two, #three {
    width: 100%;
    height: auto;
} 
```

而这个jQuery：

```
$(window).scroll(function(){
var y = $(window).scrollTop();
var one = $('#one').height();
var two = $('#two').scrollTop();
var three = $('#three').scrollTop();

var pos_one = 310;
var pos_two = 454;
var pos_three = 596;

if( y > one ){
    $("#header").fadeIn(200);
} else {
    $('#header').fadeOut(200);
}

if( (y > one) && (y < two) ) {
    $('.bubble').animate({
        "left" : pos_two + "px" 
    }, 300);
}

if( (y > two) && (y < three) ) {
    $('.bubble').animate({
        "left" : pos_three + "px" 
    }, 300);
}
}); 
```

所以，`#header`当我到达时淡入淡出`#two`，这是有效的。我遇到的问题是`.bubble` `div`当我在滚动时到达其他部分时它没有移动。

我究竟做错了什么？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:13:08.080

只需使用`overflow property`

只包括溢出：隐藏在你的css中，像这样......

```
#one, #two, #three {
    width: 100%;
    height: auto;
    overflow:hidden; 
} 
```

您可以根据需要使用属性值。这是参考链接[溢出属性链接](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

让我知道它会对你有帮助吗？？？

# html - 背景悬停颜色和溢出导航元素 z-index 问题

> ID：12990192
> 
> 赞同：0
> 
> 时间：2012-10-20T16:01:34.907
> 
> 标签：html, css, overflow, z-index, uinavigationitem

谁能帮我解决我遇到的这个问题。很难用一句话概括。

无论如何。

我有一个手风琴，由列表项组成。每个列表项都有一个锚链接来展开该项。锚链接绝对定位，使其成为列表项的底部中心，并溢出 10px 进入下一个列表项。当您将鼠标悬停在列表项上时，将应用背景颜色。

问题是这样的。

当您滚动列表项时，背景颜色会显示在前一个列表项锚链接的顶部。

我已将 html/css 放在 jsfiddle 上

```
<ul class="entries">
<li>
  <article class="expand-parent">
      <a href="#" class="show-more ir expand-link"><span>Show more</span></a>
      <header>
          <time datetime="">Date</time>
          <hgroup>
              <h2>Heading</h2>
              <h6>Sub heading</h6>
          </hgroup>
      </header>
      <div class="item expand-target">
          <p>Content</p>
      </div>
  </article>
</li>
</ul> 
```

[http://jsfiddle.net/magicspon/GzB44/](http://jsfiddle.net/magicspon/GzB44/)

有没有人有任何建议我可以解决这个问题？

提前感谢戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:08:26.927

也设置背景图像元素本身的 z-index。

```
ul.entries li:hover {
background-attachment: scroll;
background-clip: border-box;
background-color: transparent;
background-image: url("http://labs.gumproductions.co.uk/jsfiddle/ui/news-bg.png");
background-origin: padding-box;
background-position: 0 0;
background-repeat: repeat;
background-size: auto auto;
z-index:1;
} 
```

[http://jsfiddle.net/GzB44/2/](http://jsfiddle.net/GzB44/2/)

# assembly - 我如何知道 CF 或 OF 是打开还是关闭？

> ID：12990193
> 
> 赞同：0
> 
> 时间：2012-10-20T16:01:47.773
> 
> 标签：assembly, binary, flags, x86-16

```
10011100   +
01010000
--------- 
```

对于这个表达式，我怎么知道计算表达式后的 CF 和 OF 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:08:10.607

首先，添加它们。

```
10011100   +
01010000
---------
11101100 
```

对于 CF：有结转吗？不是在这种情况下，所以 CF 为零。

对于OF：进位进位与进位不同吗？不是在这种情况下，所以 OF 为零。

# php - PHP 中的 Javascript 函数 fromCharCode()

> ID：12990195
> 
> 赞同：8
> 
> 时间：2012-10-20T16:01:54.047
> 
> 标签：php, javascript

```
var test = String.fromCharCode(112, 108, 97, 105, 110);
document.write(test);

// Output: plain 
```

是否有任何 PHP 代码可以像`String.fromCharCode()`javascript 一样工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T16:04:09.507

试试这个`chr()`功能：

> 返回一个包含由 ascii 指定的字符的单字符字符串。

[http://php.net/manual/en/function.chr.php](http://php.net/manual/en/function.chr.php)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-20T16:05:13.710

PHP 具有[chr](http://php.net/manual/en/function.chr.php)函数，该函数将返回包含 ascii 指定字符的单字符字符串

为了适应您的 java 脚本风格，您可以创建自己的类

```
$string = String::fromCharCode(112, 108, 97, 105, 110);
print($string); 
```

使用的类

```
class String {
    public static function fromCharCode() {
        return array_reduce(func_get_args(),function($a,$b){$a.=chr($b);return $a;});
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T16:05:11.790

***[现场演示。](http://codepad.viper-7.com/4E3hDn)***

```
$output = implode(array_map('chr', array(112, 108, 97, 105, 110))); 
```

你可以做一个函数：

```
function str_fromcharcode() {
    return implode(array_map('chr', func_get_args()));
}

// usage
$output = str_fromcharcode(112, 108, 97, 105, 110); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-20T16:07:11.537

试试这样的..

```
 // usage: echo fromCharCode(72, 69, 76, 76, 79)
    function fromCharCode(){
      $output = '';
      $chars = func_get_args();
      foreach($chars as $char){
        $output .= chr((int) $char);
      }
      return $output;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-20T16:04:53.670

该[`chr()`](http://php.net/chr)函数执行此操作，但是一次只需要一个字符。由于我不知道如何在 PHP 中允许可变数量的参数，我只能建议：

```
function chrs($codes) {
    $ret = "";
    foreach($codes as $c) $ret .= chr($c);
    return $ret;
}
// to call:
chrs(Array(112,108,97,105,110)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-08T09:53:01.277

`chr()`如果您只需要 ASCII 支持，请使用。

```
echo chr(120); // outputs "x" 
```

`mb_chr()`如果您需要 Unicode（需要[mbstring](https://www.php.net/manual/en/book.mbstring.php)扩展名） ，或者它的多字节双胞胎：

```
echo mb_chr(23416); // outputs "學&quot; 
```

看：

*   [http://php.net/manual/en/function.chr.php](http://php.net/manual/en/function.chr.php)
*   [https://www.php.net/manual/en/function.mb-chr.php](https://www.php.net/manual/en/function.mb-chr.php)

# geolocation - IP 本地化：映射 ip-> 位置随着时间的推移而固定？

> ID：12990196
> 
> 赞同：3
> 
> 时间：2012-10-20T16:02:08.817
> 
> 标签：geolocation, ip, ip-geolocation

我正在管理一个网络平台，并希望获得一些统计数据，我的用户来自哪里。我可以存储远程 IP，并且我知道有将 IP 映射到地理位置的本地化服务。

这个映射是如何完成的？是否有固定的表格，哪个 IP 地址分配给了哪个区域？

我必须在访问时请求映射，还是可以在数天/数月/数年后请求映射？换句话说：从 IP 到位置的映射是固定的还是随时间变化的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T05:56:51.667

从 IP 到位置的映射随时间而变化。我读到数据库每个月都会更改 5%，尽管很难知道它们是否真的发生了这么大的变化，或者数据库提供商是否更频繁地出售他们的更新。但事实是这些数据库发生了变化。因此，您应该尽快获取 IP 地址的位置，至少在您捕获 IP 地址的一个月之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-07T08:07:34.463

您可以使用第三方网站对 ip 进行地理定位。

我通常使用：

[https://www.geo-ip.net/locate?query=stackoverflow.com&format=json](https://www.geo-ip.net/locate?query=stackoverflow.com&format=json)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-12T14:15:19.137

[ipregistry](https://ipregistry)作者那里。是的，IP 分配会随着时间而变化。例如，使用 Ipregistry，客户端库将查找结果存储长达 24 小时，但我们建议不要使用很长时间。

事实上，RIR（区域互联网注册）数据发生变化，一些 ISP（互联网服务提供商）利用动态 IP 地址和有分配（尤其是 IPv4）的公司出租或转售分配，导致频繁更改。

如果您使用 Ipregistry 之类的服务，它也会返回给定 IP 地址的威胁数据，甚至建议不要将结果缓存超过 1 小时，因为威胁数据的变化更加频繁！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-22T06:40:46.990

如果您想存储人口统计数据，您应该保存检索到的国家信息而不是 IP 地址，因为它可能会不时更改。

# python - Django Celery，ImportError：不支持按文件名导入

> ID：12990197
> 
> 赞同：3
> 
> 时间：2012-10-20T16:02:16.333
> 
> 标签：python, django, celery, django-celery

当我尝试为我的 django 应用程序运行 celery worker 时，出现导入错误。

据我所知，这是 kombu.utils 中的导入失败

接下来是一个相当大的堆栈跟踪：

```
$ ./manage.py celery worker --loglevel=info
Traceback (most recent call last):
  File "./manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/djcelery/management/commands/celery.py", line 22, in run_from_argv
    ["%s %s" % (argv[0], argv[1])] + argv[2:])
  File "/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py", line 890, in execute_from_commandline
    super(CeleryCommand, self).execute_from_commandline(argv)))
  File "/usr/local/lib/python2.7/dist-packages/celery/bin/base.py", line 179, in execute_from_commandline
    return self.handle_argv(prog_name, argv[1:])
  File "/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py", line 882, in handle_argv
    return self.execute(command, argv)
  File "/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py", line 857, in execute
    return cls(app=self.app).run_from_argv(self.prog_name, argv)
  File "/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py", line 142, in run_from_argv
    return self(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py", line 112, in __call__
    ret = self.run(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/celery/bin/celery.py", line 214, in run
    return self.target.run(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/celery/bin/celeryd.py", line 153, in run
    return self.app.Worker(**kwargs).run()
  File "/usr/local/lib/python2.7/dist-packages/celery/apps/worker.py", line 176, in run
    print(str(self.colored.cyan(' \n', self.startup_info())) +
  File "/usr/local/lib/python2.7/dist-packages/celery/apps/worker.py", line 246, in startup_info
    'conninfo': self.app.connection().as_uri(),
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 446, in as_uri
    fields = self.info()
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 435, in info
    return OrderedDict(self._info())
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 414, in _info
    D = self.transport.default_connection_params
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 637, in transport
    self._transport = self.create_transport()
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 395, in create_transport
    return self.get_transport_cls()(client=self)
  File "/usr/local/lib/python2.7/dist-packages/kombu/connection.py", line 402, in get_transport_cls
    transport_cls = get_transport_cls(transport_cls)
  File "/usr/local/lib/python2.7/dist-packages/kombu/transport/__init__.py", line 104, in get_transport_cls
    _transport_cache[transport] = resolve_transport(transport)
  File "/usr/local/lib/python2.7/dist-packages/kombu/transport/__init__.py", line 88, in resolve_transport
    return symbol_by_name(transport)
  File "/usr/local/lib/python2.7/dist-packages/kombu/utils/__init__.py", line 81, in symbol_by_name
    module = imp(module_name, package=package, **kwargs)
  File "/usr/lib/python2.7/importlib/__init__.py", line 37, in import_module
    __import__(name)
ImportError: Import by filename is not supported. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T16:35:40.973

啊找到了答案，我使用的是 CELERY_RESULT_BACKEND = someUrl 而不是“redis”等

# python - 如何在自定义 python 记录器中获取进程、线程名称、级别名称

> ID：12990199
> 
> 赞同：14
> 
> 时间：2012-10-20T16:02:28.243
> 
> 标签：python, python-3.x, python-2.7, wxpython, ironpython

我正在开发定制的记录器程序，根据要求，我需要在被调用函数中获取对象的进程、线程和名称（在下面的示例中，它的 obj 需要在 get_configured_logger 函数中获取）和 obj 所属的类名。如以下代码中的注释所示，请给出一些想法来实现这一点。

```
import logging, logging.handlers
from logging import StreamHandler, Formatter
class A:
  def get_configured_logger(self,name):
      logger = logging.getLogger(name)
      if (len(logger.handlers) == 0):                
                FORMAT = "%(process)s %(thread)s:-(asctime)s - %(name)s - %(levelname)s - %(message)-%(module)"

                #print 'process:',process
                #print 'thread:',thread
                #print 'levelname:',levelname
                #print  'Module:',(name portion of filename).

                #print 'obj:,'name of the object(Eg:obj),current function( Eg: get_configured_logger) called by' 
                #print 'class name:(obj is instance of class)' 
                formatter = logging.Formatter(fmt=FORMAT)                                 
                handler = logging.StreamHandler()
                handler.setFormatter(formatter)
                logger.addHandler(handler)
                logger.setLevel(logging.DEBUG)        
      return logger

if __name__=="__main__":
    obj=A()
    logger = obj.get_configured_logger("DEMO")
    logger.debug("TEST") 
```

谢谢

盒马

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-20T16:54:20.470

要将当前进程/线程名称添加到日志消息中，您可以在格式字符串中指定：

```
%(processName)s %(threadName)s 
```

要将它们作为字符串获取：

```
process_name = multiprocessing.current_process().name
thread_name = threading.current_thread().name 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-20T16:40:04.400

## 线程名称

该[文档](http://docs.python.org/library/threading.html#threading.current_thread)描述了一个访问 current 的简单接口`Thread`，然后您可以使用它的[`name`](http://docs.python.org/library/threading.html#threading.Thread.name)属性来获得 Thread 名称。

然后你可以使用：

```
import threading
threading.current_thread().name 
```

请注意，它不是唯一的。

## 进程名称

获取进程名称没有简单的方法，因为这取决于您使用的操作系统。但是，您可以获取进程 ID ( `pid`)：

```
import os
os.getpid() 
```

除非您正在使用`multiprocessing`模块并启动子流程，在这种情况下，您可以使用`multiprocessing`提供与模块界面非常相似的界面的`Threading`模块。

# python - Python 代码 2.7.3 出错

> ID：12990201
> 
> 赞同：0
> 
> 时间：2012-10-20T16:02:48.723
> 
> 标签：python

我使用指定的错误代码收到此错误：

```
print str(i+1)+". Horse number "+str(winners[i])+" - "+str(odds(winners[i]))
TypeError: 'list' object is not callable 
```

我相信这可能是由其中一个物体的印刷引起的。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:04:33.370

这将是两个问题之一；我们必须在这里猜测，因为您还没有发布任何代码。

1.  你有一个局部变量`str`，它是一个列表。在代码中重命名该变量，它掩盖了内置`str`函数。

2.  您有一个局部变量`odds`，它是一个列表，并且您正试图将其用作函数。也许您也有一个名为 的`odds` *函数*。在这种情况下，重命名变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:14:34.540

您可能已经自己弄清楚了。`str`或者`odds`，可能是后者，是一个列表，而您错误地尝试使用`()`，而不是`[]`. 请尝试以下操作：

```
print str(i+1)+". Horse number "+str(winners[i])+" - "+str(odds[winners[i]]) 
```

或者，更好的是，在 Python 版本 >= 2.6 中：

```
print '{}. Horse number {} - {}'.format(i+1,winners[i],odds[winners[i]]) 
```

有关更多信息，请参阅[Python 文档](http://docs.python.org/library/string.html#formatstrings)。

# python - 我应该下载哪个 Microsoft SQL 库

> ID：12990203
> 
> 赞同：-2
> 
> 时间：2012-10-20T16:03:32.937
> 
> 标签：python, sql-server, python-2.7

> **可能重复：**
> [在 Windows 中使用 Python 3 连接到 Sql Server](https://stackoverflow.com/questions/6154069/connecting-to-sql-server-with-python-3-in-windows)

我想用python连接sql server...但是不知道下载哪一个...

这里是[链接](http://www.microsoft.com/en-us/download/search.aspx?q=sql%20server%20service%20pack)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:11:52.007

有多种方法可以将 python 连接到 SQL Server

看这里

[http://wiki.python.org/moin/SQL%20Server](http://wiki.python.org/moin/SQL%20Server)

如果您有不明白的地方，请说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:08:02.013

如果您想要免费版的 SQL Server，请选择 Express 版。

[http://www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)

免费版有限制，但我不记得对访问服务器的语言有限制。

# mysql - SQL OR & AND 语句

> ID：12990204
> 
> 赞同：-1
> 
> 时间：2012-10-20T16:03:36.210
> 
> 标签：mysql, sql

目前有一个SQL查询问题，如下

```
UPDATE table
SET result = 6
WHERE date between DATE_ADD(curdate(), INTERVAL - 4 DAY)
AND curdate() 
AND TEAM1 = 6 OR TEAM2 = 6 
```

在选择语句中搜索此日期范围可以正常工作，当我尝试查看 TEAM1 或 TEAM2 = 6 时

我使用的数据库是通过 PhpMyAdmin 的 MySql。

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:05:00.500

尝试这个：

```
UPDATE table
SET result = 6
WHERE 
    date BETWEEN DATE_ADD(curdate(), INTERVAL - 4 DAY) AND curdate() 
  AND 
    (TEAM1 = 6 OR TEAM2 = 6) 
```

# iphone - 检测用户在 scrollviewdidscroll 中查看的图像对象

> ID：12990206
> 
> 赞同：0
> 
> 时间：2012-10-20T16:03:58.580
> 
> 标签：iphone, uiscrollview, ios6

如何检测用户在哪个图像对象上？

试图这样做，但它不工作

```
 - (void)scrollViewDidScroll:(UIScrollView *)sender {

// [_imageScrollView contentOffset];

CGFloat imageViewWidth = _imageScrollView.frame.size.width;
//int currentPage = floor((_imageScrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
NSInteger image = (NSInteger)floor((self.imageScrollView.contentOffset.x * 2.0f + imageViewWidth) / (imageViewWidth * 2.0f));
[_imageScrollView contentOffset];

//self.imageView.image = image;
} 
```

编辑：如果我这样使用它仍然无法正常工作

```
- (void)LongPress:(UILongPressGestureRecognizer*)gestureRecognizer{
if (gestureRecognizer.state == UIGestureRecognizerStateBegan){
    CGPoint location = [gesture locationInView:_imageView];
    CGFloat imageViewWidth = _imageScrollView.frame.size.width;
    int imageView = floor((_imageScrollView.contentOffset.x - imageViewWidth / 2) / imageViewWidth) + 1;

    NSLog(@"contains point?? - %d", CGRectContainsPoint(_imageView.bounds, location));

    if (CGRectContainsPoint(_imageView.bounds, [self.view convertPoint:location toView:_imageView]))
    {

        UIImageWriteToSavedPhotosAlbum(_image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);
    }
}} 
```

如果我遗漏了什么，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T17:22:52.013

```
- (void)scrollViewDidScroll:(UIScrollView *)sender 
{
    CGFloat pageWidth = scrollView.frame.size.width;
    int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth);
} 
```

上面的方法给你正确的当前页码，只有当你启用分页时`UIScrollView`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T20:42:42.287

嗨，最好的方法是为 Imageview 创建一个自定义类，如果从 UIImageView 继承，则在该图像上设置一个委托方法，它会在点击图像时响应委托类这是代码

```
CustomImageView.h

#import <UIKit/UIKit.h>

@protocol CustomImageDelegate;

@interface CustomImageView : UIImageView

@property (nonatomic, retain) id <CustomImageDelegate> delegate;

@end

@protocol CustomImageDelegate <NSObject>

- (void)customImageTapped:(CustomImageView*)customImageView;

@end 
```

自定义图像视图.m

```
#import "CustomImageView.h"

@implementation CustomImageView

@synthesize delegate = _delegate;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{

    if(_delegate && [_delegate respondsToSelector:@selector(customImageTapped:)])
    {
        [_delegate customImageTapped:self];
    }
} 
```

以下是如何在视图控制器上使用 CustomImageView 类并获取委托方法调用

视图控制器.h

```
#import <UIKit/UIKit.h>

#import "CustomImageView.h"

@interface ViewController : UIViewController <CustomImageDelegate>

@end 
```

视图控制器。

```
#import "ViewController.h"

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

    // Here create your scrollview and add on self.view

   // create objects of customimageview and set image and add all customimageviews on scrollView

}

-(void)customImageTapped:(CustomImageView *)customImageView{

    //On Tap this method will call and you can get image here by using customImageView.image

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我希望这对你编码快乐有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T16:12:14.373

您可以为滚动视图中的所有子视图分配标签并使用触摸事件检测它，如下所示：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    // assign a UITouch object to the current touch
    UITouch *touch = [[event allTouches] anyObject];

    // if the view in which the touch is found is your image

    if ([[touch view]tag] == imageObj.tag) {
        // do stuff here
    }
} 
```

希望这对你有用..

# php - 如何使用 PHP 获取 Apache HTTP 响应代码（或服务器响应的第一行）

> ID：12990207
> 
> 赞同：2
> 
> 时间：2012-10-20T16:04:06.447
> 
> 标签：php, apache2, httpresponse

如何获取服务器 HTTP 响应的第一行（在我的情况下为 Apache2）以在我的 PHP 脚本中使用？例如：

```
HTTP/1.1 200 OK
HTTP/1.1 404 Not Found
Etc. 
```

或者更好的是，只获取我的服务器发送给客户端的 HTTP 响应代码。

令我惊讶的是，[$_SERVER](http://php.net/manual/en/reserved.variables.server.php)没有它。[http_response_code()](http://www.php.net/manual/en/function.http-response-code.php)似乎只有在它首先由 PHP 设置时才能获得响应代码。[apache_response_headers()](http://www.php.net/manual/en/function.apache-response-headers.php)似乎没有它。[get_headers()](http://us.php.net/manual/en/function.get-headers.php)似乎需要额外的步骤/连接（如果我错了，请纠正我）。

如果我`ErrorDocument 403 /index.php`在 httpd.conf 中设置，我可以用来`$_SERVER["REDIRECT_STATUS"]`从 PHP 中获取响应代码，但是还有其他方法吗？

**编辑：**

为了清楚起见，我觉得很奇怪，`$_SERVER`除了响应的第一行或响应代码之外，几乎所有数据都返回。也许这是 HTTP 协议/服务器技术/PHP 之间的一般限制？也许我不应该尝试在我的 PHP 脚本中访问这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:11:55.213

**更新：不**，除非您代理自己的请求，否则这是不可能的。将您的请求发送到面向公众的 URL，然后将它们重定向到内部变体，您可以在此过程中看到标头。但这并不是一件容易的事，而且性能也很费力。或者你可以编写一个 Http Server 扩展，看看它会把你带到哪里:)

例子：

*   请求来到 /page.html
*   您附加 ?proxy=true 并转发到 /page.html?proxy=true
*   尝试在内部加载新 URL，将原始请求转发给您的内部处理程序
*   检查所有来自本地 IP 的 $_GET['proxy'] === 'true' 请求的内部处理
*   如果您有代理 === true 则以通常的方式处理
*   /page.html 从 /page.html?proxy=true 获取数据
*   日志头
*   将数据转发回原始客户端
*   *（如果做错了，不是很容易和性能税）*

**第一次尝试回答**

[http://php.net/manual/en/function.headers-list.php](http://php.net/manual/en/function.headers-list.php) - 可能是这个？

但这适用于您要发送的标头...

```
register_shutdown_function(function(){
    // Headers are really sent here, do some comparison
    var_dump(headers_list());
}); 
```

**.htaccess**变体将所有丢失的文件定向到 index.php。

```
RewriteEngine on
#If handler file is missing, pull index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .* index.php [L,NC] 
```

尝试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:09:59.530

你问的是远程主机还是本地机器的响应码？在第一种情况下，您可以使用设置了标头选项的 CURL 请求“ping”机器，并检索响应标头的各种设置。

# php - 在 Kendo UI 中显示编码的 HTML

> ID：12990209
> 
> 赞同：4
> 
> 时间：2012-10-20T16:04:28.780
> 
> 标签：php, javascript, mysql, kendo-ui

我正在使用 Kendo UI WYSIWYG 编辑器将格式化文本输入到使用 PHP 的 MySQL 数据库中。这一点工作正常。我在我的数据库中编码了 HTML。

我正在使用 Kendo UI ListView 从数据库中输出数据。我发现我需要使用 2 个函数来获取正确的 HTML 编码：

```
$row["body"] = stripslashes(html_entity_decode($row["body"]));
$row["body"] = str_replace("&nbsp;", " ", $row["body"]); 
```

现在 JSON 提要输出正确的 HTML（据我所知，只需最少的测试）。

从 JSON 提要中获取数据并将其显示在 ListView 页面上的 Javascript 现在显示的是 HTML 代码，而不是编码的 HTML 代码，这很好，但我真正想要的是它显示实际的格式化文本。

我第二次尝试通过 html_entity_decode() 解析字符串，但没有成功。我认为这是必须使用 JS 完成的事情，但我不确定如何专门使用 Kendo UI 来实现这一点，因为它正在执行所有解析。

我的 JS：

```
$(document).ready(function() {
    var dataSource = new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "http://dev.openbill.co.uk/admin/crud/viewticket/main.json.php?id=<?php echo $_GET['id']; ?>",
                        contentType: "application/json; charset=utf-8",
                        type: "GET",
                        dataType: "json",
                    }
                },
                schema: {
                    data: "data",
                    total: "total",
                    parse: decode
                },
                serverPaging: true,
                serverSorting: true,
                pageSize: 10,
                page: 1,
            });

    $("#pager").kendoPager({
        dataSource: dataSource
    });

    $("#listView").kendoListView({
        dataSource: dataSource,
        template: kendo.template($("#template").html())
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-27T14:21:01.623

正在寻找相同的东西并使用#：

通过这篇文章，我在剑道网站上找到了答案：

**模板语法**

Kendo UI 模板使用我们称为“哈希模板”的简单模板语法。使用这种语法，“#”（或哈希）符号用于标记模板中的区域，在执行模板时应将其替换为数据。

使用哈希语法的三种方法：

1.  呈现文字值：#= #
2.  呈现 HTML 编码的值：#:#
3.  执行任意 JavaScript 代码：# if(...){# ... #}#

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-20T17:04:42.777

好的，解决了这个问题！

对于像我这样的人已经花了太长时间谷歌搜索......

在您的模板中，替换：

```
${body} 
```

和..

```
#= body # 
```

它会显示格式化的 HTML

# c# - C# 动态对象 - 设置“枚举”值

> ID：12990211
> 
> 赞同：4
> 
> 时间：2012-10-20T16:04:46.253
> 
> 标签：c#, c#-4.0, dynamic

我有一个动态对象（C# 4.0），我想动态设置一个属性的枚举值，但我没有该类型的程序集引用。关于如何做到这一点的任何想法/是否可以做到这一点？

```
dynamic vehicle = myObject;
vehicle.AddTires(); // working
vehicle.ConfigureEngine(); //working
vehicle.seat="Leather";//working
//Enum needs to be set for the Make
vehicle.Make = Manufacturer.Toyota; // how to do this? 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-20T16:09:32.000

如果`c.Make`总是有一个值（例如，它的类型是`Manufacturer`, not`Manufacturer?`或者在设置之前该属性根本不存在）：

```
c.Make = Enum.Parse(c.Make.GetType(), "Toyota"); 
```

如果这对您不起作用，要使用这种方法，您需要以某种方式获取对 type 的引用`Manufacturer`。这可能有多复杂取决于您的动态类型是如何设置的。`Manufacturer?`您可能需要采取的另一种方法（例如，如果它是并且可能为空）是使用反射来获取`Make`属性以查找它是什么类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T23:28:27.113

`Enum.Parse()`有一个返回类型`object`，但是，您可以将返回的对象`dynamic`强制转换为查看实际的运行时类型。

```
vehicle.Make = (dynamic)Enum.Parse(vehicle.Make.GetType(), "Toyota"); 
```

# c - mlockall 的这种用法正确吗？

> ID：12990214
> 
> 赞同：0
> 
> 时间：2012-10-20T16:04:54.310
> 
> 标签：c, memory, encryption, trace

下面的程序对 2 个文件进行异或，以使用一次性密码器加密创建一个输出文件。当从外部存储源获取密钥文件时，我尝试使用`mlockall`以避免在硬盘驱动器上留下任何密钥文件的痕迹。

从 mlockall 手册页：

`mlock() and mlockall() respectively lock part or all of the calling process's virtual address space into RAM, preventing that memory from being paged to the swap area.`

我如何检查它是否正常工作以及我`mlockall`是否正确使用？

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/stat.h>
#include <sys/mman.h>

int main(int argc, char **argv)
{
struct stat statbuf;
struct stat keybuf;

char buffer [20];
int key;
int data;
int output;
int count;
char ans;
int * buf;
FILE * keyfile;
FILE * sourcefile;
FILE * destfile;

if(geteuid() !=0)
{
printf("Root access is required to run this program\n\n");
exit(0);
}

if(argc<4)
{
printf("OTP-Bunny 1.0\n");
printf("USAGE: OTP <source file> <output file> <keyfile>\n");
return (0);
}

/* Check number of arguments. */
if(argc>4)
{
printf("Too many arguments.\n");
printf("USAGE: OTP <source file> <output file> <keyfile>\n");
exit(1);
}

/* Allocate memory required by processes */
buf = (int*) malloc (sizeof(int));
if (buf == NULL)
{
perror("Error");
exit(1);
}

/* Lock down pages mapped to processes */
printf("Locking down processes\n");
if(mlockall (MCL_CURRENT | MCL_FUTURE) < 0)
{
perror("mlockall");
exit (1);
}

/* Check if sourcefile can be opened. */
if((sourcefile = fopen(argv[1], "rb"))== NULL)
{
printf("Can't open source file\n");
perror("Error");
printf("USAGE: OTP <source file> <output file> <keyfile>\n");
exit (1);
}

/* Get size of sourcefile */
fstat(fileno(sourcefile), &statbuf); 

/* Check if keyfile can be opened. */
if((keyfile = fopen(argv[3], "rb"))== NULL)
{
printf("Can't open keyfile.\n");
perror("Error");
printf("USAGE: OTP <source file> <output file> <keyfile>\n");
exit(1);
}                               

/* Get size of keyfile */
fstat(fileno(keyfile), &keybuf);

/* Check if keyfile is the same size as, or bigger than the sourcefile */
if((keybuf.st_size) < (statbuf.st_size))
{
printf("Source file is larger than keyfile.\n");
printf("This significantly reduces cryptographic strength.\n");
printf("Do you wish to continue? (Y/N)\n");
fgets(buffer, 20, stdin);
sscanf(buffer, "%c", &ans);
if(ans == 'n' || ans == 'N')
{
exit (1);
}
if(ans == 'y' || ans == 'Y')
{
    printf("Proceeding with Encryption/Decryption.\n");
    }
else
{
printf("No option selected. Exiting...\n");
exit (1);
}
}   

/* Check if destfile can be opened. */
if((destfile = fopen(argv[2], "wb"))== NULL)
{
printf("Can't open output file.\n");
perror("Error");
exit(1);                    
}    

/* Encrypt/Decrypt and write to output file. */
while(count < (statbuf.st_size))
{
key=fgetc(keyfile);
data=fgetc(sourcefile);

output=(key^data);

fputc(output,destfile);
count++;
}

/* Close files. */
fclose(keyfile);
fclose(sourcefile);
fclose(destfile);

printf("Encryption/Decryption Complete.\n\n");

/* delete keyfile option. */
printf("Do you wish to delete the keyfile? (Y/N)\n");
fgets(buffer, 20, stdin);
sscanf(buffer, "%c", &ans);
if(ans == 'y' || ans == 'Y')
{
    if ( remove(argv[3]) == 0)
    {
    printf("File deleted successfully.\n");
    }
    else
    {
    printf("Unable to delete the file.\n");
    perror("Error");
    exit(1);
    }
}

/* cleanup */
printf("Releasing memory\n");
free (buf);
return(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:55:48.437

您的用法`mlockall`可能是正确的。由于您提供了`MCL_FUTURE`任何间接`malloc`（例如 by `fopen`），因此也会受到关注 - 但这些`malloc`-s 可能需要`mmap`（并且这些`mmap`系统调用可能会失败，例如由于缺少 RAM）。

但是你为什么不让你`buf`的局部`int`变量呢？

而且我不明白为什么使用`mlockall`会“避免在硬盘上留下任何密钥文件的痕迹”；密钥文件肯定在文件系统中（并且可能在某些内核文件缓存中），这会在某些磁盘上留下痕迹（除非您使用例如[tmpfs](http://en.wikipedia.org/wiki/Tmpfs)文件系统）。[mlopckall(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mlockall.2.html)处理[进程](http://en.wikipedia.org/wiki/Process_%28computing%29)的（[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)）[地址空间](http://en.wikipedia.org/wiki/Address_space)，但文件与[文件系统](http://en.wikipedia.org/wiki/File_system)相关，在 Linux 上，文件系统通常具有[内核](http://en.wikipedia.org/wiki/Kernel_%28computing%29)缓冲区和[缓存](http://en.wikipedia.org/wiki/Cache_%28computing%29)。

由于缺少缩进，我倾向于发现您的程序难以阅读，并且我不明白它的作用以及`mlockall`. 编辑您的问题以解释您的程序的预期目的会很好。

你真的应该读一本好书，比如[Advanced Linux Programming](http://advancedlinuxprogramming.com/)和[Advanced Unix Programming](http://basepath.com/aup/)。您似乎缺少一些基本概念；我不明白你为什么使用`mlockall`.

[也许您可能会使用像mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)这样的较低级别的系统调用来访问您的敏感数据（并且`munmap(2)`尽快，也许之前清除它）。您不知道具体在做什么`fopen`或`fgetc`在做什么，他们正在添加另一个缓冲区，这将保留您的秘密数据，甚至可能在`fclose`.

此外，您可能想要定义（至少在您的头脑中和明确的评论中）您的[可信计算基础](http://en.wikipedia.org/wiki/Trusted_computing_base)是什么。

此外，[密码学](http://en.wikipedia.org/wiki/Cryptography)是一门非常困难的科学。请使用现有的加密库，而不是发明自己的加密（这真的是儿戏）。如果您想成为密码学家，请获得该领域的博士学位。（我确实建议您在一次性键盘上使用一些加密库，而不仅仅是 xor）。

# assembly - ASM 和寄存器

> ID：12990216
> 
> 赞同：0
> 
> 时间：2012-10-20T16:05:10.740
> 
> 标签：assembly, cpu-registers

我只是有一个问题，因为我正在学校学习 ASM 语言，但我不懂一些东西：

```
(BX)=0100H
MOV AX,BX 
```

声明前的源地址（BX）是空的`mov`，我不明白为什么。我的想法是，这是因为 BX 中没有任何内容。真的吗 ？

这是英特尔语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:22:17.007

这一切都取决于上下文。bx 是否包含指针或值？周围的代码是什么？

```
lea     bx, somestring  ; abc
mov     ax, bx          ; ax contains pointer to abc
mov     ax, [bx]        ; ax will contain ba 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T20:10:10.303

看起来您正在将值`0100h`直接移动到 bx 寄存器。

要获取位置 0100h 中的内容，您需要将其指定为指向地址处的值（大小）的指针。

`mov bx,WORD PTR ds:0x100`对于字长

`mov bl,BYTE PTR ds:0x100`对于字节大小

# asp.net-mvc-3 - 从 http url 获取 urname/password

> ID：12990224
> 
> 赞同：0
> 
> 时间：2012-10-20T16:06:13.557
> 
> 标签：asp.net-mvc-3, http, authentication

是否可以从格式如下的 http url 获取 asp.net (mvc3) 中的用户名/密码？

[http://user:password@example.com/path](http://user:password@example.com/path)

还是只能使用 ftp 协议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:10:21.480

您示例中的用户名和密码使用 HTTP 基本身份验证 - 它们不是 URL 的一部分，而是包含在标头信息中。您可以在 ASP.NET 中访问此信息，请参阅本文：[使用 Asp.Net WebAPI 进行基本身份验证](http://stevescodingblog.co.uk/basic-authentication-with-asp-net-webapi/)

```
public class BasicAuthenticationAttribute : System.Web.Http.Filters.ActionFilterAttribute {
    public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext) {
        if (actionContext.Request.Headers.Authorization == null){
            // No Header Auth Info
            actionContext.Response = new System.Net.Http.HttpResponseMessage(System.Net.HttpStatusCode.Unauthorized);
        } else {
            // Get the auth token
            string authToken = actionContext.Request.Headers.Authorization.Parameter;
            // Decode the token from BASE64
            string decodedToken = Encoding.UTF8.GetString(Convert.FromBase64String(authToken));

            // Extract username and password from decoded token
            string username = decodedToken.Substring(0, decodedToken.IndexOf(":"));
            string password = decodedToken.Substring(decodedToken.IndexOf(":") + 1);
        }
    }
} 
```

# c# - Caliburn Micro 中 TextBox 的 GotFocus 事件？

> ID：12990227
> 
> 赞同：4
> 
> 时间：2012-10-20T16:06:26.417
> 
> 标签：c#, .net, wpf, caliburn.micro

我正在使用 Calibrun Micro 和 WPF，我有一个文本框，当我收到一个焦点时，我想在 ViewModel 中调用一个方法，当它离开 LostFocus 时也是如此。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-20T16:16:35.520

您可以使用[Message.Attach 语法](http://devlicio.us/blogs/rob_eisenberg/archive/2010/07/17/caliburn-micro-soup-to-nuts-pt-3-all-about-actions.aspx)来挂钩`GotFocus`and`LostFocus`事件

以下代码将在您的视图模型上调用`GotFocusMethod`and `LostFocusMethod`：

```
<TextBox cal:Message.Attach="[Event GotFocus] = [Action GotFocusMethod]; 
                 [Event LostFocus] = [Action LostFocusMethod]" /> 
```

`;`注意：当你声明多个动作时，不要忘记用分号分隔动作。

# django - 在 django 中扩展用户模型 - 检索数据

> ID：12990228
> 
> 赞同：0
> 
> 时间：2012-10-20T16:06:27.270
> 
> 标签：django

我使用以下模型扩展了用户模型：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    designs = models.ManyToManyField('Design', blank=True)
    prints = models.ManyToManyField('Print', blank=True)
    rating = models.IntegerField(null=True, blank=True)
    reliability = models.IntegerField(null=True, blank=True)
    av_lead_time = models.IntegerField(null=True, blank=True) 
```

我已验证此 OneToOne 字段有效，因为它包含在管理员的用户字段中。现在我需要用它来创建一个用户字段（包括用户和用户配置文件）的 html 表。我正在尝试以下代码，但没有返回任何内容：

```
user_list = User.objects.all()
    return render_to_response('index.html', {
        'user_list': user_list    
    }) 
```

模板：

```
{% for user in user_list %}
    <tr>
        <td>{{ user.rating }}</td>
        <td>{{ user.reliability }}</td>
        <td>4</td>
        <td>2</td>
        <td>96</td>
        <td>£4.56</td>
        <td class="success printButton radius">Add to Cart</td>
    </tr>
{% endfor %} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:12:29.333

`user_list`是一个不具有您正在寻找的属性`QuerySet`的对象。`User`

您应该使用`user.get_profile.rating`and `user.get_profile.reliability`。

实际上，如果您将设置设置为您的类型，[`get_profile()`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.get_profile)则会返回与关联的配置文件。在模板中，您无需使用，即可访问的个人资料。`User``AUTH_PROFILE_MODULE``UserProfile``()``user.get_profile``user`

您还需要首先确保用户实际上拥有个人资料。

* * *

配置文件在 Django 1.5 中消失了，所以现在可能不是开始使用它们的最佳时机！

# c++ - 来自 Grand Central Dispatch 的 dispatch_async() 和来自 C++11 的 std::async

> ID：12990237
> 
> 赞同：6
> 
> 时间：2012-10-20T16:07:59.537
> 
> 标签：c++, ios, asynchronous, concurrency, c++11

我有一些使用 GCD 进行并发和删除显式锁和线程的经验。

C++11提供了std::async，好像也提供了一些类似的特性（我不是C++专家，请不要怪我有错）。

撇开风格和语言偏好的争论不谈，是否有任何基准来比较两者的性能，尤其是对于像 iOS 这样的平台？

从实际的角度来看，c++11 的 std::async 值得尝试吗？

**编辑：**

正如 stackmonster 所回答的那样，C++11 本身并没有提供与调度队列完全相同的东西。但是，是否可以使用原子数据结构（和可论证的 lambda 函数）创建一个临时串行队列来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T17:40:20.417

C++ 11 std::async 并不像中央调度那样复杂。

它更类似于 java.util.concurrent 包提供的异步并发模型，该包提供回调模板，但没有内置的性能优势。

我想说他们之间的区别就是这个。

回调模板没有特定的性能特征。GCD 完全是关于性能，以及线程化/多路复用这些回调以减少线程创建开销并允许排队和任务依赖以及线程池。

std::async 的启动策略在复杂性上无法与 GCD 相提并论，也不是实现可移植的。

我不确定两者之间的基准会真正证明什么，因为它们并不是那么相似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T06:26:40.197

正如其他人已经指出的那样，由于其苹果/橙子的性质，这种比较通常毫无意义，但如果你真的想我想你可以针对一些基于 GCD 的期货实现测试 std::async 和 std::future 你自己拼凑并查看哪个为一组已知的计算提供最快的期货。可能有点有趣，但你必须是做这件事的人，因为这个实验可能太奇怪和深奥而无法引起其他人的兴趣。:-)

# image - 在 ActionScript 3 中将 JPG 读入 BitmapData（JPG 在 APK 文件中）

> ID：12990242
> 
> 赞同：3
> 
> 时间：2012-10-20T16:08:42.183
> 
> 标签：image, actionscript-3, air, apk, ipa

我正在使用 Adob​​e AIR 为我的 Android 手机制作 APK 文件。在 APK 包内有一个 SWF 文件，在与 SWF 文件相同的文件夹中，有一个名为“images”的子文件夹，其中包含 image.jpg。

我试图在运行时将该 image.jpg 读入程序但无法获取它的位置（程序似乎找不到它。

这是我正在尝试的：

```
var loader:Loader = new Loader();
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);
loader.load(new URLRequest("images/image.jpg"));
while (bitmapData==null) {}  //wait until loaded
return bitmapData; 
```

onComplete 函数 puts 设置 bitmapData 字段。但是，COMPLETE 事件永远不会发生，因此 while 循环永远不会存在。

我也试过：

```
loader.load(new URLRequest("/images/image.jpg"));
loader.load(new URLRequest("app:/images/image.jpg"));
loader.load(new URLRequest("app-storage:/images/image.jpg"));
loader.load(new URLRequest("file:/images/image.jpg")); 
```

它都不起作用。

即使在没有 APK 文件的情况下尝试仅运行生成的 SWF 文件（图像子文件夹与 SWF 文件位于同一文件夹中）时，我也无法使其工作。

我无法将 JPG 嵌入 SWF 文件本身，因为我需要有很多图像文件，而且在制作如此大的 SWF 文件时，Flash CS6 会耗尽内存（从外部读取图像也意味着编译时间要少得多）。

有任何想法吗？如何将外部 JPG 文件放入 BitmapData？请记住，图像不在 APK 文件之外，而是打包在其中。

注意：我稍后也会将这个东西导出到一个 iOS ipa 包中，所以它也必须在那里工作。

* * *

**编辑，因为由于我的声誉，我无法自我回答。**

Strille 让我意识到 ActionScript 虚拟机是单线程的。

因此，不可能让线程休眠（等待）以加载正在加载的图像。相反，我不得不*叹息*重写很多代码，以便在调用 onComplete 函数时停止并继续。

我之前尝试过的这件事实际上可以工作，但由于 while 循环而无法完成：

```
loader.load(new URLRequest("app:/images/image.jpg")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:01:30.607

如果我没记错的话，你应该可以这样做：

```
loader.load(new URLRequest(new File("app:/images/image.jpg").url)); 
```

由于我们使用的是 File 类，因此上述内容不会在 Flash Player 中运行，只能在 iOS 或 Android 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-06T13:39:06.417

根据我的经验，有两种实用的方法可以使用 AIR 从正在运行的 Android APP 加载资产

1.  使用 File 实例的 URLLoader 和 .url 属性
2.  使用 FileStream （接收 File 实例）

**添加到项目**

您可以在应用程序的 .xml 描述符文件中使用与打包 ICONS 相同的技术将文件打包到 APK 中。

并确保将它们添加到您的 IDE 中的 Android 部分（适用于 IntelliJ 和 Flash Builder）“要打包的文件和文件夹” - 将路径添加到您想要的资产文件夹，并为其指定一个相对名称别名。

**细化**

资产本身被放置（当安装 APP 时），在AIR 可用的 '' **applicationDirectory '' 内，**

然而，由于较新的 Android 操作系统和 Flash 播放器存在安全问题，因此无法通过**nativePath**访问这些资产，只能通过**File**实例的“ **url** ”属性访问这些资产。

 ****最佳实践**

使用 File 实例的 URLLoader 和 .url 属性，因为它本质上也是**异步**的，并且可以使用本机解码器解析 PNG / JPG 文件，而不必手动读取**FileStream**（返回 aa **ByteArray**）

```
var f:File = File.applicationDirectory.resolvePath('images/myimage.png');
loader.load(new URLRequest(f.url)); 
```

并且，如果我错过了更多方法，请告诉...）**

# android - 从 Activity 用画布画一条线

> ID：12990244
> 
> 赞同：1
> 
> 时间：2012-10-20T16:08:44.403
> 
> 标签：android, android-canvas

我已阅读以下链接：

[如何在android中画一条线](https://stackoverflow.com/questions/3616676/how-to-draw-a-line-in-android/12987068#12987068)

[http://marakana.com/s/android_2d_graphics_example,1036/index.html](http://marakana.com/s/android_2d_graphics_example,1036/index.html)

[http://developer.android.com/reference/android/graphics/Canvas.html](http://developer.android.com/reference/android/graphics/Canvas.html)

[Activity.setContentView，View.setContentView？](https://stackoverflow.com/questions/6572905/activity-setcontentview-view-setcontentview)

[如何在没有“setContentView（R.layout.main）”的情况下创建活动](https://stackoverflow.com/questions/11147704/how-to-create-an-activity-without-setcontentviewr-layout-main)

[http://www.jayway.com/2009/03/26/layout-resources-in-android/](http://www.jayway.com/2009/03/26/layout-resources-in-android/)

我已经阅读了之前谈论我的问题的文章，但我无法解决我的问题。

我的问题是我想画直线来模拟图像之间的连接，但基本上是画直线。

我见过的所有示例都有从活动继承的主类，并有另一个从视图继承的内部类。在主类中设置包含 View 类的用户界面，所以我们有一个空的用户界面。像这样的东西：

```
public class ActivityMain extends Activity{

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    MyView view1 =new MyView(this);
    setContentView(view1);       
}

public class MyView extends View {
    public MyView(Context c) {
        super(c);
    }
}
//And more code
} 
```

我想在继承自活动的类中设置我的用户界面（xml文件）（像往常一样）：

```
public class ActivityMain extends Activity{
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.union);
}
} 
```

而且我希望从继承自活动的类中绘制直线，我不希望有任何继承自 View 的类。

我尝试了以下但我没有看到任何行：

```
public boolean onTouchEvent(MotionEvent event) {
int x = (int) event.getX();
int y = (int) event.getY();

switch(event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        Canvas canvas = new Canvas();
        Paint paint = new Paint();
                    paint.setColor(Color.BLACK);
        canvas.drawLine(0, 0, 300, 700, paint);     
    break;
    case MotionEvent.ACTION_MOVE:
    break;
    case MotionEvent.ACTION_UP:
    break;
}   
return true;
} 
```

在前面的方法中，我想从角 0,0 到角 300,700 画一条线。这是一个简单的测试。但我什么都没画，也不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:29:25.257

您可以扩展视图并覆盖`onDraw`并管理那里的所有行。

然后，您可以在另一个 xml（可以在 Activity 中使用）中添加这个视图（可以是全屏），如下所示：

```
<my.package.myView
    android:layout_width=@"fill_parent"
    android:layout_height=@"fill_parent"/> 
```

确保您在主要活动中使用的布局是 a `RelativeLayout`，这样您就可以填满整个屏幕并位于视图的顶部。要将视图放在视图之上，请确保您的视图位于活动 xml 的末尾。

# c# - 使用 TFS 的 Visual Studio 链接文件 - 自动构建不起作用

> ID：12990246
> 
> 赞同：1
> 
> 时间：2012-10-20T16:08:59.150
> 
> 标签：c#, visual-studio, tfs

我有两个 Visual Studio 解决方案，一个用于 WebApi，一个用于 WP7 开发，我将一些 dto 文件从 WP7 解决方案链接到 WebApi 解决方案，这很好用。

我刚刚将解决方案添加到 Team Foundation Service 预览版，并尝试构建它。由于链接文件没有添加到源代码管理中，因此我无法构建项目，因为它找不到链接文件。

我尝试将 WP7 解决方案添加到 TFS 中的同一目录，但没有运气。

编辑-更多信息：我得到：CSC：找不到源文件'....\TennisTracker.Client.Ui\TennisTracker.Client.Core\Models\GameDto.cs'

然后我在“编辑构建定义 - 流程 - 1\. 必需 - 要构建的项目下添加客户端解决方案。我得到这个：C:\a\src\TennisTracker.Client\TennisTracker.Client.Ui\TennisTracker.Client.Ui.csproj (140)：找不到导入的项目“C:\Program Files (x86)\MSBuild\Microsoft\Silverlight for Phone\v4.0\Microsoft.Silverlight.WindowsPhone71.Overrides.targets”。确认声明中的路径是正确的，并且该文件存在于磁盘上。

在错误控制台中，在 Visual Studio 中，它给了我这个错误： 错误：API 限制：程序集 'file:///C:\Users\markka\AppData\Local\Temp\VSTFSBuild\ae65cc1a-850e-4112-8c34 -96674d8c79f3\2052550994\nunit.core.interfaces.dll' 已经从不同的位置加载。它不能从同一 appdomain 中的新位置加载。

工作区设置为整个目录，包含两个解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:13:15.523

在构建定义下，您可以定义可以指向/设置其他项目的路径的工作区。

最好的办法是发布构建错误输出，然后我可以希望让您知道您需要设置的确切路径

# php - phpize 不是目录——heroku zlib 安装

> ID：12990249
> 
> 赞同：1
> 
> 时间：2012-10-20T16:09:09.037
> 
> 标签：php, heroku

我试图让我的heroku wordpress 安装能够写入文件heroku。为此，我正在尝试安装 zlib。幸运的是，我参考了本教程的一部分，但我遇到了一些麻烦。本教程告诉我在 heroku bash 中运行以下命令：

```
heroku run bash

export PS1="\u@\h \w> "

mkdir tmp

cd tmp

git clone https://github.com/php/php-src.git -b PHP-5.3

cd php-src

cd ext/zlib  

/app/php/bin/phpize

./configure –with-php-config=/app/php/bin/php-config

make 

cd modules

scp zlib.so user@host:~/destination

exit 
```

我被困在

```
cd ext/zlib     

/app/php/bin/phpize

./configure –with-php-config=/app/php/bin/php-config 
```

我假设他的意思是 cd to`/ext/zlib/app/php/bin/phpize`

我可以一直 cd 到 /bin，但我似乎无法 cd 到 phpize。如果我输入“dir”，我会在终端中看到一些名为 phpize 的东西。

我需要运行什么来执行上面的命令？知道我目前在目录中`/ext/zlib/app/php/bin`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:11:28.687

phpize 是一个实用程序。安装 php-devel

# android - android代码在手机启动后立即启动我的应用程序

> ID：12990255
> 
> 赞同：2
> 
> 时间：2012-10-20T16:09:38.253
> 
> 标签：android

嗨，谁能给我手机启动后立即启动应用程序的示例代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T16:14:40.067

你需要`BroadcastReceiver`这样的

```
public class MyBroadcastreceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {
            Intent i = new Intent(YourClass)
            context.startService(i);
        }
    }
} 
```

也是这个用户权限

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

以及 manifest.xml 中标签中的接收器

```
<receiver android:name="com.example.MyBroadcastReceiver">  
    <intent-filter>  
        <action android:name="android.intent.action.BOOT_COMPLETED" />  
    </intent-filter>  
</receiver> 
```

# java - GridBagLayout ipadY 和定位

> ID：12990257
> 
> 赞同：0
> 
> 时间：2012-10-20T16:09:49.203
> 
> 标签：java, swing, gridbaglayout

我有一个 JFrame，它在窗口的左上角添加了一个窗格。这很好用。出于某种原因，构成左上角窗格的 gridbaglayout 的行为并不完全像我想要的那样。

我添加的前三个按钮在第一个 y 行内并水平添加，但我添加到 gridY = 1 的信息窗格不会转到下一行，它只是像按钮一样添加到右侧。

此外，我必须在每个按钮上使用设置首选大小，因为 iPadY 没有垂直扩展按钮。

```
private JPanel setUpTop()
{
    JPanel pane = new JPanel();
    pane.setLayout(new GridLayout(1, 2));

    JPanel controlPane = new JPanel();
    pane.setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();

    controlPane.setBackground(Color.RED);

    c.gridx = 0;
    c.gridy = 0;
    previousSongBT = new JButton("<<");
    previousSongBT.setPreferredSize(new Dimension(CTRL_BT_WIDTH, CTRL_BT_HEIGHT));
    controlPane.add(previousSongBT, c);

    c.gridx = 1;
    c.gridy = 0;
    playBT = new JButton(">");
    playBT.setPreferredSize(new Dimension(CTRL_BT_WIDTH, CTRL_BT_HEIGHT));
    controlPane.add(playBT, c);

    c.gridx = 2;
    c.gridy = 0;
    nextSongBT = new JButton(">>");
    nextSongBT.setPreferredSize(new Dimension(CTRL_BT_WIDTH, CTRL_BT_HEIGHT));
    controlPane.add(nextSongBT, c);

    c.gridx = 0;
    c.gridy = 1;
    c.weighty = 1;
    c.gridwidth = 3;
    c.anchor = GridBagConstraints.PAGE_END;
    JPanel informationPane = new JPanel(); 
    informationPane.add(new JButton("Bottom pane"));
    informationPane.setBackground(Color.GREEN);
    controlPane.add(informationPane, c);

    pane.add(controlPane);
    return pane;
} 
```

这是添加该窗格的代码：

```
//Top-Left
    c.anchor = GridBagConstraints.FIRST_LINE_START;
    c.insets = new Insets(20,20,0,0);  //top padding

    c.gridx = 0;
    c.gridy = 0;
    c.weightx = 1;
    c.weighty = 0.5;
    this.getContentPane().add(setUpTop(), c); 
```

这是一张更清晰的图片，我希望绿色面板位于其他三个按钮下方：

![在此处输入图像描述](../Images/ffdaf680304d34c98e316354bd527a66.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:14:53.993

代替

```
JPanel controlPane = new JPanel();
pane.setLayout(new GridBagLayout()); 
```

它应该读

```
JPanel controlPane = new JPanel();
controlPane.setLayout(new GridBagLayout()); 
```

不应该吗？？

# wpf - WPF DataTemplate 中的图像对象渲染非常慢

> ID：12990266
> 
> 赞同：3
> 
> 时间：2012-10-20T16:10:35.943
> 
> 标签：wpf, data-binding, backgroundworker, datatemplate, observablecollection

我正在创建一个带有缩略图的简单文件浏览器。我正在使用带有自定义 DataTemplate 的 ListBox 来显示 ObservableCollection 中的对象。

```
<DataTemplate>
   <StackPanel Margin="5">
      <Image Source="{Binding Path=ThumbnailPath}"/>
      <Label Background="White" Content="{Binding Path=FileName}"/>
   </StackPanel>
</DataTemplate> 
```

（我的自定义类 File 的）对象只有这两个字符串属性：ThumbnailPath 和 FileName。当用户选择一个文件夹时，BackgroundWorker 会获取文件列表并创建 File 类的实例。使用 BW 的 ReportProgress 将这些实例分派到 UI 线程（以 10 个为一组）。在事件处理程序中，它们被添加到绑定到我的 ListBox 的 ObservableCollection 中。

问题是当至少 20-30 个文件要添加到我的收藏中时；在 ListBox 更新之前，UI 冻结了将近三秒钟。甚至不要问当一个文件夹包含数百个文件时会发生什么。一切都在后台做好了准备，所以我猜**当 WPF 开始初始化和渲染空的 Image 元素时就会出现问题**。当我从 DataTemplate 中注释掉 Image 时，眨眼间就可以更新集合及其视图。

有什么可以做的吗？我知道可以在后台线程中创建整个 View 对象（一个新的 StackPanel，添加子新标签和新图像，设置值），但是 DataBinding 和模板的重点应该是避免这样做的需要......所以**如何在其 DataTemplate 中用图像填充 ListBox 而不会失去响应能力？**

PS：实际的缩略图是由FFmpeg生成并保存到文件中的，但是这个过程只有在显示所有项目（带有空白图像对象）后才开始，所以在这个问题的上下文中它们是无关紧要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T04:48:54.723

尝试这个：

将 ThumbnailPath 更改为 BitmapImage 的类型；

设置属性使用时

```
BitmapImage bi1 = new BitmapImage();
// BitmapImage.UriSource must be in a BeginInit/EndInit block
bi1.BeginInit();
bi1.UriSource = new Uri(@"C:\filepath.jpg");
 To save significant application memory, set the DecodePixelWidth or   
// DecodePixelHeight of the BitmapImage value of the image source to the desired  
// height or width of the rendered image. If you don't do this, the application will  
// cache the image as though it were rendered as its normal size rather then just  
// the size that is displayed. 
// Note: In order to preserve aspect ratio, set DecodePixelWidth 
// or DecodePixelHeight but not both.
bi1.DecodePixelWidth = 200;
bi1.EndInit();
bi1.Freeze();

//if you do not Freeze, your app will leak memory. 
```

# php - PHP：显示 ImageMagick 图像而不保存到像 GD 这样的服务器

> ID：12990271
> 
> 赞同：2
> 
> 时间：2012-10-20T16:11:05.323
> 
> 标签：php, imagemagick

这个问题已经被问过（见下面的链接），但没有一个答案有效。所以我有这个 ImageMagick 脚本，我用它来为 PNG 着色，它工作得很好，但问题是它实际上在服务器上生成文件。相反，我想要的是 GD 在进行图像处理然后显示它而不实际保存图像的地方。

这是我用来为图像着色的 ImageMagick 代码。此代码进行转换并在服务器上生成一个额外文件，即最终图像。

```
<?php

$source = "src.png";
$final = "FINAL.png";
$color = "#00FF00";

exec("convert $source  -threshold 100% +level-colors '$color',   $final");

?> 
```

这是一个 GD 示例代码，它进行图像处理并直接显示最终图像，而无需将额外的图像保存到服务器：

```
<?php
header('Content-Type: image/png');

$source = "src.png";

$im = imagecreatefrompng($source);
imagefilter($im, IMG_FILTER_GRAYSCALE);
imagepng($im);
imagedestroy($im);

?> 
```

所以基本上我想要在第一个示例中完成的图像处理，但不保存额外的图像并在浏览器中显示输出。

搜索的链接：

**没有一个解决方案有效：** [使用 ImageMagick 生成图像而不保存到文件，但仍然在网站上显示它们](https://stackoverflow.com/questions/12066298/generate-images-with-imagemagick-without-saving-to-file-but-still-display-them-o)

**如何将我的 ImageMagick 代码转换为 iMagick？** [PHP-Imagemagick 图片展示](https://stackoverflow.com/questions/6087569/php-imagemagick-image-display)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T03:04:49.300

使用您的代码供其他人学习的直接示例。我在 Godaddy 上的共享 Linux 服务器上使用了相同的方法。

```
<?php
    $source = "src.png";
    $color = "#00FF00";

    $cmd = "convert $source -threshold 100% +level-colors '$color',".
    " -unsharp 0.2x0.6+1.0 -quality 50 JPG:-";

    header("Content-type: image/jpeg");
    passthru($cmd, $retval); 
    exit();
?> 
```

*   **注意**： - 你确定你使用“ *-threshold 100% +level-colors '$color',* ”正确吗？阈值 100% 会将图像推为黑色。然后*+level-colors '#00FF00'*将生成纯绿色图像。我假设您已经简化了此演示的代码。

*   **注意**： - “ *+level-colors '$color'* ”，在 Godaddy 的服务器上不起作用。不过，它在我的家庭服务器上运行良好。Godaddy 的服务器上可能安装了一个过时的 ImageMagick 版本。

# android - Android Fragments (with WebView) - Activity 被销毁

> ID：12990273
> 
> 赞同：0
> 
> 时间：2012-10-20T16:11:24.477
> 
> 标签：android, android-fragments, android-webview, webviewclient

我在我的应用程序中使用基于选项卡的活动，我想用 WebViews 实现一个片段堆栈。在这些 WebViews 中，我想捕获 URL 请求并用新的 WebView Fragment 替换当前的 WebView Fragment。不幸的是我总是得到`Activity was destroyed Exception`但不知道为什么。

你能给我一些提示如何解决这个问题吗？

我使用以下代码（在代码示例的末尾，您将识别出`handleUrlRequest`我要替换当前 Fragment 的方法）：

```
public class FragmentStackSupport extends SherlockFragmentActivity {
int mStackLevel = 1;

public static int THEME = R.style.Theme_Sherlock_Light;

@Override
protected void onCreate(Bundle savedInstanceState) {
    setTheme(THEME); //Used for theme switching in samples
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fragment_stack);

    if (savedInstanceState == null) {
        // Do first time initialization -- add initial fragment.
        Fragment newFragment = Web.newInstance(mStackLevel);
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.add(R.id.simple_fragment, newFragment).commit();
    } else {
        mStackLevel = savedInstanceState.getInt("level");
    }
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("level", mStackLevel);
}

public void addFragmentToStack() {
    mStackLevel++;

    // Instantiate a new fragment.
    Fragment newFragment = Web.newInstance(mStackLevel);

    // Add the fragment to the activity, pushing this transaction
    // on to the back stack.
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.simple_fragment, newFragment);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    ft.addToBackStack(null);
    ft.commit();
}

public static class Web extends SherlockFragment {
    int mNum;

    /**
     * Create a new instance of CountingFragment, providing "num"
     * as an argument.
     */
    static Web newInstance(int num) {
        Web f = new Web();

        // Supply num input as an argument.
        Bundle args = new Bundle();
        args.putInt("num", num);
        f.setArguments(args);

        return f;
    }

    /**
     * When creating, retrieve this instance's number from its arguments.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mNum = getArguments() != null ? getArguments().getInt("num") : 1;
    }

    /**
     * The Fragment's UI is just a simple text view showing its
     * instance number.
     */
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.hello_world, container, false);
        View wv = v.findViewById(R.id.webview);
        WebView webView = ((WebView)wv);

        webView.loadUrl("http://www.google.at");
        webView.setWebViewClient(new MyWebViewClient());

        return v;
    }
}

public static class MyWebViewClient extends WebViewClient {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String urlString) {

        handleURLRequest("modal");
        return false;
    }

    private void handleURLRequest(String transitionStyle){

        // here I want to replace the Fragment with a new one.

    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:41:09.493

终于我明白了。我通过我的 WebViewClient 传递了 Web 实例，我在其中处理 URL 请求并想要执行片段事务。

在那里我调用`instanceOfWeb.getActivity().getSupportFragmentManager().beginTransaction()`初始化片段事务。

# android - ExpandableListView 中的错误

> ID：12990275
> 
> 赞同：1
> 
> 时间：2012-10-20T16:11:50.750
> 
> 标签：android, expandablelistview, expandablelistadapter

这是我的 ExpandableList 活动的代码

```
public class ExpenseEditorActivity extends ExpandableListActivity {
    MyDOA projedit = new MyDOA(ExpenseEditorActivity.this, Environment.getExternalStorageDirectory());
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        lv_Expenses = getExpandableListView();
        projedit.open();
        fillExpenseList();
        lv_Expenses.setAdapter(exp_adapter);
    }

    public  void fillExpenseList(){
        Cursor groupCursor=projedit.fetchGroup(SelectProjectActivity.sel_id);
        startManagingCursor(groupCursor);
        groupCursor.moveToFirst();
        exp_adapter=new MyExpandableListAdapter(groupCursor,this, R.layout.expense_list_expandableitem, R.layout.expense_list_item,new String[]{"expdate"}, new int[]{R.id.label_date},new String[]{"expname","expamount"},new int[]{R.id.label_eh,R.id.label_amount});

    }

    public class MyExpandableListAdapter extends SimpleCursorTreeAdapter {
        public MyExpandableListAdapter(Cursor cursor, Context context,int groupLayout, 
                int childLayout, String[] groupFrom, int[] groupTo, String[] childrenFrom, int[] childrenTo) {
            super(context, cursor, groupLayout, groupFrom, groupTo,childLayout, childrenFrom, childrenTo);
        }

        @Override
        protected Cursor getChildrenCursor(Cursor groupCursor) {
            Cursor childCursor= projedit.fetchChildren(SelectProjectActivity.sel_id, groupCursor.getString(0));            
            startManagingCursor(childCursor);
            childCursor.moveToFirst();
            return childCursor;
        }
    }
} 
```

只要可展开列表视图未展开（这是默认设置），活动运行良好但当我单击“组”展开时，我收到以下 logcat 错误

```
FATAL EXCEPTION: main java.lang.IllegalStateException: get field slot from row 1 col -1 failed 
    at android.database.CursorWindow.getLong_native(Native Method) 
    at android.database.CursorWindow.getLong(CursorWindow.java:412) 
    at android.database.AbstractWindowedCursor.getLong(AbstractWindowedCursor.java:108)
    at android.widget.CursorTreeAdapter$MyCursorHelper.getId(CursorTreeAdapter.java:437)
    at android.widget.CursorTreeAdapter.getGroupId(CursorTreeAdapter.java:192)
    at android.widget.ExpandableListConnector.getItemId(ExpandableListConnector.java:421)
    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1992)
    at android.os.Handler.handleCallback(Handler.java:587) 
    at android.os.Handler.dispatchMessage(Handler.java:92) 
    at android.os.Looper.loop(Looper.java:130) 
    at android.app.ActivityThread.main(ActivityThread.java:3687) 
    at java.lang.reflect.Method.invokeNative(Native Method) 
    at java.lang.reflect.Method.invoke(Method.java:507) 
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 
    at dalvik.system.NativeStart.main(Native Method) 
```

有人可以阅读此内容并告诉我为什么单击任何“组”时会出现这些错误。

此外，如果我在我的代码中将所有组设置为扩展。活动一开始，我就会得到同样的错误（显然）

编辑

```
public Cursor fetchChildren(int i,String date){
Cursor cursor=database.query("expense,expensehead", new String[]{"expense._id","expensehead.expname","expense.expamount","expensehead._id"},
"expense.project_id=\""+i+"\" and expensehead.project_id=\""+i+"\" and expense.exphead_id=expensehead._id and expense.expdate=\""+date+"\"", null, null, null, null);
return cursor;
}

public Cursor fetchGroup(int i){
Cursor cursor=database.query("expense", new String[]{"expdate"}, "project_id=\""+i+"\"",null, "expense.expdate", null, null);
return cursor;
} 
```

我的数据库看起来像这样

```
database.execSQL("create table project(_id integer primary key autoincrement, "+
                "name text not null, " +
                "amount real not null, " +
                "startdate text not null, " +
                "enddate text not null, "+
                "avgbase integer not null);");
        database.execSQL("create table expensehead(_id integer primary key autoincrement, "+
                "expname text not null, "+
                "project_id integer not null);");
        database.execSQL("create table expense(_id integer primary key autoincrement, "+
                "expamount real not null, "+
                "expdate text not null, "+
                "exphead_id integer not null, "+
                "project_id integer not null);"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:28:08.467

来自[CursorTreeAdapter 的文档](http://developer.android.com/reference/android/widget/CursorTreeAdapter.html)

> 将一系列游标中的数据公开给 ExpandableListView 小部件的适配器。顶级游标（在构造函数中给出）公开组，而从 getChildrenCursor(Cursor) 返回的后续游标公开特定组中的子项。游标必须包含名为“_id”的列，否则此类将不起作用。

如果我错了，请纠正我，但要确保你`groupCursor`也有`_id`你需要将你的组字段放在一个单独的表中。

所以我用`_id`pk 制作了一个日期表，该列表现在工作正常。

# rest - REST API：POST/PUT 一个 JSON 对象 VS POST/PUT Key/Value 参数

> ID：12990281
> 
> 赞同：0
> 
> 时间：2012-10-20T16:12:33.323
> 
> 标签：rest, backbone.js, restkit

有没有人可以帮助我决定哪一个是最佳实践：

*   使用 json 对象在 REST API 上进行 POST/PUT
*   改用键/值参数？

我意识到 Backbone.js 和 Restkit(IOS) 更多的是面向 json 对象的 post/put，但是当你想做一个开放的第三方 API 时，你如何决定什么是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:00:39.033

我认为使用 JSON 发送数据会赢得更多粉丝。

服务器不返回键/值对，主要是 JSON 或 XML。因此，前端框架主动使用与导入相同的格式进行导出，以保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T16:57:08.853

将纯 JSON 对象发送到服务器非常容易。在框架的情况下，它允许您减少代码库（它与保持事物的一致性无关）。但是您可能面临的问题是，您始终必须先解码 JSON，然后才能了解其中的内容。有些人可以向您发送带有深度嵌套等的巨大的类似 JSON 的字符串。你的 CPU 必须处理对话过程。Facebook、Twitter、亚马逊、Instagram 正在使用字段。Github 使用对象。同时它有5000个req​​。限时一天。我不确定那是你需要的。请三思而后行。

# c - glib 正则表达式不能在 c 中工作

> ID：12990282
> 
> 赞同：1
> 
> 时间：2012-10-20T16:12:39.630
> 
> 标签：c

为什么 \w 模式不能匹配？许多模式不能工作，例如：\s

我的操作系统是 Mac

我想可能会遗漏一些东西；

该代码仅匹配字符'w'，不要山姆。

谢谢你的帮助

```
//
//  main.c
//  test
//
//  Created by SamPeng on 12-9-22.
//  Copyright (c) 2012年 SamPeng. All rights reserved.
//

#include <stdio.h>
#include <sys/types.h>
#include <regex.h>
#include <string.h>

int main(int argc, const char * argv[])
{
    int status,i;
    int cflags = REG_EXTENDED;
    regmatch_t pmatch[1];
    const size_t nmatch=1;
    regex_t reg;
    const char *pattern="\\w";
    char *buf = "sam@sampengw.org";

    regcomp(&reg, pattern, cflags);
    status = regexec(&reg, buf, nmatch, pmatch, 0);

    if(status == REG_NOMATCH)
        printf("No Match \n");
    else if(status == 0){
        printf("Match:\n");
        for (i=pmatch[0].rm_so; i<pmatch[0].rm_eo; ++i) {
            putchar(buf[i]);
        }
        printf("\n");
    }
    regfree(&reg);
    return 0;
} 
```

补充：是的，我知道这项工作是 POSIX Base reg，如何更改？我不想使用强大的正则表达式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:22:30.173

Glib 正则表达式不支持`\`通用字符类的通用速记。它确实支持 POSIX 字符类（例如`[[:space:]]`），因此您可以根据需要使用它。否则，您可以显式使用不带速记的字符集（例如`[ \t\n]`）。

正则表达式手册页中有关于此的非常好的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:43:54.773

glib regex 模块支持[POSIX 扩展正](http://www.regular-expressions.info/posix.html#ere)则表达式，由于在 1986 年已经标准化，因此它只允许现代正则表达式语法的一小部分。对于像`\w`and这样的速记类`\s`，您需要[GNU 扩展](http://www.regular-expressions.info/gnu.html#ere)（在[Gnulib](http://www.gnu.org/software/gnulib/)中可用）或[PCRE图书馆](http://www.pcre.org/ "Perl 兼容的正则表达式")。

# c# - 如何更改 Windows 中的默认浏览器？

> ID：12990292
> 
> 赞同：2
> 
> 时间：2012-10-20T16:13:50.060
> 
> 标签：c#, browser, registry, defaults, default-browser

我用 C# 为几个家庭成员创建了一个简单的浏览器。我想从安装程序或程序将其设置为默认浏览器。当 Chrome 或 Firefox 询问您是否要将其设置为默认值时，我想做与 Chrome 或 Firefox 相同的事情。我可以设置命令行处理，我只需要知道如何设置默认浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:56:14.483

也许[http://www.windowsitpro.com/article/configuration/how-can-i-configure-the-default-internet-browser-](http://www.windowsitpro.com/article/configuration/how-can-i-configure-the-default-internet-browser-)有你想要的信息。所以你可以在启动时检查这些条目，它们不是你想要的，你可以设置它们！

创建自己的浏览器后，我假设您能够使用 Microsoft.Win32.Registry 并将其转换为您自己的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T14:21:49.090

是的，您可以使用@Mattias 告诉您的注册表项来更改它。但这是一个非常糟糕的主意，如果这样做会损害用户体验。

在企业环境中，域策略已经支持实现这一目标。

您还可以使用 GPedit.msc 建立本地（或域）策略。更改注册表项或使用 gpedit.msc ，即使在您的家庭中也不会伤害用户体验，这对受影响的人来说是非常糟糕的。任何人都必须自由选择他们想要的浏览器，即使是糟糕的浏览器。

# list - 方案：找出“复杂”元素是否在“复杂”列表中

> ID：12990296
> 
> 赞同：3
> 
> 时间：2012-10-20T16:14:11.567
> 
> 标签：list, scheme, lisp, member

我正在使用方案实施的 R5RS 标准。

现在想象你必须找出一个元素'（2 3 4）是否在列表'（1 2 3 4）中。

至于示例，更严格地说，您希望：

```
1\. (is-in? '(2 3 4) '(1 2 3 4)) -> #f
2\. (is-in? '(2 3 4) '(1 (2 3 4)) -> #t 
```

问题：如何获得这种行为，如示例 1 所示？

让我解释一下：当你搜索一个列表时，你可以使用或者`car`获取`cdr`它的部分。现在，如果您递归地遍历列表，您最终会得到：

```
3\. (cdr '(1 2 3 4)) -> '(2 3 4)
4\. (cdr '(1 (2 3 4)) -> '((2 3 4)) 
```

所以最终，我们得到了 2 个列表。您可以在这里看到，子列表 '(2 3 4) 包含在 3 和 4 的**结果**中。

请看3和4与1和2的矛盾：而'(2 3 4)不包含在'(1 2 3 4)中，递归调用cdr返回'(2 3 4)，**等于**'( 2 3 4) - 并使用**相等？**函数，在递归调用中的某个地方，我们最终得到 1 和 2 的 #t：

```
5\. (is-in? '(2 3 4) '(1 2 3 4)) -> #t
6\. (is-in? '(2 3 4) '(1 (2 3 4)) -> #t 
```

那么如何从 1 中获得这种行为呢？我想要一个函数，它适用于所有不同类型的数据。这是我的函数，它像 5 和 6 一样工作（通过应该像 1 和 2 一样工作）：

```
(define or (lambda (x y)
             (cond ((eq? x y) (eq? x #t))
                   (#t #t)
                   )
             )
  )

(define and (lambda (x y)
              (cond ((eq? x y) (eq? x #t))
                    (#t #f)
                    )
              )
  )

(define atom? (lambda (x)
                (not (pair? x))
                )
  )

(define length (lambda (x)
                       (cond ((eq? x '()) 0)
                             ((atom? x) 1)
                             (#t (+ (length (car x)) (length (cdr x))))
                             )
                       )
  )

(define equal? (lambda (x y)
                 (cond ((and (atom? x) (atom? y)) (eq? x y))
                       ((not (eq? (length x) (length y))) #f)
                       ((not (and (pair? x) (pair? y))) #f)
                       (#t (and (equal? (car x) (car y)) (equal? (cdr x) (cdr y))))
                       )
                 )
  )

(define is-in? (lambda (x y)
                 (cond ((equal? x y) #t)
                       (#t (cond ((pair? y) (or (is-in? x (car y)) (cond ((eq? (length y) 1) #f)
                                                                          (#t (is-in? x (cdr y)))
                                                                          )))
                                 (#t #f)
                                 )
                           )
                       )
                 )
  ) 
```

**更新**：

我想要的是有一个**通用**函数，它可以告诉你某个**对象**是否在另一个**对象**内部。我命名实体**对象**是为了强调该函数应该与任何输入值一起工作，无论是简单的还是复杂的，就像地狱一样。

示例用法：

```
1\. (is-in? 1 '(1 2 3)) ;-> #t
2\. (is-in? '(1) '(1 2 3)) ;-> #f
3\. (is-in? '(2 . 3) '(1 2 . 3)) ;-> #f
4\. (is-in? '(2 . 3) '(1 (2 . 3))) ;-> #t
5\. (is-in? '2 '(1 2 . 3)) ;-> #t
6\. (is-in? '(2) '(1 2 . 3)) ;-> #f
7\. (is-in? '(1 2 (3 4 (5 6 . (7 . 8)) 9) 10 11 (12 . 13)) '(1 (2 3 ((4 ((6 (3 . ((1 2 (3 4 (5 6 . (7 . 8)) 9) 10 11 (12 . 13)))) 3) 4)) 5) 2))) ;-> #t
8\. (is-in? '(2 3 4) '((1 (2 3 4)) (1 2 3 4))) ;-> #t
9\. (is-in? '(2 3 4) '(1 2 3 4)) ;-> #f
10\. (is-in? '(2 3 4) '(1 (2 3 4))) ;-> #t
11\. (is-in? '(1) '(1)) ;-> #t 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:33:05.073

```
(define (is-in? e lst)
   (cond ((null? lst) #f) ; if list is empty, we failed
         ((eq? e (car lst)) #t) ; check 1st element of list
         ((list? (car lst)) (is-in? e (append (car lst) (cdr lst)))) ; search inside car if it is a list
         (#t (is-in? e (cdr lst))))) ; check rest of list 
```

您可以`eq?`用更精细的东西替换来处理其他平等定义。

注意：这假设所有序列都是列表；您必须对其进行调整以处理不是列表的点对。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T16:46:57.453

首先 - 你为什么要重新定义`and`,`or`和？这些是内置的原语。你的定义也是错误的，应该是：`equal?``length``atom?`

```
(define (atom? x)
  (and (not (pair? x))
       (not (null? x)))) 
```

我想你需要从头开始实现这个作为家庭作业的一部分。让我们看看如何做到这一点，填空以获得您的答案：

```
(define (is-in? ele lst)
  (or <???>                          ; trivial case: ele == list
      (member? ele lst)))            ; call helper procedure

(define (member? ele lst)
  (cond ((null? lst)                 ; if the list is empty
         <???>)                      ; then the element is not in the list
        ((atom? lst)                 ; if the list is not well-formed
         (equal? <???> <???>))       ; then test if ele == list
        (else                        ; otherwise
         (or (equal?  ele <???>)     ; test if ele == the 1st element in the list
             (member? ele <???>)     ; advance the recursion over the `car`
             (member? ele <???>))))) ; advance the recursion over the `cdr` 
```

请注意，需要第二种情况，`member?`因为在给出的示例中存在格式错误的列表（以非空值结尾）。上述解决方案将正确处理问题中提供的所有示例。

# java - httpClient.execute 没有回复

> ID：12990297
> 
> 赞同：2
> 
> 时间：2012-10-20T16:14:16.237
> 
> 标签：java, android, https

我想向包含 .csv 文件的页面发出请求，将其取回并解析。我一直在寻找很多，我发现了很多关于访问安全连接和东西的问题，但我认为我的问题是不同的。下面是我的代码：

```
protected String doInBackground(Void... params) {           

        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpGet httpGet = new HttpGet("https://recursos-data.buenosaires.gob.ar/bicicletas-publicas/estaciones-bicis.csv");

        String text = null;
        try {
            HttpResponse response = httpClient.execute(httpGet, localContext);
            Log.v("response code", response.getStatusLine()
                    .getStatusCode() + ""); 
            HttpEntity entity = response.getEntity(); 
```

当我调试它并到达 HttpResponse response = httpClient... 行时，程序不会抛出任何异常，但它也不会继续运行。它只是挂在那里。我不知道问题是什么。我以前用过这段代码。

我使用的是安卓 2.2。有任何想法吗？

# r - 扩展我的插值网格以在 R 中进行克里金法

> ID：12990298
> 
> 赞同：3
> 
> 时间：2012-10-20T16:14:27.237
> 
> 标签：r, spatial-interpolation

我想创建一个由空间数据点组成的插值网格，以便以后在 R 中用于克里金法。我一直在使用 sp 和 gstat 包。我正在使用的代码有效，但我的网格不包括所有点，我想扩展它，但我似乎无法正确处理。

我正在使用的代码在这里（我的 data.frame 是 kr.data）：

```
x.range <- as.integer(range(kr.data@coords[,1]))
y.range <- as.integer(range(kr.data@coords[,2]))
data.grd <- expand.grid(x=seq(from=x.range[1], to=x.range[2], by=0.5),  
y=seq(from=y.range[1], to=y.range[2], by=0.5))

coordinates(data.grd) <- ~x+y
gridded(data.grd) <- TRUE
plot(data.grd, cex=0.5)
points(kr.data, pch=1, col='red', cex=0.7) 
```

我想添加输出以显示集中在右下角的点，远离网格，但我是新手，不知道如何添加。任何人都可以提供有关在哪里可以找到帮助使用空间数据制作网格或在哪里更改我的代码的建议吗？当我更改代码以扩展网格时，我的数据点不再可见。我是在 R 中处理空间数据的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T18:51:44.103

整数导致的截断`as.integer`可能会切断范围高端的值。请尝试：

```
x.range <- as.integer(range(kr.data@coords[,1])) + c(0,1)
y.range <- as.integer(range(kr.data@coords[,2])) + c(0,1) 
```

# c# - 使用 Response.Redirect() 时未触发 Page_Load 事件

> ID：12990299
> 
> 赞同：1
> 
> 时间：2012-10-20T16:14:28.727
> 
> 标签：c#, asp.net

我的 Web 应用程序中有两个表单（Page1 和 Page2）。现在 Page1 有一个网格，我将在其 row_command 事件上转到 Page2。在 Page2 的加载事件中，我正在检查一个条件，如果为假，我将使用 Response.Redirect() 转到 Page1。

现在，当我从 Page2 转到 Page1 时，Page1 的加载事件没有被触发。我已经使用缓存清除和 response.end ，但它没有帮助。但是当我使用 Server.Transfer 时，Page1 的加载事件被触发了。

等待你的回应。伙计们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:38:14.720

它应该在 Response.Redirect 期间被调用。确保在页面加载的任何地方都没有 IsPostBack 检查。

# git - `git commit` 是否提交未添加的更改

> ID：12990308
> 
> 赞同：1
> 
> 时间：2012-10-20T16:15:42.387
> 
> 标签：git

我正在尝试使用 Scott Chacon 的“Pro Git”一书来学习 git。在解释如何暂存修改后的文件（第 18 页）时，我理解`git add`文件被安排提交，然后提交`git commit`。它提到提交已完成，只有添加的更改才会被实际提交，如果我再次更改文件，我必须在提交之前再次添加它，以便所有更改都被提交。文字说：

> 事实证明，Git 会完全按照您运行`git add` 命令时的状态暂存文件。如果您现在提交，则上次运行`git add` 命令时的文件版本是它将如何进入提交，而不是版本运行时在工作目录中显示的文件`git commit`。如果在运行后修改文件`git add` ，则必须`git add`再次运行以暂存文件的最新版本。

但是，我自己尝试时看到了不同的行为：

```
$ git status              #start clean
#On branch master
nothing to commit (working directory clean)

$ echo "hello" >> README.TXT 
git-question> git add README.TXT #added change to README

$ git status 
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
# 
#   modified:   README.TXT
#

$ echo "good bye" >> README.TXT            #change README after adding
$ git status #now 'hello' is added to be committed but not 'good bye'
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   modified:   README.TXT
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   README.TXT
#

$ git commit -m "only hello" README.TXT        #commit, i would expect just 'hello' gets commited
[master 86e65eb] only hello
 1 file changed, 2 insertions(+)

$ git status         #QUESTION: How come there's nothing to commit?!
# On branch master
nothing to commit (working directory clean) 
```

所以问题是：不应该`git commit`只提交添加的更改`git add`吗？如果是这样，为什么即使我没有添加它，它也会提交第二次更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:22:38.437

`git commit`将提交当前在索引中的内容以及您明确添加的内容。

但是，在您的示例中，您正在执行`git commit README.TXT`的操作将提交您指定的文件，即当前文件`README.TXT`。只需`git commit -m "only hello"`提交索引即可。

# c# - 可访问性不一致：字段类型“世界”的可访问性低于字段“frmSplashScreen”

> ID：12990309
> 
> 赞同：27
> 
> 时间：2012-10-20T16:15:45.327
> 
> 标签：c#, field, restriction

我有这个错误称为不一致的可访问性：

> 字段类型“world”比字段“frmSplashScreen”更难访问

在我的代码中有一个名为的公共部分类`frmSplashScreen`

还有一个公共类叫`world`

导致错误的行是：

```
private world currentWorld; 
```

上面的行在类中`frmSplashScreen`

是什么导致了问题？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-11-07T10:27:49.910

当您没有将您的类“世界”初始化为公共时，也会发生这种情况

你应该做 ：

```
public class world 
```

代替 ：

```
class world 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-20T16:20:32.277

通常发生这种情况是因为您的字段是`private`. 您必须将其更改为`public`：

```
public world currentWorld; 
```

有关这方面的更多信息，请查看此处：[使用可访问性级别的限制（C# 参考）](http://msdn.microsoft.com/en-us/library/cx03xt0t.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-25T06:01:05.827

您不能 `private`在该语句中使用访问说明符

```
 Public class world 
```

将解决这个问题

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-02-09T20:05:36.940

另外，我在`public`访问修饰符上遇到了这样的错误。解决方案是将`{get;set;}` getter和setter添加到属性

# winforms - WinForm 文本框：覆盖操作系统级复制/粘贴的 MenuStrip 键盘快捷键

> ID：12990314
> 
> 赞同：1
> 
> 时间：2012-10-20T16:17:03.310
> 
> 标签：winforms, textbox, copy, paste

**更新：** 我已经找出问题的根源，现在正试图找出最佳解决方案

我有一个带有自定义 MenuStrip 的表单，其中包含各种花里胡哨。这里需要注意的是，我的许多 MenuStrip 项目都有键盘快捷键 - 即用于剪切/复制/粘贴的快捷键。

似乎此 MenuStrip 的存在覆盖（并因此取消）我的文本框（和其他控件）的默认剪切/复制/粘贴键盘快捷键行为。

他们都是。

.

我真的不能说我有 MenuStrip 剪切/复制/粘贴选项的*理由*，除了我希望在那里看到它们的事实。这就是 Office 类型程序的运行方式，也是用户（包括我自己）所期望的。

我可以从 MenuStrip 中删除剪切/复制/粘贴选项，但那将是承认失败！那么，如何防止过度设计的 MenuStrip 强迫我为每个对剪切/复制/粘贴友好的控件实现自定义代码？

.

* * *

** 原帖： **​​我在工具栏中有一个 TextBox 控件，将在整个程序中使用。想象一下，当默认情况下不支持本机操作系统级别的复制/粘贴事件时，我会感到惊讶。

当然，我可以手动编写代码，但是当我右键单击控件时，Cut/Copy/Paste 已经内置。如何利用这个现有功能？

我认为使用 Ctrl+C、P 和 X 添加 KeyDown 事件大约是我应该编写的最大代码。对于那些事件，我只是调用一个内置方法或其他东西。那，或者找到一个启用本机剪切/复制/粘贴的设置。

我忽略/错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:37:29.503

除非您覆盖[`ContextMenu`](http://msdn.microsoft.com/en-us/library/system.windows.forms.contextmenu.aspx)or `ContextMenuStrip`，否则在 TextBox 控件上测试本机复制和粘贴确实有效，在这种情况下，您将需要使用[ClipBoard 类](http://msdn.microsoft.com/en-us/library/system.windows.clipboard.aspx)自己实现它。

* * *

在进一步查看它时，这篇[MSDN 论坛文章](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/1a4c465c-2fda-445c-a773-a79b007a9a9f)讨论了使用 SendMessage 方法将命令发送到本机文本框控件。这是在自定义文本框中实现的，听起来就像您正在做的那样。

小摘录见文章进一步实现：

```
protected void itemCut_Click(object sender, EventArgs e)
{
   SendMessage(this.Handle, TextBoxMessages.WM_CUT, 0, 0);
}

public static class TextBoxMessages
{
    public const int EM_UNDO = 0x00C7;
    public const int WM_CUT = 0x0300;
    public const int WM_COPY = 0x0301;
    public const int WM_PASTE = 0x0302;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:19:26.983

**简单的解决方案：**在 Click 事件中使用 SendKeys.Send() 调用。

```
SendKeys.Send("^X"); 
```

我正在做一些更复杂的事情，所以这里是详细信息：我正在制作几个表单，它们都共享一些自定义控件：MenuStrip、StatusStrip 和一些其他自定义控件。我决定让所有表单都从同一个基类继承，以允许共同实现很多东西。

```
public partial class CommonFormBase : Form
{
    private void Initialize()
    {
        //Bind click event for custom MenuStrip to events in the local Form
        CommonMenuStrip.Edit_Cut.Click += new EventHandler(Edit_Cut_Click);
        CommonMenuStrip.Edit_Copy.Click += new EventHandler(Edit_Copy_Click);
        CommonMenuStrip.Edit_Paste.Click += new EventHandler(Edit_Paste_Click);
    }

    //Implement Click events for the MenuStrip by calling local methods
    internal void Edit_Cut_Click(object sender, EventArgs e) { Cut(); }
    internal void Edit_Copy_Click(object sender, EventArgs e) { Copy(); }
    internal void Edit_Paste_Click(object sender, EventArgs e) { Paste(); }

    //Generic implementation of common commands for the CommonFormBase
    public virtual void Cut() { SendKeys.Send("^X"); }
    public virtual void Copy() { SendKeys.Send("^C"); }
    public virtual void Paste() { SendKeys.Send("^V"); }
} 
```

我在 Form 级别（不是 MenuStrip 级别）实现了 MenuStrip 的单击事件，但在那种情况下，我只调用了一个通用方法，它执行所有代码。在这个例子中，它是多余的，但我有其他 MenuStrip 命令会改变不同子窗体的功能，所以我认为让它们都工作相同会更容易。

无论如何，这几乎可以完美地工作！它似乎将快捷键激活的 MenuStrip_Click 事件推送到底层控件（或者可能是表单？），然后实现默认的快捷键事件。

它唯一做错的事情是它仅在您执行 Ctrl + V + V + V ... 或按住 Ctrl + V 时触发一次。不过，这只是*触发器*无法识别多个事件的问题，而不是解决方案本身的问题。

# python - python中的数据插值

> ID：12990315
> 
> 赞同：3
> 
> 时间：2012-10-20T16:17:06.913
> 
> 标签：python, graph, plot, interpolation

我有四个一维列表：X1、Y1、X2、Y2。

*   X1 和 Y1 各有 203 个数据点。
*   X2 和 Y2 各有 1532 个数据点。
*   X1 和 X2 的间隔不同，但都测量时间。

我想绘制 Y1 与 Y2 的图表。

一旦我得到插值数据，我就可以很好地绘制，但想不出如何插值数据。我已经思考并研究了几个小时，但无法弄清楚。我不介意线性插值，但就是想不出办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:55:17.703

我认为这就是你想要的：

```
import numpy as np
import matplotlib.pyplot as plt

# first data set
X1 = np.linspace(0,1,203)
Y1 = np.sin(X1)

# second data set
X2 = np.linspace(0, 0.5, 1532)
Y2 = np.cos(X2)

# get interpolated values of Y1 evaluated at X2
Y1_interp = np.interp(X2, X1, Y1)

# plot interpolated Y1 vs Y2
plt.plot(Y1_interp, Y2)
plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:37:15.283

如果你使用 matplotlib，你可以调用`plot(X1, Y1, 'bo', X2, Y2, 'r+')`. 根据需要更改格式，但它可以很好地处理不同的长度。您可以提供两个以上，没有任何问题。

# php - 跳转到行号

> ID：12990318
> 
> 赞同：-1
> 
> 时间：2012-10-20T16:17:13.773
> 
> 标签：php, odbc

我已经成功地将我的 php 脚本连接到带有 odbc 的 transbase 数据库。这是一个我无法找到答案的简单问题：如何跳转到结果集中的特定行号？

编辑：这就是我现在处理结果集的方式`while ($row = odbc_fetch_array($rid))`，但我只想从第 1000 行开始，例如，不获取所有 999 直到该行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:19:49.737

根据 PHP 手册，odbc_fetch_array 的第二个参数允许您按数字获取行。

```
array odbc_fetch_array ( resource $result [, int $rownumber ] ) 
```

在此处查看手册以获取更多详细信息：http: [//php.net/manual/en/function.odbc-fetch-array.php](http://php.net/manual/en/function.odbc-fetch-array.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:21:50.357

如果您使用的是 PDO，那么您可以使用[PDOStatement::fetchAll()](http://php.net/manual/en/pdostatement.fetchall.php)将所有行返回到一个数组中，然后您可以通过索引访问该数组

```
$rows = $results->fetchAll();
$row = $rows[5]; // get row 6 (index starts at 0) 
```

# maven - Maven项目中的人工本地回购

> ID：12990319
> 
> 赞同：0
> 
> 时间：2012-10-20T16:17:21.263
> 
> 标签：maven, artifactory

我已经在 localhost 中设置了工件（我在设置服务器之前尝试使用 localhost），但是当我在我的 maven 项目中使用这个 repo 时，我无法检索我的库。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T17:40:47.427

**Artifactory**为您提供了一个[**小实用程序**](http://wiki.jfrog.org/confluence/display/RTF/Configuring+Artifacts+Resolution)，它可以根据 Artifactory 中配置的存储库和您的选择**生成**一个**Maven 设置**文件；假设您的存储库已正确配置，此实用程序通常会做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:46:16.177

尝试（将 id ClaudioStas 更改为中央）：

```
<repositories>
        <repository>
          <snapshots>
            <enabled>false</enabled>
          </snapshots>
          <id>central</id>
          <name>libs-release</name>
          <url>http://localhost:8081/artifactory/libs-release</url>
        </repository>
        <repository>
          <snapshots />
          <id>snapshots</id>
          <name>libs-snapshot</name>
          <url>http://localhost:8081/artifactory/libs-snapshot</url>
        </repository>
      </repositories>
      <pluginRepositories>
        <pluginRepository>
          <snapshots>
            <enabled>false</enabled>
          </snapshots>
          <id>central</id>
          <name>plugins-release</name>
          <url>http://localhost:8081/artifactory/plugins-release</url>
        </pluginRepository>
        <pluginRepository>
          <snapshots />
          <id>snapshots</id>
          <name>plugins-snapshot</name>
          <url>http://localhost:8081/artifactory/plugins-snapshot</url>
        </pluginRepository>
      </pluginRepositories> 
```

# ios - iOS 透明度带来的性能问题

> ID：12990321
> 
> 赞同：0
> 
> 时间：2012-10-20T16:17:26.853
> 
> 标签：ios, performance, transparency

我刚刚通过向图像蒙版添加纯色和渐变以编程方式生成了具有透明度的渐变。然后我将生成的图像应用到我的 UIView.layer.content。视觉效果很好，但是当我在透明度下滚动对象时，应用程序变得笨拙。有没有加快速度的方法？

我最小的想法是缓存生成的渐变。另一个想法是创建一个只有一个像素宽的渐变并将其拉伸以覆盖所需区域。这些方法中的任何一种都会有助于提高性能吗？

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:51:26.913

我记得读过（虽然我不记得在哪里）核心图形渐变可以对性能产生显着影响。如果可以的话，使用 png 作为渐变应该可以解决您看到的问题。

# java - 什么是用于杰克逊 json 转换的好的内置数据结构？

> ID：12990323
> 
> 赞同：0
> 
> 时间：2012-10-20T16:17:37.710
> 
> 标签：java, json, spring, spring-mvc, jackson

在我的 ajax 响应中，我想返回一个 JSON 结果。

我正在使用 spring mvc，并且我的 pom.xml 中已经有 jackson。

现在在我的控制器的操作中，我有：

```
 @ResponseBody
    @RequestMapping(value = "/someAjaxResponse", method = RequestMethod.POST)
    public String someAjaxResponse(HttpServletRequest request, HttpServletResponse response) {

    } 
```

你建议我使用什么内置的java数据结构/类型，然后我可以使用jackson将它转换为json？

我不想为每个响应类型创建一个新类，所以我正在为此寻找一个好的通用 java 类型。

建议？

对于转换为 json，哪种方法最好，因为我知道杰克逊有多种转换对象的方法，比如我相信你创建一个实例并在整个应用程序中重用的 ObjectMapper？那么这是否意味着我将其标记为最终版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:45:15.570

答案取决于您的用例。我的建议是您创建一个完全符合您需求的自定义值对象，将其返回，然后让 Jackson 为您处理序列化：

```
@ResponseBody
@RequestMapping(value = "/someAjaxResponse", method = RequestMethod.POST)
public CustomValueObject someAjaxResponse(HttpServletRequest request, HttpServletResponse response) {

} 
```

您所要做的就是将`<mvc:annotation-driven />`or添加`@EnableWebMvc`到您的应用程序上下文中，将 Jackson 依赖项添加到您的类路径中，然后该对象将自动序列化为 JSON，因为您使用了`@ResponseBody`注释。

阅读`MappingJacksonHttpMessageConverter`Spring 参考手册中的更多信息：

*   [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config-enable](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config-enable)
*   [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/remoting.html#rest-mapping-json-converter](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/remoting.html#rest-mapping-json-converter)

请注意，返回的对象可能具有复杂的结构。想象一下，您想向客户端提供人员数据，然后您可以`Person`从控制器方法返回一个对象：

```
public class Person {
    public String getFirstName() {...}
    public int getAge() {...}
    List<String> getEmailAddresses() {...}
    Address getAddress() {...}
}

public class Address {
    public String getStreet() {...}
    public int getHouseNumber() {...}
    public String getCity() {...}
    public int getZIP() {...}
    public String getState() {...}
} 
```

可以序列化为：

```
{
    "firstName": "John",
    "lastName": "Doe",
    "age": 42,
    "emailAddresses": [
        "john@doe.com",
        "john.doe@somewhere.com"
    ],
    "address": {
        "street": "First Avenue",
        "houseNumber": 123,
        "city": "Smallville",
        "ZIP": 12345,
        "state": "CA"
    }
} 
```

# javascript - 如何在 HTML IMG 标签中使用 JavaScript math.round？

> ID：12990324
> 
> 赞同：1
> 
> 时间：2012-10-20T16:17:52.203
> 
> 标签：javascript

背景：我有一个简单的网页，显示后院气象站的当前天气状况。我正在尝试在网站上添加 UV 图像。我对基本的 HTML 很满意，但 JavaScript 对我来说似乎是一门外语。我找到了关于`Math.round`在 JavaScript 中使用和调用图像的线程，但还没有弄清楚如何将两者结合起来。

我的天气软件输出带有一位小数点的紫外线指数。我想四舍五入到一个整数，然后使用该整数在网页上放置与该整数相关的图像。

我已经想出了如何`Math.round`用整数替换模板的 UV 标注。该软件的 UV 模板标签是`STAT$UV:CURRENT$`. 当我把它放在 JavaScript 中时（前后有文本以给出整个图像文件名），它看起来像这样：

```
UV_<script type="text/javascript">document.write(Math.round(STAT$UV:CURRENT$));</script>.gif 
```

正如预期的那样，这会`UV_X.gif`显示在我的网页上，其中 X 等于当前的紫外线指数。但是当我尝试将其包装在 IMG 标签中时，我无法获得我想要的结果。

我想我需要使用一个变量，但我不明白变量和调用图像所需的语法。

有什么建议么？

**[编辑]**

我在下面的答案中测试了三个建议。没有导致显示图像，所以我可能没有很好地解释我的问题。

天气软件在我的电脑上本地运行。它从室外气象站接收数据包，处理该数据，并将其显示在屏幕上。它还填充本地存储的模板，然后通过 FTP 将其上传到我的网站。除了服务器上的几个预打包脚本之外，所有内容都在本地处理。我的这些建议的测试页面位于 avon-weather.com/test.html 看看你是否看到我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:23:41.793

由于您使用的是服务器框架，因此您可能应该在服务器端对数字进行四舍五入。另外，尽量避免`document.write`，如果你不完全理解它可能会导致一些棘手的问题（特别是如果你正在混合服务器端和客户端渲染）。但是，这是一个如何在客户端执行此操作的示例：

```
<img id="myImage" />

<script type="text/javascript">
    var imgSrc = "UV_" + Math.round(STAT$UV:CURRENT$) + ".gif";
    document.getElementById("myImage").setAttribute('src', imgSrc);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:25:28.343

`document.write`不应该使用。现代的方式是：

```
<img id="set-me" />
...
<script>
  document.getElementByID("set-me").src = 
    "UV_"+Math.round(STAT$UV:CURRENT$)+".gif";
</script> 
```

如果你愿意使用 jQuery，

```
 <img id="set-me" />
 ...
 <script>
   $("#set-me").attr("src",
     "UV_"+Math.round(STAT$UV:CURRENT$)+".gif");
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:21:20.657

你不能只是把一个标签塞到一个`<script>`标签的中间就`<img>`指望它起作用。它可以与 PHP 一起使用，因为 PHP 是在服务器端独立于 HTML 处理的，但 JavaScript 是 HTML 中的一个元素。

相反，请尝试`document.write()`围绕整个`<img>`标签使用 uding，例如：

```
<script type="text/javascript">
  document.write('<img src="UV_'+Math.round(STAT$UV:CURRENT$)+'.gif"/>');
</script> 
```

# c# - 如何将 JSON 字符串化模型序列化为 ASP.NET MVC3 模型

> ID：12990326
> 
> 赞同：1
> 
> 时间：2012-10-20T16:18:05.990
> 
> 标签：c#, asp.net-mvc, json

我的 MVC 3 网站中有以下片段。

模型：

```
public class Item1
{
    [Display(Name = "Family name")]
    public string FamilyName { get; set; }

    [Display(Name = "Given name")]
    public string GivenName { get; set; }
} 
```

控制器方法：

```
public string SaveAsIs(string form_section11)
{
    //  method 1 works
    var viewModel = new JavaScriptSerializer().Deserialize<IDictionary<string, object>>(form_section11);

    //  method 2 gives empty viewModel2
    var viewModel2 = new JavaScriptSerializer().Deserialize<Item1>(form_section11);

    //  method 3 gives empty item1
    Mapper.CreateMap<IDictionary<string, object>, Item1>();
    Item1 item1 = Mapper.Map<IDictionary<string, object>, Item1>(viewModel);

} 
```

我发回的值是代表我的模型的 JSON.stringified 结构。字符串（为便于阅读而设计）显示为：

```
"{
\"item1.FamilyName\":\"Smith\",
\"item1.GivenName\":\"Jane\"
}" 
```

我想要做的是将字符串化的 JSON 转换为我的模型，但看不到如何做超出上述两次尝试或编写我自己的序列化程序 :-(

其他一切正常。任何人都有其他想法。谢谢。

## 更新 1

感谢 Darin，我有一个部分解决方案，即`item1.`在使用之前将其删除`JavaScriptSerializer`，如上所述。奇怪的是item1。在使用强类型模型时由 Razor、MVC 3 等添加。无论如何，我现在有一个解决方案 - 谢谢。

## 更新 2

在回答 Darin 下面的问题时，Item1 是我模型中的一个实体。模型看起来像：

```
public class ItemModel
{
    public Item1 item1 {get; set;}
    public Item2 item2 {get; set;}
} 
```

视图`@model ItemModel`与字段一起使用`@Html.EditorFor(m => m.item1.FamilyName)`。这两个实体在同一个屏幕上以不同的形式出现，我将它们返回为

```
 var form_section1Data = JSON.stringify($("#form_section1").formParams()); //item1
 var form_section1Data = JSON.stringify($("#form_section1").formParams()); //item2 
```

Ajax 调用包含：

```
data: JSON.stringify({ 
    form_section1: form_section1Data,
    form_section2: form_section2Data
}), 
```

我简化了最初的问题（试图提供帮助:-)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:26:38.920

`.`在属性名称中并不常见。例如，假设您有以下 javascript 对象：

```
var item = { familyName: 'Smith', givenName: 'Jane' }; 
```

以及以下控制器操作：

```
[HttpPost]
public ActionResult SaveAsIs(Item1 model)
{
    ...
} 
```

现在发送 AJAX 请求非常容易：

```
$.ajax({
    url: '@Url.Action("SaveAsIs")',
    type: 'POST',
    contentType: 'application/json;charset=utf-8',
    data: JSON.stringify(item),
    success: function (result) {

    }
}); 
```

这将在 POST 请求正文中发送以下有效负载：

```
{"familyName":"Smith","givenName":"Jane"} 
```

如您所见，属性名称中没有点。它们是有问题的，因为 ASP.NET MVC 用于反序列化 JSON 请求的默认 JavaScriptSerializer 无法轻松配置为对模型使用不同的属性名称。如您所知，.NET 对象的属性名称中不能有一个点。

另一方面，如果您绝对需要让这个 JSON 有效负载在属性名称中包含点，您可以编写一个[`custom value provider factory`](https://stackoverflow.com/a/11490539/29407)using [`JSON.NET`](http://james.newtonking.com/projects/json-net.aspx)，它允许您使用可以覆盖其名称的自定义属性来装饰您的视图模型属性。

# c# - 一个向上转换的对象是否可以再次向下转换而不为基类类型的每个派生类类型尝试转换？

> ID：12990327
> 
> 赞同：3
> 
> 时间：2012-10-20T16:18:17.500
> 
> 标签：c#, casting, downcast, upcasting

我有一个案例，其中给出了一个对象集合，这些对象都派生自同一个基类。如果我遍历集合并检查每个项目的类型，我可以看到该对象是派​​生类型，然后相应地处理它。我想知道的是，除了我已经在做的事情之外，是否还有一种更简单的方法来检查派生类型。通常不需要重复代码，所以我目前的方法对我来说似乎有点不对劲。

```
class A {}
class B : A {}
class C : A {}
class D : C {}

class Foo
{
    public List<A> Collection { get; set; }
}

class Bar
{
    void Iterate()
    {
        Foo f = new Foo();
        foreach(A item in f.Collection)
        {
            DoSomething(a);
        }
    }

    void DoSomething(A a)
    {
        ...

        B b = a as B;
        if(b != null)
        {
            DoSomething(b);
            return;
        }

        C c = a as C;
        if(c != null)
        {
            DoSomething(c);
            return;
        }

        D d = a as D;
        if(d != null)
        {
            DoSomething(d);
            return;
        }
    };

    void DoSomething(B a){};
    void DoSomething(C a){};
    void DoSomething(D a){};
} 
```

* * *

我正在使用一个 Web 服务，其中每个 Web 服务都必须具有相同的结果类型。

```
class WebServiceResult
{
    public bool Success { get; set; }
    public List<Message> Messages { get; set; }
}

class Message
{
    public MessageType Severity { get; set; } // Info, Warning, Error
    public string Value { get; set; } //
}

class InvalidAuthorization: Message
{
    // Severity = MessageType.Error
    // Value = "Incorrect username." or "Incorrect password", etc.
}

class InvalidParameter: Message
{
    // ...
}

class ParameterRequired: InvalidParameter
{
    // Severity = MessageType.Error
    // Value = "Parameter required.", etc.
    public string ParameterName { get; set; } //
}

class CreatePerson: Message
{
    // Severity = MessageType.Info
    // Value = null
    public int PersonIdentifier { get; set; } // The id of the newly created person
} 
```

目标是我们可以根据需要向客户端返回尽可能多的不同类型的消息。与每次 Web 服务调用获取一条消息不同，被调用者可以在一次行程中了解他们所有的错误/成功，并消除从消息中解析特定信息的字符串。

我最初考虑使用泛型，但由于 Web 服务可能具有不同的消息类型，因此该集合被扩展为使用基本消息类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:28:17.300

可以移动`DoSomething`到`A`并让每个子类提供自己的实现：

```
public abstract class A
{
    abstract void DoSomething();
}

void Iterate()
{
    Foo f = new Foo();
    foreach(A item in f.Collection)
    {
        item.DoSomething();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:25:22.830

一个想法是在您的基类或接口上使用通用约束。

```
public class MyClass<T> where T : BaseClass, IInterface
{
   public void executeCode<T>(T param) {};
} 
```

所以`MyClass<T>`只取某种类型，`executeCode`就会知道暴露了哪些方法，可以对传递的对象的数据进行哪些操作。这避免了强制转换的需要，因为您指定了必须遵守的合同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:22:25.073

```
typeof(ParentClass).IsAssignableFrom(typeof(ChildClass)); 
```

返回 true 是可以转换的。

也可以这样：

```
typeof(ParentClass).IsAssignableFrom(myObject.GetType()); 
```

但是在您的示例中，您实际上为每种对象类型调用了一个方法。所以无论如何你都需要演员表，除非你不介意重构没有重载集合。

如果你想保持过载，这样的事情：

```
foreach(A item in f.Collection)
{
    Type itemType = item.GetType();

    if (typeof(B).IsAssignableFrom(itemType)
        DoSomethingB(item);
    else if (typeof(C).IsAssignableFrom(itemType)
        DoSomethingC(item);
    //...
} 
```

**编辑：我更喜欢李的回答。将虚拟/覆盖函数添加到类类型将是一种更好的设计和更容易处理的方式，除非 DoSomething 真的与在类中无关。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T20:09:52.880

李是对的。让项目决定，做什么。它最清楚自己的类型，因此知道该做什么。你甚至可以给出一些标准的实现，如果它和 A 中的一样，不是抽象的，而是虚拟的。但是请注意，编译器不会要求实现。

```
public class A 
{
  public virtual DoSomething(){"What A needs doning!"}
}

public class B : A
{
  public override DoSomething() {"What B needs doing!"}
} 
```

另一种方法是使用接口。

```
public interface IAinterface 
{
  void DoSomething();
}

public class A : IAinterface
{
  void DoSomething(){...}
}

public class B : IAinterface
{
  void DoSomething(){...}
} 
```

这更像是 Lees 的建议，尽管接口和抽象基类在后台工作时有些不同。

我通常更喜欢上一个，因为我通常倾向于给基类一些标准行为，并且只在有不同的东西时实现派生类。

# object - 多种数据类型的对象

> ID：12990329
> 
> 赞同：5
> 
> 时间：2012-10-20T16:18:39.887
> 
> 标签：object, haskell, types, constructor

我需要为学校作业实现一个国际象棋游戏，并且您必须制作一个适用于同一棋盘上其他游戏的界面。因此，您必须实现棋子，但也必须实现其他游戏的棋子。

我试图这样做：

```
data ChessPiece = King | Queen | Knight | Rook | Bishop | Pawn deriving (Enum, Eq, Show)
data Piece = ChessPiece | OtherGamePiece deriving (Enum, Eq, Show)
data ColoredPiece = White Piece | Black Piece
data Board = Board { boardData :: (Array Pos (Maybe ColoredPiece)) } 
```

然后我尝试加载国际象棋游戏的开始：

```
beginBoard = Board (listArray (Pos 0 0, Pos 7 7) (pieces White ++ pawns White ++ space ++ pawns Black ++ pieces Black)) where
    pieces :: (Piece -> ColoredPiece) -> [Maybe ColoredPiece]
    pieces f = [Just (f Rook), Just (f Knight), Just (f Bishop), Just (f Queen), Just (f King), Just (f Bishop), Just (f Knight), Just (f Rook)]
    pawns :: (Piece -> ColoredPiece) -> [Maybe ColoredPiece]
    pawns f = (take 8 (repeat (Just (f Pawn))))
    space = take 32 (repeat Nothing) 
```

我收到错误“无法匹配预期类型`Piece' with actual type`ChessPiece' 在`f', namely`Rook 的第一个参数中' 在`Just', namely`(f Rook) 的第一个参数中' 在表达式中：Just (f Rook)”

所以，我觉得 ChessPiece 需要以某种方式“铸造”为（常规）棋子。（我知道，我使用的是命令式编程中的术语，但我希望我在这里清楚自己，如果需要，我很乐意让我的问题更清楚）。

我试图实现的结构是可能的吗？（有点像 OO 语言中的类结构，但随后应用于数据类型，其中一种数据类型是另一种数据类型的子数据类型，并且对象可以同时是两种数据类型。例如，Rook 是 ChessPiece，因此一块）我做错了什么？关于如何实现我需要的结构的任何建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T17:02:26.290

您所追求的通常称为子类型。大多数 OO 语言使用子类实现子类型化。

然而，Haskell 绝对不是一种面向对象的语言。事实上，它根本没有任何类型的子类型。令人高兴的是，您通常可以使用“参数多态性”实现大致相同的效果。现在，“参数多态性”是一个听起来很吓人的术语！这是什么意思？

事实上，它有一个非常简单的含义：您可以编写适用于*所有*（具体）类型的代码。您已经知道如何使用的`Maybe`类型就是一个很好的例子。类型定义如下：

```
data Maybe a = Just a | Nothing 
```

注意它是如何写的，`Maybe a`而不仅仅是`Maybe`; 这`a`是一个类型变量。这意味着，当您使用 时`Maybe`，您可以将其与*任何*类型一起使用。你可以有一个`Maybe Int`，一个`Maybe Bool`，一个`Maybe [Int]`甚至一个`Maybe (Maybe (Maybe (Maybe Double)))`。

您可以使用这种方法来定义您的电路板。对于基本的棋盘功能，您并不关心棋盘上实际上是什么“棋子”——有些动作对*任何*棋子都有意义。另一方面，如果您*确实*关心棋子的类型，那么您将关心*确切*的类型，因为每个游戏的规则都会有所不同。

这意味着您可以使用一些类型变量来定义您的棋盘。现在，您的董事会代表如下所示：

```
data Board = Board {boardData :: Array Pos (Maybe ColoredPiece)} 
```

由于您想将板推广到*任何*类型的部分，您需要添加一个类型变量而不是指定`ColoredPiece`：

```
data Board p = Board {boardData :: Array Pos p} 
```

现在您已经`Board`为您可以想象的任何片段类型定义了一个类型！

因此，要将此棋盘表示用于棋子，您需要将棋子的类型传递给您的新`Board`类型。这看起来像这样：

```
type ChessBoard = Board ColoredPiece 
```

（作为参考，`type`只需创建一个同义词——现在 writing`ChessBoard`完全等同于 writing `Board ColoredPiece`。）

所以现在，只要你有棋盘，就用你的新`ChessBoard`类型。

此外，您可以编写一些适用于*任何*电路板的有用函数。例如，让我们假设您想要做的只是获取一个片段列表。该函数的类型将是：

```
listPieces :: Board p -> [p] 
```

您可以使用函数类型中的类型变量来编写一大堆其他不关心实际部分的类似`p`函数。此功能现在适用于您提供的任何板，包括 a `Board ColoredPiece`，否则称为`ChessBoard`。

总之：你想`Board`多态地编写你的表示。这使您可以实现与想要尝试使用子类型相同的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T17:13:29.437

Tikhon 的解决方案是必经之路。仅供参考，请注意**类型**构造函数和**数据**构造函数之间的区别。就在这里，例如：

```
data ChessPiece = King | Queen | Knight | Rook | Bishop | Pawn deriving (Enum, Eq, Show)
data Piece = ChessPiece | OtherGamePiece deriving (Enum, Eq, Show) 
```

这是行不通的，因为您`ChessPiece`在第一行定义了一个类型构造函数，而在另一行定义了一个数据构造函数`ChessPiece`，它们不是一回事。类型构造函数说类似：“`ChessPiece`类型可以是 a `King`，或 a `Queen`，或 a...”，而数据构造函数只是创建通用数据（也恰好被称为`ChessPiece`）。

您可以做的是重新定义该`Piece`类型的第一个数据构造函数；一些名为的通用*数据*包含有关引擎盖下的*类型*`ChessPiece`的一些信息。以下类型检查： *`ChessPiece`*

 *```
data ChessPiece   = King | Queen | Knight | Rook | Bishop | Pawn deriving (Enum, Eq, Show)
data Piece        = ChessPiece ChessPiece | OtherGamePiece  -- note the change 
data ColoredPiece = White Piece | Black Piece 
```

你可以像这样改变你的功能：

```
pieces :: (Piece -> ColoredPiece) -> [Maybe ColoredPiece]
pieces f = [Just (f (ChessPiece Rook)), Just (f (ChessPiece Knight)), Just (f (ChessPiece Bishop)), Just (f (ChessPiece Queen)), Just (f (ChessPiece King)), Just (f (ChessPiece Bishop)), Just (f (ChessPiece Knight)), Just (f (ChessPiece Rook))] 
```

为了使类型构造函数和数据构造函数之间的区别更加明显，这里有一个限制版本，它为每个构造函数使用不同的名称：

```
data ChessRoyalty = King | Queen
data Piece        = ChessPiece ChessRoyalty | OtherGamePiece
data ColoredPiece = White Piece | Black Piece 
```*

# javascript - 这种风格的导航侧边栏叫什么？有没有开源的 Javascript 库？

> ID：12990330
> 
> 赞同：1
> 
> 时间：2012-10-20T11:30:55.047
> 
> 标签：javascript

我想为在线书籍构建侧边栏导航，就像苹果在这里所做的那样：

[http://developer.apple.com/library/ios/navigation/](http://developer.apple.com/library/ios/navigation/)

（注意它有可折叠的条目）

令我惊讶的是，我很难找到一个好的现成的 javascript 起点来构建。

这种风格的导航侧边栏叫什么？

有没有提供这种导航风格的开源 Javascript 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:53:42.643

我会使用 jQuery 展开折叠，一个很好的例子可以在这里找到[http://www.adipalaz.com/experiments/jquery/expand.html](http://www.adipalaz.com/experiments/jquery/expand.html)

您可以根据需要设置 div 的样式，并使其看起来像是菜单、索引等

# jquery - 使用 jQuery 根据用户交互隐藏/取消隐藏 div 内容

> ID：12990334
> 
> 赞同：0
> 
> 时间：2012-10-20T16:19:01.700
> 
> 标签：jquery, html

我有以下 HTML 结构

```
<div class="store"><a href="#">GERMANY</a></div>
<div class="store_details">
   <p>Stores in Germany</p>
</div>
</div>
<div class="store"><a href="#">ITALY</a></div>
<div class="store_details">
   <p>Stores in Italy</p>
</div>
</div>
<div class="store"><a href="#">FRANCE</a></div>
<div class="store_details">
   <p>Stores in France</p>
</div>
</div> 
```

我想做的是编写一个 jQuery 脚本，首先将隐藏每个商店的“store_details”div 的内容。当用户单击商店名称（国家/地区）时，脚本必须显示该“store_details”div 并隐藏其他“store_details”div 的内容。

我设法完成了 div 的初始隐藏，但我被其他步骤卡住了。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:27:17.720

代码 ：

```
$(document).ready(function(){
    $(".store_details").hide();
    $(".store a").click(function() {
        $(".store_details").hide();
        $(this).parent().next().show();
    });​
});​ 
```

工作[小提琴](http://jsfiddle.net/s62zN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:24:43.903

您应该能够通过搜索得到答案。无论如何都买，这应该让你去

CSS：

```
.store_details { display: none; } 
```

js：

```
$(function(){
    $('.store a').click(function(){ //listen for link clicks
         $('.store_details').hide(); //hide all store details
         $(this).closest('div.store').next('div.store_details').show(); //show the selected detail div
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:26:39.300

试试这个：

```
$(document).ready(function(){          /* when the page has loaded in the browser... */
   $('.store').click(function(){ /* ...bind a click event to the div element... */
    $('.store').removeClass('store_details'); /* When clicked, remove any 'store_details' class off boxSet elements */
    $(this).next().addClass('store_details'); /* ...and add the 'hilite' class to the clicked element */
});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T16:46:35.687

一种更健壮的方式（即使用子代而不是下一个，更正标记）：

[代码笔： http](http://codepen.io/anon/pen/idcro) ://codepen.io/anon/pen/idcro

```
$(function(){
    $('.store a').on('click', function(){
        var store_details = $('.store_details').hide();
        var l = $(this).parent().children('.store_details');
        l.show();
    });    
})(); 
```

# gradle - 如何在 BuildGradle 任务中使用 startParameters？

> ID：12990335
> 
> 赞同：17
> 
> 时间：2012-10-20T16:19:13.567
> 
> 标签：gradle

我想将`deployDir`（带有值`/my_archive`）传递给`uploadArchives`任务`my_project`：

```
task build (type: GradleBuild) {
        buildFile = './my_project/build.gradle'
        tasks = ['uploadArchives']
        /* startParameter =  [deployDir:"/my_archive"] ??? */      
} 
```

我不知道如何声明启动参数。我尝试了不同的方法，例如，

```
startParameter = [deployDir:"/my_archive"] 
```

没有成功。

如何在 GradleBuild 任务中声明[startParameter](http://gradle.org/docs/current/javadoc/org/gradle/StartParameter.html)？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-21T00:57:55.573

`deployDir`我假设您的意思是作为[项目属性](http://gradle.org/docs/current/userguide/tutorial_this_and_that.html#sec:gradle_properties_and_system_properties)传递。在这种情况下，您会发现[`setProjectProperties(Map)`](http://gradle.org/docs/current/javadoc/org/gradle/StartParameter.html#setProjectProperties%28java.util.Map%29)可以使用一种方法：

```
task build (type: GradleBuild) {
    buildFile = './my_project/build.gradle'
    tasks = ['uploadArchives']
    startParameter.projectProperties = [deployDir: "/my_archive"]
} 
```

这将使您能够`deployDir`从调用的构建脚本中作为变量访问：

```
uploadArchives {
 repositories {
  mavenDeployer {
   repository(url: deployDir)
   // --- or, if deployDir can be empty ---
   repository(url: project.properties.get('deployDir', 'file:///default/path'))
  }
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-01T03:06:55.910

我们可以通过api设置项目属性和系统属性

```
setProjectProperties(Map<String,String> projectProperties)  
setSystemPropertiesArgs(Map<String,String> systemPropertiesArgs) 
```

这是我本地的 startParameter 示例：

```
task startBuild(type: GradleBuild) {
StartParameter startParameter = project.gradle.startParameter;

Iterable<String> tasks = new ArrayList<String>();
Iterable<String> excludedTasks = new ArrayList<String>();

startParameter.getProjectProperties().each { entry ->
    println entry.key + " = " + entry.value;

    if(entry.key.startsWith('t_')){
        tasks << (entry.key - 't_');
    }

    if(entry.key.startsWith('build_') && "true" == entry.value){
        tasks << (':' + (entry.key - 'build_') +':build');
    }

    if(entry.key.startsWith('x_') && "true" == entry.value){
        excludedTasks << (entry.key - 'x_');
    }
}

startParameter.setTaskNames(tasks);
startParameter.setExcludedTaskNames(excludedTasks);

println startParameter.toString();
} 
```

我们可以从此链接[StartParameter引用 api](https://docs.gradle.org/current/javadoc/org/gradle/StartParameter.html)

当您需要自定义 gradle 构建逻辑时，start 参数在 gradle 中非常强大。

# type-conversion - 无法将 [] 字符串转换为 [] 接口 {}

> ID：12990338
> 
> 赞同：108
> 
> 时间：2012-10-20T16:19:25.040
> 
> 标签：type-conversion, go

我正在编写一些代码，我需要它来捕获参数并传递它们`fmt.Println`
（我想要它的默认行为，编写由空格分隔并后跟换行符的参数）。但是它需要`[]interface {}`但`flag.Args()`返回一个`[]string`.
这是代码示例：

```
package main

import (
    "fmt"
    "flag"
)

func main() {
    flag.Parse()
    fmt.Println(flag.Args()...)
} 
```

这将返回以下错误：

```
./example.go:10: cannot use args (type []string) as type []interface {} in function argument 
```

这是一个错误吗？不应该`fmt.Println`采取**任何**阵列？顺便说一句，我也尝试过这样做：

```
var args = []interface{}(flag.Args()) 
```

但我收到以下错误：

```
cannot convert flag.Args() (type []string) to type []interface {} 
```

有没有“去”的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-10-20T16:42:51.620

这不是错误。`fmt.Println()`需要一个`[]interface{}`类型。这意味着，它必须是一个`interface{}`值切片，而不是“任何切片”。为了转换切片，您需要循环并复制每个元素。

```
old := flag.Args()
new := make([]interface{}, len(old))
for i, v := range old {
    new[i] = v
}
fmt.Println(new...) 
```

您不能使用任何切片的原因是 a`[]string`和 a之间的转换`[]interface{}`需要更改内存布局并在 O(n) 时间内发生。将类型转换为`interface{}`需要 O(1) 时间。如果他们使这个 for 循环变得不必要，编译器仍然需要插入它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-01-31T05:27:32.140

在这种情况下，不需要类型转换。只需将`flag.Args()`值传递给`fmt.Println`.

* * *

> 问题：
> 
> 无法将 [] 字符串转换为 [] 接口 {}
> 
> 我正在编写一些代码，我需要它来捕获参数并通过 fmt.Println 传递它们（我想要它的默认行为，编写由空格分隔并后跟换行符的参数）。
> 
> 这是代码示例：
> 
> ```
> package main
> 
> import (
>     "fmt"
>     "flag"
> )
> 
> func main() {
>     flag.Parse()
>     fmt.Println(flag.Args()...)
> } 
> ```

* * *

> [包标志](https://golang.org/pkg/flag/)
> 
> `import "flag"`
> 
> [函数参数](https://golang.org/pkg/flag/#Args)
> 
> `func Args() []string`
> 
> `Args`返回非标志命令行参数。

* * *

> [打包文件](https://golang.org/pkg/fmt/)
> 
> `import "fmt"`
> 
> [函数打印](https://golang.org/pkg/fmt/#Println)
> 
> `func Println(a ...interface{}) (n int, err error)`
> 
> `Println`对其操作数使用默认格式并写入标准输出。操作数之间总是添加空格并附加换行符。它返回写入的字节数和遇到的任何写入错误。

* * *

在这种情况下，不需要类型转换。只需将`flag.Args()`值传递给`fmt.Println`，它使用反射将值解释为 type `[]string`。包[`reflect`](https://golang.org/pkg/reflect/)实现运行时反射，允许程序操作任意类型的对象。例如，

`args.go`：

```
package main

import (
    "flag"
    "fmt"
)

func main() {
    flag.Parse()
    fmt.Println(flag.Args())
} 
```

输出：

```
$ go build args.go
$ ./args arg0 arg1
[arg0 arg1]
$ 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-12-19T16:06:35.007

如果它只是您要打印的一段字符串，则可以通过加入来避免转换并获得完全相同的输出：

```
package main

import (
    "fmt"
    "flag"
    "strings"
)

func main() {
    flag.Parse()
    s := strings.Join(flag.Args(), " ")
    fmt.Println(s)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-04T09:26:25.700

在 Go 中，函数只能接受函数定义中参数列表中指定类型的参数。可变参数语言功能使这有点复杂，但它遵循明确定义的规则。

的函数签名`fmt.Println`是：

```
func Println(a ...interface{}) (n int, err error) 
```

根据[语言规范](https://golang.org/ref/spec#Function_types)，

> 函数签名中的最终传入参数可能具有以 ... 为前缀的类型。具有这种参数的函数称为可变参数，并且可以使用该参数的零个或多个参数来调用。

这意味着您可以传递类型`Println`参数的列表`interface{}`。由于所有类型都实现了空接口，因此您可以传递任何类型的参数列表，这就是您能够调用`Println(1, "one", true)`的方式，例如，没有错误。请参阅语言规范的[“将参数传递给...参数”部分：](https://golang.org/ref/spec#Passing_arguments_to_..._parameters)

> 传递的值是一个 []T 类型的新切片，带有一个新的底层数组，其连续元素是实际参数，所有这些都必须可分配给 T。

给您带来麻烦的部分就在规范之后：

> 如果最后一个参数可分配给切片类型 []T，则它可以作为 ...T 参数的值不变地传递，如果参数后跟 ...。在这种情况下，不会创建新切片。

`flag.Args()`是类型`[]string`。由于`T`in`Println`是`interface{}`，`[]T`是`[]interface{}`。所以问题归结为字符串切片值是否可以分配给接口切片类型的变量。您可以通过尝试分配轻松地在您的 go 代码中测试它，例如：

```
s := []string{}
var i []interface{}
i = s 
```

如果您尝试这样的分配，编译器将输出以下错误消息：

```
cannot use s (type []string) as type []interface {} in assignment 
```

这就是为什么你不能在字符串切片之后使用省略号作为`fmt.Println`. 这不是错误，它按预期工作。

您仍然可以使用多种方式进行打印`flag.Args()`，`Println`例如

```
fmt.Println(flag.Args()) 
```

`[elem0 elem1 ...]`（根据[fmt 包文档](https://golang.org/pkg/fmt)，它将输出为）

或者

```
fmt.Println(strings.Join(flag.Args(), ` `) 
```

例如，使用带有字符串分隔符[的字符串包中的 Join 函数](https://golang.org/pkg/strings/#Join)（将输出字符串切片元素，每个元素由一个空格分隔）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-07T15:27:02.757

另一种选择是只迭代切片：

```
package main
import "flag"

func main() {
   flag.Parse()
   for _, each := range flag.Args() {
      println(each)
   }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-03-05T19:06:08.997

我认为可以使用反射，但我不知道这是否是一个好的解决方案

```
package main

import (
    "fmt"
    "reflect"
    "strings"
)

type User struct {
    Name string
    Age  byte
}

func main() {
    flag.Parse()
    fmt.Println(String(flag.Args()))
    fmt.Println(String([]string{"hello", "world"}))
    fmt.Println(String([]int{1, 2, 3, 4, 5, 6}))
    u1, u2 := User{Name: "John", Age: 30},
        User{Name: "Not John", Age: 20}
    fmt.Println(String([]User{u1, u2}))
}

func String(v interface{}) string {
    val := reflect.ValueOf(v)
    if val.Kind() == reflect.Array || val.Kind() == reflect.Slice {
        l := val.Len()
        if l == 0 {
            return ""
        }
        if l == 1 {
            return fmt.Sprint(val.Index(0))
        }
        sb := strings.Builder{}
        sb.Grow(l * 4)
        sb.WriteString(fmt.Sprint(val.Index(0)))
        for i := 1; i < l; i++ {
            sb.WriteString(",")
            sb.WriteString(fmt.Sprint(val.Index(i)))
        }
        return sb.String()
    }

    return fmt.Sprintln(v)
} 
```

**输出：**

```
$ go run .\main.go arg1 arg2
arg1,arg2
hello,world
1,2,3,4,5,6
{John 30},{Not John 20} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-01-30T18:02:01.453

`fmt.Println`接受*可变参数*

> func Println(a ...interface{}) (n int, err error)

`flag.Args()`无需转换即可打印`[]interface{}`

```
func main() {
    flag.Parse()
    fmt.Println(flag.Args())
} 
```

# javascript - 切换开启但未关闭

> ID：12990343
> 
> 赞同：-1
> 
> 时间：2012-10-20T16:20:35.460
> 
> 标签：javascript, toggle

我最近尝试打开和关闭一个 div，但是使用了很多方法，由于链接指向 .com/#，我无法做到这一点

直到我找到一个无需重定向到#的帖子

```
<script type="text/javascript">

    function toggleVisibility(newSection) {
        $("#info").not("#" + newSection).hide();
        $("#" + newSection).show();
    }
</script> 
```

我仍在学习 JavaScript，但我不知道如何添加开关。现在它只是打开，当我按下它时它不会关闭。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:24:54.923

Toggle 会根据元素的当前显示可见性进行显示和隐藏。所以这样的事情应该有效：

```
function toggleVisibility(newSection) {
    $("#" + newSection).toggle();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:25:15.137

sounds like you may want tabs: when one panel is selected the other panels disappear.

这是一种常见的方法：

```
$('a.tab').click(function(e) {
    e.preventDefault();
    $('.panel:visible').hide();
    var el = $($(this).attr('href'));
    el.toggle();
}); 
```

您有显示组中特定面板并隐藏其他面板的链接：

```
<style type="text/css">
    .panel {display: none;}
</style>

<a class="tab" href="#panel1">Show/hide panel 1</a>
<a class="tab" href="#panel2">Show/hide panel 2</a>
<a class="tab" href="#panel3">Show/hide panel 3</a>

<div class="panel" id="panel1">1</div>
<div class="panel" id="panel2">2</div>
<div class="panel" id="panel3">3</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:26:32.903

您给出的代码所做的是隐藏 ID 中`info`没有给出ID 的所有元素`newSection`，然后显示该元素`newSection`。

由于元素只能有一个 ID，因此将元素视为可能有多个 ID，或者可能有多个相同的 ID，这有点奇怪和毫无意义。

您可以使用以下`.toggle()`方法：`$("#"+newSection).toggle()`

# php - 根据提交表单进行SQL查询

> ID：12990347
> 
> 赞同：-2
> 
> 时间：2012-10-20T16:21:07.013
> 
> 标签：php, mysql, sql

我想根据存入金额的输入查询数据库。在数据库中存储了银行的最低金额。所以查询包括显示所有具有 min_amount 的银行

金额定义为$amount，包含最小金额的行是minimum。所以我这样做了，但它告诉我：$amount 的未定义索引。？？？

```
 <form name="test" method="get" action="this.php">
    Amount: <input name="amount"/>
    <input type="submit"/>
    </form>

    <?php
        $amount = $_GET["amount"];

        $result = mysql_query("SELECT * FROM list1 WHERE minimum <= '$amount'");

        while($row = mysql_fetch_array($result))
          {
          echo $row['bank_name'] . " - " . $row['Tariff'];
          echo "<br />";
          }
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:22:32.840

您需要检查表单是否已提交。尝试：

```
if( isset($_GET['amount'])) { /* your code here */ } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T16:26:11.760

您需要使用 say isset 函数检查表单是否已提交。

```
if (isset($_GET['amount'])){} 
```

此外，强烈建议您在将 $_GET 变量放入 mysql 查询之前对其进行转义，因为这种代码允许 SQL 注入。

整个事情应该是这样的：

```
if (isset($_GET['amount'])){

        $amount = $_GET["amount"];

        $result = mysql_query("SELECT * FROM list1 WHERE minimum <= '{$amount}'");

        while($row = mysql_fetch_array($result))
          {
          echo $row['bank_name'] . " - " . $row['Tariff'];
          echo "<br />";
} 
```

# ruby - 将字符串近似匹配到列表并在 Ruby 中返回值的最简洁方法？

> ID：12990362
> 
> 赞同：2
> 
> 时间：2012-10-20T16:22:47.443
> 
> 标签：ruby, pattern-matching, yaml

我想在 Ruby 中构建一个函数，该函数接受一个字符串并将其与一个可能性列表进行比较，然后再返回一些值或函数。这是一种（可能是幼稚的）可以写成案例陈述的方式：

```
a = 'unicorn'
case a
  when "gnome", "dwarf", "hobbit"
    "dwarf"
  when "dragon"
    puts "run away!"
  when "centaur", "unicorn"
    magical_equine_function(a)
  else
    false
end 
```

我的问题是，如何使用像[amatch](http://flori.github.com/amatch/)这样的近似匹配库来做同样的事情，这样你就可以设置一个 amatch 值（比如 2），并且当你有 a = "Unicorn" 或 a = "uncorn “？

此外，是否有一种更简洁、更易于维护的方式来编写所有这些内容，方法是通过 YAML 文件播种/比较所有可能的匹配项，而不是写出大量的 case 语句？我对 YAML 完全陌生，但希望我能够加载如下文件：

```
? 
  -"gnome"
  -"dwarf"
  -"hobbit"
: 
  -"dwarf"
? 
  -"dragon"
: 
  -puts "run away"
?
  -"centaur"
  -"unicorn"
: 
  -magical_equine_function(a) 
```

然后对加载的文件进行近似匹配。有没有办法做到这一点不会影响性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:21:49.417

有几种方法可以给这只猫剥皮。一种是使用 lambda：

```
MATCHERS = [
  [/^gnome|dwarf|hobbit$/, lambda { |a| 'dwarf' }],
  ['dragon', lambda { |a| puts 'run away!' }],
  [/^centaur|unicorn$/, lambda { |a| magical_equine_function(a) }],
  [//, lambda { |a| false }],
] 
```

这将模式（可以是字符串或正则表达式）与 lambda 相关联。最后一个匹配器很特别：它是一个可以匹配任何东西的哨兵。它代表您示例中的*else*子句。

这是进行匹配的代码：

```
def match(a)
  MATCHERS.each do |pattern, f|
    return f[a] if pattern === a
  end
end 
```

我们使用`===`以便可以使用字符串或正则表达式。

以下是它的使用方法：

```
p match('gnome')
# => "dwarf"

p match('dragon')
# => "run away!"
# => nil

p match('unicorn')
# => "equine unicorn"

p match('oddball')
# => false 
```

* * *

您也可以使用方法来做到这一点：

```
class Matcher

  def match(a)
    MATCHERS.each do |pattern, method|
      return send(method, a) if pattern === a
    end
  end

  private

  MATCHERS = [
    [/^gnome|dwarf|hobbit$/, :dwarf],
    ['dragon', :dragon],
    [/^centaur|unicorn$/, :equine],
    [//, :default],
  ]

  def dwarf(a)
    "dwarf"
  end

  def dragon(a)
    puts "run away!"
  end

  def equine(a)
    magical_equine_function(a)
  end

  def default(a)
    false
  end

  def magical_equine_function(a)
    "equine #{a}"
  end

end 
```

并在使用中：

```
matcher = Matcher.new
    p matcher.match('gnome')
# => "dwarf"

# etc. 
```

* * *

使用方法将代码与匹配规则分开，如果需要，您可以将匹配规则放入文件中。这是的内容`match_rules`：

```
---
- - !ruby/regexp /^gnome|dwarf|hobbit$/
  - :dwarf
- - dragon
  - :dragon
- - !ruby/regexp /^centaur|unicorn$/
  - :equine
- - !ruby/regexp //
  - :default 
```

我们不必对`Matcher`类进行很多更改即可使其正常工作：

```
require 'yaml'

class Matcher

  def initialize
    @matchers = YAML.load_file('match_rules')
  end

  def match(a)
    @matchers.each do |pattern, method|
      return send(method, a) if pattern === a
    end
  end

  # ...

end 
```

使用`send`您从文件中获取的数据允许创建该文件的人让您调用任何 Matcher 类的方法。为了防止这种情况，您可以简单地为规则中使用的所有方法添加一个前缀：

```
def matched_dragon(a)
  puts "run away!"
end

# etc. 
```

在 match 方法中，添加该前缀：

```
def match(a)
    @matchers.each do |pattern, method|
      return send("matched_#{method}", a) if pattern === a
    end
  end 
```

现在只有以“matched_”为前缀的方法才能被 match 函数调用。

* * *

在评论中回答后续问题：

模式是字符串数组的 YAML 如下所示：

```
---
- - - gnome
    - dwarf
    - hobbit
  - :small_person
- - - dragon
  - :dragon 
```

# sql-server - 如何使用 VB 脚本生成 excel(.XLS) 文件？

> ID：12990367
> 
> 赞同：0
> 
> 时间：2012-10-20T16:23:08.070
> 
> 标签：sql-server, vba, vbscript, export-to-excel, dts

我想`.xls`使用 VBScript 创建一个 excel 文件。

因为我想为我们的需求创建一个 DTS 包。DTS 接受仅具有`.xls`扩展名的 excel 文件。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:43:40.957

以下代码将创建一个带有`.xls`扩展名的 Excel 文件，如果这就是您真正需要知道的全部内容。

根据 Microsoft 的开发人员支持（[http://msdn.microsoft.com/en-us/library/office/aa221273%28v=office.11](http://msdn.microsoft.com/en-us/library/office/aa221273%28v=office.11%29.aspx) ​​%29.aspx ）稍作修改：

```
Set objExcel = CreateObject("Excel.Application")

Set NewBook = objExcel.Workbooks.Add
With NewBook
    .Title = "My Title"
    .SaveAs "MyFile.xls"
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:28:37.783

如果 excel 安装在脚本运行的同一台机器上，则可以使用 vbscript 创建和 excel 文件。基本上，您将使用 excel COM 对象，查看示例代码：[Create an Excel file using vbscripts](https://stackoverflow.com/questions/1123605/create-an-excel-file-using-vbscripts)

希望有帮助...

# android - Android 媒体播放器在 3 次活动后停止

> ID：12990370
> 
> 赞同：1
> 
> 时间：2012-10-20T16:23:35.843
> 
> 标签：android, view, android-activity, media-player

我正在尝试在我的应用程序中为所有活动制作一首歌曲。我在第一个活动中设置了 MediaPlayer，它播放所有活动，但在游戏活动中它停止了。我尝试在游戏活动中再创建一个媒体，但它无法播放

**第一个活动：**

```
public class MainStage extends Activity implements OnClickListener {

 private Button newGameBtn,highScoreBtn;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.main_game);
    final MediaPlayer themeSong =MediaPlayer.create(this, R.raw.main_song);
    themeSong.start();
    newGameBtn=(Button)findViewById(R.id.new_game);
    newGameBtn.setOnClickListener(this);

    highScoreBtn=(Button)findViewById(R.id.high_score_btn);

    highScoreBtn.setOnClickListener(this);

} 
```

**游戏活动：**

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    club=new Club();
    clubView = new ClubView(this, club);
    mole=new Mole();
    stageView=new StageView(this);
    moleView=new MoleView(this,mole);
    pointsView=new PointsView(this);

    time=new Time(this);
    timerView=new TimerView(this, time);

    allViews=new AllViews(this);
    allViews.setViews(stageView, moleView, pointsView, timerView,clubView);
    setContentView(allViews);
    MediaPlayer themeSong =MediaPlayer.create(this, R.raw.main_song);
    themeSong.start();

    allViews.setOnTouchListener((View.OnTouchListener)this); 
```

# networking - 如何在centos上配置网关（用google但没有答案）

> ID：12990376
> 
> 赞同：3
> 
> 时间：2012-10-20T16:24:03.463
> 
> 标签：networking, centos, gateway

这是centos5.5上virtualbox的一些配置文件，我已经重新启动网络，但也无法连接到互联网，没有网关记录使用路由命令列出的信息，但是，当我输入“route add default gw 1​​92.168 .0.1" 并且运行良好。我应该如何配置网关 ip？提前致谢。

/etc/resolv.conf

```
nameserver 8.8.8.8
nameserver 8.8.4.4 
```

/etc/sysconfig/网络

```
GATEWAY=192.169.0.1
NETWORKING=yes
HOSTNAME=localhost 
```

/etc/sysconfig/network-scripts/ifcfg-eth0

```
DEVICE="eth0"  
HWADDR="00:24:1D:8A:3D:F7" 
ONBOOT="yes"  
BOOTPROTO="static"  
BROADCAST="192.168.0.255"
NETWORY="192.168.0.1" 
IPADDR="192.168.0.109" 
NETMASK="255.255.0.0" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T09:29:35.247

CentOS 5 应该有文件 route-eth0 （在 /etc/sysconfig/network-scripts ）把这个字符串放进去：默认 XXXX 开发接口确保你改变 XXXX 和你的接口。

顺便说一句，看看[http://www.centos.org/docs/5/html/5.1/Deployment_Guide/s1-networkscripts-static-routes.html](http://www.centos.org/docs/5/html/5.1/Deployment_Guide/s1-networkscripts-static-routes.html)

# ruby-on-rails - Rails：如何用实际的用户名信息替换 ENV['USERNAME']？

> ID：12990384
> 
> 赞同：0
> 
> 时间：2012-10-20T16:24:43.923
> 
> 标签：ruby-on-rails

嗨，我有一个关于 Rails 的快速问题。我一直看到 ENV['SOMETHING'] 并且不确定如何用它替换实际变量。我是否只需将 'SOMETHING' 替换为 'my_value' 以便 ENV['SOMETHING'] 变为 ENV['my_value'] ？我在某处读到你必须在你的 bash 配置文件中更改它，但我将如何去做呢？

这是它会出现的示例：

```
config.action_mailer.smtp_settings = {
  address: "smtp.gmail.com",
  port: 587,
  domain: "railscasts.com",
  authentication: "plain",
  enable_starttls_auto: true,
  user_name: ENV["GMAIL_USERNAME"],
  password: ENV["GMAIL_PASSWORD"]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:39:34.537

您应该能够使用普通设置 ENV 变量：

```
ENV['your_var'] = your_value 
```

然后通过以下方式访问它：

```
ENV['your_var'] 
```

您可以在 config/environments/development.rb 或您希望的任何其他初始化文件上进行实际设置。

# android - Android debuggable=true with proguard 开启

> ID：12990385
> 
> 赞同：4
> 
> 时间：2012-10-20T16:24:48.037
> 
> 标签：android, ant, proguard

由于我的项目太大，我需要运行proguard才能成功编译android。

但是当我设置 android:debuggable="true" 以便我轻松调试时，它会自动关闭 proguard。有什么解决方案或解决方法吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-27T02:51:10.707

遇到了完全相同的问题。幸运的是，谷歌帮助了我。

现在我的`build.gradle`：

```
// ...
android {
    // ...
    buildTypes {
        debug {
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android.txt'),
                    'proguard-rules.txt',
                    'proguard-rules.debug.txt'
            debuggable true
        }
        release {
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android.txt'),
                    'proguard-rules.txt'
        }
    }
} 
```

`proguard-rules.debug.txt`：

```
-renamesourcefileattribute SourceFile
-keepattributes SourceFile,LineNumberTable
-dontobfuscate
-dontoptimize
-dontpreverify 
```

为我工作。希望能帮助到你。;-)

# mysql - Symfony 多个复选框保存到 mySQL

> ID：12990390
> 
> 赞同：0
> 
> 时间：2012-10-20T16:25:09.440
> 
> 标签：mysql, forms, symfony-1.4

我有一个表格，其中一个字段是多项选择，这意味着人们可以为该 1 个答案选择多个复选框。所有答案都是数字（即 01、02、03 等），所以我`schema.yml`在保存很好，但超过 1 并且它不保存任何东西。

我应该设置什么“类型”。

**架构.yml**

```
 Ticket:
      connection: doctrine
      tableName: ticket
      columns:
        ticketid:
          type: integer(10)
          fixed: false
          unsigned: false
          primary: true
          autoincrement: true
        num01:
          type:  integer()
          notnull: true
          autoincrement: false 
```

# android - SQLiteReadOnlyDatabaseException 但数据库是可写的

> ID：12990391
> 
> 赞同：1
> 
> 时间：2012-10-20T16:25:12.457
> 
> 标签：android, sqlite, android-4.0-ice-cream-sandwich

我在 Android、ICS 上使用 SQLite。当我进行更新时，我得到一个`SQLiteReadOnlyDatabaseException`. 这很奇怪，因为我用`SQLiteOpenHelper.getWritableDatabase()`. 此外，我在更新发生之前测试了数据库是否是只读的`myDB.isReadonly()`。Gingerbread 不会发生此异常。我怀疑它与跨android版本的不同版本的sqlite有关。

这是我创建数据库的代码。

```
protected static class DBHelper extends SQLiteOpenHelper {
    DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CreateStatements.CREATE_MOVIES);
...

}

public class DBAdapter {
    public static final String PACKAGE_NAME =     
    protected DBHelper dbHelper;
    protected Context context;
    protected SQLiteDatabase myDB;
    public CreateStatements statement;

    public DBAdapter(Context context) {
        this.context = context;
    }

    public void open() throws SQLException {
        dbHelper = new DBHelper(context);
        myDB = dbHelper.getWritableDatabase();
        myDB.setLockingEnabled(false);
    }

    public void close() {
        myDB.close();
    }
...

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-20T06:42:49.730

我最近面对。这是如何解决的：

```
try{
   myDB = dbHelper.getWritableDatabase();
} catch (SQLiteReadOnlyDatabaseException e){
   Log.d(TAG, "SQLiteReadOnlyDatabaseException");
   startActivity(new Intent(context, MainActivity.class));
} 
```

更新数据库时，它会保留与旧数据库的一些连接。当`new DBHelper(context)`数据库升级后再次执行时，帮助程序链接回旧数据库。因此，您需要关闭此类并重新初始化它。在我的例子中，MainActivity 是首先初始化 dbHelper 的类。因此，当捕获到异常并重新启动活动时，与旧数据库的连接将被删除并且工作正常。

# r - 为什么 reshape2 融化返回值 = NA 对我来说？

> ID：12990398
> 
> 赞同：4
> 
> 时间：2012-10-20T16:25:39.233
> 
> 标签：r, reshape2

为什么 reshape2为我`melt`返回`value`= `NA`？

它适用于我的 reshape，但不适用于 reshape2：

这是一个示例数据文件：

```
"","station_id","year","month","day","h1","h2","h3","h4","h5","h6","h7","h8","h9","h10","h11","h12","h13","h14","h15","h16","h17","h18","h19","h20","h21","h22","h23","h24"
"1",1,2004,1,1,46,46,45,41,39,35,33,33,36,47,53,54,55,55,55,55,52,46,40,40,39,38,40,41
"2",1,2004,1,2,43,44,46,46,47,47,47,47,47,47,47,49,52,56,54,56,57,53,50,47,46,45,45,45
"3",1,2004,1,3,45,46,46,44,43,46,46,47,51,55,56,59,65,68,69,68,68,65,64,63,62,63,63,62
"4",1,2004,1,4,63,62,62,62,60,60,60,62,60,64,64,66,71,70,71,72,71,68,67,67,65,64,65,64
"5",1,2004,1,5,64,63,65,64,64,64,64,64,65,66,66,67,68,68,66,66,66,66,63,54,52,49,47,47
"6",1,2004,1,6,47,46,45,43,41,41,39,39,40,43,45,44,45,46,46,46,45,39,39,39,38,36,32,32 
```

假设它被保存为`/tmp/foo.csv`，那么：

使用重塑：

```
$ R
...
Type 'q()' to quit R.

> library("reshape")
Loading required package: plyr

Attaching package: ‘reshape’

The following object(s) are masked from ‘package:plyr’:

    rename, round_any

> hlist <- NULL; for(z in 1:24) { hlist <- cbind(hlist, sprintf("h%d",z)) }
> 
> thh <- read.csv('/tmp/foo.csv')
> thm <- melt(thh,measure.vars=hlist,variable="hour")
> head(thm)
  station_id year month day hour value
1          1 2004     1   1   h1    46
2          1 2004     1   2   h1    43
3          1 2004     1   3   h1    45
4          1 2004     1   4   h1    63
5          1 2004     1   5   h1    64
6          1 2004     1   6   h1    47
> q() 
```

使用重塑2：

```
$ R
...
Type 'q()' to quit R.

> library("reshape2")
> hlist <- NULL; for(z in 1:24) { hlist <- cbind(hlist, sprintf("h%d",z)) }
> 
> thh <- read.csv('/tmp/foo.csv')
> thm <- melt(thh,measure.vars=hlist,variable="hour")
> head(thm)
  station_id year month day hour value
1          1 2004     1   1   h1    NA
2          1 2004     1   2   h1    NA
3          1 2004     1   3   h1    NA
4          1 2004     1   4   h1    NA
5          1 2004     1   5   h1    NA
6          1 2004     1   6   h1    NA
> q() 
```

您可以看到使用`library("reshape")`,`value`列有数字，但是对于相同的数据`libary("reshape2")`，它有, 。`NA`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T16:41:18.570

有更好的方法来做你想做的事情。

以下所有内容都适用于`melt()`from `reshape2`：

```
# Not using hlist
melt(th, measure.vars=5:ncol(th), variable="hour")
melt(th, id.vars=1:4, variable="hour")

# Using your hlist
hlist <- NULL; for(z in 1:24) { hlist <- cbind(hlist, sprintf("h%d",z)) }
melt(th, measure.vars=as.vector(hlist), variable="hour")

# Using an alternative hlist
hlist <- paste0("h", 1:24)
melt(th, measure.vars=hlist, variable="hour") 
```

似乎`melt()`from "reshape" 接受一个矩阵作为 的输入`measure.vars`，但`melt()`from "reshape2" 不接受（我觉得这更合理）。

### 更新：示例可重现问题

仅供参考，以下是一种从头到尾的方式，您可以以一种方便其他 Stack Overflow 用户复制和粘贴的方式分享此问题：

```
# Use set.seed when you want to use random numbers 
#   but want others to have the same data as you.
set.seed(1) 

# Make up some data that mimics your actual dataset
# Does not have to be your exact dataset
th <- cbind(
  data.frame(station = rep(LETTERS[1:3], each = 3),
             year = 2004, month = rep(1:3, times = 3)), 
  setNames(data.frame(
    matrix(sample(100, 45, replace = TRUE), nrow = 9)),
           paste0("h", 1:5)))

hlist <- NULL; for(z in 1:5) { hlist <- cbind(hlist, sprintf("h%d",z)) }
# Cleanup any unnecessary stuff that your code leaves behind in the workspace
rm(z) 
```

现在，证明你的问题。您可以使用`detach(package:package_name)`而不必退出并重新启动 R。

```
library(reshape)
head(melt(th, measure.vars = hlist, variable = "hour"))
#   station year month hour value
# 1       A 2004     1   h1    27
# 2       A 2004     2   h1    38
# 3       A 2004     3   h1    58
# 4       B 2004     1   h1    91
# 5       B 2004     2   h1    21
# 6       B 2004     3   h1    90
detach(package:reshape)

library(reshape2)
head(melt(th, measure.vars = hlist, variable = "hour"))
#   station year month hour value
# 1       A 2004     1   h1  <NA>
# 2       A 2004     2   h1  <NA>
# 3       A 2004     3   h1  <NA>
# 4       B 2004     1   h1  <NA>
# 5       B 2004     2   h1  <NA>
# 6       B 2004     3   h1  <NA>
detach(package:reshape2) 
```

希望这可以帮助！

# objective-c - 使用 NSArray 崩溃的代码中的错误

> ID：12990399
> 
> 赞同：0
> 
> 时间：2012-10-20T16:25:44.533
> 
> 标签：objective-c, ios, arrays, nsmutablearray, nsarray

我正在制作一个显示列表中人员姓名的代码。

每个日期的列表都不同，所以我的问题是，当只有 1 个或没有人签名并且我创建了一个索引超出人数限制的数组时，它崩溃了。我知道发生这种情况是因为数组为空，但是如何让代码忽略空数组？

我试图制作一个“如果”来计算数组的数量，然后决定发布数组或不发布名称。但它不像这样工作，我仍然得到越界异常。

我应该如何管理空数组？

我的代码：

```
NSString *html = [request2 responseString];
NSMutableArray *arr2 = [html componentsSeparatedByString:@"vagter"];
NSString *html1 = [arr2 objectAtIndex:1];

//name1
NSMutableArray *arr3 = [html1 componentsSeparatedByString:@"<td><font color=#ffffff>"];
NSString *html2 = [arr3 objectAtIndex:1];
NSMutableArray *arr4 = [html2 componentsSeparatedByString:@"</font></td>"];
NSString *html3 = [arr4 objectAtIndex:0];

_name.text = html3;

//name 2
NSMutableArray *arr5 = [html1 componentsSeparatedByString:@"<td><font color=#ffffff>"];

if ([arr5 count] > 4) {
    NSString *html4 = [arr5 objectAtIndex:5];
    NSMutableArray *arr6 = [html4 componentsSeparatedByString:@"</font></td>"];
    NSString *html5 = [arr6 objectAtIndex:0];

    _name.text = html5;
}
else
{
    _name1.text = @"No name";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T16:34:40.097

它应该是：

```
if ([arr5 count] > 5) {

    NSString *html4 = [arr5 objectAtIndex:5];
    ... 
```

实际上，索引 5 将对应于第六个数组项，因此您必须在其中至少有 6 个对象。

如果要检查数组边界，请在所有情况下使用相同的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:36:02.983

问题是您期望 componentsSeparatedByString 的返回值根据您的期望返回一致的结果。

显然那是行不通的。

数组处理很简单。不要要求不存在的对象。

检查 count 并且只访问从 0 到 count - 1 的索引；

如果计数为零，则不要访问任何内容。

# c++ - 显式预取非连续数据

> ID：12990402
> 
> 赞同：1
> 
> 时间：2012-10-20T16:26:03.923
> 
> 标签：c++, caching

我对图像的子区域做了很多操作。例如，如果我有一个 100x100 的图像，我可能想要迭代这个图像并处理 10x10 像素的块。例如：

```
for(each 10x10 block)
{
  for(each pixel in the block)
  {
    do something
  }
} 
```

这样做的问题是小块不是连续的内存块（即图像像素按行主要顺序存储，所以当我访问 10x10 块时，块的每一行中的像素是连续的，但是块不是连续的。有什么办法可以加快对这些块中像素的访问速度？还是无法快速访问这样的数据结构区域？

从我所做的大量阅读中，听起来像是首先读取像素，因为循环中的唯一操作可能很有用：

```
// First read the pixels
vector<float> vals(numPixels);
for(pixels in first row)
{
val[i] = pixels[i];
}

// Then do the operations on the pixels
for(elements of vals)
{
 doSomething(vals[i])
} 
```

与我正在做的事情相比，两者同时只是：

```
// Read and operate on the pixels
for(pixels in first row)
{
 doSomething(pixels[i])
} 
```

但我找不到任何实际的代码示例（相对于理论解释）如何做到这一点。有没有道理呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:41:21.417

`gcc`有一个内置函数叫做[`__builtin_prefetch`](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Other-Builtins.html#index-g_t_005f_005fbuiltin_005fprefetch-3264). 您可以将地址传递给该函数，并且在支持它的目标上，`gcc`将发出一条机器指令，导致该地址被加载到缓存中，即使它没有立即使用。

许多现代图像处理应用程序将图像存储在*tile*中，而不是您描述的*行*（又名 *scanlines）。例如 GIMP[就是这样做的](http://developer.gimp.org/writing-a-plug-in/3/index.html)。因此，如果您可以控制图像的存储方式，那么使用平铺方法可能会增加局部性，从而减少缓存未命中并提高性能。

# c++ - QT：使用字段间规则进行表单验证

> ID：12990404
> 
> 赞同：1
> 
> 时间：2012-10-20T16:26:22.230
> 
> 标签：c++, qt

1.  我想动态构建一个表单来编辑一组属性（比如从一个 xml 文件左右）。

2.  最重要的是，我想使用一组规则（理想情况下也是动态加载的）对每个属性（强制值/可选值）执行验证。这些规则可以关联到单个字段（允许的值、范围等），但也可以链接多个字段（条件验证）。

3.  我希望能够“即时”保存结果（一旦字段失去焦点）。

有人有好的线索让我开始吗？
这是我到目前为止发现的：

1.  我可以从动态表单生成的 Qt 属性浏览器框架开始。我可以扩展这个框架以满足我的需要。

2.  关于验证，我读到了 QValidator，这似乎是一个好的开始。但是，我找不到涉及多个字段的任何内容（跨参数验证）

3.  QSettings 框架很好地完成了这个自动保存功能，我想我可以重用它。

我只是想确保我没有错过一些现有的框架来处理我的目标，因为这似乎是一个相对标准的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:41:29.580

假设表单的字段是*固定*的。然后，您可以使用 a 的共享实例 来验证所有字段中的文本，方法是在包含指向字段的指针的*列表*/*字典*/*映射上*`QValidator`运行您的验证。*列表*/*dictionary*/*映射*必须通过动态填充和清除，并在内部硬编码指向它的 指针。如果不允许共享，您将必须创建单独的并执行跨字段验证。*****`QValidate::validate``QValidator`*****

 ***或者，您可以使用*Qt 的 Signal-Slot*机制在字段中的文本发生更改时实现验证。

我不知道 QSetting，并且会使用相同的*信号槽*机制来执行自动保存。***

# android - 自定义通知字幕文本不起作用android

> ID：12990405
> 
> 赞同：4
> 
> 时间：2012-10-20T16:26:28.977
> 
> 标签：android, android-notifications

嗨，我试图在通知管理器字幕中制作我的部分文本，但没有用，我试过这个：

```
 <TextView
    android:id="@+id/title_text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:fadingEdge="horizontal"
    android:gravity="bottom"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"                                     
    android:focusable="true"
    android:focusableInTouchMode="true"              
    android:singleLine="true"
    android:textSize="15sp"
    android:textStyle="bold" >
  </TextView> 
```

在我的.java中我使用remoteview：

```
Notification notification = new Notification(icon, tickerText, when);
RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.notification);

contentView.setTextViewText(R.id.title_text, "This is a very long text which is not fitting in the screen so it needs to be marqueed"); 
```

我想为该title_text设置字幕**这是一个很长的文本，不适合屏幕，因此需要进行字幕**

但是选框不起作用只是保持静止我能做什么？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-20T21:32:00.657

我改变了我的xml：

```
 <TextView
    android:id="@+id/title_text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:fadingEdge="horizontal"
    android:gravity="bottom"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="false"                                     
    android:focusable="true"
    android:focusableInTouchMode="true"              
    android:singleLine="true"
    android:textSize="15sp"
    android:textStyle="bold" 
    android:textColor="#fff">
    <requestFocus/> 
  </TextView> 
```

我添加了`<requestFocus/>`，现在我的选框工作完美。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:25:33.000

根据[文档](http://developer.android.com/reference/android/widget/TextView.html#setHorizontallyScrolling%28boolean%29)，将 scrollHorizo​​ntally 属性设置为 true 不会将文本包装在边缘。尝试将其设置为 false，以便使用 ellipsize 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T23:52:30.250

我花了一天时间才意识到选框效果是通过[NotificationCompat.Builder](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#SimpleNotification)中的这种方法完成的：支持 RemoteView的[setTicker](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#setTicker%28java.lang.CharSequence,%20android.widget.RemoteViews%29)

我真的希望这个答案能拯救许多人的生命:)（差点掉头发）

# java - 我怎样才能摆脱这个 ClassCastException？（爪哇）

> ID：12990408
> 
> 赞同：2
> 
> 时间：2012-10-20T16:26:38.003
> 
> 标签：java, arrays, exception, object, casting

我正在尝试创建一个泛型类“DataStruct”的数组。代码如下：

```
public class DataArray<T> {
DataStruct<T>[] array;
int index;

public DataArray(int capacity) {
    array = (DataStruct<T>[]) new Object[capacity]; // !!!
    this.index = 0;
}
} 
```

我得到一个 java.lang.ClassCastException (Ljava.lang.Object; cannot be cast to [LArrayBased.DataStruct;) 在最后用三个感叹号标记的行，同时测试它。

你能告诉我创建它的正确方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T16:29:09.443

为什么不申报

```
array = new DataStruct[capacity]; 
```

`Object[]`不能投到`DataStruct[]`。

因为数组本质上是可重构的，这意味着数组在运行时知道它们的类型，所以如果你把它转换成`Object []`下面的样子，你会再次遇到问题

```
Object[] array = new DataStruct[capacity]; 
array[0] = 10;//Array Store exception 
```

因此，明智的做法是将其声明为`DataStruct[capacity]`

# javascript - 如何改进这小段代码

> ID：12990411
> 
> 赞同：4
> 
> 时间：2012-10-20T16:26:40.823
> 
> 标签：javascript, jquery, dom

我只是想知道如何改进这段代码：

```
pagination.children('li.active').prev().prev().prev().prev().prevAll('li.pgn').css("display","none"); 
```

我只是不喜欢`.prev()`链条，也没有找到改进它的方法，但我相信你知道如何;-)

编辑：

分页是我的`ul`，其中包含很多`li`与有`active`课程的人。

我想选择`li`之前的所有，`li.active`但不是前 5 个。

示例（忘记`pgn`类）：

```
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li class="active"></li> 
```

这将给出：

```
<li style="displat: none;"></li>
<li style="display: none;"></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
<li class="active"></li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:29:31.683

您可以使用`:gt()`选择器。

```
pagination.children('li.active').prevAll('li:gt(4)').hide(); 
```

[http://jsfiddle.net/MrvDX/](http://jsfiddle.net/MrvDX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:55:16.260

我认为您这样做的事实表明您的页面/应用程序的设计可以改进。

为什么你必须找到活动类的 LI？为什么你还不知道这个？当然，首先是您的应用程序生成了标记。

似乎您正试图从标记中确定状态，而我喜欢避开它。您应该有一个对象告诉您选择了 LI 的哪个索引。然后你可以使用一个更简单的 jQ 选择器来选择你感兴趣的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:38:32.150

试试这个

**编辑**

```
var pagination = $('ul');

var len = pagination.find('li.active').prevAll('li').length;
pagination.find('li.png').slice(0 , len-5).css('display','none')​​​​​​​​​​​​​​​​​; 
```

[工作小提琴](http://jsfiddle.net/sushanth009/WU49j/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T16:45:47.690

你可以试试这样的...

```
var $prevAll = pagination.children('li.active').prevAll('li.pgn');
var prevCount = $prevAll.length;

$prevAll.filter(function(index){
   return (prevCount - index < 5)
}).hide() //instead of - .css("display", "none"); 
```

使用过滤器方法并将函数传递给它。

[http://api.jquery.com/filter/](http://api.jquery.com/filter/)

这是一个工作示例。

[http://jsfiddle.net/aTzzK/2/](http://jsfiddle.net/aTzzK/2/)

# angularjs - AngularJS 部分重载

> ID：12990412
> 
> 赞同：0
> 
> 时间：2012-10-20T16:26:49.923
> 
> 标签：angularjs

我正在尝试创建一个应用程序（[http://plnkr.co/edit/EVasje ），它基于示例](http://plnkr.co/edit/EVasje)[http://jsfiddle.net/cfulnecky/NRUxs/](http://jsfiddle.net/cfulnecky/NRUxs/)具有两步链接和部分内容。

现在，如果您单击“**案例**”，我会得到一个案例列表，如果我单击任何案例，则右侧面板仅更新一次。单击其他链接似乎不会重新加载部分。

知道我在做什么错吗？[这里是代码示例的一部分]

* * *

```
var app = angular.module('plunker', []);

app.config(['$routeProvider', function($routeProvider) {    
    $routeProvider.when('/',                {template: { left : 'dashboard.html', right: ''}});
    $routeProvider.when('/cases',           {template: { left : 'cases.html', right: ''}});
    $routeProvider.when('/cases/view/:id',  {template: { left : 'cases.html', right: 'caseDetail.html'}});
    $routeProvider.when('/departments',        {template: { left : 'departments.html', right: ''}});
    $routeProvider.otherwise({redirectTo: '/'});     }]);

app.controller('AppController', ['$rootScope','$scope','$route', '$location','$controller', function ($rootScope,$scope,$route,$location,$controller) {            
    $rootScope.$on('$routeChangeStart', function(scope, newRoute, Current){                              
        if (!newRoute) return;                
        $rootScope.template = newRoute.$route.template;        
    });
    $scope.isActive = function(route) {      
        return route === $location.path();
    };      }]);    function CasesCtrl($scope,CaseFactory) {        $scope.cases = CaseFactory.getCases;   }

function CaseDetailCtrl($scope,$route) {    $scope.caseNum = $route.current.params.id; }

app.factory('CaseFactory', function() {   return {
    getCases:[{"project":{"id":3,"name":"Listings"},"updated_on":"2012-09-17T17:30:00Z","tracker":{"id":1,"name":"Bug"},"created_on":"2012-09-17T17:30:00Z","author":{"id":4,"name":"John Doe"},"id":22,"status":{"id":1,"name":"New"},"start_date":"2012-09-17","subject":"Check all the content with copy scape using APi","description":"","priority":{"id":4,"name":"Normal"}},{"project":{"id":3,"name":"Listings"},"updated_on":"2012-09-17T17:29:48Z","tracker":{"id":1,"name":"Bug"},"created_on":"2012-09-17T17:29:48Z","author":{"id":4,"name":"John Doe"},"id":21,"status":{"id":1,"name":"New"},"start_date":"2012-09-17","subject":"Scrap all the sites who have similar content","description":"","priority":{"id":4,"name":"Normal"}},{"project":{"id":6,"name":"Quran"},"updated_on":"2012-09-17T17:26:54Z","tracker":{"id":1,"name":"Bug"},"created_on":"2012-09-17T17:26:54Z","author":{"id":4,"name":"John Doe"},"id":20,"status":{"id":1,"name":"New"},"start_date":"2012-09-17","subject":"Add jQuery UI Layout to Admin Panel","description":"","priority":{"id":4,"name":"Normal"}}]     }; }); 
```

非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:05:30.807

似乎有一个问题不是重新加载部分，而是告诉 angular 它应该将新的路由 id 参数分配给范围。您必须告诉控制器观察路线并相应地更新范围。这将起作用：

```
function CaseDetailCtrl($scope,$route, $rootScope) {
  $scope.caseNum = $route.current.params.id;  
  $rootScope.$on('$routeChangeSuccess', function(scope, newRoute, Current){                              
      $scope.caseNum = $route.current.params.id;     
  });
} 
```

[http://plnkr.co/edit/TaV3gT?p=preview](http://plnkr.co/edit/TaV3gT?p=preview)

# node.js - 使用 MongoDB 聚合计算计数和平均值

> ID：12990415
> 
> 赞同：5
> 
> 时间：2012-10-20T16:27:08.787
> 
> 标签：node.js, mongodb, mongoose, aggregation-framework

我有一个简单的数据库布局，如下所示：

```
client
    id
    sex (male/female)
    birthday (date)    

client
    id
    sex (male/female)
    birthday (date)  

(...) 
```

我正在尝试编写一个聚合命令来输出我有多少男性和女性客户，我还想输出男性和女性的平均年龄，不确定我可以在同一个命令中执行此操作还是我需要2个单独的吗？

```
// Count of males/females, average age
Clients.aggregate({
    $project : {"sex"      : 1,
            "sexCount" : 1,
            "birthday" : 1,
            "avgAge"   : 1
               } 
    },
    {
        $match: {"sex": {$exists: true}} 
    },
    {
        $group: {
                    _id      : "$sex",
            sexCount : { $sum: 1 },
            avgAge   : { $avg: "$birthday" },
            }
    },
    { $sort: { _id: 1 } }
    , function(err, sex_dbres) {
            if (err)
                throw err;
            else{
                (...)
            }
        }); 
```

使用上面的代码，我得到了男性/女性的数量，但 avgAge 为 0。有什么想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T20:50:51.617

如果您将年龄存储在原始文档中，答案会简单得多（正如 Dmitry 发布的那样，您可以直接`avgAge:{$avg:"$age"}`迈出`$group`一步。

聚合框架非常漂亮，并且有许多很酷的运算符，可以让你“即时”计算这个缺失的年龄字段。

我要将聚合的每个步骤存储在一个变量中，以便更容易看到发生了什么：

```
today = new Date();
// split today and bday into numerical year and numerical day-of-the-year
project1= {
    "$project" : {
        "sex" : 1,
        "todayYear" : {
            "$year" : today
        },
        "todayDay" : {
            "$dayOfYear" : today
        },
        "by" : {
            "$year" : "$bday"
        },
        "bd" : {
            "$dayOfYear" : "$bday"
        }
    }
};
// calculate age in days by subtracting bday in days from today in days
project2 = {
    "$project" : {
        "sex" : 1,
        "age" : {
            "$subtract" : [
                {
                    "$add" : [
                        {
                            "$multiply" : [
                                "$todayYear",
                                365
                            ]
                        },
                        "$todayDay"
                    ]
                },
                {
                    "$add" : [
                        {
                            "$multiply" : [
                                "$by",
                                365
                            ]
                        },
                        "$bd"
                    ]
                }
            ]
        }
    }
};
// sum up for each sex the count and compute avg age (in days)
group = {
    "$group" : {
        "_id" : "$sex",
        "total" : {
            "$sum" : 1
        },
        "avgAge" : {
            "$avg" : "$age"
        }
    }
};
// divide days by 365 to get age in years.
project3 = {
    "$project" : {
        "_id" : 0,
        "sex" : "$_id",
        "total" : 1,
        "averageAge" : {
            "$divide" : [
                "$avgAge",
                365
            ]
        }
    }
}; 
```

现在您可以运行聚合：

```
> db.client.find({},{_id:0})
{ "sex" : "male", "bday" : ISODate("2000-02-02T08:00:00Z") }
{ "sex" : "male", "bday" : ISODate("1987-02-02T08:00:00Z") }
{ "sex" : "female", "bday" : ISODate("1989-02-02T08:00:00Z") }
{ "sex" : "female", "bday" : ISODate("1993-11-02T08:00:00Z") }
> db.client.aggregate([ project1, project2, group, project3 ])
{
    "result" : [
        {
            "sex" : "female",
            "total" : 2,
            "averageAge" : 21.34109589041096
        },
        {
            "sex" : "male",
            "total" : 2,
            "averageAge" : 19.215068493150685
        }
    ],
    "ok" : 1
}
> 
```

这不简单的原因是目前聚合框架不支持直接减去日期。请投票给[https://jira.mongodb.org/browse/SERVER-6239](https://jira.mongodb.org/browse/SERVER-6239)，它是针对下一个主要版本的——一旦实施，它应该允许直接减去日期（尽管您仍然需要将其转换为适当的粒度，在这种情况下可能是几年）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T19:26:36.067

日期对象不能“平均”，但数字可以。您可以将日期转换为时间戳值，然后从中找到平均值。但这仍然不是平均年龄，您需要从聚合函数之外的当前日期中减去结果。

另一种选择是假设可以仅使用日期的年份部分来计算年龄（也就是说，如果我出生于 2000 年 12 月 1 日，那么在今天的报告中，我将是 12 岁，而不是 11 岁）。在这种情况下，您可以使用[日期运算符](http://docs.mongodb.org/manual/reference/aggregation/#date-operators)来提取年份值。

```
$project : {"sex"      : 1,
            "sexCount" : 1,
            "year" : {$year: "$birthday"},
           } 
},
$project : {"sex"      : 1,
            "sexCount" : 1,
            "age" : {$subtract: [2012, '$year']},
           } 
}, 
```

# python - 字符串到字典 Python

> ID：12990416
> 
> 赞同：4
> 
> 时间：2012-10-20T16:27:14.633
> 
> 标签：python, python-2.7

例如我有这样的行：

```
iamonlywhoknock BREAKINGBAD 
```

什么意思

```
'iamonlywhoknock BREAKINGBAD\n' 
```

它的str，但我需要创建字典，如下所示：

```
{"iamonlywhoknock":"BREAKINGBAD"} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:32:25.277

像这样的东西？

```
>>> s='iamonlywhoknock BREAKINGBAD\n'
>>> k, v = s.split()
>>> {k: v}
{'iamonlywhoknock': 'BREAKINGBAD'} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T16:32:33.107

```
x='iamonlywhoknock BREAKINGBAD\n'.split(" ")
mydict={x[0]:x[1]} 
```

这应该适合你。这是基本的字符串拆分:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T16:41:09.733

这篇文章中的答案与您的问题相似：

[在 Python 中将分号分隔的字符串拆分为字典](https://stackoverflow.com/questions/186857/splitting-a-semicolon-separated-string-to-a-dictionary-in-python)

但您可能希望它看起来像这样：

```
s= 'iamonlywhoknock BREAKINGBAD\notherwhoknock BREAKINGBAD2'
dict(item.split(" ") for item in s.split("\n")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T16:37:05.010

```
a = 'iamonlywhoknock BREAKINGBAD\n'
b = a.split()
c = {b[0]:b[1]}

print c 
```

# message - Fuse ESB 能否实现消息代理和消息队列

> ID：12990420
> 
> 赞同：0
> 
> 时间：2012-10-20T16:27:29.640
> 
> 标签：message, activemq, mule, esb, fuseesb

我是 ESB 的新手（你可以说没有经验）。实际上我还没有真正理解 ESB 的真正含义。

我对 ESB 的期望是可以连接到任何客户端（.NET、Flex、Ajax、Android 等）的中间件。而且我希望 ESB 可以实现 MESSAGE QUEUE。因为我真的对消息队列很感兴趣。

我刚试过骡 ESB。我成功地创建了 SOA 请求-响应。但似乎 Mule ESB 没有消息队列。

**我的问题是**：Fuse ESB 是否可以实现消息队列？

谢谢，

Rizki Sunaryo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:33:38.127

是的，Fuse ESB 嵌入了一个消息代理（它的 Apache ActiveMQ）。因此，您可以使用 Fuse ESB 开箱即用。

您还可以使用 Fuse ESB 连接到选择的外部消息代理，使用 JMS 作为协议。例如连接到 WebSphereMQ、WebLogicAQ 等。

还有一个独立的 Fuse MQ 产品，它只是消息代理。所以如果你只想要一个消息系统，那么你可以选择 Fuse MQ。

你可以在这里找到一些细节

*   [http://fusesource.com/products/fuse-esb-enterprise/](http://fusesource.com/products/fuse-esb-enterprise/)
*   [http://fusesource.com/products/fuse-mq-enterprise/](http://fusesource.com/products/fuse-mq-enterprise/)

Red Hat 已经收购了 FuseSource，因此 Fuse 产品更名为 JBoss Fuse 和 JBoss A-MQ。您可以在此处找到详细信息：

*   [http://www.redhat.com/products/jbossenterprisemiddleware/fuse](http://www.redhat.com/products/jbossenterprisemiddleware/fuse)
*   [http://www.redhat.com/products/jbossenterprisemiddleware/amq/](http://www.redhat.com/products/jbossenterprisemiddleware/amq/)

# c# - 过滤器代码中的音频点击/弹出

> ID：12990423
> 
> 赞同：5
> 
> 时间：2012-10-20T16:27:55.303
> 
> 标签：c#, audio, filter, signal-processing, unity3d

我正在为 Unity 引擎中的音频过滤器创建一个 C# 脚本。

我的问题是，在通过我的过滤器运行后，生成的音频具有一致且频繁的“点击”、“弹出”或“跳过”。听起来有点像老式收音机。
我不确定是什么原因造成的。

这是我的代码：

```
public float cutoff;
public float resonance;

int sampleRate;

void Start()
{
    cutoff = 200;
    resonance = 1;

    sampleRate = AudioSettings.outputSampleRate;
}

void OnAudioFilterRead(float[] data, int channels)
{
    float c = 2 * Mathf.PI * cutoff/sampleRate;
    float r = 1 / resonance;

    float v0 = 0;
    float v1 = 0;

    for (int i = 0; i < data.Length; i++)
    {
        v0 =  (1 - r * c) * v0  -  (c) * v1  + (c) * data[i];
        v1 =  (1 - r * c) * v1  +  (c) * v0;

        data[i] = v1;
    }
} 
```

这是[OnAudioFilterRead()](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.OnAudioFilterRead.html)的文档。
这是我得到[原始低通代码](http://musicdsp.org/showArchiveComment.php?ArchiveID=185)的地方。

随着截止值接近其最大值 (127)，咔嗒声和爆破声变得更安静。

我对音频编程相当​​陌生，这可能很明显，所以我不确定是什么原因造成的。
比我更有知识的人可以解释我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:55:03.663

点击和弹出的常见原因（按“常见”顺序）是：

*   缓冲区长度错误（您与缓冲区重叠或未能将其填充到边界）
*   您的样本正在裁剪，并且您没有按应有的方式处理它 - 例如，您正在计算`short`s 中的所有内容，并且不关心包装值
*   您的 DSP 算法表现不佳
*   您的算法由于某种原因太慢，并且音频样本未及时交付，导致音频间隙

一种很好的调试技术是尝试缩小问题的原因，例如，直接在处理音频的例程中插入 PCM 转储。这样，您将知道例程的输出是否正常，并能够相应地集中调试工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T00:50:45.070

我已经解决了。我的 c 和 r 变量需要在调用 OnAudioFilterRead() 的过程中保持不变。让他们成员修复它。这是我完整的工作代码：

```
using UnityEngine;
using System.Collections;
using System;

public class LowPassFilter : MonoBehaviour {

    public float cutoff;
    public float resonance;

    const float CUTOFF_MAX = 128.0f;
    const float CUTOFF_MIN = 0.0f;
    const float RESONANCE_MAX = 128.0f;
    const float RESONANCE_MIN = 0.0f;

    float c;
    float r;
    float v0;
    float v1;

    int sampleRate;

    void Start()
    {
        cutoff = 20.0f;
        resonance = 0.0f;

        c = 0.0f;
        r = 0.0f;
        v0 = 0.0f;
        v1 = 0.0f;

        sampleRate = AudioSettings.outputSampleRate;
    }

    void OnAudioFilterRead(float[] data, int channels)
    {
        cutoff = Mathf.Clamp(cutoff, CUTOFF_MIN, CUTOFF_MAX);
        resonance = Mathf.Clamp(resonance, RESONANCE_MIN, RESONANCE_MAX);

        c = Mathf.Pow(0.5f, (128.0f - cutoff) / 16.0f);
        r = Mathf.Pow(0.5f, (resonance + 24.0f) / 16.0f);

        for (int i = 0; i < data.Length; i++)
        {
            v0 =  ((1.0f - r * c) * v0)  -  (c * v1)  + (c * data[i]);
            v1 =  ((1.0f - r * c) * v1)  +  (c * v0);

            data[i] = Mathf.Clamp(v1, -1.0f, 1.0f);
        }
    }
} 
```

# objective-c - UIImagePickerController 和 CollectionView 控制器/单元

> ID：12990427
> 
> 赞同：2
> 
> 时间：2012-10-20T16:28:25.467
> 
> 标签：objective-c, xcode, ios6, uiimagepickercontroller, uicollectionview

我有一个 CollectionViewController 和一个 CollectionViewCell。我正在从数据库中获取数据，因此在加载控制器时，它会动态创建相应的单元格。

每个单元格都有一个 UIButton 和 UITextView。我正在使用 UIButton 来显示图片（如果它存在于数据库中）或捕获图像（如果按下）。

```
InboundCollectionViewController.m

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath 
{
    InboundCollectionViewCell *inboundDetailCell = [collectionView dequeueReusableCellWithReuseIdentifier:@"InboundDetailCell" forIndexPath:indexPath];

    Image *current = [images objectAtIndex:indexPath.row];

    [inboundDetailCell.imageType setText:[NSString stringWithFormat:@"%@", [current pd_description]]];

    if ([current.pd_image isKindOfClass:[NSData class]] == NO) {
        [inboundDetailCell.imageButton addTarget:self action:@selector(useCamera)     forControlEvents:UIControlEventTouchUpInside];
    }
    else {
        [inboundDetailCell.imageButton setImage:[UIImage imageNamed:@"check.png"] forState:UIControlStateNormal];
    }

    return inboundDetailCell;
} 
```

到目前为止，一切都很好。我启动我的应用程序。集合视图控制器根据数据库的结果用单元格填充自己。

如果图像字段有图像，则在我的自定义 imageButton 的图像属性中加载“check.png”。

如果图像字段没有图像，则将 imageButton 的 TouchUpInside 操作设置为方法“useCamera”。

```
- (void)useCamera 
{
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
    }
    else
    {
        [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    }

    [imagePicker setDelegate:self];
    [self presentViewController:imagePicker animated:YES completion:NULL];
} 
```

现在，根据我正在遵循的教程，我必须实现以下代码：

```
-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

    // set image property of imageButton equal to the value in UIImage 'image' variable ???

    [self dismissViewControllerAnimated:YES completion:NULL];
} 
```

在我发现的大多数示例中，ImageView 和 ImagePickerController 是在同一个 ViewController 中创建的。因此很容易访问 ImageView 的图像属性（或我的情况下的按钮）。

我的问题是我的“IBOutlet UIButton imageButton”位于 InboundCollectionViewCell 内，而不是 InboundCollectionViewController。因此，我找不到将相机返回的图像传递给按钮的图像属性的方法。

请注意，我对 Objective C 和 Xcode 都很陌生，这是我的第一个项目.. 所以要温柔！:P :)

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:22:35.463

确保 useCamera 接收到被按下的按钮，并将其存储在成员变量中：

```
- (void)useCamera:(id)sender {
    UIButton *button = (UIButton *)sender;
    self.lastButtonPressed = sender;  // A member variable

    ...
} 
```

请注意，由于签名已更改，您需要将 touchUpInside 重新映射到此函数。

现在，在 imagePickerController:didFinishPickingMediaWithInfo: 中，您可以访问成员变量 self.lastButtonPressed 来更新其图像。

蒂姆

# android - 时钟和日历应用程序

> ID：12990432
> 
> 赞同：0
> 
> 时间：2012-10-20T16:29:06.413
> 
> 标签：android, date, time, calendar

我想制作时钟日历应用程序，但我很困惑，我在 android 中看到了很多包：时间、日期、日历、公历、时间 SQL……时间在我的目标 api 16 上已弃用。这个包比公历更新我很困惑，用什么包？保护你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:20:51.147

这对你来说将是一个很好的练习。我将从日历课程开始。您需要的所有功能都在那里，并且每个设备都支持它。

# silverlight - Chrome ，无法加载 Silverlight 插件

> ID：12990435
> 
> 赞同：2
> 
> 时间：2012-10-20T16:29:13.183
> 
> 标签：silverlight, google-chrome

有人知道如何强制 SL 5 在 chrome 中工作吗？

Chrome 版本为：版本 22.0.1229.94 m

IE 9 运行完美，Chrome 显示以下消息无法加载 Silverlight 插件。

谢谢。

# android - 仅执行 else 部分

> ID：12990442
> 
> 赞同：2
> 
> 时间：2012-10-20T16:29:44.363
> 
> 标签：android

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

即使 wel 长度为 0 且 flag9 为空，仅执行其他部分。有人可以帮我吗

```
Log.d(TAG, "flag8 "+ getIntent().getExtras().getString("flag").length());
Log.d(TAG, "flag9 "+ getIntent().getExtras().getString("flag"));
if( getIntent().getExtras().getString("flag")=="0"   ||getIntent().getExtras().getString("flag").length()==0)
{
 Log.d(TAG, "hidebeta "+ getIntent().getExtras().getString("flag"));
            beta.putExtra("beta", "hidebeta");
            flag=1;
            beta.putExtra("flag", "1");
                }
else {
    beta.putExtra("beta","showbeta");
    Log.d(TAG, "showbeta "+ getIntent().getExtras().getString("flag"));
    flag=0;
    beta.putExtra("flag","0");
                } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T16:31:21.883

在 Java 中你**不能**用来`==`比较字符串，你*必须*使用：

```
if(string.equals("example")) 
```

因此，让我们`equals()`在您的条件中使用并优化它：

```
String flag = getIntent().getStringExtra("flag");
if(flag.equals("0") || flag.length()==0) 
```

（此外，在尝试访问它们之前，您应该确保安全并检查是否`getIntent()`为空。）`flag`

阅读[如何比较 Java 中的字符串？](https://stackoverflow.com/q/513832/1267661)或有关[比较字符串](http://docs.oracle.com/javase/tutorial/java/data/comparestrings.html)的文档以获取更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T16:31:37.643

用于`equals`比较字符串，而不是`==`（比较对对象的引用）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-20T16:32:09.073

您永远不应该使用`==`运算符来比较两个`Strings`，因为它比较的是实际引用，而不是它们的值。改用`equals()`方法。希望这可以帮助。

# python - python：一个简单程序中的索引超出范围

> ID：12990447
> 
> 赞同：1
> 
> 时间：2012-10-20T16:30:24.230
> 
> 标签：python

在以下程序中，我得到了索引超出范围错误：

```
def evaluate(x, y):
    result = 0
    for i in x:
        result += (x[i])*(y**i)
    return result 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:31:51.777

您已经在遍历 的所有值`x`，无需再次索引它们：

```
def evaluate(x, y):
    result = 0
    for i in x:
        result += i * (y**i)
    return result 
```

比较以下两个：

```
>>> x = [3, 2]
>>> for i in x:
...     print i
...
3
2
>>> for i in x:
...     print x[i]
...
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
IndexError: list index out of range 
```

如果您希望`i`成为 的索引`x`，请使用[`enumerate()`](http://docs.python.org/library/functions.html#enumerate)获取该索引：

```
def evaluate(x, y):
    result = 0
    for i, value in enumerate(x):
        result += value * (y**i)
    return result 
```

# facebook - Facebook 图片 URL - 如何防止未经授权的用户访问？

> ID：12990448
> 
> 赞同：9
> 
> 时间：2012-10-20T16:30:31.330
> 
> 标签：facebook, security, web-applications, secure-coding

我对社交网络很感兴趣，并且偶然发现了一些让我感到好奇的东西。

facebook 如何阻止人们玩弄 URL 和访问他们不应该访问的照片？

让我扩展一下，这是我的提要上出现的 facebook 图片 URL 的更改示例-

[https://fbcdn-sphotos-ga.akamaihd.net/hphotos-ak-prn1/s480x480/](https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-prn1/s480x480/) {five_digit_number}_{twelve_digit_number}_{ten_digit_number}_n.jpg

所以，那些有更多网络应用经验的人大概会知道这个问题的答案，我怀疑它很好理解，但是是什么阻止我改变数字和看到其他人的照片，这可能是我不应该看到的？

[我知道这不起作用，我只是想了解他们如何维护安全并避免此问题]

提前谢谢了，

缺口

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T16:50:12.967

有几种方法可以实现它。

1.  第一个是链接到验证请求的脚本或操作，然后返回图像。[您可以在此处](https://stackoverflow.com/questions/186062/can-an-asp-net-mvc-controller-return-an-image)找到使用 ASP.NET MVC 的示例。缺点是它的效率非常低，并且您冒着为每个请求增加两倍带宽的风险（一次是为了让您的服务器可以从存储的任何位置获取图像，一次是为了将其提供给您的用户）。

2.  第二个选项，你可以像 Facebook 一样，只为每张照片生成晦涩的 url。正如托马斯在他的评论中所说，你不会猜到一个 27 位的数字。

3.  我认为第三个选项是最好的，尤其是如果您使用的是 Microsoft Azure 或 Amazon S3 之类的东西。Azure Blob 存储支持共享访问签名，让您可以为私有文件生成临时 url。这些可以设置为在几分钟内过期，或者持续一生。这些文件直接提供给用户，如果 url 在到期后泄漏，则没有风险。

    [Amazon S3 与Query String Authentication](http://docs.amazonwebservices.com/AmazonS3/latest/dev/S3_QSAuth.html)有相似之处。

最终，您需要弄清楚您的威胁模型，并权衡每种方法的利弊做出决定。在 Facebook 上，这些图片可能已与数百名朋友分享。对隐私的期望显着降低，因此对每个请求进行身份验证可能是多余的。一个随机的、难以猜测的 URL 可能就足够了，让他们通过他们的 CDN 提供数据，并最大限度地减少每个请求的处理量。使用选项 3，您仍然需要生成这些签名 URL 的开销。

# c# - 绑定到 DependencyProperty 没有结果

> ID：12990449
> 
> 赞同：1
> 
> 时间：2012-10-20T16:30:56.383
> 
> 标签：c#, wpf, binding, user-controls, dependency-properties

我在绑定到新控件的依赖属性时遇到问题。
我决定编写一些测试来检查这个问题。

**从 TextBox.Text 绑定到另一个 TextBox.Text**

XAML 代码：

```
<TextBox Name="Test" Text="{Binding ElementName=Test2, Path=Text, UpdateSourceTrigger=PropertyChanged}" />
<TextBox Name="Test2" Grid.Row="2" /> 
```

结果很好 - 当我在第一个 TextBox 中写东西时 -> 第二个 TextBox 正在更新（反之亦然）。

![在此处输入图像描述](../Images/45374a3f3a2740674be1f3c86c06ec80.png)

我创建了新控件-> 例如具有依赖属性“SuperValue”的“SuperTextBox”。

控制 XAML 代码：

```
<UserControl x:Class="WpfApplication2.SuperTextBox"
             ...
             Name="Root">
    <TextBox Text="{Binding SuperValue, ElementName=Root, UpdateSourceTrigger=PropertyChanged}" />
</UserControl> 
```

后面的代码：

```
public partial class SuperTextBox : UserControl
{
    public SuperTextBox()
    {
        InitializeComponent();
    }

    public static readonly DependencyProperty SuperValueProperty = DependencyProperty.Register(
        "SuperValue",
        typeof(string),
        typeof(SuperTextBox),
        new FrameworkPropertyMetadata(string.Empty)
    );

    public string SuperValue
    {
        get { return (string)GetValue(SuperValueProperty); }
        set { SetValue(SuperValueProperty, value); }
    }
} 
```

好的，现在测试！

**从 TextBox.Text 绑定到 SuperTextBox.SuperValue**

```
 <TextBox x:Name="Test1" Text="{Binding ElementName=Test2, Path=SuperValue, UpdateSourceTrigger=PropertyChanged}" />
    <local:SuperTextBox x:Name="Test2" Grid.Row="2"/> 
```

测试也正确！当我在 TextBox 中写东西时，SuperTextBox 正在更新。当我在 SuperTextBox 中写作时，TextBox 正在更新。一切正常！

现在有一个问题：
**从 SuperTextBox.SuperValue 绑定到 TextBox.Text**

```
 <TextBox x:Name="Test1"/>
    <local:SuperTextBox x:Name="Test2" SuperValue="{Binding ElementName=Test1, Path=Text, UpdateSourceTrigger=PropertyChanged}" Grid.Row="2"/> 
```

在这种情况下，当我在 SuperTextBox 中写东西时，TextBox 没有更新！ ![在此处输入图像描述](../Images/99912ba2d53236f460b21bd1cd373e7d.png)

我怎样才能解决这个问题？

PS：问题很长，很抱歉，但我尝试准确描述我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:47:13.103

将绑定模式更改为 TwoWay。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:26:09.327

因为在前两种情况下`Test1`知道何时需要更新自己，但在第三种情况下不知道。只`Test2`知道在第三种情况下应该何时更新。这就是为什么`TwoWay`在第三种情况下需要模式。

**编辑**

*   第一个案例在幕后工作，xaml 挂钩到 `AddValueChanged`由`PropertyDescriptor`. 由于它工作的原因，请参阅[此处](http://10rem.net/blog/2010/12/17/puff-the-magic-poco-binding-and-inotifypropertychanged-in-wpf)的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T18:06:14.897

一个有效而另一个无效的原因是，默认情况下将`Text`依赖属性`TextBox`定义为绑定`TwoWay`，而您的依赖属性`SuperValue`没有。如果除了源更新目标之外，还希望目标更新源，则需要使用双向绑定。

要解决此问题，您可以像这样添加`FrameworkPropertyMetadataOptions.BindsTwoWayByDefault`到`SuperValue's`元数据：

```
public static readonly DependencyProperty SuperValueProperty = DependencyProperty.Register(
    "SuperValue",
    typeof(string),
    typeof(SuperTextBox),
    new FrameworkPropertyMetadata(string.Empty, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault)
); 
```

# mime-types - Tika：Js、Css 的 MIME 类型检测

> ID：12990450
> 
> 赞同：1
> 
> 时间：2012-10-20T16:31:02.413
> 
> 标签：mime-types, apache-tika

我使用 Apache Tika 来提取各种文件的文本。现在我还想用它来检测文件的正确 MIME 类型。

例如，这适用于...

*   PDF 文件 ( `application/pdf`)
*   HTML 文件 ( `text/html`)

...但不适用于：

*   CSS 文件（`text/plain`而不是`text/css`）
*   Javascript 文件（`text/plain`而不是`text/javascript`）
*   ...

（这些 Mime 类型的结果来自我的应用程序以及 tika-app）。

我的应用程序需要一个确切的 MIME 类型，`text/css`而不是一般的`text/plain`. 蒂卡有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:11:00.797

你需要做两件事。首先，您需要向 Tika 提供文件名，以便它可以使用它来帮助将纯文本类型专门化为适当的子类型（CSS、JS 等）。其次，您需要确保您使用的是足够新的 Tika 版本。

我刚刚尝试使用最新版本的 Tika，并传入文件名，它可以很好地检测 JS 和 CSS 文件：

```
$ java -jar tika-app-1.3-SNAPSHOT.jar --detect testCSS.css 
text/css

$ java -jar tika-app-1.3-SNAPSHOT.jar --detect testJS.js
application/javascript 
```

此外，最新版本的 Tika（从 r1400795 开始）有一个单元测试，可以自动验证 JS 和 CSS 检测工作，所以你可以加倍确定它工作正常！

# java - 在Java中打印带有2位小数的整数

> ID：12990451
> 
> 赞同：15
> 
> 时间：2012-10-20T16:31:13.637
> 
> 标签：java, format, number-formatting, output

在我的代码中，我使用整数乘以 100 作为小数（0.1 是 10 等）。你能帮我格式化输出以显示为十进制吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-20T16:34:07.710

```
int x = 100;
DecimalFormat df = new DecimalFormat("#.00"); // Set your desired format here.
System.out.println(df.format(x/100.0)); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-20T16:38:14.400

我会说使用`0.00`格式：

```
 int myNumber = 10;
      DecimalFormat format = new DecimalFormat("0.00"); 
      System.out.println(format.format(myNumber)); 
```

它会像这样打印：           

```
 10.00 
```

**这里的优点是：**

如果你喜欢：

```
 double myNumber = .1;
      DecimalFormat format = new DecimalFormat("0.00"); 
      System.out.println(format.format(myNumber)); 
```

它会像这样打印：

```
 0.10 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-20T16:41:17.587

您可以通过除以它们的因子（作为双精度数）打印出编码为整数的小数

```
int i = 10; // represents 0.10
System.out.println(i / 100.0); 
```

印刷

```
0.1 
```

如果您需要始终显示两位小数，您可以使用

```
System.out.printf("%.2f", i / 100.0); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-15T20:32:02.080

基于[另一个答案](https://stackoverflow.com/a/42800823/744133)，使用[`BigDecimal`](https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html)，这也有效：

```
BigDecimal v = BigDecimal.valueOf(10,2);
System.out.println(v.toString());
System.out.println(v.toPlainString());
System.out.println(String.format("%.2f", v));
System.out.printf("%.2f\n",v); 
```

甚至您的好老人[`DecimalFormat`](https://docs.oracle.com/javase/8/docs/api/java/text/DecimalFormat.html)也可以使用[`BigDecimal`](https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html)：

```
DecimalFormat df = new DecimalFormat("0.00");
System.out.println(df.format(v)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-20T16:39:26.023

你可以试试这个： -

```
new DecimalFormat("0.00######"); 
```

或者

```
NumberFormat f = NumberFormat.getNumberInstance();
f.setMinimumFractionDigits(2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T18:17:58.913

您可以使用 int 的双重状态。它为您提供带小数的输出。然后你可以除以 100。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-20T18:28:07.947

您可以使用 int 的双重状态。它为您提供带小数的输出。

如果你想让数字站在点后面。你可以使用这个：

```
**int number=100;
double result;
result=number/(number.length-1);** 
```

我希望你能用这个。

# java - 如何在android的listview中膨胀gridview？

> ID：12990461
> 
> 赞同：0
> 
> 时间：2012-10-20T16:32:26.103
> 
> 标签：java, android, android-listview, nullpointerexception, android-gridview

所以我意识到我不能将其他元素放入android gridview，也不能将gridview放入scrollview，所以我尝试将gridview粘贴到只有1个listview列的android listview中，看看我是否可以做到这一点，这是成功，但是当我尝试膨胀列表内的网格视图时，我不断收到一个空指针异常，我在其中设置了实际的网格适配器，还有其他方法可以解决这个问题吗？

```
package com.listtest.testit;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AbsListView;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.AbsListView.OnScrollListener;
import android.widget.ListView;

public class ListTestActivity extends Activity {

ViewGroup footer;
LayoutInflater inflater;
List<String> theStrings = new ArrayList<String>();
ListAdapter adapter;
ListView list;
GridView grid;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    theStrings.add("");

    String[] numbers = new String[] { 
            "A", "B", "C", "D", "E",
            "F", "G", "H", "I", "J",
            "K", "L", "M", "N", "O",
            "P", "Q", "R", "S", "T",
            "U", "V", "W", "X", "Y", "Z"};

    list = (ListView) findViewById(R.id.list);

    inflater = getLayoutInflater();
    footer = (ViewGroup) inflater.inflate(R.layout.footer, list, false);
    list.addFooterView(footer, null, false);

    adapter = new ListAdapter(this, theStrings);
    list.setAdapter(adapter);

    ArrayAdapter<String> gridAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, numbers);

    grid.setAdapter(gridAdapter);

    list.setOnScrollListener(new OnScrollListener() {
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // Do nothing
        }

        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {

            final int lastItem = firstVisibleItem + visibleItemCount;

            // threshold being indicator if bottom of list is hit
            if (lastItem == totalItemCount) {

                //addMoreToArray();
                //adapter.notifyDataSetChanged();
            }
        }
    });
}

public class ListAdapter extends BaseAdapter {

    private Activity activity;
    private List<String> data;
    private LayoutInflater inflater=null;

    public ListAdapter(Activity a, List<String> theStrings) {
        activity = a;
        data=theStrings;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        grid=(GridView)vi.findViewById(R.id.gridView1);

        return vi;
    }
}

private void addMoreToArray() {

    theStrings.add("");

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T06:46:33.037

[**它**](http://sriramramani.wordpress.com/2013/08/14/grid-in-a-listview/)说你正在尝试的不是好方法，尽管他介绍了他如何在列表视图中管理网格视图。

这里是这样说的......这里的问题是，GridView 和 ListView 本身都是可滚动的，将可滚动容器嵌入到另一个可滚动容器中并不是一个好方法。

* * *

**Google 的 Market App 和 Google Music App**仅使用列表视图。没有滚动视图！（我检查了层次结构视图）。仅使用列表视图会有点麻烦。因为 getView() 会更复杂。但它确实如你所愿（我终于通过这种方式成功了）。

# c++ - Berkelium 编译错误

> ID：12990462
> 
> 赞同：1
> 
> 时间：2012-10-20T16:32:29.360
> 
> 标签：c++, python, chromium, berkelium

[这是我在 github ( https://github.com/sirikata/berkelium/issues/19](https://github.com/sirikata/berkelium/issues/19) )上的 berkelium 项目上发布的问题的转贴。

我的问题：

在 Linux（Debian 测试，64 位，gcc 4.7.1，cmake 2.8.9）上进行 chromium 编译期间，python 脚本`action_makenames.py`失败并出现以下错误：

```
...
  ACTION webcore_bindings_sources_HTMLNames out/Release/obj/gen/webkit/HTMLNames.cpp
  ACTION webcore_bindings_sources_SVGNames out/Release/obj/gen/webkit/SVGNames.cpp
  ACTION webcore_bindings_sources_MathMLNames out/Release/obj/gen/webkit/MathMLNames.cpp
  ACTION webcore_bindings_sources_XLinkNames out/Release/obj/gen/webkit/XLinkNames.cpp
  ACTION webcore_bindings_sources_XMLNSNames out/Release/obj/gen/webkit/XMLNSNames.cpp
Unknown parameter math for tags/attrs
Traceback (most recent call last):
  File "scripts/action_makenames.py", line 174, in <module>
    sys.exit(main(sys.argv))
  File "scripts/action_makenames.py", line 156, in main
    assert returnCode == 0
AssertionError
make: *** [out/Release/obj/gen/webkit/MathMLNames.cpp] Error 1
make: *** Waiting for unfinished jobs....
Unknown parameter a for tags/attrs
Traceback (most recent call last):
  File "scripts/action_makenames.py", line 174, in <module>
    sys.exit(main(sys.argv))
  File "scripts/action_makenames.py", line 156, in main
    assert returnCode == 0
AssertionError
Unknown parameter a interfaceName for tags/attrs
make: *** [out/Release/obj/gen/webkit/SVGNames.cpp] Error 1
Traceback (most recent call last):
  File "scripts/action_makenames.py", line 174, in <module>
    sys.exit(main(sys.argv))
  File "scripts/action_makenames.py", line 156, in main
    assert returnCode == 0
AssertionError
make: *** [out/Release/obj/gen/webkit/HTMLNames.cpp] Error 1
Unknown parameter actuate for tags/attrs
Traceback (most recent call last):
  File "scripts/action_makenames.py", line 174, in <module>
    sys.exit(main(sys.argv))
  File "scripts/action_makenames.py", line 156, in main
    assert returnCode == 0
AssertionError
make: *** [out/Release/obj/gen/webkit/XLinkNames.cpp] Error 1
Unknown parameter xmlns for tags/attrs
Traceback (most recent call last):
  File "scripts/action_makenames.py", line 174, in <module>
    sys.exit(main(sys.argv))
  File "scripts/action_makenames.py", line 156, in main
    assert returnCode == 0
AssertionError
make: *** [out/Release/obj/gen/webkit/XMLNSNames.cpp] Error 1
Failed to install: chromium 
```

看起来 python 脚本正在调用 perl 脚本，而 perl 脚本在第 209 行即将死去：

```
die "Unknown parameter $parameter for tags/attrs\n" if !defined($parameters{$parameter}); 
```

“未知参数”是：

*   数学
*   一个
*   接口名称
*   启动
*   xmlns

我不确定这些参数来自哪里。

任何人都知道如何纠正这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T17:17:57.530

原来是 gcc 4.6 的预处理器错误。作为修复，您必须删除`-P`.gcc 预处理器命令的参数`make_names.pl`。

**错误报告**： [http ://code.google.com/p/chromium/issues/detail?id=46411](http://code.google.com/p/chromium/issues/detail?id=46411)

**错误修复**： [http ://trac.webkit.org/changeset/84123](http://trac.webkit.org/changeset/84123)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:38:32.093

听起来你可能缺少一个目录，a la

[http://aur.archlinux.org/packages.php?ID=45713](http://aur.archlinux.org/packages.php?ID=45713)

# ios - Cocos2d + Box2d - 如何调试/显示身体？

> ID：12990475
> 
> 赞同：1
> 
> 时间：2012-10-20T16:34:08.800
> 
> 标签：ios, cocos2d-iphone, box2d, box2d-iphone

我使用 Cocos2d (2.0) 和随附的 Box2d 创建了一个非常简单的设置。我的世界中有一些实体，但还没有与它们关联的精灵，我想调试它们的方向、位置等。

这似乎是一项非常标准的任务，但我无法轻松找到如何做到这一点。根据我的研究，它似乎与这些方法有关：

```
_world->SetDebugDraw(...);
_world->DrawDebugData(...);
// and the GLES-Render class 
```

帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:53:57.143

我想通了，以防其他人偶然发现这一点。

1.  在你的初始化中，你想要创建一个调试绘图对象（GLESDebugDraw 是 Cocos2d+Box2d 自带的）。
2.  设置标志以指定您想要绘制的内容（形状、重心、关节等）。
3.  将其分配给您的世界对象。

`b2Draw *debugDraw = new GLESDebugDraw(PTM_RATIO);`

`debugDraw->SetFlags(GLESDebugDraw::e_shapeBit);`

`_world->SetDebugDraw(debugDraw);`

然后，诀窍是您需要覆盖**ccLayer 的 draw 方法**并调用：

`_world->DrawDebugData();`

它必须在 draw 方法中，否则这将不起作用。我最初试图把它放在我自己的预定方法中（我称之为 _world->step()），但这没有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T08:18:00.503

在 coco2dx v2.2 中，这样做是

//在init()中写入

```
_debugDraw = new GLESDebugDraw(PTM_RATIO);
  _world->SetDebugDraw(_debugDraw);

  uint32 flags = 0;
  flags += b2Draw::e_shapeBit;
  flags += b2Draw::e_jointBit;
  flags += b2Draw::e_aabbBit;
  flags += b2Draw::e_pairBit;
  flags += b2Draw::e_centerOfMassBit;
  _debugDraw->SetFlags(flags); 
```

/////////////////////////////////////////

无效 HelloWorld::draw() {

```
CCLayer::draw(); 
```

# 如果 CC_ENABLE_BOX2D_INTEGRATION

```
ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );

kmGLPushMatrix();

_world->DrawDebugData();

kmGLPopMatrix(); 
```

# 万一

}

如果有，请检查 Application.mk 文件

APP_CPPFLAGS := -frtti -DCC_ENABLE_CHIPMUNK_INTEGRATION=1 -DCOCOS2D_DEBUG=1

然后将其替换为

APP_CPPFLAGS := -frtti -DCC_ENABLE_BOX2D_INTEGRATION=1 -DCOCOS2D_DEBUG=1

# batch-file - SHIFT 不影响 %*

> ID：12990480
> 
> 赞同：3
> 
> 时间：2012-10-20T16:34:49.857
> 
> 标签：batch-file, arguments

我正在尝试将一些可选参数添加到批处理文件中，但遇到了麻烦，因为该`SHIFT`命令不会影响*all-arguments*变量`%*`。

如果我必须使用，有谁知道我如何允许可选的批处理文件参数`%*`？

例如，一个简单的示例，它仅将参数打印到屏幕上，带或不带换行符，使用可选参数来确定哪个：

```
@echo off
if (%1)==()   goto usage
if (%1)==(/n) goto noeol
goto eol

:eol
  echo %*
  goto :eof

:noeol
  shift
  call showline %*
  goto :eof

:usage
  echo Prints text to the screen
  echo > %0 [/n] TEXT
  echo /n to NOT print a new-line at the end of the text
  goto :eof 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T05:58:10.450

如您所知，`shift`对 没有影响`%*`，但您可以构造 %* 等价物。

我们将调用以下内容`line.bat` **：**

```
@echo off
set line=%1
:loop
shift
if not "%1"=="" (
  set line=%line% %1
  goto :loop
)

echo   %%* = %*
echo line = %line% 
```

如果您输入以下命令（注意 3 和 4 之间的双空格）**：**

```
line 1 2 3  4 bla dee dah 
```

您将获得以下输出**：**

```
 %* = 1 2 3  4 bla dee dah
line = 1 2 3 4 bla dee dah 
```

请注意，`%*`保留多个空格，而使用`%n`符号则不会。

* * *

使用类似的东西，您可以允许您的用户按任何顺序放置他们的参数。

```
:loop
  :: Single variable parameters
  if "%1"=="something" set something=true
  :: Multi variable parameters 
  if "%~1"=="/source" shift & set source=%1
  shift
if not "%~1"=="" goto :loop 
```

请注意，在多变量参数语句中，我包括一个`shift`语句和一个`set`由 & 号分隔的语句。告诉命令处理器接下来`&`要执行一个单独的命令。

* * *

**编辑：**

仅供参考：我建议在检查变量的内容时使用双引号。**通常**你可以使用**任何**字符，甚至不需要使用两个，因为它们只是为了确保空变量不会导致错误。例如，when`%1`为空并且您执行`if not hello==%1 call :sub`命令处理器将看到此内容`if not hello== call :sub`并与之进行比较`hello`，`call`然后尝试执行`:sub`，并抛出错误。在那个特定的情况下`if not xhello==x%1 call :sub`就好了`if not "hello"=="%1" call :sub`，因为一个空的`%1`会导致命令处理器看到`if not xhello==x call :sub`。

**但是**如果变量包含任何特殊字符，则使用双引号以外的字符**会导致问题。**

使用括号作为变量分隔符（如 (%1)）可能会导致问题。例如，（特殊）管道字符在括号内的播放效果不佳，转义字符似乎消失了，既不充当普通字符，也不充当转义字符。

此外，括号本身就是特殊字符，旨在对不同的代码行进行分组和/或分隔，并且可能并不总是像预期的那样起作用。

最后，双引号本身是特殊字符**，专门设计用于包围其他特殊字符**，允许它们充当普通字符。这就是为什么您可能会看到未引用的变量，然后再次引用，就像这样。

```
set var="%~1"  & REM This sort of thing is used to insure that a variable is quoted.
                 REM %~1 unquotes %1 if it is already quoted, and leaves it alone if
                 REM %1 is not quoted.

set "var=%~1"  & REM This code assumes that `%1` contains special characters and
                 REM like before unquotes a quoted %1, but leaves the variable itself
                 REM unquoted. The double-quotes surrounding the variable and data
                 REM protects the command processor from any special characters that
                 REM exist in the data. Remember that anytime you reference `%var%`,
                 REM you will need to also surround the variable and data with
                 REM double-quotes. 
```

快速检查报价是`if exist %1 if %1==%~1 echo Unquoted`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:37:20.600

我喜欢 James 的解决方案，因为它不需要用户提供任何特别的东西（这总是更可取的），但我只是想到了另一种方法；将参数放在引号中并在运行时剥离它们：

```
Print.bat:

@echo off
if (%1)==()   goto usage
if (%1)==(/n) goto noeol
goto eol

:eol
            :: Use %~1 to 
    echo %~1
    goto :eof

:noeol
    shift
    call showline %~1
    goto :eof

:usage
    echo Prints text to the screen
    echo > %0 [/n] TEXT
    echo /n to NOT print a new-line at the end of the text
    goto :eof

Results:

    C:\>print.bat "foo bar baz"
    foo bar baz

    C:\>print.bat /n "foo bar baz"
    foo bar baz
    C:\> 
```

# java - 如何使 JSON 输出的链接在 android 中可点击？

> ID：12990485
> 
> 赞同：0
> 
> 时间：2012-10-20T16:35:44.073
> 
> 标签：java, php, android, mysql

我刚刚开始构建android应用程序。我有一个输出 URL 的 php 脚本。该 URL 仅显示并且不可点击。我想让 URL 可点击，这样如果人们点击链接，设备浏览器就会打开链接。该链接存储在通过 php 获取的 MySQL 数据库中。我正在使用 JSON 编码。

比如php输出：{"result":[{"rid":"3","rname":"新招学生名单","rinfo":"http://mydomain.com/out.php"} ],"成功":1}

在 android 应用程序中，我可以看到 [http://mydomain.com/out.php](http://mydomain.com/out.php) 但链接不可点击。

在应用程序中输出上述 php 输出的 Java 代码

```
 package in.thespl.spl.notifications;

 import java.util.ArrayList;
 import java.util.HashMap;
 import java.util.List;

 import org.apache.http.NameValuePair;
 import org.json.JSONArray;
 import org.json.JSONException;
 import org.json.JSONObject;

 import android.app.ListActivity;
 import android.app.ProgressDialog;
 import android.content.Intent;
 import android.os.AsyncTask;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.View;
 import android.widget.AdapterView;
 import android.widget.AdapterView.OnItemClickListener;
 import android.widget.ListAdapter;
 import android.widget.ListView;
 import android.widget.SimpleAdapter;
 import android.widget.TextView;

 public class AllResultsActivity extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> productsList;

// url to get all products list
private static String url_all_products = "http://mydomain.in/out.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_PRODUCTS = "result";
private static final String TAG_PID = "rid";
private static final String TAG_NAME = "rname";
private static final String TAG_INFO = "rinfo";

// products JSONArray
JSONArray products = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_products);

    // Hashmap for ListView
    productsList = new ArrayList<HashMap<String, String>>();

    // Loading products in Background Thread
    new LoadAllProducts().execute();

    // Get listview
    ListView lv = getListView();

    // on seleting single product
    // launching Edit Product Screen
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String pid = ((TextView) view.findViewById(R.id.rid)).getText()
                    .toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    AllResultsActivity.class);
            // sending pid to next activity
            in.putExtra(TAG_PID, pid);

            // starting new activity and expecting some response back
            startActivityForResult(in, 100);
        }
    });

}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {
        // if result code 100 is received
        // means user edited/deleted product
        // reload this screen again
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}

/**
 * Background Async Task to Load all product by making HTTP Request
 * */
class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(AllResultsActivity.this);
        pDialog.setMessage("Loading results. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // products found
                // Getting Array of Products
                products = json.getJSONArray(TAG_PRODUCTS);

                // looping through All Products
                for (int i = 0; i < products.length(); i++) {
                    JSONObject c = products.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_PID);
                    String name = c.getString(TAG_NAME);
                    String info = c.getString(TAG_INFO);
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_PID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_INFO, info);

                    // adding HashList to ArrayList
                    productsList.add(map);
                }
            } else {
                // no products found
                // Launch Add New product Activity
                Intent i = new Intent(getApplicationContext(),
                        AllResultsActivity.class);
                // Closing all previous activities
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        AllResultsActivity.this, productsList,
                        R.layout.list_item, new String[] { TAG_PID,
                                TAG_NAME, TAG_INFO },
                        new int[] { R.id.rid, R.id.rname, R.id.rinfo});
                // updating listview
                setListAdapter(adapter);
            }
        });

    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:43:36.300

您是否在文本框中显示 url，如果是，请在 TextView 中添加自动链接属性

```
android:autoLink="all" 
```

或致电

```
textView.setAutoLinkMask(Linkify.ALL); 
```

在代码中

# haskell - 运行 cabal-install 时出错：ExitFailure 1 (Mac OS X lion)

> ID：12990486
> 
> 赞同：10
> 
> 时间：2012-10-20T16:35:55.713
> 
> 标签：haskell, functional-programming

尝试运行 cabal install cabal-install 时出现以下错误 我已经从以下位置安装了 haskell 平台：[http](http://www.haskell.org/platform/) ://www.haskell.org/platform/ for Mac OS X Lion。我想运行 cabal install cabal-install 这样我就可以安装 quickcheck

尝试更新时，我收到此错误。

```
$ cabal install cabal-install
Resolving dependencies...
Configuring cabal-install-1.16.0...
Building cabal-install-1.16.0...
Preprocessing executable 'cabal' for cabal-install-1.16.0...
<command line>: cannot satisfy -package-id HTTP-4000.2.3-d6c69f84aec25261a9a3f6946119d9d2
    (use -v for more information)
cabal: Error: some packages failed to install:
cabal-install-1.16.0 failed during the building phase. The exception was:
ExitFailure 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T04:16:31.320

尝试：

```
sudo ghc-pkg recache 
```

我有同样的问题，这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:32:59.100

转到您的 .cabal/config 文件，查找显示“library-profiling:”的行。对于 MacOSX，这应该设置为“False”，否则它将无法找到已安装的软件包。你会在构建阶段遇到有趣的错误，因为“可能”某些包没有安装，所以它无法导入某些模块。

# c# - .net linq 实体框架 groupby

> ID：12990489
> 
> 赞同：1
> 
> 时间：2012-10-20T16:36:00.907
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我有一个包含 DaysInTrade、PercentGain 等列的数据库表

我想要按 DaysInTrade 分组的 PercentGain 总和

所以：

```
DaysInTrade,PercentGain
1, 5
1,6
2,4 
```

会给我：

```
DaysInTrade, Sum
1, 11
2,4 
```

除非我使用 Sum 或 Select 之类的东西，否则我无法让智能感知在“选择新”部分工作。无论我执行 ts.DaysInTrade 还是 gts.DaysInTrade，下面的 DIT 列都会显示为空白

```
 var partialQuery = (from ts in context.TradeSnapshots
                            group ts by ts.DaysInTrade
                            into gts
                            select
                            new
                                {
                                    profit = gts.Sum(s => s.PercentGain),
                                    DIT = gts.Select(ts=>ts.DaysInTrade)
                                });
        dataGridViewTradeSnapshots.DataSource = partialQuery.ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:40:10.340

您想在分组上使用密钥。请参阅有关[文档](http://msdn.microsoft.com/en-us/library/bb344977.aspx)`IGrouping<TKey,TElement>`

```
var partialQuery = (from ts in context.TradeSnapshots
                        group ts by ts.DaysInTrade
                        into gts
                        select
                        new
                            {
                                profit = gts.Sum(s => s.PercentGain),
                                DIT = gts.Key
                            });
dataGridViewTradeSnapshots.DataSource = partialQuery.ToList(); 
```

# android - Android 是使用 TableLayout 还是 GridView 更好

> ID：12990497
> 
> 赞同：1
> 
> 时间：2012-10-20T16:37:01.703
> 
> 标签：android, android-layout, mono, xamarin.android, monodevelop

我正在开发一个应用程序，我想要 12 个 ImageButtons (3 x 4)。居中在 android 屏幕和 ImageButtons 所在屏幕的中心部分，以具有颜色或渐变背景。

最好用 TableLayout 或 GridView 来做到这一点......或者其他东西。我是 Mono 和 Android 的新手，因此不胜感激。我希望在设计器中完成大部分布局，但我不确定最好的方法。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:31:10.793

我认为`GridView`更好用，因为它支持视图的回收。如果`TableLayout`所有视图都保留在内存中。

即使按钮数量增加，`GridView`也会照顾它。确保您正确实施视图回收，否则您可能会出现内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:12:32.293

如果只有 12 个按钮，TableLayout 可能更容易实现，因为您不必弄乱适配器。如果您需要滚动或者按钮的数量可能会随着时间的推移而增加，那么最好使用 GridView。

您可能需要查看 Android 支持库 v7 中的 GridLayout。它有点像 TableLayout，但看起来更简单，比如将按钮包装到一组列中。

# apache-flex - 可绑定变量不能分配给其他变量

> ID：12990502
> 
> 赞同：0
> 
> 时间：2012-10-20T16:37:29.733
> 
> 标签：apache-flex

为什么 productitem.idProduct 的值不能赋值给变量 Ai？

```
 [Bindable] public var productitem:Object;

public function dataGrid_creationCompleteHandler(event:FlexEvent):void
            {
                var Ai:int = productitem.idProduct;

            getAllPorductstatushistoryResult.token = porductstatushistoryService.getAllPorductstatushistory();
            getPorductitemhistoryProductIDResult.token = porductstatushistoryService.getPorductitemhistoryProductID(Ai);
        } 
```

并且错误堆是

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。

```
at productDetailComp/dataGrid_creationCompleteHandler()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\src\productDetailComp.mxml:153]

at productComp/productdataGridItemSelect()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\src\productComp.mxml:56]

at productComp/refreshApp_product()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\src\productComp.mxml:73]

at productComp/___productComp_Group1_creationComplete()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\src\productComp.mxml:9] 
```

第153行是行

```
var Ai:int = productitem.idProduct; 
```

第56行是行

```
pC.dataGrid_creationCompleteHandler(e); 
```

第 73 行是行

```
 productdataGridItemSelect(e); 
```

这是一部分

```
 protected function productdataGridItemSelect(event:GridSelectionEvent):void
        {

            ProductDetailComp.productitem=productdataGrid.selectedItem;

            var pC:productDetailComp = new productDetailComp();
            var e:FlexEvent;
            pC.dataGrid_creationCompleteHandler(e);

        }

        public function refreshApp_product( ):void{

            //var productdataGrid:Object;

            //productdataGrid.selectedIndex = 5;

            productdataGrid.selectedIndex = 0;

            var e:GridSelectionEvent;

            productdataGridItemSelect(e);

        } 
```

第一个问题是为什么函数会停在那里？另一个问题是“productdataGrid.selectedIndex = 0;” 不工作，也没有预先选择任何数据网格。有没有其他方法可以让它工作？

# java - 无法识别与服务器的 Android 连接或引发错误。我究竟做错了什么？

> ID：12990504
> 
> 赞同：0
> 
> 时间：2012-10-20T16:37:32.543
> 
> 标签：java, android, apache, networking

我正在尝试通过 android 应用程序将 JSON 数据推送到服务器，但无法隔离问题。服务器根本没有收到连接，但客户端没有任何问题。

```
public void getServerData() throws JSONException, ClientProtocolException, IOException {
    DefaultHttpClient httpClient = new DefaultHttpClient();
    ResponseHandler <String> resonseHandler = new BasicResponseHandler();
    HttpPost postMethod = new HttpPost("HTTP://URL_GOES_HERE/FOLDER");
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    //Log.v("JSON being sent", json.toString());
    nameValuePairs.add(new BasicNameValuePair("jsonString", json.toString()));
    postMethod.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    String response = httpClient.execute(postMethod,resonseHandler);

    JSONObject jsonResponse = new JSONObject(response);
    Log.v("beginresponse","beginresponse");
    Log.v("server response", jsonResponse.toString());
    Log.v("endresponse","endresponse");
    //Log.v("msg to server", json.toString()); 
```

}

这是一些示例日志输出：

```
10-20 11:31:09.195: I/APACHE HTTP (thCr=1) - NafHttpAuthStrategyDefault(25802): (thUse=1) NafHttpAuthStrategyDefault()
10-20 11:31:09.205: I/APACHE HTTP (thCr=1) - NafHttpAuthStrategyDefault(25802): (thUse=1)    cached value : gbaSupportIsPossible=null
10-20 11:31:09.205: I/APACHE HTTP (thCr=1) - NafHttpAuthStrategyDefault(25802): (thUse=1)    The current context is NOT a context of GBA service.
10-20 11:31:09.215: I/APACHE HTTP (thCr=1) - GbaSupportPermissionRequestCheckerImpl(25802): (thUse=1) isCurrentProcessRequestedGba()#finished   result=false
10-20 11:31:09.215: I/APACHE HTTP (thCr=1) - GbaSupportPermissionRequestCheckerImpl(25802): (thUse=1) isCurrentProcessAllowedToUseGba()#started   result=false
10-20 11:31:09.215: I/APACHE HTTP (thCr=1) - NafHttpAuthStrategyDefault(25802): (thUse=1)    The GBA permission wasn't requested for this process.
10-20 11:31:09.215: I/APACHE HTTP (thCr=1) - NafHttpAuthStrategyDefault(25802): (thUse=1) It is impossible to support GBA now (many possible reasons: no Android Context, current client is GBA service, etc.), then it will be just usual HTTP.
10-20 11:31:09.215: I/APACHE HTTP (thCr=1) - NafRequestExecutorWrapperRedirectionHandler(25802): (thUse=1)    It isn't GBA flow, redirection responses are not handled.
10-20 11:31:09.226: W/MediaRecorder(25802): mediarecorder went away with unhandled events
10-20 11:31:12.008: D/memalloc(25802): ion: Unmapping buffer  base:0x5ba42000 size:1536000
10-20 11:31:12.008: D/memalloc(25802): ion: Unmapping buffer  base:0x5bcb9000 size:1536000
10-20 11:31:12.008: D/memalloc(25802): ion: Unmapping buffer  base:0x5be30000 size:1536000
10-20 11:31:12.018: D/CLIPBOARD(25802): Hide Clipboard dialog at Starting input: finished by someone else... !
10-20 11:31:18.014: D/memalloc(25802): ion: Mapped buffer base:0x5ba42000 size:1536000 offset:0 fd:46
10-20 11:31:18.074: D/memalloc(25802): ion: Mapped buffer base:0x5bcb9000 size:1536000 offset:0 fd:53
10-20 11:31:23.439: D/memalloc(25802): ion: Mapped buffer base:0x5be30000 size:1536000 offset:0 fd:56
10-20 11:31:23.580: I/mic(25802): 1
10-20 11:31:23.580: I/path(25802): /mnt/sdcard/most-recent-recording.aac 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:30:39.143

是的，我猜从 API 11 开始，服务器连接将无法在 UI 线程上运行。所以试着把它放到异步任务中。

# android - 什么时候在 Android 应用的 admob 上激活

> ID：12990512
> 
> 赞同：2
> 
> 时间：2012-10-20T16:38:52.073
> 
> 标签：android, admob

我制作了集成了 admob 的 Android 应用程序。然后我在我的测试设备上运行这个应用程序，它会在屏幕上显示广告横幅。但是广告的状态仍然是无效的。这让我很困惑。

你知道当admob激活时吗？运行从市场商店下载的这个应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T17:03:21.377

AdMob 统计信息不是实时的。可能需要几个小时才能在 admob 网站上看到您的请求。

# javascript - Jquery 从远程主机获取 json

> ID：12990520
> 
> 赞同：6
> 
> 时间：2012-10-20T16:40:00.750
> 
> 标签：javascript, jquery, cross-domain

嗨，我正在尝试使用这段代码从远程主机读取 json。

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script>
$(document).ready(function(){
$("button").click(function(){
$.getJSON("http://xx.xxx.xxx.xx/rest/user.json",function(result){
  $.each(result, function(i, field){
    $("div").append(field + " ");
      });
    });
  });
});
</script>
</head>
<body>

<button>Get JSON data</button>
<div></div>

</body>
</html> 
```

问题是当我在浏览器中输入 url 时，我会从中获取 json。但是使用上面的jquery方法获取json失败。

有人可以在这方面提供帮助。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T16:47:13.537

我将假设此页面不是从托管 JSON 的站点提供的。

您正在尝试发出跨域请求，大多数（？）浏览器都允许这样做。您遇到了所谓的浏览器同源策略。这是浏览器内置的安全措施。它不允许您向与请求页面不在同一来源的位置发出 XHR 请求。

有几种方法可以解决这个问题：

1.  使用服务器端代理发出请求
2.  使用[JSONP](http://remysharp.com/2007/10/08/what-is-jsonp/)发出请求（参见 GBD 的回答）
3.  [研究](http://enable-cors.org/)CORS

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T16:47:46.363

你有跨域问题，所以你需要使用 JSONP 所以改变你的 jquery 方法如下

> 如果 URL 包含字符串“callback=?” （或类似的，由服务器端 API 定义），请求被视为 JSONP。

```
$.getJSON("http://xx.xxx.xxx.xx/rest/user.json?jsoncallback=?",function(result){
  $.each(result, function(i, field){
    $("div").append(field + " ");
      });
    }); 
```

jQuery 手册：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:47:03.117

不允许跨域查询。有关可能的解决方法，请参阅[ajax jquery: can't get json/xml from other domain](https://stackoverflow.com/a/9374770/926620)。另一种方法是在同一域上使用代理将本地查询代理到远程主机。

# matlab - 在matlab上绘制决策边界

> ID：12990525
> 
> 赞同：0
> 
> 时间：2012-10-20T16:40:14.523
> 
> 标签：matlab, plot

我有一些已知参数 W=[ab], X0=[c;d] 和决策边界 W'*(x-X0) = 0。我知道如果我在适合这个方程的点上画一条线，我有一个决策边界，但我无法在代码上解决它。我怎么能在 Matlab 中画出这条决策线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:34:59.347

我通过将方程转换为可以解决给定 x 找到 y 的格式来解决问题。然后我遍历所有可能的 x 值并找到相应的 y 值。然后情节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T13:37:00.290

您可以使用 matlab 函数作为决策边界
plotpv(i,o)
plotpc(weight,bias)

* * *

否则你可以做的是，正如你所建议的

```
figure(1)
hold on
for i=xminLIM:xmaxLIM
    for j=yminLIM:ymaxLIM
         if(W'*([i;j]-X0) == 0)
             plot(i,j,'-r')
         end
    end
end
hold off 
```

# android - 如何使用 ActionScript 3 访问 APK 文件中的资产？（土坯空气）

> ID：12990526
> 
> 赞同：4
> 
> 时间：2012-10-20T16:40:40.760
> 
> 标签：android, actionscript-3, flash, assets, file-access

我已经使用 Flash Pro CS6 制作了一个程序。现在，使用 Adob​​e AIR，我将其导出到“AIR for Android”。在设置中，在“包含的文件”下，我添加了一个文件夹“images”以打包到生成的 APK 文件中。此文件夹包含 JPG 图像。

导出后，我得到了 APK 文件。如果我在 WinRAR 中打开它，那里有一个文件夹“assets”。里面是 main.swf（我的程序）和文件夹“images”（包含 JPG 图像）。

我的问题是，如何在我的程序中通过 ActionScript 3 访问这些打包的 JPG 图像？

例如图像“/assets/images/0001.jpg”，我希望能够在运行时在我的 swf 中显示它（它也打包在 APK 文件中，并且在 Android 上通过 AIR 运行）。

我无法将 JPG 图片直接嵌入到 swf 文件中，因为它们太多了。并且图像必须打包在实际的 APK 文件中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T08:49:47.723

在我的另一个问题中，我自己弄清楚了，或者更确切地说是在一些帮助下实现了它：

[在 ActionScript 3 中将 JPG 读入 BitmapData（JPG 在 APK 文件中）](https://stackoverflow.com/questions/12990242/reading-jpg-into-bitmapdata-in-actionscript-3-jpg-is-inside-apk-file)

```
loader.load(new URLRequest("app:/images/image.jpg")); 
```

只需使用 COMPLETE 事件并记住 VM 是单线程的，因此在加载图像时我不能“休眠线程”。

# emacs - 使用自定义缓冲区为函数提供参数

> ID：12990527
> 
> 赞同：0
> 
> 时间：2012-10-20T16:40:54.743
> 
> 标签：emacs, customization, interactive

我需要使用很多参数交互地调用一个函数（目前是 7，但它会增长）。连续阅读所有论点会产生糟糕的体验。例如，我要求用户输入一个类名。类名可以由它所在的包完全限定。因此，如果用户认为它必须是完全合格的，然后我稍后要求他们提供包名称，则用户无法返回并修复错误。

输入的许多方面也很难同时处理。例如，我需要确保某些字符不会以某种模式出现在正在读取的字符串等中。如果输入的最后一项验证失败，用户重新启动整个过程会感到沮丧，而如果我有一个自定义缓冲区可供我使用，我可以简单地阻止他们提交更改，如果它没有验证并保留已经提交的良好值。

tl;博士

我正在寻找一种方法来打开自定义缓冲区并将用户输入读入交互式调用的函数中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:27:33.063

我建议使用 Emacs Widget Library 而不是自定义缓冲区本身。Emacs info 在 Widget Library 上有一个很棒的部分。您可以使用`C-h i m Widget RET`. [或者您可以在此处](https://www.gnu.org/software/emacs/manual/html_mono/widget.html)访问 HTML 版本。这是手册中小部件示例的片段。

```
 (require 'widget)

 (eval-when-compile
   (require 'wid-edit))

 (defvar widget-example-repeat)

 (defun widget-example ()
   "Create the widgets from the Widget manual."
   (interactive)
   (switch-to-buffer "*Widget Example*")
   (kill-all-local-variables)
   (make-local-variable 'widget-example-repeat)
   (let ((inhibit-read-only t))
     (erase-buffer))
   (remove-overlays)
   (widget-insert "Here is some documentation.\n\n")
   (widget-create 'editable-field
         :size 13
         :format "Name: %v " ; Text after the field!
         "My Name")
   (widget-create 'menu-choice
         :tag "Choose"
         :value "This"
         :help-echo "Choose me, please!"
         :notify (lambda (widget &rest ignore)
               (message "%s is a good choice!"
                    (widget-value widget)))
         '(item :tag "This option" :value "This")
         '(choice-item "That option")
         '(editable-field :menu-tag "No option" "Thus option"))
   (widget-create 'editable-field
         :format "Address: %v"
         "Some Place\nIn some City\nSome country.")
   (widget-insert "\nSee also ")
   (widget-create 'link
         :notify (lambda (&rest ignore)
               (widget-value-set widget-example-repeat
                         '("En" "To" "Tre"))
               (widget-setup))
         "other work")
   (widget-insert
     " for more information.\n\nNumbers: count to three below\n")
   (setq widget-example-repeat
    (widget-create 'editable-list
               :entry-format "%i %d %v"
               :notify (lambda (widget &rest ignore)
                 (let ((old (widget-get widget
                            ':example-length))
                       (new (length (widget-value widget))))
                   (unless (eq old new)
                     (widget-put widget ':example-length new)
                     (message "You can count to %d." new))))
               :value '("One" "Eh, two?" "Five!")
               '(editable-field :value "three")))
   (widget-insert "\n\nSelect multiple:\n\n")
   (widget-create 'checkbox t)
   (widget-insert " This\n")
   (widget-create 'checkbox nil)
   (widget-insert " That\n")
   (widget-create 'checkbox
         :notify (lambda (&rest ignore) (message "Tickle"))
         t)
   (widget-insert " Thus\n\nSelect one:\n\n")
   (widget-create 'radio-button-choice
         :value "One"
         :notify (lambda (widget &rest ignore)
               (message "You selected %s"
                    (widget-value widget)))
         '(item "One") '(item "Another One.") '(item "A Final One."))
   (widget-insert "\n")
   (widget-create 'push-button
         :notify (lambda (&rest ignore)
               (if (= (length (widget-value widget-example-repeat))
                  3)
                   (message "Congratulation!")
                 (error "Three was the count!")))
         "Apply Form")
   (widget-insert " ")
   (widget-create 'push-button
         :notify (lambda (&rest ignore)
               (widget-example))
         "Reset Form")
   (widget-insert "\n")
   (use-local-map widget-keymap)
   (widget-setup)) 
```

# android - android @Override 函数前的错误

> ID：12990536
> 
> 赞同：2
> 
> 时间：2012-10-20T16:42:22.687
> 
> 标签：android

我有这个错误：

```
@Override
public void paint(Canvas canvas) {
} 
```

MainActivity 类型的方法`paint(Canvas)`必须覆盖或实现超类型方法。只有当我删除`@Override`方法之前的错误才会消失。我已经在 1.6 级的项目属性中设置了 java 编译器

你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T16:49:21.590

如果你正在扩展`Activity`你不能覆盖paint方法。

绘画不是一种`Activity`方法。您只能覆盖您正在扩展的类中的现有方法。

我也从来没有用过油漆。是否要覆盖`onDraw(Canvas)`from `View`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:49:37.693

看来您正在尝试覆盖在 的超类中不“存在”的方法`MainActivity`。

一些可能的原因（和解决方案）：

1.  您忘记添加`extends ...`您认为它 ( `MainActivity`) 继承自的类。
2.  您混淆了方法名称，不应该`paint()`- 如果是这种情况 - 只需更改方法名称
3.  它是这个类的一个新方法 - 应该删除注释 @Override。
4.  您更改了原始方法的参数 - 您正在重载而不是覆盖。如果你真的想覆盖它，你应该坚持使用相同的参数，或者`@Override`如果你在重载之后删除注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:17:19.803

如果您要覆盖的方法确实存在于父类中，那么请确保您至少使用 java 1.6 进行编译

所以左键单击您的项目 -> 属性 -> Java 编译器 -> 至少选择 java 1.6 然后清理项目并重建。

# c# - 如何将此 SQL 查询转换为 LINQ to Entities 查询？

> ID：12990538
> 
> 赞同：0
> 
> 时间：2012-10-20T16:42:43.087
> 
> 标签：c#, sql-server, entity-framework, tsql, linq-to-entities

我需要帮助才能在我的 C# 代码中将 SQL 查询转换为实体查询。该查询将 4 个不同的表组合在一起，如下所示：

```
SELECT a.email,
       a.status,
       a.createdat,
       b.unitprice,
       c.name,
       d.name,
       e.name 
FROM Orders a, 
     Orderdetails b, 
     ServiceOptions c, 
     services d, 
     merchants e 
WHERE a.id=b.orderid AND c.id=b.serviceoptionid
      AND c.serviceid=d.id AND d.merchantid=e.id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:48:32.283

```
var query = from a in context.Orders
            join b in context.OrderDetails on a.id equals b.orderid
            join c in context.ServiceOptions on b.serviceoptionid equals c.id
            join d in context.services on c.serviceid equals d.id
            join e in context.merchants on d.merchantid equals e.id
            select new { a.email, 
                         a.status, 
                         a.createdat,
                         b.unitprice, 
                         c.name, 
                         d.name, 
                         e.name }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:47:24.087

我认为你走的是相反的方向。首先创建一个实体框架，然后使用 EF 中的 LINQ 创建 SQL。它应该是 EF->LINQ-SQL。EF 的整个想法是用户不必创建 sql。在项目中创建 EF 后，可以在 LINQ to SQL 中完成此查询。

# sqlite - Android 中的 ByteArray 到 SQLite

> ID：12990539
> 
> 赞同：3
> 
> 时间：2012-10-20T16:42:47.080
> 
> 标签：sqlite, bitmap, bytearray, blob

我尝试将 ByteArray 放入`SQLite`数据库：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();

resizedBitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);

byte[] photo = baos.toByteArray();

ContentValues cv = new ContentValues();
cv.put("unterschrift", photo);

myDBAuftrag = this.openOrCreateDatabase(MAMActivity.MY_DB_AUFTRAG,
    this.MODE_PRIVATE, null);

int anz = myDBAuftrag.update(MAMActivity.MY_DB_OELSPUR_TABLE,
            cv,
          "aktiver_datensatz = ?",
          new String[]{
           "1"
         });

myDBAuftrag.close(); 
```

当我在 Windows pc 上的 Sqlitehelper 中显示数据库时，我在现场只有一些 ByteArray 的图片，如下所示：�PNG 我做错了什么。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:33:49.747

您的代码看起来正确。

问题似乎是您的帮助程序无法在 blob 字段中显示 PNG 图像。如果你用 读回数据`cursor.getBlob()`，结果会很好。

# cakephp - CakePHP Uploader Plugin 仅适用于一个模型

> ID：12990541
> 
> 赞同：1
> 
> 时间：2012-10-20T16:42:52.703
> 
> 标签：cakephp, uploader

我已经安装了[Miles Johnson 的 Uploader 插件](http://milesj.me/code/cakephp/uploader#uploading-files-through-the-model)，并使用我的一个模型对其进行了设置，并使其完美运行。非常好。

然后我用几乎相同的代码在另一个模型上设置它[唯一的区别是上传路径]，它不适用于第二个模型。当我提交表单时，插件似乎没有注意到；尝试将 POST 文件数组直接插入数据库时​​出现 SQL 错误。

这是代码。[除此之外，插件在引导程序中导入]

```
public $actsAs = array( 
    'Uploader.Attachment' => array(
        'photo' => array(
            'name'      => 'formatFileName',    
            'uploadDir' => '/uploads/uses/img/',
            'dbColumn'  => 'photo',
            'maxNameLength' => 30,
            'overwrite' => true,
            'stopSave'  => true,
            'allowEmpty'    => false,
            'transforms' => array(
                array('method' => 'resize', 'width' => 240, 'dbColumn' => 'photo_thumb'))
        )
    ),
    'Uploader.FileValidation' => array(
        'fileName' => array(
            'extension' => array('gif', 'jpg', 'png', 'jpeg'),
            'required'  => true
        )
    )
    ); 
```

这是在未上传的模型上，唯一的区别是uploadDir。

该插件是否仅适用于一种型号？有什么线索吗？谢谢：}

* * *

## 编辑以获得额外的清晰度

这是我的视图代码：

```
echo $this->Form->create('Use', array('type' => 'file'));
echo $this->Form->input('Use.photo', array('type' => 'file'));
echo $this->Form->input('Use.desc', array('rows' => '3', 'label' => 'Description'));
echo $this->Form->end('Add to Gallery'); 
```

这是我的控制器代码：

```
public function add() { 
        if ($this->request->is('post')) {       
            $this->Use->set('user_id', $this->Auth->user('id'));        
            if ($this->Use->save($this->request->data)) {
                $this->Session->setFlash('Your Use has been saved.');
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash('Unable to add your Use.');
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:34:34.577

该插件仅适用于一种型号。您可以将更多上传器添加到您的网站。该模型似乎很好，我建议您查看您的表单，看看您是否以正确的方式将表单创建到您的视图中（放入您的表单很重要：`'type' => 'file'` 例如：

```
echo $this->Form->create('Product', array ('class' => 'form', 'type' => 'file')); 
echo $this->Form->input('ModelImage.filename', array('type' => 'file'));
echo $this->Form->submit('Add Image', array('id'=>'add_image'));
echo $this->Form->end(); 
```

或者问题是名称`Use`尝试用另一个名称更改名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:25:50.070

在与 Alessandro 一起检查代码后 [谢谢 :)] 我发现了问题。

如果您查看视图和控制器代码，您可以看到模型名为“使用”。这就是问题所在，因为 Use 是 PHP 中的一个加载词，我不应该将它用作模型名称。

我将模型重命名为 Outcome，现在 Uploader 可以完美运行。

# php - 使用本机库压缩 PHP 文件

> ID：12990543
> 
> 赞同：0
> 
> 时间：2012-10-20T16:43:12.367
> 
> 标签：php, file, zip

有人会告诉我这里发生了什么：

```
if($attach and $attachTemp){

  move_uploaded_file($attachTemp,'static/downloads/'.$lastIdInsert."_".$attach);

  $dataAttach['attach'] = $lastIdInsert."_".$attach;
  $updateAttach = $this->model_schemas->update($lastIdInsert,$data=array('download'=>'1'));
  /*ZIP IT*/
  $zip = new ZipArchive();
  $zip->open('static/downloads/'.$lastIdInsert."_".$attach);
  $zip->addFile('static/downloads/'.$lastIdInsert."_".$attach,$lastIdInsert.".zip");

  $zip->close();

} 
```

它不会压缩该目录中的文件。

然后我收到2个错误：

```
Message: ZipArchive::addFile() [ziparchive.addfile]: Invalid or unitialized Zip object
Message: ZipArchive::close() [ziparchive.close]: Invalid or unitialized Zip object 
```

文件已移动但未压缩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:48:10.933

您必须将标志指定为创建或覆盖。你可以这样做；

```
$zip->open('static/downloads/'.$lastIdInsert."_".$attach, 
           ZIPARCHIVE::CREATE | ZIPARCHIVE::OVERWRITE); 
```

# django - Django Tastypie 中“obj_get”的正确实现是什么？

> ID：12990547
> 
> 赞同：6
> 
> 时间：2012-10-20T16:43:41.760
> 
> 标签：django, tastypie

我对 Django & Tastypie 很陌生。我想只返回查询中的一个对象。我几乎尝试了所有方法，但似乎找不到解决方案。下面是我的代码：

```
class ProfileResource(ModelResource):
     person = fields.ForeignKey(UserResource, 'user', full=True)

class Meta:
    queryset = Person.objects.all()
    resource_name = 'profile'
    authentication = BasicAuthentication()
    authorization = DjangoAuthorization()
    serializer = Serializer(formats=['json']) 
```

现在我遇到问题的部分是如何使用`request.user`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T12:16:12.447

如果您只想显示一个资源，我可能会创建新的资源视图（命名为 my_profile），它会在 kwargs 中使用用户调用普通详细视图并删除其他 url：

```
from django.conf.urls import url
from tastypie.utils import trailing_slash
class ProfileResource(ModelResource):
    ...
    def base_urls(self):
        return [
            url(r"^(?P<resource_name>%s)%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('dispatch_my_profile'), name="api_dispatch_my_profile")
        ]

    def dispatch_my_profile(self, request, **kwargs):
        kwargs['user'] = request.user
        return super(ProfileResource, self).dispatch_detail(request, **kwargs) 
```

# python - 多个值要解压

> ID：12990551
> 
> 赞同：3
> 
> 时间：2012-10-20T16:44:28.357
> 
> 标签：python, string, dictionary, arguments, iterable-unpacking

我运行这段代码：

```
def score(string, dic):
    for string in dic:
        word,score,std = string.lower().split()
        dic[word]=float(score),float(std)
        v = sum(dic[word] for word in string)
        return float(v)/len(string) 
```

并得到这个错误：

```
word,score,std = string.split()
ValueError: need more than 1 value to unpack 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:52:34.097

这是因为`string.lower().split()`返回一个只有一个项目的列表。`word,score,std`除非此列表恰好有 3 个成员，否则您不能将其分配给；即`string`正好包含2个空格。

* * *

```
a, b, c = "a b c".split()  # works, 3-item list
a, b, c = "a b".split()  # doesn't work, 2-item list
a, b, c = "a b c d".split()  # doesn't work, 4-item list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T16:53:29.690

这失败了，因为字符串只包含一个单词：

```
string = "Fail"
word, score, std = string.split() 
```

这是可行的，因为单词的数量与变量的数量相同：

```
string = "This one works"
word, score, std = string.split() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:57:16.663

```
def score(string, dic):
    if " " in dic:
        for string in dic:
            word,score,std = string.lower().split()
            dic[word]=float(score),float(std)
            v = sum(dic[word] for word in string)
            return float(v)/len(string)
    else:
            word=string.lower()
            dic[word]=float(score),float(std)
            v = sum(dic[word] for word in string)
            return float(v)/len(string) 
```

我认为这就是你要找的东西，如果我错了，请纠正我，但这基本上会检查是否有任何空间`split()`可以分割，并采取相应的行动。

# jsf-2 - 如何以编程方式处理来自 jsf2 中支持 bean 的导航

> ID：12990555
> 
> 赞同：2
> 
> 时间：2012-10-20T16:44:46.133
> 
> 标签：jsf-2

我希望能够做一些类似的事情：

```
 @ManagedBean
 class MyBackingBean {
     public void processRequest() {
         String viewName;
         if (condition1) 
             viewName = "page1";
         else if (condition2) 
             viewName = "pagexx";     

         invokeAndRenderXHTML(viewName);
     }
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-10T11:06:02.623

以防万一有人偶然发现这个老问题：您可以像这样以编程方式调用导航处理程序

```
FacesContext.getCurrentInstance().getApplication().getNavigationHandler().handleNavigation(FacesContext.getCurrentInstance(), null, "YOUR_NAVIGATION_CASE_DEFINED_IN_FACES_CONFIG"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:34:03.680

JSF 默认提供程序化导航。您不需要**第三方**库来实现导航。要使用 JSF 导航，您的方法应该简单地返回您尝试访问的视图的名称，然后它将导航到该页面。您还可以在返回值中包含一个可选`redirect`参数，以指示 JSF 上下文将响应完全重定向到目标视图。根据您的需要，只需更改`processRequest`为

```
 public String processRequest() {
     // String viewName unnecessary
     if (condition1) {
        return "page1";
              }
     else if (condition2) {
        return = "pagexx";  
           }
        return null;   
    // invokeAndRenderXHTML(viewName) becomes unnecessary
    } 
```

如果您选择使用`redirect`我上面指出的选项，只需将返回字符串更改为

```
 return "page1?faces-redirect=true" 
```

是`faces-redirect=true`执行重定向魔术的参数

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-20T18:24:35.537

因为您需要一个请求来触发响应，所以我认为有两种方法可以走。轮询或推送。

www.primefaces.org/showcase/ui/poll.jsf

www.primefaces.org/showcase/push/index.jsf

查看两者的 primefaces 展示，了解哪个最适合您的需求。即使您不使用该库，您也可以查看源代码以更好地了解如何在 jsf2 中执行此操作

# c# - 按下回车键后，如何使用 MonoMac 在 NSTextField 中插入回车？

> ID：12990556
> 
> 赞同：2
> 
> 时间：2012-10-20T16:45:03.620
> 
> 标签：c#, objective-c, macos, cocoa, monomac

在阅读[了这个问题](https://stackoverflow.com/questions/6117032/anyway-to-make-a-wrapping-nstextfield-write-a-carriage-return-upon-pressing-re)和[这个接受的答案](https://stackoverflow.com/a/6118518/107625)之后，我尝试在 C# 中使用 MonoMac 实现给定的 Objective-C 解决方案：

```
- (BOOL)control:(NSControl*)control
    textView:(NSTextView*)textView
    doCommandBySelector:(SEL)commandSelector
{
    BOOL result = NO;

    if (commandSelector == @selector(insertNewline:))
    {
        // new line action:
        // always insert a line-break character and don’t cause the receiver
        // to end editing
        [textView insertNewlineIgnoringFieldEditor:self]; 
        result = YES;
    }

    return result;
} 
```

我设法为我的文本框分配了一个委托并覆盖了该`DoCommandBySelector`方法。我没有管理的是翻译该行

```
if (commandSelector == @selector(insertNewline:)) 
```

和线

```
[textView insertNewlineIgnoringFieldEditor:self]; 
```

变成一个 C# 等价物，即使经过数小时的试错，再加上许多“谷歌搜索”，每个人都在谈论。

**所以我的问题是：**

如何将以上两行代码转换为可用的 MonoMac C# 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:13:11.417

好的，在又一堆尝试和错误之后，我想出了以下工作解决方案。

这是我将委托分配给文本字段的地方：

```
textMessage.Delegate = new MyTextDel(); 
```

这是实际的委托定义：

```
private class MyTextDel : NSTextFieldDelegate
{
    public override bool DoCommandBySelector (
        NSControl control, 
        NSTextView textView, 
        Selector commandSelector)
    {
        if (commandSelector.Name == "insertNewline:") {
            textView.InsertText (new NSString (Environment.NewLine));
            return true;
        }

        return false;
    }
} 
```

所以要回答我自己的问题，这行：

```
if (commandSelector == @selector(insertNewline:))         // Objective-C. 
```

翻译为：

```
if (commandSelector.Name == "insertNewline:")             // C#. 
```

和行：

```
[textView insertNewlineIgnoringFieldEditor:self];         // Objective-C. 
```

（大致）翻译为：

```
textView.InsertText (new NSString (Environment.NewLine)); // C#. 
```

我确实希望这在所有情况下都有效，我的第一次测试看起来很有希望。

# cookies - 密码是否存储在 cookie 中？

> ID：12990557
> 
> 赞同：4
> 
> 时间：2012-10-20T16:45:05.303
> 
> 标签：cookies, gmail

查看 gmail 和 facebook，我想知道当您注销并且您启用了“让我登录”功能时，他们将您的密码和帐户信息存储在哪里。

我知道他们将其存储在 cookie 中，但这不是可破解/可窃取的吗？这个系统的安全性如何？这些信息存储在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T16:50:57.880

他们保存的是一个唯一的会话 ID，它本质上是一个随机生成的字符串。使用该会话 ID，他们可以将您的状态存储在后端，即是否登录。他们从不将您的密码（无论是否加密）存储在 cookie 中。

# c++ - SFML 获取全屏模式

> ID：12990559
> 
> 赞同：1
> 
> 时间：2012-10-20T16:45:20.867
> 
> 标签：c++, vector, sfml

您是否遇到过 SFML 2 中用于获取可用模式的函数返回给您的问题：

*   availableVideoModes [3]({width=3131961357 height=3131961357 bitsPerPixel=3131961357 },{width=3131961357 height=3131961357 bitsPerPixel=3131961357 },{width=3131961357 height=3131961357 bitsPerPixel})std::vector >961357 bitsPerPixel})

向量中的最大 int 值？有趣的是为什么是3？我在没有运气的情况下尝试了快速调试，所以我想在这里提出问题。

代码：

```
 std::vector<sf::VideoMode> availiableVideoModes;
    availiableVideoModes = sf::VideoMode::getFullscreenModes(); 
```

有趣的是

```
 desktopVideoMode = sf::VideoMode::getDesktopMode(); 
```

返回正确的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-23T13:44:48.230

问题出在库链接中，我链接的是 32 位而不是 64 位。

# python - 以 DRY 方式测试一个或另一个子字符串是否在字符串中

> ID：12990562
> 
> 赞同：2
> 
> 时间：2012-10-20T16:45:31.433
> 
> 标签：python

我是python的新手，并尝试抓住它的“精神”。
简单的问题：
我想测试其中一个`'a'`或是否在一个 我明显可以做`'b'`的字符串中`'xxxxxbxxxxx'`

```
full_string = 'xxxxxbxxxxx'
if 'a' in full_string or 'b' in full_string :  
    print 'found' 
```

但我觉得有一种更简单的方法可以做到“python 风格”，无需重复`full_string`，可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:47:34.150

我认为这是尽可能接近的：

```
full_string = 'xxxxxbxxxxx'
if any(s in full_string for s in ('a', 'b')):  
    print 'found' 
```

或者你可以使用正则表达式：

```
import re

full_string = 'xxxxxbxxxxx'
if re.search('a|b', full_string):  
    print 'found' 
```

# ruby-on-rails - 从 Heroku 上的 Rails 应用程序调用 windows .exe（编译器）

> ID：12990567
> 
> 赞同：0
> 
> 时间：2012-10-20T16:45:54.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我想知道这是否可行。如果是这样，可能的方法是什么。我认为 .exe 必须通过在 Windows 堆栈（asp.net 或 php）上运行的 Web 服务提供，并且直接的 heroku 解决方案不是要走的路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T17:00:20.730

如果您作为外部人员这样做，是的。主要技巧是在 windows 盒子上提供服务并确保您的服务是安全的。如果您要使用云服务，最好的选择可能是在 EC2 或 Rackspace 或 [在此处插入云提供商] 上的 Windows 服务器上设置您的服务。由于许可证成本，它们不像 linux 盒子那么便宜，但应该不会太难管理。

除非 Heroku 与我上次查看时相比发生了很大变化，否则底层操作系统是某种类型的 linux，因此如果不将 wine 捆绑到应用程序中，你真的不太可能让 Windows 二进制文件在内部运行（可能不值得尝试弄清楚）。

# c++ - 将二维数组作为参数传递

> ID：12990568
> 
> 赞同：11
> 
> 时间：2012-10-20T16:45:56.740
> 
> 标签：c++, pointers

我正在尝试将二维数组传递给一个接受指针指针的函数。而且我了解到二维数组不是指向指针的指针（指向一维数组的指针）。当我编译下面的代码时，我得到了这个错误。

```
#include<iostream>

void myFuntion(int **array)
{
}
int main()
{
   int array[][]= {{1,2,3,4},{5,6,7,8,9},{10,11,12,13}};
   myFuntion(array);
   return 0;
} 
```

**在函数“int main()”中：第 5 行：错误：将“array”声明为多维数组必须具有所有维度的边界，但由于 -Wfatal 错误而终止的第一个编译除外。**

如果可能的话，任何人都可以清除我对此和一些文档的疑问，以解决我的更多疑问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T20:59:54.920

```
 void myFunction(int arr[][4]) 
```

您可以在第一个 [] 中输入任何数字，但编译器会忽略它。将向量作为参数传递时，您必须指定除第一个维度之外的所有维度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:59:33.693

您至少应该指定第二维的大小。

```
int array[][5] = { { 1, 2, 3, 4 }, { 5, 6, 7, 8, 9 }, { 10, 11, 12, 13 } }; 
```

还有一个经常重复的错误。要将二维数组作为参数传递，您必须使用以下类型：

```
void myFuntion(int (*array)[SIZE2]);
/* or */
void myFuntion(int array[SIZE1][SIZE2]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T17:02:42.077

为什么不使用 std::vector 而不是“原始”数组。优点：
1、可以动态增长。
2\. 将参数传递给函数没有问题。即尝试调用 void myFuntion(int array[SIZE1][SIZE2]); 使用数组，它有一些不同的大小而不是 SIZE1 和 SIZE2

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-06T17:41:16.343

另一个模板化解决方案是：

```
template<int M, int N>
void myFunction(int array[N][M])
{
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T17:02:55.300

```
#include<iostream>
 void myFuntion(int arr[3][4]);
int main()
  {
  int array[3][4]= {{1,2,3,4},{5,6,7,8},{10,11,12,13}};
 myFuntion(array);
  return 0;
 }
   void myFuntion(int arr[3][4])
   {

   } 
```

[http://liveworkspace.org/code/0ae51e7f931c39e4f54b1ca36441de4e](http://liveworkspace.org/code/0ae51e7f931c39e4f54b1ca36441de4e)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T17:10:03.523

将“数组”声明为多维数组必须具有除第一个维度之外的所有维度的边界所以你必须给出

```
array[][size] //here you must to give size for 2nd or more 
```

为了在函数中传递数组，数组不是指向指针的指针，而是指向数组的指针，所以你可以这样写

```
fun(int (*array)[]) 
```

在这里，如果您错过了 (*array) 周围的括号，那么它将是一个指针数组，因为运算符 [] 的优先级高于 *

# android - Google Play 应用复制保护、许可。以后可以添加吗？

> ID：12990570
> 
> 赞同：3
> 
> 时间：2012-10-20T16:46:07.283
> 
> 标签：android, android-lvl

我知道这个话题已经在这里讨论过很多次了。

这是我第一次将应用程序上传到 Google Play。该应用程序是免费的。我阅读了谷歌的许可支持网页，但我真的很困惑。据我了解，许可应用于付费应用程序，以防止将应用程序从一台设备复制到另一台设备。

我的应用程序将是免费的。我需要实施许可吗？我想它只会帮助我防止应用程序从一台设备复制到另一台设备（这可能不会是因为它是免费的），但如果我使用它，我仍然可以跟踪正确的下载次数。这会以不同的方式帮助我吗？

我读到，当您上传应用程序时，应该有一些复选框来“复制保护”您的应用程序。它还在那里并且可以使用吗？

将来我计划在应用程序中添加一些付费模块。是否可以在即将发布的版本中添加许可？

非常感谢，丹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T14:54:55.157

**我需要实施许可吗？** 不。没有它，您的应用程序将正常工作。它只是为了防止盗版您的应用程序，因为它是免费的，所以这不会是一个大问题。

**“复制保护”是否仍然存在并且可以使用？** 截至 2012 年 12 月 13 日：是的，这是旧布局中的一个简单开关。

**是否可以在即将发布的版本中添加许可？** 是的，但请记住，这意味着用户将看到您的应用所需的新“权利”，而许多用户不喜欢这样。因此，如果您打算实施它，我现在将使用权限放在清单中。

但是，如果您使用应用内支付，则可能根本不需要实施应用许可，因为付费内容将由谷歌应用内系统验证，该系统使用其他 API。

哦，请确保您在第一次发布之前正确地混淆了您的代码。

# c# - 实体框架 5 代码优先关系

> ID：12990577
> 
> 赞同：1
> 
> 时间：2012-10-20T16:46:59.137
> 
> 标签：c#, entity-framework, ef-code-first

我无法理解如何在我正在构建的项目中创建类之间的关系。

我有一个类`Photo`与 具有必需的一对一关系`PhotoExif`，并且与`Photo`具有可选的一对一关系`FeaturedPhoto`。

我收到错误：

> 无法确定类型的复合主键排序`Website.Models.PhotoExif`。使用`ColumnAttribute`或`HasKey`方法指定复合主键的顺序。

帮助将不胜感激。

**照片.cs**

```
public class Photo
{
    [Key]
    public int PhotoID { get; set; }

    public string Title { get; set; }

    public string Description { get; set; }
    public Orientation Orientation { get; set; }
    public int Rating { get; set; }
    public string URL { get; set; }
    public string Filename { get; set; }
    public DateTime DateAdded { get; set; }
    public bool Hide { get; set; }
    public string MetaDescription { get; set; }
    public string MetaKeywords { get; set; }

    public virtual PhotoExif PhotoExif { get; set; }
} 
```

**照片Exif.cs**

```
public class PhotoExif
{
    [Key]
    public int PhotoExifID { get; set; }

    public int PhotoID { get; set; }

    public string ShutterSpeed { get; set; }
    public string Aperture { get; set; }
    public string FocalLength { get; set; }
    public int ISO { get; set; }
    public string ExposureBias { get; set; }
    public bool Flash { get; set; }
    public string WhiteBalance { get; set; }
    public string Lens { get; set; }
    public DateTime DateTaken { get; set; }
    public float Longitude { get; set; }
    public float Latitude { get; set; }
    public int Zoom { get; set; }
    public string Location { get; set; }

    public virtual Photo Photo { get; set; }
} 
```

**精选照片.cs**

```
public class FeaturedPhoto
{
    [Key]
    public int FeaturedPhotoID { get; set; }

    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public string InformationLocation { get; set; }
    public string ImagePosition { get; set; }

    public virtual Photo Photo { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:35:06.453

根据错误消息：

> 使用 ColumnAttribute 或 HasKey 方法来指定复合主键的顺序。

您需要在 PhotoExif 表的 PhotoID 和 PhotoExifID 属性中添加 [Column(Order="#")] 注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:55:00.120

在我看来，您不希望在`PhotoExif`. 我不知道为什么 EF 会尝试推断复合键，但原因可能是 1）该属性按照惯例`Photo`将该`PhotoID`属性作为外键，2）在一对一的关系中，外键必须与主键，3）还有另一个属性`PhotoExifID`你已经标记了一个键。因此，也许 EF 假设这个标记的密钥加上从一对一关系中推断出来的密钥一起形成了一个复合密钥。（这种行为会很奇怪，但我看不出您的模型和注释如何导致复合键排序异常。）

无论如何，该`PhotoID`属性似乎不正确，因为在一对一关系中，主体和依赖必须共享相同的主键，并且依赖的 FK 同时是 PK。我会尝试删除这个属性并添加一个 FK 属性：

```
public class PhotoExif
{
    [Key]
    public int PhotoExifID { get; set; }

    public string ShutterSpeed { get; set; }
    //...

    [ForeignKey("PhotoExifID")]
    public virtual Photo Photo { get; set; }
} 
```

同样，您必须为 定义 FK `FeaturedPhoto`，否则 EF 无法确定关系的主体和依赖关系。取决于关系的详细信息——它们是必需的、必需的、可选的还是可选的，以及哪个实体是主体，哪个实体是依赖？- 可能需要使用 Fluent API 定义映射，因为数据注释不支持 Fluent API 所做的每个映射选项。

# java - 如何使用 FFT 过滤数据阵列中的 50Hz 噪声？

> ID：12990596
> 
> 赞同：5
> 
> 时间：2012-10-20T16:48:42.610
> 
> 标签：java, android

假设我有一个像这样的心电图数据数组

[http://joachim.behar.perso.neuf.fr/Joachim/ECG_tuto_1/ECG_filters_basics/ecg_sample.txt](http://joachim.behar.perso.neuf.fr/Joachim/ECG_tuto_1/ECG_filters_basics/ecg_sample.txt)

我需要使用这样的算法过滤掉 50Hz 的噪声

[http://joachim.behar.perso.neuf.fr/Joachim/ECG_tuto_1/ECG_filters_basics/notch_filter.m](http://joachim.behar.perso.neuf.fr/Joachim/ECG_tuto_1/ECG_filters_basics/notch_filter.m)

结果应该像[图 2](http://joachim.behar.perso.neuf.fr/Joachim/ECG_tuto_1.php)中看到的那样（红色过滤，蓝色未过滤） ：

![在此处输入图像描述](../Images/f9e7b2c4c8171cc5bfa6dfcee0581f24.png)

在 Java/android 中最好的方法是什么？这个库会帮助[https://sites.google.com/site/piotrwendykier/software/jtransforms](https://sites.google.com/site/piotrwendykier/software/jtransforms)吗？

谢谢！)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:44:43.473

在[*ECG 基本滤波*](http://joachim.behar.perso.neuf.fr/Joachim/ECG_tuto_1.php)*一文中，在“消除电源线噪声*”的（编号错误的）部分应用了*陷波滤波器*；结果[如图 2 所示](http://joachim.behar.perso.neuf.fr/Joachim/ECG_tuto_1.php)。这个 Java[插件](http://rsbweb.nih.gov/ij/docs/guide/146-16.html#toc-Section-16)，“实现了频域中最常见的陷波滤波器”。虽然该示例不能直接移植到 android，但它可能允许您选择特定的实现来重新实现。*[`ImageJ`](https://stackoverflow.com/tags/imagej/info) [`Notch_Filters`](http://svg.dmi.unict.it/iplab/imagej/Plugins/Image%20Restoration/Notch_Filters/Notch_Filters.java)*

 *请注意，本文扩展了该方法的局限性。

附录：陷波滤波器依赖于 FFT，所以你需要两者。*

# python - libpng 警告：在 Python/PyGame 中使用 png_read_image 时应打开隔行处理

> ID：12990602
> 
> 赞同：7
> 
> 时间：2012-10-20T16:49:14.793
> 
> 标签：python, python-3.x, pygame, libpng

我正在使用 PyGame for Python，并且在加载 .png 图像时收到以下警告`pygame.image.load`：

```
libpng warning: Interlace handling should be turned on when using png_read_image 
```

它不影响程序，但变得特别烦人。我在网上搜索了一个无济于事的答案。

我目前正在使用 32 位 Python 3.3 和 PyGame 1.9.2

关于如何让警告消失的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T18:49:49.653

我有同样的问题。这似乎是旧 libpng 版本的一些错误（有关详细信息，请参见[http://sourceforge.net/p/libpng/bugs/165/](http://sourceforge.net/p/libpng/bugs/165/)）。

它应该已经修复，但不在我当前的设置中：win32 + python 2.7.3。

作为一种解决方法，我只是在 Photoshop 中将 png-24 图像转换为 png-8，然后消息就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-25T11:43:51.890

我可以确认我在使用 Pygame 1.9.6 和 Python 3.7.4 时遇到了同样的问题。

[我可以通过从https://www.python.org/](https://www.python.org/)下载 Python 3.8并通过快速安装 Pygame 2.0.0.dev6来修复它

```
python -m pip install Pygame>=2.0.0.dev6 
```

尽管您也许可以使它与我提到的版本之间的版本一起使用。

# c# - 存储包含敏感数据的文档的良好做法是什么

> ID：12990613
> 
> 赞同：2
> 
> 时间：2012-10-20T16:50:21.593
> 
> 标签：c#, .net, sql-server, asp.net-mvc, asp.net-web-api

我的问题是存储包含可能需要加密的敏感数据的文档的良好做法是什么。

> 我的几个想法是：1）将Sql Server中的所有文档存储为FILESTREAM（不知道它的缺点。2）使用这些NoSql Db之一。但是，保存带有敏感数据的文档会有多安全。3）简单的方式上传它们并将它们存储在磁盘上，为每个客户安全。
> 
> 我将使用的技术是 xUnit、ASP.NET MVC 4、C#、Web API、Entitty Framework 和 Sql Server 2012

任何想法或意见将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T17:00:28.273

好吧，您**存储**数据的方式并不重要，只要以正确的方式存储数据即可。如果您使用 SQL Server 并不重要（顺便说一句，如果您的数据小于 2GB，您可以使用限制为 2GB 的 varbinary(max) 并将数据存储在该列中）。重要的是以下几点：

1.  您选择正确的加密算法 - 您可以在对称加密和非对称加密算法之间进行选择。
2.  您保存并保护加密密钥。如果有人可以轻松获得密钥，那么加密就没有多大价值。

在你加密流之后——不管你是将它存储在 NoSQL DB、SQL Server 还是文件系统上的文件中——选择最适合你的应用程序的东西。如果您已经使用 SQL Server - 然后将加密数据保存在其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:59:10.883

SQL Server 允许您使用 TDE 加密数据。这是一个[`overview on MSDN`](http://msdn.microsoft.com/en-us/library/cc278098%28v=sql.100%29.aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:55:38.473

加密或用户名密码保护。这取决于它需要有多安全。在我看来，用户名和密码（自己加密）应该可以。

# python - 我应该如何让imagePlane的形状节点连接到maya中的相机

> ID：12990615
> 
> 赞同：0
> 
> 时间：2012-10-20T16:50:51.077
> 
> 标签：python, maya

```
def connectedImgPlanes(self,dagNode):
    print "dagNode ",dagNode ,type(dagNode)
    sourceConnections = cmds.listConnections(dagNode, source = True) or []
    if len(sourceConnections) != 0:
       lc = sourceConnections[0].split("->")[1]
       atribVal=cmds.getAttr(lc+".imageName")
       return atribVal
    else:
        return "" 
```

上面的函数工作并从imageplane的形状节点的imageName属性返回带有文件名的路径，但是如果顶部相机设置了imageplane，那么上面的函数不起作用，在这种情况下我得到错误说*# Error: line 1: IndexError:文件第 1 行：列表索引超出范围 #*由于

```
newStr=str(sourceConnections[0]).split("->")[1] 
```

然后我尝试了不同的方法来获取图像平面的形状节点并从中返回一个属性，

```
 lc=""
    try:
        lc=cmds.listRelatives(cmds.listRelatives(dagNode)[0])[0]
    except TypeError:
           return ""
    print lc
    atribVal=cmds.getAttr(lc+".imageName")
    return atribVal 
```

这个也可以工作，直到我们添加顶部相机并且代码开始给出不同类型的错误，说*多个对象匹配名称：imagePlane1 #*

如果相机没有设置图像平面，请有人帮我获取每个相机的形状节点并返回空字符串......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:19:08.710

由于`imagePlanes`(dependNode) 不能`shape`附加任何节点，因此我假设它是您想要的`imageName`attr 。`imagePlane`

以下函数，如果传递 a `camera`，将返回`imageName`任何`imagePlane`附加到它的属性。如果 a`transform`被传递，将寻找任何`camera`与它的连接，然后返回任何附加到找到的相机的`imageName`属性。`imagePlanes`

```
import maya.cmds as cmds 

def connectedImgPlanes(dagNode):
    # if we have camera transform then go to camera shape 
    if cmds.nodeType(dagNode) == 'transform':
        dagNode = cmds.listRelatives(dagNode, s=True, c=True)[0]
    if cmds.nodeType(dagNode) != 'camera': 
        cmds.error("%s is not a camera node" %dagNode)

    # get all the imageplane nodes connected to image plane
    sourceConnections = cmds.listConnections(dagNode + '.imagePlane', source = True, type = 'imagePlane') or []

    # collect all the 'imageName(s)' into a list and return it
    imageNames = []
    for lc in sourceConnections:
       atribVal=cmds.getAttr(lc+".imageName")
       imageNames.append(atribVal)
    return imageNames 
```

# java - Java在tomcat上查找127.0.0.1失败

> ID：12990618
> 
> 赞同：1
> 
> 时间：2012-10-20T16:50:58.267
> 
> 标签：java, tomcat, localhost, vpn

我在 Ubuntu 12.10 上使用 VPN（实际上我不知道它是否会影响情况），并且我在 Tomcat 6 中运行的应用程序无法开始返回：

```
Caused by: java.lang.Exception: Conversion of bind_addr in UDP with original property value "127.0.0.1" failed
at org.jgroups.conf.PropertyHelper.getConvertedValue(PropertyHelper.java:85)
at org.jgroups.stack.Configurator.resolveAndAssignField(Configurator.java:1139)
... 63 more
 Caused by: java.net.UnknownHostException: "127.0.0.1"
at java.net.Inet4AddressImpl.lookupAllHostAddr(Native Method) 
```

我已经ping通了“localhost”和127.0.0.1，它们看起来很好。我已禁用 IPV6 并且 /etc/hosts 是：

```
127.0.0.1   localhost.localdomain   localhost
::1 mybox   localhost6.localdomain6 localhost6
127.0.1.1   mybox

# The following lines are desirable for IPv6 capable hosts
::1     localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts 
```

知道为什么“java”无法解决地址吗？

更多信息：

在 IntelliJ 中，我使用以下命令运行 Tomcat：

> -Djava.awt.headless=true -Djgroups.bind_addr="127.0.0.1" -Dfile.encoding=UTF-8 -server -Xms512m -Xmx1024m -XX:NewSize=256m -XX:MaxNewSize=256m -XX:PermSize=256m -XX:MaxPermSize=256m -XX:+DisableExplicitGC

问题看起来与 >> -Djgroups.bind_addr="127.0.0.1" 有关

# c - 在 C 中保存随机生成的数字

> ID：12990619
> 
> 赞同：0
> 
> 时间：2012-10-20T16:51:14.877
> 
> 标签：c, arrays, function, random

我正在尝试找到保存一组随机生成的数字的最佳方法，以便稍后在另一个函数中调用它们。基本上我有一个函数可以生成数字并确保它们没有重复，但我需要另一个函数来搜索数字列表以查看用户是否选择了其中一个数字。每当我在搜索函数中调用随机数函数时，我都会得到一个不同随机数的列表。

基本上我只是想找出最好的方法来保存这个数字数组，这样下次我调用函数时它就不会让我知道数字，或者将它传递给下一个函数的最佳方法。

这是随机数生成器函数，以防您想查看我要传递给下一个函数的内容。

```
int i, j;
/*generates the set of random numbers*/
for(i = 0; i < MAX; i++) {

    random = rand() % 101;
   /*checks to to make sure there is no repeats*/
  for (j = 0; j < i; j++) {
       if (lucky[j] == random) {
          random = rand() % 101;
                               }
                          }
       lucky[i] = random;

printf("%3d",random);
                          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:32:14.830

首先创建一个新数组：

```
int *lucky = malloc(amount_of_numbers_you_want * sizeof(int)); 
```

然后像往常一样用随机数填充它，然后返回它。例如：

```
int* generate_random_numbers(int amount)
{
    int *lucky = malloc(amount * sizeof(int));

    /* Fill lucky[] with 'amount' unique random numbers. */

    return lucky;
} 
```

然后，每当您调用该函数时，将它返回的指针保存在某处。`free()`当你不再需要它时不要忘记指向那个指针，否则你会泄漏它占用的内存。

由于这看起来像家庭作业，因此我不会给您完整的代码，而是提供如何通过使用动态分配的数组来处理此类问题的一般方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:30:42.083

所以，首先，这并不能确保随机数总是不同的：

如果您的列表有 [0.1,0.24,0.555] 并且您添加了一个带有 0.24 的新 RNG，它会重复，但可以生成一个 0.1，它也存储在 lucky[] 中（因此会重复，因为您不喜欢）。这不太可能，但有可能。

您想要的方式是使用 while()，并且只有在针对所有列表检查新的 RNG 时，才会添加它。

最后，通常保存 RNG 列表的最佳方法是设置 RNG 的种子。给定种子“a”，由种子“a”生成的数字列表始终相同。在这种情况下，您的函数甚至可以检查非重复的 RNG，因为结果总是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T17:45:32.693

@Nikos 给出了正确答案。

您也可以在调用函数中为数组分配内存并将其传递给随机数生成函数。无论您做什么，都要确保 lucky 不是本地定义的数组。此外，您生成数字的逻辑似乎是错误的（没有重复）。正如@Nikos 所指出的，这似乎是一项学校作业，我只会指出明显的错误。

a）您没有处理第二次生成的数字（如果第一次随机与已经存在的列表匹配，则第二次调用随机数）正在使用旧的生成值集正确检查的情况。

b) 随机生成函数为您提供 0 到 RAND_MAX 和 RAND_MAX % 101 之间的随机数不是 0。这意味着生成随机数的概率不均匀。

# trigger.io - Windows 7 Trigger.io 错误：环境只能包含字符串

> ID：12990622
> 
> 赞同：2
> 
> 时间：2012-10-20T16:51:31.047
> 
> 标签：trigger.io

在 Windows 7 的 hello world 应用程序上运行新安装的 Trigger.io，我在这样做时得到了这个：

```
 forge run web

File "C:\Users\john.jesus\AppData\Local\Trigger Toolkit\build-tools\forge\async.py", line 96, in run
result = self._target(*self._args, **self._kwargs)
File "C:\Users\john.jesus\AppData\Local\Trigger Toolkit\build-tools\forge\main.py", line 437, in run
build_to_run=build_to_run,
File "C:\Users\john.jesus\forge-workspace\helloworld\.template\generate_dynamic\customer_goals.py", line 124, in run_app
build_to_run.run()
File "C:\Users\john.jesus\forge-workspace\helloworld\.template\generate_dynamic\build.py", line 337, in run
self._call_with_params(task_method, task_args)
File "C:\Users\john.jesus\forge-workspace\helloworld\.template\generate_dynamic\build.py", line 296, in _call_with_params
return method(self, *params)
File "C:\Users\john.jesus\forge-workspace\helloworld\.template\generate_dynamic\web_tasks.py", line 141, in run_web
env=dict(os.environ, PORT=str(port), FORGE_DEBUG='1'))
File "C:\Users\john.jesus\forge-workspace\helloworld\.template\generate_dynamic\web_tasks.py", line 98, in _node
run_shell(node, *args, **kw)
File "C:\Users\john.jesus\forge-workspace\helloworld\.template\generate_dynamic\utils.py", line 338, in run_shell
raise state.error

TypeError: environment can only contain strings 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T09:04:48.807

我遇到了完全相同的问题 - 似乎是因为 Python 无法处理 POpen 环境字典中的 unicode。更多信息在这里：

[如果“env”参数包含 unicode 对象，为什么 Popen 在 Windows 上会失败？](https://stackoverflow.com/questions/12253014/why-does-popen-fail-on-windows-if-the-env-parameter-contains-a-unicode-object)

我编辑了

C:\Users\mattc\forge-workspace\prototype-app.template\generate_dynamic\module_dynamic\utils.py

并更改第 304 行以删除环境变量的传递，这样我就有了：

state.proc = lib.PopenWithoutNewConsole(args, stdout=subprocess.PIPE, stderr=subprocess.STDOUT, env=None, preexec_fn=preexec_fn)

然后我的 forge-web 工作了，我能够运行它。不过，并不完全确定这是“正确”的修复方法，但它可以让它继续下去。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T16:26:00.560

指向文件时是否转义斜杠？例如：C:\folder\filename 而不是 C:\folder\filename？

# ruby - ruby 中“#{}”字符串的惰性求值

> ID：12990624
> 
> 赞同：5
> 
> 时间：2012-10-20T16:51:44.727
> 
> 标签：ruby, string, eval

我开始在我的代码中添加打印语句。为了不弄乱输出，我做了类似的事情：

```
dputs LEVEL, "string" 
```

其中`LEVEL`0 表示错误，1 表示重要 .. 5 表示详细，并与`DEBUG_LEVEL`. 现在我的问题是，在这样的声明中：

```
dputs 5, "#{big_class.inspect}" 
```

字符串总是被评估，如果我设置`DEBUG_LEVEL`为 1 也是如此。而且这个评估可能需要很长时间。我最喜欢的解决方案是：

```
dputs 5, '#{big_class.inspect}' 
```

然后根据需要评估字符串。但是我无法以我可以评估的形式获得字符串。所以我能想到的唯一想法是：

```
dputs( 5 ){ "#{big_class.inspect}" } 
```

但这看起来很丑陋。那么如何评估 '#{}' 字符串呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T17:17:53.947

您可以通过`dputs`使用[`sprintf`](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-sprintf)(via [`%`](http://ruby-doc.org/core-1.9.3/String.html#method-i-25)) 来做到这一点。这样它就可以决定不构建内插字符串，除非它知道要打印它：

```
def dputs(level, format_str, *vars)
  puts(format_str % vars) if level <= LEVEL
end

LEVEL = 5
name = 'Andrew'
dputs 5, 'hello %s', name
#=> hello Andrew 
```

或者，正如您所建议的，您可以传递一个将插值推迟到该块实际运行的块：

```
def dputs(level, &string)
  raise ArgumentError.new('block required') unless block_given?
  puts string.call if level <= LEVEL
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:19:24.003

我不认为你可以躲避那里的丑陋。插值发生在调用 dputs 之前，除非你把它放在一个块中，这会推迟它直到 dputs 评估它。我不知道 dputs 来自哪里，所以我不确定它的语义是什么，但我猜这个块会让你得到你想要的惰性评估。不漂亮，但它的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-12T19:05:44.050

我认为它没有任何价值，但我只是想出了：

```
2.3.1 :001 > s = '#{a}'
 => "\#{a}"
2.3.1 :002 > a = 1
 => 1
2.3.1 :003 > instance_eval s.inspect.gsub('\\', '')
 => "1"
2.3.1 :004 > s = 'Hello #{a} and #{a+1}!'
 => "Hello \#{a} and \#{a+1}!"
2.3.1 :005 > instance_eval s.inspect.gsub('\\', '')
 => "Hello 1 and 2!" 
```

不要在生产中使用它:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:54:29.980

好吧，显然我只是太懒了。我认为必须有一个更干净的方法来做到这一点，Ruby 是最好的编程语言和所有 ;) 来评估一个像

```
a = '#{1+1} some text #{big_class.inspect}' 
```

仅在需要时，我没有找到比遍历字符串并评估遇到的**所有**“#{}”更好的方法：

```
str = ""
"#{b}\#{}".scan( /(.*?)(#\{[^\}]*\})/ ){
  str += $1
  str += eval( $2[2..-2] ).to_s
} 
```

如果您不清楚，可以摆脱临时变量**str**：

```
"#{b}\#{}".scan( /(.*?)(#\{[^\}]*\})/ ).collect{|c|
  c[0] + eval( c[1][2..-2] ).to_s
}.join 
```

String.scan 方法遍历每个 '#{}' 块，因为可能不止一个块，评估它（**2..-2**删除了“#{”和“}”）并将其放在一起与字符串的其余部分。

对于不以'#{}'块结尾的字符串的极端情况，添加一个空块，以确保。

但是，在使用 Ruby 几年之后，这仍然感觉很笨拙和 C-ish。也许是时候学习一门新语言了！

# c++ - 使用 std::ifstream 打开一个新文件

> ID：12990625
> 
> 赞同：-1
> 
> 时间：2012-10-20T16:51:47.503
> 
> 标签：c++

我使用打开一个文件，

```
 std::ifstream ifs(filename); 
```

我想使用相同的***ifs***变量打开一个新文件，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:56:53.823

```
ifs.close();
ifs.open(newfilename); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:49:53.713

请考虑`std::ifstream.close()`不清除其标志的，可能包含上一次会话的值。`clear()`在将流与另一个文件一起使用之前，请始终使用该函数清除标志。

例子：

```
ifstream mystream;
mystream.open("myfile");
while(mystream.good())
{
  // read the file content until EOF
}
mystream.clear(); // if you do not do it the EOF flag remains switched on!
mystream.close();

mystream.open("my_another_file");
while(mystream.good()) // if not cleared, this loop will not start! 
{
  // read the file
}
mystream.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T17:02:12.053

```
 ifs.close();     //close the previous file that was open
       ifs.open("NewFile.txt", std::ios::in);    //opens the new file in read-only mode

       if(!ifs)                             //checks to see if the file was successfully opened
       {
            std::cout<<"Unable to read file...\n";
            return;
       }

       char* word = new char[SIZE]; //allocate whatever size you want to
       while(ifs>>word)     
       {
           //do whatever
       }
       ifs.close();          //close the new file
       delete[] word;         //free the allocated memory 
```

# java - 我还必须做什么才能让我的方法处理任何类型的对象

> ID：12990626
> 
> 赞同：0
> 
> 时间：2012-10-20T16:51:47.840
> 
> 标签：java, generics, object, linked-list

因此，为了允许任何类型对象，我必须在我的代码中使用泛型。

我已经重写了这个方法，但是当我创建一个对象时，例如 Milk，它不会让我将它传递给我的方法。

以太我的通用修订版有问题，或者我创建的 Milk 对象不好。

我应该如何正确传递我的对象并将其添加到链表？

这是一种在我插入项目时会导致错误的方法：

```
 public void insertFirst(T dd)  // insert at front of list
   {
      Link newLink = new Link(dd);   // make new link

      if( isEmpty() )                // if empty list,
         last = newLink;             // newLink <-- last
      else
         first.previous = newLink;   // newLink <-- old first
      newLink.next = first;          // newLink --> old first
      first = newLink;               // first --> newLink
   } 
```

这是我尝试插入链表的课程：

```
class Milk
{
    String brand;
    double size;
    double price;

    Milk(String a, double b, double c)
    {
        brand = a;
        size = b;
        price = c;
    }
} 
```

这是插入数据的测试方法：

```
 public static void main(String[] args)
      {                             // make a new list
      DoublyLinkedList theList = new DoublyLinkedList();

      // this causes:
      // The method insertFirst(Comparable) in the type DoublyLinkedList is not applicable for the arguments (Milk)
      theList.insertFirst(new Milk("brand", 1, 2));      // insert at front

      theList.displayForward();     // display list forward
      theList.displayBackward();    // display list backward
      }  // end main()
   }  // end class DoublyLinkedApp 
```

声明：

```
class Link<T extends Comparable<T>>
   {}

class DoublyLinkedList<T extends Comparable<T>>
   {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T16:58:38.453

根据您定义`T`为 Comparable的错误

```
public class DoublyLinkedList<T extends Comparable<T>> { 
```

但是您要添加一种不可比较的类型。目前尚不清楚为什么您的课程需要具有可比性，因为您似乎没有在插入方法中使用它，所以我会放弃要求。

```
public class DoublyLinkedList<T> { 
```

如果您要复制 JDK 中的类的功能，我建议您通过阅读其源代码来了解它的工作原理。

[http://www.docjar.com/html/api/java/util/LinkedList.java.html](http://www.docjar.com/html/api/java/util/LinkedList.java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:58:02.893

您必须像这样实例化您的列表：

```
DoublyLinkedList<Milk> theList = new DoublyLinkedList<Milk>(); 
```

而我差点忘了...

```
Milk implements Comparable<Milk> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T17:00:42.590

好吧，你`Milk`的还不够好 - 但这还不是全部。
它应该是 ：

```
class Milk implements Comparable<Milk> 
```

（你需要实现这个接口）。

此外：

```
Link newLink = new Link(dd); 
```

和

```
DoublyLinkedList theList = new DoublyLinkedList(); 
```

是类型`DoublyLinkedList<Object>`（它们是*原始类型*） - （并且相同`Link<Object>`）与所需类型不可比较（`Object`不是`Comparable<Object>`）

所以你应该这样做才能修复它：

1.  确保`Milk`实现`Comparable<Milk>`
2.  声明你的变量并将它们初始化为泛型类型：`DoublyLinkedList<Milk>`和`Link<T>`

另一种选择（对于 1）-如果您不需要该`Comparable`功能-只需将它们都声明为：

```
class DoublyLinkedList<T>
class Link<T> 
```

# javascript - 滚动时向元素添加类

> ID：12990630
> 
> 赞同：0
> 
> 时间：2012-10-20T16:53:12.693
> 
> 标签：javascript, jquery, css, class

当用户第一次从页面顶部滚动时，我想向元素添加一个类。如果用户然后向上滚动并点击页面顶部，我希望删除该类。

在解决方案中使用 jQuery 很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T16:56:07.467

尝试

```
$(window).scroll(function() {    

    $("id or class").removeClass("active");

    var scroll = $(window).scrollTop();

    if (scroll <= 500) {
        $("#one").addClass("active");
    }
    else if (scroll <= 1000) {
        $("#tow").addClass("active");
    }
    else {
        $("#three").addClass("active");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:55:46.420

所以这是您正在寻找的解决方案。只需使用您的`div`标签对其进行自定义。

```
$(document).ready(function () {
    $(window).scroll(function(){
      // get the height of #wrap
      var h = $('#top').height();
      var y = $(window).scrollTop();

      if( y > (h*.25) ){

       $("#sidef").fadeIn(1100);
      } else {
       $('#sidef').fadeOut(75);
      }
     });
      }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:58:03.243

```
var notAdded = true;
$(window).scroll(function(){
  if(  $(this).scrollTop() == 0){
       $(elem).removeClass('classname');
       notAdded = true;
  }
  else if(notAdded){
     $(elem).addClass('classname');
       notAdded  = false;
 }
}); 
```

# bash - Bash 脚本无法在新的专用服务器上运行

> ID：12990631
> 
> 赞同：2
> 
> 时间：2012-10-20T16:53:27.473
> 
> 标签：bash, freebsd

最近我已经迁移到运行在**同一**操作系统上的新的专用服务器 - FreeBSD 8.2。我获得了 root 帐户访问权限，并且所有权限都已正确设置。

我的问题是，我在旧服务器上运行的 bash 脚本在新机器上不起作用，运行脚本时出现的唯一错误是：

```
# sh script.sh
script.sh: 3: Syntax error: word unexpected (expecting ")") 
```

这是代码本身：

```
#!/usr/local/bin/bash

PORTS=(7777:GAME 11000:AUTH 12000:DB)
MESSG=""
for i in ${PORTS[@]} ; do
    PORT=${i%%:*}
    DESC=${i##*:}
    CHECK=`sockstat -4 -l | grep :$PORT | awk '{print $3}' | head -1`
    if [ "$CHECK" -gt 1 ]; then
        echo $DESC[$PORT] "is up ..." $CHECK
    else
        MESSG=$MESSG"$DESC[$PORT] wylaczony...\n"
        if [ "$DESC" == "AUTH" ]; then
            MESSG=$MESSG"AUTH is down...\n"
        fi
        if [ "$DESC" == "GAME" ]; then
            MESSG=$MESSG"GAME is down...\n"
        fi
        if [ "$DESC" == "DB" ]; then
            MESSG=$MESSG"DB is down...\n"
        fi

    fi
done

if [ -n "$MESSG" ]; then
    echo -e "Some problems ocurred:\n\n"$MESSG | mail -s "Problems" yet@another.com
fi 
```

我并没有真正用 bash 编写代码，所以我不知道为什么会发生这种情况......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:13:48.303

Bourne shell ( `sh`) 不支持数组，这就是您在使用时遇到此错误的原因

```
sh script.sh 
```

`bash`改为使用

```
bash script.sh 
```

**注意**：我怀疑它`sh script.sh`在旧服务器上工作，因为`sh`它链接到`bash`那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:17:35.550

您也不需要运行它`sh`（这就是 `#!` 第一行的用途 - 操作系统将运行该行的其余部分作为命令并传递文件的内容以供其解释）。只需使脚本可执行： `chmod +x script.sh` 然后您可以直接运行它而无需`sh`名称前面。

默认 shell 可能不是 bash，因此通过运行它，`sh`您正在使用不同的 shell 解释它，然后给出错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:18:04.377

代码看起来不错。很可能您的新专用服务器运行的 Bash 版本比您上一个服务器的版本旧。或者 /usr/local/bin/bash 可能指向旧版本。

跑

> $ 哪个 bash

如果输出不是`/usr/local/bin/bash`那么将第一个 shebang 行更改为较新的路径，如果它仍然不起作用

尝试替换第三行：

```
PORTS=(7777:GAME 11000:AUTH 12000:DB) 
```

和

```
PORTS=('7777:GAME' '11000:AUTH' '12000:DB') 
```

并重新运行脚本。

如果它仍然不起作用，请通过运行在此处发布 BASH 版本

```
$ bash --version 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T18:23:30.207

尝试面对和尾随空格

```
PORTS=( 7777:GAME 11000:AUTH 12000:DB ) 
```

# ruby-on-rails - 没有路线匹配 - Rails

> ID：12990633
> 
> 赞同：5
> 
> 时间：2012-10-20T16:53:31.683
> 
> 标签：ruby-on-rails, ruby, routes, ruby-on-rails-3.2

在 Rails 中设置我的第二个项目（首先没有遵循教程）并且遇到了我无法用我的路线解决的问题。使用我的 routes.rb 文件，一切都按照我的意愿工作，例如：

```
AnimalApp::Application.routes.draw do

    root to: 'static_pages#index'
        # resources :animal
    match '/help', to: 'static_pages#help'
    match '/about', to: 'static_pages#about'
    match '/contact', to: 'static_pages#contact'
    match '/league', to: 'static_pages#league'
    match '/animal', to: 'animal#new' 
```

除了我无法访问我的动物！转到 /animal/1 会引发错误： `No route matches [GET] "/animal/1"`

为了解决这个问题，我改变了我的路线如下：

```
 AnimalApp::Application.routes.draw do

    root to: 'static_pages#index'
        resources :animal
    match '/help', to: 'static_pages#help'
    match '/about', to: 'static_pages#about'
    match '/contact', to: 'static_pages#contact'
    match '/league', to: 'static_pages#league'
    #match '/animal', to: 'animal#new' 
```

但是，当我尝试查看我网站上的任何其他页面时，我收到以下错误： `No route matches {:action=>"show", :controller=>"animal"}`

有关更多信息，请参见我的控制器下方：（静态页面）

```
class StaticPagesController < ApplicationController
  def help
  end

  def league
  end

  def contact
  end

  def about
  end

  def index
  end

  def show
  end
end 
```

动物控制器

```
class AnimalController < ApplicationController
    def new
    @animal = Animal.new
    end

def show
    @animal = Animal.new
end
end 
```

而且，我已经跑了，`rake routes`我得到了：

```
animal_index GET    /animal(.:format)          animal#index
            POST    /animal(.:format)          animal#create
  new_animal GET    /animal/new(.:format)      animal#new
 edit_animal GET    /animal/:id/edit(.:format) animal#edit
      animal GET    /animal/:id(.:format)      animal#show
             PUT    /animal/:id(.:format)      animal#update
          DELETE    /animal/:id(.:format)      animal#destroy
            root    /                          static_pages#index
            help    /help(.:format)            static_pages#help
           about    /about(.:format)           static_pages#about
         contact    /contact(.:format)         static_pages#contact
          league    /league(.:format)          static_pages#league
                    /animal(.:format)          animal#new 
```

有谁知道我怎样才能让我的网站恢复原状并让我自己在 URI /animal/[:id] 下查看我的动物数据库中的对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T17:12:05.003

让它`resources :animals`代替`resources :animal`

`rake routes`应显示以下输出：

```
 animals GET    /animals(.:format)          animals#index
            POST   /animals(.:format)          animals#create
 new_animal GET    /animals/new(.:format)      animals#new
edit_animal GET    /animals/:id/edit(.:format) animals#edit
     animal GET    /animals/:id(.:format)      animals#show
            PUT    /animals/:id(.:format)      animals#update
            DELETE /animals/:id(.:format)      animals#destroy 
```

# clojure - Compojure 路由参数为空

> ID：12990634
> 
> 赞同：6
> 
> 时间：2012-10-20T16:53:43.477
> 
> 标签：clojure, compojure

我的 Compojure Web 应用程序 ([compojure "1.0.1"]) 总是收到一个空的参数映射，尽管添加了 wrap-params 等。下面的代码示例：

```
(defroutes public-routes
  (PUT "/something" {params :params}
      (println (str "Params: " params))
      (do-put-something params)))

(def myapp 
  (-> public-routes
      ring-params/wrap-params))

(defn start-server []
  (future (jetty/run-jetty (var myapp) {:port 8080}))) 
```

我尝试添加 wrap-params、wrap-keyword-params 和 wrap-multipart-params 但是当我使用[httpie](https://github.com/jkbr/httpie)（或我的客户端）将 PUT 到端点时，我发现 params 始终为空。任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:04:17.030

您的示例代码的唯一问题是它在路由正文中缺少环响应哈希映射。解决方案是评估为响铃响应，而不是使用 println。当您在路由中调用 println 时，它会打印到服务器进程正在运行的标准输出，这与对 API 调用的响应无关。

```
(defroutes public-routes
  (PUT "/something" {params :params}
    {:status 200
     :body (str "Params: " params)})) 
```

这会产生一个 200 响应`Params: {"foo" "bar"}`作为响应正文。

我正在使用它来测试您的 PUT 路线：

```
curl -X PUT -d "foo=bar" http://127.0.0.1:8080/something 
```

# java - JAXB 没有为空的 xs:element 标签创建类

> ID：12990635
> 
> 赞同：3
> 
> 时间：2012-10-20T16:53:55.057
> 
> 标签：java, xml, xsd, jaxb

我正在将一个项目从 jaxb 1.0 迁移到 2.1。当使用 jaxb 2.1（通过 ant xjc 任务）从 xsd 生成类时，生成的类缺少不包含如下内容的元素：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="unqualified">
....
<xs:element name="get-all-services-partners-request"/> 
```

但是，当元素确实有内容时*会生成文件，如下所示：*

```
 <xs:element name="catalog-full-service-request">
   <xs:complexType>
     <xs:sequence>
       <xs:element name="service-id" type="xs:string" minOccurs="0"/>
       <xs:element name="log-id" type="xs:string" minOccurs="0"/>
     </xs:sequence>
   </xs:complexType>
 </xs:element> 
```

为什么会这样？之前生成的一组类（使用 jaxb 1.0）包含所有元素的类，而不仅仅是那些具有内容的类。

如何让 jaxb 生成这些缺失的类？我真的无权更改 xsd（但如果真的有必要可以这样做）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T19:59:10.923

好消息是您不需要生成“缺失的类”，我将在下面通过一个示例进行演示。

**架构.xsd**

下面是您的 XML 模式的简化版本。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="unqualified">

    <xs:element name="get-all-services-partners-request" />

    <xs:complexType name="foo">
        <xs:sequence>
            <xs:element name="bar" type="xs:string" />
        </xs:sequence>
    </xs:complexType>

</xs:schema> 
```

**富**

JAXB (JSR-222) 实现将为每个复杂类型（命名或匿名）创建一个类。在上述 XML 模式中，只有一种复杂类型 ( `foo`)，因此仅生成模型类。

```
package forum12990635;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "foo", propOrder = {
    "bar"
})
public class Foo {

    @XmlElement(required = true)
    protected String bar;

    public String getBar() {
        return bar;
    }

    public void setBar(String value) {
        this.bar = value;
    }

} 
```

**对象工厂**

与命名复杂类型相对应的全局元素对应于`@XmlElementDecl`带有注释的类上的注释`@XmlRegistry`（参见： [http](http://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html) ://blog.bdoughan.com/2012/07/jaxb-and-root-elements.html ）。

```
package forum12990635;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.XmlElementDecl;
import javax.xml.bind.annotation.XmlRegistry;
import javax.xml.namespace.QName;

@XmlRegistry
public class ObjectFactory {

    private final static QName _GetAllServicesPartnersRequest_QNAME = new QName("", "get-all-services-partners-request");

    public ObjectFactory() {
    }

    public Foo createFoo() {
        return new Foo();
    }

    @XmlElementDecl(namespace = "", name = "get-all-services-partners-request")
    public JAXBElement<Object> createGetAllServicesPartnersRequest(Object value) {
        return new JAXBElement<Object>(_GetAllServicesPartnersRequest_QNAME, Object.class, null, value);
    }

} 
```

**演示**

下面是一个如何使用根元素创建文档的示例`get-all-services-partners-request`。

```
package forum12990635;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance("forum12990635");

        Foo foo = new Foo();
        foo.setBar("Hello World");

        ObjectFactory objectFactory = new ObjectFactory();
        JAXBElement<Object> jaxbElement = objectFactory.createGetAllServicesPartnersRequest(foo);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(jaxbElement, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<get-all-services-partners-request xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="foo">
    <bar>Hello World</bar>
</get-all-services-partners-request> 
```

# google-apps-script - 在 Google Script 中访问电子表格

> ID：12990637
> 
> 赞同：11
> 
> 时间：2012-10-20T16:53:57.783
> 
> 标签：google-apps-script

我正在电子表格上编写谷歌脚本。我想将其部署为 Web 应用程序。它显示了一些值。不幸的是，用我当前的代码，谷歌提醒我：

> TypeError：无法调用 null 的方法“getSheetByName”。

我不知道错误在哪里。

这是代码

```
function doGet(e) {
    var app = UiApp.createApplication().setTitle('Details');
    var ss = SpreadsheetApp.getActiveSpreadsheet().getSheets()[0];
    var dataFromCell = ss.getRange("B4").getValue();

    var mypanel = app.createVerticalPanel();
    var label = app.createLabel(dataFromCell);

    app.add(mypanel);
    app.add(label);

    return app;
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-20T17:02:08.597

在独立的网络应用程序中，您不能使用 getActiveSpreadsheet，因为没有人在积极使用它...使用它`SpreadsheetApp.openById('ID')`，您可以在电子表格的 url 中获取 ID，如下例所示：

```
https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3d-------nZIV0JQQ0c1a3dWX1dQbGc#gid=0 
```

`key=`和之间`#`，即`0AnqSFd3iikE3d-------nZIV0JQQ0c1a3dWX1dQbGc`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-18T10:13:43.050

不需要使用 ID，只需尝试此代码（使用您的电子表格名称和单元格范围更改 mygooglelocation。使用谷歌地图对我来说工作得很好......

```
 var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('mygooglelocation');
  var ss = SpreadsheetApp.getActive();
  var mylocationInfo   = ss.getRange("A2:B4").getValues(); 
```

# sql - 在 PL/PgSQL EXECUTE 动态查询中正确插入文字

> ID：12990638
> 
> 赞同：5
> 
> 时间：2012-10-20T16:54:00.907
> 
> 标签：sql, postgresql, plpgsql, dynamic-sql

以下是 plpgsql 函数的一部分。问题是`source_geom`and的结果`target_geom`是一种`character varying`数据类型，因此我需要将`source_geom`and`target_geom`括在引号（''）中。问题是在 plpgsql 语言中我不知道我能做到这一点。
这是我目前所拥有的：

```
 EXECUTE 'update ' || quote_ident(geom_table) || 
        ' SET source = ' || source_geom || 
        ', target = ' || target_geom ||
        ' WHERE ' || quote_ident(gid_cname) || ' =  ' || _r.id; 
```

我遇到的错误如下；

```
ERROR:  syntax error at or near "C03B9E3B66052D400DDEFC2BD0F24140"
LINE 1: ...pdate track_points SET source = 0101000020E6100000C03B9E3B66...
                                                             ^
QUERY:  update track_points SET source = 0101000020E6100000C03B9E3B66052D400DDEFC2BD0F24140, target = 0101000020E610000075690DEF83052D40F88E75CCD4F24140 WHERE ogc_fid =  2
CONTEXT:  PL/pgSQL function "create_network" line 26 at EXECUTE statement 
```

请任何建议我如何解决这个问题。？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-21T06:01:27.990

使用`EXECUTE ... USING`该`format()`函数及其格式说明符将使您的代码更安全、更简单、更易于阅读并且可能更快。

* * *

**SQL 注入警告**：如果您曾经接受`source_geom`或`target_geom`来自最终用户，您的代码可能容易受到[SQL 注入](http://bobby-tables.com/postgresql.html)的攻击。重要的是使用参数化语句（如`EXECUTE ... USING`）或失败，偏执引用以防止 SQL 注入攻击。即使你认为你的函数不需要用户输入，你仍然应该加强它以防止 SQL 注入，因为你不知道你的应用程序将如何发展。

* * *

如果您使用的是具有该[`format`功能](http://www.postgresql.org/docs/current/static/functions-string.html)的较新 PostgreSQL，您的代码可以显着简化为：

```
EXECUTE format('update %I SET source = %L, target = %L WHERE %I = %L',
    geom_table, source_geom, target_geom, gid_cname, _r.id); 
```

...它使用格式说明符为您处理标识符 ( `%I`) 和文字 ( `%L`) 引用，因此您不必编写所有糟糕的`||`连接和`quote_literal`/`quote_ident`东西。

然后，根据[文档，`EXECUTE ... USING`](http://www.postgresql.org/docs/9.1/static/plpgsql-statements.html#PLPGSQL-QUOTE-LITERAL-EXAMPLE)您可以将查询进一步细化为：

```
EXECUTE format(
    'update %I SET source = $1, target = $2 WHERE %I =  $3',
    geom_table, gid_cname
) USING source_geom, target_geom, _r.id; 
```

它将查询转换为参数化语句，清楚地将参数与标识符分开，并降低字符串处理成本以实现更有效的查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T17:23:26.030

使用额外的引号：

```
EXECUTE 'update ' || quote_ident(geom_table) || 
        ' SET source = ''' || source_geom || ''' 
        , target = ''' || target_geom || '''
        WHERE ' || quote_ident(gid_cname) || ' =  ' || _r.id; 
```

# android - 从数据库中读取数据并将它们绑定到自定义 ListView

> ID：12990641
> 
> 赞同：0
> 
> 时间：2012-10-20T16:54:34.630
> 
> 标签：android, database, listview

我尝试从我创建的数据库中读取数据，并在自定义 ListView 中连续显示一些数据。我不明白我的错误是什么。

这是我的代码：

```
public class EsodaMainActivity extends Activity 
{ 
    public static final String ROW_ID = "row_id"; //Intent extra key
    private ListView esodaListView;  // the ListActivitys ListView
    private SimpleCursorAdapter esodaAdapter; // adapter for ListView
    DatabaseConnector databaseConnector = new DatabaseConnector(EsodaMainActivity.this);

    // called when the activity is first created
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_esoda_main);
        esodaListView = (ListView)findViewById(R.id.esodaList);
        esodaListView.setOnItemClickListener(viewEsodaListener);

        databaseConnector.open();

        //Cursor cursor= databaseConnector.query("esoda", new String[]
        //      {"name", "amount"}, null,null,null);
        Cursor cursor=databaseConnector.getAllEsoda();
        startManagingCursor(cursor);

        // map each esoda to a TextView in the ListView layout
        // The desired columns to be bound
        String[] from = new String[] {"name","amount"}; // built an String array named "from"
        //The XML defined views which the data will be bound to
        int[] to = new int[] { R.id.esodaTextView, R.id.amountTextView}; // built an int array named "to"
        // EsodaMainActivity.this = The context in which the ListView is running
        // R.layout.esoda_list_item = Id of the layout that is used to display each item in ListView
        // null = 
        // from = String array containing the column names to display
        // to = Int array containing the column names to display
        esodaAdapter = new SimpleCursorAdapter (this, R.layout.esoda_list_item, cursor, from, to);
        esodaListView.setAdapter(esodaAdapter); // set esodaView's adapter
    } // end of onCreate method

    @Override
    protected void onResume()
    {
        super.onResume(); // call super's onResume method

        // create new GetEsodaTask and execute it
        // GetEsodaTask is an AsyncTask object
        new GetEsodaTask().execute((Object[]) null);
    } // end of onResume method

    // onStop method is executed when the Activity is no longer visible to the user
    @Override
    protected void onStop()
    {
        Cursor cursor= esodaAdapter.getCursor(); // gets current cursor from esodaAdapter

        if (cursor != null) 
            cursor.deactivate(); // deactivate cursor

        esodaAdapter.changeCursor(null); // adapter now has no cursor (removes the cursor from the CursorAdapter)
        super.onStop();
    } // end of onStop method

    // this class performs db query outside the GUI
    private class GetEsodaTask extends AsyncTask<Object, Object, Cursor>
    {
        // we create a new DatabaseConnector obj
        // EsodaMainActivity.this = Context
        DatabaseConnector databaseConnector = new DatabaseConnector(EsodaMainActivity.this);

        // perform the db access
        @Override
        protected Cursor doInBackground(Object... params)
        {
            databaseConnector.open();

            // get a cursor containing call esoda
            return databaseConnector.getAllEsoda(); 
            // the cursor returned by getAllContacts() is passed to method onPostExecute()
        } // end of doInBackground method

        // here we use the cursor returned from the doInBackground() method
        @Override
        protected void onPostExecute(Cursor result)
        {
            esodaAdapter.changeCursor(result); // set the adapter's Cursor
            databaseConnector.close();
        } // end of onPostExecute() method
    } // end of GetEsodaTask class

    // creates the Activity's menu from a menu resource XML file
    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.esoda_menu, menu); // inflates(εμφυσώ) esodamainactivity_menu.xml to the Options menu
        return true;
    } // end of onCreateOptionsMenu() method

    //handles choice from options menu - is executed when the user touches a MenuItem
    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        // creates a new Intent to launch the AddEditEsoda Activity
        // EsodaMainActivity.this = Context from which the Activity will be launched
        // AddEditEsoda.class = target Activity
        Intent addNewEsoda = new Intent(EsodaMainActivity.this, AddEditEsoda.class);
        startActivity(addNewEsoda);
        return super.onOptionsItemSelected(item);
    } // end of method onPtionsItemSelected()

    // event listener that responds to the user touching a esoda's name in the ListView
    OnItemClickListener viewEsodaListener = new OnItemClickListener()
    {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)
        {
            // create an intent to launch the ViewEsoda Activity
            Intent viewEsoda = new Intent(EsodaMainActivity.this, ViewEsoda.class);
            // pass the selected esoda's row ID as an extra with the Intent
            viewEsoda.putExtra(ROW_ID, arg3);
            startActivity(viewEsoda); // start viewEsoda.class Activity
        } // end of onItemClick() method
    }; // end of viewEsodaListener

} // end of EsodaMainActivity class 
```

语句：`Cursor cursor=databaseConnector.getAllEsoda();` 从我想在我的自定义 ListView 中显示的数据中查询所有数据（列） 2：“名称”和“金额”。但我仍然收到调试器错误。请帮忙。

你的意思是来自调试器的消息？

> Esoda [Android Application] DalvikVM[localhost:8603] Thread [<1> main] (Suspended (exception RuntimeException))
> ActivityThread.performLaunchActivity(ActivityThread$ActivityRecord, Intent) 行：2663
> ActivityThread.handleLaunchActivity(ActivityThread$ActivityRecord, Intent) 行： 2679 ActivityThread.access$2300(ActivityThread, ActivityThread$ActivityRecord, Intent) 行：125
> ActivityThread$H.handleMessage(Message) 行：2033
> ActivityThread$H(Handler).dispatchMessage(Message) line: 99 Looper.loop() line: 123 ActivityThread.main(String[]) line: 4627 Method.invokeNative(Object, Object[], Class, Class[], Class , int, boolean) line: not available [native method] Method.invoke(Object, Object...) line: 521
> ZygoteInit$MethodAndArgsCaller.run() line: 868
> ZygoteInit.main(String[]) line: 626 NativeStart。 main(String[]) 行：不可用 [本机方法] 线程 [<6> Binder 线程 #2]（运行）线程 [<5> Binder 线程 #1]（运行）

这是LogCat：

```
10-20 21:53:19.903: W/ActivityThread(1973): Application development.nk.esoda is waiting for the debugger on port 8100...
10-20 21:53:19.933: I/System.out(1973): Sending WAIT chunk
10-20 21:53:19.943: I/dalvikvm(1973): Debugger is active
10-20 21:53:19.953: I/System.out(1973): Debugger has connected
10-20 21:53:19.953: I/System.out(1973): waiting for debugger to settle...
10-20 21:53:20.215: I/System.out(1973): waiting for debugger to settle...
10-20 21:53:20.478: I/System.out(1973): waiting for debugger to settle...
10-20 21:53:20.673: I/System.out(1973): waiting for debugger to settle...
10-20 21:53:20.890: I/System.out(1973): waiting for debugger to settle...
10-20 21:53:21.133: I/System.out(1973): waiting for debugger to settle...
10-20 21:53:21.333: I/System.out(1973): waiting for debugger to settle...
10-20 21:53:21.573: I/System.out(1973): waiting for debugger to settle...
10-20 21:53:21.790: I/System.out(1973): waiting for debugger to settle...
10-20 21:53:21.995: I/System.out(1973): waiting for debugger to settle...
10-20 21:53:22.198: I/System.out(1973): debugger has settled (1497) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T10:30:19.363

好的解决了这个问题......当我调用 getAllContacts() 方法时，我没有阅读所有列。我更改了它并添加了更多要阅读的列，然后我可以将这些值映射到我的自定义 ListView

# python - 如何使 Pool.map_async 可以访问函数

> ID：12990642
> 
> 赞同：1
> 
> 时间：2012-10-20T16:54:55.597
> 
> 标签：python, map, pool

我有一个带有用户定义函数的简单脚本`run`，我想使用 Pool.map_async 并行运行几次。当我尝试它时，我收到以下错误：

```
def getKey(where, key):
    found = re.search('<td.*?>%s:</td>.*?<td>(.*?)</td>' % key, where, re.DOTALL).group(1)
    return re.sub('<[^>]*?>', "", found).strip()

def extract(sitename):
    text = urllib.urlopen(sitename).read()
    return getKey(text, 'Name')

def run(start, span):
    links = get(start, span)
    if (len(links) == 0): return

    pool = Pool(span)
    pool.map_async(extract, links).get()
    pool.close()
    pool.join()

    run(start + span, span)

run(0, 50) 
```

```
PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed 
```

在[http://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)上说，`Functionality within this package requires that the __main__ module be importable by the children`但我不明白这实际上意味着什么，我应该怎么做才能解决这个问题。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:36:26.410

只需在调用 run() 之前在脚本中添加一行：

```
if __name__=="__main__":
    run(0, 50) 
```

# php - 嵌入 HTTPS 页面时 Youtube UMG 内容受到限制。不受限制嵌入 HTTP

> ID：12990645
> 
> 赞同：1
> 
> 时间：2012-10-20T16:55:24.203
> 
> 标签：php, javascript, iframe, https, youtube-api

正如标题所说。如果我在 2 个不同的 cpanel 服务器上的同一站点上嵌入具有完全相同代码的 youtube 视频 - 运行等效的 PHP 和 apache。区别在于 - 一个是 SSL，一个是 port80 HTTP。

两台英国服务器。

HTTP 将播放，SSL 站点将针对受限内容给出 UMG 错误。

嵌入生成的 HTML 的示例是

`<iframe id="ytplayer" width="100%" height="100%" frameborder="0" src="http://www.youtube.com/embed/My0HQ0QkGLQ?autoplay=1&origin=http://example.co.uk" type="text/html">`

使用 URI browse.php?url=http://www.youtube.com/watch?v=KyAyuZPNo2w&type=video 调用 PHP 页面 然后 stripvid() 获取嵌入 ID。

有没有办法在 HTTPS 框架内将页面加载为 HTTP？同一域上的两个页面。

更新:: 好的，因此将视频 URL 重定向到非 HTTP 服务器以解析并返回 iframe 工作。但那是 HTTPS 页面 -> HTTP iframe -> Youtube iframe 。这里会有技术人员对这么多的 iframe 发疯……嗯。想出更好的东西？;)

将 '&origin=https://example.com"' 更改为 http 无济于事。

```
 else if($_GET['type']=="video"){

$yurl = stripvid($url);
if  ($yurl!=$url){
echo '<link href="examplecss.css" rel="stylesheet" type="text/css"><script type="text/javascript" src="jquery.js"></script>  
<script type="text/javascript" src="jquery.animate-colors.js"></script>  
<script type="text/javascript" src="pixeljs.php"></script></head><body onload="sizewindow()"><div id="ytplayerdiv" style="height:100%; width:100%">

<iframe id="ytplayer" type="text/html" style="height:100%; width:100%"
src="http://www.youtube.com/embed/'.$yurl.'?autoplay=1&origin=https://example.com"
frameborder="0"/>

</div>

</body></html>';
} 
```

# javascript - 列中的哪一个是这个元素

> ID：12990646
> 
> 赞同：-4
> 
> 时间：2012-10-20T16:55:25.043
> 
> 标签：javascript, html, dom

假设我有以下代码：

```
<div id="container">
<div onclick="func(this)"></div>
...
...
<div onclick="func(this)"></div>
</div> 
```

单击时，我需要该函数`func`来获取：
1\. div 的索引，其中调用了 onclick 事件。
2.容器中的div总数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:04:33.837

假设您将`func`接收`this`作为第一个参数，您可以简单地遍历之前的兄弟姐妹，并计算之前有多少来计算索引。

要获得总计数，只需`.children`从父母那里获得计数。

```
function func(elem) {
    var idx = 0;
    var total = elem.parentNode.children.length;
     // --------v----note the assignment!
    while (elem = elem.previousElementSibling) {
        idx++;
    }
    console.log("index:", idx, " of:", total);
} 
```

如果您需要支持没有 的旧浏览器`.previousElementSibling`，您可以使用`.previousSibling`并测试 nodeType 为 1。

```
function func(elem) {
    var idx = 0;
    var total = elem.parentNode.children.length;
     // --------v----note the assignment!
    while (elem = elem.previousSibling) {
        if (elem.nodeType === 1)
            idx++;
    }
    console.log("index:", idx, " of:", total);
} 
```

所有这些都假设容器中没有其他元素需要计算在内。如果还有其他人，则需要将它们从计数中过滤掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:04:53.017

此代码将满足您的需求：

```
function func(el){
    // get the list of all element contained by the parent
    var list = el.parentElement.children, i;
    // get the index of the element
    for (i = 0; i<list.length;i++){
        if (list[i] == el) break;
    }
    // logging index and total childrencount to console (F12)
    console.log("children total: "+list.length);
    console.log("# of element: "+ ++i);
}​ 
```

**[例子](http://jsfiddle.net/vmzuM/1)**

# java - Java 独立应用程序中的 Log4j 记录器。jar 文件中的属性路径

> ID：12990648
> 
> 赞同：0
> 
> 时间：2012-10-20T16:55:35.720
> 
> 标签：java, properties, path, log4j

我想在我的 java 独立应用程序中使用 Log4j。我应该把我的 log4j.properties 文件放在哪里，以便我可以将它与我的应用程序一起分发？它应该位于 log4j jar 中还是我的应用程序的 jar 中？哪个是正确的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:07:11.940

放入应用程序的 jar 中。

根据经验，您应该避免重新包装现有的罐子，尤其是第三方罐子。为什么？

*   如果它们以某种方式进行了数字签名，那么您可能会破坏签名。
*   对于其他人来说，您已将文件添加到第三方 jar 中并不明显。如果他们尝试将其升级到更高版本，并且不知道他们需要向其中添加文件，那么他们会非常困惑。
*   在构建过程中重新打包 jars 很慢。但是由于无论如何您都必须构建应用程序 jar，因此添加 log4j.properties 之类的文件很便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:19:07.830

始终建议将此类配置放入您自己的包装大战或 jar 中。这样您就不会有更改或配置被覆盖的风险。

相反，Martin 解释了使用其他 3rd 方 jar 进行包装的问题。

# mysql - 减号、联合和交叉点

> ID：12990653
> 
> 赞同：0
> 
> 时间：2012-10-20T16:55:40.390
> 
> 标签：mysql, intersection, unions

我目前正在做以下作业：

```
CREATE TABLE T_1
(COURSE_NO CHAR(8) PRIMARY KEY,
COURSE_NAME CHAR(50) );

CREATE TABLE T_2
(COURSE_NO CHAR(8),
COURSE_NAME CHAR(50) );

CREATE TABLE T_3
(COURSE_NO CHAR(8),
STUDENT_ID CHAR(15),
GRADE CHAR (2));

INSERT INTO T_1
VALUES
('CS100','Data Structures'),
('CS200','Object Oriented Programming'),
('CS300','Distributed Systems'),
('EE100','Circuit Analysis'),
('EE200','VLSI Design'),
('EE300','Packet Switching Networks');

INSERT INTO T_2
VALUES
('EE100','Circuit Analysis'),
('EE200','VLSI Design'),
('EE300','Packet Switching Networks'),
('MA100','Calculus'),
('MA200','Advanced Calculus'),
('MA300','Number Theory');

INSERT INTO T_3
VALUES
('CS100','150-70-5879','B'),
('CS100','280-90-8766','A'),
('EE100','430-76-6858','B'),
('CS200','720-60-5000','B'); 
```

我被要求指定给定的元组：(T1 - T2) union (T2 - T1) Union (T1 intersect T2)。

现在我知道 MySQL 使用或者加入减号运算符，我能够以自己的方式处理每个减号，例如：

```
SELECT *
FROM T_1
LEFT JOIN T_2
ON T_1.Course_No = T_2.Course_no
WHERE T_2.Course_no IS NULL; 
```

我也可以为 T2 - T1 执行此操作，但在 1 个查询中完成所有操作或如何 (T1-T2) U (T2-T1) 或 (T2-T1) U (T1nT2) 时我迷失了。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T17:59:37.637

# T [1] ∖ T [2]

![T<sub>1</sub> ∖ T<sub>2</sub>](../Images/fb566028c0c73b3b995a21e26263d250.png)

# T [2] ∖ T [1]

![T<sub>2</sub> ∖ T<sub>1</sub>](../Images/e431d01ec9eb53882d3ca6b45109721d.png)

# T [1] ∩ T [2]

![T<sub>1</sub> ∩ T<sub>2</sub>](../Images/157c4bbd295841183c7aea9da46e1ffa.png)

因此 (T [1] ∖ T [2] ) ∪ (T [2] ∖ T [1] ) ∪ (T [1] ∩ T [2] ) = T [1] ∪ T [2]：

![T<sub>1</sub> ∪ T<sub>2</sub>](../Images/5b6224f422ecddaca1cf45aba256895f.png)

```
SELECT * FROM T_1 UNION SELECT * FROM T_2 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/16770/1/0)上查看。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T17:05:06.827

不是最好的，但非常直观的方式：

```
q1 = (T1 - T2): (SELECT course_no FROM T_1
                 WHERE course_no NOT IN (SELECT course_no FROM T_2))
q2 = (T2 - T1): same way, change T_1 and T_2
q3 = (T1 intersect T2): (SELECT course_no FROM T_1
                         WHERE course_no IN (SELECT course_no FROM T_2))

answer = q1 union q2 union q3 
```

我们得到以下 sql 查询：

```
(SELECT course_no FROM T_1 WHERE course_no NOT IN (SELECT course_no FROM T_2))
UNION
(SELECT course_no FROM T_2 WHERE course_no NOT IN (SELECT course_no FROM T_1))
UNION
(SELECT course_no FROM T_1 WHERE course_no IN (SELECT course_no FROM T_2)) 
```

T_3 怎么样？

编辑：

```
T_1 = CS100, CS200, CS300, EE100, EE200, EE300
T_2 = EE100, EE200, EE300, MA100, MA200, MA300

q1 = T_1 - T_2 = CS100, CS200, CS300
q2 = T_2 - T_3 = MA100, MA200, MA300
q3 = T_1 intersect T_2 = EE100, EE200, EE300

answer = q1 union q2 union q3 = CS100, CS200, CS300, MA100, MA200, MA300, EE100, EE200, EE300 
```

# node.js - node.js 表示 Windows 7 中等效的应用程序创建

> ID：12990656
> 
> 赞同：0
> 
> 时间：2012-10-20T16:55:45.787
> 
> 标签：node.js, powershell, windows-7, express, pug

我正在关注node.js 和 express 上的[本教程。](http://shapeshed.com/creating-a-basic-site-with-node-and-express/)

作者在一台 UNIX 机器上。用express、jade和stylus创建app骨架，作者说运行命令

```
./node_modules/express/bin/express -t jade -c stylus 
```

但是，我在 Windows 7 机器上，所以这个命令不起作用。`./node_modules/express/bin/express jade stylus`也不做想要的。

什么是作者的 Windows PowerShell 命令的等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:52:03.210

Express 可以“全局”安装。这意味着操作系统将`express`在命令行中创建一个链接，该链接将运行快速应用程序创建器。

只需`-g`在安装时添加一个选项，然后`express`在没有路径的情况下直接调用`node_modules`：

```
C:\project>npm install express -g
C:\project>express --sessions --css stylus --ejs myapp 
```

我建议您遵循官方指南：[http](http://expressjs.com/guide.html) ://expressjs.com/guide.html 。您正在遵循的教程是针对 Express 2.* 和 Express 3 的，它做了一些改动。

# jquery - 使用 jQuery 进行部分滑动

> ID：12990660
> 
> 赞同：0
> 
> 时间：2012-10-20T16:56:04.387
> 
> 标签：jquery, animation, slidedown, jquery-hover

我有一些带有抽屉菜单的按钮，我想做的是添加一个状态，以便当用户将鼠标悬停在按钮上时，抽屉会稍微凸出（可能会有一点摆动/橡皮筋），以便他们知道有一个抽屉，里面有更多信息。

我设置了滑动工作和悬停功能，但我不知道如何实现部分滑动。

有任何想法吗？

**[小提琴](http://jsfiddle.net/pN9ff/14/)**。

代码：

```
<div class="clause">
    <div class="icon"><img src="http://i.imgur.com/rTu40.png"/></div>
    <div class="label">Location</div>
    <div class="info">Midwest > Indiana, Kentucky; Southwest > Texas, Nevada, Utah; Pacific > California, Hawaii</div>        
</div>
<div class="drawer">Info 1<br/><br/></div> 
<div class="drawerBottom"></div> 
```

* * *

```
$(".clause").click(function() {
    var tmp = $(this).next("div.drawer");
    if(tmp.is(":hidden"))
        tmp.slideDown('3s');
    else
        tmp.slideUp('3s');
});

$(".clause").hover(function() {

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:29:35.237

使用这样的东西。代码很脏（我是初学者：P）所以不要按原样使用它......清理一下。

[http://jsfiddle.net/VWQQ2/](http://jsfiddle.net/VWQQ2/)

```
$(".operator").click(function() {
    if ($(this).text() == "OR") $(this).html("AND");
    else if ($(this).text() == "AND") $(this).html("NOT");
    else if ($(this).text() == "NOT") $(this).html("OR");
});

var tmp;

$(".clause").hover(function() {

    tmp = $(this).next("div.drawer");
    if (tmp.is(':hidden')) {
        tmp.height("1px");
        tmp.stop(true, true);
        tmp.slideDown('3s');
    }
},

function() {

    tmp = $(this).next("div.drawer");
    if (tmp.height() <= '1') {
        tmp.slideUp('3s');

    }
});

$(".clause").click(function() {
    tmp = $(this).next("div.drawer");
    tmp.stop(true, true);
    if (tmp.height() <= '1') {
        tmp.height('100%');
        var height = tmp.height();
        tmp.height('1px');
        tmp.animate({
            'height': height
        }, 500);
        state = 'open';
    }
    else if (tmp.height() > '2') {
        tmp.slideUp(500);
    }
}); 
```

# performance - EF5 .本地性能

> ID：12990662
> 
> 赞同：1
> 
> 时间：2012-10-20T16:56:13.707
> 
> 标签：performance, entity-framework

我在一个有 ~43k 行的表上执行此操作：

```
MyDbContext.Stores.Load();
MyDbContext.Stores.Local.Count.Dump(); //horrible performance! 
```

我可以通过分析器看到第一条指令触发 select 语句以获取所有行。实际上，第二条指令返回正确的值，但在大约 12 秒之后，考虑到所有数据都应该在内存中，这不是我所期望的。实体框架中的 .Local 有什么问题（或它的真正目的是什么）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:03:43.457

我认为你应该这样做：

```
var stores = MyDbContext.Stores.ToList();

// stores is in memory after executing .ToList()
var count = stores.Count(); 
```

[DbSet.Local 属性](http://msdn.microsoft.com/en-us/library/gg696248%28v=vs.103%29.aspx)

> 此属性返回一个 ObservableCollection，其中包含当前由给定 DbSet 的上下文跟踪的所有未更改、已修改和已添加对象。返回的可观察集合与底层 DbSet 集合和上下文内容保持同步。这意味着您可以修改 observable 集合或在底层 DbSet 集合中添加/删除实体（包括通过执行查询添加实体），并且两个集合将同步。
> 
> 此属性通常用于数据绑定应用程序中。

# javascript - 如果用户单击链接，如何关注下一个字段？

> ID：12990667
> 
> 赞同：0
> 
> 时间：2012-10-20T16:56:55.383
> 
> 标签：javascript, jquery, twitter-bootstrap

我有许多带有标签链接的字段，如下所示：

```
<div class="control-group">
    <label class="control-label" for="some-id-1"><a href="http://example.com/some-id-1" target="_blank">Text1</a></label>
    <div class="controls">
        <input type="text" id="some-id-1" name="some-id-1"><br>
    </div>
</div>
<div class="control-group">
    <label class="control-label" for="some-id-2"><a href="http://example.com/some-id-2" target="_blank">Text2</a></label>
    <div class="controls">
        <input type="text" id="some-id-2" name="some-id-2"><br>
    </div>
</div> 
```

如果用户单击链接，我如何根据字段聚焦（不阻止默认操作）？即，如果用户单击`Text1`，那么我应该`http://example.com/some-id-1`在新窗口中打开并使用 id 在输入处设置焦点`some-id-1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T16:59:28.127

[jsfiddle](http://jsfiddle.net/EkyCt/)

```
$(".control-label a").click(function(){
   $(this).parent().next().find('input').focus();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T16:59:49.797

```
$('.control-label a').on('click', function(e) {
  e.preventDefault();
  $(this).parent().next().find('input').focus();
  // or
  $('.control-group').has(this).find('input').focus();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T16:59:00.293

```
<a href="http://example.com/some-id-1" target="_blank" onClick="document.getElementById('some-id-1').focus();">Text1</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T17:09:21.273

如果理解正确，您想打开一个新页面并在新页面中根据单击的链接设置焦点

如果您要打开一个新页面，您需要在 url 中传递一个哈希值或使用 cookie 并让其他页面解析哈希值或 cookie

在当前页面中：

```
$(function(){
    $('.control-label a').click(function(){
       var hash='#'+ $(this).next().find('input').attr('id');
       window.open( this.href + hash);
        return false;
    });
}) 
```

在其他页面：

```
$(function(){
    var hash= location.hash;
    $(hash).focus();
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T17:13:13.453

一个页面中的 JavaScript 无法控制另一个页面如何响应 URL，如果“其他”页面在您的控制之下，那么您可以将其设置为解析`id`：

```
var parts = document.location.href.split('/'),
    id = parts.pop();

document.getElementById(id).focus; 
```

另一方面，如果您想可靠地聚焦该元素，只需将 a`id`作为 a传递`hash`给 URL：

```
<a href="somepage.html#some-id">Go to an element of 'some id'</a> 
```

这可能不会关注表单元素，但它应该将该元素吸引到用户的注意，并且在您无法控制的页面中，它更加可靠。

# web - Intuit PaymentNetwork 回调 URL

> ID：12990668
> 
> 赞同：1
> 
> 时间：2012-10-20T16:57:04.423
> 
> 标签：web, integration, intuit

我正在尝试与[Intuit PaymentNetwork](https://ipn.intuit.com)集成以在客户的网站上进行付款。我可以创建一个支付按钮就好了，但我没有看到任何地方可以设置回调 url，让我的网站知道支付已成功处理。我希望能找到类似于 PayPal 的 IPN 服务的东西，但我不确定。以前有没有人集成过这个？谢谢。

# matlab - MATLAB SVMStruct（从 svmtrain 获得）保存在文件中，稍后读取

> ID：12990672
> 
> 赞同：3
> 
> 时间：2012-10-20T16:57:23.053
> 
> 标签：matlab, svm

有没有一种方法可以将 SVMStruct（使用 Matlab 获得`svmtrain`）写入文件，然后在需要时读取它。我想这样做是因为我`SVMclassify`在训练数据后无法使用，它给出了内存不足的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T19:32:04.337

您可以只使用`save`保存：

```
svmstruct=svmtrain(........
save('file2save.mat','svmstruct'); 
```

并`load`稍后重新加载：

```
load('file2save.mat','svmstruct');
svmclassify(svmstruct,......... 
```

# c++ - trie 数据结构中的所有单词

> ID：12990673
> 
> 赞同：0
> 
> 时间：2012-10-20T16:57:31.087
> 
> 标签：c++, algorithm, data-structures, trie

我正在尝试将所有单词放在字符串中的 trie 中，单词由`eow`trie 数据结构中某个字符的字段为真表示，因此 trie 可以有字母而不是导致没有单词，例如“abc”在 trie 中，但“c”的 eow 字段为假，因此“abc”不是单词

这是我的数据结构

```
struct Trie {

  bool eow; //when a Trie field isWord = true, hence there is a word
  char letter;
  Trie *letters[27];

}; 
```

这是我尝试的 print-all 函数，基本上是试图返回一个字符串中的所有单词，单词之间用空格分隔

```
string printAll( string word, Trie& data)
{
  if (data.eow == 1)
    return word + " ";
  for (int i = 0; i < 26; i++) {
    if (data.letters[i] != NULL)
     printAll( word + data.letters[i]->letter, *(data.letters[i]));
 }
  return "";
} 
```

它没有输出我想要的东西，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:00:21.580

您没有使用递归`printAll()`调用的返回值，因此您生成的所有子词都将丢失。尝试这样的事情：

```
string printAll(string word, const Trie& data)
{
  string words;

  if (data.eow)
    words += word + " ";
  for (int i = 0; i < 26; i++) {
    if (data.letters[i] != NULL)
     words += printAll( word + data.letters[i]->letter, *(data.letters[i]));
  }
  return words;
} 
```

对于它的价值，这有点低效，因为它分配了很多临时字符串。每个递归调用都有自己的`words`字符串，该字符串被构建、返回和销毁。最好将所有单词添加到一个字符串中。

您也可以考虑使用单词向量而不是将它们与空格相加。这样您就可以更轻松地遍历每个单词。

```
void getWords(const Trie& data, vector<string> &words, string word = "")
{
  if (data.eow)
    words.push_back(word);

  for (int i = 0; i < 26; i++) {
    if (data.letters[i] != NULL)
      getWords(*(data.letters[i]), words, word + data.letters[i]->letter);
  }
} 
```

然后调用它：

```
vector<string> words;
getWords(trie, words);

for (size_t i = 0; i < words.size(); ++i) {
  if (i > 0)
    cout << " ";

  cout << words[i];
}

cout << endl; 
```

# wpf - 如何使用 xaml 代码将 ComboBox 绑定到通用字典

> ID：12990674
> 
> 赞同：0
> 
> 时间：2012-10-20T16:57:30.697
> 
> 标签：wpf, xaml, c#-4.0, data-binding

我正在使用以下代码：

```
private Dictionary<string, string> GetNumber { get; set; }
public ReportsLetterTra()
{
    GetNumber = new Dictionary<string, string>
                            {
                                {"1", "First"},
                                {"2", "Second"}
                            };

    InitializeComponent();
} 
```

xml代码：

```
 <ComboBox 
      DisplayMemberPath="value" 
      SelectedValuePath="key" 
      ItemsSource="{Binding ElementName=reportslettra,Path=GetNumber}"
      SelectedIndex="0" Name="cmbFromNumber" /> 
```

为什么不将 GetNumber 绑定到 cmbFromNumber？！

**更新 ：**

我在后面文件中的完整代码：

```
using System.Collections.Generic;
using System.Windows;

namespace WpfApplication20
{
    /// <summary>
    /// Interaction logic for Window1.xaml
    /// </summary>
    public partial class Window1 : Window
    {
        public Dictionary<string, string> GetNumber { get; set; }

        public Window1()
        {

            GetNumber = new Dictionary<string, string>
                                    {
                                        {"1", "First"},
                                        {"2", "Second"}
                                    };
            InitializeComponent();

        }
    }
} 
```

我完整的 xaml 代码：

```
<Window x:Class="WpfApplication20.Window1" Name="eportslettra"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
    <Grid Height="26">
        <ComboBox DisplayMemberPath="Value" SelectedValuePath="Key" 
               ItemsSource="{Binding ElementName=reportslettra,Path=GetNumber}" 
               SelectedIndex="0"  Name="cmbFromNumber"    />
    </Grid>
</Window> 
```

我哪里错了？为什么不将 GetNumber 绑定到 cmbFromNumber？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:08:43.253

你的属性被标记为`private`，make it `public`。此外，更正您的`ComboBox`to`Value`和`Key`. 第三，您的绑定表达式看起来无效，请仔细检查。最后，看起来您的属性是视图代码隐藏文件的一部分。您可能会考虑 MVVM 设计模式。

**更新**

你`Window`有`Name`'eportslettra'，但你的绑定表达式使用`ElementName`'reportslettra'。纠正其中之一。

# c++ - Qt 请求永远不会触发 finished() 信号

> ID：12990675
> 
> 赞同：0
> 
> 时间：2012-10-20T16:58:00.243
> 
> 标签：c++, qt, qthread

我有一些非常奇怪的东西我有这个代码：

我想我知道出了什么问题，但我不知道如何解决它。这就是我所拥有的：当我在 int test = 0 中放置断点时；它在到达 HttpClient 中的 httpFinished() 插槽之前到达那里，这就是问题所在吗？在 main.cpp

```
---------------------------------------------------------------------------------------------------------
@while (i.hasNext())
{
i.next();

ThreadWorker* pThreadWorker = new ThreadWorker();
pThreadWorker->setUrl(sUrl);
QThreadPool::globalInstance()->start(pThreadWorker);
}
QThreadPool::globalInstance()->waitForDone();

---------------------------------------------------------------------------------------------------------
void ThreadWorker::run()
{
  startWork();
}

void ThreadWorker::startWork()
{
 m_pHttpClient = new HttpClient();
 m_pHttpClient->startRequest(m_url);
 int test = 0;

}

--------------------------------- HttpClient  based on the http example from Qt -----------------------------------

HttpClient::HttpClient()
{
  m_networkManager = new QNetworkAccessManager(this);
  connect(m_networkManager, SIGNAL(authenticationRequired(QNetworkReply*,QAuthenticator*)),
            this, SLOT(slotAuthenticationRequired(QNetworkReply*,QAuthenticator*)));

 #ifndef QT_NO_OPENSSL
    connect(m_networkManager, SIGNAL(sslErrors(QNetworkReply*,QList<QSslError>)),
            this, SLOT(sslErrors(QNetworkReply*,QList<QSslError>)));
 #endif
}

void HttpClient::startRequest(QUrl url)
{
   m_url.setUrl("http://qt.nokia.com/");
  QNetworkRequest request; 
  request.setUrl(m_url);

 reply = m_networkManager->get(request);

 connect(reply, SIGNAL(error(QNetworkReply::NetworkError)),
         this, SLOT(slotError(QNetworkReply::NetworkError)));

 connect(reply,SIGNAL(finished()),
            this, SLOT(httpFinished()));

    connect(reply, SIGNAL(readyRead()),
            this, SLOT(httpReadyRead()));

    connect(reply, SIGNAL(downloadProgress(qint64,qint64)),
            this, SLOT(updateDataReadProgress(qint64,qint64)));

} 
```

私有插槽下的 httpFinished() 函数：从未触发，为什么？

**更新了问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T20:13:58.323

由于`HttpClient`and`QNetworkAccessManager`对象是在线程中创建的，它们自动属于该线程（请参阅[`QObject::moveToThread`](http://doc.qt.digia.com/stable/qobject.html#moveToThread)参考资料），并且它们都需要在该线程中运行一个事件循环，以便 QNAM 完成任何工作，并且您的`QObject`派生类能够执行插槽。

`QThread::exec()`您可以添加对in的调用以`run()`运行该事件循环（如果您使用的是`QThread`）：

```
void Thread::run()
{
    startWork();
    exec();
} 
```

或创建并启动一个`QEventLoop`其`quit()`插槽必须连接到某处以停止循环（例如，当工作完成时您将发出`finished()`的类中的信号）：`HttpClient`

```
void ThreadWorker::run()
{
    startWork();
    QEventLoop loop;
    QObject::connect(m_pHttpClient, SIGNAL(finished()), &loop, SLOT(quit()));
    loop.exec(); 
} 
```

此外，[由于 Qt 4.8](http://blog.qt.digia.com/2011/04/29/threaded-http-inside-qnetworkaccessmanager/)是`QNetworkAccessManager`多线程的，因此您可能不需要自己使用线程。

# google-apps-script - Google Script / Spreadsheet -- 与 Installed Trigger onEdit 共享权限

> ID：12990678
> 
> 赞同：3
> 
> 时间：2012-10-20T16:58:23.400
> 
> 标签：google-apps-script, google-sheets

在电子表格中使用已安装的触发器来调用 onUpdateBilling()。此脚本的目的是在编辑时，根据“billed”（即“d”）列的内容将整个列突出显示预定的颜色。

页面运行脚本与协作者共享，他们已被授予编辑权限。在这一点上，我的期望是脚本应该以所有者权限运行。我的共享用户无法运行脚本并出现给定错误“您无权执行此操作”。

达到了我有限的知识和 googlefu 的这个解决方法。

感谢任何帮助我的合作者进行操作的帮助。

```
Script:
function onUpdateBilling(e) {

var statusCol = 16; // replace with the column index of Status column A=1,B=2,etc

var sheetName = "Temple Log"; // replace with actual name of sheet containing Status

var cell = SpreadsheetApp.getActiveSheet().getActiveCell();
var sheet = cell.getSheet();
if(cell.getColumnIndex() != statusCol || sheet.getName() != sheetName) return;

var row = cell.getRowIndex();
var status = cell.getValue();

// change colors to meet your needs
var color;
if (status == "D" || status == "d") {
  color = "red";}
  else if (status >= 1) {
    color = "yellow";}
  else if (status == "X" || status == "x") {
    color = "black";}
  else if (status == "") {
    color = "white";}
  else {
  color = "white";
  }

sheet.getRange(row + ":" + row ).setBackgroundColor(color);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:31:45.173

同样的问题也发生在我身上。经过大量努力，我发现脚本更新的工作表/范围之一受到所有者的保护。

一旦所有者删除了保护，它就可以正常工作。

请注意，该脚本不以所有者权限运行。它使用当前登录用户的帐户运行。

希望能帮助到你。

# python - 如何将两个列表与一个列表中的重复项进行比较？

> ID：12990679
> 
> 赞同：1
> 
> 时间：2012-10-20T16:58:27.183
> 
> 标签：python, list, compare

我需要将 list_a 与许多其他人进行比较。当其他列表中有重复项（other_b 中有两个 k）时，我的问题就开始了。

我的目标是过滤掉所有具有相同项目的列表（最多三个匹配项目）。

```
list_a =  ['j','k','a','7']
other_b =  ['k', 'j', 'k', 'q']
other_c = ['k','k','9','k']

>>>filter(lambda x: not x in list_a,other_b)
['q'] 
```

我需要一种返回 ['k', 'q'] 的方法，因为 'k' 在 list_a 中只出现一次。

将 list_a 和 other_c 与 set() 进行比较不符合我的目的，因为它只会返回一个元素：k。而我需要 ['k','9','k']

我希望我足够清楚。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:16:01.310

`list_a`以下函数在作为第一个参数和第二个参数时返回您想要的新列表`other_b`：

```
def my_comp(my_list, other_list):
    other_cop = other_list[:]
    for x in my_list:
        try:
            other_cop.remove(x)
        except ValueError:
            pass
    return other_cop 
```

它复制并从副本`other_list`中删除每个元素。`my_list`因为如果要删除的元素不在 中`other_list`，则会`remove`引发 a`ValueError`我们必须捕获并且对此异常不执行任何操作。

# python - Django send_mail 功能不断失败

> ID：12990683
> 
> 赞同：1
> 
> 时间：2012-10-20T16:59:02.787
> 
> 标签：python, django

一旦用户输入他的电子邮件，我一直试图让 django 向一个用户发送邮件，但它一直失败。例如，用户 A 注册了我的列表，django 给他发了一封邮件。用户 B 注册到我的列表，django 向用户 A 和 B 发送邮件。

我不想要那种过程，我想在每个用户填写他们的电子邮件地址后向他们发送一封邮件。这样当另一个用户注册时，django 就不会向当前用户和已经在数据库中的用户发送相同的邮件。

以下是我的代码：

# 发送邀请

```
Subject='Join Me'

message=loader.get_template('letter.txt') 

from_email='test@testing.com'

def invite_me(request):
    if request.method=="POST":
       form=InviteForm(request.POST)
       if form.is_valid():
          form.save()
          #get input data and send email to the user.
          send_mail(Subject,message.render(Context()),from_email,Invite.objects.values_list('email_address', flat=True))
          return HttpResponse('Thanks For Inputting Your Email, Go Check Your Inbox!')
        else:
            return HttpResponse('Invalid Email Address')
      else:
          form=InviteForm()
          return render_to_response('home.html',{'InviteForm':InviteForm},context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:19:50.530

您正在使用: `Invite.objects.values_list('email_address', flat=True)`，它返回数据库中所有 s的所有`email_address`字段的列表。`Invite`

这意味着`all`注册`Invite`的将收到一封电子邮件。我假设`InviteForm`是一个`ModelForm`适合你的`Invite`对象。[`ModelForm.save`](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#the-save-method)返回新创建的对象，所以你应该这样做：

```
invite = form.save()
send_mail(Subject,message.render(Context()),from_email,[invite.email_address]) 
```

请记住，它[`send_mail`](https://docs.djangoproject.com/en/dev/topics/email/#send-mail)需要一个可迭代的，因此需要在此处使用列表，**这是通过使用`[invite.email_address]`而不是仅`invite.email_address`.**

# appdomain - 如何在具有不同 NET 版本的 AppDomain 中加载 dll

> ID：12990684
> 
> 赞同：0
> 
> 时间：2012-10-20T16:59:08.930
> 
> 标签：appdomain, appdomainsetup

我有一些使用 Net 2.0 构建的第三方程序集。虽然我当然可以在 net 4 中引用该程序集，但运行该应用程序会导致各种奇怪的错误。

所以我虽然将它加载到一个单独的应用程序域中会解决这个问题，但它没有。我假设它仍然使用 Net 4 运行时执行。有没有办法强制在不同的网络版本中执行应用程序域？

我使用 CreateInstanceFromAndUnwrap 而不是调用代理。

谢谢你的帮助

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:12:26.883

1.  创建应用程序域。并在新域中创建 DomainManager:MarshalByRef 对象。
2.  DomainManager 加载程序集到创建的（新）域。

> AppDomainSetup ads = new AppDomainSetup(); AppDomain managerAD = AppDomain.CreateDomain("AD1", null, ads);
> 
> ```
>  Assembly asm = managerAD.Load(typeof(DomainManager).Assembly.FullName);
>       string typeName = typeof(DomainManager).FullName;
> 
>       DomainManager manager = (DomainManager)managerAD.CreateInstanceAndUnwrap(asm.GetName().Name, 
> ```
> 
> 类型名称）；公共类 DomainManager : MarshalByRefObject {
> 
> ```
>  public void GetAppDomain(string assemblyFileName)
>     {
>       Assembly asm2 = Assembly.LoadFrom(assemblyFileName);
>       Type neededType = asm2.GetType(<paste type>);
>       object instance = Activator.CreateInstance(procType);
>     } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:19:33.233

您可以使用[supportedRuntime](http://msdn.microsoft.com/en-us/library/w4atty68.aspx)配置元素来设置 AppDomain 的 CLR 版本。如果您不想将此添加到您的 app.config，您可以添加第二个 .config 文件，该文件将在构建新 AppDomain 期间使用。查看[AppDomainSetup.ConfigurationFile](http://msdn.microsoft.com/en-us/library/system.appdomainsetup.configurationfile.aspx)了解更多信息。

# php - 上传多个文件并保存到数据库的路径时遇到问题

> ID：12990691
> 
> 赞同：0
> 
> 时间：2012-10-20T16:59:50.983
> 
> 标签：php, mysql

好的，基本上我正在遵循这个非常简单的指南，但是，我现在完全迷失了方向。我不想重新开始，我希望这只是一个小的调整，但无论如何这里是错误：

```
Warning: move_uploaded_file() [function.move-uploaded-file]: The second argument to     copy() function cannot be a directory in /I don't want to publicize the path name/html/add.php on line 39

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/phpqd62Gk' to 'thumbnails/' in /I don't want to publicize the path name/add.php on line 39
Sorry, there was a problem uploading your cover. Please check it is the appropriate size and format.
Warning: move_uploaded_file() [function.move-uploaded-file]: The second argument to copy() function cannot be a directory in /I don't want to publicize the path name/add.php on line 52

Warning: move_uploaded_file() [function.move-uploaded-file]: Unable to move '/tmp/phpFVlGsv' to 'audio/' in /I don't want to publicize the path name/add.php on line 52
Sorry, there was a problem uploading your song. Please check it is the appropriate size and format. 
```

这是提交表单后执行的“add.php”：

```
<?php 
include "db_config.php";

//This is the directory where images will be saved 
$targetp = "thumbnails/"; 
$targetp = $targetp . basename( $_FILES['cover']['artist']); 

//This is our size condition 
if ($uploaded_size > 100000) 
{ 
echo "Your file is too large.<br>"; 
$ok=0; 
} 

//This is the directory where songs will be saved 
$targets = "audio/"; 
$targets = $targets . basename( $_FILES['song']['artist']); 

//This is our size condition 
if ($uploaded_size > 6000000) 
{ 
echo "Your file is too large.<br>"; 
$ok=0; 
} 

 //This gets all the other information from the form 
 $title=$_POST['title']; 
 $artist=$_POST['artist']; 
 $cover=($_FILES['cover']['artist']); 
 $song=($_FILES['song']['artist']); 
 $today = date("Ymd"); 
 $ip = $_SERVER['REMOTE_ADDR'];

 //Writes the information to the database 
 mysql_query("INSERT INTO `Thumbnails` VALUES ( '', '$artist - $title', '$cover', '', '$song', '$title', '$artist',  '$today', '$ip')") ; 

 //Writes the photo to the server 
 if(move_uploaded_file($_FILES['cover']['tmp_name'], $targetp)) 
 { 

 //Tells you if its all ok 
 echo "The file ". basename( $_FILES['cover']['artist']). " has been uploaded, and your information has been added to the directory"; 
  } 
  else { 

  //Gives and error if its not 
  echo "Sorry, there was a problem uploading your cover. Please check it is the appropriate size and format."; 
   } 

   //Duplicate for song
   if(move_uploaded_file($_FILES['song']['tmp_name'], $targets)) 
   { 

    echo "The file ". basename( $_FILES['song']['artist']). " has been uploaded, and your information has been added to the directory"; 
    } 
    else { 

    echo "Sorry, there was a problem uploading your song. Please check it is the appropriate size and format."; 
    } 
    ?> 
```

也许朝着正确方向迈出的一步将不胜感激，因为它已经到了在屏幕上乱涂乱画的地步，但我不想重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:14:46.033

尝试

改变

```
basename( $_FILES['cover']['artist']); 
```

至

```
basename( $_FILES['cover']['name']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:16:55.243

尝试

```
 $targetp = "/thumbnails/;

 $targets = "/audio/"; 
```

或指定完整路径名，如 c:/some/path/here

# php - fwrite 将写入的内容翻倍

> ID：12990692
> 
> 赞同：0
> 
> 时间：2012-10-20T16:59:55.097
> 
> 标签：php, fwrite

我正在尝试在另一个 php 文件中编写一个 php 变量。

我的写作内容是：

```
$writeValue = "\$Var['".$this->js_checksum."'] = '".serialize($log_content)."';"; 
```

我正在使用 Joomla`$stream->write($content);`将此内容写入另一个 php 页面。问题是我在编写过程完成后的 php 页面内部得到了 double `$var`，同样，所以基本上服务器将变量写入两次。如果我改变`$writeValue = "a";`，那么服务器只写一次，因为它应该。

我想不通为什么？

# c# - 奇数文件关联处理Bug

> ID：12990699
> 
> 赞同：1
> 
> 时间：2012-10-20T17:00:39.563
> 
> 标签：c#, .net, vb.net, xaml, windows-runtime

我有这个`App.xaml.cs`：

```
protected override void OnFileActivated(FileActivatedEventArgs args)
{
    Window.Current.Content = new Frame();
    ((Frame)Window.Current.Content).Navigate(typeof(MainPage), args);
    Window.Current.Activate();
} 
```

这在`MainPage.xaml.cs`：

```
protected override async void OnNavigatedTo(NavigationEventArgs e)
{
    FileActivatedEventArgs filesArgs = (FileActivatedEventArgs)e.Parameter;
    StorageFile file = (StorageFile)filesArgs.Files[0];
    mc.SetSource(await file.OpenReadAsync(), file.ContentType);
    mc.Play();
} 
```

这在`MainPage.xaml`：

```
<MediaElement x:Name="mc" /> 
```

现在，我面临一个非常奇怪的问题。我已将我的应用与 .MP4 文件相关联。每当我打开任何文件时，它都不会立即播放。例如。

1.  我打开`a.mp4`，它没有播放，我没有关闭应用程序。
2.  我打开`b.mp4`，它没有播放，我没有关闭应用程序。
3.  然后，我打开`a.mp4`，它被播放。如果没有，我再试一次，它就会被播放。现在，如果我打开任何 MP4 文件，它会毫无问题地播放，直到我关闭应用程序。

因此，这种解决方法有时有效：

```
protected override async void OnNavigatedTo(NavigationEventArgs e)
{
    FileActivatedEventArgs filesArgs = (FileActivatedEventArgs)e.Parameter;
    StorageFile file = (StorageFile)filesArgs.Files[0];
    StorageFile file2 = (StorageFile)filesArgs.Files[0];
    mc.SetSource(await file2.OpenReadAsync(), file2.ContentType);
    mc.SetSource(await file2.OpenReadAsync(), file2.ContentType);
    mc.Play();
} 
```

有谁知道为什么没有解决方法它不能工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:10:55.483

如果您在控件初始化和/或完全加载之前将源设置并开始播放，则文件看起来好像没有播放。这就是为什么它可以在应用程序已经加载时进行后续调用的原因，有时甚至在第一次调用时也是如此。我制作了一个简单的应用程序，并在大多数尝试中设法重现了您的问题（尽管有时它有效）。

我尝试了一个简单的解决方法，总是在开始播放之前等待`MediaElement`加载，似乎问题已经消失了 - 我无法在十几个电话中重现它。

这是我所做的：

MainPage.xaml：

```
<MediaElement x:Name="mc" Loaded="mc_Loaded" /> 
```

MainPage.xaml.cs

```
bool loaded = false;
Task task = new Task(() => {});

private void mc_Loaded(object sender, RoutedEventArgs e)
{
    loaded = true;
    task.Start();
}

protected override async void OnNavigatedTo(NavigationEventArgs e)
{
    FileActivatedEventArgs filesArgs = (FileActivatedEventArgs)e.Parameter;
    StorageFile file = (StorageFile)filesArgs.Files[0];
    if (!loaded)
        await task;
    mc.SetSource(await file.OpenReadAsync(), file.ContentType);
    mc.Play();
} 
```

我真的不喜欢我的解决方案，因为它仅基于猜测和经验测试，但我找不到任何文档说明`MediaElement`在它准备好之前需要发生什么。

# java - 了解遍历arraylist

> ID：12990701
> 
> 赞同：0
> 
> 时间：2012-10-20T17:00:45.567
> 
> 标签：java, arraylist

大家好，我正在做作业，我不明白其中的一部分。我已经实现了它，但它没有按预期工作。它说：

> 遍历调用每个对象的 toString() 方法的 Pizza 对象的 ArrayList，将方法调用的返回值加上换行符添加到 String 调用列表。

这就是我所做的

```
for(int i=0; i<myList.size()l i++)
{
//myList is arraylist of type Pizza
   list +=myList.toString() + "\n";
} 
```

如果有人能说我的实现是否正确，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T17:02:01.377

您需要调用[ArrayList#get()](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#get%28int%29)方法 `which will return the element at the specified position in this list`。

```
list +=myList.get(i).toString() + "\n"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T17:03:20.877

`for( : )`您需要使用语法而不是语法遍历列表元素`for( ; ; )`：

```
for (Pizza item : myList ) {
   list += item.toString() + "\n";
} 
```

在您想要遍历列表的*所有*元素的情况下，您不需要索引变量。Java 5 中添加的*for each*语法让您更轻松地浏览列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-20T17:03:35.317

这是不正确的。ArrayList 是一个拥有自己方法的对象。

你不能通过 myList[ index ] 访问它的成员......你必须调用它的 get() 方法......

列表 += myList.get(i);

这是假设 list 是一个字符串，您只是将 myList 的每个项目连接到（这听起来像是您可能也不想做的事情，但我不能说您的实际目标是什么）。

正如 dasblinkenlight 指出的那样，另一种（可能更优雅）的方法是跳过 for(;;) 循环并使用 for (:) 循环，在该循环中迭代列表并将每个项目抓取到它自己的变量中飞。这种方法的缺点是，如果由于某种原因您确实需要知道数组列表中的项目索引是什么，那么您手边没有这些信息。

# linux - Linux串口监听器和解释器？

> ID：12990702
> 
> 赞同：11
> 
> 时间：2012-10-20T17:00:50.263
> 
> 标签：linux, bash, serial-port, cygwin

我正在为项目使用串行设备，而我正在尝试完成 PC 端的工作，即侦听串行设备发送的命令，解释查询，根据查询运行一些代码，然后发回结果.

老实说，我尝试使用 PHP 作为侦听器，它可以工作，不幸的是，使脚本充当接收器所需的无限循环将 CPU 加载到 25%。所以这并不是最好的选择。

我现在正在使用 cygwin，我想使用 linux 本机命令创建一个 bash 脚本。

我可以使用以下方法接收数据：

```
cat /dev/ttyS2 
```

并发送回复：

```
echo "command to send" > /dev/ttyS2 
```

我的问题是，如何使自动侦听器能够接收和发送数据？我遇到的主要问题实际上是如何在收到信息后停止**cat /dev/ttyS2**命令，将其放入变量中，然后我可以与开关或一系列 if else then 块进行比较。然后发回响应并重新开始循环？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-20T21:35:37.627

这不是你要找的吗？

```
while read -r line < /dev/ttyS2; do
  # $line is the line read, do something with it
  # which produces $result
  echo $result > /dev/ttyS2
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:42:30.933

为了保持系统独立，请使用跨平台编程语言：如[Python](http://python.org)，使用跨平台串行库（如[pySerial）](http://pyserial.sourceforge.net/)并在脚本中进行处理。我使用了 pySerial，我可以跨平台运行脚本，而源代码几乎没有变化。通过使用 BASH，您对自己的限制很小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T05:34:48.097

如果您使用正确的工具，当您的设备没有任何输出时，您的 CPU 使用率实际上可能正好为 0。

为此，您应该使用一些更高级的语言（Perl、Python、C/C++ 可以，但不是 bash）并在串行设备的文件句柄上使用选择循环。这是 Perl [http://perldoc.perl.org/IO/Select.html](http://perldoc.perl.org/IO/Select.html)的示例，但您可以使用任何其他语言，只要它支持 select() 系统调用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-08-28T16:22:26.910

我建议在 Qt 5.1.1 中使用 C/C++，这真的很简单，如果你熟悉这个框架，那将是小菜一碟！！！ [在这里](http://qt-project.org/doc/qt-5.1/qtserialport/qtserialport-index.html)你可以找到更多信息和更多有用[的](http://qt-project.org/doc/qt-5.1/qtserialport/qtserialport-index.html)例子，试一试，真的很轻松！！您也可以在 win 上开发，然后将您的代码移植到 linux...直接前进。

像这样声明一个对象：

```
QSerialPort mPort; //remember to #include <QtSerialPort/QSerialPort>
//also add QT += serialport to your .pro file 
```

然后添加此代码：

```
MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent)
{
    setupUi(this);

    connect(this->pushButton,SIGNAL(clicked()),this,SLOT(sendData()));

    mPort.setPortName("ttyS0");
    mPort.setBaudRate(QSerialPort::Baud115200);
    mPort.setParity(QSerialPort::EvenParity);

    if(!mPort.open(QSerialPort::ReadWrite))
    {
        this->label->setText(tr("unable to open port, %1").arg(mPort.error()));
    }

    connect(&(this->mPort),SIGNAL(readyRead()),this,SLOT(readData()));
}   

void MainWindow::sendData()
{

    QByteArray data = lineEdit->text().toLatin1();
    if(mPort.isOpen())
    {
        mPort.write(data);
    }
    else
    {
        this->label->setText(tr("port closed %1").arg( mPort.error()));

    }
}

void MainWindow::readData()
{

    QString newData;
    int bread=0;
    while(bread < mPort.bytesAvailable() ){
        newData += mPort.readAll();
        bread++;
    }
  this->textEdit->insertPlainText("\n" + newData);
} 
```

# php - Javascript 到 PHP 安全性

> ID：12990705
> 
> 赞同：0
> 
> 时间：2012-10-20T17:01:14.863
> 
> 标签：php, javascript, arrays, json, security

我似乎找不到一个几乎确切的问题，所以我不妨问一下。

将变量从 Javascript 发送到 PHP 真的是一种标准做法吗？我计划在 Javascript 中进行一些评估后将数组发送到 PHP - 在这里和那里传递变量......只是再次组合为一个数组，正如我所说的，将被传递给 PHP。我错过了什么吗？我几乎看不到任何教程可以做到这一点，主要是相反的方式 - 即 PHP 数组到 Javascript。让我想，也许出于安全原因，不建议对 PHP 执行 Javascript。

简而言之，将 Javascript 数组发送到 PHP，然后将其保存到数据库会很危险吗？我还没有真正完全阅读如何去做，只是扫描了我能找到的极少数......json stringify，$_POST，json encode，json decode。如果可以将 JS 传递给 PHP，并且无论如何都与我的问题有关，那么有人可以指出我提到的哪一个最能提高安全性吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T17:05:02.917

在这一点上，安全性并不是真正的问题：JavaScript 在客户端运行，因此这里可能出现的任何问题都可能被攻击者轻易伪造。正如@Jan 在上面的评论中所说，无论如何你都不能信任客户。此外，您在 JavaScript 端所做的一切都可能被客户端窃听和操纵——这就是为什么您不能在 JavaScript 中进行密码检查的原因。因此，无论如何，JavaScript 运行的环境从根本上说是不安全的。

*当服务器接受并使用*数据时，安全性就会发挥作用。您需要采取所有必要的保护措施，以便数据不会损害您的服务器 - 例如，通过使用转义或准备好的语句删除任何 SQL 注入，正确处理无效的输入字符等。

我想到了这个规则的两个例外：

*   如果您使用的是 SSL (https://) 连接，请确保您的 JavaScript 也以这种方式发送数据

*   使用敏感的 GET 参数将浏览器发送到新位置：

    `http://www.domain.com/newpage?username=pekka&password=superman85069`

    不如 POST 表单安全，因为 URL 可能被缓存。

# c# - System.Configuration.ConfigurationErrorsException

> ID：12990706
> 
> 赞同：4
> 
> 时间：2012-10-20T17:01:24.443
> 
> 标签：c#, configuration

我有一个包含几个文本框的表单，您在文本框中输入一些值，然后当您按下提交时，它将值保存到文件中。但是，当我按下提交时，我得到以下异常。

```
System.Configuration.ConfigurationErrorsException: Configuration system failed to initialize ---> System.Configuration.ConfigurationErrorsException: Unrecognized configuration section add. (C:\Program Files (x86)\Default Company Name\Setup\HomeInventory2.exe.Config line 3)
   at System.Configuration.ConfigurationSchemaErrors.ThrowIfErrors(Boolean ignoreLocal)
   at System.Configuration.BaseConfigurationRecord.ThrowIfParseErrors(ConfigurationSchemaErrors schemaErrors)
   at System.Configuration.BaseConfigurationRecord.ThrowIfInitErrors()
   at System.Configuration.ClientConfigurationSystem.EnsureInit(String configKey)
   --- End of inner exception stack trace ---
   at HomeInventory2.Services.Factory.GetService(String servicename) in C:\Users\Protego\documents\visual studio 2010\Projects\HomeInventory2\HomeInventory2\Services\Factory.cs:line 37
   at HomeInventory2.Business.Manager.GetService(String name) in C:\Users\Protego\documents\visual studio 2010\Projects\HomeInventory2\HomeInventory2\Business\Manager.cs:line 14
   at HomeInventory2.Business.InventoryMngr.Create(CreateInventory inv) in C:\Users\Protego\documents\visual studio 2010\Projects\HomeInventory2\HomeInventory2\Business\InventoryMngr.cs:line 19
   at HomeInventory2.Form1.submitButton_Click(Object sender, EventArgs e) in C:\Users\Protego\documents\visual studio 2010\Projects\HomeInventory2\HomeInventory2\Form1.cs:line 52
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

如果我阅读正确，则问题出在我的 App.config 文件中。但我在该文件中没有看到任何问题 - 如下所示。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <add key="InventorySvc" value="HomeInventory2.Services.InventorySvc" />
</configuration> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T17:13:11.330

您的配置文件应如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="InventorySvc" value="HomeInventory2.Services.InventorySvc"/>
  </appSettings>
</configuration> 
```

[appSettings](http://msdn.microsoft.com/en-us/library/aa903313%28v=vs.71%29.aspx) - .NET 中预定义的配置部分之一

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-20T17:04:03.580

`<add key`应该在里面就像没有`<appSettings>`配置->添加。它应该类似于配置-> 应用程序设置-> 添加。

# c++ - 用 C++ 编写基于字符串的事件管理器

> ID：12990707
> 
> 赞同：2
> 
> 时间：2012-10-20T17:01:40.430
> 
> 标签：c++, string, function, events, event-handling

我正在开发一个事件管理器，其中事件由字符串和整数中的键表示。这意味着事件不是由类或对象表示的。这样组件可以通过事件进行通信，但保持独立。事件管理器的一个重要准则是事件不需要注册，但每个人都可以只听它们或触发它们。

（事件键的整数部分用于对内容相同事件的阶段进行分组。例如，手榴弹触发投掷、飞行、着陆、爆炸等事件。它们应表示为“手榴弹”0、“手榴弹”1、.. . “手榴弹” 4.)

可选地，事件可以包含一个空指针来发送引用该事件的数据。这可能是崩溃的速度，被杀玩家的 id。

每个组件都包含一个指向名为 的事件命名器的指针`Event`。我想让他们注册事件的方法或委托。

```
// ideally registering for an event would look like that
Event.Listen("eventname", 0, this->Method);
Event.Listen("eventname", 0, [](){ ... });

// receiving data is optional
Event.Listen("eventname", 0, [](void* Data){ ... }); 
```

理想情况下，触发事件的工作方式类似。

```
Event.Fire("eventname", 0);
Event.Fire("eventname", 0, Data);

// fires events "eventname" 0, "eventname" 1, ... "eventname" 5
Event.FireRange("eventname", 0, 5); 
```

事件管理器保存事件列表。这意味着事件键和所有已注册函数的向量。

```
typedef unordered_map<pair<string, int>, vector<function>> ListEvent;
ListEvent List; 
```

向量存储注册到特定事件的所有函数。我尝试使用函数指针、成员函数指针和`std::function`s. 但没有什么能按我想要的方式工作。以下是我与此事件管理器相关的一些问题：[检查两个 std::function 是否相等](https://stackoverflow.com/questions/12989743/check-if-two-stdfunction-are-equal)，[存储指向任何成员函数的函数指针](https://stackoverflow.com/questions/12988320/store-function-pointers-to-any-member-function)，[检查对象的类型是否继承自特定的类](https://stackoverflow.com/questions/12963294/check-if-the-type-of-an-object-is-inherited-from-a-specific-class)。

对于监听函数来说，能够访问其类的成员是很重要的。我想在一行代码中注册 lambda 函数。

**你有什么想法或技术来编写这样一个事件管理器吗？**

我试图以一般方式提出我的问题，但如果您需要额外的解释或代码，请随时发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:47:03.997

这是快速工作草图：

```
#include <vector>
#include <functional>
#include <iostream>

typedef std::function<void(int param)> callback;

struct Event {
  std::vector<callback> subs;//criptions  

  void subscribe(callback cb) { subs.push_back(cb); }
  void fire(int param = 0) { for(callback& cb : subs) cb(param); }
};

void some_free_func(int param) { std::cout << "some_free_func got signal" << std::endl; }

int main(int argc, char* argv[])
{
  Event evt0; 
  evt0.subscribe(some_free_func);

  evt0.subscribe([](int p) { std::cout << "some_lambda got signal" << std::endl; } );

  evt0.fire();
    return 0;
} 
```

从概念上讲，它大致可以满足您的需求，但您应该在这里考虑所有权政策。检查我上面的问题。

编辑：如果您说所有权不是问题，那么这可能有效：

```
void my_object::firstCry() { 
   evt0.subscribe([=](int p) { this->got_signal(p); }); // inst/method thunk 
}

void my_object::got_signal(int param) {...} 
```

# java - 如何在销售员计划中返回销售额最高的人 - JAVA

> ID：12990708
> 
> 赞同：2
> 
> 时间：2012-10-20T17:01:44.037
> 
> 标签：java

对我的硬件问题的一部分感到困惑。看起来这很容易，但我不能指望它。我正在尝试以最大和最小销售额返回销售人员。我对如何做到这一点感到困惑。帮助将不胜感激。

```
import java.util.Scanner;
public class Cray {
    public static void main(String[] args){

        final int SALESPEOPLE = 5;
        int[] sales = new int[SALESPEOPLE];
        int sum, maxperson, minperson;
        int max = sales[0];
        int min = sales[0];

        Scanner scan = new Scanner(System.in);
        //Fill the 5 element array of sales with the user's input
        for (int i=0; i<sales.length; i++)
            {
            System.out.print("Enter sales for salesperson " + i + ": ");
            sales[i] = scan.nextInt();
            //Calculate the max and min sales
            //How do I return the salesperson i with the the max and min sales?
            if(sales[i] > max){
                max= sales[i];
            }
            if(sales[i] < min){
                min = sales [i];
            }

            }

        System.out.println("\nSalesperson   Sales");
        System.out.println("--------------------");
        sum = 0;
        for (int i=0; i<sales.length; i++)
            {
            System.out.println("     " + i + "         " + sales[i]);
            sum += sales[i];
            }

        System.out.println("\nTotal sales: " + sum);
        System.out.println("Average sales: " + sum/5);
        //WHere I want to print the max salesperson.
        System.out.println("Salesperson" +  );

          }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:09:29.423

您可以在开始扫描输入之前存储索引计数声明并初始化两个`int`变量：

```
 int maxindex=Integer.MIN_VALUE,minindex=Integer.MIN_VALUE; 
```

然后像这样将您的数组索引分配给它们：

```
 if(sales[i] > max){
       max= sales[i];
       maxindex = i;
   }
   if(sales[i] < min){
       min = sales [i];
       minindex = i;
   } 
```

现在您可以直接获取具有最大和最小销售额的销售人员

```
 System.out.println("Max sales person "+sales[maxindex]);
  System.out.println("Min sales person "+sales[minindex]); 
```

我在这里使用了一个非常简单的技巧，即存储数组索引。这是非常基本的方法，尽管可能有更优化的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:11:01.880

再定义两个变量：

```
 int maxSalePersonIndex = 0;
        int minSalePersonIndex = 0; 
```

更新你`if`的：

```
 if(sales[i] > max){
            max= sales[i];
            maxSalePersonIndex  = i;
        }
        if(sales[i] < min){
            min = sales [i];
            minSalePersonIndex = i;
        } 
```

最后，只需打印和的`maxSalePersonIndex`值 `minSalePersonIndex`

```
 System.out.println("Salesperson index with max sale = " + maxSalePersonIndex);
    System.out.println("Salesperson index with min sale = " + minSalePersonIndex); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T17:05:10.223

目前在您的 for 循环中，您存储的是最大和最小*销售额*，而不是获得这些销售额的*销售人员。*因此，您应该存储`i`在`max`/`min`中，而不是`sales[i]`.

```
int max = 0, int min = 0

...

// in the for-loop
if(sales[i] > sales[max]){
    max = i;  // i.e. salesperson "i"
}
if(sales[i] < sales[min]){
    min = i;
}

...

System.out.println("Max salesperson: " +  max);
System.out.println("Min salesperson: " +  min); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T17:05:37.073

您可以将支票调整为最大

```
 if(sales[i] > max){
       max = sales[i];
       maxPerson = i;
   } 
```

# php - 重构代码与使用 APC

> ID：12990710
> 
> 赞同：1
> 
> 时间：2012-10-20T17:01:56.427
> 
> 标签：php, apc

我有一个 PHP Web 应用程序，其中包含一个包含所有方法的 init.php 文件。

这是一个包含多种方法的巨大文件。有些页面只使用它来调用mysql。

我正计划按照我前几天问的另一个问题中的建议重组我的应用程序。我了解了 APC 的工作原理，在我看来，如果我设置 APC，代码缓存实际上可能更适合我当前的应用程序结构。

会是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:58:09.033

您可能会发现值得调查 APC 提供哪些帮助您做出决定的工具。

您可能希望它缓存操作码或使用它来缓存呈现的 HTML（防止为每个页面视图运行代码）。

Mark Ba​​kers 的建议是明智的，缓存听起来像是权宜之计，但至少可以为您争取一些时间。

[http://devzone.zend.com/1812/using-apc-with-php/](http://devzone.zend.com/1812/using-apc-with-php/)

# spring-mvc - Spring MVC：客户端发送的请求语法不正确

> ID：12990717
> 
> 赞同：6
> 
> 时间：2012-10-20T17:02:33.530
> 
> 标签：spring-mvc, jackson

在向服务器发送 JSON 请求时，我经常会收到以下消息：

> 客户端发送的请求在语法上是错误的 ()。

通常这是控制器没有预料到的错误属性，因为 JSON 映射到的对象不包含它。

查找参数是不必要的耗时 - 有没有办法获取更多信息，甚至可能是异常的堆栈跟踪？我尝试在调试模式下运行，并且使用 Jackson 作为我的 JSON（反）序列化器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-21T01:44:24.117

要获取更多信息/堆栈跟踪，请在 log4j.properties 中打开 Spring Web 的调试日志记录

> log4j.logger.org.springframework.web=debug

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-03T07:20:51.470

如果您使用的数据来自外部 api，并且如果您想保护控制器免受不需要的不必要元素/属性的影响，则可以在 POJO 类上使用以下注释

```
@JsonIgnoreProperties(ignoreUnknown = true) 
```

或者你可以全局设置它

```
//jackson 2.0
jsonObjectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T12:41:49.147

老案例，我现在已经无关紧要了，但对于其他有类似问题的人，我会添加这个条目。

**检查您是否有双引号，而不是单引号。也尝试逃避它们。**

我将应用程序**curl**用于我的测试 json 请求。

我的 JSON 是这样的

```
{ 'name' : 'somedata', 'town':'some town' } 
```

它就在我眼里爆炸了。

*“客户端发送的请求在语法上不正确”*是一般错误。所以我把它从单引号改为双引号，不行。然后我尝试在单引号前加一个反斜杠，仍然不行。然后将其更改为双引号前面的反斜杠和presto！

```
curl -i -H "Accept: application/json" -H "Content-Type: application/json" \ 
http://localhost:8077/dra/dump.json \ 
-X PUT -d "{\"name\" : \"My Name\", \"town\":\"My Town\"}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-26T15:04:24.650

几天后我遇到了同样的错误，终于启用了@Farm提到的调试日志记录，并且能够看到这个问题的原因。我在 json 中从 jsp 到 spring 控制器发布了一个 Person 对象，如下所示：-

```
@RequestMapping(value = "/get", method = RequestMethod.POST)
public @ResponseBody
Person getPerson(@RequestBody Person person) {
    // System.out.println("inside get::::::::");
    System.out.println("city:=" + person.getResidenceAddress().getCity()+" "
            + "name:= " + person.getFullName().getFirstName());
    // Person prsn = personService.getPerson(person);

    /*
     * Person prsn = new Person(); prsn.setId(1); ResponseDecorator rd = new
     * ResponseDecorator(prsn, true);
     */return person;
}
// Person Object
class Person{
private Name fullName;
private Address residenceAddress;
private Address mailingAddress;
private Gender gender;
private MaritalStatus maritalStatus;
private Integer creditRating;

}

 //Address Object
public class Address {
private String streetNo;
private String streetName;
private String suburb;
private String city;
private String state;
private String country;
private Integer pinCode;
private AddressType addressType;
}

json post from jsp:-
//create JSON 
var json = {
"id": id,
        "fullName":{"firstName":firstName,"middleName":middleName,"surName":     surName},
 "residenceAddress":{ "streetNo": streetNo,
                      "streetName": streetName,
                      "suburb": suburb,
                      "city": city,
                      "state": state,   
                      "country": country,
                      "pinCode": pincode
                      }
        };

 var dataString = JSON.stringify(json);
//alert(dataString);

$.ajax({
    headers: {
        Accept : "text/plain; charset=utf-8, application/json"},
    url: "/myservice/get", 
    type: 'POST', 
    dataType: 'json', 
    //data : "{     }",
    data: dataString, 
    contentType: 'application/json',
    mimeType: 'application/json',
    success: function(data) { 
        alert(data);
    },
    error:function(data,status,er) { 
        alert("error: "+data+" status: "+status+" er:"+er);
    }
}); 
```

提交时的错误是 400 Bad request，并且没有其他线索说明它失败的原因。在服务器上启用调试模式时，我可以看到以下错误堆栈跟踪：-

```
**00:53:42,294 DEBUG RequestResponseBodyMethodProcessor:117 - Reading [com.foo.assignment.model.Person] as "application/json" using [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter@1813fb]
00:53:42,310 DEBUG ServletInvocableHandlerMethod:159 - Error resolving argument [0] [type=com.foo.assignment.model.Person]
HandlerMethod details: 
Controller [com.foo.assignment.controller.PersonController]
Method [public com.foo.assignment.model.Person com.foo.assignment.controller.PersonController.getPerson(com.foo.assignment.model.Person)]
org.springframework.http.converter.HttpMessageNotReadableException: Could not read JSON: No suitable constructor found for type [simple type, class com.foo.assignment.model.Address]: can not instantiate from JSON object (need to add/enable type information?)
 at [Source: org.apache.catalina.connector.CoyoteInputStream@f264df; line: 1, column: 98] (through reference chain: com.foo.assignment.model.Person["residenceAddress"]); nested exception is org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class com.foo.assignment.model.Address]: can not instantiate from JSON object (need to add/enable type information?)
 at [Source: org.apache.catalina.connector.CoyoteInputStream@f264df; line: 1, column: 98] (through reference chain: com.foo.assignment.model.Person["residenceAddress"])
    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:127)
    at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:153)
    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:120)
    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:91)
    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:71)
    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:74)
    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:155)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:650)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:731)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:241)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:220)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:122)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:505)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:170)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:957)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:116)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:423)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1079)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:620)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type [simple type, class com.foo.assignment.model.Address]: can not instantiate from JSON object (need to add/enable type information?)
 at [Source: org.apache.catalina.connector.CoyoteInputStream@f264df; line: 1, column: 98] (through reference chain: com.foo.assignment.model.Person["residenceAddress"])
    at org.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:163)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObjectUsingNonDefault(BeanDeserializer.java:746)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:683)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:580)
    at org.codehaus.jackson.map.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:299)
    at org.codehaus.jackson.map.deser.SettableBeanProperty$MethodProperty.deserializeAndSet(SettableBeanProperty.java:414)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:697)
    at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:580)
    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2732)
    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1923)
    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:124)
    ... 37 more
00:53:42,310 DEBUG ExceptionHandlerException** 
```

在 Address 对象中添加默认构造函数解决了该错误。并且使用 Google 插件 Postman（插件[https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop?hl=en](https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop?hl=en)）确实有助于快速测试我的更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-28T10:50:45.223

问题出在您的 POJO 上，将服务器日志级别保持在调试级别并检查错误。这主要与某些字段和字段类型不匹配有关。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-20T14:12:06.177

使用嵌套类时也会发生此错误，例如

```
class One {
    some code..

    public class NestedOne {
        private attr;

        public NestedOne() {
            // default constructor
        }
    }
} 
```

然后有 `@RequestMapping(value = "/something") public String someControllerMethod(@RequestBody One.NestedOne nested) { ... }`

然后，杰克逊不将 NestedOne() 识别为默认构造函数并搜索 One.NestedOne() 构造函数。

# javascript - 使用原型模式在 ajax 回调中访问“this”

> ID：12990720
> 
> 赞同：0
> 
> 时间：2012-10-20T17:02:52.507
> 
> 标签：javascript, prototype

我在使用“this”关键字时遇到了一些问题。我明白为什么以下内容不起作用，但不知道如何解决它......

```
//Namespace
var CPT = CPT || {};

//Constructor
CPT.Grid = function (hostElement, surlWeb) {
  this.hostElement = hostElement;
  this.surlWeb = surlWeb;
}

//Prototype
CPT.Grid.prototype = {

  init: function () {

    $.ajax({
      url: this.surlWeb,
      headers: { "accept": "application/json" },
      success: this.showItems
    });
  },

  showItems: function (data) {
    //do some work 

    // this is the error... no access to hostElement because 'this' is the AJAX call
    this.hostElement.html(items.join(''));
  }
}

function getProducts() {
  var grid = new CPT.Grid($("#displayDiv"), someUrl);
  grid.init();
} 
```

我知道我可以通过没有单独的 showItems 函数来解决这个问题，但我想看看如何以另一种方式做到这一点。理想情况下，我想将对当前对象的引用传递给成功处理程序，但无法弄清楚如何做到这一点......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T17:05:05.167

这就是`context`选项的`$.ajax`用途：

```
$.ajax({
  // ...
  context: this,
  success: this.showItems
}); 
```

这将确保当前（正确）`this`传递给`showItems`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:04:33.773

您正在传递函数引用。这不会有相同的上下文。

...

```
var self = this;
$.ajax({
      url: this.surlWeb,
      headers: { "accept": "application/json" },
      success: function(){self.showItems.apply(self, arguments)
    });
  }, 
```

或者

您可以将上下文绑定到您的方法

```
this.showItems = this.showItems.bind(this); // will not work IE < 9
 $.ajax({
          url: this.surlWeb,
          headers: { "accept": "application/json" },
          success: this.showItems
        });
      }, 
```

# iphone - 如何测试我的应用程序的加载时间？

> ID：12990722
> 
> 赞同：2
> 
> 时间：2012-10-20T17:02:55.207
> 
> 标签：iphone, objective-c, ios, performance, cocoa-touch

我想对我的应用程序的加载时间进行基准测试，但不知道该怎么做。我可以先插入几个`NSLog`s 并比较时间戳。但是我应该把这些放在哪里？

我应该将第二个日志放在我的根视图控制器中，`viewDidAppear`因为这是该应用程序第一次可供用户使用吗？那么第一个日志呢？我正在考虑 applicationDidFinishLaunchingWithOptions: 但顾名思义，这有点晚了。

任何对教程、工具或任何其他内容的引用将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T17:09:30.727

就看门狗而言，“启动时间”是从`main`被调用到`applicationDidFinishLaunching:`返回 YES 所用的时间。如果这个时间太长，你的应用程序会被“坏食物”异常杀死。

受您控制并影响用户的代码部分从`application:didFinish...`（`willFinish`在 iOS6 中）开始，如您所说，在您的第一个视图控制器的 viewDidAppear 结束。在这些方法开始时记录日志会很好。

[这](http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)是应用程序启动和生命周期阶段的参考。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T17:24:04.727

您可以通过以下方式记录第一帧的启动时间：

```
int main(int argcv, char *argv[])
{
    startTime = CFAbsoluteTimeGetCurrent();
}

-(void) applicationDidFinishLaunching(UIApplication *)app {
   dispatch_async(dispatch_get_main_queue(), ^{
     NSLog(@"Launched in %f sec", CFAbsoluteTimeGetCurrent() - startTime);

} 
```

如果您可以访问这些视频 - 我建议您参加有关 ios App 性能和响应能力`2012 WWDC`的精彩视频会议。`235`他们有一个关于如何测量加载时间的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T02:03:20.583

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
[dateFormatter setTimeStyle:NSDateFormatterShortStyle];
//[dateFormatter setDateFormat:@"hh:mm:ss"]
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss.SSS"];
NSLog(@"Date%@", [dateFormatter stringFromDate:[NSDate date]]);
[dateFormatter release]; 
```

开始时间减去结束时间然后你得到加载时间

# c - C中的动态结构数组

> ID：12990723
> 
> 赞同：6
> 
> 时间：2012-10-20T17:02:57.987
> 
> 标签：c, arrays, dynamic, struct

我正在尝试学习 C 中的结构、指针和动态数组。我不明白如何使用指针创建结构的动态数组。我的代码不起作用，我不知道它有什么问题。我见过几个动态数组的例子，但不是结构体。任何帮助，将不胜感激。请给出一些解释，而不仅仅是我想要理解的代码片段，而不仅仅是解决这个问题。

```
#include<stdio.h>
#include<stdlib.h>
#include <string.h>

struct *struct_array;
int i,m,n,p;

struct data
{
    char inputA[20];
    char inputB[20];    
};

struct data get_data()
{
    struct data thisdata;

    printf("Please enter input A\n");
    scanf("%s", thisdata.inputA);

    printf("Please enter input B\n");
    scanf("%s", thisdata.inputB);

    return thisdata;
}

void Output(struct data struct_array, int n)
{
    int index = 0;
    for(i = 0; i<n ;i++)
    {
        printf("%s ", struct_array[i].inputA);
        printf("%s ", struct_array[i].inputB);
    }   
}

void resizeArray(int n)
{
    struct_array = (int*)realloc(n*sizeof(int));
}

void mainMenu()
{
    printf("Please select from the following options:\n");
    printf("1: Add new students to database\n");
    printf("2: Display current student database contents\n");
    printf("3: exit the program\n");
    scanf("%d", &p);
    if(p == 1)
    {
        printf("Please enter the number of students to register:\n");
        scanf("%d", &n);
        resizeArray(n);
        for(i = n; i<n ;i++)
        {
            struct_array[i] = get_data();
        }
    }
    else if(p == 2)
    {
         Output(struct_array, n);
    }
    else
    {
        free(struct_array);
        exit(0);
    }        
}

int main()
{    
    struct_array = (int*)realloc(2*sizeof(int));
    mainMenu();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T17:08:22.260

你的定义

```
struct *struct_array; 
```

是错误的。您必须使用您的类型的名称，即`data`.

```
struct data *struct_array; 
```

这样你就可以分配数组

```
struct_array = malloc(MaxNumElements * sizeof(struct data)); 
```

然后你应该释放内存

```
free(struct_array); 
```

编辑：类型定义必须在 var 声明之前发生。

```
struct data ....

struct data* your_variable; 
```

PS如果您不想`struct`每次使用`data`类型时都键入关键字，请使用`typedef`：

```
typedef struct data_s
{
   char inputA[20];
   char inputB[20];    
} data; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T17:08:29.530

You have several errors in your source code:

*   `struct *struct_array;` (l. 5)
    What does it mean? Did you want to write `struct data *struct_array`?

*   `printf("%s ", struct_array[i].inputA);` (l.32 & l. 33)
    The argument `struct_array` masks the global declaration, and it is not an array. Why did you add this argument?

*   `struct_array = (int *)realloc(n * sizeof(int));` (l. 39)
    You have forgotten an argument. Did you want to use `malloc` instead? Besides, the cast is not necessary (and incorrect!).

*   Unless you are using an hosted environnment and C99/C11, you should return a value from `main`.

*   Your variable `index` is not used. Why did you declare it?

*   `for(i = n; i < n; i++)` (l. 53) You won't have any iteration here...

The following code works as expected.

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

/* TODO: Avoid global variables. */
struct data *struct_array;

struct data {
    char inputA[20];
    char inputB[20];
};

/* 
 * TODO: Try to avoid passing your structure (40 bytes + padding) 
 * without pointer. 
 */
struct data get_data(void)
{
    struct data thisdata;

    printf("Please enter input A\n");

    /* TODO: Avoid using `scanf` for human inputs. */
    scanf("%s", thisdata.inputA);

    printf("Please enter input B\n");
    scanf("%s", thisdata.inputB);

    return thisdata;
}

void Output(size_t n)
{
    size_t i;
    for (i = 0; i < n; i++) {
        printf("%s ", struct_array[i].inputA);
        printf("%s ", struct_array[i].inputB);
    }
}

void resizeArray(size_t n)
{
    /* TODO: Handle reallocations errors. */
    struct_array = realloc(struct_array, n * sizeof *struct_array);
}

void mainMenu(void)
{
    size_t i, n;
    int p;

    /* TODO: Use a loop ? */
    printf("Please select from the following options:\n");
    printf("1: Add new students to database\n");
    printf("2: Display current student database contents\n");
    printf("3: exit the program\n");
    scanf("%d", &p);

    switch (p) {
    case 1:
        printf("Please enter the number of students to register:\n");
        scanf("%u", &n);
        resizeArray(n);

        for (i = 0; i < n; i++)
            struct_array[i] = get_data();
        break;
    case 2:
        Output(n);
        break;
    }
}

int main(void)
{
    struct_array = malloc(2 * sizeof(int));
    mainMenu();
    free(struct_array);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T19:52:30.790

Do you know how to use typedef?

I would suggest it, makes your code easier to understand and you won't have to be typing the word struct a thousand times. Also you could treat the new type similar to the primitive types (ints, chars, etc), just don't forget to use the dot (.) to access the individual fields you might want.

You could type for instance:

```
 typedef struct{
      char inputA[20];
      char inputB[20];
    } data; 
```

Now you could declare variables like this:

```
 data data_variable;
   data *pointer_to_data; 
```

And to you could allocate memory as follows:

```
 pointer_to_data = (data*) malloc(sizeof(data)* N); 
```

where N is the amount of struct data you want to allocate. Same works for realloc.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T17:09:46.443

> struct_array = (int*)realloc(2*sizeof(int));

By the above statement you are trying to assign address of an int to a pointer of type `struct data`.

You need to use:

```
struct_array = (struct data*)realloc(2*sizeof(struct data)); 
```

# c++ - OpenCV 2.4.2 findContours()，如何只得到直线轮廓

> ID：12990724
> 
> 赞同：5
> 
> 时间：2012-10-20T17:03:14.673
> 
> 标签：c++, visual-c++, image-processing, opencv

当我从 OpenCV 2.4.2 使用时：

```
cv::findContours() 
```

这是输出：

![在此处输入图像描述](../Images/19e878d7883640ec045d9018dc0fabdf.png)

我怎样才能摆脱所有这些不规则的形状，只留下直线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T17:24:27.107

您应该使用[`HoughLines`](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html)而不是`findContours`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T11:28:05.227

对于这种情况，您可以使用 cvMinAreaRect2。这个函数给你一个 CvBox2D，因为你想要的轮廓有最大的边界框，更大的框是你的目标。此功能还可以帮助您找到长线周围的轮廓。

# python - 是否有任何 python 机器学习库可以返回线性 svm 的系数或几何边距？

> ID：12990731
> 
> 赞同：1
> 
> 时间：2012-10-20T17:04:22.020
> 
> 标签：python, machine-learning, svm

是否有任何 python 机器学习库可以返回线性 svm 的系数或几何边距？我知道如何让 mlpy 库返回一个预测器，但不知道它是否可以返回实际系数。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T18:19:07.450

scikit-learn[`LinearSVC`](http://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVC.html)和[`SGDClassifier`](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.SGDClassifier.html)两者都实现了线性 SVM 以及用于模型检查的导出`coef_`和属性。`intercept_`

（免责声明：我是 scikit-learn 开发人员之一。）

# file-io - 在 SML 中引发 IO 异常

> ID：12990739
> 
> 赞同：0
> 
> 时间：2012-10-20T17:05:21.790
> 
> 标签：file-io, sml, smlnj

异常 IO 具有以下结构：

```
Exception IO of {
name: string
....
...} 
```

其他一些我不明白的论点。

我必须分配所有这些吗？我的意思是这之后我该怎么办？

```
exception IO of {inputfile} 
```

我通常定义异常然后引发。但我什至没有以这种方式定义异常。

如果输入文件不存在，我要做的就是引发异常。我在这里做什么？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:15:50.447

是的，在创建 Io 类型的异常时，您必须提供所有三个字段。[文档](http://www.standardml.org/Basis/io.html#IO%3aSIG%3aSPEC)中解释了字段的含义：

> 这是 I/O 子系统中发生错误时引发的主要异常。Io 的组成部分是：
> 
> *   name：读取器或写入器的名称组件。
> *   function：引发异常的函数的名称。
> *   原因：读取器或写入器引发的底层异常，或在流 I/O 级别检测到的异常。
> 
> 一些标准原因是：
> 
> *   OS.SysErr 如果实际系统调用已完成但失败。*如果给出了格式错误的参数，则下标。
> *   阻塞不支持
> *   非阻塞不支持
> *   闭流
> 
> Io 的原因字段不限于这些特定的异常。创建自己的读取器或写入器的用户可以引发任何他们喜欢的异常，这将被报告为生成的 Io 异常的原因字段。

请注意，如果文件不存在（作为函数，文件名作为名称，a作为原因），则`openIn`已经引发异常，因此您无需提出自己的异常。`Io``"openIn"``SysErr`

# google-maps-api-3 - 侧边栏单击信息窗口打开，XML 检索数据

> ID：12990740
> 
> 赞同：1
> 
> 时间：2012-10-20T17:05:22.437
> 
> 标签：google-maps-api-3

我已经从 xml..Generated Sidebar 中检索了数据。我想在侧边栏上单击打开信息窗口。尝试了很多示例和代码但没有成功...您能否建议 myclick 函数的函数声明应该是什么：

下面我提到我的代码......如果有人能提供帮助，我将不胜感激！

```
var gmarkers = [];

function load() {
 var side_bar_html = "<div class=\"pro_curved-hz-2\"><div class=\"pro_text-shadow\" style=\"height: 250px;overflow-x:hidden;overflow-y: scroll;\">";
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(<?php echo $SelectedLatitude; ?>,<?php echo $SelectedLongitude; ?>),
    zoom: <?php echo $Zoom; ?>,
    mapTypeId: 'roadmap'

  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("/map.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    var count=markers.length;
    if(count>0)
    side_bar_html += '<span class=\"pro_info pro_info-indent pro_info_success\">' + count + ' result found!! </span><div class=clear></div>';
    else
    side_bar_html += '<span class=\"pro_info pro_info-indent pro_info_warning\"> No Result found!! </span><div class=clear></div>';

    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var link= '/Place';
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var Mainicon = customMainIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: Mainicon.icon,
        shadow: Mainicon.shadow,
        animation: google.maps.Animation.DROP,
      });
        gmarkers[i] = marker;
      side_bar_html += '<div class=\"pro_curved-hz-2-1\" onclick="myclick('+i+');" onmouseover="mymouseover('+i+');" onmouseout="mymouseout('+i+');" ><div class=\"pro_text-shadow\"><a href=' + link + '>' + name + '</a><br>' + address + '</div></div>';
      bindInfoWindow(marker, map, infoWindow, html, side_bar_html);

    }
    side_bar_html += "</div></div>";
  });
}

      function myclick(index) { 

        }

      function mymouseover(i) {
        gmarkers[i].setAnimation(google.maps.Animation.BOUNCE);
        }

      function mymouseout(i) {
        gmarkers[i].setAnimation(null);
        }

function bindInfoWindow(marker, map, infoWindow, html, side_bar_html) {

document.getElementById("SideBar").innerHTML = side_bar_html;

    google.maps.event.addListener(marker,'mouseover', function() {
    //marker.setAnimation(google.maps.Animation.BOUNCE);
    //setTimeout(function(){ marker.setAnimation(null); }, 750);
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
    });

    google.maps.event.addListener(marker,'mouseout', function() {
    infoWindow.setContent(html);
    infoWindow.close(map, marker);
    });

    var p=<?php echo $Zoom; ?>;
  google.maps.event.addListener(marker, 'click', function() {
    p+=1;
    if(p>=20)
    {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
    }
    else
    {
    map.setZoom(p);
    map.setCenter(marker.getPosition());
    }
  });
}
function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:51:25.910

这是一个执行您要求[的示例（使用函数闭包和 createMarker 函数）。](http://www.geocodezip.com/v3_MW_example_map3.html)

这是[一个](http://www.geocodezip.com/v3_MW_example_map3_noclosure.html)不使用函数闭包的示例。

# jquery - 在django中使用AJAX删除模型表示的表中的一行

> ID：12990746
> 
> 赞同：0
> 
> 时间：2012-10-20T17:07:38.753
> 
> 标签：jquery, python, ajax, django

我有一个代表模型，我希望能够在不重新加载页面的情况下从数据库中删除行并删除对象。在左侧我有一个 X 图标，单击时使用 .hide('slow') 隐藏该行，但如何将其从数据库中删除？重新加载页面需要一段时间。我可以使用表单或使用 /delete 页面删除对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:18:30.653

您可以使用 jquery 轻松发出 ajax 请求

作为由用户单击“X”触发的事件处理程序的一部分，您可以向 django 应用程序发出请求。

```
$.post('/django/url/to/your/view', {idToDelete: 'value'}, function(response) {
  // callback
}); 
```

当然，这只是在客户端。在 django 中，您需要创建一个新的 urls.py 条目并创建视图逻辑来处理实际删除 id。

在您的发布请求中包含 csrf 令牌非常重要。Django 逐步提供了如何使用 ajax 请求执行此操作。[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)

# python - 在两个 Python 程序之间共享 LIFO 结构

> ID：12990754
> 
> 赞同：3
> 
> 时间：2012-10-20T17:08:34.683
> 
> 标签：python, multiprocessing

> **可能重复：**
> [从 multiprocessing.Queue 获得接近 LIFO 行为的干净方法？（甚至只是*不*接近先进先出）](https://stackoverflow.com/questions/12042575/clean-way-to-get-near-lifo-behavior-from-multiprocessing-queue-or-even-just-n)

我想在两个不同的 Python 程序之间共享一个 LIFO ( **Queue.LifoQueue() ) 结构。**

一个将充当**作家**，另一个将充当**读者**

现在它只是一个简单的共享读/写时间的应用程序。

读者应该在 LIFO 上插入 UNIX 时间戳，然后读者可以阅读它：

```
**#writer.py**
def getWriteTime():
   os.system("date +%s")
   # write to the LIFO structure

**#reader.py**
def getReadTime():
   # read from the LIFO structure
   # do calculations 
```

问题是，我如何在两个 python 程序之间共享相同的数据结构而不将其写入磁盘？

我知道**多处理**库允许在进程之间共享资源，但我不太明白如何在 python 程序之间共享 LIFO（队列）

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:13:21.393

使用某种第三个进程来托管共享数据结构。[http://redis.io](http://redis.io)是一个流行的选择。

# c# - 更改 winform 工具提示背景色

> ID：12990757
> 
> 赞同：11
> 
> 时间：2012-10-20T17:08:55.953
> 
> 标签：c#, winforms, tooltip

我在我的项目中使用了 ToolTip 控件。我想将其背景色设置为红色。我已将 ownerdraw 属性更改为 true 并将背景色更改为红色。但没有结果。有什么建议吗？

问候，skpaul。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-20T17:43:59.357

设置这些属性：

```
yourTooltip.OwnerDraw = true; 
yourTooltip.BackColor = System.Drawing.Color.Red; 
```

然后在 Draw 事件中使用：

```
private void yourTooltip_Draw(object sender, DrawToolTipEventArgs e)
{
    e.DrawBackground();
    e.DrawBorder();
    e.DrawText();
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-20T17:47:50.140

将 Event 添加到工具条并将 OwnerDraw 设置为 true：

```
public Form1() {
     InitializeComponent();
     toolTip1.OwnerDraw = true;
     toolTip1.Draw += new DrawToolTipEventHandler(toolTip1_Draw);          
 } 
```

然后为 Draw Event 添加一个方法：

```
void toolTip1_Draw(object sender, DrawToolTipEventArgs e) {
     Font f = new Font("Arial", 10.0f);
     toolTip1.BackColor = System.Drawing.Color.Red;
     e.DrawBackground();
     e.DrawBorder();
     e.Graphics.DrawString(e.ToolTipText, f, Brushes.Black, new PointF(2, 2));
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T17:39:49.433

当您将控件设置为 OwnerDraw 时，您必须自己处理控件的绘制。

这是一个快速而肮脏的示例（适应您的口味）：

```
Private Sub ToolTip1_Draw(sender As Object, e As DrawToolTipEventArgs) Handles ToolTip1.Draw
    Dim tt As ToolTip = CType(sender, ToolTip)
    Dim b As Brush = New SolidBrush(tt.BackColor)

    e.Graphics.FillRectangle(b, e.Bounds)

    Dim sf As StringFormat = New StringFormat
    sf.Alignment = StringAlignment.Center
    sf.LineAlignment = StringAlignment.Center
    e.Graphics.DrawString(e.ToolTipText, SystemFonts.DefaultFont, SystemBrushes.ActiveCaptionText, e.Bounds, sf)

    sf.Dispose()
    b.Dispose()
End Sub 
```

干杯

# symfony - Symfony 2内核服务类未定义？

> ID：12990759
> 
> 赞同：0
> 
> 时间：2012-10-20T17:09:05.133
> 
> 标签：symfony

我正在尝试使用 SF2 的框架包作为我的框架的基础并遇到了这个问题：

容器无法获得“内核”服务，因为类是空的。我查看了包的 services.xml 文件并找到了这一行

```
<service id="kernel" synthetic="true" /> 
```

该类未定义，我假设它已在我不知道的其他地方定义。我想知道我是否错过了设置中的任何内容（我现在通过 git 手动安装了包，而不是通过 composer 安装）

任何指针都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:41:42.190

基本上内核服务是合成的……这意味着服务不是由容器构造的，而是被注入到容器中，因此可以稍后使用……在这种特定情况下，[内核在启动内核](https://github.com/symfony/HttpKernel/blob/master/Kernel.php#L592)时在容器初始化之后自行传递给容器。

# image-processing - 图像的像素

> ID：12990770
> 
> 赞同：0
> 
> 时间：2012-10-20T17:10:16.193
> 
> 标签：image-processing, camera, pixels

我有一个愚蠢的问题：

我在白色背景上有一个黑色圆圈，例如：

![在此处输入图像描述](../Images/b133f69f84b61e984af6572d88ef5e6e.png)

我在 Matlab 中有一个代码，它获取带有黑色圆圈的图像并返回圆圈中的像素数。

**我会在 5 兆像素的相机和 8 兆像素的相机中获得相同数量的像素吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:12:36.567

它取决于分辨率是用于描述存储图像时水平或垂直计算的像素数。

更高的百万像素相机提供了打印更大图像的能力。

例如，6mp 相机提供 3000 x 2000 像素的分辨率。如果您允许打印质量为 300dpi（每英寸点数），这将为您提供大约 10 英寸 x 7 英寸的打印效果。3000 除以 300 = 10、2000 除以 300 = 约 7
3.1mp 相机的分辨率为 2048 x 1536 像素，打印尺寸为 7in x 5in

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:17:16.940

简短的回答是：*在大多数情况下，**否**。8MP 应该比 5MP 有更多的像素，但是......*

这取决于与相机和您拍摄的图像相关的许多因素：

1.  相机的焦距和其他光学参数。考虑一个[鱼眼镜](http://en.wikipedia.org/wiki/Fisheye_lens)头来理解我的观点。
2.  圆与相机的距离。显然，更近的物体看起来更大。
3.  相机对传感器像素的作用。例如，在缩小范围内工作的 5MP 相机，改为输出 3MP。

# javascript - 创建一个 NodeJS + Mongo DB MVC，任何想法如何开始？

> ID：12990771
> 
> 赞同：0
> 
> 时间：2012-10-20T17:10:32.693
> 
> 标签：javascript, model-view-controller, node.js, mongodb

我在我的大多数项目/初创公司中使用 PHP，我正在考虑转向 NodeJS，因为我听说它很酷，我只需要一些技巧或链接就可以开始在 NodeJS 和 MongoDb 中创建 MVC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T18:15:29.183

试试这些工具：用于 mongodb的[Mongoose](http://mongoosejs.com/)和用于 MVC的[Express 。](http://expressjs.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T19:07:00.313

Express 和 MongoDB 非常棒。做这个。1) 确保你精通 JS 并了解 node.js 中的模块系统。2) 在[http://mongodb.org/](http://mongodb.org/)上学习 5-10 分钟的交互式教程 3) 安装节点（包括 npm） 4) 以全局方式安装 express (npm install -g express) express --sessions --css手写笔--ejs myapp

你有非常棒的脚手架，超级容易理解。5）玩得开心！

作为一个建议，如果你觉得 mongoose 不太友好，请尝试使用 mongoJS。它更简单，更容易，但没有猫鼬的一些高级功能

# objective-c - Objective-C中静态常量和#define的区别

> ID：12990775
> 
> 赞同：7
> 
> 时间：2012-10-20T17:11:02.700
> 
> 标签：objective-c, static, constants, c-preprocessor

> **可能重复：**
> [C 中的“static const”与“#define”](https://stackoverflow.com/questions/1674032/static-const-vs-define-in-c)

在 Objective-C 中，以下两行有什么区别：

```
#define myInteger 5

static const NSInteger myInteger = 5; 
```

假设它们位于实现指令上方的 MyClass.m 中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-20T17:15:37.903

```
#define myInteger 5 
```

是一个预处理器宏。预处理器将在编译器启动之前替换每次出现的`myInteger`with 。`5`它不是一个变量，它只是一种自动查找和替换机制。

```
static const NSInteger myInteger = 5; 
```

这是一个恒定的“真实”变量（声明后无法更改）。静态意味着它将成为对该块的多次调用的共享变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T17:15:42.977

使用#define 时，标识符在代码转换为二进制之前由编译器替换为指定的值。这意味着编译器会在您编译应用程序时进行替换。

当您使用 const 并且应用程序运行时，将为常量分配内存，并在运行应用程序时替换该值。

请参考此链接：- [static const 和#define 之间的区别](http://www.geekpedia.com/KB114_What-is-the-difference-between-sharpdefine-and-const.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-20T17:18:57.727

有以下区别：

1.  定义是文本替换：

    *   定义是在编译之前进行的预处理器文本替换。当您在每次定义中以文本替换 5 时，您将获得相同的效果。
2.  static const 是内存中的一个变量

    *   然而，静态 const 是驻留在程序内存中的 NSInteger 类型的实例。您不能在运行时更改它，但它是存在于内存中的值，并且它自己的地址作为变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T17:14:24.803

`#define myInteger 5`是一个声明常量的宏。

因此，无论您使用`myInteger`宏，它都会被预处理器引擎替换为 5。

`const NSInteger myInteger = 5;`声明一个变量 myInteger，它的值是 5。

但是它们的用法是一样的，那就是它们是可以用来防止硬编码的常量。

# html - html中绝对没有边框

> ID：12990779
> 
> 赞同：0
> 
> 时间：2012-10-20T17:12:12.857
> 
> 标签：html, css, border

可能是一个非常愚蠢的问题，但是，如果我制作这样一个简单的页面：

```
<html>
<body>
<img src="http://4.bp.blogspot.com/_Pz8Gm0-zlrU/S8NOCkLAzQI/AAAAAAAAAAc/d8vXcPvbAlE/s1600/Seal_cub_1280x800.jpg">
</body>
</html> 
```

图像在顶部和左侧有一个边框。即使我在css中设置`body { border-width: 0px }`和。`img {border: 0px}`我该如何摆脱它？还有什么需要为零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:13:27.773

```
* {margin:0; padding:0; border:0;} 
```

`*`是一个通用选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:14:11.623

尝试

```
 html,body{margin:0; padding:0; border:0;} 
```

并[尝试这个来重置css](http://meyerweb.com/eric/tools/css/reset/)

# python - 在 Python 中使用奥尔森时区

> ID：12990781
> 
> 赞同：2
> 
> 时间：2012-10-20T17:12:26.767
> 
> 标签：python, datetime, localization, timezone

出色地，

时候到了，我正试图摆脱 Larry Wall 的噩梦，从 Perl 转向 Python（为了工作）。为此，我正在通过密集的自学来从一个半夜的牛仔编码员、一个男人的军队、非文档员，我相信你认识像我这样的人（！），转变为 Pythonic 方式的和平学生. 我也想在这里搞笑，所以请多多包涵。：/

为此，我正在努力将我每​​天使用的通用代码和实用程序从 Perl 转换为 Python。本周我一直在使用我在 Perl 中编写的 DateTime 相关库的工具进入 Python 库，该库定义了一个暴露相同合约的类，特别是从 Olson 数据库中创建不同时区的 DateTime 对象。这是 Perl 中的示例。我很难理解如何在 Python 中完成等效操作。请注意我在太平洋标准时间上午 9:56 写这篇文章：

```
package MyDateTime;

use Moose;
use DateTime;

has day         => (is => 'ro', isa => 'Int');
has hour        => (is => 'ro', isa => 'Int');
has minute      => (is => 'ro', isa => 'Int');
has month       => (is => 'ro', isa => 'Int');
has second      => (is => 'ro', isa => 'Int');
has timezone    => (is => 'ro', isa => 'Str', required => 1);
has timestamp   => (is => 'ro', isa => 'Num', required => 1);
has year        => (is => 'ro', isa => 'Int');

around BUILDARGS => sub {
    my($orig, $class, $timezone, $timestamp) = @_;

    my $datetime = DateTime->from_epoch(
        epoch => $timestamp,
        time_zone => $timezone,
    );

    return $class->$orig(
        day         => sprintf("%02d",$datetime->day),
        hour        => sprintf("%02d",$datetime->hour),
        minute      => sprintf("%02d",$datetime->minute),
        month       => sprintf("%02d",$datetime->month),
        second      => sprintf("%02d",$datetime->second),
        timezone    => $timezone,
        timestamp   => $timestamp,
        year        => $datetime->year,
    );

};

__PACKAGE__->meta->make_immutable;
1; 
```

这将创建一个 Perl DateTime 对象，其值对应于给定的时区。例如，在单独的脚本中：

```
#!/usr/bin/env perl

use Moose;
use MyDateTime;

my $timestamp = time();

my $datetime = MyDateTime->new( 'America/Los_Angeles', $timestamp );
print $datetime->hour,"\n";

$datetime = MyDateTime->new( 'America/New_York', $timestamp );
print $datetime->hour,"\n"; 
```

哪个打印：

```
09
12 
```

因为目前是上午 9 点在洛杉矶和下午 12 点在纽约。

我在 Python 中能做的最好的事情如下：

```
import datetime, pytz, time

class DateTime:
    def __init__(self, timezone, epoch):
        self.timezone = timezone
        self.epoch = epoch
        timezoneobject = pytz.timezone(timezone)
        datetimeobject = datetime.datetime.fromtimestamp( self.epoch )
        self.datetime = timezoneobject.localize(datetimeobject)

    def hour(self):
        return self.datetime.hour

if __name__=='__main__':
    epoch = time.time()
    dt = DateTime('America/Los_Angeles',epoch)
    print dt.datetime
    dt = DateTime('America/New_York',epoch)
    print dt.datetime 
```

哪个打印：

```
9
9 
```

我不知道这是哪里出了问题！是否可以使用 pytz 在 Python 中完成相同的操作？（我想是的！）如果是这样，请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T17:25:21.663

[fromtimestamp](http://docs.python.org/library/datetime.html#datetime.datetime.fromtimestamp)可以将 timezone 作为其第二个参数。在这种情况下，`fromtimestamp`将时间戳解释为相对于该时区并返回一个时区感知的日期时间对象。

* * *

```
import datetime, pytz, time

utc = pytz.utc
class DateTime:
    def __init__(self, timezone, epoch):
        self.timezone = timezone
        self.epoch = epoch
        timezoneobject = pytz.timezone(timezone)
        self.datetime = datetime.datetime.fromtimestamp(self.epoch, timezoneobject)

    def hour(self):
        return self.datetime.hour

if __name__=='__main__':
    epoch = time.time()
    dt = DateTime('America/Los_Angeles',epoch)
    print dt.hour()
    dt = DateTime('America/New_York',epoch)
    print dt.hour() 
```

产量

```
10
13 
```

* * *

顺便说一句，命名你的类可能会使其他 Python 程序员（即我！）感到困惑，因为类名听起来与标准库中`DateTime`的模块相同。`datetime`不同的概念应该有易于区分的名称。当我的意思是另一个名字时，我犯了无数错误。你可以给你的班级起一个明显不同于`datetime`.

# hibernate - Hibernate 集合映射：一个非常好的关注点分离？

> ID：12990791
> 
> 赞同：1
> 
> 时间：2012-10-20T17:13:40.513
> 
> 标签：hibernate, design-patterns, dao, separation-of-concerns

我是 Hibernate ORM 的新手，我认为您可以帮助我更好地理解它。更准确地说，我发现自己在思考关注点分离是否实现得很好（当然是，我无法理解……但请解释一下）。让我解释一下：在我看来，hibernate 的主要目标是允许开发人员处理忘记数据库特性的类。好的！但是让我们来看看这个案例：

我有一个对象，假设一个 UserDetail 与 Athority 对象有一个可能的关系。

```
@Entity(name="user")
@Table(name="USERS")
public class User implements UserDetails, DomainObject {

private static final long serialVersionUID = 1L;
private long id;
private String username;
private String password;
Collection<Authority> authorities = new ArrayList<Authority>();

public User() {
    super();
}

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="id", unique=true, nullable=false)
public long getId() {
    return id;
}

//various getters & setters

@OneToMany(mappedBy="user")
public Collection<Authority> getAuthorities() {
    return authorities;
}

public void setAuthorities(Collection<Authority> authorities) {
    this.authorities = authorities;
}       
} 
```

这是权威对象

```
@Entity(name="authority")
@Table(name="AUTHORITIES")
public class Authority implements GrantedAuthority, DomainObject{

private long id;
private User user;
private String authority;  //Spring Security demands them to start with "ROLE_"

public Authority() {
    super();
}

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="id", unique=true, nullable=false)
public long getId() {
    return id;
}

public void setId(long id) {
    this.id = id;
}

@ManyToOne
public User getUser() {
    return user;
}

public void setUser(User user) {
    this.user = user;
}

@Column(name="authority", nullable=false)
public String getAuthority() {
    return this.authority;
}

public void setAuthority(String authority) {
    this.authority = authority;
}

} 
```

好的，假设我有一个 UserDaoImpl 和 AuthorityDaoImpl （为简洁起见，此处省略）。如果我想创建一个新的 UserDetails 并将其持久化，我必须执行以下操作（它是一个 inizializer bean，但在这里真的无关紧要）：

```
@Component
public class Initializer {

    @Autowired
    @Qualifier("userDaoImpl")
    private UserDao userDao;
    @Autowired
    @Qualifier("authorityDaoImpl")
    private AuthorityDao authorityDao;

    @PostConstruct
    public void init()
    {
        if(userDao.loadUserByUsername("admin")==null)
        {
            System.out.println("starting initialization.");
            User admin = new User();
            admin.setUsername("admin");
            admin.setPassword("admin");

            Authority authority = new Authority();
            authority.setAuthority("ROLE_ADMIN");
            authority.setUser(admin);

            admin.getAuthorities().add(authority);

            userDao.save(admin);
            authorityDao.save(authority);
            System.out.println("admin user created.");
        }

    }
} 
```

好的，我觉得很奇怪，我必须显式调用 AuthorityDao 来保持权威对象。如果关注点分离得到很好的实现，我只需将`authority`对象添加到`admin`权限列表并单独保留管理员即可。如果我这样做，唯一要保留的实体是管理员。你不觉得一样吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:17:05.100

是的。你错过了一件事。只需在实体映射中的映射中添加`cascade = CascadeType.ALL`或`cascade = CascadeType.PERSIST`（选择合适的），如下所示。完成后，保存也将保存。`oneToMany``Admin``adimn``authority`

```
 @OneToMany(mappedBy="user", cascade = CascadeType.ALL)
     public Collection<Authority> getAuthorities() {
            return authorities;
     } 
```

请在`cascade`此处找到有关类型和设置的更多详细信息：[**Hibernate Cascade**](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-cascade)。

这是支持子实体上的不同行为所必需的。例如，您的权限是一个主表，即从国家、货币等表映射。在这里，您不希望保留/删除货币、国家和父对象。作为一个通用框架，它必须支持需求的几个方面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:38:15.810

实际上，可以通过两种不同的方式在映射中启用关联对象的自动持久性：

为了表达 UML 所说的组合（即依赖对象不能独立于引用对象而存在，不能被其他对象引用），您可以将其设为 @Embeddable。然后 Hibernate 将插入、更新和删除依赖对象及其所属对象（关联到）。

为了表达 UML 所称的聚合（即，被引用对象具有自己的身份和独立的生命周期），您将被引用对象设为 @Entity。您可以通过指定其级联属性来指示 JPA 沿关联自动级联持久性操作。

当然，持久化上下文加载的任何对象都会检测到变化，并在事务提交时自动将它们写入数据库。

# anagram - 这是最好的字谜检查解决方案吗？

> ID：12990792
> 
> 赞同：3
> 
> 时间：2012-10-20T17:13:51.103
> 
> 标签：anagram

我正在寻找一种有效的解决方案来检查两个字符串是否是字谜，但字符表/字典检查可能不是 unicode 的好解决方案。我想出了一个解决方案，但我不知道如何证明它在数学上是正确的。公式表达为“ (a + b) = (c + d) 和 a XOR b XOR c XOR d = 0 ==> (a,b) 和 (c,d) 是字谜”。也许你可以帮助我。下面是一个实现。

```
def isAnagram(s1: String, s2: String): Boolean = {
  if (s1.length != s2.length) return false
  else {
    var numVal = 0
    var bitVal = 0
    for (i <- 0 until s1.length) {
      numVal += s1(i) - s2(i)
      bitVal ^= s1(i) ^ s2(i)
    }

  return numVal == 0 && bitVal == 0
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:44:35.657

icepack 的反例是不正确的，因为`1 ^ 5 ^ 3 ^ 2 ^ 4 ^ 3 = 2`, not `0`。

这是一个更好的反例：`s1 = (5, 0, 5)`和`s2 = (1, 4, 5)`.

`5 + 0 + 5 = 1 + 4 + 5`

`5 ^ 0 ^ 5 ^ 1 ^ 4 ^ 5 = 0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-26T16:11:47.357

```
import java.util.Arrays;
import java.util.Scanner;

public class anagram {

    public static void main(String[] args) {

        Scanner sc=new Scanner(System.in);
        System.out.println("Enter 1st String");

        String r1=sc.nextLine();
        System.out.println("Enter 2nd String");

        String r2=sc.nextLine();
        if(r1.length()!=r2.length()) System.out.println("not a Anagram");

        char[] s1=r1.toCharArray();
        char[] s2=r2.toCharArray();
        Arrays.sort(s1);
        Arrays.sort(s2);
        boolean f= Arrays.equals(s1, s2);

        if(f==false) System.out.println("not a Anagram");
        else System.out.println("its a Anagram");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T17:27:56.437

你的条件不够好。这是一个相反的例子： `s1 = (1,5,3), s2 = (2,4,3)`

`1+5+3=9=2+4+3`

`1 ^ 5 ^ 3 ^ 2 ^ 4 ^ 3 = 0`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T13:02:11.100

这是查找两个字符串是否为字谜的最简单方法之一。

```
<?php
$str1=$_POST['str1'];
$str2=$_POST['str2'];
$arr1=str_split($str1);
$arr2=str_split($str2);
sort($arr1);
sort($arr2);
echo (($arr1==$arr2) ? "The given string is anagram" : "The given string is not a anagram"); 
}
?> 
```

# android - 如何在 buttonclick 上显示不同的下载图像

> ID：12990802
> 
> 赞同：2
> 
> 时间：2012-10-20T17:15:19.840
> 
> 标签：android, url, imageview, fragment

我想从 URL 下载不同的图像，并在单击 btn1 时显示其中一个图像，并在单击 btn2 时显示另一个图像。我怎么做？这是我到目前为止所尝试的：

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

    public class MainActivity extends FragmentActivity {
Fragment fragment;
Button btn1, btn2, btn3, btn4, btn5, btn6, btn7, btn8, btn9;

@Override
public void onCreate(Bundle savedInstanceState) 
 { 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btn1=(Button)findViewById(R.id.btn1);
    btn2=(Button)findViewById(R.id.btn2);
    btn3=(Button)findViewById(R.id.btn3);
    btn4=(Button)findViewById(R.id.btn4);
    btn5=(Button)findViewById(R.id.btn5);
    btn6=(Button)findViewById(R.id.btn6);
    btn7=(Button)findViewById(R.id.btn7);
    btn8=(Button)findViewById(R.id.btn8);
    btn9=(Button)findViewById(R.id.btn9);

    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();

    StartFragment myFragment = new StartFragment();
    ft.add(R.id.myFragment, myFragment);
    ft.commit();

    btn1.setOnClickListener(btnOnClickListener);
    btn2.setOnClickListener(btnOnClickListener);
    btn3.setOnClickListener(btnOnClickListener);
    btn4.setOnClickListener(btnOnClickListener);
    btn5.setOnClickListener(btnOnClickListener);
    btn6.setOnClickListener(btnOnClickListener);
    btn7.setOnClickListener(btnOnClickListener);
    btn8.setOnClickListener(btnOnClickListener);
    btn9.setOnClickListener(btnOnClickListener);
}

    Button.OnClickListener btnOnClickListener = new Button.OnClickListener()
{
    @Override
    public void onClick(View v) 
{

        Fragment newFragment;

        if (v == btn1){
            newFragment = new Fragment1();
        }else if (v == btn2){
            newFragment = new Fragment2();
        }else if (v == btn3){
            newFragment = new Fragment3();
        }else if (v == btn4){
            newFragment = new Fragment4();
        }else if (v == btn5){
            newFragment = new Fragment5();
        }else if (v == btn6){
            newFragment = new Fragment6();
        }else if (v == btn7){
            newFragment = new Fragment7();
        }else if (v == btn8){
            newFragment = new Fragment8();
        }else if (v == btn9){
            newFragment = new Fragment9();
        }else {
            newFragment = new StartFragment();
        }

        FragmentTransaction transaction =                                             getSupportFragmentManager().beginTransaction();
        transaction.replace(R.id.myFragment, newFragment);
        transaction.addToBackStack(null);
        transaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
        transaction.commit();

    }

    };

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:22:30.230

在您的 onClick 中，对于单击按钮的每种情况，您都可以调用此方法

位图 bmImg;

```
void downloadFile(String fileUrl){
URL myFileUrl =null;
try {
myFileUrl= new URL(fileUrl);
} catch (MalformedURLException e) {
// TODO Auto-generated catch block
e.printStackTrace();
}
try {
HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
conn.setDoInput(true);
conn.connect();
int length = conn.getContentLength();
int[] bitmapData =new int[length];
byte[] bitmapData2 =new byte[length];
InputStream is = conn.getInputStream();

bmImg = BitmapFactory.decodeStream(is);
imView.setImageBitmap(bmImg);
} catch (IOException e) {
// TODO Auto-generated catch block
e.printStackTrace();
} 
```

# c# - System.MissingMethodException：无法创建接口的实例

> ID：12990818
> 
> 赞同：2
> 
> 时间：2012-10-20T17:17:20.807
> 
> 标签：c#

我有一个包含几个文本框的表单，您在文本框中输入一些值，然后当您按下提交时，它将值保存到文件中。但是，当我按下提交时，我得到以下异常。我已将问题缩小到 InventoryMngr 和 CreateInventory 代码中的某些内容，但我不确定我在那里做错了什么。

```
System.MissingMethodException: Cannot create an instance of an interface.
   at HomeInventory2.Services.Factory.GetService(String servicename) in C:\Users\Protego\documents\visual studio 2010\Projects\HomeInventory2\HomeInventory2\Services\Factory.cs:line 37
   at HomeInventory2.Business.Manager.GetService(String name) in C:\Users\Protego\documents\visual studio 2010\Projects\HomeInventory2\HomeInventory2\Business\Manager.cs:line 14
   at HomeInventory2.Business.InventoryMngr.Create(CreateInventory inv) in C:\Users\Protego\documents\visual studio 2010\Projects\HomeInventory2\HomeInventory2\Business\InventoryMngr.cs:line 19
   at HomeInventory2.Form1.submitButton_Click(Object sender, EventArgs e) in C:\Users\Protego\documents\visual studio 2010\Projects\HomeInventory2\HomeInventory2\Form1.cs:line 52
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

库存管理器

```
namespace HomeInventory2.Business
{
    public class InventoryMngr : Manager
    {
        /// <summary>
        /// persists the inventory information
        /// </summary>
        /// <param name="inv"></param>
        public void Create(CreateInventory inv)
        {
            InventorySvc inventorySvc =
            (InventorySvc)GetService(typeof(InventorySvc).Name);
            inventorySvc.CreateInventory(inv);
        }
    }
} 
```

创建库存

```
namespace HomeInventory2.Domain
{
    [Serializable]
    public class CreateInventory
    {

        /// <summary>
        /// item category
        /// </summary>
        private string itemCategory;
        public String ItemCategory
        {
            set
            {
                itemCategory = value;
            }
            get
            {
                return itemCategory;
            }
        }

        /// <summary>
        /// item properties
        /// </summary>
        private string itemProperties;
        public String ItemProperties
        {
            set
            {
                itemProperties = value;
            }
            get
            {
                return itemProperties;
            }
        }

        /// <summary>
        /// item amount
        /// </summary>
        private string itemAmount;
        public String ItemAmount
        {
            set
            {
                itemAmount = value;
            }
            get
            {
                return itemAmount;
            }
        }

        /// <summary>
        /// item value
        /// </summary>
        private string itemValue;
        public String ItemValue
        {
            set
            {
                itemValue = value;
            }
            get
            {
                return itemValue;
            }
        }

    }
} 
```

InventorySvc 是一个接口

```
namespace HomeInventory2.Services
{
    public interface InventorySvc : IService
    {
        void CreateInventory(CreateInventory createinventory);
    }
} 
```

InventoryImpl

```
namespace HomeInventory2.Services
{
    public class InventoryImpl: InventorySvc

    {
        /// <summary>
        /// Creates an output files with the given inventory information written to it, serves as placeholder - this will be replaced with a database system
        /// </summary>
        /// <param name="createinventory"></param>
        public void CreateInventory(CreateInventory createinventory)
        {
            try
            {
                FileStream fileStream = new FileStream
                ("CreateInventory.bin", FileMode.Create,
                FileAccess.Write);
                IFormatter formatter = new BinaryFormatter();
                formatter.Serialize(fileStream, createinventory);
                fileStream.Close();
            }
            catch (ItemNotFoundException)
            {
                throw new ItemNotFoundException("Output not created - see logs");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:31:05.160

我强烈怀疑您的 GetService 正在尝试使用接口名称创建实例。在 .Net 中从接口创建实例是非法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:28:36.217

您不能创建接口的实例..

在您的`create`方法中，将您的`inventorySvc`转换为实现 InventorySvc 的类

```
 InventorySvc inventorySvc = 
        (yourClassImplementingInventorySvcInterface)GetService(typeof(InventorySvc).Name); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-20T17:23:37.923

接口无法实例化。您应该创建一个实现该接口的类。

# iphone - 如何实现无边框的 UISearchBar

> ID：12990821
> 
> 赞同：3
> 
> 时间：2012-10-20T17:17:45.580
> 
> 标签：iphone, objective-c, ios, uisearchbar

我正在尝试添加一个没有边框的 UISearchBar，但它根本不起作用。

这就是我所拥有的：

在 XIB 文件上，我添加了 UISearchBar。样式 = 黑色透明。色调 = 默认。未选择任何选项（书签、取消按钮、范围栏等）。背景 = 默认。绘图 = 不透明（基本上是 UISearchBar 的默认设置）。

我有一个 UISearchBar 的属性 - searchBar。在实现文件中，当视图加载时，我有：

```
[[self.searchBar.subviews objectAtIndex:0] removeFromSuperview]; 
```

但无论出于何种原因，背景（框周围的黑色边框）根本就不存在。我尝试了 [[self.searchBar.subviews objectAtIndex:0] setAlpha:0]，但这也根本不起作用。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-17T17:44:42.170

这对我有用

```
for (UIView * view in [[[self.searchBar subviews] objectAtIndex:0] subviews])
{
    if (![view isKindOfClass:[UITextField class]])
    {
        view .alpha = 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T20:46:35.000

这是代码......

```
for (id img in searchBar.subviews)
{       
     if ([img isKindOfClass:NSClassFromString(@"UISearchBarBackground")])
     {     
            [img removeFromSuperview];    
     }
} 
```

快乐编码:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T17:25:07.620

怎么样：

```
[self.searchBar setOpaque:NO]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T17:27:29.213

```
[[_searchBar.subviews objectAtIndex:0] removeFromSuperview];
_searchBar.backgroundColor = [UIColor clearColor]; 
```

希望这对你有用，它对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-20T17:34:34.433

这仅在静态 UISearchBar 中有效，如果您想显示搜索取消按钮，则此问题发生在 ios 5.0 以上的设备中。为此，您必须更改/设置 UiSearchBar 的 BackgroundView。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-20T18:01:50.180

试试这个

```
 for (UIView * view in [mySearchBar subviews]) {
     if (![view isKindOfClass:[UITextField class]]) {
    view .alpha = 0;
     }
  } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-07T10:42:00.623

对于使用 8.0 及更高版本的用户，最好的解决方案是简单地使用该`UIAppearance`协议，方法是执行以下操作：

```
[[UISearchBar appearance] setBackgroundImage:[UIImage new] forBarPosition:UIBarPositionAny barMetrics:UIBarMetricsDefault]; 
```

您还可以在一个特定实例上执行此操作：

```
[mySearchBar setBackgroundImage:[UIImage new] forBarPosition:UIBarPositionAny barMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-20T09:18:47.790

如果有人和我有同样的问题（见图）上面的代码可以解决

```
[self.tableView setContentInset:UIEdgeInsetsMake(-1, 0, 0, 0)]; 
```

# objective-c - 在计时器事件处理程序中访问可变属性

> ID：12990827
> 
> 赞同：0
> 
> 时间：2012-10-20T17:18:22.103
> 
> 标签：objective-c, ios, grand-central-dispatch

我想在计时器的事件处理程序中提供对类属性的读/写访问，但还要在事件处理程序之外的类的其他地方更新相同的属性。我需要采取哪些预防措施来确保读取和更新正确的数据？

这是一般逻辑：

```
// declared in the class header and initialized to 1 in init
@property (nonatomic, strong) NSNumber           *sharedItem;
@property (nonatomic, assign) dispatch_source_t  timer;

// Method invoked independent of the timer
- (void)doSomeWork {
    // QUESTION: During a timer tick, will it access the correct version of 
    // sharedItem that is updated here? 
    // Do I need to protect this area with a critical section/lock?
    sharedItem = [NSNumber numberWithInteger:[sharedItem intValue] + 1];
}

- (void)myTimerRelatedMethod {

    // Creating the timer
    _timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);
    dispatch_source_set_timer(self.timer, startTime, interval, leeway);

    // Timer's event handler run for each tick
    dispatch_source_set_event_handler(self.timer, ^{
        if ([sharedItem intValue] > 10) {
            // 1\. Do something 
            // 2\. Then cancel the timer
        }
    });

    dispatch_resume(self.timer);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:24:34.133

对于简单的原语，您只需将属性设置为原子，您不必担心线程之间的读写不一致。

对于指针，除了将属性设置为原子之外，您还应该使用 @synchronize 来避免读写一致性。

另请注意，如果您的计时器与您的代码的其余部分在同一个线程中（在主线程+运行循环上），您不需要做任何事情，因为计时器事件将由在其余部分触发的相同运行循环触发主线程代码，并且不会真正并发。

# html - 如何做 div 元素的网格？

> ID：12990834
> 
> 赞同：0
> 
> 时间：2012-10-20T17:19:16.733
> 
> 标签：html, css

快速提问，我需要帮助并且不知道该怎么做，因为我对 html/css 一无所知，并将其作为奖励任务以及其他编程内容。

是）我有的： ![一个下一个](../Images/febee90f1c583d39a2158d732d77da04.png)

我想拥有的： ![网格](../Images/45e280031fa410579e3895daf959dc16.png)

这是css代码

```
.offer-small { width: 278px; height: 209px; position: relative; margin-bottom: 25px; }
.offer-small img { width: 278px; height: 209px; }
.offer-small .mask { width: 278px; height: 209px; cursor: pointer; position: absolute; top: 0; left: 0; background: url('../images/photo-small-mask.png'); }
.offer-small .desc { display: none; font-size: 10pt; width: 258px; height: 189px; padding: 10px; position: absolute; top: 0; left: 0; background: url('../images/photo-small-black-transparent.png'); color: white; text-shadow: 1px 1px #000000}
.offer-small .desc p { font-size: 9pt; color: #f2f0e4; }
.offer-small .desc table.compare { width: 160px; height: 48px; margin: 0 auto 0 auto; background: url('../images/offer-table.png'); color: #f2f0e4; }
.offer-small .desc table td { text-align: center; padding-bottom: 10px; }
.offer-small .desc table td.small { font-size: 8pt; }
.offer-small .title { width: 258px; background: url('../images/offer-transparent.png'); padding: 2px 10px; position: absolute; top: 120px; left: 0;  }
.offer-small .title strong { font-size: 9pt; color: #ffffff; }
.offer-small .title small { font-size: 8pt; color: #f2f0e4; }
.offer-small .title small strong { font-size: 8pt; color: #f2f0e4; }
.offer-small .view-offer { position: absolute; top: 160px; left: 150px; }

.view-offer { display: block; width: 120px; height: 44px; background: url('../images/button-view-offer.png'); }
.btnSendOrder { width: 260px; height: 75px; border: 0; background: url('../images/button-send-order.png'); cursor: pointer; }
.toLeft { float: left; margin-right: 25px; } 
```

html/智能代码：

```
 {if $random}{foreach item=item from=$random}

                <div class="offer-small">
                    <img src="{$smarty.const.APP_URL}/userfiles/photos/{if $item.item_photo}s_{$item.item_photo}{else}blank_small.jpg{/if}" alt="" />
                    <div class="desc">
                        <strong>{$item.item_name|truncate:30}</strong>
                        <p>{$item.item_short_description|truncate:120}</p>
                        <p align="right"><a href="{$smarty.const.APP_URL}oferta/{$item.item_category}/{$item.item_title}" class="view-offer"></a></p>
                    </div>
                    <div class="title">
                        <strong>{$item.item_name|truncate:30}</strong><br/><small>Cena teraz: <strong>{$item.item_cost_now|money} zł</strong> zamiast <strong>{$item.item_cost_before|money} zł</strong></small><br/><br/>
                        <strong>OSZCZĘDZASZ <big>{$item.item_cost_before-$item.item_cost_now|money}</big> zł</strong>
                    </div>
                </div>

                {/foreach}{/if} 
```

也欢迎提示。我的意思是，如果有人告诉我如何打破这个愚蠢的清单，我可以处理网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:22:33.637

一个简单的方法是让类的 div`.offer-small`向左浮动：

```
.offer-small { 
width: 278px; 
height: 209px; 
position: relative; 
margin-bottom: 25px; 
float:left;
} 
```

只要您将它们全部放在具有固定宽度的容器元素中，它们就应该很好地彼此相邻，自动换行到下一行。

# flash - 使用 Flash 和 php ini 上传文件的限制

> ID：12990836
> 
> 赞同：0
> 
> 时间：2012-10-20T17:19:18.080
> 
> 标签：flash, upload, limit, php

我最近订阅了一个只允许 2mb 上传 php 的新主机。我想知道我可以使用像[SWFupload](http://code.google.com/p/swfupload/)这样的 Flash 上传器来上传超过 2mb 的文件吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:26:22.817

尝试

```
void setFileSizeLimit(file_size_limit) 
```

动态修改 file_size_limit 设置。这适用于所有将来排队的文件。file_size_limit 参数将接受一个单位。有效单位为 B、KB、MB 和 GB。默认单位为 KB。

示例：2147483648 B、2097152、2097152KB、2048 MB、2 GB

**有用的读物**

[**SWF上传文档**](http://demo.swfupload.org/Documentation/)

# c++ - 提升异步 tcp 客户端

> ID：12990840
> 
> 赞同：5
> 
> 时间：2012-10-20T17:19:56.770
> 
> 标签：c++, boost, client, boost-asio

我刚刚开始使用boost。我正在用异步套接字编写 TCP 客户端-服务器。

任务如下：

1.  客户端向服务器发送一个号码
2.  客户端可以在收到服务器的答复之前发送另一个号码。
3.  服务器接收到一个数字，对其进行一些计算并将结果发送回客户端。
4.  多个客户端可以连接到服务器。

现在工作如下

*   从客户端发送一个号码到服务器
*   服务器在当前线程中接收一个数字并在 OnReceive 处理程序中进行计算（我知道这很糟糕......但我应该如何启动一个新线程来并行计算）
*   服务器发回答案，但客户端已断开连接

如何让客户端从键盘输入数字并同时等待服务器的回答？

为什么我的客户不等待服务器的答复？

客户端代码：

```
using boost::asio::ip::tcp;

class TCPClient
{
    public:
        TCPClient(boost::asio::io_service& IO_Service, tcp::resolver::iterator EndPointIter);
        void Close();

    private:
        boost::asio::io_service& m_IOService;
        tcp::socket m_Socket;

        string m_SendBuffer;
        static const size_t m_BufLen = 100;
        char m_RecieveBuffer[m_BufLen*2];

        void OnConnect(const boost::system::error_code& ErrorCode, tcp::resolver::iterator EndPointIter);
        void OnReceive(const boost::system::error_code& ErrorCode);
        void OnSend(const boost::system::error_code& ErrorCode);
        void DoClose();
};

TCPClient::TCPClient(boost::asio::io_service& IO_Service, tcp::resolver::iterator EndPointIter)
: m_IOService(IO_Service), m_Socket(IO_Service), m_SendBuffer("")
{
    tcp::endpoint EndPoint = *EndPointIter;

    m_Socket.async_connect(EndPoint,
        boost::bind(&TCPClient::OnConnect, this, boost::asio::placeholders::error, ++EndPointIter));
}

void TCPClient::Close()
{
    m_IOService.post(
        boost::bind(&TCPClient::DoClose, this));
}
void TCPClient::OnConnect(const boost::system::error_code& ErrorCode, tcp::resolver::iterator EndPointIter)
{
    cout << "OnConnect..." << endl;
    if (ErrorCode == 0)
    {
        cin >> m_SendBuffer;
        cout << "Entered: " << m_SendBuffer << endl;
        m_SendBuffer += "\0";

        m_Socket.async_send(boost::asio::buffer(m_SendBuffer.c_str(),m_SendBuffer.length()+1),
            boost::bind(&TCPClient::OnSend, this,
            boost::asio::placeholders::error));
    } 
    else if (EndPointIter != tcp::resolver::iterator())
    {
        m_Socket.close();
        tcp::endpoint EndPoint = *EndPointIter;

        m_Socket.async_connect(EndPoint, 
            boost::bind(&TCPClient::OnConnect, this, boost::asio::placeholders::error, ++EndPointIter));
    }
}

void TCPClient::OnReceive(const boost::system::error_code& ErrorCode)
{
    cout << "receiving..." << endl;
    if (ErrorCode == 0)
    {
        cout << m_RecieveBuffer << endl;

        m_Socket.async_receive(boost::asio::buffer(m_RecieveBuffer, m_BufLen),
            boost::bind(&TCPClient::OnReceive, this, boost::asio::placeholders::error));
    } 
    else 
    {
        cout << "ERROR! OnReceive..." << endl;
        DoClose();
    }
}

void TCPClient::OnSend(const boost::system::error_code& ErrorCode)
{
    cout << "sending..." << endl;
    if (!ErrorCode)
    {
        cout << "\""<< m_SendBuffer <<"\" has been sent" << endl;
        m_SendBuffer = "";

        m_Socket.async_receive(boost::asio::buffer(m_RecieveBuffer, m_BufLen),
            boost::bind(&TCPClient::OnReceive, this, boost::asio::placeholders::error));
    }
    else
    {
        cout << "OnSend closing" << endl;
        DoClose();
    }

}

void TCPClient::DoClose()
{
    m_Socket.close();
}

int main()
{
    try 
    {
        cout << "Client is starting..." << endl;
        boost::asio::io_service IO_Service;

        tcp::resolver Resolver(IO_Service);

        string port = "13";
        tcp::resolver::query Query("127.0.0.1", port);

        tcp::resolver::iterator EndPointIterator = Resolver.resolve(Query);

        TCPClient Client(IO_Service, EndPointIterator);

        cout << "Client is started!" << endl;

        cout << "Enter a query string " << endl;

        boost::thread ClientThread(boost::bind(&boost::asio::io_service::run, &IO_Service));

        Client.Close();
        ClientThread.join();
    } 
    catch (exception& e)
    {
        cerr << e.what() << endl;
    }

    cout << "\nClosing";
    getch();
} 
```

这是控制台的输出

```
Client is starting...
Client is started!
OnConnect...
12
Entered: 12
sending...
"12" has been sent
receiving...
ERROR! OnReceive...

Closing 
```

服务器部分

```
class Session
{
    public:
        Session(boost::asio::io_service& io_service)
            : socket_(io_service)
        {
            dataRx[0] = '\0';
            dataTx[0] = '\0';
        }

        tcp::socket& socket()
        {
            return socket_;
        }

        void start()
        {
            socket_.async_read_some(boost::asio::buffer(dataRx, max_length),
                boost::bind(&Session::handle_read, this,
                boost::asio::placeholders::error,
                boost::asio::placeholders::bytes_transferred));
        }

        void handle_read(const boost::system::error_code& error, size_t bytes_transferred)
        {
            cout << "reading..." << endl;
            cout << "Data: " << dataRx << endl;

            if (!error)
            {
                if (!isValidData())
                {
                    cout << "Bad data!" << endl;
                    sprintf(dataTx, "Bad data!\0");
                    dataRx[0] = '\0';
                }
                else
                {
                    sprintf(dataTx, getFactorization().c_str());
                    dataRx[0] = '\0';
                }

                boost::asio::async_write(socket_,
                    boost::asio::buffer(dataTx, max_length*2),
                    boost::bind(&Session::handle_write, this,
                    boost::asio::placeholders::error));
            }
            else
            {
                delete this;
            }
        }

        void handle_write(const boost::system::error_code& error)
        {
            cout << "writing..." << endl;
            if (!error)
            {
                cout << "dataTx sent: " << dataTx << endl;
                dataTx[0] = '\0';

                socket_.async_read_some(boost::asio::buffer(dataRx, max_length),
                    boost::bind(&Session::handle_read, this,
                    boost::asio::placeholders::error,
                    boost::asio::placeholders::bytes_transferred));
            }
            else
            {
                delete this;
            }
        }

        string getFactorization() const
        {
            //Do something
        }

        bool isValidData()
        {
            locale loc; 
            for (int i = 0; i < strlen(dataRx); i++)
                if (!isdigit(dataRx[i],loc))
                    return false;

            return true;
        }

    private:
        tcp::socket socket_;
        static const size_t max_length = 100;
        char dataRx[max_length];
        char dataTx[max_length*2];
};

class Server
{
    public:
        Server(boost::asio::io_service& io_service, short port)
            : io_service_(io_service),
            acceptor_(io_service, tcp::endpoint(tcp::v4(), port))
        {
            Session* new_session = new Session(io_service_);
            acceptor_.async_accept(new_session->socket(),
                boost::bind(&Server::handle_accept, this, new_session,
                boost::asio::placeholders::error));
        }

        void handle_accept(Session* new_session, const boost::system::error_code& error)
        {
            if (!error)
            {
                new_session->start();
                new_session = new Session(io_service_);
                acceptor_.async_accept(new_session->socket(),
                    boost::bind(&Server::handle_accept, this, new_session,
                    boost::asio::placeholders::error));
            }
            else
            {
                delete new_session;
            }
        }

    private:
        boost::asio::io_service& io_service_;
        tcp::acceptor acceptor_;
};

int main(int argc, char* argv[])
{
    cout << "Server is runing..." << endl;
    try
    {
        boost::asio::io_service io_service;

        int port = 13;
        Server s(io_service, port);
        cout << "Server is run!" << endl;
        io_service.run();
    }
    catch (boost::system::error_code& e)
    {
        std::cerr << e << "\n";
    }
    catch (std::exception& e)
    {
        std::cerr << "Exception: " << e.what() << "\n";
    }

    return 0;
} 
```

服务器的输出

```
Server is runing...
Server is run!
reading...
Data: 12
writing...
dataTx sent: 13    //just send back received ++number
reading...
Data: 
```

您的帮助将不胜感激

========

添加

好的，我明白了。但是检查 ErrorCode == boost::asio::error::eof 不起作用...我做错了什么？

```
else if (ErrorCode == boost::asio::error::eof)
{
    cout << "boost::asio::error::eof in OnReceive!" << endl;
}
else 
{
    cout << "ERROR! OnReceive..." << ErrorCode << endl;
    DoClose();
} 
```

打印出来的`ERROR! OnReceive...system:10009`似乎是我的比较不正确

========

添加

我找到了根本原因。我已经声明了使用`async_receive`（而不是`async_read_some`）并将这些行换成`main`了

```
ClientThread.join();
Client.Close(); 
```

现在它工作正常！

现在我正在尝试同时从/向套接字读取和写入数据（因为客户端应该能够在收到来自服务器的应答之前发送额外的请求。

在`OnConnect`函数中，我创建了 boost 线程：

```
boost::thread addMsgThread(boost::bind(&TCPClient::addMsgLoop, this));
boost::thread receivingThread(boost::bind(&TCPClient::startReceiving, this));
boost::thread sendingThread(boost::bind(&TCPClient::startSending, this)); 
```

有实现

```
void TCPClient::startReceiving()
{
    cout << "receiving..." << endl;
    m_RecieveBuffer[0] = '\0';
    m_Socket.async_receive(boost::asio::buffer(m_RecieveBuffer, m_BufLen),
        boost::bind(&TCPClient::receivingLoop, this, boost::asio::placeholders::error)); //runtime error here
    cout << "m_RecieveBuffer = " << m_RecieveBuffer << endl;
}

void TCPClient::receivingLoop(const boost::system::error_code& ErrorCode)
{
    cout << "receiving..." << endl;
    if (ErrorCode == 0)
    {
        cout << "m_RecieveBuffer = " << m_RecieveBuffer << endl;

        m_Socket.async_receive(boost::asio::buffer(m_RecieveBuffer, m_BufLen),
            boost::bind(&TCPClient::receivingLoop, this, boost::asio::placeholders::error));
    }
    else 
    {
        cout << "ERROR! receivingLoop..." << ErrorCode << endl;
        DoClose();
    }
}

void TCPClient::addMsgLoop()
{
    while (true)
    {
        string tmp;
        cin >> tmp;

        cout << "Entered: " << tmp << endl;
        tmp += "\0";

        try
        {
            msgQueue.push(tmp);
        }
        catch(exception &e)
        {
            cerr << "Canno add msg to send queue... " << e.what() << endl;
        }
    }
} 
```

问题`receive`与`send`线程相同：运行时错误（在 boost 库中的某处写入访问冲突）。

```
void TCPClient::startReceiving()
{
     ...
     m_Socket.async_receive(); //runtime error here
} 
```

在后续版本中一切正常（但我不知道如何在回答之前实现多次发送）。谁能告诉我如何解决这个问题或如何通过另一种方式实现这个问题？可能汇集可以提供帮助，但我现在确信这是一个好方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T07:52:06.007

[boost::asio::ip::tcp::socket::async_read_some](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/basic_stream_socket/async_read_some.html)顾名思义，不能保证读取完整的数据。它将`error`对象设置为`boost::asio::error::eof`客户端完成写入的时间。

你得到的错误是因为这个：

**服务器部分**

```
 if (!error)
        {
            ...
        }
        else
        {
            delete this;
        } 
```

在`else`块中，您假设这是一个错误情况并关闭连接。这并非总是如此。在`else`您需要检查之前`error == boost::asio::error::eof`。

除了在读取处理程序中，您应该继续收集缓冲区中读取的任何内容，直到您点击`error == boost::asio::error::eof`. 只有这样，您才应该验证读取数据并写回客户端。

查看[示例](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/examples.html)部分中的 HTTP 服务器[1](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/examples.html#boost_asio.examples.http_server)、[2](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/examples.html#boost_asio.examples.http_server_2)、[3](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/examples.html#boost_asio.examples.http_server_3)实现。

**更新：回答更新的问题**

更新的代码存在线程同步问题。

1.  `msgQueue`从两个或多个线程同时访问，没有任何锁。
2.  可以同时调用同一个套接字上的读取和写入。

如果我正确理解了您的问题，您希望：

1.  接受用户输入并将其发送到服务器。
2.  保持同时接收服务器的响应。

您可以为这两个任务使用两个[boost::asio::io_service::strands](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/io_service__strand.html)。使用 Asio 时，链是同步任务的方式。Asio 确保在一个链中发布的任务是同步执行的。

1.  在`strand1`发布一个`send`看起来像这样的任务：`read_user_input -> send_to_server -> handle_send -> read_user_input`

2.  在`strand2`发布一个`read`看起来像这样的任务：`read_some -> handle_read -> read_some`

这将确保`msgQueue`不会从两个线程同时访问。使用两个套接字读取和写入服务器，以确保不会在同一个套接字上调用同时读取和写入。

# sugarcrm - 创建面向公众的 SugarCRM 表单以创建联系人

> ID：12990841
> 
> 赞同：2
> 
> 时间：2012-10-20T17:19:56.923
> 
> 标签：sugarcrm

如何创建一个面向公众的 SugarCRM 表单以便将联系人输入到 SugarCRM 数据库？

我是否需要创建自己的表单并创建查询以将字段插入到适当的客户表中，或者是否有一种流线型的方式来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T01:49:43.047

查看 Sugar 的 Web-to-Lead，您可以通过 Campaigns 模块创建基本表单。虽然这会将数据发布到潜在客户模块，而不是联系人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-17T14:26:44.017

您将需要创建自定义表单。然后当表单提交时，发送 REST/SOAP 调用（set_entry）来创建新的联系人。

您需要知道网络到潜在客户仅用于创建潜在客户记录（在这种情况下还需要营销活动）。

# ruby-on-rails - 如何使用工头导出到暴发户？

> ID：12990842
> 
> 赞同：19
> 
> 时间：2012-10-20T17:20:08.777
> 
> 标签：ruby-on-rails, configuration, upstart, foreman

我正在尝试将我的应用程序导出到另一个进程管理格式/系统（特别是[upstart](http://upstart.ubuntu.com/)）。在这样做的过程中，我遇到了许多障碍，主要是由于缺乏文档。

作为非 root 用户，我运行了以下命令（如此处所示[）](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)：

```
-bash> foreman export upstart /etc/init
ERROR: Could not create: /etc/init 
```

由于权限不足，我“无法创建”目录，所以我使用了`sudo`：

```
-bash> sudo foreman export upstart /etc/init
Password:
ERROR: Could not chown /var/log/app to app 
```

因为没有名为`app`.

`app`来自哪里？

我应该如何使用 forman 导出到暴发户？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-20T17:30:15.343

`app` *应用程序的名称和用户的名称*都是[默认](https://github.com/ddollar/foreman/blob/master/lib/foreman/export/base.rb#L46)的，当不使用相应的选项（和）时*，应用程序应该运行*。有关可用选项，请参阅[工头手册页](http://ddollar.github.com/foreman/)，但请注意，在撰写本文时，官方概要不包括**[options]**：`--app``--user`

 **```
foreman export [options] <format> [location] 
```

例子：

```
-bash> sudo foreman export --app foo --user bar upstart /etc/init
Password:
[foreman export] writing: foo.conf
[foreman export] writing: foo-web.conf
[foreman export] writing: foo-web-1.conf
[foreman export] writing: foo-worker.conf
[foreman export] writing: foo-worker-1.conf 
```

结果：

```
-bash> l /etc/init/
total 80
drwxr-xr-x  12 root  wheel   408 20 Oct 09:31 .
drwxr-xr-x  94 root  wheel  3196 20 Oct 08:05 ..
-rw-r--r--   1 root  wheel   236 20 Oct 09:31 foo-web-1.conf
-rw-r--r--   1 root  wheel    41 20 Oct 09:31 foo-web.conf
-rw-r--r--   1 root  wheel   220 20 Oct 09:31 foo-worker-1.conf
-rw-r--r--   1 root  wheel    41 20 Oct 09:31 foo-worker.conf
-rw-r--r--   1 root  wheel   315 20 Oct 09:31 foo.conf

-bash> l /var/log/foo/
total 0
drwxr-xr-x   2 bar     wheel    68 20 Oct 09:31 .
drwxr-xr-x  45 root    wheel  1530 20 Oct 09:31 .. 
```**

# ruby - 确定 ruby 线程状态

> ID：12990844
> 
> 赞同：3
> 
> 时间：2012-10-20T17:20:26.797
> 
> 标签：ruby, multithreading, web-scraping

我有一个 Ruby 脚本使用线程通过 HTTP 获取 HTML 页面：

```
require "thread"
require "net/http"

q = Queue.new
q << "http://google.com/"
q << "http://rubygems.org/"
q << "http://twitter.com/"
t = Thread.new do
  loop do
    html = Net::HTTP.get(URI(q.pop))
    p html.length
  end
end

10.times do
  puts t.status
  sleep 0.3
end 
```

我正在尝试确定线程从给定来源获取内容时的状态。这是我得到的输出：

```
run
219
sleep
sleep
7255
sleep
sleep
sleep
sleep
sleep
sleep
65446
sleep 
```

尽管线程实际上正在工作，但它几乎一直处于“睡眠”状态。我知道它正在等待 HTTP 类检索内容。最后的“睡眠”不同：线程试图从空队列中弹出值并切换到“睡眠”状态，直到队列中有新内容。

我希望能够检查线程中发生了什么：它是在 HTTP 上工作还是只是在等待新工作出现？

正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:47:59.973

*睡眠*状态似乎涵盖了I/O 等待和同步阻塞，因此您将无法使用线程状态来了解您是在处理还是等待。相反，您可以使用线程本地存储来进行通信。用于`Thread#[]=`存储一个值，并将`Thread#[]`其取回。

```
require "thread"
require "net/http"

q = Queue.new
q << "http://google.com/"
q << "http://rubygems.org/"
q << "http://twitter.com/"
t = Thread.new do
  loop do
    Thread.current[:status] = 'waiting'
    request = q.pop
    Thread.current[:status] = 'fetching'
    html = Net::HTTP.get(URI(request))
    Thread.current[:status] = 'processing'
    # Take half a second to process it.
    Time.new.tap { |start_time| while Time.now - start_time < 0.5 ; end }
    p html.length
  end
end

10.times do
  puts t[:status]
  sleep 0.3
end 
```

我添加了一个短循环来消耗时间。没有它，您不太可能在输出中看到“处理”：

```
219
processing
fetching
processing
7255
fetching
fetching
fetching
62471
processing
waiting
waiting 
```

# parsing - 使用 Parsec 解析数据并省略注释

> ID：12990847
> 
> 赞同：5
> 
> 时间：2012-10-20T17:20:33.520
> 
> 标签：parsing, haskell, parsec

我正在尝试编写一个 Haksell Parsec Parser，它将文件中的输入数据解析为 LogLine 数据类型，如下所示：

```
--Final parser that holds the indvidual parsers.
final :: Parser [LogLine]
final = do{ logLines <- sepBy1 logLine eol
        ; return logLines
        }

--The logline token declaration
logLine :: Parser LogLine
logLine = do
name <-  plainValue -- parse the name (identifier)
many1 space -- parse and throw away a space
args1 <- bracketedValue -- parse the first arguments
many1 space -- throw away the second sapce
args2 <- bracketedValue -- parse the second list of arguments
many1 space -- 
constant <- plainValue -- parse the constant identifier
space
weighting <- plainValue --parse the weighting double
space
return $ LogLine name args1 args2 constant weighting 
```

它可以很好地解析所有内容，但是现在我需要向文件中添加注释，并且我必须修改解析器以使其忽略它们。它应该支持仅以“--”开头并以“\n”结尾的单行注释我尝试如下定义注释标记：

```
comments :: Parser String
comments = do 
    string "--"
    comment <- (manyTill anyChar newline)
    return "" 
```

然后将其插入`final`解析器，如下所示：

```
final :: Parser [LogLine]
final = do 
        optional comments
        logLines <- sepBy1 logLine (comments<|>newline)
        optional comments
        return logLines 
```

它编译得很好，但它不解析。我尝试了一些小的修改，但最好的结果是将所有内容解析到第一个评论，所以我开始认为这不是这样做的方法。PS：我见过这个[Similar Question](https://stackoverflow.com/questions/12940490/how-would-i-strip-out-comments-from-a-file-with-parsec)，但它与我想要实现的目标略有不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T19:45:25.580

如果我正确理解您在评论中对格式的描述，您的格式示例将是

```
name arg1 arg2 c1 weight
-- comment goes here 
```

可选地后跟进一步的日志行和/或评论。

那么你的问题是日志行和注释行之间有一个换行符，这意味着`comments`分隔符解析器的部分失败 -`comments`必须以 - 开头`"--"`- 没有消耗输入，所以`newline`尝试并成功。然后下一行以`"--"`which make `plainValue`fail 而没有消耗输入开始，从而结束`sepBy1`.

解决方案是让分隔符首先使用一个换行符，然后使用如下尽可能多的注释行：

```
final = do
    skipMany comments
    sepEndBy1 logLine (newline >> skipMany comments) 
```

通过允许序列以分隔符（`sepEndBy1`而不是`sepBy1`）结束，最后的任何注释行都会`LogLine`自动跳过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:31:04.560

我理解您的问题的方式是，每一行都是评论或日志行。如果是这样，`final`应该看起来像这样：

```
final :: Parser [LogLine]
final = do 
        logLines <- sepBy1 (comment<|>logLine) newline
        return logLines 
```

# php - 在mysql中查询多行作为变量

> ID：12990849
> 
> 赞同：0
> 
> 时间：2012-10-20T17:20:50.603
> 
> 标签：php, mysql, sql

> **可能重复：**
> [PHP - 从 MySQL 读取单个记录的简单方法](https://stackoverflow.com/questions/811153/php-simple-way-to-read-single-record-from-mysql)

我想查询 mysql 中的多行作为变量。例如：

```
SELECT name, tid FROM term_data WHERE vid = 2 
```

这是结果：

```
name | tid
-----|----
Jack | 55
Tony | 87
John | 32 
```

然后我想使用while：

```
while (...) {

print "My name is: $name and my ID is: $tid";
//name and tid should be printed from database. 

} 
```

我可以查询一行并将其放入 a 中，`while`但这怎么可能？

![在此处输入图像描述](../Images/7e16e8004900835cf67b972b7d927844.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:30:13.407

```
<?php
//Conection
...
$query= "SELECT name, tid FROM term_data WHERE vid = 2";

if (query_run=mysql_query($query)) {
while ($query_row=mysql_fetch_assoc($query_run)) {
$name=$query_row['name'];
$tid=$query_row['tid'];

echo 'My name is'.$name.'and my ID is'.$tid;
}
}
else {
echo mysql_error();
}
?> 
```

唯一剩下的就是解决取决于您的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:30:52.853

[PHP手册中的示例](http://www.php.net/manual/en/mysqli-result.fetch-assoc.php#example-1716)：

```
<?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT Name, CountryCode FROM City ORDER by ID DESC LIMIT 50,5";

if ($result = mysqli_query($link, $query)) {

    /* fetch associative array */
    while ($row = mysqli_fetch_assoc($result)) {
        printf ("%s (%s)\n", $row["Name"], $row["CountryCode"]);
    }

    /* free result set */
    mysqli_free_result($result);
}

/* close connection */
mysqli_close($link);
?> 
```

# google-apps-script - Google Apps 脚本中国防部网站的 SSL 验证

> ID：12990851
> 
> 赞同：4
> 
> 时间：2012-10-20T17:21:18.997
> 
> 标签：google-apps-script

我们最近遇到了一个错误，该错误似乎是由于 Google 在 Google Apps for Gov 服务上处理 Google Apps 脚本中 SSL 信任的方式发生了变化而引起的。我们有一些 Apps Script 系统——特别是两个是服务器监控系统和基于 Web 服务的日历同步工具——它们通过 SSL 连接与我们端的服务器进行通信。这几个月来一直运行良好，直到 2012 年 9 月 20 日晚上 9 点 15 分，几乎所有这些（和类似的）连接都开始失败，因为无法信任对我们来说是强制性的 DOD 签名证书东西的。

更奇怪的是，这有点不一致——也就是说，我可以成功地要求谷歌连接到[https://usuportal.usuhs.mil](https://usuportal.usuhs.mil)并且它加载得很好。但是，如果我尝试以下任何一种：

https://www.us.army.mil

https://www.nps.edu

https://www.disa.mil

https://learning.usuhs.edu

......他们都失败了。我怀疑这与某些服务器将自己绑定到的根证书有关，足以让所有将“DOD Root CA-2”证书作为终结者绑定到失败 - 对我们来说是一个真正的问题。

对于我们的服务器监控，我们已经能够通过在 Apps Script 中禁用 SSL 验证来临时解决这个问题，但是该选项不可用于访问 web 服务 [编辑：我们正在使用 SoapService 处理 WS 请求和返回]，让我们无法只要存在此问题，就可以继续使用这些工具。不过，鉴于我们可以准确识别相关变化何时发生，我希望谷歌至少（相对）能够快速查明发生了什么。

如果它有帮助，下面是一个快速的 Google Apps 脚本功能，它将根据它是否能够信任端点的 SSL 证书来注销成功/失败。

```
function checkSSL()
{
// The server to go look at to see if we can trust it.
// Again, usuportal.usuhs.mil has been observed to work; all others tested have failed
//
var serverToTest = "https://www.disa.mil";

// options defines the options which will be used by the UrlFetchApp to define its behavior.
// In this case, we may be interested in disabling SSL validation.
//

var options =
{
    "validateHttpsCertificates" : false
};

// First, try without disabling validation
//
try {
    response = UrlFetchApp.fetch(serverToTest);
    Logger.log("I was able to reach " + serverToTest +" without disabling certificate validation.");
}
catch (e)
{
    // Logger.log(e.toString());
    Logger.log("I was not able to reach " + serverToTest +" without disabling certificate validation.");
}

// Now let's try it with validation disabled
//
try {
    response = UrlFetchApp.fetch(serverToTest, options);
    Logger.log("I was able to reach " + serverToTest +" with certificate validation disabled.");
}
catch (e)
{
    // Logger.log(e.toString());
    Logger.log("I was not able to reach " + serverToTest +" with certificate validation disabled. Maybe it's really just down?");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:04:16.853

请将此记录在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中。我已经能够在内部深入研究这一点，这实际上是我们认为的问题。将其登录到问题跟踪器后，您将能够跟踪此问题的进度。

我们可能会通过为 SoapSerivce 添加类似的“validateHttpsCertificates”标志来解决这个问题，就像 UrlFetchApp

# jquery - 谷歌地图 + Jquery 自动完成 + 国家过滤器

> ID：12990856
> 
> 赞同：1
> 
> 时间：2012-10-20T17:22:08.513
> 
> 标签：jquery, google-maps, google-maps-api-3

如果我使用带有 jquery ui 自动完成功能的谷歌地图，是否可以按国家/地区过滤？

所以，如果我只想在美国显示结果，我还可以使用以下代码：

```
componentRestrictions: {country: "us"} 
```

它似乎不起作用，如下所示：

[http://jsfiddle.net/Rr5PL/56/](http://jsfiddle.net/Rr5PL/56/)

以前做过这件事的人的任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:24:36.343

我已经像这样使用它，它对我有用。

```
 var options = {componentRestrictions: {country: 'uk'}};
    var input = document.getElementById('points');
        var autocomplete = new google.maps.places.Autocomplete(input,options); 
```

points 是应该与自动完成一起使用的文本字段的 id

# sass - Sass 占位符 (%) 不适用于最新版本 (3.2.1)

> ID：12990857
> 
> 赞同：0
> 
> 时间：2012-10-20T17:22:27.920
> 
> 标签：sass

我在 Mac OS X (10.7.4) 上安装了最新版本的 Sass (3.2.1 Media Mark)。

```
$ sass -v
Sass 3.2.1 (Media Mark) 
```

当我尝试创建占位符时（例如）

```
#page-container {
  position: relative;
}

%sample {background: red;}

// The structure
@import 'header'; 
```

我收到以下错误：

```
"Syntax error: Invalid CSS after "}": expected selector or at-rule,
was "%sample {border..." on line 65 of 
/Applications/XAMPP/xamppfiles/htdocs/(project_path)/assets/scss/application.scss" 
```

我以为卸载并重新安装 Sass 会解决问题，但事实并非如此。我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:22:53.147

**嗯，我发现了问题！** 我正在使用[Scout](http://mhs.github.com/scout-app/)应用程序，它会自动监视文件夹/项目中的更改。**我已经重新安装了它，现在它可以工作了。**看起来应用程序正在使用它自己的 Sass 版本（或类似的东西），这有点奇怪！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T21:00:16.667

您是否重新启动了终端？我在升级 Sass 时遇到了同样的问题。我在与运行手表的终端不同的终端上升级了 Sass，但我无法从那里使用新的 Sass 功能。我可以在用来升级 Sass 的终端上使用它们。

如果您已关闭并打开所有终端，但仍然无法正常工作，请尝试重新启动。

# php - Threaded/Nested/Hierachial Comments

> ID：12990865
> 
> 赞同：0
> 
> 时间：2012-10-20T17:23:20.277
> 
> 标签：php, sql

I'm having troubles working something out. I have just used a threaded comment example online, tested it against manually inputted data and works perfectly.

![enter image description here](../Images/368983b9222c3dd89886c28e98c40dad.png)

But this setup is kind of strange. It uses a PATH method, so the first comment has a path of 01, a reply to that comment has a path of 01_01 and another reply to the first comment would have 01_02\. You can see the relative paths in my screenshot (above), next to each name.

This method performs really well, as I have tested it against many, many comments. The problem I have is calculating the next reply path. For example, let's say my user clicks [reply] on Jeremy Clarkson's comment, which has a path of 01_01_01\. The next sequence to this would be 01_01_02, but that has already been used by Kim Bauer's comment. I thought I could do a little query `SELECT * FROM comments WHERE path LIKE '01_01_%'` and select the last row and add 1 to it, but the comment from Chloe O'Brien has 01_01_01_01, which would affect this result.

Can somebody please explain how I can calculate the next correct path for a reply?

**My Fix:**

I calculate the next available path by doing this:

```
SELECT path
FROM blog_comments
WHERE path LIKE '01_01___'
ORDER BY path DESC
LIMIT 1

$last_path = $row[0];
$last_path_suffix = substr($last_path,strrpos($last_path,'_')+1);
$next_path_suffix = str_pad($last_path_suffix+1,2,'0',STR_PAD_LEFT);
$next_path = substr($last_path,0,strlen($last_path)-strlen($last_path_suffix)).$next_path_suffix; 
```

**If anybody would like to use this method, the printing goes something like this:**

```
$SQL = "SELECT * FROM comments ORDER BY path ASC;";

while($row = $STH->fetch()) {
    $nesting_depth = strlen($row['path']) - strlen(str_replace('_','',$row['path']));
    $left_margin = $nesting_depth * 40; // 40 pixels nesting indent

    echo '<div class="comment_item" style="margin-left:'.$left_margin.'px;">';
        echo '<strong>'.htmlspecialchars($row['author_name']).'<br>';
        echo htmlspecialchars($row['comment']).'<br>';
    echo '</div>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:26:48.933

You could search for exactly two digits using two underscores `__`. Underscore is a wildcard that matches exactly one unknown character. And you should escape the literal underscores since `_` is a wildcard character.

```
SELECT * FROM comments WHERE path LIKE '01\_01\___' ESCAPE '\' 
```

# variables - this 函数是否包含局部变量？

> ID：12990878
> 
> 赞同：0
> 
> 时间：2012-10-20T17:25:09.853
> 
> 标签：variables, assembly, stack

我正在阅读的书说这个函数有一个局部变量。它还说这个函数有一个局部变量很重要，因为它是递归的。也许我只是瞎了眼，或者我不明白局部变量在汇编中是如何工作的，但我没有看到。

```
.type factorial, @function
factorial:
    push %rbp               # Save old base pointer.
    mov  %rsp, %rbp         # Copy stack pointer to base pointer.
    mov  16(%rbp), %rax     # Save the argument in %rax.
    cmp  $1, %rax           # End of the factorial.
    je   end_factorial
    dec  %rax               # Decrement %rax.
    push %rax               # Push onto stack for next call to factorial.
    call factorial
    mov  16(%rbp), %rbx     # %rax has return value, so load arg into %rbx.
    imul %rbx, %rax         # Multiply that by result of last call to factorial.

end_factorial:
    # Restore stack pointer and base pointer to where they were
    # before function call.
    mov %rbp, %rsp
    pop %rbp
    ret 
```

可以将寄存器视为局部变量吗？我虽然局部变量是用类似的东西实现的`sub $8, %rsp`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:20:09.927

局部变量不是通过它们的实现来定义的，而是通过它们的语义来定义的。

## 定义

变量是**local**，如果函数的每次调用都为该变量获取自己的独立值，这就是为什么您可以说变量的值是“函数本地的”。

由于可以通过使用寄存器来实现此行为，因此这是一个完全有效的实现。

## 保存和恢复局部变量

但是，由于某些寄存器被认为是调用者保存的，因此在调用嵌套函数之前可能必须将这些值放入堆栈，否则这些值将丢失。从嵌套调用返回到原始函数后，可以将值从堆栈中恢复到寄存器中。

正如已经提到的，访问寄存器比访问堆栈快得多。因此，只要有可能，它们就优先于主存储器。

但是，我不知道为什么它不能没有`imul 16(%rbp), %rax`额外的移动操作。毕竟，该`imul`指令允许源操作数在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T18:08:33.047

寄存器是放置局部变量的完美位置。事实上，它比内存更受欢迎，因为访问速度要快得多。我在[http://ellcc.org/demo/](http://ellcc.org/demo/)修改了我的 LLVM 演示页面来编译这个阶乘算法。对于 x86-64，它提供了

```
 .file   "/tmp/webcompile/_23578_0.c"
.text
.globl  fact
.align  16, 0x90
.type   fact,@function
fact:                                   # @fact
.cfi_startproc
# BB#0:                                 # %entry
movl    $1, %eax
cmpq    $2, %rdi
jl  .LBB0_2
.align  16, 0x90
.LBB0_1:                                # %if.end
                                     # =>This Inner Loop Header: Depth=1
imulq   %rdi, %rax
decq    %rdi
cmpq    $1, %rdi
jg  .LBB0_1
.LBB0_2:                                # %return
ret
.Ltmp0:
.size   fact, .Ltmp0-fact
.cfi_endproc 
```

请注意，在这种情况下，编译器摆脱了递归，只使用寄存器来进行计算。

# javascript - 为什么我不能直接分配函数？

> ID：12990883
> 
> 赞同：1
> 
> 时间：2012-10-20T17:25:45.130
> 
> 标签：javascript, javascript-events

此代码调用该`f()`函数：

```
<p id="firstp">Hello!</p> 
<script>
  function f() {
    doSomething();
  };
  document.getElementById("firstp").onmouseover = function() {
      f();
  };
</script> 
```

然而，如果我这样写，它就会停止工作：

```
 document.getElementById("firstp").onmouseover = f(); 
```

为什么我直接调用函数时没有设置事件处理程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T17:28:01.743

因为您不想调用该函数，您只想告诉浏览器它应该在鼠标悬停事件发生时调用它。`f()`（函数名称后的圆括号）调用函数并分配给返回的`.onmouseover`内容。`f`您想将引用分配给`f`to `.onmouseover`，所以您要寻找的是

```
document.getElementById("firstp").onmouseover = f; 
```

# c++ - 为什么链表不是线程安全的？

> ID：12990885
> 
> 赞同：0
> 
> 时间：2012-10-20T17:25:59.353
> 
> 标签：c++, multithreading

好的，最近我一直在考虑线程安全，我想知道为什么链表或双端队列不是线程安全的。

假设我们有一个像这样的简单链表类：

```
class myLinkedList {
private:
    myLinkedList* next;
    int m_value;

public:
    myLinkedList() { next = NULL; m_value = 0; }
    void setValue(int value) { m_value = value; }
    int getValue() { return m_value; }
    void addNext(int value) { next = new myLinkedList; next->setValue(value); }
    myLinkedList* getNext() { return next; }
}; 
```

现在我只想在末尾添加新元素并在开头删除元素（先读取它们然后删除它们）。我基本上只是得到第一个的地址`next`，删除第一个元素并记住`next`作为我的新第一个元素。对于添加新元素，我只记得最后一个元素，当我添加一个新元素时，我只设置一个新元素并将我的新元素`next`记住`next`为最后一个元素。

在这种情况下，线程的问题在哪里？作家和读者不应该对此有任何问题，因为他们从不相互交流。这不像使用数组或向量（我很清楚它为什么会导致问题）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T17:52:28.743

对您问题的评论是正确的，您的实施将不起作用。但是，要回答实际问题，您的代码中有一个竞争条件：

```
void addNext(int value) { next = new myLinkedList; next->setValue(value) } 
```

假设线程 A 执行：

```
next = new myLinkedList; 
```

现在线程 A 被抢占，线程 B 也执行相同的指令。这意味着`next`now 并不指向线程 A 希望它指向的任何位置，而是指向线程 B 设置它的任何位置。线程 B 继续执行：

```
next->setValue(value) 
```

此后不久（甚至同时），线程 A 也执行上述操作。

你能看出问题吗？线程 A 调用`next->setValue()`B`next`并且 A`next`丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:46:44.457

当您使用`std::list`在多个线程中共享的容器（或其他任何东西）的类实例时，您需要使用互斥锁或类似机制来保护并发访问，以获取线程保存行为。

**更新**

如您所见的构造

```
 void setValue(int value) { m_value = value; }
 int getValue() { return m_value; }
 void addNext(int value) { next = new myLinkedList; next->setValue(value); } 
```

不是原子操作。因此，只要它们不在受保护的上下文中使用，它们就不是线程安全的。对于像`std::list`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T17:58:02.943

以下是将问题中给出的代码转换为最基本的锻炼程序：

```
class myLinkedList {
private:
    myLinkedList* next;
    int m_value;

public:
    myLinkedList() : next(0), m_value(0) { }
    int  getValue() const { return m_value; }
    void setValue(int value) { m_value = value; }
    void addNext(int value) { next = new myLinkedList; next->setValue(value); }
    const myLinkedList *getNext() const { return next; }
};

#include <iostream>

static void print_list(const myLinkedList *rover)
{
    std::cout << "List:";
    while (rover != 0)
    {
        std::cout << " " << rover->getValue();
        rover = rover->getNext();
    }
    std::cout << std::endl;
}

int main()
{
    myLinkedList mine;
    print_list(&mine);
    mine.addNext(13);
    print_list(&mine);
    mine.addNext(14);
    print_list(&mine);
    mine.setValue(3);
    print_list(&mine);
    mine.addNext(15);
    print_list(&mine);
} 
```

该程序的输出是：

```
List: 0
List: 0 13
List: 0 14
List: 3 14
List: 3 15 
```

如您所见，它不是普通的链表；它是最多两个项目的列表。在 下运行程序（称为`ll`链表）`valgrind`，我得到：

```
==31288== Memcheck, a memory error detector
==31288== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==31288== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==31288== Command: ll
==31288== 
List: 0
List: 0 13
List: 0 14
List: 3 14
List: 3 15
==31288== 
==31288== HEAP SUMMARY:
==31288==     in use at exit: 6,239 bytes in 36 blocks
==31288==   total heap usage: 36 allocs, 0 frees, 6,239 bytes allocated
==31288== 
==31288== LEAK SUMMARY:
==31288==    definitely lost: 48 bytes in 3 blocks
==31288==    indirectly lost: 0 bytes in 0 blocks
==31288==      possibly lost: 0 bytes in 0 blocks
==31288==    still reachable: 6,191 bytes in 33 blocks
==31288==         suppressed: 0 bytes in 0 blocks
==31288== Rerun with --leak-check=full to see details of leaked memory
==31288== 
==31288== For counts of detected and suppressed errors, rerun with: -v
==31288== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 1 from 1) 
```

如果代码是一个有效的链表实现，那么在`addNext()`.

基本上，您创建一个节点，`new`然后需要将其挂接到列表中。如果另一个线程同时尝试执行此操作，则您有一个可能导致结构不一致的时间窗口。为了线程安全，您需要在修改列表时确保互斥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T18:12:44.067

看似简单的事情有几个线程安全问题

```
next = new myLinkedList; 
```

根据硬件，`next`可以通过线程切换来破坏分配；也就是说，可能会写入部分值，然后处理器在写入其余值之前更改为不同的线程。然后另一个线程会看到一个垃圾值。

对于多个处理器，还有一个额外的问题是分配给的值`next`被写入执行存储的处理器的本地缓存。其他处理器有自己的缓存，因此它们可能看不到新值。或者他们可能会看到它，但看不到调用写入的`new myLinkedList`值，或者可能写入的值`next->setValue(value);`。

或者其他事情可能会出错。

当另一个线程正在读取或写入相同的数据位置时，从一个线程写入数据位置是**数据竞争**，并且具有数据竞争的程序的行为是未定义的。在实践中，这意味着它可以正常工作，直到您为最重要的客户演示该程序，那时它会严重崩溃。

# ios - 从 NSMutableArray xcode 中删除对象

> ID：12990888
> 
> 赞同：0
> 
> 时间：2012-10-20T17:26:08.997
> 
> 标签：ios, cocoa-touch, uiimageview, nsmutablearray

这个想法是创建多个对象，当单击按钮时，第一个创建的对象将首先被删除，依此类推。例如，它会创建对象#1，然后是 2，然后是 3，当第一次单击按钮时，它将首先删除 1，然后是 2，然后是 3。

这是我在数组中创建项目的代码：

```
//array of imageviews
aryImages= [[NSMutableArray alloc] init];
//creation code for the images
CGRect frame = CGRectMake(480, 180, 60, 55);
imgViewPicture = [[UIImageView alloc] initWithFrame:frame];
imgViewPicture.image=[UIImage imageNamed:@"flower.png"];
[self.view addSubview:imgViewPicture];

[aryImages addObject:imgViewPicture]; 
```

然后这里是运动代码

```
for (int x = 0; x < [aryImages count]; x++) {
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.5];
    [UIView setAnimationCurve:UIViewAnimationCurveLinear];
    [UIView setAnimationDelegate:self];
    [imgViewPicture setFrame:CGRectMake(120, 180, 60, 55)];
    [UIView commitAnimations];
} 
```

这是删除某个 x 位置以外的项目的代码：

```
 for (int x = 0; x < [aryImages count]; x++) {
        UIImageView *imgViewInQuestion = (UIImageView *)[aryImages objectAtIndex:x];
        if (imgViewInQuestion.frame.origin.x>=120) {
            [aryImages removeObjectAtIndex:x];
        }
    } 
```

不幸的是，这不起作用。对我有什么想法或可能的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-26T10:25:47.333

```
-(IBAction)btnDelete_Clicked:(id)sender
{
    NSInteger x=0;
    if(x <= arrImages.count)
    {
        [arrImages removeObjectAtIndex:x];
        x=x+1;
        NSLog(@"%@",arrImages);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T23:46:13.157

这很简单。
你有一个数组，例如`aryImages`.
使用整数：

```
int x=0;

 -(IBAction)removeObject
    {
    if(x < = [aryImages count])
    {
        [aryImages removeObjectAtIndex:x];
        x+=1;
    }

    } 
```

# jquery - Jquery AJAX 方法仅适用于 IE

> ID：12990889
> 
> 赞同：0
> 
> 时间：2012-10-20T17:26:13.783
> 
> 标签：jquery

这是我的 jquery AJAX 方法，它仅适用于 Ie，但不适用于 chrome 或 firefox。我的代码是

```
 <!DOCTYPE html>
  <html>
 <head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js?ver=1.3.2">     
 </script>
<script>
$(document).ready(function() {
    $("button").click(function() {
        $.ajax({
            url: "http://50.116.19.49/rest/user.json",
            success: function(result) {
                $("div").text(result);
            }
        });
    });
});
</script>
</head>
<body>

<button>Get JSON data</button>
<div></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:50:44.700

You need JSONP. Luckily for you jQuery comes with some good support for it. See this IBM article:

[http://www.ibm.com/developerworks/library/wa-aj-jsonp1/](http://www.ibm.com/developerworks/library/wa-aj-jsonp1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:52:17.610

你可以用[jquery.xdomainajax.js](https://raw.github.com/padolsey/jQuery-Plugins/master/cross-domain-ajax/jquery.xdomainajax.js)

记住要明确`type GET`它。

```
 $("button").click(function() {
    jQuery.ajax({
        url: "http://50.116.19.49/rest/user.json",
        type: 'GET',
        success: function(result) {
            $("div").text(result.responseText);
        }
    });
});​ 
```

这是一个[小提琴](http://jsfiddle.net/KNfVz/1/)。

# python - 如何构建将作业分配到 Python 中的线程/节点的代码？

> ID：12990891
> 
> 赞同：0
> 
> 时间：2012-10-20T17:26:22.417
> 
> 标签：python, cluster-computing, distributed-computing, distutils, setup.py

我有 python 代码，它需要一堆任务并将它们分发到集群上的不同线程或不同节点。我总是最终编写一个主脚本`driver.py`，它需要两个命令行参数：`--run-all`和`--run-task`. 第一个只是一个包装器，它遍历所有任务，然后调用`driver.py --run-task`每个任务作为参数传递。例子：

```
== driver.py ==
# Determine the current script
DRIVER = os.path.abspath(__file__)
(opts, args) = parser.parse_args()
if opts.run_all is not None:
  # Run all tasks
   for task in opts.run_all.split(","):
     # Call driver.py again with a specific task
     cmd = "python %s --run-task %s" %(DRIVER, task)
     # Execute on system
     distribute_cmd(cmd)
elif opts.run_task is not None:
  # Run on an individual task
  # code here for processing a task... 
```

然后用户会调用：

```
$ driver.py --run-all task1,task2,task3,task4 
```

每个任务都会被分发。

该函数`distribute_cmd`接受一个 shell 可执行命令，并以系统特定的方式发送到节点或线程。之所以`driver.py`要找到自己的名字并调用自己是因为`distribute_cmd`需要一个可执行的shell命令；例如，它不能采用函数名称。

这种考虑导致我设计了一个具有两种模式并且必须调用自身的驱动程序脚本。这有两个复杂性：（1）脚本必须找到自己的路径 via`__file__`和（2）在将其制作成 Python 包时，不清楚`driver.py`应该去哪里。它应该是一个可执行脚本，但如果我把它放在`setup.py`'s`scripts=`中，那么我将不得不找出脚本所在的位置（请参阅[从 Python distutils 中的 setup.py 查找脚本目录的正确方法？](https://stackoverflow.com/questions/12975540/correct-way-to-find-scripts-directory-from-setup-py-in-python-distutils)）。这似乎不是一个好的解决方案。

有什么替代设计？请记住，任务的分配必须产生一个可执行的命令，该命令可以作为字符串传递给`distribute_cmd`. 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:39:20.240

*   您正在寻找的是一个已经完全满足您需要的库，例如[`Fabric`](http://docs.fabfile.org)或[`Celery`](http://celeryproject.org/).
*   如果您不使用节点，我建议您使用`multiprocessing`.
*   [这是一个与这个](https://stackoverflow.com/questions/5618609/does-pythons-multiprocessing-pool-support-remote-subprocesses)稍微相似的问题

**为了能够远程执行**，您需要：

*   `ssh`访问该框，在这种情况下，您可以使用它`Fabric`来发送您的命令。
*   服务器`SocketServer`、tcp 服务器或任何可以接受连接的服务器。
*   将等待数据的代理或客户端，如果您使用代理，您也可以使用**代理**来处理您的消息。`Celery`允许您做一些管道，一个结束`puts`消息在**队列**中，而另一端`gets`消息来自队列。如果消息是要执行的命令，那么代理可以进行`os.system()`调用，或者调用`subprocess.Popen()`

**芹菜示例：**

```
 import os
 from celery import Celery
 celery = Celery('tasks', broker='amqp://guest@localhost//')
 @celery.task
 def run_command(command):
    return os.system(command) 
```

然后，您将需要一个绑定在队列上并等待任务执行的工作人员。[文档中的更多信息](http://docs.celeryproject.org/en/latest/getting-started/first-steps-with-celery.html)。

**面料示例：**

编码：

```
from fabric.api import run
def exec_remotely(command):
   run(command) 
```

调用：

```
$ fab exec_remotely:command='ls -lh' 
```

[文档中的更多信息](http://fabric.readthedocs.org/en/latest/tutorial.html#task-arguments)。

**批处理系统案例：** 回到问题...

*   `distribute_cmd`是会打电话的东西`bsub somescript.sh`
*   您只需要查找**文件**，因为您将使用其他参数重新执行相同的脚本
*   由于上述原因，您可能无法提供正确的`distutils`脚本。

让我们质疑这个设计。

*   为什么需要使用相同的脚本？
*   您的驱动程序可以编写脚本然后调用 bsub 吗？
*   可以使用临时文件吗？
*   所有节点实际上共享一个文件系统吗？
*   你怎么知道**文件**将存在于节点上？

例子：

```
TASK_CODE = {
   'TASK1': '''#!/usr/bin/env python
#... actual code for task1 goes here ...
''',
   'TASK2': '''#!/usr/bin/env python
#... actual code for task2 goes here ...
'''}
# driver portion
(opts, args) = parser.parse_args()
if opts.run_all is not None:
   for task in opts.run_all.split(","):
      task_path = '/tmp/taskfile_%s' % task
      with open(task_path, 'w') as task_file:
         task_file.write(TASK_CODE[task])
      # note: should probably do better error handling.
      distribute_cmd(task_path) 
```

# objective-c - 如何从自定义委托和数据源中分离

> ID：12990892
> 
> 赞同：0
> 
> 时间：2012-10-20T17:26:27.180
> 
> 标签：objective-c, ios, uitableview, delegates, datasource

我有一个包含 2 个表视图的视图。这个视图有控制器 PlayerDetailController 现在来控制 2 个表视图我有 2 个其他控制器。

*   tablePlayersDataSourceDelegate
*   tablePlayerNewsDataSourceDelegate

我 ctrl 从 PlayerDetail 视图拖到 newsView 以进行转场。在我的 tablePlayerDataSourceDelegate 中，我有以下方法来执行这个 segue。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   [self performSegueWithIdentifier:@"showPlayerDetailNews" sender:indexPath];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSIndexPath *indexPath = (NSIndexPath *)sender;
    PlayerNews *news = [_tableSource objectAtIndex:indexPath.row]; // ask NSFRC for the NSMO at the row in question
    if ([segue.identifier isEqualToString:@"show detail"]) {
        [segue.destinationViewController setImageURL:[NSURL URLWithString:news.image]];
        [segue.destinationViewController setNewsTitle:news.title];
        [segue.destinationViewController setNewsDescription:news.content];
        [segue.destinationViewController setNewsCopy:news.image_copyright];
        [segue.destinationViewController setNewsUrl:news.url];
        [segue.destinationViewController setNewsShortDescription:news.summary];
    }
} 
```

但是当我测试时，我得到以下错误。

```
** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Receiver (<tblPlayerNewsDatasourceDelagete: 0x1e5e44c0>) has no segue with identifier 'showPlayerDetailNews'' 
```

我明白为什么这会给出错误。因为 playerDetail 视图使用了 playerDetailController 类，我试图在 tablePlayerNewsDelegate 类中做 te segue。你可能知道解决它的方法吗？

**编辑** 在这里你看到我在说什么的[图片](http://www.flickr.com/photos/74322780@N08/8105968134/in/photostream)

这样就可以在playerDetailView中看到两个tableview了。单击底部表格视图中的单元格时，它应该转到下一个视图。

**编辑2**

这就是我在 playerDetailController 中为填充我的 tableview 所做的。我已经把它放在了我的 viewDidLoad 中。

```
tabelPlayerNews=[[tblPlayerNewsDatasourceDelagete alloc]init];
[tabelPlayerNews setTableSource:_newsArray];
tblNews.dataSource=tabelPlayerNews;
tblNews.delegate=tabelPlayerNews;
tabelPlayerNews.view=tabelPlayerNews.tableView; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:37:19.400

我不确定我是否理解，但总的来说......

要使用`performSegueWithIdentifier:`segue 的拖动，应该从将要进行调用的**控制器开始，而不是从视图或其他对象开始。**我认为这就是错误消息告诉您的内容：假设您的故事板中有一个名为“showPlayerDetailNews”的segue，它不属于正确的对象。

# c# - 使用 MyProj；在特定方法的用户类定义或 MyProj.MyClass 中？

> ID：12990893
> 
> 赞同：1
> 
> 时间：2012-10-20T17:26:31.050
> 
> 标签：c#, reference

好的，让我解释一下：

每当您在 .Net 中开始一个类时，假设您有另一个已开发的项目被引用，该项目具有您需要使用的非静态类...

你有 2 个选项（我知道）

在你的类的顶部放置一个 using 意味着你不需要在每次需要它的类时显式地命名整个项目

```
using FooBarProj;

public FooBar MyMethod()
{
     FooBar fb = new FooBar();
     //Do stuff
     return fb;
} 
```

或者明确实现这些：

```
public FooBarProj.FooBar MyMethod()
{
     FooBarProj.FooBar fb = new FooBarProj.FooBar();
     //Do stuff
     return fb;
} 
```

这会产生有效的影响吗？无论是执行效率，编译效率，还是什么？或者它只是一个开发便利问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:34:39.347

编译代码后没有区别。

使用`using`语句，或者使用整个类的命名空间和名称，毕竟是一回事。

编译为 CIL 代码时，对类型的引用是一个单一的东西，每个引用都包含所有信息，无论您如何编写该引用。

**引用具有不同名称的类**

如果你愿意，你甚至可以重命名一个类，这样做：

```
using TheString = System.String; 
```

现在您可以参考在代码中`System.String`使用名称`TheString`。

**所有这些都产生相同的编译代码**

*   `string`
*   `System.String`
*   `String`（如果你放在`using System;`开头）
*   `TheString`（如果你放在`using TheString = System.String;`开头）

**结论：所有`using`陈述只是为了方便。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:32:52.187

我认为这是一个开发便利性问题。第一个版本在所有情况下都更好，除了在不同的命名空间中有类似的类名。当不同的命名空间中有相同的类名时，需要在类之前显式声明命名空间。Dog23.class1 和 dog45.class1。如果可行，则始终是第一个版本。它更短且可读。

# dbus - DBus 是否仅适用于 IPC

> ID：12990895
> 
> 赞同：2
> 
> 时间：2012-10-20T17:26:35.813
> 
> 标签：dbus

我正在调查 DBus 消息 Q。只需几个查询：1) DBus 是否保证消息是有序的（FIFO）？2）DBus可以用于分布式系统（位于不同系统中的进程）

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T10:18:31.507

1) 是的，消息顺序被保留，尽管不同的发件人可能会竞争。有一些 D-Bus 库搞乱了实现同步方法调用的顺序。

2) 否/分类。D-Bus 最常见的是在 UNIX 域套接字之上实现的，根据定义，它们仅限于一台主机。D-Bus 规范允许 D-Bus 在 TCP 之上运行。因此，一个节点可以作为消息传递中心。所以，并不是真正的分布式。

此外，许多 D-Bus 库不允许连接任意总线（如果“connect”调用仅支持“system”和“session”，它们指的是 Linux 系统上的两个默认 UNIX 域套接字）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-20T21:18:52.220

1）否，发送者设置（任意）消息序列号，另一方负责在回复序列字段中设置相同的编号

2) 是的，只要您的总线守护程序能够从服务名称中了解节点位置并相应地路由消息。不确定`dbus-daemon`能力

# php - bind_param() 中的变量问题

> ID：12990896
> 
> 赞同：1
> 
> 时间：2012-10-20T17:26:40.460
> 
> 标签：php, mysql, mysqli

我`error_reporting`一路走来，我已经看过很多次了，所以我想我可能会错误地调用一个值或者没有声明正确的东西。任何可以跳进去告诉我代码怎么了以及为什么仍然出现错误“在非对象上调用成员函数 bind_param()”的人，因为我很难过：

```
$db=new mySQLi($host,$dbhuser,$dbhpwd,$dbh); 
$insert_stmt = $db->stmt_init();    
$insert_stmt = $db->prepare("INSERT INTO food (id,timestamp,userid,tagline,group,location,event_date,event_time,image,type) VALUES(NULL,NOW(),?,?,?,?,?,?,?,?)");
        $insert_stmt->bind_param("issssssi",$_SESSION['id'],$tagline,$organizer,$location,$event_date,$event_time,$image_name,$food_id);
        $insert_stmt->execute(); 
```

userid 是我从存储的 cookie 中提取的整数。

$tagline、$organizer、$location 是最多 140 个字符的文本。

$event_date = $event_date= substr(date('Y'),0,2).$year."-".$month."-".$day; $event_time= date("H:i:s", strtotime($hour.":".$minute.$period)); - 所有这些变量都是用户作为文本输入的两位数字

$image_name 是文本，文件路径

type 是 1-29 的整数。

这是一个示例结果？数据库的值：38、测试、测试、测试、2013-2-20、14:15:00、Halloween_Beer_2.jpg、7

这是 mysql 中名为 food 的表的设置屏幕截图： ![在此处输入图像描述](../Images/92fa656ca2a2a110a14bbbdff3f07502.png)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-20T17:31:50.183

```
$insert_stmt = $db->prepare("INSERT INTO food (id,timestamp,userid,tagline,group,location,event_date,event_time,image,type) VALUES(NULL,NOW(),?,?,?,?,?,?,?,?)");
        $insert_stmt->bind_param("issssssi",$_SESSION['id'],$tagline,$organizer,$location,$event_date,$event_time,$image_name,$food_id);
        $insert_stmt->execute(); 
```

你做错了。`BindParam`只接受一个值

```
$query->bindParam("value",":value",PDO::PARAM_INT);// type 
```

你可以做这样的事情

```
 $insert_stmt = $db->prepare("INSERT INTO food (id,timestamp,userid,tagline,group,location,event_date,event_time,image,type) VALUES(NULL,NOW(),?,?,?,?,?,?,?,?)");

$insert_stmt->execute(array("issssssi",$_SESSION['id'],$tagline,$organizer,$location,$event_date,$event_time,$image_name,$food_id)) 
```

或者你可以看看这个 [PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# java - memcached set 操作有多快？

> ID：12990900
> 
> 赞同：1
> 
> 时间：2012-10-20T17:26:55.783
> 
> 标签：java, memcached

我需要设计一个缓存来存储来自多个客户端的对象。这些客户端都可以并行出现。这些对象需要存储在 memcached 上，稍后检索以供使用。

```
String newKey ;
private synchronized String setData(Data newData) {
    do {
        newKey = createRandomKey() ;
    } while (memcacheClient.get(newKey) != null) ;
    memcacheClient.set(newKey, 10000, newData) ;
} 
```

我的问题是，这种方法会成为并行客户端访问的瓶颈吗？

或者

我应该创建一个共享列表和一个线程吗？线程将异步执行 setData 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T21:21:37.897

循环的延迟很大程度上取决于随机 createRondomKey 可以实现的方式。你必须使用随机密钥吗？是否可以提出一些语义命名方案（例如，userid/category/blabla）？这也将节省您记住随机密钥的努力。

# javascript - heroku 搞乱图像格式

> ID：12990902
> 
> 赞同：0
> 
> 时间：2012-10-20T17:27:32.240
> 
> 标签：javascript, css, ruby-on-rails, deployment, heroku

我在 heroku 弄乱我的图像格式时遇到了麻烦。我在本地主机开发中没有遇到任何图像问题。

因此，如果您访问[novulty.herokuapp.com/services](http://novulty.herokuapp.com/services)并滚动到“我们的结果”部分，您会看到一些徽标的格式错误。如果您不断刷新页面，您会看到不同的徽标格式错误。我真的不确定是什么情况。

我已经尝试过预编译我的资产（`rake assets:precompile`），但这似乎并不奏效。接下来，我认为这是稍后加载我的 javascript 而不是在文件中的早期加载的问题，但如果我在开头（在`<head>`）加载它，javascript 甚至都不起作用......所以我很困惑。

随时查看我的代码[https://github.com/sambaek/novulty](https://github.com/sambaek/novulty)

谁能帮助我？谢谢！

## 更新：

这个问题发生在本地主机上。不过少了很多。我想知道这是 javascript/css 问题还是 rails/heroku 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T19:33:52.757

您的问题可能与在生产与开发中运行以及读取资产的顺序有关。在开发中，订单有效，但在生产中，您的 css 和 javascript 可能都连接到单个文件中，您可能会覆盖类并遇到其他冲突。

要测试这个理论，只需在生产环境中本地运行您的应用程序。我不经常这样做，但命令很可能

```
RAILS_ENV=production rake assets:precomiple
RAILS_ENV=production rails s 
```

假设您会看到相同的错误，您接下来可能会弄清楚它是您的 CSS 还是 javascript。检查您的图像并确保类和属性符合您的预期。检查覆盖的类。

最后，如果仍然存在问题，我会专注于您的 javascript。请记住，如果您将其放入多个 js 文件中，假设您使用的是默认设置，它们将全部合并到“application.js”中。如果您的浏览器上有开发者模式（我使用 Chrome），请检查 javascript 检查器以查看是否有任何错误。

# django - Django：直接在模板中访问原始 sql 结果而不循环 - 因为只返回一行

> ID：12990905
> 
> 赞同：0
> 
> 时间：2012-10-20T17:27:54.440
> 
> 标签：django, templates

我返回以下内容：

```
 return render_to_response('mypage.html', { "results":results}) 
```

在我的视图函数中，我可以得到这样的结果：

```
results = listings.objects.get(id = 1) 
```

在这种情况下，我可以直接在模板中使用它：

```
{{results.name}} 
```

或者，我可以得到这样的结果（原始 sql）：

```
results = listings.objects.raw(sql_query, [id,]) 
```

然后我必须遍历它，即使我知道它只返回 1 行：

```
{% for listing in results %}
     {{listing.name}} 
```

我需要的是能够使用原始 sql，但仍然不必遍历它。循环的问题是，如果结果为空，则循环内不会显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:36:04.887

```
results = listings.objects.raw(sql_query, [id,])[0] 
```

或自定义方法：

```
def get_results():
   from django.db import connection
   cursor = connection.cursor()
   cursor.execute(sql)
   return cursor.fetchone() 
```

# tidesdk - 将本机 10.8 滚动条与 TideSDK 1.2.0 RC4 一起使用？

> ID：12990908
> 
> 赞同：2
> 
> 时间：2012-10-20T17:28:01.000
> 
> 标签：tidesdk

我终于让 TideSDK 工作了（按照本指南，[如何开始使用 Legacy 1.2.0.RC4 TideSDK？](https://stackoverflow.com/questions/12547910/how-do-i-get-started-on-the-legacy-1-2-0-rc4-tidesdk)），但我注意到在我的应用程序中，滚动条来自以前版本的 OSX。我的意思是滚动条看起来像这样：

![在此处输入图像描述](../Images/a59be1038c7ee833be3ffad53fe774fd.png)

与 OSX 10.7 中引入的新滚动条相反：

![在此处输入图像描述](../Images/18b74c6121e277e0d73a31722f5aa330.png)

这显然不是一个大问题，但我想知道是否有修复，或者修复是否会出现在备受期待的 1.3.0 版本中，我假设它将依赖于更新的 WebKit。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:23:57.563

1.2.0RC4 是针对 sdk10.5 构建的。1.3.0 是在 Xcode 中使用 sdk10.7 构建的，不久将升级到 sdk10.8（等待解决一些弃用警告）。用户首选项确定操作系统的滚动条特性。该设置包含以下选项：

*   自动基于输入设备
*   滚动时
*   总是

因此，第一个选项将取决于您是否有触控板或鼠标。例如，连接鼠标：

![在此处输入图像描述](../Images/91c4e7865ee0cb28f26101e06b8406fe.png)

第二个选项在您包含的第二张图片上提供了与 iOS 非常相似的结果：

![滚动时](../Images/e920d03f04fc297dc74e9e153e38773f.png)

滚动条并非特定于 WebKit。事实上，上面的图像是根据非常最新的本地 WebKit 编译的代码创建的。我们将很快发布 TideSDK 和 TideSDK Lite。如果您不需要 php、python 或 ruby​​ 语言支持，您将需要 TideSDK Lite。TideSDK Lite 也是我们获得 AppStore 认可的产品。

# algorithm - 了解 alpha-beta 剪枝算法中的截止条件

> ID：12990912
> 
> 赞同：3
> 
> 时间：2012-10-20T17:28:09.650
> 
> 标签：algorithm, search, artificial-intelligence, alpha-beta-pruning

我无法理解我在维基百科上找到的用于 alpha beta 修剪的伪代码：

```
function alphabeta(node, depth, α, β, Player)         
    if  depth = 0 or node is a terminal node
        return the heuristic value of node
    if  Player = MaxPlayer
        for each child of node
            α := max(α, alphabeta(child, depth-1, α, β, not(Player)))     
            if β ≤ α
                break (* Beta cut-off *)
        return α
    else
        for each child of node
            β := min(β, alphabeta(child, depth-1, α, β, not(Player)))     
            if β ≤ α
                break (* Alpha cut-off *)
        return β 
```

令我困惑的是 if`Player = MaxPlayer`条件。我理解整个递归调用函数`not(Player)`以获取最小值，然后递归调用函数`Player`，重复直到达到深度限制或找到目标状态。但是，我不明白

```
if β ≤ α
    break 
```

陈述。我的理解是，找到比上一次调用（）中找到的最小值高的第二个值`β`，即使用的值。但是由于这是函数的 MAX 部分，我们不想要 HIGHEST 值，而不仅仅是大于 beta 的任何值吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T17:37:13.913

这是算法的修剪阶段，在`MaxPlayer`子句中（当检查此节点中玩家的最大值时）：

Beta是函数的参数，即“微调因子”。它代表您迄今为止找到的最低分数。这意味着当前节点的父节点（最小化节点）已经找到了一个 beta 解决方案。

现在，如果我们继续迭代所有孩子，我们将得到至少与当前 alpha 一样好的东西。因为`beta <= alpha`- 正在最小化节点的父节点 - 永远不会选择这个 alpha（或任何大于它的值） - 它会选择一个 beta 或更低的值 - 而当前节点没有机会找到这样的值，所以我们可以修剪计算。

**例子：**

```
 MIN
    /   \
   /     \
  /       \
 /         \
5          MAX
          / | \
         /  |  \
        /   |   \
       6    8    4 
```

在评估 MAX 节点时，如果我们应用正常的 min-max 算法，我们将返回 8。但是，我们知道 MIN 函数会执行`min(5, MAX(6, 8, 4))`. 因为在我们读到 6 之后我们知道`max(6, 8, 4) >= 6`，我们可以在不继续计算的情况下返回 6，因为上层的 MIN 计算将是`min(5, MAX(6, 8, 4)) = min(5, 6) = 5`.

这是一个层次的直觉，它当然是递归完成的，以相同的想法“流动”到所有层次。

同样的想法也适用于 MIN 顶点中的修剪条件。

# java - 为什么 Java 中的 if 语句会发出错误，即使它总是正确的？

> ID：12990913
> 
> 赞同：9
> 
> 时间：2012-10-20T17:28:09.290
> 
> 标签：java, loops, if-statement

> **可能重复：**
> [编译器抱怨“缺少返回语句”，即使不可能达到缺少返回语句的条件](https://stackoverflow.com/questions/8863676/compiler-complains-about-missing-return-statement-even-though-it-is-impossible)

Java中的以下方法编译得很好。

```
public String temp() {
    while(true) {
        if(true) {
            // Do something.
        }
    }
} 
```

该方法有一个明确的返回类型，虽然它编译得很好，但它`java.lang.String`没有声明。`return`但是，以下方法无法编译。

```
public String tempNew() {
    if(true) {
        return "someString";
    }        
} 
```

即使用语句指定的条件始终为真（它有一个永远不会被反射改变的常量），也会发出一个编译时错误，指示“*缺少`return`语句”。*该方法必须进行如下修改才能成功编译。`if``boolean`

```
public String tempNew() {
    if(true) {
        return "someString";
    } else {
        return "someString";
    }
} 
```

或者

```
public String tempNew() {
    if(true) {
        return "someString";
    }

    return "someString";
} 
```

关于`while`循环的第一种情况，第二种情况似乎是合法的，尽管它无法编译。

第二种情况是否有超出编译器功能之一的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T17:34:51.630

因为它是死代码。死代码分析在方法返回分析的单独传递中完成，该方法执行一些更深入的分析，查看分支条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:36:59.757

来自 java 教程：您可以使用 while 语句实现无限循环，如下所示：

```
while (true){
    // your code goes here
} 
```

所以编译器知道这是无限的，因此可能不会返回 - 即不一定需要返回语句。

`if (true)`另一方面，这条线（它自己的）将返回，因此需要覆盖所有返回的分支。

# php - 为什么我的查询不成功？(PHP MySQL)

> ID：12990917
> 
> 赞同：-1
> 
> 时间：2012-10-20T17:28:42.677
> 
> 标签：php, mysql, insert

我的查询有问题，但我不知道问题出在哪里。

这是我的查询：

```
$result=mysql_query("UPDATE user_info SET Money = '$newmoney' WHERE Username ='$user'"); 

$result=mysql_query("INSERT INTO order (username, amount, stock, company) VALUES 
('$user','$amount','$stock','$symbol')"); 
```

当我运行它时，第一个查询有效，但第二个查询无效。现在给出了错误。任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T17:36:04.250

`order`是一个[保留字](http://dev.mysql.com/doc/en/reserved-words.html)。用反引号引用它：

```
$result = mysql_query("
  INSERT INTO `order`
    (username, amount, stock, company)
  VALUES
    ('$user','$amount','$stock','$symbol')
"); 
```

此外，请注意在该[`mysql_query()`](http://php.net/manual/en/function.mysql-query.php)函数的 PHP 手册页上，它用一个**大红色框**表示：

> ### 建议的替代品
> 
> 不鼓励使用此扩展程序。相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)指南和[相关的常见问题解答](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。此功能的替代方案包括：
> 
> *   [mysqli_query()](http://www.php.net/manual/en/mysqli.query.php)
> *   [PDO::查询（）](http://www.php.net/manual/en/pdo.query.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:32:07.923

真的很好看，你可以试试这个吗？

```
$result=mysql_query("INSERT INTO order (username, amount, stock, company) VALUES 
($user,$amount,$stock,$symbol)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T17:53:45.953

如前所述， order 是一个保留的 mysql 字。在此链接中，您可以找到其他保留字：[http](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html) ://dev.mysql.com/doc/refman/5.5/en/reserved-words.html ，而不是使用反引号，我会更改列的名称，这样会更容易。

# common-lisp - (SB-SYS:WAIT-UNTIL-FD-USABLE 6 :INPUT NIL NIL) 有什么作用？

> ID：12990919
> 
> 赞同：0
> 
> 时间：2012-10-20T17:29:02.503
> 
> 标签：common-lisp, sbcl

我目前正在使用 sbcl 1.0.57.0 并且我的程序在 shell 上生成恒定的输出，直到某个时候我的程序在没有任何线索的情况下冻结。

抄送并向下，显示最后一次调用是：

```
(SB-SYS:WAIT-UNTIL-FD-USABLE 6 :INPUT NIL NIL) 
```

我重新启动了我的程序并再次尝试了此操作，但程序再次冻结，并且 Cc down 显示此调用是最后一个调用。过了一会儿，我没有测量确切的时间，但它应该大约在 5 分钟左右，程序会继续一小段时间，然后再次冻结。

将调用置于上下文中：跟踪中第一个熟悉的调用是`drakma:http-request`. 但是，自身使用的完整调用不会导致冻结。

现在我想知道这个调用实际上做了什么，如果这可能是程序冻结的原因？

由于这个问题的第二部分将要求你是千里眼，如果这个电话与我的问题无关，我的最后一个问题是：**这个电话有什么作用？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:45:40.730

(描述 'sb-sys:wait-until-fd-usable) 给出：

```
WAIT-UNTIL-FD-USABLE names a compiled function:
Lambda-list: (FD DIRECTION &OPTIONAL TIMEOUT)
[...]
Documentation:
Wait until FD is usable for DIRECTION. DIRECTION should be either :INPUT
or :OUTPUT
TIMEOUT, if supplied, is the number of seconds to wait before giving up. 
```

调用的目的似乎是等待（没有任何超时），直到文件描述符 6 可用，但问题可能是使用 4 个参数调用该函数，而它需要 2 个或 3 个参数吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T16:03:38.250

虽然从技术上讲我没有问这个，但我想添加关于这个主题的最新信息，以防其他人在类似的环境中寻找这个问题。

使用`drakma:http-request`. 我现在能够为特定请求编写概念证明，并将其作为问题发布在 drakma github 页面上。似乎 drakma 没有在 sbcl 中提供超时，因此`(SB-SYS:WAIT-UNTIL-FD-USABLE 6 :INPUT NIL NIL)`在这种情况下等待信息到达没有超时： [https ://github.com/edicl/drakma/issues/67](https://github.com/edicl/drakma/issues/67)

# django - 如何在不使用表单的情况下使用 Django 实现 RESTful？

> ID：12990921
> 
> 赞同：1
> 
> 时间：2012-10-20T17:29:45.727
> 
> 标签：django, forms, rest

我有一个以三个按钮结束的页面：结帐按钮、更改数量按钮和取消按钮：

```
<button name="checkout" onclick="location.href='/checkout/'"    >checkout  </button>
<button name="change"   onclick="location.href='/change-qty/'"  >change qty</button>
<button name="cancel"   onclick="location.href='/cancel-order/'">cancel    </button> 
```

我以这种方式进行这些重定向，而不是使用表单，因为我希望每个按钮都重定向到不同的 Django 视图。上面的代码工作正常，但不是 RESTful：“checkout”和“cancel-order”改变了系统的状态，所以我希望这些是 POST。

我可以通过让“结帐”和“取消”视图将专用表单自动发布到两个接受 POST 的新视图来实现这一点。但这太麻烦了，也增加了复杂性。我还可以在页面中添加一些 jQuery，并让这些按钮中的每一个在指向相应视图的隐藏表单上触发 POST，并实现相同的目的。但是，对于看起来很简单的东西，这也是非常多的额外代码。

真的，如果按钮上有类似 'method="post"' 的东西，那就完美了。但是没有。是否有一些优雅的模式可以实现我想要的？还是我在做一些非常愚蠢的事情而我只是不知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:21:56.507

使用`jquery-ujs`，并将“data-”属性添加到您的链接：

```
<a href="/change-qty/" data-method="post">change qty</a> 
```

等等。不显眼的 JavaScript 会将正确的代码注入到您的链接/按钮/任何内容中。

# jquery - 在 Jquery 中调整图像大小，保持加载时的纵横比

> ID：12990922
> 
> 赞同：2
> 
> 时间：2012-10-20T17:29:51.847
> 
> 标签：jquery

我对 Jquery 很陌生，我有以下问题。

我写了一个函数来调整图像大小，同时保持纵横比。为了更具可读性，我在这个版本中有一些比需要更多的“如果”。html结构是这样的。

```
<div class="post">
    <div class="date"></div>
    <div class="thumbnail">
        <img class="img-thumb" />
    </div>
    <div class="post-body">
        <p>...</p>
        <img />
        <p>...</p>
    </div>              
</div> 
```

对于调整大小（我还通过添加一些填充来使图像居中。我认为我对代码的那部分没有错误。）

```
$(window).load(function() {
    var parentWidth  = 250;//max width. In the real script i get the parent width inside the each but for the example a static value is ok
    var parentHeight = 196;//max height

    $('.img-thumb').each(function () {
        var img=$(this);
        var width  = img.width(); //image width
        var height = img.height(); //image height
            var aspect = width/height;
            var wide = width/parentWidth;
            var tall = height/parentHeight;

        if(width > parentWidth) { 
                if (wide > tall) { 
                    width  = parseInt(parentWidth,10);
                    height = parseInt(parentHeight/aspect,10);
                }
            }
            if(height > parentHeight) {
                if (tall > wide) {
                    height = parseInt(parentHeight,10);
                    width  = parseInt(parentWidth*aspect,10);
                }
            }
            margin_top  = parseInt((parentHeight - height) / 2,10);
            margin_left = parseInt((parentWidth  - width ) / 2,10);

            img.css({'margin-top' :margin_top  + 'px',
                     'margin-left':margin_left + 'px',
                        'height'     :height   + 'px',
                        'width'      :width    + 'px'
                        });
    });
}); 
```

这是我的问题。我不明白负载是如何工作的。我是说。这将起作用，但仅在加载所有图像时才有效。但它有两个问题。第一个是它必须等待所有加载，第二个是用户将看到调整大小，所以我首先必须隐藏图像并使用 show() 显示它们。我可以在 css 中做到这一点，但是当 javascript 被禁用时，它们仍然会被隐藏，所以我更喜欢在 jquery 中做到这一点。

我可以在那个之前运行第二个 .each 并将它们全部隐藏，但我想第二次去 dom 为同一件事运行 each 并不是最好的解决方案。那么负载究竟是如何工作的呢？

例如，如果我这样做：

```
$('.img-thumb').each(function () {

    var parentWidth  = 250;//max width. In the real script i get the parent width inside the each but for the example a static value is ok
    var parentHeight = 196;//max height
    var img=$(this);
    img.hide();
    img.load(function() {
        var width  = img.width(); //image width
        var height = img.height(); //image height
            var aspect = width/height;
            var wide = width/parentWidth;
            var tall = height/parentHeight;

        if(width > parentWidth) { 
                if (wide > tall) { 
                    width  = parseInt(parentWidth,10);
                    height = parseInt(parentHeight/aspect,10);
                }
            }
            if(height > parentHeight) {
                if (tall > wide) {
                    height = parseInt(parentHeight,10);
                    width  = parseInt(parentWidth*aspect,10);
                }
            }
            margin_top  = parseInt((parentHeight - height) / 2,10);
            margin_left = parseInt((parentWidth  - width ) / 2,10);

            img.css({'margin-top' :margin_top  + 'px',
                     'margin-left':margin_left + 'px',
                        'height'     :height   + 'px',
                        'width'      :width    + 'px'
                        }).show();
    });
}); 
```

它不起作用。我的意思是我仍然可以看到调整大小。我猜原因是在加载第一个图像之前不会执行每个循环的第二部分。那么我怎样才能告诉 jquery 执行加载代码的 outdise 呢？我需要两个 .each 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:38:52.660

您的问题是当您通过“$（window）.load（...）”实际加载所有元素时绑定加载事件

您希望在下载 HTML dom 时将加载事件绑定到您的图像，但您希望调整图像大小并在加载后显示它们。因此，

代替“$(window).load(...)” 使用“$(document).ready(...)”，然后将 $('.img-thumb') 加载事件作为“$('。 img-thumb').load(..)"; 您不需要使用每一个，因为所有图像都具有“img-thumb”类将具有您在您的情况下进行调整大小操作的加载事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T19:27:28.280

> 这是我的问题。我不明白负载是如何工作的。我是说。这将起作用，但仅在加载所有图像时

当 DOM 完全加载时，jQuery 开始工作，这就是为什么每个操作对用户都是可见的。当您调用 时`$(document).ready();`，您实际上是在告诉 jQuery，它应该等到页面完成加载后再执行所需的操作。

**现在，回答你的问题：**

如果我理解正确，您的图像大于您希望在页面上显示的尺寸，并且您正在使用 jQuery 为它们提供所需的尺寸？

1.  您可以`CSS`在呈现页面时使用隐藏图像。当它完成加载后，您可以使用 jQuery 更改大小，然后让图像再次可见。参考这个例子：http: [//jsfiddle.net/CYfma/](http://jsfiddle.net/CYfma/)

2.  **你为什么想做这个？**最好的办法是存储已调整大小的图像（前提是您事先知道目标缩略图大小）。这是 Facebook 和许多其他网站用来节省带宽的概念。在客户端渲染大图像并调整它们的大小不会使它们的重量更小。这对页面加载速度有很大影响。

3.  如果您事先知道目标尺寸，您也可以只使用 CSS 或 HTML 中图像的宽度和高度属性来使它们成为所需的尺寸。

**编辑**

> 为了回应您对禁用 javascript 的担忧，这是我的建议：
> 
> `CSS`您可以使用`javascript`（还不是 jquery）来隐藏图像，而不是使用。这意味着启用 javascript 后，图像将被隐藏**，直到 jQuery 启动**。`document.getElementById("image").style.display="none";`根据我的理解和观察，应该在里面的代码块之前执行一行如`$(document).ready();`。我已经尝试过该解决方案，您可以在这里查看：http: [//jsfiddle.net/CYfma/1/](http://jsfiddle.net/CYfma/1/)

我希望我能正确理解你的问题，如果没有，我真诚地道歉:-)

希望能帮助到你

# html - 用百分比值声明的表格中的内容会破坏表格

> ID：12990927
> 
> 赞同：1
> 
> 时间：2012-10-20T17:30:16.920
> 
> 标签：html, css

我有一个`<table>`设置为 100% X 100% [http://oxide.co.il/test/table1.htm](http://oxide.co.il/test/table1.htm)的 html 页面。我使用它是因为我需要页面全屏并适合所有类型的屏幕，而且页面不应该有滚动。

我希望表格保持原样（左侧 50%，右侧 50%，底部 10%），但是当我向表格中添加内容时，表格会重新调整其大小，这对我不利。

例如，当我添加一个大图像时，它看起来像这样： http: [//oxide.co.il/test/table2.htm](http://oxide.co.il/test/table2.htm)（右侧更小，底部消失）

我希望图像适合`<td>`原始尺寸。当我`style="width:100%;"`为图像添加时，它仍然打破了表格： http: [//oxide.co.il/test/table3.htm](http://oxide.co.il/test/table3.htm)（底部区域未显示）

当我有一个大`<div>`的里面时`<td>`，它也会打破桌子： http: [//oxide.co.il/test/table4.htm](http://oxide.co.il/test/table4.htm)（我知道`<div>`在里面`px`，我不能把它改成百分比）

如何在不重新调整大小的情况下使内容适合表格？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:26:59.577

表格不适用于布局。正如您对问题的评论中所述，如果您只使用 div，它会变得更加简单。下面的代码做你想做的事，没有表格：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type" >
        <style>
            html, body{
                margin: 0;
            }

            .container {
                bottom: 0;
                left: 0;
                position: absolute;
                right: 0;
                top: 0;
            }

            .span50 {
                width: 50%;
            }

            .span100 {
                width: 100%;
            }

            .sheer90 {
                height: 90%;
            }

            .sheer10 {
                height: 10%;
            }

            .span50, .span100,
            .sheer90, .sheer10 {
                overflow: hidden;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="span100 sheer90">
                <div class="span50">
                    <img src="http://placehold.it/1200x1200" width="1200px" height="1200px" alt="" />
                </div>
                <div class="span50"></div>
            </div>
            <div class="span100 sheer10">
                Test
            </div>
        </div>
    </body>
</html>​ 
```

# java - 本机方法中的参数传递

> ID：12990929
> 
> 赞同：1
> 
> 时间：2012-10-20T17:30:44.000
> 
> 标签：java, c++, c, java-native-interface, native-methods

> **可能重复：**
> [jni 将 jstring 转换为 char *](https://stackoverflow.com/questions/4181934/jni-converting-jstring-to-char)

С 上有一个函数（traverser.c 模块）

```
long int
Traverser(const char * sTraversingRoot) 
{
    long int nCount;
    struct stat rStatBuf;
    time_t nTime;
    char sActualPath[512];
    PGconn *pConn;

    // Open DB connection
    sprintf(sConnInfo, 
        "hostaddr=%s port=%s connect_timeout=50 dbname=%s user=%s password=%s",
        sIP, sPort, sDBName, sLogin, sPassword);
    pConn = PQconnectdb(sConnInfo);
    if (PQstatus(pConn) == CONNECTION_BAD) {
        AddErrorToLog("No connect\n");
        return 0;
    }

    GetActualPath(sActualPath, sTraversingRoot);

    if (*sActualPath) {
        stat(sActualPath, &rStatBuf);
    } else {
        stat("/", &rStatBuf);
    }

    if (nClock)
        nTime = time(NULL);

    if(S_ISREG(rStatBuf.st_mode)) {
        nCount = 1;
        ProcessFile(pConn, sActualPath);
    }

    if(S_ISDIR(rStatBuf.st_mode)) {
        nCount = _Traverser(pConn, sActualPath);
    }

    if (nClock)
        fprintf(stdout, "Total time : %u second(s)\n", time(NULL) - nTime);
    // Close DB connection
    PQfinish(pConn);

    return nCount;
} 
```

我想在Java上创建同名的本地方法

```
public native void Traverser(String path) 
```

分别在 traverser.c 模块中会有一个函数

```
JNIEXPORT void JNICALL Java_ParallelIndexation_Traverser(JNIEnv *env, jobject obj, jstring path) 
```

Java_ParallelIndexation_Traverser 函数是来自 traverser.c 模块的 Traverser 函数包装器。问题是：如何在 Java_ParallelIndexation_Traverser 中从 Traverser traverser.c 调用模块，将参数 jstring 路径传递给它，从而将其转换为 const char *（签名 Traverser看上面）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:54:01.393

我是否正确理解了您的问题：如何实现 Java_ParallelIndexation_Traverser 以便它调用非托管 Traveser 函数？

如果是这样，方法如下：

```
JNIEXPORT void JNICALL Java_ParallelIndexation_Traverser(JNIEnv* env, jobject obj, jstring path)
{
    const jbyte* path2 = env->GetStringUTFChars(path, nullptr);
    if (path2 == nullptr)
        return;

    ::Traverser(path2);

    env->ReleaseStringUTFChars(path, path2);
} 
```

**编辑：**

说明： JNIEnv::GetStringUTFChars 将 jstring 转换为字节数组。然后，您需要调用 JNIEnv::ReleaseStringUTFChars 来释放该字节数组。

# c# - 敌人总是开枪

> ID：12990934
> 
> 赞同：0
> 
> 时间：2012-10-20T17:31:25.410
> 
> 标签：c#, xna

如果变量 nextShot 大于变量 shotFrequency，我希望敌人发射子弹。每个敌人都应该独立开火。但就目前而言，每个敌人都在射击。他们在镜头之间没有休息。但我希望他们总是在镜头之间稍作休息。我确定 Enemy 类有问题，但我不知道要更改什么。有人可以帮我吗？

```
public class Map
{
    Texture2D myEnemy, myBullet;
    Player Player;
    List<Enemy> enemieslist = new List<Enemy>();
    List<Bullet> bulletslist = new List<Bullet>();

    float fNextEnemy = 0.0f;
    float fEnemyFreq = 2.0f;

    Vector2 Startposition = new Vector2(200, 200);
    Vector2 CurrentEnemyPosition;

    GraphicsDeviceManager graphicsDevice;

    public Map(GraphicsDeviceManager device) 
    { 
        graphicsDevice = device; 
    } 

    public void Load(ContentManager content)
    {
        myEnemy = content.Load<Texture2D>("enemy");
        myBullet = content.Load<Texture2D>("bullet"); 
        Player = new Player(graphicsDevice);
        Player.Load(content);
    }

    public void Update(GameTime gameTime)
    {
        Player.Update(gameTime);
        float delta = (float)gameTime.ElapsedGameTime.TotalSeconds;

        for(int i = enemieslist.Count - 1; i >= 0; i--) 
        {
            // Update Enemy
            Enemy enemy = enemieslist[i];
            enemy.Update(gameTime, this.graphicsDevice, Player.playershape.Position, delta);
            CurrentEnemyPosition = enemy.Bulletstartposition;
            // Does the enemy shot?
            if (enemy.Shot == true)
            // New bullet
              {
                  Vector2 bulletDirection = Vector2.Normalize(Player.playershape.Position - CurrentEnemyPosition) * 200f;
                  bulletslist.Add(new Bullet(CurrentEnemyPosition, bulletDirection, Player.playershape.Position));
              }
        }

        this.fNextEnemy += delta;
        //New enemy
        if (this.fNextEnemy >= fEnemyFreq)
        {
            Vector2 enemyDirection = Vector2.Normalize(Player.playershape.Position - Startposition) * 100f;
            enemieslist.Add(new Enemy(Startposition, enemyDirection, Player.playershape.Position));
            fNextEnemy = 0;
        }

        for(int i = bulletslist.Count - 1; i >= 0; i--) 
        {
            // Update Bullet
            Bullet bullets = bulletslist[i];   
            bullets.Update(gameTime, this.graphicsDevice, delta);       
        }
    }

    public void Draw(SpriteBatch batch)
    {
        Player.Draw(batch);
        foreach (Enemy enemies in enemieslist)
        {
            enemies.Draw(batch, myEnemy);
        } 
        foreach (Bullet bullets in bulletslist)
        {
            bullets.Draw(batch, myBullet);
        } 
    }
} 
```

敌人等级：

```
public class Enemy
{
    private float nextShot = 0;
    private float shotFrequency = 1.0f;  
    Vector2 vPos;
    Vector2 vMove;
    Vector2 vPlayer;
    public Vector2 Bulletstartposition;
    public bool Remove;
    public bool Shot;

    public Enemy(Vector2 Pos, Vector2 Move, Vector2 Player)
    {
        this.vPos = Pos;
        this.vMove = Move;
        this.vPlayer = Player;
        this.Remove = false;
        this.Shot = false;
    }

    public void Update(GameTime gameTime, GraphicsDeviceManager graphics, Vector2 PlayerPos, float delta)
    {           
        nextShot += delta;

        if (nextShot >= shotFrequency)
            {
            this.Shot = true;
            nextShot = 0;
            }

        if (!Remove)
        {
            float fMoveTime = (float)gameTime.ElapsedGameTime.TotalSeconds;
            this.vMove = Vector2.Normalize(PlayerPos - this.vPos) * 100f;
            this.vPos += this.vMove * fMoveTime;
            Bulletstartposition = this.vPos;

            if (this.vPos.X > graphics.PreferredBackBufferWidth + 1)
            {
                this.Remove = true;
            }

            else if (this.vPos.X < -20)
            {
                this.Remove = true;
            }

            if (this.vPos.Y > graphics.PreferredBackBufferHeight + 1)
            {
                this.Remove = true;
            }

            else if (this.vPos.Y < -20)
            {
                this.Remove = true;
            }
        }
    }

    public void Draw(SpriteBatch spriteBatch, Texture2D myTexture)
    {
        if (!Remove)
        {
            spriteBatch.Draw(myTexture, this.vPos, Color.White);
        }
    }
} 
```

子弹类

```
public class Bullet
{
    Vector2 vPos;
    Vector2 vMove;
    Vector2 vPlayer;
    public bool Remove;

    public Bullet(Vector2 Pos, Vector2 Move, Vector2 Player)
    {
        this.Remove = false;
        this.vPos = Pos;
        this.vMove = Move;
        this.vPlayer = Player;
    }

    public void Update(GameTime gameTime, GraphicsDeviceManager graphics, float delta)
    {
            if (!Remove)
            {
                float fMoveTime = (float)gameTime.ElapsedGameTime.TotalSeconds;
                this.vPos.X += this.vMove.X * fMoveTime;
                this.vPos.Y += this.vMove.Y * fMoveTime;

                if (this.vPos.X > graphics.PreferredBackBufferWidth +1)
                {
                    this.Remove = true;
                }

                else if (this.vPos.X < -20)
                {
                    this.Remove = true;
                }

                if (this.vPos.Y > graphics.PreferredBackBufferHeight +1)
                {
                    this.Remove = true;
                }

                else if (this.vPos.Y < -20)
                {
                    this.Remove = true;
                }
            }         
    }

    public void Draw(SpriteBatch spriteBatch, Texture2D myTexture)
    {
        if (!Remove)
        {
            spriteBatch.Draw(myTexture, this.vPos, Color.White);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T17:34:16.967

你永远不会清除`Shot`标志。在你有敌人射击后，就做`enemy.Shot = false;`。

另外，一个小提示，当 nextShot >= shotFrequency 时，最好这样做：

```
nextShot -= shotFrequency; 
```

当您超出 shotFrequency 时，它会导致微小的重叠。

# c# - 如何使用正则表达式将具有复杂规则的固定宽度字符串解析为组件字段

> ID：12990935
> 
> 赞同：0
> 
> 时间：2012-10-20T17:31:36.220
> 
> 标签：c#, regex

我需要使用 c# 和正则表达式解析固定宽度的记录。每条记录都包含许多固定宽度的字段，每个字段都可能具有重要的验证规则。我遇到的问题是在固定宽度的字段边界上应用匹配。

如果没有规则，很容易将长度为 13 的固定宽度字符串分成 4 个部分，如下所示：

```
(?=^.{13}$).{1}.{5}.{6}.{1} 
```

这是一个示例字段规则：字段可以是所有空格或以 [AZ] 开头并右填充空格。字母之间不能出现空格

如果该字段是我唯一需要验证的内容，我可以使用它：

```
(?=^[A-Z ]{5}$)([ ]{5}|[A-Z]+[ ]*) 
```

当我将此验证添加为较长列表的一部分时，我必须从前瞻中删除 ^ 和 $，并且我开始获得长度不为 5 的匹配项。

这是完整的正则表达式以及一些应该匹配和不匹配表达式的示例文本。

```
(?=^[A-Z ]{13}$)A(?=[A-Z ]{5})([ ]{5}|(?>[A-Z]{1,5})[ ]{0,4})(?=[A-Z ]{6})([ ]{6}|(?>[A-Z]{1,6})[ ]{0,5})Z 
```

如何实施规则，以便对于每个字段，紧接下一个 XX 字符用于匹配并确保匹配不重叠？

应该匹配的行：

```
ABCDEFGHIJKLZ
A           Z
AB          Z
A     G     Z
AB    G     Z
ABCDEF      Z
ABCDEFG     Z
A     GHIJKLZ
AB    GHIJKLZ 
```

不应匹配的行：

```
AB D        Z
AB D F      Z
AB   F      Z
A     G I   Z
A     G I  LZ
A     G    LZ
AB   FG    LZ
AB D FG     Z
AB   FG I   Z
AB D FG i   Z 
```

以下 3 不应该匹配但可以匹配。

```
AB   FG     Z
AB   FGH    Z
AB  EFGH    Z 
```

* * *

### 编辑：

**为清楚起见，带有命名捕获的通用解决方案**（基于 Ωmega 的答案）：

```
(?<F1>F1Regex)(?<=^.{Len(F1)})
(?<F2>F2Regex)(?<=^.{Len(F1+F2)})
(?<F3>F3Regex)(?<=^.{Len(F1+F2+F3)})
               ...
(?<Fn>FnRegex) 
```

另一个例子：正则表达式和零宽度正回溯之间的空格 (?<= 是为了清楚起见。

```
(?<F1>\d{2})    (?<=^.{2})
(?<F2>[A-Z]{5}) (?<=^.{7})
(?<F3>\d{4})    (?<=^.{11})
(?<F4>[A-Z]{6}) (?<=^.{17})
(?<F5>\d{4}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:16:32.867

如果输入字符串的大小是固定的，那么您可以使用前瞻和后视匹配特定位置，如下所示：

```
(?<=^.{s})(?<fieldName>.*)(?=.{e}$) 
```

在哪里：

*   s = 起始位置
*   e = 字符串长度 - 匹配长度 - s

如果您连接多个正则表达式，例如这个，那么您将获得具有特定定位的所有字段。

**例子**

*   固定长度：10
*   字段 1：开始 0，长度 3
*   字段 2：开始 3，长度 5
*   字段 3：开始 8，长度 2

使用此正则表达式，忽略空格：

```
var match = Regex.Match("0123456789", @"
    (?<=^.{0})(?<name1>.*)(?=.{7}$)
    (?<=^.{3})(?<name2>.*)(?=.{2}$)
    (?<=^.{8})(?<name3>.*)(?=.{0}$)",
        RegexOptions.IgnorePatternWhitespace)

var field1 = match.Groups["name1"].Value;
var field2 = match.Groups["name2"].Value;
var field3 = match.Groups["name3"].Value; 
```

您可以放置​​任何您想要匹配字段的规则。

我`.*`都用过，但你可以在那里放任何东西。

**示例 2**

```
var match = Regex.Match(" 1a any-8888", @"
    (?<=^.{0})(?<name1>\s*\d*[a-zA-Z])(?=.{9}$)
    (?<=^.{3})(?<name2>.*)(?=.{4}$)
    (?<=^.{8})(?<name3>(?<D>\d)\k<D>*)(?=.{0}$)
    ",
        RegexOptions.IgnorePatternWhitespace)

var field1 = match.Groups["name1"].Value; // " 1a"
var field2 = match.Groups["name2"].Value; // " any-"
var field3 = match.Groups["name3"].Value; // "8888" 
```

**这是你的正则表达式**

我测试了所有这些，但是这个样本是你说不应该通过的样本，但是通过了……这一次，它不会通过：

```
var match = Regex.Match("AB   FG     Z", @"
    ^A
    (?<=^.{1})  (?<name1>([ ]{5}|(?>[A-Z]{1,5})[ ]{0,4}))  (?=.{7}$)
    (?<=^.{6})  (?<name2>([ ]{6}|(?>[A-Z]{1,6})[ ]{0,5}))  (?=.{1}$)
    Z$
    ",
        RegexOptions.IgnorePatternWhitespace)

// no match with this input string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T19:15:36.417

```
Match match = Regex.Match(
  Regex.Replace(text, @"^(.)(.{5})(.{6})(.)$", "$1,$2,$3,$4"),
  @"^[A-Z ],[A-Z]*[ ]*,[A-Z]*[ ]*,[A-Z ]$"); 
```

**[在此处](http://ideone.com/PygriG)**检查此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T21:02:58.947

我之前已经发布过这个，但这个答案更具体到你的问题，而不是一概而论。

这可以按照您想要的方式解决您在问题中提出的所有案例。

**测试您问题中所有案例的程序**

```
class Program
{
    static void Main()
    {
        var strMatch = new string[]
                      {
                          // Lines that should match:
                          "ABCDEFGHIJKLZ",
                          "A           Z",
                          "AB          Z",
                          "A     G     Z",
                          "AB    G     Z",
                          "ABCDEF      Z",
                          "ABCDEFG     Z",
                          "A     GHIJKLZ",
                          "AB    GHIJKLZ",
                      };

        var strNotMatch = new string[]
                      {
                          // Lines that should not match:
                          "AB D        Z",
                          "AB D F      Z",
                          "AB   F      Z",
                          "A     G I   Z",
                          "A     G I  LZ",
                          "A     G    LZ",
                          "AB   FG    LZ",
                          "AB D FG     Z",
                          "AB   FG I   Z",
                          "AB D FG i   Z",

                          // The following 3 should not match but do.
                          "AB   FG     Z",
                          "AB   FGH    Z",
                          "AB  EFGH    Z",
                      };

        var pattern = @"
                ^A
                (?<=^.{1})  (?<name1>([ ]{5}|(?>[A-Z]{1,5})[ ]{0,4}))  (?=.{7}$)
                (?<=^.{6})  (?<name2>([ ]{6}|(?>[A-Z]{1,6})[ ]{0,5}))  (?=.{1}$)
                Z$
                ";

        foreach (var eachStrThatMustMatch in strMatch)
        {
            var match = Regex.Match(eachStrThatMustMatch,
                pattern, RegexOptions.IgnorePatternWhitespace);

            if (!match.Success)
                throw new Exception("Should match.");
        }

        foreach (var eachStrThatMustNotMatch in strNotMatch)
        {
            var match = Regex.Match(eachStrThatMustNotMatch,
                pattern, RegexOptions.IgnorePatternWhitespace);

            if (match.Success)
                throw new Exception("Should match.");
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T19:20:50.577

我认为可以通过单个正则表达式模式来验证它

```
^[A-Z ][A-Z]*[ ]*(?<=^.{6})[A-Z]*[ ]*(?<=^.{12})[A-Z ]$ 
```

如果您还需要捕获所有此类组，请使用

```
^([A-Z ])([A-Z]*[ ]*)(?<=^.{6})([A-Z]*[ ]*)(?<=^.{12})([A-Z ])$ 
```

# mysql - 当我将超过 1600 个（大约）帖子导入 Wordpress 时，我的网站崩溃了，是否存在数据库限制？

> ID：12990936
> 
> 赞同：0
> 
> 时间：2012-10-20T17:31:38.010
> 
> 标签：mysql, database, wordpress, database-design, import

我正在使用 CSV 导入器将大约 2500 个自定义帖子导入 Wordpress。我已将我的大型 csv 拆分为 25 个较小的文件，每个文件包含 100 个帖子，因此我不会遇到超时问题。

当我到达文件 16 时，它可以正常导入，这意味着我在数据库中大约有 1600 - 1800 个帖子。

但是，当我尝试添加下一批 100 时，我的网站停止工作。（不是 wordpress 后端，而是前端）

在 Firebug 中，我得到“**网络错误 500 内部服务器错误**”。

我已经将我的数据库恢复了几次，并尝试添加不同的文件以确保我的文件没有损坏，并且同样的事情一次又一次地发生。

我不确定发生了什么，但我最好的猜测是我可以在数据库中创建的条目数量必须有某种限制，或者我可能会丢失一些东西？

有任何帮助回答为什么会发生这种情况的人吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:42:07.370

您可能遇到了主机上的 PHP 超时和内存限制。

在 php.ini 中增加`max_execution_time`和`max_input_time`也增加内存。

如果您无权访问 php.ini 文件，请在 .htaccess 中尝试这些*可能会*覆盖 php.ini，具体取决于主机服务器配置。*但他们也可能会因为网络主机设置而引发 500 错误，因此请准备好恢复 .htaccess*

```
max_execution_time = 120
max_input_time = 120
memory_limit = 64M
post_max_size = 64M
upload_max_filesize = 64M 
```

您还可以尝试在 wp-config.php 中使用文件顶部附近的这一行来提高 PHP 内存：

`define('WP_MEMORY_LIMIT', '64M');`

这可能使您无需提高超时即可导入。

如果这些都不起作用，请询问您的主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T14:04:27.913

我只是想添加对我有用的东西。上面来自 markratledge 的代码是正确的，但只需要进行一些调整即可在 htaccess 表单中实际工作。

我写如下

```
php_value max_execution_time 120
php_value max_input_time 120
php_value memory_limit 256M 
```

基本上删除'='并添加 php_value

# python - 为内置和类实例定义运算符

> ID：12990940
> 
> 赞同：3
> 
> 时间：2012-10-20T17:32:13.303
> 
> 标签：python

在 Python 中，您可以通过定义`__add__`. 这将使添加具有其他值/实例的类实例成为可能，但您不能将内置函数添加到实例中：

```
foo = Foo()
bar = foo + 6 # Works
bar = 6 + foo # TypeError: unsupported operand type(s) for +: 'int' and 'Foo' 
```

有什么办法可以启用它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T17:35:08.320

当您的实例位于右侧时，您必须定义[`__radd__(self, other)`](http://docs.python.org/reference/datamodel.html#object.__radd__)覆盖运算符的方法。`+`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T17:48:58.027

You cannot override the + operator for integers. What you should do is to override the `__radd__(self, other)` function *in the Foo class only*. The `self` variable references a `Foo` instance, not an integer, and the `other` variable references the object on the **left** side of the + operator. When `bar = 6 + foo` is evaluated, the attempt to evaluate `6.__add__(foo)` fails and then Python tries `foo.__radd__(6)` (reverse `__add__`). If you override `__radd__` inside `Foo`, the reverse `__add__` succeeds, and the evaluation of `6 + foo` is the result of `foo.__radd__(6)`.

```
def __radd__(self, other):
   return self + other 
```

# delphi - 规范枚举器 MoveNext 函数中是否需要 if 语句？

> ID：12990942
> 
> 赞同：1
> 
> 时间：2012-10-20T17:32:37.977
> 
> 标签：delphi

Delphi 枚举器中的规范 MoveNext 是这样编写的：

```
function TListEnumerator.MoveNext: Boolean;
begin
  Result := FIndex < FList.Count - 1;
  if Result then
    Inc(FIndex);
end; 
```

这是整个 RTL、VCL 等使用的形式。这种形式似乎在 3 ^(rd)方代码中也很普遍。

我认为它可以更简单地写成这样：

```
function TListEnumerator.MoveNext: Boolean;
begin
  Inc(FIndex);
  Result := FIndex < FList.Count;
end; 
```

为什么不能使用更简单的形式有什么好的理由吗？

* * *

我的推理如下。一旦`MoveNext`返回`False`，该`Current`属性将不再被访问。不在列表末尾没关系，`FIndex`因为它再也不会使用了。for in 循环实际上是这样实现的：

```
while Enumerator.MoveNext do
  Enumerator.Current.DoSomething; 
```

事实上`FIndex`，越界对我来说实际上更有意义。这意味着如果有人使用手写的枚举器代码，那么如果在返回`Current`后访问，他们将得到范围检查错误。`MoveNext``False`

更重要的`FIndex`是`-1`，在第一次调用`MoveNext`. 这是左边列表中的一个。在最后一次调用 之后`MoveNext`，返回的那个`False`不是合适的，`FIndex`就是`Count`右边列表中的那个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:35:55.530

您假设`TListEnumerator`只会在`for`循环中使用。尽管这将是迄今为止最常见的情况，但如果不是，您建议的版本可能会出现异常。`MoveNext`在它已经返回一次之后再次调用就可以了`False`。如果你继续调用`MoveNext`直到它返回`True`，你必须得到一个无限循环，并且使用你建议的版本，循环不会是无限的，一旦你过去了它就会终止`FIndex = MaxInt`。

请参阅 Delphi 的实现所基于的文档[`IEnumerator.MoveNext`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.movenext.aspx)（IIRC，它实际上首先在现已死的 Delphi .NET 中可用）：

> 当枚举数位于此位置时，对 MoveNext 的后续调用也将返回 false，直到调用 Reset。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T18:19:44.967

纯粹从语义上思考，我会说原始版本是正确的。把它想象成一场对话：

```
Application: Hey, list. Go to the next item.
List: No, sorry. I can't.
Application: Oh, allright.
  <some time later:>
Application: List, please give me the current item
List: No problem, here you go.

Whereas in your suggestion, it would go like this:

Application, Hey, list. Go to the next item.
List: No, that's impossible.
Application: Oh, all right.
  <some time later:>
Application: Hi again, List. Give me the current item.
List: Here you go. 
Application: Thanks, mate.
  <some time later, when using the item:>
Application: What the ????! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T09:46:58.517

有趣的问题（+1）。如果不了解枚举器的所有可能用途（或根本不知道它的用途），乍一看，它的功能在列表的开头和结尾之间有所不同，这确实看起来很奇怪。正如您所说：在开始时`Current`导致*List index out of bounds*错误，那么为什么不在最后呢？似乎不一致。

但再想一想：一旦创建了一个枚举器，由什么或谁创建，列表的边界是未知的，所以第一个元素不是也不能被选择。这与边界已知且索引受限时的最终行为相比。

数据集的功能完全相同，但枚举器的实现可能会受益于`BOF`- 和 -`EOF`类似的行为。

# vb.net - 在 TextBox 的 KeyDown 处理程序下更改 KeyCode

> ID：12990943
> 
> 赞同：1
> 
> 时间：2012-10-20T17:32:42.300
> 
> 标签：vb.net

我必须将我的一些旧代码从 VB6 重写为 VB.NET，这是一些我不知道该怎么做的事情。例如，我必须在文本框的 keyDown 事件处理程序下替换一些键码，没有帮助我无法做到这一点。

最简单的说，我有可行的 VB6 代码：

```
If KeyCode = vbKeyUp Then
   KeyCode = vbKeyEscape
End If 
```

当我尝试从字面上重写时：

```
If e.KeyCode = Keys.Up Then
   e.KeyCode = Keys.Escape
End if 
```

但这不会：

> 错误 2 属性“KeyCode”为“ReadOnly”。

由于我有很多这样的转换要做，这里有什么方法可以实现这个简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T17:58:22.063

在 VB.Net 中模拟这种情况的最佳方法是执行以下操作。当您看到`Up`按键被按下时，取消该事件。然后为该键发送一个人工键事件`Escape`。

```
Protected Overrides Sub OnKeyDown(ByVal e As KeyEventArgs)
    If e.KeyCode = Keys.Up Then
        e.Handled = True
        SendKeys.Send("ESC")
    Else
        MyBase.OnKeyDown(e)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-28T04:32:30.310

```
Private Sub txtDUnidades_KeyPress(sender As Object, e As KeyPressEventArgs) Handles txtDUnidades.KeyPress
    If e.KeyChar = "." Then

        e.KeyChar = "," 
        e.Handled = False
    End If
    End Sub 
```

# php - 如何在 PHP 中向关联数组添加键？

> ID：12990944
> 
> 赞同：0
> 
> 时间：2012-10-20T17:32:44.303
> 
> 标签：php, arrays, key, associative-array

我想要的是：

```
Array
(
    [0] => Array
        (
            [id] => 154
            [url] => http://farm9.staticflickr.com/8187/8105302152_c886bc2179_c.jpg
            [categorie_id] => 2
            [user_id] => 23
            [time] => 2012-10-20 18:13:40
        )
) 
```

是）我有的：

```
Array
(
    [id] => 158
    [url] => http://farm9.staticflickr.com/8468/8105709759_915c1092b4_c.jpg
    [categorie_id] => 2
    [user_id] => 23
    [time] => 2012-10-20 19:30:16
) 
```

（不要介意价值观，它们是不同的，我知道）

其实很简单的问题，但我只是找不到它如何解决它。两个数组都是关联获取的（这是数据库的返回）。

在上面的示例中，有多个记录（图片），因此它返回一个 0,1,2,3, ... 并在其中返回数据。当我的数据库中只有一张图片时，我会收到错误，因为我在该数组中没有数字键（'0'）。所以我想添加'0'键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T17:35:05.953

因此，您只是希望将现有数组嵌套一层。最好的方法是将其附加到一个新数组中：

```
$original_array = array('id'=>158, 'url'=>'http:....','categorie_id' => 2, 'user_id' => 23, 'time' => '2012-10-20');

// New array to hold the result
$output = array();
// Append the old array onto the new one with []
$output[] = $original_array;
print_r($output);
Array
(
    [0] => Array
        (
            [id] => 158
            [url] => http:....
            [categorie_id] => 2
            [user_id] => 23
            [time] => 2012-10-20
        )

) 
```

如果您*必须*在外部数组中指定键，您也可以这样做：

```
// Make sure it is at key 1
$output[1] = $original_array; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-20T17:37:02.907

我不确定我是否正确阅读了您的问题，但听起来您只是想要这个：

```
$parent_arr = array ();
$sub_arr = array (
    'id' => 158,
    'url' => '/*url*/',
    'categorie_id' => 2,
    'user_id' => 23,
    'time' => '2012-10-20 19:30:16');

$parent_arr[0] = $sub_arr; 
```

这是否回答了您的问题，还是我完全错过了您的要求？

您可能知道，您可以通过以下三种方式之一分配新的数组键：

1.  像我在上面的示例中那样手动设置密钥`$parent_arr[0]`：
2.  让 PHP 选择下一个可用的数组键：`$parent_arr[]`
3.  使用[array_push](http://www.php.net/manual/en/function.array-push.php)或[array_unshift 之](http://www.php.net/manual/en/function.array-unshift.php)类的函数将新项目添加到数组的开头或结尾。

所有这些内容都包含在 PHP 手册的[数组](http://www.php.net/manual/en/book.array.php)部分中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-20T17:36:35.593

你可以这样做

```
$oldArray = Array ( [id] => 158 [url] => http://farm9.staticflickr.com/8468/8105709759_915c1092b4_c.jpg [categorie_id] => 2 [user_id] => 23 [time] => 2012-10-20 19:30:16 );

$newArray = array();
$newArray[] = $oldArray; 
```

或者

```
$newArray[0] = $oldArray; 
```

# java - java 7更新导致启动器出现在mac应用程序切换器中

> ID：12990947
> 
> 赞同：4
> 
> 时间：2012-10-20T17:33:17.777
> 
> 标签：java, macos, jvm

我的 Mac 运行的是 OS X 10.6。以前我安装了 Java 1.6.0_37 和 1.7b06，并且 1.6 被设置为命令行使用的默认值。

我经常做命令行 android 构建。在安装 Java 1.7b09 更新之前，这些将在没有窗口焦点离开我调用构建的终端窗口的情况下执行。应用程序切换器中不会出现任何“新”内容。

*安装1.7b09 后*，当我从命令提示符启动 android 构建时，应用程序切换器菜单（命令选项卡）中会出现一个新应用程序（“Launcher”），并且窗口焦点从终端转移到这个新的 Launcher 应用程序。

我的问题：我应该调整什么设置才能回到 1.7b09 安装之前的工作方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-14T11:35:10.110

Java 版本 1.6 是由 Apple 部署的，但是自 Java 版本 1.7 以来，情况发生了变化。Oracle[现在负责新版本的部署](https://www.java.com/en/download/faq/java_6.xml)。

顺便说一句，该`Launcher`应用程序是一个类似于沙盒的环境，这是 Java 1.7 版的默认设置。就个人而言，我认为禁用沙盒设置是个坏主意。这是有[原因](http://www.javaworld.com/article/2076945/java-security/understanding-the-keys-to-java-security----the-sandbox-and-authentication.html)的。

# database - 用于管理约会的表格

> ID：12990948
> 
> 赞同：1
> 
> 时间：2012-10-20T17:33:18.703
> 
> 标签：database, database-design, relational-database

有人可以帮助数据库设计，我想要一个约会表（`appointment id`, `customer_id`, `date`, `time`），但是这个约会可能是前一个约会的后续，我想保持到那个约会的链接。我可以将“appointment_type”作为另一个属性，但是我怎么知道哪个是主要约会，而不是后续约会？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T17:42:04.047

你需要一个外键自引用；我想说简单地添加一个（可为空的整数）字段（如果您需要链接以两种方式进行 `previous_appointment_id`，也许还可以）。`next_appointment_id`

这样，您还可以通过检查是否为空来判断约会的*类型。*`previous_appointment_id`

# c - 我的 sqlite 数据库文件的位置在哪里？

> ID：12990951
> 
> 赞同：0
> 
> 时间：2012-10-20T17:33:27.593
> 
> 标签：c, sqlite

我使用 sqlite 在 C 中创建了一个数据库。这是代码：

```
int x = sqlite3_open(argv[1], &db); 
```

`argv[1]`是一个包含数据库名称的参数。我认为数据库应该存储在以 .db 结尾的文件中，但我找不到该文件。

我在哪里可以找到提到的文件（具有数据库结构的文件等......）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:38:28.757

该文件将在您指定的路径或程序运行的任何位置（例如您的`C:\Users\User Name`目录）创建。

它不一定有`.db`扩展名，即：您可以创建一个任意命名的文件。如果您需要找到它，也许您可​​以尝试查找在给定时间间隔内创建的文件。

您最好的选择是始终指定完整路径，并创建带有 .sqlite 或 .db 扩展名的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T17:39:07.813

sqlite3_open 定义为

```
int sqlite3_open(
   const char *filename,   /* Database filename (UTF-8) */
   sqlite3 **ppDb          /* OUT: SQLite db handle */
); 
```

所以无论你在第一个参数中输入的是什么，都会调用数据库。.db 后缀不会自动添加。

至于存储文件的目录，如果您在 argv [1](http://www.sqlite.org/fileformat.html)中指定了绝对路径，则该文件将存储在该目录中，否则它应该在当前工作目录中。

如果您**确实**需要该文件并且它不在您期望的位置，也没有 .db 扩展名（因为您忘记指定它）并且您不记得您提供的名称，还有最后一种可能性：请参阅[sqlite 文件格式规范](http://www.sqlite.org/fileformat.html)，sqlite 文件始终以“SQLite 格式 3\000”（以空字符结尾的字符串）开头。

```
find / -exec grep -l "SQLite format 3" {} \; 
```

这将打印包含该字符串的所有文件的名称和路径，但该命令将需要一些时间......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T19:52:31.460

`sqlite3_open`记录为创建数据库，但在您对数据库进行任何更改之前，SQLite 不会实际创建文件。

创建一个表以确保将创建该文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-20T17:37:33.490

我您使用的是 Linux，您可以像这样在终端上使用“定位”命令

```
locate *.db 
```

在 / 目录中。你会得到位置

# objective-c - iOS - GANTracker 没有什么可调度的

> ID：12990954
> 
> 赞同：4
> 
> 时间：2012-10-20T17:34:01.730
> 
> 标签：objective-c, ios, google-analytics

我正在尝试在我的 iOS 应用中安装 Google Analytics SDK 来跟踪页面浏览量和事件。遵循提供的文档后，我似乎根本无法进行跟踪，我想知道有人可以帮助我吗？以下信息可能是相关的 - 我会尽量做到描述性。

*   我的目标是 iOS 4.3 及更高版本的所有设备。
*   我已将 GANTracker.h 包含在我的 project-prefix.pch 文件中，并且构建正常

下面是我的 appdelegate.m 代码中的一个示例，它在 didFinishLaunchingWithOptions 方法中调用

```
/*  Google Analytics tracking code  */

[[GANTracker sharedTracker] setSampleRate:100];

[[GANTracker sharedTracker]setDebug:NO];

[[GANTracker sharedTracker] setDryRun:NO];

[[GANTracker sharedTracker] startTrackerWithAccountID:@"UA-111111-1"
                                       dispatchPeriod:kGANDispatchPeriodSec
                                             delegate:self];
NSLog(@"Dispatch%@", [[GANTracker sharedTracker] dispatch] ? @"ed Successfully": @" Failed");

NSError *error;
if (![[GANTracker sharedTracker] setCustomVariableAtIndex:1
                                                     name:@"iPhone"
                                                    value:@"iv1"
                                                withError:&error])
{
    NSLog(@"There was an error setting this custom variable\n Description: %@\n", [error localizedDescription]);
    NSLog(@"Failure reason: %@\n", [error localizedFailureReason]);
    NSLog(@"May we suggest: %@\n", [error localizedRecoverySuggestion]);
}

if (![[GANTracker sharedTracker] trackEvent:@"Loading"
                                     action:@"App Finished Launching"
                                      label:@"appDidFinishLaunchingWithOptions"
                                      value:-1
                                  withError:&error])
{
    NSLog(@"There was an error in tracking events\n Description: %@\n", [error localizedDescription]);
    NSLog(@"Failure reason: %@\n", [error localizedFailureReason]);
    NSLog(@"May we suggest: %@\n", [error localizedRecoverySuggestion]);
}

NSString *pageUrlString = [[NSString stringWithFormat:@"http://ios.organisation.tld/appentrypoint"] stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
if(![[GANTracker sharedTracker] trackPageview:pageUrlString withError:&error])
{
    NSLog(@"There was an error in tracking initial app entry\n Description: %@\n", [error localizedDescription]);
    NSLog(@"Failure reason: %@\n", [error localizedFailureReason]);
    NSLog(@"May we suggest: %@\n", [error localizedRecoverySuggestion]);

} 
```

在我的应用程序视图控制器中，我想跟踪 pageViews 并按以下方式进行操作：

```
- (void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
NSError *trackError;
NSString *pageUrlString = [[NSString stringWithFormat:@"/aboutsection"] stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
if(![[GANTracker sharedTracker] trackPageview:pageUrlString withError:&trackError])
{
    //Handle error here
    NSLog(@"There was an error tracking this pageview\n Description: %@\n", [trackError localizedDescription]);
    NSLog(@"Failure reason: %@\n", [trackError localizedFailureReason]);
    NSLog(@"May we suggest: %@\n", [trackError localizedRecoverySuggestion]);
}
} 
```

回到我的 appdelegate.m 我还设置了以下委托

```
- (void)trackerDispatchDidComplete:(GANTracker *)tracker eventsDispatched:(NSUInteger)hitsDispatched eventsFailedDispatch:(NSUInteger)hitsFailedDispatch
{
    NSLog(@"Google analytics dispatch\n Succeeded?:\n %i, \n Failed?: %i", hitsDispatched, hitsFailedDispatch);
} 
```

这会记录为 Succeeded?: 5 Failed?: 0 所以那里没有失败

我还看到一条日志消息...没有可发送的信息。登录到谷歌分析我看不到访问。查看实时分析也显示没有发生任何事情。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:59:29.797

它仅在我尝试以下步骤时才有效：

1- 在 appdelegate .h 类 #import "GAI.h"

2- 在函数“didFinishLaunchingWithOptions”中的 appdelegate 添加此代码

```
 // Optional: automatically send uncaught exceptions to Google Analytics.
    [GAI sharedInstance].trackUncaughtExceptions = YES;
    // Optional: set Google Analytics dispatch interval to e.g. 20 seconds.
    [GAI sharedInstance].dispatchInterval = 20;
    // Optional: set debug to YES for extra debugging information.
    [GAI sharedInstance].debug = NO;
    // Create tracker instance.
    [[GAI sharedInstance] trackerWithTrackingId:"your tracking application id from google analytics"]; 
```

3- 在任何 uiviewcontroller 类。h #import "GAI.h"

4- at .h 将这部分“:uiviewcontroller”替换为“:GAITrackedViewController”

5- at .m add in view 确实加载了这一行

```
[[[GAI sharedInstance] defaultTracker] trackView:"your view title"]; 
```

*   请注意第 5 点，必须以这种方式实现，我认为 GA 库在任何其他方式和文档中也存在问题。我尝试并搜索了很多关于这个问题的方法，但偶然它只能通过这种方式工作，除了它是在 GA 屏幕上显示效果的最快方式。

*   另注：您必须在谷歌分析中为移动设备创建应用程序，注意应用程序的 ID 以在 IOS 应用程序中添加正确

# javascript - HTML 文件中的 javascript 代码辅助在 Aptana 3 中无法正常工作

> ID：12990955
> 
> 赞同：3
> 
> 时间：2012-10-20T17:34:02.787
> 
> 标签：javascript, aptana, aptana3

我开始使用 Aptana3 进行 Web 开发，在 html 文件中使用 javascript 时，我得到的建议比在 .js 文件中工作时得到的建议要少。我拍了这张截图：

HTML 文件

[https://www.dropbox.com/s/31fn0samrk8cbbf/html.jpeg](https://www.dropbox.com/s/31fn0samrk8cbbf/html.jpeg)

文件

[https://www.dropbox.com/s/ej135t5k9v3w3j9/jscript.jpeg](https://www.dropbox.com/s/ej135t5k9v3w3j9/jscript.jpeg)

所以基本上在html中，我对javascript的建议很差。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T19:09:00.453

我认为这与将跳过 HTML 中的 <script> 的 JFlex（Aptana 使用的扫描仪生成器）有关。当我在 JFlex 中添加新的词法规则以包含 <script type="application/javascript"> 时，Aptana Studio 3 将在 HTML 中显示 JavaScript 内容辅助。 [https://github.com/JockiHendry/aptanastudio-contentassist-patch](https://github.com/JockiHendry/aptanastudio-contentassist-patch)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T21:32:08.113

尝试将 .html 文件的默认编辑器更改为 Aptana JS 编辑器。

去`Preferences > General > Editors -> File Associations`

然后从顶部列表中选择 *.html 并在底部列表中选择 Aptana JS Editor，然后按“默认”按钮。

# python - 进程完成后如何停止python多处理服务器

> ID：12990958
> 
> 赞同：2
> 
> 时间：2012-10-20T17:34:23.927
> 
> 标签：python, multiprocessing, distributed-computing

我正在尝试使用 python 的多处理模块在几台机器上运行分布式任务，我一直在使用[这篇博](http://eli.thegreenplace.net/2012/01/24/distributed-computing-in-python-with-multiprocessing/)文作为参考。

但是，这篇文章的任务使用了一个作业队列，并将结果放入一个结果队列中，这两个队列都由 JobQueueManager（它是 SyncManager 的子类）管理。这个管理器有一个服务器，它启动并持续运行，直到结果队列被填满，当它调用`manager.shutdown()`.

我的问题是我的任务不需要结果队列，所以我试图弄清楚如何知道何时停止服务器。我可以让服务器持续运行`serve_forever`，然后手动停止它，或者创建一个虚拟队列，以与示例中相同的方式填充，并在服务器与原始作业数量一样大时停止服务器。

我不想手动停止它，但第二种解决方案似乎相当老套。似乎一种常见的方法（没有服务器）是调用`join()`每个进程，但我不知道管理器是否有办法找出哪个进程从队列中删除了每个作业。

我的后备计划是虚拟队列方法的一种变体，但是共享计数器变量作为每个进程的最后一步递增，但我想知道是否有任何建议使用多处理库中的方法，或者是否这是不可靠的。

谢谢

编辑：我没有提到我不使用结果队列的原因是我将处理结果存储到 Redis 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:58:01.577

在给出的示例中：

```
outdict = shared_result_q.get() 
```

结果队列用于异步等待结果。这是主要的沟通方式。没有它，您需要另一种信号机制来确认任务结束事件。只需`None`排队即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T01:26:29.177

正如我的更新所示，我已经使用了一个 redis 数据库来存储我的任务结果，所以我不必担心管理不同机器之间的字典。

我最终采用的解决方案也使用了 Redis 数据库。每当每个进程完成时，我都会将带有进程信息的字符串推送到列表中（`r_server.lpush(...)`在[redis-py](https://github.com/andymccurdy/redis-py)中）。在服务器端，我没有`get`对结果队列使用阻塞方法，而是使用 Redis 的阻塞弹出`rs.blpop()`，它的工作方式相同。

这与这里的博客文章和其他建议几乎相同，以创建一个虚拟队列并使用`get()`，但只是使用 redis，所以我没有额外方法参数和向管理器注册额外方法的开销。

# c# - 文本框的撤消功能

> ID：12990959
> 
> 赞同：5
> 
> 时间：2012-10-20T17:34:26.720
> 
> 标签：c#, winforms

我正在为 TextBox 开发一个非常简单的撤消功能，但遇到了一个奇怪的问题。当我尝试从`Stack`包含所有更改的字符串中获取字符串并将它们放入文本框中时，我看不到任何更改。

我做了一个小调试标签来检查这是否真的有效。我发现它在标签中工作，但在文本框中它使用自己的撤消功能。

有没有办法取消或覆盖文本框撤消并使用我自己的功能？

这是我所做更改的示例代码：

```
 private void Form1_KeyDown(object sender, KeyEventArgs e)
        if (e.KeyCode == Keys.Z && (ModifierKeys & Keys.Control) == Keys.Control)
            {
                nameTextBox.Text = undoName.GetLastChange(); //--> not working

                undoDebuglabel.Text = undoName.GetLastChange(); --> working
            }
} 
```

GetLastChange() 正在从`Stack`类内部获取信息。

就像文本框不让我看到更改一样。可能是因为我使用相同的快捷方式`CTRL + Z`来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T17:39:00.037

使用[ClearUndo](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.clearundo.aspx)方法清除文本框自己的堆栈。尝试这个：

```
nameTextBox.ClearUndo();
nameTextBox.Text = undoName.GetLastChange(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T17:49:41.200

You can create your own TextBox to handle history by inheriting from System.Windows.Forms.TextBox. Take a look at my sample:

```
public class HistoryTextBox: System.Windows.Forms.TextBox
{
    bool ignoreChange = false;
    List<string> storage = null;

    protected override void OnCreateControl()
    {
        base.OnCreateControl();
        //init storage...
        storage = new List<string>();
    }

    protected override void OnTextChanged(EventArgs e)
    {
        base.OnTextChanged(e);
        //save change to storage...
        if (!ignoreChange)
        {
            storage.Add(this.Text);
        }
    }

    public void Undo()
    {
        if (storage.Count > 0)
        {
            this.ignoreChange = true;
            this.Text = storage[storage.Count - 1];
            storage.RemoveAt(storage.Count - 1);
            this.ignoreChange = false;
        }
    }
} 
```

Everytime you need to undo just call:

```
historyTextBox1.Undo(); 
```

This class will give you multiple histoy records.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-06T14:38:52.050

我扩展了*Geregor*和*Keyboard*的答案。我无法让代码像 Visual Studio 2017 中发布的那样工作，所以做了一个小的调整。然后我也想要一个重做功能，所以我添加了几行代码。这在我的测试中似乎工作正常，我想我会分享，因为它回答了问题并扩展了。

此代码添加了撤消、重做，您可以按住 Ctrl-Z 或 Ctrl-Y 让它在列表中“运行”。

```
using System;
using System.Collections.Generic;
using System.Windows.Forms;

namespace CodeBuilder
{
    public class HistoryTextBox : System.Windows.Forms.TextBox
    {
        bool ignoreChange = true;
        List<string> storageUndo = null;
        List<string> storageRedo = null;

        protected override void OnCreateControl()
        {
            base.OnCreateControl();
            storageUndo = new List<string>();
            storageRedo = new List<string>();
            ignoreChange = false;
        }

        protected override void OnTextChanged(EventArgs e)
        {
            base.OnTextChanged(e);
            if (!ignoreChange)
            {
                this.ClearUndo();
                if (storageUndo.Count > 2048) storageUndo.RemoveAt(0);
                if (storageRedo.Count > 2048) storageRedo.RemoveAt(0);

                storageUndo.Add(this.Text);
            }
        }

        protected override void OnKeyDown(KeyEventArgs e)
        {

            if (e.KeyCode == Keys.Z && (ModifierKeys & Keys.Control) == Keys.Control)
            {
                this.ClearUndo();
                ignoreChange = true;
                this.Undo();
                ignoreChange = false;
            }
            else if (e.KeyCode == Keys.Y && (ModifierKeys & Keys.Control) == Keys.Control)
            {
                this.ClearUndo();
                ignoreChange = true;
                this.Redo();
                ignoreChange = false;
            }
            else
            {
                base.OnKeyDown(e);
            }
        }

        public void Redo()
        {
            if (storageRedo.Count > 0)
            {
                this.ignoreChange = true;
                this.Text = storageRedo[storageRedo.Count - 1];
                storageUndo.Add(this.Text);
                storageRedo.RemoveAt(storageRedo.Count - 1);
                this.ignoreChange = false;
            }
        }

        public new void Undo()
        {
            if (storageUndo.Count > 0)
            {
                this.ignoreChange = true;
                storageRedo.Add(this.Text);
                this.Text = storageUndo[storageUndo.Count - 1];
                storageUndo.RemoveAt(storageUndo.Count - 1);
                this.ignoreChange = false;
            }
        }
    }
} 
```

# c# - 在 SqlQuery<>() 中恢复虚拟成员

> ID：12990960
> 
> 赞同：1
> 
> 时间：2012-10-20T17:34:30.853
> 
> 标签：c#, sql, linq, entity-framework

为了提高具有大量数据的页面的请求时间，我尝试使用 Context.Database.SqlQuery 方法，而不是使用 LINQ

```
Context.Database.SqlQuery<Inschrijving>("select * from dbo.inschrijving join dbo.duif on dbo.duif.duifid = dbo.inschrijving.duifid  where vluchtid = {0} and duivenmelker_duivenmelkerid = {1}",vluchtId, duivenmelker.DuivenmelkerId); 
```

这可行，但在我的课堂上我使用虚拟成员。这些在 sqlquery 方法中为空。

我已经尝试过其他类型的连接，目前我正在使用一种方法来恢复具有 id 的虚拟对象。

具有虚拟对象的类的片段：

```
[Key,ForeignKey("Duif"), Column(Order = 0)]
public int DuifId { get; set; }
public virtual Duif Duif { get; set; } 
```

我怎样才能恢复对象中的虚拟成员（以更好的方式）？

有没有办法在 sqlquery 中一次完成这一切？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:55:33.920

> 我怎样才能恢复对象中的虚拟成员（以更好的方式）？

你不会。`SqlQuery`只能加载顶级类但不能加载关系。您需要为要加载的每种类型单独执行`SqlQuery`，并且应该使用此版本：

```
Context.Set<Inschrijving>().SqlQuery(....); 
```

这将使您的实体被跟踪。EF 将在通过单独的查询加载时修复关系，或者为未加载的关系提供延迟加载。

# java - 将 UML 关系映射到 java

> ID：12990962
> 
> 赞同：5
> 
> 时间：2012-10-20T17:34:38.467
> 
> 标签：java, uml

我们如何将基本的 UML 关系（如聚合、依赖、关联）映射到 Java 类？这实际上是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T18:11:06.743

依赖项可以是任何东西，因此无法判断它是如何映射到 Java 的。它可以是一个类作为局部变量类型的简单用法；甚至可能是根本没有出现在代码中的依赖项。

一个协会要具体得多。它通常由引用另一个的类中的实例变量（属性/字段）实现。如果是双向关联，则其他类具有相应的属性。如果上限为 1，则对应的角色是纯 Java 字段。如果大于 1，则使用集合。另一种实现方案将使用具有链接元组集合的额外类。对于双向关联，您可能还想调查“参照完整性”。

聚合是一种特殊的关联。代码的区别通常是聚合通常在构造时已经得到它的部分（例如在构造函数中）。

您可以尝试实现样式（所谓的 CodeStyles），例如使用[UML Lab](http://www.uml-lab.com/) - 它允许您查看不同的关联实现（注意：我是 UML Lab 供应商的员工）。当然，还有许多其他 UML 工具可以为关联生成代码。

正如 AmitD 所建议的那样，阅读一本关于它的书不会有什么坏处，因为关联可能会变得非常复杂。

# android - 安卓 4.1 上的 FLAC 编解码器

> ID：12990970
> 
> 赞同：1
> 
> 时间：2012-10-20T17:35:09.170
> 
> 标签：android, audio, media, codec

4.1 的文档声明支持 FLAC 编解码器。但是，编解码器的 mediarecorder.encoder 列表不包括 FLAC。

如果我想在 flac 上以 16000Mhz 录制音频，以便输出可以直接转到 ..speech-api 调用，我不知道除了录制到中间格式然后插入 ffmpeg 步骤以获得我需要的内容之外还能做什么发送到语音 api。

[http://developer.android.com/reference/android/media/MediaRecorder.AudioEncoder.html](http://developer.android.com/reference/android/media/MediaRecorder.AudioEncoder.html)

上面的链接没有提到 FLAC。

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

上面的链接包括 FLAC 作为 4.1 的核心编解码器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T21:23:04.147

根据文档，对于最高 v4.1 的版本，有一个 FLAC*解码器*，但没有 FLAC*编码器*。

# php - 分配对静态变量的引用

> ID：12990971
> 
> 赞同：0
> 
> 时间：2012-10-20T17:35:25.617
> 
> 标签：php

我正在尝试编写一个“智能”数组搜索函数，它会记住最后找到的项目。

```
function &GetShop(&$shops, $id) {
    static $lastShop = null;
    if ($lastShop == null) {
        echo "lastShop is null <br/>";
    } else {
        echo "lastShop: [" . print_r($lastShop, true) . "]<br/>";
    }
    if ($lastShop != null && $lastShop['id'] == $id) {
        return $lastShop;
    }
    for ($i = 0; $i < count($shops); $i++) {
        if ($shops[$i]['id'] == $id) {
            $lastShop = &$shops[$i];
            return $shops[$i];
        }
    }
}

$shops = array(
    array("id"=>"1", "name"=>"bakery"),
    array("id"=>"2", "name"=>"flowers")
);

GetShop($shops, 1);
GetShop($shops, 1);
GetShop($shops, 2);
GetShop($shops, 2); 
```

但是，该行似乎有一个发行者：

```
$lastShop = &$shops[$i]; 
```

当我按原样运行这个函数时，我得到这个输出：

```
lastShop is null 
lastShop is null 
lastShop is null 
lastShop is null 
```

当我删除“&”改为按值传递时，它工作正常：

```
lastShop is null 
lastShop: [Array ( [id] => 1 [name] => bakery ) ]
lastShop: [Array ( [id] => 1 [name] => bakery ) ]
lastShop: [Array ( [id] => 2 [name] => flowers ) ] 
```

但是，我想通过引用传递，因为找到的数组需要在之后进行修改。以前有人遇到过这个问题，可以建议他如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:40:01.713

~~您在每次调用的功能块开头分配`NULL`给。`$lastShop`因此它总是重置为`NULL`。~~

我在文档中找到了它：

> 引用不是静态存储的：[…]
> 
> 此示例演示了在为静态变量分配引用时，`&get_instance_ref()`第二次调用该函数时不会记住它。

[http://php.net/manual/en/language.variables.scope.php#language.variables.scope.references](http://php.net/manual/en/language.variables.scope.php#language.variables.scope.references)

# asp.net - 构建连接到 Amazon EC2 Microsoft Server 的 Windows 8 应用程序

> ID：12990972
> 
> 赞同：1
> 
> 时间：2012-10-20T17:35:51.757
> 
> 标签：asp.net, windows-8, client-server, asp.net-web-api, wcf-data-services

**我想要做什么：**
我想使用 c# 和 XAML 构建一个 Windows 8 应用程序。我的应用程序需要连接到远程 IIS 服务器，我正在考虑在 ASP.NET 中编写 Web 服务，这将由我的 Windows 8 应用程序使用。因此，我注册了一个 Amazon EC2 免费层帐户并设置了一个安装了 IIS 和 SQL Server 08 的 Windows Server 2008 实例。我的应用程序包含以下一般功能：
**1.**应用程序将是一个 Windows 8 客户端 + 一个 Google chrome 扩展程序。
**2.**用户将通过 Chrome 扩展程序/Win8 应用程序注册该应用程序。（注册将使用 Google 的 OpenID）
**3.**注册后，用户可以从 Chrome 扩展程序登录并将一些数据保存在远程服务器的数据库中。
**4.**此数据将由用户以各种方式在 Windows 8 客户端应用程序中获取和管理。用户也应该能够从客户端应用程序注册/登录。
**5.**我还想构建一个通知服务，它将监控数据库的变化并在 windows 8 应用程序上向用户发送推送通知。通知应该是动态磁贴通知/应用内咆哮式通知。

**我所知道的：**
**1.**我对 Windows 8 应用程序开发**完全陌生。**
**2.**我以前在大学里使用过 C#、ADO.NET 和 WinForms。我知道 ASP.NET 的基础知识和构建简单的 Web 服务。

**我的问题是：**
**1.**我必须在一个月内构建这个应用程序。这实际上可能吗？考虑到我所知道的，在 ASP.NET 中学习 Windows 8 应用程序开发和构建 Web 服务是否涉及陡峭的学习曲线？
**2.**我真的应该使用 Amazon EC2 来托管我的应用程序的服务器端组件吗？还是微软 Azure？
**3.**谁能给我推荐一些教程/参考资源来帮助我构建我上面提到的那种应用程序（客户端和远程服务器与网络服务）？我有几本用于 Windows 8 应用程序开发的参考书。但我想要一个可以为我提供正确的逐步指导/方法来构建应用程序的参考。
**4.**我应该选择 ASP.NET Web API 还是 Web 服务或 WCF 服务？

如果有人可以对我的上述问题提出一些建议，将非常感激。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:59:13.473

> Q1。我必须在一个月内构建这个应用程序。这实际上可能吗？考虑到我所知道的，在 ASP.NET 中学习 Windows 8 应用程序开发和构建 Web 服务是否涉及陡峭的学习曲线？

A：既然你有C#知识，学习曲线应该不会太差。您可能会在使用 XAML 时遇到更多困难。总体而言，如果您有 C#/.net 背景，则构建 Windows 8 应用程序非常容易。根据您想要包含的功能，一个月对于基本应用程序来说并非不现实。

* * *

> Q2。我真的应该使用 Amazon EC2 来托管我的应用程序的服务器端组件吗？还是微软 Azure？

答：差异很小。它们中的每一个都提供非常相似的功能。由于 Azure 是为 Microsoft 堆栈构建的，因此他们可能有一些更好的工具来完成任务，但最终，无论您采用哪种方式，您的体验都可能相似。我已经使用了两者，通常价格是我在功能上的微小差异的决定因素。

* * *

> Q3。任何人都可以向我推荐可以帮助我构建上面提到的那种应用程序的教程/参考资源（带有 Web 服务的客户端和远程服务器）吗？我有几本用于 Windows 8 应用程序开发的参考书。但我想要一个可以为我提供正确的逐步指导/方法来构建应用程序的参考。

答：您不会找到构建特定应用程序的分步说明。您在 Web 上找到的许多示例都是人为且简单的，因为它们最容易记录和创建教程。话虽如此，有很多网站都有关于基础知识的文档。[从 MSDN 上的此类](http://msdn.microsoft.com/en-us/library/hh556233.aspx)文章开始，然后从那里获取。计划以交互方式构建它，并考虑您做出的决定，以确定它们是否会将您描绘成一个角落。

* * *

> Q4。我应该选择 ASP.NET Web API 还是 Web 服务或 WCF 服务？

答：WCF。

# php - PHP错误函数.imagejpeg

> ID：12990974
> 
> 赞同：0
> 
> 时间：2012-10-20T17:36:02.583
> 
> 标签：php

基本上，我正在开发的脚本有问题。问题是它想创建一个包含 8 位文本的文件夹，“999 Ⅱ”结尾是 2。

```
imagejpeg() [<a href='function.imagepng'>function.imagejpeg</a>]:
Unable to open 'cache/album/ninety-ninenightsⅡ/na.jpeg' for writing: 
No such file or directory in /home/****/public_html/card.php on line 113

<!-- language: lang-php --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:47:07.957

# search - 搜索 nxn 矩阵

> ID：12990977
> 
> 赞同：0
> 
> 时间：2012-10-20T17:36:09.810
> 
> 标签：search, time, matrix, complexity-theory

我只是想确认我的答案，看看是否有更快的方法。

如果有一个已排序的 nxn 矩阵，那么搜索它的最佳方法是什么，它的复杂性是多少？- 对行进行二进制搜索，然后对列进行二进制搜索。O(logN)。

如果有一个 nxn 矩阵，其中行已排序，列未排序，那么搜索它的最佳方法是什么，它的复杂性是多少？- 二进制搜索行，然后线性搜索列。上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:53:43.233

定义排序在矩阵上的含义并定义您要搜索的内容。也许添加一个例子。

为了更清楚，这是排序的（1）：

```
1 6
4 5 
```

或者这是排序的（2）：

```
1 4
5 6 
```

而且，搜索是什么意思。您想在整个矩阵中找到一个值（a），在每一行中找到一个值（b），还是在每一行中找到一个不同的值（c）？

* * *

对于 (1)(a)，它是 n*log(n)（n 次搜索，每行一个）

对于 (2)(a) 它是 log(n) （将其视为一大行，所以 log(n*n) => log(n^2) => 2*log(n) => log(n)

* * *

对于 (1)(b) 它是 n*log(n) （n 次搜索，每行一个）

对于 (2)(b)，它是 log(n)

* * *

对于 (1)(c) 它是 n*log(n) （n 次搜索，每行一个）

对于 (2)(c)，它至少是 n*log(n)，但可能您可以对值进行排序并使用预排序矩阵在 log(n) 或 log(n)*log(n) 中完成，这需要进一步分析

* * *

一切都没有证明，只是基于一些基本的想法。

# jquery - jquery如果url包含？

> ID：12990978
> 
> 赞同：1
> 
> 时间：2012-10-20T17:36:10.413
> 
> 标签：jquery

我正在使用以下内容创建从博客文章顶部的链接到我网站底部的评论的滚动动画：

```
if (location.hash=='#comments') scrollToComments(); 
```

这可以很好地滚动到#comments（即第一条评论）。但是，我也希望它能够滚动到具有以下 id 结构“#comment-%”例如“#comment-22”的单个评论。

有没有办法在 jquery 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:44:36.517

您可以提取哈希，并滚动到相关元素：

```
var hash = document.location.hash;
$(window).scrollTop($(hash).length ? $(hash).offset().top : 0); 
```

使用三元来避免读取`offset()`不存在的元素/jQuery 对象的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:43:53.720

If(regex.test(location.hash)){...}

例如（假设 scrollTo 插件）：

```
if(/^#comments/.test(location.hash)){
  $(window).scrollTo(location.hash, 'slow')
} 
```

# c++ - 由于向量中的值作为函数参数，程序在编译时失败

> ID：12990991
> 
> 赞同：1
> 
> 时间：2012-10-20T17:37:33.330
> 
> 标签：c++, vector, io, std

请看下面的代码

```
#include <iostream>
#include <iomanip>
#include <vector>
#include <string>
#include <sstream>

using namespace std;
bool isEven(int);

 int number;
 vector<int> inputNumbers;
 string line;

int main()
{    
    cout << "Please enter numbers: ";

    getline(std::cin,line);
    istringstream iss(line);

    while(iss>>number)
    {
        inputNumbers.push_back(number);
    }

    size_t vectorSize = inputNumbers.size();

    for(int i=0;i<vectorSize;i++)
    {
        cout << "Result for number " << i << "is: " << isEven(inputNumbers(i));
    }

}

bool isEven(int number)
{
    if(number%2 == 0)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

当我运行这个程序时，它给出了以下错误

```
"/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
make[1]: Entering directory `/cygdrive/c/Users/yohan/Documents/NetBeansProjects/Excersice 6'
"/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/Cygwin-Windows/excersice_6.exe
make[2]: Entering directory `/cygdrive/c/Users/yohan/Documents/NetBeansProjects/Excersice 6'
mkdir -p build/Debug/Cygwin-Windows
rm -f build/Debug/Cygwin-Windows/EvenNumbers.o.d
g++    -c -g -MMD -MP -MF build/Debug/Cygwin-Windows/EvenNumbers.o.d -o build/Debug/Cygwin-Windows/EvenNumbers.o EvenNumbers.cpp
EvenNumbers.cpp: In function `int main()':
EvenNumbers.cpp:32: error: no match for call to `(std::vector<int, std::allocator<int> >) (int&)'
make[2]: *** [build/Debug/Cygwin-Windows/EvenNumbers.o] Error 1
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2
nbproject/Makefile-Debug.mk:79: recipe for target `build/Debug/Cygwin-Windows/EvenNumbers.o' failed
make[2]: Leaving directory `/cygdrive/c/Users/yohan/Documents/NetBeansProjects/Excersice 6'
nbproject/Makefile-Debug.mk:62: recipe for target `.build-conf' failed
make[1]: Leaving directory `/cygdrive/c/Users/yohan/Documents/NetBeansProjects/Excersice 6'
nbproject/Makefile-impl.mk:39: recipe for target `.build-impl' failed

BUILD FAILED (exit value 2, total time: 1s) 
```

如果我删除对 isEven() 的函数调用，这将不会发生。为什么会这样？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T17:39:43.940

更改`isEven(inputNumbers(i))`为`isEven(inputNumbers[i])`。

您打算访问`ith`使用括号运算符的输入数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:40:20.147

问题解决了。我已经换了

输入数字[i]

和

输入数字（一）

# iphone - iPhone iOS自定义UIButton与CAGradientLayer，如何让它指示触摸？

> ID：12990993
> 
> 赞同：3
> 
> 时间：2012-10-20T17:37:52.720
> 
> 标签：iphone, objective-c, ios, uibutton, cagradientlayer

我的视图控制器中有一个自定义样式的 UIButton，它是通过使用 CAGradientLayer 自定义 UIButton、圆角并在图层周围添加边框来实现的。 ![渐变按钮](../Images/bfd5d0381c4dc2b9f39b2474cbbe61df.png)

我喜欢这些按钮的外观和感觉，而且它们也很容易实现，无需使用预渲染图像。但是我遇到了一个问题 -**这样的按钮不会像 UIButton 那样响应触摸**。例如，一个典型的圆角矩形按钮在被点击时会突出显示蓝色，但我的按钮没有。

**`CAGradientLayer`如果我按照下面的代码在 UIButton 上使用自定义背景，如何实现“触摸突出显示按钮”行为？**

谢谢您的意见！

```
+(void)addLinearGradientToView:(UIView*)view TopColor:(UIColor*)topColor BottomColor:(UIColor*)bottomColor
{
    for(CALayer* layer in view.layer.sublayers)
    {
        if ([layer isKindOfClass:[CAGradientLayer class]])
        {
            [layer removeFromSuperlayer];
        }
    }
   CAGradientLayer* gradientLayer = [CAGradientLayer layer];
    //top down gradient
    gradientLayer.startPoint = CGPointMake(0.5, 0);
    gradientLayer.endPoint = CGPointMake(0.5,1);
    gradientLayer.frame = view.bounds;

    gradientLayer.colors = [NSArray arrayWithObjects:(id)[topColor CGColor], (id)[bottomColor CGColor], nil];

    [view.layer insertSublayer:gradientLayer atIndex:0];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T17:49:24.423

If you subclass UIButton you can override the `setHighlighted` method. Here you can set a different Gradient on the button, or change the background color.

```
- (void)setHighlighted:(BOOL)highlighted {
    [super setHighlighted:highlighted];
    // Update the looks of the button
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T16:12:07.310

代码中的 for 循环将引发错误。

你应该像这样向后循环层

```
NSEnumerator *enumerator = [btn.layer.sublayers reverseObjectEnumerator];
for(CALayer *layer in enumerator) {
    if ([layer isKindOfClass:[CAGradientLayer class]])
    {
        [layer removeFromSuperlayer];
    }
} 
```

# .htaccess - 有人可以帮我重写一些 URL 吗？

> ID：12990995
> 
> 赞同：2
> 
> 时间：2012-10-20T17:38:03.040
> 
> 标签：.htaccess

我正在开发一个文件共享网站，现在我想创建对 seo 友好的 url。我尝试了不同的 .htaccess 代码来实现，任何人请帮我实现

我有一个页面`www.mydomain.com/gallery.php?id=2&title=newimage`

我希望他们被要求为`www.mydomain.com/newimage/1.html`

`www.mydomain.com/gallery.php?id=2&title=newimage` 请给我 .htaccess 代码以 重写`www.mydomain.com/newimage/1.html`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:07:38.947

假设**1**和**2**确实是相同的 id，您可以将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
ReewriteRule ^/?([^/]+)/([^/.]+)\.html$ /gallery.php?id=$2&title=$1 [L] 
```

这使得当有人去时`http://mydomain.com/foo/bar.html`，他们会在`/gallery.php?id=bar&title=foo`.

为了更正您无法控制的所有外部链接以开始使用新的更好看的 URL，您也可以添加这些：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /gallery\.php\?id=([^&]+)&title=([^\ ]+)
RewriteRule ^ /%2/%1.html? [L,R=301] 
```

这使得当有人放 时`http://mydomain.com/gallery.php?id=123456&title=blah`，浏览器会被重定向到`http://mydomain.com/blah/123456.html`，从而将浏览器地址栏中的地址更改为更好看的 URL。