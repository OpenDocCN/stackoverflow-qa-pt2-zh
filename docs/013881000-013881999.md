# StackOverflow 问答 13881000-13881999

# objective-c - Objective-c中带有特殊字符的URL

> ID：13881000
> 
> 赞同：0
> 
> 时间：2012-12-14T14:53:25.070
> 
> 标签：objective-c

我正在尝试在我的应用程序中使用此 URL，以便当用户提供正确的信息时，他将能够登录：

```
NSData *data = [NSData dataWithContentsOfURL: [NSURL URLWithString:[NSString stringWithFormat:@"https://www.example.come/login/CheckEligibility?json={'username'%%3A'%@'%%2C'password'%%3A'%@'}", username.text,passowrd.text]]]; 
```

出于某种原因，我得到了例外：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil' 
```

当我在浏览器中测试 URL 时，它工作正常并为我提供了我想要的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:06:42.450

尝试这个

```
NSString *str = [NSString stringWithFormat:@"https://www.example.come/login/CheckEligibility?json={'username':'%@','password':'%@'}", username.text, passowrd.text];
str = [str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString:str];
NSData *data = [NSData dataWithContentsOfURL:url]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:57:16.463

您需要对字符串进行编码，例如：

```
[url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

# svn - tortoisesvn svn:mergeinfo 仅在单个 pc 上更改额外文件以进行合并

> ID：13881002
> 
> 赞同：1
> 
> 时间：2012-12-14T14:53:28.727
> 
> 标签：svn, tortoisesvn, branching-and-merging, visualsvn

有很多帖子询问为什么您会在执行分支和合并时看到仅包含合并信息更改的文件更改。它们都指向一件事：在目录或文件上设置了 svn:mergeinfo 属性。示例：[(1)](https://stackoverflow.com/questions/767418/remove-unnecessary-svnmergeinfo-properties)、[(2)](https://stackoverflow.com/questions/391864/svn-mergeinfo-properties-on-paths-other-than-the-working-copy-root)、[(3)](https://stackoverflow.com/questions/622409/tortoisesvn-using-svnmergeinfo-is-there-a-way-to-turn-it-off)等。

我的生产环境中有 10-15 个文件经常发生这种情况。我将删除这些文件上的这个属性。我无法弄清楚为什么这种行为只发生在我的机器上。我们每周有 7 个活跃的开发人员在我们的存储库上进行分支和合并，据我所知，只有我的分支和合并会导致这些不必要的 mergeinfo 属性更改发生。

我将删除 mergeinfo 属性，但它不会告诉我：**为什么只有我？！** 有任何想法吗？

我正在针对 subversion 1.7.7 存储库运行 TortoiseSVN 1.7.10 和 VisualSVN 2.5.2。

# jquery - 如何创建用于动态创建 Ul 的 jquery 代码

> ID：13881003
> 
> 赞同：1
> 
> 时间：2012-12-14T14:53:29.247
> 
> 标签：jquery

我希望 jquery 代码在 div 标签中动态创建以下 Ul 名称和时间不同。

我有 json 格式的数据库中的名称和日期，我想使用 Jquery 从数据中创建菜单。

```
 <div data-role="content">
                <ul data-role="listview" data-divider-theme="b" data-inset="false">
                    <li data-role="list-divider" role="heading"></li>
                    <li data-theme="c"><a data-transition="slide" onclick="javascript:navigation_message_details()">
                        Verinoff,James <span class="patient-list_txt2-red">04/13/2011 12:12</span></a>
                    </li>
                    <li data-theme="c"><a data-transition="slide" onclick="javascript:navigation_message_details()">
                        Parker,Tollin <span class="patient-list_txt2-yellow">04/13/2011 12:10</span> </a>
                    </li>
                    <li data-theme="c"><a data-transition="slide" onclick="javascript:navigation_message_details()">
                        Michael,John <span class="patient-list_txt2-green">04/13/2011 12:04</span></a>
                    </li>
                    <li data-theme="c"><a data-transition="slide" onclick="javascript:navigation_message_details()">
                        Jonah <span class="patient-list_txt2-yellow">04/13/2011 12:03</span></a> </li>
                    <li data-theme="c"><a data-transition="slide" onclick="javascript:navigation_message_details()">
                        Jaffee,Dillon <span class="patient-list_txt2-red">04/13/2011 12:02</span></a>
                    </li>
                    <li data-theme="c"><a data-transition="slide" onclick="javascript:navigation_message_details()">
                        Denny Stephen <span class="patient-list_txt2-blue">04/13/2011 12:01</span></a>
                    </li>
                </ul>
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:59:16.797

```
$.each(json, function() {
   $("div[data-role=content] ul")
     .append(
        $("<li>").data('theme', 'c')
           .append($("<a>").data('transition', 'slide')
              .click(navigation_message_details)
              .text(this.name)
              .append($("<span>").addClass('patient-list_txt2-' + this.class)
                 .text(this.date)
              )
           )
        )
     ;
}); 
```

我不知道类的颜色来自哪里，所以我只是假设它是`json`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:13:24.737

试试这个代码，例如这可以是你的 json （你从 ajax 服务器调用中获取）：

```
var yourJson = { "data" : [{"name" : "Paolo", "dateTime" : "04/13/2011 12:01"}] }; 
```

然后你可以迭代它：

```
$.each(yourJson.data, function(i)
{
    var li = $('<li/>')
    .addClass('yourCssClass')
    .attr('data-theme', 'c')
    .appendTo(list);

    var aaa = $('<a/>')
    .html(yourJson.data[i].name + " <span class='patient-list_txt2-blue'>" + yourJson.data[i].dateTime + "</span>")
    .attr('data-transition', 'slide')
    .appendTo(li);
}); 
```

这是一个小提琴：http: [//jsfiddle.net/pbBav/](http://jsfiddle.net/pbBav/)

# algorithm - 无向图到路径的最小成本联合

> ID：13881004
> 
> 赞同：3
> 
> 时间：2012-12-14T14:53:34.753
> 
> 标签：algorithm, graph, path, tree, minimum

我必须为加权无向图创建一个解决方案，通过所有节点，总成本最低。几条没有定义起始节点的路径应该最终在一个相交节点处相遇。路径的数量和包含在路径中的节点的数量不是预先确定的。节点可以多次传递。

我正在处理什么样的问题，可能的算法作为解决方案？我想它应该是最小生成树的变体（意味着使用交叉节点作为路径的起点而不是终点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:08:35.743

这是您正在寻找的一棵树，问题是最小生成树——MST：构建一棵跨越图中所有节点的树，并且树上边的成本是最小的。这是一个多项式问题。Prim 和 Kruskal 各自都有用于解决方案的众所周知的算法。请参阅[http://en.wikipedia.org/wiki/Kruskal](http://en.wikipedia.org/wiki/Kruskal) 's_algorithm 了解 Kruskal 算法。

注意：当树应该跨越给定的适当节点子集而不是图中的所有节点时，问题是 NP 完全的。这次它被称为施泰纳最小树问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:57:52.273

这被称为最小成本哈密顿电路问题。

[在这里](http://www.math.wisc.edu/~meyer/math141/graphs2.html)你可以阅读更多关于它的信息。

# ios - 如果检测到超出范围，则禁用平移手势

> ID：13881006
> 
> 赞同：5
> 
> 时间：2012-12-14T14:53:41.123
> 
> 标签：ios, uiview, gesture, uipangesturerecognizer

我有一个 UIView 我正在尝试在屏幕上上下移动，但是我只想让它平移，这样当它处于正常位置 (0, 0) 时你不能向下拖动视图

我试图检测识别器的中心何时不是视图高度的一半，但是视图是不可移动的，并且中心始终是高度的一半（在这种情况下为 230）。

有任何想法吗？

```
- (IBAction)panDetected:(UIPanGestureRecognizer *)recognizer {
    CGPoint translation = [recognizer translationInView:self.view];
    NSLog(@"\ncenter.y: %f\ntranslation.y: %f\n", recognizer.view.center.y, translation.y);
    if (recognizer.view.center.y > ([[UIScreen mainScreen] bounds].size.height - 20)/2) {
            return;
    }
    recognizer.view.center = CGPointMake(recognizer.view.center.x,
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-31T07:29:58.370

而不是手动计算点是否在视图的范围内，使用`CGRectContainsPoint(rect, point)`. 这对我有用，我喜欢它，因为它更短且更具可读性：

```
func handlePan(pan: UIPanGestureRecognizer) {
    switch pan.state {
    case .Began:
        if CGRectContainsPoint(self.pannableView.frame, pan.locationInView(self.pannableView)) {
            // Gesture started inside the pannable view. Do your thing.
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T09:37:23.227

```
CGPoint translation = [recognizer translationInView:self.view];
CGPoint finalpoint = CGPointMake(recognizer.view.center.x + translation.x, recognizer.view.center.y+ translation.y);

//limit the boundary    
if ((recognizer.view.frame.origin.x>0 && translation.x > 0) || (recognizer.view.frame.origin.x + recognizer.view.frame.size.width<=320 && translation.x < 0))
    finalpoint.x = recognizer.view.center.x;

if ((recognizer.view.frame.origin.y>0 && translation.y > 0) || (recognizer.view.frame.origin.y + recognizer.view.frame.size.height<=self.view.frame.size.height && translation.y < 0))
    finalpoint.y = recognizer.view.center.y;

//set final position
recognizer.view.center = finalpoint;
[recognizer setTranslation:CGPointZero inView:self.view]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:31:08.437

尝试

```
CGPoint translation = [recognizer translationInView:self.view];  
if (translation.x+recognizer.view.frame.origin.x<0||translation.y+recognizer.view.frame.origin.y<0)
    {
        return;
    }

 recognizer.view.center = CGPointMake(recognizer.view.center.x,
                                     recognizer.view.center.y + translation.y);
[recognizer setTranslation:CGPointMake(0, 0) inView:self.view]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T02:54:30.970

```
recognizer.view.center = CGPointMake(recognizer.view.center.x, MAX(recognizer.view.center.y + translation.y, ([[UIScreen mainScreen] bounds].size.height - 20)/2)); 
```

# jquery - jQuery $(window).scroll 和 Internet Explorer (8-9)

> ID：13881008
> 
> 赞同：6
> 
> 时间：2012-12-14T14:53:57.150
> 
> 标签：jquery, internet-explorer, scroll

[http://jsfiddle.net/CbL7W/](http://jsfiddle.net/CbL7W/)滚动事件行为示例。

我有这个脚本在 Chrome 和 Firefox 中都能正常工作。

```
var stickyNavigationOffsetTop = $('.top-nav').offset().top;
var stickyNavigation = function () {
    var scrollTop = $(window).scrollTop();
    if (scrollTop > stickyNavigationOffsetTop) {
        $('.top-nav').css({ 'position': 'fixed', 'top': 0, 'left': 0, 'opacity': .8 });
    } else {
        $('.top-nav').css({ 'position': 'relative', 'opacity': 1 });
    }
};
stickyNavigation();
$(window).scroll(function () {
    stickyNavigation();
}); 
```

但是 Internet Explorer 有一个小问题：在同一页面上我有那个脚本 我有一个带有隐藏 div 的脚本的链接，当这种情况发生时，有时页面会完全滚动回页面顶部，但 IE 不是发生这种情况时开火`$(window).scroll`。

页面返回顶部时的问题截图。

铬（好的）：http: [//i.stack.imgur.com/6WJx7.jpg](http://i.stack.imgur.com/6WJx7.jpg)

IE（错误）：http: [//i.stack.imgur.com/CXbKk.jpg](http://i.stack.imgur.com/CXbKk.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:28:58.813

我有同样的问题，尽管我不喜欢它，但我的解决方法是在显示/隐藏 div 时触发 window.scroll 事件。$(window).trigger('scroll');

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:19:22.027

[在这篇文章中](https://stackoverflow.com/questions/5371139/window-scrolltop-vs-document-scrolltop)看到这个答案

我认为改变

```
$(window).scrollTop() to 
$(document).scrollTop() 
```

可以解决IE问题。

# android - 为什么我的应用只有在 USB 数据线连接到 PC 时才会振动？

> ID：13881010
> 
> 赞同：2
> 
> 时间：2012-12-14T14:54:00.947
> 
> 标签：android, permissions, chronometer, vibration

我是我的应用程序。我必须在用户定义的时间间隔内进行振动。

基本上它有一个计时器，当它到达定义的时间时，它会使设备振动。

我有两个问题：

*   1) 当应用程序处于后台时，计时器继续计数，但振动停止。

*   2）我在清单中添加了 WAKE_LOCK 权限，有趣的是应用程序在后台振动，但只有当设备通过 USB 电缆连接到电脑时才会振动。

权限是这样的：

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

有什么想法可以解决这个问题吗？

谢谢！

# c# - 无法创建未知类型错误

> ID：13881011
> 
> 赞同：1
> 
> 时间：2012-12-14T14:54:03.583
> 
> 标签：c#, wpf, xaml, exception

> 例外：无法创建未知类型错误“'{http://schemas.telerik.com/2008/xaml/presentation}RadDatePicker'”

```
 public static object Visualize(string filepath)
    {
        try
        {
            var xdoc = new XDocument(XElement.Parse(new StreamReader(filepath).ReadToEnd()));
            Code = xdoc.ToString();
            XmlReader xmlReader = xdoc.CreateReader();
            return XamlReader.Load(xmlReader); //<-- thrown here
        }
        catch(Exception e)
        {
            System.Windows.MessageBox.Show(e.Message,"Visualize error", System.Windows.MessageBoxButton.OK, System.Windows.MessageBoxImage.Error);
            return null;
        }
    } 
```

当我使用包含此组件的 xaml 文件调用上述方法时，运行时发生异常。如果我调用同一个文件，但声明组件的部分丢失，它工作正常。

我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:52:30.430

该问题可能来自您自己的 XAML 代码，该代码需要您的 XAML 上不存在的资源。如果您的 App.xaml 上有合并资源，请不要期望 XAML 控件会看到它。我遇到了同样的问题，我必须在我的控制 XAML 视图上再次明确定义该合并资源。

我的问题在下面，有点误导了实际原因。

`Cannot create unknown type '{http://schemas.telerik.com/2008/xaml/presentation}RadGridView'`

# grid - 仅 SMartGWT TileGrid 水平溢出

> ID：13881016
> 
> 赞同：0
> 
> 时间：2012-12-14T14:54:29.503
> 
> 标签：grid, overflow, smartgwt, tile

使用 SMartGWT 我创建了一个 TileGrid，现在我尝试以一种方式设置 Overflow 参数，以便如果溢出，滚动条只出现在水平导航而不是垂直导航。瓷砖基本上有 4 个插槽，如果我添加第 5 个，则只显示垂直导航的滚动条。换句话说，我希望溢出是内联的

我已经尝试过这些可能性，但没有一个可行。

```
setOverflow(Overflow.AUTO) 
setOverflow(Overflow.CLIP_V) 
setOverflow(Overflow.CLIP_H) 
setOverflow(Overflow.SCROLL) 
```

我也尝试过使用 CSS 代码

```
overflow-x: auto; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T18:11:12.850

我在这里面临同样的问题。我现在找到的唯一解决方案是：

1) 将 TileGrid 的 tilesPerLine 属性设置为较大的值。

2) 将 TileGrid 的方向属性设置为“水平”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:34:19.567

尝试将 TileGrid 的方向设置为垂直

```
setOrientation(Orientation.VERTICAL); 
```

有了这个，您将在一行中获得所有瓷砖。有时因为水平滚动条仍然会出现一个小的垂直滚动条。在这种情况下，您还应该使用设置和大小来仅查看水平滚动条。

# eclipse-plugin - Jetty 9 WTP 插件

> ID：13881020
> 
> 赞同：4
> 
> 时间：2012-12-14T14:54:49.920
> 
> 标签：eclipse-plugin, jetty, eclipse-wtp

有人知道是否有适用于 Eclipse 的 Jetty 9 WTP 插件吗？我找不到官方的（仅适用于 Jetty 7&8）所以也许有一些 3rd 方插件？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T14:58:13.133

我们停止更新 7 和 8 的版本，我怀疑 run-jetty-run 背后的人最终会更新它。我认识的大多数人都使用 jetty-maven-plugin，编写一个小的嵌入式 jetty 实例来启动，或者使用类似 Webby 的东西。

*   [http://code.google.com/p/run-jetty-run/](http://code.google.com/p/run-jetty-run/)
*   [https://docs.sonatype.org/display/M2ECLIPSE/Integration+with+Maven+WAR+Plugin](https://docs.sonatype.org/display/M2ECLIPSE/Integration+with+Maven+WAR+Plugin)

此页面显示了一些列出的可用工具：

*   http://marketplace.eclipse.org/search/site/jetty?f[0]=im_taxonomy_vocabulary_3%3A31

# jquery - 如何使用 JQuery UI 1.9.2 制作自动完成 SlickGrid 编辑器

> ID：13881021
> 
> 赞同：0
> 
> 时间：2012-12-14T14:54:51.780
> 
> 标签：jquery, jquery-ui, slickgrid

我遵循了另一个问题的建议，但它对我不起作用。我正在使用 JQuery 1.8.3 和 JQuery UI 1.9.2

当我按箭头键时，自动完成不会选择下一个选项。为什么？

我已经在每个事件处理程序上尝试了 stopPropagation。我使用过 keypress、keyup、keydown、处理程序。我什至将输入元素包装在父标签中，并将 stopPropagation 放在这些事件上，但箭头键仍然无法在自动完成元素上使用。他们只是尝试更改验证器功能随后阻止的单元格。

```
$input.bind("keydown.nav", function (e) {function AutoCompleteEditor(args) {
        var $input,
                defaultValue,
                scope = this;

        this.init = function () {
                $input = $("<INPUT type=text class='editor-text' />");
                $input.appendTo(args.container)
                        .focus()
                        .select()
                        .autocomplete({
                                delay: 0,
                                minLength: 0,
                                source: args.column.options
                        })
                        .bind("keydown.nav", function (e) {
                                if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {
                                        e.stopImmediatePropagation();
                                        e.stopPropagation();
                                } else if (e.keyCode === $.ui.keyCode.UP || e.keyCode === $.ui.keyCode.DOWN) {
                                        e.stopImmediatePropagation();
                                        e.stopPropagation();
                                }
                        })
        };

        this.destroy = function () {
                $input.autocomplete('destroy');
                $input.remove();
        };

        this.focus = function () {
                $input.focus();
        };

        this.getValue = function () {
                return $input.val();
        };

        this.setValue = function (val) {
                $input.val(val);
        };

        this.loadValue = function (item) {
                defaultValue = item[args.column.field] || "";
                $input.val(defaultValue);
                $input[0].defaultValue = defaultValue;
                $input.select();
        };

        this.serializeValue = function () {
                return $input.val();
        };

        this.applyValue = function (item, state) {
                item[args.column.field] = state;
        };

        this.isValueChanged = function () {
                return (!($input.val() == "" && defaultValue == null)) && ($input.val() != defaultValue);
        };

        this.validate = function () {
                var val = $input.val();
                return {
                        valid: args.column.options.indexOf(val) > -1,
                        msg: null
                };
        };

        this.init();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:39:22.653

I am using Kendo UI ComboBox as editor for some SlickGrid columns. Please, check what I have done to fix the keyboard navigation behaviour.

First, some code to create the grid and a couple of auxiliary functions:

```
var data = []; // some data
var columns = []; // some columns
var options = {
    editable: true,
    autoEdit: false
};
var grid = new Slick.Grid('#myGrid', data, columns, options);
grid.render();

function editing_keydown(e, args) {
    if (!e.shiftKey && !e.altKey && !e.ctrlKey) {
        if (e.which >= 37 && e.which <= 40) {
            e.stopImmediatePropagation();
        }
    }
}

function disableGridCellNavigation() {
    grid.onKeyDown.subscribe(editing_keydown);
};

function enableGridCellNavigation() {
    grid.onKeyDown.unsubscribe(editing_keydown);
}; 
```

Then, *inside the **editor** code*, I call these functions in the **init** and **destroy** methods:

```
this.init = function() {
    // initialization stuff
    // last line:
    disableGridCellNavigation();
};

this.destroy = function () {
    // termination stuff
    // last line:
    enableGridCellNavigation();
}; 
```

You can use this solution as a starting point to elaborate yours.

# java - Activiti BPM 获取任务中的变量

> ID：13881024
> 
> 赞同：4
> 
> 时间：2012-12-14T14:54:59.763
> 
> 标签：java, business-process-management, activiti

是否可以使用 TaskService 获取所有流程或任务变量：

`processEngine.getTaskService.createTaskQuery().list();`

我知道有机会通过 `processEngine.getTaskService().getVariable()`

或者

`processEngine.getRuntimeService().getVariable()`

但是上面的每个操作都进入数据库。如果我有 100 个任务的列表，我将对 DB 进行 100 个查询。我不想使用这种方法。有没有其他方法可以获取任务或流程相关的变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T06:26:55.107

不幸的是，没有办法通过“官方”查询 API 做到这一点！但是，您可以做的是编写一个自定义 MyBatis 查询，如下所述：

[https://app.camunda.com/confluence/display/foxUserGuide/Performance+Tuning+with+custom+Queries](https://app.camunda.com/confluence/display/foxUserGuide/Performance+Tuning+with+custom+Queries) （注意：文章中描述的所有内容也适用于裸 Activiti，您不需要 fox 引擎！）

这样，您可以编写一个查询，在一个步骤中选择任务和变量。在我的公司，我们使用了这个解决方案，因为我们遇到了完全相同的性能问题。

此解决方案的一个缺点是需要维护自定义查询。例如，如果您升级您的 Activiti 版本，您将需要确保您的自定义查询仍然适合数据库模式（例如，通过集成测试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:09:44.007

如果不能像 elsvene 所说的那样使用 API，您可以自己查询数据库。Activiti 在数据库上有几个表。

您有`act_ru_variable`，当前运行的进程是否存储了变量。对于您已经完成的流程`act_hi_procvariable`。可能你可以在activiti userguide 中找到关于每个表的详细解释。

所以你只需要进行如下查询

```
SELECT *
FROM act_ru_variable
WHERE *Something* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T09:02:03.403

下面的测试，将一个值对象（Person）发送到一个只添加一些跟踪信息以进行演示的进程。

我遇到了同样的问题，在执行服务后获取值对象以在我的测试中进行一些验证。

以下代码显示了执行完成后任务变量的执行和收集。

```
@Test
public void justATest() {
    Map<String, Object> inVariables = new HashMap<String, Object>();

    Person person = new Person();
    person.setName("Jens");
    inVariables.put("person", person);

    ProcessInstance processInstance = runtimeService.startProcessInstanceByKey("event01", inVariables);

    String processDefinitionId = processInstance.getProcessDefinitionId();
    String id = processInstance.getId();
    System.out.println("id " + id + " " + processDefinitionId);

    List<HistoricVariableInstance> outVariables =
            historyService.createHistoricVariableInstanceQuery().processInstanceId(id).list();

    for (HistoricVariableInstance historicVariableInstance : outVariables) {
        String variableName = historicVariableInstance.getVariableName();
        System.out.println(variableName);
        Person person1 = (Person) historicVariableInstance.getValue();
        System.out.println(person1.toString());
    }

} 
```

# svn - 单个 svn:externals 属性中的多个目录

> ID：13881027
> 
> 赞同：2
> 
> 时间：2012-12-14T14:55:09.550
> 
> 标签：svn

假设我有 svn 存储库 A，其中包含一堆目录：trunk/dir1 trunk/dir2 trunk/dir3 ...

我想在存储库 B 中使用这些目录的子集。一种方法是设置一个 svn:externals 属性，该属性只会引入所有 A: `A https://path/to/A/trunk`。

因为我只想要这些目录的一个子集，所以我宁愿只引入我需要的东西。这很好 - 我可以将属性设置为只引入 dir1 和 dir2

```
dir1 https://path/to/A/trunk/dir1
dir2 https://path/to/A/trunk/dir2 
```

这可以满足我的要求，并且当 A 包含大量我不想要的目录时，它似乎确实使我的结帐速度更快。不过我注意到的是，当我进行 svn 更新时（特别是在 A 中实际上没有更新任何内容时），这需要更长的时间，因为它必须检查 svn:externals 属性中列出的每个目录以查看是否修订版已经改变......当我只是在整个主干中使用 svn:externals 时，svn 更新更快，因为它只需要检查一个目录。

实际上，我正在寻找的是一些语法，它表示我想要多个子目录，但是因为它们都是 svn 只需检查一次修订历史记录的子目录。从概念上讲，是这样的：

```
dir1,dir2 https://csdrepos/path/to/A/trunk/dir1,dir2 
```

我找不到像这样的任何语法的参考......有没有办法做到这一点？关于如何加快我的 svn 更新而不需要 svn:externals 在厨房水槽中并减慢我的初始结帐速度的任何其他提示？我无法真正重新组织 A 的目录结构，因为不同的 repos 将需要 A 目录的不同子集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:23:42.980

Taking your comment into account the most efficient solution seems to include the external in a 'special' folder (e.g. /ext)

Then adding symlinks to the relevant folders in /ext in the place you want.

The result is only a single 'external' download and only the relevant directories cluttering your listing in the places you want.

# html - Outlook 2010 中的宽度问题

> ID：13881028
> 
> 赞同：2
> 
> 时间：2012-12-14T14:55:13.303
> 
> 标签：html, css, outlook-2010

我有相当多的电子邮件编码经验，并且熟悉 Outlook 的噩梦，但这对我来说是一个新的，而且，它*似乎只影响了一些用户*。基本上，在我们的时事通讯模板中，有一个设计用于嵌套内容的表格。它在左侧和右侧有列，具有宽度属性作为边距。对于 2010 年的某些用户，Outlook 似乎会折叠列，而对于其他用户则不会。

是否有人知道 Outlook 中可能导致这种情况发生的设置？

这是代码的一个版本，内容被删除：

```
<table style="FONT-FAMILY: Helvetica Neue, Arial, sans-serif; COLOR: #4b4b4b; FONT-SIZE: 12px" border="0" cellspacing="0" cellpadding="0" width="600" bgcolor="#FFFFFF" align="center">
<tbody>
<tr>
<td rowspan="6" width="30"></td>
<td height="30"></td>
<td rowspan="6" width="30"></td>
</tr>
<tr>
<td style="PADDING-BOTTOM: 40px">
<table style="WIDTH: 540px">
<tbody>
<tr>
<td style="TEXT-ALIGN: right; PADDING-BOTTOM: 10px; FONT-SIZE: 10px"></td>
</tr>
</tbody>
</table>
<table style="WIDTH: 540px" border="0" cellspacing="0">
<tbody>
<tr>
<td width="340"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td style="PADDING-BOTTOM: 20px"></td>
</tr>
<tr>
<td style="PADDING-BOTTOM: 45px; FONT-SIZE: 10px; BORDER-TOP: #412878 4px solid; PADDING-TOP: 20px">
</td>
</tr>
</tbody>
</table> 
```

谢谢，

米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:46:23.497

我的建议是查看针对电子邮件客户端的 Campaign Monitors CSS 支持列表；Outlook '10 完全忽略了位置 CSS，例如边距、填充等。使用 Outlook '10 时尽可能远离 CSS，使用 90 年代早期的代码，并在需要时使用高度属性和额外元素。

[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

# cocoa - NSOutlineView 从代码展开/折叠动画

> ID：13881034
> 
> 赞同：5
> 
> 时间：2012-12-14T14:55:34.743
> 
> 标签：cocoa, core-animation, nsoutlineview

我想知道如何**从代码**中为 NSOutlineView 的树节点的展开/折叠**设置动画**？

 **```
// this works ok but doesn't animate  

NSTreeNode *node = [self.outlineView itemAtRow:self.outlineView.clickedRow];

if([self.outlineView isItemExpanded:node])
{
    [self.outlineView.animator collapseItem:node];
}else{
    [self.outlineView.animator expandItem:node];
} 
```

如果您通过默认绘制的箭头扩展节点，大纲视图自然会动画，
所以有一种方法......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-05T17:15:15.300

我的原始代码没问题，只是在 10.7 下不可用

来自[OS X v10.8 的 Application Kit Release Notes 的原文](https://developer.apple.com/library/mac/releasenotes/Cocoa/AppKit.html)：

NSOutlineView

以下方法现在支持通过 -animator 代理进行动画处理：-expandItem:、-expandItem:expandChildren:、-collapseItem: 和 -collapseItem:collapseChildren:。例如，为特定项目的展开设置动画： [[outlineView animator] expandItem:item];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:58:13.610

问题很可能是`node`您传递给`collapseItem:`. 您需要传递树控制器用来表示节点的对象，而不是数据模型中的实际节点。如果您使用的是 NSTreeController，那么您需要遍历从返回的结构`-[NSTreeController arrangedObjects]`来定位代表您的数据模型对象的节点。**

# php - 如果注销，htaccess 拒绝访问目录（用 php 检查）

> ID：13881041
> 
> 赞同：1
> 
> 时间：2012-12-14T14:55:57.440
> 
> 标签：php, .htaccess

如果访问者未登录，我想拒绝访问者访问特定目录。并将他们重定向到“您未登录”.html 文件。

我怎样才能做到这一点？如果注销，有什么方法可以用 php 编辑 .htaccess 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:11:43.893

你不能用 Apache 做到这一点。

实现此目的的一种方法是通过重写规则将每个请求转发到 php 脚本，并通过此 PHP 脚本提供文件。

但这很重，如果您的文件很大，这不是一个好的解决方案。

也许您应该将其视为[Apache dbd auth mod](http://httpd.apache.org/docs/2.2/mod/mod_authn_dbd.html)（如果您的用户在数据库中）。但同样，这不应该是 Apache 的工作，因为它并不擅长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T15:09:54.537

这不是 Apache 的工作，但 PHP 可以为您完成。

在仅限公共的页面上，不定义会话参数。

在公共登录页面上，定义所有会话参数。

在仅限会员的页面上，按原样启动会话：

```
 <?php

    session_start();

    // Assuming variables have been initally defined
    if(isset($_SESSION['username']) AND isset($_SESSION['password']))
    {
        echo 'You are now logged in';
            header('Location: sosecretpage.php');
    }

    else
    {
        echo 'You are not logged in. You dont have access to this page';
    }
    ?> 
```

# c# - 是否可以为正在运行的程序创建 OLE DB 提供程序

> ID：13881044
> 
> 赞同：1
> 
> 时间：2012-12-14T14:56:06.580
> 
> 标签：c#, oledb, dataprovider, reportbuilder, consumer

目前我正在研究一种替换旧报告生成器的方法。

因为我工作的公司是微软的合作伙伴，他们希望使用 Report Builder 3.0。

问题是我们希望它连接到我们自己的业务对象，而不是直接连接到我们的数据库。由于应用了过滤器、排序、编辑等。

我认为可以编写我们自己的 OLE DB 适配器，这样我们就可以使用报表生成器连接到我们的业务对象。我在 MSDN 上阅读了“OLE DB 简介”，上面写着

“重要的是要区分提供者的数据源对象，该对象将数据从数据存储提供给消费者，数据存储本身包含数据但仅通过数据源对象与消费者交互。例如，数据store 可能是逗号分隔值 (CSV) 文本文件、SQL DBMS 或**应用程序中的内存数组**。”

我认为这意味着可以连接到我只需要弄清楚如何连接的应用程序。谁能证实这一点并可能提供样品？（最好是 C#，但 C++ 也可以）

* * *

第二个问题

OLE DB 存在于提供者和消费者之外。看到我想使用报告生成器，我认为我不必编写自己的消费者，因为报告生成器会创建与提供者的连接。如果我错了，请纠正我。

# r - 合并数据框并将列合并为一个

> ID：13881046
> 
> 赞同：4
> 
> 时间：2012-12-14T14:56:17.860
> 
> 标签：r

我有以下三个数据框：

```
df1 <- data.frame(name=c("John", "Anne", "Christine", "Andy"),
                  age=c(31, 26, 54, 48),
                  height=c(180, 175, 160, 168),
                  group=c("Student",3,5,"Employer"), stringsAsFactors=FALSE)

df2 <- data.frame(name=c("Anne", "Christine"),
                  age=c(26, 54),
                  height=c(175, 160),
                  group=c(3,5),
                  group2=c("Teacher",6), stringsAsFactors=FALSE)

df2 <- data.frame(name=c("Christine"),
                  age=c(54),
                  height=c(160),
                  group=c(5),
                  group2=c(6),
                  group3=c("Scientist"), stringsAsFactors=FALSE) 
```

我想将它们组合起来，以便得到以下结果：

```
df.all <- data.frame(name=c("John", "Anne", "Christine", "Andy"),
                     age=c(31, 26, 54, 48),
                     height=c(180, 175, 160, 168),
                     group=c("Student", "Teacher", "Scientist", "Employer")) 
```

目前我正在这样做：

```
df.all <- merge(merge(df1[,c(1,4)], df2[,c(1,5)], all=TRUE, by="name"),
                df3[,c(1,6)], all=TRUE, by="name")
row.ind <- which(df.all$group %in% c(6,5))
df.all[row.ind, c("group")] <- df.all[row.ind, c("group2")]
row.ind2 <- which(df.all$group2 %in% c(6))
df.all[row.ind2, c("group")] <- df.all[row.ind2, c("group3")] 
```

这不是一概而论的，而且确实很混乱。也许会有一种使用`merge_all`或`merge_recurse`合并步骤的方法（特别是因为可能有两个以上的数据框要合并），但我还没有弄清楚如何。这两个不会产生正确的结果：

```
df.all <- merge_all(list(df1, df2, df3))
df.all <- merge_recurse(list(df1, df2, df3), by=c("name")) 
```

有没有更通用和优雅的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T18:26:28.520

如果我了解您最终的目标，这是另一种可能的方法。（不清楚“组”列中的数值是什么，所以我不确定这正是你要找的。）

用于`Reduce()`合并您的多个`data.frame`s。

```
temp <- Reduce(function(x, y) merge(x, y, all=TRUE), list(df1, df2, df3))
names(temp)[4] <- "group1" # Rename "group" to "group1" for reshaping 
temp
#        name age height   group1  group2    group3
# 1      Andy  48    168 Employer    <NA>      <NA>
# 2      Anne  26    175        3 Teacher      <NA>
# 3 Christine  54    160        5       6 Scientist
# 4      John  31    180  Student    <NA>      <NA> 
```

用于`reshape()`将数据从宽变长。

```
df.all <- reshape(temp, direction = "long", idvar="name", varying=4:6, sep="")
df.all
#                  name age height time     group
# Andy.1           Andy  48    168    1  Employer
# Anne.1           Anne  26    175    1         3
# Christine.1 Christine  54    160    1         5
# John.1           John  31    180    1   Student
# Andy.2           Andy  48    168    2      <NA>
# Anne.2           Anne  26    175    2   Teacher
# Christine.2 Christine  54    160    2         6
# John.2           John  31    180    2      <NA>
# Andy.3           Andy  48    168    3      <NA>
# Anne.3           Anne  26    175    3      <NA>
# Christine.3 Christine  54    160    3 Scientist
# John.3           John  31    180    3      <NA> 
```

利用`as.numeric()`将强制字符转换为`NA`, 并用于`na.omit()`删除所有具有`NA`值的行的事实。

```
na.omit(df.all[is.na(as.numeric(df.all$group)), ])
#                  name age height time     group
# Andy.1           Andy  48    168    1  Employer
# John.1           John  31    180    1   Student
# Anne.2           Anne  26    175    2   Teacher
# Christine.3 Christine  54    160    3 Scientist 
```

同样，这可能会过度概括您的问题 - 例如，其他列中可能存在 NA 值 - 但它可能有助于引导您找到问题的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T15:18:52.927

第一步是使用`merge_recurse`with `all.x = TRUE`：

```
library(reshape)
merge.all <- merge_recurse(list(df1, df2, df3), all.x = TRUE)
#        name age height    group  group2    group3
# 1      Anne  26    175        3 Teacher      <NA>
# 2 Christine  54    160        5       6 Scientist
# 3      John  31    180  Student    <NA>      <NA>
# 4      Andy  48    168 Employer    <NA>      <NA> 
```

然后您可以使用从所有“组”列`apply`中获取最后一个非组：`NA`

```
group.cols <- grep("group", colnames(merge.all))
merge.all <- data.frame(merge.all[-group.cols],
                        group = apply(merge.all[group.cols], 1,
                                      function(x)tail(na.omit(x), 1)))
#        name age height     group
# 1      Anne  26    175   Teacher
# 2 Christine  54    160 Scientist
# 3      John  31    180   Student
# 4      Andy  48    168  Employer 
```

# gwt - ListEditorWrapper NPE

> ID：13881047
> 
> 赞同：1
> 
> 时间：2012-12-14T14:56:19.000
> 
> 标签：gwt

GWT 2.5.0

一个使用 ListEditor 的简单案例在下面失败了，我错过了什么？

```
public class OneBean {

    private String name;

    public OneBean() {
    }

    public OneBean(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        return "OneBean [name=" + name + "]";
    }

} 
```

```
public class OneListEditor extends Composite implements
        IsEditor<ListEditor<OneBean, OneEditor>> {

    interface OneListUiBinder extends UiBinder<Widget, OneListEditor> {}
    OneListUiBinder uiBinder = GWT.create(OneListUiBinder.class);

    @UiField
    VerticalPanel panel;

    public OneListEditor() {
        initWidget(uiBinder.createAndBindUi(this));
    }

    @Override
    public ListEditor<OneBean, OneEditor> asEditor() {
        return listEditor;
    }

    private ListEditor<OneBean, OneEditor> listEditor = ListEditor
            .of(new EditorSource<OneEditor>() {
                @Override
                public OneEditor create(int index) {
                    OneEditor widget = new OneEditor();
                    panel.insert(widget, index);
                    return widget;
                }
            });

} 
```

```
public class OneEditor extends Composite implements Editor<OneBean> {

    interface OneUiBinder extends UiBinder<Widget, OneEditor> {}
    OneUiBinder uiBinder = GWT.create(OneUiBinder.class);

    @UiField
    TextBox name;

    public OneEditor() {
        initWidget(uiBinder.createAndBindUi(this));
    }

} 
```

```
public class OneListEditorApp implements EntryPoint {

    @Override
    public void onModuleLoad() {
        List<OneBean> beans = new ArrayList<OneBean>();
        beans.add(new OneBean("1st bean"));
        beans.add(new OneBean("2nd bean"));

        OneListEditor oneListEditor = new OneListEditor();
        oneListEditor.asEditor().setValue(beans); // exception thrown here!

        RootPanel.get().add(oneListEditor);
    }

} 
```

```
java.lang.NullPointerException: null
    at com.google.gwt.editor.client.adapters.ListEditorWrapper.attach(ListEditorWrapper.java:95)
    at com.google.gwt.editor.client.adapters.ListEditor.setValue(ListEditor.java:164)
    at OneListEditorApp.onModuleLoad .... 
```

```
 void attach() {
    editors.addAll(editorSource.create(workingCopy.size(), 0));
    for (int i = 0, j = workingCopy.size(); i < j; i++) {
      chain.attach(workingCopy.get(i), editors.get(i)); // ListEditorWrapper NPE here!
    }
  } 
```

**@编辑**

根据来自 的回答`@Thomas Broyer`，NPE`EditDriver`连接到`OneListEditor`下面之后就消失了，

```
interface OneEditorDriver extends
        SimpleBeanEditorDriver<OneBean, OneEditor> {}

OneEditorDriver driver = GWT.create(OneEditorDriver.class);

@Override
public ListEditor<OneBean, OneEditor> asEditor() {
    listEditor.setEditorChain(new EditorChain<OneBean, OneEditor>() {
        @Override
        public OneBean getValue(OneEditor subEditor) {
            return null;
        }
        @Override
        public void detach(OneEditor subEditor) {
        }
        @Override
        public void attach(OneBean object, OneEditor subEditor) {
            driver.initialize(subEditor);
            driver.edit(object);
        }
    });
    return listEditor;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:14:38.763

您没有使用 an `EditorDriver`，因此未使用 an`ListEditor`初始化`EditorChain`，因此`chain`是`null`NPE。案例制作。

⇒ 使用`EditorDriver`（或不使用`ListEditor`）

# regex - 使用换行和续行重复正则表达式模式

> ID：13881048
> 
> 赞同：1
> 
> 时间：2012-12-14T14:56:29.220
> 
> 标签：regex, vb.net, visual-studio-2010

如何获得具有换行符（vbNewLine、vblf、vbcrlf 等）和续行符的字符串。以下似乎只是检索“第一行文本”。

```
Dim rx As Regex
Dim var1 As String = "First line of text. " & vbNewLine & _
                     "Second line of text. " & vbNewLine & _
                     "Third line of text."

rx = New Regex(".*[\n\r]")
Dim search As String = rx.Match(var1).Value 
```

预期结果：search = "第一行文本。第二行文本。第三行文本。"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:03:07.937

要将多行模式与正则表达式匹配，您必须使用单行选项。它修改点的行为，以便捕获每个字符，包括换行符。

```
rx = New Regex("(?s).*") 
```

[在此处](http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx#Singleline)链接到 msdn 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:02:29.350

查看正则表达式“RegexOptions.MultiLine”。它应该是 Regex 对象的第二个参数，如下所示：

```
rx = New Regex(".*[\n\r]", RegexOptions.MultiLine) 
```

我认为这会奏效。如果只是用空格替换换行符，函数 String.Replace 也足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:05:05.777

要获得的不仅仅是第一场比赛，请使用`rx.Matches(var1)`. 在此之后，您可以遍历集合。

但是请注意，您的正则表达式有一个错误：由于没有后跟换行符，最后一行将不匹配。一个简单的解决方法是：

```
rx = new Regex("\n");
var matches = rx.Split(var1);
//iterate collection 
```

由于标签，注释代码在 c# 中。

# maven - Maven 3 Multi Module build 尝试在 Multi Module POM 本身上运行目标

> ID：13881050
> 
> 赞同：3
> 
> 时间：2012-12-14T14:56:44.570
> 
> 标签：maven, pom.xml, multi-module

我有几个项目都有类似的 Maven 构建。每个项目 POM 都从包含每个项目可用的所有常见依赖项、插件等的父 POM 扩展而来。我还有一个多模块 POM，目前与父 POM 分开。这个多模块 POM 的目的是有一个地方，我可以用一个命令在所有模块上运行目标。

如果我尝试从多模块 POM 运行一个插件，比如 JS Duck，我会得到以下输出（为简单起见更改了项目名称）：

```
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Project 1 .......................................... SUCCESS [7.850s]
[INFO] Project 2 .......................................... SUCCESS [0.803s]
[INFO] Project 3 .......................................... SUCCESS [8.488s]
[INFO] Multi-Module POM ................................... FAILURE [0.477s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 22.780s
[INFO] Finished at: Fri Dec 14 09:31:52 EST 2012
[INFO] Final Memory: 17M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] No plugin found for prefix 'jsduck' in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories 
```

它失败了，因为我的多模块 POM 中没有指定 JS Duck 插件。

**为什么它试图在多模块 POM 上运行插件？**

我可以走另一条路，将模块包含在我的父 POM 中，而不是拥有一个单独的多模块 POM，但这有一个不同的问题。在这种情况下，构建成功，因为这次 JS Duck 插件是在多模块/父 POM 中声明的。但是，它针对多模块/父 POM 运行 JS Duck 插件，这本质上会生成一个垃圾“目标”目录，因为那里没有要分析的代码。

作为参考，我的项目结构是：

```
dev
|- Project1
   |- pom.xml
|- Project2
   |- pom.xml
|- Project3
   |- pom.xml
|- pom.xml (parent POM)
|- all-pom.xml (multi-module POM) 
```

在这种情况下有什么推荐的建议吗？有什么方法可以阻止 Maven 尝试构建多模块 POM 本身？也许是一种不同的`<packaging>`类型可以做到这一点？

感谢您的建议！

[编辑]

这是 all-pom.xml ......为了隐私而更改了一些细节。

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <modelVersion>4.0.0</modelVersion>
  <groupId>com.nate</groupId>
  <artifactId>projects-all</artifactId>
  <packaging>pom</packaging>
  <version>1.0</version>
  <name>Multi-Module POM</name>
  <description>Builds all projects</description>

  <modules>
      <module>Project1</module>
      <module>Project2</module>
      <module>Project3</module>
  </modules>

  <repositories>
    ...
  </repositories>
  <pluginRepositories>
     ...
  </pluginRepositories>
</project> 
```

这是父 POM ......包括添加子模块。

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <modelVersion>4.0.0</modelVersion>
  <groupId>com.nate.pom</groupId>
  <artifactId>js-master</artifactId>
  <packaging>pom</packaging>
  <version>1.0</version>
  <name>JavaScript Project POM</name>
  <description>Parent POM for all JavaScript projects.</description>

  <!-- inherit license and other company-wide configuration -->
  <parent>
    <groupId>com.nate</groupId>
    <artifactId>master</artifactId>
    <version>1.1</version>
  </parent>

  <modules>
      <module>Project1</module>
      <module>Project2</module>
      <module>Project3</module>
  </modules>

  <properties>
      <release.version>1.0.0</release.version>
  </properties>

  <scm>
    ...
  </scm>
  <issueManagement>
    ...
  </issueManagement>
  <ciManagement>
    ...
  </ciManagement>
  <developers>
    ...
  </developers>

  <build>
    <finalName>${project.artifactId}</finalName>
    <sourceDirectory>src/main/js</sourceDirectory>
  </build>

 <profiles>
   <profile>
      <id>javascript</id>
      <activation>
        <activeByDefault>true</activeByDefault>
      </activation>

      <properties>
        ...
      </properties>

      <dependencies>
        ...
      </dependencies>

      <build>
        <plugins>
          ...
          <plugin>
            <groupId>nl.secondfloor.mojo.jsduck</groupId>
            <artifactId>jsduck-maven-plugin</artifactId>
            <version>0.1.1-SNAPSHOT</version>
            <configuration>
              <javascriptDirectory>src/main/js</javascriptDirectory>
              <targetDirectory>target/site/api</targetDirectory>
            </configuration>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>

  <repositories>
    ...
  </repositories>
  <pluginRepositories>
    ...
  </pluginRepositories>

</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T23:43:13.157

您可以在 all-pom 中显式停用插件

```
<plugin>
    <groupId>nl.secondfloor.mojo.jsduck</groupId>
    <artifactId>jsduck-maven-plugin</artifactId>
    <version>0.1.1-SNAPSHOT</version>
    <executions>
        <execution>
            <phase>none</phase>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:01:41.650

包含模块列表的 pom：

```
<modules>
  <module>..</module>
  ..
</modules> 
```

必须有包装类型*pom*。

# r - 改变 R 生成的 acf 图

> ID：13881054
> 
> 赞同：1
> 
> 时间：2012-12-14T14:57:06.923
> 
> 标签：r, plot

这可能是也可能不是一个非常简单的问题。但是我正在尝试更改 R 中生成的 acf 图并且没有运气。我想改变acf 的外观，即从基本情节改变。图中左边是R生成的正常acf，右边是我想要的acf，有没有办法改变呢？![在此处输入图像描述](../Images/b08fd2584ed8d77668fe8ca240bdc43f.png)

我曾尝试在各种搜索引擎中输入“更改 R 中的 acf 图”，但找不到合适的解决方案。到目前为止，我已经存储了 acf 输出：

```
a <- acf(blah)
xyplot(acf~lag,data=a,type = "l") 
```

这将返回 acf 的线图，但不保留 95% 置信区间。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T15:21:27.410

通过使用，我可以获得与您想要的情节类似的东西`ggplot2`。我在`ldeaths`这里使用了该表作为示例。关键点可能是将 acf 对象中的值提取到`data.frame`. 从那里你几乎可以用它来绘制任何你想要的东西。

```
library(ggplot2)

# compute acf without plotting
acz <- acf(ldeaths, plot=F)

# 95% confidence interval limits
ci <- qnorm((1 + 0.95)/2)/sqrt(sum(!is.na(series)))  

# convert to data frame
acd <- data.frame(lag=acz$lag, acf=acz$acf)

# use data frame for ggplot
ggplot(acd, aes(lag, acf)) + geom_area(fill="grey") +
    geom_hline(yintercept=c(ci, -ci), linetype="dashed") +
    theme_bw() 
```

![在此处输入图像描述](../Images/9eb680401429bbec2e8b14067c7435eb.png)

您可以`ggplot2`通过查看[此处](http://docs.ggplot2.org/current/)的文档来熟悉。这将帮助您进一步自定义情节。

函数不导出置信区间`acf`- 此计算在`plot.acf`函数内部完成。所以当用 ggplot 绘制 ACF 时，你需要自己计算 CI 边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:11:47.020

[Coda](http://cran.r-project.org/web/packages/coda/index.html)包生成了一个很好的自相关图：

![在此处输入图像描述](../Images/264e0dc0e012a43243fbe55bfd366401.png)

# c# - 将项目从一个列表移动到另一个列表

> ID：13881070
> 
> 赞同：1
> 
> 时间：2012-12-14T14:58:07.183
> 
> 标签：c#

我有一个列表，其中包含具有名称、姓氏、id、年份等属性的 Student 类型的对象。我想要的是从具有特定索引的列表中删除特定的学生并将其放入另一个列表中。有没有办法这样做？例如：

```
 if (((mystudent[index].Year== 7)) {
              mystudent.RemoveAt(index);
           // now how I shall throw the Student to a new list
} 
```

感谢您的信息。我现在的问题是我在单独的类中有 2 个列表。当我从列表中删除一个项目时，它的工作但当我想从其他类查看添加到列表中的项目时，我没有得到该项目。

```
public class SeniorStudentsClass
    {
        public List<Student> studlist = new List<Student>();

public void ViewStudents()
        {
            for (int i = 0; i < studlist.Count; i++)
            {               
                Console.Write(studlist[i].Id + "\t");
                Console.Write(studlist[i].Year + "\t");
                Console.Write(studlist[i].Name + "\t");
                Console.Write(studlist[i].Surname + "\t");
                Console.Write(studlist[i].DOB + "\t");
                Console.Write(studlist[i].Addr);
                Console.WriteLine();
            }

  public class JuniorStudentsClass
    {
       public List<Student> mystudent = new List<Student>();  
       SeniorStudentsClass sc = new SeniorStudentsClass();

        public void PromoteStudents(int index)
        {
            SearchItem(index);
            Console.WriteLine("current record:");
            Console.WriteLine("id is:" + mystudent[index].Id);
            Console.WriteLine("year is:" + mystudent[index].Year);
            Console.WriteLine("name is:" + mystudent[index].Name);
            Console.WriteLine("surname is:" + mystudent[index].Surname);
            Console.WriteLine("dob is:" + mystudent[index].DOB);
            Console.WriteLine("address is:" + mystudent[index].Addr);
            Console.WriteLine("year is:"+mystudent[index].Year);
            if (((mystudent[index].Year== 7)) || ((mystudent[index].Year == 8)))
            {
                var student = mystudent[index];
                mystudent.RemoveAt(index);
                sc.studlist.Add(student);
                Console.WriteLine("student promoted to senior student");

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T15:04:19.983

Linq 将使它更容易。

```
var moveables = mystudent.Where(x => x.Year == 7);

list2.AddRage(moveables);

mystudent.RemoveRange(moveables); 
```

如果“另一个列表”尚不存在，您甚至可以仅用两行代码简化制作：

```
var list2 = mystudent.Where(x => x.Year == 7).ToList();

mystudent.RemoveRange(list2); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T15:00:20.080

像这样的东西？

```
if (mystudent[index].Year == 7) 
{
    var studentToRemove = mystudent[index]; //get a reference to the student
    mystudent.RemoveAt(index); //Remove
    otherList.Add(studentToRemove); //Put student on another list
} 
```

假设您正在遍历很多学生 - 并试图在特定年份移动所有学生 - 这样的事情可能会更好：

```
var yearSevenStudents = mystudent.Where(student => student.Year == 7).ToList(); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-14T15:01:06.393

我希望这能回答你的问题，因为我不太明白，但尝试将学生复制到新表，然后删除旧表

# iphone - Amazon S3 + CloudFront 查询

> ID：13881072
> 
> 赞同：0
> 
> 时间：2012-12-14T14:58:18.243
> 
> 标签：iphone, objective-c, amazon-web-services, amazon-s3, amazon-cloudfront

我目前正在制作类似社交分享的应用程序，但遇到了问题。

首先，根据我的经验，S3 速度很慢，所以我需要为世界各地的多台服务器同步数据，以便为多个用户提供更快的速度。

所以我的问题是，我需要为每个国家/地区创建多个存储桶，对吗？亚马逊有一个他们的服务器位置列表。所以对于每个用户，我计算最近的服务器而不是上传到那里？如何？

下一个问题，在我的应用程序中，人们可以订阅其他人并检查他们的更新。所以实际上，这不会产生速度差异。如果有人在新加坡上传了一段文本，并且在美国有一个订阅者，那么这个订阅者不会更快，因为他必须下载一段存储在新加坡的文本。

这一切都让我感到困惑！我个人觉得 S3 非常慢，这就是我使用 CloudFront 的原因。

有什么帮助吗？我误解了这个过程吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:01:45.453

存储桶不是按国家/地区的，而是按地区（欧盟、美国、亚洲等）

其次，您不必管理与 S3 存储桶最近的 URL，这就是 CloudFront 的用途，您只需为每个存储桶获取一个 URL，CloudFront 将管理将用户的请求路由到最近的边缘站点。

PS：此外，亚马逊透明地复制上传到所有边缘位置的存储桶的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:19:40.407

亚马逊绝不会“自动”将您的内容复制到边缘位置。相反，当用户尝试从该边缘访问内容时，如果（且仅）当内容不存在（可能是第一次拉取，可能是过期）时，您的内容将被复制到*单个边缘位置。*这是一种拉动机制，而不是推动。[请参阅http://aws.amazon.com/cloudfront/](http://aws.amazon.com/cloudfront/)的“下载用于 HTTP 交付的分发”部分

# xamarin.android - MVVMCross - MvxBind：组合/连接属性

> ID：13881073
> 
> 赞同：3
> 
> 时间：2012-12-14T14:58:25.623
> 
> 标签：xamarin.android, mvvmcross

我有一个小问题：

在我的 axml 设计器中，我有这样的东西：

```
<TextView
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  local:MvxBind="{'Text':{'Path':'FirstName'}}" /> 
```

这很好用，但我怎么能组合/连接 2 个属性（甚至更多）..

类似于：**FirstName** + **SecondName**（*一个文本中的 2 个属性*）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:21:47.210

这是一个标准的 Mvvm 问题。我认为它在 Wpf 的早期出现了很多 - 我认为有很多关于多重依赖的想法......我还没有实现任何这些......

如果你想这样做，那么你可以使用：

* * *

(1) 在 ViewModel 对象上暴露一个组合属性：

```
public string FullName
{
    get
    {
        return FirstName + SecondName;
    }
} 
```

如果你这样做，那么你需要确保当你 RaisePropertyChanged("FirstName") 或 RaisePropertyChanged("SecondName") 时，你也 RaisePropertyChanged("FullName")

* * *

(2) 使用转换器将名称组合在一起：

```
<TextView
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  local:MvxBind="{'Text':{'Path':'','Converter':'MakeFullName'}}" /> 
```

注意这里的 Converter 将父对象作为其输入参数。

请注意，在这种情况下，如果 FirstName 或 SecondName 更改，则文本视图可能不会更新：/

* * *

(3) 您可以在 UI 中使用多个 TextView - 每个都绑定到必要的文本位。

* * *

(4) 您可以使用单个 textview 并使用 C# 级别绑定 - 例如在 View 中使用如下代码：

```
 ViewModel.PropertyChanged += (s,e) => {
      if (e.PropertyName == "FirstName" || e.PropertyName == "SecondName")
      {
          this.FindViewById<TextView>(Resource.Id.XXX).Text = ViewModel.FirstName + ViewModel.SecondName;
      }
   } 
```

* * *

如果您认为多依赖绑定是一项重要要求，请将其作为问题（功能请求）记录在[https://github.com/slodge/MvvmCross/issues](https://github.com/slodge/MvvmCross/issues) - 或者甚至只是分叉代码并添加它们:)

# php - 如何从 HTML 5 门户网站检测是否通过 Android OS 手机上的浏览器或下载管理器完成下载？

> ID：13881079
> 
> 赞同：0
> 
> 时间：2012-12-14T14:59:04.780
> 
> 标签：php, android, html, web

我正在尝试制作一个允许用户下载文件的 html 移动 Web 门户。

但我想检测下载是通过下载管理器还是浏览器完成的？

如何做到这一点，因为用户代理在许多设备上也是相同的？

# iphone - CLLocationManager 禁用监控后台重大变化

> ID：13881080
> 
> 赞同：0
> 
> 时间：2012-12-14T14:59:09.190
> 
> 标签：iphone, ios, cllocationmanager

当用户位于特定位置时，我正在使用后台地理位置来安排本地通知。

由于这些通知链接到商业操作，我有一个日期，存储在 userdefaults 中以管理当我应该在其他操作时禁用后台地理位置。

我不希望用户必须启动应用程序才能禁用重大更改监控。

所以我尝试直接在，`stopMonitoringSignificantLocationChanges`但它不接缝工作。`CLLocationManager``locationManager:didUpdateToLocation:fromLocation:`

有什么建议吗？这个问题的最佳实践是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:09:11.467

鉴于后台应用程序或未运行的应用程序的道路规则，您的双手在这里有些束缚。

如果您想在不与用户进行任何交互的情况下禁用位置，这是您唯一的选择。

每次您的用户的位置从后台更新时，您的位置管理器代表都会收到此更新。你在这里没有得到很多处理能力，所以保持简短和甜蜜或注册一个长期运行的后台任务，检查你的日期，如果你完成了位置，在那里调用停止监控调用，重置任何数据或标志在您的用户默认值中，您就完成了。

如果您从本地通知触发，用户将需要单击打开按钮来执行任何操作。您肯定可以从后台位置委托方法中触发通知。但这是您在没有用户交互的情况下自动化任何事情的唯一途径。你在那里做什么取决于你。检查位置更新并从后台委托方法将其关闭没有问题。

# vim - gVim 中的复杂替换

> ID：13881086
> 
> 赞同：-1
> 
> 时间：2012-12-14T14:59:42.010
> 
> 标签：vim

说到 Minecraft，我最近一直是个糟糕的人。我对它进行了过度修改，以至于我需要完全重写它们的 ID。唯一的问题是……重写一次大约需要几个小时，更不用说它们中的任何一个是否与原始游戏发生冲突。所以，为了节省时间，我想我会使用 Vim，但是在阅读了这里的几篇有用的帖子之后，我仍然对替换功能/命令知之甚少。这就是我想要做的：替换这个

```
I:exampleModnamePath.id=16389
I:exampleModnamePat2.id=19657 
```

等等。

有了这个

```
I:exampleModnamePath.id=20000
I:exampleModnamePath.id=20001 
```

等等。

这会持续一段时间，对于那些回答的人，你能告诉我它是如何工作的，所以我不必一直问这些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:52:11.507

供您细读：

```
:let g:num = 1
:g/\.id=\d\+$/exec 's!\.id=\d\+$!.id='.g:num.'! | let g:num=g:num+1' 
```

这是我的代码的略微简化版本，用于（重新）为电子书中的章节编号。

简而言之：用于`:g`在受影响的线路上运行某些东西；用于`:exec`生成/运行新的替换命令并增加计数器。尝试过一次，惊讶地发现这个技巧奏效了。受到我之前玩`:g//s///`组合的启发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:20:14.627

我不确定您使用什么规则来选择要用于替换的号码，但如果您只需要一个不与以前的号码冲突的新号码，您可以尝试将第一个数字替换为 a未使用的范围。比如用 76389 替换 16389

为此，您可以使用此`:s/Path.id=.\(.*\)/Path.id=7\1`

这将搜索字符串 Path.id= 后跟一个字符，然后是一组更多字符。我将用字符串 Path.id=7 和之前选择的组替换它。

您可以使其更具选择性，在 Path.id 之前添加字母以仅匹配某些类型的路径。

# python - 下载 Python 3 的进度条

> ID：13881092
> 
> 赞同：12
> 
> 时间：2012-12-14T15:00:17.000
> 
> 标签：python, python-3.x, download, progress-bar

我需要在 Python 3 的文件下载期间显示进度。我在 Stackoverflow 上看到了一些主题，但考虑到我是编程新手，没有人发布完整的示例，只是其中的一小部分，或者我可以发布的示例在 Python 3 上工作，没有一个对我有好处......

附加信息：

好的，所以我有这个：

```
from urllib.request import urlopen
import configparser
#checks for files which need to be downloaded
print('    Downloading...')
file = urlopen(file_url)
#progress bar here
output = open('downloaded_file.py','wb')
output.write(file.read())
output.close()
os.system('downloaded_file.py') 
```

脚本通过 python 命令行运行

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-15T20:06:49.993

可以[`urlretrieve()`](http://docs.python.org/3/library/urllib.request.html#urllib.request.urlretrieve)将 url 下载到文件中，并允许指定一个 reporthook 回调来报告进度：

```
#!/usr/bin/env python3
import sys
from urllib.request import urlretrieve

def reporthook(blocknum, blocksize, totalsize):
    readsofar = blocknum * blocksize
    if totalsize > 0:
        percent = readsofar * 1e2 / totalsize
        s = "\r%5.1f%% %*d / %d" % (
            percent, len(str(totalsize)), readsofar, totalsize)
        sys.stderr.write(s)
        if readsofar >= totalsize: # near the end
            sys.stderr.write("\n")
    else: # total size is unknown
        sys.stderr.write("read %d\n" % (readsofar,))

urlretrieve(url, 'downloaded_file.py', reporthook) 
```

这是一个 GUI 进度条：

```
import sys
from threading import Event, Thread
from tkinter import Tk, ttk
from urllib.request import urlretrieve

def download(url, filename):
    root = progressbar = quit_id = None
    ready = Event()
    def reporthook(blocknum, blocksize, totalsize):
        nonlocal quit_id
        if blocknum == 0: # started downloading
            def guiloop():
                nonlocal root, progressbar
                root = Tk()
                root.withdraw() # hide
                progressbar = ttk.Progressbar(root, length=400)
                progressbar.grid()
                # show progress bar if the download takes more than .5 seconds
                root.after(500, root.deiconify)
                ready.set() # gui is ready
                root.mainloop()
            Thread(target=guiloop).start()
        ready.wait(1) # wait until gui is ready
        percent = blocknum * blocksize * 1e2 / totalsize # assume totalsize > 0
        if quit_id is None:
            root.title('%%%.0f %s' % (percent, filename,))
            progressbar['value'] = percent # report progress
            if percent >= 100:  # finishing download
                quit_id = root.after(0, root.destroy) # close GUI

    return urlretrieve(url, filename, reporthook)

download(url, 'downloaded_file.py') 
```

在 Python 3.3`urlretrieve()`上有不同的`reporthook`接口（[参见 issue 16409](http://bugs.python.org/issue16409)）。要解决此问题，您可以通过以下方式访问以前的界面`FancyURLopener`：

```
from urllib.request import FancyURLopener
urlretrieve = FancyURLopener().retrieve 
```

要在同一线程中更新进度条，您可以内联`urlretrieve()`代码：

```
from tkinter import Tk, ttk
from urllib.request import urlopen

def download2(url, filename):
    response = urlopen(url)
    totalsize = int(response.headers['Content-Length']) # assume correct header
    outputfile = open(filename, 'wb')

    def download_chunk(readsofar=0, chunksize=1 << 13):
        # report progress
        percent = readsofar * 1e2 / totalsize # assume totalsize > 0
        root.title('%%%.0f %s' % (percent, filename,))
        progressbar['value'] = percent

        # download chunk
        data = response.read(chunksize)
        if not data: # finished downloading
            outputfile.close()
            root.destroy() # close GUI
        else:
            outputfile.write(data) # save to filename
            # schedule to download the next chunk
            root.after(0, download_chunk, readsofar + len(data), chunksize)

    # setup GUI to show progress
    root = Tk()
    root.withdraw() # hide
    progressbar = ttk.Progressbar(root, length=400)
    progressbar.grid()
    # show progress bar if the download takes more than .5 seconds
    root.after(500, root.deiconify)
    root.after(0, download_chunk)
    root.mainloop()

download2(url, 'downloaded_file.py') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T13:55:23.003

我认为这段代码可以帮助你。我不太确定这正是你想要的。至少它应该给你一些工作。

```
import tkinter 
from tkinter import ttk
from urllib.request import urlopen

def download(event):
    file = urlopen('http://www.python.org/')
    output = open('downloaded_file.txt', 'wb')
    lines= file.readlines()
    i = len(lines)

    for line in lines:
        output.write(line)
        pbar.step(100/i)

    output.close()
    file.close()

root = tkinter.Tk()
root.title('Download bar')

pbar = ttk.Progressbar(root, length=300)
pbar.pack(padx=5, pady=5)

btn = tkinter.Button(root, text="Download")
# bind to left mouse button click
btn.bind("<Button-1>", download)
btn.pack(pady=10)

root.mainloop() 
```

这行得通，我试过了。

# c++ - 将动画应用于openGL中的对象

> ID：13881099
> 
> 赞同：2
> 
> 时间：2012-12-14T15:00:39.350
> 
> 标签：c++, algorithm, opengl, 3d

我在编写一个使用openGL为形状制作动画的程序时偶然发现了一个问题。

目前在程序中，我正在使用以下代码段创建一些形状

```
for(int i=50;i<=150;i=i+50){
for(int j=50;j<=750;j=j+200){
//Draw rectangle shape at position(j,i); //shape has additional capability for animations }
} 
```

这给了我这个输出：

![在此处输入图像描述](../Images/e7652bb27ff89ff8dfe82d87ef6b2781.png)

现在，我必须调整这些矩形的大小并将它们全部移动到另一个位置。我有应该移动`Point`的第一个矩形的最终目标。`rectangle at position[0][0]`但是，当我用类似的东西为这些矩形的大小设置动画时

`rectangle.resize(newWidth, newHeight, animationTime);`

由于明显的原因，矩形没有粘在一起，我得到类似的东西：

![在此处输入图像描述](../Images/a6d95c54473af7d38293fbf9326c8016.png)

我正在寻找`Grouping`可以将这些形状绑定在一起的东西，这样即使应用了不同的动画，如调整大小（和运动等），顶点或边界也应该接触在一起。

请注意，这`Grouping`是这里的主要内容。我将来可能有一个要求，我必须将最后一列中的两个矩形分组，其中已经发生了独立的动画（如旋转）。所以，我把这个想象成一个`plane/container`有这两个矩形的东西，它`plane/container`本身可以为位置等设置动画。我对算法/概念很好，而不是代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:33:55.017

不是在 CPU 上对几何体进行动画处理，而是在 CPU 上对比例/位置矩阵进行动画处理，并通过 MVP 矩阵将几何体的变换留给顶点着色器。对所有矩形使用一个相同的比例矩阵。（或者两个矩阵，如果您的比例因子在 X 和 Y 中不同）。

PS。这是一个例子：

```
float sc = 0;

void init()
{
  glMatrixMode (GL_MODELVIEW);
  glLoadIdentity ();
}

void on_each_frame()
{
  // do other things 

  // draw pulsating rectangles
  sc += 0.02;
  glMatrixMode(GL_MODELVIEW);
  glPushMatrix();
  glScalef((float)sin(sc) + 1.5f);
  // draw rectangles as usual, **without** scaling them
  glPopMatrix();

  // do other things
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:01:08.353

考虑实现一个“DrawableAnimatableObject”，它是一个高级 3D 对象，能够动画和绘制自身，并包含您的多边形（在您的情况下为多个矩形）作为内部数据。请参阅以下不完整的代码给您一个想法：

```
class DrawableAnimatableObject {
private:
    Mesh *mesh;
    Vector3 position;
    Quaternion orientation;
    Vector3 scale;
    Matrix transform;

public:
    DrawableAnimatableObject();
    ~DrawableAnimatableObject();

    //update the object properties for the next frame.
    //it updates the scale, position or orientation of your
    //object to suit your animation.
    void update();  

    //Draw the object. 
    //This function converts scale, orientation and position 
    //information into proper OpenGL matrices and passes them 
    //to the shaders prior to drawing the polygons, 
    //therefore no need to resize the polygons individually.
    void draw();

    //Standard set-get;
    void setPosition(Vector3 p);
    Vector3 getPosition();
    void setOrientation(Quaternion q);
    Quaternion getOrientation();
    void setScale(float f);
    Vector3 getScale();
}; 
```

在此代码中，Mesh 是一个包含多边形的数据结构。简单来说，可以是一个顶点-面列表，也可以是半边这样更复杂的结构。DrawableAnimatableObject::draw() 函数应该如下所示：

```
DrawableAnimatableObject::draw() {

    transform = Matrix::CreateTranslation(position) * Matrix::CreateFromQuaternion(orientation) * Matrix::CreateScale(scale);

    // in modern openGL this matrix should be passed to shaders.
    // in legacy OpenGL you will apply this matrix with:
    glPushMatrix();
    glMultMatrixf(transform);

    glBegin(GL_QUADS);
    //...
    // Draw your rectangles here.
    //...
    glEnd();

    glPopMatrix();
} 
```

# c++ - 如何围绕轴旋转点云？

> ID：13881100
> 
> 赞同：1
> 
> 时间：2012-12-14T15:00:40.777
> 
> 标签：c++, matrix, point-clouds, point-cloud-library

我有一个深度图像的点云，它是用相机在水平上方 30 度（在 z 轴上旋转 30 度）拍摄的。我想将所有点转换回它们的位置，就好像相机处于 0 度一样，我相信我可以使用以下旋转矩阵来做到这一点：

```
|cos(30) -sin(30) 0| 
|sin(30)  cos30   0| 
|0        0       1| 
```

但是，当查看转换点云的 pcl 方法时，我发现了这一点：

```
pcl::transformPointCloud (const PointCloud< PointT > &cloud_in, 
PointCloud< PointT > &cloud_out, const Eigen::Matrix< Scalar, 4, 4 > &transform) 
```

但是为什么它是一个 4x4 矩阵而不是上面的 3x3 旋转矩阵呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:18:09.687

```
|x||1 0 0 a| =  |x+a|
|y||0 1 0 b|    |y+b|
|z||0 0 1 c|    |z+c|
|1||0 0 0 1|    |1  | 
```

在这个例子中，我们将点 (x,y,z) 移动到点 (x+a, y+b, z+c)。这只能使用 4 x 4 矩阵来完成。

* * *

```
|cos(30) -sin(30) 0 0| multiply The Matrix above. 
|sin(30)  cos30   0 0| 
|0        0       1 0|
|0        0       0 1| 
```

这将为您提供一个点的旋转和平移。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T15:39:28.910

4x4 矩阵是以下形式的变换矩阵

```
| R    | t | 
|--------- |
|0 0 0 | 1 | 
```

`R`您的 3x3 旋转矩阵在哪里，并且是`t`3x1 平移向量。在你的情况下`t = [0,0,0]'`

欲了解更多信息：[http ://en.wikipedia.org/wiki/Transformation_matrix](http://en.wikipedia.org/wiki/Transformation_matrix)

# php - 获取标签值php

> ID：13881102
> 
> 赞同：0
> 
> 时间：2012-12-14T15:00:45.170
> 
> 标签：php, javascript, html

我正在尝试在这里获取标签值：

```
<form action="doinsert.php" method="post" enctype="multipart/form-data"> 
    <input name="buttonExecute" onClick="execute(document.getElementById('id_student').value)" type="button" value="CHECK  AVAILBLITY" />
    <label name="lab" id="idhere"  ></label></p>
    <input type="hidden"   name="val" value="<?php echo $_POST['lab']; ?>"  />
    <input type="submit" name="submit" value="Insert Data"/> 
```

在 doinsert.php 中

```
$getlabel=$_POST['val'];
echo $getlabel; 
```

什么都没有打印，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:14:47.270

尝试

```
<input type="hidden"   name="val" value="Stupid"  /> 
```

如果你看到一些东西出现，那么你会发现问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:03:56.127

`echo`如果值为or （或其任何空字符串），则*似乎不会打印任何内容。*`null``""`

尝试做：

```
var_dump( $getlabel ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:04:33.493

您正在将名称为的输入值设置为`val`空字符串，因为您在 $_POST*尚未创建*`echo $_POST['lab'];`时作为其值- ex nihilo nihil

 *尝试在浏览器中查看源代码，您会看到该值为空*

# coronasdk - 电晕将对象拖放到容器或参考上

> ID：13881105
> 
> 赞同：0
> 
> 时间：2012-12-14T15:00:57.873
> 
> 标签：coronasdk

我正在开发一款游戏，其中一个关卡是解决一个混乱的单词。这些字母是像瓷砖一样的图像，我试图单击一个字母，这将移动到分配的第一个位置以解决单词或实际将瓷砖拖到该位置。谁能帮我实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:56:54.123

要拖动对象，请参阅本教程：

[http://www.coronalabs.com/blog/2011/09/24/tutorial-how-to-drag-objects/](http://www.coronalabs.com/blog/2011/09/24/tutorial-how-to-drag-objects/)

如果您只想点击它们并让它们移动到您想要它们的位置，那么这样的事情可能对您有用：

```
local function moveTile(event)
     -- put your code here to move the tile
     -- figure out the X, Y where the tile needs to move to
     -- either just set the X, Y on the tile or use a transition.to() call
     -- to animate it.
     local thisTile = event.target
     thisTile.x = destinationX -- you have to figure out what destinationX is.
     thisTile.y = destinationY -- figure this out too
     return true
end 
```

然后在创建后的每个图块上，只需添加此行以使其可点击：

```
tile:addEventListener("tap", moveTile) 
```

# unit-testing - 如何在while循环中的函数上设置expect_call？

> ID：13881110
> 
> 赞同：0
> 
> 时间：2012-12-14T15:01:10.800
> 
> 标签：unit-testing, googletest, gmock

我正在使用 gmock、gtest 框架来测试我的代码中的函数。我嘲笑了在正在测试的主函数中调用的函数。模拟函数处于无限循环中，仅在成功的情况下退出，并在失败的情况下保持打印错误消息。模拟函数看起来像这样，

```
while((fd = (socket(_,_,_)) < 0)
 {
   print("error")
 }
  return fd; 
```

现在我想让套接字函数失败并打印错误。我设法打印了错误，但由于它在他的 while 循环中，它一直在打印错误消息。我如何期望 gtest 在 1 或 2 次后停止打印。我把期望这样

```
 EXPECT_CALL(object, socket(_,_,_)).WillRepeatedly(return (error)); 
```

我尝试使用 .Times(2)，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:18:59.607

如果要退出循环，则需要`socket`返回值 >= 0 ：`while`

```
int error(-1), success(0);
EXPECT_CALL(object, socket(_,_,_))
    .WillOnce(Return(error))
    .WillOnce(Return(error))
    .WillOnce(Return(success)); 
```

# django-templates - 使用 Dojo 数据网格格式化程序函数时的空值

> ID：13881111
> 
> 赞同：1
> 
> 时间：2012-12-14T15:01:17.047
> 
> 标签：django-templates, dojox.grid.datagrid

我正在尝试使用格式化程序在 DOJANGO 的 dojo 网格中格式化日期。

这是模板脚本：

```
{% extends "dojango/base.html" %}
{% load dojango_grid %}

{% block dojango_page_title %} Testing datagrid {% endblock %}

{% block dojango_header_extra %}

<script type="text/javascript">
function formatDate(datum) {
    var d = dojo.date.stamp.fromISOString(datum);
    return dojo.date.locale.format(d, {formatLength: 'long'});
}
</script>

<script>
dojo.require("dojo.parser");
dojo.require("dijit.Dialog");
dojo.require("dojo.date.stamp");
dojo.require("dojo.date.locale");

</script>

{% endblock %}

{% block dojango_content %}
<h1> Movimientos </h1>
</br>
</br>

{% datagrid voucher_v1 Movimiento %}
    width="100%"
    height="500px"
   formatter=     {'fecha_cambio_saldo':"this.formatDate",'fecha_cambio_saldo_anterior':"this.formatDate"}
    id="test_grid"
{% enddatagrid %}

{% endblock %} 
```

但是，函数参数`datum`被传递为null，并且该行出现异常：

```
return dojo.date.locale.format(d, {formatLength: 'long'}); 
```

（它抱怨`ObjectDate.getHours()`未定义，因为 ObjectDate 为空）

我在这里错过了什么？我按照[此链接](http://dojotoolkit.org/reference-guide/1.7/dojox/grid/DataGrid.html#formatting-a-date-field)中的示例进行操作：

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:51:26.680

尝试添加脚本

```
function formatDate(datum) {
    var d = dojo.date.stamp.fromISOString(datum);
    return dojo.date.locale.format(d, {formatLength: 'long'});
} 
```

在道场需要语句之后

# javascript - Javascript添加删除行发送表单而不是添加行

> ID：13881113
> 
> 赞同：-2
> 
> 时间：2012-12-14T15:01:24.127
> 
> 标签：javascript, forms, html-table, row, dynatable

谁能帮我写这个脚本。为什么要提交此表单，而不是在表格上添加新行？如果我删除表单标签和提交按钮，它可以很好地添加和删除行。

```
<html>
      <head>
 <script src="http://code.jquery.com/jquery-1.5.1.min.js"></script>
      <script>
       document).ready(function() {
      var id = 0;
         // Add button functionality
         $("table.dynatable button.add").click(function() {
            id++;
            var master = $(this).parents("table.dynatable");

            // Get a new row based on the prototype row
            var prot = master.find(".prototype").clone();
            prot.attr("class", "")
            prot.find(".id").attr("value", id);

            master.find("tbody").append(prot);
        });

        // Remove button functionality
        $("table.dynatable input.remove").live("click", function() {
            $(this).parents("tr").remove();

        });
    });
    </script>
    <style>
        .dynatable {
            border: solid 1px #000; 
            border-collapse: collapse;
        }
        .dynatable th,
        .dynatable td {
            border: solid 0px #000; 
            padding: 2px 10px;
            width: 170px;
            text-align: center;
        }
        .dynatable .prototype {
            display:none;
        }
      </style>
</head>
   <body>
    <FORM name="save_event_personal" method="post" action="fetchrequest.php">

    <table class="dynatable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Start</th>
                <th>Ende</th>
                <th><button class="add">Add</button></th>
            </tr>
        </thead>
        <tbody>
            <tr class="prototype">
                <td><input type="text" name="id[]" value="0" class="id" /></td>
                <td><input type="text" name="name[]" value="" /></td>
                <td><SELECT name="start[]">
                <OPTION value="10:00">10:00</OPTION>
                <OPTION value="11:00">11:00</OPTION>
                <OPTION value="12:00">12:00</OPTION>
                <OPTION value="13:00">13:00</OPTION>
                <OPTION value="14:00">14:00</OPTION>
            </SELECT></td>
                <td><SELECT name="end[]">
                <OPTION value="10:00">10:00</OPTION>
                <OPTION value="11:00">11:00</OPTION>
                <OPTION value="12:00">12:00</OPTION>
                <OPTION value="13:00">13:00</OPTION>
                <OPTION value="14:00">14:00</OPTION>
            </SELECT</td>
                <td><input type="image" class="remove" src="delete.png" alt="hi"/>
            </tr>

                 </table>
     <BR /><INPUT type="submit" value="Sumbit this form to fetchrequest.php" />
      </FORM></body>
   </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:03:51.977

尝试阻止按钮的默认操作，即提交表单：

```
$("table.dynatable button.add").click(function(e) {
    ...
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:05:02.277

```
<input type="image"> 
```

默认情况下提交表单，因此您需要[防止](https://developer.mozilla.org/en/docs/DOM/event.preventDefault)单击时的默认行为：

```
$("table.dynatable input.remove").live("click", function( e ) {
    e.preventDefault();
    $(this).parents("tr").remove();
}); 
```

并且您的脚本顶部有一个错误：

```
document).ready(function() {
... 
```

应该

```
$(document).ready(function() {
... 
```

添加行功能相同：

```
$("table.dynatable button.add").click(function( e ) {
    e.preventDefault();
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:03:55.053

默认情况下，在 Internet Explorer 上，按钮是“提交按钮”。你应该像这样修改你的按钮：

```
<th><button type="button" class="add">Add</button></th> 
```

您也可以`false`在`click`回调中返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:05:26.880

默认情况下，该元素实际上在单击时提交当前表单。

您可以添加`type="button"`以防止这种情况：

```
<button type="button" class="add">Add</button> 
```

# android - 如何以编程方式添加与谷歌同步的联系人

> ID：13881115
> 
> 赞同：0
> 
> 时间：2012-12-14T15:01:29.597
> 
> 标签：android, android-contentprovider, android-contacts, contactscontract

在我正在构建的应用程序中，我可以将联系人添加到我的本地联系人列表中。但我添加的联系人仅限电话。如何以编程方式添加将与 Google 帐户同步的联系人，或者更好地询问我是否要同步联系人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T07:08:45.653

找到如何将其与谷歌帐户同步。这是解决方案：

[Android：以编程方式创建的联系人未与 Gmail 帐户同步](https://stackoverflow.com/questions/13179380/android-programmatically-created-contact-is-not-syncing-with-gmail-account)

# c - C+Fortran 为什么选择 sigsegv？

> ID：13881117
> 
> 赞同：2
> 
> 时间：2012-12-14T15:01:35.427
> 
> 标签：c, interop, fortran, fortran2003, fortran-iso-c-binding

我在 Fortran 和 C“master”中有以下代码。它提供了 sigsegv，但我不明白为什么。它应该从主 C 程序中获取一个指针，将其转换为 Fortran 指针格式，并读出 C 指针指向的数据。没什么特别的，但仍然是 SigSegv。顺便说一句，这是我看到的唯一方法来规避 Fortran 多维数组与...之间缺乏互操作性（是的，C 没有多维数组）。

Fortran 部分：

```
module ret
    implicit none
    integer, pointer :: a(:,:)
end module ret

module func
    implicit none
    contains

    subroutine initialize(cp) bind(c,name='initialize')
        use ret
        use iso_c_binding
        implicit none
        type(c_ptr) :: cp

        call c_f_pointer(cp,a,[5,5])

    end subroutine initialize

    subroutine printa bind(c,name='printa')
       use ret
       implicit none
       integer :: i,j

       do i=1,5
         do j=1,5
            print *,i,j,a(i,j)
         end do
       end do
    end subroutine printa
end module func 
```

C部分：

```
#include<stdio.h>
void initialize( void *);
void printa();

int main()
 {    
  int *tab;
  tab = (int *)malloc(25 * sizeof (int *));
  int i;
  for(i=0;i<25;++i)
   tab[i]=i;
  initialize(tab);
  printa();
  printf("ok\n");
  return 0;
 } 
```

SIGSEGV 出现在`print *,i,j,a(i,j)`Fortran 部分的行

编辑：我已将 "integer*8" 改回 "integer" 并改`do i=1,10`回`do i=1,5`. 对于这个版本，问题仍然有效

i=1 和 j=1 时出现 SIGSEGV

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:06:06.637

我将其添加为答案，以防其他人遇到与您类似的问题。

显示的代码中有两个问题。首先，正如 Klas Lindbäck 所说，您正在为整数指针分配内存。这*不是*问题的根源，因为指针的大小至少`int`等于或大于该大小，但仍应向`sizeof`操作员提供正确的数据类型，以防止过度使用可用资源。

第二个问题是在 Fortran 中，参数是通过引用传递的。这意味着当从 C 调用 Fortran 例程时，应该使用*地址*运算符。`&`常量也应该放在单独的常量变量中，并通过地址传递。纠正前面的问题后，C 代码应该是：

```
tab = malloc(25 * sizeof (int)); // int instead of int *
int i;
for(i = 0; i < 25; ++i)
  tab[i] = i;
initialize(&tab);                // pass tab by address 
```

Fortran 2003 引入了`VALUE`可应用于虚拟例程参数的属性，以使它们改为按值传递。如果您的 Fortran 编译器实现了这个 F2003 功能，那么您可以将`cp`dummy 参数的声明更改`initialize`为：

```
type(c_ptr), value :: cp 
```

如果你这样做，你就不需要`tab`通过引用传递。

# asp.net - WCF FaultExceptions、SOAP 错误和非 .NET 应用程序

> ID：13881120
> 
> 赞同：0
> 
> 时间：2012-12-14T15:01:41.460
> 
> 标签：asp.net, wcf, webmethod, asp.net-4.5

我只是在开发我的第一个 WCF WebMethod，并且正在研究错误处理。

在花了一周时间阅读之后，普遍的共识似乎是 WCF WebMethods 中的错误应该被抛出为`WebFaultException`， 或`FaultException`。此外，许多教程教导说 using`FaultException(Of T)`提供了更好的功能。这似乎很简单......

然后，我发现一个[消息来源](http://beyondrelational.com/modules/2/blogs/79/posts/11543/throwing-exceptions-from-wcf-service-faultexception.aspx)指出，当 WebMethod 被非 .NET 应用程序（例如 Java 等）使用时，抛出 CLR 异常并不好，并且应该使用 SOAP 错误。

有人可以澄清一下逻辑是否内置在 WCF 4.5 中以自动转换`FaultException`并转换`FaultException(Of T)`为外部系统可以处理/理解的 SOAP 错误吗？

一般来说，其他人如何将错误传达给外部系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:28:50.633

如果您使用 FaultException(Of T)，它将与其他 SOAP 技术（如 Java）互操作。这篇 SO 帖子解释了它 - [WCF/WebService: Interoperable exception handling](https://stackoverflow.com/questions/4650700/wcf-webservice-interoperable-exception-handling)。这就是我为 Java 客户端所做的。如果您需要更多详细信息，请告诉我。

# java - 创建自定义标记

> ID：13881122
> 
> 赞同：1
> 
> 时间：2012-12-14T15:01:45.760
> 
> 标签：java, android, eclipse, google-maps-markers

我想向我的标记添加更多数据，我使用适用于 android 的 Google Maps V2 添加到谷歌地图。在objective-c中，我只是继承了MKAnnotation 类，它是Android 中的Marker 类，并添加了一些额外的字符串。然而，Marker 类是最终的，因此不能被子类化。有人知道如何向谷歌地图标记添加额外数据吗？额外的数据存在额外的字符串（如网站、地址和城市）。

# meteor - Windows 上的流星：无法部署应用程序：ReferenceError：rpc_callback 未定义

> ID：13881125
> 
> 赞同：0
> 
> 时间：2012-12-14T15:01:52.027
> 
> 标签：meteor

刚刚下载[了适用于 Windows 的流星](http://win.meteor.com/)创建了应用程序`studyapp`，在本地启动了服务器 - 它可以工作，然后尝试将其部署在他们的服务器上：`meteor deploy studyapp.meteor.com`，但是：

```
C:\work\meteor-study\studyapp>meteor deploy studyapp.meteor.com
Deploying to studyapp.meteor.com.  Bundling ... uploading ...
C:\Program Files (x86)\Meteor\app\meteor\deploy.js:147
    var rpc = meteor_rpc('deploy', 'POST', site, opts, rpc_callback);
                                                       ^
ReferenceError: rpc_callback is not defined
    at ChildProcess.bundle_and_deploy (C:\Program Files (x86)\Meteor\app\me
teor\deploy.js:147:56)
    at ChildProcess.EventEmitter.emit (events.js:96:17)
    at Process._handle.onexit (child_process.js:678:10) 
```

有任何想法吗？

更新：我注意到现在`myapp/.meteor/local/build_tar/..`它下面出现了一个新文件夹`bundle`。`built_tar`（`tar`在其中）听起来对 Windows 不友好，这是否意味着无法从 Windows 部署？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:05:33.400

根据@TomWijsman 的说法，它引入的错误将由版本 0.5.3 修复
错误报告/状态在[这里](https://github.com/TomWij/meteor/issues/45)

# jquery - 未捕获的类型错误：无法调用未定义的方法“toJSON”

> ID：13881129
> 
> 赞同：1
> 
> 时间：2012-12-14T15:01:56.390
> 
> 标签：jquery, backbone.js

我在 Backbone.JS 中收到以下错误，

未捕获的类型错误：无法调用未定义的方法“ **toJSON** ”。

这是模型和视图的代码，

```
 <script src="js/underscore.js"></script>
     <script src="js/jquery-1.6.2.min.js"></script>
    <script src="js/backbone.js"></script>

    var Person = Backbone.Model.extend({
            defaults:{
                name:"niran",
                age:20
            },
            validate:function(attr){
                if(attr.age <0){
                    return "should be greater than 0";
                }
            }
        }
    )

    var PhotoSearch = Backbone.View.extend({
        tagName:"li",
        initialize:function(){
            console.log(this.model)
            this.render();
        },

        template:_.template("<%= name %>(<%= age %>"),

        render:function(){
            this.$el.html(this.template(this.model.toJSON()));
        }
    });
       var p = new Person();
    var ps = new PhotoSearch({model:p}); 
```

对此有任何想法

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:06:40.000

根据 Backbone.js 文档 ( [http://backbonejs.org/](http://backbonejs.org/) )，您需要[json2.js](https://github.com/douglascrockford/JSON-js)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:07:12.783

尝试这个：

```
var PhotoSearch = Backbone.View.extend({
        tagName:"li",
        initialize:function(){
            _.bindAll(this, "render");
            console.log(this.model)
            this.render();
        },

        template:_.template("<%= name %>(<%= age %>"),

        render:function(){
            this.$el.html(this.template(this.model.toJSON()));
        }
    }); 
```

您缺少对`_.bindAll(this, "render");`没有此调用的调用，`this`将不会设置为视图的上下文，这意味着`.model`它将是未定义的。

您还可以使用`_.bindAll(this);`绑定所有方法。

[为什么在backbone.js 视图中使用bindAll？](https://stackoverflow.com/questions/6079055/why-do-bindall-in-backbone-js-views)

# android - 在 Android OS 4.1 和 4.2 中获取 java.lang.VerifyError: org/ksoap2/SoapEnvelope？

> ID：13881131
> 
> 赞同：2
> 
> 时间：2012-12-14T15:01:58.530
> 
> 标签：android, soap

我正在开发一个我正在调用 web 服务的应用程序，该应用程序在所有设备中运行良好，每个操作系统版本直到 4.0，但是当它在我的客户端操作系统 4.1 和 4.2 中崩溃时，此时它崩溃了

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11); 
```

这些是崩溃日志：

```
--------- beginning of /dev/log/system
W/InputMethodManagerService(  399): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4249ded8 attribute=android.view.inputmethod.EditorInfo@4224bfc8, token = android.os.BinderProxy@42aadd08
I/ActivityManager(  399): START u0 {act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.android.launcher/com.android.launcher2.Launcher} from pid 399
I/ActivityManager(  399): START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.weg.ecatalogue/.SplashScreen} from pid 774
I/ActivityManager(  399): Start proc com.weg.ecatalogue for activity com.weg.ecatalogue/.SplashScreen: pid=9283 uid=10071 gids={50071, 3003, 1015, 1028}
--------- beginning of /dev/log/main
I/dalvikvm( 9283): Turning on JNI app bug workarounds for target SDK version 10...
D/dalvikvm( 9283): GC_CONCURRENT freed 48K, 1% free 9269K/9348K, paused 4ms+3ms, total 34ms
D/dalvikvm( 9283): GC_FOR_ALLOC freed 1K, 1% free 9267K/9348K, paused 15ms, total 15ms
I/dalvikvm-heap( 9283): Grow heap (frag case) to 9.753MB for 711664-byte allocation
I/ActivityManager(  399): Process com.google.android.apps.maps:LocationFriendService (pid 8602) has died.
D/dalvikvm( 9283): GC_FOR_ALLOC freed 0K, 1% free 9962K/10044K, paused 16ms, total 16ms
D/dalvikvm( 9283): GC_CONCURRENT freed 2K, 1% free 9967K/10044K, paused 2ms+2ms, total 34ms
V/PhoneStatusBar(  642): setLightsOn(true)
I/ActivityManager(  399): Process com.google.android.gsf.login (pid 9058) has died.
I/ActivityManager(  399): Displayed com.weg.ecatalogue/.SplashScreen: +472ms
I/ActivityManager(  399): START u0 {flg=0x4000000 cmp=com.weg.ecatalogue/.HomeScreen} from pid 9283
D/dalvikvm( 9283): GC_FOR_ALLOC freed 419K, 5% free 9803K/10252K, paused 12ms, total 12ms
I/dalvikvm-heap( 9283): Grow heap (frag case) to 10.184MB for 614416-byte allocation
D/dalvikvm( 9283): GC_CONCURRENT freed 2K, 5% free 10400K/10856K, paused 3ms+1ms, total 14ms
D/dalvikvm( 9283): WAIT_FOR_CONCURRENT_GC blocked 2ms
D/dalvikvm( 9283): WAIT_FOR_CONCURRENT_GC blocked 11ms
D/dalvikvm( 9283): GC_CONCURRENT freed 159K, 2% free 10706K/10916K, paused 2ms+4ms, total 30ms
V/PhoneStatusBar(  642): setLightsOn(true)
I/ActivityManager(  399): Displayed com.weg.ecatalogue/.HomeScreen: +470ms
I/ActivityManager(  399): Process com.google.android.googlequicksearchbox (pid 9165) has died.
D/dalvikvm( 9283): GC_CONCURRENT freed 146K, 2% free 11079K/11252K, paused 6ms+3ms, total 22ms
I/ActivityManager(  399): Process com.groupon (pid 9219) has died.
D/dalvikvm(  736): GC_CONCURRENT freed 2481K, 23% free 12154K/15596K, paused 3ms+5ms, total 63ms
D/dalvikvm( 9283): GC_CONCURRENT freed 167K, 2% free 11554K/11752K, paused 3ms+11ms, total 36ms
W/InputMethodManagerService(  399): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4271fb68 attribute=null, token = android.os.BinderProxy@42813540
W/InputDispatcher(  399): channel '41f9a0e8 com.android.settings/com.android.settings.Settings (server)' ~ Consumer closed input channel or an error occurred.  events=0x9
E/InputDispatcher(  399): channel '41f9a0e8 com.android.settings/com.android.settings.Settings (server)' ~ Channel is unrecoverably broken and will be disposed!
W/InputDispatcher(  399): channel '42316908 com.android.settings/com.android.settings.SubSettings (server)' ~ Consumer closed input channel or an error occurred.  events=0x9
E/InputDispatcher(  399): channel '42316908 com.android.settings/com.android.settings.SubSettings (server)' ~ Channel is unrecoverably broken and will be disposed!
I/WindowState(  399): WIN DEATH: Window{42336178 u0 com.android.settings/com.android.settings.SubSettings}
I/ActivityManager(  399): Process com.android.settings (pid 26830) has died.
W/InputDispatcher(  399): Attempted to unregister already unregistered input channel '42316908 com.android.settings/com.android.settings.SubSettings (server)'
W/InputDispatcher(  399): Attempted to unregister already unregistered input channel '41f9a0e8 com.android.settings/com.android.settings.Settings (server)'
I/WindowState(  399): WIN DEATH: Window{42316908 u0 com.android.settings/com.android.settings.SubSettings}
I/WindowState(  399): WIN DEATH: Window{41f9a0e8 u0 com.android.settings/com.android.settings.Settings}
W/InputMethodManagerService(  399): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@426429d8 attribute=null, token = android.os.BinderProxy@42813540
D/dalvikvm( 9283): GC_CONCURRENT freed 1279K, 11% free 11070K/12380K, paused 2ms+9ms, total 29ms
D/dalvikvm(20573): GC_CONCURRENT freed 387K, 6% free 9629K/10144K, paused 2ms+5ms, total 40ms
W/InputMethodManagerService(  399): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@426c4200 attribute=null, token = android.os.BinderProxy@42813540
I/Gmail   (26984): MainSyncRequestProto: lowestBkwdConvoId: 0, highestHandledServerOp: 2669835, normalSync: true
I/ActivityManager(  399): Start proc com.google.android.gsf.login for service com.google.android.gsf.login/com.google.android.gsf.loginservice.GoogleLoginService: pid=9310 uid=10009 gids={50009, 3003, 2001, 1007, 3006, 1028, 1015}
D/dalvikvm( 9283): GC_CONCURRENT freed 742K, 12% free 10980K/12380K, paused 3ms+5ms, total 32ms
W/InputMethodManagerService(  399): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@42491c30 attribute=null, token = android.os.BinderProxy@42813540
D/dalvikvm( 9283): GC_CONCURRENT freed 587K, 12% free 11010K/12380K, paused 3ms+8ms, total 46ms
W/InputMethodManagerService(  399): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@426e2e98 attribute=null, token = android.os.BinderProxy@42813540
I/ActivityManager(  399): START u0 {cmp=com.weg.ecatalogue/.TabbarActivity} from pid 9283
D/dalvikvm( 9283): GC_CONCURRENT freed 606K, 11% free 11082K/12380K, paused 2ms+7ms, total 29ms
D/dalvikvm( 9283): GC_FOR_ALLOC freed 627K, 15% free 10595K/12380K, paused 15ms, total 15ms
D/dalvikvm( 9283): GC_FOR_ALLOC freed 64K, 13% free 10838K/12380K, paused 13ms, total 13ms
I/dalvikvm-heap( 9283): Grow heap (frag case) to 10.847MB for 249616-byte allocation
D/dalvikvm( 9283): GC_FOR_ALLOC freed <1K, 13% free 11082K/12624K, paused 16ms, total 16ms
D/dalvikvm( 9283): GC_FOR_ALLOC freed 73K, 13% free 11107K/12624K, paused 16ms, total 16ms
I/dalvikvm-heap( 9283): Grow heap (frag case) to 11.137MB for 279056-byte allocation
D/dalvikvm( 9283): GC_FOR_ALLOC freed 2K, 12% free 11377K/12900K, paused 15ms, total 15ms
V/PhoneStatusBar(  642): setLightsOn(true)
E/dalvikvm( 9283): Could not find class 'org.kxml2.kdom.Node', referenced from method org.ksoap2.SoapEnvelope.parseBody
W/dalvikvm( 9283): VFY: unable to resolve instanceof 315 (Lorg/kxml2/kdom/Node;) in Lorg/ksoap2/SoapEnvelope;
D/dalvikvm( 9283): VFY: replacing opcode 0x20 at 0x002f
E/dalvikvm( 9283): Could not find class 'org.kxml2.kdom.Node', referenced from method org.ksoap2.SoapEnvelope.parseHeader
W/dalvikvm( 9283): VFY: unable to resolve new-instance 315 (Lorg/kxml2/kdom/Node;) in Lorg/ksoap2/SoapEnvelope;
D/dalvikvm( 9283): VFY: replacing opcode 0x22 at 0x0003
E/dalvikvm( 9283): Could not find class 'org.kxml2.kdom.Node', referenced from method org.ksoap2.SoapEnvelope.writeBody
W/dalvikvm( 9283): VFY: unable to resolve check-cast 315 (Lorg/kxml2/kdom/Node;) in Lorg/ksoap2/SoapEnvelope;
D/dalvikvm( 9283): VFY: replacing opcode 0x1f at 0x000f
W/dalvikvm( 9283): VFY: array-length on non-array
W/dalvikvm( 9283): VFY:  rejecting opcode 0x21 at 0x0007
W/dalvikvm( 9283): VFY:  rejected Lorg/ksoap2/SoapEnvelope;.writeHeader (Lorg/xmlpull/v1/XmlSerializer;)V
W/dalvikvm( 9283): Verifier rejected class Lorg/ksoap2/SoapEnvelope;
W/dalvikvm( 9283): threadid=12: thread exiting with uncaught exception (group=0x4143e930)
E/AndroidRuntime( 9283): FATAL EXCEPTION: Thread-13122
E/AndroidRuntime( 9283): java.lang.VerifyError: org/ksoap2/SoapEnvelope
E/AndroidRuntime( 9283): at com.weg.ecatalogue.servercommunication.WebServiceCommunicator$2.run(WebServiceCommunicator.java:78)
E/AndroidRuntime( 9283): at java.lang.Thread.run(Thread.java:856)
W/ActivityManager(  399):   Force finishing activity com.weg.ecatalogue/.TabbarActivity
W/ActivityManager(  399):   Force finishing activity com.weg.ecatalogue/.HomeScreen
D/dalvikvm( 9283): GC_FOR_ALLOC freed 62K, 12% free 11462K/12900K, paused 14ms, total 14ms
I/dalvikvm-heap( 9283): Grow heap (frag case) to 11.457MB for 249616-byte allocation
D/dalvikvm( 9283): GC_FOR_ALLOC freed <1K, 11% free 11705K/13144K, paused 20ms, total 20ms
D/dalvikvm( 9283): GC_FOR_ALLOC freed 61K, 11% free 11707K/13144K, paused 21ms, total 21ms
I/dalvikvm-heap( 9283): Grow heap (frag case) to 11.696MB for 249616-byte allocation
D/dalvikvm( 9283): GC_FOR_ALLOC freed 0K, 11% free 11951K/13388K, paused 24ms, total 24ms
I/ActivityManager(  399): Displayed com.weg.ecatalogue/.TabbarActivity: +702ms
D/dalvikvm(26984): GC_CONCURRENT freed 1032K, 13% free 12414K/14128K, paused 8ms+4ms, total 64ms
D/dalvikvm(26984): WAIT_FOR_CONCURRENT_GC blocked 40ms
E/WindowManager( 9283): Activity com.weg.ecatalogue.TabbarActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{41f2c2c8 V.E..... R.....ID 0,0-362,230} that was originally added here
E/WindowManager( 9283): android.view.WindowLeaked: Activity com.weg.ecatalogue.TabbarActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{41f2c2c8 V.E..... R.....ID 0,0-362,230} that was originally added here
E/WindowManager( 9283): at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
E/WindowManager( 9283): at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
E/WindowManager( 9283): at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
E/WindowManager( 9283): at android.app.Dialog.show(Dialog.java:281)
E/WindowManager( 9283): at android.app.ProgressDialog.show(ProgressDialog.java:116)
E/WindowManager( 9283): at android.app.ProgressDialog.show(ProgressDialog.java:99)
E/WindowManager( 9283): at android.app.ProgressDialog.show(ProgressDialog.java:94)
E/WindowManager( 9283): at com.weg.ecatalogue.servercommunication.WebServiceCommunicator.callWebService(WebServiceCommunicator.java:72)
E/WindowManager( 9283): at com.weg.ecatalogue.listdata.DataSheetScreen.fetchElectricalData(DataSheetScreen.java:224)
E/WindowManager( 9283): at com.weg.ecatalogue.listdata.DataSheetScreen.onCreate(DataSheetScreen.java:177)
E/WindowManager( 9283): at android.app.Activity.performCreate(Activity.java:5104)
E/WindowManager( 9283): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
E/WindowManager( 9283): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
E/WindowManager( 9283): at android.app.ActivityThread.startActivityNow(ActivityThread.java:2023)
E/WindowManager( 9283): at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
E/WindowManager( 9283): at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
E/WindowManager( 9283): at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:749)
E/WindowManager( 9283): at android.widget.TabHost.setCurrentTab(TabHost.java:413)
E/WindowManager( 9283): at android.widget.TabHost.addTab(TabHost.java:240)
E/WindowManager( 9283): at com.weg.ecatalogue.TabbarActivity.onCreate(TabbarActivity.java:25)
E/WindowManager( 9283): at android.app.Activity.performCreate(Activity.java:5104)
E/WindowManager( 9283): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
E/WindowManager( 9283): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
E/WindowManager( 9283): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
E/WindowManager( 9283): at android.app.ActivityThread.access$600(ActivityThread.java:141)
E/WindowManager( 9283): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
E/WindowManager( 9283): at android.os.Handler.dispatchMessage(Handler.java:99)
E/WindowManager( 9283): at android.os.Looper.loop(Looper.java:137)
E/WindowManager( 9283): at android.app.ActivityThread.main(ActivityThread.java:5039)
E/WindowManager( 9283): at java.lang.reflect.Method.invokeNative(Native Method)
E/WindowManager( 9283): at java.lang.reflect.Method.invoke(Method.java:511)
E/WindowManager( 9283): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/WindowManager( 9283): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/WindowManager( 9283): at dalvik.system.NativeStart.main(Native Method)
I/Process ( 9283): Sending signal. PID: 9283 SIG: 9
I/ActivityManager(  399): Process com.weg.ecatalogue (pid 9283) has died.
W/InputMethodManagerService(  399): Got RemoteException sending setActive(false) notification to pid 9283 uid 10071
D/dalvikvm(26984): GC_CONCURRENT freed 1185K, 13% free 12429K/14128K, paused 3ms+5ms, total 45ms
D/dalvikvm(26984): WAIT_FOR_CONCURRENT_GC blocked 20ms
D/dalvikvm(26984): GC_CONCURRENT freed 1183K, 12% free 12448K/14128K, paused 5ms+4ms, total 43ms
D/dalvikvm(26984): WAIT_FOR_CONCURRENT_GC blocked 17ms
D/dalvikvm(  642): JIT code cache reset in 5 ms (1048524 bytes 1/0)
D/dalvikvm(  642): GC_CONCURRENT freed 2261K, 35% free 17958K/27452K, paused 6ms+27ms, total 100ms
I/ActivityManager(  399): START u0 {act=com.android.systemui.recent.action.TOGGLE_RECENTS flg=0x10800000 cmp=com.android.systemui/.recent.RecentsActivity} from pid 642
D/dalvikvm(  399): GC_EXPLICIT freed 3440K, 22% free 34472K/43988K, paused 3ms+34ms, total 267ms
D/dalvikvm(26984): GC_EXPLICIT freed 785K, 13% free 12340K/14128K, paused 61ms+7ms, total 124ms
I/Gmail   (26984): MainSyncRequestProto: lowestBkwdConvoId: 0, highestHandledServerOp: 2669898, normalSync: true
I/Gmail   (26984): lowestBackward conversation id 0
W/Gmail   (26984): Scheduling index for 300000 ms from now
I/Gmail   (26984): Sending notification intent: Intent { act=com.android.mail.action.update_notification typ=application/gmail-ls (has extras) }
I/Gmail   (26984): Sending notification intent: Intent { act=com.android.mail.action.update_notification typ=application/gmail-ls (has extras) }
D/dalvikvm(26984): GC_CONCURRENT freed 1004K, 13% free 12420K/14128K, paused 3ms+4ms, total 40ms
D/dalvikvm(26984): WAIT_FOR_CONCURRENT_GC blocked 32ms
D/dalvikvm(  642): GC_FOR_ALLOC freed 1358K, 30% free 19314K/27452K, paused 38ms, total 40ms
D/dalvikvm(  642): GC_FOR_ALLOC freed 292K, 27% free 20267K/27452K, paused 25ms, total 26ms
I/dalvikvm-heap(  642): Grow heap (frag case) to 20.182MB for 380496-byte allocation
D/dalvikvm(  642): GC_FOR_ALLOC freed <1K, 26% free 20639K/27824K, paused 23ms, total 23ms
D/dalvikvm(  642): GC_FOR_ALLOC freed 28K, 26% free 20677K/27824K, paused 26ms, total 27ms
I/dalvikvm-heap(  642): Grow heap (frag case) to 20.583MB for 380496-byte allocation
D/dalvikvm(  642): GC_FOR_ALLOC freed <1K, 26% free 21049K/28196K, paused 22ms, total 22ms
D/dalvikvm(  642): GC_FOR_ALLOC freed 6K, 26% free 21087K/28196K, paused 26ms, total 26ms
I/dalvikvm-heap(  642): Grow heap (frag case) to 20.982MB for 380496-byte allocation
D/dalvikvm(  642): GC_FOR_ALLOC freed <1K, 25% free 21458K/28568K, paused 29ms, total 29ms
D/dalvikvm(  642): GC_FOR_ALLOC freed 6K, 25% free 21498K/28568K, paused 26ms, total 26ms
I/dalvikvm-heap(  642): Grow heap (frag case) to 21.384MB for 380496-byte allocation
D/dalvikvm(  642): GC_FOR_ALLOC freed <1K, 25% free 21870K/28940K, paused 23ms, total 23ms
D/dalvikvm(  642): GC_FOR_ALLOC freed 17K, 24% free 22002K/28940K, paused 27ms, total 27ms
I/dalvikvm-heap(  642): Grow heap (frag case) to 21.876MB for 380496-byte allocation
D/dalvikvm(  642): GC_FOR_ALLOC freed 3K, 24% free 22371K/29312K, paused 26ms, total 26ms
I/ActivityManager(  399): START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10704000 cmp=com.jv.falcon.pro/.activities.TweetListActivity} from pid 642
I/ActivityManager(  399): Start proc com.jv.falcon.pro for activity com.jv.falcon.pro/.activities.TweetListActivity: pid=9342 uid=10182 gids={50182, 3003, 1015, 1028}
I/ActivityThread( 9342): Pub com.jv.falcon.pro.TweetProvider: com.jv.falcon.pro.data.TweetProvider
D/dalvikvm( 9342): GC_CONCURRENT freed 148K, 2% free 9080K/9256K, paused 4ms+10ms, total 36ms
V/Falcon  ( 9342): STOPPING real time service manually
D/dalvikvm( 9342): GC_CONCURRENT freed 187K, 3% free 9335K/9552K, paused 3ms+4ms, total 27ms
V/TweetListFragment( 9342): ## Inital pos : 270
I/TweetListFragment( 9342): +++ Calling initLoader()! +++
I/TweetListFragment( 9342): +++ Initializing the new Loader... +++
I/TweetListFragment( 9342): +++ onCreateLoader() called! +++
D/dalvikvm( 9342): GC_CONCURRENT freed 123K, 2% free 9603K/9756K, paused 2ms+3ms, total 17ms
D/dalvikvm( 9342): WAIT_FOR_CONCURRENT_GC blocked 13ms
I/TweetListFragment( 9342): +++ onCreateLoader() called! +++
W/GAV2    ( 9342): Thread[main,5,main]: Connection to service failed 1
W/ActivityManager(  399): Unable to start service Intent { act=com.google.android.gms.analytics.service.START (has extras) } U=0: not found
W/GAV2    ( 9342): Thread[main,5,main]: Need to call initialize() and be in fallback mode to start dispatch.
D/dalvikvm( 9342): GC_CONCURRENT freed 73K, 2% free 9928K/10032K, paused 11ms+12ms, total 51ms
D/libEGL  ( 9342): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
D/libEGL  ( 9342): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
D/libEGL  ( 9342): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
D/OpenGLRenderer( 9342): Enabling debug mode 0
I/ActivityManager(  399): Displayed com.jv.falcon.pro/.activities.TweetListActivity: +1s17ms
V/Falcon  ( 9342): ## QUERY -- count = 370
E/TweetListFragment( 9342): +++ onLoadFinished() called! +++ false
D/dalvikvm( 9342): GC_CONCURRENT freed 64K, 1% free 10297K/10396K, paused 1ms+3ms, total 27ms
D/dalvikvm( 9342): GC_CONCURRENT freed 257K, 3% free 10455K/10740K, paused 3ms+10ms, total 40ms
D/dalvikvm( 9342): GC_CONCURRENT freed 244K, 3% free 10719K/10992K, paused 3ms+11ms, total 76ms
D/dalvikvm(  399): GC_FOR_ALLOC freed 2317K, 23% free 33903K/43988K, paused 137ms, total 139ms
D/dalvikvm(  642): GC_FOR_ALLOC freed 6239K, 45% free 16346K/29312K, paused 28ms, total 28ms
I/ActivityManager(  399): START u0 {act=com.android.systemui.recent.action.TOGGLE_RECENTS flg=0x10800000 cmp=com.android.systemui/.recent.RecentsActivity (has extras)} from pid 642
D/dalvikvm( 9342): GC_CONCURRENT freed 265K, 3% free 10988K/11300K, paused 6ms+8ms, total 64ms
I/GAV2    ( 9342): Thread[GAThread,5,main]: No campaign data found.
D/dalvikvm(  642): GC_CONCURRENT freed 237K, 37% free 18614K/29312K, paused 5ms+4ms, total 46ms
D/dalvikvm(  642): WAIT_FOR_CONCURRENT_GC blocked 37ms
D/dalvikvm(  642): GC_CONCURRENT freed 110K, 27% free 21673K/29312K, paused 3ms+3ms, total 32ms
D/dalvikvm(  642): GC_FOR_ALLOC freed 52K, 24% free 22446K/29312K, paused 26ms, total 26ms
I/dalvikvm-heap(  642): Grow heap (frag case) to 22.310MB for 380496-byte allocation
D/dalvikvm(  642): GC_FOR_ALLOC freed 1K, 24% free 22817K/29684K, paused 52ms, total 52ms
D/dalvikvm(  399): GC_FOR_ALLOC freed 1423K, 23% free 34145K/43988K, paused 132ms, total 134ms
W/GAV2    ( 9342): Thread[Service Reconnect,5,main]: Connection to service failed 1
W/ActivityManager(  399): Unable to start service Intent { act=com.google.android.gms.analytics.service.START (has extras) } U=0: not found
D/dalvikvm( 9253): GC_CONCURRENT freed 1114K, 17% free 9320K/11148K, paused 3ms+4ms, total 25ms 
```

.....请建议我.:(

# layout - 使用backbone.js 构建具有多个视图的页面

> ID：13881132
> 
> 赞同：4
> 
> 时间：2012-12-14T15:01:59.407
> 
> 标签：layout, backbone.js, views, models

我浏览了各种演示、示例和教程，但仍然没有找到编写以下结构的正确/最佳方法：

当我到达某条路线时，我想在视图中渲染多个视图，这些视图通过三个级别。所以我的基本结构是这样的 -

*   容器
    *   文章
        *   部分
            *   零件
            *   零件
        *   部分
            *   零件
        *   部分
            *   零件
        *   部分
            *   零件
            *   零件
    *   文章
        *   部分
            *   零件
            *   零件
        *   部分
            *   零件
        *   部分
            *   零件
            *   零件
    *   文章
        *   部分
            *   零件
        *   部分
            *   零件
            *   零件
    *   文章
        *   部分
            *   零件
            *   零件
        *   部分
            *   零件
            *   零件
        *   部分
            *   零件
        *   部分
            *   零件
            *   零件

每个视图/模型必须彼此分开，因为它们可能需要重新渲染。我查看了布局管理器、嵌套模型和关系模型，但似乎无法得到我想要的。是否有一种“正确”的方式来创建这种类型的布局，我应该使用 Collections.

对不起，我缺乏理解。一个完整的新手，有一个相当大的雄心勃勃的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:21:14.273

[MarionetteJS](http://marionettejs.com/)是 Backbone 的插件库，将帮助您处理这种视图嵌套。

它提供了 Regions、Layout、CollectionView 和 ItemView，它们在你的情况下是很好的帮手。

这是一个非常好的[教程](http://davidsulc.com/blog/2012/04/15/a-simple-backbone-marionette-tutorial/)[，第 2 部分](http://davidsulc.com/blog/2012/04/22/a-simple-backbone-marionette-tutorial-part-2/)

# php - 如何加载相同 php 扩展的两个版本？

> ID：13881134
> 
> 赞同：4
> 
> 时间：2012-12-14T15:02:03.493
> 
> 标签：php, php-extension

我正在开发的 Web 应用程序需要能够处理同一个 PHP 扩展的两个不同版本。（特别是 MapServer 5.6 的 MapScript 和 Mapserver 6.2 的 MapScript。）

在 php 执行开始之前，脚本不会知道需要加载两个版本中的哪一个。（但每个请求只需要一个扩展名。）

我原本的计划是使用php内置的dl功能，但我发现dl因为安全问题被禁用了。( [http://php.net/manual/en/function.dl.php](http://php.net/manual/en/function.dl.php) )

在执行期间有什么安全的方法来加载扩展吗？或者也许总是加载两者，但将它们放在不同的命名空间中以便可以单独访问它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:44:05.047

我给了这个问题+1，因为这是一个很好的问题，问得很好。

但是，我无法想象会有一个答案可以满足您的需求。如果扩展在版本之间不向后兼容，那么它显然设计得不好，而且很难看出 PHP 如何对此负责。

我能想到的最佳解决方案是使用两个单独的 php.ini 或 .htaccess 文件，指定扩展的两个单独版本。从您的 Web 服务器运行的 PHP 程序会根据它们所在的目录选择不同版本的扩展。

例如`http://myserver/newmaps/program.php`，将运行新版本的扩展并`http://myserver/oldmaps/program.php`运行旧版本的扩展。

然后你只需要在两个目录中有相同的程序。如果它检测到它没有得到它需要的扩展版本，它可以发出一个 http 重定向来加载另一个版本。

# php - MySQL：count(id) 在使用 GROUP BY 时返回 1 而不是实际的总行数

> ID：13881136
> 
> 赞同：1
> 
> 时间：2012-12-14T15:02:05.567
> 
> 标签：php, mysql, count, group-by

我的查询如下（它搜索上下 4 个级别的父母和孩子）。因此，我得到了在单个“num”值中找到的行数：大约 22k 行。

```
SELECT COUNT(fts_trip_id) AS num 
FROM feed_trips_se
JOIN departures ON d_departure_id=fts_trip_departure_id
JOIN destinations ON destinations.d_destination_id=d_departure_id
LEFT JOIN destinations AS destChild1 ON destChild1.d_destination_parent_id=destinations.d_destination_id
LEFT JOIN destinations AS destChild2 ON destChild2.d_destination_parent_id=destChild1.d_destination_id
LEFT JOIN destinations AS destChild3 ON destChild3.d_destination_parent_id=destChild2.d_destination_id
LEFT JOIN destinations AS destChild4 ON destChild4.d_destination_parent_id=destChild3.d_destination_id
LEFT JOIN destinations AS destParent1 ON destParent1.d_destination_id=destinations.d_destination_parent_id
LEFT JOIN destinations AS destParent2 ON destParent2.d_destination_id=destParent1.d_destination_parent_id
LEFT JOIN destinations AS destParent3 ON destParent3.d_destination_id=destParent2.d_destination_parent_id
LEFT JOIN destinations AS destParent4 ON destParent4.d_destination_id=destParent3.d_destination_parent_id
WHERE fts_trip_date>=NOW()
ORDER BY fts_trip_date ASC, fts_trip_price ASC 
```

但是，由于我使用了很多 LEFT JOIN，所以 ~22k 的数字并不是正确的可用行程数量。我需要按实际的 fts_trip_id 对这些行进行分组。

不幸的是，当我执行 GROUP BY 时，我得到的行数与正确的行程数（~8k）相同，而不是单行的正确次数。然后所有行都显示一个数字，通常是 1，但也有 10 或 13。

老实说，当我使用 GROUP BY 函数时，我不知道为什么我没有得到 ~8k 的单行值。谁能帮我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T15:07:52.620

您可以使用[COUNT(DISTINCT)](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count-distinct) :`COUNT(DISTINCT fts_trip_id)`来获取 id 的计数。GROUP BY 只会计算每个 id 的结果数。

# c# - 使用 Threads C# 制作的聊天服务器的 Cpu 使用率 100%

> ID：13881139
> 
> 赞同：2
> 
> 时间：2012-12-14T15:02:17.317
> 
> 标签：c#, multithreading, chat, cpu

我有一个用 Threads 制作的聊天服务器，运行良好，我连接了 5 个客户端，但 CPU 使用率及时增加到 100%！probe放了一个Thread.Sleep(30000)，但是没有解决问题，这里是连接新客户时的代码

```
public void StartListening()
    {

            // Get the IP of the first network device, however this can prove unreliable on certain configurations
            IPAddress ipaLocal = ipAddress;

            // Create the TCP listener object using the IP of the server and the specified port
            tlsClient = new TcpListener(ipaLocal, 1986);

            // Start the TCP listener and listen for connections
            tlsClient.Start();

            // The while loop will check for true in this before checking for connections
            ServRunning = true;

            // Start the new tread that hosts the listener
            thrListener = new Thread(KeepListening);
            thrListener.Start();

    }

    private void KeepListening()
    {
        // While the server is running
        while (ServRunning == true)
        {
            // Accept a pending connection

            tcpClient = tlsClient.AcceptTcpClient();
            // Create a new instance of Connection
            Connection newConnection = new Connection(tcpClient);

            Thread.Sleep(30000);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:08:42.983

[`AcceptTcpClient`](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.accepttcpclient.aspx)是一个阻塞调用，所以没有理由调用`Thread.Sleep`：

> AcceptTcpClient 是一种阻塞方法，它返回可用于发送和接收数据的 TcpClient。

我认为您的 100% CPU 利用率问题可能在您的应用程序的其他地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:14:49.943

使用名为 BeginAcceptTcpClient 的 AcceptTcpClient 异步版本。带有代码示例的 BeginAcceptTcpClient 文档可[在此处](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.beginaccepttcpclient.aspx)获得。

# ios - 根据 UIPanGestureRecognizer 翻译值更改 UIImageView 中的图像

> ID：13881144
> 
> 赞同：1
> 
> 时间：2012-12-14T15:02:34.733
> 
> 标签：ios, xcode, uipangesturerecognizer

我在数组中有 8 个图像，并且`UIImageView`一次显示数组中的一个图像。我也有`UIPanGestureRecognizer`，`UIImageView`所以当用户在图像上横向移动手指时，它会改变（有点像图像顶部的不可见滚动条）。我正在使用平移手势的平移值来更改图像。这一切都有效，但不是我想要的方式。图像变化太快，只需短手指平移即可滚动图像。有没有办法需要更长的平移来更改图像？或者任何其他方法可以让用户“更顺畅”？

。H

```
@interface FirstViewController : UIViewController
    @property (nonatomic, retain) IBOutlet UIImageView *imageView;
    - (IBAction)pan:(UIGestureRecognizer *)panGesture; 
```

.m

```
@interface FirstViewController () {
    NSArray * imageArray;
    int _currentIndex;
}

@end

@implementation FirstViewController

- (IBAction)pan:(UIPanGestureRecognizer *)panGesture {
  //  NSLog(@"panned");
    CGPoint translation = [panGesture translationInView:self.view];
    [self.panLabel setText: NSStringFromCGPoint(translation)];
    NSLog(@"%@ translation", NSStringFromCGPoint(translation));

    if (translation.x<-1) {
        _currentIndex=(_currentIndex<=0)?0:_currentIndex-1;
        UIImage *img = [UIImage imageNamed:[imageArray objectAtIndex:_currentIndex]];
        [self.imageView setImage:img];
    }
    else if(translation.x>1){
        _currentIndex=(_currentIndex>=7)?7:_currentIndex+1;
        UIImage *img = [UIImage imageNamed:[imageArray objectAtIndex:_currentIndex]];
        [self.imageView setImage:img];
    }
    [panGesture setTranslation:CGPointZero inView:self.view];
}

- (void)viewDidLoad {
    [super viewDidLoad];
    imageArray = [[NSArray alloc]
                  initWithObjects:@"image1.jpg", @"image2.jpg", @"image3.jpg", @"image4.jpg", @"image5.jpg", @"image6.jpg", @"image7.jpg", @"image8.jpg", nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:57:34.800

您可以修改您的代码以跟踪 X 平移随着时间的推移。这将允许您为您的锅量设置一个变量。修改后的代码如下：

```
@interface FirstViewController () {
    NSArray * imageArray;
    int _currentIndex;

    CGFloat _currentPanXAmount;
    CGFloat _panThreshold;
}

@end

@implementation FirstViewController

- (IBAction)pan:(UIPanGestureRecognizer *)panGesture {
    CGPoint translation = [panGesture translationInView:self.view];

    _currentPanXAmount += translation.x;

    [self.panLabel setText: NSStringFromCGPoint(translation)];
    NSLog(@"%@ translation", NSStringFromCGPoint(translation));

    if (_currentPanXAmount < (-1 * _panThreshold)) {
        _currentIndex=(_currentIndex<=0)?0:_currentIndex-1;
        UIImage *img = [UIImage imageNamed:[imageArray objectAtIndex:_currentIndex]];
        [self.imageView setImage:img];
        _currentPanXAmount = 0.0;
    }
    else if(_currentPanXAmount > _panThreshold){
        _currentIndex=(_currentIndex>=7)?7:_currentIndex+1;
        UIImage *img = [UIImage imageNamed:[imageArray objectAtIndex:_currentIndex]];
        [self.imageView setImage:img];
        _currentPanXAmount = 0.0;
    }
    [panGesture setTranslation:CGPointZero inView:self.view];
}

- (void)viewDidLoad {
    [super viewDidLoad];
    imageArray = [[NSArray alloc]
                  initWithObjects:@"image1.jpg", @"image2.jpg", @"image3.jpg", @"image4.jpg", @"image5.jpg", @"image6.jpg", @"image7.jpg", @"image8.jpg", nil];

    // Make this larger for slower transitions and smaller for faster transitions.
    _panThreshold = 10.0;
} 
```

# php - php datetime插入mysql

> ID：13881147
> 
> 赞同：0
> 
> 时间：2012-12-14T15:02:48.627
> 
> 标签：php, mysql

我正在尝试将日期时间插入 mysql 表中的列中。

```
 <?php

//Some code

date_default_timezone_set('Europe/London');

//Other variables defined also

$date_time = new DateTime();

$queryreg = mysql_query ("

    INSERT INTO users VALUES ('','$username','$password','$email','$website','$image','$date_time')

    ");

?> 
```

但是浏览器指出：“可捕获的致命错误：无法将类 DateTime 的对象转换为第 181 行 C:\xampp\htdocs\design\register.php 中的字符串”。知道为什么要这样做吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:06:37.837

```
$date = $date_time->format('Y-m-d H:i:s');

INSERT INTO .... VALUES (..., '$date'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:10:25.017

为日期提供字符串格式，如下所示：

date_format（变量，“字符串格式”）

例如 date_format($date_time, "%m/%d/%y")。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:06:09.893

这是因为您试图通过在 SQL 查询中用 '' 将 $date_time 类型化为字符串。删除周围的引号或通过执行以下操作转换为字符串：

```
$date_time->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T15:06:51.003

您必须`$datetime->format('Y-m-d H:i:s')`用于插入，如下所示：

```
INSERT INTO users VALUES ('', '$username', '$password', '$email', '$website', '$image', '{$date_time->format('Y-m-d H:i:s')}') 
```

我还建议不要使用`mysql_*`函数，而是学习使用`PDO`准备好的语句或至少使用`mysqli_*`函数。

还要清理您的输入以防止 SQL 注入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T15:09:02.467

最好的解决方案是在表中使用默认值 CURRENT_TIMESTAMP 的时间戳字段。

但是如果你想手动控制这个，那么你需要将 DateTime 对象转换为这样的字符串：

```
<?php
//Some code
date_default_timezone_set('Europe/London');

//Other variables defined also
$date_time = new DateTime();

$queryreg = mysql_query("INSERT INTO users VALUES
      ('','$username','$password','$email','$website','$image',
      '{$date_time->format('Y-m-d H:i:s')}')");
?> 
```

# batch-file - CMD.exe 对变量值有预感

> ID：13881153
> 
> 赞同：2
> 
> 时间：2012-12-14T15:03:10.770
> 
> 标签：batch-file, windows-7-x64, cmd

在我编写的批处理脚本中，我在变量赋值中遇到了奇怪的行为。我可以编造的最简单的例子来重新创建问题如下。我创建了文件`type pos.bat`：

```
@echo on
FOR /R ".\" %%F IN (*.txt) DO (
echo Look: %%F
set file=%%~dpF%%~nF
echo %file%
) 
```

在包含两个 *.txt 文件的目录中，其中一个在子目录中：

```
pos/
    |-pos.bat
    |-file1.txt
    |dir/
         |-file2.txt 
```

我得到以下输出：

```
F:\pos>pos.bat
F:\pos>FOR /R ".\" %F IN (*.txt) DO (
echo Look: %F
 set file=%~dpF%~nF
 echo F:\pos\dir\file2
)

F:\pos>(
echo Look: F:\pos\file1.txt
 set file=F:\pos\file1
 echo F:\pos\dir\file2
)
Look: F:\pos\file1.txt
F:\pos\dir\file2

F:\pos>(
echo Look: F:\pos\dir\file2.txt
 set file=F:\pos\dir\file2
 echo F:\pos\dir\file2
)
Look: F:\pos\dir\file2.txt
F:\pos\dir\file2 
```

不应该在循环的第一次迭代中将值`%file%`改回吗？`F:\pos\file1.txt`此外，我很惊讶 `%file% 的值应该在脚本调用之间保持不变。第一次调用脚本的行为符合我的预期：

```
F:\pos>FOR /R ".\" %F IN (*.txt) DO (
echo Look: %F
 set file=%~dpF%~nF
 echo
)

F:\pos>(
echo Look: F:\pos\file1.txt
 set file=F:\pos\file1
 echo
)
Look: F:\pos\file1.txt
ECHO is on.

F:\pos>(
echo Look: F:\pos\dir\file2.txt
 set file=F:\pos\dir\file2
 echo
)
Look: F:\pos\dir\file2.txt
ECHO is on. 
```

但是所有后续调用都给了我垃圾结果。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:08:19.967

您需要启用延迟扩展，然后`!`用于循环内的变量。

**在文件顶部（通常）**

```
SETLOCAL EnableDelayedExpansion 
```

**在你的 FOR 循环中**

```
echo !file! 
```

这是关于原因和原因的一个[很好的资源](http://ss64.com/nt/delayedexpansion.html)。

# python - 如果命令的输出缺少特定字符串，则发出警报

> ID：13881158
> 
> 赞同：0
> 
> 时间：2012-12-14T15:03:24.957
> 
> 标签：python, perl, bash, shell

使用`bash script/python/perl script`，是否可以显示命令的输出是否没有字符串，例如

```
curl -i http://www.google.com

HTTP/1.1 302 Found
Location: http://www.google.com.hk/
Cache-Control: private
Content-Type: text/html; charset=UTF-8 
```

我想做的是：

1.  如果输出包含 302，则不打印
2.  否则，打印`302 is missed`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:10:40.413

```
$ grep -q 302 << EOF || echo "302 is missed"
> HTTP/1.1 302 Found
> Location: http://www.google.com.hk/
> Cache-Control: private
> Content-Type: text/html; charset=UTF-8
> EOF
$ grep -q 302 << EOF || echo "302 is missed"
> HTTP/1.1 312 Found
> Location: http://www.google.com.hk/
> Cache-Control: private
> Content-Type: text/html; charset=UTF-8
> EOF
302 is missed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:11:07.513

你的意思是这样的：

```
if [ ! `echo 302 | grep 302` ] ; then echo 302 is missed; fi 
```

您可以在哪里替换`echo 302`为任何适当的命令...

等效地：

```
echo 302 | grep 302 > /dev/null || echo "302 is missed" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:14:42.790

您可以使用`curl|grep`静默的结果作为测试：

```
if ! `curl -i -s http://www.google.com|grep -q 302` ; then echo "302 is missed" ; fi 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T15:22:29.370

你可以告诉`curl`只输出 http 代码，如果这是你感兴趣的。

例如：

```
$ curl -Is -w %{http_code} -o /dev/null http://stackoverflow.com
200 
```

上面使用的 curl 选项是：

*   `-I`：仅获取 HTTP 标头
*   `-s`： 沉默的。不显示进度表或错误消息
*   `-w`: 写什么。在这种情况下，只有 http_code
*   `-o`: 将输出发送到哪里

因此，您可以将其添加到条件中，如下所示：

```
[[ $(curl -Is -w %{http_code} -o /dev/null http://stackoverflow.com) -ne 302 ]] && echo "302 is missed" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T15:27:24.603

我认为这可以解决问题，尽管一如既往，先测试。

```
perl -e '$pat = shift; print "$pat is missed\n" unless qx{@ARGV} =~ /\Q$pat\E/' 302 curl -i http://www.google.com 
```

# jquery - 链接上的jquery单击将1添加到变量

> ID：13881159
> 
> 赞同：1
> 
> 时间：2012-12-14T15:03:32.460
> 
> 标签：jquery, variables

我试图在单击下一个按钮时将 1 添加到变量中，这将显示一个隐藏的上一个按钮，但我似乎无法让添加 1 部分工作。我在下面粘贴了代码和指向 jsfiddle 的链接：

[http://jsfiddle.net/huddds/JesBR/1/](http://jsfiddle.net/huddds/JesBR/1/)

HTML

```
 <a href="#" class="prevButton">PREVIOUS</a>
  <a href="#" class="nextButton">NEXT</a> 
```

Javascript

```
 nextClicked = 0;
 currentNextClicked = nextClicked;

 $(document).ready(function() {

     $('a.nextButton').live('click', function(){
         nextClicked = currentNextClicked + 1;
         return false;
     });

     if(nextClicked == 0){
         $('a.prevButton').hide();    
     }
     if(nextClicked == 1){
         $('.prevButtonFalse').hide();
         $('.prevButton').show();

     }
     if(nextClicked == 2){

     }
     if(nextClicked == 3){

     }
     if(nextClicked == 4){

     }
 });​ 
```

CSS

```
 .nextButtonFalse{display:none;}
 .prevButtonFalse{display:none;} 
```

任何帮助都会很棒，在此先感谢您的任何回复。

我决定使用这个选项：

HTML

```
 <div>Total : <span id="total">0</span></div>
 <input class="subtract" data-amount="1" type="button" value="PREVIOUS" />
 <input class="add" data-amount="1" type="button" value="NEXT" /> 
```

jQuery

```
 $(document).ready(function() {
   $('.add').click(function() {
      $('#total').text(parseInt($('#total').text()) + parseInt($(this).data('amount')));
   });
 })

 $(document).ready(function() {
   $('.subtract').click(function() {
      $('#total').text(parseInt($('#total').text()) - parseInt($(this).data('amount')));
   });
 }) 
```

[​http://jsfiddle.net/huddds/JesBR/20/](http://jsfiddle.net/huddds/JesBR/20/) ​ ​ ​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:08:48.203

您只检查`nextClicked`文档加载的值。把它放在`live`点击处理程序中。您还需要更新`currentNextClicked`. 也许移动`currentNextClicked = nextClicked;`到点击处理程序是你想要的？

```
$(document).ready(function() {
    $('a.nextButton').live('click', function(){
        currentNextClicked = nextClicked;
        nextClicked = currentNextClicked + 1;
        foo();
        return false;
    });

    foo();
});

function foo(){

    if(nextClicked == 0){
        $('a.prevButton').hide();    
    }
    if(nextClicked == 1){
        $('.prevButtonFalse').hide();
        $('.prevButton').show();
    }
    if(nextClicked == 2){

    }
    if(nextClicked == 3){

    }
    if(nextClicked == 4){

    }

} 
```

[http://jsfiddle.net/JesBR/19/](http://jsfiddle.net/JesBR/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:06:38.423

您初始化`nextClicked`和`currentNextClicked`两者`0`，然后在您的`click`事件处理程序中执行以下操作：

```
nextClicked = currentNextClicked + 1; 
```

这将设置`nextClicked`为 1，因为 0 + 1 = 1。但是，您永远不会更改 的值`currentNextClicked`，因此下次单击时，它仍将设置`nextClicked`为 0 + 1 的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:27:17.810

正如@Anthony 所说，当你这样做时，`nextClicked = currentNextClicked + 1;`你总是得到 1 作为结果。

此外，您需要`if`在每次单击后进行以下检查，并且您可以隐藏`a.prevButton`加载时的值，因为该`nextClicked`值最初始终设置为`0`.

试试这个：

[http://jsfiddle.net/nienn/JesBR/18/](http://jsfiddle.net/nienn/JesBR/18/)

```
nextClicked = 0;

function onClickCheck(){

    if(nextClicked == 0){
        $('a.prevButton').hide();    
    }
    if(nextClicked == 1){
        $('.prevButtonFalse').hide();
        $('.prevButton').show();
    }
    if(nextClicked == 2){

    }
    if(nextClicked == 3){

    }
    if(nextClicked == 4){

    }
}

$(document).ready(function() {

    $('a.prevButton').hide();
    $('a.nextButton').live('click', function(e){
        nextClicked += 1;        
        onClickCheck ();
        e.preventDefault();
    });

});​ 
```

# mongodb - 使用 AngularJs 和 MongoDB/Mongoose

> ID：13881161
> 
> 赞同：16
> 
> 时间：2012-12-14T15:03:34.623
> 
> 标签：mongodb, express, angularjs

我正在尝试使用 Mongoose 将 AngularJS 与 MongoDB 连接起来。我想传递控制器使用的模型，所以我可以 $scope 给数据。我不确定我是否必须设置 Angular 服务，如果是的话，你能指出我正确的方向吗？谢谢你。

概述：

模型：

```
var mongoose = require('mongoose');
var db = mongoose.createConnection('mongodb://localhost:3000/database');
var orderSchema = new mongoose.Schema({
    routeFrom : String,
    routeTo : String,
    leaving: String
});
var Order = db.model('Order', orderSchema);
module.exports = Order; 
```

控制器：

```
// of course 'require' does not work but you get the idea
function OrderController($scope) {
  return $scope.orders = Order.find({});
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-14T20:09:10.320

你需要一个临时步骤。直接从 Angular 转到 Mongo 是行不通的。如果您想要一个通用的 Mongo REST 接口，您可以使用 Angular 捆绑的 $http 服务，请查看 Mongo 网站上的 REST 服务列表。

Mongo REST 服务

[http://www.mongodb.org/display/DOCS/Http+Interface#HttpInterface-RESTInterfaces](http://www.mongodb.org/display/DOCS/Http+Interface#HttpInterface-RESTInterfaces)

角 $http 服务：

[http://docs.angularjs.org/api/ng.$http](http://docs.angularjs.org/api/ng.%24http)

这里有很多不同的选择，但这可能是最简单的起床方式。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-22T20:33:14.993

中间步骤由 npm 模块 angoose 提供。它完全符合您的要求：使 mongoose 模型可用作 Angular 可注入工厂。您需要做的只是在您的 html 文件中包含一个脚本标签。

鹅模块：

[https://npmjs.org/package/angoose](https://npmjs.org/package/angoose)

免责声明：我是 angoose 模块的贡献者。

# xcode - 如何创建从 NSWindow 模态弹出的 NSPanel（Cocoa 编程）

> ID：13881164
> 
> 赞同：4
> 
> 时间：2012-12-14T15:03:41.103
> 
> 标签：xcode, modal-dialog, nswindow, nspanel

就像在 NSWindow 中单击按钮后显示的 NSPanel。

我找了很多，但没有简单的例子。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T20:08:03.110

可以这样做：

```
-(IBAction)showButtonAction:(id)sender {
    [[NSApplication sharedApplication] beginSheet:panelOutlet
                                   modalForWindow:self.window
                                    modalDelegate:self
                                   didEndSelector:@selector(sheetDidEnd:returnCode:contextInfo:)
                                      contextInfo:nil];
} 
```

注意力：

> 如果您不使用此面板一次，请不要忘记取消选中*Attributes Inspector*和**Release When Closed**`NSPanel`中的**Visible At Launch**复选框 。

 ***结果：

![截图图片](../Images/520f122ce6e13f680e016ce576af8680.png)***

# excel - 使用列表框中相应的下一列更新标签标题

> ID：13881165
> 
> 赞同：1
> 
> 时间：2012-12-14T15:03:42.110
> 
> 标签：excel, vba

我有一个包含 2 列的 Excel 电子表格。一列是组织名称。下一列是该组织每小时收费多少。我正在使用用户表单，并且有一个列表框和一个标签。列表框显示第 1 列中的所有值。

```
Private Sub UserForm_Initialize()
Dim lbtarget As MSForms.ListBox
Dim rngSource As Range

'Set reference to the range of data to be filled
Set rngSource = Worksheets("Sheet1").Range("A2:A125")

'Fill the listbox
Set lbtarget = Me.ListBox1
With lbtarget
    'Determine number of columns
    .ColumnCount = 1
    'Set column widths
    .ColumnWidths = "100"
    'Insert the range of data supplied
    .List = rngSource.Cells.Value
End With

End Sub 
```

我希望标签与列表框中的选定项目相对应。例如，如果我选择资产管理（单元格 A2），我希望标签显示同一行但下一列，$47.00（单元格 B2）。任何帮助将不胜感激。有一个美好的周末！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:15:22.220

使用列表框索引来处理范围的第二列，即

```
Private Sub ListBox1_Click()
Dim Idx As Long

    Idx = ListBox1.ListIndex + 1
    Label1.Caption = Worksheets("Sheet1").Range("A2:A18").Cells(Idx, 2)
End Sub 
```

# sql - ORACLE SQL 错误 - 缺少右括号 - 查询

> ID：13881168
> 
> 赞同：1
> 
> 时间：2012-12-14T15:03:50.660
> 
> 标签：sql, oracle, ora-00907

我试图在网上搜索答案，不幸的是它无法解决问题。

这是我的代码：

```
SELECT d.driverID, 
       e.firstname, 
       e.lastname, 
       t.testid, 
       t.testType
 FROM driver d
 LEFT JOIN employee e 
   ON (e.employeeID = d.employeeID)
INNER JOIN driver_test dt 
   ON (d.driverID = dt.driverID  WHERE dt.testDate(BETWEEN TO_DATE('01-JAN-2012', 'dd-mm-yyyy') AND TO_DATE('31-JAN-2012', 'dd-mm-yyyy')))
RIGHT JOIN test t ON dt.testID = t.testID WHERE (t.testType='Alcohol'); 
```

问题出在第 4 行。它说缺少右括号。我尝试添加其他的，但问题仍然存在。

附言

我是一名学生，目前正在学习 Oracle SQL，所以我的知识仍然缺乏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:07:31.300

您的正确查询应该是

```
SELECT d.driverID, e.firstname, e.lastname, t.testid, t.testType
FROM driver d
LEFT JOIN employee e ON(e.employeeID = d.employeeID)
INNER JOIN driver_test dt ON(d.driverID = dt.driverID and dt.testDate(BETWEEN TO_DATE('01-JAN-2012', 'dd-mm-yyyy') AND TO_DATE('31-JAN-2012', 'dd-mm-yyyy')))
RIGHT JOIN test t ON dt.testID = t.testID 
WHERE (t.testType='Alcohol'); 
```

该`Where`子句用于过滤，在这种情况下，您将连接逻辑操作（在连接中）。所以你只需要使用AND。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:10:52.143

你的陈述中有几个错误

*   要加入多个条件，您必须使用 AND，而不是 WHERE
*   去掉列名和 BETWEEN 之间的 (

固定查询：

```
SELECT d.driverID,
   e.firstname,
   e.lastname,
   t.testid,
   t.testType
FROM driver d
  LEFT JOIN employee e
    ON (e.employeeID = d.employeeID)
 INNER JOIN driver_test dt
    ON (d.driverID = dt.driverID AND
       dt.testDate BETWEEN TO_DATE('01-JAN-2012',
                                    'dd-mm-yyyy') AND
       TO_DATE('31-JAN-2012',
                'dd-mm-yyyy'))
 RIGHT JOIN test t
    ON dt.testID = t.testID
 WHERE (t.testType = 'Alcohol'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:09:05.390

**试试这个更清楚**

```
SELECT d.driverID, e.firstname, e.lastname, t.testid, t.testType
FROM driver d
LEFT JOIN employee e ON(e.employeeID = d.employeeID)
INNER JOIN driver_test dt ON(d.driverID = dt.driverID)
RIGHT JOIN test t ON dt.testID = t.testID
where dt.testDate(BETWEEN TO_DATE('01-JAN-2012', 'dd-mm-yyyy') AND 
TO_DATE('31-JAN-2012','dd-mm-yyyy'))) and t.testType='Alcohol'; 
```

# javascript - 是否可以向 DOM 文档添加方法？

> ID：13881172
> 
> 赞同：0
> 
> 时间：2012-12-14T15:04:09.140
> 
> 标签：javascript, methods, domdocument

我正在开发一个函数来在另一个元素标识符中查找特定元素（类似于 getElementById 但适用于任何其他元素）......因为这会引发我的错误：

```
var ancestor = document.getElementById('divAncestor');
var child = ancestor.getElementById('divChild'); 
```

我知道，HTML 规定 id 必须是唯一的，但事实证明，经常运行的脚本可以包含具有相同 id 的项目。所以，这就是为什么我不只是这样称呼孩子的原因：

```
var ancestor = document.getElementById('divChild'); 
```

第一个选项是将此函数添加到每个 HTML 元素，或者至少是 div（因为这是我感兴趣的内容）。第二个，也是我更喜欢的一个，是向 dom 文档添加一个方法，并通过传递父子 ID 作为参数从那里调用。

这可能吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:07:43.547

用这个：

```
document.querySelector("div#divAncestor div#divChild"); 
```

这是`div`with`id="divChild"`中的第一个`div`with`id="divAncestor"`

虽然 ID***必须***是唯一的，但根据规范，它们确实*有可能*不是。
^(（浏览器处理得很好）)
虽然您“应该”优先防止这种情况，但上面的代码有效。

如果有多个祖先或孩子，这应该工作：

```
document.querySelectorAll("div#divAncestor div#divChild"); 
```

**[小提琴示例](http://jsfiddle.net/hr9X2/2/)**

这些 querySelector 像 CSS 选择器一样工作。选择类，如：`div.className`，多个元素，如：`div, p, h1`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:49:09.940

不讨论具有非唯一 ID 的 bosh，我将回答您的实际问题：

> 是否可以向 DOM 文档添加方法？

是的，请参阅[如何使用 JS 扩展 DOM](https://stackoverflow.com/q/779880/1048572)。但不要这样做！[Kangax 的文章What's wrong with extends DOM](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)中很好地讨论了这些原因。

> 第二种方法是在 dom 文档中添加一个方法，并通过传递父子 ID 作为参数从那里调用。

你可以这样做，是的，不会造成太大的伤害。我猜它在所有浏览器中都能正常工作，因为无论如何使用静态函数你都不会遇到垃圾收集问题等。

然而，我看不出这样做的充分理由。在我看来，这就像滥用`document`变量作为命名空间，而任何其他全局变量或命名空间对象也会这样做。为了不创建可能的（未来）冲突，专用命名空间将是更好的选择。

# c# - Windows 应用商店应用程序 - 系统信息

> ID：13881173
> 
> 赞同：2
> 
> 时间：2012-12-14T15:04:09.980
> 
> 标签：c#, windows-store-apps

有谁知道是否可以使用新的 Windows RT Api（Windows 商店应用程序）收集系统信息。

我正在寻找可用 RAM 数量、操作系统版本、屏幕尺寸等信息。我正在移植一些较旧的 C# 桌面代码，但我使用的所有内容都不再可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:33:35.127

我找到了那个链接； [http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.profile.hardwareidentification.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.profile.hardwareidentification.aspx)

但目前看来winRT lib没有任何功能。检测 ram 等

您可以使用 C++ 或 C# 通过使用本机（非管理）调用来获取此类信息。看看这里； [http://www.pinvoke.net/default.aspx/Structures/MEMORY_BASIC_INFORMATION.html](http://www.pinvoke.net/default.aspx/Structures/MEMORY_BASIC_INFORMATION.html)

和这里; [http://www.codeproject.com/Articles/23502/Display-device-memory-information-using-P-Invoke](http://www.codeproject.com/Articles/23502/Display-device-memory-information-using-P-Invoke)

还有祝你好运...

# scons - 如何从 SConstruct 强制安静模式

> ID：13881178
> 
> 赞同：4
> 
> 时间：2012-12-14T15:04:38.493
> 
> 标签：scons

我知道我们可以通过执行以下操作从 scons 命令选项强制进入安静模式

```
$ scons -Q 
```

现在我希望能够在 SConstruct 文件本身中强制使用该选项。我一直在查看所有文档，但没有找到任何东西。你有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T18:02:12.983

不，不支持它的选项。

可以通过 SetOption(name, value) 设置的支持选项列表是：

*   clean - 对应于 -c、--clean 和--remove；
*   重复 - 对应于--duplicate；
*   help - 对应于 -h 和 --help；
*   implicit_cache - 对应于--implicit-cache；
*   max_drift - 对应于--max-drift；
*   no_exec - 对应于 -n、--no-exec、--just-print、--dry-run 和--recon；
*   num_jobs - 对应于 -j 和 --jobs；
*   random - 对应于 --random；和
*   stack_size - 对应于 --stack-size。

所以，你可以得到它，但不能设置。

```
print GetOption('silent')
SetOption('silent', 1)

scons.bat
scons: Reading SConscript files ...

scons: *** This option is not settable from a SConscript file: silent
File "E:\Programming\test\scons\2\SConstruct", line 1, in <module>
PS E:\Programming\test\scons\2>
PS E:\Programming\test\scons\2> scons.bat
scons: Reading SConscript files ...
False

scons: *** This option is not settable from a SConscript file: silent
File "SConstruct", line 2, in <module> 
```

# linux-kernel - Linux IRQ：在 ISR 中取消屏蔽 IRQ

> ID：13881183
> 
> 赞同：0
> 
> 时间：2012-12-14T15:04:50.513
> 
> 标签：linux-kernel, isr, softirq

我有一个 IRQ 正在使用`handle_level_irq()`. 大多数时候，ISR 要求安排下半部分，但偶尔，它能够确定它是虚假的，并且不想安排下半部分（出于性能原因）。问题是，在后一种情况下，存在竞争条件。如果 ISR 确定它是虚假的，它将取消屏蔽中断并准备退出（注意——此时 ISR 不受保护`desc->lock`）。但是随后，在第二个 CPU 上触发了中断，根据`handle_level_irq()`，抓取`desc->lock`，屏蔽 IRQ，确定 ISR 正在第一个 CPU 上进行，因此它解锁`desc->lock`并退出。然后第一个 CPU 上的原始 ISR 也将退出，使中断一直被屏蔽。

除非我需要，否则我希望能够不安排下半部分，那么 ISR 是否有某种方法可以在避免上述竞争条件的同时揭露自身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T16:10:10.433

问题是 IRQ 是电平触发，你有一个虚假的值。如果电平值接收到*虚假*中断，它应该如何自行解决？即，由于*虚假*的性质，中断当前处于活动级别。这就是 Linux 屏蔽中断以防止 CPU 因虚假中断而死锁的原因。

您可以将中断级别更改为边沿触发，并在下一个边沿更改回电平触发。这将消除*杂散*电平，直到硬件取消断言它。当硬件重新断言中断时，将发生边沿，此时可以重新安装电平触发。

因此，除非共享中断线，否则大多数外设都是边沿触发的。此问题可能出在您的中断控制器中，而不是`handle_level_irq()`代码中。您没有提供版本或提供您使用的驱动程序。

如果线路未共享并且您的控制器支持边缘触发，我会将您的代码转换为使用边缘。[在维基百科](http://en.wikipedia.org/wiki/Interrupt#Level-triggered)上查看更多信息。

# ruby-on-rails - 载波；覆盖 'thumb' 方法以获得非图像资产的标准拇指

> ID：13881184
> 
> 赞同：1
> 
> 时间：2012-12-14T15:04:55.630
> 
> 标签：ruby-on-rails, ruby, carrierwave

我有我的图像资产的拇指版本：

```
version :thumb, :if => :image? do
  process :resize_to_fill => [118, 100]
end 
```

现在，我的非图像资产出现 RoutingError。我尝试在 AssetUploader.rb 中破解 thumb 方法：

```
def thumb
  if has_image_extension?(file.original_filename)
    super
  else
    "/assets/file_types/#{extension(file.original_filename)}.jpg"
  end
end 
```

这会产生一个错误（NoMethodError: super: no superclass method `thumb'），这是有道理的。

有没有比在 Asset 模型中创建 thumb_url 方法更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:31:27.657

首先`version`是 CarrierWave 类的一个实例的方法。第一个参数应该是一个符号，它将作为字符串附加到保存的文件名。

然而，该`:if`符号接收一个方法名称（需要实现）来决定是否应该创建版本。

问题是您的`:image?`方法是如何实现的！

我有一个天真的实现，在这里：

```
def image?( new_file )
  # TODO FIXME wrong way to check for image
  new_file.content_type.include?('image') && 
  !new_file.content_type.include?('photoshop') && 
  !new_file.content_type.include?('svg')
end 
```

# java - java在编译或运行时出错

> ID：13881185
> 
> 赞同：0
> 
> 时间：2012-12-14T15:04:55.247
> 
> 标签：java, runtime-error

我是 java 新手，我从 wikibooks 下载了一个 pdf 文档，在尝试运行程序时出现以下错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
at Distance.main(Distance.java:7) 
```

这是我试图运行的代码：

```
public class Distance
{
    private java.awt.Point point0, point1;
    public Distance(int x0, int y0, int x1, int y1)
    {
        point0 = new java.awt.Point(x0, y0);
        point1 = new java.awt.Point(x1, y1);
    }

    public void printDistance()
    {
        System.out.println("Distance between " + point0 + " and " + point1
            + " is " + point0.distance(point1));
    }

    public static void main(String[] args)
    {
        Distance dist = new Distance(
        intValue(args[0]), intValue(args[1]),
        intValue(args[2]), intValue(args[3]));
        dist.printDistance();
    }

    private static int intValue(String data)
    {
        return Integer.parseInt(data);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T15:06:34.587

您没有在命令行 java 调用或 IDE 配置中提供参数。

它似乎需要四个整数参数，如：

```
java Distance 0 1 2 3 
```

# android - 设备/平板应用所需的视频格式

> ID：13881186
> 
> 赞同：2
> 
> 时间：2012-12-14T15:04:59.853
> 
> 标签：android, video

我们正在尝试为 Android 应用程序（设备、平板电脑、Nook 和 Kindle）制作视频我们遇到了一个问题，因为我们不知道要使用哪种分辨率。根据[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)他们建议只制作 3 种视频尺寸。视频和音频编解码器比特率还可以。但是我们不确定尺寸和分辨率，因为有更多的设备屏幕纵横比

我们**不想使**视频变形，但我们不确定制作视频所需的最终分辨率和尺寸，以便在所有 Android 设备/平板电脑中正确显示它们。

有没有人可以帮助我们解决这个问题？

# objective-c - 应用程序进入后台状态时如何添加计时器？

> ID：13881194
> 
> 赞同：0
> 
> 时间：2012-12-14T15:05:14.647
> 
> 标签：objective-c, timer, nsrunloop

这是我到目前为止所尝试的：

```
- (void)applicationWillResignActive:(UIApplication *)application
{

     timer = [NSTimer timerWithTimeInterval:1 target:self selector:@selector(triggerTimer:) userInfo:nil repeats:FALSE];
     NSRunLoop* runLoop = [NSRunLoop currentRunLoop];
     [runLoop addTimer:timer forMode:NSRunLoopCommonModes];
     [runLoop run];
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    if (timer && [timer isValid]) {
        [timer invalidate];
     }
} 
```

我的问题是，如果我使计时器无效，runloop 仍在运行并冻结我的 UI（动画不工作，滚动不工作等）。有什么想法我怎么能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:20:23.750

你不应该创建一个 timer `applicationWillResignActive`。相反，您应该将当前日期/时间保存在`applicationDidEnterBackground`.

```
// Not sure how you are keeping session information
// You can use a variable to store session id
// or simple keep a bool to indicate session is valid
// In this example, let say I just keep a session BOOL

- (void)applicationDidEnterBackground:(UIApplication *)application {
   // save the save the app enters background
   backgroundTime_ = [NSDate date];        
}

// In this example I am going to check if my session is valid in two stages
// You can do it in one stage if you like
- (void)applicationWillEnterForeground:(UIApplication *)application {
   // I only need to do a time-out check if I have a valid session
   if (isValidSession_ && backgroundTime_)
   {
       // get the number of second since we entered background
       NSTimeInterval span = [backgroundTime_ timeIntervalSinceNow];
       if (span > (15 * 60))
       {
           isValidSession_ = NO;      
       }
   }

}

// This is wheer the magic occurs
- (void)applicationDidBecomeActive:(UIApplication *)application {
    // check if session is still valid
    if (!isValidSession_)
    {
        // Load the login view
    }
} 
```

# python - 删除 HTTP“连接”标头，Python urllib2

> ID：13881196
> 
> 赞同：2
> 
> 时间：2012-12-14T15:05:16.153
> 
> 标签：python, header, urllib2

我正在努力学习 Python。目前我遇到了一件简单的事情:(当我使用 urllib2 发送请求时，它会添加“Connection:close”标头。如果没有这个标头，我应该怎么做才能发送请求？

我的代码：

```
request = urllib2.Request('http://example.com')
request.add_header('User-Agent', self.client_list[self.client])
opener = urllib2.build_opener()
opener.open(request).read() 
```

谢谢大家，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:28:14.563

你不能。`urllib2`在任何情况下都不会。从[源代码](http://hg.python.org/cpython/file/2.7/Lib/urllib2.py)：

```
# We want to make an HTTP/1.1 request, but the addinfourl
# class isn't prepared to deal with a persistent connection.
# It will try to read all remaining data from the socket,
# which will block while the server waits for the next request.
# So make sure the connection gets closed after the (only)
# request.
headers["Connection"] = "close" 
```

请改用该[`requests`库](https://requests.readthedocs.io/)，它支持连接保持活动：

```
>>> import requests
>>> import pprint
>>> r = requests.get('http://httpbin.org/get')
>>> pprint.pprint(r.json)
{u'args': {},
 u'headers': {u'Accept': u'*/*',
              u'Accept-Encoding': u'gzip, deflate, compress',
              u'Connection': u'keep-alive',
              u'Content-Length': u'',
              u'Content-Type': u'',
              u'Host': u'httpbin.org',
              u'User-Agent': u'python-requests/0.14.1 CPython/2.6.8 Darwin/11.4.2'},
 u'origin': u'176.11.12.149',
 u'url': u'http://httpbin.org/get'} 
```

上面的例子使用[http://httpbin.org](http://httpbin.org)来反映请求头；如您所见，`requests`使用了`Connection: keep-alive`标题。

# jquery - 选择元素，除非它仅使用选择器具有给定类的祖先

> ID：13881198
> 
> 赞同：22
> 
> 时间：2012-12-14T15:05:25.960
> 
> 标签：jquery, jquery-selectors

假设我有以下 HTML：

```
<div class="foo">
  <ul>
    <li>One</li>
    <li>Two</li>
  </ul>
</div> <!-- not originally here -->
<div class="bar">
  <ul>
    <li>Three</li>
    <li>Four</li>
  </ul>
</div> 
```

我想选择所有*不是*`li`具有 class 的元素的后代的元素。我知道我可以用一个花哨的[过滤功能](https://stackoverflow.com/questions/13592423/select-div-with-class-unless-it-has-ancestor-of-another-class)来做到这一点，但我想知道我是否可以只用一个选择器来做到这一点。首先我试过：*`foo`*

 *```
$(":not(.foo) li") 
```

不幸的是，这不起作用，因为它`li`有*其他*没有样式的祖先（`ul`在这种情况下）。以下似乎有效；

```
$(":not(.foo) :not(.foo) li") 
```

换句话说，选择所有`li`没有祖先的元素，这些元素要么有类，要么有`foo`自己的祖先类`foo`。也许这是使用选择器的最佳/唯一方法，但我对`:not`选择器的重复并不感到兴奋。那里有更好的想法吗？

[小提琴](http://jsfiddle.net/HsPSv/2/)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-14T15:16:33.403

你可以这样做

```
$("li").not('.foo li') 
```

[http://jsfiddle.net/y7s54/](http://jsfiddle.net/y7s54/)

或者

```
$("li:not(.foo li)") 
```

[http://jsfiddle.net/QpCYY/](http://jsfiddle.net/QpCYY/)

选择所有没有类 foo 的祖先的 li

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T15:11:56.263

试试`li:not(.foo > ul > li)`；选择所有 lis 减去父级 .foo 两级以上的那些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T15:15:04.233

您可以使用上下文以及下面的选择器来执行此操作，

```
$('li', $('div:not(.foo)')) 
```

**[现场演示](http://jsfiddle.net/rajaadil/UJgV2/2/)**

```
$('li', $('div:not(.foo)')).each(function(){
    alert($(this).text());
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:23:52.860

我认为这个解决方案看起来更好一些，但是关于速度差异的 API 评论存在一些争议。

```
$("li").not(".foo li") 
```

[**小提琴**](http://jsfiddle.net/HsPSv/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T15:11:42.563

这个怎么样：

```
$("li:not(.foo > li)") 
```

如果这不起作用，文档中的注释非常有用：

[http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)*

# facebook - Facebook 应用程序未显示在“您的网站的见解”中

> ID：13881200
> 
> 赞同：1
> 
> 时间：2012-12-14T15:05:30.500
> 
> 标签：facebook

我有一个网站，我为其创建了一个应用程序和一个赞按钮。

我想将它与我的[https://www.facebook.com/insights](https://www.facebook.com/insights)链接，但是当我单击“您网站的见解”时，我只能将它与我自己的用户帐户以及我创建的另一个应用程序链接之前。

我刚刚创建的新应用程序没有显示。

在我的网站上，我添加了所有 OG 标签，包括 app_id 标签。我没有包含我自己的管理员 ID，因为我不希望人们找到我的用户帐户。

那么为什么当我点击“您的网站的见解”时我的新应用没有显示？

# android - 我的代码会消耗更多内存吗？

> ID：13881202
> 
> 赞同：0
> 
> 时间：2012-12-14T15:05:34.873
> 
> 标签：android, memory, live-wallpaper

我正在创建动态壁纸。我不知道我的代码是否消耗更多内存。
我检查了 adb logcat，它经常释放更多的内存。

这对我的代码来说正常吗？
链接到我的应用程序：[http ://www.cybapps.com/temp/test.apk](http://www.cybapps.com/temp/test.apk)

这是我的代码：

```
public class CybWallpaper extends WallpaperService {

    int noofsnows=30;
    int x[]=new int[100],y[]=new int[100],speed[]=new int[100],nt=0;
    int isr=0;
    int scw,sch,snowsize=20;
    float cx[]=new float[100],cy[]=new float[100];
    Canvas dra;
    int temps[]=new int[100],tempcs[]=new int[100];
    boolean isft=true,isclicked=false;
    Bitmap snow,bg,ts,gift;
    SharedPreferences settings;
    Bitmap te;
    boolean isrun;

    @Override
    public Engine onCreateEngine() {
        return new Mywall();
    }
    public class Mywall extends Engine
    {

        Handler hand=new Handler();
        Random ran=new Random();
        Runnable iterate=new Runnable()
        {
            @Override
            public void run() {
                slower();
                drawframe();
            }

        };

        public void update()
        {
            //Background image
            settings=PreferenceManager.getDefaultSharedPreferences(getBaseContext());
            if(settings.getBoolean("cusimage", false))
            {

                File newImg=new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/.cyb/livewallpaper.jpg");
                if(newImg.exists())
                {
                    bg=BitmapFactory.decodeFile("/storage/sdcard0/cyb/livewallpaper.jpg");
                }
                else
                    bg=BitmapFactory.decodeResource(getResources(), R.drawable.b1);
            }
            else
                bg=BitmapFactory.decodeResource(getResources(), R.drawable.b1);

            //Snows

            noofsnows=Integer.parseInt(settings.getString("noofsnow", "30"));
            for(int i=0;i<noofsnows&&isft;i++)
            {   
                x[i]=ran.nextInt(scw);
                y[i]=ran.nextInt(sch);
                temps[i]=(10+ran.nextInt(snowsize));
                tempcs[i]=(50+ran.nextInt(30));
                speed[i]=(4+ran.nextInt(4));
                cx[i]=-1;
                cy[i]=-1;
            }
        }

        @Override
        public void onSurfaceCreated(SurfaceHolder holder) {
            // TODO Auto-generated method stub
            super.onSurfaceCreated(holder);
            snow=BitmapFactory.decodeResource(getResources(), R.drawable.s1);
            gift=BitmapFactory.decodeResource(getResources(), R.drawable.g1);
            isft=true;
        }

        @Override
        public void onSurfaceChanged(SurfaceHolder holder, int format,
                int width, int height) {
            // TODO Auto-generated method stub
            super.onSurfaceChanged(holder, format, width, height);
            isft=true;
            slower();
            drawframe();
        }

        protected void drawframe() {
            // TODO Auto-generated method stub

            SurfaceHolder sh=getSurfaceHolder();
               dra = null;
               try {
                  dra = sh.lockCanvas();
                  if (dra != null) {

                        if(isft)
                        {
                            scw=dra.getWidth();
                            sch=dra.getHeight();
                            update();
                        }

                        isft=false;
                        dra.drawBitmap(bg, 0, 0, null);
                        drawsnow(dra,noofsnows);                    
                  }
               } finally {
                  if (dra != null)
                     sh.unlockCanvasAndPost(dra);
               }
        }

        private void drawsnow(Canvas dra,int n) {
            // TODO Auto-generated method stub  
            for(int i=0;i<n;i++)
            {
                te=Bitmap.createScaledBitmap(snow, temps[i], temps[i], false);
                dra.drawBitmap(te, x[i]-(te.getWidth()/2), y[i]-(te.getHeight()/2), null);

                //If Clicked
                if(cx[i]!=-1&&cx[i]!=-1)
                {

                    ts=Bitmap.createScaledBitmap(gift, tempcs[i], tempcs[i], false);
                    dra.drawBitmap(ts, cx[i]-(ts.getWidth()/2), cy[i]-(ts.getHeight()/2), null);
                    if(cy[i]<sch)
                        cy[i]+=speed[i];
                    else
                    {
                        cx[i]=-1;
                        cy[i]=-1;
                    }
                }

                //Snow to and fro
                if(isr==0&&x[i]!=140)
                    x[i]+=1;
                else
                    isr=1;

                if(isr==1&&x[i]!=120)
                    x[i]-=1;
                else
                    isr=0;

                if(y[i]<dra.getHeight())
                    y[i]+=speed[i];
                else
                {
                    y[i]=0;
                    x[i]=ran.nextInt(dra.getWidth());
                    temps[i]=10+ran.nextInt(snowsize);
                    speed[i]=4+ran.nextInt(2);
                }
            }

        }

        protected void slower() {
            // TODO Auto-generated method stub
            hand.removeCallbacks(iterate);
             if (isrun) {
                hand.postDelayed(iterate, 1000/30);
             }

        }

        @Override
        public void onSurfaceDestroyed(SurfaceHolder holder) {
            // TODO Auto-generated method stub
            super.onSurfaceDestroyed(holder);
            isrun=false;
            hand.removeCallbacks(iterate);
            Toast.makeText(getApplicationContext(), "Destroyed", Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onTouchEvent(MotionEvent event) {
            // TODO Auto-generated method stub
            super.onTouchEvent(event);
            if(event.getAction()==MotionEvent.ACTION_DOWN)
            {
                isclicked=true;
                cx[nt]=event.getX();
                cy[nt]=event.getY();
                if(nt<=20)
                nt++;
                else
                    nt=0;
            }
        }

        @Override
        public void onVisibilityChanged(boolean visible) {
            // TODO Auto-generated method stub
            super.onVisibilityChanged(visible);
            isrun=visible;
            if(isrun)
            {
                isft=true;
                slower();
                drawframe();
            }
            else
            {
                hand.removeCallbacks(iterate);
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:12:29.043

```
 te=Bitmap.createScaledBitmap(snow, temps[i], temps[i], false); 
```

您重复创建位图而不回收它们。无论如何，您都不应该在更新功能中这样做。

```
// To be done once in onSurfaceCreated for instance
te=Bitmap.createScaledBitmap(snow, temps[i], temps[i], false);

// Use your bitmap in update()

// To be done once in onSurfaceDestroyed for instance
te.recycle(); 
```

要更改绘制的位图的大小，只需使用适当的函数缩放它，只需使用矩阵变换画布即可。

# matlab - 允许单个 Matlab 实例运行

> ID：13881206
> 
> 赞同：1
> 
> 时间：2012-12-14T15:06:01.467
> 
> 标签：matlab

每当我双击一个`.m`文件时，就会打开一个新的 Matlab 实例。
有什么方法可以告诉 Matlab 将每个文件保存在一个单独的位置？

Matlab 2012a，Windows 8。

我只找到了适用于 XP 的旧指南。[http://www.mathworks.com/matlabcentral/newsreader/view_thread/303080](http://www.mathworks.com/matlabcentral/newsreader/view_thread/303080)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:45:35.377

查看[来自 The Mathworks 的这篇文章](http://www.mathworks.com/support/solutions/en/data/1-D9IA82/?solution=1-D9IA82)，适用于 Windows 7。该解决方案提供了三种建议的解决方法。第一个对我有用，所以我会在这里总结一下。

**解决方案**

这可能是由*pathdef.m*文件中的 Windows 默认安全设置引起的：

*   从 _Windows Explorer，导航到*MATLABROOT\toolbox\local*（其中*MATLABROOT*`matlabroot`是从 MATLAB中运行返回的目录）。
*   右键单击文件*pathdef.m*，然后选择“*安全*”选项卡。
*   单击*Edit*，选择*Users*组，单击*Full control*。
*   应用更改，关闭属性窗口，然后重新启动 MATLAB。

如果您已将 Matlab 修改为以管理员身份启动，请将其重新设置为以用户身份启动。这应该可以解决问题。

有关完整的详细信息和其他解决方案，请查看[原始帖子](http://www.mathworks.com/support/solutions/en/data/1-D9IA82/?solution=1-D9IA82)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-30T05:03:40.490

我尝试了[MathWorks 支持团队](https://in.mathworks.com/matlabcentral/answers/93468-why-is-a-new-instance-of-matlab-opened-when-i-double-click-on-a-matlab-file-in-windows-explorer-even)提供的解决方案 A 和 B，但没有一个适合我。然后我下载了[Patrik Forssén的](https://in.mathworks.com/matlabcentral/profile/authors/2631027-patrik-forssen)[MATLAB File Association Fix](https://in.mathworks.com/matlabcentral/fileexchange/51165-matlab-file-association-fix)，我的问题得到了解决。我的是 MatLab R2017b，Windows 10。

相同的程序是：

1.  下载压缩文件。[MATLAB 文件关联修复](https://in.mathworks.com/matlabcentral/fileexchange/51165-matlab-file-association-fix)
2.  提取它并在 Matlab 中运行名为**associateFiles.m**的 matlab 脚本。通过运行此脚本，将在同一文件夹中生成一个扩展名为***.reg的新文件。**
3.  转到文件夹并双击此***.reg**文件。注册表将被更新。
4.  现在重新启动 Matlab。

# scala - 实现包含关系

> ID：13881214
> 
> 赞同：0
> 
> 时间：2012-12-14T15:06:29.737
> 
> 标签：scala, relationship, containment

如何实现 uml 的强包含关系。也叫作曲。

举一个 Scale 的例子：我有一个类组件，它可能包含零个或多个接口：

```
class Component (name: String, description: String, Interaction: Set[Interface]) 
```

然后我有我的类接口：

```
class Interface(name: String, description: String) 
```

遏制应该尊重哪些约束？

*   如果我在一个组件中输入一个接口，这个接口不能放在其他组件中。
*   如果我删除一个 Component 也必须删除它的所有接口。

还有其他约束要强制执行吗？

如何实现第一个约束：

我想我会在类接口中添加一个名为 signComp 的 Component 类型的字段，并对 Component 的 set 方法 Interaction 施加约束。
例如：对于必须添加到组件的每个接口，如果接口的 signComp 为 null，则插入接口并将 signComp 设置为当前组件，否则取消分配。

这是一个成功的实施？或者有没有其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:56:22.790

如果你想采用不可变的方法，你可以尝试这样的事情：

```
case class Component(name: String, description: String, interaction: Set[Interface])

case class Interface(name: String, description: String)

def addInterface(components: Set[Component], c: Component, i: Interface) =
  if(components.find(_.interaction contains i) isEmpty)
    components + c.copy(interaction = c.interaction + i)
  else
    components 
```

并像这样使用它：

```
val i1 = Interface("i1", "interface 1")
val a = Component("a", "description a", Set(i1))
val b = Component("b", "description b", Set())    
val components = addInterface(Set(a), b, i1)  // Set(Component(a,,Set(Interface(i1,))))
addInterface(components, b, Interface("i2", "interface 2")) // Set(Component(a,,Set(Interface(i1,))), Component(b,,Set(Interface(i2,)))) 
```

由于组件之间存在一对一的映射，因此只需从集合中删除组件即可满足您的第二个约束：

```
components - a // Set() 
```

# java - 握手失败/没有共同的密码套件 - SymmetricDS 3.1.5

> ID：13881221
> 
> 赞同：2
> 
> 时间：2012-12-14T15:06:48.177
> 
> 标签：java, replication, ssl, keystore, database-replication

我正在从 SymmetricDS (SDS) 2.5.13 升级到 3.1.5。**我在 SDS 2.5.13 下配置了 TLS/HTTPS 并按预期工作**。但是，使用**完全相同的证书、密钥库/信任库文件和相同的 JDK**，我在服务包装器日志 (wrapper.log) 中的 SDS 3.1.5 下收到以下错误：

```
SEND TLSv1 ALERT: fatal, description = handshake_failure  
WRITE: TLSv1 Alert, length = 2  
called closeSocket()  
handling exception: javax.net.ssl.SSLHandshakeException: no cipher suites in common 
```

我有两个节点配置，其中一个配置为注册服务器（父节点）。子节点配置为推送和拉取更改。我正在使用 Sun (Oracle) JDK 7 update 5 和适当的 JCE Unlimited Strength Jurisdiction Policy Files（以访问 256 位密码）。

我在独立配置中运行 SDS 作为 Server 2008 下的 Windows 服务。Windows 防火墙当前已关闭。

我通过 sym_service.conf 文件将以下与 TLS 相关的 Java 参数传递给服务包装器：

```
wrapper.java.additional.6=-Dsym.keystore.file=c:/java-keystore/bfvm01-w2ka.ks
wrapper.java.additional.7=-Djavax.net.ssl.keyStore=c:/java-keystore/bfvm01-w2ka.ks
wrapper.java.additional.8=-Djavax.net.ssl.trustStore=c:/java-keystore/bfvm01-w2ka.ks
wrapper.java.additional.9=-Djavax.net.ssl.keyStorePassword=letmein
wrapper.java.additional.10=-Djavax.net.ssl.trustStorePassword=letmein
wrapper.java.additional.11=-Dsun.net.client.defaultReadTimeout=1800000
wrapper.java.additional.12=-Dsun.net.client.defaultConnectTimeout=1800000
wrapper.java.additional.13=-Djavax.net.debug=ssl,handshake 
```

注意：作为 Java 应用程序的标准做法，我们对密钥库和信任库使用相同的 Java 密钥库文件。

这是服务包装器配置为启动 SDS 的方式：

```
wrapper.app.parameter.1=org.jumpmind.symmetric.SymmetricLauncher
wrapper.app.parameter.2=--secure-server
wrapper.app.parameter.3=--secure-port
wrapper.app.parameter.4=25684
wrapper.app.parameter.5=--properties
wrapper.app.parameter.6=../conf/symmetric.properties 
```

sym_node 和 symmetric.properties 中的条目已正确配置为使用 HTTPS（而不是 HTTP）。

发起与父节点通信的子 SDS 节点报告此错误：

```
WRITE: TLSv1 Handshake, length = 198  
READ: TLSv1 Alert, length = 2  
RECV TLSv1 ALERT: fatal, handshake_failure  
called closeSocket()  
handling exception: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure 
```

父节点报此错误：

```
SEND TLSv1 ALERT: fatal, description = handshake_failure  
WRITE: TLSv1 Alert, length = 2  
called closeSocket()  
handling exception: javax.net.ssl.SSLHandshakeException: no cipher suites in common 
```

正如我之前提到的，相同的配置（服务器、证书、keystore/trustore 文件、JDK）可以很好地实现 SDS 2.5.13 下的 TLS/HTTPS 安全性。唯一的变化是切换到 SDS 3.1.5。如果我在 SDS 3.1.5 中禁用 TLS/HTTPS 配置并改用 HTTP，则父节点和子节点可以相互通信。

作为一个绝望的、健全的检查，我编写了一个快速的“Hello World”客户端服务器应用程序，以在我的子节点机器上创建一个 SSLSocket 并向服务器节点机器发送一行文本（使用我一直使用的相同 TCP 端口SDS）。使用相同的 JDK 和相同的密钥库/信任库文件编译和运行程序。像冠军一样工作。

我完全被难住了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T15:24:41.450

回答了我自己的问题。显然，除了我之外，没有人在 SymmetricDS (SDS) 节点之间使用 TLS（因为完全没有响应）。最初的错误消息让我大吃一惊，让我看错了地方。

看来 SDS 的 3.x 版本（至少是 3.1.5）现在要求您提供您在密钥库中使用的证书的“别名”。该值作为 Java 运行时参数“sym.keystore.ssl.cert.alias”提供。对于 Windows 用户，它将被放置在服务包装配置文件 (sym_service.conf) 中：

**wrapper.java.additional.XX=-Dsym.keystore.ssl.cert.alias=foo**

此参数在 SDS 2.5.13 中似乎不需要或不存在，并且在 SDS 3.1.5（或更高版本）中的任何地方都没有记录。它不会出现在随 SDS 3.1.5（或 SDS 3.2.0，我检查过）的二进制下载提供的任何配置文件中。

通过查看 SDS 源代码如何建立安全连接，我能够找出我的 SDS TLS 问题。

org.jumpmind.symmetric.SymmetricWebServer 使用证书别名，如下所示：

sslConnectorFactory.setCertAlias(System.getProperty(SystemConstants.SYSPROP_KEYSTORE_CERT_ALIAS, "sym"));

SystemConstants.SYSPROP_KEYSTORE_CERT_ALIAS 设置为“ **sym.keystore.ssl.cert.alias** ”。

一旦我在 sym_service.conf 中提供了正确的别名，我就可以开始了。

*   布鲁斯

# ckeditor - CKeditor textarea 在我单击源按钮之前被禁用？

> ID：13881224
> 
> 赞同：2
> 
> 时间：2012-12-14T15:06:50.813
> 
> 标签：ckeditor

我真的对CKEditor感到困惑。当我加载或重新加载页面时，CKEditor 会在页面的第一个请求时自动禁用。每当我单击源按钮，然后再次单击源进行正常编辑时，内容区域就会启用，然后我才能编写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-13T14:33:38.483

对于页面加载时隐藏的文本区域，我遇到了类似的问题……并且在某些操作上说单击按钮……它被显示……我的行为完全相同。

我在页面加载时初始化 CKEDITOR.replace('control') 。

后来我在控件的显示事件中更改了它，这对我有用。

就像是

```
$('#ControlId').show();
$('#ControlId').val(question[1]);
CKEDITOR.replace('ControlId'); 
```

# extjs - 使用 MixedCollection 数据存储

> ID：13881225
> 
> 赞同：5
> 
> 时间：2012-12-14T15:06:50.943
> 
> 标签：extjs, grid, extjs4, store, extjs4.1

是否可以在 ExtJS 4.1.x 中执行此过程？

```
var myMixedCollection = myStore.queryBy(...);
var anotherStore = Ext.create('Ext.data.Store', { data: myMixedCollection, ... });
var myGrid = Ext.create('Ext.grid.Panel', { store: anotherStore, ... }); 
```

因为我的网格不显示任何内容或只显示一个空行。
当我登录我`myMixedCollection`的时，所有数据都在这里，但是当我`anotherStore`用 Firebug 打开我的时，我可以看到我的数据存储中只有一个空行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T15:11:45.547

`myMixedCollection`将是记录（模型实例）的集合，只要新商店具有相同的模型集，这将起作用！所以答案是**肯定的**

好吧，您肯定需要在实例上调用**[getRange()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.MixedCollection-method-getRange)**`myMixedCollection`

这是一个工作示例

```
 // Set up a model to use in our Store
 Ext.define('Simpson', {
     extend: 'Ext.data.Model',
     fields: [
         {name: 'name', type: 'string'},
         {name: 'email', type: 'string'},
         {name: 'phone', type: 'string'}
     ]
 });

var s1 = Ext.create('Ext.data.Store', {
    model:'Simpson',
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data:{'items':[
        { 'name': 'Lisa',  "email":"lisa@simpsons.com",  "phone":"555-111-1224"  },
        { 'name': 'Bart',  "email":"bart@simpsons.com",  "phone":"555-222-1234" },
        { 'name': 'Homer', "email":"home@simpsons.com",  "phone":"555-222-1244"  },
        { 'name': 'Marge', "email":"marge@simpsons.com", "phone":"555-222-1254"  }
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

var mixed = s1.queryBy(function(rec){
     if(rec.data.name == 'Lisa')
         return true;
});

var s1 = Ext.create('Ext.data.Store', {
    model:'Simpson',
    storeId:'simpsonsStore2',
    fields:['name', 'email', 'phone'],
    data: mixed.getRange(),
    proxy: {
        type: 'memory',
        reader: {
            type: 'json'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    store: Ext.data.StoreManager.lookup('simpsonsStore2'),
    columns: [
        { text: 'Name',  dataIndex: 'name' },
        { text: 'Email', dataIndex: 'email', flex: 1 },
        { text: 'Phone', dataIndex: 'phone' }
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
}); 
```

和**[JSFiddle](http://jsfiddle.net/sran/czrt6/6/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:34:01.537

是的，有可能。

试试这个：

```
//this is the model we will be using in the store
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id',    type: 'int'},
        {name: 'name',  type: 'string'},
        {name: 'phone', type: 'string', mapping: 'phoneNumber'}
    ]
});

var data = new Ext.util.MixedCollection();
data.add('key1', {
    id: 1,
    name: 'Ed Spencer',
    phoneNumber: '555 1234'
});
data.add('key2', {
    id: 2,
    name: 'Abe Elias',
    phoneNumber: '666 1234'
});

//note how we set the 'root' in the reader to match the data structure above
var store = Ext.create('Ext.data.Store', {
    model: 'User',
    data : data.items,
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'users'
        }
    }
});

store.each(function(record){
    console.log(record.get("name"));
}); 
```

您可以在这里看到它在 jsfiddle 上工作：http: [//jsfiddle.net/lontivero/Lf9yv/1/](http://jsfiddle.net/lontivero/Lf9yv/1/)

# oop - 面向对象设计模式

> ID：13881232
> 
> 赞同：1
> 
> 时间：2012-12-14T15:07:24.133
> 
> 标签：oop, design-patterns

这个问题困扰了我很久：

我有一`Room`堂课，可以说我想添加一个`Ball`实体。

`Ball`应该有`x`和`y`坐标代表这个房间的一个位置。

所以这是一个问题：

哪个类应该保存坐标？

1）每个人都`Ball`为它自己。

2)`Room`将保存每个 的坐标`Ball`。

我知道这可能无关紧要，但什么是首选或什么更受欢迎？

**编辑**：

我真正担心的是，对象可以随心所欲地改变它的内容，所以让它受到一些第三方的限制可以解决它。但我想它只对具有多个用户的应用程序有效，而不是我的情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T15:28:03.213

当谈到对象设计时，我最开始的口头禅之一是“*对象知道自己的一切*”。想象一下，球不得不问房间——*我在哪里？*我将从持有它的坐标的球开始。这样，房间只需要知道自己和 Ball 对象的集合。相反，球知道关于它自己的一切。房间可能需要的关于球坐标的任何细节都可以通过迭代集合来收集。当您开始在房间中添加其他物品时，您对设计的影响也会小得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:11:57.390

坐标应该与类一起去`Ball`。例如：您可以在 中拥有一个、两个、三个或更多（或动态数量的）`Ball`s 实例，`Room`并且每个实例都有自己的坐标。

例外情况是，如果您需要对球的坐标进行一些繁重的处理，并且您更喜欢将这些坐标存储为向量。在这种情况下，选择是将这些向量作为 的成员`Room`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:10:43.810

我认为这在很大程度上取决于你如何看待这个问题。球是一个对象，每个对象在现实世界中都有一个坐标。另一方面，Room 是对象的容器，可以包含它所包含的对象的位置。

我通常做的是看看我的程序以哪种方式更容易开发，因为我太懒了 :D 。也就是说，我更喜欢从 PositionableObject 继承 Ball 并将坐标存储在该类中。所以，在这个父类的任何继承之后，我所有的对象都会有坐标或位置......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:11:41.727

如果 Room 类有一个 Ball 对象，而 Ball 对象是 Ball 在 Room 内的位置，我不得不说 Ball 对象应该有 XY 坐标。

假设房间没有球；现在您将球的 XY 坐标存储在 Room 对象中，即使没有球（设计不佳）。

如果房间里有不止一个球，额外的。每个球可能有不同的坐标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T15:57:32.480

在您所描述的情况下，可能将坐标作为球的属性很容易，并给出了......要点;-)

但用更一般的术语来说，这个问题可能会令人惊讶：想象有许多球和许多房间，每个都有更多的坐标系。球坐标只有在选择了坐标系后才有意义，所以坐标实际上是球和坐标系之间的*联系。*

如果您对描述球相对于所有系统的位置感兴趣，这不能通过线性组合来完成，而是需要一组球、一组房间和一组坐标，其中每个房间都包含一组记录每个包含一个球参考和该球在该上下文中的坐标参考。然后球本身可以有一个集合或记录，每个都是房间参考和坐标参考。

你需要一个空间管理器，它是房间和球的朋友，如果房间或球被移动，它会负责更新所有坐标，并保持集合的相互一致性。

但这远远超出了您最初的目的。我只是指出这一点，让您考虑一个潜在的更广泛的抽象。

# c - 在c中的另一个数组中找到一个数组的元素

> ID：13881242
> 
> 赞同：1
> 
> 时间：2012-12-14T15:07:57.453
> 
> 标签：c, arrays

我有两个整数数组，“a”和“b”。我想查找 a[0]、a[1] 等是否也在 b[] 内。我试过这个：

```
int emfanisi(int a[], int b[], int x){
   int i, j;
   for(i=0; i<x; i++)
   {
       for(j=0; j<x; j++)
       {
            if(a[i] = b[j])
            {
                return 1;
            }
            else
            {
                return 0;
            }
       }
   }
} 
```

我主要这样做：

```
for(i=0; i<2; i++){
   pos = 0;
   pos = emfanisi(a,b,2);
   if(pos = 1)
      printf("The %d number shows in the second array\n", i+1);
   else
      printf("The %d number doesnt show in the second array\n", i+1);
} 
```

但这似乎不起作用！

有人可以指出我的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T15:09:03.217

这是*作业*：

```
if(a[i] = b[j]) 
```

用于`==`相等检查。注意将参数标记为`const`会产生编译器错误：

```
int emfanisi(const int a[], const int b[], const int x){ 
```

后来也出现了类似的错误：

```
if (pos = 1) /* Should be == */ 
```

请注意，您可以消除`pos`：

```
if(emfanisi(a,b,2)) 
```

正如[tafa](https://stackoverflow.com/users/22186/tafa)指出的那样，当元素不相等时不要退出，只有当它们相等时才退出。

* * *

要确定是否*所有*元素`a`都包含在其中，`b`您需要保留找到的匹配计数（`i`如果找不到`break`元素，则适用）并在找到的匹配数等于元素数时返回并返回除此以外。`a``1``a``0`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T15:13:39.257

```
else
{
    return 0;
} 
```

这使得 emfanisi 函数在 a 和 b 的第一个元素不相等时立即返回 0。而是将 return 语句放在 for 循环完成之后。

```
int emfanisi(int a[], int b[], int x){

    int i, j;

    for(i=0; i<x; i++)
    {
        for(j=0; j<x; j++)
        {
                if(a[i] == b[j])
                {
                    return 1;
                }
        }
    }
    return 0;
} 
```

# android - 换行符未正确放入意图

> ID：13881243
> 
> 赞同：2
> 
> 时间：2012-12-14T15:08:01.263
> 
> 标签：android, android-intent

我正在尝试将从电子邮件/网络复制的纯文本发送到我的应用程序 vi ACTION_SEND 意图以进行进一步处理。困扰我的是新行没有正确地与文本一起发送。
例如，当我有一个项目列表，每个项目都在一个新行上，标记它们并通过共享选项将它们发送到我的应用程序，那么发送意图的 EXTRA_TEXT 将在一行中包含一个由一个空格分隔的所有项目。
**来源：**
item1
item2
**EXTRA_TEXT：**
item1 item2

但是，如果我复制由两行分隔的项目列表（电子邮件源中的项目之间的双 br），那么 EXTRA_TEXT 包含由换行符分隔的项目。
我怎样才能准确地获得我在电子邮件应用程序或浏览器中看到的内容？有没有其他方法可以将文本传递给意图并保留所有格式？
我试图将我的意图过滤器的 mimeType 更改为 text/html 但是我的应用程序甚至没有被列为发送所选数据的选项。
一段代码（只是测试）：

```
 if (intentAction.equals(Intent.ACTION_SEND)) {
        Bundle bundle = intent.getExtras();
        Log.d("Intent_Extra:", bundle.getString(Intent.EXTRA_TEXT));
        BufferedReader reader = new BufferedReader(new StringReader(bundle.getString(Intent.EXTRA_TEXT)));
        try {
            String str;
            while((str = reader.readLine()) != null) {
                Log.d("Item:", str);
            } 
```

感谢您的任何建议。

# eclipse - Jetty 9.x 日食插件

> ID：13881244
> 
> 赞同：17
> 
> 时间：2012-12-14T15:08:04.553
> 
> 标签：eclipse, eclipse-plugin, jetty

Eclipse 有 Jetty 9.x 插件吗？

jetty 8.x 已经存在某些东西，但 9.x 版本没有找到。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-05T22:25:01.290

run-jetty-run nightly build 支持 jetty 9.0。

`Eclipse > Help > Install New Software...`

输入网址 -

`http://run-jetty-run.googlecode.com/svn/trunk/updatesite-nightly/`

选择 RunJettyRun Jetty9 支持。

![在此处输入图像描述](../Images/908b04080a8a6fe988506fe2986baab3.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:39:41.310

Jetty 项目本身没有提供任何东西，但我只是在另一个问题上添加了一些选项。

请参阅：[Jetty 9 WTP 插件](https://stackoverflow.com/questions/13881020/jetty-9-wtp-plugin)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-06T19:27:20.720

[eclipse-jetty](http://eclipse-jetty.github.io/)插件支持 Jetty 9+ 作为外部安装，即下载 jetty-distribution zip，将其解压缩到工作区，然后在运行配置中指定路径。

[![eclipse-jetty 运行配置选项](../Images/f3c4830833ec323333b1cf61e96ab1bc.png)](https://i.stack.imgur.com/3Fo7n.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-14T01:43:38.150

有[**一个原版 run-jetty-run 的分支**](https://github.com/xzer/run-jetty-run-fork)，支持最新的 jetty 9.3.6。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-10T05:39:19.910

@Magnilex：此服务器不会充当我们用于在服务器视图中创建的实例。在 Josh Unger 添加 Jetty 9 的方法中，您需要右键单击该项目，然后转到 Run As> Jetty

[图片：这就是它的样子](http://i.stack.imgur.com/K2Asx.png)

然后去运行项目的配置并将其更改为 Jetty 9。

[图：换乘 Jetty 9](http://i.stack.imgur.com/41Y9K.png)

我也能够成功运行 Jetty 7、8 和 9。谢谢。哈普雷特。

# php - 遍历 JSON 数组未按预期工作

> ID：13881245
> 
> 赞同：0
> 
> 时间：2012-12-14T15:08:06.887
> 
> 标签：php, jquery, json

我正在尝试遍历通过 JQuery 中的 php 脚本发送的 JSON 数组的结果。目前我想做的就是打印数组的长度，但仅此一项是行不通的，所以我想我在这里遗漏了一些东西。

我当前的 html/JQuery 是：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.5.js"></script>
<script>
$(document).ready(function(){
 $("button").click(function(){
  $.getJSON("./getFile.php?fileName=ni", function(json){
     alert("test");
     alert(json.length);
  });
 });
});
</script>
</head>
<body>

<div id="div1"><h2>Test script</h2></div>
<button>Get External Content</button>

</body>
</html> 
```

遇到的 JSON 字符串是：

```
[{"where":"up\n","time":"15:37:33"},{"where":"up\n","time":"15:39:34"},{"where":"up\n","time":"15:41:36"},{"where":"down\n","time":"15:43:37"}] 
```

这是通过在 php 中的多维数组上运行 json_encode 产生的。

更新：

我预计这两个警报会触发，但事实并非如此。测试或数组的长度都没有出现......

我的PHP代码如下：

```
<?php

$myFile = $_GET['filename'];

$file = fopen($myFile, "r");
$$response = "[ ";

$data = array();
$json = array();
while (!feof($file))
{
   $row = array();
   $currentLine = fgets($file);
   $parts = explode(" ", $currentLine);
   $length = sizeof($parts);
      $time = $parts[0];
      $where = $parts[$length-1];
   $json['where'] = $where;
   $json['time'] = $time;   
   $data[] = $json;
}

echo json_encode($data);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:30:59.357

您的 json 不是数组！所以它没有长度属性。你必须改变你的数据......这应该工作。

```
$(document).ready(function(){
    $("button").click(function(e){

        // prevent default behaviour if needed
        e.preventDefault();

        $.getJSON("./getFile.php?fileName=ni", function(json){

            var arr = [];
            jQuery(json).each(function(index){            
                count = arr.push(this)
            });

            alert("test");
            alert(count);
        });

    });
}); 
```

[@见http://jsfiddle.net/SA5G8/](http://jsfiddle.net/SA5G8/) ​< /p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:09:41.337

[您使用jQuery.each()](http://api.jquery.com/jQuery.each/)遍历项目。

```
$.each(items, function(index, value) {
    console.log(index +": " + value.where);
}); 
```

# objective-c - 从详细视图更新主视图

> ID：13881247
> 
> 赞同：0
> 
> 时间：2012-12-14T15:08:10.217
> 
> 标签：objective-c, ios, xcode, uisplitviewcontroller

我正在使用具有主视图和详细视图的拆分视图控制器。我的详细视图控制器上有一个视图，其中包含一个用户输入字段，该字段应调用主视图控制器上的方法来更新数组。我在建立双方之间的通信时遇到了麻烦。我尝试使用 [masterViewController updateCalcs] 简单地调用该方法，但这似乎不起作用，并且出现以下错误：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-
[UINavigationController updateCalcs]: unrecognized selector sent to instance 0xb08d130' 
```

任何人都可以通过一些示例代码或源来帮助我解释如何从另一个视图中准确地调用一个方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:17:20.673

最佳实践是使用委托。在您的 detailview.h 中添加：

```
@protocol TestDelegate <NSObject>
-(void)doSomeThing;
@end

@property (nonatomic, weak) id <TestDelegate> delegate; 
```

在 detailview.m 中：

```
[self.delegate doSomeThing]; 
```

在创建详细视图后的 masterview.m 中添加：

```
detailView.delegate = self; 
```

在 masterview.h 添加委托，如：

```
@interface MasterView : UIViewController <TestDelegate> { 
```

# c# - 将泛型传递给方法

> ID：13881250
> 
> 赞同：4
> 
> 时间：2012-12-14T15:08:35.653
> 
> 标签：c#, generics

我有一堂课：

```
public class ClassA<T>
{
  public T Value {get; set;}
  public string Description {get; set;}
} 
```

ClassA 可以具有任何类型的值，但是：无论类型值如何，我都需要能够设置任何 ClassA 的其他属性。所以我有一个方法：

```
public void DoWork(ClassA<object> source, ClassA<object> destination)
{
  destination.Description = source.Description;
} 
```

但是，当我尝试这样做时，我收到一个运行时错误，提示：无法转换`ClassA<DateTime>`为`ClassA<object>`

我认为任何东西都可以作为对象传递......我已经在网上寻找类似的东西，也许我只是没有得到正确的关键字。

有人有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:16:07.617

你将无法做到这一点。

如果您可以将 a 传递给`ClassA<int>`接受 a 的方法，`ClassA<object> wrapper`那么该方法将能够调用`wrapper.Value = "not an integer";`. 那应该怎么办？您刚刚将一个字符串设置为一个只能保存整数的对象。由于编译器知道它无法强制执行您可以放置​​的内容，因此它只是不允许您首先传递对象。

至于实际的解决方案，我想到了两个。

如果可以的话，您可以使您的方法通用：

```
public void DoWork<TSource, TDestination>(ClassA<TSource> source, ClassA<TDestination> destination)
{
  destination.Description = source.Description;
} 
```

或者你可以制作一个协变接口：

```
public interface IWrapper<out T>
{
    T Value {get;}
    string Description {get;set;}
}

public class ClassA<T> : IWrapper<T>
{
    //...
}

public void DoWork(IWrapper<object> source, IWrapper<object> destination)
{
  destination.Description = source.Description;
} 
```

对于您的`DoWork`方法，您甚至没有实际使用`Value`，因此您可以使接口非泛型、非协变，然后删除`Value`. 这里的优点是您可以使用该接口来访问`ClassA`具有公共基类型的任意数量对象的值属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T15:19:02.603

如果您只需要能够使用各种泛型类型，您可以为每个参数指定不同的类型，例如

```
public void Work<TSource, TDestination>(ClassA<TSource> source, ClassA<TDestination> destination)
{
    destination.Description = source.Description;
} 
```

但是，看起来您的真正问题是您在*泛型*类上有通用属性，您可以通过使用通用接口来消除通用部分，例如

```
public interface IClassA
{
    string Description { get; set; }
}

public class ClassA<T> : IClassA
{
    ...
}

public void DoWork(IClassA source, IClassA destination)
{
    destination.Description = source.Description;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T15:15:38.093

这与扩展方法没有任何关系。它与通用方差有关。像这样看到它是最简单的：

```
ClassA<DateTime> x = new ClassA<DateTime>();
ClassA<Object> y = x; 
```

这将无法以相同的方式编译。

从 C# 4 开始，对泛型变化的支持*有限，但是：*

*   仅适用于接口和委托
*   仅适用于引用类型
*   仅在明确声明的地方

有关更多详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/dd799517.aspx)，或[Eric Lippert 的博客文章](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/)。

这就解释了为什么它不起作用。至于如何解决它-根据 Jason 的回答使扩展方法通用可能是最简单的方法。

请注意，目前，您甚至还没有扩展方法 - 您需要在顶级非泛型静态类中声明它，如下所示：

```
public static void DoWork<T>(this ClassA<T> source, ClassA<T> destination)
{
    destination.Description = source.Description;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:11:43.627

我假设你的意思是：

```
public void DoWork<T>(ClassA<T> source, ClassA<T> destination)
{
  destination.Description = source.Description;
} 
```

# windows - 如何在不提升权限的情况下创建事件源？

> ID：13881252
> 
> 赞同：3
> 
> 时间：2012-12-14T15:08:41.310
> 
> 标签：windows, security, logging, uac, diagnostics

我正在开发一个将用作登录脚本的 C# 程序。出于诊断目的，我希望能够写入应用程序日志。不幸的是，我发现的所有文档都指出，如果不查询需要提升权限的安全日志，就不可能创建事件源；对于登录脚本来说，这显然是不行的。

我有什么方法可以在没有此提升请求的情况下创建事件源？或者，是否有其他位置或预先存在的事件源，对我来说用于日志记录可能更有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T22:25:59.067

在幕后，[创建事件源](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363661.aspx)需要写入`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\EventLog`注册表项，该注册表项只能由管理用户写入。因此，任何基于此构建的 API 都需要提升权限。创建事件源将是您在提升后需要做的事情。

但是一旦您创建了事件源，实际*报告*事件不需要提升权限。如果您可以运行安装程序，您的安装程序可以请求提升并创建事件源；然后您的应用程序就像任何其他应用程序一样报告事件。但我认为这在登录脚本中是一种不可行的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:32:39.243

我认为你不能没有海拔。您可能可以在注册表中更改一些权限以允许您这样做，但这需要提升，catch 22。

但是，记录到文本文件并没有错。只要使用该程序的人都知道这是日志所在的位置，那么文本文件也可以正常工作。

# java - Spring中的POJO之间是否有自动翻译器？

> ID：13881254
> 
> 赞同：1
> 
> 时间：2012-12-14T15:08:44.380
> 
> 标签：java, spring

我有两个 POJO。

```
class ZebraDAO {
  Long id;
  Mane mane;
  Tail tail;
  Stripes stripes;
}

class ZebraDTO {
  Mane mane;
  Tail tail;
  Stripes stripes;
  String description;
} 
```

Spring 框架在基于两个 POJO 之间名称或属性的相似性从 ZebraDAO 实例创建新 ZebraDTO 时是否具有自动功能/注释/命名约定？即，无需我编写任何将属性从一个转移到另一个的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:10:57.217

使用旧的[Apache Commons BeanUtils.copyProperties()](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object%29)怎么样？Spring 也有自己的静态[BeanUtils.copyProperties()](http://static.springsource.org/spring/docs/2.5.6/api/org/springframework/beans/BeanUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object%29)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:12:03.870

不是 Spring，但[Dozer](http://dozer.sourceforge.net/)可以做到这一点。

# tomcat - 詹金斯没有通过 maven-antrun 运行 Catalina.bat

> ID：13881255
> 
> 赞同：0
> 
> 时间：2012-12-14T15:08:47.040
> 
> 标签：tomcat, maven, jenkins, hudson, maven-antrun-plugin

我正在尝试通过在 Jenkins 的工作中使用 maven antrun 插件来启动 Tomcat。我知道我可以使用货物，但我不能使用它。原因是我希望 Tomcat 在构建结束后运行应用程序。

这是场景 - 我有工作 1，它签出一个项目->构建它->在 Tomcat 上部署它。另一项工作说 Job 2 检查另一个项目->构建并将其部署在 ESB 上，然后使用部署在 Job 1 上的 Tomcat 运行集成测试。我需要在 Job 1 中停止一次 Tomcat，我使用 cargo:stop 在清洁阶段 - 然后我计划在编译阶段之后使用 maven antrun 启动它。然后在打包阶段后再次使用 cargo 重新部署新的战争。我需要这样做，以便每次测试构建都会刷新 Tomcat，并且不会受到 Permgen 等的影响。

无论如何，问题是我的以下脚本在我的命令提示符下运行良好，即它可以正常启动 Tomcat 并为 Startup.bat 打开一个命令窗口。但是当我在 Jenkins 中尝试相同的操作时，它并没有被执行并且足够有趣，它不会抱怨 - 简单不会启动 tomcat。

```
<plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>1.7</version>
                        <executions>
                            <execution>
                                <id>startTomcat</id>
                                <phase>compile</phase>
                                <configuration>

                                    <target>

                                        <exec executable="C:\Windows\System32\cmd.exe" spawn="true">
                                            <arg value="/c" />
                                            <arg value="D:\apache-tomcat-6.0.36\bin\startup.bat" />
                                        </exec>
                                    </target>
                                </configuration>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin> 
```

这是我在詹金斯看到的日志

```
[INFO] Executing tasks
Build sequence for target(s) `main' is [main]
Complete build sequence is [main, ]

main:
     [exec] Current OS is Windows 7
     [exec] Executing 'C:\Windows\System32\cmd.exe' with arguments:
     [exec] '/c'
     [exec] 'D:\apache-tomcat-6.0.36\bin\startup.bat'
     [exec] 
     [exec] The ' characters around the executable and arguments are
     [exec] not part of the command.
Execute:Java13CommandLauncher: Executing 'C:\Windows\System32\cmd.exe' with arguments:
'/c'
'D:\apache-tomcat-6.0.36\bin\startup.bat'

The ' characters around the executable and arguments are
not part of the command.
spawned process java.lang.ProcessImpl@ed11c1
[INFO] Executed tasks
mojoSucceeded org.apache.maven.plugins:maven-antrun-plugin:1.7(startTomcat) 
```

我已经尝试了 executable="C:\Windows\System32\cmd.exe" 以及 executable="cmd.exe" - 同样的问题，即当从命令提示符运行时它工作正常，但在詹金斯这不是启动 tomcat 和既不出错。

已检查 Jenkins - 系统配置和 user.name 是 NEW-LT7-0064$。不确定这是否有任何帮助，但是当我从命令提示符运行时，用户是我的 Windows 登录用户。此外，我使用本地系统帐户将 Jenkins 作为 Windows 服务运行。

我尝试了以下以及链接中的建议[https://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build](https://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build) 这在 Windows 64 位 Windows 7 机器上也不起作用

```
Another workaraund for Windows XP and later is to shedule permanent task and force running it from the ant script.
Once run the command:

C:\>SCHTASKS /Create /RU SYSTEM /SC ONSTART /TN Tomcat /TR "C:\Program Files\Apache Software Foundation\Tomcat 6.0\bin\startup.bat"
Note, that ONSTART can be replaced with ONCE if you do not want to keep Tomcat running.
Add the following code to your ant script:

<exec executable="SCHTASKS">
    <arg value="/Run"/>
    <arg value="/TN"/>
    <arg value="Tomcat"/>
</exec> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:05:57.650

你确定tomcat根本没有启动吗？IIRC Jenkins 不支持生成长期存在的构建过程（请参见[此处](https://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build)）。

关于 tomcat，[第二条评论](https://wiki.jenkins-ci.org/display/JENKINS/Spawning+processes+from+build?focusedCommentId=37748771#comment-37748771)可能会有所帮助：将 tomcat 作为服务而不是 shell 脚本启动。

# ruby-on-rails - Rails - 一个视图中的 3 个嵌套模型

> ID：13881258
> 
> 赞同：0
> 
> 时间：2012-12-14T15:08:54.313
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, models

我正在努力掌握编写模型方法背后的基础知识，我认为我需要做些什么才能让它发挥作用。基本上，我有一个项目视图，它显示属于该项目的 project_todos。然后嵌套在我有属于 project_todo 的 project_todo_comments 之下。全部在一个视图中。

我已经建立了关联，以便项目`has_many`project_todos、project_todo`belongs_to`项目和`has_many`project_todo_comments。然后当然是 project_todo_comment `belongs_to`project_todo。

在项目控制器中，我正在这样做：

```
 def show
    @project = Project.find(params[:id])

    # Display the form to create a new todo
    @project_todo = ProjectTodo.new

    # Create the instance variable to display the loop in the view
    @todos = @project.project_todos

    # Display the form to create a new comment
    @project_todo_comment = ProjectTodoComment.new

     # Create the instance variable to display the loop in the view
    @comments = @project.project_todo_comments

    respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @project }
    end
  end 
```

因此，我可以在项目中添加待办事项并显示它们，我还可以向项目待办事项添加注释并显示它们，所有这些都在同一个视图中。但是，我很难让评论仅显示与它们相关联的待办事项。现在，当我对任何待办事项添加评论时，每个待办事项都会显示该评论。

在视图中，我在这里显示 project_todos 并嵌套表单以添加评论，然后显示评论：

```
 <% @todos.each do |todo| %>
    <p><%= todo.title %></p>

    <%= form_for(@project_todo_comment) do |f| %>
        <%= f.hidden_field :project_todo_id, :value => @project_todo.id %>
        <%= f.hidden_field :project_id, :value => @project.id %>
        <%= f.text_area :comment %>
        <%= f.submit 'Add Comment' %>
    <% end %>

    <% @comments.each do |comment| %>
        <%= comment.comment %>
    <% end %>

  <% end %> 
```

有人告诉我，我需要编写一个模型方法才能使其正常工作，但我仍在努力理解这些。谁能保证我确实需要编写一个模型方法，并指出我了解它们的方向？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:14:55.757

在您的控制器中，您可以获得所有评论，但在实际`todo`项目中，您只需要该项目的评论。这可以通过以下方式完成：`todo.project_todo_comments`
最简单的解决方法：

```
- <% @comments.each do |comment| %>
-   <%= comment.comment %>
- <% end %>

+ <% todo.project_todo_comments.each do |comment| %>
+   <%= comment.comment %>
+ <% end %> 
```

您可以从控制器中删除该行：

```
- @comments = @project.project_todo_comments 
```

但是，在您的表单（您创建评论的地方）中，您为待办事项使用了错误的 ID：

```
- <%= f.hidden_field :project_todo_id, :value => @project_todo.id %>
+ <%= f.hidden_field :project_todo_id, :value => todo.id %> 
```

顺便说一句，我只想为这些模型命名： `Todo`而且`Comment`，使用那么长的模型名没有意义。您在模型开始时定义这些关联，因此如果有人阅读它，他/她会立即看到它。

例如看看我自己，我知道你的模型的目的是什么仍然滥用命名，导致类名过长。

# filtering - 过滤跟踪路由输出

> ID：13881268
> 
> 赞同：0
> 
> 时间：2012-12-14T15:09:05.160
> 
> 标签：filtering, traceroute

我需要一些有关如何过滤跟踪路由返回的数据的帮助。

**简介** 我正在运行一个 bash 脚本来检查此命令返回的 IP：

```
IP=`traceroute -m 2 www.test.com | awk -vOFS='\t' '{if (NR==3){print $2}}'`
echo "$IP: `date`" 
```

基于“$IP”的值，我执行“expect”命令来修改开关内的参数。

bash 脚本是通过根 crontab 安排的。

**问题描述** 执行该bash脚本的crontab正在生成这样的日志

```
192.168.3.25: vie dic 14 14:10:23 CET 2012
192.168.3.25: vie dic 14 14:20:12 CET 2012
192.168.3.25: vie dic 14 14:30:11 CET 2012
192.168.3.25: vie dic 14 14:40:11 CET 2012
192.168.3.25: vie dic 14 14:50:11 CET 2012
expect /root/Scripts/delete.exp
192.168.3.111: vie dic 14 15:00:11 CET 2012
*: vie dic 14 15:10:11 CET 2012
*: vie dic 14 15:20:16 CET 2012 
```

如您所见，在执行 expect 脚本后出现问题，并且 traceroute 行开始返回“*”而不是正确的 IP（192.168.3.25）。我认为由于某种原因，在对交换机进行修改后，大约 20 分钟后，traceroute 少返回了一行（第一行显示交换机的 IP 丢失了）。

我已经以多种方式测试了traceroute返回的值，我认为我应该避免使用awk来过滤从traceroute返回的值。那是因为只要我知道，通过使用 awk 我就可以使用“NR”来过滤行。所以，我不知道如何过滤这些值以搜索特定的值（即一个特定的 IP）。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:32:21.357

问题已解决。我刚刚通过添加“| grep IP_to_filter”修改了traceroute命令

# android - 在 OpenGL ES 2 中实现 VBO 以渲染精灵

> ID：13881269
> 
> 赞同：1
> 
> 时间：2012-12-14T15:09:08.987
> 
> 标签：android, opengl-es-2.0, vbo

我正在尝试实现 VBO 以提高 OpenGL 中的渲染速度，虽然我了解整体概念，但我不确定如何在 2D 中实现精灵。我发现的所有实现似乎都是用于绘制所有顶点相对于彼此固定的 3D 模型。然而，在 2D 游戏中，每个精灵都有自己的位置，因此也有自己的 MVP 矩阵。

它似乎是如何完成的：

```
Basic vertex shader:
        "uniform mat4 uMVPMatrix;   \n" +

        "attribute vec4 vPosition;" +
        "attribute vec2 texCoord;" +
        "varying vec2 vTexCoord;" +
        "void main() {" +

        // matrix must be included as part of gl_Position
        "  gl_Position = uMVPMatrix * vPosition;" +
        "  vTexCoord = texCoord;" +
        "}";

Drawing with VBOs (pseudocode)
     1\. Bind vertex/texture buffers
     2\. Load MVP matrix with glUniformMatrix4fv
     3\. Call glDrawArrays/glDrawElements to draw the all the vertices in one call 
```

有没有一种简单的方法来扩展上述方法以允许不断变化的 MVP？

两种可能的想法：

1.  将顶点加载到 VBO 中，但要绘制每个精灵，如上加载每个精灵的 MVP 矩阵。唯一的节省是您不必每次都传入顶点数据，但您仍然需要调用 glVertexAttribPointer 来索引每个精灵在 VBO 中的正确位置。我想速度节省将是最小的。

2.  不是将 MVP 矩阵作为一个统一的，而是将其定义为一个属性。将每个精灵的所有 MVP 连接到一个大数组中，并使用 glVertexAttribPointer 加载它。似乎不可能使用 glVertexAttribPointer 一次加载一个矩阵（你最多可以加载一个 vec4），所以我必须用 4 次连续调用逐列加载它。然后我应该能够独立地转换每个精灵。应该比我当前的实现获得相当大的速度改进，尽管连接 MVP 仍然需要时间。

有没有比上面更简单的实现？我想必须有一些“标准”的方式来作为批量绘制精灵。

**编辑**

我决定使用选项 2，但是我在开始工作时遇到了问题：[Shader attribute mat4 not binding correct (Opengl ES 2.0 Android)](https://stackoverflow.com/questions/13897232/shader-attribute-mat4-not-binding-correctly-opengl-es-2-0-android)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T19:36:48.810

常见的 2d 引擎所做的是提供基于树的渲染。一个节点有它的模型矩阵，并且有一些子节点同时受到父模型矩阵和它们自己的矩阵的影响。在运行时访问每个节点并将其连接父矩阵和自己的矩阵呈现为一个矩阵。除非您要渲染数千个节点（精灵），否则您不应该担心将这么多矩阵传递到驱动程序内存中的性能问题。

编辑：您也可以拥有特定类型的节点，通常称为 atlas，您可以在其中添加仅受节点模型矩阵影响的预计算四边形（请参阅[https://github.com/cocos2d/cocos2d-iphone/blob/master- v2/cocos2d/CCAtlasNode.m](https://github.com/cocos2d/cocos2d-iphone/blob/master-v2/cocos2d/CCAtlasNode.m)或[https://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/core2d/QuadAtlas.java](https://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/core2d/QuadAtlas.java)）。

# richfaces - RichFaces a4j:support 应该在上下文中更新模型，而不是实体

> ID：13881271
> 
> 赞同：6
> 
> 时间：2012-12-14T15:09:20.720
> 
> 标签：richfaces, jsf-1.2, ajax4jsf

我有`h:inputTextarea`一些`a4j:support`可以按需更新模型

```
<h:inputTextarea rows="15" id="taFreetext" value="#{customInput.value}"
  required="true" 
  onkeyup="textAndLinesCount(#{rich:element('taFreetext')},document.getElementById('msgCounterLines'),20, 64);">
     <a4j:support ajaxSingle="true" event="onchange" />
</h:inputTextarea> 
```

我的问题是，当我按下一个键时，不仅我上下文中的模型会更新，而且实体也会自动刷新！

该`page.xml`文件的刷新模式为手动

```
<begin-conversation join="true" flush-mode="manual"/> 
```

我在 Seam Framework 论坛上阅读了这篇文章：[AJAX 和更新模型的问题，](http://seamframework.org/9521.lace)但这并没有真正的帮助。我也有一些`action`在我`a4j:support`的`entityManager.refresh()`帖子中写的，但是模型和实体仍然处于旧状态......

期待一些好的提示，谢谢！

（我使用 JSF 1.2，RichFaces 3.3.3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:55:12.603

use reRender attribute for updating the model, what you do is mention the id of that in reRender attribute, you will get the result.

```
<a4j:support event="onchange" reRender="userRegistrationForm" action="#{UserRegistrationBean.onChangeMenuCountry}"></a4j:support> 
```

# java - ServletFileUpload#parseRequest(request) 返回一个空列表

> ID：13881272
> 
> 赞同：8
> 
> 时间：2012-12-14T15:09:24.733
> 
> 标签：java, http, servlets, file-upload, multipartform-data

我在 Android 中有一个客户端应用程序，用于`HttpURLConnection`将文件发送到服务器。服务器使用 Apache Commons FileUpload API 来解析表单数据值。

发送此`HttpURLConnection`请求：

```
-----------------------------4912995119421
Content-Disposition: form-data; name="deviceid"

9428103
-----------------------------4912995119421
Content-Disposition: form-data; name="countryid"

598
-----------------------------4912995119421
Content-Disposition: form-data; name="number"

98621360
-----------------------------4912995119421
Content-Disposition: form-data; name="file"; filename="2012-12-08 17.42.18.jpg"
Content-Type: image/jpeg

ÿØÿá1 Exif  II*    
      @      °      ª    
   ²              ¼       Ä   (       1    Ì   2    Ø          i‡    ì   %ˆ    \  n  SAMSUNG GT-S5360L H      H      S5360LUHLB1 2012:12:08 17:42:18  š‚    î  ?‚    ö  "ˆ       'ˆ    È    ?    0220?    þ  ?      ‘     ’    &  ’       
’    .        0100             @       °       >  £       ¤        ¤        ¤    6  ¤                     
   2012:12:08 17:42:18 2012:12:08 17:42:18    
     d               R98      0100                         (           ¤      T.      ÿØÿà JFIF      ÿÛ C @@ÿÛ 
-----------------------------4912995119421-- 
```

服务器代码：

```
 String contentType = request.getContentType();
    if ((contentType.indexOf("multipart/form-data") == -1)) {
        response.setStatus(HttpServletResponse.SC_NOT_FOUND);
        return;
    }

    long maxFileSize = (2 * 1024 * 1024);

    int maxMemSize = (2 * 1024 * 1024);

    DiskFileItemFactory factory = new DiskFileItemFactory();
    // maximum size that will be stored in memory
    factory.setSizeThreshold(maxMemSize);

    // Create a new file upload handler
    ServletFileUpload upload = new ServletFileUpload(factory);
    // maximum file size to be uploaded.

    upload.setSizeMax(maxFileSize);

    List fileItems = upload.parseRequest(request);
    Iterator i = fileItems.iterator();

    //leo primero todas las variables.

    int deviceID = 0;
    int countryID = 0;
    String phoneNumber = "";

    while (i.hasNext()) {
        FileItem fi = (FileItem) i.next();

        if (fi.isFormField()) {
            String variable = fi.getFieldName();
            if (variable.equals("deviceid")) {
                deviceID = Integer.parseInt(fi.getString());
            } else if (variable.equals("countryid")) {
                countryID = Integer.parseInt(fi.getString());
            } else if (variable.equals("number")) {
                phoneNumber = String.valueOf(Long.parseLong(fi.getString()));
            }

        }

    }

    if (deviceID == 0 || countryID == 0 || phoneNumber.equals("")) {
        response.setStatus(HttpServletResponse.SC_NOT_FOUND);
        return;
    } 
```

问题出在线路上`List fileItems = upload.parseRequest(request);`。返回的列表为空，我无法获取表单数据值。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-14T15:16:02.773

如果您已经（隐式）事先解析了请求正文，那么此时它将是空的。HTTP 请求正文只能被读取/解析**一次**（因为客户端只发送了一次并且不会发送多次）。

当您在将请求提供给 Commons FileUpload*之前调用以下任何方法时，请求正文将被隐式读取/解析：*

```
request.getParameter();
request.getParameterMap();
request.getParameterNames();
request.getParameterValues();
request.getReader();
request.getInputStream(); 
```

您需要绝对确保您**没有**事先调用任何这些方法（还要检查所有 servlet 过滤器以确保）。

如果您已经确定不这样做，那么唯一可能的其他原因是边界标题不正确和/或使用不正确的换行符（它必须是 CR+LF，因此不仅仅是 LF）。[您可以在“使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests/2793153#2793153)”底部的“上传文件”部分找到一个具体且适当的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-25T09:07:58.900

如果使用spring，检查`<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" />`xml文件中是否有。有一个功能

```
protected HttpServletRequest checkMultipart(HttpServletRequest request) throws MultipartException {
        if (this.multipartResolver != null && this.multipartResolver.isMultipart(request)) {
            if (request instanceof MultipartHttpServletRequest) {
                logger.debug("Request is already a MultipartHttpServletRequest - if not in a forward, " +
                        "this typically results from an additional MultipartFilter in web.xml");
            }
            else {
                return this.multipartResolver.resolveMultipart(request);
            }
        }
        // If not returned before: return original request.
        return request;
    } 
```

“吃”多部分项目。它会导致三个小时的疼痛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T22:51:52.837

我也遇到了这个问题，但是我找不到与读取请求对象特别相关的任何内容。我终于通过删除这个块让它工作了：

```
@MultipartConfig(
    location="/tmp", 
    fileSizeThreshold=1024*1024, 
    maxFileSize=1024*1024*5, 
    maxRequestSize=1024*1024*5*5
) 
```

显然，当我尝试使用 getParts() 读取请求时，我忘了删除它。我对 java 有点陌生，所以我不知道这与 ServletFileUpload#parseRequest 冲突。无论如何，一旦我摆脱它， parseRequest 正确地返回了数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-02T21:52:44.793

尝试后我遇到了同样的问题，我发现这是库不兼容，库 apache 服务器与 fileupload 库，所以我删除了库并从库服务器 Apache 导入。

```
imports:
import org.apache.tomcat.util.http.fileupload.FileItem;
import org.apache.tomcat.util.http.fileupload.disk.DiskFileItemFactory;
import org.apache.tomcat.util.http.fileupload.servlet.ServletFileUpload; 
```

对不起我的英语

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-05-16T09:22:34.150

我的问题是我的 linux 服务器上的 apache context.xml 包含 Context

`allowCasualMultipartParsing="true"`我的 HttpServlet 包含

```
@MultipartConfig(fileSizeThreshold=1024*1024*2,maxFileSize=1024*1024*50,maxRequestSize=1024*1024*50) 
```

我删除它然后它工作正常。希望这会帮助你。

# android-asynctask - 使用 AsyncTask 实现时，httppost 方法中的 httpclient.execute 不适用于模拟器

> ID：13881273
> 
> 赞同：3
> 
> 时间：2012-12-14T15:09:29.707
> 
> 标签：android-asynctask, android-emulator

我是 android 新手，正在尝试一个异步任务实现来从 web 服务 API 中获取一些数据，它适用于普通的单线程（UI 主）实现。但是在转移到 AsyncTask 以进行正确实施和更好的 UX 时，我无法触发网络消息。谁能帮我找出这里可能出了什么问题，我在这里附上我的代码片段，

```
private class HttpConnector extends AsyncTask<String,String ,String> 
{
    private final String Name;
    private final String setID; 
    private final String setCntrlValue;
    private final String effDate;

    HttpConnector(String aName,String aSetId, String aDate)
    {
        Name=aName;
        setID=aSetId;
        effDate=aDate;

    }

  String response="";
  protected String doInBackground(String ... params) 
    {
        response="";
        String soapCall="<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" ";
        soapCall+=" xmlns:get=\"http://XXXX/GET_TREE_REQUEST.v1\">";
        soapCall+="<soapenv:Header/>";
        soapCall+="<soapenv:Body>";
        soapCall+="<get:TreeData>";
        soapCall+="<get:TreeName>"+Name.toString()+"</get:TreeName>";
        soapCall+="<get:SETID>"+setID.toString()+"</get:SETID>";
        soapCall+="<get:EFFDT>"+effDate.toString()+"</get:EFFDT>";
        soapCall+="</get:TreeData>";
        soapCall+="</soapenv:Body>";
        soapCall+="</soapenv:Envelope>";

        System.setProperty("socksProxyHost", "XXXX");
        System.setProperty("socksProxyPort", "XX");

         HttpParams httpParameters = new BasicHttpParams();
          // Set the timeout in milliseconds until a connection is established.
         int timeoutConnection = 15000;
         HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
          // Set the default socket timeout (SO_TIMEOUT)
          // in milliseconds which is the timeout for waiting for data.
         int timeoutSocket = 0;
         HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

         org.apache.http.client.HttpClient httpclient = new DefaultHttpClient(httpParameters);

         HttpPost httppost = new HttpPost(URL);
         httppost.setHeader("soapaction", "XXXX.v1");
         httppost.setHeader("Content-Type", "text/xml; charset=utf-8");

         try{

              HttpEntity entity = new StringEntity(soapCall.toString(),HTTP.UTF_8);
              httppost.setEntity(entity);
              HttpResponse httpResponse = httpclient.execute(httppost);// calling server
              InputStream content = httpResponse.getEntity().getContent();

              BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
              String s = "";
              while ((s = buffer.readLine()) != null) {
                response += s;
              }
             return response;
        }catch (UnsupportedEncodingException e) {
             return e.getStackTrace().toString();
        } catch (ClientProtocolException e) {
             return e.getStackTrace().toString();
        } catch (IOException e) {
             return e.getStackTrace().toString();
       }catch (Exception e) 
        {   
            return e.getStackTrace().toString();
        }finally{
             httpclient.getConnectionManager().shutdown();//shut down the connection
        }
    }
    // onPostExecute displays the results of the AsyncTask.
    @Override
    protected void onPostExecute(String response) {
         //super.onPostExecute(response);
         txtResponse.setText(response);
   } 

}

  public class FirstAppUI extends Activity 
  {
     public void onClick(View v)
     {
        HttpConnector netConnect= new           HttpConnector(txtTreeName.getText().toString(),txtSetId.getText().toString(),txtEffDate.getText().toString()); 
        netConnect.execute(); 
        txtResponse.setText("Waiting for the Server Response..!!"); 

      }
 } 
```

我正在从我的活动类中触发 AsynTask 。并且代码流在 httpclient.execute(httppost) 行停止。

谢谢

# iphone - 在 UITableView 中保存数据

> ID：13881274
> 
> 赞同：1
> 
> 时间：2012-12-14T15:09:30.117
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我有`UITableView`各种细胞的习惯。我通过为每个部分创建一个`UITableViewCell`. 你可以在这里看到我的表格。如您所见，我有文本字段、文本视图和开关。在我的表单底部（不在屏幕截图上）我有一个保存按钮。

我制作了一个`Person`具有以下属性的类。

1.  登录
2.  密码
3.  方法（这是一个数组）
4.  电话
5.  评论

在我的中，我从我的 Person 对象中`viewDidLoad`加载了数据。`tableView`但是现在我希望当用户更改某些字段并按下保存按钮时，所有字段都保存到 people 对象中。

**我遇到的问题**

*   例如，当我输入一个新的登录名并向下滚动时，该值又更改为原始值。
*   我现在不知道如何将数据保存在我的人员对象中

有人知道我该怎么做吗？亲切的问候

![在此处输入图像描述](../Images/8ef8c4ded42ebc198b086099c7fbede0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:20:07.753

UITableViewCell 使用一种缓存机制，当它从屏幕上滚动并重新打开时，它的内容会被重新加载。这意味着，通过将单元格滚动到屏幕边界之外，然后将其滚动回屏幕，您正在重绘单元格。

解决方案是在表视图控制器中使用数据源：

*   使用数据源在您的方法中加载应该在单元格（或单元格的子视图，例如 UITextField）中显示的值`tableView:cellForRowAtIndexPath:`。
*   当单元格的内容（或 UITextField 等子视图的内容）更新时，将单元格的内容保存到数据源。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:22:31.220

这是因为您没有更新从中填充单元格的数组，现在当您滚动 tableView，然后再次向上滚动时，您的单元格将再次创建，这些单元格从仍然具有旧值的数组中获取文本字段的文本。尝试更新您在文本字段的 didEndEditing 委托方法中填充表格视图的数组。

# android - 平板电脑或手机中的 Android 应用程序希望将用户生成的消息发布到用户墙

> ID：13881277
> 
> 赞同：1
> 
> 时间：2012-12-14T15:09:48.997
> 
> 标签：android, facebook, facebook-wall

我正在开发一个在 Android 平板电脑和手机上运行的 Android 应用程序。我想为用户添加一项功能，以发布从我的应用程序中选择的他的墙文本。

我现在可以做到。但是，通过我的应用程序（用户不想要我的名字而是他/她的名字）以我的开发者名字发布到我的 ser 上。我希望通过我的应用程序或仅由我的应用程序发布的用户名出现在用户的 Facebook 墙上。

我找不到办法做到这一点。我的应用程序通过以下方式与 Facebook 交互：使用 Facebook 登录的网站

我想要的只是让我的用户从我的应用程序中发布消息。一个例子是，如果我的应用程序是一个游戏，则将分数张贴在他的墙上（当然没有我的名字）。

我是 Android 开发人员，而不是 Facebook 开发人员。

# url - 从jar文件中读取多个资源

> ID：13881278
> 
> 赞同：0
> 
> 时间：2012-12-14T15:09:52.613
> 
> 标签：url, jar

我有一个 jar 文件，其中包含两个文件夹，每个文件夹都有一堆文件（可能还有根目录中的一些其他文件）：

```
myjar.jar
 > sub1
    > file1.txt
    > file2.txt
    > file3.txt
    > ...
 > sub2
    > file1.txt
    > file2.txt
    > file3.txt
    > ...
 > otherfile.txt 
```

我有另一个依赖于 myjar.jar 的项目，其中包含一个需要读取所有资源/文本文件并将每个资源转换为字符串的应用程序。因此我想做

```
URL url = this.class.getClassLoader().getResource("sub1");
// Somehow iterate all sub urls and convert to string 
```

这样做有什么好的建议吗？一种方法可能是：

```
String scheme = url.getProtocol();
if (!"jar".equals(scheme)) {
  // Hm who if we simply want to run from the workspace???
  throw new IllegalArgumentException("Unsupported scheme: " + scheme);
}
JarURLConnection con = (JarURLConnection) url.openConnection();
JarFile archive = con.getJarFile();
Enumeration<JarEntry> entries = archive.entries();
while (entries.hasMoreElements()) {
  JarEntry entry = entries.nextElement();
  if (entry.getName().startsWith(folder)) {
    System.out.println(entry.getName());
  }
} 
```

但我想避免这种低级代码。

# java - 使用 java 的任何性能问题：import static

> ID：13881281
> 
> 赞同：7
> 
> 时间：2012-12-14T15:10:04.623
> 
> 标签：java, performance, static, import

我们确实在我们的代码中经常使用 util 函数和一些功能，如 Logger、EventWriter、一些常见的 DB 调用等。我更喜欢这些函数是静态的，因为在我的每个代码中从这些类中实例化函数会严重影响性能（会不会是 ?!!!？，我在 stackoverflow 中读到过多的类实例化会受到性能影响，我正在开发一个具有大型客户数据库和服务器上的高访问日志的项目）。而且我遇到了`static import in java`看起来很酷的东西，我想知道：在使用它之前是否有任何严重的考虑？

我已经从 StackOverFlow 收集到的东西：

> 使用静态导入可能会使代码不可读，例如判断函数定义。

除此之外，我必须担心的任何漂亮问题..？

旧代码：

```
class myservlet extends httpServlet
{
    pubilc doPost()
    {
        Utils utils = new Utils();
        DBFuncs dbFuncs = new dbFuncs();
        Logger logger = new Logger();
        EventWrtr eventWrtr = new EventWriter();

        utils.GetEscapedName(name);
        logger.Log("error");
        eventWrtr.WriteEvent("something happened");
        // Getting new Objects for every servlet calls

    }
} 
```

我当前的代码：（希望这将避免不必要的实例化，代码就像上面一样，我现在正在更改它）

```
/* Declaring all the methods in the below classes as static methods */  
import com.mycom.Utils;
import com.mycom.DBFuncs;
import com.mycom.Logger;
import com.mycom.EventWrtr;
class myservlet extends httpServlet
{
    public doPost()
    {
        Utils.GetEscapedName(name);
        Logger.Log("error");
        EventWrtr.WriteEvent("something happened");         
    }
} 
```

我有点喜欢这样，我想知道任何严重问题，尤其是与使用以下方法相关的性能

```
/* Declaring all the methods in the below classes as static methods */  
import static com.mycom.Utils;
import static com.mycom.DBFuncs;
import static com.mycom.Logger;
import static com.mycom.EventWrtr;
class myservlet extends httpServlet
{
    public doPost()
    {
        GetEscapedName(name);
        Log("error");
        WriteEvent("something happened");           
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-14T15:12:53.780

该[`static import`](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)特性是一种[*语法糖*](http://en.wikipedia.org/wiki/Syntactic_sugar)特性，因此它不会对性能产生影响。但是，它确实对可读性和可测试性产生了负面影响：

*   你将一个可能很大的类的内容转储到你当前的命名空间中，使你的代码更难阅读；现代 IDE 通过让您通过在程序中单击对象的名称来导航到对象的定义来缓解这种情况。
*   Your code relies upon `static` objects, making it extremely hard to test. For example, you cannot easily drop a mock logger, and expect your code start using it. This is a general limitation of using static objects, though - you get it when you use static objects, with or without the static import.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-14T15:13:30.257

The answer to your question is:

No.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-08T12:43:25.233

**no it will not make any performance issue.** but its better to use normal import Please don’t use this feature, because over a period you may not understand which static method or static attribute belongs to which class inside the java program. The program may become unreadable.

# sql - 用列表成员填充数据表，如果它匹配 SQL 选择

> ID：13881286
> 
> 赞同：2
> 
> 时间：2012-12-14T15:10:11.890
> 
> 标签：sql, list, select, datatable

我有一个数字和名字的列表。我想搜索数据库并查找该数字是否与我的 sql 选择匹配。如果确实如此，我需要将其与名称一起填写到数据表中。然后 foreach 数据表中的行将其写入另一个列表。我也无法将名称填充到数据表中，因为我没有在 SQl 选择中使用它作为参数。

```
DataTable dt = new DataTable();

try {
    using (SqlConnection conn = getconnection()) {
        conn.Open();
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandTimeout = 5000;
        string select = @"SELECT NBR
                    FROM People
                    where ID in (15,17) and NBR=Nbr and ACCEPTED=0";

        foreach (Fields f in Members) {
            cmd.Parameters.Clear();
            cmd.Parameters.AddWithValue("@Nbr", f.nbr);
            cmd.CommandText = select;
            SqlDataAdapter adapt = new SqlDataAdapter(cmd);
            //if f.nbr matches sql select fill it to datatable how can I fill dt with f.name as well?
            adapt.Fill(dt);
        }
    }

    foreach (DataRow row in dt.Rows) {
        Fields f1 = new Fields();
        f1.nbr= Convert.ToInt64(row["NBR"]); 
        // f1.name=Convert.ToString(row["Name"]????
        Not.Add(f1);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:57:30.813

利用

```
 string select = @"SELECT NBR, Name
                    FROM People
                    where ID in (15,17) and NBR=@Nbr and ACCEPTED=0"; 
```

# c# - 从字符串转换数字时的双精度

> ID：13881287
> 
> 赞同：1
> 
> 时间：2012-12-14T15:10:13.937
> 
> 标签：c#, string, casting, sql-server-2008-r2, double

我正在从数据库中获取数字。有些存储`double`在数据库中，有些存储为`string`.

我想要做的是计算字符数`decimal number`：345.34938 会给我一个结果`5`。

正如我所说，我`double`的一些来自数据库`double`，一些来自`string`. 我想知道当数字为 时是否会出现任何问题`casting`，`string`因此`double`在尝试`count`小数时给了我错误的结果。

我想我应该没问题，但我担心在某些情况下我最终会收到错误的双数`string`（考虑使用 1.9999999 而不是 2.0，诸如此类）......

`string`当存储在我的应用程序中时，将我的号码从to转换为`double`会给我带来奇怪的结果是否有任何风险`double`？我是不是很高兴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:34:11.703

考虑使用该方法将`string`表示转换为。因为对于 a而言，数字的值与其字符串表示形式之间存在更好的对应关系。此外，它可以处理更多的数字。`System.Decimal``decimal.Parse``decimal`

A`System.Decimal`将保留字符串中存在的尾随零（如`"2.7500"`），而 a`System.Double`不会。

但是，如果您的字符串总数不超过 15 位（包括小数点前的数字`.`），您的方法`double`可能会奏效。但是所表示的确切数字几乎​​总是与带有 a 的“你所看到的”不同`double`，因此小数位数应理解为`double.ToString()`显示...

也许直接使用字符串更容易，比如

```
int numberOfDecimals = myString.Length - (myString.IndexOf('.') + 1); 
```

# c++ - GCC Profile Guided Optimization (PGO) 收集哪些信息以及哪些优化使用它？

> ID：13881292
> 
> 赞同：48
> 
> 时间：2012-12-14T15:10:25.500
> 
> 标签：c++, gcc, pgo, lto

当我启用时 GCC 会收集哪些信息`-fprofile-generate`，哪些优化实际上使用了收集的信息（设置`-fprofile-use`标志时）？

我需要在这里引用。我已经搜索了一段时间，但没有找到任何记录。

有关链接时间优化 (LTO) 的信息将是一个加分项！=D

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-14T15:22:48.527

`-fprofile-generate`启用和。`-fprofile-arcs`_`-fprofile-values``-fvpt`

`-fprofile-use`启用`-fbranch-probabilities`, `-fvpt`,和`-funroll-loops`_`-fpeel-loops``-ftracer`

来源： http: [//gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Optimize-Options.html#Optimize-Options](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Optimize-Options.html#Optimize-Options)

PS。有关 LTO 的信息也在该页面上。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-12-20T10:14:03.627

Ulrich Drepper 的“每个程序员应该了解的关于内存的知识” [https://people.freebsd.org/~lstewart/articles/cpumemory.pdf](https://people.freebsd.org/~lstewart/articles/cpumemory.pdf) [http://www.akkadia.org/drepper/cpumemory.pdf](http://www.akkadia.org/drepper/cpumemory.pdf)

在第 7.4 节中

*   使用 --profile-generate 编译会为每个目标文件生成 .gcno 文件。（用于 gcov 覆盖率报告的同一文件）
*   那么你必须运行一些测试，在运行期间它将覆盖数据记录到 .gcda 文件中
*   使用 --profile-use 重新编译：它将收集覆盖数据并推断分支是可能的 (__builtin_expect( .. , 1 ) 还是不太可能的 (__builtin_expect( .. , 0)

结果应该运行得更快，因为它应该更好地将代码预取到处理器指令缓存中。

# .net - RavenDB 中的永久索引

> ID：13881293
> 
> 赞同：0
> 
> 时间：2012-12-14T15:10:29.730
> 
> 标签：.net, nosql, ravendb

我目前想为 RavenDB 创建一些静态索引以获得更好的性能。

但是当我浏览 RavenDB[文档](http://ravendb.net/docs/client-api/querying/static-indexes?version=1)时，有一个特定的句子真的让我重新考虑了我的初衷。

> 因此，我们建议将应用程序中的大多数操作基于静态索引，**或者至少确保将动态索引创建的临时索引提升为永久索引。**

好吧，因为我的解决方案非常大，我什至不知道我需要哪些索引。这将迫使我查看整个解决方案并为所有其他操作创建静态索引。我可能夸大了，但仍然......我不知道所有这些工作是否值得。

我的问题是：

如何确保临时索引已升级为永久索引？

**编辑：**

我了解到的事实是，一些索引被提升为永久/静态自动索引，这些索引被持久化，即使我重新启动 Raven 服务器也不会丢失它们。我的理解是它取决于 Server `Configuration options`。因此，我的一些索引已被提升为永久索引，并且在重新启动后，我只丢失了那些临时索引。尽管如此，我的问题仍然存在。

**编辑2：**

我对原始问题进行了编辑并收集了更多信息。把我当成一个真正愚蠢的人。我需要解释。请不要将我与诸如此类的事情混淆`"permanent/static"`

静态索引是永久的，但永久索引不一定`static`。也许我问错了问题。我只是想确保 RavenDb 服务器不必在每次调用查询时都创建新的动态索引，而我每分钟并不真正调用一百次。

> RavenDB 可以分析查询并动态创建临时索引，该索引将在被处理之前保留一段时间。

我从 Ravendb 服务器配置选项中了解到：

当您在一分钟内使用它一百次时，索引将被提升为永久（默认值）。如果它保持动态并且在 20 分钟内未使用，则会被删除。（默认）。但是，如果我有将要使用的查询，我不知道 **TempIndexPromotionMinimumQueryCount / 2** per **TempIndexPromotionThreshold**。所以也许我现在的问题是：

*经常使用但动态的索引和永久索引之间有什么显着区别吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:33:58.143

该声明的意思是，如果您的应用程序大量使用动态/临时索引，最好将其转换为静态/永久索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T13:14:31.313

动态索引（是否经常使用）：

1.  *始终*由RavenDB创建，因为无法使用现有的动态/静态索引来回答您的查询
2.  只存在于内存中，不存在于磁盘中。
3.  如果 Raven 服务器重新启动，将**不**存在
4.  如果使用量未超过特定的查询阈值/经过的时间，将被删除
5.  与静态索引相比，维护资源的优先级较低

与静态索引相反。静态索引：

1.  或者是
    *   手动/自动提升的动态索引
    *   在 Raven Studio 中手动定义的静态索引
    *   由应用程序在 .NET 代码中创建并在 RavenDB 中注册
2.  存储在磁盘上
3.  如果 Raven 服务器重新启动，将重新加载
4.  Raven Server 永远不会自动删除
5.  被赋予更高的维护优先级。

是的，动态索引也有优先级，但静态索引在维护中是第一优先级，其次是动态索引。

您还说您的应用程序非常“大”（大容量/高品种/高吞吐量？），我认为开发人员机器上一定有一些开发周期。通过开发人员测试，您可能已经为您创建了索引。接下来的步骤是如何将它们转移到生产中。

你有3个选择：

1.  让 RavenDB 自己解决（动态 -> 静态）
2.  将定义从环境复制/粘贴到环境。（静止的）
3.  [推荐] 在代码中创建索引。（静止的）

推荐的方法是，如果您提前知道要索引什么，最好创建一个实现`AbstractIndexCreationTask<T>`然后注册它的类。在 RavenDB 网站上可以找到[在代码中创建静态索引](http://ravendb.net/docs/2.5/client-api/querying/static-indexes/defining-static-index)的文档。这样，您还将在您的环境中拥有一组一致的索引。

# postgresql - PostgreSQL 复杂查询以查找两个字段的最接近匹配值

> ID：13881294
> 
> 赞同：0
> 
> 时间：2012-12-14T15:10:36.593
> 
> 标签：postgresql

您好我有一个具有以下结构的数据库：

表格1：

```
time(type timestamp)        longitude(type string)        latitude(type string)
2:00                        -110.4365                     38.7463
2:00                        -110.2743                     38.7983
2:00                        -102.4434                     36.9438
3:00                        -112.3254                     39.2222
etc                         etc                           etc 
```

现在我有一些绘制值的代码，当它这样做时它会失去一些准确性。用户可以单击这些点并查询数据库以获取有关该点的更多信息。但是，由于绘图功能失去了一些准确性，我需要在查询中考虑到这一点。

所以我的想法是我想查询时间 = x 和（纬度 = 最接近 y 的值和经度 = 最接近 z 的值）。您会看到最接近的值取决于纬度和经度，这就是我对如何进行感到困惑的地方。

可以说我正在寻找：

```
Time = 2:00
Longitude = -110.3421
Latitude = 38.7587 
```

现在，如果我查询：

```
Time = 2:00 and Longitude = closest to -110.3421 
```

那么结果将是第 2 行。

但是，如果我这样做：

```
Time = 2:00 and Latitude = closest to 38.7587 
```

那么结果将是第 1 行。

如果我查询：

```
Time = 2:00 and Longitude = closest to -110.3421 and Latitude = closest to 38.7587 
```

那么结果将是第 1 行。这是我需要的查询类型...

我发现以下帖子对于查询一个字段中最接近的值很有用：

[https://stackoverflow.com/a/6103352/1800665](https://stackoverflow.com/a/6103352/1800665)

谢谢，詹姆斯

编辑：我有以下内容：

```
(SELECT * FROM (
(SELECT * FROM Table1 WHERE cast(latitude as double precision) >= '38.7587' AND healthtime = '2:00' AND cast(longitude as double precision) >= '-110.3421') 
UNION ALL 
(SELECT * FROM Table1 WHERE cast(latitude as double precision) < '38.7587' AND healthtime = '2:00' AND cast(longitude as double precision) < '-110.3421')
) as nearest ORDER BY ( abs('38.7587'-cast(latitude as double precision)) + abs('-110.3421'-cast(longitude as double precision))) LIMIT 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:30:29.787

你可以尝试这样的事情：

```
SELECT *
FROM table1
WHERE healthtime = '2:00'
ORDER BY ((longitude::double precision - (-110.3421))^2 +
          (latitude::double precision -  (38.7587  ))^2)
LIMIT 1 
```

它会以最小的“距离”返回您的点：（`(lon-lon1)^2 + (lat-lat1)^2 -> min`）。

我的[SQLFiddle](http://sqlfiddle.com/#!12/d32b2/1)示例。

UPD 测试查询：

```
SELECT *, ((longitude::double precision - (-110.3421))^2 +
           (latitude::double precision -  (38.7587  ))^2) as distance,
          (abs(longitude::double precision - (-110.3421)) +
           abs(latitude::double precision -  (38.7587  ))) as distance2
FROM table1
WHERE time = '2:00'
ORDER BY ((longitude::double precision - (-110.3421))^2 +
          (latitude::double precision -  (38.7587  ))^2)

LIMIT 2 
```

给出 2 个最佳结果：

```
| TIME | LONGITUDE | LATITUDE |   DISTANCE | DISTANCE2 |
--------------------------------------------------------
| 2:00 | -110.2743 |  38.7983 |   0.006165 |    0.1074 |
| 2:00 | -110.4365 |  38.7463 | 0.00906512 |    0.1068 | 
```

`DISTANCE`= `(lon-lon1)^2 + (lat-lat1)^2`（我的变种）。

`DISTANCE2`= `abs(lon-lon1) + abs(lat-lat1)`（您的变体）。

您的变体给出了不同的“最接近”。您可以使用“距离”计算的任何变体，但我更喜欢“经典”方式 - `root((lon-lon1)^2 + (lat-lat1)^2)`。

新的[SQLFiddle](http://sqlfiddle.com/#!12/d32b2/9)

# r - Agrep - 不要修改字符类

> ID：13881297
> 
> 赞同：1
> 
> 时间：2012-12-14T15:10:43.427
> 
> 标签：r, regex

我有一个需要匹配的模式“[^az]xxx yyy[^az]”。我可以接受模式的“xxx yyy”部分的近似匹配，但需要字符类保持不变。

上述模式在“skxxx yyyaa”等字符串中找到匹配项。

我尝试使用“<[^az]>xxx yyy<[^az]>”，其中 <> 元字符不允许更改，但我认为它忽略了 <> 中的元字符。

代码是：

```
agrep( "[^a-z]xxx yyy[^a-z]","skxxx yyyaa",max.distance=2,fixed=FALSE,ignore.case=TRUE) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:04:43.047

您可以添加以下条件，检查距离来自“xxx yyy”片段，而不是来自周围的 [^az]。

```
adist("[^a-z]xxx yyy[^a-z]","sk-xxx yyz-aa",fixed=FALSE,ignore.case=TRUE) == 
  adist( "xxx yyy","sk-xxx yyz-aa",fixed=FALSE,ignore.case=TRUE)

> TRUE

adist("[^a-z]xxx yyy[^a-z]","sk-xxx yyzaa",fixed=FALSE,ignore.case=TRUE) == 
  adist( "xxx yyy","sk-xxx yyzaa",fixed=FALSE,ignore.case=TRUE)

> FALSE 
```

# php - 在不丢失信息的情况下对另一个页面进行表单操作

> ID：13881299
> 
> 赞同：0
> 
> 时间：2012-12-14T15:10:50.617
> 
> 标签：php, html

我想制作一个获取信息的表单，然后在提交时在另一个页面上使用该信息。但是，一旦它重定向，它就会丢失来自其他页面的所有信息，例如：

第 1 页：

```
<?php
     if(isset($_POST['submit']))
     {$info=$_POST['info'];}
?>

<html>
  <form action='page2.html' method='POST'>
    <input name='info'>
    <intput type='submit' name='submit'>
  </form>
</html> 
```

第2页：

```
<?php
      echo $info;
?> 
```

它不知道第 2 页上的变量“信息”是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:13:13.710

添加：

```
if(isset($_POST['submit']))
 { echo $_POST['info'];} 
```

并删除：

```
 echo $info; 
```

现在原因：

当您提交表单时，它会被重定向到以标签`action`属性编写的页面`form`并将表单数据发送给它。因此，提交表单后`page2`，您就可以访问`posted`数据了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:13:20.413

如果您要发布到，`page2.html`那么您的表单数据将位于全局`$_POST`变量中。尝试

`print_r($_POST);`

在你的`page2.html`php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:15:17.310

在第 2 页：

```
echo $_POST['info']; 
```

我不知道为什么您在第一页中有变量 $_POST 。此外，您应该命名 page2 `page2.php`，除非您已在 Web 服务器中另外配置它​​。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:23:02.187

第 1 页：

```
<html>
  <form action='page2.html' method='POST'>
    <input name='info'>
    <intput type='submit' name='submit'>
  </form>
</html> 
```

第2页：

```
echo $_POST['info']; 
```

或者，查看页面之间传递的所有内容：

```
print_r($_POST); 
```

# string - 替换字符串中的字符

> ID：13881307
> 
> 赞同：2
> 
> 时间：2012-12-14T15:11:08.650
> 
> 标签：string, r, replace

> **可能重复：**
> [忽略 R 字符串中的转义字符（反斜杠）](https://stackoverflow.com/questions/4685737/ignore-escape-characters-backslashes-in-r-strings)

我想用字符串中的“/”替换字符串中的“\”。例如，初始字符串是“d:\temp\1.txt”，我想要“d:/temp/1.txt”。我试过了，`gsub`但它没有按我的意愿工作。但是，如果我做一个更简单的练习

```
> gsub("a", "b", "banana")
[1] "bbnbnb" 
```

它工作正常。是否有一些使用特殊字符“/”和“\”的技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:12:38.237

@Paul，这不起作用 - 请参阅 R for Windows 常见问题解答。

看看 R 对反斜杠做了什么：

```
a <- "d:\temp\1.txt"
cat(a)
# d:      emp.txt 
```

逃跑一样。。

```
gsub("\\", "/", a)
Fehler in gsub("\\", "/", a) : 
  ungültiger regulärer Ausdruck '\', Grund 'Trailing backslash' 
```

..不起作用..

这会起作用：

```
b <- "d:\\temp\\1.txt"
cat(b)
# d:\temp\1.txt
gsub("\\\\", "/", b)
# "d:/temp/1.txt" 
```

# jquery - 阻止兄弟姐妹在 Jquery 中触发事件

> ID：13881310
> 
> 赞同：0
> 
> 时间：2012-12-14T15:11:24.233
> 
> 标签：jquery, html

我有一个手风琴，只针对“collapseLinks”类指定的锚元素，我试图用`:not()`选择器排除“vanilla”类。“vanila”类只是我希望表现正常的锚。现在，当您单击“香草”锚时，它也会触发手风琴。任何帮助都会很棒！

```
$('a.collapseLinks').click(function() {
    $("div.slider > a.collapseLinks").click(function() {
        $(this).children(".slider > a.collapseLinks").toggle();
    });

    $(this).toggleClass('collapseLinksClicked');
});

// Stuff to do as soon as the DOM is ready;
$(".internal").hide();

$("input").attr("disabled", "disabled");

$(".slider:not(.vanilla)").click(function() {
    $(this).next(".internal:not(.vanilla)").slideToggle();
}).toggle(function() {
    $(this).children("span").text("-");
}, function() {
    $(this).children("span").text("+");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:54:58.560

您的第一个“单击”处理程序正在添加一个新的事件处理程序，*每次*单击它时，这些都不会覆盖以前的处理程序。仔细想想你到底想要做什么，并清理那个方法。根据您的描述，给您一个建议：

```
$('a.collapseLinks').click(function() {
    $(this).next("div.slider").toggle();
    $(this).toggleClass('collapseLinksClicked');
}); 
```

在自 1.6 以来的每个 jQuery 版本中，禁用输入元素的正确方法是：

```
$("input").prop("disabled", true); 
```

最后，您的第二个“点击”处理程序正在查找“滑块”元素（我假设所有这些元素都是`<div>`元素），然后尝试过滤掉“香草”元素（我假设它们都是`<a>`元素）。此外，没有签名[`.toggle`](http://api.jquery.com/toggle/)将两个函数作为参数。

```
$("div.slider").click(function() {
    $(this)
        .next("div.internal")
        .slideToggle().end()
        .toggle(function() {
            if ( $(this).is(':visible') ) {
                $(this).children("span").text("-");
            }
            else {
                $(this).children("span").text("+");
            }
        });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T15:15:06.363

您应该在不想传播的处理程序中使用 stopPropagation：http: [//api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

```
$("a.vanila").click(function(event){
  event.stopPropagation();
  // do something
}); 
```

干杯。

# java - 从 SQLite DB 动态填充 Bitmapfun 图像（使用 Url 字符串）

> ID：13881320
> 
> 赞同：0
> 
> 时间：2012-12-14T15:11:44.790
> 
> 标签：java, android, arrays, sqlite

我目前正在开发我的 android 应用程序，可悲的是，我走到了死胡同。我正在使用来自[Bitmapfun](https://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)的示例。我的问题是：示例工作正常，但我尝试了各种方法来填充 Images 类中包含的两个数组并将图像提供给网格。所以每次我传递不同的参数时，不同的图像将被添加到两个数组中并显示到网格中。

**数据库处理程序.java**

```
public String[] getImagesUrl(String rest_name, String area) {
    String[] images_url = new String[] {};

     // Select All Query
       String selectQuery = "SELECT * FROM menu_images where _area ='" + area + "'" + " AND rest_name='" + rest_name + "'";

       SQLiteDatabase db = this.getReadableDatabase();
       Cursor cursor = db.rawQuery(selectQuery, null); 

    // looping through all rows and adding to list
       if (cursor.moveToFirst()) {
           for (int i = 0; i < cursor.getCount(); i++)
            {
                images_url[i] = cursor.getString(cursor.getColumnIndex("_images"));
                cursor.moveToNext();
            }  
       }

       // closing connection
        cursor.close();
        db.close();

       return images_url;
} 
```

**图片.java**

```
import java.util.ArrayList;
import java.util.List;

import com.example.project.DatabaseHandler;

public class Images {

private static DatabaseHandler dbHandler;

public final static String[] imageUrls = new String[] {
    "http://xtcgamers.com/images/pic2.png",
};

public final static String[] imageThumbUrls = new String[] {
    "http://xtcgamers.com/thumb_images/pic2.png",
};
} 
```

我应该如何调用我的其他方法以便填充这两个数组？因为当我尝试这样做时，我总是会遇到某种异常（这取决于我是否尝试将数组列表转换为数组并返回等等）

任何形式的帮助表示赞赏。我被困了一个多星期。

在此先感谢，哈里斯

附言。我**不想**在这里使用数组列表，我真的需要使用简单的数组。

**编辑：** 我已经测试了一些虚拟数据并尝试从另一个活动中调用我的 DatabaseHandler 方法，它工作正常。所以我想问题出在其他地方。

这是我的日志：

> 12-14 21:23:25.753：E/AndroidRuntime(9899)：致命异常：主要 12-14 21:23:25.753：E/AndroidRuntime(9899)：java.lang.ExceptionInInitializerError 12-14 21:23:25.753： E/AndroidRuntime(9899): 在 com.example.project.ui.ImageGridFragment$ImageAdapter.getCount(ImageGridFragment.java:221) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 android.widget.GridView .setAdapter(GridView.java:131) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 com.example.project.ui.ImageGridFragment.onCreateView(ImageGridFragment.java:97) 12-14 21:23 :25.753: E/AndroidRuntime(9899): 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 android.support。 v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083) 12-14 21:23:25.753: E/AndroidRuntime(9899):在 android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager. java:1431) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:523) 12-14 21:23:25.753: E/ AndroidRuntime(9899): 在 android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 android.app.Activity.performStart(Activity.java:3791 ) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1620) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 android .app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663) 12-14 21:23:25.753:E/AndroidRuntime(9899): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 android.app.ActivityThread$H.handleMessage( ActivityThread.java:931) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 android.os.Handler.dispatchMessage(Handler.java:99) 12-14 21:23:25.753: E/AndroidRuntime( 9899): 在 android.os.Looper.loop(Looper.java:123) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 12 -14 21:23:25.753: E/AndroidRuntime(9899): 在 java.lang.reflect.Method.invokeNative(Native Method) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 java.lang。 reflect.Method.invoke(Method.java:507) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 12-14 21:23:25.753: E/ AndroidRuntime(9899): 在 dalvik.system.NativeStart.main(Native Method) 12-14 21:23:25.753: E/AndroidRuntime(9899): 由: java.lang.NullPointerException 12-14 21:23:25.753: E/AndroidRuntime(9899): 在 com.example.project.provider.Images.(Images.java:61) 12-14 21:23:25.753: E/AndroidRuntime(9899): ... 22 更多provider.Images.(Images.java:61) 12-14 21:23:25.753: E/AndroidRuntime(9899): ... 22 更多provider.Images.(Images.java:61) 12-14 21:23:25.753: E/AndroidRuntime(9899): ... 22 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:27:42.987

如果您尝试实现 BitmapFun 示例，我建议您放弃整个 url 数组，并更改库的 loadImage 方法，直接采用 String url（只需注释掉采用 int 和 imageView 的那个），并使用 imageFetcher.loadImage(item .imageUrl, imageView) 直接在适配器的 getView 中

# c++ - 从 C++ 中的二进制数据中读取浮点数和双精度数

> ID：13881321
> 
> 赞同：0
> 
> 时间：2012-12-14T15:11:47.883
> 
> 标签：c++, python, floating-point, binary, endianness

我需要能够从 C++ 中的二进制数据中读取浮点数或双精度数，类似于 Python 的`struct.unpack`函数。我的问题是我收到的数据总是大端的。我已经处理了[这里描述](https://stackoverflow.com/questions/13863667/dealing-with-endianness-in-c/13864024#comment19100561_13864024)的整数值，但是逐字节工作不适用于浮点值。我需要一种在 C++ 中提取浮点值（32 位`float`和 64 位`double`）的方法，类似于您在 Python 中的使用`struct.unpack(">f", num)`方式。`struct.unpack(">d", num)`

这是我尝试过的一个例子：

```
stuct.unpack("d", num) ==> *(double*) str; // if str is a char* containing the data 
```

如果是 little-endian，那效果很好`str`，但如果它是 big-endian，就不行，因为我知道它永远都是。问题是我不知道环境的原生字节序是什么，所以我需要能够始终将二进制数据提取为大字节序。

如果您查看链接的问题，您会发现这很容易对整数值使用按位或移位，但该方法不适用于浮点。

**注意**我应该早点指出这一点，但我不能使用 c++11 或 Boost 以外的任何第三方库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:20:30.390

为什么逐字节工作不适用于浮点值？只需像往常一样提取 32 位整数，然后将其重新解释为浮点数：`float f = *(float*)&i`

对于 64 位整数和双精度数也是如此

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:38:58.520

```
void ByteSwap(void * data, int size)
{
    char * ptr = (char *) data;
    for (int i = 0;  i < size/2;  ++i)
        std::swap(ptr[i], ptr[size-1-i]);
}

bool LittleEndian()
{
    int test = 1;
    return *((char *)&test) == 1;
}

if (LittleEndian())
    ByteSwap(&my_double, sizeof(double)); 
```

# mongodb - 使用嵌套操作的 MongoDB 聚合框架 $group

> ID：13881322
> 
> 赞同：1
> 
> 时间：2012-12-14T15:11:48.497
> 
> 标签：mongodb, aggregation-framework

我有几个需要汇总的数字字段。假设我的文档结构如下：

```
_id: 1234,
numValue1: 10,
numValue2: 20,
numValue3: 30,
numValue4: 40 
```

如果我想使用其中一个数字字段将计算字段添加到我的管道中，我可以执行以下操作：

```
db.myCollection.aggregate(
{ 
  $project : {
    someComputedField : { $add:["$numValue1", 15] }
  }
}) 
```

如果我想添加基于其中两个字段的计算字段，我知道我可以这样做：

```
db.myCollection.aggregate(
{ 
  $project : {
    someComputedField : { $add:["$numValue1", "$numValue2"] }
  }
}) 
```

现在，我的问题是如果我需要做 $numValue1 + $numValue2 + $numValue3 + $numValue4 怎么办？

或者更有趣的是 $numValue1 * ($numValue2 + $numValue3) / $numValue4？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:27:07.543

`$add`可以接受多个值，所以第一种情况是：

```
someComputedField: {$add: ['$numValue1', '$numValue2', '$numValue3', '$numValue4']} 
```

你可以嵌套操作符，所以第二种情况是：

```
someComputedField: {
    $divide: [
        {$multiply: [
            '$numValue1', {$add: ['$numValue2', '$numValue3']}
        ]},
        '$numValue4'
    ]
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T15:29:20.687

当查询不是简单的添加时，最好使用 map/reduce。

```
`db.myCollection.mapReduce(function() {
   emit('result', this.numValue1 * (this.numValue2 + this.numValue3) / this.numValue4);
}, function(key, values) {
   var i=0; values.forEach(function(n){i+=n;}); return i;
});` 
```

`聚合框架和 map/reduce 也有几乎相同的性能。`

# ajax - 部分更新的不同响应时间取决于上次活动

> ID：13881323
> 
> 赞同：0
> 
> 时间：2012-12-14T15:11:52.173
> 
> 标签：ajax, jsf-2, primefaces, myfaces

我已经注意到一段时间以来，当自上次服务器请求以来存在时间间隔时，部分更新的响应时间要长得多。举个例子：

我请求一个页面并立即单击一个带有关联 Ajax 侦听器的 commandButton，我可以看到该事件立即触发。

我请求相同的页面，等待 30 秒，然后单击相同的命令按钮，事件可能需要 5 秒才能触发……甚至 10 秒。

有人可以解释为什么会这样，我该如何解决？

*JBoss 4.2.3 | MyFaces 2.1.9 | PrimeFaces 3.4.2*

# xml - Castle Windsor：从 xml 配置中注入一系列服务

> ID：13881325
> 
> 赞同：2
> 
> 时间：2012-12-14T15:11:53.097
> 
> 标签：xml, arrays, castle-windsor, castle, inject

我在使用 xml 配置通过 Castle Windsor 注入一系列服务时遇到问题。我已经按照[这个](http://dotnetslackers.com/articles/designpatterns/InversionOfControlAndDependencyInjectionWithCastleWindsorContainerPart2.aspx)链接很好地解释了它，但不知何故它对我不起作用。这是我正在使用的代码：

```
class Program
{
    static void Main(string[] args)
    {
        IWindsorContainer container = new WindsorContainer();
        container.Install(Castle.Windsor.Installer.Configuration.FromAppConfig());

        var consumer = container.Resolve<Consumer>();
    }
}

public class Consumer
{
    public Consumer(IFoo[] foos)
    {
        foreach (IFoo foo in foos)
            foo.Foo();
    }
}

public interface IFoo
{
    void Foo();
}

public class Foo1 : IFoo
{
    public void Foo() { }
}

public class Foo2 : IFoo
{
    public void Foo() { }
} 
```

这是app.config：

```
<castle>
  <components>
     <component id="Foo1" service="Test.IFoo, Test" type="Test.Foo1, Test" />
     <component id="Foo2" service="Test.IFoo, Test" type="Test.Foo2, Test" />

     <component id="Consumer" service="Test.Consumer, Test">
        <parameters>
           <foos>
              <array>
                 <item>${Foo1}</item>
                 <item>${Foo2}</item>
              </array>
           </foos>
        </parameters>
     </component>
  </components>
</castle> 
```

奇怪的是，我得到的错误如下：

```
Can't create component 'Test.Consumer' as it has dependencies to be satisfied.
'Test.Consumer' is waiting for the following dependencies:
- Service 'Test.IFoo[]' which was not registered. 
```

为什么它期望 IFoo[] 作为服务？这有任何意义吗？或者我所指的链接可能不再适用于当前版本的温莎（我在 3.1.0 上）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T10:22:14.423

再次回答我自己的问题（对不起;-）：

原来，解决方案非常简单——一旦你知道了。添加一个 ArrayResolver 作为子解析器不仅可以使它工作：

```
 static void Main(string[] args)
    {
        IWindsorContainer container = new WindsorContainer();
        container.Kernel.Resolver.AddSubResolver(new ArrayResolver(container.Kernel));
        container.Install(Castle.Windsor.Installer.Configuration.FromAppConfig());

        var consumer = container.Resolve<Consumer>();
    } 
```

但甚至简化了配置，因为您不必设置实例：

```
 <configuration>
     <configSections>
        <section name="castle" type="Castle.Windsor.Configuration.AppDomain.CastleSectionHandler, Castle.Windsor" />
     </configSections>
     <castle>
        <components>
           <component id="Foo1" service="Test.IFoo, Test" type="Test.Foo1, Test" />
           <component id="Foo2" service="Test.IFoo, Test" type="Test.Foo2, Test" />
           <component id="Consumer" service="Test.Consumer, Test"/>
        </components>
     </castle>
  </configuration> 
```

与往常一样，Castle Windsor 很棒，但文档却不是，而且您在网络上找到的许多不同版本的示例也不会让它变得更容易......

# c - 如何在 if 语句中初始化一个变量并在 if 语句之外使用它

> ID：13881329
> 
> 赞同：1
> 
> 时间：2012-12-14T15:12:07.590
> 
> 标签：c, variables, scope, constants, global

我试图`int`只用一个特定的值初始化一个并重复使用它。

```
void some_method(int par){
    int ch=1;
  if (ch==1){
    int x = par;
  }
  int y = x + 2;
} 
```

我知道这段代码肯定行不通，因为`x`它只在 if 语句的范围内。**some_method()**在 while 循环中被重复调用，所以如果我`x`在 if 语句之外声明，那么每次调用**some_method()**时，默认为零。我只想`x`保持不变。我想过只做`x`一个全局变量，但我相信肯定有比这更好的解决方案。任何建议都会有所帮助！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:14:56.563

这可以通过`static`变量来完成：

```
void some_method(...)
{
  static int initialized = 0, x;

  if(!initialized)
  {
    x = ...
    initialized = 1;
  }
  /* Use x. */
} 
```

请注意，您需要为`initialized`每次调用的检查“付费”，但如果计算 的值的工作`x`足够昂贵，那么它可能是值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:15:20.147

您可以在 if 块之外声明变量“x”，但将其声明为静态：

```
void some method (some parameter) {
    static int x = some_default_value; // this is your default value
    inx y = x + 2;
 } 
```

或者，如果您只在那里使用您的代码，并且 x 是一个常量，您可以使用`#define`您的方法外部定义它。

# sql-server - 如何使用 SQL Server 数据库项目

> ID：13881331
> 
> 赞同：12
> 
> 时间：2012-12-14T15:12:17.093
> 
> 标签：sql-server, sql-server-data-tools

我正在运行安装了 SSDT（SQL Server Data Tools）的 SQL Server 2012 和 VS 2010。我的开发数据库使用存储的过程、函数、CLR 对象等。它有大约 500GB 的产品数据快照。

我创建了 SQL Server 数据库项目，然后导入了数据库。这在模式名称下创建了所有表、视图、过程和函数文件。很棒的东西——现在我可以像在其他 VS 项目中一样进行版本控制，创建部署等。到目前为止，一切都很好。

但是，我对在 SQL Server 数据库项目下更改/添加过程/表的开发过程应该是什么感到困惑。看来我所做的任何更改都应用于某些 LocalDb/Projects 数据库而不是我的开发数据库。

我是否想在该 LocalDb 中创作我的所有对象，然后通过 Publish 构建并部署到我的开发数据库？我担心开发数据库中的现有表，因为如果发布过程删除并重新创建表，我将丢失我的产品数据快照。

SQL Server 数据库项目中要遵循的正确开发过程是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-06T19:52:13.873

将源数据库（在您的情况下，您的数据库项目）视为部署后的“待定”状态。启动部署时，可执行文件 (SqlPackage.exe) 将源与目标进行比较，并生成差异/增量脚本以使目标看起来像源。这就是我们不再需要指定`CREATE`or的原因`ALTER`；工具算出来了。要回答有关持续开发的问题，您可以采用任何一种方式进行开发。您可以在项目文件中进行开发并将它们发布到通用开发数据库（例如，如果您在团队中），或者您可以使用 SQL Server Management Studio (SSMS) 等工具在数据库中进行开发并与项目文件同步与模式比较（我使用后一种技术，因为我喜欢 SSMS）。

对于部署，您必须在执行部署的机器上安装 SSDT（SSDT 随 SQL Server 2012 及更高版本提供；我不了解 SQL Server 2008）。您可以创建脚本来简化部署。您实际上将使用操作和源调用 SqlPackage.exe（它位于 x:\Program Files (x86)\Microsoft SQL Server\nnn\DAC\bin）。我也使用发布配置文件来处理大多数命令属性。因此，示例部署可能如下所示：

```
SqlPackage.exe /Action:Publish /SourceFile:MyDatabase.dacpac /Profile:MyProfile.publish.xml 
```

有关详细信息：SQL Server 数据工具文档 [http://msdn.microsoft.com/en-us/library/hh272686(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/hh272686(v=vs.103).aspx)

SqlPackage.exe 文档 [http://msdn.microsoft.com/en-us/library/hh550080(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/hh550080(v=vs.103).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T16:20:22.127

1.  在 VS DB 项目中进行更改。

2.  将更改部署到 localDB 以进行测试

3.  将数据库发布到生产服务器。我更喜欢使用 Schema Compare 手动执行此操作，但您也可以通过右键单击 --> 发布菜单（这也将创建发布配置文件）或使用命令行参数来发布项目。发布过程不会删除并创建表（除非您告诉它删除并重新创建整个数据库）。

或者，在项目设置中，您可以更改连接字符串以指向您的生产服务器（如评论中所指出的）。但是，我建议不要这样做，因为它会在您每次运行本地构建 (F5) 时尝试发布到生产服务器。

# eclipse - Eclipse 颜色主题 - 在 jsp 编辑器中难以阅读 javascript

> ID：13881334
> 
> 赞同：3
> 
> 时间：2012-12-14T15:12:20.940
> 
> 标签：eclipse, eclipse-plugin, themes

我一直在使用 Eclipse 颜色主题插件，到目前为止它很棒 - 但是有一个问题/设置我似乎无法弄清楚如何更改 - 当我尝试在 jsp 页面中编辑 javascript 时发生这种情况 - 当我选择了深色主题（在本例中为 Monokai），Eclipse 使用带有浅色突出显示的 javascript 标签突出显示代码（见附图）。

有谁知道我是否可以在 eclipse 中更改设置以更改或删除它，或者是否可以更改？

![难以阅读的亮点](../Images/6781d94a40177b9a90176f25159ff2e8.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T00:03:20.113

我也遇到了这个问题。

简短答案：窗口 -> 首选项 -> MyEclipse -> 文件和编辑器 -> Javascript -> 编辑器 -> 语法着色 -> 背景

更多答案：您必须四处逛逛，但似乎所有内容都在 Window -> Preferences 路径中的*某个*位置，而不一定是其他相关内容所在的位置。

例如，一个部分用于 html，一个用于 jsps，另一个用于这两个部分中的所有 javascript。一个用于全局默认值（其他人继承......有时）等。要寻找的关键短语是“编辑器” - 然后你知道你可能能够配置某些东西的颜色。

# asp.net-mvc - 对象引用未设置为模型中下拉列表的对象实例

> ID：13881338
> 
> 赞同：1
> 
> 时间：2012-12-14T15:12:48.927
> 
> 标签：asp.net-mvc, razor

我不知道为什么会发生这种情况，我已经设置了值并对其进行了调试，但它只是没有将信息从控制器传递到视图。这是发生了什么

模型：

```
public class QueueFilterModel
{
    public string SelectedFilter { get; set; }
    public string query { get; set; }
    public List<string> MyFilterList { get; set; } 

} 
```

控制器：

```
[HttpGet]
    public ActionResult Queue()
    {
        QueueFilterModel model = new QueueFilterModel()
        {
            SelectedFilter = "All",
            query = "SELECT * FROM [CHAVI].[dbo].[TicketQueue]",
            MyFilterList = new List<string>()

        };
        model.MyFilterList.Add("All");
        model.MyFilterList.Add("Open");
        model.MyFilterList.Add("Closed");

        return View();
    } 
```

看法：

```
@model RazorARPP.Models.QueueFilterModel
@{
ViewBag.Title = "Queue";
}

<h2>Queue</h2>

    <form action="" method="post" enctype="multipart/form-data" id="MyForm">

        Filter
        <div>
            Filter Options:
        </div>
        <div>
            @Html.DropDownList("test", new SelectList(Model.MyFilterList,Model.SelectedFilter))
        </div>

            <h3>Insert Instructions Here</h3>
                @{
                    var DB = Database.Open("CHAVI");
                    var grid = new WebGrid(DB.Query("SELECT * FROM [TicketQueue]"), null, null, 20);

                    @grid.GetHtml(
                        tableStyle: "webgrid",
                        columns: grid.Columns(
                        grid.Column(header: "Link", style: "labelcolumn", format: (item) => Html.ActionLink("Edit Item", "EditQueue", new { id = item.QueueID})),
                        grid.Column("Description", "Description"),
                        grid.Column("QueueDate", "QueueDate"),
                        grid.Column("Note", "Note"),
                        grid.Column("Status", "Status"),
                        grid.Column("LastUpdated", "LastUpdated")
                            )
                    )
                 }
    </form> 
```

网格部分工作正常（和查询）。问题出在下拉列表中，那里没有设置任何内容。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:15:50.323

您不是将模型传递给查看吗？

不应该

```
public ActionResult Queue()
    {
        QueueFilterModel model = new QueueFilterModel()
        {
            SelectedFilter = "All",
            query = "SELECT * FROM [CHAVI].[dbo].[TicketQueue]",
            MyFilterList = new List<string>()

        };
        model.MyFilterList.Add("All");
        model.MyFilterList.Add("Open");
        model.MyFilterList.Add("Closed");

        return View(model);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:16:54.927

尝试使用：-

```
public ActionResult Queue()
{
    QueueFilterModel model = new QueueFilterModel()
    {
        SelectedFilter = "All",
        query = "SELECT * FROM [CHAVI].[dbo].[TicketQueue]",
        MyFilterList = new List<string>()

    };
    model.MyFilterList.Add("All");
    model.MyFilterList.Add("Open");
    model.MyFilterList.Add("Closed");

    return View(model);
} 
```

# php - 具有随机顺序添加其他图像的区域的图像

> ID：13881345
> 
> 赞同：1
> 
> 时间：2012-12-14T15:13:14.423
> 
> 标签：php, javascript, jquery, image, image-processing

我有一个带有某种形状对象的背景图像（下面的示例）。我想向该图像添加新图像 - 图层（具有位置：绝对 - 左/上的简单 div），并且仅在我想要的形状上。

![第一个样本](../Images/7ec65ee0b835e10a9fade6a9c41d858e.png)

然后使用 PHP 代码将图像（例如 10、50、..）添加到这个形状而不是其他位置：

![第二个例子](../Images/ddb15e2c0b7f6eadf046dc67c4553174.png)

这可以用 PHP/JS/jquery/... 以任何简单的方式完成吗？我只需要传递多少项目和多少图像被添加到该区域......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:31:57.720

这是我的答案的完整重写。

给定一张随机图片，仅在一些匹配的地方拟合许多*较小的*`color`图片：

我决定用螃蟹作为起始图片，因为螃蟹很酷：

![螃蟹](../Images/bc7117b5f81a2fae1e783b31106638a3.png)

我只想在图片中有蓝色的地方添加红点

![红点](../Images/e5b816bab3725434e7bc4e5b0839c40c.png)

为此，我将我的答案分为 3 个部分：

**HTML**

我从一个非常简单的 HTML 文件开始：

```
<html>
    <head>
        <title>Crab Example</title>
    </head>
    <body>
        <div>
            <h1>Dots on the crab example</h1>
        </div>
        <div id="crabSection">
            <img src="crab.png">
        </div>
    </body>
</html> 
```

这给了我们一个渲染我们的虚线螃蟹的起点！

**PHP**

现在，在 PHP 中，我打开 my`crab.png`和 my`dot.png`来分析它们的内容，并找到`dot.png`可以放入某个`all blue`部分的随机位置。在 之后`<img src="crab.png">`，我插入了以下内容：

```
<?php
        $crab = imagecreatefrompng("crab.png");
        $dot = imagecreatefrompng("dot.png");

        $numDesiredDots = 10;
        $numCreatedDots = 0;

        $crabWidth = imagesx($crab);
        $crabHeight = imagesy($crab);

        $dotWidth = imagesx($dot);
        $dotHeight = imagesy($dot);

        $spawnableWidth = $crabWidth - $dotWidth;
        $spawnableHeight = $crabHeight - $dotHeight;

        srand(time());

        $testingForDotSubpart = imagecreatetruecolor($dotWidth, $dotHeight);

        $validCoordinates = array();
        $invalidCoordinates = array();

        $colorWereLookingFor = 0xFF; // ARGB - our crab is blue 
```

在这里，一些细节：

*   `$numDesiredDots`硬编码为 10，但它很容易成为一个参数！
*   `$spawnableWidth`并表示a可以放在不走出图片`$spawnableHeight`的最大坐标`dot`
*   `srand(time());`只是用来每次都有不同的随机数
*   `$testingForDotSubpart`是一个小图像，我将使用它来测试给定坐标，看看它是否只包含正确颜色的像素
*   `$colorWereLookingFor`设置为`blue`现在，因为我的螃蟹是蓝色的，如果你想要`red`，它应该是类似的`0xFF0000`。对于这个例子，我对 HTML 和图像处理使用了相同的 PNG，但您可以轻松地为图像处理创建一个遮罩，并为 HTML 制作一个全彩色图像。

现在，我们需要为每个点创建有效坐标，使用以下 php 完成：

```
 while($numCreatedDots < $numDesiredDots)
        {
            $randomX = rand() % $spawnableWidth;
            $randomY = rand() % $spawnableHeight;

            imagecopy($testingForDotSubpart, $crab, 0, 0, $randomX, $randomY, $dotWidth, $dotHeight);
            $valid = true;
            for($x = 0; $x < $dotWidth; $x++)
            {
                for($y = 0; $y < $dotHeight; $y++)
                {
                    if(imagecolorat($testingForDotSubpart, $x, $y) != $colorWereLookingFor)
                    {
                        $valid = false;
                        break 2;
                    }
                }
            }

            if($valid)
            {
                array_push($validCoordinates, array('x' => $randomX, 'y' => $randomY));
                $numCreatedDots++;
            }
            else
            {
                // you can get rid of this else, it's just to show you how many fails there are
                array_push($invalidCoordinates, array('x' => $randomX, 'y' => $randomY));
            }
        } 
```

再次，一些解释：

*   只要我们没有创建我们想要的所有点，我们就会迭代，对于非常复杂的图像，这可能会花费太多时间，您可以添加最大尝试次数
*   我们首先创建一个随机`X,Y`坐标
*   我们复制点可能结束的小窗口
*   我们测试此窗口内的所有像素以确保它们具有正确的颜色
*   如果窗口有效，我们将坐标添加到数组中
*   出于调试目的，我添加了一个`$invalidCoordinates`数组来显示失败的尝试次数 - 图片越复杂，失败的次数就越多

现在我们已经计算了所有的位置，我们需要清理资源：

```
 imagedestroy($testingForDotSubpart);
        imagedestroy($dot);
        imagedestroy($crab); 
```

最后，我添加了一些你可以摆脱的调试输出，但我们需要输出螃蟹上的点！为了向您展示每个点都是唯一的，我附上了一个`JavaScript` `alert`显示点索引的内容：

```
 echo "<p>Valid Coords: <br>";

        foreach($validCoordinates as $coord)
        {
            echo "X: " . $coord['x'] . " Y: " . $coord['y'] . "<br>\n";
        }

        echo "<br>Invalid Coords " . count($invalidCoordinates) . "</p>\n";

        // Now add the dots on the crab!
        for($i = 0; $i < count($validCoordinates); $i++)
        {
            $coord = $validCoordinates[$i];
            echo "<div class='dot' style='left:".$coord['x'].";top:".$coord['y'].";'><a href='javascript:alert(".$i.");'><img src='dot.png'></a></div>\n";
        }        
?> 
```

在这里，我使用`style` `left`and`top`为点提供精确的像素定位。为了让它们与父图片精确匹配，我们需要使用`position:relative;`和`position:absolute;`，如下一节所述。

**CSS**

如您所见，我正在为 . 使用一个类`div`，这是为了利用`relative positioning`. 我在文件顶部的标题之后添加了以下内容

```
 #crabSection { position:relative; }
        .dot { margin: 0px 0px 0px 0px; position:absolute; } 
```

**结果**

这是给定脚本的运行...您可以轻松保存生成的 HTML，这样您就不必每次都重新计算位置：

![浏览器](../Images/2cc6abf14bdc18c304f815bde9e75318.png)

希望这可以帮助！

**编辑**：这里是完整的代码，如果你需要的话：[pastebin](http://pastebin.com/2HRrq7PC)

**编辑 2** ：请注意，没有重叠检查，您可能需要检查由`$randomX`,和定义的矩形是否与.`$randomY``$randomX + $dotWidth``$randomY + $dotHeight``$validCoordinates`

**编辑3**：生成后，您只需打开页面的源代码，然后将其复制`div`到您的`HTML`，这样就不会每次都重新生成。

```
<div class='dot' style='left:100;top:105;'><a href='javascript:alert(0);'><img src='dot.png'></a></div>
<div class='dot' style='left:150;top:151;'><a href='javascript:alert(1);'><img src='dot.png'></a></div>
<div class='dot' style='left:128;top:73;'><a href='javascript:alert(2);'><img src='dot.png'></a></div>
<div class='dot' style='left:144;top:93;'><a href='javascript:alert(3);'><img src='dot.png'></a></div>
<div class='dot' style='left:164;top:91;'><a href='javascript:alert(4);'><img src='dot.png'></a></div>
<div class='dot' style='left:108;top:107;'><a href='javascript:alert(5);'><img src='dot.png'></a></div>
<div class='dot' style='left:22;top:101;'><a href='javascript:alert(6);'><img src='dot.png'></a></div>
<div class='dot' style='left:54;top:151;'><a href='javascript:alert(7);'><img src='dot.png'></a></div>
<div class='dot' style='left:32;top:121;'><a href='javascript:alert(8);'><img src='dot.png'></a></div>
<div class='dot' style='left:142;top:87;'><a href='javascript:alert(9);'><img src='dot.png'></a></div> 
```

另外，只要用`$crab`PHP打开图片描述的颜色蒙版，`img src`如果你想要一只五颜六色的螃蟹，你可以把它改成别的。我添加了一个`crabc.png`现在由 my 使用的文件`img`，但它仍然具有与该文件相同的轮廓`crab.png`：

![彩色螃蟹](../Images/c86f908e2540f7fbc761ae3bd96d420a.png)

这给出了最终的外观：

![带颜色的浏览器](../Images/1e189f5be302122896cb2f500c003c59.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:18:30.230

嗯，我不确定是否可以添加它们以适应形状，除非该形状是在 svg 中创建的。

你可以有一个带有图像的 div，它是一个倒置的箭头，即图像是白色的，箭头被剪掉，div 上有一个 bgcolor。

然后你可以将这些点添加到同一个 div 中，并将它们的 z-index 设置为低于箭头图像。

然后这些点只会出现在箭头中，唯一的问题是一些可能会被添加但不可见（只有当您需要用户与它们交互时才会出现问题）。

你到底想用这些点做什么？

# android - 如何使用cometd协议在android中调用cometD api

> ID：13881346
> 
> 赞同：0
> 
> 时间：2012-12-14T15:13:14.373
> 
> 标签：android, api, cometd

我想在我的 android 应用程序中使用 CometD api。我已经有一个 CometD api。我只想调用它并分享一些数据。

那么我如何在我的 android 应用程序中使用。请给我一个标准且耗时的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T21:59:19.830

您可以通过两种方式在 Android 上使用[CometD](http://cometd.org)：构建 Web 应用程序并使用[JavaScript 客户端 API](http://docs.cometd.org/reference/#javascript)，或者构建本机应用程序并使用[Java 客户端 API](http://docs.cometd.org/reference/#java_client)。

查看 CometD 附带的演示，它使用 Java 客户端 API构建了一个[简单的聊天应用程序。](https://raw.github.com/cometd/cometd/2.5.x/cometd-java/cometd-java-examples/src/main/java/org/cometd/examples/ConsoleChatClient.java)

# asp.net-mvc-4 - DapperExtensions DefaultMapper 不工作

> ID：13881352
> 
> 赞同：0
> 
> 时间：2012-12-14T15:13:30.723
> 
> 标签：asp.net-mvc-4, dapper

我有以下代码

```
class Program 
{
static void Main(string[] args)
{

    static void Main(string[] args)
    {
       DapperExtensions.DapperExtensions.DefaultMapper = typeof(CodeCustomMapper);

    string sql = "select UserID,Name as SName , Email ,Email as wmail from dbo.[User]";

       using (SqlConnection connection = new SqlConnection(conn))
        {
                         var result = connection.Query<User>(sql
                , commandType: CommandType.Text);

                        }

               }
      }

public class CodeCustomMapper: ClassMapper<User>
{

    public CodeCustomMapper()
    {

        base.Table("User");
        Map(f => f.UserID).Key(KeyType.Identity);
        Map(f => f.Name).Column("SName");
        Map(f => f.Name).Column("TName");
        Map(f => f.EmailID).Column("wmail");
        Map(f => f.EmailID).Column("Email");
    }
} 
```

手动映射列的输出为 NULL。即使我已经分配了默认映射器。是写方式吗？

使用实体属性手动映射数据库列的任何其他方式？

请问有人可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:45:47.733

看起来您只是使用了错误的扩展方法。

> Dapper Extensions 是一个小型库，通过为您的 POCO 添加基本的 CRUD 操作（获取、插入、更新、删除）来补充 Dapper。

尝试使用`connection.Get<User>`

# iphone - 如何打印 NSObject 的所有声明属性的值？

> ID：13881353
> 
> 赞同：6
> 
> 时间：2012-12-14T15:13:31.520
> 
> 标签：iphone, objective-c, ios, runtime

我想重写我的对象的描述方法，以便能够打印我声明的所有属性的值。我知道我可以通过将所有值一个一个地附加到彼此来做到这一点，但是如果您有很多属性，有时这会很耗时。

我想知道是否有一种简单的方法可以通过 Objective-C 的运行时功能获得帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T15:17:13.763

你试过[这个解决方案](http://forrst.com/posts/Getting_a_dictionary_of_an_NSObjects_property_n-h2T)吗？

```
#import <Foundation/Foundation.h>
#import <objc/runtime.h>

@interface NSObject (PropertyListing)

// aps suffix to avoid namespace collsion
//   ...for Andrew Paul Sardone
- (NSDictionary *)properties_aps;

@end

@implementation NSObject (PropertyListing)

- (NSDictionary *)properties_aps {
    NSMutableDictionary *props = [NSMutableDictionary dictionary];
    unsigned int outCount, i;
    objc_property_t *properties = class_copyPropertyList([self class], &outCount);
    for (i = 0; i < outCount; i++) {
        objc_property_t property = properties[i];
        NSString *propertyName = [[[NSString alloc] initWithCString:property_getName(property)] autorelease];
        id propertyValue = [self valueForKey:(NSString *)propertyName];
        if (propertyValue) [props setObject:propertyValue forKey:propertyName];
    }
    free(properties);
    return props;
}

@end 
```

# iphone - HTML5 - 打开数字键盘 iPhone

> ID：13881355
> 
> 赞同：0
> 
> 时间：2012-12-14T15:13:36.670
> 
> 标签：iphone, html, input

> **可能重复：**
> [HTML5 表单输入模式货币格式](https://stackoverflow.com/questions/5963158/html5-form-input-pattern-currency-format)

有没有办法使用 input type="text" 打开数字键盘？我知道 type="number" 会打开数字键盘，但它不会占用货币值。例如，如果您输入 1.00，它会在 iOS 产品上变为 1。此外，这只发生在 iOS 设备上。它适用于 Android 和所有网络浏览器。

我试过玩 patterns 和 patterns="[1-9]*" 打开电话号码板。有没有可能会打开数字键盘？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:16:44.910

尝试使用这个，它应该在 iOS 中打开数字键盘（同时在 Android 中打开数字输入键盘）：

```
<input type="number" step="0.01"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:47:53.893

回答：

1.  是的 nput type="text" 存在于 html5 [http://www.w3schools.com/html/html5_form_input_types.asp](http://www.w3schools.com/html/html5_form_input_types.asp)

2.  [type="number" 可以使用 jquery http://www.w3schools.com/jsref/jsref_tofixed.asp](http://www.w3schools.com/jsref/jsref_tofixed.asp)格式化为两位小数`.toFixed(2)`

3.  jquery mobile 不是您选择的语言，但它确实为某些输入自定义键盘，例如日期您可能想尝试一下，它与 html [http://jquerymobile.com/非常相似](http://jquerymobile.com/)

# pdf - 重新加载到 IE 窗口的 Cfdocument pdf 变为空白

> ID：13881358
> 
> 赞同：2
> 
> 时间：2012-12-14T15:13:48.260
> 
> 标签：pdf, coldfusion, coldfusion-9, cfdocument

我有一些按钮可以在浏览器中内联生成 PDF 文件。

这些按钮将第一次打开一个新窗口并正确生成 PDF。

但是，如果您单击任何其他按钮来生成 PDF 文件，这会重新加载第二个浏览器窗口，它在 IE 中将变为空白。但是，它可以在 Google Chrome 中使用。

这是我的两个按钮

```
<form target="blank" action="create_label.cfm" method="post">
<input type="hidden" value="Doe, John" name="full_name">
<input type="hidden" value="11 Test Ave" name="street_line1">
<input type="hidden" value="Testville, CA 00123" name="street_line3">
<button class="btn btn-small btn-success" type="submit">

<form target="blank" action="create_label.cfm" method="post">
<input type="hidden" value="Doe, Jane" name="full_name">
<input type="hidden" value="12 Test Ave" name="street_line1">
<input type="hidden" value="Testville, CA 00123" name="street_line3">
<button class="btn btn-small btn-success" type="submit"> 
```

如您所见，每个按钮都将地址信息发送到 create_label.cfm

第一次单击按钮时，它会打开空白窗口并以 pdf 格式加载表单数据。

如果我然后返回并再次单击任一按钮，窗口将更新然后变为空白。虽然只在 IE 中。如果我在 Chrome 中执行此操作，它实际上会使用正确的地址更新 pdf。

这是 create_label.cfm 代码

```
<cfdocument format="PDF" localurl="no" marginTop=".1" marginLeft=".1" marginRight=".1" marginBottom=".1" pageType="custom" pageWidth="2.625" pageHeight="2.0" overwrite="true"> 
<table width="225px" border="0" cellspacing="2" cellpadding="2"> 
<cfoutput>
<cfif isDefined('form.full_name')>
   <span style = "font-size:12px">#form.full_name#</span><br />
   </cfif>
   <cfif isDefined('form.street_line1')>
   <span style = "font-size:12px">#form.street_line1#</span><br />
   </cfif>
   <cfif isDefined('form.street_line2')>
    <span style = "font-size:12px">#form.street_line2#</span><br /> 
    </cfif>
    <cfif isDefined('form.street_line3')>
    <span style = "font-size:12px">#form.street_line3#</span><br /> 
    </cfif>
    <cfif isDefined('form.street_line4')>
    <span style = "font-size:12px">#form.street_line4#</span><br /> 
    </cfif>
    </cfoutput>
        </table>
        </cfdocument> 
```

任何想法为什么 IE 不允许这样做？它是否在 IE 和 Adob​​e 之间缓存了一些东西？

谢谢，托尼

# ruby-on-rails - 带有 Bourbon 和 Neat gem 的未定义混合

> ID：13881362
> 
> 赞同：8
> 
> 时间：2012-12-14T15:14:00.650
> 
> 标签：ruby-on-rails, sass, assets, bourbon, neat

我正在使用**波旁威士忌**和**整洁**的宝石来创建 Rails 应用程序的设计。我的 application.css.scss 包含以下内容：

```
 @import "bourbon";
 @import "neat";
 @import "main"; 
```

但是，如果我运行“rake assets:precompile”，则会发生此错误：

```
rake aborted!
Undefined mixin 'outer-container'.
(in /Users/anonymous/example/app/assets/stylesheets/admin/main.css.scss)
/Users/anonymous/example/app/assets/stylesheets/admin/main.css.scss:5:in  `outer-container'
/Users/anonymous/example/app/assets/stylesheets/admin/main.css.scss:5 
```

文件 main.css.scss 包含以下内容：

```
footer#page_footer { 
 @include outer-container;
 nav{
  @include span-columns(6);
  @include shift(3);
  section#about_me_footer, section#contact_footer, section#miscellaneous_footer {
  @include span-columns(2 of 6);
 }
}
p {
 @include span-columns(6);
 @include shift(3);
}
} 
```

有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T03:06:59.890

我遇到了同样的问题。我能够让它以两种不同的方式工作。

第一种方法可能不太理想，但您可以直接在 application.css.scss 文件中添加代码：

```
div.container {
  @include outer-container;
} 
```

或者，您可以添加：

```
@import "bourbon";
@import "neat"; 
```

到 main.css.scss 文件的顶部。
这使您可以保持样式井井有条。

波旁威士忌网站链接到他们 wiki 中有关此问题的页面，但提到的解决方案对我不起作用：

[https://github.com/thoughtbot/bourbon/wiki/Rails-Help-%5C-Undefined-mixin](https://github.com/thoughtbot/bourbon/wiki/Rails-Help-%5C-Undefined-mixin)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-16T15:56:42.480

我有同样的问题。我的解决方案是将部分文件从 重命名`layout.css.scss`为`_layout.css.scss`. 任何使用 SASS 混合的文件都需要在加载这些混合后包含在内。在这种情况下，它试图`layout.css`单独预编译文件，尽管它不需要它所引用的混合的源。添加下划线使预编译器忽略该文件，直到另一个文件需要它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-19T21:00:24.510

根据[更改日志](https://github.com/thoughtbot/neat/blob/master/CHANGELOG.md)，从 2.0.0 版开始，`outer-container`mixin 已被删除。您可以使用的最高版本`outer-container`是 1.8.0。通过 Bundler 添加 Neat 时，您将获得 2.0 或更高版本，除非您在 Gemfile 中指定版本。

执行此操作的[新方法](https://neat.bourbon.io/docs/latest/)看起来要简单得多，但如果您有一堆不受支持的 scss，那就不太舒服了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T20:35:07.517

FWIW这是报告的问题[https://github.com/thoughtbot/bourbon/issues/120](https://github.com/thoughtbot/bourbon/issues/120)，使用jacklin关于将导入语句直接添加到我的主css文件的评论解决了它。但是，我想解决这个问题，因为我真的不想继续将这些导入语句添加到我希望使用 mixins 的每个文件中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-14T11:33:43.357

我曾经也有过一样的问题。

我有一个使用@include 外部容器的div，还有一个包含@include span-columns(8) 的div。第二个 div 错误地坐在第一个之外，产生误导性错误“Undefined mixin 'outer-container'”。将第二个 div 移入第一个（在外部容器内 - 在 CSS 和 HTML 中）纠正了问题。

对于上述问题，您必须通过确保 p 标签是页脚的子标签来做同样的事情。

# c# - 将大型 xml 文件插入 xml 列的最佳方法（在远程 SQL Server 上）

> ID：13881384
> 
> 赞同：15
> 
> 时间：2012-12-14T15:15:39.770
> 
> 标签：c#, sql-server, xml, insert, stream

假设我有一个这样的表：

```
CREATE TABLE [dbo].[TBL_XML]
(
   [XmlFileID]       [BIGINT] IDENTITY (1, 1) NOT NULL,
   [FileName]        [NVARCHAR](500) NULL,   
   [XmlData]         [XML] NULL,
   [DateCreated]     [DATETIME] NOT NULL,
) 
```

我目前用来填表的方法是这样的：

```
using (SqlCommand cmd = new SqlCommand())
{
    cmd.CommandText = @"INSERT INTO [dbo].[TBL_XML] 
                                    ( [XmlData] , 
                                    [FileName] , 
                                    [DateCreated]
                                    ) 
                        VALUES (@XMLData, @FileName, GETDATE())";

    using (var xmlReader = new XmlTextReader(new FileStream(item.XmlFileName, FileMode.Open)))
    {
        cmd.Parameters.Add("@FileName", SqlDbType.NVarChar, 500).Value = System.IO.Path.GetFileName(item.XmlFileName);
        cmd.Parameters.Add(
        new SqlParameter("@XMLData", SqlDbType.Xml)
        {
            Value = new SqlXml(xmlReader)
        });

        SetConnectionParameters(cmd);

        cmd.ExecuteScalar());
    }
} 
```

但这不适用于非常大的 XML，因为整个文件都加载到内存中，并且出现 OutOfMemory 异常。

将大型 (>100MB) XML 文件从运行在与服务器不同的计算机上的 .net 应用程序插入 XMLData 列的最佳方法是什么？

批量插入是不可能的，因为 SQL 服务器将无法访问我的 XML 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T18:14:34.810

以下是仅使用 .NET 进行分块的一种潜在方法。我没有尝试执行此操作，但它应该可以工作。

```
 public static ChunkedXmlInsert(XmlItem item)
    {
        int bufferSize = 65536;

        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            CreateTempTable(connection);

            int position = 0;
            using (StreamReader textStream = File.OpenText(item.XmlFileName))
            {
                char[] buffer = new char[bufferSize];
                int length = textStream.Read(buffer, position, buffer.Length);
                long id = InsertFirstBlock(connection, new string(buffer, 0, length));

                while (textStream.EndOfStream == false)
                {
                    position += length;
                    length = textStream.Read(buffer, position, buffer.Length);
                    AppendBlock(connection, id, new string(buffer, 0, length));
                }
            }

            CopyRecordFromTemp(connection, id);
        }
    }

    private static void CreateTempTable(SqlConnection connection)
    {
        using (SqlCommand command = connection.CreateCommand())
        {
            command.CommandType = CommandType.Text;
            command.CommandText = @"CREATE TABLE #TBL_XML (
                                                              [XmlFileID] [BIGINT] IDENTITY (1, 1) NOT NULL PRIMARY KEY,
                                                              [FileName] [NVARCHAR](500) NULL,
                                                              [XmlData] [NVARCHAR(MAX)] NULL,
                                                              [DateCreated] [DATETIME] NOT NULL
                                                          )";
            command.ExecuteNonQuery();
        }
    }

    private static long InsertFirstBlock(SqlConnection connection, string text)
    {
        using (SqlCommand command = connection.CreateCommand())
        {
            command.CommandType = CommandType.Text;
            command.CommandText = @"INSERT INTO #TBL_XML
                                                        ( [XmlData] , 
                                                          [FileName] , 
                                                          [DateCreated]
                                                        ) 
                                        VALUES (@XMLData, @FileName, GETDATE()); SELECT SCOPE_IDENTITY()";

            command.Parameters.AddWithValue("@FileName", System.IO.Path.GetFileName(item.XmlFileName));
            command.Parameters.AddWithValue("@XmlData", text);
            return (long)command.ExecuteScalar();
        }
    }

    private static void AppendBlock(SqlConnection connection, long id, string text)
    {
        using (SqlCommand command = connection.CreateCommand())
        {
            command.CommandType = CommandType.Text;
            command.CommandText = @"UPDATE #TBL_XML
                                            SET XmlData = XmlData + @xmlData
                                    WHERE XmlFileID = @XmlFileID";

            command.Parameters.AddWithValue("@XmlData", text);
            command.Parameters.AddWithValue("@XmlFileID", id);
            command.ExecuteNonQuery();
        }
    }

    private static long CopyRecordFromTemp(SqlConnection connection, long id)
    {
        using (SqlCommand command = connection.CreateCommand())
        {
            command.CommandType = CommandType.Text;
            command.CommandText = @"INSERT INTO [dbo].[TBL_XML] ([XmlData], [FileName], [DateCreated])
                                    SELECT CONVERT(xml, [XmlData]), [FileName], [DateCreated]
                                    FROM #TBL_XML
                                    WHERE XmlFileID = @XmlFileID; SELECT SCOPE_IDENTITY()";
            return (long)command.ExecuteScalar();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:57:19.417

本文提供了使用 LOB 的一些背景信息。 [检查这个](http://msdn.microsoft.com/en-us/library/a1904w6t%28VS.80%29.aspx)

我刚刚使用 xml 字段测试了 OPENROWSET BULK 语法，它可以工作。如果您的 SQL 服务器有权访问该文件，这是一个选项（我刚刚注意到它不是一个选项，所以我将进行更多实验）。否则，您将需要尝试偏移写入解决方案。到目前为止，我无法让该 .WRITE 方法与 xml 字段一起使用。

[本文](http://msdn.microsoft.com/en-us/library/ms191184%28SQL.105%29.aspx)表明您可以使用 BCP 插入 XML。这将需要安装 SQL Server 客户端工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T08:53:33.727

由于您需要在远程 SQL Server 上存储数据，因此您需要通过网络传输整个文件内容。一般有两种方式：

*   您将数据传输到远程服务器；
*   远程服务器从您的本地文件中读取数据。

第二种方式不在这个问题的范围内。假设您在远程服务器上实现存储过程，第一个可以通过多种方式完成：

*   实现“上传”功能，分部分传输数据，在服务器端加入它们并存储在数据库中；
*   在客户端打包XML内容，在服务器端解包和存储；
*   以上方法的组合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-08T11:59:06.333

`@xmlstring`是输入xml

```
INSERT INTO @Temptbl           
   SELECT CONVERT(varchar(12), e.query('./Name/text()')) LogNumber             
   FROM @xmlstring.nodes('//RootNode/Root') AS n(e)     

select Temptbl 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-21T17:00:38.053

您可以编写存储过程以将大型 xml 文件插入数据库。在该存储过程中，您可以将 xml 文件输入作为 nvarchar(max) 发送。请注意，nvarchar(max) 最多可以接受 8000 个字符。

在您的代码中，主要流程是您从文件流中传递 xml，这是非常昂贵的事情。

如果您的文件比 nvarchar(max) 大，那么您可以在存储过程中使用更多输入参数，然后连接这些输入参数以将单个值插入为 xml 文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-03T22:19:32.660

将 XML 加载到数据库中的最佳方法是不将 XML 加载到数据库中。如果你真的需要这样做（你可能不需要），你应该看看像 Cassandra 或 Mongo 这样的 noSQL 解决方案。

如果“需要”存储 XML，那么您很可能在其他地方做出了错误的架构选择。考虑是否有更好的方法来表示信息。XML 是一种交换格式，不是长期保存信息的好格式。

话虽如此，您可以使用支持流式传输的 BCP 或 OLEDB 接口。这是一个示例： [批量导入示例](https://msdn.microsoft.com/en-us/library/ms191184.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-21T18:04:13.373

似乎 SqlXml 参数类型接受 XmlReader 作为输入。

作为基于流的阅读器，这应该消除您遇到的内存限制。

```
using (SqlCommand cmd = new SqlCommand())
{
    SqlParameter sqlParameter = cmd.CreateParameter();
    sqlParameter.Direction = System.Data.ParameterDirection.Input;
    sqlParameter.Value = new System.Data.SqlTypes.SqlXml(xmlReader);
    ...
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-06T13:02:21.810

我认为您应该创建一个 SSIS 包来将您的 XML 文件导入 SQL Server 数据库。然后，如果您需要使用 C#，您可以通过编程方式执行此包。它会更有效率，它就像一个魅力。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-10T13:14:08.577

将 XML 文件存储在 FileTable 中。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-02-21T07:46:07.347

> 1）创建一个存储过程以插入表中。
> 2) 将您的 xml 作为 varchar(max) 从 C# 代码传递。

或者

> 2）把你的文件分成几块。
> 3) 以 XML 为参数执行 SP。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-06-10T00:56:20.730

请使用 sql xml 批量加载程序 [http://msdn.microsoft.com/en-us/library/ms171806.aspx](http://msdn.microsoft.com/en-us/library/ms171806.aspx)

# opengl - OpenGL：尝试使用 triangle_fan 创建一个实心圆柱体

> ID：13881386
> 
> 赞同：0
> 
> 时间：2012-12-14T15:15:46.080
> 
> 标签：opengl

我正在尝试使用三角形风扇创建一个实心圆柱体。到目前为止我所做的是：

```
float base = 0.5;
float height = 20;
float radius = 2.0f;
glBegin(GL_TRIANGLE_FAN);
for(float j=0; j<=height; j+=0.1)
{
    glVertex3f(0,j,0);
    for(int i=0; i<360; i++)
    {
        glVertex3f(radius*sin((float)i),j, radius*cos((float)i));
    }   
}
glEnd();
glPopMatrix(); 
```

问题出现在这 3 个屏幕截图中：

![在此处输入图像描述](../Images/11f2dd72e2f11417d9f98d303fa0b6af.png)
正如您在所有 3 个屏幕截图中看到的那样，似乎有一些空间，而不是一个实心圆柱体。
那样可以么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:14:00.423

```
for(int i=0; i<360; i++)
{
    glVertex3f
        (
        radius*sin((float)i),
        j, 
        radius*cos((float)i)
        );
} 
```

C 标准库`sin()`和`cos()`函数采用弧度，而不是度数。

尝试转换`(float)i`为弧度，然后再将其传递给`sin()/cos()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:23:09.770

您应该注意的第一件事（**编辑：**我稍微误读了您的代码。您对三角形风扇做得很好）是三角形风扇的工作原理是这样的：

```
glVertex: Center point
for each outer point p
    glVertex: p 
```

例如：

```
 p2__
                 /|   ---___p1
                /  |         /
               /    |       /
            p3/      |     /
              |\      |   /
              |   \    | /
               |     \_O   Center
               | __---
               p4 
```

第二件事是气缸由三部分组成：

```
 __
              /  \
              \__/        <---- circle on top (facing up)
              |  |
              |  |
              |  |
              |  |        <---- tube in the middle
              |  |
              |  |
              |  |
              \__/        <---- circle on the bottom (facing down) 
```

所以你需要的算法是：

```
/* top triangle */
glBegin(GL_TRIANGLE_FAN);
    glVertex3f(0, height, 0);  /* center */
    for (i = 0; i <= 2 * PI; i += resolution)
        glVertex3f(radius * cos(i), height, radius * sin(i));
glEnd();

/* bottom triangle: note: for is in reverse order */
glBegin(GL_TRIANGLE_FAN);
    glVertex3f(0, 0, 0);  /* center */
    for (i = 2 * PI; i >= 0; i -= resolution)
        glVertex3f(radius * cos(i), 0, radius * sin(i));
    /* close the loop back to 0 degrees */
    glVertex3f(radius, height, 0);
glEnd();

/* middle tube */
glBegin(GL_QUAD_STRIP);
    for (i = 0; i <= 2 * PI; i += resolution)
    {
        glVertex3f(radius * cos(i), 0, radius * sin(i));
        glVertex3f(radius * cos(i), height, radius * sin(i));
    }
    /* close the loop back to zero degrees */
    glVertex3f(radius, 0, 0);
    glVertex3f(radius, height, 0);
glEnd(); 
```

您尝试做的方式首先是不正确的，因为您实际上并没有制作一个圆柱体，而是堆叠了许多圆圈，其次是效率低下，因为您正在填充几乎不可见的空间（圆柱体内部）。

# sql - sql查询查找SQL中日期之间的记录的问题

> ID：13881388
> 
> 赞同：1
> 
> 时间：2012-12-14T15:15:49.457
> 
> 标签：sql

我有这个查询，我用它来获取两个日期之间的记录信息。

```
$start=$_REQUEST['from'];
$end=$_REQUEST['to'];
$startd = str_replace('/', '-', $start);
echo $start1=date('Ymd', strtotime($startd));
$endd = str_replace('/', '-', $end);
echo $end1=date('Ymd', strtotime($endd));
echo $data ="SELECT * from forma 
  WHERE DATE(data) BETWEEN '".$start1."' AND '".$end1."' ";
  $res = odbc_exec($connection, $data) or die(odbc_error()); 
```

我收到此错误：

```
]'DATE' is not a recognized built-in function name., SQL 
```

但是我如何在 SQL 中解决这个问题？ `data`是一种`varchar`类型。。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:22:07.257

您可以使用：

```
echo $data ="select * FROM forma WHERE STR_TO_DATE(data, '%d/%m/%Y') BETWEEN '".$start1."' AND '".$end1."' ; 
```

您还可以使用 mysql 函数添加额外的包装来创建您喜欢的日期格式。为此使用 date_format()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:19:15.380

如果`data`包含`Ymd`格式化的日期字符串，您应该能够：

```
$data="SELECT * from forma WHERE data BETWEEN '".$start1."' AND '".$end1."'"; 
```

您可以比较字符串：`'2012' > '2011'`和`'b' > 'a'`，在您的情况下，`'20121214' > '20120701'`例如 。

# python - 在 Python 中，什么是全局语句？

> ID：13881395
> 
> 赞同：40
> 
> 时间：2012-12-14T15:16:08.680
> 
> 标签：python, global

什么是**全局声明**？它是如何使用的？我已经阅读了[Python 的官方定义](http://docs.python.org/3/reference/simple_stmts.html#the-global-statement)；
但是，这对我来说没有多大意义。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-14T15:22:40.680

python 中的每个“变量”都被限制在一定的范围内。python“文件”的范围是模块范围。考虑以下：

```
#file test.py
myvariable = 5  # myvariable has module-level scope

def func():
    x = 3       # x has "local" or function level scope. 
```

具有局部作用域的对象在函数退出后立即消失并且永远无法检索（除非您`return`这样做），但在函数中，您可以访问模块级作用域（或任何包含作用域）中的变量：

```
myvariable = 5
def func():
    print(myvariable)  # prints 5

def func2():
    x = 3
    def func3():
        print(x)       # will print 3 because it picks it up from `func2`'s scope

    func3() 
```

但是，您不能对该引用使用赋值并期望它将传播到外部范围：

```
myvariable = 5
def func():
    myvariable = 6     # creates a new "local" variable.  
                       # Doesn't affect the global version
    print(myvariable)  # prints 6

func()
print(myvariable)      # prints 5 
```

现在，我们终于到了`global`。关键字是告诉 python 函数中的`global`特定变量是在全局（模块级）范围内定义的方式。

```
myvariable = 5
def func():
    global myvariable
    myvariable = 6    # changes `myvariable` at the global scope
    print(myvariable) # prints 6

func()
print(myvariable)  # prints 6 now because we were able 
                   # to modify the reference in the function 
```

换句话说，如果您使用关键字，您可以`myvariable`从内部更改模块范围内的值。`func``global`

* * *

顺便说一句，作用域可以嵌套任意深度：

```
def func1():
    x = 3
    def func2():
        print("x=",x,"func2")
        y = 4
        def func3():
            nonlocal x  # try it with nonlocal commented out as well.  See the difference.
            print("x=",x,"func3")
            print("y=",y,"func3")
            z = 5
            print("z=",z,"func3")
            x = 10

        func3()

    func2()
    print("x=",x,"func1")

func1() 
```

现在在这种情况下，没有在全局范围内声明任何变量，并且在 python2 中，没有（简单/干净）方法可以更改from within`x`范围内的值。这就是在 python3.x 中引入关键字的原因。 是它的扩展，允许您修改从另一个范围中提取的变量，无论它是从哪个范围中提取的。`func1``func3``nonlocal``nonlocal``global`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-26T12:16:15.997

mgilson 做得很好，但我想补充一些。

```
list1 = [1]
list2 = [1]

def main():
    list1.append(3)
    #list1 = [9]
    list2 = [222]

    print list1, list2

print "before main():", list1, list2
>>> [1] [1]
main()
>>> [1,3] [222]
print list1, list2    
>>> [1, 3] [1] 
```

在函数内部，Python 假定每个变量都是局部变量，除非您将其声明为全局变量，或者您正在访问全局变量。

```
list1.append(2) 
```

是可能的，因为您正在访问“list1”并且列表是可变的。

```
list2 = [222] 
```

是可能的，因为您正在初始化一个局部变量。

但是，如果您取消注释 #list1 = [9]，您将得到

```
UnboundLocalError: local variable 'list1' referenced before assignment 
```

这意味着您正在尝试初始化一个新的局部变量“list1”，但它之前已经被引用，并且您超出了重新分配它的范围。

要进入范围，请将“list1”声明为全局。

我强烈建议你阅读[这篇](http://www.python-course.eu/global_vs_local_variables.php)文章，即使最后有错字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:19:03.267

基本上它告诉解释器它给定的变量应该在全局级别而不是默认的本地级别进行修改或分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:20:55.257

```
a = 1

def f():
    a = 2 # doesn't affect global a, this new definition hides it in local scope

a = 1

def f():
    global a
    a = 2 # affects global a 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T15:22:25.867

您可以在其他函数中使用全局变量，方法是在修改它的每个函数中将其声明为全局变量

Python 想要通过明确要求 global 关键字来确保你真的知道你在玩什么。

看到[这个答案](https://stackoverflow.com/a/423596/808255)

# java - Jar 中的实用程序类在 EAR 中打包时找不到 EJB

> ID：13881397
> 
> 赞同：2
> 
> 时间：2012-12-14T15:16:14.510
> 
> 标签：java, jakarta-ee, glassfish-3, ear

我有一些跨 webapps 使用的核心功能打包在一个公共类 JAR 中。此 JAR 具有引用 EJB 的类和引用 CORE.jar 和 EJB.jar 的 Web 应用程序。

*   CORE.jar -> EJB.jar
*   WEBAPP.war -> CORE.jar
*   WEBAPP.war -> EJB.jar

我正在使用 Glassfish 3.1.2 部署在 Eclipse 开发插件中。

在我的部署日志中，我看到如下故障。严重：类 [ Lnet/webframeone/ejb/data/GeoLocationsBeanLocal; ] 未找到。加载 [ 类 net.webframeone.servlet.action.GetGeoLocation ] 时出错

这里的引用是从 CORE.jar 中的一个类到 EJB.jar 中的一个类。EAR 大致具有如下结构。

*   EJB.jar
*   WEBAPP.war
*   lib/CORE.jar

我尝试将类路径条目放在 CORE.jar 上的 manifest.mf 中，但无济于事。

如果我将 WEBAPP 与包含 CORE.jar 和 EJB.jar 的部署程序集打包在一起，并将其部署在 EAR 之外，它就可以正常工作。

任何想法都会被热情地排除在外！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T05:02:50.673

我不确定 GlassFish 服务器。我使用 JBoss。我在以下情况下看到了这个问题 -

1.  /META-INF/application.xml 没有正确提及所有模块。
2.  未为部署指定依赖项

# xml - 使用键函数将元素添加到 XML 无法使用 xslt

> ID：13881403
> 
> 赞同：4
> 
> 时间：2012-12-14T15:16:48.397
> 
> 标签：xml, xslt, position, key

我正在尝试使用 XSLT 中的“键”函数来提取一个值并将其添加到 XML 中的特定位置。但我没有做对。下面是输入和 XSLT。

请帮忙。

输入 XML：

```
<input  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xsi:noNamespaceSchemaLocation="nbA2.8.90.xsd">
            <info>User Info </info>
            <team>User Team </team>
            <nodeA id="test">
                <inodeAA> Sample </inodeAA>
                <inodeAB> Samples </inodeAB>
            </nodeA>
            <nodeA id="test2">
                <inodeAA> Sample </inodeAA>
                <inodeAB> Samples </inodeAB>
            </nodeA>
            <ns3:output xmlns:ns3="http://mysample.org">
                <ns3:reply id="test">
                    <ns3:pkey>55555</ns3:pkey>
                    <ns3:place>SampleLoc</ns3:place>
                </ns3:reply>
                <ns3:reply id="test2">
                    <ns3:pkey>55557</ns3:pkey>
                    <ns3:place>SampleLoc2</ns3:place>
                </ns3:reply>
            </ns3:output>
        </input> 
```

预期输出：

```
<input xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xsi:noNamespaceSchemaLocation="nbA2.8.90.xsd">
        <info>User Info </info>
        <team>User Team </team>
        <nodeA id="test">
            <inodeAA> Sample </inodeAA>
            <pkey>55555</pkey>
            <inodeAB> Samples </inodeAB>
        </nodeA>
        <nodeA id="test2">
            <inodeAA> Sample </inodeAA>
            <pkey>55557</pkey>
            <inodeAB> Samples </inodeAB>
        </nodeA>            
    </input> 
```

下面是我的 XSL：

```
 <xsl:stylesheet version="2.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:ns3="http://mysample.org"
        exclude-result-prefixes="soap xsl">
        <xsl:output omit-xml-declaration="no" indent="yes" />

        <xsl:key name="parKey" match="ns3:output/ns3:reply/ns3:pkey" use="/input/ns3:output/ns3:reply/@id"></xsl:key>

        <xsl:template match="@*|node()">
            <xsl:copy copy-namespaces="no">
                <xsl:apply-templates select="@*|node()" />                  
            </xsl:copy>     
        </xsl:template>

        <xsl:template match="/input">
            <xsl:variable name="output_186" select="ns3:output"/>
            <xsl:copy>
                <xsl:copy-of copy-namespaces="no" select="./@*" />
                <xsl:copy-of select=" * except $output_186"></xsl:copy-of>
            </xsl:copy> 
        </xsl:template>

        <xsl:template match="/input//nodeA">
            <xsl:copy>
                <xsl:copy-of copy-namespaces="no" select="./@*" />
                <pkey>
                    <xsl:copy-of select="key('parKey', @id)|." />           
                </pkey>                 
                <xsl:copy-of copy-namespaces="no" select="node()" />
            </xsl:copy>             
        </xsl:template> 
    </xsl:stylesheet> 
```

输出如下：未显示我的必填字段

```
 <input xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"        
        xsi:noNamespaceSchemaLocation="nbA2.8.90.xsd" >
        <info>User Info </info>
        <team>User Team </team>
        <nodeA id="test">
            <inodeAA> Sample </inodeAA>
            <inodeAB> Samples </inodeAB>
        </nodeA>
        <nodeA id="test2">
            <inodeAA> Sample </inodeAA>
            <inodeAB> Samples </inodeAB>
        </nodeA>
    </input> 
```

请帮助我我到底在哪里失踪。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:07:01.507

最明显的错误是 xsl:key 中的“使用”表达式。这应该始终是一个相对路径表达式，相对于“匹配”模式匹配的节点。我还没有弄清楚它应该是什么，因为我还没有真正弄清楚你想要做什么。但我怀疑它应该是

```
match="ns3:reply" use="@id" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T17:07:09.663

的`use`属性`xsl:key`是相对于被匹配元素的路径，因此您可能想要

```
<xsl:key name="parKey" match="ns3:pkey" use="../@id"/> 
```

以便按其父元素`pkey`的属性对元素进行分组。`id``reply`

但更一般地说，您的`/input`模板是可疑的：

```
 <xsl:template match="/input">
        <xsl:variable name="output_186" select="ns3:output"/>
        <xsl:copy>
            <xsl:copy-of copy-namespaces="no" select="./@*" />
            <xsl:copy-of select=" * except $output_186"></xsl:copy-of>
        </xsl:copy> 
    </xsl:template> 
```

这只是复制整个源`input`元素（减去`ns3:output`），它*不是*递归应用模板，因此`nodeA`处理 的模板`pkey`永远不会触发。

尝试更多类似的东西：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:ns3="http://mysample.org"
    exclude-result-prefixes="xsl">
    <xsl:strip-space elements="*" />
    <xsl:output omit-xml-declaration="no" indent="yes" />

    <xsl:key name="parKey" match="ns3:pkey" use="../@id"/>

    <!-- copy everything -->
    <xsl:template match="@*|node()">
        <xsl:copy copy-namespaces="no">
            <xsl:apply-templates select="@*|node()" />                  
        </xsl:copy>     
    </xsl:template>

    <!-- except ns3:output -->
    <xsl:template match="ns3:output" />

    <xsl:template match="nodeA">
        <xsl:copy copy-namespaces="no">
            <xsl:apply-templates select="@*|node()" />
            <xsl:element name="pkey">
                <xsl:value-of select="key('parKey', @id)" />
            </xsl:element>
        </xsl:copy>             
    </xsl:template> 
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T18:54:27.073

**更短的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ns3="http://mysample.org">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:key name="kpKeyByParentId" match="ns3:pkey" use="../@id"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="inodeAA">
  <xsl:call-template name="identity"/>
  <xsl:apply-templates select="key('kpKeyByParentId', ../@id)"/>
 </xsl:template>

 <xsl:template match="ns3:pkey">
   <xsl:element name="{local-name()}">
    <xsl:apply-templates/>
   </xsl:element>
 </xsl:template>
 <xsl:template match="ns3:output"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<input  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xsi:noNamespaceSchemaLocation="nbA2.8.90.xsd">
    <info>User Info </info>
    <team>User Team </team>
    <nodeA id="test">
        <inodeAA> Sample </inodeAA>
        <inodeAB> Samples </inodeAB>
    </nodeA>
    <nodeA id="test2">
        <inodeAA> Sample </inodeAA>
        <inodeAB> Samples </inodeAB>
    </nodeA>
    <ns3:output xmlns:ns3="http://mysample.org">
        <ns3:reply id="test">
            <ns3:pkey>55555</ns3:pkey>
            <ns3:place>SampleLoc</ns3:place>
        </ns3:reply>
        <ns3:reply id="test2">
            <ns3:pkey>55557</ns3:pkey>
            <ns3:place>SampleLoc2</ns3:place>
        </ns3:reply>
    </ns3:output>
</input> 
```

**产生了想要的正确结果：**

```
<input xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="nbA2.8.90.xsd">
   <info>User Info </info>
   <team>User Team </team>
   <nodeA id="test">
      <inodeAA> Sample </inodeAA>
      <pkey>55555</pkey>
      <inodeAB> Samples </inodeAB>
   </nodeA>
   <nodeA id="test2">
      <inodeAA> Sample </inodeAA>
      <pkey>55557</pkey>
      <inodeAB> Samples </inodeAB>
   </nodeA>
</input> 
```

**说明**：

1.  身份规则“按原样”复制选择执行的每个节点。

2.  匹配 an 的 ovveriding 模板`inodeAA`调用标识模板来复制自身，然后将模板应用于任何`ns3:pkey`元素，其父属性的值与此父属性的`id`值相同。为了方便和高效，这是通过调用引用键的函数来完成的，该键将 an 定义为其父属性的函数。`id``inodeAA``key()``"kpKeyByParentId"``ns3:pkey``id`

3.  匹配元素的模板`ns3:pkey`会创建一个元素（在无命名空间中），其名称是匹配元素的本地名称，并且还会复制其内容。

4.  元素`ns3:output`及其整个子树被具有空主体的匹配模板排除在处理之外（“删除”）。

# oop - 类应该按功能类型还是按模型分组？

> ID：13881405
> 
> 赞同：1
> 
> 时间：2012-12-14T15:17:00.743
> 
> 标签：oop, architecture

我知道标题可能不太清楚，因为我可能没有正确的术语，但一个例子应该清楚。假设我有一个带有帖子和评论的应用程序，那么将它们分组到各种方式的命名空间/包中的最佳实践是什么。如果没有更好的方法，两者的优点和缺点是什么。以下是我设想的几种不同方式，请注意，这绝不是详尽无遗的，只是为了说明这一点：

1)

```
MyAp
|--Entities
|  |--AbstractEntity.class
|  |--Comment.class
|  |--Post.class
|--DataMappers
|  |--AbstractDataMapper.class
|  |--CommentDataMapper.class
|  |--PostDataMapper.class
|--DataMappers
|  |--AbstractService.class
|  |--CommentService.class
|  |--PostService.class 
```

2)

```
MyAp
|--Abstract
|  |--AbstractDataMapper.class
|  |--AbstractEntity.class
|  |--AbstractService.class
|--Impl
|  |--Comment
|  |  |--Comment.class
|  |  |--CommentDataMapper.class
|  |  |--CommentService.class
|  |--Post
|  |  |--Post.class
|  |  |--PostDataMapper.class
|  |  |--PostService.class 
```

对于一个大项目，您可以将上述任何一种方法分成更广泛的组。例如，对于#1，您可以在 Entities、DataMappers 和 Services 命名空间下放置 Db、Util、System 等，并将类实现放在其中，同时将 AbstractEntity 类保留在 Entities 命名空间下。对于 #2，您可以将这些额外的命名空间放在 Abstract 和 Impl 下执行相同的操作。

我倾向于 #1 更好，似乎我必须将额外的 Db、Util、System 等命名空间添加到 2 个不同的地方。但是#2 具有将与一个模型类相关的所有类保持在一起的吸引力。拿不定主意！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:23:53.173

我想说这两种方法都有问题。

大多数开发人员倾向于通过他们的主要专业来打破类。映射器应该到映射器，模型应该到模型，助手应该到助手，接口到接口，我们首先想到。在项目开始时，这可能是一个容易的决定，但随着时间的推移它会引起一些痛苦。有时它看起来相当愚蠢。尤其是当您需要将某个功能提取到单独的组件中时。

根据我的经验，我可以说您应该按类的高级功能或“子系统”对类进行分组，或者像现在 DDD 指定的“有界上下文”一样。同时不应该有非常可能的分组级别。

所以 - 我可以看到你所有的实体都属于发布上下文。它可能看起来很奇怪，但我建议您将所有类都放在`Posting`fodler 中，并且不要创建额外的子文件夹，除非您在上下文中有非常特定的功能区域。

```
MyAp
|--Core
   |--AbstractEntity.class 
   |--AbstractDataMapper.class
   |--AbstractService.class
|--Posting
   |--Comment.class
   |--Post.class
   |--CommentDataMapper.class
   |--PostDataMapper.class
   |--CommentService.class
   |--PostService.class 
```

一般来说，您的第二种方法看起来相似。在这种情况下，您可以轻松添加越来越多的特定于上下文的文件夹。像 - “投票”、“通知”、“身份验证”等。另外我建议选择最简单的方法，等到你有一些“临界质量”的类，这样你就有足够的信息来了解如何正确分组课程。

使用第一种方法，您的域上下文将分布在所有文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:13:44.323

以我的经验，我看到的第一个 FAR 比我看到的后者多（实际上，我认为我从未见过一个项目在第一个上分裂）。

示例：假设您有一个使用好莱坞模式的抽象类。所有实现类都应该在同一个包中。远离实际实现，在“抽象”包中关闭“主”模板没有任何意义。

我要补充的另一件事是**SINGULAR IN ALL CASES EXCEPT COLLECTIONS**。

```
MyAp
|--Entity
|  |--AbstractEntity.class
|  |--Comment.class
|  |--Post.class
|--DataMapper
|  |--AbstractDataMapper.class
|  |--CommentDataMapper.class
|  |--PostDataMapper.class
|--Service
|  |--AbstractService.class
|  |--CommentService.class
|  |--PostService.class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:02:42.433

像 JaxB 这样的一些框架将配置信息放入 package-info.java。在这种情况下，必须使用第一种方法才能使用 package-info.java。

# migration - 仙人掌迁移

> ID：13881412
> 
> 赞同：1
> 
> 时间：2012-12-14T15:17:25.567
> 
> 标签：migration, cacti

我尝试将 Cacti 从服务器 A 迁移到服务器 B。两者都在 Debian 6 上，这是相同版本的 Cacti (0.8.7g)

我按照以下步骤操作：

1.  在服务器 A 上备份 cacti db
2.  在服务器 A 和 B 上禁用 Cacti cron
3.  备份所有 rra (for i in `find -name "*.rrd"`; do rrdtool dump $i > $i.xml; done)
4.  在服务器 B 中复制并从 xml 转换为 rrd
5.  在服务器 B 上启用 Cacti cron

我看到了我之前的图表，但它们没有用新数据刷新。我的图表上的内存使用量为 0 ......进程数相同

如何重新激活仙人掌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:36:29.790

您是否还重建了轮询器缓存？

转到控制台-> 系统实用程序-> 重建轮询器缓存

这将重建轮询器正在使用的缓存。它有时在更新过程中没有正确更新，导致一些图表为空。

# php - 在数据库中插入数据的 jQuery .ajax 查询不起作用

> ID：13881413
> 
> 赞同：0
> 
> 时间：2012-12-14T15:17:25.407
> 
> 标签：php, javascript, jquery, ajax

我正在构建一个使用 jQuery/AJAX 将数据发送到 php 页面的网站，然后从那里将其插入数据库。出于某种原因，没有插入代码，我根本没有得到任何回应。

我的JavaScript：

```
 function insert_data(){
    var title = debate_title.value;
    var subtitle = debate_sub.value;
    var sides = debate_sides.value;

    $(function() {
        $.ajaxSetup({
            error: function(jqXHR, exception) {
                if (jqXHR.status === 0) {
                    window.location.replace('errors/noConnection.html');
                } else if (jqXHR.status == 404) {
                    window.location.replace('errors/noConnection.html');
                } else if (jqXHR.status == 500) {
                    window.location.replace('errors/noConnection.html');
                } else if (exception === 'parsererror') {
                    window.location.replace('errors/noConnection.html');
                } else if (exception === 'timeout') {
                    window.location.replace('errors/noConnection.html');
                } else if (exception === 'abort') {
                    window.location.replace('errors/noConnection.html');
                } else {
                    window.location.replace('errors/noConnection.html');
                }
            }
        });
    });

    $.ajax({
        type: "POST",
        url: "post_debate.php",
        data: { post_title: title, post_sub: subtitle, post_sides: sidesm, ajax: 1 },
        dataType: "json",
        timeout: 5000, // in milliseconds
        success: function(data) {
            if(data!==null){
                window.location.replace('show_debate.php?id=' + data);
            }else{
                window.location.replace('errors/noConnection.html');
            }
        }
    });
} 
```

我的 PHP 代码（post_debate.php）：

```
 <?php

    require('connect.php');

    $title = $_POST['post_title'];

    $subtitle = $_POST['post_sub'];

    $sides = $_POST['post_sides'];

    $ajax = $_POST['ajax'];

    $date = new DateTime();
    $timeStamp = $date->getTimeStamp();

    if($ajax==1){
        $query = mysql_query("INSERT INTO debates VALUES('','$title','$subtitle','$sides','0','0','$timeStamp')");
        $get_data = mysql_query("SELECT id FROM debates WHERE title='$title', subtitle='$subtitle', sides='$sides', timestamp='$timeStamp'");
        while($id=mysql_fetch_array($get_data)){
            $final_id = $id['id'];
        }
        exit($final_id);
    }else{
        die("404 SERVER ERROR");
    }

?> 
```

谢谢！

* * *

**编辑 - 尚未解决**

我的新 PHP 代码：

```
<?php
header("content-type: application/json");

require('connect.php');

$title = $_POST['post_title'];

$subtitle = $_POST['post_sub'];

$sides = $_POST['post_sides'];

$ajax = $_POST['ajax'];

$date = new DateTime();
$timeStamp = $date->getTimeStamp();

if($ajax==1){
    $query = mysql_query("INSERT INTO debates VALUES('','$title','$subtitle','$sides','0','0','$timeStamp')");
    $get_data = mysql_query("SELECT id FROM debates WHERE title='$title', subtitle='$subtitle', sides='$sides', timestamp='$timeStamp'");
    while($id=mysql_fetch_array($get_data)){
        $final_id = $id['id'];
    }
    print (json_encode(array("Id"=>$final_id)));
}else{
    die("404 SERVER ERROR");
} 
```

?>

我的新 Javascript .ajax：

```
 $.ajax({
    type: "POST",
    url: "post_debate.php",
    data: { post_title: title, post_sub: subtitle, post_sides: sides, ajax: 1 },
    dataType: "json",
    timeout: 5000, // in milliseconds
    success: function(data) {
        if(data!==null){
            window.location.replace('show_debate.php?id=' + data['Id']);
        }else{
            window.location.replace('errors/noConnection.html');
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:35:49.303

您的代码期望 JSON 作为响应...

```
dataType: "json", 
```

（[文档在这里](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)）

但是您返回的是一个没有适当内容类型标头的非 json 值。

尝试更改您的 PHP 脚本

```
 exit($final_id); 
```

到（未经测试）

```
header("content-type: application/json");
print (json_encode(array(
        "Id"=>$final_id
    ))); 
```

此外，在 Javascript 代码中的回调上放置一个断点`success`（使用 Firebug 或类似工具）并检查`data`包含的内容。它现在应该是一个关联数组，所以你可以做

```
window.location.replace('show_debate.php?id=' + data['Id']); 
```

### 改进：

不要执行 SELECT 来获取最近插入的 Id，而是使用[`mysql_insert_id()`](http://php.net/manual/en/function.mysql-insert-id.php). 像这样的东西...

```
$query = mysql_query("INSERT INTO debates VALUES('','$title','$subtitle','$sides','0','0','$timeStamp')");
$final_id = mysql_insert_id();
print (json_encode(array("Id"=>$final_id))); 
```

此外，如果您在开发工具中看不到响应，另一种测试 PHP 返回的方法是直接浏览到该页面（您必须将所有内容更改`$_POST`为`$_REQUEST`）

# java - 使用 JOptionPane 的 Java 中的石头剪刀布游戏

> ID：13881417
> 
> 赞同：2
> 
> 时间：2012-12-14T15:17:40.747
> 
> 标签：java, swing

我正在尝试为我们的主题解决这个任务。我已经在不使用的情况下尝试过它`JOptionPane`并且它有效，但是当我将它编辑为有一个对话框时，它没有用。第一个对话框应该包含一个标题和要输入的选项，最后一个应该允许用户退出程序。用户输入他/她的选择后，应出现一个对话框，指示用户的选择和计算机的选择。计算机的选择应该是随机的。如果用户没有输入正确的选项，则会出现一个对话框，告诉用户输入有效的选项。这是我到目前为止所拥有的：

```
package assignment;

import java.util.Random;
import java.util.Scanner;
import javax.swing.*;
public class RockPaperScissorGame 
{

public static void main(String[] args) 
{

    String inputStr;
    String personPlay="";    
    String computerPlay="1,2,3";     
    int computerInt;
   Scanner input = new Scanner(System.in);
    Random generator = new Random();

            inputStr = JOptionPane.showInputDialog("Lets play a game! \nEnter 1 for rock \nEnter 2 for paper \nEnter 3 for scissors \nEnter 4 to quit");
            personPlay = input.next(inputStr);

            switch (computerInt = 0)
            {
                }
            do
            {
                if (personPlay.equals(computerPlay))  
                    JOptionPane.showMessageDialog(null, "It's a TIE! ", "TIE!", JOptionPane.INFORMATION_MESSAGE);

                else if (personPlay.equals("1"))
                    {
                    if (computerPlay.equals("3"))
                    JOptionPane.showMessageDialog(null, "Rock beats Scissors. \nYOU WIN! ", "YOU WIN!", JOptionPane.INFORMATION_MESSAGE);
                    else
                    JOptionPane.showMessageDialog(null, "Paper beats Rock. \nYOU LOSE! ", "YOU LOSE!", JOptionPane.INFORMATION_MESSAGE);
                    }
                else if (personPlay.equals("2"))
                    {
                    if (computerPlay.equals("3"))
                    JOptionPane.showMessageDialog(null, "Scissor beats Paper. \nYOU LOSE!", "YOU LOSE!", JOptionPane.INFORMATION_MESSAGE);
                    else
                    JOptionPane.showMessageDialog(null, "Paper beats Rock. \nYOU WIN! ", "YOU WIN!", JOptionPane.INFORMATION_MESSAGE);
                    }
                else if (personPlay.equals("3"))
                    {
                     if (computerPlay.equals("1"))
                    JOptionPane.showMessageDialog(null, "Scissor beats Paper. \nYOU WIN!", "YOU WIN!", JOptionPane.INFORMATION_MESSAGE);
                     else
                    JOptionPane.showMessageDialog(null, "Rock beats Scissors. \nYOU LOSE! ", "YOU LOSE!", JOptionPane.INFORMATION_MESSAGE);
                    }
                else if (personPlay.equals("4"))
                    {
                    JOptionPane.showMessageDialog(null, "GOOD BYE", " BYE!", JOptionPane.INFORMATION_MESSAGE);
                    }

            }while(true);
            }   

} 
```

希望大家能帮忙。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:30:23.113

*   正如所指出的，你永远不会改变`computerPlay`，这应该是随机选择的。
*   `showInputDialog`应该在循环内，否则游戏永远不会结束......
*   `switch`是没用的。
*   也是如此`Scanner`。做就是了：`personPlay = JOptionPane.showInputDialog("Lets play a game! [...]");`

# android - Android - 使用动画更改左边距

> ID：13881419
> 
> 赞同：67
> 
> 时间：2012-12-14T15:17:48.590
> 
> 标签：android, android-animation

我正在以下列方式更改图像视图的左边距：

```
ViewGroup.MarginLayoutParams layoutParams = (MarginLayoutParams) image.getLayoutParams ();
layoutParams.leftMargin = VALUE;
image.setLayoutParams ( layoutParams ); 
```

我希望边距的变化适用于动画。有什么线索吗？

我尝试了什么：

```
ObjectAnimator objectAnimator = ObjectAnimator.ofFloat ( image , "x" , VALUE);
objectAnimator.start(); 
```

这非常有效，因为图像通过动画移动到指定的 X 值，**但是 layoutParams.leftMargin**的值**保持**不变！所以我不能使用这个方法，因为如果我在使用值为 100 的 objectAnimator 后尝试将 layoutParams.leftMargin 的值更改为**100**，**则**应用的值不正确（应用 200 而不是 100，如果**objectAnimator**保持不变的效果即使我以以下方式设置左边距：

 ****```
layoutParams.leftMargin = 100; 
```

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-04-08T12:17:06.723

使用动画类，而不是 ObjectAnimator。

```
final int newLeftMargin = <some value>;
Animation a = new Animation() {

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        LayoutParams params = yourView.getLayoutParams();
        params.leftMargin = (int)(newLeftMargin * interpolatedTime);
        yourView.setLayoutParams(params);
    }
};
a.setDuration(500); // in ms
yourView.startAnimation(a); 
```

请注意，您应该使用正确的 LayoutParams 类，即如果您的视图是 LinearLayout 的子视图，则参数应该是 LinearLayout.LayoutParams

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2013-10-21T08:39:21.490

我遇到了这个问题，但我无法使用它，因为我想将边距从负值设置为 0，所以我使用了基于 user1991679 答案的 valueAnimater：

```
final View animatedView = view.findViewById(R.id.animatedView);
final LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) animatedView.getLayoutParams();
ValueAnimator animator = ValueAnimator.ofInt(params.bottomMargin, 0);
animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
    @Override
    public void onAnimationUpdate(ValueAnimator valueAnimator)
    {
        params.bottomMargin = (Integer) valueAnimator.getAnimatedValue();
        animatedView.requestLayout();
    }
});
animator.setDuration(300);
animator.start(); 
```

您必须根据 animatedView 容器更改 LinearLayout.LayoutParams。您也可以将 Nineoldandroids 用于没有 ValueAnimator 的旧版本。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-02-14T13:15:59.857

user1991679 的答案很好，但是如果您需要从除 0 之外的任何其他值插入边距，则需要在计算中使用它：

```
ViewGroup.MarginLayoutParams params = (MarginLayoutParams) mBottomLayout.getLayoutParams();
final int bottomMarginStart = params.bottomMargin; // your start value
final int bottomMarginEnd = <your value>; // where to animate to
Animation a = new Animation() {
    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        ViewGroup.MarginLayoutParams params = (MarginLayoutParams) mBottomLayout.getLayoutParams();
        // interpolate the proper value
        params.bottomMargin = bottomMarginStart + (int) ((bottomMarginEnd - bottomMarginStart) * interpolatedTime);
        mBottomLayout.setLayoutParams(params);
    }
};
a.setDuration(300);
mBottomLayout.startAnimation(a); 
```

在我的情况下，我需要为“进入屏幕”动画设置动画，从“-48dp”到 0。没有起始值，动画始终为 0，因此跳跃，而不是动画视图。解决方案是插入偏移量并将其添加到原始值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-23T11:47:49.237

没有什么能像我想要的那样对我有用……我需要创建从 -80 dp（oldLeftMargin）到 0dp 的 ToggleMenu。与 bottomMargin 等相同。现在它可以工作了：

```
final int oldLeftMargin = (int) getResources().getDimension(R.dimen.left_menu_button_margin_left);
    Animation a = new Animation() {
        @Override
        protected void applyTransformation(float interpolatedTime, Transformation t) {
            ViewGroup.MarginLayoutParams params = (ViewGroup.MarginLayoutParams) llMeniuToggle.getLayoutParams();
            params.leftMargin = oldLeftMargin + (int) ((0 - oldLeftMargin) * interpolatedTime);
            llMeniuToggle.setLayoutParams(params);
        }
    };
    a.setDuration(500);
    llMeniuToggle.startAnimation(a); 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2017-03-07T06:34:51.120

您可以使用以下

```
image.animate().setDuration(durationIn).translationXBy(offsetFloat).start(); 
```

您还可以添加`.setInterpolator(new BounceInterpolator())`以更改动画的外观。****

# r - 插补后转换：如何根据其他变量中的值创建变量？

> ID：13881420
> 
> 赞同：1
> 
> 时间：2012-12-14T15:17:50.357
> 
> 标签：r, variables, missing-data

我正在使用 Amelia 为每个缺少数据的变量生成五个新的假设数据集。现在，我想在插补后创建新变量。

可重现的数据集位于 Zelig 包中。

```
require(Zelig)
require(Amelia)
data(freetrade)
       year    country   tariff   polity  pop        gdp.pc    ...
    1  1981    SriLanka  NA       6       14988000   461.0236 
    2  1982    SriLanka  NA       5       15189000   473.7634 
    3  1983    SriLanka  41.3     5       15417000   489.2266 
```

**[使用Amelia II](http://cran.r-project.org/web/packages/Amelia/vignettes/amelia.pdf)创建 5 个估算数据集**

```
a.out <- amelia(freetrade, m=5, ts="year", cs="year") 
```

**转换插补变量**

我学会了如何创建插补变量的转换以供进一步分析使用，参见 4.8。在手册中。例如：

```
a.out<-transform(a.out, pol_gdp = polity * gdp-pc)  
a.out<-transform(a.out, pol.gdp = polity / gdp)  
head(a.out$imputations[[1]])

  year  country  tariff   polity pop      gdp.pc  ... pol_gdp  pol.gdp 
1 1981  SriLanka 39.55176 6      14988000 461.0236    2766.142 0.013014518  
2 1982  SriLanka 55.70500 5      15189000 473.7634    2368.817 0.010553791 
3 1983  SriLanka 41.30000 5      15417000 489.2266    2446.133 0.010220214
     ... 
```

***问题***

我不知道如何根据另一个变量中的值创建一个新变量。也就是说，通常我会使用 if-else 参数，但它在 Amelia 中不起作用。

```
a.out$imputations$new.var<-ifelse(a.out$imputations$polity==5,1,0) 
```

任何想法将不胜感激！

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:15:16.007

非常感谢所有开始思考如何回答这个问题的人。

我想我自己找到了解决方案：

```
a.out <- transform(a.out, new.var=ifelse(polity==5,1,0)) 
```

# jquery - prependTo 添加 2 个列表项而不是 1 个

> ID：13881421
> 
> 赞同：1
> 
> 时间：2012-12-14T15:18:01.940
> 
> 标签：jquery, carousel, appendto

我有一个带有 .pre 和 .next 按钮的旋转木马。单击 .pre 会将 li:last 移动到 li:first，反之亦然。

如果只有一个旋转木马，这很好用，当我添加 2 个具有不同 ID 的旋转木马时，单击 .pre 会在前面添加 2 li 而不是 1。这是为什么呢？

```
 <div class="carrousel" id="featuredAppartments">

            <a href="" class="move pre">Previous</a> <a href="" class="move next ">Next</a>

            <div class="list">
                <ul>
                    <li><a href=""><div class="imgWrap"><img src="assets/img/thumb2.png" alt=""><i class="ico ribbonLowered">Featured</i></div> <p><strong>Amsterdam</strong> Grachtengordel <br> € 2500,00</p></a></li>
                    <li><a href=""><div class="imgWrap"><img src="assets/img/thumb2.png" alt=""></div> <p><strong>Amsterdam</strong> Grachtengordel <br> € 2500,00</p></a></li>
                    <li><a href=""><div class="imgWrap"><img src="assets/img/thumb2.png" alt=""></div> <p><strong>Amsterdam</strong> Grachtengordel <br> € 2500,00</p></a></li>
                    <li><a href=""><div class="imgWrap"><img src="assets/img/thumb2.png" alt=""><i class="ico ribbonRented">Featured</i></div> <p><strong>Amsterdam</strong> Grachtengordel <br> € 2500,00</p></a></li>
                    <li><a href=""><div class="imgWrap"><img src="assets/img/thumb2.png" alt=""><i class="ico ribbonNew">Featured</i></div> <p><strong>Amsterdam</strong> Grachtengordel <br> € 2500,00</p></a></li>
                    <li><a href=""><div class="imgWrap"><img src="assets/img/thumb2.png" alt=""><i class="ico ribbonNew">Featured</i></div> <p><strong>Amsterdam</strong> Grachtengordel <br> € 2500,00</p></a></li>
                    <li><a href=""><div class="imgWrap"><img src="assets/img/thumb2.png" alt=""><i class="ico ribbonNew">Featured</i></div> <p><strong>Amsterdam</strong> Grachtengordel <br> € 2500,00</p></a></li>
                    <li><a href=""><div class="imgWrap"><img src="assets/img/thumb2.png" alt=""><i class="ico ribbonNew">Featured</i></div> <p><strong>Amsterdam</strong> Grachtengordel <br> € 2500,00</p></a></li>
                    <li><a href=""><div class="imgWrap"><img src="assets/img/thumb2.png" alt=""><i class="ico ribbonNew">Featured</i></div> <p><strong>Amsterdam</strong> Grachtengordel <br> € 2500,00</p></a></li>
                </ul>
            </div>

            <script>

                $(document).ready(function() {

                    var t = $('#featuredAppartments ul');

                    $('.next').click(function(event) {event.preventDefault();t.find('li:first').appendTo(t);});
                    $('.pre').click(function(event) {event.preventDefault();t.find('li:last').prependTo(t);});

                });

            </script>

        </div> 
```

**更新：**

我将脚本更改为这个，但第二个轮播仍然添加 2 li 而不是仅 1。

```
 <script>

                $(document).ready(function() {

                    var t = $('#featuredAppartments ul');

                    $('#featuredAppartments .next').click(function(event) {event.preventDefault();t.find('li:first').appendTo(t);});
                    $('#featuredAppartments .pre').click(function(event) {event.preventDefault();t.find('li:last').prependTo(t);});

                });

            </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:21:48.457

您的代码说`$('.pre')`，它将单击处理程序附加到具有类集的*每个*元素。`pre`所以当用户点击一次时，两个轮播都会响应，并且各自添加自己的li。

你会想让你的选择器更具体，或者你的处理程序......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:10:15.213

这个问题的答案在于您没有提供的第二个轮播代码。我刚刚从您的代码中快速制作了一个 jsfiddle。它没有任何好的标记，所以我建议重写它。[http://jsfiddle.net/PQQEe/](http://jsfiddle.net/PQQEe/)

基本上你可能忘记适当地改变一些变量..比如你的 t.find..

假设第二个旋转木马的 ID 为“更多”。所以你的 JS 看起来像：

```
$(document).ready(function() {
    var t = $('#featuredAppartments ul');

    $('#featuredAppartments .next').click(function(event) {event.preventDefault();t.find('li:first').appendTo(t);});
    $('#featuredAppartments .pre').click(function(event) {event.preventDefault();t.find('li:last').prependTo(t);});

    var d = $('#more ul');

    $('#more .next').click(function(event) {event.preventDefault();d.find('li:first').appendTo(d);});
    $('#more .pre').click(function(event) {event.preventDefault();d.find('li:last').prependTo(d);});

}); 
```

您现在通过轮播 ID 选择按钮，并且您也只能访问每个轮播中的列表。希望能帮助到你。

# jquery - 使缩略图与图库中的主图像匹配

> ID：13881423
> 
> 赞同：0
> 
> 时间：2012-12-14T15:18:11.593
> 
> 标签：jquery

我正在制作一个画廊，为了让用户浏览它，我希望他能够同时使用缩略图和下一个/上一个按钮。他们都在工作，但没有一起工作。

当我打开画廊时，它显示图像编号 1。但是，如果我使用缩略图选择图像编号 4，然后按“下一个”，它会显示图像编号 2。因为上一个/下一个按钮正在考虑来自主图像画廊，这是我的#polaroid div。

这是小提琴：http: [//jsfiddle.net/claudiamarques/KasTN/1/](http://jsfiddle.net/claudiamarques/KasTN/1/)

这是我怀疑问题可能出在的js：

```
$("#thumbnails li img").click(function() {

    var thumbnail_caption = $(this).attr('alt');
    var thumbnail_src = $(this).attr('src');

    $("#polaroid img:visible").fadeOut(function() {
        $(this).attr('src', thumbnail_src).fadeIn();
        $("p.caption").text(thumbnail_caption);
    });
});​ 
```

我正在从#polaroid img:visible 更改“src”，但不知何故没有永久保存。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:22:05.540

如果我是你，我只会使用 flexslider，所有的工作都为你完成，它有很多选择： [http ://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

# nlp - 获取指定单词的 WordNet 域名

> ID：13881425
> 
> 赞同：4
> 
> 时间：2012-12-14T15:18:16.903
> 
> 标签：nlp, cluster-analysis, semantic-web, wordnet, document-classification

我知道 WordNet 有域层次结构：例如运动->足球。

1) 是否可以列出所有与“sport->football”子域相关的单词？

```
 Response: goalkeeper, forward, penalty, ball, field, stadium, referee and so on. 
```

2) 获取给定单词的域名，例如“守门员”？

```
 Need something like [sport->football; sport->hockey] or [football;hockey] or just 'football'. 
```

它用于文档分类任务。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T17:43:20.683

WordNet 具有上位词/下位词层次结构，但这不是您想要的，正如您在查找*守门员*时所看到的那样：

```
from nltk.corpus import wordnet
s = wordnet.synsets('goalkeeper')[0]
s.hypernym_paths() 
```

结果之一是：

```
[Synset('entity.n.01'),
Synset('physical_entity.n.01'),
Synset('causal_agent.n.01'),
Synset('person.n.01'),
Synset('contestant.n.01'),
Synset('athlete.n.01'),
Synset('soccer_player.n.01'),
Synset('goalkeeper.n.01')] 
```

有两种方法被调用`usage_domains()`，`topic_domains()`但它们为大多数单词返回一个空列表：

```
s = wordnet.synsets('football')[0]
s.topic_domains()
>>> []
s.usage_domains()
>>> [] 
```

[然而，WordNet Domains 项目](http://wndomains.fbk.eu/index.html)可能是您正在寻找的。它提供了一个文本文件，其中包含普林斯顿 WordNet 2.0 同义词集与其相应域之间的映射。您必须注册您的电子邮件地址才能访问数据。然后您可以读取与您的 WordNet 版本相对应的文件（它们提供 2.0 和 3.2），例如使用`anydbm`模块：

```
import anydbm
fh = open('wn-domains-2.0-20050210', 'r')
dbdomains = anydbm.open('dbdomains', 'c')
for line in fh:
    offset, domain = line.split('\t')
    dbdomains[offset[:-2]] = domain
fh.close() 
```

然后，您可以使用同义词集的偏移属性来找出它的域。也许您必须在开头添加一个零：

```
dbdomains.get('0' + str(wordnet.synsets('travel_guidebook')[0].offset))
>>> 'linguistics\n' 
```

# django - Django ManyToManyField 权限

> ID：13881428
> 
> 赞同：1
> 
> 时间：2012-12-14T15:18:28.907
> 
> 标签：django, django-models, django-admin

我有一个`ManyToManyField`模型`django.contrib.auth.models.Permission`

问题是当我在管理员中打开编辑我的模型记录时，数据库请求的数量是 241

```
class RoleManager(models.Manager):

    def get_query_set(self):
        return super(RoleManager, self).get_query_set().select_related('organization')

class Role(models.Model):

    name = models.CharField(u'Name', max_length = 80)
    organization = models.ForeignKey(Organization)
    permissions = models.ManyToManyField(Permission, blank = True)

    objects = RoleManager()

    def __unicode__(self):
        return u'{name} in {organization}'.format(name = self.name, organization = self.organization.name) 
```

235 个 SELECT 是：

```
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 8
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 8
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 8
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 68
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 69
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 69
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 69
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 9
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 9
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 9
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 10
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 10
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 10
SELECT ••• FROM "django_content_type" WHERE "django_content_type"."id" = 17 
```

可能我必须使用 Manager 来解决这个问题吗？

我看了[https://github.com/django/django/blob/master/django/contrib/auth/models.py](https://github.com/django/django/blob/master/django/contrib/auth/models.py)

并看到 Permission 正在使用一些 PermissionManager，但不确定到底发生了什么，以及如何在我的经理中实现

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:21:06.143

是的，您可以使用该[`prefetch_related` `QuerySet`方法](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)，这就是它的预期目的！

这应该会将您的查询开销减少到对所有相关对象的一次查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T14:54:13.780

调试工具栏可以发出这个请求，如果你正在使用它。

# r - 如何在 R 中绘制随机截距和斜率模型

> ID：13881431
> 
> 赞同：3
> 
> 时间：2012-12-14T15:18:29.367
> 
> 标签：r

您好，我有一个关于如何在 R 中使用 nlme**绘制**随机截距和斜率模型的问题。我（在 Zuur 等人，2009 年的帮助下）想出了如何绘制带有随机截距的模型，但一直没能找出绘制具有随机截距和斜率的模型所需的代码。

# 随机截距模型代码：

```
library(nlme)
#stream order random intercept
df1$fStream.Order <- factor(df1$Stream.Order)

Mlme1.so<-lme(rel.abun ~ WI.ADF.period, random = ~1|fStream.Order, data=df1) 
```

# 绘制随机截距模型的代码

```
F0.so<-fitted(Mlme1.so, level=0)

F1.so<-fitted(Mlme1.so, level=1)

I.so<-order(df1$WI.ADF.period); WI.ADF.periods<-sort(df1$WI.ADF.period)

plot(WI.ADF.periods, F0.so[I.so], lwd=4, type="l",ylim=c(5,25), xlim=c(-1,10),ylab="Relative Abundance",xlab="WI")
for (i in 1:5){
x1.so <- df1$WI.ADF.period[df1$Stream.Order == i]
y1.so <- F1.so[df1$Stream.Order == i]
K.so <- order(x1.so)
lines(sort(x1.so), y1.so[K.so], type="l")
} 
```

结果图显示了通过固定分量（粗线）和随机截距回归线（细线）获得的拟合线，参见 Zuur 等人的第 108 页上的图 5.2。（2009 年）-“R 生态学中的混合效应模型和扩展”

我想制作以下模型的类似图，除了随机截距外，它还包含随机斜率效应。

```
Mlme2.so<-lme(rel.abun ~ WI.ADF.period, random = ~1 + WI.ADF.period | fStream.Order, data=df1) 
```

我必须如何使用上面的 plot() 函数修改代码以创建一个显示具有不同斜率的随机截距的图？

作为参考，我想在 Zuur 等人的第 111 页上绘制类似于图 5.3 的图。（2009 年）-“R 生态学中的混合效应模型和扩展”

以下是模型中使用的示例数据：

```
WI.ADF.period   Stream.Order    rel.abun
8.73    1   8.89
8.73    1   61.82
8.73    1   9.49
0.00    1   2.18
0.00    1   57.04
0.00    1   7.52
0.00    2   8.43
0.00    2   0.43
0.00    2   76.7
0.00    2   2.14
0.00    2   1.07
0.00    2   2.92
0.00    2   0.1
0.00    2   90.1
0.00    2   1.04
0.00    2   0.31
7.96    3   37.34
7.96    3   21.75
7.96    3   30.36
7.96    3   8.6
0.00    3   44.25
0.00    3   11.95
0.00    3   16.37
0.00    3   21.68
3.72    3   2.55
3.72    3   22.79
3.72    3   0.17
3.72    3   7.48
3.72    3   21.43
3.72    3   6.46
3.72    3   8.33
3.72    3   3.57
3.72    3   0.17
0.00    3   2.58
0.00    3   16.79
0.00    3   14.35
0.00    3   16.93
0.00    3   3.73
0.00    3   14.49
0.00    3   3.44
0.00    3   0
0.00    3   0 
```

# c# - 框架是否有专门的 api 来检测重入？

> ID：13881433
> 
> 赞同：7
> 
> 时间：2012-12-14T15:18:45.543
> 
> 标签：c#, .net, reentrancy

我想禁止大量方法的重入。

对于单一方法，此代码有效：

```
bool _isInMyMethod;
void MyMethod()
{
    if (_isInMethod)
        throw new ReentrancyException();

    _isInMethod = true;
    try
    {
        ...do something...
    }
    finally
    {
        _isInMethod = false;
    }
} 
```

对每种方法都这样做很乏味。
所以我使用了 StackTrace 类：

```
 public static void ThrowIfReentrant()
        {
            var stackTrace = new StackTrace(false);
            var frames = stackTrace.GetFrames();
            var callingMethod = frames[1].GetMethod();
            if (frames.Skip(2).Any( frame => EqualityComparer<MethodBase>.Default.Equals(callingMethod,frame.GetMethod())))
                throw new ReentrancyException();
        } 
```

它工作正常，但看起来更像是一个黑客。

**.NET Framework 是否有特殊的 API 来检测重入？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:53:38.980

我建议使用 PostSharp 来解决您的问题。尽管仅出于特定原因使用商业工具可能会很昂贵，但我建议您看一下，因为该工具可以解决更适合 AOP 解决的其他问题（日志记录、事务管理、安全性等）。公司网站在[这里](http://www.sharpcrafters.com/)，您可以在[这里](http://www.sharpcrafters.com/postsharp/documentation)查看示例。Pluralsight 有一个关于 AOP 方法的很好的课程，[这里](http://pluralsight.com/training/Courses/TableOfContents/postsharp-fundamentals)有 PostSharp 中的示例。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:37:12.573

正常的 .Net 方法是使用一些 for[同步](http://msdn.microsoft.com/en-us/library/ms228964.aspx)来阻塞其他线程，而不是让它们抛出异常。

# objective-c - 是否有设计模式可以在几个地方显示相同的视图控制器并进行一些自定义？

> ID：13881435
> 
> 赞同：2
> 
> 时间：2012-12-14T15:18:50.463
> 
> 标签：objective-c, ios, design-patterns

在为 iPhone 和 iPad 开发通用应用程序时，我们经常重复使用相同的视图控制器。但经常需要进行一些自定义，例如：

```
IF iPad THEN 
  ...
ELSE
  ... 
```

因此，为了实现这种自定义，控制器可能具有在控制器初始化期间设置的某些属性，或者可能存在自定义构造函数。只是好奇是否有适合这种情况的设计模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:21:48.793

不要.... :) 使用一个名为 instance 的通用类`MyClass`，然后将其子类`MyClass-iPad`&`MyClass-iPhone`并为每个类使用两个不同的 XIB。避免使用这种东西（没有必要）。

解释：

iPad 版本应该只知道`Something-iPad`使代码干净并创建良好定义的体系结构的类型的类。如果我跳入您的代码并且有人告诉我：“好的 Jacky Boy，您必须在 iPad 版本上进行更改”。我不会在意看`Something-iPhone`课。大多数逻辑（业务）应该在超类`Something`上，而小调整应该在子类上。

附带说明一下，在我的大多数项目中，通常我没有任何`Something-iPhone`课程，因为设计是在 XIB 上完成的。在`Something-iPad`我通常会保留一个参考`UIPopOverController`（只是一个例子）和一些旋转调整。

**编辑1：**

我会`NSDictionary`在初始化时收到一个`UIViewController`，如下所示：

```
initWithNibName:bundle:configurationDictionary: 
```

收到这个配置字典后，我会在`viewDidLoad`（例如）上使用它。然后你可以做一些像这样很酷的事情：

```
- (void)viewDidLoad
{
    [[self view] setBackgroundColor:[[self configurationDictionary] objectForKey:BACKGROUND_COLOR_KEY]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:31:45.520

如果您有不同的初始化程序或更大的不同功能块，那么定义一个具有核心功能的基类，然后定义一个特定于 iPad 的子类和一个特定于 iPhone 的子类是有意义的。

但是如果你只有一个微不足道的区别（例如，显示一个操作表），那么我会简单地使用类似的东西：

```
- (void)someMethod {
    // a bunch of stuff that is the same

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        // one or two lines for iPad
    } else {
        // one or two lines for iPhone
    }
} 
```

我有很多情况我都这样做 - 子类用于更大的差异并`UI_USER_INTERFACE_IDIOM`用于基类中的微不足道的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:34:38.850

如果您需要在 N 个地方使用相同的 VC，但每次初始化都略有不同，我会将逻辑移动到 VC 上的特定**工厂类/类别中**

就像它用**例如**SLRequest 对象 / 在 ShareKit 中完成的一样

# intellij-idea - IntelliJ，neo4j，用红色突出显示好的方法（“无法解析”）

> ID：13881439
> 
> 赞同：1
> 
> 时间：2012-12-14T15:18:59.843
> 
> 标签：intellij-idea, neo4j

我正在运行 neo4j 的“imdb”示例项目。它编译没有错误并且运行良好。

但是，编辑器会将一些 neo4j 方法标记为红色（“无法解析”），例如 Actor.getRelationshipTo() Actor.relateTo()

我可以让编辑停止这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:21:27.113

尝试`File`| `Invalidate Caches`. 如果没有帮助，请联系 JetBrains 支持并提供示例项目以重现此问题。

# http - iOS6中是否修改了“Http管道”？

> ID：13881440
> 
> 赞同：1
> 
> 时间：2012-12-14T15:19:00.250
> 
> 标签：http, safari, ios6, pipelining

iOS5 中的“Http 管道”可能会导致一些问题，例如在 Safari 中渲染网页时切换图像。一些网站已经报告了这个问题，[比如这个](http://tech.vg.no/2011/12/14/safari-on-ios-5-randomly-switches-images/)问题，问题的根源是管道“使浏览器能够在接收响应之前在同一个连接上发送多个 HTTP 请求”。

我的问题是：这在 iOS6 中解决或改变了吗？我找不到这样的信息。

# java - JFrame 中只显示一个组件

> ID：13881444
> 
> 赞同：2
> 
> 时间：2012-12-14T15:19:08.633
> 
> 标签：java, swing, jframe, jpanel, layout-manager

作为对我的加密项目的改进，我决定制作一个小 GUI。但是，当我运行程序时，屏幕上只显示了顶部元素，并且它似乎掩盖了其他元素，尽管我无法检查。有谁知道为什么？

下面是我的全部代码，`e()`因为`d()`那些只是加密一个字符串并且与 GUI 无关。我还想要一种在不编辑加密的情况下尽可能加快速度的方法，只是为了让它尽可能好。

```
@SuppressWarnings("serial")
public class EncDecExample extends JFrame implements ActionListener {
    final static JPanel top = new JPanel();
    final static JPanel mid = new JPanel();
    final static JPanel bot = new JPanel();
    final static JTextField in = new JTextField(10);
    final static JTextField out = new JTextField(10);
    final static JButton enc = new JButton("Encrypt");
    final static JButton dec = new JButton("Decrypt");
    final static JFrame f = new JFrame("Encryption/decryption");

    public static void main(String[] args) {
//        EncDec.exampleImplement();

        f.setSize(500, 500);
        f.setResizable(false);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        out.setEditable(false);
        out.setText("Hello");
        in.setVisible(true);
        out.setVisible(true);
        enc.setVisible(true);
        dec.setVisible(true);
        top.add(in);
        mid.add(enc);
        mid.add(dec);
        bot.add(out);
        f.add(top);
        f.add(mid);
        f.add(bot);
        f.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == enc && !in.getText().equalsIgnoreCase("")) {
            out.setText(EncDec.e(in.getText(), 5));
        }
        else if(e.getSource() == dec && !in.getText().equalsIgnoreCase("")) {
            out.setText(EncDec.d(in.getText()));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T15:21:33.637

a 的内容窗格`JFrame`有一个`BorderLayout`. 如果您将组件放置在没有约束的 BL 中，它最终会位于`CENTER`. 中心只能显示一个组件。

为了立竿见影，我建议：

```
f.add(top, BorderLayout.PAGE_START);
f.add(mid);
f.add(bot, BorderLayout.PAGE_END); 
```

## 其他点。

1.  取出并立即`f.setSize(500, 500);`致电`pack()``setVisible(true)`
2.  为了更好地结束 GUI，请更改`f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`为`f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);`
3.  `in.setVisible(true);`除了框架本身，把这些拿出来。当组件被添加到顶级容器并且该容器本身变为可见时，组件会自动变为可见。
4.  更改
    `public class EncDecExample extends JFrame`
    为
    `public class EncDecExample`
    此代码保留对框架的引用，这是正确的方法。

# css - @font-face 不适用于 ie7 和 ie8

> ID：13881445
> 
> 赞同：0
> 
> 时间：2012-12-14T15:19:13.850
> 
> 标签：css, fonts, font-face

我的@font-face 样式如下所示：

```
@font-face {
  font-family: 'Din';
  src: url('/fonts/DINWebPro.eot?') format('eot'),
       url('/fonts/DINWebPro.woff') format('woff'); 
```

}

它适用于除 IE7 和 8 之外的所有浏览器，有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:23:58.227

使用[fontsquirrel](http://www.fontsquirrel.com/fontface/generator)的 @font-face 生成器来生成你需要的所有字体文件类型，我认为早期的 IE 喜欢使用 .svg 字体文件（你没有）。

fontsquirrel 将获取您的字体文件，从中生成所有带有其他扩展名的字体文件，然后将它们连同一个向您展示如何使用它们的 css 文件一起提供给您。

使用此方法将确保您的自定义字体适用于所有主流浏览器，甚至是旧 IE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:45:20.950

如果您在[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)上使用生成器，您将获得一个相当不错的嵌入到每个浏览器中的结果。

话虽如此，您的问题包括 IE 的细微差别。

> “......所以保罗设计的是一种在 IE 到达“有问题”格式之前拦截它的方法。使用最好的 CSS hack（没有无意义的语法），他在 IE 浪费带宽抓取不必要的文件之前转移 IE，并且在它阻塞之前。”</p>

见`src: local("☺")`下文

[Paul Irish](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)建议如下：

```
@font-face {
  font-family: "Your typeface";
  src: url("type/filename.eot");
  src: local("☺"),
    url("type/filename.woff") format("woff"),
    url("type/filename.otf") format("opentype"),
    url("type/filename.svg#filename") format("svg");
  } 
```

注意笑脸是认真的。这是html字符`&#9786;`

还有一个[很好的总结](http://nicewebtype.com/notes/2009/10/30/how-to-use-css-font-face/)，列出了这个过程的每一步。

# sql - 如何强制 oracle 在不删除/重新创建约束的情况下进行级联删除

> ID：13881447
> 
> 赞同：20
> 
> 时间：2012-12-14T15:19:16.877
> 
> 标签：sql, oracle, cascade

我有一个父表，其中有十几个子表引用它。这些子表又具有引用它们的其他子表。等等。

我需要从主父表中删除一行，将其一直向下级联。

在所有地方删除/重新创建约束以使它们“在级联删除”不是一种选择

遍历所有这些并手动删除子行是一场噩梦。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-14T15:26:39.867

DELETE 语句没有使其级联的参数。

因此，您既可以使用户成为用户，也可以`ON CASCADE DELETE`按正确的顺序执行一系列单独的删除。

您可以编写一个“智能删除”过程来调查表结构并在此基础上生成一系列删除，但这可能比编写单独的删除更工作，更像是一场噩梦。而且你*必须*有这些限制才能工作，这实际上并不总是需要的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-20T16:46:19.380

我在 oracle 中解决了这种问题，我故意将数据从一个分支合并到另一个分支 - 目标，然后删除源分支。

[https://sites.google.com/site/keytreechanger/Home](https://sites.google.com/site/keytreechanger/Home) [https://sites.google.com/site/keytreechanger/Home/screenshots](https://sites.google.com/site/keytreechanger/Home/screenshots)

引用

> 鉴于此错误，例如：客户端 Pedrus Root（内部密钥表示 #R=111）与 Petrus Root (#R=222) 相同。将222下的数据移动到111，然后删除222分支。
> KTC 以一种巧妙的方式从数据库的所有相关表中收集与此案例（以及接下来要解决的几个案例）相关的所有数据。
> 该算法仅在需要的地方搜索并使用所有可用的关键组件。
> 出于审计目的，所有数据的备份都在本地维护。本地存储库透明地发展以适应表/字段定义的变化。
> 
> 高级用户可以直观地检查表/关系树，并且可以查看/打印/编辑任何表中的数据，并可以选择修改假定的操作（剪切、剪切和粘贴或完成）。
> 最后，KTC 生成数百行插入、更新和删除的纠正代码来解决这个特殊情况，以合适的顺序列出，以
> delete from rootTable 结尾，其中#R=222。
> 然后，我将代码应用于在线用户。

在您的情况下，过滤器必须删除除删除行之外的所有行。

AFAIK 市场上没有等效的应用程序。

# java - 不能改变颜色

> ID：13881450
> 
> 赞同：0
> 
> 时间：2012-12-14T15:19:20.867
> 
> 标签：java

您好，我正在 Java 中创建一个应用程序（练习），我必须在其中更改绘图类中变量的颜色。当应用程序启动并且我在颜色变量上运行 sysout 时，它显示为空，但是当我按下鼠标右键时，它会在控制器类中更改颜色，但在我的绘图类中没有。有人可以看看并告诉我什么我做错了吗？

这是一段代码

这是绘图类的相关部分

```
 private Color color;
private ArrayList<Point> p = new ArrayList<Point>();

public Drawing(Color color) {
    this.color = color;
    System.out.println("color  " + color);
}

public void draw(Graphics g) {
    for(int i = 0; i < p.size(); i++) {
        g.setColor(color);
        g.fillRect(p.get(i).x, p.get(i).y, 10, 10);
    }
} 
```

这是我的控制器的相关代码。

```
Color color; // kleur vasthouden
Drawing draw; // class definieren
private ArrayList<Drawing> tekening = new ArrayList<Drawing>();
int x, y;

public DrawingPanel() {
    setBackground(Color.WHITE); // zorg voor een witte achtergrond.
    this.addMouseListener(this); // control de mouselistener
    draw = new Drawing(color);
}

public void paintComponent(Graphics g) {
    super.paintComponent(g);
    draw.draw(g);
}

@Override
public void mouseClicked(MouseEvent e) {

    if(e.getButton() == MouseEvent.BUTTON1) {
        Point k = new Point(e.getX(), e.getY());

        draw.addPoint(k);
        System.out.println("punt gezet op " + k);
    }
    if(e.getButton() == MouseEvent.BUTTON3) {
        color = new Color(r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0);
        System.out.println("new color " + color);
    }
    repaint();
} 
```

我希望有人能弄清楚我做错了什么..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:23:39.503

`color`你从来没有真正为我能看到的代码中的任何地方分配一个初始值。您仅在发生鼠标事件时设置它。

```
if(e.getButton() == MouseEvent.BUTTON3) {
    color = new Color(r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0);
    System.out.println("new color " + color);
} 
```

我假设除了打印出这种颜色之外，您还希望将其设置为您的绘图类，然后触发重绘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:26:16.867

在您的类中添加一个*setter*方法，`Drawing`并在鼠标右键单击计算后传递实际颜色：

```
public void setColor(Color color) {
   this.color = color;
} 
```

在控制器中：

```
if(e.getButton() == MouseEvent.BUTTON3) {
    color = new Color(r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0);
    System.out.println("new color " + color);
    draw.setColor(color);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:26:54.013

由于它们是单独的类，因此它们`color`中的每一个都是一个单独的对象。
如果在您的`Drawing`班级中更改`color`为公共，则可以设置`color`为在控制器中创建的新颜色。

```
color = new Color(r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0);
draw.color = color; 
```

您还可以在绘图类中创建一个设置器，并使用它来设置控制器的颜色。

```
public setColor(Color color) {
    this.color = color;
} 
```

此外，在构造函数中将颜色设置为任何值都会阻止它打印为 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:26:58.007

在您的控制器中，您有一个颜色属性，在右键单击时，您设置它，但您从未在绘图类上设置它。尝试 ：

```
if(e.getButton() == MouseEvent.BUTTON3) {
    color = new Color(r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0);
draw.setColor(color); 
```

# c# - 从随机数组中提取最小值和最大值以显示

> ID：13881454
> 
> 赞同：1
> 
> 时间：2012-12-14T15:19:46.410
> 
> 标签：c#, arrays, random, max, min

所以，就像标题说的那样，我需要从我创建的数组中提取最小值和最大值，该数组使用随机数生成器来填充它。我觉得这可能是我需要使用的数学类运算符（IE、math.floor 和 math.ceiling），但如果是这样，我不太确定如何将它们与数组一起使用。我想底线是我不太了解数组是如何工作的，即使我已经使用它们完成了一些任务。这是我到目前为止所拥有的（我必须在列表框中显示所有值并为此分配给出平均值和最小值/最大值）

```
 private void button1_Click(object sender, EventArgs e)
    {
    int SIZE = 10;
    int[] nummers = new int[SIZE];
    Random rand = new Random();
    int total = 0;

    for (int index = 0; index < nummers.Length; index++)
    {
        nummers[index] = rand.Next(1, 100);

    }
    foreach (int value in nummers)
    {
        total += value;
        listBox1.Items.Add(value);
    }
    total/= 10;
    label3.Text = total.ToString("d"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:22:00.900

您可以使用 Linq 让您的生活更轻松：

```
int minimum = numbers.Min();
int maximum = numbers.Max(); 
```

* * *

老款式：

将 foreach 修改为：

```
int maximum = int.MinValue;
int minimum = int.MaxValue;
foreach (int value in nummers)
    {
        if (value < minimum) { minimum = value; }
        if (value > maximum) { maximum = value; }

        total += value;
        listBox1.Items.Add(value);
    } 
```

# c# - 将 .NET 4.0 控制台应用程序部署到不同环境

> ID：13881467
> 
> 赞同：0
> 
> 时间：2012-12-14T15:20:55.397
> 
> 标签：c#, visual-studio-2010, deployment, .net-4.0, vdproj

我创建了一个控制台应用程序，负责从数据库生成数据导出。这必须部署到与数据库运行位置不同的批处理服务器。在 app.config 中，我需要将连接字符串配置到数据库。我有大约八个需要部署此控制台应用程序的环境。到目前为止，我需要存储每个环境的原始配置文件并将其单独复制到安装文件夹中。

我知道的第一件事是将文件添加到 Visual Studio 中的安装项目。在主要输出旁边，我添加了所有带有条件属性的配置文件。我在设置向导（文本框）中添加了一个屏幕，要求安装的用户输入我指定的环境名称。我在其中一个设置项目中成功配置了这个，但在两个项目中我的解决方案不正确。在那些我总是在安装文件夹中得到我的 app.config 文件，而不是我在安装项目中创建的配置文件。当我重命名文件时，只有在设置过程中输入正确的详细信息时才能看到它们。所以我的猜测是我的文件被我项目中的 app.config 覆盖了。

我的设置的构建结果：

```
Building file 'C:\MyProject\MyProject.Setup\Deploy\MyProject.msi'...
Packaging file 'MyProject.exe.config'...
Packaging file 'MyProject.exe'...
Packaging file 'MyProject.exe.config'...
Packaging file 'MyProject.exe.config'... 
```

有谁知道这里出了什么问题？我需要特殊条件或设置吗？或者可能是另一种部署策略。手动编辑配置文件不是一种选择。我感谢所有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:41:33.493

如果仅与连接字符串有关，请添加对您部署到文件夹的第二个配置文件的引用，例如：

```
<connectionStrings configSource="connectionstrings.config" /> 
```

或者单独部署您的完整配置文件，并将其加载到您的应用程序中，例如：

```
var map = new ExeConfigurationFileMap {ExeConfigFilename = @"C:\MyProject\custom.config"};
Configuration config = ConfigurationManager.OpenMappedExeConfiguration(map, ConfigurationUserLevel.None); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T10:44:07.613

只需使用 SlowCheetah 并应用配置转换，请参阅[http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx](http://www.hanselman.com/blog/SlowCheetahWebconfigTransformationSyntaxNowGeneralizedForAnyXMLConfigurationFile.aspx)

# iphone - iOS版本之间的setRegion不一致吗？

> ID：13881475
> 
> 赞同：12
> 
> 时间：2012-12-14T15:21:13.637
> 
> 标签：iphone, objective-c, ios, ipad, mapkit

我前段时间开发了一款游戏。游戏包含在一张西班牙地图上，您必须猜测该地图上的城市位置（我也有 EEUU 和中国版本）我使用 iOS 5 基础并使用 iOS 5 sdk 开发了所有这些。

然后，3 周前我更新了西班牙游戏，我不得不使用 iOS 6 sdk，在模拟器和我的 ipad 2 (iOS 5.0.1) 和 iPod touch (iOS 5.1) 上一切似乎都很好，并发布了更新。

但是当人们开始下载或更新新版本时，他们中的一些人因为地图不适合屏幕而联系了我。

这是我如何在我的设备和模拟器上查看游戏的屏幕截图。（iPad 5.0.1 和 5.0、6.0 和 6.1 的模拟器，在视网膜和正常模式下） ![对](../Images/e5fb83c809dd940961d25adc25ba5c59.png)

这是它如何在其他人的设备上显示的屏幕截图。（装有 iOS 6.0 的 iPad 3 和装有 iOS 6.0.1 的 iPad 2）

![错误的](../Images/e43ee5ef43fdd2f18dfcfd75ddf1d7fe.png)

这是我的 iPad 代码（据我所知，在 iPhone 上按预期工作）

```
CLLocationCoordinate2D centerLocation;
MKCoordinateRegion region;
centerLocation.latitude = 39.016740;
centerLocation.longitude = -5.93504;
region = MKCoordinateRegionMakeWithDistance(centerLocation, 0, 800000);
[map setRegion:region]; 
```

起初我认为这是视网膜问题，因为第一个联系我的人使用的是 iPad 3，我在周一修复了 iPad 视网膜的地图，但昨天我从另一个使用 iPad 2 的用户那里得到了同样的信息。

那么，我做错了吗？iOS版本之间的setRegion不一致吗？如果我的代码在模拟器上运行良好，我该如何测试它？

有人可以在真实设备上尝试我的代码并告诉我他们得到的地图是第一个还是第二个？

**EDIT1：** 接受答案后的最终想法：这不是iOS版本之间的问题，它似乎是时间问题，如果您在视图出现之前或之后设置它，区域会有所不同。它发生在 iOS 5 和 iOS 6 中。

iOS 5 和 iOS 6 之间的唯一区别发生在真实设备上，如果您在地图出现之前设置区域，它会保持原样，但在模拟器上的 iOS 6 上它将保持原样，但在真实设备上，它将显示为视图出现时设置的区域。

因此，解决方案是将区域设置为打开`viewDidAppear`，它将在 iOS 5 和 iOS 6、模拟器和真实设备上以相同的方式显示。

**编辑2：** 区域上的0似乎也与问题有关，如果我使用`region = MKCoordinateRegionMakeWithDistance(centerLocation, 800000, 800000);`该区域在视图加载之前和之后是相同的，至少在模拟器上是这样。如果我`region = MKCoordinateRegionMakeWithDistance(centerLocation, 0, 800000);`在视图加载之前使用该区域，则该区域会有所不同，并且在以后使用它时会显示为“缩放”。

我会等到收到装有 iOS6 的 iPad Retina 后再继续测试这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T19:05:31.503

iOS 5 和 6 中区域的工作方式存在一些重要差异。在 iOS 5 上，您要求设置的区域很少是实际设置的区域。这与 iOS 5 上的 MapKit 始终设置允许平铺图像以 1:1 比例显示的区域有关。在 iOS 6 上，没有平铺图像，所有内容都是从矢量数据中绘制的，因此您获得的区域非常接近您要求的区域。

话虽如此，我认为您的代码的问题可能是时机。当我将地图的区域设置为 时`viewDidLoad:`，即使我使用了适当的跨度（而不是使用`0`纬度增量），我也可以重现您的问题。当我将代码移至 时`-viewDidAppear:`，该区域在装有 iOS 6 的 iPad 以及装有 iOS 6 的模拟器上正确设置。这是我使用的代码：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    CLLocationCoordinate2D centerLocation = 
            CLLocationCoordinate2DMake(39.016740, -5.93504);
    MKCoordinateSpan span = MKCoordinateSpanMake(12.7, 12.7);
    MKCoordinateRegion region = MKCoordinateRegionMake(centerLocation, span);
    [self.mapView setRegion:region animated:NO];
} 
```

我`12.7`用作`latitudeDelta`and `longitudeDelta`。最好将该区域设置为正方形，以使该区域在横向和纵向模式下具有重要的位置。如果要使用该`CLLocationCoordinate2DMake()`功能，则需要导入核心位置框架。

所以我认为问题在于 MapKit 在您尝试设置区域后设置它（在 iOS 6 上）。`-mapView:regionDidChangeAnimated:`您可以使用以下代码检查正在设置的区域：

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
    NSLog(@"%f %f %f %f", 
            self.mapView.region.span.latitudeDelta, 
            self.mapView.region.span.longitudeDelta, 
            self.mapView.region.center.latitude, 
            self.mapView.region.center.longitude);
} 
```

因此，如果您的代码将区域设置为`-viewDidLoad:`，请尝试将其移动到`-viewDidAppear:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:09:27.067

你的坐标区域很奇怪——如果 MapKit 完全忽略它，我不会感到惊讶。

(39.016740, -5.93504) 的中心看起来不错，但您说理想情况下，您的视图将显示 0 米的纬度（即高度为零）和 800 公里的经度。

您是否尝试过提供合理的纬度值？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:37:55.277

在 ios 5 上，您有使用谷歌地图的 mapkit，而在 ios 6 上，您有使用内置地图的 mapkit，可能存在差异——尤其是视觉方面

# vb.net - 在 VS2010 单元测试中，我可以检测测试是否正在运行或调试？

> ID：13881477
> 
> 赞同：0
> 
> 时间：2012-12-14T15:21:14.617
> 
> 标签：vb.net, visual-studio-2010, unit-testing

我正在使用 VS2010 单元测试框架。除了测试我的代码之外，我还在做一些计时事情。但是，这意味着当我使用调试模式单步执行测试代码时，时序会出现偏差。如果测试是使用“运行”或“调试”运行的，我可以在代码中检测到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:56:08.480

我相信 `Debugger.IsAttached`会得到你所需要的

# flash - 使用 Flash Action Script 2.0 获取网站的输出

> ID：13881478
> 
> 赞同：0
> 
> 时间：2012-12-14T15:21:15.600
> 
> 标签：flash, actionscript-2

**我已经下载了一个用action script 2.0**编写的开源 flash 应用程序，我想稍微完成一下。我想为函数使用的变量之一提供一个新值。新值将是来自我网站输出的字符串。我对动作脚本不是很熟悉，你能帮我怎么做吗？

```
 public static function start(varThatNeedsNewValue:String, options:Object):Void{
      var url="http://mysite.com/flash.php";
      ///////////
      /*Grab the output content of the url
      varThatNeedsNewValue=CONTENT OF OUTPUT*/
      ///////////
      //Then let the original script running on...
    } 
```

我尝试了一些我在stackoverflow上找到的方法，但没有一个成功，所以这就是我问你们的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:27:27.697

我想您是在问如何检索网页的 innerHTML。我不确定如何在 AS2 中执行此操作，但是您可以通过 javascript 传递您需要的任何变量（甚至可能是页面的全部内容）（PHP 是服务器端，因此可能不适用于外部事物，例如）当您嵌入 Flash 文件... 以下是有关如何执行此操作的信息：[如何在 Flash 中将参数传递给 actionscript 2？](https://stackoverflow.com/questions/3237402/how-to-pass-parameters-to-actionscript-2-in-flash)

# delphi - 为什么我的 TStrings 对象在我的析构函数有机会运行之前就被销毁了？

> ID：13881482
> 
> 赞同：8
> 
> 时间：2012-12-14T15:21:36.210
> 
> 标签：delphi

我有一个从 TFrame 扩展的对象。这包含一个 TCombobox。

我想确保在我的框架被销毁时释放任何关联的对象。但是，当我的析构函数运行时，我可以访问组合框，但它的项目已被清除。

这会做什么？如何访问析构函数中的项目？

我的析构函数看起来像这样；

```
destructor TfraImportAttachments.Destroy;
begin

  MessageDlg(IntToStr(cboCategory.Items.count), mtInformation, [mbOK], 0);
  FreeObjects(cboCategory.Items);

  inherited;
end; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T16:31:25.370

A`DestroyHandle`可能在析构函数之前到达组合框。然后项目消失了，因为它们没有保存`TCustomComboBox.FSavedItems`到`TCustomComboBox.DestroyWnd`.

组合框 Delphi 对象仍然存在，但实际控件（通过窗口句柄访问的控件）消失了。通过访问 ComboBox.Items，VCL 重新创建了实际的控件，以便它可以检索项目，但该新控件没有任何项目，因此`Items.Count`返回 0。

一种解决方案是将项目放入组合框和 a`TObjectList`中，`TList`或者`TList<TObject>`取决于您想对它们做什么。因此，所有权在“代码”列表中，而项目仍在组合框中引用。

# c++ - 我应该担心指针转换期间的对齐吗？

> ID：13881487
> 
> 赞同：56
> 
> 时间：2012-12-14T15:21:49.370
> 
> 标签：c++, c, casting, alignment

在我的项目中，我们有一段这样的代码：

```
// raw data consists of 4 ints
unsigned char data[16];
int i1, i2, i3, i4;
i1 = *((int*)data);
i2 = *((int*)(data + 4));
i3 = *((int*)(data + 8));
i4 = *((int*)(data + 12)); 
```

我和我的技术负责人谈过，这段代码可能不可移植，因为它试图将 a`unsigned char*`转换为`int*`通常具有更严格对齐要求的 a。但是技术负责人说没关系，大多数编译器在转换后保持相同的指针值，我可以像这样编写代码。

坦率地说，我不是很相信。经过研究，我发现有些人反对使用像上面这样的指针转换，例如，[here](https://www.securecoding.cert.org/confluence/display/cplusplus/EXP36-CPP.+Do+not+convert+pointers+into+more+strictly+aligned+pointer+types)和[here](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=548)。

所以这是我的问题：

1.  在实际项目中转换后取消引用指针真的安全吗？
2.  C风格的铸造和之间有什么区别`reinterpret_cast`吗？
3.  C 和 C++ 之间有什么区别吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-14T15:28:54.563

> 1\. 在实际项目中转换后取消引用指针真的安全吗？

如果指针碰巧没有正确对齐，它确实会导致问题。我亲眼看到并修复了由于将 a`char*`转换为更严格对齐的类型而导致的实际生产代码中的总线错误。即使您没有收到明显的错误，您也可能会遇到不太明显的问题，例如性能下降。即使您没有立即发现任何问题，严格遵循标准以避免 UB 也是一个好主意。（代码打破的一条规则是严格的别名规则，§ 3.10/10*）

更好的选择是使用`std::memcpy()`或者`std::memmove`如果缓冲区重叠（或更好[`bit_cast<>()`](https://gist.github.com/3472964)）

```
unsigned char data[16];
int i1, i2, i3, i4;
std::memcpy(&i1, data     , sizeof(int));
std::memcpy(&i2, data +  4, sizeof(int));
std::memcpy(&i3, data +  8, sizeof(int));
std::memcpy(&i4, data + 12, sizeof(int)); 
```

一些编译器比其他编译器更努力地确保 char 数组的对齐比必要的更严格，因为程序员经常会犯这个错误。

```
#include <cstdint>
#include <typeinfo>
#include <iostream>

template<typename T> void check_aligned(void *p) {
    std::cout << p << " is " <<
      (0==(reinterpret_cast<std::intptr_t>(p) % alignof(T))?"":"NOT ") <<
      "aligned for the type " << typeid(T).name() << '\n';
}

void foo1() {
    char a;
    char b[sizeof (int)];
    check_aligned<int>(b); // unaligned in clang
}

struct S {
    char a;
    char b[sizeof(int)];
};

void foo2() {
    S s;
    check_aligned<int>(s.b); // unaligned in clang and msvc
}

S s;

void foo3() {
    check_aligned<int>(s.b); // unaligned in clang, msvc, and gcc
}

int main() {
    foo1();
    foo2();
    foo3();
} 
```

[http://ideone.com/FFWCjf](http://ideone.com/FFWCjf)

> 2\. C-style cast 和 reinterpret_cast 有什么区别吗？

这取决于。C 风格的转换根据所涉及的类型做不同的事情。指针类型之间的 C 风格转换将产生与 reinterpret_cast 相同的结果；请参阅 § 5.4*显式类型转换（强制转换表示法）*和 § 5.2.9-11。

> 3\. C和C++有什么区别吗？

只要您处理的是 C 中合法的类型，就不应该有。

* * *

* 另一个问题是 C++ 没有指定从一种指针类型转换为具有更严格对齐要求的类型的结果。这是为了支持甚至无法表示未对齐指针的平台。但是，当今的典型平台可以表示未对齐的指针，并且编译器将这种强制转换的结果指定为您所期望的。因此，此问题是混叠违规的次要问题。见[expr.reinterpret.cast]/7。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-14T15:30:45.707

这不好吧，真的。对齐可能是错误的，并且代码可能违反严格的别名。你应该明确地解压它。

```
i1 = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24; 
```

等等。这绝对是定义明确的行为，而且作为奖励，它也是与字节顺序无关的，与您的指针转换不同。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-14T15:34:05.137

在示例中，如果初始 char 指针正确对齐，您在此处显示的操作在几乎所有现代 CPU 上都是安全的。一般来说，这是不安全的，也不能保证有效。

如果初始 char 指针未正确对齐，这将在 x86 和 x86_64 上工作，但在其他架构上可能会失败。如果你很幸运，它只会给你一个崩溃，你会修复你的代码。如果您不走运，未对齐的访问将由您的操作系统中的陷阱处理程序修复，并且您将获得糟糕的性能，而没有任何明显的反馈说明它为何如此缓慢（我们正在谈论某些代码的缓慢速度，这是 20 年前 alpha 的一个大问题）。

即使在 x86 & co 上，未对齐的访问也会变慢。

如果你想在今天和未来都安全，就`memcpy`不要像这样做任务。现代编译器可能会优化`memcpy`并做正确的事情，如果没有，`memcpy`它自己将进行对齐检测并做最快的事情。

此外，您的示例在某一点上是错误的： sizeof(int) 并不总是 4。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-14T15:33:40.603

解压缓冲数据的正确方法`char`是使用`memcpy`：

```
unsigned char data[4 * sizeof(int)];
int i1, i2, i3, i4;
memcpy(&i1, data, sizeof(int));
memcpy(&i2, data + sizeof(int), sizeof(int));
memcpy(&i3, data + 2 * sizeof(int), sizeof(int));
memcpy(&i4, data + 3 * sizeof(int), sizeof(int)); 
```

强制转换违反了别名，这意味着编译器和优化器可以自由地将源对象视为未初始化。

关于你的3个问题：

1.  不，由于别名和对齐，取消引用强制转换指针通常是不安全的。
2.  不，在 C++ 中，C 样式转换是根据`reinterpret_cast`.
3.  不，C 和 C++ 同意基于强制转换的别名。基于联合的别名的处理有所不同（C 在某些情况下允许这样做；C++ 不允许）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T15:30:24.880

更新：我忽略了一个事实，即确实较小的类型可能与较大的类型不对齐，就像在您的示例中一样。您可以通过反转转换数组的方式来缓解该问题：将数组声明为 int 数组，并`char *`在需要以这种方式访问​​它时将其转换为。

```
// raw data consists of 4 ints
int data[4];

// here's the char * to the original data
char *cdata = (char *)data;
// now we can recast it safely to int *
i1 = *((int*)cdata);
i2 = *((int*)(cdata + sizeof(int)));
i3 = *((int*)(cdata + sizeof(int) * 2));
i4 = *((int*)(cdata + sizeof(int) * 3)); 
```

* * *

基本类型数组不会有任何问题。在处理[结构化数据](http://en.wikipedia.org/wiki/Data_structure_alignment)数组（`struct`在 C 中）时会出现对齐问题，*如果数组的原始原始类型大于它被转换为的类型*，请参阅上面的更新。

将 char 数组转换为 int 数组应该是完全可以的，前提是您将 4 的偏移量替换为`sizeof(int)`, 以匹配代码应该运行的平台上的 int 大小。

```
// raw data consists of 4 ints
unsigned char data[4 * sizeof(int)];
int i1, i2, i3, i4;
i1 = *((int*)data);
i2 = *((int*)(data + sizeof(int)));
i3 = *((int*)(data + sizeof(int) * 2));
i4 = *((int*)(data + sizeof(int) * 3)); 
```

请注意，只有当您以某种方式从一个平台以不同的字节顺序将数据共享到另一个平台时，您才会遇到[字节顺序问题。](http://en.wikipedia.org/wiki/Endianness)否则，它应该完全没问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-14T18:55:24.373

您可能想向他展示根据编译器版本的不同情况会有所不同：

*   [GCC 4.3.4](http://ideone.com/Q30G2x)
*   [GCC 4.7.2](http://www.stacked-crooked.com/view?id=d3e31b043a739b36478e58d2d9a129fc)

除了对齐之外，还有第二个问题：标准允许您投射`int*`to`char*`但不能反过来（除非`char*`最初是从 an投射的`int*`）。[有关更多详细信息，请参阅此帖子。](https://stackoverflow.com/questions/12612488/aliasing-t-with-char-is-allowed-is-it-also-allowed-the-other-way-around)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-14T22:42:29.253

是否需要担心对齐取决于指针所源自的对象的对齐方式。

如果您转换为具有更严格对齐要求的类型，则它是不可移植的。

与您的示例一样，数组的基础`char`不需要比元素类型更严格的对齐方式`char`。

但是，指向任何对象类型的指针都可以转换为 a`char *`并返回，而不管对齐方式如何。指针保留原始的`char *`更强对齐。

您可以使用联合来创建更强烈对齐的 char 数组：

```
union u {
    long dummy; /* not used */
    char a[sizeof(long)];
}; 
```

联合的所有成员都从同一个地址开始：开始没有填充。因此，当在存储中定义联合对象时，它必须具有适合最严格对齐的成员的对齐方式。

我们的`union u`上面对于 type 的对象来说已经足够严格了`long`。

违反对齐限制可能会导致程序在移植到某些架构时崩溃。或者它可能有效，但对性能有轻微到严重的影响，这取决于未对齐的内存访问是在硬件中实现的（以一些额外的周期为代价）还是在软件中（到内核的陷阱，软件在其中模拟访问，需要付出代价）许多周期）。

# java - 如何加载外部类？

> ID：13881503
> 
> 赞同：-3
> 
> 时间：2012-12-14T15:22:45.277
> 
> 标签：java, parsing, expression, classloader

嗨，我试图绕过制作算术表达式解析器的过程，因为从头开始构建它有点困难，而且我也不知道写一个，我们也不允许使用其他材料。我想出了创建一个类的想法，该类将代码写入另一个类文件，从而绕过字符串到表达式的评估过程。

```
public void PrintCode(String filename,String a) {
    PrintStream ps = null;
    try {
        ps = new PrintStream(filename);
    } catch (FileNotFoundException ex) {
        System.out.println("printWords: File open error: " + filename);
    }
        ps.println(i);
        ps.println(" public int a = "+a + ";\n\n" + " public int geta()\n    {\n    return a;\n    }" +"\n\n}");
        ps.close();

} 
```

a 是 String 中的给定表达式。文件名用于 ex.：表达式.java。另一个奇怪的是java可以在代码中计算这些表达式，但是没有内置函数来评估给定的字符串类型表达式。我的问题实际上是这个代码编写是在程序完成后保存的，我需要重新加载写入后的类，或者写入后加载它然后执行 geta() 方法进行计算。另一件事是以某种方式从代码重新启动程序并从那一点继续。我只是一个新手，我们只在这个学期学习了java..所以如果这里有什么问题，我很抱歉。提前感谢您的帮助！

编辑：我们没有学习 javascript，所以我们不能，或者不允许使用它......对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:34:46.117

我会尝试调查 JavaCompiler 类。看看[这篇](http://tech.gaeatimes.com/index.php/archive/how-to-compile-java-source-within-java-program/)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:37:59.747

[您可以使用ASM](http://asm.ow2.org/)等一些库从 Java 编写字节码，但我的建议是使用[ScriptEngine](http://docs.oracle.com/javase/6/docs/api/javax/script/ScriptEngine.html) (Java 6+) 接口来使用 JavaScript 或其他一些脚本语言来执行您的数学运算。

我将在我的博客上更新一篇关于此的文章，因为我将在我自己的项目中使用它。当帖子可用时，我会发表评论。

# c++ - 检索有关预处理器指令的信息

> ID：13881506
> 
> 赞同：12
> 
> 时间：2012-12-14T15:22:58.263
> 
> 标签：c++, serialization, clang, libclang

我最近开始使用 libclang 来解析 C 文件。我遇到的问题显然是，libclang 在生成 AST 之前启动了预处理器。我想禁止预处理器运行，而是获得预处理器指令在文件中的信息......

我使用以下 python 脚本（cindex.py 和 libclang）

```
import codecs
from clang.cindex import *

class SourceFile(object):
    def __init__(self, path):
        with codecs.open(path, 'r', 'utf-8') as file:
            self.file_content = file.read()

        index = Index.create()
        root_node = index.parse(path)

        for included in root_node.get_includes():
            print included.include

        self.print_declerations(root_node.cursor)

    def print_declerations(self, root, recurse=True):
        print root.kind.name, root.spelling
        if root.kind.is_declaration():
            node_def = root.get_definition()
            if node_def is not None:
                start_offset = node_def.extent.start.offset
                end_offset = node_def.extent.end.offset + 1
                print self.file_content[start_offset:end_offset], '\n'

        if recurse:
            for child in root.get_children():
                self.print_declerations(child, False)

if __name__ == '__main__':
    path = 'Sample.cpp'
    print 'Translation unit:', path
    source = SourceFile(path) 
```

哪个输出

```
Translation unit: Sample.cpp
/mingw/include\stdio.h
/mingw/include\_mingw.h
/mingw/include\sys/types.h
TRANSLATION_UNIT None
TYPEDEF_DECL __builtin_va_list

STRUCT_DECL _iobuf

TYPEDEF_DECL FILE

VAR_DECL _iob
UNEXPOSED_DECL 

FUNCTION_DECL main
int main()
{
    printf(HELLO_WORLD);
    return 0;
} 
```

对于以下 C 代码：

```
#include <stdio.h>
#define HELLO_WORLD "HELLO!"

int main()
{
    printf(HELLO_WORLD);
    return 0;
} 
```

我想要的是在代码中为我的#define 获取 DEFINE_DECL HELLO_WORLD（目前我什么也得不到）。当然，我的#include 也有类似的声明。这可能吗？

编辑：基本上，我想在没有扩展预处理器指令的情况下解析文件。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-08-08T17:25:42.407

如果您将 PARSE_DETAILED_PROCESSING_RECORD 作为选项添加到对 index.parse() 的调用中，您将可以访问预处理器节点。

```
index = clang.cindex.Index.create()                                                                         
tu = index.parse(filename, options=clang.cindex.TranslationUnit.PARSE_DETAILED_PROCESSING_RECORD) 
```

此选项映射到以下 libclang C API 选项值。那里有一条评论，其中包含更多上下文。

```
/**                                                                         
 * \brief Used to indicate that the parser should construct a "detailed"    
 * preprocessing record, including all macro definitions and instantiations.
 *                                                                          
 * Constructing a detailed preprocessing record requires more memory        
 * and time to parse, since the information contained in the record         
 * is usually not retained. However, it can be useful for                   
 * applications that require more detailed information about the            
 * behavior of the preprocessor.                                            
 */                                                                         
CXTranslationUnit_DetailedPreprocessingRecord = 0x01, 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T17:45:10.517

几天前，我在#llvm freenode irc 频道上问了同样的问题。答案是“macroses 不是 AST 的一部分，所以你不能”，但很可能是“-fsyntax-only”选项和 clang 插件而不是 libclang 可能会帮助你。

编辑：看起来现在实际上是可能的，请参阅 bradtgmurray 的回答

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-29T06:00:22.410

如果您使用命令行参数作为调用 libclang 的一种方式，这里是来自 libclang C API 实现的相关代码：

```
// Do we need the detailed preprocessing record?
if (options & CXTranslationUnit_DetailedPreprocessingRecord) {
  Args->push_back("-Xclang");
  Args->push_back("-detailed-preprocessing-record");
} 
```

# asp.net-mvc-3 - 在 Visual Studio 中创建的 SQL Server DB 不会在 SQL Server Management Studio 中打开

> ID：13881507
> 
> 赞同：0
> 
> 时间：2012-12-14T15:22:59.683
> 
> 标签：asp.net-mvc-3, visual-studio-2010, sql-server-2008, entity-framework

我刚刚使用代码优先技术与实体框架一起创建了一个 sql server 紧凑型数据库，作为 MVC3 项目的一部分。这是成功的，我可以通过 Visual Studio 连接到这个新数据库。但是，当我尝试使用 Sql Server Management Studio 连接到同一个数据库时，我遇到了问题。这是我得到的错误：

![在此处输入图像描述](../Images/9ac8c212d5e9080bde6535aade090a02.png)

谁能告诉我我需要做什么才能建立连接？

以下是我的 webconfig 文件中用于创建数据库的代码：

```
<add name="PetrolPriceDBContext"
     connectionString="Data Source=|DataDirectory|PetrolPrices.sdf"
     providerName="System.Data.SqlServerCe.4.0"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:43:41.337

您**无法使用****SSMS 2008 R2**打开 SQL Server Compact 4文件，**只能打开 3.5 个文件**。

您可以使用 Visual Studio 2010 SP1 + VS Tools for SQL CE 4（通过 WepPI 安装）

检查[**ErikEJ 博客罐**](http://erikej.blogspot.com/2010/12/visual-studio-tools-for-sql-server.html)

这里有一些 3 rd 方工具[**在这里**](http://erikej.blogspot.com/2009/04/sql-compact-3rd-party-tools.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:48:45.147

根据 marc_s 的评论，这里是您需要的官方下载链接：

[http://www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)

选择 SQLManagementStudio_x64_ENU.exe 或 SQLManagementStudio_x86_ENU.exe

* * *

我通常只使用 ErikEJ 的 SQL Server Compact Toolbox 进行 SSCE4 工作。

[http://sqlcetoolbox.codeplex.com/](http://sqlcetoolbox.codeplex.com/)

[Visual Studio 加载项版本](http://visualstudiogallery.msdn.microsoft.com/0e313dfd-be80-4afb-b5e9-6e74d369f7a1/)

# wcf - 如何在消费应用程序中阅读 FaultException 详细信息？

> ID：13881510
> 
> 赞同：0
> 
> 时间：2012-12-14T15:23:11.100
> 
> 标签：wcf, webmethod, asp.net-4.5

在我的 WCF WebMethod 中，我有以下提供一些参数验证的代码。它工作正常并抛出 FaultException：

```
Public Function BeforeCall(operationName As String, inputs() As Object) As Object Implements IParameterInspector.BeforeCall
    Dim u As MyAppUser = CType(inputs(0), MyAppUser)
    If u.FirstName Is Nothing Then
        Throw New FaultException(Of String)("First Name is Nothing", "First name must be a string value, and not empty.")
    End If
    Return u
End Function 
```

然后，在消费应用程序中，我以触发错误的方式调用该方法（以检查它是否有效）。我捕捉到错误以提供反馈，如下所示：

```
Dim u As New ServiceReference1.MyAppUser
u.FirstName = Nothing
u.Surname = "SomeSurname"
Dim i As New ServiceReference1.Service1Client
Dim u2 As New ServiceReference1.MyAppUser
Try
    u2 = i.GetDataUsingDataContract(u)
Catch fe As FaultException
    Trace.Warn("FaultException Caught")
    Trace.Warn(fe.Message)
    Exit Sub
Catch ex As Exception
    Throw
End Try 
```

然而，在跟踪输出中，我只看到：

> **捕获的故障异常**
> 
> **名字必须是字符串值，并且不能为空。**

谁能告诉我如何阅读 FaultException 详细信息以及抛出 FaultException 时提供的原因？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:13:00.420

要获取异常详细信息，您将创建一个自定义[故障契约](http://msdn.microsoft.com/en-us/library/ms752208.aspx)，该契约包含在[FaultException](http://msdn.microsoft.com/en-us/library/ms576199.aspx)的详细信息中。此外，您将在抛出异常时包含[FaultReason 。](http://msdn.microsoft.com/en-us/library/system.servicemodel.faultreason.aspx)有关详细信息，请参阅以下文章。

*   [WCF 服务中的故障处理](http://msdn.microsoft.com/en-us/library/ee942778.aspx)
*   [WCF 错误处理和一些最佳实践](http://blogs.msdn.com/b/pedram/archive/2008/01/25/wcf-error-handling-and-some-best-practices.aspx)
*   [WCF 中的异常处理](http://www.codeproject.com/Articles/115006/Exception-Handling-in-WCF)

# javascript - 单选按钮不应用 jQuery 移动样式？

> ID：13881512
> 
> 赞同：0
> 
> 时间：2012-12-14T15:23:23.393
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

我正在使用 jQuery mobile 处理我的 MVC 项目，我创建了一个局部视图页面 (_createanswer)，并且在我拥有的页面内部：

```
<input type ="radio" value="1" name="select-answer" id="select-answer" /> Agree
<input type ="radio" value="1" name="select-answer" id="select-answer" />Disagree
<input type ="radio" value="2" name="select-answer" id="select-answer"/>Strongly Agree 
<input type ="radio" value="3" name="select-answer" id="select-answer"/>Strongly Disagree 
```

并且此部分页面与查看页面（详细信息）集成在一起。

在我的（详细信息）页面上，我有：

```
 @{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.Mobile.cshtml";

}

<div class="content_title ">
    Question @Model.Id. @Model.Name
</div>
<div class="content_area">
    <div class="text">

        @using (Html.BeginForm("Create", "MayoAnswers"))
        {
            @Html.Partial("_CreateAnswer")

            <div class="innerspacer">
                <input type="submit" value="Next" data-theme="d" />
            </div>

        }
    </div>
</div> 
```

我的问题是所有那些单选按钮都没有 Jquery 移动样式，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:30:31.830

我认为您可能需要将它们包装在一个控制组中（或者它显示在 jQuery Docs 上），标签和不同的 id-s 也不错：

```
<fieldset data-role="controlgroup">
<input type ="radio" value="1" name="select-answer" id="select-answer-1" />
<label for="select-answer-1">Agree</label> 
<input type ="radio" value="1" name="select-answer" id="select-answer-2" />
<label for="select-answer-2">Disagree</label> 
<input type ="radio" value="2" name="select-answer" id="select-answer-3"/>
<label for="select-answer-3"> Strongly Agree </label>
<input type ="radio" value="3" name="select-answer" id="select-answer-4"/>
<label for="select-answer-4"> Strongly Disagree </label>
</fieldset> 
```

# iphone - 加速 -drawRect: UIView 子类的方法

> ID：13881516
> 
> 赞同：0
> 
> 时间：2012-12-14T15:23:44.823
> 
> 标签：iphone, objective-c, ios, uiview, drawrect

我创建了一个自定义 UIView 子类。在模拟器上一切正常，但在设备上非常慢。我的`-drawRect:`方法大约需要 100 毫秒才能完全重绘视图。

当我向该视图添加平移手势时出现了速度问题，并且在拖动时，该视图需要每秒重绘多次。

我需要优化 drawRect: 方法。这是我当前的`-drawRect:`方法代码：

```
- (void)loayoutSubviews
{
    for (UIView* subview in self.subviews)
    {
        [subview removeFromSuperview];
    };

    // ...
    // some calculations here... assume that they can not be optimized
    // ...

    for (unsigned int blockCounter=0; blockCounter<blockQuantity; blockCounter++)
    {
        NSNumber *y=[blockTops objectAtIndex:blockCounter];
        NSNumber *height=[blockHeights objectAtIndex:blockCounter];

        if ([height intValue]>2)
        {
            if ([y doubleValue]>self.frame.size.height/2.0)
            {
                double angle= [[self angleValueForBlockHeight:height] doubleValue];

                UIView *bView=[NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:[blocks objectAtIndex:blockCounter]]];
                [bView setFrame:CGRectMake(0.0, [y doubleValue], self.frame.size.width, blockSize.height)];
                [bView.layer setMasksToBounds:YES];

                double oldHeight=bView.frame.size.height;

                [bView.layer setAnchorPoint:CGPointMake(0.5, 1.0)];
                [bView setFrame:CGRectMake(bView.frame.origin.x, bView.frame.origin.y+bView.frame.size.height/2.0, bView.frame.size.width, bView.frame.size.height)];

                if ([height doubleValue]!=blockSize.height)
                {
                    //preparing transform
                    CATransform3D basicTrans = CATransform3DIdentity;
                    basicTrans.m34 =1.0/-projection;

                    double rangle;
                    rangle=angle/360*(2.0*M_PI);

                    bView.layer.transform = CATransform3DRotate(basicTrans, rangle, 1.0f, 0.0f, 0.0f);

                };

                double newHeight=bView.frame.size.height;

                [bView setCenter:CGPointMake(bView.center.x, bView.center.y-(oldHeight-newHeight))];

                //adding subview
                [self addSubview:bView];
            }
            else
            {                
                double angle= [[self angleValueForBlockHeight:height] doubleValue];

                UIView *bView=[NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:[blocks objectAtIndex:blockCounter]]];
                [bView setFrame:CGRectMake(0.0, [y doubleValue], self.frame.size.width, blockSize.height)];
                [bView.layer setMasksToBounds:YES];

                [bView.layer setAnchorPoint:CGPointMake(0.5, 0.0)];
                [bView setFrame:CGRectMake(bView.frame.origin.x, bView.frame.origin.y-bView.frame.size.height/2.0, bView.frame.size.width, bView.frame.size.height)];

                if ([height doubleValue]!=blockSize.height)
                {
                    //preparing transform
                    CATransform3D basicTrans = CATransform3DIdentity;
                    basicTrans.m34 =1.0/-projection;

                    double rangle;
                    rangle=(360.0-angle)/360*(2.0*M_PI);

                    bView.layer.transform = CATransform3DRotate(basicTrans, rangle, 1.0f, 0.0f, 0.0f);

                };

                //adding subview
                [self addSubview:bView];
            };
        }
        else
        {
            //do not need to draw blocks with very low height
        };
    };
} 
```

这是平移手势识别器代码：

```
-(void)handlePanGesture:(UIPanGestureRecognizer *)sender
{        
    double translatedY = [sender translationInView:self].y;
    double delta;

    if (fabs(translatedY)<fabs(oldTranslatedY))
    {
        [sender setTranslation:CGPointZero inView:self];
        oldTranslatedY=0.0;
        delta=0.0;
    }
    else
    {
        delta=translatedY-oldTranslatedY;
        oldTranslatedY=translatedY;
    };

    double pOffset=delta/((blockQuantity*blockSize.height)-self.frame.size.height);

    self.scrollPosition=self.scrollPosition-pOffset;

    if (self.scrollPosition<0.0)
    {
        self.scrollPosition=0.0;
    }
    else if(self.scrollPosition>1.0)
    {
        self.scrollPosition=1.0;
    };

    [self setNeedsLayout];
} 
```

请随时问我任何问题。

**更新：将代码从 drawRect: 方法移动到 layoutSubviews**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:32:54.870

您可以使用 Instruments 来检查哪种方法花费的时间最多，但我认为它是取消归档和创建 UIView。你为什么需要它？如果您每次都需要它们，为什么不将 UIView 保存在内存中。

# php - 使用 Zend Framework 将变量发送到特定视图

> ID：13881523
> 
> 赞同：0
> 
> 时间：2012-12-14T15:24:10.893
> 
> 标签：php, zend-framework, templates, variable-assignment

在我的控制器中，我想在将用户重定向到某个视图之前将变量发送到某个视图：

```
class IndexController extends Zend_Controller_Action {

      public function permissionAction() 
      {
    /*....*/
              $this->view->inscription->email = $params['email'];

              $this->_redirect('/inscription'); // redirection to the inscription view

      }
} 
```

在我的题词视图中：我尝试使用以下方法获取变量：

```
<?php echo $this->email; ?> 
```

但它不起作用......（显示“null”）有人可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:16:49.110

您分配给视图的变量仅在当前请求期间持续存在。由于您将用户重定向到另一个 URL（告诉他们的浏览器向 发出另一个请求`/inscription`），因此该数据会丢失。

在权限操作中呈现数据，使用`_forward`代替`_redirect`，或将数据存储在会话中。如果不确切知道这个动作和铭文动作的作用，很难知道其中哪一个最合适。

# android - Android 浏览器和背面可见性问题

> ID：13881524
> 
> 赞同：7
> 
> 时间：2012-12-14T15:24:11.143
> 
> 标签：android, css, webkit, css-transitions

我在 Androids webkit 浏览器中实现 3d 变换（特别是 Y 轴旋转）时遇到问题。我的实现类似于这个例子：[http](http://desandro.github.com/3dtransforms/examples/card-01.html) ://desandro.github.com/3dtransforms/examples/card-01.html 一个 div 被翻转`-webkit-transform: rotateY( 180deg );`但似乎`-webkit-backface-visibility: hidden;`没有任何效果，因为 div 的背面总是可见的。这是运行 4.1 的 Android 模拟器的屏幕截图：

![前面的div在哪里？](../Images/a23edf5fba107f5b9877c292fb8b6b86.png)

这里发生了什么？该示例在 iOS Safari 上运行良好。这是一个已知的Android错误，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T21:18:53.423

尝试添加 translateZ 来伴随您的旋转：

所以直接卡是：

```
-webkit-transform: rotateY(0deg) translateZ(2px); 
```

翻转的卡片是：

```
-webkit-transform: rotateY(180deg) translateZ(-2px); 
```

应该没有深度冲突，因为卡片的两面仍然会隐藏背面可见性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T22:57:39.843

我在 Chrome/WinXP 上也遇到过这个错误。
您可以使用以下解决方法：

**HTML**

```
<div id="container">
    <div class="card" id="card1">1</div>
    <div class="card" id="card2">2</div>
</div> 
```

**CSS**

```
.card {
    width: 150px;
    height: 200px;

    position: absolute;
    top: 50px;
    left: 50px;

    color: #FFF;
    font-size: 100px;
    text-align: center;
}

#card1 {
    background-color: #F00;
    z-index: 1;
}

#card2 {
    background-color: #00F;
    z-index: 0;
    -webkit-transform: rotateY(-180deg);
}

#container {
    -webkit-perspective: 700px;
}

#container #card1 {
    -webkit-transition: -webkit-transform .5s linear, z-index 0s .25s linear;
}

#container #card2 {
    -webkit-transition: -webkit-transform .5s linear, z-index 0s .25s linear;
}

#container:hover #card1 {
    z-index: 0;
    -webkit-transform: rotateY(180deg);
}

#container:hover #card2 {
    z-index: 1;
    -webkit-transform: rotateY(0deg);
}
​ 
```

我正在使用线性缓动来计时 z-index 交换。
您可能需要稍微调整一下视角。

JsFiddle：http: [//jsfiddle.net/dwUvR/3/](http://jsfiddle.net/dwUvR/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T23:26:11.063

在我的cordova android应用程序上报告了这个错误..他们在4.1.2 .. gs2 ..将它安装在genymotion上，并在翻转时将我的背面索引更改为高于正面..它作品。它已经这样坏了一年了。:\

# php - 如何根据 php 脚本中的验证更改页面中的一段文本？

> ID：13881525
> 
> 赞同：0
> 
> 时间：2012-12-14T15:24:10.147
> 
> 标签：php, forms, text, submit, alter

我有一个 div 标签，它构成了我网站的一个区域，我希望允许用户提交他们的电子邮件作为邮件列表的一部分。我有执行此操作的 php 代码，但是，我想做一些调整以使其在可用性方面更好。

我目前有相关区域的 html

```
 <div id="sideimage1">
    <div id="maillist">
    <div class="sidebartitle">Keep Up To Date</div>
    <div class="sidebartext">Sign up now to receive free newsletters and the best deals direct to your email.</div>
    <form id="maillist" name="maillist" method="post" action="maillistprocess.php" style="padding-top:10px;">

    <div style="text-align:left;"><input name="email" type="text" id="email" size="40" style="margin-top:5px; margin-left:15px; font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif;" value="name@example.com"/>
    </div>

    <div style="padding-top: 15px; text-align: left; margin-left:15px;">
    <input name="submit" type="image" alt="Click To Join Our Mailing List" class="JoinNowbutton" 
    src="../WebImages/JoinNowButton1.jpg" onmouseover="this.src='../WebImages/JoinNowButton2.jpg'" onmouseout="this.src='../WebImages/JoinNowButton1.jpg'"/></div>
    </form>
    </div> 
```

我想知道是否有人知道，当用户单击加入按钮时，它会根据我的 php 脚本中的验证结果替换“sibebartext”，例如“恭喜”或“您尚未输入值”出一个空盒子。在我知道如何做到这一点之前，我只是让我的 php 直接用户在他们成功注册后返回主页。

我认为可能需要使用 jquery 来完成，但对此没有太多经验。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:41:14.240

您可以为此使用 jquery。通过 AJAX 而不是常规请求提交表单的简单方法可以使用：

```
$('form').submit(function() {
  var $el = $(this);
  var url = $el.attr('action');

  $.post(url, $el.serialize(), function(data) { 
    if (data=='success') {
      $('.sidebartext').html('congratz');
    } else {
      alert('error: ' + data);
    }
  }).error(function() { alert('something went wrong'); });

  return false;
}); 
```

然后在 php 中，在成功时返回“成功”作为完整响应，或者在失败时返回错误消息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:43:32.987

```
$("form#maillist").on("submit", function() {
  var s = $("#email").val();
  if(s=="") {
    $(".sidebartext").text("Enter Some Value");
    return false;
    //easier to return false. Else it could get complicated with more checks and all the nested if statments (considering also checking name/addres/etc
  }

  $.ajax({
    url : "check.php",
    data : s,
    cache : false,
    success : function(data) {
      if(data=='Completed')
        $('.sidebartext').html("Congratulations!");
      else
        $('.sidebartext').html("Error! " + data); //allow for more information in the error then just error (perhaps invalid email or email already in use)
    }
  }
}); 
```

在 PHP CHECK 和 ECHO 中“恭喜！” 成功和 ECHO “错误！” 对于一些错误，还将 check.php 更改为您的 php 脚本名称！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:45:17.013

您可以使用 javascript 检查空白值，然后在一切正常的情况下提交表单：

```
function checkForm(){
        if(document.getElementById('email').value == ''){
            document.getElementById('sidebartext').innerHTML = 'You have not entered a vlaue';
        }else{
            form[0].submit;
        }
    } 
```

确保`<div class="sidebartext">`有一个 id `sidebartext`。

我建议进行 ajax 调用以确保电子邮件实际插入到数据库中。[这是](http://api.jquery.com/jQuery.ajax/)一个例子。

ajax 调用的另一个例子：

```
xmlHttp = new XMLHttpRequest();
xmlHttp.open('GET', '/ajax/script.php?id=' + id, true);
xmlHttp.onreadystatechange = function()
{
    if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
    {
       //complete
    }
    else
    {
       //try again
    }
} 
```

# ajax - Ajax：多个表单共享相同的 id

> ID：13881527
> 
> 赞同：0
> 
> 时间：2012-12-14T15:24:14.963
> 
> 标签：ajax, form-submit

使用ajax提交表单时，多个表单可以共享同一个id吗？比如下面这样。

HTML：

```
<form id="myForm" action="/form" method="post"> 
  Phone: <input type="text" name="phone" /> 
  <input type="submit" value="Submit" /> 
</form>
...
<form id="myForm" action="/form" method="post"> 
  Name: <input type="text" name="name" /> 
  Comment: <textarea name="comment"></textarea> 
  <input type="submit" value="Submit Comment" /> 
</form> 
```

脚本：

```
<script> 
    // wait for the DOM to be loaded 
    $(document).ready(function() { 
        // bind 'myForm' and provide a simple callback function 
        $('#myForm').ajaxForm(function() { 
            alert("Thank you for your comment!"); 
        }); 
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:27:18.400

不：作为一般原则，每当您想使用相同的术语来分组一堆元素时，您应该使用类名：

```
<form class="myForm" action="/form" method="post"> 
  Phone: <input type="text" name="phone" /> 
  <input type="submit" value="Submit" /> 
</form>
...
<form class="myForm" action="/form" method="post"> 
  Name: <input type="text" name="name" /> 
  Comment: <textarea name="comment"></textarea> 
  <input type="submit" value="Submit Comment" /> 
</form> 
```

您的 JS 将是：

```
$(document).ready(function() { 
    // bind 'myForm' and provide a simple callback function 
    $('.myForm').ajaxForm(function() { 
        alert("Thank you for your comment!"); 
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:27:26.047

不能有多个具有相同 ID 和句点的 HTML 元素。

相反，您应该使用`clas=""`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:28:28.520

我不建议您使用相同的 id，如果您想要类似的东西，我认为最好使用相同的（css）类。

重复的 id 会给你带来更多的问题。

# java - 将所有类的字段序列化为字节数组

> ID：13881532
> 
> 赞同：2
> 
> 时间：2012-12-14T15:24:43.517
> 
> 标签：java

我有一个 Java 类，例如：

```
class Foo implements IBar
{
    // Methods ..

    // A bunch of fields of primitive types (int, String)
    int f1;
    int f2;
    String f3;
    // ...
} 
```

我想将所有这些字段打包到字节数组中（不要问我为什么，这个限制是由以这种格式向我发送数据的 C++ 端引入的）。

我发现的唯一方法是使用`ByteBuffer`. 但这是我能想到的最糟糕的情况。代码如下所示：

```
ByteBuffer buf = ByteBuffer.allocate(4);

int offset = 0;

buf.putInt(f1);
System.arraycopy(buf.array(), 0, rawHeader, offset, 4);
offset += 4;

// A bunch of lines here (pack all other fields) 
```

有谁知道更合适的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:27:04.953

使用`DataOutputStream`包装 a `ByteArrayOutputStream`。

或者，如果您愿意，可以让您的类实现`Serializable`并使用`ObjectOutputStream`包装 a `ByteArrayOutputStream`。这当然会使字节数组只能由 Java 读取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:28:32.210

嗯……你可以试试看`DataOutputStream`，`ByteBufferStream`它有方便的写原语的方法。作为回报，您有一个字节数组。

UPD：当然不是`ByteBufferStream`，但是`ByteArrayOutputStream`。

# python - 如何扩展 python 模块以包含额外的功能？(sqlite3)

> ID：13881533
> 
> 赞同：1
> 
> 时间：2012-12-14T15:24:46.573
> 
> 标签：python, sqlite

我将如何扩展 sqlite3 模块，所以如果我`import Database`可以将 Database.connect() 作为 sqlite3.connect() 的别名，但定义额外的非标准方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:42:29.557

您可以创建一个包装`sqlite3`. 它采用它的`.connect()`方法，也许还有其他方法，并将它暴露给外部，然后你添加你自己的东西。

另一种选择是子类化——如果可行的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:41:41.330

您可以编写自己的`Database`模块，顶部有以下行：

```
from sqlite import * 
```

然后根据需要定义方法，但请确保不要覆盖任何内容。

# c# - 占位符控件集合在回发时为空

> ID：13881537
> 
> 赞同：2
> 
> 时间：2012-12-14T15:25:24.653
> 
> 标签：c#, asp.net, visual-studio-2010

我在 ASP.NET 数据网格中有以下代码：

```
<asp:TemplateField HeaderText="" Visible="True" >
                            <ItemTemplate>
                            <%--<asp:TextBox ID="txtAnswer" Text='<%# Bind("Answer") %>' runat="server" 
                                       TextMode="MultiLine" Height="76px" MaxLength="2000" Width="377px"  >
                            </asp:TextBox>--%>
                            <asp:HiddenField ID="hfQuestionID" Value='<%# Bind("QuestionID") %>' runat="server" />
                            <asp:HiddenField ID="hfAnswerID" Value='<%# Bind("AnswerID") %>' runat="server" />
                            <asp:HiddenField ID="hfAnswer" Value='<%# Bind("Answer") %>' runat="server" />
                            <asp:PlaceHolder ID="ph1" runat="server" />
                            <%--<%# GetAnswerControl(DataBinder.Eval(Container.DataItem,"QuestionID").ToString(), 
                                DataBinder.Eval(Container.DataItem,"Answer").ToString()) %>--%>
                            </ItemTemplate>
                           <EditItemTemplate>
                            <asp:HiddenField ID="hfQuestionID" Value='<%# Bind("QuestionID") %>' runat="server" />
                            <asp:HiddenField ID="hfAnswerID" Value='<%# Bind("AnswerID") %>' runat="server" />
                            <asp:HiddenField ID="hfAnswer" Value='<%# Bind("Answer") %>' runat="server" />
                            <asp:PlaceHolder ID="ph1" runat="server" />
                               <%--<asp:TextBox ID="txtAnswer" Text='<%# Bind("Answer") %>' runat="server" 
                                       TextMode="MultiLine" Height="76px" MaxLength="2000" Width="377px"  ></asp:TextBox>--%>
                           </EditItemTemplate>
                         </asp:TemplateField> 
```

根据用户需要给出的答案类型，占位符会动态填充文本框或下拉列表。呈现初始答案字段（文本框或下拉列表）的代码工作正常。

但是，当我触发按钮单击事件时，占位符的控件属性始终为空。为什么会这样？我已经为此绞尽脑汁好几天了，这对我来说没有任何意义。

下面是我试图访问数据网格的动态添加控件的片段......我做错了什么？

```
foreach (GridViewRow r in gridUserSupplierTypeQuestionsAndAnswers.Rows)
        //if (IsRowModified(r))
        //{
        //    gridUserSupplierTypeQuestionsAndAnswers.UpdateRow(r.RowIndex, false);
        //}
        {
            PlaceHolder ph =(PlaceHolder) r.FindControl("ph1");
            Control c = ph.FindControl("Answer");
            string answer = string.Empty;
            if(c.GetType() == typeof(TextBox))
            {
                TextBox tb = (TextBox) c;
                answer = tb.Text;
            }
            else if (c.GetType() == typeof(DropDownList))
            {
                DropDownList dl = (DropDownList)c;
                answer = dl.SelectedValue;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:49:48.430

我最终放弃了占位符，而是使用了两个控件——一个文本框和一个下拉列表——它们的可见性设置为 false。

我将答案类型存储在数据库中，并根据该值通过辅助函数打开适当的控件。可能有更优雅的方法来处理这个问题，但我时间紧迫，只需要让它工作。

# scala - Scala 中 PartialFunction 的组合

> ID：13881540
> 
> 赞同：1
> 
> 时间：2012-12-14T15:25:39.620
> 
> 标签：scala, akka

我正在与 akka 演员合作。所有参与者都应实现该`receive`方法，该方法的签名为`PartialFunction[Any, Unit]`. 我想定义一个更严格的函数来匹配签名，比如`PartialFunction[Action, Unit]`. 但是，这不会编译：

```
class PlayerActor extends Actor with {
  override def receive: Receive = rec

  def rec: PartialFunction[Action, Unit] = {
    case Jump() =>
  }
} 
```

我想这样做，所以如果我忘记了一个案例，编译器会警告我。

`Receive`定义为`type Receive = PartialFunction[Any, Unit]`

* * *

我最终像手动一样：

```
override def receive = {
  case a: Action => rec(a)
} 
```

也可以通过强制转换来完成：

```
override def receive = rec.asInstanceOf[PartialFunction[Any, Unit]] 
```

或通过隐式转换：

```
implicit def toAnyPartial[T](f: PartialFunction[T, Unit]): PartialFunction[Any, Unit] =
  f.asInstanceOf[PartialFunction[Any, Unit]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:59:02.693

你可以试试这个

```
def rec: Receive  = { case a: Action => a match {
  case Jump() =>
}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:01:35.803

`PartialFunction`在其第一个类型参数上是逆变的。我不会深入解释这意味着什么（有书籍、博客文章、SO 问题和答案），而是会给你一个非常琐碎的例子。

您可以`Any`通过`receive`. 如果可以分配`rec`给`receive`，则意味着您可以传递`Any`给`rec`，从而绕过`rec`的类型。编译器禁止它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:33:35.730

如果您只想`PartialFunction[Any, Unit]`使用类型的实现来创建，`PartialFunction[T, Unit]`您可以试试这个：

```
implicit def toPfAny[T](pf: PartialFunction[T, Unit]): PartialFunction[Any, Unit] = {
  object PF { def unapply(a: T): Option[Unit] = pf.lift(a) }
  { case PF(_) => () }
} 
```

用法：

```
scala> def impl: PartialFunction[String, Unit] = { case s => println(s) }
impl: PartialFunction[String,Unit]

scala> def receive: PartialFunction[Any, Unit] = impl
receive: PartialFunction[Any,Unit] 
```

# html - 粘性页脚隐藏内容

> ID：13881548
> 
> 赞同：40
> 
> 时间：2012-12-14T15:26:25.907
> 
> 标签：html, css

我使用 CSS 制作了以下粘性页脚。底部页面内容当前隐藏在页脚后面（参见随附的屏幕截图）。如何调整我的 CSS 以使所有正文内容都可见并且页脚仍然停留在浏览器窗口的底部？谢谢！

![在此处输入图像描述](../Images/69e2863ec47ef4d785a5709dba38fdfa.png)

CSS：

```
.fo {
    position: absolute;
    left: 0;
    bottom: 0;
    height:65px;
    width: 100%;
    color: #eaeaea;
    margin-left: -8px;
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-08-03T21:04:49.340

您可以创建一个清晰的 div 并给它一个高度。

```
.clear { clear: both; height: 60px; }

<div class="clear"></div>
<div id="footer">FOOTER CONTENT</div> 
```

高度是您将内容保持在页脚上方所需的任何内容，例如。比页脚高。如果页脚是 50px；高，我做 60px；对于清晰 div 中的高度。因此，当我滚动时，页脚保持在原位，但当我到达底部时，从页脚后面流出的内容有空间被推到页脚上方而不会被覆盖。超级简单，而且效果很好。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-14T17:12:42.160

我过去在互联网上遇到过这个答案。效果很好：

HTML

```
<div id="container">
   <div id="header"></div>
   <div id="body"></div>
   <div id="footer"></div>
</div> 
```

CSS

```
 html,
body {
   margin:0;
   padding:0;
   height:100%;
}
#container {
   min-height:100%;
   position:relative;
}
#header {
   background:#ff0;
   padding:10px;
}
#body {
   padding:10px;
   padding-bottom:60px;   /* Height of the footer */
}
#footer {
   position:absolute;
   bottom:0;
   width:100%;
   height:60px;   /* Height of the footer */
   background:#6cf;
}
/* IE 6 and down:
#container {
   height:100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-17T21:34:19.023

当我想出自己的解决方案时，我也遇到了麻烦。我将页脚设置`height`为`10%`：

```
footer{
  position: fixed;
  **height:10%;**
  width:100%;
  padding-top: 2px;
  bottom: 0;
  clear: both;
  background-color: black;
  color: white;
  float: left;
  overflow: auto;
} 
```

和我的内容有`bottom margin`一个`11%`：

```
#content{
  width: 800px;
  margin: auto;
  background-color: rgba(0,0,0,.7);
  color: #99FFCC;
  height: 80%;
  padding:30px;
  **margin-bottom: 11%;**
} 
```

我希望这可以帮助任何有同样问题的人！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-11T11:15:21.210

这可以帮助，在 HTML 的末尾：

```
.spacer{
  margin-bottom: 110px; /* how high is your footer */
  visibility: hidden; 
}
```

```
<div  class="spacer"> . </div> /* you need to type someting, simple point can do the trick */
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-17T23:46:18.463

我遇到了同样的问题，其他解决方案为我指明了正确的方向，但是因为我使用的是 Angular Material，所以我所要做的就是添加 layout="column" 并且效果很好

```
 <div id="container" layout="column">
       <div id="header"></div>
       <div id="body"></div>
       <div id="footer"></div>
    </div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-30T18:20:15.247

我只是在页脚前面添加了一个空的 div，并用 id (div-spacer) 命名它：

`<div id="div-spacer"></div>`

然后我创建了一行简单的代码来获取最后一个元素的高度并将其设置为 div：

```
$(document).ready(function () {
  $('#div-spacer').css("height",$('.card-transaction:last').css("height"));
}); 
```

使用此解决方案，最后一个元素始终可见！

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2016-12-14T16:12:46.067

我刚刚在正文末尾添加了 br 标签 5 次，以创建一些额外的空格。它帮助了我。

> *有时保持简单的作品！*

# c++ - Visual C++ 应用程序中的 SQL Server 数据库

> ID：13881550
> 
> 赞同：1
> 
> 时间：2012-12-14T15:26:36.747
> 
> 标签：c++, sql, sql-server, visual-studio, visual-c++

我必须在 Visual C++ 中创建一个访问 SQL 数据库、选择和插入数据的应用程序。

我知道它在 C# 中很容易，但它必须用 C++ 编写。我更喜欢使用 MS SQL Server 2012，因为它是我知道的唯一 DBMS。我也必须使用 Visual Studio。

你能告诉我解决这个问题的最佳方法是什么吗？我需要一种相对简单的方法，因为我不是经验丰富的程序员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:52:26.900

你想使用什么样的视觉 C++？如果您使用.Net，您可以使用 ADO.Net [http://msdn.microsoft.com/en-us/library/9ctka9db.aspx](http://msdn.microsoft.com/en-us/library/9ctka9db.aspx)

# php - 将 & 符号转换为和使用 CakePHP

> ID：13881553
> 
> 赞同：0
> 
> 时间：2012-12-14T15:26:39.747
> 
> 标签：php, cakephp

我有以下代码可以清理帖子标题，以便在我的应用程序中保存 slug：

```
$post_title = Sanitize::html($this->request->data['Post']['title'], array('remove'=>true, 'quotes' => ENT_NOQUOTES));
                $post_title = String::truncate($post_title, 50, array('exact'=>false,'html'=>false,'ending'=>''));
                $this->Post->saveField('slug', Inflector::slug($post_title)); 
```

**以防万一有人提出来。我知道 sluggable 插件，但更喜欢手动操作！**

然而，＆符号在变形器中被保存为“amp”。所以我希望在拐点之前将 '&' 转换为 'and'。

我将如何在 PHP 中执行此操作？我看过 str_replace 函数。这是正确的吗？

例如`str_replace('&','and',$post_title)`，但是 count 参数呢？任何建议或想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:29:23.103

`str_replace('&','and',$post_title)`是正确的。您不需要 count 参数。这将替换`&`with的所有实例`and`。

我猜您想在截断字符串之前执行此操作，因为显然`and`需要更多字符。

# javascript - 非常简单的jquery导致错误

> ID：13881554
> 
> 赞同：0
> 
> 时间：2012-12-14T15:26:41.370
> 
> 标签：javascript, jquery, twitter-bootstrap

与此[问题](https://stackoverflow.com/questions/13880519/expand-menu-show-submenu)相关，我收到此错误：

> Uncaught SyntaxError: Unexpected token ILLEGAL

使用此代码：

```
<!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="js/highcharts.js"></script>
    <script src="js/inspiritas.js"></script>
    <script src="bootstrap/js/bootstrap-dropdown.js"></script>
    <script src="bootstrap/js/bootstrap-collapse.js"></script>
    <script>
    $(document).ready(function() {
        $(document).on('click', 'a.expand', function(e) {
            e.preventDefault();
            $(this).find('ul').slideToggle();
        });
    });​
    </script> 
```

错误在最后一个}); 我没有看到任何问题，删除 js 文件没有帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T15:29:27.010

最后一行代码，你有一个非法的隐形字符。

```
 });​  // <--- right here 
```

当您从 jsFiddle 或其他站点复制/粘贴时，就会发生这种情况。

删除该行及其周围的一些空间，然后手动重新键入。

# c# - Visual Studio 2012 C# 捕获异常错误

> ID：13881555
> 
> 赞同：0
> 
> 时间：2012-12-14T15:26:42.087
> 
> 标签：c#

我在母版页中的 c# 编码如下

```
DBLayer odb = new DBLayer();

SqlDataReader dr;

DataSet ds = new DataSet();

protected void Page_Load(object sender, EventArgs e)
{
    if (DropDownList1.SelectedItem.ToString() == "Commercial")
    {

        bind1();
    }
    else if (DropDownList1.SelectedItem.ToString() == "Residential")
    {
        bind2();
    }
    else
    {
        bind3();
    }
}
public void bind1()
{
    string query = "select * from commercialproperty";
    dr = odb.SelectMethod(query);
    if (dr.Read())
    {
        Label11.Text = dr[0].ToString();
        Label1.Text = dr[1].ToString();
        Label2.Text = dr[2].ToString();
        Label3.Text = dr[3].ToString();
        Label4.Text = dr[4].ToString();
        Label5.Text = dr[5].ToString();
        Label6.Text = dr[6].ToString();
        Label7.Text = dr[7].ToString();
        Label8.Text = dr[8].ToString();
        Label9.Text = dr[9].ToString();
        Label10.Text = dr[10].ToString();
    }
    else
    {
        Response.Write("<script>alert('Record Not Found')</script>");
    }
} 
```

}

我在 DBLayer.cs 中的代码如下

公共类 DBLayer

{

```
 public SqlConnection _SqlConnection;

    public SqlCommand _SqlCommand;

    public SqlDataAdapter _SqlDataAdapter;

    public SqlDataReader _SqlDataReader;

    public DataSet _DataSet;

public DBLayer()
{
}
    public int InsertEditDelete(string query)
    {
        int i;
        try
        {

            _SqlConnection = new SqlConnection("server=.;user id=sa;password=sa;initial catalog=RealEstate");
            _SqlConnection.Open();
            _SqlCommand = new SqlCommand(query, _SqlConnection);
            i = _SqlCommand.ExecuteNonQuery();

        }
        catch (Exception ied)
        {
            i = -1;

        }
        finally
        {

            _SqlConnection.Dispose();
            _SqlCommand.Dispose();
            _SqlConnection.Close();

        }
        return i;
    }
    public DataSet DataAdapter(string query, string tname)
    {
        try
        {
            _SqlConnection = new SqlConnection("server=.;user id=sa;password=sa;initial catalog=RealEstate");
            _SqlConnection.Open();
            _SqlDataAdapter = new SqlDataAdapter(query, _SqlConnection);

            _DataSet = new DataSet();
            _SqlDataAdapter.Fill(_DataSet,tname);

        }
        catch (Exception ds)
        {
            _DataSet  = null;

        }
        finally
        {
            _SqlConnection.Dispose();               
            _SqlConnection.Close();
        }
        return _DataSet;
    }
    public SqlDataReader SelectMethod(string query)
    {
        try
        {
            _SqlConnection = new SqlConnection("server=.;user id=sa;password=sa;initial catalog=RealEstate");
            _SqlConnection.Open();
            _SqlCommand = new SqlCommand(query, _SqlConnection);
           _SqlDataReader  = _SqlCommand.ExecuteReader();
        }
        catch (Exception sm)
        {
         _SqlDataReader = null;

        }
        return _SqlDataReader;
    } 
```

}

当我运行网站时，它在以下点爆炸，如果 (dr.Read()) [错误消息：对象引用未设置为对象的实例。]

我错过了什么？我是一个初学者：P 帮助解决这个问题将运行该网站非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:29:12.397

我不知道`odb`你的代码中有什么，但关键`SelectMethod`是返回 null。

编辑后，罪魁祸首似乎是您的`SelectMethod`: 中的 try/catch 块，可能引发了异常，并且由于您什么都不做，因此您无法理解出了什么问题：

```
try {
    // do DB stuff...
}
catch (Exception sm) { // What does this exception contain???
    _SqlDataReader = null;
} 
```

尝试使用调试器单步执行您的代码，看看异常是什么。如果你不能这样做，只需删除 catch 块：如你所见，它只是隐藏了原因的失败，但它并没有让代码神奇地工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:20:51.687

我在您的代码中看到至少 4 个问题 1\. 您在代码中默默地吞下您的异常，没有任何意义。

```
try
    {
        _SqlConnection = new SqlConnection("server=.;user id=sa;password=sa;initial catalog=RealEstate");
        _SqlConnection.Open();
        _SqlCommand = new SqlCommand(query, _SqlConnection);
       _SqlDataReader  = _SqlCommand.ExecuteReader();
    }
    **catch (Exception sm)
    {
     _SqlDataReader = null;
    }** 
```

2.你在关闭连接之前已经处理了它，在finally中会抛出异常。

```
finally
    {
        _SqlConnection.Dispose();               
        _SqlConnection.Close();
    } 
```

3\. 吞下异常而不做任何事情不是最好的办法，你丢失了你的堆栈跟踪。

4 将_sqlconnection 和那些非托管对象设置为全局变量而不实现IDisposable 不好。

最后在抛出异常的代码行上设置一个断点并尝试自己调试代码。

# javascript - 边框布局的奇怪行为 - ExtJS 4

> ID：13881559
> 
> 赞同：0
> 
> 时间：2012-12-14T15:26:46.917
> 
> 标签：javascript, extjs, extjs4

这是发生了什么：

[http://www.youtube.com/watch?v=zVEftCJ2F_U&feature=youtu.be](http://www.youtube.com/watch?v=zVEftCJ2F_U&feature=youtu.be)

这是代码：

```
extend: 'Ext.container.Viewport',
    alias: 'widget.viewport',

    layout:'border',
    defaults: {
        collapsible: true,
        split: true,
        bodyStyle: 'padding:15px'
    },
    items: [{
        title: 'Footer',
        region: 'south',
        height: 150,
        minSize: 75,
        maxSize: 250,
        cmargins: '5 0 0 0'
    },{
        title: 'Navigation',
        region:'west',
        margins: '5 0 0 0',
        cmargins: '5 5 0 0',
        width: 175,
        minSize: 100,
        maxSize: 250
    },{
        title: 'Main Content',
        collapsible: false,
        region:'center',
        margins: '5 0 0 0'
    }] 
```

布局控制器：

```
Ext.define('MyAppp.controller.Layout', {
    extend: 'Ext.app.Controller',

    init: function(){
        //kreiraj Viewport
        Ext.create('MyApp.view.Viewport');

        console.log("Layout created!");
    }
}); 
```

登录控制器 onSuccess：

```
success: function(form, action){
        win.destroy();
        this.getController('Layout').init();
            }, 
```

这个布局是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:31:16.540

我创建了一个加载启动画面，当我删除它时，边框布局效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:22:21.973

尝试将您的项目放在具有边框布局的面板或容器中

```
extend: 'Ext.container.Viewport',
alias: 'widget.viewport',

defaults: {
    collapsible: true,
    split: true,
    bodyStyle: 'padding:15px'
},
items: [{xtype: panel,
layout: 'border',
items[{... 
```

# joomla - 致命错误：未捕获的异常“异常”，消息“字符串无法解析为 XML”

> ID：13881562
> 
> 赞同：0
> 
> 时间：2012-12-14T15:26:52.470
> 
> 标签：joomla

我在一天之内几次遇到此错误，并且我的网站已关闭，它不知从何而来。我需要修复什么，所以我不再收到此错误？

`Fatal error: Uncaught exception 'Exception' with message 'String could not be parsed as XML' in /hosting/dfashion/public_html/mysite/v2/templates/it_thecity/icetools/icetool.php:219 Stack trace: #0 /hosting/dfashion/public_html/mysite/v2/templates/it_thecity/icetools/icetool.php(219): SimpleXMLElement->__construct('') #1 /hosting/dfashion/public_html/mysite/v2/templates/it_thecity/icetools/layout_vars.php(44): iceTool::getYoutubeSubscribers('icetheme') #2 /hosting/dfashion/public_html/mysite/v2/templates/it_thecity/index.php(29): require_once('/hosting/dfashi...') #3 /hosting/dfashion/public_html/mysite/v2/libraries/joomla/document/html/html.php(531): require('/hosting/dfashi...') #4 /hosting/dfashion/public_html/mysite/v2/libraries/joomla/document/html/html.php(591): JDocumentHTML->_loadTemplate('/hosting/dfashi...', 'index.php') #5 /hosting/dfashion/public_html/mysite/v2/libraries/joomla/document/html/html.php(414): JDocumentHTML->_fetchTemplate(Array) #6 /hosting/dfashion/public_html/ in /hosting/dfashion/public_html/mysite/v2/templates/it_thecity/icetools/icetool.php on line 219`

# jquery - jQuery Datepicker - 自动为所有日期选择器定义 altField

> ID：13881565
> 
> 赞同：5
> 
> 时间：2012-12-14T15:26:56.513
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我所有的日期选择器都有一个自动生成的隐藏字段，它与日期选择器输入具有相同的 ID，但前面带有下划线。

```
<div class="datepicker">
    <input id="MyField1" type="text" value="" />
    <input id="_MyField1" type="hidden" value="" />
</div>

<div class="datepicker">
    <input id="MyField2" type="text" value="" />
    <input id="_MyField2" type="hidden" value="" />
</div> 
```

然后任何具有类的字段都`datepicker`被制成日期选择器。

```
$('.datepicker input').datepicker({
    altFormat: 'yy-mm-dd',
    changeMonth: true,
    constrainInput: true,
    dateFormat: 'dd/mm/y',
    minDate: '+0d',
    numberOfMonths: 2
}); 
```

但是我怎样才能自动让它为每个设置 altField 选项？

这行不通。我也尝试在原始选项中进行分配，但这也不起作用。

```
$('.datepicker input').each(function() {
    var altField = '_' + $(this).prop('id');
    $(this).datepicker('option', 'altField', altField);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T15:31:15.843

altField选项[采用](http://api.jqueryui.com/datepicker/#option-altField)选择器、jQuery 对象或元素，而不是`id`属性。

尝试指定一个[id 选择器](http://api.jquery.com/id-selector/)：

```
$(this).datepicker("option", "altField", "#_" + $(this).prop("id")); 
```

或者，保存调用`$()`和调用`prop()`：

```
$(this).datepicker("option", "altField", "#_" + this.id); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:34:20.820

尝试这个：

```
$('.datepicker input').each(function() {
    var altField = '#_' + $(this).prop('id');
    $(this).datepicker('option', 'altField', altField);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T17:34:21.893

jQuery UI Datapicker 1.9，使用 altField、altFormat 选项和覆盖内部方法

克隆字段以数据库格式“yy-mm-dd”存储实际值，并使用主字段显示格式化值（本示例中的“dd-mm-yy”）：

```
$(function() {
    var _connectDatepicker = $.datepicker._connectDatepicker;
    $.datepicker._connectDatepicker = function(target, inst) {
        var $target = $(target);
        var $altField = $target.clone(false).appendTo($target.parent()).hide();
        inst.settings.altField = $altField;
        inst.settings.dateFormat = inst.settings.altFormat = "yy-mm-dd";

        _connectDatepicker.call(this, target, inst);
        $target.removeAttr("name").datepicker( "option", "dateFormat", "dd-mm-yy");
    };
}); 
```

# sql - 使用 group by 的 Sum 语句中的 Where 子句

> ID：13881569
> 
> 赞同：2
> 
> 时间：2012-12-14T15:27:01.010
> 
> 标签：sql, ms-access

我有 2 个表 1 称为**SteelOrders**另一个称为**FinalizedPrintedStickers**

我最近刚刚问[了这个](https://stackoverflow.com/questions/13879917/sum-of-part-of-a-column-in-a-join-statement)问题。

虽然我得到了答案，但我在问题中遗漏了一些导致我提出这个问题的重要细节。

我目前有这个查询：

```
Select OrderNumber,  Sum(PanelBuildTime)  AS OrderBuildTime from SteelOrders 
INNER JOIN FinalizedPrintedStickers 
ON 
SteelOrders.OrderNumber = LEFT(FinalizedPrintedStickers.SN,10)
GROUP BY OrderNumber 
```

我需要从 FinalizedPrintedStickers 中获取 PanelBuildTime 的总和，但仅在 FinalizedPrintedStickers 表中的“状态”字段=“已打印”的情况下

如何在 Sum 语句中添加 where 子句？

任何帮助将不胜感激^_^

**编辑：**如果 FinalizedPrintedStickers 表上没有 statuses = 'Printed' 我需要 'OrderBuildTime' 为 0 .... 我不知道这是否真的可以使用 Access，希望是..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:43:09.677

根据您对 Beth 的回复，我认为您希望`IIf()`在选择列表中添加一个表达式：

```
Sum(IIF([Status] = 'Printed', PanelBuildTime, 0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:36:26.853

这是你需要的吗？

只需阅读有关 scema 详细信息的其他问题，sry。怎么样：

```
 Select OrderNumber,  
      Sum(case when PanelBuildTime is null then 0 else PanelBuildTime end)  AS OrderBuildTime 
    from SteelOrders 
    left outer JOIN (select * from FinalizedPrintedStickers  
       where Status = 'Printed') f ON 
    SteelOrders.OrderNumber = LEFT(FinalizedPrintedStickers.SN,10)
    GROUP BY OrderNumber 
```

或者

```
Select OrderNumber,  
  Sum(statusPrintedCount )  AS OrderBuildTime 
from SteelOrders 
inner JOIN (select *, 
case when Status = 'Printed' then 1 else 0 end as statusPrintedCount 
   from FinalizedPrintedStickers) f ON 
SteelOrders.OrderNumber = LEFT(FinalizedPrintedStickers.SN,10)
GROUP BY OrderNumber 
```

对不起，错过了访问标签。这是针对 SQL Server 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:36:53.000

你可以尝试这样的事情：

```
Select Distinct a.*, b.PanelBuildTime
From SteelOrders a, 
(Select OrderNumber,  Sum(PanelBuildTime)  AS OrderBuildTime from SteelOrders 
INNER JOIN FinalizedPrintedStickers 
ON 
SteelOrders.OrderNumber = LEFT(FinalizedPrintedStickers.SN,10)
GROUP BY OrderNumber) b
Where a.OrderNumber = b.OrderNumber 
```

编辑：您刚刚编辑了您的初始帖子，它改变了一些事情。你已经得到了你的答案，所以我猜没关系；）

# c - 将 PCM 16 位 LE 转换为 WAV

> ID：13881574
> 
> 赞同：3
> 
> 时间：2012-12-14T15:27:09.477
> 
> 标签：c, audio, wav, pcm, sox

我正在尝试用 C 编写一个程序，将捕获的*Raw 16kHz PCM 16 位*文件转换为*16 位 WAV*。

**我读过一些帖子**，有人推荐使用`libsox`. 安装它，现在我真的很难理解[手册页](http://linux.die.net/man/3/libsox)。

到目前为止（通过阅读源 dist 中的示例）我发现`structs`：

*   sox_format_t
*   sox_signalinfo_t

大概可以用来描述我输入的数据。如果有必要，我也知道我正在处理多少信息（时间）？

一些指导表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T11:20:25.837

好吧，问题得到了解答。但是，我将在此处发布代码，以便人们可以对其进行分析或仅在自己的项目中使用它。

“simonc”和“Nickolay O”提供的链接。被使用了。在网络上搜索有关各个字段的更多信息。

```
struct wavfile
{
    char        id[4];          // should always contain "RIFF"
    int     totallength;    // total file length minus 8
    char        wavefmt[8];     // should be "WAVEfmt "
    int     format;         // 16 for PCM format
    short     pcm;            // 1 for PCM format
    short     channels;       // channels
    int     frequency;      // sampling frequency, 16000 in this case
    int     bytes_per_second;
    short     bytes_by_capture;
    short     bits_per_sample;
    char        data[4];        // should always contain "data"
    int     bytes_in_data;
};

//Writes a header to a file that has been opened (take heed that the correct flags
//must've been used. Binary mode required, then you should choose whether you want to 
//append or overwrite current file
void write_wav_header(char* name, int samples, int channels){
    struct wavfile filler;
    FILE *pFile;
    strcpy(filler.id, "RIFF");
    filler.totallength = (samples * channels) + sizeof(struct wavfile) - 8; //81956
    strcpy(filler.wavefmt, "WAVEfmt ");
    filler.format = 16;
    filler.pcm = 1;
    filler.channels = channels;
    filler.frequency = 16000;
    filler.bits_per_sample = 16;
    filler.bytes_per_second = filler.channels * filler.frequency * filler.bits_per_sample/8;
    filler.bytes_by_capture = filler.channels*filler.bits_per_sample/8;
    filler.bytes_in_data = samples * filler.channels * filler.bits_per_sample/8;    
    strcpy(filler.data, "data");
    pFile = fopen(name, "wb");
    fwrite(&filler, 1, sizeof(filler), pFile);
    fclose(pFile);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:34:56.883

我建议手动编写 WAV 标头和数据，PCM 非常简单： [https ://web.archive.org/web/20080706175634/https://ccrma.stanford.edu/courses/422/projects/WaveFormat /](https://web.archive.org/web/20080706175634/https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

更新：原始链接[https://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)失效。

# python - Python - 从 .txt 获取正则表达式

> ID：13881578
> 
> 赞同：0
> 
> 时间：2012-12-14T15:27:22.930
> 
> 标签：python, regex

如何在 Python 中打开 .txt 文件并获取文件中的确切字符串？

我有一个包含正则表达式的文本文件，例如：

```
\\*(.*?)\\n 
```

当我在 Python 中打开文件时：

```
open('regEx.txt', 'r') 
```

我越来越：

```
\\\\*(.*?)\\\\n 
```

有没有办法打开这个文件并完全按照文件中的内容获取字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:31:01.427

您最有可能获得与文件中​​完全相同的数据（可能除了行尾，但这不是问题所在）。问题仅在于该数据的显示。你在shell中工作吗？`print`除非您明确使用，否则它会输出转义序列。

尝试`print open('regEx.txt', 'rb').read()`甚至`open('regEx2.txt','wb').write(open('regEx.txt', 'rb').read())`。regEx2.txt 将与 regEx.txt 相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:34:50.347

您在这里稍微混淆了一些字符串表示。实际的正则表达式（忽略任何语言特定的奇怪之处）只是

```
\*(.*?)\n 
```

（字面意思是这 9 个字符）

但是，我想您一直在使用没有原始字符串的 Java 或 Python。在这种情况下，要在内存中*创建*上述字符串，您的代码必须将反斜杠加倍：

```
"\\*(.*?)\\n" 
```

这是因为，如果您不将它们加倍，Python 将在编译字符串时将它们删除。但是现在字符串又被编译成了这 9 个字符：`\*(.*?)\n`. 如果将这些打印出来，您将获得（如 jd. 所说）包括双反斜杠的显示。但如果你打电话`len(string)`它会说`9`，不是`11`。

所以你只需要 9 个字符。那为什么要在你的文件中写 11 呢？如果你写了 11，那么在显示时反斜杠将再次被双重转义。但是调用`len(input)`. `open`它会说`11`，不是`15`。

这也是为什么在代码中定义正则表达式时应该始终使用原始字符串的原因。然后你永远不需要任何额外的转义（引号除外）：

```
r"\*(.*?)\n" 
```

这将再次为您留下 9 个字符（因为反斜杠在编译字符串时保持不变）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:32:15.310

我不认为这是一个问题，比较以下：

```
»»» regex # as read from the file
Out[9]: '\\*(.*?)\\n\n'

»»» r=r'\*(.*?)\n'

»»» r
Out[11]: '\\*(.*?)\\n' 
```

除了换行符（这是我的错，我把它放在文件中）它们在内部是相同的。

# php - 如何将日期从格式 14/Dec/2012 14:53:34 转换为 php 中的时间戳？

> ID：13881580
> 
> 赞同：0
> 
> 时间：2012-12-14T15:27:24.210
> 
> 标签：php, timestamp, strftime, strptime

我尝试了很多方法，但是月份的字符串格式给我带来了很大的问题。任何建议、建议或实现的代码都会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T15:30:38.917

strtotime(); 似乎不适用于该格式。

看看使用自定义格式的 DateTime 对象：http: [//us3.php.net/manual/en/datetime.createfromformat.php](http://us3.php.net/manual/en/datetime.createfromformat.php)

然后你可以随意输出它，包括通过 $dateObject->format('U'); 的时间戳。

所以像：

```
$oDt = DateTime::createFromFormat('d/M/Y H:i:s', '14/Dec/2012 14:53:34');
echo $oDt->format('U'); // 1355518414 
```

应该管用。

向后验证：

```
echo date('c', 1355518414); //2012-12-14T14:53:34-06:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:29:05.880

你试过 strtotime() 吗？此处的完整文档：http: [//php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:34:10.430

如果您使用的是 PHP 5.3+，那么您可以获得一个`DateTime`using`DateTime::createFromFormat('j/M/Y H:i:s',$string)`然后您可以`getTimestamp()`在返回的`DateTime`对象上使用来获取时间戳。

# apache - 使用 mod_rewrite.c 的 .htaccess 文件中的重写规则冲突

> ID：13881583
> 
> 赞同：1
> 
> 时间：2012-12-14T15:27:28.663
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我正在使用 mod_rewrite 来获取干净的 URL。到目前为止，一切正常：

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule (.*) application.php?request=$1 [L,QSA]
</IfModule> 
```

但是，我只是尝试添加另一个转换`www.mysite.com`urls的规则`mysite.com`，使用以下内容：

```
<IfModule mod_rewrite.c>
  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]
</IfModule> 
```

结果：访问`mysite.com`时很好，但是访问时`www.mysite.com`，URL变得丑陋`mysite.com/application.php?request=`

如何调整我的 .htaccess 文件，以免发生冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:44:16.263

您需要确保重定向规则**在**路由规则之前，否则会应用路由规则，重写引擎循环（将继续循环直到 URI 停止更改），然后在重写的 URI 上发生重定向。

```
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On

  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule (.*) application.php?request=$1 [L,QSA]
</IfModule> 
```

# ios - 如何设置 ReactiveCocoa 使其不必每次都重新构建？

> ID：13881584
> 
> 赞同：0
> 
> 时间：2012-12-14T15:27:29.153
> 
> 标签：ios, xcode, static-libraries

我知道因为它使用扩展，所以它需要与项目一起构建。但是，如果我不更改任何这些文件，有没有办法让它不必在每次构建项目时都重新构建库？我没有使用子模块。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:16:18.417

Personally, I would use [CocoaPods](http://cocoapods.org) for dependency management, It will add all of the dependencies and hook everything up for you. The ReactiveCocoa dependency will be placed in a static Pods project, which will only be rebuilt when there is a full clean or the library files change.

This should meet your criteria for rebuilding, and you won't have any need for submodules too!

# c# - 从面板中删除动态控件

> ID：13881585
> 
> 赞同：1
> 
> 时间：2012-12-14T15:27:33.590
> 
> 标签：c#

我在窗口窗体的面板上动态生成了控件，我还生成了一个用于删除控件的按钮，控件在一行代码是，

```
 int c = 0;
    private void button1_Click(object sender, EventArgs e)
    {
        int v;
        v = c++;
        panel1.VerticalScroll.Value = VerticalScroll.Minimum;
        ComboBox combo = new ComboBox();
        combo.Name = "combobox" + v ;
        combo.Location = new Point(30, 5 + (30 * v));

        ComboBox combo2 = new ComboBox();
        combo2.Name = "combobox2" + v ;
        combo2.Location = new Point(170, 5 + (30 * v));

        TextBox txt = new TextBox();
        txt.Name = "txtbx" + v;
        txt.Location = new Point(300, 5 + (30 * v));

        TextBox txt2 = new TextBox();
        txt2.Name = "txtbx2" + v;
        txt2.Location = new Point(450, 5 + (30 * v));

        TextBox txt3 = new TextBox();
        txt3.Name = "txtbx3" + v;
        txt3.Location = new Point(600, 5 + (30 * v));

        Button btn = new Button();
        btn.Name = "btn" + v;
        btn.Text = "Remove";
        btn.Location = new Point(750, 5 + (30 * v));

        panel1.Controls.Add(combo);
        panel1.Controls.Add(btn);
        panel1.Controls.Add(txt);
        panel1.Controls.Add(combo2);
        panel1.Controls.Add(txt2);
        panel1.Controls.Add(txt3);
        btn.Click += new EventHandler(btn_Click);

    }
    private void btn_Click(object sender, EventArgs e)
    {

        // what i have to write here for removing only the textbox and combobox and  button itself to be removed only the controls which are  aside the button

    } 
```

我必须在按钮单击事件中写什么，以便仅删除文本框和组合框以及要删除的按钮本身 按钮旁边的控件其他行控件不应受此影响，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:31:37.890

```
foreach(var item in panel1.Controls)
{

    if(item is TextBox || item is ComboBox)
    {
          panel1.Controls.Remove(item);
    }

} 
```

或者你也可以在下面试试这个。

```
 var list = (from object item in panel1.Controls where item is TextBox || item is ComboBox select item as Control).ToList();

            list.ForEach(x => panel1.Controls.Remove(x)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:34:07.347

您需要在包含的元素中按名称查找控件。

这取决于您开发的框架。C# 不是很有帮助；）

然后你可以删除它

```
SomeParentElement.Comtrols.Remove(SomeElement) 
```

# javascript - TinyMCE 错误的按钮名称

> ID：13881586
> 
> 赞同：1
> 
> 时间：2012-12-14T15:27:35.870
> 
> 标签：javascript, tinymce

![按钮命名问题](../Images/87f7fc2ab2368d21a6446fdd8dd17fe8.png)

所有按钮都是一样的。高级主题。我厌倦了试图弄清楚这里发生了什么。

编辑器初始化：

```
 tinyMCE.init({
     // General options
    elements : "elm1",  mode : "textareas",
theme : "advanced",
force_br_newlines : true,
theme_advanced_buttons1 : "link,unlink,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|",
theme_advanced_buttons2 : "",
theme_advanced_buttons3 : "",
theme_advanced_buttons4 : "",
theme_advanced_toolbar_location : "top",
theme_advanced_toolbar_align : "left",
theme_advanced_statusbar_location : "",
theme_advanced_resizing : true,
    }); 
```

**UPD：** TinyMCE 使用简单的主题。仅由高级主题引起的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:28:27.603

通过故意在 en.js 中引入一些错误，我能够重现您的问题。

所以我的建议是拥有一份全新的 en.js

希望能帮助到你！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:35:05.527

翻译 JS 文件丢失。可能您以错误的方式启动了 tinyMCE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:39:11.260

问题是主题/高级/皮肤/cirkuit/ui.css 丢失或损坏。尝试检查 skins 目录并在该目录中查找 css 文件。如果这些 css 文件到位，您将不会遇到此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:11:40.617

问题在于语言文件格式不兼容

# ibm-mq - java.lang.NoClassDefFoundError: com/ibm/mq/MQException

> ID：13881594
> 
> 赞同：9
> 
> 时间：2012-12-14T15:28:24.343
> 
> 标签：ibm-mq

This is similar to the earlier question [Exception in thread “main” java.lang.NoClassDefFoundError: com/ibm/mq/MQException](https://stackoverflow.com/questions/13370947/exception-in-thread-main-java-lang-noclassdeffounderror-com-ibm-mq-mqexceptio/13881063#13881063)

I am facing a similar issue in Linux. I have installed the following:

MQSeriesRuntime-7.0.1-3.x86_64.rpm
MQSeriesSDK-7.0.1-3.x86_64.rpm
MQSeriesJava-7.0.1-3.x86_64.rpm
MQSeriesServer-7.0.1-3.x86_64.rpm

When I create an execution group , I get:
`java.lang.ClassNotFoundException: com.ibm.mq.MQException`

I have `CLASSPATH` set by using this line of code:
`export CLASSPATH=$CLASSPATH:/opt/mqm/java/lib/com.ibm.mq.jmqi.jar:/opt/mqm/java/lib/com.ibm.mq.jar:.`

Version of broker is 8.0.0.1 and that of MQ is 7.0.1.3 . Can you please suggest what is wrong? According to the previous answer, am I supposed to install the Client also?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T19:24:24.133

You need to review the WMQ Using Java manual for WMQ v7.0.1.*, as you are missing MQ JAR files.

For MQ base Java (not MQ/JMS), you need at least 5 MQ JAR files:

*   com.ibm.mq.jar
*   connector.jar
*   com.ibm.mq.jmqi.jar
*   com.ibm.mq.headers.jar
*   com.ibm.mq.commonservices.jar

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T19:23:28.700

No, you do not need to install the client. The response in the other question was based on having a non-standard install of the client jars. In this case, you appear to have a standard install of WMQ Server. In addition to the RPMs you have provided, there is also an RPM for the MQSeries JRE, although I do not expect that to be the issue here. You obviously have some JRE, presumably the one installed by Broker.

So this should come down to a case of differential diagnosis. Divide and conquer.

1.  Did you run the MQIVT program or any other Java program successfully? If you did and forced an exception, what happened? This tells us if it is system-wide or limited to the Broker's environment.
2.  Where do you export the CLASSPATH? In the broker account's .profile? The broker startup script? Are you *sure* it gets parsed on start of the broker?
3.  Why not use the `/opt/mqm/java/bin/setjmsenv` command as described in [*Environment variables relevant to WebSphere MQ classes for Java*](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzaw.doc/ja10330_.htm)? Sourcing this script in the broker startup script would capture all the relevant classes and do so in a way that is intended to work consistently as you upgrade to later versions.
4.  Which JRE are you using? If it is not the one installed with Broker, it may be the wrong version or from a non-supported JRE provider.

There's not enough information in the posted question to provide a confident answer but answering these diagnostic questions should help narrow it down or solve it altogether.

# ruby-on-rails-3 - 使用 Bundler 的 binstub 时安装 gem 的问题

> ID：13881608
> 
> 赞同：0
> 
> 时间：2012-12-14T15:28:54.947
> 
> 标签：ruby-on-rails-3, rubygems, rvm, bundler

*   **捆绑器**v1.2.3
***   RubyGems **v1.8.24***   RVM（最新）*   导轨**v3.2.9****

 **我在我的 Rails 应用程序中使用 binstubs 和这些默认值（`~/bundle/config`）：

```
---
BUNDLE_PATH: .bundle
BUNDLE_BIN: .bundle/bin 
```

然后我添加`.bundle/bin`到`$PATH`（通过 chwd 上的 zsh 脚本，所以它不是一个巨大的安全漏洞）所以我有正确的 gem 二进制文件可用。

这基本上没问题，除了两个问题。

### 第一期

当我 cd 进入应用程序并键入时，`gem list`我会得到一个**全局安装的 gems**列表（不是应用程序的 gems）。对于应用程序宝石，我需要输入`bundle exec gem list`并且它可以工作。我可以忍受这一点。

### 第 2 期

我不能安装任何本地（应用程序的本地）gem，它们位于捆绑包之外（即它们不在 Gemfile 中）。[gem-ctags](https://github.com/tpope/gem-ctags) gem就是一个这样的例子。

我理论上可以将它安装到与所有其他本地 gem 相同的目录中：

```
gem install --install-dir .bundle/ gem-ctags 
```

但是我没有办法使用它，它正在输入这个命令：

```
☺ gem ctags
ERROR:  While executing gem ... (RuntimeError)
    Unknown command ctags

☹ bundle exec gem ctags
ERROR:  While executing gem ... (RuntimeError)
    Unknown command ctags 
```

有没有办法让它工作？

PS：

*   当我安装`gem-ctags`到全局 gem 中然后执行`gem ctags`它时它应该正常工作）
*   我知道ruby​​gems [-bundler](https://github.com/mpapis/rubygems-bundler)但我宁愿让 binstubs 工作而不是使用它（除非没有其他方法......）

## 更新

### 第 3 期

`gem cleanup`不起作用，即使我正确设置了 $GEM_PATH （如@mpapis 建议的那样）：

```
☺ gem cleanup                                                                       
Cleaning up installed gems...
Attempting to uninstall rake-10.0.0
Unable to uninstall rake-10.0.0:
    Gem::InstallError: gem "rake" is not installed
Attempting to uninstall ffi-1.1.5
Unable to uninstall ffi-1.1.5:
    Gem::InstallError: gem "ffi" is not installed
Attempting to uninstall dalli-2.2.1
Unable to uninstall dalli-2.2.1:
    Gem::InstallError: gem "dalli" is not installed
Clean Up Complete 
```

当我输入`gem install`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:15:39.543

如果你想使用`.bundle/`你需要把宝石放进去`Gemfile`

您正在尝试在 之外使用 ruby​​gems 插件`GEM_PATH`，以使其正常工作，您必须这样做：

```
export GEM_PATH="$GEM_PATH:$PWD/.bundle" 
```

**第三季度更新：**

根据帮助：

```
$ gem help cleanup
...
  Description:
    The cleanup command removes old gems from GEM_HOME.  If an older version is
    installed elsewhere in GEM_PATH the cleanup command won't touch it. 
```

这意味着您需要：

```
export GEM_HOME="$PWD/.bundle" 
```

作为副作用，它应该消除对`--install-dir .bundle/`

就像您知道的那样 - 您正在为 bundler 和 ruby​​gems 做一些意想不到的事情，而且 RVM 显然还没有为您的流程做好准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T17:25:01.527

作为参考，这是我如何在zsh 中**动态**添加和添加`.bundle/bin`以使一切正常（即上述两个问题都已解决）：`$PATH``.bundle``$GEM_PATH`

```
export DEFAULT_GEM_HOME=$GEM_HOME

autoload -U add-zsh-hook
add-zsh-hook chpwd chpwd_add_binstubs_to_paths

function chpwd_add_binstubs_to_paths {
  # always delete from $OLDPWD (.bundle/bin/ from $PATH and .bundle/ from $GEM_PATH)
  export PATH=${PATH//$OLDPWD\/\.bundle\/bin:}
  export GEM_PATH=${GEM_PATH//$OLDPWD\/\.bundle:}
  export GEM_HOME=$DEFAULT_GEM_HOME

  if [ -r $PWD/Gemfile.lock ] && [ -d $PWD/.bundle/bin ]; then
    # add .bundle/bin to $PATH and .bundle/ to $GEM_PATH (deleting existing entries first)
    export PATH=$PWD/.bundle/bin:${PATH//$PWD\/\.bundle\/bin:}
    export GEM_PATH=$PWD/.bundle:${GEM_PATH//$PWD\/\.bundle:}
    export GEM_HOME=$PWD/.bundle
  fi
}

# initially execute `chpwd_add_binstubs_to_paths` as we might be opening a new shell in Rails project's directory
chpwd_add_binstubs_to_paths 
```**

# git - Git refs/remotes/origin/master 未指向有效对象

> ID：13881609
> 
> 赞同：34
> 
> 时间：2012-12-14T15:28:58.853
> 
> 标签：git

在最后一次合并到我的 Git 存储库的主分支后，我失去了克隆存储库的能力。

```
克隆到测试存储库...
远程：计数对象：126084，完成。
远程：压缩对象：100% (28327/28327)，完成。
接收对象：100% (126084/126084), 132.63 MiB | 29.30 MiB/s，完成。
远程：总计 126084（增量 96101），重复使用 126078（增量 96095）
解决增量：100% (96101/96101)，完成。
错误：refs/remotes/origin/master 未指向有效对象！
错误：尝试使用 ref refs/heads/master 编写
       不存在的对象 951aca8051823b2f202d30c9cb05401ef17618c6

```

存储库托管工具 Fisheye 报告：

```
无法从远程存储库获取：
/var/atlassian/application-data/fisheye/managed-repos/MYREPONAME.git
错误：无法找到 0d998c99b6d01e8aabca72b1934802acf90b8fc9，
致命：找不到对象 0d998c99b6d01e8aabca72b1934802acf90b8fc9

```

主分支上存储库中的最后一次提交是：

```
提交 0d998c99b6d01e8aabca72b1934802acf90b8fc9
合并：a6ea4b3 1f373a9
日期：2012 年 12 月 14 日星期五 13:57:24 +0200

合并分支'new_error_code'

```

我试过了：

```
cd /var/atlassian/application-data/fisheye/managed-repos/MYREPONAME.git
git gc
git fsck --full
git reflog expire --expire=0 --all
git update-ref
git gc --aggressive 
```

以下问题对我的情况没有帮助：

*   [如何恢复因硬盘故障损坏的 Git 对象？](https://stackoverflow.com/questions/801577/how-to-recover-git-objects-damaged-by-hard-disk-failure)
*   [GitHub自动合并后出现致命错误](https://stackoverflow.com/questions/10097069/fatal-error-after-github-automatic-merge)
*   [列出和删除没有分支的 Git 提交（悬空？）](https://stackoverflow.com/questions/3765234/listing-and-deleting-git-commits-that-are-under-no-branch-dangling)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-14T09:47:01.667

```
git gc
git fsck --full
git reflog expire --expire=0 --all
git update-ref -d 0d998c99b6d01e8aabca72b1934802acf90b8fc9
git gc --aggressive
git remote update --prune 
```

它奏效了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-07-08T14:17:48.230

***为 Matt Harasymczuk 的回答提供解释：***

执行垃圾收集，以便 Git 可以清理它自己造成的混乱[（有关 git gc 的更多信息，请点击此处）](https://git-scm.com/docs/git-gc)

```
git gc 
```

验证数据库中对象的连接性和有效性[（有关 git fsck 的更多信息）](https://git-scm.com/docs/git-fsck)

```
git fsck --full 
```

修剪参考日志中的所有条目[（有关 git reflog 的更多信息，请点击此处）](https://git-scm.com/docs/git-reflog)

```
git reflog expire --expire=0 --all 
```

删除对命名散列的引用[（这里有更多关于 git update-ref 的信息）](https://git-scm.com/docs/git-update-ref)

```
git update-ref -d <your hash here> 
```

再次运行垃圾收集，丢弃所有旧的增量。这将比第一次花费更长的时间，但在优化存储库方面更加彻底[（更多关于积极垃圾收集的信息）](https://git-scm.com/docs/git-gc#_aggressive)

```
git gc --aggressive 
```

更新远程列表，删除对不再存在的分支的引用[（更多关于 git remote 的信息）](https://git-scm.com/docs/git-remote)

```
git remote update --prune 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T17:23:52.753

通常你可以这样做：

```
git reflog master 
```

这将为您提供 master 指向的最后一个已知位置的列表。

一旦你知道了这一点，你就可以创建一个临时分支到旧版本的 master，即

```
git branch temp master@{1} 
```

然后检查温度，看看它是否按正确的顺序。如果您在那里没有看到任何内容，那么您之前执行的命令（删除 reflog、删除悬空提交等）可能已经消除了所有恢复方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-09T11:30:50.623

我遇到了类似的问题，但是在做`go build`or `go mod tidy`or时`go run`。所有的命令都给了我同样的错误，

'错误：refs/stash 没有指向一个有效的对象！'

我尝试了以下很多事情，包括上面给出的答案。

1.  `git remote prune origin`
2.  `git stash`
3.  `rm .git/refs/stash .git/logs/refs/stash`

**没有什么对我有用**。最后，我**删除**了路径下系统中存在的所有缓存`$GOPATH/go/pkg/mod/cache/`，并且能够解决问题。

# ruby - 运行 selenium ruby webdriver 脚本以从命令提示符 ruby 窗口输出文件时如何导出结果

> ID：13881610
> 
> 赞同：1
> 
> 时间：2012-12-14T15:29:02.293
> 
> 标签：ruby, selenium, webdriver, rake

目前，我通过在“使用 Ruby 启动命令提示符”终端中使用 rake gem 一次在我的测试套件（由 Selenium Ruby Webdriver 编写）中运行所有 selenium 脚本。

为此，我必须创建一个名称为“rakefile.rb”的文件，其内容如下，并在我的终端中调用“rake”：（我已经根据我之前帖子中的一个人的指南了解了这些知识）。

```
task :default do
    FileList['file*.rb'].each { |file| ruby file }
end 
```

但是，如果有一个脚本在执行时失败，运行将被终止。

任何人请帮助指导我如何修改“rakefile.rb”，以便如果有一个脚本失败，那么系统将忽略它并继续运行我的测试套件中的下一个脚本？

另外，您能否建议我一种在将脚本运行到一个输出文件时将所有结果写入的方法？或者每个脚本的结果都放在每个输出文件中，并且输出文件将显示失败的脚本列表。任何帮助表示赞赏。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:46:20.003

您可以使用`begin`and`rescue`来捕获测试脚本中的任何故障。

就像是

```
begin
 raise "Ruby test script failed"
rescue
 puts "Error handled"
end 
```

在你的情况下会是这样的

```
task :default do
    FileList['file*.rb'].each { |file| 
    begin
      ruby file
    rescue
      puts "Test script failed because of #{$!}"
    end 
    }
end 
```

并且在写入一个类似的文件时

```
task :default do
    $stdout = File.new('console.out', 'w')
    $stdout.sync = true
    FileList['*.rb'].each { |file| 
    begin
      ruby file
    rescue
      puts "test script failed because of #{$!}"
    end 
    }
end 
```

这样做是覆盖 $stdout 以重定向控制台输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:22:17.543

我在一个单元框架内运行我的所有测试。我自己使用测试单元，但你也可以使用 rspec。这也使您能够将断言添加到代码中，然后由单元框架报告。如果一个测试失败或出错，您可以继续下一个测试。

我的 rakefile 的简化版本如下所示

```
require 'rake/testtask'

#this will run all tests in directory with no dependencies 
Rake::TestTask.new do |t|
  t.libs << "test"
  t.test_files = FileList['FAL*.rb']
  t.verbose = true
end

#or you could run individual files like this

task :FAL001 do 
  ruby "FAL001.rb"
end 
```

每个测试用例看起来像这样

```
require "test-unit"
gem "test-unit"
require "selenium-webdriver"

class FAL001 < Test::Unit::TestCase
  def testFAL001 #methods that begin with test are automatically run 
    #selenium code goes here 
    assert_true(1 == 1)
  end
  def test002 
    #another test goes here 
  end
end 
```

# initialization - 如何在 NUNIT 初始化期间获取工作目录？

> ID：13881613
> 
> 赞同：1
> 
> 时间：2012-12-14T15:29:13.637
> 
> 标签：initialization, nunit, init, working-directory

这是一个棘手的问题：

*   我有一个单元测试`Test(string value)`，必须使用不同的参数值多次调用。
*   要提供的值列表是从在属性中`GetValues()`指定的另一个方法中读取的`[Test]``Test()`
*   `GetValues()`必须读取`Values.txt`工作目录中文件的内容才能返回值
*   工作目录**不是**测试程序集目录

为了实现这一点，我需要知道何时`GetValues()`调用工作目录，但我找不到此信息，因为：

*   `Directory.GetCurrentDirectory()`返回程序集的目录，而不是调用 nunit 的工作目录，
*   `TestContext.CurrentContext.WorkingDirectory`尚未定义，并导致`System.NullReferenceException`

我还尝试在夹具设置期间加载文件的内容，但这是在 之后调用的`GetValues()`，所以运气不好：我可以找到该文件，但已经引发了空指针异常。

有人有想法吗？预先感谢您的帮助

塞德里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T16:30:57.277

据我所知，这个功能在vestion 3.0 之前将不可用，那时工作目录根本不应该改变。

# android - 没有百分比的进度条

> ID：13881614
> 
> 赞同：0
> 
> 时间：2012-12-14T15:29:17.427
> 
> 标签：android, progress-bar, progressdialog, android-progressbar

我正在尝试创建一个不需要显示百分比的进度条。

```
public boolean onOptionsItemSelected( MenuItem item ) {
    switch( item.getItemId() ) {
        case R.id.back:
            this.dispatchKeyEvent( new KeyEvent( KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_BACK ) );
            finish();
            return true;
        case R.id.read:
            // This is where I would start my spinner....
            if( myService.getState() != 3 ) {
                myService.connect( MainMenu.previousDevice, true );
            }
            readWaves();
            return true;
        default:
            return super.onContextItemSelected( item );
    }
} 
```

微调器将在 readWaves() 函数中自行停止...

```
private void readWaves() {
        waveResults = RelayAPIModel.NativeCalls.GetWavesJava( RelayAPIModel.WAVES_V );
        // Turn the Spinner off Here.
        doOtherThings();
    } 
```

我发现大量代码告诉我如何使用线程使用进度条、在 xml 文件中添加进度条以及许多其他方法。

我认为对我来说最好的方法是创建一个 CustomDialog 类来弹出并让微调器旋转，直到我打电话结束它。

[这里](https://stackoverflow.com/questions/3225889/how-to-center-progress-indicator-in-progressdialog-easily-when-no-title-text-pa)显示的第一个答案是迄今为止我找到我想要的最接近的答案，但不幸的是他的解决方案不起作用。它不起作用的原因是因为最后一段代码：

```
public MyProgressDialog(Context context) {
    super(context, R.style.NewDialog);
} 
```

我使用的是 Android 2.3 并且`style`没有`R`. 我尝试自己添加它并得到一个错误。有谁知道如何解决这一问题？

编辑：

这是我尝试使用的代码`ProgressDialog`

```
case R.id.read:
            pDialog = new ProgressDialog( Waves.this );
            pDialog.setTitle( "Waves" );
            pDialog.setMessage( "Reading..." );
            pDialog.show();
            if( myService.getState() != 3 ) {
                myService.connect( MainMenu.previousDevice, true );
            }
            readWaves();
            return true;
        default:
            return super.onContextItemSelected( item );
    }
}

private void readWaves() {
    if( spinnerChoice == 0 ) {
        Log.i( "IN IF", "IN IF" );
        // Diff Voltage
        waveResults = RelayAPIModel.NativeCalls.GetWavesJava( RelayAPIModel.WAVES_V );
    } else {
        // Current 
        waveResults = RelayAPIModel.NativeCalls.GetWavesJava( RelayAPIModel.WAVES_I );
    }
    Log.i( "READ WAVES", "After If/Else" );
    pDialog.dismiss();
    /* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:37:10.637

已经为此特定目的创建了一个对话框。查看[ProgressDialog](https://developer.android.com/reference/android/app/ProgressDialog.html)。你可以像这样使用它：

```
//show the dialog
ProgressDialog pd = new ProgressDialog(YourActivity.this);
pd.setTitle("Your title");
pd.setMessage("Helpful message to the user");
pd.show();

/**************
* Do some stuff
**************/

//Hide the dialog
pd.dismiss(); 
```

编辑：这是它在选项菜单中的外观的一个小示例：

```
public boolean onCreateOptionsMenu(Menu menu) {  
    menu.add(0, 42, 0, "Option"); 
    return true;  
}  
public boolean onOptionsItemSelected(MenuItem item) {  
    switch (item.getItemId()) {  
    case 42: 
           ProgressDialog pd = new ProgressDialog(this);
           pd.show();
        break;
    default:
        //Do nothing      
    }  
    return false;  
} 
```

# regex - 使用 Linux 命令行删除多个文件中的多个 HTML 行

> ID：13881615
> 
> 赞同：0
> 
> 时间：2012-12-14T15:29:16.880
> 
> 标签：regex, linux, command-line, html-parsing

我在 Linux 服务器上有 1000 多个 html 文件，全部超过 1000 行。
大多数文件都有特定的 html 代码部分需要删除。

我需要删除的部分看起来是这样的：

```
<div class="LoginOuterCssClass" id="ctl07">
    ...
</div> 
```

是否有一些脚本或命令行解决方案？

像下面这样的命令没有帮助：

```
X,Ys/search/replace/g
1,2s/\([a-z]*\), \([a-z]*\)/\2 \1/ig
s/<[^]*>//g 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:44:28.213

在一个文件上尝试以下`sed`命令，看看它是否符合您的要求：

```
sed -n '/<div class="LoginOuterCssClass" id="ctl07">/{:a;N;/<\/div>/!ba;N;s/.*\n//};p' file.html 
```

要在多个文件上运行它并就地编辑它们，您可以运行`find`并将文件传递给`sed`via `xargs`，如下所示：

```
find /some/path -name "*.html" -print0 | xargs -0 sed -i -n '/<div class="LoginOuterCssClass" id="ctl07">/{:a;N;/<\/div>/!ba;N;s/.*\n//};p' 
```

# python - 删除标题并添加另一个

> ID：13881621
> 
> 赞同：2
> 
> 时间：2012-12-14T15:29:36.183
> 
> 标签：python, unix, sorting, header

我必须删除许多文件的前 2 个标题并用另一个文件替换它们。由于我是 Python 和编程新手，我一直在使用以下代码

```
import glob
import os
list_of_files = glob.glob('./*.txt')
for file_name in list_of_files:
    os.system('sed "1,2d" %s | sort -k1 > %s.sort' %(file_name,file_name))
    os.system ('cat header file %s.sort > %s.header' %(file_name,file_name)) 
```

哪个有效。但是我认为应该有更好的方法来完成这项工作。我也不必要地制作了一个我不需要的额外文件 *.sort 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:59:31.763

信不信由你，你可以在纯 python 中很容易地做到这一点：

```
import itertools
with open(filename) as fin:
    ilines = itertools.islice(fin, 2, None) #this throws away the first 2 lines
    lines = sorted(ilines, key=lambda x: x.split()[0])  #sort lexicographically on first column

with open('header') as header, open('%s.header'%filename) as fout:
    fout.writelines(header) #write the header
    fout.writelines(lines) #write the data 
```

你完成了。午休时间稍长一些，因为 python 可以帮助您节省时间* :-)。

*（或者，花一些你漫长的午餐时间来学习更多 python 提供的很酷的东西！）

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:36:02.027

避免`os.system`。

第一种方法可能是

```
import glob
import subprocess
list_of_files = glob.glob('./*.txt')
for file_name in list_of_files:
    sp1 = subprocess.Popen(['sed', '1,2d', file_name], stdout=subprocess.PIPE)
    sp2 = subprocess.Popen(['sort', '-k1'], stdin=sp1.stdout, stdout=subprocess.PIPE)
    out = open(file_name + '.header', 'w')
    sp3 = subprocess.Popen(['cat', 'header', 'file', '-'], stdin=sp2.stdout, stdout=out)
    sp1.stdout.close() # sp2 got it, not our business any longer
    sp2.stdout.close() # sp3 got it, not our business any longer
    out.close()
    sp1.wait()
    sp2.wait()
    sp3.wait() 
```

# database - 如何在数据库控制台内的文件中运行命令？

> ID：13881627
> 
> 赞同：1
> 
> 时间：2012-12-14T15:30:27.610
> 
> 标签：database, informix

有人可以告诉是否可以在数据库中运行 shell 脚本。

*设想：*

使用数据库 Informix。我在具有多个插入语句的文件中有一个脚本。我正在打开数据库连接。创建一些临时表并执行一些连接。为了将数据加载到临时表中，我需要该“文件”中的插入语句。

*问题：*

有没有办法或解决方法，以便我可以在数据库控制台内的该文件中运行命令？当我创建几个临时表时，我无法关闭数据库连接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T06:13:21.970

要在命令行上将脚本传递给数据库连接，请执行以下操作：

```
dbaccess [databasename] file.sql 
```

或者

```
dbaccess filename.sql 
```

`DATABASE`（如果文件在顶部包含一条语句。）

要在处理该文件时插入数据，请确保该文件包含以下内容：

```
CREATE TEMP TABLE foo (bar INT, baz CHAR(10));
LOAD FROM "foodata.unl" DELIMITER "|"
INSERT INTO foo;

SELECT ... 
```

**更新原始答案**

要将 SQL 嵌入到 shell 脚本中，您可以使用“here document”方法，我认为这就是您所暗示的：

```
#!/bin/ksh

echo "Starting"

dbaccess << EOSQL

    DATABASE foo;

    CREATE TEMP TABLE foobar (foo INT, bar CHAR(10));
    LOAD FROM "foobar.unl" DELIMITER "|"
    INSERT INTO foobar;

    SELECT ...

    UPDATE ...

EOSQL

echo "Finished" 
```

现在，如果需要，您可以使用脚本或环境变量来调整该 SQL 的行为...

```
SELECT * FROM foobar WHERE bar > $VALUE; 
```

shell 将在运行时为您插入where `$VALUE`，并像硬编码一样将其提供给 Informix 数据库。

您甚至可以通过嵌入一个子 shell 进程来注入整个 SQL...

```
dbaccess << EOSQL

    DATABASE foo;

    CREATE TEMP TABLE ...

    `cat $PATH_TO/some_more_sql_in_an_external_file.sql`

    UPDATE ...

EOSQL 
```

即便如此，dbaccess 进程也会将其视为此处文档的全部内容（但这是一种罕见且坦率地说非常奇怪的事情）。

*但是*，如果您要问的是您能否以某种方式暂停或中断查询以以某种方式影响它，检查临时表的内容或以某种方式更改它，答案是否定的，您不能。

还有一个值得记住的技巧。将环境变量设置为`DBACCNOIGN`非零值将强制 here doc SQL 处理中的任何错误中止整个处理链。dbaccess 的默认行为是报告错误并移至下一条语句。

我希望这会有所帮助。

# c# - 如何在 C# ASP.Net 会话中保存对象数组？

> ID：13881630
> 
> 赞同：6
> 
> 时间：2012-12-14T15:30:36.903
> 
> 标签：c#, asp.net, session

我在我的 C# ASP.Net 程序中有一个在回发期间填充的对象数组，我希望在下一次回发期间恢复它们。为此，我将数组声明包含在 Default 类定义中，这样保存：-

```
this.Session["This"] = this; 
```

并恢复：-

```
Default saved_stuff = (Default) this.Session["This"]; 
```

这适用于除以下之外的所有内容：-

```
MyClass [] my_array; 
```

恢复后，`saved_stuff.my_array`总是`null`。

MyClass 的定义如下：-

```
public MyClass : ISerializable
{
    private string some_string;
    private double some_double;
    // some more simple members
    // Some getters and setters
    // ISerializable Implementation
} 
```

我试过制作`MyClass`工具`ISerializable`，但这没有任何区别。有谁知道我应该做什么？

**编辑**回答@Michael的问题，然后我正在做类似的事情......

```
for (int i = 0; i <= saved_stuff.my_array.GetUpperBound(0); i++)
{
    // blah blah
} 
```

这是失败的“对象引用未设置为对象的实例”。的所有其他成员变量在调试时`Default`可见。`saved_stuff`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T15:58:12.547

您必须将数组数据存储在其自己的会话对象中：

```
MyClass[] my_array = //Something

Session["ArrayData"] = my_array; 
```

然后将其检索为：

```
var arrayData = (MyClass[])Session["ArrayData"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T15:40:55.193

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms178581.aspx)，如果您将会话状态存储在内存中（默认），那么它不需要可序列化

> 当您使用[InProc](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatemode.aspx)以外的会话状态模式时，会话变量类型必须是原始 .NET 类型或可序列化。这是因为会话变量值存储在外部数据存储中。

我怀疑其他东西正在清除数组。请记住

```
this.Session["This"] = this; 
```

当使用内存中的会话状态时，不会创建页面对象的*副本*，因此您对页面对象（“ `this`”）所做的任何更改也会对“已保存”对象进行。因此，如果您设置`this._saved_stuff = null`，则保存的对象的属性也将为空。

我不会尝试将页面存储在会话中，而是选择要保存的值并明确保存它们。

此外，如果您希望在下一次*回*发中可以恢复这些值，您可能需要选择`ViewState`。使用`Session`确实存在会话在回发之间被破坏的风险。这可能很少见，但这是一个考虑因素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:42:30.603

首先你应该知道，在 Asp.net Web 应用程序中有三种类型的 Session State 1\. in process 2\. State Server 3\. In Database

如果会话状态正在处理中（默认设置），您可以将对象直接保存到会话中，或者您需要将对象标记为可序列化，这样您就可以将对象保存到状态服务器或数据库中（在配置文件）

# c++ - 在 cygwin (_libintl_gettext) 上安装 crosstool-ng 时出错

> ID：13881633
> 
> 赞同：2
> 
> 时间：2012-12-14T15:30:46.380
> 
> 标签：c++, linux, cygwin

我在 cygwin 上安装 crosstool-ng 时遇到问题。

我已经[在这里](http://crosstool-ng.org/download/crosstool-ng/)下载了最后一个包到 cygwin 根文件夹，然后：

1.  ./配置一切OK
2.  制作 - 错误！

完整的错误日志：

```
$ make
  SED    'ct-ng'
  SED    'scripts/crosstool-NG.sh'
  SED    'scripts/saveSample.sh'
  SED    'scripts/showTuple.sh'
  GEN    'config/configure.in'
  GEN    'paths.mk'
  GEN    'paths.sh'
  LD     'conf'
zconf.tab.o:zconf.tab.c:(.text+0x1799): undefined reference to `_libintl_gettext'
zconf.tab.o:zconf.tab.c:(.text+0x48f8): undefined reference to `_libintl_gettext'
zconf.tab.o:zconf.tab.c:(.text+0x592b): undefined reference to `_libintl_gettext'
zconf.tab.o:zconf.tab.c:(.text+0x5b20): undefined reference to `_libintl_gettext'
zconf.tab.o:zconf.tab.c:(.text+0xcd60): undefined reference to `_libintl_gettext'
zconf.tab.o:zconf.tab.c:(.text+0xcd6e): more undefined references to `_libintl_gettext' follow
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: zconf.tab.o: bad reloc address 0x564 in section `.data'
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: final link failed: Invalid operation
collect2: ld returned 1 exit status
Makefile:108: recipe for target `conf' failed
make[2]: *** [conf] Error 1
Makefile:160: recipe for target `build-lib-kconfig' failed
make[1]: *** [build-lib-kconfig] Error 2
Makefile:120: recipe for target `build' failed
make: *** [build] Error 2 
```

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:35:47.883

您可以在这里尝试补丁：http: [//sourceware.org/ml/crossgcc/2012-05/msg00012.html](http://sourceware.org/ml/crossgcc/2012-05/msg00012.html)

# c# - 确保生成的进程的窗口位于主应用程序的前面？

> ID：13881634
> 
> 赞同：5
> 
> 时间：2012-12-14T15:30:57.813
> 
> 标签：c#, .net, windows

在我的 GUI 应用程序中，我使用 C#`Process`类来生成可能启动窗口的外部进程。子进程窗口可能通过第三方 API 调用显示，因此并不总是可以获得窗口句柄。有什么方法可以确保子进程的窗口显示在主应用程序窗口的前面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T04:15:42.830

通常的方法是：

1\. 获取 Process.Start()
2 返回的 Process 类实例。查询 Process.MainWindowHandle
3 。调用非托管 Win32 API 函数“ShowWindow”或“SwitchToThisWindow”

您的问题的诀窍是“子进程窗口可能会通过第三方 API 调用显示”。在这种情况下，您将需要获取生成的 exe 的窗口句柄和枚举子窗口。一旦您拥有 API 调用后显示的表单的句柄，您就可以使用[BringWindowToTop API](http://pinvoke.net/default.aspx/user32/BringWindowToTop.html)。

[我使用How To Enumerate Windows Using the WIN32 API](http://support.microsoft.com/kb/183009/EN-US)作为灵感进行了一个小测试。创建一个包含 1 个表单和 2 个按钮的 Windows 应用程序：

```
public partial class Form1 : Form
{
[DllImport("user32.dll", SetLastError = true)]
static extern bool BringWindowToTop(IntPtr hWnd);

[DllImport("user32")]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool EnumChildWindows(IntPtr window, EnumWindowProc callback, IntPtr i);

public Form1()
{
    InitializeComponent();
}

private System.IntPtr hWnd;
private void button1_Click(object sender, EventArgs e)
{
    Process p = Process.Start(@"C:\TFS\Sandbox\3rdPartyAppExample.exe");         
    try
    {
        do
        {
            p.Refresh();
        }
        while (p.MainWindowHandle.ToInt32() == 0);

        hWnd = new IntPtr(p.MainWindowHandle.ToInt32());
    }
    catch (Exception ex)
    {
        //Do some stuff...
        throw;
    }
}

private void button2_Click(object sender, EventArgs e)
{
    3rdPartyAppExample.Form1 f = new 3rdPartyAppExample.Form1();
    f.ShowForm2();
    //Bring main external exe window to front
    BringWindowToTop(hWnd);
    //Bring child external exe windows to front
    BringExternalExeChildWindowsToFront(hWnd);
}

private void BringExternalExeChildWindowsToFront(IntPtr parent)
{
    List<IntPtr> childWindows = GetChildWindows(hWnd);
    foreach (IntPtr childWindow in childWindows)
    {
        BringWindowToTop(childWindow);
    }
}

// <summary>
/// Returns a list of child windows
/// </summary>
/// <param name="parent">Parent of the windows to return</param>
/// <returns>List of child windows</returns>
public static List<IntPtr> GetChildWindows(IntPtr parent)
{
    List<IntPtr> result = new List<IntPtr>();
    GCHandle listHandle = GCHandle.Alloc(result);
    try
    {
        EnumWindowProc childProc = new EnumWindowProc(EnumWindow);
        EnumChildWindows(parent, childProc, GCHandle.ToIntPtr(listHandle));
    }
    finally
    {
        if (listHandle.IsAllocated)
            listHandle.Free();
    }
    return result;
}

/// <summary>
/// Callback method to be used when enumerating windows.
/// </summary>
/// <param name="handle">Handle of the next window</param>
/// <param name="pointer">Pointer to a GCHandle that holds a reference to the list to fill</param>
/// <returns>True to continue the enumeration, false to bail</returns>
private static bool EnumWindow(IntPtr handle, IntPtr pointer)
{
    GCHandle gch = GCHandle.FromIntPtr(pointer);
    List<IntPtr> list = gch.Target as List<IntPtr>;
    if (list == null)
    {
        throw new InvalidCastException("GCHandle Target could not be cast as List<IntPtr>");
    }
    list.Add(handle);
    //  You can modify this to check to see if you want to cancel the operation, then return a null here
    return true;
}

/// <summary>
/// Delegate for the EnumChildWindows method
/// </summary>
/// <param name="hWnd">Window handle</param>
/// <param name="parameter">Caller-defined variable; we use it for a pointer to our list</param>
/// <returns>True to continue enumerating, false to bail.</returns>
public delegate bool EnumWindowProc(IntPtr hWnd, IntPtr parameter);

} 
```

3rdPartyAppExample 是一个带有 2 个表单的 Winform 应用程序。我引用这个应用程序并调用 Form1 的 Public 方法来显示 Form2：

```
public partial class Form1 : Form
{        
    public Form1()
    {
        InitializeComponent();
    }
    public void ShowForm2()
    {
        var f = new Form2();
        f.Show();
    } 
```

* * *

或者，您可能希望[检查 Windows 标题](http://support.microsoft.com/kb/242308)：

```
 hInst = ProcessStart("calc.exe")

  // Begin search for handle
  hWndApp = GetWinHandle(hInst)

  If hWndApp <> 0 Then
   // Init buffer
   buffer = Space$(128)

   // Get caption of window
   numChars = GetWindowText(hWndApp, buffer, Len(buffer)) 
```

* * *

另一个解决方案（不是很稳定）在这里讨论：http: [//www.shloemi.com/2012/09/solved-setforegroundwindow-win32-api-not-always-works/](http://www.shloemi.com/2012/09/solved-setforegroundwindow-win32-api-not-always-works/)

诀窍是通过附加线程（使用 AttachThreadInput API）使窗口“认为”我们的进程和目标窗口（hwnd）相关。

关于`myTopForm.TopMost = true`答案，这不适用于外部应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:34:39.387

它与“过程”无关，与 Windows 焦点有关。

您可能可以执行以下操作：

[http://msdn.microsoft.com/en-us/library/3saxwsad.aspx](http://msdn.microsoft.com/en-us/library/3saxwsad.aspx)

```
public void MakeOnTop()
{
  myTopForm.TopMost = true;
} 
```

但总的来说，您需要 Window 句柄（生成的进程可以很容易地找出自己的句柄）并且您需要这样的东西：

[http://support.microsoft.com/kb/186431](http://support.microsoft.com/kb/186431)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:36:34.203

您可以尝试使用 SetWindowPos api 调用将窗口发送到窗口中 z 顺序的后面。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545(v=vs.85).aspx)

```
[DllImport("user32.dll", EntryPoint = "SetWindowPos")]
public static extern IntPtr SetWindowPos(IntPtr hWnd, int hWndInsertAfter, int x, int Y, int cx, int cy, uint wFlags);

const UInt32 SWP_NOSIZE = 0x0001;
const UInt32 SWP_NOMOVE = 0x0002;

static readonly IntPtr HWND_BOTTOM = new IntPtr(1);

static void SendWindowBack()
{
    var hWnd = this.Handle;
    SetWindowPos(hWnd, HWND_BOTTOM, 0, 0, 0, 0, SWP_NOSIZE | SWP_NOMOVE);
} 
```

（用于 winforms 而不是 wpf 的一些编辑。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T16:19:07.437

没有直接且 100% 可靠的方法可以做到这一点。我会以一种有点迂回的方式来解决这个问题：

获取您启动的进程的进程 ID，然后使用该`EnumWindows`函数的 C# 等效项。在回调中，调用`GetWindowThreadProcessId`获取窗口的进程ID，将其与刚刚启动的窗口的进程ID进行比较。如果它们匹配，那么您可以使用 将该窗口置于前台`SetForegroundWindow`。

如果有问题的应用程序呈现多个顶级窗口，这将找到第一个，这可能不是正确的。但是在没有来自应用程序的一些“合作”的情况下，我认为我概述的内容是你能做的最好的。

# asp.net - 使用负载平衡器的文件权限错误

> ID：13881644
> 
> 赞同：0
> 
> 时间：2012-12-14T15:31:26.363
> 
> 标签：asp.net, vb.net, load-balancing

我的日志记录有问题。我有一个类用于在我的 ASP.net 应用程序中将事件记录到文本文件中。这门课似乎工作得很好。但是，由于我们使用的是负载平衡器，因此会出现复杂情况。我们在两台服务器上运行我们的应用程序。如果一台服务器出现故障，负载均衡器会将 Web 应用程序切换到另一台服务器。我还可以指示浏览器指定在哪个服务器上查看应用程序。

问题是当我转到一台服务器时，应用程序可以正常记录。但是如果我尝试切换到另一台服务器，我会收到此错误：

异常详细信息：System.UnauthorizedAccessException：对路径“\myServer-qa\plantshare\someFolder\myApp\Logs\2012_12_14.txt”的访问被拒绝。

> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 上的网络服务），如果应用程序不模拟，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。
> 
> 要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的框。

如果我删除文件，哪个服务器首先创建它会很好，但另一个会失败。如果我检查文件权限，只有创建它的服务器才有权限。这是我的代码或 IIS 的问题吗？此外，我们使用 Windows 身份验证。这是我用来编写的类：

```
Imports System.Net
Imports System.IO

Public Class logger

    Private Shared _thisInstance As logger
    Private Shared InstanceLock As New Object
    Private Shared FileLock As New Object

    Private _path As String
    Public Property path() As String
        Get
            Return _path
        End Get
        Set(ByVal value As String)
            _path = value
        End Set
    End Property

    Protected Sub New(ByVal path As String)
        Me.path = path
    End Sub

    Public Shared Function GetSingleton(ByVal path As String) As logger

        SyncLock InstanceLock
            If _thisInstance Is Nothing Then
                _thisInstance = New logger(path)
            End If
        End SyncLock

        Return _thisInstance
    End Function

    Private Function checkDir(ByVal path As String) As Boolean
        Dim dir As New DirectoryInfo(path)
        Dim exist As Boolean = True
        If Not dir.Exists Then
            Try
                dir.Create()
            Catch ex As Exception
                exist = False
            End Try
        End If
        Return exist
    End Function
    Private Function checkFile(ByVal path As String) As Boolean

        Dim myFile As New FileInfo(path)
        Dim exist As Boolean = True
        Dim objWriter As IO.StreamWriter
        Dim fs As FileStream

        If Not myFile.Exists Then
            Try

                fs = New FileStream(path, FileMode.CreateNew, FileAccess.ReadWrite, FileShare.ReadWrite)
                objWriter = New System.IO.StreamWriter(fs)

                objWriter.Close()
                objWriter.Dispose()
                fs.Close()
                fs.Dispose()

            Catch ex As Exception
                exist = False
            Finally

            End Try
        End If

        Return exist
    End Function

    'updates file
    Public Sub Logger(ByVal filePath As String, ByVal Message As String, ByVal title As String, Optional ByVal stkTrace As String = "")
        Dim sw As StreamWriter
        Dim fs As FileStream
        Dim path As String
        Dim now As DateTime = DateTime.Now
        Dim today As String

        today = Date.Now.ToString("yyy/MM/dd")
        path = Me.path & today.Replace("/", "_") & ".txt"

        If checkFile(path) Then
            SyncLock FileLock
                fs = New FileStream(path, FileMode.Append)
                sw = New StreamWriter(fs)
                Try
                    sw.WriteLine("Title: " & title)
                    sw.WriteLine("Message: " & Message)
                    sw.WriteLine("StackTrace: " & stkTrace)
                    sw.WriteLine("Date/Time: " & now.ToString("yyyy/MM/dd HH:mm:ss"))
                    sw.WriteLine("================================================")
                    sw.Flush()
                Catch ex As Exception
                    Throw
                Finally
                    sw.Close()
                    fs.Close()

                    sw.Dispose()
                    fs.Dispose()
                End Try
            End SyncLock
        End If

    End Sub

End Class 
```

# sql - 使用嵌套查询的更新语句

> ID：13881649
> 
> 赞同：31
> 
> 时间：2012-12-14T15:31:39.823
> 
> 标签：sql

我有一张桌子：

```
mytable:
    id
    userID
    logDate
    lastLogDate 
```

对于该表中的每一行，我想将“lastLogDate”列更新为每个用户的 logDate 的最大值......

从概念上讲，每个用户都应该有一个 lastLogDate = 返回的值：

```
select max(logDate) from mytable group by userID 
```

有人可以帮我写更新声明吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-14T15:41:24.837

像这样的东西？

```
UPDATE mytable SET lastLogDate = t.maxDateForUser  
FROM  
(  
    SELECT userid, MAX(logDate) as maxDateForUser  
    FROM mytable  
    GROUP BY userId  
) t  
WHERE mytable.userid = t.userid 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-14T15:40:31.857

你可以这样做：

```
UPDATE t
SET t.logDate = t2.LatestDate
FROM YourTable t
INNER JOIN
(
    SELECT userID, MAX(LogDate) LatestDate
    FROM YourTable
    GROUP BY userID
) t2 ON t.userID = t2.userID; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-14T15:38:46.070

我不知道我是否理解正确。否则会更具体一点，但据我所知，你应该按照以下方式做一些事情：

```
UPDATE `mytable`
SET lastLogDate = (SELECT statement goes here)
WHERE ... 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-03T13:19:39.043

```
UPDATE mytable mT,
  (SELECT userid,
          MAX(logDate) AS maxDateForUser
   FROM mytable
   GROUP BY userId) t
SET mT.lastLogDate = t.maxDateForUser
WHERE mT.userid = t.userid; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-14T15:51:10.403

以下更新声明应该做你正在寻找的

```
update mytable mt set  lastLogDate  = (select max(logDate) from  mytable where userID = mt.userID) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-06T13:44:56.957

你可以像这样简单地编写一个嵌套查询

```
 Update  mytable a 
    set 
    a.lastLogDate = (select max(logDate) from mytable b
    where a.id=b.id)
    Where...;

```

# javascript - 公共资产的正则表达式路由

> ID：13881651
> 
> 赞同：1
> 
> 时间：2012-12-14T15:31:47.157
> 
> 标签：javascript, node.js, coffeescript, express

我有“小部件”，其中包括客户端和服务器`.coffee`文件（将客户端视为 Backbone.js 模型/视图，将服务器视为相关的 ExpressJS 路由），所有这些都在根项目下：

```
my-node-expressjs3-project/
  src/
    widget1/
      client/
        app.coffee
      server/
        routes.coffee
    widget2/
      client/
        app.coffee
      server/
        routes.coffee
  app/
    widget1/
      client/
        app.js 
      server/
        routes.js
    widget2/
      client/
        app.js 
      server/
        routes.js
  public/ 
```

所有`.coffee`文件编译为`app/`. 我试图保持小部件的引用完整，并且只允许`client/`为“小部件”提供文件夹。问题 1 - 我无法让它工作。问题 2 - 如果 2 个小部件包含相同的`app.js`文件，它们在我认为解决问题的方式下看起来会相同：

```
app.use express['static'](__dirname + '/public')
app.use express['static'](__dirname + '/app/*/client/') 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:21:04.433

关于问题一，node 没有内置的方法来使用 globbing 搜索这样的文件系统。如果您的应用程序目录中有非小部件的东西，您将需要手动过滤掉它们，或者您可以使用类似很棒的[node-findit](https://github.com/substack/node-findit)包。

关于问题二，一旦有了小部件列表，您就可以在每个小部件的 subUrl 上安装静态中间件。该`app.use`函数采用可选的安装路径。

```
var widgetDirs = fs.readdirSync('app');

widgetDirs.forEach(function(widgetDir) {
    app.use(widgetDir, express.static(__dirname + '/app/' + widgetDir + '/client/'));
}); 
```

# events - 应用程序无权执行此操作

> ID：13881653
> 
> 赞同：0
> 
> 时间：2012-12-14T15:31:59.450
> 
> 标签：events, facebook-graph-api

我的 Facebook 网络应用程序有问题。

我想邀请朋友参加活动。我的应用程序配置了`create_event`权限，并且事件的`can_invite_friend`标志设置为`1`. Facebook说该应用程序没有权限。

有人能帮我吗？

```
$resultinvite = $oFacebook->api("/".$eid . "/invited/" . $sspId, "POST", Array('access_token' => $oFacebook->getAccessToken())); 
```

罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T03:05:27.747

您还需要访问 user_events

# arrays - Postgres 比较数组的最快方法

> ID：13881667
> 
> 赞同：2
> 
> 时间：2012-12-14T15:33:03.020
> 
> 标签：arrays, postgresql

在存储过程中，我正在生成一个键数组，并希望将其与表中的键数组进行比较。比较两个数组以查看它们是否至少有一个匹配的值的最快方法是什么？

到目前为止，我们已经尝试了以下方法：

*   循环生成的键并将它们与键字段进行比较（慢）
*   在数组上使用数组操作重叠 (&&)

下面是表的定义：`solicitation`

```
id bigint NOT NULL DEFAULT nextval('id_seq'::regclass),
type_id bigint,
name character varying(2000),
key character varying[],
status bigint 
```

存储过程的示例代码

```
-- keys = list of generated keys
FOR _id, _name, _type IN
   SELECT rec.eid, rec.domain, rec.name, rec.type_id
   from   solicitation rec 
   where  rec.key && _keys
   and    rec.status in (1201, 1202, 1241)
LOOP
...
END LOOP; 
```

`key`被索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:29:05.883

使用数组重叠操作 (&&) 速度很快，但速度变慢是由于生成的数组中存在 NULL。

删除 NULL 将性能从 6 秒提高到 300 毫秒，以实现数百万的表大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:43:58.150

postgresql 中的数组运算符非常快。

但请注意，您应该使用`GIN`索引来获得性能改进。

大多数情况下，在 DB 服务器中执行作业的性能更快，但请注意，如果您的数据库服务器过载，创建 Web 服务器的副本比创建数据库副本更容易，因此请尝试将负载从 DB 服务器转移到 Web 服务器，以更好地管理跨 Web 服务器的负载。

# jquery - 在特定位置滚动滞后 - Chrome

> ID：13881669
> 
> 赞同：0
> 
> 时间：2012-12-14T15:33:13.657
> 
> 标签：jquery, google-chrome, scroll, lag

你可以在这里看到这个问题：[http ://www.mtthwbsh.com/](http://www.mtthwbsh.com/)

我已经阅读了有关在 Chrome 中遇到滚动延迟问题的人，但没有遇到任何特定于页面上单个位置的内容。如果您滚动过去“恢复”部分然后备份它会非常不稳定并且会停顿很长一段时间。想知道这是否与文件大小有关，但在 Chrome 以外的浏览器中并不那么极端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:21:04.793

我认为这与 jQuery 无关。这取决于您在“工作”部分获得的可笑的 6784×6784px 1.4mb JPEG。我猜 Chrome 会在它离开屏幕时从内存中删除它，然后必须重新渲染它才能向上滚动。

它不需要那么大，尤其是当你把它放入一个 254px 的方形盒子时。

# php - Facebook 注册/登录插件

> ID：13881672
> 
> 赞同：-1
> 
> 时间：2012-12-14T15:33:19.360
> 
> 标签：php, mysql, facebook, login, facebook-javascript-sdk

我想更新我的网站，以便它可以链接到 facebook 用户。我有一个数据库并使用 mysql 作为原始登录系统。我现在想用 f​​acebook 替换它。事情是我仍然想运行我的检查，我不只是希望任何 facebook 用户登录，只有那些进入数据库的用户。用户访问我的网站的唯一方法是使用 .edu 地址。我如何将它与 facebook 插件结合起来？Facebook 有两个登录系统选项，JAVASCRIPT 或服务器端脚本。我只想知道做我想做的事情的最佳实用方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:47:58.123

希望以下步骤对您有所帮助

1.  使用 Facebook 登录
2.  从用户（电子邮件，read_stream）获取扩展权限。
3.  **一旦您获得用户的许可，使用getSignedRequest()**或**FB.getLoginStatus**获取用户的 facebook id 。
4.  使用图形 api 获取用户信息（即[https://graph.facebook.com/btaylor](https://graph.facebook.com/btaylor)）
5.  从响应中获取电子邮件 ID 并检查有效的用户电子邮件 (.edu)。
6.  如果电子邮件 ID 不是 .edu（销毁用户会话并显示无效消息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:34:08.387

然后，您必须执行两步登录过程。首先，验证用户的地址（.edu 与否），然后使用 facebook 登录。不是一个好的设计，但两者都需要分开。

# python - PyOpenCV 不会在带有 Python2.7 的 Raspbian 上构建

> ID：13881673
> 
> 赞同：2
> 
> 时间：2012-12-14T15:33:24.850
> 
> 标签：python, opencv, python-2.7, raspberry-pi

我正在尝试在我的 Raspberry Pi 上安装 PyOpenCV，以便我可以使用它的网络摄像头捕获功能。不幸的是，我似乎在这方面遇到了很多困难，因为我无法为我建造该死的东西。

我已经阅读了各种教程定义的所有先决条件，但是当我使用 CMake-GUI 尝试配置构建时，我得到了这个错误

```
CMake Error at /usr/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:97           (MESSAGE):
  Could NOT find PythonLibs (missing: PYTHON_INCLUDE_DIRS)
Call Stack (most recent call first):
  /usr/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:288 (_FPHSA_FAILURE_MESSAGE)
  /usr/share/cmake-2.8/Modules/FindPythonLibs.cmake:186 (FIND_PACKAGE_HANDLE_STANDARD_ARGS)
  CMakeLists.txt:31 (find_package) 
```

我尝试手动将 PYTHON_INCLUDE_DIRS 变量添加到 cmake，其值为“/usr/local/lib/python2.7/site-packages”和“/usr/lib/python2.7”，两者均以相同的方式失败错误。

在使用 CMake 构建时，我非常缺乏经验，所以我可能正在做一些愚蠢且易于修复的事情。

或者; 我愿意接受有关通过 Linux 上的 python 访问网络摄像头的更轻、更快的方法的建议，因为我知道 OpenCV 是一个相当大的模块，仅用于这个小功能。我这里只有 700mHz 可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T22:09:44.247

这应该有效：

```
apt-get install python-dev 
```

# database - 理解功能依赖

> ID：13881674
> 
> 赞同：4
> 
> 时间：2012-12-14T15:33:25.097
> 
> 标签：database, normalization, functional-dependencies

我目前正在学习函数依赖，并且正在努力理解它们背后的概念。

说我有桌子：

**顾客**

```
|-----------|--------------|------------|------------------|------------------|
|Cust-ID    | Cust-FName   |Cust-LName  |Cust-Email        |Cust-Pw           |
|-----------|--------------|------------|------------------|------------------|
|1          |John          |Smith       |jsmith@email.com  |srt6564sdgjhy55y  |
|2          |Adam          |Borneo      |adb@hotmail.com   |45657ythjdfgqAfd  |
------------------------------------------------------------------------------- 
```

有两个候选键：cust-ID 和 cust-Email（只有一个电子邮件地址可能属于一个客户）。选择 cust-ID 作为 PK，唯一的功能依赖是：

`{Cust-ID} -> {Cust-FName, Cust-LName, Cust-Email, Cust-Pw}`?

或者，我会绘制/表示两个候选键：

`{Cust-ID} -> {Cust-FName, Cust-LName, Cust-Email, Cust-Pw}`

`{Cust-Email} -> {Cust-ID, Cust-FName, Cust-LName, Cust-Pw}`?

本能告诉我前者，但鉴于这是一个全新的话题，我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T11:48:42.030

两个都

```
{Cust-ID} -> {Cust-FName, Cust-LName, Cust-Email, Cust-Pw} 
```

`{Cust-Email} -> {Cust-ID, Cust-FName, Cust-LName, Cust-Pw}`

在您的情况下是功能依赖项。

**函数依赖**是这样的情况：只要有两行箭头左侧的列具有相同的值，则箭头右侧的列的值必须相等。如果您有两行具有相同的客户 ID，则名称、电子邮件和密码列必须相同。如果您有两行具有相同的客户电子邮件，那么（在您的示例中）名称、电子邮件和密码列必须相同。

如果您的表不是第三范式，那么您可能与左侧键的适当子集具有功能依赖关系。实际上，您根据功能依赖关系定义候选键和范式（2NF、3NF、BCNF）。

您可以在我们公司的博客上阅读更多关于[功能依赖的信息](http://www.vertabelo.com/blog/functional-dependencies)。这是关于数据规范化的系列文章的第一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:37:00.463

功能依赖集始终是 [candidate] 键的超集。换句话说，*键*是具有覆盖整个关系的属性列表的功能依赖关系。因此，您列出的两个候选键也是功能依赖项。

# java - 双指针Android JNI

> ID：13881675
> 
> 赞同：0
> 
> 时间：2012-12-14T15:33:28.470
> 
> 标签：java, android, c, java-native-interface, native

我有一个获取双指针的函数

```
int getList(unsigned char **list); //it returns a list of something 
```

我想知道如何将双指针从本机代码（JNI）传递给我的函数。任何人？

这是我尝试过的，但它不起作用。

```
jint Java_test_test_Activity_getList(JNIEnv *env, jobject this, jobjectArray list, jint size){
   jint count=0;
   jbyteArray bArray;
   jByteArray cList;
   count=(*env)->GetArrayLength(env, list);
    for(int i=0; i<count; i++){
       bArray[i]=(*env)->GetObjectArrayElement(env, list, i);
       (*env)->GetByteArrayRegion(env, bArray[i], 0, size, cList[i]);
     }

    return  getList(cList);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:48:55.037

你不能使用'&'运算符来获取你的jByteArray的地址吗？

```
return  getList(&cList); 
```

C/C++ 中的 '&' 为您提供变量（指针）的地址。您可以在指针上使用它来获取双指针。但是我不确定 jByteArray 和 unsigned char* 之间的转换是否那么简单，您可能还有其他事情要做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:18:31.040

双指针通常没什么大不了的。你只需要记住所有 3 层。

1.  您可以直接访问变量值的层。（例如int a；a = 3；）
2.  该层将保留指向您先前定义的变量的指针。（例如 int *p = &a;）
3.  最后一层是一个指针指向另一个指针的地方。（例如 int *p2 = &p）

所以让我们假设我们在第 3 层并且我们正在使用指针 p2。

1.  *p2 将给我们指针 p。
2.  现在我们只需要取消对 p 的引用就可以得到 a，所以 *p 会给我们 a 的值。

因此，为了保留某个东西的双指针，您需要返回最低层的指针。(例如 (&(&a)))

如前所述，为了获得您需要取消引用两次的值。（例如 *(*ptr) ）

为什么要尝试将 jobjectArray 元素存储到 jByteArray 元素中？

```
bArray[i]=(*env)->GetObjectArrayElement(env, list, i); 
```

此外，您可以直接使用等效的 C/C++ 代替 jByteArray cList，但这可能与修复错误无关。

# objective-c - 根据点击的内容，附件视图的不同“突出显示”颜色？

> ID：13881679
> 
> 赞同：0
> 
> 时间：2012-12-14T15:33:37.240
> 
> 标签：objective-c, cocoa-touch, ios5

我的设计师想出了一个有点棘手的设计。在 tableView 中，他们希望我
1) 有一个自定义附件视图 - (UIButton 子视图) - 完成
2) 给一个被点击的单元格附件一个自定义操作 (没有 detailView 推送到导航堆栈而是其他东西) - 完成

现在是棘手的部分。

1）如果我点击单元格，附件视图应显示“highlightedBackground”。
2）如果我点击附件视图，只有附件视图应该突出显示，但带有“alternativeHighlightedBackground”。

回顾一下，对于accessoryView，我们有正常的背景和两种不同的高亮背景，这取决于是点击了整个单元格还是只点击了附件视图。

目前，我正在将 UIButton 作为子视图添加到 cellForRowAtIndexPath 中的附件视图中，用作自定义附件。显然，附件视图将触摸事件传递给按钮，并且按钮以相同的背景突出显示，而不管点击了什么。该单元格目前不是自定义的，它是一个普通的 UITableViewCell 实例。SDK是iOS5，可惜没有iOS6可以用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:12:47.973

我会放弃附件视图路线，并创建一个`UITableViewCell`. 只需在 init 函数中创建您的按钮，将其作为子视图添加到`contentView`单元格中，将按钮的修饰操作设置为您想要的任何内容，然后`layoutSubviews`使用如下所示的内容覆盖：

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    CGRect bounds = self.contentView.bounds;

    CGFloat buttonOriginX = self.contentView.bounds.size.width - BUTTON_WIDTH - PAD;
    CGFloat buttonOriginY = floorf((bounds.size.height - BUTTON_HEIGHT)/2.0)+1;

    self.mybutton.frame = CGRectMake(buttonOriginX, buttonOriginY, BUTTON_WIDTH, BUTTON_HEIGHT );
} 
```

该按钮将在单元格以这种方式之前拦截触摸。然后，您可以完全控制触摸按钮时显示的内容（设置设置它的突出显示状态图像）。

# vba - 请帮助停止无限循环

> ID：13881681
> 
> 赞同：-1
> 
> 时间：2012-12-14T15:33:55.683
> 
> 标签：vba, excel, excel-2010

我工作表上的每一行代表一次货币交易。每行的前 3 个单元格显示货币、日期和价格。之后的每 3 个单元格说明每个帐户在做什么。交易可以有任意数量的账户，因此行的长度不同。对于每笔交易（行），我希望每个账户都有自己独特的行，显示货币、日期、价格、买入/卖出、数量、账户。

```
**Example**

1          2       3    4   5    6    7    8    9  10  11   12  13
-------------------------------------------------------------------------------

EURUSD  1/1/13   1.30  Buy 100  acc1 Buy 1000 Acc2 Buy 100 acc3 Buy .....
EURUSD  2/1/13   1.31  Buy 1000 acc1 Buy 1000 Acc2 Buy 100 acc3 Buy .....
 .
 .
 .

**WOULD BECOME**

EURUSD  1/1/13   1.30 Buy 100  acc1
EURUSD  1/1/13   1.30 Buy 1000 Acc2
EURUSD  1/1/13   1.30 Buy 100  Acc3
.         .        .
.         .        .
.         .        .
EURUSD  2/1/13   1.31 Buy 1000 acc1
EURUSD  2/1/13   1.31 Buy 1000 acc2
EURUSD  2/1/13   1.31 Buy 100  acc3 
```

我已经编写了一些代码（如下），我希望用它来实现这一点，但我认为我在那里有一个无限循环。对于我从第 4 列开始的每一行，如果它是买入或卖出

我尝试了许多更改但同样的问题。我确定它正盯着我看，但我看不到我的错误。任何人都可以建议更正吗？顺便说一句，它不是最漂亮的代码，所以如果你有更好的解决方案，我会全力以赴。谢谢

```
Sub changeformat()

Dim p As Integer
Dim r As Integer
Dim c As Integer

p = 150
For r = 1 To 140
c = 4
Range("A" & r).Select

    Do While ActiveCell.Value = """"
         Do Until c = 303
                Cells(r, c).Select
                If InStr(ActiveCell.Value, "Buy") > 0 Or InStr(ActiveCell.Value,"Buy")  > 0 Then

                'The first 3 cells will of each new row will be the same as the first 3 cells
                'of current active 'original' row

                ActiveSheet.Cells(p, 1).Value = ActiveSheet.Cells(r, 1).Value
                ActiveSheet.Cells(p, 2).Value = ActiveSheet.Cells(r, 2).Value
                ActiveSheet.Cells(p, 3).Value = ActiveSheet.Cells(r, 3).Value

                'The active cell and the 2 cells that follow will be pasted to
                'columns D to F in row p

                ActiveSheet.Cells(p, 4).Value = ActiveSheet.Cells(r, c).Value
                ActiveSheet.Cells(p, 5).Value = ActiveSheet.Cells(r, c + 1).Value
                ActiveSheet.Cells(p, 6).Value = ActiveSheet.Cells(r, c + 2).Value

                p = p + 1
                c = c + 3
                End If

        Loop
    Loop
Next r

End Sub 
```

## 编辑

我做了以下更改，无限循环似乎已经停止。它现在几乎完成了它应该做的事情，但它正在省略数据。例如，我工作表上的第一行只有 9 个单元格（2 个帐户）。第二个有 33 个（10 个帐户）。这 2 行应转换为 12 个帐户的 12 个新行。不幸的是，它只是复制每行中的第一个帐户。它对前 11 行执行此操作，然后对第 12 行和第 13 行执行此操作。对可能发生的情况有什么建议吗？谢谢

```
p = 150
For r = 1 To 140

If Range("A" & r).Value <> "" Then

    'Do While Range("A" & r) <> """"
         For c = 4 To 303
                Cells(r, c).Select
                If ActiveCell.Value <> "" Then
                If InStr(ActiveCell.Value, "Buy") > 0 Or InStr(ActiveCell.Value, "Buy") > 0 Then

                'The first 3 cells will of each new row will be the same as the first 3 cells
                'of current active 'original' row

                ActiveSheet.Cells(p, 1).Value = ActiveSheet.Cells(r, 1).Value
                ActiveSheet.Cells(p, 2).Value = ActiveSheet.Cells(r, 2).Value
                ActiveSheet.Cells(p, 3).Value = ActiveSheet.Cells(r, 3).Value

                'The active cell and the 2 cells that follow will be pasted to
                'columns D to F in row p

                ActiveSheet.Cells(p, 4).Value = ActiveSheet.Cells(r, c).Value
                ActiveSheet.Cells(p, 5).Value = ActiveSheet.Cells(r, c + 1).Value
                ActiveSheet.Cells(p, 6).Value = ActiveSheet.Cells(r, c + 2).Value

                p = p + 1

                End If
                End If

        Next c
    'Loop
    End If
Next r 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:02:55.603

尝试从此更改循环条件

`Do While ActiveCell.Value = """"`

对此

`Do While ActiveCell.Value = "'' ''"`

....或者向自己证明发生了什么打开一个空白工作簿并打开即时窗口 (Ctl+G) 并运行它`ActiveCell.Value = """"`并查看它在单元格中放置的内容 - 可能不是您想要的。

在`VBA`其中两个`'`字符串中实际上等于其中一个`"`

所以也许你的条件`Do-Loop`永远不会满足。

* * *

**编辑**

...在您的数据示例中，我看不到这一点`""`？

* * *

**编辑2**

我注意到一个`IF`看起来不像是必需的。你知道如何单步执行宏吗？这无疑是找到像这样的复杂循环问题的最佳方法。

> 1.  将光标放在宏的顶部，就在该行的下方`Sub ...`
> 2.  按`F8`
> 3.  第一行现在应该突出显示
>     每次您现在按 F8 时都会执行一行代码，您将能够看到工作表上发生的情况，如果您将光标悬停在 IDE 中的任何变量上，它会告诉您你现在的价值是多少。
> 4.  做几个循环，问题可能对你来说很明显，因为你面前 的*实际工作表。*
> 5.  如果你想让它运行到最后按 F5 否则你可以中途停止它。

```
Dim p As Integer
Dim r As Integer
Dim c As Integer

p = 150
For r = 1 To 140

with Excel.Activesheet
If .Range("A" & r) <> "" Then '<<<<<<<.value is the defualt property so no need to include it in code

         For c = 4 To 303
                '.Cells(r, c).Select '<<<<best to aviod using select if you can
                'If .Cells(r, c).Value <> "" Then '<<<<<<<<MAYBE NOT NEEDED
                If InStr(.Cells(r, c), "Buy") > 0 Or InStr(.Cells(r, c), "Buy") > 0 Then  '<<<<<<<<<<<<<<<<<<< WHY ARE YOUR TWO CONDITIONS THE SAME?

                        'The first 3 cells will of each new row will be the same as the first 3 cells
                        'of current active 'original' row

                        .Cells(p, 1) = .Cells(r, 1)
                        .Cells(p, 2) = .Cells(r, 2)
                        .Cells(p, 3) = .Cells(r, 3)

                        'The active cell and the 2 cells that follow will be pasted to
                        'columns D to F in row p

                        .Cells(p, 4) = .Cells(r, c)
                        .Cells(p, 5) = .Cells(r, c + 1)
                        .Cells(p, 6) = .Cells(r, c + 2)

                        p = p + 1

                End If
                'End If
        Next c
    'Loop
    End If
Next r 
```

# xslt-1.0 - 使用 XSLT 1.0 提取两个特殊字符 ($) 之间的字符串

> ID：13881682
> 
> 赞同：0
> 
> 时间：2012-12-14T15:33:55.760
> 
> 标签：xslt-1.0

输入： `"abcdef$ghi$jklmno$pqrst$ wx $yx$"`

预期输出：

```
<tokens>
<token>$ghi$</token>
<token>$pqrst</token>
<token>$yx$</token>
</tokens> 
```

根据示例输入字符串，输出必须类似于使用 XSLT 1.0 的预期输出

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:06:30.663

希望下面的 xsl 对您有所帮助。有用。我自己试过了。

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" omit-xml-declaration="yes"/>

 <xsl:template match="/">

    <xsl:variable name="input">
        <xsl:text>abcdef$ghi$jklmno$pqrst$ wx$yx$</xsl:text>
    </xsl:variable>

    <tokens>    
        <xsl:text>&#10;</xsl:text>
        <xsl:analyze-string select="$input" regex="(\$[a-z]+\$)">
            <xsl:matching-substring>
                <token>
                <xsl:value-of select="regex-group(1)"/>
                </token>
                <xsl:text>&#10;</xsl:text>
            </xsl:matching-substring>
        </xsl:analyze-string>
    </tokens>

</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T19:43:01.330

对于每对美元符号 (1,2), (3,4), ... (2 × *n* - 1, 2 × *n* )，您需要一个标记元素，其文本介于美元符号编号 2 × *n* - 1 和美元符号数字 2 *n*。

两种情况之一必然适用。

*情况 1： n*有一些固定的最大值，并且它相对较小（例如，小于 5 或​​ 10）。在这种情况下，一个简单的`xs:variable`赋值序列加上适当的调用`substring-before`就`substring-after`足够了，你就完成了。你最终会得到这样的东西：

*   设*s0*是​​原始字符串，*s1是**s0*中第一个美元符号之后的子字符串， *t1是**s1*中第一个美元符号之前的子字符串，*r1是**s1*中第一个美元符号之后的子字符串。
***   现在让*s2*是*r1*中第一个美元符号之后的子字符串，*t2是**s2*中第一个美元符号之前的子字符串，*r2是**s2*中第一个美元符号之后的子字符串。***   根据需要重复：对于3 到*n中的**i*，设*s* *[i]*是*r* [*i*] [- 1]中第一个美元符号之后的子字符串，*t* *[i]**是s* *[i]*中第一个美元符号之前的子字符串，而*r* *[i]*是第一个美元之后的子字符串登录*s* *[i]*。****

 **情况 2：没有最大值*n*。在这种情况下，XSLT 1.0 中的直接方法是编写一个命名模板，它 (a) 删除第一个美元符号之前的子字符串，(b) 构造一个`token`包含美元符号的元素，即第一个美元符号之后和第二个美元之前的字符串符号，并且 (c) 在第二个美元符号之后使用子字符串递归调用自身。为空字符串、带有奇数个美元符号的字符串和其他输入错误添加适当的边界条件，您就完成了。

所以：阅读 XSLT 1.0 的字符串函数并解决您的问题。如果您遇到更多麻烦，请回来（并展示您的工作）。**

# php - 如何降低数据传输成本？Amazon S3 --> Cloudflare --> 访客

> ID：13881692
> 
> 赞同：12
> 
> 时间：2012-12-14T15:34:26.723
> 
> 标签：php, caching, amazon-s3, amazon, cloudflare

我最近开始使用 Amazon S3 为我的访问者提供图像，因为这将减少服务器负载。现在，有一个新问题：今天我查看了我的 AWS 账单。我注意到我有一笔巨额账单在等着我 - 20 天内总共有 4TB 的 AWS 数据传输。

显然，这是因为大量的传出 Amazon S3 流量（到 Cloudflare，然后将其提供给访问者）。现在我应该通过设置缓存标头来减少请求文件的数量（因为 Cloudflare 的 Crawler 会尊重这一点）。我已经像这样修改了我的代码：

```
$s3->putObjectFile($path, $bucket , 'images/'.$id.'.jpg', S3::ACL_PUBLIC_READ); 
```

到

```
$s3->putObjectFile($path, $bucket , 'images/'.$id.'.jpg', S3::ACL_PUBLIC_READ, array('Cache-Control' => 'public,max-age=31536000')); 
```

尽管如此，它还是行不通。Cloudflare 不尊重缓存，因为 Cache-Control 不会在标头中显示为“Cache-Control”，而是显示为“x-amz-meta-cachecontrol”。Cloudflare 忽略了这一点。

有没有人有一个简单的解决方案？

**TL;DR：**我和这个人有或多或少相同的问题：http: [//support.bucketexplorer.com/topic734.html](http://support.bucketexplorer.com/topic734.html)（那是在 2008 年）

**编辑：**我偶然发现了这一点：[Amazon S3 不缓存图像](https://stackoverflow.com/questions/7643295/amazon-s3-not-caching-images)，但不幸的是，该解决方案对我不起作用。

**编辑 2：**结果它不起作用，因为我使用的是旧版本的“Amazon S3 类”。我更新了，代码现在可以工作了。

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T12:05:12.413

如果您收到“x-amz-meta-cachecontrol”，则很可能您没有正确设置标头。这可能只是您在代码中执行此操作的确切方式。这*应该*有效。我推断这是使用 Amazon S3 PHP 类的 php？

试试这个：

```
$s3->putObject(file_get_contents($path), $bucket, $url, S3::ACL_PUBLIC_READ, array(), array('Cache-Control' => 'max-age=31536000, public')); 
```

在[S3 PHP 文档](http://undesigned.org.za/2007/10/22/amazon-s3-php-class/documentation) `putObjectFile`中列在 Legacy Methods 下：

```
putObjectFile (string $file, 
               string $bucket, 
               string $uri, 
               [constant $acl = S3::ACL_PRIVATE], 
               [array $metaHeaders = array()], 
               [string $contentType = null]) 
```

与此相比：

```
putObject (mixed $input, 
           string $bucket, 
           string $uri, 
           [constant $acl = S3::ACL_PRIVATE], 
           [array $metaHeaders = array()], 
           [array $requestHeaders = array()]) 
```

您需要将缓存控制设置为**请求**标头，但似乎无法使用 设置请求标头`putObjectFile`，只有元标头。您必须使用`putObject`并为元标头提供一个空数组，然后为它提供另一个带有请求标头的数组（包括缓存控制）。

您还可以尝试我在下面列出的其他一些工作示例。

也可以看看：

[如何使用 PHP 脚本](http://www.laurencegellert.com/2012/07/how-to-set-the-expires-and-cache-control-headers-for-all-objects-in-an-aws-s3-bucket-with-a-php-script/)(php)为 AWS S3 存储桶中的所有对象设置 Expires 和 Cache-Control 标头

[更新 Amazon S3 和 CloudFront](http://amix.dk/blog/post/19687) (python)的缓存标头

[自动为整个 S3 存储桶设置缓存控制（使用存储桶策略？）](https://stackoverflow.com/questions/10435334/set-cache-control-for-entire-s3-bucket-automatically-using-bucket-policies)

[http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectGET.html?r=5225](http://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectGET.html?r=5225)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-07T17:51:59.110

你现在可以。转到 s3 存储桶。打开文件并设置属性

[![AWS 控制台](../Images/529173823e2da06ef72289c51967e935.png)](https://i.stack.imgur.com/AT3DK.png)

# c - 不带参数和括号的调用函数

> ID：13881693
> 
> 赞同：6
> 
> 时间：2012-12-14T15:34:29.240
> 
> 标签：c

在下面的代码片段中，主函数调用 foo 函数，没有任何参数和括号。奇怪的是这段代码可以被gcc编译。我实际上检查了汇编代码，发现编译器只是忽略了这一行。所以我的问题是在什么情况下使用这种代码？或者 gcc 的支持只是一个巧合，实际上它完全没有用。

```
int foo(int a,int b)
{
    return a+b;
}
int main()
{
    foo;      // call foo without parameter and parenthesis
    return 0;
} 
```

objdump -d 转储的汇编代码

```
00000000004004c0 <main>:
  4004c0:   55                      push   %rbp
  4004c1:   48 89 e5                mov    %rsp,%rbp
  4004c4:   b8 00 00 00 00          mov    $0x0,%eax
  4004c9:   5d                      pop    %rbp
  4004ca:   c3                      retq   
  4004cb:   0f 1f 44 00 00          nopl   0x0(%rax,%rax,1) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T15:38:35.850

这与使用任何其他类型的表达式并忽略其值没有什么不同，例如：

```
int main(void)
{
  42;
  return 0;
} 
```

没有什么特别的，这*不是*调用函数，因为`()`没有使用函数调用运算符。你所做的只是“计算”函数的地址，然后忽略它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-14T15:38:23.283

计算表达式`foo`（给出函数的地址），结果被丢弃。如果没有`()`运算符，则不会调用该函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T15:36:24.380

`foo`没有被调用，它只是被引用（而不是分配给任何东西）。

# git - Git 错误：“在子模块中”

> ID：13881694
> 
> 赞同：2
> 
> 时间：2012-12-14T15:34:36.040
> 
> 标签：git, git-submodules, git-flow

我在我的网站上使用 gitflow，但是我使用 Git 下载了一个 3rd 方库，我无法将它添加到我的主存储库中。如果我尝试，我会收到以下消息：

致命：路径“文件名”在子模块“SUBMODULE_NAME”中

如果我跑步，`cat .git/config`我会得到：

```
[core]
    repositoryformatversion = 0
    filemode = true
    bare = false
    logallrefupdates = true
[gitflow "branch"]
    master = master
    develop = develop
[gitflow "prefix"]
    feature = feature/
    release = release/
    hotfix = hotfix/
    support = support/
    versiontag = 
[remote "origin"]
    url = git@github.xxxx/xxxx.git
    fetch = +refs/heads/*:refs/remotes/origin/*` 
```

如果我做`find . -name ".git*"`

./libs/3RD_PARTY_NAME/.git

./libs/3RD_PARTY_NAME/.gitignore

./.git

./.gitignore

git status 说：

```
# On branch develop
nothing to commit (working directory clean) 
```

如果您需要更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:18:29.107

要将第 3 方添加为子模块：

```
git submodule add git@mygithost:3RD_PARTY_NAME libs/3RD_PARTY_NAME 
```

很好地阅读子模块[http://chrisjean.com/2009/04/20/git-submodules-adding-using-removing-and-updating/](http://chrisjean.com/2009/04/20/git-submodules-adding-using-removing-and-updating/)

我通常会尽量避免使用子模块，它们在背后是一种痛苦。:)

# c# - 发生“System.OperationCanceledException”类型的异常

> ID：13881699
> 
> 赞同：4
> 
> 时间：2012-12-14T15:34:39.203
> 
> 标签：c#, exception, cancellation, parallel.foreach

我正在实现一个 Parallel.ForEach 循环来做一些工作，但是由于未处理的异常，我遇到了一个问题，而我认为我处理了取消。

为了解决这个问题，我在 winform 中做了一个简单的测试设置。它有一个开始按钮、一个取消按钮和一个输出标签。

编码：

```
public partial class Form1 : Form
{
    CancellationTokenSource cts = new CancellationTokenSource();

    public Form1()
    {
        InitializeComponent();
    }

    private async void button1_Click(object sender, EventArgs e)
    {
        output.Text = "Running";

        try
        {
            var runTask = Task<string>.Factory.StartNew(() => Run());
            await runTask;
            this.output.Text = runTask.Result;
        }
        catch(Exception ex)
        {
            throw ex;
        }
    }

    private string Run()
    {
        int useThreads = Environment.ProcessorCount - 2 < 1 ? 1 : Environment.ProcessorCount - 2;

        ParallelOptions options = new ParallelOptions() { MaxDegreeOfParallelism = useThreads, CancellationToken = cts.Token };

        options.CancellationToken.Register(() => ActionOnCancel());

        List<int> somelist =new List<int>();

        for(int i = 0; i < 100; i++)
            somelist.Add(i);

        Parallel.ForEach(somelist, options, (row, loopstate) =>
        {
            if(loopstate.ShouldExitCurrentIteration || loopstate.IsExceptional)
                loopstate.Stop();

            Thread.Sleep(1000);

        });

        return "Done";
    }

    private void ActionOnCancel()
    {
        output.Text= "Cancelled";
    }

    private void button2_Click(object sender, EventArgs e)
    {
        cts.Cancel();
    } 
```

当我运行程序并点击取消按钮（触发 button2_Click）时，我不断收到此错误：

> mscorlib.dll 中出现“System.OperationCanceledException”类型的异常，但未在用户代码中处理
> 
> 附加信息：操作已取消。
> 
> 如果有这个异常的处理程序，程序可以安全地继续。

调试器突出显示 Parallel.ForEach 部分。但为什么？？？我以为我通过 CancellationToken 正确处理了取消。

ex 中的异常消息并没有让我清楚：“{“操作被取消。”}”呃......是的......这就是意图......

我在看什么？问候，

马蒂斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T15:43:45.247

总是抛出这个异常。如果在 CancellationTokenSource 上调用了取消方法，则在访问并行任务时必须处理 OperationCanceledException。

```
try
{
    Parallel.ForEach(somelist, options, (row, loopstate) =>
    {
        if(loopstate.ShouldExitCurrentIteration || loopstate.IsExceptional)
            loopstate.Stop();

        Thread.Sleep(1000);

    });
}
catch (OperationCanceledException)
{
    // Handle the cancelled Task
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:41:29.050

CancellationToken.Register() 提供了一种向取消添加回调的方法，但不会“处理”它，就 OperationCanceledException 而言。

我建议您在 Run() 方法中也放置一个 try/catch 块。

# sql - 必须用 SELECT 语句声明标量变量

> ID：13881701
> 
> 赞同：2
> 
> 时间：2012-12-14T15:34:46.300
> 
> 标签：sql, sql-server, sql-server-2008

我有以下声明：

```
DECLARE @Nr_Karton int;

SELECT @Nr_Karton = ISNULL(MAX(Nr), 1000)  FROM W_Karton;

SET @Nr_Karton = @Nr_Karton + 1;

INSERT INTO W_Karton (Container_ID, Nr, Beschrieb, CreationDate, Location) 
  VALUES ('1', @Nr_Karton, '', getDate(), 'Bösingen'); 
```

但我得到了错误：

> [SQL] 从 W_Karton 中选择 @Nr_Karton = ISNULL(MAX(Nr), 1000)
> 
> [Err] 42000 - [SQL Server]必须声明标量变量“@Nr_Karton”。

如何摆脱错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T15:53:01.260

我做了一些玩这个。我创建的虚构架构是：

> CREATE TABLE W_Karton (Container_ID int, Nr int, Beschrieb varchar(1), CreationDate datetime, Location varchar(10))

**[虽然它在我的本地 2008R2 机器上解析并运行良好，但相同的代码在粘贴到SQL Fiddle](http://sqlfiddle.com/#!3/69234/12)**时不起作用。

但是，如果您按照此**[SQL Fiddle](http://sqlfiddle.com/#!3/69234/13)**删除除最后一个分号之外的所有分号，您会发现它似乎工作正常！

我相信它不应该有任何区别，但如果你宁愿它工作并且不关心为什么，试一试......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-12T03:28:45.407

我遇到了同样的问题。原来是因为';' 被选为“查询终结者”。在 SQL Fiddle 中，这实际上意味着“批处理终止符”。右下角应该有一个下拉按钮，其中包含文本“[;]”。单击它并选择“关键字[GO]”。

# php - codeigniter 空白 URI 段

> ID：13881707
> 
> 赞同：1
> 
> 时间：2012-12-14T15:35:18.450
> 
> 标签：php, codeigniter, uri

我有以下 URI：

```
 http://mysite/myapp/index.php/test/testURL/CAN-q1/300-48/fa1/59//can-a2 
```

您会注意到第 7 个 URI 段未设置。我需要测试这些类型的场景。
我尝试了一些不同的东西，但我似乎无法让它工作。发生的事情是第 8 段被分配为第 7 段。这是我今天早上一直在玩的一些测试代码：

```
 echo '3 - '. $this->uri->segment(3); 
    echo '<BR>';
    echo '4 - '. $this->uri->segment(4); 
    echo '5 - '. $this->uri->segment(5); 
    echo '<BR>';
    echo '6 - '.$this->uri->segment(6);
    echo '<BR>';
    $test = $this->uri->segment(7,0);   
    echo '7 is: '.$test;
    echo '<BR>';
    echo '8 - '. $this->uri->segment(8);
    echo '<BR>'; 
```

结果返回为：

```
 3 - CAN-q1
 4 - 300-48
 5 - fa1
 6 - 59
 7 is: can-a2
 8 - 
```

根据阅读 codeigniter 手册，我预计第 7 段将包含 0 或我作为 uri->segment() 方法中的第二个参数传递的任何内容。

你能告诉我哪里出错了吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:12:28.383

I just decided to pass a space instead of an empty URI, based on comments that others have made that you can't have a empty segment. This seems to have resolved the problem. Thanks to everyone who commented.

# version-control - 如何通知我的代码的所有分支重大更改？

> ID：13881712
> 
> 赞同：4
> 
> 时间：2012-12-14T15:35:40.440
> 
> 标签：version-control, github, git-fork

假设我有以下情况。很久以前，我在 Github 上发布了一些有用的代码，从那时起很多人 fork 了它。现在我在我的代码中发现了一些非常严重的错误（比如缓冲区溢出）并修复它，我意识到所有分支都应该更好地修复它，否则可能会发生 Bad Things™。

我如何通知所有分叉的所有者他们最好拉出这个关键的变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:29:40.313

# php - 按下提交按钮 php mysql 后重定向到另一个页面

> ID：13881720
> 
> 赞同：0
> 
> 时间：2012-12-14T15:36:11.937
> 
> 标签：php, mysql, linux, redirect

表单完成并按下提交按钮后，我将重定向到下一页。此代码在 Windows 服务器上运行良好，但无法重定向到 linux 服务器上的下一页

```
<?php
include 'scripts/functions/init.php';

Restrict();

?>
<?php

$userid = $_SESSION['userid'];
if (empty($_POST)=== false)
    {
        $R_fields = array('OFO_Code','OFO_Title','Curr_Code','Curr_Title');
        foreach($_POST as $key=>$value)
        {
            if (empty($value) && in_array($key,$R_fields)=== true)
                {
                    $errors[] = 'fields marked with (*) are required';
                    break 1;
                }
        }

        $_SESSION['Combo'] = $_SESSION['OFO_Code'].$_SESSION['Curr_Code'];      
        if(empty($errors)=== true)
            {
                if(Curr_Code_exists($_SESSION['Combo']))
                    {
                        $errors[] = 'Sorry, the Curriculum Code already exist, please use the edit function';
                    }
                if(strlen('Curr_Code')<6)
                    {
                        $errors[] ='Curriculum Code must be at least 6 Characters';
                    }

            }
    }

?> 
```

上面的代码出现在 html 之前，然后是表单。然后就在提交按钮之后遵循以下内容，它也位于内部

```
<?php
                    $_SESSION['OFO_Code'] = $_POST['OFO_Code'];
                    $_SESSION['Curr_Code'] = $_POST['Curr_Code'];

                    if(empty($_POST) === false && empty($errors)=== true)
                        {
                            //Capture data from the fields to an array
                            $Capture_Occupation_info = array(
                            'OFO_Code' => $_SESSION['OFO_Code'],
                            'OFO_Title'=>$_POST['OFO_Title'],
                            'Curr_Code'=>$_SESSION['Combo'],
                            'Curr_Title'=>$_POST['Curr_Title'],
                            'userid'=>$userid);

                            //Submit the data into the database
                            capture_occupation_info($Capture_Occupation_info);
                            header('Location:Capture_Menu.php');
                            exit();
                        }
                    else
                        {
                            //Display errors

                            echo output($errors);
                        }
              ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:44:07.560

这是在黑暗中的完整镜头，但可能是正确的。Windows 不区分大小写，但 NIX 是。

Capture_Menu.php

这正是它在您的 UNIX 机器上的资本化方式吗？

此外，在进行标头重定向之前，您不能向浏览器显示或回显。请检查回声，甚至在诸如 ?>

我之前的重定向不起作用，因为我的代码在输出中打印了一些我没有故意做的事情。

你可以试试这个...

```
error_reporting(E_ALL); 
ini_set('display_errors', 'On'); 
```

# ruby - 如何在 Ruby 中使用 Win32API 从 DLL 返回字符串

> ID：13881721
> 
> 赞同：3
> 
> 时间：2012-12-14T15:36:12.330
> 
> 标签：ruby, string, dll

目前我只能在 Ruby 中使用 win32api，所以没有 ffi 等。在 Ruby 中，我正在加载一个 DLL 并传递一个字符串，我希望返回相同的字符串。这是代码：

## 红宝石代码

```
string = "hello"
p = Win32API.new('C:/func/testFunc', 'Print', ['P'], 'S')
p.call(string) 
```

## 输出

```
=> 7476721 
```

## 动态链接库

```
extern (C)export char* Print(char* am)
{  
   return am;
} 
```

我得到的是数字而不是“你好”。我猜这是我刚刚传递给 dll 的值的地址。有人可以告诉我从 DLL 中检索字符串的正确方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:32:19.447

这*不是*我在红宝石方面的专长，但我发现这个问题很有趣。Win32API 采用和返回（通常）指针作为数据类型。这意味着您应该传递变量指针，DLL 将编辑指针。您可以根据需要对它们进行打包和解包（Win32API 规范很糟糕这一事实没有帮助）。这里有一些很好的例子：

[http://www.rubytips.org/2008/05/13/accessing-windows-api-from-ruby-using-win32api-library/](http://www.rubytips.org/2008/05/13/accessing-windows-api-from-ruby-using-win32api-library/)

我认为没有“S”的返回（导出）类型。唯一有效的选项是 n、l、i 和 p。在此处查看此文档：[http ://www.ruby-doc.org/docs/ProgrammingRuby/html/lib_windows.html](http://www.ruby-doc.org/docs/ProgrammingRuby/html/lib_windows.html)

# html - 圆形图像周围的文字

> ID：13881722
> 
> 赞同：-1
> 
> 时间：2012-12-14T15:36:14.967
> 
> 标签：html, css

我有一个圆形图像，我希望文字就在它周围。任何想法？

有关信息，这是我正在谈论的页面，我希望左侧的文本与图像的左侧相匹配。

[http://vincentandre.fr](http://vincentandre.fr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:28:32.350

我创建了一个 jsfiddle，展示了如何使用定位、z 索引和 BR 标记的混合使用非常冗长的方法来做到这一点。

[http://jsfiddle.net/wynGy/1/](http://jsfiddle.net/wynGy/1/)

```
<div class="container">
    <img src="http://vincentandre.fr/images/photo2.png" alt="" width="640">
    <div class="text">
        <p>Born in 1981 in the west end of France, in the town<br>
            of Plougastel Daoulas, near Brest. I spent my<br>
            childhood always playing out with my<br>
            friends, building and re-building stuffs, I<br>
            rapidly discovered a vivid interest for<br>
            the technology. I was fortunate<br>
            enough to be able to study as per<br>
            my interest.</p>

        <p>Twenty three years later, an<br>
            engineer degree from<br>
            ENSAM in my hands, I<br>
            started a career that drove<br>
            me further East, from<br>
            Paris, to Romania for<br>
            some business trips, then<br>
            China where the repeated<br>
            trips became a full time<br>
            expatriation in Shenzhen.<br>
            Having built my life and<br>
            family here, I am now<br>
            settled down in Hong-Kong.</p>

        <p>Besides my career, my<br>
            favorite hobby is to play the<br>
            photographer during the<br>
            week-end. My best shots are in<br>
            my gallery or on my Facebook<br>
            page.</p>

        <p>If you want to let me a small message,<br>
            feel free to do so.</p>
    </div>
</div>

.container {
    width:800px;
    background:#ccc;
    position:relative;
    overflow:hidden;
    min-height:640px;
}
.container img {
    position:absolute;
    right:0;
    top:0;
    z-index:1;
}
.container .text {
    position:relative;
    z-index:2;
}

p {
    margin:0 0 10px;
} 
```

# android - 从sqlite中删除不起作用

> ID：13881728
> 
> 赞同：1
> 
> 时间：2012-12-14T15:36:33.323
> 
> 标签：android, sqlite, android-sqlite

您好，我正在制作一个预算应用程序，允许您查看输入的经验，如果需要删除它们，我可以调用该方法运行它，它不会有问题，但是当我检查它是否有效时它没有我'已经尝试但无法弄清楚为什么这不起作用。我使用警告对话框来确认他们要删除。

```
AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                    this);

                // set title
                alertDialogBuilder.setTitle("DELETE "+position);

                // set dialog message
                alertDialogBuilder
                    .setMessage("Are you sure you whant to delete Expeance "+position)
                    .setCancelable(false)

                    .setPositiveButton("yes", new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                            String[]    po = position.split(" ");
                            String  date = po[0];
                            date = date +".tar.gz";
                            entry.open();
                            entry.deleteByDate(date);
                            entry.close();
                        recreate();
                        }

                    })
                    .setNegativeButton("No",new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,int id) {
                            // if this button is clicked, just close
                            // the dialog box and do nothing
                            dialog.cancel();
                        }
                    });

                    // create alert dialog
                    AlertDialog alertDialog = alertDialogBuilder.create();

                    // show it
                    alertDialog.show(); 
```

这是该方法的代码

```
public SQLiteDatabase deleteByDate(String date2) 
        {
            // TODO Auto-generated method stub

            ourDatabase.delete(DATABASE_TABLE2, KEY_DATE + " =?", new String[] { date2 });
            ourDatabase.delete(DATABASE_TABLE4, KEY_DATE + " =?", new String[] { date2 });
            return ourDatabase;

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:49:55.930

用于`Pattern.compile`将**“/”** 替换为**“-”**而不是`date.replace("/", "_")`：

```
 Pattern p = Pattern.compile("/");
    String  date = po[0];
    Matcher matcher = p.matcher(date);
    date = matcher.replaceAll("_");

    date = date +".tar.gz";
    //your code here.... 
```

# ruby-on-rails - Rails：我应该使用 STI 吗？

> ID：13881729
> 
> 赞同：0
> 
> 时间：2012-12-14T15:36:36.307
> 
> 标签：ruby-on-rails, ruby, oop, database-design, sti

我想介绍我的情况，并知道我是否应该使用[STI](http://en.wikipedia.org/wiki/Single_Table_Inheritance)解决方案。
我正在创建一个留言板网站，到目前为止，我有几个模型：用户、主题、帖子..
明确表示：帖子就像对主题的评论。主题有标题和内容。帖子只有内容。

现在，用户可以选择**喜欢/不喜欢**帖子或主题。我想了三个选择：

1.  主题和帖子没有联系（每个模型都有“num_of_likes”、“num_of_dislikes”）
2.  主题继承 Post。
3.  Topic 和 Post 继承自一个基本模型，例如可以称为 LikeableObj。

这三个选项中哪一个最适合我的需求？
有没有我没有想到的第四个选项？
如果我希望将来有第三个可以被**喜欢**的模型怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:06:45.627

我假设您想要跟踪用户是否喜欢某个帖子或主题，所以我会为喜欢创建一个连接模型，将用户连接到帖子或主题。

```
class Like < ActiveRecord::Base
  belongs_to :user
  belongs_to :liked_obj, polymorphic:true, counter_cache:true
end 
```

由于 like_obj 是多态的，它可以是帖子或主题。然后，您可以放置`has_many :likes`​​这些模型和列`likes_count`，它将作为计数器缓存自动更新。

如果您有任何代码处理 Post 和 Topic 之间常见的喜欢，请将其放在 a 中`module Likeable`并将其包含在两个类中。

# uinavigationcontroller - UINavigationCotroller backBarButtonItem 与其他目标不是自己

> ID：13881731
> 
> 赞同：1
> 
> 时间：2012-12-14T15:37:06.417
> 
> 标签：uinavigationcontroller, action, target, backbarbuttonitem

我正在尝试通过按导航控制器的 backBarButtonItem 来更改执行的操作。我知道我必须在下一个视图（应该出现自定义行为的按钮）被按下之前编辑 backBarButtonItem。所以在之前的 ViewController 中我添加了以下代码，通过 segue 推送：

```
#pragma mark - segue methods

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"SettingsToProfile"]) {
        MyProfileViewController* myprofileVC = [segue destinationViewController];
        myprofileVC.myProfile = myProfile;
        self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Settings_" style:UIBarButtonItemStylePlain target:myprofileVC action:@selector(popTOSettingsViewController:)];
    } else {
        self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Settings" style:UIBarButtonItemStylePlain target:nil action:nil];
    }
} 
```

标题“Settings_”正确显示，但“target: myprofileVC action:@selector(popTOSettingsViewController:)”似乎根本没有任何效果。

背景：

MyProfileViewController 是一个视图，用户可以在其中编辑他/她自己的信息。每当单击后退按钮时，我都想检查用户是否更改了 GUI 中的某些内容。如果是这种情况，UIAlterView 应该询问用户是否要保存更改。我试图用 viewWillDissappear 解决它，但 AlterView 显示在下一个 ViewController 中（如果我单击 alterViewButtons，程序会崩溃）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:00:05.437

我不确定您是否可以更改 a 的目标`backBarButtonItem`。换成怎么样`self.navigationItem.leftBarButtonItem`？self.navigationItem.backBarButtonItem有一个讨论[不起作用？为什么上一个菜单仍然显示为按钮？](https://stackoverflow.com/questions/4964276/self-navigationitem-backbarbuttonitem-not-working-why-is-the-previous-menu-st)这可能是相关的。

# java - Tomcat 等待加入 jgroups 集群

> ID：13881735
> 
> 赞同：3
> 
> 时间：2012-12-14T15:37:16.230
> 
> 标签：java, ehcache, jgroups

我使用 EHCache + JGroups 在 3 个 tomcat 实例上复制我的 webapps 缓存。

```
<!-- Use jgroups (UDP) to replicate cache among the cluster -->
    <cacheManagerPeerProviderFactory
        class="net.sf.ehcache.distribution.jgroups.JGroupsCacheManagerPeerProviderFactory"
properties="channelName=EH_CACHE_STA::connect=UDP(mcast_addr=229.10.10.10;mcast_port=45567;):PING:MERGE2:FD_SOCK:VERIFY_SUSPECT:pbcast.NAKACK:UNICAST:pbcast.STABLE:FRAG:pbcast.GMS"
        propertySeparator="::" /> 
```

有时，tomcat 实例不会重新启动。在 jgroups 日志中，我可以看到：

```
[webapp] WARN  2012-12-14 15:36:55,784 [GMS] : join(tc-fr-sta-tomcat1-32427) sent to b0dc40aa-12aa-4045-01e4-c80b013dbb13 timed out (after 5000 ms), retrying
[webapp] WARN  2012-12-14 15:36:55,785 [UDP] : tc-fr-sta-tomcat1-32427: no physical address for b0dc40aa-12aa-4045-01e4-c80b013dbb13, dropping message 
```

似乎节点试图加入自己？？？？我们必须重新启动生产中的所有 tomcat 才能恢复集群。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:03:36.573

这是与 (java -jar jgroups.jar) 一起运行的 JGroups 的哪个版本？我建议使用最新的稳定版本运行。另外，在 UDP 中设置 timer_type="old"。

此外，如果 ehcache 允许在 XML 文件中定义 JGroups 配置会更好，也许最新版本会这样做？（我不是 ehcache 专家）。干杯，贝拉

# mysql - 如何从 MySQL 数据库中删除变量？

> ID：13881737
> 
> 赞同：0
> 
> 时间：2012-12-14T15:37:17.167
> 
> 标签：mysql, delete-row

是否可以从数据库中删除某些非静态的“文本”？
对于静态文本，我只是将“静态文本”替换为“”。
实际上我只需要一个删除“static text1 * static text2”的命令，
所以从text1到text2的所有内容。
Text1 和 text2 是静态的，但是之间的一切都在变化。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:43:17.030

假设您要根据查找“静态文本1”的模式询问删除整行，然后是任何内容，然后是“静态文本2”，请尝试（替换`myTable`并`myRow`使用您的值）：

```
SELECT * FROM `myTable` WHERE `myRow` LIKE 'static text1%static text2'; 
```

如果这返回要删除的行，则可以运行 delete 命令：

```
DELETE FROM `myTable` WHERE `myRow` LIKE 'static text1%static text2'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:45:50.633

如果我理解正确，您希望`UPDATE`表格中的文本值删除介于`text1`and之间的任何文本`text2`，但保持实际行不变。

如果是这种情况，您可以使用`SUBSTRING()`和的组合`LOCATE()`来执行`UPDATE`：

```
UPDATE your_table SET
    field = 
        CONCAT(
            SUBSTRING(field, 1, LOCATE('text1', field) + 5),
            SUBSTRING(field, LOCATE('text2', field))
        )
WHERE
    field LIKE '%text1%text2%' 
```

这会将列的第一部分`field`直到文本“text1”（包括`text1`文本本身），然后从`field`列中获取第二个子字符串，用于文本*之后*（包括）的所有`text2`内容。

如果你想“改变”这两个值之间的文本，例如说你有`text1 some-value text2`并且你希望它成为`text1 new-thing text2`，你可以使用上面的查询并将新文本放在中间：

```
UPDATE your_table SET
    field = 
        CONCAT(
            SUBSTRING(field, 1, LOCATE('text1', field) + 5),
            ' new-thing ',
            SUBSTRING(field, LOCATE('text2', field))
        )
WHERE
    field LIKE '%text1%text2%' 
```

# liferay - Liferay - 尝试以编程方式创建 JournalArticle 时出错

> ID：13881738
> 
> 赞同：1
> 
> 时间：2012-12-14T15:37:18.910
> 
> 标签：liferay, portlet

我对liferay非常陌生，在学习期间，我每天都会面临各种问题，我面临并解决挑战！但是我正面临一个让我发疯的新问题，我想看看我是否可以在开发论坛上获得一些帮助或指导，所以这是我的问题：

我正在尝试以编程方式创建一个新的 JournalArticle，我有一个默认的 JournalArticle，我可以在其中获得大部分我需要的东西，所以我会复制它，然后我会更改一些 JournalArticle 属性。我正在使用 JournalArticleServiceUtil 中的 addArticle 方法，所以 JournalArticleServiceUtil.addArticle(..... 我正确填写了所有参数（我希望如此），但我收到与 Locale 相关的错误（com.liferay.portal.LocaleException），区域设置仅在标题和描述中的地图上使用，我可以在方法摘要（地图标题地图，地图描述地图.....）上看到，我想我有一个有效的地图，但它不工作并且错误消息 iI receive is -> null.... StackTrace 也不是很有用。

**这是我的代码示例：**

```
final JournalArticle article = JournalArticleServiceUtil.getArticle(groupId, defaultArticleId);
        ServiceContext serviceContext = ServiceContextFactory.getInstance(JournalArticle.class.getName(), actionRequest);

        Calendar now = Calendar.getInstance();

        try
        {
            String[] titleMapLanguageIds = {"en_US"}, titleMapValues = {"Title in US"};
            String[] descriptionMapLanguageIds = {"en_US"}, descriptionMapValues = {"Description in US"};

            Map<Locale, String> titleMap = LocalizationUtil.getLocalizationMap(titleMapLanguageIds, titleMapValues);
            Map<Locale, String> descriptionMap = LocalizationUtil.getLocalizationMap(descriptionMapLanguageIds, descriptionMapValues);

            final JournalArticle newArticle = JournalArticleServiceUtil.addArticle(
                    article.getGroupId(),
                    article.getClassNameId(), 
                    article.getClassPK(), 
                    "", true,
                    titleMap, 
                    descriptionMap, 
                    article.getContent(),
                    article.getType(), 
                    article.getStructureId(), 
                    article.getTemplateId(), 
                    article.getLayoutUuid(),
                    now.get(Calendar.MONTH), now.get(Calendar.DAY_OF_MONTH), now.get(Calendar.YEAR), now.get(Calendar.HOUR_OF_DAY), now.get(Calendar.MINUTE), 
                    0, 0, 0, 0, 0, true,
                    now.get(Calendar.MONTH), now.get(Calendar.DAY_OF_MONTH), now.get(Calendar.YEAR),now.get(Calendar.HOUR_OF_DAY), now.get(Calendar.MINUTE),
                    true, true, 
                    article.getSmallImage(), 
                    article.getSmallImageURL(), 
                    null, 
                    new HashMap<String, byte[]>(), 
                    article.getUrlTitle(), 
                    serviceContext); 
```

**这是stackTrace的相关部分（我认为）：**

com.liferay.portal.LocaleException 。. . 在 com.liferay.portlet.journal.service.JournalArticleServiceUtil.addArticle(JournalArticleServiceUtil.java:78)

**这是完整的堆栈跟踪：**

```
com.liferay.portal.LocaleException
at com.liferay.portlet.journal.service.impl.JournalArticleLocalServiceImpl.validate(JournalArticleLocalServiceImpl.java:3445)
at com.liferay.portlet.journal.service.impl.JournalArticleLocalServiceImpl.validate(JournalArticleLocalServiceImpl.java:3549)
at com.liferay.portlet.journal.service.impl.JournalArticleLocalServiceImpl.addArticle(JournalArticleLocalServiceImpl.java:192)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:122)
at com.liferay.portal.spring.transaction.TransactionInterceptor.invoke(TransactionInterceptor.java:71)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.security.pacl.PACLAdvice.invoke(PACLAdvice.java:51)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ServiceBeanAopProxy.invoke(ServiceBeanAopProxy.java:211)
at $Proxy205.addArticle(Unknown Source)
at com.liferay.portlet.journal.service.impl.JournalArticleServiceImpl.addArticle(JournalArticleServiceImpl.java:61)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:122)
at com.liferay.portal.spring.transaction.TransactionInterceptor.invoke(TransactionInterceptor.java:71)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.security.pacl.PACLAdvice.invoke(PACLAdvice.java:51)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ServiceBeanAopProxy.invoke(ServiceBeanAopProxy.java:211)
at $Proxy206.addArticle(Unknown Source)
at com.liferay.portlet.journal.service.JournalArticleServiceUtil.addArticle(JournalArticleServiceUtil.java:78)
at com.esa.action.partner.CreatePartnerAction.createPartner(CreatePartnerAction.java:102)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.liferay.portal.kernel.portlet.LiferayPortlet.callActionMethod(LiferayPortlet.java:153)
at com.liferay.util.bridges.mvc.MVCPortlet.callActionMethod(MVCPortlet.java:250)
at com.liferay.portal.kernel.portlet.LiferayPortlet.processAction(LiferayPortlet.java:80)
at com.liferay.util.bridges.mvc.MVCPortlet.processAction(MVCPortlet.java:220)
at com.esa.action.partner.CreatePartnerAction.processAction(CreatePartnerAction.java:76)
at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:70)
at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:48)
at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:111)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:534)
at com.liferay.portlet.InvokerPortletImpl.invokeAction(InvokerPortletImpl.java:579)
at com.liferay.portlet.InvokerPortletImpl.processAction(InvokerPortletImpl.java:294)
at com.liferay.portal.action.LayoutAction.processPortletRequest(LayoutAction.java:944)
at com.liferay.portal.action.LayoutAction.processLayout(LayoutAction.java:688)
at com.liferay.portal.action.LayoutAction.execute(LayoutAction.java:249)
at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
at com.liferay.portal.struts.PortalRequestProcessor.process(PortalRequestProcessor.java:176)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at com.liferay.portal.servlet.MainServlet.callParentService(MainServlet.java:560)
at com.liferay.portal.servlet.MainServlet.service(MainServlet.java:537)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:294)
at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
at com.liferay.portal.servlet.FriendlyURLServlet.service(FriendlyURLServlet.java:138)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
at com.liferay.portal.servlet.filters.strip.StripFilter.processFilter(StripFilter.java:335)
at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
at com.liferay.portal.servlet.filters.gzip.GZipFilter.processFilter(GZipFilter.java:123)
at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:294)
at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
at com.liferay.portal.servlet.filters.i18n.I18nFilter.processFilter(I18nFilter.java:241)
at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:246)
at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
at com.liferay.portal.servlet.filters.sso.ntlm.NtlmPostFilter.processFilter(NtlmPostFilter.java:83)
at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
at com.liferay.portal.sharepoint.SharepointFilter.processFilter(SharepointFilter.java:80)
at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:163)
at com.liferay.portal.servlet.filters.virtualhost.VirtualHostFilter.processFilter(VirtualHostFilter.java:216)
at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:57)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:187)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:95)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:738)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:206)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:108)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:167)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:95)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:167)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:95)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:116)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:187)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:95)
at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:619) 
```

任何人都可以在这里帮助我吗？或者指出我正确的方向？

如果我能提供更多信息来帮助解决这个问题，请告诉我。

非常感谢， Cipriano

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:49:06.910

快速浏览代码表明它是由`JournalArticle`内容引起的。

文章内容的默认语言环境不是“可用语言环境”。检查您的门户设置`portal.properties`或`portal-ext.properties`密钥`locales`以确保列出文章的默认语言环境。

# php - 为什么不显示提交和重置按钮？

> ID：13881740
> 
> 赞同：0
> 
> 时间：2012-12-14T15:37:29.753
> 
> 标签：php, html

我做了一个表格。为什么不显示提交 ( *enviar* ) 和重置 ( *restablecer* ) 按钮？如果我删除 PHP 代码，它们会出现。为什么？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Documento sin título</title>
</head>

<body>
      <div> 
<form action="" id="noti-form"method="post" enctype="multipart/form-data" name="noticia">

Antetítulo de la Noticia<br />
      <input type="text" name="ante" size="70" id="ante" class="inputbox" />
      <br />

Título de la Noticia<br />
      <input type="text" name="titulo" size="70" id="titulo" class="inputbox" />
      <br />

Subtítulo de la Noticia<br />
      <input type="text" name="sub" size="70" id="sub" class="inputbox" />
      <br />

Autor:<br />
      <input type="text" name="autor" size="30" id="autor" class="inputbox" />
      <br />
      Texto de la Noticia<br />

        <div align="center">
            <textarea id="elm1" name="noticia" class=".noticia" rows="15" cols="80" style="width: 80%"></textarea></div>
      <br />

        <input type="file" name="foto" id="foto" />
     <br />
<?php
    echo '<select class="chosen" name="tags[ ]"  multiple="true" style="width:400px;">';

    $query=$database->tags();
    foreach ($query as $data)   {   
        echo  '<option  value="'.$data['tag'].'">'.$data['tag'].'</option>';
    }
    echo'</select>';
?>

    <input type="submit" name="enviar" value="Enviar" class="button" />   
    <input type="reset" name="button" id="button" value="Restablecer" class="button" />
</form>
</div>
</body>
</html> 
```

# java - Java 全新根节点

> ID：13881742
> 
> 赞同：0
> 
> 时间：2012-12-14T15:37:46.990
> 
> 标签：java, tree, instance, treenode

我创建了一个节点类和一个树类。从 main 中，我调用 suffixTree t = new suffixTree(string); 它在一个while循环中，所以它总是变量t。

问题是，我想读取一个输入文件并为每个字符串创建一个新树。显然，它不会创建新实例。

变量“t”在每次交互中都是相同的，但每次创建它时它都应该是一个新实例。树构造函数，有一个 Node root = new Node();

这是一个复制的代码，我唯一做的就是从输入中读取并遍历树。

问题是，如果我输入 mississippi$ 然后 acacdcacd$ 它会添加到同一棵树并在我遍历它时给出错误的结果。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:58:36.117

您正在创建新实例，但在创建后立即丢弃它们，因为它们没有存储在任何地方，因此它们无法访问并标记为已准备好进行垃圾收集。

看看以下内容：

```
// this is where the SuffixTree instances will end up
List<SuffixTree> suffixes = new ArrayList<SuffixTree>();

String[] strings = new String[3];
for (String string : strings) {
    // A new suffix tree is created here but if you don't do anything
    // with it then it is marked as garbage collectable when the closed
    // curly brace is reached
    SuffixTree t = new SuffixTree(string);

    // Now I'm pushing the object into the suffixes list: this will prevent
    // the loss of the object currently stored in the t variable
    suffixes.add(t);
} 
```

# ruby-on-rails - 验证后清除或重置设计注册错误消息

> ID：13881745
> 
> 赞同：0
> 
> 时间：2012-12-14T15:38:00.137
> 
> 标签：ruby-on-rails, devise

我对使用设计注册的错误消息有疑问。在我的自定义设计控制器中，我有 create 方法，我将在验证失败时返回资源。由于某种原因，resource.errors 在呈现注册页面时被清除。有没有人遇到过这个问题？我正在使用 dm-devise 2.1.0

如果有帮助，这是我的代码：

```
class UserDevise::RegistrationsController < Devise::RegistrationsController  
  def create
    begin
      build_resource
      ....    
    rescue DataMapper::SaveFailureError => e
      resource = e.resource
      clean_up_passwords(resource)  
      respond_with resource
    end    
  end
end 
```

编辑：这是所要求的 clean_up_passwords 的代码（它们由设计定义）：

```
def clean_up_passwords(object)
  object.clean_up_passwords if object.respond_to?(:clean_up_passwords)
end

def clean_up_passwords
  self.password = self.password_confirmation = nil
end 
```

EDIT2：这是注册页面的查看代码：

```
<div class="account-container">
<div class="content clearfix">
  <%= simple_form_for resource, :html => {:class => 'form-vertical'}, :url => registration_path(resource_name) do |f| %>
  <h1>Create Account</h1>
  <div class="login-fields">
     <p>Please provide the following info:</p>
     <%= f.input :name, :placeholder => "Full Name", :input_html=>{:class => "login username-field"} %>
     <%= f.input :email, :placeholder => "Email Address", :input_html=>{:class => "login username-field"} %>
     <%= f.input :password, :placeholder => "Password", :input_html=>{:class => "login password-field"} %>
     <%= f.input :password_confirmation, :placeholder => "Password Confirmation", :input_html=>{:class => "login password-field"} %>
  </div>    
  <div class="login-actions">
     <%= f.button :submit, "Sign Up", :class => 'button btn  btn-warning btn-large' %>
  </div>
  <% end %>
</div>
</div> 
```

# javascript - d3：为什么这个函数不删除元素？

> ID：13881749
> 
> 赞同：1
> 
> 时间：2012-12-14T15:38:30.937
> 
> 标签：javascript, coffeescript, d3.js

在 d3 中工作，我有一个正确绘制条形图的函数调用，但它没有正确更新它。这是我的代码的重要部分：

```
 # Drawing Elements
  @svg = d3.select(@s).append('svg').attr('width',@w).attr('height',@h)
  @rects = @svg.selectAll('rect')
  @labels = @svg.selectAll('text')

  drawRects: (data) ->
    rects = @rects.data(data)
    rects.enter().append('rect')
    rects.exit().remove()
    rects.attr('x', (d,i) => this.xScale(i) )
      .attr('y', (d) => @h - this.yScale(d) )
      .attr('width', @w / @data.length - @pad)
      .attr('height', (d) => this.yScale(d) )
      .attr('fill','#FFC05C')

  drawLabels: (data) ->
    labels = @labels.data(data)
    labels.enter().append('text')
    labels.exit().remove()
    labels.text( (d) -> d )
      .attr('text-anchor','middle')
      .attr('x', (d,i) => this.xScale(i) + ((@w / @data.length - @pad)/2) )
      .attr('y', (d) => @h - this.yScale(d) + 15 )
      .attr('fill','white')

  update: (data) ->
    this.drawRects(data)
    this.drawLabels(data) 
```

当我最初设置图表时，我创建了一些数据（在本例中为 20 个数字的数组）并调用绘图方法：

```
data = [1..20]
this.drawRects(data)
this.drawLabels(data) 
```

图表绘制正确。

但是，如果第二次调用这些方法来更新数据，新数据会放在 DOM 中，但旧数据也会被留下，所以它只是制作了一组全新的元素。

我在这里做错了什么，`.exit()`无法删除旧的 DOM 元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:59:42.513

您需要重新选择`rect`和`text`元素并为其分配新数据：

```
drawRects: (data) ->
    rects = @svg.selectAll('rect').data(data)
    #...

drawLabels: (data) ->
    labels = @svg.selectAll('text').data(data)
    #... 
```

在您的代码中，您始终将新数据分配给旧（空）`@rect`和（空）`@labels`集合。对于这些空集合，数据将被视为“输入”，因此将创建新元素并且不会删除任何内容。

# java - 基于多个输入使用 hamcrest 和 lambdaj 比较对象

> ID：13881755
> 
> 赞同：2
> 
> 时间：2012-12-14T15:38:53.490
> 
> 标签：java, arrays, search, hamcrest, lambdaj

我正在尝试过滤数组列表以删除与用户输入的一组标准不匹配的对象。该对象有 3 个列表。例如，请参见下文。

```
public class A {
    public String [] a={"a", "b", "c"};
    public String [] c={"a", "b", "c"};
    public String [] d={"a", "b", "c"};
} 
```

我正在尝试编写一种搜索此对象的方法，以查看它是否与输入到搜索对话框中的数据匹配。例如，我想要在数组 a 中具有“a”、在数组 b 中具有“c”和在数组 c 中具有 * 的所有对象。

```
 for(int i = 0; i < products.length; i++)
    {
        reactionData = select(reactionData, having(on(A.class).a,Every.everyItem(containsString(products[i]))));
    } 
```

我想为我搜索的每个数组做这样的事情，但它似乎效率低下。更不用说在每次搜索时都会替换 reactData 数组。

如果有人可以帮助我解决这个问题，或者可能指向一些有用的站点来解释如何将 hamcrest 与 lambdaj 一起使用，那将是理想的。

*编辑*

```
output = filter(having(on(Reaction.class).getChemicalProducts(), hasItems(products)), reactionData); 
```

上述匹配器必须匹配产品中的每个项目。我正在寻找它来匹配产品中的任何项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:50:55.113

以下行将保留列表中至少包含一种化学产品的所有实例`products`：

```
output = filter(having(on(Reaction.class).getChemicalProducts(), hasItem(isIn(products))), reactionData); 
```

# c - 如何从 C 中的文本文件中的字符串创建单独的实体？

> ID：13881756
> 
> 赞同：-1
> 
> 时间：2012-12-14T15:38:58.793
> 
> 标签：c, arrays, string

我正在寻找一个相当简单的问题的解决方案：

1.  有一个文本文件，其中包含以 '\n' 分隔的单词\字符串每个新字符串在 '\n' 之后开始
2.  需要从文件中取出每个字符串并从中创建一个单独的实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:11:55.267

是的，这个任务听起来很简单，除了从字符串 (???) 中“创建 [ing] 一个单独的实体”这个模糊的想法。

如果我要实现这样的程序，我会使用以下通用算法：

```
#include <stdio.h>
#define LEN 0xFF
int main(int argc, char ** argv) {
  char line[LEN];
  FILE * input_file = NULL;
  if ((input_file=fopen("myinputfile.txt","r")) == NULL) {
    // Handle error when opening the file...
  }
  while (fgets(line, LEN, input_file) != NULL) {
    // Process each line of input...
  }
  fclose(input_file);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:14:31.297

根据您给出的模糊描述，您可以做的是使用数组（缓冲区），并结合 fopen、循环和 sscanf，您可以匹配文件的结果并将它们放入单独的元素中数组。然后您可以访问结果。您可能需要跟踪一些索引。

还有很多其他方法可以做到这一点，但肯定需要更多信息。

# vb.net - 如何从 vb.net 应用程序中备份和恢复数据

> ID：13881758
> 
> 赞同：-2
> 
> 时间：2012-12-14T15:39:01.043
> 
> 标签：vb.net, sql-server-2008

我正在 vb.net 中开发一个用于学生详细信息管理的桌面应用程序。

在那我想添加备份和恢复数据的功能。通过使用此功能，用户应该能够进行数据备份，并且当他需要时，他应该能够再次恢复数据（如果发生系统崩溃），因此数据不会丢失。

如何使用 vb.net 代码做到这一点，我使用的是 VS2008。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:11:23.873

您可以像通过 vb.net 执行任何其他命令一样执行 BACKUP 和 RESTORE 命令，所以这样的事情可以做到......

```
Dim sqlConn As New SqlConnection("Data Source=(local);Initial Catalog=master;User ID=sa;Trusted_Connection=true")

sqlConn.Open()

Dim sCommand = "BACKUP DATABASE [YourDatabaseName] TO DISK = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\Backup\Backup.bak' WITH COPY_ONLY"

Using sqlCmd As New SqlCommand(sCommand, sqlConn)
    sqlCmd.ExecuteNonQuery()
End Using 
```

显然，您的数据库名称将替换 [YourDatabaseName]。等效的 RESTORE 命令将是这样的......

```
sCommand = "RESTORE DATABASE [YourDatabaseName] FROM DISK = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\Backup\TestBackup.bak' WITH REPLACE"

Using sqlCmd As New SqlCommand(sCommand, sqlConn)
    sqlCmd.ExecuteNonQuery()
End Using 
```

您需要查看这些命令的文档，以根据您的特定场景定制它们。

# plone - 以管理员身份登录时，在 Plone 中出现未经授权的错误

> ID：13881759
> 
> 赞同：0
> 
> 时间：2012-12-14T15:39:10.743
> 
> 标签：plone

访问`/image`Image 对象的视图时出现错误。奇怪的是我以管理员身份登录，并且错误日志显示“匿名用户（无）”作为尝试访问图像的用户。

这怎么可能？在这种情况下，我应该寻找什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:59:52.223

我认为如果错误日志将“admin”显示为用户会更奇怪。它显示“匿名”的事实证明它在某些时候无法找到您的凭据，因为您希望管理员永远不会出现未经授权的错误。

这是股票克隆图像类型吗？我经常看到这种错误隐藏了我自己的自定义代码中的编程错误。

# jquery - 带有警报框的jQuery问题

> ID：13881763
> 
> 赞同：0
> 
> 时间：2012-12-14T15:39:20.030
> 
> 标签：jquery

以下内容没有按预期工作，当您单击“.arrow-_down_img”时，它没有收到警报消息

```
 function slideDown_Menu(){
                    $('.main_nav').slideDown('slow', function(){
                        $('.arrow_down_img').removeClass('arrow_down_img').addClass('arrow_up_img');
                    });
        }

        function slideUp_Menu(){
                    $('.main_nav').slideUp('slow', function(){
                        $('.arrow_up_img').removeClass('arrow_up_img').addClass('arrow_down_img');
                    });
        }

        $('.arrow_down_img').click(function(){
            // evt.preventDefault();
            // slideDown_Menu();
            alert('test');

        });

        $('.arrow_up_img').click(function(evt){
            evt.preventDefault();
            slideUp_Menu();
        }); 
```

HTML

```
 <div class="arrow_up">
            <div class="arrow_up_img"></div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:41:50.920

由于 DOMReady 上没有类的元素`.arrow_down_img`，您应该从元素或文档对象的静态父对象之一委托事件。

```
$(document).on('click', '.arrow_down_img', function(evt){
    // evt.preventDefault();
    // slideDown_Menu();
    alert('test');
}); 
```

另请注意，在您的点击处理程序`evt`中未定义。

# asp.net-mvc-3 - 有没有办法使 ASP.NET MVC 3 ActionCache 失效

> ID：13881767
> 
> 赞同：1
> 
> 时间：2012-12-14T15:39:34.037
> 
> 标签：asp.net-mvc-3, razor, mvc-editor-templates, asp.net-mvc-views

我有一个 ASP.NET MVC 3 应用程序，它使用自定义属性为模型属性创建选择控件，这些属性可以在运行时从外部数据源填充。问题是我的`EditorTemplate`输出似乎在应用程序级别缓存，因此当它们的数据源更改时，我的下拉列表不会更新，直到应用程序池被回收。

我还输出了`ActionCache`绑定到`ViewContext.HttpContext`对象的 MVC 3 的内容，如 System.Web.Mvc.Html.TemplateHelpers.cs:95 中的 MVC 3 源代码所示。

*   动作缓存 GUID: `adf284af-01f1-46c8-ba15-ca2387aaa8c4`:
*   动作缓存集合类型：`System.Collections.Generic.Dictionary``2[System.String,System.Web.Mvc.Html.TemplateHelpers+ActionCacheItem]`
*   动作缓存字典键：`EditorTemplates/Select`

所以看起来`Select`编辑器模板肯定被缓存了，这将导致该`TemplateHelper.ExecuteTemplate`方法总是返回缓存的值，而不是`ViewEngineResult.View.Render`第二次调用。

**有没有办法清除 MVC ActionCache 或以其他方式强制 Razor 视图引擎始终重新渲染某些模板？**

作为参考，以下是相关的框架组件：

```
public interface ISelectProvider
{
    IEnumerable<SelectListItem> GetSelectList();
}

public class SelectAttribute : Attribute, IMetadataAware
{
    private readonly ISelectProvider _provider;

    public SelectAttribute(Type type)
    {
        _provider = DependencyResolver.Current.GetService(type) as ISelectProvider;
    }

    public void OnMetadataCreated(ModelMetadata modelMetadata)
    {
        modelMetadata.TemplateHint = "Select";
        modelMetadata.AdditionalValues.Add("SelectListItems", SelectList);
    }

    public IEnumerable<SelectListItem> SelectList
    {
        get
        {
            return  _provider.GetSelectList();
        }
    }       
} 
```

接下来，在`~\Views\Shared\EditorTemplates\Select.cshtml`.

```
@model object
@{
    var selectList = (IEnumerable<SelectListItem>)ViewData.ModelMetadata.AdditionalValues["SelectListItems"];
    foreach (var item in selectList) 
    {
        item.Selected = (item != null && Model != null && item.Value.ToString() == Model.ToString());
    }
}
@Html.DropDownListFor(s => s, selectList) 
```

最后，我有一个视图模型、选择提供程序类和一个简单视图。

```
/** Providers/MySelectProvider.cs **/
public class MySelectProvider : ISelectProvider
{
    public IEnumerable<SelectListItem> GetSelectList()
    {
        foreach (var item in System.IO.File.ReadAllLines(@"C:\Test.txt"))
        {
            yield return new SelectListItem() { Text = item, Value = item };
        } 
    }
}

/** Models/ViewModel.cs **/
public class ViewModel
{
    [Select(typeof(MySelectProvider))]
    public string MyProperty { get; set; }
}

/** Views/Controller/MyView.cshtml **/
@model ViewModel
@using (Html.BeginForm())
{
    @Html.EditorForModel()
    <input type="submit" value="Submit" />
} 
```

****编辑****

根据评论中的建议，我开始更仔细地研究`ObjectContext`生命周期。虽然存在一些小问题，但该问题似乎与实现中的 LINQ 表达式中涉及回调的奇怪行为有关`SelectProvider`。

这是相关的代码。

```
public abstract class SelectProvider<R, T> : ISelectProvider
  where R : class, IQueryableRepository<T>
{
    protected readonly R repository;

    public SelectProvider(R repository)
    {
        this.repository = repository;
    }

    public virtual IEnumerable<SelectListItem> GetSelectList(Func<T, SelectListItem> func, Func<T, bool> predicate)
    {
        var ret = new List<SelectListItem>();
        foreach (T entity in repository.Table.Where(predicate).ToList())
        {
            ret.Add(func(entity));
        }

        return ret;
    }

    public abstract IEnumerable<SelectListItem> GetSelectList();
}

public class PrinterSelectProvider : SelectProvider<IMyRepository, MyEntityItem>
{
    public PrinterSelectProvider()
        : base(DependencyResolver.Current.GetService<IMyRepository>())
    {
    }

    public override IEnumerable<SelectListItem> GetSelectList()
    {
        // Create a sorted list of items (this returns stale data)
        var allItems = GetSelectList(
            x => new SelectListItem()
            {
                Text = x.DisplayName,
                Value = x.Id.ToString()
            },
            x => x.Enabled
        ).OrderBy(x => x.Text);

        // Do the same query, but without the callback
        var otherItems = repository.Table.Where(x => x.Enabled).ToList().Select(x => new SelectListItem()
            {
                Text = x.DisplayName,
                Value = x.Id.ToString()
            }).OrderBy(x => x.Text);

        System.Diagnostics.Trace.WriteLine(string.Format("Query 1: {0} items", allItems.Count()));
        System.Diagnostics.Trace.WriteLine(string.Format("Query 2: {0} items", otherItems.Count()));

        return allItems;
    }
} 
```

并且，从捕获的输出`System.Diagnostics.Trace`是

```
Query 1: 2 items
Query 2: 3 items 
```

我不确定这里可能出了什么问题。我认为`Select`可能需要一个`Expressions`，但我只是仔细检查了，LINQ`Select`方法只接受`Func`对象。

有什么额外的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T12:55:26.283

问题解决了！

我终于有机会重新审视这个问题。根本原因与`LINQ`、 the`ActionCache`或 the无关`ObjectContext`，而是与[何时调用属性构造函数](https://stackoverflow.com/questions/1168535/when-is-a-custom-attributes-constructor-run)有关。

如图所示，我的自定义`SelectAttribute`类在其构造函数中调用`DependencyResolver.Current.GetService`以创建`ISelectProvider`该类的实例。但是，ASP.NET MVC 框架会扫描一次程序集以查找自定义元数据属性，并在应用程序范围内保留对它们的引用。如链接问题中所述，访问 a`Attribute`会触发其构造函数。

因此，构造函数只运行一次，而不是[像我假设的那样](https://softwareengineering.stackexchange.com/questions/91350/what-should-every-programmer-know/91486#91486)在每个请求上运行。这意味着实际上只有一个被实例化的`PrinterSelectProvider`类的缓存实例在所有请求之间共享。

`SelectAttribute`我通过改变这样的类解决了这个问题：

```
public class SelectAttribute : Attribute, IMetadataAware
{
    private readonly Type type;

    public SelectAttribute(Type type)
    {
        this.type = type;
    }

    public void OnMetadataCreated(ModelMetadata metadata)
    {
        // Instantiate the select provider on-demand
        ISelectProvider provider = DependencyResolver.Current.GetService(type) as ISelectProvider;

        modelMetadata.TemplateHint = "Select";
        modelMetadata.AdditionalValues.Add("SelectListItems", provider.GetSelectList());
    }
} 
```

确实是棘手的问题！

# node.js - Nodejs + phantomjs 与纯 phantomjs - 页面加载时间

> ID：13881770
> 
> 赞同：6
> 
> 时间：2012-12-14T15:39:40.453
> 
> 标签：node.js, phantomjs, pageload, performance

我最近在探索 nodejs 和 phantomjs 并编写了一个小代码来测量页面加载时间。我发现，与纯 phantomjs 代码相比，包裹在 nodejs 中的 phantomjs 代码的页面加载时间不同。下面是代码：phantomjs和nodejs进行比较：

节点：

```
var http = require('http'),
phantom = require('phantom');
url = require("url");

http.createServer(function (request, response) {
  var start = Date.now();

  request.on('end', function () {
    phantom.create(function(ph) {
      ph.createPage(function(page) {
        var _get = url.parse(request.url, true).query;

        page.open(_get[url], function(status) {
          if (status == 'success') {
            var time = Date.now() - start;
            console.log(time);
          }
        });
      });
    });
  });
}).listen(80,''); 
```

幻影：

```
var page = require('webpage').create();
var system = require('system');

var address = system.args[1];
var time = 0;
var start = Date.now();

page.open(address, function (status) {
  time = Date.now() - start;
  console.log(time + '');
}); 
```

通过 phantomjs 测试站点的时间通常要长 4 倍。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T23:56:44.397

PhantomJS 不支持输出数据，它只打开一个网页。**[phantomjs-node](https://github.com/sgentle/phantomjs-node)**以下列方式连接它们 - 它创建一个 ExpressJS 实例并通过其 socket.io 传输数据，并使用另外两个库。数据如下：

**网页 > Phantom.js > [dnode](https://github.com/substack/dnode) + [node-](https://github.com/substack/node-browserify) browserify > Express.js > Socket.io > Node.js**

我现在在阅读有关**[node-webkit](https://github.com/rogerwang/node-webkit)**的速度和性能方面遇到了同样的问题，那是本机 WebKit，没有支持 Node.js 模块的拐杖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-10T14:47:32.180

在某些网站上，我发现这有利于 Phantom JS 的加载时间。

```
page.settings.loadImages = false; 
```

# asp.net-mvc-4 - 在 .NET 4.5 中以编程方式修改 WIF 服务配置

> ID：13881771
> 
> 赞同：2
> 
> 时间：2012-12-14T15:39:44.660
> 
> 标签：asp.net-mvc-4, ninject, wif, claims-based-identity

在带有 Ninject 的 MVC4 应用程序中使用 WIF 和 .NET 4.5

情况是这样的——我有一个`ClaimsAuthenticationManager`名为的自定义子类`TenantAccessClaimsAuthenticationManager`，它可以进行一些声明转换。需要将`TenantAccessClaimsAuthenticationManager`IRepository 对象注入其中（使用 ninject）。

WIF 的 .NET 4.5 impl 建议我可以将自定义声明身份验证管理器粘贴在 web.config 中 - 但是，这种方法只能通过无参数 ctor 实例化对象。

我的第二种方法是在 web.config 中没有任何内容，但是在 中，`App_start`获取 WIF 配置的句柄并插入`TenantAccessClaimsAuthenticationManager``RegisterServices`

如何获取当前应用程序的 WIF 配置上下文的句柄？MSDN 文档没有帮助。

**编辑：**显然问题是该`onServiceConfigurationCreated`事件不再可用。现在最好的方法是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:33:54.340

该活动仍然可用！

code://System.IdentityModel.Services:4.0.0.0:b77a5c561934e089/System.IdentityModel.Services.FederatedAuthentication/event:FederationConfigurationCreated:System.EventHandler

更具体地说，该事件在[FederatedAuthentication.FederationConfigurationCreated](http://msdn.microsoft.com/en-us/library/system.identitymodel.services.federatedauthentication.federationconfigurationcreated(v=vs.110).aspx)可用。下面是一个示例实现：

```
FederatedAuthentication.FederationConfigurationCreated += (sender, e) => {
    e.FederationConfiguration.IdentityConfiguration.ClaimsAuthenticationManager = new MyCustomClaimsAuthenticationManager();
} 
```

[http://dunnry.com/blog/2012/12/20/SettingClaimsAuthenticationManagerProgrammaticallyInNET45.aspx](http://dunnry.com/blog/2012/12/20/SettingClaimsAuthenticationManagerProgrammaticallyInNET45.aspx)上有一篇博文，其中包含更多信息。

# mysql - 如何在 Joomla/mysql 中删除垃圾邮件用户

> ID：13881772
> 
> 赞同：1
> 
> 时间：2012-12-14T15:39:43.617
> 
> 标签：mysql, joomla, phpmyadmin

在一个旧网站中，我有很多垃圾邮件注册。什么是仅过滤和删除垃圾邮件用户的最佳方法，因为那里还有不是垃圾邮件机器人的用户。

我查看了 Joomla，但没有很好的解决方案，也许有一个 phpmyadmin 的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-01T09:00:02.263

要删除相同的内容，您需要检查字符串模式以创建正则表达式，否则必须有“参数”列将始终为空。

大多数具有 'usertype' = 已注册的用户帐户都可以删除所有这些用户。（请确定您是否有自己的注册用户）

> 从 jos_users 中删除 usertype = 'Registered';

您必须从您的 Joomla 网站管理窗格中阻止“新用户注册”。很少有垃圾邮件机器人使用您的“/index.php?option=com_users”链接来检查其他用户的电子邮件地址。

在 joomla 1.5 中，这是非常常见的问题。您需要从“全局配置-> 系统选项卡”禁用新用户注册，以停止进一步创建垃圾邮件用户。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T15:40:54.443

```
DELETE FROM jos_users WHERE 
       SUBSTRING_INDEX(name, " ", 1)=SUBSTRING_INDEX(name, " ", -1) 
```

# css - 应用多次旋转时计算元素角度的最佳方法是什么

> ID：13881777
> 
> 赞同：4
> 
> 时间：2012-12-14T15:40:04.273
> 
> 标签：css, 3d

如果你做一个 rotateX(180deg) rotateY(180deg) 它现在是颠倒的。因此，如果鼠标设置为在拖动时向上移动子元素，则该子元素现在将向下移动（取决于您的设置方式）。

```
-webkit-transform: rotateX(?deg) rotateY(?deg) rotateZ(?deg); // where does it point? 
```

![在此处输入图像描述](../Images/14a1c631cfc9d048533a9ef733afb161.png)

**仅适用于 WEBKIT 的设置**

看看[小提琴](http://jsfiddle.net/XC7UG/2/)（代码是一团糟，被剥离了）。在您的电脑显示器上画出 360 度的 tic 标记，排列成一个圆圈。你怎么知道箭头指向的是什么标记（假设盒子正好在圆的中心）？

涵盖基础知识的教程在[这里](http://coding.smashingmagazine.com/2012/01/06/adventures-in-the-third-dimension-css-3-d-transforms/)，[这里](http://www.the-art-of-web.com/css/3d-transforms/)。

*edit - 正在使用的变换原点位于立方体的中心

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:09:23.157

**注意：**下面的所有内容都假设您使用的是通过原点的向量，如[本例所示](http://jsfiddle.net/XC7UG/4/)。在您的原始示例中，向量额外从原点偏移了向量`[0, 0, 60]`。这会使计算稍微复杂化，所以我在解释中使用了简化版本。

您的矢量当前由~~球面坐标~~ ~~欧拉角定义，~~ **连续将旋转应用于预定义矢量**。以下是如何使用旋转来确定最终向量的笛卡尔坐标：

1.  假设您的向量是`[0, 1, 0]`（假设箭头长 1 个单位并从原点开始）

2.  通过将向量乘以[此处描述](http://en.wikipedia.org/wiki/Rotation_matrix#Basic_rotations)的旋转矩阵以任意顺序应用 x、y 和 z 旋转，在每种情况下将 θ 替换为相应的角度：

                                                 ![在此处输入图像描述](../Images/cc4a2ba017e1c661cfec789e8d894a3c.png)

3.  结果向量是由指定的 x、y 和 z 旋转变换的原始向量

一旦你获得了旋转的向量，找到向量在 xy 平面上的投影就变得很容易了。

例如，考虑向量`[10, 20, 30]`（笛卡尔坐标），在 xy 平面上的投影就是向量`[10, 20, 0]`。这个向量与水平面的夹角可以计算为：

> tan ^(-1) (20/10) = 1.107 rad（从正 x 轴逆时针）
> 
>                     = 63.43 度（从正 x 轴逆时针）

这意味着箭头指向第 63 个和第 64 个“刻度线”之间，从直接指向右侧的方向逆时针计数。

# ruby-on-rails-3 - 在哪里添加可以在 Rails 中操作博客文章文本的代码？

> ID：13881780
> 
> 赞同：0
> 
> 时间：2012-12-14T15:40:26.350
> 
> 标签：ruby-on-rails-3

这是在 views/posts/show.html.erb 文件中对我有用的代码：

```
<% require 'rmmseg' %>
<% RMMSeg::Dictionary.load_dictionaries %>
<% text = "你好" %>
<% algor = RMMSeg::Algorithm.new(@post.content) %>
<% loop do %>
    <% tok = algor.next_token %>
    <% break if tok.nil? %>
    <% text2 = tok.text.force_encoding('UTF-8') %>
    <%= "#{text2}" %>
<% end %> 
```

我是 Rails 新手，所以我需要帮助知道在框架中放置此代码或类似代码的位置，以便将帖子与数据库中的空间一起保存。它应该在控制器中吗？如果是这样，我会怎么做？

我正在尝试并失败了：

```
def create
    @post = Post.new(params[:post])

require 'rmmseg'
  RMMSeg::Dictionary.load_dictionaries

    algor = RMMSeg::Algorithm.new(@post.content)
    loop do
    tok = algor.next_token
    break if tok.nil?
    text2 = tok.text.force_encoding('UTF-8')
    @post.content = "#{text2}"
    end

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我显然知道我在做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:26:34.957

我打电话给[Rails 热线](http://rails.pockethotline.com)，他们提示我使用回调（before_save、after_save 等）将其放入模型中

这对我有用。

# youtube - YouTube API 设置播放列表位置

> ID：13881781
> 
> 赞同：2
> 
> 时间：2012-12-14T15:40:28.593
> 
> 标签：youtube, position, playlist

我在 PHP 中使用 YouTube API 的第 2 版，并且已经使用了一年多。直到大约 2 周前一切正常。然后我注意到播放列表存在问题，特别是在播放列表中添加视频条目和设置位置。

根据 API 文档，我的请求标头和有效负载是正确的。我还收到一个`200`响应代码，在响应正文中，我的播放列表条目的`yt:position`值为 1。但检查播放列表的位置实际上是在末尾，而不是开头。

我想知道是否有人遇到类似的问题，他们是否找到了解决方案？

以下是我的请求/响应示例：

> > 回复：
> > 
> > HTTP/1.1 200 OK
> > X-GData-User-Country: DE Con​​tent-
> > Type: application/atom+xml; 字符集=UTF-8；type=entry
> > GData-Version: 2.1
> > ETag:
> > Transfer-Encoding:
> > chunked Date: Thu, 13 Dec 2012 17:17:20 GMT
> > Expires: Thu, 13 Dec 2012 17:17:20 GMT
> > Cache-Control: private, max-age =0
> > X-Content-Type-Options: nosniff
> > X-Frame-Options: SAMEORIGIN
> > X-XSS-Protection: 1; 模式=块
> > 服务器：GSE 连接：关闭
> > 
> > <entry xmlns='http://www.w3.org/2005/Atom' xmlns:app='http://www.w3.org/2007/app' xmlns:media='http://search.yahoo .com/mrss/' xmlns:gd='http://schemas.google.com/g/2005' xmlns:yt='http://gdata.youtube.com/schemas/2007' gd:etag='' >
> > ...
> > <yt:position> 1 </yt:position>
> > </entry>
> > 
> > 要求：
> > 
> > PUT /feeds/api/playlists/PLAYLIST/PLAYLIST_ENTRY HTTP/1.1
> > 接受：*/*
> > 主机：gdata.youtube.com
> > 连接：关闭
> > X-GData-Key：key=DEVELOPER_KEY
> > 用户代理：Zend_Framework_Gdata/1.11.8
> > 授权：GoogleLogin auth= AUTH_KEY
> > GData-Version: 2
> > Accept-encoding: identity
> > Content-Type: application/atom+xml
> > Content-Length: 166
> > 
> > <?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:yt="http://gdata.youtube.com /schemas/2007"><yt:position>1</yt:position></entry>

# jquery-ui - AngularJS动态列表总和

> ID：13881784
> 
> 赞同：5
> 
> 时间：2012-12-14T15:40:39.797
> 
> 标签：jquery-ui, angularjs

我在我的应用程序之上使用 angularJS。

我有一个控制器的基本示例：

```
function OrderListCtrl($scope, $http) {
  $http.get('/static/angular/app/phones/van1.json').success(function(data) {
    $scope.van1 = data;
  });

  $http.get('/static/angular/app/phones/van2.json').success(function(data) {
    $scope.van2 = data;
  }); 
```

}

和一个示例 JSON 条目

```
{
        "id": "3", 
        "custName": "Mrs Smith",
        "accountNumber": "416", 
        "orderNumber": "12348", 
        "orderWeight": "120.20"
}, 
```

我的 html 看起来像这样：

```
<div id=1>
<h1>Van 1 - Total Weight = XXX </h1>
<ul class="sortdrag">
    <li ng-repeat="van1 in van1" id="[[ van1.id ]]">
      [[van1.custName]] [[van1.accountNumber]] [[van1.orderWeight]]

    </li>
</ul>
</div> 
```

现在，我想获得 ul 中每个 li 项目的总重量。

如果列表是静态的，这将很容易，但是列表使用 jQuery-ui，并且我有多个列表，其中 li 项目在每个列表之间拖放。我的问题是，我怎样才能让 XXX 动态更新为 ul 中每个 li 中所有权重的值，或者更多的问题是这甚至可以做到吗？

我真的不想使用 onDrop 事件，因为这不适用于预先填充的列表，所以理想情况下，我想使用从 ul 中的所有 van1.orderWeight 值中获取其值的代码。

任何有关解决此问题的最佳方法的建议将不胜感激！在有人问我使用 [[ 和 ]] 而不是 {{ 和 }} 之前，因为我使用的是 jinja2 模板。

更新：

好的，阅读下面的答案后，将原始控制器修改为：

```
function OrderListCtrl($scope, $http) {
  $http.get('/static/angular/app/phones/van1.json').success(function(data) {
    $scope.van1 = data;
    // This part is easy, calcuate the sum of all weights from the JSON data
    $scope.sumV1 = _.reduce(_.pluck($scope.van1, 'orderWeight'), function (m, w) {return m + w}, 0);
  });

  $scope.getVan1Weight = function(){
    // here I try and write a function to calculate the dynamic weight
    // of a van, which will update when items get dropped in/out of the ul
     _.reduce(_.pluck($scope.van1, 'orderWeight'), function (m, w) {return m + w}, 0);
    } 
```

还有我的模板

```
<div id="app" ng-controller="OrderListCtrl">

<div id=1>
<h1>Van 1 - Total Weight = [[getVan1Weight()]]  
Starting Weight - [[sumV1]]</h1>
<ul class="sortdrag">
    <li ng-repeat="van1 in van1" id="[[ van1.id ]]">
      [[van1.custName]] [[van1.accountNumber]] [[van1.orderWeight]]

    </li>
</ul>
</div> 
```

现在我使用 underscorejs 库来帮助执行计算，但我似乎只能使用初始数据让它工作，而不是在从另一个 ul 拖入新订单时更新

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:31:23.313

在 Angular 中实现这一点是相当不错的。您必须在控制器中编写一个函数来为您进行计算并在您的视图中插入该函数。就像是

```
<div id=1>
<h1>Van 1 - Total Weight = [[getVanWeight()]] </h1>
<ul class="sortdrag">
    <li ng-repeat="van1 in vans" id="[[ van1.id ]]">
      [[van1.custName]] [[van1.accountNumber]] [[van1.orderWeight]]

    </li>
</ul>
</div> 
```

在您的控制器内部，您可以：

```
$scope.getVanWeight = function(){
// write your logic for calculating van weight here.

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T15:51:51.440

感谢@ganaraj，我使用了在

[http://www.smartjava.org/content/drag-and-drop-angularjs-using-jquery-ui](http://www.smartjava.org/content/drag-and-drop-angularjs-using-jquery-ui)

我还用纯 angularjs 代码替换了我的下划线代码

```
$scope.getVan1Weight = function(){
     var sum = 0;
     for( t=0; t < $scope.van1.length; t++) { sum += $scope.van1[t].orderWeight }
     return sum.toFixed(2);;
} 
```

在我的控制器的开头，我还定义了一个空数组（稍后被覆盖）

```
// Define an empty array
$scope.van1 = []; 
```

由于这会停止产生任何错误，因为 $http get 需要一段时间才能加载，并且当您加载浏览器窗口时 .length 返回错误，因此如果您定义一个空数组，它会停止任何错误。我本可以测试一个数组是否有效并放入一些 if 子句，但是我的 angularjs 知识非常有限，所以这个解决方案对我来说最有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T12:21:33.263

这里有一个与您的要求非常相似的解决方案，效果很好......

标记...

```
<table class="table table-condensed table-striped">
<thead>
    <tr>
        <th>Pillar Name</th>
        <th>Weight</th>
        <th>Metrics</th>
        <th> Actions</th>
    </tr>
</thead>
<tbody>
    <tr data-ng-repeat="p in l.pillars">
        <td>{{p.name}}</td>
        <td>{{p.weight}}</td>
        <td>{{p.metrics.length}}</td>
        <td>
            <a href="" data-ng-click="vm.editPillar(p)">
                <i class="fa fa-pencil blue"></i>
            </a>
            <a href="" data-ng-click="vm.deletePillar(p, l)">
                <i class="fa fa-times-circle red"></i>
            </a>
        </td>
    </tr>
    <tr>
        <td><strong>Totals</strong></td>
        <td><strong>{{l.pillars.summedWeight}}</strong></td>
        <td></td>
        <td></td>
    </tr>
</tbody> 
```

js，当我从服务器或本地缓存中获取柱子时会调用它...

```
function getSummedPillarWeight(pillars) {
        var summedWeight = 0;
        pillars.forEach(function (pillar) {
            summedWeight = summedWeight + pillar.weight;
        });
        return pillars.summedWeight = summedWeight;
    } 
```

# c++ - 带有 FreeGLUT 的 C++ TinyThread 和 OpenGL

> ID：13881794
> 
> 赞同：0
> 
> 时间：2012-12-14T15:41:18.847
> 
> 标签：c++, multithreading, freeglut

我遇到的问题是由于在一个简单的 FreeGLUT C++ 应用程序中可能滥用线程而产生的。

由于退出`glutMainLoop()`不能优雅地完成，我依靠`glutLeaveMainLoop()`做一些工作，但这并没有真正将控制权交还给程序的`main`功能。我有一个全局指针，它将在`main`GL 调用之前在函数中设置到在堆上创建的对象实例。如果不使用`atexit`回调，没有人会`delete`在这个实例上调用操作员，尽管我在调用之后放置了这样的操作`glutMainLoop`（现在因为它的无用而评论）。

这是我正在做的伪代码（我不会发布实际代码，因为它太长而无法过滤）：

```
CWorld* g_world;

AtExit()
{
 delete g_world;
}
void main()
{
  atexit(AtExit);
  // create an instance of an object that creates a thread in its constructor
  // via the new operator and joins this thread in its destructor
  // calling the delete operator on that pointer to the thread instance
  CWidget thisObjectCreatesATinyThread;

  g_world = new CWorld();
  ...
  glutMainLoop();
  // delete g_world;
} 
```

请注意，在 main 函数中，我还包含了一个小部件实例，该实例通过在其构造函数中创建的线程完成一些工作。该线程在其析构函数中加入，然后通过`delete`.

**错误的行为**：没有设置`atexit`回调，我得到资源泄漏，因为`CWorld`对象的析构函数不会被调用。如果我设置了这个回调，那么`delete`操作符会因为某种原因被调用两次，即使该`AtExit`函数只被调用一次。

在哪里寻找这种奇怪行为的根源？

即使我禁用 CWidget 实例化，我仍然会得到特殊的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:14:33.587

我假设您没有使用原始的 GLUT 库（因为它很古老），而是使用 FreeGLUT，它是最广泛使用的 GLUT 实现。为了让 glutMainLoop() 返回，您将执行以下操作：

```
glutSetOption(GLUT_ACTION_ON_WINDOW_CLOSE, GLUT_ACTION_CONTINUE_EXECUTION); 
```

在调用 glutMainLoop() 之前。如果在调用 glutLeaveMainLoop() 时没有更多活动的顶层窗口，这将导致它返回。如果您不关心仍然处于活动状态的窗口，请执行以下操作：

```
glutSetOption(GLUT_ACTION_ON_WINDOW_CLOSE, GLUT_ACTION_GLUTMAINLOOP_RETURNS); 
```

您可能必须包含`<GL/freeglut.h>`而不是`<GL/glut.h>`才能获得定义。

# customization - 如何在 Alfresco Share 中禁用快速共享？

> ID：13881800
> 
> 赞同：2
> 
> 时间：2012-12-14T15:41:43.863
> 
> 标签：customization, share, alfresco

我目前正在尝试找到一种方法来禁用 Alfresco 4.2.b 中的系统范围内的快速共享功能，或者如果不可能，至少从文档库和文档详细信息页面中删除快速共享链接。

我尝试的第一件事是利用可在*alfresco-global.properties*文件中配置的**system.quickshare.enabled**属性。它根本不起作用抛出下一个异常：

 *我发现了一个关于此的问题：[https](https://issues.alfresco.com/jira/browse/ALF-16233) ://issues.alfresco.com/jira/browse/ALF-16233 。

由于这似乎是一个错误，并将在后续版本中修复，因此我专注于尽可能从 UI 中删除快速共享链接。顺便说一句，我发现了一个相关的帖子：[https](https://forums.alfresco.com/en/viewtopic.php?f=48&t=46659) ://forums.alfresco.com/en/viewtopic.php?f=48&t=46659 。我已通过创建下一个扩展名成功删除了文档详细信息页面中的***文档链接区域：***

```
<extension>
    <modules>
        <module>
            <id>Removes from document-details page the Share region.</id>
            <auto-deploy>true</auto-deploy>
            <components>
                <component>
                    <scope>template</scope>
                    <region-id>document-links</region-id>
                    <source-id>document-details</source-id>
                    <sub-components>
                        <sub-component id="default">
                            <evaluations>
                                <evaluation id="hideDocumentLinks">
                                    <render>false</render>
                                </evaluation>
                            </evaluations>
                        </sub-component>
                    </sub-components>
                </component>
            </components>
        </module>
    </modules>
</extension> 
```

没关系。我还有来自 document-details 页面的 quickshare 链接，它在*share-config.xml*文件中执行了一些更改，特别是在 Social 部分中将标签留空：

```
<config evaluator="string-compare" condition="Social">
      <!-- Alfresco QuickShare social widget - for creating public url that can be shared -->
      <quickshare>
         <!--
            Will be available as Alfresco.constants.QUICKSHARE_URL using javascrip in the browser.
            If changing this, make sure this url matches the quickshare rule in urlrewrite.xml
         -->
         <url>{context}/s/{sharedId}</url>
      </quickshare>

      <!-- Alfresco LinkShare social widget - share a link to social sites -->
      <linkshare>
         <!--
            These actions will be available as Alfresco.constants.LINKSHARE_ACTIONS using javascript in the browser.
            Labels will be retrieved from msg key "linkshare.action.<id>.label" unless explicitly provided as an
            attribute to the action element.
            Each param value accepts the following input: {shareUrl}, {displayName} or a msg key that will be prefixed.
            I.e. {body} for the email action's href param will be retrieved using "linkshare.action.email.body".
         -->
         <action id="email" type="link" index="10">
            <param name="href">mailto:?subject={subject}&amp;body={body}</param>
            <param name="target">new</param>
         </action>
         <action id="facebook" type="link" index="20">
            <param name="href">https://www.facebook.com/sharer/sharer.php?u={shareUrl}&amp;t={message}</param>
            <param name="target">new</param>
         </action>
         <action id="twitter" type="link" index="30">
            <param name="href">https://twitter.com/intent/tweet?text={message}&amp;url={shareUrl}</param>
            <param name="target">new</param>
         </action>
         <action id="google-plus" type="link" index="40">
            <param name="href">https://plus.google.com/share?url={shareUrl}</param>
            <param name="target">new</param>
         </action>
      </linkshare>

   </config> 
```

由于此逻辑在 node-header.get.js 网页脚本中定义：

```
model.showQuickShare = (!model.isContainer && model.showQuickShare && config.scoped["Social"]["quickshare"].getChildValue("url") != null).toString(); 
```

尽管如此，快速共享链接仍保留在文档库页面中，这让我感到惊讶。我相信存在与上述类似的逻辑来显示或不显示文档库页面中的链接，但事实并非如此。所以，现在我想知道我还能做什么......正如我所看到的，该链接是在客户端使用文档库小部件（*documentlist.js*）生成的：

```
 if (!record.node.isContainer)
    {
       html += '<span class="item item-social item-separator">' + Alfresco.DocumentList.generateQuickShare(this, record) + '</span>';
    } 
```

我正在考虑创建一个扩展来自定义文档库小部件，类似地在这里描述：[url]http://blogs.alfresco.com/wp/ddraper/2012/05/22/customizing-share-javascript-widget-instantiation-第 1 部分/[/url]。那可能吗？

我想知道在开始自定义小部件之前是否有更简单的方法来做我需要做的事情。如果这种“神奇”方式不存在，我想知道所描述的方法是否正确。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:35:13.000

由于文档库小部件 (documentlist.js) 的扩展并不像我预期的那么简单，因此我根据原始问题的评论之一中解释的想法，通过一种更简单、更简单且非侵入性的解决方案来解决它。一般而言，它包括定义一个扩展模块，该模块在每个页面的标题中添加自定义 CSS。该 CSS 以这种方式覆盖快速共享链接的样式：

```
/* Disables the Quick Share link both in documentlibrary and document-details pages */
.item-social a.quickshare-action {
    visibility: hidden;
} 
```

这里解释了如何定义这种扩展模块：[https](https://forums.alfresco.com/en/viewtopic.php?f=48&t=47312#p140623) ://forums.alfresco.com/en/viewtopic.php?f=48&t=47312#p140623 。

希望它可以帮助其他尝试实现相同目标的人。*

# java - 有时我使用休眠失去了我的数据库连接，可能是什么原因？

> ID：13881801
> 
> 赞同：1
> 
> 时间：2012-12-14T15:41:45.657
> 
> 标签：java, hibernate, transactions

我已经使用 Struts2 和 Hibernate 制作了一个应用程序。但现在我面临一个问题。第一次浏览我的项目页面，我的数据库中的所有数据都将正确显示。但是，如果我继续浏览我的页面，那么几分钟/小时后，我将无法在我的 html 页面中看到数据库表数据。（我的 DAO 类无法提供表值并抛出类似错误 `Exception in getSubjects() :org.hibernate.exception.JDBCConnectionException: could not execute query`）或者即使我没有触摸我的应用程序（即空闲），几分钟后如果我来浏览我的数据，那么我也会遇到同样的错误 `Exception in getSubjects() :org.hibernate.exception.JDBCConnectionException: could not execute query`。

我在主题列中收到一个空白数据，并且在下一次单击时慢慢地我丢失了所有数据，并且休眠对所有列表都抛出了相同的错误。

**问题：** *有时我的 DAO 正在返回列表，有时它没有返回列表*

这可能是什么原因？请帮我解决这个问题。我花了很多时间制作了这个应用程序。

来自 My SubjectdetailsDAO.java 的方法（我遇到上述错误的方法）

```
 `   public List getSubjects(String subjectname)
        {
      List list=null;
        try{ 
            session = sessionFactory.openSession();
            list=session.createCriteria(Subjectdetails.class).add(Expression.like("subjectName", "%" + subjectname + "%")).list();
         }catch (Exception e) {
                System.out.println("Exception in  getSubjects()  :" + e);
            } finally {
                try {
                     session.flush();
                    session.close();
                } catch (Exception e) {
                    System.out.println("Exception In getSubjects Resource closing  :" + e);
                }
            } 
            return list; 
        } ` 
```

HibernateUtil.java

```
 `      package v.esoft.connection; import org.hibernate.SessionFactory;
    import org.hibernate.cfg.AnnotationConfiguration;

    public class HibernateUtil {

        private static final SessionFactory sessionFactory = buildSessionFactory();

        private static SessionFactory buildSessionFactory() {
            try {
                // Create the SessionFactory from hibernate.cfg.xml
                return new AnnotationConfiguration().configure().buildSessionFactory();

            }
            catch (Throwable ex) 
            {
                // Make sure you log the exception, as it  might be swallowed
                System.err.println("Initial SessionFactory creation failed." + ex);
                throw new ExceptionInInitializerError(ex);
            }
        }

        public static SessionFactory getSessionFactory() {
            return sessionFactory;
        }

        public static void shutdown() {
            // Close caches and connection pools
            getSessionFactory().close();
        } 
    }` 
```

休眠.cfg.xml

```
 `        <?xml version="1.0" encoding="utf-8"?>
    <!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
    <hibernate-configuration>
        <session-factory name="vbsofwaresession">
            <property name="hibernate.bytecode.use_reflection_optimizer">false</property>
            <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
            <property name="hibernate.connection.password">ashutosh</property>
            <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/vbsoftware</property>
            <property name="hibernate.connection.username">ashutosh</property>
            <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
            <property name="hibernate.search.autoregister_listeners">false</property>
            <property name="hibernate.search.default.directory_provider">filesystem</property>
            <mapping class="v.esoft.pojos.Themes" />
            <mapping class="v.esoft.pojos.Usertype" />
            <mapping class="v.esoft.pojos.Login" />
            <mapping class="v.esoft.pojos.Coverdetails" />
            <mapping class="v.esoft.pojos.Editiondetails" />
            <mapping class="v.esoft.pojos.Bookdetails" />
            <mapping class="v.esoft.pojos.Soldbookdetails" />
            <mapping class="v.esoft.pojos.Languagedetails" />
            <mapping class="v.esoft.pojos.Locationdetails" />
            <mapping class="v.esoft.pojos.Subjectdetails" />
        </session-factory>
    </hibernate-configuration> 
```

`

# wordpress - Wordpress 和 WP MVC 上传图片

> ID：13881805
> 
> 赞同：1
> 
> 时间：2012-12-14T15:41:54.587
> 
> 标签：wordpress, plugins

我需要一种将图像/图库添加到由[WP MVC](http://wordpress.org/extend/plugins/wp-mvc/)插件（非常棒）为 wordpress 创建的模型的方法。配合 3.5 中提供的新功能会很好，但我真的不知道从哪里开始。

我尝试了一些谷歌搜索，但我找不到任何与我的需求有关的东西。

感谢您提供任何帮助。

![自定义示范律师](../Images/64b95684f8ba032133611ca53324ab59.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T11:40:25.420

尝试在我的自定义页面上使用媒体对话框时，我还收到错误“wpActiveEditor 未定义”。如我所见，脚本尝试使用`window.wpActiveEditor`未定义的属性。所以解决方案是定义属性

```
window.wpActiveEditor = null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T06:32:29.787

当您执行以下操作时会发生此问题：

```
$(selector).click(function(){
    // ...
    // initialization code
    // ...
    exports.media.editor.open();
}); 
```

如果将 $(this) 作为第一个参数传递给此 open()，则问题将得到解决：

```
$(selector).click(function(){
    // ...
    // initialization code
    // ...
    exports.media.editor.open($(this));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:38:54.217

也许有帮助

[https://gist.github.com/4283059](https://gist.github.com/4283059)

[https://wordpress.stackexchange.com/questions/75808/using-wordpress-3-5-media-uploader-in-meta-box](https://wordpress.stackexchange.com/questions/75808/using-wordpress-3-5-media-uploader-in-meta-box)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T16:31:49.083

您可以在 GalleriesController 中使用类似这样的 WP 函数 wp_handle_upload

```
function upload(){
    if(!empty($this->params['data'])){
        $overrides = array('test_form' => false);
        $file = wp_handle_upload( $_FILES['file'],$overrides );
        $this->params['data']['Photo']['file'] = $file['url'];
        $this->params['data']['Photo']['title'] = basename ($file['file']);
        $this->Photo->save($this->params['data']);
    }
} 
```

# javascript - 使只读/禁用tinymce textarea

> ID：13881812
> 
> 赞同：53
> 
> 时间：2012-12-14T15:42:18.310
> 
> 标签：javascript, jquery, html, tinymce, wysiwyg

我需要在运行时禁用或只读一个tinymce textarea。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-12-14T15:43:53.090

使用配置参数[readonly](http://www.tinymce.com/wiki.php/Configuration%3areadonly)

```
tinyMCE.init({
        ...
        theme : "advanced",
        readonly : 1
}); 
```

这是[一个演示的链接](http://www.tinymce.com/tryit/read_only_mode.php)。

**更新**：为了防止用户在编辑器中编辑内容，您可以将编辑器 iframe 正文的 contenteditable 属性设置为 false：

```
tinymce.activeEditor.getBody().setAttribute('contenteditable', false); 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2016-03-14T08:40:25.560

从 4.3.x 版本开始，您可以将以下代码用于只读模式

```
tinymce.activeEditor.setMode('readonly'); 
```

对于设计模式：

```
tinymce.activeEditor.setMode('design'); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-03-17T16:31:26.990

如果您只有一个编辑器，则此方法有效：

```
tinymce.activeEditor.getBody().setAttribute('contenteditable', false); 
```

如果您有多个编辑器，则必须通过 textarea 的 id 选择它们：

```
tinyMCE.get('textarea_id').getBody().setAttribute('contenteditable', false); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-08-16T16:54:16.137

Thariama 的[解决方案](https://stackoverflow.com/a/13881837/990642)会将页面上的所有 TinyMCE 文本区域设置为只读。

我发现的最佳解决方案是由 Magnar Myrtveit[发布](https://stackoverflow.com/a/18056638/990642)的，它将具有 readonly 属性的字段设置为只读。这是代码：

```
tinyMCE.init({
    ...
    setup: function(ed) {
        if ($('#'+ed.id).prop('readonly')) {
            ed.settings.readonly = true;
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-13T12:55:37.810

要禁用，您可以调用此命令：

```
tinymce.EditorManager.execCommand('mceToggleEditor', true, tinymceId); 
```

要再次启用编辑器，您可以再次调用此命令。

' **mceToggleEditor** ' 命令通过显示或隐藏 textarea 和编辑器实例来打开或关闭 WYSIWYG 模式。这与 mceAddControl 或 mceRemoveControl 不同，因为实例仍然存在且未初始化，因此此方法更快。

上述命令的链接：http: [//archive.tinymce.com/wiki.php/TinyMCE3x :Command_identifiers](http://archive.tinymce.com/wiki.php/TinyMCE3x:Command_identifiers)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-03-11T23:01:04.373

我发现的最好方法（这是通过 tinymce-react，但也应该与 js 一起使用）是将控件设置为禁用。使用 tinymce 5.2。

```
 <Editor 
                initialValue={details}
                disabled = {true}
                init = {{
                    height: 300,
                    menubar: false,
                    toolbar: false,
                    readonly: true
                }}/> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-18T03:55:28.897

您可以通过@rioted 在这里看到这个答案：[https](https://stackoverflow.com/a/34764607/1827960) ://stackoverflow.com/a/34764607/1827960 。

我用它想出了这个解决方案：

```
tinymce.settings = $.extend(tinymce.settings, { readonly: 1 });
tinymce.EditorManager.editors.forEach(function (editor) {
    tinymce.EditorManager.execCommand('mceRemoveEditor', false, editor.id);
    //tinymce.EditorManager.editors = [];
    tinymce.EditorManager.execCommand('mceAddEditor', false, editor.id);
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-19T12:24:24.557

您可以使用

```
this.getBody().setAttribute('contenteditable', false); 
```

看看完整的解决方案，我的服务器端是`Asp.net MVC`

```
 setup: function (ed) {
        ed.on('init', function () {
            this.execCommand("fontSize", false, "17px");
            $("html,body").scrollTop(0);
            @if (ViewBag.desableEdit != null && ViewBag.desableEdit == true)
            {
                <text>
                    this.getBody().setAttribute('contenteditable', false);
                </text>
            }

        }); 
```

如果您有另一种方法，它将`server side condition`在返回的 HTML 中删除

```
 tinymce.init({
    selector: ... ,
    ....
    @if (ViewBag.desableEditExseptExportNumber != null && ViewBag.desableEditExseptExportNumber == true)
    {
         <text>
              readonly: 1,
         </text>
    }
    language: 'ar',
    ....}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-10-02T10:35:09.477

对于最新的 5.x 版本，请使用

```
editor.mode.set('readonly') 
```

和

```
editor.mode.set('design') 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-05-04T18:46:04.430

```
getInit(): any
{
    const result = {
        base_url: baseUrl,
        menubar: false,
        branding: false,
        height: '500',
        selector: 'textarea',  // change this value according to your HTML
        toolbar: false,
        statusbar: false,
        readonly: true,
        setup: function(ed)
        {
            ed.settings.readonly = true;
        }
    };
    return result;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-04T06:23:11.477

也许此代码行有助于其他使用 iframe 的浏览器。

```
tinymce.activeEditor.getBody().contenteditable = false 
```

问候！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-03T16:40:19.967

这适用于 ASP.NET MVC Razor

```
readonly: @(Model.Readonly ? "true" : "false") 
```

在初始化 tinyMCE 时：

```
tinymce.init({/* put readonly setting here */}); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-29T18:39:48.293

**disabled={true}** [反应集成](https://www.tiny.cloud/docs/integrations/react/#disabled)

# configuration - 我如何在 liferay 中存储管理员配置

> ID：13881817
> 
> 赞同：0
> 
> 时间：2012-12-14T15:42:42.200
> 
> 标签：configuration, liferay, portlet

我编写了一个具有管理设置配置页面的 portlet。当管理员单击配置选项卡时，如何保存此配置并在下次加载它们？

我有实现 ConfigurationAction 的类，并在 portlet.xml 中注册它。我只是不知道如何保存这些设置并在需要时加载它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:12:46.780

我建议使用 portlet 首选项来存储和检索您的设置。

要获得您的偏好，您需要致电：

```
PortletPreferencesLocalServiceUtil.getPreferences(
    long companyId, long ownerId, int ownerType, long plid,
    String portletId) 
```

我建议使用这些参数使首选项对门户实例具有全局性：

```
long companyId = themeDisplay.getCompanyId();
long ownerId = themeDisplay.getCompanyId();
int ownerType = PortletKeys.PREFS_OWNER_TYPE_COMPANY;
long plid = PortletKeys.PREFS_PLID_SHARED;
String portletId = "my_portlet_id"; 
```

获得`portletPreferences`对象后，只需调用适当的方法来获取/存储您的密钥，如[PortletPreference JavaDoc 所述](http://docs.oracle.com/cd/E13155_01/wlp/docs103/javadoc/javax/portlet/PortletPreferences.html)。

# c# - C# TryParseExact 读取时区

> ID：13881819
> 
> 赞同：3
> 
> 时间：2012-12-14T15:43:00.890
> 
> 标签：c#, datetime

> **可能重复：**
> [使用 PST/CEST/UTC/等形式的时区解析 DateTime](https://stackoverflow.com/questions/241789/parse-datetime-with-timezone-of-form-pst-cest-utc-etc)

我有以下格式的日期字符串

```
Fri, 14 Dec 2012 6:52 am PST 
```

我想将其转换为日期时间。我正在使用`DateTime.TryParseExact`它来实现它，但我无法读取时区。如果我将字符串（没有时区）更改为

```
Fri, 14 Dec 2012 6:52 am 
```

并使用

```
DateTime.TryParseExact(DateString, "ddd, dd MMM yyyy h:mm tt", CultureInfo.InvariantCulture, DateTimeStyles.None,out dt) 
```

有用。如何读取时区。

编辑 - 我从 Yahoo 天气 API 获取数据（例如[http://weather.yahooapis.com/forecastrss?w=2420380](http://weather.yahooapis.com/forecastrss?w=2420380)）。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T15:45:44.550

我不相信有处理时区的[自定义日期和时间格式说明符](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)（与当前的 UTC 偏移量相反）。即使有，时区缩写也可能是模棱两可的，因此它们作为传达时区信息的方式通常很差。不幸的是，它们被广泛使用，当然......

我怀疑你最好创建一个从缩写到“最佳猜测时区”的地图，然后从你的输入字符串中删除最后一个空格之后的任何内容，并使用它来获取该区域。

以防万一有人想知道，[Noda Time](http://noda-time.googlecode.com)也没有处理这个问题 - 但我希望在某个时候取得进展:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T16:07:37.390

是的，这是不可能的，但它不是问题的解决方案。所以我所做的是试图为 arunlalam 找到解决方案:)

这是（更新：更正的时区-/+）：

```
 public static string[][] TimeZones = new string[][] {
        new string[] {"ACDT", "+1030", "Australian Central Daylight"},
        new string[] {"ACST", "+0930", "Australian Central Standard"},
        new string[] {"ADT", "-0300", "(US) Atlantic Daylight"},
        new string[] {"AEDT", "+1100", "Australian East Daylight"},
        new string[] {"AEST", "+1000", "Australian East Standard"},
        new string[] {"AHDT", "-0900", ""},
        new string[] {"AHST", "-1000", ""},
        new string[] {"AST", "-0400", "(US) Atlantic Standard"},
        new string[] {"AT", "-0200", "Azores"},
        new string[] {"AWDT", "+0900", "Australian West Daylight"},
        new string[] {"AWST", "+0800", "Australian West Standard"},
        new string[] {"BAT", "+0300", "Bhagdad"},
        new string[] {"BDST", "+0200", "British Double Summer"},
        new string[] {"BET", "-1100", "Bering Standard"},
        new string[] {"BST", "-0300", "Brazil Standard"},
        new string[] {"BT", "+0300", "Baghdad"},
        new string[] {"BZT2", "-0300", "Brazil Zone 2"},
        new string[] {"CADT", "+1030", "Central Australian Daylight"},
        new string[] {"CAST", "+0930", "Central Australian Standard"},
        new string[] {"CAT", "-1000", "Central Alaska"},
        new string[] {"CCT", "+0800", "China Coast"},
        new string[] {"CDT", "-0500", "(US) Central Daylight"},
        new string[] {"CED", "+0200", "Central European Daylight"},
        new string[] {"CET", "+0100", "Central European"},
        new string[] {"CST", "-0600", "(US) Central Standard"},
        new string[] {"EAST", "+1000", "Eastern Australian Standard"},
        new string[] {"EDT", "-0400", "(US) Eastern Daylight"},
        new string[] {"EED", "+0300", "Eastern European Daylight"},
        new string[] {"EET", "+0200", "Eastern Europe"},
        new string[] {"EEST", "+0300", "Eastern Europe Summer"},
        new string[] {"EST", "-0500", "(US) Eastern Standard"},
        new string[] {"FST", "+0200", "French Summer"},
        new string[] {"FWT", "+0100", "French Winter"},
        new string[] {"GMT", "-0000", "Greenwich Mean"},
        new string[] {"GST", "+1000", "Guam Standard"},
        new string[] {"HDT", "-0900", "Hawaii Daylight"},
        new string[] {"HST", "-1000", "Hawaii Standard"},
        new string[] {"IDLE", "+1200", "Internation Date Line East"},
        new string[] {"IDLW", "-1200", "Internation Date Line West"},
        new string[] {"IST", "+0530", "Indian Standard"},
        new string[] {"IT", "+0330", "Iran"},
        new string[] {"JST", "+0900", "Japan Standard"},
        new string[] {"JT", "+0700", "Java"},
        new string[] {"MDT", "-0600", "(US) Mountain Daylight"},
        new string[] {"MED", "+0200", "Middle European Daylight"},
        new string[] {"MET", "+0100", "Middle European"},
        new string[] {"MEST", "+0200", "Middle European Summer"},
        new string[] {"MEWT", "+0100", "Middle European Winter"},
        new string[] {"MST", "-0700", "(US) Mountain Standard"},
        new string[] {"MT", "+0800", "Moluccas"},
        new string[] {"NDT", "-0230", "Newfoundland Daylight"},
        new string[] {"NFT", "-0330", "Newfoundland"},
        new string[] {"NT", "-1100", "Nome"},
        new string[] {"NST", "+0630", "North Sumatra"},
        new string[] {"NZ", "+1100", "New Zealand "},
        new string[] {"NZST", "+1200", "New Zealand Standard"},
        new string[] {"NZDT", "+1300", "New Zealand Daylight"},
        new string[] {"NZT", "+1200", "New Zealand"},
        new string[] {"PDT", "-0700", "(US) Pacific Daylight"},
        new string[] {"PST", "-0800", "(US) Pacific Standard"},
        new string[] {"ROK", "+0900", "Republic of Korea"},
        new string[] {"SAD", "+1000", "South Australia Daylight"},
        new string[] {"SAST", "+0900", "South Australia Standard"},
        new string[] {"SAT", "+0900", "South Australia Standard"},
        new string[] {"SDT", "+1000", "South Australia Daylight"},
        new string[] {"SST", "+0200", "Swedish Summer"},
        new string[] {"SWT", "+0100", "Swedish Winter"},
        new string[] {"USZ3", "+0400", "USSR Zone 3"},
        new string[] {"USZ4", "+0500", "USSR Zone 4"},
        new string[] {"USZ5", "+0600", "USSR Zone 5"},
        new string[] {"USZ6", "+0700", "USSR Zone 6"},
        new string[] {"UT", "-0000", "Universal Coordinated"},
        new string[] {"UTC", "-0000", "Universal Coordinated"},
        new string[] {"UZ10", "+1100", "USSR Zone 10"},
        new string[] {"WAT", "-0100", "West Africa"},
        new string[] {"WET", "-0000", "West European"},
        new string[] {"WST", "+0800", "West Australian Standard"},
        new string[] {"YDT", "-0800", "Yukon Daylight"},
        new string[] {"YST", "-0900", "Yukon Standard"},
        new string[] {"ZP4", "+0400", "USSR Zone 3"},
        new string[] {"ZP5", "+0500", "USSR Zone 4"},
        new string[] {"ZP6", "+0600", "USSR Zone 5"}
        }; 
```

以及返回可解析偏移量的函数：

```
public static string TimeZoneToOffset(string tz)
    {
        tz = tz.ToUpper().Trim();
        for (int i = 0 ; i < TimeZones.Length ; i++)
        {
            if (((string)((string[])TimeZones.GetValue(i)).GetValue(0)) == tz)
            {
                return ((string)((string[])TimeZones.GetValue(i)).GetValue(1));
            }
        }
        return System.TimeZone.CurrentTimeZone.GetUtcOffset(DateTime.Now).ToString()
        .Replace(":", "").Substring(0, 5);
    } 
```

在这里找到：http: [//bytes.com/topic/c-sharp/answers/214648-how-do-i-parse-date-w-time-zone](http://bytes.com/topic/c-sharp/answers/214648-how-do-i-parse-date-w-time-zone)

希望它有效:)祝你有美好的一天

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T15:45:40.307

`PST`不是 .NET 框架的可解析时区 - 时区格式说明符需要一个数字偏移量，例如`-0800`.

解决此问题的一种方法是在尝试解析之前将每个时区转换为其数字表示。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-14T15:48:28.487

您可以用偏移量替换时区部分：

```
string DateString = "Fri, 14 Dec 2012 6:52 am PST";
DateTime dt;
bool parsable = DateTime.TryParseExact(
    DateString.Replace("PST", "+2")
    , "ddd, dd MMM yyyy h:mm tt z"
    , CultureInfo.InvariantCulture
    , DateTimeStyles.None
    , out dt); 
```

[**演示**](http://ideone.com/rLN1d0)

# spring - Grails：使用 config.groovy 中定义的值初始化静态变量

> ID：13881821
> 
> 赞同：6
> 
> 时间：2012-12-14T15:43:06.240
> 
> 标签：spring, grails, groovy, static, code-injection

如何使用中`static`定义的值初始化变量`config.groovy`？

目前我有这样的事情：

```
class ApiService {
    JSON get(String path) {
        def http = new HTTPBuilder("${grailsApplication.config.grails.api.server.url}")
        ...
    }
    JSON get(String path, String token) {
        def http = new HTTPBuilder("${grailsApplication.config.grails.api.server.url}")
        ...
    }
    ...
    JSON post(String path, String token) {
        def http = new HTTPBuilder("${grailsApplication.config.grails.api.server.url}")
        ...
    }
} 
```

我不想`http`在每个方法（几个 GET、POST、PUT 和 DELETE）中定义变量。

我想将`http`变量作为`static`服务中的变量。

我试过这个没有成功：

```
class ApiService {

    static grailsApplication
    static http = new HTTPBuilder("${grailsApplication.config.grails.api.server.url}")

    JSON get(String path) {
        http.get(...)
        ...
    }
} 
```

我明白了`Cannot get property 'config' on null object`。与以下相同：

```
class ApiService {

    def grailsApplication
    static http

    ApiService() {
        super()
        http = new HTTPBuilder("${grailsApplication.config.grails.api.server.url}")
    }

    JSON get(String path) {
        http.get(...)
        ...
    }
} 
```

我也试过没有`static`定义，但同样的错误`Cannot get property 'config' on null object`：

```
class ApiService {

    def grailsApplication
    def http

    ApiService() {
        super()
        http = new HTTPBuilder("${grailsApplication.config.grails.api.server.url}")
    }
} 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-14T16:02:35.453

使用实例属性而不是静态属性（因为服务 bean 是单例范围的）。您无法在构造函数中进行初始化，因为尚未注入依赖项，但您可以使用 annotated 方法`@PostConstruct`，该方法将在依赖项注入后由框架调用。

```
import javax.annotation.PostConstruct

class ApiService {
  def grailsApplication
  HTTPBuilder http

  @PostConstruct
  void init() {
    http = new HTTPBuilder(grailsApplication.config.grails.api.server.url)
  }

  // other methods as before
} 
```

# java - 使用具有应用配置文件的 EMF 加载 UML 状态图模型

> ID：13881825
> 
> 赞同：3
> 
> 时间：2012-12-14T15:43:12.050
> 
> 标签：java, eclipse, profile, eclipse-emf

我正在尝试通过 eclipse MDT/UML2 实现加载存储为 XMI 的 UML 模型。

它是一个状态图模型，它附加了一个概要文件，并将一个原型添加到此概要文件中，用于对具有优先级的转换进行建模。

使用 eclipse EMF 框架加载 *.uml 文件很好。

我现在想用一个独立的 java 项目加载这个 *.uml 文件。我想使用应用的刻板印象访问模型的所有元素。

我可以得到一切，但不是刻板印象。我确定它们没有从 *.uml 文件中加载。

我使用的代码：

```
URI uri = URI.createURI("model.uml");

ResourceSet set = new ResourceSetImpl();

set.getPackageRegistry().put(UMLPackage.eNS_URI, UMLPackage.eINSTANCE);

set.getResourceFactoryRegistry().getExtensionToFactoryMap().put(UMLResource.FILE_EXTENSION, UMLResource.Factory.INSTANCE);

set.createResource(uri);

Resource r = set.getResource(uri, true);

Model model = (Model) EcoreUtil.getObjectByType(r.getContents(), UMLPackage.Literals.MODEL); 
```

我现在可以访问模型通过`model.allOwnedElements()`. 我在 *.uml 文件中找到了与实际模型一起存储的 Profile，但 Stereotypes 未附加到模型中的元素。

我想我错过了一些必须通过`getPackageRegistry() and getResourceFactoryRegistry()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:24:35.393

您应该改用插件项目。

# javascript - javascript 日期对象丢失了它的类型

> ID：13881826
> 
> 赞同：0
> 
> 时间：2012-12-14T15:43:12.850
> 
> 标签：javascript

对于以下代码，

```
$(function() {
    a = new Date("2008-1-2");

    monthDiff = function(now, then) {
        var months;
        months = (now.getFullYear() - then.getFullYear()) * 12;
        months -= then.getMonth() + 1;
        months += now.getMonth();
        return months;
    };

    intervalToDate = function(interval, start, unit) {
        {
            return {
                day: function() {return new Date(start.getTime() + (interval*24*60*60*1000)); },
                week: function() {return new Date(start.getTime() + (interval*7*24*60*60*1000)); },
                month: function() {
                    // the result value below will not return a date object when running (only an object), what is weird is in the debug console, using the line below will totally return a date object.
                    var result = new Date(start.getTime() + interval*4*7*24*60*60*1000);
                    while (monthDiff(result, start) !== interval) {
                        result += 24*60*60*1000;
                    }
                    return result;
                } ,
                year: function() {
                    return start.getFullYear() + interval;
                }
            }[unit]();
        }
    };

    console.log(intervalToDate(20, a, "day"));
    console.log(intervalToDate(20, a, "week"));
    console.log(intervalToDate(20, a, "month"));
    console.log(intervalToDate(20, a, "year"));
}) 
```

这一行：

```
month: function() {
                        // the result value below will not return a date object when running (only an object), what is weird is in the debug console, using the line below will totally return a date object.
                        var result = new Date(start.getTime() + interval*4*7*24*60*60*1000); 
```

结果将在调试控制台中正确返回。但是在运行时，不知何故它不再是一个日期对象，所以当我尝试对其调用 getFullYear 函数时遇到了“无方法错误”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:51:49.233

您正在向日期对象添加整数值`result += 24*60*60*1000;`，您必须使用日期方法来添加时间，而不仅仅是进行简单的添加。

例子 ：

```
result.setMilliseconds(result.getMilliseconds() + (24*60*60*1000)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:00:18.633

怎么样...之类的

```
while (monthDiff(result, start) !== interval) {
    result = new Date(result.getTime() + 24*60*60*1000);
} 
```

# javascript - Backbone：创建模型并将来自服务器的 id 放入成功

> ID：13881829
> 
> 赞同：0
> 
> 时间：2012-12-14T15:43:29.273
> 
> 标签：javascript, backbone.js

试图获取已保存模型的 id

```
 var newBookmark = bookmarks.create(values,{
        success:function(){
            console.log('Successfuly saved')
            console.log(idOfThisModel) //need id from the server here
            this.close()
        },
        error: function(){console.log('error, didnt save')},
    }) 
```

如何将模型的 id 放入成功方法中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:46:52.737

您需要将其作为函数参数传递：

```
success:function( idOfThisModel ){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:47:23.653

来自 Backbone.js`fetch` [文档](http://backbonejs.org/#Model-fetch)

> 接受选项哈希中的成功和错误回调，它们分别作为参数传递 (model, response, options) 和 (model, xhr, options)。

所以你只需要使用传递给你的回调的参数

```
success: function(model, resp, opts) {
  var id = model[whateverYourIdAttributeIs];
  // ... etc
} 
```

# android - 如何使用foursquare从Android上传图片？

> ID：13881831
> 
> 赞同：1
> 
> 时间：2012-12-14T15:43:34.233
> 
> 标签：android, http-post, foursquare, image-upload

我知道如何处理foursquare API [https://developer.foursquare.com/docs/photos/add](https://developer.foursquare.com/docs/photos/add)

我试过这个：[使用 Http Post 发送图像](https://stackoverflow.com/questions/2935946/sending-images-using-http-post)

这是我的代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAMERA_PIC_REQUEST) {
        if (resultCode == RESULT_OK) {
            Uri imageUri = data.getData();
            List<NameValuePair> params = new ArrayList<NameValuePair>(4);
            Intent intent = getIntent();
            String message = intent.getStringExtra(SignIn.EXTRA_MESSAGE);
            params.add(new BasicNameValuePair("venueId", message));
            params.add(new BasicNameValuePair("image", imageUri.getPath()));
            Log.d("myresponse", imageUri.getPath());
            params.add(new BasicNameValuePair("oauth_token",
                    [myoauthtoken]));
            params.add(new BasicNameValuePair("v", "20121210"));
            post("https://api.foursquare.com/v2/photos/add", params);
        } 
    }
} 
```

但是我得到了这个堆栈跟踪的异常：

```
12-14 18:43:25.685: E/AndroidRuntime(15445): FATAL EXCEPTION: main
12-14 18:43:25.685: E/AndroidRuntime(15445): java.lang.RuntimeException: Unable to resume activity {com.example.hobba/com.example.hobba.VenueCreated}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1337, result=-1, data=Intent { act=inline-data dat=content://media/external/images/media/10392 (has extras) }} to activity {com.example.hobba/com.example.hobba.VenueCreated}: android.os.NetworkOnMainThreadException
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2616)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2644)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2130)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3553)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.app.ActivityThread.access$700(ActivityThread.java:140)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1233)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.os.Looper.loop(Looper.java:137)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.app.ActivityThread.main(ActivityThread.java:4898)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at java.lang.reflect.Method.invokeNative(Native Method)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at java.lang.reflect.Method.invoke(Method.java:511)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at dalvik.system.NativeStart.main(Native Method)
12-14 18:43:25.685: E/AndroidRuntime(15445): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1337, result=-1, data=Intent { act=inline-data dat=content://media/external/images/media/10392 (has extras) }} to activity {com.example.hobba/com.example.hobba.VenueCreated}: android.os.NetworkOnMainThreadException
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3182)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2603)
12-14 18:43:25.685: E/AndroidRuntime(15445):    ... 13 more
12-14 18:43:25.685: E/AndroidRuntime(15445): Caused by: android.os.NetworkOnMainThreadException
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:509)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at com.example.hobba.VenueCreated.post(VenueCreated.java:152)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at com.example.hobba.VenueCreated.onActivityResult(VenueCreated.java:66)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.app.Activity.dispatchActivityResult(Activity.java:5368)
12-14 18:43:25.685: E/AndroidRuntime(15445):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3178)
12-14 18:43:25.685: E/AndroidRuntime(15445):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:51:25.897

您正在尝试在 UI 线程上发出 HTTP 请求。例外是`NetworkOnMainThreadException`，这意味着您应该在后台线程中进行工作。

为了进行上传，我建议使用[IntentService 之](http://developer.android.com/reference/android/app/IntentService.html)类的东西来进行 HTTP 发布。除了[文档](http://developer.android.com/guide/components/processes-and-threads.html#Threads)之外，您还可以查看我的一个[示例应用程序](https://github.com/wsanville/RotationDemo)，它突出显示了在 UI 线程之外完成工作的不同方法。

# html-table - 更改表格高度后保持固定表格行高

> ID：13881832
> 
> 赞同：1
> 
> 时间：2012-12-14T15:43:38.510
> 
> 标签：html-table, row, internet-explorer-7

我有一个没有定义高度的表格，里面有三个表格行。例子：

```
<table>
 <tr height="20px"> <td> &nbsp; </td> </tr>
 <tr height="1px"> <td> content with unknown height </td> </tr>
 <tr> <td> &nbsp; </td> </tr>
</table> 
```

我希望第一行具有固定的 20px 高度，第二行扩展到其内容的高度，第三行填充剩余空间。

当我在 Javascript 中更改表格的高度时，我想保留该布局（20px - 内容高度 - 剩余空间），但在 IE7（可能是 6）中，行被调用以保持初始比例。

例子：

如果我有一个包含 60px 内容的初始 100px 表：

第 1 行 - 20 像素

第 2 行 - 60 像素

第 3 行 - 20 像素

并将其高度更改为 200px，我会得到：

*   除 IE6/7 以外的任何浏览器/版本：

第 1 行 - 20 像素

第 2 行 - 60 像素

第 3 行 - 120 像素

*   即 6/7：

第 1 行 - 40 像素

第 2 行 - 120 像素

第 3 行 - 40 像素

我可以做任何事情来修复（在 IE7 中）行的高度，并让第三个填充剩余空间，保持其他 2 个固定。

# angularjs - 绑定角度交叉 iframe，可能吗？

> ID：13881834
> 
> 赞同：9
> 
> 时间：2012-12-14T15:43:43.083
> 
> 标签：angularjs

有什么方法可以绑定/共享相同的范围/控制器/指令并将内容放入同一域中的另一个 iframe 中？

如果我也可以在另一个 iframe 中拥有相同的 ngApp，那就太酷了。有没有人做过这样的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-23T20:13:26.110

是的，这是可能的，你不需要做任何特别的事情，你只需要编译内容。

这是一个例子：http: **[//jsfiddle.net/gWgYM/](http://jsfiddle.net/gWgYM/)**

**HTML：**

```
<div ng-app="app" ng-controller="test">
    <h1>The date is {{date}}</h1>
    <iframe frame=""></iframe>
</div> 
```

**Javascript：**

```
var app = angular.module('app', []);

app.controller('test', function( $scope ) {
    $scope.date = new Date();
    window.setInterval(function() {
        $scope.date = new Date();
        $scope.$apply();
    }, 1000);
});

app.directive('frame', function( $compile ) {
    return function( $scope, $element ) {
        var $body = angular.element($element[0].contentDocument.body),
            template  = $compile('<p>The date in the iframe is {{date}}</p>')($scope);
        $body.append(template);
    };
}); 
```

# javascript - 在javascript中的特定字符串点插入char的最佳方法？

> ID：13881836
> 
> 赞同：1
> 
> 时间：2012-12-14T15:43:48.513
> 
> 标签：javascript

如果我有以下字符串

```
"[Blah][Something.][Where.]" 
```

找到“][”所在位置并在它们之间添加“+”的最佳方法是什么？

换句话说，生成的字符串应该是：

```
"[Blah] + [Something.] + [Where.]" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:45:53.550

使用正则表达式...

```
var str = "[Blah][Something.][Where.]"
var newString = str.replace(/\]\[/g, ']+['); 
```

[相关的jsFiddle](http://jsfiddle.net/RRPfM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:45:58.433

我会使用[split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)和[join](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)。

```
var string = "[Blah][Something.][Where.]".split("][").join("] + ["); 
```

[http://jsfiddle.net/tDFh3/4/](http://jsfiddle.net/tDFh3/4/)

如果它不是一个常量字符串，我会回退到正则表达式并[替换](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T15:45:44.847

使用正则表达式查找 ][ 然后添加 +

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:46:04.690

正则表达式呢：

*   搜索`\]\[`
*   替换为`] + [`

[演示](http://regexr.com?334un)

# jquery - 在“字体大小”动画之后动画到 textWidth

> ID：13881844
> 
> 赞同：1
> 
> 时间：2012-12-14T15:44:19.207
> 
> 标签：jquery, css, jquery-animate

我正在使用我在另一个[线程](https://stackoverflow.com/questions/1582534/calculating-text-width-with-jquery)中找到的一个小函数，它可以计算出 div 中文本的宽度，这很好用。我也可以为给定的宽度设置动画，但是当我在为字体大小设置动画后尝试为宽度设置动画时，我遇到了问题。

我已经发现它将新宽度设置为调整字体大小之前的宽度，但无法弄清楚如何在一个平滑的回调中全部工作。

请参阅下面的基本小提琴，您可以在其中分别运行 increaseFont 和 increaseWidth 并获得正确的结果。但是同时运行两者并不起作用。请`reset`在每次测试之间按。

[http://jsfiddle.net/b9uQp/](http://jsfiddle.net/b9uQp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:06:45.590

由于一切都是异步发生的，因此`$('.text').textWidth()`在动画执行期间不会返回实际大小。尝试“完成”选项并使用回调函数解决问题：http: [//docs.jquery.com/Effects/animate#toptions](http://docs.jquery.com/Effects/animate#toptions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:53:31.477

我所做的几乎就是在您的函数中添加了一个参数以获取字体大小。并计算它的宽度。

```
$.fn.textWidth = function(fontSize){
  var html_org = $(this).html();
    var html_calc = '<span style="font-size:'+fontSize+'">' + html_org + '</span>';
  $(this).html(html_calc);
  var width = $(this).find('span:first').width();
  $(this).html(html_org);
  return width;
}; 
```

在这里你会看到你的 jsfiddle 更新了：

[http://jsfiddle.net/Morlock0821/b9uQp/5/](http://jsfiddle.net/Morlock0821/b9uQp/5/)

# java - 带有 JNLP 小程序的 Plone CMS

> ID：13881845
> 
> 赞同：1
> 
> 时间：2012-12-14T15:44:28.340
> 
> 标签：java, python, applet, plone, jnlp

我需要在 Plone 应用程序中运行一个小程序。我开发了在我的本地主机上的测试 html 页面中运行良好的小程序，但由于我是 Plone/python/zope noob（此处为 java 开发人员），我找不到解决方案。有人可以帮忙吗？

这是我正在使用的代码。

我在文件夹“browser”下创建了一个名为“java”的文件夹，与“resource”处于同一级别；我在 /browser/configure.zcml 文件中注册了这个新文件夹，如下所示：

```
<browser:resourceDirectory
    name="java"
    directory="java"/> 
```

我把我所有的小程序文件放在那个文件夹中（jar 本身、jnlp、所需的库）。如果我在 Firefox 地址栏中输入这个

```
http://localhost:8091/Scia/++resource++java/GestioneOneri.jar 
```

我可以成功下载jar文件，所以它已经正确注册，我可以访问它了。

小程序需要一个参数（当前登录的用户），所以我将值传递给变量“user”。

我的 page.pt 文件：

```
<script tal:define="utenteplone request/AUTHENTICATED_USER" tal:content="string:var user='${utenteplone/getId}'"></script>
<script>
  var attributes = {code:'geotel.gui.Login.class', archive:'portal_url/++resource++java/GestioneOneri.jar, portal_url/++resource++java/mysql-connector-java-5.1.20-bin.jar, portal_url/++resource++java/poi-3.8-20120326.jar, portal_url/++resource++java/forms-1.3.0.jar', width:1024, height:700};
  var parameters = {jnlp_href:'portal_url/++resource++java/gestioneoneri.jnlp', nomeUtente:user};
  var version = '1.6';
  deployJava.runApplet(attributes, parameters, version);
</script>
<noscript>
  No java plugin!
</noscript> 
```

我的jnlp：

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp href="gestioneoneri.jnlp">
 <information>
   <title>Gestione Oneri Urbanistici</title>
   <vendor>Geotel soc. coop.</vendor>
   <offline-allowed />
 </information>
 <resources>
   <j2se version ="1.6+" initial-heap-size="1000m" max-heap-size="1500m"
  href="http://java.sun.com/products/autodl/j2se" />
   <jar href="portal_url/++resource++java/GestioneOneri.jar" main="true" />
   <jar href="portal_url/++resource++java/mysql-connector-java-5.1.20-bin.jar"/>
   <jar href="portal_url/++resource++java/poi-3.8-20120326.jar"/>
   <jar href="portal_url/++resource++java/forms-1.3.0.jar"/>  
 </resources>
 <applet-desc
     name="Gestione Oneri Urbanistici"
     main-class="geotel.gui.Login"
     width="1024"
     height="700"/>
 </jnlp> 
```

Firefox给我的错误如下：

```
ExitException[ 3]com.sun.deploy.net.FailedDownloadException: Impossibile caricare la risorsa: http://localhost:8091/Scia/sportello-unico-edilizia/archivio-pratiche-edilizie/permesso_di_costruire.2012-10-24.5148962026/portal_url/++resource++java/portal_url/++resource++java/GestioneOneri.jar
at sun.plugin2.applet.JNLP2Manager.downloadResources(Unknown Source)
at sun.plugin2.applet.JNLP2Manager.prepareLaunchFile(Unknown Source)
at sun.plugin2.applet.JNLP2Manager.loadJarFiles(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

路径全错了：应该是

```
http://localhost:8091/Scia/++resource++java/GestioneOneri.jar 
```

但我不知道在哪里进行任何类型的更正（以及使用什么更正）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:16:45.210

```
jnlp_href:'portal_url/++resource++java/gestioneoneri.jnlp' 
```

和...一起：

```
<jnlp href="gestioneoneri.jnlp"> 
```

（没有代码库的 JNLP 元素）..将确保代码库默认为：

```
portal_url/++resource++java/ 
```

所以：

```
<jar href="portal_url/++resource++java/GestioneOneri.jar" main="true" /> 
```

应该：

```
<jar href="GestioneOneri.jar" main="true" /> 
```

（ETC。）

# youtube-api - You Tube API：订购播放列表

> ID：13881848
> 
> 赞同：1
> 
> 时间：2012-12-14T15:44:36.107
> 
> 标签：youtube-api

You Tube API 是否返回任何允许您控制播放列表显示顺序的值？我知道您可以控制视频在单个播放列表中的显示顺序，但是可以控制播放列表本身的顺序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:40:13.280

基本测试似乎表明播放列表提要（无论是搜索、用户列表集合等）根本不喜欢 'orderby' 参数，所以除非有其他人可以使用的其他未记录功能评论一下，API 提要本身不能进行任何排序。

但是，根据您的客户，用您选择的语言进行订购应该非常简单；例如，在 Python gdata 客户端（使用 APIv3）中，播放列表作为“项目”列表返回，因此任何列表函数都可以在其上工作，包括自定义排序函数。如果您指出您正在使用的语言，那么有人可能会帮助您找出一个简单的排序功能。

# regex - 使用 vb.net 的此源的适当正则表达式？

> ID：13881851
> 
> 赞同：1
> 
> 时间：2012-12-14T15:44:56.023
> 
> 标签：regex, vb.net

在这里帮助一个新手。我正在尝试检查论坛帖子中的重复内容。到目前为止，我已经使用 webclient 下载了源代码并尝试了 Regex 和 mshtml，但没有任何运气。我得到了带有 mshtml 的线条，但不是我想要的方式，这意味着我无法分离各个评论。我试图阅读的来源如下：

```
<p>
    Hey Alton!</p>
<p>
    I am facing this problem also but i have search on the internet for the solution. There are few things that we need to do to solve this problem.</p>
<p>
    First of all make sure that you have latest drivers for you Graphics Card.</p> 
```

到目前为止我尝试过的代码

正则表达式：

```
 Dim r As New System.Text.RegularExpressions.Regex("<p> .* </p>")
    Dim matches As MatchCollection = r.Matches(result)
    For Each itemcode As Match In matches
        ListBox1.Items.Add(itemcode.ToString)
    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:56:53.587

```
Dim regexObj As New Regex("<p>(.+?)</p>", RegexOptions.Singleline)
Dim matchResults As Match = regexObj.Match(subjectString)
While matchResults.Success

matchResults = matchResults.NextMatch()
End While 
```

# c++ - Change behaviour of class according to the type of object it is given

> ID：13881852
> 
> 赞同：3
> 
> 时间：2012-12-14T15:45:05.833
> 
> 标签：c++, templates

I want to design a general C++ class that defines an `operator()` function that returns the value of a mathematical function at a point. However, I want that class to be able to be instantiated with either an object that already has the `operator()` defined or with a table of values that the class will interpolate to give the value. I thought about the following approach:

```
class MathFunction
{
    MathFunction(Functor& function);
    MathFunction(Mat<double> interpolationValues);

    double operator()(double radius, double angle);
}; 
```

where the constructors could set a member variable and `double operator()` could use a switch statement to determine how to output the `double` I want. This seems awfully inelegant, though.

A templated version of this class could be of use, but since the two methods don't share any code, would it be wise to do it? And how exactly would the templated version be designed?

Not sure if I'm clear. Please comment if any clarifications are needed.

EDIT: Although I chose Useless's answer for its completeness, I want to underline the speed and clarity of dasblikenlight's contribution. Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T15:49:59.080

This is a prime case for using the [*strategy pattern*](http://en.wikipedia.org/wiki/Strategy_pattern): depending on the parameters passed to the constructor, `MathFunction` should instantiate either a strategy object relying on a `Functor`, or a strategy object relying on a list of interpolated values. The call of `operator ()` should then forward the call to the strategy, and get the result through an implementation of a common virtual function:

```
class MathFunction {
    struct Strategy {
        virtual double Calculate(double radius, double angle)=0;
        virtual ~Strategy(){}
    };
    class FunctorStrategy : public Strategy {
        Functor& _function;
    public:
        FunctorStrategy(Functor& function)  : _function(function) {}
        virtual double Calculate(double radius, double angle) {
            return _function(radius, angle);
        }
    }
    class InterpolationStrategy : public Strategy {
        Mat<double> _interpolationValues;
    public:
        InterpolationStrategy (Mat<double> interpolationValues) 
        : _interpolationValues(interpolationValues) {}
        virtual double Calculate(double radius, double angle) {
            return ...; // Use _interpolationValues to do calculation
        }
    };
    unique_ptr<Strategy> _strategy;
public:
    MathFunction(Functor& function)
    : _strategy(new FunctorStrategy(function)) {}
    MathFunction(Mat<double> interpolationValues)
    : _strategy(new InterpolationStrategy(interpolationValues)) {}
    // And now for the complicated part:
    double operator()(double radius, double angle) {
        return _strategy->Calculate(radius, angle); // TA-DA!!!
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:49:02.047

> but since the two methods don't share any code, would it be wise to do it?

If the way to generate the output through operator() is not synergetic through both the mechanisms, I think, it is not such a good idea to put them in one class. I would say that this violates the Single Responsibility Principle a.k.a [SRP](http://www.oodesign.com/single-responsibility-principle.html).

Instead, try to use the [Strategy Design Pattern](http://www.oodesign.com/strategy-pattern.html) to distribute the functionality into two separate strategy classes. Your class can then be templated on the Strategy

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T16:02:49.643

If `MathFunction` doesn't have any common implementation, what is it for?

If its purpose is to provide a common interface to two implementations, consider where you'll use it:

1.  in non-templated (or non-dependent) code, where the implementation type could reasonably vary at runtime
2.  in templated code which could reasonably depend on the type of `MathFunction`, or in code which will always statically know which type it's using

* * *

In case 1, using something like the strategy pattern is reasonable. Either `MathFunction` can be a statically-typed wrapper dispatching to a virtual Strategy, or you can write an abstract MathFunction base class, and instantiate one of two concrete subclasses.

*dasblinkenlight* already demonstrated the Strategy version, so here is the ABC equivalent (notice how it can use a factory function to hide the implementation details)

```
// public header
class MathFunction {
public:
    virtual ~MathFunction() {}
    virtual double operator() (double radius, double angle) = 0;
};

MathFunction* make_function(Functor& function);
MathFunction* make_function(Mat<double> interpolationValues);

// implementation
class FunctorMathFunction : public MathFunction {
    Functor& _function;
public:
    FunctorMathFunction(Functor& function) : _function(function) {}
    virtual double operator() (double radius, double angle) {
        return _function(radius, angle);
    }
};
class TableMathFunction : public MathFunction {
    Mat<double> _interpolationValues;
public:
    TableMathFunction (Mat<double> interpolationValues) 
    : _interpolationValues(interpolationValues) {}
    virtual double operator() (double radius, double angle) {
        return ...; // Use _interpolationValues to do calculation
    }
};

MathFunction* make_function(Functor& function) {
    return new FunctorMathFunction(function);
}
MathFunction* (Mat<double> interpolationValues) {
    return new TableMathFunction(interpolationValues);
} 
```

* * *

In case 2, templating `MathFunction` is a good choice: you can either (partially-) specialize it, or use the compile-time equivalent of the Strategy pattern, which is to parameterize MathFunction on a Policy class, to which it delegates the evaluation. If performance is a concern, saving the virtual function call (and enabling in-lining) may be useful.

```
template <typename EvaluationPolicy>
class MathFunction
{
    EvaluationPolicy eval;
public:
    MathFunction() {}
    MathFunction(EvaluationPolicy const &ep) : eval(ep) {}

    double operator() (double radius, double angle) {
        return eval.calc(radius, angle);
    }
};

class FunctionPolicy
{
    std::function<double(double,double)> func;
public:
    FunctionPolicy(std::function<double(double,double)> f) : func(f) {}
    double calc(double r, double a) { return func(r, a); }
};

class TablePolicy
{
    Mat<double> mat;
public:
    TablePolicy(Mat<double> values) : mat(values) {}
    double calc(double r, double a) { return ....; }
}; 
```

The benefit of using a Policy over just writing two distinct concrete classes (`FunctionMathFunction` and `TableMathFunction`) comes in showing their relationship, in sharing any code that *doesn't* depend on the policy, and in the ability to split unrelated concerns into separate policies.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T15:51:55.987

I'm not sure a templated version of your code is really an improvement of the design. The main issue - as you pointed out - is that you've got two completed different mechanisms at work here that are bunched together into a single class. One way to make it work with templates is that you essentially create two specialised templates with one being the specialisation for the case that takes a function and the other one taking the table. I'm not convinced this is the correct mechanism though.

Unless you can verify by profiling that you absolutely positively cannot stomach the overhead of a virtual function call here, I would go for runtime polymorphism instead of compile time polymorphism and turn your `MathFunction` class into an interface that provides a pure virtual `operator()`, then derive the two implementations from it with one handling the function case and the other one handling the table case.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T15:56:40.680

You could just use polymorphism here:

```
class MathFunction
{
private:

    class Impl
    {
    public:

       virtual ~Impl() {}
       virtual double compute(double radius, double angle) = 0;
    };

    class FunctorImpl : public Impl
    {
    public:

       explicit FunctorImpl(Functor & function);
       double compute(double radius, double angle);
    };

    class MatImpl : public Impl
    {
       public:

       explicit MatImpl( Mat<double> interpolationValues);
       double compute(double radius, double angle);
    };

    std::unique_ptr< Impl > impl;

public:

    MathFunction(Functor& function) : impl( new FunctorImpl( function ) ) {}
    MathFunction(Mat<double> interpolationValues) : impl( new MatImpl( interpolationValues ) ) {}

    double operator()(double radius, double angle)
    {
       return impl->compute( radius, angle );
    }
}; 
```

# c# - JIRA 问题密钥正则表达式

> ID：13881855
> 
> 赞同：0
> 
> 时间：2012-12-14T15:45:20.680
> 
> 标签：c#, regex

我想要一个正则表达式来匹配并从这句话中提取 BUG-123：

```
some junk here BUG-123 My bug description goes here 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:08:32.707

您可以使用`BUG-(\d+)`

所以它会是

```
List<string> bugNos=Regex.Matches(yourString,@"BUG-(\d+)",RegexOptions.IgnoreCase)
                       .Cast<Match>()
                       .Select(x=>x.Value).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:56:03.323

正则表达式如下。它将解析所有行。

```
(?m)BUG-([^ ]+) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T22:46:31.210

对于一个相关的 StackOverflow 问题（[JIRA 标识符](https://stackoverflow.com/questions/19322669/regular-expression-for-a-jira-identifier)的正则表达式），我从 Atlassian 自己（用于 Java）中找到了一个半官方的正则表达式，并将其移植到 JavaScript。

爪哇版：

```
((?<!([A-Za-z]{1,10})-?)[A-Z]+-\d+) 
```

JavaScript 版本（不过需要先反转所有内容）：

```
var jira_matcher = /\d+-[A-Z]+(?!-?[a-zA-Z]{1,10})/g 
```

更多细节在这里：

[https://stackoverflow.com/a/30518972/290254](https://stackoverflow.com/a/30518972/290254)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-30T16:04:30.790

我刚刚研究了为 jira 问题创建一个正则表达式并找到了这个条目。我找到了一些匹配的测试数据

```
VALID:
JIRA-1 BIN-10000 A-1 TACO-7133 X-88 BF-18 ABC-1 BINGO-1 BUG-123
NOT VALID:
JIRA-01 BIN-10000000 abc-123 ABCDEFGHIJKL-999 abc XY-Z-333 abcDEF-33
VALID no \s Ending
JIRA-1 
```

并提出（研究+原创作品）一个.net正则表达式，它应该匹配有效的而不匹配无效的：

```
(?<!([^\s]))([A-Z]{1,10}-[1-9][0-9]{0,6})(?=(\s|$)) 
```

[永久链接到操场](http://regexstorm.net/tester?p=%28%3f%3c!%28%5b%5e%5cs%5d%29%29%28%5bA-Z%5d%7b1%2c10%7d-%5b1-9%5d%5b0-9%5d%7b0%2c6%7d%29%28%3f%3d%28%5cs%7c%24%29%29&i=VALID%3a%0d%0aJIRA-1+BIN-10000+A-1+TACO-7133+X-88+BF-18+ABC-1+BINGO-1+BUG-123%0d%0aNOT+VALID%3a%0d%0aJIRA-01+BIN-10000000+abc-123+ABCDEFGHIJKL-999+abc+XY-Z-333+abcDEF-33%0d%0aVALID+no+%5cs+Ending%0d%0aJIRA-1)

值得一提的来源： [so-answer](https://stackoverflow.com/questions/19322669/regular-expression-for-a-jira-identifier/30518972#30518972) [atlassians regex](https://confluence.atlassian.com/stashkb/integrating-with-custom-jira-issue-key-313460921.html?_ga=2.19343932.522454812.1532963741-519237518.1520857350) [atlassioan forum](https://community.atlassian.com/t5/Bitbucket-questions/Regex-pattern-to-match-JIRA-issue-key/qaq-p/233319)

# java - 返回带有斜杠的日期的 Web 服务导致 Java Axis2 客户端失败

> ID：13881858
> 
> 赞同：0
> 
> 时间：2012-12-14T15:45:22.747
> 
> 标签：java, axis2, adb

有很多关于 Axis2 日期格式问题的讨论，但我找不到关于这个特定问题的任何信息。

我有一个合作伙伴的 WSDL，我在上面运行了 Axis2 的 wsdl2java 工具来创建 Java 代码。我没有指定 -d 选项，所以我相信数据绑定将是默认值 - ADB。

我在服务上调用一个方法，它返回包含以下格式的日期的 XML：

```
<ns1:thedate>2012/12/10 07:45:08.000 -0800</ns1:thedate> 
```

并收到以下错误：

```
Caused by: java.lang.RuntimeException: invalid date format (2012/12/10 07:45:08.000 -0800) with out - s at correct place 
at org.apache.axis2.databinding.utils.ConverterUtil.convertToDateTime(ConverterUtil.java:896) 
```

斜线是问题所在。创建我自己的转换器类不是一个选项，因为 org.apache.axis2.databinding.utils.ConverterUtil 的方法是静态的，因此不能被覆盖。当然我可以`adb.converterutil`为我的类设置系统属性，但 ConverterUtil 不会检查`isCustomClassPresent`convertToDateTime 方法。

我不确定我的选择是什么。有什么有用的想法吗？

谢谢，保罗

# android - 一个活动从服务中获取数据并将数据传输到另一个活动

> ID：13881859
> 
> 赞同：1
> 
> 时间：2012-12-14T15:45:23.260
> 
> 标签：android, android-listview, android-service

我创建了一个 gpsservice，一个带有两个按钮的主要活动和一个列表活动。我想在获取gps数据时获取gpsservie数据，所以我在主activity中创建了一个gps接收器来获取数据。当我单击主活动中的按钮时，它会转到列表活动。我想在单击按钮时使用 intent() 将获取的数据传输到列表活动。问题是当我单击按钮时，列表视图中没有显示任何内容。

GPS服务的关键代码：

```
LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            additem(location);
            addgeo(location);
            //String latLongString = "Lat:" + location.getLatitude() + "\nLong:" + location.getLongitude();
            Intent intent= new Intent("com.example.geotask.gpsdata");
            intent.putIntegerArrayListExtra("lat", (ArrayList<Integer>) lat);
            intent.putIntegerArrayListExtra("lon", (ArrayList<Integer>) lon);
            intent.putStringArrayListExtra("data", (ArrayList<String>) position);
            //intent.putExtra("data", latLongString);
            sendBroadcast(intent);    } 
```

主要活动代码：

```
public class MainActivity extends Activity {

    public  ArrayList<String> position1 = new ArrayList<String>(); 
    public  ArrayList<Long> time=new ArrayList<Long>();
    public  ArrayList<Integer> lat1= new ArrayList<Integer>(); 
    public  ArrayList<Integer> lon1= new ArrayList<Integer>(); 
    private BroadcastReceiver gpsreceiver;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        IntentFilter intentFilter=new IntentFilter("com.example.geotask.gpsdata");
        gpsreceiver=new BroadcastReceiver()
        {
            @Override 
            public void onReceive(Context context, Intent intent)
            {
             ArrayList<String> position1=intent.getStringArrayListExtra("data");
             ArrayList<Integer> lat1=intent.getIntegerArrayListExtra("lat");
            ArrayList<Integer> lon1=intent.getIntegerArrayListExtra("lon");
            }

        };
        this.registerReceiver(gpsreceiver, intentFilter);

        final Button listbutton=(Button) findViewById(R.id.button2);
        listbutton.setOnClickListener(new OnClickListener(){
            public void onClick(View v){
                Intent intent =new Intent();
                intent.setClass(MainActivity.this, list.class);
                intent.putStringArrayListExtra("data", (ArrayList<String>) position1);
                startActivity(intent);

            }
        });
        } 
```

列表活动：

```
public class list extends Activity{ 
    static ArrayList<listdetails> details = new ArrayList<listdetails>();
   // private BroadcastReceiver gpsreceiver;

    /** Called when the activity is first created. */ 
    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.list); 
        ListView listView; 
        listView = (ListView)findViewById(R.id.listView1);
        Intent intent=getIntent();
        List<String> ex=intent.getStringArrayListExtra("data");
        customlist Adapter = new customlist(details, this);
        listView.setAdapter(Adapter);
        listdetails Detail = new listdetails();
            for(int i=0;i<ex.size();i++)
            {
                Detail.setIcon(R.drawable.ic_launcher);
                Detail.setPlace(ex.get(i));
                Detail.setTime("2012.12.2");
                details.add(Detail);

            }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:58:58.253

您正在将变量复制到`onReceive()`. 这意味着一旦完成，`ArrayList`变量就会被销毁。`onReceive()`你`onReceive()`应该看起来像：

```
 @Override 
        public void onReceive(Context context, Intent intent)
        {
          position1=intent.getStringArrayListExtra("data");
          lat1=intent.getIntegerArrayListExtra("lat");
         lon1=intent.getIntegerArrayListExtra("lon");
        } 
```

这可确保您现在正在修改**全局**ArrayList。此外，您可能需要将全局 ArrayLists 声明为**final**，因为 Java 可能会将您`new BroadCastReceiver`视为匿名内部类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-28T11:34:59.867

**您可以启动服务并将其与活动绑定，并从服务中获取数据**

活动代码

```
import android.app.Activity;
import android.content.ComponentName;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.util.Log;
import android.view.View;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

import java.io.BufferedInputStream;
import java.io.ByteArrayOutputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;

/**
 * Created by dheeraj on 24/3/15.
 */
public class DownloadActivity extends Activity {
    private Handler handler;
    private ProgressBar progressBar;
    private TextView textView;
    private int k = -100;

    int status;
    private boolean run = true;

    MyServices myServices;

    private ServiceConnection serviceConnection = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName name, IBinder binder) {
            myServices = ((MyServices.MyLocalBinder) binder).getService();
            Log.i("", "");

            Thread thread =new Thread(new Runnable() {
                @Override
                public void run() {
                    while (run) {
                        try {
                            k = myServices.getData();
                        } catch (Exception e) {
                            Log.e("", "", e);
                            return;
                        }
                        try {
                            runOnUiThread(new Runnable() {
                                @Override
                                public void run() {
                                    textView.setText(String.valueOf(k));

                                }
                            });
                        } catch (Exception e) {
                            Log.e("", "", e);
                        }
                        try {
                            Thread.sleep(2000);
                        } catch (Exception e) {
                            Log.e("", "", e);
                            return;
                        }
                    }
                   Log.e("","");
                }
            });
            thread.setName("Activity Thread");
            thread.start();
        }

        @Override
        public void onServiceDisconnected(ComponentName name) {
            Log.i("", "");
            run = false;
        }
    };

    /**
     * Called when the activity is first created.
     */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.progress);
        textView = (TextView) findViewById(R.id.title);

        progressBar = (ProgressBar) findViewById(R.id.progressBar1);

        Intent intent = new Intent(getApplicationContext(), MyServices.class);
        startService(intent);
        bindService(intent, serviceConnection, 0);

    }

    @Override
    public void onDestroy() {
        unbindService(serviceConnection);
        super.onDestroy();
    }
} 
```

服务代码

```
import android.app.Service;
import android.content.Intent;
import android.os.Binder;
import android.os.Bundle;
import android.os.IBinder;
import android.os.Messenger;
import android.util.Log;
import android.view.View;
import android.widget.ProgressBar;

import java.io.BufferedInputStream;
import java.io.ByteArrayOutputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

/**
 * Created by dheeraj on 24/3/15.
 */
public class MyServices extends Service {

    private int data = 0;
    private MyRunnable myRunnable;

    public int getData(){
        return data;
    }

    private class MyRunnable implements Runnable{

        private boolean run = true;

        public void setRun(){
            run = false;
        }

        @Override
        public void run() {
            while(run){
                if(data > 100){
                    stopSelf();
                    return;
                }
                data = data + 5;

                try {
                    Thread.sleep(2000);
                }catch (Exception e){

                }
            }
        }
    }

    private final IBinder myBinder = new MyLocalBinder();

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return myBinder;
    }

    public class MyLocalBinder extends Binder {
        public MyServices getService() {
            return MyServices.this;
        }
    }

    public int onStartCommand(Intent intent, int flags, int startId) {
        myRunnable = new MyRunnable();
        Thread thread =new Thread(myRunnable);
        thread.setName("Service Thread");
        thread.start();
        return START_STICKY;
    }

    public void onDestroy() {
        if(myRunnable != null){
            myRunnable.setRun();
        }
        super.onDestroy();
    }

    } 
```

# java - java Scanner读取文件的奇怪行为

> ID：13881861
> 
> 赞同：9
> 
> 时间：2012-12-14T15:45:28.380
> 
> 标签：java

所以，我在使用 Scanner 类从文件中读取内容时遇到了一个有趣的问题。基本上，我试图从目录中读取解析应用程序生成的几个输出文件，以计算一些准确度指标。

基本上，我的代码只是遍历目录中的每个文件，然后用扫描仪打开它们以处理内容。出于某种原因，扫描仪没有读取一些文件（全部 UTF-8 编码）。即使文件不是空的，scanner.hasNextLine() 也会在第一次调用时返回 false（我打开调试器并观察到这一点）。我每次都直接使用文件对象初始化扫描仪（文件对象已成功创建）。IE：

```
 File file = new File(pathName);
    ...
    Scanner scanner = new Scanner(file); 
```

我尝试了几件事，最终能够通过以下方式初始化扫描仪来解决此问题：

```
 Scanner scanner = new Scanner(new FileInputStream(file)); 
```

虽然我很高兴解决了这个问题，但我仍然很好奇之前可能发生了什么导致这个问题。有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T16:06:31.367

根据 Java 6u23 中的 Scanner.java 源代码，检测到新行

```
private static final String LINE_SEPARATOR_PATTERN = 
                                       "\r\n|[\n\r???]";
private static final String LINE_PATTERN = ".*("+LINE_SEPARATOR_PATTERN+")|.+$"; 
```

因此，您可以检查是否可以将以下正则表达式与未读取的文件中的内容相匹配。

```
.*(\r\n|[\n\r???])|.+$ 
```

另外我会检查是否有一些异常引发。

**更新：** 这让我很好奇，我在寻找答案。似乎您的问题已经在这里提出并解决了： [Java Scanner(File) misbehaving, but Scanner(FIleInputStream) always works with the same file](https://stackoverflow.com/questions/9492520/java-scannerfile-misbehaving-but-scannerfileinputstream-always-works-with-t)

总而言之，它是关于不属于 ASCII 的字符，这些字符的行为会有所不同，具体取决于您是使用 File 还是 FileInputStream 初始化 Scanner。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:01:01.340

我会尝试检查您是否总是在阅读文件后关闭扫描仪。您是只调用 hasNextLine() 和 nextLine()，还是在该扫描仪上调用另一个 nextXXX() 方法？

# windows-7 - 制作文本文件所需的批处理文件帮助

> ID：13881863
> 
> 赞同：-2
> 
> 时间：2012-12-14T15:45:38.153
> 
> 标签：windows-7, batch-file, dos

我需要一个批处理文件来读取文本文件的内容并制作一个新的文本文件

**my_file.txt**

```
loc name="UAE"     place=DUBAI
loc name="US"      place=NY
loc name="INDIA"   place=DELHI 
```

我有一个带有位置名称和状态的文本文件，如下所示

**位置.txt**

```
US      NY
UAE     DUBAI
INDIA   DELHI 
```

这`location.txt`有很多行，上面只是一个例子。

请提供一个批处理脚本，它应该读取`location.txt`并制作一个文本文件，如`my_file.txt`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:56:27.407

```
for /f "tokens=1,2 delims= " %%a in (my_file.txt) do (
echo loc name=%%a place=%%b >>my_file_new.txt
) 
```

# java - 使用接口作为列表中的参数

> ID：13881877
> 
> 赞同：0
> 
> 时间：2012-12-14T15:46:16.963
> 
> 标签：java, object, interface

我的问题很简单。我正在尝试制作一个用于构建图表的构建器。图表数据将由对象填充，具体取决于我的程序员同事创建的程序因此，我使用了一个调用接口`ObjectInterface`来确保对象始终具有某些方法。

我的问题是，如果我想将这些对象（我不知道是哪种类型）添加到 ArrayList 中，是否可以像这样添加它们：

```
ArrayList<ObjectInterface> data = new ArrayList<ObjectInterface>();
ObjectType Test = new ObjectType("Test");
data.add(test); 
```

在本例中，ObjectType 是一个实现`ObjectInterface`

这合法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:48:43.117

If`ObjectType`是`ObjectInterface`then 的子类型（或实现）是合法的。你没有Java编译器吗？它会回答你所有的“这是合法的”类型的问题；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T15:47:29.073

是的，这是合法的。您可以将 的子类型（`ObjectInterface`例如 , ）添加`ObjectType`到`ArrayList<ObjectInterface>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T15:48:07.530

是的，你的例子很好。

此外，我认为这是一个非常好的设计。@duffymo 建议的进一步改进是`List`在左侧使用：

```
List<ObjectInterface> data = new ArrayList<ObjectInterface>(); 
```

这种方式`data`是根据抽象列表接口声明的，而不是根据具体列表实现来声明的。

# c# - 枚举具有关系的复杂结构的建议

> ID：13881881
> 
> 赞同：1
> 
> 时间：2012-12-14T15:46:29.713
> 
> 标签：c#, arrays

我想知道处理具有关系的复杂结构的最佳方法是什么？

我正在为我的项目实现一个星系生成算法，基本上我有简单的枚举

```
GalaxySize { Small, Medium, Large };
GalaxyAge { Young, Mature, Ancient}; 
StarTypes { Black = 1, White = 3, Yellow = 1, Red = 3 }; 
```

到目前为止，我正在生成受 GalaxySize 值限制的星星。然后我从 StarTypes 中随机获取一个类型并从该类型创建一个星。我想做的是在 StarTypes 和 GalaxyAge 之间建立关系。

这意味着（例如）在年轻的星系中，黄色和白色恒星的几率更高，而在古老的星系中，黑色和红色恒星的几率更高。

我在想的是让 StarType 有一个基本的机会“滚动”，然后根据 GalaxyAge 添加修饰符，这将导致特定星系年龄中更多更常见的恒星。

```
Example: weight (chance) of a white star in young galaxy is 3 base + 3 
from the "young" galaxy age modifier 
against the weight of a red star which has 3 base + 1 from the "young" modifier.

Resulting in:
White star type weight = (3 + 3 ) * rand.nextDouble() 
Red star type weight = (3 + 1) * rand.nextDouble() 
```

关于如何实现/表示此功能的任何建议，因为显然仅枚举是不够的？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:02:07.823

为什么不为你的星系创建一个类层次结构？

```
using System.Collections.Generic;

enum StarTypes { Black, White, Yellow, Red };

abstract class Galaxy {
    Dictionary<StarTypes, float> _baseProbabilities;
    protected Galaxy() {
        _baseProbabilities = new Dictionary<StarTypes, float>();
        _baseProbabilities[StarTypes.Black] = 1.0f;
        _baseProbabilities[StarTypes.White] = 3.0f;
    }
    public float GetStarProbability(StarTypes starType) {
        return _baseProbabilities[starType] + GetStarProbabilityModifier(starType);
    }
    protected abstract float GetStarProbabilityModifier(StarTypes starType);
}

class YoungGalaxy : Galaxy {
    protected override float GetStarProbabilityModifier(StarTypes starType) {
        switch (starType) {
        case StarTypes.White:
            return 3.0f;
        default:
            return 0;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:04:11.900

对，所以你想生成随机恒星，但要根据星系的年龄来加权？我假设您已将这些权重存储在某个地方。

所以：

年轻的银河。让我们假设：

1.  白星：40%几率
2.  黄色星星：40% 几率
3.  红星：10%几率
4.  黑星：10%几率

如果是这种情况，那么让我们构建一个列表并包含 4 个白色和黄色星以及 1 个红色和黑色星。

现在，对于每个星槽，让我们执行以下操作：

```
 var start=GetListOfStarsBasedOnGalaxyAge(galaxyAge);
    var starList=new List<StarTypes>();
    for(int starCount=0;starCount<starsInGalaxy,starCount++)
{
    var star=var stars.OrderBy(a => Guid.NewGuid()).First();
 starList.Add(star);
} 
```

基本上我们是按随机 Guid 排序，这是一种廉价但有效的 shuffle[方式](http://www.codinghorror.com/blog/2007/12/shuffling.html)。这将确保您的星级选择是随机的，但也使用了您想要的适当权重。你可能仍然会得到一个完全充满黑星的星系，但这极不可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:07:14.330

我不太了解算法，但你可以从这里开始：

```
sealed class Age
{
    public static readonly Young = new Size(3.0);
    public static readonly Mature = new Size(2.0);
    public static readonly Ancient = new Size(1.0);

    public double Weight
    {
        get;
        private set;
    }

    private Age(float weight)
    {
        Weight = weight;
    }
}

sealed class Size
{
    public static readonly Small = new Size(3.0);
    public static readonly Medium = new Size(2.0);
    public static readonly Large = new Size(1.0);

    public double Weight
    {
        get;
        private set;
    }

    private Size(float weight)
    {
        Weight = weight;
    }
} 
```

现在让我们定义一个类`Galaxy`：

```
sealed class Galaxy
{
    public Age Age
    {
        get;
        set;
    }

    public Size Size
    {
        get;
        set;
    }
} 
```

现在你必须定义一个类来定义星星：

```
abstract class Star
{
    protected Star(string color, Galaxy galaxy)
    {
        Color = color;
        Galaxy = galaxy;
    }

    public string Color
    {
        get;
        private set;
    }

    public Galaxy Galaxy
    {
        get;
        private set;
    }

    public abstract float Chances(Random rnd);
} 
```

现在让我们为每个星定义一个新类（不要忘记根据每种类型的实际情况更改算法、公式和权重）：

```
sealed class WhiteStar : Star
{
    public WhiteStar(Galaxy galaxy) : base("White", galaxy)
    {
    }

    public override float Chances(Random rnd)
    {
        return (3 + Galaxy.Age + Galaxy.Size) * rnd.NextDouble();
    }
} 
```

当然，这不能是最终代码，但您可以将其用作组织代码的提示。

最大的好处是`Galaxy`不知道获得特定类型星星的规则，每个星星类型都知道自己的规则（这意味着如果您添加新的星星类型，您将不需要搜索遍布各地的规则很多课）。当然这对其他类也有效（例如，如果您添加一个`MiddleAge`星系的年龄，您将不需要更新任何其他类）。

最后不要忘记将`Weight`属性名称更改为对您的域更有意义的名称。

# phalcon - 如何使用配置数组文件适配器？

> ID：13881883
> 
> 赞同：0
> 
> 时间：2012-12-14T15:46:38.250
> 
> 标签：phalcon

我在文档中发现可能有以下代码：

```
// config.php
$settings = array();

// index.php
require_once('config.php');
$config = new \Phalcon\Config($settings); 
```

但是是否可以不使用数组创建配置，而是使用包含数组的文件名？我的意思是：

```
// config.php
return array(....);

// index.php
$config = new \Phalcon\Config\Array('config.php'); 
```

还是这样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:27:15.863

目前这是不可行的。但是，您可以轻松扩展 Phalcon\Config\Array，如下所示：

```
class MyConfig extends \Phalcon\Config
{
    public function __construct($file)
    {
        if (!file_exists($file))
        {
            throw new \Phalcon\Config\Exception(
                'File was not found'
            );
        }

        $data = require($file);

        if (!is_array($data))
        {
            throw new \Phalcon\Config\Exception(
                'File supplied does not contain an array'
            );
        }

        parent::__construct($data);
    }
} 
```

以上应该可以满足您的需求

# javascript - 在 Internet Explorer 中隐藏或删除呈现为“ì”的空文本节点 ( )

> ID：13881885
> 
> 赞同：2
> 
> 时间：2012-12-14T15:46:44.810
> 
> 标签：javascript, jquery, html, css, internet-explorer

我在后端使用 Joomla CMS 为客户创建了一个站点。我有一个问题，当最终用户编辑一些文章时，它会在图像标签之前插入一个空格，然后 IE 将其解释为一个空的文本节点。这在 IE 以外的任何浏览器中都不是问题。

IE 将这些空文本节点显示为小的“i”类型字符，但带有重音符号。

![在此处输入图像描述](../Images/4d7817bc56e1445704107aa57fe7b890.png)

我已经验证了标记，除了由于最终用户编辑的内容而导致奇怪的丢失 alt 标记之外，标记很好。

我认为尝试查找和更改后端所见即所得编辑器功能并非易事，因此我想尝试让 IE 忽略这些前导空格。有没有办法在Javascript中做到这一点？

编辑为了澄清......这是最终用户插入一些图像后的一些标记：

```
<div class="before-after">
<p>BEFORE<br /> <img src="/images/before-after/Arm%20before%20treatment.jpg" border="0" width="170" height="205" style="border: 0;" /></p>
<p>AFTER 3 TREATMENTS<br /> <img src="/images/before-after/Arm%20after%203%20treatments.jpg" border="0" width="170" height="205" style="border: 0;" /></p>
</div> 
```

除了 img 标签之前的前导空格外，我看不到任何字符。在 IE 中，这个空间显示为 ì

该网站在这里： [http ://www.radiantliving.co.uk/laser-tattoo-removal](http://www.radiantliving.co.uk/laser-tattoo-removal)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:37:42.950

似乎空格是`&nbsp;`（没有破坏空格字符）。您可以使用以下 javascript 代码删除它们：

```
$(function(){
     var scope = $("#article");
     scope.html(scope.html().replace(/&nbsp;/g,''));
}); 
```

将 更改为`scope`您想要的任何父元素。它现在正在调查 element 的整个子项`#article`。

# sql - 在 where 子句中使用带有“or”的“case”

> ID：13881891
> 
> 赞同：-1
> 
> 时间：2012-12-14T15:47:00.490
> 
> 标签：sql, sql-server, tsql

我想在 SQL Server 中执行此查询，但它不起作用：

```
Select Nom from tab
  WHERE 
Nom  LIKE
CASE WHEN libelle !='' then
  Nom1 
OR 
 Nom2  
else 
 Nom3
end 
```

任何帮助将不胜感激

更新：从 OP 评论中添加：

> 我想验证 libelle 是否像 nom1 或像 nom2 一样为空，否则（如果 libelle 为空） nom 像 nom3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T15:54:13.240

我觉得这不是`case`去这里的正确方法，所以我认为这更像是：

```
select Nom
from tab
where (
    libelle != ''
    and (
        Nom like Nom1
        or Nom like Nom2
    )
)
or (
    libelle = ''
    and Nom like Nom3
) 
```

对我来说，这似乎更容易阅读和理解。查询优化器甚至可能同意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T16:28:50.170

```
SELECT Nom 
FROM tab
WHERE
   1 = CASE
         WHEN libelle != '' AND (Nom like Nom1 OR Nom like Nom2) THEN 1
         WHEN libelle = '' AND Nom like Nom3 THEN 1
         ELSE 0
       END 
```

（与其他选项非常相似——尤其是蒂姆的）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T17:48:59.713

因此，您当时正在尝试执行动态 SQL，我不相信您可以使用 case 语句来做到这一点，但这可能会起作用：

```
declare @sql nvarchar(100)
declare @libelle nvarchar(20)
--Set @libelle to something (can be via a query, or a stored proc parameter etc rather than just a string like here
set @libelle = ''
set @sql = 'SELECT Nom FROM tab WHERE Nom LIKE'

IF @libelle = ''
    SET @sql = @sql + ' ''Nom3'''
ELSE
    SET @sql = @sql + ' ''Nom1'' OR Nom LIKE ''Nom2'''
EXEC (@sql) 
```

这至少应该让你走上正确的道路。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T15:49:41.390

语法是：

```
 CASE WHEN libelle != '' THEN Nom1
        WHEN libelle /* OTHER CONDITION HERE */ THEN Nom2
        ELSE Nom3
   END 
```

# excel - 查找记录并更新

> ID：13881892
> 
> 赞同：0
> 
> 时间：2012-12-14T15:47:07.257
> 
> 标签：excel, vba

我有一些 excel 表，用户必须在 sheet2 上插入数据列表。然后用户点击一个按钮，并根据 sheet2 中插入的数据更新 sheet1。

此代码将查找 sheet2 中的数据是否在 sheet 中丢失，然后正确插入数据。我还需要更新现有记录。sheet1 上的现有数据已添加带有注释的 manuel 列，这些注释不应在数据更新时删除。

sheet1 上的数据位于 C 到 N 列 - 键位于 J。

```
 Dim iLast As Long
Dim iCounter As Integer

iLast = Sheets(2).Range("I" & Application.Rows.Count).End(xlUp).Row

Dim rng As Range

For iCounter = 2 To iLast
    Set rng = Sheets(1).Range("J:J").Find(Sheets(2).Range("I" & iCounter).Value)

    If rng Is Nothing Then
        Sheets(2).Range("B" & iCounter & ":" & "M" & iCounter).Copy
        Sheets(1).Range("C" & Sheets(1).Range("J" & Application.Rows.Count).End(xlUp).Row + 1).PasteSpecial xlPasteAll
        Range("B2").Select

        'Insert mailto link
        Selection.Copy
        Sheets(1).Range("B" & Sheets(1).Range("J" & Application.Rows.Count).End(xlUp).Row).Select
        'Range("B3").Select
        ActiveSheet.Paste
        ActiveSheet.Paste
        Application.CutCopyMode = False
    Else

    'MsgBox "update existing row with new data - how to"

    End If

Next iCounter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:13:41.983

您应该能够以与添加新行类似的方式执行此操作。

如果您使用 xlPasteValues 而不是 xlPasteAll 表 1 中的注释不应该受到影响。

假设您只是复制值并且没有额外的格式或注释要复制。

我不确定您要达到的目标是什么，这对我来说有点困难，但是我认为这就是您想要做的吗？

```
Dim iLast As Long
Dim iCounter As Integer

iLast = Sheets(2).Range("I" & Application.Rows.Count).End(xlUp).Row

Dim rng As Range

For iCounter = 2 To iLast
    Set rng = Sheets(1).Range("J:J").Find(Sheets(2).Range("I" & iCounter).Value)

    If rng Is Nothing Then
        Sheets(2).Range("B" & iCounter & ":" & "M" & iCounter).Copy
        Sheets(1).Range("C" & Sheets(1).Range("J" & Application.Rows.Count).End(xlUp).Row + 1).PasteSpecial xlPasteAll
        Range("B2").Select

        'Insert mailto link
        Selection.Copy
        Sheets(1).Range("B" & Sheets(1).Range("J" & Application.Rows.Count).End(xlUp).Row).Select
        'Range("B3").Select
        ActiveSheet.Paste
        ActiveSheet.Paste
        Application.CutCopyMode = False
    Else
        Sheets(2).Range("B" & iCounter & ":" & "M" & iCounter).Copy
        Sheets(1).Range("C" & rng.Row).PasteSpecial xlPasteValues
    End If

Next iCounter 
```

# css - 尽管 display:inline-block 不能在一行上获得两个块元素

> ID：13881896
> 
> 赞同：0
> 
> 时间：2012-12-14T15:47:16.080
> 
> 标签：css

我想在一行中获取两个元素（一个锚点包裹在一个 div 和一个 h3 中）

```
<div class="cb_inline_block">
  <div><a class="btn right-margin" href="/"><i class="icon-arrow-left"></i></a></div>
  <h3>Test</h3>
</div>

.cb_inline_block {
    display:inline-block;
} 
```

这似乎不起作用，我错过了什么？我在这里有一个小提琴：http: [//jsfiddle.net/houmie/Kbe6P/](http://jsfiddle.net/houmie/Kbe6P/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:51:21.290

更新了..你需要为每个要显示为内联块的元素设置属性。

```
.cb_inline_block * {
    display:inline-block;
}​ 
```

[http://jsfiddle.net/Kbe6P/1/](http://jsfiddle.net/Kbe6P/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:51:08.823

您需要应用`display: inline-block;`到要并排放置的实际元素。在这种情况下，这是 的孩子`.cb_inline_block`，例如

```
.cb_inline_block > div,
.cb_inline_block > h3 {
    display: inline-block;
} 
```

请注意，`inline-block`它对空格敏感，因此您可能需要删除 HTML 中 和 之间的换行符和`</div>`空格`<h3>`。

# eclipse - 没有 Flex Builder/FDT 的 Eclipse 中的 Flex

> ID：13881897
> 
> 赞同：1
> 
> 时间：2012-12-14T15:47:17.363
> 
> 标签：eclipse, actionscript-3, apache-flex

我之前使用过 flashdevelop，但是因为我想编写 java 代码，所以我发现在一个 ide 中拥有两个世界很方便。但是，似乎没有 flex builder 就无法做到这一点，而且 FDT 看起来只适用于 air 或 haxe/flash。那么，有没有解决方法？

# unit-testing - 返回 IObservable 的 UnitTesting 方法 来自 WP 程序集

> ID：13881902
> 
> 赞同：0
> 
> 时间：2012-12-14T15:47:22.380
> 
> 标签：unit-testing, windows-phone-7, visual-studio-2012, system.reactive

我有一个 WP7 程序集，其中`Foo`定义了一个类。

```
public class Foo
{
    IObservable<int> Bar() { ... }
} 
```

我需要使用 Visual Studio 2012 MSTest 对该方法进行单元测试。

我在 Visual Studio 2012 中创建了一个基于 .net Framework 4.5 的单元测试项目，它引用了我的 WP7 程序集。

最简单的测试是

```
[TestMethod]
public void MyTestMethod()
{
    var foo = new Foo();
    var bars = foo.Bar();
} 
```

问题是我收到一条错误消息并且无法编译该测试项目：

```
error CS0012: The type 'System.IObservable`1<T0>' is defined in an assembly 
that is not referenced. You must add a reference to assembly 'System.Observable, 
Version=2.0.5.0, Culture=neutral, PublicKeyToken=24eec0d8c86cda1e'.
1>C:\Work\App2\UnitTestProject1\UnitTest1.cs(41,35,41,42): error CS0029: Cannot 
implicitly convert type 'System.IObservable`1<int>' to 'System.IObservable<int>' 
```

不幸的是，WP 中的 IObservable 是在 System.Observable.dll 中定义的，而在 .net Framework 4 中它是在 mscorlib.dll 中定义的。我无法为我的 WP 和 UnitTest 项目使用相同的 IObservable 定义程序集。当在不同的程序集中定义接口时，我通常的 App.config`<bindingRedirect>`技巧不起作用。

如何在 VS 2012 中使用 IObservables 对 WP 项目进行 UnitTests？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:27:09.257

[我建议使用类似本文](http://www.developer.nokia.com/Resources/Library/Lumia/#!co-development-and-porting-guide.html)中所做的方法。我用它来针对多个环境，它运行良好。您只需要为您的 WP 测试创建一个项目，其中包含指向所有测试文件的链接。

# assembly - 这个 movsbl 指令是什么？

> ID：13881907
> 
> 赞同：1
> 
> 时间：2012-12-14T15:47:30.650
> 
> 标签：assembly

> **可能重复：**
> [movsbl 指令是做什么的？](https://stackoverflow.com/questions/7861095/what-does-movsbl-instruction-do)

相关：[movsbl 指令是做什么的？](https://stackoverflow.com/questions/7861095/what-does-movsbl-instruction-do?rq=1)

在反汇编一个程序时，我发现了一个非常奇特的指令：

```
0x0000000000401106: movsbl (%rbx,%rax,1),%ecx 
```

我想我知道 movsbl 做了什么：它基本上扩展了一个字节并将前导字节（符号扩展）添加到寄存器中。

但是我完全不知道在上述情况下使用它时它会做什么。

任何阐明此说明的信息将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:56:18.423

该指令

```
movsbl <%rbx,%rax,1>,%ecx 
```

从第一个操作数寻址的内存位置读取一个字节，符号将该字节扩展为 32 位，并将结果存储在`ecx`寄存器中。

现在到`<%rbx,%rax,1>`. `rbx`这只是表示通过将和的值相加形成的内存地址`rax`。如果您想知道，`1`是适用于 的乘数`rax`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:56:57.643

该指令从地址加载一个字节，`rbx+rax`并将其符号扩展为`ecx`. 请注意，符号扩展将源的最高有效位复制到目标的最高位，因此它并不总是“领先的”。这样当解释为 2 的补码有符号数时，该值不会改变。

# android - Android 导航和多屏支持

> ID：13881908
> 
> 赞同：1
> 
> 时间：2012-12-14T15:47:31.293
> 
> 标签：android, android-layout

我正在使用列表导航模式实现导航。目前我有 3 个完全不同且不相关的列表视图，可以通过从导航菜单微调器中点击所需项目来切换。这些列表视图被实现为片段，`fragmentManager.replace()`每次用户从导航菜单中选择项目时都会切换。

它现在可以工作，一切都很完美......直到我想要正常的多屏设备支持。

据我了解，多屏支持的关键是为不同的屏幕尺寸提供单独的布局。但在这种情况下，我不能在片段中使用这种布局，因为我需要将片段嵌套到片段容器中。但是前一段时间不支持嵌套片段。

为了更清楚，请看下面的架构

```
MainActivity -> FragmentA -> ListView
             -> FragmentB -> ListView
             -> FragmentC -> ListView 
```

如果我根据屏幕尺寸制作具有布局的 FragmentA 容器，那么我需要将原始 FragmentA 嵌套到该容器中，即：

对于平板电脑：

```
MainActivity -> FragmentContainer (also Fragment) -> FragmentA
                                                  -> DetailsFragment 
```

对于电话：

```
MainActivity -> FragmentContainer -> FragmentA 
```

我应该将所有现有片段包装到单独的活动中并在这些活动之间切换吗？或者我应该使用带有嵌套片段支持的新 Android 支持库？

你怎么看？

谢谢你的帮助。

类似问题： [片段标签和片段活动](https://stackoverflow.com/questions/10284668/fragment-tabs-and-fragment-activities)

# javascript - 在 NivoSlider 中跳过第一张或最后一张幻灯片 - jQuery 幻灯片

> ID：13881910
> 
> 赞同：0
> 
> 时间：2012-12-14T15:47:33.047
> 
> 标签：javascript, jquery, nivo-slider

有谁知道我如何跳过*[NivoSlider 3.1](http://nivo.dev7studios.com/)*安装中的**第一张**或**最后**一张幻灯片？

**背景：我使用***WordPress*自定义字段动态地将我的图像添加到幻灯片中，并且由于 a `strange quirk`，它不会显示幻灯片，除非我已经有至少 1 张图像。

**是否可以告诉 NivoSlider 忽略第一张或最后一张幻灯片？**

所以，我的标记可能是：

```
<div id="slider" class="slider nivoSlider">
<img src="1.jpg" /> <!-- Ignore this ALWAYS -->
<img src="wp-img-1.jpg" />
<img src="another-wp-img-2.jpg" />
<img src="yet-another-wp-img-3.jpg" />
</div> 
```

因此，例如[在这里](http://nivo.dev7studios.com/demos/)，它会跳过`Wall-E`或`Finding Nemo`完全不显示它。

非常感谢您对此提供的任何帮助-我已经绞尽脑汁几天了:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:09:02.307

应该能帮到你一点。

```
$(document).ready(function () {
    //set up vars
    var slider = $('#slider');
    var firstImage = $('#slider img:first');
    var lastImage = $('#slider img:last');

    //Take them out of the gallery
    firstImage.remove();
    lastImage.remove();

    //run photo gallery stuff

    //Now add images back in
    slider.prepend(firstImage);
    slider.append(lastImage);
}); 
```

**编辑**

```
 $(window).load(function() {

//set up vars
var slider = $('#slider');
var firstImage = $('#slider img:first');
var lastImage = $('#slider img:last');

//Take them out of the gallery
firstImage.remove();
lastImage.remove();

    $('.slider').nivoSlider({
        effect: 'slideInLeft', // Specify sets like: 'fold,fade,sliceDown'
        slices: 15, // For slice animations
        boxCols: 8, // For box animations
        boxRows: 4, // For box animations
        animSpeed: 500, // Slide transition speed
        pauseTime: 3000, // How long each slide will show
        startSlide: 1, // Set starting Slide (0 index)    
        controlNav: false, // 1,2,3... navigation
        controlNavThumbs: false, // Use thumbnails for Control Nav
        pauseOnHover: true, // Stop animation while hovering
        manualAdvance: true, // Force manual transitions
        prevText: 'Prev', // Prev directionNav text
        nextText: 'Next', // Next directionNav text
        randomStart: false, // Start on a random slide   
        directionNav:true,
        directionNavHide:false,
        afterLoad: function(){
            //Now add images back in
            slider.prepend(firstImage);
            slider.append(lastImage);
        } // Triggers when slider has loaded
    });
}); 
```

# java - 将对象放入arraylist并创建新对象

> ID：13881912
> 
> 赞同：0
> 
> 时间：2012-12-14T15:47:47.173
> 
> 标签：java

您好我有一个应用程序，我在触发鼠标右键时单击鼠标左键绘制东西它需要进入 ArrayList 并创建一个新对象。当我再次开始单击鼠标左键时，它必须继续使用新对象继续显示另一个对象..我的问题是旧对象消失了。谁能看看我忘记了什么？

这是代码

```
Drawing draw; // class definition
private ArrayList<Drawing> tekening = new ArrayList<Drawing>();

public DrawingPanel() {
    setBackground(Color.WHITE); // zorg voor een witte achtergrond.
    this.addMouseListener(this); // control de mouselistener
    draw = new Drawing(color);
}

public void paintComponent(Graphics g) {
    super.paintComponent(g);
    draw.draw(g);
    repaint();
}

@Override
public void mouseClicked(MouseEvent e) {

    if(e.getButton() == MouseEvent.BUTTON1) {
        Point k = new Point(e.getX(), e.getY());
        draw.addPoint(k);
        System.out.println("punt gezet op " + k);
    }
    if(e.getButton() == MouseEvent.BUTTON3) {
        tekening.add(draw);
        color = new Color(r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0, r.nextInt(255 - 0 + 1) + 0);
        //System.out.println("new color " + color);
        draw.setColor(color);
        draw = new Drawing(color);
    }
} 
```

* * *

我忘记了我的paintcomponent中的foreach循环。

```
 for(Drawing draw : tekening) {
        draw.draw(g);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:51:52.600

这些行：

```
draw.setColor(color);
draw = new Drawing(color); 
```

您正在破坏对“旧”绘图对象的引用。如果你想两者都呆在那里，你需要在你的应用程序中创建一些新旧概念。也许一个`Map<Drawing,List<Drawing>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:52:56.560

问题出在`paintComponent(Graphics g)`方法上。在其中，您只重绘当前`draw`对象。当您用鼠标右键完成一个并初始化一个新对象时，它不包含有关先前对象的信息，因此不会绘制任何内容。你`paintComponent(Graphics g)`应该看起来像这样：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    for(Drawing dr : tekening) {
        dr.draw(g);
    }
    repaint();
} 
```

这会遍历所有`Drawings`绘制它们中的每一个。

# c++ - 为什么 STL/Boost C++ 编码风格与其他人如此不同？

> ID：13881915
> 
> 赞同：66
> 
> 时间：2012-12-14T15:48:03.987
> 
> 标签：c++, coding-style, naming-conventions

我是一个相当菜鸟的 C++ 程序员，但在我有限的语言经验中，大多数标准 C++ 样式指南（例如[Google C++ 样式指南](https://google.github.io/styleguide/cppguide.html)）与 stl 和 boost 库中实现的内容背道而驰。

例如，C++ 标准库和 Boost 中的类名总是小写，用下划线分隔单词（例如`std::vector`, `boost::unordered_map`, `std::map::const_iterator`），而我看到的大多数 C++ 样式指南倾向于 CamelCase 样式（例如`TcpConnection`or `Int32`）。

这同样适用于方法。标准库和 Boost 对方法和函数使用与类（例如`std::map<>::get_equal("foo")`）相同的风格，而大多数风格指南提倡 pascalCase 或 CamelCase。

如果我们将其与 Ruby 之类的语言进行对比，大多数用户将遵守核心库中使用的约定，标准 C++ 库与其他所有人的代码之间存在如此大的差异似乎很奇怪。

**有人知道为什么吗？**

编辑：为了澄清，我只是在谈论肤浅的文本风格（大小写、下划线的使用等），而不是实际的实现风格。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-14T16:01:36.560

下划线和小写字母是 Bjarne Stroustrup 在“C++ 编程语言”中所采用的风格。如果我没记错的话，他曾发表过这样的声明，即首选名称中的下划线，因为对于英语不是主要语言的国际社会来说，它更具可读性。我不知道他的意见是否正确，但我猜这就是起源。

这是他的常见问题解答的链接，他在其中讨论了这个主题：

[http://www.stroustrup.com/bs_faq2.html#Hungarian](http://www.stroustrup.com/bs_faq2.html#Hungarian)

片段解释了您特别感兴趣的内容：

> 我更喜欢使用下划线来分隔标识符（例如 element_count）中的单词，而不是使用其他选项，例如 elementCount 和 ElementCount。永远不要使用全大写字母的名称（例如，BEGIN_TRANSACTION），因为这通常是为宏保留的。即使您不使用宏，也可能有人在您的头文件中乱扔了它们。类型使用首字母大写（例如 Square 和 Graph）。***C++ 语言和标准库不使用大写字母，所以它是 int 而不是 Int 和 string 而不是 String。这样，您就可以识别标准类型。***

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-14T17:28:06.903

除了 Bjarne Stroustrup 之外，还有一个很好的理由。使用仿函数时，您希望它们看起来像函数。

但是使用 CamelCase 样式指南，您可以通过在类名称的第一个字符上使用大写字母并在方法的第一个字符上使用小写字母来区分类与方法和函数。

这与 c++ 算法风格的编程不一致。由于没有理由将仿函数与函数区分开来，因此当您想要使用仿函数（通常是您想要的）时，最好使用 c++ 和 stl 编码样式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-14T18:19:57.103

唯一真正需要的规则是那些旨在防止已知问题的规则：

*   使用 ALL_CAPS（加上下划线和数字）作为预处理器名称，并且仅用于预处理器名称。追查由（假定的）非预处理器标识符和预处理器名称之间的冲突引起的问题可能很困难，更难修复它们。
*   永远不要使用下划线开头的标识符，并且在标识符内的任何地方都不要有双下划线。这些是为实现而保留的。

除此之外，保持一致，不要太挑剔。编码标准应该注意规则#0，即“不要为小事操心”。太多的编码标准让小东西汗流浃背。

就 Google 的 C++ 标准而言，它并不是最好的。它更像是一个 C 正负标准。例如，它禁止通过非常量引用传递。

# php - json_decode 在 godaddy 主机上失败

> ID：13881919
> 
> 赞同：16
> 
> 时间：2012-12-14T15:48:23.880
> 
> 标签：php, json, shared-hosting

我`json_decode`在我的 PHP 中使用来解析来自 POST 的数据（POST 本身是通过 ajax 执行的）。我的代码如下所示：

```
$data = json_decode($_POST['logdata'], true);
if(!$data) {
    $ecodes = array(
    JSON_ERROR_NONE           => "No error has occurred",
    JSON_ERROR_DEPTH          => "The maximum stack depth has been exceeded",
    JSON_ERROR_STATE_MISMATCH => "Invalid or malformed JSON",
    JSON_ERROR_CTRL_CHAR      => "Control character error, possibly incorrectly encoded",
    JSON_ERROR_SYNTAX         => "Syntax error",
    JSON_ERROR_UTF8           => "Malformed UTF-8 characters, possibly incorrectly encoded"
    );
    $err = json_last_error();
    $result = array("error" => 1, "error_msg" => "Invalid log data: " . $ecodes[json_last_error()]);
    echo json_encode($result);
    exit;
}

...  //use $data array 
```

这段代码工作正常。在我的本地 linux 机器或我的 mac 上执行时，传递的数据被正确解码并且一切正常。但是，当在 godaddy 共享主机上执行相同的代码时，解码失败并*出现 Syntax error*。花了很多时间试图缩小问题范围，我发现当我在 JSON 对象属性的值中有`<`或字符时会出现问题。`>`

javascript 中的上传部分（ajax）如下所示：

```
$.ajax({
    url:        '/emaillog.php',
    type:       'POST',
    dataType:   'json',
    data:       { logdata: JSON.stringify(this.logData[this.scenarioLogId]) },
    cache:      false,
    error:      function(jqXHR, textStatus, errorThrown) {
        alert("Error occurred during upload: " + textStatus);
    },
    success:    function(data, textStatus, jqXHR) {
        var msg = data.error
                  ? "An error occurred processing action log: " + data.error_msg
                  : "Action log processed successfully.";
        alert(msg);
    }
}) 
```

如您所见，POST 参数的值是使用创建的`JSON.stringify`，并且在检查时是正确的（客户端和服务器端）。如果重要，这里是提交的 POST 参数的示例值：

```
{
    "scenarioId":"1",
    "scenarioName":"MOH",
    "startTime":1355496349,
    "log":[
        {
         "role":"Leader",
         "task":"MOH",
         "response":"start",
         "time":1355496349
        },
        {
         "role":"Head",
         "task":"<span class=\"bold\">Assign Role</span>",
         "response":"done",
         "time":1355496351
        }
    ]
} 
```

如果数组中的最后一个元素（带有任务*Assign Role*）被删除，那么一切都会成功处理。如果我用空格替换`<`and `>`> 字符，再次，一切都很好。

由此产生两个问题：

1.  如果此类 JSON 字符串的语法错误是正确的行为，那么为什么我在其他两个环境中看不到错误？另外，为什么会`JSON.stringify`产生不正确的字符串？

2.  如果这样的 JSON 字符串的语法错误是不正确的行为，那么 Godaddy 的 PHP 实现或配置一定有问题。

请注意，虽然我明确询问了 godaddy，但它只是相关的，因为它是代码产生错误的唯一提供者。任何人都可以阐明这种情况吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-18T20:18:35.260

无论出于何种原因，仅在 Godaddy 主机上（可能也在其他一些地方，但不是在我测试的其他地方），当我提交表单时，服务器正在转义引号 - 这就是导致问题的原因。问题的解决方案非常简单：而不是做

```
$data = json_decode($_POST['logdata'], true); 
```

我做了

```
$data = json_decode(stripslashes($_POST['logdata']), true); 
```

一切都很完美。

# c# - 使用对象作为参数查询 MongoDB，而不仅仅是特定的字段相等或其他

> ID：13881921
> 
> 赞同：1
> 
> 时间：2012-12-14T15:48:24.120
> 
> 标签：c#, mongodb, mongodb-.net-driver

是否可以查询 MongoDB，但使用 C# 对象（可能部分填充）作为查询参数？

即`foo`在集合中找到它们**部分或更多**等于我的参数`foo`对象的所有内容。

这是来自 MondoDB 的 C# 驱动程序页面：

```
MongoCollection<BsonDocument> books;
var query = Query.Wrap(new { author = "Kurt Vonnegut" });
foreach (BsonDocument book in books.Find(query)) {
    // do something with book
} 
```

我看不到这种`.Wrap`方法，它似乎不再可用。

有谁知道我如何使用像这样的匿名对象或强类型对象来查询我的集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:56:56.437

我认为您需要使用 Bson Serilaization 对象才能使您的查询正常工作。看看这个页面 - [http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial)

# eclipse - 在 Eclipse shell 中运行期望脚本

> ID：13881930
> 
> 赞同：2
> 
> 时间：2012-12-14T15:48:53.113
> 
> 标签：eclipse, bash, console, eclipse-cdt, expect

我制作了一个期望**e.exp**脚本文件，该文件在两个嵌套的 bash 脚本**b1**和**b12中调用**

至于我在终端中运行**b1** bash 脚本，一切都很好，所以期望可以发送密码并且所有文件都保存在目标设备上。

一旦我从**eclipse CDT 3.8.0 Indigo**调用脚本，我就无法复制文件，因为它似乎无法**在期望脚本中发送密码**

## 我该如何处理这个问题（在 eclipse 或 bash shell 中）

我描述并简化了实现如下

b1 --calls inside-> b2 --calls inside-> e.exp （在终端中工作，但在 Eclipse 控制台中无效）:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T00:10:09.927

你能解决这个问题吗？你是如何从 Eclipse 运行脚本的？

尝试在用户名和密码之间添加睡眠，大多数情况下都有效

```
#login process
sleep 10
expect -re "ubuntu login: "
sleep 5
#send user name

send -- "root\r"
sleep 10
expect -exact "root\r\r
Password: "
sleep 10
#send the password 
```

# tidesdk - 在 TideSDK 中回显非英文单词

> ID：13881934
> 
> 赞同：0
> 
> 时间：2012-12-14T15:49:01.717
> 
> 标签：tidesdk

我已经安装了 TideSDK 1.3.1 beta，我有一个简单的 php 文件：

```
<?php
header("Content-type: text/plain;charset=utf-8");
?>
<html>
<head>
<meta charset=utf-8>
<title>TideSDK</title>
</head>
<body>
<?php
echo "¡aló";
?>
</body>
</html> 
```

但输出是：

```
<html>
<head>
<meta charset=utf-8>
<title>TideSDK</title>
</head>
<body>
¡aló</body>
</htm 
```

`</html>`输出结束时会发生什么。

如果我将代码更改为`echo "¡aló ¡aló";`，则输出的最后一行更改为 `</h`.

如果我将代码复制到 apache 服务器，输出是正确的。

我的代码中是否有任何错误，或者这是一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T21:25:13.883

您的 PHP 文件是“ANSI as UTF8”编码的，这似乎导致了问题。在我修复了文件编码并将其转换为 UTF8 之后（我使用 Notepad++ 完成了这个任务，它有一个简单的功能），它工作得很好。

在这里找到固定文件：http: [//d.pr/f/UksA](http://d.pr/f/UksA)

# eclipse - eclipse / GWT - 如何从其他项目中包含我自己的源代码？

> ID：13881939
> 
> 赞同：1
> 
> 时间：2012-12-14T15:49:19.050
> 
> 标签：eclipse, gwt

我为此苦苦挣扎了一段时间，谷歌搜索仅证实并非所有 Java 代码都可以在 GWT 上使用（因为并非所有代码都可以通过 GWT“重新编译”为 JS），但**如果我有源代码并使用“支持”一块 Java - 我应该很好去**。

这是我尝试过的。

**首先**，我用源创建了一个简单的项目：

1.  新建->Java 项目。
2.  该项目中的单个文件。实际上接近空一个：

这是我在那里种植的虚拟代码：

```
public class Seven {
    public static String plusOne(){
        return "Eight";
    }
} 
```

**然后**，当我尝试使用以下步骤将其包含到 GWT 项目中时：

1.  从 New->Web Application Project 开始（取消选择 App Engine 并保留“生成项目示例代码”）
2.  只修改了代码中的一行

从：

```
nameField.setText("GWT User"); 
```

至：

```
nameField.setText(seven.Seven.plusOne()); 
```

在 Eclipse 中一切看起来都很好，但是尝试编译（GWT 编译项目）会导致

像这样的错误消息：

```
[ERROR] Line 44: No source code is available for type seven.Seven; did you forget to inherit a required module?
[ERROR] Unable to find type 'test3.client.Test3'
    [ERROR] Hint: Previous compiler errors may have made this type unavailable
    [ERROR] Hint: Check the inheritance chain from your module; it may not be inheriting a required module or a module may not be adding its source path entries properly 
```

这肯定很容易——将 GWT 指向我的源文件夹。但是我的搜索失败了。感谢为我指明正确的方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:49:19.050

是的！是的！是的！... 我找到了。

您需要在 GWT 项目（其 XML 文件）中添加“继承”。

见这里：[http ://www.vogella.com/articles/GWT/article.html#modules](http://www.vogella.com/articles/GWT/article.html#modules)

# jquery-mobile - 更新按类名选择的主题

> ID：13881942
> 
> 赞同：-1
> 
> 时间：2012-12-14T15:49:31.233
> 
> 标签：jquery-mobile

以下适用于所有按钮和选择（jqm 1.2）。页面主题是 data-theme-a。如何让它适用于类名为**cc_group的页面上的****特定选择**？

 **```
$(document).on('click', '.btn_setup', function (event, ui) {
            var theme = 'e';
            //the only difference between this block of code and the same code above is that it doesn't target list-dividers by calling: `.not('.ui-li-divider')`
            $.mobile.activePage.find('.ui-btn').not('.ui-li-divider')
                    .removeClass('ui-btn-a')
                    .addClass('ui-btn-up-' + theme)
                    .attr('data-theme', theme);

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:55:10.673

这行得通！对于那些寻找答案的人来说，关键是包含选择的 div（类名 ui-select）。然后 ui-btn-up 是样式化的 jqm 按钮。

```
$(".cc_group").closest("div").addClass('ui-btn-up-' + theme).attr("data-theme", "e").removeClass("ui-btn-hover-a").removeClass("ui-btn-up-a"); 
```**

# jsf - 浏览文件系统以在 JSF 中选择目录

> ID：13881943
> 
> 赞同：2
> 
> 时间：2012-12-14T15:49:33.013
> 
> 标签：jsf, primefaces, facelets

有没有办法在 facelets 中实现浏览文件系统目录我不希望用户键入我在 primefaces 展示中搜索的目录但我没有找到它。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:17:38.923

出于安全原因，您不能使用 HTML/JavaScript 浏览文件系统。如果你想做这样的事情，你可以使用 Java 小程序或 Flash 元素，但我觉得这样的事情令人厌恶。

我不清楚你想这样做的原因。如果是用于下载文件和选择目的地，您应该使用常规文件下载。

你可能想做更多的研究。我在 SO 上发现了几个可比较的问题：

*   [HTML 页面中的目录选择器](https://stackoverflow.com/questions/2809688/directory-chooser-in-html-page)
*   [能够选择要在网页上使用的文件夹的文件选择器](https://stackoverflow.com/questions/4155087/file-picker-with-ability-to-select-folder-to-be-used-on-a-webpage)
*   [如何让用户从 HTML 页面中选择一个文件夹，以便上传所有文件](https://stackoverflow.com/questions/7074739/how-can-i-let-the-user-select-a-folder-from-an-html-page-so-that-all-the-files-c)

# xpages - 我是否需要为我的 30 多个 Notes 视图中的每一个单独的 XPage？

> ID：13881944
> 
> 赞同：0
> 
> 时间：2012-12-14T15:49:35.947
> 
> 标签：xpages

我正在努力将 XPage 前端放置在具有许多视图的现有 Notes 应用程序上。现在，我在与现有应用程序/数据不同的 NSF 中构建 XPage 和自定义控件 (CC)。（不是要求，但我提供此功能以防影响您的回答。）

计划维护时，我希望构建最少的可重用 XPage/CC。我意识到我可能需要为每个底层 Notes 视图使用单独的 CC，但我希望重用一个或几个 XPage，并在运行时决定应该在“内容”面板/div 中显示什么视图。（“计算自定义控件”？）

此外，我希望在 XPage 上提供一个左侧菜单/视图列表，这将 (1) 允许通过单击选择视图和 (2) 直观地指示选择了哪个视图（同样，目标是可重用性......不是用于每个视图。）

（Notes App 并行：一个框架集在左框架中有一个大纲，一个内容框架用于加载从大纲中选择的视图。）

任何建议、资源、链接、指针等将不胜感激。

另外，在您的回复中，请假设我无法使用扩展库。

感谢您帮助一位显然是新 XPages 开发人员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T16:48:56.070

您可以使用 URL 参数来控制将显示哪个视图。为此，您可以创建一个 XPage，其中的列计算如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

<xp:viewPanel rows="30" id="viewPanel1">
    <xp:this.data>
        <xp:dominoView var="view1" viewName="All"></xp:dominoView>
    </xp:this.data>
    <xp:this.facets>
        <xp:pager partialRefresh="true" layout="Previous Group Next"
            xp:key="headerPager" id="pager1">
        </xp:pager>
    </xp:this.facets>

    <!-- Column 1 -->
    <xp:viewColumn id="viewColumn1"
        columnName="#{javascript:view1.getColumnNames().get(0)}">
        <xp:this.rendered><![CDATA[#{javascript:view1.getColumnCount() > 0}]]></xp:this.rendered>
        <xp:viewColumnHeader id="viewColumnHeader1"
            value="#{javascript:view1.getColumnNames().get(0)}">
        </xp:viewColumnHeader>
    </xp:viewColumn>

    <!-- Column 2 -->
    <xp:viewColumn id="viewColumn2"
        columnName="#{javascript:view1.getColumnNames().get(2)}">
        <xp:this.rendered><![CDATA[#{javascript:view1.getColumnCount() > 1}]]></xp:this.rendered>
        <xp:viewColumnHeader id="viewColumnHeader2"
            value="#{javascript:view1.getColumnNames().get(2)}">
        </xp:viewColumnHeader>
    </xp:viewColumn>

</xp:viewPanel>

</xp:view> 
```

现在您可以使用 URL 打开 XPage

```
http://example.com/yourdb.nsf/view.xsp?viewName=[NAME OF THE VIEW] 
```

此外，您可以添加*databaseName*参数以使用来自另一个数据库的视图。也可以计算其他属性（分类、排序等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T04:44:59.057

考虑使用重复控件而不是视图面板。这使您可以充分灵活地表示数据，而不是受限于视图面板的行为和假设。这使得设计一个足够灵活的页面来显示数据的任何子集变得更加容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T16:05:10.643

在 9 集中查看这些注释 [http://notesin9.com/index.php/2012/09/26/notesin9-079-how-to-use-the-xpages-dynamic-view-panel-control/](http://notesin9.com/index.php/2012/09/26/notesin9-079-how-to-use-the-xpages-dynamic-view-panel-control/)

[http://notesin9.com/index.php/2012/10/22/notesin9-083-using-the-xpages-dynamic-view-control-part-2/](http://notesin9.com/index.php/2012/10/22/notesin9-083-using-the-xpages-dynamic-view-control-part-2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T20:40:50.197

最好的解决方案是创建 2 个服务和一个页面：

1.  创建服务以将视图内容返回为 JSON（通过视图属性或代理或 Web 服务或 xPage，任何您填写的最适合您的内容）
2.  创建服务以将左侧菜单/视图列表返回为 JSON
3.  使用 javascript 核心创建 xPage，该核心将从点 1 和 2 加载数据并构建 UI。jQuery & jQuery UI 会帮助你。

这个解决方案将是灵活的，你会长大你的经验

# generics - 是否可以为同一类型提供多种不同的多方法实现？

> ID：13881949
> 
> 赞同：1
> 
> 时间：2012-12-14T15:49:45.597
> 
> 标签：generics, clojure, polymorphism, multimethod

如何为单个数据类型创建多方法的多个实现？

这可能不是一个很好的例子，但我希望它能说明这个想法：能够将嵌套向量都视为序列：

```
repl> (def thing [[[1] []] [27] [18 [32 35]]])

repl> (fmap count thing)
[2 1 2] 
```

和树：

```
repl> (fmap (partial + 1) thing)
[[[2] []] [28] [19 [33 36]]] 
```

为同一类型创建和使用多个多方法实现的一般方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:50:03.293

在您的问题中，您需要发送函数类型（fmap first arg）参数。AFAIK 没有（简单的？）方法来检测任何函数的参数类型（如果错误，请纠正我）。所以你必须将它作为一些元数据添加到参数或类似的东西。例如

```
(defmulti fmap (fn [f _] ((comp :arg-seq? meta) f)))

(defmethod fmap true [f col]
  (map-tree f col))

(defmethod fmap false [f col]
  (map f col))

(fmap (with-meta inc {:arg-seq? true}) thing)
-> [[[2] []] [28] [19 [33 36]]]

(fmap (with-meta count {:arg-seq? false}) thing)
-> (2 1 2) 
```

但这看起来不太好。如果有其他方法来获取函数参数的类型，那么解决方案可能会更漂亮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:41:22.363

多方法的想法是您对“不同的参数”（不一定是不同的类型）执行“相同的操作”。如果您想对“相同的参数”进行“不同的操作”，那么多方法将不适合，就像@DaoWen 建议的那样，仅使用单独的函数（甚至单独的多方法）可能是正确的方法去做吧。

如果您有某种以编程方式区分参数的方法，并且基于这些区别特征使用不同的方法实现在概念上是有意义的，那么您可以使用`defmulti`'`dispatch-fn`参数进行区分。

作为一个简单的例子，你可以使用一个 key :foo 作为 dispatch-fn，它会在一个 map 中与 key :foo 关联的值上进行调度，这个 map 作为单个参数传递给你的多方法。

# jquery - 在 jQuery 中克隆元素后更改 td

> ID：13881955
> 
> 赞同：0
> 
> 时间：2012-12-14T15:49:59.260
> 
> 标签：jquery

我想更改`<tr>`要克隆的元素中的第一个 TD。

`.deals_options`我在最后一个tr 元素之后克隆并插入

```
 var $orig = $('.deals_options:first');
            for (var i = 0; i < Math.abs(amount - selectCount); i++) {
                $orig.clone().insertAfter('.deals_options:last');
            } 
```

工作正常，但现在在这个 tr 元素`.deals_options`中，我想在第一个元素中添加 html `<td>`。

如何在我插入的克隆元素中的第一个 td 中插入文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:51:38.603

找到克隆元素中的第一个 td 并向其添加一些文本：

```
var $orig = $('.deals_options:first');
for (var i = 0; i < Math.abs(amount - selectCount); i++) {
     var clone = $orig.clone();
     clone.find('td:first').text("New Text");
     clone.insertAfter('.deals_options:last');
} 
```

[http://jsfiddle.net/Kgrhv/](http://jsfiddle.net/Kgrhv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:52:17.047

你有几个选择。如果你真的很喜欢单行（为了清楚起见，这里分成多行）：

```
$orig.clone()
     .insertAfter('.deals_options:last')
     .find('td')
     .first()
     .html("new content"); 
```

[实例](http://jsbin.com/olohis/2)| [来源](http://jsbin.com/olohis/2/edit)

或者，如果您真的非常想在将新内容添加到表格之前对其进行设置：

```
$orig.clone()
     .find('td:first')
     .html("new content")
     .end()
     .insertAfter('.deals_options:last'); 
```

[实例](http://jsbin.com/olohis/1)| [来源](http://jsbin.com/olohis/1/edit)

[`end`](http://api.jquery.com/end/)是 jQuery 比较晦涩的特性之一。

我自己并不那么喜欢单线，所以对我来说：

```
var clone;

// ...then in the loop...
clone = $orig.clone();
clone.find('td').first().html("new content");
clone.insertAfter('.deals_options:last'); 
```

[实例](http://jsbin.com/olohis/3)| [来源](http://jsbin.com/olohis/3/edit)

# javascript - 来自具有外部 iframe 的页面的跨域 ajax 调用

> ID：13881956
> 
> 赞同：0
> 
> 时间：2012-12-14T15:50:00.103
> 
> 标签：javascript, ajax, webkit, cross-domain

我使用 jquery 成功地使用了交叉请求 ajax 调用，设置它并从服务器`$.support.cors = true`发送适当的。`Access-Control-Allow-Origin`这一切都很好，直到我在页面上包含了一个 iframe，一个页面托管在另一台服务器上。

很快就会出现错误消息“Access-Control-Allow-Origin 不允许Origin ** ”。*又出现了。似乎包含 iframe 使包含页面看起来像是属于不同的域。这可能吗？这是 webkit 的已知行为（或错误）吗？（我在使用 Safari 和 Chrome 时遇到过这种情况，但使用 Firefox 可以正常工作）？有什么解决方法吗？

谢谢

# c#-4.0 - ZipDotNet 为随机文件创建相同的流

> ID：13881957
> 
> 赞同：0
> 
> 时间：2012-12-14T15:49:59.623
> 
> 标签：c#-4.0, stream, zip

我使用 C# 的 ZipDotNet 库。

我用这样的随机数据创建了一个字节数组：

```
public static byte[] GetRandomBytes(int Length)
        {
            byte[] data = new byte[Length];
            Random random = new Random();
            random.NextBytes(data);
            return data;
        } 
```

现在我想将这些字节压缩到 MemoryStream 并将 MemoryStream 作为字节数组返回。

```
public static byte[] zipFileToStream(byte[] file)
        {
            using (MemoryStream memStream = new MemoryStream())
            {
                using (ZipFile zip = new ZipFile())
                {
                    zip.AddEntry("file.txt", file);
                    zip.Save(memStream);
                }
                return memStream.ToArray();
            }
       } 
```

当我打印出返回的字节数组时，里面总是有相同的字节吗？

谁能帮我解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:23:32.540

您是否检查了 zipFileToStream 的整个输出？ZIP 存档对每个文件条目都有一些标题，在您的情况下，每次的第一个字节数都是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T10:41:30.670

将 MemoryStrream Position 设置为 0 解决了这个问题。

# c# - .NET 3.5 中的 URL 重写

> ID：13881958
> 
> 赞同：4
> 
> 时间：2012-12-14T15:50:02.823
> 
> 标签：c#, asp.net, url-rewriting

单击后，我页面上的链接将重定向到：

```
http://www.abc.com/document.aspx?sid=42&amp;rid=1&amp;mid=1 
```

我想在地址栏中显示为：

```
http://www.abc.com/models/childfirst/inbrief 
```

在哪里

*   `models`成为`rid`
*   `childfirst`成为`sid`
*   `inbried`成为`mid`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:57:11.577

根据您的示例 URL，我假设您使用的是 ASP.NET Web 窗体。如果正确，我建议您检查[URL 重写](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewriting-for-aspnet-web-forms)和[URL 友好](http://www.iis.net/learn/extensions/url-rewrite-module/user-friendly-url-rule-template)配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T18:35:00.160

达斯汀莱恩，我已经尝试了您提供的链接并尝试了这个，但它一直重定向到同一页面，

```
<rewriter>
<rewrite url="/models/(.+)" to="/document.aspx?sid=$1&amp;rid=$2&amp;mid=$3" />
<rewrite url="/implementation/(.+)" to="/document.aspx?sid=$1&amp;rid=$2&amp;mid=$3" />
<rewrite url="/outcomes/(.+)" to="/document.aspx?sid=$1&amp;rid=$2&amp;mid=$3" />
<rewrite url="/publications/(.+)" to="/document.aspx?rid=$1&amp;sid=$2&amp;mid=$3" />
<rewrite url="/help/(.+)" to="/document.aspx?rid=$1&amp;sid=$2&amp;mid=$3" />
<rewrite url="/aboutus/(.+)" to="/document.aspx?rid=$1&amp;sid=$2&amp;mid=$3" />
<rewrite url="/review/(.+)" to="/document.aspx?rid=$1&amp;sid=$2&amp;mid=$3" />
</rewriter> 
```

我认为它不是 $1,$2,$3 的值，因为在我的目标 url 中它就像 /document.aspx?sid=42&rid=1&mid=1 但是当我输入 url 时这是 /models/childfirst/inbrief。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:17:45.850

路由表：

[http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)

您还可以使用路由表，

全球.asax

RegisterRoutes(RouteTable.Routes); 在 application_onstart

然后创建所需的路线：

routes.MapPageRoute("name", "section/{category}", "~/section/index.aspx");

那么你可以使用：

_value = Page.RouteData.Values["category"] 作为字符串；

获取每个部分的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T16:04:59.350

我过去曾为 .NET 3.5 使用过 urlrewriter，它的效果非常好。

*链接已删除，因为它不再是工具。

# xaml - 如何在代码中更改网格视图中项目的布局

> ID：13881960
> 
> 赞同：1
> 
> 时间：2012-12-14T15:50:12.367
> 
> 标签：xaml, gridview, windows-8

我有一个带有自定义组的网格视图。在`MyTemplateSelector : DataTemplateSelector`我定义要使用的模板。使用[这篇文章](http://blogs.u2u.be/diederik/post/2012/03/07/Databinding-to-the-VariableSizedWrapGrid-in-Windows-8-Metro.aspx)，我创建了以下布局。 ![在此处输入图像描述](../Images/2b2cacbce96af74b0b394491937127e1.png) **如何调整“新闻 1”中第一项的大小以填充整个可用内容？**

这是我的网格的代码：

```
class ResizableGridView : GridView
    {
        protected override void PrepareContainerForItemOverride(DependencyObject element, object item)
        {
            var viewModel = item as IResizable;

            if (viewModel != null && viewModel.Width != 0 && viewModel.Height != 0)
            {
                element.SetValue(VariableSizedWrapGrid.ColumnSpanProperty, 2);
                element.SetValue(VariableSizedWrapGrid.RowSpanProperty, 2);
            }

            base.PrepareContainerForItemOverride(element, item);
        }
    }

 <resizeableGrid:ResizableGridView
            x:Name="itemGridView"
            AutomationProperties.AutomationId="ItemGridView"
            AutomationProperties.Name="Grouped Items"
            Grid.Column="3"
            Padding="116,137,40,46"
            ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
            ItemTemplateSelector="{StaticResource mySelector}"
            SelectionMode="None"
            IsSwipeEnabled="false"
            IsItemClickEnabled="True"
            ItemClick="ItemView_ItemClick"> 
```

以及使用的项目模板的代码。

```
<DataTemplate x:Key="tmp170x170ItemTemplate">
            <Grid HorizontalAlignment="Left" Width="170" Height="170">
                <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                    <Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}"/>
                </Border>
                <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
                    <TextBlock Text="{Binding Title}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="30" Margin="15,0,15,0"/>
                    <TextBlock Text="{Binding Subtitle}" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
                </StackPanel>
            </Grid>
        </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:20:41.973

设置静态网格的单元格高度和宽度很重要，如下所示：

```
 <GroupStyle.Panel>
    <ItemsPanelTemplate>
          <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0" ItemHeight="10" ItemWidth="10"/>
    </ItemsPanelTemplate>
 </GroupStyle.Panel> 
```

现在，在代码中，在设置 ColumnSpan/RowSpan 时，您可以轻松设置自定义大小。因此，如果您希望单元格为 500 x 200，则应设置：

```
 element.SetValue(Windows.UI.Xaml.Controls.VariableSizedWrapGrid.ColumnSpanProperty, 50);
 element.SetValue(Windows.UI.Xaml.Controls.VariableSizedWrapGrid.RowSpanProperty, 20); 
```

并且，要删除 DataTemplate 上的高度/宽度：

```
<DataTemplate x:Key="VariableSizeItemTemplate">
            <Grid HorizontalAlignment="Left">
                <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                    <Image Source="{Binding Image}" Stretch="UniformToFill" HorizontalAlignment="Center" AutomationProperties.Name="{Binding Title}"/>
                </Border>
                <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
                    <TextBlock Text="{Binding Title}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="30" Margin="15,0,15,0"/>
                    <TextBlock Text="{Binding Subtitle}" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
                </StackPanel>
            </Grid>
        </DataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:54:42.603

从您的项目模板中删除宽度和高度属性，如下所示：

```
<DataTemplate x:Key="tmp170x170ItemTemplate">
        <Grid HorizontalAlignment="Left">
            <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                <Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}"/>
            </Border>
            <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
                <TextBlock Text="{Binding Title}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="30" Margin="15,0,15,0"/>
                <TextBlock Text="{Binding Subtitle}" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
            </StackPanel>
        </Grid>
    </DataTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T16:28:57.327

你的所有步骤都很好。但是，如果您在数据模板中设置项目宽度、项目高度；所有物品都有标准尺寸。项目模板必须灵活布局这种情况。此解决方案可以解决您的要求：

```
protected override void PrepareContainerForItemOverride(Windows.UI.Xaml.DependencyObject element, object item)
{
    base.PrepareContainerForItemOverride(element, item);

    try
    {
        dynamic _item = item;
        element.SetValue(Windows.UI.Xaml.Controls.VariableSizedWrapGrid.ColumnSpanProperty, _item.ColSpan);
        element.SetValue(Windows.UI.Xaml.Controls.VariableSizedWrapGrid.RowSpanProperty, _item.RowSpan);

    }
    catch
    {
        element.SetValue(Windows.UI.Xaml.Controls.VariableSizedWrapGrid.ColumnSpanProperty, 1);
        element.SetValue(Windows.UI.Xaml.Controls.VariableSizedWrapGrid.RowSpanProperty, 1);
    }
    finally
    {
        base.PrepareContainerForItemOverride(element, item);
    }
} 
```

如果不使用 ColumnSpanProperty,RowSpanProperty; 更改“if”代码条件。

你的数据模板可以是这样的：

```
 <DataTemplate x:Key="NewsShowCaseItemTemplate">
        <Grid Margin="6">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" Width="110" Height="110">
                <Image Source="{Binding Thumbnail}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}"/>
            </Border>
            <StackPanel Grid.Column="1" VerticalAlignment="Top" Margin="10,0,0,0">
                <TextBlock Text="{Binding Title}" Style="{StaticResource TitleTextStyle}"/>
                <TextBlock Text="{Binding Summary}" Style="{StaticResource CaptionTextStyle}" />
            </StackPanel>
        </Grid>
</DataTemplate> 
```

问候;）

# jpa - 命名查询中的异常

> ID：13881961
> 
> 赞同：0
> 
> 时间：2012-12-14T15:50:20.957
> 
> 标签：jpa

当我的应用程序启动时，JPA 给我一个错误。错误在命名查询中：

```
org.hibernate.HibernateException: Errors in named queries: MyEntity.MyQuery org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:435)
org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1385)
org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)
org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:883)
org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:56)
javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:48)
javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:32) 
```

实体代码：

```
@NamedQuery(name = "MyEntity.MyQuery", query = "SELECT r FROM MyEntity r WHERE r.cdSecao = :secao AND r.cdPublico IN :publico")

// other class stuff declarations...

    @JoinColumn(name = "cd_publico", referencedColumnName = "cd_publico")
@ManyToOne
private TbPublico cdPublico;

@JoinColumn(name = "cd_secao", referencedColumnName = "cd_secao")
@ManyToOne
private TbSecao cdSecao;

// getters setters and assorted shenanigans... 
```

然后在 DAO 中，我用这个方法调用它，即使在 EntityManager 的初始化时抛出异常（因为它是一个命名查询和东西）。但为了完整起见，这里是：

```
public List<MyEntity> listMyEntity(String idPublico, TbSecao secao) {
    List<TbPublico> listaPublico = OtherClass.doMcGuffin(idPublico);

    EntityManager em = EMFactory.getEntityManager();
    TypedQuery<MyEntity> theQuery= em.createNamedQuery("MyEntity.MyQuery", MyEntity.class);
    theQuery.setParameter("secao", secao);
    theQuery.setParameter("publico", listaPublico);

    return theQuery.getResultList();

} 
```

回到命名查询...如果我删除`AND r.cdPublico IN :publico`它可以工作，但我需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:38:43.777

像这样修改查询

从 MyEntity r 中选择 r，其中 r.cdSecao = :secao AND r.cdPublico IN (:publico)

当您在查询中使用 IN 语句时，它应该进入 ()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T10:37:39.893

解释 a 怎么`TbPublico`可能是 IN a `List<Integer>`??? 它可能是在一个`List<TbPublico>`

# gtk - 我无法在 ubuntu for windows 上编译一些 gtk c 代码

> ID：13881962
> 
> 赞同：0
> 
> 时间：2012-12-14T15:50:25.917
> 
> 标签：gtk, mingw, ubuntu-12.04

首先，我必须说我是 linux 新手。我使用 ubuntu 并尝试编译一些 c 代码。我学习了 gtk 并用 gcc 编译了一些程序，但我想为 windows 制作它。这就是为什么我将 gtk for windows 下载到一个包中，并将 include 和 lib 文件夹放入 /usr/i686-w64-mingw32。但是当我尝试用 mingw 编译我的源代码时，它说找不到 gtk/gtk.h。我应该怎么办？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:47:04.333

将您所在的目录添加`pkg-config.exe`到您的目录`PATH`，或将`PKG_CONFIG_DIR`环境变量设置为该目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T09:02:18.903

我知道这个问题真的很老了，但是......

交叉编译时，您需要使用“--sysroot”参数指定 sysroot。

> `--sysroot=dir`: 使用 dir 作为头文件和库的逻辑根目录。例如，如果编译器通常会在 /usr/include 中搜索头文件并在 /usr/lib 中搜索库，那么它将改为搜索 dir/usr/include 和 dir/usr/lib。[[参考]][1]

执行此操作时，包含路径等均相对于 sysroot，在您的情况下为“/usr/i686-w64-mingw32/”。由于您将库放在“lib”中，而将头文件放在“include”中，所以除了使用 GTK 编译可能需要的任何额外参数之外，一切都应该正常工作。

如果您查看“pkg-config --cflags gtk+-2.0”的输出，那么它应该如下所示：

-pthread -I/usr/include/gtk-2.0 -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include -I/usr/include/gio-unix-2.0/ -I/usr/include/ cairo -I/usr/include/pango-1.0 -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pixman-1 -I/usr/include/libpng12 -I/ usr/include/gdk-pixbuf-2.0 -I/usr/include/libpng12 -I/usr/include/pango-1.0 -I/usr/include/harfbuzz -I/usr/include/pango-1.0 -I/usr/包括/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/freetype2

如果您正在指定 sysroot 并且仍然收到您报告的错误，那么您可能将头文件放在错误的文件夹中。gtk.h 的本机路径是“/usr/include/gtk-2.0/gtk/gtk.h”，因此要交叉编译 mingw GTK 包中的版本，应将其复制到“/usr/i686-w64-mingw32/包括/gtk-2.0/gtk/gtk.h”。

最后请注意，pkg-config 为您提供“-I/usr/lib/x86_64-linux-gnu/gtk-2.0/include”。如果您正确指定 sysroot，并将头文件放在 pkg-config 描述的位置，则此包含路径可能仍然会给您带来问题。问题是 pkg-config 为您提供了本机编译的答案，而您想要交叉编译。

# android - 适配器显示一种行而不是另一种

> ID：13881963
> 
> 赞同：0
> 
> 时间：2012-12-14T15:50:29.867
> 
> 标签：android, list, arraylist, adapter

这是我的适配器的代码：

```
public class LogHistoryAdapter extends BaseAdapter {
private Context context = null;
private ArrayList<LogListItem> logList = null;

public LogHistoryAdapter(Context context) {
    this.context = context;
    logList = new ArrayList<LogHistoryAdapter.LogListItem>();

    LogListItem item1 = new LogListItem(Type.HEADER, "", "", "", "Wednesday, Jan 13 2012");
    logList.add(item1);
    LogListItem item2 = new LogListItem(Type.CLICKBLE, "ID ", "bla" , "Range 1m" , "");
    logList.add(item2);
    LogListItem item3 = new LogListItem(Type.CLICKBLE, "ID ", "bla" , "Range 1m" ,"");
    logList.add(item3);
    LogListItem item4 = new LogListItem(Type.CLICKBLE, "ID ", "bla" , "Range 1m", "" );
    logList.add(item4);
    LogListItem item5 = new LogListItem(Type.HEADER, "", "", "", "Tuesday, Jan 12 2012");
    logList.add(item5);
    LogListItem item6 = new LogListItem(Type.CLICKBLE, "ID ", "bla" , "Range 1m" , "");
    logList.add(item6);
    LogListItem item7 = new LogListItem(Type.CLICKBLE, "ID ", "bla" , "Range 1m" ,"");
    logList.add(item7);
    LogListItem item8 = new LogListItem(Type.CLICKBLE, "ID ", "bla" , "Range 1m" , "");
    logList.add(item8);
}

public enum Type {
    HEADER, CLICKBLE;
}

public class LogListItem {

    Type type;
    String name;
    String details;
    String id;
    String header;
    public LogListItem(Type type, String id, String name, String details, String header) {
        this.type = type;
        this.name = name;
        this.id = id;
        this.details = details;
        this.header = header;
    }

}

public int getCount() {
    return logList.size();
}

public Object getItem(int position) {
    return logList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View rowView, ViewGroup parent) {
    final SettingsViewHolder holder;
    LogListItem currentObj = logList.get(position);
    if (rowView == null) {

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        rowView = inflater.inflate(R.layout.row_settings_log, parent, false);
        holder = new SettingsViewHolder();

        switch (currentObj.type) {
        case HEADER:
            holder.layout = (RelativeLayout) rowView.findViewById(R.id.settingsItemLayoutLog);
            holder.text = (TextView) rowView.findViewById(R.id.settingsItemLog);
            break;
        case CLICKBLE:
            holder.layout = (RelativeLayout) rowView.findViewById(R.id.settingsSubitem1LayoutLog);
            holder.text = (TextView) rowView.findViewById(R.id.settingsSubItem1TxtViewLog);
            holder.text2 = (TextView) rowView.findViewById(R.id.settingsSubItem1TxtView2Log);
            holder.text3 = (TextView) rowView.findViewById(R.id.settingsSubItem1TxtView3Log);
            break;
        default:
            break;

        }
        rowView.setTag(holder);

    } else {
        holder = (SettingsViewHolder) rowView.getTag();
    }
    switch (currentObj.type) {
    case HEADER:
        LogService.log("header", "header: " + currentObj.header);
        LogService.log("header", "id: " + currentObj.id);
        LogService.log("header", "name: " + currentObj.name);
        LogService.log("header", "details: " + currentObj.details);
        LogService.log("=====", "===============================");
        holder.layout.setVisibility(View.VISIBLE);
        holder.text.setText(currentObj.header);
        break;

    case CLICKBLE:
        holder.layout.setVisibility(View.VISIBLE);
        LogService.log("clickable", "header: " + currentObj.header);
        LogService.log("clickable", "id: " + currentObj.id);
        LogService.log("clickable", "name: " + currentObj.name);
        LogService.log("clickable", "details: " + currentObj.details);
        LogService.log("clickable", "===============================");
        holder.text.setText(currentObj.id);
        //                holder.text2.setText(currentObj.name);
        //                holder.text3.setText(currentObj.details);

        break;
    default:
        break;
    }

    return rowView;
}

static class SettingsViewHolder {
    CheckBox checked;
    TextView text;
    TextView text2;
    TextView text3;
    RelativeLayout layout;

}
} 
```

现在，此列表看起来类似于 Android 设置页面中的列表。它有标题，只有 TextView (Type.HEADER) 中的日期，然后它有按钮 (Type.CLICKBLE)。问题是，当它创建列表时，在第二个标题（“Tuesday, Jan 12 2012”）之后，下一个按钮，即 CLICKBLE（item6）被创建为 HEADER，然后应用程序崩溃，因为 HEADER只有 1 个 TextView，而 CLICKBLE 类型有 3 个 TextView。所以当我尝试将 setText 设置为第二个 TextView 时它崩溃（在 HEADER 中，它不存在）。我需要知道，为什么适配器会弄乱我的列表，并且还会弄乱项目的类型。目前使用此代码，我没有收到 ANR 错误，但我无法将第二个和第三个文本写入 CLICKBLE 类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:56:17.177

对于您尝试实现的目标，您还应该覆盖`getViewTypeCount()` `getItemViewType(int position)`. 调用以选择应该使用`getItemViewType`哪种视图。必须返回要膨胀的不同视图的数量（我认为是两个）。`getView``getViewTypeCount`

```
public static final int NORMAL_ROW = 0;
public static final int DARKGRAY_ROW = 1;
@override
public int getViewTypeCount() {
      return 2;
}

@override
public int getItemViewType(int position) {
  LogListItem currentObj = logList.get(position);
  return (currentObj.type == HEADER) ? NORMAL_ROW :  DARKGRAY_ROW ;
} 
```

# jquery - jQuery.css()，这些位置/大小值是什么单位？

> ID：13881967
> 
> 赞同：-1
> 
> 时间：2012-12-14T15:50:44.910
> 
> 标签：jquery

我经常看到这样的代码：

```
 jQuery('#aslkdjf').css({top:2+'px'}); 
```

我可以摆脱：

```
 +'px' 
```

? 还是我必须配置这些值的默认单位？

有官方文件吗？

**在这种情况下，即使社区也不确定**：用户“piki”在页面[http://api.jquery.com/css/](http://api.jquery.com/css/)上的第一条评论表明有时使用 mm，有时使用 px。Piki 的问题甚至有 55 个赞（我的帖子也不是试图获得 8D 的赞）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:54:01.027

> CSS（{顶部：2}）

按您的预期工作；'px' 默认

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:52:45.033

我很确定默认类型，如果你只说一个整数，是'px'......我也成功应用了其他类型，比如'50%'等......

```
$('#aslkdjf').css({width:'50%'}); //Set to 50%
$('#aslkdjf').css({width:5}); //Set to 5 px 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T15:08:40.170

正如 Rob W 所写，

查看源代码（http://james.padolsey.com/jquery/#v=git&fn=jQuery.style）是解决方案。

Scott Evernden 和 jamis0n 也是对的。

# java - Solr 4.0 如何加入子文档

> ID：13881970
> 
> 赞同：2
> 
> 时间：2012-12-14T15:50:54.343
> 
> 标签：java, solr, solrj

我注意到 solr 4.0 有一个连接功能，我想用它来连接子文档。

就像是

```
<book>
<bookid>1</bookid>
<Title>This book is epic</title>
</book>

<page>
<bookid>1</bookid>
<number>1</number>
<pagecontent>this is the first page of the epic book</pagecontent>
</page>

<page>
<bookid>1</bookid>
<number>2</number>
<pagecontent>this is the second page of the epic book</pagecontent>
</page> 
```

**如何加入这些子文档？**

我`q=text:second .` 想像 Where text is a copyfield 一样查询这个，其中包含所有其他字段。

结果应该是第二页和它的书。我有一个更复杂的架构，然后只是书本和页面。还有其他类型的子文档具有父 id:book。

在 Solr 3.6 中，我将所有这些子文档存储为多值字段，并检查组合是否与连接字段一起存在。这不是一个好方法，需要大量编码 + 它依赖于 Java 的 Strings.contains。我希望solr 4.0加入可以帮助我。但我不明白如何编写正确的查询以及如何检索带有页面列表的书之类的结果。

我还阅读了有关为每个子文档类型使用多个索引的信息，但我不知道这将如何影响文档评分等。

编辑：

[Solr 加入](http://wiki.apache.org/solr/Join)

在这里他们说他们只将内部查询的结果放入最终结果中。我是否应该更改 id 进行 2 次查询，然后合并结果？这对我来说也很糟糕......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:32:57.673

新答案：索引父子并使用块连接查询。查看[区块连接信息](https://cwiki.apache.org/confluence/display/solr/Other+Parsers#OtherParsers-BlockJoinQueryParsers)

下面的答案是旧的。新的 solr 版本支持 blockjoin，无需编写插件等。

我通过为 solr 制作 queryparserplugin 来使用 lucenequerytimejoin（此连接在子文档上有评分选项）。

这个链接解释了我所做的一点：[Querytimejoin Solr](http://lucene.472066.n3.nabble.com/How-to-combine-Qparsers-in-a-plugin-tc4035011.html#a4035279)

在这里，一位 lucene 开发人员解释了 quertimejoin：[Blog QueryTimeJoin](http://www.searchworkings.org/blog/-/blogs/412000)

此方案不支持多核。（trunk solr join 有这个）。

# nhibernate - Fluent NHibernate 映射可空枚举

> ID：13881971
> 
> 赞同：6
> 
> 时间：2012-12-14T15:50:56.797
> 
> 标签：nhibernate, enums, mapping, nullable, fluent

我需要在我的班级中映射一个可为空的枚举，但我遇到了异常。

NHibernate.PropertyAccessException: Invalid Cast (检查你的映射是否有属性类型不匹配); App.Model.Stock 的设置器 ---> System.InvalidCastException：指定的强制转换无效。

我已将问题缩小到一个特定的属性，我将在下面进行描述。

之前已[在此处](https://stackoverflow.com/questions/836062/how-can-i-map-a-nullable-enum-in-nhibernate)回答，但该解决方案链接到不再存在的页面。

这是我的代码，我已将其简化为仅包含我关心的部分。

```
public enum eColor
{
    Red,
    Blue
}

public class Stock 
{
    public virtual eColor? Color { get; protected set; }
} 
```

这是我的映射（精简）：

```
public class StockMap : ClassMap<Stock>
{
    Map(x => x.Color).CustomType<int>();
} 
```

我已经尝试了以下所有方法，结果相同：

```
Map(x => x.Color).CustomType<int>();
Map(x => x.Color).CustomType<int?>();
Map(x => x.Color).CustomType<int>().Nullable();
Map(x => x.Color).CustomType<int?>().Nullable(); 
```

这似乎是很久以前的一个错误，并且有一个解决方法。我正在使用 Fluent 1.3.0.0 和 NHibernate 3.3.1.4000。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T15:56:31.170

您应该在CustomType<T>() 中指定枚举类型，例如CustomType<eColor>()。这将为您提供数据库中的整数。

# jquery - jquery google feed 插件没有输出

> ID：13881974
> 
> 赞同：1
> 
> 时间：2012-12-14T15:50:58.903
> 
> 标签：jquery, ajax, google-feed-api

我正在使用[JQuery Google Feed 插件 (gFeed)](http://jquery.malsup.com/gfeed/)来输出 RSS 提要。我之前已经成功地使用过这个替代方案，但不幸的是我偶然发现了一些问题。RSS 提要拒绝输出到指定的 div。我已确认 使用 Google 阅读器正确显示提要[https://www.phpbb.com/community/feed.php?mode=news 。](https://www.phpbb.com/community/feed.php?mode=news)

我的网站是`http://removed/index`并且我还咨询了 [Google Feed API 开发人员页面][3]。

这是我的代码：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<!-- include this plugin -->
<script type="text/javascript" src="jquery.gfeed.js"></script>
<script type="text/javascript">

 // when the DOM is ready, convert the feed anchors into feed content
  $(document).ready(function() {
   // add a feed manually
    $('#feeds').gFeed({ 
       url: 'https://www.phpbb.com/community/feed.php?mode=news',
         title: 'A List Apart Feed (Added by Brute Force)'
     });    
    });
    </script>

     <div id="feeds">

     </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:32:18.973

JQuery gFeed 插件很旧（2007 年），它使用 FeedControl，我相信它已被 Google 弃用。

我建议使用[jquery-feeds 插件](https://github.com/camagu/jquery-feeds)，然后使用如下代码：

```
$('#feeds').feeds({
    feeds: {
        feed1: 'https://www.phpbb.com/community/feed.php?mode=news'
    }
});​ 
```

[在这里摆弄一个演示](http://jsfiddle.net/mccannf/XmY9d/1/)。

# java - Spring 3.1 DefaultHandlerExceptionResolver 覆盖/禁用

> ID：13881979
> 
> 赞同：4
> 
> 时间：2012-12-14T15:51:20.037
> 
> 标签：java, spring, spring-mvc, exception-handling

升级到 Spring 3.1 后，我注意到我的自定义 SimpleMappingExceptionResolver 不再处理丢失的请求参数异常（MissingServletRequestParameterException）和其他“默认”异常。相反，Spring 的 DefaultHandlerExceptionResolver 正在吞噬异常并返回 400 错误。

我想让我的自定义异常解析器继续解析所有异常。我不确定如何执行此操作（是否使用无操作解析器禁用或覆盖 DefaultHandlerExceptionResolver）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:12:02.743

每个解析器都有一个“订单”属性。这可用于调整解析器相对于彼此的优先级。通过增加我的解析器的优先级（低阶），它将在 Spring 的默认异常解析器之前被调用。

# compression - 计算理论文本文件的大小

> ID：13881981
> 
> 赞同：2
> 
> 时间：2012-12-14T15:51:23.210
> 
> 标签：compression, theory, filesize, floppy

我正在写一篇关于人口普查局到 2060 年的[人口预测](http://www.census.gov/population/projections/data/national/2012/downloadablefiles.html)的文章，该文章在未压缩时包含一个 3.3 MB 的 .csv 文件。

该文件由 539,781 个值组成，每个值是 5-7 位，占用 3,455,372 个字符。当我 gzip 文件时，它下降到 1550063 字节，即 1.47 MB​​。

我希望能够如实说明它可以安装在 3.5 英寸软盘上，最大容量为 1.44 MB。这只是一个参考点，而不是给需要说明如何操作的用户的建议。

有没有办法根据上面的字符数计算文本文件的理论大小？如果我们真的有一张 3.5 英寸的软盘和一个驱动器，是否有可能在不丢失信息的情况下将这个文件放在磁盘上？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T17:53:01.827

不，不可能仅根据文件的字符数来估计文件压缩版本的大小。不同的字符串可以以不同的效率进行压缩；纯由一个字符组成的字符串比纯随机生成的字符串更容易压缩。

在信息论中，有一个 Kolmogorov 复杂度的概念，它（或多或少）是重构字符串所需的最少信息量。并非所有字符串都可以压缩成更小的字符串，并且不可能建立一个通用算法来找到任意字符串的 Kolmogorov 复杂度。此外，一旦字符串足够长，就不可能证明您已经找到了字符串的最佳编码。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:47:59.540

如果您想说它适合 1.44 MB 软盘，那么只需使用更好的压缩器来证明它。尝试 7-Zip 或 xz（取决于您的平台）。你已经足够接近了，我相信这会成功。（你使用 gzip -9 吗？）

顺便说一句，我不确定它的实用性，因为当你向他们描述这个“软盘”东西时，很多人都不知道你在说什么。

如前所述，是否不可能计算出理论上的最佳压缩率。只需使用最好的压缩机来进行估算。

*更新：*

下载了它。xz 将其压缩为 1177180 字节。所以是的，它适合。

# ruby-on-rails - 子类别中的 NoMethodError#index

> ID：13881986
> 
> 赞同：1
> 
> 时间：2012-12-14T15:51:46.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我是 ruby​​ on rails 的新手。我正在尝试创建一个在类别下具有子类别的应用程序，但我不断收到错误消息：NoMethodError in Subcategories#index

显示 C:.../app/views/subcategories/index.html.erb 其中第 16 行提出：

nil 的未定义方法“名称”：NilClass 提取的源代码（大约第 16 行）：

```
13: <% @subcategories.each do |subcategory| %>
14:   <tr>
15:     <td><%= subcategory.name %></td>
16:     <td><%= subcategory.category.name %></td>
17:     <td><%= link_to 'Show', subcategory %></td>
18:     <td><%= link_to 'Edit', edit_subcategory_path(subcategory) %></td>
19:     <td><%= link_to 'Destroy', subcategory, confirm: 'Are you sure?', method: :delete %></td> 
```

这些是我的文件结构：

```
subcategories_controller.rb
class SubcategoriesController < ApplicationController
    before_filter :login_required, :only => [:edit, :update, :new, :create, :index, :destroy]

  # GET /subcategories
  # GET /subcategories.json
  def index
    @subcategories = Subcategory.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @subcategories }
    end
  end

  # GET /subcategories/1
  # GET /subcategories/1.json
  def show
    @subcategory = Subcategory.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @subcategory }
    end
  end

  # GET /subcategories/new
  # GET /subcategories/new.json
  def new
    @subcategory = Subcategory.new
    @categories = Category.all

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @subcategory }
    end
  end

  # GET /subcategories/1/edit
  def edit
    @subcategory = Subcategory.find(params[:id])
    @categories = Category.all
  end

  # POST /subcategories
  # POST /subcategories.json
  def create
    @subcategory = Subcategory.new(params[:subcategory])

    respond_to do |format|
      if @subcategory.save
        format.html { redirect_to @subcategory, notice: 'Subcategory was successfully created.' }
        format.json { render json: @subcategory, status: :created, location: @subcategory }
      else
        format.html { render action: "new" }
        format.json { render json: @subcategory.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /subcategories/1
  # PUT /subcategories/1.json
  def update
    @subcategory = Subcategory.find(params[:id])

    respond_to do |format|
      if @subcategory.update_attributes(params[:subcategory])
        format.html { redirect_to @subcategory, notice: 'Subcategory was successfully updated.' }
        format.json { head :ok }
      else
        format.html { render action: "edit" }
        format.json { render json: @subcategory.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /subcategories/1
  # DELETE /subcategories/1.json
  def destroy
    @subcategory = Subcategory.find(params[:id])
    @subcategory.destroy

    respond_to do |format|
      format.html { redirect_to subcategories_url }
      format.json { head :ok }
    end
  end
end 
```

_form.html：

```
<%= form_for(@subcategory) do |f| %>
  <% if @subcategory.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@subcategory.errors.count, "error") %> prohibited this subcategory from being saved:</h2>

      <ul>
      <% @subcategory.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :category_id %><br />
    <%= f.collection_select :category_id, Category.all(:order => "name"), :id, :name,:prompt => "-- Select a Category --"%>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

index.html.erb：

```
<h1>My subcategories</h1>
<h4><a href="categories">Category</a>               <a href="my_account">My Account</a>                  <a href="log_out">Log out</a></h4>

<table>
  <tr>
    <th>Name</th>
    <th>Category</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @subcategories.each do |subcategory| %>
  <tr>
    <td><%= subcategory.name %></td>
    <td><%= subcategory.category.name %></td>
    <td><%= link_to 'Show', subcategory %></td>
    <td><%= link_to 'Edit', edit_subcategory_path(subcategory) %></td>
    <td><%= link_to 'Destroy', subcategory, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Subcategory', new_subcategory_path %> 
```

多谢你们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T15:56:45.710

您的子类别的类别为零。使用不允许在 category_id 字段中为 null 的 db 约束来修复它，或者像这样检查视图：

```
<td><%= subcategory.category.name if subcategory.category %></td> 
```

# xslt - 移除没有对应 id 属性的 refid

> ID：13881991
> 
> 赞同：0
> 
> 时间：2012-12-14T15:51:57.947
> 
> 标签：xslt

我正在尝试清理一些 XML 文档并删除所有没有相应 id 的 idref。无论出于何种原因，我都没有得到解决这个愚蠢问题的语法。我以为会是这样的……

```
<xsl:template match="*">
 <xsl:variable name="id_list" select="@id"/>
 <xsl:if test="ref[not(contains($id_list, ./@rid))]">
   <!-- do nothing -->
 </xsl:if>
 <xsl:copy>
  <xsl:apply-templates select="node()|@*"/>
 </xsl:copy>
</xsl:template> 
```

*   ref 是元素名称，@rid 是 refid

样本输入将类似于以下内容......

```
<?xml version="1.0" encoding="iso-8859-1"?>
<article>
 <bdy>
  <p>In the second category [<ref rid="bibtts2009060795101" type="bib">2</ref>] and third category [<ref rid="bibtts2009060795102" type="bib">3</ref>]</p>
 </bdy>
 <bib>
  <bb pubtype="article" reftype="nonieee" id="bibtts2009060795101"><au sequence="first"><fnm>T.</fnm><snm>Smith</snm></au></bb>
 </bib>
</article> 
```

第二个引用`<ref rid="bibtts2009060795102" type="bib">3</ref>`将被删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:23:46.807

```
<xsl:variable name="id_list" select="@id"/> 
```

在模板中将`$id_list`变量设置为一个节点集，其中最多包含一个节点 - `id`（单个）元素的属性，它是模板中的上下文节点。更好的方法可能是在样式表的顶层定义一个*键*`id`，以将每个值映射到其对应的元素

```
<xsl:key name="elementById" match="*[@id]" use="@id" /> 
```

然后给定一个特定的 refid 值，您可以`id`使用`key('elementById', 'theRefValue')`. 这是一个完整的例子：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:key name="elementById" match="*[@id]" use="@id" />

  <!-- copy everything verbatim by default -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <!-- but ignore all ref elements whose @rid does not
       correspond to any id -->
  <xsl:template match="ref[not(key('elementById', @rid))]" />
</xsl:stylesheet> 
```

当应用于您的示例文档（稍微换行的版本）时

```
<?xml version="1.0" encoding="iso-8859-1"?>
<article>
 <bdy>
  <p>In the second category [<ref rid="bibtts2009060795101" type="bib">2</ref>]
     and third category [<ref rid="bibtts2009060795102" type="bib">3</ref>]</p>
 </bdy>
 <bib>
  <bb pubtype="article" reftype="nonieee" id="bibtts2009060795101"><au sequence="first"><fnm>T.</fnm><snm>Smith</snm></au></bb>
 </bib>
</article> 
```

会产生

```
<?xml version="1.0" encoding="iso-8859-1"?>
<article>
 <bdy>
  <p>In the second category [<ref rid="bibtts2009060795101" type="bib">2</ref>]
     and third category []</p>
 </bdy>
 <bib>
  <bb pubtype="article" reftype="nonieee" id="bibtts2009060795101"><au sequence="first"><fnm>T.</fnm><snm>Smith</snm></au></bb>
 </bib>
</article> 
```

# ios - SBJson 解析器应该给出字典对象但给出 NSArray 对象

> ID：13881993
> 
> 赞同：-1
> 
> 时间：2012-12-14T15:52:13.680
> 
> 标签：ios

```
 NSDictionary *rData = (NSDictionary *) [jParser objectWithString:responseString error:nil]; 
```

rData 应该是一个`NSDictionary`对象。但它似乎是一系列字典。然后我 `[[rData allKeys] objectAtIndex:0]`用来访问字典的第一个键。但它的崩溃说 `[NSArrayM allKeys]`无法识别的选择器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:55:30.373

JSON 数据可以是顶层的数组或字典。如果您的 JSON 以 { 开头，那么它将是一个字典。如果它以 [ 开头，那么它将是一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:03:39.760

您是否 100% 了解您所接受的课程？

关于`objectWithString`：

> 此方法将其输入转换为包含 UTF8 的 NSData 对象，并使用它调用 -objectWithData:。
> 
> 返回：对象表示的**NSArray**或**NSDictionary**，如果发生错误，则返回 nil。

尝试调试这个。你有两个（至少！）选项：

```
NSLog(@"%@",[rData class]); 
```

或者

```
NSLog(@"%@",[[jParser objectWithString:responseString error:nil] class]); 
```

或者只是在输出中：

```
po [[jParser objectWithString:responseString error:nil] class]; 
```

# windows - 如何使用自动热键将窗口停靠在左侧？

> ID：13881995
> 
> 赞同：2
> 
> 时间：2012-12-14T15:52:17.157
> 
> 标签：windows, autohotkey

在 Windows 7 中，您可以将一个窗口拖到屏幕最左侧的位置，它会自行停靠在那里，扩展到屏幕的整个高度和一半宽度。

有没有一种简单的方法可以使用 AutoHotKey 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-01T13:01:44.513

有点晚了，但我遇到了同样的问题，需要将窗口停靠集成到 AHK 命令链中。这对我有用：

```
Send {LWin down}{Left}{LWin up} 
```

如果您在快捷键中使用 Alt 或 Ctrl，则需要使用 KeyWait，例如：

```
KeyWait Ctrl
Send {LWin down}{Left}{LWin up}
return 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T15:54:03.553

Emmm，不确定这是否是您要查找的内容，但 windowskey+left 会将当前窗口停靠在左侧。你甚至不需要自动热键来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:18:55.583

我决定最好的方法 - 特别是因为我有两台显示器并且可能希望一个窗口停靠到特定的显示器 - 是首先手动停靠它，然后使用 Window Spy 获取停靠窗口的坐标和宽度/高度。然后我可以使用 WinMove 命令将它发送到那个位置。

# swing - SwingX 组件是否有阿拉伯语、俄语或希腊语的翻译？

> ID：13881999
> 
> 赞同：2
> 
> 时间：2012-12-14T15:52:41.397
> 
> 标签：swing, swingx, jxtable

当我按下 CTRL+F 时，我正在使用一个包含搜索功能的 JXTable。

如果我将语言环境定义为英语或法语，则此搜索窗口的默认文本会自动翻译为活动语言环境。但是，如果我将其更改为以下任何一种语言（阿拉伯语、俄语或希腊语），则搜索窗口组件的文本默认为英语。

有没有办法通过将我自己的属性文件放在类路径中来为这个组件或任何其他 SwingX 组件定义我自己的翻译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T13:20:00.067

打开 swingx jar 文件，查找包含您要翻译的值的属性文件，然后使用适当的语言环境扩展名创建您自己的文件。例如，

```
org/jdesktop/swingx/plaf/basic/resources/swingx_ru.properties 
```