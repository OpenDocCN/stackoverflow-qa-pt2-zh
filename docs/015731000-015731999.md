# StackOverflow 问答 15731000-15731999

# ios - UIActionSheet第五个按钮不起作用

> ID：15731000
> 
> 赞同：0
> 
> 时间：2013-03-31T15:26:56.620
> 
> 标签：ios, uiactionsheet

我在一个包含 5 个按钮的通用应用程序中有一个 UIActionSheet。问题是，您无法按下最后一个（第五个按钮）。我尝试删除破坏性按钮（共六个），但第五个按钮仍然不起作用。它在 iPad 上运行良好，但显然有更多的不动产，并且显示在弹出窗口中......

这里发生了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:44:57.810

当然，只要我发布这个问题，我就会找到解决方案。

对于其他正在查看此内容的人：在 iPhone 上，您必须从 tabBar 或 toolBar 呈现以获得完整的空间，以便可以处理总共 6 个按钮。您不能从视图中呈现...

# php - 如何设置虚拟服务器？

> ID：15731001
> 
> 赞同：-2
> 
> 时间：2013-03-31T15:27:04.673
> 
> 标签：php

我想在我的 PC 上创建一个网站，但 PHP 无法正常工作。

是否有任何软件可以让我在我的 PC 上模拟服务器以完成此（网站）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T15:28:14.860

如果您使用 Windows（[Mac](http://www.apachefriends.org/en/xampp-macosx.html)和[Linux](http://www.apachefriends.org/en/xampp-linux.html)上的 XAMPP 也是如此），您可以考虑使用[WAMP](http://www.wampserver.com/en/)或[XAMPP](http://www.apachefriends.org/en/xampp-windows.html)服务器，启动和运行非常简单，您将能够立即测试您的 PHP。

# haskell - 创建单色 PNG 图像时堆栈溢出

> ID：15731002
> 
> 赞同：3
> 
> 时间：2013-03-31T15:27:09.160
> 
> 标签：haskell, png, stack-overflow

[我在此页面](http://www.haskell.org/haskellwiki/Library/PNG)上找到了一个使用 Haskell 编写 PNG 文件的小型库。我只是重新排列它，使其支持所有单色、灰度和 RGB 输出。

但是，似乎在编写大型单色图像时总是会出现堆栈溢出，但如果我使用灰度或 RGB 则不会。在此示例中，大小阈值或多或少 2000：如果我设置`width`的小于该值，则生成图像，否则会出现堆栈溢出。

```
import Png

import qualified Data.ByteString.Lazy as B

width = 2000 :: Int

main = do
  let setG = [ [ (r + c) `mod` 256 | c <- [0..width]] | r <- [0..width]]
  let outputG = pngGrayscale setG
  putStrLn "Writing grayscale image..."
  B.writeFile "grayscale.png" outputG
  putStrLn "Done"

  let setR = [ [ (r `mod` 256, c `mod` 256, (r+c) `mod` 256) | c <- [0..width]] | r <- [0..width]]
  let outputR = pngRGB setR
  putStrLn "Writing RGB image..."
  B.writeFile "rgb.png" outputR
  putStrLn "Done"

  let setM = [ [ even (r + c) | c <- [0..width]] | r <- [0..width]]
  let outputM = pngMonochrome setM
  putStrLn "Writing monochrome image..."
  B.writeFile "monochrome.png" outputM
  putStrLn "done" 
```

由于这三个函数之间唯一显着的区别`png*`似乎是对 的调用`bitpack*`，我想这是罪魁祸首，但我不知道如何解决这个问题。

这是图书馆（原文可以在[这里](http://www.haskell.org/haskellwiki/Library/PNG)找到）：

```
{-
A small library for creating monochrome PNG files.
This file is placed into the public domain.
Dependencies: Zlib.
-}
module Png (pngRGB, pngGrayscale, pngMonochrome) where
import Data.Array
import Data.Bits
import Data.List
import Data.Word
import qualified Codec.Compression.Zlib as Z
import qualified Data.ByteString.Lazy as B

import Control.DeepSeq (deepseq)

be8 :: Word8 -> B.ByteString
be8 x = B.singleton x

be32 :: Word32 -> B.ByteString
be32 x = B.pack [fromIntegral (x `shiftR` sh) | sh <- [24,16,8,0]]

pack :: String -> B.ByteString
pack xs = B.pack $ map (fromIntegral.fromEnum) xs

unpack :: B.ByteString -> String
unpack xs = map (toEnum.fromIntegral) (B.unpack xs)

hdr, iHDR, iDAT, iEND :: B.ByteString
hdr = pack "\137\80\78\71\13\10\26\10"
iHDR = pack "IHDR"
iDAT = pack "IDAT"
iEND = pack "IEND"

chunk :: B.ByteString -> B.ByteString -> [B.ByteString]
chunk tag xs = [be32 (fromIntegral $ B.length xs), dat, be32 (crc dat)]
    where dat = B.append tag xs

-- | Return a monochrome PNG file from a two dimensional bitmap
-- stored in a list of lines represented as a list of booleans.
pngMonochrome :: [[Bool]] -> B.ByteString
pngMonochrome dat = B.concat $ hdr : concat [ihdr, imgdat, iend]
    where height = fromIntegral $ length dat
          width = fromIntegral $ length (head dat)
          ihdr = chunk iHDR (B.concat [
                be32 width, be32 height, be8 1, be8 0, be8 0, be8 0, be8 0])
          imgdat = chunk iDAT (Z.compress imgbits)
          imgbits = B.concat $ map scanlineMonochrome dat
          iend = chunk iEND B.empty

scanlineMonochrome :: [Bool] -> B.ByteString
scanlineMonochrome dat = 0 `B.cons` bitpackMonochrome dat

bitpackMonochrome' :: [Bool] -> Word8 -> Word8 -> B.ByteString
bitpackMonochrome' [] n b = if b /= 0x80 then B.singleton n else B.empty
bitpackMonochrome' (x:xs) n b =
    if b == 1
        then v `B.cons` bitpackMonochrome' xs 0 0x80
        else bitpackMonochrome' xs v (b `shiftR` 1)
    where v = if x then n else n .|. b

bitpackMonochrome :: [Bool] -> B.ByteString
bitpackMonochrome xs = bitpackMonochrome' xs 0 0x80

crc :: B.ByteString -> Word32
crc xs = updateCrc 0xffffffff xs `xor` 0xffffffff

updateCrc :: Word32 -> B.ByteString -> Word32
updateCrc = B.foldl' crcStep

crcStep :: Word32 -> Word8 -> Word32
crcStep crc ch = (crcTab ! n) `xor` (crc `shiftR` 8)
    where n = fromIntegral (crc `xor` fromIntegral ch)

crcTab :: Array Word8 Word32
crcTab = listArray (0,255) $ flip map [0..255] (\n ->
    foldl' (\c k -> if c .&. 1 == 1
                      then 0xedb88320 `xor` (c `shiftR` 1)
                      else c `shiftR` 1) n [0..7])

white, black :: Int
white = 255
black = 0

-- | Produces a single grayscale bit given a percent black
gray :: Int -> Int
gray percent = 255 - floor (fromIntegral percent * 2.55)

-- | Return a grayscale PNG file from a two dimensional bitmap stored in a list
-- of lines represented as a list of 0-255 integer values.
pngGrayscale :: [[Int]] -> B.ByteString
pngGrayscale dat = B.concat $ hdr : concat [ihdr, imgdat, iend]
     where height = fromIntegral $ length dat
           width = fromIntegral $ length (head dat)
           ihdr = chunk iHDR $ B.concat
                     [ be32 width
                     , be32 height
                     , be8 8   -- bits per pixel
                     , be8 0   -- color type
                     , be8 0   -- compression method
                     , be8 0   -- filter method
                     , be8 0 ] -- interlace method
           imgdat = chunk iDAT (Z.compress imgbits)
           imgbits = B.concat $ map scanlineGrayscale dat
           iend = chunk iEND B.empty

scanlineGrayscale :: [Int] -> B.ByteString
scanlineGrayscale dat = B.pack (0 : map fromIntegral dat)

-- | Return a RGB PNG file from a two dimensional bitmap stored in a list
-- of lines represented as a list of triples of 0-255 integer values.
pngRGB :: [[(Int,Int,Int)]] -> B.ByteString
pngRGB dat = B.concat $ hdr : concat [ihdr, imgdat ,iend]
     where height = fromIntegral $ length dat
           width = fromIntegral $ length (head dat)
           ihdr = chunk iHDR $ B.concat
                     [ be32 height
                     , be32 width
                     , be8 8   -- bits per sample (8 for r, 8 for g, 8 for b)
                     , be8 2   -- color type (2=rgb)
                     , be8 0   -- compression method
                     , be8 0   -- filter method
                     , be8 0 ] -- interlace method
           imgdat = chunk iDAT (Z.compress imagedata)
           imagedata = B.concat $ map scanlineRGB dat
           iend = chunk iEND B.empty

scanlineRGB :: [(Int,Int,Int)] -> B.ByteString
scanlineRGB dat = B.pack (0 : (map fromIntegral $ concatMap (\(r,g,b) -> [r,g,b]) dat)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T16:05:20.543

罪魁祸首是

```
bitpackMonochrome' :: [Bool] -> Word8 -> Word8 -> B.ByteString
bitpackMonochrome' [] n b = if b /= 0x80 then B.singleton n else B.empty
bitpackMonochrome' (x:xs) n b =
    if b == 1
        then v `B.cons` bitpackMonochrome' xs 0 0x80
        else bitpackMonochrome' xs v (b `shiftR` 1)
    where v = if x then n else n .|. b 
```

用于`B.cons`连接`ByteString`s。无论如何，这是相当低效的，并且`B.cons`在第二个论点中是严格的。

因此，你会得到一个巨大的（对于一个位图来说大约一百万深`2000×2000`）的形式

```
v1 `B.cons` (v2 `B.cons` (v3 ...))) 
```

溢出堆栈。

一个简单的解决方法——仍然相当低效——是在 中使用列表`bitpackMonochrome'`，因为`(:)`它的第二个参数是惰性的，

```
bitpackMonochrome :: [Bool] -> B.ByteString
bitpackMonochrome xs = B.pack $ bitpackMonochrome' xs 0 0x80

bitpackMonochrome' :: [Bool] -> Word8 -> Word8 -> [Word8]
bitpackMonochrome' [] n b = if b /= 0x80 then [n] else []
bitpackMonochrome' (x:xs) n b =
    if b == 1
        then v : bitpackMonochrome' xs 0 0x80
        else bitpackMonochrome' xs v (b `shiftR` 1)
    where v = if x then n else n .|. b 
```

并且`B.pack`在`bitpackMonochrome`.

这样，您就不会得到巨大的 thunk，因为`(:)`可以在其第二个参数之前对其进行评估。

一个更有效的版本将根据尺寸计算所需的尺寸并使用

```
create :: Int -> (Ptr Word8 -> IO ()) -> IO ByteString 
```

甚至

```
unsafeCreate :: Int -> (Ptr Word8 -> IO ()) -> ByteString 
```

from`Data.ByteString.Internal`直接填充正确大小的分配缓冲区。

# xslt-2.0 - 比较两个元素以在 xslt 2.0 中设置当前节点

> ID：15731009
> 
> 赞同：1
> 
> 时间：2013-03-31T15:28:05.333
> 
> 标签：xslt-2.0

我是 xslt 的新手，所以如果这是一个幼稚的问题，请原谅。我需要将源文档中包含部门名称的元素的值与另一个文档中的子元素的值匹配，该文档将部门名称的变体列为子元素，并将该子元素的父节点设置为当前节点以获取值的其他孩子。

以下是源文档的示例：

```
<sourceRoot>
 <sourceElement>foo</sourceElement>
</sourceRoot> 
```

这是列表文档的示例：

```
<departments>
 <department>
  <child1>bar</child1>
  <child2>bar2</child2>
  <child3>bar3</child3>
 </department>
 <department>
  <child1>baz</child1>
  <child2>baz2</child2>
  <child3>baz3</child3>
 </department>
 <department>
  <child1>foo</child1>
  <child2>foo2</child2>
  <child3>foo3</child3>
 </department>
</departments>
etc. 
```

这是期望的结果：

```
<child2value>foo2</child2value>
<child3value>foo3</child3value> 
```

我曾尝试使用此 xsl：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    >

    <xsl:output method="xml" indent="yes" omit-xml-declaration="no" encoding="UTF-8"/>
    <xsl:preserve-space elements="text"/>

    <xsl:variable name="departments" select="document('dept.xml')/departments"/>  

    <xsl:template match="/">          
        <xsl:variable name="sourceElement" select="sourceRoot/sourceElement"/>                   
        <xsl:variable name="child1" select="$departments/department/child1"/> 
        <xsl:variable name="child2" select="$departments/department/child2"/>
        <xsl:variable name="child3" select="$departments/department/child3"/>

        <xsl:choose>    
        <xsl:when test="$sourceElement=$child1">               
            <child2value>
                <xsl:value-of select="$departments/department[.]/child2"/>
            </child2value>
            <child3value>
                <xsl:value-of select="$departments/department[.]/child3"/>                
            </child3value>
        </xsl:when>
        <xsl:otherwise/>
    </xsl:choose>   
    </xsl:template>   
</xsl:stylesheet> 
```

`department`但它返回所有节点的子值。

```
<child2value>bar2 baz2 foo2</child2value>
<child3value>bar3 baz3 foo3</child3value> 
```

我知道我在这里缺少一个关于如何将节点设置为当前节点的关键概念。感谢您对这个新手的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:01:11.557

我将解决如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    exclude-result-prefixes="xs">

<xsl:param name="dep-url" as="xs:string" select="'test2013033102.xml'"/>
<xsl:variable name="dep-doc" as="document-node()" select="doc($dep-url)"/>

<xsl:output method="xml" indent="yes" />

<xsl:key name="by-child" match="department" use="*"/>

<xsl:template match="/">
  <xsl:variable name="source" as="element(sourceElement)*" select="sourceRoot/sourceElement"/>
  <xsl:apply-templates select="key('by-child', $source, $dep-doc)/*[not(. = $source)]"/>
</xsl:template>

<xsl:template match="department/*">
  <xsl:element name="{name()}value">
    <xsl:value-of select="."/>
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

这会将您的输入转换为

```
<?xml version="1.0" encoding="UTF-8"?>
<child2value>foo2</child2value>
<child3value>foo3</child3value> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:29:03.400

**您可以通过单个 XPath 表达式选择您想要的内容，如以下转换所示：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="sourceElement">
     <xsl:copy-of select=
     "document('file:///c:/temp/delete/dept.xml')
               /*/*[child1 = current()]
                     /*[not(self::child1)]
     "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<sourceRoot>
 <sourceElement>foo</sourceElement>
</sourceRoot> 
```

**第二个提供的 XML 文档位于本地文件系统中`c:\temp\delete\dept.xml`：**

```
<departments>
 <department>
  <child1>bar</child1>
  <child2>bar2</child2>
  <child3>bar3</child3>
 </department>
 <department>
  <child1>baz</child1>
  <child2>baz2</child2>
  <child3>baz3</child3>
 </department>
 <department>
  <child1>foo</child1>
  <child2>foo2</child2>
  <child3>foo3</child3>
 </department>
</departments> 
```

**产生了想要的正确结果：**

```
<child2>foo2</child2>
<child3>foo3</child3> 
```

**更新**：

**如果我们想更改上面选定元素的名称，这真的很简单：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="sourceElement">
     <xsl:apply-templates select=
     "document('file:///c:/temp/delete/dept.xml')
               /*/*[child1 = current()]
                     /*[not(self::child1)]
     "/>
 </xsl:template>

 <xsl:template match="*[starts-with(name(), 'child')]">
  <xsl:element name="{name()}value"><xsl:value-of select="."/></xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**产生**：

```
<child2value>foo2</child2value>
<child3value>foo3</child3value> 
```

# django - django 1.5 中的自定义用户模型

> ID：15731015
> 
> 赞同：5
> 
> 时间：2013-03-31T15:28:32.067
> 
> 标签：django

我已经扩展了 django 1.5 用户模型，如下所示，当我将任何行插入数据库时​​遇到问题。我的 models.py 文件如下所示。

```
class MyUserManager(BaseUserManager):

   def create_user(self, email, password=None):

     if not email:
        raise ValueError('Users must have an email address')

     user = self.model(
        email=MyUserManager.normalize_email(email),
     )

     user.set_password(password)
     user.save(using=self._db)
     return user

   def create_superuser(self, email, password):

     user = self.create_user(email,
        password=password
     )
     user.is_admin = True
     user.save(using=self._db)
     return user

 class MyUser(AbstractBaseUser):
    email = models.EmailField(
      verbose_name='Email address',
      max_length=255,
      unique=True,
      db_index=True,
    )
    is_active = models.BooleanField(default=True)
    is_admin = models.BooleanField(default=False)

    objects = MyUserManager()

    USERNAME_FIELD = 'email'

    def get_full_name(self):
      # The user is identified by their email address
      return self.email

    def __unicode__(self):
      return self.email 
```

我的 admin.py 如下所示。

```
class MyUserAdmin(UserAdmin):
   # The forms to add and change user instances
   form = UserChangeForm
   add_form = UserCreationForm

   # The fields to be used in displaying the User model.
   # These override the definitions on the base UserAdmin
   # that reference specific fields on auth.User.
   list_display = ('email', 'is_admin')
   list_filter = ('is_admin',)
   fieldsets = (
     (None, {'fields': ('email', 'password')}),
     ('Permissions', {'fields': ('is_admin',)}),
     ('Important dates', {'fields': ('last_login',)}),
   )
   add_fieldsets = (
     (None, {
         'classes': ('wide',),
         'fields': ('email', 'password1', 'password2')}
     ),
   )
   search_fields = ('email',)
   ordering = ('email',)
   filter_horizontal = ()

// Now register the new UserAdmin...
admin.site.register(MyUser, MyUserAdmin)
// ... and, since we're not using Django's builtin permissions,
// unregister the Group model from admin.
admin.site.unregister(Group) 
```

我从 django 教程中遵循了上述内容（[https://docs.djangoproject.com/en/dev/topics/auth/customizing/#a-full-example](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#a-full-example)）

现在我遇到的问题是每当我在管理员中修改任何内容时，都会收到一条错误消息，如下所示。

(1452, '无法添加或更新子行：外键约束失败 ( `csiop`. `django_admin_log`, CONSTRAINT `user_id_refs_id_c8665aa`FOREIGN KEY ( `user_id`) REFERENCES `auth_user`( `id`))')

所以，看起来 django_admin_log 表总是需要外键引用到 auth_user 模型。但是因为我创建了一个客户用户模型，所以当我创建一个超级用户时，用户详细信息仅存储在客户 MyUser 表中，并且在 auth_user 模型中没有创建任何条目，这似乎是导致问题的原因。

我该如何解决这个问题？请建议。

谢谢斯里坎特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T22:44:27.657

这看起来很像（PostgreSQL）数据库错误——而不是 Django 错误。“auth_user”（仍然）在数据库结构中的 ForeignKey 约束中被引用。这样的事情不应该存在于您的自定义模型中，称为“MyUser”。在这种情况下，引用应该类似于“accounts_myuser”或“myappname_myuser”。

我猜，你已经更新了一个已经存在的代码，包括一个旧的数据库。如果您不需要旧的管理日志，只需删除/删除名为“django_admin_log”的表，然后运行“python manage.py syncdb”（或 1.7 的“python manage.py migrate”）让 Django 重新创建这张桌子从头开始。

不过要小心：如果您有其他表引用“旧”Django User 模型，您将在其他位置再次遇到同样的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T22:15:17.550

我遇到了同样的问题。一旦你将默认的 Django 用户模型换成你自己的自定义用户模型，Django 不会做任何事情来清理数据库中不再使用的旧依赖项。实际上有一些“auth_*”表在“auth_user”表上有外键约束。

切换到新的身份验证模型后，确保“auth_*”和“django_admin_log”表中没有您需要的数据，删除它们，然后重新运行“manage.py syncdb”。您会注意到它不会重新创建 auth_user 表，因为它不再使用并且讨厌的约束消失了。

# html - CreateJS Flash 按钮作为链接

> ID：15731021
> 
> 赞同：0
> 
> 时间：2013-03-31T15:28:50.713
> 
> 标签：html, flash, createjs

我已经使用 CreateJS 成功地将 Flash 文件转换为 HTML，但我不喜欢将符号作为链接。

这些按钮在 Flash 电影中完美地工作，但当转换为 JS/HTML5 时，它似乎失败了。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-14T21:07:53.710

这是有效的：

```
// The "instance" is an instance on the stage in Flash
this.instance.addEventListener("click", function(event) {
    window.location = "http://google.com";
}) 
```

我在 Flash Canvas 上进行了测试，只有一帧和一个按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:31:44.503

CreateJS 工具包不会转换 ActionScript - 您必须添加框架脚本

```
/* JS
this.onClick = function() {
    window.location = "http://google.com";
}
*/ 
```

或者在你的 JavaScript 中找到符号并在那里添加监听器。

```
// The "symbolName" is an instance on the stage in Flash.
exportRoot.symbolName.onClick = function() {
    window.location = "http://google.com";
} 
```

您还可以自己创建库项目并添加侦听器。

```
var symbol = new lib.MySybmol();
stage.addChild(symbol);
symbol.onClick = function() {
    // etc.
} 
```

希望有帮助。

**更新：** 此答案中的示例已过时。`onClick`处理程序已被弃用一段时间，需要用 EventDispatcher或`addEventListener()`快捷`on()`方法替换：

```
symbol.on("click", function() {
    // etc.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-09T09:37:12.960

我在脚本结束之前添加了您的代码。我的图像具有一个图像的默认位图实例。但它不会重定向到谷歌

```
exportRoot.instance.onClick = function() {
    window.location = "http://google.com"; 
```

这是链接：[http ://canvas.byethost11.com/check/check.html](http://canvas.byethost11.com/check/check.html)

# ruby-on-rails - 保存前按摩多个属性

> ID：15731023
> 
> 赞同：0
> 
> 时间：2013-03-31T15:29:00.433
> 
> 标签：ruby-on-rails

使用 Rails。我在模型中有以下内容：

```
before_save :strip_tags

private

def strip_tags
  self.name = ActionController::Base.helpers.strip_tags(self.name)
  self.description = ActionController::Base.helpers.strip_tags(self.description)
end 
```

除了将这些属性放在一个数组中并运行它们的循环之外，还有什么更好的重构方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:36:39.153

您可以尝试以下方法，它会在设置属性*时*提供更多行和更改（您正在使用`before_save`因此如果您需要验证中的 html 标记，这将不起作用）。

```
def name=(string)
  write_attribute :name, strip_tags(string)
end

def description=(string)
  write_attribute :description, :strip_tags(string)
end

private

def strip_tags(string)
  ActionController::Base.helpers.strip_tags string
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:03:30.483

您可以使用“attribute_normalizer”gem：

[https://github.com/mdeering/attribute_normalizer](https://github.com/mdeering/attribute_normalizer)

```
normalize_attributes :name, :description do |v|
  ActionController::Base.helpers.strip_tags(v)  
end 
```

# python - self.finish() 将 tornado web 服务器置于什么状态？

> ID：15731024
> 
> 赞同：2
> 
> 时间：2013-03-31T15:29:08.677
> 
> 标签：python, tornado

self.finish() 将`torando`Web 服务器置于什么状态？我假设它关闭了当前连接。目前我正在使用`self.set_status(204)`返回 HTTP 响应代码但我没有调用`self.finish()`，我应该在每个请求处理程序的末尾调用它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T17:12:50.467

`self.finish()`不设置任何状态。该函数完成生成响应包并将包放入write_buffer（其中包块将由tornado发送给客户端）

您无需在每个请求处理程序结束时调用 self.finish。一些返回方法，如 self.redirect() 或 self.render() 自己完成工作。但是当你使用装饰器`@web.asynchronous`延迟响应时，你必须在最后调用 self.finish() 。这是`@web.asynchronous` [http://www.tornadoweb.org/en/stable/web.html?highlight=asynchronous#tornado.web.asynchronous的演示](http://www.tornadoweb.org/en/stable/web.html?highlight=asynchronous#tornado.web.asynchronous)

# javascript - 添加其他输入以形成模糊

> ID：15731025
> 
> 赞同：0
> 
> 时间：2013-03-31T15:29:23.457
> 
> 标签：javascript, jquery, html

我想在用户需要时将其他输入添加到表单中。但我使用的是范围滑块（jQrangeslider），我想在显示其他输入时调用它。

*   我认为是否调用 jQrangeslider 并不是问题所在。但我将给出 HTML 使用的完整代码：

    时间：Jour

    ```
     <input type="text" name="jour1" />
    </div>
    <div class="span3"> <span class="top">Matin</span>

        <div id="temp-g-1-"></div>
    </div>
    <div class="span3"> <span class="top">Soir</span>

        <div id="temp-d-1-"></div>
    </div> 
    ```

和 JS：

```
$(document).ready(function () {
var jour = 1;
$('input[name^="jour"]').on("blur", function () {
    alert('called');
    jour = jour++;
    $(this).closest('div[id^="jour"]').after('<br><div class="span3"></div><div id="jour' + jour + '"><div class="span3"><span class="top">Jour</span><input type="text" name="jour' + jour + '"/></div><div class="span3"><span class="top">Matin</span><div id="temp-g-' + jour + '-"></div></div><div class="span3"><span class="top">Soir</span><div id="temp-d-' + ++jour + '-"></div></div>');
    $('div[id^="temp-g-"]').editRangeSlider({
        valueLabels: "change",
        durationIn: 1000,
        durationOut: 1000,
        type: "number",
        bounds: {
            min: 8,
            max: 12
        },
        defaultValues: {
            min: 8,
            max: 12
        }
    });
    $('div[id^="temp-d-"]').editRangeSlider({
        valueLabels: "change",
        durationIn: 1000,
        durationOut: 1000,
        type: "number",
        bounds: {
            min: 14,
            max: 18
        },
        defaultValues: {
            min: 14,
            max: 18
        }
    });
}); 
```

});

jsfiddle 示例（没有 jQrangeslider）：http: [//jsfiddle.net/p4LWf/5/](http://jsfiddle.net/p4LWf/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:25:28.090

您添加的元素未绑定到单击事件，因为它们在绑定时不存在。您应该`event delegation`改用：

```
$('.row-form').on("blur",'input[name^="jour"]', function () {
//code 
} 
```

更多[关于](http://api.jquery.com/on/)`on`http://api.jquery.com/on/`event delegation`

# processing - 处理：图书馆问题？

> ID：15731028
> 
> 赞同：0
> 
> 时间：2013-03-31T15:29:25.457
> 
> 标签：processing

我的显卡驱动程序可能有问题。我使用的是 Ubuntu 12.10，我的显卡型号是 ATI Mobility™ Radeon® HD 5650。当我尝试执行这个简单的程序

```
import processing.video.*;
Movie myMovie;

void setup() {
size(200, 200, P2D);
myMovie = new Movie(this, "sample_iTunes.mov");
}

void draw() {
image(myMovie, 0, 0);
}

void movieEvent(Movie m) {
m.read();
}

void mousePressed() {
myMovie.play();
} 
```

我没有修改我得到以下错误。

```
> Smooth level 2 is not available. Using 1 instead
X11Util.Display: Shutdown (JVM shutdown: false, open (no close attempt): 3/3, reusable   
(open, marked uncloseable): 0, pending (open in creation order): 3)
X11Util: Open X11 Display Connections: 3
X11Util: Open[0]: NamedX11Display[:0, 0x7099adc0, refCount 1, unCloseable false]
X11Util: Open[1]: NamedX11Display[:0, 0x71d17fb0, refCount 1, unCloseable false]
X11Util: Open[2]: NamedX11Display[:0, 0x71d1fd40, refCount 1, unCloseable false]
Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: Could not load movie     
file sample_iTunes.mov
at processing.core.PApplet.die(PApplet.java:3885)
at processing.core.PApplet.die(PApplet.java:3894)
at processing.video.Movie.initGStreamer(Movie.java:605)
at processing.video.Movie.<init>(Movie.java:98)
at video.setup(video.java:25)
at processing.core.PApplet.handleDraw(PApplet.java:2241)
at processing.opengl.PGL$PGLListener.display(PGL.java:3240)
at jogamp.opengl.GLDrawableHelper.displayImpl(GLDrawableHelper.java:573)
at jogamp.opengl.GLDrawableHelper.display(GLDrawableHelper.java:558)
at jogamp.opengl.GLAutoDrawableBase$2.run(GLAutoDrawableBase.java:286)
at jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1021)
at jogamp.opengl.GLDrawableHelper.invokeGL(GLDrawableHelper.java:896)
at com.jogamp.newt.opengl.GLWindow.display(GLWindow.java:545)
at 

    jogamp.opengl.GLAutoDrawableBase.defaultWindowRepaintOp(GLAutoDrawableBase.java:106)
at com.jogamp.newt.opengl.GLWindow.access$000(GLWindow.java:94)
at com.jogamp.newt.opengl.GLWindow$1.windowRepaint(GLWindow.java:107)
at jogamp.newt.WindowImpl.consumeWindowEvent(WindowImpl.java:2433)
at jogamp.newt.WindowImpl.consumeEvent(WindowImpl.java:1946)
at jogamp.newt.WindowImpl.doEvent(WindowImpl.java:1894)
at jogamp.newt.WindowImpl.windowRepaint(WindowImpl.java:2626)
at jogamp.newt.WindowImpl.windowRepaint(WindowImpl.java:2610)
at com.jogamp.newt.opengl.GLWindow.windowRepaint(GLWindow.java:591)
at com.jogamp.newt.awt.NewtCanvasAWT.paint(NewtCanvasAWT.java:521)
at sun.awt.RepaintArea.paintComponent(RepaintArea.java:248)
at sun.awt.X11.XRepaintArea.paintComponent(XRepaintArea.java:56)
at sun.awt.RepaintArea.paint(RepaintArea.java:224)
at sun.awt.X11.XComponentPeer.handleEvent(XComponentPeer.java:677)
at java.awt.Component.dispatchEventImpl(Component.java:4736)
at java.awt.Component.dispatchEvent(Component.java:4488)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:668)
at java.awt.EventQueue.access$400(EventQueue.java:81)
at java.awt.EventQueue$2.run(EventQueue.java:627)
at java.awt.EventQueue$2.run(EventQueue.java:625)
at java.security.AccessController.doPrivileged(Native Method)
at 

    java.security.AccessControlContext$1.
    doIntersectionPrivilege(AccessControlContext.java:87)
at java.security.AccessControlContext$1.
    doIntersectionPrivilege(AccessControlContext.java:98)
at java.awt.EventQueue$3.run(EventQueue.java:641)
at java.awt.EventQueue$3.run(EventQueue.java:639)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.
    doIntersectionPrivilege(AccessControlContext.java:87)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:638)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
    X11Util.Display: Shutdown (JVM shutdown: true, open (no close attempt): 3/3,  
    reusable (open, marked uncloseable): 0, pending (open in creation order): 3)
    X11Util: Open X11 Display Connections: 3
    X11Util: Open[0]: NamedX11Display[:0, 0x7099adc0, refCount 1, unCloseable false]

     X11Util: Open[1]: NamedX11Display[:0, 0x71d17fb0, refCount 1, unCloseable false]
     X11Util: Open[2]: NamedX11Display[:0, 0x71d1fd40, refCount 1, unCloseable false] 
```

这出了什么问题？？

# java - Java中额外的数组列表意图

> ID：15731029
> 
> 赞同：11
> 
> 时间：2013-03-31T15:29:26.920
> 
> 标签：java, android, android-intent

我试图跳过我`ArrayList`的`Intent`。但是我找不到要写的额外内容？任何获取方法我都会收到诸如“不适用于字符串”之类的错误。

项目详情：

```
public class ItemDetails {

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getItemDescription() {
    return itemDescription;
}
public void setItemDescription(String itemDescription) {
    this.itemDescription = itemDescription;
}
public String getPrice() {
    return price;
}
public void setPrice(String price) {
    this.price = price;
}
public int getImageNumber() {
    return imageNumber;
}
public void setImageNumber(int imageNumber) {
    this.imageNumber = imageNumber;
}

public int getVideoNumber() {
    return videoNumber;
}
public void setVideoNumber(int videoNumber) {
    this.videoNumber = videoNumber;
}

public void setChild(ArrayList<ItemDetails> item_child)
{
    this.item_child = item_child;
}
public ArrayList<ItemDetails> getChild()
{
    return this.item_child;
}
public void setParent(ArrayList<ItemDetails> item_parent)
{
    this.item_parent = item_parent;
}
public ArrayList<ItemDetails> getParent()
{
    return this.item_parent;
}

private String name ;
private String itemDescription;
private String price;
private int imageNumber;
private int videoNumber;
private ArrayList<ItemDetails> item_child;
    private ArrayList<ItemDetails> item_parent; 
} 
```

我的课：

```
static class ViewHolder {
    TextView txt_itemName;
    TextView txt_itemDescription;
    TextView txt_itemPrice;
    ImageView itemImage;
    ArrayList<ItemDetails> item_parent;
    ArrayList<ItemDetails> item_child;
} 
```

我的putExtra：

```
intObj.putExtra("exerciselist",obj_itemDetails.getChild()); 
```

GetChild 函数：

```
public ArrayList<ItemDetails> getChild()
{
   return this.item_child;
} 
```

但我找不到我应该如何写来获取arrayList？

```
ArrayList<ItemDetails> child1 = getIntent().????????? 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-31T15:38:19.350

> 但我找不到我应该如何写来获取arrayList

简短的回答：你不能。你只能通过`ArrayList<String>`然后检索它

```
getIntent().getStringArrayListExtra("key"); 
```

**但是**。如果您想通过 Intent 传递自定义对象，您的对象必须实现：

*   [`Parcelable interface`](http://developer.android.com/reference/android/os/Parcelable.html)或者[`Serializable interface`](http://developer.android.com/reference/java/io/Serializable.html)

您可以选择其中之一。两者的工作方式相同，但实现方式不同。

# 可打包界面：

如果你选择 Parcelable 接口，你的`ItemDetails`类必须实现 Parcelable。然后你可以把它作为

```
intent.putParcelableArrayListExtra("key", value); 
```

并将其检索为：

```
getIntent().getParcelableArrayListExtra("key"); 
```

我不会为您编写 Parcelable 实现，因为它需要更多代码。这是[一个很好的例子](https://stackoverflow.com/questions/7181526/example-of-implementing-parcelable)。

# 可序列化接口：

如果您选择 Serializable 接口，我建议您创建名为 ItemDetailsWrapper 的类，它将包装您的`ArrayList(s)<ItemDetails>`

即 ItemDetailsWrapper 和 ItemDetails 类都必须实现 Serializable 接口。现在您可以像这样通过 Intent 传递它：

```
getIntent().putExtra("key", <serializableClass>); // storing 
getIntent().getSerializableExtra("key"); // retrieving 
```

## 实施示例：

```
public class ItemDetailsWrapper implements Serializable {

    private static final long serialVersionUID = 1L;
    private ArrayList<ItemDetails> itemDetails;

    public ItemDetailsWrapper(ArrayList<ItemDetails> items) {
        this.itemDetails = items;
    }

    public ArrayList<ItemDetails> getItemDetails() {
        return itemDetails;
    }
}

public class ItemDetails implements Serializable {

    private static final long serialVersionUID = 1L;

    // getters, setters and properties
} 
```

以及如何通过活动：

```
ItemDetailsWrapper wrapper = new ItemDetailsWrapper(list);
Intent i = new Intent(<context>, <targetActivity>);
i.putExtra("obj", wrapper); // i.putExtra("obj", new ItemDetailsWrapper(list));
// retrieving 
ItemDetailsWrapper wrap = 
                    (ItemDetailsWrapper) getIntent().getSerializableExtra("obj");
ArrayList<ItemDetails> list = wrap.getItemDetails(); 
```

# c - “gcc ac -o ac”我可以通过什么方式恢复真正的.c文件

> ID：15731036
> 
> 赞同：-1
> 
> 时间：2013-03-31T15:29:58.117
> 
> 标签：c, gcc

可悲的是，我使用以下命令编译了一个 .c 文件：

```
$ gcc a.c -o a.c 
```

所以 ac 变成了覆盖我旧 c 文件的可执行文件...我想问一下我可以拿回真正的 ac 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:05:26.460

当您覆盖文件时，操作系统不会将数据完全放在同一位置，它只是将旧数据标记为可用，并将新数据写入磁盘。它可能会覆盖您的文件，也可能不会。午夜指挥官有一个工具可以尝试取回你的文件。

> 目前 Midnight Commander 与一些虚拟文件系统 (VFS) 打包在一起： ...undelfs，用于恢复 ext2 文件系统（Linux 系统的默认文件系统）上已删除的文件

[午夜指挥官指南](http://tournasdimitrios1.wordpress.com/2011/01/10/midnight-commander-mc-on-linux-tutorial/)

同时，您可能不应该在计算机上保存任何其他文件，尤其是在您删除的文件所在的目录中。

编辑：顺便说一句，这是一篇旧文章，linux 已经有一段时间没有使用 ext2 了。但我认为它应该仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:36:56.467

不幸的是，这几乎是不可能的，除非你擅长逆向工程二进制代码，AFAIK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:12:28.913

您可以从备份中恢复它，也可以从源代码控制系统中恢复它。

如果你没有这两个，你应该开始使用两者（现在你知道为什么了！）。

您还可以使用您正在使用的操作系统的文件恢复工具来恢复文件，或者如果失败，您可以反编译目标文件。这是一个反编译器：

[http://boomerang.sourceforge.net/cando.php?hidemenu](http://boomerang.sourceforge.net/cando.php?hidemenu)

这是在用“c decompiler”搜索谷歌后列表中的第一个。

这是关于反编译器的stackoverflow问题。

[什么是好的 C 反编译器？](https://stackoverflow.com/questions/193896/whats-a-good-c-decompiler)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-04T06:35:00.023

`grep`是恢复丢失的 C 文件的好工具。

> grep -a -B 25 -A 100 '文件中有一些字符串' /dev/sda1 > recover.txt

上述命令恢复 C 文件中“文件中的某些字符串”行之前 25 行和之后 100 行丢失的文本，并在文件中输出恢复的文本`recover.txt`。因此，您可以根据需要更改 25 和 100 的值。上面的命令还假设分区名称是`/dev/sda1`. 您可以使用该`mount`命令来查找您的分区名称。

# ios - 使用 UIPageViewController 的简单 pdf 查看器

> ID：15731038
> 
> 赞同：0
> 
> 时间：2013-03-31T15:30:01.667
> 
> 标签：ios, xcode, pdf, storyboard, uipageviewcontroller

我有个问题。我正在尝试制作一个简单的应用程序来查看 pdf，`UIPageViewController`但我无法让它工作。

我尝试使用下面 github 页面上列出的项目。

[https://github.com/jackhumphries/UIPageViewController-PDF](https://github.com/jackhumphries/UIPageViewController-PDF)

但我习惯于使用，`StoryBoards`但我无法使用`StoryBoards`.

我使用以下代码创建了一个按钮：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"mhm" ofType:@"pdf"];
PageViewController *page = [[PageViewController alloc] initWithPDFAtPath:path];
[self presentViewController:page animated:YES completion:NULL]; 
```

我收到以下错误：

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_PageViewController", referenced from:
      objc-class-ref in PDFPageViewController.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

当我删除最后两行时，我的项目正在运行，但您可以想象我的 pdf 没有出现。

我尝试在我的故事板中创建单独的视图，但我无法让它工作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-15T10:48:13.550

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"mhm" ofType:@"pdf"];
    UIPageViewController *page = [[UIPageViewController alloc] initWithPDFAtPath:path];
    [self presentViewController:page animated:YES completion:nil]; 
```

试试这个

# java - 如何在 Java 中定义常量列表？

> ID：15731040
> 
> 赞同：2
> 
> 时间：2013-03-31T15:30:09.140
> 
> 标签：java, design-patterns, constants

当我们想定义一个像 pi 这样的常数时，我们可以像`public static final float pi = 3.14`. 但是可以说我想要一个停用词列表，这些停用词是在扫描一个也会发生变化的文件后生成的。我也可以进行“惰性”初始化吗？你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:55:47.570

您描述的模式与 Java 常量变量不匹配。你的常数是数据。

您可以使用映射 ( `HashMap<String>`) 并使用高频词的值对其进行初始化。
然后，当您从文件/文本/扫描仪中读取单词时，您会检查该单词是否在地图中并决定要做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T15:35:13.523

您可以使用**静态嵌套类**来初始化常量。

这样做的好处：这个**静态嵌套类**只有在你使用它时才会被加载，即使你已经使用了包装类。

您只需在嵌套类的构造函数中“扫描”包含停用词的文件，并将它们分配给您的常量变量，这些变量本身包含在嵌套类中。

注意：我讨厌在处理像扫描某些文件这样的“复杂”代码时使用**静态初始化**`ExceptionInInitializerError`程序。这会掩盖潜在的抛出异常（在开发过程中），因为会抛出 an 而不是 ..frustrating ;) [http://docs.oracle。 com/javase/1.5.0/docs/api/java/lang/ExceptionInInitializerError.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ExceptionInInitializerError.html)

# android - Android 从 OnCheckedChangeListener 的 CompoundButton 获取 CheckBox 键名

> ID：15731044
> 
> 赞同：0
> 
> 时间：2013-03-31T15:30:28.787
> 
> 标签：android

我正在使用界面`OnCheckedChangeListener`，`onCheckedChanged`当我单击复选框时会触发方法。

但我有 10 个复选框。如何获取 CompoundButton 中单击的复选框的名称。我认为这`CompoundButton`有所有必要的价值，但我不知道如何获得这个价值

例如：

```
<CheckBox
                    android:id="@+id/cb_mute_all_sounds"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:clickable="true"
                    android:key="nm_mute_all_sounds" /> 
```

`nm_mute_all_sounds`现在如何获取密钥名称`CompoundButton`？

```
 @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
buttonView. 
```

或者你怎么知道我点击了哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:40:25.563

您可以直接使用该 ID：

```
 public void onCheckedChangeListener(CompoundButton theView, boolean checked) {
   if (theView.getId() == R.id.nm_mute_all_sounds) {
     // do stuff
   }
 } 
```

# java - Jtable 没有用我的 abstracttablemodel 更新

> ID：15731045
> 
> 赞同：0
> 
> 时间：2013-03-31T15:30:29.997
> 
> 标签：java, swing, jtable, abstracttablemodel

我是编程新手，正在做我的第一份学校作业。我编写了一个 gui，它在添加到 jpaddedpane 的 jtable 中接受输入和输出数据。当表格首次出现时，它会显示所有正确的数据。但是当我输入新输入时，表格不会更新。我也很肯定问题在于我对 AstractTableModel 的实现。有人可以看看并尽快为我纠正吗？提前致谢。

附言。nh、vh、hNam、proc_1 和 proc_ 分别是整数、字符串、整数、字符串和字符串数组。它们保存要在表中显示的数据。

```
 public class TableModel extends AbstractTableModel  {
        int numRows;
        String colNames[] = { "NH", "Horse Names", "VH",
                              "Proc. I", "Proc. II" };        
        Object[][] obj;

        TableModel()  {
            super();
            numRows = fnh;
            obj = new Object[fnh][5];

            for( int i = 0; i < fnh; i++ )  {
              for ( int j = 0; j < 5; j++ ) {
                  if ( j == 0 ) 
                      obj[i][0] = (Integer)nh[i];
                  else if ( j == 1 )
                      obj[i][1] = (String)hNam[i];
                  else if ( j == 2 )
                      obj[i][2] = (Integer)vh[i];
                  else if ( j == 3 )
                      obj[i][3] =(String)proc_1[i];
                  else 
                      obj[i][4] =(String)proc_2[i];        
               }
           }
        }

        @Override
        public int getRowCount()  {
           return numRows;
        }

        @Override
        public int getColumnCount()  {
            return 5;
        }

        @Override
        public String getColumnName( int c ) {
            return colNames[c];
        }

        @Override
        public Object getValueAt( int r, int c )  {
            if ( c == 0 ) 
                return nh[r];
            else if ( c == 1 )
                return hNam[r];
            else if ( c == 2 )
                return vh[r] ;
            else if ( c == 3 )
                return proc_1[r];
            else
                return proc_2[r];    
        }   

        @Override
        public boolean isCellEditable( int r, int c )  {
            return true;
        }        

        public void setValueAt( Object[][] value, int r, int c )  {
               value = obj;
               fireTableCellUpdated( r, c );
             }            

        }    
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:38:09.540

This is where the issue is `value = obj;`

In `setValueAt` method you are not setting the values to the respective `obj` value's. The way you are accessing the `getValueAt` similarly set the obtained value to the respective array position.

Use `ArrayList` instead of using arrays. You can easily access all the methods.

```
class TableData {       
    private String name;
    private String grade;
    private String subject;
    private String staff;
   // Add getters and setters.
} 
```

This is an example of the TableModel using ArrayList.

```
class AllTableModel extends AbstractTableModel {

    List<TableData> tableData = new ArrayList<TableData>();

    Object[] columnNames = {"Name", "Grade", "Subject", "Staff"};

    public AllTableModel(List<TableData> data) {

        tableData = data;
    }

    public List<TableData> getTableData() {
        return tableData;
    }

    @Override
    public String getColumnName(int column) {
        return columnNames[column].toString();
    }

    @Override
    public int getColumnCount() {
        return columnNames.length;
    }

    @Override
    public int getRowCount() {
        return tableData.size();
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        TableData data = tableData.get(rowIndex);
        switch (columnIndex) {
        case 0:
            return data.getName();
        case 1:
            return data.getGrade();
        case 2:
            return data.getSubject();
        case 3:
            return data.getStaff();
        default:
            return null;
        }
    }

    @Override
    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
        TableData data = tableData.get(rowIndex);
        switch (columnIndex) {
        case 0:
            data.setName(aValue == null ? null : aValue.toString());
        case 1:
            data.setGrade(aValue == null ? null : aValue.toString());
        case 2:
            data.setSubject(aValue == null ? null : aValue.toString());
        case 3:
            data.setStaff(aValue == null ? null : aValue.toString());
        }
    }

} 
```

# sql - 无法在 Excel 中使用名称中的空格查询工作表上的命名范围

> ID：15731047
> 
> 赞同：6
> 
> 时间：2013-03-31T15:30:31.813
> 
> 标签：sql, excel, named-ranges, vba

我有一个包含多个工作表的工作簿，每个工作表都有相同的一组命名范围（即它们的范围仅限于工作表，而不是工作簿）。

我想根据任何工作表上的命名范围进行查询。有些工作表的名称不带空格，而其他工作表的名称则带空格。

我可以轻松地为没有空格的人执行此操作，但是使用空格执行此操作的语法使我无法理解（以及一个小时的 google-ing）。

命名范围为“Ingredients”，一张名为“NoSpaces”，另一张名为“With Spaces”

这是适用于“NoSpaces”表的代码：

```
sConnString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & dictNewRecipesToCheck(arrKeys(0)) & ";Extended Properties=""Excel 12.0;HDR=No;IMEX=1;"""
strQuery = "Select * from [NoSpaces$Ingredients]"
Set objConn = New ADODB.Connection
Set objRecordSet = New ADODB.Recordset
objConn.Open sConnString
objRecordSet.Open strQuery, objConn 
```

我已经为“With Spaces”表尝试了以下所有方法：

```
strQuery = "Select * from [With Spaces$Ingredients]"
strQuery = "Select * from ['With Spaces'$Ingredients]"
strQuery = "Select * from ['With Spaces$'Ingredients]"
strQuery = "Select * from [With_Spaces$Ingredients]" 
```

每次，我都会收到“Microsoft Access 数据库引擎找不到对象...”错误。

正如我所提到的，它适用于名称中没有空格的所有工作表。

任何帮助在有空格的表格上工作，将不胜感激。

谢谢！

基于以下评论的更新：

Excel 2007

```
sConnString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & strFileLoc & ";Extended Properties=""Excel 12.0 Macro;HDR=No;IMEX=1;""" 
```

当运行@shahkalpesh 提供的模式代码时，它会将 TABLE_NAME 列为两个命名范围的“成分”（即使每个范围都限定为不同的工作表）。
使用此驱动程序，即使 [NoSpaces$Ingredients] 也不起作用。

```
sConnString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & strFileLoc & ";Extended Properties=""Excel 8.0;HDR=No;IMEX=1;""" 
```

当运行@shahkalpesh 提供的模式代码时，它将 TABLE_NAME 列为“NoSpaces$Ingredients”和“'With Spaces'$Ingredients”。使用此驱动程序，[NoSpaces$Ingredients] 工作正常（ACE 驱动程序没有）。
但是，使用架构报告的确切名称，['With Spaces'$Ingredients] 不起作用。

Excel 2013

```
sConnString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & strFileLoc & ";Extended Properties=""Excel 12.0 Macro;HDR=No;IMEX=1;""" 
```

当运行@shahkalpesh 提供的模式代码时，它将 TABLE_NAME 列为“NoSpaces$Ingredients”和“'With Spaces$'Ingredients”。使用此驱动程序，[NoSpaces$Ingredients] 工作正常，但 ['With Spaces'$Ingredients] 不起作用。

最后，请参阅[http://db.tt/3lEYm2g1](http://db.tt/3lEYm2g1)以获取在 Excel 2007 中创建的示例表，该表在（至少）2 台不同的机器上存在此问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-16T20:27:12.987

是否可以使用 excel 范围而不是命名范围？我得到了以下工作：

```
SELECT * FROM [Report 1$A4:P] 
```

我从 GetOleDbSchemaTable() 方法获取工作表名称并删除撇号。带撇号的工作表名称不适用于我的范围。

```
if (tableName.Contains(' '))
            tableName = Regex.Match(tableName, @"(?<=')(.*?)(?=\$')", RegexOptions.None).Value + "$"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:11:09.703

带有空格后跟命名范围的工作表名称可以写为 ['My Sheet$'MyData]

以下是列出工作簿中包含的表的方法

1）获取工作簿中表列表的代码

```
dim i as Integer

Set objRecordSet = objConn.OpenSchema(adSchemaTables)
Do While Not objRecordSet.EOF
    i = 1
    For i = 0 To objRecordSet.Fields.Count - 1
        Debug.Print objRecordSet.Fields(i).Name, objRecordSet.Fields(i).Value
    Next

    objRecordSet.MoveNext
Loop 
```

编辑：对于您的情况，它将是

```
strQuery = "Select * from ['With Spaces$'Ingredients]" 
```

EDIT2：对不起，我第一次粘贴了错误的代码。请使用清单 1 中的上述代码并`TABLE_NAME`在即时窗口中查找。将显示以工作表名称为前缀的命名范围列表`TABLE_NAME`（您可以在其上查询）。

此外，请确保命名范围的范围仅限于工作表。确保工作表名称和范围名称的大小写与查询匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:20:21.567

下面的查询会起作用。只需确保命名范围**成分**存在于工作表**With Space**中。同时保存工作簿。

> strQuery = "从 [With Spaces$Ingredients] 中选择 *"

或者，您可以在下面使用

> strQuery = "从 [With" & Chr(32) & "Spaces$Ingredients] 中选择 *"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T17:02:02.237

派对又迟到了……

我无法在这里得到任何响应来为整个工作表工作，所以我为整个工作表创建了一个命名范围（选择所有单元格并给它们一个名字 - 我称之为 POList）并因此引用它：

```
UPDATE [POList] SET..... etc 
```

所以没有单引号，没有反引号，没有 $ 符号，甚至没有工作表名称。

话虽如此，有问题的工作簿只有一张纸（名称中有空格）。

这适用于 Excel 2002 (!) 和以下连接代码

```
Dim cn As ADODB.Connection
Set cn = New ADODB.Connection
With cn
    .Provider = "Microsoft.Jet.OLEDB.4.0"
    .ConnectionString = "Data Source=C:\Purchase Req No. List.xls; Extended Properties=Excel 8.0;"
    .Open
End With 
```

显然这不适用于每个人的情况，并且是一个有点笨拙的解决方法，但也许有人会发现它很有用......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-17T19:36:04.397

我遇到了同样的问题，并且能够在没有命名范围的情况下解决。此外，作为我的问题的两个方面，请确保工作表名称中没有尾随空格。尝试...

```
strQuery = "Select * from ['With Spaces$']" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-30T12:30:12.040

如果有人在查询 sql 中使用它，这对我有用

```
select * 
FROM OPENROWSET('Microsoft.ACE.OLEDB.12.0', 
'Excel 12.0 Xml;Database=YourPath\YourFileName.xlsx;',['name name$']); 
```

工作表名称是“名称名称”，只需将名称放在单引号之间

# java - 如何从数据库中绘制与前一行相同 ID 但来自不同表的行？

> ID：15731050
> 
> 赞同：1
> 
> 时间：2013-03-31T15:31:21.500
> 
> 标签：java, android, sqlite

我在下面有这个方法，它从 sqlite 数据库中提取随机问题，从名为 tblPitanja 的 tbale（db 中有 3 个表）和四个可能的答案。用户回答问题后，我现在需要从同一个 sqlite 数据库但从不同的表中提取具有相同 ID 的问题和答案。我需要问一些与上一个问题相关的附加问题。怎么做？现在对我来说最难的部分是如何知道上一个问题中的 ID 是什么。

```
private void nextQuestion() {
        counter++;
        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{ 

            mDbHelper.open(); 

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            List<Answer> labels = new ArrayList<Answer>();

            labels.add(new Answer(c.getString(2), true));
            labels.add(new Answer(c.getString(3), false));
            labels.add(new Answer(c.getString(4), false));
            labels.add(new Answer(c.getString(5), false));

            tacanOdg = c.getString(2);

            Collections.shuffle(labels);

            byte[] image_bytes = c.getBlob(c.getColumnIndex("PITANJE"));
            ByteArrayInputStream inputStream = new ByteArrayInputStream(image_bytes); 
            Bitmap bp=BitmapFactory.decodeStream(inputStream);

            if(counter < 11){
            flag.setImageBitmap(bp);

            bOdgovor1.setText(labels.get(0).option);
            bOdgovor1.setTag(labels.get(0));
            bOdgovor1.setOnClickListener(clickListener);

            bOdgovor2.setText(labels.get(1).option);
            bOdgovor2.setTag(labels.get(1));
            bOdgovor2.setOnClickListener(clickListener);

            bOdgovor3.setText(labels.get(2).option);
            bOdgovor3.setTag(labels.get(2));
            bOdgovor3.setOnClickListener(clickListener);

            bOdgovor4.setText(labels.get(3).option);
            bOdgovor4.setTag(labels.get(3));
            bOdgovor4.setOnClickListener(clickListener);

            rezultat.setText(counter + "/10");
            score.setText("Score: " + brojacTacnihOdgovora);

            }else{
                brojacVremena.cancel();

            }
        }
        finally{ 
            mDbHelper.close();
        } 
```

编辑：

数据库助手：

```
public class DataBaseHelper extends SQLiteOpenHelper
{
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
//destination path (location) of our database on device
private static String DB_PATH = "/data/data/rs.androidaplikacije.flags/databases/";
private static String DB_NAME ="pitanja.sqlite";// Database name
private static SQLiteDatabase mDataBase; 
private final Context mContext;

public DataBaseHelper(Context mojContext) 
{
    super(mojContext, DB_NAME, null, 1);// 1? its Database Version
    DB_PATH = mojContext.getApplicationInfo().dataDir + "/databases/";
    this.mContext = mojContext;
}

public void createDataBase() throws IOException
{
    //If database not exists copy it from the assets

        this.getReadableDatabase();
        this.close();
        try 
        {
            //Copy the database from assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } 
        catch (IOException mIOException) 
        {
            throw new Error("ErrorCopyingDataBase");
        }
    }
    /*Check that the database exists here: /data/data/your package/databases/Da Name
    private boolean checkDataBase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        //Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }
    */

    //Copy the database from assets
    private void copyDataBase() throws IOException
    {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        //Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }
    @Override
    public void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        Log.w("DataBaseHelper", "Upgrading database!!!!!");
          onCreate(arg0);

    }

} 
```

适配器：

```
public class TestAdapter 
{
    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private SQLiteDatabase mDb;
    private DataBaseHelper mDbHelper;

    public TestAdapter(Context context) 
    {
        this.mContext = context;
        mDbHelper = new DataBaseHelper(mContext);
    }

    public TestAdapter createDatabase() throws SQLException 
    {
        try 
        {
            mDbHelper.createDataBase();
        } 
        catch (IOException mIOException) 
        {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public TestAdapter open() throws SQLException 
    {
        try 
        {
            mDbHelper.openDataBase();
            mDbHelper.close();
            mDb = mDbHelper.getReadableDatabase();
        } 
        catch (SQLException mSQLException) 
        {
            Log.e(TAG, "open >>"+ mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() 
    {
        mDbHelper.close();
    }

     public Cursor getTestData(String whereClause)
     {;
         try
         {
             String sql ="SELECT * FROM tblPitanja WHERE 1 = 1 " + whereClause + " ORDER BY RANDOM() LIMIT 1";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
     public Cursor getTestDataGradovi()
     {;
         try
         {
             String sql ="SELECT * FROM tblGradovi LIMIT 1";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
     public Cursor getTestDataValute()
     {;
         try
         {
             String sql ="SELECT * FROM tblValute LIMIT 1";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
} 
```

还有我的附加问题的新方法（它还没有完成，它只是复制了我的第一个方法，并进行了一些更改以使用 .getTestDataGradovi() 从 db 适配器类：

```
private void nextQuestionGrad() {
         flag.setVisibility(View.GONE);
         dodatnoPitanje.setVisibility(View.VISIBLE);

            TestAdapter mDbHelper = new TestAdapter(this);
            mDbHelper.createDatabase();

            try{ 

                mDbHelper.open(); 

                Cursor c = mDbHelper.getTestDataGradovi();

                mAnsweredQuestions.add(c.getLong(0));

                List<Answer> labels = new ArrayList<Answer>();

                labels.add(new Answer(c.getString(2), true));
                labels.add(new Answer(c.getString(3), false));
                labels.add(new Answer(c.getString(4), false));
                labels.add(new Answer(c.getString(5), false));

                tacanOdg = c.getString(2);

                Collections.shuffle(labels);

                dodatnoPitanje.setText(c.getString(1));

                bOdgovor1.setText(labels.get(0).option);
                bOdgovor1.setTag(labels.get(0));
                bOdgovor1.setOnClickListener(clickListenerGrad);

                bOdgovor2.setText(labels.get(1).option);
                bOdgovor2.setTag(labels.get(1));
                bOdgovor2.setOnClickListener(clickListenerGrad);

                bOdgovor3.setText(labels.get(2).option);
                bOdgovor3.setTag(labels.get(2));
                bOdgovor3.setOnClickListener(clickListenerGrad);

                bOdgovor4.setText(labels.get(3).option);
                bOdgovor4.setTag(labels.get(3));
                bOdgovor4.setOnClickListener(clickListenerGrad);

                score.setText("Score: " + brojacTacnihOdgovora);

                }
            }
            finally{
                mDbHelper.close();
            }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:43:52.650

您需要更改`getTestDataGradovi`以加载由其 ID 标识的特定记录：

```
public Cursor getTestDataGradovi(long id) {
    String sql = "SELECT * FROM tblGradovi WHERE _ID = " + id;
    Cursor c = mDb.rawQuery(sql, null);
    c.moveToNext();
    return c;
} 
```

在里面`nextQuestion`，你需要将当前问题的 ID 保存在某处：

```
mCurrentID = c.GetLong(0); 
```

在里面`nextQuestionGrad`，您可以使用保存的 ID 来获取相应的其他问题：

```
Cursor c = mDbHelper.getTestDataGradovi(mCurrentID); 
```

# delphi - FastMM 报告 FormDestroy 上释放的类的内存泄漏

> ID：15731052
> 
> 赞同：3
> 
> 时间：2013-03-31T15:32:03.813
> 
> 标签：delphi, memory-leaks, delphi-7, kylix, clx

我在 Delphi 7 应用程序（CLX）中遇到了内存泄漏问题，代码如下：

```
unit Unit2;

interface

  uses ECRClass, ECR_Text,  SysUtils, Types, Classes, Variants, Math;

  type tLeakClass = class
  private
  fsType : integer;

  public
  fsPrinter : TECR_Class;

  published
  constructor Create (AOwner : TComponent);
  destructor Destroy();
  end;

implementation

   constructor tLeakClass.Create (AOwner : TComponent);
   begin
   fsPrinter := TECR_Text.Create(AOwner);
   end;

   destructor tLeakClass.Destroy();
   begin
     fsPrinter.Free
   end;

end. 
```

`fsPrinter`即使在主窗体（TForm）关闭时释放对象结果也会泄漏：

```
unit Unit1;

interface

uses
  SysUtils, Types, Classes, Variants, QTypes, QGraphics, QControls, QForms, 
  QDialogs, QStdCtrls, Unit2;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
    tleak : tLeakClass;
  end;

var
  Form1: TForm1;

implementation

{$R *.xfm}

procedure TForm1.Button1Click(Sender: TObject);
begin
     tLeak := tLeakClass.Create(Self);
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
   tleak.Free
end;

end. 
```

这是 FastMM4 的泄漏报告：

```
A memory block has been leaked. The size is: 740

This block was allocated by thread 0xBA8, and the stack trace (return addresses) at the time was:
402F1C [system.pas][System][@GetMem][2439]
403C77 [system.pas][System][TObject.NewInstance][8360]
404012 [system.pas][System][@ClassCreate][9019]
502F15 [ECR_Text.pas][ECR_Text][TECR_Text.Create][101]
403C80 [system.pas][System][TObject.NewInstance][8360]
404012 [system.pas][System][@ClassCreate][9019]
5030C6 [Unit2.pas][Unit2][tLeakClass.Create][24]
43856C [QStdCtrls.pas][QStdCtrls][2863]
503300 [Unit1.pas][Unit1][TForm1.Button1Click][30]
447076 [QControls.pas][QControls][TControl.Click][1977]
43858C [QStdCtrls.pas][QStdCtrls][TButton.Click][2871]

The block is currently used for an object of class: TECR_Text 
```

[在这里](http://speedy.sh/hmtTP/dTEst.7z)，您可以下载代表问题的项目的完整[SSCCE](http://sscce.org/)示例（单击按钮运行示例并关闭表单）。

为什么`fsPrinter`对象泄漏？我怎样才能避免泄漏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T15:40:32.617

您的析构函数声明不正确。你写了：

```
destructor Destroy(); 
```

但是你必须重写在`TObject`. 如果你不这样做，那么你的析构函数将不会被调用，`Free`它会调用在 中声明的虚拟析构函数`TObject`。

像这样修复它：

```
destructor Destroy(); override; 
```

尽管在这种情况下并不重要，但您应该养成在构造函数和析构函数中调用继承的构造函数和析构函数的习惯。这样，当您从一个比`TObject`其构造函数和析构函数执行更多操作的类派生时，您将确保超类代码运行。

```
constructor tLeakClass.Create (AOwner : TComponent);
begin
  inherited Create;
  fsPrinter := TECR_Text.Create(AOwner);
end;

destructor tLeakClass.Destroy();
begin
  fsPrinter.Free;
  inherited;
end; 
```

* * *

不过 FastMM 报告有点奇怪。它报告该`TECR_Text`对象已泄漏。但是由于您创建了该表单所拥有的内容，因此表单应该将其删除。问题代码中明显泄露的对象是`tLeakClass`

所以我怀疑课程中还有其他我们看不到的问题。很可能你犯了同样的错误并省略了`override`我们看不到的类的析构函数。

# jquery - .load() 和 .html() 方法中的 Ajax 加载都不顺畅

> ID：15731053
> 
> 赞同：0
> 
> 时间：2013-03-31T15:32:13.143
> 
> 标签：jquery, ajax

```
function load_content(url)  
{
  $('#loading').show();
  $.get(url, function(data) {
    $('#target').html(data); 
    $('#loading').hide();  
  });  
} 
```

我使用以下代码将内容从另一个页面加载到`<div>`ID 目标中。在内容被加载之前，页面变得无响应或滚动非常缓慢。GIF 预加载器也没有动画。我在使用方法时遇到了同样的问题`.load()`。我的代码中有什么不好的做法吗？或者如何克服这个问题？

但是在这个站点[http://www.behance.net/](http://www.behance.net/)上滚动内容的 Ajax 加载是流畅的。如何达到同样的效果？

我尤其在 Chrome 中面临这个问题。IE和firefox，如我所料，流畅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:38:50.267

您应该尝试使用jQuery 的`.ajaxStart()`和`.ajaxComplete()`方法：

```
function load_content(url){
   $(document).ajaxStart(function(){
       $('#loading').show();
   });

   $.get(url, function(data) {
       $('#target').html(data);
   });

   $(document).ajaxComplete(function(){
       $('#loading').hide();
   });

 } 
```

## .ajaxStart()

> 每当要发送 Ajax 请求时，jQuery 都会检查是否还有其他未完成的 Ajax 请求。如果没有进行中，jQuery 会触发 ajaxStart 事件。此时会执行已使用 .ajaxStart() 方法注册的所有处理程序。

### [.ajaxStart() 来自文档](http://api.jquery.com/ajaxStart/)

## .ajaxComplete()

> 每当 Ajax 请求完成时，jQuery 都会触发 ajaxComplete 事件。此时会执行已使用 .ajaxComplete() 方法注册的所有处理程序。

### [.ajaxComplete() 来自文档](http://api.jquery.com/ajaxComplete/)

# oracle - 按升序格式化日期

> ID：15731056
> 
> 赞同：1
> 
> 时间：2013-03-31T15:32:23.463
> 
> 标签：oracle

你能帮我在下面吗？

我根据要求编写了以下查询

```
SQL> SELECT   mon."months",
  2           COUNT (DECODE (e1.ename, 'RAVI', 1, DECODE (e1.ename, 'KIRAN', 1, NULL))
  3                 ) AS "num-review"
  4      FROM (SELECT     TO_CHAR (ADD_MONTHS (SYSDATE, LEVEL - 7),
  5                                'MON-YYYY'
  6                               ) "months"
  7                  FROM DUAL
  8            CONNECT BY LEVEL <= 18
  9              ORDER BY LEVEL) mon, (select ename, hiredate, to_char(hiredate,'MON-YYYY') "Month" from emp_copy) e1
 10              WHERE mon."months"=e1."Month"(+)
 11  GROUP BY "months";

months   num-review
-------- ----------
APR-2013          0
AUG-2013          0
DEC-2012          1
DEC-2013          0
FEB-2013          2
FEB-2014          0
JAN-2013          1
JAN-2014          0
JUL-2013          0
JUN-2013          0
MAR-2013          0

months   num-review
-------- ----------
MAY-2013          0
NOV-2012          0
NOV-2013          0
OCT-2012          1
OCT-2013          0
SEP-2012          1
SEP-2013          0

18 rows selected. 
```

在这里我必须得到像

```
Sep-2012
Oct-2012
Nov-2012
Dec-2012
Jan-2013
Feb-2013
Mar-2013
Apr-2013
May-2013
Jun-2013
Jul-2013
Aug-2013
Sep-2013
Oct-2013
Nov-2013
Dec-2013
Jan-2014
Feb-2014 
```

但我以不同的方式获得输出。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:06:33.943

因为您使用`to_char`日期来获取“月份”，所以按此排序只会按字母顺序为您提供月份（如您所见）。您需要给自己另一个按时间顺序排序的字段，您可以使用 'YYYYMM' 来完成，例如并按此排序。这是一个基于您的查询的示例（简化为删除您的特定表）。这有帮助吗？

```
select "months", count(*) "num", "sort_months" from 
(
SELECT TO_CHAR (ADD_MONTHS (SYSDATE, LEVEL - 7), 'MON-YYYY') "months",
       TO_CHAR (ADD_MONTHS (SYSDATE, LEVEL - 7), 'YYYYMM') "sort_months"
FROM DUAL 
 CONNECT BY LEVEL <= 18
 ORDER BY LEVEL
)
group by "months", "sort_months"
order by "sort_months"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T06:23:36.753

如果您根据`MON-YYYY`它对日期进行排序，则会给出从开始的 o/p，`APR,AUG..` 因为它`MON-YYYY`会`APR-2013`按字母顺序对数据进行排序，因此您还需要提取`numeric`月份的值，即`MM-YYYY`连同 'MON-YYYY `and sort with`MM-YYYYY ` 那么结果将是您的预期结果，即按排序方式排列的日期。

```
 SELECT mon."months",COUNT (DECODE (e1.ename, 'RAVI', 1, DECODE (e1.ename, 'KIRAN', 1, NULL))) AS "num-review"
 FROM (SELECT TO_CHAR(ADD_MONTHS(SYSDATE, LEVEL - 7),'MON-YYYY') "months",TO_CHAR(ADD_MONTHS(SYSDATE, LEVEL - 7),'MM-YYYY') "months_num"
      FROM DUAL CONNECT BY LEVEL <= 18 ORDER BY LEVEL) mon,
     (select ename, hiredate, to_char(hiredate,'MON-YYYY') "Month" from emp_copy) e1
     WHERE mon."months"=e1."Month"(+)
     GROUP BY "months" order by "months_num"; 
```

# swi-prolog - 逐行读取文件以搜索字符串

> ID：15731057
> 
> 赞同：0
> 
> 时间：2013-03-31T15:32:29.940
> 
> 标签：swi-prolog

我有一个纯文本文件和几行随机数据，没有什么特别的。我想知道我将如何像下面的伪代码那样逐行读取这个文件：

```
arrLines[]
data = open ("x.txt", read, handle)
for line in data
   if line == "stop" then stop reading
   arrLines.add(line)

close(handle) 
```

但我想跳过文件中的第一行。我知道的其他语言中非常简单的东西，例如 python..ect，我发现从文档中学习非常困难，因为他们似乎希望您在使用它之前已经了解很多 prolog：/

任何人都可以推荐一些他们不希望您在使用 prolog 之前了解很多的资源吗？关于事物含义的更多细节以及使用它们的示例，而不仅仅是对事物的描述

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:16:51.570

您可以定义以下谓词来从文件中读取行到列表中，并在仅包含“stop”的行处停止：

```
read_until_stop(File, [L|Lines]) :-
    read_line_to_codes(File, Codes), Codes \= end_of_file,
    atom_codes(L, Codes),
    L \= stop,
    !, read_until_stop(File, Lines).
read_until_stop(_, []). 
```

*File*是一个流对象，要获取它，您可以使用：

```
open(FileName, read, File). 
```

通过阅读一行来跳过一行。研究手册中包含`read_line_to_codes`、`atom_codes`和的部分`open`，它们有很多有用的谓词。同样，您需要了解 Prolog 基础知识。

现在这是一种方法，另一种方法是使用 DCG。这将是一种正确的“Prolog”方式。在 stackoverflow 上有很多使用 DCG 的例子。

如果你问自己为什么这样做这么难，那是因为 Prolog 并不是用来做简单文本处理的工具；有些工具在这方面做得更好（grep、sed、awk，当然还有 perl）。

PS Stackoverflow 实际上是 Prolog 中代码示例的重要来源。用 SWI-Prolog 标记的问题将为您提供 SWI-Prolog 特定代码的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T21:20:22.330

让我也用 prolog 的伪代码来制定答案

```
open the file and
find all lines which contain the string

a line is all characters until newline 
```

我找到了一个教程：[https ://www.csupomona.edu/~jrfisher/www/prolog_tutorial/1.html](https://www.csupomona.edu/~jrfisher/www/prolog_tutorial/1.html)

我建议使用`apropos(append)`搜索附加或打开等。它将以可用的结构打开帮助。

查看 swi prolog 评估某事使用时发生了什么`gtrace`

```
?- gtrace, append([1,2,3], [9], L). 
```

# xna - Silverlight XNA 宽度和高度

> ID：15731060
> 
> 赞同：1
> 
> 时间：2013-03-31T15:32:46.333
> 
> 标签：xna, viewport

尽管我在构造函数中执行以下操作：

`SharedGraphicsDeviceManager.Current.PreferredBackBufferHeight = 480; SharedGraphicsDeviceManager.Current.PreferredBackBufferWidth = 800;`

`Viewport.Width`出来是 480，出来是 800，这`Viewport.Height`与我想要的相反。

我已在 XAML 中将方向设置为横向。

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:37:52.500

该类`SharedGraphicsDeviceManager`包含一个`ApplyChanges()`用于提交更改的方法。
请参阅[本](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.sharedgraphicsdevicemanager.applychanges.aspx)文档。

# perl - Perl 获取位置（经度+纬度），加上邮政编码

> ID：15731067
> 
> 赞同：0
> 
> 时间：2013-03-31T15:33:18.153
> 
> 标签：perl, geolocation, latitude-longitude, postal-code

这是另一张海报上的。(jpgunter) [https://stackoverflow.com/users/1857927/jpgunter](https://stackoverflow.com/users/1857927/jpgunter)

```
use strict;
use LWP::Simple; # from CPAN
use JSON qw( decode_json ); # from CPAN

sub getLatLong($){
  my ($address) = @_;

  my $format = "json"; #can also to 'xml'

  my $geocodeapi = "https://maps.googleapis.com/maps/api/geocode/";

  my $url = $geocodeapi . $format . "?sensor=false&address=" . $address;

  my $json = get($url);

  my $d_json = decode_json( $json );

  my $lat = $d_json->{results}->[0]->{geometry}->{location}->{lat};
  my $lng = $d_json->{results}->[0]->{geometry}->{location}->{lng};

  return ($lat, $lng);
} 
```

它看起来正在做我想做的事，但是......有没有人能够解释我把地址放在哪里来运行它以及输出到哪里？

对于我正在从事的“非学术”项目，我必须从另一个文件中遍历大约 5000 个城市，显然手动进行的想法是可怕的。在过去的 7 年里，我也只做了很少的 perl，所以绝对任何帮助都会很棒。我已经安装了 LWP 6.04 和 JSON 2.53。如果我可以使用输入文件，请旋转它（使用显示它的邮政编码）。该行将在...“formatted_address”：“Geelong West VIC 3218，Australia”，只是不确定如何在那里获得 3218。

原帖在这里... [使用 perl 和 Google 的 Geocode API 获取地址的纬度和经度](https://stackoverflow.com/questions/13716524/get-the-latitude-and-longitude-of-an-address-using-perl-and-googles-geocode-api)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:23:19.017

这是一个包含从 Google API 获取长/纬度数据并返回这两个值的子例程的文件。但是，没有调用子例程，因此脚本什么也不做。

对脚本开头的以下更改将从命令行获取输入并将数据返回到终端：

```
#!/usr/bin/perl
use strict;
use warnings;
use LWP::Simple; # from CPAN
use JSON qw( decode_json ); # from CPAN

# get command line input
my $address = $ARGV[0];

# get latitude/longitude and output
my ($lat, $long) = getLatLong( $address );
print "lat: $lat, long: $long\n";

sub getLatLong($){
  my ($address) = @_;

  my $format = "json"; #can also to 'xml'

... 
```

然后，您可以按如下方式调用脚本：

```
$ long_lat_script.pl '25 Jackson street, Pretoria, South Africa' 
```

关于这个 API 的使用政策的评论，这取决于你想用它来做什么。使用此 API 时确实需要显示地图；但是，如果您在站点中需要此类数据，则允许（并由 Google 推荐）批量收集此类数据，而不是重复要求相同的数据。我曾经以类似的方式将这个 API 用于大约 5000 个地址。[您可以在此处](https://developers.google.com/maps/articles/geocodestrat%20%22here%22.)阅读更多相关信息。

# ruby - 未初始化的常量 ActiveRecord (NameError)

> ID：15731068
> 
> 赞同：13
> 
> 时间：2013-03-31T15:33:19.267
> 
> 标签：ruby, activerecord

我正在运行一个脚本（我失去联系的一个朋友为我写的。）它的开头是这样的：

```
require 'ruby-debug'
require 'circle'

first_circle=Circle.new()
@number_of_rounds=1 
```

但我不断收到此错误消息：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/circle-0.0.2/lib/circle/models/friendship.rb:1:in
`<top (required)>': uninitialized constant ActiveRecord (NameError)
  from
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in
`require'
  from
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in
`require'
  from
C:/Ruby193/lib/ruby/gems/1.9.1/gems/circle-0.0.2/lib/circle/circle.rb:1:in
`<top (required)>'
  from
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in
`require'
  from
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in
`require'
  from
C:/Ruby193/lib/ruby/gems/1.9.1/gems/circle-0.0.2/lib/circle.rb:7:in
`<top (required)>'
  from
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in
`require'
  from
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in
`rescue in require'
  from
C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in
`require'
  from primes.rb:5:in `<main>' 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T15:39:15.227

这是交叉发布到[ruby​​-talk](http://www.ruby-forum.com/topic/4412556)。

ActiveRecord 是一个与数据库对话的类，这个 gem 期望在加载了与 ActiveRecord 的数据库连接的上下文中运行。如果您在 Rails 中，这意味着加载您的 Rails 环境。或者如果只是 ActiveRecord，这样的东西会起作用：

```
require 'active_record'
require 'circle'

ActiveRecord::Base.establish_connection adapter: 'sqlite3', database: ':memory:'
ActiveRecord::Schema.define do
  self.verbose = false

  create_table :users do |t|
    t.string  :name
    t.integer :friends_count, :default => 0, :null => false
  end

  create_table :friendships, :force => true do |t|
    t.references :user, :friend
    t.datetime :requested_at, :accepted_at, :denied_at, :blocked_at
    t.string :status
    t.timestamps
  end

  create_table :blocked_users, :force => true do |t|
    t.references :user, :blocked_user
    t.timestamps
  end

  change_table :friendships do |t|
    t.index :user_id
    t.index :friend_id
    t.index :status
  end

  change_table :blocked_users do |t|
    t.index :user_id
    t.index :blocked_user_id
  end
end

class User < ActiveRecord::Base
  has_circle
end

john = User.create! name: 'john'
mary = User.create! name: 'mary'
paul = User.create! name: 'paul'

john.befriend(mary)
john.friends?(mary)               # => false
mary.accept_friend_request(john)
mary.friends?(john)               # => true 
```

但老实说，如果您不知道 ActiveRecord 是什么，那么这个 gem 似乎不太可能为您解决问题。另外，我对这个 gem 有点怀疑，它[的迁移中有一个拼写错误](https://github.com/theymaybecoders/circle/blob/f13fa0eadc77fd97029f9983dffe499fe8e9ae39/lib/generators/circle/templates/migration.rb#L27)，因此除非你去修复它，否则它实际上不起作用。这已经被破坏了至少 7 个月而没有被修复。gem 的下载量 < 800 次，数量并不多（用户少 = 发现和修复 bug 的人少），而且看起来作者并不打算维护它。

* * *

好吧，我才意识到实际发生了什么。花了大约 20 分钟把它写在上面，它可能会帮助以后有人在谷歌上搜索一个问题，所以我打算离开它。*我怀疑*真正发生的事情是您的系统上有一个名为 circle 的 gem，并且您的同一目录中可能有一个文件名为 circle。您的加载路径设置不正确，因此当您`require 'circle'`找到 gem 而不是您编写的文件时。一个简单的答案是说`require File.dirname(__FILE__) + '/circle'`而不是`require 'circle'`这并不是真正的正确答案，但它可以在不涉及找出正确答案所需的无数细微差别的情况下起作用。如果您想弄清楚什么是正确的，我需要知道您使用的是哪个 Ruby 版本，您打算如何使用和调用此代码，以及您的目录结构是什么样的。

还。如果您会说 circle.rb 是同一目录中的文件，那么我不会失去 20 分钟的最佳答案。您应该在将来提供足够的上下文来理解问题。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-02T14:39:58.700

由于此页面是谷歌搜索错误消息时第一个出现的页面，因此请注意，在尝试运行**rspec**而`app/models/...`不是`spec/models/...`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T15:37:25.530

你需要

```
gem install activerecord 
```

希望这可以帮助。

# android - 无法从 Play 商店更新我的应用

> ID：15731073
> 
> 赞同：2
> 
> 时间：2013-03-31T15:33:45.853
> 
> 标签：android, google-play

我昨天在 Play 商店更新了我的应用程序，但我无法将我的应用程序更新到新版本。如果我用手机去玩商店，我没有得到更新按钮。

**在开发者控制台中：** 如果我尝试存档最新版本 (11) 并激活我以前的版本 (10)，它会显示：

> 此配置无法发布，原因如下： 禁止将之前匹配版本 11 的设备降级到版本 10，当 API 级别在 10+ 范围内且屏幕布局包含 [small, normal, large , xlarge] 和包含所有 [android.hardware.screen.PORTRAIT, android.hardware.TOUCHSCREEN] 的功能。
> 
> 以前活动的 APK 支持的设备比草稿配置中的设备多。某些设备将不会收到升级。当前配置不再支持当前运行版本 11 的设备。此类设备将不会获得升级。API 级别在 10+ 范围内，屏幕布局包含任何 [small, normal, large, xlarge] 和包含所有 [android.hardware.screen.PORTRAIT, android.hardware.TOUCHSCREEN] 的功能

* * *

这是在我的 AndroidManifest 版本 11 中添加的。

```
<uses-sdk android:minSdkVersion="10" android:targetSdkVersion="17" /> // Previously was targetSdkVersion 16
<provider android:name=".DatabaseContentProvider" android:authorities="com.blabla.blabla.contentProvider" />
<uses-permission android:name="com.android.vending.CHECK_LICENSE" /> 
```

如您所见，我在此版本中实现了 Googles LVL。

完整的 AndroidManifest：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.asd.asd"
    android:versionCode="11"
    android:versionName="2.0.0">

    <uses-sdk android:minSdkVersion="10" android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="com.android.vending.CHECK_LICENSE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar"
        android:allowBackup="true">
        <activity
            android:name="com.asd.asd.LicenseCheck"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.asd.asd.MyActivity"
            android:label="@string/app_name" 
            android:configChanges="keyboardHidden|orientation|screenSize" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name="com.asd.asd.PreferenceActivity"
            android:label="@string/settings_name" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name="com.asd.asd.AboutActivity"
            android:label="@string/about_name" >
        </activity>
        <receiver android:name="com.asd.asd.AlarmReceiver" />
        <receiver android:name="com.asd.asd.NotificationReceiver" />
        <service android:name="com.asd.asd.TimerService" />
        <provider android:name=".DatabaseContentProvider" 
            android:authorities="com.asd.asd.contentProvider" />
    </application>

</manifest> 
```

我不明白为什么我不能更新应用程序。而且我不明白为什么它抱怨屏幕尺寸、肖像和触摸屏。我从未在我的清单中声明过这些细节。

**编辑：** 我发现我已经从清单中删除了这个：

```
<compatible-screens android:xlargeScreens="false"/> 
```

可能是这导致了问题吗？我现在想支持 xlargescreens，这就是我删除它的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:58:59.957

@RagnhavSood 是对的。更新需要一些时间（大约 24 小时），它现在可以在我家里的另一部手机上使用，但不能在我自己的手机上使用，因为它与开发者帐户绑定。我想我的问题可能是我实现了 LVL，所以我无法更新自己的应用程序。

所有学分 Raghav Sood

# jqgrid - jqGrid with localArray - 内联导航：在单击添加、保存和删除行按钮时调用自定义函数

> ID：15731075
> 
> 赞同：0
> 
> 时间：2013-03-31T15:33:48.017
> 
> 标签：jqgrid, jqgrid-inlinenav

我正在使用 jqGrid 和 localArray 数据。我正在从 azure db 获取这个数组并绑定到网格。在处理每一行之后，我计划在数据库中更新它。

我正在使用内联导航栏。单击“添加行”、“保存行”和“删除行”按钮时，我想调用我的自定义函数，然后想从该函数中保存/删除数据库中的数据。

**首先我想知道我的设计是否正确和可扩展。**

目前，我可以使用“aftersavefunc”参数在单击保存按钮时调用自定义函数。

**其次，请让我知道我必须为“删除行”按钮设置哪个参数。我认为对于“添加行”，相同的参数可以工作，因为我们必须单击“保存行”按钮来保存行。**

我的代码如下供参考：

```
jQuery("#list4").jqGrid({
        datatype: "local",
        data: myData,
        height: "auto",
        colNames: ['RowNo', 'RouteId', 'Area', 'BusStop', 'Seater', 'Lat', 'Long', 'Timing', 'FromTo', 'KeyPoint'],
        colModel: [
                  { name: 'id', index: 'id', width: 50, sortable: false },
                  { name: 'RouteId', index: 'RouteId', width: 50, sortable: false },
                  { name: 'Area', index: 'Area', width: 130, sortable: false, editable: true, editrules: { required: true} },

              ],
        multiselect: false,
        rownumbers: false,
        rowList: [10, 20, 30],
        pager: jQuery('#pager1'),
        viewrecords: true,
        caption: "Bus Schedule Data",
        editurl: "clientArray",
        restoreAfterSelect: false,
        loadonce: true

    });
    var rowid;
    var inlineparams = {
        addParams: { useFormatter: false },
        editParams: {
            aftersavefunc: function (id) {
                var rowData = jQuery('#list4').jqGrid('getRowData', id);
                ScheduleTable.update({ id: 1, Area: rowData.Area.toString() });
            }
        },
        add: true,
        edit: true,
        save: true,
        cancel: true,
        del: true
    };

    jQuery("#list4").jqGrid('navGrid', "#pager1", { edit: false, save: false, add: false, cancel: false, del: false });
    jQuery("#list4").jqGrid('inlineNav', "#pager1", inlineparams);
    jQuery('#list4').jqGrid("saveRow", id, {
        keys: false,
        url: "clientArray"
    }); 
```

# java - 如何分析 Java 源代码并确保它是线程安全的

> ID：15731078
> 
> 赞同：5
> 
> 时间：2013-03-31T15:34:15.410
> 
> 标签：java, multithreading, thread-safety

我正在阅读java代码以确保它是线程安全的。

据我了解，该方法中的任何局部变量都是线程安全的，因为它属于堆栈内存地址。任何类/实例变量都不是线程安全的，因为它属于堆内存，由其他线程共享。

根据经验，我可以在每个涉及类变量的方法上放置一个同步关键字。

是否有任何 Eclipse 插件或可以分析/防止多线程问题的规则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T15:54:09.847

对于优秀的程序员来说，线程世界是最敏感的事情之一。每个线程问题的解决方案都需要对上下文有深入的了解。任何插件都不足以“智能”地每次选择最相关的解决方案。

事实上，它`synchronized`代表了所有可能解决方案的 5%。例如，考虑并发集合，`ConcurrentHashMap`这是经过深思熟虑的，并且没有使用基本的大锁定=>比这更复杂。

想一想`volatile`，通过任何锁来执行确保屏障内存的同时避免任何类型的原子性；**原子性**不是它的作用，但在某些情况下，避免它以提高性能会很好。

因此，为了线程安全，忘记任何插件（即使可能存在一些插件），但相信你的大脑；）

注意：将`synchronized`关键字放在每个写作课上，会............丑陋而不谈论糟糕的表现......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T16:13:00.563

我认为没有任何东西可以明确地检查线程安全性，已经提到了一些工具，比如[findbugs](http://findbugs.sourceforge.net/)可以合理地找到明显的错误。

程序员非常有责任确保他们的程序不会将变量或引用泄漏到不同的线程中，并且在多个线程中使用事物以确保每个线程都看到“正确”的值。

在性能之前进行安全设计，您可能会发现它可以很好地满足您的需求，但如果您进行优化会增加复杂性和潜在的故障，它可能最终不会成为瓶颈。

我建议阅读专门阅读[Java Concurrency In Practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)，您也可能会发现[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)也很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:47:05.960

我不认为eclipse会提供任何这样的插件。与局部变量一起尝试使用不可变对象、ThreadLocals 和大多数 od 多线程问题将得到处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T15:53:07.563

我还没有看到可以检测死锁的编译时工具。那将很难建模。我只知道[有些人已经尝试过了](http://people.csail.mit.edu/thies/deadlock-ecoop05.pdf)。

您始终可以在运行时检测到它们。可以查询 JMX Beans 以显示死锁线程，如本答案 - [Deadlock detection in Java 中](https://stackoverflow.com/questions/217113/deadlock-in-java)所述。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T17:58:15.700

更多的评论，但有点太长了。

> 根据经验，我可以在每个涉及类变量的方法上放置一个同步关键字。

并非如此 - 以 Vector 类为例：它是同步的，但迭代需要外部锁定。例如，并发替代方案是 CopyOnWriteArrayList，它允许迭代而无需锁定整个集合。

其他人已经回答的底线：它不像`synchronized`到处添加那么简单。您需要精确分析类的契约，并确保契约在多线程情况下仍然履行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-21T06:26:05.060

ThreadSafe（[http://www.contemplateltd.com/threadsafe](http://www.contemplateltd.com/threadsafe)，提供免费试用版）正是问题所要求的。请参阅这篇[InfoQ 文章](http://www.infoq.com/articles/Java-Concurrency-Static-Analysis-with-ThreadSafe)，了解它在包括 Apache JMeter 和 K9Mail 在内的开源应用程序中发现的并发错误示例。有关用户的意见，请参阅[Ivan Senic 的博客](http://blog.novatec-gmbh.de/threadsafe-fast-way-discover-concurrency-problems/)。[ThreadSafe 的 Wikipedia 条目](http://en.wikipedia.org/wiki/ThreadSafe)给出了一个简短的总结。

（披露：ThreadSafe 是一种商业工具，我是生产它的公司 Contemplate 的联合创始人。）

# windows - 将 Node.js 设置为对所有传出请求使用本地 HTTP/SOCKS 代理？

> ID：15731080
> 
> 赞同：2
> 
> 时间：2013-03-31T15:34:17.723
> 
> 标签：windows, node.js, proxy, firewall

我在 Windows 上使用 Node.js，不幸的是，我不得不通过公司代理 (HTTP/SOCKS) 传输所有出站流量来测试任何传出请求（例如，oauth，其中 node.js 必须到达远程服务器以获取令牌）。

是否有可以指定的全局配置？我认为更新 oauth 模块以支持代理是不值得的；我们的生产环境无论如何都不需要这样的代理配置。

# ms-access-2000 - 无法从查询中获取要填充的文本框默认值

> ID：15731083
> 
> 赞同：0
> 
> 时间：2013-03-31T15:34:43.077
> 
> 标签：ms-access-2000

我有一个表单字段，我试图从名为 qryCreditsUsed 的查询中填充该字段。该查询在下面列出并按预期工作。结果应该是与给定授权号相关联的计费记录数。结果可以但不需要保存，因为它应该是动态的。

```
SELECT Count(*) AS credits
FROM [tbl BILLING]
WHERE ((([tbl BILLING].AUTHORIZATION)=[Forms]![frmAUTHORIZATION]![AUTHORIZATION])); 
```

具体：我试图通过文本框的“默认值”属性填充表单字段（文本框），使用“=DLookUp（“[credits]”，“qryCreditsUsed”）”没有任何成功。该字段为空白。该字段的“控制源”是“授权”表中的“余额”字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:59:38.897

**解决了！！**

文本框绑定到“余额”字段。我将控制源更改为“=DLookUp("[credits]","qryCreditsUsed")"（与“默认值”相同），现在它可以工作了。

# javascript - 如何确定 ul 中的哪个 li 已被点击？

> ID：15731086
> 
> 赞同：0
> 
> 时间：2013-03-31T15:35:10.790
> 
> 标签：javascript

我正在用 HTML/JavaScript 制作一个问答游戏，它随机选择问题并将问题和答案添加到页面（`document.getElementById, innerHTML`等）

我想添加一个点击监听器，这样当点击一个答案时，它将确定它是否正确。我应该如何设置这个监听器（或监听器？）来区分`li`s.

JavaScript

```
var elementQuestion = document.getElementById("question"); 
var elementAnswers = document.getElementById("answers"); 
elementQuestion.innerHTML = question[currentQuestion]; 
for(a = 0; a < answers[currentQuestion].length; a++) {
    var li = document.createElement("li");
    li.innerHTML = answers[currentQuestion][a];
    elementAnswers.appendChild(li);
} 
```

HTML

```
<!-- Question -->
<p id="question"> </p>
<!-- Answer Array -->
<ul id="answers"> </ul> 
```

（我觉得我错过了一些明显的东西......）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:52:25.933

添加答案时，您还可以为此添加一个 EventListener：

```
elementAnswers.addEventListener("click", been_clicked, true); 
```

在回调函数“been_clicked”中，您可以将处理事件的元素（此处：ul-node）称为“this”，并将被单击的元素称为“e.target”：

```
function been_clicked(e) {
   alert("You clicked '" + e.target.innerHTML + "'");
} 
```

有关工作演示，请参阅[http://jsfiddle.net/bjelline/7kSw5/ 。](http://jsfiddle.net/bjelline/7kSw5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:42:47.480

将其插入循环：

```
li.onclick=create_on_click_function(li); 
```

并添加一个新函数，它将生成 onclick 回调函数：

```
function create_on_click_function(element){

      return function(){
            alert(element.innerHTML + ' clicked');
      }
} 
```

添加适当的参数来确定被点击`<li>`元素的id是否等于答案id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:47:46.083

如果您为每个添加一个 id `<li>`（如 answer_0、answer_1 等），您可以在 , 上设置一个侦听`<ul>`器，因为列表项上的事件会冒泡：

```
var elementQuestion = document.getElementById("question"); 
var elementAnswers = document.getElementById("answers"); 
elementQuestion.innerHTML = question[currentQuestion]; 
for(a = 0; a < answers[currentQuestion].length; a++) {
    var li = document.createElement("li");
    li.innerHTML = answers[currentQuestion][a];
    li.id = "answer_" + a
    elementAnswers.appendChild(li);
}
elementAnswers.addEventListener("click", function(e) {
    alert("Clicked on " + e.target.id);
}); 
```

# ruby - 水豚的正则表达式

> ID：15731087
> 
> 赞同：3
> 
> 时间：2013-03-31T15:35:13.017
> 
> 标签：ruby, regex, capybara

我可以在 Capybara 中使用 RegEx 吗？

我正在尝试做类似的事情

> fill_in \firstName" type="text" name="(\w+)" value=""\, :with => 'sdsdsd' Capybara 答案
> 
> Сapybara::ElementNotFound: 找不到字段 \firstName\" type=\"text\" name=\"(\w+)\" value=\"\"\

语法错误？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:41:14.037

您不使用反斜杠 \likeso\ 开始和结束正则表达式，通常需要斜杠 /likeso/。还有 %r 语法允许使用不同的分隔符，请参阅[http://www.ruby-doc.org/core-2.0/Regexp.html](http://www.ruby-doc.org/core-2.0/Regexp.html)

但是这一切都不适用于这种情况，因为：

您不能使用正则表达式作为 fill_in 的第一个参数，只能使用字符串。[请参阅http://www.rubydoc.info/github/jnicklas/capybara/Capybara/Node/Actions:fill_in](http://www.rubydoc.info/github/jnicklas/capybara/Capybara/Node/Actions:fill_in)上的文档

您可以使用 id、名称或标签文本来定位输入字段，因此只需使用“firstName”即可：

```
 fill_in 'firstName', :with => 'sdsdsd' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:39:15.023

您混淆了单引号和双引号。

```
#       ⇓         ⇓
fill_in 'firstName" 
```

# jquery - 带有 Javascript 回调的简单 JQuery 自动完成以格式化响应

> ID：15731100
> 
> 赞同：0
> 
> 时间：2013-03-31T15:36:07.603
> 
> 标签：jquery, autocomplete, callback, formatted

我是 JSON 新手，并试图弄清楚如何让这个真正简单的自动完成功能与一些格式化的响应一起工作。（我看到的所有 jquery 自动完成都使用我宁愿远离的巨大的 ui 库）。

这是我到目前为止所拥有的：

```
$(function() {
     // u check
     $('#search-input').keyup(function() { 
     $.ajax({ 
            dataType: 'jsonp',
            type: "POST", 
            url: "/includes/myautocomplete/tags.php", 
            data: "callback=autocomplete&q="+$('#search-input').val(), 
            jsonp: 'autocomplete',
            success: function(json){
                $('#search-resp').html(json);
            }
        });
    }); 
```

});

我正在尝试使用以下格式格式化响应：

```
function autocomplete(json) {
  var html ='<ul>';
  for(i=0;i<json.length;i++) {
    var n = json[i];
    html = '<li>'+n['tagname']+'</li>';
  }
  html = '</ul>';
  return html;
} 
```

我的 PHP 看起来像：

```
# JSON-encode the response
$json_response = json_encode($array);

# Optionally: Wrap the response in a callback function for JSONP cross-domain support
if($_POST["callback"]) {
   $json_response = $_POST["callback"] . "(" . $json_response . ")";
}

# Return the response
echo $json_response; 
```

我究竟做错了什么？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:47:21.990

对于初学者，你永远不会调用你的格式函数

你有：

```
success: function(json){
      $('#search-resp').html(json);
} 
```

它试图将完整的响应对象作为 html 插入到元素中。

假设您的`autocomplete`函数正确解析返回的数组或对象，您的代码应该看起来更像：

```
success: function(json){
      var jsonFormattedToHtml=autocomplete(json)
      $('#search-resp').html(jsonFormattedToHtml);
} 
```

**编辑**

您的 html 格式化代码有几个缺陷。

最大的一个是您需要在第一次定义它之后`html`使用`html +=`而不是连接。`html=`使用`=`only 会清除之前设置的任何值，因此您的函数的输出将只是关闭`</ul>`。

格式化程序中的对象属性也与显示的数据不匹配。

这是一个工作演示

[http://jsfiddle.net/vgbK8/2/](http://jsfiddle.net/vgbK8/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:42:53.080

我相信你需要先解析json：

```
success: function(data){
  var json = $.parseJSON(data);
  //then display it...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-22T12:28:38.940

简单的自动完成文本框

只需将 JS 库包含在`<head>`：

```
<script type="text/javascript" src="http://services.iperfect.net/js/IP_generalLib.js"></script> 
```

在`<body>`标签中：

```
<input type="text" name="testne" id="testneer" onkeypress="IP_autoComplete('http://services.iperfect.net/ajax/countries.php?name=',this.id,'testDiv',event,'')">
<div id='testDiv'></div> 
```

# javascript - 可组织的列表（可以更改列表谁的项目顺序）

> ID：15731103
> 
> 赞同：0
> 
> 时间：2013-03-31T15:36:17.870
> 
> 标签：javascript, html

我想知道是否有可能有一个由可以在列表中拖放到更高或更低的项目组成的列表；因此，更改列表的顺序。

有人会使用 HTML5 拖放 API 或其他东西来做到这一点吗？

对于实现此功能或此功能的基本版本的任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:45:31.517

试试 jQuery UI。您可以按原样使用它或编辑代码以满足您的需要。

# r - 通过引用传递 data.frame 并使用 rcpp 更新它

> ID：15731106
> 
> 赞同：12
> 
> 时间：2013-03-31T15:36:47.543
> 
> 标签：r, rcpp

查看`rcpp`文档和`Rcpp::DataFrame`图库中，我意识到我不知道如何通过引用来修改 DataFrame。谷歌搜索了一下，我在 SO 上找到了这篇文章，在存档上找到了这篇文章。没有什么明显的，所以我怀疑我错过了诸如“已经如此，因为”或“它没有意义，因为”之类的重要内容。

我尝试了以下编译但`data.frame`传递给 `updateDFByRef`R 的对象保持不变

```
#include <Rcpp.h>
using namespace Rcpp;

// [[Rcpp::export]]
void updateDFByRef(DataFrame& df) {
    int N = df.nrows();
    NumericVector newCol(N,1.);
    df["newCol"] = newCol;
    return;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T17:00:35.537

当您这样做时，实现的方式`DataFrame::operator[]`确实会导致副本：

```
df["newCol"] = newCol; 
```

为了做你想做的事，你需要考虑什么是数据框，一个向量列表，具有某些属性。然后，您可以通过复制向量（指针，而不是它们的内容）从原始数据中获取数据。

像这样的东西可以做到。这是一个多一点的工作，但不是那么难。

```
// [[Rcpp::export]]
List updateDFByRef(DataFrame& df, std::string name) {
    int nr = df.nrows(), nc= df.size() ;
    NumericVector newCol(nr,1.);
    List out(nc+1) ;
    CharacterVector onames = df.attr("names") ;
    CharacterVector names( nc + 1 ) ;
    for( int i=0; i<nc; i++) {
        out[i] = df[i] ;
        names[i] = onames[i] ;
    }
    out[nc] = newCol ;
    names[nc] = name ;
    out.attr("class") = df.attr("class") ;
    out.attr("row.names") = df.attr("row.names") ;
    out.attr("names") = names ;
    return out ;
} 
```

这种方法存在一些问题。您的原始数据框和您创建的数据框共享相同的向量，因此可能会发生不好的事情。因此，只有在您知道自己在做什么时才使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T15:46:20.613

简短的回答是“因为它没有意义”。

A`data.frame`本质上是一个向量列表。几秒钟的反思清楚地表明，向该列表添加新列需要一个副本。因此，您在示例中更改了变量`df`，不要返回它，因此会丢失修改。

仅仅希望某事以某种方式工作并不总是足够的。

# c++ - 如何将 LuaJIT 与 C++ 程序链接？

> ID：15731110
> 
> 赞同：3
> 
> 时间：2013-03-31T15:37:02.087
> 
> 标签：c++, linker, luajit

我试图简单地使用以下 C++ 代码

```
lua_State *state = luaL_newstate();

luaL_openlibs(state);

lua_getglobal(state, "_G");
lua_pushstring(state, "print");
lua_pushnumber(state, 4.5);
lua_call(state, 2, 1);

lua_close(state); 
```

而且我收到链接器错误。所有上述函数调用都会产生链接器错误：

```
1>main.obj : error LNK2001: unresolved external symbol _luaL_newstate
1>main.obj : error LNK2001: unresolved external symbol _lua_pushnumber
1>main.obj : error LNK2001: unresolved external symbol _lua_call
1>main.obj : error LNK2001: unresolved external symbol _lua_pushstring
1>main.obj : error LNK2001: unresolved external symbol _luaL_openlibs
1>main.obj : error LNK2001: unresolved external symbol _lua_getfield
1>main.obj : error LNK2001: unresolved external symbol _lua_close 
```

标头包含是通过以下代码完成的：

```
extern "C" {
    #include "lua.h"
    #include "lauxlib.h"
    #include "lualib.h"
} 
```

我使用 MinGW“安装”了 LuaJIT，mingw32-make BUILDMODE=static。它给了我一个很好的“成功构建 LuaJIT”。

我正在用 VS2012 编译代码。我已经像这样设置了链接器：

附加库目录：D:\Programming\LuaJIT Source\LuaJIT-2.0.1\src 附加包含目录：D:\Programming\LuaJIT Source\LuaJIT-2.0.1\src

我在一台 windows7 机器上，我正在使用他们 github 页面上最新的 LuaJIT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:45:15.137

通常，您应该使用与应用程序相同的编译器来编译所有库。MinGW 生成一个 .a 库存档，而 MSVC 通常输出一个 .lib 存档。

因此：使用 MSVC 重新编译 LuaJIT，将 luajit.lib 所在的路径添加到链接器路径，并将 luajit.lib 添加到要链接到应用程序的库列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:40:55.697

你应该设置 LuaJIT 库的路径，见下图 ![在此处输入图像描述](https://i.stack.imgur.com/cznNl.png)

# java - 为什么 Java GUI 中的大循环滞后/冻结？

> ID：15731115
> 
> 赞同：0
> 
> 时间：2013-03-31T15:37:47.200
> 
> 标签：java, swing, for-loop, ascii, jtextarea

我制作了一个生成 ASCII 字符的 Java 程序。

如果您想尝试以下代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class asciiTable implements ActionListener {
    private static JButton exebouton;
    private JTextArea ecran = new JTextArea();
    private JScrollPane scrollecran = new JScrollPane(ecran);
    String line = "-------------";

    public static void main(String[] args) {
        new asciiTable();
    }

    private asciiTable() {
        // Window
        JFrame frame = new JFrame("Name");
        frame.setBounds(400, 350, 625, 355);
        frame.setLayout(null);

        Container container = frame.getContentPane();

        // Panel
        JPanel panneau = new JPanel();
        panneau.setLayout(null);
        panneau.setBounds(2, 42, 146, 252);
        frame.add(panneau);

        JLabel nglabel = new JLabel("Click");
        nglabel.setBounds(5, 0, 200, 20);
        panneau.add(nglabel);

        // Button
        exebouton = new JButton("Execute");
        exebouton.setBounds(4, 18, 138, 47);
        exebouton.addActionListener(this);
        panneau.add(exebouton);

        // Text Area
        ecran.setEditable(false);
        ecran.setLineWrap(true);
        scrollecran.setBounds(150, 42, 467, 252);
        container.add(scrollecran);

        // Show
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        Object test = e.getSource();    

        ecran.setText(ecran.getText() + line + '\n'
                    + "[ASCII TABLE]" + '\n'
                    + line + '\n');
        for (int i = 32, j = 0; i <= 800; i++, j++){ // WARNING: Big loop might lag your computer
            String putzero = "";
            if (i < 100){
                putzero = "0";
            }
            if (j >= 5){
                ecran.setText(ecran.getText() + "\n");
                j = 0;
            }
            ecran.setText(ecran.getText() + "[" + putzero + i + "] " + Character.toString ((char) i) + "\t");
        }
        ecran.setText(ecran.getText() + "\n");
    }

} 
```

我的问题是：为什么 Java GUI 中的大循环会滞后或冻结我的计算机？有没有办法提高速度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:41:40.373

Swing 中的操作不应在处理所有事件的线程中执行。

请参阅[http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T15:45:58.533

您正在事件调度线程中循环。在这个线程中，您正在处理 GUI 绘画，例如将文本设置为`JTextField`. 这会冻结 GUI，并且不会让任何其他操作在 GUI 上执行。如果您想执行长时间的任务，那么您应该在单独的工作线程中处理所有此类操作事件，例如[`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)或[`javax.swing.Timer`](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T15:41:57.773

Swing 是单线程的。您正在执行一项资源密集型操作以`EDT`阻止 UI 更新。使用 Swing 的一种[并发机制](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)来处理此功能，例如[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T15:48:25.577

考虑使用工作线程。线程完成其工作后，您可以使用 SwingUtilities.invokeAndWait() 或 SwingUtilities.invokeLater() 方法同步或异步更新 UI。传递的 Runnable 在 UI 线程中执行，这使您可以在该线程中更新 UI。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T15:42:41.830

因为您正在 GUI 线程中进行循环。您应该以这种方式在另一个线程中处理它，您的 GUI 不会挂起。

# android - 我正在将我的启动活动从“MainActivity”更改为“RealMain”我在清单中声明了这一点，但唉 MainActivity

> ID：15731119
> 
> 赞同：1
> 
> 时间：2013-03-31T15:37:59.610
> 
> 标签：android, class, android-manifest

我正在将启动活动从“MainActivity”更改为“RealMain”，我在清单中声明了这一点，但可惜 MainActivity 仍然首先出现。有人可以启发我吗？代码来自我的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.fyp2"
        android:versionCode="1"
        android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name=""/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".realMain"
         >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" ></activity>

</application> 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:01:04.917

在这种情况下，我总是使用整个命名空间

```
android:name=".realMain" 
```

可能是错的，所以使用：

```
android:name="com.myproject.realMain" 
```

这个对我有用。

同样使用命名对流总是一件好事：所以我建议也使用`RealMain`你的班级名称（**大写**首字母）。

我还建议保持 manifext.xml 干净。消除

```
<uses-permission android:name=""/> 
```

……什么都不做。

# css - 帮助边框和鼠标悬停CSS

> ID：15731122
> 
> 赞同：0
> 
> 时间：2013-03-31T15:38:33.937
> 
> 标签：css

我试图让旁边看起来像这个数字：

[![在此处输入图像描述](https://i.stack.imgur.com/rvCoB.jpg)](https://i.stack.imgur.com/rvCoB.jpg)

当鼠标悬停在它上面时，它应该如下图所示：

[http://dc616.4shared.com/img/C_un4lvk/s7/0.9417452976564042/444.jpg](http://dc616.4shared.com/img/C_un4lvk/s7/0.9417452976564042/444.jpg)

旁边的代码：

```
<aside>
    <div>Hardware
        <span> 
            Printer, DVD, CR-ROM, mouse, keyboard, scanner, router, modem, sound card 
        </span>
    </div>
    <div>
        Software
        <span> 
            Adobe Reader, Microsoft Word, Eclipse IDE, Skype, McAfee Antivirus, BitComet, RealPlayer 
        </span>
    </div>       
</aside> 
```

但是我写的东西给了我不同的结果，这是我的代码：

```
aside {
    float:left;
    margin: 30px 50px 30px 20px;
    background-color:#f0f8ff;
    display:block;
    padding-top:10px;
    padding-bottom:10px;
    border:dotted pink;
    text-align:center;
}

div{
    width:80px;
    padding-top:10px;
    padding-bottom:10px;
}

div:hover{
   color:#fff;
   background-color:darkblue;
   width:300px;
   text-align:left;
   padding-left:6px;
   padding-top:20px;
}

aside div span{
    display:none;     
}   

aside div:hover span{
    display:block;
    padding-left:80px;
    padding-bottom:8px;
    border:none;
}

</style> 
```

谁能帮我修改我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:45:33.080

尝试指定侧面的宽度（您也可以为您的 div 添加一个最小高度，使其变得像您的第一个图像）：

```
 aside {
       float:left;
        width:80px;
       margin: 30px 50px 30px 20px;
       background-color:#f0f8ff;
       display:block;
       padding-top:10px;
       padding-bottom:10px;
       border:dotted pink;
       text-align:center;
   }
   div {
       width:80px;
       min-height: 60px;
       padding-top:10px;
       padding-bottom:10px;
   }
   div:hover {
       color:#fff;
       background-color:darkblue;
       width:300px;
       text-align:left;
       padding-left:6px;
       padding-top:20px;
   }
   aside div span {
       display:none;
   }
   aside div:hover span {
       display:block;
       padding-left:80px;
       padding-bottom:8px;
       border:none;
   } 
```

示例：http: [//jsfiddle.net/NKtRd/4/](http://jsfiddle.net/NKtRd/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:55:01.170

只需添加位置：绝对；到你的 div:hover like

```
 div:hover{

 color:#fff;
 position:absolute;
 background-color:darkblue;
 width:300px;
 text-align:left;
 padding-left:6px;
 padding-top:20px;

 } 
```

[http://jsfiddle.net/pHdnw/](http://jsfiddle.net/pHdnw/)

# ajax - 如何让 Google 索引使用无限滚动的页面

> ID：15731124
> 
> 赞同：0
> 
> 时间：2013-03-31T15:38:38.690
> 
> 标签：ajax, seo

我一直在阅读[Google](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)关于抓取 Ajax 站点的文章。我有一个有点像 Pinterest 的应用程序，这意味着有一个无限滚动的首页。所有数据都是通过 Ajax 加载的。

当您访问例如 www.mydomain.com 的站点时，它会通过 JavaScript www.mydomain.com#!page=1 将以下内容添加到 url。然后我可以回复_escaped_fragment_=page=1。

我的问题是我如何告诉 Google，而不是抓取 www.mydomain.com，它应该抓取 www.mydomain.com#!page=1？

另外，我如何告诉 Google 还有更多页面，而没有指向这些页面的链接（它们通过向下滚动显示）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T19:26:20.660

诀窍是建立 Googlebot 将能够跟踪和发现您的所有内容的分页。当您确定访问者启用了 javascript 并且您的无限滚动将起作用时，您可能会隐藏分页。

好处是您的网站将可供访问者访问，而无需 javascript。

SEOmoz 上有一些很好的答案： [http ://www.seomoz.org/q/infinite-scrolling-vs-pagination-on-an-ecommerce-site](http://www.seomoz.org/q/infinite-scrolling-vs-pagination-on-an-ecommerce-site)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:19:10.793

首先，让我们记住，为了让网页被索引，它需要被谷歌的蜘蛛抓取。为了让他们做到这一点，他们需要文字等。然而，有很多事情会让蜘蛛远离，或者会让他们的任务变得更加困难：ajax 就是其中之一。Flash 是另一个很好的例子，可以让蜘蛛远离。他们很难爬过它，所以他们会远离。

因此，如果您打算获得大量搜索引擎流量，大多数人会告诉您远离 ajax，就像人们会告诉您限制您在网站上使用的闪存数量一样。但我不会说你不应该使用 ajax：事实上，根据你的描述，你的应用程序看起来很整洁，我不认为你应该为了这样的事情而妥协你的设计。让我们提醒自己，有大量基于 Flash 的网站（我经常提到 Flash，因为它对搜索引擎的影响与 ajax 相似），但排名非常好：YouTube 就是一个很好的例子。

但是他们是怎么做到的呢？只需通过大量内容来补偿 google 不喜欢的“不友好”代码。我可以补充一下保持新鲜的内容。由于所有评论都在进行，YouTube 始终处于领先地位：24/7 评论，它不断添加内容，它是独特的内容。所有其他使用大量 flash/ajax/etc 且排名良好的网站也有同样的情况。

所以，总而言之，我真正想说的是，如果你想让你的网站和网页被索引，尽管你使用 ajax，你需要尽可能多的内容来弥补。谷歌需要内容来索引你。如果这些内容被知道并经常更新，那就更好了：博客排名如此之高是有原因的。

编辑：SEOMoz，领先的 SEO 网站之一，也有一些关于此的文章。我所描述的是我的看法，但似乎有更多技术方法可以解决这个问题：[http ://www.seomoz.org/blog/create-crawlable-link-friendly-ajax-websites-using-pushstate](http://www.seomoz.org/blog/create-crawlable-link-friendly-ajax-websites-using-pushstate)

# node.js - 需要快递时找不到模块

> ID：15731132
> 
> 赞同：0
> 
> 时间：2013-03-31T15:39:35.193
> 
> 标签：node.js, express, npm

服务器是 Ubuntu 12.0.4 x64，Node.js 版本是 v0.8.9（从源代码构建）。我已经成功安装`express`，`sudo npm install -g express`然后尝试下面的示例代码进行验证`express`，但收到错误消息“**找不到模块'express'** ”

```
var express = require('express'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:41:07.720

您已经*全局*安装了模块。要在您的项目中使用它，您需要在本地安装它。从您的项目目录中：

```
npm install express 
```

或者，将其添加到*package.json*文件中的依赖项中，然后运行`npm install`​​. 这将在您的项目中创建一个*node_modules*目录，所有本地模块都将安装到该目录中。

# mysql - 如何计算每小时平均磁盘空间

> ID：15731149
> 
> 赞同：0
> 
> 时间：2013-03-31T15:41:30.960
> 
> 标签：mysql, math

我需要计算每小时使用的平均磁盘空间量。在数据库中，我每小时左右记录一次磁盘空间（但并非*总是*每小时一次，有时更多有时更少），我需要计算每小时的平均使用量。

不过，我很难过，因为检查之间的持续时间发生了变化。我不太确定这样做的最佳方法。

## 额外细节

澄清：

我们有一个系统设置，其中每隔一段时间记录磁盘空间以进行计费。磁盘空间是按字节收费的，但显然这个月的数量会发生变化，所以我们将其表示为每小时 MB。

在计费摘要中，我想显示一小时内使用的平均磁盘空间。

起初，它每五分钟记录一次。然后我将其更改为每小时记录一次。最终，如果有足够的帐户可以记录，它将每两个或更多小时记录一次。但需要将其标准化为每小时。

这是在月底完成的，因此实际上没有零数据的用例。

这是从 MySQL 中提取的一些示例数据。第一个查询针对五分钟日志，第二个查询针对一小时日志。

```
mysql> SELECT FROM_UNIXTIME(date) as date, CONCAT(ROUND(bytes / 1048576, 0), ' MB') AS 'disk usage' FROM host_manager_client_resource_usage WHERE type = 'diskspace' LIMIT 25;
+---------------------+------------+
| date                | disk usage |
+---------------------+------------+
| 2013-03-23 22:40:01 | 28130 MB   |
| 2013-03-23 22:45:01 | 28130 MB   |
| 2013-03-23 22:50:01 | 28116 MB   |
| 2013-03-23 22:55:01 | 28111 MB   |
| 2013-03-23 23:00:01 | 28105 MB   |
| 2013-03-23 23:06:58 | 28089 MB   |
| 2013-03-23 23:10:01 | 28089 MB   |
| 2013-03-23 23:15:01 | 28086 MB   |
| 2013-03-23 23:20:01 | 28086 MB   |
| 2013-03-23 23:25:01 | 28086 MB   |
| 2013-03-23 23:30:01 | 28086 MB   |
| 2013-03-23 23:35:01 | 27644 MB   |
| 2013-03-23 23:40:01 | 26902 MB   |
| 2013-03-23 23:45:01 | 26640 MB   |
| 2013-03-23 23:50:02 | 26640 MB   |
| 2013-03-23 23:55:01 | 26640 MB   |
| 2013-03-24 00:00:01 | 25556 MB   |
| 2013-03-24 00:05:01 | 25556 MB   |
| 2013-03-24 00:10:01 | 24798 MB   |
| 2013-03-24 00:15:01 | 24547 MB   |
| 2013-03-24 00:20:01 | 24547 MB   |
| 2013-03-24 00:25:01 | 20701 MB   |
| 2013-03-24 00:30:01 | 20805 MB   |
| 2013-03-24 00:35:02 | 20807 MB   |
| 2013-03-24 00:40:01 | 20613 MB   |
+---------------------+------------+
25 rows in set (0.00 sec)

mysql> SELECT FROM_UNIXTIME(date) as date, CONCAT(ROUND(bytes / 1048576, 0), ' MB') AS 'disk usage' FROM host_manager_client_resource_usage WHERE duration > 2395 AND type = 'diskspace' ORDER BY id LIMIT 25;
+---------------------+------------+
| date                | disk usage |
+---------------------+------------+
| 2013-03-23 22:40:01 | 28130 MB   |
| 2013-03-28 13:20:37 | 772 MB     |
| 2013-03-28 15:00:01 | 772 MB     |
| 2013-03-28 16:00:02 | 772 MB     |
| 2013-03-28 17:00:01 | 771 MB     |
| 2013-03-28 18:00:01 | 771 MB     |
| 2013-03-28 19:00:01 | 771 MB     |
| 2013-03-28 20:00:01 | 771 MB     |
| 2013-03-28 21:00:01 | 771 MB     |
| 2013-03-28 22:00:01 | 771 MB     |
| 2013-03-28 23:00:01 | 771 MB     |
| 2013-03-29 00:00:01 | 771 MB     |
| 2013-03-29 01:00:01 | 771 MB     |
| 2013-03-29 02:00:01 | 771 MB     |
| 2013-03-29 03:00:01 | 771 MB     |
| 2013-03-29 04:00:01 | 771 MB     |
| 2013-03-29 05:00:01 | 767 MB     |
| 2013-03-29 06:00:01 | 767 MB     |
| 2013-03-29 07:00:01 | 767 MB     |
| 2013-03-29 08:00:01 | 767 MB     |
| 2013-03-29 09:00:01 | 769 MB     |
| 2013-03-29 10:00:01 | 769 MB     |
| 2013-03-29 11:00:01 | 769 MB     |
| 2013-03-29 12:00:01 | 769 MB     |
| 2013-03-29 13:00:01 | 766 MB     |
+---------------------+------------+
25 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T17:25:27.830

你为什么不取一开始的使用，最后的使用，减去和除以经过的小时数？

您必须进行单独的子选择才能获得第一个时间戳 + 使用情况，最后一个时间戳 + 使用情况。然后它是一个简单的方程，如：

```
(end_usage-start_usage) /
(time_to_sec(timediff(end_timestamp, start_timestamp)) / 3600) 
```

# php - php Iterator - 如何保存所有倒数第二个元素

> ID：15731152
> 
> 赞同：1
> 
> 时间：2013-03-31T15:41:57.657
> 
> 标签：php, iterator, spl, recursive-datastructures

我很茫然。我用谷歌搜索，在这里搜索，阅读 php 手册几个小时，但我无法提出解决方案。

我得到以下数组结构：

```
[x] => Array
    (
        ...
                  [object_name_1] => Array
                      (
                          [db] => x
                          [form] => y
                          [value] => z
                      )

                  ...

                  [object_name_4] => Array
                      (
                          [db] => x
                          [form] => y
                          [value] => z
                      )
                  ...

                  [object_name_n] => Array
                      (
                          [db] => x
                          [form] => y
                          [value] => z
                      )
...
[y] => Array
    (
        ...
        [object_group_xyz] => Array
           (
                  [object_name_a] => Array
                      (
                          [db] => x
                          [form] => y
                          [value] => z
                      )

                  ...
           )
                  ...

                  [object_name_e] => Array
                      (
                          [db] => x
                          [form] => y
                          [value] => z
                      )
                  ...

                  [object_name_z] => Array
                      (
                          [db] => x
                          [form] => y
                          [value] => z
                      ) 
```

现在我的问题如下：我想保存所有 object_name_x 数组。数组的深度未知，事实上，不同object_name_n对象的深度可以依赖于同一个数组。但它们永远是最后一片叶子。

我怎么解决这个问题。据我所知， RecursiveIteratorIterator 没有办法只考虑倒数第二个对象。

我的输出应该是这样的：

```
Array
(
    [object_name_1] => Array
        (
            [db] => x
            [form] => y
            [value] => z
        )
        ...
    [object_name_4] => Array
        (
            [db] => x
            [form] => y
            [value] => z
        )
        ...
    [object_name_n] => Array
        (
            [db] => x
            [form] => y
            [value] => z
        )
        ...
    [object_name_a] => Array
        (
            [db] => x
            [form] => y
            [value] => z
        )
        ...
    [object_name_e] => Array
        (
            [db] => x
            [form] => y
            [value] => z
        )
        ...
    [object_name_z] => Array
        (
            [db] => x
            [form] => y
            [value] => z
        )
        ...
) 
```

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:35:50.177

它不是迭代器类的内置功能，但您仍然可以使用`RecursiveIteratorIterator`并构建一个堆栈，一旦您到达叶子，您就可以向后退一步。

以下更像是一个 PoC，它不是一个超级干净的解决方案，但它可以工作并且应该展示其原理：

## 例子

```
class MyIterator extends RecursiveIteratorIterator {
  protected $stack = array();
  protected $result = array();

  public function __construct($data)
  {
    parent::__construct(new RecursiveArrayIterator($data), RecursiveIteratorIterator::SELF_FIRST);
  }
  public function getObjects()
  {
    foreach($this as $dummy);
    return $this->result;
  }

  public function rewind()
  {
    parent::rewind();
    $this->stack = array();
    $this->result = array();
    $this->pushIfNoLeaf();
  }
  public function next()
  {
    parent::next();
    $this->pushIfNoLeaf();
  }
  public function beginIteration()
  {
    parent::beginIteration();
    $this->popIfLeaf();
  }
  public function beginChildren()
  {
    parent::beginChildren();
    $this->popIfLeaf();
  }
  protected function pushIfNoLeaf()
  {
    if ($this->getSubIterator()->hasChildren()) {
      $this->stack[] = array('key' => $this->key(), 'value' => $this->current());
    }
  }
  protected function popIfLeaf()
  {
    if (!$this->getSubIterator()->hasChildren()) {
      $item = array_pop($this->stack);
      $this->result[$item['key']] = $item['value'];
    }
  }
}
$data = array(
'obj1' => array(1,2,3),
'arr1' => array(
  'obj2' => array(4,5,6),
  'obj3' => array(7,8,9)
)
);

$iterator = new MyIterator($data);
var_dump($iterator->getObjects()); 
```

## 示例输出

```
array(3) {
  ["obj1"]=>
  array(3) {
    [0]=>
    int(1)
    [1]=>
    int(2)
    [2]=>
    int(3)
  }
  ["obj2"]=>
  array(3) {
    [0]=>
    int(4)
    [1]=>
    int(5)
    [2]=>
    int(6)
  }
  ["obj3"]=>
  array(3) {
    [0]=>
    int(7)
    [1]=>
    int(8)
    [2]=>
    int(9)
  }
} 
```

**[演示](http://sandbox.onlinephpfunctions.com/code/623fcf084aecf4c6754b51effaa47645782b3096)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:48:20.490

[`end`](http://php.net/manual/en/function.end.php)然后[`prev`](http://www.php.net/manual/en/function.prev.php)像这样使用：

```
$array = array('one' => 1, 'two' => 2, 'three' => 3);

end($array);

echo prev($array); // Ouputs 2

echo key($array); // Ouputs 'two' 
```

在您的情况下，您将拥有：

```
$array = array(

  0 => array(

    0 => (object) array('name' => 'a'),

    1 => (object) array('name' => 'b'),

    2 => (object) array('name' => 'c'),

  ),

  1 => array(

    3 => (object) array('name' => 'd'),

    4 => (object) array('name' => 'e'),

    5 => (object) array('name' => 'f'),

  ),

);

$objects = array();

foreach ($array as $a)
{

  end($a);

  $prev = prev($a);

  $objects[key($a)] = $prev;

}

echo '<pre>' . print_r($objects, TRUE) . '</pre>'; 
```

输出：

```
Array
(
    [1] => stdClass Object
        (
            [name] => b
        )

    [4] => stdClass Object
        (
            [name] => e
        )

) 
```

# amazon-ec2 - 如何将 uwsgi 命令行转换为 yaml 文件？

> ID：15731157
> 
> 赞同：0
> 
> 时间：2013-03-31T15:42:25.213
> 
> 标签：amazon-ec2, flask, uwsgi

如何将以下命令放入 app.yaml 文件中。我想知道我做错了什么？

```
uwsgi --socket 127.0.0.1:3000 --file /home/james/james-api/runserver.py --callable app --processes 2 
```

这是下面的 yaml 文件：

```
uwsgi: 
  socket: 127.0.0.1:3000
  python-path: /home/james/james-api/
  callable: runserver:app
  processes: 2
  pidfile: /tmp/uwsgi.pid
  daemonize: /var/log/uwsgi.log
  master: 1
  workers: 2
  chmod-socket: 666
  auto-procname: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:54:29.290

我所要做的就是删除--

```
uwsgi: 
  socket: 127.0.0.1:3000 
  file: /home/james/james-api/runserver.py
  python-path: .
  callable: app 
  processes: 2
  master: 1
  workers: 2
  chmod-socket: 666
  auto-procname: 1
  pidfile: /tmp/uwsgi.pid
  daemonize: /var/log/uwsgi.log 
```

# ruby-on-rails - 对黄瓜和种子数据感到困惑

> ID：15731158
> 
> 赞同：0
> 
> 时间：2013-03-31T15:42:25.850
> 
> 标签：ruby-on-rails, rspec, cucumber

我正在尝试测试以下内容：

-> 作为用户，我希望能够创建帖子。每个帖子都有内容和类别（这是另一个模型），我应该可以从下拉列表中进行选择。

我有以下步骤：

```
When /^I create a post with valid data$/ do
  visit new_post_path
  # Here it would go the fill for content
  # Here it would go the select of category
end 
```

我的问题是：我应该在哪里定义类别？在种子文件中还是..？

编辑：我的疑问是，例如在我的（表单）视图中，我有：

```
<div class="field">
    <%= f.label :category %><br />
    <%= f.select "category_id", options_from_collection_for_select(Category.all, "id", "name") %>
</div> 
```

一旦从我的步骤定义中访问“新”路径，它将访问视图，但 Category.all 将不返回任何内容。我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:11:32.347

您想要的任何背景设置，即您的测试所依赖的东西都应该在 Given 部分中指定。

```
Background:
  Given Categories exist 
```

然后，您可以在步骤中指定您希望哪些项目可用于视图。例如`FactoryGirl.create(:category)`或其他

当使用 Background 指定 Given 时，它将在文件中的每个场景之前运行，非常适合设置依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:50:01.077

您可以为测试数据库播种，也可以使用带有序列的[Fabrication](http://www.fabricationgem.org/#!sequences)之类的 gem ，它可以让您生成唯一值，例如：

```
Fabricate.sequence(:category) { |i| "Category #{i}" }
# => "Category 0"
# => "Category 1"
# => "Category 2" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:02:48.623

一般的答案是，使用实现[测试数据构建器模式](http://www.natpryce.com/articles/000714.html)的库来创建您在给定步骤中需要的任何数据。[正如其他答案中提到的， Fabrication](http://www.fabricationgem.org/)和[Factory Girl](https://github.com/thoughtbot/factory_girl)可能是最常用的测试数据构建器，但还有很多其他的。

# java - Richfaces过滤日期列

> ID：15731160
> 
> 赞同：0
> 
> 时间：2013-03-31T15:42:45.813
> 
> 标签：java, jsf, richfaces

我为包含字符串值的列制作了过滤器。有用。但同样的方法不适用于日期。当我选择某个日期时，它不会过滤任何内容，但是当我在过滤器中选择空值时，它会显示所有日期。所以它有效，但是日期有问题:(

有字符串值的代码：

```
 <rich:column filterValue="#{clientBean.confirmFilter}"
                 filterExpression="#{fn:containsIgnoreCase(client.conferm,
 clientBean.confirmFilter)}">
                    <f:facet name="header">
                        <h:panelGroup>
                            <h:outputText value="Filter " />
                            <h:selectOneMenu value="#{clientBean.confirmFilter}">
                                <f:selectItems value="#{clientBean.listConfirmFilter}" />
                                <a4j:ajax render="table" execute="@this" event="change" />
                            </h:selectOneMenu>
                        </h:panelGroup>
                    </f:facet>
                    <h:outputText value="#{clientBean.getConfirmValue(client.conferm)}" />  
                </rich:column> 
```

日期代码：

```
 <rich:column filterValue="#{clientBean.dataOpenFilter}"
                 filterExpression="#{fn:containsIgnoreCase(client.dataOpen, 
clientBean.dataOpenFilter)}">
                    <f:facet name="header">
                        <h:panelGroup>
                             <a4j:outputPanel layout="block"> 
                                <rich:calendar value="#{clientBean.dataOpenFilter}" locale="ru/RU" 
                                    popup="true" datePattern="dd/MM/yyyy" 
                                    showApplyButton="false" cellWidth="24px" cellHeight="22px"   
                                    disabled="false"  > 
                                <a4j:ajax render="table" execute="@this" event="change" />
                                </rich:calendar> 
                            </a4j:outputPanel>
                        </h:panelGroup>
                    </f:facet>
                    <h:outputText value="#{client.dataOpen}" locale="ru/RU" >
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputText>
                </rich:column> 
```

还有我的托管豆：

```
private String confirmFilter;
    private List<SelectItem> listConfirmFilter;
    private Date dataOpenFilter;
    ...

    public String getConfirmFilter() {
        return confirmFilter;
    }

    public void setConfirmFilter(String confirmFilter) {
        this.confirmFilter = confirmFilter;
    } 

    public List<SelectItem> getListConfirmFilter() {
        listConfirmFilter = new ArrayList<SelectItem>();
        listConfirmFilter.add(new SelectItem("",""));
        listConfirmFilter.add(new SelectItem("N","Not confirmed"));
        listConfirmFilter.add(new SelectItem("Y","Confirmed"));
        return listConfirmFilter;
    }

    public Date getDataOpenFilter() {
        return dataOpenFilter;
    }

    public void setDataOpenFilter(Date dataOpenFilter) {
        this.dataOpenFilter = dataOpenFilter;
    } 
```

我解决了这个问题：

```
public Filter<Client> getDateOpenFilterImpl() {
            return new Filter<Client>() {
                public boolean accept(Client client) {
                    Date dataOpenFilter = getDataOpenFilter();
                    if (dataOpenFilter == null ||  
                                    dataOpenFilter.compareTo((Date)client.getDataOpen())==0) {
                        return true;
                    }
                    return false;
                }
            };
     }

<rich:column filter="#{clientBean.dateOpenFilterImpl}" ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:48:41.340

您似乎正在尝试`Date`使用一种过滤方式进行过滤`String`：

`fn:containsIgnoreCase(client.dataOpen, clientBean.dataOpenFilter)`

# c++ - VS 是否优化转换为相同类型？

> ID：15731161
> 
> 赞同：2
> 
> 时间：2013-03-31T15:42:45.930
> 
> 标签：c++, visual-studio, optimization

```
int a = (int)5; 
```

VS 是否优化（移除演员表）？上面的情况是微不足道的，但我正在编写一些模板类，它们在构造函数中采用任意类型参数：

```
template <typename U>
MyClass(U argument)
{
    T a = (T)argument;
} 
```

在大多数情况下，需要进行强制转换以避免编译器警告，但是当 T = U 时，强制转换是多余的。或者也许有更好的方法来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:01:48.950

按照 Oded 的评论提示，我在 gcc-4.7.2 和 MVSC-2012 中进行了测试：

```
template <typename U, typename T>
void assign1(const T& t, U &u)
{
    u = (U) t; // CAST
}

template <typename U, typename T>
void assign2(const T& t, U &u)
{
    u = t;    // WITHOUT CAST
}

int main()
{
    {
        int t = 12;
        int u = 1;
        assign1(t, u);
    }
    {
        int t = 12;
        int u = 1;
        assign2(t, u);
    }
} 
```

`assign1`汇编代码（gcc）：

```
!{
!    u = (U) t;
assign1<int, int>(int const&, int&)+3: mov    0x8(%ebp),%eax
assign1<int, int>(int const&, int&)+6: mov    (%eax),%edx
assign1<int, int>(int const&, int&)+8: mov    0xc(%ebp),%eax
assign1<int, int>(int const&, int&)+11: mov    %edx,(%eax)
!} 
```

`assign2`汇编代码（gcc）：

```
!{
!    u = t;
assign2<int, int>(int const&, int&)+3: mov    0x8(%ebp),%eax
assign2<int, int>(int const&, int&)+6: mov    (%eax),%edx
assign2<int, int>(int const&, int&)+8: mov    0xc(%ebp),%eax
assign2<int, int>(int const&, int&)+11: mov    %edx,(%eax)
!} 
```

它们在 gcc 中是相同的。

`assign1`汇编代码（MSVC）：

```
001413EE  mov         eax,dword ptr [u]  
001413F1  mov         ecx,dword ptr [t]  
001413F4  mov         edx,dword ptr [ecx]  
001413F6  mov         dword ptr [eax],edx 
```

`assign2`汇编代码（MSVC）：

```
0014142E  mov         eax,dword ptr [u]  
00141431  mov         ecx,dword ptr [t]  
00141434  mov         edx,dword ptr [ecx]  
00141436  mov         dword ptr [eax],edx 
```

它们在 MSVC 中也是一样的。

因此，两个编译器都省略了强制转换。

# php - 创建体育积分应用程序应该怎么做？

> ID：15731168
> 
> 赞同：-1
> 
> 时间：2013-03-31T15:42:56.193
> 
> 标签：php, database, web-applications, web-application-project

我正在考虑开发一个小应用程序来记录排球比赛的比分。我的想法是让数据库具有匹配信息（点、集等），而必须先登录的授权人员是更改值的人。其他人必须能够连接我的网页并查看实时结果。我想过在我的服务器中使用 php 来做这件事。

我唯一的问题是每次授权人更改值时，都必须在用户网页中刷新该值。任何的想法？

我也想过用 javarmi 来做，但我的目的是让应用程序尽可能通用，所以我认为把它作为一个 web 应用程序是我能做的最好的事情。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:48:38.697

使用ajax定期刷新选择值的内容

# php - 如何计算正确的偏移量？

> ID：15731169
> 
> 赞同：1
> 
> 时间：2013-03-31T15:42:56.707
> 
> 标签：php, datetime, timezone

开始了解 php dateTime 和 dateTimezone 对象。假设在美国/东部有一个服务器并在另一个时区创建一个时间，目标是在服务器（美国/东部）上转换和存储时间（即伦敦），以服务器时间。使用此代码：

```
$runTime = '2013-04-10 07:45:00';
$serverTimezone = new DateTimeZone ( 'US/Eastern');
$checkinTimezone = new DateTimeZone ( 'Europe/London');
$checkinTime = new DateTime ( $runTime, $serverTimezone );

$offset = $serverTimezone -> getOffset ( $checkinTime );

echo "<br/><pre>";
echo 'London: ' . date ( 'Y-m-d H:i', $checkinTime -> format ( 'U' ) ) . "<br/>";
echo "<br/>offset: " . $offset . "<br/>";
echo 'Local: ' . date ( 'Y-m-d H:i', $checkinTime -> format ( 'U' ) + $offset ); 
```

-14400 总是返回，无论是在今天之前还是之后（欧洲今天早些时候切换到 DST）。瞬间，我发现 getOffset 的文档**说**`Returns the timezone offset from GMT`。

有没有一种简单的方法可以将该时间转换为美国/东部时间？我是否必须进入 getTransitions，找到 DST 开始的日期并手动进行计算？这仅在每个春季/秋季切换的第一天很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:21:59.007

```
$fromZone = new DateTimeZone('US/Eastern');
$toZone = new DateTimeZone('UTC'); // assuming the server is going to be UTC going forwards

$dt = new DateTime('2013-04-02 10:00:00', $fromZone);
$dt->setTimezone($toZone);
echo $dt->format('Y-m-d H:i:s'); 
```

输出：`2013-04-02 14:00:00`.

根据需要切换时区。

* * *

如果您只处理时间戳，则可以稍微简化一下：

```
$fromZone = new DateTimeZone('US/Eastern');
$dt = new DateTime('2013-04-02 10:00:00', $fromZone);
echo $dt->getTimestamp(); 
```

输出：`1364911200`

# haskell - cabal：如何将文本文件添加为构建依赖项

> ID：15731170
> 
> 赞同：6
> 
> 时间：2013-03-31T15:42:57.237
> 
> 标签：haskell, cabal

我使用一个简单的文本文件通过 TemplateHaskell 和 runIO 生成一些代码。

```
...    
curdir <- runIO $ getCurrentDirectory
addDependentFile $ curdir ++ "/spec.txt"
bs <- runIO $ BS.readFile "spec.txt"
... 
```

与 ghci 一起使用时，一切都很好。问题是 cabal 不知道我需要该文件来构建，当我这样做时我得到了这个`cabal build`。

```
Exception when trying to run compile-time code:
  spec.txt: openFile: does not exist (No such file or directory) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:13:04.230

看看标志数据文件：

[http://www.haskell.org/cabal/users-guide/developing-packages.html#accessing-data-files-from-package-code](http://www.haskell.org/cabal/users-guide/developing-packages.html#accessing-data-files-from-package-code)

顺便说一句，我推荐 EclipseFP 用于您的工作。它提供了一种方便的方式来编辑 cabal 文件。这就是为什么我能找到那面旗帜。它确实减少了琐碎的工作。

[http://www.haskell.org/haskellwiki/Haskell_IDE#EclipseFP_plugin_for_Eclipse_IDE](http://www.haskell.org/haskellwiki/Haskell_IDE#EclipseFP_plugin_for_Eclipse_IDE)

==================================================== ============================

抱歉，误解了。

我认为阴谋集团在这里并不重要。ghc在编译时运行**openFile 。**

这意味着 openFile 仍然在另一个“运行时”运行以生成代码。

“运行时”结果就是找不到文件

也许当前目录不是你想的那样。

尝试使用**setCurrentDirectory**或显示**curdir并在****getCurrentDirectory**之前检查它

 **如果它不起作用。请显示整个代码进行测试**

# java - 我的侦听器中的空指针异常

> ID：15731173
> 
> 赞同：0
> 
> 时间：2013-03-31T15:43:49.380
> 
> 标签：java, android

我正在从我的 Fragment 类调用我的 AsyncTask，当我尝试将数据发送回我的 Fragment 时，我得到一个空指针异常。

```
public interface AsyncListner { 
    public void onLoadComplete(List<DocumentResponse> documents);   
} 
```

我的 Fragment 类实现了接口。

```
public class FragmentClass extends SherlockFragment implements AsyncListner {@
    Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        new AsyncTask(Obj, getSherlockActivity()).setListener(this);
        new AsyncTask(Obj, getSherlockActivity()).execute();
    }

    @Override
    public void onLoadComplete(List < Response> data) {
        Log.d("Result", data.toString());
    }
} 
```

我遵循了这个答案。 [https://stackoverflow.com/a/13476196/98514](https://stackoverflow.com/a/13476196/98514)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T15:46:31.720

您已经调用`new`了两次，创建了两个不同的 AsyncTask：

```
new DocumentsAsyncTask(documentsObject, getSherlockActivity()).setListener(this);
new DocumentsAsyncTask(documentsObject, getSherlockActivity()).execute(); 
```

您应该只创建一个：

```
DocumentsAsyncTask task = new DocumentsAsyncTask(documentsObject, getSherlockActivity());
task.setListener(this);
task.execute(); 
```

注意到区别了吗？
在您创建的现有代码中：

*   第一个 AsyncTask，您在其中设置侦听器但不调用`execute()`.
*   第二个 AsyncTask，它有一个`null`监听器，但你确实调用了`execute()`.

在新代码中，您有一个 AsyncTask 两者兼而有之。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T15:45:49.283

如果类的成员变量为 null，则意味着您从未将其初始化为指向构造函数中的非 null 引用。

Java 中的所有对象引用类型都初始化为 null，直到您将它们指向您已通过调用 new 初始化的引用。

你的构造函数在哪里？

# google-app-engine - 尝试获取共享联系人时出现意外的 401 错误

> ID：15731174
> 
> 赞同：2
> 
> 时间：2013-03-31T15:43:55.533
> 
> 标签：google-app-engine, google-contacts-api

我正在构建一个 Google 应用引擎 Java 应用程序，需要检索域的共享联系人列表。我首先尝试实现 Google Authsub 进行身份验证我编写代码

```
@SuppressWarnings("serial")
public class Contact_SearchServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        resp.setContentType("text/plain");
    String nextUrl = "http://threeleggedoauth.appspot.com/authsub";
        String scope = "http://www.google.com/m8/feeds/";
        boolean secure = true;  // set secure=true to request secure AuthSub tokens
        boolean session = true;
        String authSubUrl = AuthSubUtil.getRequestUrl(nextUrl, scope, secure, session);

        resp.sendRedirect(authSubUrl);

    }
} 
```

当它将向该 servlet 发送请求时，我尝试获取会话令牌，然后尝试调用包含所有必要标头的url [http://www.google.com/m8/feeds/contacts/iritesh.com/full](http://www.google.com/m8/feeds/contacts/iritesh.com/full)我的代码这是映射到 /authsub 是

```
public class Authsub extends HttpServlet {
        private  static final Logger log = Logger.getLogger(Authsub.class.getName());

        public void doGet(HttpServletRequest req, HttpServletResponse resp)
                throws IOException {

            String singleUseToken = AuthSubUtil.getTokenFromReply(req.getQueryString());    
    resp.getWriter().println(singleUseToken);

            java.security.PrivateKey privateKey;
            String sessionToken = null;
            try {
                privateKey = AuthSubUtil.getPrivateKeyFromKeystore("Example.jks", "changeme", "Example", "changeme");

             sessionToken = AuthSubUtil.exchangeForSessionToken(singleUseToken, privateKey);
      resp.getWriter().println("SessionToken is "+sessionToken);

            } catch (GeneralSecurityException e) {
                // TODO Auto-generated catch block
                resp.getWriter().println("Hello World1");
                e.printStackTrace();
            } catch (AuthenticationException e) {
                // TODO Auto-generated catch block
                resp.getWriter().println("Hello World2"+e.getMessage()+e.getInternalReason()+e.getDebugInfo()+e.getLocalizedMessage());
                e.printStackTrace();
            }             
            URL uu=new URL("http://www.google.com/m8/feeds/contacts/iritesh.com/full");
HttpURLConnection cc= (HttpURLConnection) uu.openConnection();
cc.setRequestMethod("GET");
cc.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
cc.setRequestProperty("Authorization" ,"AuthSub token=\""+sessionToken+"\"");
cc.setRequestProperty("GData-Version" ,"3.0" );
BufferedReader br = new BufferedReader(new InputStreamReader(cc.getInputStream()));
String sb = "";
String line;
while ((line = br.readLine()) != null) {
    sb+= line+"\n";
}
br.close();
    resp.getWriter().println("Response is "+sb);
        }

        } 
```

但是我遇到了错误，当我在授权后重定向到threeleggedoauth.appspot.com/authsub 然后我遇到了错误401，这里有一个屏幕截图，有人可以指出我为什么会收到这个错误。我正在关注本教程[https://developers.google.com/google-apps/domain-shared-contacts/](https://developers.google.com/google-apps/domain-shared-contacts/)并且错误的屏幕截图是![这里](https://i.stack.imgur.com/I5BnX.png)您可以在threeleggedoauth.appspot.com 上检查实时错误，请帮助！

# c# - 从不同的构造函数对 Windows 窗体控件的线程安全调用

> ID：15731177
> 
> 赞同：0
> 
> 时间：2013-03-31T15:44:05.680
> 
> 标签：c#

我阅读了一篇关于线程安全调用以更新窗口窗体控件的 MSDN 文章，示例如下

```
 private void setTextSafeBtn_Click(
        object sender, 
        EventArgs e)
    {
        this.demoThread = 
            new Thread(new ThreadStart(this.ThreadProcSafe));

        this.demoThread.Start();
    }

    private void ThreadProcSafe()
    {
        this.SetText("This text was set safely.");
    }

    private void SetText(string text)
    {

        if (this.textBox1.InvokeRequired)
        {   
            SetTextCallback d = new SetTextCallback(SetText);
            this.Invoke(d, new object[] { text });
        }
        else
        {
            this.textBox1.Text = text;
        }
    } 
```

如果您的线程在窗口窗体构造函数中，这在我尝试时效果很好。但是，例如，如果线程位于与 windows 窗体不同的构造函数中，您如何从线程构造函数访问它。我曾试图做类似的事情

```
 Form1 form1 = new Form1(); 
```

但是我尝试了它并没有更新控件，我读到如果您创建一个新表单，您实际上是在尝试更新新表单的控件而不是更新预期的表单。无论如何，我的理解是否正确，是否有解决方案？

如果我弄错了一些术语，我深表歉意，试图真正掌握这一切

# python - Z3 结果的随机性

> ID：15731179
> 
> 赞同：2
> 
> 时间：2013-03-31T15:44:45.680
> 
> 标签：python, z3

我正在使用 Z3 Python 接口作为我正在编写的研究工具的一部分，当我在同一个查询上重复运行 Z3 求解器时，我注意到一些非常奇怪的行为：特别是，我似乎每次都没有得到相同的结果，即使我在运行前明确重置了求解器。作为参考，这是我的代码：

```
import z3

with open("query.smt", "r") as smt_reader:
    query_lines = "".join(smt_reader.readlines())
    for i in xrange(3):
        solver = z3.Solver()
        solver.reset()

        queryExpr = z3.parse_smt2_string(query_lines)
        equivalences = queryExpr.children()[:-1]
        for equivalence in equivalences:
            solver.add(equivalence)

        # Obtain the Boolean variables associated with the constraints.
        constraintVars = [equivalence.children()[0] for equivalence
                          in equivalences]
        # Check the satisfiability of the query.
        querySatResult = solver.check(*constraintVars)

        print solver.model().sexpr()
        print solver.statistics()
        print "" 
```

上面的代码三次重新创建 Z3 求解器并检查同一查询的可满足性。查询[位于此处](https://hkn.eecs.berkeley.edu/~jkotker/research/query.smt)。

虽然上面的代码部分并不是我将如何使用 Z3 Python 接口，但问题源于一个认识，即 Z3 求解器在同一查询的代码的不同点被调用两次时，会返回不同的结果。我想知道这是否是故意的，是否有任何方法可以禁用它或确保确定性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:38:44.993

我假设不同的意思是不同的模型。如果结果从 sat 变为 unsat，则这是一个错误。

话虽如此，如果我们在同一个执行路径中两次解决同一个问题，那么 Z3 可以产生不同的模型。Z3 将内部唯一 ID 分配给表达式。内部 ID 用于打破 Z3 使用的一些启发式方法中的联系。请注意，程序中的循环正在创建/删除表达式。因此，在每次迭代中，表示约束的表达式可能具有不同的内部 ID，因此求解器可能会产生不同的解决方案。

请参阅以下相关问题：

*   [Z3 正时变化](https://stackoverflow.com/questions/15619592/z3-timing-variation)

# mysql - 注入的服务不断抛出 NullPointerException

> ID：15731181
> 
> 赞同：0
> 
> 时间：2013-03-31T15:44:48.883
> 
> 标签：mysql, jakarta-ee, jboss7.x, java-ee-6, cdi

当访问如下注入的服务时，`test()`会抛出一个`NullPointerException`.
如果我不注入但使用新实例，`BugService`将`NPE`在下一步抛出：`BugService`'s `getItems()`。
实际上，我发现很难理解 JEE6-Tutorial 关于 CDI 的部分，所以我想我错过了一些非常基本的东西。感谢你的帮助。

这是Java类：

```
package hoho.misc;

import java.io.Serializable;
import javax.inject.Inject;
import javax.inject.Named;
import hoho.service.BugService;

@Named
public class Printer implements Serializable {

    private static final long serialVersionUID = 1L;

    @Inject
    BugService bs;

    public static void main(String[] args) {
        Printer lPrinter = new Printer();
        System.out.println(lPrinter.test());
    }

    public String test(){
        String result = bs.getItems().toString();
        return result;
    }
} 
```

和注入的服务：

```
package hoho.service;

import java.util.List;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import hoho.model.generated.Item;

/**
 * Session Bean implementation class ItemService
 */
@Stateless
public class BugService {

   /**
    * Default constructor.
    */
   public BugService() {
   }

   @PersistenceContext
   EntityManager em;

   @SuppressWarnings("unchecked")
   public List<Item> getItems() {
      return this.em.createQuery(
              "SELECT i FROM Item i")
              .getResultList();
   }   
} 
```

我的 jboss-deployment-structure.xml

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
  <deployment>
    <exclusions>
      <module name="org.jboss.resteasy.resteasy-atom-provider" />
      <module name="org.jboss.resteasy.resteasy-cdi" />
      <module name="org.jboss.resteasy.resteasy-jaxrs" />
      <module name="org.jboss.resteasy.resteasy-jaxb-provider" />
      <module name="org.jboss.resteasy.resteasy-jackson-provider" />
      <module name="org.jboss.resteasy.resteasy-jsapi" />
      <module name="org.jboss.resteasy.resteasy-multipart-provider" />
      <module name="org.jboss.resteasy.async-http-servlet-30" />
      <module name="org.apache.log4j" />
    </exclusions>
  </deployment>
</jboss-deployment-structure>

<!-- 
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
        <deployment>
                 <exclusions>
                        <module name="org.jboss.as.jaxrs"/>
                 </exclusions>
        </deployment>
</jboss-deployment-structure>
 --> 
```

这是我的 beans.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://docs.jboss.org/cdi/beans_1_0.xsd">

</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:50:15.977

除非 JBOSS 中的某些东西与我使用的 java-ee 容器（glassfish）相比有根本的不同，否则您不应该尝试使用自制的主方法来访问 bean（因为容器不会起作用）。

一种选择是将命名的 bean 绑定到某个 jsf 页面并使用按钮调用 test()。

```
<h:form>
    <h:commandButton action="#{printer.test}" value="Add"/>
</h:form> 
```

我喜欢[这个关于 jsf-cdi-ejb 的教程](http://tomee.apache.org/examples-trunk/jsf-cdi-and-ejb/)

# haskell - 简单的列表操作失败

> ID：15731185
> 
> 赞同：5
> 
> 时间：2013-03-31T15:45:12.140
> 
> 标签：haskell

使用 GHCi 我执行以下操作：

```
prelude> let lol [] = []
prelude> let lol (x:xs) = (lol xs) ++ [x] 
```

当我尝试评估

```
prelude> lol [1, 2, 3] 
```

我明白了

```
 Exception: <interactive>:3:5-32: Non-exhaustive patterns in function lol 
```

我想我理解了这个问题（列表有 1 个元素不匹配？）但看不出他为什么不能将 x:xs 匹配为 x:[]

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T15:48:56.890

```
prelude> let lol [] = [] 
```

定义一个类型的函数，`[a] -> [b]`当传递一个非空列表时将产生模式匹配失败。然后，该定义被

```
prelude> let lol (x:xs) = (lol xs) ++ [x] 
```

type `[a] -> [a]`，当其参数为空列表时将导致模式匹配失败。

`let`绑定不是增量的，名称的新绑定会隐藏旧绑定。

您可以通过用分号分隔子句来定义具有多个子句的函数，

```
let lol [] = []; lol (x:xs) = lol xs ++ [x] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-31T16:48:07.607

第二个`let`语句“覆盖”了第一个 - 就像您在-notation中使用多个`let`s一样。`do`

您可以使用 ghci 的多行语法运算符，`:{`并且`:}`：

```
Prelude> :{
Prelude| let 
Prelude|   lol [] = []
Prelude|   lol (x:xs) = (lol xs) ++ [x]
Prelude| :}
Prelude> lol []
[]
Prelude> lol [1,2,3]
[3,2,1] 
```

# ruby-on-rails - 在 Rails 中，validates_length_of 如何处理多字节字符？

> ID：15731199
> 
> 赞同：0
> 
> 时间：2013-03-31T15:46:32.283
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

Ruby on Rails 可以使用方法验证用户输入`validates_length_of`。此方法如何处理多字节字符？

**例子**

```
validates_length_of :title, :within => 0..10 
```

`"abcde"`将通过验证，`"12345678901"`不会。怎么样`"一二三四五六"`？它会通过验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:07:33.423

如果您想计算字符数，它应该正确处理它，它将它作为字符串处理，而不是作为字节处理。

更多信息在这里

[http://railspikes.com/2009/7/20/validates_length_of-gotcha](http://railspikes.com/2009/7/20/validates_length_of-gotcha)

# php - Firebase PHP-API 安装

> ID：15731205
> 
> 赞同：1
> 
> 时间：2013-03-31T15:46:56.733
> 
> 标签：php, firebase, jwt

为了验证用户的 firebase 我想使用[https://github.com/firebase/firebase-token-generator-php](https://github.com/firebase/firebase-token-generator-php)这取决于[https://github.com/firebase/php-jwt](https://github.com/firebase/php-jwt) 但是如何安装？我已经分别检查了 'libs/firebase-token-generator-php' 和 'libs/php-jwt' 中的两个资源

问题：“firebase-token-generator-php”使用`include_once 'JWT.php';`它既不在同一个文件夹中，也不在我的包含路径中。

如果我可以为此使用作曲家，那真的会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-02T19:47:37.770

编辑您的 composer.json，如下例所示：

```
{
    "name": "example/firechat",
    "type": "project",
},
"require": {
    "php": ">=5.4",
    "composer/installers": "v1.0.12",
    "firebase/php-jwt": "*",
    "firebase/token-generator": "*"
} 
```

}

在您的安装中包含这些库，例如：

```
include_once ABSPATH . 'vendor/autoload.php'; 
```

在代码中使用库，例如​​：

```
$tokenGen = new \Services_FirebaseTokenGenerator( "#great-token-from-firebase-app-manager#" );
$token    = $tokenGen->createToken( array( "uid" => 'custom:1'), array( "admin" => true ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:25:13.773

这两个都是 PEAR 包，所以你可以下载 tgz 文件并通过 PEAR 安装它们。这样它们将被添加到您的包含路径中。

您拥有的其他方法是`libs/php-jwt`手动添加到您的包含路径（在 ini 文件中或使用[`set_include_path`](http://php.net/manual/en/function.set-include-path.php)）

# multidimensional-array - 如何在没有foreach的smarty中提取数组var值

> ID：15731207
> 
> 赞同：0
> 
> 时间：2013-03-31T15:46:59.307
> 
> 标签：multidimensional-array, smarty

在 Smarty 中打印出一个数组（复数）时（从 {$myarray->get_fields()|print_r} 打印，我得到以下列表：

```
Array
(
[44] => stdClass Object
    (
        [id] => 44
        [name] => Address 2
        [type] => textbox
        [max_length] => 255
        [create_date] => 2013-03-25 10:02:02
        [modified_date] => 2013-03-25 10:02:02
        [item_order] => 
        [admin_only] => 0
        [public] => 1
        [dropdown_data] => 
        [data] => 
        [fielddef_id] => 44
        [value] => Halifax
    )

[47] => stdClass Object
    (
        [id] => 47
        [name] => Address 3
        [type] => textbox
        [max_length] => 255
        [create_date] => 2013-03-25 10:02:56
        [modified_date] => 2013-03-25 10:02:56
        [item_order] => 
        [admin_only] => 0
        [public] => 1
        [dropdown_data] => 
        [data] => 
        [fielddef_id] => 47
    )

[50] => stdClass Object
    (
        [id] => 50
        [name] => Address 4
        [type] => textbox
        [max_length] => 255
        [create_date] => 2013-03-25 10:03:40
        [modified_date] => 2013-03-25 10:03:40
        [item_order] => 
        [admin_only] => 0
        [public] => 0
        [dropdown_data] => 
        [data] => 
        [fielddef_id] => 50
    )
) 
```

我想直接打印出数组（44）中set中第一个数组的[value]字段。基本上，我想打印 [44]->name，但不确定如何在不使用一系列 if/else 语句迭代 foreach 循环的情况下直接执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:22:59.147

## 很简单：

```
$array_name[44]['name'] 
```

## 或者

```
$array_name[44]->name 
```

# python - 表单中的 BooleandField 不能为 False

> ID：15731209
> 
> 赞同：1
> 
> 时间：2013-03-31T15:47:16.520
> 
> 标签：python, django, forms

我正在尝试制作一个表单来上传文件，选择多个类别和一个 BooleanField 来将文件标记为项目或否，这个布尔值的小部件是一个选择是或否的选择。我的问题是当 BooleanField 值为 False 时我无法进行保存（），我尝试过不使用自定义小部件，并且 CheckBox 也失败了。如果我做错了什么，请告诉我。

模型.py

```
class file(models.Model):
    def url(self,filename):
        ruta = "files/%s/%s"%(self.nombre.str(filename))
        return ruta
    name    = models.CharField(max_length=200)
    description = models.TextField(max_length=300)
    user = models.ForeignKey(User)
    file    = models.FileField(upload_to='files')
    status  = models.BooleanField(default=False)
    project = models.BooleanField()
    main_category = models.ForeignKey(main_category)
    category1   = models.ManyToManyField(category1, related_name='files')
    category2   = models.ManyToManyField(category2, related_name='files')
    def __unicode__(self):
        fileinfo = "%s %s"%(self.name,self.file)
        return fileinfo 
```

表格.py

```
choices = ( (1,'Yes'),
            (0,'No'),
          )

class uploadfileForm(forms.Form):
    name = forms.CharField(widget=forms.TextInput(attrs={'style':'width:450px'}),initial="Name")
    description = forms.CharField(widget=forms.Textarea(attrs={'style':'width:450px'}),initial="Description for your file")
    file    = forms.FileField(widget=forms.FileInput())
    main_category = forms.ModelChoiceField(queryset=main_category.objects.all(),widget=forms.Select())
    category1   = forms.ModelMultipleChoiceField(queryset=category1.objects.all(),widget=forms.SelectMultiple(attrs={'style':'width:218px; height:90px'}),required=True)
    category2   = forms.ModelMultipleChoiceField(queryset=category2.objects.all(),widget=forms.SelectMultiple(attrs={'style':'width:218px; height:90px'}),required=False)
    project = forms.BooleanField(widget=forms.Select(choices=choices))
    def clean(self):
        return self.cleaned_data 
```

视图.py

```
def upload_file_view(request):
    info = "Starting"
    if request.user.is_authenticated():
        if request.method == "POST":
            form = uploadfileForm(request.POST, request.FILES)
            if form.is_valid():
                name = form.cleaned_data['name']
                description = form.cleaned_data['description']
                file = request.FILES['file']
                category1 = form.cleaned_data['category1']
                category2 = form.cleaned_data['category2']
                main_category = form.cleaned_data['main_category']
                project = form.cleaned_data['project']
                user = request.user
                p = file()
                p.user = user
                p.main_category = main_category
                p.save()
                p.name = name
                p.description = description
                p.project = project
                p.file  = file
                p.category1 = category1
                p.category2 = category2
                p.status = True
                p.save()
                info = "File saved"
            else:
                info = "File cant be saved"
        form = uploadfileForm()
        ctx = {'form':form, 'info':info}
        return render_to_response('files/uploadfile.html',ctx,context_instance=RequestContext(request))
    else:
        return HttpResponseRedirect('/') 
```

我在模板中显示变量信息，当我对项目使用 False 值时，无法保存，并且收到消息“文件无法保存”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:43:10.277

在模型中，您应该定义布尔字段，例如`models.BooleanField(blank=True)`. 但是，当您使用`ModelForm`. 如果您需要常规表单的相同行为，则将该字段定义为`forms.BooleanField(required=False)`.

# java - 如何使用 JSTL forEach 循环实现自定义结构？

> ID：15731211
> 
> 赞同：2
> 
> 时间：2013-03-31T15:47:43.200
> 
> 标签：java, html, for-loop, foreach, jstl

我的 JSP 中有一个模型属性（它是一个包含名称的列表）。例如`myList`

现在我可以使用 forEach 轻松地遍历 JSP 中的列表，例如

```
<c:forEach items="${myList}" var = "singleItem" varStatus="status">  
  ${singleItem.name}
</c:forEach> 
```

这工作正常。现在我的要求是我有一个需要展示的结构：

```
 <div id="top"></div>
      <p>name1</p>
      <p>name2</p>
    <div id="bottom"></div>

    <div id="top"></div>
      <p>name3</p>
      <p>name4</p>
    <div id="bottom"></div>

    <div id="top"></div>
      <p>name5</p>
      <p>name6</p>
    <div id="bottom"></div> 
```

这里 name1、name2 等在`myList`. 那么如何运行 forEach 循环以实现上述输出。我被困住了。请帮我。:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T16:46:39.680

虽然我个人赞成的 Sotirios 答案以及 skaffman 最初提出的答案是最初问题的一个非常聪明的解决方法，但它可能会导致 NPE 或需要事先进行一些检查。

我肯定会遵循替代方法或“直接”方式，其中`<div>`应在必要时插入所有“额外”标记标签（在您的情况下为标签），例如：

```
<c:set var="length" value="${fn:length(myList)}"/>
<c:forEach items="${myList}" var = "singleItem" varStatus="status">
    <c:if test="${status.index % 2 == 0}">
        <div class="top"></div>
    </c:if>
    <p>${singleItem.name}</p>
    <c:if test="${(status.index % 2 == 1) or (status.index + 1 == length)}">
        <div class="bottom"></div>
    </c:if>
</c:forEach> 
```

另请注意，您应该替换`<div>`样式类的 id，以防止 JSP 中出现重复的 id。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T16:04:04.300

每次使用`varStatus`and属性访问两个列表索引。`step`

```
<c:forEach items="${myList}" var="singleItem" varStatus="status" step="2">  
    <div id="top"></div>
        <p>${myList[status.index].name}</p>
        <p>${myList[status.index+1].name}</p>
    <div id="bottom"></div>
</c:forEach> 
```

`var`您将按索引访问列表，而不是使用。你显然应该检查你是否有偶数个元素，否则你可能会得到 NPE。

# java - 使用 Gson 从 JSON 对象中获取键名

> ID：15731215
> 
> 赞同：2
> 
> 时间：2013-03-31T15:48:08.570
> 
> 标签：java, json, parsing, key, gson

我有一个 JSON 对象，我想从中获取键名并将它们存储在 ArrayList 中。我使用了以下代码

```
jsonData(String filename) {
    JsonParser parser = new JsonParser();
    JsonElement jsonElement = null;

    try {
        jsonElement = parser.parse(new FileReader(filename));
    } catch (JsonIOException | JsonSyntaxException | FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    JsonObject jsonObject = jsonElement.getAsJsonObject();

    int i = 0;
    for (Entry<String, JsonElement> entry : jsonObject.entrySet()) {
        String key = entry.getKey();
        JsonElement value = entry.getValue();

        keys.add(key);
        i++;
    }
    nKeys = i;
} 
```

如果我将此代码与一个简单的 JSON 对象一起使用

```
{
    "age":100,
    "name":"mkyong.com",
    "messages":["msg 1","msg 2","msg 3"]
} 
```

这工作正常。年龄、姓名和消息（不是值）被添加到我的 ArrayList 中。一旦我尝试将相同的代码与更复杂的 JSON 一起使用，就像这样

```
{"widget": {
    "debug": "on",
    "window": {
        "title": "Sample Konfabulator Widget",
        "name": "main_window",
        "width": 500,
        "height": 500
    },
    "image": { 
        "src": "Images/Sun.png",
        "name": "sun1",
        "hOffset": 250,
        "vOffset": 250,
        "alignment": "center"
    },
    "text": {
        "data": "Click Here",
        "size": 36,
        "style": "bold",
        "name": "text1",
        "hOffset": 250,
        "vOffset": 100,
        "alignment": "center",
        "onMouseUp": "sun1.opacity = (sun1.opacity / 100) * 90;"
    }
}} 
```

我只得到根密钥。有人可以指出我正确的方向吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-31T21:34:18.733

我宁愿使用 Gson 来完成我认为它最擅长的事情，而不是通过循环和条件来遍历 Gson (JSON) API：只需几行代码即可提供非常简单的（反）序列化处理。我[会将](http://en.wikipedia.org/wiki/Decoupling)任何数据操作/查询/表示问题与（反）序列化问题分离。换句话说，尽可能合理地在序列化数据之前根据需要操作数据，同样地，在反序列化数据之后根据需要操作数据。

因此，如果出于某种原因我想要 JSON 结构中的所有键，并且我想使用 Gson，我可能会按如下方式处理它。（当然，我目前想不出这样的东西有用的任何理由。）

```
import java.io.FileReader;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
import java.util.Map;

import com.google.gson.Gson;

public class App
{
  public static void main(String[] args) throws Exception
  {
    List keys1 = getKeysFromJson("input_without_lists.json");
    System.out.println(keys1.size());
    System.out.println(keys1);

    List keys2 = getKeysFromJson("input_with_lists.json");
    System.out.println(keys2.size());
    System.out.println(keys2);
  }

  static List getKeysFromJson(String fileName) throws Exception
  {
    Object things = new Gson().fromJson(new FileReader(fileName), Object.class);
    List keys = new ArrayList();
    collectAllTheKeys(keys, things);
    return keys;
  }

  static void collectAllTheKeys(List keys, Object o)
  {
    Collection values = null;
    if (o instanceof Map)
    {
      Map map = (Map) o;
      keys.addAll(map.keySet()); // collect keys at current level in hierarchy
      values = map.values();
    }
    else if (o instanceof Collection)
      values = (Collection) o;
    else // nothing further to collect keys from
      return;

    for (Object value : values)
      collectAllTheKeys(keys, value);
  }
} 
```

**input_without_lists.json**

```
{
    "widget": {
        "debug": "on",
        "window": {
            "title": "Sample Konfabulator Widget",
            "name": "main_window",
            "width": 500,
            "height": 500
        },
        "image": {
            "src": "Images/Sun.png",
            "name": "sun1",
            "hOffset": 250,
            "vOffset": 250,
            "alignment": "center"
        },
        "text": {
            "data": "Click Here",
            "size": 36,
            "style": "bold",
            "name": "text1",
            "hOffset": 250,
            "vOffset": 100,
            "alignment": "center",
            "onMouseUp": "sun1.opacity = (sun1.opacity / 100) * 90;"
        }
    }
} 
```

**input_with_lists.json**

```
[{
    "widget": {
        "debug": "on",
        "windows": [{
            "title": "Sample Konfabulator Widget",
            "name": "main_window",
            "width": 500,
            "height": 500
        },{
            "title": "Sample Konfabulator Widget",
            "name": "main_window",
            "width": 500,
            "height": 500
        },{
            "title": "Sample Konfabulator Widget",
            "name": "main_window",
            "width": 500,
            "height": 500
        }]
    }
}] 
```

# php - 无法识别的字符 utf8

> ID：15731219
> 
> 赞同：1
> 
> 时间：2013-03-31T15:48:28.087
> 
> 标签：php, mysql, windows, ubuntu

我刚刚创建了一个 Web，但是当我将此 Web 上传到服务器时，Web 编码不会在数据库中插入的数据上使用重音，例如“´”或“`”之类的重音。

我一直在运行 Windows 的 Eclipse 上进行编程，但它基于 Ubuntu 的 Web 服务器。

服务器的配置是：

Apache：我修改了存档`/etc/apache2/conf.d/charset`

```
AddDefaultCharset utf-8 
```

php5

```
Archive modified "/etc/php.ini"

default_charset = "utf-8" 
```

mysql

```
Archive modified “/etc/mysql/my.cnf” 
```

[客户]

```
default-character-set=utf8 
```

[mysql]

```
default-character-set=utf8 
```

[mysqld]

```
init_coonect='SET collation_connection = utf8_general_ci'
init_coonect='SET NAMES utf8'
character-set-server=utf8
collation-server=utf8_general_ci 
```

而当我用命令显示变量如“%character%”检查mysql的变量时；它返回我所有的 utf8。

html5:

```
<meta charset="utf-8"> 
```

创建并保存档案`utf8` I save the archives in utf8

当我检查 http 标头的答案时，这回答了我的内容类型文本/html；

```
charset=utf8 
```

mysql连接

```
mysql_set_charset(“utf8”,$conectar_BD); 
```

如您所见，一切都是正确的，我做错了什么？就像我之前说的，有两种罕见的东西。

1 如果我插入带有重音“´”的用户名，当我通过屏幕打印包含变量 session['name'] 中的名称的变量时，它工作正常，但是当我从对象打印时，它显示的是一个遗憾的字符

2 我之前是如何评论的，如果我在本地计算机上咨询数据库，它会显示正确的字符，但如果我从服务器号进行相同的咨询。

# php - 从同一个html表单将多行插入数据库

> ID：15731222
> 
> 赞同：0
> 
> 时间：2013-03-31T15:48:43.433
> 
> 标签：php, mysql, database, insert, wamp

我想以不同的方式插入多个条目，即多个条目到数据库中，但输入来自相同的表单。

我有一个名为 questionForm 的表格。它是一种静态表单，具有用于插入问题的文本字段和**相应的文本字段**，例如为该问题**分配**的标记、该问题的**复杂程度**、该问题中存在的**tag1 到 tag8**（该问题中的关键字）等。

现在我希望在提交表单时将这些问题中的**每一个都插入我的数据库中。****但在将表格中输入的每个问题的标签与数据库中每个问题的标签进行比较之前，不要先确保没有重复**。我该怎么做呢。

我知道通过一个简单的表单将一个条目插入到数据库中。有人可以帮助我吗？

我现在已经完成了几乎一半的编码。我现在可以将条目插入表单，但它不能正确检查重复项。这是我的问题表格和 php 文件 -

**问题形式** 测试任务

### 输入主题详细信息。

年月： 学期： 学科： 分部：

```
<h3>Enter Questions</h3><br>
<h3>Question 1: Five marks each.<br></h3>

a) <input type="text" name="field1[]" size=45>* Marks: <input type="text" name="field2[]"> Complexity:<input type="text" name="field3[]"> Chapter No.: <input type="text" name="field4[]"> Tags: <input type="text" name="field5[]" size=10> <input type="text" name="field6[]"   size=10> <input type="text" name="field7[]" size=10> <input type="text" name="field8[]" size=10> <input type="text" name="field9[]" size=10> <br>

b) <input type="text" name="field1[]" size=45>* Marks: <input type="text" name="field2[]"> Complexity:<input type="text" name="field3[]"> Chapter No.: <input type="text" name="field4[]"> Tags: <input type="text" name="field5[]" size=10> <input type="text" name="field6[]"   size=10> <input type="text" name="field7[]" size=10> <input type="text" name="field8[]" size=10> <input type="text" name="field9[]" size=10> <br>

<p><input  type="submit" name="submit" value="Submit" />
    <input type='reset' name='Cancel' value='Cancel' /></p>
</form>
</body>
</html> 
```

**任务.php**

```
include('connectionfile.php');

$cnt = count($_POST['field1']);
$my= $_POST['my'];
$sem= $_POST['sem'];
$subj= $_POST['subj'];
$branch= $_POST['branch'];

if ($cnt > 0) {

        for ($i=0; $i<$cnt; $i++) 
    {

    $t1 = $_POST['field5'][$i]; 
    $t2 = $_POST['field6'][$i];
    $t3 = $_POST['field7'][$i];
    $t4 = $_POST['field8'][$i];
    $t5 = $_POST['field9'][$i];

$result = "SELECT * FROM paper WHERE (((`tag1` LIKE '%".$t1."%') OR (`tag1` LIKE '%".$t2."%') OR (`tag1` LIKE '%".$t3."%') OR (`tag1` LIKE '%".$t4."%') OR (`tag1` LIKE '%".$t5."%')) AND ((`tag2` LIKE '%".$t2."%') OR (`tag2` LIKE '%".$t3."%') OR (`tag2` LIKE '%".$t4."%') OR (`tag2` LIKE '%".$t5."%')) AND ((`tag3` LIKE '%".$t3."%') OR (`tag3` LIKE '%".$t4."%') OR (`tag3` LIKE '%".$t5."%')) AND ((`tag4` LIKE '%".$t4."%') OR (`tag4` LIKE '%".$t5."%')) AND ((`tag5` LIKE '%".$t5."%')) ) ;" ; // which checks if the tags in that question match with the tags of any other question in the db.

$sql= mysql_query($result) OR die(mysql_error()) ;

$duplicates = mysql_num_rows($sql);

if( $duplicates > 0)
echo "No entry entered for Entry #$i since it may lead to duplicates."; // no entry is inserted in insertArr[] if it leads to duplication

else
  $insertArr[] = "('" .$_POST['field1'][$i]. "', '" .$_POST['field2'][$i]. "', '" .$_POST['field3'][$i]. "', '" .$_POST['field4'][$i]. "', '" .$_POST['field5'][$i]. "', '" .$_POST['field6'][$i]. "', '" .$_POST['field7'][$i]. "', '" .$_POST['field8'][$i]. "', '" .$_POST['field9'][$i]. "', '".$my."', '".$sem."', '".$subj."', '".$branch."')";
        }

$query1 = "INSERT INTO paper (question, marks_allotted, complexity, chp_no, tag1, tag2, tag3, tag4, tag5, monthandyear, semester, subject_name, branch_name) VALUES " . implode(", ", $insertArr);

mysql_query($query1) or trigger_error("Insert failed: " . mysql_error());

    }

echo("<pre>\n");
print_r($_POST);
echo("</pre>\n");

mysql_close($id_link);
?> 
```

**运行时，尽管我输入的问题与数据库中的现有问题没有匹配的标签，但**在运行时给了我以下信息：没有为条目 #0 输入条目，因为它可能导致重复。没有为条目 #1 输入条目，因为它可能导致重复。注意：未定义的变量：第 41 行的 insertArr

警告：implode() [function.implode]：第 41 行传递的参数无效

注意：插入失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 43 行的 '' 附近使用

**请指导我**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:37:18.740

this code from the first answer will do that

```
if ($num > 0) { 
```

echo "There are matches with one or more tags you've entered"; }

if the number is greater than one this code will execute and the insert block will be ignored

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T15:57:58.253

好吧，你有例如

```
<input type="text" name="tag1" />
<input type="text" name="tag2" /> 
```

从表单发布到 PHP

然后你在 PHP

```
$tag1 = $_POST['tag1']; $tag2 = $_POST['tag2'];
$sql = "SELECT tag1, tag2 FROM db1 WHERE tag1 = '$tag1' OR tag2 = '$tag2';";
//query the $sql value i.e. with $query = mysql_query($sql) (which is not good example since its deprecated)
//then make a check:
$num = mysql_num_rows($result);
if ($num > 0) {
echo "There are matches with one or more tags you've entered";
}
else {
mysql_query("INSERT INTO db1 (tag1, tag2) VALUES ('$tag1', '$tag2')");
echo "Tags inserted";
} 
```

请记住这个例子很差而且设计得不好，但我希望你明白这个想法。对于找到的行，其他 sql 库中有等效的方法，因此您必须选择是否存在匹配项，如果为真 - 让它们更改其标签。

# python - 突出显示 matplotlib 矩阵上的某些点

> ID：15731223
> 
> 赞同：3
> 
> 时间：2013-03-31T15:48:44.827
> 
> 标签：python, matrix, matplotlib

我在 matplotlib 中使用`imshow()`. 当我按下按钮时，我希望突出显示矩阵上的某些绘制点。我要选择的列表中有一组坐标。我的矩阵也是一个二进制矩阵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:34:56.767

如果我正确理解您的要求，我会这样做是`imshow`在矩阵顶部添加一个 RGBA 叠加层，除了您想要“突出显示”的点之外，alpha 通道设置为零。然后，您可以切换叠加层的可见性以打开和关闭突出显示。

```
from matplotlib.pyplot import *
import numpy as np

def highlight():
    m = np.random.randn(10,10)
    highlight = m < 0

    # RGBA overlay matrix
    overlay = np.zeros((10,10,4))

    # we set the red channel to 1
    overlay[...,0] = 1.

    # and we set the alpha to our boolean matrix 'highlight' so that it is
    # transparent except for highlighted pixels
    overlay[...,3] = highlight

    fig,ax = subplots(1,1,num='Press "h" to highlight pixels < 0')

    im = ax.imshow(m,interpolation='nearest',cmap=cm.gray)
    colorbar(im)
    ax.hold(True)
    h = ax.imshow(overlay,interpolation='nearest',visible=False)

    def toggle_highlight(event):
        # if the user pressed h, toggle the visibility of the overlay
        if event.key == 'h':
            h.set_visible(not h.get_visible())
            fig.canvas.draw()

    # connect key events to the 'toggle_highlight' callback
    fig.canvas.mpl_connect('key_release_event',toggle_highlight) 
```

# mysql - 我们如何加快查询速度*

> ID：15731224
> 
> 赞同：0
> 
> 时间：2013-03-31T15:48:49.633
> 
> 标签：mysql

我编写了这段代码来查询mysql表customerselections、company和companycampaigns。这些表具有必要字段的索引。

查询时间（无缓存）约为 0,30。考虑到并发连接，我认为查询时间很长。是否可以用不同的方式重写以加快查询时间？

```
SELECT  
customerselections.customer_id, 
customerselections.selectedcompany_id,
customerselections.selection_id,

companycampaigns.campaign_id,
companycampaigns.company_id,
companycampaigns.campaign_title,
companycampaigns.campaign_detail,
companycampaigns.published,

companies.company_logo,
companies.company_id,

FROM  customerselections
LEFT JOIN companies ON customerselections.selectedcompany_id=companies.company_id 
LEFT  JOIN companycampaigns ON  companycampaigns.company_id=companies.company_id AND companycampaigns.published='1'
WHERE customerselections.customer_id='$customerid'  LIMIT $offset,$limit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:52:24.470

与选择所有行相比，基于字段`customerselections.customer_id`的选择较慢，因为服务器不必进行任何过滤。因此，这将产生轻微的推动作用。

```
SELECT  
customerselections.*,
companycampaigns.*,
companies.*
FROM  customerselections
LEFT JOIN companies ON customerselections.selectedcompany_id=companies.company_id 
LEFT  JOIN companycampaigns ON  companycampaigns.company_id=companies.company_id AND companycampaigns.published='1'
WHERE customerselections.customer_id='$customerid'  LIMIT $offset,$limit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:17:44.017

尝试定义一个复合索引`companycampaigns (company_id, published)`并查看该`EXPLAIN`计划是否有帮助。

# sql - Oracle SQL唯一约束A到B，B到A

> ID：15731227
> 
> 赞同：6
> 
> 时间：2013-03-31T15:49:09.263
> 
> 标签：sql, oracle

我的桌子有点像

```
从到距离              
------ ---- ----------
AB 100  
公元前100
ZA 120

```

我需要向表中添加一个不允许插入 `B A 100`或`C B 100`或的约束`A Z 120`

我有一个`PRIMARY KEY (from, to)`，`CONSTRAINT const_u UNIQUE (to, from)`但它没有按预期工作。

编辑：我也无法在插入时强制按字母顺序正确排序，因为我无权访问插入逻辑 EDIT#2：你可以添加 BA 50 吗？——不，你不能。从 A 到 B 或 B 到 A 的距离应该只有一个唯一距离，但不能同时存在。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T18:27:06.040

```
create unique index on the_table (least(from,to), greatest(from,to)); 
```

如果 (A,B,100) 已经在表中，将阻止添加 (B,A,100)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T16:02:06.347

如果您愿意将此作为规则，您可以尝试`CHECK`约束：

```
CONSTRAINT force_collation CHECK (FROM < TO) 
```

# backbone.js - 如何在backbone.js的不同文件中分离视图、模板和集合？

> ID：15731229
> 
> 赞同：1
> 
> 时间：2013-03-31T15:49:31.143
> 
> 标签：backbone.js

我制作了一个主干应用程序，但整个代码在一页中。我想在单独的文件中分离出视图和集合以及模板。我没有使用 require.js 或任何其他样板。有什么方法可以将文件中的代码分开吗？MV* 架构的主要目的是将代码和 UI 分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:49:00.343

是的，有很多方法可以做到这一点。我更喜欢将每个模块编码为 CommonJS/node 样式文件，并使用[browserify](http://browserify.org)来解决依赖关系并连接文件以发送到浏览器。

另一个选择是[RequireJS](http://requirejs.org/)，它是目前最流行的，尽管社区仍然大多是未定/未指定/多选项模式。

另一个流行的选项可能是使用构建工具（rails 资产管道、gulp、grunt 等）将单独的文件组合成一个用于整个应用程序的大文件或一个用于应用程序每个主要部分的大文件。

# python - Python 脚本在打印之前打印 os.system 的输出

> ID：15731231
> 
> 赞同：4
> 
> 时间：2013-03-31T15:49:36.433
> 
> 标签：python, linux, command-line, stdout

我有一个 python 脚本 test.py：

```
print "first"
import os
os.system("echo second") 
```

在linux命令行上我执行

```
python test.py 
```

返回：

```
first
second 
```

然后我执行

```
python test.py > test.out; cat test.out 
```

返回

```
second
first 
```

重定向输出如何使 os.system 调用 print 在 print 语句之前？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:59:19.607

当您输出到管道时，Python 会缓冲您写入的`sys.stdout`输出，并在刷新后、溢出后或关闭时（程序退出时）输出。虽然它会缓冲打印调用，但系统调用直接输出到标准输出，并且它们的输出不会被缓冲。这就是为什么你会看到这样的优先级。为避免这种情况，请使用`python -u`：

```
python -u test.py > test.out; cat test.out 
```

[在此处](https://stackoverflow.com/questions/107705/python-output-buffering)查看更多信息。

*编辑*：解释何时刷新缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T16:03:48.243

防止操作系统缓冲的另一种方法是在第一次打印后刷新输出：

```
#!/usr/bin/env python

import sys
print "first"
sys.stdout.flush()
import os
os.system("echo second") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:03:48.373

当 python 脚本的输出是 tty 时，它的输出是行缓冲的。当输出是常规文件时，输出是块缓冲的。

# iphone - iPhone iOS createUUID 使用 ARC 泄漏内存

> ID：15731237
> 
> 赞同：1
> 
> 时间：2013-03-31T15:50:04.783
> 
> 标签：iphone, objective-c, nsstring, automatic-ref-counting, uuid

我在网上找到了一个创建通用唯一标识符 (UUID) 的小方法。xCode 静态分析器告诉我，此方法正在泄漏内存，它在下面的代码中标记。

**有人能告诉我编写这段代码的正确方法是什么，这样就不会出现内存泄漏吗？**

```
 +(NSString *)createUUID
    {

        // Create universally unique identifier (object)
        CFUUIDRef uuidObject = CFUUIDCreate(kCFAllocatorDefault);

        // Get the string representation of CFUUID object.
//leak here
        NSString *uuidStr = (__bridge NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuidObject) ;

        CFRelease(uuidObject);

        return uuidStr;

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T16:07:50.363

尝试以下操作：

```
NSString *uuidStr = (__bridge_transfer NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuidObject); 
```

您需要告诉 NSString 它负责创建的 CFString 的所有权。这样，如果您打开了 ARC，CFString 将被自动释放。如果您改用 __bridge，则需要显式调用 CFRelease 以释放由 *Create 函数调用创建的 CFString。

有关转换的更多信息，`__bridge`请阅读Apple[核心基础设计概念](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFDesignConcepts/CFDesignConcepts.html#//apple_ref/doc/uid/10000122-SW1)指南的[转换和对象生命周期语义](http://developer.apple.com/library/ios/#documentation/CoreFoundation/Conceptual/CFDesignConcepts/Articles/tollFreeBridgedTypes.html#//apple_ref/doc/uid/TP40010677-SW2)部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T16:06:28.473

而不是`__bridge`：

```
NSString *uuidStr = (__bridge NSString *)CFUUIDCreateString(kCFAllocatorDefault, uuidObject) ; 
```

使用`CFBridgingRelease`. 您对`__bridge`此处的使用是错误的。您是在告诉 ARC，它对`uuidStr`. 但它确实有这样的责任，因为`Create`在功能的名称`CFUUIDCreateString`。ARC 需要添加一个 release 来对应`Create`. 否则你会泄漏。你必须告诉 ARC 这件事。`CFBridgingRelease`是最简单的方法。

有关更多信息，请参阅我书中的讨论：

[http://www.aeth.com/iOSBook/ch12.html#_memory_management_of_cftyperefs](http://www.apeth.com/iOSBook/ch12.html#_memory_management_of_cftyperefs)

# r - 来自修正的 xtable 函数的独立乳胶表

> ID：15731238
> 
> 赞同：4
> 
> 时间：2013-03-31T15:50:07.607
> 
> 标签：r, xtable

我正在尝试创建一个自动化的 R 函数，该函数创建一个可以由外部 Latex 程序运行（无需对 Latex 代码进行任何进一步修改）的乳胶文件。我知道 KnitR 和 Sweave，但我需要一些更简单的东西。基本上对于可以通过 xtable 打印出来的任何对象，我想添加

%A1 在顶部

```
\documentclass{article}
\pagestyle{empty}
\begin{document} 
```

%A2 结尾

```
\end{document} 
```

这意味着我可以运行我的分析并（当我需要时）创建一个可以由基于 Latex 的程序操作的外部文件。我对将所有表格放入一个文档不感兴趣，但我希望它们分开（因此需要 \begin{document} 和 \end{document}。我一直在尝试 add.to.rows（xtable 函数）但我无处可去。

例子：

```
data(tli)
tli.table <- xtable(tli[1:10,])
digits(tli.table)[c(2,6)] <- 0
print(tli.table,floating=FALSE) 
```

您将如何添加 A1 和 A2 以使结果为：

```
\documentclass{article}
 \pagestyle{empty}
\begin{document}
\begin{table}[ht]
\centering
\begin{tabular}{rrlllr}
  \hline
 & grade & sex & disadvg & ethnicty & tlimth \\ 
  \hline
1 &   6 & M & YES & HISPANIC &  43 \\ 
  2 &   7 & M & NO & BLACK &  88 \\ 
  3 &   5 & F & YES & HISPANIC &  34 \\ 
  4 &   3 & M & YES & HISPANIC &  65 \\ 
  5 &   8 & M & YES & WHITE &  75 \\ 
  6 &   5 & M & NO & BLACK &  74 \\ 
  7 &   8 & F & YES & HISPANIC &  72 \\ 
  8 &   4 & M & YES & BLACK &  79 \\ 
  9 &   6 & M & NO & WHITE &  88 \\ 
  10 &   7 & M & YES & HISPANIC &  87 \\ 
   \hline
\end{tabular}
\end{table}
\end{document} 
```

我一开始就卡住了：

```
bottom <- list();bottom$pos<- list()
bottom$pos[[1]] <- c(nrow(x))
bottom$command  <-c("\\end{document} \n")
print(xtable(tli[1:10,]),add.to.row=bottom) 
```

我需要 \end{document} 在最后，但如果我改变

`bottom$pos`

到

`bottom$pos[[1]] <- c(nrow(x)+3)`

我得到一个错误。我也没有包括顶部（A1-见上文）。

理想情况下，我希望代码尽可能通用，以便它可以应用于任何 xtable 输出（例如 anovas、侧边表等......）。

有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T17:49:20.227

`cat`and`print.xtable` 函数都有一个 'append' 参数：

```
wrapLatex <- function(dat,fil, ...) {
     cat(c("\\documentclass{article}\n",
           "\\pagestyle{empty}\n",
           "\\begin{document}\n"), file=fil)
   print(dat, file=fil, append=TRUE, ...)
      cat("\\end{document}\n", file=fil, append=TRUE) }
wrapLatex(tli.table, fil="~/test") 
```

# google-chrome-extension - NPP_New 在少数网页（Chrome 和 Safari）中没有被调用

> ID：15731240
> 
> 赞同：0
> 
> 时间：2013-03-31T15:50:16.107
> 
> 标签：google-chrome-extension, npapi, safari-extension, browser-plugin

我正在尝试从 Chrome/Safari 扩展的内容/注入脚本访问 NPAPI 插件。

嵌入插件对象和访问方法的代码。

```
var newElement = document.createElement("embed");  
newElement.id = "myPluginID";  
newElement.type = "application/x-mychrome-plugin";
var newAttr = document.createAttribute("hidden");
newAttr.nodeValue = "true"
newElement.setAttributeNode(newAttr);
newElement.style.zIndex = "-1";
newElement.style.position = "absolute"; 
newElement.style.top = "0px";
document.documentElement.appendChild(newElement);
plugin = document.getElementById("myPluginID"); //this shows as HTML element when evaluated in JavaScript console.

   plugin.myPluginMethod() // this shows as undefined instead of native code(When evaluated in JavaScript console),for pages where NPP_New is not called. 
```

这适用于大多数网页，但对于少数页面（例如：www.stumbleupon.com），不调用 NPP_New（使用 Xcode 4 进行调试）并且未创建可编写脚本的对象并且所有插件方法都未定义。

任何输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:40:58.220

你为什么把你的嵌入作为`document.documentElement`(ie, `<html>`) 的孩子而不是身体？我不希望实例化不会显示的插件。

# c++ - 在这种情况下，C++ 链接如何工作？

> ID：15731241
> 
> 赞同：0
> 
> 时间：2013-03-31T15:50:21.533
> 
> 标签：c++, linker, libraries

我构建了一个 C++ 库，用于在大多数已知平台上制作游戏，它运行良好。但是，我遇到了链接器的一个小问题，如果不弄清楚答案，我就无法忍受自己。

我在两个单独的文件中有两个单独的类：`KinesisWorld`in`KinesisWorld.h`和`ASEngine`in `ASEngine.h`。两者在实现上有着相似的行为，它们封装了其他库提供的功能，`KinesisWorld`继承和调用`Box2D`函数和`ASEngine`调用`angelscript`函数。到现在为止还挺好。

现在，当我构建一个使用我的库的应用程序时，只要我不包含或使用`KinesisWorld`，链接器就不会尝试链接`Box2D`库。只要我简单地`KinesisWorld.h`在最终可执行源中包含某个位置，它就会立即抱怨未定义的引用，直到我添加`Box2D`到链接器。这也是我一直都知道并在其他库中观察到的行为。

虽然，使用`angelscript`, 根本不包括`ASEngine.h`，它总是会抱怨对 的未定义引用`angelscript`，即使最终的可执行文件没有对它进行任何引用。

知道什么会导致这样的事情吗？我分别使用 GCC 和 Visual Studio 在 Linux 32 位和 Windows 32 位上对其进行了测试，行为相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:00:29.320

在调用有问题的（已声明但未定义的）函数之前，链接器并不关心。

在这种情况下，除了 KinesisWorld 之外，您没有在任何地方使用任何 Box2D 函数，但您在库中的某处使用了 angelscript。仔细检查您的 ASEngine 外观，尤其是其他任何地方（在整个项目中使用“查找”功能可能会有所帮助）。

# vba - 突出显示一行直到最后一列

> ID：15731243
> 
> 赞同：0
> 
> 时间：2013-03-31T15:50:33.533
> 
> 标签：vba, excel, excel-2010

如何调整此代码以突出显示直到最后一列的行，在我的情况下是“J”而不是 EntireRow？

```
 For Each wb In Workbooks
  If wb.Name <> "Book1.xlsm" Then
  wb.Activate

    For Each ws In ActiveWorkbook.Worksheets
      Set cl = ws.Cells.Find(What:=SearchString, _
        After:=ws.Cells(1, 1), _
        LookIn:=xlValues, _
        LookAt:=xlWhole, _
        SearchOrder:=xlByRows, _
        SearchDirection:=xlNext, _
        MatchCase:=False, _
        SearchFormat:=False)
             If Not cl Is Nothing Then
                 FirstFound = cl.Address
            Do
                  cl.EntireRow.Interior.ColorIndex = Cor
                 Set cl = ws.Cells.FindNext(After:=cl)
        Loop Until FirstFound = cl.Address
             End If
    Next ‘ etc etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:07:01.720

更改
`cl.EntireRow.Interior.ColorIndex = Cor`
为：
`ws.Range("A" & cl.Row & ":J" & cl.row).Interior.ColorIndex = Cor`

# php - 无法使用 PHP 脚本显示 XML 数据

> ID：15731244
> 
> 赞同：-2
> 
> 时间：2013-03-31T15:50:38.753
> 
> 标签：php, mysql, xml

我有大约 60000 个 xml 文件必须插入到 MySQL 数据库中。所以我想制作一个简单的 php 脚本，该脚本将执行一次以从该 xml 文件加载数据并将其插入到我在本地主机上的数据库中。

在将其插入我的数据库之前，我尝试在页面上的数据上显示它们，但它什么也没显示，并且它的类型为 NULL。

这是代码：

```
<?php
$dir = new DirectoryIterator('organismes');
foreach ($dir as $fileinfo) {
   if (!$fileinfo -> isDot()) {
         $XMLFILE = $fileinfo -> getFilename();
         echo $XMLFILE . "<br>\n"; /*the filename shows correctly, so the DirectoryIterator is working*/
         $pathtofile = "http://localhost/www/organismes/$XMLFILE"; /*the link to the xml file made with a variable*/
         echo $pathtofile . "<br>\n"; /* the link shown is correct */
         $xml = simplexml_load_file($pathtofile);
         echo gettype($xml) . "<br>\n";
         if ($xml == FALSE) {
                echo "failed to load xml"; /* this message never shows so the xml file   loads correctly */
         } else {
                $Org = $xml->Organisme->Nom; //this variable $Org gets a NULL Value
                echo $Org . "<br>" ;
                echo gettype($Org);
         }
   }
}
?> 
```

当我使用 print_r($xml) 时，它会显示一些数据，以便文件正确加载。这是我拥有的 xml 文件的示例：

```
<Organisme id="adil-01053-01" codeInsee="01053" dateMiseAJour="2013-02-27" pivotLocal="adil">
<Nom>Agence</Nom>    
<EditeurSource>A2 A3</EditeurSource>
<Adresse type="géopostale">
<Ligne>34, rue du Général-Delestraint</Ligne>
<CodePostal>01000</CodePostal>
<NomCommune>Bourg-en-Bresse</NomCommune>
<Localisation>
<Latitude>46.196535</Latitude>
<Longitude>5.2191997</Longitude>
<Précision>6</Précision>
</Localisation>
<Accessibilité type="ACC"/></Adresse>
<CoordonnéesNum>
<Téléphone>00000000000</Téléphone>
<Télécopie>00000000000</Télécopie>
<Email>adil.01@wanadoo.fr</Email>
<Url>http://www.adil01.org</Url>
</CoordonnéesNum>
 <Ouverture><PlageJ début="vendredi" fin="vendredi"><PlageH début="09:00:00" fin="17:00:00"/></PlageJ><PlageJ début="lundi" fin="jeudi"><PlageH début="09:00:00" fin="18:00:00"/></PlageJ>
</Ouverture>
</Organisme> 
```

所以我想弄清楚为什么它不能正确显示以及为什么它会得到一个 NULL 值所以兄弟们，如果你能提供帮助，那就太好了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:45:58.887

```
$pathtofile = "http://www.w3schools.com/xml/note.xml";
$xml = simplexml_load_file($pathtofile);
if ($xml == FALSE) {
    echo "failed to load xml";
} 
else
{
    $A = $xml->to;
    echo "$A <br />";                       
} 
```

只关注代码的那一部分，它似乎可以正常工作。两种情况之一正在发生。“$xml->Organisme->Nom;” 有拼写错误和/或正在提取的 xml 文件不包含这些字段名称。

为了测试做

```
print_r($xml); 
```

紧接着

```
echo "$A <br />"; 
```

以获得被拉取的 xml 文件的准确表示。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:06:30.810

我不确定你想要什么，但我假设你想将 XML 数据插入到你的数据库中。如果是这种情况，试试这个：

```
function create_xml()
{

    $xml = simplexml_load_file("file.xml");

    $nodes = new SimpleXMLElement('file.xml', null, true)
             or die("cannot create");

    $i = 0;

    foreach ($nodes->children() as $child)
    {

             $var= $child->xml_child;

              $sql = "INSERT INTO ...)";

              mysqli_query($connect, $sql);

             $i++;

             echo "xml set";

    }

} 
```

# java - 在 JLabel 中以不同方式对齐文本和图标

> ID：15731246
> 
> 赞同：5
> 
> 时间：2013-03-31T15:50:46.520
> 
> 标签：java, swing, alignment, jlabel, imageicon

我正在尝试创建一个文本左对齐和图标右对齐的 JLabel，我尝试了以下代码：

```
_ip = new JLabel(ip);
_ip.setFont(boldFont);
_ip.setBounds(5, 0, 100, 50);
_ip.setIcon(images.ipBan);
_ip.setBorder(BorderFactory.createLineBorder(Color.black, 1));
_ip.setHorizontalTextPosition(SwingConstants.LEFT);
add(_ip); 
```

这就是我得到的：

![对齐预览](https://i.stack.imgur.com/dzTXd.png)

*红色图像显示实际图像对齐，灰色图像显示我想要图像的位置。*

如果我添加

```
_ip.setAlignmentX(JLabel.RIGHT_ALIGNMENT); 
```

什么都没有发生，如果我添加

```
_ip.setHorizontalAlignment(JLabel.RIGHT); 
```

图标右对齐，但文本也右对齐，我希望它左对齐

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T17:28:02.163

或者，您可以使用具有合适布局的 a，如此[处](https://stackoverflow.com/a/2933256/230513)`JPanel`所示。

![图片](https://i.stack.imgur.com/r0L5C.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-31T15:59:51.723

请DYM？？？

![在此处输入图像描述](https://i.stack.imgur.com/i4yCg.jpg)

```
import java.awt.*;
import javax.swing.*;

public class CenteredJLabel {

    private JFrame frame = new JFrame("Test");
    private JPanel panel = new JPanel();
    private JLabel label = new JLabel("CenteredJLabel");
    private Icon errorIcon = UIManager.getIcon("OptionPane.errorIcon");

    public CenteredJLabel() {
        panel.setLayout(new GridBagLayout());
        panel.add(label);
        label.setHorizontalAlignment(SwingConstants.LEFT);
        label.setVerticalAlignment(SwingConstants.CENTER);
        label.setIcon(errorIcon);
        label.setIconTextGap(20);
        label.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.add(panel);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                CenteredJLabel centeredJLabel = new CenteredJLabel();
            }
        });
    }
} 
```

编辑

![在此处输入图像描述](https://i.stack.imgur.com/i1b0h.jpg)

```
import java.awt.*;
import javax.swing.*;

public class CenteredJLabel {

    private JFrame frame = new JFrame("Test");
    private JPanel panel = new JPanel();
    private JLabel labelOne = new JLabel("CenteredJLabel");
    private JLabel labelTwo = new JLabel("1.1.1.1");
    private JLabel labelThree = new JLabel("192.168.255.255");
    private JLabel labelFour = new JLabel("192.168.255.255");
    private Icon errorIcon = UIManager.getIcon("OptionPane.errorIcon");
    private Icon infoIcon = UIManager.getIcon("OptionPane.informationIcon");
    private Icon warnIcon = UIManager.getIcon("OptionPane.warningIcon");
    private Icon questnIcon = UIManager.getIcon("OptionPane.questionIcon");
    private JPanel panelTwo = new JPanel();

    public CenteredJLabel() {
        panel.setLayout(new GridLayout(4, 0, 10, 10));

        labelOne.setHorizontalAlignment(SwingConstants.LEFT);
        labelOne.setVerticalAlignment(SwingConstants.CENTER);
        labelOne.setIcon(errorIcon);
        labelOne.setIconTextGap(20);
        labelOne.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        panel.add(labelOne);

        labelTwo.setHorizontalAlignment(SwingConstants.LEFT);
        labelTwo.setVerticalAlignment(SwingConstants.CENTER);
        labelTwo.setIcon(infoIcon);
        labelTwo.setIconTextGap(20);
        labelTwo.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        panel.add(labelTwo);

        labelThree.setHorizontalAlignment(SwingConstants.LEFT);
        labelThree.setVerticalAlignment(SwingConstants.CENTER);
        labelThree.setIcon(warnIcon);
        labelThree.setIconTextGap(20);
        labelThree.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        panel.add(labelThree);

        panelTwo.setLayout(new BorderLayout());
        panelTwo.setOpaque(false);
        panelTwo.add(labelFour, BorderLayout.WEST);
        panelTwo.add(new JLabel(questnIcon), BorderLayout.EAST);
        panel.add(panelTwo);

        panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.add(panel);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                CenteredJLabel centeredJLabel = new CenteredJLabel();
            }
        });
    }
} 
```

# sql - FUNCTION 语法错误

> ID：15731247
> 
> 赞同：0
> 
> 时间：2013-03-31T15:50:47.410
> 
> 标签：sql, function, postgresql, plpgsql, postgresql-9.1

```
CREATE FUNCTION check_available_flightID(date)
RETURNS integer AS 
$$
BEGIN 
  SELECT FlightID FROM Flight WHERE FlightDate::date = $1;

  IF NEW.FlightID IS NULL THEN 
  RAISE EXCEPTION 'No filight in the date you enter'
  END IF;

  RETURN query SELECT FlightID FROM Flight WHERE FlightDate::date = $1;
$$
LANGUAGE SQL; 
```

它说“IF”附近的语法错误......有点困惑为什么有些功能需要`BEGIN`而有些不需要。

谁能给我一个提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:07:03.180

在其他语法错误中，您将它声明为 SQL 函数，而实际上它是 PL/pgSQL 语法。做那个`LANGUAGE plpgsql`。

### 适当的功能

当前接受的答案*非常*低效。不要使用它。这应该做得更好（基于OP模糊的假设）：

```
CREATE FUNCTION check_available_flightid(date)
  RETURNS SETOF integer
  LANGUAGE plpgsql AS 
$func$
BEGIN 
   RETURN QUERY
   SELECT flightid
   FROM   flight
   WHERE  flightdate >= $1
   AND    flightdate < ($1 + 1);

   IF NOT FOUND
      RAISE EXCEPTION 'No flight at %.', $1;
   END IF;
END
$func$ 
```

*   不要运行该`SELECT`语句两次。改为使用[**`FOUND`**](https://www.postgresql.org/docs/current/plpgsql-statements.html#PLPGSQL-STATEMENTS-DIAGNOSTICS)。
*   `flightdate`似乎是`timestamp`。
    表达式 like`FlightDate::date = $1`是[**不可分割**](https://en.wiktionary.org/wiki/sargable)的（不能使用普通索引）。我的替代方案可以使用索引，`flightdate`并且会更快。差异随着表的大小而增长。

*该功能后来作为[示例添加到手册中。](https://www.postgresql.org/docs/current/plpgsql-control-structures.html#id-1.8.8.8.3.4.3)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T16:07:45.217

我不是 Postgres 方面的专家，但我认为`new`是触发器而不是常规函数。

我想你想要这样的东西：

```
CREATE FUNCTION check_available_flightID(date)
RETURNS integer AS 
$$
declare newfid int;
BEGIN 
  SELECT FlightID into newfid FROM Flight WHERE FlightDate::date = $1;
  IF newfid IS NULL THEN 
      RAISE EXCEPTION 'No flight in the date you enter';
  END IF;
  RETURN query SELECT FlightID FROM Flight WHERE FlightDate::date = $1;
end;
$$ 
```

# python - 使用 cython 或 PyPy 优化元组/列表（用 python 实现的图论算法）

> ID：15731252
> 
> 赞同：1
> 
> 时间：2013-03-31T15:51:21.503
> 
> 标签：python, list, tuples, cython, pypy

我正在研究一个理论图论问题，该问题涉及在超图中采用超边的组合来分析各种情况。

我已经在 Python 中实现了主要算法的初始版本，但是由于它的组合结构（可能还有我的实现），该算法非常慢。

我正在考虑加快速度的一种方法是使用 PyPy 或 Cython。

查看文档，似乎 Cython 在元组方面并没有提供很大的加速。这对于实现来说可能是有问题的，因为我将超边表示为元组 - 所以算法的大部分是在处理元组（但是它们的长度都是相同的，每个大约 len 6）。

由于我的 C 和 Python 技能都非常低，如果有人能建议在优化代码时使用元组/列表的最佳方法，我将不胜感激。是否有使用 Cython（或 PyPy）的列表/元组的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:51:32.833

如果你的算法在计算复杂度方面不好，那你就救不了了，你需要把它写得更好。查阅一本好的图论书或维基百科，它通常相对容易，尽管有些算法既不平凡又难以实现。这听起来像是 PyPy 可以显着加速的事情，但只是通过一个**常数**因子，但是它不涉及对代码的任何修改。如果没有类型声明，Cython 并不会加速你的代码，而且似乎这类问题不能仅仅通过类型来加速。

常数部分在这里至关重要 - 如果算法复杂度增长到 2^n （这对于简单算法来说是典型的），那么在图中添加额外的节点会使您的时间加倍。这意味着 10 个节点加 1024 个时间，20 个节点 1024*1024 等等。如果你非常幸运，PyPy 可以将你的算法加速 100 倍，但这在图形大小上保持不变（你很快就会用完宇宙时间以一种或另一种方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:54:17.317

> 继续优化代码的最佳方法是什么...

[先介绍一下](https://stackoverflow.com/questions/582336/how-can-you-profile-a-python-script)。有一个标准的[cProfile](http://docs.python.org/2/library/profile.html)模块可以很好地进行简单的分析。在分析之前优化代码是毫无意义的。

此外，对于图表，您可以尝试使用出色的[networkx](http://networkx.github.com/)模块。此外，如果您处理长排序列表，您可以查看[bisect](http://docs.python.org/2/library/bisect.html)和[heapq](http://docs.python.org/2/library/heapq.html)模块。

# mysql - 从 SQL 表的行中删除“唯一性”

> ID：15731253
> 
> 赞同：-2
> 
> 时间：2013-03-31T15:51:21.680
> 
> 标签：mysql, sql, phpmyadmin

我可以轻松地从 sql web 界面 phpMyAdmin 中为一行添加唯一性，但是如何删除它？

它在界面中不可点击，我在mysql文档中找不到任何内容。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T15:55:51.213

这应该是 Wrikken 的答案 - 不知道他为什么还没有发布它......

考虑下表：

```
CREATE TABLE yourtable
(
some_id int NOT NULL,
someColumn varchar(255) NOT NULL
UNIQUE (some_id )
) 
```

你会想使用：

```
ALTER TABLE yourtable DROP INDEX some_id; 
```

删除索引就像它听起来的那样，它完全从表中删除索引。

[在这里](http://www.w3schools.com/sql/sql_drop.asp)查看更多

# java - 如何访问超类和子类的信息？

> ID：15731256
> 
> 赞同：0
> 
> 时间：2013-03-31T15:52:01.437
> 
> 标签：java

我想做的是从超类及其子类访问信息（变量、方法等）。

如果我对继承的了解是正确的，那么通过访问超类，我们默认可以访问它的子类。所以我认为我只需要能够访问父（超级）类。

但是我该怎么做呢？

我不会在这里发布所有代码，这会将这篇文章变成 3 页。

超类只是创建联系人的通用代码，需要访问超类的类是创建arraylist并将每个联系人记录在arraylist中的类。

我并不是想为我编写代码，但是对于理解它如何工作的所有帮助，将不胜感激。

为了简短起见，除非需要，否则我不会发布子类。

联系人（超类）：

```
public class Contacts
{
    protected String fname;
    protected String lname;
    protected String email;
    protected String phone;

    public Contacts(String fname, String lname, String email, String phone)
    {
        this.fname=fname;
        this.lname=lname;
        this.email=email;
        this.phone=phone;

    }

    public String getfname()
    {
        return fname;
    }

    public void setfname(String first)
    {
        this.fname=first;       
    }

    public String getlname()
    {
        return lname;
    }

    public void setlname(String last)
    {
        this.lname=last;
    }

    public String getemail()
    {
        return email;
    }

    public void setemail(String e)
    {
        this.email=e;
    }

    public String getphone()
    {
        return phone;
    }

    public void setphone(String num)
    {
        this.phone=num;
    }

    public String getFullName()
    {
        String full=fname+" "+lname;
        return full;
    } 
```

我没有在这段代码上做太多，因为我一直在试图弄清楚它，却不知道从哪里开始。我不认为参数应该是空的，我只是包括那些满足邪恶的编译器。

地址簿：

```
import java.util.ArrayList;
public class AddressBook
{
    Contacts enteredContact = new Contacts(null, null, null, null);
} 
```

这是了解包含的内容的子类之一。

朋友（子类）：

```
public class Friend extends Contacts
{
    private String dob;

    /**
     * Constructs a new Friend object. (Insert any further description that is needed)
     * @param fname
     * @param lname
     * @param email
     * @param phone
     */
    public Friend(String fname, String lname, String email, String phone)
    {
        super(fname, lname, email, phone);
    }

    /**
     * @return the dob
     */
    public String getDob()
    {
        return dob;
    }

    /**
     * @param dob the dob to set
     */
    public void setDob(String dob)
    {
        this.dob = dob;
    }

    /* (non-Javadoc)
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString()
    {
        return fname+", "+lname+", "+email+", "+phone+", "+dob;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:54:37.660

> 如果我对继承的了解是正确的，那么通过访问超类，您可以默认访问它的子类。所以我想我只需要能够访问父（超）类。

不，通过访问超类，您只能访问那些被子类覆盖的子类方法。子类为自己创建的方法，即使是公共的，也不能被超类的对象访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T15:55:14.797

使用`super`函数/关键字访问父类。您可以像这样调用父方法

```
super.methodName(); 
```

要访问父构造函数，可以使用`super()`方法通过以下方式进行。

```
super(null, null, null, null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T15:56:51.263

如果一个类扩展了一个超类，它会继承它的所有成员。非`private`它可以直接访问的。

仅供参考，您可以使用`super()`构造函数来初始化字段。

```
public class AddressBook {

    public AddressBook(String fname, String lname, String email, String phone) {
        super(null, null, null, null);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T15:57:38.947

> 如果我对继承的了解是正确的，那么通过访问超类，您可以默认访问它的子类。

不，这是倒退。通过访问子类，您可以访问超类的字段，仅限于字段的可见性和终结性。您可以根据`super()`需要使用它们来访问它们。

把继承想象成一棵家谱。超类是你的父母。你的父母不能访问你的任何私人领域，但你已经从你那里继承了很多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T15:58:43.843

我看到了对什么是超类和子类的基本误解。

在我看来，您的印象是联系人的子类是 fname、lname 等？

这些被称为成员，或者在这种情况下更恰当地称为：实例成员。

子类将是扩展联系人的类，如下所示：

```
public class ContactsSubclass extends Contacts {
...
} 
```

# c++ - 静态与非静态变量 C++

> ID：15731258
> 
> 赞同：0
> 
> 时间：2013-03-31T15:52:08.987
> 
> 标签：c++, static-variables

```
class Expression
{
    private:
       ToStringDisplay* toString;
    public:
        ......
};

   // Some code
   if (toString == NULL)
   // do something 
```

当我调试时， toString 指的是一个地址，而不是 NULL。但是，如果我`static ToStringDisplay* toString;`改为声明， toString 指的是 NULL 吗？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:14:15.270

作为 C/C++ 中的标准，如果没有另外说明，静态变量总是初始化为 null。但是，对于非静态局部变量，没有这样的保证

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:19:14.007

静态成员变量根据[http://www.learncpp.com/cpp-tutorial/811-static-member-variables/](http://www.learncpp.com/cpp-tutorial/811-static-member-variables/)初始化为零，其中所有其他变量都未定义，除非您明确初始化它们，因此它们将具有任​​何随机值那是以前记忆中的。有关静态和非静态有什么区别的解释，请参见上面的链接。

# android - 如何在 PendingIntents 中使用 requestCode

> ID：15731259
> 
> 赞同：5
> 
> 时间：2013-03-31T15:52:17.167
> 
> 标签：android, android-service, alarmmanager, android-pendingintent

我正在尝试实现一个提醒应用程序。我将所有提醒详细信息都存储在 sqlite 数据库中，例如 id、title、dateInfo、timeInfo 等。

我想在适当的时候通知用户我将使用 AlarmManager 的提醒。

下面给出的步骤是否可行。

在pendentingIntents 中提供行的id 作为requestCode。然后设置一个警报，一旦触发就会调用服务。该服务将使用此 ID 从数据库中获取数据。

如果这是可行的，任何人都可以向我提供一个代码片段。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:31:45.613

您可以简单地将您的 rowId 作为额外的被调用意图。这是一个可能有帮助的代码片段：

```
Intent i = new Intent(this, YourServiceOrActivity.class);
i.putExtra("rowId", rowId);
PendingIntent pi = PendingIntent.getActivity(this, 123123, i, 0); //Notice the random requestCode '123123' as it doesn't matter, yet. 
```

您可以按如下方式设置警报：

```
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.set(AlarmManager.RTC_WAKEUP, AlarmManager.INTERVAL_DAY, pi); 
//Set the alarm to wake up the device after one day calling the pending intent 'pi'. 
```

最后，当按如下方式调用时，您可以从意图（onCreate() 例如，如果意图是一个活动）中获取 rowId：

```
Bundle extras = getIntent().getExtras();
if (extras != null) rowId = extras.getInt("rowId", 0); //Be safe 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-31T03:39:16.123

正如其他人提到的那样，我会`rowId`额外添加，*但*不要误会 - 正如[PendingIntent](https://developer.android.com/reference/android/app/PendingIntent.html#getService%28android.content.Context,%20int,%20android.content.Intent,%20int%29)文档中所写的那样，意图不同如下：

> 如果您确实需要同时激活多个不同的 PendingIntent 对象（例如用作同时显示的两个通知），那么您将需要确保它们有所不同，以便将它们与不同的待定意图。这可能是 Intent 考虑的任何 Intent 属性。filterEquals，或提供给 getActivity(Context, int, Intent, int)、getActivities(Context, int, Intent[], int)、getBroadcast(Context, int, Intent, int) 或 getService(Context, int) 的**不同请求代码**整数, 意图, int)。

因此，如果您`id`对同一行的所有意图使用相同的请求，使用不同的数据，您可能会因过时/重复的数据问题而迷失方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T15:54:50.973

根据[PendingIntent](http://developer.android.com/reference/android/app/PendingIntent.html#getService%28android.content.Context,%20int,%20android.content.Intent,%20int%29)上的文档，不使用`requestCode`该方法。`getService(...)`我不清楚它会发生什么，所以我不会以任何方式依赖它。

只需将行 ID 作为额外的 Intent 传递。

# c - 关于 C 上的 struct 的算法

> ID：15731265
> 
> 赞同：0
> 
> 时间：2013-03-31T15:52:31.423
> 
> 标签：c, struct, main

我正在尝试通过在 C 上使用 struct 来解决问题。

它应该找到 3 个值中最大的一个，如果它是素数，则添加到所有其他值。如果不只是将最大的数字返回给主函数。我找不到我做错的地方。

```
#include <stdio.h>
#include <stdlib.h>
struct q {
    int a, b, c, max;
}d;

func(struct q d1)
{
    int max1;
    max1=0;
    int w=0;
    int i;
    if (d1.a>d1.b && d1.a>d1.c)
        max1=d1.a;
    if (d1.b>d1.a && d1.b>d1.c)
        max1=d1.b;
    if (d1.c>d1.b && d1.c>d1.a)
        max1=d1.c;

    for(i=2;i<max1;i++)
    {
        if (max1%i==0)
            w=1;
    }
    if (w==0)
    {
        d1.a=d1.a+max1;
        d1.b=d1.b+max1;
        d1.c=d1.c+max1;
    }
    if (w==1)
    {
            d1.max=max1;
    }
}

int main()
{
    int i;
    for(i=0;i<1;i++)
    {
        d.max=0;
        puts("enter value of a b c:");
        scanf("%d %d %d",&d.a,&d.b,&d.c);
        func(d);
        if(d.max==0) printf("%d %d %d",d.a,d.b,d.c);
        else printf("%d",d.max);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:56:02.317

我不确定算法逻辑。但错误是——

```
func(struct q d1) 

func(d); 
```

`d1`是传递参数的副本`d`。因此，修改`d1`, 不会影响传递的参数`d`。

您实际上应该将对象的地址传递`d`给函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:12:56.560

在 func() 你必须传递结构的地址......因为如果你只传递 struct 变量，那么它的值会受到影响，直到只有那个缓冲区......

# .htaccess - .htaccess 阻止子域根目录，但仍然可以从不同目录中的另一个域访问

> ID：15731266
> 
> 赞同：1
> 
> 时间：2013-03-31T15:52:57.337
> 
> 标签：.htaccess

我希望有人可以建议这可能是一个简单的问题，但我对 .htaccess 的了解有限。

我继承了一个奇怪的文件结构，它依赖于以前安装的文件。

下面是一个 spseudo 文件结构，它反映了我在子域上的内容。

```
+site-directory
    index.html
    file.php
    another-file.php
   + other-folder
    display.php 
```

子域站点目录为：

```
/site-directory 
```

我想从以下 url 从主域访问子域：

```
/site-directory/other-folder/display.php 
```

我遇到的问题是，如果您将 www.subdomainurl.com 放在浏览器中，则会显示以前的安装。

我怎样才能停止这个并且只能通过访问子域

```
 /site-directory/other-folder/display.php 
```

我已经阻止了 robots.txt 的索引

这种情况下的最佳做法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:42:21.937

问题对我来说不是很清楚，所以我的回答是基于一些假设。

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?subdomainurl\.com$ [NC]
RewriteRule ^$ /other-folder/display.php [R=302,L] 
```

# python - 通过 TCP 套接字的 AES 加密文件传输；填充问题

> ID：15731267
> 
> 赞同：3
> 
> 时间：2013-03-31T15:53:01.700
> 
> 标签：python, sockets, encryption, tcp

我正在尝试使用带有 AES 256 的加密 TCP 套接字进行文件传输。

*   如果我传输没有加密的文件，它可以正常工作。
*   如果我向客户端或服务器发送小命令（例如“ipconfig”），则加密工作正常。
*   无论文件大小如何，我都会不断收到以下错误消息：

    ```
    DecodeAES = lambda c, e: c.decrypt(base64.b64decode(e)).rstrip(PADDING)
      File "/usr/lib/python2.6/base64.py", line 76, in b64decode
        raise TypeError(msg)
    TypeError: Incorrect padding 
    ```

我的编码和解码功能如下（`hat`变量是消息）：

```
def AESENC(hat,typ):

    BLOCK_SIZE = 32
    PADDING = '{'
    pad = lambda s: s + (BLOCK_SIZE - len(s) % BLOCK_SIZE) * PADDING
    EncodeAES = lambda c, s: base64.b64encode(c.encrypt(pad(s)))
    DecodeAES = lambda c, e: c.decrypt(base64.b64decode(e)).rstrip(PADDING)

    secret = '01234567890123456789012345678912'
    IV = 'wir&/>H54mgd9a";'

    cipher = AES.new(secret,AES.MODE_CFB,IV)

    if typ == 0:
        encoded = EncodeAES(cipher, hat)
        return encoded
    else:
        decoded = DecodeAES(cipher, hat)
        return decoded 
```

**客户端**

```
if os.path.exists(df):
    print ' found the file '
    f = open(df, 'rb')
    packet = f.read(1024)
    while packet != '':
        s.send(AESENC(packet,0)) 
        s.send(   AESENC('123XXX',0)  ) 
    s.send('123XXX')
    f.close() 
```

**服务器端**

```
f = open('/root/Desktop/Transfer.mp3','wb')
while True:
    bits =  AESENC ( conn.recv(1024) , 1 )
    while (bits):
        f.write(bits)
        bits =  AESENC ( conn.recv(1024) , 1 )
        if bits.endswith('123XXX'):
            print '[+] Transfer completed '
            break

    f.close()
    break
return 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T17:29:56.703

对您的示例代码的误解深表歉意，并感谢您添加服务器和客户端调用！

请注意，您收到的错误消息与加密无关。您可以阅读base64.py库的相关部分：错误消息表明base64数据无效。特别是，它最后没有正确填充。

有了额外的呼叫站点信息，我认为问题在于您正在加密*然后分别编码*客户端上的每个 1024 字节数据块。然后，在服务器上，您从网络读取 1024 个字节并尝试对其进行解码。但是，base64 编码会增加原始数据的长度，因此您将只读取编码形式的前 1024 个字节，这将是截断的 base64 消息（因此填充不当）。

至于如何解决，需要将base64消息全部解码为一体。因此，您要么需要计算从网络读取多少数据才能获得完整的编码块（除了可能较短的最后一个数据包之外，您可以可靠地进行计算，因为 base64 长度始终为 (length + 2) / 3 * 4），一次编码整个数据流（如果你想处理任意大小的文件，这可能是由于内存使用造成的问题），或者定义你的网络协议，以便服务器可以告诉它看到了一个完整的块，可以用base64解码。

# java - 二叉搜索树和中序遍历

> ID：15731270
> 
> 赞同：1
> 
> 时间：2013-03-31T15:53:04.557
> 
> 标签：java, binary-search-tree

我正在尝试在 Java 中快速实现二进制搜索树。具有按顺序遍历方法的最佳使用类是什么？（我听说过 TreeMap 类。但看起来该类不包含任何按顺序遍历的方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:55:55.660

使用 LinkedHashMap 以插入顺序遍历或 TreeMap 以比较顺序遍历 [http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:36:19.250

您总是可以创建自己的类，并使用所述类实现算法。

```
public class Node {
    Node leftChild;
    Node rightChild;
    int parent;

    Node(int parent) {
        this.parent = parent;
    }
} 
```

然后实现二叉搜索树类。这是非常快的，但它是为了给你一个想法。

```
public class BSTree {
Node root;

BSTree() {
    root = null;
}

public void insert(Node node, int value) {
    if (value >= node.parent) {
        if (!(node.rightChild == null)) {
            insert(node.rightChild, value);
        } else {
            node.rightChild = new Node(value);
        }
    } else if (value < node.parent) {
        if (!(node.leftChild == null)) {
            insert(node.leftChild, value);
        } else {
            node.leftChild = new Node(value);
        }
    } else {
        root = new Node(value);
    }
}

public boolean delete(Node node, int value) {
    if (root == null) {
        return false;
    } else if (value > root.parent) {
        return delete(root.rightChild, value);
    } else if (value < root.parent) {
        return delete(root.leftChild, value);
    } else {
        if (root.leftChild == null && root.rightChild == null) {
            root = null;
            return true;
        } else if (root.leftChild == null && root.rightChild != null) {
            root = root.rightChild;
            return true;
        } else if (root.leftChild != null && root.rightChild == null) {
            root = root.leftChild;
            return true;
        } else {
                            Node minRight = minNode(root.rightChild);
                            root = minRight;
                            delete(minRight, minRight.parent);
                            return true;
        }
    }
}

public Node minNode(Node node) {
    if (node.leftChild == null) {
        return node;
    } else {
        return minNode(node.leftChild);
    }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-12T05:53:50.477

TreeSet 类可能是您想要的

```
class Node implements Comparable<Node>;   // implements your Node class
TreeSet<Node> set = new TreeSet<Node>();

// after adding a bunch of nodes into set
Iterator<Node> it = set.iterator();
while(it.hasNext()){
    Node current = it.next();
    System.out.println(current); // operate on current node
}

Node first = set.first();    // smallest element in set
Node second = set.ceiling(first);    // the successor method 
```

# c++ - 为什么会崩溃？

> ID：15731273
> 
> 赞同：0
> 
> 时间：2013-03-31T15:53:40.390
> 
> 标签：c++, windows, codeblocks

小 Z 先生正在看一张纸，但没有成功地找到纸上所写数字的平方根。

帮助小Z先生找到BIG数字A的平方根。数字A最多有1000位，A的平方根永远是整数。

INPUT：标准输入的第一行包含数字0

输出：向标准输出写入数字 M，其中 M 表示数字 B 的长度（其中 B 是数字 A 的平方根），在接下来的 M 行中写入数字 B 的数字（从最高有效位开始）到最不重要的）。

输入：3 6 2 5

输出：2 2 5

解释：纸上写的数字是 625，它的平方根是 25。

我的代码：

```
#include <iostream> 
#include <cmath> 

using namespace std; 

int main() 
{ 
    int n,m,k,i; 
    int niza[1001]; 

    cin>>m; 
    for(int i=0;i<m;i++) 
    cin>>niza[i]; 

    niza[i]=k; 
    cout<<sqrt(k); 

    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:03:23.973

这很可能是因为您从未设置`k`，并且它在程序开始时包含的随机值是负数，因此`sqrt(k)`崩溃。此外，如果`m`输入大于`1000`，您将超出数组范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:55:43.527

您的程序将在以下位置崩溃：`niza[i] = k`因为`i`超出了数组的末尾。

`k`未初始化。您正在输出未初始化变量的平方根。

就像@Vilx-说的那样，您必须`m`在循环之前检查值。

此外，该`sqrt`函数不适用于数字数组，因此您必须想出一种不同的方法来根据数字计算平方根。

您将需要检查`cin`after`cin >> m`和的状态`cin >> niza[i]`。用户可以并且将输入任何内容，例如字母，这在预期数字时会导致失败。

此外，请尝试在运算符和函数名称之间放置空格。它们不会增加可执行文件的大小或速度，但使阅读和维护更容易。

# sql-server - 具有聚集唯一索引的不可为空的列。为什么需要主键？

> ID：15731276
> 
> 赞同：1
> 
> 时间：2013-03-31T15:54:01.030
> 
> 标签：sql-server, sql-server-2008, indexing, unique-constraint, clustered-index

在 SQL Server 中，我有一个**不可为空的列**，上面有一个**唯一的聚集索引**。如果我将此列设为主键，则会自动创建完全相同的索引，并且该列被识别为主键。

我理解抽象/语义的区别。

（主键标识实体，而具有此索引的任何其他列可能不会。
例如，一个人可以具有唯一的电子邮件字段，不可为空......但可以更改）

但困扰我的是**数据库引擎本身的实际差异**。

如果我只创建一个 Id 列，使其不可为空，为它创建一个唯一的聚集索引，使其标识增量，但没有主键约束，会发生什么？

主键约束在什么情况下发挥作用？

（在提出这个问题之前，我已经查看了许多相关问题，但我看到的所有答案都以抽象/理论解释结束）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T15:59:34.940

真的没有什么不同。您指定`PRIMARY KEY`传达您的意图，而不是让引擎做任何不同的事情。在构建查询计划时，优化器仍将对其所有属性使用唯一性，并且仍将对其所有属性使用聚集索引，无论您是否在技术上将其创建为`PRIMARY KEY`. 创建 时`FOREIGN KEY`，您仍然可以引用指定为唯一的列（集群或非集群）。区别仅在于元`sys.indexes.is_primary_key`数据`PRIMARY KEY`（

事实上，在很多情况下，您希望将聚集索引与`PRIMARY KEY`. 例如，如果您有一个 PK 是 GUID 的表，并且您通常针对该表运行日期范围查询，那么您最好让 PK 是非聚集的并且在自然增加的列上具有聚集索引（ datetime 列） - 既可以最大程度地减少大量插入活动的页面拆分，也可以最好地协助日期范围查询。非聚集索引非常适合查找单个 GUID。（我想提一下，因为很多人认为主键必须是集群的。不是真的。）

还需要注意的是，如果您创建一个`PRIMARY KEY`约束，然后使用创建一个具有相同名称的唯一聚集索引，则`DROP_EXISTING`该`is_primary_key`列仍将是`1`，并且对象资源管理器仍将在 下显示索引名称`Keys`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:03:09.447

这是一种场景 - 数据映射框架的大量代码查看数据库元数据（主键、外键等是什么）以确定代码的执行方式。例如[Hibernate 需要一个主键](https://stackoverflow.com/questions/8591255/hibernate-without-primary-key)。

一个典型的场景可能是`where`为更新生成一个子句。

# mysql - 日志表的Mysql设计

> ID：15731280
> 
> 赞同：2
> 
> 时间：2013-03-31T15:54:15.333
> 
> 标签：mysql, performance, innodb

我想就事件记录器的 mysql 表设计提供建议。

我们的需求： - 跟踪大量动作 - 10 000 次动作/秒 - 此时 10 亿行

我们的硬件： - 2*Xeon（系统视为 32 CPU） - 128 GB RAM - 6*600 SSD with Raid 10

我们的餐桌设计：

```
CREATE TABLE IF NOT EXISTS `log_event` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `id_event` smallint(6) NOT NULL,
  `id_user` bigint(20) NOT NULL,
  `date` int(11) NOT NULL,
  `data` bigint(20) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `id_event_2` (`id_event`,`data`),
  KEY `id_inscri` (`id_inscri`),
  KEY `date` (`date`),
  KEY `id_event_4` (`id_event`,`date`,`data`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8

ALTER TABLE `log_event`
  ADD CONSTRAINT `log_event_ibfk_1` FOREIGN KEY (`id_inscri`) REFERENCES `inscription` (`id_inscri`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

我们的问题： - 我们有一个自动增量作为主要，但它并没有真正使用。删除它有问题吗？如果我们删除它，我们将没有主键 => 如何识别一行？

*   我们想做partionning，但是用foreign似乎是不可能的？

*   我们不做批量插入。在没有索引的内存表中插入并每 5 分钟复制一次数据是个好主意吗？

你有什么优化的想法吗？你有这种系统的最佳实践吗？

谢谢 ！

弗朗索瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T08:07:42.430

关系表（关系）的主键可能有两种类型：

1.  **自然**——存在于主题区，完全确定关系表的每一行。自然主键可能很**简单**（如果仅包含一列），也可能很**复杂**（如果包含多列）。不建议在大字符串列上设置自然主键。

2.  **人工**- 特殊列，由数据库设计人员/开发人员注入以提高表性能，如果自然键很复杂，并且必须在相关表中使用（对于某些东西来说是外键），或者如果它很简单，但很大并且会产生在相关表中作为外键复制时的数据开销，或者如果搜索复杂（例如，对 ID 的 CRUD 操作`VARCHAR`可能比对`INT`ID 的操作要慢）。*可能*还有其他原因。***TL;DR*** : 人工键 - 一个特殊的列，用于完全确定关系表的每一行并提高其对 CRUD 操作的性能。

> 我们有一个自动增量作为主要，但它并没有真正使用。删除它有问题吗？如果我们删除它，我们将没有主键 => 如何识别一行？

如果您不需要将您的表引用到另一个表（作为源），那么您可能会删除人工密钥而不会产生任何后果。不过，我建议您在此表中设置任何其他内容`PRIMARY KEY`，以避免数据重复和明显性（如果重要）。

您的表本身（如果正确[***规范化***](https://en.wikipedia.org/wiki/Database_normalization)）将具有自然键作为“关键候选者”之一。它可能很复杂（由几列组成）。这是正常的。但是不要给字符串设置primary，因为`PRIMARY`总是有索引，会产生数据开销。如果是组合`INT`或“*小*”`VARCHAR`列，则属正常。

**考虑作为一个选项：** `id_event` + `id_user`+ `date`。

* * *

> 我们不做批量插入。在没有索引的内存表中插入并每 5 分钟复制一次数据是个好主意吗？

这不是一个坏主意。但这不是一个好主意，直​​到它经过适当的测试。在实际使用之前尝试执行负载测试。

如果您不`MEMORY`向其他人引用表格，那么您仍然可以将其与任何其他`InnoDB`表格联接。但是您将失去`InnoDB`功能（[***参照完整性***](http://en.wikipedia.org/wiki/Referential_integrity)）。如果父表`ON DELETE CASCADE ON UPDATE CASCADE`的丢失不是问题，那么它可能会完成。至于我，`InnoDB`在你的情况下切换表引擎并没有那么慢。

# model-view-controller - joomla 控制器是如何工作的？

> ID：15731281
> 
> 赞同：5
> 
> 时间：2013-03-31T15:54:17.903
> 
> 标签：model-view-controller, joomla

我正在努力理解如何从 joomla 组件调用子控制器。控制器文件夹中要放置什么？

我有我的组件的入口点，例如-

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// require helper file
JLoader::register('TieraerzteHelper', dirname(__FILE__) . DS . 'helpers' . DS . 'my_helper.php');

// import joomla controller library
jimport('joomla.application.component.controller');

$controller = JController::getInstance('MyController');  

// Get the task
$jinput = JFactory::getApplication()->input;
$task = $jinput->get('task', "", 'STR' );

// Perform the Request task
$controller->execute($task);

// Redirect if set by the controller
$controller->redirect(); 
```

那么如果我想调用一个控制器，它放在控制器文件夹中，我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T18:35:25.477

你做一个`task=controller.function`

举个例子：你想调用`MycomponentControllerFoo`in /controllers/foo.php 并执行函数`bar()`。您可以使用以下 URL 来调用它：

```
index.php?option=com_mycomponent&task=foo.bar 
```

或者，您可以使用包含隐藏任务字段的表单。

# javascript - 在 Javascript 中显示数量

> ID：15731285
> 
> 赞同：1
> 
> 时间：2013-03-31T15:54:43.983
> 
> 标签：javascript

当我的按钮被点击时，我试图在 JavaScript 中显示价格，但它只是向我显示我的警报。谁能告诉我哪里出错了？这是我的功能：

```
function prompttotalCost() {
    var totalCost;
    var costPerCD;
    var numCDs;
    numCDS = prompt("Enter the number of Melanie's CDs you want to buy");
    if (numCDS > 0) {
        totalCost = totalCost + (costPerCD * numCDs);
        alert("totalCost+(costPerCD*numCDs)");
        totalCost = 0;
        costPerCD = 5;
        numCDs = 0;
    } else {
        alert("0 is NOT a valid purchase quantity. Please press 'OK' and try again");
    } // end if
} // end function prompttotalCost 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:59:12.180

问题是这`numCDs`是一个字符串，而不是一个数字，因为`prompt`返回一个字符串。例如，您可以使用[`parseInt`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)将其转换为数字：

```
numCDS = parseInt(prompt("Enter the number of Melanie's CDs you want to buy")); 
```

接下来的事情：你没有`totalCost`在使用它之前分配一个值——这很糟糕。更改`var totalCost;`为`var totalCost = 0;`或更改`totalCost = totalCost + (costPerCD * numCDs);`为`totalCost = (costPerCD * numCDs);`。

此外，在您的`alert`调用中，您将要作为代码执行的内容放入字符串中。改变

```
alert("totalCost+(costPerCD*numCDs)"); 
```

像这样：

```
alert("totalCost is "+totalCost); 
```

# c++ - C++ 保持抽象类型的引用/指针

> ID：15731289
> 
> 赞同：2
> 
> 时间：2013-03-31T15:55:04.073
> 
> 标签：c++

我是 C++ 新手，这个问题可能看起来很无聊，因为我只是一个 Java/Actionscript3，而且我以前从未处理过与内存相关的事情。

无论如何，至于我遇到的问题：场景是一个抽象类（所以我可以从中派生并拥有多个场景，例如 MainScene 等）

我想要 SceneManager 做的是有一个指向所选场景（curSc）的指针/引用然后我会像这样设置场景： setScene(&someScene)

但据我所知，要拥有一个指针，我还必须像这样初始化它： curSc = new Scene; 但它不会让我这样做，因为 Scene 是一个抽象类..

```
class Scene {

public:
    Scene(void){}
    virtual ~Scene(void){}
    virtual void update() = 0;
    virtual void render() = 0;
};

class SceneManager {

public:
    SceneManager(void);
    ~SceneManager(void);
    void setScene(Scene *sc);
    Scene* curSc;
} 
```

到目前为止，在我看来，在这种情况下使用指针是错误的，它不会起作用..但我很想知道如何实现我试图在这里获得的功能

非常感谢你

**按要求编辑：** 这就是我尝试使用它的方式：

首先，我有一个名为 GameScene 的派生类，它是：

```
class GameScene : public Scene 
{
public:
    GameScene(void);
    void render();
    void update();
} 
```

在我的 main() 函数中，我有：

```
GameScene gamescene;
ScreenManager manager;

manager.setScene(&gamescene); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T15:59:09.350

你需要一个具体的场景派生类：

```
class MyScene: public Scene {

public:
   MyScene(void){}
   virtual ~MyScene(void){}
   virtual void update();
   virtual void render();
}; 
```

并且 void setScene(Scene *sc) 将是：

```
void setScene(Scene *sc)
{
  curSc = (Scene*)sc;
} 
```

在这种情况下，sc 将是 MyScene 指针。抽象类实例（即接口）不能被创建，Scene在这里只是一个接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:10:19.790

确切地。你不能做

```
curSc = new Scene 
```

因为它是抽象的。如果你真的想声明一个实例，`Scene`那么让它成为非抽象的。即实现所有方法。

**或者**（我认为这是您打算做的）创建一个继承`Scene`并实现所有虚拟方法的类。

```
class View : public Scene {

public:
   View(){}
   virtual ~View(void){}
   virtual void update();
   virtual void render();
}; 
```

并实现虚拟方法，如

```
void View::update() {
//
}

void View::render() {
//
} 
```

然后您可以将 setScene 实现为

```
void SceneManager::setScene(Scene *sc)
{
  curSc = sc;
} 
```

并称它为

```
SceneManager smag;
Scene *nsc = new View;
smag.setScene(nsc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:14:42.623

在这里使用指针并没有错。但与引用不同的是，指针敦促其用户考虑`NULL`. 这就是警告。参考也可以参考`NULL`，但增加对它的防御会导致你走向[“黑暗面”](http://www.gotw.ca/conv/002.htm)。因此，假设引用将引用活动对象是合理的，从这个意义上说，引用比指针更好。

现在，如果您真的-真的想保留引用，您可以使用就地构造技术，因为您可以通过构造函数（重新）分配引用：

```
class SceneManager {

public:
    SceneManager(Scene& sc) : curSc(sc) {}
    ~SceneManager(void);
    SceneManager& setScene(Scene &sc) {
        SceneManager* cheatCompiler = new(this) SceneManager(sc);
        return *cheatCompiler;
    }
    Scene& curSc; 
} 
```

请注意，这是一种古怪的东西。由于编译器总是试图超越我们，我不能保证它在所有情况下都能正常工作。

也就是说，我仍然建议您使用指针。如果你不想一直检查 NULL，你可以实现类似[Null Object Pattern](http://en.wikipedia.org/wiki/Null_Object_pattern)的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T16:25:22.137

您应该使用智能指针，并且不要公开成员变量。例子：

```
class Scene {
public:
    virtual ~Scene(){}
    virtual void update() = 0;
    virtual void render() = 0;
};

class MyScene : public Scene {
public:
    virtual void update () { /*...*/ }
    virtual void render () { /*...*/ }
};

class SceneManager {

public:
    SceneManager();
    ~SceneManager();
    void setScene(const std::shared_ptr<Scene> & sc) {
       curSc = sc;
    }
private:
    std::shared_ptr<Scene> curSc;
};

void someProc () {
    std::shared_ptr<Scene> sc = std::make_shared<MyScene> ();  
    auto manager = std::make_shared<SceneManager> ();
    manager->setScene (sc);
    // ...
} 
```

如果没有智能指针，这看起来像（但如果不再需要它们，请记住`delete`创建的对象）：`new`

```
class Scene {
public:
    virtual ~Scene(){}
    virtual void update() = 0;
    virtual void render() = 0;
};

class MyScene : public Scene {
public:
    virtual void update () { /*...*/ }
    virtual void render () { /*...*/ }
};

class SceneManager {

public:
    SceneManager();
    ~SceneManager();
    void setScene(Scene * sc) {
       curSc = sc;
    }
private:
    Scene * curSc;
};

void someProc () {
    Scene * sc = new MyScene;
    SceneManager * manager = new SceneManager;
    manager->setScene (sc);
    // ...
} 
```

# javascript - jQuery FancyBox YouTube 视频不起作用

> ID：15731290
> 
> 赞同：0
> 
> 时间：2013-03-31T15:55:11.527
> 
> 标签：javascript, jquery, youtube, fancybox, fancybox-2

我有一种情况，我无法修改锚标记的 HTML 代码，但“href”属性除外。因此，将类添加到锚标记不是一种选择。

HTML 标记如下：

```
<a href="http://www.youtube.com/watch?v=#########&amp;autoplay=1"></a> 
```

为了区分这个链接和其他链接，我在 jQuery 代码中添加了一个基于“href”的选择器。

代码如下：

```
(function ($) { 

  $('a[href*="youtube"]').fancybox({
            'padding' : 0,
            'type' : 'swf',
            'href' : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
            'swf' : { 'wmode' : 'transparent', 'allowfullscreen' : 'true' }
            });
e.preventDefault();

})(jQuery); 
```

这似乎根本不起作用。谁能告诉我哪里出错了？我正在使用 Drupal，因此我在顶部添加了部分以启用“$”。

我在控制台中看不到任何错误，页面只是直接导航到 YouTube 页面，没有 JavaScript 干预。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:49:52.233

```
adding a class to the anchor tag is not an option 
```

这不一定是真的，因为您总是可以通过 jQuery 添加类

```
$('a[href*="youtube"]').addClass("fancybox") 
```

无论如何，就我个人而言，我不再喜欢使用该`swf`模式来播放 youtube 视频，而是`iframe`使用模式；这使它们更易于处理和跨平台兼容（包括 iOS）

我要做的是，使用以下`.each()`方法：

*   使用javascript将每一个转换`href`为格式`embed``.replace()`
*   将每个锚绑定到 fancybox
*   `href`使用 fancybox `href`API 选项设置新的转换

这是适用于 fancybox v1.3.4 或 v2.x 的代码：

```
(function ($) {
  $(document).ready(function(){
    $('a[href*=youtube]').each(function () {
        // convert youtube swf href to embed for iframe
        var thisHref =  this.href
                       .replace(new RegExp("watch\\?v=", "i"), 'embed/')
                       .replace(new RegExp("&", "i"), '?');
        // bind fancybox to each anchor
        $(this).fancybox({
            "padding" : 0,
            "type" : "iframe",
            // add trailing parameters to href (wmode)
            "href" : thisHref + "&amp;wmode=opaque"
        }); // fancybox
    }); // each
  }); // ready
})(jQuery); 
```

**请注意**，我添加了`wmode=opaque`，否则关闭按钮将位于 youtube 视频后面。

请参阅版本 1.3.4 的**[JSFIDDLE](http://jsfiddle.net/ZHdaR/)** ... 或**[v2.1.4](http://jsfiddle.net/yZWv3/)**的 JSFIDDLE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:01:12.293

您错过了`doc ready`闭包内的处理程序，并且不需要`e.preventDefault()`：

```
(function ($) { 
   $(function(){
     $('a[href*="youtube"]').fancybox({
        'padding' : 0,
        'type' : 'swf',
        'href' : this.href.replace(/watch?v=/gi, 'v/'),
        'swf' : { 'wmode' : 'transparent', 'allowfullscreen' : 'true' }
     });    
  });
})(jQuery); 
```

# c - 人脸检测码查询

> ID：15731296
> 
> 赞同：1
> 
> 时间：2013-03-31T15:55:27.810
> 
> 标签：c

有人可以解释以下代码中发生了什么吗？

```
if( strncmp( argv[i], cascade_opt, cascade_opt_len) == 0 )
                cascade_name = argv[i] + cascade_opt_len; 
```

我的猜测是这两行检查用户键入了哪种级联（因此为 argv[i]），然后如果第一个 cascade_opt_len 字符相同，它将连接 argv[i] 和 cascade_opt_len。但是，这对我来说似乎没有意义，因为为什么要将名称与整数连接起来？

还，

```
if( argv[i][nested_cascade_opt_len] == '=' ) 
```

我一直认为 argv[i] 最多可以是一个一维数组，它记录用户输入的内容。但不知何故，这条线看起来好像 argv[i] 可以是一个二维数组。任何人都可以启发我了解它的实际含义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:13:16.763

```
if( strncmp( argv[i], cascade_opt, cascade_opt_len) == 0 )
        ^              ^             ^ 
```

这可能会检查 argv[i] 常量的第一个子字符串是否等于 `cascade_opt`并且`cascade_opt_len`长度为`cascade_opt`

在下一行：

```
 cascade_name = argv[i] + cascade_opt_len;
              ^ points to string after sub string in `cascade_opt` 
```

这只是一种解析字符串的方法：

为了更清楚地了解您的代码中发生了什么，我编写了一个代码：

```
int main (int argc, char* argv[]){
    char *cascade_name = NULL;
    char* cascade_opt = "nameIs";   
    int     cascade_opt_len = strlen(cascade_opt);
    int i = 1;
    if( strncmp( argv[i], cascade_opt, cascade_opt_len) == 0 )
        cascade_name = argv[i] + cascade_opt_len;

    printf("\ncascade_name is: %s ", cascade_name);

    printf("\n");

    return 0;
} 
```

让我们执行它（但请注意代码中的 i=1）：

```
~$ ./a.out  nameIsGrijesh

cascade_name is: Grijesh 
```

现在在 if 语句`cascade_name` 指向 argv[1] 中的最后一个子字符串“Grijesh”之后。

好的，我使用循环扩展此代码以解析每个输入命令行参数：

```
int main (int argc, char* argv[]){
    char *cascade_name = NULL;
    char* cascade_opt = "nameIs";   
    int     cascade_opt_len = strlen(cascade_opt);
    int i = 1;
    for(i=1; i < argc; i++){
        if( strncmp( argv[i], cascade_opt, cascade_opt_len) == 0 ){
            cascade_name = argv[i] + cascade_opt_len;
            printf("\ncascade_name is: %s ", cascade_name);
        }
    }
    printf("\n");   
    return 0;
} 
```

现在看看什么是代码运行：

```
grijesh@hp:~$ ./a.out nameIsGrijesh nameIsB.rabbit mynameIsXX nameIsStackOverflow

cascade_name is: Grijesh 
cascade_name is: B.rabbit 
cascade_name is: StackOverflow 
```

你明白为什么`XX`不打印吗？

**编辑**

好的，`== '='`我的第三个代码将有所帮助：尝试理解输出：

```
int main (int argc, char* argv[]){
    char *cascade_name = NULL;
    char* cascade_opt = "nameIs";   
    int   cascade_opt_len = strlen(cascade_opt);
    int   nested_cascade_opt_len = strlen(cascade_opt);
    int i = 1;
    for(i=1; i < argc; i++){
        if( strncmp( argv[i], cascade_opt, cascade_opt_len) == 0 ){
            cascade_name = argv[i] + cascade_opt_len;
            printf("\ncascade_name is: %s ", cascade_name);
        }
        if( argv[i][nested_cascade_opt_len] == '=' ){
            cascade_name = argv[i] + nested_cascade_opt_len + 1;
            printf("\nfom second potion is: %s ", cascade_name);
        }
    }
    printf("\n");   
    return 0;
} 
```

输出是：

```
:~$ ./a.out  nameIsGrijesh nameIsB.rabbit myname=XX nameIsStackOverflow

cascade_name is: Grijesh 
cascade_name is: B.rabbit 
fom second option is: XX 
cascade_name is: StackOverflow 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:01:55.387

对于您的第一个示例，它正在查看 argv 的项目“i”，并询问它是否以包含在`cascade_opt`. 如果是，则设置`cascade_name`为余数。`cascade_opt`因此，例如，如果包含 ，`--cascade=`并且 argv[i] 包含`--cascade=foo', cascade_name would end up pointing to`foo`。

对于您的第二个问题，可以将其`argv`视为 char*[]。一旦您选择了单个 char*，您就可以使用 [] 来索引字符串中的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:00:33.523

```
cascade_name = argv[i] + cascade_opt_len; 
```

`argv`是类型`char **`。索引它意味着它`argv[i]`是类型的——即`char *`一个字符串。将整数添加到 a`char *`会使指针前进这么多字符。这可能更清楚地写成这样：

```
cascade_name = &argv[i][cascade_opt_len]; 
```

它修剪第*i*个参数的第一个`casecade_opt_len`字符并将剩余的字符串分配给.*`argv[i]``cascade_name`*

 ** * *

```
if( argv[i][nested_cascade_opt_len] == '=' ) 
```

`argv`是一个字符串数组，`argv[i]`第*i*个参数也是，并且`argv[i][nested_cascade_opt_len]`是 index 处的字符`nested_cascade_opt_len`。这将检查该字符是否为等号。*

# hibernate - JPA (Hibernate) + Spring：处理违反唯一约束

> ID：15731297
> 
> 赞同：3
> 
> 时间：2013-03-31T15:55:47.290
> 
> 标签：hibernate, jpa, unique-constraint

我有一个具有唯一字段的实体 A，该字段基本上定义了实体，这意味着它相等，然后实体也完全相同。

第二点是，如果违反了该约束，我们绝不会说例外。这意味着完全可以预期用户会尝试输入重复项。

在重复的情况下，应用程序应该默默地选择已经存在的实体。我现在的问题是我应该做什么，尤其是在保存包含 As 列表的实体时。

*   抓住异常并从那里开始

我不确定这是否容易实现，因为 DataIntegrityViolationException 不包含任何易于处理的信息，例如在 Cascaded persist 的情况下受影响的实体！！！

*   保存前检查（持久化）并将提交的实体替换为现有实体（设置了 id）

我更喜欢这个，但是有相当大的开销，因为在每次插入之前可能有多个选择（存在检查）。

更好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T16:17:31.167

对于选项 1），您正在寻找类似[http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)但该命令在 JPA/hibernate 级别没有等效项（我不要认为那是 ANSI SQL）。试图捕捉异常并“从那里开始”是一个坏主意，因为事务将被回滚，您将不得不经历许多问题才能使其表现得像您想要的那样。

对于选项 2)，我认为这是标准的 JPA/hibernate 实践，您不仅需要查询并可能从 DB 加载实体，还需要将更改从瞬态对象复制到加载的对象，然后让 JPA 保存你的更新。这很麻烦，您必须小心您所依赖的任何级联操作，因为您可能需要避免用瞬态对象覆盖持久对象。这是一个复杂的问题，JPA/Hibernate 没有很好的解决方案。

# php - 通过 Web 应用程序生成 Aterisk/Freeswitch SIP 用户

> ID：15731313
> 
> 赞同：1
> 
> 时间：2013-03-31T15:57:39.710
> 
> 标签：php, web-services, node.js, asterisk, freeswitch

我对 Asterisk/freeswitch 与在 PHP、Node.js 或任何其他服务器端语言上运行的 Web 应用程序的集成非常陌生。我想要实现的是在 Asterisk/Freeswitch conf 文件或数据库文件中创建一个新的 SIP 用户在 Web 应用程序中。我如何在同一台服务器上托管的这些 Asterisk/Freeswitch PBX 软件上修改/写入配置文件或 SIP 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:42:55.057

您可以通过多种方式实现您的目的。也许最简单直接的方法是在 sip.conf（星号）中添加几行描述新用户的行，如此处[所述](http://doxygen.asterisk.org/trunk/Config_sip.html)。然后你只需要重新启动星号（或者更好地通过 Asterisk cli 调用重新加载配置。这是一个可能有用的链接：[Asterisk php cli](http://sourceforge.net/projects/asteriskcmd/)。对于 freeswitch 是一样的，但你必须按照指定的 xml 格式输入新用户在[这个页面](http://wiki.freeswitch.org/wiki/XML_User_Directory_Guide)中。也许如果你在数据库上使用星号或freeswitch，它会更简单：只需在数据库中添加一行！

请务必验证用户输入以仅创建有效用户（阻止 xml 标记、哈希、; 和其他危险符号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T23:39:07.340

Asterisk 和 freeswitch 完全不同。

对于星号，您可以使用星号实时架构（ARI），它只是描述数据库中的表。

[http://www.voip-info.org/wiki/view/Asterisk+RealTime+Sip](http://www.voip-info.org/wiki/view/Asterisk+RealTime+Sip)

不幸的是，您不能“只添加用户”，您需要了解 voip 基本知识。

您还可以编写文本配置文件，例如如何执行此操作，请参见 Freepbx.org 项目。

# variables - Javascript - 用变量定义函数

> ID：15731319
> 
> 赞同：0
> 
> 时间：2013-03-31T15:58:25.493
> 
> 标签：variables, if-statement, javascript

假设我有以下代码

```
var $variable = $('<li/>', { 
    tabindex: 0,
    click: function() {
        //more code in here
    }
} 
```

是否可以`click:`用变量定义？请记住，它已经在一个变量中，并且还将包含一个 if 语句，如下所示：

```
if(condition) {
    var functiontype = 'click';
}
else {
    var functiontype = 'hover';
}
var $variable = $('<li/>', { 
    tabindex: 0,
    functiontype: function() {
        //more code in here
    }
} 
```

我试过这样做，但没有奏效。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:16:56.580

```
if(condition) {
    var functiontype = 'click';
}
else {
    var functiontype = 'hover';
}

var options = {};
options["tabindex"] = 0;
options[functiontype] = function(){
    // your code
}
var $variable = $('<li/>', options); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:00:34.723

你可以做相反的事情：

```
var $variable = $('<li/>', { 
    tabindex: 0
};
$variable[condition?'click':'hover'] = function(){
   // the code here
} 
```

# android - java.lang.VerifyError 在 2.2.2 但不是 2.3.3

> ID：15731320
> 
> 赞同：3
> 
> 时间：2013-03-31T15:58:38.030
> 
> 标签：android

我正在为 minSDK 8 和 targetSDK 11 构建。

```
<uses-sdk android:minSdkVersion="8"
          android:targetSdkVersion="11"/> 
```

我在logcat中得到这个：

```
WARN/dalvikvm(2114): VFY:  rejected Lcom/examplecompany/project/TidalStreams/Data/gTidalStreamsHourlyHW;.<clinit> ()V

WARN/dalvikvm(2114): Verifier rejected class Lcom/digitaliridium/tides/TidalStreams/Data/gTidalStreamsHourlyHW; 
```

在其他几个设备中，我有两个欲望；一个运行 2.2.2，一个运行 2.3.3。

在 2.2.2 上，我`java.lang.VerifyError`在这一行得到一个：

```
public void onCreate(){
    ...

    gTidalStreamsHourlyHW.init();

    ...
} 
```

这里是`init()`方法。这是一个非常普通的类的唯一方法。

```
public static void init(){

    int insertPosition;
    System.arraycopy(gTidalStreamHourlyHW1, 0,  gTidalStreamHourlyHW, 0, gTidalStreamHourlyHW1.length);

    insertPosition = gTidalStreamHourlyHW1.length;
    System.arraycopy(gTidalStreamsHourlyHW2.gTidalStreamHourlyHW1, 0,  gTidalStreamHourlyHW, insertPosition, gTidalStreamsHourlyHW2.gTidalStreamHourlyHW1.length);

    insertPosition += gTidalStreamsHourlyHW2.gTidalStreamHourlyHW1.length;
    System.arraycopy(gTidalStreamsHourlyHW3.gTidalStreamHourlyHW1, 0,  gTidalStreamHourlyHW, insertPosition, gTidalStreamsHourlyHW3.gTidalStreamHourlyHW1.length);

    ... 
```

`gTidalStreamsHourlyHW`是一个大数据数组，大约 350k。我不得不将它拆分为多个文件以绕过 Java 的 64k 编译单元限制。

该`init`方法简单地使用 System.arraycopy() 将这些多个静态数组连接成一个。

我尝试将 minSDK 级别降低到 7，但问题是一样的。

它在运行 2.2.2 的模拟器中也失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:45:43.083

我是 Android 的忠实粉丝，但有时它是站不住脚的 :(

错误中有一条线索表明该错误与静态初始化程序有关；这是`<clinit>`“方法”名称：

```
WARN/dalvikvm(2114): VFY:  rejected Lcom/examplecompany/project/TidalStreams/Data/gTidalStreamsHourlyHW;.<clinit> ()V 
```

这表明错误可能与`static { ... }`初始化程序块或某些`static`类成员的初始化有关。

我的班级有一个静态数组初始化程序：

```
 public static shcTidalStreamPointStruct[] gTidalStreamHourlyHW1  = new shcTidalStreamPointStruct[]{

            new shcTidalStreamPointStruct("000A",48.766667,-10.066667,51.116667,1.316667,"89",95,0.8,0.4,125,0.9,0.4,172,0.7,0.4,216,0.7,0.4,242,0.8,0.4,261,0.9,0.4,281,0.7,0.4,305,0.7,0.4,339,0.6,0.3,14,0.6,0.3,58,0.6,0.3,71,0.7,0.3,91,0.7,0.4,"GB",0),
            new shcTidalStreamPointStruct("000B",49.533333,-9.983333,51.116667,1.316667,"89",122,0.6,0.3,166,0.8,0.4,192,0.9,0.4,213,0.9,0.5,239,0.9,0.5,255,0.9,0.5,286,0.9,0.4,330,0.7,0.4,9,0.9,0.4,38,1,0.5,52,1.1,0.5,68,0.9,0.5,104,0.6,0.3,"GB",0),
            new shcTidalStreamPointStruct("000C",48.898333,-9.163333,51.116667,1.316667,"89",102,0.4,0.2,118,0.6,0.3,172,0.7,0.4,197,0.7,0.4,212,0.7,0.4,250,0.7,0.4,283,0.5,0.3,321,0.3,0.2,337,0.5,0.3,13,0.7,0.4,33,0.7,0.4,54,0.5,0.3,98,0.4,0.2,"GB",0), 
```

有 283 个元素。

我仅使用此代码构建了一个测试项目，并验证了在 2.2 及以下版本中，它失败了。在 2.3 及更高版本上，它可以工作。

问题是初始化程序中的行数！我一次取出一条线，直到剩下 197 条线并且它有效！

除了 Java 的 64k 编译单元限制之外，Android 类加载器中还有一些与静态初始化的行数/大小相关的未记录限制（或错误）。

解决方法是进一步拆分我的文件以减少行数。胡说八道....

# php - bind_result 上耗尽的字节的允许内存大小

> ID：15731331
> 
> 赞同：0
> 
> 时间：2013-03-31T15:59:23.613
> 
> 标签：php, mysql

我有一个由联合较小查询构建的动态查询。我使用联合是因为我需要从一个大列表中的几个表中获取数据。这些表有很多共同点，但我仍然需要单独表中的数据。因此，我认为这个解决方案似乎是最好的解决方案。到目前为止效果很好，但今天我添加了更多查询，现在它坏了，它给了我这个错误：

`Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 150994936 bytes)`

错误指的是这个函数：

```
function selectResults($stmt){
    $parameters = array();
    $results = array();

    $meta = $stmt->result_metadata();

    while ( $field = $meta->fetch_field() ) {   
     $parameters[] = &$row[$field->name]; 
    }

    //------THIS IS WHERE THE ERROR IS------
    call_user_func_array(array($stmt, 'bind_result'), $parameters);
    //--------------------------------------

    while ( $stmt->fetch() ) {
      $x = array();
      foreach( $row as $key => $val ) {
         $x[$key] = $val;
      }
      $results[] = $x;
    }

    return $results;

} 
```

该函数是这样调用的：

```
$mysqli = new mysqli('localhost', 'username', 'pass', 'db');
$stmt = $mysqli -> prepare("some query");
$stmt -> execute();
$results = selectResults($stmt);
$stmt -> close();
$mysqli -> close(); 
```

查询大概1500字，是不是太多了？

将所有表放在同一个表中并仅使用一个查询即可解决此问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:24:04.330

我尝试将最新的子查询与另一个子查询一起使用，但它仍然给了我错误。所以我认为新的子查询是问题而不是子查询的数量。新的子查询有一个 mediumtext 字段，而另一个有一个 varchar。我尝试将 mediumtext 切换为 varchar，现在它可以工作了。我没有理由将它用作中文本，所以这解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:04:57.707

尝试增加你的 php 配置中的 memory_limit。

# css - 如何将 Xpath 转换为 CSS

> ID：15731332
> 
> 赞同：5
> 
> 时间：2013-03-31T15:59:30.963
> 
> 标签：css, xpath, css-selectors, html-parsing, jsoup

我的 xpath 是：`/html/body/div/table/tbody/tr[2]/td[4]`

我需要一个 CSS 才能在 jsoup 选择器中使用它。

[我在 xpath 和 css: here](https://www.simple-talk.com/dotnet/.net-framework/xpath,-css,-dom-and-selenium-the-rosetta-stone/)之间找到了一个比较，并且在他们的示例 ( `Second <E> element anywhere on page`) 中说我做不到。Xpath `xpath=(//E)[2]`CSS `N\A`。

也许我找不到我要找的东西。有任何想法吗？

这是我要解析的html（我需要获取值：`1`和`3`）：

```
<div class=tablecont>
    <table width=100%>
        <tr>
            <td class=header align=center>Panel Color</td>
            <td class=header align=center>Locked</td>
            <td class=header align=center>Unqualified</td>
            <td class=header align=center>Qualified</td>
            <td class=header align=center>Finished</td>
            <td class=header align=center>TOTAL</td>
        </tr>
        <tr>
            <td align=center>
                <div class=packagecode>ONE</div>
                <div>
                <div class=packagecolor style=background-color:#FC0;></div>
                </div>
            </td>
            <td align=center>0</td>
            <td align=center>0</td>
            <td align=center>1</td>
            <td align=center>12</td>
            <td align=center class=rowhead>53</td>
        </tr>
        <tr>
            <td align=center>
                <div class=packagecode>two</div>
                <div>
                    <div class=packagecolor style=background-color:#C3F;></div>
                </div>
            </td>
            <td align=center>0</td>
            <td align=center>0</td>
            <td align=center>3</td>
            <td align=center>42</td>
            <td align=center class=rowhead>26</td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T16:09:41.150

虽然`(//E)[2]`无法用 CSS 选择器表示 like 表达式，`E[2]`但可以使用`:nth-of-type()`伪类模拟表达式 like：

```
html > body > div > table > tbody > tr:nth-of-type(2) > td:nth-of-type(4) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-24T17:43:04.897

对我有用。

```
//Author: Oleksandr Knyga
function xPathToCss(xpath) {
    return xpath
        .replace(/\[(\d+?)\]/g, function(s,m1){ return '['+(m1-1)+']'; })
        .replace(/\/{2}/g, '')
        .replace(/\/+/g, ' > ')
        .replace(/@/g, '')
        .replace(/\[(\d+)\]/g, ':eq($1)')
        .replace(/^\s+/, '');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:11:51.607

您是否正在寻找这样的东西：

[http://jsfiddle.net/YZu8D/](http://jsfiddle.net/YZu8D/)

```
.tablecont tr:nth-child(2) td:nth-child(4) {background-color: yellow; }
.tablecont tr:nth-child(3) td:nth-child(4) {background-color: yellow; } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-11-28T12:22:42.970

应该学习如何编写 css 选择器，但为了快速修复，请尝试：[cssify](http://cssify.appspot.com/)

例如，我把你的 xpath 和它吐出来：`html > body > div > table > tbody > tr:nth-of-type(2) > td:nth-of-type(4)`

试试看。

# magento - Magento - 时事通讯订阅新字段不保存

> ID：15731342
> 
> 赞同：1
> 
> 时间：2013-03-31T16:00:27.510
> 
> 标签：magento, observers

我正在尝试向时事通讯订阅表单添加一个新字段 (subscriber_type)。我已经设置了我的观察者，它正在正常工作和触发（newsletter_subscriber_save_before）：

```
<?php
class Mynamespace_Enhancednewsletter_Model_Observer {
    public function saveBefore($observer){
        $subscriber = $observer->getEvent()->getSubscriber();
        $type = Mage::app()->getRequest()->getParam('type'); // this contains my new data correctly
        $subscriber->setSubscriberType($type);
        return $this;
    }
} 
```

我还将该字段添加到数据库中。上面的代码添加了新的订阅者，但没有添加订阅者类型。

谁能看到我哪里出错了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T09:48:51.010

伙计，这个令人沮丧..但答案很简单：

Magento 缓存表描述，因此请确保在向数据库添加新字段后清除缓存。

感谢 MJA 的回答： [https ://stackoverflow.com/a/10550476/491055](https://stackoverflow.com/a/10550476/491055)

# php - 使用 mimetype 'image/png' 而不是 jpg 发送的图像

> ID：15731344
> 
> 赞同：0
> 
> 时间：2013-03-31T16:00:29.683
> 
> 标签：php, image, png, jpeg, mime-types

我有一个图片库，它使用目录中的 php 图像（jpegs）动态加载缩略图。

在一个特定的画廊中，缩略图以标题“image/png”而不是“image/jpeg”加载，并显示为 1x1 PNG 图像，而不是它们应该是的 370x370px 完整缩略图。

我使用了 php gd 库来生成缩略图，它们在 99% 的其他情况下都有效，只是不是这种特殊情况。

我无法辨别这些图像与网站上的任何其他图像之间有什么特别的区别，我真的很难过。

在 chrome 中查看资源时，查看任何图像时都会显示以下内容：

```
filename.jpg

Dimensions 1 × 1
File size 67 B
MIME type image/png
URL http://mydomain.com/img.jpg 
```

任何帮助将不胜感激为什么这些图像是用 png mime 类型而不是 jpeg 发送的。

这是我正在使用的图像调整器类：

[http://pastebin.com/mMwMTKSF](http://pastebin.com/mMwMTKSF)

通过 load、resizeLong、crop 和 save 方法（按此顺序）生成缩略图。

我只能猜测原始图像中的图像类型是错误的，但我什至已经在 irfanview 中手动制作了一些拇指无济于事，它们仍然以 PNG 格式发送，我不知道为什么......

我可以根据需要粘贴任何代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:24:41.227

我刚刚想通了。经过多年的困惑 - 这纯粹是因为我的浏览器上运行了一个广告拦截器，它正在用 1x1px PNG 替换图像。

我使用的画廊的名称是“广告”，因为它展示了我做过的一些广告。

你懂得越多。

对于遇到这种奇怪现象的其他人，这是作为图像发送的：

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg== 
```

这样任何现在将其输入谷歌的人都会看到这篇文章并意识到他们是多么愚蠢。

# javascript - 为什么我的自定义对象似乎不存在我的公共方法？

> ID：15731355
> 
> 赞同：1
> 
> 时间：2013-03-31T16:01:21.247
> 
> 标签：javascript, jquery, oop

我一直在试图弄清楚为什么我的自定义 jQuery 插件对象似乎不存在我的公共方法。

我创建了一个简化版本的 jQuery 插件，其中包含一个私有变量和两个公共方法来访问/修改私有变量。我在网上看过，但结果不是很清楚，或者我的搜索技巧很糟糕。

它一直在说“ **TypeError: myObject.getMyValue is not a function** ”，有人知道我做错了什么，或者有更好的解决方法的建议吗？

下面是基本对象类，但可以在 jsFiddle 链接上找到正确的代码示例。

```
(function ($) {

    var MyClass = function (element) {

        var myValue = 'Hello World';

        this.getMyValue = function() {
            return myValue;
        };

        this.setMyValue = function(value) {
            myValue = value;
        };

        return this;
    };

    $.fn.myPlugin = function() {
        return this.each(function(key, value){
            if ($(this).data('myclass')) {
                return $(this).data('myclass');
            }

            var instance = new MyClass(this);
            $(this).data('myclass', instance);
            return instance;
        });
    };

})(jQuery);

var myObject = $('#test').myPlugin();

alert(myObject.getMyValue());
myObject.setMyValue('Goodbye World');
alert(myObject.getMyValue()); 
```

[http://jsfiddle.net/hZExb/4/](http://jsfiddle.net/hZExb/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:10:21.487

因为您要返回的结果`this.each()`是`this`. 在外部创建一个变量`this.each()`并在完成后返回它`this.each`。

[jsFiddle](http://jsfiddle.net/Tyriar/7BgsB/)

```
$.fn.myPlugin = function() {
    var instance;
    this.each(function(key, value){
        if ($(this).data('myclass')) {
            return $(this).data('myclass');
        }

        instance = new MyClass(this);
        $(this).data('myclass', instance);
    });
    return instance;
}; 
```

* * *

如果你想返回一个 MyClass 的数组，如果你的 jQuery 对象是一个集合，你可以这样做：

[jsFiddle](http://jsfiddle.net/Tyriar/jRVMM/)

```
$.fn.myPlugin = function() {
    var instances = [];
    this.each(function(key, value){
        if ($(this).data('myclass')) {
            return $(this).data('myclass');
        }

        var instance = new MyClass(this);
        $(this).data('myclass', instance);
        instances.push(instance);
    });
    if (instances.length == 1)
        return instances[0];
    return instances;
}; 
```

# counter - 并行转串行 HDL

> ID：15731357
> 
> 赞同：1
> 
> 时间：2013-03-31T16:01:25.293
> 
> 标签：counter, verilog, hdl

我正在使用 verilog 中的环形计数器制作一个并行到串行的转换器。环形计数器工作正常，但并行到串行转换器工作不正常，我得到 x 未定义的结果。我正在提供代码，请帮助我找到问题。

***最佳***

```
module PtoSTOP;

  reg clk,rst;

  wire [3:0] myout;
  wire       out;

  Ring a(clk,rst,myout);

  parToser x(myout,clk,rst,out);

  initial begin 
    clk=1;
    rst=1;

    #1 rst=0; 
 end

 always
   #2 clk=~clk;

 endmodule 
```

***并串转换器***

```
module parToser(myout,clk,rst,out);

input clk,rst;
input [3:0] myout;
output reg  out;

reg [2:0]i;

always @(posedge clk or posedge rst) begin
  if(rst) begin
    out <= 0;
    i   <= 0;
 end
 else begin
   out <= myout[i];
   i   <= i+1;
  end
end

endmodule 
```

***铃声计数器***

```
module Ring(clk,rst,myout);

input clk,rst;
output reg [3:0]myout;

always @(posedge clk or posedge rst) begin
  if(rst)
    myout<=1;
  else
    myout<=myout<<1;
end

 endmodule 
```

![在此处输入图像描述](https://i.stack.imgur.com/IK1a0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:19:53.537

我认为您看到的主要问题是 parToser 的一部分。

你有`reg [2:0]i;`你递增和使用的地址`input [3:0] myout;`，但我可以保存 0 到 7 的值，其中一半在 [3:0] myout 的地址范围之外。您应该看到关于超出范围寻址的模拟错误。

此外，您还包含了一些具有复位条件的触发器，但未将复位添加到“parToser”和“Ring”中的敏感度列表中：

```
always @(posedge clk) 
```

应该：

```
always @(posedge clk or posedge rst) 
```

如果没有这个触发器，你的 out，i 和 myout 变量将是 x，因为它们尚未设置为已知条件。

注意：parToser`i = i+1;`应该是`i <= i+1;`

# php - 为 PHP 模板引擎使用数据库变量

> ID：15731358
> 
> 赞同：0
> 
> 时间：2013-03-31T16:01:28.387
> 
> 标签：php, templates, template-engine

所以我写了一个模板引擎并且它可以工作，但我需要帮助添加一个功能。这是主要部分的代码：

```
public function parseFileContents($contents, array $values){
        foreach($values as $key => $replacement){
            $key = "[$key]";
            $contents = str_replace($key, $replacement, $contents);
        }
        return $contents;
         } 
```

发生的事情是我将需要更改的值和需要更改的值放入数组中，然后对文件进行排序，将数组中的任何内容替换为文件中的任何内容。我想要做的是在文件中有一定数量的位置与数据库中的许多项目相匹配。这就是我的意思：

```
<select id="inputHeader" name="itemHeader">
    <option value="[Header0]">[Header0]</option>
    <option value="[Header1]">[Header1]</option>
    <option value="Header">[Header2]</option>
    <option value="Header">[Header3]</option>
</select> 
```

我需要选项的数量来匹配将放置在该插槽中的标头数量。有人对这如何工作有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:09:07.113

在流行的模板引擎中，变量仍然从数据库中获取，然后发送到模板引擎。您无法避免通过获取的结果进行迭代。即用变量$header获取一个数组$array，索引为“i”应该是：

```
 <option value="[$array[i].header]">[$array[i].header]</option> 
```

但不确定 [] 的方式是否可行。也许你应该使用 } { -> {$array[i].header}

# linux - 使用 IPTABLES 的 MAC 地址字节计数器

> ID：15731364
> 
> 赞同：2
> 
> 时间：2013-03-31T16:01:51.810
> 
> 标签：linux, command-line, iptables

假设我是服务器，我想查看特定 MAC 地址的下载和上传带宽。带上传监控链。我用这个：
`iptables -N clientA_upload`然后`iptables -A FORWARD -m mac --mac-source 00:11:22:33:44:55:66`它工作得很好。
- 但说到下载链。我使用`iptables -A FORWARD -m mac --mac-destination 00:11:22:33:44:55:66`并且 iptables 不支持 mac-destination。请帮帮我

P/s：我只想通过MAC地址进行监控。不是ip地址。因为在安卓操作系统中。它不支持使用 IP 地址的字节计数。所以请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T18:43:07.717

没有这样的事情`--mac-destination`。为此，您必须[转移到 ebtables](http://lists.netfilter.org/pipermail/netfilter/2005-April/060051.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-10T20:43:29.373

对于缺少`--mac-destination`的技巧是将 iptables`--mac-source`与`CONNMARK`：

*   首先用于`--mac-source`匹配来自您感兴趣的 MAC 地址的数据包。
*   用于`CONNMARK`标记整个连接，即两个方向（！）和
*   现在检查带有连接标记的另一个方向的数据包。

```
# lan interface
if_lan=eth0

# packets going to mac address will pass through this:
iptables -t mangle -N clientA_download    

# mark connections involving mac address:
iptables -t mangle -A PREROUTING -i $if_lan -m state --state NEW -m mac --mac-source 00:11:22:33:44:55 -j CONNMARK --set-mark 1234

# match packets going to mac address:
iptables -t mangle -A POSTROUTING -o $if_lan -m connmark --mark 1234 -j clientA_download 
```

最初我认为这仅适用于源自 lan 的 tcp 连接，但鉴于`--state NEW`它的定义应该在 tcp 和 udp 的两个方向上都有效（！）

对于计数器，另请参阅`ipset`这是非常好的。

[基于发件人 MAC 地址的 Linux 上的策略路由](https://linuxmonk.ch/wordpress/index.php/2016/policy-routing-on-linux-based-on-sender-mac-address/)是这个答案的灵感来源。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-04T13:47:37.640

You are confusing downloading and uploading rules.

**Rule 1:** `iptables -A FORWARD -m mac --mac-source 00:11:22:33:44:55:66`

is appended to the ipchain and checks the given mac in forwarding chain.

Now you need to check your mac in input chain, so instead of applying the second rule in `FORWARD` chain, apply it in `INPUT` chain:

**Rule 2:** `iptables -I INPUT -m mac --mac-destination 00:11:22:33:44:55:66`

# tinymce - 忽略 TinyMCE 中的某个标签

> ID：15731369
> 
> 赞同：1
> 
> 时间：2013-03-31T16:02:32.177
> 
> 标签：tinymce

我在我的项目中使用 TinyMCE 编辑器，我想让它忽略标签 <--image-->。

现在，如果我写这个标签，它会用`<p>&nbsp;</p>`

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:33:36.117

是的，您必须将此标签添加到您的有效 tinymce 标签中。仔细查看 tinymce 参数 valid_elements 和 valid_children。

# c# - 使用 Windows 'X' 按钮关闭表单

> ID：15731372
> 
> 赞同：0
> 
> 时间：2013-03-31T16:02:35.053
> 
> 标签：c#

单击“X”时我的程序没有退出，所以当我查找它时，我得到了这个代码。

```
protected override void OnFormClosing(FormClosingEventArgs e)
    {
        Application.Exit();
    } 
```

但这会干扰该`this.Close()`方法。

有没有办法在单击“X”而不是在表单实际关闭时使用此代码？这似乎是唯一有问题的表格？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace PassMan
{
public partial class Passwords : Form
{
    String[,] UandS = { { "Russell", "Hickey" }, { "Junior", "Russ" } };
    public Passwords()
    {
        InitializeComponent();
        for (int i = 0; i < UandS.Length / 2; i++)
        {
            for (int j = 0; j < 2; j++)
            {
                if (j % 2 == 0)
                {
                    tbUsernames.Text = tbUsernames.Text + UandS[i, j] + "\r\n";
                }
                else
                {
                    tbPasswords.Text = tbPasswords.Text + UandS[i, j] + "\r\n";
                }
            }
        }
        tbPasswords.PasswordChar = '*';
    }

    private void btnSH_Click(object sender, EventArgs e)
    {
        Properties.Settings.Default.Save();
        if (btnSH.Text == "Show Passwords")
        {
            btnSH.Text = "Hide Passwords";
            tbPasswords.PasswordChar = (char)0;
        }
        else
        {
            btnSH.Text = "Show Passwords";
            tbPasswords.PasswordChar = '*';
        }
    }
    private void btnClose_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }

    private void btnLogin_Click(object sender, EventArgs e)
    {
        fLogin main = new fLogin();
        main.Show();
        this.Close();
    }

    protected override void OnFormClosing(FormClosingEventArgs e)
    {
        //Application.Exit();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:09:17.270

该方法接收 FormClosingEventArgs 参数。在那个论点中有 CloseReason 属性

[CloseReason](http://msdn.microsoft.com/en-us/library/system.windows.forms.formclosingeventargs.closereason.aspx)属性解释了表单关闭的原因......

> 表单可能因多种原因而关闭，包括用户启动的和程序化的。CloseReason 属性指示关闭的原因。

你可以检查这个属性，看看它是否

> **UserClosing** - 用户正在通过用户界面 (UI) 关闭表单，例如通过单击表单窗口上的关闭按钮、从窗口的控制菜单中选择关闭或按 ALT+F4。
> 
> **ApplicationExitCall** - 调用了 Application 类的 Exit 方法。

关闭事件的其他原因在上面的链接中解释

所以，如果我正确理解你的意图，你可以写

```
protected override void OnFormClosing(FormClosingEventArgs e)
{
    if(e.CloseReason == CloseReason.UserClosing)
       Application.Exit();
    else
       // it is not clear what you want to do in this case .....
} 
```

# java - Java/Android - GettingClassCast 异常将基类转换为子类以调用子类方法

> ID：15731374
> 
> 赞同：0
> 
> 时间：2013-03-31T16:02:44.727
> 
> 标签：java, android, exception, inheritance, polymorphism

所以我有一个 GeneralTemplate 类和一个扩展 GeneralTemplate 的运动类。

从我包含的 GeneralTemplate 代码中可以看出，每个扩展它的类（其中有几个）都包含一个 ArrayList

当我到达这条线...

```
Exercise chosenExercise = (Exercise) FitnessApp.routineList.get(chosenRoutinePosition).getItem(chosenWorkoutPosition).getItem(chosenExercisePosition); 
```

我收到以下错误`ClassCastExceptionjava.lang.ClassCastException: com.karibastudios.gymtemplates.GeneralTemplate cannot be cast to com.karibastudios.gymtemplates.Exercise`

我不明白为什么这是因为练习是 GeneralTemplate 的子类？

通用模板代码：

```
public class GeneralTemplate
{
    private String name;
    private ArrayList <GeneralTemplate> items;  // Generic items list

    // Super constructor for all subclasses
    public GeneralTemplate(String name)
    {
        this.setName(name);
        items = new ArrayList<GeneralTemplate>();
    }

    // Only sets will differ
    public void addItem(String newName)
    {
        items.add(new GeneralTemplate(newName));
    }   

    // Remove item at position
    public void removeItem(int position)
    {
        if (items.size() > 0 && position <= items.size())
        items.remove(position);
    }

    // Remove all items
    public void removeItems()
    {
        items.clear();
    }

    /* ****************** GETTERS AND SETTERS START ********************/

    // Get item
    public GeneralTemplate getItem(int position)
    {
        return items.get(position);     
    }

    // Set list of objects e.g Routines, Workouts, Exercises
    public void setItems(ArrayList <GeneralTemplate> items)
    {
        this.items = items;
    }

    // Return item list
    public ArrayList <GeneralTemplate> getItems()
    {
        return items;
    }

    // Return name
    public String getName()
    {
        return name;
    }

    // Set name
    public void setName(String name)
    {
        this.name = name;
    }
    /* ****************** GETTERS AND SETTERS END ********************/
} 
```

尝试强制转换 GeneralTemplate 以调用方法的异常代码

```
chosenRoutinePosition = getIntent().getIntExtra("chosen_routine", 0);
chosenWorkoutPosition = getIntent().getIntExtra("chosen_workout", 0);
chosenExercisePosition = getIntent().getIntExtra("chosen_workout", 0);

// Navigates through the Routine List and gets the chosen routine
chosenExercise = (Exercise)FitnessApp.routineList.get(chosenRoutinePosition).getItem(chosenWorkoutPosition).getItem(chosenExercisePosition); 
```

练习类非常简单，并通过一些额外的方法扩展了 GeneralTemplate

这有点绊脚石，任何帮助都会很棒。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:10:01.577

```
ClassCastExceptionjava.lang.ClassCastException: com.karibastudios.gymtemplates.GeneralTemplate cannot be cast to com.karibastudios.gymtemplates.Exercise 
```

在 Java 中，您只能向一个方向投射。例如：ListView 是 View，但并非所有 View 都是 ListView（它可能是 Button、RelativeLayout 等）。

因此，您可以从练习转到通用模板，但不能反过来。

# android - Android：更改片段时如何停止所有线程在片段中启动

> ID：15731376
> 
> 赞同：4
> 
> 时间：2013-03-31T16:02:52.677
> 
> 标签：android

我有一个里面有很多片段的活动。在一个片段中，我定期运行一些使用某些命令的线程，例如`getActivity().runOnUiThread()`，因此当切换到不同的片段时，这些语句将生成`NullPointException`.

我知道如何停止线程，但不知道将这段代码放入哪个方法。（这意味着：当切换片段时，该片段将始终在切换之前运行哪个方法）。

请帮我解决这个问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:26:51.540

感谢乐高的帮助。最好的方法是将这些代码放入`onPause`.

您可以在此链接中查看更多详细信息：[片段生命周期](http://developer.android.com/guide/components/fragments.html#Lifecycle)

帮助这篇文章对任何遇到我同样问题的人都有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:03:56.177

试着把它放进去`onDetach()`。

# java - 我应该使用 Abstract 还是 Interface ... 还是从应该扩展的 Concrete 类开始？

> ID：15731379
> 
> 赞同：2
> 
> 时间：2013-03-31T16:03:11.173
> 
> 标签：java, oop, interface, abstract, concrete-inheritance

我对 OO 设计没有足够的了解，无法确定我是否在设计应用程序。

这是一个简单的想法：

我想编写一个在地铁上旅行的应用程序。

我开始定义以下内容：

定义了一些方法的 Trainline 接口。然后我创建了一个名为 Lines 的具体类。Lines 类什么也没做。它有 getNumberOfStations() 之类的方法，但它不知道任何数量的站，所以只返回 null。

然后我有一个 CentralLine 类来完成真正的工作，它扩展了 Lines 并提供了真正的实现。

![在此处输入图像描述](https://i.stack.imgur.com/8JBR0.png)

**问题：**

1.  我需要“线条”具体类吗？我不应该让 CentralLine 和 CircleLine 实施 TrainLines（这些都是伦敦地铁上的火车线）吗？
2.  或者我应该删除 TrainLines 接口并只使用 Lines 具体类？
3.  还是应该 TrainLines 是一个抽象类？
4.  除了漂亮的类映射图之外，接口或 Lines 超类是否提供任何价值...见上文 :)
5.  OO 可以为我做哪些很酷的事情？我应该对 OO 设计做什么？

谢谢 ！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:14:44.083

为什么不让你的`Lines`课`abstract`？你不会有“返回null”的问题=>非常非常难看。

在这种情况下，您将不再有`TrainLines`界面。

`TrainLines`如果您打算处理许多不同类型的`Lines`实现真正不同的接口，那么接口会很有趣。`TrainLines`通过在代码中使用类型引用不同的类，您将因此受益于良好的多态性。

总结一下，两种解决方案：

*   `Lines`因为抽象类后面是具体类。
*   `TrainLines`正如接口后面跟着`Lines`（或其他类型）抽象类后面跟着具体类。

请记住，实现接口的抽象类不需要实现方法。实际上，抽象类可以将此责任推给具体类。因此，无需实现 dummy `return null`;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:46:59.647

根据您迄今为止所展示的内容，您实际上应该只有一个类：`Line`类。

几个原因（回答 1-4）：

您应该谨慎使用继承。很难简要说明为什么会这样，但继承，特别是在 Java 中（我们没有特征或多重继承并且可变性很猖獗）通常不是好的设计。你可以谷歌`Gang of four composition over inheritance`。

类不应该是具体的东西。那就是你不会创建一个你的名字来自的类`Human`。类是事物的一个类别。

如果您确实需要更多类型的`Line`s，您只需**重构**. 特别是在 Java 中，重构非常容易。我认为他们从根本上教软件工程/设计错误的现实世界中发生的事情。在现实世界中，您不了解整个领域（或分类），因此您总是从最简单的模型开始，然后进行重构。

要回答问题 #5：

> OO 可以为我做哪些很酷的事情？我应该对 OO 设计做什么？

如果你不了解单元测试，你应该研究一下（如果你不能测试一个好的设计就没有任何意义......事实上，如果你不能测试你的代码或其难以测试=糟糕的设计）。

使用 OOP，您应该决定如何管理状态。OOP 非常擅长管理内存状态。它最大的好处是对视频游戏或 UI 之类的东西进行建模，其中你有很多内存状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:28:22.763

在您的情况下，我认为对接口没有任何真正的需求。我会让 Lines 成为一个抽象类，并在 Lines 类中提供所有常见的实现。CentralLine 和 CircleLine 可以使用该默认实现并为其余方法提供实现。

经验法则是，只要您有一些通用的实现，就选择抽象类，这对您的情况来说是正确的。

当您想要跨层次结构实现时，接口可能非常有用，同样因为同一个类可以实现多个接口，它也很有用。但是对于接口总是有一点要注意，如果必须添加新方法，那么整个层次结构可能会中断，而对于抽象类，您可以简单地将默认实现放在抽象类中而无需更改任何其他内容。

# javascript - NodeJS 与静态 HTML

> ID：15731382
> 
> 赞同：0
> 
> 时间：2013-03-31T16:03:28.067
> 
> 标签：javascript, html, node.js

我有一个 Java Rest API，我想实现一个浏览器客户端。我想知道哪个会更好，我在选择之间的权衡是什么

1.  带有主干的静态 HTML 文件，可以连接到 REST api 并填写数据字段。
2.  NodeJS 应用程序将提供相同的静态文件，但在显示之前将数据加载到带有 nodejs 模块的模板中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T16:50:56.363

NodeJS 是为服务器端设计的。如果您已经有一个提供 REST API 的 Java 服务器端，我建议您直接从静态 HTML 文件或其他客户端调用此 API……它会比重新加载通过 NodeJS 模块传递的数据更快。

# c - 如何将 2d 数组变成 1d 数组？

> ID：15731383
> 
> 赞同：1
> 
> 时间：2013-03-31T16:03:31.543
> 
> 标签：c, memory-management

要访问我使用的任何元素`*(Ptr + i)`。

有没有办法将二维数组放入分配的内存中，以便使用 访问任何元素`array[i][j]`？

这是代码：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
   int *Ptr;

   Ptr = malloc(M*N*sizeof(int));

   for (i = 0; i <= M * N; i++)
      *(Ptr + i) = 1 + rand()%10;

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T16:20:03.487

样本

```
#include <stdio.h>
#include <stdlib.h>

#define N 4
#define M 3

int main()
{
    int *Ptr;
    int (*p)[M];
    int i,j;

    Ptr = malloc(M*N*sizeof(int));

    for (i = 0; i < M * N; i++){
        *(Ptr + i) = 1 + rand()%10;
//      printf("%d ", Ptr[i]);
    }
//  printf("\n");

    p=(int (*)[M])Ptr;//p[N][M]
    for(i = 0; i < N ;++i){
        for(j = 0; j < M;++j)
            printf("%d ", p[i][j]);
        printf("\n");
    }

   return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:07:16.417

试试这个：

```
int** theArray;  
theArray = (int**) malloc(M*sizeof(int*));  

    for (int i = 0; i < M; i++)
    {
        theArray[i] = (int*) malloc(N*sizeof(int));
    } 
```

样本：

```
int M = 5;
int N = 5;

int** theArray = (int**) malloc(M*sizeof(int*));  

    for (int i = 0; i < M; i++)
    {
        theArray[i] = (int*) malloc(N*sizeof(int));

        for(int j = 0 ; j < N; j++)
        {
            theArray[i][j] = i+j;
            printf("%d ", theArray[i][j]);
        }

        printf("\n");
    }

    for (int k = 0; k < M; k++)
    {  
       free(theArray[k]);  
    }
    free(theArray); 
```

# c# - “await/async”：为什么 2 段代码运行不一样？

> ID：15731384
> 
> 赞同：3
> 
> 时间：2013-03-31T16:03:43.960
> 
> 标签：c#, asynchronous, task-parallel-library, async-await, c#-5.0

这是一个简单的 WinForm 应用程序，用于试验 await/async 关键字。下面是按钮的事件处理程序。

**我快速点击按钮两次，间隔小于 3000ms 所以后台线程还没有完成。**

```
 private Task<String> f()
    {
        return Task.Run<String>(() =>
            {
                Thread.Sleep(3000);
                return Thread.CurrentThread.ManagedThreadId.ToString();
            }
        );
    }

    private async void async_btn_Click(object sender, EventArgs e)
    {
        Task<String> wait_task = f();

        //Code 1, this outputs first 3, and then 3 is REPLACED with 4.
        //this.async_lbl.Text += await wait_task;  //3 -> 4

        //Code 2, this outputs first 3, and then 34.
        //String wait_value = await wait_task;
        //this.async_lbl.Text += wait_value;  //3 -> 34
    } 
```

为什么1和2的输出不同？

谢谢！

## 添加

下面是反映的代码：

3 -> 34

```
// WindowsFormsApplication1.Form1
private async void async_btn_Click(object sender, EventArgs e)
{
    Task<string> task = this.f();
    string str = await task;
    Label expr_AA = this.async_lbl;
    expr_AA.Text += str;
} 
```

3 -> 4

```
// WindowsFormsApplication1.Form1
private async void async_btn_Click(object sender, EventArgs e)
{
    Task<string> task = this.f();
    Label label = this.async_lbl;
    label.Text += await task;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-31T16:43:45.690

这在 C# 语言规范中进行了解释。[第 14.3.2 节：复合赋值](http://www.jaggersoft.com/csharp_standard/14.13.2.htm)：

> [T]他的操作被评估为 x = x op y，除了 x 只被评估一次。

线

```
this.async_lbl.Text += await wait_task; 
```

扩展到

```
this.async_lbl.Text = this.async_lbl.Text + await wait_task; 
```

在执行该行时，`this.async_lbl.Text`是空字符串。因此，右侧计算为

```
"" + await wait_task 
```

然后代码等待任务的结果，并返回 4。因此，表达式的结果是

```
"" + "4" 
```

这是`"4"`。然后将其分配为 的文本`this.async_lbl`。请注意，在发生*之前*`this.async_lbl.Text`使用的起始值。*`await`*

 *另一方面，

```
string wait_value = await wait_task;
this.async_lbl.Text += wait_value; 
```

扩展到

```
string wait_value = await wait_task;
this.async_lbl.Text = this.async_lbl.Text + wait_value; 
```

这一次，代码等待`wait_task`返回`"4"`. 但与此同时， 的值`this.async_lbl.Text`变为`"3"`。然后线

```
this.async_lbl.Text = this.async_lbl.Text + wait_value; 
```

执行，右边是现在

```
"3" + "4" 
```

评估为`"34`“。*

# javascript - 如何从返回布尔值的方法中优化 if 语句

> ID：15731389
> 
> 赞同：0
> 
> 时间：2013-03-31T16:04:04.320
> 
> 标签：javascript

我对javascript有点陌生，我只是想知道这是否可能。

考虑一下：

```
if(foo('1')){
    // do something
}
else if(foo('2')){
    // do something else
}
else if(foo('3')){
    // do something different
}
else if(foo('4')){
    // do something completely different
}
...
else if(foo(n)){
    ...
} 
```

`foo(stringValue)`是一个返回`true`或返回的方法，`false`但问题是我不能以任何方式更改该方法（例如更改返回值）。现在，如果我想重构代码，我可能会将所有 foo 参数值放在一个集合中，为 if 语句中的每个唯一操作创建一个方法，遍历所有参数值并在 foo(n ) 返回 true，但这似乎是一种非常丑陋的做法。是否有更好的方法可以使用 switch 语句来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:12:39.643

如果你想使用 switch 语句，你可以使用这个技巧（不确定它是否真的更好）：

```
switch( true ) {
    case foo('1'):
        // do something
        break;
    case foo('2'):
        // and so on
        break;
    default:
        // all returned false
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:17:38.330

我更喜欢这个。只是将检查代码与处理代码分开。

```
var array = ["1", "2", "3", "4"];
var iLength = array.length;
for(var i= 0; i < iLength ;i++)
{
    var strValue = array[i];
    if(foo(strValue))
    {
        break;
    }
}

switch(strValue)
{
    case array[0]:
    //perform operations here for case "1"
    break;
    case array[1]:
    //perform operations here for case "2"
    break;
} 
```

# javascript - 需要统计 JSON 键出现 * 值

> ID：15731391
> 
> 赞同：0
> 
> 时间：2013-03-31T16:04:13.763
> 
> 标签：javascript, json

所以，我有 JSON 以这种格式返回：

```
{
   "CC" : 23,
   "CT" : 36,
   "TT" : 12,
} 
```

我需要计算这里代表了多少个 C 和多少个 T。例如，上面有 82 个 C (2*23 + 1*36) 和 60 个 T。然后将它们存储在一个新对象（或数组？）中，例如：

```
{
  "C" : 82,
  "T" : 60,
} 
```

请记住，所涉及的字母是可变的，但始终只有两个，并且采用以下格式：AA、AB、BB。或者甚至可能更好，将键：值对放在一个数组中（因为这些将用于制作条形图）。

（对生物学家来说，是的，计算基因型的等位基因频率。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:13:00.327

jsFiddle 示例：http: [//jsfiddle.net/2HEVT/](http://jsfiddle.net/2HEVT/)

## 代码：

```
function calc(o){
    var result={};
    for(var i=0;i<Object.keys(o).length;i++){
        str=Object.keys(o)[i];
        for(var j=0;j<str.length;j++){
            value=0;
            if(result.hasOwnProperty(str[j]))
                value=result[str[j]];
            result[str[j]]=value+o[str];
        }
    }
    return result;
} 
```

# php - mysql : mysql_result 返回一个假值

> ID：15731394
> 
> 赞同：1
> 
> 时间：2013-03-31T16:04:16.710
> 
> 标签：php, mysql

有人可以告诉我为什么`mysql_result($)`返回 3 而不是 1 或 0，以及是否有更好的函数来验证检索函数是否`SELECT`返回某些内容（如果 id 存在）以及如何将其存储在变量中。谢谢你。

```
 require_once __DIR__ . '/db_connect.php'; 
    $db = new DB_CONNECT();
    $select  = mysql_query("SELECT `id` FROM `users` WHERE `username`='$username' AND `password`='$password'");
    echo mysql_result($select,0);
    if (mysql_result($select, 0) == '1'){
        echo "True";
    }else 
        echo "False"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:07:07.313

```
$db = new DB_CONNECT();
    $select  = mysql_query("SELECT `id` FROM `users` WHERE `username`='$username' AND `password`='$password'");
   $result = mysql_result($select);
    echo var_dump($result); // will help you debug the your queries, 
```

另外，请检查您是否为表设置了自动增量，也许您有相同的用户名/密码和相同的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:08:58.057

你可以使用mysql_num_rows，它会返回查询中的行数，我在这里给你一个例子：

```
public function numberRows($id) {
    $result = mysql_query("SELECT * from table WHERE id = '$id'");
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        // there is data
        return true; 
    } else {
        // there is no data
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:16:29.093

我认为@php NoOb 有一点：

```
 require_once __DIR__ . '/db_connect.php'; 
        $db = new DB_CONNECT();
        $select  = mysql_query("SELECT count(distinct `id`) FROM `users` WHERE `username`='$username' AND `password`='$password'");
        echo mysql_result($select,0);
        if (mysql_result($select, 0) == '1'){
            echo "True";
        }else 
            echo "False"; 
```

nb DISTINCT 和计数。其余的应该解决这个问题。可能有帮助。干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T16:20:01.047

我会这样做：

```
 require_once **DIR** . '/db_connect.php'; 
    $db = new DB_CONNECT();
    $select  = mysql_query("SELECT `id` FROM `users` WHERE `username`='$username' AND `password`='$password'");
    if (mysql_num_rows($select) == '1'){
        echo "True";
    }else 
        echo "False"; 
```

如果您需要返回结果的值，请使用不同的方法。

# java - 在java中验证xml wrt XSD

> ID：15731395
> 
> 赞同：0
> 
> 时间：2013-03-31T16:04:18.557
> 
> 标签：java, xml, xsd

我正在尝试验证一个 xml 文件，该文件是由 xsd 格式的模式生成的。疑问是我是否需要传递架构的 url 或系统上架构的位置？同样，我们是否需要传递 xml 文件的内容或其位置？

下面是我正在使用的代码片段 -

```
public void validateDTFAgainstXSD()
{
    String inputxml = "C:/Users/file.xml";
    String schemaLocation = "https://github.abcd/schema.xsd";
    try
    {
        SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        File schemaFile = new File(schemaLocation);
        Schema schema = factory.newSchema(schemaFile);
        javax.xml.validation.Validator validator = schema.newValidator();

        Source source = new StreamSource(new StringReader(inputxml));
        validator.validate(source);
        System.out.println("File validated");
    }
    catch(Exception ex)
    {
        System.out.println("File not validated");
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:12:14.437

有 newSchema() 重载采用 File 对象或 Source 对象。您正在传递一个文件，这很好。

Validator.validate() 方法需要一个 Source。如果你有一个文件名，你可以使用 new StreamSource(new File(filename)) 构造一个 Source。您这样做的方式是错误的：它假定您在 StringReader 中包装的字符串包含要验证的 XML，而不是包含 XML 的文件的名称。

# objective-c - 如何判断文件是否存在总是返回 false 但我可以通过图像标签加载它

> ID：15731396
> 
> 赞同：0
> 
> 时间：2013-03-31T16:04:24.053
> 
> 标签：objective-c, xcode

在 xcode 中，我创建了一个名为 IMAGES 的文件夹，并将我将使用的所有图像复制到该文件夹​​中。

我正在使用以下代码更新表格以插入图像：

```
 NSString *picName = [NSString stringWithFormat:@"%@.jpg", [[theemplyees objectAtIndex:indexPath.row] valueForKey:@"EmpNo"]];

   cell.empPicture.image = [UIImage imageNamed:picName]; 
```

注意不需要提供的位置。我想要做的是，如果直接不存在用户图片，则将图像设置为默认图像。如：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

//Set image
NSString *imagePath = [documentsDirectory stringByAppendingPathComponent:picName];

//Check if the image exists at a given path
BOOL imageExists = [[NSFileManager defaultManager] fileExistsAtPath:imagePath];

//If the image doesn't exists download it.
if (!imageExists)
{
    picName = @"nopicture.jpg";
} 
```

问题是，使用上述方法，它总是说文件不存在。没有任何！Grrr 那么我是否将文件放置在错误的位置？我试图创建一个名为 Resources 的目录并将它们放在那里，但仍然没有工作。

任何帮助是极大的赞赏。提前感谢您的任何帮助。

地理...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:29:05.960

`Documents`除非您在运行时在那里存储一些东西，否则应用程序的目录中不会有任何内容。目录和应用程序的`Documents`资源包是两个完全不同的东西。

如果您在 Xcode 中为图像创建了一个文件夹，这些图像仍存储在应用程序的资源包中，而不是`Documents`文件夹中。

该`UIImage imageNamed:`方法仅在资源包中查找。

# c# - WPF：单击按钮打开新窗口

> ID：15731400
> 
> 赞同：3
> 
> 时间：2013-03-31T16:05:02.590
> 
> 标签：c#, wpf, xaml, mvvm

单击按钮时是否可以在不触摸 CS 代码的情况下打开一个新窗口？我想做这样的事情：

```
<Button Command="OpenNewWindow" Content="New window" /> 
```

或者

```
<Button Command="Open NameOfMyWindow" Content="New window" /> 
```

我浏览了预定义的命令，找到了一个名为 Open 的命令，尽管它似乎不是为这项任务而设计的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:15:05.900

您可以使用命令参数

```
<Button Command="OpenWindow" CommandParameter="NameOfMyWindow" Content="New window" /> 
```

并在处理 OpenWindow 命令的代码中使用该参数。

通用命令与典型的“文件”菜单更密切相关，您将打开一个文件或类似的东西。您可以为您的应用编写自定义命令

# javascript - 动画不适用于触摸事件？

> ID：15731402
> 
> 赞同：0
> 
> 时间：2013-03-31T16:05:11.077
> 
> 标签：javascript, jquery, css, physics, interactive

所以，我建立了这个小的交互式轮盘赌：

[http://techgoldmine.com/roulette/](http://techgoldmine.com/roulette/)

我需要它在移动设备和桌面设备上工作。最初，我通过让用户与与图像重叠的 SVG 圆圈进行交互来处理交互，但出于测试目的，我已将其删除。

它仍然无法在移动设备上运行，我不知道为什么。视口元标记似乎设置正确：

```
<meta name="viewport" content="width=device-width, target-densitydpi=high-dpi, initial-scale=1.0, user-scalable=no" /> 
```

记录鼠标/手指位置：

```
 $(document).bind('mousemove', function (e) {
        xpos = e.pageX;
        ypos = e.pageY;
    });

    $(document).bind('touchmove', function (e) {
        xpos = e.pageX;
        ypos = e.pageY;
    }); 
```

mousedown/mouseup/touchstart/touchend：

```
 //mouse
    $('.roulette').bind('mousedown', function () {
        if (inMotion == true) {
            cleanUp();
        }
        intervalvar = setInterval(spinWheel, 24);
        // spinWheel();
        $(document).bind('mouseup', function () {
            count = Math.abs(force)
            mouseup = 1;
        });
    });

    //touch
    $('.roulette').bind('touchstart', function () {
        if (inMotion == true) {
            cleanUp();
        }
        intervalvar = setInterval(spinWheel, 24);
        // spinWheel();
        $(document).bind('touchend', function () {
            count = Math.abs(force)
            mouseup = 1;
        });
    }); 
```

我也需要它与触摸一起工作。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:10:41.350

您不会从 e.pageX 获得 pageX 要在触摸设备中获得 pageX，您可以从

```
//for javascript
e.touches[0].pageX
//for jquery
e.originalEvent.touches[0].pageX 
```

# java - 如何在java中生成字母数字ID？

> ID：15731407
> 
> 赞同：0
> 
> 时间：2013-03-31T16:06:02.637
> 
> 标签：java, hibernate, jakarta-ee, sequence, auto-increment

我有一个名为 GROUPS 的表，其中有一列**GROUP_ID**，其值为

> GRP001、GRP002、GRP003

等等。现在，每次插入新行时，我都必须使用（当前） GROUP_ID= (highest)GROUP_ID+ 1 插入它，例如，如果最高 GROUP_ID= GRP003 我必须在插入新行时生成一个新的 GROUP_ID GRP004 。

我怎样才能使用java做到这一点？

我目前在我的程序中使用 Hibernate 和 Struts 2

有没有办法使用hibernate来处理这个问题？或者我是否必须编写额外的代码来锁定表，检查数据库的最大 ID（然后增加它）并最终释放锁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:57:02.643

我记得曾经解决过类似的问题。我所做的是创建了一个由 hibernate 支持的自定义主键生成器。

这家伙在这里解释得很清楚：[“Custom Hibernate Primary Key Generator”](http://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/)

基本上你只需要实现`org.hibernate.id.IdentifierGenerator`，一切都应该设置好。

请注意，上面示例中实现的解决方案是依赖于数据库的。但我认为有时常识应该胜过过度设计。

# d3.js - 如何调用画笔的开启功能

> ID：15731409
> 
> 赞同：2
> 
> 时间：2013-03-31T16:06:06.737
> 
> 标签：d3.js

在[这个线程](https://groups.google.com/d/msg/d3-js/vNaR-vJ9hMg/ztLDbTD-_hMJ)中，Mike Bostock 解释说设置画笔的范围和重绘画笔是两个独立的操作。我明白这一点，但我无法弄清楚细节。

他说您需要执行以下操作：

```
brush.extent([0.2, 0.8]); 
svg.select(".brush").call(brush); 
```

但是，当我执行时`call(brush)`，它只是在新范围上绘制画笔矩形。“焦点”图表永远不会更新。但是，如果我调用我`brushed`的函数（我分配给我的画笔的函数），它就可以工作。

好像`call(brush)`没有执行`brushed`。我如何让它执行这个功能？

更新：[这是我的代码的一个小提琴](http://jsfiddle.net/samselikoff/rbxQq/1/)。运行它时，请注意画笔已正确绘制，但焦点未更新。取消注释第 180 行，焦点也被重新绘制。

（当然，最终我会想从图表对象外部执行此操作，但现在我在内部执行此操作只是为了找出问题所在。）

本质上，我在问：**如何`brushed`从对象外部触发函数？**画笔事件处理程序是如何做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:28:38.583

显式设置`extent`画笔的 不会触发导致调用与其关联的函数的事件。在这种情况下，最简单的解决方案是，正如您已经发现的那样，`brushed()`在设置范围后显式调用。

# git - 使用 Bitbucket 剥离 GIT 存储库上的提交

> ID：15731410
> 
> 赞同：3
> 
> 时间：2013-03-31T16:06:11.130
> 
> 标签：git, logging, bitbucket

我从远程 GIT 存储库中删除了最后 3 个提交（因为我搞砸了！）。这工作得很好，这次我已经推送了正确的提交，并且存储库几乎是应该的。

Bitbucket 仍在其“概述”日志中显示原始的 3 条提交消息，并且还为每个显示“剥离 {commit-id}”。有没有办法从日志中删除这些消息以整理概览页面？

**补充：**当使用“提交”选项卡查看时，提交日志似乎是正确的，使用 SourceTree 查看时也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:12:42.507

它似乎是 Bitbucket 存储库的概述选项卡的一个功能，它反映了[reflog](http://git-scm.com/docs/git-reflog)。[我在Bitbucket 文档](https://confluence.atlassian.com/display/BITBUCKET/Bitbucket+Documentation+Home;jsessionid=D76F7932B95A2BAB1BA5C7E7A5811780)
中没有看到任何删除这些“ ”的方法，但如果这确实反映了 reflog，那么这些元素将在（默认情况下）90 天后消失。`stripped {commit-id}`

> 比此时间更早的条目将被修剪。
> 如果没有该选项，它是从配置中获取的`gc.reflogExpire`，而配置又默认为`90 days`.

# c++ - C++友元函数不能访问私有成员

> ID：15731414
> 
> 赞同：14
> 
> 时间：2013-03-31T16:06:26.907
> 
> 标签：c++, operator-overloading, friend

这应该是一个带有一堆运算符和函数的字符串类，包括两个友元函数。这两个给我带来了一些麻烦，因为编译器说他们不能访问私有成员。这是我的字符串.h：

```
#include <iostream>
#ifndef STR_H
#define STR_H

namespace MyStr
{
class Str
{
private:
    unsigned int length;
    char *data;
public:
    Str();
    Str(const Str&);
    Str(const char*);
    Str(char c, unsigned int db);
    ~Str();
    char* cStr() const;
    unsigned int getLength() const; 
```

这里有很多不相关的功能......

```
 friend int operator/ (const Str&, char);
    friend std::ostream& operator<< (std::ostream&, const Str&);
};
}
#endif /* STR_H */ 
```

这是main.cpp：

```
#include <iostream>
#include "Str.h"

using namespace std;
using namespace MyStr;

ostream& operator<< (ostream& out,const Str& str)
{
    for (int i=0; i<str.length; i++)
    {
        out<<str.data[i];
    }
    out<<endl;
    return out;
}

int operator/ (const Str& str, char c)
{
    for (int i=0; i<str.length; i++)
    {
        if(str.data[i]==c) return i;
    }
    return -1;
} 
```

此代码不会编译，编译器声称`Str`成员是私有的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-31T16:23:35.733

您应该更加注意命名空间。

```
class Str {
private:
    unsigned int length;
    char *data;
public:
    Str(){}
    Str(const Str&){}
    Str(const char*){}
    Str(char c, unsigned int db){}
    // maybe something more...
    friend int operator/ (const Str&, char);
    friend std::ostream& operator<< (std::ostream&, const Str&);
};

ostream& operator<< (ostream& out,const Str& str)
{
    for (int i=0; i<str.length; i++)
        out<<str.data[i];
    out<<endl;
    return out;
}

int operator/ (const Str& str, char c)
{
    for (int i=0; i<str.length; i++)
        if(str.data[i]==c) return i;

    return -1;
}

int main()
{
    Str s;
    cout<<s;
    return 0;
} 
```

由于名称空间不匹配，您会收到错误消息。如果您更喜欢坚持使用，`MyStr`那么您应该将命名空间添加`MyStr`到重载的*友元*运算符。你可以这样做：（操作符应该在命名空间中定义`MyStr`）

```
namespace MyStr {  
    ostream& operator<< (ostream& out,const Str& str)
    {
        for (int i=0; i<str.length; i++)
        {
             out<<str.data[i];
         }
        out<<endl;
        return out;
    }

    int operator/ (const Str& str, char c)
    {
        for (int i=0; i<str.length; i++)
        {
            if(str.data[i]==c) return i;
        }
        return -1;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-31T16:19:54.503

当您在其中声明友元函数时，`Str`它们被认为位于直接封闭的命名空间中，`MyStr`.

您定义的运算符位于全局命名空间中，因此编译器认为这是两个完全不同的运算符，而不是朋友。

您可以通过添加解决此问题

```
namespace MyStr
{

} 
```

围绕 .cpp 文件中的运算符。

# java - 比较 Java 中的包装器类型

> ID：15731419
> 
> 赞同：3
> 
> 时间：2013-03-31T16:06:40.007
> 
> 标签：java, long-integer

我有两个`java.util.List`如下。

```
List<Long> items = new ArrayList<Long>(){{
   add(141L);
   add(142L);           
}};

List<Long> itemsExist = new ArrayList<Long>(){{
    add(123L);
    add(124L);
    add(125L);
    add(126L);
    add(127L);
    add(141L);
    add(142L);            
}}; 
```

我试图删除`List`named的元素`items`，如果它们包含在`List`named`ItemsExist`中，如下所示。

```
Iterator<Long> itemsIterator = items.iterator();

while(itemsIterator.hasNext())
{
    Long item1=itemsIterator.next();
    Iterator<Long> itemsExistIterator = itemsExist.iterator();

    while(itemsExistIterator.hasNext())
    {               
        Long item2=itemsExistIterator.next();
        if(item1==item2)
        {
            itemsIterator.remove();
        }
    }
} 
```

但是元素 ( `141`and `142`) 的删除并没有发生，因为这种情况`if(item1==item2)`实际上应该是, (我可以理解and`if(item1.equals(item2))`之间的区别)。`==``equals()`

* * *

这可以通过一个非常简单的示例来模拟，如下所示。

```
Long a=new Long(5);
Long b=new Long(5);
System.out.println((a==b)+" : "+a.equals(b)); 
```

这分别返回`false`和`true`。

* * *

以下示例`true`在两个比较中都返回。

```
Long a=5L;
Long b=5L;
System.out.println((a==b)+" : "+a.equals(b)); 
```

在这种情况下，两者`a`和似乎`b` **都是**拆箱的主题，而其他示例似乎并非如此。如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T16:12:30.613

这是java.lang.Long的部分源代码：

```
 private static class LongCache {
  544           private LongCache(){}
  545   
  546           static final Long cache[] = new Long[-(-128) + 127 + 1];
  547   
  548           static {
  549               for(int i = 0; i < cache.length; i++)
  550                   cache[i] = new Long(i - 128);
  551           }
  552       }

            public static Long valueOf(long l) {
  573           final int offset = 128;
  574           if (l >= -128 && l <= 127) { // will cache
  575               return LongCache.cache[(int)l + offset];
  576           }
  577           return new Long(l);
  578       } 
```

在我看来， Long 类维护`Long`-128 到 127 之间的对象缓存。因此，示例中的 a 和 b 变量指向同一个对象`Long`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:47:30.020

就像`String pool`java 为 -128 到 +127 范围内的整数值维护一个池一样。这个网站已经回答了一个类似的问题。请参考[为什么整数常量池的行为在 127 处发生变化？](https://stackoverflow.com/questions/13098143/java-integer-constant-pool)

总结一下，如果您将 -128 到 +127 范围内的整数分配为文字，它将从整数池中提取，并且每次使用相同的文字时都会返回相同的对象。

例如，

```
Integer int1 = 123;
Integer int2 = 123; // Get the same object from integer pool
System.out.println(int1.equals(int2));
System.out.println(int1== int2); 
```

上面的代码让你在这两种情况下都是真实的。

如果您使用`new`运算符创建对象，则每次都会创建一个新对象，并且不会出现整数池。例如，

```
Integer int1 = new Integer(123);
Integer int2 = new Integer(123); // Gets you a new object
System.out.println(int1.equals(int2));
System.out.println(int1== int2); 
```

`equals`方法让你为真，`==`检查让你为假。您可以在这里获得更多见解[http://www.devx.com/tips/Tip/42276](http://www.devx.com/tips/Tip/42276)

# matlab - 在 MATLAB 中计算秒数

> ID：15731420
> 
> 赞同：0
> 
> 时间：2013-03-31T16:06:40.140
> 
> 标签：matlab, time

我有一个以瓦特为单位计算设备功耗的代码。我需要计算该设备在该月的 KWH 使用量，我有一个看起来像这样的公式

```
 ( Watt Usage * Hours/Day * Days/Mo. ) / 1000 = Kilowatt Hours used that month 
```

我有瓦特使用情况，但跟踪时间有问题。所以有没有办法计算秒数，以便我可以用它来计算小时、天和单位消耗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:25:13.887

MATLAB 有一些用于处理时间的工具：

**时钟**：

```
t=clock; % returns a six-element vector containing the current date and time in decimal form, ( i.e. [year month day hour minute seconds] ) 
```

**日期**：

```
d=date; returns a string containing the date (in dd-mmm-yyyy format). 
```

此外，您可以使用**tic**和**toc**来测量两个时刻之间经过的时间。（如秒表）

```
tic;% starts the stopwatch
%  after some time
toc  % returns elapsed time 
```

# java - 在方法中使用 awt.Graphics

> ID：15731421
> 
> 赞同：1
> 
> 时间：2013-03-31T16:06:42.673
> 
> 标签：java, swing, jpanel, java-2d, paintcomponent

我创建了一个名为 Test 的类，很可能是我出错的地方。

```
import javax.swing.JPanel;
import java.awt.*;
public class Test extends JPanel {

Graphics grap;
public void sun()
{
    super.paintComponent(grap);
    grap.setColor(Color.YELLOW);
    grap.fillOval(0,0,20,20);
}
} 
```

如您所见，我想使用一种方法在面板的左上角绘制一个黄色的“椭圆”，但我没有使用 PaintComponent 方法。现在我尝试在我的 Paint 组件方法中实现它，该方法位于一个名为 Painting 的类中。

```
//import...;
public class Painting extends JPanel{

   protected void paintComponent(Graphics g)
   {
      Test test = new Test();

      test.sun();

   } 
```

现在我创建了一个主窗口，它将创建一个面板并显示黄色椭圆形。

```
//import...
public class main extends JFrame{
    public static main(String [] args){

        JFrame window = new JFrame();
        window.add(new Painting());
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setSize(100,100);
        window.setLocationRelativeTo(null);
        window.setVisible(true);

    }

} 
```

但这不起作用。我有一种感觉，这是测试中的sun方法。我怎样才能让它工作？我查看了所有的 Java 书籍，但找不到任何可以提供帮助的东西。

请注意，我没有向方法中添加什么参数。

谢谢你，汤姆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:20:30.203

这里需要注意几点：

1.  `super.paintComponent`除非在被覆盖的`paintComponent`方法本身内，否则永远不要自己调用。
2.  如果您想做一些 Graphics 活动，请覆盖该`paintComponent`方法并在那里绘制图形
3.  当您覆盖`paintComponent`方法时，方法中的第一条语句应该是`super.paintComponent(g)`.

现在，按照以上所有要点，您的代码现在应该是这样的：

```
public class Test extends JPanel {

 public void paintComponent(Graphics grap)
 {
    super.paintComponent(grap);
    grap.setColor(Color.YELLOW);
    grap.fillOval(0,0,20,20);
 }
} 
```

你的`Painting`班级应该是这样的：

```
public class Painting extends JPanel{
   Test test;
   public Painting()
   {
     test = new Test();
     setLayout(new BorderLayout());
     add(test);
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T17:28:14.933

> 如果我想在不同的地方画 50 个椭圆，那么我会遇到大量代码的问题

然后，您将保留要绘制的椭圆的列表。请参阅[自定义绘画方法](http://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/)，它在面板上绘制一堆矩形。代码所做的只是循环遍历 ArrayList 以绘制 Rectangle。只需要几行代码。

# hadoop - 无法在 IDE 内为 Hadoop 项目运行 Maven，但它确实在 IDE 外编译

> ID：15731432
> 
> 赞同：2
> 
> 时间：2013-03-31T16:07:31.120
> 
> 标签：hadoop, intellij-idea, maven-3

我下载并安装：

*   -马文

*   -Cloudera Hadoop

*   -IntelliJ IDEA 终极版

*   -Tom Whites 的 GitHub 源代码示例：[https ://github.com/tomwhite/hadoop-book/](https://github.com/tomwhite/hadoop-book/)

当我在 IntelliJ 中打开 POM.xml 并执行 Maven 编译或 Maven 包时，它会失败并出现如下错误：

```
2,27] package org.apache.hadoop.fs does not exist                   
3,27] package org.apache.hadoop.io does not exist                   
4,27] package org.apache.hadoop.io does not exist                   
5,34] package org.apache.hadoop.mapreduce does not exist            
6,44] package org.apache.hadoop.mapreduce.lib.input does not exist  
7,45] package org.apache.hadoop.mapreduce.lib.output does not exist 
:[6,27] package org.apache.hadoop.io does not exist                 
:[7,27] package org.apache.hadoop.io does not exist                 
:[8,31] package org.apache.hadoop.mapred does not exist             
:[9,31] package org.apache.hadoop.mapred does not exist 
```

还有很多类似这样的符号未找到错误：

```
[ERROR] /Users/me/Downloads/hadoop-book-master/ch02/src/main/java/oldapi/MaxTemperatureReducer.java:[14,13] cannot find symbol
symbol: class Reducer
  implements Reducer<Text, IntWritable, Text, IntWritable> {
[ERROR] /Users/me/Downloads/hadoop-book-master/ch02/src/main/java/oldapi/MaxTemperatureReducer.java:[14,21] cannot find symbol
symbol: class Text
  implements Reducer<Text, IntWritable, Text, IntWritable> {
[ERROR] /Users/me/Downloads/hadoop-book-master/ch02/src/main/java/oldapi/MaxTemperatureReducer.java:[14,27] cannot find symbol 
```

但是如果我去命令行并复制粘贴他在他的 github 的自述文件中所说的命令，Maven 包就会成功完成。

```
Then you can build the code with:

% mvn package -DskipTests -Dhadoop.version=1.1.1

(Note that only the Hadoop version numbers specified in hadoop-meta/pom.xml
can be used here, not any version of Hadoop.) 
```

# file - Gnuplot：带有文件参数的球体

> ID：15731434
> 
> 赞同：1
> 
> 时间：2013-03-31T16:07:38.377
> 
> 标签：file, geometry, gnuplot

我正在尝试在 gnuplot 的帮助下用文件中给出的 X、Y、Z、R 绘制一个球体。

sphere1.dat：

```
# X     Y      Z       R
219.3  342.5  3153.2  213.08 
```

在大多数示例中，球体都是这样绘制的：

```
set parametric
set angle degree
set urange [0:360]
set vrange [-90:90]
set isosample 72,36
splot cos(u)*cos(v),sin(u)*cos(v),sin(v) 
```

有没有办法将 u,v 值与文件中的值结合起来？像这样的东西：

```
set angle degree
set urange [0:360]
set vrange [-90:90]
set isosample 72,36
splot 'sphere1.dat' using ($4*cos(u)*cos(v)+$1):($4*sin(u)*cos(v)+$2):($4*sin(v)+$3) title "Sphere1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:49:07.787

您可以使用 tail 和 awk 从数据文件中获取 x,y,z,r。

```
tail -1 data 
```

打印最后一行数据

```
awk '{print $i}' 
```

返回行的第 i 个空格分隔的部分

```
x = "`tail -1 sphere1.dat| awk '{print $1}'`"
y = "`tail -1 sphere1.dat| awk '{print $2}'`"
z = "`tail -1 sphere1.dat| awk '{print $3}'`"
r = "`tail -1 sphere1.dat| awk '{print $4}'`"

set parametric
set angle degree
set urange [0:360]
set vrange [-90:90]
set isosample 30,30
splot r*cos(u)*cos(v)+x,r*sin(u)*cos(v)+y,r*sin(v)+z 
```

# android - 按钮角圆角背景图像

> ID：15731436
> 
> 赞同：2
> 
> 时间：2013-03-31T16:07:42.280
> 
> 标签：android, image, button, background, rounding

我想用 background.png 和圆角创建 Button。这个怎么做？

我在 MainActivity 上写了这段代码：

```
<Button 
    android:layout_width="match_parent"
    android:layout_height="40dip"
    android:text="LOGIN TO THE GAME"
    android:textColor="#ffffff"
    android:background="@drawable/button_corners" /> 
```

我创建了文件'button_corners.xml'，其中包含：

```
 <?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <corners
        android:radius="10dip" />

    <stroke
        android:width="0.5dp"
        android:color="#000000" />

</shape> 
```

现在如何将背景图像添加到此按钮？帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T14:48:06.553

带圆角和图片的按钮，我从未使用过。但是对于带有颜色背景的按钮，没有任何图像，我使用了以下代码：

关于活动：

```
<Button 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="20dp"
    android:text="Ementas"
    android:background="@drawable/button_corners"/> 
```

在文件“button_corners.xml”上：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle"
    android:padding="10dp" >

    <corners 
        android:bottomRightRadius="10dp"
        android:bottomLeftRadius="10dp"
        android:topLeftRadius="10dp"
        android:topRightRadius="10dp"/>

    <gradient
        android:startColor="@color/green_dark"
        android:endColor="@color/green_light"
        android:angle="270" />
</shape> 
```

我还有一个带有颜色的文件：

```
<resources>
    <color name="green_dark">#98B505</color>
    <color name="green_light">#5F7102</color>
</resources> 
```

最终结果是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/UEyUk.png)

我认为使用图像，代码应该不会有太大的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T19:51:33.777

使用线性布局（A）并将您拥有的任何图像设置为背景。然后使用另一个线性布局（B）放置在线性布局（A）内，并为该布局提供圆角背景。

```
<LinearLayout
            android:id="@+id/A"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/whateverimage"
            android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/B"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/roundedstuff"
            android:orientation="vertical" >
</LinearLayout>
</LinearLayout> 
```

roundedstuff.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<gradient 
    android:startColor="#00000000" 
    android:endColor="#00000000" />
 <padding android:left="2dp"
    android:top="2dp"
    android:right="2dp"
    android:bottom="2dp" />
<stroke
    android:width="2dp"
    android:color="#ffffff" />
<corners 
    android:bottomRightRadius="10dp" 
    android:radius="10dp"
    android:bottomLeftRadius="10dp" 
    android:topLeftRadius="10dp"
    android:topRightRadius="10dp" /> 
```

将其保存到可绘制文件夹

# asp.net-mvc-4 - MVC ViewModel - 对象引用未设置为对象的实例

> ID：15731440
> 
> 赞同：0
> 
> 时间：2013-03-31T16:08:01.963
> 
> 标签：asp.net-mvc-4, model, viewmodel

我在尝试将 DataTable 转换为包含行和列的视图模型时收到“对象引用未设置为对象的实例”错误。

## 视图模型

```
public class ViewModel
{
        public List<ColumnViewModel> Columns { get; set; }
        public List<RowViewModel> Rows { get; set; }
}

    public class ColumnViewModel
    {
        public string Name { get; set; }
    }

    public class RowViewModel
    {
        public List<CellValueViewModel> Values { get; set; }
    }

    public class CellValueViewModel
    {
        public string Value { get; set; }
    } 
```

## 模型

```
 ViewModel myViewModel = new ViewModel();
    CellValueViewModel myCellValueViewModel = new CellValueViewModel();
    RowViewModel myRowViewModel = new RowViewModel();
    foreach (DataColumn column in GridData.Columns)
    {
        ColumnViewModel myColumnViewModel = new ColumnViewModel();
        myColumnViewModel.Name = column.ColumnName;
        myViewModel.Columns.Add(myColumnViewModel);
    } 
```

错误发生在`myViewModel.Columns.Add(myColumnViewModel);` 我不明白为什么会发生这种情况，因为我已经实例化了我在这里使用的每个对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:09:13.083

好吧，您从未为该`Columns`属性分配值。在尝试将值添加到此列表之前，请确保您已实例化它：

```
ViewModel myViewModel = new ViewModel();
myViewModel.Columns = new List<ColumnViewModel>(); 
```

# ios - 未声明的标识符'webview'

> ID：15731443
> 
> 赞同：0
> 
> 时间：2013-03-31T16:08:08.897
> 
> 标签：ios, objective-c, uikit

我正在构建一个标签栏应用程序，每个标签中都有不同的 pdf。我有两组视图控制器。每个都有这个相对代码

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *path = [[NSBundle mainBundle] pathForResource:@"Winter_Newsletter"
                                                     ofType:@"pdf"];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];
    [webview setScalesPageToFit:YES];    
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我不断收到错误“未声明的标识符'网络视图'”我在做什么错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:50:42.977

另外，不要忘记创建 web 视图的属性并控制拖动以将其连接起来！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:10:54.227

您在代码中显示了 webView(**大写 V** ) 和 webview( **small v** )的两个版本

```
[webView loadRequest:request];
[webview setScalesPageToFit:YES]; 
```

如果您使用的是自动合成，那么它应该是

`self.webView`或者`_webView`

# eclipse - eclipse 网络浏览器的“后退”按钮在哪里？

> ID：15731444
> 
> 赞同：1
> 
> 时间：2013-03-31T16:08:14.833
> 
> 标签：eclipse

只是在 Eclipse 中阅读网页。Alt-Left 将我带到我正在编辑的上一段代码。转到上一个网页的“返回”按钮在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:13:18.530

它在上下文菜单上。右键单击该页面并选择“返回”。

# ember.js - Ember 数据和对象图

> ID：15731446
> 
> 赞同：1
> 
> 时间：2013-03-31T16:08:39.800
> 
> 标签：ember.js, ember-data

我对**emberjs**完全陌生，但很高兴能进去玩。我正在努力解决的一件事是......你能加载一个对象图深度超过 1 的 JSON 对象吗？我的意思是，将模型设置为一系列名称/值对似乎相对简单其中值是一个简单类型（字符串、整数、日期等），但如果它是一个对象呢？

我想它*可能*连接到关系模型，但从我在文档中看到的内容来看，这只允许 FK->PK 关系而不是内联对象。我可能在解释我的意思方面做得很糟糕，所以让我举个例子：

假设我在端点有一个 REST 调用：`http://my.url.com/place/[place_id]`并且 GET 调用返回：

```
{
    place: {
        name: "string",
        desc: "string",
        location: {
            longitude: float,
            latitude: float,
            radius: int
        }
} 
```

在上面的例子中，我很难理解如何建模`location`。任何有关如何扩展它的帮助将不胜感激：

```
App.Place = DS.Model.extend({
    name: "string",
    desc: "string",
    location: "?????"
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:31:23.500

您可以引入新的数据转换来处理原始 JSON。

```
DS.RESTAdapter.registerTransform('raw', {
    deserialize: function(serialized) {
        return serialized;
    },  
    serialize: function(deserialized) {
        return deserialized;
    }   
}); 
```

现在您可以将模型定义`raw`为`location`.

```
App.Place = DS.Model.extend({
    name: DS.attr('string'),
    desc: DS.attr('string'),
    location: DS.attr('raw')
}); 
```

如果您来自服务器的数据具有以下形式

```
place: {
    id: 'place',
    name: 'foo',
    desc: 'bar',
    location: {
        longitude: 1,
        latitude: 2,
        radius: 3
    }
} 
```

然后您可以在模板中绑定到`location.longitude`等。这是在[jsfiddle 中充实的](http://jsfiddle.net/ahmacleod/5Wmht/)。

# javascript - facebook登录对话框未加载

> ID：15731455
> 
> 赞同：0
> 
> 时间：2013-03-31T16:09:34.887
> 
> 标签：javascript, facebook-graph-api, facebook-javascript-sdk

有谁知道为什么我的网站上没有加载 Facebook 登录对话框..？

正如您将在下面看到的，我在 window.fbAsyncInit 之外的另一个函数中有 FB.getLoginStatus，并从我的登录按钮调用它。

cconsole 窗口上没有出现任何错误..！

```
 <div id="fb-root"></div>
    <script>
      // Additional JS functions here
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '503635172990168', // App ID
          channelUrl : '//http://www.angeloscleanthous.com/chat/channel.html', // Channel File
          status     : true, // check login status
          cookie     : true, // enable cookies to allow the server to access the session
          xfbml      : true  // parse XFBML
        });

      };
    function doLogin(){
        FB.getLoginStatus(function(response) {
          if (response.status === 'connected') {
            // connected
          } else if (response.status === 'not_authorized') {
             login();
          } else {
             login();
          }
         });
    }
    function login() {
        FB.login(function(response) {
            if (response.authResponse) {
                testAPI();
            } else {
                // cancelled
            }
        });
    }
    function testAPI() {
        console.log('Welcome!  Fetching your information.... ');
        FB.api('/me', function(response) {
            console.log('Good to see you, ' + response.name + '.');
        });
    }
      // Load the SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));
    </script> 
```

-------------HTML PART------------（登录按钮）

```
<button onclick="doLogin();" class="classname">Login</button> 
```

# c++ - 使用额外检查初始化 const 变量

> ID：15731462
> 
> 赞同：1
> 
> 时间：2013-03-31T16:10:19.573
> 
> 标签：c++, initialization, constants, initializer-list

我有以下内容`struct`：

```
// options for pool_base-based pools
struct pool_options
{
    // pool initial_size
    const uint32 initial_size;

    // can pool grow?
    const bool can_grow;
    // if minimum free space by percent?
    // true for percentage size, false for fixed-amount-of-bytes minimum.
    const bool min_by_percent;
    // minimum value.
    const uint32 minimum_size;
    // is growth by percentage?
    // true for percentage size, false for fixed-amount-of-bytes growth.
    const bool grow_by_percent;
    // growth value.
    const uint32 grow_size;

    // true to prevent manager from free up extra space.
    const bool keep_extra_space;
    // is shrinkage by percent?
    // true for percentage size, false for fixed-amount-of-bytes shrinkage.
    const bool max_by_percent;
    // maximum value.
    const uint32 maximum_size;

    // is defragment occur by percent?
    // true for percentage defragment, false for fixed-amount-of-bytes defragment.
    //
    // if percentage of fragmented memory from total memory occur then defragment take place.
    const bool defrag_by_percent;
    // fragment size
    const uint32 fragment_size;
}; 
```

我将在构造函数初始化器列表中初始化常量，但问题是我需要进行额外检查以验证输入值，但这会导致编译器发出`l-value specifies const object`错误信号。构造函数的代码：

```
pool_options(uint32 is, bool cg, bool mip, uint32 mis, bool gp, uint32 gs, bool kes, bool map, uint32 mas, bool dp, uint32 fs)
    : initial_size(is), can_grow(cg), min_by_percent(mip), minimum_size(mis), grow_by_percent(gp),
      grow_size(gs), keep_extra_space(kes), max_by_percent(map), maximum_size(mas), defrag_by_percent(dp), fragment_size(fs)
{
    if (can_grow)
    {
        if (min_by_percent && minimum_size > 100) minimum_size = 100;
        if (grow_by_percent && grow_size > 100) grow_size = 100;
    }
    else
    {
        min_by_percent = false;
        minimum_size = 0;
        grow_by_percent = false;
        grow_size = 0;
    }

    if (keep_extra_space)
    {
        max_by_percent = false;
        maximum_size = 0;
    }
    else
    {
        if (max_by_percent && maximum_size > 100) maximum_size = 100;
    }

    if (defrag_by_percent)
    {
        if (fragment_size > 100) fragment_size = 100;
    }

} 
```

这`struct`是我目前正在处理的内存管理器，并且变量必须是常量，因此一旦分配它就永远不会被其他类更改。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:14:29.993

您可以使用检查器成员函数，例如：

```
struct Test
{
    const int x;

    Test(int x) : x(checkX(x)) // <--------- check the value
    {
       std::cout << this->x << std::endl;
    }

private:

    int checkX(int x) const
    {
        if (x < 0 || x > 100)
            return 0;
        else
            return x;
    }
};

int main()
{
    Test t(-10);
} 
```

# php - 寻找 Windows azure 的 Linux 替代品

> ID：15731464
> 
> 赞同：2
> 
> 时间：2013-03-31T16:10:20.793
> 
> 标签：php, azure, amazon-ec2, hosting, cloud

我目前正在使用 Windows Azure 来托管几个网站。在这一点上，我不得不说我喜欢它的一切。创建一个站点很容易，并且在几分钟内您就可以通过 FTP 访问并编写代码。整个画面只有一个缺点，那就是您设置的这些站点托管在 Windows IIS 上。

在这一点上，我的 PHP 几乎不存在，我正在学习，但到目前为止，我所有的编码经验都是在 Linux 上运行 Apache 的服务器上。这与我在 Linux 机器上开发的事实相结合。我意识到对于更高级的用户来说，这 IIS 与 Apache 的东西并没有什么不同，但对我来说，这很困难。目前，根据我的经验，我想专注于学习 PHP 而不是服务器的细微差别。

我已经尝试过 Amazon EC2，但我不想从 VPS 命令行管理我的站点。

我的问题是这个；是否有像 AppHarbor 或 Heroku 这样的服务以类似于 Windows Azure 的方式在 Linux 上提供快速简单的可扩展 PHP 托管？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:54:07.007

有几个选择，比如

```
https://www.digitalocean.com/ easy to use and scale. 
```

这是另一个选择

```
https://www.appfog.com/ 
```

# html - 如果前一个元素包含图像，则行内块元素移动到底部

> ID：15731466
> 
> 赞同：0
> 
> 时间：2013-03-31T16:10:23.643
> 
> 标签：html, css

[http://jsfiddle.net/dsUnc/](http://jsfiddle.net/dsUnc/)

但是，当我用文本替换 img 标签时 - 元素的位置与预期的一样（彼此相邻，高度相同）。

发生在所有浏览器上。

如何解决？

`float: left`不是一种选择

HTML：

```
<div id='main'>
    <div id='first'>
      <img src='https://www.google.ru/images/icons/product/chrome-48.png' height='30'>
    </div>
    <div id='second'>Text</div>
</div> 
```

CSS：

```
div {
    border: 1px solid gray;
    height: 30px;
}
#first {
    display: inline-block;
    height: 30px;
}
#second {
    display: inline-block;
    height: 30px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:15:05.210

添加`vertical-align: top`做它没有`float`。

[jsFiddle](http://jsfiddle.net/Tyriar/dsUnc/4/)

```
#first {
    display: inline-block;
    height: 30px;
    vertical-align: top;
}
#second {
    display: inline-block;
    height: 30px;
    vertical-align: top;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:20:12.320

制作容器`relative position`和你想要定位的`absolute position`div`top:0;`

[http://jsfiddle.net/uqAGt/](http://jsfiddle.net/uqAGt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:14:58.127

只需将`float: left`or添加`vertical-align: top`到您的子 div 中：

演示：http: [//jsfiddle.net/dsUnc/2/](http://jsfiddle.net/dsUnc/2/)

演示：http: [//jsfiddle.net/dsUnc/5/](http://jsfiddle.net/dsUnc/5/)

# regex - 正则表达式找不到匹配项

> ID：15731467
> 
> 赞同：0
> 
> 时间：2013-03-31T16:10:27.990
> 
> 标签：regex

我想在这里提取一些信息是我的正则表达式

```
<tr>
<td>([^<]+)<i><a href="([^<]+)" title="([^<]+)">([^<]+)<\/a><\/i><sup id="([^<]+)" class="([^<]+)"><a href="([^<]+)"><span>[<\/span>1<span>]<\/span><\/a><\/sup><\/td>
<td><a href="([^<]+)" title="([^<]+)">([^<]+)<\/a><\/td>
<td><a href="([^<]+)" title="([^<]+)">([^<]+)<\/a><\/td>
<td>([^<]+)<\/td>
<td>([^<]+)<\/td>
</tr> 
```

这是示例html

```
<tr>
<td><i><a href="/wiki/3Xtreme" title="3Xtreme">3Xtreme</a></i><sup id="cite_ref-18" class="reference"><a href="#cite_note-18"><span>[</span>18<span>]</span></a></sup></td>
<td><a href="/wiki/989_Studios" title="989 Studios">989 Studios</a></td>
<td><a href="/wiki/989_Studios" title="989 Studios">989 Studios</a></td>
<td>1999-03-31<sup>NA</sup></td>
<td>NA</td>
</tr> 
```

截至目前，我只想获取数据以查找匹配项。您能看出它与此不匹配的任何原因吗？

对于所有的仇恨者......我不关心你是否应该在 html 上使用正则表达式的选择......对于这种情况，它会很好用。我有一页，我需要的数据在一个表中。一旦我可以获得数据，我会将其保存到我的数据库中，并且永远不必再次使用正则表达式。如果您的评论或答案是关于您使用 html 的正则表达式的选项，那就太好了。不要发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:38:28.293

...第二行：

```
<td>([^<]+)<i> 
```

不能指望匹配：

```
<td><i> 
```

当您在标签之间没有任何内容时，您放置了一个相当于“{1,}”的“+”。没有检查你的正则表达式的其余部分，但无论如何它不能工作。

**编辑：**
还请更正`"([^<]+)"`等等（我希望你明白为什么）......并在你更正时编辑你的正则表达式。

**编辑2：**
看到这是一场灾难（对不起，但这是事实：/）：请考虑用简单的[（。*？）替换所有不适用于所有情况的（[^<] +）东西](http://www.regular-expressions.info/repeat.html)

**编辑 3：**
[ 和 ] 必须转义。（\d 将帮助您捕捉数字）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:59:47.867

```
<span>[<\/span>1<span>]<\/span> 
```

这里有很多问题：您必须转义括号，显然 1 不会匹配 18

# addthis - addThis 按钮不显示

> ID：15731469
> 
> 赞同：0
> 
> 时间：2013-03-31T16:10:31.843
> 
> 标签：addthis

我正在使用默认代码。为什么我的按钮不显示？我需要在本地拥有图像吗？需要绝对路径？

```
<!-- AddThis Follow BEGIN -->

<div class="addthis_toolbox addthis_default_style">
<a class="addthis_button_facebook_follow" addthis:userid="myclient"></a>
<a class="addthis_button_twitter_follow" addthis:userid="myclient"></a>
<a class="addthis_button_pinterest_follow" addthis:userid="myclient"></a>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=xa-510e973014b90fdf"></script>
<!-- AddThis Follow END --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:48:50.813

1.  您不需要将图像存储在本地。
2.  您不需要绝对路径

您是否检查过 js 是否正确加载？您可以在 chrome（开发人员工具）或 firefox（firebug）中执行此操作，并检查它是否能够正确加载脚本。

# php - 如何在 PHP 搜索框中显示 MYSQL 数据

> ID：15731470
> 
> 赞同：0
> 
> 时间：2013-03-31T16:10:33.377
> 
> 标签：php, mysql

您好，我在执行这项任务时遇到了很大的问题

我在 xampp 上建立了一个名为 search_test 的数据库，其中包含名字和姓氏作为字段。我已经设置了一个 php 表单，所以当用户输入一个名字说 Andre 时，它​​会返回数据库中的所有 andres。有一个问题它一直告诉我没有搜索结果，即使我知道数据库中有数据 这是应该是一个名为 index.php 的 php 页面的代码

```
 <?php
    mysql_connect("localhost","michael","xcA123sd") or die(mysql_error());
    mysql_select_db("search_test") or die ("could not find db"); 
     $output ='';
    if (isset ($_POST['search']));
        $searchq = $_POST['search'];
    $query = mysql_query("SELECT * FROM members WHERE firstname LIKE '%searchq%'" ) or die("could not search");
    $count = mysql_num_rows($query);
    if($count == 0){
        $output = 'There was no search results !';
        }else{
        while($row = mysql_fetch_array($query)){
        $fname = $row['firstname'];
        $output .='<div> '.$fname.'</div>';
        }

        }
}

?>

 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>search</title>
</head>
<body>
<form action="index.php" method="post">
<input type="text" name="search" placeholder="search for members"/> 
<input type="submit" value=">>"/>
</form>
<?php print("$output);?>
</body
</html> 
```

例如，我输入 andre 并得到响应

没有搜索结果！

有人可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:18:29.453

问题来自您的这行代码

$query = mysql_query("SELECT * FROM members WHERE firstname LIKE '%searchq%'" )

变量 searchq 后面没有 $

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T16:22:22.170

首先：你想要

```
$query = mysql_query("SELECT * FROM members WHERE firstname LIKE '%searchq%'" ) or die("could not search"); 
```

成为

```
$query = mysql_query("SELECT * FROM members WHERE firstname LIKE '%$searchq%'" ) or die("could not search"); 
```

（注意额外的`$`）。

也就是说，您有一个很大的 SQL 注入问题：假设，我“正常”运行一次查询：这让我对列有一个概念。现在我发布`' UNION ALL SELECT correct_field_num FROM information_schema.TABLES WHERE NAME LIKE '%`作为我的搜索 - 这给了我你的表格结构。通过发布，`' UNION ALL SELECT correct_column_num FROM any_table_name WHERE 'x' LIKE '%`我可以阅读任意表格。

确保您使用一种易于理解的技术从**任何**用户输入构建安全查询。`mysql_real_escape_string()`从不推荐使用的查询到参数化查询都有一个范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T16:13:42.790

```
LIKE '%searchq%'" 
```

如果您需要成为变量，它会搜索像“searchq”这样的字符串，添加相应的美元符号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T16:18:26.143

对于您的选择语句，您有：

```
$query = mysql_query("SELECT * FROM members WHERE firstname LIKE '%searchq%'" ) or die("could not search"); 
```

它应该是：

```
$query = mysql_query("SELECT * FROM members WHERE firstname LIKE '%".$searchq."'%" ) or die("could not search"); 
```

因为您正在搜索名为 searchq 的变量中的内容，而不是实际的字符串 searchq :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T16:17:51.113

尝试这个：

```
<?php
mysql_connect("localhost","michael","xcA123sd") or die(mysql_error());
mysql_select_db("search_test") or die ("could not find db"); 
$output ='';
if (isset($_get['search'])){
    $searchq = $_get['search'];
}
$query = mysql_query("SELECT * FROM members WHERE firstname LIKE $searchq" ) or die("could not search");
$count = mysql_num_rows($query);
if($count == 0){
    $output = 'There was no search results !';
}else{
    while($row = mysql_fetch_array($query)){
        $fname = $row['firstname'];
        $output .='<div> '.$fname.'</div>';
    }
}
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>search</title>
</head>
<body>
<form action="index.php" method="get">
<input type="text" name="search" placeholder="search for members"/> 
<input type="submit" value=">>"/>
</form>
<?php print("$output);?>
</body>
</html> 
```

# magento - 获取特定类别级别

> ID：15731475
> 
> 赞同：7
> 
> 时间：2013-03-31T16:11:18.920
> 
> 标签：magento

如何从 Magento 获得特定的类别级别，我的类别设置现在看起来像这样。

```
root_catalog
    |-Shop
        |-Shoes
        |-T-shirts
    |-Brands
        |-Nike
           |-Womens
           |-Mens
        |-Adidas
        |-Asics

<?php if( $category = Mage::getModel('catalog/category')->load( $categories[1]) ): ?>
    <?php echo $category->getName(); ?>
<?php endif ?> 
```

当调用 $category->getName(); 我只想显示品牌名称，可以吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T05:42:14.550

您可以从中获取类别级别 `$category = Mage::getModel('catalog/category')->load( $categories[1]) )->getLevel()` ，然后检查您的品牌名称类别级别，如果匹配则显示名称。

例如，假设品牌类别级别为 3

```
<?php if( $category = Mage::getModel('catalog/category')->load( $categories[1]) ): ?>
    <?php if($category->getLevel() == 3)
        echo $category->getName(); ?>
    <?php endif ?>
<?php endif ?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-27T09:26:28.857

ANKIT 的答案很好，但可以通过实际查询特定级别而不是加载整个集合并执行条件来改进它。例如，如果您想获取特定级别的所有类别：

```
<ul>
<?php $categories = Mage::getModel('catalog/category')
                         ->getCollection()
                         // magic is prepared here..
                         ->addAttributeToSelect('*')
                         // then the magic happens here:
                         ->addAttributeToFilter('level', array('eq'=>2))
                         ->load();

      foreach($categories as $category):
?>
<li>$category->getName()</li>
<?php endforeach; ?>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-30T10:23:22.213

```
<?php 

$objectManager = \Magento\Framework\App\ObjectManager::getInstance();
$product = $objectManager->get('Magento\Framework\Registry')->registry('current_product');
$categories = $product->getCategoryIds(); /*will return category ids array*/

foreach($categories as $category){

    $cat = $objectManager->create('Magento\Catalog\Model\Category')->load($category);
    if ($cat->getLevel() == 2) {
        $catName = $cat->getName().","; ?>
        <div class="brand_bg">
            <label><?php /* @escapeNotVerified */ echo __('Category :') ?></label>

            <?php echo $catName; ?>
        </div>
    <?php } ?>
<?php } ?>

?> 
```

# erlang - <<>> 在 Erlang 代码中是什么意思？

> ID：15731477
> 
> 赞同：2
> 
> 时间：2013-03-31T16:11:25.467
> 
> 标签：erlang

在一些代码中，我看到了这样的东西

```
{ok, Req2} = cowboy_req:reply(200, [], <<"Hello World!">>, Req), 
```

我不知道那些 <<>> 是什么意思.. 谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T16:15:12.553

在 Erlang 中，它们指的是*binaries/bitstrings*，请参阅[Bit Strings and Binaries](http://www.erlang.org/doc/reference_manual/data_types.html#id65994)和[Bit Syntax Expressions](http://www.erlang.org/doc/reference_manual/expressions.html#bit_syntax)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:14:02.707

这是用于创建二进制序列。请参阅[相关文档](http://www.erlang.org/doc/programming_examples/bit_syntax.html)。

# ruby-on-rails - Ruby on Rails 双重关联

> ID：15731484
> 
> 赞同：1
> 
> 时间：2013-03-31T16:12:00.353
> 
> 标签：ruby-on-rails, associations

我有一个`student`可以`comment`留下很多关于它们的：

```
class Student < ActiveRecord::Base
  has_many :comments
end

class Comment < ActiveRecord::Base
  belongs_to :student
end 
```

然而，评论需要属于它所针对的学生，但也需要属于发表评论的学生。即评论需要同时属于两个不同的学生。

如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T16:13:45.043

在评论表中，您应该有 a`commenter_id`和 a `student_id`，因此评论可以属于评论者，也可以属于学生。

```
class Comment < ActiveRecord::Base
  belongs_to :student
  belongs_to :commenter, class_name: 'Student'
end 
```

# eclipse - #Crawl.run() -> #JobClient.runJob() 期间出现 IOException

> ID：15731486
> 
> 赞同：0
> 
> 时间：2013-03-31T16:12:29.317
> 
> 标签：eclipse, apache, hadoop, nutch

我对 nutch 很陌生，所以请多多包涵。在我的一次测试爬网期间，我遇到了 IOException。我正在使用**带有 hadoop 0.20.2 的 nutch 1.6**（在设置文件访问权限时为 Windows 兼容性选择此版本）。

我正在通过 Eclipse 运行 nutch。我按照本指南从 SVN 导入 nutch：[http ://wiki.apache.org/nutch/RunNutchInEclipse](http://wiki.apache.org/nutch/RunNutchInEclipse)

我的爬虫代码来自这个网站：[http ://cmusphinx.sourceforge.net/2012/06/building-a-java-application-with-apache-nutch-and-solr/](http://cmusphinx.sourceforge.net/2012/06/building-a-java-application-with-apache-nutch-and-solr/)

这是系统异常日志：

未设置 solrUrl，将跳过索引...
爬取开始于：爬
取 rootUrlDir = urls
threads = 1
depth = 1
solrUrl=null
topN = 1
Injector：从 2013-03-31 23:51:11 开始
Injector： crawlDb： crawl/crawldb
Injector: urlDir: urls
Injector: 将注入的 url 转换为爬取 db 条目。

```
java.io.IOException: Job failed! 
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1252) 
    at org.apache.nutch.crawl.Injector.inject(Injector.java:
    at org.apache.nutch.crawl.Crawl.run(Crawl.java:
    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:
    at rjpb.sp.crawler.CrawlerTest.main(CrawlerTest.java:51) 
```

我在 Crawl.java 中看到这些调用涉及 #Injector.inject() 之前的路径

```
Path crawlDb = new Path(dir + "/crawldb"); 
Path linkDb = new Path(dir + "/linkdb"); 
Path segments = new Path(dir + "/segments"); 
Path indexes = new Path(dir + "/indexes"); 
Path index = new Path(dir + "/index"); 
```

目前我的 Eclipse 项目不包括文件夹 crawldb、linkdb、segments ......我认为我的问题是我没有设置所有必要的文件进行爬行。我只设置**了 nutch-site.xml、regex-urlfilter.txt 和 urls/seed.txt**。关于此事的任何建议都会有很大帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:21:08.543

当我尝试在 Windows 上运行 nutch 1.6 时，我并没有取得太大的成功。我下载了已知在 Windows 中运行的最新版本（nutch 1.2）并且没有任何问题。

# php - 如何在 slim 框架中处理 URL 中的参数？

> ID：15731492
> 
> 赞同：1
> 
> 时间：2013-03-31T16:12:53.253
> 
> 标签：php, slim

一个简单的 REST GET 调用

```
http://localhost/root/student/11 
```

可以通过

```
 $data->get('/student/:id', 'getStudent'); 
```

但是，我想发送参数数据，因为它解决了我的其他问题

```
 http://localhost/root/student?id=11 
```

如何在 SLim 框架中处理这些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:04:49.820

Slim 文档：[请求变量](http://docs.slimframework.com/#Request-Variables)。

你的例子：

```
$app->get('/root/student', function() use ($app) {
    $id = $app->request()->get("id");
    //$id is '11' now
}); 
```

# java - 在ant构建文件中导入jar文件

> ID：15731505
> 
> 赞同：2
> 
> 时间：2013-03-31T16:13:56.003
> 
> 标签：java, ant, build, jar

我正在尝试编译一个从 jar 导入类但它不工作的项目。这是我的主要课程：

```
package sample.calendar;
import org.jasypt.util.password.*;
public class OutlookToGmailCalendarSync {
  public static void main(String[] args) {
    System.out.println("hi");
  }
} 
```

这是我的 build.xml：

```
<project name="MyCalendarSample" default="run" basedir=".">
    <description>
        simple example build file
    </description>
  <!-- set global properties for this build -->
  <property name="src" location="src"/>
  <property name="build" location="build"/>
  <property name="dist"  location="dist"/>

  <path id="path.class">
    <pathelement location="build"/>
    <fileset dir="lib">
       <include name="*.jar"/>
    </fileset>
  </path>

  <!--Run-->
  <target name="run" depends="compile"
   description="Runs the complied project">
    <java fork="true" classname="sample.calendar.OutlookToGmailCalendarSync">
      <classpath>
        <path refid="path.class"/>
      </classpath>
    </java>
  </target>

  <!--Compile-->
  <target name="compile" depends="init"
        description="compile the source " >
    <!-- Compile the java code from ${src} into ${build} -->
    <javac srcdir="${src}" destdir="${build}"/>
  </target>

  <!--Init-->
  <target name="init">
    <!-- Create the time stamp -->
    <tstamp/>
    <mkdir dir="${build}"/>
  </target>

  <!--Clean-->
  <target name="clean"
        description="clean up" >
    <!-- Delete the ${build} directory trees -->
    <delete dir="${build}"/>
  </target>

</project> 
```

这是我运行 ant 时的错误：

```
compile:
    [javac] C:\java\my\build.xml:31: warning: 'includeantruntime' was not set, d
efaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 28 source files to C:\java\my\build
    [javac] C:\java\my\src\sample\calendar\OutlookToGmailCalendarSync.java:2: er
ror: package org.jasypt.util.password does not exist
    [javac] import org.jasypt.util.password.*;
    [javac] ^
    [javac] 1 error 
```

org.jasypt.util.password 位于 lib 文件夹中的 jar 文件中，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:19:50.143

设置[编译命令](http://ant.apache.org/manual/Tasks/javac.html)的类路径以包含 jasypt.jar

# django - django-cms 示例中的导航节点

> ID：15731509
> 
> 赞同：0
> 
> 时间：2013-03-31T16:14:11.020
> 
> 标签：django, navigation, django-cms, django-mptt

你能给我一个例子，我如何使用导航节点？

[在文档](http://django-cms.readthedocs.org/en/2.2/getting_started/navigation.html#properties-of-navigation-nodes-in-templates)中找不到示例。

有这个`{{ node }}`，但它来自哪里？

我特别感兴趣`{{ node.is_leaf_node }}`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T18:46:30.543

每个导航节点只是菜单树中的一个链接/条目，因此它们是从您的页面布局生成的，例如：

```
- Home
  - About
  - Projects
    - Project A
    - Project B
  - Contact 
```

创建一个菜单，每个页面代表菜单树中的一个节点。

有一个他们在[默认`menu.html`模板](https://github.com/divio/django-cms/blob/develop/menus/templates/menu/menu.html)中工作的例子（`child`菜单中的节点在哪里）：

```
{% load menu_tags %}
{% for child in children %}
<li class="{% if child.selected %}selected{% endif %}{% if child.ancestor %}ancestor{% endif %}{% if child.sibling %}sibling{% endif %}{% if child.descendant %}descendant{% endif %}">
    <a href="{{ child.attr.redirect_url|default:child.get_absolute_url }}">{{ child.get_menu_title }}</a>
    {% if child.children %}
    <ul>
        {% show_menu from_level to_level extra_inactive extra_active template "" "" child %}
    </ul>
    {% endif %}
</li>
{% endfor %} 
```

# java - 聊天应用程序的服务器端实现

> ID：15731513
> 
> 赞同：2
> 
> 时间：2013-03-31T16:14:30.193
> 
> 标签：java, php, sql-server, web-services, chat

考虑任何聊天应用程序，例如 gtalk、whatsapp。我的问题与如何完成这些的服务器端实现有关。场景是：
客户端 A 想通过聊天服务器 S 与客户端 B 交谈。当实现通信时，我假设 S 上运行着 NAT（网络地址转换）服务器，双方通过该服务器向 S 标识自己。
之后此时，S 或在 S 上运行的任何聊天服务器充当 A 和 B 之间的中介。当 A 发送“Hi B，你好吗？”时，这句话肯定是要发送给 S，然后 S 会发送给 A .

我的第一个问题来了：客户端和服务器之间的通信，是加密的吗？我知道数据将根据 TCP/IP 通信堆栈进行打包，并且该数据包的数据部分将包含发送的实际文本 A。但是这个数据部分，是不是被加密保护了？意思是，如果有人在哪里嗅探数据包并提取数据，他们能弄清楚 A 发送给 B 的内容吗？
我问的原因：如果我要制作一个聊天应用程序，我如何保护我的用户的隐私不受陌生人甚至我自己的影响（因为 A 发送的内容对我的服务器代码是可见的，我不妨将它写到文件；谁知道，谷歌可能会这样做：P）。

现在假设 B 离线，那么 S 将不得不延迟向 B 发送消息，直到 B 在线并请求存储的消息。或者在这一点上，考虑像 dropbox 这样的应用程序临时存储文件。

第二个问题：S如何存储这个消息或文件？加密是如何完成的？简而言之，如果我要制作这样的产品，我怎么能向用户保证他们的数据在我们的服务器上是安全和私密的，即使我或我的公司也无法读取它，即使我们愿意。

总而言之，公共领域网站如何设法保持其用户数据的私密性和对陌生人及其自身的安全？

感谢您的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T16:28:18.963

我假设 1:1 通信（换句话说，Alice 和 Bob 有私人通信）——群聊很棘手。

看看[OTR](http://www.cypherpunks.ca/otr/)。基本上，您需要**端到端加密**，并且聊天客户端需要能够自动与其他用户交换密钥并帮助用户确定他是否信任密钥（例如，使用允许两个用户相互确认的[社会主义百万富翁协议](http://en.wikipedia.org/wiki/Socialist_millionaire)身份使用有关共享秘密的问题。因此，服务器不需要任何特殊代码 - 它只是转发或存储加密数据而不接触它。但是，客户端需要相当多的代码：

*   当两个用户第一次交谈时，客户端需要能够自动**交换公钥。**
*   客户端需要能够**存储其他用户的公钥**，以便他们在某人的密钥更改时注意到。
*   客户端需要能够协助用户**确认其他用户的身份**（例如使用社会主义百万富翁协议或通过电话交换公钥指纹）并**存储和永久显示有关此信任**的信息（例如作为小型“已验证”用户名旁边的图标）。
*   客户端需要能够使用在第一次联系时交换的密钥来**加密/解密**和**签名/验证来自其他对等方的消息。**

当然，为了让用户相信他们的客户真的按照你说的做，你需要**公开你的源代码**，或者至少**让一些独立的人来审查它**。

# javascript - Backbone collection not has no such method has each

> ID：15731516
> 
> 赞同：3
> 
> 时间：2013-03-31T16:14:47.457
> 
> 标签：javascript, jquery, backbone.js, requirejs

我有一个获取一些数据的骨干集合，但是当我尝试使用它获得的 each 方法迭代集合时

```
Object [object Array] has no method 'each' 
```

这是该系列的模型：

```
define (['backbone'],function(Backbone){
    return Backbone.Model.extend({
        url:'http://some_url/api/post/',
   });
});//end define 
```

集合本身：'

```
 define (['backbone','models/Post'],function(Backbone,Post){
return Backbone.Collection.extend ({
    model: Post,

    initialize: function (model)
    {
        this.userId = model.userId;
        this.start = model.start;
    },

    url: function ()
    {
        return "http://some_url.com/api/post?userid=" + this.userId + "&start=" + this.start;
    },

    parse: function (response)
    {
        return response;
    }

    });
  }); 
```

这是实例化使用集合的视图的调用：

```
cookieVal = document.cookie.split ("; ");
                posts = new PostCol ({userId:id =   cookieVal[0].split('=')[1],start:1});

                posts.fetch ().success (function (response){
                    post = new Post({collection:response});
                    post.render();
                    console.log (post.el);
                }); 
```

以及使用该集合的视图的实现：

```
 define (['jquery','underscore','backbone','views/Actor'],function($,_,Backbone,Actor){
return Backbone.View.extend ({
    className:'moment mb30',

    render: function ()
    {
        console.log (this.collection);
        this.collection.each (function (model){
            actor = new Actor ({model:model});
            this.$el.append (actor.render().el);
        },this);
        return this;
    }
});
}); 
```

为什么每种方法都不起作用，我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:42:46.343

这是一种更惯用的方法，它也可以修复您的错误，尽管您的代码有点奇怪，但我没有看到它的特定错误。

```
 posts = new PostCol({userId:id =   cookieVal[0].split('=')[1],start:1});
 post = new Post({collection:posts});
 posts.on('reset', post.render.bind(post)); //This should really go in PostView initialize
 posts.fetch(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T16:38:10.557

没有这样的方法`each()`。你的意思是`forEach()`？您需要`underscore.js`在页面中包含 Backbone 才能使用迭代功能。

# opengl - 有没有办法在 GLSL 1.2 片段程序中访问 mipmap？

> ID：15731523
> 
> 赞同：0
> 
> 时间：2013-03-31T16:15:56.247
> 
> 标签：opengl, glsl, mipmaps

我想在我的 GLSL 片段程序中访问不同级别的详细信息。我目前坚持使用旧版 OpenGL，包括 GLSL 1.2。不幸的是，我无法控制它。

我看到该`texture2DLod()`方法存在，但它似乎只能在顶点程序中使用。

我已经阅读[了这个问题](https://stackoverflow.com/questions/3635222/in-a-glsl-fragment-shader-how-to-access-to-texel-at-a-specific-mipmap-level)，但他们似乎正在使用 GLSL 1.4 或更高版本。不幸的是，我没有那个选项。

GLSL 1.2 片段程序中是否有任何方法可以对特定的 mipmap 级别进行采样？

如果没有直接执行此操作的功能，是否可以在不执行 8 个副本的情况下将 mipmap 作为单独的纹理发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:07:36.723

片段着色器（在 GLSL 1.20 中）无法访问特定的纹理 mipmap。但是，您始终可以在使用纹理之前更改[其基本/最大 mipmap 级别。](http://www.opengl.org/wiki/Texture#Mipmap_range)通过将它们都设置为相同的级别，您可以强制从该纹理访问任何纹理以使用特定的 mipmap 级别。

现在，您无法制作这些*单独*的纹理（除非您使用的是 NVIDIA 硬件并且[可以访问 ARB_texture_view](http://www.opengl.org/wiki/Texture_Storage#Texture_views)）。因此，每次您想选择一个新的 mipmap 时，您都必须忍受更改纹理的基本/最大级别。

# ember.js - Ember.js：切换嵌套视图

> ID：15731524
> 
> 赞同：0
> 
> 时间：2013-03-31T16:16:00.317
> 
> 标签：ember.js

我有一个带有一些登录/注册表单的标题，当您单击相应的按钮时会弹出这些表单。

虽然仅使用 jQuery 就可以正常工作，但我现在已经开始将 Ember 集成到应用程序中，并且在使用一些简单的切换功能时遇到了一些麻烦。

这是基本的 HTML 标记：

```
<header>
  <h1>Page Title<h1>

  <nav>
    <a id="toggles-login" class="button {{active_class_binding}}">Login</a>
    <a id="toggles-signup" class="button {{active_class_binding}}">Signup</a>
  </nav>

  <div id="popup-forms">
    <div id="login-form"></div>
    <div id="signup-form"></div>
  </div>
<header> 
```

我对 Ember 完全陌生，我真的不知道如何设置它。我唯一想要的是能够将弹出表单设置为`Ember.View`对象并使用一些`action`助手来切换它们。

我真的迷失了这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:41:57.693

一个简单的解决方案是触发简单的操作来显示相应的表单：

```
<a id="toggles-login" class="button {{active_class_binding}}" {{action showLoginForm target="view"}}>Login</a>
<a id="toggles-signup" class="button {{active_class_binding}}" {{action showSignupForm target="view"}}>Signup</a> 
```

相应的视图必须实现这两个动作：

```
App.YourView = Ember.View.extend({
  showLoginForm : function(){
    this.$("#login-form").toggle();
  },
  showSignupForm : function(){
   this.$("#signup-form").toggle();
  }
}); 
```

# c - getchar() 函数

> ID：15731525
> 
> 赞同：-4
> 
> 时间：2013-03-31T16:16:03.863
> 
> 标签：c, getchar

我目前正在尝试使用`getchar()`.

如果我用getchar（不计算点或逗号的条件）来做，我输入一个像345.234这样的数字，它是像3-4-5-2-3-4一样算6还是像34-5-23一样算4 -4？

```
i=0
while((c=getchar())!=',' && c!=EOF)
i++; 
```

简单的问题它一次计算 345.234 和 ctrl+z 输入的数量是 4 还是 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:32:40.037

`i``getchar()`只要不返回`EOF`或返回，每次调用都会递增`','` 。

如果您输入`345.234`然后按 Ctrl-Z，则在离开循环时将导致`7`for的值。`i``while`

3 个数字 + 1 个点 + 3 个数字 = 7 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:34:32.963

也许

```
#include <stdio.h>

int main(){
    int i=0,c;
    while(EOF!=(c=getchar())){
        if(c != ',' && c != '.' && c!= '\n')
            ++i;
    }
    printf("number count is %d\n", i);
    return 0;
} 
```

# css - 固定元素由于高度而未显示

> ID：15731527
> 
> 赞同：0
> 
> 时间：2013-03-31T16:16:27.993
> 
> 标签：css

我在一些 div 之间有一个固定的元素（图像）问题出在某些分辨率上，该元素未显示在页面底部（如果我全屏显示页面，我可以看到它）在我的分辨率上是可以的。

无论显示器的高度如何，如何定位要查看的固定元素？

```
<div class="row">
        <div class="span5" onclick="showVideo(5);" style="cursor:pointer;">
            <img src="./preview/pre5.jpg" style="height:95px; width : 220px;">

            <div class="textu" id="prez" style="font-weight:bold;">
                Gothaer AD 2013
            </div>
        </div>

        <div class="span5" onclick="showVideo(6);" style="cursor:pointer;">
            <img src="./preview/ebay.jpg" style="height:95px; width : 220px;">

            <div class="textu" id="prez" style="font-weight:bold;">
                Ebay AD 2012
            </div>
        </div><img onclick="showAll();" src="./img/updown.png" style=
        "cursor:pointer;position:fixed;padding-left:8px;padding-top:33px;">

        <div class="span5" onclick="showVideo(7);" style="cursor:pointer;">
            <img src="./preview/silva.jpg" style="height:95px; width : 220px;">

            <div class="textu" id="prez" style="font-weight:bold;">
                Silva 2012
            </div>
        </div>

        <div class="span5" onclick="showVideo(8);" style="cursor:pointer;">
            <img src="./preview/balenaziua.jpg" style=
            "height:95px; width : 220px;">

            <div class="textu" id="prez" style="font-weight:bold;">
                Alfredo Foods TVC
            </div>
        </div>
    </div> 
```

updown.png 是元素！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:29:00.060

如果您希望图像始终可见，则需要设置图像相对于页面的位置：

例如，您可以将以下 css 添加到您的图像中：

```
left:10%;
bottom:10%; 
```

**演示：**

[http://jsfiddle.net/AS5a3/](http://jsfiddle.net/AS5a3/)

# python - 在 Windows 7 中安装 py-bcrypt 时出现编译器错误

> ID：15731532
> 
> 赞同：5
> 
> 时间：2013-03-31T16:16:44.433
> 
> 标签：python, windows, compiler-construction, mingw, flask

我需要安装`flask-bcrypt`需要`py-bcrypt`. 当我尝试安装它时，出现错误：

```
C:\Users\Param\Downloads\py-bcrypt-0.3>python setup.py install
running install
running bdist_egg
running egg_info
writing py_bcrypt.egg-info\PKG-INFO
writing top-level names to py_bcrypt.egg-info\top_level.txt
writing dependency_links to py_bcrypt.egg-info\dependency_links.txt
reading manifest file 'py_bcrypt.egg-info\SOURCES.txt'
reading manifest template 'MANIFEST.in'
writing manifest file 'py_bcrypt.egg-info\SOURCES.txt'
installing library code to build\bdist.win32\egg
running install_lib
running build_py
running build_ext
error: don't know how to compile C/C++ code on platform 'nt' with 'MinGW32' comp
iler 
```

是什么导致了这个问题？

以前，我在我的 Windows 7 64 位机器上安装了 MinGW32。是否因为 MinGW 是 32 位而 Windows 是 64 位而出现问题？如果是这样，我应该怎么做才能解决这个问题？（如何在我的机器中使用 MinGW 64 位？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:44:12.643

这些库已经编译并在某处可用。有人已经上传了 Windows 的编译版本。我能够使用这些文件在 Windows 中运行 flask-bcrypt。

你只需将它扔到你的 flask/scripts/python 包文件夹中。

它在 Flask subreddit 中得到了回答，并**提供了下载所需库的位置**：

[http://www.reddit.com/r/flask/comments/15q5xj/anyone_have_a_working_version_of_flaskbcrypt_for/](http://www.reddit.com/r/flask/comments/15q5xj/anyone_have_a_working_version_of_flaskbcrypt_for/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:23:59.657

掠夺[这些 MinGW 二进制文件](http://www.develer.com/oss/GccWinBinaries)。它应该是专门为构建 Python 扩展模块而定制的 MinGW GCC 版本。

> 此安装程序尝试修复使用 GCC 编译 Python distutils 扩展的所有问题

# asp.net-mvc-4 - 用热毛巾和 durandal 链接到另一个控制器

> ID：15731534
> 
> 赞同：3
> 
> 时间：2013-03-31T16:16:51.867
> 
> 标签：asp.net-mvc-4, durandal, hottowel

我正在开发一个带有多个 spa 的 mvc4 应用程序。

我正在为我的水疗中心使用热毛巾模板。

我想要做的是在我的视图中有一个用于 spa 的锚链接转到另一个控制器的 index 操作，这样我的用户就可以退出一个 spa 并打开另一个。并非所有操作都会启动 spa，有些是常规的 mvc 样式页面。

我在我的 spa html 页面中放置了如下代码：

```
<a href="/controller/action">Navigate to another controller</a> 
```

这将更改浏览器中的 url，但总是重新加载 spa 的默认 html 页面。如果我点击浏览器中的刷新按钮，那么是否会转到正确的页面。

我已经能够将目标放在 _parent 或 _top 的锚标记上，例如：

```
 <a href="/controller/action" target="_parent">Navigate to another controller</a> 
```

它将导航到新的控制器页面。

我相信这是 durandal 框架中的一些东西，它阻止了 spa 导航到第二个控制器，但是由于我刚刚开始使用这个，我很难过我需要改变什么。我认为应该有比在锚标签中使用目标更好的方法，或者是最好的选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T19:50:26.087

我希望我已经正确地理解了你。我相信这种行为是由我的 Sammy.js（durandal 路由器当前基于）引起的。Sammy 的默认行为是劫持所有链接并根据 SPA 本身对其进行处理。

我不喜欢我正在处理的网站的这种行为，并且需要从 SPA 中链接到其他 MVC 网页。我真正想要的是让常规链接正常工作，并将散列链接解释为指向 SPA 中另一个视图的链接。所以“/controller/action”会转到另一个网页，而“#moduleId”会转到另一个 durandal V/VM。

我找到了适合我的 Sammy 选项并将其设置在我的 main.js 中

```
 // This stops Sammy from hijacking regular links
    Sammy.Application.prototype.disable_push_state = true; 
```

# linux - 使用 sed 将开始字符更改为另一个字符

> ID：15731537
> 
> 赞同：-1
> 
> 时间：2013-03-31T16:17:17.917
> 
> 标签：linux, bash, unix, sed

我可以使用 sed 重新插入数字吗？

我需要 sed 来读取输入，如果它以数字开头，请将其替换为方括号和数字

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:37:26.393

This should work with any sed:

```
sed 's/^[0-9]\{1,\}/[&]/' file 
```

or

```
sed 's/^[0-9][0-9]*/[&]/' file 
```

# jquery - 按 ID 过滤/缩短 AJAX/获取 html

> ID：15731538
> 
> 赞同：1
> 
> 时间：2013-03-31T16:17:20.883
> 
> 标签：正则表达式是可能的，但我想要一个更清洁的解决方案。, jquery, html-parsing, urlfetch

我目前正在使用 markdown 重写我的错误/常见问题解答消息（而不是以前使用的存储在数据库中的 HTML 内容）。现在，我临时设置了一个页面`errors.php`，其中的文本区域显示了我必须编辑的内容，并带有两个用于错误代码和数字的小输入框。

目前，当我单击 fetch 按钮（见图 1）时，它会按原样获取 HTML 并将其放入 textarea 中（见图 2）。

相反，我想要类似于`$.load(<link> + " #content")`AJAX 的东西。这可能吗？

## jQuery

```
$('#Fetch').on( 'click', function( e ) {
    e.preventDefault();
    var MyUrl = 'http://******/faq.php?code=' + $('input[name=code]').val() + "&num=" + $('input[name=number]').val();
    $.ajax( {
        url: MyUrl,
        type: "get",
        dataType: 'html',
        success: function( data ) {
            $('#MyArea').val(data);
        }
    });
}); 
```

* * *

以上工作完美，只有一个缺陷。它将整个页面的 HTML 内容转储到文本区域内。我只想拥有（假设）页面`#content`上的数据`faq.php`。通过对 HTML使用臭名昭著的[正则表达式是可能的，但我想要一个更清洁的解决方案。](/questions/tagged/regex "显示标记为“正则表达式”的问题")

* * *

![图 1](https://i.stack.imgur.com/lqSPW.png) [图 1]

* * *

![图 2](https://i.stack.imgur.com/aVKFo.png) [图 2]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:39:51.233

好的，所以我有一个想法，它不是最干净的，但我想它会起作用。

所以这是你的代码：

```
$('#Fetch').on( 'click', function( e ) {
    e.preventDefault();
    var MyUrl = 'http://******/faq.php?code=' + $('input[name=code]').val() + "&num=" + $('input[name=number]').val();
    $.ajax( {
        url: MyUrl,
        type: "get",
        dataType: 'html',
        success: function( data ) {
            $('#MyArea').val(data);
        }
    });
}); 
```

我们可以将成功更改为以下内容：创建一个`<div></div>`具有样式的容器`display:none`，然后填充此 div，然后从中获取#content。所以它看起来像这样：

```
$('#Fetch').on( 'click', function( e ) {
    e.preventDefault();
    var MyUrl = 'http://******/faq.php?code=' + $('input[name=code]').val() + "&num=" + $('input[name=number]').val();
    $.ajax( {
        url: MyUrl,
        type: "get",
        dataType: 'html',
        success:  function (data) {
               $("body").append("<div id='contentContainer'></div>").css("display","none");
               $("#contentContainer").html(data);
               var content = $("#contentContainer #content").html();
               $("#MyArea").val(content);
                   }
    }); 
```

之后你可以删除 div 但你明白了。

编辑：

好的，这是一个更好的主意：您需要将该信息实际解析为 jQuery 变量，然后从那里您可以像从 DOM 一样解析 html。

```
$('#Fetch').on( 'click', function( e ) {
    e.preventDefault();
    var MyUrl = 'http://******/faq.php?code=' + $('input[name=code]').val() + "&num=" + $('input[name=number]').val();
    $.ajax( {
        url: MyUrl,
        type: "get",
        dataType: 'html',
        success:  function (data) {
               var container = $(data);
               var content = $(container).find("#content").html();
               $("#MyArea").val(content);
                   }
    }); 
```

我认为这不会得到任何清洁。由于我们只与 DOM 交互一次，因此它的工作速度也很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:59:47.113

您可以使用 $( any html ) 从中创建一个 dom，然后在其中搜索“内容”容器。

例如，我们可以将您的功能更改为：-

```
$('#Fetch').on( 'click', function( e ) {
e.preventDefault();
var MyUrl = 'http://******/faq.php?code=' + $('input[name=code]').val() + "&num=" + $('input[name=number]').val();
$.ajax( {
    url: MyUrl,
    type: "get",
    dataType: 'html',
    success:  function (data) {
     var content = $("#content",$(data)).html();
     $("#MyArea").val(content);
        }
}); 
```

# java - INSERT 语句的未知 SQL 问题

> ID：15731540
> 
> 赞同：0
> 
> 时间：2013-03-31T16:17:32.337
> 
> 标签：java, sql

基本上我正在尝试使用 getSelectRow 的值更新数据库表。如您所见，查询找到了正确的数据，但在实际尝试将其添加到数据库时存在巨大问题。
错误出现在 SQL 语法中，但我不知道哪里出错了。请帮忙。

这是它执行的查询，但我不知道它为什么不更新表。

```
INSERT INTO customerdetails 
      FName        = 'Tim'
  AND SName        = 'Cooley'
  AND Address      = '52     Buckminster Drive Dorridge Solihull West Mids'
  AND Postcode     = 'B93 8PG' 
```

Java代码：

```
private void sendBtnMouseClicked(java.awt.event.MouseEvent evt) {                                     
    // TODO add your handling code here:

    int insertRow = newOrderTbl.getSelectedRow();
    int col2 = 0;

    String sql3 = "INSERT INTO customerdetails VALUES "
            + "FName            = '" + newOrderTbl.getValueAt(insertRow, col2)     +"'"
            + "AND SName        = '" + newOrderTbl.getValueAt(insertRow, col2+1)   +"'"
            + "AND Address      = '" + newOrderTbl.getValueAt(insertRow, col2+2)   +"'"
            + "AND Postcode     = '" + newOrderTbl.getValueAt(insertRow, col2+3)   +"'";
    System.out.println(sql3); 
    try{

        pst = conn.prepareStatement(sql3);
        pst.executeUpdate(sql3);
        JOptionPane.showMessageDialog(null, "Deleted");   

        CustomerTable();

    }
    catch (Exception e){
        JOptionPane.showMessageDialog(null, e);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:24:49.243

首先，您的 SQL 语法是错误的（至少它是您的数据库引擎的非标准 SQL 语法）。其次，您的代码容易受到 SQL 注入攻击。

为了解决这两个问题，你应该使用 a `PreparedStatement`（你做错了）。您的代码中的一个基本示例：

```
String sql = "INSERT INTO customerdetails (FName, SName, Address, Postcode) VALUES (?, ?, ?,?)";
PreparedStatement pst = conn.prepareStatemtnt(sql);
pst.setString(1, newOrderTbl.getValueAt(insertRow, col2));
pst.setString(2, newOrderTbl.getValueAt(insertRow, col2+1));
pst.setString(3, newOrderTbl.getValueAt(insertRow, col2+2));
pst.setString(4, newOrderTbl.getValueAt(insertRow, col2+3));
pst.executeUpdate();
//rest of code... 
```

假设您的 SQL 语法可以工作，那么您应该将值作为参数传递，类似于前面的示例：

```
String sql3 = "INSERT INTO customerdetails VALUES "
        + "FName            = ?"
        + "AND SName        = ?"
        + "AND Address      = ?"
        + "AND Postcode     = ?"
pst = conn.prepareStatement(sql3);
pst.setString(1, newOrderTbl.getValueAt(insertRow, col2));
pst.setString(2, newOrderTbl.getValueAt(insertRow, col2+1));
pst.setString(3, newOrderTbl.getValueAt(insertRow, col2+2));
pst.setString(4, newOrderTbl.getValueAt(insertRow, col2+3));
pst.executeUpdate();
//rest of code... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:25:09.077

对于更新声明，它将是 -

```
String sql3 = "INSERT INTO customerdetails(FName,SName,Address,Postcode) VALUES "
            + " '" + newOrderTbl.getValueAt(insertRow, col2)     +"',"
            + " '" + newOrderTbl.getValueAt(insertRow, col2+1)   +"',"
            + " '" + newOrderTbl.getValueAt(insertRow, col2+2)   +"',"
            + " '" + newOrderTbl.getValueAt(insertRow, col2+3) + "')"; 
```

您也应该为此使用 PreparedStatement。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:26:42.140

请改成

```
String sql3 = "INSERT INTO customerdetails(FName,SName,Address,Postcode) VALUES ("
            + "'" + newOrderTbl.getValueAt(insertRow, col2)     +"'"
            + "'" + newOrderTbl.getValueAt(insertRow, col2+1)   +"'"
            + "'" + newOrderTbl.getValueAt(insertRow, col2+2)   +"'"
            + "'" + newOrderTbl.getValueAt(insertRow, col2+3)   +"')"; 
```

您的代码中生成的插入语句似乎无效。有关详细信息，请参阅[SQL 插入语句](http://www.w3schools.com/sql/sql_insert.asp)

此外，更好的方法是创建一个专用的服务器端 DAO 类来处理数据库操作。

# java - JFrame 用 Windows 边框装饰，即使外观和感觉也设置了其他

> ID：15731541
> 
> 赞同：3
> 
> 时间：2013-03-31T16:17:35.400
> 
> 标签：java, swing, jframe, look-and-feel

今天是个好日子。

首先：检查此图像。 [![](https://i.stack.imgur.com/ovRp7.png)](https://i.stack.imgur.com/ovRp7.png)

请注意，在 3 个框架中的第一个框架中，按钮的样式为金属外观，但框架为 Windows 样式。在按钮 LAF 与帧 LAF 匹配的情况下，其他 2 个帧为“OK”。

所有这些的代码（与图像相同的顺序）：

```
public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {             
            JFrame frame = new JFrame();

            frame.getContentPane().add(new JButton("button"));
            frame.setVisible(true);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }
    });
}

public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {             
            JFrame frame = new JFrame();

            frame.setUndecorated(true);
            frame.getRootPane().setWindowDecorationStyle(JRootPane.FRAME);
            frame.setSize(100, 100); 

            frame.getContentPane().add(new JButton("button"));
            frame.setVisible(true);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }
    });
}

public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                // 0 => "javax.swing.plaf.metal.MetalLookAndFeel"
                // 3 => the Windows Look and Feel
                String name = UIManager.getInstalledLookAndFeels()[3].getClassName();
                UIManager.setLookAndFeel(name);
            } catch (Exception ex) {
                ex.printStackTrace();
            }

            JFrame frame = new JFrame();

            frame.getContentPane().add(new JButton("button"));
            frame.setVisible(true);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }
    });
} 
```

现在困扰我的是，我从未被迫使用 lines `frame.setUndecorated(true); frame.getRootPane().setWindowDecorationStyle(JRootPane.FRAME);`，因为设置 Look and Feel 只是使用该`UIManager.setLookAndFeel()`方法。通常，JFrame 本身也会被设置样式，但这似乎不再是这样，因为我得到了一个 Windows 样式的框架（第一个图像，1 个代码片段）。

为什么是这样？这是 Java 7 中的新功能吗？这看起来真的很奇怪。

通常，在不涉及涉及外观的代码的情况下，程序应该以 Metal 外观开始，因为这是标准的 Java 外观。那么为什么第一个程序以 Windows 框架开头呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T16:29:23.667

在你初始化 JFrame 之前在你的 main 方法中添加这一行

```
JFrame.setDefaultLookAndFeelDecorated(true); 
```

不久前，当我开始使用物质时，我注意到了同样的事情，但那条线就是修复它所需要的。

> 正如前面的代码片段所暗示的，您必须在创建要影响其装饰的框架之前调用 setDefaultLookAndFeelDecorated 方法。您使用 setDefaultLookAndFeelDecorated 设置的值用于所有随后创建的 JFrame。您可以通过调用 JFrame.setDefaultLookAndFeelDecorated(false) 切换回使用窗口系统装饰。有些外观和感觉可能不支持窗户装饰；在这种情况下，使用了窗口系统装饰。

那是来自[Oracle](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)的那行代码。

这是 Java 的一个特性，默认情况下 JFrame 窗口的边框不会被装饰，但是使用上面提到的功能可以让设置的外观和感觉来装饰窗口。据我所知，此功能是在 1.4 中实现的。

编辑：

此外，如果您想将您的自定义外观应用到 JDialog 窗口边框，您可以在 JDialog 类上使用您在 JFrame 上调用它的同一位置上的相同静态方法：

```
JDialog.setDefaultLookAndFeelDecorated(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T19:48:52.040

我猜你没有设置`swing.defaultlaf`系统环境变量，但也许你可以检查你`swing.properties`是否存在以及它是否包含一个 entry `swing.defaultlaf`。这可能是原因，请参阅下面的 UIManager 如何选择 L&F。

显然，我的 MacBook 上有该文件，因为 Apple 希望 Apple L&F 成为默认设置。但是我还没有检查过Windows机器..

这是 Java 7 文档的摘录，自 Java 1.4 以来几乎没有变化。[Java 1.4.2](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/UIManager.html)、[Java 1.5](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/UIManager.html)、[Java 6](http://docs.oracle.com/javase/6/docs/api/javax/swing/UIManager.html)、[Java 7](http://docs.oracle.com/javase/7/docs/api/javax/swing/UIManager.html)：

### 默认外观

用于默认外观的类按以下方式选择：

1.  如果系统属性`swing.defaultlaf`为 `non-null`，则使用其值作为默认外观类名称。
2.  如果`Properties`文件`swing.properties` 存在并包含 key `swing.defaultlaf`，则使用其值作为默认外观类名称。检查的位置`swing.properties`可能因 Java 平台的实现而异。在 Sun 的实现中，位置是`${java.home}/lib/swing.properties`. 有关更多详细信息，请参阅正在使用的实现的发行说明。
3.  否则使用跨平台外观。

# jquery - 如何在不显示控件的情况下在悬停时自动播放 javascript youtube 视频？

> ID：15731544
> 
> 赞同：1
> 
> 时间：2013-03-31T16:17:50.687
> 
> 标签：jquery, events, live, preview, autoplay

一年多前，我在堆栈上收到了这段代码 -[用图像覆盖 youtube 嵌入式视频，单击时隐藏图像并自动播放](https://stackoverflow.com/questions/4949783/overlay-youtube-embedded-video-with-image-hide-image-when-clicked-and-autoplay/12204495#12204495)

请在实践中查看 - [http://plnkr.co/edit/WbWvOR](http://plnkr.co/edit/WbWvOR) 或预览 [http://run.plnkr.co/plunks/WbWvOR/](http://run.plnkr.co/plunks/WbWvOR/)

它工作得很好，但是我现在想稍微修改一下，这样视频也会在鼠标悬停时自动播放，比如 - [http://www.interactivepixel.net/ccLivePlaylist/index_wall.html](http://www.interactivepixel.net/ccLivePlaylist/index_wall.html)

欢迎所有想法，感谢您的帮助

朱迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:22:35.827

您所看到的实际上并不是在播放来自 YouTube 或 Vimeo 的视频。它正在播放存储在其服务器上的短片。

例如，这是您在 InteractivePixel 链接上看到的第一个框[的视频。](http://www.interactivepixel.net/ccLivePlaylist//media/1/wall/01.mp4)

该脚本是一个名为[“Tean 的 Live Playlist”](http://codecanyon.net/item/html5-video-gallery-with-live-playlist-/490139?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=Tean)的付费脚本。他可以在 CodeCanyon 上购买他的代码和文档。

如果您想在您的网站上拥有该功能，我建议您购买脚本，或者在“HTML 5 Live Playlist”或类似内容上进行搜索。

*否则，要在 mouseover 上播放视频*，因为您使用 HTML5 嵌入视频，您可以使用 jQuery[`.hover()`](http://api.jquery.com/hover/)和常规 javascript的组合[`.play()`](https://stackoverflow.com/questions/4646998/play-pause-html-5-video-using-jquery)。但是请记住，它不会像您展示的演示那样流畅，因为在悬停时，它必须出去并与 YouTube 建立连接才能开始播放视频。

```
$("#theVideoElement").hover(function(){
   document.getElementById('videoId').play();
}); 
```

要让它在没有控件的情况下显示，您需要将您的[`controls`](https://developers.google.com/youtube/player_parameters#controls)URL 参数设置`iframe`为 0。

```
$('#ytapiplayer2').append('<iframe width="1130" height="636" src="http://www.youtube.com/embed/YOURVIDEOCODEHERE?controls=0" frameborder="0" allowfullscreen></iframe>'); 
```

# ios - 如何从 UIViewController 访问 scrollViewDidScroll

> ID：15731547
> 
> 赞同：3
> 
> 时间：2013-03-31T16:17:52.400
> 
> 标签：ios, objective-c

我有一个嵌入 UIScrollView 作为子视图的视图控制器。我将其嵌入如下：

标题视图控制器：UIViewController

ViewDidLoad 内部

```
scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 320)];
scrollView.contentMode = (UIViewContentModeScaleAspectFit);
scrollView.contentSize = CGSizeMake(3200, 320);
scrollView.pagingEnabled = YES;
[self.view addSubview:scrollView]; 
```

接下来，我尝试连接 scrollViewDidScroll 事件，以便每次用户滑动滚动视图时都可以执行一些代码。但是，我可以弄清楚如何访问此事件。我认为答案在于以某种方式授权。我尝试导入 UIScrollView.h 并将 scrollView 委托设置为 CaptionViewController，如下所示：

```
[scrollView setDelegate:self] 
```

我仍然无法访问scrollViewDidScroll。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T16:21:20.837

除了设置滚动视图的委托外，您还必须在`CaptionViewController.m`.

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    // handle scroll event
} 
```

还要确保您`CaptionViewController`符合`UIScrollViewDelegate`协议。在 .m 文件中：

```
@interface CaptionViewController () <UIScrollViewDelegate>

@end 
```

无需导入`UIScrollView.h`. 你已经明白了。

# jquery - JQuery - 在选择器中获取 css 属性

> ID：15731550
> 
> 赞同：0
> 
> 时间：2013-03-31T16:18:00.277
> 
> 标签：jquery, css

我正在尝试为目标元素的 CSS 属性（字体大小）设置自定义属性。如何从选择器中访问 c​​ss，例如：

```
$('.font-900').attr('data-resfont', <font-size here>); 
```

我试过：

```
$('.font-900').attr('data-resfont', this.css('font-size')); 
```

我猜这不起作用，因为“this”指的是 attr 函数。我的下一步是：

```
$('.font-900').attr('data-resfont', this.target.css('font-size')); 
```

这似乎也不起作用。我想我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:28:36.583

有多种方法可以做到这一点：

*   遍历每个匹配的元素：

```
$('.font-900').each(function() {
    $(this).attr('data-resfont', $(this).attr('font-size'))
}); 
```

*   创建变量赋值：

```
var e = $('.font-900');
e.css('data-resfont', e.attr('font-size'); 
```

*   使用函数设置属性

```
$(".font-900").attr('data-resfont', function () {
   return this.style.fontSize;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:23:16.047

您可以使用一个函数作为第二个参数，`.attr`该函数在集合中的每个元素上进行迭代（您不能这样做，`.data`否则我会建议使用它）。

```
$(".font-900").attr('data-resfont', function () {
    return this.style.fontSize;
}); 
```

# javascript - HTML代码下载链接，不要在浏览器中打开

> ID：15731551
> 
> 赞同：0
> 
> 时间：2013-03-31T16:18:02.430
> 
> 标签：javascript, html, css, browser

我想创建一个网页，我想要一个链接，使任何浏览器只下载链接而不打开它，而不管格式如何。可能吗？如果不是纯 HTML，那么还有其他方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:25:05.617

我有这个用于下载文件 - 而不是文件的链接 - 它链接到在服务器上运行的这个 php 文件。php 然后返回所需的文件（即下载）。

```
<?php
if(empty($_POST['filename']) exit;
<get the file from the file system>
header("Cache-Control: ");
header("Content-type: text/plain");
header('Content-Disposition: attachment; filename="'.$_POST['filename'].'"');
<echo ref to file>?> 
```

可能需要针对您的特定目的进行一些修改 /<.>/ 类似于伪代码注释。干杯。

# delphi - 调整窗体大小时 TCoolBar 条带增长

> ID：15731552
> 
> 赞同：2
> 
> 时间：2013-03-31T16:18:16.063
> 
> 标签：delphi, delphi-xe2, vcl, window-resize

在 Delphi XE2 VCL Forms Application 中，我在`TCoolBar`主窗体的顶部放置了一个。我在`TCoolBand`这个栏中添加了两个 s。然后我`TToolBar`在这两个乐队中的每一个中插入一个。每个工具栏都有几个按钮。

问题是，当我水平调整我的表单大小时（在设计时和运行时），带的宽度会增加，无论我是让表单变大还是变小。即使我的表格变小，带子也会增长，直到第二个最终被推到视野之外。

为什么会发生这种情况，我该如何阻止它发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:47:56.257

AFAIK，唯一的解决方案（感谢 Ludek Stauber）是修补 Vcl.ComCtrls.pas。在方法 TCoolBar.GetCaptionSize 的末尾添加两行来处理 IE6 和更高版本：

```
 { The grip size in IE4 is 3 pixels narrower than IE3 }
  if GetComCtlVersion < ComCtlVersionIE4 then
    Inc(Result, GripSizeIE3)
  // begin handle IE6
  else if GetComCtlVersion >= $0006000A {ComCtlVersionIE610} then
    Inc(Result, 4 {GripSizeIE610})
  // end handle IE6
  else 
```

# ruby - ruby 正则表达式的含义

> ID：15731556
> 
> 赞同：-1
> 
> 时间：2013-03-31T16:19:07.110
> 
> 标签：ruby, expression

```
string=http://abc.com.vn/12345
string =~ /.*\/([0-9]+)/
number = $~[1] 
```

使用 Ruby 正则表达式的上述代码行，变量“number”将具有值“12345”。但是，我不清楚上面使用的 ~ /.*/([0-9]+)/ 和 $~[1] 的含义。你能帮我解释一下吗。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:22:19.960

根据 Ruby Doc，`$~`全局变量等同于`last_match`方法。[来源](http://www.ruby-doc.org/core-2.0/Regexp.html#method-c-last_match)。

上一行检查存储在其中的字符串与右侧的正则表达式`=~ /.*\/([0-9]+)/`之间是否匹配。将返回该字符串中匹配或不匹配的数字位置。`string``=~``nil`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:23:00.580

在此处发布问题之前，您应该真正阅读有关 ruby​​ 正则表达式的最低要求，但这是为了帮助您入门：

```
=~ is the match operator similar to the match operator in perl
$~ is an array holding the various elements of the match 
```

# android - Android：如何在连续的服务调用中存储一个对象？

> ID：15731557
> 
> 赞同：2
> 
> 时间：2013-03-31T16:19:12.190
> 
> 标签：android, service, remoteview, storing-data

我调用了`Service`几次，服务执行它的工作，然后停止自己。

我需要的是在同一服务的连续调用之间存储一个卑鄙的人，

以便：

*   每次调用服务时，它都会检索对象使用

*   并在停止使用它之前再次保存它，以便在下一次调用中使用它。

所讨论的对象是`RemoteViews`对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:23:03.083

使用可以使用单例模式：

```
public class SingletonClass{
   private YourObject objectToStoreBetweenSession;
   private SigletonClass instance;
   private SingletonClass(){
       objectToStoreBetweenSession = new YourObject();
   }

   private static SingletonClass getInstance(){
      if(instance==null)
         instance = new SingletonClass();
      return instance;
   }
   public void setObject(YourObject obj){
      objectToStoreBetweenSession = obj;
   }
   public YourObject getObject(){
      return objectToStoreBetweenSession;
   }
} 
```

进入你的`Service`：

```
YourObject objectToStoreBetweenSession = SingletonClass.getInstance().getObject();
if(objectToStoreBetweenSession.value==0){
   //First time that Service is called.
}else{
   //Do whatever you want
   SingoletonClass.getInstance().setObject(new YourObject("value"));
} 
```

# javascript - 无法读取 null 的属性“长度”（javascript）

> ID：15731559
> 
> 赞同：22
> 
> 时间：2013-03-31T16:19:14.633
> 
> 标签：javascript, null

在尝试调试时，我收到此行的“长度”空错误。它是按照书上的说明写的，所以我不明白为什么它会给我错误？谢谢，=）

```
if (capital.length < 1) { 
```

***（这是所要求的完整代码..抱歉）***

```
<script type="text/javascript">
var capital = window.prompt("What is the capital of Missouri?","")

if (capital.length < 1) {
    document.getElementById("firstdiv").innerHTML="Sorry you don't feel like playing.<br /> The Capital of Missouri is Jefferson City.";
}
else {
    if (!window.confirm("Is that your final answer?")){ return true;

        document.getElementById("firstdiv").innerHTML = "The capital of Missouri is: <bold>" + capital + "</bold>, so says you.";
    }
    else{
        return false;
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-31T16:22:11.327

正确的测试是：

```
if (capital != null && capital.length < 1) { 
```

这可确保在执行长度检查时始终为非空`capital`值*。*

此外，正如评论所暗示的那样，`capital`是`null`因为您从未初始化它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-13T19:55:49.277

这也有效 - 如果定义了资本，请评估。如果不是，这意味着大写字母未定义或为空（或其他值，在 js 中计算为 false）

```
if (capital && capital.length < 1) {do your stuff} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T16:21:59.383

根据您提供的代码，不知道您正在编程的语言。变量`capital`为空。当您尝试读取属性长度时，系统无法尝试引用空变量。您需要定义`capital`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-08T13:53:12.780

```
if (capital.touched && capital != undefined && capital.length < 1 ) { 
//capital does exists
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-06T17:58:42.170

我试过这个：

```
if(capital !== null){ 
//Capital has something 
} 
```

# java - flickr 照片上传帖子尺寸太大

> ID：15731569
> 
> 赞同：0
> 
> 时间：2013-03-31T16:20:04.907
> 
> 标签：java, android, scribe

我正在尝试使用 Scribe 库将照片上传到 Flickr，但我不知道如何在 Java 中使用 MultipartEntity（我是 JAVA 新手）。Flickr 的响应是：code=93，POST 请求太大。

这是我的代码，请指导我正确的方向。

```
 Bundle extras = data.getExtras(); 
                Bitmap pic = extras.getParcelable("data");
                ByteArrayOutputStream stream = new ByteArrayOutputStream();  
                stream.toByteArray();
                pic.compress(Bitmap.CompressFormat.JPEG, 100, stream);
                imageView.setImageBitmap(pic);

                 final OAuthService service = new ServiceBuilder()
                .provider(FlickrApi.class)
                .apiKey(APIKEY)
                .apiSecret(APISECRET).callback(CALLBACK)
                .build();

                OAuthRequest request = new OAuthRequest(Verb.POST, "http://api.flickr.com/services/upload/");

                byte[] img = stream.toByteArray();
                MultipartEntity entity = new MultipartEntity();
                ContentBody body= new ByteArrayBody(stream.toByteArray(),"pic.jpg");
                entity.addPart("photo",body);
                request.addPayload(img);
                request.addHeader(entity.getContentType().getName(), entity.getContentType().getValue());

                service.signRequest(accessToken, request);
                Response response = request.send();
                String rbody=response.getBody(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T13:52:32.737

来自 Flickr 的 API 文档（[http://www.flickr.com/services/api/upload.api.html](http://www.flickr.com/services/api/upload.api.html)）

> 请注意，“照片”参数不应包含在签名中。生成签名时应包括所有其他 POST 参数。

但是在您的代码中，您甚至在生成签名时使用了“照片”部分。尝试生成没有“照片”部分的签名，而不是在签署请求后添加“照片”参数。

Flickr 报告的错误可能是由于 Flickr 将尝试验证签名并发现签名超出其最大允许长度时引起的。

# api - 在 Ember 的 RestAdapter 上下文中，bulkCommit 是什么意思？

> ID：15731574
> 
> 赞同：1
> 
> 时间：2013-03-31T16:20:31.630
> 
> 标签：api, rest, ember.js, ember-data, bulk

Ember Data`DS.RESTAdapter`包含一个`bulkCommit`属性。除了对批量提交与批量提交的一些模糊引用之外，我找不到任何关于这做什么/意味着什么的文档。

最初我认为这意味着我一次只能更新一条记录，但我目前将其设置为`false`，并且我仍然可以使用以下命令同时更新多条记录：

```
this.get('store').commit(); 
```

`bulkCommit`那么设置为 false 和设置为之间有什么区别`true`？在什么情况下我会使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:44:34.403

REST 适配器支持批量提交，因此您可以在一次修改多条记录时提高性能。例如，假设您要创建 3 条新记录。

```
var tom = store.createRecord(Person, { name: "Tom Dale" });
var yehuda = store.createRecord(Person, { name: "Yehuda Katz" });
var mike = store.createRecord(Person, { name: "Mike Grassotti" });
store.commit(); 
```

这将导致对 POST '/people' 进行 3 次 API 调用。如果启用该`bulkCommit`功能

```
set(adapter, 'bulkCommit', true);
var tom = store.createRecord(Person, { name: "Tom Dale" });
var yehuda = store.createRecord(Person, { name: "Yehuda Katz" });
var mike = store.createRecord(Person, { name: "Mike Grassotti" });
store.commit(); 
```

然后 ember-data 将只对 POST '/people' 进行一次 API 调用，其中包含所有 3 条记录的详细信息。显然不是每个 API 都会支持这一点，但如果你的 API 支持，它确实可以提高性能。

AFAIK 目前还没有这方面的文档，但您可以在以下单元测试中看到它的工作原理：[创建几个人（使用 bulkCommit）向 /people 发送一个 POST，其中包含一个数据哈希数组](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/rest_adapter_test.js#L647)

# jquery - Ruby on Rails 3 - 为 PC 简单应用程序创建样式、.ccs、布局的更好方法是什么。

> ID：15731576
> 
> 赞同：-2
> 
> 时间：2013-03-31T16:20:47.763
> 
> 标签：jquery, ruby, ruby-on-rails-3, styles, jrails

我是开发环境中的新手，但我需要为 Windows 的 Web 浏览器简单应用程序提供格式、颜色、样式等。在某些方面有疑问，例如谁是更好的方法？json，jquery，jrails，jquery-ujs。

在这一点上的任何帮助表示赞赏

原谅我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:38:53.197

好吧，作为 RoR 的初学者，我真的很喜欢 Bootstrap 框架（css 和 javascripts）。它提供了快速而良好的结果，让您有时间学习和专注于特定方面。Bootstrap 框架需要 jquery：http: [//twitter.github.com/bootstrap/index.html](http://twitter.github.com/bootstrap/index.html)

我的学习基于 Michael Hartl 的教程：[http ://ruby.railstutorial.org/chapters/beginning](http://ruby.railstutorial.org/chapters/beginning)

一个好的建议是不要过分依赖 Bootstrap 样式（可能会更改，恕不另行通知），而是通过 mixin 创建自己的样式：[http ://ruby.bvision.com/blog/please-stop-embedding- bootstrap-classes-in-your-html](http://ruby.bvision.com/blog/please-stop-embedding-bootstrap-classes-in-your-html) （但我必须承认，只有当我对 css 感觉更舒服时，我才会关心它）。

我希望这有帮助 ！

最好的祝福，

弗雷德

# java - 在常量字符串中找到变化字符串的最快算法/方法？

> ID：15731578
> 
> 赞同：0
> 
> 时间：2013-03-31T16:21:10.927
> 
> 标签：java, string, search

标题我的意思是公共类声明总是相同的，但名称不同：

`public class <class name>`

我想搜索公共类的 Java 源代码（在 JTextArea 中）。

所以首先它会发现：

`public class Example1`或`public class Example2`或`public class Example3`

ETC..

然后我想存储字符串`Example1`或`Example2`或`Example3`

该程序将用 Java 编写。

谁能帮我吗？

更新：

试了一下，对 Pattern 和 Matcher 类非常陌生。

```
private String findPublicClass() {
    Pattern pattern = Pattern.compile("\\s*public\\s+class\\s+(\\w+)");
    Matcher matcher = pattern.matcher(txtSource.getText());
    String s = null;
    boolean found = false;
    while (matcher.find()) {
        s = matcher.group(1);
        found = true;
    }
    if(!found)
        System.out.println("No public class found.");
    return s;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:28:54.580

我的建议是学习Java 教程中[关于正则表达式的课程。](http://docs.oracle.com/javase/tutorial/essential/regex/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T16:25:45.887

由于名称不同，因此常量部分是“public class”，它具有固定长度，例如 10。因此，您始终可以使用 substring(10) 获取您的类名。

希望有帮助。

编辑：

示例代码

```
If(line.contains("public class"))
  return line.substring(10); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-31T16:34:24.807

Well, a quick and dirty and very fast approach would be to read the string with a loop running from location 0 to L-1 (length), and have an index "i" stating how many characters were matched.

Every time a character is matched you would i++, otherwise i=0;

This way when i equals the length of the looked-for string, you will have a match. The remainder is the other part (variable part) you are looking for.

Hope this helps!

# debugging - 设置变量时调试器中断

> ID：15731580
> 
> 赞同：1
> 
> 时间：2013-03-31T16:21:24.290
> 
> 标签：debugging, gdb

当特定变量设置为特定值时，有什么方法可以让 gdb 暂停？例如，如果在某个范围内有一个变量 x，它在程序执行的某个时刻被设置为 4。当 x 设置为 4 时，如何指示 gdb 暂停执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T20:17:19.073

> 当特定变量设置为特定值时，有什么方法可以让 gdb 暂停？

是的：您可以设置观察点，并且可以使其有条件。

首先是一个简单的例子：变量是全局的（因此它的地址永远不会改变）：

```
$ cat tt.c
int foo;

void bar() { foo += 1; }
void baz() { foo += 2; }

int main()
{
  baz(); bar(); baz();
  return 0;
}
$ gcc -g tt.c && gdb -q ./a.out
Reading symbols from /tmp/a.out...done.
(gdb) watch foo
Hardware watchpoint 1: foo
(gdb) cond 1 foo == 3
(gdb) r
Starting program: /tmp/a.out
Hardware watchpoint 1: foo

Old value = 2
New value = 3
0x00000000004004c7 in bar () at tt.c:3
3   void bar() { foo += 1; }
(gdb) quit 
```

第二个简单的例子：变量是本地的，并且总是驻留在同一个堆栈位置：

```
$ cat t.c
int main()
{
  int i, sum = 0;

  for (i = 0; i < 10; ++i) {
    sum += i;
  }

  return 0;
}
$ gcc -g t.c && gdb -q ./a.out
Reading symbols from /tmp/a.out...done.
(gdb) b 5
Breakpoint 1 at 0x4004bf: file t.c, line 5.
(gdb) r
Starting program: /tmp/a.out

Breakpoint 1, main () at t.c:5
5     for (i = 0; i < 10; ++i) {
(gdb) watch sum
Hardware watchpoint 2: sum
(gdb) cond 2 sum == 36
(gdb) c
Continuing.
Hardware watchpoint 2: sum

Old value = 28
New value = 36
main () at t.c:5
5     for (i = 0; i < 10; ++i) {
(gdb) quit 
```

最后，一个棘手的情况：局部变量在堆栈上的位置发生了变化（例如，因为它所在的函数被递归调用，或者从不同的上下文中调用）：

```
$ cat foo.c
int foo(int x)
{
  int y = x + x;
  return y;
}

int recursive(int x, int y)
{
  if (x > 0)
    return recursive(x - 1, y + 1);
  return foo(y);
}

int main()
{
  printf("recursive(1,0) = %d\n", recursive(1, 0));
  printf("recursive(2,0) = %d\n", recursive(2, 0));
  printf("recursive(3,0) = %d\n", recursive(3, 0));
  return 0;
}

$ gcc -g foo.c && gdb -q ./a.out

(gdb) b foo
Breakpoint 1 at 0x4004fb: file foo.c, line 3.
(gdb) command 1
Type commands for breakpoint(s) 1, one per line.
End with a line saying just "end".
>watch y
>cond $bpnum y == 4
>c
>end
(gdb) r
Starting program: /tmp/a.out

Breakpoint 1, foo (x=1) at foo.c:3
3     int y = x + x;
Hardware watchpoint 2: y

Watchpoint 2 deleted because the program has left the block in
which its expression is valid.
recursive (x=0, y=1) at foo.c:12
12  } 
```

这里 GDB 停止了，因为观察点无效。我不知道如何让它静默删除观察点并继续。

```
(gdb) c
Continuing.
recursive(1,0) = 2

Breakpoint 1, foo (x=2) at foo.c:3
3     int y = x + x;
Hardware watchpoint 3: y
Hardware watchpoint 3: y

Old value = 0
New value = 4
foo (x=2) at foo.c:4
4     return y; 
```

达达！

```
(gdb) bt
#0  foo (x=2) at foo.c:4
#1  0x000000000040053d in recursive (x=0, y=2) at foo.c:11
#2  0x0000000000400531 in recursive (x=1, y=1) at foo.c:10
#3  0x0000000000400531 in recursive (x=2, y=0) at foo.c:10
#4  0x0000000000400572 in main () at foo.c:17 
```

# python - 是否有任何优雅的方式使列表包含一些整数成为一个包含一些元组的列表？

> ID：15731581
> 
> 赞同：3
> 
> 时间：2013-03-31T16:21:24.353
> 
> 标签：python

我有一个清单

```
a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

有什么优雅的方法可以让它们成对工作吗？我的预期是

```
[(1, 2), (3, 4), (5, 6), (7, 8), (9, 10)] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T16:24:44.947

```
pairs = zip(*[iter(a)]*2) 
```

是一个常见的成语

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-31T16:25:26.850

```
[(a[2*i], a[2*i+1] ) for i in range(len(a)/2)] 
```

这当然是假设 len(a) 是偶数

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T16:25:40.547

```
def group(lst, n):
    """group([0,3,4,10,2,3], 2) => [(0,3), (4,10), (2,3)]

    Group a list into consecutive n-tuples. Incomplete tuples are
    discarded e.g.

    >>> group(range(10), 3)
    [(0, 1, 2), (3, 4, 5), (6, 7, 8)]
    """
    return zip(*[lst[i::n] for i in range(n)]) 
```

来自 activestate，n 元组的配方，而不仅仅是 2 元组

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T16:24:29.740

```
b = []
for i in range(0,len(a),2):
    b.append((a[i],a[i+1]))
a = b 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T17:39:28.180

尝试使用切片和拉链。

```
>>> a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> zip(a[::2],a[1::2])
[(1, 2), (3, 4), (5, 6), (7, 8), (9, 10)] 
```

# xcode - Xcode，iOS：分配与实际内存使用情况

> ID：15731583
> 
> 赞同：3
> 
> 时间：2013-03-31T16:21:48.150
> 
> 标签：xcode, memory, memory-management, instruments, xcode-instruments

我在第 4 代 iPod touch 上运行 Instruments 并注意到活动监视器中的实际内存使用量从 60 MB（介绍场景）开始到 100 MB 以上（主菜单场景）。

而如果我运行“分配”工具，“分配时间线”中的值从 2MB 开始，在加载介绍场景之前达到峰值到 20MB，然后在加载后下降到 2MB。之后，一旦加载主菜单场景，再次上升到 20 MB，然后又回到 2MB。

这两种仪器有什么区别，我应该如何使用它们？换句话说，我认为分配中显示的内存是“真实内存”，但它似乎太低了。

# json - 在 Play 2 中使用 JSON 时出错

> ID：15731586
> 
> 赞同：4
> 
> 时间：2013-03-31T16:22:10.807
> 
> 标签：json, scala, playframework, playframework-2.0, playframework-json

我正在尝试使用 JSON 和 Play Framework 2.1.0 和 Scala 2.10 进行序列化/反序列化。我正在使用 Anorm，并且我有一个非常简单的对象，我想将它存储在数据库中。订单非常简单：

```
case class Order(id: Pk[Long] = NotAssigned, mfg: String, tp: String) 
```

在我的控制器中，我正在尝试构建一个 REST 接口，以便能够以 JSON 形式接受和发送 Order 实例（上图）。在那里，我有以下代码：

```
 implicit object PkFormat extends Format[Pk[Long]] {
     def reads(json: JsValue):Pk[Long] = Id(json.as[Long])
     def writes(id: Pk[Long]):JsNumber = JsNumber(id.get)
  } 
```

但是，当我使用以下命令运行“play test”时，编译失败：

覆盖方法读取 trait Reads of type (json: play.api.libs.json.JsValue)play.api.libs.json.JsResult[anorm.Pk[Long]]; [错误] 方法读取的类型不兼容 [错误] def reads(json: JsValue):Pk[Long] = Id(json.as[Long])

有谁知道为什么会这样？

我对 JAXB 有很多经验，但我对 Play 和 Scala 还是很陌生，到目前为止我还没有找到任何答案。这似乎是一个非常简单的用例，实际上我希望有一个更简单的解决方案（如注释），但我无法找到一个（至少现在还没有）

任何帮助是极大的赞赏！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T16:49:30.577

`play.api.libs.json.Reads`trait 将`reads`方法定义为：

```
def reads(json : play.api.libs.json.JsValue) : play.api.libs.json.JsResult[A] 
```

因此，预计读取方法的响应是`JsResult[A]`，而不是`A`；也就是说，`JsResult[Pk[Long]]`而不是`Pk[Long]`。在成功的情况下，你会想要返回这个：

```
implicit object PkFormat extends Format[Pk[Long]] {
    def reads(json: JsValue):JsResult[Pk[Long]] = JsSuccess(Id(json.as[Long]))
    def writes(id: Pk[Long]):JsNumber = JsNumber(id.get)
} 
```

# php - PHP如何提取3个结果

> ID：15731593
> 
> 赞同：-2
> 
> 时间：2013-03-31T16:22:34.007
> 
> 标签：php, arrays

我正在尝试在我的一个网站上进行比赛，我是 PHP 的新手，所以我寻求您的帮助。

到目前为止我有这个代码

```
<?php
    $con = mysql_connect("localhost", "user", "pass");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }
    mysql_select_db("database",$con);
    $sql = "SELECT * FROM videos WHERE source = 0";
    $result = mysql_query($sql,$con);
    while ($row = mysql_fetch_object($result)) {
        $userid = $row->user_id;
        $points = $row->votes * $row->rating * $row->views;
        echo "UID: $row->user_id POINTS: $points <br />";
    } 
```

有人可以告诉我，我怎样才能`$points`按降序回显 3 个结果，即具有最高值的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:27:42.160

```
$sql = "SELECT * FROM videos WHERE source = 0 ORDER BY votes*rating*views DESC LIMIT 3"; 
```

请注意，这是一个性能杀手：它将计算所有视频的分数，包括那些未显示的视频。您可能想考虑一个单独的列，也许有一个触发器来填充它。

我个人认为这是一种很好的风格 - 如果您尝试更改积分算法，它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:30:11.313

SELECT column_name(s) FROM table_name1 UNION SELECT column_name(s) FROM table_name2 IS 仅显示表内所有元素的 1 个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:35:34.793

尝试这样的事情：

```
SELECT *, score = v.votes * v.ratings * v.views 
FROM videos AS v 
WHERE source = 0 
ORDER BY score DESC 
LIMIT 3 
```

紫布纳！

# opengl - OpenGL - glBlendFunc

> ID：15731594
> 
> 赞同：0
> 
> 时间：2013-03-31T16:22:34.793
> 
> 标签：opengl, glblendfunc

我一直试图找到 glBlendFunc 内部工作背后的一些具体数学。

澄清一下，我知道混合方程是：

srcChannels * srcFactor + dstChannels * dstFactor = channelsRendered。

我的问题是，srcChannels、dstChannels 和 channelsRendered 是 3-vector (r,g,b) 还是 4-vector (r,g,b,a)？

由于 (0.2, 0.2, 0.2, 1.0) 和 (1.0, 1.0, 1.0, 0.2) 看起来应该相同，因此这里可能存在歧义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:34:46.400

`glBlendFunc` works on all four channels; `glBlendFuncSeparate` separates RGB from alpha.

The [glBlendFunc reference page](https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBlendFunc.xhtml) describes all the different blend modes and the operations applied to the different channels. [glBlendFuncSeparate](https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBlendFuncSeparate.xhtml) does the same including operations on the alpha channel.

# php - 为时事通讯创建邮件脚本

> ID：15731596
> 
> 赞同：0
> 
> 时间：2013-03-31T16:22:46.320
> 
> 标签：php, email, phpmailer

我目前正在使用 PHP 邮件程序。我想创建一个邮件脚本，我可以在其中添加任意数量（从 10 到 1000 封）的固定电子邮件，并在文本区域中输入一条消息，然后邮件程序将单独向每个人发送电子邮件，而不是全部立刻。我想避免用户打开一封看似发送到其他 1000 个电子邮件地址的电子邮件，并使其更加个人化（即从电子邮件地址 x 发送到 y，而不是从电子邮件地址发送x to a,b,c,...) 这将只是管理员的一个管理扩展，可以轻松地向所有订阅者发送新邮件。

我想知道实现这一点的最简单方法是什么？如果没有它可以实现它，我宁愿远离 cron 工作。

我很感激任何建议。

提前谢谢了！

# php - 第二个下拉列表基于使用一个 php 文件的第一个下拉列表

> ID：15731598
> 
> 赞同：2
> 
> 时间：2013-03-31T16:22:57.313
> 
> 标签：php, mysql, forms

好的，我做了第一个成功的 SQL 查询，在 PHP 中生成了一个下拉框！（是的，我还是个大菜鸟）

所以我的下一个问题......

如果我点击选择按钮，我必须创建一个新页面还是可以根据提交的第一个列表在同一页面上生成第二个下拉框？

我看到了这个：[对类似问题的回应](https://stackoverflow.com/a/6282572/2227549)

但我仍然不确定形式行动和方法。保持自我？我需要/应该使用 2 个单独的表格吗？（我还没有准备好处理 AJAX 并且还没有准备好处理 Java，所以请不要考虑这些选项 :)）或者我应该只是传递到第二个文件。

如果可以，你能解释一下每个表单中使用的表单动作和方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:25:25.610

我更喜欢通过 Ajax 和 JQuery 来实现，如下所示：

```
function getClassList(elem)
{
    var contentRequests, contentarr;  // The variable that makes Ajax possible!
    try
    {
// Opera 8.0+, Firefox, Safari
        contentRequests = new XMLHttpRequest();
    } 
    catch (e)
    {
// Internet Explorer Browsers
        try
        {
            contentRequests = new ActiveXObject("Msxml2.XMLHTTP");
        } 
        catch (e) 
        {
            try
            {
                contentRequests = new ActiveXObject("Microsoft.XMLHTTP");
            } 
            catch (e)
            {
// Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }
// Create a function that will receive data sent from the server
        contentRequests.onreadystatechange = function()
        {
            if(contentRequests.readyState == 4&& contentRequests.status==200)
            {

                document.getElementById(elem).innerHTML = contentRequests.responseText;

            }
        }

        var urltofetch="index.php?methodname=getclasses"

        contentRequests.open("GET", urltofetch, true);
        contentRequests.send(null);

}

function getStudentList(classelem,elem)
{

   var classToFetch =  classelem + " option:selected";

   var contentRequests, contentarr;  // The variable that makes Ajax possible!
    try
    {
// Opera 8.0+, Firefox, Safari
        contentRequests = new XMLHttpRequest();
    } 
    catch (e)
    {
// Internet Explorer Browsers
        try
        {
            contentRequests = new ActiveXObject("Msxml2.XMLHTTP");
        } 
        catch (e) 
        {
            try
            {
                contentRequests = new ActiveXObject("Microsoft.XMLHTTP");
            } 
            catch (e)
            {
// Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }
// Create a function that will receive data sent from the server
        contentRequests.onreadystatechange = function()
        {
            if(contentRequests.readyState == 4&& contentRequests.status==200)
            {

                document.getElementById(elem).innerHTML = contentRequests.responseText;

            }
        }
        var classname = $(classToFetch).text();
        alert(classname);
        var urltofetch="index.php?methodname=getstudents&cname="+classname

        contentRequests.open("GET", urltofetch, true);
        contentRequests.send(null);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:30:29.527

如果您还没有准备好使用 AJAX 或 Javascript，那么您需要添加第二个 PHP 页面，该页面将处理用户从第一个下拉框中的选择并显示适当的第二个下拉列表。

如果您对这一切都不熟悉，那么我建议您一开始就保持简单！提交表单并显示新页面是最基本的方式。

因此，在您的第一页 HTML 中，您需要...

```
<form action="second_page.php" method="post">
<select name="selection"> ... your drop-down code goes here ... </select>
<button type="submit">Next</button>
</form> 
```

然后在 second_page.php 你需要...

```
$selection = $_POST['selection']; // The variable $selection holds the user's selection 
```

然后，您可以根据 $selection 的值输出第二页。

# jena - 在jena resultSet中检索结果的异常

> ID：15731600
> 
> 赞同：0
> 
> 时间：2013-03-31T16:23:14.720
> 
> 标签：jena, dbpedia

通过 Jena 查询 DBpedia 时遇到了一些问题。在 nextSolution 方法中迭代 resultSet 时会引发异常。这是代码：

```
ResultSet results = throwQuery(query);
ArrayList<Movies> movs = new ArrayList<Movies>();
//try {
    while (results.hasNext()) {
    try{
    QuerySolution q = results.nextSolution();

    Movies m = new Movies();
    m.setUrl(q.get("film_url").toString());
    RDFNode node = q.get("film_label");
    // Set a default title
    String title = "";
    if (node != null) {
        // We delete the "@en" part that indicates that the label is in
        // english
        title = node.toString();
        int ind = title.indexOf("@en");
        title = title.substring(0, ind);
    }
    m.setTitle(title);

    node = q.get("image_url");
    // Set a default image
    String image = "http://4.bp.blogspot.com/_rY0CJheAaRM/SuYJcVOqKbI/AAAAAAAAA2Y/abClDm72TuY/s320/NoCoverAvailable.png";
    if (node != null) {
        // For some reason the image link retrieved from dbpedia is
        // broken. Here we fix it 
        image = node.toString();
        int ind = image.indexOf("common");
        image = image.substring(0, ind) + "en" + image.substring(ind + 7);
    }
    m.setImageurl(image);

    movs.add(m);
    }
    catch(Exception e){
        System.err.println("Error catched: " + e.getMessage());
    }
    }

return movs; 
```

哪里 throwQuery

```
private final static String SERVICE = "http://dbpedia.org/sparql";

private static ResultSet throwQuery(String q) {
Query qFactory = QueryFactory.create(q);
QueryExecution qe = QueryExecutionFactory.sparqlService(SERVICE, qFactory);
ResultSet results = null;
try {
    results = qe.execSelect();
} catch (QueryExceptionHTTP e) {
    System.out.println(e.getMessage());
    System.out.println(SERVICE + " is DOWN");
} finally {
    qe.close();
    return results;
}
} 
```

和测试查询

```
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>

SELECT ?film_label ?image_url ?film_url
WHERE {
?film_url rdf:type <http://dbpedia.org/ontology/Film> .
OPTIONAL{ 
    ?film_url rdfs:label ?film_label 
    FILTER (LANG(?film_label) = 'en')
}
OPTIONAL{   
    ?film_url foaf:depiction ?image_url 
}
FILTER regex(str(?film_url), "hola","i") 
}
ORDER BY ?film_url 
```

当程序开始迭代时，一切顺利，直到达到该值`Nicholas Nickleby (2002 film)`然后我得到这个异常：

```
com.hp.hpl.jena.sparql.resultset.ResultSetException: XMLStreamException: Unexpected EOF in start tag
at [row,col {unknown-source}]: [67,116]
at     com.hp.hpl.jena.sparql.resultset.XMLInputStAX$ResultSetStAX.staxError(XMLInputStAX.java:539    )
at com.hp.hpl.jena.sparql.resultset.XMLInputStAX$ResultSetStAX.hasNext(XMLInputStAX.java:236)
at client.DBPediaConnector.getMovie(DBPediaConnector.java:67)
at customServices.MoviesService.searchInsertMovie(MoviesService.java:48)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at     sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
... 47 more
Caused by: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in start tag
at [row,col {unknown-source}]: [67,116]
at com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:677)
at com.ctc.wstx.sr.StreamScanner.loadMore(StreamScanner.java:1034)
at com.ctc.wstx.sr.StreamScanner.getNextChar(StreamScanner.java:785)
at com.ctc.wstx.sr.BasicStreamReader.nextFromTree(BasicStreamReader.java:2790)
at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1065)
at com.hp.hpl.jena.sparql.resultset.XMLInputStAX$ResultSetStAX.getOneSolution(XMLInputStAX.java:435)
at com.hp.hpl.jena.sparql.resultset.XMLInputStAX$ResultSetStAX.hasNext(XMLInputStAX.java:232)
... 71 more 
```

对我来说似乎是耶拿的内部错误，但我不知道。难道我做错了什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:52:28.640

请给出一个完整的，最小的例子。这是相当长的。

DBpedia 正在为结果返回损坏的 XML，可能是因为查询需要很长时间才能执行并且触发了超时。这似乎是一个中等速度的查询。

如果您的 Jena 版本足够新，请尝试将 &timeout=60000 添加到“ [http://dbpedia.org/sparql&timeout=60000 ”的查询 URL。](http://dbpedia.org/sparql&timeout=60000)这可能还不够长。dbpedia 有一个无法覆盖的硬性内部限制。

在一天中的不同时间执行也可能有所帮助。

也可能是因为返回了损坏的 XML。在 DBpedia UI 上执行查询并获取 XML 结果以进行检查。

# c++ - 有效的标题名称

> ID：15731605
> 
> 赞同：5
> 
> 时间：2013-03-31T16:24:02.843
> 
> 标签：c++, c

我无法正确理解它们在以下文章中的含义：

[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1566.htm](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1566.htm)

> 有趣的是，C89 明确地只允许标题中的字母和包含文件名。C++ 加了下划线，C99 加了数字。可能这两个标准都应该允许两者。

我在所有 C 和 C++ 标准中发现了以下语句：

**ISO/IEC 9899:1990**

> ```
> 6.1.7 Header names
> 
> Syntax
> 1 header-name:
> < h-char-sequence >
> " q-char-sequence "
> h-char-sequence:
> h-char
> h-char-sequence h-char
> h-char:
> any member of the source character set except
> the new-line character and >
> q-char-sequence:
> q-char
> q-char-sequence q-char
> q-char:
> any member of the source character set except
> the new-line character and " 
> ```

**ISO/IEC 9899:1990**

> ```
> 5.2.1 Character sets
> 
> ...
> 
> Both the basic source and basic execution character sets shall have the following
> members: the 26 uppercase letters of the Latin alphabet
> 
> A B C D E F G H I J K L M
> N O P Q R S T U V W X Y Z
> 
> the 26 lowercase letters of the Latin alphabet
> 
> a b c d e f g h i j k l m
> n o p q r s t u v w x y z
> 
> the 10 decimal digits
> 
> 0 1 2 3 4 5 6 7 8 9
> 
> the following 29 graphic characters
> 
> ! " # % & ' ( ) * + , — . / :
> ; < = > ? [ \ ] ^ _ { | } ~ 
> ```

例如，即使在 C89 / C90 中，我也能看到下划线和数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:41:46.510

它指的是这个：

> 在定界序列和外部源文件名之间应该有一个实现定义的映射。实现应为由一个或多个字母（如 $2.2.1 中定义）后跟句点 (.) 和单个字母组成的序列提供唯一映射。该实现可以忽略字母大小写的区别，并将映射限制为句点前的六个有效字符。

(C89)

这是 C99 版本：

> 实现应为由一个或多个字母或数字（如 5.2.1 中定义）后跟句点 (.) 和单个字母组成的序列提供唯一映射。第一个字符应为字母。该实现可能会忽略字母大小写的区别，并将映射限制为句点前的八个有效字符。

# windows - Windows 8 中的 Apache Maven 安装

> ID：15731610
> 
> 赞同：4
> 
> 时间：2013-03-31T16:24:29.863
> 
> 标签：windows, maven-3

我按照此链接[http://maven.apache.org/download.cgi中提到的步骤操作](http://maven.apache.org/download.cgi)

每当我在 cmd 中键入 mvn --version 时。我得到 'mvn' 不是内部或外部命令、可运行程序或批处理文件。

但是当我使用“以管理员身份运行”打开 cmd 时，它起作用了。

操作系统：Windows 8

如何在 Windows 8 上为任何用户运行 mvn。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-15T02:23:54.970

尝试将环境变量 M2 设置为系统变量而不是用户变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T18:48:14.237

我使用了[Rapid Environment Editor](http://www.rapidee.com/en/about)，以管理员身份开始，并将这些变量放入我的系统路径中，这个问题就消失了。

出于某种原因，当我通过 Windows 实用程序将 JDK、JRE 和 Maven bin 文件夹添加到我的路径时，它不起作用。Rapid Environment Editor 告诉我变量无效或我无权访问它们。Windows 8 似乎对管理员权限非常挑剔，我猜他们并没有很好地考虑到这一点。

请务必以管理员身份启动 Rapid Environment Editor，并在保存更改时重新打开命令窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-03T14:40:25.857

我不得不将 Maven 的安装目录移动到 C:\Users*your_username*，这样 Maven 就不再需要管理员权限了。PATH 变量在那之后开始工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-02T17:58:18.183

在windows 8的环境变量中设置`MAVEN`/`M2`和`MAVEN_HOME`/变量，这样就可以解决问题了。`M2_HOME`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T17:29:47.317

我用的是中文版，所以我不确定英文版中这些词是什么。

单击“我的电脑”上的右键单击列表上的最后一项单击左侧的“高级系统设置”“环境变量”将maven的bin目录附加到系统的环境变量*路径中*

毕竟，尝试linux

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-22T09:22:07.830

最简单的方法是：将 maven 目录添加到系统变量的路径中。不要在用户变量中添加任何东西，也不需要添加任何变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-03T08:57:04.030

面临同样的问题；M2_home 和 Java_home 路径中的 bin 或文件需要在用户具有完全控制权限的目录中找到。通过管理员更改用户的安全权限设置，右键单击订单，进入属性->安全选项卡，并选中“已验证用户”和“用户”的完全控制框。

# objective-c - 多个窗口的核心数据和单独的撤消管理器？

> ID：15731611
> 
> 赞同：1
> 
> 时间：2013-03-31T16:24:34.723
> 
> 标签：objective-c, macos, cocoa, core-data

我的 Core Data 应用程序（不是基于文档的）有两个窗口。每个窗口都包含一个表视图，其中包含来自同一 NSManagedObjectContext 的（不同）数据。我在两个窗口控制器中使用此代码来启用撤消支持：

```
- (NSUndoManager *)windowWillReturnUndoManager:(NSWindow *)window {
    return [[(AppDelegate *)[NSApp delegate] managedObjectContext] undoManager];
} 
```

这样做的缺点是用户将撤消他在一个窗口中所做的更改，而他正在另一个窗口中工作。并且即使用户选择关闭其中一个窗口，撤消管理器仍将撤消关闭窗口中的更改。这个问题的明显解决方案是使用两个单独的 NSUndoManager 对象，但我不知道如何做到这一点。我尝试使用 NSManagedObjectContexts "-setUndoManager:" 和每个窗口的单独撤消管理器，但我找不到合适的地方放置代码，所以我尝试了这个：

```
- (NSUndoManager *)windowWillReturnUndoManager:(NSWindow *)window {
    [[(CAppDelegate *)[NSApp delegate] managedObjectContext] setUndoManager:self.myUndoManager];
    return self.myUndoManager;
} 
```

它没有很好地工作。（在窗口之间切换时撤消步骤消失。）

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:13:00.513

这就是多重​​上下文的用途。请参阅[核心数据编程指南 - 变更管理部分](https://developer.apple.com/library/prerelease/content/documentation/Cocoa/Conceptual/CoreData/ChangeManagement.html)。

# php - codeigniter方法错误

> ID：15731614
> 
> 赞同：0
> 
> 时间：2013-03-31T16:24:44.947
> 
> 标签：php, codeigniter

我正在使用控制器中的以下内容从模型中调用方法，但接收和错误：

```
//from the controller:(main.php)

<?php
class Main extends CI_Controller {

   public function __construct() {
    parent::__construct();
   }

   function index() {
   .....
   $this->load->view('view_form');

   }//END Fn index()

   function get_th() {

   //$the=$this->input->post('th', TRUE);
   $d['shit']=$this->model_data->tst();
   $this->load->view('view_form',$d);

   }//END Fn get_th()

}//END Cls Main
?>

//from the model:(model_data.php)
<?php
class Model_data extends CI_Model {

   function slider() {
...
   }//END Fn slider()

   function check_input($data) {
...
   }//END Fn check_input()

   function tst() {
        $tsts= "hellos";
        return $this->tsts;
   }

}//END Cls model_data
?> 
```

$autoload['model'] = array('model_data');

错误：致命错误：调用 ... application\controllers\main.php 中的未定义方法 Model_data::tst() ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:50:39.227

已修复：/ 不敢相信我在长文件的末尾多了一个括号 :( wtf

"}"<-- 这就是问题所在。

顺便说一句，正如我所说@pramodhkumar 使用 autoload.php .. 我有模型自动加载，所以不需要 $this->load->...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T06:38:27.513

我想你忘了在控制器中加载模型。

```
$this->load->model('Model_name');

function get_th() {

   $this->load->model('model_data');
   $d['shit']=$this->model_data->tst();
   $this->load->view('view_form',$d);

   } 
```

# java - 代码 401，需要登录，同时在 Android 上使用 YouTube 数据 API V3

> ID：15731617
> 
> 赞同：6
> 
> 时间：2013-03-31T16:24:51.727
> 
> 标签：java, android, youtube-api

我正在尝试在 Android 上使用新的 Youtube Data API 从给定 ID 中检索视频标题，

[https://www.googleapis.com/youtube/v3/videos?id=6DbS1VB8HGo&part=player&key=XXX](https://www.googleapis.com/youtube/v3/videos?id=6DbS1VB8HGo&part=player&key=XXX)

但是，我不断收到回复说需要登录和错误代码 401。

我猜测它与授权令牌有关，但我不明白为什么我需要这个，因为我没有执行任何帐户特定的操作，例如从播放列表中更新或删除。我想要的只是标题，也许还有观看次数。

应感谢任何帮助，以下是我正在使用的代码：

```
public class NetTask extends AsyncTask<String, Void, String>{
    @Override
    protected String doInBackground(String... params) {
        HttpClient httpClient = new DefaultHttpClient();
        //param[0]= "https://www.googleapis.com/youtube/v3/videos?id=6DbS1VB8HGo&part=player&key=xxyy"
        HttpPost httpPost = new HttpPost(params[0]);
        HttpResponse response;

        try {
            response = httpClient.execute(httpPost);
            String responseString = EntityUtils.toString(response.getEntity());
            JSONObject responseJSON = new JSONObject(responseString);
            responseJSON.toString();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:27:28.860

[API 文档](https://developers.google.com/youtube/v3/)说：

先决条件

1.  向 Google 注册您的应用程序，以便它可以提交 API 请求。

# ruby - 如何使用 RSpec 测试字符串的方法？

> ID：15731630
> 
> 赞同：0
> 
> 时间：2013-03-31T16:26:10.650
> 
> 标签：ruby, rspec, return-value

如何使用 RSpec 测试消息的方法？基本上我的方法接受 2 个参数，如果提供了正确的详细信息，他们应该会看到一条成功消息。我试过这个：

```
DRINKS_MACHINE = {
  'Coca Cola' => 2.99,
  'Fanta' => 3.27,
  'Beer' => 5.99
}

class Drink
  def check_money(drink_selection, money_amount_paid)
    amount_paid = money_amount_paid.to_f
    if amount_paid <= 0
      raise ArgumentError, 'Insert Money'
    end
    if not DRINKS_MACHINE.has_key?(drink_selection)
      raise ArgumentError, "Invalid selection: #{drink_selection}"
    end
    cost = DRINKS_MACHINE[drink_selection]
    if amount_paid < cost
      remainder = amount_paid - cost
      raise ArgumentError, "Not enough coins. Insert #{remainder} more!"
    elsif
      puts "Purchase Complete: #{drink_selection}"
    end
  end
end 
```

我希望测试当一个有效的选择和足够的钱被传递给该方法时，是否会返回正确的消息。在这种情况下，消息还将包括传递给方法的字符串变量。我尝试了以下方法：`expect @method.check_money("Coca Cola", "5.00").raise ("Purchase Complete : Coca Cola")`。也试过`@method.check_money("Coca Cola", "4.59").should eq ("Purchase Complete: Coca Cola")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:45:40.700

这里有两个不同的问题，一个与您的规范有关，另一个与您的方法有关。

在您的规范中，您应该将`eq`其用作匹配器，因为您期望从该`check_money`方法返回字符串。

```
@method.check_money("Coca Cola", "5.00").should eq("Purchase Complete: Coca Cola") 
```

在您的方法中，您应该简单地使用

```
"Purchase Complete: #{drink_selection}" 
```

并摆脱`puts`, 因为这是输出到控制台而不是返回字符串。

`elsif`另外，`else`在上一行中切换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T17:44:30.230

## 简化您的用例

当您在测试方法时遇到问题时，您需要简化它，而不是试图解决一个大泥球。

## 您的逻辑和语法错误

您的语法有许多明显的问题。这不是[Code Review Stack Exchange](https://codereview.stackexchange.com/)，但我强烈建议重构您的代码以减少混乱。特别是，我会停止在所有地方提出异常以获得可能的结果。一个好的案例陈述可以让你的生活变得更简单。

## 您的课程和测试，重构

以下代码练习了您在课堂上寻找的核心功能：

```
class Drink
  DRINKS_MACHINE = {
    'Coca Cola' => 2.99,
    'Fanta'     => 3.27,
    'Beer'      => 5.99
  }   

  def check_money(drink_selection, money_amount_paid)
    amount_paid = money_amount_paid.to_f
    cost = DRINKS_MACHINE[drink_selection]
    if amount_paid < cost
      remainder = amount_paid - cost
      raise ArgumentError, "Not enough coins. Insert #{remainder} more!"
    else
      "Purchase Complete: #{drink_selection}"
    end
  end
end

describe Drink do
  describe '#check_money' do
    it 'sells a drink' do
      subject.check_money('Coca Cola', 2.99).should == "Purchase Complete: Coca Cola"
    end
  end
end 
```

特别是，您需要从您的方法返回一个结果（#puts 返回 nil）并确保您的 DRINKS_MACHINE 常量对您的类和规范都可用。

# php - 如何创建带有指向另一个表的链接的表？

> ID：15731633
> 
> 赞同：0
> 
> 时间：2013-03-31T16:26:26.560
> 
> 标签：php, tabular

我正在尝试创建带有指向另一个表的链接的文本元素表。这意味着如果您按下一个元素，另一个表格会出现在附近，如果您按下另一个元素，第二个表格将变为另一个。如何以最短的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:28:14.320

jquery - 链接正在请求另一个表的 id，因此它会触发您编写的任何脚本，即将表从 display: none 更改为 display: block

# angularjs - 如何处理 angular.js 中的右键单击事件？

> ID：15731634
> 
> 赞同：71
> 
> 时间：2013-03-31T16:26:31.060
> 
> 标签：angularjs

有没有办法设置一个元素，以便它在左键单击（ng-click）时执行一个操作，然后在右键单击时执行另一个操作？

现在我有类似的东西：

```
<span ng-click="increment()">{{getPointsSpent()}}</span> 
```

而且我还希望能够右键单击跨度以执行函数 decrement();

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2013-03-31T17:44:39.497

您可以使用指令在右键单击时绑定特定操作，使用`contextmenu`事件：

```
app.directive('ngRightClick', function($parse) {
    return function(scope, element, attrs) {
        var fn = $parse(attrs.ngRightClick);
        element.bind('contextmenu', function(event) {
            scope.$apply(function() {
                event.preventDefault();
                fn(scope, {$event:event});
            });
        });
    };
}); 
```

[小提琴上的代码示例](http://jsfiddle.net/bcaudan/TZQnS/)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-02-19T22:05:40.310

嗨，这是一个老问题，但我有一个我认为在某些情况下可能更简单的解决方案。ngMousedown（和 ngMouseup）指令由鼠标右键触发，并且可以访问原始鼠标事件，`$event`因此您可以这样做：

```
<span ng-mousedown="handleClick($event)"
      oncontextmenu="return false">  <!-- use this to prevent context menu -->
          {{getPointsSpent()}}
</span> 
```

然后在控制器中，您可以执行以下操作：

```
$scope.handleClick(evt) {
    switch(evt.which) {
        case 1:
            increment(); // this is left click
            break;
        case 2:
            // in case you need some middle click things
            break;
        case 3:
            decrement(); // this is right click
            break;
        default:
            alert("you have a strange mouse!");
            break;
    }
} 
```

这是一个[工作小提琴](http://jsfiddle.net/xwmnLq2w/)。它与接受的答案相同，但不需要创建全新的指令。尽管指令可能是更好的解决方案，特别是如果您打算将右键单击功能附加到很多东西上。但无论如何，另一种选择。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-31T17:24:26.247

一种方法是使用将事件处理程序绑定到`contextmenu`事件的指令。我很难停止冒泡以防止出现默认菜单，因此为`document`. 尝试使用`e.stopPropagation()`,`e.preventDefault()`等`return false`。在文档处理程序中检查目标似乎效果很好

```
app.directive('rightClick',function(){
    document.oncontextmenu = function (e) {
       if(e.target.hasAttribute('right-click')) {
           return false;
       }
    };
    return function(scope,el,attrs){
        el.bind('contextmenu',function(e){
            alert(attrs.alert);               
        }) ;
    }
}); 
```

```
<button right-click alert="You right clciked me">Right click me</button> 
```

演示[http://plnkr.co/edit/k0TF49GVdlhMuioSHW7i](http://plnkr.co/edit/k0TF49GVdlhMuioSHW7i)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-03T14:49:12.860

你可以使用这个[指令](https://github.com/angular-box/ngContextMenu)。

```
<div ng-controller="demoCtrl" save-content="classic-html">
  <div contextmenu="{{lists}}" class="box" click-menu="clickMenu(item)" right-click="rightClick($event)">
    <span>normal dropmenu</span>
  </div>
</div>

<script type="text/javascript">
angular.module('demo', ['ngContextMenu'])

  .controller('demoCtrl', ['$scope', function($scope) {
    $scope.lists = [{
      name: '11'
    }, {
      name: '22'
    }]

    $scope.clickMenu = function (item) {
      console.log(item);
    };

    $scope.rightClick = function (event) {
      console.log(event);
    };
  }])
</script> 
```

# c++ - 如何在退出时调用插槽

> ID：15731638
> 
> 赞同：4
> 
> 时间：2013-03-31T16:26:41.357
> 
> 标签：c++, qt, qt4, signals-slots

我想在我的 Qt 应用程序关闭之前更新我的数据库。

我想要类似的`connect(this, SIGNAL(quit()), this, SLOT(updateDatabase()))` 一种方法可能是引入一个退出按钮，但是如果用户按下，是否可以实现此功能`Alt+F4`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T16:32:53.580

改用信号[`aboutToQuit()`](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#aboutToQuit)。

> 当应用程序即将退出主事件循环时发出此信号，例如当事件循环级别降至零时。这可能发生在从应用程序内部调用 quit() 之后，或者当用户关闭整个桌面会话时。
> 
> 如果您的应用程序必须在最后一秒进行清理，则该信号特别有用。请注意，在此状态下无法进行任何用户交互。

例如 ：

```
connect(this, SIGNAL(aboutToQuit()), this, SLOT(updateDatabase())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T01:35:28.150

还有另一种方法可以做到这一点，不是`aboutToQuit()`信号，而是**重新**实现`closeEvent(QCloseEvent *event)`. 您可以在声明之前调用您的插槽`event->accept()`；

像这样：

```
void MainWindow::closeEvent(QCloseEvent *event)
{
    call_your_slot_here();
    // accept close event
    event->accept();
} 
```

# javascript - 骨干验证不起作用

> ID：15731639
> 
> 赞同：9
> 
> 时间：2013-03-31T16:26:41.997
> 
> 标签：javascript, validation, backbone.js

我刚开始backboneJs。

我使用 VisualStudio2012 做了一个简单的例子。我添加了骨干。

在我的 main.js

```
var Person = Backbone.Model.extend({
defaults: {
    name: 'Mr Steel',
    age: 26,
    occupation: 'FrontEnd Web Developer'
},

validate: function(attrs) {
    if (attrs.age < 0) {
        return 'Age must be a positive number.';
    }
},

work: function() {
    return this.get('name') + ' is working.';
}
}); 
```

但是当我去浏览器>控制台时。并在 .. 中键入以下内容，甚至不会触发。

```
var person = new Person();
person.get('age');//26
person.set('age', -25);//sets -25 
```

并将年龄设置为-25。这很奇怪！！请帮忙。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-31T16:30:07.000

您必须将`{validate:true}`参数传递给`set`方法，例如

`person.set('age', -25, {validate:true});`

# database - 无法在 VB6 数据环境中使用命令

> ID：15731641
> 
> 赞同：1
> 
> 时间：2013-03-31T16:26:44.750
> 
> 标签：database, vb6, command

我正在使用 vb6 项目，但我遇到了一个大问题。我为我的项目使用数据环境，但我不能使用命令。比如在我写按钮的时候`dataenvironment1.rsmycommand`，vb找不到，程序运行的时候出现这个错误：“找不到方法或数据成员”。

这是我的代码的一部分

```
 DE1.rscmdGetPersonalNumber.Close

 DE1.rscmdGetPersonalNumber.Open "Select * from Tbl_Members where PersonalNumber=1500 " 
```

这是我的 SQL 命令

```
DE1.rsCMD_GetPersonalNumber.Open "insert into Tbl_Members(PersonalNumber,Name,Family,PasportCode,TelNumber,MemberType,WorkDate,StartWorkTime,EndWorkTime,Password,AdminGroup,Active) values(" & NewMember.PersonalNumber & ",'" & NewMember.Name & "','" & NewMember.Family & "','" & NewMember.Pasport & "','" & NewMember.Tel & "'," & NewMember.Type & ",'" & NewMember.WorkDates & "','" & NewMember.StartTime & "','" & NewMember.EndTime & "','" & NewMember.Password & "'," & NewMember.IsManage & "," & NewMember.IsActive & ")" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:43:56.840

检查本指南：

[使用 DataEnvironment Controll 访问数据库](http://pages.cpsc.ucalgary.ca/~saul/vb_examples/tutorial4/)

遵循这一行：

> 转到项目菜单并选择组件。在 Designers 选项卡中，选中 Data Environment 复选框，然后单击 OK。

# c# - C# 客户端只接收来自服务器的一条消息

> ID：15731642
> 
> 赞同：0
> 
> 时间：2013-03-31T16:27:15.750
> 
> 标签：c#, client-server

我有简单的客户端服务器应用程序。

客户端代码：

```
public class Client
{
    private TcpClient client;

    private NetworkStream stream;

    ...

    public Client(string clientName)
    {
        this.client = new TcpClient(); 
        this.client.Connect(this.Address, 13465);
        this.stream = this.client.GetStream();
    }

    public void Listening()
    {
        while (true)
        {
             BinaryFormatter formatter = new BinaryFormatter();
             string data = (string)formatter.Deserialize(stream);

             // do something with data
        }
    }

    ...
} 
```

监听方法是一种接收数据的方法，你可以看到它有无限循环。

问题是，我只能从服务器收到一条消息。这意味着，该服务器向我发送字符串，我收到此字符串。服务器向我发送另一个字符串，而我的客户端什么也不做。

我 100% 确定，该服务器工作正常，因为我检查了几次（即使使用 Wireshark）。有人有什么理想，如何改进我的应用程序以接收来自服务器的所有消息？

# javascript - Angular JS + Opera 浏览器

> ID：15731644
> 
> 赞同：0
> 
> 时间：2013-03-31T16:27:36.347
> 
> 标签：javascript, angularjs, opera

在 Angular JS 应用程序中，如果我单击链接并更改 url 位置，Opera 浏览器会在 300-400 毫秒内显示非插值字符串（例如 {{ name }}），之后一切编译良好。

在其他浏览器中不显示非插值字符串，都编译好。如何在 Opera 中解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:55:44.837

我遇到了同样的问题。我还在我的 css 中添加了 ng-cloak 指令（加载在头部），但我仍然得到了一些无样式的内容。

然而，使用[ng-bind](http://docs.angularjs.org/api/ng.directive%3angBind)确实可以作为一种解决方法（尽管我更喜欢使用 ng-cloak）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T07:31:20.567

Opera mini 是一个代理服务器，这意味着它会剥离一些代码（特别是 javascript 代码）。[你可以在这里](https://dev.opera.com/articles/opera-mini-and-javascript/)阅读更多

Angular 似乎更专注于现代 android 和 IOS 手机浏览器，它们在发达城市拥有很大的市场份额。

但他们似乎忽略了人口使用入门级手机的发展中市场。在我看来，情况不应该如此。

我的建议是，如果您的目标用户使用 opera mini，即使禁用了 javascript，您的 Web 应用程序也可以访问和运行。

# javascript - javascript for-in 循环

> ID：15731645
> 
> 赞同：0
> 
> 时间：2013-03-31T16:27:38.457
> 
> 标签：javascript

正如定义所说的for-in循环用于循环对象的属性，而不是为什么循环数组的元素？

```
var arr = ['a','b','c'], indexes = [];

 Array.prototype.each = function() {/*blah*/};

 for (var index in arr) {
  indexes.push(index);
}
indexes; //["0", "1", "2", "each"] 
```

为什么要枚举 0,1,2？它们不是属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:30:51.987

引用自[`documentation`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)：

> for..in 不应用于迭代索引顺序很重要的数组。数组索引只是具有整数名称的可枚举属性，在其他方面与一般 Object 属性相同。不能保证 for...in 会以任何特定顺序返回索引，并且它将返回所有可枚举的属性，包括具有非整数名称的属性和继承的属性。
> 
> 因为迭代的顺序取决于实现，所以对数组进行迭代可能不会以一致的顺序访问元素。因此，在遍历访问顺序很重要的数组时，最好使用带有数字索引的 for 循环（或 Array.forEach 或非标准 for...of 循环）。

回答您的问题的关键是以下句子：

> 数组索引只是具有整数名称的可枚举属性，在其他方面与一般 Object 属性相同。

下面这句话总结了它：

> for..in 不应用于迭代索引顺序很重要的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:30:47.543

数组中具有元素的数组中的每个索引都是该数组的属性。所以这基本上就是你的数组在幕后的样子：

```
>>> arr

    {
        0: 'a',
        1: 'b',
        2: 'c',
        'each': function() {}
        'length': 3
    }; 
```

这些键是可枚举的，这就是您在输出中看到它们的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:29:37.790

`for` `in`循环遍历键，而不是值。所以它给你的数组索引 0, 1, 2 而不是值。

你可以这样做，但`for in`在数组上使用 a 是不好的做法。

```
for (var index in arr) {
    indexes.push(arr[index]);
} 
```

您应该使用常规`for`循环

```
for (var i = 0; i < arr.length; i++) {
    indexes.push(arr[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T16:31:08.493

`for...in`**对对象的可枚举**属性进行交互。的可枚举属性`Array`是索引。

更多信息可以在[这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)找到。

AMCAScript 6 定义了允许对值进行迭代的[`for...of`运算符。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...of)然而，这还没有被采纳。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T16:38:11.240

是的，如果你真的想使用 for in 而不是使用键，你可以将值变成这样的键，例如：

```
var arr = {'a':1,'b':1,'c':1};
for(var index in arr)
indexes.push(index); 
```

与设置 arr['a']=1 等相同。确实 for..in 迭代键 - 而不是值。

# coffeescript - 如何将 sourceMappingURL 添加到 .js 文件

> ID：15731650
> 
> 赞同：1
> 
> 时间：2013-03-31T16:28:16.707
> 
> 标签：coffeescript

我使用 CoffeeScript Redux zu 生成 .js 和 .js.map 文件。但是coffee没有将“sourceMappingURL”添加到js文件中。

CoffeeScript 1.6.2 通过 -m 参数做到这一点。如何使 CoffeScript 2.0 链接 .map 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T18:53:24.217

根据[源代码](https://github.com/michaelficarra/CoffeeScriptRedux/blob/master/src/command.coffee#L257)，如果您通过了，应该会发生这种情况`--source-map-file`。如果没有，这可能是一个错误。

# mysql - 尝试导入运行 WAMP 的 .SQL

> ID：15731652
> 
> 赞同：0
> 
> 时间：2013-03-31T16:28:26.773
> 
> 标签：mysql

我看过很多教程告诉我

```
databaseName < databaseName.sql 
```

运行 WAMP。我看到mysql数据文件夹在哪里。我将我的 .sql 文件放在该文件夹中，或者放在我想要将 .sql 文件导入到的数据库所在的文件夹中，但是我运行的任何命令似乎都不起作用。

问题：假设我已登录并“使用”正确的数据库，我应该从 mysql 提示符运行什么命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:33:36.423

使用加载日期 INFILE。

您也可以使用加载数据本地 INFILE。

我有一个“世界”数据库。上传它（我使用 csv），我会使用以下内容。

```
 use world;
  source C:\wamp\bin\mysql\mysql5.5.24\data\world\filename.sql; 
```

对不起，我没有说我把它放在这里

C:\wamp\bin\mysql\mysql5.5.24\data\world

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:19:27.293

当且仅当您的文件是有效的数据库转储（文件扩展名“.sql”所暗示的含义）时，您可以通过以下方式从任何位置应用该转储：

1.  启动mysql.exe程序*（[PATH TO MYSQL BIN DIR]mysql.exe [PARAMETER]*
2.  在 mysql.exe 中使用“source”命令，如*source [PATH TO sql FILE]databaseName.sql*

# javascript - 搜索引擎的 CSS 隐藏文本非法？

> ID：15731655
> 
> 赞同：2
> 
> 时间：2013-03-31T16:28:42.413
> 
> 标签：javascript, jquery, html, css, hidden

这是我为 jQuery Modal Box 创建的基本示例框、CSS 和 JS。

```
<!-- hidden boxes // -->
<div id="content_1" class="box">
    <h1>First Box</h1>
    <p>Content goes here...</p>
</div>
<div id="content_2" class="box">
    <h1>Second Box</h1>
    <p>Content goes here...</p>
</div>
.....

<!-- links for boxes // -->
<a href="#content_1" class="link">Show First Box</a>
<a href="#content_2" class="link">Show Second Box</a>

<!-- css // -->
<style>
.box {
    display: none;
}
</style>

<!-- javascript // -->
<script type="text/javascript">
$(document).ready( function() {
    $('.link').click( function() {
        // process modal
    });
});
</script> 
```

因此，当用户单击第一个/第二个框链接时，会弹出带有内容的 jQuery 模式。我的目的不是隐藏文本。我在一些博客中听到并阅读过，Google 将对隐藏文本采取行动。我的方式对 SEO 是否违法/不利？或者有没有更好的方法来做到这一点`display:none`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T16:33:59.047

您会发现 Google 自己实际上`display:none;`在他们的主页上使用 - 考虑到 jQuery 和其他使用这些效果的 JavaScript 库的流行，如果您在必要的情况下使用它，我看不出它会对您的 SEO 产生什么负面影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:42:08.263

我使用以下代码片段来隐藏 css3 导航菜单上的子菜单，并带有一些很酷的缓入、缓入过渡。并且 afaik 这是在 SEO 方面隐藏元素的有效 css。

```
opacity: 0;
visibility: hidden; 
```

已经讨论过 [是否有条件显示的替代方法：无](https://stackoverflow.com/questions/141775/is-there-an-alternative-to-conditional-displaynone)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-31T16:40:43.767

而不是使用 display:none; 你可以使用左：-9999px；位置：绝对；它仍然会显示搜索引擎的内容，但会显示在某个不为用户显示的地方。

[http://css-tricks.com/snippets/css/accessibilityseo-friendly-css-hiding/](http://css-tricks.com/snippets/css/accessibilityseo-friendly-css-hiding/)

# ruby-on-rails - 检查一个单词是否包含在数组中

> ID：15731659
> 
> 赞同：-1
> 
> 时间：2013-03-31T16:29:02.573
> 
> 标签：ruby-on-rails, ruby

我在 IRB 上试过这个，但找不到解决方案：

```
irb(main):001:0> STATUS = %w(draft public)
=> ["draft", "public"]
irb(main):003:0> s = "draft"
=> "draft"
irb(main):004:0> s.include?(STATUS)
TypeError: can't convert Array into String
    from (irb):4:in `include?'
    from (irb):4
    from /Users/SO/.rbenv/versions/1.9.3-p374/bin/irb:12:in `<main>' 
```

怎么了？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T16:31:22.133

这是相反的方式。

```
STATUS.include?(s) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T16:34:00.400

depa 是正确的，反之亦然；但是，Rails 还[`in?`](http://guides.rubyonrails.org/active_support_core_extensions.html#in)通过 ActiveSupport 提供了一种方法`s.in?(STATUS)`，如果这对您更有意义，您可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:31:17.520

你得到了接收者和相反的论点。检查您的标题：您在被动中写了“一个单词包含在数组中”。如果它处于活动状态，它将是“数组包含一个单词”或`the_array.include?(a_word)`，不是`a_word.include?(the_array)`。

# android - Android 加速度计不工作

> ID：15731662
> 
> 赞同：0
> 
> 时间：2013-03-31T16:29:10.750
> 
> 标签：android

我正在尝试构建一个应用程序，我需要使用加速度计。使用传感器模拟器，加速度计工作正常，但是当我制作 apk 时，加速度计的输出不起作用。我使用的是三星 Exibit 4g XII，这个设备有加速度计

```
public class AcelerometerImp extends Activity implements SensorEventListener {

    StringBuilder builder;
    TextView textView;

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        textView = new TextView(this);
        setContentView(textView);
        SensorManager manager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        textView.setText( (manager.getSensorList( Sensor.TYPE_ACCELEROMETER ).size() == 0) 
                ? "No hay acelerometro" : manager.getSensorList( Sensor.TYPE_ACCELEROMETER ).get(0).toString()  );
    }

    @Override
    public void onSensorChanged (SensorEvent event){
        builder.setLength(0);
        builder.append("x: " + event.values[0] + ", y: " + event.values[1] + ", z: " + event.values[2]);
        textView.setText(builder.toString());
    }

    @Override
    public void onAccuracyChanged (Sensor sensor, int accuracy){        
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:36:54.830

您必须注册监听器。

```
@Override
protected void onResume()
{
    super.onResume();

    manager.registerListener(this, manager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), 
                                    SensorManager.SENSOR_DELAY_NORMAL);
}  

@Override
protected void onPause()
{
    super.onPause();

    manager.unregisterListener(this);
} 
```

# php - PHP fopen() 总是返回 NULL

> ID：15731665
> 
> 赞同：1
> 
> 时间：2013-03-31T16:29:28.787
> 
> 标签：php, fopen, freebsd, lighttpd

我正在尝试打开一个文件进行解析（二进制文件），但是无论 fopen() 总是返回 NULL。

我已经排除了几乎所有事情，以至于我有一个简单的测试脚本：

```
<?php
$idx = fopen('/usr/home/username/web/appname/dev/www/debug/18194001.idx','r');
trigger_error(var_export($idx,true));
exit(); 
```

trigger_error(var_export()) 的输出；是：

```
[31-Mar-2013 16:30:34 UTC] PHP Notice:  NULL in /usr/home/username/web/appname/dev/www/debug/ajax.idx.php on line 3 
```

无论我为第二个 fopen() 选项指定什么标志，我都会得到相同的结果。

现在，显而易见的问题是该文件是否存在，我是否有权读取它？这两个问题的答案都是肯定的。我使用了相对路径和绝对路径，都正确读取了文件。file_get_contents() 也可以毫无问题地读取文件。

is_readable() 和 file_exists() 都返回 true

该文件的 ls -lah 输出为：

```
-rwxrwxrwx   1 username  username  2.0K Mar 30 15:02 18194001.idx 
```

其中“用户名”与运行 Web 服务器进程和 PHP（lighttpd 和 php-fpm）的用户名匹配。父目录还具有用户/组/所有的读/读/读权限。

我已经尝试过其他文件，并且我注意到我在 fopen 中抛出的几乎所有东西都返回了一个 NULL 值。

帮助？

PHP信息：

```
PHP 5.4.6 (cli) (built: Oct 10 2012 10:43:19)
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies
    with XCache v2.0.1, Copyright (c) 2005-2012, by mOo 
```

Lighttpd 信息：

```
lighttpd/1.4.31 (ssl) - a light and fast webserver
Build-Date: Sep  7 2012 15:38:20 
```

操作系统：

```
FreeBSD hostname.hostname.hostname 8.2-RELEASE FreeBSD 8.2-RELEASE #0: Thu Feb 17 02:41:51 UTC 2011     root@mason.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC  amd64 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T16:35:58.577

您不能有意义地`var_export`使用`fopen`ed 资源，但是您可以`var_dump`：

```
$ php -r 'var_export(fopen("/tmp/a","w+"));'
NULL
$ php -r 'var_dump(fopen("/tmp/a","w+"));'
resource(5) of type (stream) 
```

...因为`var_export()`旨在“恢复” PHP 脚本中的变量，并且资源需要更多的设置，然后才能实例化一个简单的变量。如果你想知道是否`fopen`成功，只需检查 it is not `false`。

```
$ php -r 'var_export(fopen("/this/does/not/exist","w+"));'
... some errors...
false 
```

换句话说，您`NULL`从某种意义上获得`var_export`的事实`fopen`实际上是成功的。

# iphone - 应用程序刚刚批准在 iPad 上崩溃

> ID：15731666
> 
> 赞同：3
> 
> 时间：2013-03-31T16:29:28.967
> 
> 标签：iphone, sqlite, logging, sdk, crash

嗨，我在 AppStore 上有一个应用程序，我做了一个更新，在模拟器和我的 iPad 4 上运行良好，所以我发送到 AppStore 进行发布。该应用程序使用在此版本中更新的 Sqlite 数据库。我收到消息 App 没问题并获得 Apple Ready to Sale 的批准，因此我在 iPad 上下载了该 App 以查看它是否正常工作，但它只是在 Navigation Controller 中崩溃。

我想知道苹果人是否不会遇到应用程序崩溃，你能给我一些关于如何解决这个问题的建议吗？

谢谢这是来自主办方的崩溃日志

```
 Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-03-31 17:45:48.047 +0200
OS Version:      iOS 6.1.2 (10B146)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                0x323bc3e2 __exceptionPreprocess + 158
1   libobjc.A.dylib               0x3a23c95e objc_exception_throw + 26
2   CoreFoundation                0x323bff2c -[NSObject(NSObject) doesNotRecognizeSelector:] + 180
3   CoreFoundation                0x323be648 ___forwarding___ + 388
4   CoreFoundation                0x32316204 _CF_forwarding_prep_0 + 20
5   APP                       0x0010ec28 -[GADObjectPrivate loadPrivateRequest:autoRefresh:] (GADObjectPrivate.m:412)
6   APP                       0x00110988 -[GADObjectPrivate loadRequest:] (GADObjectPrivate.m:878)
7   APP                       0x0010e108 -[GADBannerView loadRequest:] (GADBannerView.m:267)
8   APP                       0x000ea918 -[ElementDetail viewDidLoad] (ElementDetail.m:61)
9   UIKit                         0x341ea574 -[UIViewController loadViewIfRequired] + 360
10  UIKit                         0x3423f1f2 -[UIViewController contentScrollView] + 22
11  UIKit                         0x3423f138 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 24
12  UIKit                         0x3423f01c -[UINavigationController _layoutViewController:] + 28
13  UIKit                         0x3423ef48 -[UINavigationController _updateScrollViewFromViewController:toViewController:] + 268
14  UIKit                         0x3423e694 -[UINavigationController _startTransition:fromViewController:toViewController:] + 60
15  UIKit                         0x3423e57c -[UINavigationController _startDeferredTransitionIfNeeded:] + 320
16  UIKit                         0x3422cb56 -[UINavigationController pushViewController:transition:forceImmediate:] + 854
17  UIKit                         0x3422c7f6 -[UINavigationController pushViewController:animated:] + 34
18  APP                       0x000e6982 -[CardsViewController tableView:didSelectRowAtIndexPath:] (CardsViewController.m:323)
19  UIKit                         0x3428d318 -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] + 872
20  UIKit                         0x3430fda4 -[UITableView _userSelectRowAtPendingSelectionIndexPath:] + 152
21  Foundation                    0x32ccb652 __NSFireDelayedPerform + 446
22  CoreFoundation                0x32391852 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 10
23  CoreFoundation                0x323914fe __CFRunLoopDoTimer + 270
24  CoreFoundation                0x32390172 __CFRunLoopRun + 1226
25  CoreFoundation                0x32303238 CFRunLoopRunSpecific + 352
26  CoreFoundation                0x323030c4 CFRunLoopRunInMode + 100
27  GraphicsServices              0x35ebd336 GSEventRunModal + 70
28  UIKit                         0x3421f2b4 UIApplicationMain + 1116
29  APP                      0x000e31ae main (main.m:14)
30  libdyld.dylib                 0x3a669b1c start + 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:07:58.547

根据[这个答案](https://stackoverflow.com/questions/13484084/exc-crash-sigabrt-cannot-track-it-down-please-see-crash-log-attached-gadob)，您应该`-loadRequest:`拨打电话`viewWillAppear`，而不是`viewDidLoad`。

谷歌似乎没有将源代码发布到`GADObjectPrivate`，因此很难验证它是否有效或为什么有效。

# ios - UIWebView, mediaPlaybackRequiresUserAction

> ID：15731667
> 
> 赞同：0
> 
> 时间：2013-03-31T16:29:32.313
> 
> 标签：ios, uiwebview

我有一个包含网页的网页视图，该网页只包含一个视频，一旦网页打开该网页内的视频直接播放！！，这个属性（ mediaPlaybackRequiresUserAction ）可以帮助他吗？

我阅读了文档，但我没有明白这一点.. [https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006950](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006950)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:45:37.500

那么 mediaPlaybackRequiresUserAction 默认设置为 YES，从而防止在没有用户交互的情况下播放任何媒体。如果将 mediaPlaybackRequiresUserAction 设置为 NO，则 UIWebView 中的音频和视频可以在其中自动启动。

# c++ - 在 RAD Studio C++Builder 中使用宽字符导致内存访问异常

> ID：15731668
> 
> 赞同：0
> 
> 时间：2013-03-31T16:29:36.033
> 
> 标签：c++, exception, memory, access-violation, c++builder-xe3

所以我一直在一个递归扫描 Windows 目录的基本程序中使用字符和宽字符。最初，我使用标准字符和字符串，以及一些相关函数来完成此任务（FindFirstFile、FindNextFile 等）。实际的递归通过 CreateThread 和 WaitForSingleObject 传递给创建的线程；它工作得很好，正如预期的那样。

但是，当我将这些字符、字符串和相关函数转换为它们的广泛对应函数（wchar_t、wstring、FindFirstFileW 等）时出现了一个问题。现在，当递归扫描具有多个文件夹的目录时，程序抛出异常/文件。异常发生在我的线程处理的 WaitForSingleObject 阶段。我已经[追踪了](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/SysUtils_EAccessViolation.html)有关异常本身的以下信息：

> **EAccessViolation**是无效内存访问错误的异常类。
> 
> 当应用程序发生以下情况时会引发 EAccessViolation：
> 
> *取消引用 nil (Delphi) 或 NULL (C++) 指针。*
> 
> *写入为可执行代码保留的内存。*
> 
> *尝试访问没有分配给应用程序的虚拟内存的内存地址。*
> 
> 运行时异常信息保存在 EExternal 提供的字段中。
> 
> 注意：应用程序不应直接引发 EAccessViolation，而应依赖运行时引发此异常。

我的问题是，当我唯一改变的是正在使用的字符类型时，为什么会抛出这个异常？我正在使用的 IDE 是 RAD Studio XE3 C++Builder，不幸的是，如果不对代码进行重大更改，我无法在我的其他 IDE 上进行真正的测试。

# c++ - 对象/指针/智能指针的 std::vector 以传递对象（总线错误：10）？

> ID：15731670
> 
> 赞同：3
> 
> 时间：2013-03-31T16:29:39.493
> 
> 标签：c++, oop, c++11

我想请教一个一般性的建议。下面的代码完全编译并大致代表了我处理的代码的结构。简而言之，我想将一系列从基类（Class1）派生的对象和一些其他参数从一个地方传递到另一个地方。更准确地说，实现父类的不同子类，收集这些子类的实例并通过参数进行处理。

问题是，**您会建议使用对象向量还是指针向量**？**如果出于某种原因这更好/更安全/更少的内存泄漏/等**，我不介意从`C++11`( `std::unique_ptr`, `std::shared_ptr`)中寻找一些新的东西。如果有人可以为这种情况提供有关容器的建议和/或提供使用. **`C++11`**

 **p/s/[这里](https://stackoverflow.com/questions/4271130/c-is-push-backnew-object-a-memory-leak)UncleBens 说，如果/当抛出异常时，使用指针可能会导致内存泄漏。所以也许我真的应该使用**智能指针**来完成任务？这看起来如何？

p/p/s/ 很有趣，现实生活中的例子给了我**Bus error: 10** when I try to use those `Class2`objects from `std::vector< Container<d>*> / std::vector< Container<d>>`. 但是，我无法在简单的情况下重现该错误...

```
#include <string>
#include <iostream>
#include <vector>

template<int dim>
class Class1 {
   public:

     Class1() {};
    ~Class1() {}; 

};

template<int dim>
class Class2 : public Class1<dim>
{
   public:
     Class2() : 
       Class1<dim>() {}; 

 };

template <int dim>
class Container
{
  public:
     Container( Class1<dim> & f, int param1) : c1(f), param_(param1) {}

  Class1<dim>  & c1;
      int param_;
 };

 static const int d = 2; 

 int main() 
 {
    int p = 1;
    Class2<d> c2;
    std::vector< Container<d> *> p_list;
    std::vector< Container<d> > list;
    {
      p_list.push_back ( new Container<d> ( c2,p ) ); 
    }
    std::cout<<"from pointers: "<<p_list[0]->param_<<std::endl;

    {
      list.push_back( Container<d> ( c2,p ) );
    }
    std::cout<<"from objects: "<<list[0].param_<<std::endl;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:29:33.800

首先，Class1的析构函数应该标记为virtual，否则当派生类（例如Class2）的实例被销毁时，它的析构函数将不会被正确调用。

至于您的问题，使用对象容器的后果是：

*   容器可能需要复制对象，因此您需要确保有一个复制构造函数（示例中的类获取编译器生成的默认构造函数）。复制对象会对性能产生影响，并且您需要正确定义复制的语义（是深还是浅，即您是创建 class1 对象的新副本，还是仅复制引用）。
*   你不能有任何多态性，所以你不能子类化 Container 然后将基类和子类的实例放在同一个容器中。
*   根据容器的不同，您的对象将在内存中是连续的（向量就是这种情况），这可以带来性能优势。

如果您使用原始指针的容器，则容器只需要复制指针（更快），您可以添加包含类型的派生实例。缺点是您必须在使用后手动销毁对象，并且正如您所提到的，很容易泄漏内存。

shared_ptr 与原始指针有类似的优点/缺点，但关键的好处是 shared_ptr 会在不再引用它时为您销毁对象，这使得您不太可能引入内存泄漏（但仍然不是不可能在涉及异常时这样做）。

鉴于您将这些对象移交给进一步处理，我会说基于 shared_ptr 的方法是一个不错的选择。在原始指针之上使用共享 ptrs 的后果是：

*   可能会有性能开销，因为为了线程安全，大多数 shared_ptr 实现需要检查/设置锁（这可能涉及对操作系统的系统调用）。
*   您仍然可以通过在对象之间引入循环引用来泄漏内存。
*   您必须使用实现 C++11 的编译器或使用外部库（大多数人使用 boost）。

使用 shared_ptrs 的示例看起来像这样（未经测试）。

```
#include <string>
#include <iostream>
#include <vector>

template<int dim>
class Class1 {
   public:
       Class1() {};
       virtual ~Class1() {}; 

};

template<int dim>
class Class2 : public Class1<dim>
{
    public:
        Class2() : 
        Class1<dim>() {}; 

};

template <int dim>
class Container
{
    public:
       Container( boost::shared_ptr<Class1<dim>> f, int param1) : c1(f), param_(param1) {}

       boost::shared_ptr<Class1<dim>> c1;
       int param_;
};

static const int d = 2;

int main() 
{
    int p = 1;
    boost::shared_ptr<Class1<d>> c2 = boost::make_shared<Class2<d>>();

    std::vector<boost::shared_ptr<Container<d>>> list;
    list.push_back(boost::make_shared<Container<d>>(c2,p));

    std::cout << "from objects: " << list[0]->param_ << std::endl;
} 
```

总之，如果接收容器的代码没有在任何地方存储对它们的引用，并且您不需要多态性，那么对象容器可能就可以了。如果接收容器的代码需要将它们存储在某处，和/或您想要多态容器，请使用共享 ptrs。**

# objective-c - 目标c动态获取一个nsobjects属性

> ID：15731672
> 
> 赞同：0
> 
> 时间：2013-03-31T16:30:06.710
> 
> 标签：objective-c, cocoa-touch, nsobject

我正在尝试动态获取类的属性。这是我的方法

```
+(NSArray *)getDictionaryKeysFromObjClass:(NSObject *)objClass{

    NSMutableArray *classProperties = [[NSMutableArray alloc] init];
    const char* className = class_getName([objClass class]);
    id ObjectClass = objc_getClass(className);

    unsigned int outCount, i;
    objc_property_t *properties = class_copyPropertyList(ObjectClass, &outCount);

    for(i=0; i<outCount; i++){
        objc_property_t *property = properties[i];
        //[classProperties addObject:property];
        NSLog(@"Property > %@", property);
    }

} 
```

所以我不确定我是否做得正确，就像我这样称呼它时：

```
NSMutableArray *testarr = [WCFServiceRequest getDictionaryKeysFromClass:[MyFirstClass class]]; 
```

它会抛出一个错误：

> NSInvalidArgumentException'，原因：'+[WCFServiceRequest getDictionaryKeysFromClass:]：发送到类的无法识别的选择器

对我做错了什么有任何想法吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:32:33.560

你打错了

```
NSMutableArray *testarr = [WCFServiceRequest getDictionaryKeysFromClass:[MyFirstClass class]];
------------------------------------------------------------------^Obj is missing 
```

它应该是 ：

```
NSMutableArray *testarr = [WCFServiceRequest getDictionaryKeysFromObjClass:[MyFirstClass class]]; 
```

由于您的方法是：

```
+(NSArray *)getDictionaryKeysFromObjClass:(NSObject *)objClass; 
```

# ios - xcode中的可折叠表格视图

> ID：15731676
> 
> 赞同：1
> 
> 时间：2013-03-31T16:30:15.627
> 
> 标签：ios, xcode, uitableview

我正在尝试在 xcode 中构建可折叠的表格视图，然后我从这里找到了一个教程，[并且](http://blog.paxcel.net/blog/expandablecollapsible-table-for-ios/)可以从[这里](http://blog.paxcel.net/blog/wp-content/uploads/2012/08/CustomTable.zip)下载教程项目。

然而，该项目是在 xib 中实现的，而我正在使用情节提要。所以我试图将项目转移到情节提要中。因为我对 ios 编程非常陌生，经过几个小时的努力，我只能设法使项目在故事板上没有错误，但我无法使可折叠的工作。事实上，我的故事板版本甚至没有显示可折叠的表格单元格。这是我在情节提要中执行的步骤。

1.  我将表视图控制器从对象库拖到情节提要上
2.  我控制 + 将一个 segue 从 tabbarcontroller 拖到 table view 控制器
3.  我创建了FourthViewController.h 和FourthViewController.m，然后将教程项目中的RootViewController.h 和RootViewController.m 复制到这两个文件中。
4.  我将 sectionView 和 sectionInfo 文件从教程项目拖放到我的项目中。
5.  我转到我在情节提要中创建的表视图控制器，然后单击表视图，转到连接检查器，检查数据源和委托点到 FourthViewController。
6.  我还为FourthViewController 创建了一个新的引用出口并选择“查看”。

我不太确定我错在哪里。构建并运行后，我根本看不到可折叠元素。我有点绝望。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:50:27.353

我不确定您发布的文章，但免费的 Sensible TableView 框架提供了一种非常直接的方法来自动创建可展开/可折叠的部分。值得一试。祝你好运！

# codeigniter - 如何知道 DOMPDF 中的分页符

> ID：15731677
> 
> 赞同：0
> 
> 时间：2013-03-31T16:30:15.900
> 
> 标签：codeigniter, backbone.js, dompdf

我正在使用 DOMPDF 库动态生成发票。我的用例场景是在每页顶部留出大约 3 英寸的空间。在第一页上，我使用具有适当高度的空白 div 创建了它。

现在在第二页上，由于显而易见的原因，它从一开始就没有达到所需的高度。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:04:52.570

而不是间隔 div 只需在 css 中设置页边距：

```
@page { margin-top: 3in; } 
```

# java - 二进制字符串表示到文件和再次到字符串

> ID：15731682
> 
> 赞同：0
> 
> 时间：2013-03-31T16:30:34.303
> 
> 标签：java, string, binary, huffman-code

我需要将二进制文件放入一个文件中，然后再将其取回，但我需要在文件中使用尽可能少的空间（例如 16 位 = 2 字节）

```
byte[] b = new BigInteger("1011010101010110", 2).toByteArray();

FileOutputStream fos = new FileOutputStream("file",true);
fos.write(b); 
```

我用它将“1011010101010110”以二进制表示形式写入文件（2字节空间）

但是现在我不知道如何再次从文件中读取它并再次将其转回字符串“1011010101010110”。

当我用 Notepadd++ 打开二进制文件时，它有奇怪的字符（我不知道它是否正常）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:39:58.933

我认为您可以将[二进制转换为整数](https://stackoverflow.com/questions/7437987/how-to-convert-binary-string-value-to-decimal)（占用更少的空间，因为它们的字符更少，例如；二进制 1001 == 十进制 9），然后写入文件（as `String`）。

回读时，您可以再次将[小数转换为二进制](https://stackoverflow.com/questions/5203974/converting-decimal-to-binary-in-java)

# c++ - 通过函数引用检索返回类型？

> ID：15731685
> 
> 赞同：3
> 
> 时间：2013-03-31T16:30:56.413
> 
> 标签：c++, templates, metaprogramming

嗨，假设我有一个 typedef ReturnType (ObjectType::*fun1 )( Arg0 ); 是否有可能通过对函数的一个引用以某种方式获取参数的返回类型和数量？

例如现在我有：

```
template <typename ObjectType, typename ReturnType, typename Arg0, typename Arg1  >
Private::value_fun< ObjectType, TYPELIST_2(Arg0, Arg1), ReturnType > val_mem_funcion(typename Private::value_fun<ObjectType, TYPELIST_2(Arg0, Arg1), ReturnType>::FunctionType func, Arg0 arg0, Arg1 arg1) {
    return Private::value_fun <ObjectType, TYPELIST_2(Arg0, Arg1), ReturnType>( func, arg0, arg1 );
} 
```

我的电话是：

```
std::for_each( test.begin(), test.end(), utils::val_mem_funcion<Test, int>(&Test::sum, 33, 44)  ); 
```

但如果我可以删除模板参数并使其如下所示会更好：

```
std::for_each( test.begin(), test.end(), utils::val_mem_funcion(&Test::sum, 33, 44)  ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:48:10.033

给定 function `T f();`，可以像这样提取返回类型（需要`C++11`）：

```
typedef decltype(f()) ReturnType; 
```

现在`ReturnType`等于`T`上面的类型。

# java - 具有同步和并发收集的空元素问题

> ID：15731689
> 
> 赞同：1
> 
> 时间：2013-03-31T16:31:14.207
> 
> 标签：java, collections, concurrency, synchronization

大多数同步和并发集合（如 HashTable、ConcurrentHashMap 等）都不允许空值。空元素有什么具体问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:12:00.053

`HashTable.get(key)`如果指定的键不存在于 HashTable 中，则方法返回 null。如果 HashTable 允许`null`作为值，则如果我从`HashTable.get(key)`方法中获取 null，则可能有两种可能性。

1.  哈希表中不存在密钥
2.  键存在，但值集为空

API 的用户可能会感到困惑。我相信他们不允许空值只是为了防止这种歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:12:33.007

Hashtable 有点过时，所以我不会对此发表评论。至于`ConcurrentHashMap`API 与标准的重要补充之一`HashMap`是一些原子方法，例如`putIfAbsent`. Java 文档：

> 返回与指定键关联的前一个值，如果该键没有映射，则返回 null

特别是，如果映射允许空键，则该方法使用起来会复杂得多。需要确保值不能被覆盖的典型模式是：

```
ConcurrentMap<K,V> map = new ConcurrentHashMap<> ();
V value = map.get(key);
if (value == null) {
    value = new V();
    V previousValue = map.putIfAbsent(key, value);
    if (previousValue != null) { //Here you need to be sure what that means
        value = previousValue;
    }
}
useValue(value); 
```

另一个示例是如何检查键是否在 HashMap 中（并且您需要返回值）：

```
V value = map.get(key);
if (value == null && !map.containsKey(key)) {
} 
```

并发环境中的问题是整个事情不是原子的。

另见[这篇文章](https://stackoverflow.com/questions/698638/why-does-concurrenthashmap-prevent-null-keys-and-values)和[CHM 作者的这些评论](http://cs.oswego.edu/pipermail/concurrency-interest/2006-May/002485.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:35:46.280

这是一个接受空键和值的同步映射

```
 Map m = Collections.synchronizedMap(new HashMap()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T16:43:47.480

> 从哈希表 JavaDoc：
> 
> 要成功地从哈希表中存储和检索对象，用作键的对象必须实现 hashCode 方法和 equals 方法。
> 
> 简而言之，由于 null 不是对象，因此您不能对其调用 .equals() 或 .hashCode() ，因此 Hashtable 无法计算哈希以将其用作键。
> 
> HashMap 较新，并且具有更高级的功能，基本上只是对 Hashtable 功能的改进。因此，在创建 HashMap 时，它专门设计为将 null 值作为键处理，并将它们作为特殊情况处理。
> 
> 具体来说，在发出 .get(key) 时，使用 null 作为键的处理方式如下：
> 
> (key==null ? k==null : key.equals(k))

资料来源：[为什么 Hashtable 不采用空键？](https://stackoverflow.com/questions/7556357/why-does-hashtable-not-take-null-key)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T17:11:46.943

当您同步时，这意味着您将获得对该对象或某个部分的锁定。如果您的对象为空，那么您将如何决定您将在哪个部分获得锁定？

说在concurrenthashmaps中，你可以把它分成16个不同的锁。现在你将如何决定将 null 放置在哪里？

Null 没有附加值，它只是意味着没有对象。因此，为了避免歧义，最好不要拥有它。

# ocr - 如何将数字图像转换为显示学生的数据

> ID：15731690
> 
> 赞同：0
> 
> 时间：2013-03-31T16:31:15.383
> 
> 标签：ocr

该系统应通过使用 OCR 在使用 android 的设备捕获的图像上记录学生的出勤情况。在OCR处理捕获的图像中的字符（例如，识别学生的数字）后，将显示并记录学生的详细信息。

步骤：使用任何使用安卓操作系统的设备捕获数字图像 --> OCR 识别图像中的数字 --> 这些数字将用于显示学生的数据并记录他或她当天的出勤情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:49:18.587

您要问的是**OCR**，它并不像您想象的那么简单。有一项[开源](https://code.google.com/p/tesseract-ocr/)工作可以做到这一点。

# python - 从输入返回字符串列表

> ID：15731691
> 
> 赞同：0
> 
> 时间：2013-03-31T16:31:17.177
> 
> 标签：python, python-3.x

我目前正在研究一个名为`getBASIC()`. 这就是我这样做的原因：

编写一个`getBASIC()`不带参数的函数，并执行以下操作：它应该使用 while 循环从输入中读取行；当它到达末尾时，它应该以字符串列表的形式返回整个程序。

该程序采用以下形式输入：

```
X GOTO Y  
Y GOTO Z  
Z END 
```

等等等等。

我的代码如下：

```
def getBASIC():
   l = []
   while len(i.split()) == 3:
      i = input()
      l.append(i)
   return(l) 
```

问题是，我得到一个`UnboundLocalError: local variable 'i' referenced before assignment`. 现在我知道这是为什么了，但我突然变成了一个白痴，不知道如何解决它。帮助调试这将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:36:06.940

Simple solution

```
 i = input()
   l.append(i)
   while len(i.split()) == 3:
       i = input()
       l.append(i) 
```

other solution:

```
 while True:
        i = input()
        l.append(i)
        if len(i.split()) != 3:
            break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:15:50.557

```
 def getBASIC():
   l = []
   x = 1
   while x == 1:
      i = input()
      l.append(i)
      if len(i.split()) != 3:
         x = 0
   return l 
```

# c# - 使用 Socket 向浏览器发送响应时出错

> ID：15731698
> 
> 赞同：0
> 
> 时间：2013-03-31T16:31:56.480
> 
> 标签：c#, .net, sockets

我目前正在编写一个简单的代理服务器，就像我的浏览器（Firefox 或 chrome）和 Web 服务器之间的接口，我将 Firefox 设置为向特定端口（7777）发送请求，我监听这个端口以获取请求并发送到互联网得到回应。

对于使用异步套接字向 Web 服务器发送和接收我的请求，我在向 Firefox 发送响应时遇到问题，因为 Web 服务器以多部分（8Kb）获得一个请求的响应，我立即将响应的每一部分发送到浏览器。现在，当我发送包含标头信息的请求的第一部分时，我没有问题，但是当我想发送 GZip 请求的其余部分时，我的浏览器会引发此异常

FireFox：**内容编码错误** 您尝试查看的页面无法显示，因为它使用了无效或不受支持的压缩形式。

Chrome：错误 330（net::ERR_CONTENT_DECODING_FAILED）：未知错误。

**但是当我将 sleep(1000) 放入 sendcallback 时，它可以正常工作**

```
private void SendCallback(IAsyncResult ar)
{
    try
    {
        SendStateObject Result = (SendStateObject)ar.AsyncState;

        int ByteSend = Result.WorkSocket.EndSend(ar);
        System.Threading.Thread.Sleep(1000);
    }
    catch (Exception ex)
    {
        System.Windows.Forms.MessageBox.Show(ex.StackTrace);
    }
} 
```

什么是问题？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:48:22.933

这可能是一种竞争条件，因为您使用的是异步套接字。请看这里：http: [//msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)

# javascript - 如何将 std::function 绑定到 JavaScript V8？

> ID：15731699
> 
> 赞同：0
> 
> 时间：2013-03-31T16:32:05.403
> 
> 标签：javascript, c++, binding, v8, std-function

我刚开始使用[JavaScript V8并从](https://developers.google.com/v8/)[Embedder's Guide](https://developers.google.com/v8/embed)编译了一个基本示例。现在我想将 C++ 函数绑定到 JavaScript 上下文。

现在我只有一个或多或少的空白类，稍后应该处理绑定。

```
class Manager
{
public:
    Manager()
    {
        context = Context::New();
    }
    void Bind(string Name, function<Handle<Value>(const Arguments&)> Function)
    {
        // bind the function to the given context
    }
private:
    Persistent<Context> context;
}; 
```

如何将`std::function`对象绑定到 JavaScript V8 上下文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T20:24:11.220

我在我的引擎中使用的是一种相当复杂的方法，但我是第一个想到的。（遗憾的是，我从 V8 迁移到 LLVM，因此我没有对此进行优化。）

```
void ExposeFunctions(v8::Handle<v8::ObjectTemplate> engine) {
    /* ... */
    engine->Set(v8::String::New("Exit"), v8::FunctionTemplate::New(NativeExit));
    engine->Set(v8::String::New("Log"), v8::FunctionTemplate::New(NativeLog));
    /* ... */
}

int SpawnEngine() {
    v8::Locker locker;
    v8::HandleScope handleScope;
    v8::TryCatch exceptionManager;
    v8::Handle<v8::ObjectTemplate> global = v8::ObjectTemplate::New();
    ExposeFunctions(global);
    v8::Persistent<v8::Context> context = v8::Context::New(nullptr, global);
    v8::Context::Scope scope(context);
    /* ... */
    context.Dispose();
    return 0;
} 
```

这至少应该为您提供一个可能的解决方案，将本机函数绑定到解释器，您可以根据需要对其进行重新设计。

考虑到您使用函数对象的问题，可以尝试（只是在这里猜测）直接传递它，就像我对命名函数所做的那样，或者将它嵌套在传递给`v8::FunctionTemplate::New`. 但是自从我使用它以来已经有一段时间了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:39:23.150

`InvocationCallback`函数请求的参数类型`Set`是一个简单的typedef。

```
typedef Handle<Value> (*InvocationCallback)(Arguments const &); 
```

因此我不得不将其转换`std::function`为原始函数指针。

```
void Register(string Name, function<Handle<Value>(Arguments const &)> Function)
{
    InvocationCallback* function = Function.target<InvocationCallback>();
    globals->Set(String::New(Name.c_str()), FunctionTemplate::New(*function));
} 
```

# python - 朝一个方向射击

> ID：15731700
> 
> 赞同：-2
> 
> 时间：2013-03-31T16:32:08.327
> 
> 标签：python, pygame

我无法让我的玩家朝玩家正在看的方向射击

```
class Player(pygame.sprite.Sprite):
    def __init__(self, screen, (posx, posy), shell):
        'Called the Sprite class constructor'
        pygame.sprite.Sprite.__init__(self)

        'Save a reference to the screen'
        self.screen = screen
        self.shell = shell
        'Create the image for the sprite'
        self.image = pygame.image.load("player0.png")
        self.image = self.image.convert()
        tranColor = self.image.get_at((1, 1))
        self.image.set_colorkey(tranColor)
        self.rect = self.image.get_rect()
        self.charge = 50
        'Position the sprite'
        self.x = posx
        self.y = posy
        self.rect.center = (self.x, self.y)
        self.velocity = Vectors.Vector2D(2, 2)

        self.imgDown = []
        self.imgRight = []
        self.imgLeft = []
        self.imgUp = []

        self.frame = 0
        self.delay = 3
        self.pause = self.delay
        self.speed = 5
def update(self):
        keys = pygame.key.get_pressed()

        if keys[pygame.K_a]:
            self.rect.centerx -= self.velocity.mulscaler(self.speed).x
            self.loadPicsLeft()
            self.calcDelay()
            self.image = self.imgLeft[self.frame]

        if keys[pygame.K_d]:
            self.rect.centerx += self.velocity.mulscaler(self.speed).x
            self.loadPicsRight()
            self.calcDelay()
            self.image = self.imgRight[self.frame]

        if keys[pygame.K_w]:
            self.rect.centery -= self.velocity.mulscaler(self.speed).y
            self.loadPicsUp()
            self.calcDelay()
            self.image = self.imgUp[self.frame]

        if keys[pygame.K_s]:
            self.rect.centery += self.velocity.mulscaler(self.speed).y
            self.loadPics()
            self.calcDelay()
            self.image = self.imgDown[self.frame]

        if self.velocity.x > self.speed:
            self.velocity.x = self.speed
        if self.velocity.x < -self.speed:
            self.velocity.x = -self.speed

        if self.velocity.y > self.speed:
            self.velocity.y = self.speed
        if self.velocity.y < -self.speed:
            self.velocity.y = -self.speed

        if keys[pygame.K_SPACE]:
                self.shell.x = self.rect.centerx
                self.shell.y = self.rect.centery
                self.shell.speed = self.charge

    def calcDelay(self):
        self.pause -= 1
        if self.pause <= 0:
            self.pause = self.delay

            self.frame += 1
            if self.frame > 2:
                self.frame = 0

    def loadPics(self):
        for i in range (7):
            imgName = "player%d.png"% i
            tmpImg = pygame.image.load(imgName)
            tmpImg.convert()
            tranColor = tmpImg.get_at((0,0))
            tmpImg.set_colorkey(tranColor)
            self.imgDown.append(tmpImg)

    def loadPicsRight(self):
        for i in range (7):
            imgName = "playerRight%d.png"% i
            tmpImg = pygame.image.load(imgName)
            tmpImg.convert()
            tranColor = tmpImg.get_at((0,0))
            tmpImg.set_colorkey(tranColor)
            self.imgRight.append(tmpImg)

    def loadPicsLeft(self):
        for i in range (7):
            imgName = "playerLeft%d.png"% i
            tmpImg = pygame.image.load(imgName)
            tmpImg.convert()
            tranColor = tmpImg.get_at((0,0))
            tmpImg.set_colorkey(tranColor)
            self.imgLeft.append(tmpImg)

    def loadPicsUp(self):
        for i in range (7):
            imgName = "playerUp%d.png"% i
            tmpImg = pygame.image.load(imgName)
            tmpImg.convert()
            tranColor = tmpImg.get_at((0,0))
            tmpImg.set_colorkey(tranColor)
            self.imgUp.append(tmpImg)

class Shell(pygame.sprite.Sprite):
    def __init__(self, screen):
        pygame.sprite.Sprite.__init__(self)
        self.screen = screen
        self.image = pygame.Surface((50, 50))
        self.image.fill((0xff, 0xff, 0xff))
        self.image.set_colorkey((0xff, 0xff, 0xff))
        pygame.draw.circle(self.image, (0, 0, 0), (25, 25), 25)
        self.image = pygame.transform.scale(self.image, (10, 10))
        self.rect = self.image.get_rect()
        self.rect.center = (-100, -100)

        self.speed = 0
        self.dir =0
        self.reset()

    def update(self):
        self.checkBounds()
        self.rect.center = (self.x, self.y)

    def reset(self):
        """ move off stage and stop"""
        self.x = -100
        self.y = -100
        self.speed = 0 
```

这是我的玩家和我的 shell 类，目前我的所有 shell 都出现在我的玩家的位置，我正在寻找的是我的玩家在他向右看时向右侧发射子弹，向左看时向左射击等等。谁能给我任何关于我可以做些什么来实现这一目标的提示。我现在才开始在大学编码，所以我有点挣扎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:32:10.520

1 - 存储玩家的方向

2 - 使壳的速度像这样：

```
self.speedx = speed_length * cos(player.angle)
self.speedy = speed_length * sin(player.angle) 
```

笔记：

Speed_length 是壳在一帧中行进的总欧几里得距离。

角度**必须以弧度为单位，或者**如果您这样做，您可以使用度数：

```
self.speedx = speed_length * cos(radians(player.angle))
self.speedy = speed_length * sin(radians(player.angle)) 
```

# c - c - glibc / realloc / 无效指针

> ID：15731703
> 
> 赞同：3
> 
> 时间：2013-03-31T16:32:23.870
> 
> 标签：c, pointers, gcc, glibc, realloc

这是学校的项目。我编写了一个名为**file_to_array_d**的函数，它将所有字符放入一个数组中，因此可以轻松操作文件。

该程序根据从用户那里读取的内容对文件进行一些处理。目前只有“V”和“R”选项应该可以工作。'V' 打印出文件的内容。

在第一次运行主循环（main() 函数中的循环）时一切正常。但是在第二次运行时我得到 glibc 错误。

```
*** glibc detected *** ./a.out: realloc(): invalid pointer: 0x00007f01ad4397f8 ***
======= Backtrace: =========
/lib/x86_64-linux-gnu/libc.so.6(+0x7eb96)[0x7f01ad0ffb96]
/lib/x86_64-linux-gnu/libc.so.6(realloc+0x2de)[0x7f01ad10495e]
./a.out[0x400ec9]
./a.out[0x400d3d]
./a.out[0x4009b1]
./a.out[0x40090c]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7f01ad0a276d]
./a.out[0x400819]
======= Memory map: ========
00400000-00402000 r-xp 00000000 08:05 3543576                            /home/hork/Dropbox/FIIT/PPR/projekt/a.out
00601000-00602000 r--p 00001000 08:05 3543576                            /home/hork/Dropbox/FIIT/PPR/projekt/a.out
00602000-00603000 rw-p 00002000 08:05 3543576                            /home/hork/Dropbox/FIIT/PPR/projekt/a.out
01318000-01339000 rw-p 00000000 00:00 0                                  [heap]
7f01ace6b000-7f01ace80000 r-xp 00000000 08:05 4722212                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f01ace80000-7f01ad07f000 ---p 00015000 08:05 4722212                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f01ad07f000-7f01ad080000 r--p 00014000 08:05 4722212                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f01ad080000-7f01ad081000 rw-p 00015000 08:05 4722212                    /lib/x86_64-linux-gnu/libgcc_s.so.1
7f01ad081000-7f01ad236000 r-xp 00000000 08:05 4723475                    /lib/x86_64-linux-gnu/libc-2.15.so
7f01ad236000-7f01ad435000 ---p 001b5000 08:05 4723475                    /lib/x86_64-linux-gnu/libc-2.15.so
7f01ad435000-7f01ad439000 r--p 001b4000 08:05 4723475                    /lib/x86_64-linux-gnu/libc-2.15.so
7f01ad439000-7f01ad43b000 rw-p 001b8000 08:05 4723475                    /lib/x86_64-linux-gnu/libc-2.15.so
7f01ad43b000-7f01ad440000 rw-p 00000000 00:00 0 
7f01ad440000-7f01ad462000 r-xp 00000000 08:05 4723489                    /lib/x86_64-linux-gnu/ld-2.15.so
7f01ad63f000-7f01ad642000 rw-p 00000000 00:00 0 
7f01ad65c000-7f01ad662000 rw-p 00000000 00:00 0 
7f01ad662000-7f01ad663000 r--p 00022000 08:05 4723489                    /lib/x86_64-linux-gnu/ld-2.15.so
7f01ad663000-7f01ad665000 rw-p 00023000 08:05 4723489                    /lib/x86_64-linux-gnu/ld-2.15.so
7fffe5f17000-7fffe5f38000 rw-p 00000000 00:00 0                          [stack]
7fffe5fff000-7fffe6000000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted (core dumped) 
```

我使用的是 Ubuntu 12.04，代码是用 gcc 编译的

```
gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

这是完整的源代码，请注意有些注释是斯洛伐克语，但重要的是英文。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <execinfo.h> 

#define DEBUG
#define DETAILED_DEBUG

#define FILE_RELATIVE_PATH "ucet.txt"

void dump(char **p, int n);
char ** output_file();
char ** file_to_array_d(FILE * fd, long * rows);
void print_trace ();
void * xrealloc (void *ptr, size_t size);
void fatal(char *message);
void biggest_credit();

int main(int argc, char const *argv[])
{

    char argument;

    char ** p = NULL;
    double * suma = NULL; 

    int open = 0;
    while( (argument = getchar()) != 'K')
    {
        if (argument == 'V') // vypise na obrazovku obsah suboru
        {
            output_file();
            open = 1;
        }
        else if (argument == 'n') // aktualizuje polia
        {
            //number_of_records = parse_file(cena, pocet_dni);
        }
        else if (argument == 'l') // najlacnejsia cena
        {
            //calculate_lowest_price(cena, pocet_dni, number_of_records);
        }
        else if (argument == 'h') // histogram
        {
            //histogram(cena, pocet_dni, number_of_records);
        }
        else if (argument == 'R') // najvyssia cena za posledny rok
        {
            if (open)
                biggest_credit();
        }
    }

    return 0;
}

char ** output_file()
{
    FILE * f = fopen(FILE_RELATIVE_PATH, "r");
    if (f == 0)
    {
        printf("Neotvoreny subor\n");
        return 0;
    }

    long size = 0;

    char ** p = NULL;
    p = file_to_array_d(f, &size);

    //dump(p, size);

    printf("Size: %li\n", size );
    int i, r = 0;
    for (i = 0, r = 0; r < (int)size; i++, r++)
    {
        switch(i)
        {
            case 0:
                printf("transakcia: %s\n", p[r]);
                break;
            case 1:
                printf("kredit/debet: %s\n", p[r]);
                break;
            case 2:
                printf("cislo uctu kam/odkial idu peniaze: %s\n", p[r]);
                break;
            case 3:
                printf("suma: %s\n", p[r]);
                break;
            case 4:
                printf("datum: %s\n", p[r]);
                break;
            case 5:
                printf("\n");
                i = -1;
                break;
        }   
    }

    fclose(f);

    return p;
}

void biggest_credit()
{
    FILE * f = fopen(FILE_RELATIVE_PATH, "r");
    if (f == 0)
    {
        return;
    }

    long size = 0;

    char ** p = file_to_array_d(f, &size);

    double max = 0;
    int max_index;
    int i;

    // suma je 4\. riadok, takze index 3 je prva suma
    for (i = 3; i < size; i += 6)
    {
        if (  (double)atof(p[i]) > max && atoi(p[i-2]) == 1 )
        {
            max = (double)atof(p[i]);
            max_index = i;
        }
    }

    if (max)
    {
        printf("%s\n", p[max_index]);
    }
}

/*
 *  Parameters:
 *      FILE *  - pointer to the file handle
 *      long *  - pointer to adress, where the number of rows is written
 *
 *  Returs:
 *      char *  - pointer to the start of array containing file
 *
 *  Info:
 *      
 */
char ** file_to_array_d(FILE * fd, long * rows)
{

    char c;                 // current char being read from file
    int current_row = 0;    // starting from first row
    int current_pos = 0;

    // whole file will be stored in p[][]
    // allocate first row
    #ifdef DEBUG
                printf("calling (char**) malloc( %i );\n", 1 * (int)sizeof(char *) );
    #endif
    char **p = (char **) malloc(1 * sizeof(char *));

    // until EOF is reached
    for(current_pos = 0; ; current_pos++)   
    {

        if (EOF == fscanf(fd, "%c", &c))
        {
            if (p[current_row] == 0)
            {
                // un-allocate space
                p = (char**) xrealloc(p, ((current_row) * sizeof(char *)) );
            }

            break;
        }

        #ifdef DETAILED_DEBUG
            printf("row: %2i pos: %2i\n",current_row, current_pos );
            printf("  read char: '%c'\n\n", c);
        #endif

        // if char was read and it is not EOF
        // allocate new space for char
        #ifdef DEBUG
            printf("calling (char*) xrealloc(p[%i ], %i);\n",current_row, current_pos+1);
        #endif

        p[current_row] = (char*) xrealloc(p[current_row], current_pos+1);

        if (c != '\n')
        {
            // place read char there
            p[current_row][current_pos] = c;
        }
        else // if new line
        {

            // place end of string there
            p[current_row][current_pos] = '\0';

            #ifdef DATAILED_DEBUG
                printf("\tp[%i] = '%s' \n", current_row, p[current_row]);
            #endif

            // allocate and increment new row
            current_row++;

            #ifdef DEBUG
                printf("calling (char**) xrealloc(p, %i);\n", (current_row + 1) * (int)sizeof(char *) );
            #endif
            p = (char**) xrealloc(p, ((current_row + 1) * sizeof(char *)) );    

            // set to -1, it will be zero in the next run of loop
            current_pos = -1;   

            #ifdef DEBUG
                int i;
                for (i = 0; i < current_row; ++i)
                {
                    printf("p[%2i] is at: %p size: %4li contains: %s\n",i, &p[i], sizeof(*p[i]) ,p[i] );
                }
                printf("\n");
            #endif
        }
    }

    // if EOF is in the position: '\n EOF'
    // right way to end file
    if( p[current_row] == 0)
    {
        #ifdef DEBUG
            printf("%s\n", "Subor je spravne ukonceny n.1 :)");
        #endif
        *rows = current_row;
    }
    // if EOF is right behind line
    // wrong way to end file
    else 
    {
        #ifdef DEBUG
            printf("%s\n", "Subor je nespravne ukonceny !! (ale to nevadi)");
        #endif
        *rows = current_row+1;
    }

    #ifdef DEBUG
        printf("Number of lines: %i\n", current_row);
    #endif

    return p;
}

void * xrealloc (void *ptr, size_t size)
{
    register void *value = realloc (ptr, size);
    if (value == 0)
        fatal ("Virtual memory exhausted");
    return value;
}

void dump(char **p, int n)
{
    int i, s;
    printf("-- DUMP --\n");
    for(i = 0; i < n; i++)
    {
        for(s = 0; p[i][s] != '\0'; s++)
            printf("%c", p[i][s]);
        printf("\n");
    }
    printf("-- END OF DUMP --\n");
}

// A function to display an error message and then exit
void fatal(char *message) 
{
   char error_message[100];

   strcpy(error_message, "[!!] Fatal Error ");
   strncat(error_message, message, 83);
   perror(error_message);
   exit(-1);
} 
```

感谢您的支持，这让我发疯了好几个小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:43:00.383

[在Valgrind](http://valgrind.org)下运行你的程序；它会告诉你*到底*是什么问题。

# xcode - 选项卡式范围栏，如 Xcode 4

> ID：15731705
> 
> 赞同：1
> 
> 时间：2013-03-31T16:32:31.843
> 
> 标签：xcode, cocoa

是否有像 Xcode 4 这样的选项卡式范围栏的开源实现？我见过[MGScopeBar](http://mattgemmell.com/2008/10/28/mgscopebar/)，但它没有我正在寻找的图标选项卡外观。它使用嵌入式按钮，而 Xcode 的选项卡具有全高突出显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:52:56.063

你可能想看看

**[DMTabBar](http://www.cocoacontrols.com/controls/dmtabbar)**：
*DMTabBar 是一个简单的分段控件/条，它模仿 XCode 4 Inspector 分段控件。*

![在此处输入图像描述](https://i.stack.imgur.com/iCPaB.png)

[CocoaControls](http://www.cocoacontrols.com)还提供了大量其他优秀的开源 Cocoa 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:20:09.837

您还可以检查[DOTabbar](https://github.com/stel/DOTabbar "DOT标签栏")并创建您的自定义标签栏项目单元格。

# maven - 跨所有模块的 Maven 阴影重定位？

> ID：15731713
> 
> 赞同：4
> 
> 时间：2013-03-31T16:33:33.950
> 
> 标签：maven, bukkit

我有一个 Maven 多模块项目，它有一个父 pom 项目和一堆模块。其中一个模块是“主模块”，其中包含所有库。所有其他模块都依赖于该模块并使用提供的库。

主模块是一个 Bukkit 插件，它将其他模块作为扩展加载。这些扩展都使用自己的类加载器加载，但加载的类在加载器之间共享，以便能够相互依赖。它们还能够依赖其他 Bukkit 插件，因为它们的父类加载器是 Bukkit 的 PluginClassLoader，它还在插件之间共享加载的类以允许交互。

这就是问题开始的地方：不同的插件可能使用同一个库，但该库的类可能会被不同的类加载器加载，这会导致 LinkageErrors 和其他问题。

我解决这个问题的想法是通过 maven-shade-plugin 重新定位主模块中的库。对于仅由主模块使用的库，这可以按预期工作。但是，其他模块使用的重定位库会导致运行时 ClassNotFoundExceptions，因为模块仍然搜索正常的包名称而不是重定位的包名称。然后我尝试将导入更改为重新定位的包，但我的 IDE (IntelliJ) 找不到这些类。

有没有人知道如何解决这个搬迁问题？或者在类加载问题上可能有不同的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-04-01T20:05:54.993

5 年后在一个非常相似的情况下（Bukkit -> SpongeApi）我再次遇到了这个问题，但这次我找到了（可能只是令人满意的）解决方案：

1.  主模块将其阴影版本作为主要工件，因此依赖项只能看到重新定位的类并且不知道原始类名。这在我们的例子中没有任何区别，因为主模块无论如何都是提供的依赖项，但它也可以防止消费者意外地直接使用重定位的类。IntelliJ 不关心重定位，因此它不知道新的重定位类。将着色版本附加为辅助工件（shadedArtifactAttached 选项设置为 true）使依赖项再次对依赖项可见。

2.  依赖模块必须应用与主模块相同的重定位规则，因此插件将类名更正为运行时可用的类名。

这种方式 IntelliJ 不知道重定位，但它也不需要知道。如有必要，可以在父 pom 中配置重定位，以便在所有项目中保持一致的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T00:22:34.920

我遇到了几乎完全相同的问题（从这个问题的年龄来看）。尽管对于覆盖其他插件版本的库我没有更简洁的解决方案，但我确实有一个 IntelliJ 无法识别重定位类的解决方法。

为了阻止它抱怨，我将阴影 jar（带有重定位）作为 IntelliJ 库添加到目标模块。你可以这样做：

1.  去`File > Project Structure... > Modules > (target module) > Dependencies`
2.  使用 选择阴影罐`Add (green +) > 1\. Jars or directories...`。
3.  您现在应该在库列表中看到阴影 jar

![截图详细说明上面的解释](https://i.stack.imgur.com/olP72.png)

尽管乍一看似乎可行，但此~~解决方案~~的变通方法有一些注意事项：

*   通过 Maven 的模块依赖项，代码仍然可以看到未重定位的类，如果您碰巧使用它们，您只会在使用 Maven 编译时看到。（您可以删除模块依赖项，但每次重新导入 pom 时都会读取它）
*   如果您在 jar 文件名中包含版本号，则每次更改项目版本时都必须更新 jar 路径（解决方法：指定一个 static `project.build.finalName`）
*   添加新方法或更改签名时，需要重新编译库模块。（这可以通过为着色依赖创建一个单独的模块来解决 - 这实际上也可以解决文件名问题）

# c# - 如何获取数字的最后一位数字

> ID：15731716
> 
> 赞同：34
> 
> 时间：2013-03-31T16:33:51.237
> 
> 标签：c#

如何获取数字的最后一位？例如如果 1232123, 3 将是结果

我想要一些有效的逻辑，以便很容易得到大数字的结果。
在我得到最终数字后，我需要对其进行一些处理。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-31T16:35:25.883

Just take mod 10:

```
Int32 lastNumber = num % 10; 
```

One could use Math.Abs if one's going to deal with negative numbers. Like so:

```
Int32 lastNumber = Math.Abs(num) % 10; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-31T16:35:58.170

It's just the number modulo 10\. For example in C

```
int i = 1232123;
int lastdigit = (i % 10); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-31T16:45:37.643

这是为了显而易见而牺牲效率的蛮力方式：

```
int n = 1232123;
int last = Convert.ToInt32(n.ToString()
                            .AsEnumerable()
                            .Last()
                            .ToString()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-24T19:19:58.690

最好的是：

```
Math.Abs(num % 10); 
```

原因`num % 10`会给你负数的负结果

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-11T21:08:59.503

最好的方法是`int lastNumber = (your number) % 10;`
如果你想将最后一个数字作为字符串返回，你可以这样做

```
switch (number % 10)
{
    case 0:
        return "zero";
    case 1:
        return "one";
    case 2:
        return "two";
    case 3:
        return "three";
    case 4:
        return "four";
    case 5:
        return "five";
    case 6:
        return "six";
    case 7:
        return "seven";
    case 8:
        return "eight";
    case 9:
        return "nine";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-19T15:56:38.400

另一种方法是..

```
var digit = Convert.ToString(1234);
var lastDigit = digit.Substring(digit.Length - 1); 
```

# javascript - Inserted JavaScript by usercontrol invokes only on first page

> ID：15731719
> 
> 赞同：0
> 
> 时间：2013-03-31T16:34:05.597
> 
> 标签：javascript, asp.net, master-pages

I have used a user control to get data from database and render it as MegaMenu anchors. In code-behind file I have got data and rendered it by using a literal.

The megamenu.js file (containging myMega.Init method) has been inserted into header element

I have added following script tag into .ascx file.

```
<script type="text/javascript">
  myMega.Init("mer_id", "anchor_id", "click");
</script> 
```

I have several .aspx files which have same master page. The master page registers the User Control and contains following tag exact before .

```
 <uc:MegaMenu id="anchors" runat="server"></uc:MegaMenu> 
```

the problem is the myMega.Init only invokes when I go to firstpage.aspx. I have debugged by hitting f12 and choosing debugg Script. the init file invokes only first time (firstpage) not other pages. thank you for your help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:03:45.183

是 mer_id 和 anchor_id 元素的 id 以及 .Init 做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T16:34:24.987

如果您使用 jquery 库，您可以将您的代码置于就绪事件中

```
<script type="text/javascript">
$(function() {
  myMega.Init("mer_id", "anchor_id", "click");
});
</script> 
```

# f# - 构建在 JVM 上运行并生成 Java 字节码的 F# 编译器的最简单方法是什么？

> ID：15731724
> 
> 赞同：34
> 
> 时间：2013-03-31T16:34:21.553
> 
> 标签：f#, jvm, ocaml, yeti, funscript

当前的 F# 编译器是用 F# 编写的，是开源的，可以在 .Net 和 Mono 上运行，允许它在包括 Windows、Mac 和 Linux 在内的许多平台上执行。F# 的[代码引用](http://msdn.microsoft.com/en-us/library/dd233212.aspx)机制已用于在[WebSharper](http://www.websharper.com/)、[Pit](https://github.com/fsharp/pitfw)和[FunScript](https://github.com/ZachBray/FunScript)等项目中将 F# 编译为 JavaScript 。似乎也有人对在[JVM 上运行 F# 代码](http://cs.hubfs.net/topic/None/58250)感兴趣。

我相信[OCaml 编译器](https://stackoverflow.com/questions/4392556/in-which-language-is-fs-compiler-written)的一个版本最初用于[引导](http://en.wikipedia.org/wiki/Bootstrapping_(compilers))F# 编译器。

如果有人想构建一个在 JVM 上运行的 F# 编译器，这样做会更容易：

1.  修改现有的 F# 编译器以发出[Java 字节码](http://en.wikipedia.org/wiki/Java_bytecode)，然后用它编译 F# 编译器？
2.  使用基于 JVM 的 ML 编译器（例如[Yeti](http://mth.github.com/yeti/)）在 JVM 上引导最小的 F# 编译器？
3.  [fjord](https://github.com/penberg/fjord)项目似乎正在尝试用 Java 从头开始​​重新编写 F# 编译器？
4.  还有什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-31T17:09:26.083

可能应该考虑的另一个选项是将 .NET CLR 字节码转换为 JVM 字节码，就像[http://www.ikvm.net](http://www.ikvm.net)对 JVM > CLR 字节码所做的那样。虽然这种做法已经被[峡湾所有者考虑过并拒绝了](https://github.com/penberg/fjord/blob/master/FAQ.md#have-you-considered-cross-compiling-net-bytecode-to-the-jvm)。

使用选项 1) 从顶部获得支持，并让 F# 编译器团队拥有可插入的后端，理论上可以发出 Java 字节码声音，就像它会产生最完美的解决方案一样。

但是，如果您查看已移植到不同平台的其他语言，情况很少见。大多数时候，它是从头开始重写的。但这也可能是由于原始语言团队本身对支持替代平台不感兴趣，并且原始主机实现可能无法支持多个后端，而且这已经太慢了，无法成为一个可行的选择.

我的预感是从头开始重写以及能够从原始实现中进行尽可能多的代码共享和自动化。例如，如果测试套件可以重复用于两种实现，它将减轻 JVM 端口的负担，并在确保语言奇偶性方面大有帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-01T21:53:44.900

如果我真的必须这样做，我可能会从 #1 方法开始 - 将 JVM 后端添加到现有编译器。但我也会尝试为不同的目标虚拟机争论。

引用不是很相关——作为 WebSharper 的作者，我可以向您保证，虽然引用可以为您提供一种很好的类似 F# 的语言来编程，但它们是限制性的，并且没有优化。我想对于潜在的 JVM F# 用户来说，标准会高很多——完全的语言兼容性和可比的性能。这很难。

以尾声为例。在 WebSharper 中，我们应用启发式方法来优化 JavaScript 中对循环的一些本地尾调用，但这还不够——通常不能像在一般 F# 库中那样依赖 TCO。这对 WebSharper 来说是可以的，因为我们的用户不希望拥有完整的 F#，但对于 JVM F# 端口就不行了。我相信大多数 JVM 实现都没有 TCO，因此必须以某种间接方式实现它，从而导致性能下降。

@mythz 提到的字节码重新编译方法听起来很有吸引力，因为它不仅仅允许移植 F#——理想情况下，它允许将更多的 .NET 软件移植到 JVM。我在内部 WebSharper 3.0 项目中使用 .NET 字节码分析进行了大量工作——我们正在研究将 .NET 字节码而不是 F# 引用编译为 JavaScript 的选项。但那里存在巨大的挑战：

1.  BCL 中的许多代码是不透明的（本机） - 您无法对其进行反编译

2.  泛型模型相当复杂。我已经实现了一个 JavaScript 运行时，它以一定的精度和合理的性能对类和方法的泛型、实例化、类型生成和基本反射进行建模。这在带有闭包的动态 JavaScript 中已经够难了，而且在 JVM 上似乎很难以高性能的方式完成——但也许我只是没有看到一个简单的解决方案。

3.  值类型在字节码中产生了显着的复杂性。我还没有为 WebSharper 3.0 解决这个问题。它们也不能被忽略，因为它们被许多您希望移植的库广泛使用。

4.  类似地，基本反射在许多现实世界的 .NET 库中使用——就大量本机代码和对泛型和值类型的适当支持而言，交叉编译是一场噩梦。

此外，字节码方法并没有消除关于如何实现尾调用的问题。AFAIK，Scala 没有实现尾调用。他们当然有这样做的才能和资金——他们没有的事实告诉我很多关于在 JVM 上进行 TCO 的实用性。对于我们的 .NET->JavaScript 端口，我可能会走类似的路线 - 没有 TCO 保证，除非您特别要求蹦床，这将工作但会花费您一个数量级（或两个）的性能。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-31T17:22:06.017

有一个项目将 OCaml 编译到 JVM，[OCaml-Java](http://ocamljava.x9c.fr/)：它非常完整，特别是可以编译 OCaml 的编译器（用 OCaml 编写）源。我不确定您对 F# 语言的哪些方面感兴趣，但如果您主要希望为 JVM 提供成熟的严格类型函数式语言，那可能是一个不错的选择。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-31T16:52:03.030

我怀疑任何方法都会做很多工作，但我认为您的第一个建议是唯一可以避免引入大量额外不兼容性和错误的建议。编译器非常复杂，并且有很多关于重载解析等的极端情况（并且规范可能也有差距），因此新实现似乎不太可能具有一致兼容的语义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T14:11:24.027

> 修改现有的 F# 编译器以发出 Java 字节码，然后用它编译 F# 编译器？使用基于 JVM 的 ML 编译器（例如 Yeti）在 JVM 上引导最小的 F# 编译器？

如果编译器是用 F# 编写的，那么移植编译器应该不会那么难。

我可能会选择第一种方式，因为这是唯一能让新编译器与 .net F# 编译器保持同步的方法。

> fjord 项目似乎正在尝试用 Java 从头开始​​重新编写 F# 编译器？

这当然是最不优雅的方法，恕我直言。

> 还有什么？

编译器完成后，您将剩下 90% 的工作要做。

例如，不太了解 F#，但我认为使用任何 .NET 库都很容易。这意味着，基本问题是以某种方式移植 .NET 生态系统。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-01T14:23:35.760

我一直在寻找类似的东西，尽管它更像是 F# 到 Akka 的翻译器/编译器。就 F# -> JVM 而言，我遇到了两个不太适合生产的选项：

```
 1\. F# -> [Fjord][1] -> JVM.

  2\. F# -> [Funscript][2] -> [Vert.X][3] -> JVM 
```

# java - Change date displayed in button to DDth MMMM YY but keep values as DD/MM

> ID：15731732
> 
> 赞同：-1
> 
> 时间：2013-03-31T16:34:46.730
> 
> 标签：java, android, android-datepicker

I am using a DatePicker so that the user can select a date and find out the sunrise and sunset times for that particular date. The webservice I am using requires the date to be snet in the following format `dd/MM` but I would like the button to show the date in the format `DDth MMMM YYYY e.g 21st March 2013`

Any advice on how I should I go about doing this?

Code below as requested:

```
 public class SunriseSunset extends Activity implements OnClickListener {

    public Button getLocation;
    public Button setLocationJapan;
    public TextView LongCoord;
    public TextView LatCoord;
    public double longitude;
    public double latitude;
    public LocationManager lm;
    public Spinner Locationspinner;
    public DateDialogFragment frag;
    public Button date;
    public Calendar now;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sunrisesunset);

        //Date stuff
        now = Calendar.getInstance();
        date = (Button)findViewById(R.id.date_button);
        date.setText(String.valueOf(now.get(Calendar.DAY_OF_MONTH)+1)+"-"+String.valueOf(now.get(Calendar.MONTH))+"-"+String.valueOf(now.get(Calendar.YEAR)));
        date.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                showDialog();
            }
        });

    }
    // More date stuff
    public void showDialog() {
        FragmentTransaction ft = getFragmentManager().beginTransaction(); //get the fragment
        frag = DateDialogFragment.newInstance(this, new DateDialogFragmentListener(){
            public void updateChangedDate(int year, int month, int day){
                date.setText(String.valueOf(day)+"-"+String.valueOf(month+1)+"-"+String.valueOf(year));
                now.set(year, month, day);
            }
        }, now);

        frag.show(ft, "DateDialogFragment");

    }

    public interface DateDialogFragmentListener{
        //this interface is a listener between the Date Dialog fragment and the activity to update the buttons date
        public void updateChangedDate(int year, int month, int day);
    }

    public void addListenerOnSpinnerItemSelection() {
        Locationspinner = (Spinner) findViewById(R.id.Locationspinner);
        Locationspinner
                .setOnItemSelectedListener(new CustomOnItemSelectedListener(
                        this));
    }

    private class LongRunningGetIO extends AsyncTask<Void, Void, String> {

        protected String getASCIIContentFromEntity(HttpEntity entity)
                throws IllegalStateException, IOException {
            InputStream in = entity.getContent();
            StringBuffer out = new StringBuffer();
            int n = 1;
            while (n > 0) {
                byte[] b = new byte[4096];
                n = in.read(b);
                if (n > 0)
                    out.append(new String(b, 0, n));
            }
            return out.toString();
        }

        @Override
        protected String doInBackground(Void... params) {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();

            // Finds todays date and adds that into the URL
            SimpleDateFormat df = new SimpleDateFormat("dd/MM");
            String formattedDate = df.format(now.getTime());

            String finalURL = "http://www.earthtools.org/sun/"
                    + LatCoord.getText().toString().trim() + "/"
                    + LongCoord.getText().toString().trim() + "/"
                    + formattedDate + "/99/0";
            HttpGet httpGet = new HttpGet(finalURL);
            String text = null;

            try {
                HttpResponse response = httpClient.execute(httpGet,
                        localContext);
                HttpEntity entity = response.getEntity();
                text = getASCIIContentFromEntity(entity);
            } catch (Exception e) {
                return e.getLocalizedMessage();
            }
            return text;
        }

        protected void onPostExecute(String results) {
            if (results != null) {
                try {

                    DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                            .newInstance();
                    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
                    InputSource s = new InputSource(new StringReader(results));
                    Document doc = dBuilder.parse(s);
                    doc.getDocumentElement().normalize();
                    TextView tvSunrise = (TextView) findViewById(R.id.Sunrise);
                    TextView tvSunset = (TextView) findViewById(R.id.Sunset);
                    tvSunrise.setText(doc.getElementsByTagName("sunrise").item(0).getTextContent());
                    tvSunset.setText(doc.getElementsByTagName("sunset").item(0).getTextContent());
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            Button b = (Button) findViewById(R.id.CalculateSunriseSunset);
            b.setClickable(true);
        }
    }

    class MyLocationListener implements LocationListener {
        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub
        }
    }

} 
```

DateDialogFragment:

```
import java.util.Calendar;

import richgrundy.learnphotography.SunriseSunset.DateDialogFragmentListener;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.app.DialogFragment;
import android.content.Context;
import android.os.Bundle;
import android.widget.DatePicker;

public class DateDialogFragment extends DialogFragment {

    public static String TAG = "DateDialogFragment";
    static Context mContext; //I guess hold the context that called it. Needed when making a DatePickerDialog. I guess its needed when conncting the fragment with the context
    static int mYear;
    static int mMonth;
    static int mDay;
    static DateDialogFragmentListener mListener;

    public static DateDialogFragment newInstance(Context context, DateDialogFragmentListener listener, Calendar now) {
        DateDialogFragment dialog = new DateDialogFragment();
        mContext = context;
        mListener = listener;
        mYear = now.get(Calendar.YEAR);
        mMonth = now.get(Calendar.MONTH);
        mDay = now.get(Calendar.DAY_OF_MONTH);  
        return dialog;
    }

    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new DatePickerDialog(mContext, mDateSetListener, mYear, mMonth, mDay);
    }

    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;

            mListener.updateChangedDate(year, monthOfYear, dayOfMonth);
        }
    };

} 
```

Your help would be greatly appreciated.

Please ask questions for clarification if need =)

----------------UPDATE-------------------------

I'm getting there, updated code now looks like this:

```
public void showDialog() {  
 FragmentTransaction ft = getFragmentManager().beginTransaction(); //get the fragment   
 frag = DateDialogFragment.newInstance(this, new DateDialogFragmentListener(){      

 public void updateChangedDate(int year, int month, int day){           
 DateFormat format = new SimpleDateFormat("DD MM yyyy"); // could be created elsewhere          
 now.set(year, month, day);
 date.setText(format.format(now.getTime()));             
 date.setText(String.valueOf(day)+"-"+String.valueOf(month+1)+"-"+String.valueOf(year));            
 now.set(year, month, day);         
 }  
      }, now);

    frag.show(ft, "DateDialogFragment");     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:46:57.150

只需使用另一个`SimpleDateFormat`来格式化它。

```
public void updateChangedDate(int year, int month, int day) {
    DateFormat format = new SimpleDateFormat("DD MM YYYY"); // could be created elsewhere
    now.set(year, month, day);
    date.setText(format.format(now.getTime());
} 
```

不幸的是，Java 没有提供任何东西来自动获取序数日期的正确后缀（2nd、13*th*、21st 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T08:30:22.390

```
public void showDialog()
{  
   FragmentTransaction ft = getFragmentManager().beginTransaction(); //get the fragment   
   frag = DateDialogFragment.newInstance(this, new DateDialogFragmentListener()
   {     
       public void updateChangedDate(int year, int month, int day)
       {           
           String dateFormate = "dd'" + getDayOfMonthSuffix(day) +"' MM yyyy";
           DateFormat format = new SimpleDateFormat(dateFormate); // could be created elsewhere          
           now.set(year, month, day);
           date.setText(format.format(now.getTime()));                        
           now.set(year, month, day);         
       }  
   }, now);

   frag.show(ft, "DateDialogFragment");  
}

String getDayOfMonthSuffix(final int n) {
    checkArgument(n >= 1 && n <= 31), "illegal day of month: " + n);
    if (n >= 11 && n <= 13) {
        return "th";
    }
    switch (n % 10) {
        case 1:  return "st";
        case 2:  return "nd";
        case 3:  return "rd";
        default: return "th";
    }
} 
```

I copy above getDayOfMonthSuffix function from the below link

[getDayOfMonthSuffix](https://stackoverflow.com/questions/4011075/how-do-you-format-the-day-of-the-month-to-say-11th-21st-or-23rd-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T18:36:12.627

```
public void showDialog() {  
FragmentTransaction ft = getFragmentManager().beginTransaction(); //get the fragment   
frag = DateDialogFragment.newInstance(this, new DateDialogFragmentListener(){      

public void updateChangedDate(int year, int month, int day){                     
now.set(year, month, day);
date.setText(DateFormat.format("dd MMMM yyyy", now));             

}  
  }, now);

frag.show(ft, "DateDialogFragment");     } 
```

改变

```
date.setText(String.valueOf(now.get(Calendar.DAY_OF_MONTH)+1)+"-"+String.valueOf(now.get(Calendar.MONTH))+"-"+String.valueOf(now.get(Calendar.YEAR))); 
```

至

```
date.setText(DateFormat.format("dd MMMM yyyy", Calendar.getInstance())); 
```

# jquery - jQueryUI 小部件覆盖自定义 CSS

> ID：15731735
> 
> 赞同：3
> 
> 时间：2013-03-31T16:35:07.937
> 
> 标签：jquery, html, css, jquery-ui, jquery-ui-dialog

我正在尝试使 jQueryUI 提供的小部件覆盖（[“对话框”](http://jqueryui.com/dialog/)）变暗，但没有成功。我已将 jQuery 使用的 CSS 缩小到 class `ui.widget-overlay`，但似乎无法在我自己的样式表中覆盖 jQuery CSS。

我已经尝试过`$( '.ui-widget-overlay' ).addClass( 'override' )`，但没有加载我自己的样式（我已经使用 Chrome 的开发人员工具确认了这一点）。同样，`$( '.ui-widget-overlay' ).removeClass( 'ui-widget-overlay' )addClass( 'override' )`没有效果。

我也尝试`!important`在我的样式表中使用标记，再次无济于事。

我的小提琴在[这里](http://jsfiddle.net/CXhVs/)。jQueryUI 标准 CSS 内容如下：

`.ui-widget-overlay { background: #aaaaaa url(images/ui-bg_flat_0_aaaaaa_40x100.png) 50% 50% repeat-x; opacity: .3;filter:Alpha(Opacity=30); }`

我想用这个替换它：

`.ui-widget-overlay { background: #222222 50% 50% repeat-x; opacity: .3;filter:Alpha(Opacity=30); }`

**HTML**

```
<a href="#" id="advisers-image">
    <div class="circle hovershadow advisers advisers-box-shadow text">Professional
        advisers</div>
</a>

<a href="#" id="industry-image">
    <div class="circle hovershadow industry industry-box-shadow">Industry</div>
</a>

<div style="clear: both;"></div>

<div id="advisers-dialog" class="dialog">

    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Law firms</a></li>
            <li><a href="#tabs-2">Accounting and audit firms</a></li>
            <li><a href="#tabs-3">Management consultants and economists</a></li>
        </ul>
        <div id="tabs-1">
            <p>Law firm text here.</p>
            <div id="tabs-inner-link"><p>Click <a href="#">here</a> to see how we can give you the edge.</p></div>
        </div>
        <div id="tabs-2">
            <p>Accounting and audit firm text goes here.</p>
        </div>
        <div id="tabs-3">
            <p>Management consultants and economists text goes here.</p>
        </div>
    </div>
</div>

<div id="industry-dialog" class="dialog" title="Industry">Industry
    text goes here</div> 
```

**Javascript**

```
$( "#tabs" ).tabs();

var commonDialogOptions={
autoOpen: false,
height: "auto",
modal:true,
width:700
};

$("#industry-dialog, #advisers-dialog").dialog(commonDialogOptions);

$( "#industry-image" ).click(function() {
$( '.ui-widget-header' ).addClass( 'override' );
$( '.ui-widget-header a' ).addClass( 'override' );
$( '.ui-widget-overlay' ).addClass( 'override' );
$( "#industry-dialog" ).dialog( "open" );
});     

$( "#advisers-image" ).click(function() {
$( '.ui-widget-header' ).addClass( 'override' );
$( '.ui-widget-header a' ).addClass( 'override' );
$( '.ui-widget-overlay' ).addClass( 'override' );
$( "#advisers-dialog" ).dialog( "open" );
$( "#tabs" ).tabs( "option", "heightStyle", "content" );
$( "#tabs" ).tabs( 'select', 0 );
}); 
```

CSS

```
.circle {
width: 220px;
height: 220px;
border-radius: 50%;
border: 2px solid #fff;
float: left;
display: inline-block;

/* text styling for circles - see also the .text style below */
font-size: 35px;
color: #FFF;
line-height: 220px;
text-align: center;
font-family: Ubuntu, sans-serif;
}

.dialog {
font-family: 'Istok Web', sans-serif;
font-size: 14px;
line-height: 1.8em;
}

#tabs {
font-family: 'Istok Web', sans-serif;
font-size: 14px;
line-height: 1.8em; 
}

#tabs a:link { font-weight: bold; text-decoration: none; color: #5E2750; }
#tabs a:visited { font-weight: bold; text-decoration: none; color: #5E2750; }
#tabs-inner-link a:hover { text-decoration:underline; }

.advisers {
background: #5E2750;
margin-left: 28%;
margin-right: 13%;
}

.advisers-box-shadow {
box-shadow: 0px 0px 1px 1px #5E2750
}

.industry {
background: #DD4814;
}

.industry-box-shadow {
box-shadow: 0px 0px 1px 1px #DD4814
}

.hovershadow:hover { box-shadow: 0px 0px 4px 4px #AEA79F }

.text { /* used by professional advisers circle */
line-height: 40px;
padding-top: 70px;
height: 150px
}

/* Styles below are overriden styles found in jquery-ui.css */
.ui-widget-header.override { border: 1px solid #ffffff; background: #ffffff; color: #DD4814; font-weight: bold; }
.ui-widget-header.override a { color: #DD4814; }
.ui-widget-overlay.override { background: repeat-x scroll 50% 50% #222222; opacity:0.3; filter:Alpha(Opacity=15); } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T17:24:56.837

将您添加`.addClass('override')`到`open`事件中的对话框选项中：

```
var commonDialogOptions = {
    autoOpen: false,
    height: "auto",
    modal: true,
    width: 700,
    open: function (event, ui) {
        $('.ui-widget-header').addClass('override');
        $('.ui-widget-header a').addClass('override');
        $('.ui-widget-overlay').addClass('override');
    }
}; 
```

小提琴：http: [//jsfiddle.net/CXhVs/2/](http://jsfiddle.net/CXhVs/2/)

[jquery UI 打开事件文档](http://api.jqueryui.com/dialog/#event-open)

# arrays - How to call all members of a picture box array?

> ID：15731740
> 
> 赞同：1
> 
> 时间：2013-03-31T16:35:41.970
> 
> 标签：arrays, vb.net, picturebox

I'm making space invaders, and I'm using arrays for the first time, I have yet to learn them in class so I'm kind of free-balling it.

```
 Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs)                 Handles FireTimer.Tick
    Fire.Top = Fire.Top - 7
    For index = 0 To 26
         If Me.Fire.Bounds.IntersectsWith(pbxMyEnemies(index).Bounds) Then
            pbxMyEnemies(index).Visible = False
            pbxMyEnemies(index).Enabled = False
            pbxMyEnemies(index).Left = 732
            pbxMyEnemies(index).Top = 55
            FireTimer.Enabled = False
            Fire.Visible = False
            z = 0
        ElseIf Me.Fire.Bounds.IntersectsWith(stopper.Bounds) Then
            z = 0
        End If

    Next
    If pbxMyEnemies().Visible = False Then
        MessageBox.Show("gotem")
    End If

End Sub 
```

Where 'If pbxMyEnemies().visible = false then Messagebox.Show("gottem") end if

is where I want it to check if all of the picture boxes in the array are visible false. Can I do that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:19:41.297

更改您的代码如下

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles FireTimer.Tick
  Dim Test As Boolean = True
  Fire.Top = Fire.Top - 7
  For index = 0 To 26
    If Me.Fire.Bounds.IntersectsWith(pbxMyEnemies(index).Bounds) Then
      pbxMyEnemies(index).Visible = False
      pbxMyEnemies(index).Enabled = False
      pbxMyEnemies(index).Left = 732
      pbxMyEnemies(index).Top = 55
      FireTimer.Enabled = False
      Fire.Visible = False
      z = 0
    ElseIf Me.Fire.Bounds.IntersectsWith(stopper.Bounds) Then
      z = 0
      Test = False
    End If
  Next
  If Test Then
    MessageBox.Show("gotem")
  End If
End Sub 
```

# r - 使用带有“多个 x 条目”的 lines()

> ID：15731745
> 
> 赞同：0
> 
> 时间：2013-03-31T16:35:58.577
> 
> 标签：r, plot, regression

我正在寻找一种在数据集上绘制非线性回归线的方法，其中我的向量 y 中的每个值都被存储多次，所以我尝试使用类似的东西：

```
x <- c(1,2,3,4,5,6,7,8,9,10)
y <- c(1,4,9,15,25,9,36,25,36,25)
reg4 <- lm( x ~ y + I(y^2) )
plot(x ~ y)
lines(y, predict(reg4), type="l", col="red", lwd=1) 
```

这给了[http://i.imgur.com/qSEVNdT.png](https://i.imgur.com/qSEVNdT.png) ![在此处输入图像描述](https://i.stack.imgur.com/Pi3VV.png)

所以我的问题是，有没有办法，比如说，为每个 y 条目使用某种平均值？或者只是让它成为一条“连续”线，而不是在有多个“条目”的点处分支成多条线/返回较低的 y 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:01:25.710

在这些情况下，最好`predict`从协变量范围内的模型中提取。您对 50 或 100 个等距分布在`x`. 根据需要增加或减少要预测的位置数量 - 更复杂的响应将需要更多位置等。这样做也解决了意大利面条情节问题，因为`newdata`提供的顺序为`x`

```
x <- c(1,2,3,4,5,6,7,8,9,10)
y <- c(1,4,9,15,25,9,36,25,36,25)
reg4 <- lm( x ~ y + I(y^2) )
## predictions
pred <- data.frame(y = seq(min(y), max(y), length = 100))
pred <- transform(pred, x = predict(reg4, newdata = pred))
## plot
plot(x ~ y)
lines(x ~ y, data = pred, type = "l", col = "red", lwd = 1) 
```

![在此处输入图像描述](https://i.stack.imgur.com/rajRf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:51:51.823

问题不在于数据中的联系：对于给定的 值`y`，只有一个预测。问题是这些点没有排序，所以当你加入它们时，你最终会得到一堆线。您可以使用`order`重新排序点。

```
plot(
  x ~ y, 
  xlab = "y", ylab = "x"  # Confusing...
)
i <- order(y)
lines( y[i], predict(reg4)[i] ) 
```

# java - IO cannot resolve

> ID：15731752
> 
> 赞同：0
> 
> 时间：2013-03-31T16:36:44.237
> 
> 标签：java, io

Hello guys im having problem with importing `java.io.*;` When i do this i cannot resolved `PrintStream`. I tried to import only `PrintStream` and the problem was the same. I readed articles here and at other places about changing my libraries, cleaning project, refreshing it but the problem is still there? Can someone help me?

```
import java.io.*;
import java.util.ArrayList;

public class Group {

    private String name;
    private ArrayList<Student> students;

    public Group(String name){
        this.name = name;
        this.students = ArrayList<Student>();
        }

    public String getName() {
        return this.name;

    }

    public ArrayList<Student> getStudents() {

        return this.students;

    }

    public void addStudent(Student student) {
        students.add(student);

    }

    public void printStudents(PrintStream output) {
        output.printf("Group name: %s%n", this.name);
        output.printf("Students in group:%n");
        for (Student student : this.students) {
            output.printf("  Name: %s%n", student.getName());

        }

    }

} 
```

And in the end i still cannot resolve PrintStream to a type

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:40:16.277

```
import java.io.PrintStream; 
```

应该管用。

或者，如果您在同一个包中有另一个名为 PrintStream 的类：

```
public void printStudents( java.io.PrintStream output ) {
   ...
} 
```

Eclipse 中的 Ctrl-Shift-O。

Javadoc：[java.io.PrintStream](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html)

# php - Facebook/Twitter/Google+ custom Dialog and buttons with counters?

> ID：15731755
> 
> 赞同：2
> 
> 时间：2013-03-31T16:37:03.457
> 
> 标签：php, javascript, facebook, twitter, google-plus

**Full Site Live View:** [https://tornhq.com/WorkingOn/InteractiveMap/Replaced-With-Divs.html#](https://tornhq.com/WorkingOn/InteractiveMap/Replaced-With-Divs.html#) **JSFiddle Snippet View:** [http://jsfiddle.net/JWXrk/](http://jsfiddle.net/JWXrk/)

I would like to set up a custom share feature on my page. Once someone has shared the page, it will add to the counter in the white space of each image.

![enter image description here](https://i.stack.imgur.com/xcx9B.png)

The above is a random image from Google to show an example. I would like to be able to customize the share description and the image, however I am not sure if I am able to set this up without a Facebook API key?

They are simply links with styles at this moment in time;

```
<div class="ImgWrap">
    <a class="MedBtn" href="#" id="Facebook-Australia" original-title="Click to share on Facebook"></a>
    <a class="MedBtn" href="#" id="Twitter-Australia" original-title="Click to share on Twitter"></a>
    <a class="MedBtn" href="#" id="GooglePluss-Australia" original-title="Click to share on Google+"></a>
</div> 
```

The reason why I have only spoken mainly about Facebook is due to being more familiar with Facebook, although I would like to do the similar with the Tweet and Google+.

Thank you for any time spent in following up my question and for any help and/or advice.

Best Regards,

Tim

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:49:46.220

有很多 jquery 插件已经完成了你需要的功能......

[http://sharrre.com/](http://sharrre.com/)例如，它看起来像这样：

[http://sharrre.com/example1.html](http://sharrre.com/example1.html)

您可以修改 CSS 以获得您想要的最终结果。希望这在某种程度上有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T18:42:17.183

这是一个小例子：

```
FB.ui({
    method: 'feed',
    name: '<TITLE>',
    link: '<YOUR_LINK>',
    picture: '<IMG_URL>',
    caption: '<CAPTION>',
    description: '<DESCRIPTION>',
    message: '<MESSAGES>'
    },
    function(response) {
        if (response && response.post_id) {
            $.ajax({ 
                type: 'POST',
                url: '<FILE.PHP>'
                data: {
                    // PAGE_DATA - The page id, or something which links the actual page and his share's count
                    postData: <PAGE_DATA>
                },
                dataType: 'json',
                success: function (response) {
                    if (response.error)
                        return false;
                    // As I said, you must adapt your HTML / CSS
                    var actualCount = $('.MedBtn.count[data-type="fb-share"]');
                    actualCount.text(parseInt(actualCount.text() + 1));
                };
            });
        }
    }
); 
```

您可以在此处查看结果（示例）：http: [//jsfiddle.net/AeqQj/](http://jsfiddle.net/AeqQj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:54:14.623

您必须调整您的 HTML / CSS 以允许计数显示在白框中，无论如何，您可以在回调后增加它。

```
if (response && response.post_id) {
  // Add +1 to the actual count / update the count in DB.
} 
```

# c# - Skinning Form in WinForms

> ID：15731764
> 
> 赞同：1
> 
> 时间：2013-03-31T16:38:13.447
> 
> 标签：c#, .net, winforms

I have a WinForms application with registration Form.. I created a skin for that form and added panels with Labels and TextBoxes.

But when the form is loading it first doesn't look good and twitching.. and after some second it looks as it suppose to be ... I try to set the form property

> DoubleBuffered = true; but it doesn't help..

I set the form backgroundImage to the image I want and in the form c'tor I have this code lines to set the form shape as the image:

> ```
>  this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
>         this.TransparencyKey = Color.FromArgb(0, 255, 0); 
> ```

this is what i see when the form is first loading ![when to form is loading](https://i.stack.imgur.com/PDJ7I.jpg)

now this is what I want to see when the form is first loading: ![enter image description here](https://i.stack.imgur.com/CqEY2.jpg)

# html - external file content </h1> <div id="body"><p>Is it possible in HTML/Javascript (NO PHP) to put for example the content of the file <code>file.txt</code> in a <code><textarea></code> and how ?<

> ID：15731765
> 
> 赞同：2
> 
> 时间：2013-03-31T16:38:13.963
> 
> 标签：html, file, textarea, external

# c# - 使用 smtpclient.send 发送多封电子邮件 - 不起作用

> ID：15731767
> 
> 赞同：0
> 
> 时间：2013-03-31T16:38:20.243
> 
> 标签：c#, asp.net-mvc, smtp, smtpclient

下面的代码在本地机器上使用时有效，但在服务器（HostGator）上发布多封电子邮件时失败。如果我尝试只向一个人发送电子邮件，它也可以工作。

```
 public void SendMailToMultiples(MailAddress fromAddress, string fromPassword, MailAddressCollection toAddress, string subject, string body)
       {
        MailMessage message = new MailMessage(){
            Subject = subject,
            IsBodyHtml = true,
            Body = body,
            From = fromAddress
        };

        foreach(var email in toAddress)
        {
            message.To.Add(email.Address);
        }

        var smtp = new SmtpClient
        {
            Host = HOST_NAME,
            Port = PORT_NUMBER,
            DeliveryMethod = SmtpDeliveryMethod.Network,
            UseDefaultCredentials = false,
            Credentials = new NetworkCredential(fromAddress.Address, fromPassword)
        };

        {
            smtp.Send(message);
        }
    } 
```

# c++ - 试图通过指针访问嵌套类的成员函数

> ID：15731769
> 
> 赞同：0
> 
> 时间：2013-03-31T16:38:36.837
> 
> 标签：c++, class, pointers, tree, member

我对 C++ 很陌生，认为这个问题从根本上与指针有关；进行了研究，但找不到与以下上下文相关的任何明显内容。

我已经概述了我的代码结构，以突出我遇到的问题，即试图通过指向常量的指针访问嵌套`Node`类成员函数；我可以制作类的成员函数，但觉得成为嵌套类的成员函数更合乎逻辑。`isLeftChild``root``Node``isLeftChild``Tree``isLeftChild``Node`

```
class Tree {

    class Node {
        public:
            bool isLeftChild(void);
    };

    Node const* root;
    public:
        void traverse(Node const* root);
};

void Tree::traverse(Node const* root) {
    // *** Line below gives compile error: request for member 'isLeftChild' in 
    //     'root', which is of non-class type 'const Tree::Node*'
    if ( root.isLeftChild() ) {
        cout << "[is left child]";
    }
}

bool Tree::Node::isLeftChild(void){
    bool hasParent = this->parent != NULL;

    if ( hasParent ) {
        return this == this->parent->left;
    } else {
        return false;
    }
} 
```

我将如何从成员函数中访问此成员`traverse`函数？问题是否围绕`root`指针这一事实展开？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:41:44.977

诚此：

```
root.isLeftChild() 
```

对此：

```
root->isLeftChild() 
```

操作员`.`将作用于一个*对象*。

运算符`->`将作用于*指向对象*的指针。喜欢`root`。

这就是错误告诉您这`root`是非类类型的原因。它是一种指针类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:13:03.460

由于您有一个指向 const 参数的指针，因此您只能在其上调用 const 方法。

尝试

```
 bool isLeftChild() const; 
```

并将“const”添加到实现中。

# grails - Grails 过滤器或 acl

> ID：15731774
> 
> 赞同：1
> 
> 时间：2013-03-31T16:39:01.167
> 
> 标签：grails, spring-security

我计划在一个用 Groovy/Grails 编写的网站上创建一个客户私人区域，每个客户都可以在其中登录并查看自己的数据、编辑它等等。

回顾 Grails 提供的可用机制，我发现其中两个似乎很合适：1）**过滤器**2）**spring-security-acl**

我已经完成了 acl 教程，我发现 acl 插件非常精细。我不确定我是否真的需要能够授予权利的高度。最后，我所需要的只是限制每个用户只能查看/编辑他自己的数据，这些数据分布在大约 20 个表中（全部标准化，其中一些带有复合键，所有这些都由域类表示）。据我所知，过滤器我会很好。我看对了吗？网上有这方面的例子吗？（我的意思是，一个由过滤器保护的应用程序）。

据我了解阅读文档，我应该以任何方式使用服务，而不仅仅是使用控制器，以便能够精细控制正在发生的事情，无论我是用户 1) 还是 2)。也对吗？

TIA 并感谢您对这些初学者问题的耐心等待

迈克尔

编辑：我修改了合同控制器中的 list() 方法并添加了一个标准，询问您对此的看法。我认为它几乎可以完成这项工作。当然，我还必须处理所有其他方法，例如 create()、save() 等，并在那里添加该标准。否则我将能够编辑任何合同。（用户类有对客户端类的引用。）

```
def list(Integer max) {

    def user = springSecurityService.getCurrentUser()
    params.max = Math.min(max ?: 10, 100)
    def c = Contract.createCriteria()
    def isAdmin = org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils.ifAllGranted('ROLE_ADMIN')
    def results = c.list (params) {
        if (!isAdmin) {
            eq("client", user.client)
        }
    }
    [contractInstanceList: results, contractInstanceTotal: results.getTotalCount()]
} 
```

# java - Android - 如何知道特定布局何时关闭

> ID：15731775
> 
> 赞同：0
> 
> 时间：2013-03-31T16:39:07.060
> 
> 标签：java, android, layout

因此，我的一个 android Fragments（主从设置中的详细信息片段）具有几种可能的布局，具体取决于用户想要做什么，其中一个布局包含大约十几个 EditText 字段供用户输入数据。

如果用户输入数据，然后切换到另一个布局或另一个片段（从细节到主片段），我想在执行切换之前保存他们到目前为止输入的内容，而不需要用户做任何事情。所以我需要知道一个特定的布局 ID 是什么时候被夸大的，然后被压缩/破坏/覆盖/等等。

我该怎么做呢？ `onCreateView()`，在我膨胀新布局的地方，似乎不够，因为它似乎没有提供访问以前存在的内容的方法，并且如果用户切换到主 Fragment 则不会调用 AFAIK。 `getActivity().getCurrentFocus()`在开始时`onCreateView()`返回一个视图，但与 相比，getID() 似乎不匹配`R.layout.my_layout`，并且调用`getActivity().getCurrentFocus().findViewByID() != null`布局中的元素也不起作用。

另外，我什么时候执行保存？

编辑：我应该在那里覆盖`onDestroyView()`并运行保存代码吗？每当我尝试这样做时，应用程序都会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:09:30.763

我猜，根据 Fragments 布局 ID 保存和恢复临时数据几乎是反模式。

相反，将您的输入数据作为名称-值对添加到“实例状态” `Bundle`，覆盖[`onSaveInstanceState(Bundle savedInstanceState)`](http://developer.android.com/reference/android/app/Fragment.html#onSaveInstanceState%28android.os.Bundle%29)您的片段：

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
  super.onSaveInstanceState(savedInstanceState);
  savedInstanceState.putBoolean("myCheckboxState", myCheckBox.isChecked());
  savedInstanceState.putDouble("myDouble", 1.9);
  savedInstanceState.putInt("myInt", 1);
  savedInstanceState.putString("myTextViewString", myTextView.getText());
  // etc.
} 
```

（改编自[这个答案](https://stackoverflow.com/a/151940/1140682)）

`Bundle`在您的 Fragment 再次添加到容器后，这应该可以在各种生命周期方法中访问。例如，通过覆盖该`onActivityCreated(Bundle savedInstanceState)`方法，您可以访问它`Bundle`并使用相应的 setter 方法预先填写您的表单输入。

根据您的持久性要求，您还可以更全局地存储数据，而不仅仅是在 Fragments 实例状态中。

# sql-server - SQL Server 脚本以特定间隔读取多个 csv 文件并插入记录

> ID：15731776
> 
> 赞同：0
> 
> 时间：2013-03-31T16:39:37.327
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我有一些 csv 文件。我想编写 SQL Server 脚本以在某个时间段读取文件并插入 SQL Server db，如果找不到记录，如果调度程序先前已读取文件，则忽略它。每个 csv 将仅包含一条记录。

喜欢：

```
1.csv => John,2000,2012/12/12
2.csv => Tom,3000,2012/12/11 
```

如果有人可以提供脚本示例，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:33:43.587

如果我是你，我会创建一个使用多文件输入的 SSIS 包。这个输入让您从目录中的每个文件中提取数据。

以下是 SSIS 包的基本步骤。

1.  检查“工作”目录中是否有任何文件。如果没有结束包。
2.  将每个文件从“工作”目录移动到“暂存”目录。
    您将这样做，以便当您在包中间时，如果其他文件出现在您的“工作”目录中，您将不会丢失它们。
3.  读取“staging”目录中的所有文件。使用具有多文件输入的数据流。
4.  读取完成后，将所有文件移动到“备份”目录。这当然假设您出于某种原因想要保留它们。您可以轻松地将它们从“暂存”目录中删除。

一旦你完成了你的包，然后使用 SQL Server 代理安排它在你感兴趣的任何时间间隔运行包。

# javascript - 灯箱处于活动状态时使页面停止滚动

> ID：15731779
> 
> 赞同：3
> 
> 时间：2013-03-31T16:39:57.357
> 
> 标签：javascript, html, css

我有以下包含表单的灯箱。一切正常。我唯一的问题是如何在灯箱处于活动状态时使 html 页面停止滚动。

```
<a href = "javascript:void(0)" onclick="
  document.getElementById('light').style.display='block';
  document.getElementById('fade').style.display='block'">
<img src="img/add.jpg"/></a></p>
<div id="light" class="white_content">

<input name="degree_1" type="text" size="73"
   value="<?php echo $user_data_profile_education['degree_1'];?>"/>
</br></br>
Grade</br>
<input name="grade_1" type="text" size="73"
   value="<?php echo $user_data_profile_education['grade_1'];?>"/>

<a href = "javascript:void(0)" onclick="
  document.getElementById('light').style.display='none';
  document.getElementById('fade').style.display='none'"> 
</br><img src="img/done_editing.jpg"/> </a></div>
<div id="fade" class="black_overlay"></div> 
```

这是我的**CSS**：

```
.black_overlay{
    display: none;
    position: absolute;
    top: 0%;
    left: 0%;
    width: 100%;
    height: 220%;
    background-color: grey;
    z-index:1001;
    -moz-opacity: 0.8;
    opacity:.80;
    filter: alpha(opacity=80);
}

.white_content {
    display: none;
    position: absolute;
    top: 45%;
    left: 30%;
    width: 32%;
    height: 51%;
    padding: 30px;
    padding-left:50px;
    border: 5px solid green;
    background-color: white;
    z-index:1002;
    overflow: auto;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-31T16:45:08.817

显示灯箱时添加溢出：隐藏到您的身体，隐藏灯箱时添加溢出：自动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T17:36:54.147

使用 onLoad/onClose 更改保存页面内容的 div 的 css

设置 .lb_overlay 高度是一个不错的选择，从模态的顶部到底部添加相同的“边距”，这样滚动到底部不只是位于窗口的底部

```
var modal = $("#modal"),
    wrapper = $("#wrapper")

$("#modalTrigger").click(function(){
    modal.lightbox_me({
        centered: true,
        onLoad : function(){
            wrapper.css({
                "position" : "fixed",
                "width" : "100%"
            })
            $(".lb_overlay").css("height" , parseInt($(window).height()) + parseInt(modal.css("top") ) + "px" )
        },
        onClose : function(){
            wrapper.css("position" , "relative")
        }
    })
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-15T15:37:35.587

如果有人仍然需要它，您可以使用灯箱事件：

```
let lg = document.getElementById('lightgallery');

lg.addEventListener('onAfterOpen', function(e) {
    $("html, body").css("overflow","hidden");
}, false);

lightGallery(lg);

lg.addEventListener('onCloseAfter', function(e) {
    $("html, body").css("overflow","auto");
}, false);

lightGallery(lg); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-12-11T15:45:03.387

只需添加此脚本即可禁用 lightbox 中的滚动符号

```
<script>
        lightbox.option({
    disableScrolling:true
    })
</script> 
```

# ios - 视频应用程序将 .mp4 保存到相机胶卷

> ID：15731780
> 
> 赞同：0
> 
> 时间：2013-03-31T16:39:57.563
> 
> 标签：ios

我有一个视频应用程序，她所做的就是播放单个 .mp4 文件。我想将该文件保存到将播放的 iphone 中的相机胶卷。我已经有了代码，但由于某种原因视频无法保存。

没有错误，似乎没有任何东西放错了位置，但仍然没有保存。我花了几个小时托盘来解决这个问题，但没有成功。如果有人可以帮我解决这个问题？请？请问漂亮吗？这是保存功能的代码...

```
- (IBAction)save{

    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    // don't forget to link to the AssetsLibrary framework
    // and also #import <AssetsLibrary/AssetsLibrary.h>

    NSString *filePathString = [[NSBundle mainBundle] pathForResource:@"video_name" ofType:@"mp4"];
    NSURL *filePathURL = [NSURL fileURLWithPath:filePathString isDirectory:NO];

    if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:filePathURL]) {
        [library writeVideoAtPathToSavedPhotosAlbum:filePathURL completionBlock:^(NSURL *assetURL, NSError *error){
            if (error) {
               // TODO: error handling

            } else {
                // TODO: success handling
            }
        }];
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T19:53:49.563

抱歉，之前没有人回答过这个问题。如果您仍然需要帮助，这应该适合您：

```
- (IBAction)save{
    NSString *filePathString = [[NSBundle mainBundle] pathForResource:@"video_name" ofType:@"mp4"];
    NSURL *filePathURL = [NSURL fileURLWithPath:filePathString isDirectory:NO];

    UISaveVideoAtPathToSavedPhotosAlbum([filePathURL relativePath], self, @selector(video:didFinishSavingWithError:contextInfo:), nil);
}

- (void) video:(NSString *)videoPath didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo{
    if (!error){
        // Saved successfully
    } else {
        // Error saving
    }
} 
```

# scala - 如何在 Play2 应用程序中启用 sbt-scalabuff？

> ID：15731783
> 
> 赞同：0
> 
> 时间：2013-03-31T16:40:15.980
> 
> 标签：scala, playframework-2.0, sbt

我正在尝试使用 sbt-scalabuff 从 proto 文件生成 scala 案例类。我已将插件引用添加到 Play 项目的 plugins.sbt 文件中，也添加了运行时依赖项。

如果我没有向 Build.scala 添加任何引用 sbt-scalabuff 的设置，那么我假设这将使用默认设置，期望在 src/main/protobuf 中找到文件。

你知道任何关于 sbt-scalabuff 正确设置的 Build.scala 示例吗？

谢谢，加比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T22:33:45.817

我自己并没有真正测试过 sbt-scalabuff，但是您可以尝试在 sbt-scalabuff github 页面上提出问题。

# hyperlink - 如何在锚标记中将文件作为指向 servlet 的链接

> ID：15731785
> 
> 赞同：-1
> 
> 时间：2013-03-31T16:40:25.837
> 
> 标签：hyperlink, anchor

我正在编写一个 servlet 代码来显示数据库中的文件，并试图将文件名作为锚标记中的链接提供，但它显示错误！..请帮助！，这是我的代码：

```
out.println("<body>");
out.println("<h1>Download list </h1>"); 
out.println("<table>");
while(rs.next()) {
    String ns=rs.getString("uname");
    out.println("<tr><td>File Name:</td>");
    out.println("<td><a href="/Download">"+ns+"</td></tr>");
    out.println("</table>");
} 
out.println("</body>");
out.println("</html>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:51:43.030

尝试这个;

```
out.println("<td><a href='/download'>" + ns + "</td></tr>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:28:07.960

我们假设，

您在 web.xml 中的 servlet url-pattern 条目是“/Download”

如果你想下载一个带有参数作为文件名的文件，你应该尝试类似 -

```
 out.println("<tr><td>File Name:</td>");
    out.println("<td><a href="/Download?filename="+ns+">"+ns+"</td></tr>"); 
```

然后您应该在 Servlet 中为请求的参数 - 文件名编写下载功能的代码

请详细说明您的错误，以便我们可以帮助您在正确的方向上解决您的问题。

谢谢

# c# - 将网络上的图像保存到我的 Public/images/items 文件夹中？

> ID：15731789
> 
> 赞同：0
> 
> 时间：2013-03-31T16:40:58.473
> 
> 标签：c#, asp.net-mvc, image, path, webclient

我正在尝试从网站保存图像并将其保存到我的`~/Public/images/items`文件夹中。

```
string localFilename = @"~\Public\images\items\" + item.Name + ".png";
string imageUrl = "https://account.hirezstudios.com/smitegame/" + CQ.Create(itemBox)["#itemIcon a img"].Attr("src");
using (var web = new WebClient())
{
    web.DownloadFile(imageUrl, localFilename);
} 
```

`localFilename`由于路径不正确而引发异常。

以下是实际变量的内容（使用断点检查）：

```
~\Public\images\items\Aegis Amulet.png 
```

还有一个例外：

> {"No se puede encontrar una parte de la ruta de acceso 'C:\Program Files (x86)\IIS Express\~\Public\images\items\Aegis Amulet.png'。"}

所以路径显然是错误的。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:44:02.823

WebClient 不理解路径中的 ~ 。您需要具有要保存文件的本地完整路径。

试试这样的东西......

```
Server.MapPath(@"\Public\images\items\" + item.Name + ".png") 
```

# c - 两个孩子从管子里看书

> ID：15731790
> 
> 赞同：2
> 
> 时间：2013-03-31T16:41:12.377
> 
> 标签：c, unix, pipe

这是我想做的：

我试图制作一个程序来创建具有两个孩子的父母，父母创建未命名的管道，写入其中，孩子应该从中读取（每 1 个字节），然后在两个不同的终端窗口中输出结果。我不知道如何同步它们。

我在一个终端窗口中得到类似的东西：Nejke aa，在第二个窗口中：adt I want: Nejake data

我尝试在互联网上搜索，但我还是在问。任何帮助是极大的赞赏。

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <sys/stat.h>

/* declare our procedures */
void runchild1(int pfd[]);
void runchild2(int pfd[]);

/* some data to write and read from pipe */
const char some_data[] =  "Nejake data" ;

int main(int argc, char **argv)
{
int pid, status;                //PID for debugging
int fd[2];                      //file descriptors for the          pipe

/* let create some pipe */
pipe(fd);   

/* supposed to run two children of the process */
runchild1(fd);
runchild2(fd);

/* this is important! close both file descriptors on the pipe */
close(fd[0]); close(fd[1]);     

/* pick up all the dead children */
while ((pid = wait(&status)) != -1) 
    fprintf(stderr, "process %d exits with %d\n", pid, WEXITSTATUS(status));
exit(0);
}

void runchild1(int pfd[])   /* run the first child */
{
int pid;                /* you may want to print it for debugging */
int data_processed;     /* store data */
int des;                /* descriptor for open files  */
char buffer;            /* buffer for reading byte of data  */

switch (pid = fork()) {

case 0:                 /* child reads from the pipe */

    close(pfd[1]);      /* this process don't need the other end */
    while ((data_processed = read(pfd[0],&buffer,1)) > 0) {

        printf("Proces %d, data citane po bajte: %c\n",getpid(),buffer);
        des = open("/dev/ttys001",O_RDWR);
        write(des, &buffer,1);          
    }               
    exit(0);

default: /* parent writes to the pipe  */       

    /* write some data for children to read */
    data_processed = write(pfd[1], some_data, strlen(some_data));
    printf("Zapis %d bytov cez nepomenovanu ruru:\n", data_processed);
    printf("Zapisane: %s\n",some_data);
    printf("Som rodic dvoch deti: %d\n",getpid());

    break;

case -1:
    perror("fork");
    exit(1);
}
}

void runchild2(int pfd[])   /* run the second child */
{
int pid;
int data_processed;
int des;
char buffer;

switch (pid = fork()) {

case 0:                 /* child */

    close(pfd[1]);      /* this process doesn't need the other end */
    while ((data_processed = read(pfd[0],&buffer,1)) > 0) {

        printf("Proces %d, data citane po bajte: %c\n",getpid(),buffer);
        des = open("/dev/ttys002",O_RDWR);
        write(des, &buffer,1);          
    }
    exit(0);        

default: /* parent does nothing */
    break;

case -1:
    perror("fork");
    exit(1);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-25T23:39:09.523

如果两个孩子都需要查看相同的数据，您将需要两个管道，每个孩子一个，并且父级必须将每条消息写入两次，每个管道上一次。

或者，您可以使用[进程替换](http://www.gnu.org/software/bash/manual/bash.html#Process-Substitution)[`tee`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/tee.html)运行命令，或者您可以查找（尝试查找）程序（的进程/管道变体） - 或者您可以点击此[Stack Overflow 答案](https://stackoverflow.com/a/4658717/15168)中的链接。您的程序将有一个管道，但孩子们将各自拥有自己的管道。`pee``tee`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T23:16:33.140

Unix管道是先进先出的。一个输入，一个输出。没有什么比一个管道的两个输出更好的了。你的秘籍是：`System V IPC`关键字和`ipcs`命令。

# html - 如何使包含带有 CSS 的浮动 div 的 div 容器居中？

> ID：15731791
> 
> 赞同：3
> 
> 时间：2013-03-31T16:41:13.293
> 
> 标签：html, css

我试图用我的代码实现以下目标：我想要一个 div 容器，div#title-box，它是居中的。在那个 div 容器内，我想要 3 个其他 div 容器，div#logo、div#title、div#subtitle（查看代码以了解它们的显示方式）

现在实际问题： div#logo 有一个给定的宽度，但其他两个没有，它们浮动。我怎样才能让 div#title-box 环绕其他三个 div，但同时保持居中。我看到的另一个问题是 div#title-box 不能有固定的宽度。

有任何想法吗。谢谢！

编辑：必须修改下面的代码，以便 div#title-box 环绕其他 div 并保持居中。

如果有人需要使用代码，这里有一个完整的例子：

```
<!DOCTYPE html>
<html>
<head>
<style>
   div#title-box {
   max-width: 500px; 
   display: block;
   height: 600px;
   margin: 0 auto;
   position: relative;
   }

   div#logo {
   padding: 0;
   margin: 0;
   position: absolute;
   top: 100px;
   left: 5px;
   width: 100px;
   height: 100px;
   overflow: auto;
   background: #ff0000 no-repeat;
   background-size: 100% 100%;
   border-radius: 15px;
   float: left;
   }

   div#title {
   padding: 0;
   margin: 0;
   position: absolute; 
   left: 110px;   
   top: 100px;
   bottom: 20px;
   right: 10px;
   overflow: auto;
   float: left;
   }

   div#subtitle { 
   padding: 0;
   margin: 0;
   position: absolute;    
   top: 140px;
   bottom: 20px;
   right: 10px;
   left: 110px;
   overflow: auto;
   float: left;
   }

</style>
</head>
<body>
<div id="title-box">
  <div id="logo">
  </div>  
  <div id="title">
    <h1>Hello</h1>
  </div>  
  <div id="subtitle">
    <h3>A A A A A A A A A A A A A A A!</h3>
  </div> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:44:21.523

尝试一些类似的东西

```
 div#title-box {
       width: 500px; 
       display: inline-block;
       height: 600px;
       margin: 0 25%;
       position: relative;
       left:-250px;

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:05:49.757

申请时

```
position: absolute 
```

对于您的代码，它将被排除在 DOM 上下文的其余部分之外。

我已经修改了您的 CSS：http: [//jsfiddle.net/asBmS/](http://jsfiddle.net/asBmS/)。您的包装 div 现在应该始终包含子 div。这是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T12:07:58.640

我能想到的最好的建议是更多的“黑客”，如果您更改内容的宽度，则需要对其进行调整。看看这个链接，看看偏移边距，它把所有东西都放在中间。您可能需要进一步调整它以满足您的需求。

[http://jsfiddle.net/asBmS/15/](http://jsfiddle.net/asBmS/15/)

```
#logo,#title,#subtitle{
    /*offset hack*/
    margin-left: 10% !important;
} 
```

# jsp - 如何从 Map 为 Struts 2 文本字段动态分配值

> ID：15731792
> 
> 赞同：0
> 
> 时间：2013-03-31T16:41:18.070
> 
> 标签：jsp, session, dictionary, struts2

我正在尝试为 Struts2 文本字段动态分配值，因为我正在做的事情 id 用户管理员`userId`在输入该 ID 时被询问，如果该 ID 存在并且它属于类员工，则在 DB 中检查该 ID 我正在传递类的对象员工在使用代码

```
Map m = ActionContext.getContext().getSession();
m.put("userDATA",o); 
```

其中 o 是员工类的对象，然后我的操作类返回`SUCCESS`并且 O 被重定向到我正在显示 Employee 等属性的页面`fName`，`lName`但我真的很惊讶在 struts 文本字段中分配动态值我正在做的是

```
<%Object o=session.getAttribute("userDATA");
Employee e=(Employee)o%> 
```

然后我在做

```
<s:textfield label="First Name" name="fName" value="%{e.fName}"> 
```

但我什么也没得到，但我已经完成了`<%@taglib prefix="s" uri="/struts-tags"%>`

请帮助我是 Struts2 的初学者，并且只有 Struts 的基本知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T10:51:48.827

我有同样的问题。但现在它已使用此代码解决。

```
<s:textfield label="First Name" name="fName" value="%{#session.userDATA}"/> 
```

感谢罗马 C.

# timer - AutoHotkey：计时器、标签和包含

> ID：15731795
> 
> 赞同：1
> 
> 时间：2013-03-31T16:41:35.037
> 
> 标签：timer, include, autohotkey

如何在包含单独文件的程序中使用计时器？这是我的例子：

**脚本1**：

```
#include Script2.ahk
#include Script3.ahk
Timer() 
Hello() 
Exit 
```

**脚本2**：

```
global variable

Hello(){
    MsgBox, Messsage1
} 
```

**脚本3**：

```
Timer(){
    SetTimer, Message, 1000
}   

Message:
    MsgBox, Messsage2
    SetTimer, Message, Off
    return 
```

该程序将立即显示消息框“Message2”并关闭。但我想在开始后一秒得到“Message1”和“Message2”。这可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:09:37.217

您需要阅读两个链接。

[http://www.autohotkey.com/docs/commands/_Include.htm](http://www.autohotkey.com/docs/commands/_Include.htm)

当您#include 文件时，内容只是插入到主脚本中的那个位置。所以你的 Script1 看起来像：

```
global variable

Hello(){
    MsgBox, Messsage1
}

Timer(){
    SetTimer, Message, 1000
}   

Message:
    MsgBox, Messsage2
    SetTimer, Message, Off
    return

Timer() 
Hello() 
Exit 
```

当脚本启动时，自动执行部分立即运行： [http ://www.autohotkey.com/docs/Scripts.htm#auto](http://www.autohotkey.com/docs/Scripts.htm#auto)

因此，直到第一次返回的所有内容都运行（跳过函数）。这就是“Message2”立即显示而“Message1”从未显示的原因。

解决方案：

如果必须在包含文件中包含子例程标签，则可以将`#include`s 放在脚本底部的 autoexec 部分之后：

```
Timer() 
Hello() 
Exit
#include Script2.ahk
#include Script3.ahk 
```

但是，出于这个确切原因，将子例程标签放在#include 文件中并不是一个好习惯。当然，除非您了解本文中提到的后果。

# android - 如何禁用菜单按钮和操作栏仍然存在

> ID：15731798
> 
> 赞同：3
> 
> 时间：2013-03-31T16:41:46.697
> 
> 标签：android

我在禁用菜单按钮时遇到问题，我不想启用菜单按钮，我通过返回功能禁用`false`，`onPrepareOptionsMenu`但它隐藏了我的操作栏中的所有操作项，那么如何在不影响我的操作栏的情况下禁用菜单按钮？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T17:03:07.977

硬件菜单按钮不受控制`onPrepareOptionsMenu().`一般来说，改变硬件按钮的行为并不是一个好习惯，因为用户希望它以某种方式运行（我相信这是扩展溢出菜单）。

如果您绝对必须禁用它，您可以在我们的活动中监听它，如下所示：

```
public boolean dispatchKeyEvent(KeyEvent event) {
    final int keycode = event.getKeyCode();
    final int action = event.getAction();
    if (keycode == KeyEvent.KEYCODE_MENU && action == KeyEvent.ACTION_UP) {
        return true; // consume the key press
    }
    return super.dispatchKeyEvent(event);
} 
```

# wso2 - 将 AMQP 0-9-1 与 WSO2 MB 一起使用时权限被拒绝

> ID：15731801
> 
> 赞同：0
> 
> 时间：2013-03-31T16:41:58.917
> 
> 标签：wso2, amqp

尝试使用 AMQP 0-9-1 与 WSO2 MB 通信时，我从 WSO2 MB 的 Andes 核心收到“权限被拒绝”AMQSecurityException。发生这种情况是因为我试图使用路由键将队列绑定到主题。谁能提供有关如何将 AMQP 0-9-1 库与 WSO2 MB 一起使用的指导？

具体来说，我的代码正在尝试使用路由键“rkey”发布到交换“texch”，并通过运行时创建的队列使用路由键“rkey”绑定到“texch”的消息。

WSO2 MB 的输出是：

```
[2013-04-02 14:27:34,012]  INFO {org.wso2.andes.server.protocol.AMQProtocolEngine} -  Closing channel due to: org.wso2.andes.AMQSecurityException: Permission denied: binding rkey [error code 403: access refused]
[2013-04-02 14:27:34,015]  INFO {org.wso2.andes.server.protocol.AMQProtocolEngine} -  Channel[1] awaiting closure - processing close-ok
[2013-04-02 14:27:34,015]  INFO {org.wso2.andes.server.handler.ChannelCloseOkHandler} -  Received channel-close-ok for channel-id 1
[2013-04-02 14:27:36,424]  INFO {org.wso2.andes.server.store.CassandraMessageStore} -  Removed Global Queue Assigned for Topic Subscription: tmp_1792d33b-7975-44db-b68f-dc54ce9a0852 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T12:28:42.583

在 WSO2 Message Broker 中，不会为给定的任何名称动态创建交换。因此，如果它用于主题，我们需要使用“amq.topic”，即 WSO2 MB 的预定义默认主题交换名称作为交换名称，如果它用于队列的默认交换需要是“amq.direct”以避免此权限问题。

此外，如果需要创建新的主题/直接交换（在您的情况下为“texch”），则需要在 qpid-virtualhosts.xml 文件中预先声明它，然后您可以将队列/主题绑定到新的交换。有关这方面的进一步指南，请参阅[此](http://isharapremadasa.blogspot.com/2013/08/using-wso2-message-broker-with-rabbitmq.html)博客文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T05:04:33.810

我们必须如下配置 quid-virtualhost.xml 文件以在服务器启动时创建 Q。

```
 <!-- Here you can add remove exchange to this virtualhost-->
            <exchange>
                <type>direct</type>
                <name>carbon.direct</name>
                <durable>true</durable>
            </exchange>
            <exchange>
                <type>topic</type>
                <name>carbon.topic</name>
            </exchange>
        </exchanges>

        <queues>
            <queue>
                <name>TEST</name>
                <TEST>
                    <exchange>carbon.direct</exchange>
                    <durable>true</durable>
                </TEST>
            </queue> 
```

我使用“amqp-ts”来发送和接收来自 javascripts 的消息。

```
 var amqp = require("amqp-ts");

var connection = new amqp.Connection("amqp://admin:admin@localhost:5672");
//var exchange = connection.declareExchange("carbon.direct",{noCreate: true});
var queue = connection.declareQueue("TEST",{noCreate: true});
//queue.bind(exchange);
queue.activateConsumer((message) => {
    console.log("Message received: " + message.getContent());
});

// it is possible that the following message is not received because
// it can be sent before the queue, binding or consumer exist
var msg = new amqp.Message("Test");
queue.send(msg);

connection.completeConfiguration().then(() => {
    // the following message will be received because
    // everything you defined earlier for this connection now exists
    var msg2 = new amqp.Message("Test2");
    queue.send(msg2);
}); 
```

更多参考[https://github.com/squaremo/amqp.node](https://github.com/squaremo/amqp.node)

# c - 扫描相似的数字并将它们放在不同的数组中

> ID：15731803
> 
> 赞同：1
> 
> 时间：2013-03-31T16:42:40.437
> 
> 标签：c, arrays, scanf

我有一个看起来像这样的 txt 文件

```
63001230 3 10
63001234 8 3
63000176 8 6
63001432 - 0 
```

我已经存储的前 8 位数字。现在，我想将第二列（3 8 8 -）存储在一个数组中，将第三列（10 3 6 0）存储在另一个数组中。

我要这样做吗

```
fscanf(file,"%d %d %d", existingarray[i], array2[i], array3[i]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:53:58.397

第二个数组必须是`char`要读取`-`的。您还必须将数组元素的地址传递给`fscanf()`这样的：

```
int existingarray[LEN],array3[LEN];
char array2[LEN];
//...
fscanf(file,"%d %c %d", &existingarray[i], &array2[i], &array3[i]). 
```

# c# - 用于使用方法局部变量 C# 进行日志记录的 AOP 工具

> ID：15731805
> 
> 赞同：1
> 
> 时间：2013-03-31T16:42:55.370
> 
> 标签：c#, unity-container

unity Interception 可以用来拦截方法，它可以捕获被拦截方法的参数值。

我想要的是在截获的方法中记录局部变量的值。例如

**更新**

```
public void CopyBlogPost(int id){

  var oldblogPost = GetBlogPost(id);

  //log details about old blog post, including name, date, id etc.

  //copy post

 //log details about new blog post, including name, date, id etc.

} 
```

有没有可以用于这种情况的工具？

**更新**

正如@Aron 建议的那样， Mono.Cecil 可能会提供该功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:01:21.570

你可以做的是定义一个这样的装饰器：

```
public class LoggingCalculatorDecorator : ICalculator
{
    private readonly ICalculator decoratee;
    private readonly ILogger logger;

    public LoggingCalculatorDecorator(
        ICalculator decoratee,
        ILogger logger)
    {
        this.decoratee = decoratee;
        this.logger = logger;
    }

    public void Add(int i, int j)
    {
        var logging = "adding "+i+" "+j;
        //Log logging variable, or any local variables

        // call decoratee
        this.decoratee.Add(i, j);
    }
} 
```

通过这种方式，您可以将此行为添加到现有类中，而无需对其进行更改。如果您发现自己在整个系统中添加了许多日志装饰器（并且违反了 DRY 原则），那么您可能缺少系统中的通用抽象。看看[这个](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)和[这篇](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)文章。他们可能会为您提供一些关于如何设计系统的线索，这样您就不必回退到拦截和代码编织，而是解决核心问题：应用程序的设计。

# c++ - 当我到达 z 方向的某个位置时，我的“相机”反转了，这可能是什么原因造成的？

> ID：15731808
> 
> 赞同：2
> 
> 时间：2013-03-31T16:43:01.260
> 
> 标签：c++, visual-studio-2010, opengl, soil

我正在使用 c++、OpenGL、SOIL 图形库和 Microsoft Visual c++ 2010 Express。我添加了一个视频来演示这个问题
[http://www.youtube.com/watch?v=7F7YDN0zbc4&feature=youtu.be](http://www.youtube.com/watch?v=7F7YDN0zbc4&feature=youtu.be)

这是我目前的问题；

我们的舞台或环境是 3D[x][y][z]。当我们在 x 方向移动并且在 y 方向移动时不会出现问题（我们不允许在 y 方向移动步数，我们可以跳跃）。但是一旦我们到达 z=70，相机就会转过来。因此，如果在 x 和 y 为 1 时向 z=70 移动，让我们考虑我们在 z 方向上的朝向 +，但是一旦我们达到 70，我们的相机会转身，但我们的朝向仍然是 +。我知道这一点，因为我有一个 cout << 告诉我方向和坐标系位置。

```
cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos()  << ", " << player.getZPos() << ", " << player.getFacing() << "\n"; 
```

我不确定我需要在这里输入什么样的代码，所以我应该在这里输入什么样的函数。

//这是我们的起始位置

```
void demo(){
     gameState = 1;
     player.setPos(4,1,15);
     player.setFacing(3);
     setPos();
     cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing();
} 
```

//这就是我们设置位置的方式

```
void setPos(){
     currentXPos = player.getXPos()+(player.getXWidth()/2);
     currentYPos = player.getYPos()+(player.getYHeight());
     currentZPos = player.getZPos()+(player.getZDepth()/2); 
     currentYFace = currentYPos; 
     if(player.getFacing() == 0){
         currentXFace = MAPWIDTH;
         currentZFace = currentZPos;
     }else if(player.getFacing() == 2){
         currentXFace = 0;
         currentZFace = currentZPos;
     }else if(player.getFacing() == 3){
         currentXFace = currentXPos;
         currentZFace = MAPDEPTH;
     }else{
         currentXFace = currentXPos;
         currentZFace = 0;
     }
} 
```

//这是我们的显示函数

```
 void /*GraphicsEngine::*/display(){
      glClearColor (0.0, 0.0, 0.0, 1.0);
       glLoadIdentity ();
      glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
      glShadeModel(GL_FLAT);
       glClearDepth(1.0);
      glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
      glMatrixMode(GL_MODELVIEW);
      glLoadIdentity();
      setPos();
      gluLookAt(currentXPos,currentYPos,currentZPos,currentXFace,currentYFace,currentZFace,0,1,0);
      generateMap();
      graphicsFloor();
      int i = 0;
      if(projectiles.size()>0){
         for(i= 0; i< projectiles.size(); i++){
             arrow(projectiles.operator[](i).getXPos(),projectiles.operator[](i).getYPos(),projectiles.operator[](i).getZPos(),0.5,BLOCKWIDTH);
         }
         projectileMotion();
         player.advance();
         glutPostRedisplay();
      }else if(player.advance()){
          glutPostRedisplay();
      }
      glFlush();
      glutSwapBuffers();
 } 
```

//这是我们的重塑功能

```
void reshape(int w, int h){
        glViewport(0, 0, (GLsizei) w, (GLsizei) h);
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective(60.0, (GLfloat) w/(GLfloat) h, 1.0, 200.0);
        glMatrixMode(GL_MODELVIEW);
            glTranslatef(0.0, 0.0, -3.6);
        glLoadIdentity();
} 
```

//这是我们控制用户使用键盘的方式，我不会发布所有其他情况，因为它们是空白的

```
 void userAction(unsigned int userInput){
int i;
switch(userInput){
    case 1:
        player.turnLeft();
        glutPostRedisplay();
        break;
    case 2:
        player.turnRight();
        //apply graphics
        glutPostRedisplay();
        break;
    case 3:
        if(player.getFacing() == 0){
            player.setPos(player.getXPos()-1,player.getYPos(),player.getZPos());
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }else if(player.getFacing() ==3){
            player.setPos(player.getXPos(),player.getYPos(),player.getZPos()-1);
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }else if(player.getFacing() == 2){
            player.setPos(player.getXPos()+1,player.getYPos(),player.getZPos());
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }else{
            player.setPos(player.getXPos(),player.getYPos(),player.getZPos()+1);
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }
        //apply graphics
        glutPostRedisplay();
        break;
    case 4:
        if(player.getFacing() == 0){
            player.setPos(player.getXPos()+1,player.getYPos(),player.getZPos());
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }else if(player.getFacing() ==3){
            player.setPos(player.getXPos(),player.getYPos(),player.getZPos()+1);
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }else if(player.getFacing() == 2){
            player.setPos(player.getXPos()-1,player.getYPos(),player.getZPos());
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }else{
            player.setPos(player.getXPos(),player.getYPos(),player.getZPos()-1);
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }
        //apply graphics
        glutPostRedisplay();
        break;
    case 5:
        if(player.getFacing() == 0){
            player.setPos(player.getXPos(),player.getYPos(),player.getZPos()-1);
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }else if(player.getFacing() == 2){
            player.setPos(player.getXPos(),player.getYPos(),player.getZPos()+1);
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }else if(player.getFacing() == 3){
            player.setPos(player.getXPos()+1,player.getYPos(),player.getZPos());
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }else{
            player.setPos(player.getXPos()-1,player.getYPos(),player.getZPos());
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }
        glutPostRedisplay();
        break;
    case 6:
        if(player.getFacing() == 0){
            player.setPos(player.getXPos(),player.getYPos(),player.getZPos()+1);
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }else if(player.getFacing() == 2){
            player.setPos(player.getXPos(),player.getYPos(),player.getZPos()-1);
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " <<player.getFacing() << "\n";
        }else if(player.getFacing() == 1){
            player.setPos(player.getXPos()+1,player.getYPos(),player.getZPos());
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }else{
            player.setPos(player.getXPos()-1,player.getYPos(),player.getZPos());
            cout << "The player is at position: " << player.getXPos() << ", " << player.getYPos() << ", " << player.getZPos() << ", " << player.getFacing() << "\n";
        }
        glutPostRedisplay();
        break;
 } 
```

//这就是我们设置人脸的方式

```
 void PlayerCharacter::setFacing(unsigned short newFace){
      facing = newFace % 4;
 } 
```

//这是位置

```
bool PlayerCharacter::setPos(int x, int y, int z){
positionData pTemp;
pTemp.x = x;
pTemp.y = y;
pTemp.z = z;
pTemp.id = p.id;
pTemp.w = p.w;
pTemp.h = p.h;
pTemp.d = p.d;
pTemp.type = p.type;
 if(/*phys->*/openBlocks(pTemp) && /*phys->*/validPosition(pTemp)==0){
      p.x=x;
      p.y=y;
      p.z=z;
      /*phys->*/updatePlacements(p);
      return true;
 }else{
      return false;
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T21:57:12.817

currentZPos = player.getZPos(); 这样做可以解决问题

# delphi - 带有指向组件的指针的未声明标识符

> ID：15731811
> 
> 赞同：0
> 
> 时间：2013-03-31T16:43:22.523
> 
> 标签：delphi, pointers, undeclared-identifier

我已经设置了一个指针，我想指向一个组件，但是每次调用过程时它指向的组件都不相同，它只是简单地声明为“指针”。这是指针指向组件的代码。

```
Procedure DestroyConnection(Component,ID,Connections:Integer);
Var
ComponentPtr: Pointer;

begin

if Component = 1 then
  ComponentPtr := Cell;

if Component = 2 then
   ComponentPtr := Bulb; 
```

这是重用指针的代码。

```
Procedure DestroyLink(Ptr:Pointer; ID:Integer);
var
Component: ^TObject;
begin
Component := Ptr;
Component.Connected := False; 
```

我在该行收到一个未声明的标识符错误：

```
 Component.Connected := False; 
```

我如何能够访问 DestroyLink 过程中指针指向的组件？对不起，如果我没有多大意义：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:51:44.660

您的变量`Component`是指向`TObject`. 而且由于`TObject`没有名为 的成员`Connected`，这就是编译器对象的原因。

更重要的是，你有太多的间接级别。类型的变量`TObject`，或者实际上任何 Delphi 类已经是一个引用。它已经是一个指针。这就是为什么您的分配`ComponentPtr`不使用`@`运算符的原因。它不需要获取地址，因为引用已经是地址。

您需要更改`DestroyLink`以匹配。您需要的变量不是指向引用的指针，而是对象的实际类型的变量。例如，假设定义`Connected`属性的类型是，`TMyComponent`那么您的代码应该是：

```
var
  Component: TMyComponent;
....
Component := TMyComponent(Ptr);
Component.Connected := False; 
```

或者更简单的是将变量的类型从 更改`Pointer`为`TObject`。然后传递`TObject`而不是`Pointer`. 然后您的代码可以读取：

```
Procedure DestroyConnection(Component,ID,Connections:Integer);
Var
  Obj: TObject;
begin
  case Component of
  1:
    Obj := Cell;
  2:
    Obj := Bulb;
  .... 
```

进而：

```
procedure DoSomethingWithObject(Obj: TObject);
begin
  if Obj is TCell then
    TCell(Obj).Connected := False;
  if Obj is TBulb then
    TBulb(Obj).SomeOtherProperty := SomeValue;
end; 
```

如果您对所有这些对象都有一个公共基类，那么您可以将变量声明为该类型。然后你可以使用虚函数和多态性，我认为这会导致更简单和更清晰的代码。

# php - 保护网站文件夹中的文本文件

> ID：15731812
> 
> 赞同：0
> 
> 时间：2013-03-31T16:43:24.927
> 
> 标签：php, security

我的网站目录中有几个文件夹，其中包含名为“secure.txt”的文本文件。出于安全原因，这些文件的 URL 从不显示在网络浏览器中，但我的网站会搜索这些文件（PHP 代码），其中包含敏感信息。

如何让 PHP 代码允许读取这些文件但限制通过 url 访问，这样潜在的黑客就无法读取这些文件的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:50:16.563

将它们放在文档根文件夹之外，并将以下 .htaccess 文件放在要保护的文件夹中。此外，如果您不想通过特定 IP 访问它，请删除最后一行。

```
order deny, allow
deny from all
allow from 192.168.0 
```

[编辑：] 允许 php 脚本等允许 localhost (127.0.0.1)

```
order deny, allow
deny from all
allow from 127.0.0.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:45:04.813

您应该将它们放在另一个文件夹中并使 .htaccess 拒绝所有，允许来自 127.0.0.1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T16:50:05.367

老把戏：用 前缀文件`<?php die("I'm a fraid I can't do that, Jim"); ?>`，然后调用它们`*.php`。在解析时，忽略前缀。

**编辑**

为什么要这样做？其背后的基本原理是，您避免依赖于某些特殊的网络服务器配置，这些配置会被遗忘（移动到新服务器时）、不可用（许多廉价主机不给您 .htaccess）、不适用于某些网络服务器软件(IIS) 等

因此，理由是用一些计算开销来换取灵活性、可移植性和平台独立性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T16:58:39.377

如果您使用 Apache，请拒绝访问`secure.txt`从内部命名的所有文件`httpd.conf`：

```
<Files secure.txt>
  deny from all
</Files> 
```

您也可以通过`.htaccess`文件执行相同的操作（如果您的服务器配置为允许从 htaccess 覆盖访问权限）。

但更好的解决方案是将敏感信息包含在您的 PHP 脚本本身中，或者将其存储在数据库中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T16:48:13.370

您可以将它们完全移出您的网站目录吗？如果是这样，那么请确保 PHP 可以访问该目录！（该`open_basedir`值需要包含它。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-31T16:49:52.640

为了安全起见，我建议将文件移出 webroot

# jquery - 我可以再次设置现有请求属性的值吗？

> ID：15731813
> 
> 赞同：1
> 
> 时间：2013-03-31T16:43:25.260
> 
> 标签：jquery, html, jsp, request

我有一个主页，其中有一个标题、一个侧边栏和一个 div 标签。当用户点击“注册”时，`Registration.jsp`被加载到 div 标签中。

成功提交注册表单后，我想将其转发到我想在 div 标签中显示 html“bookimages.html”的同一页面。

我尝试设置一个属性值来执行此操作。

这是我的 mainpage.css：

```
<body id="userprofilepage">
<% request.setAttribute("regisstatus",null); %>
<div>
<%@ include file="header.jsp" %><br>
</div>

<div id="mainsidebar">
<%@ include file="sidebar.html" %>
</div>

<div>
<%@ include file="priviledges.html" %>
</div>

<div id="contentarea">
<% if(request.getAttribute("regisstatus")==null)
{ %>

<%@ include file="bookimages.html" %>
<% } else if((request.getAttribute("regisstatus").toString()).equals("success")) { %>
            <%@ include file="Register.jsp" %>
    <% } else { %>

<h3>Sorry could not register.. Try again</h3>
<% }  %>
</div>

</body> 
```

**jQuery**

在我的标题中，我有一个注册按钮：

```
 $(function(){
    $("#register").click(function(){
        $("#contentarea").load("RegistrationServlet.jsp");
    });
}); 
```

...工作正常。并调用 RegistrationServlet.java：

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub

        //Takin all parameters

          String fname = request.getParameter("fname");
          //System.out.println(fname);
          String lname = request.getParameter("lname");
          //System.out.println(lname);
          String mobileno = request.getParameter("mobno");
          //System.out.println(mobileno);
          String pwd = request.getParameter("password");
          //System.out.println(uid);
         // String cpwd = request.getParameter("password");
          //System.out.println(pwd);
          String email = request.getParameter("email");
          String off_add= request.getParameter("off_add");
          String perm_add = request.getParameter("perm_add");

          String[] r = request.getParameterValues("role");

          for(int i=0;i<r.length;i++)
          {
              System.out.println(r[i]);
          }
          ArrayList<Integer> role=new ArrayList<Integer>();

          for(int i=0;i<r.length;i++)
          {
              Integer r1=new Integer(RoleManager.getRoleid(r[i]));
            role.add(r1);
          } 
          /*for(int i=0;i<r.length;i++)
          {
              Integer r1=new Integer(RoleManager.getRoleid(r[i]));
              role.add(r1);
          }*/

         String g[]=request.getParameterValues("genre");
          ArrayList<Integer> genre=new ArrayList<Integer>();
          for(String i : g)
          {
              Integer g1=new Integer(GenreManager.getGenreid(i));
              genre.add(g1);
          }

        // creating user object 
          RegisteredUser uobj = new RegisteredUser();

        //setting values in RegisteredUser obect

          uobj.setFname(fname);
          uobj.setLname(lname);
          uobj.setPassword(pwd);
          uobj.setMobileno(mobileno);
          uobj.setPassword(pwd);
          uobj.setEmail(email);
          uobj.setOffadd(off_add);
          uobj.setPermadd(perm_add);
          uobj.setRole(role);
          uobj.setGenre(genre);
          uobj.setUid("abc2");

          //send user object to manger

          boolean suc=UserManager.createUser(uobj);
          System.out.println("user object created");
          if(suc) 
             request.setAttribute("regisstatus", "success");
          else
              request.setAttribute("regisstatus", "fail");
          RequestDispatcher rd=request.getRequestDispatcher("/userprofilepage.jsp");
          rd.forward(request, response);

    }

} 
```

但是在我的主页中，请求属性没有被设置。你能帮我找出问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:02:37.280

首先，你使用`.load()`函数的方式不是正确的方式。

在您的代码中，`$("#contentarea")`div 在服务器端被计算为第一个请求，然后不再计算。您的函数将***RegistrationServlet.jsp***`.load()`的结果加载到您的 div 中，但不会根据它刷新 div。

 *我认为您应该对“RegistrationServlet.jsp”执行 ajax 请求，并成功刷新您的页面，或者在***RegistrationServlet.jsp***中构建逻辑，以便`.load()`函数调用可以保持不变。*

# java - 将字符串变量转换为 char

> ID：15731814
> 
> 赞同：1
> 
> 时间：2013-03-31T16:43:29.213
> 
> 标签：java, string, char

有没有办法将类型的 String 变量转换为`"X"`字符？

```
String state = "X";
char c_state = convertToChar(state); 
```

我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T16:44:25.003

你可以这样做：

```
char c_state = state.charAt(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:46:09.967

您还可以将其转换为 char 数组，如下所示，如果 String 包含超过 1 个字符，这可能非常有用。

```
char[] charArray = state.toCharArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:46:23.660

这是另一种方法

```
char c_state = state.toCharArray()[0]; 
```

# javascript - Symfony2 数据原型替换复选框的值

> ID：15731815
> 
> 赞同：0
> 
> 时间：2013-03-31T16:43:29.300
> 
> 标签：javascript, symfony

我试图找到一个优雅的解决方案来呈现数据原型复选框的值。

目前只有为标签和名称呈现的占位符。

```
<label class="checkbox required" for="foobar_form_networkDetails_programList___name__">
    <input type="checkbox" id="foobar_form_networkDetails_programList___name__" name="foobar_form[networkDetails][programList][__name__]" required="required" value="1" />__name__label__
</label> 
```

所以我最终得到

```
programPrototype = programListContainer.data('prototype');
programRow       = programPrototype.replace(/__name__label__/g, programType);
programRow       = programRow.replace(/__name__/g, programListIndex); 
```

我可以用字符串替换 value="1" 但这很糟糕。我最好替换占位符值。

所以我的选择是：

*   将数据原型字符串渲染到 DOM 并在 DOM 上执行操作以将值重置为我想要的值。
*   覆盖原型渲染（我不知道该怎么做）。

这似乎是一个很常见的情况，所以我想知道我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:28:39.623

更改复选框的值不应在原型中完成，而应在创建原型的类中完成。

这些原型是从某种类型的类构建的，它告诉表单组件应该如何构建表单。您需要做的是更改此配置并设置复选框类型[的值选项](http://symfony.com/doc/current/reference/forms/types/checkbox.html#value)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:07:57.843

事实证明，您不能在每个 Symfony 的复选框中使用除布尔（0/1）值之外的任何人。

感谢您的回答。

# android - 如何使对话框的氛围透明

> ID：15731816
> 
> 赞同：0
> 
> 时间：2013-03-31T16:43:31.423
> 
> 标签：android, dialog

我想为我的游戏的暂停屏幕使用一个对话框。但对话框总是遮蔽下方的 Activity（对话框周围的氛围）。我怎样才能避免这种影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:51:49.797

Android 中的Afaik`Dialog`具有该默认行为，并且无法更改。根据您的要求，您应该使用[PopupWindow 之](http://developer.android.com/reference/android/widget/PopupWindow.html)类的东西。[这个](http://android-er.blogspot.in/2012/03/example-of-using-popupwindow.html)和[这个](http://androidresearch.wordpress.com/2012/05/06/how-to-create-popups-in-android/)是可以帮助您入门的教程的链接。

# javascript - 更快的 javascript 处理

> ID：15731817
> 
> 赞同：1
> 
> 时间：2013-03-31T16:43:39.747
> 
> 标签：javascript, jquery, performance, pagespeed

刚问了我的第一个问题，得到了很好的回应。很有帮助。帮助我创建了这段 javascript 以在同一页面上创建两个随机数。

```
<script>
window.onload = function(){
generateRandomNumber1();
generateRandomNumber2();
}</script>

<script>
function generateRandomNumber1(){
var n = 30;
var number = Math.floor(Math.random()*n)+1;
document.getElementById("random1").innerHTML = number;
}

function generateRandomNumber2(){
var n = 15;
var number = Math.floor(Math.random()*n)+1;
document.getElementById("random2").innerHTML = number;
}
</script> 
```

A 也使用这段脚本来显示两个 div 的时间延迟：

```
<script>
var toggle = function() {
$("#loadingContainer1").show();
}
setTimeout(toggle, 1000);
</script>
<script>
var toggle = function() {
$("#loadingContainer1").hide();
}
setTimeout(toggle, 8000);
</script> 
<script>
var toggle = function() {
$("#loadingContainer2").show();
}
setTimeout(toggle, 7000);
</script> 
<script>
var toggle = function() {
$("#loadingContainer2").hide();
}
setTimeout(toggle, 14000);
</script> 
```

我知道真的很麻烦，但它确实有效，而且我对自己完成大部分工作感到非常满意（在 Stack Overflow 上其他人的线程的帮助下）。

无论如何，这一切都有效，所以这不是我的问题，唯一的问题是，随机数生成器的工作速度非常慢，以至于出现的数字通常在生成随机数之前来来去去。在我刷新页面几次后，它们通常开始工作得更快一些，但是有什么办法可以加快这个过程，以便在页面加载的第一秒内生成随机数。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:51:14.723

那里有很多乱七八糟的代码，但也许是因为`onload`在页面完全加载之前不会触发它很慢。这是您的代码的重写，以更好地工作：

```
<script type="text/javascript">
    $(function() { // uses jQuery's "ready" handler
        $("#random1").html(Math.floor(Math.random()*30)+1);
        $("#random2").html(Math.floor(Math.random()*15)+1);
        $("#loadingContainer1").delay(1000).fadeIn(0).delay(7000).fadeOut(0);
        $("#loadingContainer2").delay(7000).fadeIn(0).delay(7000).fadeOut(0);
    });
</script> 
```

希望这可以帮助！

# java - 检查颜色是否已经在Java中的数组中

> ID：15731818
> 
> 赞同：0
> 
> 时间：2013-03-31T16:43:41.190
> 
> 标签：java, arrays, loops

我正在开发一个 Java 程序，该程序正在制作一组颜色，这些颜色已在另一个数组中用于绘制图片。我在编写创建这个新数组的代码时磕磕绊绊，同时还排除了已经添加到这个数组中的颜色。

对于我的代码出错的地方，我将不胜感激。

谢谢。我的代码如下：

```
public ArrayList<Color> getColorList()
{
    ArrayList<Color> getColorList;
    getColorList = new ArrayList<Color>();
    int index = 0;
    boolean colorAdded = false;
    for(Stroke stroke : drawing){
        while(index <= getColorList.size() && colorAdded == false) {
        if(getColorList.get(index) == stroke.getColor()){
            colorAdded = true;
        }
        else{
            index = index + 1;
        }
    }
    if(colorAdded == false){
            getColorList.add(stroke.getColor());
        }
    index = 0;
    colorAdded = false;
    }
    return getColorList();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:54:18.773

将颜色存储在 Set 中，您无需担心重复：

```
Set<Color> distinctColors = new HashSet<Color>();
distinctColors .add(stroke.getColor());

return new ArrayList<Color>(distinctColors ); 
```

上面的代码将返回一个不同颜色的数组列表。

编辑[评论后]：

Color 类应该实现 hashcode 和 equals 方法，如果 2 个对象相等，则它们具有相同的 hashcode，如果 2 个对象具有相同的 hashcode，则它们可能相等，也可能不相等。

# c++ - 纯虚方法返回一个对象？

> ID：15731820
> 
> 赞同：0
> 
> 时间：2013-03-31T16:43:46.793
> 
> 标签：c++

我正在尝试执行此纯虚拟方法：

```
 virtual MonLaser& getLaser() = 0; 
```

但我得到了各种各样的错误：

```
Error 6 error C2143: syntax error : missing ';' before '&'
Error 5 error C2253: 'MonMartien::getLaser' :
  pure specifier or abstract override specifier only allowed on virtual function
Error 13 error C4430: missing type specifier - int assumed. Note: C++ does not support default-int

Error 7 error C2433: 'MonMartien::MonLaser' : 'virtual' not permitted on data declarations 
```

我需要做一个纯虚拟方法，否则我无法访问我的`Laser`. 你有什么主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:47:08.493

在了解到该方法从类中返回自定义类型之后，`MonMartien`我现在有了不同的理论。

您会看到，此错误消息表明该类型在编译时是未知的。确保您在声明`MonLaser`之前有声明`MonMartien`。如果两者都在同一个标​​题中，请确保将声明`MonLaser`放在`MonMartien`. 如果它在一个单独的文件中，请确保包含头文件。

此外，请确保声明不在类内，因为这样该类型将不可见，因此类外的任何人都无法访问。

本质上，这一切都归结为：在哪里`MonLaser`定义？

# javascript - 如何提高动画的移动性能？

> ID：15731823
> 
> 赞同：0
> 
> 时间：2013-03-31T16:43:51.600
> 
> 标签：javascript, jquery, css, physics, interaction

所以，我建立了这个小的交互式轮盘赌：

[http://techgoldmine.com/roulette/](http://techgoldmine.com/roulette/)

我需要它在移动设备和桌面设备上工作。最初，我通过让用户与与图像重叠的 SVG 圆圈进行交互来处理交互，但出于测试目的，我已将其删除。

目前动画是使用带有 setInterval 函数的事件执行的：

```
 $('.roulette').bind('touchstart', function () {
            if (inMotion == true) {
                cleanUp();
            }
            intervalvar = setInterval(spinWheel, 24);
            // spinWheel();
            $(document).bind('touchend', function () {
                count = Math.abs(force)
                mouseup = 1;
            });
        }); 
```

计算完成后，我用这个函数旋转轮盘赌：

```
 function rotate(a) {
            roulette.css({
                '-webkit-transform': 'rotate(' + a + 'deg)',
                '-ms-transform': 'rotate(' + a + 'deg)',
                '-o-transform': 'rotate(' + a + 'deg)',
                '-moz-transform': 'rotate(' + a + 'deg)',
                'transform': 'rotate(' + a + 'deg)'
            });
        } 
```

它在浏览器中运行良好，但是在移动设备上却非常滞后。关于如何提高性能的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:16:20.513

不要对动画使用 setInterval。移动设备具有 CSS 动画功能，请使用 CSS 制作动画。但是，如果您确实需要制作 JS 动画，请使用 requestAnimationFrame 而不是 setInterval 并将您的帧与浏览器刷新同步。

# html - 悬停时的 CSS 过渡

> ID：15731835
> 
> 赞同：0
> 
> 时间：2013-03-31T16:44:30.053
> 
> 标签：html, css

我有个问题。当我将鼠标悬停在对象上时，我实际上尝试在 div 上进行转换。所以基本上我有一个 div，当我将鼠标悬停在 div 上时，它应该在它的顶部显示另一个 div，但是它应该是过渡的，所以悬停效果会更平滑。

如果我有这两个 div，怎么可能？

```
<div id="first">

  <div id="on-hover">

    <img src="example-image.png" />

  </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:51:21.357

```
#on-hover {
    opacity: 0;
    transition: opacity 0.5s;
    -webkit-transition: opacity 0.5s;
}
#first:hover #on-hover {
    opacity: 1;
} 
```

这只是关于动画。这里有一个更详细的例子：http: [//jsfiddle.net/ELa6X/](http://jsfiddle.net/ELa6X/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:53:07.393

您使用 CSS3 过渡：

```
#on-hover {
    opacity:0;
    /* Firefox */
    -moz-transition-property: opacity;
    -moz-transition-duration: 2s;
    -moz-transition-delay: 1s;
    /* WebKit */
    -webkit-transition-property: opacity;
    -webkit-transition-duration: 2s;
    -webkit-transition-delay: 1s;
    /* Opera */
    -o-transition-property: opacity;
    -o-transition-duration: 2s;
    -o-transition-delay: 1s;
    /* Standard */
    transition-property: opacity;
    transition-duration: 2s;
    transition-delay: 1s;
}
#on-hover:hover {
    opacity:1;
} 
```

完整的工作：http: [//jsfiddle.net/djwave28/CuNkZ/2/](http://jsfiddle.net/djwave28/CuNkZ/2/)

更多信息可以在这里阅读：[http](http://robertnyman.com/2010/04/27/using-css3-transitions-to-create-rich-effects/) ://robertnyman.com/2010/04/27/using-css3-transitions-to-create-rich-effects/ 我确实需要明确提到这在 IE9 及以下版本中可能不起作用. IE10 似乎根据文档顶部工作。如果需要，您可以使用 javascript 模拟效果，但问题是 CSS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T16:53:38.343

我很快模拟了一些可以用 css3 转换[演示 jsfiddle 完成的东西](http://jsfiddle.net/kevinPHPkevin/d8WjU/)

```
#on-hover {
  transition: opacity .25s ease-in-out;
  -moz-transition: opacity .25s ease-in-out;
  -webkit-transition: opacity .25s ease-in-out;
  opacity:0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T16:49:22.733

更平滑是指淡入吗？这是一个淡入的例子`#on-hover`。我[`pointer-events:none`](https://developer.mozilla.org/en/docs/CSS/pointer-events)习惯于忽略 hover on`<img>`并将事件传递给它的 parent `#on-hover`。

[jsFiddle](http://jsfiddle.net/Tyriar/rcLjJ/)

```
#first,
#on-hover {
    width:100px;
    height:100px;
}

#first {
    background-color:#F00;
}

#on-hover {
    opacity:0;
    background-color:#0F0;
    -webkit-transition:opacity .5s ease;
    -moz-transition:opacity .5s ease;
    transition:opacity .5s ease;
}

#on-hover:hover {
    opacity:1;
}

#on-hover img {
    pointer-events:none;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T16:52:20.393

使用伪选择器`:hover`。

```
#first:hover > #on-hover{
    opacity:1;
}

#on-hover{
    opacity:0;
    -webkit-transition: opacity 0.5s;
}

#first{
    width:300px;
    height:200px;
} 
```

[http://jsfiddle.net/charlescarver/V8PK3/1/](http://jsfiddle.net/charlescarver/V8PK3/1/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-31T16:53:40.163

我建议使用 jQuery 和[animate()](http://api.jquery.com/animate/)。你可以用 CSS 做，但是你会遇到旧浏览器的问题。

# android - display.setText("@string/sport"); 为什么不显示字符串“sport”？

> ID：15731836
> 
> 赞同：0
> 
> 时间：2013-03-31T16:44:32.967
> 
> 标签：android, string

```
display.setText("@string/sport"); 
```

sport 是在 Strings.xml 中声明的字符串函数，但是在应用程序中它没有显示？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:49:51.713

尝试：

```
display.setText(R.string.sport); 
```

`@resource/name`引用仅适用于 XML 代码。使用 Java 时，格式为`R.<type>.<name>`.

# angularjs - 防止验证禁用的表单字段

> ID：15731838
> 
> 赞同：6
> 
> 时间：2013-03-31T16:44:37.753
> 
> 标签：angularjs

**更新**

由于问题不清楚，我创建了 jsfiddles 来说明我的问题。

首先，我认为我无法停用表单字段的验证，但我了解到这可以通过 ng-required 指令来完成。

[http://jsfiddle.net/charms/YhVfN/23/](http://jsfiddle.net/charms/YhVfN/23/)

我的实际问题是密码字段未设置为原始状态。所有其他表单字段均已清除，但密码字段未清除。

要测试此行为，您可以：

*   单击“添加用户”按钮
*   添加电子邮件地址、名字、姓氏、密码和错误密码以进行确认
*   点击关闭按钮而不保存
*   点击编辑按钮

然后你会看到密码仍然设置。$setPristine 方法不会清除它。所有其他表单域都被清除。

[http://jsfiddle.net/charms/eP7T8/61/](http://jsfiddle.net/charms/eP7T8/61/)

**上一个（过时的问题）**

有人知道我如何停用禁用字段的验证吗？我正在使用 angularjs 1.1.3。

当我创建一个新用户时，我想验证所有字段，包括密码字段。但是，当我编辑用户时，我希望密码字段保持非活动状态且未经验证，除非用户通过复选框激活字段。

我目前的问题是，如果我将密码字段设置为 ng-disabled=true 验证仍在启动。我认为 ng-required=false 可能会有所帮助，但它没有。

我将密码字段设置为 ng-disabled=true 和 ng-required=false。

```
<input type="password" name="password" ng-model="password" placeholder="Password" ng-disabled="true" ng-required="false" required/> 
```

我将密码确认字段设置为 ng-disabled=true 和 ng-required=false。

```
<input type="password" name="passwordConfirm" ng-model="passwordConfirm" placeholder="Confirm Password" ng-disabled="true" ng-required="false" required field-equal="password"/> 
```

但仍在验证 required 和 field-equal 指令。如何防止对那些停用的字段进行验证？

在我的完整代码下方。

**HTML：**

```
<div id="user_list" class="listview_list">
<div id="user_row" class="listview_row" ng-repeat="u in users">
    <div id="user_username" class="listview_column"><span class="listview_mainfield">{{u.email}}</span></div>
    <div id="user_firstname" class="listview_column">{{u.firstName}}</div>
    <div id="user_lastname" class="listview_column">{{u.lastName}}</div>
    <button class="listview_row_button" ng-click="deleteUser(u.id, $index)">Delete</button>
    <button class="listview_row_button" ng-click="showEditScreen(u.id, $index)">Edit</button>
</div>
</div>
<div id="user_new" class="new_user">
<button class="new_user_button" ng-click="showAddScreen()">Add user</button>
</div>

<div id="user_mod" class="user_form" ng-show="userModScreenIsVisible">
<form name="mod_user" novalidate>
    <input type="email" name="email" ng-model="user.email" placeholder="E-Mail" ng-disabled="emailFieldDisabled" required email-available/>
    <div class="user-help" ng-show="mod_user.email.$dirty && mod_user.email.$invalid">Invalid:
        <span ng-show="mod_user.email.$error.required">Please enter your email.</span>
        <span ng-show="mod_user.email.$error.email">This is not a valid email.</span>
        <span ng-show="mod_user.email.$error.checkingEmail">Checking email...</span>
        <span ng-show="mod_user.email.$error.emailAvailable">Email not available</span>
    </div>
    <br/>
    <input name="firstName" ng-model="user.firstName" placeholder="Firstname" required/>
    <div class="user-help" ng-show="mod_user.firstName.$dirty && mod_user.firstName.$invalid">Invalid:
        <span ng-show="mod_user.firstName.$error.required">Please enter your firstname.</span>
    </div>
    <br/>
    <input name="lastName" ng-model="user.lastName" placeholder="Lastname" required/>
    <div class="user-help" ng-show="mod_user.lastName.$dirty && mod_user.lastName.$invalid">Invalid:
        <span ng-show="mod_user.lastName.$error.required">Please enter your lastname.</span>
    </div>
    <br/>
    <input type="checkbox" name="setPassword" ng-disabled="passwordCheckboxDisabled" ng-show="passwordCheckboxVisible"/>
    <span class="password_checkbox" ng-show="passwordCheckboxVisible">Change password</span>
    <br ng-show="passwordCheckboxVisible"/>
    <input type="password" name="password" ng-model="password" placeholder="Password" ng-disabled="passwordFieldDisabled" ng-required="passwordFieldRequired" required/>
    <div class="user-help" ng-show="mod_user.password.$dirty && mod_user.password.$invalid">Invalid:
        <span ng-show="mod_user.password.$error.required">Please enter a password.</span>
    </div>
    <br/>
    <input type="password" name="passwordConfirm" ng-model="passwordConfirm" placeholder="Confirm Password" ng-disabled="passwordFieldDisabled" ng-required="passwordFieldRequired" required field-equal="password"/>
    <div class="user-help" ng-show="mod_user.passwordConfirm.$dirty && mod_user.passwordConfirm.$invalid">Invalid:
        <span ng-show="mod_user.passwordConfirm.$error.required">Please enter a password.</span>
        <span ng-show="mod_user.passwordConfirm.$error.fieldEqual">Passwords do not match.</span>
    </div>
    <br/>
    <button class="button" ng-click="hideUserModScreen()">Close</button>
    <button class="button" ng-click="updateUserDetails()" ng-disabled="mod_user.$invalid" ng-show="updateUserDetailsButtonIsVisible">Update</button>
    <button class="button" ng-click="saveUserDetails()" ng-disabled="mod_user.$invalid" ng-show="saveUserDetailsButtonIsVisible">Save</button>
</form>
</div> 
```

**控制器：**

```
'use strict';

/*
* Controller to display and manipulate users.
*/
function UserCtrl($scope, User) {
// initialize as invisible
$scope.userModScreenIsVisible = false;
$scope.updateUserDetailsButtonIsVisible = false;
$scope.saveUserDetailsButtonIsVisible = false;
$scope.passwordCheckboxVisible = false;

// initialize as disabled or enabled
$scope.emailFieldDisabled = false;
$scope.passwordCheckboxDisabled = false;
$scope.passwordFieldDisabled = false;

// initialize required or not required
$scope.passwordFieldRequired = false;

// gather array index before opening edit
// screen (used in updateUserDetails method)
$scope.editIndex = null;

// display list with users
$scope.getList = function() {
    User.query(
        {}, //params
        function (data) { //success
            $scope.users = data.data;
        },
        function (data) { //failure
            console.log("Error occurred while getting list of users");
        });
}

// execute getList() when partial is loaded
$scope.getList();

// show edit screen if edit button is clicked
$scope.showEditScreen = function(id, index) {
    $scope.user = User.get({userId: id});
    $scope.editIndex = index;
    $scope.updateUserDetailsButtonIsVisible = true;
    $scope.userModScreenIsVisible = true;
    $scope.emailFieldDisabled = true;
    $scope.passwordCheckboxVisible = true;
    $scope.passwordFieldDisabled = true;
    $scope.passwordFieldRequired = false;
    $scope.passwordCheckboxDisabled = false;
    //console.log($scope.mod_user);
}

// show add screen if the add button is clicked
$scope.showAddScreen = function() {
    $scope.user = new User();
    $scope.saveUserDetailsButtonIsVisible = true;
    $scope.passwordCheckboxDisabled = true;
    $scope.passwordFieldRequired = true;
    $scope.userModScreenIsVisible = true;
    console.log($scope.mod_user);
}

// hide edit screen if close button is clicked
$scope.hideUserModScreen = function() {
    $scope.updateUserDetailsButtonIsVisible = false;
    $scope.saveUserDetailsButtonIsVisible = false;
    $scope.userModScreenIsVisible = false;
    $scope.emailFieldDisabled = false;
    $scope.passwordFieldDisabled = false;
    $scope.passwordFieldRequired = false;
    $scope.passwordCheckboxVisible = false;
    $scope.passwordConfirm = '';
    $scope.password = '';
    $scope.mod_user.$setPristine();
}

// update a user
$scope.updateUserDetails = function() {
    $scope.user.$update();
    angular.extend($scope.users[$scope.editIndex], $scope.user);
    $scope.editIndex = null;
    $scope.updateUserDetailsButtonIsVisible = false;
    $scope.userModScreenIsVisible = false;
    //console.log($scope.mod_user);
}

// save a new user
$scope.saveUserDetails = function() {
    $scope.user.$create();
    $scope.users.push($scope.user);
    $scope.saveUserDetailsButtonIsVisible = false;
    $scope.userModScreenIsVisible = false;
}

// delete a user
$scope.deleteUser = function(id, index) {
    User.delete({userId: id});
    $scope.users.splice(index, 1);
    $scope.userModScreenIsVisible = false;
}
} 
```

**指令：**

```
'use strict';

/* Directives */

angular.module('myApp.directives', []).
directive('appVersion', ['version', function (version) {
    return function (scope, elm, attrs) {
        elm.text(version);
    };
}]).

/*
 * Validate if the email address is available.
 */
directive('emailAvailable', function($http) { // available
    return {
        require: 'ngModel',
        link: function(scope, elem, attr, ctrl) {
            // push the validator on so it runs last.
            ctrl.$parsers.push(function(viewValue) {
                // set it to true here, otherwise it will not
                // clear out when previous validators fail.
                ctrl.$setValidity('emailAvailable', true);
                if(ctrl.$valid) {
                    // set it to false here, because if we need to check
                    // the validity of the email, it's invalid until the
                    // AJAX responds.
                    ctrl.$setValidity('checkingEmail', false);

                    // check if email is available or used
                    if(viewValue !== "" && typeof viewValue !== "undefined") {
                        $http.get('/api/user/email/' + viewValue + '/available')
                            .success(function(data, status, headers, config) {
                                ctrl.$setValidity('emailAvailable', true);
                                ctrl.$setValidity('checkingEmail', true);
                            })
                            .error(function(data, status, headers, config) {
                                ctrl.$setValidity('emailAvailable', false);
                                ctrl.$setValidity('checkingEmail', true);
                            });
                    } else {
                        ctrl.$setValidity('emailAvailable', false);
                        ctrl.$setValidity('checkingEmail', true);
                    }
                }
                return viewValue;
            });
        }
    };
}).

/*
 * Validate if two fields are equal (such as passwords match for example
 */
directive('fieldEqual', [function() {
    return {
        require: 'ngModel',
        link: function(scope, elem, attr, ctrl) {
            ctrl.$parsers.push(function(viewValue) {
                ctrl.$setValidity('fieldEqual', true);
                if(ctrl.$valid) {
                    scope.$watch(attr.fieldEqual, function() {
                        var compareValue = this.last;
                        if (viewValue !== compareValue) {
                            ctrl.$setValidity('fieldEqual', false);
                            return undefined;
                        } else {
                            ctrl.$setValidity('fieldEqual', true);
                            return viewValue;
                        }
                    });
                }
            });
        }
    };
}]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T22:57:50.257

似乎我对 $setPristine 所做的事情感到困惑。

我预计 $setPristine 不仅会将 $pristine 状态设置为 true，而且还会递归地清除我的表单字段。情况似乎并非如此。$setPristine 仅在全局和所有控件中将 $pristine 的状态设置为 true。

我一直在查看 Angularjs 页面上的 advancedForm 示例，并看到他们创建了一个 master 来预填充字段：

[http://docs.angularjs.org/cookbook/advancedform](http://docs.angularjs.org/cookbook/advancedform)

因此，作为解决方案，我刚刚创建了一个空主人：

[http://jsfiddle.net/charms/AhGDC/24/](http://jsfiddle.net/charms/AhGDC/24/)

**控制器**

```
var $scope;
var app = angular.module('myapp', []);

function UserCtrl($scope) {
$scope.showField = true;
$scope.reset = function() {
    var master = { name: '' };
    $scope.temp = angular.copy(master);
    $scope.user_form.$setPristine();
}  
} 
```

**HTML**

```
<div ng-app="myapp">
<div ng-controller="UserCtrl">
    <form name="user_form" novalidate>
        <input name="name" ng-model="temp.name" ng-show="showField" placeholder="Name" required/>
        <button class="button" ng-click="reset()">Reset</button>     
    </form>
    <p>
        Pristine: {{user_form.$pristine}}
    </p>
    <p>
    <pre>Errors: {{user_form.$error | json}}</pre>
    </p>
</div>
</div> 
```

所以我想这是要走的路。如果有人有更好的解决方案来重置表单字段，那么很高兴听到它。

我认为 Angularjs 可能有一个更优雅的解决方案。还查看 setPristine 源并没有透露任何其他信息。

# c++ - XCode4，保存文件

> ID：15731839
> 
> 赞同：2
> 
> 时间：2013-03-31T16:44:38.750
> 
> 标签：c++, xcode

我在 XCode4 上创建了几个文件，我想重命名它们。（C++ 编程）

但是，没有“另存为”，当我在“文档”上重命名文件时，它无法打开/运行正确的文件。

真的很愚蠢的问题，但是有谁知道如何在保持代码等相同的同时重命名文件？（将代码复制并粘贴到适当命名的文档中）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:33:45.047

另存为？只需创建新文件并重命名。

在 Xcode4 中，您可以轻松地重命名文件。

```
« Click on file
« Select show utility
« Rename file. 
```

有关清晰信息，请参见图像。![在此处输入图像描述](https://i.stack.imgur.com/yUbUg.png)

# java - 使用 cxf 从 wsdl 生成 java 代码会导致代码过大错误

> ID：15731840
> 
> 赞同：1
> 
> 时间：2013-03-31T16:44:43.770
> 
> 标签：java, web-services, wsdl, code-generation, cxf

我已经使用 cxf 2.7.3 生成了从 wsdl 到 java 的代码，但是在构建程序集时出现“代码太大”错误。表示其中一种方法已超过 java 64kb 限制。我确切地知道哪个类，对我来说这似乎是 cxf 中的错误。Actully Axis2 也是如此，所以我想知道是否有人知道如何解决这个问题。

我正在使用的代码[在](https://github.com/e-conomic/eco-api-ex.git)路径 eco-api-ex/examples/java/中提供

如何强制代码生成拆分大型生成方法？还是我应该为此使用一些外部工具？

```
[ERROR] \workspace\e-conomics\target\generated\src\main\java\com\e_conomic\Econo
micWebServiceSoap_EconomicWebServiceSoap12_Client.java:[34,23] error: code too l
arge 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T22:32:56.210

不要使用 -client 标志运行 wsdl2java。_Client.java 类只是一个示例类，用于展示如何使用生成的服务类和代理等。它通常不需要任何东西。那应该是唯一一个用这样的大方法生成的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:48:19.260

那里有一个 3MB 的 WSDL 文档。（难怪我的浏览器在我试图查看那个大小的通用 XML 文档时有点不高兴。）它定义了大约 3000 个元素；还有 3k 条消息和 4.5k 次操作。我不知道你到底在什么地方达到了极限（在一些地方构建了特定类型的所有实体的注册表），但这并不重要。对于大多数代码来说，它太大了，无法正常处理。（您达到的限制似乎是方法的字节码总大小的限制；达到该限制通常表明其他地方出现严重错误：在这种情况下，它是破坏地堡的 WSDL 文档。）

构建一个包含更小的元素、消息和操作集的精简版本将是一个绝妙的主意。将该缩减版本放在 Maven 可以找到的存储库中（例如，在 中`src/main/wsdl`）也很有意义，因为它会阻止您在每次构建时再次下载该 3MB 文档。

# ios - 在ios中抓取像素矩形的最有效方法是什么？

> ID：15731844
> 
> 赞同：0
> 
> 时间：2013-03-31T16:45:18.697
> 
> 标签：ios, uiimage, pixel

我有以下代码试图测试像素矩形中的每个像素

px, py = 触摸位置
dx, dy = 要测试的矩形的大小

```
UIImage *myImage; // image from which pixels are read
int ux = px + dx;
int uy = py + dy;
for (int x = (px-dx); x <= ux; ++x)
{
    for (int y = (py-dy); y <= uy; ++y)
    {
        unsigned char pixelData[] = { 0, 0, 0, 0 };
        CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
        CGContextRef context = CGBitmapContextCreate(pixelData, 1, 1, 8, 4, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
        CGImageRef cgimage = myImage.CGImage;
        int imageWidth = CGImageGetWidth(cgimage);
        int imageHeight = CGImageGetHeight(cgimage);
        CGContextDrawImage(context, CGRectMake(-px, py - imageHeight, imageWidth, imageHeight), cgimage);
        CGColorSpaceRelease(colorSpace);
        CGContextRelease(context);

        // Here I have latest pixel, with RBG values stored in pixelData that I can test
    }
} 
```

内部循环中的代码正在抓取位置 x, y 处的像素。有没有更有效的方法从 UIImage (myImage) 中从 (x-dx,y-dy)、(x+dx,y+dy) 中获取整个像素矩形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:12:11.710

哇，你的答案很简单。

问题是您正在为您扫描**的每个像素**创建一个全新的位图上下文。只创建一个位图上下文是昂贵的，并且连续数千次这样做对性能非常不利。

首先只需创建一个位图上下文（带有自定义数据对象），然后扫描该数据。会快很多

```
UIImage *myImage; // image from which pixels are read
CGSize imageSize = [myImage size];    

NSUInteger bytesPerPixel = 4;
NSUInteger bytesPerRow = bytesPerPixel * imageSize.width;
NSUInteger bitsPerComponent = 8;

unsigned char *pixelData = (unsigned char*) calloc(imageSize.height * imageSize.width * bytesPerPixel, sizeof(unsigned char))
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(pixelData, imageSize.width, 1imageSize.height bitsPerComponent, bytesPerPixel, colorSpace, kCGImageAlphaPremultipliedLast);
CGContextDrawImage(context, CGRectMake(0, 0, imageSize.width, imageSize.height), myImage.CGImage);

// you can tweak these 2 for-loops to get whichever section of pixels from the image you want for reading.

for (NSInteger x = 0; x < imageSize.width; x++) {

  for (NSInteger y = 0; y < imageSize.height; y++) {

       int pixelIndex = (bytesPerRow * yy) + xx * bytesPerPixel;

       CGFloat red   = (pixelData[pixelIndex]     * 1.0) / 255.0;
       CGFloat green = (pixelData[pixelIndex + 1] * 1.0) / 255.0;
       CGFloat blue  = (pixelData[pixelIndex + 2] * 1.0) / 255.0;
       CGFloat alpha = (pixelData[pixelIndex + 3] * 1.0) / 255.0;
       pixelIndex += 4;

       UIColor *yourPixelColor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];

    }
  }
}

// be a good memory citizen
CGColorSpaceRelease(colorSpace);
CGContextRelease(context);
free(pixelData); 
```

# sql - 日期时间的 SQL 查询

> ID：15731849
> 
> 赞同：0
> 
> 时间：2013-03-31T16:45:50.707
> 
> 标签：sql, sql-server

我正在创建一个游戏，如果与这些控件关联的游戏周的 DateTime 距离当前时间 1 小时或更长时间，则需要禁用控件。

我需要在 SQL Server 2008 中创建一个查询，该查询将带回比当前时间早 1 小时或更早的所有 gameweekID。

所以一个例子是：

GameweekID 1 - FixtureTime 31/03/2013 10:00（在数据库中存储为 DateTime）

因此，如果当前时间和日期小于 31/03/2013 9:00，它将出现在我的查询中。

我目前的尝试是：

```
SELECT * FROM Fixture WHERE fixtureDate > '2013/03/31 9:00' 
```

但这显然没有考虑到之前的 1 小时。

我希望这是有道理的，写起来很混乱！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:49:05.093

这将在过去一小时内为您提供：

**MySQL**

```
SELECT columnList 
FROM fixture
WHERE fixtureDate BETWEEN DATE_SUB(NOW(), INTERVAL 1 HOUR) AND NOW() 
```

**SQL 服务器**

```
SELECT columnList
FROM fixture
WHERE fixtureDate BETWEEN DATEADD(month, 1, GETDATE()) AND GETDATE() 
```

这将为您提供超过 1 小时的时间：

**MySQL**

```
SELECT columnList 
FROM fixture
WHERE fixtureDate < DATE_SUB(NOW(), INTERVAL 1 HOUR) 
```

**SQL 服务器**

```
SELECT columnList
FROM fixture
WHERE fixtureDate < DATEADD(month, 1, GETDATE()) 
```

*参考*

*   [SQL 服务器](http://msdn.microsoft.com/en-us/library/ms186819.aspx)
*   [MySQL](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:52:07.703

如果您使用的是 SQL Server，您将使用[DATEDIFF](http://msdn.microsoft.com/en-gb/library/ms189794.aspx)

```
SELECT * FROM Fixture WHERE DATEDIFF(hour, fixtureDate, GetDate()) >= 1 
```

# android - 单击 listViewItem 时显示带有单选按钮的 alertDialog

> ID：15731850
> 
> 赞同：8
> 
> 时间：2013-03-31T16:45:52.047
> 
> 标签：android, android-listview, android-spinner, android-alertdialog, onitemclicklistener

我有一个包含 2 个项目的 listView，这两个项目是“秒”和“分钟”当我按“秒”时，我想要一个 alertDialogBox 打开并显示 5,10,15,... 秒。按分钟时也一样

像这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/4e8eA.png)

但是我在实现它时遇到了麻烦，因为我不太了解它是如何工作的。这是我的代码：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class SettingsActivity extends Activity {

    ListView listView = (ListView) findViewById(R.id.settingsList);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.settings);

        String[] values = new String[] { "Seconds", "Minutes" };

        // Define a new Adapter
        // First parameter - Context
        // Second parameter - Layout for the row
        // Third parameter - ID of the TextView to which the data is written
        // Forth - the Array of data

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, android.R.id.text1, values);

        // Assign adapter to ListView
        listView.setAdapter(adapter);

        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {
                AlertDialogView();
            }
        });

    }

    private void AlertDialogView() {
        final CharSequence[] items = { "15 secs", "30 secs", "1 min", "2 mins" };

        AlertDialog.Builder builder = new AlertDialog.Builder(ShowDialog.this);//ERROR ShowDialog cannot be resolved to a type
        builder.setTitle("Alert Dialog with ListView and Radio button");
        builder.setSingleChoiceItems(items, -1,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int item) {
                        Toast.makeText(getApplicationContext(), items[item],
                                Toast.LENGTH_SHORT).show();
                    }
                });

        builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                Toast.makeText(ShowDialog.this, "Success", Toast.LENGTH_SHORT)
                        .show();
            }
        });

        builder.setNegativeButton("No", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                Toast.makeText(ShowDialog.this, "Fail", Toast.LENGTH_SHORT)
                        .show();
            }
        });

        AlertDialog alert = builder.create();
        alert.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:56:40.423

该错误很清楚，您缺少一个`semicolon`. 你的代码应该像

```
listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) 
        {
           AlertDialogView();
        }//ERROR I'm GETTING HERE is Syntax error, insert ";" to complete Statement
     }; 
```

上面的代码应该在`onCreate()`. 在您提供的代码中，它漂浮在不知名的地方！

# linux - 使用 bash 脚本读取数字

> ID：15731851
> 
> 赞同：3
> 
> 时间：2013-03-31T16:45:59.037
> 
> 标签：linux, bash

编写一个 bash 脚本，该脚本将从用户那里读取 10 个整数并将输出附加到文件“XYZ”中。不允许在脚本中多次使用“read”语句。

```
#! /bin/bash

for i in {0,1,2,3,4,5,6,7,8,9}
do
    read "i"
    echo "0,1,2,3,4,5,6,7,8,9" >> XYZ
done 
```

我是刚开始学这个的学生，感觉很难，你能给我一些建议吗？我认为这应该有很多问题。非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T17:09:36.637

让我们看看你已经拥有什么。您的`for`循环执行 10 次`read`命令迭代，并且`read`仅在脚本中出现一次。您还可以将输出附加 ( `>>`) 到文件`XYZ`中。

但是，您不应该将相同的变量用于循环计数器并读取输入。并且序列可以缩短为`{0..9}`。

您仍然缺少的是检查用户输入是否实际上是整数的条件。而且您可能应该输出您读取的值，而不是 string `"0,1,2,3,4,5,6,7,8,9"`。

* * *

在更一般的说明中，您可能会发现以下指南有助于学习`bash`：

*   [Bash 初学者指南](http://tldp.org/LDP/Bash-Beginners-Guide/html/)
*   [高级 Bash 脚本指南](http://tldp.org/LDP/abs/html/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T17:12:39.200

```
#!/bin/bash
echo 'Input 10 integers separated by commas:'
read line
nums=`echo -n "$line" | sed "s/,/ /g"`
for i in $nums; do
    echo "$i" >> XYZ
done 
```

如果您输入`9,8,7,6,5,4,3,2,1,0`，这些数字将被附加到`XYZ`文件中，每一个都在一个新行中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T17:12:54.497

将 10 个（或更少，或更多）整数读入一个数组，输出不超过前 10 个：

```
read -p '10 integers please: ' -a number 
IFS=,
echo  "${number[*]:0:10}" >> XYZ 
```

输入：

```
1 2 3 4 5 6 7 8 9 0 
```

输出，逗号分隔：

```
1,2,3,4,5,6,7,8,9,0 
```

# codeigniter - codeigniter 分页 total_rows 动态

> ID：15731855
> 
> 赞同：0
> 
> 时间：2013-03-31T16:46:22.413
> 
> 标签：codeigniter, pagination

这是我的代码和注释行中的问题。

```
public function sonuc()
{
    $config['total_rows'] = 5  //i want to set here count of result instead of digit. count($data['sonuc']) does not work.. what will i do?
    $config['per_page'] = 2;
    $data['sonuc'] = $this->emlak_model->arama(
                        $config['per_page'], 
                        $this->uri->segment(3,0),
                        $this->input->post('semt'),
                     ); 
} 
```

如果我用数字手动执行，分页将起作用，但我想自动获取查询的总行，我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:25:54.173

如果您想在每次页面加载时对您的字段进行新计数，则必须使用查询计数来计算所有字段：

```
$total_rows = $this->db->count_all_results('mytable'); 
```

检查[Codeigniter 文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html#select)

所以根据你的代码：

```
public function sonuc()
{
    $config['total_rows'] = $this->db->count_all_results('mytable'); //put your table name here 
    $config['per_page'] = 2;
    $data['sonuc'] = $this->emlak_model->arama(
                        $config['per_page'], 
                        $this->uri->segment(3,0),
                        $this->input->post('semt'),
                     ); 
} 
```

# android - 插入空表时出现 SQLite 错误“列 _id 不是唯一的”

> ID：15731865
> 
> 赞同：2
> 
> 时间：2013-03-31T16:47:10.790
> 
> 标签：android, sql, sqlite

我有一个有 4 个字段的表：`_id`, `to`, `from`,`hidden`

尝试插入以下值时：

```
_id=167 from=1311005879000 to=1311005879000 hidden=0 
```

在我的表中，我得到一个**SQLiteConstraintException**说明

```
'column _id is not unique (code 19)' 
```

为了找到这个问题的原因，我尝试查询表的大小，发现它是 0，所以我不知道这是从哪里来的。

也许我没有正确理解错误？

编辑：一些代码！

```
try {
    mDatabase.insertOrThrow("groups", null,
            mContentValues);
} catch (SQLException e) {
    e.printStackTrace();
} 
```

创建SQL：

```
CREATE TABLE IF NOT EXISTS groups(_id LONG PRIMARY KEY,hidden INTEGER,from LONG,to LONG 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T16:56:00.037

> 'column _id 不是唯一的（代码 19）'

所以你违反了`UNIQUE`约束。这是**SQLiteConstraintException**的原因。您的`_id`列很可能是**主键**，并且主键隐式分配`UNIQUE`了约束，即没有两行可以具有相同的主键。

您正在尝试插入`_id`已在 db 中或`PK`已分配给`NULL`.

> 我尝试查询表的大小，发现它是 0，所以我不知道这是从哪里来的。

我认为你的查询被破坏了，因为你`Exception`说了一切，如果某个地方没有问题，它就不能被抛出。

## 更新：

如果您没有被分配`NULL`到`PK`并且您的表也有 0 条记录，那么问题可能就在这里：

```
mDatabase.insertOrThrow("groups", null, mContentValues); 
```

您被分配`NULL`给 ColumnHack 作为`insert()`您不应该的方法的第二个参数。在 SQLite 中，每一行必须至少指定一列。它需要一列可以安全地分配给`NULL`.

# windows-8 - 在 Windows 8 应用程序中加载基础数据

> ID：15731869
> 
> 赞同：0
> 
> 时间：2013-03-31T16:48:00.923
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我是 Windows 8 应用程序开发的新手。我正在尝试移植我在 .NET 中编写的旧应用程序。此应用程序使用存储为四个 XML 文件的基本数据，这些文件作为“资源”添加到项目中，并使用 System.Xml.Serialization.XmlSerializer 对它们进行反序列化。

使用 Windows 8 应用商店应用程序传送此类数据的最佳方式是什么？只是将它们放在资产文件夹中？

在 Windows 8 应用程序中加载和绑定此类数据的最佳方式是什么？

我很感激你能给我的一切，一个直接的答案，有用的链接或关于 Windows 8 中数据加载和绑定的视频......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:04:11.083

> 使用 Windows 8 应用商店应用程序传送此类数据的最佳方式是什么？只是将它们放在资产文件夹中？

是的，将它们放在您的资产文件夹中。请务必将构建属性设置为“内容”+“复制到输出”。完成此操作后，您可以使用以下 url 从您的应用程序访问它们：`ms-appx:///Assets/myxmlfile.xml`

例如：

```
StorageFile xmlFile = await StorageFile.GetFileFromApplicationUriAsync
    (new Uri("ms-appx:///Assets/myxmlfile.xml")); 
```

以上为您提供了一个文件对象，您可以使用它来读取您的文件。显然，由于您正在从`Assets`文件夹中读取，因此您的文件将是只读的。

> 在 Windows 8 应用程序中加载和绑定此类数据的最佳方式是什么？

至于数据绑定，这可能有点太大而无法在一个答案中涵盖。您可能想看看这个[Windows 8 数据绑定示例](http://code.msdn.microsoft.com/windowsapps/Data-Binding-7b1d67b5)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:29:32.840

您可以在商店应用程序中使用资源，这里是示例：

```
public static string GetXmlContentsFromResource(Assembly asm, string dataName)
{
  string contents = "";

  Stream stream = asm.GetManifestResourceStream(asm.GetName().Name + "." + dataName);
  using (StreamReader reader = new StreamReader(stream))
  {
    contents = reader.ReadToEnd();
  }
  return contents;
} 
```

您应该将 XML 文件添加到解决方案并将其标记为“嵌入式资源”，如果您将 XML 文件放在子目录中，例如如果文件夹名为 Data 并且 xml 文件是 Data1.xml 那么您应该像这样将参数 dataName 发送到上述方法“数据.Data1.xml”。

对于数据绑定，最好的方法是将 XML 反序列化为反映 XML 内容的对象或对象列表。

# ios - 在 ViewController iOS 之前加载 DataController

> ID：15731871
> 
> 赞同：0
> 
> 时间：2013-03-31T16:48:06.590
> 
> 标签：ios, objective-c

我有 2 个控制器，1 个是从 JSON 加载数据，另一个是一个简单的 UITableViewController。我的问题是视图是在数据之前加载的。如何在我的表格之前加载数据？我是 Objective-C OOP 的新手：/

编码

```
#import "MasterViewController.h"

#import "DetailViewController.h"

#import "DealsDataController.h"

#import "Deals.h"

@implementation MasterViewController

- (void)awakeFromNib
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        self.clearsSelectionOnViewWillAppear = NO;
        self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
    }
    [super awakeFromNib];

    self.dataController = [[DealsDataController alloc] init];
    NSLog(@"this is the awake from nib count %i",[self.dataController countOfList]);

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view, typically from a nib.

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"did this count the list %i",[self.dataController countOfList]);
    return [self.dataController countOfList];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"DealCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    Deals *dealAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
    [[cell textLabel] setText:dealAtIndex.name];

    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return NO;
}

/*
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [_objects removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        NSDate *object = _objects[indexPath.row];
        self.detailViewController.detailItem = object;
    }
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSDate *object = _objects[indexPath.row];
        [[segue destinationViewController] setDetailItem:object];
    }
}

 */
@end 
```

和数据控制器

```
#import "DealsDataController.h"
#import "Deals.h"

@implementation DealsDataController
@synthesize masterDealsList = _masterDealsList;

-(id)init {
    if (self = [super init]) {
        [self initializeDataList];
        return self;
    }
    return nil;
}

-(NSMutableArray *)masterDealsList {
    if (!_masterDealsList) {
        _masterDealsList = [[NSMutableArray alloc] init];
    }
    return _masterDealsList;
}

-(void)setMasterDealsList:(NSMutableArray *)newList {
    if (_masterDealsList != newList) {
        _masterDealsList = newList;
    }
}

- (void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSError* error;
    NSDictionary *json = [NSJSONSerialization
                          JSONObjectWithData:responseData //1
                          options:kNilOptions
                          error:&error];

    _deals = [json objectForKey:@"deals"]; //2

    NSLog(@"deals: %@", _deals);
    NSArray *dealName = [_deals valueForKey:@"deal_name"];
    NSLog(@"deals Name: %@", dealName);

    for (int i = 1;i <= [_deals count]; i++) {
    NSDictionary* dict = [_deals objectAtIndex:i-1];
    Deals *deal =[[Deals alloc] initWithProdID:1 name:[dict valueForKey:@"deal_name"] description:[dict objectForKey:@"deal_description"] price:10.00 specs:@"specs" terms:@"terms"];
    [self addDealWithDeal:deal];

    NSLog (@"masterListCount %i ", [self countOfList]);

    }

}

-(void)initializeDataList {
    //NSDate *today = [NSDate date];
    dispatch_async(sweetDealsQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL:sweetDealsURL];
        [self performSelectorOnMainThread:@selector(fetchedData:)
                               withObject:data waitUntilDone:YES];
    });

}

-(NSUInteger)countOfList {

    return [self.masterDealsList count];

}

-(Deals *)objectInListAtIndex:(NSUInteger)theIndex {

    return [self.masterDealsList objectAtIndex:theIndex];
}

-(void)addDealWithDeal:(Deals *)deal {

      [self.masterDealsList addObject:deal];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:00:50.690

在 MVC 中，通常每个视图都有一个视图控制器。因此，单个视图控制器将负责在一个视图上显示的所有内容。当然，您可以拥有辅助类，或使用子视图控制器（例如小部件），或者如果您正在为 iPad 开发，您可能有两个视图控制器（一个用于侧菜单，一个用于主视图）。

我建议您执行以下操作

1.  使您的 DataController 成为一个子类，`NSObject`而不是`UIViewController`. 据我了解，它是一个数据访问类，不负责 UI。
2.  在`viewDidLoad`您的 MasterViewController 的方法中，分配和初始化一个`DataController`对象并触发其数据加载方法。
3.  设置回调，以便在获取数据时，使用数据调用*MasterViewController*上的方法。或者将 MasterViewController 设置为 DataController 的委托，完成后，将数据分配给 MasterViewController 的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:56:06.540

我猜你需要在初始化你的 TableViewController 之前执行数据加载，当你得到响应数据时加载 TableViewController。为此，[请参阅这篇文章](https://stackoverflow.com/questions/15614901/stop-appdelegate-from-loading-viewcontroller-while-calling-another-method/15615103#15615103)如何等到某个方法完成执行，在该方法中执行数据加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:59:46.593

在加载数据时显示带有活动指示器覆盖的空白表格视图是可以的。数据加载完成后，您可以使用数据重新加载 tableview 并删除活动指示器。[tableview reloaddata] 将调用所有数据源委托方法，然后将您的数据包含在其中。

# java - 用于检查输入流阅读器的 Java 循环

> ID：15731872
> 
> 赞同：0
> 
> 时间：2013-03-31T16:48:06.930
> 
> 标签：java, loops, inputstream, bufferedreader, netbeans-7.3

我有一个服务器和client.java，它可以通过输入和输出流双向发送和接受消息，但是一旦有连接，就会发送一条消息，然后服务器关闭它自己，到目前为止，我已经放置了缓冲阅读器等等。在一个 finally 块中，该块仅在 e == true 时激活（e 表示退出，因此我可以在需要时停止它）但在发送/接收消息后它仍然停止构建第一个问题如何阻止它关闭它自己？第二个问题如何将输入流阅读器放入循环中以不断测试来自 client.java 的输入？

## 客户端.java

```
package client;

import java.io.*;
import java.net.*;
import java.io.BufferedReader;

    // Variables declaration - do not modify                     
/**
 *
 * @author ****
 */
public class Client extends javax.swing.JFrame {

;

    public Client() {
        initComponents();
    }
    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {                                            
    jTextField1.setText("");
    input = jTextField1.getText();
    send(input);     
    }                                           
    int port = 1234;
    String hostname = "localhost";
    String input,output;

    public void send(String text) {   
    try {
         Socket skt = new Socket(hostname, port);           /*Connects to server*/

         BufferedReader in = new BufferedReader(new
         InputStreamReader(skt.getInputStream()));          /*Reads from server*/
         System.out.println("Server:" + in.readLine());

         PrintWriter out = new PrintWriter(skt.getOutputStream(), true);
         out.println(text);                                   /*Writes to server*/
         out.close();    /*Closes all*/
         in.close();
         skt.close();

      }
      catch(Exception e) {
         System.out.print("Error Connecting to Server\n");
      } 
    }
    public void startUP() {

    }
    public static void main(String args[]) {
     Client c = new Client();
     c.startUP();
     c.send("Server is online");
      new Client().setVisible(true);

   }

    // Variables declaration - do not modify                     
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration                   
} 
```

## 服务器.java

```
package server;

import java.io.*;
import java.net.*;

class Server {
    /*
     To send string to client use "out.print(data)"
     To use info sent from client use "in.readLine()"
     */
        int port = 1234;
    String input,output;
    boolean e = false;
    String question = "how are you";
    String answer = "i am fine";

    public void send(String text) {
        ServerSocket srvr = null;
        Socket skt = null;
         PrintWriter out = null;
         BufferedReader in = null;
    try {
         srvr = new ServerSocket(port);
         skt = srvr.accept();                       /*Waiting for Connection from client*/
         System.out.println("Connection = true");

         out = new PrintWriter(skt.getOutputStream(), true);
         out.println(text);                                                  /*Write/Send to Client*/

         in = new BufferedReader(new
         InputStreamReader(skt.getInputStream()));                   /*Read from Client*/
         System.out.println("Client:" + in.readLine());
         input = in.readLine();

      } catch( Exception e) {
         System.out.println("Error Connecting\n");
      } finally {
        if(e == true){
        try {
         out.close();
         in.close();
         skt.close();               /*Closes all*/
         srvr.close();

         } catch (IOException e) {
        }
    }
    }
    }

public void testFor() {
    if(input.equals(question)){ send(answer); }
}

   public static void main(String args[]) {
       Server s = new Server();

       s.send("Client is online");  //sends a message to client
      // s.testFor();

   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:44:52.013

好的开始，停止一个while循环，在某些时候你必须说这个陈述是假的或真的（取决于你首先使用什么）。所以，如果你说`while(true)`。这将永远是正确的，因为没有什么可比较的，因此它将创建无限循环，永远持续下去。但是，如果您说我们做类似的事情

```
 `while(x=true)'
  {
     x=false;
  } 
```

这将确保您停止 while 循环并且您不会再次输入它。如何？好吧，我们在 x 为真的条件下进入 while 循环。一旦我们进入那个循环，我们就声明 x 为假。因此在下一次迭代中 x 将为假，因此我们不会进入 while 循环。有点直截了当，不是吗？
至于问题本身，我建议阅读[这篇](http://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html)文章。它非常清晰且布局合理，它将向您展示如何编写好的基于套接字的程序:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:28:08.033

第一个问题是从方法中调用 bufferreader、printwriter 等，然后在可以随时激活的单独方法中使用 .close。

对于我的第二个问题，我发现我可以使用 while 循环：

```
 while(true) {
//code...
    } 
```

谢谢没人帮忙。

# python - 来自不是由 Python 绘制的字体的图像

> ID：15731876
> 
> 赞同：2
> 
> 时间：2013-03-31T16:48:15.640
> 
> 标签：python, truetype

我编写了一个 Python 脚本，用于从字体中绘制字符、导出并将其发送到 CGI 界面进行显示。但是，它不起作用。代码如下：

```
#!/usr/bin/python
# coding: UTF-8
def getStringImage(text, font, size=40, color=[0,0,0]):
    import Image, ImageDraw, ImageFont
    img = Image.new("RGBA", (size, size), "white")
    draw = ImageDraw.Draw( img )
    draw.ink = color[0] + color[1]*256 + color[2]*256*256
    font = ImageFont.truetype(font, size)
    draw.text( (0,0), text, font=font )

    data = img.getdata()
    newData = list()
    for item in data:
        if (item[0], item[1], item[2]) == (255, 255, 255):
            newData.append((255, 255, 255, 0))
        else:
            newData.append((item[0], item[1], item[2], 255))
    img.putdata(newData)
    return img

text = ""  # U+E010
font = "hzcdp01b.ttf"
size = 100
color = [0, 0, 0]

img = getStringImage( text.decode('UTF-8'), font, size, color )
print 'Content-Type: image/png'
print 'Content-Disposition: inline; filename="image.png"'
print
import cStringIO
f = cStringIO.StringIO()
img.save(f, "png")
f.seek(0)
print f.read() 
```

上面使用的字体是从这个系统中提取的：http: [//j.mp/14y6MAL](http://j.mp/14y6MAL)，这里是单个备份文件：http: [//j.mp/122PGLe](http://j.mp/122PGLe)

如果使用其他字体（例如“mingliu.ttc”和字符“人”），它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:17:22.110

确保您要显示的字符实际映射到字形。在查看时`hzcdp01b.ttf`，它似乎没有字符映射表：

```
> fc-query hzcdp01b.ttf
Pattern has 15 elts (size 16)
    family: "hzcdp01b"(s)
    slant: 0(i)(s)
    weight: 80(i)(s)
    width: 100(i)(s)
    spacing: 100(i)(s)
    foundry: "unknown"(s)
    file: "hzcdp01b.ttf"(s)
    index: 0(i)(s)
    outline: FcTrue(s)
    scalable: FcTrue(s)
    charset: 
(s)
    lang: (s)
    fontversion: 69632(i)(s)
    fontformat: "TrueType"(s)
    decorative: FcFalse(s) 
```

# android - 旋转设备时磁场测量的奇怪行为

> ID：15731877
> 
> 赞同：6
> 
> 时间：2013-03-31T16:48:26.877
> 
> 标签：android, orientation, android-sensors, magnetometer, indoor-positioning-system

**情况：**

我正在尝试通过指纹识别利用建筑物内的磁场变化来创建一个室内定位系统。作为传感器，我使用我的手机 Galaxy Nexus。

基本上，获取我的指纹的想法是分别测量 x、y 和 z 方向的磁场，并通过移动设备的方向旋转矢量以将矢量带入世界坐标系。为了定位某人，他还测量了磁场，旋转矢量并将其发送到服务器，我将在服务器上运行我的定位算法。

**我的问题：**

当我在不同方向测量同一点的磁场时，旋转矢量后不会得到相同的结果。甚至场强也不一样。

为了证明这一点，我在同一位置进行了四次测量，并将手机绕着他的 z 轴（[标准 Android 规范](http://developer.android.com/reference/android/hardware/SensorEvent.html "关联")）分别逆时针旋转了 90、180 和 270 度。结果可以在该“表”和下面的 Matlab 图（点击链接）上看到（如果您想获得其他视图，请告诉我）

*编辑：* 更准确地说：我真正做的是我定义了我自己的坐标系，称为房间坐标系。我拿了房间的一面墙，把它定义为北。当它平放在桌子上时，我的手机外星人与那面墙（在第一个位置）的 y 轴。因此，正 z 轴指向天空，x 轴定义为 90 度角的墙壁。以“Raw”命名的向量是手机的原始值，因此它们位于手机的坐标系中。以“Rotated”命名的向量被旋转到该“房间坐标系”中。在图中，虚线向量是原始向量，实线向量是旋转向量。

```
╔═════════════╦════════╦════════╦════════╦══════════╗
║ Vector      ║    X   ║   Y    ║    Z   ║ Strength ║
╠═════════════╬════════╬════════╬════════╬══════════╣
║ 0°Raw       ║  17.55 ║   8.21 ║ -36.83 ║  41.62   ║
║ 0°Rotated   ║  17.55 ║   8.21 ║ -36.83 ║  41.62   ║
║ 90°Raw      ║  15.74 ║ -11.36 ║ -36.86 ║  41.66   ║
║ 90°Rotated  ║  11.36 ║  15.74 ║ -36.86 ║  41.66   ║
║ 180°Raw     ║ -65.06 ║ -16.18 ║ -44.79 ║  80.63   ║
║ 180°Rotated ║  65.06 ║  16.18 ║ -44.79 ║  80.63   ║
║ 270°Raw     ║   6.38 ║  61.95 ║ -46.37 ║  77.64   ║
║ 270°Rotated ║  61.95 ║  -6.38 ║ -46.37 ║  77.64   ║
╚═════════════╩════════╩════════╩════════╩══════════╝ 
```

![在此处输入图像描述](https://i.stack.imgur.com/Cs3En.png) ![在此处输入图像描述](https://i.stack.imgur.com/B9U4x.png)

正如您所看到的，即使在旋转它们之后它们也并不真正匹配。你知道为什么会这样吗？有什么我可能还没有考虑到的吗？提前非常感谢！

*编辑2*：

**第二次实验**

我做了另一个实验，结果更好，但仍然没有我预期的那么好。这一次，方向并不像应有的那样恒定。这次我在户外进行了测量。我将 y 轴疏远到真北并将其平放在地面上。我将它逆时针旋转了大约 3 次 90 度。我用另一台相机拍摄了手机​​位置的照片，并用 Photoshop 测量了实际旋转。您可以在表格和下面的图表中看到结果：

```
╔═════════════╦════════╦════════╦════════╦══════════╗
║ Vector      ║    X   ║   Y    ║    Z   ║ Strength ║
╠═════════════╬════════╬════════╬════════╬══════════╣
║ 0°Raw       ║   1.22 ║  20.31 ║ -57.53 ║  61.02   ║
║ 0°Rotated   ║   1.22 ║  20.31 ║ -57.53 ║  61.02   ║
║ 104°Raw     ║  25.92 ║   5.66 ║ -57.53 ║  63.35   ║
║ 104°Rotated ║ -11.93 ║  23.70 ║ -57.53 ║  63.35   ║
║ 204°Raw     ║   5.42 ║ -16.86 ║ -59.67 ║  62.24   ║
║ 204°Rotated ║ -11.90 ║  13.12 ║ -59.67 ║  62.24   ║
║ 290°Raw     ║ -12.18 ║   0.73 ║ -57.85 ║  59.12   ║
║ 290°Rotated ║  -3.64 ║  11.64 ║ -57.85 ║  59.12   ║
╚═════════════╩════════╩════════╩════════╩══════════╝ 
```

![在此处输入图像描述](https://i.stack.imgur.com/aME9L.png) ![在此处输入图像描述](https://i.stack.imgur.com/l5Ytd.png)

**补充笔记：**

这些值是几秒钟内的平均值。所以这不是噪音的问题。

我知道我不能使用该函数`getOrientation`，因为它使用磁场来计算方向，这没有意义，因为我想找到磁场的变化。对于上面的示例，我手动创建了旋转四元数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T08:35:23.740

确保您通过该`onAccuracyChanged(Sensor sensor, int accuracy)`方法监控传感器的准确性。我发现使用我的 Nexus 10 平板电脑时，准确度会定期变化，当它很低或不可靠时，我得到的结果与你的相似。

# php - 如何使用 filter_var() 函数在 PHP 中验证电子邮件。

> ID：15731878
> 
> 赞同：0
> 
> 时间：2013-03-31T16:48:35.620
> 
> 标签：php

我有这行用于验证电子邮件和非空电子邮件字段：

```
if ( filter_var($tmpEmail, FILTER_VALIDATE_EMAIL)  == TRUE) || (!empty($email)) {
...
} 
```

但我看到这个错误：

```
Parse error: syntax error, unexpected '||' (T_BOOLEAN_OR) in 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:49:51.750

你的括号不匹配。尝试：

```
if ( filter_var($tmpEmail, FILTER_VALIDATE_EMAIL) || !empty($email)) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T16:49:59.017

`)`after`TRUE`结束`if`语句，删除它和`(`before `!empty`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:49:43.640

尝试[**`filter_var()`**](http://php.net/manual/en/function.filter-var.php)PHP 手册中的函数，它可以操作/验证字符串顺序。

```
$email = 'foo@foo.com'; 
if ((filter_var($email, FILTER_VALIDATE_EMAIL) == TRUE) || !empty($email)) {
   // your email is correct. 
} 
```

# jquery - jQuery 使用淡入/淡出添加/删除类

> ID：15731879
> 
> 赞同：21
> 
> 时间：2013-03-31T16:48:48.943
> 
> 标签：jquery, fadein, fadeout, addclass, removeclass

我想将淡入淡出效果应用于 addClass 函数..并将淡出效果应用于 removeClass...

你能帮助我吗？

这是我的代码

```
$('#loader'+idTurno).addClass('loader'); 
```

...

```
$('#loader'+idTurno).removeClass('loader'); 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-31T16:49:53.437

淡入：

```
$("#loader").fadeIn("slow", function() {
    $(this).addClass("loader");
}); 
```

消退：

```
$("#loader").fadeOut("slow", function() {
    $(this).removeClass("loader");
}); 
```

正如另一位用户所说，您可能想研究使用[`toggleClass`](https://api.jquery.com/toggleClass/).

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-28T14:35:26.210

另一种实现这一点的方法，使用您的原始 jQuery 代码，CSS 方式：

```
#loader {
  transition: opacity 500 ease-in-out;
} 
```

更流畅的动画，更容易维护。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-01T05:40:12.133

```
#loader {
  transition: all 0.9s ease-out 0s;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-04T18:07:53.783

可能在fadeIn 类之后使用了setTimeout 函数

```
 $('#loader').addClass('loader').fadeIn('slow');
 setTimeout(function(){  $('#loader').removeClass('loader'); }, 1000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-16T11:50:04.777

让它简单：

```
$('#loader'+idTurno).addClass('loader').fadeIn(1000);
$('#loader'+idTurno).removeClass('loader').fadeIn(1000); 
```

* * *

## 回答 #6

> 赞同：-8
> 
> 时间：2014-02-28T13:44:03.350

您应该为 remove/addClass 方法添加一个持续时间：

```
$('#loader'+idTurno).addClass('loader',500);
$('#loader'+idTurno).removeClass('loader',500); 
```

# java - 如何应用依赖于实现的方法调用？

> ID：15731892
> 
> 赞同：0
> 
> 时间：2013-03-31T16:49:28.923
> 
> 标签：java, oop

我有一个`delete(object)`方法应该根据要删除的对象执行不同的代码。

```
class MyService {

   void delete(Object obj) {
     if (obj instanceof Foo) {
         //execute some foo deletion logic
     } 
     if (obj instanceof Bar) {
         //execute some bar deletion logic
     }
     //if... and so on
   }
} 
```

从设计的角度来看，我怎样才能避免`instanceof`这里的检查？我不能`delete()`在我的所有实现中引入一个方法，因为对象不应该知道它们应该如何删除自己。

那里还有什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T16:54:26.570

您仍然可以通过编写来使用子类化机制（甚至可以使其通用）

```
class MyService<T> {
   void delete(T obj) {
     // Only the delete logic, but nothing specific for any type
   }
} 
```

然后，对于 Foo，您将创建一个子类：

```
class MyFooService extends MyService<Foo> {
    void delete(Foo obj) {
        //execute some foo deletion logic
        // finally, invoke super class as it knows how to do the real delete action
        super.delete(obj);
    }
} 
```

这样，您的`Foo`特定逻辑位于 中`MyFooService`，并且您的`Foo`逻辑被放入单独的类中。作为额外的奖励，这为您提供了可以进行良好单元测试的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T16:51:09.270

方法重载：

```
void delete(Foo f) {}
void delete(Bar b) {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:58:03.697

IMO最好创建一个代表DeleteType的枚举说

```
public enum DeleteType {

Foo, Bar  //..... } 
```

并且在`MyService`delete 方法中可以采用 2 个参数，例如，

```
void delete(DeleteType type, Object object) {
switch(type) {
case Foo:
 //Deletion of Foo objects....
 break;
case Bar:
//Deletion of Bar objects....
 break;
 ....
}
} 
```

如果您希望`delete`方法签名完好无损，则`type`可以将其存储在其`obj`自身中（通过使`obj`' 的类遵守`interface`将使其成为`return`的contract( ) `type`）

# xcode - XCode 4 - 发布模式标志、构建标志、链接标志

> ID：15731896
> 
> 赞同：1
> 
> 时间：2013-03-31T16:49:51.240
> 
> 标签：xcode

我在 MAC OS X 10.8 上使用 XCode 4.6。

我是这个 IDE 和平台的新手。我有一个我编译的项目，XCode 关闭了优化。

如果我设置发布方案并不重要。

我在名为“ [Cannot Disable Debugger with XCode 4.5](https://stackoverflow.com/questions/12682658/cannot-disable-debugger-with-xcode-4-5) ”的线程中看到它与标志“-O0”和“-Os”有关。我知道某些标志设置为“调试模式”，这意味着没有进行优化，代码会生成更多数据来帮助调试。我只是找不到在 XCode 中控制这种行为的单个参数（如 VS 中的 /Mtd）。

XCode 选项中的哪个参数控制这个参数？

此外，在 VS 中，很容易将构建参数视为命令行（在选项下，链接器和构建）。在 XCode 中哪里可以看到？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T21:59:53.717

所有编译器和链接器标志都可以在项目或目标的“构建设置”中找到（目标可以覆盖其项目的设置）。要到达那里，请选择项目文件，然后选择您当前的目标，然后转到“构建设置”。选择顶部的“全部”和“级别”以显示所有可用选项及其设置位置（项目或目标 - 最左侧获胜）。

这些选项是分组的，例如，链接器选项和编译器选项，其中大部分是指标志。Xcode 显示一个描述性的名称而不是完整的标志名称。要查看后者，请选择感兴趣的行并在右侧面板（“实用程序”面板）中选择“快速帮助检查器”。您似乎要寻找的标志在 Xcode 中称为“优化级别”。

您可以设置每个选项的值，Xcode 可能会在原始值旁边显示一些元信息，例如，“最快，最小”用于`-Os`，或“无”用于`-O0`。您可以独立设置每个配置的所有选项（默认情况下，Release 和 Debug）。实际使用哪种配置取决于您的构建操作。如果您构建并运行，则默认使用 Debug。如果您归档应用程序，则默认使用 Release。但是，您可以通过编辑方案来更改其中的大部分内容。

**更新：** 要了解发布和调试配置之间的差异，请查看给定目标的“构建设置”。如果选项的值在两种配置（或您可能拥有的任何其他配置）中不同，则选项名称前面有一个箭头，表示不同的值。例如，采用“仅构建活动架构”设置。在调试模式下，它假定您为特定的测试设备构建，因此也不需要包含为其他平台生成的代码。但是，如果您构建应用程序以进行分发，您希望构建一个包含所有目标设备/硬件架构的代码的应用程序。

其他要查看的选项： - 调试信息格式：调试信息（崩溃报告）的存储方式。在 Release 模式下，设置为“DWARF with dSym”，这意味着您的崩溃报告是加密的，因此其他人无法从中获取有意义的信息（符号名称）。

- 在复制期间去除调试符号

-优化级别，如上所述

-预处理器宏：这允许您使您的代码（静态）依赖于构建配置，例如，仅在调试模式下登录

Xcode 在上述“快速帮助检查器”中提供了有关所有这些选项的更多（并且可能更准确）信息，只需选择任何选项即可。

根据我的经验，尽管进行了优化，但发布版本通常更快（即，它们构建得更快）并且尺寸肯定更小。

# android - TextView 自动滚动

> ID：15731902
> 
> 赞同：1
> 
> 时间：2013-03-31T16:49:57.313
> 
> 标签：android, textview

当我有 TextView 示例时：

```
TextView tx = (TextView) findViewById(R.id.idOfTextView);

tx.setId( Integer.parseInt(touched) );
tx.setX(X);
tx.setY(Y);
tx.setPadding(12, 12, 12, 12);
tx.setTextSize(25);
tx.setTextColor(Color.parseColor("#EF7620"));
tx.setShadowLayer(16.5f, 0, 0, Color.parseColor("#EF7620"));
tx.setOnTouchListener(new ChoiceTouchListener()); 
```

我在这个 tx TextView 中做了一些事件和操作，但这并不重要。只有我想做的是，当其他事件结束时，我想在某个地方滚动或移动这个 TextView。

例如：

![在此处输入图像描述](https://i.stack.imgur.com/W6URr.png)

我找到的唯一解决方案是[scrollTo](https://stackoverflow.com/questions/7773206/where-does-android-view-scrolltox-y-scroll-to)，但对我不起作用

```
tx.scrollTo(100, 100); 
```

# sql - Informix SQL 帮助：布尔表达式的结果不是布尔类型

> ID：15731905
> 
> 赞同：1
> 
> 时间：2013-03-31T16:50:08.320
> 
> 标签：sql, informix

我有一条 SQL 语句：

```
UPDATE informix.dv_billing dv 
   SET dv.fee = CASE WHEN ((SELECT dc.mm_discount
                              FROM dv_mm_disc dc
                             WHERE dc.year = YEAR(dv.tdate)
                               AND dc.quarter = quarter(dv.tdate)
                               AND dc.bid=dv.bid
                               AND dc.mm_code=dv.pcode
                              AND dc.ins=dv.ins) = 0)
                     THEN dv.fee ELSE 0
                 END
 WHERE MDY(MONTH('2012-04-05'), 1, YEAR('2012-04-05')) - 2 UNITS MONTH
   AND last_day(DATE('2012-04-05')) 
; 
```

SQL 返回错误：

```
Result of a boolean expression is not of boolean type. 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:40:55.353

我认为您遇到了外部（主要）WHERE 子句的问题。

您有一个名义上的条件：

```
WHERE expr1 AND expr2 
```

这要求*expr1*和*expr2*都是布尔表达式，但实际表达式不是布尔表达式——因此会出现措辞有点奇怪的错误消息。

表达方式：

```
MDY(MONTH('2012-04-05'), 1, YEAR('2012-04-05')) - 2 UNITS MONTH 
```

给出 DATE（或可能是 DATETIME YEAR TO DAY）结果。可以合理地假设该`last_day()`函数返回包含给定日期的月份中最后一天的日期。

也许最后一个应该是`=`？

```
 WHERE MDY(MONTH('2012-04-05'), 1, YEAR('2012-04-05')) - 2 UNITS MONTH = last_day(DATE('2012-04-05')) 
```

这可以缩写为：

```
 WHERE MDY(4, 1, 2012) - 2 UNITS MONTH = last_day(DATE('2012-04-05')) 
```

我不确定该条件何时会映射到 true ......但这是一个单独的讨论。我确实认识到 '2012-04-05' 可能是一个查询参数，为了提出问题而进行了简化，所以这个缩写不是通用的，但我似乎不太可能一个月的第一天是任何一个月的最后一天（但很大程度上取决于该`last_day()`函数中的内容）。

# google-cloud-messaging - GCM 不工作

> ID：15731909
> 
> 赞同：1
> 
> 时间：2013-03-31T16:50:28.867
> 
> 标签：google-cloud-messaging

GOOGLE 云消息对我来说很好用。我在一天之内发送了许多推送通知，但它工作正常，第二天它突然停止向我发送通知。经过长时间的延迟，它不再工作，没有一个通知。问题是什么？GCM 是否有任何明确的限制？GCM暂时有效吗？

# c# - C# Rijndael CryptographicException “要加密的数据长度无效。”

> ID：15731911
> 
> 赞同：2
> 
> 时间：2013-03-31T16:50:32.883
> 
> 标签：c#, encryption, rijndael

我正在尝试使用 rijndael 算法加密和解密文件，但我收到错误消息“要加密的数据长度无效。”。我可以加密文件，但无法解密。这是我的解密函数；

```
 public static byte[] Decrypt(byte[] toEncryptArray)
    {
        byte[] keyArray = UTF8Encoding.UTF8.GetBytes("-key-");
        RijndaelManaged rDel = new RijndaelManaged();
        rDel.Key = keyArray;
        rDel.Padding = PaddingMode.PKCS7;
        ICryptoTransform cTransform = rDel.CreateDecryptor();
        return cTransform.TransformFinalBlock(toEncryptArray, 0, toEncryptArray.Length);
    } 
```

老实说，我不知道我做错了什么，因为我可以很好地加密它。我要解密的文件是 11 kb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:15:08.047

您应该使用[CryptoStream](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.aspx)对象，它将自动调用正确的`ICryptoTransform.TransformFinalBlock`和`ICryptoTransform.TransformBlock`方法。

您尚未发布加密代码，但检查*填充*模式是否相同（即`PaddingMode.PKCS7`）并且初始向量设置为相同的字符串。

# java - 在java中读取大文本文件，不可行？

> ID：15731914
> 
> 赞同：1
> 
> 时间：2013-03-31T16:51:06.887
> 
> 标签：java, file-io

我正在使用以下方法将文件读入`JTextArea`：

```
public void readFile(File file) throws java.io.FileNotFoundException,
                                       java.io.IOException {
   if(file == null) return;
   jTextArea1.setText("");
   try(BufferedReader reader = new BufferedReader(new FileReader(file))){
     String line = "";
     while((line=reader.readLine())!=null){
         jTextArea.append(line + "\n");
     }
   }
} 
```

它适用于正常大小的文件（几百 KB），但是当我测试一个 42 MB 的 30000 行文件时，记事本可以在大约 5 秒内打开它，我的文件阅读器却花了很长时间。我等不及要完成了。我等了大约 15-20 分钟，它仍在工作，消耗了我 30% 的 CPU 使用率。

你能给我一个解决方案吗？我只处理文本文件，而不是二进制文件，我所知道的是`BufferedReader`最好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:54:31.517

问题可能不在于文件读取，而在于处理。对于大型数据集，重复调用`append`可能非常低效。

考虑使用[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#toString%28%29). 此类设计用于从部件快速创建长字符串（在单个线程上；请参阅[`StringBuffer`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html)多线程对应项）。

```
if(file == null) return;
StringBuilder sb = new StringBuilder();
jTextArea1.setText("");
try(BufferedReader reader = new BufferedReader(new FileReader(file))){
    String line = "";
    while((line==reader.readLine())!=null){
        sb.append(line);
        sb.append('\n');
    }
    jTextArea1.setText(sb.toString());
} 
```

正如评论中所建议的，您可能希望在新线程中执行此操作，这样用户就不会认为您的程序已冻结。

# php - Wordpress 中带有 Aqua-Resizer 的滑块

> ID：15731917
> 
> 赞同：0
> 
> 时间：2013-03-31T16:51:15.083
> 
> 标签：php, wordpress, slider, attachment

我在一个 wp 网站上工作，现在我想要一个带有 Aqua-Resizer 的滑块。

我的滑块目前工作正常。但我不知道如何将 Aqua-Resizer 添加到代码中。

这是我的滑块的代码。

```
<div id="slides">
<div class="slides_container">
    <?php
        query_posts('post_type=sliders&p=sliderhome'); // this calls our custom post type of 'sliders' and post id
            if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
                <?php
                $attachments = attachments_get_attachments();
                $total_attachments = count($attachments);
                if( $total_attachments > 0 ) {

                    for ($i=0; $i < $total_attachments; $i++)
                    {
                    echo '<div><img src="' . $attachments[$i]['location'] . '" alt="' . $attachments[$i]['title'] . '" class="imgradius" /></div>';
                    }

                 } ?>
            <?php endwhile; else: ?>
        <?php endif;
    wp_reset_query();
    ?>
</div>  
</div> 
```

这是 Aqua-Resizer 的代码

```
<?php

$thumb = get_post_thumbnail_id();
$img_url = wp_get_attachment_url( $thumb,'full' ); //get full URL to image (use "large" or "medium" if the images too big)
$image = aq_resize( $img_url, 560, 310, true ); //resize & crop the image

?>

<article <?php post_class()?> id="post-<?php the_ID(); ?>">

    <?php if($image) : ?>
        <img src="<?php echo $image ?>"/>
    <?php endif; ?>

    .... 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:02:02.333

试试这个

在functions.php中包含以下行

```
 require_once('aq_resizer.php'); 
```

将代码更改为

```
for ($i=0; $i < $total_attachments; $i++)
{
    echo '<div><img src="' . **aq_resize($attachments[$i]['location'], 560, 310, true )** . '" alt="' . $attachments[$i]['title'] . '" class="imgradius" /></div>';
} 
```

参考： http: [//www.wpsquare.com/resize-images-wordpress-using-aqua-resizer/](http://www.wpsquare.com/resize-images-wordpress-using-aqua-resizer/)

# django - 在模态窗口中使用 Django 模板标签

> ID：15731918
> 
> 赞同：0
> 
> 时间：2013-03-31T16:51:17.527
> 
> 标签：django, twitter-bootstrap

我想在我的模态图中使用 Django 评论应用程序，特别是标签：

```
 {% comments item %} 
```

这为用户提供了一个提交评论和查看模型对象评论的地方（在我的例子中，变量被称为`item`）。

是否可以在模态窗口中使用它，如果可以，如何使用？我想它需要 javascript/jquery 来传递变量等，但不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:05:00.303

我不明白为什么在模式窗口中使用标签与在其他任何地方使用它们会有什么不同。您的窗口要么与现有页面中的元素一起构建，在这种情况下您可以在那里使用模板标签，要么是通过 Ajax 构建的，在这种情况下，您在呈现 Ajax 响应时使用模板标签。

# ruby - 是否可以只下载不带附件的 IMAP 消息？

> ID：15731920
> 
> 赞同：1
> 
> 时间：2013-03-31T16:51:31.247
> 
> 标签：ruby, oauth-2.0, imap

我想用 Net::IMAP 处理我的一堆电子邮件，但我想跳过那些带有附件的电子邮件，因为它们花费的时间太长。有什么提示吗？最终，我希望尽快下载电子邮件的所有文本和 HTML 内容。现在，我一次获取一个 UID，并将其与 15 个进程并行化（最大 GMAIL 允许），但我遇到了带有附件的消息的障碍。

```
imap = Net::IMAP.new('imap.gmail.com', 993, usessl = true, certs = nil, verify = false)
imap.authenticate('XOAUTH2', user.email, user.token)
mailbox = "[Gmail]/All Mail"
imap.select(mailbox)
message_id = 177
imap.fetch(message_id,'RFC822')[0].attr['RFC822'] # this fetches the whole message, including attachment, which makes it slow... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:29:17.617

imap rfc 不提供任何此类实现，但作为替代方案，可能存在黑客攻击，假设邮件遵循 rfc 标准，获取邮件的整个邮件标头并检查`content type`它是否`multipart/mixed`确定附件存在于邮件。

[关于内容类型，您可以在http://en.wikipedia.org/wiki/MIME](http://en.wikipedia.org/wiki/MIME)获得更多信息

这只是查找附件的可能方法之一。

# c - UDP 多客户端服务器基础知识

> ID：15731924
> 
> 赞同：4
> 
> 时间：2013-03-31T16:51:47.083
> 
> 标签：c, linux, udp

我期待实现这一点：服务器从多个客户端接收一个字符串（文件名），他必须从文件夹中获取该字符串，并通过从命令行定义的 bufferSize 将其返回给客户端。它必须通过 UDP 通信来实现。我熟悉 TCP 套接字，但我不明白如何获取 udp 连接的文件描述符，因为缺少接受。

所以我在考虑这个：在配置之后我在服务器中做了一个while循环，在那里我得到“某种描述符”，我将把它发送到一个新线程，该线程知道将数据发回哪里......任何想法？

我查了网络，但没有找到这种操作的具体解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T17:58:34.140

您没有与 UDP 建立连接；您使用[`sendto()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sendto.html)和[`recvfrom()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/recvfrom.html)来发送和接收消息。

所以服务器会调用`recvfrom()`socket；从它接收的数据中解包请求，执行适当的操作，并用于`sendto()`将响应发送回接收请求的客户端。

客户端会调用`sendto()`将消息打包到服务器，然后调用`recvfrom()`以获取响应。请注意，UDP 是一个不可靠的协议；无法保证每条消息都会送达。客户端必须实现超时以防服务器丢弃 UDP 请求。服务器也必须能够处理重复的请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T13:19:41.750

我终于找到了一些有用的东西，也许它对其他人有用，所以这里是：代码被注释并且非常清晰。PS：抱歉粘贴太长，但谷歌不允许我复制链接。

```
 /* 
 * udpserver.c - A simple UDP echo server 
 * usage: udpserver <port>
 */

#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>
#include <netdb.h>
#include <sys/types.h> 
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#define BUFSIZE 1024

/*
 * error - wrapper for perror
 */
void error(char *msg) {
  perror(msg);
  exit(1);
}

int main(int argc, char **argv) {
  int sockfd; /* socket */
  int portno; /* port to listen on */
  int clientlen; /* byte size of client's address */
  struct sockaddr_in serveraddr; /* server's addr */
  struct sockaddr_in clientaddr; /* client addr */
  struct hostent *hostp; /* client host info */
  char buf[BUFSIZE]; /* message buf */
  char *hostaddrp; /* dotted decimal host addr string */
  int optval; /* flag value for setsockopt */
  int n; /* message byte size */

  /* 
   * check command line arguments 
   */
  if (argc != 2) {
    fprintf(stderr, "usage: %s <port>\n", argv[0]);
    exit(1);
  }
  portno = atoi(argv[1]);

  /* 
   * socket: create the parent socket 
   */
  sockfd = socket(AF_INET, SOCK_DGRAM, 0);
  if (sockfd < 0) 
    error("ERROR opening socket");

  /* setsockopt: Handy debugging trick that lets 
   * us rerun the server immediately after we kill it; 
   * otherwise we have to wait about 20 secs. 
   * Eliminates "ERROR on binding: Address already in use" error. 
   */
  optval = 1;
  setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, 
         (const void *)&optval , sizeof(int));

  /*
   * build the server's Internet address
   */
  bzero((char *) &serveraddr, sizeof(serveraddr));
  serveraddr.sin_family = AF_INET;
  serveraddr.sin_addr.s_addr = htonl(INADDR_ANY);
  serveraddr.sin_port = htons((unsigned short)portno);

  /* 
   * bind: associate the parent socket with a port 
   */
  if (bind(sockfd, (struct sockaddr *) &serveraddr, 
       sizeof(serveraddr)) < 0) 
    error("ERROR on binding");

  /* 
   * main loop: wait for a datagram, then echo it
   */
  clientlen = sizeof(clientaddr);
  while (1) {

    /*
     * recvfrom: receive a UDP datagram from a client
     */
    bzero(buf, BUFSIZE);
    n = recvfrom(sockfd, buf, BUFSIZE, 0,
         (struct sockaddr *) &clientaddr, &clientlen);
    if (n < 0)
      error("ERROR in recvfrom");

    /* 
     * gethostbyaddr: determine who sent the datagram
     */
    hostp = gethostbyaddr((const char *)&clientaddr.sin_addr.s_addr, 
              sizeof(clientaddr.sin_addr.s_addr), AF_INET);
    if (hostp == NULL)
      error("ERROR on gethostbyaddr");
    hostaddrp = inet_ntoa(clientaddr.sin_addr);
    if (hostaddrp == NULL)
      error("ERROR on inet_ntoa\n");
    printf("server received datagram from %s (%s)\n", 
       hostp->h_name, hostaddrp);
    printf("server received %d/%d bytes: %s\n", strlen(buf), n, buf);

    /* 
     * sendto: echo the input back to the client 
     */
    n = sendto(sockfd, buf, strlen(buf), 0, 
           (struct sockaddr *) &clientaddr, clientlen);
    if (n < 0) 
      error("ERROR in sendto");
  }
} 
```

# c++ - 在 C++ 中保留标点符号

> ID：15731925
> 
> 赞同：-1
> 
> 时间：2013-03-31T16:51:48.430
> 
> 标签：c++, vector

有谁能够帮助我？在代码中，我没有像显示的那样擦除标点符号，而是需要将其剥离以便稍后在它之前的单词从其缩写形式扩展时重新使用。任何帮助将不胜感激。NB 这只是代码的一个功能，显示矢量和打开 infile 等...已放置在单独的功能中。

```
void readText2(ifstream &infile, vector <string> &textFile2 ) 
{
    while( !infile.eof() )
    {
        string fileWord;
        infile >> fileWord;
        for (size_t i=0; i !=fileWord.length(); i++)
        {
            fileWord[i]=toupper(fileWord[i]);
        }

        for (size_t i=0; i < fileWord.length(); i++)
        {
            if (ispunct (fileWord[i]))
            {
                fileWord.erase(i); 
            }
        }
        textFile2.push_back(fileWord);
    }
    infile.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T23:18:25.927

我建议从头到尾遍历字符串（以保留正确的索引号），并在循环内将索引+标点符号存储在 std::map<size_t,char>

你的函数被黑了，评论改变了：

```
// changed return type
vector<map<size_t,char>> readText2(ifstream &infile, vector <string> &textFile2 ) 
{
    vector<map<size_t,char>> vPunct;    // added

    while( !infile.eof() )
    {
        string fileWord;
        infile >> fileWord;
        for (size_t i=0; i !=fileWord.length(); i++)
        {
            fileWord[i]=toupper(fileWord[i]);
        }

        map<size_t,char> mPunct;        // construct a map
                                        // map stays empty if no punctuation is found

        for (size_t i=fileWord.length()-1; i>=0 ; i--)    // reversed loop
        {
            if (ispunct (fileWord[i]))
            {
                // store index + punctuation char
                mPunct.insert(pair<size_t,char>(i,fileWord[i]));     
                fileWord.erase(i); 
            }
        }
        textFile2.push_back(fileWord);      
        vPunct.push_back(mPunct);      // add map to vector
    }
    infile.close();
    return vPunct;   // return vector
} 
```

标点符号现在存储在函数返回的第二个向量中。例如： textFile[20] 处的字符串将其标点符号存储在 vPunct[20] 中。

将标点符号与字符串一起存储在一个中会更可靠`vector<pair<string,map<size_t,char>>>`，但这会改变函数的外部行为，我不知道这是否适合您。

# c# - 使 listBoxItem 成为焦点

> ID：15731929
> 
> 赞同：0
> 
> 时间：2013-03-31T16:52:06.977
> 
> 标签：c#, xaml, windows-phone-8

有没有办法在典型的 listBox 上确定当前关注哪个 listBoxItem？我说的是选择前的状态，更像是鼠标悬停事件。

我尝试了`MouseEnter`and`Focus`事件，但问题是，我无法确定哪个项目调用了这些事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T16:56:48.167

您应该使用 SelectedIndex 或 SelectedItem

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:05:44.093

你需要更详细的东西...

有关“基于事件”的解决方案，请参阅此解决方案-尽管`I wouldn't recommend that (unless a fast fix or very specific) as it 'ties' your code, you should keep MVVM as much as possible`...

[ListBox 鼠标悬停 - 如何获取项目](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/36ddd797-9213-4dc2-a6ef-4cea466be5a5/)

```
<ListBox.ItemContainerStyle> 
    <Style TargetType="{x:Type ListBoxItem}">  
        <EventSetter Event="MouseEnter" Handler="ListBoxItem_MouseEnter" /> 
    </Style> 
</ListBox.ItemContainerStyle> 
```

并修复它以使用 MVVM 工作（`i.e. you need to bind that event as a command into your view-model ICommand`- 你需要一个附加的排序属性 - 例如（只需快速搜索就会得到很多）......

[如何将 WPF 命令绑定到 MouseEnter 事件？](https://stackoverflow.com/questions/2537158/how-can-i-tie-a-wpf-command-to-a-mouseenter-event)
[如何在 WPF 中的 StackPanel 的 MouseEnter 上执行命令绑定？](https://stackoverflow.com/questions/3152389/how-can-i-execute-a-command-binding-on-mouseenter-of-a-stackpanel-in-wpf)
[WPF - 在 MouseOver 上执行按钮命令](http://sblanco.wordpress.com/2009/12/11/execute-button-command-on-mouseover/)

然后将其绑定`attached property`到您的视图模型属性-您将获得“悬停项目”的更改-然后您可以完成其余的工作-甚至设置/公开您自己的“悬停项目”属性（这就是我的做法-连接所有一起制作而不是直接连接到该hoevered属性或其他东西的命令线。这是一个快速的伪代码，希望对您有所帮助。

# ruby-on-rails - 使用 ember js 设计和 cancan 示例

> ID：15731934
> 
> 赞同：0
> 
> 时间：2013-03-31T16:52:23.017
> 
> 标签：ruby-on-rails, ember.js

我使用 ember js + rails。我想在 Rails 中进行 Devise + Cancan 之类的用户授权。我只需要 2 个角色：用户和管理员，我想在 ember js 中实现角色和身份验证控制。我发现的所有手册都很旧。Mb，您可以给我一些完成此类事情的应用程序示例吗？感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:58:50.593

看看[这篇](http://say26.com/using-rails-devise-with-ember-js)博文。它介绍了如何使用 devise 和 emberjs。不确定 cancan 如何在客户端工作，你必须想出自己的逻辑来做到这一点。

# hibernate - Hibernate 无法更新数据库中的元素集合

> ID：15731935
> 
> 赞同：1
> 
> 时间：2013-03-31T16:52:26.900
> 
> 标签：hibernate, jakarta-ee

**嵌入式类**

```
@Embeddable
public class TeachingExperience {
    private String courseName;
    private String instructor;
    private String description;
} 
```

**实体 1**

```
@Entity
public class CV {
    @ElementCollection(fetch= FetchType.EAGER)
    @Fetch(value = FetchMode.SELECT)
    private List<TeachingExperience> teachingExperiences;
} 
```

**实体 2**

```
@Entity
public class Student {
    @OneToOne(cascade= CascadeType.ALL, orphanRemoval=true)
    private CV cv;
} 
```

CV 类存储一个人的教学经验列表。还有其他字段应该被急切地获取，因此@Fetch 注释。

我使用这种方法为给定学生的简历添加新的教学经验：

```
public static void add (String course, String prof, String desc) {
    TeachingExperience TE = new TeachingExperience(course, prof, desc);
    student.getCv().getTeachingExperiences().add(TE);

    Session session = HibernateUtil.getSessionFactory().openSession();
    session.beginTransaction();
    session.merge(student);
    session.getTransaction().commit();
    session.close();
} 
```

每次我尝试添加新的教学体验时，使用此配置，数据存储在 DB 表中，首先复制，然后插入新条目。两次连续方法调用后我的数据库表如下所示：

*add('DS', '飞丽', 'TA');*

```
-    DS     Feili      TA 
```

*添加（'AP'，'Ramtin'，'TA'）；*

```
-    DS     Feili      TA
-    DS     Feili      TA
-    AP     Ramtin     TA 
```

当我试图从教学经验列表中删除一个对象时，我遇到了同样的问题，我不确定我的代码的哪一部分是这种奇怪行为的根源。

您的帮助将不胜感激。

**编辑1：**

```
@Entity
public class TeachingExperience {
    @Id @GeneratedValue
    private Integer id;

    private String courseName;
    private String instructor;
    private String description;
}

@Entity
public class CV {
    @OneToMany(fetch= FetchType.EAGER, cascade=CascadeType.ALL, orphanRemoval=true)
    @Fetch(value = FetchMode.SELECT)
    @JoinColumn(name="cv")
    private List<TeachingExperience> teachingExperiences;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:35:46.717

尝试使 TeachingExperience 类成为一个完整的实体，其中包含一个`@Id`字段以及`@ManyToOne`与 CV 实体的关系。在这种情况下使用`@Embeddable`似乎不合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:55:28.823

要修复此错误，您应该使用`update()`method 而不是`merge()`. `update()`将提供您撤消已删除的项目。因此，如果您使用`update()`，则插入期间的问题将得到修复，并且如果您从列表中删除某些内容，它将从列表中删除！但是您可以在数据库中看到已删除的实体。如果你想从数据库中删除所有的东西，你应该使用`merge()`删除和`update()`插入。有时也定期刷新数据库可以帮助您解决这个问题。

# java - Libgdx为什么我的按钮在鼠标点击时没有响应

> ID：15731944
> 
> 赞同：4
> 
> 时间：2013-03-31T16:53:13.157
> 
> 标签：java, button, libgdx, mousepress

为什么我的`TextButton`，来自 libgdx 的点击没有响应？

我有一个按钮，这个按钮有一个监听器，但它没有响应。该按钮正在显示，但它不响应鼠标点击。

```
public MyStage extends Stage {
     ...
     next.addListener(new InputListener() {
        @Override
        public boolean touchDown(InputEvent event, float x, float y, int pointer, int button)
        {
            Gdx.app.log(ApothecaryGame.LOG, "Pressed: Next button.");
            return true;
        }
        @Override
        public void touchUp(InputEvent event, float x, float y, int pointer, int button) {
            Gdx.app.log( ApothecaryGame.LOG, "Released: Next button.");
            super.touchUp( event, x, y, pointer, button );
            nextPage();
        }
    } );
    this.addActor(next);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-31T21:54:39.360

将 ClickListener 添加到您的按钮。它看起来像这样。

```
button.addListener(new ClickListener() {
    public void clicked(InputEvent event, float x, float y) {
        // Do something interesting here...
    }
}); 
```

另外，请确保将舞台设置为输入处理器，否则它将看不到事件。

```
Gdx.input.setInputProcessor(stage); 
```

# android - 如何从 myItemizedOverlay 意图和敬酒

> ID：15731945
> 
> 赞同：0
> 
> 时间：2013-03-31T16:53:31.840
> 
> 标签：android, android-intent, toast, itemizedoverlay

我有带有自定义 itemizedoverlay 的地图视图。我在信息窗口放了两个按钮。我的问题是我在神经按钮上的代码对吗？我把意图和烤面包，但它没有显示。这是我的代码。谢谢。

```
public class MyItemizedOverlay extends ItemizedOverlay {

private ArrayList<OverlayItem> items = new ArrayList<OverlayItem>();
private Drawable marker;
private Context mContext;

Route route;
MapView mapView;
private ArrayList<Lokasi> list_fasilitas = new ArrayList<Lokasi>();

public MyItemizedOverlay(Drawable defaultMarker) {
    super(defaultMarker);
     items = new ArrayList(); //mbuh
    marker = defaultMarker;
}

public MyItemizedOverlay(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));
    mContext = context;
}

@Override
protected OverlayItem createItem(int index) {
    return (OverlayItem) items.get(index);
}

@Override
public int size() {
    return items.size();

}

/*
 * (non-Javadoc)
 *
 * @see
 * com.google.android.maps.ItemizedOverlay#draw(android.graphics.Canvas,
 * com.google.android.maps.MapView, boolean)
 */
@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    super.draw(canvas, mapView, shadow);
    // boundCenterBottom(marker);

}

public void addItem(OverlayItem item) {
    items.add(item);
    populate();
}

//@Override
protected boolean onTap(int index) {
    OverlayItem item = items.get(0);
    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());

    dialog.setNeutralButton("location", new OnClickListener()
    {
        public void onClick(DialogInterface arg0, int arg1) {

            for (int i = 0; i < list_fasilitas.size(); i++) {

                try
                {
                     String nama = list_fasilitas.get(i).nama_rs;
                     Toast.makeText(mContext, "lala:"+nama, Toast.LENGTH_SHORT).show();
                     initializeData(nama);
                     Intent intent = new Intent(mContext, detailactivity.class);
                     mContext.startActivity(intent);
                }
                catch(Exception e)
                 {
                     Log.e("log_tag", "Error:  "+e.toString());
                 } 

            }

        }

        });

    dialog.setPositiveButton("Close", new OnClickListener() 
    {
        public void onClick(DialogInterface arg0, int arg1) {
            arg0.dismiss();
        }

    });

    dialog.show();
    return true;
}

private void initializeData(String namars) {
    // TODO Auto-generated method stub
     ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(5);
           nameValuePairs.add(new BasicNameValuePair("namars",namars));
         sendData(nameValuePairs);
}

 private void sendData(ArrayList<NameValuePair> data) {
     // TODO Auto-generated method stub
      // 1) Connect via HTTP. 2) Encode data. 3) Send data.
     try
     {
         HttpClient httpclient = new DefaultHttpClient();
         HttpPost httppost = new HttpPost("http://192.168.199.1/RS/generate_detailrs.php");
         httppost.setEntity(new UrlEncodedFormEntity(data));
         HttpResponse response = httpclient.execute(httppost);
     }
     catch(Exception e)
     {
         Log.e("log_tag", "Error:  "+e.toString());
     } 
 } 
```

}

这是我的神经按钮代码：

```
dialog.setNeutralButton("location", new OnClickListener()
    {
        public void onClick(DialogInterface arg0, int arg1) {

            for (int i = 0; i < list_fasilitas.size(); i++) {

                try
                {
                     String nama = list_fasilitas.get(i).nama_rs;
                     Toast.makeText(mContext, "lala:"+nama, Toast.LENGTH_SHORT).show();
                     initializeData(nama);
                     Intent intent = new Intent(mContext, detailactivity.class);
                     mContext.startActivity(intent);
                }
                catch(Exception e)
                 {
                     Log.e("log_tag", "Error:  "+e.toString());
                 } 

            }

        }

        }); 
```

# java - 使用正则表达式时如何减少运行时间？

> ID：15731953
> 
> 赞同：2
> 
> 时间：2013-03-31T16:54:15.927
> 
> 标签：java, regex

我一直在使用正则表达式来解决[USACO](http://cerberus.delos.com:790/usacoprob2?a=48q4lC5NtHb&S=beads)的“断项链”问题。虽然它适用于较小的输入，尽管它是一个非常复杂的正则表达式，但它超过了较大输入的给定时间限制。

如需进一步输入，这是我使用的代码。我的问题是如何在仍然使用正则表达式的同时改进运行时。

非常感谢所有帮助。我是竞争性编程的新手，我真的被困住了：s！

```
class beads {

    public static void main(String[] args) throws IOException{
        BufferedReader f = new BufferedReader(new FileReader("beads.in"));
        //BufferedReader f = new BufferedReader(new FileReader("beads.txt"));
        PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("beads.out")));

        int numBeads=Integer.parseInt(f.readLine());
        String input=f.readLine();
        String beadSequence=input.concat(input);

        Pattern p1=Pattern.compile("^(w*r*)|^(w*b*)*");
        Matcher m1=p1.matcher(input);

        while(m1.find()){
            String k=m1.group();
            //System.out.println(k);
            if(k.length()==numBeads){
                out.println(k.length());
                out.close();
                System.exit(0);
            }
        }

        //System.out.println(input);
        //System.out.println(beadSequence);
        Pattern p=Pattern.compile("(?=((b*w*)*b+w*r+(w*r*)*|(r*w*)*r+w*b+(w*b*)*))(^|(?<=w)b|(?<=b)w|(?<=w)r|(?<=r)w)");

        Matcher m=p.matcher(beadSequence);

        List<String> solutions=new ArrayList<String>();
        int length=0;

        while(m.find()){

            String k=m.group(1);
            //System.out.println(m.group(1));
            if (k.length()>length)length=k.length();
        }

       out.println(length);

        out.close();                                 
        System.exit(0);  
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:33:22.063

类似的东西`(b*w*)*`确实有很多可能性来匹配“b”和“w”的序列，这将导致[灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)。

因为这将匹配这两个字母的任何序列，所以最好用字符类替换它`[bw]*`。

所以你的表达看起来像这样：

```
Pattern p=Pattern.compile("(?=([bw]*b+w*r+[rw]*|[rw]*r+w*b+[bw]*))(^|(?<=w)b|(?<=b)w|(?<=w)r|(?<=r)w)"); 
```

这个表达式应该匹配得更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:25:57.063

有一个比目前给出的更简单的正则表达式

```
(?=([bw]*b+[rw]*|[rw]*r+[bw]*)). 
```

你可以在[debuggex](http://www.debuggex.com/?re=%28?=%28%5Bbw%5D%2ab%2b%5Brw%5D%2a%7C%5Brw%5D%2ar%2b%5Bbw%5D%2a%29%29.&str=rrrrbbbbbwwwrrrbbbrrbbwwwbbrrrrrbbbbbrrrrwwwwrwrrrbbbwwwbbrrrwwwbbbwwrrrwwwrrrwwwrrrbbbwwwrrrwwwbbbrrrbbbrrrwwwbbbbbbwwwwwwrrrwwwrrwrbrbbrwwwwbbbrrrbbbbwwwrrrrbbbbbwwwrrrbbbrrbbwwwbbrrrrrbbbbbrrrrwwwwrwrrrbbbwwwbbrrrwwwbbbwwrrrwwwrrrwwwrrrbbbwwwrrrwwwbbbrrrbbbrrrwwwbbbbbbwwwwwwrrrwwwrrwrbrbbrwwwwbbbrrrbbbbwww)上看到你的算法的一个非常好的可视化。沿着测试线滑动黑色三角形，并密切关注第 1 组比赛。这就是您的算法正在查看以确定长度的内容。请注意，示例字符串已经连接到自身，以便端点工作。

# emacs - “日晒”配色方案中的颜色略有偏差

> ID：15731954
> 
> 赞同：2
> 
> 时间：2013-03-31T16:54:16.833
> 
> 标签：emacs, colors, terminal, term

我已经在最新版本的 Emacs (24.3) 中安装了颜色[`Solarized`主题](https://github.com/sellout/emacs-color-theme-solarized#important-note-for-terminal-users)`package.el`，但颜色似乎不正常（对比度似乎太低）

我的 Solarized 安装：

                        ![在此处输入图像描述](https://i.stack.imgur.com/uh148.png)

来自网站的截图：

                                          ![在此处输入图像描述](https://i.stack.imgur.com/4NjgY.png)

我在 GitHub 存储库上的[Emacs color-theme Solarized文档中阅读了以下内容：](https://github.com/sellout/emacs-color-theme-solarized#important-note-for-terminal-users)

> 如果您打算在终端模式下使用 Solarized（即不在 Cocoa 或 X11 Emacs 等 GUI 版本中），**请**考虑将终端仿真器的颜色方案设置为使用 Solarized 调色板。
> 
> ...
> 
> Solarized[存储库](https://github.com/altercation/solarized)包括一些流行的终端仿真器以及 Xdefaults 的调色板；或者您可以从 [Solarized 官方主页](http://ethanschoonover.com/solarized)下载它们。
> 
> ...
> 
> 同样，我建议您手动或通过可用于导入的众多终端方案之一将终端颜色更改为 Solarized 值。

这让我想知道我是否正在遭受这个问题。然而，上面的快照来自**GUI** (Gtk) 上的 Emacs（即**不是**来自运行带有`-nw`选项的 Emacs）

无论哪种方式：**如何更改终端模拟器的配色方案以使用 Solarized 值？**我有`git cloned`太阳能[存储库](https://github.com/altercation/solarized)，但我不知道我应该用它做什么。

万一这很重要：

1.  我没有安装 Emacs 的机器的管理员权限
2.  我正在运行最新的稳定版 Emacs。
3.  `ssh -X`我从`GNOME terminal`本地机器上的 Ubuntu（最新版本）远程连接。GNOME 终端似乎是 version `3.6.0ubuntu`。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-11-16T19:46:55.803

Solorized 最初是为 VIM 创建的。其他编辑的模组不是由 Ethan Schoonover 编写的。如果您查看您在网站上发布的完整图片，顶部会显示 VIM。所以基本上它可以在 emacs 中正常工作）我已经在 vim 和 emacs 上尝试过 solorized，我应该说它在 VIM 中工作得非常好。

# php - 用php计算持续时间

> ID：15731958
> 
> 赞同：0
> 
> 时间：2013-03-31T16:54:22.413
> 
> 标签：php, mysql, datetime

我正在使用以下代码来获取时差。大多数情况下都可以。但是当开始时间是下午 12:00 和结束时间是下午 1:30 时，结果显示 11.0 而不是 1:30。开始和结束时间来自mysql。

```
$startTime=new DateTime(date("h:i",strtotime($data['start_time'])));
$endTime=new DateTime(date("h:i",strtotime($data['end_time'])));
$timeInterval=$startTime->diff($endTime);
$getHours=$timeInterval->format('%h');
$getMinutes=$timeInterval->format('%i');
$duration=$getHours.":".$getMinutes; 
```

帮帮我，请。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T16:58:36.127

只需更改`h:i`为`H:i`：

```
<?php
$startTime=new DateTime(date("H:i",strtotime('12:00')));
$endTime=new DateTime(date("H:i",strtotime('13:30')));
$timeInterval=$startTime->diff($endTime);
$getHours=$timeInterval->format('%h');
$getMinutes=$timeInterval->format('%i');
$duration=$getHours.":".$getMinutes;
echo $duration; 
```

[看到它在行动](http://codepad.viper-7.com/VSijTI)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T17:12:21.900

希望这可以帮助：

```
$differenceMinutes  = (strtotime($data['end_time']) - strtotime($data['start_time'])) / 60; // Get difference as minutes
$getHours           = floor($differenceMinutes / 60); // Get hours
$getMinutes         = floor($differenceMinutes % 60); // Get minutes
$duration           = $getHours . " h " . $getMinutes . " min";

print $duration; // Print it out! 
```

# iphone - 奇怪的麻烦 IOS Iphone App 到应用程序加载器 - Mac Flash Pro CS6

> ID：15731960
> 
> 赞同：0
> 
> 时间：2013-03-31T16:54:29.367
> 
> 标签：iphone, ios, flash-cs6, application-loader

这大约是我第五次删除所有证书、制作新证书、重新发布并尝试加载。我似乎每次都会遇到相同的错误。我确信配置和证书是用于分发而不是开发。似乎只有一小部分 adobe 帮助提到了压缩和解压缩。这种骇人听闻的方法真的对人们有用吗？ipa 是包含在压缩文件夹中的唯一文件吗？

当我这样做时，解压缩它，然后进入有效负载文件夹，我看到文件 APPNAME.app，但它看起来像一张纸，上面有一个大的白色圆圈，上面有一条线。当我尝试单击它时，mac 显示“无法打开此文件”这是正常的吗？我将其压缩并尝试上传，但仍然出现以下错误：

无法从您的应用程序中提取代码签名权利。请确保 rufood8 是经过正确代码签名的有效 Mach 可执行文件。

应用程序未通过协同设计验证。签名无效，包含不允许的权利，或者未使用 Iphone 分发证书签名。

# c# - WPF/C# webbrowser youtube

> ID：15731962
> 
> 赞同：0
> 
> 时间：2013-03-31T16:54:33.490
> 
> 标签：c#, wpf, youtube

我想使用 webbrowser 在我的应用程序中播放 youtube 电影。

问题是关于自动播放电影。

我知道我可以使用嵌入式，但在嵌入式版本上它无法浏览网站。

有什么解决方案如何自动播放 youtube 电影？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:28:27.087

您可以使用特定控件“COM”以名为“Shockwave Flash Object”的形式显示电影“swf”

和 Swf 网址电影：

```
http://www.youtube.com/v/[CODE VIDEO]&autoplay=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:14:55.270

Google 实际上已经提供了一个 API，它允许您在所有平台上执行此类操作，无论是在 Web 还是应用程序界面中。[您可以在此处](https://developers.google.com/youtube/)找到它的文档。但作为一个指南，这是你可以做的......

您所要做的就是替换部分 URL，这可以通过字符串操作轻松完成。我指定了链接 a - 这是普通的 youtube 链接，和 b - 这是可以在全屏模式（或框架或网络浏览器的大小）下播放的 API 链接以及您可以通过 URL 命令的许多其他功能。

一个 - [http://www.youtube.com/watch?v=DuLPSz_Hffw](http://www.youtube.com/watch?v=DuLPSz_Hffw)

b - [http://youtube.googleapis.com/v/DuLPSz_Hffw?autoplay=1&showinfo=0&loop=1](http://youtube.googleapis.com/v/DuLPSz_Hffw?autoplay=1&showinfo=0&loop=1)

希望有帮助！

# c# - 使用数组将 10 个随机整数替换为相应的字符串

> ID：15731965
> 
> 赞同：1
> 
> 时间：2013-03-31T16:55:05.133
> 
> 标签：c#, arrays

我创建了一个非常基本的魔术 8 球程序作为学习练习。目前，每次我单击按钮时，它都会输出 0 - 9 之间的随机数。我现在想用一个小的描述代替这些数字来结束，例如“前景看起来不错”或“机会渺茫”等。

我相信我需要在这里使用一个数组但是我不确定我需要什么样的数组以及代码需要嵌套在哪里。

谁能指出我正确的方向。

到目前为止的代码...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Magic8ball
{
    public partial class Form1 : Form
    {
        private static int randomNumber;
        private const int rangeNumberMin = 0;
        private const int rangeNumberMax = 9;

        public Form1()
        {
            InitializeComponent();
            randomNumber = GenerateNumber(rangeNumberMin, rangeNumberMax);

        }

        private int GenerateNumber(int min, int max)
        {
            Random random = new Random();
            return random.Next(min, max);
        }

        private void Ask_Click(object sender, EventArgs e)
        {

            int rn = randomNumber;

            if (textBox1.Text.Trim().Length == 0)
            {
                MessageBox.Show("Please ask a question first", "No question was asked?");
            }

            else
            {
            MessageBox.Show("Number is" +" " + rn, "your answer...");
            textBox1.Text="";
            randomNumber = GenerateNumber(rangeNumberMin, rangeNumberMax);
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T16:59:47.880

只是属于该类的常规数组可能是要走的路。由于您的随机数从 0 开始，您可以将其用作数组索引`messages[randomNumber]`；

```
public partial class Form1 : Form
{
    private static int randomNumber;
    private const int rangeNumberMin = 0;
    private const int rangeNumberMax = 9;
    private readonly string[] messages = 
        {
            "I don't think so",
            "Maybe",
            "I don't think so",
            "Maybe",
            "I don't think so",
            "Maybe",
            "I don't think so",
            "Maybe",
            "I don't think so",
            "Yes",
        };

    public Form1()
    {
        InitializeComponent();
        randomNumber = GenerateNumber(rangeNumberMin, rangeNumberMax);
    }

    private int GenerateNumber(int min, int max)
    {
        Random random = new Random();
        return random.Next(min, max);
    }

    private void Ask_Click(object sender, EventArgs e)
    {
        int rn = randomNumber;

        if (textBox1.Text.Trim().Length == 0)
        {
            MessageBox.Show("Please ask a question first", "No question was asked?");
        }

        else
        {
            MessageBox.Show("Number is" +" " + rn, "your answer...");
            randomNumber = GenerateNumber(rangeNumberMin, rangeNumberMax);
            textBox1.Text = messages[randomNumber];
        }
    }
} 
```

# html - 无法居中 CSS 导航栏

> ID：15731966
> 
> 赞同：0
> 
> 时间：2013-03-31T16:55:14.393
> 
> 标签：html, css

我有一些用于导航菜单的 CSS 代码和 HTML，但我需要在页面中居中，但无论我做什么，它似乎总是向左移动。

CSS 代码：

```
 ul#css3menu_top,ul#css3menu_top ul {
    margin:0 auto 0 auto;
    list-style:none;
    padding:0;
}
ul#css3menu_top,ul#css3menu_top .submenu {
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    border-radius:5px;
}
ul#css3menu_top .submenu {
    visibility:hidden;
    position:absolute;
    left:0;
    top:100%;
    opacity:0;
    -moz-transition:all 0.5s;
    -webkit-transition:opacity 0.5s;
    -o-transition:opacity 0.5s;
    -moz-box-shadow:3.5px 3.5px 5px #000000;
    -webkit-box-shadow:3.5px 3.5px 5px #000000;
    box-shadow:3.5px 3.5px 5px #000000;
    float:left;
    background-color:#EEEEEE;
    border-width:2px;
    border-radius:6px;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-color:#FFF;
    padding:0 10px 10px;
}
ul#css3menu_top li:hover>.submenu {
    visibility:visible;
    opacity:1;
}
ul#css3menu_top li {
    position:relative;
    display:block;
    white-space:nowrap;
    font-size:0;
    float:left;
}
ul#css3menu_top li:hover {
    z-index:1;
}
ul#css3menu_top ul .submenu {
    z-index:2;
    position:absolute;
    left:100%;
    top:0;
}
ul#css3menu_top {
    font-size:0;
    width:100%;
    z-index:999;
    position:relative;
    display:inline-block;
    zoom:1;
    padding:0 0%;
    margin:0 0%;
    *display:inline;
}
ul#css3menu_top .column {
    float:left;
}
* html ul#css3menu_top li a{
    display:inline-block;
}
ul#css3menu_top>li {
    margin:0;
    width:14%;
}
ul#css3menu_top li.toplast{
    width:15%;
}
ul#css3menu_top a:active, ul#css3menu_top a:focus {
    outline-style:none;
}
ul#css3menu_top a{
    display:block;
    text-align:center;
    text-decoration:none;
    font:bold 16px Calibri;
    color:#EEEEEE;
    text-shadow:#FFF 0 0 1px;
    cursor:pointer;
    padding:10px 15px 6px 3px;
    background-color:#666666;
    background-repeat:repeat;
    background-position:0 0;
    height:20px;
}
ul#css3menu_top ul li {
    float:none;
    margin:10px 0 0;
}
ul#css3menu_top ul a {
    text-align:left;
    padding:4px;
    background-color:#EEEEEE;
    background-image:none;
    border-width:0;
    border-radius:0px;
    -moz-border-radius:0px;
    -webkit-border-radius:0px;
    font:16px Calibri;
    color:#666666;
    text-decoration:none;
}
ul#css3menu_top li:hover>a,ul#css3menu_top li a.pressed {
    background-color:#EEEEEE;
    color:#666666;
    background-position:0 100px;
    text-decoration:none;
}
ul#css3menu_top img {
    border:none;
    vertical-align:middle;
    margin-right:6px;
}
ul#css3menu_top span {
    display:block;
    overflow:visible;
    background-position:right center;
    background-repeat:no-repeat;
    padding-right:0px;
}
ul#css3menu_top ul span {
    padding-right:8px;
}
ul#css3menu_top ul li:hover>a,ul#css3menu_top ul li a.pressed {
    background-color:#EEEEEE;
    background-image:none;
    color:#666666;
    text-decoration:none;
}
ul#css3menu_top li.topfirst>a {
    padding-left: 7px;
    border-width:0;
    border-radius:4px 0 0 4px;
    -moz-border-radius:4px 0 0 4px;
    -webkit-border-radius:4px;
    -webkit-border-top-right-radius:0;
    -webkit-border-bottom-right-radius:0;
}
ul#css3menu_top li.toplast>a {
    padding-right: 7px;
    border-radius:0 4px 4px 0;
    -moz-border-radius:0 4px 4px 0;
    -webkit-border-radius:0;
    -webkit-border-top-right-radius:4px;
    -webkit-border-bottom-right-radius:4px;
}

ul#css3menu_top ul li a:hover {
    color:#F36F25;
}

@media only screen and (max-width:900px),only screen and (max-device-width:900px){
ul#css3menu_top>li{width:33%;}ul#css3menu_top>li:nth-child(3){width:34%}ul#css3menu_top>li:nth-child(n+4){width:33%;}ul#css3menu_top>li:nth-child(6){width:34%}}
@media only screen and (max-width:600px),only screen and (max-device-width:600px){
ul#css3menu_top>li{width:50%;}ul#css3menu_top>li:nth-child(n+3){width:50%;}ul#css3menu_top>li:nth-child(n+5){width:50%;}}
@media only screen and (max-width:450px),only screen and (max-device-width:450px){
ul#css3menu_top>li{width:100%;}ul#css3menu_top>li:nth-child(n+2){width:100%;}ul#css3menu_top>li:nth-child(n+3){width:100%;}ul#css3menu_top>li:nth-child(n+4){width:100%;}ul#css3menu_top>li:nth-child(n+6){width:100%;}}

/*opera hack*/
@media only screen and (min-width:900px){
        html>/**/body noindex:-o-prefocus, html>/**/body  ul#css3menu_top{
            display:table;
        }
        html>/**/body noindex:-o-prefocus, html>/**/body  ul#css3menu_top>li{
            width:auto;
            float:none;
            display:table-cell;
        }
        html>/**/body noindex:-o-prefocus, html>/**/body  ul#css3menu_top li.toplast{
            width:auto;
            display:table-cell;
        }

} 
```

HTML 代码：

```
 <?php $item_limit=4; ?>
<ul id="css3menu_top" class="topmenu">
<li class="topmenu"><a href="#"><span>Homepage</span></a></li>
<li class="topmenu"><a href="#"><span>About Us</span></a>
    <div class="submenu" style="width:338px;">
            <div class="column" style="width:50%">
                <ul>
                <li><a href="/login">Login</a></li>
                <li><a href="/contact">Contact Us</a></li>
                <?php
                $menu1="SELECT * from websitepages where pagetype = 'About' order by pagedesc ASC ";
                $menu2=mysql_query($menu1,$conn) or die(mysql_error());
                $counter=0;
                while($menu3=mysql_fetch_array($menu2))
                {
                    $counter++;
                    echo '<li><a href="/index.php?p='.$menu3["pagename"].'">'.$menu3["pagedesc"].'</a></li>';
                    if ($counter==$item_limit) { echo '</ul></div> <div class="column" style="width:50%"><ul>'; $counter=0; }
                }
                ?>
                </ul>
            </div>
    </div>
</li>

<li class="topmenu"><a href="#"><span>Telecoms</span></a>
    <div class="submenu" style="width:338px;">
            <div class="column" style="width:50%">
                <ul>
                <?php
                $menu1="SELECT * from websitepages where pagetype = 'Telecoms' order by pagedesc ASC ";
                $menu2=mysql_query($menu1,$conn) or die(mysql_error());
                $counter=0;
                while($menu3=mysql_fetch_array($menu2))
                {
                    $counter++;
                    echo '<li><a href="/index.php?p='.$menu3["pagename"].'">'.$menu3["pagedesc"].'</a></li>';
                    if ($counter==$item_limit) { echo '</ul></div> <div class="column" style="width:50%"><ul>'; $counter=0; }
                }
                ?>
                </ul>
            </div>
    </div>
</li>

<li class="topmenu"><a href="#"><span>I.T. Support</span></a>
    <div class="submenu" style="width:338px;">
            <div class="column" style="width:50%">
                <ul>
                <?php
                $menu1="SELECT * from websitepages where pagetype = 'I.T. Support' order by pagedesc ASC ";
                $menu2=mysql_query($menu1,$conn) or die(mysql_error());
                $counter=0;
                while($menu3=mysql_fetch_array($menu2))
                {
                    $counter++;
                    echo '<li><a href="/index.php?p='.$menu3["pagename"].'">'.$menu3["pagedesc"].'</a></li>';
                    if ($counter==$item_limit) { echo '</ul></div> <div class="column" style="width:50%"><ul>'; $counter=0; }
                }
                ?>
                </ul>
            </div>
    </div>
</li>

<li class="topmenu"><a href="#"><span>Security</span></a>
    <div class="submenu" style="width:338px;">
            <div class="column" style="width:50%">
                <ul>
                <?php
                $menu1="SELECT * from websitepages where pagetype = 'Security' order by pagedesc ASC ";
                $menu2=mysql_query($menu1,$conn) or die(mysql_error());
                $counter=0;
                while($menu3=mysql_fetch_array($menu2))
                {
                    $counter++;
                    echo '<li><a href="/index.php?p='.$menu3["pagename"].'">'.$menu3["pagedesc"].'</a></li>';
                    if ($counter==$item_limit) { echo '</ul></div> <div class="column" style="width:50%"><ul>'; $counter=0; }
                }
                ?>
                </ul>
            </div>
    </div>
</li>

<li class="topmenu"><a href="#"><span>Networking</span></a>
    <div class="submenu" style="width:338px;">
            <div class="column" style="width:50%">
                <ul>
                <?php
                $menu1="SELECT * from websitepages where pagetype = 'Networking' order by pagedesc ASC ";
                $menu2=mysql_query($menu1,$conn) or die(mysql_error());
                $counter=0;
                while($menu3=mysql_fetch_array($menu2))
                {
                    $counter++;
                    echo '<li><a href="/index.php?p='.$menu3["pagename"].'">'.$menu3["pagedesc"].'</a></li>';
                    if ($counter==$item_limit) { echo '</ul></div> <div class="column" style="width:50%"><ul>'; $counter=0; }
                }
                ?>
                </ul>
            </div>
    </div>
</li>

<li class="topmenu"><a href="#"><span>Online Shop</span></a>
    <div class="submenu" style="width:338px;">
            <div class="column" style="width:50%">
                <ul>
                <li><a href="/shop/index.php?mod=cart">Shopping Cart</a></li>
                <?php
                $menu1="SELECT * from websitepages where pagetype = 'Shop' order by pagedesc ASC ";
                $menu2=mysql_query($menu1,$conn) or die(mysql_error());
                $counter=0;
                while($menu3=mysql_fetch_array($menu2))
                {
                    $counter++;
                    echo '<li><a href="/index.php?p='.$menu3["pagename"].'">'.$menu3["pagedesc"].'</a></li>';
                    if ($counter==$item_limit) { echo '</ul></div> <div class="column" style="width:50%"><ul>'; $counter=0; }
                }
                ?>
                </ul>
            </div>
    </div>
</li>

</ul> 
```

看到这个小提琴：http: [//jsfiddle.net/charliejsford/WxJcz/](http://jsfiddle.net/charliejsford/WxJcz/)

菜单后面有一个白色背景，我也需要更改它的颜色。

有什么想法我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:00:18.870

这是修复，显示：inline-block; 将其推向左侧和边距：0 0%；没有将其对准中心。

```
ul#css3menu_top {
    font-size:0;
    width:100%;
    z-index:999;
    position:relative;
    display: block;
    zoom:1;
    padding:0 0%;
    margin:0 auto;
    *display:inline;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:18:29.570

您需要将整个代码包装到一个 div`center`中，然后再包装。

> 实际上，要使 div 居中，您需要为其指定宽度，因此您需要指定导航菜单的宽度，然后对此菜单进行编码...

例如你决定你的菜单是`width:500px`

然后将整个包裹`menu`在 a`div`中并以这种方式标记css

```
<div class="centermenu">
//whole menu code(html) goes here
</div> 
```

* * *

**css**

```
.centermenu{
   position:relative;    
   width:500px;
   margin-left:auto;
   margin-right:auto;
} 
```

希望能帮助到你。

# java - PriorityQueue 具有相同优先级的对象

> ID：15731967
> 
> 赞同：12
> 
> 时间：2013-03-31T16:55:19.660
> 
> 标签：java, priority-queue

我正在使用优先级队列来排序和使用大量自定义对象。对象有一个“重量”，即它们的自然顺序。但是，插入优先级队列的不同对象可能具有相同的“权重”。在这种情况下，我希望优先级队列按照它们放入队列的顺序对它们进行排序。

例如，如果我按该顺序添加 CustomObjects A、B、C、D，它们都具有相同的“权重”，那么优先级队列也应该按该顺序返回它们——即使我轮询一个或多个对象在添加其他之前。

这是我的自定义对象的 CompareTo：

```
public int compareTo(CustomObject o) {
    int thisWeight = this.weight;
    int thatWeight = o.weight;
    if(thisWeight < thatWeight){
        return -1;
    }
    else{
        return 1;
    }
} 
```

虽然我认为这会保持最初的顺序，但事实并非如此。当我输入权重为 1 的 A、B、C 时会发生这种情况；投票A；并添加权重为 1 的 D，E。不知何故，D 和 E 排序在 B 之后，但在 C 之前。

我知道 PriorityQueues 的迭代器没有返回正确的顺序，所以我查看顺序的能力有限 - 但是我可以看到元素离开队列的顺序，它显然没有遵循路径我想要它。

建议？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-31T16:58:28.910

如果您需要根据插入顺序进行排序，则需要为时间戳使用额外的元素。即关于插入和等重使用`timestamp`来查看首先插入的元素。所以`CustomObject`应该是这样的：

```
class CustomObject {  
   int weight;  
   long timestamp;  
} 
```

比较应该是：

```
public int compareTo (CustomObject o) {  
    int thisWeight = this.weight;  
    int thatWeight = o.weight;  
    if (thisWeight != thatWeight) {  
        return thisWeight - thatWeight;  
    }  
    else {  
        return this.timestamp - o.timestamp;  
    }  
} 
```

较小的`timestamp`意味着它是*较早*插入的，因此您保持插入顺序。

`add`您还可以通过维护在每个或上更新的计数器来使用“逻辑”时间`remove`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-31T16:58:00.977

您可以使用自动递增的序列号作为辅助键，并使用它来打破平局。

Javadoc for[`PriorityBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html)包含此技术的一个示例：

> 此类上的操作不保证具有相同优先级的元素的顺序。如果您需要强制执行排序，您可以定义自定义类或比较器，它们使用辅助键来打破主要优先级值的关系。例如，这里有一个类将先进先出的平局应用于可比较的元素。要使用它，您将插入一个新`FIFOEntry(anEntry)`的而不是普通的条目对象。
> 
> ```
> class FIFOEntry<E extends Comparable<? super E>>
>      implements Comparable<FIFOEntry<E>> {
>    final static AtomicLong seq = new AtomicLong();
>    final long seqNum;
>    final E entry;
>    public FIFOEntry(E entry) {
>      seqNum = seq.getAndIncrement();
>      this.entry = entry;
>    }
>    public E getEntry() { return entry; }
>    public int compareTo(FIFOEntry<E> other) {
>      int res = entry.compareTo(other.entry);
>      if (res == 0 && other.entry != this.entry)
>        res = (seqNum < other.seqNum ? -1 : 1);
>      return res;
>    }
>  } 
> ```

# c# - 从 C# 运行 MySQL 命令时忽略 @ 符号

> ID：15731968
> 
> 赞同：1
> 
> 时间：2013-03-31T16:55:30.233
> 
> 标签：c#, mysql

我有以下 MySQL 命令，它使用足球队最近 6 场比赛填充表格：

```
insert into lastxgames
select team, matchdate, hometeam, awayteam, fthg, ftag
from (
  select
    team, soccerdata.matchdate, hometeam, awayteam, fthg, ftag,
    @teamCounter:=IF(@prevHome=team,@teamCounter+1,1) teamCounter,
    @prevHome:=team
  from soccerdata
    join (
      select distinct matchdate, hometeam team
      from soccerdata
      union 
      select distinct matchdate, awayteam
      from soccerdata
    ) allgames on soccerdata.matchdate = allgames.matchdate
      and (soccerdata.hometeam = allgames.team or soccerdata.awayteam = allgames.team)
    join (select @teamCounter:=0) t
  order by team, soccerdata.matchdate desc
  ) t 
where teamCounter <= 6
order by team, matchdate desc; 
```

我想从 C# 程序中运行它，但是当我这样做时，查询失败，因为 @ 符号被用作查询参数，而不是按照 MySQL 的预期方式处理（MySQL 变量？）。

在我的 C# 程序中，我只是声明一个字符串来保存查询并将其添加到 MySqlCommand：

```
string insertCommand = @"insert into lastxgames...";
using (MySqlCommand cmdInsert = new MySqlCommand(insertCommand, dcConnection))
{
  cmdInsert.ExecuteNonQuery();
} 
```

有没有办法让 C# 忽略 @ 符号，以便 @teamCounter 和 @prevHome 不被视为查询参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:01:33.460

正确的做法是将其作为数据库中的存储过程并让您的 C# 运行该存储过程。

# html - 如果内联元素超过 max-width 并分成两行，CSS max-width 会导致过多的空白

> ID：15731969
> 
> 赞同：0
> 
> 时间：2013-03-31T16:55:33.113
> 
> 标签：html, css

我正在尝试设置`li`元素的样式以动态匹配其文本内容，并且它们之间的间距相等，`li's`但似乎无法做到这一点。

结果目前看起来像： ![在此处输入图像描述](https://i.stack.imgur.com/Zi2bM.jpg)

我希望它们之间的空白`li's`是一致的，但整体`li's`是动态宽度但不超过一定宽度：（因为有两种不同`ul's`的样式，它们是具有不同填充的样式，所以这就是左侧菜单和左侧菜单之间的空间大小不同的原因正确的菜单，但每个菜单`li`在各自的位置始终保持间距`ul's`） ![在此处输入图像描述](https://i.stack.imgur.com/zFdkV.jpg)

css是（任意）：

```
li{
   display: inline-block;
   max-width: 95px;
   padding: 5px 10px;
   etc....
} 
```

我正在尝试使用 css 来完成此操作，尽可能避免使用 JavaScript 或 html 标记。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T19:21:38.333

这针对 Opera、Chrome 和 IE10 进行了优化。Firefox 和 Safari 遵循较旧的 Flexbox 规范，并且当列表中的项目数量平衡时看起来最好。对于非 Flexbox 浏览器，有一个不错的后备方案。您可能需要添加额外的样式来掩盖不均匀的列表高度。

[http://codepen.io/cimmanon/pen/HxLvf](http://codepen.io/cimmanon/pen/HxLvf)

```
nav {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
}

ul {
  display: table-cell; /* non-flexbox browsers */
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 1 auto;
  -ms-flex: 1 1 auto;
  flex: 1 1 auto;
}

li {
  display: table-cell; /* non-flexbox browsers */
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -webkit-flex: 1 1 10em;
  -ms-flex: 1 1 10em;
  flex: 1 1 10em;
  width: 10em; /* for old Firefox/Safari */
  /* for vertical/center alignment */
  -webkit-flex-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -webkit-flex-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  text-align: center;
}

/* pretty it up! */
nav {
  background: #99D;
}

ul {
  list-style: none;
  padding: 0;
}

li {
  padding: .5em 1em;
  background: white;
  border: 1px solid;
}

<nav>
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Latest Projects</a></li>
        <li><a href="#">Products & Eco Funding</a></li>
        <li><a href="#">The Green Deal</a></li>
    </ul>

    <ul>
        <li><a href="#">Latest Projects</a></li>
        <li><a href="#">Job Vacancies</a></li>
        <li><a href="#">About Us</a></li>
        <li><a href="#">Contact Us</a></li>
    </ul>
</nav> 
```

事实上，您有 2 个列表要在其中均衡元素的宽度，这使得 Flexbox 成为必要。如果您只有一个列表，您可以将整个事情简化为仅使用`display: table`on`ul`和`display: table-cell`.`li`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:04:35.620

如果您希望元素之间的空格相同，即。较小的标题将具有较小的菜单项，例如您的图像中，那么您就不走运了。我认为没有 JavaScript 就无法做到这一点。

如果您要设置统一宽度的菜单项，那么这很容易完成，只需将`<li>`s 设置为`100%/(number of menu items)`并浮动它们。

```
li {
    float:left;
    width:14.2857% /* 100/17 */
} 
```

# events - 如何制作一个phonegap可选择的可滚动div列表

> ID：15731970
> 
> 赞同：0
> 
> 时间：2013-03-31T16:55:38.060
> 
> 标签：events, cordova, touch, selected, scrollable

正如标题所说。我想在 div 中创建一个 div 元素列表。我希望能够向上和向下滚动列表，当列表不再滚动时，我希望能够单击列出的元素做某事。我不知道该怎么做。

每当用户触摸 div 时都会执行 touchmove 事件，即使 div 正在滚动。然后我不知道如何让程序知道 div 不再滚动，所以下一次触摸元素将触发不可滚动事件.....

编辑：

到目前为止我所拥有的是......但是这是一个快速的“修复”，它没有按预期工作。例如，如果您快速上下滚动，那么 div 会认为您按下了其中一个元素。

exerciseWrapper 是滚动 div 内的元素。每个元素都包裹在 exerciseWrapper 周围。

```
$('.exerciseWrapper').on('touchstart',function(){

        touchstart=true;
                setTimeout(function(){

                    touchstart=false;           
                    }, 100); 

    });

    $('.exerciseWrapper').on('touchend',function(){

        if(touchstart)
        {
                $('.exerciseWrapper').not(this).css('border-color','black');
                $(this).css('border-color','orange');
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:24:40.397

好的，所以我终于想通了。。我无法解决这个问题的原因是因为我无法获得其他事件，然后 eventstart 和 event end 才能正常工作...在撰写本文时，我仍然无法获得其他事件，如 eventcancel 和 eventleave 工作。但是 eventmove 有效，我使用此事件解决了问题。当您移动手指时，eventmove 会不断更新其链接的元素。然后，如果我滚动我的 div（使用 touchmove 事件），我有一个 touchmove 变量始终为真。当我停止移动时，我可以再次单击所选元素并使用正常的 eventstart 事件。这是我的工作代码：

```
var touchmove=false;
function AddExercisesEvents()
{
    $('#exerciseMenu').on('touchmove',function(){

            touchstart=true;    
                        $('h1').text("move");

        });

    $('.exerciseWrapper').on('touchend mouseup',function(event){
                    event.stopPropagation();
                    event.preventDefault();
                    //  $('.exerciseWrapper').off();

                if(event.handled !== true)
                {
            touchstart=false;

            //ENTERING editExercise Menu..!
            if(!touchstart)
                {
        //insert magic here 
                                alert($(this).attr('id'));

                }

                }
                    return false;
                                 });
} 
```

# php - 如何强制下载列出和链接的文件，但打开 404？

> ID：15731976
> 
> 赞同：0
> 
> 时间：2013-03-31T16:56:01.513
> 
> 标签：php, html, download

我的问题是我想要一个在不同计算机之间使用的个人文件存储网站，我对 PHP 知之甚少，但更多的是 HTML+CSS。我找到了如何列出服务器目录中的文件，这些文件似乎有下载链接。但是，如果您继续单击此列表，则会加载 404 错误页面。不应该下载吗？我怎样才能强制下载文件？此外，应该能够下载所有文件，而不仅仅是某种类型的文件（例如 .pdf 或 .jpg）。我在这个网站和其他网站上进行了广泛的查看，但没有找到可行的解决方案。

```
 <body>
    <?php
     if ($handle = opendir('./uploads/')) {
       while (false !== ($file = readdir($handle))) {
              if ($file != "." && $file != "..") {
                $thelist .= '<li><a href="'.$file.'">'.$file.'</a></li>';
              }
           }
      closedir($handle);
      }
    ?>
    <h1>List of files:</h1>
    <ul><?php echo $thelist; ?></ul>
</body> 
```

谢谢，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-31T17:31:19.347

更好的解决方案是创建 FTP 服务器。它更容易管理，更快的 dw/up

# c# - 特定用户的应用程序数据

> ID：15731979
> 
> 赞同：0
> 
> 时间：2013-03-31T16:56:24.790
> 
> 标签：c#, windows, directory

我正在尝试获取特定用户的应用程序数据文件夹。当我以 NT AUTHORITY/SYSTEM 身份运行我的应用程序时，我得到了

```
C:\Windows\system32\config\systemprofile\AppData\Roaming 
```

但我想得到

```
C:\Users\username\AppData\Roaming 
```

我在用着

```
Environment.SpecialFolder.ApplicationData 
```

我不知道这样做，除非通过获取用户名 ant 将其插入

```
C:\Users\%%\AppData\Roaming 
```

但并不是每个人都有一个用户。

# php - mysql注入损坏？

> ID：15731983
> 
> 赞同：3
> 
> 时间：2013-03-31T16:56:51.357
> 
> 标签：php, mysql, database, linux, code-injection

我刚刚注意到我的`mysql_real_escape_string`函数不在我的一些 php 脚本中的 '' 内，并且它很容易受到注入和`sleep(30)`在我的生产站点上执行的事情的影响。

经过大量阅读后，我将采用 PDO 路线并实施准备好的语句。但这还没有实现。

几个问题，我在我的日志中看到很多人在网上进行了注射，但我看不到任何损害。该站点运行以执行 sql 查询的用户`update/select/delete/insert`只有特权。

但是我很担心`sleep(30)`什么不起作用，如果他们造成了我没有看到的任何损害？
你能告诉我在哪里检查损坏情况，或者我是否可以安全地受到至少重大损坏？
他们可以更改隐藏的 mysql 设置或系统设置吗？

顺便说一句，我尝试在 centos 6+ linux 和 php 上运行最新更新。

## 谢谢

编辑：澄清一下，数据库几乎是空的，我不担心数据在那里，密码是 sh512 散列的。所以里面的数据并不重要，因为这是我正在编写的一个新应用程序。但我担心他们是否改变了系统或我应该担心的数据库上的任何内容。我看到的一些注入有 java 等，但日志很大，需要时间来检查它。我还在注入中看到了一些模式字符串。

现在的问题是他们可以阅读我的架构信息或修改它们吗？如果它是受限制的用户，为什么睡眠之类的功能会起作用？他们还可以运行哪些其他功能？

请注意，我在同一个 MySQL 中有其他数据库。我应该担心这些吗？

'' 我的意思是：select * from dbname where id=scaped_string 我应该把它放在引号里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T17:00:42.200

检查对数据造成的损坏取决于数据库中的数据类型。如果仔细检查后您没有发现任何问题，那么可能没有任何问题。如果您的数据大小合适，这将是困难的或不可能的。

有许多自动漫游器在互联网上漫游，寻找易受 SQL 注入攻击的代码。他们的尝试可能就是您在日志中看到的。仅仅因为进行了尝试并不一定意味着发生了入侵。

另请记住，您不一定有数据被盗的证据。确定这一点的最佳方法是获取您的服务器日志并在当前服务器的副本上重放它们，检查您是否获得任何数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T18:04:40.070

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T17:01:48.040

据我所知，除了清理您的输入以保护您的数据不被注入之外，没有隐藏的 mysql 设置。

你说，你看到很多人对网站进行注入，但你看不到任何损坏，可能他们只是注入一个普通的 HTML 标签，或者尝试 XXS 攻击，因为真正的 mysql 注入，可以删除你的表，更新，重置所有受到 mysql 注入的数据，所以如果我是你，我会立即实施 PDO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T17:04:26.817

如果你有管理面板之类的东西，你应该检查你服务器上的 webshel​​l 和其他类似后门的工具，因为攻击者可以很容易地从适当的表中读取你的凭据。当然，还要查找页面中的任何更改（查找 iframe 和可疑的 JS 代码）。

最坏的情况是在可写目录中执行 INTO OUTFILE，然后通过本地包含或直接访问它。

但是，首先，在担心之前，您应该将其视为最常见的自动 sql 注入检查器（您可能会说是机器人），并且如果您没有看到任何损坏 - 可能没有入侵。但要小心 - 现在大多数入侵者不会寻找任何可见的损害，他们很可能会在您的页面中注入一些恶意代码（例如带有漏洞的 iframe）。

所以，不要太偏执，但仍要谨慎 :)

# html - 表格中的表格未正确显示

> ID：15731987
> 
> 赞同：0
> 
> 时间：2013-03-31T16:57:49.437
> 
> 标签：html, forms, html-table

我是高中二年级学生，我正在学习网页设计。整个夏天我自学了 HTML 和基本的 CSS。这是有益的，因为我的网页设计老师对 HTML、CSS 或 JavaScript 一无所知。我们必须创建一个个人网站，老师说我可以做我教会的网站，因为我已经在做它了。

老师让我们使用课堂上讲过的书中的东西。这本书已经过时了。它教授框架/框架集、表格布局，并讨论了与网景和 Internet Explorer 的兼容性。（我正在做一个真正的网站。没有任何框架。）

我需要在我的网站中包含一张表格，但我不需要一张。我决定尝试在表格中放置一个表格。我将表单放在`<tr>`标签内，但显示不正确。

如果你们有任何更好的餐桌创意，那么我会全力以赴。

[http://www.gracepensacola.com](http://www.gracepensacola.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:02:15.223

我猜将表单放入`tr`标签不是有效的 HTML。你需要做的是这样的：

```
<table>
   <tr>
      <td>Put your form here</td>
   </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:44:41.677

在谷歌上搜索了几个页面后，我遇到了一个例子。我将示例放在 JsFiddle 中。

`<table>`应该嵌套在`<form>`.

[http://jsfiddle.net/Wf33B/](http://jsfiddle.net/Wf33B/)

```
<form method="post">
    <table>
        <tr>
            <td>
                <label for="username">Username:</label>
            </td>
            <td>
                <input type="text" name="username" id="username" />
            </td>
        </tr>
        <tr>
            <td>
                <label for="password">Password:</label>
            </td>
            <td>
                <input type="password" name="password" id="password" />
            </td>
        </tr>
        <tr>
            <td>
                <input type="submit" name="cancel" value="Cancel" />
            </td>
            <td>
                <input type="submit" name="send" value="Send" />
            </td>
        </tr>
    </table>
</form> 
```

# ios - 使用 NSFetchedResultsController 在表格顶部插入单元格

> ID：15731991
> 
> 赞同：4
> 
> 时间：2013-03-31T16:58:20.957
> 
> 标签：ios, objective-c, core-data

我的应用程序正在使用核心数据，并且我正在使用 NSFetchedResultsController 来填充我的表。但是，当我插入一个新单元格时，它会按字母顺序（升序或降序 - 根据 sortDescriptor）插入到表格中。我希望它只插入顶部。我尝试注释掉 sortDescriptor 但应用程序崩溃，因为 NSFetchedResultsController 需要一个。知道我该如何解决吗？我有一个可能不相关的问题。现在我的应用程序有核心数据，后来我想添加 icloud 支持。那么我是否必须在我的代码中遵循 NSFetchedResultsController 方法，以便我的应用程序稍后可以准备好 icloud？或者我可以遵循任何方法？我尝试了其他方法，我发布的主要问题得到了解决，因为它更灵活。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T17:25:29.417

添加一个`createdDate`属性，或与您的模型类似的东西（如果您还没有）。之后，您可以在`sortDescriptor`命令中使用此属性`NSFetchedResultsController`

# scala - [SlickException：读取列的 NULL 值 (USERS /670412212).LOGIN_ID]

> ID：15731992
> 
> 赞同：18
> 
> 时间：2013-03-31T16:58:22.623
> 
> 标签：scala, playframework-2.0, slick, typesafe-stack

我正在使用带有播放框架 2.1.0 的 Slick 1.0.0。`Users`查询表时出现以下错误。的值`LOGIN_ID`在 DB 中为空。我正在执行的查询是：

```
 val user = { for { u <- Users if u.providerId === id.id } yield u}.first 
```

这会导致以下错误：

```
play.api.Application$$anon$1: Execution exception[[SlickException: Read NULL value for column (USERS /670412212).LOGIN_ID]]
    at play.api.Application$class.handleError(Application.scala:289) ~[play_2.10.jar:2.1.0]
    at play.api.DefaultApplication.handleError(Application.scala:383) [play_2.10.jar:2.1.0]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anonfun$12$$anonfun$apply$24.apply(PlayDefaultUpstreamHandler.scala:314) [play_2.10.jar:2.1.0]
    at play.core.server.netty.PlayDefaultUpstreamHandler$$anonfun$12$$anonfun$apply$24.apply(PlayDefaultUpstreamHandler.scala:312) [play_2.10.jar:2.1.0]
    at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1.0]
    at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1.0]
scala.slick.SlickException: Read NULL value for column (USERS /670412212).LOGIN_ID
    at scala.slick.lifted.Column$$anonfun$getResult$1.apply(ColumnBase.scala:29) ~[slick_2.10-1.0.0.jar:1.0.0]
    at scala.slick.lifted.TypeMapperDelegate$class.nextValueOrElse(TypeMapper.scala:158) ~[slick_2.10-1.0.0.jar:1.0.0]
    at scala.slick.driver.BasicTypeMapperDelegatesComponent$TypeMapperDelegates$StringTypeMapperDelegate.nextValueOrElse(BasicTypeMapperDelegatesComponent.scala:146) ~[slick_2.10-1.0.0.jar:1.0.0]
    at scala.slick.lifted.Column.getResult(ColumnBase.scala:28) ~[slick_2.10-1.0.0.jar:1.0.0]
    at scala.slick.lifted.Projection15.getResult(Projection.scala:627) ~[slick_2.10-1.0.0.jar:1.0.0]
    at scala.slick.lifted.Projection15.getResult(Projection.scala:604) ~[slick_2.10-1.0.0.jar:1.0.0] 
```

## 我的用户表定义为：

```
package models

import scala.slick.driver.MySQLDriver.simple._

case class User(userId:String,email:String,loginId:String,fullName:String,firstName:String,lastName:String,location:String,homeTown:String,providerId:String,provider:String,state:String,zip:String,accessKey:String,refreshKey:String,avatarUrl:String)

object Users extends Table[User]("USERS") {
  def userId = column[String]("USER_ID", O.PrimaryKey) // This is the primary key column
  def email =  column[String]("EMAIL",O.NotNull)
  def loginId = column[String]("LOGIN_ID",O.Nullable)
  def fullName = column[String]("FULL_NAME",O.NotNull)
  def firstName = column[String]("FIRST_NAME",O.Nullable)
  def lastName = column[String]("LAST_NAME",O.Nullable)
  def location = column[String]("LOCATION",O.Nullable)
  def homeTown = column[String]("HOME_TOWN",O.Nullable)
  def providerId = column[String]("PROVIDER_ID",O.Nullable)
  def provider = column[String]("PROVIDER",O.Nullable)
  def state = column[String]("STATE",O.Nullable)
  def zip = column[String]("ZIP",O.Nullable)
  def accessKey = column[String]("ACCESS_KEY",O.Nullable)
  def refreshKey = column[String]("REFRESH_KEY",O.Nullable)
  def avatarUrl = column[String]("AVATAR_URL",O.Nullable)

  // Every table needs a * projection with the same type as the table's type parameter
  def * = userId ~ email ~ loginId ~ fullName ~ firstName ~ lastName ~ location ~ homeTown ~ providerId ~ provider ~ state ~ zip ~ accessKey ~ refreshKey ~ avatarUrl <> (User,User.unapply _)
} 
```

请帮忙。看起来 Slick 无法处理来自 DB 的 Null 值？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-31T17:47:37.207

你的案例课不行。如果你使用`O.Nullable`，你的所有属性都必须是 `Option[String]`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-24T13:02:36.503

如果您收到此错误，您将不得不创建 properties `O.Nullable`，**或者**您必须指定您的查询返回一个选项。

例如，假设`rightJoin`您可能不想将正确记录的属性设为可选。在这种情况下，您可以使用自定义生成结果的方式`.?`

```
val results = (for {
  (left, right) <- rightRecord.table rightJoin leftRecord.table on (_.xId === _.id)
  } yield (rightRecord.id, leftRecord.name.?)).list
results map (r => SomeJoinedRecord(Some(r._1), r._2.getOrElse(default))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-09T08:38:34.653

如果列包含空值并且在运行时它在列响应中获得空值，则会出现此问题。如果您在下面的代码中看到，我的 cust_id 可以为空，但它没有空值。因为，有一项工作可以确保它永远不会为空。因此，以下映射有效。但是，最好查看表结构并相应地创建类。这避免了讨厌的运行时异常。

如果数据库上的表定义如下：

```
CREATE TABLE public.perf_test (
    dwh_id serial NOT NULL,
    cust_id int4 NULL,
    cust_address varchar(30) NULL,
    partner_id int4 NULL,
    CONSTRAINT perf_test_new_dwh_id_key UNIQUE (dwh_id)
); 
```

对应的类定义如下。但是，建议将 cust_id 也设置为`Option[Int]`. 但是，只要它有值且没有空值，就不会遇到错误。

导入 slick.jdbc.PostgresProfile.api._

```
class PerfTest(tag: Tag) extends Table[(Int, Int, Option[String], Option[Int])](tag, "perf_test") {
  def dwhId = column[Int]("dwh_id")
  def custId = column[Int]("cust_id")
  def custAddress = column[Option[String]]("cust_address")
  def partnerId = column[Option[Int]]("partner_id")
  def * = (dwhId, custId, custAddress,partnerId)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-05T11:33:49.097

发生在我身上的是我在数据库中有异常，一些值意外地为空 - 那些我没想到的。所以也不要忘记检查您的数据:)

# php - mysqli_query 不识别数据库？

> ID：15731995
> 
> 赞同：-1
> 
> 时间：2013-03-31T16:58:29.400
> 
> 标签：php, mysql, mysqli

我已经就我正在处理的代码提出了一个问题，只是不是同一个问题。不管怎样，很抱歉重新发布！

所以我的代码有问题，如下：

```
<?php
// Create connection

$host = "localhost";
$username="tudor";
$password="passw0rd";

$con=mysqli_connect($host, $username, $password);
if(! $con )
{
  die('Could not connect: ' . mysqli_error());
}
echo 'Connected successfully<br />';

$db_1 = mysqli_select_db( $con, 'db_1' );
if (! $db_1) {
die('Could not select database: ' . mysqli_error());
}
else {
echo "Database successfully selected<br />===============================<br />";
}

//===================================

$a = 1;
$b = 2234;

$table = "CREATE TABLE info (id INT NOT NULL AUTO_INCREMENT, city CHAR(40), country CHAR(40))";
 if (! $table) {
die('Could not create table ' . mysqli_error($con));
}
else {
echo "Table created<br />";
}

$insert = "INSERT INTO info (city, country) VALUES ($a, $b)";
 if (! $insert) {
die('Could not insert ' . mysqli_error($con));
}
else {
echo "Inserted<br />";
}

$select = "SELECT * FROM info";  

$result = mysqli_query ($con, $insert);
 if (! $result) {
die('Result not working ' . mysqli_error($con));
}
else {
echo "Result working<br />";
}

echo "result: ".$result['city']. " ";

mysqli_close($con);

?> 
```

这输出（块引用不显示分页符）：

> 连接成功 数据库成功选择 ================================ 表已创建 插入的结果不起作用 表 'db_1.info' 没有'不存在

“表'db.info'”不存在是什么意思？它清楚地表明我的信息表已创建......我尝试做的是反转 $result 查询中的变量：$result = mysqli_query ($insert, $con);，因为我在一本书中看到过这种语法。然而，它给出的只是输出中的以下消息：

> 警告：mysqli_query() 期望参数 1 为 mysqli，字符串在 C:\wamp...

有人想吗？提前致谢！

编辑：非常感谢大家的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T17:04:48.343

你没有在你的`mysqli_query()`on`$table`之前做一个`mysqli_query()`on `$insert`，你也没有做一个`mysqli_query()`on`$select`

```
$table = "CREATE TABLE info (id INT NOT NULL AUTO_INCREMENT, city CHAR(40), country CHAR(40))";
 if (! $table)

$insert = "INSERT INTO info (city, country) VALUES ($a, $b)";
 if (! $insert) {

$select = "SELECT * FROM info";  

$result = mysqli_query ($con, $insert);
if (! $result) 
```

尝试添加`mysqli_query()`-

```
$table_sql = "CREATE TABLE `info` (`id` INT NOT NULL AUTO_INCREMENT, `city` CHAR(40), `country` CHAR(40), PRIMARY KEY (`id`))";
$table = mysqli_query ($con, $table_sql);
 if (! $table) {
die('Could not create table ' . mysqli_error($con));
}
else {
echo "Table created<br />";
}

$insert_sql = "INSERT INTO `info` (`city`, `country`) VALUES ('$a', '$b')";
$insert = mysqli_query ($con, $insert_sql);
 if (! $insert) {
die('Could not insert ' . mysqli_error($con));
}
else {
echo "Inserted<br />";
}

$select = "SELECT * FROM `info`";  

$result = mysqli_query ($con, $select);
 if (! $result) {
die('Result not working ' . mysqli_error($con));
}
else {
echo "Result working<br />";
} 
```

**编辑** 此外，这一行将失败 -

```
echo "result: ".$result['city']. " "; 
```

因为您必须使用从查询中获取数组[`mysqli_fetch_array()`](http://www.php.net/manual/en/mysqli-result.fetch-array.php)

```
$results = mysqli_fetch_array($result);
echo "result: ".$results['city']. " "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:03:36.877

> 表 'db_1.info' 不存在

意味着，该表`info`在 db 中不存在，`db_1`因此请确保是这种情况。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-31T17:21:56.993

行。这是你的代码。

```
if(! $con )
{
  die('Could not connect: ' . mysqli_error());
}
echo 'Connected successfully<br />';
if (!$con) {trigger_error("Could not connect to MySQL: " . mysqli_connect_error()); }   
else { echo "Database successfully connected<br />===============================<br />"; }
$a = 1;
$b = 2234;
$table = mysqli_query($con,"CREATE TABLE IF NOT EXISTS info (`id` int(11) unsigned NOT NULL auto_increment,
`city` CHAR(40), 
`country` CHAR(40), PRIMARY KEY  (`id`) )ENGINE=MyISAM  DEFAULT CHARSET=utf8");
  if (!$table) {
die('Could not create table ' . mysqli_error($con));
}
else {
echo "Table created<br />";
}
$insert = mysqli_query ($con,"INSERT INTO info (city, country) VALUES ('$a', '$b')");
 if (!$insert) {
die('Could not insert ' . mysqli_error($con));
}
else {
echo "Inserted<br />";
}
$select =  mysqli_query ($con,"SELECT * FROM info");  
$res=mysqli_fetch_array($select);
 if (! $res) {
die('Result not working ' . mysqli_error($con));
}
else {
echo "Result working<br />";
}

echo "result: ".$res['city']. " ";
echo "result: ".$res['country']. " ";
mysqli_close($con); 
```

# mysql - Mysql join 与另一个表中的计数结果

> ID：15731999
> 
> 赞同：0
> 
> 时间：2013-03-31T16:59:38.043
> 
> 标签：mysql, select, join, count

我有两张表，一张有数字范围，第二张有数字。我需要选择所有范围，其中至少有一个状态为 (2,0) 的数字。我尝试了许多不同的连接，其中一些连接需要很长时间才能执行，我结束的连接速度很快，但它选择的范围非常小。

```
 SELECT SQL_CALC_FOUND_ROWS md_number_ranges.*
     FROM md_number_list
     JOIN md_number_ranges
       ON md_number_list.range_id = md_number_ranges.id
    WHERE md_number_list.phone_num_status NOT IN  (2, 0)
      AND md_number_ranges.reseller_id=1
 GROUP BY range_id
    LIMIT 10
   OFFSET 0 
```

我需要的是“选择所有范围，加入 number.range_id = range.id 的号码，并且至少有一个电话号码状态不在 (2, 0) 中的号码。

任何帮助将非常感激。

示例数据结构：

md_number_ranges：

```
id  |  range_start  |  range_end |  reseller_id 
 1  |     000001    |    000999  |       1
 2  |     100001    |    100999  |       2 
```

md_number_list：

```
id  |   range_id    |  number    |  phone_num_status
 1  |       1       |  0000001   |       1 
 2  |       1       |  0000002   |       2
 3  |       2       |  1000012   |       0
 4  |       2       |  1000015   |       2 
```

我希望能够选择范围 1，因为它有一个状态为 1 的数字，但没有范围 2，因为它有两个数字，但状态我不想选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:11:24.973

很难说出你想要什么，但也许这会做：

```
SELECT *
from   md_number_ranges m
join (
   SELECT md_number_ranges.id
        , count(*) as FOUND_ROWS
   FROM   md_number_list
   JOIN   md_number_ranges
     ON   md_number_list.range_id = md_number_ranges.id
   WHERE md_number_list.phone_num_status NOT IN  (2, 0)
     AND md_number_ranges.reseller_id=1
   GROUP BY range_id
   ) x
on x.id=m.id
LIMIT 10
OFFSET 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:29:44.263

这是你要找的吗？

```
SELECT DISTINCT r.*
FROM md_number_ranges r
    JOIN md_number_list l ON r.id = l.range_id
WHERE l.phone_num_status NOT IN (0,2) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!7/6b482/2)