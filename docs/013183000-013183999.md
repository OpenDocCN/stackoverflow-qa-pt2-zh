# StackOverflow 问答 13183000-13183999

# bash - LFTP 后继续处理 Bash 脚本

> ID：13183001
> 
> 赞同：3
> 
> 时间：2012-11-01T18:07:36.377
> 
> 标签：bash, lftp

我想在 bash 脚本的开头使用 lftp，但是如何在不停止脚本处理的情况下退出 lftp？我试过用“exit”、“quit”和“bye”来结束 lftp 部分，但它们都停止了脚本。

以前，我分成两个脚本，并按正确的顺序运行它们。是否可以将它们组合成一个脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T18:24:11.997

或者更明确地说，使用 << EOF。

例如

```
#!/bin/bash
#CMP 01.04.2013
#
#<<EOF below is the functional equivalent of hitting .Enter. on your keyboard.
#It allows the rest of the commands to be executed once connected

lftp -e 'mirror -R /home/pi/LocalDirToMirror ~/TargetDir' -u YourUsername,YourPassword  ftp://FTP_URL_Location <<EOF
quit 0
EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:52:31.820

用 EOF 结束脚本的 LFTP 部分，在它自己的行上。这就是你需要做的！

# ruby - 红宝石鞋，堆栈之间的通信

> ID：13183002
> 
> 赞同：1
> 
> 时间：2012-11-01T18:07:37.190
> 
> 标签：ruby, variables, shoes

我这里有个大问题。我无法在鞋叠之间进行交流。这是一个恢复的示例，以显示问题：

```
Shoes.app do 
  stack :width => "100%", :height => "25%" do
    button "" do
      a.show
    end
  end
  a = stack :width => "100%", :height => "25%", :hidden => true do
    b = para "lol"
  end
end 
```

正如您所理解的，它不能工作，因为变量 a 是在能够使用之前声明的。但是，由于第一个堆栈上的按钮，我有很多东西必须附加到第二个堆栈，这根本不可能。不知道有没有办法 我必须保持堆栈的顺序。我不希望“a.show”在“a”堆栈之后。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:13:25.100

不要使用全局变量（以 为前缀的`$`）。这是不好的做法

使用以 and 为前缀的实例变量`@`，这将在鞋子流中可见。

您在 App 对象内部工作，并且应该使用实例变量。查看[鞋子规则](http://shoesrb.com/manual/Rules.html)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:12:26.397

好吧，也许我已经恢复了我的问题太多了。我找到了一个解决方案，我现在必须在我更大的代码上进行调整。

用 $a 替换 a 就可以了。

# angularjs - 你对 transclude 函数和 clone 链接函数到底做了什么？

> ID：13183005
> 
> 赞同：70
> 
> 时间：2012-11-01T18:08:01.847
> 
> 标签：angularjs

从[Angular docs 指令](http://docs.angularjs.org/guide/directive)中，我看到 compile 函数有 3 个参数，其中之一是`transclude`. 文档提供的唯一解释是：

> transclude - 一个 transclude 链接函数：function(scope, cloneLinkingFn)。

我试图了解您在克隆链接功能中究竟会做什么。我什至不知道传递了哪些参数。我发现[了一个示例](http://jsfiddle.net/vt8BF/2/)，它有一个名为的参数`clone`，它似乎是一个 HTML 元素。是否有其他可用参数？这到底是哪个 HTML 元素？我也在考虑可能`transclude: 'element'`在我的指令中使用。`'element'`使用代替时，这些问题的答案会改变`true`吗？

我用简单的例子来理解嵌入，但我似乎找不到更复杂的例子，尤其是`transclude: 'element'`. 我希望有人可以对这一切提供更彻底的解释。谢谢。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-01T20:22:03.470

**编辑：完全完全改变我的答案并将其标记为“社区维基”（对我来说没有积分），因为当我回答这个问题时我完全错了**

正如@Jonah 在下面指出的那样，[这是一篇关于指令编译选项和使用嵌入函数的非常好的文章](http://liamkaufman.com/blog/2013/05/13/understanding-angularjs-directives-part1-ng-repeat-and-compile/)

基本思想是编译函数应该返回一个链接函数。您可以使用链接函数中提供的嵌入函数来克隆被嵌入的 DOM 元素，对其进行编译，然后将其插入到需要插入的任何位置。

[这是我在 Plunker 上的一个更好的例子](http://plnkr.co/edit/eydYuG5LGCQJBzsBJDJB?p=preview)

compile 函数的想法是它让您有机会根据在创建和调用链接函数之前传递的属性以编程方式更改 DOM 元素。

```
// a silly directive to repeat the items of a dictionary object.
app.directive('keyValueRepeat', function ($compile){
  return {
    transclude: true,
    scope: {
      data: '=',
      showDebug: '@'
    },
    compile: function(elem, attrs, transclude) {

      if(attrs.showDebug) {                
        elem.append('<div class="debug">DEBUG ENABLED {{showDebug}}</div>');
      }

      return function(scope, lElem, lAttrs) {
        var items = [];
        console.log(lElem);
        scope.$watch('data', function(data) {

          // remove old values from the tracking array
          // (see below)
          for(var i = items.length; i-- > 0;) {
            items[i].element.remove();
            items[i].scope.$destroy();
            items.splice(i,1);
          }

          //add new ones
          for(var key in data) {

            var val = data[key],
                childScope = scope.$new(),
                childElement = angular.element('<div></div>');

            // for each item in our repeater, we're going to create it's
            // own scope and set the key and value properties on it.
            childScope.key = key;
            childScope.value = val;

            // do the transclusion.
            transclude(childScope, function(clone, innerScope) {
              //clone is a copy of the transcluded DOM element content.
              console.log(clone);

              // Because we're still inside the compile function of the directive,
              // we can alter the contents of each output item
              // based on an attribute passed.
              if(attrs.showDebug) {                
                clone.prepend('<span class="debug">{{key}}: {{value}}</span>');
              }

              //append the transcluded element.
              childElement.append($compile(clone)(innerScope));
            });

            // add the objects made to a tracking array.
            // so we can remove them later when we need to update.
            items.push({
              element: childElement,
              scope: childScope
            });

            lElem.append(childElement);
          }
        });
      };
    }
  };
}); 
```

# perl - 简单的 perl 加法程序出错了？

> ID：13183006
> 
> 赞同：2
> 
> 时间：2012-11-01T18:08:02.270
> 
> 标签：perl

嗨我是一个新手 perl 学习者这个简单的 perl 程序

```
$inputline= <STDIN>;
print "first input";
print( $inputline); 
$inputline=<STDIN>;
print "second input";
print($inputline);
$sum= $inputline+$inputline;
print"sum 1stinput and 2ndinput";
print($sum); 
```

输出

```
perl count.pl
3
4
first input3
second input4
sum 1stinput and 2ndinput : 8 
```

为什么输出是 8 而不是 7？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T18:09:54.360

`$inputline`因为当它是时你添加到它自己`4`。

如果要对两个输入求和，则要么必须使用两个变量，要么在变量更改之前进行加法。例如：

```
my $input1 = <>;
my $input2 = <>;
my $sum = $input1 + $input2;
print "Sum: $sum"; 
```

或者

```
my $input = <>;
my $sum = $input;
$input = <>;
$sum += $input;
print "Sum: $sum"; 
```

您可以做一些更简单的事情，例如：

```
perl -nlwe '$sum += $_; print "Sum: $sum";' 
```

这基本上相当于：

```
use strict;
use warnings; # always use these

my $sum;
while (<>) {  # your input
    $sum += $_;
    print "Sum: $sum\n";
} 
```

使用 Ctrl-C 或 Ctrl-D 跳出循环（Windows 中的 Ctrl-Z）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T18:11:02.473

您正在使用变量 $intputline 两次。第二次引用它时，它会覆盖以前的值。您需要为每个变量使用唯一的变量名称：

```
$inputline1= <STDIN>;
print "first input";
print( $inputline1); 
$inputline2=<STDIN>;
print "second input";
print($inputline2);
$sum= $inputline1+$inputline2;
print"sum 1stinput and 2ndinput";
print($sum); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-01T18:10:20.133

Perl（或其他任何人）如何区分 $inputline 和 $inputline？为第二个变量选择不同的名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T18:20:38.213

始终在脚本顶部包含以下编译指示：

```
use strict;
use warnings; 
```

使用词法范围的变量（“my”）：

```
my $inputline= <STDIN>;
print "first input";
print( $inputline); 
my $inputline=<STDIN>;
... 
```

运行它会引发以下异常：

```
"my" variable $inputline masks earlier declaration in same scope at ... 
```

使用这些 pragma 和“my”可以帮助您避免脚本中的这个和许多其他潜在问题区域。

希望这可以帮助！

# javascript - 提交整个 dom（包括值）

> ID：13183014
> 
> 赞同：0
> 
> 时间：2012-11-01T18:08:58.757
> 
> 标签：javascript, html

是否可以提交整个 dom 对象，包括值？假设我有类似的东西：

```
<input type="text" name="name" id="name"
           value=""/> 
```

一旦用户输入它的名字（例如，“我的名字”，我想接收整个 DOM 对象。所以在服务器上我会得到

```
<input type="text" name="name" id="name"
           value="**My Name**"/> 
```

我知道我可以发送整个 innerHTML ，但这并没有为我提供用户输入的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:12:52.237

这很奇怪，但你可以使用 jQuery 抓取整个身体（或通过#id 的一部分）：

```
​$(function(){
   $('form').on('submit',function(e){
       e.preventDefault();
       var content = $('body').html();
       alert(content);
   });
});​ 
```

# ios - Grand Central Dispatch EXC_BAD_ACCESS 异常

> ID：13183016
> 
> 赞同：3
> 
> 时间：2012-11-01T18:09:05.360
> 
> 标签：ios, xcode, grand-central-dispatch, ios5.1

我有一个空块，在 Xcode 的 iPhone 6.0 模拟器中运行良好，但是当我切换到 iPhone 5.1 模拟器时，出现以下异常：“EXC_BAD_ACCESS”。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // I've removed all code from here and exception still occurs.
    }); 
```

任何想法是什么原因造成的？在 dispatch_async 行抛出异常。不确定这是否重要，尽管我使用的是 ARC。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T18:26:46.133

我的错误是，我将 iOS 部署目标设置为 6.0。我现在已经将它更新到 5.1，它工作正常。

# iphone - 使用 NavigationBar 禁用 UIScrollView 垂直滚动

> ID：13183018
> 
> 赞同：2
> 
> 时间：2012-11-01T18:09:11.427
> 
> 标签：iphone, ios, xcode, uiscrollview, scroll

所以我看过很多其他的帖子，我想我几乎都试过了。我不希望这是重复的，但我无法解决我的问题。我有这样的设置： ![在此处输入图像描述](../Images/30871973ff8b939d851fcff6e3ff6b87.png)

当我到达我的滚动视图控制器时，我可以很好地翻页，但我也可以垂直移动图片。我认为这与 NavigationBar 强制向下滚动 ScrollView 框架有关，但仍将框架设置为全屏大小。如何防止滚动视图视图控制器上的任何垂直滚动？我的 .m 如下：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
self.navigationController.navigationBarHidden = NO;

i = 0;

_PhotoBundle = [[NSBundle mainBundle] pathsForResourcesOfType:@".jpg"inDirectory:@"Dog_Images"];

_PhotoArray = [[NSMutableArray alloc] initWithCapacity:_PhotoBundle.count];
for (NSString* path in _PhotoBundle)
{
    [_PhotoArray addObject:[UIImage imageWithContentsOfFile:path]];
}
for (int x = 0; x < _PhotoArray.count; x++)
{
    CGRect frame;
    frame.origin.x = self.mainScroll.frame.size.width * x;
    frame.origin.y = 0;
    frame.size = self.mainScroll.frame.size;

    UIImage *nextImg = [[UIImage alloc] init];
    nextImg = [_PhotoArray objectAtIndex:x];

    UIImageView *nextIV = [[UIImageView alloc] initWithFrame:frame];
    [nextIV setImage:nextImg];

    [self.mainScroll addSubview:nextIV];
    //NSLog(@"Pass %d", x);
}

self.mainScroll.contentSize = CGSizeMake(self.mainScroll.frame.size.width * _PhotoArray.count, self.mainScroll.frame.size.height);

} 
```

非常感谢你！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T20:28:38.143

所以我找到了一个完美解释它的帖子：

[如何在 UIScrollView 中仅禁用垂直滚动？](https://stackoverflow.com/questions/7535210/how-to-disable-just-vertical-scrolling-in-a-uiscrollview)

当我改变我的

```
CGSizeMake(self.mainScroll.frame.size.width * _PhotoArray.count, self.mainScroll.frame.size.height); 
```

到

```
CGSizeMake(self.mainScroll.frame.size.width * _PhotoArray.count, 1.0); 
```

它使 contentSize 从大于界限...我读过的东西，但没有完全理解。我希望这可以帮助其他陷入困境的人......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:23:27.970

`UIScrollView``contentSize`只有当它的 -设置大于它的框架时才会滚动它的内容。因此，当您设置`self.mainScroll.contentSize`它时`contentSize.height`，它的框架更多。

在使用它的类之前，请尝试至少阅读 Apple 的文档。这很无聊。但是薪水可以弥补所有无聊的东西。

*顺便一提。您错误地使用 UIScrollView 来显示 UIImageView 对象。尝试观看 Apple WWDC 会话（可以从 iTunes 下载） - 关于如何仅使用三个 UIImageView 对象来绘制无尽的 UIScrollView 分页，有两到三个会话*

[Apple 的文档`UIScrollView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)

# facebook - 刷新整个域的 Facebook 共享缓存？

> ID：13183022
> 
> 赞同：2
> 
> 时间：2012-11-01T18:09:19.900
> 
> 标签：facebook, caching, facebook-opengraph

某个域上的 OG 标签被破坏了一段时间，FB 已经缓存了好几页的不良数据。现在一切都已纠正，但 FB 的缓存似乎持续了相当长的一段时间。

我知道我可以使用此工具过期并重新填充单个页面的缓存：[https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

我想在我网站上的每个页面上都做到这一点。无论如何让FB重新抓取从我的网站喜欢/共享的所有页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:46:15.810

对不起。只需为您域中的每个页面使用调试器。`rescrape=true`如果您得到调试器的速率限制，那么还有一个图形 API 的参数。

# java - 将接缝预订示例与 jboss 链接时出错

> ID：13183024
> 
> 赞同：2
> 
> 时间：2012-11-01T18:09:27.090
> 
> 标签：java, maven, windows-7, jboss, seam

[我从https://github.com/seam/examples/tree/master/booking](https://github.com/seam/examples/tree/master/booking)下载了一个预订示例

我还安装了jboss。我尝试运行它并且运行良好。

然后我尝试运行此评论

```
mvn clean package arquillian:run -Darquillian=jbossas-managed-7 
```

如上页所述，在 cmd 中。

但我收到以下错误：

```
C:\seam_example>mvn clean package arquillian:run -Darquillian=jbossas-managed-7 -X

Apache Maven 3.0.4 (r1232337; 2012-01-17 14:14:56+0530)
Maven home: C:\Program Files (x86)\apache\apache-maven-3.0.4
Java version: 1.6.0, vendor: Sun Microsystems Inc.
Java home: C:\Program Files (x86)\Java\jdk1.6.0\jre
Default locale: en_US, platform encoding: Cp1252
OS name: "windows vista", version: "6.1", arch: "x86", family: "windows"
[INFO] Error stacktraces are turned on.
[DEBUG] Reading global settings from C:\Program Files (x86)\apache\apache-maven-3.0.4\conf\settings.xml
[DEBUG] Reading user settings from C:\Users\SANJAY\.m2\settings.xml
[DEBUG] Using local repository at C:\Users\SANJAY\.m2\repository
[DEBUG] Using manager EnhancedLocalRepositoryManager with priority 10 for C:\Users\SANJAY\.m2\repository
[INFO] Scanning for projects...
[DEBUG] **Could not find metadata org.jboss.seam:seam-parent:20-SNAPSHOT/maven-metadata.xml in local (C:\Users\SANJAY\.m2\repository)**
[ERROR] **The build could not read 1 project** -> [Help 1]
**org.apache.maven.project.ProjectBuildingException: Some problems were encountered while processing the POMs**:
[WARNING] '**parent.relativePath' points at org.jboss.seam.examples:seam-examples-parent instead of org.jboss.seam:seam-parent, please verify your project structure @ line 4, column 12**
[FATAL] **Non-resolvable parent POM: Could not find artifact org.jboss.seam:seam-parent:pom:20-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 4, column 12**

        at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:363)
        at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:636)
        at org.apache.maven.DefaultMaven.getProjectsForMavenReactor(DefaultMaven.java:585)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:234)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
[ERROR]
[ERROR]   The project org.jboss.seam.examples:seam-examples-parent:3.2.0-SNAPSHOT (C:\seam_example\pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not find artifact org.jboss.seam:seam-parent:pom:20-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 4, column 12 -> [Help 2]
org.apache.maven.model.resolution.UnresolvableModelException: Could not find artifact org.jboss.seam:seam-parent:pom:20-SNAPSHOT
        at org.apache.maven.project.ProjectModelResolver.resolveModel(ProjectModelResolver.java:159)
        at org.apache.maven.model.building.DefaultModelBuilder.readParentExternally(DefaultModelBuilder.java:813)
        at org.apache.maven.model.building.DefaultModelBuilder.readParent(DefaultModelBuilder.java:664)
        at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:310)
        at org.apache.maven.model.building.DefaultModelBuilder.build(DefaultModelBuilder.java:232)
        at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:410)
        at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:379)
        at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:343)
        at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:636)
        at org.apache.maven.DefaultMaven.getProjectsForMavenReactor(DefaultMaven.java:585)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:234)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could not find artifact org.jboss.seam:seam-parent:pom:20-SNAPSHOT
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538)
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216)
        at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:193)
        at org.sonatype.aether.impl.internal.DefaultRepositorySystem.resolveArtifact(DefaultRepositorySystem.java:286)
        at org.apache.maven.project.ProjectModelResolver.resolveModel(ProjectModelResolver.java:155)
        ... 22 more
Caused by: org.sonatype.aether.transfer.ArtifactNotFoundException: Could not find artifact org.jboss.seam:seam-parent:pom:20-SNAPSHOT
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:528)
    ... 26 more
[ERROR]
[ERROR] 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:52:40.483

将 pom.xml 中的父版本从 20-SNAPSHOT 更改为 19

# php - 在 PHP 中生成和检查数字的最快方法是什么？

> ID：13183025
> 
> 赞同：1
> 
> 时间：2012-11-01T18:09:33.983
> 
> 标签：php, performance, numbers

我需要一些帮助以在 PHP 中生成数字，然后检查例如该数字是否低于 100 给 0.1 分。这是用于在使用 Flash 游戏中的某些操作时调用的硬币系统。

我想在尽可能快的时间内完成这项工作，这是我在将其更新到游戏的主服务器之前用来测试它的代码。

```
<?php
$coins = 0;
$rand = rand(0, 1000);

if($rand < 50){
$coins = $coins + 0.01;
}

if($rand < 100 && $rand > 50){
$coins = $coins + 0.2;
}

if($rand > 100 && $rand < 200){
$coins = $coins + 0.2;
}

if($rand > 500){
$coins = $coins + 0.5;
}

echo "Generated $coins coins \n";
?> 
```

抱歉，如果有人用几句话不理解我的任务，我在问我怎样才能更快地做到这一点，有没有人有任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:15:16.090

首先要做的是使用 else ，这样您就不会每次都执行每个测试。即，如果你这样做：

```
if (condition1) ...
if (condition2) ...
if (condition3) ... 
```

然后 PHP 必须每次都对每个条件执行检查。如果您知道条件 1 不包括条件 2，请执行以下操作：

```
if (condition1) ...
elseif (condition2) ...
elseif (condition3) ... 
```

这样，您只执行条件直到您实际获得匹配。下一步是将最有可能成功的条件放在首位：

```
if ($rand > 500) ...
elseif ($rand > 100 && $rand < 200) ... 
```

这样，一半的时间，你只做一次检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:14:27.557

`rand()`考虑使用 ，而不是使用[`mt_rand()`](http://php.net/mt_rand)。从文档：

> 许多旧 libcs​​ 的随机数生成器具有可疑或未知的特性并且速度很慢。默认情况下，PHP 使用带有 rand() 函数的 libc 随机数生成器。mt_rand() 函数是它的替代品。它使用具有已知特性的随机数生成器，使用 » Mersenne Twister，生成随机数**的速度比 libc rand() 提供的平均速度快四倍**。

此外，这是另一个非常相似的主题讨论同一主题：[Fastest way to get random php number？](https://stackoverflow.com/questions/3107342/fastest-way-to-get-random-php-number)

我不确定你在这里寻求什么样的优化，并想重申弗兰克法默在讨论中的评论：

> 为什么您如此关注此特定操作的速度？你有简介吗？您希望通过选择一个而不是另一个来节省多少时间？...请允许我更直接一点：这并没有什么意义。我们正在谈论以纳秒为单位的差异

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:21:56.020

您不需要同时检查两者`>`，`<`如果您将比较链接在一起，如下所示：

```
<?php
$coins = 0;
$rand = rand(0, 1000);

if( $rand > 500 ) {
    $coins += 0.5;
} else if( $rand > 200 ) {
    $coins += 0.4;
} else if( $rand > 100 ) {
    $coins += 0.3;
} else if( $rand > 50 ) {
    $coins += 0.2;
} else {
    $coins += 0.1;
}

echo "Generated $coins coins \n"; 
```

除非你要循环这个，或者你的原始代码每秒数百万次，否则我不会担心它。

然而，我*担心*的是每次在您的 Flash 游戏中发生某些事情时通过 HTTP 调用此脚本的开销。这种开销会降低游戏的性能，并给服务器带来负载。

# c# - 将 LINQ To XML 用于 HTML 页面的更好方法

> ID：13183026
> 
> 赞同：2
> 
> 时间：2012-11-01T18:09:34.017
> 
> 标签：c#, linq-to-xml

我正在寻找网页上的特定项目。我所做的（测试，到目前为止）工作得很好，但对我来说真的很难看。我想以更简洁的方式获得建议，即现在是 ONE Linq 查询而不是 2 ....

```
 document.GetXDocument();
        string xmlns = "{http://www.w3.org/1999/xhtml}";
        var AllElements = from AnyElement in document.fullPage.Descendants(xmlns + "div")
                          where AnyElement.Attribute("id") != null && AnyElement.Attribute("id").Value == "maincolumn"
                          select AnyElement;
        // this first query bring only one LARGE Element.

        XDocument subdocument = new XDocument(AllElements);

        var myElements = from item in subdocument.Descendants(xmlns + "img")
                         where String.IsNullOrEmpty(item.Attribute("src").Value.Trim()) != true
                         select item;

        foreach (var element in myElements)
        {   
            Console.WriteLine(element.Attribute("src").Value.Trim());                                                          
        }
        Assert.IsNotNull(myElements.Count()); 
```

我知道我可以直接查找“img”，但我希望能够在这些页面中获取其他类型的项目，例如链接和一些文本。

我强烈怀疑这是最好的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:37:26.283

如果您坚持将网页解析为 XML，请尝试以下操作：

```
var elements =
    from element in document.Descendants(xmlns + "div")
    where (string)element.Attribute("id") == "maincolumn"
    from element2 in element.Descendants(xmlns + "img")
    let src = ((string)element2.Attribute("src")).Trim()
    where String.IsNullOrEmpty(src)
        select new {
            element2,
            src
    };

foreach (var item in elements) {
    Console.WriteLine(item.src);
} 
```

笔记：

*   是什么类型的`document`？我假设它是一个`XDocument`. 如果是这种情况，您可以`Descendants`直接使用 on `XDocument`。`document`（如果是OTOTH `XDocument`，那么该`fullPath`属性从何而来？）
*   将`XAttribute`转换为字符串。如果它为空，则强制转换的结果将为空。这将节省双重检查。（这不会提供任何性能优势。）
*   用于`let`“保存”一个值以供以后重用，在这种情况下用于 foreach。除非您只需要最后的 Assert，否则在这种情况下，使用`Any`而不是`Count`. `Any`只需遍历第一个结果即可返回值；`Count`必须遍历所有这些。
*   为什么是`subdocument`类型`XDocument`？不是`XElement`合适的类型吗？
*   您还可以使用`String.IsNullOrWhitespace`来检查 中的空格`src`，而不是`String.IsNullOrEmpty`，假设您要按`src`原样处理它可能具有的任何空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:13:52.050

单个查询中的相同逻辑：

```
var myElements = from element in document.fullPage.Descendants(xmlns + "div")
                          where element.Attribute("id") != null 
                          && element.Attribute("id").Value == "maincolumn"
                          from item in new XDocument(element).Descendants(xmlns + "img")
                          where !String.IsNullOrEmpty(item.Attribute("src").Value.Trim()) 
                          select item; 
```

# c# - 如何在 ListView 中找到一个项目并更新同一行中的另一列？

> ID：13183027
> 
> 赞同：1
> 
> 时间：2012-11-01T18:09:33.847
> 
> 标签：c#, winforms, listview

我的应用程序读取一个文本文件并填充一个 ListView。这很简单，就像这样：

```
Date     | Invoice   | Status  
20121015 | 123123    |  
20121015 | 123124    | 
20121015 | 123456    |  
20121015 | 124123    | 
```

然后我需要阅读第二个文本文件，该文件可能包含也可能不包含在 ListView 中找到的发票以及状态。如果有匹配的发票，则需要将第二个文本文件中的状态添加到 ListView 中，因此它看起来像这样：

```
Date     | Invoice   | Status  
20121015 | 123123    |  
20121015 | 123124    | 
20121015 | 123456    | Paid 
20121015 | 124123    | 
```

最初我有一个只有发票号码的 ListBox，并且正在做

```
int index = ListBox1.FindString(<whatever>); 
```

获取包含发票的行的索引，然后删除项目 (RemoveAt(Index)) 并插入一个新项目，如

```
ListBox.Items.Insert(index, invoice + " PAID") 
```

如何使用 ListView 做类似的事情？我喜欢有列而不是只有 1 行文本的想法。我应该使用 ListView 以外的东西来完成这个吗？

平均而言，我正在阅读的每个文本文件都有 <1000 行需要添加。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T18:23:10.577

您可以枚举`Items`列表视图的集合。是的，listview 是对此的理想控制。

```
foreach (ListViewItem item in listView1.Items)
{
    var invoice = item.SubItems[1];
    if (invoice.Text == "whatever")
    {
        item.SubItems[2] = new ListViewItem.ListViewSubItem() { Text = "Paid" };
        break;
    }
} 
```

# .net - 实体框架 4.3 遇到的最大池大小

> ID：13183035
> 
> 赞同：11
> 
> 时间：2012-11-01T18:10:00.677
> 
> 标签：.net, asp.net-mvc, entity-framework-4, ado.net, ninject

这将是一个很长的帖子，所以请和我在一起。

几个月前我们在这里实施的生产站点之一，我开始经常在我们的 ELMAH 日志中看到可怕的连接泄漏错误消息。

```
"Timeout expired. The timeout period elapsed prior to obtaining a connection from the pool. This may have occurred because all pooled connections were in use and max pool size was reached." 
```

这让我感到困惑，因为我们使用的是 EF，并且连接处理应该是自动的。

于是我开始挖掘。我考虑的第一个潜在罪魁祸首是 MiniProfiler（或者我应该说，我们使用 miniprofiler 的实现）。我们一直在使用它，它运行良好，但我担心潜在的连接泄漏。

```
 public OurContext() : base(GetProfilerConnection(), true)
    {}

    private static DbConnection GetProfilerConnection()
    {
        return new EFProfiledDbConnection(new SqlConnection(ConfigurationManager.ConnectionStrings["Database"].ConnectionString),
                                          MiniProfiler.Current);
    } 
```

我的印象是基本调用中的“真实”参数导致上下文获取连接的所有权，所以我相信这应该可以正常工作并且连接将被处理掉。

![在此处输入图像描述](../Images/418acb994443368f45d196a776029d70.png)

在我们的 Enhancement DEV 分支中，我删除了 miniprofiler，因为它尚未更新以支持 EF5，并且我们将在不久的将来某个时候进行迁移，因此应该将其作为一个问题删除。

关注点二是“我们是否正确地处理了我们的数据上下文”？因此，我下载了 Entity Framework Profiler 进行试用，并拿了我们最重的页面并进行了测试。

![在此处输入图像描述](../Images/3fd1ec48075b906b2ff77d7d51afde74.png)

结果明确表明，我们打开的任何上下文都是关闭的，但对我而言，相关的部分是我们打开的上下文的数量。我们有我们的 DI 容器（Ninject 2）设置来为每个 Web http 请求建立一个上下文，我认为这是正确的。问题在于我们如何在应用程序中处理图像。特别是这个页面在数据库中最多可以有七个图像。这些图像中的每一个都通过 MVC 操作包含在页面中。像这样：

```
[<img src="/Controller/GetPhotoAction/[ImageId] />] 
```

由于图像是单独的请求，因此正在打开单独的上下文。因此，对于这个特定页面，如果我理解正确的话，我们将使用连接池中的七个不同连接。将其乘以多少用户，我就会看到上面的错误消息是如何正确的。

将图像存储在数据库中的原因有两个。一，我们用于管理此应用程序数据的管理应用程序位于美国西海岸，但托管该应用程序的服务器位于美国东海岸。我们在西海岸工作的网络和东海岸的服务器之间有一条 VPN 隧道。该应用程序也是负载平衡的（2 个 Web 前端）。决定将图像存储在数据库中，以避免通过 VPN 隧道复制图像，然后处理将图像写入每个服务器上 Web 应用程序内的文件位置的权限（这两个位置也是完全不同的域） .

在此期间，我们在测试期间提高了连接字符串中的最大连接池大小，并将在下周初将其部署到 PROD。

所以，我的问题是：

1) 我是否在这里进行了泄漏检查？我相信我有。我在上面所说的任何事情上都错了吗？

2）如果这个页面上的多个数据上下文被证明是罪魁祸首，关于如何将图像写入全国两台服务器的建议，记住权限会跨域？实际上，我想这样做，但是技术障碍比我们在假期前的这个时候愿意做的要多一些。

3）如果您认为以上都不是问题，我会遗漏什么？难道真的是请求足够高以至于我们遇到了这个错误并且我们需要向外扩展？我可以挖掘日志来查看使用统计信息，但似乎不太可能。此页面缓存一个小时（参数不同）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:14:25.913

有更多方法可以确定您的 Web 应用程序是否正在泄漏连接。最近我受益于使用这些：

*   **使用 SQL 探查器**（您可以看到打开/关闭了多少个连接）
*   **监视 IIS 上的连接池**- 在这里查看更多信息 - [http://msdn.microsoft.com/en-us/library/aa175863%28SQL.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa175863%28SQL.80%29.aspx)
*   **将连接字符串中的 Max Pool Size 设置**为您期望一个请求的最大连接值 -*我尝试运行我的应用程序，该应用程序使用与您相同的方法来存储和检索页面上 Max Pool Size=1 的图像，更多超过 10 张图像，并且在您遇到的相同例外情况下失败。当我删除每个请求嵌套连接的错误时，即使图像上有这些子请求也可以。*

对于你的问题。对于每个请求，您应该可以接受一个数据上下文。当它绑定到请求范围时，它将在请求结束时被释放（实际上是延迟到垃圾收集器收集到请求对象）。但请注意，如果您不直接使用数据上下文（例如，您有一些存储库模式包装器），因为可能存在一些隐藏（连接泄漏）错误。

# postgresql - 如何将值插入具有默认值的列中？[PostgreSQL 9.1]

> ID：13183039
> 
> 赞同：0
> 
> 时间：2012-11-01T18:10:15.343
> 
> 标签：postgresql, insert, default-value

我有这样的表：

```
CREATE TABLE employee (
    id INTEGER DEFAULT NEXTVAL('ids'::regclass) NOT NULL,
    name CHARACTER VARYING NOT NULL,
    employer INTEGER DEFAULT (-1)
); 
```

我想在这个表中插入一些东西（我想保留`employer`为默认值，-1）：

```
INSERT INTO employee (name, id) VALUES('Doe', 2); 
```

但我的 PostgreSQL 9.1 抱怨：

```
ERROR:  insert or update on table "employee" violates foreign key constraint "FK_employer"
DETAIL:  Key (employer)=(-1) is not present in table "employer". 
```

我知道没有 id = -1 的雇主，但我仍然希望这样。我想将此员工的雇主设置为-1。postgreSQL 可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:17:18.020

将默认值设为空。好吗？

```
employer INTEGER DEFAULT null 
```

# sql - FCK 编辑器所需的 Sql 数据类型 文本存储

> ID：13183041
> 
> 赞同：0
> 
> 时间：2012-11-01T18:10:24.640
> 
> 标签：sql, fckeditor

我只想通过 Sql 数据库中的 FCK 编辑器保存长文本。我已将数据类型指定为“文本”，但它不接受超过 500 个字符。我只需要可以保存至少 10000 个字符的数据类型。该解决方案的完美替代方案是什么。

请回答我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:11:43.830

你试过 longtext 还是 varchar(max)

参考这个 [http://www.w3schools.com/sql/sql_datatypes.asp](http://www.w3schools.com/sql/sql_datatypes.asp)

# xcode - Xcode 部署目标设置

> ID：13183043
> 
> 赞同：1
> 
> 时间：2012-11-01T18:10:28.337
> 
> 标签：xcode, deployment, release, target, deployment-target

1.  如果我希望我的应用程序与旧的操作系统版本兼容，回到 Snow Leopard，这些是 XCode 中正确的部署目标设置吗？

    “项目”下的 OS X 部署目标：**10.8**

    “目标”下的部署目标：**10.6**

2.  如果您只能使用“部署目标”，“OS X 部署目标”的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:44:45.687

您所拥有的可能会起作用，但为了安全起见，如果您希望您的应用程序与 Snow Leopard 兼容，您应该将项目和目标的部署目标都设置为 10.6。

如果您的项目只有一个目标，那么 OS X 部署目标设置就不是很有帮助。OS X 部署目标设置可以帮助具有多个目标的项目。您可以使用 OS X 部署目标设置为项目设置基本部署目标，并使用目标的部署目标设置更改单个目标的部署目标。

# java - 删除对象时 ArrayList 中的索引越界异常

> ID：13183051
> 
> 赞同：0
> 
> 时间：2012-11-01T18:10:59.197
> 
> 标签：java, arraylist, indexoutofboundsexception, jcreator

平台：JCreator

我通常使用从后面数的 for 循环，因为理论上删除它们时应该可以正常折叠：

```
0123456789 
```

删除偶数：

```
i = 9: 0123456789
i = 8 //remove 8: 012345679
i = 7: 012345679
i = 6 //remove 6: 01234579 
```

等等

但是当对象被删除时，我得到了这个异常：

线程“AWT-EventQueue-0”中的异常 java.lang.IndexOutOfBoundsException：索引：3，大小：3

```
for (int i = dArea.size() - 1; i >= 0; i--) {
    if (dArea.get(i).getOwn() == 1) {
        if (dArea.get(i).getSK() == 2) {
            if (dArea.get(i).getX() - dArea.get(i).getW() / 2 > 1350) {
                dArea.remove(i);
            }
            if (dArea.get(i).getX() + dArea.get(i).getW() / 2 < 0) {
                dArea.remove(i);
            }
            if (dArea.get(i).getY() - dArea.get(i).getH() / 2 > 685) {
                dArea.remove(i);
            }
            if (dArea.get(i).getY() + dArea.get(i).getH() / 2 < 0) {
                dArea.remove(i);
            }
        }
    }
} 
```

任何想法为什么以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:18:26.213

尝试使用`else if`而不是`if`.

否则循环中的一次迭代可能会删除多个元素（一次用于“w”检查，一次用于“h”检查）。

# vim - 为 Diffget 映射 Vim 快捷方式

> ID：13183054
> 
> 赞同：1
> 
> 时间：2012-11-01T18:11:05.577
> 
> 标签：vim, vim-fugitive

我正在为 :diffget //2 和 :diffget //3 和 :Gwrite 映射快捷方式！使合并更容易。到目前为止，在 Mac 上，我有：

```
map <D-2> :diffget //2<CR>
map <D-3> :diffget //3<CR>
map <D-0> :Gwrite!<CR> 
```

但不幸的是，它们不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:25:24.743

您的映射定义看起来不错。（不过，您应该更喜欢`:noremap`，但通常不需要重新映射右侧，并且可能会导致问题。）尤其是在控制台 Vim 中，并非所有组合键都可以使用。

某些组合键，如`Ctrl`+ 非字母无法映射，`Ctrl`+ 字母与`Ctrl`+ `Shift`+ 字母无法区分。（抱歉，我对 Mac 了解不多。）这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

在插入或命令行模式下，尝试键入组合键。如果没有任何反应/插入，则不能使用该组合键。

# java - 如何在有条件的循环中检查输入的字符串？

> ID：13183062
> 
> 赞同：-1
> 
> 时间：2012-11-01T18:11:46.977
> 
> 标签：java, string, if-statement, input, while-loop

我想编写一个程序，它检查用户输入的字符串是否有给定的字符限制（例如 10 个字符）。如果输入的 String 超过 10 个字符，则系统应反复提示用户输入有效的 String（10 个字符的单词），直到用户输入有效的字符串。

我已经有一些代码，但它还不能工作，因为我不知道如何将进程向上移动（到第 1 行）以重新提示用户或有其他简单的方法？

```
System.out.print("Input: ");
String inputChars = Input.readString();

while (inputChars.length() > 10){
    System.out.print("Input: ");
    String inputChars = Input.readString();  // here is mistake now
}
System.out.print("Output: ");
System.out.print("The enter has 10 chars"); 
```

我只想检查输入的单词，如果超过 10 个字符，则跳过它并再次提示用户输入不超过 10 个字符的单词。我还不太擅长java，所以如果这个问题很愚蠢，请解释我如何解决它。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:14:06.653

看看你的循环：

```
while (inputChars.length() > 10){
    System.out.print("Input: ");
    String inputChars = Input.readString();
} 
```

循环体的第二行*重新声明*了`inputChars`变量。你不能这样做，因为它已经在范围内。您只想*替换以前的值*：

```
inputChars = Input.readString(); 
```

您还应该考虑重组代码以避免重复：

```
String inputChars;
do {
    System.out.print("Input: ");
    inputChars = input.readString();
} while (inputChars.length() > 10); 
```

请注意我如何将`Input`变量重`input`命名为遵循正常的 Java 命名约定。实际上，我可能会同时更改两者`input`并`inputChars`更具描述性-特别是，目前没有迹象表明输入数据的*含义*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:13:57.133

只需删除`String`开头：

```
 while (inputChars.length() > 10){
     System.out.print("Input: ");
     inputChars = Input.readString();  // here is mistake now
  } 
```

通过`String`开始，您正在尝试再次重新定义同名变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:15:47.023

改成：

```
String inputChars = ""
do {
    System.out.print("Input: ");
    inputChars = Input.readString();
} while (inputChars.length() > 10)
System.out.print("Output: ");
System.out.print("The enter has 10 chars"); 
```

之前，`inputChars`已经在循环之前声明了，所以你不需要重新声明变量。

do-while 循环在这里是一个更好的结构，因为它使您的意图更清晰，并使您的代码更干净。

# sql - 分页表并获取行数

> ID：13183082
> 
> 赞同：0
> 
> 时间：2012-11-01T18:12:55.990
> 
> 标签：sql, sql-server-2008

下面的查询从表中获取从第 10 行开始到第 20 行结束的行子集。此外，要保存查询，我需要返回表中的总行数。这是我能想到的最好的解决方案。有没有更高效/优雅的方式？特别是，我不喜欢这个`partition by 1`部分。

```
select *
from (select count(*) over (partition by 1) as [count],
             row_number() over (order by [Name],[Description]) as [row],
             *
      from [Products]) as t
where row between 10 and 20 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:16:36.013

不喜欢就删！

```
select *
from (select count(*) over () as [count],
             row_number() over (order by [Name],[Description]) as [row],
             *
      from [Products]) as t
where row between 10 and 20 
```

然而，除此之外，查询并不是最优的。您应该以传统方式进行计数。

```
select *
from (select count(*) as [count]
        from [Products]) X
cross join (
    select row_number() over (order by [Name],[Description]) as [row],
           *
      from [Products]) as t
where row between 10 and 20 
```

您可以将这两个放在一起并按Ctrl-M，然后执行。这些计划看起来会完全不同。

# android - 如何停止 alertDialog 执行

> ID：13183083
> 
> 赞同：0
> 
> 时间：2012-11-01T18:12:55.013
> 
> 标签：android

我需要停止执行应用程序，直到用户单击确定。这是我的方法...

```
public void mostrarMensaje(String mensaje)
{
    final Message NO_HANDLER = null;
    final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
    alertDialog.setTitle("Atención");
    alertDialog.setMessage(mensaje);
    alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int which) {
          alertDialog.setButton("OK",NO_HANDLER) ;   
          alertDialog.dismiss();
       }
    });
    alertDialog.setIcon(R.drawable.listo);
    alertDialog.show();
} 
```

# javascript - document.getElementById() 与 $()

> ID：13183088
> 
> 赞同：-1
> 
> 时间：2012-11-01T18:13:19.677
> 
> 标签：javascript, jquery

> **可能重复：**
> [document.getElementById vs jQuery](https://stackoverflow.com/questions/4069982/document-getelementbyid-vs-jquery)

我正在学习 jQuery 和 javascript。

*   我想知道为什么`$()`jQuery 的功能没有取代`document.getElementById()`javascript 的功能。

*   不就是角色`$()`吗？

*   如果不是，它的作用是`$()`什么？

我遇到了这个问题，因为`$().outerHeight`它不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:16:38.020

`$`接受选择器、HTML 字符串和常规 JS 对象。`getElementById`只接受`id`元素的属性。他们做不同的事情。

您正在尝试访问 DOM 对象属性，但来自 jQuery 对象。jQuery 对象包装 DOM 对象，但它们不会替换它们。

要访问 DOM 对象，您可以使用`$(...)[0]`(或`$(...).get(0)`)，您的代码应该可以正常工作：

```
$(...)[0].outerHeight 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:17:14.810

1)`$()`是您在 jQuery 中访问任何元素的方式。

您可以使用任何其他关键字而不是`$`by：

```
var jq = jQuery.noConflict(); 
```

当您执行上述命令时，元素访问器变为`jq()`.

2)`$()`并没有真正取代`document.getElementById()`. 但是，是`$('#'+id)`的取代了它。由于`$('.'+class)`也可以工作，这不是 DOM 的原始属性，我只想再说一遍，它`$()`是您访问 jQuery 中任何元素的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:16:51.410

第一个 $ 只是在 jquery 中使用了一个选择，基本上是 select(something)，something 可以是类、id、html 标记等。

因此 $ 不仅仅用于选择 id

这是使用 outerHeight [http://api.jquery.com/outerHeight/的当前语法](http://api.jquery.com/outerHeight/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T18:16:52.753

$() 正在调用`jQuery`带有参数的函数。该参数是一个选择器，它不必是一个 ID。选择器按 DOM 树路径、按类、按属性、按 ID、按标签名称等进行选择。因此该`jQuery`功能绝不等同于`document.getElementById()`.

此外，jQuery 函数总是返回一个 jQuery 对象，document.getElementById() 返回一个 DOM 元素或`null`.

对于 jQuery 中的 outerHeight，您可以使用：

```
$('#Id').outerHeight(true); // Outer height with margins
$('#Id').outerHeight(); // Outer height without margins 
```

# android - 如何直接从 Android 应用程序访问 adb？

> ID：13183089
> 
> 赞同：3
> 
> 时间：2012-11-01T18:13:20.393
> 
> 标签：android, adb

如果服务已通过 USB 加载，是否可以从应用程序内部与 Android 调试桥 (ADB) 通信？

这是用例：我可以在无根手机上通过 ADB 截取帧缓冲区的屏幕截图，但通过 USB 传输整个原始缓冲区有点慢，特别是如果我想每帧截取超过一帧2 秒。我想做的是从手机上的应用程序内部访问帧缓冲区，然后可以通过 Wifi 传输或先进行一些压缩。 [ASL](http://code.google.com/p/android-screenshot-library/)在 Jellybean 上不起作用（他们关闭了在 /data/local 上安装本机服务的漏洞），所以我只想通过一些套接字或其他方式连接到 ADB 服务并以这种方式发出帧缓冲区请求。

我可以通过 USB 连接来加载 ADB 服务，但是一旦连接，我想在传输之前对手机本身进行处理。它必须适用于无根手机。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:11:34.527

单线：

```
$ adb shell screencap -p \| gzip -c \> /mnt/sdcard/s.png.gz; adb pull /mnt/sdcard/s.png.gz; 
```

# command-line - 为多个文件中的每一行添加前缀和后缀 - 使用命令行？

> ID：13183092
> 
> 赞同：0
> 
> 时间：2012-11-01T18:13:40.287
> 
> 标签：command-line

所以我一直在用 Notepad++ 做这个，但它需要很长时间。我在一个文件夹中有几千个文件，需要在每个文件的每一行之前和之后添加一些文本。

这甚至可以在命令行中使用吗？

例如这是一行：

```
This is my line. 
```

我希望它变成这样：

```
<text before>This is my line.<text after> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:18:31.410

未经测试，但应该做的伎俩：

```
perl -pi -e 's/(.*)/<text before>$1<text after>/' * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:24:57.117

以下纯本机批处理脚本将起作用，尽管它相对较慢。

```
@echo off
setlocal disableDelayedExpansion
set "prefix=<text before>"
set "suffix=<text after>"
pushd "yourFolder"
for %%F in (*) do (
  >"%%F.new" (
    for /f "delims=" %%A in ('findstr /n "^" "%%F"') do (
      set "ln=%%A"
      setlocal enableDelayedExpansion
      echo !prefix!!ln:*:=!!suffix!
      endlocal
    )
  )
  move /y "%%F.new" "%%F" >nul
) 
```

我编写了一个混合 JScript/Batch 脚本，可用于非常有效地处理文本文件。使用我的 REPL.BAT 实用程序，脚本可以很简单：

```
@echo off
pushd "yourFolder"
for %%F in (*) do (
  type "%%F" | repl "^(.*)" "<text before>$1<text after>" >"%%F.new"
  move /y "%%F.new" "%%F" >nul
)
popd 
```

REPL.BAT 脚本应该在您的 PATH 中的某个位置。

这是 REPL.BAT 脚本。它与从 XP 开始的所有现代 Windows 版本兼容。考虑到代码很少，该实用程序非常强大且易于使用。将近一半的脚本包含嵌入式文档。可以通过`REPL /?`在命令提示符下键入来查看文档。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

# ios - iOS：Over The Air 分发适用于 iPad1 (iOS 5)，但不适用于 iPad3 (iOS 6)

> ID：13183098
> 
> 赞同：4
> 
> 时间：2012-11-01T18:14:04.033
> 
> 标签：ios, distribution, enterprise, over-the-air

我正在尝试为企业内部应用程序设置无线分配。为了进行测试，我有一台装有 iOS 5 的 iPad 1 和一台装有 iOS 6 的 iPad 3。我尝试安装 ipa 的服务器位于我们公司的网络内，并且 ipad 使用 VPN 客户端连接到该网络。

使用 iPhone 配置实用程序安装时，该应用程序可在两台 iPad 上运行。但 Over The Air 安装仅适用于 iPad 1。在 iPad 3 上，单击下载链接时，我收到消息

```
"Cannot connect to Mysubdomain.myserver.com" 
```

当我从 iPad 1 下载后检查服务器日志时，我看到了这个日志：

```
#Software: Microsoft Internet Information Services 7.5
#Version: 1.0
#Date: 2012-11-01 12:59:49
#Fields: date time s-ip cs-method cs-uri-stem cs-uri-query s-port cs-username c-ip cs(User-Agent) sc-status sc-substatus sc-win32-status time-taken
2012-11-01 12:59:49 172.16.50.30 GET /sp_for_ipad/download.html - 80 - 172.16.127.177 Mozilla/5.0+(iPad;+CPU+OS+5_0_1+like+Mac+OS+X)+AppleWebKit/534.46+(KHTML,+like+Gecko)+Version/5.1+Mobile/9A405+Safari/7534.48.3 200 0 0 890
2012-11-01 12:59:52 172.16.50.30 GET /sp_for_ipad/manifest.plist - 80 - 172.16.127.177 iTunes-iPad/5.0.1+(32GB) 200 0 0 78
2012-11-01 12:59:55 172.16.50.30 GET /sp_for_ipad/image.57x57.png - 80 - 172.16.127.177 iTunes-iPad/5.0.1+(32GB) 200 0 0 31
2012-11-01 12:59:56 172.16.50.30 HEAD /sp_for_ipad/MyApp.ipa - 80 - 172.16.127.177 iTunes-iPad/5.0.1+(32GB) 200 0 0 109
2012-11-01 12:59:56 172.16.50.30 GET /sp_for_ipad/image.512x512.png - 80 - 172.16.127.177 iTunes-iPad/5.0.1+(32GB) 200 0 0 31
2012-11-01 13:04:45 172.16.50.30 GET /sp_for_ipad/MyApp.ipa - 80 - 172.16.127.177 iTunes-iPad/5.0.1+(32GB) 200 0 0 288293 
```

当我尝试从 iPad3 下载时，这就是我在 serverlog 中看到的全部内容：

```
#Software: Microsoft Internet Information Services 7.5
#Version: 1.0
#Date: 2012-11-01 12:59:49
#Fields: date time s-ip cs-method cs-uri-stem cs-uri-query s-port cs-username c-ip cs(User-Agent) sc-status sc-substatus sc-win32-status time-taken
2012-11-01 13:04:00 172.16.50.30 GET /sp_for_ipad/download.html - 80 - 172.16.127.179 Mozilla/5.0+(iPad;+CPU+OS+6_0+like+Mac+OS+X)+AppleWebKit/536.26+(KHTML,+like+Gecko)+Version/6.0+Mobile/10A403+Safari/8536.25 200 0 0 62 
```

因此，它甚至不查询 manifest.plist。

我的 download.html 看起来像这样：

```
<html>
<body>
<a href="itms-services://?action=download-manifest&url=http://Mysubdomain.myserver.com/sp_for_ipad/manifest.plist">Install App</a>
</body>
</html> 
```

所以 - 该链接似乎适用于 iPad 1，但不适用于 iPad 3。我已经在服务器上正确设置了 MIME 类型。

奇怪的是 - 我还使用不在公司 VPN 内的另一台服务器测试了整个过程（所以我不在 iPad 上使用 VPN 客户端），在这种情况下，安装适用于两台 iPad。但现在我不知道 - 服务器可能有一些显着差异吗？

还是问题与访问通过 VPN 的事实有关？

为什么它可以在 iPad1 上工作，但不能在 iPad3 上工作 - iOS6 中是否有任何不同可能导致问题？

iOS6 设备的下载链接是否需要看起来不同？

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:33:48.557

我有类似的东西，虽然没有 VPN，只是一个普通的 Wi-Fi 设置。运行 iOS6 的 iPhone4、iPhone5 和 iPad2 都可以毫无问题地安装 OTA。同时，运行 iOS5 的 iPhone4S 和 iPad1 无法安装应用程序 OTA。通过 iTunes 同步正常安装适用于所有设备。这显然是操作系统版本的问题，但我不知道下一步该去哪里寻找。它是在应用程序的构建设置中还是与服务器配置相关的东西（在这种情况下是 IIS）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T17:28:42.013

不确定，但您可以尝试消除 display-image 和 full-size-image 键。也许这是视网膜图像尺寸的问题。

# java - “工厂方法”和“使用New创建实例”有什么区别？

> ID：13183101
> 
> 赞同：0
> 
> 时间：2012-11-01T18:14:06.903
> 
> 标签：java, design-patterns

我的工厂方法代码如下：

```
public class DBFactory {
    protected DBFactory() {}
    protected static DataBase createDB() { return null; }
}

public class MySQLFactory extends DBFactory{
    private MySQLFactory() {}

    public static DataBase createDB() {
        return new MySQL();
    }
}

public class SQLServerFactory extends DBFactory{
    private SQLServerFactory() {}

    public static DataBase createDB() {
        return new SQLServer();
    }
}    

public class Test {
    public static void main(String[] args) {
        DataBase db = SQLServerFactory.createDB();
        db.connect();
    }
} 
```

我发现它与下面的客户端代码没有区别：

```
package factorymethod;

import db.DataBase;

public class Test {
    public static void main(String[] args) {
        DataBase db = new MySQL();
        db.connect();
    }
} 
```

问题是，为什么我必须使用工厂方法？我认为它变得更加冗长......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:17:28.350

当您需要虚拟构造函数时，您可以使用工厂方法：运行时的不同类型。

调用`new`只能创建一种类型。

工厂可以创建一系列类型，只要它们具有公共接口或父类，具体取决于传入的参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T18:21:20.003

如果您创建了类[Abstract Factories](http://en.wikipedia.org/wiki/Abstract_factory_pattern)，并且工厂方法是非静态的，那将更有意义，因为您可以在运行时向您的客户提供抽象工厂：

```
public interface DBFactory { // Note: interface, not abstract class
    public DataBase createDB();
}

public class MySQLFactory implements DBFactory {
    public DataBase createDB() {
        return new MySQL();
    }
}

public class SQLServerFactory extends DBFactory{
    public DataBase createDB() {
        return new SQLServer();
    }
} 
```

然后

```
DBFactory factory = // provide whichever based on runtime settings
DataBase dataBase  = factory.createDB(); // client uses whatever is returned 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:17:26.850

工厂方法是一种软件设计模式，可帮助您实现类家族分类法的实例化。

如果您只实例化一个类并且不期望您的代码在将来更改以适应新类，那么您可以安全地避免应用该模式，因为它确实过于冗长/不必要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T18:26:05.007

工厂方法模式允许您分配特定的具体对象，而无需触及基类。这促进了**开放/封闭原则**和**依赖倒置原则**。后者表示：“从不依赖于具体类，而是让低级元素（具体对象）依赖于高级元素（抽象类）”。

确实，假设您有三种数据库。如果没有工厂模式（或抽象工厂模式），您最终会得到以下代码：

```
protected DBFactory(String database) {
   if (database.equals("MySQL")) {
       this.database = new MySql();
   } else if (database.equals("PostgreSQL") {
       this.database = new PostgreSQL();
   }
   else{
       this.database = new Oracle();
   }
} 
```

工厂模板方法允许您通过继承指定此子类型。它在实例化时是固定的，在运行时不能更改，这与抽象工厂模式相反。

所以如果没有工厂，一旦你想添加一种新的数据库，你就必须违反开放/封闭原则，因此**可能会破坏基类的现有工作功能**。

无论如何，在您的特定情况下，使用它是没有意义的。为什么 ？因为当程序（程序的核心包含业务逻辑）而不是“main”方法或任何其他只是集中、提供和操作这些逻辑组件的流程流使用工厂时，它特别有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T16:38:19.160

@user984444 和 @Mik378 明白这一点。工厂方法可以： 1.保证实例为单例。2.用不同的方法/参数产生不同的具体实例。而且您不必检查子类/实现。

对工厂方法模式的更好理解是，假设你在工厂，你不知道生产过程，但你可以得到你想要的产品。让我们看一下[类图](http://s1.linkvp.com/vpuml/tutorials/abstractfactorydesignpattern_screenshots/30_diagram_formed.png)。MealFactory factory=new ChineseMealFactory(); factory.prepareDessert() 将返回 ChineseDessert。而已。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T18:21:21.077

您可以使用工厂方法来实现单例设计模式。

例如，假设在应用程序的生命周期中的任何时候都不需要有多个 MySQL() 对象。您可以使用工厂方法来确保您永远不会创建多个 MySQL() 对象。考虑以下（psuedoesq）代码：

```
public class MySQLFactory extends DBFactory{
    private MySQLFactory() {}
    private MySQL myObject;

    public static DataBase createDB() {
        if(myObject == null) {
             myObject = new MySQL();
        } 

        return myObject;
    }
} 
```

使用此代码，您几乎可以保证不会创建多个该对象的实例。这有助于在创建新对象时节省资源，这可能很昂贵。

编辑：我确实相信我超出了您最初问题的范围。

# cakephp - CakeDC 用户插件 - 有没有办法更改用户 ID？

> ID：13183110
> 
> 赞同：1
> 
> 时间：2012-11-01T18:14:40.493
> 
> 标签：cakephp

我正在使用 CakeDC 用户插件 (https://github.com/CakeDC/users)。当您添加用户时，它会将他们添加到具有非常长的“id”字段的数据库中（即 5092b9c5-1734-4d1f-a98b-210b46204441）。

我尝试通过代码来删除它，所以它只是在最后一个 id 之后自动递增，但我找不到更改的地方。

有谁知道需要更改哪些线路？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:25:07.023

这可能只是您的表结构。当您将“id”字段设置为 CHAR(36) 时，CakePHP 会自动使用[UUID 。](http://en.wikipedia.org/wiki/Universally_unique_identifier)

只需将该字段更改为 int(10) 自动增量，它应该恢复为“正常”。（不过，我个人是 UUID 的粉丝）。

请记住 - 任何引用 user_id 的字段也必须具有相同的字段类型。

# java - 类型不匹配：无法从 org.apache.http.HttpResponse 转换

> ID：13183111
> 
> 赞同：0
> 
> 时间：2012-11-01T18:14:44.673
> 
> 标签：java, android, httprequest

我正在尝试通过发出 HTTP 请求来更新 Android 中的 MySQL 数据，但它给了我一个错误

“类型不匹配：无法从 org.apache.http.HttpResponse 转换为 com.google.api.client.http.HttpResponse”

在这行代码“httpClient.execute(httpPost)”

```
HttpResponse response = httpClient.execute(httpPost); 
```

它通过添加 org.apache.http 来提供快速修复的选项

```
org.apache.http.HttpResponse response = httpClient.execute(httpPost); 
```

有人可以告诉我我在这里做错了什么吗？太感谢了！

```
protected String doInBackground(String... params) {

    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost("http://---.com/---/approve_request.php");

    List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>();
    nameValuePair.add(new BasicNameValuePair("status", "Approved"));

    try {
          httpPost.setEntity(new UrlEncodedFormEntity(nameValuePair));
        } catch (UnsupportedEncodingException e) {              
           e.printStackTrace();
        }

           try {
              org.apache.http.HttpResponse response = httpClient.execute(httpPost);  
              Log.d("Http Response:", response.toString());

         } catch (ClientProtocolException e) {             
              e.printStackTrace();

         } catch (IOException e) {              
              e.printStackTrace();

         }

    return null;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T18:17:24.250

您的代码中有错误的导入语句。

转到你的班级顶部并寻找

`import com.google.api.client.http.HttpResponse`

将其替换为

```
import org.apache.http.HttpResponse 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:32:31.823

```
 import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.NameValuePair;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.entity.UrlEncodedFormEntity;
    import org.apache.http.client.methods.HttpPost;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.apache.http.message.BasicNameValuePair;

     InputStream is = null;
     ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("status", "Approved"));

        try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(
                ""http://---.com/---/approve_request.php"");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString());
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T18:21:59.803

使用`import org.apache.http.HttpResponse;` 代替`import com.google.api.client.http.HttpResponse;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T18:17:57.163

你会有

```
 import com.google.api.client.http.HttpResponse; 
```

在源代码顶部的导入列表中。

请更新为

```
 import org.apache.http.HttpResponse;. 
```

`httpClient.execute(httpPost);`正在返回`org.apache.http.HttpResponse`对象，并且由于导入类型不正确，您正试图将其强制转换为`com.google.api.client.http.HttpResponse`，这是导致问题的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T18:18:24.870

`org.apache.http.HttpResponse`并且`com.google.api.client.http.HttpResponse`是两个完全独立且不同的 Java 类。您不能只是简单地拿一个并将其转换为另一个。如果您使用的是 Apache 的`HttpClient`，那么它将始终返回`org.apache.http.HttpResponse`，而不是 Android 版本。如果您确实想使用 Apache 的 HttpClient，那么我建议您坚持使用 Apache 版本而不是 Android 版本的 HttpResponse，并根据需要直接提取 headers/content。

# python - 为python3.3安装pip

> ID：13183112
> 
> 赞同：22
> 
> 时间：2012-11-01T18:14:49.243
> 
> 标签：python, macos, unix, pip, python-3.3

我从[Package Index > pip 1.2.1下载了 pip](http://pypi.python.org/pypi/pip)

然后我使用安装它

```
sudo python3.3 setup.py install 
```

不过，当我尝试使用`pip-3.3`终端时抱怨

```
-bash: pip-3.3: command not found 
```

但是，`pip-2.7`工作得很好。

我也试过

```
curl -O http://python-distribute.org/distribute_setup.py
sudo python3.3 distribute_setup.py
sudo python3.3 -m easy_install pip 
```

但`pip-3.3`仍然无法正常工作。

我该怎么做才能为 Python 3.3 安装 pip？

请注意，有一个相关线程[How to install pip with Python 3?](https://stackoverflow.com/questions/6587507/how-to-install-pip-with-python-3) ，但答案只是“安装分发...然后使用它来安装 pip”这对我没有帮助，因为我已经尝试过但它没有用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T18:51:31.607

有可能`pip`确实在*某处*成功安装。但是，*某个地方*可能不在您的`PATH`身上，因此您的外壳（bash）不知道在哪里可以找到它。对我来说，`pip-2.6`安装在：

```
/Library/Frameworks/Python.framework/Versions/2.6/bin/ 
```

这对您来说可能是类似的路径（只有 3.3 而不是 2.6）。当然，添加到`PATH`shell 依赖。在您将使用的类似 bash 的 shell 和您将使用`export`的类似 csh 的 shell 上`setenv`——为了方便起见，您可能希望在 shell 的初始化文件中进行更改（例如`~/.bashrc`，或`~/.bash_profile`类似的东西）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-11T03:45:53.007

一种方法是使用用于 python3 的 homebrew 安装。它带有内置的 pip3。这也意味着您有一个与 dmg/pkg 安装不同的卸载程序。

如果您已经有自制软件，那么它就像`brew install python3`. 更详细的说明[在这里](http://blog.manbolo.com/2013/02/04/how-to-install-python-3-and-pydev-on-osx#2)。[您可以在此处](https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python)阅读有关 python3 brew 安装的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-12T23:17:42.477

**对于 Mac：**

```
sudo easy_install pip3 
```

如果你仍然遇到麻烦，可能是因为你自己编译了 python3，使用 apt-get 或 homebrew 卸载你的编译并重新安装 python3 包，此时它应该带有 pip。

```
brew uninstall python3
brew install python3
brew link --overwrite python3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-03T16:23:09.187

```
curl --silent --show-error --retry 5 https://bootstrap.pypa.io/get-pip.py | sudo python3.3 
```

见[这里](https://stackoverflow.com/a/17601159/819417)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-20T16:56:53.237

*如果*实际安装了 pip，则始终可以通过版本化的 Python 命令调用它，如下所示：

```
python3.3 -m pip 
```

# c# - 接口参考

> ID：13183118
> 
> 赞同：1
> 
> 时间：2012-11-01T18:15:20.803
> 
> 标签：c#

我有一个疑问，我已经搜索了很多关于它的东西，但我没有找到任何可以解释的东西。

我可以在我的类中拥有一个引用接口的属性，并使用 DI 来填充这些属性。例如：

```
public interface ITest {
    void DoSomething();
}

public class Test {
    ITest _test;

    public Test(Itest _test)
    {
        this._test = test;
    }
} 
```

问题是，如果我有一个泛型接口，并且我的类不使用泛型，当我创建这些属性时会引发编译错误

```
public interface ITest<T> {
    void DoSomething(T parameter);
}

public class Test {
    ITest<T> _test; //error (Type cant be found)

    public Test(Itest<T> _test)
    {
        this._test = test;
    }
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:17:53.657

您的`Test`类也需要是通用的 - 否则无法知道变量所指的`ITest<T>`类型。`_test`你怎么知道怎么打电话`_test.DoSomething()`？的类型参数当然`Test`不必是`T`：

```
public class Test<TFoo> {
    ITest<TFoo> _test;

    public Test(ITest<TFoo> _test)
    {
        this._test = test;
    }
} 
```

然后，您将其构造为：

```
ITest<string> x = ...;
Test<string> test = new Test<string>(x); 
```

类型安全会*阻止*您编写：

```
Test<int> test = new Test<int>(x); 
```

因为你不能`Test<int>`从a 构造 a `ITest<string>`。

或者，您的`Test`课程可能只需要采用一种特定的`ITest`，因此根本不是通用的：

```
public class Test {
    ITest<Guid> _test;

    public Test(ITest<Guid> _test)
    {
        this._test = test;
    }
} 
```

这完全取决于您要达到的目标。

编辑：如评论中所述，如果您的`Test`类不使用`ITest<T>`依赖的任何方面`T`，您可能希望创建一个非泛型基接口：

```
public interface ITest {
    void DoSomethingBland();
}

public interface ITest<T> : ITest {
    void DoSomethingSpecific(T foo);
} 
```

然后你可以让你的类只依赖于非泛型`ITest`接口而不是`ITest<T>`.

# c# - 使用 FileSystemWatcher 时应该有多个线程吗？

> ID：13183119
> 
> 赞同：2
> 
> 时间：2012-11-01T18:15:27.803
> 
> 标签：c#, filesystemwatcher

我有一个 MVC3 Web 应用程序，用户通过该应用程序将文本文件上传到服务器上的 APP Data/Upload 文件夹。要求是将这些新上传的文件通过 FTP 传输到另一台服务器上的文件夹中。我在监视此上传文件夹的控制台应用程序中使用了 FileSystemWatcher。完全创建文件后，我将这个新生成的文件传输到 FTP 文件夹。

我担心的是，如果多个实例/用户从 Web 应用程序上传文件，我的控制台应用程序将如何处理这种情况？例如，我是否需要有一个队列并使用例如`FileProcesser`下面的方法在不同的线程上处理文件？

```
public class FileProcessor
{
    private readonly Queue<string> files = new Queue<string>();
    private Thread thread;
    private readonly EventWaitHandle waitHandle = new AutoResetEvent(true);
    private static readonly object lockObject = new object();

    private volatile bool shouldStop = false;

    #region Helper methods

    private static bool IsFileUploadComplete(string path)
    {
        try
        {
            using (File.Open(path, FileMode.Open, FileAccess.Read, FileShare.None))
            {
                return true;
            }
        }
        catch (IOException)
        {
            return false;
        }
    }

    private void ProcessFile(string path)
    {
        // Check if Result file has been completely created / uploaded
        int maximumProcessRetries = 5;
        int delayBeforeRetry = 5000; //in milliseconds, 5 seconds

        int attempts = 0;

        while (true)
        {
            if (IsFileUploadComplete(path))
            {
                //1\. Open in existing IE process on Instrument Workstation
                var p = new System.Diagnostics.Process();
                var s = new System.Diagnostics.ProcessStartInfo(Settings1.Default.RSLSM_URL);
                s.UseShellExecute = true;
                s.WindowStyle = System.Diagnostics.ProcessWindowStyle.Normal;
                p.StartInfo = s;
                p.Start();

                //2\. Open in new IE process on Instrument workstation
                //System.Diagnostics.Process.Start("IEXPLORE.EXE", "www.yahoo.com");

                break;
            }
            attempts += 1;
            if (attempts >= maximumProcessRetries)
            {
                // Log error and send out notifications to RSLMS Database or Email RSLMS Admin group?
                break;
            }
            Thread.Sleep(delayBeforeRetry);
        }

        // Add any logic after the file has been processed
        //File.Delete(path);
    }

    private void Work()
    {
        while (!shouldStop)
        {
            string path = String.Empty;
            lock (lockObject)
            {
                if (files.Count > 0)
                {
                    path = files.Dequeue();
                }
            }

            if (!String.IsNullOrEmpty(path))
            {
                // Process the file
                ProcessFile(path);
            }
            else
            {
                // If no files are left to process then wait
                waitHandle.WaitOne();
            }
        }
    }

    #endregion

    #region Methods

    public void EnqueueFile(string path)
    {
        // Queue the file
        lock (lockObject)
        {
            files.Enqueue(path);
        }

        // Initialize and start the worker thread when the first file is queued
        // or when it has been stopped and thus terminated.
        if (thread == null || shouldStop)
        {
            thread = new Thread(new ThreadStart(Work));
            thread.Start();
        }
        // If the thread is waiting then start it
        else if (thread.ThreadState == ThreadState.WaitSleepJoin)
        {
            waitHandle.Set();
        }
    }

    public void StopProcessing()
    {
        shouldStop = true;
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:05:44.440

您的 FileSystemWatcher 已在其自己的线程上运行，并通知您的服务器代码发生了某些事情（在您的情况下创建了一个文件）。

如果事件 args 传递给您的代码，它会提供已创建的文件列表，您可以通过该文件列表进行处理。在您的进程运行期间引发的任何事件都将在另一个线程上运行或排队，具体取决于您的锁定策略。

不过，一般来说，当我收到一个事件时，我会从 Directory.GetFiles 中获取所有文件的列表并处理该列表。它保证我不会从 Watcher 事件中丢失任何文件。

如果这要在生产环境中运行，您将希望摆脱该控制台应用程序并让您的进程作为 Windows 服务运行。控制台应用程序太脆弱了，任何人都可以走到该控制台前终止它。

# android - android opengl es 2 无法在所有设备上运行

> ID：13183121
> 
> 赞同：0
> 
> 时间：2012-11-01T18:15:31.283
> 
> 标签：android, drawing, opengl-es-2.0

我的应用程序有点问题。我使用三星 Galaxy S3 开发了我的应用程序来测试它，结果一切正常！但问题是，在我完成应用程序后，我开始在其他设备上进行测试。该应用程序在其他 Galaxy S3 和 Galaxy S 上运行完美。但是当我尝试在 Sony Xperia 和 LG Optimus Net Dual 上运行它时，屏幕只是变成黑色！

更有趣的是，这些设备上的应用程序，声音功能还可以，广告出现，应用程序完美响应触摸，但只画黑屏！这真的很奇怪......就像他们不支持opengles 2但他们支持并且android版本是Xperia上的4.0 ICS和LG上的2.2！

有谁知道这是什么？还是遇到了类似的问题？如果有人想要代码，请说并在此处发布！谢谢你的帮助！

编辑：

我的负载纹理：

```
 public static int loadTexture(final int ResourceId, final int min_filter, final int mag_filter) {
    for (int i=0;i<nTextures;i++) if (Textures[i*2]==ResourceId) return Textures[i*2+1];
    int[] textureHandle = new int[1];

    GLES20.glGenTextures(1, textureHandle, 0);
     if (textureHandle[0] != 0)
        {
            final BitmapFactory.Options options = new BitmapFactory.Options();
            options.inScaled = false;
            final Bitmap bitmap = BitmapFactory.decodeResource(GLRenderer.mContext.getResources(), ResourceId, options);
            GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureHandle[0]);
            GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, min_filter);
            GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, mag_filter);
            GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S,GLES20.GL_CLAMP_TO_EDGE);
            GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T,GLES20.GL_CLAMP_TO_EDGE);
            GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0,GLES20.GL_RGBA, bitmap, 0);
            bitmap.recycle();
        }
        if (textureHandle[0] == 0) throw new RuntimeException("Error loading texture.");
        Textures[nTextures*2]=ResourceId;
        Textures[nTextures*2+1]=textureHandle[0];
        nTextures++;
        return textureHandle[0];
} 
```

编辑2：

我的 GLSurfaceView 的创建：

```
 GLActivityView(GLActivity context) {
        super(context);
        setEGLContextClientVersion(2);
//      getHolder().setFormat(PixelFormat.TRANSLUCENT);
//      setEGLConfigChooser(8, 8, 8, 8, 8, 8);
        renderer = new GLRenderer(context);
        setRenderer(renderer);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:20:49.193

也许这些手机不支持 NPOT 功能。如果不支持 NPOT，那么您可能需要确保您的纹理尺寸都是 2 的幂。

你可以像这样检查

```
static public boolean isNPOTSupported(GL10 gl) {
    String extensions = gl.glGetString(GL10.GL_EXTENSIONS);
    return extensions.indexOf("GL_OES_texture_npot") != -1;
} 
```

# python - Ubuntu 12.04 应用程序指示器 python

> ID：13183122
> 
> 赞同：0
> 
> 时间：2012-11-01T18:15:38.090
> 
> 标签：python, ubuntu-12.04

如何在 python 指示器应用程序中退出使用菜单项？

```
menu = gtk.Menu()
buf = "Quit"
menu_items = gtk.MenuItem(buf) # click the Quit close the application. How to?
menu.append(menu_items)
menu_items.show()
ind.set_menu(menu)
gtk.main() 
```

我想单击`buf`菜单项以关闭应用程序。`def quit:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T14:14:41.723

有几种方法可以实现这个功能

## 第一

```
import sys
def quit(widget):
    sys.exit(0) 
```

## 第二

```
import os
def quit(widget):
    os.kill(os.getpid(), 9) 
```

## 3日

```
def quit(widget):
    gtk.main_quit() 
```

然后，您应该在单击（激活）时将回调连接到菜单项，如下所示：

```
menu = gtk.Menu()
item = gtk.MenuItem("quit")
item.connect("activate", quit)
item.show()
menu.append(item) 
```

同时，我更喜欢第三种定义退出的方法，它是我测试的最快的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:47:39.653

这对我有用，在顶部导入 sys。

```
import sys 
```

然后在要退出的函数中输入：

```
sys.exit(0) 
```

下面是我的工作示例（检查 quitApplicaiton 函数）：

```
#!/usr/bin/env python
#
#
# Authors: Stuart Page <xxx@gmail.com>
#
#

import gobject
import gtk
import appindicator
import sys

def menuitem_response(w, optionName):
    print optionName

def quitApplication(w, optionName):
    sys.exit(0)

if __name__ == "__main__":
    ind = appindicator.Indicator ("example-simple-client",
                                  "indicator-messages",
                                  appindicator.CATEGORY_APPLICATION_STATUS)

    ind.set_status (appindicator.STATUS_ACTIVE)
    ind.set_attention_icon ("indicator-messages-new")

    # create a menu
    menu = gtk.Menu()

    # create some drop down options

    optionName = "Menu Option - 1"
    menu_items = gtk.MenuItem(optionName)
    menu.append(menu_items)
    menu_items.connect("activate", menuitem_response, optionName)
    menu_items.show()

    optionName = "Menu Option - 2"
    menu_items = gtk.MenuItem(optionName)
    menu.append(menu_items)
    menu_items.connect("activate", menuitem_response, optionName)
    menu_items.show()

    optionName = "Quit"
    menu_items = gtk.MenuItem(optionName)
    menu.append(menu_items)
    menu_items.connect("activate", quitApplication, optionName)
    menu_items.show()

    ind.set_menu(menu)

    gtk.main() 
```

# ios - genstrings 仅在大约 100 个 NSLocalizedString 实例中找到 5 个

> ID：13183123
> 
> 赞同：2
> 
> 时间：2012-11-01T18:15:38.337
> 
> 标签：ios

我有大约 100 个实例，我使用 NSLocalizedString 分布在多个目录中的多个文件中。

我首先尝试从高级目录使用此命令来生成 .strings 文件：

```
find . -name \*.m | xargs genstrings -o en.lproj 
```

但这导致了错误：

```
couldn't connect to output directory en.lproj 
```

所以我只是运行了这个：

```
find . -name \*.m | xargs genstrings 
```

这生成了一个 Localizable.strings 文件，但它的内容仅从 2 个文件中提取了 NSLocalizedString 出现 - 这可能并非巧合地恰好位于同一目录中。

为什么该命令只处理一个目录然后停止。我正在从更高级别的目录 H 运行命令，并且在 M 中找到了这些源文件，因此命令找到了 H/M，但有 M 的对等目录，例如 H/AH/B 等，其中包含包含 NSLocalizedString 实例的 .m 文件。

知道为什么会出现问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T20:29:30.553

我认为 genstrings 正在破坏名称中带有空格的文件夹。这对我有用：

```
find . -name "*.m" -print0 | xargs -0 genstrings -o "OUTPUT_FOLDER" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:44:27.260

我用 cat 将所有文件连接成一个，然后在上面运行 genstrings 来获取。

有兴趣知道为什么没有它就行不通。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T18:41:47.313

确保您`en.lproj`在从中运行命令的目录中调用了一个目录（大概是 .xcodeproj 所在的目录）。如果它不存在，只需创建它。

# ssms - 与 Sybase ASE 的 SSMS 连接

> ID：13183124
> 
> 赞同：6
> 
> 时间：2012-11-01T18:15:43.920
> 
> 标签：ssms, sap-ase

有没有办法使用 Sql Server Management Studio 2008 连接到 Sybase (ASE) 数据库实例？我尝试使用其他工具进行连接，但它们非常有限，并且想使用 SSMS。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-03T14:33:17.290

您可以使用此工具：

[SqlDbx](http://www.sqldbx.com/)

这很棒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T16:51:15.940

据我所知，没有办法使用 Microsoft 的 Server Management Studio。如果你是诚实的，它也没有多大意义。为什么 sybase/sap 应该设计他们的服务器来使用竞争对手提供的应用程序。

我个人更喜欢使用 isql 作为 sybase 服务器的客户端软件。如果您希望有一个 GUI，Sybase Central 可能是您的一个选择。

# c++ - 将文本写入文件，包括空格

> ID：13183127
> 
> 赞同：0
> 
> 时间：2012-11-01T18:15:52.613
> 
> 标签：c++, file, save

我在 C++ 中有以下程序：

这个程序有两个问题。首先，如果用户在文本中使用空格，那么第一个空格之后的数据不会被保存。我怎么解决这个问题？

其次，我想在一个会话中附加的文本和文本文件中的另一个文本之间包含一个换行符。我如何指示程序这样做？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:23:46.043

在 write_to_file 函数中尝试使用 fwrite 而不是 fprintf。虽然语法有点不同。

fwrite（数据，size_t，计数，fp）；

这会将大小为 size_t 的项目的计数从数据写入 fp（文件指针）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:20:08.020

第一个问题：不要使用 cin >> 文本。这将读取一个字符串，直到找到第一个空格。您可能想使用[cin.getline](http://www.cplusplus.com/reference/iostream/istream/getline/)。

第二个问题：在将用户的输入写入文件后，您可以简单地 cout << endl 。

如果您不希望文件末尾有换行符，则需要区分新文件和现有文件。为此，请修改您的 write_to_file 函数以接收第三个参数，该参数告诉它文件是否已存在。如果存在，则在将用户输入写入文件之前执行 cout << endl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:20:22.037

您可以使用[`getline`](http://www.cplusplus.com/reference/string/getline/)一次获取多行用户输入。至于会话之间的换行符，您不能在用户完成输入文本后向文件写入新行。这样，下次打开文件时，您将在换行后开始。

# python - 使用 super 而不命名类

> ID：13183145
> 
> 赞同：2
> 
> 时间：2012-11-01T18:16:53.263
> 
> 标签：python, class, super, python-2.x

> **可能重复：**
> [super(type(self), self) 的快捷方式](https://stackoverflow.com/questions/4883822/shortcut-for-supertypeself-self)

我看到的`super`在 Python 2.x 中使用的每个示例都如下所示`super(ClassName, self)`：

有什么理由不使用`super(type(self), self)`吗？

# c# - 从 MongoDb 集合中检索记录时，记录是否根据为该集合设置的索引排序？

> ID：13183146
> 
> 赞同：0
> 
> 时间：2012-11-01T18:16:54.153
> 
> 标签：c#, mongodb

我有一个看起来像这样的案例：我有一个名为“Test”的集合，我为它设置了一个索引，索引看起来像这样：

```
{
 "A" : 1,
 "B" : 1,
 "C" : 1
} 
```

在我的代码中，我正在检索基于“A”是某个值的记录：

```
List<Test> tests = Test.Find(Query.EQ("A", CertainValue)).ToList(); 
```

令我惊讶的是，所有记录都按索引中提到的顺序排序（“B”升序，然后“C”升序）

我想知道这种行为是否总是可以预料的，记录是否总是会根据索引进行排序，或者我只是在想象一些东西，这只是一个偶然的情况？

PS。记录未输入到排序的集合中，因此这不是记录的自然顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:27:30.380

与许多其他字典实现一样，[数据库中的顺序没有定义或保证（上限集合除外）](http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order)并且随时可能更改：

> “自然顺序”被定义为数据库对集合中对象的本机排序。
> 
> 当执行不带参数的 find() 时，数据库会以正向自然顺序返回对象。
> 
> 对于标准表，自然顺序并不是特别有用，因为尽管顺序通常接近插入顺序，但不能保证如此。但是，对于 Capped Collections，自然顺序保证为插入顺序。

如果您需要以某种方式对它们进行排序，请使用显式排序，或者参考您的特定驱动程序 (C#) 实现文档以查看它是否为您排序。

# css - 带有扩展悬停的社交按钮（水平翻转）

> ID：13183149
> 
> 赞同：1
> 
> 时间：2012-11-01T18:16:56.943
> 
> 标签：css, button, hover, width

我有一个用 css 制作的动画 twitter 按钮。但我希望这种效果水平翻转；左边的文本和右边的图标。并且扩大的悬停效果从右到左。我尝试了很多事情，但似乎找不到解决方案。有没有人可以在这里帮助我？

[http://jsfiddle.net/3rv94/](http://jsfiddle.net/3rv94/)

HTML：

```
<ul id="tbisose">
<li data-alt="Twitter">
<a class="icon twitter" 
   class="twitter-follow-button" 
   data-show-count="false" 
   href="https://twitter.com/musicradiate">Twitter
</a></li>
</ul> 
```

CSS：

```
#tbisose {
list-style:none; 
text-decoration:none; 
font-size:0.9em; 
font-family:trebuchet ms,sans-serif;
}

#tbisose a {
text-decoration:none; 
font-family:trebuchet ms,sans-serif;
}

#tbisose li {
position:relative; 
height:38px; 
cursor:pointer; 
padding: 0 !important;
}

#tbisose .facebook, .googleplus, .pinterest, .rss, .twitter {
position:relative; 
z-index:5; 
display:block; 
float:none; 
margin:10px 0 0; 
width:120px; height:38px; border-radius:5px; 
background:url(https://lh4.googleusercontent.com/-l0EYSSxxuc8/UFd37FdwjzI/AAAAAAAAG2E/CDbmwPO4haA/s800/sprites.png) no-repeat;  
background-color:rgba(217,30,118,.42); 
-webkit-box-shadow:rgba(0,0,0,.28) 0 2px 3px; 
-moz-box-shadow:rgba(0,0,0,.28) 0 2px 3px;  
box-shadow:rgba(0,0,0,.28) 0 2px 3px; 
color:#141414; 
text-align:left; 
text-indent:40px; 
text-shadow:#333 0 1px 0; 
white-space:nowrap;  
line-height:32px; 
-webkit-transition:width .25s ease-in-out,background-color .25s ease-in-out; 
-moz-transition:width .25s ease-in-out,background-color .25s ease-in-out; 
-ms-transition:width .25s ease-in-out,background-color .25s ease-in-out; 
-o-transition:width .25s ease-in-out,background-color .25s ease-in-out; 
transition:width .25s ease-in-out,background-color .25s ease-in-out; 
-o-box-shadow:rgba(0,0,0,.28) 0 2px 3px;}
#tbisose li:after{position:absolute; top:0; left:40px; z-index:2; display:block; height:38px; color:#141414; content:attr(data-alt);  line-height:32px;}
#tbisose .icon{overflow:hidden; color:#fafafa;}
#tbisose .facebook{width:32px; height:32px; background-color:rgba(59,89,152,0.42); background-position:0 0;}
#tbisose .twitter{width:32px; height:32px; background-color:rgba(64,153,255,0.42); background-position:0 -33px;}
#tbisose .googleplus{width:32px; height:32px; background-color:rgba(228,69,36,0.42); background-position:-3px -66px;}
#tbisose .pinterest{width:32px; height:32px; background-color:rgba(174,45,39,0.42); background-position:0 -95px;}
#tbisose .rss{ width:32px;  height:32px;  background-color:rgba(255,102,0,0.42); background-position:-3px -126px;}
#tbisose li:hover .icon,
.touch #tbisose li .icon{width:110px;}
.touch #tbisose li .facebook, #tbisose li:hover .facebook{background-color:rgba(59,89,152,1);}
.touch #tbisose li .twitter, #tbisose li:hover .twitter{background-color:rgba(64,153,255,1);}
.touch #tbisose li .googleplus, #tbisose li:hover .googleplus{background-color:rgba(228,69,36,1);}
.touch #tbisose li .pinterest, #tbisose li:hover .pinterest{background-color:rgba(174,45,39,1);}
.touch #tbisose li .rss, #tbisose li:hover .rss{background-color:rgba(255,102,0,1);} 
```

# twitter-bootstrap - Bootstrap 崩溃无法正常工作

> ID：13183150
> 
> 赞同：5
> 
> 时间：2012-11-01T18:17:01.880
> 
> 标签：twitter-bootstrap, accordion, collapse

我创建了一个带有 bootstrap collapse 的手风琴。手风琴中的某些元素会在单击特定元素时交替展开。创建以下标记：

```
 <div class="accordion" id="accordion2">

        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" href="#collapse-0" id="0" data-toggle="collapse" data-parent="#accordion2">
                   User Visits
                </a>
            </div>
            <div id="collapse-0" class="accordion-body collapse in">
                <div class="accordion-inner">
                    Collapsible <br/>
                    Collapsible <br/>
                </div>
            </div>
        </div>

        <div class="accordion-group">                   
            <div class="accordion-heading">
                <a class="accordion-toggle" href="#collapse-1" id="1" data-toggle="collapse" data-parent="#accordion2">
                    Points
                </a>
            </div>                  
            <div id="collapse-1" class="accordion-body collapse">
                <div class="accordion-inner">
                    Collapsible <br/>
                    Collapsible <br/>
                </div>
            </div>
        </div>

    </div> 
```

问题是在页面加载后第一次单击特定元素会导致`.accordion-body .collapse`块成功扩展，但连续调用不会导致任何扩展。

由于添加了一个`in`动态调用的类，因此扩展结果。即使连续单击手风琴元素，检查`in`也会显示类的翻转，但尽管该元素没有扩展。

请提出可能是什么问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T09:06:00.770

我已经弄清楚了问题所在。实际上，collapse jquery 插件需要包含`bootstrap-transition`插件。我尝试使用`bootstrap-collapse`导致上述问题的“仅”或`bootstrap.js`导致其他问题的完整。

# css - 为 IE8 修复 HTML5

> ID：13183151
> 
> 赞同：-2
> 
> 时间：2012-11-01T18:17:04.917
> 
> 标签：css, html, google-chrome, internet-explorer-8, web

我似乎无法弄清楚为什么以下代码在 IE8 中无法正常运行，但在 Chrome 中却完美运行。请告知代码中的任何错误，或者如果有我可以快速实施的解决方法。

```
<!DOCTYPE html>

<html lang="en">
<head>
    <meta name="description" content="Orlando Cake Balls">
    <meta name="keywords" content="Cake Balls,Cakes Balls,Cake Balls Cake,Orlando Cakes,Cake Pops Recipes,What is a Cake Pop,What is a Cake Ball,Cake,Ball,Cakes,Balls,Orlando,Pops,Recipes,What">
    <meta name="author" content="Joe Quinn">
    <meta charset="utf-8" />
    <title>ORL Cake Balls</title>
    <link rel="stylesheet" type="text/css" href="StyleSheet.css" />    
        <!--Google Analytics-->
        <script type="text/javascript">
          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-36012302-1']);
          _gaq.push(['_trackPageview']);

          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        </script>
</head>
<body>

    <div id="emailcontainer">
        <a href="mailto:info@orlandocakeballs.com" title="Contact Us" class="emaillink"></a>

        <div id="socialmedia">
            <div id="twitter">
                <a href="https://twitter.com/ORLCakeBalls/" target="_blank" data-show-count="false"><img src="../twitter-logo.jpg" width="25" height="25" alt="Twitter Link" /></a>
           <!--     <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>  -->
            </div>
            <a href="http://www.facebook.com/OrlandoCakeBalls/" target="_blank" id="facebook" title="Like Us"><img src="../facebook-logo.jpg" width="25" height="25" alt="Facebook Link" /></a>
            <a href="http://pinterest.com/orlcakeballs/" target="_blank" id="pinterest" title="Pin Us"><img src="../pinterest-logo.jpg" width="25" height="25" alt="pinterest Link" /></a>
        </div>
    </div>
<footer id="copyright">
© 2012 Orlando Cake Balls. All rights reserved.
</footer>

</body> 
```

```
body {
background: #fff url(../landingpage.jpg) no-repeat top center;
background-size: auto 900px;
}
#emaillink {
text-decoration: none;
}
#copyright {
padding: 830px 0px 10px 0px;
text-align: center;
color: #fff;
font-family: Arial;
}

.emaillink {
position: absolute; 
top: 400px; 
left: 695px; 
width: 290px; 
height: 50px; 
background-color: transparent; 
border: 1px solid #fff; 
}

.emaillink:hover {
position: absolute; 
top: 400px; 
left: 695px; 
width: 290px; 
height: 50px; 
background-color: transparent; 
border-bottom: 1px solid #00BFFF; 
}
#emailcontainer {
width: 900px;
margin: 0 auto;
position: relative;
}
#twitter {
position: absolute; 
top: 470px; 
left: 720px; 
/*background-color: transparent; 
border: 1px solid #fff; */
}
#twitter:hover {
opacity: 0.4;
filter: alpha (opacity=40); /* For IE8 and earlier */
}

#facebook {
position: absolute; 
top: 470px; 
left: 755px; 
background-color: transparent; 
border: 1px solid #fff; 
}
#facebook:hover {
opacity: 0.4;
filter: alpha (opacity=40); /* For IE8 and earlier */
}

#pinterest {
position: absolute; 
top: 470px; 
left: 790px; 
background-color: transparent; 
border: 1px solid #fff; 
}
#pinterest:hover {
opacity: 0.4;
filter: alpha (opacity=40); /* For IE8 and earlier */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:27:08.710

css 样式（在您的`background-size`正文样式中）是 CSS3 中的新样式，IE8 或更低版本不支持。请参阅[http://www.quirksmode.org/css/contents.html#t45](http://www.quirksmode.org/css/contents.html#t45)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:37:11.393

您应该考虑添加`display: block`到`footer`元素。

> 但是当浏览器遇到它无法识别的元素时会发生什么？我们不能确定。它可能没有样式，它可能继承一些默认样式，它可能根本不显示。因此，我们确保在我们自己的 CSS 中考虑到新元素的所有样式。没有假设。

来源： http: [//net.tutsplus.com/tutorials/html-css-techniques/how-to-make-all-browsers-render-html5-mark-up-correctly-even-ie6/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-make-all-browsers-render-html5-mark-up-correctly-even-ie6/)

您可以使用[HTML5 重置样式表](http://html5doctor.com/html-5-reset-stylesheet/)来执行此操作以及执行更多操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T07:10:18.783

```
<script type="text/javascript">
 document.createElement('header');
 document.createElement('nav');
 document.createElement('menu');
 document.createElement('section');
 document.createElement('article');
 document.createElement('aside');
 document.createElement('footer');
</script> 
```

# java - 使用来自java的参数执行shell脚本

> ID：13183152
> 
> 赞同：10
> 
> 时间：2012-11-01T18:17:05.170
> 
> 标签：java, bash, runtime

我已经在谷歌上搜索了一段时间，每个人似乎都有不同的解决方案，但似乎没有一个对我有用。

我都试过了`ProcessBuilder`和`Runtime`。直接调用`.sh`文件并将其提供给`/bin/bash`. 没有运气。

回归基础，我目前的代码如下；

```
String cmd[] = { "~/path/to/shellscript.sh", "foo", "bar" };
Process p = Runtime.getRuntime().exec(cmd); 
```

尽管手动运行，但它给出了`No such file or directory`错误；

```
~/path/to/shellscript.sh foo bar 
```

从 bash 完美运行。

我需要保留，`~`因为对于三个不同的用户，这个 shellscript 以稍微不同的形式存在。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T18:20:37.107

一种选择是处理`~`自己：

```
String homeDir = System.getenv("HOME");
String[] cmd = { homeDir + "/path/to/shellscript.sh", "foo", "bar" };
Process p = Runtime.getRuntime().exec(cmd); 
```

另一个是让 Bash 为您处理它：

```
String[] cmd = { "bash", "-c", "~/path/to/shellscript.sh foo bar" };
Process p = Runtime.getRuntime().exec(cmd); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T21:17:55.403

As already mentioned, tilde is a shell-specific expansion which should be handled manually by replacing it with the home directory of the current user (e.g with `$HOME` if defined).

Besides the solutions already given, you might also consider using [commons-io](http://commons.apache.org/io/) and [commons-exec](http://commons.apache.org/exec/) from the [Apache Commons](http://commons.apache.org/) project:

```
...
import org.apache.commons.exec.CommandLine;
import org.apache.commons.exec.DefaultExecutor;
import org.apache.commons.exec.Executor;
import org.apache.commons.io.FileUtils;
...
CommandLine cmd = new CommandLine("path/to/shellscript.sh");
cmd.addArgument("foo");
cmd.addArgument("bar");

Executor exec = new DefaultExecutor();
exec.setWorkingDirectory(FileUtils.getUserDirectory());
exec.execute(cmd);
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:19:23.777

一般来说，我建议您使用[ScriptEngine](http://www.java2s.com/Code/Java/JDK-6/RunningScriptswithJavaScriptEngine.htm)而不是 System.getRuntime().exec
我认为这会让您的事情变得更容易。
请记住，您需要此 JDK 6 及更高版本。
此外，关于您的具体问题 - 我真的认为这个问题应该是可配置的。
您可以执行以下操作：
A. 在您的 .bash_rc 或 .bash_profile（对于每个用户）中使用以下命令定义配置
脚本的路径：
EXPORT MY_SCRIPT=

B. 从 java 代码中读取此值，
`String sciprtPath = System.getenv("MY_SCRIPT")`用于获取该值。
C. 使用 scriptPath 变量或使用 scriptEngine 运行脚本，就像您在代码中所做的那样。

# c# - 设置 SmartNavigation=True 会导致 javascript offset.Width/offset.Height 出错

> ID：13183153
> 
> 赞同：0
> 
> 时间：2012-11-01T18:17:05.493
> 
> 标签：c#, asp.net, .net, css

我正在使用流行的 css hack 来启用 Internet Explorer 8 中的边界半径，可以在此处找到：( [Curved-corner-border-radius-cross-browser](http://www.htmlremix.com/css/curved-corner-border-radius-cross-browser) )。

它在 IE8 中按预期工作，但在任何具有回发和 SmartNavigation=True 的 .net 页面上除外。在回发时，我收到一个 javascript 错误 Invalid Argument Line 87，这是在 htc 文件中，其中正在检索具有圆角的 offsetHeight / offsetWidth 的 div。css 无法正常工作，布局完全混乱。

我在这个 htc 文件中放了一个 javascript 警报，只是为了显示应该有圆角的容器的 offsetWidth 的值。当您第一次加载页面时，您会看到数值，单击警报上的确定，css 将按应有的方式显示。在回发时，警报将显示值 -1。在警报上单击“确定”，css 已损坏。为什么 SmartNavigation=True 时无法在回发时找到 offsetWidth / offsetHeight？

在回发时发生错误，无效的参数行 87（实际上是 88 现在带有警报）并且 css 不呈现。我怀疑这与页面初始化以及调用此 htc 文件中的 javascript 时有关。如果是这种情况，为什么它在第一个页面加载时工作，是什么导致在 SmartNavigation=Ture 的回发期间调用 htc 文件的方式不同。？有什么想法可以让这个 IE hack 与 SmartNavigation 一起工作吗？

这是页面：http: [//innerworkingdesigns.com/demos/radius/test.aspx](http://innerworkingdesigns.com/demos/radius/test.aspx)

点击此处查看 htc 文件 [http://innerworkingdesigns.com/demos/radius/styles/border-radius.htc](http://innerworkingdesigns.com/demos/radius/styles/border-radius.htc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:43:04.493

问题在于 SmartNavigation=True。删除它或设置为 false 可以解决问题。您仍然会遇到 SmartNavigation=True 解决的任何问题，但这是次要的，SmartNavigation 已被弃用[http://msdn.microsoft.com/en-us/library/system.web.ui.page.smartnavigation.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.smartnavigation.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:05:34.020

如果您在以前版本的 IE 中尝试它，那么边界半径将不起作用..

如果您在 IE 9 中尝试此操作，请确保您有

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

# c++ - C++，重新定义运算符=，为矩阵分配子矩阵

> ID：13183157
> 
> 赞同：3
> 
> 时间：2012-11-01T18:17:14.230
> 
> 标签：c++, matrix, assignment-operator

在类矩阵

```
typedef std::vector < std::vector <double> > TItems;
class Matrix
{
   private :
             TItems items;

   public:
           double & operator() ( int r, int c ) {return items[r][c];}
           Matrix & operator = (const Matrix A, short r1, short r2, short c1, short c2 )

} 
```

我正在尝试重新定义运算符 = 以便能够将子矩阵分配给矩阵。

```
Matrix  & operator = (const Matrix &A, short r1, short r2, short c1, short c2)
{
  Matrix  A_sub( r2 - r1 + 1, c2 - c1 + 1 );

  for ( int i = 0; i < ( r2 - r1 + 1 ); i++ )
  {
    for ( unsigned int j = 0; j < ( c2 - c1 + 1); j++ )
        items[i][j] = A (r1 + i, c1 + j );
  }

  return *this;
 } 
```

但是这样的定义是不可能的......如果需要这种类型的符号，如何解决这个问题？

```
Matrix A(8,8), B (3,9), C(3,4), D(2, 3), E (8, 8);, F(8,8)
...
A(1,3,2,5) = B (0,2,5,8) + C(0,2,0, 3) + D;
F = A + E; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:10:39.053

我认为*最简单*的解决方案是保持相同的类型，然后创建一个方法来创建一个较小的子矩阵（仍然是 type `Matrix`），将值复制进去，然后按值返回它。

```
class Matrix {
public:
  Matrix createSubMatrix(size_t ri, size_t ci, size_t rsz, size_t csz);
}; 
```

然后，您的加法、赋值等操作在尝试翻译其他类型时不会产生额外的开销。

您将支付`Matrix`副本的开销，但在您生命中的这一点上，我不会强调这一点。:)

# php - 如何从查询字符串中删除复选框键值？

> ID：13183159
> 
> 赞同：1
> 
> 时间：2012-11-01T18:17:15.743
> 
> 标签：php, html, web-services, forms

我在表单中有复选框，我正在发布到 php 表单处理器。我的表单处理器向 Web 服务发送一个获取请求。请求需要类似于此的每个复选框 ?services=Chin&services=Neck&services=Back&location=5

没有键值，但使用我的 php 代码，它在每次服务后输出一个 [] 。

```
//build query string
$fields = array('services' => $services,
            'location' => $location,
            'firstname' => $firstname,
            'lastname' => $lastname,
            'email' => $email,
            'emailconfirm' => $email,
            'phone' => $telephone,
            'comments' => $message);

$url = "fakewebaddress?" . http_build_query($fields, '', "&");

//send email if all is ok
if($formok){

    $curl_handle = curl_init($url);
    curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, true);
    $results = curl_exec($curl_handle);
    curl_close($curl_handle);

} 
```

我的 html 框看起来像这样

```
<input type="checkbox" name="services[]" value="Leg" />
<input type="checkbox" name="services[]" value="Chest" />
<input type="checkbox" name="services[]" value="Neck" />
<input type="checkbox" name="services[]" value="Back" /> 
```

如何修复它以获得我需要的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:25:19.783

服务是一个数组，这就是为什么你要`[]`追求每一个。如果不是，`service`则 GET 中的最后一个将替换所有其他的。

您想要这样做的方式将不起作用，因为每个`services`值都会覆盖前一个值。

为什么不在你的 web 服务中循环遍历所有检查值的 services 数组？

有关更多信息，请参阅[http://www.kavoir.com/2009/01/php-checkbox-array-in-form-handling-multiple-checkbox-values-in-an-array.html](http://www.kavoir.com/2009/01/php-checkbox-array-in-form-handling-multiple-checkbox-values-in-an-array.html)。

**编辑**：

对于您想要的（不确定它将如何工作，但这是您想要的）。

```
$url = str_replace('services[]', 'services', $url); 
```

也一样

```
//build query string
$fields = array('services' => $services,
            'location' => $location,
            'firstname' => $firstname,
            'lastname' => $lastname,
            'email' => $email,
            'emailconfirm' => $email,
            'phone' => $telephone,
            'comments' => $message);

$url = "fakewebaddress?" . http_build_query($fields, '', "&");
$url = str_replace('services[]', 'services', $url);
// or use this if the [] is encoded
$url = str_replace('services%5B%5D', 'services', $url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:04:26.680

```
$url = "fakewebaddress?" . http_build_query($fields, '', "&");

$url = str_replace(urlencode('services[]'), 'services', $url); 
```

# hadoop - Hadoop错误无法启动-all.sh

> ID：13183164
> 
> 赞同：0
> 
> 时间：2012-11-01T18:17:40.017
> 
> 标签：hadoop

我已经在我的笔记本电脑单模式下设置了一个 hadoop。信息：Ubuntu 12.10，jdk 1.7 oracle，从 .deb 文件安装 hadoop。位置：/etc/hadoop/usr/share/hadoop

我在 /usr/share/hadoop/templates/conf/core-site.xml 中有配置 我添加了 2 个属性

```
 <property>
  <name>hadoop.tmp.dir</name>
  <value>/app/hadoop/tmp</value>
  <description>A base for other temporary directories.</description>
</property>

<property>
  <name>fs.default.name</name>
  <value>hdfs://localhost:9000</value>
  <description>The name of the default file system.  A URI whose
  scheme and authority determine the FileSystem implementation.  The
  uri's scheme determines the config property (fs.SCHEME.impl) naming
  the FileSystem implementation class.  The uri's authority is used to
  determine the host, port, etc. for a filesystem.</description>
</property> 
```

在 hdfs-site.xml 中

```
<property>
  <name>dfs.replication</name>
  <value>1</value>
  <description>Default block replication.
  The actual number of replications can be specified when the file is created.
  The default is used if replication is not specified in create time.
  </description>
</property> 
```

在 mapred-site.xml

```
 <property>
  <name>mapred.job.tracker</name>
  <value>localhost:9001</value>
  <description>The host and port that the MapReduce job tracker runs
  at.  If "local", then jobs are run in-process as a single map
  and reduce task.
  </description>
</property> 
```

当我开始使用命令 hduser@sepdau:~$ start-all.sh

```
starting namenode, logging to /var/log/hadoop/hduser/hadoop-hduser-namenode-sepdau.com.out
localhost: starting datanode, logging to /var/log/hadoop/hduser/hadoop-hduser-datanode-sepdau.com.out
localhost: starting secondarynamenode, logging to /var/log/hadoop/hduser/hadoop-hduser-secondarynamenode-sepdau.com.out
starting jobtracker, logging to /var/log/hadoop/hduser/hadoop-hduser-jobtracker-sepdau.com.out
localhost: starting tasktracker, logging to /var/log/hadoop/hduser/hadoop-hduser-tasktracker-sepdau.com.out 
```

但是当我通过 jps 查看进程时

```
hduser@sepdau:~$ jps
13725 Jps 
```

更多的

```
 root@sepdau:/home/sepdau# netstat -plten | grep java
tcp6       0      0 :::8080                 :::*                    LISTEN      117        9953        1316/java       
tcp6       0      0 :::53976                :::*                    LISTEN      117        16755       1316/java       
tcp6       0      0 127.0.0.1:8700          :::*                    LISTEN      1000       786271      8323/java       
tcp6       0      0 :::59012                :::*                    LISTEN      117        16756       1316/java 
```

当我 stop-all.sh

```
 hduser@sepdau:~$ stop-all.sh
no jobtracker to stop
localhost: no tasktracker to stop
no namenode to stop
localhost: no datanode to stop
localhost: no secondarynamenode to stop 
```

在我的主机文件中

```
hduser@sepdau:~$ cat /etc/hosts

127.0.0.1       localhost
127.0.1.1   sepdau.com

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters 
```

文件奴隶：本地主机主：本地主机

这是一些日志

```
 hduser@sepdau:/home/sepdau$ start-all.sh
mkdir: cannot create directory `/var/run/hadoop': Permission denied
starting namenode, logging to /var/log/hadoop/hduser/hadoop-hduser-namenode-sepdau.com.out
/usr/sbin/hadoop-daemon.sh: line 136: /var/run/hadoop/hadoop-hduser-namenode.pid: No such file or directory
localhost: mkdir: cannot create directory `/var/run/hadoop': Permission denied
localhost: starting datanode, logging to /var/log/hadoop/hduser/hadoop-hduser-datanode-sepdau.com.out
localhost: /usr/sbin/hadoop-daemon.sh: line 136: /var/run/hadoop/hadoop-hduser-datanode.pid: No such file or directory
localhost: mkdir: cannot create directory `/var/run/hadoop': Permission denied
localhost: starting secondarynamenode, logging to /var/log/hadoop/hduser/hadoop-hduser-secondarynamenode-sepdau.com.out
localhost: /usr/sbin/hadoop-daemon.sh: line 136: /var/run/hadoop/hadoop-hduser-secondarynamenode.pid: No such file or directory
mkdir: cannot create directory `/var/run/hadoop': Permission denied
starting jobtracker, logging to /var/log/hadoop/hduser/hadoop-hduser-jobtracker-sepdau.com.out
/usr/sbin/hadoop-daemon.sh: line 136: /var/run/hadoop/hadoop-hduser-jobtracker.pid: No such file or directory
localhost: mkdir: cannot create directory `/var/run/hadoop': Permission denied
localhost: starting tasktracker, logging to /var/log/hadoop/hduser/hadoop-hduser-tasktracker-sepdau.com.out
localhost: /usr/sbin/hadoop-daemon.sh: line 136: /var/run/hadoop/hadoop-hduser-tasktracker.pid: No such file or directory 
```

我与root用户一起使用，但它有同样的问题

我在这里错了。如何使用 hadoop 插件连接到 eclipse。感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:53:02.853

尝试添加

```
<property>
  <name>dfs.name.dir</name>
   <value>/home/abhinav/hdfs</value>
 </property> 
```

到 hdfs-site.xml 并确保它存在

我为此写了一个小教程。看看这是否有帮助[http://blog.abhinavmathur.net/2013/01/experience-with-setting-multinode.html](http://blog.abhinavmathur.net/2013/01/experience-with-setting-multinode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T05:42:28.657

重启终端，先格式化NameNode。

在一些罕见的情况下，有人更改了 Hadoop 中 Bin 文件夹中的 Start-all.sh 文件。检查一次。

检查一次 bashrc 文件配置是否正确？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T11:32:31.103

您可以添加 pid 所在的路径以及通过编辑文件 hadoop-env.sh 创建的日志。该文件存储在 conf 文件夹中。

```
export HADOOP_LOG_DIR=/home/username/hadoop-1x/logs

export HADOOP_PID_DIR=/home/username/pids 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-14T02:02:00.937

修改你的 hdfs-site.xml

```
<property>
  <name>dfs.name.dir</name>
  <value>/home/user_to_run_hadoop/hdfs/name</value>
</property>

<property>
  <name>dfs.data.dir</name>
  <value>/home/user_to_run_hadoop/hdfs/data</value>
</property> 
```

确保`hdfs`在`/home/user_to_run_hadoop`. 然后创建2个目录`name`并`data`打开`hdfs`

之后你需要`chmod -R 755 ./hdfs/`和`path_to_hadoop_home/bin/hadoop namenode -format`

# asp.net - 复合控件中的自定义验证器未触发

> ID：13183171
> 
> 赞同：2
> 
> 时间：2012-11-01T18:18:19.503
> 
> 标签：asp.net, composite-controls

我在这个问题上陷入了严重的项目中间。谷歌了很多，但没有得到解决方案。

我的目标是创建一个带有标签、文本框、两个必填字段验证器和一个自定义验证器的复合控件。我的自定义控制代码如下：-

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace AFGISServerControl
{
    [ToolboxData("<{0}:ValidatorTextBox runat="\""server\"> </{0}:ValidatorTextBox>")]
    public class ValidatorTextBox : CompositeControl
    {
        private TextBox InputTextBox;
        private Label InputLabel;
        private RequiredFieldValidator RequiredValidator1;
        private RequiredFieldValidator RequiredValidator2;
        private CustomValidator cv;
        private static readonly object EventValidateKey = new object();

        protected override void OnLoad(EventArgs e)
        {
            EnsureChildControls();
            base.OnLoad(e);
        }
        protected override void CreateChildControls()
        {
            Controls.Clear();
            InputTextBox = new TextBox();
            InputLabel = new Label();
            InputTextBox.ID = "inputTextBox";
            //InputTextBox.AutoPostBack = true;

            RequiredValidator1 = new RequiredFieldValidator();
            RequiredValidator1.ID = this.ID + "_RFV1";
            RequiredValidator1.ControlToValidate = InputTextBox.ID;
            RequiredValidator1.ValidationGroup = string.Empty;
            RequiredValidator1.Display = ValidatorDisplay.Dynamic;
            RequiredValidator1.ErrorMessage = Caption.ToString() + " is mandatory";

            RequiredValidator2 = new RequiredFieldValidator();
            RequiredValidator2.ID = this.ID + "_RFV2";
            RequiredValidator2.ControlToValidate = InputTextBox.ID;
            RequiredValidator2.Display = ValidatorDisplay.Dynamic;
            RequiredValidator2.ErrorMessage = Caption.ToString() + " is mandatory";

            cv = new CustomValidator();
            cv.ID = this.ID + "_CV";
            cv.ControlToValidate = InputTextBox.ID;
            cv.SetFocusOnError = true;
            cv.Display = ValidatorDisplay.Dynamic;
            cv.ErrorMessage = this.CustomErrorMessage;
            cv.ValidateEmptyText = true;
            cv.ServerValidate += new System.Web.UI.WebControls.ServerValidateEventHandler(this.cv_ServerValidate);

            this.Controls.Add(InputLabel);
            this.Controls.Add(InputTextBox);
            this.Controls.Add(RequiredValidator1);
            this.Controls.Add(RequiredValidator2);
            this.Controls.Add(cv);
        }

        #region properties
        [
        Bindable(true),
        Category("Default"),
        DefaultValue(""),
        Description("Value")
        ]
        public string Text
        {
            get
            {
                EnsureChildControls();
                return InputTextBox.Text;
            }
            set
            {
                EnsureChildControls();
                InputTextBox.Text = value;
            }
        }
        [
        Bindable(true),
        Category("Default"),
        DefaultValue(""),
        Description("Validation Group")
        ]
        public string ValidationGroup
        {
            get
            {
                EnsureChildControls();
                return InputTextBox.ValidationGroup;
            }
            set
            {
                EnsureChildControls();
                InputTextBox.ValidationGroup = value;
                RequiredValidator2.ValidationGroup = value;
                cv.ValidationGroup = value;
            }
        }
        [
        Bindable(true),
        Category("Default"),
        DefaultValue(""),
        Description("Error message for the custom validator.")
        ]
        public string CustomErrorMessage
        {
            get
            {
                EnsureChildControls();
                return cv.ErrorMessage;
            }
            set
            {
                EnsureChildControls();
                cv.ErrorMessage = value;
            }
        }
        [
        Bindable(true),
        Category("Default"),
        DefaultValue(""),
        Description("Validity of custom validator.")
        ]
        public Boolean isValid
        {
            get
            {
                EnsureChildControls();
                return cv.IsValid;
            }
            set
            {
                EnsureChildControls();
                cv.IsValid = value;
            }
        }

        [
        Bindable(true),
        Category("Default"),
        DefaultValue(""),
        Description("The text for the name label.")
        ]
        public string Caption
        {
            get
            {
                EnsureChildControls();
                return InputLabel.Text;
            }
            set
            {
                EnsureChildControls();
                InputLabel.Text = value;
            }
        }
        #endregion

        protected override void RecreateChildControls()
        {
            EnsureChildControls();
        }

        [
        Category("Action"),
        Description("Raised on Text Change")
        ]
        public event ServerValidateEventHandler Validate
        {
            add
            {
                Events.AddHandler(EventValidateKey, value);
            }
            remove
            {
                Events.RemoveHandler(EventValidateKey, value);
            }
        }
        protected virtual void OnValidate(ServerValidateEventArgs args)
        {
            EventHandler ValidateHandler = (EventHandler)Events[EventValidateKey];
            if (ValidateHandler != null)
            {
                ValidateHandler(this, args);
            }
        }
        protected void cv_ServerValidate(object source, ServerValidateEventArgs args)
        {
            OnValidate(args);
        }

        protected override void Render(HtmlTextWriter writer)
        {
            AddAttributesToRender(writer);
            InputLabel.RenderControl(writer);
            InputTextBox.RenderControl(writer);
            RequiredValidator1.RenderControl(writer);
            RequiredValidator2.RenderControl(writer);
            cv.RenderControl(writer);
        }        
    }
} 
```

我的 aspx 代码是

```
 <cc1:ValidatorTextBox ID="ValidatorTextBox1" runat="server" Caption="Service No"
        CustomErrorMessage="Not Valid" ValidationGroup="test" 
        OnValidate="CVText" />
    <asp:Button ID="Button1" runat="server" Text="Button" /> 
```

aspx.cs

面临的具体问题是

*   未触发“onvalidate”事件的代码隐藏方法
*   必填字段验证器错误消息仅显示“是必需的”，标题没有前缀。

我会很感激你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:25:25.777

一些东西：

*   您需要在源代码控制上调用 Page.Validate() 或使用 CausesValidation=true 触发回发。确保在执行验证时未指定 ValidationGroup 或使用“测试”ValidationGroup。
*   在 CreateChildControls 期间正在设置必填字段验证器。您的标题是从输入文本中提取的，直到初始化后才会填充。您的 CreateChildControls 可能在加载 ViewState 之前发生。您可能希望使用 JavaScript 设置 RequiredFieldValidator 文本，或者使用 _TextChanged 事件处理程序在文本更改时更新错误消息。您采用的方法显然取决于您的特定用例要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:44:13.067

在打破头之后，我改变了使用这个控件的整个方式。继续使用验证器。这是一个相当有效的方法。

# html-table - 如何保持表格的宽度？

> ID：13183172
> 
> 赞同：0
> 
> 时间：2012-11-01T18:18:20.547
> 
> 标签：html-table, html-email

我正在尝试为电子邮件模板设置一个表格，顶部有一个图像，占据整个宽度（600px），然后是两列从中间分开的图像。但是由于某种原因，右列将表格宽度推得太远了。

JS 小提琴：http: [//jsfiddle.net/5QEhK/1/](http://jsfiddle.net/5QEhK/1/)

```
<table width="600" style="border: 1px solid #b8b7b7;margin-bottom: 10px;">

    <!--Main Image-->

       <tr align="center" valign="center" width="580px">
           <td align="center" valign="center" width="580px">
               <img border="0" style="padding: 0;margin: 0;" src="http://homeplan.com/newsletter/October/10:29%20Newsletter/img/eye_on_design.png" width="570px">
           </td>
       </tr> 

    <!--Two Columns-->
                 <tr>
                    <td valign="top" width="260" class="leftColumnContent">
                        <table border="0" cellpadding="15" cellspacing="0" width="100%">
                            <tr>
                                <td valign="top">
                                    <img style="width: 260px;" src="http://homeplan.com/newsletter/October/10:29%20Newsletter/img/top_left.png" mc:label="image"/></a>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </td>

                    <td valign="top" width="260" class="rightColumnContent">

                        <table border="0" cellpadding="15" cellspacing="0" width="100%">
                            <tr>
                                <td valign="top">
                                    <img style="width: 260px;" src="http://homeplan.com/newsletter/October/10:29%20Newsletter/img/top_right.png" mc:label="image" mc:edit="tiwc300_image01" /></a>
                                </td>
                            </tr>

                        </table>  
                    </td>  
              </tr>  

    </table>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:26:47.173

您的第一个问题是您的主图像部分中有单个 td，它应该是`colspan="2"` 这样的。

```
 <!--Main Image-->

   <tr align="center" valign="center" width="580">
       <td align="center" valign="center" colspan="2">
           <img border="0" style="padding: 0;margin: 0;" src="http://homeplan.com/newsletter/October/10:29%20Newsletter/img/eye_on_design.png" width="570px">
       </td>
   </tr> 
```

其次，这不是问题，但是`width`在“px”中具有值的属性是错误的。

> 如果宽度作为一个属性出现，它应该不使用“px”，如果宽度作为css样式出现，那么它需要有一些测量单位，如“px”、“em”、“pt”

检查此**[演示](http://jsfiddle.net/5QEhK/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:38:50.230

试试这个代码

我已经删除了一些样式，但是您可以将其放回去，理想情况下，您应该只使用 colspan 来满足这种要求

```
<table width="600px" style="border: 1px solid #b8b7b7;margin-bottom: 10px;">
<!--Main Image-->

<tr>
   <td colspan="2" valign="center">
       <img border="0" style="padding: 0;margin: 0;" src="http://homeplan.com/newsletter/October/10:29%20Newsletter/img/eye_on_design.png">
   </td>
</tr>

<!--Two Columns-->
<tr>
  <td valign="top" width="50%" class="leftColumnContent"> 
    <img style="" src="http://homeplan.com/newsletter/October/10:29%20Newsletter/img/top_left.png" mc:label="image"/>
  </td>
  <td valign="top" width="50%" class="rightColumnContent">
      <img style="" src="http://homeplan.com/newsletter/October/10:29%20Newsletter/img/top_right.png" mc:label="image" mc:edit="tiwc300_image01" /></a>
  </td>  
</tr>              
</table> 
```

# css - 使所有图像棕褐色 svg 代码不起作用？

> ID：13183176
> 
> 赞同：2
> 
> 时间：2012-11-01T18:18:28.900
> 
> 标签：css, svg, svg-filters

所以，我想使所有图像都具有棕褐色效果，但是我在 SVG 中用于灰度的代码，当更改为棕褐色时不起作用......

这是灰度：`a img { filter: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/></filter></svg>#grayscale"); }`

这是不起作用的棕褐色：`img { filter: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id="sepia"><feColorMatrix type='matrix' values='0.393 0.769 0.189 0 0 0.349 0.686 0.168 0 0 0.272 0.534 0.131 0 0 0 0 0 1 0'/></filter></svg>#sepia"); }`

谁能告诉我棕褐色代码有什么问题？

既然我问的是有没有办法让图像既是棕褐色又是灰度的，并且可以像使用 web-kit 这样的不透明度来制作它`-webkit-filter: grayscale(1) sepia (0.2);`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:19:58.540

我猜 [id="sepia"] 中的双引号。此外，您对棕褐色的价值观似乎有点偏离。这是棕褐色的更好起点：

```
 "0.30 0.30 0.30 0 0
        0.25 0.25 0.25 0 0
        0.20 0.20 0.20 0 0
        0.00 0.00 0.00 1 0" 
```

在您的另一个问题上，您可以使用`<animate>`颜色矩阵值之间的动画，但 svg 动画在 IE（甚至 IE10）上不起作用，因此您必须编写一些有意义的脚本。（更新 - 您可以尝试 IE 的 FakeSMIL javascript 库 - 它可以处理大多数 SMIL。）

# algorithm - 如何以有效的方式解决魔方

> ID：13183182
> 
> 赞同：3
> 
> 时间：2012-11-01T18:18:40.030
> 
> 标签：algorithm, rubiks-cube

> **可能重复：**
> [以编程方式求解魔方](https://stackoverflow.com/questions/5563671/solving-rubiks-cube-programmatically)

我想创建一个应用程序来解决魔方。我读到计算机最多可以在 20 步内解决它。但是在互联网上搜索我找不到如何实现它。所以我想到了 Fridrich 方法（[http://en.wikipedia.org/wiki/Fridrich_Method](http://en.wikipedia.org/wiki/Fridrich_Method)）。但是很难把所有的算法都教给电脑。有什么建议么？ps对不起我的英语:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:29:17.343

The proof that any position can be solved in 20 moves required [35 CPU-years](http://www.cube20.org/) to compute.

It was, however, a constructive proof: for each position (modulo symmetry) it computed an actual solution of 20 moves or less (though not necessarily the optimal solution for that position).

The [source code](http://www.cube20.org/src/) they used to do this is available. It's written in C but using literate programming through CWeb, so it's fairly self-documenting.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:21:50.693

您可以使用[Korf 算法](http://en.wikipedia.org/wiki/Optimal_solutions_for_Rubik%27s_Cube#Korf.27s_Algorithm)

# html - HTML 编码的特殊字符是否需要以分号结尾？

> ID：13183185
> 
> 赞同：5
> 
> 时间：2012-11-01T18:18:51.733
> 
> 标签：html, character-encoding, html-email

[em-dash](https://en.wikipedia.org/wiki/Em-dash#Em_dash)的正确编码应该是`&#8212;`，但是当分号被省略时，它仍然在我的浏览器（chrome 和 firefox）中正确显示。

此外，我正在使用[Litmus.com](http://litmus.com/)跨多个电子邮件客户端测试字符编码。事实证明，在显示除 gmail（IE、chrome 和 firefox）之外的特殊字符时，几乎所有这些都忽略了所需的分号。

所以我的问题是：编码的 HTML 特殊字符是否需要以分号结尾？似乎 gmail 正在遵守规则，而其他人都忽略了所需的分号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T18:26:05.210

由于 4.01 版之前的 HTML 是基于 SGML 的，因此可以消除最终版本`;`，请参阅[w3centities](http://www.w3.org/TR/1999/REC-html401-19991224/charset.html#entities)。

> 笔记。在SGML中，可以去掉最后的“;” 在某些情况下，在字符引用之后（例如，在换行符处或紧接在标记之前）。在其他情况下，它可能不会被消除（例如，在单词中间）。我们强烈建议使用“;” 在所有情况下，以避免需要此字符存在的用户代理出现问题。

但是，[当前的 HTML5 工作草案](http://www.w3.org/TR/2012/WD-html5-20121025/syntax.html#character-references)指出字符引用需要以分号结束。为了使您当前的站点为 HTML5 做好准备，我建议您以分号结束引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T18:22:20.950

浏览器会尽力解释您的意图，并且有些宽容。最好遵守规则，以确保在任何地方都能正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:21:36.450

关于“可选”分号用例已经有过几次争论。我能给你的最好建议就是使用它。

如果该规则正在使用它会导致**所有**浏览器工作，而不使用它会导致**大多数**浏览器工作，请使用**ALL**。

另外，W3C 在这里声明（虽然我找不到完整的规范）：[http ://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.3](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T18:23:48.330

是的，它们最后必须有一个分号。然而，浏览器确实原谅了大部分时间并尝试解释它。这是一个可能失败的示例：

> this&that 将返回`this&ampthat` ——失败

尽管

> `this&amp;that`将返回`this&that` ——工作

# django - 管理页面中没有投票 [django 教程 2]

> ID：13183187
> 
> 赞同：1
> 
> 时间：2012-11-01T18:18:59.063
> 
> 标签：django, django-admin

当我关注[django 教程第 2 部分](https://docs.djangoproject.com/en/1.4/intro/tutorial02/)时，我被卡住了，因为管理页面中没有*Polls*条目。

*   我已经检查了这个问题的解决方案。他们说投票应用程序必须包含在`INSTALLED_APPS`. 它包括在内。
*   我也重新启动了服务器。
*   我确认我已经完成了教程中提到的所有事情 - 到目前为止一切正常。
*   polls 目录中的`admin.py`文件似乎被忽略了。

我完全不知道出了什么问题。

我在 ubuntu 12.04 LTS 上使用 django 1.4.2 运行 python 2.7.3。

**[已解决]** 这是一件非常奇怪的事情。当我用 gedit 查看我的`admin.py`文件时，我注意到关键字 like`from`和`import`不是灰色的，就像它们在其他`.py`文件中一样。因此，我将文件复制并粘贴`models.py`在同一文件夹中，重命名`admin.py`，删除旧文件并用原始文件替换代码。现在关键词被着色了。而且，是的，它工作得很好！所以这一定是我`admin.py`在 ubuntu 12.04 LTS 中创建该文件的方式。

这有点尴尬，但我花了一段时间才解决这个问题，因为这不是我所期望的编程问题，而是操作系统问题。

# javascript - Javascript 游戏、数组和对象字面量

> ID：13183192
> 
> 赞同：2
> 
> 时间：2012-11-01T18:19:33.947
> 
> 标签：javascript, arrays, windows-8, object-literal

我正在开发一款适用于 Windows 8 的 HTML5 和 JavaScript 游戏。我有一个将“roach”对象存储在数组中的游戏的工作版本。我正在尝试将我拥有的游戏代码放入 Microsoft 的示例中（[在此处链接](http://code.msdn.microsoft.com/windowsapps/JavaScript-and-HTML5-touch-d96f6031)）。在这个例子中，他们为游戏状态声明了一组对象字面量，这些字面量被保存并在各种类中使用：

```
internal: {
    gamePaused: false,
    gamePhase: "ready",
    speed: 5,
    score: 0,
} 
```

在那里，我想为我的 roach 对象放置数组。我以为我可以这样做：

```
roaches: [], 
```

但是当我打电话时：

```
this.state.roaches.push(new Roach());
this.state.roaches.length; 
```

我得到一个：

```
JavaScript runtime error: Unable to get property 'length' of undefined or null reference 
```

我做错了什么，我该如何解决？

纳特

附加信息：

好吧，这是我的蟑螂课：

```
var Roach = WinJS.Class.define( function () {
    this.position.x = Math.random() * gameCanvas.width + 1;
    this.position.y = Math.random() * gameCanvas.height + 1;
    this.squished = false;
    this.image = GameManager.assetManager.assets.roachImage;
},
{
    move: function (speed) {
        // changes position
    },
    squish: function() {

    }
}); 
```

这是在一个名为 game.js 的文件中，其中包含另一个类：

```
var Game = WinJS.Class.define(
    null,
{
// other functions
// Called when the game is being prepared to start
    ready: function () {
        // TODO: Replace with your own new game initialization logic
        if (this.isSnapped()) {
            this.state.gamePaused = true;
        } else {
            this.state.gamePaused = false;
        }
        this.state.gamePhase = "ready";
        switch (this.settings.skillLevel) {
            case 0:
                this.state.speed = 3;
                break;
            case 1:
                this.state.speed = 5;
                break;
            case 2:
                this.state.speed = 10;
                break;
        }
        this.state.roaches.push(new Roach());
        this.state.score = 0;
    },
// Main game render loop
    draw: function () {
        this.gameContext.clearRect(0, 0, gameCanvas.width, gameCanvas.height);

        // TODO: Sample game rendering to be replaced

        // Draw the current score
        this.gameContext.fillStyle = "#FFFF99";
        this.gameContext.font = "bold 48px Segoe UI";
        this.gameContext.textBaseline = "middle";
        this.gameContext.textAlign = "right";
        this.gameContext.fillText(this.state.score, gameCanvas.width - 5, 20);

        // update image positions
        // THROWS ERROR HERE
        for (var i = 0; i < this.state.roaches.length; i++) {
            if (!this.state.roaches[i].squished) {

            }
        }

        // Draw a ready or game over or paused indicator
        if (this.state.gamePhase === "ready") {
            this.gameContext.textAlign = "center";
            this.gameContext.fillText("READY", gameCanvas.width / 2, gameCanvas.height / 2);
        } else if (this.state.gamePhase === "ended") {
            this.gameContext.textAlign = "center";
            this.gameContext.fillText("GAME OVER", gameCanvas.width / 2, gameCanvas.height / 2);
        } else if (this.state.gamePaused) {
            this.gameContext.textAlign = "center";
            this.gameContext.fillText("PAUSED", gameCanvas.width / 2, gameCanvas.height / 2);
        }
    } 
```

现在在一个名为 gameState.js 的文件中定义了一个 gameState 类，其中包含我之前引用的变量。

```
var GameState = WinJS.Class.define(
    null,
{
    config: {
    // TODO: Adjust these values to configure the template itself
        frameRate: 20, // Set to 0 to have no update loop at all
        minSquished: 20,
        currentPage: "/html/homePage.html",
        gameName: "SDK Game Sample", // Used by share contract on scores page
    },

    // TODO: Replace these public settings exposed on the settings panel
    external: {
        playerName: "Player",
        soundVolume: 100,
        skillLevel: 0,
    },

    // TODO: Replace these values with state variables relevant for your game
    internal: {
        gamePaused: false,
        gamePhase: "ready",
        roaches: [],
        speed: 5,
        score: 0,
    }, 
```

这些文件在 GameManager 命名空间下组装，该命名空间从文件中调用每个类并在该命名空间下创建它们。因此，当用户开始游戏时，GameManager 会调用 ready 函数，然后调用 draw 函数来更新屏幕。希望这有助于澄清。

命名空间在这里定义：

```
 var game = new Game();
 var touchPanel = new TouchPanel();
 var state = new GameState();
 state.load();

WinJS.Namespace.define("GameManager", {
        navigateHome: navigateHome,
        navigateGame: navigateGame,
        navigateRules: navigateRules,
        navigateScores: navigateScores,
        navigateCredits: navigateCredits,
        showPreferences: showPreferences,
        onBeforeShow: onBeforeShow,
        onAfterHide: onAfterHide,
        game: game,
        state: state,
        assetManager: assetManager,
        scoreHelper: scoreHelper,
        gameId: gameId,
        touchPanel: touchPanel
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T21:49:39.193

我在写入对象文字然后读回数据并收到错误时遇到了类似的问题。显然，在两种情况下这是一个灰色区域：

1.  使用点符号添加键/值对
2.  对象字面量是异步访问的

在第一种情况下，规范不保证读取操作会起作用。在第二种情况下，您必须通过以下方式处理访问：

*   多个回调
*   处理多种数据类型的回调

你可以用一个简单的单行来测试它：

```
 var foo = {}; foo["bar"] = []; setTimeout(function(){foo.bar.push(new Date); console.log('Hi ' + foo.bar.length)}, 5000);
```

**参考**

*   [当涉及对象文字时，JavaScript 是否会提升 if 语句？](https://stackoverflow.com/questions/16246954/does-javascript-hoist-if-statements-when-object-literals-are-involved)
*   [如何将键/值对添加到 JavaScript 对象？](https://stackoverflow.com/questions/1168807/how-can-i-add-a-key-value-pair-to-a-javascript-object-literal)
*   [带有对象键的 Javascript setter 和 getter](https://stackoverflow.com/questions/18549775/javascript-setter-and-getter-with-key-for-object#Hi%202)

# ruby-on-rails - 设置表单时在两种布尔方法之间进行选择

> ID：13183193
> 
> 赞同：3
> 
> 时间：2012-11-01T18:19:42.347
> 
> 标签：ruby-on-rails

我一直在摸索几个小时，试图弄清楚如何正确地做到这一点。我正在构建一个表单，并希望用户在两个选项之间进行选择：`"Lemonade" OR "Pepsi"`.

我`"Lemonade"`的数据库中`"Pepsi"`有**两个布尔值**，并且正在寻找一种方法来使第二个复选框在第一个复选框时不可选中，或者有一个下拉菜单仅选择其中一个（其中`checked = true`）。
换句话说，当显示 a 时`"Drink list"`，我希望它说`Pepsi = true/Lemonade=false`，反之亦然。我尝试过使用验证，但似乎无法正常工作。有什么好主意吗？

希望这个问题是可以理解的。

仅供参考：RoR 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:47:14.700

我认为你应该在创建布尔列时使用默认值，它的默认值是`Lemonade`or `Pepsi`。然后在您的视图中，您将显示具有不同默认值的复选框，例如：

如果您的默认值为，您将在表单上`Lemonade`显示带有值的复选框。`Pepsi`因此，如果用户不选中，则用户选择的默认选项是`Lemonade`，如果用户选中`Pepsi`，那么您将保存该选项。您可以在复选框中添加类似这样的标签：“如果您不检查百事可乐，您的选择将是柠檬水”。在这种情况下，我认为这将是您的解决方案。

# windows - 在 Windows 上使用无效字符提交 Git

> ID：13183194
> 
> 赞同：5
> 
> 时间：2012-11-01T18:19:42.420
> 
> 标签：windows, git, version-control, repository, invalid-characters

我有一个 Git 存储库，我不小心在 4 次提交前推送了一个文件，该文件位于（相对于存储库根文件夹的路径）：/Core/C:/testoutput/agwqe1s.xml

我是在我的 Linux 机器上执行此操作的，因此创建的实际文件没有任何问题。问题是当我回到我的 Windows 机器时，我无法切换到包含此文件的分支，因为 Windows 只是拒绝创建这样的文件夹。好的，没问题，我在我的 Linux 端删除了文件并提交了它，但即使它也无法正常工作。Git 仍然试图在我的 Windows 机器上创建这个非法文件，我不知道该怎么做。

我知道我可以从头开始重新制作 repo，但是我丢失了整个提交日志历史记录，我想避免这种情况。我在这里有什么选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T18:38:09.070

您无需签出该分支即可对其进行更新。从有效的分支执行此操作：

```
git fetch
git push . origin/problembranch:problembranch
git checkout problembranch 
```

诀窍是推送到同一个存储库。这就是它的`.`用途。

# php - 如何在每行中用数字回显额外的列？

> ID：13183195
> 
> 赞同：1
> 
> 时间：2012-11-01T18:19:49.207
> 
> 标签：php, html

我已经使用 html、mysql 和 php 生成了表。我想生成一个额外的列，并在这个新列的每一行中插入一个数字。

```
echo "<table border='1'>
          <tr>
              <th>Rank</th>
              <th>owner ID</th>
              <th>Total</th>
          </tr>";

while($row = mysql_fetch_array($result))
{
    echo "<tr>";
    echo "<td>" . '1' . "</td>";
    echo "<td>" . $row['owner_id'] . "</td>";
    echo "<td>" . $row['total'] . "</td>";
    echo "</tr>";
}
echo "</table>"; 
```

现在 Rank 是我生成的额外列，1 在哪里，我目前可以在这个新列的所有行中看到它。如何让其他行成为 2、3、4 等？我试图插入一个新行并在“'1'”之后插入一个 2。但这只会使表格失去其结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:21:40.267

```
echo "<table border='1'>
<tr>
<th>Rank</th>
<th>owner ID</th>
<th>Total</th>
</tr>";
$i = 0;
while($row = mysql_fetch_array($result))
 {
$i++;
echo "<tr>";
echo "<td>" . $i . "</td>";
echo "<td>" . $row['owner_id'] . "</td>";
echo "<td>" . $row['total'] . "</td>";
  echo "</tr>";
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-23T14:05:04.237

```
while ($row = mysql_fetch_array($result)) {
    @$i++;
    echo "<tr>
            <td>" . $i . "</td>
        </tr>";
} 
```

它只是一种选择，但它与上面几乎相同。无需声明`$i`之前。只需在循环中使用它并`@`在前面使用它以防止出现错误消息。仅当您知道错误发生时的后果时才这样做。

# linux - 定位命令与查找命令有何不同？

> ID：13183196
> 
> 赞同：-1
> 
> 时间：2012-11-01T18:19:49.123
> 
> 标签：linux, shell, unix, scripting

我已经使用`find`和`locate`命令来搜索文件或目录的绝对路径，尽管在某些系统中我发现`locate`它不起作用。

有人可以解释他们的工作方式有何不同吗？

`updatedb`该命令在命令上下文中做了什么`locate`。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:24:41.857

`locate`首先构建文件系统的索引以执行索引搜索。

`find`才不是。它即时执行搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:21:41.270

[updatedb(8)](http://linux.die.net/man/8/updatedb)命令正在更新（或创建）一些关于文件系统上文件路径的缓存信息。[locate(1)](http://linux.die.net/man/1/locate)命令正在使用该缓存。

您应该学习使用和阅读手册页（就像我上面链接的那些）。安装`manpages`和`manpages-dev`包并输入`man man`开始。

# shell - Shell中N个值需要逗号分隔输出

> ID：13183197
> 
> 赞同：-1
> 
> 时间：2012-11-01T18:19:51.603
> 
> 标签：shell, unix, scripting, scripting-language

下面给出了一个具有 X 个输出的脚本：

```
#!/bin/bash

instant_client="/root/ora_client/instantclient_11_2"
output=`$instant_client/sqlplus -s HRUSER/HRUSER@TOMLWF <<EOF
set heading off
set feedback off
set lines 10000
set pagesize 10000
select count (1) from onboardingcandidates o, candidatedetails c where o.candidateid=c.candidateid and     o.JOININGSTATUS='0091' and to_date(o.joiningdate)=to_date(sysdate+5);

EOF

exit`

echo $output

Output:
cand1
cand2
cand3
cand62 
```

所需输出：

```
cand1, cand2, cand3, cand62 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:08:08.053

如果您不需要空格：

```
... | paste -d, -s - 
```

如果您需要空格：

```
... | paste -d, -s - | sed 's/,/, /g' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:08:36.237

使用 awk 并更改 ORS：

```
echo $output | awk -v ORS=", "  '{print $0}' 
```

# php - 首先匹配和替换 输出的段落内容？

> ID：13183199
> 
> 赞同：1
> 
> 时间：2012-11-01T18:19:54.200
> 
> 标签：php, regex, preg-replace

我有通过 Wordpress 输出的内容，它`<p>`在内容周围包裹了段落标签。我需要删除第一个`<p></p>`.. 中的内容。我该怎么做？

例如，输出为：

```
<p>Posted by Bob</p>
<p>This is the content here</p>
<p>This is the second paragraph</p> 
```

我想删除该行`<p>Posted by Bob</p>`并留下其余部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:41:43.703

通常，[您不应使用 regex 解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

在这种情况下，正则表达式解决方案可能工作正常：

```
$str = preg_replace('~<p>.*?</p>~s', '', $str, 1); 
```

重要的是

*   这`?`使得不`.*`贪婪（以便它尽快停止并且不会持续到最后`</p>`
*   修饰符`s`，以便`.`能够匹配换行符
*   限制`1`，以便仅删除第一个匹配项

如果您只想删除标记的内容（因此如果您想保留一个空段落），只需将`<p></p>`其用作替换字符串。

但是，正如我所说，这仍然不是一个完美的解决方案。想想`<p>`评论中的`<p>`标签，或者具有属性甚至无效 HTML 的标签。PHP 带有一个[DOM 解析器](http://www.php.net/manual/en/book.dom.php)。如果你可以使用 3rd-party 库，还有[这个](http://simplehtmldom.sourceforge.net)，它使用起来非常方便，并且使问题几乎变得微不足道：

```
require "simple_html_dom.php";

$html = new simple_html_dom($input);
$html->load($input);

$html->find('p', 0)->outertext = "";

$output = $html->save(); 
```

同样，如果您只想清空标签但保留它，请替换`outertext`为`innertext`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:40:44.807

如果您有权访问 jQuery，则可以使用以下内容：

```
$("p:first-child").text("Hello World!"); 
```

要在 WordPress 中包含 jQuery，请在您的`<head></head>`:

```
<?php wp_enqueue_script("jquery"); ?>
<?php wp_head(); ?> 
```

这以安全的方式包括 jQuery，并防止与其他 jQuery 实例或其他库发生任何冲突。

# mysql - MySQL 使用子查询连接以从连接表中仅选择一行

> ID：13183202
> 
> 赞同：0
> 
> 时间：2012-11-01T18:20:06.293
> 
> 标签：mysql, join, subquery

假设有两个表：

表零件：

```
Location PartNum Descrip  
-------- ------- --------
Whse1    abc     Frobbitz
Whse2    abc     Frobbitz
Whse3    def     Widget
Whse3    def     Widget 
```

表状态：

```
Location  PartNum Status
--------- ------- --------------
*Default* abc     Ready To Ship
*Default* def     Ready To Ship
Whse1     abc     Backordered 
```

在大多数情况下，应使用默认状态。

要获取状态，查询可能如下所示：

```
SELECT p.Location,p.PartNum,p.Descrip,s.Status FROM Parts p
LEFT JOIN Status s ON s.PartNum=p.PartNum AND
s.Location = (SELECT MAX(Location) FROM Status s1
WHERE s1.PartNum=p.PartNum AND s1.Location
IN('*Default*',p.Location)) 
```

问题是，这是最有效（或至少相当有效）的方式吗？我的实际应用程序将在一个查询中加入多达 7 个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:42:39.147

```
SELECT p.Location,p.PartNum,p.Descrip,s.Status FROM Parts p
LEFT outer JOIN Status s ON s.PartNum=p.PartNum 
where
s.Location = (SELECT MAX(Location) FROM Status s1
WHERE s1.PartNum=p.PartNum AND s1.Location
IN('*Default*',p.Location)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:34:25.313

我认为您可以使用`Limit`1`Order by`如下：

```
 SELECT p.Location,p.PartNum,p.Descrip,s.Status FROM Parts p
  LEFT JOIN Status s ON s.PartNum=p.PartNum AND
  s.Location = (SELECT Location FROM Status s1
        WHERE s1.PartNum=p.PartNum ORDER BY s1.Location ASC LIMIT 1); 
```

假设`*Default*`将按检索顺序排在首位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:45:33.663

看起来您正在尝试做的是使用后备默认值。您可以尝试两次加入表而不是使用子查询：

```
SELECT p.Location,p.PartNum,p.Descrip,s.Status 
FROM Parts p 
LEFT JOIN Status s1 ON s1.PartNum=p.PartNum AND p.Location = s1.Location 
LEFT JOIN Status s ON p.PartNum = s.PartNum 
   AND s.Location = IFNULL(s1.Location, '*Default*'); 
```

本质上，`s1`表示非默认信息。通过检查是否`s1.Location`存在`NULL`，我们可以判断这样的行是否存在，`*Default*`如果不存在则回退。

希望有帮助！

# sql-server-2008 - SSMS 中的 sqlcmd 模式 - 可以将 setvar 分配给替换变量吗？

> ID：13183203
> 
> 赞同：0
> 
> 时间：2012-11-01T18:20:06.767
> 
> 标签：sql-server-2008

我在启用 SQLCMD 模式的情况下从 SSMS 2008R2 运行它。

使用以下代码：

```
:SETVAR GREETING "HELLO"
:SETVAR SALUTATION $(GREETING)

SELECT '$(GREETING)'
SELECT '$(SALUTATION)' 
```

我在结果中看到以下内容：

```
HELLO
$(GREETING) 
```

我希望看到：

```
HELLO
HELLO 
```

有没有办法在分配另一个脚本变量时有一个脚本变量？如果是这样，语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T21:50:25.447

:SETVAR 中的变量替换不起作用，因为在这种情况下它只是一个标记替换。

您可以像这样模拟您期望的行为：

```
:SETVAR GREETING "HELLO"

DECLARE @salutation VARCHAR(5) = $(GREETING);
SELECT @salutation; 
```

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T23:54:02.323

如果需要，您也可以执行相反的操作：

```
DECLARE @firstVar VARCHAR(30) = 'theUltimateValue';

:setvar secondValue @firstVar

select $(secondValue) as whatIReallyWant 
```

退货

```
whatIReallyWant
------------------------------
theUltimateValue 
```

# objective-c - UIBarButtonItem在更换DetailViewController时消失，旋转后重新出现

> ID：13183214
> 
> 赞同：0
> 
> 时间：2012-11-01T18:20:44.813
> 
> 标签：objective-c, ios, delegates, uisplitviewcontroller

在阅读了与此相关的多个线程后，我只能得出结论，我一定是在错误的时间设置了我的委托，但我不知道在哪里分配委托来解决这个问题。

我在选择主表行时替换详细视图控制器，如下所示：

```
AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
CustomerDetailViewController *newvc = [[CustomerDetailViewController alloc] initWithNibName:@"CustomerDetailViewController" bundle:nil withCustomer:[custData objectForKey:@"name"]];            
[app.detailNavigationController setViewControllers:[NSArray arrayWithObjects:newvc, nil]]; 
```

这将设置视图控制器。在 CustomerDetailViewController 中，我像这样分配委托：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        AppDelegate *app = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        app.splitViewController.delegate = self;
    }
    return self;
} 
```

如果在纵向模式下选择表格行，会发生什么情况，我没有出现 barbuttonitem。但是，如果我旋转到横向然后再回到纵向，barbuttonitem 确实会出现。

我想在 initWithNibName 中设置我的代表可以解决这个问题，但显然不是。

谁能告诉我在哪里/何时分配代表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:23:48.127

我相信我已经找到了解决方案 - 它似乎是[这个](https://stackoverflow.com/questions/7871037/uisplitviewcontroller-not-calling-delegate-methods-while-pushing-new-detailview?rq=1)问题的重复。

# cocos2d-iphone - 是否可以将 CCSpriteBatchNode 与单个文件图像一起使用

> ID：13183217
> 
> 赞同：0
> 
> 时间：2012-11-01T18:21:01.577
> 
> 标签：cocos2d-iphone, kobold2d

是否可以将 CCSpriteBatchNode 与使用单个图像文件的动画一起使用。这是我正在创建的动画：

```
CCAnimation *begFlamesAnim = [CCAnimation animationWithFiles:@"begFlames_" frameCount:54 delay:0.03f]; 
```

这是可能的还是 CCSpriteBatchNode 只适用于 spriteSheets？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:22:33.213

CCSpriteBatchNode 和它包含的 CCSprite 子节点必须使用相同的纹理。如果您使用单个图像，则为每个图像创建单独的纹理。然后你不能 spritebatch，与包含所有这些图像的纹理图集相比，它会浪费内存。

# android - 在我的 Android Activity 中使用 BufferedImage 和 ImageIO 类

> ID：13183218
> 
> 赞同：15
> 
> 时间：2012-11-01T18:21:10.990
> 
> 标签：android, bufferedimage, javax.imageio

我正在开发一个可以对存储在手机中的图像进行 Gamma 校正的 Android 应用程序。我的活动可以获取图像位置，但我不能在我的应用程序中使用 `BufferedImage` 类和`ImageIO`类。

我在带有 ADT 插件的 Eclipse IDE 中收到以下错误。

```
 ImageIO cannot be Resolved

 BufferedImage cannot be Resolved 
```

我无法处理图像。我有一个包含 java 库的想法，但我不知道如何在 Android 中执行此操作

这是我需要让它工作的功能。

```
private static BufferedImage gammaCorrection(BufferedImage original, double gamma) {

    int alpha, red, green, blue;
    int newPixel;

    double gamma_new = 1 / gamma;
    int[] gamma_LUT = gamma_LUT(gamma_new);

    BufferedImage gamma_cor = new BufferedImage(original.getWidth(), original.getHeight(), original.getType());

    for(int i=0; i<original.getWidth(); i++) {
        for(int j=0; j<original.getHeight(); j++) {

            // Get pixels by R, G, B
            alpha = new Color(original.getRGB(i, j)).getAlpha();
            red = new Color(original.getRGB(i, j)).getRed();
            green = new Color(original.getRGB(i, j)).getGreen();
            blue = new Color(original.getRGB(i, j)).getBlue();

            red = gamma_LUT[red];
            green = gamma_LUT[green];
            blue = gamma_LUT[blue];

            // Return back to original format
            newPixel = colorToRGB(alpha, red, green, blue);

            // Write pixels into image
            gamma_cor.setRGB(i, j, newPixel);

        }

    }

    return gamma_cor;        

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:44:36.150

Android 不是标准的 java，它缺少某些类。AWT 不存在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:44:39.553

我认为一些Java库不像awt那样在Android中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:47:19.430

```
 String selectedImagePath;
     ImageView img;
     img = (ImageView)findViewById(R.id.ImageView1);
     Bitmap  yourSelectedImage = BitmapFactory.decodeFile(selectedImagePath);
     img.setImageBitmap(yourSelectedImage); 
```

如果有多个图像比您可以制作

```
 ArrayList<Bitmap> aList = new ArrayList<Bitmap> ();
        aList.add(yourbitmap); 
```

比使用 for 循环在上面设置的图像视图中设置。因为android没有提供BufferedImage类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-06T12:55:17.160

尝试使用 BitmapFactory 或 Bitmap

[http://developer.android.com/reference/android/graphics/BitmapFactory.html](http://developer.android.com/reference/android/graphics/BitmapFactory.html) [http://developer.android.com/reference/android/graphics/Bitmap.html](http://developer.android.com/reference/android/graphics/Bitmap.html)

# php - 将表单中的数据插入 SQL Server

> ID：13183219
> 
> 赞同：0
> 
> 时间：2012-11-01T18:21:10.233
> 
> 标签：php, sql

我有两个文件，csform.php 和 process.php。Csform.php 是用户将在数据中输入并点击提交的表单的主页，然后我有 process.php 和 sql 连接，我希望将用户输入表单的数据插入到 sql server数据库。但是当点击提交时，没有插入表单中输入的数据，而是插入了process.php文件第13行的数据。我做错了什么，似乎这两个文件之间没有联系。这是我目前拥有的编码：

csform.php：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>CSLog</title>
</head>
<h1> Customer Service Form </h1>
<form method="post" action="process.php"> 
<table width="300" border="0">
<tr>
<td> Forte ID:</td>
<td><select id="forteid" input name="forteid">                  
                <option value="user1">user1</option>
                <option value="user2">user2</option>
                <option value="user3">user3</option>
                <option value="user4">user4</option>                   
    </select></td>
 </tr>
 <tr>
 <td> Disposition</td>
 <td><select id="disposition" input name="disposition">                 
                <option value="Save">--Save--</option>
                <option value="Sale">--Sale--</option>
                <option value="LOC">--LOC--</option>                   
    </select> </td>
</tr>
</table>
<br />
<hr />        
<br /> 
<br /> 
<table width="400" border="0">
<tr>
<td>App Number:</td>
<td></td>
<td><input type="text" name="appnumber"></td>
</tr>
<tr>
<td>Finance Number:</td>
<td></td>
<td><input type="text" name = "Finance_Num"></td>
</tr>
<tr>
<td>Number Payments:</td>
<td></td>
<td><input type="text" name = "num_payments"></td>
</tr>
<tr>
<td>Ach or CC:</td>
<td></td>
<td><input type="text" name = "ach_cc"></td>
</tr>
<tr>
<td>Date:</td>
<td></td>
<td><input type="text" name = "date"></td>
</tr>
</table>
<br />
Notes: 
<br />
<textarea input name="text" id="notes" cols="45" rows="5"></textarea>
</fieldset>
<br />
<br /> 
<hr />
<br />
<br />            
<input type="submit" name="formSubmit" value="Submit">  <input type="Reset"        name="formReset" value="Reset"> 
</form> 
</head>
<body>
</body>
</html> 
```

然后是process.php：

```
<?php
$serverName = 'SRB-Nick_Desktop\SQLEXPRESS';
$connectionInfo = array('Database'=>'cslogs', 'UID'=>'cslogslogin', 'PWD'=>'123456');
$connection = sqlsrv_connect($serverName, $connectionInfo);

if( $connection === false )
{
 echo "Connection could not be established.\n";
 die( print_r( sqlsrv_errors(), true));
}

$tsql = "INSERT INTO logs(ForteID, disposition, appnumber, Finance_Num, num_payments,   ach_cc, date, notes) VALUES (?,?,?,?,?,?,?,?)";
$parameters = array( "forteid", "LOC", "NCXXXXXXX4", "SRB-000004", "0", "cc", "2012-11-01", "gave LOC instructions");
$stmt = sqlsrv_query($connection, $tsql, $parameters);
if( $stmt === false ){
echo "Statement could not be executed.\n";
 die( print_r( sqlsrv_errors(), true));
} else {
echo "Rows affected: ".sqlsrv_rows_affected( $stmt )."\n";
}
/* Free statement and connection resources. */
sqlsrv_free_stmt( $stmt);
sqlsrv_close( $connection);
?> 
```

希望有人能够帮助我或引导我在我做错的事情上朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:29:11.453

## csform.php

在`csform.php`, 的`<select>`不需要这个词`input`：

改变

```
<select id="forteid" input name="forteid"> 
```

到

```
<select id="forteid" name="forteid"> 
```

## 进程.php

在`process.php`中，您需要使用传递的变量 using `$_POST[variable_name]`。您`POST`正在`process.php`使用`$_POST`.

您可以`print_r($_POST);`在顶部使用`process.php`来查看正在传递的变量：

![](../Images/bba62d97bb56f3df0467ce0989698e02.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:39:39.607

要基于@njk 的答案，您还需要更改第 13 行以接受参数，以便您执行以下操作：

```
$parameters = array($_POST[forteid], $_POST[disposition], $_POST[appnumber], $_POST[Finance_Num], $_POST[num_payments], $_POST[ach_cc], $_POST[date], $_POST[notes]); 
```

# android - 为 Android 操作栏按钮动态更改文本

> ID：13183221
> 
> 赞同：9
> 
> 时间：2012-11-01T18:21:12.067
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个包含两个项目的操作栏（使用 actionbarsherlock）。其中之一是用户在我的应用程序中收集的点数。当点数发生变化时，我想更改此操作栏按钮。

我不知道如何设置该按钮的 TextView。我该怎么做才能通过代码进行设置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-22T17:46:14.073

ActionBar 项目来自选项菜单，当显示在栏上时呈现为按钮。如果您不提供图标，则将选项 MenuItem 的标题用作按钮的标题，

因此，除非您使用自定义视图，并且您只是使用菜单项标题作为分数指示器，否则您可以在`onPrepareOptionsMenu()`. 当您需要更新时，调用`invalidateOptionsMenu()`和 onPrepareOptionsMenu 将为您调用。

例如

```
//user scores some points
mUserScore += points;
invalidateOptionsMenu(); 
```

然后在回调中：

```
@Override
public void onPrepareOptionsMenu(Menu menu) {
    MenuItem score = menu.findItem(R.id.score_menu_item);
    score.setTitle(String.valueOf(mUserScore));
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-01T18:51:37.927

首先你没有设置“按钮的TextView”，因为按钮扩展了TextView，你设置了按钮本身的文本。您可以尝试在您的活动中通过以下方式执行此操作`onCreate()`：

```
//I suppose you create custom ActionBar like this
final View addView = getActivity().getLayoutInflater().inflate(R.layout.my_action_bar, null);
bar.setCustomView(addView);
button=(Button)addView.findViewById(R.id.button);
button.setText("Whatever"); 
```

如果您使用菜单项，那么您应该尝试这种方法：

```
getSupportMenuInflater().inflate(R.menu.activitymenu, menu);
MenuItem menuItem=menu.findItem(R.id.menuSearch); 
```

也试着看看[这里](https://stackoverflow.com/questions/9276039/user-defined-actionbar-action-view-getting-the-width-right)，[这里](https://stackoverflow.com/questions/11346177/how-to-get-actionbar-views-objects)和[这里](https://stackoverflow.com/questions/9279030/action-bar-get-view-element)。应该会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-28T20:39:34.227

这段代码对我有用

```
actionBar.setCustomView(R.layout.my_action_bar);
button=(Button)actionBar.getCustomView().findViewById(R.id.button);
button.setText("text"); 
```

# android - getWritableDatabase() 抛出空指针异常

> ID：13183234
> 
> 赞同：3
> 
> 时间：2012-11-01T18:21:59.237
> 
> 标签：android, sqlite

我有一个具有以下代码的服务类 -

```
public class ReminderService extends WakeReminderIntentService{      
    private static final String TAG ="ReminderService";
    private TasksDBAdapter dbHelper;
    public ReminderService(){
        super("ReminderService");
        dbHelper = new TasksDBAdapter(this);
        dbHelper.open(); //THIS LINE GIVES ERROR
    } 
```

TasksDBAdapter open() 方法的代码如下 -

```
 public TasksDBAdapter(Context ctx) {                                 
       this.mCtx = ctx;
   }

    public TasksDBAdapter open() throws android.database.SQLException {
           mDbHelper = new DatabaseHelper(mCtx);
           Log.i(TAG, "mDbHelper in open method-->" + mDbHelper);
           mDb = mDbHelper.getWritableDatabase(); // ACTUAL ERROR LINE
           return this;
       } 
```

日志值接收地址，这意味着 mDbHelper 被正确初始化。Log.i 给出 -

```
11-01 23:32:32.004: I/TasksDBAdapter(681): mDbHelper in open method-->ray.kaushik.simple.task.manager.TasksDBAdapter$DatabaseHelper@411e7a10 
```

但

```
mDb = mDbHelper.getWritableDatabase(); 
```

抛出空指针错误。

Logcat 给出 -

```
11-01 23:32:32.043: E/AndroidRuntime(681): FATAL EXCEPTION: main
11-01 23:32:32.043: E/AndroidRuntime(681): java.lang.RuntimeException: Unable to instantiate service ray.kaushik.simple.task.manager.ReminderService: java.lang.NullPointerException
11-01 23:32:32.043: E/AndroidRuntime(681):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2347)
11-01 23:32:32.043: E/AndroidRuntime(681):  at android.app.ActivityThread.access$1600(ActivityThread.java:130)
11-01 23:32:32.043: E/AndroidRuntime(681):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
11-01 23:32:32.043: E/AndroidRuntime(681):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-01 23:32:32.043: E/AndroidRuntime(681):  at android.os.Looper.loop(Looper.java:137)
11-01 23:32:32.043: E/AndroidRuntime(681):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-01 23:32:32.043: E/AndroidRuntime(681):  at java.lang.reflect.Method.invokeNative(Native Method)
11-01 23:32:32.043: E/AndroidRuntime(681):  at java.lang.reflect.Method.invoke(Method.java:511)
11-01 23:32:32.043: E/AndroidRuntime(681):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-01 23:32:32.043: E/AndroidRuntime(681):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-01 23:32:32.043: E/AndroidRuntime(681):  at dalvik.system.NativeStart.main(Native Method)
11-01 23:32:32.043: E/AndroidRuntime(681): Caused by: java.lang.NullPointerException
11-01 23:32:32.043: E/AndroidRuntime(681):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
11-01 23:32:32.043: E/AndroidRuntime(681):  at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
11-01 23:32:32.043: E/AndroidRuntime(681):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
11-01 23:32:32.043: E/AndroidRuntime(681):  at ray.kaushik.simple.task.manager.TasksDBAdapter.open(TasksDBAdapter.java:38)
11-01 23:32:32.043: E/AndroidRuntime(681):  at ray.kaushik.simple.task.manager.ReminderService.<init>(ReminderService.java:16)
11-01 23:32:32.043: E/AndroidRuntime(681):  at java.lang.Class.newInstanceImpl(Native Method)
11-01 23:32:32.043: E/AndroidRuntime(681):  at java.lang.Class.newInstance(Class.java:1319)
11-01 23:32:32.043: E/AndroidRuntime(681):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2344)
11-01 23:32:32.043: E/AndroidRuntime(681):  ... 10 more 
```

我的 databaseHelper 类代码 -

```
 private static class DatabaseHelper extends SQLiteOpenHelper {          
        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);      
        }
        @Override
        public void onCreate(SQLiteDatabase db) {                       
            db.execSQL(DATABASE_CREATE);                                
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {                                   

        }
    } 
```

其中 DATABASE_NAME 和所有其他人已在全球范围内定义 -

```
private static final String DATABASE_NAME = "data";              
    private static final String DATABASE_TABLE = "reminders";        
    private static final int DATABASE_VERSION = 1;                   

    public static final String KEY_TITLE = "title";                  
    public static final String KEY_BODY = "body";
    public static final String KEY_DATE_TIME = "reminder_date_time"; 
    public static final String KEY_ROWID = "_id";                    
    private static final String TAG = "TasksDBAdapter"; 
```

任何人都可以提供一些指示..提前谢谢..!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:17:42.767

我相信当您尝试在构造函数中创建数据库时， IntentService 尚未完全初始化。尝试将您的代码移动到`onHandleIntent()`：

```
protected void onHandleIntent(Intent intent) {
    dbHelper = new TasksDBAdapter(this);
    dbHelper.open();
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:25:05.633

我有点解决了这个问题-

我有类 ReminderService 我试图在其中调用 dbHelper.open(); 方法。

Also this same class have one overridden method doReminderWork(intent) , where I was going to use the dbHelper initialized.

Earlier code -

```
 public ReminderService(){
            super("ReminderService");
            dbHelper = new TasksDBAdapter(this);
            dbHelper.open(); //THIS LINE GIVES ERROR
        }

    @Override
        void doReminderWork(Intent intent){ 

    /**
              * retrieve data about task
              */

             Cursor reminder = dbHelper.fetchReminder(rowId);
   } 
```

in which i moved the open method in doReminderWork(Intent intent) method like -

```
public ReminderService(){
                super("ReminderService");
                dbHelper = new TasksDBAdapter(this);

            }

        @Override
            void doReminderWork(Intent intent){ 

        /**
                  * retrieve data about task
                  */
                dbHelper.open(); //MOVED HERE
                 Cursor reminder = dbHelper.fetchReminder(rowId);
       } 
```

and it worked.. Can anyone give me proper detailed explanation why this worked as it was just a try that worked.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T12:10:01.640

This kind of actions must be called from a separate thread, Try to call it with a Thread object or AsyncTask.

```
Thread t = new Thread(new Runnable() { 
    public void run() {
        dbHelper.open(); //MOVED HERE
        Cursor reminder = dbHelper.fetchReminder(rowId);
    }
});
t.start(); 
```

# ruby-on-rails - 耙任务未插入数据库

> ID：13183242
> 
> 赞同：1
> 
> 时间：2012-11-01T18:22:48.580
> 
> 标签：ruby-on-rails, sqlite, rake-task

我有一个 ruby​​ on rails 应用程序，我需要在其中运行一个 rake 任务，该任务将访问 twitterstream api 并将来自某个位置的推文插入数据库。为此，我创建了一个名为 uncat_tweets 的表。我的 rake 任务看起来像这样

```
task :get_uncat_tweets => :environment do
  TweetStream.configure do |c|
    ...
    ...
  end

  puts "#{UncatTweets.count}

  client = TweetStream::Client.new()
  client.locations(coordinates) do |status|
    puts "#{status.text}"
    t = UncatTweets.new()
    t.text = status.text
    t.long = ...
    t.lat = ...
    t.time = ....
    t.save!
  end 
```

我的 uncat_tweets 模型如下所示：

```
class UncatTweets < ActiveRecord::Base
  attr_accessible :lat, :long, :text, :time, :user
end 
```

当我运行 rake get_uncat_tweets 时，tweetstream 工作并喷出推文。但是 rake 任务并没有推送到数据库。线路`puts "#{UncatTweets.count}"`返回。我去了 Rails 控制台并尝试插入 UncatTweets 的虚拟值，它成功了！但是当我运行 rake 任务时，程序没有错误地继续执行，但永远不会推送到数据库中。这里发生了什么事？我无法找到解决此问题的方法。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:27:20.740

假设这是 Rails 3，您应该遵循 Rails 3 的方法来执行此操作。

`db/seeds.rb`首先，在 Rails 应用程序中打开。像这样设置它（基于您上面的 rake 任务）：

```
TweetStream.configure do |c|
  ...
  ...
end

puts "Number of tweets: #{UncatTweets.count}"

client = TweetStream::Client.new()

# Note you will have to define the following variable "coordinates" somewhere
client.locations(coordinates) do |status|
  UncatTweets.create(:text => status.text, :long => ..., :lat => ..., :time => ...)
end 
```

然后通过做运行它`rake db:seed`

# java - 在java中检查EOF和跳行

> ID：13183247
> 
> 赞同：0
> 
> 时间：2012-11-01T18:23:05.810
> 
> 标签：java, lines, eof, skip

我正在尝试从文本文件中读取并使用输入来创建多个不同的对象。我显然不想在文件为空后继续阅读，所以我有一个方法 isEmpty() 读取到文件中我想要的点，然后读取下一行并测试 null。

问题是，如果它不是空的，那么它会继续读取文件......但是从 NEXT 行开始。换句话说，我阅读了第一行进行测试，但随后无法再次阅读。

我目前的想法是创建一个虚拟对象来测试它并使用相同的第二个对象来实际使用。但这似乎有点浪费，我认为必须有更好的方法....谢谢大家！

注意：读取的方法与检查空的方法不同。在整个对象的方法中都使用了相同的 bufferedReader，否则我将需要要求用户再次输入文件名，而我不想这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:28:06.423

我认为您可能想要使用[**RandomAccessFile**](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html)，它具有支持跳过的功能并且能够向后移动。

您可能对使用以下方法感兴趣：

```
 void  seek(long pos) 
  int   skipBytes(int n) 
  String    readLine() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:30:02.590

你为什么不坚持`BufferedReader`成语？而不是询问文件是否为空，如果不为空则获取下一项，而是直接询问下一项，如果没有项则让该方法返回null。简单得多：

```
while ((line = reader.readLine()) != null) {
    ...
} 
```

否则，您可以使用`mark()`标记您当前的位置，提前阅读一些行，然后`reset()`返回您的标记。

# java - 从资源中枚举特定类型的所有文件

> ID：13183248
> 
> 赞同：1
> 
> 时间：2012-11-01T18:23:05.900
> 
> 标签：java, resources, java-web-start

我有一个 JAR 文件，它包含在我的 JNLP 文件的资源部分中。这包含子文件夹中的大量图像。

用户应该能够稍后替换此 JAR 文件以添加/删除图像。

有没有办法枚举资源中的所有文件，比如说 .GIF 作为文件扩展名，或者甚至更好地指定像“images/*.gif”这样的模式（所以我只得到以“images”作为父目录的图像）。

另一种选择是编写一个反映文件结构的文本文件。通过这种方式，您可以逐行、逐个图像地运行它，但这意味着您必须更新两个地方，这对用户来说不是很友好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:49:52.377

是的，您只需抓住 jar 并移至目录，然后枚举其中的文件：

```
public String[] getFiles() throws IOException {
   ArrayList<String> list = new ArrayList<String>();
   List<JarEntry> ents = new ArrayList<JarEntry>();
   Enumeration<JarEntry> e = null;

   URL jarp = getLocation();
   if (jarp != null) {
    jar = jarp.getProtocol().equalsIgnoreCase("jar") ? jarp : new URL("jar:" +                                                                                                                                                                                      jarp.toString() + "!/");
    JarFile jarf = null;
    try {
        jarf = AccessController.doPrivileged(
                new PrivilegedExceptionAction<JarFile>() {

                    @Override
                    public JarFile run() throws Exception {
                        JarURLConnection conn = (JarURLConnection) jar.openConnection();
                        conn.setUseCaches(false);
                        return conn.getJarFile();
                    }
                });
    } catch (PrivilegedActionException ex) {
        Logger.getLogger(LicenseLoader.class.getName()).log(Level.SEVERE, null, ex);
    }
    e = jarf.entries();
    while (e.hasMoreElements()) {
        JarEntry je = e.nextElement();
        if (!je.isDirectory()) {
            ents.add(je);
        }
    }
    for (JarEntry ent : ents) {
        if ((ent.getName().startsWith(pathName)) && (ent.getName().endsWith(".gif"))) {
            String name = ent.getName().replace(pathName, "");
            list.add(name);
        }
    }
 }
 return list.toArray(new String[list.size()]);
} 
```

# objective-c - 默认 UITableview 给出错误或单元格返回 null

> ID：13183252
> 
> 赞同：4
> 
> 时间：2012-11-01T18:23:43.870
> 
> 标签：objective-c, ios, uitableview

我正在设计一个自定义原型单元格，其中包含许多标签、文本字段和按钮。

我在情节提要上创建了一个带有原型单元的 tableview 控制器。我添加了一个objective-c tableviewcontroller 类。并将它们连接起来。Xcode 添加的默认代码本身会产生错误。

在.h

```
@interface CreaatePlistTableViewController : UITableViewController<UITableViewDelegate, UITableViewDataSource> 
```

英寸

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

        // Configure the cell...

        return cell;
    } 
```

错误：

```
** Assertion failure in -[UITableView dequeueReusableCellWithIdentifier:forIndexPath:], /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'unable to dequeue a cell with identifier Cell - must register a nib or a class for the identifier or connect a prototype cell in a storyboard' 
```

我已将代码更改为它可以编译但返回一个空单元格。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    // NOTE: Add some code like this to create a new cell if there are none to reuse
    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }
    // Configure the cell...
    UILabel *labelMeetingDate = (UILabel *)[cell viewWithTag:11];
    labelMeetingDate.text = @"Meeting Date";

    return cell;
} 
```

部分和行设置为 1 btw。

如何将标签和文本字段添加到原型单元格，或者为什么它会给出错误或返回 null？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T18:27:01.687

您需要`cellIdentifier`在`storyboard`. 第四个标签结束。在`Table View Cell`部分属性下列出`Identifier`

# c - 与 __m256 和两个 __m128 的数组联合

> ID：13183258
> 
> 赞同：5
> 
> 时间：2012-11-01T18:24:03.610
> 
> 标签：c, performance, sse, vectorization, avx

我能有这样的工会吗

```
 union eight_floats_t
  {
    __m256 a;
    __m128 b[2];
  };
  eight_floats_t eight_floats; 
```

即时访问 256 位寄存器的两个 128 位部分？

编辑：我想了解这种方法对性能的影响。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T18:42:51.350

你当然可以这样做。C 和 C++ 语言允许您这样做。它很可能会做你想做的事。

但是，您使用 AVX 的事实意味着您关心性能。因此，了解这是 SSE 程序员陷入的最常见（性能）陷阱之一可能会很有用。（很多人没有注意到）

**问题1：**

当前的编译器使用内存位置实现这样的联合。所以这是第一个问题，每次您从不同的字段访问联合时，它都会将数据强制到内存并读回。这是一个减速。

以下是 MSVC2010 生成的内容（经过优化）：

```
eight_floats a;
a.a = vecA[0];

__m128 fvecA = a.b[0];
__m128 fvecB = a.b[1];
fvecA = _mm_add_ps(fvecA,fvecB); 
```

```
vmovaps YMMWORD PTR a$[rbp], ymm0
movaps  xmm1, XMMWORD PTR a$[rbp+16]
addps   xmm1, XMMWORD PTR a$[rbp]
movaps  XMMWORD PTR fvecA$[rbp], xmm1
movss   xmm1, DWORD PTR fvecA$[rbp] 
```

您可以看到它正在被刷新到内存中。

**问题2：**

第二次放缓甚至更糟。当您将某些内容写入内存并立即以不同的字长访问它时，您可能会触发存储到加载的停顿。（通常大约 > 10 个周期）

这是因为当前处理器上的加载存储队列通常不是为处理这种（不寻常的）情况而设计的。所以他们通过简单地将队列刷新到内存来处理它。

* * *

访问 AVX 数据类型的下半部分和上半部分的“正确”方法是使用：

*   `_mm256_extractf128_ps()`
*   `_mm256_insertf128_ps()`
*   `_mm256_castps256_ps128()`

和家人。对于其他数据类型也是如此。

也就是说，编译器可能足够聪明，可以识别您在做什么并使用这些指令。（至少 MSVC2010 没有。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:26:19.287

是的你可以。你试过了吗？

请注意，C 标准规定访问不是最近写入的联合成员是未指定的行为 - 具体而言，如果您写入一个成员然后读取另一个成员，则另一个未指定值（C99 §6.2.6.1/7）。但是，它是一个非常常见的习惯用法，并且得到所有主要编译器的良好支持。实际上，以任何顺序对工会的任何成员进行读写都是可以接受的做法（[来源](http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html)）。

# php - 如何使用另外 2 个字段扩展快速编辑选项

> ID：13183259
> 
> 赞同：0
> 
> 时间：2012-11-01T18:24:02.453
> 
> 标签：php, wordpress, tags

我想知道 WordPress 是否让我能够在 Tags 中添加 2 个字段（输入和文本`Quick Edits`区域**）**。

实际上，我想添加的这两个字段在**编辑**`Quick Edit`标签页面中可用，但我想在其中显示这两个字段，以便能够轻松访问它们。**`Quick Edit`**

 ****代码：**

```
// Add a dummy column for the `posts` post type    
add_filter('manage_edit-post_tag_columns', 'add_dummy_column', 10, 2);
function add_dummy_column($columns)
{
    $columns['headline'] = 'Headline';
    $columns['intro-text'] = 'Intro Text';
    return $columns;
}

// But remove it again on the edit screen (other screens to?)
add_filter('manage_edit-post_tag_columns', 'remove_dummy_column');
function remove_dummy_column($columns)
{
    unset($columns['description']);
    return $columns;
}

function my_column_value($empty = '', $custom_column, $term_id)  
{  
    include_once('taxonomy-metadata.php');
    return esc_html(get_term_meta($term_id, $custom_column, true));  
}  
add_filter('manage_post_tag_custom_column', 'my_column_value', 10, 3); 

function my_quick_edit_custom_box($column_name, $screen, $name)  
{  
    if($name != 'post_tag' && ($column_name != 'headline' || $column_name != 'intro-text')) return false; 

    if($name == 'post_tag' && $column_name == 'headline' ) {
?>  
    <fieldset>  
        <div id="my-custom-content" class="inline-edit-col">  
            <label>  
                <span class="title"><?php if($column_name == 'headline') _e('Headline', 'ie_tag_plugin'); else _e('Intro text', 'ie_tag_plugin'); ?></span>  
                <span class="input-text-wrap"><input name="<?php echo $column_name; ?>" class="ptitle" value="" type="text"></span>  
            </label>            
        </div>  
    </fieldset>  
<?php 
    }

    if($name == 'post_tag' && $column_name == 'intro-text' ) {
?>  
    <fieldset>  
        <div id="my-custom-content" class="inline-edit-col">  
            <label>  
                <span class="title"><?php if($column_name == 'headline') _e('Headline', 'ie_tag_plugin'); else _e('Intro text', 'ie_tag_plugin'); ?></span>  
                <span class="input-text-wrap"><textarea name="<?php echo $column_name; ?>" class="ptitle"><?php $data = esc_html( $data ); ?></textarea></span>  
            </label>            
        </div>  
    </fieldset>  
<?php 
    }   
}  
add_action('quick_edit_custom_box', 'my_quick_edit_custom_box', 10, 3);

function my_save_term_meta($term_id)  
{  
    $allowed_html = array(  
        'b' => array(),  
        'em' => array (),  
        'i' => array (),  
        'strike' => array(),  
        'strong' => array(),  
    );  
    if(isset($_POST['headline']))  
        update_term_meta($term_id, 'headline', wp_kses($_POST['headline'], $allowed_html));  
    if(isset($_POST['intro-text']))  
        update_term_meta($term_id, 'intro-text', wp_kses($_POST['intro-text'], $allowed_html));  
} 

add_action('edited_post_tag', 'my_save_term_meta', 10, 1); 
```

我试图这样做，但这些代码没有保存数据，而且在完成这一切之后似乎一团糟。

![在此处输入图像描述](../Images/1ad41cf079dd55ffafc8598c27d3a9c0.png)

有什么办法可以完成这个任务，然后请告诉我。我将不胜感激。

谢谢你们。**

# javascript - $(document).ready(function(){ ... }) 内部的自调用函数；

> ID：13183260
> 
> 赞同：2
> 
> 时间：2012-11-01T18:24:17.003
> 
> 标签：javascript, jquery

我已经将我的 javascript 封装在

```
jQuery(document).ready(function($) {

}); 
```

我想知道通过以下两种方式在其中调用函数的含义是什么：

```
jQuery(document).ready(function($) {
    $(function () {
        // do something
    });
}); 
```

对比

```
jQuery(document).ready(function($) {
    (function () {
        // do something
    })();
}); 
```

编辑：

我还想知道两者中哪一个是更“正确”的做事方式？随意添加您自己的实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:29:08.103

不同之处在于执行顺序：

```
jQuery(document).ready(function($) {
    $(function () {
        // inner handler
    });
    // outer handler
}); 
```

内部`ready`处理程序中的代码在外部处理程序中的代码之后执行：http: [//jsfiddle.net/nmD8b/](http://jsfiddle.net/nmD8b/)。

```
jQuery(document).ready(function($) {
    (function () {
        // do something
    })();
    // outer handler
}); 
```

立即函数表达式中的代码在定义函数的地方执行，即在表达式后面的代码之前执行：http: [//jsfiddle.net/nmD8b/](http://jsfiddle.net/nmD8b/)。

* * *

如果要限定变量的范围，请使用第二种方式。第一种方法没有多大意义，您应该只`ready`在实际需要时注册事件处理程序。在这种情况下，DOM 已经就绪，因为您将处理程序绑定到另一个就绪处理程序中。

如果您不想定义变量的范围，请不要使用它们。只需将所有代码放在外部处理程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:27:10.747

```
jQuery(document).ready(function($) { 
```

&&

```
$(function () { 
```

是一样的吗

除了第二个仅适用于 jQuery 1.0+ （我认为，如果错了，有人纠正）

> 此外

the`$`是`jQuery`命名空间的简写符号。因此`jQuery(`与 相同`$(`。然后你可以写`$(document)`which 与 相同`jQuery(document)`，其中 the`$`是命名空间的简写，`()`feed 给定的参数，在这种情况下，`document`在 javascript 中是相同的。

`$(function`是 jQuery 的 doc.ready 调用函数，正常的返回就是通常所说的`jQuery Object`. 其中 index 0 是通过的元素，其他一切要么是原生 js 在该元素上返回，要么是 jquery 道具和方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:32:12.750

正如大家所说：

```
jQuery(document).ready(function ($) { });

// is the document.ready as:

jQuery(function ($) { }); // <-- this is the short-hand version

// the $ inside the parenthesis really just means that $ is to refer to jQuery inside.
// you could just do:

$(function () { }); // if you know it will be anyway 
```

使用即时函数更适用于在常规 Javascript 中创建“类”/“命名空间”等。

```
(function (myNamespace) {

    function myNamespace () { }
    return myNamespace;

}(window.myNamespace = window.myNamespace || {})); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T18:33:09.590

*   在文档准备好后的任何时候使用`$(function () {});`都是非常安全的，指定的函数会立即触发。[报价](http://api.jquery.com/ready/)：

> 如果在 DOM 初始化后调用 .ready() ，传入的新处理程序将立即执行。

注意：正如 Felix 所指出的，jQuery 似乎可以防止嵌套调用`.ready()`.

*   `(function () {})()`无论是在文档就绪事件内部还是外部，使用都按预期工作。它 (i) 创建一个闭包 (ii) 立即触发 (iii) 不关心文档是否准备好。

第一个是多余的，所以 IMO 第二个更好。

实际上，如果您不需要闭包，则将函数设为内联；`$(function () {});`自己作为一个闭包。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T18:26:33.267

鉴于这`$(function() {})`是 的别名`$.ready`，您的第一个示例只是`$.ready`包裹在 a`$.ready`中，这实际上没有任何意义，即使我认为它不会对性能产生任何严重影响。

您的第二个示例是人们通常在其 JavaScript 文件的最外层执行的操作，以防止[污染全局变量范围](https://stackoverflow.com/a/2613647/124257)：

```
;(function($) {
    $(document).ready(function() {
        // Do something
    });
})(jQuery); 
```

这是迄今为止我在大多数 JavaScript 文件中看到的内容。它可以防止全局变量范围污染，并确保即使在模式下也`$`实际引用。`jQuery``noConflict`

* * *

需要注意的重要一点是，如果您在结束标记之前加载 JavaScript（这样做也会[缩短页面加载时间](http://developer.yahoo.com/performance/rules.html#js_bottom)）`$.ready`，那么您实际上并不需要它。`</body>`

# matlab - 在已定义的向量中使用符号表达式定义匿名函数

> ID：13183262
> 
> 赞同：0
> 
> 时间：2012-11-01T18:24:21.683
> 
> 标签：matlab

所以这就是我遇到的问题。

您使用符号引擎求解表达式，但它由一些 z 参数化。现在你想为这个表达式创建一个带有变量 z 的函数。

这是代码：

```
syms a1 a2 a4 b1 b2 b4 c1 c2 c4

[a1, a2, a4, b1, b2, b4, c1, c2, c4] = ...
    solve('a1 + a4 = 1', ...
    'a1*a4 - a2^2 = 0', ...
    'b1 + b4 = 7', ...
    'b1*b4 - b2^2 = 10', ...
    'c1*c4 - c2^2 = 55/4', ...
    'c1 + c4 = 8', ...
    'c1 = a1 + b1', ...
    'c2 = a2 + b2', ...
    'c4 = a4 + b4'); 
```

现在我可以做类似的事情

```
a1 = @(z) 13/18 - (- (35*z^2)/81 + (280*z)/81 - 1925/324)^(1/2)/2 - z/18; 
```

将 a1 定义为已定义的向量 a1 的第一个条目...

但我想改为

```
a1 = @(z) a1(1) 
```

然后能够键入 a1(2) 或 a1(4) 将 z 的值插入该表达式。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:30:57.437

Ah, just browsing around stack exchange for related questions and the tweaked some code to find a solution:

```
f = @(t) subs(a1(1), 'z', t). 
```

# python - Django get_profile() 方法不适用于扩展用户模型

> ID：13183264
> 
> 赞同：6
> 
> 时间：2012-11-01T18:24:30.097
> 
> 标签：python, django, django-models

`user_profile`我在一个名为这样的应用程序中有一个模型：

```
from django.db import models
from django.contrib.auth.models import User

class UserProfile(models.Model):
    user = models.OneToOneField(User)

    def __unicode__(self):
        return self.user.username 
```

在我的设置中：

```
AUTH_PROFILE_MODULE = 'user_profile.UserProfile' 
```

但如果我尝试：

```
u = UserProfile.objects.get(pk=1)
p = u.get_profile() 
```

我收到以下错误：

```
AttributeError: 'UserProfile' object has no attribute 'get_profile' 
```

我在这里想念什么？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-10-22T14:54:31.307

对于通过遵循旧文档获得此错误的任何其他人，`get_profile()`已在 django 1.7 中折旧。

相反，您可以从用户那里访问用户配置文件，如下所示..

```
u_p = user.userprofile 
```

你的班级`userprofile`的名字在哪里`UserProfile`

[您还可以通过单击右下角的所需版本来更改以使用较新的文档]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T18:27:56.570

呃，您正在尝试获取 UserProfile 的用户配置文件。我希望您的意思是获得一个用户，然后调用`get_profile()`它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T23:57:34.263

我正在使用 Django 1.8 并`.userprofile`引发错误。

为了解决这个问题，因为我在 Django 1.3 中设置了配置文件，升级到 1.8 后，我刚刚更改`.get_profile()`为`profile`它，它可以工作。

# python - Python - 在输出之前删除空格

> ID：13183266
> 
> 赞同：0
> 
> 时间：2012-11-01T18:24:33.657
> 
> 标签：python, whitespace

我对Python相当陌生。我想知道如何删除输出之前的空格。

```
height = input("Please enter the tree height : ")
height1 = height
trunk = height/3
spacevar = str(" ")
for i in range(0,height):
    print spacevar*(height)+"*"*(((i+1)*2)-1)
    height = height-1
for p in range (0,trunk):
    print spacevar*height1+"*" 
```

输出是

```
Please enter the tree height : 5
     *
    ***
   *****
  *******
=*********
     * 
```

标有 = 的文本槽是我需要删除的“空白”。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:32:48.673

假设您将每一行存储在一个字符串中，您可以使用 strip 方法。

示例用法：

```
a = "  ****  "
a.strip()   //Will Produce a string of "****"
a.lstrip()  //Will Produce a string of "****  "
a.rstrip()  //Will Produce a string of "  ****" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:25:36.177

我希望我明白你的意思：

```
height = input("Please enter the tree height : ")
height1 = height
trunk = height/3
spacevar = str(" ")

for i in range(0,height):
    print spacevar*(height-1)+"*"*(((i+1)*2)-1)
    height = height-1
for p in range (0,trunk):
    print spacevar*(height1-1)+"*" 
```

我只是将 (height) 和 height1 操作数替换为 -1。似乎在示例中为我做了诀窍。如果这不是你的意思，请告诉我。

# python - 如何将 pandas 时间序列重新采样/对齐到最近的日历季度？

> ID：13183271
> 
> 赞同：2
> 
> 时间：2012-11-01T18:24:52.993
> 
> 标签：python, time-series, pandas, resampling

简单的设置

```
import pandas
from datetime import datetime

v = [100, 200]
i = [datetime(2012, 1, 31), datetime(2012, 4, 30)]
s = pandas.Series(data=v, index=i) 
```

这是原始的时间序列：

```
In [11]: s
Out[11]: 
2012-01-31    100
2012-04-30    200 
```

重采样后：

```
In [12]: s.resample('Q')
Out[12]: 
2012-03-31    100
2012-06-30    200
Freq: Q-DEC 
```

所以一月/四月与三月/六月对齐。

为什么熊猫不选择 12 月/3 月呢？

另外，有什么方法可以让它与时间序列函数对齐到 12 月/3 月（这似乎更接近原始日期）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:44:30.430

我知道没有简单的解决方案可以与最接近的版本保持一致，我发现当前版本非常合乎逻辑。但是`label='left'`你可以用当前数据实现你想要的，但它仍然不能与最接近的数据对齐，所以总的来说你可能需要找出其他的东西（比如使用 apply 来更改日期，以便它们符合你的意愿）。

```
s.resample('Q',label='left')    

Out[57]:
2011-12-31    100
2012-03-31    200
Freq: Q-DEC 
```

# c++ - 在 portaudio 中阻塞 I/O

> ID：13183279
> 
> 赞同：1
> 
> 时间：2012-11-01T18:25:22.760
> 
> 标签：c++, fft, portaudio

在业余时间搞砸了一点之后，`portaudio`我尝试在麦克风打开时传输频率，为此我编写了一个回调 - 回调*仅*打开 一个*输出流*，然后我使用 portaudio 的记录回调。如果示例格式因为输出被定义`paFloat32`为什么都听不到，但是如果我将其定义`paUInt8`为通道数 1，所以我听到了声音（如 beep() 声音）但音高检测（使用 FFT）与我传输的频率不同. 所以我的问题是因为 FFT 实施错误（或者 - 是否可以使用 paUint8 并且仍然得到正确答案）或者我应该尝试使用阻塞 I/O？

一些代码（也许会有所帮助）：

这是输出流的输出参数（输入流来自记录示例）。

```
 outputParameters.device = Pa_GetDefaultOutputDevice(); 
    outputParameters.channelCount = 1;      
    outputParameters.sampleFormat = paUInt8; 
    outputParameters.suggestedLatency = Pa_GetDeviceInfo( outputParameters.device )->defaultLowOutputLatency;
    outputParameters.hostApiSpecificStreamInfo = NULL; 
```

**PS**`paUInt8` ：尽管我使用了 2 个回调（1 个用于读取，1 个用于写入） ，但任何关于为什么可以传输的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T16:08:11.547

没有更多代码是不可能知道问题出在哪里的，但我可以说几件事：

*   切换到阻止对解决您遇到的问题没有任何影响。

*   如果你在做 paFloat32 时没有听到任何声音，你可能做错了什么，因为对 paFloat32 的支持非常好。浮点类型的范围在 -1 和 1 之间。确保这是您输出的内容。您还可以尝试 PortAudio 中包含的一些出色的代码示例。使用回调查找使用 paFloat32 输出的一个，看看它是否有效（比如[这个](https://subversion.assembla.com/svn/portaudio/portaudio/trunk/examples/paex_sine.c)）。

*   如果您在 FFT 检测中得到错误的音高，那么您可能也做错了。有两种可能：1.音高不是你想象的那样，2.你的FFT音高检测错误。没有代码，我只能猜测，但由于每个人都遇到了＃2 的问题（从 SO 上的问题来看），我猜你至少在这方面遇到了麻烦。

对于 FFT 音高检测，请查看我的带有代码的博客条目（它甚至使用了 portaudio）

[http://blog.bjornroche.com/2012/07/frequency-detection-using-fft-aka-pitch.html](http://blog.bjornroche.com/2012/07/frequency-detection-using-fft-aka-pitch.html)

为了创建正确的音高，这里有很多关于 SO 的问题。

# ruby-on-rails - Ruby on rails：无法安装 FFI 1.1.5 并且捆绑程序无法继续

> ID：13183282
> 
> 赞同：0
> 
> 时间：2012-11-01T18:25:35.520
> 
> 标签：ruby-on-rails, linux, x86-64

我正在关注[rails教程上的教程](http://ruby.railstutorial.org/chapters/static-pages#top)，并且在第三章（静态页面）上。当我尝试`bundle install`立即执行清单 3.1 下的操作时，该命令会抛出一条错误消息，指示链接失败。错误片段如下所示：

```
Using bundler (1.2.1)
Using nokogiri (1.5.5)
Installing ffi (1.1.5) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

/usr/bin/ruby18 extconf.rb  
checking for ffi_call() in -lffi... yes checking for ffi_prep_closure()... yes 
checking for ffi_raw_call()... yes 
checking for ffi_prep_raw_closure()... yes 
checking for rb_thread_blocking_region()... no 
checking for ruby_native_thread_p()... no 
checking for rb_thread_call_with_gvl()... no creating extconf.h 
creating Makefile
... 
... 
... 
x86_64-pc-linux-gnu-gcc -I. -I. -I/usr/lib64/ruby/1.8/x86_64-linux -I. -DRUBY_EXTCONF_H=\"extconf.h\"    -fPIC -O2 -pipe -fno-strict-aliasing  -fPIC  -I/usr/lib64/libffi-3.0.10/include    -c LastError.c x86_64-pc-linux-gnu-gcc -shared -o ffi_c.so FunctionInfo.o MemoryPointer.o MethodHandle.o Platform.o Function.o LongDouble.o StructLayout.o StructByValue.o Struct.o Variadic.o ClosurePool.o Type.o Types.o ArrayType.o DynamicLibrary.o Thread.o Call.o Buffer.o StructByReference.o AbstractMemory.o ffi.o MappedType.o Pointer.o DataConverter.o LastError.o -L. -L/usr/lib64 -Wl,-R/usr/lib64 -L.-Wl,-O1 -Wl,--as-needed -rdynamic -Wl,-export-dynamic -Wl,--no-undefined     -Wl,-R -Wl,/usr/lib64 -L/usr/lib64 -lruby18 -lffi  -lffi   -lrt -ldl -lcrypt -lm   -lc 
Thread.o: In function `rbffi_thread_blocking_region': 
Thread.c:(.text+0xd0): undefined reference to `pthread_create' 
Thread.c:(.text+0x106): undefined reference to `pthread_join' 
Thread.o: In function `cleanup_blocking_thread': Thread.c:(.text+0x239): undefined reference to `pthread_kill'
Thread.o: In function `rbffi_blocking_thread': Thread.c:(.text+0x271): undefined reference to `pthread_testcancel' collect2: ld returned 1 exit status make: *** [ffi_c.so] Error 1

Gem files will remain installed in /home/user/.gem/gems/ffi-1.1.5 for inspection. 
Results logged to /home/user/.gem/gems/ffi-1.1.5/ext/ffi_c/gem_make.out 
An error occurred while installing ffi (1.1.5), and Bundler cannot continue. 
Make sure that `gem install ffi -v '1.1.5'` succeeds before bundling. 
```

据我所知，这很容易通过为 pthread (-lpthread) 添加正确的库来解决。但我的问题是，我在哪里添加这个？我在 MAC OS X 上看到了很多解决这个问题的问题，但对于 linux 却没有。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:11:06.823

将“dev-lang/ruby 线程”添加到我的 package.use 并重建 dev-lang/ruby

# c# - C# Excel Addin 像公式一样使用

> ID：13183284
> 
> 赞同：2
> 
> 时间：2012-11-01T18:25:39.717
> 
> 标签：c#, excel, add-on, excel-addins

好的，所以我正在开发一个 Excel 插件，它分析单元格中的文本然后转换它。

我希望它像 Excel 中的绝对值一样工作，当您可以输入单元格时`=abs(YOURNUMBER)`，它会用您的数字的绝对值替换单元格的文本。

我如何设置 excel 插件以添加一个自定义选项，该选项将以这样的方式接受字符串，除了使用之外`=molem(YOURSTRING)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T16:47:45.767

听起来您想使用 C# 制作 Excel 用户定义函数 (UDF)。最好的方法是使用免费的[Excel-DNA](http://exceldna.codeplex.com)库（我开发的）。这将允许这样的代码：

```
[ExcelFunction(Description="My clever function")]
public static string molem(string input)
{
    return "You passed " + input;
} 
```

在您的工作表中用作`=molem("Some String")`.

# javascript - Photoshop CS5 无法识别 activeDocument

> ID：13183285
> 
> 赞同：2
> 
> 时间：2012-11-01T18:25:52.813
> 
> 标签：javascript, photoshop, flash-cs5, photoshop-script

我在我的 64 位 Vista 机器上为 Photoshop CS5.1 编写了一个相当大的脚本。现在，当我在新的 64 位 Windows 7 机器上运行相同的脚本时，Adobe ExtendScript Tool 在这个简单的脚本中抱怨`activeDocument`（没有这样的元素）：

```
#target photoshop
var pDoc = app.activeDocument;
alert("Done!"); 
```

我`#target`在 ExtendedScript Tool 中尝试过和不尝试过并选择目标。有什么我错过的，还是我需要安装更多的东西。我只安装了 64 位版本的 Photoshop。32位Photoshop是否有脚本扩展？

如果我只想使用 64 位版本，我不明白为什么需要同时安装 32 位和 64 位版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:38:56.307

SOLVED
谜团解开了。如果您更仔细地解释错误消息，那就太简单了。当然，如果 Photoshop 中没有文档，我就无法获得 activeDocument，呵呵！？！我将其解释为声明 activeDocument 未被识别，但当然，如果我没有文档，则没有这样的元素（如 Photoshop 文档）可以给我。我习惯了 C++，如果获取文档有问题，我希望 reuslt 为 NULL 值或类似值...借口，借口；）

好吧，如果其他人遇到同样的问题，这是我自费的答案：D 我现在将卸载 32 位版本...

# c - 客户端/IP 和设备监视器

> ID：13183286
> 
> 赞同：0
> 
> 时间：2012-11-01T18:25:54.687
> 
> 标签：c, linux, sockets, device

假设我想要一个可以接受套接字连接并且还可以监视插入服务器的设备的服务器。

服务器可以做两件事。

**1\. 通过 TCP/IP 接受/监视客户端连接（从它们接收和发送）；**

**2.监控设备（从设备接收和发送）；**

从数字 1 开始，我计划使用 linux 套接字来接受客户端连接。

从 2 号开始，我计划使用 libudev.h 库来监控设备。其中有关于signal11的教程..

我已经编写了 linux 套接字和 libudev.h.. 但它们是单独的用户空间应用程序。我需要将它们合并为一个.. 我应该怎么做？

或者有什么建议我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:44:28.013

所以你需要多路复用你的 I/O？

如果这就是您要问的全部，那么您有多种选择。传统的 UNIX 方法是使用 select 或 poll。- [http://www.linux-mag.com/id/331/](http://www.linux-mag.com/id/331/)

或者，您可以为每个需要在其上完成 I/O 的连接生成线程。这自然是最简单的选择，但在维护两个线程之间的数据完整性方面充满风险，锁定和竞争条件使得可靠的实现比轮询更棘手（我认为）。

当然，您仍然可以将它们保留为单独的进程，然后使用 IPC 的某种方法（共享内存、消息队列等）到第三个进程来统一两者的功能。这可能比线程选项重一点，但两个进程之间的分离更好，使其更具弹性，但代价是（可能）更多的工作。

你能再澄清一下你的问题吗？

# windows-8 - WinRT 演讲

> ID：13183289
> 
> 赞同：3
> 
> 时间：2012-11-01T18:26:04.037
> 
> 标签：windows-8, windows-runtime, speech, text-to-speech

1.  语音 api 在 WinRT 中是否可用（如 Windows Phone 8）。
2.  我可以改用一些第三方语音 api 吗？

我想在我的 Windows 8/WinRT 应用程序中实现 TTS，有人有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-24T00:38:48.807

[语音现在可用于 WinRT](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/dn630426.aspx)

语音命令和语音识别仅在手机上可用。

TTS 适用于所有 winRT 设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:16:40.707

WinRT 中没有可用的语音 API。

可能有第 3 方 WinRT 组件，您必须寻找这些组件。我不知道，但我只是粗略地搜索了一下。

如果作为应用程序要求连接到互联网不是问题，您可以使用[http://translatorservice.codeplex.com/](http://translatorservice.codeplex.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-25T19:11:40.200

适用于 Windows 8.1的[Bing 语音控件](http://visualstudiogallery.msdn.microsoft.com/521cf616-a9a8-4d99-b5d9-92b539d9df82)具有与 Windows Phone 上的语音识别 API 几乎相同的 API 集。围绕它们创建一个可以在通用应用程序中工作的抽象并不难。不幸的是，Windows 8 的语音控制确实需要互联网连接才能进行语音识别。

仅对于文本到语音（不是识别），这些 API 被直接添加到 Windows 8.1。它们位于[Windows.Media.SpeechSynthesis](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.media.speechsynthesis.aspx)命名空间中。

# jquery - 使用 jquery 在点击时在 iFrame 内滚动

> ID：13183294
> 
> 赞同：4
> 
> 时间：2012-11-01T18:26:10.267
> 
> 标签：jquery, iframe, scroll, click, anchor

我有一个工作申请表被使用 iFrame 拉入另一个页面。如果用户点击提交并且页面上有错误，则会出现一个覆盖框（很像灯箱），向用户提供验证错误消息。它有一个“确定”按钮，然后关闭窗口。

我希望单击按钮将用户带回页面顶部，因为 iFrame 的高度约为 1000px。同样，这一切都发生在 iFrame 中。iFrame 中的弹出窗口会将您带到 iFrame 顶部的锚点。这里没有跨域的疯狂。

我更喜欢用 jquery 来做这件事，因为我已经有一个与按钮关联的点击功能，但如果我绝对必须使用老式的 Javascript DOM 方法，我会解决的。

我试过scrollTo，动画，将锚附加到iFrame的src，但没有任何效果。我也没有收到任何错误来指导我。任何帮助将不胜感激！

**更新**

```
if(errors > 0) {
    var header = "It appears there was a problem!";
    var message = "There are <b><u>"+errors+"</u></b> errors with your application.<br/><br/>";
        message += "<b>Please re-attach your resume once you have corrected the errors.</b>";

    jQuery("#infoMessage .infoText").html("<h2>"+header+"</h2><p>"+message+"</p>");
    jQuery("#infoMessage button").button();

    jQuery("button.okButton").click(function() {
        jQuery("#infoMessage").fadeOut();
        jQuery(".light_overlay").fadeOut();
        return false;

        //alert('testing');
        // Do not use .scrollTop() as it is deprecated.
        jQuery('body').prop('scrollTop', 0);
        // Additionaly, animate it.
        jQuery('body').animate({ scrollTop: 0 });

    });

    jQuery("#infoMessage").fadeIn('slow');
    jQuery(".light_overlay").fadeIn();

} 
```

这是我被建议添加的最后一段代码，但它不起作用（注释掉警报后的 4 行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:05:35.500

`<iframe>`您可以用 a包装`<div>`并使用绝对位置，并将其顶部和左侧设置为 0。这将允许您将其移动到`iframe`您想要的位置，并允许您以编程方式设置滚动位置。

这是一个例子：http: [//jsfiddle.net/BDC9Q/35/](http://jsfiddle.net/BDC9Q/35/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:48:12.670

假设您使用的是 jQuery，仍然需要记住一些事情，但比传统的 JavaScript 少得多。

1.  滚动时使用“正文”而不是文档。
2.  使用 prop() 设置 scrollTop
3.  如果您正在处理锚点上的点击事件，请始终调用 event.preventDefault()。

示例代码：

```
// Do not use .scrollTop() as it is deprecated.
$('body').prop('scrollTop', 0);

// Additionaly, animate it.
$('body').animate({ scrollTop: 0 }); 
```

# ruby-on-rails - 嵌套模型表单未知属性错误

> ID：13183306
> 
> 赞同：1
> 
> 时间：2012-11-01T18:27:07.430
> 
> 标签：ruby-on-rails

我有一个模型`Subject`和一个嵌套模型`Lessons`

我遇到了未知属性的问题：`subject_id`

我已经尝试了[Rails 3 Nested Models unknown attribute Error](https://stackoverflow.com/questions/6838297/rails-3-nested-models-unknown-attribute-error)中建议的不同解决方案，但我仍然收到错误。

我对 Rails 很陌生，我似乎无法弄清楚出了什么问题。如果有人可以帮助我，我将不胜感激。

这是我的相关文件。

主题模型

```
 attr_accessible :subjectCode, :subject_id

  has_many :lessons, :dependent => :destroy
  accepts_nested_attributes_for :lessons, :reject_if => lambda { |a| a[:content].blank?     }, :allow_destroy => true

end 
```

课程模型

```
 attr_accessible :lessonName
  belongs_to :subject 
```

主题控制器

```
def show
  @subject = Subject.find(params[:id])
end

def new
  @subject = Subject.new
  @lesson = @subject.lessons.build
end

def create
  @subject = Subject.new(params[:subjectCode])
  if @subject.save
    redirect_to @subject, :notice => "Successfully created subject."
  else
    render :action => 'new'
  end
end 
```

主题形式

```
<%= form_for @subject do |f| %>
<%= f.error_messages %>
<p>
  <%= f.label :subjectCode %><br />
  <%= f.text_field :subjectCode %>
</p>
<%= f.fields_for :lessons, @lesson do |builder| %>
<p>    
<%= builder.label :lessonName %> <br/>
<%= builder.text_area :lessonName, :rows=>3 %>
</p>
<% end %>
<p><%= f.submit "Submit" %></p> 
```

路线.rb

```
resources :subjects do resources :lessons end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:35:03.770

`subject_id`应该放在Lesson模型中，因为它属于，`Subject`你也应该把它放在accessible中，也放在`lessons_attributes`Subject`attr_accessible`模型中。我认为在您的创建操作中构建主题的代码应该是：

`@subject = Subject.new(params[:subject])`， 不是

`@subject = Subject.new(params[:subjectCode])`

试试这个，看看会发生什么。

# winforms - 如何确定方法在运行时是否异步

> ID：13183313
> 
> 赞同：6
> 
> 时间：2012-11-01T18:27:49.897
> 
> 标签：winforms, delegates, async-await

我有一个遗留项目，它有数百个 Winforms 事件的方法签名。显然，目前我不想去做 BeginInvoke/EndInvoke，因为这会导致 UI 跨线程问题。

但是我需要（因为死锁）能够将这些签名标记为异步来处理我们必须能够执行的一些异步命令。除了死锁之外，没有其他方法会导致任何结果。

我可以使用 BeginInvoke 成功调用该事件，它可以正常工作并且异步正常等。但是，这会将它分解到另一个线程并破坏我们不想经历的旧实现并使异步和 Invoke 感知。

因此，我正在调查使用 event.GetInvokationList() 并分别循环和调用每个。如果方法是异步的，则开始/结束调用。否则直接在 UI 线程上调用它。

我唯一的问题是我无法通过反射找到任何方法来判断方法签名是否是异步的。

任何人都知道如何从 MethodInfo 或 GetInvokationList() 值中判断一个方法是否是异步的？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-13T11:02:05.590

如果您使用的是 .net 4.5，请尝试“AsyncStateMachineAttribute”。 [http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.asyncstatemachineattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.asyncstatemachineattribute.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-12T08:11:56.647

MVarman 的答案适用于 OP，但存在潜在风险，因为`AsyncStateMachineAttribute`可以手动添加。为了使检查更加健壮，请验证状态机是否是编译器生成的。

```
public static bool IsAsync(this MethodInfo m)
{
    var stateMachineAttr = m.GetCustomAttribute<AsyncStateMachineAttribute>();
    if (stateMachineAttr != null)
    {
        var stateMachineType = stateMachineAttr.StateMachineType;
        if (stateMachineType != null)
        {
            return stateMachineType.GetCustomAttribute<CompilerGeneratedAttribute>() != null;
        }
    }
    return false;
} 
```

对于 .NET 核心应用程序，请使用

```
public static bool IsAsync(this MethodInfo m)
{
    return m?
        .GetCustomAttribute<AsyncStateMachineAttribute>()?
        .StateMachineType?
        .GetTypeInfo()
        .GetCustomAttribute<CompilerGeneratedAttribute>()
        != null;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T23:02:21.853

您无法检测到它，也不应该检测到它。标有 async 的方法实际上与任何其他同步方法没有什么不同。您应该定期调用它们。

此外，Begin/EndInvoke 应该解决对其他线程的封送调用问题。如果您需要特定的知识，即您不知道该方法是否应该在此线程上运行，您应该在这些方法上使用您自己的特殊属性而不是 async 关键字，因为它们基本上不会混合在一起。

# wpf - 在 Expander WPF 上调整大小的问题

> ID：13183315
> 
> 赞同：2
> 
> 时间：2012-11-01T18:27:59.813
> 
> 标签：wpf, mvvm, resize, expander

大家好，我在解决方案上使用带有 mvvm 的 WPF，但我遇到了一个问题。我有我在 viewModel 上使用的这个对象：

```
public class SuperCharacter : INotifyPropertyChanged
{
    public List<Character> Characters { get; set; }
    public string Name { get; set; }
    private Character charactersExp;
    private const string currentCharacterExpandedString = "CurrentCharacterExp";
    public Character CurrentCharacterExpanded
    {
        get { return this.charactersExp; }
        set
        {
            this.charactersExp = value;
            this.OnPropertyChanged(currentCharacterExpandedString);
        }
    }

    public string CalcSize { get; set; }

    public void OnPropertyChanged(string propertyName)
    {

        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

我有这样的看法：

```
 Window.Resources>

    <DataTemplate x:Key="TrackPointUserSavedSearchDtoTemplate" DataType="{x:Type src:Character}">
        <StackPanel >
            <TextBlock x:Name="caption" Margin="1" 
        Text="{Binding First}" MaxWidth="{Binding ElementName=image, Path=ActualWidth}" MaxHeight="40" />
        </StackPanel>
    </DataTemplate>

    <DataTemplate x:Key="DynamicUserSaveSearchesTemplate" DataType="{x:Type src:Character}">
        <ContentPresenter x:Name="content" ContentTemplate="{StaticResource TrackPointUserSavedSearchDtoTemplate    }"/>
    </DataTemplate>

    <DataTemplate x:Key="IconoTrackPointUSTemplate" DataType="{x:Type src:SuperCharacter}">
        <ScrollViewer Grid.Row="2" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
            <Expander Height="180" Margin="12,0,0,-127" >

                <Expander.Header>
                    <Binding Path="Name"></Binding>
                </Expander.Header>                   

                    <ListView Name="ProblemListView" HorizontalContentAlignment="Stretch"  ItemsSource="{Binding Characters}" SelectedItem="{Binding CurrentCharacterExpanded}"  ItemTemplate="{StaticResource DynamicUserSaveSearchesTemplate}" Panel.ZIndex="20">
                    </ListView>                       
            </Expander>
        </ScrollViewer>
    </DataTemplate>

    <DataTemplate x:Key="DynamicTrackPointUSTemplate" DataType="{x:Type src:SuperCharacter}" >
        <ContentPresenter x:Name="content" ContentTemplate="{StaticResource IconoTrackPointUSTemplate    }"/>
    </DataTemplate>
</Window.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="42"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>           
    </Grid.RowDefinitions>
    <Label Content="Entitty's TrackPoint list:" Margin="12,5,76,9" Name="labelName" />
    <ListView Grid.Row="1" ItemsSource="{Binding SuperCharacters}" SelectedItem="{Binding CurrentSuperCharacterExpanded}" ItemTemplate="{StaticResource DynamicTrackPointUSTemplate}">
    </ListView>
<Grid/> 
```

问题是当我展开扩展器时，Listview 调用 ProblemListView 中的元素位于下一个扩展器下方。

我想知道如何使这个扩展列表看起来正确？如果我展开扩展器，problemListView 会正确显示。

请记住，列表是动态的，可以有不同数量的元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:41:12.110

首先，我认为设置`Grid.Row="2"`in `ScrollViewer`your`DataTemplate`没有多大意义。其次，`margin`您的`Expander`正在造成麻烦，我不太明白您为什么要设置底部边距（-127）。

您需要`Height`为您的 指定 a `ScrollViewer`，否则网格行将随着`ListView`增长而扩展。

尝试对 `IconoTrackPointUSTemplate 进行以下更改：

```
<DataTemplate x:Key="IconoTrackPointUSTemplate" DataType="{x:Type WpfApplication1:SuperCharacter}">
    <ScrollViewer Height="50" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
        <Expander Margin="12,0,0,0" Header="{Binding Name}">
            <ListView Name="ProblemListView" 
                        HorizontalContentAlignment="Stretch" 
                        ItemsSource="{Binding Characters}" 
                        SelectedItem="{Binding CurrentCharacterExpanded}" 
                        ItemTemplate="{StaticResource DynamicUserSaveSearchesTemplate}" 
                        Panel.ZIndex="20" />
        </Expander>
    </ScrollViewer>
</DataTemplate> 
```

作为提示，请注意我如何更改扩展器标头的绑定，您可以在执行内联时节省相当多的空间：

```
Header="{Binding Name}" 
```

# java - 降序输出中的三角形

> ID：13183319
> 
> 赞同：-2
> 
> 时间：2012-11-01T18:28:11.480
> 
> 标签：java, loops

为什么输出在3之后进入新行？像这样：

> 9
> 
> 8 7
> 
> 6 5 4
> 
> 3
> 
> 2 1

我输入的任何数字总是在 3 之后输入一个新行。当我输入 9 时，我的目标输出应该是这样的：

> 9
> 
> 8 7
> 
> 6 5 4
> 
> 3 2 1 0

请您向我解释一下为什么它在 3 之后进入新行？

```
public class TriangleWithInput {

/**
 * @param args
 */
@SuppressWarnings("resource")
public static void main(String[] args) {
    // TODO Auto-generated method stub

    Scanner sc = new Scanner(System.in);

    System.out.print("Enter a number: ");
    int input = sc.nextInt();

    while (input >= 0) {
        int c = 1;
        while ( c <= input) {
            int r = 1;
            while (r <= c) {
                System.out.print(input + " ");
                input--;
                r++;
            }
            System.out.println();
            c++;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T18:32:37.450

你似乎有一个太多的嵌套循环。因为测试，你得到了一条新线路`c <= input`；当`input`达到 3 和时`c >= 3`，您进行换行并重置`c`为 1。

我会这样写你的循环：

```
for (int r = 1; input >= 0; ++r) {
    for (int c = 1; c <= r && input >= 0; ++c, --input) {
        System.out.print(input + " ");
    }
    System.out.println();
} 
```

# sql - 在 Oracle 11g 中过滤掉报告中的重复条目

> ID：13183322
> 
> 赞同：1
> 
> 时间：2012-11-01T18:28:26.993
> 
> 标签：sql, oracle, plsql, oracle-apex

我们在 Windows Server 2008 R2 上运行 Oracle 11g

我目前有一个在全国范围内用于管理我们的招聘系统的应用程序，我们是一家合同工程人员配备公司。

现在，我们有一个相当大的候选人数据库，其中包含我们以前合作过的候选人，我使用 Oracle Text 使附加的简历可搜索，效果很好，唯一的问题是我们经常按顺序将同一个候选人发送到多个职位为了让他们更快地工作，这意味着我可能会在搜索结果中看到同一个候选人的简历出现 6 或 7 次，我希望它根据候选人的姓名和招聘人员姓名过滤掉重复项，因为我不想要只过滤掉候选人姓名，因为有些人有相同的名字，但通常 1 名招聘人员与 1 名候选人一起工作，我知道这并不完美，但可以帮助缩小范围。

我已经尝试了一些方法来删除欺骗，但我无法让它工作，这是我们用来生成搜索结果的当前查询。

```
select score(1) relevance,
"PKEY",
"DATE_SUB",
"CLIENT",
"CANDIDATE",
"RECRUITER",
"SALES",
dbms_lob.getlength("RESUME") "RESUME",
+"MIMETYPE",
"FILENAME",
"POSITION",
"AVAILABILITY",
"RATE",
"ISSUES",
"WHEN_INT",
"FEEDBACK",
"NOTES"
from "SUBMITTALS"
where CONTAINS (resume, :P11_SEARCH, 1) > 0 order by 1 desc 
```

有任何想法吗？

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:32:31.933

您可以使用分析函数来删除重复项：

```
select * from (
  select score(1) relevance,
  "PKEY",
  "DATE_SUB",
  "CLIENT",
  "CANDIDATE",
  "RECRUITER",
  "SALES",
  dbms_lob.getlength("RESUME") "RESUME",
  "MIMETYPE",
  "FILENAME",
  "POSITION",
  "AVAILABILITY",
  "RATE",
  "ISSUES",
  "WHEN_INT",
  "FEEDBACK",
  "NOTES",
  row_number() over (partition by CANDIDATE, RECRUITER order by PKEY) rn
  from "SUBMITTALS"
  where CONTAINS (resume, :P11_SEARCH, 1) > 0 
 )
 where rn = 1
 order by 1 desc 
```

这将为每个候选人/招聘人员对返回一行。

# jquery - HTML5 Video - 使用 jQuery 加载和卸载视频标签

> ID：13183323
> 
> 赞同：4
> 
> 时间：2012-11-01T18:28:29.000
> 
> 标签：jquery, html, video, html5-video

我正在开发一个带有大滑块的网站，该滑块使用 100% 的宽度和高度幻灯片。我在几张幻灯片中使用了一些视频作为背景。虽然我尝试了很多插件，但有些插件与 jScrollPane 的工作不规律，所以我最终使用了“simpleVideo jQuery 插件”（[https://github.com/markupboy/simpleVideo](https://github.com/markupboy/simpleVideo)）。

该插件使用视频标签来播放所有内容。我在每个页面中都包含一个视频标签，如下所示：

```
 <div class="rsImg page" id="page1">

                <video poster="video/poster.png" id="video-intro">
                    <source src="video/trailer_480p.ogg" type="video/ogg">
                    <source src="video/video.mp4" type="video/mp4">
                </video>

            </div>
            <!-- END OF PAGE 1--> 
```

视频播放和行为正确，很好。

但是随着我添加更多幻灯片，我开始担心整个体验中的内存使用和缓慢。

我有一个监听“SlideChange”事件的函数，所以一旦幻灯片发生变化，销毁视频就不是什么大问题了，如下所示：

```
 poshSlider.ev.on('rsAfterSlideChange', function() {
if(poshSlider.currSlideId+1!=1)
{
  $('#video-intro').trigger('stop');
  $('video').empty().remove();
} else {
  $('#page1').append('<video poster="video/poster.png" id="video-intro"><source src="video/video.mp4" type="video/ogg"><source src="video/video.mp4" type="video/mp4"></video>');
  $('#video-intro').simpleVideo();
  $('#video-intro').trigger('play');
}
}); 
```

所以我尝试清空和删除整个 div、视频标签等。然后，为了重新初始化视频，我想在同一个地方附加相同的代码，但它没有按预期工作，我不知道这是否是处理内存泄漏的好方法。

考虑到我的方法，加载和卸载视频的方法是什么？

**编辑：**

我使用的是“追加”而不是“html”。我的代码现在是这样工作的，我只需要处理内存增加和某种垃圾收集。有什么建议吗？

```
 poshSlider.ev.on('rsAfterSlideChange', function() {
if(poshSlider.currSlideId+1!=1)
{
  $('#video-intro').trigger('stop');
  $('video').empty().remove();
} else {
  $('#page1').html('<video poster="video/poster.png" id="video-intro"><source src="video/trailer_480p.ogg" type="video/ogg"><source src="video/video.mp4" type="video/mp4"></video>');
  $('#video-intro').simpleVideo();
  $('#video-intro').trigger('play');
}
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-04T02:48:50.803

将视频重置为空白而不将其删除

```
$("#video-intro").first().attr('src','') 
```

它停止了视频，我相信它可以节省内存

# c++ - 使用 std::stringstream 读取/写入无符号字节

> ID：13183326
> 
> 赞同：2
> 
> 时间：2012-11-01T18:28:56.300
> 
> 标签：c++, stringstream, binaryreader, binarywriter

我正在尝试将无符号字符写入字符串流。

我需要写的信息涉及0x00。我需要将值 0 到 40 写为实际数值，而不是 ASCII 字符。

编辑：澄清一下，我写的不仅仅是0-40的值。它必须是二进制的。进来的这些东西需要保持原样，而不是一旦写入流就变成字符......

以下是我正在做的事情的概要。

```
TCHAR _buffer[2];    // This is part of the problem, I figure, since its a char
_buffer[0] = 0x00;
_buffer[1] = 0x01;

tstringstream s;

s.write(_buffer, sizeof(_buffer)); 
```

最终发生的是 0x00 导致字符串流结束，而 0x01 似乎永远不会到达那里。

我正在以类似的方式阅读：

```
stream.readsome(_buffer, sizeof(_buffer)); 
```

它似乎不想玩得很好，因为 0x00 被写入并导致整个事情刚刚结束。

就是这样，还是我错过了什么？我尝试过使用 ios_base::binary，也尝试过使用 uint8_t 而不是 TCHAR，但这似乎会造成一团糟。我担心这可能是需要的路线，但我想在我去做之前确定。

长话短说，我正在尝试找到与 C# 的 BinaryReader/Writer 等效的 C++。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:26:16.613

以下是在 VS2012 上编译的：

```
#include <iostream>
#include <sstream>
#include <string>

int main()
{
    wchar_t buf[] = { 0x0, 0x1, 'a', 'b', 'c' };

    std::wstring s(buf);

    std::wstringstream ss;

    ss.write(buf, 5);

    const std::wstring& chars = ss.str();

    for (std::wstring::const_iterator it = chars.begin(); it != chars.end(); ++it)
        std::cout << std::hex << *it << '\n'; 
```

}

给

0 1 61 62 63 按任意键继续。. .

我认为这是你想要的。

# c - 在保留 CAP_SYS_NICE 的同时删除根 UID

> ID：13183327
> 
> 赞同：10
> 
> 时间：2012-11-01T18:28:58.250
> 
> 标签：c, linux, pthreads, scheduler, linux-capabilities

我正在尝试编写一个守护进程，它将使用 setuid 位以 root 身份启动，但随后很快恢复为运行该进程的用户。然而，守护进程需要保留将新线程设置为“实时”优先级的能力。我用来设置优先级的代码如下（创建后在线程中运行）：

```
struct sched_param sched_param;
memset(&sched_param, 0, sizeof(sched_param));
sched_param.sched_priority = 90;

if(-1 == sched_setscheduler(0, SCHED_FIFO, &sched_param)) {
  // If we get here, we have an error, for example "Operation not permitted"
} 
```

但是，我遇到问题的部分是设置 uid，同时保留对`sched_setscheduler`.

我有一些代码在我的应用程序的主线程中接近启动时运行：

```
if (getgid() != getegid() || getuid() != geteuid()) {
  cap_value_t cap_values[] = {CAP_SYS_NICE};
  cap_t caps;
  caps = cap_get_proc();
  cap_set_flag(caps, CAP_PERMITTED, 1, cap_values, CAP_SET);
  cap_set_proc(caps);
  prctl(PR_SET_KEEPCAPS, 1, 0, 0, 0);
  cap_free(caps);
  setegid(getgid());
  seteuid(getuid());
} 
```

问题是，在运行此代码后，我在调用时得到“不允许操作”，`sched_setscheduler`正如上面评论中提到的那样。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-01T21:51:16.753

编辑以描述原始失败的原因：

Linux 中有三组能力：可继承、允许和有效。Inheritable 定义了哪些功能在`exec()`. 允许定义进程允许哪些能力。有效定义了当前有效的功能。

将进程的所有者或组从 root 更改为非 root 时，始终清除有效的能力集。

默认情况下，允许的能力集也被清除，但`prctl(PR_SET_KEEPCAPS, 1L)`在身份更改之前调用会告诉内核保持允许的集不变。

在进程将身份更改回非特权用户后，`CAP_SYS_NICE`必须将其添加到有效集合中。（它也必须设置在允许集中，所以如果你清除你的能力集，记得也要设置它。如果你只是修改当前的能力集，那么你知道它已经被设置了，因为你继承了它。）

这是我建议您应该遵循的程序：

1.  保存真实用户 ID、真实组 ID 和补充组 ID：

    ```
     #define  _GNU_SOURCE
     #define  _BSD_SOURCE
     #include <unistd.h>
     #include <sys/types.h>
     #include <sys/capability.h>
     #include <sys/prctl.h>
     #include <grp.h>

     uid_t   user = getuid();
     gid_t   group = getgid();
     gid_t  *gid;
     int     gids, n;

     gids = getgroups(0, NULL);
     if (gids < 0) /* error */

     gid = malloc((gids + 1) * sizeof *gid);
     if (!gid) /* error */

     gids = getgroups(gids, gid);
     if (gids < 0) /* error */ 
    ```

2.  过滤掉不必要的和特权的补充群体（偏执！）

    ```
     n = 0;
     while (n < gids)
         if (gid[n] == 0 || gid[n] == group)
             gid[n] = gid[--gids];
         else
             n++; 
    ```

    因为您无法“清除”补充组 ID（仅请求当前编号），所以请确保列表永远不会为空。您可以随时将真实组 ID 添加到补充列表以使其非空。

    ```
     if (gids < 1) {
         gid[0] = group;
         gids = 1;
     } 
    ```

3.  将真实有效的用户ID切换为root

    ```
     if (setresuid(0, 0, 0)) /* error */ 
    ```

4.  在集合中设置`CAP_SYS_NICE`能力`CAP_PERMITTED`。我更喜欢清除整个集合，并且只保留此方法工作所需的四个功能（稍后，删除除 CAP_SYS_NICE 之外的所有功能）：

    ```
     cap_value_t capability[4] = { CAP_SYS_NICE, CAP_SETUID, CAP_SETGID, CAP_SETPCAP };
     cap_t       capabilities;

     capabilities = cap_get_proc();
     if (cap_clear(capabilities)) /* error */
     if (cap_set_flag(capabilities, CAP_EFFECTIVE, 4, capability, CAP_SET)) /* error */
     if (cap_set_flag(capabilities, CAP_PERMITTED, 4, capability, CAP_SET)) /* error */
     if (cap_set_proc(capabilities)) /* error */ 
    ```

5.  告诉内核您希望保留从 root 更改为非特权用户的功能；默认情况下，当从 root 身份更改为非 root 身份时，这些功能会被清零

    ```
     if (prctl(PR_SET_KEEPCAPS, 1L)) /* error */ 
    ```

6.  将真实、有效和保存的组 ID 设置为最初保存的组 ID

    ```
     if (setresgid(group, group, group)) /* error */ 
    ```

7.  设置补充组 ID

    ```
     if (setgroups(gids, gid)) /* error */ 
    ```

8.  将真实、有效和保存的用户 ID 设置为最初保存的用户 ID

    ```
     if (setresuid(user, user, user)) /* error */ 
    ```

    在这一点上，您有效地放弃了 root 权限（不再能够重新获得它们），除了该`CAP_SYS_NICE`功能。由于从 root 用户到非 root 用户的转换，该功能永远不会生效；内核将始终清除此类转换上的有效功能集。

9.  `CAP_SYS_NICE`在`CAP_PERMITTED`和`CAP_EFFECTIVE`集合中设置能力

    ```
     if (cap_clear(capabilities)) /* error */
     if (cap_set_flag(capabilities, CAP_PERMITTED, 1, capability, CAP_SET))  /* error */
     if (cap_set_flag(capabilities, CAP_EFFECTIVE, 1, capability, CAP_SET))  /* error */
     if (cap_set_flag(capabilities, CAP_PERMITTED, 3, capability + 1, CAP_CLEAR))  /* error */
     if (cap_set_flag(capabilities, CAP_EFFECTIVE, 3, capability + 1, CAP_CLEAR))  /* error */

     if (cap_set_proc(capabilities)) /* error */ 
    ```

    请注意，后两个`cap_set_flag()`操作清除了不再需要的三个功能，因此只`CAP_SYS_NICE`保留第一个。

    此时不再需要功能描述符，因此释放它是个好主意。

    ```
     if (cap_free(capabilities)) /* error */ 
    ```

10.  告诉内核您不希望保留对 root 的任何进一步更改的能力（再次，只是偏执狂）

    ```
     if (prctl(PR_SET_KEEPCAPS, 0L)) /* error */ 
    ```

`libcap-dev`安装软件包后，这适用于 x86-64，在 Xubuntu 12.04.1 LTS 上使用 GCC-4.6.3、libc6-2.15.0ubuntu10.3 和 linux-3.5.0-18 内核。

编辑添加：

您可以通过仅依赖作为 root 的有效用户 ID 来简化该过程，因为可执行文件是 setuid root。在这种情况下，您也无需担心补充组，因为 setuid root 只会影响有效用户 ID，不会影响其他任何内容。回到原来的真实用户，从技术上讲，您只需要在`setresuid()`过程结束时调用一次（`setresgid()`如果可执行文件也恰好被标记为 setgid root），将保存的和有效的用户（和组）ID 设置为真实用户。

但是，重新获得原始用户身份的情况很少见，而获得*指定用户*身份的情况很常见，这里的程序最初是为后者设计的。您将使用`initgroups()`为指定用户获取正确的补充组，依此类推。在这种情况下，仔细处理真实、有效和保存的用户和组 ID 以及补充组 ID 很重要，否则该过程将从执行该过程的用户那里继承补充组。

这里的过程是偏执的，但是当您处理安全敏感问题时，偏执并不是一件坏事。对于恢复到真实用户的情况，可以简化。

* * *

于 2013-03-17 编辑以显示一个简单的测试程序。这假定它安装了 setuid root，但它会删除所有特权和功能（除了 CAP_SYS_NICE，它是调度程序操作高于正常规则所必需的）。我减少了我喜欢做的“多余”操作，希望其他人觉得这更容易阅读。

```
#define  _GNU_SOURCE
#define  _BSD_SOURCE
#include <unistd.h>
#include <sys/types.h>
#include <sys/capability.h>
#include <sys/prctl.h>
#include <grp.h>
#include <errno.h>

#include <string.h>
#include <sched.h>
#include <stdio.h>

void test_priority(const char *const name, const int policy)
{
    const pid_t         me = getpid();
    struct sched_param  param;

    param.sched_priority = sched_get_priority_max(policy);
    printf("sched_get_priority_max(%s) = %d\n", name, param.sched_priority);
    if (sched_setscheduler(me, policy, &param) == -1)
        printf("sched_setscheduler(getpid(), %s, { %d }): %s.\n", name, param.sched_priority, strerror(errno));
    else
        printf("sched_setscheduler(getpid(), %s, { %d }): Ok.\n", name, param.sched_priority);

    param.sched_priority = sched_get_priority_min(policy);
    printf("sched_get_priority_min(%s) = %d\n", name, param.sched_priority);
    if (sched_setscheduler(me, policy, &param) == -1)
        printf("sched_setscheduler(getpid(), %s, { %d }): %s.\n", name, param.sched_priority, strerror(errno));
    else
        printf("sched_setscheduler(getpid(), %s, { %d }): Ok.\n", name, param.sched_priority);

}

int main(void)
{
    uid_t       user;
    cap_value_t root_caps[2] = { CAP_SYS_NICE, CAP_SETUID };
    cap_value_t user_caps[1] = { CAP_SYS_NICE };
    cap_t       capabilities;

    /* Get real user ID. */
    user = getuid();

    /* Get full root privileges. Normally being effectively root
     * (see man 7 credentials, User and Group Identifiers, for explanation
     *  for effective versus real identity) is enough, but some security
     * modules restrict actions by processes that are only effectively root.
     * To make sure we don't hit those problems, we switch to root fully. */
    if (setresuid(0, 0, 0)) {
        fprintf(stderr, "Cannot switch to root: %s.\n", strerror(errno));
        return 1;
    }

    /* Create an empty set of capabilities. */
    capabilities = cap_init();

    /* Capabilities have three subsets:
     *      INHERITABLE:    Capabilities permitted after an execv()
     *      EFFECTIVE:      Currently effective capabilities
     *      PERMITTED:      Limiting set for the two above.
     * See man 7 capabilities for details, Thread Capability Sets.
     *
     * We need the following capabilities:
     *      CAP_SYS_NICE    For nice(2), setpriority(2),
     *                      sched_setscheduler(2), sched_setparam(2),
     *                      sched_setaffinity(2), etc.
     *      CAP_SETUID      For setuid(), setresuid()
     * in the last two subsets. We do not need to retain any capabilities
     * over an exec().
    */
    if (cap_set_flag(capabilities, CAP_PERMITTED, sizeof root_caps / sizeof root_caps[0], root_caps, CAP_SET) ||
        cap_set_flag(capabilities, CAP_EFFECTIVE, sizeof root_caps / sizeof root_caps[0], root_caps, CAP_SET)) {
        fprintf(stderr, "Cannot manipulate capability data structure as root: %s.\n", strerror(errno));
        return 1;
    }

    /* Above, we just manipulated the data structure describing the flags,
     * not the capabilities themselves. So, set those capabilities now. */
    if (cap_set_proc(capabilities)) {
        fprintf(stderr, "Cannot set capabilities as root: %s.\n", strerror(errno));
        return 1;
    }

    /* We wish to retain the capabilities across the identity change,
     * so we need to tell the kernel. */
    if (prctl(PR_SET_KEEPCAPS, 1L)) {
        fprintf(stderr, "Cannot keep capabilities after dropping privileges: %s.\n", strerror(errno));
        return 1;
    }

    /* Drop extra privileges (aside from capabilities) by switching
     * to the original real user. */
    if (setresuid(user, user, user)) {
        fprintf(stderr, "Cannot drop root privileges: %s.\n", strerror(errno));
        return 1;
    }

    /* We can still switch to a different user due to having the CAP_SETUID
     * capability. Let's clear the capability set, except for the CAP_SYS_NICE
     * in the permitted and effective sets. */
    if (cap_clear(capabilities)) {
        fprintf(stderr, "Cannot clear capability data structure: %s.\n", strerror(errno));
        return 1;
    }
    if (cap_set_flag(capabilities, CAP_PERMITTED, sizeof user_caps / sizeof user_caps[0], user_caps, CAP_SET) ||
        cap_set_flag(capabilities, CAP_EFFECTIVE, sizeof user_caps / sizeof user_caps[0], user_caps, CAP_SET)) {
        fprintf(stderr, "Cannot manipulate capability data structure as user: %s.\n", strerror(errno));
        return 1;
    }

    /* Apply modified capabilities. */
    if (cap_set_proc(capabilities)) {
        fprintf(stderr, "Cannot set capabilities as user: %s.\n", strerror(errno));
        return 1;
    }

    /*
     * Now we have just the normal user privileges,
     * plus user_caps.
    */

    test_priority("SCHED_OTHER", SCHED_OTHER);
    test_priority("SCHED_BATCH", SCHED_BATCH);
    test_priority("SCHED_IDLE", SCHED_IDLE);
    test_priority("SCHED_FIFO", SCHED_FIFO);
    test_priority("SCHED_RR", SCHED_RR);

    return 0;
} 
```

请注意，如果您知道二进制文件仅在相对较新的 Linux 内核上运行，则可以依赖文件功能。然后，您`main()`不需要任何身份或能力操作——您可以删除`main()`除`test_priority()`函数之外的所有内容——并且您只需为二进制文件赋予`./testprio`CAP_SYS_NICE 优先级：

```
sudo setcap 'cap_sys_nice=pe' ./testprio 
```

您可以运行`getcap`以查看在执行二进制文件时授予了哪些优先级：

```
getcap ./testprio 
```

应该显示

```
./testprio = cap_sys_nice+ep 
```

到目前为止，文件功能似乎很少使用。在我自己的系统上，`gnome-keyring-daemon`是唯一具有文件功能的系统（CAP_IPC_LOCK，用于锁定内存）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:17:33.560

> 我有一些代码在我的应用程序的主线程中接近启动时运行：

您必须在要使用它们的每个线程中获取这些功能，或者使用`CAP_INHERITABLE`集合。

从[功能（7）](http://www.kernel.org/doc/man-pages/online/pages/man7/capabilities.7.html)：

> Linux 将传统上与超级用户相关的权限划分为不同的单元，称为功能，可以独立启用和禁用。 **功能是每个线程的属性。**

# c - 在这种情况下我应该使用什么样的数据结构？

> ID：13183335
> 
> 赞同：0
> 
> 时间：2012-11-01T18:29:13.463
> 
> 标签：c, data-structures

我有一个函数，它在循环内部调用，它可以为每个循环生成一组整数，例如：

循环 1`{1 1 1 2}`
的结果： 循环 2`{1 1 1 3}`
的结果： 循环 3`{2 1 1 3}`
的结果： 循环 4 的结果：`{3 1 3 2}`

并且这个函数可能会产生重复的结果，例如结果2和结果3是一样的。我需要将这些结果放在一个数据结构中，但不能放重复，如果结果 2 与结果 3 相同，则只保留其中一个，如何实现`C`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:52:52.683

如果项目的范围足够小，您可以使用位图作为枚举的平均值。例如，如果您想表示 1 到 32 范围内的整数集，则所需的只是用作位图的 32 位整数：

```
00000001 00000001 00000000 00000000    - for set {8,16}
       ^        ^
       8        16 
```

等等

如果范围较大，则使用字节数组，其中每个位表示该位置的值是否存在于集合中：

```
#define MAXVAL 1024

typedef unsigned char bitmap_t[];
byte bitmap[1 + MAXVAL / CHAR_BIT] = { 0 };
// CHAR_BIT is defined in limit.h and is equal to count of bits in a byte

void insert(bitmap_t bitmap, unsigned val) {
  assert(val < MAXVAL);
  bitmap[val / CHAR_BIT] |= (1 << (val % CHAR_BIT);
}

int is_present(bitmap_t bitmap, unsigned val) {
  assert(val < MAXVAL);
  return bitmap[ val / CHAR_BIT ] & (1 << (val % CHAR_BIT));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:33:58.543

在 C++ 中，这很容易。只需使用 a `std::set`of `std::tuple`s。在 C 中，您必须自己实现所有功能或找到一个好的库，但总体方法是相同的。

# php - Symfony2 slow initialization time on Debian

> ID：13183338
> 
> 赞同：1
> 
> 时间：2012-11-01T18:29:30.287
> 
> 标签：php, symfony, webserver

Our site used to be on a shared hosting, now we've moved to a dedicated server with AMD Opteron™ 3280 and 16 GB RAM. The problem is that our system in dev mode is now ways slower than it used to be. On the shared hosting a page load took ~700 ms in dev mode, on this server it takes 7s (10 times more). I opened the profiler for timing information and found that total time was 6948 ms, initialization was 6255 ms, and the main request was 692.3 ms. For comparison I checked another site which is running on a really bad shared hosting, that had a total time of 1794 ms, but the initialization time was only 190 ms. Why do we have such a long init time? I have symfony2 sites running on many servers (both dedicated and shared) and have never had this problem before.

**System info**

*   Debian wheezy
*   Php 5.4.4-7
*   Apache 2.2.22
*   Kernel 3.2.0-3-amd64

# php - imagejpg() is showing image code on screen and isnt saving it

> ID：13183343
> 
> 赞同：0
> 
> 时间：2012-11-01T18:29:59.470
> 
> 标签：php, image, upload, chmod

im trying to save an image on a directory with imagejpg(), but instead of saving the image on the directory, its showing the image's code on screen, something like this:

```
ÿØÿàJFIFÿþ>CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), default quality ÿÛC      $.' ",#(7),01444'9=82<.342ÿÛC     2!!22222222222222222222222222222222222222222222222222ÿÀ¿”"ÿÄ   ÿÄµ}!1AQa"q2‘¡#B±ÁRÑð$3br‚  %&'()*456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyzƒ„…†‡ˆ‰Š’“”•–—˜™š¢£¤¥¦§¨©ª²³´µ¶·¸¹ºÂÃÄÅÆÇÈÉÊÒÓÔÕÖ×ØÙÚáâãäåæçèéêñòóôõö÷øùúÿÄ    ÿÄµw!1AQaq"2B‘¡±Á  #3RðbrÑ $4á%ñ&'()*56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz‚ƒ„…†‡ˆ‰Š’“”•–—˜™š¢£¤¥¦§¨©ª²³´µ¶·¸¹ºÂÃÄÅÆÇÈÉÊÒÓÔÕÖ×ØÙÚâãäåæçèéêòóôõö÷øùúÿÚ?÷Ú(¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ÑEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQEQE””ŒØ&lt;‘\Œ>&Øxy­ [»ÞAP~TúÐœ¬w{Âõ#¤Ô2_ZÆp×1þø¯›õOëúÄŒf¿x¢=#‡åúÖH½šVËK#“Ý›?©ªå#ÚTGw¿êæþŒ L9æ¾]·ÔîíhndˆŽ…Šíü=ñ3P±dŠùÖêS÷… ªÙEbé(Òõ¨Á¶¹@ýÑŽ­r*mbÓ¸´QE (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ (¢€ŒàQžµ…â/i¾‰ZúVàìXÓŠmÙ M%©ÇüOñàÑ`:^Ÿ ût«ûÇýRû{×ƒI+Ë#K+–fûÄœ“Z:íèÔµ»»¯ŸÊÌ»ÎN3Æk4FÇ'«ÔúÕ¸¸hÑƒ’ø°ß3œF^æ¥\mQµ{zÕG}ÄAéLCdòhQv95eAøž*©æ“ð«MzëÅ]‚öâÍÃÇ!V9Sƒ^‰á_ŠþNË]cs'Ýc•úŽõäïv )È&IÄúÊÃQ´Ô­VâÒt–&amp;èÈsVëæ x£SðÅêÉo+Iâcò‘ý+è_x‚×Ä:Tw¶­œü®‡ª·¥KF±Íš)3šZE…Q@%-QIK@Q@RPÑEQEQE%-RPÑIE-”´QEQE%-RPÑEQEQIE-Q@Q@Q@Q@Q@Q@Q@Q@Q@Q@Q@Q@Q@Q@Q@Q@Q@”É$Xã.Ì¯ROJ:Ø ZÎ¯m¢é’ÞÝ8Xãû“ØWÍ¾&ñ Ïˆµyofbñg…^Â·¾"xÀëÚ£ÚÚÊM„ ´c£ŸïW ÔçµzØJ«š[œêóh…(‚{TrFV-‘œ«[ð©q°sÔÓCãšê©N3Ñ£É¢›2;ÓcBÍœUý‹7NéQÊcHaµ‡pkÎ­†qÖ;0¨žä!QŽ•XÎOzlîs×9éP)%«Sd]€–lšØ´dSóVI°TËy¶3«X¢ž0­t?ü@Ú‰ÚG"Òçëè{óë\­ùÛÁ« rL‹ %H9ÈëCÔKF}f‡* >¹ké®øbÚbÀÍòåç"ºaPt'qh¢ŠQE”´PEPEPEPEPEPEPEPEPEPEPEPEPEPEPEPEPEPEPEPE%-QI@E”´RRÐEPEPEPEPEPEPEPE†€ ò¿Š26e!H¿¾+ÕTöú×aãÃá­KŒƒpÃ¡îkæû»¹¯ï%¹¹s$²9gcÜ×n‡;æg5z¶VEvÉäž¼šEÇ^Ôub; BkÖhá#žy¨p[OcžJˆri€(¯=j¬åfùô4û™‚‚gî.ÿ­Lô]Hµô$$±,‘°*ãp"¾J8È®×Ãõm4¶3 `^È2õ¡¢£+BÒW¤üOÓ®J¥ìf?Ä¼¯ÿZ»;-RÊþ=ö·1Ê¿ì‘ScE$Ë”QE"…¢’–€ ))h¢ŠJZ)( ¢’–€ ))h¢Š(¢’ŠZ(¢€ ))h¢’–€ (¢€ (¢€ ))h¢’ŠZ(¤ ¢’–€ ))h¢’ŠZ(¢€–’ŠZ(¤ ¢ŠJZJ( ¢Š(¢Š(¢ŠJZ(¢€–Š(¢Š(¢Š(öª÷—QYÚIq<‚8ãRÅ`Zœœ×ŽüVñy9Ñ-$Ër¿ú iJ›©.TEIò+œOŒüO/ 
```

the function im using to upload images is this one:

```
 function resize( $file, $width = 0, $height = 0, $proportional = false, $output='file', $delete_original = false, $use_linux_commands = false )
  {
    if ( $height <= 0 && $width <= 0 ) {
      return false;
    }

    $info = getimagesize($file);
    $image = '';

    $final_width = 0;
    $final_height = 0;
    list($width_old, $height_old) = $info;

    if ($proportional) {
      if ($width == 0) $factor = $height/$height_old;
      elseif ($height == 0) $factor = $width/$width_old;
      else $factor = min ( $width / $width_old, $height / $height_old);   

      $final_width = round ($width_old * $factor);
      $final_height = round ($height_old * $factor);

    }
    else {
      $final_width = ( $width <= 0 ) ? $width_old : $width;
      $final_height = ( $height <= 0 ) ? $height_old : $height;
    }

    switch ( $info[2] ) {
      case IMAGETYPE_GIF:
        $image = imagecreatefromgif($file);
      break;
      case IMAGETYPE_JPEG:
        $image = imagecreatefromjpeg($file);
      break;
      case IMAGETYPE_PNG:
        $image = imagecreatefrompng($file);
      break;
      default:
        return false;
    }

    $image_resized = imagecreatetruecolor( $final_width, $final_height );

    if ( ($info[2] == IMAGETYPE_GIF) || ($info[2] == IMAGETYPE_PNG) ) {
      $trnprt_indx = imagecolortransparent($image);

      // If we have a specific transparent color
      if ($trnprt_indx >= 0) {

        // Get the original image's transparent color's RGB values
        $trnprt_color    = imagecolorsforindex($image, $trnprt_indx);

        // Allocate the same color in the new image resource
        $trnprt_indx    = imagecolorallocate($image_resized, $trnprt_color['red'], $trnprt_color['green'], $trnprt_color['blue']);

        // Completely fill the background of the new image with allocated color.
        imagefill($image_resized, 0, 0, $trnprt_indx);

        // Set the background color for new image to transparent
        imagecolortransparent($image_resized, $trnprt_indx);

      } 
      // Always make a transparent background color for PNGs that don't have one allocated already
      elseif ($info[2] == IMAGETYPE_PNG) {

        // Turn off transparency blending (temporarily)
        imagealphablending($image_resized, false);

        // Create a new transparent color for image
        $color = imagecolorallocatealpha($image_resized, 0, 0, 0, 127);

        // Completely fill the background of the new image with allocated color.
        imagefill($image_resized, 0, 0, $color);

        // Restore transparency blending
        imagesavealpha($image_resized, true);
      }
    }

    imagecopyresampled($image_resized, $image, 0, 0, 0, 0, $final_width, $final_height, $width_old, $height_old);

    if ( $delete_original ) {
      if ( $use_linux_commands )
        exec('rm '.$file);
      else
        @unlink($file);
    }

    switch ( strtolower($output) ) {
      case 'browser':
        $mime = image_type_to_mime_type($info[2]);
        header("Content-type: $mime");
        $output = NULL;
      break;
      case 'file':
        $output = $file;
      break;
      case 'return':
        return $image_resized;
      break;
      default:
      break;
    }

    switch ( $info[2] ) {
      case IMAGETYPE_GIF:
        imagegif($image_resized, $arquivo_real);
      break;
      case IMAGETYPE_JPEG:
        imagejpeg($image_resized, $arquivo_real);
      break;
      case IMAGETYPE_PNG:
        imagepng($image_resized, $arquivo_real);
      break;
      default:
        return false;
    }

    return true;
  } 
```

and sometimes, when i change the code a bit, it says "Permission denied" for it, ive already tried Chmod 0777, but isnt working either

# windows - 那么 Sleep() 和 this 一样吗？

> ID：13183350
> 
> 赞同：1
> 
> 时间：2012-11-01T18:30:35.357
> 
> 标签：windows, performance, winapi, delay, clock

那么，这两个是一样的吗？在任务管理器中使用延迟 CPU 使用率很疯狂。这与系统空闲进程相同吗？

```
#include <iostream>
#include <time.h>
//#include <windows.h>

int delay(long int time)
{
    clock_t beginning = clock();
    while(clock() - beginning < time) {}
    return 0;
}

int main()
{
    clock_t beginning = clock();

    begin:

    std::cout << "delay this by 1000ms\n";

    //Sleep(1000);
    delay(1000);

    goto begin; //i know, i know

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:32:56.767

这称为“忙等待”，绝对*与*呼叫不同`Sleep()`。睡眠将重新安排您的进程，以便其他进程有机会运行；忙碌的等待只会让 CPU 忙于无用，并减慢整个系统的速度。

“系统空闲进程”正在做同样的事情，但它只在没有其他进程有工作要做时才被安排。它可能也比您编写的循环更节能。维基百科有关于如何和为什么的[有趣细节。](http://en.wikipedia.org/wiki/System_Idle_Process)

# sql - 如何将 .sql 文件插入或附加到我的 Excel.xls 文件中？

> ID：13183354
> 
> 赞同：-1
> 
> 时间：2012-11-01T18:30:45.163
> 
> 标签：sql, excel, excel-2007

尽管我想在 excel 文件中附加许多带有列的 sql 文件，但我正在制作项目文档。

我试过了`Insert Object`>`Create File`

但它没有附加文件，也无法链接该文件

而不是链接该文件，我想在 excel 本身中附加，

以便只使用一个 Excel.xls 文件，我将拥有所有其他附件文件

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:38:18.653

没有 .SQL 文件标准之类的东西。

当您看到此类文件时，它们*通常*由一系列以某些特定于供应商的 SQL 语言变体的命令组成。这些命令可以输入到供应商的 SQL 数据库产品中；数据库引擎将处理它们并适当地更新数据库。

您在文件中查看是否是您所拥有的，或者您是否有其他一些（可能是二进制）文件，有人选择对其应用 .sql 扩展名（例如，有些人使用单文件 SQLite 数据库执行此操作）。

由于 SQL 因供应商而异，因此您可能能够也可能无法将由一个供应商的产品生成的 SQL 命令文件应用到另一个供应商的数据库。

Excel 不理解 SQL 语言，因此您将无法使用 SQL 命令文件在 Excel 电子表格中生成数据。

# java - Juno - Java 构建路径 - 项目无法读取或不是有效的 ZIP 文件

> ID：13183355
> 
> 赞同：5
> 
> 时间：2012-11-01T18:30:56.220
> 
> 标签：java, jar

我收到此错误：

> 描述资源路径位置类型所需库的存档：项目“主页”中的“src/Program.java”无法读取或不是有效的 ZIP 文件主页构建路径构建路径问题

![在此处输入图像描述](../Images/b8ff9a79e9c81eab59c5ef6ddeded586.png)

![在此处输入图像描述](../Images/ea3faacc0bdd7190a7044355a7aa8f78.png)

是什么导致了这个错误，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T18:39:55.687

请按照以下导航：

```
Right Click(project) -> Java Build Path ->Libraries 
```

`red cross`用前面的标记修复那里的所有条目。您可能还想删除它们并使用向导右侧的按钮`remove`重新添加它们。`add`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:41:53.943

你能检查一下，如果`src/Program.java`不在你的图书馆条目中（`Java Build Path ->Libraries`）？在那里，您应该只包括`jar`文件和目录，而不是源 ( `.java`) 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-01T19:05:10.760

我遇到了同样的问题。为了解决它，我删除了有问题的库并再次添加了它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T09:30:56.080

```
Right Click on Project -> Properties -> Java Build Path -> Libraries -> remove struts.xml 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-11T14:35:38.483

这是另一个提到的修复：

我的构建系统（Gradle）向 Eclipse 构建路径添加了一个必需的本机库（dll）（右键单击项目 -> 属性 -> Java 构建路径 -> 库）。告诉构建系统不要将本机 dll 库添加到 Eclipse 类路径解决了这个问题。

# jquery - jQuery jScrollPane Custom Styling

> ID：13183358
> 
> 赞同：0
> 
> 时间：2012-11-01T18:31:08.810
> 
> 标签：jquery, scrollbar, jscrollpane

So, I've been trying to get jScrollPane to work and can't. I feel like a bit of a moron. The website and some fiddles I've seen make it look simple. However, my code doesn't change the styling of the scrollbars at all.

I've added the scripts (there are three in total, the main one and two mouse wheel ones) and the css, still no go.

So I found the following fiddle: [http://jsfiddle.net/2nPXf/34/](http://jsfiddle.net/2nPXf/34/)

(looking for to do same, perhaps keep it normal width though)

And I tried to make it work with my code: [http://jsfiddle.net/6tUMk/4/](http://jsfiddle.net/6tUMk/4/)

It seems like the following script is what you are supposed to use to trigger things (I created a separate script file with just this in it, leaving the downloaded scripts untouched):

```
$(function()
{
    $('.scrollpane').jScrollPane();
}); 
```

So, I've added the scrollpane class where I want the scrollbar, but none of the additional styling takes hold like it does in the first fiddle I linked.

I looked through the HTML within some of the jScrollPane demos and I see a lot of additional classes being used, jspScrollable, jspContainer, and others. However, from looking at the working fiddle and documentation within the jScrollPane website, it seems like if you set up the script properly, then any element (in my case, .scrollpane) triggered within the .jScrollPane() script should make it work. But I guess I'm missing something?

So, how does this work? What am I missing here?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-03T19:06:23.543

您忘记将外部链接添加到[jquery.jscrollpane.css](http://jscrollpane.kelvinluck.com/style/jquery.jscrollpane.css)、[jquery.jscrollpane.min.js](http://jscrollpane.kelvinluck.com/script/jquery.jscrollpane.min.js)、（选项）[jquery.mousewheel.js](http://jscrollpane.kelvinluck.com/script/jquery.mousewheel.js)。

[小提琴](http://jsfiddle.net/Shmoyojoe/6tUMk/6/)

PS 把内容放在里面`<p></p>`，让它看起来更显眼。

# compiler-construction - Can't build C++ program using Sublime Text 2, Windows 8

> ID：13183360
> 
> 赞同：1
> 
> 时间：2012-11-01T18:31:15.923
> 
> 标签：compiler-construction, build, compilation, build-process, sublimetext2

I think many of you are using or used to use Sublime Text 2 editor, on windows 8\. I have strange error: C++ programs can't be built. My goal is to use Sublime Text 2 to build and run simple programs, so that it can show me the output in the window below, Xcode or Codeblocks style.

My C++.sublime-build (which are the default settings):

```
{
    "cmd": ["g++", "${file}", "-o", "${file_path}/${file_base_name}"],
    "file_regex": "^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$",
    "working_dir": "${file_path}",
    "selector": "source.c, source.c++",

    "variants":
    [
        {
            "name": "Run",
            "cmd": ["bash", "-c", "g++ '${file}' -o '${file_path}/${file_base_name}' && '${file_path}/${file_base_name}'"]
        }
    ]
} 
```

When i compile a simple hello world program, it compiles and runs fine, and the output is shown on the lower panel of sublime text, exactly like I want it.

But If I run a more complex program such as below:

```
//  main.cpp
//  LongestIncreasingSubsequence
#include <iostream>
#include <vector>
#include <limits>
using namespace std;

int main(int argc, const char * argv[])
{

    int n;

    cin >> n;
    vector<int> nums(n);
    vector<int> lis_so_far(n);
    int final_longest = 1;

    for (int i=0; i<n; i++) {
        cin >> nums[i];
        lis_so_far[i] = 1;
    }
    int so_far;
    for (int j=n-1; j>=0; j--) {

        so_far = 0;

        for (int i=j+1; i<n; i++) {
         //   cout << "hi" <<endl;
            if (nums[i] > nums[j]) {
              //  cout << "hello" <<endl;

                if (lis_so_far[i] > so_far ) {
                    so_far = lis_so_far[i];
                    //cout << so_far << endl;
                }

            }
        }
        if (j<n-1) {
            lis_so_far[j] += so_far;
            if (lis_so_far[j] > final_longest) {
                final_longest = lis_so_far[j];
            }
        }
    }

    for (int i=0; i<n; i++) {
        cout << lis_so_far[i] << endl;
    }
    cout << final_longest << endl;

    return 0;
} 
```

, it gives me a missing limits.h error, even though I have cygwin installed. Isn't ST2 supposed to know where the c++ libraries are?:

```
C:\Users\Leonardo\Desktop\main5.cpp:11: limits: No such file or directory
[Finished in 6.5s with exit code 1] 
```

If I comment the #include limits line, it builds, but when i run it, it gives me a permission denied error, even though there isn't a command prompt running:

```
/cygnus/cygwin-b20/H-i586-cygwin32/i586-cygwin32/bin/ld: cannot open output file C:\Users\Leonardo\Desktop/main5.exe: Permission denied
collect2: ld returned 1 exit status 
```

Any ideas? I just want ST2 to function as Xcode or Codeblocks would.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-17T19:03:34.747

这是一个崇高的控制台“错误”。这是因为您永远不会终止最后一次编译。例如。

```
#include <iostream>
int main(){
cout << "it's a program" << endl;
cin.get() // system pause
} 
```

当你第一次运行时，你编译成功，但是，当你调用`cin.get()`暂停时，程序永远不会终止，并保持打开状态。

然后，如果你再次尝试编译，你会看到权限错误，因为程序仍在运行。删除 pause 命令，您就不会出错了。

# dynamic - Event not fired for Dynamically Added Radiobuttons to Treeview

> ID：13183361
> 
> 赞同：1
> 
> 时间：2012-11-01T18:31:18.803
> 
> 标签：dynamic, event-handling, treeview, radio-button

I need to dynamically Add Radio button at the right side of each node and if user clicks on that I need to do some changes in database.

Currently I am framing a Table with Radiobutton and Adding that to the Node Text of Treeview Node. All fine but Eventhandler is not working.

Can someone please help me out.

```
HtmlTable oItemTable = new HtmlTable();
oItemTable.Width = "100%";
HtmlTableRow oItemRow = new HtmlTableRow();
HtmlTableCell oItemDescCell = new HtmlTableCell();
oItemDescCell.Width = "200px";
oItemDescCell.InnerText = sItemID;
oItemRow.Cells.Add(oItemDescCell);

HtmlTableCell oItemMonitorCell = new HtmlTableCell();
oItemMonitorCell.Width = "10px";
RadioButton rdbItemMonitor = new RadioButton();
rdbItemMonitor.ID = sItemID + "M";
rdbItemMonitor.GroupName = sItemID;
rdbItemMonitor.AutoPostBack = true;
rdbItemMonitor.CheckedChanged += new EventHandler(rdbItemMonitor_OnCheckedChanged);
oItemMonitorCell.Controls.Add(rdbItemMonitor);
oItemRow.Cells.Add(oItemMonitorCell);
StringBuilder sbItemTable = new StringBuilder();
using (StringWriter swItemTable = new StringWriter(sbItemTable))
{
using (HtmlTextWriter twSegmentTable = new HtmlTextWriter(swItemTable))
{
oItemTable.RenderControl(twSegmentTable);
}
}

oNodeItem.Text = sbItemTable.ToString();
trvMyPlans.Nodes.Add(oNodeItem); 
```

# android - Android SQLite database not open exception

> ID：13183364
> 
> 赞同：0
> 
> 时间：2012-11-01T18:31:33.893
> 
> 标签：android, sqlite

```
11-01 18:20:09.953: E/AndroidRuntime(528): FATAL EXCEPTION: main
11-01 18:20:09.953: E/AndroidRuntime(528): java.lang.IllegalStateException: database not open
11-01 18:20:09.953: E/AndroidRuntime(528):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1526)
11-01 18:20:09.953: E/AndroidRuntime(528):  at phoenix.metro.uis.DBHelper.insertCart(DBHelper.java:149)
11-01 18:20:09.953: E/AndroidRuntime(528):  at phoenix.metro.uis.SearchActivity$4.onClick(SearchActivity.java:171)
11-01 18:20:09.953: E/AndroidRuntime(528):  at android.view.View.performClick(View.java:2485)
11-01 18:20:09.953: E/AndroidRuntime(528):  at android.view.View$PerformClick.run(View.java:9080)
11-01 18:20:09.953: E/AndroidRuntime(528):  at android.os.Handler.handleCallback(Handler.java:587)
11-01 18:20:09.953: E/AndroidRuntime(528):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-01 18:20:09.953: E/AndroidRuntime(528):  at android.os.Looper.loop(Looper.java:123)
11-01 18:20:09.953: E/AndroidRuntime(528):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-01 18:20:09.953: E/AndroidRuntime(528):  at java.lang.reflect.Method.invokeNative(Native Method)
11-01 18:20:09.953: E/AndroidRuntime(528):  at java.lang.reflect.Method.invoke(Method.java:507)
11-01 18:20:09.953: E/AndroidRuntime(528):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-01 18:20:09.953: E/AndroidRuntime(528):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-01 18:20:09.953: E/AndroidRuntime(528):  at dalvik.system.NativeStart.main(Native Method) 
```

The database code as below :

```
public class DBHelper extends SQLiteOpenHelper{

    //SQLiteOpenHelper : A helper class to manage database creation and version management. 
    private final static String sdb_NAME="metro_sdb";
    private static int sdbVersion = 2; // version must be >=1
    //Table name ---------------------------------
    private final static String TABLE_NAME="Item";
    private final static String TABLE_NAME_CART="Cart";

    //Table columns (cart) ------------------------------
    private final static String COL_CART_ID="id";
    private final static String COL_CART_ADDDATE="name";
    public DBHelper(Context context) {
        super(context, sdb_NAME, null, sdbVersion); // null is default for cursor factory
    }
    @Override
    public void onCreate(SQLiteDatabase db){
        //Called when the database is created for the first time.

        String sql2 = "CREATE TABLE " + TABLE_NAME_CART +"("+
                COL_CART_ID +" TEXT,"+
                COL_CART_ADDDATE + " TEXT NOT NULL);";

        db.execSQL(sql2);
    }
    @Override
    public void onUpgrade(SQLiteDatabase  db, int oldVersion, int newVersion) {
        //Called when the database needs to be upgraded.
        String sql = "DROP TABLE IF EXISTS " + TABLE_NAME;
        String sql2 = "DROP TABLE IF EXISTS " + TABLE_NAME_CART;
         db.execSQL(sql);
         db.execSQL(sql2);
        onCreate( db);
    }

    public boolean insertCart(Cart cart){
        SQLiteDatabase sdb = getWritableDatabase();

        if(getCartItems(cart.id).size()>0){

            ContentValues values = new ContentValues();

            values.put(COL_ITEM_ID, cart.id);
            values.put(COL_CART_ADDDATE, cart.addDate);
            //long re = sdb.insert(TABLE_NAME_CART, null, values);

            long re = sdb.insertWithOnConflict(TABLE_NAME_CART, null, values,SQLiteDatabase.CONFLICT_REPLACE);
            sdb.close();

            return re > 0;
        }else{
            sdb.close();
            return false;
        }
    } 
```

The error is inside the database operations in `insertCart()` function

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:03:46.817

你可以尝试删除`sdb.close()`并再次检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:13:00.133

此错误的可能原因之一是您正在打开已经打开的数据库。

```
 if (!sdb.isOpen()) {
   System.out.println("If executed");
   sdb = getApplicationContext().openOrCreateDatabase(DATABASE_PATH, SQLiteDatabase.OPEN_READWRITE, null);
 } else {
   System.out.println("Else executed");
 } 
```

尝试这个..，。

# c++ - array...for loop

> ID：13183367
> 
> 赞同：0
> 
> 时间：2012-11-01T18:31:42.380
> 
> 标签：c++

I have two integer a, b and a loop like this:

```
for(int i=0 ;i<8 ;++i)
{
    if((b & (0x01 << i)) != 0x00)  
    {
        // 
        c ^= (a << i);
    }
} 
```

how can i do this when a and b are stored in char arrays?

```
unsigned char test (unsigned char* a[], unsigned char* b[])
{

    for(int i=0 ;i<8 ;++i)
    {
        if((b[i] & (0x01 << i)) != 0x00)  
        {
            shiftleft(a);
            c[i] ^= a;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:50:36.097

我认为你想迭代你的数组，在每个项目上应用位移。您需要提供数组大小的计数。

```
unsigned char test (int count, unsigned char* a[], unsigned char* b[])
{
    char c = 0;

    for( int iarray = 0; iarray < count; ++iarray )
    {
        for(int i=0 ;i<8 ;++i)
        {
            if((b[iarray] & (0x01 << i)) != 0x00)  
            {
                c ^= (a[iarray] << i)
            }
        }
    }

    return c;
} 
```

如果您希望 'c' 也是一个数组，这很容易做到，但您可能必须在内存中分配它并返回一个指向内存的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:36:35.500

我认为 - 猜测你想做什么应该是。

```
unsigned char test (unsigned char* a[], unsigned char* b[])
{
    for(int i=0 ;i<8 ;++i)
    {
        if((b[i] & (0x01 << i)) != 0x00)  
        {
            c[i] ^= (*a)<<i;
        }
    }
} 
```

不过，这取决于您想对“a”数组的其余部分做什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:37:11.803

由于 a 和 b 现在是数组，因此您必须首先索引并取消引用要使用的元素。因此，例如，而不是

```
c ^= (a << i); 
```

你可以这样做：

```
c[i] ^= (a[i] << i); 
```

请注意，由于 ^= 取决于先前的值，因此 c[i] 应该在开始之前初始化为有意义的值。

# php - Query every time keypress or a inital big query? Which is better in cakePHP and jquery?

> ID：13183370
> 
> 赞同：1
> 
> 时间：2012-11-01T18:32:06.520
> 
> 标签：php, database, cakephp

Hi I have a site develop in cakephp, in a page I have an input type text where a user can insert string like "ban" I make a query to the database to retrieve the data to obtain record which contain that string (in the example: "banana", "banned"...). Every time that the user digit another letter I make another query to retrieve data which containt taht string every time. The query is done in jquery every time that a user press a letter. I have for example 1 milion of record into my table and I don't know if a user start to digit letter if this solution is fast. Another solution is: when I open that page I make a query to find all record and put it into an array. every time that a user digit a letter I search that string into the array to obtain a subarray with the result.

Which is the best solution in terms of speed, RAM. Consider that in that table I can have 1 milion of record and many user can enter into that page simultaneously. My database is MYSQL.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:02:19.690

我只是建议一个简单的搜索按钮是最简单的解决方案，并为您的服务器节省最多的资源，但那里有教程。我认为这个可能会给你一些想法[http://phpmysqltalk.com/1610-cakephp-jquery-autocomplete-tutorial.html](http://phpmysqltalk.com/1610-cakephp-jquery-autocomplete-tutorial.html) 记住要有一个像 3-4 这样的最小字母来减少查询和缓存听起来是必须的。

# mysql - Tricky MySQL query with joins?

> ID：13183371
> 
> 赞同：0
> 
> 时间：2012-11-01T18:32:07.483
> 
> 标签：mysql, sql, join, left-join

I have 4 tables (among a lot of others - just showing the relevant ones). They are:

*   "users"
    *   id
    *   name
    *   role_id
*   "roles"
    *   id
    *   name
*   "chapter_role_view_permissions"
    *   id
    *   chapter_id
    *   role_id
*   "chapters"
    *   id
    *   name

I'm trying to build a query that will return to me a list of all users, their role name, all chapters per user, and whether or not they have view access to each chapter. So lets say there are 2 users and 2 chapter. User 1 is role_id=1 and User 2 is role_id=2\. And the chapter_role_view_permissions has 1 record ( id:1 | chapter_id: 1 | role_id: 1 ) which means only users with role_id=1 can view chapter 1.

The query result I am looking for should be something like:

|---users.id---|--roles.id---|---chapters.id--|-can_view_chapter-|

|------ 1 ------|----- 1 -------|------- 1 --------|----------- 1 -----------|

|------ 1 ------|----- 1 -------|------- 2 --------|----------- 0 -----------|

|------ 2 ------|----- 2 -------|------- 1 --------|----------- 0 -----------|

|------ 2 ------|----- 2 -------|------- 2 --------|----------- 0 -----------|

Any idea what the query might look like? I don't want to have to make a new field in chapter_role_view_permissions that says "allowed" and insert new records for each role type with either allowed=1 or allowed=0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:44:02.780

```
SELECT users.name, roles.name, chapters.name
FROM users
  LEFT OUTER JOIN roles ON users.role_id = roles.id
  LEFT OUTER JOIN chapter_role_view_permissions link ON link.role_id = roles.id
  LEFT OUTER JOIN chapters ON chapters.id = link.chapter_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:42:31.550

如你所说：

> 我正在尝试构建一个查询，它将向我返回**所有用户**的列表、**他们的角色名称**、**每个用户的所有章节**，以及他们是否有权查看每一章

只需按照相同的顺序在查询中*翻译您自己的话：*

```
SELECT users.id, roles.name, chapters.name FROM users
INNER JOIN roles ON  users.role_id=roles.id
INNER JOIN chapters ON users.id=chapters.id
WHERE users.id=USER_ID 
```

无论如何，您必须更好地解释：您如何关联章节和用户？我假设 chapters.id 与 user.id 相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:50:57.070

```
SELECT    u.id, r.id, c.id, IFNULL(c.id, 0) AS can_view_chapter
FROM      users AS u
JOIN      roles AS r ON r.id = u.role_id
LEFT JOIN chapter_role_view_permissions AS p ON p.role_id = r.id
JOIN      chapters As c ON c.id = p.chapter_id 
```

# d3.js - 如何在 Crossfilter 中访问过滤器值

> ID：13183377
> 
> 赞同：3
> 
> 时间：2012-11-01T18:32:38.600
> 
> 标签：d3.js, crossfilter

我知道如何使用以下方法更改 Crossfilter 中的过滤器：

javascript:filter([null, [80, 150], null, [new Date(fromDate), new Date(toDate)]])

但是我如何获得当前的过滤器选择，例如当用户使用滑块选择一个范围时。我需要它传回我的日历 JS 对象。

将不胜感激任何帮助。

# c - 关于哈希函数

> ID：13183384
> 
> 赞同：2
> 
> 时间：2012-11-01T18:33:06.370
> 
> 标签：c, algorithm, hash

让我们考虑一个双向数组，声明如下：

```
#include <stdbool.h>

bool array[N1][N2]; 
```

我必须知道这个数组的每一行是否`true`在同一位置都有一个值。

例如以下是可以的：

```
{ 
  { 1, 0, 1, 0 },
  { 1, 0, 0, 1 },
  { 0, 0, 1, 1 }
} 
```

而这是不正确的：

```
{ 
  { 1, 0, 1, 0 },
  { 1, 0, 1, 0 },
  { 0, 0, 1, 1 }
} 
```

我试过这个：

```
static uintmax_t hash(const bool *t, size_t n) 
{
    uintmax_t retv = 0U;
    for (size_t i = 0; i < n; ++i)
        if (t[i] == true)
            retv |= 1 << i;
    return retv;
}

static int is_valid(bool n) 
{ 
    return n != 0 && (n & (n - 1)) == 0;
}

bool check(bool t[N1][N2])
{
    uintmax_t thash[N1];

    for (size_t i = 0; i < N1; ++i)
        thash[i] = hash(t[i], N2);

    for (size_t i = 0; i < N1; ++i)
        for (size_t j = 0; j < N1; ++j)
            if (i != j && !is_valid(thash[i] & thash[j]))
                return 0;

    return 1;
} 
```

但它仅适用于`N1 <= sizeof(uintmax_t) * CHAR_BIT`. 你知道解决它的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:16:12.227

不要将位打包成整数。相反，遍历每两条相邻的行`i`并`i+1`求和`!(a[i][j] ^ a[i+1][j])`（两行中位的 XOR 的非）。每行的总和必须恰好为 1。

注意我使用的是逻辑`not`而不是按位`not`。我不想得到-1s（这是按位不为0）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:22:45.623

为什么不创建另一个大小为 N2 （列数）的数组，将其设置为 all `true`，然后`and`每行中的每一列都使用它。最后，检查您的新数组是否正好有一个设置位。

```
bool array[N1][N2];  // this is initialized somehow
bool result[N2];
int i, j;

// initialize result array
for (j = 0; j < N2; ++j)
{
    result[j] = 1;
}

// Now go through the array, computing the result
for (i = 0; i < N1; ++i)
{
    for (j = 0; j < N2; ++j)
    {
        result[j] &= array[i][j];
    }
}

// At this point, you can check the result array.
// If your array is valid, then result should have only one '1' in it. 
```

# playframework - 当流事件进入时，playframework Promise 出现问题

> ID：13183385
> 
> 赞同：0
> 
> 时间：2012-11-01T18:33:07.040
> 
> 标签：playframework, playframework-1.x

我喜欢 playframework 1.2.5 Promise 概念，但是当我阅读他们的 Promise 代码时遇到了一些麻烦。一方面，它只接受一个“单一”的结果。虽然我可以创建多个 Promise 对象，但我不知道要创建多少个。我发送一个请求，我得到了 1000 个块。当这些块进入时，我想将它们添加到队列中。我首先尝试使用具有 List 的 Promise 对象进行子类化，但我无法重置调用的变量，因为我想要一个简单的方法......

```
 public synchronized List<T> resetAndGetResponses() 
```

这样

1.  当东西不断涌入时，我可以一遍又一遍地重复使用 Promise
2.  在我们的项目中使用这个客户端的人不必担心同步问题

也许我应该只修改播放框架，以便调用受到保护。有什么想法值得赞赏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:36:03.723

我认为最好在每个块上使用 promise 并具有类似于文档中显示的代码：[http ://www.playframework.org/documentation/1.2.5/asynchronous#HTTPresponsestreaming](http://www.playframework.org/documentation/1.2.5/asynchronous#HTTPresponsestreaming)

# php - 您如何看待在 catch 中嵌套 try/catch 语句？

> ID：13183388
> 
> 赞同：1
> 
> 时间：2012-11-01T18:33:11.617
> 
> 标签：php, exception, try-catch

你觉得这个组合怎么样？这是错的吗？如何正确地做到这一点？

```
$graph_url = 'https://graph.facebook.com/me?access_token=' . $result['access_token'];
$fb_user = json_decode( file_get_contents( $graph_url ) );
try {
    $user = new Model_User( $fb_user->username );
    $user_meta = new Model_User_Meta ( $user->get ( 'user_id' ) );
    $user_meta->set_user_meta( '_facebook_id', $fb_user->id );
    $user_meta->set_user_meta( '_last_logged_in', 'current_timestamp' );
    $user_meta->save();
} catch ( Exception $e ) {
    if ( $e->getCode() === 0 ){
        $password = Helper_Password::generate_password();
        $hash = Helper_Password::hash_string( $password );
        try {
            $user = new Model_User();
            $user->set( 'user_name', $fb_user->username );
            $user->set( 'user_pass', $hash );
            $user->set( 'user_email', $fb_user->email );
            $user->set( 'user_status',( $fb_user->verified ? 'active' : 'inactive' ) );
            $user->set( 'display_name', $fb_user->name );
            $status = $user->save();
            $user_meta = new Model_User_Meta ( $status->user_id );
            $user_meta->set_user_meta( '_facebook_id', $fb_user->id );
            $user_meta->set_user_meta( '_last_logged_in', 'current_timestamp' );
            $user_meta->save();
        } catch ( Exception $e ) {
            throw $e;
        }
    } else {
        throw $e;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:40:52.440

在捕获期间尝试恢复，然后在必要时抛出异常是可以的。

但是您的代码在这里有些歧义。你的意思是扔哪个`$e`？原来的例外，还是新的例外？如果要抛出原始异常，则不应`$e`在第二个 catch 语句中覆盖：

```
} catch ( Exception $e ) {
    if ( $e->getCode() === 0 ){
        try {
            // try recovering here?
        } catch ( Exception $otherException ) {
            throw $e;  // throw the original exception instead of the new one
        }
    } else {
        throw $e;
    }
} 
```

如果您想抛出新异常，则根本不需要内部捕获...

```
} catch ( Exception $e ) {
    if ( $e->getCode() === 0 ){
        // try recovering here, and let the exception fly as they will
    } else {
        throw $e;
    }
} 
```

# c++ - RCpp：如何在不重新启动 R 的情况下重新加载重新编译的 C++ 代码

> ID：13183390
> 
> 赞同：2
> 
> 时间：2012-11-01T18:33:16.060
> 
> 标签：c++, r, rcpp

我正在试验由`Rcpp.package.skeleton()`.

我做了一个小改动`rcpp_hello_world.cpp`，我想重新编译包并使用修改后的代码运行函数。

然而，尽管使用 清除命名空间`rm()`、使用 分离库`detach()`、使用 r 删除包`emove.packages()`、使用 重新编译和重新安装包`install.packages(.., repos=NULL, type = 'source')`以及使用 重新附加库`library()`，R 仍然运行旧版本的 .cpp 代码。

如果我退出并重新启动 R，`library()`将加载修改后的 .cpp 代码并按预期运行它，但我不想每次更改 C++ 代码时都必须重新启动 R（如果可能）。

如何让 R 在不退出 R 的情况下正确刷新 C++ 调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:51:36.037

通常建议重新启动会话/重新加载包。

由于您可能不想重新启动主会话，因此您可以

*   使用 Rscript 或 littler 加载新示例和测试，我经常这样做

*   使用 RStudio，其中包构建过程现在构建包并在新会话中为您重新加载它

*   使用可以拥有多个 R 会话并重新启动这些会话的系统

# c# - 从另一个项目访问 Razor 视图

> ID：13183393
> 
> 赞同：4
> 
> 时间：2012-11-01T18:33:42.220
> 
> 标签：c#, asp.net-mvc, razor

我有一个 MVC 项目，它在我的网站上使用 Razor Views。我的一个项目，我们称之为 project1 已完成并正在使用中。

我想从 project2 访问 project1 中的视图，这样我就不必维护两个屏幕。

他们都在同一个解决方案中。

我无法更改 project1，因为我们的客户已经在使用它。我查看了 Razor 单文件生成器，但这对于 1 个屏幕来说非常激烈，我无法更改已经在使用的 project1。

如何在我的 project2 中引用来自 project1 的视图？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:07:37.833

您可以将 project2 中的视图编译为 dll 并在 project1 中引用该 dll。

按照[本教程](http://www.chrisvandesteeg.nl/2010/11/22/embedding-pre-compiled-razor-views-in-your-dll/)将视图编译为 dll。

# .net - 实体框架一对多映射

> ID：13183398
> 
> 赞同：0
> 
> 时间：2012-11-01T18:34:14.067
> 
> 标签：.net, entity-framework

这可能只是一些简单的初学者错误，但我似乎无法弄清楚。

我只是想开始使用实体框架（ef 5.0、.net 4.5），直到现在一直在滚动我自己的所有 sql 语句。我首先尝试使用现有的数据库和 EF 代码，使用两个具有一对多关系的简单类：clips 和 clip_ratings（每个剪辑可以有零个或多个评级）。课程的相关部分是：

```
public class clip
{
    public clip()
    {
        this.Ratings = new List<clip_ratings>();
    }

    public virtual ICollection<clip_ratings> Ratings { get; set; }

    public int clip_id { get; set; }
    public Nullable<int> clip_type { get; set; }
    // ...
 }

public class clip_ratings
{
    public int cr_id { get; set; }
    public int cr_clip_id { get; set; }
    // ...

    [ForeignKey("cr_clip_id")]
    public clip Clip { get; set; }
} 
```

现在我正在尝试从数据库中读取一些数据：

```
 var query = from b in db.clips
                        orderby b.clip_id where b.Ratings.Count > 1
                        select b;

            foreach (var item in query)
            {
                Console.WriteLine(item.Ratings.Count +" | "+item.clip_linktext);
            } 
```

该查询从数据库返回正确的结果集，但它在 item.Ratings.Count 上出错。当我只输出 item.clip_linktext 一切都很好，但是使用 item.Ratings.Count 我得到以下错误：

> 元数据集合中的多个项目与身份“clip_ratings”匹配。

我已经尝试遵循所有 MS EF 教程并阅读更多帖子，但似乎无法弄清楚。希望这里有人可以帮助我（并且很容易解决；））

更新：添加 classMap.cs 源：

```
public class clipMap : EntityTypeConfiguration<clip>
{
    public clipMap()
    {
        // Primary Key
        this.HasKey(t => t.clip_id);
        // ...

        // Table & Column Mappings
        this.ToTable("clips");
        this.Property(t => t.clip_id).HasColumnName("clip_id");
        this.Property(t => t.clip_type).HasColumnName("clip_type");
        ...
     }
 }

public class clip_ratingsMap : EntityTypeConfiguration<clip_ratings>
{
    public clip_ratingsMap()
    {
        // Primary Key
        this.HasKey(t => t.cr_id);
        // Table & Column Mappings
        this.ToTable("clip_ratings");
        this.Property(t => t.cr_id).HasColumnName("cr_id");
        this.Property(t => t.cr_clip_id).HasColumnName("cr_clip_id");
        // ...
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:47:14.777

用和标记`clip_id`和属性，如下所示：`cr_id`[`KeyAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.keyattribute%28v=vs.100%29.aspx)`Ratings`[`InversePropertyAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.inversepropertyattribute.aspx)

```
public class clip
{
    public clip()
    {
        this.Ratings = new List<clip_ratings>();
    }

    [InverseProperty("Clip")]
    public virtual ICollection<clip_ratings> Ratings { get; set; }

    [Key]
    public int clip_id { get; set; }
    public Nullable<int> clip_type { get; set; }
    // ...
 }

public class clip_ratings
{
    [Key]
    public int cr_id { get; set; }
    public int cr_clip_id { get; set; }
    // ...

    [ForeignKey("cr_clip_id")]
    public clip Clip { get; set; }
} 
```

阅读[Code First 数据注释](http://msdn.microsoft.com/en-US/data/jj591583)

PS！**认真**考虑阅读[通用命名约定](http://msdn.microsoft.com/en-us/library/vstudio/ms229045%28v=vs.100%29.aspx)和[名称指南](http://msdn.microsoft.com/en-us/library/vstudio/ms229002%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:10:57.270

好的，在对这个简单示例的每个部分进行了一个小时的处理之后，我找到了一个解决方案：显然 EF 不喜欢被称为“评级”的集合，即使数据库或代码中没有任何部分具有属性/字段/该名称的属性。

将名称更改为投票**而**不是**评级**

```
 public clip()
    {
        this.Votes = new List<clip_ratings>();
    }

    public virtual ICollection<clip_ratings> Votes { get; set; } 
```

一切正常。

猜猜这就是为什么我到目前为止一直避免使用这些框架，你永远不会真正知道它们在幕后做什么；）

是的，如果我有机会改造数据库，我会尝试遵循命名约定。

如果有人对为什么它不适用于评级有很好的解释，我仍然希望听到它，以便能够避免将来出现类似情况。

# c# - 通过 C# 中的 PutBlockList 方法上传到 blob 和 MD5 检查

> ID：13183400
> 
> 赞同：0
> 
> 时间：2012-11-01T18:34:17.670
> 
> 标签：c#, azure, upload

我正在尝试使用 PutBlockList 方法将电影块上传到 C# 中的 Azure blob。我一直在编写测试代码，问题是当我使用 MD5 来保证数据的完整性并且我故意损坏数据时，导致 MD5 值不同，服务器不会拒绝上传并接受它，而在正确的代码它必须被拒绝。

```
 var upload = Take.CommitBlocks(shot,takeId,data);
 ....
 blob.Properties.ContentMD5 = md5;
 return Task.Factory.FromAsync(blob.BeginPutBlockList(ids,null,null),blob.EndPutBlockList); 
```

在我的测试方法中，我故意破坏了数据，但系统仍然接受数据。我怎样才能解决这个问题 ？在正确的代码中，我应该收到 Error400，但我什么也没得到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:15:26.120

请参阅[http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx)。Put Block List 不验证 MD5，但 MD5在每个 Put Block 调用上单独验证*。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-12T19:51:18.790

我迟到了几年，但据我所知，这个功能仍然没有内置到 API 和 SDK 中（Assembly Microsoft.WindowsAzure.Storage，Version=8.1.4.0）。也就是说，这是我的工作：

```
using Microsoft.WindowsAzure.Storage;
using Microsoft.WindowsAzure.Storage.Blob;
using System;
using System.IO;
using System.Threading.Tasks;

/// <summary>
/// Extension methods for <see cref="CloudBlockBlob"/>
/// </summary>
public static class CloudBlockBlobExtensions
{
    /// <summary>
    /// Attempts to open a stream to download a range, and if it fails with <see cref="StorageException"/> 
    /// then the message is compared to a string representation of the expected message if the MD5
    /// property does not match the property sent.
    /// </summary>
    /// <param name="instance">The instance of <see cref="CloudBlockBlob"/></param>
    /// <returns>Returns a false if the calculated MD5 does not match the existing property.</returns>
    /// <exception cref="ArgumentNullException">If <paramref name="instance"/> is null.</exception>
    /// <remarks>This is a hack, and if the message from storage API changes, then this will fail.</remarks>
    public static async Task<bool> IsValidContentMD5(this CloudBlockBlob instance)
    {
        if (instance == null)
            throw new ArgumentNullException(nameof(instance));

        try
        {
            using (var ms = new MemoryStream())
            {
                await instance.DownloadRangeToStreamAsync(ms, null, null);
            }
        }
        catch (StorageException ex)
        {
            return !ex.Message.Equals("Calculated MD5 does not match existing property", StringComparison.Ordinal);
        }

        return true;
    }
} 
```

# ipad - 在移动设备上使用 RichText

> ID：13183410
> 
> 赞同：0
> 
> 时间：2012-11-01T18:35:27.900
> 
> 标签：ipad, apache-flex, mobile, flex4.6

在 iPad 应用程序中，我需要查看脚注和数学符号的上标和下标以及特殊的医学/科学字符。[正如我在我的一个答案中概述的那样，](https://stackoverflow.com/questions/4601507/how-to-use-superscripting-in-flex/13164076#13164076)我正在使用富文本和流文本。但是，当超过富文本时，它会说：

> Adobe 不鼓励在定位配置文件时使用 RichText：mobileDevice。

为什么，确切地说，这是不鼓励的？除了 RichText 本身的限制之外，我应该期待哪些问题：

> RichText 是一种低级 UIComponent，它可以显示一行或多行格式丰富的文本和嵌入的图像。
> 
> 出于性能原因，它不支持滚动、选择、编辑、可点击的超链接或从 URL 加载的图像。如果您需要这些功能，请参阅 RichEditableText 类。
> 
> RichText 使用文本布局框架 (TLF) 库，该库又构建在 Flash Player 10 中的 Flash 文本引擎 (FTE) 之上。结合起来，它们使用高质量的国际排版提供富文本布局。”</p>

它会很慢吗？如果我让它在作为 iPad 应用程序在 Flex 4.6/Flash Builder 中运行的 PC 上正常运行，它会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:24:23.947

几周前我玩过这个，我注意到的主要问题是操作系统处理文本的方式。例如，如果您抛出一个可以滚动选择的 RichText 组件（没有测试它在 Scroller 中的行为），它将不会滚动。相反，您的手指将充当鼠标光标并选择文本位

如果您使用 RichEditableText（带有编辑功能的 RichText），则无法在选择时获得内置的系统选项，例如复制/粘贴/剪切/移动或放大镜。

此外，可能存在渲染问题。我没有想到任何例子，但我记得有些角色无法正确渲染，并且外来角色支持是命中注定的。

作为最后一个缺点（或者可能不是，取决于您对实现的感觉），它不使用 StageText（它使用系统文本渲染引擎，而不是 Flash 的）

您还应该查看[此 Adob​​e 页面](http://help.adobe.com/en_US/flex/mobileapps/WS19f279b149e7481c6a9f451212b87fe7e87-7fff.html)。它对移动设备上的文本以及哪些类是好类和哪些类是坏的提供了完整的解释。

# com - 在 JScript 中访问 COM 对象属性会导致 Permission Denied 错误

> ID：13183411
> 
> 赞同：1
> 
> 时间：2012-11-01T18:35:31.337
> 
> 标签：com, permission-denied, jscript

在我工作的地方，我们有一个围绕 IE 的专有 C++ 包装器，我们将它作为 COM 对象拉入 JScript 脚本中。

我们将这个对象的一些事件连接到一些 JScript 回调。特别是网页“DocumentLoad”事件有 4 个连接到它的回调函数。

每个回调中的代码都访问浏览器对象的属性——它们都访问位置 url（这是第一个访问的唯一内容）。

**我们的问题是**，在尝试访问此属性时，这些函数中会出现间歇性的“Permission Denied”（0x800A0046）错误（这几乎是所有这些函数中从该对象访问的第一件事）。它并不总是发生，它有时会在某些回调中发生，但在其他回调中不会发生——通常第一个或三个回调会正常工作，但随后会出错。

我不认为这是一个实际的权限被拒绝错误，我读过这通常发生在尝试访问没有正确权限的文件或尝试访问页面属性时在浏览器脚本中来自单独域的 iFrame。这些都不是正在发生的事情，但找不到其他可能是什么。我可以看到它可能与浏览器内权限被拒绝松散相关，但为什么会出现间歇性？

在记录权限被拒绝错误时，我在 Windows 事件日志（在 Windows 7 上）中发现了其他错误；它们如下：

*   0x80040155 - 接口未注册
*   0xC0000005 - 访问冲突

我的想法是，某个对象在短时间内以某种方式被破坏或某些东西（或者可能是用线程做的事情），这导致了错误。我不是 COM 人，所以我不知道如何测试/调试它。

在 Windows 7（32 位）和 Windows XP（32 位，SPK2？）上都发生了权限被拒绝错误

任何和所有的帮助表示赞赏！

# ruby-on-rails - 在 Rails link_to 中使用数组添加锚选项

> ID：13183412
> 
> 赞同：4
> 
> 时间：2012-11-01T18:35:40.827
> 
> 标签：ruby-on-rails, anchor, erb, link-to

我正在使用一个数组为我的 rails link_to 标签生成路径，但似乎无法弄清楚如何添加锚选项。这是我的 link_to 标签：

```
<%= link_to pluralize(post.comments.count, 'comment'), [post.postable, post] %>

<%= link_to "Leave a comment", [post.postable, post] %> 
```

由于我对帖子使用多态关联（并且它们是嵌套路由），因此我不能简单地使用由 routes.rb 文件中的资源助手生成的路径。

以前，我能够在自动生成的路径上使用锚选项，因为我没有使用与此模型的多态关联。这就是它的样子：

```
<%= link_to pluralize(post.comments.count, 'comment'), project_post_path(@project, post, {anchor: 'comments'}) %>

<%= link_to "Leave a comment", project_post_path(@project, post, {anchor: 'new-comment'}) %> 
```

关于在使用数组生成 url 时如何将锚标记返回到 link_to 标记的任何提示？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T15:18:45.417

您可以致电[`polymorphic_path`](http://api.rubyonrails.org/classes/ActionDispatch/Routing/PolymorphicRoutes.html#method-i-polymorphic_path)：

```
<%= link_to pluralize(post.comments.count, 'comment'), polymorphic_path([post.postable, post], anchor: 'comments') %>

<%= link_to "Leave a comment", polymorphic_path([post.postable, post], anchor: 'new-comment') %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:40:46.147

试试这个：

```
<%= link_to "Leave a comment", [post.postable, post], :anchor=> 'new-comment' %> 
```

# objective-c - 在没有 .xib 文件的 viewDidLoad 之后立即打开 ViewController

> ID：13183413
> 
> 赞同：0
> 
> 时间：2012-11-01T18:35:44.040
> 
> 标签：objective-c, xcode, cocoa, storyboard, viewcontroller

据我所知，我正在使用 Storyboards 没有 xib 文件。我想要做的是：当应用程序启动时，我想检查过去是否有任何内容写入数据库，如果没有，则打开一个视图，这不是标准视图。（因为如果数据库不为空，则应打开另一个视图，因为它是标准视图。）

到目前为止我尝试过的：（在 viewDidLoad / viewDidAppear 中）

```
ViewController *vs = [Viewcontroller new];
[self presentViewController:vs animated:YES completion:nil]; 
```

这会导致黑屏。什么都没有发生，它只是保持黑色。接下来我尝试执行 segue，但这会导致视图一次又一次地打开。

有没有一种通用/标准的方法来做到这一点？

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:57:35.743

在这种情况下，您可以从 Storyboard 实例中实例化 UIViewController 实例：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"YourStoryboard" bundle:nil];
UIViewController *newController = [storyboard instantiateInitialViewController]; 
```

这假设您将从该 StoryBoard 实例中的初始视图控制器开始。

您可以将此与条件配对以执行以下操作：

```
UIViewController *newViewController = nil;
if([self databaseHasNewInformation])
{

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"NewDataStoryboard" bundle:nil];
    newController = [storyboard instantiateInitialViewController];
}
else
{
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"NoNewDataStoryboard" bundle:nil];
    newController = [storyboard instantiateInitialViewController];
}

// Present New View Controller (this example assumes a navigation controller)
[self.navigationController pushViewController:newController animated:YES]; 
```

如果您想实例化一个不是 StoryBoard 中初始视图控制器的视图控制器，您可以考虑利用另一个实例 -`(id)instantiateViewControllerWithIdentifier:(NSString *)identifier`而不是调用`instantiateInitialViewController`

# c - 如何在C中并行填充数组

> ID：13183414
> 
> 赞同：-2
> 
> 时间：2012-11-01T18:35:50.810
> 
> 标签：c, arrays, parallel-processing, fill

我需要一种算法，它可以在 log(n) 时间内并行填充具有相同值的数组（大小为 n）。这意味着天真的解决方案`for(i=0;i<=n-1;i++)` `T[i] = 10`是不够的，因为它需要`O(n)`时间，我需要一些可以花费的东西`O(log(n))`。我提到这将在 PARALLEL 中完成，这一点非常重要。我在考虑依赖，但我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:59:48.687

像这个简单的循环一样，可以有多种方式让自己感到困惑

```
for (i = 0; i <= (SIZE / 2); i++) {
    arr[i]=10;
    arr[SIZE-(i+1)]=10;
} 
```

这只是让你觉得它是 o(n/2) 但实际上你必须将值`n`时间写入内存。因此，无论您采用哪种方式，您最终都会执行分配操作`n`时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T00:29:24.707

我将忽略其他人已经解决的将其称为“O（log n）”的问题，而是想概述一个解决方案。如果您不熟悉[openMP](https://computing.llnl.gov/tutorials/openMP/)，它是一个用于共享内存计算的并行框架。

```
#pragma omp parallel for shared(T)
for(int i = 0; i < n; i++) T[i] = 10; 
```

如果你有 (n / log(n)) 处理器，那么你仍然会做 O(n) 工作，但每个处理器只需要做 O(n / (n / log(n))) 工作，或者 O （日志 n）。这大概就是你想要的。

这对这个问题的可行性意味着什么？

```
n     #num procs
4     2
16    4
256   32
65536 4096 
```

我们可以得出结论，解决这个问题*可能**只*对包含至少 16 个元素和最多 256 个元素的数组有意义（如果这个问题对您如此重要，您可以将其推高到 512，甚至 1024。）

迁移到分布式机器是另一回事——收集数组的通信成本将大大超过初始化中的并行性，因为所需的节点数量以 O(n / log(n)) 的速度增长。您需要在创建数组的节点上进行所有计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:54:10.970

如果您使用 n 个处理器运行 n 个线程，那么它`O(1)* n = O(n)`总共仍然是处理器（并且性能会很糟糕）。

如果您运行线程`t`（`t=n/factor`但关键是它仍然是`O(n)`。

`O(logn)`仅当您可以基于某些条件（例如，排序数组的二进制搜索）跳过某些操作时，才能完成某些操作。为了初始化数组中的 n 个元素，您必须访问所有 n 个元素。只是你想要的是不可能的。

# python - 了解表中是否存在记录的好方法

> ID：13183416
> 
> 赞同：0
> 
> 时间：2012-11-01T18:36:12.220
> 
> 标签：python, django

我有下一个模型：

```
class People(models.Model):
    name = models.CharField(max_length=100)
    lastname = models.CharField(max_length=100) 
```

在views.py

- 当我尝试这个时：

```
 if People.objects.get(id=my_id):
        o=People.objects.get(id=my_id)
        oh=o.name
    else:
        send_notification_to_add_that_id(my_id) 
```

我明白了：

```
People query matching does not exist. 
```

我想要的是`my_id`在我的`People`表中查询，如果与该记录匹配，则获取`id`，否则触发该`send_notification_to_add_that_id`方法。当第一个“如果条件”没有这样的记录时，我遇到了错误。如何绕过这个问题？知道表中是否存在记录的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:38:00.667

它[抛出异常](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-a-single-object-with-get)：

> 如果没有与查询匹配的结果，get() 将引发 DoesNotExist 异常。

所以你需要处理它：

```
try:
    People.objects.get(id=my_id)
except People.DoesNotExist:
    send_notification_to_add_that_id(my_id) 
```

或者你可以做

```
people = People.objects.filter(id=my_id)
if people.exists():
    person = people[0] 
```

`filter`如果没有结果，as不会引发异常 - 它只是返回一个空值`QuerySet`，但这会冒返回多个对象的风险，因此它不像第一个示例那样有意义。

顺便说一句，调用你的模型更有意义，`Person`而不是`People`因为那是你的模型所代表的，或者在数据库的情况下，你的表中的每一行。

# gem - PhusionPassenger::Rack::ApplicationSpawner 中的异常 LoadError（没有要加载的此类文件——捆绑器）

> ID：13183418
> 
> 赞同：4
> 
> 时间：2012-11-01T18:36:13.583
> 
> 标签：gem, bundler, passenger

当我浏览到在 Redhat 上运行的 Ruby On Rails 应用程序时，我收到此错误消息。我怀疑是路径问题，但我无法弄清楚。我阅读了这个论坛中针对类似问题提出的解决方案，但其中大多数是针对 MacOS 的

我尝试安装bundler，它似乎工作，但问题仍然存在

```
user1@company.com [~]# gem install bundler
Successfully installed bundler-1.2.1
1 gem installed
Installing ri documentation for bundler-1.2.1...
Installing RDoc documentation for bundler-1.2.1...
user1@company.com [~]# 
user1@company.com [~]# bundle install
ERROR: Gem bundler is not installed, run `gem install bundler` first.
user1@company.com [~]# 
```

这是我的环境

```
user1@company.com [~]# gem list -d bundler

*** REMOTE GEMS ***

bundler (1.2.1)
Authors: AndrÃƒÂ© Arko, Terence Lee, Carl Lerche, Yehuda Katz
Rubyforge: http://rubyforge.org/projects/bundler
Homepage: http://gembundler.com

The best way to manage your application's dependencies
<snip>

user1@company.com [~]# gem env
RubyGems Environment:
- RUBYGEMS VERSION: 1.8.24
- RUBY VERSION: 1.9.3 (2012-10-12 patchlevel 286) [x86_64-linux]
- INSTALLATION DIRECTORY: /home3/user1/ruby/gems
- RUBY EXECUTABLE: /home3/user1/.rvm/rubies/ruby-1.9.3-p286/bin/ruby
- EXECUTABLE DIRECTORY: /home3/user1/ruby/gems/bin
- RUBYGEMS PLATFORMS:
- ruby
- x86_64-linux
- GEM PATHS:
 - /home3/user1/ruby/gems
- GEM CONFIGURATION:
 - :update_sources => true
 - :verbose => true
 - :benchmark => false
 - :backtrace => false
 - :bulk_threshold => 1000
 - "gem" => "--remote --gen-rdoc --run-tests"
 - "gemhome" => "/home3/user1/ruby/gems"
 - "gempath" => []
 - "rdoc" => "--inline-source --line-numbers"
- REMOTE SOURCES:
 - http://rubygems.org/
user1@company.com [~]#

user1@company.com [~]# whereis ruby
ruby: /bin/ruby /bin/ruby.orig /usr/bin/ruby /usr/bin/ruby.orig /sbin/ruby /sbin/ruby.orig /usr/sbin/ruby /usr/sbin/ruby.orig /lib64/ruby /usr/lib64/ruby /usr/local/bin/ruby /usr/local/bin/ruby.orig /usr/share/man/man1/ruby.1.gz
user1@company.com [~]# whereis rake
rake: /bin/rake /usr/bin/rake /sbin/rake /usr/sbin/rake /usr/local/bin/rake

user1@company.com [~]# which ruby
/home3/user1/.rvm/rubies/ruby-1.9.3-p286/bin/ruby

user1@company.com [~]# which gem

user1@company.com [~]# which rake
/home3/user1/.rvm/rubies/ruby-1.9.3-p286/bin/rake
user1@company.com [~]#

user1@company.com [~]# rvm list

rvm rubies

ruby-1.9.3-p286 [ x86_64 ]

# => - current
# =* - current && default  
#  * - default

user1@company.com [~]# 

user1@company.com [~]# echo $PATH
/usr/local/jdk/bin:/home3/user1/.rvm/gems/ruby-1.9.3-p286/bin:/home3/user1/.rvm/gems/ruby-1.9.3-p286@global/bin:/home3/user1/.rvm/rubies/ruby-1.9.3-p286/bin:/home3/user1/.rvm/bin:/home3/user1/perl5/bin:/usr/lib64/qt-3.3/bin:/ramdisk/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11R6/bin:/home3/user1/ruby/gems/bin:/home3/user1/ruby/gems:/home3/user1/bin
user1@company.com [~]# echo $GEM_PATH
/home3/user1/ruby/gems:/home3/user1/.rvm/gems/ruby-1.9.3-p286:/home3/user1/.rvm/rubies/ruby-1.9.3-p286/bin/ruby:/home3/user1/.rvm/src/rubygems-1.8.24/setup.rb:/usr/lib64/ruby/gems/1.8:/home3/user1/ruby/gems:/home3/user1/.rvm/gems/ruby-1.9.3-p286:/home3/user1/.rvm/rubies/ruby-1.9.3-p286/bin/ruby:/home3/user1/.rvm/src/rubygems-1.8.24/setup.rb/ruby/gems
user1@company.com [~]# echo $HOME
/home3/user1
user1@company.com [~]# echo $GEM_HOME
/home3/user1/ruby/gems:/home3/user1/.rvm/gems/ruby-1.9.3-p286:/home3/user1/.rvm/rubies/ruby-1.9.3-p286/bin/ruby:/home3/user1/.rvm/src/rubygems-1.8.24/setup.rb
user1@company.com [~]# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-27T05:23:06.063

这很可能是因为您在`PATH`安装位置之前的位置有一个存根二进制文件`/home3/user1/ruby/gems/bin`。

如果您将`/home3/user1/ruby/gems/bin`（或任何`gem env`打印的`EXECUTABLE DIRECTORY`）移动到您的前面`PATH`，它应该可以工作。

# algorithm - 表上的多变量最大化

> ID：13183419
> 
> 赞同：0
> 
> 时间：2012-11-01T18:36:19.780
> 
> 标签：algorithm, pseudocode, max, minimum

我正在寻找一种简单的实现算法，该算法可以找到在某一列上具有最大值的表行。然后，它应该在该特定列上找到值接近最大值的所有行（这两个步骤可以组合吗？）。然后，在选定的行中，我需要找到在另一列上具有最小值的行。

奖励：如果有多个这样的条目，我需要在另一列上找到具有最小值的行。

是的，我知道使用 SQL(ite) 很容易做到这一点，但我不想浪费时间将文本文件中的数据解析到数据库表中......

我对如何做到这一点的简单想法感兴趣（伪代码很好），现在，我只能想到一些相当复杂的事情：

*   遍历所有行并找到最大值
*   遍历所有行并在列表中插入“接近”最大值的行
*   在新的行列表中找到最小值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:44:09.723

其实你在做正确的事。除非您的行值**已经排序**，否则您无法避免在第 1 步中遍历所有值，因此您最终会花`O(R)`时间在那里，`R`行数在哪里。

对于第二步，它的成本也`O(R)`不会降低算法的复杂性。

如果我们认为“接近最大值”的值的数量是`O(1)`关于 的`R`，那么第三步是`O(C)`其中`C`的列数。**如果您的值未排序**，则无法做得比这更好，因为您需要测试所有值才能找到最小值。

您的算法具有**您将获得的最佳复杂性**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:49:22.847

我对此的看法：

*   按行对第一列的表格进行排序
*   最大值是此排序列中的第一个或最后一个值
*   所有接近的值都尽可能接近排序列中的最大值
*   提取那些行
*   在第二列再次排序
*   像上面一样找到最小值......
*   如果有多个这样的条目，请使用第三列再次排序...

其速度由使用的排序算法定义。

# css - 如何更改焦点上的占位符颜色？

> ID：13183421
> 
> 赞同：71
> 
> 时间：2012-11-01T18:36:32.053
> 
> 标签：css, input, focus, placeholder

聚焦输入字段时如何更改占位符的颜色？我使用这个 css 来设置默认颜色，但是如何在焦点上更改它？

```
::placeholder { color: blue; }

::-webkit-input-placeholder { color: blue; }

/* Firefox < 19 */
:-moz-placeholder { color: blue; }

/* Firefox > 19 */
::-moz-placeholder { color: blue; }

/* Internet Explorer 10 */
:-ms-input-placeholder { color: blue; } 
```

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-11-01T18:47:12.017

试试这个，这应该工作：

```
input::-webkit-input-placeholder {
    color: #999;
}
input:focus::-webkit-input-placeholder {
    color: red;
}

/* Firefox < 19 */
input:-moz-placeholder {
    color: #999;
}
input:focus:-moz-placeholder {
    color: red;
}

/* Firefox > 19 */
input::-moz-placeholder {
    color: #999;
}
input:focus::-moz-placeholder {
    color: red;
}

/* Internet Explorer 10 */
input:-ms-input-placeholder {
    color: #999;
}
input:focus:-ms-input-placeholder {
    color: red;
} 
```

这是一个例子：http: [//jsfiddle.net/XDutj/27/](http://jsfiddle.net/XDutj/27/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-09-18T17:32:14.047

这对我有用：

```
input:focus::placeholder {
  color: blue;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-01T20:06:55.473

除了 Pranav 的回答，我还改进了与 textarea 兼容的代码：

```
::-webkit-input-placeholder { color: #999; }
:-moz-placeholder { color: #999; }

:focus::-webkit-input-placeholder { color: #ccc; }
:focus:-moz-placeholder { color: #ccc; }​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-02T16:15:05.913

以下对我有用：

```
input:focus::-webkit-input-placeholder
{
    color: red;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T18:37:52.583

试试这个：

HTML

```
<input type='text' placeholder='Enter text' /> 
```

CSS

```
input[placeholder]:focus { color: red; } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T18:56:44.867

我用 JQuery 找到了这个解决方案：

```
 $('input[type="text"]').each(function(){

    $(this).focus(function(){
      $(this).addClass('input-focus');
    });

    $(this).blur(function(){
      $(this).removeClass('input-focus');
    });

  }); 
```

用这个CSS：

```
.input-focus::-webkit-input-placeholder { color: #f00; }    
.input-focus:-moz-placeholder { color: #f00; }
.input-focus:-ms-input-placeholder { color: #f00; } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-02T00:56:49.053

使用星号`*`选择所有内容

```
*::-webkit-input-placeholder { color: #999; }

*:-moz-placeholder { color: #999; }

*::-moz-placeholder { color: #999; }

*:-ms-input-placeholder { color: #999; } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2022-01-11T16:25:39.737

完整和更新 (2021) 示例：

```
input::placeholder {
  color: blue;
}

input:focus::placeholder {
  color: green;
}
```

```
<label for="city">City:</label><br>
<input type="text" id="city" name="city" placeholder="your favorite city">
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-23T21:23:12.387

从 Firefox 19 开始：将表单元素与 placeholder 属性匹配的 :-moz-placeholder 伪类已被删除，而添加了 ::-moz-placeholder 伪元素。

```
input:focus::-moz-placeholder { color: transparent; } 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-10-26T12:17:53.593

您可以创建一个材料设计动画占位符，当输入字段聚焦时，该占位符会在顶部收缩。

```
<div class="field">
 <input type="text" name="user" required><br>
 <label>Enter Username</label>
 </div> 
```

基本上，标签字段将充当占位符。我们只能使用 css 来做到这一点。在这里解释[http://www.voidtricks.com/create-material-design-animated-placeholder/](http://www.voidtricks.com/create-material-design-animated-placeholder/)

# php - 使用 jQuery 表单的多个 AJAX 表单

> ID：13183426
> 
> 赞同：0
> 
> 时间：2012-11-01T18:36:56.580
> 
> 标签：php, javascript, ajax, magento, jquery-forms-plugin

目前，我正在使用 jQuery Form 插件来处理 Magento 产品列表中的多个 AJAX 表单`.ajaxForm({});`。现在，我使用的解决方案有效，但它非常笨重，很想知道是否有更好的方法来解决这个问题。

为简洁起见，我将稍微缩短我的代码：

```
<?php foreach ($_productCollection as $_product): ?>
<form action="<?php echo $this->getSubmitUrl($_product) ?>" method="post" class="derp" id="derp-<?php echo $_iterator; ?>">
    <div class="quanitybox">
        <label for="qty"><?php echo $this->__('Quantity:') ?></label>
        <input type="button" class="quantity_box_button_down" />         
        <input type="text" name="qty" maxlength="12" value="1" title="<?php echo $this->__('Qty') ?>" class="input-text qty" />
        <input type="button" class="quantity_box_button_up" />
    </div>
    <button type="submit" title="Add to Cart" class="button btn-cart" ><span><span>Add to Cart</span></span></button>
 </form>

 <script type="text/javascript">
    var productAddToCartForm = new VarienForm('derp-<?php echo $_iterator ?>');

    jQuery('#derp-<?php echo $_iterator ?>').ajaxForm({
                url: jQuery('#derp-<?php echo $_iterator ?>').attr('action').replace("checkout/cart","ajax/index"),
                data: {'isAjax':1},
                dataType: 'json',
                beforeSubmit: function(){    
                    if(productAddToCartForm.validator.validate()){
                        windowOver.show();
                        windowBox.show().css({
                            backgroundImage: "url('<?php echo $this->getSkinUrl('images/loading.gif')?>')"
                        });                    
                    }else{
                        return false;
                    }
                },
                error: function(data){
                    windowBox.css({
                          backgroundImage: 'none'
                    }).html('<?php echo $this->__('Error') ?>');                       
                    windowOver.one('click',function(){
                        hidewindow(windowBox,windowOver);                    
                    });        

                    jQuery('#hidewindow').click(function(){
                        hidewindow(windowBox,windowOver);                    
                    });
                },
                success : function(data,statusText,xhr ){
                    if(data.status == 'SUCCESS'){
                        if(jQuery('.block-cart')){
                            jQuery('.block-cart').replaceWith(data.sidebar);
                        }
                        if(jQuery('.header .block-cart-header')){
                            jQuery('.header .block-cart-header').replaceWith(data.topcart);
                        }     
                        msgHtml = '<div class="added-content"><div style="float:left;">' + productImg + '</div><em>' + titleForBox<?php echo $_iterator ?> + '</em> <?php echo $this->__('was successfully added to your shopping cart.') ?><div style="clear:both;"></div><a id="hidewindow" href="javascript:void(0);"><?php echo $this->__('Continue shopping') ?></a>&nbsp;<a href="<?php echo $this->getUrl('checkout/cart')?>"><?php echo $this->__('View cart & checkout') ?></a></div>';             
                    }else{
                        msgHtml = '<div class="added-content"><p class="error-msg" style="margin-bottom:15px;">' + data.message + '</p><a id="hidewindow" href="javascript:void(0);"><?php echo $this->__('Continue shopping') ?></a>&nbsp;<a href="<?php echo $this->getUrl('checkout/cart')?>"><?php echo $this->__('View cart & checkout') ?></a></div>';
                    }                      

                    windowBox.css({
                          backgroundImage: 'none'
                    }).html(msgHtml);                      
                    windowOver.one('click',function(){
                        hidewindow(windowBox,windowOver);                    
                    });        

                    jQuery('#hidewindow').click(function(){
                        hidewindow(windowBox,windowOver);                    
                    });    
                }
            });
</script>
<?php endforeach; ?> 
```

这段代码的不幸部分是我在每个产品的底部生成了一堆重复的 JavaScript。

我真的没有看到解决这个问题的方法，因为我需要`new VarienForm()`为每个产品生成一个验证，它只需要一个表单 ID（除非我弄错了）。

我正在使用内置的 执行此操作`$_iterator`，每个`foreach()`循环递增（即：derp-1、derp-2、derp-3），并为每个表单添加递增的 id。

我知道我可以使用类选择器来定位每个表单，例如`jQuery('.derp').ajaxForm({});`但是我仍然需要能够将其与`VarienForm`.

我试图`ajaxForm({});`根据提交按钮即时生成，`.each( function({ jQuery(this).on('click', function({ //AJAX STUFF HERE }) ); }) );`但这没有用。

是否有更强大的解决方案可以独立针对每个表单，生成一个`VarienForm`，获取我需要的任何表单数据，利用该`ajaxForm({})`方法并将它们保持在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:15:30.617

我将创建一个您在页面上声明一次的函数。它将通过在每个 PHP 循环迭代中调用它，通过传递一些特定于迭代的参数来使用（正如您所指出的，很多 Javascript 都是重复的）。例如，函数可以是：

```
function setupForm(form, iterator) {
    jQuery("#derp-" + iterator).ajaxForm({

    });
} 
```

并将打印迭代器的 PHP 代码的每个实例替换为 .js 的 Javascript 连接`iterator`。

您可以将 PHP 循环中的脚本替换为以下内容：

```
var productAddToCartForm = new VarienForm('derp-<?php echo $_iterator ?>');
setupForm(productAddToCartForm, '<?php echo $_iterator ?>'); 
```

当然，您必须向`setupForm`特定于循环的函数添加更多参数（我将更多地查看代码以尝试确定它们都是什么）。这样，您就可以使所有 PHP 循环项打印一次（在`setupForm`函数调用中），并在`setupForm`函数内部动态使用它们。

**UDPATE**：

我浏览了一遍，希望找到所有需要替换的东西，所以我将在这个小简介之后粘贴代码。我关心的是这些变量是什么：

```
windowBox
windowOver
productImg
titleForBox 
```

如果它们是全球性的，那么这个新的更新应该没问题。如果他们在其他情况下（以某种方式），那么这可能不起作用。

无论如何，这就是我认为它可能最终的结果：

```
// Use this in your PHP loop
var productAddToCartForm = new VarienForm('derp-<?php echo $_iterator ?>');
setupForm(productAddToCartForm, "<?php echo $_iterator ?>", "<?php echo $this->getSkinUrl('images/loading.gif')?>", "<?php echo $this->__('Error') ?>", "<?php echo $this->__('was successfully added to your shopping cart.') ?>", "<?php echo $this->__('Continue shopping') ?>", "<?php echo $this->getUrl('checkout/cart')?>", "<?php echo $this->__('View cart & checkout') ?>");

// Use this one time in your page
function setupForm(form, iterator, skin_url, an_error, successful_text, continue_text, checkout_url, checkout_text) {
    var the_form = jQuery("#derp-"+iterator);  // Added this (obviously)

    the_form.ajaxForm({  // Changed this line
        url: the_form.attr('action').replace("checkout/cart","ajax/index"),  // Changed this line
        data: {'isAjax':1},
        dataType: 'json',
        beforeSubmit: function(){    
            if(form.validator.validate()){  // Changed this line
                windowOver.show();
                windowBox.show().css({
                    backgroundImage: "url('" + skin_url + "')"  // Changed this line
                });                    
            }else{
                return false;
            }
        },
        error: function(data){
            windowBox.css({
                  backgroundImage: 'none'
            }).html(an_error);  // Changed this line

            windowOver.one('click',function(){
                hidewindow(windowBox,windowOver);
            });

            jQuery('#hidewindow').click(function(){
                hidewindow(windowBox,windowOver);                    
            });
        },
        success : function(data,statusText,xhr){
            var msgHtml = "";  // Added this line
            if(data.status == 'SUCCESS'){
                if(jQuery('.block-cart')){
                    jQuery('.block-cart').replaceWith(data.sidebar);
                }
                if(jQuery('.header .block-cart-header')){
                    jQuery('.header .block-cart-header').replaceWith(data.topcart);
                }
                msgHtml = '<div class="added-content"><div style="float:left;">' + productImg + '</div><em>' + titleForBox + iterator + '</em> ' + successful_text + '<div style="clear:both;"></div><a id="hidewindow" href="javascript:void(0);">' + continue_text + '</a>&nbsp;<a href="' + checkout_url + '">' + checkout_text + '</a></div>';  // Changed this line
            }else{
                msgHtml = '<div class="added-content"><p class="error-msg" style="margin-bottom:15px;">' + data.message + '</p><a id="hidewindow" href="javascript:void(0);"><?php echo $this->__('Continue shopping') ?></a>&nbsp;<a href="' + checkout_url + '">' + checkout_text + '</a></div>';  // Changed this line
            }

            windowBox.css({
                  backgroundImage: 'none'
            }).html(msgHtml);
            windowOver.one('click',function(){
                hidewindow(windowBox,windowOver);
            });

            jQuery('#hidewindow').click(function(){
                hidewindow(windowBox,windowOver);
            });
        }
    });
} 
```

主要看评论，看看我在哪里对你的实际代码进行了更改。

# javascript - 从隐藏输入中的值输出 JSON

> ID：13183427
> 
> 赞同：1
> 
> 时间：2012-11-01T18:36:59.980
> 
> 标签：javascript, jquery, arrays, json

我试图创建一个这样的 JSON 对象：

```
bta.addConversion({ "order_id": "", "date": "", "items": [
        { "item_id":"item1", "desc":"description", "amount":"$123.33", "quantity":"1" },
        { "item_id":"item2", "desc":"description 2", "amount":"$10.25", "quantity":"1" }
    ]}); 
```

使用这些值：

```
<input id="InvItemId[0]" name="sku" value="M0215508" type="hidden">
<input id="InvItemname[0]" name="CommerceItem" value="4 Seasons Wine Club Whites (RO)" type="hidden">
<input id="InvItemPrice[0]" name="Sku" value="129.95" type="hidden">
<input id="InvItemQty[0]" name="CommerceItem" value="1" type="hidden">
<input id="InvItemId[1]" name="sku" value="C0429210" type="hidden">
<input id="InvItemname[1]" name="CommerceItem" value="Laetitia Vineyard Select Pinot Noir" type="hidden">
<input id="InvItemPrice[1]" name="Sku" value="273.99" type="hidden">
<input id="InvItemQty[1]" name="CommerceItem" value="1" type="hidden">
<input id="InvItemId[2]" name="sku" value="M0249908" type="hidden">
<input id="InvItemname[2]" name="CommerceItem" value="Top-Value American Reds" type="hidden">
<input id="InvItemPrice[2]" name="Sku" value="199.99" type="hidden">
<input id="InvItemQty[2]" name="CommerceItem" value="1" type="hidden">
<input id="InvItemSize" name="/atg/userprofiling/Profile" value="3" type="hidden"> 
```

使用 JavaScript，我已经走到了这一步——但感觉有点被破解了。所以想知道是否有更好的方法来做到这一点：

```
jQuery(document).ready(function() {

        var invItemId = $('#InvID').val();
        var invItemsize = $('#InvItemSize').val();
        var InvItems='';
        var InvItemPrices='';
        var InvQtys='';
        var InvCats='';

        for(var itemCount=0;itemCount<invItemsize;itemCount++){
            var InvItem =document.getElementById("InvItemId["+itemCount+"]").value ;
            var ItemPrice = document.getElementById("InvItemPrice["+itemCount+"]").value ;
            var ItemQty = document.getElementById("InvItemQty["+itemCount+"]").value ;
            var InvItemName = document.getElementById("InvItemname["+itemCount+"]").value ;

            var itemsList='{"item_id":"'+InvItem+'","desc:""'+InvItemName+'", "amount:"'+ItemPrice+'", "quantity":"'+ItemQty+'"},';
            console.log(itemsList);

        }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:42:17.793

这些输入元素是否在表单中？如果是这样，（他们可能应该是）您可以使用 jQuery 的表单序列化功能。

[http://api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/) 定位表单

```
$('#my-form').serializeArray() 
```

然后遍历数组以生成您需要的确切对象。

# php - jquery ajax将json发送到php错误

> ID：13183428
> 
> 赞同：2
> 
> 时间：2012-11-01T18:37:00.650
> 
> 标签：php, jquery, ajax, json

好的，这是我的 ajax 请求：

```
$("#scoreForm").submit(function(e){
    e.preventDefault();
    var nickName = $('#nickName').val();
    var gameScore = parseInt($('#gameScore').text());
    var result = {  'result' : '{ "nick":"'+nickName+'", "score":'+gameScore+' }' };
    //var result = { "nick":nickName, "score":gameScore };
    $.ajax({
        url: "http://localhost:8888/snake/addScore.php",
        type: "POST",
        data: result,
        //dataType: "jsonp",
        success: function(data){
            alert("siker");

        },
        error: function(jqXHR, textStatus, errorThrown) {
            alert("bukta " + textStatus);
            //console.log(data);
        }
    });
    return false;
}); 
```

和我的php进程代码：

```
$json_decoded = json_decode($_POST['result'],true);
//$nick = $_GET['nick'];
//$score = $_GET['score'];

$mysqli = new mysqli("localhost", "root", "root", "snake",8889);
//$mysqli->query("INSERT INTO scores(nickName,score) VALUES('".$nick."', ".$score.")");
$mysqli->query("INSERT INTO scores(nickName,score) VALUES('".$json_decoded['nick']."', ".$json_decoded['score'].")");

echo "true"; 
```

现在我将数据插入数据库，但 ajax 仍然触发错误事件。我读到，如果我将 dataType 设置为 jsonp，它将进入低谷，但随后出现解析错误，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:40:20.047

当您在 php 脚本中访问 $_POST 变量时，您需要以它们与 JSON 对象打包的方式来引用它们：

```
$_POST['nick']
$_POST['score'] 
```

如果您想将项目称为 $_POST['result'] 并使用您的 json 解码方法，您需要以这种方式打包它：

```
var result = {  result : { "nick":nickName, "score":gameScore } }; 
```

# c++ - C ++中的链接类？

> ID：13183429
> 
> 赞同：0
> 
> 时间：2012-11-01T18:37:05.203
> 
> 标签：c++, class, linked-list

众所周知：可以使用 C/C++ 创建链接列表以使程序动态化。但是现在，我正在用 C++ 编写一个“链接类”。我的父类“游戏”应该有可变数量的元素。每个元素都是一个类。所以我编程了这个：

```
class GAME : public LEVEL
{  private:
     ELEMENT *startPointer;
   public:
     GAME()
     {    startPointer=NULL;
     }
     initGame()
     {    p=aStartPointer;
          while(p!=NULL);//This loop is based on a linked list, so its dynamic
          {   startPointer=new ELEMENT(startPointer);
              p=p->next;
          }
     }
}

class ELEMENT
{   private:
        ELEMENT *next;
    public:
        ELEMENT(ELEMENT* nextPointer)
        {    next=nextPointer;
        }
} 
```

我的问题：我以前从未听说过链接类，我不确定是否应该使用它。
专业程序员是否使用这样的方法（它有用吗？），还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:39:35.737

> > 有没有更好的方法来做到这一点？

是的。这是一个：

```
class GAME : public LEVEL
{  private:
     std::vector<ELEMENT> elements;
   ...
}; 
```

使用标准库容器：

*   一般来说，使用`std::vector<>`.
*   如果您需要唯一性，请使用`std::set<>`
*   如果您需要将元素与键关联，请使用`std::map<>`
*   如果您需要非常频繁或非常快速地从容器中插入或删除项目，请使用`std::list<>`或`std::set<>`
*   还有其他考虑。查阅一本好书，了解如何有效地使用标准容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:41:12.783

如果您尝试创建一个可以包含*不同类型*对象实例的容器（即非同质容器），则有几种方法（通常涉及同质化容器）。您可以设置一个公共基类，以便您可以将句柄存储到基类。另一种选择是歧视性工会。

正如其他帖子所提到的，容器本身可能应该是一个 STL 容器，除非您有充分的理由使用其他东西（即使那样，“更标准”越好；自制不是一个好主意，除非它是仅用于教育目的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:42:15.763

看起来您正在尝试以不同的名称实现链接列表。更好的设计是使用列表或向量作为类的成员来存储`ELEMENTS`而不是让它成为`GAME`类的基本功能。

这允许您在类容器对象和您的应用程序类之间进行分离。

# java - 如何在 gradle 任务中通过 scp 复制目录？

> ID：13183433
> 
> 赞同：12
> 
> 时间：2012-11-01T18:37:19.717
> 
> 标签：java, groovy, gradle, scp

使用 Gradle 通过 scp 复制一堆文件的干净优雅的方法是什么？

我目前看到的两种方式是：

*   使用 Apache Wagon，如下所述：http: [//markmail.org/message/2tmtaffayhq25g4s](http://markmail.org/message/2tmtaffayhq25g4s)
*   使用 Exec 任务通过命令行执行 scp

有没有更好（更明显）的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-06-14T18:54:11.360

在最初的问题发生几年后，我喜欢[Gradle SSH Plugin](https://gradle-ssh-plugin.github.io/)。[其广泛文档](https://gradle-ssh-plugin.github.io/docs/)的一小段引述：

> 我们可以在会话关闭中描述 SSH 操作。
> 
> ```
> session(remotes.web01) {
>   // Execute a command
>   def result = execute 'uptime'
> 
>   // Any Gradle methods or properties are available in a session closure
>   copy {
>     from "src/main/resources/example"
>     into "$buildDir/tmp"
>   }
> 
>   // Also Groovy methods or properties are available in a session closure
>   println result
> } 
> ```
> 
> 会话关闭中提供了以下方法。
> 
> *   `execute`- 执行命令。
> *   `executeBackground`- 在后台执行命令。
> *   `executeSudo`- 执行带有 sudo 支持的命令。
> *   `shell`- 执行一个外壳。
> *   `put`- 将文件或目录放入远程主机。
> *   `get`- 从远程主机获取文件或目录。

...并允许，例如：

```
task deploy(dependsOn: war) << {
  ssh.run {
    session(remotes.staging) {
      put from: war.archivePath.path, into: '/webapps'
      execute 'sudo service tomcat restart'
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-03T01:54:05.333

从我使用的一个项目到 SCP 文件到 EC2 服务器。jar 文件中有本地文件，它们是我项目的一部分，我忘记了从哪里得到它们。可能有一种更简洁的方式来完成这一切，但我喜欢在我的构建脚本中非常明确。

```
configurations {
  sshAntTask
}

dependencies {
  sshAntTask fileTree(dir:'buildSrc/lib', include:'jsch*.jar')
  sshAntTask fileTree(dir:'buildSrc/lib', include:'ant-jsch*.jar')
}

ant.taskdef(
  name: 'scp',
  classname: 'org.apache.tools.ant.taskdefs.optional.ssh.Scp',
  classpath: configurations.sshAntTask.asPath)

task uploadDbServer() {
  doLast  {
    ant.scp(
      file: '...',
      todir: '...',
      keyfile: '...' )
  }
} 
```

# python - Python 用户定义的异常放置和捕获

> ID：13183441
> 
> 赞同：6
> 
> 时间：2012-11-01T18:38:03.753
> 
> 标签：python, exception-handling

我是 Python 新手，我不确定放置用户定义异常的最佳位置是什么，以及在哪里捕获它们。

例如，我有一个启动游戏的程序，当游戏停止时，会引发用户定义的异常（StopGame）。我应该从游戏外部捕获这个异常，因为游戏正在抛出这个异常。但是，异常是特定于游戏的，因此异常的定义应该在游戏模块（或者可能是游戏包？）中。

这是程序的简单布局：

**程序结构**：

```
__main__.py
game/
    __init__.py
    game.py 
```

***_* _main_ *_* .py**

```
import game

def main():
    g = game.Game()

    try:
        g.start()
    except game.StopGame:
        print '\nbye bye!'

if __name__ == '__main__':
    main() 
```

**游戏/ *_* _init_ *_* .py**

```
from game import Game
from game import StopGame 
```

**游戏/游戏.py**

```
class Game:

    def start(self):

        try:
            a = raw_input('do you want to play?\n')
            print 'cool'
        except (KeyboardInterrupt, EOFError):
            raise StopGame

        if a == 'no':
            raise StopGame
        else:
            print 'cool'

class StopGame(Exception):
    pass 
```

这段代码像这样工作得很好，我只是不确定这是要走的路。我发现有些令人失望的是，我应该使用此设置导入 game/_init _.py**中*****的*****每个异常。***否则我应该捕捉到这样的异常：*

 *```
except game.game.StopGame 
```

这看起来有点讨厌。我认为最好能够从_main_.py 中的变量'game' 中访问模块'game' 中**的*所有*属性**。然后我知道你可以把它放在游戏/ **_ *init* _** .py 中：

```
from game import * 
```

这将从 game/game.py 导入所有类，但我听说使用 * 进行导入是一种不好的做法。

所以，我的问题是，最好的方法是什么？也许我的整个设置是错误的，如果是这样，我想听听正确的设置是什么。

提前非常感谢！

BTW：如果你可能想知道为什么我在游戏包内有一个游戏模块：这个想法是这个包将包含更多与游戏相关的模块，game/game.py 只是整个游戏的发起者，也许我应该将该代码放入游戏/ **_ *init* _** .py 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T19:33:50.683

# 其他地方是怎么做的？

我认为回答您的问题的最佳方法是查看一个实际的 Python 包，看看它是如何构建的。我将以[优秀的 python-requests 包](https://github.com/kennethreitz/requests/tree/master/requests)为例。

这个模块是关于发出 HTTP 请求的。你的是关于玩游戏的。

基本 HTTP 请求功能在`requests/__init__.py`文件中导入，但在别处定义。这就是你正在做的事情，但“其他地方”可能有一个更好的名字。也许`game/core.py`会很合适。

异常在`requests/exceptions.py`文件中定义。对于一个相对较小的包来说，将所有异常放在一个地方通常是合适的。
请注意，异常也被导入`requests/__init__.py`！这使它们更容易导入其他可能需要捕获它们的包中！

最后，没有`from module import *`使用。实际添加所需的内容不会花费太多时间，因此您应该避免使用`*`.

* * *

# 在你的情况下你能做什么？

*   避免拥有`game/game.py`文件，调用它`game/core.py`或其他东西
*   对于一个小包，把你的异常放在一个`game/exceptions.py`文件中
*   在`game/__init__.py`中，从您的包中导入通常需要的内容：主类和异常。*

# ios - iOS5 自定义窗口旋转问题

> ID：13183446
> 
> 赞同：1
> 
> 时间：2012-11-01T18:38:30.633
> 
> 标签：ios, window, alert

因此，我正在我的 iOS 应用程序中创建并显示一个自定义窗口，因为我正在编写一个动态警报视图，它的功能也类似于咆哮/吐司警报。它在 ios6 中运行得非常好（希望我可以开源这个宝贝，你们都可以看看）

但无论如何，当我在 ios5 中运行它时，我的警报所在的窗口似乎并没有随着设备/模拟器旋转。无论如何，我的自定义窗口都保持纵向模式。

UIWindow 只是一个 UIView 子类，所以没有很好的“shouldRotate”委托方法。

我对为什么在 ios5 而不是 6 中发生这种情况感到有点困惑。任何帮助将不胜感激^_^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:30:20.153

我的窗口有一个 rootviewcontroller，我完全忘记了。我只需要实施

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return YES;
} 
```

让它工作。

:-D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:00:14.537

通常不建议两个`UIWindow`在一个 iOS 应用程序中使用多个实例。这样做的唯一正当理由是支持外部屏幕。您应该使用 a`UIView`代替，理想情况下由 a 管理`UIViewController`。

我假设，（因为您没有提供任何代码，我只能假设）您的窗口不“旋转”的原因是，它根本没有收到有关设备旋转的任何通知。只有`keyWindow`默认情况下接收它们。

我强烈建议您重新设计您的应用程序以使用适当管理的`UIView`方式。如果您出于某种原因不希望这样做，则必须注册您的实例`UIWindow`以接收`UIDeviceOrientationDidChangeNotification`然后（在处理程序中）评估新方向是什么并相应地更改窗口的框架（可能还有其他需要响应方向变化而完成）

# javascript - node.js 如何响应带有参数的 .js 文件

> ID：13183448
> 
> 赞同：0
> 
> 时间：2012-11-01T18:38:41.087
> 
> 标签：javascript, node.js, http, get

我有一个 node.js http 应用程序，我正在为 GET 请求提供服务。但是，我无法正确响应说 foo.js?_param=1234 的请求。我如何正确处理正在传递参数的这种类型的文件？

编辑：

我正在使用 express 来服务文件，如下所示：

```
app.get('/*', function(req, res) {

  res.sendfile(__application+req.url, {root: __root});

}); 
```

__root 是应用程序的根路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:42:58.180

使用`request.url`，它会看起来像`/foo.js?_param=123`。

然后使用`require('url').parse(url,true)`将其拆分为有意义的部分（`true`也用于扩展单个查询字符串参数）。

有关详细信息，请参阅[http://nodejs.org/api/http.html#http_request_url](http://nodejs.org/api/http.html#http_request_url)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:41:01.537

尝试使用[express](http://expressjs.com/)模块。

他们有一个完整的 API 来处理 GET 和 POST 请求。

您可以使用它[`req.query`](http://expressjs.com/api.html#req.query)来处理获取请求。

# asp.net - 当 GridView 事件触发时，Ajax Accordian 崩溃

> ID：13183449
> 
> 赞同：0
> 
> 时间：2012-11-01T18:38:44.000
> 
> 标签：asp.net, ajax, accordion

我在 EditSite.aspx 中有两个 Ajax Accordions。每个手风琴大约有六个窗格。在每个窗格中，我都有一个 asp:GridView 控件，它允许站点管理员执行各种任务，维护数据。它看起来不错，工作也很漂亮，但是...

随着 GridView 控件中的每次更新、插入等操作，手风琴折叠并打开默认窗格。我怀疑这是因为页面在回发事件中重新加载。这是一个主要的烦恼。我已经读到手风琴应该能够保留打开窗格的索引并返回到该窗格，但是随着 GridView 更新，这不会发生。

知道如何让 GridView 提交其插入、更新、删除等并保持手风琴窗格打开吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:50:36.290

将 Accordion 放入 UpdatePanel 中，并将面板的属性 UpdateMode 设置为“Conditional”。

[http://www.asp.net/web-forms/videos/aspnet-ajax/how-do-i-use-the-conditional-updatemode-of-the-updatepanel](http://www.asp.net/web-forms/videos/aspnet-ajax/how-do-i-use-the-conditional-updatemode-of-the-updatepanel)

# richfaces - 自定义rich:orderingList中的控制按钮

> ID：13183453
> 
> 赞同：0
> 
> 时间：2012-11-01T18:39:00.347
> 
> 标签：richfaces, custom-controls

我正在尝试更改 rich:orderingList 组件中的默认控制按钮（顶部、向上、向下、底部）。我可以通过更改默认类定义（.rf-ord-up-tp、.rf-ord-up、.rf-ord-dn 和 .rf-ord-dn-bt）来更改启用按钮的外观。这可行，但我也想在控件被禁用时更改按钮外观（即，当列表中没有选择任何项目时）。禁用按钮似乎没有任何类定义，所以目前我的自定义按钮显示不变，无论控件是启用还是禁用。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:25:12.103

有这个`.rf-ord-btn-dis`类（见[指南](http://docs.jboss.org/richfaces/4.2.X/4.2.2.Final/Component_Reference/en-US/html/chap-Component_Reference-Rich_inputs.html#sect-Component_Reference-richorderingList-Style_classes_and_skin_parameters)）。

但是，即使没有类，您也可以通过 CSS 实现这一点：

```
.rf-ord-btn[disabled="disabled"] {
} 
```

这将为所有禁用的按钮设置样式。

# ruby-on-rails-3 - 循环并生成表格单元格

> ID：13183454
> 
> 赞同：1
> 
> 时间：2012-11-01T18:39:05.277
> 
> 标签：ruby-on-rails-3

```
I have a table that looks like the following: 

<table class = "rota">
    <thead>
        <th>Date</th> 
        <% @hospitals.each do |hosp| %>
        <th><%= hosp.name%></th>
        <% end %>
    </thead>
    <tbody>
        <%- if @rota_days.blank? %>
        <tr>
            <td colspan="<%= @hospitals.count %>">No rota day</td>
        </tr>
        <% end -%>
        <% @dates.each do |date| %>
        <tr>
            <td><%= date.inspect %></td>

            <% end %>
        </tr>
    </tbody>
</table> 
```

输出以下内容：

![输出](../Images/bd09d0cac632e9771faf445a2b2c575f.png)

我正在尝试生成包含空单元格的空白行。我似乎无法确定我哪里出错了。什么是最好的解决方案

更新后的版本

```
<table class = "rota">
    <thead>
        <th>Date</th> 
        <% @hospitals.each do |hosp| %>
        <th><%= hosp.name%></th>
        <% end %>
    </thead>
    <tbody>
        <%- if @rota_days.blank? %>
        <tr>
            <td colspan="<%= @hospitals.count %>">No rota day</td>
        </tr>
        <% end -%>
        <% @dates.each do |date| %>
        <tr>
            <td><%= date.inspect %></td>
            <% (1..@hospitals.count).each do %> 
                <td></td> 
            <% end %> 
           </tr> 
            <% end %>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:51:26.683

你结束你的循环太快了，你需要一个 td 为每个 th 所以改变：

```
<% @dates.each do |date| %>
  <tr>
    <td><%= date.inspect %></td>
     <% end %>
  </tr> 
```

至：

```
<% @dates.each do |date| %>
  <tr>
    <td><%= date.inspect %></td> 
    <% (1..@hospitals.count).each do %>
      <td></td>    
    <% end %>       
  </tr>
<% end %> 
```

# sql - DB2 中的意外令牌“LIMIT”

> ID：13183455
> 
> 赞同：1
> 
> 时间：2012-11-01T18:39:07.120
> 
> 标签：sql, ruby-on-rails, db2, db2-luw

我的 Rails 应用程序连接到远程 DB2 数据库，在迁移时我遇到了这个错误：

```
==  DropLegacyProject: migrating ========================================
rake aborted!
An error has occurred, this and all later migrations canceled:

RuntimeError: Failed to execute statement due to: [IBM][CLI Driver][DB2/LINUXX8664] SQL0104N  An unexpected token "LIMIT" was found following "".  Expected tokens may include:  "FETCH FIRST <n> ROWS ONLY".  SQLSTATE=42601 SQLCODE=-104: SELECT  projects.* FROM projects WHERE projects.id < 17 LIMIT 1 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T18:58:29.937

DB2 不支持该`LIMIT x`关键字。

正如错误消息所说，这样做的正确方法将改为使用`FETCH FIRST x ROWS ONLY`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T19:08:05.680

正如**bhamby 所建议的，DB2***默认*不支持`LIMIT x`关键字...。

 *但从 DB2 v9.7.2 开始，[可以](http://freedb2.com/2010/07/14/top-3-ways-to-return-top-10-rows-by-an-sql-query/)通过[DB2_COMPATIBILITY_VECTOR 注册表变量启用对 的](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.apdv.porting.doc/doc/r0052867.html)[支持`LIMIT x`](http://freedb2.com/2010/07/14/top-3-ways-to-return-top-10-rows-by-an-sql-query/)：

```
db2set DB2_COMPATIBILITY_VECTOR=MYS
db2stop
db2start 
```

......它的工作原理！*

# javascript - HTML5：更改 localStorage 中项目的值

> ID：13183456
> 
> 赞同：2
> 
> 时间：2012-11-01T18:39:07.290
> 
> 标签：javascript, html, api, cookies, local-storage

我目前正在研究一些关于 HTML5 的示例测试问题，我遇到了以下问题：

> **您将如何更改 HTML 5.0 中 localStorage 属性的 Storage 对象中的 cookie 和项目的值？**
> 
> 一个。通过调用 window.dialogArguments() API 方法。
> 湾。通过调用 window.navigator.yieldForStorageUpdates() API 方法。
> C。通过调用 window.navigator.appName API 方法。

首先，这个问题的措辞似乎非常糟糕。（localStorage 中的 Cookie 和项目？？嗯！）

另外，我不相信任何答案都是完全正确的......？据我所知`yieldForStorageUpdates()`，取消阻止任何可能尚未返回的脚本，以便可以更新存储......但它实际上并没有改变值本身？

是我的无知表现还是这是一个非常糟糕的问题？：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:12:30.320

如果浏览器没有实现 localStorage，Cookie 有时会用作后备。

[localStorage](http://www.w3schools.com/html/html5_webstorage.asp)的api非常简单。这三个似乎都没有明显回答这个问题。 [yieldForStorageUpdates](http://www.w3.org/TR/2011/WD-html5-20110113/timers.html#dom-navigator-yieldforstorageupdates)正如你所说。

要更全面地了解存储，请查看此 [http://www.html5rocks.com/en/features/storage](http://www.html5rocks.com/en/features/storage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T22:47:13.387

好吧，这似乎是一个非常糟糕的问题，后来作为一个错误被废弃了。难怪，这完全是胡说八道！

耶！

# python - 用 x 轴偏移在 python (5GB) 中绘制非常大的文件

> ID：13183460
> 
> 赞同：2
> 
> 时间：2012-11-01T18:39:33.127
> 
> 标签：python, numpy, matplotlib, figure

我正在尝试使用 python 和 matplotlib 绘制一个非常大的文件（~5 GB）。我能够将整个文件加载到内存中（机器中可用的总量为 16 GB），但是当我使用简单的 imshow 绘制它时，我得到了分段错误。这很可能是我设置为 15000 的 ulimit 但我不能设置得更高。我得出的结论是我需要批量绘制我的数组，因此制作了一个简单的代码来做到这一点。我的主要问题是，当我绘制一批大数组时，x 坐标总是从 0 开始，我无法叠加图像来创建最终的大数组。如果您有任何建议，请告诉我。此外，由于管理权限，我无法在这台机器上安装像“Image”这样的新包。这是读取我的数组的前 12 行并制作 3 个图的代码示例。

```
import os
import sys
import scipy
import numpy as np
import pylab as pl
import matplotlib as mpl
import matplotlib.cm as cm
from optparse import OptionParser
from scipy import fftpack
from scipy.fftpack import *
from cmath import *
from pylab import *
import pp
import fileinput
import matplotlib.pylab as plt
import pickle

def readalllines(file1,rows,freqs):
    file = open(file1,'r')
    sizer = int(rows*freqs)
    i = 0
    q = np.zeros(sizer,'float')
    for i in range(rows*freqs):
        s =file.readline()
        s = s.split()
        #print s[4],q[i]
        q[i] = float(s[4])
        if i%262144 == 0:
            print '\r ',int(i*100.0/(337*262144)),'  percent complete',
        i += 1
    file.close()
    return q

parser = OptionParser()
parser.add_option('-f',dest="filename",help="Read dynamic spectrum from FILE",metavar="FILE")
parser.add_option('-t',dest="dtime",help="The time integration used in seconds, default 10",default=10)
parser.add_option('-n',dest="dfreq",help="The bandwidth of each frequency channel in Hz",default=11.92092896)
parser.add_option('-w',dest="reduce",help="The chuncker divider in frequency channels, integer default 16",default=16)
(opts,args) = parser.parse_args()
rows=12
freqs = 262144

file1 = opts.filename

s = readalllines(file1,rows,freqs)
s = np.reshape(s,(rows,freqs))
s = s.T
print s.shape
#raw_input()

#s_shift = scipy.fftpack.fftshift(s)

#fig = plt.figure()

#fig.patch.set_alpha(0.0)
#axes = plt.axes()
#axes.patch.set_alpha(0.0)
###plt.ylim(0,8)

plt.ion()

i = 0
for o in range(0,rows,4):

    fig = plt.figure()
    #plt.clf()

    plt.imshow(s[:,o:o+4],interpolation='nearest',aspect='auto', cmap=cm.gray_r, origin='lower')
    if o == 0:
        axis([0,rows,0,freqs])
    fdf, fdff = xticks()
    print fdf
    xticks(fdf+o)
    print xticks()
    #axis([o,o+4,0,freqs])
    plt.draw()

    #w, h = fig.canvas.get_width_height()
    #buf = np.fromstring(fig.canvas.tostring_argb(), dtype=np.uint8)
    #buf.shape = (w,h,4)

    #buf = np.rol(buf, 3, axis=2)
    #w,h,_ = buf.shape
    #img = Image.fromstring("RGBA", (w,h),buf.tostring())

    #if prev:
    #    prev.paste(img)
    #    del prev
    #prev = img
    i += 1
pl.colorbar()
pl.show() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T14:34:15.350

如果您在图形链中绘制任何超过~2k 像素的数组，*将以*某种方式对图像进行下采样以将其显示在监视器上。我会建议以受控方式进行下采样，例如

```
data = convert_raw_data_to_fft(args) # make sure data is row major
def ds_decimate(row,step = 100):
    return row[::step]
def ds_sum(row,step):
    return np.sum(row[:step*(len(row)//step)].reshape(-1,step),1)
# as per suggestion from tom10 in comments
def ds_max(row,step): 
    return np.max(row[:step*(len(row)//step)].reshape(-1,step),1)
data_plotable = [ds_sum(d) for d in data] # plug in which ever function you want 
```

或[插值](https://stackoverflow.com/questions/13167040/interpolate-in-one-direction)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T14:39:08.253

在绘制图像时，Matplotlib 的内存效率非常低。它创建了几个全分辨率中间数组，这可能就是你的程序崩溃的原因。

正如@tcaswell 建议的那样，一种解决方案是在将图像输入 matplotlib 之前对其进行下采样。

我还编写了一些包装代码来根据您的屏幕分辨率自动进行这种下采样。它位于[https://github.com/ChrisBeaumont/mpl-modest-image](https://github.com/ChrisBeaumont/mpl-modest-image)，如果它有用的话。它还具有动态重新采样图像的优点，因此您仍然可以平移和缩放而不牺牲所需的分辨率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T13:52:08.700

`extent=(left, right, bottom, top)`我认为您只是缺少`plt.imshow`.

```
x = np.random.randn(2, 10)
y = np.ones((4, 10))
x[0] = 0  # To make it clear which side is up, etc
y[0] = -1

plt.imshow(x, extent=(0, 10, 0, 2))
plt.imshow(y, extent=(0, 10, 2, 6))
# This is necessary, else the plot gets scaled and only shows the last array
plt.ylim(0, 6)
plt.colorbar()
plt.show() 
```

![在此处输入图像描述](../Images/cdd35a6378fcfd401d9f8a7fa4cbd593.png)

# vba - 为什么我收到需要对象错误（VBA、Excel）

> ID：13183465
> 
> 赞同：1
> 
> 时间：2012-11-01T18:39:44.450
> 
> 标签：vba, excel

为什么下面的代码是错误的？

```
Sub SetFont()
    Dim a1 As Range
    Set a1 = Range("a1")
    SetFontSize (a1)
End Sub

Sub SetFontSize(target As Range)
    target.Font.Size = 11
End Sub 
```

调用该方法时**出现“运行时错误 424：需要对象”错误。**`SetFontSize`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:40:46.293

您没有调用函数，调用时不需要括号`SetFontSize (a1)`。

只需使用：

```
SetFontSize a1 
```

# wordpress - wordpress 侧边栏中的特色页面

> ID：13183466
> 
> 赞同：0
> 
> 时间：2012-11-01T18:39:45.137
> 
> 标签：wordpress

我想在 Wordpress 的侧边栏中添加一个“特色页面”按钮/小部件，它将显示页面的缩略图以及页面的自定义摘录（我正在使用[http://wordpress.org/extend/plugins/page -摘录/](http://wordpress.org/extend/plugins/page-excerpt/)）。

我使用自定义文本小部件或[http://wordpress.org/extend/plugins/featured-page-widget/](http://wordpress.org/extend/plugins/featured-page-widget/)让它有点工作，但它不显示摘录，它只是从页面的主要内容生成一个。

任何人都知道一个简单的方法来做到这一点？我希望非网页设计师能够更新这类内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T09:45:02.357

您可以通过激活此插件轻松实现这一点[http://wordpress.org/extend/plugins/php-text-widget/](http://wordpress.org/extend/plugins/php-text-widget/)您可以将您的 php 代码放入小部件中。这意味着您还可以放置您的 WP_QUERY、query_posts 或 get_posts 循环，以便获得您想要的页面。

激活插件转到您的小部件页面使用**文本小部件**并将其拖动到您的小部件区域并粘贴此

```
<?php
$the_query = new WP_Query();
$the_query->query("page_id=$page_id");
if ($the_query->have_posts()) : 
while($the_query->have_posts()) : $the_query->the_post();
  //show thumbnail
   if(has_post_thumbnail()) :
     the_post_thumbnail(); 
 endif; 
 //show excerpt
   the_excerpt();
endwhile; 
endif; 
wp_reset_postdata();
?> 
```

# memory - 找不到内存泄漏

> ID：13183467
> 
> 赞同：1
> 
> 时间：2012-11-01T18:39:46.070
> 
> 标签：memory, valgrind, memory-leaks

我上周一直在试图找出这个内存泄漏，我在这一点上很绝望。我很高兴有任何帮助。

我有类 Solver，它在方法求解的每次迭代中创建类 PartialGraph 的实例（执行深度优先搜索）。在每次迭代中，PartialGraph 都应该被复制到堆栈中，并被销毁

求解器.h

```
class Solver {
public:
Solver(Graph pg);
PartialGraph solve(PartialGraph p, int bestest);
Graph pg;
stack<PartialGraph>  stackk;
bool isSpanningTree(PartialGraph* p);
 Solver(const Solver& orig);
 ~Solver(); 
```

求解器.cpp

```
Solver:: Solver(const Solver& orig){
     this->pg=*new Graph(orig.pg);   
     }

Solver::Solver(Graph gpg) {
    this->pg=gpg;
    }

PartialGraph Solver::solve(PartialGraph init, int bestest){

    int best=bestest;
    int iterace=0;
    PartialGraph bestGraph;
    stackk.push(init);

    while(stackk.size()!=0) {

        PartialGraph m = stackk.top(); 
        stackk.pop();

          for(int i=m.rightestEdge+1;i<pg.edgeNumber;i++){

              *******(line 53 )PartialGraph* pnew= m.addEdge(pg.edges[i]);  

              if(m.generatedNodes==pnew->generatedNodes){
              pnew->~PartialGraph();
              continue;  }

              if(isSpanningTree(pnew)){     
              if(best>pnew->maxDegree){
              best=pnew->maxDegree;
              bestGraph=*pnew;
              }
              if(pnew->maxDegree==2){
              pnew->~PartialGraph();
              return bestGraph;
              }
             pnew->~PartialGraph();
             continue;
             }

             if(pnew->maxDegree==best){
             pnew->~PartialGraph();
             continue;   }

             stackk.push(*pnew);

             *******(line 101 )pnew->~PartialGraph();
           }

    }

return bestGraph;
}

bool Solver::isSpanningTree(PartialGraph* p){
   if(p->addedEdges!=this->pg.nodeNumber-1){return false;}
   return  p->generatedNodes==this->pg.nodeNumber;
}

 Solver::~Solver(){
 this->pg.~Graph();
 }; 
```

PartialGraph 看起来像这样，它有两个数组，都在析构函数中删除。每个构造函数和 operator= 都会为数组分配新内存。（Class Edge 包含三个整数）

```
PartialGraph::PartialGraph(int nodeNumber,int edgeNumber) { 
    nodeCount=nodeNumber;
    edgeCount=0;
    nodes=new int[nodeCount];
    edges=new Edge[0]; 
    rightestEdge=-1;
    generatedNodes=0;
    addedEdges=0;
    for(int i=0;i<nodeCount;i++){
      this->nodes[i]=0;
     }

     maxDegree=0;
}

PartialGraph::PartialGraph(const PartialGraph& orig){
    this->nodes=new int[orig.nodeCount];
    edges=new Edge[orig.edgeCount];
    this->nodeCount=orig.nodeCount;
    this->rightestEdge=orig.rightestEdge;
    this->edgeCount=orig.edgeCount;
    this->maxDegree=orig.maxDegree;
    this->addedEdges=orig.addedEdges;
    this->generatedNodes=orig.generatedNodes;

    for(int i=0;i<this->nodeCount;i++){  
    this->nodes[i]=orig.nodes[i];            
    }

   for(int i=0;i<this->edgeCount;i++){ 
    this->edges[i]=orig.edges[i];        
    }
}

PartialGraph::PartialGraph(){
}

PartialGraph::PartialGraph(const PartialGraph& orig, int i){

    this->nodes=new int[orig.nodeCount];
    edges=new Edge[orig.edgeCount+1];
    this->nodeCount=orig.nodeCount;
    this->rightestEdge=orig.rightestEdge;
    this->edgeCount=orig.edgeCount;
    this->maxDegree=orig.maxDegree;
    this->addedEdges=orig.addedEdges;
    this->generatedNodes=orig.generatedNodes;

    for(int i=0;i<this->nodeCount;i++){ 
    this->nodes[i]=orig.nodes[i];
    }

   for(int i=0;i<this->edgeCount;i++){
  this->edges[i]=orig.edges[i];        
  }
}

PartialGraph &PartialGraph::operator =(const PartialGraph &orig){
nodes=new int[orig.nodeCount];
edges=new Edge[orig.edgeCount];
this->nodeCount=orig.nodeCount;
this->rightestEdge=orig.rightestEdge;
this->edgeCount=orig.edgeCount;
this->maxDegree=orig.maxDegree;
this->addedEdges=orig.addedEdges;
this->generatedNodes=orig.generatedNodes;
for(int i=0;i<this->nodeCount;i++){  
this->nodes[i]=orig.nodes[i];

}
for(int i=0;i<this->edgeCount;i++){

    this->edges[i]=orig.edges[i];        
}

 }

PartialGraph* PartialGraph::addEdge(Edge e){
PartialGraph* npg=new PartialGraph(*this, 1);
  npg->edges[this->edgeCount]=e;
npg->addedEdges++;
npg->edgeCount++;
if(e.edgeNumber>npg->rightestEdge){npg->rightestEdge=e.edgeNumber;}
npg->nodes[e.node1]=npg->nodes[e.node1]+1;
npg->nodes[e.node2]=npg->nodes[e.node2]+1;

if(npg->nodes[e.node1]>npg->maxDegree){npg->maxDegree=npg->nodes[e.node1];}
 if(npg->nodes[e.node2]>npg->maxDegree){npg->maxDegree=npg->nodes[e.node2];}

 if(npg->nodes[e.node1]==1){npg->generatedNodes++;}
 if(npg->nodes[e.node2]==1){npg->generatedNodes++;}
return npg;
}

PartialGraph:: ~PartialGraph() //destructor
{

    delete [] nodes;
    delete [] edges;
}; 
```

部分图.h

```
class PartialGraph {
public:
PartialGraph(int nodeCount,int edgeCount);
PartialGraph* addEdge(Edge e);
PartialGraph(const PartialGraph& orig);
PartialGraph();
~PartialGraph();
static int counter;
PartialGraph(const PartialGraph& orig, int i);
void toString();
int nodeCount;
int edgeCount;
int generatedNodes;
int *nodes;
Edge *edges;

int maxDegree;
int rightestEdge;
int addedEdges;
PartialGraph &operator =(const PartialGraph &other); // Assn. operator
}; 
```

它运行良好，但是当输入数据太大时，我得到了错误的分配。Valgrind 说我在 PartialGraph.cpp 的第 53 行泄漏，但我几乎可以肯定所有实例都在第 101 行或更早的迭代中被销毁。

```
 (244,944 direct, 116 indirect) bytes in 5,103 blocks are definitely lost in         
   at 0x4C2AA37: operator new(unsigned long) 
  (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)
  by 0x4039F6: PartialGraph::addEdge(Edge) (PartialGraph.cpp:107)
  by 0x404197: Solver::solve(PartialGraph, int) (Solver.cpp:53)
  by 0x4016BA: main (main.cpp:35)

  LEAK SUMMARY:
  definitely lost: 246,305 bytes in 5,136 blocks
   indirectly lost: 1,364 bytes in 12 blocks 
```

我什至做了一个实例计数器，似乎我销毁了所有实例。正如我所说，我真的很绝望，欢迎提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:07:37.573

简短的回答：你永远不应该直接调用析构函数。改为使用`delete`，因此在您拥有 的任何地方，您都`pnew->~PartialGraph();`应该拥有`delete pnew;`. 一般来说，每个地方都`new`应该有一个对应的`delete`地方。请注意，这条规则有一些技巧，因为多次删除可能会映射到一个新的，反之亦然。

我在查看代码时发现的额外漏洞：

*   您帖子中的第一行可执行代码：`this->pg=*new Graph(orig.pg);`. 另一个一般规则：如果你有这样的代码`*new Foo(...)`，你可能会造成泄漏（并且可能会为自己创造不必要的工作）。在这种情况下，`this->pg = orig.pg`应该可以正常工作。您当前的代码将 orig.pg 复制到新分配的对象中，然后将新创建的对象复制到 this->pg 中，这会导致两次复制操作。this->pg = orig.pg 只是一个副本。
*   前几行 PartialGraph::operator=()。复制构造函数、赋值运算符和析构函数可能很难正确使用。在你的所有构造函数中，你都有新的节点和边，并且你在析构函数中有匹配的删除，所以没关系。但是，当您执行赋值运算符时，您会覆盖指向现有数组的指针，但不会删除它们。在创建新数组之前，您需要删除现有数组。

最后，哎呀。我知道为 StackOverflow 格式化代码可能会很痛苦，但是尝试读取 Solver::solve() 中的代码非常痛苦，因为缩进与代码结构不匹配。当我查看这篇文章时，有 23 次浏览，没有任何回复。那是 23 个人对解决您的问题感兴趣，但可能被格式推迟了​​。如果你多花 23 分钟来格式化代码，并且它为每个人节省了超过一分钟，那么你就会为整个宇宙节省一些时间（除了可能更快地得到你的答案）。

# mysql - USB驱动器上的mysql datadir / mysql多实例

> ID：13183469
> 
> 赞同：0
> 
> 时间：2012-11-01T18:39:54.480
> 
> 标签：mysql, ubuntu, usb, multiple-instances

我关注了许多帖子，展示了如何运行第二个 mysql 实例以指向不同的数据目录，并且通过这个示例，它可以正常工作：

```
mkdir /var/lib/mysql2
chown -R mysql.mysql /var/lib/mysql2/
mkdir /var/log/mysql2
chown -R mysql.mysql /var/log/mysql2
cp -R /etc/mysql/ /etc/mysql2

cd /etc/mysql2/
sed -i 's/3306/3307/g' my.cnf
sed -i 's/mysqld.sock/mysqld2.sock/g' my.cnf
sed -i 's/mysqld.pid/mysqld2.pid/g' my.cnf
sed -i 's/var\/lib\/mysql/var\/lib\/mysql2/g' my.cnf
sed -i 's/var\/log\/mysql/var\/log\/mysql2/g' my.cnf 
```

编辑 apparmor mysql 文件（我在 ubuntu 上）

```
mysql_install_db --user=mysql --datadir=/var/lib/mysql2/

mysqld_safe --defaults-file=/etc/mysql2/my.cnf & 
```

上面的代码运行良好，但是如果我将 /var/lib/mysql2 替换为指向外部 USB 驱动器 (/media/marcel/mysql) 的位置，如果在 mysql_install_db 步骤失败。

有人知道为什么以及如何纠正这个吗？是否不可能在外部驱动器上安装 datadir ？

谢谢你的帮助

朱利安

添加 ：

我在一个论坛上发现，通过操纵 USE 标志似乎可以在 gentoo 上纠正同样的错误？？

```
Could you check if you have max-idx-128 enabled in your USE flags? I just re-emerged mysql-5.1.50 without that flag and it doesn't crash anymore. 
```

我真的不知道 USE 标志是什么，但它似乎与编译有关，是吗？

# javascript - 试图让滚动 div 不影响 iPhone 上的另一个 div

> ID：13183471
> 
> 赞同：1
> 
> 时间：2012-11-01T18:39:56.713
> 
> 标签：javascript, iphone, html, css, mobile

所以这是我的html：

```
<!DOCTYPE html>
<html>
<head></head>
<body>
    <a id="x" href="#" style="position:fixed; top:0; right:10px;">Switch</a>
    <div id="a">
        <p>Huge paragraph 1</p>
    </div>

    <div id="b" style="display:none;">
        <p>Huge paragraph 2</p>
    </div>

    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script>
        $('#x').click(function() {
            $('#a').toggle();
            $('#b').toggle();

            return false;
        });
    </script>

</body>
</html> 
```

问题是，假设我在第 1 段中途滚动，然后点击切换链接。所以现在我正在查看第 2 段。假设我在第 2 段上进行了一些滚动，然后决定我想切换回第 1 段，所以我点击了 switch。问题是当我切换回第 1 段时，我所处的位置与我原来的中间点完全不同。我怎样才能让每个 div 的滚动基本上只滚动他们自己的内容，这样如果我要切换，我仍然可以从我之前离开的地方继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:18:02.267

关键是在切换元素之前将 scrollTop 存储在 body 元素上。

存储该值后，只需每次重新设置即可。

这是一个快速而肮脏的实现：http: [//jsbin.com/efijey/1/edit](http://jsbin.com/efijey/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:56:06.863

这是我的问题。

[滚动经过 div 中的元素时更新锚标记](https://stackoverflow.com/questions/13187633/update-anchor-tag-as-you-scroll-past-an-element-in-a-div/13187674#comment17950864_13187674)

有人用这个回答了这个完美的回应。您可以这样做，以便保存每个 div 上的每个位置并使用切换按钮进行切换。

[http://jsbin.com/ezexaf/1/edit](http://jsbin.com/ezexaf/1/edit)

# javascript - 地图在奇怪的情况下无法加载

> ID：13183475
> 
> 赞同：0
> 
> 时间：2012-11-01T18:40:20.313
> 
> 标签：javascript, google-maps

一个这个站点：www.michelesgranola.com，Find a Store 地图并不总是加载。

如果你直接去页面，它往往会加载： [https ://www.michelesgranola.com/store-locations/](https://www.michelesgranola.com/store-locations/)

但是，如果您通过首页滑块上的“查找商店”按钮访问该页面，通常不会加载。

也就是说，有时它会加载，有时它不会。

关于如何解决这个问题的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:17:19.023

https:// - 您需要将主页上的链接设置为使用 https:// 协议进行链接 - 现在它指向使用 http:// 协议的页面。

如果您在加载该页面时打开 JavaScript 控制台（使用 http://），您将看到以下消息：

```
XMLHttpRequest cannot load https://www.michelesgranola.com/wp/?sm-xml-search=1&lat=39.2904028&lng=-76.…76.61218930000001&query_type=all&limit=0&address=&city=&state=&zip=&pid=14\. Origin http://www.michelesgranola.com is not allowed by Access-Control-Allow-Origin. 
```

该地图正在尝试使用 https 源从文件中加载数据，而当您在 http 域上时，浏览器的内置安全性不允许您这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:07:20.570

我试过了，从首页上的 find-a-store 访问它，我在 chrome 中尝试了 6 次，所有 6 次都很好。Firefox中的2也可以正常工作。您正在使用/测试什么浏览器？较旧的浏览器可能与某些地图功能不兼容。

同样，我自己有一个带有地图的应用程序，我发现它在速度较慢的设备上非常变化无常。使用速度较慢的设备时，无论它是否有效，它大约为 50 - 50。我不认为我做错了什么，因为在更快的设备上它每次都能完美运行。我认为谷歌是 a) 善变的，b) 可能有一段时间放弃渲染。祝你好运！

# javascript - 是否有跨浏览器的方式来设置第三方（跨域）异步 Dom 注入脚本的超时？

> ID：13183476
> 
> 赞同：2
> 
> 时间：2012-11-01T18:40:22.600
> 
> 标签：javascript, unobtrusive-javascript

我们的跟踪代码管理器今天出现故障，导致我们的网站爬网。由于标签管理器中的代码不是关键任务（分析等），有没有办法做类似下面的事情？

```
var extScript = document.createElement('script');
extScript.type = 'text/javascript';
extScript.src = 'http://third-party.com/scriptfile.js';
var s = document.getElementsByTagName('script')[0]; 
s.parentNode.insertBefore(extScript, s);

window.setTimeout(function () {
    // if script not loaded - "give up"
}, 3000); // 3 secs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:05:09.887

如果它不是关键任务，您可能希望在文档完全加载后将此脚本放在正文标记的末尾。

```
window.onload = function() {
  var extScript = document.createElement('script');
  extScript.type = 'text/javascript';
  extScript.src = 'http://third-party.com/scriptfile.js';

  document.body.appendChild(extScript);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T12:02:15.900

How about adding `async` attribute?

```
<script async type = 'text/javascript' src = 'http://third-party.com/scriptfile.js' ></script> 
```

this will not block, however you might run into some issues ([like this one](https://stackoverflow.com/questions/24297829/execute-write-on-doc-it-isnt-possible-to-write-into-a-document-from-an-asynchr))

# drupal - Drupal 7：带有链接的复选框标签

> ID：13183480
> 
> 赞同：5
> 
> 时间：2012-11-01T18:40:31.883
> 
> 标签：drupal, drupal-7, drupal-fapi, drupal-forms

是否可以在复选框的标签/标题中添加一个简单的 html 链接？我尝试了以下代码：

```
<?php
$form['legal']['#type'] = 'checkbox';
$form['legal']['#required'] = TRUE;
$form['legal']['#title'] = t(
  'You must accept our @tos and @legals',
  array(
    '@tos'    => l(t('terms of service'), 'node/6'),
    '@legals' => l(t('legals'), 'node/7')
  )
);
?> 
```

但这会产生以下标签（html 标记不是“翻译”的）：

"您必须接受我们的<a href="/node/6">服务条款</a>和<a href="/node/7">法律</a> *"

（我在左括号后添加了空格，这样它就不会转换为我想要的链接）

难道不能做这样的事情吗？我是drupal的新手。也许有人可以帮助我...谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T21:53:34.017

这发生在您强制将文本打印为纯文本之前。

```
<?php
$form['legal']['#type'] = 'checkbox';
$form['legal']['#required'] = TRUE;
$form['legal']['#title'] = t(
  'You must accept our !tos and !legals',
  array(
    '!tos'    => l(t('terms of service'), 'node/6'),
    '!legals' => l(t('legals'), 'node/7')
  )
);
?> 
```

请注意，您正在使用[t()](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/t/7)函数，它对替换前缀的作用不同。如果你放`@tos`，它将通过 check_plain() 运行，因此 HTML 将永远不会被浏览器处理，因为它对 HTML 实体进行编码。

`!tos`允许 HTML 标记，因为它不会是`check_plain()`'d。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:33:10.123

相反，您可以尝试使用`#prefix`.

```
$form['legal']['#prefix'] = t(
  'You must accept our @tos and @legals',
  array(
    '@tos'    => l(t('terms of service'), 'node/6'),
    '@legals' => l(t('legals'), 'node/7')
  )
); 
```

希望这行得通……穆罕默德。

# iphone - 为什么我的调查应用程序会导致内存泄漏？（一个 UIScrollView 中有多个 UIViews 和 UITextViews）

> ID：13183485
> 
> 赞同：0
> 
> 时间：2012-11-01T18:41:01.783
> 
> 标签：iphone, ios, memory-management, uiview, memory-leaks

我正在尝试制作一个调查应用程序，但尽管我使用的是 ARC，但我无法进行内存管理。我的应用程序导致内存泄漏。我收到内存警告。当我在界面生成器中静态地制作我的应用程序时，没有问题，但是当我以编程方式制作我的应用程序时，我遇到了内存问题。为什么会这样？这是我的代码：

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>
int soruAdedi = 20;
@interface ViewController ()

@end

@implementation ViewController
@synthesize scrollView2;
-(void)textViewBicimle: (UITextField *)textAlani{
    [textAlani.layer setBorderColor:[[[UIColor blackColor] colorWithAlphaComponent:1.0] CGColor]];
    [textAlani.layer setBorderWidth:1.0];
}

- (void) tableCiz:(NSMutableArray *)hucreler sutun:(int)sutunSayisi satir:(int)satirSayisi{
    int z = 0;
    for (int i =0;i<satirSayisi;i++){
        for(int j=0;j<sutunSayisi&&z<satirSayisi*sutunSayisi;j++,z++){
            [self textViewBicimle:[hucreler objectAtIndex:z]];
            [[hucreler objectAtIndex:z] setFrame:CGRectMake((20+j*100), (20+i*40), 100, 40)];
        }
    }
}

-(void)scrollViewDidScroll:(UIScrollView *)scrollView{

}

-(void)hucreArrayOlustur: (int)sutunSayisi suankiView:(UIView *)soruViewIki satir:(int)satirSayisi{
    for (int i = 0; i <sutunSayisi*satirSayisi; i++){
        textView = [[UITextField alloc]init];
        textView.text = @"dsgfdh";
        [hucreArray addObject:textView];
        [soruViewIki addSubview:textView];
    }
}

-(void)viewOlustur{
    for (int i = 0; i <soruAdedi; i++){
        hucreArray = [[NSMutableArray alloc]init];
        if (i == 0){
            soruView = [[UIView alloc]initWithFrame:CGRectMake(20, 20, 728, 0)];
            soruView.clipsToBounds = YES;
            soruView.backgroundColor = [UIColor lightGrayColor];
            [self hucreArrayOlustur:5 suankiView:soruView satir:10];
            [self tableCiz:hucreArray sutun:5 satir:10];
            CGRect frame = soruView.frame;
            CGRect frame2 = [[hucreArray objectAtIndex:49] frame];
            frame.size.height =  frame2.origin.y+frame2.size.height+34;
            soruView.frame = frame;
            [viewArray addObject:soruView];
            [scrollView2 addSubview:soruView];
        }
        else{
            CGRect frameGecici = [[viewArray objectAtIndex:i-1] frame];
            float geciciY = frameGecici.origin.y+frameGecici.size.height+1;
            soruView = [[UIView alloc]initWithFrame:CGRectMake(20, geciciY, 728, 0)];
            soruView.clipsToBounds = YES;
            soruView.backgroundColor = [UIColor lightGrayColor];
            [self hucreArrayOlustur:5 suankiView:soruView satir:10];
            [self tableCiz:hucreArray sutun:5 satir:10];
            CGRect frame = soruView.frame;
            CGRect frame2 = [[hucreArray objectAtIndex:49] frame];
            frame.size.height =  frame2.origin.y+frame2.size.height+34;
            soruView.frame = frame;
            [viewArray addObject:soruView];
            [scrollView2 addSubview:soruView];
        }
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    scrollView2.delegate = self;
    scrollView2.contentSize = CGSizeMake(0, 8000);
    viewArray = [[NSMutableArray alloc]init];
    [self viewOlustur];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidUnload {
    [self setScrollView2:nil];
    [super viewDidUnload];
}
@end 
```

# java - 无法获得标准偏差，我做错了什么？

> ID：13183490
> 
> 赞同：2
> 
> 时间：2012-11-01T18:41:20.463
> 
> 标签：java, math

我基本上是在尝试使用一个数组，它是从文件中读取的数据，然后使用该数组计算数据的平均值和标准偏差。

我似乎无法得到正确的号码。

```
static public double[][] calcStats(String[][] x) throws IOException {
  double[][] array = new double[7][2];
  double total = 0, std_dev = 0, amount = 0;
  int row2 = 0;
  for (int row = 1; row < x.length; row++) {
    array[row2][0] = (total);
    array[row2][1] = Math.sqrt(amount);
    amount = 0;
    total = 0;
    if (row >= 2) {
      row2++;
    }
    for (int col = 1; col < x[row].length; col++) {
      total += Integer.parseInt(x[row][col]);
      if (col == 4) {
        total = (total / 4);
      }
    }
    for (int col = 1; col < x[row].length; col++) {
      std_dev = (Integer.parseInt(x[row][col])) - (total);
      std_dev = Math.pow(std_dev, 2);
      amount = +std_dev;
      std_dev = 0;
      if (col == 4) {
        amount = (amount / 27);
      }
    }
  }
  array[row2][0] = (total);
  return array;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T18:48:02.133

Java 中的数组从 0 开始。您从 1 开始循环。这意味着您缺少每个数组的第一个元素。

根据 Marko Topolnik 的建议，我应该指出我将`amount =+ std_dev;`您的原始代码更改为`amount += std_dev;`. 现在我想起来了，这是一个无效的编辑，因为原始代码是一个额外的问题（除了循环限制）。我将编辑回滚到 Marco 的版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T19:01:14.060

这就是我可以在不更改方法签名的情况下编写它的方式。

```
public static double[][] calcStats(String[][] x) {
    double[][] array = new double[x.length][2];
    for (int row = 0; row < x.length; row++) {
        String[] xrow = x[row];
        double total = 0;
        for (String s : xrow)
            total += Integer.parseInt(s);
        double average = total / xrow.length;

        double sqrTotal = 0;
        for (String s : xrow) {
            double d = Integer.parseInt(s) - total;
            sqrTotal += d * d;
        }
        array[row][0] = average;
        array[row][1] = Math.sqrt(sqrTotal);
    }
    return array;
} 
```

或单程作为

```
public static double[][] calcStats(String[][] x) {
    double[][] array = new double[x.length][2];
    for (int row = 0; row < x.length; row++) {
        String[] xrow = x[row];
        double sum = 0, sq_sum = 0;
        for (String s : xrow) {
            int d = Integer.parseInt(s);
            sum += d;
            sq_sum += d * d;
        }
        double mean = sum / xrow.length;
        double variance = sq_sum / xrow.length - mean * mean;
        array[row][0] = mean;
        array[row][1] = Math.sqrt(variance);
    }
    return array;
} 
```

# c - Valgrind 的输出缺少基本值

> ID：13183491
> 
> 赞同：0
> 
> 时间：2012-11-01T18:41:23.970
> 
> 标签：c, debugging, valgrind, ubuntu-10.04

我开始从[这里](http://c.learncodethehardway.org/book/)学习C。我在第 5 章，练习 4 中学习使用 valgrind。[此](http://c.learncodethehardway.org/book/learn-c-the-hard-waych5.html#x10-290005)页面上的源代码窗口 17 中解释了该问题。

在 Valgrind'ing 文件 (ex4.c) 后，我的输出缺少[此](http://c.learncodethehardway.org/book/learn-c-the-hard-waych5.html#x10-290005)页面上显示的 Valgrind 输出，具体方式如下：

1.  `???`代替`_itoa_word (_itoa.c:195)`

2.  未识别 C 库文件中行号的位置。相反，给出了共享库文件 (.so) 的路径。

## 下面显示了一个比较两个输出的示例。

我期待什么

==3082== 使用大小为 8 的未初始化值

==3082== 在 0x4E730EB：_itoa_word (_itoa.c:195)

==3082== 由 0x4E743D8: vfprintf (vfprintf.c:1613)

==3082== 由 0x4E7E6F9: printf (printf.c:35)

## ==3082== 由 0x40052B: 主要 (ex4.c:11)

* * *

我得到了什么

==14647== 在 0x407D256: ??? （在 /lib/tls/i686/cmov/libc-2.11.1.so 中）

==14647== 0x4080B89：vfprintf（在 /lib/tls/i686/cmov/libc-2.11.1.so 中）

==14647== by 0x40882BF: printf (in /lib/tls/i686/cmov/libc-2.11.1.so)

## ==14647== 由 0x8048401: 主要 (ex4.c:9)

请告诉我如何纠正我的 valgrind 输出。我正在使用 Ubuntu-10.10，32 位版本。我使用源代码安装了 Valgrind-3.8.1。我的 gcc 版本是 4.3.3 和 glibc 版本 2.11.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:25:43.943

一些 Linux 发行版附带的库已经去掉了它们的符号。生成的库要小得多，但缺少在 gdb 或 valgrind 中调试它们所需的函数名称。

您通常可以找到一个包，其中包含每个库的调试符号。例如，在 Ubuntu 上，它是库的包名称，带有“-dbg”后缀。对于 C 库 libc6，它是 libc6-dbg。安装它：

```
sudo aptitude install libc6-dbg 
```

# haskell - Cabal - 共享数据类型

> ID：13183492
> 
> 赞同：2
> 
> 时间：2012-11-01T18:41:27.220
> 
> 标签：haskell, cabal

我有一个名为`Datatypes.hs`. 它暴露在我的阴谋集团文件中。

```
library
    exposed-modules: Application
                     Foundation
                     Import
                     Settings
                     Settings.Development
                     Datatypes
                     Handler.Advise 
```

我想`Datatypes`在我的测试代码中使用。这是我尝试过的

测试套件测试类型：exitcode-stdio-1.0 main-is：tests/testclient.hs hs-source-dirs：.,tests ghc-options：-Wall

```
build-depends: base
             , Datatypes
             , conduit == 0.5.2.7
             , attoparsec-conduit == 0.5.0.2
             , transformers == 0.3.0.0
             , resourcet == 0.4.0.2
             , http-conduit                  >= 1.5        && < 1.7
             , utf8-string == 0.3.7
             , aeson == 0.6.0.2 
```

我仍然收到有关 testclient.hs 中未定义数据类型的投诉。我正在做的事情可能吗？现在我只是将我的数据类型粘贴到 testclient.hs 中，但我希望能够参考`Datatypes.hs`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:09:54.740

您不能在该`build-depends`字段中列出单个模块 - 请改用包的名称。例如，查看[`.cabal`文件`unordered-containers`](https://github.com/tibbe/unordered-containers/blob/master/unordered-containers.cabal)：

```
test-suite strictness-properties
  hs-source-dirs: tests
  main-is: Strictness.hs
  type: exitcode-stdio-1.0

  build-depends:
    base,
    [...]
    unordered-containers 
```

# windows - 如何从 Windows 7 pc 访问 Mac Osx 上的 localhost XAMPP？

> ID：13183493
> 
> 赞同：1
> 
> 时间：2012-11-01T18:41:39.630
> 
> 标签：windows, macos, xampp, localhost

我目前在使用 xampp 安装、运行和托管本地网站的 mac 上。我想从我的 Windows 7 计算机访问我的本地主机网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:46:12.613

这不是一个编程问题。您应该使用 google 或将其发布在 XAMPP 博客上。但是我心情很好，所以我会告诉你:)

为此，您必须获取 mac 的 IP 地址。转到您的系统首选项-> 网络。在 Windows 机器的浏览器中输入 IP，然后瞧。此外，请确保两台 PC 在同一个网络中。

**编辑**

忘记以下内容，您必须授予对它的访问权限。

[http://www.apachefriends.org/f/viewtopic.php?p=150713](http://www.apachefriends.org/f/viewtopic.php?p=150713)

# python - 静态方法和递归？

> ID：13183501
> 
> 赞同：20
> 
> 时间：2012-11-01T18:42:21.817
> 
> 标签：python, class, methods

我有以下代码：

```
class Foo(object):
    def __init__(self):
        baz=self.bar(10)

    @staticmethod
    def bar(n):
        if n==0:
            return 'bar'
        else:
            return bar(n-1) 
```

bar() 作为递归函数，它需要引用自身。但是， bar() 在一个类中，调用`return bar(n-1)`将不起作用，调用`NameError: global name 'bar' is not defined`. 我该如何处理这种情况？我应该将 bar() 更改为类或实例方法，允许访问`self`or`cls`吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-01T18:44:22.833

您可以`bar`通过在其前面加上类名来引用它：

```
class Foo(object):
    def __init__(self):
        baz=self.bar(10)

    @staticmethod
    def bar(n):
        if n==0:
            return 'bar'
        else:
            return Foo.bar(n-1) 
```

毕竟，静态方法只不过是包含在类的命名空间中的常规函数​​。

或者，`bar`改为定义为常规函数：

```
def bar(n):
    if n==0:
        return 'bar'
    else:
        return bar(n-1)

class Foo(object):
    def __init__(self):
        baz=bar(10) 
```

这完全避免了整个问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-01T20:02:27.000

使用类方法或按名称调用类（如其他人所示）的替代方法是使用闭包来保存对函数的引用：

```
class Foo(object):
    def bar():
        def bar(n):
            if n == 0:
               return "bar"
            return bar(n-1)
        return bar
    bar = staticmethod(bar()) 
```

The (minor) advantage is that this is somewhat less susceptible to breaking when names change. For example, if you have a reference to `Foo.bar` *inside* `bar`, this relies on `Foo` continuing to be a global name for the class that `bar` is defined in. Usually this is the case but if it isn't, then the recursive call breaks.

The `classmethod` approach will provide the method with a reference to the class, but the class isn't otherwise needed in the method, which seems inelegant. Using the closure will also be marginally faster because it isn't doing an attribute lookup on each call.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-01T18:47:07.833

那个怎么样？

```
class Foo(object):
    def __init__(self):
        baz = self.bar(10)

    @classmethod
    def bar(cls, n):
        if n == 0:
            return 'bar'
        else:
            return cls.bar(n-1) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-21T08:13:43.090

You can define bar() outside of Foo and then bring it in as a staticmethod so that you get all of the benefits of it being a method of the class while not having to close it or reference the class itself. I have needed something like this for class inheritance reasons.

```
def bar(n):
    if n==0:
        return 'bar'
    else:
        return bar(n-1)

class Foo(object):
    bar = staticmethod(bar)
    def __init__(self):
        baz=self.bar(10) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-18T10:03:13.503

If the main goal is to run a recursive method, you can use plain methods for this.

I actually never saw the use for this until now. lets say you have integer thresholds you need to test, this pattern can be quite nice and easy: ( even though it can create a bit overheat, so be cautious)

```
class Foo(object):

    def __init__(self, n):
        self.baz = self.bar(n)

    def bar(self, n):
        if n < -10:
            return 'bar < -10'
        if n == -10:
            return 'bar -10 - -1'
        if n == 0:
            return 'bar 0 - 9'
        if n == 10:
            return 'bar 10 - 19'
        if n >= 20:
            return 'bar >= 20'
        return self.bar(n-1) 
```

# php - 使用cron与浏览器运行的php文件的文件访问差异

> ID：13183502
> 
> 赞同：0
> 
> 时间：2012-11-01T18:42:27.687
> 
> 标签：php, file, cron

一个 php 文件（例如 example.php）应该将某些内容写入另一个文件（例如 alma.txt）。如果 example.php 通过 cron 作业运行，一切正常，但是当我通过浏览器调用它时，它不会写入 alma.txt。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:06:30.557

cron 作业在拥有已配置 cron 作业的 crontab 文件的用户下运行。

当您从 cron 守护程序运行 php 时，您的用户是执行命令的用户。

当您通过浏览器运行 php 脚本时。在 Web 服务器中，此脚本由启动 apache 进程的用户执行。例如，在 ubuntu 中是用户 www-data。

这看起来像文件权限问题。只是为了确保授予文件 alma.txt 的所有权限。

```
chmod 777 alma.txt 
```

再试一次，如果一切正常，那就是权限问题，我会建议你为文件设置正确的权限。也许将组 www-data 添加到文件并授予 775 给它。

# ruby-on-rails-3 - rails form partial for new 并在同一页面上编辑

> ID：13183506
> 
> 赞同：0
> 
> 时间：2012-11-01T18:42:40.707
> 
> 标签：ruby-on-rails-3, forms, partial-views, form-for

我在尝试将表单从视图中分离为部分时遇到了问题。我想对新视图和编辑视图使用相同的表单。这些都在同一页面上。新模型表单位于页面顶部，并使用我在控制器中设置的变量。

```
<%= form_for @new_hire do |f| %>
<%= render :partial => 'new_hire_requests/form', :locals => {:f => f} %>
<% end %> 
```

然后，我有一个由另一个部分呈现的待处理批准的部分

```
<%= render :partial => 'pending_approval', :collection => @pending_approval %> 
```

在等待批准的部分中，我有这个

```
<%= form_for pending_approval do |f| %>
<%= render :partial => 'new_hire_requests/form', :locals => {:f => f} %>
<% end %> 
```

这是抛出一个错误

```
undefined method `new_hire_request_path' for #<#<Class:0x0000010488ac98>:0x0000010223ffc0> 
```

有没有办法在同一页面上重新使用新表单和编辑表单的表单代码？

控制器逻辑

```
@new_hire = NewHireRequest.new
@new_hire_requests = current_user.new_hire_requests
@pending_approval = @new_hire_requests.select{|p| p.status == 'pending_hr_approval' || p.status == 'pending_exec_approval'} 
```

部分代码

```
<%= render 'shared/error_messages', object: f.object %>

<fieldset class="first">
<%= f.label :first_name, "First Name" %>
<%= f.text_field :first_name %>
</fieldset>
<fieldset>
<%= f.label :last_name, "Last Name" %>
<%= f.text_field :last_name %>
</fieldset>
<%= f.submit "Submit for Approval <i class='icon-share-alt icon-white'></i>", 
        class: "button_green" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:45:22.113

在路线中添加资源 new_hire_requests 并完成它。

# rest - MOXy 的@XmlCDATA 似乎没有影响

> ID：13183510
> 
> 赞同：4
> 
> 时间：2012-11-01T18:42:49.277
> 
> 标签：rest, jaxb, eclipselink, cdata, moxy

我想将以下内容返回到浏览器（查看源代码）

```
<content>
<![CDATA[Please show this inside a unescaped CDATA tag]]>
</content> 
```

但我确实得到

```
<content>
Please show this inside a unescaped CDATA tag
</content> 
```

如果，我将内容的值更改为

< ;![CDATA[请在未转义的 CDATA 标记中显示此内容]]> ; ，标签的小于和大于被转义。

想知道如何实现我想要的？？？？

这是我的代码

```
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("/myRequest")
public class MyRestClass {

    @GET
    @Path("{myPathNumber}")
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    public Object doInquiry(@PathParam("myPathNumber") String myPathNumber) {
        try {
            return new MyObject();
        } catch (Exception e) {
            return "exception " + e.getMessage();
        }
    }
} 
```

```
package org.openengine.wink;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import org.eclipse.persistence.oxm.annotations.XmlCDATA;

@XmlRootElement
public class MyObject implements Serializable {

    @XmlElement 
    @XmlCDATA
    private String content = "Please show this inside a unescaped CDATA tag";

} 
```

在包中`org.openengine.wink`我有一个文件，`jaxb.properties`包含以下内容

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:31:31.963

**类路径**

我的最佳猜测是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)未在您的类路径上正确配置，并且 JAXB RI 被用作您环境中的 JAXB (JSR-222) 提供程序。

* * *

**元数据**

您提供的[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)元数据似乎是正确的。这可以通过以下独立演示代码进行验证。

**我的对象**

默认情况下[**，JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现在属性（getter/setter）上查找元数据。由于您已经注释了该字段，我建议您使用`@XmlAccessorType(XmlAccessType.FIELD`注释（请参阅：[http](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html) ://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html ）。

```
package org.openengine.wink;

import java.io.Serializable;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlCDATA;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class MyObject implements Serializable {

    @XmlElement 
    @XmlCDATA
    private String content = "Please show this inside a unescaped CDATA tag";

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要在类路径中包含 EclipseLink 二进制文件，并`jaxb.properties`在与域模型相同的包中调用一个文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05 /specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)）。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

```
package org.openengine.wink;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(MyObject.class);

        MyObject myObject = new MyObject();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(myObject, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<myObject>
   <content><![CDATA[Please show this inside a unescaped CDATA tag]]></content>
</myObject> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/cdata-cdata-run-run-data-run.html](http://blog.bdoughan.com/2010/07/cdata-cdata-run-run-data-run.html)

# django - 使用 boto 进行 S3 上传我收到 EOF 错误

> ID：13183513
> 
> 赞同：4
> 
> 时间：2012-11-01T18:43:21.207
> 
> 标签：django, amazon-s3, boto

我正在尝试将文件上传到 S3（实际上上传工作），但我的应用程序崩溃并抛出错误说：

`fp is at EOF. Use rewind option or seek() to data start.`

我看到人们解决问题的一些方法是添加`rewind=True`到他们的 set_contents_from_string 调用中。但是，这会引发以下错误：

`set_contents_from_string() got an unexpected keyword argument 'rewind'`

以下是我的内容`views.py`。我究竟做错了什么？

```
def store_in_s3(filename, filecontent):
    conn = S3Connection(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)
    b = conn.create_bucket('mybucket')
    mime = mimetypes.guess_type(filename)[0]
    k = Key(b)
    k.key = filename
    k.set_metadata("Content-Type", mime)
    k.set_contents_from_string(filecontent)
    #k.set_contents_from_string(filecontent, rewind=True)
    k.set_acl("public-read")

def add_m(request, points=None):
    mname = request.GET.get ('mname')
    format = request.GET.get ('format')
    type = request.GET.get ('type')
    if request.method == "POST":
        formtoaddm = spiceform(request.POST, request.FILES)
        if formtoaddm.is_valid():
            new_m = formtoaddm.save(commit=False)
            new_m.adder = request.user
            mname = new_m.mname
            file = request.FILES['content']
            filename = file.name
            filecontent = file.read()
            store_in_s3(filename, filecontent)
            ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-06T15:16:48.040

[请参阅此处](https://github.com/boto/boto/issues/883)的最终评论。假设您使用的是 Django-Storages，只需升级到最新版本，应该可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-28T15:14:12.763

后

```
filecontent = file.read() 
```

放：

```
file.seek(0) 
```

# c# - 派生类反序列化

> ID：13183520
> 
> 赞同：1
> 
> 时间：2012-11-01T18:44:16.390
> 
> 标签：c#, xml, deserialization, derived-class

我的逻辑模拟程序有反序列化问题。
这是我的元素类：

```
public class AndGateData : TwoInputGateData
{

}

public class TwoInputGateData : GateData
{
    public TwoInputGateData()
    {
        Input2 = new InputData();
        Input1 = new InputData();
    }
    public InputData Input1 { get; set; }
    public InputData Input2 { get; set; }
}

public class GateData : ElementData
{
    public GateData()
    {
        OutputData = new OutputData();
    }

    public OutputData OutputData { get; set; }
}

public class ElementData
{
    public int Delay { get; set; }
    public Guid Id { get; set; }
} 
```

以下是负责套接字的类：

```
public class InputData : SocketData
{

}

public class SocketData
{
    public Guid Id { get; set; }
    public SignalData SignalData { get; set; }
} 
```

SignalData 在这里并不重要。所以，除非有人说有必要，否则我不会在这里写它（为了保持这个问题的清洁）。

CircuitData 很重要：

```
[XmlRoot("Circuit")]
public class CircuitData
{
    [XmlElement(typeof(AndGateData))]
    [XmlElement(typeof(OrGateData))]
    public List<ElementData> elements = new List<ElementData>();
    public List<WireData> wires = new List<WireData>();
    public void AddElement(ElementData element)
    {
        elements.Add(element);
    }
    public void AddWire(WireData wire)
    {
        wires.Add(wire);
    }
} 
```

电线现在并不重要。
现在，我写了一些序列化：

```
public class CircuitDataWriter
{
     public static void Write(object obj, string fileName)
     {
         var xmlFormat = new XmlSerializer(typeof(CircuitData));
         using(Stream fStream = new FileStream(fileName, FileMode.Create, FileAccess.Write, FileShare.None) )
         {
             xmlFormat.Serialize(fStream,obj);
         }
         Console.WriteLine("Circuit saved in XML format.");
     }

} 
```

它就像我想要的那样工作，它会生成那个 xml 文档：

```
<?xml version="1.0"?>
-<Circuit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"> 
-<AndGateData> 
<Delay>10</Delay> 
<Id>bfee6dd7-5946-4b7b-9d0b-15d5cf60e2bf</Id> 
-<OutputData> <Id>00000000-0000-0000-0000-000000000000</Id> </OutputData> 
-<Input1> <Id>7c767caf-79a9-4c94-9e39-5c38ec946d1a</Id> <SignalData xsi:type="SignalDataOn"/> </Input1> 
-<Input2> <Id>d2cad8f8-8528-4db3-9534-9baadb6a2a14</Id> <SignalData xsi:type="SignalDataOff"/> </Input2> 
</AndGateData> 
<wires/> 
</Circuit> 
```

**但是我的反序列化有问题。这是代码：**

```
public static CircuitData Read()
{
    var reader = new XmlSerializer(typeof(CircuitData));
    StreamReader file = new StreamReader("Circuit.xml");
    var returnCircuitData = new CircuitData();
    returnCircuitData = (CircuitData) reader.Deserialize(file);
    return returnCircuitData;
} 
```

现在，它反序列化了 my `Circuit.xml`to 对象，但这个对象只包含`Id`and `Delay`，它不包含`Input1`, `Input2`or `Output`。因此，它被视为`Element`，而不是`AndGate`。我试图解决它一天，但似乎没有人有这种问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:00:35.813

我有一个建议给你，让`Write`方法像这样通用，并使用以下方法创建序列化程序`objectToSerialize.GetType()`：

```
public static void Write<T>(T objectToSerialize, string fileName)
{
    var xmlSerializer = new XmlSerializer(objectToSerialize.GetType());
    ...
} 
```

该[`XmlSerializer.Deserialize()`](http://msdn.microsoft.com/en-us/library/dsh84875.aspx)方法返回对象，您可以`Read`像这样使您的方法通用：

```
public static T Read<T>(string fileName)
{
    var serializer = new XmlSerializer(typeof(T));
    using (StreamReader file = new StreamReader(fileName))
    {
        return (T)serializer.Deserialize(file);
    }
} 
```

除此之外，您可能还想阅读：

*   序列化派生类时使用的[XmlInclude 。](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlincludeattribute.aspx)
*   用于控制数组序列化的[XmlArray](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlarray.aspx)和[XmlArrayItem](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlarrayitemattribute.aspx)

# c - 函数参数`...`是什么意思？

> ID：13183524
> 
> 赞同：1
> 
> 时间：2012-11-01T18:44:22.953
> 
> 标签：c

> **可能重复：**
> [在 C 的参数列表中……是什么意思？](https://stackoverflow.com/questions/1124265/what-does-mean-in-an-argument-list-in-c)

我在读一本关于 win32 编程的书，我看到了一个这样的函数：

```
 int CDECL MessageBoxprintf(TCHAR *szCaption,TCHAR *szFrmat,...)  
   {
       TCHAR szBuffer[1024];
       va_list pArgList;
       va_start (pArgList,szFrmat);
      _vsnprintf(szBuffer,sizeof(szBuffer)/sizeof(TCHAR),szFrmat,pArgList);
       va_end (pArgList);
       return MessageBox(NULL,szBuffer,szCaption,0);
    } 
```

### `,...`函数的参数是什么意思？

我试图通过搜索找到答案，但没有任何用处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:51:53.183

这些被称为可变参数函数。

`...`在参数列表的末尾意味着该函数将在最后一个必需参数（如果有）之后采用不确定数量的参数。

多余的参数可以是任何类型。例如：

```
void f(...) {}

f( 5, 0, 24 ); // works

f( "", 5, false ); // works

f( true, false, 4 ); // works 
```

这非常漂亮。通常我们希望它们是任何类型的，但同时我们可能希望对它们做一些通用的事情。为此，我们使用模板：

```
template <typename...Type> Type f( Type ... type ) {

    // do some generic thing        

    f(type...); // move to next argument
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T18:53:32.763

这意味着您可以为该函数提供可变数量的参数，而不是固定数量的参数。一个完美的用例将是

例如，假设我们有一个名为 average 的函数

```
double average ( int num, ... )
{
  va_list arguments;                     // A place to store the list of arguments
  double sum = 0;

  va_start ( arguments, num );           // Initializing arguments to store all values after num
  for ( int x = 0; x < num; x++ )        // Loop until all numbers are added
    sum += va_arg ( arguments, double ); // Adds the next value in argument list to sum.
  va_end ( arguments );                  // Cleans up the list

  return sum / num;                      // Returns the average
} 
```

您可以使用任意数量的参数调用此函数

```
cout<< average ( 3, 12.2, 22.3, 4.5 ) <<endl; 
```

此外，传递的参数不必是同一类型。有关更多信息，请查看此[链接](http://www.cprogramming.com/tutorial/lesson17.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:53:56.680

如果你给一个函数传递了太多的参数，通常是一个错误，但是`...`你可以传递更多的参数给它。它有一个可变的参数计数。传递给函数的参数可以由`stdarg.h`. 有关更多信息，请参阅[此](http://www.cplusplus.com/reference/clibrary/cstdarg/va_arg/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T18:46:35.233

这意味着 func 可以接受可变数量的参数（稍后由 va* 宏解析）

# sql - 表中有重复的行，但需要更改一列中的数据

> ID：13183527
> 
> 赞同：0
> 
> 时间：2012-11-01T18:44:30.987
> 
> 标签：sql

我有表**step_year** : id, step_id, year

我想复制所有年份 = 1011 的行（从 step_year 中选择 *，其中年份 = 1011），但不是那些新创建的具有相同年份（1011）的行，而是我想将其更改为 1112。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:49:22.937

您可以`INSERT`基于 a`SELECT`但指定年份而不是从查询中提取它

```
INSERT INTO `step_year` (`id`, `step_id`, `year`)
SELECT `id`, `step_id`, 1112 AS `year` 
FROM `step_year` where `year` = 1011 
```

此语法适用于 MySQL，但应该适用于大多数数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:50:26.820

如果您的数据库支持它：

```
INSERT INTO step_year
(id, step_id, year)
SELECT sub_year.id, sub_year.step_id, 1112
  FROM step_year sub_year
  WHERE sub_year.year = 1011 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T18:53:17.913

```
insert into step_year(id, step_id,year)
select id,step_id,1112 from step_year where year = 1011 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T19:07:03.377

如果 id 字段是自动增量的，使用这个

```
INSERT INTO step_year(step_id,year)
           SELECT step_id, 1112 FROM step_year WHERE year = 1011 
```

如果 id 字段不是自动递增的

```
INSERT INTO step_year(id, step_id, year)
           SELECT ROW_NUMBER() OVER(ORDER BY id) + COUNT(year) id, step_id, 1112 FROM step_year WHERE year = 1011 
```

# structure - 如何使用 ExpressionEngine 的 Structure 插件生成多级导航栏？

> ID：13183531
> 
> 赞同：6
> 
> 时间：2012-11-01T18:44:37.947
> 
> 标签：structure, expressionengine

我正在使用 ExpressionEngine 和 Structure 附加组件的最新版本。

我正在寻找有关生成 4 个项目导航栏的帮助，其中两个项目位于不同的结构级别。

我的结构行如下所示：

* * *

服务（父）

-----**翻译**（子）

-----**视频**（儿童）

**工作室**（父）

**关于我们**（家长）

* * *

我的主导航栏应该是：

**翻译 - 视频 - 工作室 - 关于我们**

如您所见，它们处于不同的级别。即使使用 Structure Entries 插件，我也已经工作了几个小时，但我根本找不到生成此导航的方法。

我很感激你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T19:23:20.347

Structure 最终将其“页面”存储为常规 EE 条目，因此您可以将条目 ID 硬编码到 channel:entries 循环中以获取标题：

```
<ul>
{exp:channel:entries dynamic="no" entry_id="3|4|6|12" disable="categories|pagination|member_data"}
    <li><a href="{page_uri}">{title}</a></li>
{/exp:channel:entries}
</ul> 
```

或者，如果您想让客户端完全控制导航中显示的内容，您可以为“在主导航上显示”设置一个自定义复选框字段，然后使用如下内容：

```
<ul>
{exp:channel:entries dynamic="no" search:options="=show on primary nav?" disable="categories|pagination|member_data"}
    <li><a href="{page_uri}">{title}</a></li>
{/exp:channel:entries}
</ul> 
```

（使用 P&T 复选框而不是糟糕的内置复选框会更好一些。）

对 Structure 模块没有冒犯，但正是这种东西真正让我使用 Nav-EE，或者，更多时候我会选择完全硬编码的顶级导航......客户通常认为他们需要完全控制但在现实是顶级导航很少会改变（当它改变时，他们可能需要你在网站上做其他工作！）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T20:04:20.683

您正在寻找结构条目：[http](http://devot-ee.com/add-ons/structure-entries) ://devot-ee.com/add-ons/structure-entries （免费！）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T09:14:05.497

我设法获得了结构方式来获得导航，这是一段相当长的代码：

```
<ul class="myclass"> 
{exp:structure:nav start_from="/services" include_ul="no"}
{exp:structure:nav exclude="21|4|10" max_depth="1" include_ul="no"}
</ul> 
```

我发现 James 的硬编码解决方案是最佳选择。谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T20:13:29.577

由于您已经花费了大量时间来摆弄结构条目，我会说给分类法一个机会，因为它肯定会毫不费力地完成工作。[http://devot-ee.com/add-ons/taxonomy](http://devot-ee.com/add-ons/taxonomy)

为了管理不符合标准的导航树，分类模块非常方便和灵活。

# git - 为什么“git rebase”会在阶段和工作副本中留下相反的修改集？

> ID：13183534
> 
> 赞同：9
> 
> 时间：2012-11-01T18:45:06.417
> 
> 标签：git, svn, git-svn, git-rebase, git-stage

我使用 git-svn 作为 svn 客户端。我不时遇到以下问题。

1.  我从本地 git 分支中的几个提交开始，一个空的阶段和一个干净的工作副本。

2.  我在 Windows 命令行中键入“git svn rebase”以获取团队的修改并将我的提交放在他们之后以保持线性历史记录（这是使用 git-svn 所必需的）

3.  一切顺利，团队的内容被获取，然后我的提交被重新设置，但是......

    *我最终在工作副本中进行了修改，并且在阶段中修改了文件，并且工作副本的修改与阶段中的修改完全相反。*

我通常通过取消暂存阶段中的所有内容来解决此问题，这会恢复工作副本中的修改，这很好，但我真的很想了解这里发生了什么。

**问题：这是一个错误，还是我不理解 git rebase 的问题？**

注意：我后来在使用“git svn fetch”和“git rebase”时遇到了问题。

注意：我在具有大型 svn 存储库（10000+ 个文件，150000+ 个修订版）的 Windows 上使用 git，并且我还使用 git-extensions。**编辑：**我只使用它来探索存储库并提交。我从 Windows 命令行执行任何其他操作。

**编辑：**根据评论之一的要求，这里有两个屏幕截图可以帮助理解问题。第一个是工作副本的内容，第二个是阶段的内容。您可以很容易地看到两者是完全相反的：

工作副本： ![在此处输入图像描述](../Images/19f3ef889bdfa4ed890bbbccc9265ac7.png)

阶段（还原工作副本修改，非常直观：相同的图像，红色和绿色交换）： ![在此处输入图像描述](../Images/6f87f28df93622fd7225b3a2ede2336f.png)

**编辑：**我只是在一个非常简单的情况下重现了这个问题：我的提交只修改了一个文件，在“git svn rebase”期间获取的新提交很少，并且没有一个影响修改后的文件。我检查了“gitk --all”。它说的与 git-extensions 和“git status”完全相同。这是 gitk 的输出。我们从下往上看：

*   最后 3 行是变基时获取的 3 个提交。他们都没有碰我的文件。
*   顶部的第 3 行显示了我在 rebase 后的提交：一切都很好，它添加了应该添加的内容并删除了应该删除的内容。
*   第 2 行显示索引的内容：它包含***恢复我的提交的修改***
*   第一行显示了工作副本的内容：它包含与我的提交相同的修改，IE 恢复索引中的修改。

![在此处输入图像描述](../Images/ea0309aa1df10dd16a9536d162233a98.png)

**编辑：**这是`.git`发生问题的“git svn rebase”之后我的目录的内容：

```
17/02/2012  04:57                 0 ArmuazEm5Z
05/04/2012  02:28                 0 BeMzRLwWcu
06/11/2012  14:37                90 COMMIT_EDITMSG
01/11/2012  15:42               628 config
15/02/2012  04:21                73 description
16/02/2012  13:22                 0 fuMhUevkYu
05/11/2012  15:53         1 703 279 gitk.cache
05/07/2012  03:49                 0 gJfUbdRuG9
06/11/2012  14:42                23 HEAD
11/07/2012  03:14    <DIR>          hooks
21/02/2012  03:22                 0 II5HPacSJd
06/11/2012  14:42         5 439 960 index
15/10/2012  13:18    <DIR>          info
16/02/2012  08:16                 0 jerS1GtBYS
17/02/2012  04:57                 0 Kg64sq9pzS
15/02/2012  23:36                 0 lbe0yALJYy
15/10/2012  13:17    <DIR>          logs
19/10/2012  16:58    <DIR>          objects
06/11/2012  14:42                41 ORIG_HEAD
25/10/2012  11:02             2 795 packed-refs
05/07/2012  03:49                 0 PpxYa5z0Hc
02/11/2012  10:00    <DIR>          refs
15/02/2012  23:36                 0 sm6ociDGGF
06/11/2012  14:42    <DIR>          svn
21/02/2012  03:22                 0 vEqtL0Yiqd
05/04/2012  02:28                 0 VFwn3laTEV
16/02/2012  13:22                 0 XYoiLqY5BM
16/02/2012  08:16                 0 z9vL8lRT7t
              22 File(s)      7 146 889 bytes
               6 Dir(s)  54 105 219 072 bytes free 
```

**编辑：**如果您有兴趣跟踪此问题，我在 git@vger.kernel.org 邮件列表上报告了一个错误，主题为“[git-svn] [错误报告] git svn rebase 后索引处于奇怪状态”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T21:21:22.657

这似乎是一个错误。如果你的工作目录和索引在变基之前是干净的，那么在变基之后它们应该是干净的；或者你应该得到一个合并冲突，并有机会清理它并继续变基。

看起来由于某种原因，您的索引在应用本地修改后变得陈旧。

基本上，存储库当前状态的三个主要视图。有 HEAD 提交，它是最后一次提交时存储库的状态，以及您的下一次提交将是什么的子项。这在你的 rebase 期间被正确更新；HEAD 现在是您的本地提交，基于您从上游存储库获得的内容。

有一个索引，它应该包含下一次提交状态的视图。这似乎是问题所在。在从干净的树成功变基后，索引应该看起来与 HEAD 具有相同的存储库视图，但它似乎正在获取上游存储库包含的内容的陈旧视图。在上游存储库之上应用本地补丁后，它似乎没有更新。

还有你的工作副本；磁盘上的实际文件。出于某种原因，当您进行变基时，头部提交正在正确更新，工作树正在正确更新（或被单独保留），但索引处于引用原始提交的状态你正在重新定位。这意味着，如果您将索引与重新定位的提交进行比较，看起来您已经恢复了您的更改，如果您将您的工作副本与您的索引进行比较，看起来您又重新添加了它们。

需要检查的几件事：

1.  `.git`在这样一个有问题的 rebase 之后，你能告诉我们你的目录的内容吗？只是顶级文件的列表`.git`会很有帮助。实际上，包括文件名、修改日期和权限在内的完整列表可能会提供更多信息。
2.  您是在任何类型的网络文件系统上使用它，还是在其他任何奇怪的东西上使用它？网络文件系统有时会出现文件过时的问题；我想知道这是否发生在你身上。
3.  你使用的是什么版本的 Git？

# java - Java 枚举 - 字段、抽象方法和类级别映射之间的选择

> ID：13183537
> 
> 赞同：7
> 
> 时间：2012-11-01T18:45:46.027
> 
> 标签：java, oop, enums

我编写了一个 Java 枚举，其中的值具有各种属性。这些属性可以通过以下任何一种方式存储：

**使用字段：**

```
enum Eenum {
  V1(p1),
  V2(p2);

  private final A attr;

  public A attr() { return attr; }

  private Eenum(A attr) {
    this.attr = attr;
  }
} 
```

**使用抽象方法：**

```
enum Eenum {
  V1 {
    public A attr() { return p1; }
  },

  V2 {
    public A attr() { return p2; }
  }

  public abstract A attr();
} 
```

**使用类级别映射：**

```
enum Eenum {
  V1,
  V2;

  public A attr() { return attrs.get(this); }

  private static final Map<Eenum, A> attrs;

  static {
    ImmutableMap.Builder<Eenum, A> builder = ImmutableMap.builder();
    builder.put(V1, p1);
    builder.put(V2, p2);
    attrs = builder.build();
  }
} 
```

我应该如何决定何时更喜欢哪个？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:49:38.507

我会做你认为最简单的一个。

一般来说，我不会编写可以使用数据实现的代码。我会用第一个。

> 我的实际用例有一些与所有枚举值都不相关的属性

如果对每个属性有意义，您可以使用这些方法的组合。

第四种选择是没有抽象方法。

```
enum Eenum {
  V1 {
    public A attr() { return p1; }
  },

  V2 {
    public A attr() { return p2; }
  }, 
  V3, V4, V5, V6;

  public A attr() { return defaultA; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:51:08.697

这些都没有。做这个：

```
interface HasAttr<T> {
    T attr();
}

enum Eenum implements HasAttr<A> {

    // use "fields" version - ideally with constructor version

    public A attr() {
        return field;
    }

} 
```

此模式遵循基本的[抽象类型](http://en.wikipedia.org/wiki/Abstract_type)设计模式，它允许以下方法：

```
public void someMethod(HasAttr<A> hasAttr);  // pass anything that is HasAttr<a> 
```

优先于固定类型：

```
public void someMethod(Eenum eenum); // locked into passing an Eenum 
```

此外，重要的是，模拟测试更容易，特别是如果您的枚举使用真实连接等。

我承认，所有这一切都只适用于枚举“非平凡”的情况。如果它只是一个普通的旧枚举，我同意它只是代码膨胀（我也讨厌）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T00:00:56.860

（我正在回答我自己的问题，以便我可以分享一些我在尝试的过程中学到的东西。）

以下是您在针对您的具体案例做出决定时应该提出的问题：

**1：属性值是否涉及前向引用？**

有时`V1`的属性可能需要引用，`V2`反之亦然。这不是罕见的情况。如果您正在处理这样的`enum`, 方法 1 根本行不通。编译器会（正确地）抱怨非法的前向引用。可以使用其他两种方法中的任何一种。

现在，如果属性值的计算成本很高并且是一个常数，那么您希望它只计算一次。使用方法 2，您必须为每个枚举值引入局部变量，并在那里缓存结果。这很冗长，但会给你更好的性能。使用方法 3，结果无论如何只计算一次，因此不必做任何额外的工作。与方法 2 相比，这更具可读性，但性能稍差。根据您的案例所保证的特定权衡，在这些之间进行设计。

**2：我需要缓存结果吗？**

请参阅上一个项目符号的第二段。

如果没有前向引用，您也可以使用方法 1。但是，如果属性计算涉及的计算很复杂，则最好使用其他两种方法之一。

**3：属性是否与所有枚举值相关？**

如果不是，那么从逻辑上讲，您应该在`Map`这里使用 a 。也就是方法3。

**4：某些枚举值的某些属性是否有任何默认值？**

如果是这样，您可以使用所有三种方法，它们都提供了不同的权衡。

使用方法 1：您将定义一个辅助构造函数，将属性初始化为默认值。如果有多个这样的属性，这可能不是一个可行的方法。

使用方法 2：这实际上就像 Peter Lawrey 上面建议的“第四种”方法。`enum`您将有一个方法在的主体中返回默认值。并且某些枚举值将覆盖此方法以返回不同的值。这又是相当冗长的。

使用方法3：效率较低。其他方面都很好。

# ruby-on-rails-3 - 带有设计未定义方法`users_url`的Rails 3

> ID：13183539
> 
> 赞同：1
> 
> 时间：2012-11-01T18:46:12.483
> 
> 标签：ruby-on-rails-3, devise

我正在做一些小的改动来设计以覆盖使用的布局和其他一些东西，所以我决定用控制器创建我的自定义路由。到目前为止，我只将此添加到路线中：

```
devise_for :users, :controllers => {
    :sessions => "sessions/user",
    :registrations => "registrations/user"
} 
```

它应该在访问时加载登录页面，`/users/sign_in`并且做得很好。当我尝试将 ajax 发布到该 url 以验证用户输入和登录时，我收到此错误：`NoMethodError (undefined method 'users_url' for #<Sessions::UserController:0x000000041bed98>):`

控制器是基本的，没有任何改变来覆盖设计逻辑：

```
class Sessions::UserController < Devise::SessionsController
    layout "login" # The only addition. Rest is handled by devise
end 
```

我有这个工作了很长一段时间，但今天我决定将设计用于另一个模型（管理员），我使用设计命令生成了它的文件，`rails generate devise Admin`这完全弄乱了我登录用户的工作代码。

有任何想法吗？

# ruby-on-rails - 使用可安装引擎的布局

> ID：13183540
> 
> 赞同：1
> 
> 时间：2012-11-01T18:46:18.817
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-engines

我正在寻找以下问题的解决方案：

db_core 应用程序仅包含小型核心系统的模型。db_core 应用程序将没有任何视图。

在 db_core 应用程序之上，我们将拥有一个管理界面。这将是一个可安装的引擎。管理界面将提供诸如 javascript、css、图像等资产。

最后，我们将拥有额外的可安装引擎；例如。“blog”、“forum”、“authentication”将被挂载到 db_core 应用程序上，所有这些可挂载引擎都应该与管理界面引擎具有相同的布局。

我在 db_core 应用程序为资产提供服务的地方启动并运行了一个测试，但我无法找到如何让另一个引擎为资产提供服务，以便 db_core 应用程序可以保持较小并且没有任何资产和视图。

*   db_core
    *   引擎 A -> 管理界面（资产）
    *   引擎 B、C、D、... -> 使用来自引擎 A 的资产的各种其他引擎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:48:10.687

我认为你的意思是一个孤立的引擎。[请参阅引擎 rdoc](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)中的“隔离”您可以编写一个可安装但不隔离的引擎——本质上意味着它有自己的路由，但在其他方面与普通的老式非隔离引擎相同。

但是出于这些原因，我已经停止将我的引擎编写为孤立的。我很少想要一个与主机应用程序完全隔离的引擎。通常有我希望主机应用程序能够访问的视图模板（如果不是专门的布局）（并且能够使用他们自己的本地模板覆盖，只需将其命名为相同但在加载路径中更早）主机应用程序），和/或我希望主机应用程序能够访问并能够逐个方法覆盖的辅助方法，和/或我希望在主机应用程序中使用的资产等。是，您可以编写一个生成器来复制它们，但这会将它们“冻结”在主机应用程序中，并且可能是向前兼容性问题。

因此，就我个人而言，我发现孤立的引擎导致的问题多于解决的问题。我只是使用“普通”引擎，然后 DIY 以正确的方式隔离需要隔离的部分（例如模块命名空间控制器）。

路由/可安装也是如此。我不使用 Rails 的“可安装”引擎，但我的引擎也没有通过自己的 engine/config/routes.rb 自动加载来自动将路由添加到主机应用程序。相反，我让（不可挂载的）引擎提供了一种方法，主机应用程序可以将其放入它自己的 routes.rb （路由对象作为 arg 传递），调用时会将引擎需要的路由添加到应用程序。该方法可以接受参数来自定义事物（只添加一些路由而不添加其他路由，使用自定义路由命名空间等）。

我认为 Rails 3 为您提供了“普通”引擎所需的所有构建块，使其以您想要的方式与应用程序集成。mountable/isolated 的更高层次的抽象，它为你修复了一堆这些选择，导致一些只适合某些用例的东西。如果您确实想要一个完全隔离的子系统的引擎，那当然可以。如果您需要编写一个可以与任何 Rack 应用程序一起工作的引擎，而不仅仅是 Rails，那么您基本上需要将它作为一个完全隔离的子系统运行（这就是设计最终所在的位置），但是您放弃了很多要做到这一点。但我开始相信这实际上不是“从现在开始做引擎的最佳方式”的未来。

对于您正在尝试做的事情，我认为将您的引擎隔离会适得其反。让他们不被孤立。但是接下来会有一些东西要弄清楚如何让你的引擎只使用你想要的隔离和路由类型（而不是你不想要的类型），这是真的 - 遗憾的是，这些东西没有很好地记录在案.

# ruby-on-rails - 如何让 Rails 3 在带乘客的服务器上以生产模式运行

> ID：13183541
> 
> 赞同：1
> 
> 时间：2012-11-01T18:46:28.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache, capistrano, passenger

嗨，我正在使用 Capistrano 部署脚本运行 Passenger/mongo/Rails 3.2（没有 activerecord 或 mysql）。

我正在尝试让我的应用程序在我的 linux 服务器上以生产模式运行。

在我的 apache 配置文件中，我有以下...

```
<VirtualHost *:80>
 ServerName example.com
 ServerAlias www.example.com
 DocumentRoot /srv/www/example.com/current/public
 ErrorLog /srv/www/example.com/current/log/error.log
 CustomLog /srv/www/example.com/current/log/access.log combined
 PassengerDefaultUser www-data
  <Directory /srv/www/test.example.com/current/public>
     AllowOverride all
     Options -MultiViews
  </Directory>
 RailsEnv production
</VirtualHost> 
```

编辑：在我的 environment.rb 文件中，我不再有以下内容......

```
RAILS_ENV="production"
RAILS_ENV.freeze 
```

在我的 Capistrano deploy.rb 我有以下...

```
set :rails_env, "production" 
```

**编辑：**但是当我通过 capistrano 部署或执行 sudo service apache2 restart 时。它说apache重新启动但是当我访问url时服务器永远不会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:15:50.483

似乎是一个不寻常的问题。我已经部署了许多具有相似或相同堆栈的应用程序，没有发生任何事故。

尝试这个：

1.  请从您的 environment.rb 文件中删除任何自定义代码（与此问题相关）。
2.  从部署文件中删除 rails_env 变量
3.  确保在 Apache 虚拟主机配置中保留“RailsEnv 生产”
4.  SSH 进入服务器并手动重启 Apache

我会在早上检查，但我认为 mod_rails 的重启任务不好，我想我已经在部署后手动重启了 Apache。不知道为什么，认为这与“current_path”只是一个符号链接的事实有关，或者“PassengerMinInstances”可能会阻止新的乘客线程使用修改后的代码产生。一切猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:48:31.990

对于带有`config.ru`文件的 Rails 3.x 应用程序，您应该`RackEnv`在配置中使用该参数`VirtualHost`：

```
RackEnv production 
```

你真的不应该`RAILS_ENV`在`environment.rb`. 这势必会引发各种问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:55:32.760

在我的生产环境（应用程序名称 conflux）上，标签内有 RailsEnv 生产。

```
<Directory /var/www/conflux/current/public>
  RailsEnv production
  PassengerAppRoot /var/www/conflux/current
  Allow from all

  #Turn off MultiViews, which is incompatable with Passenger.
  Options -MultiViews
</Directory> 
```

我同意不在 environment.rb 中设置 RAILS_ENV。一方面，RAILS_ENV 是一个常量，我认为如果使用它（在 Rails 3 之前），它会在进入环境之前设置。所以，它可能已经被设置，并且作为一个常数，不会改变。

我也不确定在 Rails 3 中是否再使用 RAILS_ENV。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T11:02:25.370

您是否尝试过预编译资产，一旦预编译，资产将放置在公用文件夹中，然后只有您才能在生产模式下成功运行它。`rake assets:precompile`如果它是 jruby 那么试试这个`jruby -S rake assets:precompile`。

如果服务器处于生产模式，资产管道和资产服务器需要在 production.rb 中设置为“TRUE”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T17:56:41.190

我假设这是您目录的权限设置

```
<Directory /srv/www/**test.example.com/**current/public>
     AllowOverride all
     Options -MultiViews
</Directory> 
```

在这种情况下，这是否必须与您的文档根设置相同

```
DocumentRoot /srv/www/**example.com**/current/public 
```

不太熟悉 Capistrano 或 apache，但我一直认为这些需要相同。

# css - IE 开发者工具导致行为改变

> ID：13183544
> 
> 赞同：2
> 
> 时间：2012-11-01T18:46:32.880
> 
> 标签：css, internet-explorer, ie-developer-tools

当我在 IE10 w/compat 中查看我的页面时。模式（IE7 标准）页面不正确地呈现某些元素。但是，当我使用开发人员工具 (F12) 检查元素并更改*任何内容*时，突然之间，元素会正确呈现。

以前有人见过这样的事情吗？如果是这样，你是如何解决的？试图排除故障，却无法触及任何东西，这令人抓狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T12:31:46.123

同样的事情，IE10 开发者。工具使某些 CSS 样式完全消失！我注意到类名“top”失去了它的定义。有趣的是，当我将其重命名为 class="topbar" 时，我的问题就解决了。

# unix - sed 从字符串中提取一些东西

> ID：13183545
> 
> 赞同：0
> 
> 时间：2012-11-01T18:46:33.750
> 
> 标签：unix, sed

我有一个字符串“r1/pkg/amd64/misc/hash/hash-r1.r5218.tbz”但是，我只想要“hash-r1.r5218.tbz”

所以，我试试这个

```
 unix$ a="r1/pkg/amd64/misc/hash/hash-r1.r5218.tbz"
 unix$ echo $a | sed 's/.*\/\([^\/]*\)\.tbz/\1/'  //[1]
 hash-r1.r5218   //I know this should work

 unix$ echo $a | sed 's/.*\/\([^\/]+\)\.tbz/\1/'  //[2]
 r1/pkg/amd64/misc/hash/hash-r1.r5218.tbz    //however I do not know why it does not work. 
```

据我记得，正则表达式中的 + 意味着使用以前的正则表达式 1 次或更多次。* 在正则表达式中，表示使用前一个正则表达式 0 次或更多次。

谁能解释为什么 [2] 失败，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:52:23.793

```
a="r1/pkg/amd64/misc/hash/hash-r1.r5218.tbz"
echo $a | sed 's:.*/::; s:.tbz$::'
hash-r1.r5218 
```

您不需要使用“/”作为模式/复制标记，您可以使用其他字符。':' 很受欢迎。

此外，当您知道目标数据两侧的确切文本时，您不必使用捕获缓冲区。

我已经替换了所有字符直到最后一个'/'，依赖于`.*`所有字符和'/'来终止sed的标准贪婪搜索。你用注意分出尾随`\.tbz`。

IHTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:39:21.330

并非所有版本的正则表达式都`sed`支持`+`。有些确实支持它需要`-r`指定。但是为什么要使用`sed`代替`basename`or`echo ${a##*/}`呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:02:28.427

通过括号使用这个子匹配将抓取最后一个斜线到行尾的所有内容。

```
str="r1/pkg/amd64/misc/hash/hash-r1.r5218.tbz"
echo $str | sed -n -E -e 's/.+\/(.+)$/\1/p' 
```

返回哈希-r1.r5218.tbz

哦，你的 #2 失败了，因为 sed 默认打印出匹配的每一行。使用 -n 标志会抑制这种情况，并且此正则表达式上的尾随 'p' 会打印出替换的替换部分。

# optimization - 受约束的单目标优化

> ID：13183547
> 
> 赞同：1
> 
> 时间：2012-11-01T18:46:35.320
> 
> 标签：optimization, go

## 介绍

我需要使用设置的两个值（在本例中为重量和体积）拆分一个填充有某种类型（例如，我们以水桶为例）的数组，同时将总重量之间的差异保持在最小（首选）和小于 1000 的总卷之间的差异（必需）。这不需要是一个完整的遗传算法或类似的东西，但它应该比我目前拥有的更好......

## 当前实施

由于不知道如何做得更好，我首先将数组拆分为两个长度相同的数组（数组可以填充奇数个项目），用两个值都为 0 的项目替换可能的空点。双方不需要有相同数量的项目，我只是不知道如何处理它。

在分发了这些之后，我正在尝试像这样优化它们：

```
func (main *Main) Optimize() {
    for {
        difference := main.Difference(WEIGHT)

        for i := 0; i < len(main.left); i++ {
            for j := 0; j < len(main.right); j++ {
                if main.DifferenceAfter(i, j, WEIGHT) < main.Difference(WEIGHT) {
                    main.left[i], main.right[j] = main.right[j], main.left[i]
                }
            }
        }

        if difference == main.Difference(WEIGHT) {
            break
        }
    }

    for main.Difference(CAPACITY) > 1000 {
        leftIndex := 0
        rightIndex := 0
        liters := 0
        weight := 100

        for i := 0; i < len(main.left); i++ {
            for j := 0; j < len(main.right); j++ {
                if main.DifferenceAfter(i, j, CAPACITY) < main.Difference(CAPACITY) {
                    newLiters := main.Difference(CAPACITY) - main.DifferenceAfter(i, j, CAPACITY)
                    newWeight := main.Difference(WEIGHT) - main.DifferenceAfter(i, j, WEIGHT)

                    if newLiters > liters && newWeight <= weight || newLiters == liters && newWeight < weight {
                        leftIndex = i
                        rightIndex = j
                        liters = newLiters
                        weight = newWeight
                    }
                }
            }
        }

        main.left[leftIndex], main.right[rightIndex] = main.right[rightIndex], main.left[leftIndex]
    }
} 
```

### 功能：

*main.Difference(const)*计算两侧的绝对差，作为参数的常数决定计算差的值

*main.DifferenceAfter(i, j, const)*模拟两个桶之间的交换，i 是左边的桶，j 是右边的桶，然后计算得到的绝对差，然后常量再次确定要检查的值

### 解释：

基本上这是从优化权重开始的，这是第一个 for 循环所做的。在每次迭代中，它都会尝试可以切换的桶的所有可能组合，如果之后的差异小于当前差异（导致更好的分布），它会切换它们。如果权重不再变化，它就会跳出 for 循环。虽然不完美，但效果很好，我认为这对于我想要完成的事情是可以接受的。

然后应该是根据体积优化分布，所以总的差异小于1000。这里我尝试更加小心，并在切换之前搜索一次运行中的最佳组合。因此，它搜索导致最大容量变化的铲斗开关，并且也应该在这之间进行权衡，尽管我看到第一个铲斗组合尝试的缺陷将设置升和重量变量，从而导致下一个可能的组合被大量减少。

## 结论

我想我需要在这里包含更多的数学，但老实说我被困在这里并且不知道如何继续在这里，所以我想从你那里得到一些帮助，基本上可以帮助我在这里是受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:41:54.020

如前所述，您的问题实际上是一个*受约束*的优化问题，对您的体积差异有约束。

从数学上讲，这将在体积差小于 1000 的*约束下**最小化*体积差。将其表示为线性优化问题的最简单方法是：

 *```
min weights . x
    subject to  volumes . x < 1000.0
                for all i, x[i] = +1 or -1 
```

`a . b`矢量点积在哪里。解决此问题后，所有索引`x = +1`对应于您的第一个数组，所有索引`x = -1`对应于您的第二个数组。

不幸的是，已知[0-1 整数编程](http://en.wikipedia.org/wiki/Integer_programming)是[NP-hard](http://en.wikipedia.org/wiki/NP-hard)。解决它的最简单方法是对空间进行详尽的蛮力探索，但它需要测试所有`2^n`可能的向量`x`（原始向量和向量`n`的长度在哪里），这很快就会失控。有很多关于这个主题的文献，有更有效的算法，但它们通常高度特定于一组特定的问题和/或约束。你可以谷歌“线性整数规划”来看看在这个主题上做了什么。`weights``volumes`

我认为最简单的方法可能是执行基于启发式的蛮力搜索，在这种情况下，您可以尽早修剪您的搜索树，因为它会让您摆脱音量限制，并保持接近您的限制（作为一般规则，线性的解决方案优化问题在可行空间的边缘）。

以下是您可能想阅读的有关此类优化的几篇文章：

*   [UCLA 线性整数规划](http://www.ee.ucla.edu/ee236a/lectures/intlp.pdf)
*   [麻省理工学院整数规划课程](http://web.mit.edu/15.053/www/AMP-Chapter-09.pdf)
*   [Carleton 二进制编程课程](http://www.sce.carleton.ca/faculty/chinneck/po/Chapter13.pdf)
*   [关于组合优化和线性整数规划的文章](http://books.google.co.uk/books?hl=en&lr=&id=oAX92xSZbNAC&oi=fnd&pg=PA1&dq=combinatorial+optimisation&ots=BmW0P92b1l&sig=GLE4Il-4m4ieqaXemNQVDkB0a4o)

如果您不熟悉优化文章或一般数学，[维基百科文章](http://en.wikipedia.org/wiki/Linear_programming)提供了很好的介绍，但大多数关于此主题的文章都会快速显示一些您可以立即适应的（伪）代码。

如果您`n`很大，我认为在某些时候您将不得不在解决方案的优化程度和计算速度之间做出权衡。您的解决方案可能不是最理想的，但它比穷举搜索要快得多。根据问题的确切配置，可能会有更好的权衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:27:34.897

*在您的情况下，重量差异*似乎是客观的，而*体积差异*只是一个约束，这意味着您正在寻求优化*重量*属性差异（尽可能小）的解决方案，并满足*差异的条件卷*属性（总数 < 1000）。在这种情况下，它是一个单目标约束优化问题。

然而，如果您对多目标优化感兴趣，也许您想看看 Pareto Frontier 的概念：[http](http://en.wikipedia.org/wiki/Pareto_efficiency) ://en.wikipedia.org/wiki/Pareto_efficiency 。有利于保持多个在不同目标中具有优势的良好解决方案，即不失去多样性。*

# eclipse - 如何将 Eclipse 工作区与 git 本地存储库隔离？

> ID：13183548
> 
> 赞同：8
> 
> 时间：2012-11-01T18:46:35.537
> 
> 标签：eclipse, git, repository, egit

我在 Juno 上安装了 EGit，并在 Eclipse 的工作区中创建了一个 Java 项目。然后我把那个项目分享给了 Git。然后当我检查项目的属性时，我发现该项目已从其原始工作区移动到 Git 本地存储库中。当我在 Eclipse 编辑器中进行一些更改时，这些更改是在本地存储库中进行的，无需提交。

如何将 Eclipse 工作区与 git 本地存储库隔离？

（嗯，我的 Eclipse 工作区是 ~/Documents/workspace，我的 git 本地存储库是 ~/git/myrepository1。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T19:42:39.853

工作区仍位于编辑之外的原始位置。它是已移动到 git 控制的目录中的项目。通常项目是在 Eclipse 工作区文件夹中创建的，但您可以覆盖该默认值。

如果您真的想将更改与 git 隔离开来，则必须打破 git 对项目的控制，但您可能仍需要将项目内容移回工作区。不幸的是，将进一步的更改返回到 git 的过程变得非常混乱。

一开始我发现 git 控制我的 eclipse 项目的方式令人不安，但过了一段时间它开始变得有意义，并且确实是一个非常强大的版本控制功能。

# c# - 什么会导致 ASP.NET 临时文件在第 0 行出现错误？

> ID：13183551
> 
> 赞同：0
> 
> 时间：2012-11-01T18:46:47.163
> 
> 标签：c#, asp.net, iis

我们有一个`ASP.NET 4.0`随机抛出`"Object reference not set to an instance of an object"`异常的网站。`"Temporary ASP.NET Files"`这些错误往往会突然发生，例如，堆栈跟踪总是指向其中一个中的第 0 行`"App_Web_f0ihyyu5.3.cs"`。尝试在我们的开发服务器上对其进行故障排除时，我永远无法重现该问题。

当这些错误开始发生时，清除临时文件似乎会阻止它们几天，然后它们会慢慢开始重新出现。我不确定如何调试这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:26:14.863

我不能告诉你确切的原因，但根据我的经验，这些临时文件有时似乎没有正确更新。

每次构建都会生成新的随机名称，因此名称中有有趣的“f0ihyyu5.3”部分。我相信其中一些文件本应从您的发布/刷新/重新加载中删除时，会在临时文件夹中“遗留”（无法删除），从而导致页面冲突。

对我来说最好的解决方案是编译成一个程序集。然后，您还将确切知道文件夹中的 dll 名称应该是什么。

[如何使用 VS 2010 将 ASP.NET 4.0 预编译为单个 DLL](https://stackoverflow.com/questions/4881663/how-to-precompile-asp-net-4-0-to-a-single-dll-with-vs-2010)

我知道这对你来说不是一个很好的技术答案，但我不止一次经历过这个。省去自己的痛苦，只需编译成一个 dll。

# asp.net - ASP.NET 和多线程最佳实践

> ID：13183553
> 
> 赞同：1
> 
> 时间：2012-11-01T18:46:49.657
> 
> 标签：asp.net, multithreading, architecture

我正在处理 ASP.NET 项目，昨天我看到一段代码使用 System.Threading.Thread 将一些任务卸载到新线程。该线程运行一些 SQL 语句并记录结果。

使用另一种方法不是更好吗？例如，拥有一个执行 SQL 批处理的 Windows 服务。然后网页将仅将批处理排入队列（通过 WCF）。

一般来说，ASP.NET 中多线程的最佳实践是什么？线程/TPL 任务/等的使用是否合理？在网页中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:29:20.787

我在 ASP.NET 中使用多线程时的想法：

1.  ASP.NET 出于某些原因（例如您更改 web.config 或在一段时间内避免内存泄漏）回收 AppDomain。问题是你不知道回收的确切时间。长时间运行的线程不适合，因为当 ASP.NET 回收时，它会相应地降低您的线程。这种情况的*正确*方法是长时间运行的任务应该通过队列在后台进程上运行，就像你提到的那样。

2.  对于*短期运行和触发并忘记任务*，*TPL*或*async/await*是最合适的，因为它不会阻塞线程池中的线程以用于 HTTP 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:39:32.507

在我看来，这应该通过在数据库中提高某种标志和定期检查标志并启动作业的 Windows 服务来解决。如果作业过于频繁，则应使用专用队列解决方案（MSMQ、RabbitMQ 等）以避免数据库过载或表增长过快。我不认为通过 WCF 或其他任何方式直接与 Windows 服务通信是一个好主意，因为这可能会导致消息丢失。

话虽如此，有时项目需要在共享主机中运行，并且无法设置专用的 Windows 服务。在这种情况下，可以接受一个线程作为解决方法，一旦项目增长到足以拥有自己的服务器，就应该将其删除。

我相信 ASP.NET 中的所有其他线程都是一个问题的迹象，除了使用任务来表示异步操作，或者在极少数情况下，当您想在 Web 项目中并行执行计算但您的项目只有很少的并发用户（并发用户数少于核心数）

为什么任务在 ASP.NET 中很有用？

使用 Tasks 进行异步操作的第一个原因是，从 .NET 4.5 开始，异步 API 返回 Tasks :) 异步操作（不要与并行计算混淆）可能是 Web 服务调用、数据库调用等。它们可能对两件事有用：

1.  一次解雇几个，你的工作将花费相当于最长操作的时间。如果您以顺序（非异步）方式触发它们，它们将花费等于每个操作时间总和的时间，这显然更多。
2.  他们可以通过释放执行页面的线程来提高可伸缩性 - Node.js 样式。ASP.NET 一直支持这一点，但在 4.5 版中它真的很容易使用。我会声称它比 Node.js 更容易，因为 async/await。释放线程很重要，因为您可能会通过让它们等待来耗尽池中的线程。结果是当有一定数量的用户时，您的网站会变得很慢，尽管 CPU 使用率大约是 30%，这仅仅是因为新请求在队列中等待。如果您增加线程池中的线程数，那么您付出的代价就是持续的上下文切换，而不是操作系统。在某些时候，您将获得 100% 的 CPU 使用率，但其中 40% 将用于上下文切换。您将增加吞吐量，但收益递减。

# c++ - 需要简单的 c++ 递归解释

> ID：13183554
> 
> 赞同：1
> 
> 时间：2012-11-01T18:46:50.113
> 
> 标签：c++, recursion, binary-tree

我目前正试图围绕递归进行思考，所以我选择了一本 c++ 教科书并开始阅读。递归一章的前几页很容易理解，但后来我遇到了一个对我来说没有意义的项目。

```
 int height(node *p)
 {
    if(p==NULL)
       return 0;
    else{
   return 1 + max(height(p->llink),height(p->rlink));

  } 
```

如果 max 给了我两个值中的最大值， max 如何从它返回的高度获取它的参数。如果有人可以提供帮助，我将不胜感激......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T18:50:05.820

要理解递归，您必须递归地思考：

*   你可以理解一棵空树的高度为0
*   您可以理解，通用非空树的高度为 1 + 最长子树的高度（可以是从左侧或从右侧开始的子树）

从这里开始，您可以轻松理解代码。如果你画树，你会看到会发生什么。如果你有例如

```
 A
    / \
   B   C
  / \  
 D   E 
```

*   `height(A)`将返回`1 + max(height(B), height(C))`
*   `height(B)`将返回`1 + max(height(D), height(E))`
*   `height(C)`将返回`1 + max(height(NULL), height(NULL)) = 1`
*   `height(D)`将返回`1 + max(height(NULL), height(NULL)) = 1`
*   `height(E)`将返回`1 + max(height(NULL), height(NULL)) = 1`

所以

```
height(A) = 1 + max(height(B), height(C)) =
= 1 + max(1 + max(height(D),height(E)), 1) =
= 1 + max(1 + 1, 1) = 1 + max(2, 1) = 3 
```

（我省略了调用，`height(NULL)`因为它们是微不足道的 0，否则它会太冗长。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:54:55.683

函数的参数在函数调用之前进行评估。

因此，您的等效示例可能如下所示（这可能更有意义？）：

```
int height(node *p)
 {
    if(p==NULL)
       return 0;
    else{
       int heightLeftSubtree = height(p->llink);
       int heightRightSubtree = height(p->rlink);
       return 1 + max(heightLeftSubtree, heightRightSubtree);
    }
 } 
```

# matlab - MATLAB 求解器，调用方程中的预定义变量

> ID：13183564
> 
> 赞同：0
> 
> 时间：2012-11-01T18:47:35.910
> 
> 标签：matlab, solver

所以我想知道如何将预定义的变量输入到方程本身中。

这是代码。

```
function[A, B, C] = A_B_C_problem_generalized(lambda_1, lambda_2, mu_1, mu_2, gamma_1, gamma_2)

clear
clc
syms a1 a2 a4 b1 b2 b4 c1 c2 c4

[a1, a2, a4, b1, b2, b4, c1, c2, c4] = ...
solve('a1 + a4 = lambda_1 + lambda_2', ...
'a1*a4 - a2^2 = lambda_1 * lambda_2', ...
'b1 + b4 = mu_1 + mu_2', ...
'b1*b4 - b2^2 = mu_1 * mu_2', ...
'c1 + c4 = gamma_1 + gamma_2', ...
'c1*c4 - c2^2 = gamma_1 * gamma_2', ...
'c1 = a1 + b1', ...
'c2 = a2 + b2', ...
'c4 = a4 + b4');
... 
```

我怎么能这样做呢？lambda、mu 和 gamma 应该是您输入的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:10:18.373

啊，正确的方法是不使用字符串。相反，将其转换为求根问题，如果您将所有内容移到等式的一侧，求解器会自行完成...

```
syms a1 a2 a4 b1 b2 b4 c1 c2 c4

[a1, a2, a4, b1, b2, b4, c1, c2, c4] = ...
solve(a1 + a4 - (lambda_1 + lambda_2), ...
a1*a4 - a2^2 - (lambda_1*lambda_2), ...
b1 + b4 - (mu_1 + mu_2), ...
b1*b4 - b2^2 - (mu_1*mu_2), ...
c1 + c4 - (gamma_1 + gamma_2), ...
c1*c4 - c2^2 - (gamma_1*gamma_2), ...
c1 - a1 - b1, ...
c2 - a2 - b2, ...
c4 - a4 - b4) 
```

是要走的路。

# c# - 使用 Linq 处理列表中的项目组

> ID：13183566
> 
> 赞同：1
> 
> 时间：2012-11-01T18:47:40.830
> 
> 标签：c#, .net, linq

> **可能重复：**
> [LINQ 分区列表到 8 个成员的列表中](https://stackoverflow.com/questions/3773403/linq-partition-list-into-lists-of-8-members)
> [我如何分块一个可枚举的？](https://stackoverflow.com/questions/12389203/how-do-i-chunk-an-enumerable)

我有一个包含许多项目的列表，以及一个适用于这些相同项目的较短列表的方法。

我可以使用 LINQ 从大列表中提取 N 个元素，然后一次将它们传递给方法 N 吗？我确信有一种优雅的方法可以做到这一点，而不必制作“int i=0;” 多变的。

让我说清楚，我知道 foo.Take(10) 会让我从列表中删除 10 项。但我需要继续处理下一组 10 个，然后是下一组 10 个，依此类推。伪代码应该是这样的：

```
var shortList = BigList.NiceMethod(10);
foreach (shorty in shortlist)
{
  Method(shorty);
} 
```

这可能是一些群呼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:49:26.217

您可以将 an 传递`IEnumerable<T>`给您的方法并使用[`Enumerable.Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx).

```
var part = items.Take(10);
method(part); 
```

对于下一部分，您可以使用`Skip`+ `Take`：

```
var part = items.Skip(10).Take(10);
method(part); 
```

另一种选择：[`Enumerable.GroupBy`](http://msdn.microsoft.com/en-us/library/bb534501.aspx)与余数运算符`%`一起使用 n 个数据包：

```
int groupCount = 5;
var parts = items.GroupBy(i => i % groupCount);
foreach (var p in parts)
    method(p); 
```

**编辑**：如果您需要将序列划分为具有相同大小的较小序列，您可以使用此扩展：

```
public static IEnumerable<IEnumerable<T>> Batch<T>(this IEnumerable<T> collection, int batchSize)
{
    List<T> nextbatch = new List<T>(batchSize);
    foreach (T item in collection)
    {
        nextbatch.Add(item);
        if (nextbatch.Count == batchSize)
        {
            yield return nextbatch;
            nextbatch = new List<T>(batchSize);
        }
    }
    if (nextbatch.Count > 0)
        yield return nextbatch;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T18:53:07.633

这将为您提供一个列表列表，其中每个列表最多包含 N 个元素。

```
int N = 3;
List<int> list = new List<int>() { 1, 2, 3, 4, 5, 6, 7, 8, 9 };

var ListOfLists = list.Select((x, inx) => new { Item = x, Group = inx / N })
                        .GroupBy(g => g.Group, g => g.Item)
                        .Select(x => x.ToList())
                        .ToList(); 
```

您也可以使用 Morelinq 的[Batch](http://code.google.com/p/morelinq/source/browse/MoreLinq/Batch.cs?r=f85495b139a19bce7df2be98ad88754ba8932a28)方法

```
var ListOfLists2 = list.Batch(3).Select(x => x.ToList()).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:10:25.273

这对我有用

```
 var l = Enumerable.Range(0, 1000).ToList<int>();
        int size = 11;
        var result = Enumerable.Range(0, l.Count / size + 1)
            .Select(p => l.Skip(p * size).Take(Math.Min(size, l.Count - size * p)).ToList())
            .Where(p=>p.Count > 0).ToList(); 
```

# database - 财务预测的数据库模式设计

> ID：13183568
> 
> 赞同：0
> 
> 时间：2012-11-01T18:47:41.610
> 
> 标签：database, database-design, accounting

我需要开发一个允许公司预测财务状况的网络应用程序。

该应用程序有不同的屏幕，一个用于定义员工工资，另一个用于销售预测等。基本上将一个 excel 财务预测模型变成一个应用程序。

问题是，设计数据库的最佳方式是什么，以便快速生成财务报告（例如损益表或资产负债表）？

*   假设预测期为 5 年，您是否有一个 5 年*12 个月 = 每行 60 个字段的表？性能够吗？
*   每当单个员工数据发生变化时，您会使用数据库触发器重新计算工资支出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:27:05.647

我认为最好将每个月的预测存储在自己的行中，如下所示

```
month   forecast
-----   --------
    1      30000
    2      31000
    3      28000
   ...       ...
    60     52000 
```

然后您可以使用聚合函数来计算预测报告、贴现现金流等（例如，如果您想要仅 4 年的未贴现总数）： `SELECT SUM(forecast) from FORECASTS where month=>1 and month<=48`

对于工资支出，我认为拥有一个动态计算的视图（或者如果你的数据库引擎支持“物化视图”应该有足够的性能，除非我们谈论的是大量员工或非常慢的数据库。

也许有一个工资历史表，当员工数据更改/工资单运行时触发填充

```
employeeId    month   Salary
----------    -----   ------
         1        1     4000
         2        1     3000
         3        1     5000
         1        2     4100
         2        2     3100
         3        2     4800
       ...      ...      ... 
```

然后，您可以执行 SUM 或其他聚合函数来获取报告的数据。

# javascript - Jsdatepick 未在 Firefox 或 chrome 中提交的表单上传递日期数据

> ID：13183574
> 
> 赞同：0
> 
> 时间：2012-11-01T18:48:15.293
> 
> 标签：javascript, html, forms, asp-classic, input

所有输入都在 IE9 中正确传递，我将它们打印到屏幕上。“订单”和“进度”的输入在 firefox/chrome 中正确传递，但不是“date1”或“date2”字段。他们使用 jsdatepick 库来确定日期 - 日期填写到表格中，如下所示：“10-01-2012”。在下一页上，我拿起请求数据并打印到屏幕上。有什么提示吗？

```
<script type="text/javascript" src="jsDatePick.full.1.3.js"></script>
<link rel="stylesheet" type="text/css" media="all" href="jsDatePick_ltr.min.css" />
<script type="text/javascript">
window.onload = function(){
    new JsDatePick({
        useMode:2,
        target:"date1",
    });

    new JsDatePick({
        useMode:2,
        target:"date2",
    });
};
</script>
<Form action="ai_school_stats_return.asp" method="POST" name="stats">
  <input type="hidden" id="order" name="order" value="order">
  <tr>
    <td width="40" align="right">From date:</td>
    <td align="left"><input type="bundatetext" name="date1" id="date1" maxlength="10" value=<%=Session("date1")%>></td>
  </tr>
  <tr>
    <td width="40" align="right">To date:</td>
    <td width="60"><input type="bundatetext" name="date2" id="date2" maxlength="10" value=<%=Session("date2")%>></td>
  </tr>
  <tr>
    <td width="40" align="right">Lesson Progressed Past</td>
    <td width="60"><input type="text" name="progress" id="progress" maxlength="10" value=<%=Session("progress")%>></td>
  </tr>
  <tr>
    <td colspan="3">&nbsp;</td>
  </tr>
  <tr>
    <td colspan="3"></td>
  </tr>
  <tr>
    <td width="183">&nbsp;</td>
    <td width="133">&nbsp;</td>
    <td width="184">&nbsp;</td>
  </tr>
  <tr>
    <td colspan="3">
      <div align="center"><input type="image" value="submit" src="../images/submit_up.gif" width="132" height="30"></div>
    </td>
  </tr>
</table>
</Form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:47:39.273

原来是一件极其简单的事情。我在表格之外声明了一个表格。因此，firefox 在确定要传递哪些数据的同时，看到了包含表单外部输入的表——当与 .js fn 结合使用时，它最终传递了 fn 中不涉及的数据。教训：当 IE 工作但 Firefox 没有工作时，你知道你的代码确实有问题。

# windows - %M2% 不在系统变量 Path 中工作，但在用户变量 Path 中仅工作

> ID：13183575
> 
> 赞同：3
> 
> 时间：2012-11-01T18:48:25.573
> 
> 标签：windows, maven, path

我正在安装 Maven，需要设置 M2 和 M2_Home。我已将它们设置在环境变量的用户变量中。我`;%M2%`在环境变量中的系统变量中添加了Path变量。我期待能够跑`mvn --version`，但我不能。但是，如果我这样做， `echo %Path%`我可以看到`%M2%`路径中有，如果`echo %M2%`我可以看到 mvn 所在的 bin 目录。

所以我遇到了这个问题。`%M2%`直到我在用户变量中创建了一个路径变量并将其添加到该变量（并将其从系统变量中的路径中删除）后，问题才得到解决。现在它起作用了。有谁知道为什么它只以这种特定方式工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:01:57.487

您必须查看 Windows 源代码才能确定发生了什么，但这并不让我感到惊讶。根据我的测试，系统环境变量似乎只能引用其他系统环境变量，而不是用户环境变量。

请注意，`echo %PATH%`应该显示展开的路径。你不应该看到`%M2%`。

这可能是因为系统环境变量有时需要在没有用户上下文的情况下进行扩展。如果用户环境变量包含在系统环境变量的扩展中，则需要将其视为特殊情况。这也可能被认为是首选行为，以便用户的环境变量不会意外影响系统变量的解释，或者存在与进程之间继承环境变量的方式相关的问题。

`%M2%`像您一样添加到用户路径，或者创建`M2`一个系统而不是用户环境变量。

# c# - 允许用户在应用程序中嵌入原始 sql 查询是一种好习惯吗？

> ID：13183577
> 
> 赞同：3
> 
> 时间：2012-11-01T18:48:27.293
> 
> 标签：c#, entity-framework, design-patterns

我尽力想出一个合适的标题，如果没有多大意义，请找借口。我希望在下面更好地解释它。我们有一个基于 .Net 框架并使用 SQL 作为数据存储的应用程序。与任何应用程序一样，此应用程序需要支持可扩展性，例如支持额外的数据转换和验证。

**示例：**将应用程序视为提供一组输入表的工具，用户可以使用 access 或 excel（已经有 UI 和网格）将数据导入以允许数据导入。导入数据后，该工具会创建一个中间模型并对输入数据执行一些计算，然后以预定义格式抛出结果。输入表模式和中间模型模式是固定的，不会发生任何变化。在从输入数据导出中间模型的阶段需要可扩展性。允许用户能够更改数据获取的方式，例如，而不是按一个字段分组，而是允许按多个字段分组等。

为了支持这种灵活性，我看到有两种基本方法

选项 1：创建映射到 sql 数据模型的业务模型并向用户公开业务模型以允许他们覆盖转换并创建新的转换（例如，使用 LINQ 或纯 C#）

选项 2：公开整个 sql 数据模型并允许用户嵌入原始 SQL 查询来执行转换和验证。

我个人的偏好是使用选项 1，因为我不喜欢允许用户直接使用底层数据表。我更喜欢更受控制的访问。但是，这种方法要求用户具有编程语言（C# 或 VB）。另一方面，选项 2 可能只需要具有 SQL 编程知识的人来创建原始查询并将它们直接插入应用程序。但是，我认为这是一个不好的方法。

产品管理团队倾向于选择选项 2，因为他们认为从资源的角度来看它更灵活且易于实施。

因此，我试图提出这两种方法的优缺点，以更好地支持我对选项 1 的倾向。基本上，倾向于用 C# 或 VB .net 的编程语言完成工作，而不仅仅是使用普通的 SQL 查询。

请分享您的想法和意见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T18:55:38.783

**这两种选择都不是一个好的选择。**

最终用户（理论上）精通业务逻辑——他们不应该需要精通编程语言来完成他们的工作。

你应该做的是创建一个使用标准控件扩展事物的框架 - 组合框、文本输入、网格等。如果没有具体说明你正在寻找什么样的可扩展性，很难给你具体的建议，但我会给出你是我项目中的一个例子：

我们的用户需要一种向产品添加任意标签的方法，以便在我们的网站上进行过滤。我们创建了一个数据网格，他们可以在其中键入类型的名称，指定它是“真/假”、整数、小数还是列表中的值，然后为所述列表设置项目。然后，在每个产品上，他们会看到所有适用类型的列表，他们需要填写值 - “真/假”产生一个复选框，整数和小数产生验证的文本字段，列表产生一个他们指定的所有选项的组合框。每当他们想要一个新的属性时，他们可以自己去添加它，但他们根本不需要考虑这些属性是如何工作的，因为网站是基于*type*运行的。

* * *

好的，根据您的示例，我建议这样做：

提供一个表格，其中列出了数据的每一列，并在其旁边有一个组合框来指定要采取的操作。可以从包含以下内容的列表中选择操作：

*   忽略数据
*   按原样使用数据
*   格式化数据
*   在别处查找价值
*   执行计算

根据用户在此下拉列表中的选择，您将：

*   不包括输出中的列
*   按原样使用数据。
*   提供一个按钮以打开一个表单，他们可以在其中根据数据类型格式化数据（可能带有`String.Format`选项的子集）。您将在底部显示一个键以显示支持的值。
*   提供一个按钮来指定“其他地方”是什么。 *这可能是可扩展性最有用的地方，所以我将在下面再次讨论*
*   提供一种输入适当计算的方法。

至于“其他地方”查找，这可能主要是要转换它的值和字符串的列表。这些值可以在应用程序的配置部分中指定，并存储在某处的表中。您可以创建它们的任意分组来表示各种选项“列表”。或者，您可以列出一些您希望用户引用的现有数据表，并让他们指定转换（使用计算屏幕）以将其值转换为其他表上的查找。

这有意义吗？

# php - PDO 从数据库中获取数据

> ID：13183579
> 
> 赞同：11
> 
> 时间：2012-11-01T18:48:43.467
> 
> 标签：php, select, pdo, while-loop, fetch

我最近开始使用 PDO，之前我只使用 MySQL。现在我正在尝试从数据库中获取所有数据。

```
$getUsers = $DBH->prepare("SELECT * FROM users ORDER BY id ASC");
$getUsers->fetchAll();
if(count($getUsers) > 0){
    while($user = $getUsers->fetch()){
        echo $user['username']."<br/>";
    }
}else{
    error('No users.');
} 
```

但它没有显示任何用户，只是一个空白页面。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-01T18:53:07.897

该`PDO`方法[`fetchAll()`](http://php.net/manual/en/pdostatement.fetchall.php)返回一个数组/结果集，您需要将其分配给一个变量，然后使用/迭代该变量：

```
$users = $getUsers->fetchAll();
foreach ($users as $user) {
    echo $user['username'] . '<br />';
} 
```

**UPDATE** (missing `execute()`)
此外，您似乎没有调用在准备语句*之后*但*在*实际获取数据之前[`execute()`](http://php.net/manual/en/pdostatement.execute.php)需要发生的方法：

 **```
$getUsers = $DBH->prepare("SELECT * FROM users ORDER BY id ASC");
$getUsers->execute();
$users = $getUsers->fetchAll();
... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-06T06:09:31.037

下面的代码将满足您的要求：

```
$sql = $dbh->prepare("SELECT * FROM users ORDER BY id ASC");
$sql->execute();
while ($result = $sql->fetch(PDO::FETCH_ASSOC)) {
    echo $result['username']."<br/>";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-07-26T17:11:10.613

您的代码缺少对[`execute()`](https://php.net/manual/en/pdostatement.execute.php)after的调用[`prepare()`](https://www.php.net/manual/en/pdo.prepare.php)。执行准备好的语句后，您可以使用[`fetchAll()`](https://php.net/manual/en/pdostatement.fetchall.php).

```
$getUsers = $DBH->prepare('SELECT * FROM users ORDER BY id ASC');
$getUsers->execute();
$users = $getUsers->fetchAll();

// Then in your presentation logic you can use the following code to display the data:
if ($users) {
    foreach ($users as $user) {
        echo $user['username']."<br/>";
    }
} else {
    // Whatever your requirement is to handle the no user case, do it here.
    echo 'Error: No users.';
} 
```

但是，在您的示例中，您没有将任何变量数据传递给查询，并且您只执行一次，这违背了准备语句的目的。如果您需要在 SQL 中包含变量，则应使用准备好的语句，例如：

```
$getUsers = $DBH->prepare('SELECT * FROM users WHERE id=?');
$getUsers->execute([
    $_GET['user_id']
]);
$user = $getUsers->fetch();     // get single user by unique id 
```

如果没有变量，那么您可以简单地使用[`query()`](https://www.php.net/manual/en/pdo.query.php)方法。

```
$users = $DBH->query('SELECT * FROM users ORDER BY id ASC')->fetchAll(); 
```

如果您不需要一次获取所有记录，您可以简单地循环语句`foreach`：

```
$getUsers = $DBH->prepare('SELECT * FROM users WHERE username LIKE ? ORDER BY id ASC');
$getUsers->execute([
    '%' . $_GET['search'] . '%'     // search for username with wildcards
]);

foreach ($getUsers as $user) {
    echo $user['username']."<br/>";
} 
```**

# javascript - 动态添加 Html 时自定义 Jquery 在运行时不可用

> ID：13183581
> 
> 赞同：0
> 
> 时间：2012-11-01T18:48:50.783
> 
> 标签：javascript, jquery

我有一个看起来像这样的页面..

```
<!DOCTYPE html>
<html>
<head>
  <title>JQM</title>
  <meta charset=utf-8 />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/latest/jquery.mobile.css"> 
  <script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
  <script src="http://code.jquery.com/mobile/latest/jquery.mobile.js"></script>
  <script>
    $(function(){
      $('[data-role="list-divider"]').toggle(function(){
        $('.'+$(this).attr('data-link')).addClass('show');
        $(this).children().removeClass('ui-icon-plus').addClass('ui-icon-minus');

      },function(){
        $('.'+$(this).attr('data-link')).removeClass('show');
        $(this).children().removeClass('ui-icon-minus').addClass('ui-icon-plus');
      });
    });
  </script>
</head>
<body>

<div data-role="page">
    <div data-role="header">

    </div>
    <div data-role="content">   

    </div>
</div>

</body>
</html> 
```

我正在从内容区域的服务器中动态添加 html。问题是当我动态添加内容时，我在页面上静态创建的 jquery 函数不参与..

```
<script>
        $(function(){
          $('[data-role="list-divider"]').toggle(function(){
            $('.'+$(this).attr('data-link')).addClass('show');
            $(this).children().removeClass('ui-icon-plus').addClass('ui-icon-minus');

          },function(){
            $('.'+$(this).attr('data-link')).removeClass('show');
            $(this).children().removeClass('ui-icon-minus').addClass('ui-icon-plus');
          });
        });
      </script> 
```

如果我静态添加 html，所有代码都可以正常工作，一切都很好。我的问题是，一旦将 html 从服务器添加到页面，如何使该 jquery 可以运行？

我做了这个并且它工作了，有没有更优雅的方式使用 .on 或者这很好？

```
//got html blob
  deferred.success(function (res) {

   $(function () {
                $('[data-role="list-divider"]').toggle(function () {
                    $('.' + $(this).attr('data-link')).addClass('show');
                    $(this).children().removeClass('ui-icon-plus').addClass('ui-icon-minus');

                }, function () {
                    $('.' + $(this).attr('data-link')).removeClass('show');
                    $(this).children().removeClass('ui-icon-minus').addClass('ui-icon-plus');
                });
            });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:54:54.570

您必须使用 jquery`.On()`方法将处理程序附加到动态添加到页面的内容。检查这个 - [.on](http://api.jquery.com/on/)

像这样的东西可能会起作用（没有测试）：-

```
 $(function(){
      $('[data-role="list-divider"]').on('toggle' ,function(event){
        $('.'+$(this).attr('data-link')).addClass('show');
        $(this).children().removeClass('ui-icon-plus').addClass('ui-icon-minus');

      },function(event){
        $('.'+$(this).attr('data-link')).removeClass('show');
        $(this).children().removeClass('ui-icon-minus').addClass('ui-icon-plus');
      });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:59:44.320

由于 jquery 当前在文档准备好并且您的内容尚未加载但它不会找到元素并连接事件时运行。将您的脚本添加到`ajax.success`应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:00:22.287

尝试这个：

```
 $(function(){
      $(document).on('toggle', '[data-role="list-divider"]', function(){
        $('.'+$(this).attr('data-link')).addClass('show');
        $(this).children().removeClass('ui-icon-plus').addClass('ui-icon-minus');

      },function(){
        $('.'+$(this).attr('data-link')).removeClass('show');
        $(this).children().removeClass('ui-icon-minus').addClass('ui-icon-plus');
      });
    }); 
```

虽然没有测试过。对于 on('click') 这通常有效。

您所做的是将“切换”触发器绑定到整个文档（ $(document) ），然后检查触发了什么元素。通过这种方式，您可以检测在 DOM 初始化之后创建的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T18:53:46.350

查看您的代码，我看不到您在哪里动态加载内容。但是，如果您希望该脚本运行。您应该在该脚本前面尝试一个 document.ready()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T18:54:49.530

您不能将事件处理程序绑定到尚未创建的元素。看看这个：

[http://api.jquery.com/on/](http://api.jquery.com/on/)

# visual-studio-2010 - 在visual studio或resharpher中运行单元测试用例之前是否可以避免构建

> ID：13183583
> 
> 赞同：5
> 
> 时间：2012-11-01T18:49:00.460
> 
> 标签：visual-studio-2010, unit-testing, build, vs-unit-testing-framework

考虑到我只更改了一个测试/单元测试项目，如果我尝试运行它，它会构建单元测试项目（已接受）和所有其他开发项目（这并不是真正需要的）。

我怎样才能避免这种情况？我在解决方案中有 100 多个项目，因此由于项目构建，每个单元测试用例的运行都需要很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:22:25.760

你在使用访问器吗？MS 访问器可能会强制重建所有“依赖于访问器”的项目，这反过来可能会强制重建所有解决方案。

ps 这应该是对您的回答的评论，但我没有足够的代表点来添加评论。

# c - 使用来自 yahoo 的 send()、recv() 将查询放入 Simple C++ 程序以检索股票/期权信息

> ID：13183585
> 
> 赞同：3
> 
> 时间：2012-11-01T18:49:11.240
> 
> 标签：c, options, stock

```
.....
host = gethostbyname(X);
.....
SOCKADDR_IN SockAddr;                                                                
SockAddr.sin_port=htons(80);
SockAddr.sin_family=AF_INET;
SockAddr.sin_addr.s_addr = *((unsigned long*)host->h_addr);

connect(Socket,(SOCKADDR*)(&SockAddr),sizeof(SockAddr));
......
char buffer[100000];
send(Socket,Y, strlen( Y ),0);
int nDataLength = recv(Socket,buffer,100000,0); 
```

上面是一个简单的代码，我正在创建一个绑定到上面服务器 X 的套接字。之后，我想向服务器发送一些消息 Y 以获取所需的选项/选项信息。X 指的是我可以连接的服务器，Y 指的是我发送给 X 的查询/消息。

但是，我对 Web 协议一无所知，也不知道在 X 和 Y 中放什么。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T19:08:36.937

你最好使用像[libcurl](http://curl.haxx.se/)这样的库。这将使您从套接字编程的所有艰苦工作中解脱出来。使用 curl 您可以创建 HTTP 请求、发送它们并接收响应。这是非常容易使用。[以下](http://curl.haxx.se/libcurl/c/example.html)是一些示例程序。[在此处](http://developer.yahoo.com/everything.html)了解 Yahoo API 。

# mysql - SQL 查询与附加选择不同

> ID：13183586
> 
> 赞同：0
> 
> 时间：2012-11-01T18:49:16.590
> 
> 标签：mysql, distinct

我需要在 MySQL 中执行一个查询，该查询返回 product_id 的不同值，但我还需要选择并返回该特定表中的“id”字段。

此查询将返回没有 id 的不同 product_id：

```
SELECT DISTINCT product_id FROM orders_cart 
```

此查询将在两个字段上使用 distinct，我想在 product_id 上使用它并查看 id

```
SELECT DISTINCT id, product_id FROM orders_cart 
```

在 pgsql 上很容易做到，但我不知道如何在 mysql 上做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:59:13.177

您的查询没有明确定义：考虑这个表

```
id   product_id
1     1
2     2
3     1
4     2 
```

你的查询结果应该是什么？如果你的意思是

```
id        product_id
1 or 3     1
2 or 4     2 
```

您处于非确定性查询的领域。

你能做的是

```
SELECT MIN(id), product_id FROM orders_cart GROUP BY product_id 
```

这将确定性地产生

```
id   product_id
1     1
2     2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:17:41.503

这就是我的最终代码：这个问题最重要的部分是第 1,2 和 4 行 :) GROUP BY 成功了 :)

```
SELECT orders_cart.id, product_id, order_id 
FROM orders_cart 
LEFT JOIN orders_order ON orders_cart.order_id=orders_order.id
WHERE orders_order.status='Wysłano'
GROUP BY orders_cart.product_id 
```

# zend-framework2 - 自定义 ZfcUser

> ID：13183591
> 
> 赞同：5
> 
> 时间：2012-11-01T18:49:25.290
> 
> 标签：zend-framework2, zfcuser

我想做的是为注册用户添加更多属性（字段）以填写例如：默认情况下我们有一个显示名称，我想要更多类似的，出生地，出生日期等等..

我创建了自己的实体类并让 ZfcUser 使用它（更具体地说：我添加了一些受保护的变量、getter 和 setter 方法）。

我的问题是我真的不知道下一步该做什么。我知道我显然应该在表单中添加一些元素，我可以做到，但我如何“让知道”zfcuser 我在实体类中有更多变量，以便它可以很好地与数据库一起使用。

顺便提一句。我无法理解这个模块是如何工作的，例如它究竟在哪里运行与数据库一起工作的脚本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T20:50:25.790

查看[CdliUserProfile](https://github.com/cdli/CdliUserProfile)，它是 ZfcUser 的现有扩展，具有 UserProfile 支持（以及自定义属性）。检查该代码或使用模块本身;）

# python - 检查表单是否在表单域中有效 [Django]

> ID：13183595
> 
> 赞同：0
> 
> 时间：2012-11-01T18:49:32.113
> 
> 标签：python, django, amazon-s3, django-forms, boto

我在 Django 中对文本字段表单字段进行了子类化，以便为字段创建我自己的自定义小部件。我想知道是否可以检查表单的所有其他字段是否有效（我希望其服务器端行为根据其他字段的验证而有所不同）

见评论

就像是：

```
class CustomField(TextInput):
  def __init__(self, *args, **kwargs):
    ...
    super(CustomField, self).__init__(*args, **kwargs)

  input_type = 'hidden'

  def value_from_datadict(self, data, files, name):
    aws_file_key = data.get(name, None)
    _media_bucket = boto.connect_s3(settings.AWS_ACCESS_KEY_ID,
                                       settings.AWS_SECRET_ACCESS_KEY)\
                            .lookup(settings.AWS_MEDIA_STORAGE_BUCKET_NAME)

    try:
      key = _media_bucket.get_key(aws_file_key)
    except:
      print 'Failed to get key.'
      key = None

    if key and aws_file_key:
      fh = tempfile.TemporaryFile()
      key.get_contents_to_file(fh)
      fh.seek(0)
      files = SimpleUploadedFile(key.name, fh.read())
      ### IF FORM IS VALID DELETE KEY, OTHERWISE, KEEP IT.
      if code_to_check_if_valid:
        _media_bucket.delete_key(key)
      fh.close()
      return files
      ...... etc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:53:16.650

如果要根据其他字段的值验证某个字段，则需要在表单级别对其进行验证并覆盖该字段的`clean`方法。[这是有关该主题的文档](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)-它们非常好。

```
class CustomForm(forms.Form):
    custom_field = CustomField()

    def clean(self):
        cleaned_data = super(CustomForm, self).clean()
        custom_field = cleaned_data.get("custom_field")
        ... 
```

[如果您查看表单是如何验证的流程](https://docs.djangoproject.com/en/dev/ref/forms/validation/#form-and-field-validation)，您将看到~~`clean`如果所有其他字段独立验证，则该方法运行，因此在此阶段，表单可以被认为是有效的：~~

> 这些方法按上面给出的顺序运行，一次一个字段。也就是说，对于表单中的每个字段（按照它们在表单定义中声明的顺序），`Field.clean()`方法（或其覆盖）运行，然后`clean_<fieldname>()`. 最后，一旦为每个字段运行这两个方法`Form.clean()`，就会执行该方法或其覆盖。

无论是否有错误，最终的 clean 方法都会实际运行，因此您必须遍历`cleaned_data`以确保没有错误

> Form 类或子类的 clean() 方法始终运行。如果该方法引发 ValidationError，cleaned_data 将是一个空字典。
> 
> 上一段的意思是，如果您要覆盖 Form.clean()，则应该遍历 self.cleaned_data.items()，可能还要考虑表单上的 _errors 字典属性。通过这种方式，您将已经知道哪些字段已通过其各自的验证要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:10:56.467

各个字段的 clean 方法的调用顺序与表单声明顺序或明确指定的顺序相同。[ [django源代码](https://github.com/django/django/blob/master/django/forms/forms.py#L276)]

尽管我不推荐这种方法而不是使用 clean 方法进行多字段验证，但如果您的自定义字段是订单中的最后一个字段，您可以期望 self._errors 指示所有其他字段是否已通过验证。但是在这个阶段，非字段错误将不可用。

# c# - 使用 MVC 3 控制器的依赖注入的命令模式

> ID：13183598
> 
> 赞同：2
> 
> 时间：2012-11-01T18:49:39.177
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, command-pattern, simple-injector

我阅读了以下文章[.NET Junkie - 同时...在我的架构的命令方面，](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)这是由另一个 stackoverflow 用户提出的，该用户概述了命令模式并在文章末尾提供了如何将其与 DI 一起使用的策略。

这有很大帮助，但我缺少的一件事，假设我创建了一个名为`CheckoutCustomerCommandHandler`.

现在，假设`MoveCustomerCommandHandler`无论出于何种原因，我都需要通过构造函数将此命令和 注入控制器。这对 DI 容器设置和构造函数有何影响？

在核心，它们都实现了相同的接口。这似乎会导致 DI 容器的查找问题。在文章示例中，这是他们的样品注射器设置：

```
public interface ICommandHandler<TCommand>
{
    void Handle(TCommand command);
}

// Exactly the same as before, but now with the interface.
public class MoveCustomerCommandHandler
: ICommandHandler<MoveCustomerCommand>
{
    private readonly UnitOfWork db;

    public MoveCustomerCommandHandler(UnitOfWork db,
    [Other dependencies here])
    {
        this.db = db;
    }

    public void Handle(MoveCustomerCommand command)
    {
        // TODO: Logic here
    }
}

// Again, same implementation as before, but now we depend
// upon the ICommandHandler abstraction.
public class CustomerController : Controller
{
    private ICommandHandler<MoveCustomerCommand> handler;

    public CustomerController(
    ICommandHandler<MoveCustomerCommand> handler)
    {
        this.handler = handler;
    }

    public void MoveCustomer(int customerId, 
        Address newAddress)
    {
        var command = new MoveCustomerCommand
        {
            CustomerId = customerId,
            NewAddress = newAddress
        };

        this.handler.Handle(command);
    }
}

using SimpleInjector;
using SimpleInjector.Extensions;

var container = new Container();

// Go look in all assemblies and register all implementations
// of ICommandHandler<T> by their closed interface:
container.RegisterManyForOpenGeneric(
    typeof(ICommandHandler<>),
    AppDomain.CurrentDomain.GetAssemblies());

// Decorate each returned ICommandHandler<T> object with
// a TransactionCommandHandlerDecorator<T>.
container.RegisterDecorator(typeof(ICommandHandler<>),
    typeof(TransactionCommandHandlerDecorator<>));

// Decorate each returned ICommandHandler<T> object with
// a DeadlockRetryCommandHandlerDecorator<T>.
container.RegisterDecorator(typeof(ICommandHandler<>),
    typeof(DeadlockRetryCommandHandlerDecorator<>)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:11:23.520

这是你的类声明的样子......

```
public class CheckoutCustomerCommandHandler :
    ICommandHandler<CheckoutCustomerCommand> {...}

public class MoveCustomerCommandHandler : 
    ICommandHandler<MoveCustomerCommand> {...} 
```

这些可能看起来它们实现了相同的接口，但它们实际上编译为两个不同的接口，因为泛型参数不同。您的 DI 框架将能够区分它们。

# perl - 在 UTC 时间末尾附加一个 Z

> ID：13183599
> 
> 赞同：0
> 
> 时间：2012-11-01T18:49:38.897
> 
> 标签：perl

我正在使用 perl，并通过了这个 -->

```
DateTime->now( time_zone => 'UTC' )) to the method below 
```

和

```
sub get_datetime{
    my ($datetime) = @_;
    my $formatter = new DateTime::Format::Strptime(pattern => "%Y-%m-%d %H:%M:%S",
                       time_zone => "UTC");
    return $formatter->format_datetime($datetime);
} 
```

我想显示像 2012-10-10 10:00:01Z 这样的时间

如何在 UTC 时间的末尾附加 Z？我试过 pattern => "%Y-%m-%d %H:%M:%S%Z" 但那没有编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:51:39.193

尝试：

```
pattern => "%Y-%m-%d %H:%M:%SZ" 
```

% 字母部分是从那时起被事物所取代的；文字 Z 之前不应有 % 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:02:16.480

我很惊讶这会`%Z`阻止你的代码编译。你得到什么错误信息？

`%Z`是用于获取时区的正确格式，但它会以与您想要的格式不同的格式显示。

```
$ perl -MDateTime -E'say DateTime->now->strftime("%Y-%m-%d %H:%M:%S%Z")'
2012-11-02 13:56:05UTC 
```

另一种选择是使用`%z`. 但同样，这并没有给出你想要的格式。

```
$ perl -MDateTime -E'say DateTime->now->strftime("%Y-%m-%d %H:%M:%S%z")'
2012-11-02 13:57:00+0000 
```

所以，是的，看起来硬编码“Z”是你最好的选择。但这让我有点不舒服，因为你怎么能确定你的日期实际上是 UTC？

```
$ perl -MDateTime -E'say DateTime->now->set_time_zone("America/New_York")->strftime("%Y-%m-%d %H:%M:%SZ")'
2012-11-02 10:01:56Z 
```

# android - Google Analytics SDK V2 for Android App：新用户、回访用户、活跃用户、会话让我很困惑

> ID：13183607
> 
> 赞同：5
> 
> 时间：2012-11-01T18:50:39.520
> 
> 标签：android, google-analytics, analytics

![在此处输入图像描述](../Images/202776b1911f08c0c11916b472d47267.png)

我使用 Google Analytics 来跟踪我的 Android 应用程序已经有一段时间了，而且效果很好。最近，我升级到了新的 SDK V2 for mobile app。但是，我发现了一些让我感到困惑的事情：

1.  在实时跟踪中，所有访客现在都显示为新访客。我试图用我的手机打开我自己的应用程序，它一直显示自己是新用户而不是返回用户。事实上，我从未见过升级后出现回访用户。

2.  如图所示，在用户报告中，我可以看到升级的第一天有 86 个活跃用户和 54 个新会话/用户。在网站上，它显示活跃用户是最近与您的应用互动的用户。包括新用户和回访用户。由于这是第一天，我假设所有用户都应该是新用户，但数字似乎并不相等。

感谢您的任何评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T20:08:35.647

“活跃用户”和“新会话”之间的区别在于，活跃用户是您所知道的 Analytics V1 中的“唯一访问者”，而“新会话”是“新访问”——用户与会话。

例如，如果一个新用户打开您的应用程序一次，然后在超过您设置的访问时间（默认为 30 秒）后再次打开它，它将计为另一个会话，这意味着 1 个活跃用户、2 个会话、1 个新的会话。

Also note that all users that upgrade from your old app with the V1 anlytics will count as new in the new analytics profile.

# ruby-on-rails - 如何将 ActiveRecord 对象作为参数传递给 Rails 中的辅助方法

> ID：13183612
> 
> 赞同：3
> 
> 时间：2012-11-01T18:50:54.977
> 
> 标签：ruby-on-rails, parameters, helpermethods

许多辅助方法，例如 redirect_to、link_to 和 url_for，可以将 ActiveRecord 对象作为参数，而不是指定控制器和操作的散列。我在不同的文档中看到参数以不同的方式传递。它有时作为符号传递，有时作为实例变量传递，有时作为局部变量传递。

我对如何扩展不同的参数样式以返回 url 感到困惑。我知道遵循 REST 约定应该创建一个由控制器和操作构造的 url，但不确定 Rails 何时需要特定的参数样式来构造该 url。请帮助我了解将 ActiveRecord 对象作为符号、实例变量或局部变量传递的用例。根据方法调用是否有不同的要求？还是在 url 构造上存在潜在差异？

这里有些例子：

从 API 文档：

```
link_to "Profile", @profile  
redirect_to post  
<%= url_for(@workshop) %>  
<%= form_for :person do |f| %> (this is described as the “generic #form_for”) 
```

来自 Ruby on Rails 指南：

```
<%= link_to 'New book', new_book_path %>  
redirect_to(@book)  
form_for(@article) 
```

从 Rails 3 方式：

```
'link_to' "Help", help_widgets_path, :popup => 1  
redirect_to post  
url_for(timesheets_path)  
form_for offer do |f| 
```

注意：经过进一步研究，在调用视图模板传递 :locals 哈希作为参数的情况下，form_for 似乎能够接受局部变量。键是可以在局部中使用的局部变量，值是模板中的实例变量。这是正确的理解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:09:52.077

*   您可以将对象传递给 link_to 和 url_for
*   您还可以将对象传递给路径助手
*   `@post`和都是`post`对象。@post 是一个实例变量，而 post 要么是一个局部变量，要么是一个返回帖子的方法

唯一“奇怪”的是`form_for :post`品种。这是老式的 Rails 语法，并将其更改为`form_for @post`引擎盖下的语法。

# c# - Fluent nHibernate 继承映射给出错误

> ID：13183614
> 
> 赞同：1
> 
> 时间：2012-11-01T18:51:01.030
> 
> 标签：c#, nhibernate, fluent-nhibernate

所以我已经成功地映射了几乎我的整个数据库（我的映射的所有测试都通过了）。但是，当我尝试实现一些继承映射时，测试不会通过。

普通实体总是从包含 Id 的类“实体”继承。

```
public class Project : Entity<int>
{
    public virtual string Name { get; set; }
    public virtual Client Client { get; set; }
    public virtual Quotation Quotation { get; set; }
    public virtual IList<HoursSpent> HoursSpent { get; set; }

    public Project()
    {
        HoursSpent = new List<HoursSpent>();
    }

    public virtual void AddHoursSpent(HoursSpent HourSpent)
    {
        HourSpent.Project = this;
        HoursSpent.Add(HourSpent);
    }
} 
```

应映射以下情况（因为我无法发布图像链接）：

```
TABLE [dbo].[project]
[project_id] [int] IDENTITY(1,1) NOT NULL,
[name] [varchar](50) NOT NULL,
[client_id] [int] NOT NULL,
[quotation_id] [int] NULL,

PK => project_id
FK => client_id and quotation_id

TABLE [dbo].[quotation](
[quotation_id] [int] IDENTITY(1,1) NOT NULL,
[trainee_cost] [decimal](18, 0) NOT NULL,
[architect_cost] [decimal](18, 0) NOT NULL,

PK => quotation_id

TABLE [dbo].[quotation_per_hour](
[paperwork_expenses] [int] NOT NULL,
[insurance_tax] [decimal](18, 0) NOT NULL,
[hourly_operating_expenses] [decimal](18, 0) NOT NULL,
[quotation_id] [int] NOT NULL,

PK => quotation_id
FK => quotation_id

TABLE [dbo].[quotation_per_percentage](
[quotation_id] [int] NOT NULL,
[wage_percentage] [decimal](18, 0) NOT NULL,

PK => quotation_id
FK => quotation_id 
```

所以当我验证没有引用子类的映射时，测试通过了。但是，当我实现子类时，我得到了错误。

首先是映射：

```
public class ProjectMap : ClassMap<Project>
{
    public ProjectMap()
    {
        Table("project");
        Id(x => x.Id)
            .Column("project_id")
            .GeneratedBy.Native();
        Map(x => x.Name)
            .Column("name");
        References(x => x.Client)
            .Column("client_id")
            .Cascade.SaveUpdate();
        References(x => x.Quotation)
            .Column("quotation_id")
            .Cascade.SaveUpdate();
        HasMany(x => x.HoursSpent)
            .Table("hours_spent")
            .KeyColumn("project_id")
            .Cascade.SaveUpdate()
            .Inverse();
    }
}

public class QuotationMap : ClassMap<Quotation>
{
    public QuotationMap()
    {
        Table("quotation");
        Id(x => x.Id)
            .Column("quotation_id")
            .GeneratedBy.Native();
        Map(x => x.TraineeCost)
            .Column("trainee_cost");
        Map(x => x.ArchitectCost)
            .Column("architect_cost");
    }
}

public class QuotationPerHourMap : SubclassMap<QuotationPerHour>
{
    public QuotationPerHourMap()
    {
        Table("quotation_per_hour");
        KeyColumn("quotation_id");
        Map(x => x.PaperworkExpenses)
            .Column("paperwork_expenses");
        Map(x => x.InsuranceTax)
            .Column("insurance_tax");
        Map(x => x.HourlyOperatingExpenses)
            .Column("hourly_operating_expenses");
    }
}

public class QuotationPerPercentageMap : SubclassMap<QuotationPerPercentage>
{
    public QuotationPerPercentageMap()
    {
        Table("quotation_per_percentage");
        KeyColumn("quotation_id");
        Map(x => x.WagePercentage)
            .Column("wage_percentage");
    }
} 
```

因此，现在作为我的验证，我使用以下 3 种方法，其中每种方法都给我一个错误：

```
[Test]
    public void CanCorrectlyMapProject()
    {
        Project Project = CreateProject();
        var HoursSpent = new List<HoursSpent>()
        {
            CreateHoursSpent(), CreateHoursSpent()
        };

        using (var transaction = session.BeginTransaction())
        {
            new PersistenceSpecification<Project>(session)
                .CheckProperty(c => c.Name, Project.Name)
                .CheckReference(c => c.Client, Project.Client)
                .CheckReference(c => c.Quotation, Project.Quotation)
                .CheckList(c => c.HoursSpent, HoursSpent, (c, p) => c.AddHoursSpent(p))
                .VerifyTheMappings();
        }
    }

    [Test]
    public void CanCorrectlyMapQuotationPerHour()
    {
        QuotationPerHour Quotation = CreateQuotationPerHour();

        using (var transaction = session.BeginTransaction())
        {
            new PersistenceSpecification<QuotationPerHour>(session)
                .CheckProperty(c => c.TraineeCost, Quotation.TraineeCost)
                .CheckProperty(c => c.ArchitectCost, Quotation.ArchitectCost)
                .CheckProperty(c => c.PaperworkExpenses, Quotation.PaperworkExpenses)
                .CheckProperty(c => c.InsuranceTax, Quotation.InsuranceTax)
                .CheckProperty(c => c.HourlyOperatingExpenses, Quotation.HourlyOperatingExpenses)
                .VerifyTheMappings();
        }
    }

    [Test]
    public void CanCorrectlyMapQuotationPerPercentage()
    {
        QuotationPerPercentage Quotation = CreateQuotationPerPercentage();

        using (var transaction = session.BeginTransaction())
        {
            new PersistenceSpecification<QuotationPerPercentage>(session)
                .CheckProperty(c => c.TraineeCost, Quotation.TraineeCost)
                .CheckProperty(c => c.ArchitectCost, Quotation.ArchitectCost)
                .CheckProperty(c => c.WagePercentage, Quotation.WagePercentage)
                .VerifyTheMappings();
        }
    } 
```

第一个给我：

```
Lambda_Services_Project.Tests.PersistenceTests.CanCorrectlyMapProject: 
System.ApplicationException : For property 'Quotation' expected type 
Lambda_Services_Project.Entities.QuotationPerPercentage' but got 
Lambda_Services_Project.Entities.Quotation' 
```

我不明白这个。我不应该将引用的子类放在 Project 对象的引用部分吗？因为这就是你要实现继承的原因。

第二个和第三个映射给出了关于错误类型映射的错误：

```
Lambda_Services_Project.Tests.PersistenceTests.CanCorrectlyMapQuotationPerHour:
System.ApplicationException : For property 'InsuranceTax' of type 'System.Single'   
expected '3,6' but got '4' 
```

在我的其他映射中，将对象中的浮点数映射到数据库中的小数点没有问题。但是在这两个子类中我确实遇到了一个问题，因为浮点属性显然是添加到数据库中的 System.Single。

我开始相信问题出在 nfluent Nhibernate 配置上，由于我不太了解配置部分，所以我将其发布在这里：

```
private FluentConfiguration GetConfiguration()
    {
        return Fluently.Configure()
            .Database(MsSqlConfiguration.MsSql2008
                .ConnectionString(c => c
                    .Server("")
                    .Database("")
                    .Username(""))
                    .Password(""))
                .ShowSql())
            .Cache(c => c
                .UseQueryCache()
                .ProviderClass<HashtableCacheProvider>())
            .Mappings(m => m
                .FluentMappings
                .AddFromAssemblyOf<Client>())
            .ExposeConfiguration(x => x
                .SetProperty("current_session_context_class", "thread_static"));
    } 
```

我尝试将映射更改为 automap，然后添加 ignorebase 或 includebase，但这并没有改变任何东西。有没有人可以知道我的问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:02:44.773

如在 DDL 中所见：`[insurance_tax] [decimal](18, 0) NOT NULL,`该列映射没有小数位，并且有效地四舍五入，因此 3.6 变为 4。`.Precision(123)`用于指定要保存的小数位数。

# vb.net - 减少 FlowLayoutPanel 中控件之间的空间

> ID：13183616
> 
> 赞同：9
> 
> 时间：2012-11-01T18:51:18.743
> 
> 标签：vb.net, vb.net-2010, flowlayoutpanel

如何进一步减少控件之间的空间？我已将所有边距和填充设置为 0，但我的控制器之间仍有空间。

![流布局属性](../Images/e14a20d989c0507b42a15c83c2fd0c1b.png)

这是我将所有边距和填充设置为 0 的空间。我什至将每个控制器上的边距和填充设置为 0。

![新间距](../Images/5a8d1ffb30aed2428db21bd0f3b65137.png)

为了保持一致性，这里是添加 PictureBoxes 的代码

```
Dim newPic As PictureBox = New PictureBox()
newPic.Image = p.Image
newPic.Size = New System.Drawing.Size(New Point(p.Size.Width * 2, 
                                                p.Size.Height * 2))
newPic.SizeMode = p.SizeMode
laytt.SetToolTip(newPic, ttstring)
AddHandler newPic.Click, AddressOf LayoutComponent_Clicked 

LayoutFlowLayout.Controls.Add(newPic) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T19:40:33.957

您没有在添加的图片框上设置 Margin 属性。默认值为 3,3,3,3。添加这行代码来解决问题：

```
 newPic.Margin = New Padding(0) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T19:34:13.210

每个控件都以不同的方式处理边距，即使使用标准控件也是如此。看看这个例子：

![在此处输入图像描述](../Images/6b15bfeb49c6b0853d135cdfcf46b6dd.png)

请注意， a`Button`在它周围保留了一些空间，而 TextBox 占据了所有内容。您可能会问为什么它们之间有 2 个像素，您可以清楚地看到。为此 - 请复制/粘贴到 Paint 并放大。这 2 个像素实际上是边框，这就是绘制控件的方式。我敢肯定`Buttons`也有边框，但即使放大，也很难在视觉上证明是正确的。

如果你想改变它，你需要创建一个自定义控件并覆盖它的绘制方式，即手动切割它的边框或类似的。但我不建议这样做，以保持 UI 一致。

# ruby-on-rails - 如何根据发送的数据更改响应格式？

> ID：13183617
> 
> 赞同：1
> 
> 时间：2012-11-01T18:51:26.337
> 
> 标签：ruby-on-rails

我正在做一些控制器来呈现报告，这是我的问题：

用户打开一个带有表单的页面，可以更改下载格式和报告的日期。

下载格式通过选择输入设置。

当用户按下按钮时，我想根据所选格式做出响应。

问题是它是通过 url 指定的。所以尝试做类似的事情：

```
case format
when "xlsx" then format.xlsx{...}
when "html" then format.html{...}
...
end 
```

不起作用，因为 rails 或浏览器（我不确定）需要 html 响应。

我有两个选择：

1.  更改表单的 url，`onsubmit`使应用程序更加依赖于 javascript。或者。

2.  `redirect_to url + ".#{params[:download_format]}"`

第二种方法对我来说看起来更好，但我需要`:report_date`在 url 中传递，但我找不到这样做的方法。

我试过这个：

```
url = my_custom_url_path
redirect_to url + ".#{params[:download_format]}", :date_format => params[:date_format] 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:05:57.227

在表格中：

```
<%= f.select :download_format, { "xlsx" => "xlsx, "Online" => "html" } %> 
```

在控制器中：

```
def action
    if download_format = params[:download_format].delete
        redirect_to my_action_path(options.merge( :format => download_format ) ) and return
    end
    # do some logic here
    respond_to do |format|
        format.xlsx{...}
        format.html{...}
    end
end 
```

# php - 提交后的codeigniter 如果再次刷新提交

> ID：13183620
> 
> 赞同：2
> 
> 时间：2012-11-01T18:51:37.460
> 
> 标签：php, codeigniter

我想这很简单，但我是 codeigniter 的新手，所以请帮忙。我有一个接收数据的表单页面，并在提交时将该数据存储在数据库中。然后我尝试了两种方法重定向回主页：

```
first: $this->load->view('home');

second: redirect('/login/form/', 'refresh'); 
```

他们成功重定向或加载主页，但 url 仍然是 /property/new_property，这是数据输入的视图。同样，当我在主页上单击带有上述 url 的刷新时，会重新提交数据，因此数据库中有多个记录。如何重定向到主页并设置 url 属性/主页？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-02T23:51:14.520

`$this->session->set_flashdata('message', 'New Post has been added');`
`redirect('somefunction', 'refresh')`
[保存成功后的set_flashdata](http://ellislab.com/codeigniter%20/user-guide/libraries/sessions.html)将帮助您销毁提交的数据，重定向将更改您的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:11:57.007

`$this->load->view()`只会加载视图并且 url 不会改变。当您使用`redirect()`它时，它会重定向到不同的页面，并且您的 url 会改变。

对于您的解决方案，您可以在插入之前选择要在模型中插入的数据，如果存在，则不要运行插入查询，只需重定向到不同的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T18:53:33.617

您需要使用 url 助手

```
redirect('/home') 
```

这是在 CI 重定向的正确方法。 [http://ellislab.com/codeigniter/user_guide/helpers/url_helper.html](http://ellislab.com/codeigniter/user_guide/helpers/url_helper.html)

*   第二个参数。不是 100% 需要的

要加载该帮助程序，您可以使用`$this->load->helper('url');` 或将其写入配置文件夹的 autoload.php 中（这样它将被加载到所有页面）。

例如，这是我网站上的一个简单提交页面。

```
public function save_tips(){
    if($this->input->post('save_tips')){
        //Form validation and contact with model
        $res = $this->model->save_tips();
        if(count($res['errors'])==0){ //no errors means success
            redirect('/my_tips');
        } else{
        $errors = $res['errors'];
        }
    }

    $data = array();

    if(isset($errors)) {
        $data["errors"] = $errors;
    }

    $this->load->view('save_tips',$data);
} 
```

# google-maps - kmllayer 覆盖标记？

> ID：13183623
> 
> 赞同：1
> 
> 时间：2012-11-01T18:51:40.800
> 
> 标签：google-maps, google-maps-api-3

请原谅这个菜鸟问题，但是......我正在向我的 gmap 添加一个 kml 层。kml 在我的网络服务器上，正在获取 ny 谷歌地图。我得到默认的蓝色图标。到目前为止一切顺利，但是我想要一个自定义标记，并最终能够在以后更改基于样式的 oa 事件。一切都指向这个方法

```
var marker = new google.maps.Marker({
  position: new google.maps.LatLng(56.8848, 14.7730), 
  map: map,
  title: 'My workplace',
  clickable: false,
  icon: 'http://google-maps-icons.googlecode.com/files/factory.png'
}); 
```

在我看来，这只控制由 LatLng 定义的标记。换句话说，只有一个点。

如何为 kml 层中的所有站点定义自定义标记。这是我地图的链接

[http://myfloridagps.com/SpiderWeb/KML/map.html](http://myfloridagps.com/SpiderWeb/KML/map.html)

我直接在 kml 中更改的一个绿色图标似乎限制了任何未来的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:50:22.767

指定图标样式：

```
<Style id="mm_orange_hd2">
  <IconStyle>
    <Icon>
      <href>http://missouristate.info/images/2010/homecoming/mm_orange.png</href>
    </Icon>
    <hotSpot x="20" y="2" xunits="pixels" yunits="pixels"/>
  </IconStyle>
</Style> 
```

参考说风格：

```
<Placemark id="id1">
  <name>Crosstown Barbeque</name>
  <styleUrl>#mm_orange_hd2</styleUrl>
  <Point>
    <coordinates>-93.272,37.2278,0</coordinates>
  </Point>
</Placemark> 
```

[查看完整示例](http://missouristate.info/map/homecoming/2012/mapmarkers.aspx?category=eat_casual)

请记住，您必须将随机数据附加到您的 kml 文件 url 以防止地图服务器缓存它。

# c++ - 在数组中插入多个元素 - 时间计数功能

> ID：13183624
> 
> 赞同：1
> 
> 时间：2012-11-01T18:51:40.003
> 
> 标签：c++, arrays, queue, rounding

我正在做一个关于 C++ 的练习，它要求模拟一个服务队列，它要求用一个圆形的一维数组来完成它。所以它要求，当客户在队列中插入他的名字时，他的卡号以及队列中的到达时间。

所以我的第一个问题是如何在数组的一个位置输入所有这些元素？（我不知道它是否称为数组单元或位置，英语不是我的母语）每个客户只需要占据一个位置数组，我必须将他的所有信息插入一个位置。我已经知道如何从圆形队列中插入或提取元素的条件我只是不知道如何为它们中的许多人做这件事。

其次，它要求打印客户必须在队列中等待的时间，具体取决于在他之前等待的人数（尽管不必太精确）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:56:04.087

对于第一个问题：您能否创建一个表示数据集合的类或结构，并将整个结构放入您的容器中？

（编辑：Customer 现在是一个类，有一个构造函数；添加了实例化示例）您需要稍微清理一下，但类似于：

```
class Customer {
private:
  std::string m_name;
  int m_card_number;
  int m_arrival_time;
public:
  Customer() : m_card_number(0), m_arrival_time(0) { } // might need default ctor

  Customer(const std::string name, int card_number, int_arrival time)
  : m_name(name), m_card_number(card_number), m_arrival_time(arrival_time)
  { }
};

std::dequeue<Customer> service_queue; // or your container here

Customer c = Customer(name, card_num, current_time);
service_queue.push_back(c); 
```

对于第二个问题；如果您不需要坚持时间，而只需要处理差异，一种解决方案是使用[clock](http://www.cplusplus.com/reference/clibrary/ctime/clock/)。只是不要忘记除以 CLOCKS_PER_SECOND 一旦你得到你的时间差（以滴答为单位）并且需要转换为秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:59:59.083

我会将结构推送到您的队列中，每个结构都将包含所需的必要元素。

```
struct Customer
{
    string name;
    int ID;
    double change;
}

//in add function...
Customer newCustomer
cin >> newCustomer.name >> newCustomer.ID >> newCustomer.change;
queue.push_back(newCustomer);

retreiving data is simply asking for each element
//in a loop printing out the queue
std::cout << iter->name << iter->ID << iter->change 
```

# namespaces - 使用带有 form_for 的 MongoMapper EmbeddedDocument 的命名空间嵌套资源

> ID：13183626
> 
> 赞同：0
> 
> 时间：2012-11-01T18:51:47.430
> 
> 标签：namespaces, ruby-on-rails-3.2, mongomapper, form-for, nested-resources

我正在提交一个表单，该表单`id`为子资源及其父资源的`id`. 我不知道如何让表单提交停止将子 ID 复制为父资源的 ID。

技术栈：

*   导轨 3.2.8
*   MongoMapper
*   简单表格（尽管它包装的股票 form_for 也会出现同样的问题）

相关摘录`routes.rb`：

```
namespace :mock do 
  resources :patients do
    resources :allergies
  end
end 
```

我的模型在`Mock::Patient`和中定义`Mock::Patient::Allergy`。

在我的 Allergy 资源视图部分 _form.html.erb 中，我有以下打开表单助手的用法（我使用简单表单，但使用库存 form_for 助手会出现相同的结果）：

```
<%= simple_form_for [@mock_patient, @mock_allergy], :url => mock_patient_allergy_path(@mock_allergy),  do |f| %> 
```

在渲染时，它正在提交到此路由：

/mock/patients/:patient_id/allergies/:id

所以我的 allergies_controller.rb 文件确实收到了更新操作（在编辑操作的情况下）。

但是，当我查看参数时，params[:patient_id] 与 params[:id] 相同。两者实际上都是正在编辑的特定嵌套过敏资源的 id 值。父资源（在这种情况下为患者）丢失了其上下文。

因此，我开始在表单中包含一个隐藏字段：

```
<%= hidden_field_tag('patient_id', @mock_patient.id) if @mock_patient %> 
```

当我在提交表单之前查看页面源时，果然可以看到*正确* `patient_id`的值。

似乎有一些内置的表单处理逻辑将父资源的 id 替换为子资源的 id。

我的模型文件，使用 Mongo Mapper 是：

```
class Mock::Patient
  include MongoMapper::Document
  # other Patient model keys here
  many :allergies, :class => Mock::Patient::Allergy 
end

class Mock::Patient::Allergy
  include MongoMapper::EmbeddedDocument
  # other Allergy model keys here
  belongs_to :patient, :class => Mock::Patient
end 
```

回顾一下，我可以修改表单标签以提交到正确的路由，但是受控接收的参数哈希被抬高 - 丢失了父资源上下文。

我尝试过的表单标签的其他变体无济于事：

```
<%= simple_form_for @mock_allergy, :url => mock_patient_allergy_path(@mock_allergy),  do |f| %> 
```

和

```
<%= simple_form_for @mock_allergy, :html => { :class => 'form-horizontal' } do |f| %> 
```

在上述两种情况下，生成的基本路由模板都很好，它到达了我的 allergies_controller，但是当我去检查时`params[:patient_id]`，我得到了一个不正确的值。它实际上是`params[:id]`.

### 具体例子

我的表单标签行：

```
<%= simple_form_for @mock_allergy, :url => mock_patient_allergy_path(@mock_patient, @mock_allergy) do |f| %> 
```

这会生成一个页面，当我查看源代码时，会报告：

```
<form accept-charset="UTF-8" 
action="/mock/patients/5092c815fdb5424df800000d/allergies/5092c815fdb5424df800001c" 
class="simple_form form-horizontal" 
id="edit_mock_patient_allergy_5092c815fdb5424df800001c" method="post" 
novalidate="novalidate"> 
```

但是当它碰到我的控制器时，他希望根据 on params[:patient_id] 找到一个 Mock::Patient，它没有得到我期望的 '5092c815fdb5424df800000d' 值。在我的浏览器上，错误页面表明收到的参数是：

```
{ "patient_id"=>"5092c815fdb5424df800001c",
          "id"=>"5092c815fdb5424df800001c" } 
```

这两个ID是相同的，问题就出在这里。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:18:08.650

### 解决了：

在我的更新方法中，成功后来自脚手架的重定向是：

```
redirect_to @mock_allergy 
```

代替：

```
redirect_to mock_patient_allergy_path(@mock_patient, @mock_allergy) 
```

所以，我被踢到了一个正确形成的路线，但有一个虚假的病人 ID。

我的另一个错误是，在为 Allergy 建模时，我应该使用 a`embedded_in :patient`而不是`belongs_to :patient`线。

## 派生问题：

为什么它，that`@mock_allergy`和 的实例`Mock::Patient::Allergy`，知道它是一个嵌套资源，却不能生成包含正确的正确路径`patient_id`？

# javascript - 使用 JavaScript/jQuery 从输入类型“文件”中获取二进制图像数据，用于在 WebMatrix 中使用 AJAX 进行图片预览

> ID：13183628
> 
> 赞同：6
> 
> 时间：2012-11-01T18:51:56.590
> 
> 标签：javascript, jquery, ajax, image, webmatrix

我在研究或试图弄清楚如何（如果可能的话）使用 JavaScript/jQuery 从类型文件的 html 输入元素获取二进制图像数据时遇到了麻烦。

我正在使用 WebMatrix (C#)，但如果这个问题的目的可以单独使用 JavaScript/jQuery 来回答，则可能没有必要知道这一点。

我可以拍摄图像，将其保存在数据库中（作为二进制数据），然后在发布后从二进制数据中显示页面上的图片。但是，这确实让我在上传之前没有图片预览，我几乎可以肯定我必须使用 AJAX。

同样，这甚至不可能，但只要我能获得二进制图像数据，我相信我可以使用 AJAX 将其推送到服务器并以与从数据库中获取图像相同的方式处理图像（请注意，我不使用 GUID 来保存图像文件本身，我只是保存二进制数据）。

如果有一种更简单的方法来使用输入元素显示图片预览，那当然也可以正常工作，因为我试图这样做的整个想法是在他们点击提交表单按钮之前显示图片预览（或者至少创造这种错觉）。

****** *** ** *** *******更新****** ** *** ** *** ********

 **我不认为这是另一个问题的重复，因为我真正的问题是：

如何使用 JavaScript/jQuery 从输入类型“文件”中获取图像数据？

如果我可以将数据（以正确的格式）返回到服务器，我应该能够在那里使用它，然后用 AJAX 返回它（尽管我绝对不是 AJAX 专家）。

根据我所做的研究，没有办法仅使用 javascript 在所有 IE 版本中获取图片预览（这是因为获取完整文件路径被他们视为潜在的安全风险）。我可以要求我的用户将网站添加到受信任的网站，但您通常不会要求用户篡改这些设置（更不用说让您的网站在用户看来可疑的最快方法是直接要求他们将您的网站添加到受信任的网站列表。这就像发送电子邮件并要求输入密码。“相信我！我很安全！”:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:04:01.913

简短回答：使用[jQuery 表单插件](http://www.malsup.com/jquery/form/)，它支持类似 AJAX 的表单提交，即使是文件上传。

tl;博士

缩略图预览是流行的网站通常是通过几个步骤来完成的，基本上网站都做这些步骤：

1.  上传RAW图像
2.  调整图像大小并优化数据存储
3.  生成指向该文件的临时链接（通常存储在服务器维护的 HTTP 会话中）
4.  将其发送回用户，以启用“预览”
5.  用户确认图像后实际存储图像

一些不好的解决方案是：

1.  大多数现代浏览器都有启用脚本访问本地文件的选项，但通常您不会要求您的用户修改这些低级设置。
2.  早期的 Internet Explorer（啊......是的，这是一种耻辱）和现代浏览器的古代版本将通过读取文件输入框的“值”来公开完整的文件路径，您可以直接生成标签并使用该值。（现在它被一些 c:/fakepath/... 东西取代了。）
3.  使用 Adob​​e Flash 模拟文件选择面板，可以正确读取本地文件。但是将其传递给 JavaScript 是另一个主题......

希望这些有所帮助。;)

**更新**

我实际上遇到了需要在上传之前进行预览的情况，我也想把它放在这里。我记得，现代浏览器中没有过渡版本在`FileReader`屏蔽真实文件路径之前没有实现，但如果是这样，请随时纠正我。这个解决方案应该可以满足大多数浏览器的需求，只要它们受 jQuery 支持。

```
// 1\. Listen to change event
$(':file').change(function() {
  // 2\. Check if it has the FileReader class
  if (!this.files) {
    // 2.1\. Old enough to assume a real path
    setPreview(this.value);
  }
  else {
    // 2.2\. Read the file content.
    var reader = new FileReader();

    reader.onload = function() {
      setPreview(reader.result);
    };

    reader.readAsDataURL();
  }
});

function setPreview(url) {
  // Do preview things.
  $('.preview').attr('src', url);
} 
```**

# cakephp - 蛋糕中的 i18n - 如何使用语言快捷方式，如 en 而不是 eng

> ID：13183629
> 
> 赞同：0
> 
> 时间：2012-11-01T18:52:13.200
> 
> 标签：cakephp, cakephp-2.1

我已经准备好翻译我的应用程序，但不幸的是，我使用“en”、“de”和“pl”语言快捷方式而不是“eng”、“ger”和“pol”来开发它。现在我看到当我做`Configure::write('Config.language','pl')`蛋糕时不想阅读翻译`App/Locale/pl/LC_MESSAGES/default.po`- 但它适用`pol`于例如。问题是我所有的链接、国际化文件等都在使用'en'、'de'、'pl' - 我不能只是将其更改为'eng'、'pol'等等......我如何可以强制蛋糕使用我的配置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:01:10.967

您可以使用 2 个字母的语言代码作为`Config.language`配置值和您的网址。但是使用相应的 3 个字母代码命名您的语言环境文件夹。因此，对于您的语言代码“en”、“de”、“pl”，文件夹将分别为`Locale/eng`, 。Cake 会正确地在对应的文件夹中查找翻译文件。`Locale/deu``Locale/pol`

# javascript - 如何使用 jQuery 打开 Bootstrap 模式窗口？

> ID：13183630
> 
> 赞同：905
> 
> 时间：2012-11-01T18:52:18.547
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 Twitter Bootstrap 模式窗口功能。当有人在我的表单上单击提交时，我想在单击表单中的“提交按钮”时显示模式窗口。

```
<form id="myform" class="form-wizard">
    <h2 class="form-wizard-heading">BootStap Wizard Form</h2>
    <input type="text" value=""/>
    <input type="submit"/>
</form>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
        <p>One fine body…&lt;/p>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary">Save changes</button>
    </div>
</div> 
```

jQuery：

```
$('#myform').on('submit', function(ev) {
    $('#my-modal').modal({
        show: 'false'
    }); 

    var data = $(this).serializeObject();
    json_data = JSON.stringify(data);
    $("#results").text(json_data); 
    $(".modal-body").text(json_data); 

    // $("#results").text(data);

    ev.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：1662
> 
> 时间：2012-11-01T18:57:05.317

Bootstrap 有一些可以在 modals 上手动调用的函数：

```
$('#myModal').modal('toggle');
$('#myModal').modal('show');
$('#myModal').modal('hide'); 
```

你可以在这里看到更多：[Bootstrap modal 组件](https://getbootstrap.com/docs/3.4/javascript/#modals)

特别是[方法部分](http://getbootstrap.com/javascript/#modals-methods)。

所以你需要改变：

```
$('#my-modal').modal({
    show: 'false'
}); 
```

到：

```
$('#myModal').modal('show'); 
```

如果您想制作自己的自定义弹出窗口，以下是来自其他社区成员的推荐视频：

[https://www.youtube.com/watch?v=zK4nXa84Km4](https://www.youtube.com/watch?v=zK4nXa84Km4)

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2016-01-19T07:24:16.743

大多数情况下，当`$('#myModal').modal('show');`它不起作用时，它是由两次包含 jQuery 引起的。包含 jQuery 2 次会使模态不工作。

删除其中一个链接以使其再次工作。

此外，一些插件也会导致错误，在这种情况下添加

```
jQuery.noConflict(); 
$('#myModal').modal('show'); 
```

* * *

## 回答 #3

> 赞同：97
> 
> 时间：2013-08-28T17:11:58.293

此外，您可以通过数据属性使用

```
<button type="button" data-toggle="modal" data-target="#myModal">Launch modal</button> 
```

在这种特殊情况下，您不需要编写 javascript。

你可以在这里看到更多：http: [//getbootstrap.com/2.3.2/javascript.html#modals](http://getbootstrap.com/2.3.2/javascript.html#modals)

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2016-02-06T19:21:24.320

只需使用选择器调用模态方法（不传递任何参数）`jQuery`。

这是示例：

```
$('#modal').modal(); 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2016-04-18T06:42:04.560

如果使用链接的 onclick 函数通过 jQuery 调用模态框，“href”不能为空。

例如：

```
... ...
<a href="" onclick="openModal()">Open a Modal by jQuery</a>
... ...
... ...
<script type="text/javascript">

function openModal(){

    $('#myModal').modal();
}       
</script> 
```

模态无法显示。正确的代码是：

```
<a href="#" onclick="openModal()">Open a Modal by jQuery</a> 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-08-26T13:57:06.960

这是文档准备好后立即加载引导警报的方法。很简单，只需添加

```
 $(document).ready(function(){
   $("#myModal").modal();
}); 
```

我在 W3Schools 上做了一个[演示。](https://www.w3schools.com/code/tryit.asp?filename=FIXH7FBJ6Y6T)

```
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <h2>Here is how to load a bootstrap modal as soon as the document is ready </h2>
  <!-- Trigger the modal with a button -->

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Modal Header</h4>
        </div>
        <div class="modal-body">
          <p>Some text in the modal.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>

    </div>
  </div>

</div>

<script>
$(document).ready(function(){
   $("#myModal").modal();
});
</script>

</body>
</html>
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2017-01-14T21:16:43.357

在此处查看完整的解决方案：

[http://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_ref_js_modal_show&stacked=h](http://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_ref_js_modal_show&stacked=h)

确保按要求的顺序放置库以获得结果：

1- 首先 bootstrap.min.css 2- jquery.min.js 3- bootstrap.min.js

（换句话说 jquery.min.js 必须在 bootstrap.min.js 之前调用）

```
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js">
</script> 

 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2018-12-13T23:55:08.177

在调用函数时尝试使用**jQuery**而不是**$**符号，它在我的情况下有效，如下所示。

```
jQuery.noConflict(); 
jQuery('#myModal').modal('show'); 
```

**jQuery.noConflict();** 因为当 jQuery('#myModal').modal('show'); 不起作用，这是由于两次包含 jQuery 造成的。包含 jQuery 2 次会使模态不工作。在这种情况下它会解决问题，就像我的情况一样，它正在重复。

进一步你可以去这个链接

[通过 JQuery 调用不显示引导模型窗口](https://stackoverflow.com/questions/53697389/bootstrap-model-window-not-showing-by-calling-through-jquery)

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2017-06-08T03:33:40.940

我尝试了几种失败的方法，但下面的方法对我来说就像一个魅力：

```
$('#myModal').appendTo("body").modal('show'); 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2017-11-07T11:49:58.870

尝试

```
$("#myModal").modal("toggle") 
```

打开或关闭 id 为 myModal 的模式。

如果上述方法不起作用，则意味着 bootstrap.js 已被其他 js 文件覆盖。这是一个解决方案

1:- 将 bootstrap.js 移至底部，以便覆盖其他 js 文件。

2:- 确保订单如下

```
<script src="plugins/jQuery/jquery-2.2.3.min.js"></script>
<!-- Other js files -->
<script src="plugins/jQuery/bootstrap.min.js"></script> 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2019-12-08T11:09:16.660

```
<script type="text/javascript">
    $(function () {
        $("mybtn").click(function () {
            $("#my-modal").modal("show");
        });
    });
</script> 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2017-10-12T10:44:15.067

```
<form id="myform" class="form-wizard">
    <h2 class="form-wizard-heading">BootStap Wizard Form</h2>
    <input type="text" value=""/>
    <input type="submit" id="submitButton"/>
</form>

<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
        <p>One fine body…&lt;/p>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary">Save changes</button>
    </div>
</div> 
```

您可以使用下面的代码启动模式。

```
$(document).ready(function(){
    $("#submitButton").click(function(){
        $("#myModal").modal();
    });
}); 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-06-29T10:43:49.640

# 试试这个

> myModal1 是 modal 的 id

```
$('#myModal1').modal({ show: true }); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-05-13T22:26:03.767

**Bootstrap 4.3** - 更多[在这里](https://getbootstrap.com/docs/4.3/components/modal/)

```
$('#exampleModal').modal();
```

```
<!-- Initialize Bootstrap 4 -->

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<!-- MODAL -->

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">

      <div class="modal-body">
        Hello world   
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-07-13T13:29:30.033

试试这个。它对我很有效。

```
function clicked(item) {
         alert($(item).attr("id"));
        }
```

```
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-rtl/3.4.0/css/bootstrap-rtl.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<button onclick="clicked(this);" id="modalME">Click me</button>

<!-- Modal -->
  <div class="modal" id="modalME" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-header">
        <h2>Modal in CSS</h2>
        <a href="#close" class="btn-close" aria-hidden="true">×</a> <!--CHANGED TO "#close"-->
      </div>
      <div class="modal-body">
        <p>One modal example here.</p>
      </div>
      <div class="modal-footer">
        <a href="#close" class="btn">Nice!</a>  <!--CHANGED TO "#close"-->
      </div>
      </div>
    </div>
  </div>
  <!-- /Modal -->
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2021-04-06T14:27:36.040

```
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#staticBackdrop">
  Launch static backdrop modal
</button>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div>
    </div>
  </div>
</div> 
```

# c# - 反序列化包含 int 列表的对象

> ID：13183634
> 
> 赞同：0
> 
> 时间：2012-11-01T18:52:44.747
> 
> 标签：c#

我有一个 REST 服务返回包含`int`. 目标代码如下

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Serialization;

namespace All.Tms.Dto
{
    [XmlRoot(Namespace = "http://schemas.datacontract.org/2004/07/All.Tms.Dto")]
    public class ReadSensorsForVehicleIdResponse
    {
        public List<int> sensorIdList { get; set; }
    }
} 
```

当此对象被序列化时，将生成 XML 并将其发送为：

```
<ReadSensorsForVehicleIdResponse xmlns="http://schemas.datacontract.org/2004/07/All.Tms.Dto"      xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><sensorIdList xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays"><a:int>107</a:int></sensorIdList></ReadSensorsForVehicleIdResponse> 
```

问题是 int 值被序列化为

```
<a:int>107</a:int> 
```

这会导致对象的反序列化失败。当我改变

```
<a:int>107</a:int> 
```

到

```
<int>107</int> 
```

对象正确反序列化。是否有任何理由以`int`这种方式序列化这些值，我该如何解决这个问题？

这是我用来反序列化的代码

```
public static T Deserialize<T>(string xml) where T : class
    {
        var serializer = new XmlSerializer(typeof(T));

        var stream = new MemoryStream(Encoding.UTF8.GetBytes(xml));

        var reader = XmlReader.Create(stream);

        return (T)serializer.Deserialize(reader);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T18:56:46.600

这是一个正在应用的 xml 命名空间

```
xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays" 
```

在反序列化过程中，您需要考虑命名空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T19:10:38.603

[Linq To Xml](http://msdn.microsoft.com/en-us/library/bb387098.aspx)易于使用

```
var xDoc = XDocument.Parse(xmlstring); //or XDocument.Load(fileName)
XNamespace ns = "http://schemas.microsoft.com/2003/10/Serialization/Arrays";

var a = xDoc.Descendants(ns + "int")
            .Select(x => (int)x)
            .ToList(); 
```

# python - 使用python将数据格式化为.csv

> ID：13183637
> 
> 赞同：0
> 
> 时间：2012-11-01T18:53:01.480
> 
> 标签：python, csv

我有以下字符串

```
string = "First Name | Last Name | Age" 
```

当我打印它看起来像这样：

```
First Name | Last Name | Age 
```

当我打印到 csv 文件时

```
writer.writerow(datac[0]) 
```

看起来像这样：

```
F, i, r, s, t and so on... 
```

我如何才能在单行打印？像这样

```
Row1 

First Name | Last Name | Age 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T18:56:02.340

`writer.writerow()`期待一个序列。由于字符串是字符序列，因此它被这样解释。

如果您的行仅包含一个元素，则可以这样表示：`writer.writerow([datac[0]])`或`writer.writerow(datac[0:1])`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:00:30.220

writer.writerow() 需要一个序列，当你给它一个字符串时，它会将它视为一个字符序列。尝试这样做。

```
writer = csv.writer(csvfile, delimiter=' ')
string = "First Name | Last Name | Age"
writer.writerow(string.split('|')) 
```

# postgresql - Postgres COPY 命令 - 带逗号的字段，用双引号引起来

> ID：13183644
> 
> 赞同：1
> 
> 时间：2012-11-01T18:53:26.677
> 
> 标签：postgresql, csv, copy

我已经搜索并找到了一些与 postgres csv 导入相关的帖子，但没有解决我当前的问题。

我一直使用 postgres **copy**命令将来自异构数据源的数据带入我们的系统。目前正在努力处理 1 亿行 .csv 文件，*逗号分隔*。问题是这样的行：

```
009098,0981098094,"something","something else",""this one, well, is a problem"", "another thing" 
```

用嵌入逗号的双引号括起来的字段。这些字段未正确解析，我收到错误消息：

```
"ERROR:  extra data after last expected column" 
```

通常当出现这种情况时，我会临时处理有问题的行，但是这个文件太大了，我希望有一些更通用的方法来防御它。要求修改数据格式是不可能的。

```
copy mytable from '/path/to/file.csv' csv header quote '"' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:22:07.943

那是格式错误的 CSV。您将双引号加倍以在引号字段中嵌入双引号；例如：

```
"where","is ""pancakes""","house?" 
```

具有三个值：

*   `where`
*   `is "pancakes"`
*   `house?`

您遇到问题的行有双引号：

```
009098,0981098094,"something","something else",""this one, well, is a problem"", "another thing"
                                               ^^                            ^^ 
```

我认为[COPY](http://www.postgresql.org/docs/current/static/sql-copy.html)对此无能为力，因为正确的版本是模棱两可的：应该是`"this one, well, is a problem"`还是应该是`"""this one, well, is a problem"""`？

我认为你必须手动修复它。如果您可以唯一地识别损坏的行，那么一个快速`sed`的单行应该能够完成这项工作。

* * *

出于参考目的，我见过的最接近 CSV 标准的是[RFC 4180](http://www.ietf.org/rfc/rfc4180.txt)，第二部分有这样的说法：

```
5\.  Each field may or may not be enclosed in double quotes (however
    some programs, such as Microsoft Excel, do not use double quotes
    at all).  If fields are not enclosed with double quotes, then
    double quotes may not appear inside the fields.  For example:

    "aaa","bbb","ccc" CRLF
     zzz,yyy,xxx
[...]
7\.  If double-quotes are used to enclose fields, then a double-quote
    appearing inside a field must be escaped by preceding it with
    another double quote.  For example:

    "aaa","b""bb","ccc" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T22:34:12.483

[这是基于 Kernighan 和 Plauger的 The Practice of Programming](http://cm.bell-labs.com/cm/cs/tpop/index.html)中的 CSV 代码的代码，该代码已经适应处理您奇怪的格式错误的 CSV 数据。（这并不难；我已经完成了主要代码的工作和打包，所以我只需要添加 CSV 输出函数并修改`advquoted()`函数以处理这个问题中奇怪的格式。

### csv2.h

```
/*
@(#)File:           $RCSfile: csv2.h,v $
@(#)Version:        $Revision: 2.1 $
@(#)Last changed:   $Date: 2012/11/01 22:23:07 $
@(#)Purpose:        Scanner for Comma Separated Variable (CSV) Data
@(#)Author:         J Leffler
@(#)Origin:         Kernighan & Pike, 'The Practice of Programming'
*/

/*TABSTOP=4*/

#ifndef CSV2_H
#define CSV2_H

#ifdef  __cplusplus
extern "C" {
#endif

#ifdef MAIN_PROGRAM
#ifndef lint
/* Prevent over-aggressive optimizers from eliminating ID string */
const char jlss_id_csv2_h[] = "@(#)$Id: csv2.h,v 2.1 2012/11/01 22:23:07 jleffler Exp $";
#endif /* lint */
#endif /* MAIN_PROGRAM */

#include <stdio.h>

extern char  *csvgetline(FILE *ifp);    /* Read next input line */
extern char  *csvgetfield(size_t n);    /* Return field n */
extern size_t csvnfield(void);          /* Return number of fields */
extern void   csvreset(void);           /* Release space used by CSV */

extern int    csvputfield(FILE *ofp, const char *field);
extern int    csvputline(FILE *ofp, char **fields, int nfields);
extern void   csvseteol(const char *eol);

#ifdef  __cplusplus
}
#endif

#endif /* CSV2_H */ 
```

### csv2.c

```
/*
@(#)File:           $RCSfile: csv2.c,v $
@(#)Version:        $Revision: 2.1 $
@(#)Last changed:   $Date: 2012/11/01 22:23:07 $
@(#)Purpose:        Scanner for Comma Separated Variable (CSV) Data
@(#)Modification:   Deal with specific malformed CSV
@(#)Author:         J Leffler
@(#)Origin:         Kernighan & Pike, 'The Practice of Programming'
*/

/*TABSTOP=4*/

#ifndef lint
/* Prevent over-aggressive optimizers from eliminating ID string */
const char jlss_id_csv2_c[] = "@(#)$Id: csv2.c,v 2.1 2012/11/01 22:23:07 jleffler Exp $";
#endif /* lint */

/*
** See RFC 4180 (http://www.ietf.org/rfc/rfc4180.txt).
**
** Specific malformed CSV - see SO 13183644 (http://stackoverflow.com/questions/13183644).
** Data contains malformed CSV fields like: OK,""this is a problem"",OK
** Two (but not three) field quotes at the start extract as "this is a problem" (with the quotes).
*/

#include "csv2.h"
#include <stdlib.h>
#include <string.h>

enum { NOMEM = -2 };

static char *line = 0;      /* Input line */
static char *sline = 0;     /* Split line */
static size_t maxline = 0;  /* Size of line[] and sline[] */
static char **field = 0;    /* Field pointers */
static size_t maxfield = 0; /* Size of field[] */
static size_t nfield = 0;   /* Number of fields */

static char fieldsep[]= ",";    /* Field separator characters */
static char fieldquote = '"';   /* Quote character */

static char eolstr[8] = "\n";

void csvreset(void)
{
    free(line);
    free(sline);
    free(field);
    line = 0;
    sline = 0;
    field = 0;
    maxline = maxfield = nfield = 0;
}

static int endofline(FILE *ifp, int c)
{
    int eol = (c == '\r' || c == '\n');
    if (c == '\r')
    {
        c = getc(ifp);
        if (c != '\n' && c != EOF)
            ungetc(c, ifp);
    }
    return(eol);
}

/* Modified to deal with specific malformed CSV */
static char *advquoted(char *p)
{
    size_t i;
    size_t j;
    if (p[0] == fieldquote && (p[1] != *fieldsep && p[1] != fieldquote))
    {
        /* Malformed CSV: ""some stuff"" --> "some stuff" */
        /* Find "\"\"," or "\"\"\0" to mark end of field */
        /* If we don't find it, drop through to 'regular' case */
        char *eof = strstr(&p[2], "\"\"");
        if (eof != 0 && (eof[2] == *fieldsep || eof[2] == '\0'))
        {
            p[eof + 1 - p] = '\0';
            return(eof + 2);
        }
    }
    for (i = j = 0; p[j] != '\0'; i++, j++)
    {
        if (p[j] == fieldquote && p[++j] != fieldquote)
        {
            size_t k = strcspn(p+j, fieldsep);
            memmove(p+i, p+j, k);  // 1 -> i fixing transcription error
            i += k;
            j += k;
            break;
        }
        p[i] = p[j];
    }
    p[i] = '\0';
    return(p + j);
}

static int split(void)
{
    char *p;
    char **newf;
    char *sepp;
    int sepc;

    nfield = 0;
    if (line[0] == '\0')
        return(0);
    strcpy(sline, line);
    p = sline;

    do
    {
        if (nfield >= maxfield)
        {
            maxfield *= 2;
            newf = (char **)realloc(field, maxfield * sizeof(field[0]));
            if (newf == 0)
                return NOMEM;
            field = newf;
        }
        if (*p == fieldquote)
            sepp = advquoted(++p);
        else
            sepp = p + strcspn(p, fieldsep);
        sepc = sepp[0];
        sepp[0] = '\0';
        field[nfield++] = p;
        p = sepp + 1;
    } while (sepc == ',');

    return(nfield);
}

char *csvgetline(FILE *ifp)
{
    size_t i;
    int    c;

    if (line == NULL)
    {
        /* Allocate on first call */
        maxline = maxfield = 1;
        line = (char *)malloc(maxline);     /*=C++=*/
        sline = (char *)malloc(maxline);    /*=C++-*/
        field = (char **)malloc(maxfield*sizeof(field[0])); /*=C++=*/
        if (line == NULL || sline == NULL || field == NULL)
        {
            csvreset();
            return(NULL);   /* out of memory */
        }
    }
    for (i = 0; (c = getc(ifp)) != EOF && !endofline(ifp, c); i++)
    {
        if (i >= maxline - 1)
        {
            char  *newl;
            char  *news;
            maxline *= 2;
            newl = (char *)realloc(line, maxline);  /*=C++=*/
            news = (char *)realloc(sline, maxline); /*=C++-*/
            if (newl == NULL || news == NULL)
            {
                csvreset();
                return(NULL);   /* out of memory */
            }
            line = newl;
            sline = news;
        }
        line[i] = c;
    }
    line[i] = '\0';
    if (split() == NOMEM)
    {
        csvreset();
        return(NULL);
    }
    return((c == EOF && i == 0) ? NULL : line);
}

char *csvgetfield(size_t n)
{
    if (n >= nfield)
        return(0);
    return(field[n]);
}

size_t csvnfield(void)
{
    return(nfield);
}

int csvputfield(FILE *ofp, const char *ofield)
{
    const char escapes[] = "\",\r\n";
    if (strpbrk(ofield, escapes) != 0)
    {
        size_t len = strlen(ofield) + 2;
        const char *pos = ofield;
        while ((pos = strchr(pos, '"')) != 0)
        {
            len++;
            pos++;
        }
        char *space = malloc(len+1);
        if (space == 0)
            return EOF;
        char *cpy = space;
        pos = ofield;
        *cpy++ = '"';
        char c;
        while ((c = *pos++) != '\0')
        {
            if (c == '"')
                *cpy++ = c;
            *cpy++ = c;
        }
        *cpy++ = '"';
        *cpy = '\0';
        int rc = fputs(space, ofp);
        free(space);
        return rc;
    }
    else
        return fputs(ofield, ofp);
}

int csvputline(FILE *ofp, char **fields, int nfields)
{
    for (int i = 0; i < nfields; i++)
    {
        if (i > 0)
            putc(',', ofp);
        if (csvputfield(ofp, fields[i]) == EOF)
            return EOF;
    }
    return(fputs(eolstr, ofp));
}

void csvseteol(const char *eol)
{
    size_t nbytes = strlen(eol);
    if (nbytes >= sizeof(eolstr))
        nbytes = sizeof(eolstr) - 1;
    memmove(eolstr, eol, nbytes);
    eolstr[nbytes] = '\0';
}

#ifdef TEST

int main(void)
{
    char *in_line;

    while ((in_line = csvgetline(stdin)) != 0)
    {
        size_t n = csvnfield();
        char *fields[n];        /* C99 VLA */
        printf("line = '%s'\n", in_line);
        for (size_t i = 0; i < n; i++)
        {
            printf("field[%zu] = '%s'\n", i, csvgetfield(i));
            printf("field[%zu] = [", i);
            csvputfield(stdout, csvgetfield(i));
            fputs("]\n", stdout);
            fields[i] = csvgetfield(i);
        }
        printf("fields[0..%zu] = ", n-1);
        csvputline(stdout, fields, n);
    }

    return(0);
}

#endif /* TEST */ 
```

编译代码以使用示例函数`-DTEST`创建程序。`main()`你需要一个 C99 编译器；中的代码`main()`使用 VLA（可变长度数组）。您可以通过动态内存分配或悲观（过度杀伤）内存分配来避免这种情况（几千个指针的数组现在不会杀死大多数系统，但很少有 CSV 文件每行会有几千个字段）。

### 示例数据

密切基于问题中的数据。

```
009098,0981098094,"something","something else",""this one, well, is a problem"", "another thing"
123458,1234561007,"anything","nothing else",""this one, well, is a problem"","dohicky
503458,1234598094,"nothing","everything else","""this one, well, it isn't a problem""","abelone"
610078,1236100794,"everything","anything else","this ""isn't a problem"", he said.","Orcas Rule" 
```

### 示例输出

```
line = '009098,0981098094,"something","something else",""this one, well, is a problem"", "another thing"'
field[0] = '009098'
field[0] = [009098]
field[1] = '0981098094'
field[1] = [0981098094]
field[2] = 'something'
field[2] = [something]
field[3] = 'something else'
field[3] = [something else]
field[4] = '"this one, well, is a problem"'
field[4] = ["""this one, well, is a problem"""]
field[5] = ' "another thing"'
field[5] = [" ""another thing"""]
fields[0..5] = 009098,0981098094,something,something else,"""this one, well, is a problem"""," ""another thing"""
line = '123458,1234561007,"anything","nothing else",""this one, well, is a problem"","dohicky'
field[0] = '123458'
field[0] = [123458]
field[1] = '1234561007'
field[1] = [1234561007]
field[2] = 'anything'
field[2] = [anything]
field[3] = 'nothing else'
field[3] = [nothing else]
field[4] = '"this one, well, is a problem"'
field[4] = ["""this one, well, is a problem"""]
field[5] = 'dohicky'
field[5] = [dohicky]
fields[0..5] = 123458,1234561007,anything,nothing else,"""this one, well, is a problem""",dohicky
line = '503458,1234598094,"nothing","everything else","""this one, well, it isn't a problem""","abelone"'
field[0] = '503458'
field[0] = [503458]
field[1] = '1234598094'
field[1] = [1234598094]
field[2] = 'nothing'
field[2] = [nothing]
field[3] = 'everything else'
field[3] = [everything else]
field[4] = '"this one, well, it isn't a problem"'
field[4] = ["""this one, well, it isn't a problem"""]
field[5] = 'abelone'
field[5] = [abelone]
fields[0..5] = 503458,1234598094,nothing,everything else,"""this one, well, it isn't a problem""",abelone
line = '610078,1236100794,"everything","anything else","this ""isn't a problem"", he said.","Orcas Rule"'
field[0] = '610078'
field[0] = [610078]
field[1] = '1236100794'
field[1] = [1236100794]
field[2] = 'everything'
field[2] = [everything]
field[3] = 'anything else'
field[3] = [anything else]
field[4] = 'this "isn't a problem", he said.'
field[4] = ["this ""isn't a problem"", he said."]
field[5] = 'Orcas Rule'
field[5] = [Orcas Rule]
fields[0..5] = 610078,1236100794,everything,anything else,"this ""isn't a problem"", he said.",Orcas Rule 
```

字段打印两次，一次测试字段提取，一次测试字段打印。`csvputline()`除了将文件从格式错误的 CSV 转换为格式正确的 CSV之外，您可以通过删除打印来简化输出。

# asp.net-mvc - 使用 Entity Framework 4 数据注释进行日期范围验证

> ID：13183647
> 
> 赞同：3
> 
> 时间：2012-11-01T18:53:34.193
> 
> 标签：asp.net-mvc, entity-framework-4, data-annotations

我正在使用 Entity Framework 4 为 ASP.NET MVC3 / Razor2 Web 应用程序提供模型。我正在使用 DataAnnotations 来实现验证。我需要将一些日期限制在 SQL smalldatetime 类型接受的范围内。

我的问题是我无法让 RangeAttribute 为日期字段正常工作。相关字段的模型元数据定义为：

```
 [Display(ResourceType = typeof(Resources.Patient), Name = "DateOfBirth_Name")]
    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    [DataType(DataType.Date)]
    [Range(typeof(DateTime), "01/01/1900", "06/06/2079", ErrorMessageResourceType = typeof(Resources.Patient), ErrorMessageResourceName = "DateOfBirth_Range")] 
    public System.DateTime DateOfBirth { get; set; } 
```

使用此代码，无论我在日期字段中输入什么值，应用程序都会将其视为无效。如果它是相关的，我也将 JQuery-UI 日期选择器与相关字段一起使用。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:20:07.757

您没有指定错误发生的位置，但我的猜测是它是客户端（？）jQuery Validation 不适用于`RangeAttribute`. 要进行验证，请禁用 jQuery 验证，并且有效输入应通过（服务器）验证。

为了解决这个问题，您必须编写自己的日期范围验证，例如[http://blogs.msdn.com/b/stuartleeks/archive/2011/01/25/asp-net-mvc-3-integrating-with- -jquery-ui-date-picker-and-adding-a-jquery-validate-date-range-validator.aspx](http://blogs.msdn.com/b/stuartleeks/archive/2011/01/25/asp-net-mvc-3-integrating-with-the-jquery-ui-date-picker-and-adding-a-jquery-validate-date-range-validator.aspx)

或者，您可以查看[Data Annotations Extensions](http://dataannotationsextensions.org)或[MVC Foolproof Validation](http://foolproof.codeplex.com)等软件包，看看它们是否可用于解决问题。

# perl - Perl system() 命令的奇怪行为

> ID：13183653
> 
> 赞同：1
> 
> 时间：2012-11-01T18:53:58.960
> 
> 标签：perl, system, infinite-loop, init.d

请注意，我知道这可能不是最好或最佳的方法，但我以前在某个地方遇到过这个问题，我很好奇答案。

我有一个 perl 脚本，它从一个运行并偶尔死掉的 init 中调用。为了快速调试它，我整理了一个快速包装 perl 脚本，它基本上由

```
#$path set from library call.    
while(1){
  system("$path/command.pl " . join(" ",@ARGV) . " >>/var/log/outlog 2>&1");
  sleep 30; #Added this one later. See below...
} 
```

从命令行启动它，它运行良好且符合预期。command.pl 被调用，脚本基本上停在那里，直到子进程死亡然后再次运行。

但是，当从启动脚本（实际上是通过 start-stop-daemon）调用时，系统命令会立即返回，让 command.pl 继续运行。然后它又转了一圈。一次又一次。（如果没有 sleep 命令，这并不好玩。）。ps 显示（许多）command.pl 的父级为 1，而不是包装脚本的 id（当我从命令行运行时）。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:10:58.197

也许`command.pl`没有成功运行。也许该文件没有执行权限（您需要说`perl command.pl`吗？）。也许您正在从与您想象的不同的目录运行命令，并且`command.pl`找不到该文件。

您至少可以检查三件事：

1.  命令的标准错误输出。现在你正在通过说吞下它`2>&1`。删除该部分并观察`system`命令产生的错误。
2.  的返回值`system`。该命令可能会运行并且`system`可能仍会返回退出代码，但如果`system`返回 0，则表明该命令成功。
3.  Perl 的错误变量`$!`。如果有问题，Perl 会设置`$!`，这可能有用也可能没用。

总结一下，试试：

```
my $ec = system("command.pl >> /var/log/outlog");
if ($ec != 0) {
    warn "exit code was $ec, \$! is $!";
} 
```

更新：如果命令的多个实例不断出现在您的`ps`输出中，那么听起来程序正在分叉并在后台运行。如果这确实是该命令应该执行的操作，那么您**不想**做的是在无限循环中运行此命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:00:20.183

也许从守护进程运行时，“系统”命令使用的 shell 与您自己运行时使用的 shell 不同。也许守护进程使用的 shell 无法识别 >& 构造。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-01T19:01:35.690

如果对您有用，请`system("...")`尝试功能，而不是。`exec("...")`

# ios - 从表视图选择中播放视频 URL

> ID：13183656
> 
> 赞同：1
> 
> 时间：2012-11-01T18:54:16.850
> 
> 标签：ios, objective-c, uitableview, video, mpmovieplayercontroller

当在表格视图中选择特定项目时，我想使用 MediaPlayer 框架在 xcode 中播放视频。我已将我的代码放在下面，但不确定从这里开始。具体来说，我不确定如何将列表视图项与 url 相关联。

```
//  ViewController.m
//  Test
//

#import "ViewController.h"

@implementation ViewController
@synthesize tableData;

- (void)viewDidLoad
{

    tableData = [[NSArray alloc] initWithObjects:@"Bacon", @"Banana", @"Big", @"Billious", nil];

    [super viewDidLoad];
}

#pragma mark - TableView Data Source Methods

- (NSInteger)tableView:(UITableView *)tableView
    numberOfRowsInSection:(NSInteger)section
{
    return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView
    cellForRowAtIndexPath:(NSIndexPath *)indexPath

{
    UITableViewCell *cell = nil;

    cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];
    }

    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];

    return cell;

}

#pragma mark - TableView Delegate Methods

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

{

    NSString *moviePath = @"http://specified URL";
    MPMoviePlayerController *theMovie = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:moviePath]];
    [theMovie play];
    MPMoviePlayerViewController *moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:moviePath]];
    [self presentMoviePlayerViewControllerAnimated:moviePlayer];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T06:47:23.490

`objectAtIndex:indexPath.row`不包含*urlString* ，因为您的数组 tabledata 没有任何*url*。尝试获取特定元素的*url*，然后在 moviePath 中使用它。

```
NSURL *url= [NSURL URLWithString:@"http://www.xyz.com/video/x109z02"];
theMoviPlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
theMoviPlayer.scalingMode = MPMovieScalingModeFill;
theMoviPlayer.view.frame = CGRectMake(0, 60, 320, 350);
[self.view addSubview:theMoviPlayer.view];
[self.theMoviPlayer play]; 
```

还添加框架，然后将其导入头文件中。

# asp.net - 在 ASP.NET MVC 中格式化 JSON

> ID：13183658
> 
> 赞同：2
> 
> 时间：2012-11-01T18:54:19.520
> 
> 标签：asp.net, asp.net-mvc, json

我想从 ASP.NET MVC ActionResult 类型方法返回一个 JSON，它看起来像这样：

```
{
     success: true,
     users: [
    {id: 1, FileName: 'Text22'},
    {id: 2, FileName: 'Text23'}
    ]
} 
```

我将如何格式化它？现在我有这样的东西

```
Return Json(New With {Key .success = "true", Key .users = responseJsonString}, JsonRequestBehavior.AllowGet) 
```

编辑：我使用的是 VB.NET，但 C# 中的答案也很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T19:02:22.263

我更喜欢使用 ViewModel，而不是手动构建复杂的 JSON 响应。它确保了所有返回数据的方法的一致性，并且更容易使用强类型属性恕我直言。

```
public class Response
{
    public bool Success { get; set; }
    public IEnumerable<User> Users { get; set; }
}

public class User 
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

然后只是：

```
Response response = new Response();
response.Success = true;
// populate the rest of the data

return Json(response); 
```

如果有成功状态或错误消息等常见数据，这还具有让您对每个响应使用基类的优势。

```
public class ResponseBase
{
    public bool Success { get; set; }
    public string Message { get; set; }
}

public class UserResponse : ResponseBase
{ 
    IENumerable<User> Users { get; set }
} 
```

现在，如果您有错误：

```
return Json(new ResponseBase() { Success = false, Message = "your error" }); 
```

或者如果它成功了

```
return Json(new UserResponse() { Success = true, Users = users }); 
```

如果您想手动制作 JSON，那么只需：

```
return Json(new { success = true, users = new[] { new { id = 1, Name = "Alice"}, new { id = 2, Name = "Bob"} } }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:00:47.240

在 C# 中

```
return Json(new
    {
        success = true,
        users = new[]
            {
                new {id = 1, FileName = "Text22"}, new {id = 2, FileName = "Text23"}
            }
    }, JsonRequestBehavior.AllowGet); 
```

返回

{"success":true,"users":[{"id":1,"FileName":"Text22"},{"id":2,"FileName":"Text23"}]}

# ruby-on-rails - 允许咆哮或终端通知器进行警卫

> ID：13183661
> 
> 赞同：4
> 
> 时间：2012-11-01T18:54:33.307
> 
> 标签：ruby-on-rails, rspec, guard, gemfile

好的，目前我可以让[Growl](https://rubygems.org/gems/growl)或[Terminal Notifier](https://github.com/Springest/terminal-notifier-guard)与 Guard 一起使用。无论我放入其中`Gemfile`并与之一起运行`bundle`的任何一个都可以工作。

`Gemfile`除了选择使用哪一个之外，我还需要其他地方。我正在与多个开发人员一起开发一个项目，并且大多数人都使用 Growl。我更喜欢终端通知程序。

我不想`Gemfile`在版本控制中进行更改。

我想不出办法把它移到`Guardfile`. 直接包含在 Gemfile 中并将其分离到每个开发人员可以编辑他们的`.extra-gems`文件或其他东西的地方是下一个最好的事情吗？这似乎很乱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T08:45:09.220

当您不配置通知时，Guard 会尝试自动检测尽可能多的通知功能。您可以使用[通知](https://github.com/guard/guard#notification)方法来根据需要配置通知。Guard 还知道[共享配置](https://github.com/guard/guard#shared-configurations)，它允许您在主目录中拥有自己的配置。

您现在可以在以下位置设置您的个人通知设置`~/.guard.rb`：

`notification :terminal_title`

这将禁用自动检测，仅启用终端标题通知。

# solr - 有没有办法告诉 Solr 将整个索引存储为一个文件，而不是段

> ID：13183663
> 
> 赞同：0
> 
> 时间：2012-11-01T18:54:39.267
> 
> 标签：solr, full-text-search, search-engine, lucene

我想 Solr 存储整个索引而不是多个段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:03:35.747

最接近的事情是优化它，记录在这里：

[http://wiki.apache.org/solr/SolrOperationsTools#optimize](http://wiki.apache.org/solr/SolrOperationsTools#optimize)

一般来说，Lucene 优化会将索引减少到单个段。某些变量可以改变这种行为，因此优化可能不会减少到单个段。

请注意，这是一项非常昂贵的操作，通常不应非常频繁地进行。添加、修改或删除的文档将导致创建新的段并需要您重新优化。

# javascript - 有效地查找出现在指定 DOM 元素上的 DOM 元素

> ID：13183667
> 
> 赞同：8
> 
> 时间：2012-11-01T18:54:51.840
> 
> 标签：javascript, css, dom, position

如何有效地找到位于指定查询元素之上的所有 DOM 元素？

也就是说，我想要一个 Javascript 函数，当我传入对 DOM 元素的引用时，它将返回与输入元素有非零重叠的所有 DOM 元素的数组，并在视觉上出现在它的上方。我的具体目标是找到那些可能在视觉上阻碍它们下方元素的元素。

上下文是我对网页、查询元素或其他任何东西都没有高级知识的上下文。元素可以出于多种原因出现在其他元素之上。

我当然可以通过对 DOM 进行详尽的搜索来做到这一点，但是当 DOM 树变大时，这样做效率非常低且不实用。我还可以使用较新的 elementFromPoint 从查询元素中采样位置，以确保它确实在顶部，但这似乎效率很低。

关于如何更好地做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:48:22.517

我想不出比使用 elementFromPoint 更简单的方法。您似乎不想使用它，但可以给您一些一致的结果。如果有多层元素，您应该调整代码以移动已经抓取的元素或将它们设置为不可见并调用函数以获取新的数据元素集。

对于基本思想：

```
function upperElements(el) {
    var top = el.offsetTop,
        left = el.offsetLeft,
        width = el.offsetWidth,
        height = el.offsetHeight,
        elemTL = document.elementFromPoint(left, top),
        elemTR = document.elementFromPoint(left + width - 1, top),
        elemBL = document.elementFromPoint(left, top + height - 1),
        elemBR = document.elementFromPoint(left + width - 1, top + height - 1),
        elemCENTER = document.elementFromPoint(parseInt(left + (width / 2)), parseInt(top + (height / 2))),
        elemsUpper = [];
    if (elemTL != el) elemsUpper.push(elemTL);
    if (elemTR != el && $.inArray(elemTR, elemsUpper) === -1) elemsUpper.push(elemTR);
    if (elemBL != el && $.inArray(elemBL, elemsUpper) === -1) elemsUpper.push(elemBL);
    if (elemBR != el && $.inArray(elemBR, elemsUpper) === -1) elemsUpper.push(elemBR);
    if (elemCENTER != el && $.inArray(elemCENTER, elemsUpper) === -1) elemsUpper.push(elemCENTER);
    return elemsUpper;
}​ 
```

[jsFiddle](http://jsfiddle.net/rLbZH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:56:20.897

不幸的**是，没有办法不遍历所有 DOM 元素的解决方案**，因为您可以通过 CSS 规则将任何元素放在屏幕上的任何位置。

你可以做到的最好的实际上是迭代所有 DOM 元素以进行命中测试。

如果我必须这样做，我会依赖 jQuery，它是一个广泛使用的跨浏览器 API，并且在不断改进。

看看[http://api.jquery.com/position/](http://api.jquery.com/position/)、[http://api.jquery.com/width/](http://api.jquery.com/width/)和[http://api.jquery.com/height/](http://api.jquery.com/height/)

如果性能非常重要，您可以通过深入研究它们的实现并针对您的特定情况改进它来获得一个因素，但请记住，复杂性不会低于 O（DOM 元素数）

# c# - 我创建的程序在没有禁用 DEP 的情况下无法运行

> ID：13183669
> 
> 赞同：1
> 
> 时间：2012-11-01T18:54:54.453
> 
> 标签：c#, windows-7-x64, dep

我开发了一个程序（在 C# Winforms 中）并通过我创建的 Google 站点分发它。

我从某人那里得到一条评论，说如果没有禁用 DEP（他有 Windows 7），它就无法工作。

我读了一些关于 DEP 的东西，我知道它会阻止任何试图使用 RAM 运行的程序，这些程序应该保存到 Windows 系统......

这是我在开发程序时所做的事情吗？我为该程序制作了一个安装项目，因此它创建了一个 msi 文件。有没有办法阻止我的程序在 RAM 上运行那些被禁止的部分（如果我理解正确的话）？

如果有帮助，请链接到我的网站 - [https://sites.google.com/site/chessopeningmaster/](https://sites.google.com/site/chessopeningmaster/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:25:45.430

所有 .NET 程序，至少从 .NET 2.0 开始，但可能更早，都声明自己与 DEP 兼容。这是通过可执行文件头中的标志来完成的。当您从 Visual Studio 命令提示符对 EXE 运行 dumpbin.exe /headers 时，您可以看到它：

```
...
       2 subsystem (Windows GUI)
    8540 DLL characteristics
           Dynamic base
           NX compatible                       // <=== here
           No structured exception handler
           Terminal Server Aware
  100000 size of stack reserve
.... 
```

“NX”表示Never eXecute，一种由处理器在硬件中实现的数据执行预防机制。关于它的[维基百科文章](http://en.wikipedia.org/wiki/NX_bit)非常好。

这是由任何现代版本的 Windows（XP SP2 和更高版本）和任何现代处理器强制执行的。如果您的程序在您的机器上正确执行，您可以放心地假设您的程序实际上与 DEP 兼容。

所以这个用户可能看到你的程序崩溃了，不管什么原因，并开始修补他可用的工具。就像关闭 DEP 执法一样。从技术上讲，这有可能阻止了崩溃。然而，这并不意味着程序运行正常。这当然并不意味着您应该关闭此选项。这在技术上可以通过运行带有 /nxcompat:no 选项的 editbin.exe 来实现。

如果你想追求这个，那么你应该向用户询问崩溃进程的小型转储。

# html - Eclipse JavaDoc 生成失败并出现 IllegalArgumentException？

> ID：13183675
> 
> 赞同：4
> 
> 时间：2012-11-01T18:55:06.540
> 
> 标签：html, eclipse, javadoc

当我尝试为我的任何 javadoc 注释类导出或生成 javadoc 时，我总是遇到错误，直到最近它刚刚生成完全空的 html 文件。

这是我之前收到的错误：

```
Constructing Javadoc information...
Standard Doclet version 1.7.0_03
Building tree for all the packages and classes...
Generating C:\Users\James\Workspace\TestCLASS.html.…
java.lang.IllegalArgumentException
at sun.net.www.ParseUtil.decode(ParseUtil.j…
at sun.misc.URLClassPath$FileLoader.<init>(…
at sun.misc.URLClassPath$3.run(URLClassPath…
at sun.misc.URLClassPath$3.run(URLClassPath…
at java.security.AccessController.doPrivile… Method)
at sun.misc.URLClassPath.getLoader(URLClass…
at sun.misc.URLClassPath.getLoader(URLClass…
at sun.misc.URLClassPath.findResource(URLCl…
at java.net.URLClassLoader$2.run(URLClassLo…
at java.net.URLClassLoader$2.run(URLClassLo…
at java.security.AccessController.doPrivile… Method)
at java.net.URLClassLoader.findResource(URL…
at java.lang.ClassLoader.getResource(ClassL…
at java.net.URLClassLoader.getResourceAsStr…
at javax.xml.parsers.SecuritySupport$4.run(…
at java.security.AccessController.doPrivile… Method)
at javax.xml.parsers.SecuritySupport.getRes…
at javax.xml.parsers.FactoryFinder.findJarS…
at javax.xml.parsers.FactoryFinder.find(Fac…
at javax.xml.parsers.SAXParserFactory.newIn…
at com.sun.tools.doclets.internal.toolkit.b…
at com.sun.tools.doclets.internal.toolkit.b…
at com.sun.tools.doclets.formats.html.HtmlD…
at com.sun.tools.doclets.internal.toolkit.A…
at com.sun.tools.doclets.internal.toolkit.A…
at com.sun.tools.doclets.internal.toolkit.A…
at com.sun.tools.doclets.internal.toolkit.A…
at com.sun.tools.doclets.formats.html.HtmlD…
at com.sun.tools.doclets.standard.Standard.…
at sun.reflect.NativeMethodAccessorImpl.inv… Method)
at sun.reflect.NativeMethodAccessorImpl.inv…
at sun.reflect.DelegatingMethodAccessorImpl…
at java.lang.reflect.Method.invoke(Method.j…
at com.sun.tools.javadoc.DocletInvoker.invo…
at com.sun.tools.javadoc.DocletInvoker.star…
at com.sun.tools.javadoc.Start.parseAndExec…
at com.sun.tools.javadoc.Start.begin(Start.…
at com.sun.tools.javadoc.Main.execute(Main.…
at com.sun.tools.javadoc.Main.main(Main.jav…
com.sun.tools.doclets.internal.toolkit…
at com.sun.tools.doclets.internal.toolkit.b…
at com.sun.tools.doclets.internal.toolkit.b…
at com.sun.tools.doclets.formats.html.HtmlD…
at com.sun.tools.doclets.internal.toolkit.A…
at com.sun.tools.doclets.internal.toolkit.A…
at com.sun.tools.doclets.internal.toolkit.A…
at com.sun.tools.doclets.internal.toolkit.A…
at com.sun.tools.doclets.formats.html.HtmlD…
at com.sun.tools.doclets.standard.Standard.…
at sun.reflect.NativeMethodAccessorImpl.inv… Method)
at sun.reflect.NativeMethodAccessorImpl.inv…
at sun.reflect.DelegatingMethodAccessorImpl…
at java.lang.reflect.Method.invoke(Method.j…
at com.sun.tools.javadoc.DocletInvoker.invo…
at com.sun.tools.javadoc.DocletInvoker.star…
at com.sun.tools.javadoc.Start.parseAndExec…
at com.sun.tools.javadoc.Start.begin(Start.…
at com.sun.tools.javadoc.Main.execute(Main.…
at com.sun.tools.javadoc.Main.main(Main.jav…
com.sun.tools.doclets.internal.toolkit…
at com.sun.tools.doclets.formats.html.HtmlD… 
```

我相信它在我开始告诉向导将 html 文件放入工作区中名为 docs 的文件夹中时停止了此错误，唉，这个文件夹只有一个空的 html 文件，名称为我项目中的一个类（通常是 Stack.html 或 Entry.html）

此外，我不幸删除了 TestClass 类，因为它只是一个测试，但这是我无法为其生成 javadoc 的 Stack 类：

```
/**
 * Provides the Classes necessary to create a Stack data structure.
 */
package courseworkone;

import java.util.ArrayList;

/**
 * Created on 22 Oct, 2012.
 *
 * @author James
 */
public class Stack {
/**
 * The dynamic array into which elements of the Stack are held.
 */
private ArrayList<Entry> array;
/**
 * The size of the Stack (The number of elements on the stack).
 */
private int size;

/**
 * Constructs an empty Stack with an initial size of 0.
 */
public Stack() {
    array = new ArrayList<Entry>();
    size = 0;
}

/**
 * Checks the number of elements in the stack.
 *
 * @return the number of elements in the stack
 */
public final int size() {
    return size;
}

/**
 * Adds an element to the stack, and increases the stack size by 1.
 *
 * @param i
 *            The element to be added to the stack
 */
public final void push(final Entry i) {
    // adds the Entry to the stack
    array.add(i);
    // increments the stack size by one
    size++;
}

/**
 * Returns the element on the top of the stack.
 *
 * @return the top element in the stack
 */
public final Entry top() {
    // gets the element at the end of the ArrayList (top element) and
    // returns it
    return array.get(size - 1);
}

/**
 * Returns the element on the top of the stack and then removes that element
 * from the stack.
 *
 * @return the top element in the stack
 */
public final Entry pop() {
    // stores the element at the end of the ArrayList in a temporary
    // variable
    Entry mostRecentEntry = array.get(size - 1);
    // removes the element from the end of the ArrayList
    array.remove(size - 1);
    // decrements the size of the stack by one
    size--;
    // returns the element at the end of the ArrayList
    return mostRecentEntry;
}
} 
```

我还使用 javadoc 向导将 javadoc 导出的设置保存为 Ant 脚本，以下是其内容：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="javadoc">
    <target name="javadoc">
        <javadoc access="public" author="true" classpath="C:\Users\James\Documents\Eclipse\plugins\org.hamcrest.core_1.1.0.v20090501071000.jar;C:\Users\James\Documents\Eclipse\plugins\org.junit_4.10.0.v4_10_0_v20120426-0900\junit.jar" destdir="C:\Users\James\workspace\docs" doctitle="Stack Implementation" nodeprecated="false" nodeprecatedlist="false" noindex="false" nonavbar="false" notree="false" packagenames="courseworkone,testcourseworkone" source="1.7" sourcepath="src;test" splitindex="true" use="true" version="true"/>
    </target>
</project> 
```

这是 Ant Build Run 的控制台输出：

```
Apache Ant(TM) version 1.8.3 compiled on February 26 2012
Apache Ant(TM) version 1.8.3 compiled on February 26 2012
Setting ro project property: ant.file ->     C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1\javadoc.xml
Buildfile: C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1\javadoc.xml
Adding reference: ant.projectHelper
Adding reference: ant.parsing.context
Adding reference: ant.targets
parsing buildfile C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1\javadoc.xml with URI = file:/C:/Users/James/workspace/2ndYearWork/SoftEngCoursework1/javadoc.xml
Setting ro project property: ant.project.default-target -> javadoc
Project base dir set to: C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1
 +Target: 
 +Target: javadoc
Adding reference: ant.LocalProperties
Setting ro project property: ant.project.invoked-targets -> javadoc
Adding reference: eclipse.ant.targetVector
Build sequence for target(s) `javadoc' is [javadoc]
Complete build sequence is [javadoc, ]
javadoc:
parsing buildfile     jar:file:/C:/Users/James/Documents/Eclipse/plugins/org.apache.ant_1.8.3.v20120321-1730/lib/ant.jar!/org/apache/tools/ant/antlib.xml with URI =     jar:file:/C:/Users/James/Documents/Eclipse/plugins/org.apache.ant_1.8.3.v20120321-1730/lib/ant.jar!/org/apache/tools/ant/antlib.xml from a zip file
  [javadoc] scanning C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1\src for packages.
dirset: Setup scanner in dir      C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1\src with patternSet{ includes: [courseworkone, testcourseworkone] excludes: [] }
  [javadoc] scanning C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1\test for packages.
dirset: Setup scanner in dir     C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1\test with patternSet{ includes: [courseworkone, testcourseworkone] excludes: [] }
  [javadoc] Generating Javadoc
  [javadoc] Executing 'C:\Program Files (x86)\Java\jdk1.7.0_03\bin\javadoc.exe' with arguments:
  [javadoc] '-public'
  [javadoc] '-d'
  [javadoc] 'C:\Users\James\workspace\docs'
  [javadoc] '-splitindex'
  [javadoc] '-use'
  [javadoc] '-doctitle'
  [javadoc] 'Stack Implementation'
  [javadoc] '-classpath'
  [javadoc]     'C:\Users\James\Documents\Eclipse\plugins\org.hamcrest.core_1.1.0.v20090501071000.jar;C:\Users\James\Documents\Eclipse\plugins\org.junit_4.10.0.v4_10_0_v20120426-0900\junit.jar'
  [javadoc] '-version'
  [javadoc] '-author'
  [javadoc] '-sourcepath'
  [javadoc]     'C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1\src;C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1\test'
  [javadoc] '-source'
  [javadoc] '1.7'
  [javadoc] 'courseworkone'
  [javadoc] 'testcourseworkone'
  [javadoc] 
  [javadoc] The ' characters around the executable and arguments are
  [javadoc] not part of the command.
  [javadoc] Javadoc execution
Execute:Java13CommandLauncher: Executing 'C:\Program Files (x86)\Java\jdk1.7.0_03\bin\javadoc.exe' with arguments:
'-public'
'-d'
'C:\Users\James\workspace\docs'
'-splitindex'
'-use'
'-doctitle'
'Stack Implementation'
'-classpath'
'C:\Users\James\Documents\Eclipse\plugins\org.hamcrest.core_1.1.0.v20090501071000.jar;C:\Users\James\Documents\Eclipse\plugins\org.junit_4.10.0.v4_10_0_v20120426-0900\junit.jar'
'-version'
'-author'
'-sourcepath'
'C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1\src;C:\Users\James\workspace\2ndYearWork\SoftEngCoursework1\test'
'-source'
'1.7'
'courseworkone'
'testcourseworkone'

The ' characters around the executable and arguments are
not part of the command.
  [javadoc] Loading source files for package courseworkone...
  [javadoc] Loading source files for package testcourseworkone...
  [javadoc] Constructing Javadoc information...
  [javadoc] Standard Doclet version 1.7.0_03
  [javadoc] Building tree for all the packages and classes...
  [javadoc] java.lang.IllegalArgumentException
  [javadoc]     at sun.net.www.ParseUtil.decode(ParseUtil.java:202)
  [javadoc]     at sun.misc.URLClassPath$FileLoader.<init>(URLClassPath.java:1016)
  [javadoc]     at sun.misc.URLClassPath$3.run(URLClassPath.java:357)
  [javadoc]     at sun.misc.URLClassPath$3.run(URLClassPath.java:352)
  [javadoc]     at java.security.AccessController.doPrivileged(Native Method)
  [javadoc]     at sun.misc.URLClassPath.getLoader(URLClassPath.java:351)
  [javadoc]     at sun.misc.URLClassPath.getLoader(URLClassPath.java:328)
  [javadoc]     at sun.misc.URLClassPath.findResource(URLClassPath.java:171)
  [javadoc]     at java.net.URLClassLoader$2.run(URLClassLoader.java:551)
  [javadoc]     at java.net.URLClassLoader$2.run(URLClassLoader.java:549)
  [javadoc]     at java.security.AccessController.doPrivileged(Native Method)
  [javadoc]     at java.net.URLClassLoader.findResource(URLClassLoader.java:548)
  [javadoc]     at java.lang.ClassLoader.getResource(ClassLoader.java:1138)
  [javadoc]     at java.net.URLClassLoader.getResourceAsStream(URLClassLoader.java:227)
  [javadoc]     at javax.xml.parsers.SecuritySupport$4.run(SecuritySupport.java:94)
  [javadoc]     at java.security.AccessController.doPrivileged(Native Method)
  [javadoc]     at javax.xml.parsers.SecuritySupport.getResourceAsStream(SecuritySupport.java:87)
  [javadoc]     at javax.xml.parsers.FactoryFinder.findJarServiceProvider(FactoryFinder.java:248)
  [javadoc]     at javax.xml.parsers.FactoryFinder.find(FactoryFinder.java:221)
  [javadoc]     at javax.xml.parsers.SAXParserFactory.newInstance(SAXParserFactory.java:126)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.builders.LayoutParser.parseXML(LayoutParser.java:88)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.builders.ClassBuilder.build(ClassBuilder.java:117)
  [javadoc]     at com.sun.tools.doclets.formats.html.HtmlDoclet.generateClassFiles(HtmlDoclet.java:186)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.generateClassFiles(AbstractDoclet.java:183)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.startGeneration(AbstractDoclet.java:125)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.start(AbstractDoclet.java:83)
  [javadoc]     at com.sun.tools.doclets.formats.html.HtmlDoclet.start(HtmlDoclet.java:63)
  [javadoc]     at com.sun.tools.doclets.standard.Standard.start(Standard.java:39)
  [javadoc]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  [javadoc]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
  [javadoc]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  [javadoc]     at java.lang.reflect.Method.invoke(Method.java:601)
  [javadoc]     at com.sun.tools.javadoc.DocletInvoker.invoke(DocletInvoker.java:280)
  [javadoc]     at com.sun.tools.javadoc.DocletInvoker.start(DocletInvoker.java:160)
  [javadoc]     at com.sun.tools.javadoc.Start.parseAndExecute(Start.java:397)
  [javadoc]     at com.sun.tools.javadoc.Start.begin(Start.java:167)
  [javadoc]     at com.sun.tools.javadoc.Main.execute(Main.java:59)
  [javadoc]     at com.sun.tools.javadoc.Main.main(Main.java:49)
  [javadoc] com.sun.tools.doclets.internal.toolkit.util.DocletAbortException
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.builders.LayoutParser.parseXML(LayoutParser.java:95)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.builders.ClassBuilder.build(ClassBuilder.java:117)
  [javadoc]     at com.sun.tools.doclets.formats.html.HtmlDoclet.generateClassFiles(HtmlDoclet.java:186)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.generateClassFiles(AbstractDoclet.java:183)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.startGeneration(AbstractDoclet.java:125)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.start(AbstractDoclet.java:83)
  [javadoc]     at com.sun.tools.doclets.formats.html.HtmlDoclet.start(HtmlDoclet.java:63)
  [javadoc]     at com.sun.tools.doclets.standard.Standard.start(Standard.java:39)
  [javadoc]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  [javadoc]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
  [javadoc]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  [javadoc]     at java.lang.reflect.Method.invoke(Method.java:601)
  [javadoc]     at com.sun.tools.javadoc.DocletInvoker.invoke(DocletInvoker.java:280)
  [javadoc]     at com.sun.tools.javadoc.DocletInvoker.start(DocletInvoker.java:160)
  [javadoc]     at com.sun.tools.javadoc.Start.parseAndExecute(Start.java:397)
  [javadoc]     at com.sun.tools.javadoc.Start.begin(Start.java:167)
  [javadoc]     at com.sun.tools.javadoc.Main.execute(Main.java:59)
  [javadoc]     at com.sun.tools.javadoc.Main.main(Main.java:49)
  [javadoc] com.sun.tools.doclets.internal.toolkit.util.DocletAbortException
  [javadoc]     at com.sun.tools.doclets.formats.html.HtmlDoclet.generateClassFiles(HtmlDoclet.java:190)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.generateClassFiles(AbstractDoclet.java:183)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.startGeneration(AbstractDoclet.java:125)
  [javadoc]     at com.sun.tools.doclets.internal.toolkit.AbstractDoclet.start(AbstractDoclet.java:83)
  [javadoc]     at com.sun.tools.doclets.formats.html.HtmlDoclet.start(HtmlDoclet.java:63)
  [javadoc]     at com.sun.tools.doclets.standard.Standard.start(Standard.java:39)
  [javadoc]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  [javadoc]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
  [javadoc]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
  [javadoc]     at java.lang.reflect.Method.invoke(Method.java:601)
  [javadoc]     at com.sun.tools.javadoc.DocletInvoker.invoke(DocletInvoker.java:280)
  [javadoc]     at com.sun.tools.javadoc.DocletInvoker.start(DocletInvoker.java:160)
  [javadoc]     at com.sun.tools.javadoc.Start.parseAndExecute(Start.java:397)
  [javadoc]     at com.sun.tools.javadoc.Start.begin(Start.java:167)
  [javadoc]     at com.sun.tools.javadoc.Main.execute(Main.java:59)
  [javadoc]     at com.sun.tools.javadoc.Main.main(Main.java:49)
  [javadoc] Generating C:\Users\James\workspace\docs\courseworkone\Entry.html...
BUILD SUCCESSFUL
Total time: 5 seconds 
```

我不知道为什么我不能正确生成 javadocs

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T21:33:44.890

我检查了您的代码/文档，对我来说似乎没问题。我用不同版本的 JavaDoc 进行了测试。所以我检查了特定的异常。我发现了这个：[http](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6219854) ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6219854 。

他们建议删除类路径作为环境变量。由于您使用的是 Eclipse，因此构建和生成 javadoc 不需要在 IDE 之外进行进一步配置。检查您的变量并删除任何不必要的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-18T16:01:19.327

注意：如果您使用 eclipse 并遇到此错误，请删除上面投票最多的答案中提到的**classpath的环境变量，然后****关闭并重新启动您的软件**。如果您不关闭并重新启动，（像我一样）错误可能仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T08:37:18.903

如果您使用的是 Eclipse，请检查 InstalledJRE 是否指向**JAVA_HOME**而没有别的。我已将其配置为指向**JAVA_HOME/jre**，这是问题所在。

# oracle - org.apache.commons.dbcp.SQLNestedException: 无法创建 PoolableConnectionFactory (ORA-28001: 密码已过期)

> ID：13183676
> 
> 赞同：0
> 
> 时间：2012-11-01T18:55:09.393
> 
> 标签：oracle

我有一个使用 Oracle 11g 作为数据库的应用程序，我们忽略了将密​​码过期设置为从不，然后当原始密码过期时应用程序本身失败。我们更正了这一点，并将密码重置为原始密码，出于某种原因，虽然大部分功能都可以正常工作，但部分功能却没有（在标题中抛出错误）。以下是日志文件的输出。我已经尝试重新启动服务器等，但仍然遇到同样的问题。任何想法？

谢谢！！！

```
INFO   | jvm 1    | 2012/11/01 13:13:23 | INFO: webClient: Request attributes: [service=tsapprovals][tb=managedresources][oid=][action=splitpanecontroller][orderBy=][sortBy=] from Host[108.28.145.157]
INFO   | jvm 1    | 2012/11/01 13:13:23 | AbandonedObjectPool is used (org.apache.commons.dbcp.AbandonedObjectPool@51f1e39b)
INFO   | jvm 1    | 2012/11/01 13:13:23 |    LogAbandoned: true
INFO   | jvm 1    | 2012/11/01 13:13:23 |    RemoveAbandoned: true
INFO   | jvm 1    | 2012/11/01 13:13:23 |    RemoveAbandonedTimeout: 300
INFO   | jvm 1    | 2012/11/01 13:13:24 | org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (ORA-28001: the password has expired
INFO   | jvm 1    | 2012/11/01 13:13:24 | )
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1225)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:880)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.util.DBConnectionFactory.getPooledConnection(DBConnectionFactory.java:459)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.util.DBConnectionFactory.getConnection(DBConnectionFactory.java:242)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.util.DBConnectionFactory.getConnection(DBConnectionFactory.java:221)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.util.DBConnectionFactory.<init>(DBConnectionFactory.java:157)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.util.DBConnectionFactory.getInstance(DBConnectionFactory.java:208)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.report.db.CrossPointDBUtility.<init>(CrossPointDBUtility.java:45)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.report.queries.DBQuery.initialize(DBQuery.java:64)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.report.queries.approval.PendingApprovalsQuery.initialize(PendingApprovalsQuery.java:34)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.command.splitpane.services.PendingApprovals.execute(PendingApprovals.java:65)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.command.splitpane.SplitPaneCommand.displayControllerPane(SplitPaneCommand.java:120)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.command.splitpane.SplitPaneCommand.execute(SplitPaneCommand.java:57)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.servlet.CommandProcessor.processAction(CommandProcessor.java:1587)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.servlet.CommandProcessor.process(CommandProcessor.java:1156)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.servlet.Controller.handleRequest(Controller.java:210)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.velocity.servlet.VelocityServlet.doRequest(VelocityServlet.java:358)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at isc.thinclient.web.servlet.Controller.doRequest(Controller.java:838)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.velocity.servlet.VelocityServlet.doGet(VelocityServlet.java:317)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at java.lang.Thread.run(Thread.java:595)
INFO   | jvm 1    | 2012/11/01 13:13:24 | Caused by: java.sql.SQLException: ORA-28001: the password has expired
INFO   | jvm 1    | 2012/11/01 13:13:24 | 
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:331)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:283)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:278)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CTTIoauthenticate.receiveOauth(T4CTTIoauthenticate.java:791)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:362)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:439)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.DriverConnectionFactory.createConnection(DriverConnectionFactory.java:38)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.PoolableConnectionFactory.makeObject(PoolableConnectionFactory.java:294)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.BasicDataSource.validateConnectionFactory(BasicDataSource.java:1247)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   at org.apache.commons.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1221)
INFO   | jvm 1    | 2012/11/01 13:13:24 |   ... 34 more
INFO   | jvm 1    | 2012/11/01 13:13:24 | loggedInUSer: System Administrator Thu Nov 01 18:13:24 UTC 2012
INFO   | jvm 1    | 2012/11/01 13:13:24 | isc.thinclient.api.ThinAPIException: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (ORA-28001: the password has expired 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T08:00:19.707

您的用户配置文件的密码似乎已过期，请尝试执行以下可以解决此问题的查询 -`username`并`password`使用您的值。

```
ALTER USER username IDENTIFIED BY password; 
```

# facebook-like - fb:app_id' 无法解析为类型 'fbid'

> ID：13183680
> 
> 赞同：5
> 
> 时间：2012-11-01T18:55:12.343
> 
> 标签：facebook-like, integration, app-id, secret-key

Facebook 调试器说：“‘网站’类型的 URL‘http://www.domain.com/’的对象无效，因为属性‘fb:app_id’的给定值‘1234567890’无法解析为‘fbid’类型,

它已经工作得很好，但现在按钮不再出现。这家店刚下线一天。我再次加载数据，但没有任何变化。

# powershell - Powershell - 从安全日志中列出失败的 IP 地址，包括计数

> ID：13183681
> 
> 赞同：0
> 
> 时间：2012-11-01T18:55:13.140
> 
> 标签：powershell

我有以下 powershell 来输出失败登录事件的 IP 地址列表：

```
$DT = [DateTime]::Now.AddDays(-1) # check only last 24 hours

$l = Get-EventLog -LogName 'Security' -InstanceId 4625 -After $DT | Select-Object @{n='IpAddress';e={$_.ReplacementStrings[-2]} }
$g = $l | group-object -property IpAddress  | where {$_.Count -gt 20} | Select -property Name | export-csv c:\users\export.csv 
```

我真的很想改进它，让它像现在一样输出 IP 地址，加上 $_.Count。我已经尝试了一些事情，但我认为我被困在 SQL 世界中！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:04:13.273

我认为您需要做的就是在第二个管道中替换

```
Select -property Name 
```

和

```
Select -property Name, Count 
```

（但我会先查看从`group-object`with返回的对象的属性`get-member`。）

# database - 如何在 StarUML 中添加多重性值

> ID：13183684
> 
> 赞同：9
> 
> 时间：2012-11-01T18:55:19.797
> 
> 标签：database, database-design, uml, cardinality, multiplicity

我正在学习数据库开发，我正处于必须创建自己的 ER 模型的阶段。StarUML 到目前为止一切都很好，但是课程笔记没有提到如何在实体类型（基数和参与）之间添加多重性选项。

我希望有人可以在这里帮助我吗？

非常感谢彼得

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-01-30T16:00:10.603

1.  在要添加多重性的行/关联上单击一次。

2.  将鼠标悬停在该行末尾的一个方形块上，以便您获得手形光标并双击。

3.  然后，您将在右侧看到一个带有组合框下拉菜单的弹出窗口。

4.  从下拉菜单中选择多重性，多重性可以从：0..1、1、0.. *、1..*和*中选择或直接输入。

5.  在线的另一端的方形块上重复此操作。

# java - 如何等待使用不同的`ExecutorServices`创建的`Future`列表

> ID：13183692
> 
> 赞同：12
> 
> 时间：2012-11-01T18:55:57.223
> 
> 标签：java, concurrency, executorservice, future

好的，所以我知道这里的第一个答案/评论将是“使用一个`ExecutorService`并使用`invokeAll`”。但是，我们有充分的理由（我不会让人们感到厌烦）将线程池分开。

所以我有一个线程池列表（`ExecutorServices`），我需要做的是`Callable`在每个线程池上调用不同的使用`submit`（没有问题）。现在我有了这个`Future`实例集合，每个实例都单独创建`ExecutorService`，我想等待它们全部完成（**并且能够提供一个超时，在该超时时取消任何未完成的操作**）。

是否有一个现有的类可以执行此操作（包装`Future`实例列表并允许等待所有操作完成）？如果没有，将不胜感激有关有效机制的建议。

正在考虑每次调用`get`超时，但必须计算每次调用的总时间。

我看到这篇文章[等待任何未来都完成](https://stackoverflow.com/questions/117690/wait-until-any-of-futuret-is-done)，但这扩展`Future`而不是包装它们的列表。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-02T09:55:04.757

根据路易斯的评论，我正在寻找的是[Futures.successfulAsList](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/util/concurrent/Futures.html#successfulAsList-com.google.common.util.concurrent.ListenableFuture...-)

这使我可以等待所有操作都完成，然后检查是否有任何失败的期货。

番石榴规则！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:01:38.253

我不认为 JDK 提供了一个直接的 API 可以让你做到这一点。但是，我认为创建一个执行此操作的简单方法同样简单。您可能想查看 AbstractExecutorService.invokeAll() 的实现，以了解可以做到这一点。

本质上，您将在每个未来调用future.get()，将等待时间减少每次等待结果所需的时间，并在从方法返回之前取消所有未完成的未来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T20:14:11.960

可能我真的没看懂。但是，对我来说，这听起来仍然很简单

```
public <V> List<V> get(List<Future<V>> futures, long timeout, TimeUnit unit)
          throws InterruptedException, ExecutionException, TimeoutException {
    List<V> result = new ArrayList<V>();
    long end = System.nanoTime() + unit.toNanos(timeout);
    for (Future<V> f: futures) {
        result.add(f.get(end - System.nanoTime(), TimeUnit.NANOSECONDS));
    }
    return result;
} 
```

我错了吗？

我认为您链接的问题要复杂得多，因为他们只想等待最快，当然不知道哪个会最快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T20:45:57.693

这可以使用一些清理，但它应该可以解决您的问题。（时间和空间省略了一些封装）：

```
public static <T> LatchWithWrappedCallables<T> wrapCallables(Collection<Callable<T>> callablesToWrap)
{
    CountDownLatch latch = new CountDownLatch(callablesToWrap.size());
    List<Callable<T>> wrapped = new ArrayList<Callable<T>>(callablesToWrap.size());
    for (Callable<T> currCallable : callablesToWrap)
    {
        wrapped.add(new CallableCountdownWrapper<T>(currCallable, latch));
    }

    LatchWithWrappedCallables<T> returnVal = new LatchWithWrappedCallables<T>();
    returnVal.latch = latch;
    returnVal.wrappedCallables = wrapped;
    return returnVal;
}

public static class LatchWithWrappedCallables<T>
{
    public CountDownLatch latch;
    public Collection<Callable<T>> wrappedCallables;
}

public static class CallableCountdownWrapper<T> implements Callable<T>
{
    private final Callable<T> wrapped;

    private final CountDownLatch latch;

    public CallableCountdownWrapper(Callable<T> wrapped, CountDownLatch latch)
    {
        this.wrapped = wrapped;
        this.latch = latch;
    }

    @Override
    public T call() throws Exception
    {
        try
        {
            return wrapped.call();
        }
        finally
        {
            latch.countDown();
        }
    }
} 
```

然后你的代码会这样称呼它：

```
Collection<Callable<String>> callablesToWrap = [Your callables that you need to wait for here];
LatchWithWrappedCallables<String> latchAndCallables = wrapCallables(callablesToWrap);

[Submit the wrapped callables to the executors here]

if(latchAndCallables.latch.await(timeToWaitInSec, TimeUnit.SECONDS))
{
    [Handling for timeout here]
} 
```

# java - 使用 SWING 实现彩色手绘线

> ID：13183693
> 
> 赞同：0
> 
> 时间：2012-11-01T18:56:00.297
> 
> 标签：java, line, swingx

嗨！

我想在 JFrame 中绘制自由线。我在一个扩展 JPanel 的类中实现了它。它的定义如下所示：

```
public class Draw extends JPanel implements MouseMotionListener, MouseListener 
```

我向 Draw 类添加了一个 void 方法，在该方法中我还生成了 JFrame 并添加了 Draw 对象。我现在的问题是：我希望能够从菜单中选择线条的颜色：

```
JMenu colorMenu = new JMenu();
JMenuItem greenChoice = new JMenuItem("GREEN");
greenChoice.addActionListener(this);
colorMenu.add(greenChoice);
JMenuItem redChoice = new JMenuItem("RED");
colorMenu.add(redChoice);
JMenuBar bar = new JMenuBar();
bar.add(colorMenu); 
```

我不知道在哪里实现这段代码！我应该做 2 个类，一个用于绘图，一个用于 JFrame 及其菜单？我应该如何告诉绘图类与我的 JMenu 交互，例如使用我从菜单中选择的颜色？在这里，我在 Drwa 类中生成我的行，默认颜色为蓝色 :(

```
public void paintComponent(Graphics g){
Graphics2D g2d = (Graphics2D) g;
if(point1!=null && point2!=null){
g2d.setPaint(Color.BLUE);
g2d.setStroke(new BasicStroke(1.5f));
g2d.draw(line2d);
  }
  } 
```

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:03:49.780

这是我用来说明 Swing 图形的免费手绘课程。根据需要修改它。

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.event.MouseInputAdapter;

public class DrawingTest implements Runnable {

    private JFrame frame;

    private MyDrawPanel drawPanel;

    private List<Point> points;

    public DrawingTest() {
        points = new ArrayList<Point>();
    }

    @Override
    public void run() {
        frame = new JFrame("Bouncing Vertices");

        drawPanel = new MyDrawPanel(this);
        MyListener alpha = new MyListener(this);
        drawPanel.addMouseMotionListener(alpha);
        drawPanel.addMouseListener(alpha);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(drawPanel);
        frame.setSize(800, 600);
        frame.setVisible(true);
    }

    public JPanel getDrawingPanel() {
        return drawPanel;
    }

    public List<Point> getPoints() {
        return points;
    }

    public void setPoint(int x, int y) {
        points.add(new Point(x, y));
    }

    public void resetPoints() {
        points.clear();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new DrawingTest());
    }

    private class MyListener extends MouseInputAdapter {

        private DrawingTest drawingTest;

        public MyListener(DrawingTest drawingTest) {
            this.drawingTest = drawingTest;
        }

        @Override
        public void mouseDragged(MouseEvent event) {
            drawingTest.setPoint(event.getX(), event.getY());
            drawingTest.getDrawingPanel().repaint();
        }

        @Override
        public void mouseReleased(MouseEvent event) {
            drawingTest.resetPoints();
        }

    }

    private class MyDrawPanel extends JPanel {

        private static final long serialVersionUID = 1L;
        private DrawingTest drawingTest;

        public MyDrawPanel(DrawingTest drawingTest) {
            this.drawingTest = drawingTest;
        }

        @Override
        public void paintComponent(Graphics g) {
            g.setColor(Color.WHITE);
            g.fillRect(0, 0, this.getWidth(), this.getHeight());
            g.setColor(Color.BLUE);
            for (int i = 1; i < drawingTest.getPoints().size(); i++) {
                Point p1 = drawingTest.getPoints().get(i - 1);
                Point p2 = drawingTest.getPoints().get(i);
                g.drawLine(p1.x, p1.y, p2.x, p2.y);
            }
        }
    }

} 
```

# ssh - sed 带双引号和 $

> ID：13183698
> 
> 赞同：1
> 
> 时间：2012-11-01T18:56:08.287
> 
> 标签：ssh, sed, double-quotes

我有一个 bash 脚本，用于在我的服务器上设置一个简单的 php 脚本。我对如何`sed`使用脚本正确更改变量感到困惑。这是我尝试过的：

```
echo "Enter Portal Password:"
read PORTPASS;
sed -i 's/$ppass =".*"/$ppass ="$PORTPASS"/' includes/config.php 
```

以上更改了配置文件中的变量，但仅将其更改为`$PORTPASS`它不会将其更改为我在脚本中输入的内容。

我也试过这个，它确实改变了`$PORTPASS`正确的，但它删除`" "`了文件中变量的周围。

```
sed -i 's/$ppass ='".*"'/$ppass ='"$PORTPASS"';/' includes/config.php 
```

这是我要在 conf.php 文件中更改的内容：`$ppass ="password";`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:04:06.237

尝试：

```
sed -i "s/\$ppass =\".*\"/\$ppass =\"$PORTPASS\"/" includes/config.php 
```

您必须`"`在命令周围使用双引号 ( )，以便 shell`$PORTPASS`在将其传递给 sed 之前对其进行评估，因此您必须“转义”命令中的所有双引号。

# java - 创建类似 JToolTip 的组件

> ID：13183703
> 
> 赞同：1
> 
> 时间：2012-11-01T18:56:24.397
> 
> 标签：java, swing

我正在编写一个显示一些生物信息学数据的自定义组件，并且我希望能够在用户按住某个键时显示有关鼠标所在位置的其他信息。对于工具提示来说，这似乎是一项显而易见的工作，但有一些问题似乎阻止了它的工作。首先，我想让工具提示跟随鼠标并动态更改其文本。这在某种程度上可以通过覆盖组件的 getToolTipText 和 getToolTipLocation 来实现，但是工具提示会随着鼠标位置的更新而闪烁，并且不会显示在子组件上（它是一个 JPanel，里面有一些 JTextPanes）。我也不认为没有任何方法可以在不调用 ToolTipManager 的情况下立即显示它，我相信这会改变所有其他组件的延迟。

看起来这些问题中有一些解决方法，但它们相当复杂和不优雅，所以我认为一个好的解决方案是创建我自己的组件，用相关信息填充它并自己展示它。但是，这需要是某种顶级组件，因为它需要能够稍微超出父组件甚至包含 JFrame 的边界并被绘制在其他所有内容上。我所知道的在 JToolTip 之外具有此功能的唯一对象是 JFrame 和 JDialog，它们的边框带有我不想要的标题和关闭按钮。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:21:09.867

一种选择是使用玻璃板。在这种情况下，您的工具提示将无法超出框架，但您可以轻松地相对于它与框架一侧的距离来定位它。一些示例代码绘制跟随鼠标的气泡（您可以在 paint 方法中填充文本）。

```
 public static void main(String[] args)
{
    JFrame frame = new JFrame();
    frame.setSize(new Dimension(500, 500));

    JPanel glassPane = new JPanel();
    glassPane.setOpaque(false);
    glassPane.setLayout(null);

    frame.setGlassPane(glassPane);
    frame.getGlassPane().setVisible(true);

    final MyInfoBubble mib = new MyInfoBubble();
    mib.setBounds(10, 30, 100, 50);
    ((JPanel)frame.getGlassPane()).add(mib);

    frame.getContentPane().addMouseMotionListener(new MouseMotionAdapter() {

        public void mouseMoved(MouseEvent me) {
            mib.setBounds(me.getPoint().x, me.getPoint().y, 100, 50);
        }
    });

    ((JPanel)frame.getGlassPane()).validate();
    ((JPanel)frame.getGlassPane()).repaint();

    frame.setVisible(true);
}

static class MyInfoBubble extends JPanel
{
    public MyInfoBubble()
    {
        setVisible(true);
    }

    public void paintComponent(Graphics g)
    {
        Graphics2D g2d = (Graphics2D)g;
        g2d.setColor(Color.BLUE);
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.fillRoundRect(0, 0, getWidth(), getHeight(), 20, 20);
    }

} 
```

# java - Android：屏幕关闭时检测长按键

> ID：13183704
> 
> 赞同：1
> 
> 时间：2012-11-01T18:56:24.070
> 
> 标签：java, android

屏幕关闭时如何在Android中检测到长按键（音量键）？有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:14:49.593

这是不可能的，对不起。唯一可能检测到长按音量按钮的是前台活动。这还假设设备具有硬件音量按钮，但并非所有设备都有。

# unity-container - Unity Container：围绕每个方法调用创建子容器

> ID：13183705
> 
> 赞同：2
> 
> 时间：2012-11-01T18:56:24.883
> 
> 标签：unity-container, ioc-container, unity-interception

我们可以使用 Unity 拦截/扩展/自定义代理来执行此操作吗？

```
// psuedo-code
using (var childContainer = new container.CreateChildContainer())
using (var scope = new TransactionScope())
{
  childContainer.Resolve<TMyService>().PerformCall(...);
  scope.Complete();
} 
```

目前，上述代码是作为 WCF 行为实现的。我们现在有直接访问此服务层的类，而不是进行 WCF 调用并需要此行为。有趣的部分是我们需要在统一拦截中创建一个子容器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:11:07.533

是的。我不明白你为什么不能。然而...

尽管使用拦截通常会放松对干净和[SOLID](https://en.wikipedia.org/wiki/SOLID)设计的需求，但是当你想要这样做时，你仍然需要一个 SOLID 设计。

[我已经在此处](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)写过有关启用此功能的此类设计，归根结底是您将对要包装在设计后面的操作进行建模，例如`ICommandHandler<T>`使用`Handle(T)`方法。通过这样的设计，您可以创建一个装饰器（或者在 Unity 的情况下是一个拦截器），它使用一个添加子容器的类来包装一个真实的类，如下所示：

```
public class ChildContainerCommandHandlerDecorator<T>
    : ICommandHandler<T>
{
    private readonly ICommandHandler<T> decorated;
    private readonly Container container;

    public ChildContainerCommandHandlerDecorator(
        ICommandHandler<T> decorated, Container container)
    {
        this.decorated = decorated;
        this.container = container;
    }

    public void Handle(T command)
    {
        using (container.CreateChildContainer())
        {
            this.decorated.Handle(command);
        }
    }
} 
```

还有一个装饰器，它添加了这样的事务范围：

```
public class TransactionCommandHandlerDecorator<T>
    : ICommandHandler<T>
{
    private readonly ICommandHandler<T> decorated;

    public TransactionCommandHandlerDecorator(
        ICommandHandler<T> decorated)
    {
        this.decorated = decorated;
    }

    public void Handle(T command)
    {
        using (var scope = new TransactionScope())
        {
            this.decorated.Handle(command);

            scope.Complete();
        }
    }
} 
```

通过在两个装饰器中包装真正的处理程序，您可以使用这种行为扩展处理程序。当然，装饰器是 Unity 无法处理的概念，但是在使用 Unity 时，您可以使用拦截器轻松地重写它，但同样，好的设计是您唯一的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T18:53:46.773

No, I don't see a way you could do this. You could do the TransactionScope part, but the resolve/call part I just don't see working.

Well, I guess you could get it to work. You'd need a dummy instance of TMyService (or whatever object you're intercepting), and your interception behavior would need to do a bunch of reflection to figure out the type to grab, resolve it, and use reflection again to invoke the specific method. It could be done, but it would be hideously slow.

I'm not going to provide code for this, because I don't think it's a good idea. What scenario are you trying to implement with this - there's probably an easier way to accomplish it.

# facebook - 在 Facebook 选项卡中加载 Flash 对象会导致 Safari 中的内联文本发生变化

> ID：13183712
> 
> 赞同：0
> 
> 时间：2012-11-01T18:57:03.293
> 
> 标签：facebook, flash, debugging, fonts, safari

如果您在 Facebook 中创建一个新应用程序，指向一个仅包含以下代码的 HTML 页面，您将在 Flash 对象加载后看到段落中字体平滑的明显变化。这只发生在 WebKit 浏览器和 Facebook 中。

```
<!doctype html>
<head></head>
<body style="background-color: #333">
    <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="100%" height="170" id="movie_name" align="middle">
    <param name="movie" value="http://edmullen.net/flash/BBC1.swf"/>
    <param name="wMode" value="transparent" />
    <object type="application/x-shockwave-flash" data="http://edmullen.net/flash/BBC1.swf" width="100%" height="170">
    <param name="movie" value="http://edmullen.net/flash/BBC1.swf"/>
    <param name="wMode" value="transparent" />
     </object>
    </object>
    <p style="color: red">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    <p style="color: white">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</body>
</html> 
```

我已经用多个 swf 文件复制了它。我什至将 Flash 对象嵌入到 中`iframe`，但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T17:28:00.407

webkit 站点上有一个旧错误解释了这种行为。基本上，对象的加载会导致重绘事件，并且在第二次通过时，字体渲染器不会返回与第一次相同的结果。这是参考：

*   [将元素渲染到合成层时，字体抗锯齿（平滑）会发生变化](https://bugs.webkit.org/show_bug.cgi?id=23364)

# xml - 如何在每个类别的 magento 中更改列表/网格视图

> ID：13183715
> 
> 赞同：1
> 
> 时间：2012-11-01T18:57:22.327
> 
> 标签：xml, magento, categories

首先，我进入 category/product/list.phtml 并将所有代码复制到 c/p/grid.phtml。然后我取出所有代码以在列表视图中显示某些内容，并将网格视图代码留在原处。

我想我可以为我想成为网格视图的类别编写每个类别的自定义布局，并将我的默认设置设置为列表视图。这是我卡住的地方，我尝试了以下操作并收到错误。

```
<catalog_category_default> 
<block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml"> 
<block type="catalog/product_grid" name="product_grid" template="catalog/product/grid.phtml"> 
</block> 
</block> 
</reference> 
</catalog_category_default> 
```

我刚刚得到 XML 数据无效错误。

请帮忙=）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-04-13T10:39:51.827

在上面的代码中，“<reference>”标签在没有开始的情况下关闭......这就是它显示 XML 无效数据的原因

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:10:46.097

我发现了一个不同的工作。

我创建了一个新主题并将默认的 list.phtml 文件复制到其中。所以我唯一的文件看起来像这样：app/design/frontend/default/%new template name%/template/catalog/product/list.phtml

在第 42 行，我选择了检查网格是否可用于真实设置：

改变了这个

```
<?php if($this->getMode()!='grid'): ?> 
```

对此

```
 <?php if(true): ?> 
```

现在在我想要作为列表而不是网格的类别下，我可以强制 magento 使用我的新主题来强制网格视图。

# python - 检查小部件是否存在（Tkinter）

> ID：13183717
> 
> 赞同：2
> 
> 时间：2012-11-01T18:57:28.593
> 
> 标签：python, tkinter

我想在删除它之前检查一个小部件（例如在画布上绘制的矩形）是否存在。

这是我的问题：我有两种删除矩形的方法。一个绑定到 button-1 使用`bind`（单击时删除矩形），另一种方法如果在一定时间内没有被单击，则删除一个矩形（使用检查`Widget.after`）。我想检查第二种方法中是否存在矩形，因为我想计算用户未单击的矩形，我能想到的唯一方法是检查它是否已被删除。有没有办法做到这一点？当然，我可以在 button-1 事件处理程序中设置一个变量并从其他方法中检查它。但只是想知道是否`Tkinter`提供诸如“项目存在”之类的方法。

编辑：嗯，我刚刚发现了一个技巧。如果我在已删除的小部件上使用 itemconfig，我会得到空集。我使用该值来查看小部件是否已被删除。我不确定这是否是一种优雅的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:07:35.743

在我看来，您可以使用它[`Canvas.find_all`](http://effbot.org/tkinterbook/canvas.htm)来获取画布上所有项目的元组。然后您可以查看您的特定项目是否是`in`该元组。例如：

```
if item in my_canvas.find_all():
   my_canvas.delete(item)
else:
   print("Item not on canvas") 
```

# javascript - 如何修改或替换 Express 中的目录索引页？

> ID：13183719
> 
> 赞同：0
> 
> 时间：2012-11-01T18:57:31.500
> 
> 标签：javascript, node.js, express

简而言之，我可以像这样拥有一个带有目录索引页面的静态服务器：

```
app.configure(function() {
    app.use('/mystuff', _express.static(__dirname + "/whatever/stuff"));
    app.use('/mystuff', _express.directory(__dirname + "/whatever/stuff"));
}); 
```

我想修改目录索引页面，给他们不同的css，添加一些javascript，也许改变html。如果可能的话，我更喜欢使用尽可能多的现有功能，但如果用我自己的代码替换整个目录中间件很容易，那是一个选择。不知道从哪里开始。当然，我不想实际编辑 express 或 connect 模块中的代码。

顺便说一句，这样做的一个原因是解决我在这里提到的一个错误：[如何在 Express 中设置具有任意起始路径的静态服务？](https://stackoverflow.com/questions/12808295/how-do-i-set-up-static-serving-in-express-with-an-arbitrary-start-path)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:54:41.433

正如您在评论中所说，该`express.directory`功能来自[Connect 中间件](http://www.senchalabs.org/connect/directory.html)；但是，似乎没有办法设置自定义文件。

作为替代解决方案，您可以 fork Connect，更改文件（位于`lib/public/directory.html`和`lib/public/style.css`），使用您的 fork 作为依赖项，然后执行以下操作：

```
var connect = require('connect');

app.configure(function() {
    app.use('/mystuff', connect.static(__dirname + "/whatever/stuff"));
    app.use('/mystuff', connect.directory(__dirname + "/whatever/stuff"));
}); 
```

而不是快递。我刚刚测试了这个（通过编辑 node_module 中的文件），它工作正常。

**编辑：** 实际上，您可能只是`directory.js`从连接中获取并修改它并将其放入您的应用程序和`require()`它，然后使用您的。我没有对此进行测试，但我不明白为什么它不起作用。

# jquery - .hover 回调中的 jQuery 回调

> ID：13183721
> 
> 赞同：0
> 
> 时间：2012-11-01T18:57:40.373
> 
> 标签：jquery, callback

在鼠标移出元素后，我试图删除附加的元素。.hover 回调中的回调我做错了什么？

```
// START OF $(document).ready(function() {

$(document).ready(function ()

$('.custom-right-boxes a').hover(function () {
    $(this).append('<div class="click-here"><b>Click</b><span>Here</span></div>');
    $('.click-here').stop().animate({
        width: '88px',
        height: '58px',
        marginLeft: '-44px',
        marginTop: '-40px'
    }, {
        duration: 300
    });
}, function () {
    $('.click-here').stop().animate({
        width: '0px',
        height: '0px',
        marginLeft: '-0px',
        marginTop: '-0px'
    }, {
        duration: 300
    }),

    function () {
        $('.click-here').remove();
    };
});

// END OF $(document).ready(function() {

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:08:07.627

破解了伙计们！感谢所有帮助过的人。基本上尼尔森告诉我的那一点很重要，所以谢谢你，我也不得不改变：-

,{ 持续时间：300 }

只是为了：-

,300

然后回调起作用了:-)这是最终代码（在我进行其他更改之前）：-

```
// START OF $(document).ready(function() {

$(document).ready(function () {

$('.custom-right-boxes a').hover(function () {
    $(this).append('<div class="click-here"><b>Click</b><span>Here</span></div>');
    $('.click-here').stop().animate({
        width: '88px',
        height: '58px',
        marginLeft: '-44px',
        marginTop: '-40px'
    }, 300);

}, function () {
    $('.click-here').stop().animate({
        width: '0px',
        height: '0px',
        marginLeft: '-0px',
        marginTop: '-0px'
    }, 300, function () {
        $('.click-here').remove();
    });

});

// END OF $(document).ready(function() {
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:01:54.153

在您的代码中修复这些：

```
}, {
        duration: 300
    }),  //--> REMOVE THIS parens

    function () {
        $('.click-here').remove();
    };  //ADD A PARENS HERE, like }); 
```

由于您错误地将第三个参数传递给`animate()`，这是回调函数。进行上述更改并尝试一下。

这将是更正的版本：

```
// START OF $(document).ready(function() {

$(document).ready(function (){

$('.custom-right-boxes a').hover(function () {
    $(this).append('<div class="click-here"><b>Click</b><span>Here</span></div>');
    $('.click-here').stop().animate({
        width: '88px',
        height: '58px',
        marginLeft: '-44px',
        marginTop: '-40px'
    }, {
        duration: 300
    });
}, function () {
    $('.click-here').stop().animate({
        width: '0px',
        height: '0px',
        marginLeft: '-0px',
        marginTop: '-0px'
    }, {
        duration: 300
    },

    function () {
        $('.click-here').remove();
    });
});

// END OF $(document).ready(function() {

}); 
```

# clone - 无法创建 Kinetic.js 阶段/层的准确副本

> ID：13183722
> 
> 赞同：2
> 
> 时间：2012-11-01T18:57:41.610
> 
> 标签：clone, kineticjs, revision-history

我正在尝试构建更改历史记录，而不是差异样式历史记录，我选择保存整个对象。这变得有问题，因为对象的每个副本都与原始对象一起更新。

这种`Kinetic.Node.clone`方法对我来说似乎是正确的，但它似乎并没有达到我期望的效果。

伪代码：

```
var History = function(){
  var h = this;
  h.history = [];
  h.pointer = -1;
  h.save = function() {
    h.history = h.history.slice(0,h.pointer);
    h.history.push(im.Stage.createCopy());
    h.movePointer(1);
  };
  h.movePointer = function(diff) {
    h.pointer += diff;
    (h.pointer < 0 && (h.pointer = 0));
    (h.pointer >= h.history.length && (h.pointer = h.history.length-1));
    return h.pointer;
  };
  h.render = function() {
    im.Stage = h.history[h.pointer].createCopy();
    im.Stage.draw();
  };
  h.undo = function() {
    h.movePointer(-1);
    h.render();
  };
  h.redo = function() {
    h.movePointer(1);
    h.render();
  };
}; 
```

**如何创建舞台的准确副本？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:15:52.933

准确表示的最佳方法是：

```
 var layers = stage.getChildren(); 
```

获取图层。然后做：

```
 var layerChildren = new Array();
 for(var i=0; i<layers.length; i++)
    layerChildren[i] = layers.getChildren(); 
```

每次你想保存一个状态。

这会将您的所有图层及其子图层存储在一个数组中。相当有效和准确。

现在您只需将图层列表和子列表保存在某处，然后您就可以在状态之间来回移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T11:54:26.540

构建历史系统的最佳方法是在每次操作后将层/元素作为序列化值存储到数组中，使用`layer.toJSON()`.
如果您在从历史中恢复任何内容后在要显示/工作的图层和事件处理程序上使用图像，那么您将不得不将图像和事件处理程序重新附加到对象/图层/等，因为 toJSON() 不会将图像和事件处理程序存储为它会存储太大的数据。像这样建立你的历史：

1.  首先，尝试在[这个问题](https://stackoverflow.com/questions/16096875/how-to-create-undo-redo-in-kineticjs)上使用 projeqht 的答案。
2.  其次，您将不得不重新附加图像和事件处理程序。使用**markE**在[这个问题](https://stackoverflow.com/questions/21597030/kineticjs-undo-layers-layers-dont-disappear-on-undo/21610386?noredirect=1#comment32670795_21610386)上给出的技巧，您可以轻松处理它。

# java - 在 Solr4 中应用自定义 CharTokenizer

> ID：13183729
> 
> 赞同：2
> 
> 时间：2012-11-01T18:58:47.690
> 
> 标签：java, solr, lucene, solr4

我刚刚写了一个 custom `CharTokenizer`，我想在我的 Solr 服务器中使用它。

在 Solr3 中，我可以在 create 方法中扩展`TokenizerFactory`并返回 my ，但在 Solr4 中不存在。`CharTokenizer``TokenizerFactory`

所以，我注意到我应该替换`TokenizerFactory`为`TokenFilterFactory`，但在这种情况下，我不能返回我的 custom `CharTokenizer`，因为参数不匹配。

我还搜索了一些文档，但看起来没有什么真正有用的。

那么，我怎样才能让它工作呢？

例子：

```
public class MyCustomTokenizer extends CharTokenizer {

  char anotherSpace = 24;

  public MyCustomTokenizer(Version matchVersion, Reader in) {
    super(matchVersion, in);
  }

  protected boolean isTokenChar(int c) {
    return !Character.isWhitespace(c) && isToken((char) c);
  }

  private boolean isToken(char c) {
    if (c == anotherSpace || c == ',') {
        return false;
    }
    return true;
  }
}

public class MyCustomTokenizerFactory extends TokenFilterFactory {

  public void init(Map<String, String> args) {
    super.init(args);
    assureMatchVersion();
  }

  @Override
  public TokenStream create(TokenStream input) {
      // sh*t happens here
    return new MyCustomTokenizer(luceneMatchVersion, input);
  }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:14:02.457

检查实现的最佳方法是查看 Lucene 中现有 Tokenizer 的源代码。

例子 ：-

[WhitespaceTokenizer](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/lucene-analyzers-common/4.0.0-ALPHA/org/apache/lucene/analysis/core/WhitespaceTokenizer.java#WhitespaceTokenizer)
[WhitespaceTokenizerFactory](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.solr/solr-core/4.0.0-ALPHA/org/apache/solr/analysis/WhitespaceTokenizerFactory.java?av=h)

# macos - 如何使用 git mergetool 的 filemerge

> ID：13183730
> 
> 赞同：56
> 
> 时间：2012-11-01T18:58:50.950
> 
> 标签：macos, git, mergetool, filemerge

文档在这里：[http](http://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html) ://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html 一个方便的指南在这里：[http ://ryanflorence.com/git-for-beginners/](http://ryanflorence.com/git-for-beginners/)

但是，他们都没有解释如何使用 mergetool 的文件合并。

我阅读的指南说“*我按 Enter 并弹出 FileMerge 并处理冲突：* ”但它没有提到***如何***“*处理冲突*”。

当我运行时：

```
git mergetool 
```

：然后按提示按回车，文件合并窗口打开，显示所有合并冲突，它只响应命令 cmd+D 和 cmd+shift+D （允许循环通过冲突）。但是，似乎没有提到如何为每个冲突选择左/右/都不选择。组合框下拉菜单似乎没有做任何事情。

已经查看过文档、指南、文件系统菜单和键盘上的系统按键以寻找响应 =)

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-10-29T15:46:50.223

我还没有找到任何官方文档，但这是我从反复试验中得到的理解：

有一个拆分视图，左侧和右侧有两个选项。您不能编辑其中任何一个。还有一个可以编辑的底部视图。您可能需要拉起屏幕底部中间的小圆圈来展开该部分。

对于每个冲突，单击左/右拆分视图中间的区域，然后从右下角的下拉菜单中选择“选择左”如果左边是你想要的，或者“选择右边”如果那是你想要的. 如果这两个选项都不好，请单击“两者都不选择”并在底部进行编辑。

中间一栏中有一个箭头，通过指向它来显示您是选择了左还是右。如果您都没有选择，箭头将消失。所有三个视图都使用最右侧屏幕上的滚动条一起滚动。

完成后，单击菜单栏中的文件 > 保存合并。

# python - 使用 rdflib python 使用 sparql DELETE 查询时出错

> ID：13183734
> 
> 赞同：2
> 
> 时间：2012-11-01T18:59:22.773
> 
> 标签：python, sparql, rdflib

我正在尝试使用 python 的 rdflib 库从 RDF 图中删除三元组，但没有成功。我的查询是从[http://www.w3.org/TR/sparql11-update/#delete](http://www.w3.org/TR/sparql11-update/#delete)学到的以下内容。

```
plugin.register(
    'sparql', rdflib.query.Processor,
    'rdfextras.sparql.processor', 'Processor')
plugin.register(
    'sparql', rdflib.query.Result,
    'rdfextras.sparql.query', 'SPARQLQueryResult')

bdel= graph.query(""" 
PREFIX bibo: <http://purl.org/ontology/bibo/>                       
DELETE  {?s ?p ?o}
WHERE { 
         ?s bibo:reproducedIn ?o. 
      }""") 
```

它给出了以下错误，任何解决此问题的线索。提前致谢。

```
pyparsing.ParseException: Expected "SELECT" (at char 116), (line:4, col:17) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T21:40:21.803

As mentioned above, it looks like you are trying to use `graph.query` which does indeed expect only 'SELECT' versions of SPARQL Queries. In order to run any SPARQL Updates [as defined here](http://www.w3.org/Submission/SPARQL-Update/), you will need to use `graph.processUpdate()` instead. For your example, something along the lines of:

```
processUpdate(graph, """ 
PREFIX bibo: <http://purl.org/ontology/bibo/>                       
DELETE  {?s ?p ?o}
WHERE { 
?s bibo:reproducedIn ?o. 
}""") 
```

Hope this helps!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T22:34:56.280

您正在使用的查询是[SPARQL 更新](http://www.w3.org/TR/sparql11-update/#delete)，它是与[SPARQL 查询](http://www.w3.org/TR/rdf-sparql-query/)不同的标准。可能该`graph.query`函数只需要 SPARQL 查询？[我在相关的rdflib 页面](https://rdfextras.readthedocs.org/en/latest/)上看不到任何提及 Sparql 更新的内容。

查看[此页面](https://github.com/gromgull/rdflib-sparql)，您可能需要使用 的`processUpdate()`方法来`rdflib-sparql`代替？

[在线验证器](http://www.sparql.org/validate/query)同意这不是一个有效的*SPARQL 查询*（尽管对我来说它看起来像是有效的*SPARQL 更新*）

# performance - 使用“类似于”在 PostgreSQL 中查询性能

> ID：13183735
> 
> 赞同：3
> 
> 时间：2012-11-01T18:59:22.713
> 
> 标签：performance, postgresql, indexing

我需要根据特定列中的某些值从表中检索某些行，在示例中名为**columnX**：

```
select *
from tableName 
where columnX similar to ('%A%|%B%|%C%|%1%|%2%|%3%') 
```

因此，如果**columnX**至少包含指定的值之一（A、B、C、1、2、3），我将保留该行。

我找不到比使用**类似于**. 问题是对于超过一百万行的表，查询花费的时间太长。

我试过索引它：

```
create index tableName_columnX_idx on tableName (columnX) 
where columnX similar to ('%A%|%B%|%C%|%1%|%2%|%3%') 
```

但是，如果条件是可变的（值可能不是 A、B、C、1、2、3），我需要为每个条件使用不同的索引。

这个问题有更好的解决方案吗？

编辑：感谢大家的反馈。看起来我已经做到了这一点，可能是因为设计错误（我在一个[单独的问题](https://stackoverflow.com/questions/13194906/data-structure-design-for-database-replication-support)中发布的主题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:13:43.443

如果您只想搜索一个字符值的列表，则将每个字符串拆分为一个字符数组并索引该数组：

```
CREATE INDEX
        ix_tablename_columnxlist
ON      tableName
USING   GIN((REGEXP_SPLIT_TO_ARRAY(columnX, ''))) 
```

然后搜索索引：

```
SELECT  *
FROM    tableName
WHERE   REGEXP_SPLIT_TO_ARRAY(columnX, '') && ARRAY['A', 'B', 'C', '1', '2', '3'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:14:39.450

这让我觉得是一个数据建模问题。您似乎将`text`字段用作集合，存储单个字符代码以识别集合中存在的值。

如果是这样，我想改造此表以使用以下方法之一：

*   标准关系规范化。删除`columnX`，并将其替换为具有外键引用的新表`tableName(id)`和`charcode`包含`columnX`每行旧字符的列，例如`CREATE TABLE tablename_columnx_set(tablename_id integer not null references tablename(id), charcode "char", primary key (tablename_id, charcode))`. 然后，您可以在使用普通 SQL 子查询、连接等时相当有效地搜索键`columnX`。如果您的应用程序无法应对这种变化，您可以始终`columnX`使用触发器保留和维护边表。

*   转换`columnX`为`hstore`具有虚拟值的键。然后，您可以使用 hstore 运算符，例如`columnX ?| ARRAY['A','B','C']`. `GiST`hstore 上的索引应该`columnX`为这些操作提供相当可靠的性能。

*   如果您的表更改率较低并且您可以支付 GIN 索引的成本，请按照[Quassnoi 的建议](https://stackoverflow.com/a/13183949/398670)拆分为数组；

*   转换`columnX`为整数数组，使用`intarray`和 intarray GiST 索引。有一个代码到整数的映射表或在应用程序中转换。

如果时间允许，我会跟进每个演示。制作虚拟数据是一件很痛苦的事情，所以这取决于其他情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T00:12:17.213

我同意@Quassnoi 的观点，[GIN 索引](http://www.postgresql.org/docs/current/interactive/gin.html)是最快和最简单的——除非写入性能或磁盘空间是问题，因为它占用了大量空间并且占用了`INSERT`,`UPDATE`和`DELETE`.

我的附加答案是由您的陈述触发的：

```
I can't find a better approach than using similar to. 
```

如果这是您找到的，那么您的搜索还没有结束。`SIMILAR TO`完全是*浪费时间*。字面上地。PostgreSQL 仅以符合（奇怪的）SQL 标准为特征。检查`EXPLAIN ANALYZE`查询的输出，您会发现它`SIMILAR TO`已被正则表达式替换。

在内部，每个`SIMILAR TO`表达式都被重写为正则表达式。因此，对于每个`SIMILAR TO`表达式，至少有一个更快的正则表达式匹配。`EXPLAIN ANALYZE`如果您不确定，请为您翻译。你不会在手册中找到这个，PostgreSQL 不承诺这样做，但我还没有看到异常。

[有关 dba.SE](https://dba.stackexchange.com/questions/10694/pattern-matching-with-like-similar-to-or-regular-expressions-in-postgresql/10696#10696)的相关答案中的更多详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T19:07:14.430

我会将此作为答案发布，因为它可能会在未来指导其他人：为什么不使用 6 列`haveA`、、`haveB`~`have3`并执行 6 部分`OR`查询？还是使用位掩码？

如果有太多属性要分配一个列，我可能会尝试创建一个“属性”表：

```
(fkey, attr) VALUES (1, 'A'), (1, 'B'), (2, '3') 
```

并让 DBMS 担心优化。

# php - 如何使用 & 将 Bcrypt 输入数据库？

> ID：13183737
> 
> 赞同：-1
> 
> 时间：2012-11-01T18:59:32.017
> 
> 标签：php, bcrypt

所以我在[这里](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php/13153865#13153865/ "您如何使用 Bcrypt 在 php 中设置密码？")读了几次这个问题并阅读了所有答案。我有一个半工作系统，但它坏了。对我来说，问题是这些帖子的答案通常会给出关于创建 bcrtpt 的冗长而复杂的代码 - 但没有关于如何使用它的示例，即响应第一个答案 -

“您可以这样使用此代码：

```
$bcrypt = new Bcrypt(15);

$hash = $bcrypt->hash('password');
$isGood = $bcrypt->verify('password', $hash); 
```

"

我将如何将一些表单数据（我们称之为：$user_password）输入到代码中以创建一个新的 bcrypt 以放入数据中？

此外，对以下内容的解释会有所帮助 - 我有点不确定。

*   开始时 Bcrypt 函数中的 15 是什么意思/做什么？是轮回的意思吗？
*   当执行 $isGood '测试'时，我假设 $isGood 变成布尔值（1 = true），（0 = false）。因此，您可以根据登录名是 1 还是 0 继续工作（或不工作），对吗？
*   我假设 $hash 是您要插入数据库的内容。如果是这样，为什么你不能在登录时使用相同的哈希值，而不是使用 $isGood 东西呢？

我对 php 很陌生，以前一直在使用 SHA($password) .. 这很容易比较和创建，所以两者之间的任何关系（或链接到转换？）都会为我或任何其他在相同情况下访问的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:15:21.743

**15 表示强度，15 表示非常缓慢。**

确保您正确使用此功能，否则如果您过于频繁地进行验证或散列，您将受到严重的性能损失。这两个操作需要相同的时间才能完成。`microtime()`对你的确切情况做一个。**15 对性能不友好。**

*我通常使用 7 - 10。更多是矫枉过正...*

**PS**：你会在这里找到一些`SO`关于**bcrypt**的冗长帖子。阅读它们！像这样：[https](https://security.stackexchange.com/questions/4781/do-any-security-experts-recommend-bcrypt-for-password-storage) ://security.stackexchange.com/questions/4781/do-any-security-experts-recommend-bcrypt-for-password-storage或者这个[http://michaelwright.me/php-password-storage](http://michaelwright.me/php-password-storage)

**PPS**：`Local test:`15强度大约需要3秒。现在想象一下在共享主机上:) 你可能不会低于 1 秒。IMO太长了。

**实际代码**：

```
// Is it available on this system?
$Availability = function_exists('crypt') and defined('CRYPT_BLOWFISH');

// And now the code:
$MT = microtime(true); // Time things, so we can get scared
$Password = 'somepassword'; // The password
$Salt = 'addsomevalidsalthere'; // Your salt, must be valid, read docs
$Strength = 15; // Strength (1-99)
// Compute the formatted salt required for crypt
$CryptSalt = sprintf('$2a$%02d$%s$', $Strength, $Salt);
// Hash the use $Password for storage
$Hashed = crypt($Password, $CryptSalt);
// Verify it against the user input $Password
$Verified = crypt($Password, $Hashed) === $Hashed;
// Show the duration of this (2x as it's both in and out)
echo number_format(microtime(true) - $MT, 6), PHP_EOL; 
```

*它已记录在案。用于测试。*

只是不要设计您的代码来测试每个页面加载时的哈希值。这将扼杀您网站的性能。

*   创建新用户或更改密码时的哈希。
*   登录用户时进行验证。
*   其余的，使用一些散列机制来快速测试每个登录页面的加载。

当你做错了，你会注意到。在您网站的加载速度中:)

**解释**：

当你用河豚地穴散列时，你需要一个盐、一个强度和一个密码。您可以按照规格要求将盐和强度结合起来，并创建一种`crypt()`兼容的盐。这个盐被翻译`crypt()`并提取了销售和强度，加上基于字符 2 和 3 的散列算法。

在您的数据库中，您存储最终的哈希值。您不会存储用于散列密码的盐，因为您将无法达到目的。hashcrypted 值存储执行反向操作所需的内容，并检查您的纯密码是否与散列密码匹配。**盐存储在 内**，无需您存储。

用户注册后，您对密码进行哈希处理并保存。当他们登录时，您会根据他们在您的表单中提交的普通密码验证散列密码。无需记住用于散列的散列。**这允许您**在每个散列上生成随机散列，而无需关心该值是什么，因为它捆绑在返回的散列中。[**在 php.net 上的crypt** () 页面上](http://php.net/manual/en/function.crypt.php)查看更多信息。

*让我知道这是否有意义。*

# sql - 使用 SQL 触发器运行 exe 的风险

> ID：13183738
> 
> 赞同：0
> 
> 时间：2012-11-01T18:59:31.637
> 
> 标签：sql, exec, exe

在 sql 触发器上运行 exe 有什么风险？这是一个封闭的服务器，仅限 Intranet，对运行脚本的服务器和 SQL 服务器连接的用户访问权限有限。

我将传出的电子邮件临时存储在数据库系统的表中。然后这些通过运行和 exe 的触发器发送出去。exe 只是从数据库中提取收件人、发件人、主题、抄送和正文，并通过 CDO 发送电子邮件。

我必须使用外部方法发送电子邮件，而不是简单地从代码隐藏发送，以避免网站上的 slwodown。我在另一篇文章中询问了这个特定问题，但询问执行风险似乎是一个单独的问题。指示相关职位的任何替代方案。

相关帖子[来自网络的电子邮件，无需绑定网页](https://stackoverflow.com/questions/13180991/email-from-web-without-tying-up-webpage)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:08:49.980

如果它是一个封闭的服务器并且 .exe 是已知的，那么我认为不会有太大的风险。我能看到的唯一风险是，如果有人将您的 exe 更改为其他将被触发的东西，但考虑到您描述的情况，这似乎不太可能。

几年前我们也遇到过类似的情况，我们有一个供应商，其产品通过控制程序进行了更新。每次将用户添加到 sql 数据库时，我们都有一个触发控制程序的触发器，然后控制程序会向其服务发出信号以将用户也添加到那里。从来没有真正的问题。

# php - 字符串有前缀 PHP

> ID：13183739
> 
> 赞同：-2
> 
> 时间：2012-11-01T18:59:34.070
> 
> 标签：php, objective-c, string, if-statement, prefix

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:02:47.087

最简单的方法是使用[子字符串](http://php.net/manual/en/function.substr.php)进行比较

```
if (substr($mystring, 0, 7) === 'http://') {
     // do something
} 
```

当然要记住要取确切的字符数。

# regex - 正则表达式检查条目

> ID：13183742
> 
> 赞同：-2
> 
> 时间：2012-11-01T18:59:45.603
> 
> 标签：regex

我在正则表达式方面非常糟糕，需要知道如何确定选择中的值是 1 还是 2，而不是 0。

共有三个选项，只有 2 个有效。

**这将用作 jQuery 验证引擎插件的验证正则表达式。**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:01:01.983

如果您的意思是匹配文字字符串“1”和“2”，

```
/^[12]$/ 
```

就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:01:43.773

最简单的方法可能只是检查`==`，但如果你真的想使用正则表达式：

```
var regex = /^[12]$/; 
```

# java - 向容器中添加多个 jpanels，在它们之间添加空格/边框？

> ID：13183745
> 
> 赞同：0
> 
> 时间：2012-11-01T19:00:11.173
> 
> 标签：java, swing, border, layout-manager, absolutelayout

我正在创建一个具有三个 jpanel 的程序：一个容器，容器内有两个 jpanel，一个用于保存按钮，一个用于保存内容。到目前为止，我已经让它们都显示出来并且看起来不错，唯一的问题是我希望在两者之间添加一些空间或边框（如果可能的话，或者在按钮菜单周围）但是因为两个内部面板都设置为空布局和外部布局设置为边框布局我似乎无法在两个内部布局之间添加边框。到目前为止，这是我的代码：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class internal_test extends JFrame {

int height = 480;
int width = 640;

public internal_test() {
    initUI();
}

private void initUI() {

    JPanel container = new JPanel();
    container.setLayout(new BorderLayout());
    container.setBackground(Color.black);

    JPanel buttonMenu = new JPanel();
    buttonMenu.setLayout(null);
    buttonMenu.setBackground(Color.DARK_GRAY);
    buttonMenu.setPreferredSize(new Dimension(150, height));

    JPanel dragFrame = new JPanel();
    dragFrame.setLayout(null);
    dragFrame.setPreferredSize(new Dimension(200, 100));
    dragFrame.setSize(new Dimension(490, height));
    dragFrame.setBackground(Color.gray);

    container.add(buttonMenu, BorderLayout.WEST);
    container.add(dragFrame, BorderLayout.CENTER);

    // container.setBorder(new EmptyBorder(new Insets(10, 10, 10, 10)));

    add(container);
    pack();

    setTitle("internal_test V0.1");
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setSize(width, height);
    setLocationRelativeTo(null);
}

public static void main(String args[]) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {

            internal_test c = new internal_test();

            c.setVisible(true);

        }
    });
}

} 
```

DragFrame 将成为 DragLayout，因为该布局可以满足我的需要，但按钮菜单在技术上可以是任何布局，只要它允许我将按钮/其他项目放置在列表中，每个项目旁边都有一个标签.

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:52:29.037

我建议[GridBagLayout](http://www.java2s.com/Tutorial/Java/0240__Swing/AGridBagLayoutExampleweightxweighty.htm)

因为更容易在组件之间设置空间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T19:14:16.953

我会使用 BoxLayout 和间距使用

```
panel.add(Box.createRigidArea(new Dimension(x, y))); 
```

[这里](http://zetcode.com/tutorials/javaswingtutorial/swinglayoutmanagement/)有一些体面的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:13:41.670

这应该可以帮助您添加所需的边框类型：http: [//docs.oracle.com/javase/tutorial/uiswing/components/border.html](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html)

您可以从这样的红线边框开始： buttonMenu.setBorder(BorderFactory.createLineBorder(Color.red));

# java - Gephi：使用工具包创建和流式传输动态图

> ID：13183750
> 
> 赞同：2
> 
> 时间：2012-11-01T19:00:31.707
> 
> 标签：java, graph, toolkit, gephi

我正在尝试创建一个动态图并使用 Gephi 工具包对其进行流式传输。到目前为止，我已经按照工具包和流插件教程创建了一个普通图并将其流式传输到 Gephi GUI。

我很难弄清楚如何使图表动态化 - 我已经设法使用 将`TimeInterval`列添加到节点和边缘表，`AttributeModel`但是当我在 GUI 中打开时间轴窗口时，它说图表不是动态的。模型/控制器让我有点困惑。

这是我现在拥有的代码：

```
ProjectController pc = Lookup.getDefault().lookup(ProjectController.class);
pc.newProject();
Workspace workspace = pc.getCurrentWorkspace();
AttributeController attributeController = Lookup.getDefault().lookup(AttributeController.class);
AttributeModel attributeModel = attributeController.getModel();
AttributeColumn nodeTimeColumn = attributeModel.getNodeTable().addColumn(DynamicModel.TIMEINTERVAL_COLUMN, AttributeType.TIME_INTERVAL, AttributeOrigin.PROPERTY);
AttributeColumn edgeTimeColumn = attributeModel.getEdgeTable().addColumn(DynamicModel.TIMEINTERVAL_COLUMN, AttributeType.TIME_INTERVAL, AttributeOrigin.PROPERTY);
GraphController graphController = Lookup.getDefault().lookup(GraphController.class);
GraphModel graphModel = graphController.getModel();
DirectedGraph graph = graphModel.getDirectedGraph();

// At this point, I want to make the graph dynamic so that I can use
// the Timeline feature when I stream to the GUI.

StreamingServer server = Lookup.getDefault().lookup(StreamingServer.class);
ServerControllerFactory controllerFactory = Lookup.getDefault().lookup(ServerControllerFactory.class);
ServerController serverController = controllerFactory.createServerController(graph);
String context = "/testing";
server.register(serverController, context); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T10:41:21.517

原则上，Gephi Graph Streaming 是一种替代方法，可以使用比加载大型动态图更少的内存来实时可视化图中的变化。因此，在每个时间点，您的内存中都没有完整的动态图，而是表示图当前状态的静态图。这就是为什么默认情况下，插件只创建和更新一个静态图。

不幸的是，目前还不可能使用图流更新动态图。我们计划在不久的将来支持它，这些操作将通过更改以下类的操作来实现：

[https://github.com/gephi/gephi-plugins/blob/graph-streaming/StreamingAPI/src/org/gephi/streaming/api/GraphUpdaterEventHandler.java](https://github.com/gephi/gephi-plugins/blob/graph-streaming/StreamingAPI/src/org/gephi/streaming/api/GraphUpdaterEventHandler.java)

正如你在这个文件中看到的，没有处理动态属性；添加、更改或删除新节点/边/属性，但动态列没有更新。

# service - 使用 Exchange Web 服务发送回复电子邮件 - 如何处理 changeKey 属性

> ID：13183757
> 
> 赞同：6
> 
> 时间：2012-11-01T19:00:46.560
> 
> 标签：service, web, exchange-server, exchangewebservices

对于我的代码，我从 Exchange 中检索一条未读消息，根据该消息进行一些处理，然后用我所做的处理结果回复该消息。

我遇到的问题是，当我尝试回复电子邮件时，我在调用 responseMessage.send() 或 responseMessage.sendAndSave() 时收到以下错误：

```
The current ChangeKey is required for this operation. 
```

以下是我正在运行的触发此错误的代码：

```
public void replyToEmail(EmailMessage _emailMessage, String _reply)
    {

        String serviceManager = emailServerAddress = ConfigurationSettings.AppSettings["serviceManagerEmail"].Trim();
        ResponseMessage responseMessage = _emailMessage.CreateReply(true);
        responseMessage.BodyPrefix = _reply;

        String changekey = _emailMessage.Id.ChangeKey;

        if (!serviceManager.Equals(""))
        {
            responseMessage.CcRecipients.Add(new EmailAddress(serviceManager));
        }

        responseMessage.Send();
    } 
```

我可以通过 _emailMessage.id.Changekey 检查 _emailMessage changeKey 值，并且那里有一个值，我希望在调用 _emailMessage.createReply() 时将其分配给 responseMessage。我无法找到手动分配它的方法。

我在搜索过程中找不到任何关于这个问题的参考资料，我希望有人

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-13T18:29:41.113

在设置消息 IsRead = true 并将该更新保存回服务器之后，我遇到了 .Forward 的这个问题。这会更改 ChangeKey，因此它不再有效。

尝试执行 _emailMessage.Load() 以再次从服务器获取消息以及新的 ChangeKey。

# javascript - 无法使用 jQuery animate() 使元素沿对角线移动

> ID：13183759
> 
> 赞同：0
> 
> 时间：2012-11-01T19:00:51.447
> 
> 标签：javascript, jquery, html, dom, script-tag

好的，所以我只需要在我正在构建的网站上为几个动画学习 JQuery。

我一直在阅读 JQuery 网站上的教程，只是想实现一个简单的对角线移动动画。

我对 JQuery 仍然非常陌生（如今天开始），但据我所知，以下代码应该可以工作。我犯了什么错误？

```
<head>
<script type="text/javascript" src="JQuery.js">
</script>

<script>
$(document).ready(function(){
    $("#moveme").click(function(event){
    $("#moveme").animate({right: '+=50', bottom: '+=50'}, 1000);​​​​​​​​​​​​​​​ 
    });
});
</script>
</head>

<body>
<div id="moveme">
Move this text
</div>
</body> 
```

**编辑：**

从 css 添加了相关属性并修复了括号问题，`document`但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:03:21.407

您似乎忘记了一些括号来正确选择元素。

那个怎么样？

```
$(document).ready(function(){
    $("#moveme").click(function(event){
        $(this).animate({right: '+=50', bottom: '+=50'}, 1000);​​​​​​​​​​​​​​​ 
    });
}); 
```

**编辑：**

另外，*请确保您正在导入 jQuery 脚本库*：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:03:09.830

您错过了 $(document) 在该行

> $document.ready(函数(){

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:06:16.407

此外，您的 jquery animate 函数正在更改您的 id="moveme" 的 CSS

我会确保在你的 CSS 中有这个。

```
#id {
    position: relative;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T19:40:00.057

你绝对可以这样做：

```
$(document).ready(function(){
    $("#moveme").click(function(event){
      $(this).animate({'margin-left': '+=50', 'margin-top': '+=50'}, 1000); 
    });
});​ 
```

在这里工作演示（只需点击 div 说“你好”）：http: [//jsfiddle.net/px2jz/](http://jsfiddle.net/px2jz/)

# eclipse - 为一个工作区配置 eclipse indigo cvs，该工作区引用两个具有不同 cvs_server 的 cvs 服务器

> ID：13183760
> 
> 赞同：1
> 
> 时间：2012-11-01T19:00:55.243
> 
> 标签：eclipse, cvs

我希望一个工作区可以连接到两台 cvs 服务器。一个在 Solaris 上运行，它需要在 Window > Preferences > Team > CVS > Ext Connection Method > CVS_SERVER "/opt/csw/bin/cvs" 中进行设置。

另一个 cvs 服务器在 Linux 上运行，它需要设置 Window > Preferences > Team > CVS > Ext Connection Method > CVS_SERVER "/usr/bin/cvs"。（实际上 Linux 服务器可能根本不需要这个设置，它可能会使用默认路径。但在 Solaris 上，SSH 登录的默认路径将不包括 CVS 的路径，因此 Solaris 连接需要该设置.)

有没有办法使“CVS_SERVER”设置特定于连接，以便一个工作区可以支持两种不同的设置？

当然我知道一个或两个服务器上的符号链接可以使两个服务器看起来具有相同的 cvs 路径，但我希望在客户端找到一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:08:53.283

当我等待更好的解决方案时，我目前的解决方法是在我需要访问不常用的存储库时更改 Window > Preferences > Team > CVS > Ext Connection Method > CVS_SERVER 的设置，然后将设置更改回使用我的更常用的存储库。

丑陋但有效。

# php - 刷新后保留选定的选项（表单/选择）

> ID：13183764
> 
> 赞同：2
> 
> 时间：2012-11-01T19:01:14.340
> 
> 标签：php, javascript, jquery, smarty

> **可能重复：**
> [提交后 Html 选择选项丢失数据](https://stackoverflow.com/questions/8704066/html-select-option-lost-data-after-submit)

我有一个选择菜单，应该在页面刷新后保留所选选项。这是一个例子：

```
<select id="form_frame" name="frame" onchange="getData(this);"/>
   <option value="data1" selected="selected">Data 1</option>
   <option value="data2">Data 2</option>
</select> 
```

函数 getData 只是将信息拉给用户。

我正在使用 Smarty/php 作为动态内容。

欢迎咨询，谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T19:20:13.423

如何使用本地存储完成：

```
$(function() {
    if (localStorage.getItem('form_frame')) {
        $("#form_frame option").eq(localStorage.getItem('form_frame')).prop('selected', true);
    }

    $("#form_frame").on('change', function() {
        localStorage.setItem('form_frame', $('option:selected', this).index());
    });
}); 
```

[**小提琴**](http://jsfiddle.net/uu6s7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:14:37.137

将所选选项元素的 id 或值放入您的 php session( `$_SESSION['selected_option_id']`) 中，这样该值将通过所有页面传递。然后更改生成选项元素的代码再次检查`$_SESSION['selected_option_id']`，如果匹配，则在选项元素中设置 selected 属性。

会话是在请求之间共享值的好方法，因为 HTTP 是无状态协议。

我更喜欢在 localStorage 和 cookie 之前使用 session，因为这些在客户端浏览器中可能不可用或启用。session 是 apache/php 的一个特性，在服务器端得到支持。

[PHP 会话处理](http://www.php.net/manual/en/intro.session.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T19:20:22.057

您可以使用 Cookie。但是，如果您希望它适用于不接受来自您网站的 cookie 的用户，请在 url 中附加一个井号标签。选择字段的 Onchange 您更新井号标签。页面加载时，您检查当前的井号标签并将选择设置为其值与井号标签之一匹配的选项。

# objective-c - 填充 UITableView

> ID：13183765
> 
> 赞同：0
> 
> 时间：2012-11-01T19:01:14.603
> 
> 标签：objective-c, uitableview, xcode4.5

我正在与以前工作的 UITableView 作斗争，但不知何故我把它弄坏了！它是 Paul Hegarty 课程单元的一部分

症状是视图加载但它是空的。我显然误解了一些相当基本的东西。

据我了解，两个关键方法是 1 节行数，在我的情况下返回零，我知道这是错误的！

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

 {

 //   #warning Incomplete method implementation.
    // Return the number of rows in the section.
    NSLog(@"TopPlaces %@",self.topPlaces);
    //return 100;
    return [self.topPlaces count];

   } 
```

由于上述原因，永远不会调用以下方法，因为没有行。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

第二个是在 ViewDidLoad 中，我可以将数据记录到控制台，一切看起来都很好。即我的数据是在 ViewDidLoad 中生成的

```
- (void)viewDidLoad

 {
        [super viewDidLoad];

    dispatch_queue_t    dowloadQueue = dispatch_queue_create("flick downloader", NULL);
    dispatch_async(dowloadQueue, ^{
        NSArray *topPlaces = [FlickrFetcher topPlaces];
        //NSLog(@"Array is %@",topPlaces); // array is OK here
        dispatch_async(dispatch_get_main_queue(), ^{
            NSSortDescriptor *woeDescriptor = [[NSSortDescriptor alloc] initWithKey:@"_content" ascending:YES];  
            NSArray *woeDescriptors = @[woeDescriptor];
            NSArray *sortedReturns = [topPlaces sortedArrayUsingDescriptors:woeDescriptors];
            self.topPlaces = sortedReturns;
            //all the data is present here, count is 100 and array will log to console
           NSLog(@"count here is %u",[self.topPlaces count]);
        });
    });

    // Uncomment the following line to preserve selection between presentations.
    self.clearsSelectionOnViewWillAppear = NO;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:50:11.423

问题是您进行了异步调用以获取数据（这意味着您的数组应该在将来的某个时间点充满数据），但之后您不会重新加载您的表格视图。调用`reloadData`会解决问题：

```
 ...            
self.topPlaces = sortedReturns;
//all the data is present here, count is 100 and array will log to console
NSLog(@"count here is %u",[self.topPlaces count]);

[self.tableView reloadData]; // Assuming that 'tableView' is your outlet 
```

这将指示您的 tableview 再次查询其数据源，并最终将所有数据加载到您的（现在非空的）`topPlaces`数组中。

* * *

**进一步说明：**

我在@nerak99 的评论中看到他不完全确定为什么用`reloadData`. 好吧，让我们举个例子：

想象一下，你有一家餐馆。

你在早上 06:00 打开这个地方，你发现你没有什么可做饭的。因此，您要求您的一个人去市场购买补给品（那是您的**异步​​调用**）。

同时你指示女服务员写今天的菜单，所以她写......好吧，什么都没有（那是你的**表格视图询问行数**）。

现在在 07:00 去市场的那个人带着 10 件物品回来了。更新菜单的下一个合乎逻辑的步骤是什么？实际**通知**女服务员（那是您的`reloadData`）您退回的物品。

我希望这是有道理的:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:42:46.937

什么是 self.topPlaces？尝试 NSLog 数组并查看是否有任何内容。如果没有，请确保它正在设置。

如果您提供更多信息，我将能够写一个更具体的答案。

# ruby-on-rails - 带参数的rails自定义休息路线

> ID：13183769
> 
> 赞同：2
> 
> 时间：2012-11-01T19:01:29.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个问题控制器和一个相关的模型以及一些休息路线。这是它在 routes.rb 中的设置方式：

```
resources :questions 
```

我想添加一个自定义路由，其格式为 /questions/widget/ID（其中 ID 是我要为其生成小部件的问题的 ID）。我希望这可以通过我的问题控制器中的“小部件”操作来处理。我尝试了很多事情，例如：

```
resources :questions  do
   member do
      get 'widget/:id'
   end
end 
```

但没有任何工作。我确定我错过了一些简单的东西。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T19:23:07.473

您不必指定 id，因为您在资源内部。它应该看起来像：

```
resources :questions  do
   member do
      get 'widget'
   end
end 
```

您可以从[Rails 指南](http://guides.rubyonrails.org/routing.html)中获得更多信息。请参阅第 2.9.1 节。

编辑：我刚刚注意到您正在尝试匹配 get /questions/widget/:id。这将为 get /questions/:id/widget 设置一个路由。这更符合 Rails 约定。如果你真的想要它，你需要设置一个自定义匹配语句：

```
match "/questions/widget/:id" => "questions#widget" 
```

但是，我会坚持惯例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-09T11:42:26.157

我知道它很旧，但是想解决我在这里结束的另一个路由问题，可以按照您的要求进行操作，这是一个示例

```
resources :articles do
  get 'by_tag/:tag' => :by_tag, on: :collection
  get 'by_author/:author' => :by_author, on: :collection
  resources :comments, except: :show
end 
```

现在你有了 /artices/by_tag/:tag 。诀窍是使用 on:collection。显然不要忘记添加 by_tag 操作和 by_author。

```
class ArticlesController < ApplicationController
.....
    def by_tag
    ...
    end
end 
```

检查这条路线是否适用

```
melardev@local~$ rails routes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:08:51.040

你为什么不使用这条路线：

```
resources :questions  do
  resources :widgets
end 
```

它将`questions/:question_id/widgets/new`为您创建路径，以便为具有特定问题 ID 的问题创建新的小部件。

# visual-studio-2010 - 当飓风桑迪中断互联网连接时，VS2010 的爬行速度变慢

> ID：13183772
> 
> 赞同：1
> 
> 时间：2012-11-01T19:01:35.383
> 
> 标签：visual-studio-2010, performance

我在大纽约地区，飓风桑迪给我们留下了电力，但中断了我们的互联网连接。（我在本地麦当劳的 ipad 上输入这个）

在 IDE 中启动调试会话时，这大大减慢了 VS2010。现在似乎有一个很长的停顿......每个 dll 十秒......对于项目中引用的每个 dll。现在每次我们运行我们的项目都需要几分钟。

该项目本身绝对没有 Internet 功能......似乎与 VS 2010 严格相关。

禁用 MS 符号服务器没有任何效果，我在 VS 设置中找不到需要 Internet 的任何其他内容。

**编辑**

我们现在又可以上网了，启动时间又回到了 20 秒左右。

之前，我也尝试再次禁用 Symbol Server，这一次确实产生了重大影响——将启动时间从 4 分钟减少到 1 分钟。不知道为什么我第一次尝试时没有看到相同的结果。

使用 Win7 资源监视器进行的一些测试表明 VS 正在尝试分别与 224.0.0.251 和 252...多播 DNS 地址和链路本地多播名称解析地址进行通信）。

还有 239.255.255.250（简单服务发现协议）。通过在 Wikipedia 上查找 IP 地址来获得定义，但这并没有真正帮助我。

有关如何追踪此问题的任何建议？

# javascript - iFrame 随内容扩展但不缩小

> ID：13183774
> 
> 赞同：1
> 
> 时间：2012-11-01T19:01:37.753
> 
> 标签：javascript, html, css

我有一个跨域 iFrame。实际的 iFrame 工作正常，并以 100% 的高度显示页面。

我的问题是第一页大约 1200 像素高，然后如果您单击 iframe 中的链接并且下一页是 800 像素，您会在底部获得 400 像素的空白区域。

所以 iframe 会变大以适应内容，但不会缩小。下面是我的代码：

进入要进行 iframe 的页面中的代码：

```
<!DOCTYPE html>
<head>
</head>
<body onload="parent.postMessage(document.body.scrollHeight, 'http://target.domain.com');">
  <h3>Got post?</h3>
  <p>Lots of stuff here which will be inside the iframe.</p>
</body>
</html> 
```

进入接收 iframe 的页面的代码：

```
<script type="text/javascript">
  function resizeCrossDomainIframe(id, other_domain) {
    var iframe = document.getElementById(id);
    window.addEventListener('message', function(event) {
      if (event.origin !== other_domain) return; // only accept messages from the specified domain
      if (isNaN(event.data)) return; // only accept something which can be parsed as a number
      var height = parseInt(event.data) + 32; // add some extra height to avoid scrollbar
      iframe.height = height + "px";
    }, false);
  }
</script>

<iframe src='http://example.com/page_containing_iframe.html' id="my_iframe"    onload="resizeCrossDomainIframe('my_iframe', 'http://example.com');">
</iframe> 
```

有谁知道如何修改javascript使其也缩小？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:31:12.343

在您的脚本中 other_domain 等于 'http://example.com' - 总是。因此，如果您单击“http://example.com/somePage.html”，您的函数将始终在调整 iFrame 大小之前返回。而不是等于，你应该使用

```
if (event.origin.lastIndexOf(other_domain, 0) !== 0) return; 
```

# arrays - Excel VBA - 如何重新设置二维数组？

> ID：13183775
> 
> 赞同：22
> 
> 时间：2012-11-01T19:01:38.100
> 
> 标签：arrays, excel, vba, multidimensional-array

在通过 Visual Basic 的 Excel 中，我正在遍历加载到 Excel 中的 CSV 发票文件。发票是由客户确定的模式。

我正在将它们读入一个动态二维数组，然后将它们写入另一个带有旧发票的工作表。我知道我必须反转行和列，因为只有数组的最后一个维度可能会被重新调整，然后在我将其写入主工作表时转置。

在某处，我的语法错误。它一直告诉我我已经对数组进行了维度化。我以某种方式将其创建为静态数组？为了让它动态运行，我需要修复什么？

**每个答案的工作代码**

```
Sub InvoicesUpdate()
'
'Application Settings
Application.ScreenUpdating = False
Application.DisplayAlerts = False
Application.Calculation = xlCalculationManual

'Instantiate control variables
Dim allRows As Long, currentOffset As Long, invoiceActive As Boolean, mAllRows As Long
Dim iAllRows As Long, unusedRow As Long, row As Long, mWSExists As Boolean, newmAllRows As Long

'Instantiate invoice variables
Dim accountNum As String, custName As String, vinNum As String, caseNum As String, statusField As String
Dim invDate As String, makeField As String, feeDesc As String, amountField As String, invNum As String

'Instantiate Workbook variables
Dim mWB As Workbook 'master
Dim iWB As Workbook 'import

'Instantiate Worksheet variables
Dim mWS As Worksheet
Dim iWS As Worksheet

'Instantiate Range variables
Dim iData As Range

'Initialize variables
invoiceActive = False
row = 0

'Open import workbook
Workbooks.Open ("path:excel_invoices.csv")
Set iWB = ActiveWorkbook
Set iWS = iWB.Sheets("excel_invoices.csv")
iWS.Activate
Range("A1").Select
iAllRows = iWS.UsedRange.Rows.Count 'Count rows of import data

'Instantiate array, include extra column for client name
Dim invoices()
ReDim invoices(10, 0) 

'Loop through rows.
Do

    'Check for the start of a client and store client name
    If ActiveCell.Value = "Account Number" Then

        clientName = ActiveCell.Offset(-1, 6).Value

    End If

    If ActiveCell.Offset(0, 3).Value <> Empty And ActiveCell.Value <> "Account Number" And ActiveCell.Offset(2, 0) = Empty Then

        invoiceActive = True

        'Populate account information.
        accountNum = ActiveCell.Offset(0, 0).Value
        vinNum = ActiveCell.Offset(0, 1).Value
        'leave out customer name for FDCPA reasons
        caseNum = ActiveCell.Offset(0, 3).Value
        statusField = ActiveCell.Offset(0, 4).Value
        invDate = ActiveCell.Offset(0, 5).Value
        makeField = ActiveCell.Offset(0, 6).Value

    End If

    If invoiceActive = True And ActiveCell.Value = Empty And ActiveCell.Offset(0, 6).Value = Empty And ActiveCell.Offset(0, 9).Value = Empty Then

        'Make sure something other than $0 was invoiced
        If ActiveCell.Offset(0, 8).Value <> 0 Then

            'Populate individual item values.
            feeDesc = ActiveCell.Offset(0, 7).Value
            amountField = ActiveCell.Offset(0, 8).Value
            invNum = ActiveCell.Offset(0, 10).Value

            'Transfer data to array
            invoices(0, row) = "=TODAY()"
            invoices(1, row) = accountNum
            invoices(2, row) = clientName
            invoices(3, row) = vinNum
            invoices(4, row) = caseNum
            invoices(5, row) = statusField
            invoices(6, row) = invDate
            invoices(7, row) = makeField
            invoices(8, row) = feeDesc
            invoices(9, row) = amountField
            invoices(10, row) = invNum

            'Increment row counter for array
            row = row + 1

            'Resize array for next entry
            ReDim Preserve invoices(10,row)

         End If

    End If

    'Find the end of an invoice
    If invoiceActive = True And ActiveCell.Offset(0, 9) <> Empty Then

        'Set the flag to outside of an invoice
        invoiceActive = False

    End If

    'Increment active cell to next cell down
    ActiveCell.Offset(1, 0).Activate

'Define end of the loop at the last used row
Loop Until ActiveCell.row = iAllRows

'Close import data file
iWB.Close 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-01T19:20:02.203

这并不完全直观，但是如果您使用尺寸调暗数组，则无法 Redim [(VB6 Ref)](http://msdn.microsoft.com/en-us/library/aa266231%28v=vs.60%29.aspx)数组。链接页面的确切报价是：

> ReDim 语句用于调整已使用带**空括号**（无维度下标）的 Private、Public 或 Dim 语句正式声明的动态数组的大小或调整其大小。

换句话说，而不是`dim invoices(10,0)`

你应该使用

```
Dim invoices()
Redim invoices(10,0) 
```

然后当你 ReDim 时，你需要使用`Redim Preserve (10,row)`

警告：在对多维数组进行重维时，如果要保留值，则只能增加最后一维。IE`Redim Preserve (11,row)`甚至`(11,0)`会失败。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-09T07:30:30.900

我自己碰到这个路障时偶然发现了这个问题。我最终写了一段代码来快速处理`ReDim Preserve`一个新大小的数组（第一个或最后一个维度）。也许它会帮助其他面临同样问题的人。

因此，对于用法，假设您的数组最初设置为 `MyArray(3,5)`，并且您想让尺寸（首先！）更大，让我们说`MyArray(10,20)`。你会习惯做这样的事情吗？

```
 ReDim Preserve MyArray(10,20) '<-- Returns Error 
```

但不幸的是，这会返回错误，因为您试图更改第一个维度的大小。因此，使用我的功能，您只需执行以下操作：

```
 MyArray = ReDimPreserve(MyArray,10,20) 
```

现在数组变大了，数据也被保留了。您`ReDim Preserve`的多维数组已完成。:)

最后但并非最不重要的是，神奇的功能：`ReDimPreserve()`

```
'redim preserve both dimensions for a multidimension array *ONLY
Public Function ReDimPreserve(aArrayToPreserve,nNewFirstUBound,nNewLastUBound)
    ReDimPreserve = False
    'check if its in array first
    If IsArray(aArrayToPreserve) Then       
        'create new array
        ReDim aPreservedArray(nNewFirstUBound,nNewLastUBound)
        'get old lBound/uBound
        nOldFirstUBound = uBound(aArrayToPreserve,1)
        nOldLastUBound = uBound(aArrayToPreserve,2)         
        'loop through first
        For nFirst = lBound(aArrayToPreserve,1) to nNewFirstUBound
            For nLast = lBound(aArrayToPreserve,2) to nNewLastUBound
                'if its in range, then append to new array the same way
                If nOldFirstUBound >= nFirst And nOldLastUBound >= nLast Then
                    aPreservedArray(nFirst,nLast) = aArrayToPreserve(nFirst,nLast)
                End If
            Next
        Next            
        'return the array redimmed
        If IsArray(aPreservedArray) Then ReDimPreserve = aPreservedArray
    End If
End Function 
```

我在 20 分钟内写了这篇文章，所以不能保证。但是，如果您想使用或扩展它，请随意。我原以为有人已经在这里有了这样的代码，显然不是。所以在这里你去齿轮头。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-28T10:34:08.010

这是带有 variabel 声明的 redim preseve 方法的更新代码，希望 @Control Freak 可以使用它:)

```
Option explicit
'redim preserve both dimensions for a multidimension array *ONLY
Public Function ReDimPreserve(aArrayToPreserve As Variant, nNewFirstUBound As Variant, nNewLastUBound As Variant) As Variant
    Dim nFirst As Long
    Dim nLast As Long
    Dim nOldFirstUBound As Long
    Dim nOldLastUBound As Long

    ReDimPreserve = False
    'check if its in array first
    If IsArray(aArrayToPreserve) Then
        'create new array
        ReDim aPreservedArray(nNewFirstUBound, nNewLastUBound)
        'get old lBound/uBound
        nOldFirstUBound = UBound(aArrayToPreserve, 1)
        nOldLastUBound = UBound(aArrayToPreserve, 2)
        'loop through first
        For nFirst = LBound(aArrayToPreserve, 1) To nNewFirstUBound
            For nLast = LBound(aArrayToPreserve, 2) To nNewLastUBound
                'if its in range, then append to new array the same way
                If nOldFirstUBound >= nFirst And nOldLastUBound >= nLast Then
                    aPreservedArray(nFirst, nLast) = aArrayToPreserve(nFirst, nLast)
                End If
            Next
        Next
        'return the array redimmed
        If IsArray(aPreservedArray) Then ReDimPreserve = aPreservedArray
    End If
End Function 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-23T21:51:44.030

我知道这有点老了，但我认为可能有一个更简单的解决方案，不需要额外的编码：

而不是再次转置，重新调整和转置，如果我们谈论二维数组，为什么不只存储转置的值开始。在这种情况下， redim preserve 实际上从一开始就增加了右（第二个）维度。或者换句话说，为了可视化它，如果只有列的 nr 可以用 redim preserve 增加，为什么不存储在两行而不是两列中。

索引将是 00-01、01-11、02-12、03-13、04-14、05-15 ... 0 25-1 25 等等，而不是 00-01、10-11、20-21 , 30-31, 40-41 等等。

由于在重新调整时只能保留第二个（或最后一个）维度，因此有人可能会争辩说这就是数组应该如何开始使用的方式。我在任何地方都没有看到这个解决方案，所以也许我忽略了一些东西？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-07T05:57:06.953

这是我如何做到这一点的。

```
Dim TAV() As Variant
Dim ArrayToPreserve() as Variant

TAV = ArrayToPreserve
ReDim ArrayToPreserve(nDim1, nDim2)
For i = 0 To UBound(TAV, 1)
    For j = 0 To UBound(TAV, 2)
        ArrayToPreserve(i, j) = TAV(i, j)
    Next j
Next i 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-11T16:46:30.623

给你。

```
Public Function ReDimPreserve(ByRef Arr, ByVal idx1 As Integer, ByVal idx2 As Integer)

    Dim newArr()
    Dim x As Integer
    Dim y As Integer

    ReDim newArr(idx1, idx2)

    For x = 0 To UBound(Arr, 1)
        For y = 0 To UBound(Arr, 2)
            newArr(x, y) = Arr(x, y)
        Next
    Next

    Arr = newArr

End Function 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-18T22:53:18.173

对@controlfreak 和@skatun 之前写的内容的一个小更新（对不起，我没有足够的声誉来发表评论）。我使用了 skatun 的代码，它对我来说效果很好，只是它创建了一个比我需要的更大的数组。因此，我改变了：

```
ReDim aPreservedArray(nNewFirstUBound, nNewLastUBound) 
```

到：

```
ReDim aPreservedArray(LBound(aArrayToPreserve, 1) To nNewFirstUBound, LBound(aArrayToPreserve, 2) To nNewLastUBound) 
```

这将保持两个维度的原始数组的下限（0、1 或其他任何值；原始代码假定为 0）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-30T16:24:30.657

我以更短的方式解决了这个问题。

```
Dim marray() as variant, array2() as variant, YY ,ZZ as integer
YY=1
ZZ=1

Redim marray(1 to 1000, 1 to 10)
Do while ZZ<100 ' this is populating the first array
marray(ZZ,YY)= "something"
ZZ=ZZ+1
YY=YY+1 
Loop
'this part is where you store your array in another then resize and restore to original
array2= marray
Redim marray(1 to ZZ-1, 1 to YY)
marray = array2 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-06T18:52:10.933

你可以这样做`array(0)= array(0,1,2,3)`。

```
Sub add_new(data_array() As Variant, new_data() As Variant)
    Dim ar2() As Variant, fl As Integer
    If Not (isEmpty(data_array)) = True Then
        fl = 0
    Else
        fl = UBound(data_array) + 1
    End If
    ReDim Preserve data_array(fl)
    data_array(fl) = new_data
End Sub

Sub demo()
    Dim dt() As Variant, nw(0, 1) As Variant
    nw(0, 0) = "Hi"
    nw(0, 1) = "Bye"
    Call add_new(dt, nw)
    nw(0, 0) = "Good"
    nw(0, 1) = "Bad"
    Call add_new(dt, nw)
End Sub 
```

# combobox - 不同工作表上的范围

> ID：13183778
> 
> 赞同：0
> 
> 时间：2012-11-01T19:01:45.107
> 
> 标签：combobox, range

我正在尝试从另一个工作表加载一个带有标签数组（范围）的组合框。如果我在范围内使用“A4:PB4”而不是 Cells 方法，它会起作用。不知道为什么这不起作用。

```
Private Sub ComboBox1_GotFocus()

 Dim myArray As Variant
 lastcol = Worksheets("data").Range("A4").End(xlToRight).Column
 myArray = WorksheetFunction.Transpose(Worksheets("data").Range(Cells(4, 1), Cells(4, lastcol)))
 With Me.ComboBox1
  .List = myArray
 End With

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T13:21:32.280

```
 Private Sub ComboBox1_GotFocus()

  Dim myArray As Variant

  lastcol = Worksheets("data").Range("A4").End(xlToRight).Column
  With Worksheets("data")
   Set SourceRng = .Range(.Cells(4, 1), .Cells(4, lastcol))
  End With
  myArray = WorksheetFunction.Transpose(SourceRng)
  With Me.ComboBox1
   .List = myArray
  End With

 End Sub 
```

# vb.net - 以编程方式导入 MS SAPI 5.1 配置文件

> ID：13183779
> 
> 赞同：1
> 
> 时间：2012-11-01T19:01:50.760
> 
> 标签：vb.net, speech-recognition, sapi

我正在尝试使用 VB 以编程方式导入 MS 语音配置文件。我要做的基本上是在不使用界面的情况下执行[SpProfileMgr的所有任务。](http://www.microsoft.com/en-us/download/details.aspx?id=22358)我们的总体目标是从我们的网络中提取语音配置文件，以便它可以在多台计算机上使用。我们已经了解如何使用 SAPI.SpSharedRecognizer 以编程方式设置配置文件，我们只是无法在不使用 SpProfileMgr 的情况下从网络中提取该配置文件。

任何帮助，将不胜感激。

# sql - Play Framework 2.0 中的 DB Evolution

> ID：13183783
> 
> 赞同：1
> 
> 时间：2012-11-01T19:02:02.797
> 
> 标签：sql, playframework, playframework-2.0

在 play 1.0 中，当我们更改变量类型或例如在模型中从 @OneToMany 更改为 @ManyToMany 时，会自动处理更改，但使用 play 2.0 进化脚本会删除数据库。有什么方法可以让 Play 2.0 在不删除数据库的情况下应用更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:20:37.917

是的，有办法。您需要禁用文件的自动重新创建`1.sql`并开始编写自己的演变，其中包含`ALTERS`而不是- 用等`CREATES`对其进行编号。`2.sql``3.sql`

在实践中，这意味着，如果您使用的是单个数据库，您还可以……使用您最喜欢的 DB GUI 管理数据库的表和列。仅当您无法使用 GUI（主机不允许外部连接且没有任何 GUI）或您计划在单独的数据库上运行应用程序的许多实例时，这些演变才有用。否则手动编写语句可能比使用 GUI 更复杂。

提示：有时，如果我不确定是否将所有必需的关系和约束添加到我的手动进化中，我将删除它们（在 git 控制的文件夹下！）并在启用 Ebean 插件的情况下运行应用程序并保存建议`1.sql`但我不是应用更改。稍后使用 git 我正在恢复我的演变，并与保存的自动生成的文件和`convert`CREATE 语句进行比较。在不使用第三部分软件的情况下管理变更没有更好的选择。

# c++ - String.find 总是返回 true (C++)

> ID：13183784
> 
> 赞同：3
> 
> 时间：2012-11-01T19:02:08.613
> 
> 标签：c++, boolean

我试图让 boolean found_word 在找到单词/字符时返回 true，如果没有找到则返回 false，但无论我在文本中写什么，它总是返回 true。循环本身有效，已经尝试过了。包括 IOStream 和字符串。

```
while(timestorun){
    found_word = text.find("khgdawjugfdjhawbdjkhsadgawkdsa");

    if(found_word){
        cout << "FOUND!!!" << endl;
    }
    else if(!found_word){
        cout << "Found problem!!!!!"<< endl;
    }
    timestorun--;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T19:03:08.953

你应该和 比较`npos`。`find`不返回布尔值。

```
found_word = text.find("khgdawjugfdjhawbdjkhsadgawkdsa") != std::string::npos; 
```

`0`，即`false`只有在索引处找到子字符串时才会返回`0`。

另外，您的第二个条件是多余的-如果`found_word`是`false`，我个人保证`!found_word`会是`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:35:58.143

它应该更像这样：

```
int main ()
{
    int found = text.find("some text");
    if (found != std::string::npos)
    {
        //do stuff if word is there
    }
    else
    {
        //do stuff when word isnt there
    }
} 
```

如果单词不存在，text.find 应该返回 -1，否则返回您在字符串中找到它的位置

# database - 用于组织和提供 PDF 文件库的 Web 应用程序

> ID：13183785
> 
> 赞同：-1
> 
> 时间：2012-11-01T19:02:08.717
> 
> 标签：database, pdf, web-applications

我有一个大型的 PDF 电子书库，我正在寻找一个 Web 应用程序来托管在我的网站上，以组织和排序文件的数据库，并能够通过添加诸如出版商、出版年份之类的数据来注释它们, 关键字,[作者](http://www.webfaction.com/?affiliate=pigimal)等end 并不重要，尽管 .NET 已经出局了。

我到处搜索，似乎找不到任何符合要求的东西，尽管似乎有人应该以前开源过。我对 Mendeley (http://www.mendeley.com) 或[Scribd 之](http://www.scribd.com)类的服务不感兴趣，而是我可以自己托管的东西，既可以克服文件大小限制和隐私问题，也可以查看源代码并在需要时对其进行修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:34:20.147

您似乎需要一个文档管理系统。

查看[OpenKM](http://www.openkm.com/en/)或[Nuxeo](http://www.nuxeo.com/en/products/document-management)

# arrays - 附加多个数组项

> ID：13183788
> 
> 赞同：1
> 
> 时间：2012-11-01T19:02:20.607
> 
> 标签：arrays, r, append

这是可重现的代码：

```
a <- rep(1, 20)
a[c(1, 12, 15)] <- 0
b <- which(a == 0)
set.seed(123)
d <- round(runif(17) * 100) 
```

我想附加`0`s 以`d`获得以下结果：

```
[1]  0 29 79 41 88 94  5 53 89 55 46  0 96 45  0 68 57 10 90 25 
```

`d`在将 s附加到索引等于 的每个元素之后，`0`等于`b - 1`。

我见过`append()`只接受一个“后”值，不超过一个。

我该怎么办？

请记住，我无法更改 的长度，`d`因为它被认为是一个相当长的函数的输出，而不是像本例中那样的简单随机序列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:12:36.480

您可以使用负下标将非零元素分配给新向量。

```
D <- numeric(length(c(b,d)))
D[-b] <- d
D
# [1]  0 29 79 41 88 94  5 53 89 55 46  0 96 45  0 68 57 10 90 25 
```

# asp.net - 如何从 JSON Action 方法向 Ajax 表单返回错误或通知？

> ID：13183794
> 
> 赞同：1
> 
> 时间：2012-11-01T19:02:37.343
> 
> 标签：asp.net, ajax, asp.net-mvc, json

假设我们有一个标准的 Ajax 表单，其语法如下：

```
 @using(Ajax.BeginForm("AddCityJson", "City",new AjaxOptions
        {
            HttpMethod = "post",
            OnSuccess = "JScriptOnSuccess();",
            OnFailure = "JScriptOnFailure"
        }))
    {
     ...form fields go here...   
     } 
```

一个简单的表单，它收集有关城市的一些信息，提交并保存它。

在控制器端，我们收到信息。如果一切顺利，我们返回 true 以触发 OnSuccess AjaxOption，如果失败则返回 false：

```
public JsonResult AddCityJson(Formcollection collection)
{
 var city = new City
 {
  ...populate city fields from passed in collection
 }
 var cityRepository = new CityRepository;
 city = cityRepository.SaveOrEdit(city);

 if(city==null)
 {return Json(false)} 

 return Json(true);

} 
```

在控制器 AddCityJson 方法内部，我需要添加各种检查。可能检查城市名称是否已经存在或任何其他验证，如果我遇到错误或警告，请将其返回 UI。

如果我的 Ajax 表单期望返回 ajax true 或 false 以及该帖子是否成功，我如何将任何错误/警告消息传递给 UI？

我想避免使用 ViewData、ViewBags。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:39:03.427

您可以在 JSON 结果中返回任意数量的值，例如：

```
return Json(new { success = false, message = errorMessage }); 
```

然后在客户端解释这个。无需使用 ViewData、ViewBags 等。只需在客户端格式化结果，因此您只是通过 JSON 传输数据。

编辑：我没有意识到您正在使用 Ajax.BeginForm()。您仍然应该能够连接到 JSON 结果客户端以解析结果。请参阅[如何将 Ajax.BeginForm MVC 助手与 JSON 结果一起使用？](https://stackoverflow.com/questions/304233/how-to-use-ajax-beginform-mvc-helper-with-json-result).

尽管我怀疑大多数人会使用 jQuery 来完成同样的事情，例如各种 StackOverflow 帖子中的描述，例如 Darin 在[Using Ajax.BeginForm with ASP.NET MVC 3 Razor](https://stackoverflow.com/questions/5410055/using-ajax-beginform-with-asp-net-mvc-3-razor)的回复。这也是我推荐的，因为 jQuery 库非常健壮并且经过跨平台测试。

# jquery - 这两个 jQuery 函数可以组合成一个更高效的函数吗？

> ID：13183795
> 
> 赞同：0
> 
> 时间：2012-11-01T19:02:44.337
> 
> 标签：jquery, html

我在 jQuery 中有两个函数来隐藏然后显示标题，并将按钮换出，这样当标题隐藏时，“显示标题”按钮就会出现，反之亦然。它们如下：

```
$('#close_header').click(function() {
    $('#header').animate({ top: '-=150px' }, 500);
    $(this).toggle();
    $('#open_header').toggle();
});

$('#open_header').click(function() {
    $('#header').animate({ top: '+=150px' }, 500);
    $(this).toggle();
    $('#close_header').toggle();
}); 
```

要附带的标记如下：

```
<img src="images/close.png" id="close_header" class="header_control fadein button">
<img src="images/open.png" id="open_header" class="header_control fadein button">
<div id="header">
    *Header content.*
</div> 
```

为了整洁和效率，有什么方法可以将这两个功能合二为一吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T19:05:33.927

绝对没有性能差异。

如果您尝试将其全部编写在一个带有参数的函数中，则只会降低可读性。

保持这样就好了。

现在回答你的问题：

> 有什么办法可以结合这两个功能...

**是的**

> 为了整洁和效率，有什么方法可以将这两个功能合二为一吗？

**不。**阅读其他答案中的代码，它们更整洁吗？他们更有效率吗？**不**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T19:11:16.030

假设你只有这两个`.header_control`s：

```
$('.header_control').click(function() {
    var dist = (this.id=="open_header") ? '+=150px' : '-=150px';
    $('#header').animate({top: dist}, 500);
    $('.header_control').toggle(); // both at once
});​ 
```

从您的代码示例中很难知道，但您甚至可以`.animate(...)`用简单的方法替换该方法[`.slideToggle()`](http://api.jquery.com/slideToggle/)：

```
$('.header_control').click(function() {
    $('#header').slideToggle(500);
    $('.header_control').toggle(); // both at once
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:04:23.713

```
$('#open_header, #close_header').on('click', function(e) {
    var q = this.id=='open_header';
    $('#header').animate({ top: q?'+':'-'+'=150px' }, 500);
    $(this).toggle();
    $('#'+(q?'close':'open')+'_header').toggle();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T19:05:29.823

```
$('#close_header, #open_header').click(function() {
    var isClose = this.id == 'close_header';
    var minPlus = isClose ? '-' : '+';
    $('#header').animate({ top: minPlus + '=150px' }, 500);
    $(this).toggle();
    $('#' + isClose ? 'open_header': 'close_header').toggle();
}); 
```

# objective-c - 内存泄漏 JSONKit iOS

> ID：13183798
> 
> 赞同：1
> 
> 时间：2012-11-01T19:03:00.810
> 
> 标签：objective-c, ios, cocoa-touch, jsonkit

我在我的应用程序中使用 JSONKit，但是当我在 Xcode 中单击分析时，我在 JSONKit.m 中遇到 2 个问题：

问题一：

![第一期](../Images/6976fcdea6c06ab8fec183a03ca08300.png)

问题 2：

![第 2 期](../Images/3871a5f8399883cbbe1f3237fbbb940c.png)

**我**应该对此做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:09:56.787

我想那些不是实际的内存泄漏。这两种方法的名称中都有“创建”，我认为这是为了遵循[核心基金会创建规则](https://developer.apple.com/library/mac/documentation/CoreFOundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html#//apple_ref/doc/uid/20001148-103029)。我猜分析器只是应用了 Objective-C 约定，其中只有变体 'new'、'alloc'、'copy' 和 'retain' 应该返回拥有的引用。

这些是明确的 C 函数而不是 Objective-C 方法；我猜分析器正在应用 Objective-C 规则，因为正在返回 Objective-C 对象，尽管因为故意忽略了常规约定而令人困惑。

# java - 使用 cdi 注入缓存的实例

> ID：13183804
> 
> 赞同：2
> 
> 时间：2012-11-01T19:03:30.543
> 
> 标签：java, jakarta-ee, cdi, weld

我想使用 @Inject 向 CDI 应用程序公开由外部框架管理的实例。这些实例必须由其他框架提供，因为它们的生命周期基于各种缓存策略。

例如：同一实例在同一线程范围内可见，可能存在于许多请求范围内，会话范围不适用。似乎我需要定义一个针对这些实例的新范围？

做这个的最好方式是什么？扩展，生产者方法可以吗？

我几乎可以使用以下方法使用生产者方法：

```
@Inject
@CustomInject
FwObject obj;

@Produces
@CustomInject
FwObject createConfig(InjectionPoint p) {
  return (FwObject) ctx.get((Class<?>) p.getType());
} 
```

但这迫使我明确生成的类型，这是不可能的，因为没有通用的框架接口。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:13:01.070

*也许*使用生产者方法，一切都取决于您的需要，但扩展可能是最好的方法。如果您需要使用新的范围（如果您使用 JSF，则对话范围可能会起作用），您肯定需要创建一个扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T14:08:09.383

我想我通过创建自定义范围解决了这个问题。下面的文章真的很有帮助：

*   [http://www.verborgh.be/articles/2010/01/06/porting-the-viewscoped-jsf-annotation-to-cdi/](http://www.verborgh.be/articles/2010/01/06/porting-the-viewscoped-jsf-annotation-to-cdi/)

这是我如何解决它的非常简短的描述。

**创建自定义范围注释。**

```
import javax.enterprise.context.NormalScope;
@Retention(java.lang.annotation.RetentionPolicy.RUNTIME)
@Target({ ElementType.TYPE, ElementType.METHOD })
@NormalScope
public @interface CustomScope {
} 
```

**创建自定义上下文。**

```
import javax.enterprise.context.spi.Context;
public class CustomContext implements Context {
  private MyFw myFw = .... ;

  @Override
  public Class<? extends Annotation> getScope() {
    return CustomScope.class;
  }
  @Override
  public <T> T get(Contextual<T> contextual, CreationalContext<T> creationalContext) {
    Bean bean = (Bean) contextual;
    return (T) myFw.get(bean.getBeanClass());
  }
  @Override
  public <T> T get(Contextual<T> contextual) {
    Bean bean = (Bean) contextual;
    return (T) myFw.get(bean.getBeanClass());
  }
  @Override
  public boolean isActive() {
    return true;
  }
} 
```

**创建扩展并注册上下文。**

```
import javax.enterprise.inject.spi.Extension;
public class CustomContextExtension implements Extension {
  public void afterBeanDiscovery(@Observes AfterBeanDiscovery event, BeanManager manager) {
    event.addContext(new CustomContext());
  }
} 
```

**注册分机。**

将 CustomContextExtension 添加到 META-INF/javax.enterprise.inject.spi.Extension

**将 CustomScope 添加到框架对象。**

```
@CustomScope
public class FwObject { ... } 
```

**在需要的地方使用 @Inject 注入 FwObject。**

```
public class MyService {
  @Inject
  FwObject obj;
} 
```

# iphone - Objective-c 改变给定文本的字体

> ID：13183805
> 
> 赞同：0
> 
> 时间：2012-11-01T19:03:36.680
> 
> 标签：iphone, objective-c, string

我正在开发一个小 iphone 应用程序。我正在尝试更改用户输入的文本的字体和颜色。他们输入一些东西，然后单击一个按钮，字体或颜色就会改变并显示出来。我似乎无法在网上找到任何示例代码。任何人都应该我如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:07:33.857

如果您详细说明存储文本和显示文本的位置，我可以更具体，但这是将字体更改应用于标签的基本示例。

```
[myLabel setFont:[UIFont fontWithName:@"someFontName" size:19]]; 
```

编辑：

```
- (IBAction)changeFont:(UIButton *)sender
{
    [myLabel setText:myTextField.text];
    [myLabel setFont:[UIFont fontWithName:@"someFontName" size:19]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:07:44.333

这取决于您要使用哪种界面来显示更改后的字体/颜色的文本。A[`UITextField`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextField_Class/Reference/UITextField.html)有一个`font`属性和一个`textColor`属性，因此您可以更改它们。对于可能显示文本的其他地方也是如此。

# c# - C#存储过程反复返回-1

> ID：13183806
> 
> 赞同：6
> 
> 时间：2012-11-01T19:03:38.300
> 
> 标签：c#, stored-procedures, sql-server-2008-r2

我在 SQL Server 上反复测试了这个#blankety-blank# 存储过程，它返回 0 或行数，但在 C# 中我总是得到 -1。我已经调试这个#blank# 东西几个小时了，而且总是-1。

这是存储过程代码。

```
Create procedure [dbo].[sp_enter_new_student] 
    @Prenom_detudiant [varchar](50)  = NULL, 
    @nom_detudiant [varchar](50)  = NULL,
    @nationalite_detudiant [varchar](40)  = NULL,
    @langue_parle [varchar](15)  = NULL,
    @nombre_denfants [int] = NULL,
    @sexe_detudiant [char](1) = NULL,
    @program_pk [int] = NULL,
    @Numero_detudiant int = NULL
As 
Declare @numOfRowsBefore int = 0; 
declare @numOfRowsAfter int = 0; 
declare @Error int = -100; 
BEGIN  
    SET NOCOUNT ON; 
    select @numOfRowsBefore = COUNT(*) from tbl_students where Numero_detudiant = @Numero_detudiant; 

    if (@numOfRowsBefore > 0)
    begin
        Print "Student already exists, Insertion will fail!";
        Print "Insertion Failure ! " + CONVERT(varchar(10), @numOfRowsBefore);
        return @numOfRowsBefore; -->  -1 indicates insertion failure
    End
    else if (@numOfRowsBefore = 0)
    begin
        Print "Student doesn't exists, Insertion will be Success!";
        Print "Insertion Success ! " + CONVERT(varchar(10), @numOfRowsBefore);
        return @numOfRowsBefore; -->  -1 indicates insertion failure
    End

END 
```

* * *

这是一个 C# 代码

* * *

```
public int enregistreNouveauEtudiant(string Prenom_detudiant, string nom_detudiant, string nationalite_detudiant, string langue_parle, string nombre_denfants, string sexe_detudiant, string program_pk, string Numero_detudiant)
{
    int numberOfRowsInserted = 0;
    //try
    //{ 

    SqlConnection connection = this.GetConnection();
    SqlCommand insertStudentCommand = new SqlCommand("sp_enter_new_student", connection);
    connection.Open();
    insertStudentCommand.CommandType = CommandType.StoredProcedure;

    //insertStudentCommand.Parameters.Add("@ID", SqlDbType.Int);
    //insertStudentCommand.Parameters["@ID"].Direction = ParameterDirection.Output;

    insertStudentCommand.Parameters.Add("@Prenom_detudiant", SqlDbType.VarChar, 50).Value = Prenom_detudiant;
    insertStudentCommand.Parameters.Add("@nom_detudiant", SqlDbType.VarChar, 50).Value = nom_detudiant;
    insertStudentCommand.Parameters.Add("@nationalite_detudiant", SqlDbType.VarChar, 40).Value = nationalite_detudiant;
    insertStudentCommand.Parameters.Add("@langue_parle", SqlDbType.VarChar, 15).Value = langue_parle;
    insertStudentCommand.Parameters.Add("@nombre_denfants", SqlDbType.Int).Value = nombre_denfants;
    insertStudentCommand.Parameters.Add("@sexe_detudiant", SqlDbType.Char, 1).Value = sexe_detudiant;
    insertStudentCommand.Parameters.Add("@program_pk", SqlDbType.Int).Value = program_pk;
    insertStudentCommand.Parameters.Add("@Numero_detudiant", SqlDbType.Int).Value = Numero_detudiant;

    numberOfRowsInserted = insertStudentCommand.ExecuteNonQuery();

    connection.Close();

    return numberOfRowsInserted;
} 
```

任何人都可以看看这个问题吗？我也使用了 try 和 catch 块，在这种情况下它绝对没用。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T19:06:30.980

您应该在您的 c# 代码中使用`ExecuteScalar`而不是`ExecuteNonQuery`

并在你的 sql 代码中使用 `SELECT`而不是`return`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T19:36:35.133

来自 Microsoft 文档（[此处](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)）：

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

请注意，由于您的命令 ("sp_enter_new_student") 是一个隐式 EXECUTE 命令，它既不是 UPDATE、INSERT 也不是 DELETE，因此将始终返回 -1。

如果要向程序返回单个值，一种方法是使用`ExecuteScalar`，然后`SELECT @numOfRowsBefore;`在存储过程中使用 a 返回值，而不是使用`Return`语句。

* * *

但是，如果您想保留使用 SQL`Return`语句的方法，那么您可以通过在您的 c# 代码中添加这样的行来做到这一点：

```
SqlParameter retval = insertStudentCommand.Parameters.Add("retval");
retval.Direction = ParameterDirection.ReturnValue;

insertStudentCommand.ExecuteNonQuery();
numberOfRowsInserted = (int)insertStudentCommand.Parameters["retval"].Value; 
```

（我认为这可行，但我现在无法测试）

# c# - 将用户控件加载到 tabcontrol

> ID：13183812
> 
> 赞同：0
> 
> 时间：2012-11-01T19:04:00.230
> 
> 标签：c#, wpf

我想将两个用户控件放入选项卡控件中，但只有当我单击一个按钮时，用户控件才会加载数据

```
<Button Click="Button_Click_1" />
<Button Click="Button_Click_2" />
<TabControl>
    <ItemsControl Name="tab1">
        <local:UserControl1 Loaded="UserControl1_Loaded"></local:UserControl1>
    </ItemsControl>
    <ItemsControl Name="tab2">
         <local:UserControl1 Loaded="UserControl2_Loaded"></local:UserControl1>
    </ItemsControl>
</TabControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:11:03.217

```
private class  TabSource 
{
   private string dataForTab = string.empty; 
   public string DataForTab { get { return dataForTab; } } 
   public void GetRealData()
   {
      dataForTab = "Real Data";
      NotifyPropertyChanged("DataForTab");
   }
}

public Button_Click_2(...)
{
    MyTabSource.GetRealData();       
} 
```

# sql - 对连接表上的列进行明确求和？

> ID：13183817
> 
> 赞同：4
> 
> 时间：2012-11-01T19:04:16.203
> 
> 标签：sql, postgresql, distinct, aggregate-functions

这是一个简单的问题，我不确定这里是否可行。这是问题所在：

=> [http://sqlfiddle.com/#!12/584f1/7](http://sqlfiddle.com/#!12/584f1/7)

解释：

*   票属于参加者
*   与会者有收入
*   我需要按部分对票进行分组并获得总收入。
*   这会重复计算与会者，因为 2 张门票可以属于同一与会者，因此会重复计算。我想获取收入的总和，但只计算参加者一次。

在我的 sqlfiddle 示例中，我希望看到：

```
section | total_revenue
------------------------
A       | 40            <= 40 is correct, but I'm getting 50...
B       | null
C       | 40 
```

***我想在不使用子查询的情况下解决这个问题。我需要一个可扩展的解决方案，允许我在单个查询中对不同连接上的多个列执行此操作。因此，无论我如何做到这一点，我都愿意接受建议。***

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:23:42.343

这是使用的版本`row_number()`：

```
select section,
  sum(revenue) Total
from 
(
  select t.section, a.revenue,
    row_number() over(partition by a.id, t.section order by a.id) rn
  from tickets t
  left join attendees a
    on t.attendee_id = a.id
) src
where rn = 1
group by section
order by section; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!12/584f1/18)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T22:24:26.883

同样，**没有子查询**：

关键元素是添加[**`PARTITION BY`**](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SYNTAX-WINDOW-FUNCTIONS)到窗口函数：

```
SELECT DISTINCT
       t.section
--    ,sum(count(*))       OVER (PARTITION BY t.section) AS tickets_count
      ,sum(min(a.revenue)) OVER (PARTITION BY t.section) AS atendees_revenue
FROM   tickets t
LEFT   JOIN attendees a ON a.id = t.attendee_id
GROUP  BY t.attendee_id, t.section
ORDER  BY t.section; 
```

[**-> sqlfiddle**](http://sqlfiddle.com/#!12/6e522/1)

在这里，您`GROUP BY t.attendee_id, t.section`在通过窗口函数运行结果之前。并`PARTITION BY t.section`在窗口函数中使用，因为您希望这次按部分分区的结果。

如果您也想计算票数，请取消注释第二行。

否则，它的工作原理类似于[我对您上一个问题的回答](https://stackoverflow.com/a/13169627/939860)。即，其余的解释适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:20:43.160

你可以这样做：

```
select t.section, sum(d.revenue)
from 
(
  SELECT DISTINCT section, attendee_id FROM tickets
) t
left join attendees d on t.attendee_id = d.id
group by t.section
order by t.section; 
```

# javascript - 动态编写的脚本不起作用

> ID：13183825
> 
> 赞同：0
> 
> 时间：2012-11-01T19:05:07.003
> 
> 标签：javascript, jquery, html, dynamic-html

我已经用头撞墙了大约 4 个小时，现在试图弄清楚为什么这不起作用。我有一个程序需要根据 SQL 查询的结果数量动态编写代码。

我正在使用一个名为 EasyBox 的 jquery 灯箱。当它像这样硬编码时，它可以工作：

```
<body id="body" onload="bodyLoaded()">
<a id="link" href="#test" title="Snowflake" rel="lightbox">Hello</a>
<div id="test" style="display:none; width:320px; height:240px">
    <p>Test Content</p>
</div>    
<script type="text/javascript">
    function bodyLoaded(){
        $('#link').attr('onclick', 'logText("Hello")');
    }
    function logText(message){
        console.log(message);   
    }
</script> 
```

但是，当我像这样动态编写链接时，EasyBox 弹出窗口不会触发。

```
<body id="body" onload="bodyLoaded()">
<div id="test" style="display:none; width:320px; height:240px">
    <p>Test Content</p>
</div>
<script type="text/javascript">
    function bodyLoaded(){
        document.getElementById('body').innerHTML+="<a id='link' href='#test' rel='lightbox'>Hello</a>";
        $('#link').attr('onclick', 'logText("Hello")');
    }
    function logText(message){
        console.log(message);   
    }
</script> 
```

任何想法为什么这会起作用？我在这里拉头发！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:27:07.763

我不明白你为什么不只是使用 jQuery 来完成所有这些工作。

```
$(function(){
   $('#body').prepend("<a id='link' href='#test' rel='lightbox'>Hello</a>");
   $('#link').click(function(){
      alert("Hello");
   });
}); 
```

如果 .click() 不起作用，您也可以尝试 .live()。两者都在 jsfiddle 中为我工作（http://jsfiddle.net/LZxrL/ 和[http://jsfiddle.net/LZxrL/1/](http://jsfiddle.net/LZxrL/1/)）。

另外，当body元素本身的id是'body'时，为什么大家一直说没有id='body'的元素。显然，他想在正文中添加一个链接。

编辑：我刚刚阅读了您对另一篇关于灯箱问题的评论，而不是点击事件。那确实改变了事情。我对该插件不够熟悉，无法权威地发表评论，但我怀疑该插件在页面加载时会查找 rel="lightbox" 并且之后添加的任何元素都不会被捕获。大多数插件都有手动方法，例如：

```
$('#link').lightbox(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T19:10:21.210

我没有看到您在脚本中加载动态标签的位置。bodyLoaded() 函数正在寻找任何带有 id='body' 的东西，在你的第二个代码块中，我没有看到任何带有该 id 标签的东西。

# java - Flex远程对象到java类实例化和多线程

> ID：13183829
> 
> 赞同：0
> 
> 时间：2012-11-01T19:05:19.547
> 
> 标签：java, apache-flex

在阅读了关于 Java Servlet 的相同主题之后：

[servlet 是如何工作的？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading)

我开始寻找有关这如何在 flex 上用于 LCDS 或 Blaze 远程对象的文档，但到目前为止没有任何运气......

那么，有没有人知道好的文档或有足够的经验来回答这个问题？

我目前正在使用 flash builder 4.6、ADEP Data Services for Java EE 4.6 和 JBoss 7.1。

编辑：我将说明我对远程对象的一些疑问：

如果作用域是应用程序，应用程序实例化的类是否像 java servlet 一样启动？不同作用域上的并发行为是什么？每次调用时是否创建和销毁请求作用域对象？静态成员呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:24:58.473

我的经验是有限的，并且使用 GraniteDS（据我了解，它的工作方式与 BlazeDS 非常相似）。AMF 调用命中一个 servlet（我认为它称为 MessageBrokerServlet）。此 servlet 将调用配置的服务。AMF servlet 与任何其他 servlet 一样工作，并遵循相同的生命周期。您的服务类不遵循此生命周期，默认情况下由 BlazeDS 管理。[您可以在此处](http://livedocs.adobe.com/blazeds/1/blazeds_devguide/help.html?content=rpc_remoteobject_3.html)阅读有关目标范围（BlazeDS 公开的服务）的更多信息。您可以配置三个范围之一（请求范围、应用程序范围或会话范围）希望这会有所帮助。

# bash - bash 顺序执行时间线

> ID：13183830
> 
> 赞同：2
> 
> 时间：2012-11-01T19:05:21.467
> 
> 标签：bash, sh

假设我输入以下命令：

```
/usr/local/bin/wget -O "/storehere.xml" "download1" && ./parse_xml;/usr/local/bin/wget -O "/storehere.xml" "download2" && ./parse_xml; 
```

据我了解，shell 将在下载并存储 download1 后执行 parse_xml。但是，我不清楚的是什么时候会执行下载 2 的下一个 wget 命令？parse_xml 执行完成后（当然是第一次）？或者在请求执行 parse_xml 之后？如果答案是后者，我想知道一种方法让我的脚本在执行下一个 wget 之前等待来自 parse_xml 的返回码。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:17:57.120

在您的情况下，在调用下一个命令之前，每个命令都会被调用并成功（或失败）完成。

**解释：**

*   `&&`在一行上划分不同命令的符号表示“如果 && 之前的命令执行成功（返回代码`$?`为零），则执行 && 之后的命令”
*   在一行上划分不同命令的`;`符号表示“运行';'之前的命令，然后是它之后的命令，无论第一个命令是否成功。

要对此进行测试，您可以在提示符下尝试以下 2 个不同的命令：

```
# wget will fail in both cases:

# case 1, with &&
$ wget hello && ls

# case 2, with ;
$ wget hello; ls 
```

# gridview - 将动态 css 类添加到 CGridView 中的每一行/单元格

> ID：13183831
> 
> 赞同：4
> 
> 时间：2012-11-01T19:05:22.050
> 
> 标签：gridview, yii

我是一名学生，正在从事我的实际项目。它是一个网络应用程序，它跟踪谷歌关键词的排名并将它们显示为一个表格。现在我想把每一行都涂成绿色，如果当前排名比以前好，红色如果排名下降等等。我如何在 Yii 中用 CGridView 实现这个？目前我有以下解决方案。在 ControllerClass 我有一个功能

```
public function getCssClass($data)
{
    $cssClass;

    if('($data->current_pos>$data->prev_pos) || ($data->current_pos===null && $data->prev_pos!==null)')
    {
        $cssClass='rdown';
    }
    elseif('$data->current_pos<$data->prev_pos')
    {
        $cssClass='rup';
    }
    else
    {
        $cssClass='requal';
    }

    return $cssClass;
} 
```

在视图中，我将这个函数称为“rowCssClassExpression”：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'keyword-grid',
'dataProvider'=>$keywordDataProvider,
'rowCssClassExpression' => $this->getCssClass($data),
'columns'=>array(
    'keyword_name',
    array(
        'name'=>'current_pos',
        'htmlOptions'=>array('style'=>'text-align: center'),
    ),
    array(
        'name'=>'prev_pos',
        'htmlOptions'=>array('style'=>'text-align: center'),
    ),
    array(
        'name'=>'top_pos',
        'htmlOptions'=>array('style'=>'text-align: center'),
    ),
    'url',
    array(
        'class'=>'CButtonColumn',
        'template'=>'{view}{delete}',
        'viewButtonUrl'=>'Yii::app()->createUrl("/keyword/view", array("id"=>$data->id))',
        'deleteButtonUrl'=>'Yii::app()->createUrl("/keyword/delete", array("id"=>$data->id))',
    ),
),
'nullDisplay'=>'-',
)); ?> 
```

这是我的桌子：

关键字 当前 上一个

关键字 1 7 7

关键字 2 8 10

关键字3 26 20

但是 html 结果是每一行都获得了“rdown”类。我找不到我的错误:-(如果有人可以帮助我并指出正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T19:31:23.243

`'($data->current_pos>$data->prev_pos) || ($data->current_pos===null && $data->prev_pos!==null)'`在你的方法中是一个字符串，它总是`true`. 这`rdown`就是返回的原因。为什么要使用`'`包装条件？

另请注意，[rowCssClassExpression](http://www.yiiframework.com/doc/api/1.1/CGridView#rowCssClassExpression-detail)是一个 PHP 表达式，因此您的方法的结果可能应该用引号引起来：

```
'rowCssClassExpression' => '"' . $this->getCssClass($data) . '"', 
```

不幸的是，这也不起作用，因为模型的实例`$data`是在内部定义的`rowCssClassExpression`（并针对网格的每一行进行评估），而不是在您的视图的上下文中。

作为解决方案，您可以将其创建`getCssClass`为模型的方法。然后你的表达式将如下所示：

```
'rowCssClassExpression' => '$data->getCssClass()', 
```

要为每个特定单元格指定 CSS 类，您还可以查看类的[cssClassExpression](http://www.yiiframework.com/doc/api/1.1/CGridColumn#cssClassExpression-detail)`CGridColumn`。

# file - 如何使用 Erlang 文件：read_file_info 权限/模式信息？

> ID：13183838
> 
> 赞同：2
> 
> 时间：2012-11-01T19:05:39.250
> 
> 标签：file, permissions, erlang

`file:read_file_info/1`状态“文件权限 [是] 总和”和“其他位......可能设置”的 Erlang 文档，没有灌输信心。而且，谷歌在这里不是我的朋友。

我希望在 Linux 机器上采用由 . 返回的模式`file:read_file_info/1`，`33188`并将其转换为更易于人类阅读和/或识别的东西，例如`rw-r--r--`or `644`。

非常感谢任何提示、链接或方向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T21:26:08.473

捷径：

```
io_lib:format("~.8B", [Mode]). 
```

... 或者：

```
io_lib:format("~.8B", [Mode band 8#777]). 
```

对于`Mode = 33204`这两个将分别给你：`["100664"]`和`["664"]`。

漫长的道路：

```
print(Mode) ->
    print(Mode band 8#777, []).

print(0, Acc) when length(Acc) =:= 9 ->
    Acc;
print(N, Acc) ->
    Char = perm(N band 1, length(Acc) rem 3),
    print(N bsr 1, [Char | Acc]).

perm(0, _) ->
    $-;
perm(1, 0) ->
    $x;
perm(1, 1) ->
    $w;
perm(1, 2) ->
    $r. 
```

这个（函数`print/1`）`Mode = 33204`将为您提供以下结果：`"rw-rw-r--"`.

* * *

如果有什么不清楚的地方，我会尝试在我提供的片段背后解释基本的东西。

正如@macintux 已经提到的那样`33204`，实际上是八进制数 100664 的十进制表示。这三个最低的八进制数字（三个八进制数字 ( )。这就是为什么 short way 这么短的原因——你只需告诉 erlang 转换为字符串，就好像它是八进制数一样。`664``band``8#777``Mode`

您提到的第二种表示（例如`rw-rw-r--`，`ls`吐出的东西）很容易从`Mode`数字的二进制表示中重现。请注意，三个八进制数字将给您正好九个二进制数字 ( `8#644 = 2#110110100`)。实际上，这是`rwxrwxrwx`每个元素替换为`-`if 对应数字 equals的字符串`0`。如果 digit 是`1`元素保持不变。

所以有更清洁的方法来实现这一点：

```
print(Mode) ->
    print(Mode band 8#777, lists:reverse("rwxrwxrwx"), []).

print(0, [], Acc) ->
    Acc;
print(N, [Char0 | Rest], Acc) ->
    Char = char(N band 1, Char0),
    print(N bsr 1, Rest, [Char | Acc]).

char(0, _) ->
    $-;
char(1, C) ->
    C. 
```

* * *

我希望你明白了。无论如何，如果您有疑问，请随时在评论中提出任何问题。

# javascript - 使“this”关键字引用调用对象（javascript）

> ID：13183843
> 
> 赞同：0
> 
> 时间：2012-11-01T19:06:15.737
> 
> 标签：javascript, html, this

我已经阅读了一些关于此的主题，但是，我仍然无法弄清楚。我需要的只是让'this'语句引用正在调用函数的对象，而它似乎是在引用窗口..

我的功能如下所示：

```
function  bckClr(clr){
var elmnt=this;
elmnt.style.background-color=clr;
} 
```

我这样称呼它：

```
< div > onmouseover="bckClr(#ff0000)">Lorim ipsum dolor sit amet.. < /div > 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T19:08:26.570

这样做：

```
<div onmouseover="bckClr(this, '#ff0000')">Lorim ipsum dolor sit amet.. </div> 
```

进而：

```
function  bckClr(elmnt, clr){
   elmnt.style.backgroundColor=clr;
} 
```

**更新：**
Pranav Kapoor 指出，使用 CamelCase 对 sytle 属性进行了更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T19:16:37.867

将您的 javascript 与您的标记分开：

```
<div id="thediv">Lorim ipsum dolor sit amet.. </div> 
```

和：

```
var bckClr = function (element, color) {
    // notice the property is camel cased, not hyphenated
    element.style.backgroundColor = color;
};

document.getElementById('thediv').onmouseover = function () {
    bckClr(this, '#ff0000');
}; 
```

[http://jsfiddle.net/L9DRF/3/](http://jsfiddle.net/L9DRF/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:14:01.270

使用事件侦听器而不是内联处理程序。

HTML：

```
<div id="mydiv">Lorim ipsum dolor sit amet.. </div> 
```

JS：

```
function  bckClr(elmnt, clr){
   elmnt.style.backgroundColor=clr;
}
document.getElementById("mydiv").addEventListener("mouseover",function(){bckClr(this, '#ff0000');}) 
```

# ffmpeg - ffmpeg 更改段元数据

> ID：13183845
> 
> 赞同：3
> 
> 时间：2012-11-01T19:06:18.620
> 
> 标签：ffmpeg, metadata, mp4, segment

我想知道是否有可能在创建片段时更改 ffmpeg 中视频片段的元数据。我知道通过使用“-metadata”标签，您可以更改-i 输入视频的元数据，但是如果-i 输入视频被“-f 段”选项分割成不同的段，那么你怎么办？在分割 -i 输入视频时更改结果片段的元数据？我知道可以在分段完成后更改元数据，但这并不是很有用，因为我希望在输入视频被分段时实时流式传输分段。为了更好地描述：

```
ffmpeg -f video4linux2 -s wvga -t ${CAPTURE_DURATION} -i "/dev/video0" -r 30 \
-vcodec ${VID_CODEC} -s:v 640x480 -b:v 80k -keyint_min 30 -g 30 \
-sc_threshold 0 -map 0 -flags -global_header -qcomp 0.8 \
-qmin 10 -qmax 51 -qdiff 4 -f segment -segment_time ${SEG_TIME} \
-segment_format ${SEG_FORMAT} -metadata START=0 -y "${LOCATE}${OUTPUT}%01d.${EXTENSION}" 
```

基本上我正在做的是从标准视频输入中获取视频并对其进行分段。创建视频片段后，我可以通过将它们全部放入 VLC 播放列表来测试视频，当片段格式为“mp4”时，每个视频片段之间存在显着延迟，VLC 直到它才会开始视频片段已再次播放该片段在原始视频中的时间。例如，如果我有一个 30 秒的视频，并将其分成 5 秒的片段，VLC 将立即播放第 1 片段，但在第 1 片段播放完毕后，它会等待 5 秒再播放第 2 片段。这样做是因为第 2 段的开始时间元数据为 5 秒，因此 VLC 认为它必须等待 5 秒才能播放第 2 段。我想知道的是如果有' 一种告诉 ffmpeg 在创建段时将段开始时间元数据设置为 0 秒的方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:32:14.057

根据源代码，有一个标志应该做你想做的事：

```
{ "reset_timestamps", "reset timestamps at the begin of each segment",
OFFSET(reset_timestamps), AV_OPT_TYPE_INT, {.i64 = 0}, 0, 1, E } 
```

而不是`-metadata START=0`使用`-reset_timestamps 1`，您的所有片段将立即开始播放。

# html - Internet Explorer 9 中的框架：未正确加载 CSS 样式

> ID：13183847
> 
> 赞同：1
> 
> 时间：2012-11-01T19:06:28.653
> 
> 标签：html, css, dns, internet-explorer-9, frame

[我有一个 URL 为http://myapp.herokuapp.com/welcome.php](http://myapp.herokuapp.com/welcome.php)的网站，我将域 www.example.com 作为 FRAME 重定向到该 PHP 页面。当我尝试从 IE9 加载 www.example.com 时，我收到此错误：

```
CSS3111: @font-face encountered unknown error. abeatbyKai.TTF 
```

该字体放在这里： http: [//myapp.herokuapp.com/common/fonts/abeatbyKai.TTF](http://myapp.herokuapp.com/common/fonts/abeatbyKai.TTF)

我的 CSS 文件是从 welcome.php 调用的，如下所示：

```
<link rel="stylesheet" href="css/iflikeu.welcome.0.1.css" type="text/css" /> 
```

这是我的 CSS 代码：

```
@font-face {
    font-family: 'abeat';
    src: url(../common/fonts/abeatbyKai.TTF);
} 
```

如果我输入`src: url('http://myapp.herokuapp.com/common/fonts/abeatbyKai.TTF');`仍然不起作用。

另一个例子：这张图片是从welcome.php中加载的，像这样

```
<a id="enLang" class="btn lang_flag" href="#" onclick="changeLanguage('userLangWelcome','en');"><img src="common/images/flags/en.png"/></a> 
```

在 CSS 文件中，代码如下：

```
.lang_flag img {
    width: 25px;
    height: 12px;
    vertical-align: middle;
} 
```

但是，不显示图像。只需按钮 ( `btn`)。

**This error only occurs in IE when there is a FRAME redirection.** If I load directly [http://myapp.herokuapp.com/welcome.php](http://myapp.herokuapp.com/welcome.php) from IE it works, and www.example.com from any other browser works as well.

Any ideas? Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T14:35:02.970

IE doesn't allow fonts to be loaded from external domains by default. See [this thread](https://stackoverflow.com/questions/9705327/font-face-ie-problems).

Maybe you need to actually set the `Access-Control-Allow-Origin HTTP Header` on the domain that contains the frame.

On a side note, if you are only using a frame because you want your heroku app to show on your own domain name, you should take a look at the [Custom Domains](https://devcenter.heroku.com/articles/custom-domains) Heroku article -- you could just point your domain name at your heroku app.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T19:10:05.327

try this, IE is such a pain in the ass when it comes to anything:

```
@font-face {
font-family: 'FFFTusjBold';
src: url('FFF_Tusj-webfont.eot');
src: url('FFF_Tusj-webfont.eot?#iefix') format('embedded-opentype'),
     url('FFF_Tusj-webfont.woff') format('woff'),
     url('FFF_Tusj-webfont.ttf') format('truetype'),
     url('FFF_Tusj-webfont.svg#FFFTusjBold') format('svg');
font-weight: normal;
font-style: normal;

}
<!--[if IE]>
font-family: 'FFFTusjBold';
src: url('FFF_Tusj-webfont.eot');
url('FFF_Tusj-webfont.eot?#iefix') format('opentype');
}
--> 
```

# enums - 将 DataContract 标记为包含在 xsd 文件中，即使 OperationContract 没有引用它

> ID：13183853
> 
> 赞同：1
> 
> 时间：2012-11-01T19:06:49.030
> 
> 标签：enums, xsd, svcutil.exe

我有一个包含枚举的类，我想将它包含在 svcutil 生成的 xsd 文件中，但是任何 OperationContract 都引用了该枚举或该类。即使它没有被引用，我如何标记它以包含在内？

# javascript - jqGrid 如何恢复默认排序？

> ID：13183855
> 
> 赞同：0
> 
> 时间：2012-11-01T19:07:03.493
> 
> 标签：javascript, sorting, jqgrid

简单的问题，所以我会保持简短：

对列启用排序后，用户可以单击列标题并按升序或降序对该列进行排序。有没有办法选择“默认”或“原始”排序顺序？

他们可以通过成功猜测默认列排序顺序是什么并以正确的顺序单击该列（例如，暴露的 ID 字段）来模仿这种行为，但是没有可用的“默认”顺序似乎违反直觉。 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:12:15.793

您应该使用 option `sortname: ""`，顺便说一下，这是默认的。您可以设置它 per`setGridParam`和 trigger `reloadGrid`。

# jquery - jQuery .get('变量网址')

> ID：13183863
> 
> 赞同：0
> 
> 时间：2012-11-01T19:07:09.660
> 
> 标签：jquery

我是淹死在一杯水里还是有什么棘手的地方？

```
$.get('content.html', function (data) {                
            $('#flyout').menu({ content: data, flyOut: true });
        }); 
```

事情是 content.html 会因用户而异。有时是 content.html，有些是 content2.html。

如何在 .get 的 url 部分使用变量？假设`var content= '<%=_content%>'`持有所需的价值

我将值存储在 C# 变量和 asp:Label 中。

尝试了几件事，但我找不到方法。我也试图提醒整个事情，但它给了我对象，将 .et 更改为 .ajax 并且它也不起作用，我一定错过了一些东西。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T19:09:15.627

由于它已经在变量中，请使用：

```
var content= '<%=_content%>';
$.get(content, function (data) {                
    $('#flyout').menu({ content: data, flyOut: true });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:10:21.257

```
$.get("<%= _content %>", function (data) {                
    $('#flyout').menu({ content: data, flyOut: true });
}); 
```

# php - findall 中的 Yii 计数器查询

> ID：13183865
> 
> 赞同：0
> 
> 时间：2012-11-01T19:07:15.860
> 
> 标签：php, yii

我有以下查询

```
UserLogin::model()
-> with(array(
    'Provider'=> array(
        'select'=>'name'
    )
))
-> findAll(array(
    'select' => 'count(t.id) as count ',
    'group'=>'provider_id',
    'order'=>'provider_id'
)); 
```

我的观点是

```
<?php foreach($providerCounts as $providerCount): ?>
    <tr>
        <td><?php echo $providerCount['Provider']['name']; ?></td>
        <td><?php echo $providerCount['count']; ?></td>             
    </tr>
<?php endforeach; ?> 
```

这是关系

```
'Provider'=>array(self::BELONGS_TO, 'Provider', 'provider_id'), 
```

我收到错误

> 未定义属性“UserLogin.counts”。

不同模型中的相同查询正在工作。

现在我有两个问题

*   为什么查询不起作用
*   我如何在 yii 中调试此类错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:23:51.703

你需要有 UserLogin.count 属性，这样当你`as`在 AR 请求中使用时，Yii 可以将返回的 DB 值分配给模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:23:44.810

您需要指定公共财产数量

```
class UserLogin extends CActiveRecord
{
    public $count = 0;

    public function rules() {
        // ...
        array('count', 'safe'),
        // ...
    }
} 
```

对于调试使用 xdebug for php + ext for FireFox 用于调试 php

也可以使用`yii-debug-toolbar`（在 yii 分机中搜索）

# perl - Rackspace Cloud API 的 Perl 绑定和设置/获取对象元数据的问题

> ID：13183867
> 
> 赞同：3
> 
> 时间：2012-11-01T19:07:23.353
> 
> 标签：perl, api, file, rackspace-cloud

使用 Rackspace Cloud API [ [Github](https://github.com/Htbaa/WebService-Rackspace-CloudFiles) ]的非官方[Perl 绑定](http://search.cpan.org/~ckras/WebService-Rackspace-CloudFiles-1.04/lib/WebService/Rackspace/CloudFiles.pm)，我无法终生设置或检索给定对象的元数据。

我可以成功地从云中拉下文件，但是当我`object_metadata`按照文档中的定义调​​用时，我收到一个错误，抱怨`uninitialized value`. 我可以通过云文件管理器验证`Status`在元数据中设置了一个值。我什至尝试过检查`X-Object-Meta-Status`（没有成功）。

相关代码如下：

```
# authentication
# set $container to pre-made container
my @files = $container->objects(prefix => 'tainted/')->all;
FILE: foreach my $file(@files) {

  # throws undefined // have tried capitalized and not, quotes and none
  next FILE if $file->object_metadata->{'status'} != '-1';

  # download file from object & do stuff with it

  # does not update object in cloud (not sure if anything id done locally)
  $file->object_metadata({ status => $status });

} 
```

就像我说的，对象被成功检索，我只是无法查看给定文件的元数据。我已经玩过上面的一些变体，但是对新方法的每次测试都会花费带宽（钱！）。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:03:43.833

我感觉根本没有设置元数据。让我们看一下使用 Moose 构建的[WebService::Rackspace::CloudFiles::Object](https://github.com/Htbaa/WebService-Rackspace-CloudFiles/blob/master/lib/WebService/Rackspace/CloudFiles/Object.pm#L42)：

```
has 'object_metadata' => (
    is => 'rw',
    isa => 'HashRef',
    required => 0,
    default => sub {
        return {};
    }
); 
```

所以有一个可选属性`object_metadata`，可以使用内置选择器检索。伟大的！

返回的对象是`$container->objects`在[WebService::Rackspace::CloudFiles::Container](https://github.com/Htbaa/WebService-Rackspace-CloudFiles/blob/master/lib/WebService/Rackspace/CloudFiles/Container.pm#L143)中创建的，如下所示（截图）：

```
foreach my $bit (@bits) {
  push @objects,
    WebService::Rackspace::CloudFiles::Object->new(
    cloudfiles => $self->cloudfiles,
    container => $self,
    name => $bit->{name},
    etag => $bit->{hash},
    size => $bit->{bytes},
    content_type => $bit->{content_type},
    last_modified => $bit->{last_modified},
  );
} 
```

所以如果我没看错的话，这个调用中没有`object_metadata`属性，这很好，因为它是可选的。但是如果它没有设置，那么你检索一个空的 hashref 是有意义的，不是吗？

我会说你可能想自己修补它。：-/

* * *

我做了更多的挖掘：在[CloudFiles 文档](http://docs.rackspace.com/files/api/v1/cf-devguide/content/Retrieve_Object-d1e1856.html)中，它说元数据在结果的 HTTP 标头中返回。[关于如何](http://docs.rackspace.com/files/api/v1/cf-devguide/content/Retrieve_Object_Metadata-d1e2301.html)自行检索元数据的文档很好地解释了它是如何传输的。但不幸的是，模块中肯定没有解析。

# android - 联系人 LOOKUP_KEY 的持久性如何？

> ID：13183875
> 
> 赞同：1
> 
> 时间：2012-11-01T19:07:52.117
> 
> 标签：android, android-contacts, lookup

在我的应用程序中，我想将联系人与其他数据相关联。对联系人的引用必须尽可能持久，否则关联的数据就会变得垃圾。

首先，我应该使用 ContactsContract.Contact.LOOKUP_KEY 访问聚合联系人是否正确？

假设上述情况，那么 LOOKUP_KEY 的持久性如何？我想假设只要至少有一个基础原始表仍然存在，它就会保持有效。特别是，我希望它是持久的，无论用户是否： - 更改任何原始表中的名称 - 从原始表中删除它（但不是从所有原始表中） - 将其独立添加到新的原始表中.

我的假设是否有效？如果没有，有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:08:12.277

是的，ContactsContract.Contact 中的任何内容都用于聚合联系人。

只要聚合联系人本身存在，LOOKUP_KEY 就会一直存在。尽可能使用 CONTENT_LOOKUP_URI 对 ContactsContract.Contact 进行查询。

你遇到问题了吗？

# freebase - Freebase currency query

> ID：13183878
> 
> 赞同：2
> 
> 时间：2012-11-01T19:08:10.430
> 
> 标签：freebase

I have a little problem, maybe can you help me. I'm trying to get the "currency features" from freebase. So I tried to do : "/base/schemastaging/person_extra/net_worth": null but, I can't get the value written on freebase (for example, with Madonna, it's 650,000,000). Do you know, why it's not working ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:30:59.317

First of all, as the property path suggests, /base/schemastaging/person_extra/net_worth is just being staged right now so the final property ID will be something else (follow the [mailing list](http://lists.freebase.com/mailman/listinfo/freebase-discuss) to discuss new schema). You should NOT be using this property for anything other than experimentation.

The reason why you don't see the data that you want withe the following query is because this property is a [CVT](http://wiki.freebase.com/wiki/CVT).

```
{
  "id":   "/en/madonna",
  "type": "/base/schemastaging/person_extra",
  "net_worth": null
} 
```

CVT values are complex objects that need to be expanded to access the values that you want. In this case, net_worth is a CVT so that we can record a person's net worth at different points in time.

If you expand your query to include the relevant properties from [/measurement_unit/dated_money_value](http://www.freebase.com/schema/measurement_unit/dated_money_value) you'll see the data that you're after.

```
{
  "id":   "/en/madonna",
  "type": "/base/schemastaging/person_extra",
  "net_worth": {
    "amount":     null,
    "currency":   null,
    "valid_date": null
  }
} 
```

One other issue, that isn't obvious from this example, is that since there can be multiple dated money values, you'll need to make your query more precise so as to get only the latest value. You can do that like this;

```
{
  "id":   "/en/madonna",
  "type": "/base/schemastaging/person_extra",
  "net_worth": {
    "amount":     null,
    "currency":   null,
    "valid_date": null,
    "sort":       "-valid_date",
    "limit":      1,
    "optional":   true
  }
}​ 
```

**Update:** Made net worth an optional property value.

# ruby-on-rails - RSpec 请求对象为零

> ID：13183879
> 
> 赞同：4
> 
> 时间：2012-11-01T19:08:18.167
> 
> 标签：ruby-on-rails, cookies, rspec, capybara

我正在尝试在我的请求规范中测试 cookie：

```
require 'spec_helper'

describe "Cookies"
  it "should set correctly" do
    request.cookies['foo'] = 'bar'
  end
end 
```

但这给了我`undefined method 'cookies' for nil:NilClass`。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T19:24:56.427

在您使用, , ,等方法之一发出 http 请求之前，该`request`对象在您的测试用例中将为零。`get``post``delete``put`

例如，如果您之前`request.cookies['foo'] = 'bar'`使用了`get root_path`.

# sql - 如何对 postegres 中的结果执行按位运算符？

> ID：13183880
> 
> 赞同：4
> 
> 时间：2012-11-01T19:08:19.873
> 
> 标签：sql, postgresql

如果我有几行，并且我想对结果执行按位或，我该如何在 Postgres 9.x 中执行此操作？

例如我的表包含

```
Name col1 col2
--------------
John    1    2
Walter  1    1
Ron     1    2 
```

我知道想要执行 select 语句，以便从列中获取所有（或子集）值的 OR。

例如

```
select [magical statement OR col1] from table
would give me
1

select [magical statement OR col2] from table
would give me
3 
```

我希望你能理解我的意思，我无法弄清楚我想要的正确术语是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:15:52.320

```
select bit_or(col1) from table group by col1; 
```

参考（它可能不存在于您的版本中，因此请查看文档）：

[聚合函数 - PostgreSQL 文档](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)。

# json - ExtJS 4 Panel Grid 不从 URL 加载 JSON - Firefox 和 chrome 不起作用

> ID：13183887
> 
> 赞同：0
> 
> 时间：2012-11-01T19:08:47.497
> 
> 标签：json, extjs

我正在使用 ExtJS 4 并尝试将 JSON 文件加载到面板网格中。参考下面的代码：

```
Ext.onReady(function() {

var myStore = new Ext.data.JsonStore({
    autoLoad: true,
    proxy: {
        type: 'ajax',
        url : 'http://localhost:8180/PatientVisit/grid-patient.json',
        reader: {type: 'json', root: 'patient'}
    },
    fields: [{name: 'PatientId',   type: 'string'}, {name: 'Initial',  type: 'string'}, {name: 'SCStatus',  type: 'string'}, {name: 'V1Status',  type: 'string'}, {name: 'V2Status',  type: 'string'}]
});

var grid = new Ext.grid.GridPanel({
    id: 'gridPanel',
    title     : 'Grid example',
    width     : 250,
    height    : 250,
    renderTo  : 'grid-example',
    store     : myStore,
    columns: [
        {    header: 'Patient ID',
            dataIndex: 'PatientId'
        }, { header: 'Initial', dataIndex: 'Initial'}, 
        { header: 'SCStatus', dataIndex: 'SCStatus'}, 
        { header: 'V1Status', dataIndex: 'V1Status'}, 
        { header: 'V2Status', dataIndex: 'V2Status'}
    ]          
});    

myStore.load();

});

JSON file: 

{"patient":[{"PatientId":"M1000","Initial":"MAS","SCStatus":"Complete","V1Status":"Open","V2Status":"Open"},
      {"PatientId":"M573","Initial":"MTZ","SCStatus":"Complete","V1Status":"Complete","V2Status":"Open"},
      {"PatientId":"M634","Initial":"MTS","SCStatus":"Open","V1Status":"Open","V2Status":"Open"}
      ]} 
```

它在 IE 9 中运行良好。它在 Firefox 16.x 和 Chrome 浏览器中加载一个空网格。如果上面的代码有问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:21:48.133

我解决了这个问题。这是一个跨域 AJAX 调用问题。HTML 文件位于服务器目录之外。我对服务器进行 AJAX 调用以获取 JSON 数据。Firefox 和 Chrome 不允许此调用。IE 允许并且工作正常。

# xml - 具有基于节点数的动态列的 XSLT WordML 表

> ID：13183888
> 
> 赞同：3
> 
> 时间：2012-11-01T19:08:47.967
> 
> 标签：xml, xslt, foreach, xmltable, wordml

我有许多 xml 文件，我试图从中创建一个 WordML 表。每个节点列表中有多个节点，我需要为每个节点创建一列，最多 15 列。但是，如果少于 15 个，则需要对列进行对齐。

名为 NodeList 的模板：

```
<xsl:template match="NodeList">
<xsl:for-each select="NodeRef">
<xsl:sort data-type="number" select="@Position" order="ascending"/>
<xsl:sort data-type="text" select="@Name" order="ascending"/>
<xsl:variable name="documentName" select="concat(@Id, '_Nodes.xml')"/>
<xsl:apply-templates mode="SimpleNode" select="document($documentName)/Node"/>
</xsl:for-each>
</xsl:template> 
```

名为 SimpleNode 的模板：

```
<xsl:template mode="SimpleNode" match="Node">
<!-- Output the Node Table - as template within for-each, 
will output table many times   -->
<xsl:call-template name="SimpleNodeTable"/>
</xsl:template> 
```

SimpleNodeTable 模板（我卡住的地方）：

```
<xsl:template name="SimpleNodeTable">
<w:tbl>
  <w:tblPr>
    <w:tblStyle w:val="ReportTable1"/>
    <w:tblW w:type="dxa">
      <xsl:attribute name="w:w">
        <xsl:value-of select="$landscapeBodyWidth"/>
      </xsl:attribute>
    </w:tblW>
    <w:tblLayout w:type="Fixed"/>
  </w:tblPr>
  <w:tblGrid>
    <w:gridCol>
      <xsl:attribute name="w:w">
        <xsl:value-of select="$nodeNameWidth"/>
      </xsl:attribute>
    </w:gridCol>
    <w:gridCol>
      <xsl:attribute name="w:w">
        <xsl:value-of select="$landscapeBodyWidth - $nodeNameWidth"/>
      </xsl:attribute>
    </w:gridCol>
  </w:tblGrid>
  <w:tr>
    <!-- first row -->
    <w:tc>
      <!-- First cell is blank so vertically merge -->
      <w:vmerge w:val="restart"/>
      <w:p/>
    </w:tc>
    <!-- HOW TO DO A FOR EACH LOOP TO ADD 1 COLUMN PER NODEREF?? -->
    <xsl:for-each select="Node">
    <w:tc>
      <w:p>
        <!-- Second cell contains the name of the node (from xml file) -->
        <w:t>
          <xsl:value-of select="NodeName"/>
        </w:t>
      </w:p>
    </w:tc>
    </xsl:for-each>
  </w:tr>
</w:tbl>
</xsl:template> 
```

也许我以一种完全错误的方式处理这个问题，但我最终把自己弄糊涂了，试图获得 1 张桌子，然后开始 for-each 循环。我将不胜感激任何建议/指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T17:28:21.877

Efrain 提供的链接是正确的方向，但我认为它可以更简单。

```
 <xsl:variable name="max-col">
     <xsl:choose>
         <xsl:when test="count(Node) &gt; 15">16</xsl:when>
         <xsl:otherwise><xsl:value-of select="count(Node) + 1"/></xsl:otherwise>
     </xsl:choose>
 </xsl:variable>

 <!-- Then take only the first 'max-col' Nodes -->
 <xsl:for-each select="Node[position() &lt; $max-col]">
    <!-- ..... your code ....... -->
 </xsl:for-each> 
```

对标题和行使用相同的变量。

# python - 如何在 python 中找到在另一个子字符串之后出现的子字符串的第一次出现？

> ID：13183889
> 
> 赞同：6
> 
> 时间：2012-11-01T19:08:48.423
> 
> 标签：python, string, string-matching

Python 中的字符串有一个 find("somestring") 方法，它返回字符串中“somestring”的索引号。

但是假设我有一个如下字符串：

“5 美元 7 美元 9 美元总成本：35 美元 14 美元”

*我想找到字符串“总成本”之后*第一次出现的“$”的索引——我希望能够告诉python，搜索“$”，从“的索引号开始”总成本”，并返回您找到的第一次出现的 '$' 的索引号（相对于整个字符串）。find() 方法将返回 0，而 rfind() 在这种情况下也不起作用。

一种笨拙的方法如下：

```
def findStrAfterStr(myString, searchText, afterText):

    splitString = myString.split(afterText)
    myIndex = len(splitString[0]) + len(afterText) + splitString[1].find(searchText)
    return myIndex

myString = "$5   $7    $9     Total Cost: $35   $14"
searchText = "$"
afterText = "Total Cost"

findStrAfterStr(myString, searchText, afterText) 
```

但似乎应该有一种更简单的方法来做到这一点，我认为可能有，但我只是不知道它是什么。想法？

当我发现自己经常这样做时，这对切片特别有用：

```
myString[myString.find("startingSubstr"):myString.find("endingSubstr")] 
```

当然，我希望“endingSubstr”是在“startingSubstr”之后出现的那个。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T19:18:34.683

使用可选的第二个参数[`str.find`](http://docs.python.org/2/library/stdtypes.html#str.find)：

```
def findStrAfterStr(myString, searchText, afterText):
    after_index = myString.index(afterText)
    return myString.find(searchText, after_index) 
```

或者，正如 pythonm 所建议的，您可以使用正则表达式。

我推荐一种“*我**真的**需要*”的正则表达式方法，因为当您稍后再次阅读代码时，通常很难理解代码的作用。我还发现，在大多数情况下，您可以在不使用正则表达式的情况下做同样的事情，并获得更容易阅读的代码。比较：

```
import re

def findStrAfterStr(myString, searchText, afterText):
    pattern = "{0}.*?({1})".format(re.escape(afterText), re.escape(searchText))
    match = re.search(pattern, myString)
    return match.start(1) if match else -1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T19:13:35.447

```
def findStrAfter(myString, searchText, afterText):
    try:
        i = myString.index(afterText)
        return min(i for i,char in enumerate(myString) if myString[i:].startswith(searchText) and i>afterText)
    except ValueError:
        print "'%s' does not exist" %afterText 
```

或（更有效）：

```
def findStrAfter(myString, searchText, afterText):
    try:
        i = myString.index(afterText)
    except ValueError:
        print "'%s' does not exist" %afterText
        raise
    try:
        return myString[i:].index(searchText)
    except ValueError:
        print "'%s' does not exist after '%s' in myString" %(searchText, afterText)
        raise 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:25:17.350

这个怎么样？

```
return string.index('Total Cost:') + string[string.index('Total Cost:'):].index('$') 
```

或者

```
i = string.index('Total Cost:')
return i + string[i:].index('$') 
```

# c - 将数据从全局加载到共享内存时如何避免银行冲突

> ID：13183893
> 
> 赞同：1
> 
> 时间：2012-11-01T19:09:15.780
> 
> 标签：c, optimization, cuda

一个问题涉及对存储在计算能力 1.3 GPU 的全局内存中的无符号字符数组的跨步访问。为了绕过全局内存的合并要求，线程顺序访问全局内存并将数组复制到共享内存，仅使用 2 个内存事务，例如：

```
#include <cuda.h>
#include <stdio.h>
#include <stdlib.h>

__global__ void kernel ( unsigned char *d_text, unsigned char *d_out ) {

    int idx = blockIdx.x * blockDim.x + threadIdx.x;

    extern __shared__ unsigned char s_array[];

    uint4 *uint4_text = ( uint4 * ) d_text;
    uint4 var;

    //memory transaction
    var = uint4_text[0];

    uchar4 c0 = *reinterpret_cast<uchar4 *>(&var.x);
    uchar4 c4 = *reinterpret_cast<uchar4 *>(&var.y);
    uchar4 c8 = *reinterpret_cast<uchar4 *>(&var.z);
    uchar4 c12 = *reinterpret_cast<uchar4 *>(&var.w);

    s_array[threadIdx.x*16 + 0] = c0.x;
    s_array[threadIdx.x*16 + 1] = c0.y;
    s_array[threadIdx.x*16 + 2] = c0.z;
    s_array[threadIdx.x*16 + 3] = c0.w;

    s_array[threadIdx.x*16 + 4] = c4.x;
    s_array[threadIdx.x*16 + 5] = c4.y;
    s_array[threadIdx.x*16 + 6] = c4.z;
    s_array[threadIdx.x*16 + 7] = c4.w;

    s_array[threadIdx.x*16 + 8] = c8.x;
    s_array[threadIdx.x*16 + 9] = c8.y;
    s_array[threadIdx.x*16 + 10] = c8.z;
    s_array[threadIdx.x*16 + 11] = c8.w;

    s_array[threadIdx.x*16 + 12] = c12.x;
    s_array[threadIdx.x*16 + 13] = c12.y;
    s_array[threadIdx.x*16 + 14] = c12.z;
    s_array[threadIdx.x*16 + 15] = c12.w;

    d_out[idx] = s_array[threadIdx.x*16];
}

int main ( void ) {

    unsigned char *d_text, *d_out;

    unsigned char *h_out = ( unsigned char * ) malloc ( 32 * sizeof ( unsigned char ) );
    unsigned char *h_text = ( unsigned char * ) malloc ( 32 * sizeof ( unsigned char ) );

    int i;

    for ( i = 0; i < 32; i++ )
        h_text[i] = 65 + i;

    cudaMalloc ( ( void** ) &d_text, 32 * sizeof ( unsigned char ) );
    cudaMalloc ( ( void** ) &d_out, 32 * sizeof ( unsigned char ) );

    cudaMemcpy ( d_text, h_text, 32 * sizeof ( unsigned char ), cudaMemcpyHostToDevice );

    kernel<<<1,32,16128>>>(d_text, d_out );

    cudaMemcpy ( h_out, d_out, 32 * sizeof ( unsigned char ), cudaMemcpyDeviceToHost );

    for ( i = 0; i < 32; i++ )
        printf("%c\n", h_out[i]);

    return 0;
} 
```

问题是在将数据复制到共享内存时会发生银行冲突（由 nvprof 报告的上述示例的 384 冲突）导致线程的序列化访问。

共享内存被划分为 16 个（或在较新的设备架构上为 32 个）32 位存储库，以便同时为同一个半扭曲的 16 个线程提供服务。数据在 bank 之间交错，第 i 个 32 位字始终存储在 i % 16 - 1 共享内存 bank 中。

由于每个线程通过一个内存事务读取 16 个字节，因此字符将以跨步方式存储到共享内存中。这会导致线程 0、4、8、12 之间发生冲突；1、5、9、13；2、6、10、14；3、7、11、15 个相同的半经线。消除银行冲突的一种简单方法是使用 if/else 分支以类似于以下的循环方式将数据存储到共享内存，但会导致一些严重的线程分歧：

```
int tid16 = threadIdx.x % 16;

if ( tid16 < 4 ) {

    s_array[threadIdx.x * 16 + 0] = c0.x;
    s_array[threadIdx.x * 16 + 1] = c0.y;
    s_array[threadIdx.x * 16 + 2] = c0.z;
    s_array[threadIdx.x * 16 + 3] = c0.w;

    s_array[threadIdx.x * 16 + 4] = c4.x;
    s_array[threadIdx.x * 16 + 5] = c4.y;
    s_array[threadIdx.x * 16 + 6] = c4.z;
    s_array[threadIdx.x * 16 + 7] = c4.w;

    s_array[threadIdx.x * 16 + 8] = c8.x;
    s_array[threadIdx.x * 16 + 9] = c8.y;
    s_array[threadIdx.x * 16 + 10] = c8.z;
    s_array[threadIdx.x * 16 + 11] = c8.w;

    s_array[threadIdx.x * 16 + 12] = c12.x;
    s_array[threadIdx.x * 16 + 13] = c12.y;
    s_array[threadIdx.x * 16 + 14] = c12.z;
    s_array[threadIdx.x * 16 + 15] = c12.w;

} else if ( tid16 < 8 ) {

    s_array[threadIdx.x * 16 + 4] = c4.x;
    s_array[threadIdx.x * 16 + 5] = c4.y;
    s_array[threadIdx.x * 16 + 6] = c4.z;
    s_array[threadIdx.x * 16 + 7] = c4.w;

    s_array[threadIdx.x * 16 + 8] = c8.x;
    s_array[threadIdx.x * 16 + 9] = c8.y;
    s_array[threadIdx.x * 16 + 10] = c8.z;
    s_array[threadIdx.x * 16 + 11] = c8.w;

    s_array[threadIdx.x * 16 + 12] = c12.x;
    s_array[threadIdx.x * 16 + 13] = c12.y;
    s_array[threadIdx.x * 16 + 14] = c12.z;
    s_array[threadIdx.x * 16 + 15] = c12.w;

    s_array[threadIdx.x * 16 + 0] = c0.x;
    s_array[threadIdx.x * 16 + 1] = c0.y;
    s_array[threadIdx.x * 16 + 2] = c0.z;
    s_array[threadIdx.x * 16 + 3] = c0.w;

} else if ( tid16 < 12 ) {

    s_array[threadIdx.x * 16 + 8] = c8.x;
    s_array[threadIdx.x * 16 + 9] = c8.y;
    s_array[threadIdx.x * 16 + 10] = c8.z;
    s_array[threadIdx.x * 16 + 11] = c8.w;

    s_array[threadIdx.x * 16 + 12] = c12.x;
    s_array[threadIdx.x * 16 + 13] = c12.y;
    s_array[threadIdx.x * 16 + 14] = c12.z;
    s_array[threadIdx.x * 16 + 15] = c12.w;

    s_array[threadIdx.x * 16 + 0] = c0.x;
    s_array[threadIdx.x * 16 + 1] = c0.y;
    s_array[threadIdx.x * 16 + 2] = c0.z;
    s_array[threadIdx.x * 16 + 3] = c0.w;

    s_array[threadIdx.x * 16 + 4] = c4.x;
    s_array[threadIdx.x * 16 + 5] = c4.y;
    s_array[threadIdx.x * 16 + 6] = c4.z;
    s_array[threadIdx.x * 16 + 7] = c4.w;

} else {

    s_array[threadIdx.x * 16 + 12] = c12.x;
    s_array[threadIdx.x * 16 + 13] = c12.y;
    s_array[threadIdx.x * 16 + 14] = c12.z;
    s_array[threadIdx.x * 16 + 15] = c12.w;

    s_array[threadIdx.x * 16 + 0] = c0.x;
    s_array[threadIdx.x * 16 + 1] = c0.y;
    s_array[threadIdx.x * 16 + 2] = c0.z;
    s_array[threadIdx.x * 16 + 3] = c0.w;

    s_array[threadIdx.x * 16 + 4] = c4.x;
    s_array[threadIdx.x * 16 + 5] = c4.y;
    s_array[threadIdx.x * 16 + 6] = c4.z;
    s_array[threadIdx.x * 16 + 7] = c4.w;

    s_array[threadIdx.x * 16 + 8] = c8.x;
    s_array[threadIdx.x * 16 + 9] = c8.y;
    s_array[threadIdx.x * 16 + 10] = c8.z;
    s_array[threadIdx.x * 16 + 11] = c8.w;
} 
```

任何人都可以提出更好的解决方案吗？我已经研究过 SDK 的缩减示例，但我不确定它是否适用于我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:24:07.023

当然，代码会导致银行冲突，但这并不意味着它会*变慢*。

在您的计算能力 1.3 GPU 上，具有 2 路银行冲突的共享内存事务只比没有银行冲突的一个多两个周期。在两个周期内，您甚至无法执行一条指令来解决银行冲突。与无冲突访问相比，4 路存储库冲突多使用六个周期，这足以执行一次额外的无冲突共享内存访问。

在您的情况下，代码很可能受到全局内存带宽（和延迟，即数百个周期，即比我们在这里讨论的 2..6 个周期大两个数量级）的限制​​。因此，您可能会有大量空闲周期可用，其中 SM 只是空闲等待来自全局内存的数据。然后银行冲突可以使用这些周期而不会减慢您的代码*。*

确保编译器将 .x、.y、.z 和 .w 的四个字节存储合并到一个 32 位访问中更为重要。查看编译后的代码`cuobjdump -sass`，看看是否是这种情况。如果不是，请按照 Otter 的建议改用单词传输。

如果您只是从内核中读取`d_text`而不是从内核中写入，您也可以为它使用纹理，它仍然会比具有银行冲突的内核慢，但可能会提供其他优势来提高整体速度（例如，如果你可以'不保证全局内存中数据的正确对齐）。

另一方面，您的替代银行无冲突代码将快速的 256 字节全局内存拆分为四个 64 位事务，这些事务的效率要低得多，并且可能会溢出运行中的最大内存事务数，因此您会招致整整四百到几千个周期的全局内存延迟。
为避免这种情况，您需要首先使用 256 字节宽读取将数据传输到寄存器，然后以无存储冲突的方式将数据从寄存器移动到共享内存。尽管如此，仅 register->shmem 移动的代码将占用比我们试图解决的六个周期多得多的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:51:56.147

I think a DWORD copying is anyway faster than per-byte copying. Try this instead of your example:

```
for(int i = 0; i < 4; i++)
{
    ((int*)s_array)[4 * threadIdx.x + i] = ((int*)d_text)[i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-03T16:25:33.730

为了避免银行冲突，人们经常在共享内存中的虚拟矩阵中添加备用列。所以你也许可以将你的共享数组大小增加 1/16 并替换为

```
threadIdx.x * 17 + 0
threadIdx.x * 17 + 1
...
threadIdx.x * 17 + 15 
```

对于一维数组，它可以是

```
s_array[idx + idx / 16] = source[idx]; 
```

# ios - 多个 TableViewControllers & Segues

> ID：13183897
> 
> 赞同：0
> 
> 时间：2012-11-01T19:10:03.550
> 
> 标签：ios, xcode

我有一个`TableView`填充了数据的。当用户点击一行时，会打开一个新行，其中`TableView`包含更多可供选择的数据。此数据根据用户点击的行而变化。就像一个应用程序，用户从汽车制造商列表中选择，然后选择型号。`TableViewController`是否可以使用汽车制造商和模型来处理这种情况`TableViewController`？还是会有 1 个品牌`TableViewController`，然后`TableViewController`每个品牌的模型集有一个单独的？我不知道解决这个问题的最佳方法:-(我正在制作我自己的应用程序，它的结构非常相似，我似乎找不到任何关于如何实现这一点的文档。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:26:33.593

不，您的模型控制器适用于所有品牌。它将传递一个请求的制造 ID，然后相应地获取必要的数据。

这样的事情可能会有所帮助：http: [//developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewAndDataModel/TableViewAndDataModel.html](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewAndDataModel/TableViewAndDataModel.html)

但我认为您的问题的基础不一定可以在您的确切需求的工作示例中找到，而更多的是在 ios 开发的一般教程中找到。

抱歉，如果我假设您刚刚开始 ios 开发。如果澄清了更具体的需求（例如如何将 ID 传递给模型控制器）等，我也许可以改进这个答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:28:29.897

一般来说 - 这种方法会`UITableViewController`为每个数据级别使用单独的，并使用 a`UINavigationController`来处理不同视图控制器之间的转换。

此过程过去涉及大量样板代码，但现在由 StoryBoards 提供帮助。您可以在情节提要中设置每个级别，并在`performSegueWithIdentifier:`.

您可以在此处查看有关使用 StoryBoards 的教程：http: [//kurrytran.blogspot.com/2011/10/ios-5-storyboard-uitableview-tutorial.html](http://kurrytran.blogspot.com/2011/10/ios-5-storyboard-uitableview-tutorial.html)

您可以看到 Apple 的另一个示例，该示例演示了使用情节提要向下钻取的数据：http: [//developer.apple.com/library/ios/#samplecode/SimpleDrillDown/Introduction/Intro.html#//apple_ref/doc/uid/ DTS40007416-介绍-DontLinkElementID_2](http://developer.apple.com/library/ios/#samplecode/SimpleDrillDown/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007416-Intro-DontLinkElementID_2)

# apache-flex - 限制 DataContainer 的高度和宽度

> ID：13183902
> 
> 赞同：0
> 
> 时间：2012-11-01T19:10:25.047
> 
> 标签：apache-flex

我希望有一个滚动条来限制 SkinnableDataContainer 的高度，这样我就可以向下滚动项目重新生成器。有我尝试过的代码

```
<s:SkinnableDataContainer id="skinnableDataContainer" x="10" y="38" width="691" height="512"
                          creationComplete="skinnableDataContainer_creationCompleteHandler(event)"
                          dataProvider="{getAllProductdetailResult2.lastResult}"
                          itemRenderer="productItem"  scrollRect="{0,0,skinnableDataContainer.width,skinnableDataContainer.height}"> 

        <s:layout>  

            <s:TileLayout requestedColumnCount="3" requestedRowCount="4" />
        </s:layout>

</s:SkinnableDataContainer> 
```

但是，scrollRect 上有一个错误，我不知道如何在 mxml 中创建一个矩形类。

我只需要一个 vscroll bar 并显示一个半 itemredenerer。有什么简单的方法来做这种工作吗？

# ios - 创建 UIImageView 时上下文无效

> ID：13183904
> 
> 赞同：11
> 
> 时间：2012-11-01T19:10:29.087
> 
> 标签：ios, uiimageview, uiimage, cgcontext

尝试创建 UIImageView 时出现错误。看看这段代码：

```
UIImage* backgroundPanel = [[UIImage imageNamed:@"loginPanelBackground.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(90, 0, 149, 416)];

self.connexionBackgroundImgView = [[UIImageView alloc] initWithImage:backgroundPanel];
self.connexionBackgroundImgView.frame = CGRectMake(0, 0, 416, 390); // THIS LINE PROVOC THE INVALID CONTEXT
[self.connexionView insertSubview:self.connexionBackgroundImgView aboveSubview:self.connexionToCreationCompteView]; 
```

它在日志中抛出此错误：

```
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetBlendMode: invalid context 0x0
<Error>: CGContextSetAlpha: invalid context 0x0
<Error>: CGContextTranslateCTM: invalid context 0x0
<Error>: CGContextScaleCTM: invalid context 0x0
<Error>: CGContextGetCTM: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextClipToRect: invalid context 0x0
<Error>: CGContextDrawTiledImage: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0
<Error>: CGContextGetCTM: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextClipToRect: invalid context 0x0
<Error>: CGContextDrawTiledImage: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0
<Error>: CGContextGetCTM: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextClipToRect: invalid context 0x0
<Error>: CGContextDrawTiledImage: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0
<Error>: CGContextRestoreGState: invalid context 0x0 
```

我只在 iPad 上遇到了这个错误，在模拟器上没有，我不明白.. :/

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-26T14:51:08.150

我遇到了这个问题，直到我发现我的 resizableImageWithCapInsets: 的 cap inset 参数是错误的——它根本没有留下任何未加盖的区域（你需要至少 1x1 像素没有被盖子覆盖）。因此，请确保：

*(insets.left + insets.right) < 宽度*

和

*(insets.top + insets.bottom) < 高度*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T19:16:51.237

模拟器不区分大小写。该设备区分大小写。png的命名是否正确？也许是大写 L 的“登录”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T15:28:10.477

> 在此处查看答案：[如何捕获 UITableView / UIScrollView 的完整内容的 UIImage 并使其在 ios 设备上工作](https://stackoverflow.com/questions/10695258/how-do-i-capture-uiimage-of-complete-contents-of-uitableview-uiscrollview-and)

谢谢埃利亚夫！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-02T08:40:24.523

由于代表人数少，我仍然无法发表评论。不过，我想补充一下对我有很大帮助的 neon1 的回答。

您还需要确保所有插图都大于零。

*insets.left > 0*

*插图顶部 > 0*

*insets.right > 0*

*insets.bottom > 0*

# vb.net - VB.net 的 IsNumeric 将 £ 视为数字？

> ID：13183910
> 
> 赞同：4
> 
> 时间：2012-11-01T19:10:49.993
> 
> 标签：vb.net

这有点令人困惑，为什么会这样？

```
Console.WriteLine(IsNumeric("$0")) - False

Console.WriteLine(IsNumeric("€0")) - False

Console.WriteLine(IsNumeric("£0")) - True

Console.WriteLine(IsNumeric("£")) - False 
```

对我来说似乎很奇怪，它这样做的原因是什么

编辑：最后也有效：

```
Console.WriteLine(IsNumeric("300£")) - True

Console.WriteLine(IsNumeric("300£0")) - False

Console.WriteLine(IsNumeric("£300£")) - False 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T19:20:39.740

生活在意大利 - 在意大利地区运行

```
Console.WriteLine(IsNumeric("$0")) ' False
Console.WriteLine(IsNumeric("€0")) ' True
Console.WriteLine(IsNumeric("£0")) ' False
Console.WriteLine(IsNumeric("£"))  ' False 
```

虽然这会让你永远回归真实

```
using System.Globalization;

Console.WriteLine(MyIsNumeric("$0", NumberStyles.AllowCurrencySymbol, "en-US"))
Console.WriteLine(MyIsNumeric("€0", NumberStyles.AllowCurrencySymbol, "it-IT")) 
Console.WriteLine(MyIsNumeric("£0", NumberStyles.AllowCurrencySymbol, "en-GB")) 

Public Function MyIsNumeric(ByVal val as String, ByVal NumberStyle as NumberStyles, cName as String) as Boolean
    Dim result as Double
    return Double.TryParse(val,NumberStyle, new CultureInfo(cName), result)
 End Function 
```

因此我们可以得出结论，IsNumeric（最初在 VB6 运行时中定义）`smart`足以从其解析中排除当前区域设置货币符号（如果它们位于输入字符串之前或之后）。

# java - 如何在 Java 中使 JButton 变灰

> ID：13183920
> 
> 赞同：3
> 
> 时间：2012-11-01T19:11:23.767
> 
> 标签：java, swing, netbeans, jbutton

如何使 Swing Jbutton 变灰/变灰？我可以使用什么方法？另外，我怎样才能让它在 Netbeans 中默认变灰？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T19:15:09.560

```
button.setEnabled(false); 
```

上面应该使一个按钮变灰就好了。我会确保您已将文档添加为书签或下载并稍微阅读一下

**编辑**

我的假设是您在 Netbeans 中使用 GUI 创建器。我强烈建议阅读 swing 并学习语言而不是 IDE（有时您必须使用与 Netbeans 不同的 IDE，并且不知道如何使用 GUI）

# xml - 当事情发生变化时，如何制作不需要更改的wsdl？

> ID：13183921
> 
> 赞同：0
> 
> 时间：2012-11-01T19:11:31.167
> 
> 标签：xml, web-services, interface, wsdl, xsd

我正在制作一个 CRUD Web 服务，并且我有对象（它们也是我系统中的数据库记录），假设客户有几十个属性。一些属性可能会在几年内发生变化。在极少数情况下，它们可以重命名，我认为这不是问题，因为这是内部实现，并且属性名称不需要在接口中。但是会有新的属性，我不知道如何正确处理它们。

我打算在架构中做的是这样的：

```
<xs:complexType name="tKeyValuePair">
 <xs:sequence>
  <xs:element name="fieldname" type="xs:string" />
  <xs:element name="value" type="xs:string" />
 </xs:sequence>
</xs:complexType>

<xs:element name="keyvaluepair" type="tKeyValuePair"  />

<xs:complexType name="tKeyValuePairs">
 <xs:sequence>
   <xs:element ref="keyvaluepair" minOccurs="0" maxOccurs="unbounded" />
 </xs:sequence>
</xs:complexType>

<xs:element name="fieldvalues" type="tKeyValuePairs" /> 

<xs:complexType name="tCustomerBase">
 <xs:sequence>
   <xs:element name="customername" type="xs:string" />
   <!-- here are other fields that can't change but can be minOccurs="0"-->
  <xs:element ref="fieldvalues"  />
</xs:sequence> 
```

然后，我为每个扩展 tCustomerBase 的操作提供了一个类型，例如在 tCustomerUpdate 中添加 customerid 以作为查找正确客户的关键，在 tCustomerCreate 中添加 createuser 以存储在其他系统中创建它的人。

现在字段值是字符串，我知道哪个字段应该是哪种类型，我可以在我的 WS 中的 db 操作之前转换它们。

但这有意义吗？我应该使用

```
xsd:any 
```

以某种方式适用于其他领域？

怎么用

```
xsd:anyType 
```

我可以使用它而不是字符串作为键值对值的类型吗？我将不胜感激帮助如何真正做到这一点！

除了我的问题，我很乐意听到关于这种模式设计的任何评论。所以请随意评论我在这里写的模型模式部分！

谢谢和最好的问候-马蒂

# android - Android IntentService 从未调用过

> ID：13183922
> 
> 赞同：2
> 
> 时间：2012-11-01T19:11:35.453
> 
> 标签：android, android-service

我有一个 IntentService，我想从 onCreate 开始。打电话给网站然后（可能）通过下载管理器开始下载，这是一场火灾，忘记了。我不相信我的服务正在启动，因为我没有看到任何日志语句。我的清单中有服务，与 main 相同的包。它也没有出现在我的 logcat 中（另一个线程说应该）。

创建：

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    Intent heartbeat = new Intent(this, Heartbeat.class);
    startService(heartbeat);
} 
```

*我也试过 this.startService(heartbeat); 它也没有工作。

显现：

```
<application
    android:debuggable="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <service android:name=".Heartbeat" android:enabled="true"/>

    <activity
        android:name=".MainActivity"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:label="@string/title_activity_main" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

*带或不带 android:enabled 标志没有区别

IntentService 的开始：

```
public class Heartbeat extends IntentService
{
    public Heartbeat()
    {
        super("Heartbeat");
        Log.v("SUPER", "SUPER");
    }

    @Override
    protected void onHandleIntent(Intent intent)
    {
        Log.v("HERE", "HERE");
        //do other stuff 
```

这些日志语句都没有出现在控制台/logcat 中，并且我的服务从未访问过 Web 服务器（此代码以前在 asynctask 中并且正在运行）。关于我做错了什么的任何想法？

编辑 - 我确实在我的所有消息中看到来自标签 ActivityManager 的警告，指出“无法启动服务 Intent { act=com.example.vs_1.Heartbeat }：未找到”。但是，我在该消息中看到的几乎所有建议都是将清单放入应用程序标记中，我已经这样做了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:33:10.240

啊，剧情变厚了！

“无法启动服务”是一个错误，即使它被标记为警告。

发生这种情况是因为系统找不到具有所列名称的类。在这种情况下，它是 com.example.vs_1.Heartbeat。

为确保您拥有该类，您需要一个文件 Hearbeat.java，其中包含

包 com.example.vs_1;

公共类 Heartbeat 扩展 IntentService...

在您的清单中，如果您的元素包含属性 package="com.example.vs_1"，那么您可以说

请注意“心跳”之前的句点（“.”）。

如果您使用“包”的另一个值，那么您必须说

/com.example.vs_1.Heartbeat" 其中是 "package" 的值。

应该清楚的是，您应该为您的类选择一个主包名称，并为“包”值使用相同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:04:04.893

您确定主要活动正在正确启动吗？如果系统无法启动您的 IntentService，LogCat 会向您显示错误消息。此外，这些是“详细”消息，因此请确保将 LogCat 设置为显示它们。如果您将 LogCat 设置为“错误”，它将不会显示详细消息。

# asp.net - MasterPage.master 继承自另一个继承 MastPage 的类

> ID：13183923
> 
> 赞同：0
> 
> 时间：2012-11-01T19:11:37.370
> 
> 标签：asp.net, inheritance, master-pages

我的母版页继承自一个名为 MasterParent 的类。在编译期间，我收到如下错误：

编译错误：

说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：ASPNET：确保此代码文件中定义的类与“继承”属性匹配，并且它扩展了正确的基类（例如 Page 或 UserControl）。

源错误：

```
Line 8:  namespace PortfolioApplication
Line 9:  {
Line 10:     public partial class MasterPage : MasterParent
Line 11:     {
Line 12:     } 
```

我的代码：MasterParent.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace PortfolioApplication
{
    public abstract class MasterParent : System.Web.UI.MasterPage
    {
        protected void Page_Load(object sender, EventArgs e)
        {
        }

        #region "Navigation Buttons"

        protected void btnPortfolio_Click(object sender, EventArgs e)
        {
            Server.Transfer("Portfolio.aspx");
        }
        protected void btnHome_Click(object sender, EventArgs e)
        {
            Server.Transfer("Default.aspx");
        }
        protected void btnContact_Click(object sender, EventArgs e)
        {
            Server.Transfer("Contact.aspx");
        }
        protected void btnResume_Click(object sender, EventArgs e)
        {
            Server.Transfer("Resume.aspx");
        }

        #endregion
    }
} 
```

MasterPage.master.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace PortfolioApplication
{
    public class MasterPage : MasterParent 
    {

    }
} 
```

另外：我刚刚尝试在 MasterParent.cs 中为类头更改我的代码：

```
public partial class MasterPage: System.WEb.UI.MasterPage and i am getting the same error about inheritence. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:37:26.347

您没有对. 的`partial`每个定义都有修饰符`MasterPage : MasterParent`。

# jquery - 设置 Div 的位置不适用于 IE/FireFox

> ID：13183924
> 
> 赞同：0
> 
> 时间：2012-11-01T19:11:39.210
> 
> 标签：jquery, css, html, position

我有这个代码

我有很多问题，

首先，在 FireFox 16.0.2 中，它不显示第二个 div ，它也不在 IE 中显示文本“Hey all”，它是有效的，但它会将 div 彼此粘贴，并且不显示文本“Hey all”我认为 Divs 的位置设置不正确我尝试通过 jQuery/css 两种方式更改位置..

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<style>
#11r5p6v8z9 {
position:fixed;
top:25px;
left:295px;
}

#11l6z9y3u6 {
position:fixed;
top:50px;
left:50px;
}

</style>

<script type="text/javascript">
$(document).ready(function() {

//$("#11r5p6v8z9").css({ position: "fixed", top:25px;, left:295px;});
//$("#11l6z9y3u6").css({ position: "fixed", top:25px;, left:295px;});

//$("#11r5p6v8z9").offset({ top:25px; , left:295px;});
//$("#11l6z9y3u6").offset({ top:50px; , left:50px;});

});
</script>

</head>

<body>

<div id="content">

<div id="11r5p6v8z9" style="border:1px dotted #f00;width:660px;height:410px;">
<iframe type="text/html" width="640" height="390" src="http://www.youtube.com/embed    /Af1_73K8J5g" frameborder="0">
</div>
<div id="11l6z9y3u6" style="border:1px dotted #f00;width:660px;height:410px;">
<iframe type="text/html" width="640" height="390" src="http://www.youtube.com/embed    /qjpjudx9_mU" frameborder="0">
</div>
Hey all

</div> <!-- content !-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T19:16:45.330

ID 不能以数字开头。你的 CSS 规则有一个数字，所以我认为这就是你得到无效结果的原因。

[http://www.w3.org/TR/CSS21/syndata.html](http://www.w3.org/TR/CSS21/syndata.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T19:17:41.770

您可以尝试更改您的 id 名称，因为我的理解 id 不能以数字开头[ids-cannot-start-with-a-number](http://css-tricks.com/ids-cannot-start-with-a-number/)

带有一些更正的 Jsfiddle 代码 - [JSFIDDLE](http://jsfiddle.net/anmolsaraf/gQLpQ/4/)

```
$(document).ready(function() {

$("#a11r5p6v8z9").css({ position: "fixed", top:'25px', left:'295px'});
$("#a11l6z9y3u6").css({ position: "fixed", top:'25px', left:'295px'});

$("#a11r5p6v8z9").offset({ top:'25px', left:'295px'});
$("#a11l6z9y3u6").offset({ top:'50px',  left:'50px'});

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T19:33:31.780

你错过了`</iframe>`

[http://jsfiddle.net/mplungjan/FBJNY/](http://jsfiddle.net/mplungjan/FBJNY/)

```
<div id="content">

<div id="x11r5p6v8z9" style="border:1px dotted #f00;width:660px;height:410px;">
    <iframe type="text/html" width="640" height="390" 
      src="http://www.youtube.com/embed/Af1_73K8J5g" frameborder="0"></iframe>
</div>
<div id="x11l6z9y3u6" style="border:1px dotted #f00;width:660px;height:410px;">
    <iframe type="text/html" width="640" height="390" 
      src="http://www.youtube.com/embed/qjpjudx9_mU" frameborder="0"></iframe>
</div>
Hey all

</div> ​ 
```

# autofac - 替换 Autofac.Integration.Web.Mvc（从 autofac 2.3 升级到 2.6）

> ID：13183929
> 
> 赞同：1
> 
> 时间：2012-11-01T19:11:57.827
> 
> 标签：autofac

Autofac 版本 2.3.2.632 中的 Autofac.Integration.Web.Mvc dll 有一个类 AutofacControllerFactory 定义为

```
 public class AutofacControllerFactory : DefaultControllerFactory
    {
        public AutofacControllerFactory(IContainerProvider containerProvider);

        protected override IController GetControllerInstance(RequestContext context, Type controllerType);
        public override void ReleaseController(IController controller);
    } 
```

最新版本的 autofac (2.6.3.862) 没有 Autofac.Integration.Web.Mvc，而是有 Autofac.Integration.Mvc。但是这个 dll 没有 AutofacControllerFactory 类。dll Autofac.Integration.Mvc 有一个名为 AutofacDependencyResolver 的类，定义为

```
public class AutofacDependencyResolver : IDependencyResolver
{
    public AutofacDependencyResolver(ILifetimeScope container);
    public AutofacDependencyResolver(ILifetimeScope container, Action<ContainerBuilder> configurationAction);
    public AutofacDependencyResolver(ILifetimeScope container, ILifetimeScopeProvider lifetimeScopeProvider);
    public AutofacDependencyResolver(ILifetimeScope container, ILifetimeScopeProvider lifetimeScopeProvider, Action<ContainerBuilder> configurationAction);

    public ILifetimeScope ApplicationContainer { get; }
    public static AutofacDependencyResolver Current { get; }
    public ILifetimeScope RequestLifetimeScope { get; }

    public object GetService(Type serviceType);
    public IEnumerable<object> GetServices(Type serviceType);
} 
```

**最新版本的 Autofac 中 AutofacControllerFactory 的替代品是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:28:59.187

没有替代品`AutofacControllerFactory`。相反，使用`DependencyResolver`.

[Autofac wiki 有关于与更高版本的 ASP.NET MVC 集成的新方法的文档。](https://code.google.com/p/autofac/wiki/MvcIntegration)该 wiki 页面包含指向示例应用程序的链接，您可以在其中查看实际工作代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T20:27:21.177

我相信这是通过版本对 MVC API 的更改。在 MVC 3/4 中，相信您需要输入的`Application_Start`只是：

```
DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

# java - Java：gc.drawimage 和透明度

> ID：13183932
> 
> 赞同：1
> 
> 时间：2012-11-01T19:12:02.473
> 
> 标签：java, drawimage

我正在创建自定义 SWT 小部件，但我遇到了透明度问题。我的课程扩展了画布，当我简单地写时，我的资源中有带有 alpha 图像的 png：

```
this.setBackgroundImage(Colors.getMenuButton()); //getMenuButton returns Image object 
```

一切正常（透明），但我的对象必须是可调整大小的，所以我决定创建函数：

```
protected Image BGHelper(Image src) {
    Image i2 = new Image(Display.getDefault(),2,26);
    GC gc2 = new GC(i2);

    Image image = new Image(Display.getDefault(),this.getBounds().width,26);
    GC gc = new GC(image);
    gc.drawImage(src, 0, 0, 3, 25, 0, 0, 3, 26);
    gc2.drawImage(src, 3, 0, 2, 25, 0, 0, 2, 26);
    gc.drawImage(i2, 0, 0, 2, 25, 3, 0, this.getBounds().width-6, 26);
    gc.drawImage(src,53, 0, 3, 26, this.getBounds().width-3, 0, 3, 26);
    gc.dispose();
    gc2.dispose();
    return image;   
} 
```

它从源剪切左边框并粘贴到结果中，从源剪切中心，调整大小并粘贴到结果中，从源剪切右边框并粘贴到结果中。调整大小有效*，但*没有透明度（白色像素）。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:32:20.337

请查看以下文档。它可能会帮助您解决问题。

[http://www.eclipse.org/articles/Article-SWT-images/graphics-resources.html#Transparency](http://www.eclipse.org/articles/Article-SWT-images/graphics-resources.html#Transparency)

# sorting - 任何人都可以在 C++ 中提出一个整洁的 Tim Sort 实现吗，如果可能的话，还有算法链接

> ID：13183934
> 
> 赞同：-2
> 
> 时间：2012-11-01T19:12:20.397
> 
> 标签：sorting

任何人都可以在 C++ 中提出一个整洁的 Tim Sort 实现，如果可能的话，也可以使用算法链接。我在网上找不到 tim sort 的基本步骤解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:08:32.060

好吧，下次搜索更多:) 这是但绝不是基本的:- [https://github.com/swenson/sort/blob/master/demo.c](https://github.com/swenson/sort/blob/master/demo.c)

# web - 无法将图像从经过身份验证的站点粘贴到 Microsoft Word

> ID：13183935
> 
> 赞同：2
> 
> 时间：2012-11-01T19:12:20.240
> 
> 标签：web, windows-8, ms-word, internet-explorer-10

我以前在这里看到过这个问题，但是这个解决方案——尽管它帮助了其他人——对我不起作用。

当您将图像从浏览器复制到剪贴板，然后将其粘贴到 Word 中时，Word 会尝试发出 Web 请求以获取内容。如果图像来自使用基于表单的登录来验证用户身份的站点，Word 显然无法登录。您的内容无法粘贴。其他软件（例如 Paint）对此没有任何问题，并且会简单地粘贴您复制的内容，而不会尝试发出另一个 Web 请求。

有人建议将 Internet 设置中的“检查存储页面的较新版本”设置更改为“自动”将解决问题。这可能对某些人有用，但不适合我。我已经尝试了此设置中的所有选项，但没有任何效果。

我使用数据包捕获软件来确保当我粘贴内容时 Word 确实在发出 Web 请求。该网页确实将 Word 重定向到身份验证页面，此时 Word 什么也不做。

我正在使用 Chrome，但尝试过 Internet Explorer。我的 Internet Explorer 版本是 10。我使用的是 Windows 8。我使用的是 Word 2010。

网上有很多关于 Word 中图像格式和文档布局等的建议，但这显然不是我的问题。数据包捕获显示 Word 无法进行身份验证以获取图像。

有什么方法可以阻止 Word 执行额外的 HTTP GET 以从网站收集图像？由于其他软件无需执行额外的 Web 请求即可粘贴内容，因此该内容似乎确实在我的剪贴板中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:51:39.137

您是否尝试过仅保存图像本身，然后将本地副本复制到 Word，而不是直接从站点复制，而不是尝试与 Word 抗争？您将获得所有权，Word 应该将其视为本地文件，并且认为不需要执行 HTTP GET。

# c++ - 复制构造函数中的段错误

> ID：13183941
> 
> 赞同：2
> 
> 时间：2012-11-01T19:12:43.460
> 
> 标签：c++, class, copy-constructor

我正在处理一项使用“图像”类操作 *.ppm 图像的任务。当调用复制构造函数时，它会编译然后段错误。这里是：

```
Image::Image(const Image & imageToCopy) {
fileType = imageToCopy.fileType;
width = imageToCopy.width;
height = imageToCopy.height;
maxColor = imageToCopy.maxColor;

image = new int *[height];

for(int i=0; i < height; i++) {
    image[i] = new int [width];
    for(int j=0; j < width; j++) {
    image[i][j] = imageToCopy.image[i][j];
    }
}
} 
```

像这样调用：

```
Image image2(image1); 
```

我对为什么会发生这种情况感到有些不知所措。我不知道出了什么问题，因为代码几乎与我的构造函数相同，可以正常工作。唯一的区别是我有

```
image[i][j] = imageToCopy.image[i][j]; 
```

代替

```
imageInputStream >> image[i][j]; 
```

想法？谢谢

编辑：构造函数如下：

```
Image::Image(const char* filename) {
    ifstream imageInputStream;
    imageInputStream.open(filename);

    imageInputStream >> fileType;
    imageInputStream >> width;
    imageInputStream >> height;
    imageInputStream >> maxColor;

    image = new int *[height];

    for(int i=0; i < height; i++) {
        image[i] = new int [width];
        for(int j=0; j < width; j++) {
            imageInputStream >> image[i][j];
        }
    }

    imageInputStream.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:45:47.073

没有看到完整的代码，这只是一个猜测，但是如果您创建了一个复制构造函数和一个析构函数但没有复制赋值运算符，那么如果您尝试使用赋值，您可能会遇到与此完全相同的段错误。

而且您可能不会认为自己在任何地方做作业，但除非您了解 C++ 的所有规则（即使是专家也不知道，更不用说新学生了），否则很难确定。最简单的找出方法是声明一个私有赋值运算符并且不定义它（或者，如果您使用 C++11，则声明它已删除）并查看是否出现编译错误。

例如：

```
struct Image {
  int width_, height_;
  int **image_;
  Image(int width, int height) : width_(width), height_(height),
                                 image_(0) {
    image_ = new int *[height_];
    for (int i = 0; i != height_; ++i) {
      image_[i] = new int[width_];
      for (int j = 0; j != width_; ++j) {
        image_[i][j] = 1;
      }
    }
  }

  Image(const Image& rhs) : width_(rhs.width_), height_(rhs.height_),
                            image_(0) {
    image_ = new int*[height_];
    for (int i = 0; i != height_; ++i) {
      image_[i] = new int[width_];
      for (int j = 0; j != width_; ++j) {
        image_[i][j] = rhs.image_[i][j];
      }
    }
  }

  /* uncomment to uncrash
  Image& operator=(const Image& rhs) {
    if (this == &rhs) return *this;
    for (int i = 0; i != height_; ++i) {
      delete [] image_[i];
    }
    delete [] image_;
    image_ = new int*[height_];
    for (int i = 0; i != height_; ++i) {
      image_[i] = new int[width_];
      for (int j = 0; j != width_; ++j) {
        image_[i][j] = rhs.image_[i][j];
      }
    }
    return *this;
  }
  */

  ~Image() {
    for (int i = 0; i != height_; ++i) {
      delete [] image_[i];
    }
    delete [] image_;
  }
};

int main(int, char*[]) {
  Image img(200, 300);
  Image img2(img);
  Image img3(100, 200);
  img3 = img2;
  return 0;
} 
```

正如评论所暗示的，如果您取消对复制赋值运算符的注释，则整个操作都有效。

如果这是您的问题，请阅读三法则（[维基百科](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)、[沃德的维基](http://c2.com/cgi/wiki?RuleOfTheBigThree)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:11:24.850

我使用了您在 pastebin 中粘贴的代码，并向两个构造函数添加了一些日志记录。

在`Image(const char *)`, 之后`imageInputStream >> maxColor`;:

```
 cout << "Image(" << filename << "): "
         << fileType << ", "
         << width << ", "
         << height << ", "
         << maxColor << endl; 
```

在`Image(const Image&)`, 之后`maxColor = imageToCopy.maxColor;`:

```
 cout << "Image(Image): "
         << fileType << ", "
         << width << ", "
         << height << ", "
         << maxColor << endl; 
```

这是输出：

```
Testing standard constructor, opening tux.ppm
Image(tux.ppm): P3, 0, 0, 0
Calling flip method
Calling dither method
Saving the flipped and dithered image
Creating a 2nd image object, using tux.ppm again with the standard constructor
Image(tux.ppm): P3, 32767, 1656563112, 17 
```

换句话说，你正在阅读垃圾。第一次通过时，我碰巧读取了 0x0 并返回了一个空图像。然后我读了 32767x1656563112 并创建了一个巨大的垃圾图像，这需要很长时间，我不想等待，但我可以想象复制它会出现段错误。

为了验证是否是这种情况，请查看输出为 tux_transformed.ppm 的内容：

```
P3
0 0
0 
```

当然，我没有你的 tux.ppm 文件，但是我从不同的来源向它扔了一堆示例 PPM，它们都有同样的问题。

作为一个疯狂的猜测，您的问题是您没有处理 PPM 注释，因此您试图将其读取为例如宽度。但这真的没关系。如果您的代码可以创建垃圾对象，则尝试复制它们可能会崩溃。

# python - 在 Python App Engine 中复制 blob 时如何确保保留 Blob 元数据

> ID：13183942
> 
> 赞同：0
> 
> 时间：2012-11-01T19:12:50.037
> 
> 标签：python, google-app-engine, python-2.7, blobstore

我正在将图像文件上传到服务器并调整其大小以节省数据存储中的磁盘空间。我调整大小然后删除原始 blob 并仅保留 blob 的 smallVersion 的方法会删除所有元数据。有没有办法从原始 blob 复制 Blob 元数据并将其添加到新的较小版本中？

```
def post(self):
    upload_files = self.get_uploads('file')
    blob_info = upload_files[0]
    if blob_info:
        img = images.Image(blob_key=blob_info)
        img.im_feeling_lucky()
        img.resize(width=600, height=800)
        smallVersion = img.execute_transforms(output_encoding=images.JPEG)
        file_name = files.blobstore.create(mime_type='image/jpeg')
        with files.open(file_name, 'a') as f:  
            f.write(smallVersion)
        files.finalize(file_name)
        blob_key = files.blobstore.get_blob_key(file_name)
        blobstore.delete(blob_info.key())
        blobCacheURL = images.get_serving_url(blob_key) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:29:46.247

使用 Files API 创建 blob 时，可以设置上传的文件名：

```
file_name = files.blobstore.create(mime_type='image/png',_blobinfo_uploaded_filename=file_name_from_url) 
```

在编写文件时，我不知道您可以设置的其他 blob 属性。您是否在寻找 mime_type 之外的其他属性？

# design-patterns - 领域模型中的策略模式

> ID：13183943
> 
> 赞同：3
> 
> 时间：2012-11-01T19:13:19.807
> 
> 标签：design-patterns, strategy-pattern

我遇到了一个应该使用域模型中的策略模式的例子。我有一个代表系统用户的**用户类。**每个用户在使用系统时可能会收到请求。在接收到请求后，一些处理逻辑是可能的：

*   自动删除请求
*   通知用户收到的请求
*   ETC...

在这种情况下，似乎调整了策略模式。我有一个名为**RequestReceivedPolicy**的接口，其中有多个实现该接口的类（即每个处理逻辑一个类）。**User**类持有与所选策略对应的类的一个实例的引用。

这在对象方面似乎是正确的。我的问题涉及持久性方面，在我的情况下，它是一个关系数据库。用户通过管理界面选择策略。我想保留此选择，以便下次用户登录时保存此信息。**我考虑过持久化User**类持有的实例，但我认为这不是正确的方法，因为这个实例更多的是关于逻辑而不是数据。

谢谢

* * *

***编辑：***

```
public RequestReceivedPolicy {
    public boolean processRequest(); 
}

public IgnoreRequestPolicy implements RequestReceivedPolicy {
    public boolean processRequest(){
       //ignore logic
    } 
}

public CustomRequestPolicy {
    private int someData1;
    private String someData2;

    public boolean processRequest(){
       //custom logic that uses someData1 and someData2
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:47:31.647

策略选择持久性的位置取决于该策略在何处/如何传入或配置到您的`User`类中，而您并没有真正详细说明。

例如，如果您的`User`班级有这样的事情：

```
class User
{
   // policy is passed in during ctor
   public User(object otherArgs, RequestReceivedPolicy policy)
   {
   }
} 
```

...那么负责创建的类`User`可能必须在`User`.

同样，如果 User 对象简单地持有 RequestReceivedPolicy 引用，如下所示：

```
class User
{
   public User(object otherArgs)
   {
   }

   public void setPolicy(RequestReceivedPolicy policy)
   {
      _currPolicy = policy;       
   }

   public RequestReceivedPolicy getPolicy()
   {
      return _currPolicy;       
   }

} 
```

...并且`User`该类**无法**设置自己的 Policy 对象，然后，您必须再次依赖外部实体来保持策略选择。

如果相反，策略选择被“拉”到 User 类中，如下所示：

```
class User
{
   public User(object otherArgs, RequestReceivedPolicyProvider policyProvider)
   {
   }

   public void someStimulii(object criteria, ...)
   {
      _currPolicy = _policyProvider.getPolicy(criteria);
   }

} 
```

...或这个...

```
class User
{
   public User(object otherArgs)
   {
   }

   public void someStimulii(object criteria, ...)
   {
      _currPolicy = PolicyProvider.getInstance().getPolicy(criteria);
   }

} 
```

...然后用户对象应该保持其选择，以便它可以在稍后重新创建/构造时拉出该策略对象。在这种情况下，需要持久化的是“标准”，如果`RequestReceivedPolicy`有额外的方法来返回该标准可能会有所帮助：

```
RequestReceivedPolicyConfig policyConfig =  _currPolicy.getConfiguration(); 
```

该`RequestReceivedPolicyConfig`对象应该对 User 对象不透明，但在内部可能是支持持久性的简单字典。然后用户可以将其传递给持久层，而无需对其了解太多。从持久层拉出来时，它用于`RequestReceivedPolicy`使用提供程序重新安装。至少，每个`RequestReceivedPolicyConfig`对象都包含 `RequestReceivedPolicy`.

可以有一个混合，其中策略通过 set/get 推送，但用户对象也可以通过类似上述的方式拉入新策略，`PolicyProvider.getInstance().getPolicy(criteria)`然后您仍然允许用户对象利用`RequestReceivedPolicyConfig`基于方法或保持持久性外部的。

# hadoop - 对于一个大型的 mapreduce 作业，有一些挥之不去的 reducer，这个作业可以安全地缩小规模吗？

> ID：13183944
> 
> 赞同：0
> 
> 时间：2012-11-01T19:13:27.000
> 
> 标签：hadoop, elastic-map-reduce

克里斯史密斯回答了这个问题并说我可以发布它。

如果您有一个 200 节点的 mapreduce 作业，并且只有 3 个运行的 reduce 作业仍然存在，那么关闭除 master 和 3 个正在运行的作业之外的所有节点是否安全？如果出现需要更换的坏节点，可能还会增加一些？

如果这个问题的答案是“是”，那么奇怪的是 emr 在大多数节点不使用时不会自动关闭它们。

最近有几项工作大部分都完成了，但有一些减少了挥之不去。我认为这让我们付出了代价，因为未使用的节点一直存在。

我能想到的有这些问题：

-- 数据何时被复制到 S3？如果一个节点在运行reduce方面没有被使用，是否仍然需要它来复制到S3？在这种情况下，我的问题的答案是你基本上永远不会安全地关闭节点——如果 3 个作业之一失败会发生什么？主/作业协调员应将其重新分配给另一个节点。我想你是安全的，只要它可以跟踪哪些盒子正在运行，并且不会错误地分配给已关闭的盒子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:13:27.000

> 如果您有一个 200 节点的 mapreduce 作业，并且只有 3 个运行的 reduce 作业仍然存在，那么关闭除 master 和 3 个正在运行的作业之外的所有节点是否安全？如果出现需要更换的坏节点，可能还会增加一些？
> 
> 如果这个问题的答案是“是”，那么奇怪的是 emr 在大多数节点不使用时不会自动关闭它们。

请记住，EMR 是 Hadoop 上的一个非常薄的层。如果您在 Amazon 的结构上进行分布式计算，您可能会更高效地使用针对其特定需求定制的东西，这些东西根本不像 Hadoop 或 Map/Reduce。如果您正在使用 Hadoop 做大量繁重的工作，您通常最好使用自己的集群，或者至少使用云中的专用集群（这样数据已经在本地磁盘上切片，输出只需要持久保存到本地磁盘）。EMR 的主要优点是它快速而肮脏，并且可以很好地连接到 AWS 的其他部分（如 S3）。

> 最近有几项工作大部分都完成了，但有一些减少了挥之不去。我认为这让我们付出了代价，因为未使用的节点一直存在。

它绝对会让你付出代价，特别是在运行时间方面。我首先会担心为什么完成时间如此不统一。

> 我能想到的有这些问题：
> 
> -- 数据何时被复制到 S3？如果一个节点在运行reduce方面没有被使用，是否仍然需要它来复制到S3？在这种情况下，我的问题的答案是你基本上永远不会安全地关闭节点

如果您指的是作业的输出，如果您将 S3 作为作业配置的输出路径，则给定任务的数据将在任务退出之前写入 S3。

> -- 如果 3 个工作中的一个失败了怎么办？主/作业协调员应将其重新分配给另一个节点。我想你是安全的，只要它可以跟踪哪些盒子正在运行，并且不会错误地分配给已关闭的盒子。

嗯......它比这更复杂......当新节点被分配工作时，它必须从某个地方提取数据。这通常来自首先生成数据的映射器。如果它们不再存在，则可能需要重新运行地图任务（或者更有可能：作业将失败）。通常地图输出的复制因子是 1，所以这是一个完全合理的场景。这是 Hadoop 作业可以使其“完成百分比”倒退的几个原因之一……映射器甚至可以从 100% 倒退到 <100%。

与此相关：可以想象，根据这些 reducer 作业所处的阶段，它们还没有收到所有输入给它们的 map 输出。显然在那种情况下杀死错误的映射器是致命的。

我认为强调仅脱机 TaskTracker 节点与运行 TaskTracker + DataNode 服务的节点之间的区别很重要。如果你取消了超过后者，你将丢失 HDFS 中的块，这通常对你的工作来说不是一件好事（除非你真的不将 HDFS 用于分配你的工作之外的任何事情）。您可以一次关闭几个节点，然后运行重新平衡器以“鼓励”HDFS 将所有块的复制因子恢复到 3。当然，这会触发网络流量和磁盘 I/O，这可能减慢你剩余的任务。

tl; dr：杀死节点可能会出现问题。虽然您可以确信，在通知 JobTracker 任务已完成时，将其输出写入 S3 的已完成任务已完全写出其所有输出，但对于 map 任务则不能这样说，它写入输出到他们的本地目录并将数据异步传输到reducer。即使所有映射输出都已传输到它们的目标减速器，如果你的减速器失败（或者如果推测执行触发另一个节点上的任务启动），你*真的*需要那些其他节点，因为 Hadoop 可能会转向它们用于重新分配的减速器的输入数据。

- 克里斯

PS 这实际上也可能是非 EMR Hadoop 设置的一大痛点（而不是为节点支付比您需要的时间更长的时间，它表现为当您有工作时节点处于空闲状态，以及大量的计算时间节点故障造成的损失）。作为一般规则，避免这个问题的技巧是：保持你的任务大小相当一致，并在 1-5 分钟的范围内，启用推测执行（在节点性能几乎一致的 EMR 世界中非常重要），保持复制因素远高于给定作业的预期节点损失（取决于您的节点可靠性，一旦您在一天的作业运行中跨越 >400 个节点，您就会开始考虑复制因子 4），并使用一个作业调度程序，允许新作业在旧作业仍在完成时启动（现在这通常是默认设置，但它是引入的全新事物~Hadoop 0.20 IIRC）。我什至听说过一些疯狂的事情，比如将 SSD 用于 mapout dirs（虽然它们可以从所有写入中快速磨损，但它们的失败场景对于 Hadoop 作业来说往往不是灾难性的）。

# ejb - 我如何在 ejb-ql 中做类似的声明？

> ID：13183953
> 
> 赞同：0
> 
> 时间：2012-11-01T19:14:16.300
> 
> 标签：ejb, ejb-3.0, ejbql

> **可能重复：**
> [类似子句 JPQL 中的参数](https://stackoverflow.com/questions/1341104/parameter-in-like-clause-jpql)

我从一个例子中得到了这段代码，我如何用 ebj ql 进行搜索？

```
SELECT OBJECT(p)
FROM Person p
WHERE (p.name LIKE ?1) 
```

我如何从这里继续？我想返回 p.name 包含字符串“test”的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:21:53.553

我找到了解决方案。这是一个例子。

```
Query query = em.createQuery("SELECT c FROM TestEntity c WHERE   c.titleLIKE :searchString");
query.setParameter("searchString", "%" + "test" + "%"); 
```

# java - 在 hadoop mapreduce 应用程序中访问来自其他文件系统的文件以及 hdfs 文件

> ID：13183966
> 
> 赞同：4
> 
> 时间：2012-11-01T19:15:22.363
> 
> 标签：java, hadoop

我知道我们可以从普通的 java 应用程序中调用 map-reduce 作业。现在，在我的情况下，map-reduce 作业必须处理 hdfs 上的文件以及其他文件系统上的文件。在 hadoop 中，我们是否可以在访问其他文件系统的文件的同时使用 hdfs 上的文件。那可能吗 ？

所以基本上我的意图是我有一个大文件，我想把它放在 HDFS 中进行并行计算，然后将该文件的块与其他一些文件进行比较（我不想放在 HDFS 中，因为它们需要被访问一次作为全长文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:01:04.527

It should be possible to access non-HDFS file system from mapper/reducer tasks just like any other tasks. One thing to note is that if there a are say 1K mappers and each of them will try to open the non-HDFS file, this might lead to a bottle neck based on the type of the external file system. The same is applicable with mappers pulling data from a database also.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T21:26:23.623

您可以使用[分布式缓存](http://hadoop.apache.org/docs/r1.0.3/mapred_tutorial.html#DistributedCache)将文件分发给您的映射器，他们可以在他们的`configure()`方法中打开和读取文件（不要读取它们，`map()`因为它会被多次调用。）

**编辑**

为了在 map reduce 作业中从本地文件系统访问文件，您可以在设置作业配置时将这些文件添加到分布式缓存中。

```
JobConf job = new JobConf();
DistributedCache.addCacheFile(new URI("/myapp/lookup.dat#lookup.dat"), job); 
```

MapReduce 框架将确保您的映射器可以访问这些文件。

```
public void configure(JobConf job) {
    // Get the cached archives/files
    Path[] localFiles = DistributedCache.getLocalCacheFiles(job);

    // open, read and store for use in the map phase.
} 
```

并在您的工作完成后删除文件。

# java - 没有 Eclipse 控制台输出窗口（Java）？

> ID：13183968
> 
> 赞同：-2
> 
> 时间：2012-11-01T19:15:25.357
> 
> 标签：java, eclipse

![ [http://oi49.tinypic.com/eu0yth.jpg][1]](http://oi49.tinypic.com/eu0yth.jpg][1])

该图像显示了控制台输出给我的信息。我检查了错误文件，没有错误？

这就像 5 小时前一样工作？当我运行它们时，它在不同类型的程序上为我提供了完全相同的控制台输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T19:18:28.540

这可能是实际问题的原因。

如果有刺痛，您不应该使用`==`相等性检查。用于`.equals()`对 Java 中的任何类型的对象进行相等性检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T19:25:40.190

您没有运行正确的程序。显示的源代码具有类名，`DoesMyFinchWork`而错误屏幕（控制台输出标题栏）显示，您运行了`AquaLayoutStyle`类。

请右键单击`DoesMyFinchWork`源文件并选择`Run As -> Java Application`运行您的 `DoesMyFinchWork`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T19:18:45.570

也就是AquaLayoutStyle的main方法执行的stderr输出

# php - 使用 php 中的 curl 将文件上传到 Slim 框架

> ID：13183972
> 
> 赞同：2
> 
> 时间：2012-11-01T19:15:34.173
> 
> 标签：php, file-upload, curl, slim

> **可能重复：**
> [无法在 heroku php 应用程序中使用 curl 上传文件](https://stackoverflow.com/questions/8941899/failing-to-upload-file-with-curl-in-heroku-php-app)

在 php 中处理文件上传后，我尝试使用 curl 将该文件发送到使用 Slim 框架的 rest api。但是，$_FILES 在到达 Slim 中的函数后总是为空的。

发件人.php

```
if(move_uploaded_file($_FILES['myFile']["tmp_name"], $UploadDirectory . $_FILES['myFile']["name"] ))
{
    $ch = curl_init();
    $data = array('name' => 'test', 'file' => $UploadDirectory . $_FILES['myFile']["name"]);

    curl_setopt($ch, CURLOPT_URL, 'http://localhost/slimlocation/upload/');
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

    curl_exec($ch); 
 } 
```

以及在 Slim 中接收请求的函数：

```
$app->post('/upload/', function() use ($app) {
    if(isset($_FILES)){

        // count is always zero
        echo count($_FILES);

    }
}); 
```

我是否错误地发送了文件和/或是否可以做我正在尝试的事情？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:24:50.437

据我所知，您需要使用更多选项来使用 curl 上传文件。见[这里](http://php.net/manual/en/function.curl-setopt.php)。

查看**CURLOPT_UPLOAD**选项和 CURLOPT_POSTFIELDS 的描述**，**它说您需要在文件名之前使用 @ 来上传（并使用完整路径）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:12:02.693

这些是我需要的更改，并且有效：

```
$filepath = str_replace('\\', '/', realpath(dirname(__FILE__))) . "/";
$target_path = $filepath . $UploadDirectory . $FileName;
$data = array('name' => 'test', 'file' => '@'.$target_path); 
```

# version-control - 跟踪子存储库中的内部库

> ID：13183973
> 
> 赞同：1
> 
> 时间：2012-11-01T19:15:36.620
> 
> 标签：version-control, mercurial, dependency-management, subrepos, mercurial-subrepos

我们正在开发一个内部框架，多个项目将使用该框架。这个想法是将整个框架作为每个项目存储库的可变子存储库进行跟踪。这导致了以下子存储库树（请参阅[瘦壳存储库](http://mercurial.selenic.com/wiki/Subrepository#Use_a_thin_shell_repository_to_manage_your_subrepositories)）：

```
ProjectMaster/
    Project/
    CommonLib/
    FrameworkMaster/
        Framework/
        CommonLib/ 
```

*   这对你有意义吗？是否有更好/更简单的方法来处理这些不涉及子存储库的依赖项？
*   具体来说，拥有两个 CommonLib 子存储库是否有意义？
*   如果没有，Project 使用 FrameworkMaster/CommonLib 是否有意义？如果依赖关系更复杂，这可能会变得混乱。
*   你会在哪里打开功能分支？上主？仅在相关的子存储库中？
    *   如果您在主服务器上没有功能分支，则每次克隆存储库时，您最终都会获得最后一次提交的子存储库状态，这可能会将任何子存储库放在任何随机功能分支中。很混乱。
    *   如果你在 master 上有特性分支，你仍然需要在至少一个 subrepo 中有一个特性分支，以避免在那里有未命名的头。

一般来说，这个解决方案听起来很难使用。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:54:15.347

根据[瘦壳存储库](http://mercurial.selenic.com/wiki/Subrepository#Use_a_thin_shell_repository_to_manage_your_subrepositories)文档中的描述：

```
For a thin-shell repository, all repositories containing 'real' code 
have no subrepositories of their own (ie. they are leaf nodes). They can 
thus be treated as completely ordinary repositories and a developer can 
largely ignore the additional complexities of subrepositories. Work can 
continue in these repositories even if their siblings become unavailable. 
```

您描述的结果结构具有包含“真实”代码的嵌套子存储库，因此不是推荐的方式。根据 mercurial 文档，推荐的结构如下（我不知道 /FrameworkMaster/ 是否仅作为嵌套子存储库的占位符包含在内，或者它也有“真实”代码。如果 /FrameworkMaster/ 也有“真实”代码那么它也应该作为兄弟叶节点包含在以下内容中）：

```
ProjectMaster/
    Project/
    Framework/
    CommonLib/ 
```

所以，回答你的问题：

> *   这对你有意义吗？是否有更好/更简单的方法来处理这些不涉及子存储库的依赖项？

更好/更简单的方法是使用瘦壳存储库来简化复杂的依赖关系。

> *   具体来说，拥有两个 CommonLib 子存储库是否有意义？

如果 Project 和 Framework 都依赖于CommonLib 的**相同** *版本*或*分支*，那么在这两个地方都有它是没有意义的。但是，如果由于某些遗留原因，项目和框架需要**不同** *版本*或*分支*的 CommonLib，那么在这两个地方都有 CommonLib 确实有意义。

> *   你会在哪里打开功能分支？上主？仅在相关的子存储库中？

在这里不确定您所说的功能分支是什么意思。你的意思是在这里说“未来”吗？

# sql - 如何在左右连接顺序中获得完全外连接

> ID：13183975
> 
> 赞同：3
> 
> 时间：2012-11-01T19:15:40.910
> 
> 标签：sql, sql-server-2008-r2

请参考以下脚本

```
 declare @table1 table
    (
    col1 int
    )

    declare @table2 table
    (
    col2 int
    )

    insert into @table1 values(1)
    insert into @table1 values(2)
    insert into @table1 values(3)
    insert into @table1 values(5)
    insert into @table1 values(7)

    insert into @table2 values(1)
    insert into @table2 values(3)
    insert into @table2 values(3)
    insert into @table2 values(6)
    insert into @table2 values(4)
    insert into @table2 values(7) 
```

情况1：

```
select * from @table1 a left outer join @table2 b on a.col1=b.col2
    order by col1 
```

结果1：

```
 col1       col2        
     -----------  ----------- 
    |    1       |    1       |
    |    2       |    NULL    |
    |    3       |    3       |
    |    3       |    3       |
    |    5       |    NULL    |
    |    7       |    7       |
    --------------------------- 
```

案例二：

```
select * from @table1 a right outer join @table2 b on a.col1=b.col2
    order by col2 
```

结果 2：

```
 col1             col2        
     -----------  ----------- 
    |    1       |    1       |
    |    3       |    3       |
    |    3       |    3       |
    |    NULL    |    4       |
    |    NULL    |    6       |
    |    7       |    7       |
    --------------------------- 
```

实际案例：

```
select * from @table1 a full outer join @table2 b on a.col1=b.col2 
```

实际结果：

```
 col1        col2        
     -----------  ----------- 
    |    1       |    1       |
    |    2       |    NULL    |
    |    3       |    3       |
    |    3       |    3       |
    |    5       |    NULL    |
    |    7       |    7       |
    |    NULL    |    6       |
    |    NULL    |    4       |
    --------------------------- 
```

预期结果：

```
 col1        col2        
     -----------  ----------- 
    |    1       |    1       |
    |    2       |    NULL    |
    |    3       |    3       |
    |    3       |    3       |
    |    NULL    |    4       |
    |    5       |    NULL    |
    |    NULL    |    6       |
    |    7       |    7       |
    --------------------------- 
```

我尝试用左右连接查询联合所有，但它使结果集加倍。有没有办法让我得到这个预期的输出。

谢谢，埃森。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T19:19:42.263

您可以使用

```
SELECT *
FROM   @table1 a
       FULL OUTER JOIN @table2 b
         ON a.col1 = b.col2
ORDER  BY Isnull(col1, col2) 
```

获得您想要的订单。没有`ORDER BY`任何订购保证。

# magento - Magento SSL 链接没有从 Magento 函数中给出

> ID：13183977
> 
> 赞同：0
> 
> 时间：2012-11-01T19:15:53.943
> 
> 标签：magento, ssl, hyperlink

我在 Magento 中遇到 SSL 链接问题。我有 SSL 设置和工作......所有常规设置。

当我查看页面的源代码时，我仍然可以看到 HTTP 链接……这使 SSL 无效。

有问题的 url（与货币、商店切换器、导航有关）都由 Magento 函数提供。如：

*   getCategoryUrl();
*   getSwitchCurrencyUrl();

有谁知道可能出了什么问题……我可能错过了他们的东西吗？需要更多信息，请告诉我...

谢谢肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:38:03.570

这是一件好事，因为它“帮助”防止搜索引擎看到指向您的目录和产品页面的链接，就像 https 一样（导致重复内容）。另外据我所知，只有当您拥有资源（图像、css、js）时，它才会影响（无效）您的 ssl（因为浏览器 cookie）。如果您使用 ssl 在页面上查看源代码，magento 会自动将这些资源转换为 https

# python - 从 ZMQ 子队列获取特定消息

> ID：13183980
> 
> 赞同：2
> 
> 时间：2012-11-01T19:16:13.473
> 
> 标签：python, filter, zeromq, pyzmq

我有一个使用 ZMQ 的 python 消息传递应用程序。每个对象都有一个 PUB 和一个 SUB 队列，它们相互连接。在某些特定情况下，我想等待 SUB 队列中的特定消息，将我不感兴趣的消息留待以后处理。

现在，我正在获取所有消息并将那些我对 Python 队列不感兴趣的消息排队，直到找到我正在等待的消息。但他的意思是，在每个处理路由中，我需要首先在 Python 队列中检查旧消息。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:58:38.273

zmq 发布者不做任何排队......当没有 SUB 可用于接收这些消息时，它会丢弃消息。

在您的情况下，更好的方法是创建一个只订阅某些感兴趣的消息的通用子。这样，您可以启动所有不同的 SUB（即使在一个线程中并使用 zmq 轮询器），它们都将处理来自 PUB 的消息......

这就是 PUB/SUB 模式的主要用途。Subs 只订阅感兴趣的消息，因此无需在每个循环中循环通过消息队列来查找感兴趣的消息。

# html - 复选标记的 HTML 实体

> ID：13183982
> 
> 赞同：93
> 
> 时间：2012-11-01T19:16:21.103
> 
> 标签：html

是否有用于复选标记的 HTML 实体？

![绿色复选标记](../Images/2c66d8a810824a44d46b2b611c68f2da.png)

我在各种 html 实体备忘单中搜索了它，但没有找到

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-11-01T19:19:42.793

像这样的东西？

## ✔

如果是这样，请键入 HTML`&#10004;`

并`&#10003;`给出一个更轻的：

✓

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-01T19:20:02.163

这里有一对：[http ://www.amp-what.com/unicode/search/check%20mark](http://www.amp-what.com/unicode/search/check%20mark)

✓ ✔

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-01T19:20:10.790

HTML 和 XML 实体只是一种引用 Unicode 代码点的方式，无论实际页面的编码如何，它们都能可靠地工作，这使得它们对于在使用 7 位 ASCII 或某些其他编码的页面中使用深奥的 Unicode 字符很有用计划，最好是一次性的。它们还用于转义`<`、和字符`>`，因为它们在 SGML 中保留。`"``&`

[无论如何，根据 Wikipedia ( http://en.wikipedia.org/wiki/Tick_(check_mark)](http://en.wikipedia.org/wiki/Tick_(check_mark)) ) ，Unicode 有许多刻度/检查字符。

理想情况下，您应该以 UTF-8 或 16 等 Unicode 格式保存/存储您的 HTML，从而无需使用 HTML 实体来表示 Unicode 字符。尽管如此使用：`&#x2714;`✔。

```
&#x2714; 
```

> ✔

使用十六进制表示法，与

```
$#10004; 
```

（`2714`16 进制与 10 进制相同`10004`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T19:19:55.763

有 HTML 实体 ✓ 但它在某些较旧的浏览器中不起作用。

# c# - 当字符串中不出现搜索字符串时，String.indexOf 返回非负索引

> ID：13183988
> 
> 赞同：0
> 
> 时间：2012-11-01T19:16:55.293
> 
> 标签：c#, string, indexof

我正在解析一些日志文件以生成报告，但`String.IndexOf()`在几行中得到了奇怪的结果。在这里使用 C#。用一些代码最容易解释。

```
String line = "Jun 29 14:34:19 localhost axis2_http_server: CEF:0|AOPTIX|IRIS|4.1.0.1664.2839|AD214030000301-2610017|114|SDK_ACCESS|4|time=1340980459 comp=10 compinfo=CAPTURE from=8 result=0 user=Admin thread=1305:1962 msg=ation=0.00, faceColor=11.49 HR Face is ICAO compliant, inter-pupil distance=140.00\. No match found on LEFT eye (database is empty). LEFT_uid=-1, blacklist=0 No match found on RIGHT eye (database is empty). RIGHT_uid=-1, blacklist=0 CAPTURE successfully completed - SOAP response sent. ";
int ctIndex = line.IndexOf("CaptureTime=");
return ctIndex; 
```

> 预期：-1
> 实际：11

这只发生在大约一演出的日志文件中的 2 行。

实际实现的方法

```
private TimeSpan parseDuration(string line)
{
    int ctIndex = line.IndexOf("CaptureTime=");
    ctIndex = ctIndex + "CaptureTime=".Length;
    int endIndex = line.IndexOf(" ", ctIndex);
    string sDuration = line.Substring(ctIndex, endIndex - ctIndex);
    long duration;
    if (!long.TryParse(sDuration, out duration))
    {
        Console.WriteLine("Error Parsing Duration");
        return TimeSpan.Zero;
    }
    duration *= 1000;
    TimeSpan tsDuration = new TimeSpan(duration*1000);
    return tsDuration;
} 
```

换行代码

```
try{
    StreamReader sr = new StreamReader(FilePath);
    string line = sr.ReadLine();
    while(line != null)
    {
         TimeSpan ts = parseDuration(line);
         line = sr.ReadLine();
    }
catch(Exception ex){}
finally{sr.close();} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T19:31:47.923

您的方法在将其设置为 line.SubString() 后不检查 ctIndex 是否等于 -1。然后将“CaptureTime=”的长度添加到 ctIndex，然后执行子字符串。

由于这些原因，我怀疑您的代码在当前状态下对于不包含 CaptureTime= 值的日志消息将无法正常工作。这种功能性行为是有意的吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T19:32:27.067

您没有处理`CaptureTime=`在字符串中找不到的情况。

*   你有`ctIndex`= -1，然后你加上 12（的长度`CaptureTime=`）。这给了你11。
*   然后，您会找到之后的第一个空格，即时间戳和“localhost”之间的空格。那是在第15位。
*   然后，您得到从 11 到 15 的子字符串，即“4:19”。
*   最后，您尝试将其解析为 long，但显然不是。

您需要实际检查是否`ctIndex == -1`，然后正确处理。

# php - 在 xml 提要上不返回任何结果

> ID：13183989
> 
> 赞同：0
> 
> 时间：2012-11-01T19:16:59.773
> 
> 标签：php, xml

我对使用 xml 的 PHP 很陌生。我有一个 xml 文件，我正在上传提要，但它没有显示任何结果这是我的代码

```
function getFeed($feed_url, $uid) {
$cnt = 0;
set_time_limit(0);
$content = url_get_contents(urldecode($feed_url));
$validXML = simplexml_load_string($content);
 if($validXML===FALSE) {
         echo "false";
    return false;
 } 
 else {
    $x = new SimpleXMLElement($content);

    foreach($x->channel->item as $entry) {
        $category = $entry->category;
        $title = $entry->title;
        $link = $entry->link;
        $pubdate = $entry->pubDate;
        $desc = $entry->description;
        $query = "INSERT INTO `tbl_feed` ( `id` , `uid`, `category` , `title`, `link`, `pubdate`, `description` ) 
                                VALUES ('', '$uid', '$category', '$title' , '$link', '$pubdate', '".mb_convert_encoding($desc,"iso-8859-1","auto")."')";
        echo "<br />";
                    echo $cnt = $cnt+1 ."<br />";

//$dbFun->insertInto($query);
        print($query . "<br><br>");
        //  mysql_query("set CHARACTER SET UTF-8");
        //mysql_query($query); 
    }//foreach ends 
            exit();
}
} 
```

# c# - 合并目录中的文件，每次都附加一个换行符

> ID：13183991
> 
> 赞同：2
> 
> 时间：2012-11-01T19:17:26.010
> 
> 标签：c#, file, io, streamwriter

我在一个目录中有一堆 txt 文件，我想将它们合并到一个文件中。在每个文件的末尾，我想附加一个回车/新行。

在 c# 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T19:28:58.627

可能非常依赖内存消耗的单线：

```
File.WriteAllLines(
    targetFileName,
    Directory.GetFiles(srcFolder, "*.txt")
        .SelectMany(f=>
            File.ReadLines(f).Concat(new[] {Environment.NewLine}))); 
```

希望你能忍受最后的额外换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T19:22:19.833

我不会为您编写代码，但我会为您指明正确的方向。

*   使用[System.IO.Directory.GetFiles()](http://www.csharp-examples.net/get-files-from-directory/)方法遍历文件
*   使用[StreamReader](http://www.dotnetperls.com/streamreader)将文件读入缓冲区，在每个文件后附加一个换行符。
*   使用[StreamWriter](http://www.dotnetperls.com/streamwriter)将缓冲区写回输出文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T19:33:40.607

这是一种声明性方法[`Directory.EnumerateFiles`](http://msdn.microsoft.com/en-us/library/dd413233.aspx)，它适用于大型目录，因为它在发现文件名时会流式传输文件名。

```
var lines = from file in Directory.EnumerateFiles(directory, "*.txt")
            from line in File.ReadLines(file).Concat(new[]{Environment.NewLine})
            select line;
File.WriteAllLines(outputFileName, lines); 
```

这种方法的好处：

*   **易读**易懂

*   **如果您有很多文件（> 10000），则可**并行化：****

     **只需添加`.AsParallel()`到第一行的末尾。内存使用量当然会增加，但您会更快地完成工作，尤其是对于数十万个文件。** 

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T19:25:55.587

我也不为您编写代码，但我使用以下代码来执行此操作，我记得文件名为 1.txt、2.txt 等，因此我可以遍历整个文件夹

```
 private void merge()
    {
        string[] fullFile = new string[152];
        System.IO.StreamWriter data = new System.IO.StreamWriter(filepath);
        for (int i = 1; i < 152; i++)
        {
            try
            {
                string fullfile = System.IO.File.ReadAllText(filepath);
                data.WriteLine(fullfile + "return\n");

            }
            catch { }
        }
        data.Close();

    } 
```**

# asp.net - 基于角色组重定向用户

> ID：13183994
> 
> 赞同：0
> 
> 时间：2012-11-01T19:17:34.407
> 
> 标签：asp.net

我有一个在页面加载时调用的非常简单的方法，它看起来像这样

```
 Protected Sub identify()

    If User.Identity.IsAuthenticated Then

    Else
        Response.Redirect("login.aspx")
    End If
End Sub 
```

我想要做的是根据用户所属的角色组进行重定向。因此，如果他们经过身份验证，但不是“管理员”用户组的一部分，我会将他们重定向到不同的页面......类似于

```
 Protected Sub identify()

    If User.Identity.IsAuthenticated Then
       If user.Identiy.IsInRoleGroup("Admin")
         Response.Redirect("AdministratorDefault.aspx")
       End If
    Else
        Response.Redirect("login.aspx")
    End If
End Sub 
```

这样的事情可能吗？我找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:21:38.227

`If (User.IsInRole("Administrator")) ... End If`

[http://msdn.microsoft.com/en-us/library/system.security.principal.windowsprincipal.isinrole.aspx](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsprincipal.isinrole.aspx)

# mysql - 试图在 MySQL 中的几个变量上找到一个单词

> ID：13183995
> 
> 赞同：1
> 
> 时间：2012-11-01T19:17:37.243
> 
> 标签：mysql, variables

我向 MySQL 询问其中一个字段是否包含 $Especialidad 变量中的某个单词。我在问这个词是否包含在几个变量之一中。我有以下代码，但那部分不起作用。

```
SELECT *
FROM   wp_consultte
WHERE  genero = '$Sexo'
        OR estadocivil = '$Civil'
           AND ( opc = '$Especialidad'
                  OR opd = '$Especialidad'
                  OR osp = '$Especialidad'
                  OR comisiones = '$Especialidad'
                  OR regulaciones = '$Especialidad'
                  OR programas = '$Especialidad'
                  OR regimenes = '$Especialidad'
                  OR ordenamiento = '$Especialidad'
                  OR negociadores = '$Especialidad'
                  OR logistica = '$Especialidad' ) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T19:21:06.043

使用“反向”`IN`子句：

```
SELECT *
FROM   wp_consultte
WHERE  genero = '$Sexo'
OR estadocivil = '$Civil'
AND '$Especialidad' in (opc, opd, osp, comisiones, ...) 
```

请注意，如果任何列可以为空，则应将这些列包装起来`ifnull(col,'')`以确保列表中没有空值，否则您将无法获得匹配项（这正是 SQL 的工作方式）。

注意：`OR`不带括号使用时要小心！`AND`优先，并且很容易在没有括号的情况下错误地编码您的条件。

### 编辑：

如果你想使用`LIKE`而不是完全匹配，你可以这样做：

```
WHERE concat(opc, opd, osp, comisiones, ...) LIKE concat('%','$Especialidad','%') 
```

这会将变量转换为类似模式的开放式模式，该模式匹配字符串中的任何位置。为了完全严格，您应该在列之间插入一个分隔符，否则它可以匹配从一个结尾到下一个开头的交叉。