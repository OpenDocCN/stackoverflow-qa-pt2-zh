# StackOverflow 问答 16174000-16174999

# oracle - oracle SAMPLE 是否适用于 where 过滤器？

> ID：16174001
> 
> 赞同：0
> 
> 时间：2013-04-23T15:57:44.170
> 
> 标签：oracle

我们使用 ORACLE，需要从表中获取随机行，满足特定条件。我搜索并发现该示例在这种情况下可能有用。但是，据我了解， Sample 返回整个表指定大小的随机子集。所以在我们的例子中，因为我们需要匹配特定 WHERE 条件的行，所以查询可能不会返回任何行，即使表包含该过滤器的行。

SELECT column FROM (SELECT column FROM table SAMPLE(10) WHERE COLUMN='abc') WHERE rownum = 1

在上面的查询中，如果 10% 的样本集不包含任何列 'abc' 的行，它将返回空结果（即使 90% 可能包含这样的行）

有什么建议可以纠正这种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:05:12.333

尝试这个：

```
WITH data AS (SELECT column FROM table WHERE COLUMN='abc')
SELECT column FROM data SAMPLE(10) 
WHERE rownum = 1 
```

# php - 更改来自其他页面的输入值

> ID：16174002
> 
> 赞同：1
> 
> 时间：2013-04-23T15:57:46.140
> 
> 标签：php, jquery, google-maps, google-maps-api-3

当移动地图中的拖动按钮在其他页面表单中更改值时，在页面中打开表单并在 colorbox 中打开谷歌地图从其他页面加载

表单页面：form.php

```
 <form action="ajax-trades/submit-edit.php"  method="POST">
<div id="address"></div>
                <input type="hidden" name="target" id="target" value="<?php echo $row['gmap']; ?>">
<input type="submit" onclick="window.scrollTo(0, 200);" value="submit" class="button"  />

</form> 
```

这是用于在其他页面中加载 Google 地图的 jquery：

```
 <script type="text/javascript">
$(function(){
function objToString (obj) {
            var str = '';
            for (var p in obj) {
                if (obj.hasOwnProperty(p)) {
                    str += obj[p] + ',' ;
                }
            }
            return str;
}
$("#test").gmap3({
  marker:{
    latLng: [35.712926551232044, 51.40896647885131,],
    options:{
      draggable:true
    },
    events:{
      dragend: function(marker){
        var position = (marker.getPosition());
        //$("#map").html(position[2]);
        //var stingposition = objToString (position);
        $("#address").html('<input type="hidden" name="map" value="' + position.toString() + '" />');

        $(this).gmap3({
          getaddress:{
            latLng:marker.getPosition(),
            callback:function(results){
              var map = $(this).gmap3("get"),
                infowindow = $(this).gmap3({get:"infowindow"}),
                content = results && results[1] ? results && results[1].formatted_address : "no address";
              if (infowindow){
                infowindow.open(map, marker);
                infowindow.setContent(content);
              } else {
                $(this).gmap3({
                  infowindow:{
                    anchor:marker,
                    options:{content: content}
                  }
                });
              }
            }
          }
        });
      }    
    }
  },
  map:{
    options:{
      zoom: 14
    }
  }
});
});
</script> 
```

只是这条线对工作很重要，但不工作！

```
 $("#address").html('<input type="hidden" name="map" value="' + position.toString() + '" />'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:19:52.397

尝试使用这个：

```
$("#address", window.top.document).html('<input type="hidden" name="map" value="' + position.toString() + '" />'); 
```

**window.top**意味着您将在“根”页面上搜索**#address元素。**

# generics - 向 Scene 的 width 属性添加类型化侦听器

> ID：16174004
> 
> 赞同：0
> 
> 时间：2013-04-23T15:57:53.513
> 
> 标签：generics, javafx-2, listener, scene

我想为`Scene`'s添加一个监听器`widthProperty`，我想知道我做错了什么，这是我的代码：

```
ChangeListener<Double> widthListener = new ChangeListener<Double>() {

    @Override
    public void changed(ObservableValue<? extends Double> observable, Double oldValue, Double newValue) {
        System.out.println("width changed");
    }

};        

foo.getScene().widthProperty().addListener(dimensionsListener); 
```

对于带有 addListener 的行，这给了我以下错误：

```
The method addListener(ChangeListener<? super Number>) in the type ObservableValue<Number> is not applicable for the arguments (ChangeListener<Double>) 
```

Double 是 Number 的子类，所以我的代码有什么问题？谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:23:55.087

那为什么不使用 Number 呢？这有效：

```
scene.widthProperty().addListener(new ChangeListener<Number>() {
          @Override
          public void changed(ObservableValue<? extends Number> observableValue, Number number, Number number2) {
              System.out.println("changed");
          }
      }); 
```

# spring - @Scheduled 任务的固定延迟可以在运行时配置吗

> ID：16174006
> 
> 赞同：2
> 
> 时间：2013-04-23T15:57:59.483
> 
> 标签：spring, scheduled-tasks

我有一个已作为计划任务实现的数据库轮询器。我正在使用 Spring 3.0。我想使用restful api在运行时控制计划任务的固定延迟。有没有办法在春天实现这一目标？

截至目前我有：

```

@Scheduled(fixedDelay = 30000)
    公共无效民意调查（）{

        如果（轮询启用）{

            // 在数据库中做事的代码
        }
    }

```

我希望 fixedDelay 是动态的。谢谢。

# memory-management - 应用程序如何拥有静态内存地址？

> ID：16174011
> 
> 赞同：2
> 
> 时间：2013-04-23T15:58:20.647
> 
> 标签：memory-management, reverse-engineering, memory-editing

我正在使用称为作弊引擎的内存编辑应用程序。我将作弊引擎附加到游戏中。在我的游戏中，我有一个称为 HP 的 32 位整数。HP 存储在内存地址 A。如果我重新启动游戏，HP 将存储在新的内存地址 B。似乎使用 Cheat Engine，我可以进行指针扫描并找到一个静态内存地址 C，它始终存储该会话期间 HP 的内存地址。因此，如果我取消对 C 的引用，我总是会得到存储 HP 的内存地址。如何始终保证 C 始终是相同的内存地址？如果另一个应用程序启动并占用该内存区域怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:01:12.110

我不知道您使用的是什么操作系统，但大多数现代操作系统都为每个进程使用虚拟内存。每个程序的内存地址可以相同。操作系统和计算机将虚拟地址映射到 RAM 中的真实地址。

# xml-parsing - 使用 JAXB 和 Unmarshaller 过早结束文件。他响应的 xml 看起来对我有效

> ID：16174013
> 
> 赞同：5
> 
> 时间：2013-04-23T15:58:30.467
> 
> 标签：xml-parsing, jaxb

我不知道该怎么办了。一切似乎都是正确的；输入输出。

我生成 xml 文件并发送到某个服务进行验证。

回应是：

```
11:10:34,922 INFO  [STDOUT] printing out the input stream
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Response>
    <Method name="XML/Release/New" time="2013-04-23T15:10:35.1446238Z">
        <ResponseStatus>100</ResponseStatus>
    </Method>
</Response>
finished printing out the input stream
11:10:34,922 INFO  [STDOUT] got the unmarshaller
11:10:34,925 ERROR [PRNDataAccessUtil] Caught an error: javax.xml.bind.UnmarshalException
 - with linked exception: [org.xml.sax.SAXParseException: Premature end of file.] : null 
```

编码：

```
try {
            out = connection.getOutputStream();
            ByteArrayOutputStream bos = PRNPostNewsReleaseUtil.createNewsReleaseXml(newsRelease);
            bos.writeTo(out);

            JAXBContext context = JAXBContext.newInstance(Response.class.getPackage().getName());
            in = connection.getInputStream();

            BufferedReader inp = new BufferedReader(new InputStreamReader(in));
            System.out.println("printing out the input stream");
            String line;
            while((line = inp.readLine()) != null) {
                System.out.println(line);
            }
            System.out.println("finished printing out the input stream");

            Unmarshaller unmarshaller = context.createUnmarshaller();
            response = (Response) unmarshaller.unmarshal(in);

        } catch (Exception ex) {
            log.error("Caught an error: " + ex + " : " + ex.getMessage());
            return null;
        } finally {
            if (null != in) connection.disconnect();
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T16:17:49.393

您收到错误是因为`InputStream`在输出过程中已经推进到最后。假设您的缓冲区`BufferedReader`足够大以包含整个 XML 文档，您可以在输出后将其重置，然后对其进行解组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-01T02:26:23.550

有一次发生在我身上，我使用了错误的类名来构建 JAXBContext 对象，所以当我尝试编组一个对象时，创建了一个空的 XML 文件，从而导致 unmarshaller 失败。

因此，请确保使用您要编组的类实例化 JAXBContext 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-19T21:11:00.060

这里要注意的另一件事是，即使您没有在代码中显式读取缓冲区，而是有一个表达式监视来读取输入，它最终也会产生与增加流头相同的效果。在花费数小时调试此异常后发现了这一点。

# aem - 如何从自定义多字段组件中获取值？

> ID：16174016
> 
> 赞同：3
> 
> 时间：2013-04-23T15:58:39.023
> 
> 标签：aem, jcr

我创建了一个多字段自定义小部件，其中包含两个名称为 ./urlLink 和 ./urlText 的字段。现在我尝试使用以下代码将小部件中的值提取到组件的 jsp 中

```
String property = properties.get("./urlLink",String[].class);
for(String value: property ) {

  out.print(value);
}

out.print(property); 
```

但我无法获得它的价值，而是我得到了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:23:05.633

如果您正在获取一个属性并且它包含一个字符串值，则需要使用该方法`getString()`- 这样，当您拥有该属性时，您可以通过执行以下操作将字符串设置为该值：

```
Property property = properties.get("./urlLink",String.class);
String value = property.getString(); 
```

顺便说一句，如果您的返回应该是一个字符串数组，那么您将值放入的类型应该是一个字符串数组。

```
String[] value 
```

查看[day.com](http://www.day.com/maven/jsr170/javadocs/jcr-1.0/javax/jcr/Property.html#getString%28%29)上的文档以获取属性并获取其中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:15:32.607

`.\`看起来像一个错字：您在访问它时没有为属性名称添加前缀。

我猜你有一个`NullPointerException`，对吧？`./urlLink`那是因为值映射 ( `properties`)中没有属性。无论如何，您都应该对此进行检查（这样它就不会被扔到没有内容的新页面上）。

如果这没有帮助 - 仔细检查您在内容中是否有属性（使用`.xml`或`.infinite.json`扩展名调用您的页面，然后仔细检查您是否可以将它们作为纯字符串读取（您应该能够 - CRX 有一些魔力, 智能类型转换）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T08:40:18.130

将自定义 xtype 注册为：

```
// registering the custom widget with the name dualfield
    CQ.Ext.reg("dualfield", CQ.Ext.form.DualField); 
```

然后你可以轻松地获取值：

String[] data = properties.get("multi",String[].class);

这里 multi 是具有多字段为 xtype 的小部件的名称

# c# - 在 C# 中自定义 MDI

> ID：16174017
> 
> 赞同：3
> 
> 时间：2013-04-23T15:58:41.923
> 
> 标签：c#, winforms, visual-studio-2010, mdi

在我的项目中，我必须一次运行多个接口。我使用了 isMdicontainer 属性。但问题是整个区域都转换为 MDI。我可以为它设置边界吗，就像在 Photoshop 中一样（菜单栏下方有工具栏，工具栏下方出现 Mdi）。

我喜欢 Photoshop 中用于切换图像的选项卡结构。我如何将其引入我的项目以在表单之间切换。我正在使用 VS 2010，在 C#（Win 表单）中做项目，net framework 3.5

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:01:22.310

您可以使用像面板这样的容器控件并将它们停靠在一边——这将减少 MDI 子区域的面积。

就选项卡而言，这与 MDI 模型不同。您可以尝试[使用 C# 浏览多文档界面 (MDI) 选项卡页](http://www.codeproject.com/Articles/12514/Multi-Document-Interface-MDI-tab-page-browsing-wit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:05:52.287

你可以做很多事情，

[此处](http://msdn.microsoft.com/en-us/library/ms233676%28v=vs.80%29.aspx)说明了以下任务：

*   为您的表单创建主菜单。菜单的实际名称会有所不同。
*   将 ToolStripPanel 控件添加到工具箱。
*   创建子窗体。
*   按 z 顺序排列 ToolStripPanel 控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:10:12.030

以下步骤应该让您开始。

*   在主窗体中添加 a`MenuBar`和`ToolStrip`a 。`TabControl`
*   将它们的`Dock`属性设置为`DockStyle.Top`.
*   调整大小以`TabControl`隐藏标签页。
*   当您打开一个新的 MDI 表单时，添加一个选项卡并选择它。

# ios - Slide UISlider programmatically

> ID：16174018
> 
> 赞同：-1
> 
> 时间：2013-04-23T15:58:43.710
> 
> 标签：ios, objective-c, cocoa-touch, uislider

I have a `UISLider` with certain values assigned to its each step. I'm getting those values from another VC and if the value is greater than the beginning of the slider, let's say the value is 50 out of 100 possible, I want to move the handle of the slider to represent that value, apparently to the middle and so on.

How do you do this easy task in iOS?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T16:04:18.820

Uh.. have you tried calling `setValue:animated`?

Or reading the docs?

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISlider_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISlider_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T16:03:52.677

By default `UISlider` value should be between 0 and 1 (unless you've set `minimumValue` & `maximumValue`)

```
[yourSlider setValue:0.5 animated:YES]; 
```

See `UISlider` documentation for more information: [http://developer.apple.com/library/ios/#documentation/uikit/reference/UISlider_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISlider_Class/Reference/Reference.html)

# dynamics-crm-2011 - Dynamics 2011 + ADFS 2.0 的单点登录不适用于模态窗口

> ID：16174019
> 
> 赞同：2
> 
> 时间：2013-04-23T15:58:44.067
> 
> 标签：dynamics-crm-2011, single-sign-on, adfs2.0

**背景：**

我安装了 dynamics crm 2011 (IFD)，并且我有一个 ASP.net 网站，我想在其中检索登录用户的详细信息。

我按照演练创建了一个配置为依赖方的网站，它似乎工作正常；我登录 crm，然后浏览到我的网站，用户的凭据在必要时可用。

**问题：**

在某些情况下，我想从 CRM 网站内以模式对话框的形式打开我的一个网页（这意味着 - 用户登录到 CRM 网站，按下按钮，然后显示我的一个页面的模式对话框出现）。

在这种情况下，我的网页根本不显示任何内容——地址栏表明它正在加载 sts 服务器的登录页面，但实际上什么也没发生，并且窗口被冻结。

查看 ADFS 跟踪我可以看到 2 个警告日志条目，如下所示：

```
Ignoring Invalid entry 'signoutCleanup;https%3a%2f%2fMyCrm.dev.com%3a4444%2f&walkthrough&https%3a%2f%2fMyCrm.dev.com%3a4444%2fdefault.aspx&https%3a%2f%2fMyCrm.dev.com%3a4444%2fdefault.aspx' in signout cookie.

Ignoring Invalid entry 'signoutCleanup;https%3a%2f%2fMyCrm.dev.com%3a444%2f&CRM+IFD+Relying+Party&https%3a%2f%2fauth.dev.com%3a444%2f&https%3a%2f%2fauth.dev.com%3a444%2f' in signout cookie. 
```

现在奇怪的是，如果我通过非模态窗口浏览到我的一个网页，然后再次打开同一个模态对话框 - 它工作正常。

查看用于浏览非模态对话框的 ADFS 日志，我可以看到一个警告——后者来自之前：

```
Ignoring Invalid entry 'signoutCleanup;https%3a%2f%2fMyCrm.dev.com%3a444%2f&CRM+IFD+Relying+Party&https%3a%2f%2fauth.dev.com%3a444%2f&https%3a%2f%2fauth.dev.com%3a444%2f' in signout cookie. 
```

之后，对我的网页的任何浏览（无论是模式还是非模式）都可以正常工作，而不会在 ADFS 上发出警告。

任何人都可以阐明这种行为吗？

# ruby-on-rails - Ruby 线程的重复结果

> ID：16174021
> 
> 赞同：2
> 
> 时间：2013-04-23T15:59:00.627
> 
> 标签：ruby-on-rails, ruby, multithreading

我需要通过从外部服务器获取图像来改进构建布料外观的 rake 任务。

当我尝试创建多个线程时，结果是重复的。

但是，如果我`sleep 0.1`在 each 之前放置`Thread.new`，代码就可以工作！为什么？

```
new_looks = []
threads = []

for look in looks
  # sleep 0.1 - when I put it, works!
  threads << Thread.new do
    # a external http request is being done here
    new_looks << Look.new(ref: look["look_ref"])
  end
end

puts  'waiting threads to finish...'
threads.each(&:join)

puts  'saving...'
new_looks.sort_by(&:ref).each(&:save) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:28:27.417

数组通常不是线程安全的。切换到线程安全的数据结构，例如 Queue：

```
new_look_queue = Queue.new
threads = looks.map do |look|
  Thread.new do
    new_look_queue.enq Look.new(ref: look["look_ref"])
  end
end

puts  'waiting threads to finish...'
threads.each(&:join)

puts  'saving...'
new_looks = []
while !new_look_queue.empty?
  new_look_queue << queue.deq
end
new_looks.sort_by(&:ref).each(&:save) 
```

*Queue#enq*将新条目放入队列；*Queue#deq 取出*一个，如果没有则阻塞。

如果您不需要`new_looks`按顺序保存，代码会变得更简单：

```
puts 'saving...'
while !new_look_queue.empty?
  new_look_queue.deq.save
end 
```

或者，甚至更简单，只需在线程内进行保存。

* * *

如果你有很多外观，上面的代码将创建比好的线程更多的线程。线程过多会导致请求处理时间过长，并消耗过多的内存。在这种情况下，考虑创建一些生产者线程：

```
NUM_THREADS = 8 
```

和以前一样，有一个完成工作的队列：

```
new_look_queue = Queue.new 
```

但现在还有一系列工作要做：

```
look_queue = Queue.new
looks.each do |look|
  look_queue.enq look
end 
```

每个线程都将一直存在，直到它停止工作，所以让我们在队列中添加一些“停止工作”符号，每个线程一个：

```
NUM_THREADS.times do {look_queue.enq :done} 
```

现在线程：

```
threads = NUM_THREADS.times.map do
  Thread.new do
    while (look = look_queue.deq) != :done
      new_look_queue.enq Look.new(ref: look["look_ref"])
    end
  end
end 
```

处理 new_look_queue 同上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:06:25.983

尝试将您的代码更新为此：

```
for look in looks
  threads << Thread.new(look) do |lk|
    new_looks << Look.new(ref: lk["look_ref"])
  end
end 
```

这应该可以帮助你。

**UPD：**忘记了 Thread.new(args)

# python - 下载远程图像并将其保存到 Django 模型

> ID：16174022
> 
> 赞同：45
> 
> 时间：2013-04-23T15:59:03.883
> 
> 标签：python, django, django-models

我正在编写一个 Django 应用程序，它将获取特定 URL 的所有图像并将它们保存在数据库中。

但我没有了解如何在 Django 中使用 ImageField。

设置.py

```
MEDIA_ROOT = os.path.join(PWD, "../downloads/")

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://example.com/media/", "htp://media.example.com/"
MEDIA_URL = '/downloads/' 
```

模型.py

```
class images_data(models.Model):
        image_id =models.IntegerField()
        source_id = models.IntegerField()
        image=models.ImageField(upload_to='images',null=True, blank=True)
        text_ind=models.NullBooleanField()
        prob=models.FloatField() 
```

下载_img.py

```
def spider(site):
        PWD = os.path.dirname(os.path.realpath(__file__ ))
        #site="http://en.wikipedia.org/wiki/Pune"
        hdr= {'User-Agent': 'Mozilla/5.0'}
        outfolder=os.path.join(PWD, "../downloads")
        #outfolder="/home/mayank/Desktop/dreamport/downloads"
        print "MAYANK:"+outfolder
        req = urllib2.Request(site,headers=hdr)
        page = urllib2.urlopen(req)
        soup =bs(page)
        tag_image=soup.findAll("img")
        count=1;
        for image in tag_image:
                print "Image: %(src)s" % image
                filename = image["src"].split("/")[-1]
                outpath = os.path.join(outfolder, filename)
                urlretrieve('http:'+image["src"], outpath)
                im = img(image_id=count,source_id=1,image=outpath,text_ind=None,prob=0)
                im.save()
                count=count+1 
```

我在一个视图中调用 download_imgs.py

```
 if form.is_valid():
                url = form.cleaned_data['url']
                spider(url) 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-23T16:49:05.010

[Django 文档](https://docs.djangoproject.com/en/1.11/ref/models/fields/#imagefield)始终是开始的好地方

```
class ModelWithImage(models.Model):
    image = models.ImageField(
        upload_to='images',
    ) 
```

**更新**

所以这个脚本有效。

*   循环下载图像
*   下载图片
*   保存到临时文件
*   适用于模型
*   保存模型

.

```
import requests
import tempfile

from django.core import files

# List of images to download
image_urls = [
    'http://i.thegrindstone.com/wp-content/uploads/2013/01/how-to-get-awesome-back.jpg',
]

for image_url in image_urls:
    # Stream the image from the url
    response = requests.get(image_url, stream=True)

    # Was the request OK?
    if response.status_code != requests.codes.ok:
        # Nope, error handling, skip file etc etc etc
        continue

    # Get the filename from the url, used for saving later
    file_name = image_url.split('/')[-1]

    # Create a temporary file
    lf = tempfile.NamedTemporaryFile()

    # Read the streamed image in sections
    for block in response.iter_content(1024 * 8):

        # If no more file then stop
        if not block:
            break

        # Write image block to temporary file
        lf.write(block)

    # Create the model you want to save the image to
    image = Image()

    # Save the temporary image to the model#
    # This saves the model so be sure that it is valid
    image.image.save(file_name, files.File(lf)) 
```

一些参考链接：

1.  [requests](http://docs.python-requests.org/en/latest/) - “HTTP for Humans”，我更喜欢 urllib2
2.  [tempfile](http://docs.python.org/2/library/tempfile.html) - 保存临时文件而不是磁盘
3.  Django 文件字段[保存](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.fields.files.FieldFile.save)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2017-04-27T06:53:38.047

如果您想保存下载的图像而不先将它们保存到磁盘（不使用`NamedTemporaryFile`等），那么有一种简单的方法可以做到这一点。

这将比下载文件并将其写入磁盘稍微快一些，因为这一切都是在内存中完成的。请注意，此示例是为 Python 3 编写的 - 该过程与 Python 2 中的过程相似，但略有不同。

```
from django.core import files
from io import BytesIO
import requests

url = "https://example.com/image.jpg"
resp = requests.get(url)
if resp.status_code != requests.codes.ok:
    #  Error handling here

fp = BytesIO()
fp.write(resp.content)
file_name = url.split("/")[-1]  # There's probably a better way of doing this but this is just a quick example
your_model.image_field.save(file_name, files.File(fp)) 
```

`your_model`您要保存到的模型实例在哪里，并且`.image_field`是`ImageField`.

有关更多信息，请参阅[io的文档。](https://docs.python.org/3/library/io.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T18:47:53.317

作为我认为你要问的一个例子：

**在 forms.py 中：**

```
imgfile = forms.ImageField(label = 'Choose your image', help_text = 'The image should be cool.') 
```

**在模型.py 中：**

```
imgfile =   models.ImageField(upload_to='images/%m/%d') 
```

所以会有来自用户的 POST 请求（当用户完成表单时）。该请求将基本上包含一个数据字典。字典保存提交的文件。要将请求集中在来自字段（在我们的示例中为 ImageField）的文件上，您可以使用：

```
request.FILES['imgfield'] 
```

当你构造模型对象（实例化你的模型类）时，你会使用它：

```
newPic = ImageModel(imgfile = request.FILES['imgfile']) 
```

为了以简单的方式保存它，您只需使用赋予对象的 save() 方法（因为 Django 太棒了）：

```
if form.is_valid():
    newPic = Pic(imgfile = request.FILES['imgfile'])
    newPic.save() 
```

默认情况下，您的图像将存储到您在 settings.py 中为 MEDIA_ROOT 指定的目录。

**访问模板中的图像：**

```
<img src="{{ MEDIA_URL }}{{ image.imgfile.name }}"></img> 
```

url 可能很棘手，但这里有一个简单的 url 模式的基本示例，用于调用存储的图像：

```
urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
        }),
   ) 
```

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-24T16:32:20.373

与上面@boltsfrombluesky 的答案类似，您可以在 Python 3 中执行此操作，而无需像这样的任何外部依赖项：

```
from os.path import basename
import urllib.request
from urllib.parse import urlparse
import tempfile

from django.core.files.base import File

def handle_upload_url_file(url, obj):
    img_temp = tempfile.NamedTemporaryFile(delete=True)
    req = urllib.request.Request(
        url, data=None,
        headers={
            'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.47 Safari/537.36'
        }
    )
    with urllib.request.urlopen(req) as response:
        img_temp.write(response.read())
    img_temp.flush()
    filename = basename(urlparse(url).path)
    result = obj.image.save(filename, File(img_temp))
    img_temp.close()
    return result 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T19:48:12.823

尝试这样做，而不是为图像分配路径......

```
 import urllib2
    from django.core.files.temp import NamedTemporaryFile
    def handle_upload_url_file(url):
        img_temp = NamedTemporaryFile()
        opener = urllib2.build_opener()
        opener.addheaders = [('User-agent', 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20120427 Firefox/15.0a1')]
        img_temp.write(opener.open(url).read())
        img_temp.flush()
        return img_temp 
```

像这样使用上面的功能..

```
 new_image = images_data()
    #rest of the data in new_image and then do this.
    new_image.image.save(slug_filename,File(handle_upload_url_file(url)))
    #here slug_filename is just filename that you want to save the file with. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-16T19:42:50.227

```
# this is my solution
from django.core import files
from django.core.files.base import ContentFile

import requests
from .models import MyModel

def download_img():
    r = requests.get("remote_file_url", allow_redirects=True)
    filename = "remote_file_url".split("/")[-1]

    my_model = MyModel(
        file=files.File(ContentFile(r.content), filename)
    )
    my_model.save()

    return 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-05T16:22:22.603

如果您通过覆盖模型的保存方法来修改文件名并在 django 中遇到随机无效文件名（如我）来保存图像。您可以跟进以下代码（从已接受的答案复制）：

```
lf = tempfile.NamedTemporaryFile()

for block in response.iter_content(1024*8):

        if not block:
            break

        lf.write(block)
    lf.name = name.  # Set your custom file name here
    dc = ImageFile(file=files.File(lf))

    dc.file.save() 
```

我已经用 django-storages 配置了我的存储，以便直接将媒体内容上传到 s3。由于某些原因，我无法替换文件名。经过一些研发，它奏效了。

**注意：我在模型中使用了 FileField，因此不需要几行代码**

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-12-16T11:25:32.523

```
def qrcodesave(request): 
    import urllib2;   
    url ="http://chart.apis.google.com/chart?cht=qr&chs=300x300&chl=s&chld=H|0"; 
    opener = urllib2.urlopen(url);  
    mimetype = "application/octet-stream"
    response = HttpResponse(opener.read(), mimetype=mimetype)
    response["Content-Disposition"]= "attachment; filename=aktel.png"
    return response 
```

# javascript - JQGRID：更改计算单元格的值后保存行

> ID：16174023
> 
> 赞同：0
> 
> 时间：2013-04-23T15:59:04.353
> 
> 标签：javascript, jquery, jqgrid

我被这个问题困住了。我有一个带有子网格的网格。当我编辑列的单元格值时，我的函数会遍历所有子网格行并从该列获取所有值并更改打开此子网格的父行的列的值。

这是我的功能代码：

```
function reloadGrid(rowid, dataResponse) {
    $('#' + rowid).parent().trigger('reloadGrid');
}

function calculate(rowid, cellname, value, iRow, iCol) {
    var id = $.jgrid.stripPref("_" + $.jgrid.stripPref(subGrid.getGridParam('idPrefix'), rowid), rowid);
    id = $.jgrid.stripPref("s_", id);
    var ids = subGrid.getDataIDs();
    var result = 0.0;
    for (var i = 0; i < ids.length; i++) {
        result = result + parseFloat(subGrid.getCell(ids[i], 'value'));
    }
    grid.setCell(id, 'Total', result);
    reloadGrid(rowid);
} 
```

之后我尝试使用它`setCell`，但它似乎只有在您编辑单元格时才有效，而不是在它的值自动更改时才有效。

```
grid.saveRow(id, function(){alert("It works!");}, 'foo/edit.html?identifier=' + grid.getCell(id, 'identifier')); 
```

我想要的是在单元格更改其值后保存打开子网格的父行。

提前致谢。

PS：`grid`和`subGrid`变量都是在JS开头定义的。我认为无需解释包含这些变量的内容...

**更新**

已经解决了，谢谢大家。
我所做的是在我当前编辑的行中获取`row_id`父网格的。`$.jgrid.stripRef(...)`使用一个函数，每次我保存我编辑的子网格数据时，我都会调用该函数，从`import`我的子网格中的列中获取所有值并将它们求和。在我得到总值之后，只需要做`grid.editCell(row_id, 'total', sumResult)`，`var data = grid.getRowData(row_id)`并`ajax`调用`URL`我发送编辑数据的地方，就像我通过表单一样：

```
$.ajax({
    url: 'foo/edit.html?identifier=' + data.identifier,
    type: 'PUT',
    dataType: 'json',
    contentType: 'application/json;charset=utf-8',
    data: JSON.stringify(data),
    success: null,
    error: function(jqXHR, status, errorText) {
               alert("HTTP Status code: " + jqXHR.status + "\nStatus text: "
               + status + "\nError: " + errorText);
    }
}); 
```

这就是我想做的。我不知道是否清楚，但我有解决方案。如果有人不明白，就问。**;)**

# python - 如何在 Django 中使用基于 SOAP 的数据库？

> ID：16174027
> 
> 赞同：1
> 
> 时间：2013-04-23T15:59:20.410
> 
> 标签：python, django, soap, django-models, suds

目前我有一个 Django 项目，我们称之为后端。有一个文件夹 api，我使用 Django-Tastypie 声明了这个资源：

```
from django.contrib.auth.models import User
from tastypie.resources import ModelResource, ALL
from tastypie.authentication import BasicAuthentication
from tastypie.authorization import DjangoAuthorization
from tastypie.cache import SimpleCache
from tastypie.throttle import CacheDBThrottle

class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        excludes = ['email', 'password', 'is_staff', 'is_superuser']
        authentication = BasicAuthentication()
        authorization = DjangoAuthorization()
        cache = SimpleCache()
        throttle = CacheDBThrottle()

        filtering = {
            'username' : ALL,
            'date_joined' : ['gt','lt','gte','lte','range']        
        } 
```

有了适当的路由规则，如果我访问类似的 URL `http://127.0.0.1:8000/api/v1/user?format=json`，我应该以 json 格式返回一些用户信息，但来自我的本地数据库。我不想使用任何本地数据库，除了可能使用一些虚拟数据进行测试。我希望这样的 get 请求能够使用我登录的会话的用户名和密码向某个远程服务器发出 SOAP 请求。

我已经有一个独立的 Python 应用程序，我可以在其中执行 SOAP 请求并使用[SUDS](https://fedorahosted.org/suds/)和预下载的 WSDL 文件获取 SOAP 响应。现在我想在我的 Dhango 项目中包含此功能，即我更改项目中 settings.py 中的设置，但我不必修改项目内的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:29:32.097

您可以定义自己的[自定义管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/#custom-managers-and-inheritance)来使用您的独立 Python 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:07:20.173

来自[美味的文档](http://django-tastypie.readthedocs.org/en/latest/tutorial.html#adding-to-the-api)。将此代码添加到您的 urls.py 应该可以工作：

```
from tastypie.api import Api
from my_app.api.resources import UserResource

v1_api = Api(api_name='v1')
v1_api.register(UserResource())

#old urlpatterns here

urlpatterns += patterns('',
  (r'^api/', include(v1_api.urls)),
) 
```

# directx - 在 DX10/DX11 中使用多个顶点缓冲区

> ID：16174028
> 
> 赞同：6
> 
> 时间：2013-04-23T15:59:20.863
> 
> 标签：directx, game-engine, directx-11

我有一个我一直在写的 C++ DirectX 11 渲染器。

我编写了一个 COLLADA 1.4.1 加载器来导入 COLLADA 数据以用于支持骨骼动画。

我现在正在验证加载程序（并且我之前在另一个我之前使用不同技术编写的渲染器中支持 COLLADA）并且我遇到了将 COLLADA 与 DX10/11 匹配的问题。

我有 3 个单独的数据顶点缓冲区：

唯一顶点位置的顶点缓冲区。唯一法线的顶点缓冲区。唯一纹理坐标的顶点缓冲区。

这些顶点缓冲区包含不同的数组长度（位置有 2910 个元素，法线有超过 9000 个，纹理坐标大约有 3200 个。）

COLLADA 提供了一个三角形列表，它为我提供了给定三角形的每个数组的索引（起初冗长而奇怪，但一旦你使用它，最终它就会变得简单。）

知道 DX10/11 支持多个顶点缓冲区，我想我会用索引填充 DX10/11 索引缓冲区到每个缓冲区*** 和 ***（这是重要部分），这些索引对于给定点可能是不同的三角形。

换句话说，我可以设置三个顶点缓冲区，设置正确的输入布局，然后在索引缓冲区中放置等价于：

```
l_aIndexBuffer[ NumberOfTriangles * 3 ]

for( i = 0; i < NumberOfTriangles; i++ )
{
    l_aIndexBufferData.add( triangle[i].Point1.PositionIndex )
    l_aIndexBufferData.add( triangle[i].Point1.NormalIndex )
    l_aIndexBufferData.add( triangle[i].Point1.TextureCoordinateIndex )
} 
```

有关在 DirectX 中使用多个顶点缓冲区的文档似乎没有提供有关这如何影响索引缓冲区的任何信息（稍后会详细介绍。）

以这种方式运行代码会产生奇怪的渲染结果，我可以看到我间歇性正确绘制的网格（奇怪的多边形，但大约三分之一的点在正确的位置 - 提示 - 提示）

我想我在这一点（昨天）搞砸了我的数据或我的索引，所以我煞费苦心地验证了这一切，所以我认为我在搞砸我的输入或其他东西。我通过使用法线缓冲区和纹理缓冲区中的值来交替设置像素着色器使用的颜色值来消除这个问题，颜色是正确的，所以我没有遇到填充问题。

最终我得出的结论是 DX10/11 必须期望数据以不同的方式排序，所以我尝试以这种方式存储索引：

```
indices.add( Point1Position index )
indices.add( Point2Position index )
indices.add( Point3Position index )
indices.add( Point1Normal index )
indices.add( Point2Normal index )
indices.add( Point3Normal index )
indices.add( Point1TexCoord index )
indices.add( Point2TexCoord index )
indices.add( Point3TexCoord index ) 
```

奇怪的是，这产生了一个看起来 1/3 正确的渲染网格 - 提示 - 提示。

然后我推测可能 DX10/DX11 想要“按顶点缓冲区”存储的索引，这意味着我将首先添加所有三角形的所有位置索引，然后添加所有三角形的所有法线索引，然后添加所有纹理坐标索引三角形。

这产生了另一个 1/3 正确（看起来）的网格。

这让我想到 - 好吧，DX10/11 肯定不会为您提供从多个顶点缓冲区流式传输的能力，然后实际上每个三角形点只有一个索引？

仅在位置的顶点缓冲区中包含索引会生成正确渲染的网格，但不幸的是使用了错误的法线和纹理坐标。

似乎将法线和纹理坐标索引放入索引缓冲区会导致在正确渲染的网格上绘制错误。

这是预期的行为吗？

多个顶点缓冲区 - 一个索引缓冲区和索引缓冲区对于三角形的一个点只能有一个索引？

这对我来说真的没有意义。

帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T19:16:28.297

我脑海中的第一件事是：

所有支持计算着色器的硬件（几乎等于所有 DirectX 10 及更高版本）也支持[ByteAddressBuffer](http://msdn.microsoft.com/en-us/library/windows/desktop/ff471453%28v=vs.85%29.aspx)并且其中大部分支持[StructuredBuffer](http://msdn.microsoft.com/en-us/library/windows/desktop/ff471514%28v=vs.85%29.aspx)。因此，您可以将数组绑定为`SRV`s 并随机访问着色器中的任何元素。

像这样的东西（未经测试，只是伪代码）：

```
// Indices passed as vertex buffer to shader
// Think of them as of "references" to real data
struct VS_INPUT
{
    uint posidx;
    uint noridx;
    uint texidx;
}

// The real vertex data 
// You pass it as structured buffers (similar to textures)
StructuredBuffer<float3> pos : register (t0);
StructuredBuffer<float3> nor : register (t1);
StructuredBuffer<float2> tex : register (t2);

VS_OUTPUT main(VS_INPUT indices)
{
    // in shader you read data for current vertex
    float3 pos = pos[indices.posidx];
    float3 nor = nor[indices.noridx];
    float2 tex = tex[indices.texidx];

    // here you do something
} 
```

我们称之为“计算着色器方法”。您必须使用 DirectX 11 API。

你也可以用同样的方式绑定你的索引，并在着色器中做一些魔法。在这种情况下，您需要找出当前的索引 ID。可能您可以从 SV_VertexId 获取它。

也许您可以解决这些缓冲区并以其他方式绑定数据（与 DirectX 9 兼容的纹理采样！O_o）。

希望能帮助到你！

# mesh - Maya：创建临时 MFnMEsh 以实现平滑导出

> ID：16174029
> 
> 赞同：0
> 
> 时间：2013-04-23T15:59:25.393
> 
> 标签：mesh, maya, autodesk, exporter

我正在编写一个导出器，通过“generateSmoothMesh()”方法导出细分预览网格，如下所示：

```
MFnMesh mesh(mesh_dag_path);

MFnMesh subdiv_mesh(mesh.generateSmoothMesh()); 
```

但是在导出完成后，新的细分几何体会留在我的 Maya 场景中。我应该如何处理这种几何图形，或者这甚至是进行这种导出的正确方法吗？

我的第一反应是在导出完成后删除几何，如果这是正确的做法，有人知道他从 api 中删除几何的正确方法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:02:11.607

说你需要从 API 做这件事让我觉得这是一个命令插件。如我错了请纠正我。一种方法是使用`MGlobal`.

`MGlobal::executeCommand(MString("delete meshTransform;"));`

其中 meshTransform 是新创建的网格的变换。您可以通过将 parentOrOwner 设置为 MObject::kNullObj 来获得它。

或者你可以直接使用：

`MGlobal::deleteNode()`

# java - 如何期望使用 PowerMock 创建数组

> ID：16174031
> 
> 赞同：1
> 
> 时间：2013-04-23T15:59:31.753
> 
> 标签：java, junit, easymock, powermock

我目前正在尝试测试一种创建对象数组的方法，然后以对象数组作为参数对对象执行方法。每次我尝试这样做时，我都会遇到`constructorNotFound`错误。如果不清楚，我深表歉意，但希望您能够通过下面的示例理解我在说什么。

```
public class Bar {
    public final String name;
    public final Bar[] barList;

    public Bar(String name) {
        this.name = name;
        barList = null;
    }

    public Bar update(Bar[] bar) {
        Bar newBar = new Bar(name);
        newBar.barList = bar;
        return newBar;
    }
}

public class Foo {
    public static Bar internalMethod( Bar oldBar) {

        // in reality this method does a lot more
        // I just kept it simple for demonstration purposes
        Bar[] bar = new Bar[2];
        oldBar = oldBar.update(bar);
        // about 15-20 method calls with oldBar as a parameter
        // and require mocking

         return oldBar;
    }
} 
```

这是测试类：

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.api.easymock.PowerMock;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest(Bar[].class)
public class testFoo {

    @Test
    public void test() throws Exception {
        Bar[] barArr = new Bar[2];
        PowerMock.expectNew(Bar[].class).andReturn(barArr);
        PowerMock.replay(Bar[].class);

        Bar bar = new Bar("name");
        Bar newBar = Foo.internalMethod(bar);

        // assume there are many more checks to make sure that the appropriate
        // methods were called and the changes were made

        assertEquals("name", newBar.name);
        assertNull(newBar.barList[0]);
        assertNull(newBar.barList[1]);
    }
} 
```

**有谁知道如何处理这样的情况？**

我意识到课程设计并不理想，但不幸的是，我无法更改它。我正在使用 PowerMock 1.4.10，但我无权访问 mockito 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:19:36.867

嗯。你不能只是模拟`Bar`你作为参数传递的实例，期望`update`用一个`Bar[]`数组调用，返回你想要的任何东西，等等？

这可能看起来像这样：

```
@Test
public void test() throws Exception {
    Bar bar = new Bar("name").update(new Bar[2]);
    Bar barMock = EasyMock.createMock(Bar.class);
    EasyMock.expect(barMock.update(EasyMock.aryEq(new Bar[2]))).andReturn(bar);
    EasyMock.replay(barMock);

    Bar newBar = Foo.internalMethod(barMock);

    EasyMock.verify(barMock);
    assertEquals("name", newBar.name);
    assertNull(newBar.barList[0]);
    assertNull(newBar.barList[1]);
} 
```

这也看起来有点有趣，因为断言都检查了`Bar`在测试开始时设置的实例。但考虑到`internalMethod`它的作用更多，它会验证返回的`Bar`实例实际上没有被篡改。

# c++ - 更大类的单个方法的部分模板特化

> ID：16174036
> 
> 赞同：4
> 
> 时间：2013-04-23T15:59:54.613
> 
> 标签：c++, templates

我有以下课程；

```
template<int N, int M, int K>
class BaumWelch
{
  //lots of stuff
  const TransitionMatrixTemplate<N, M> randomA()
  { //.... }
} 
```

现在我想专门`randomA`研究 N=1 的方法。我该怎么做？

我尝试关注这个问题：[Template specialization of a single method from a templated class](https://stackoverflow.com/questions/1723537/template-specialization-of-a-single-method-from-a-templated-class)，但它似乎不适用于部分专业化。这个问题：[C++ 部分方法专业化](https://stackoverflow.com/questions/1535816/c-partial-method-specialization)似乎更相关，但它建议专门化整个类（在我的情况下相当大）。是否可以专门化整个班级，但实际上只专门化这一种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T16:05:34.410

> 我想专门`randomA`研究 N=1 的方法。我该怎么做？

您发现不允许对函数进行部分特化。

但是，您可以*完全*专门化代码的“详细”实现。

```
 template<int TheN>
  detail_randomA();

  const TransitionMatrixTemplate<N, M> randomA()
  {
      return detail_randomA<N>();
  } 
```

在类声明之外：

```
 template<int N, int M, int K>
  template<int TheN>
  BaumWelch<N,M,K>::detail_randomA()
  {
      //lots of stuff when N != 1
  }

  template<int N, int M, int K>
  template<>
  BaumWelch<N,M,K>::detail_randomA<1>()
  {
      //lots of stuff when N == 1
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:02:59.627

您不能部分专门*化函数*模板，但可以将工作交给*类*模板。这是一个完整的工作示例：

```
#include<iostream>
using namespace std;

// This first template isn't important, it's just the return value from your function
template <int N, int M>
struct TransitionMatrixTemplate {
        void print_me() const {
                cout << N << ',' << M << endl;
        }
};

// We need to announce the existence of the BaumWelch class template early here,
// in order that it can appear in the signature of our impl_randomA class.
template<int N, int M, int K>
struct BaumWelch;

// Now, the first important bit of code.  The default implementation
template<int N, int M, int K>
struct impl_randomA {
        static TransitionMatrixTemplate<N,M> f(BaumWelch<N,M,K> * This) {
                return TransitionMatrixTemplate<N,M>();
        }
};

// Next, is the partially specialized version.
template<int M, int K>
struct impl_randomA<1,M,K> {
        static TransitionMatrixTemplate<1,M> f(BaumWelch<1,M,K> * This) {
                cout << "<Special for N=1> ";
                return TransitionMatrixTemplate<1,M>();
        }
};

// Finally, The BaumWelch class and its call out to impl_randomA.
template<int N, int M, int K>
struct BaumWelch {
        const TransitionMatrixTemplate<N, M> randomA() {
                return impl_randomA<N,M,K> :: f(this);
        }
};

int main() {
        BaumWelch<2,3,4>() . randomA() . print_me();
        BaumWelch<1,3,4>() . randomA() . print_me();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T16:12:20.260

简短的回答是“你没有”。

一种使您想做的事情变得容易的`randomA`方法`N=1`（`const TransitionMatrixTemplate<N, M> randomA()`对`N=1`.

```
template<typename D, int N, int M, int K>
struct Bob_Base {
  static_assert( std::is_base_of< D, Bob_Base<D, N, M, K> >::value, "D must be derived from Bob_Base" );
  D* self() { return static_cast<D*>(this);
  D const* self() const { return static_cast<D*>(this);
  const TransitionMatrixTemplate<N, M> randomA()
  {
    // use self()-> instead of this-> in here to access Bob methods and date
  }
};
template<typename D,int M, int K>
struct Bob_Base< D, 1, M, K > {
  static_assert( std::is_base_of< D, Bob_Base<D, N, M, K> >::value, "D must be derived from Bob_Base" );
  D* self() { return static_cast<D*>(this);
  D const* self() const { return static_cast<D*>(this);
  const TransitionMatrixTemplate<1, M> randomA()
  { /* N=1 version  */ }
};

template<int N, int M, int K>
struct Bob : Bob_Base<Bob<N, M, K>, N, M, K>
{
  //lots of stuff, but no TransitionMatrixTemplate
} 
```

这仅在无法编译的代码（反之亦然）*时才重要。*`N==1`

# windows - 创建最小的 DLL 文件

> ID：16174039
> 
> 赞同：0
> 
> 时间：2013-04-23T16:00:05.227
> 
> 标签：windows, x86, 64-bit, lazarus, fpc

我用一个汇编函数创建了一个 DLL 文件（库）。该文件大小为 75kB。如何使这个文件变小？就像我怀疑的那样，有一个自动包含的系统单元。我可以从我的 dll 文件中排除这个单元吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:16:19.010

我在 Google 上搜索了您的问题，因为在 Visual C++ 中我想到了调试和发布模式。所以也许你可以尝试使用发布模式创建一个更小的 Dll。我为此找到了一些设置：[http](http://bugs.freepascal.org/bug_view_advanced_page.php?bug_id=18632)
://bugs.freepascal.org/bug_view_advanced_pa​​ge.php?bug_id=18632也许这对你有帮助，但我不确定它是否会起作用，因为我已经有 2 年没有使用 Pascal 了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T17:59:34.857

您也可以尝试[UPX](http://upx.sourceforge.net/)来打包您的 DLL-s。我最近在 Delphi 中制作了一个简单的 DLL，以下是我所做的一些观察：

1) Delphi 7 制作的文件几乎比 Delphi XE3 (32bit, Release 模式) 小 2 倍。拉撒路做了最大的文件。那么也许旧的 FPC 可以制作更小的文件？

2）我从图书馆中剥离了所有非我的单位。我什至用我自己的超短版本替换了 Math 和 Windows。这将文件大小减少了大约两倍。

3）系统单元是你不能删除的东西，但有一些方法可以创建你自己的，重新编译和替换。我想这对于 Lazarus/FPC 也是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T12:41:07.700

1.  **为什么？**您是否一方面关心二进制大小，另一方面有**64 位**标签？

2.  调试信息，通过 -Xs 去除调试信息

3.  Smartlinking，通过-XX（死码消除）1+2组合到-XXs

4.  避免使用高级功能。不要设置任何 $Mode，系统中与 delphi 兼容的附加功能会使它变大。

如果要进一步减少，则必须编辑 RTL 源并重新编译它。

# linux - 如何在 bash 脚本中隐藏密码？

> ID：16174040
> 
> 赞同：1
> 
> 时间：2013-04-23T16:00:05.990
> 
> 标签：linux, bash, passwords, hide, smb

我正在编写包含`smbget -u user -p password smb://host/share/file`命令的脚本。有没有办法在这个脚本中隐藏密码参数？脚本将在由多个用户共享的计算机上使用。我想让他们有机会在不显示我的密码的情况下下载文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:12:16.277

马克提供的评论是正确的。您可以通过使用 mount.cifs（如果需要，可能通过 AutoFS）并在挂载期间利用该`credentials`选项来解决该问题 - 该选项允许您将密码存储在非用户可读的位置。

```
mount.cifs //some/server /mnt/somewhere -o credentials=/root/credentials_file ... 
```

您的脚本可以挂载这个位置并为用户检索文件（或者只是让用户访问该位置）。您需要在`/etc/fstab`文件中有适当的条目或配置 AutoFS 以使其与您的脚本一起使用。

另一种方法是使用可以编译的东西编写脚本 - 由于许多其他原因它不安全，但可能适合您的账单。

# c# - TFS 构建中的 ClickOnce 清单应用程序

> ID：16174045
> 
> 赞同：4
> 
> 时间：2013-04-23T16:00:23.320
> 
> 标签：c#, clickonce, manifest, code-signing, tfsbuild

有谁知道如何在 TFS 托管控制器构建中为 ClickOnce 清单应用程序使用代码签名证书？

**设想：**

我使用 Team Foundation Service 作为代码存储库和源代码控制。我使用团队资源管理器（Visual Studio 2012）创建了一个构建定义。

**使用配置为任何 CPU|Release**的默认模板构建“***进程”***

 **构建设置为“**手动*触发***”使用**托管构建控制器**。

如果我的项目使用代码签名和代码清单，则 TFS 构建不成功。

在我的解决方案中，两个项目具有“ClickOnce 清单”

本地构建在代码签名和 ClickOnce 清单方面没有任何问题 - 因为代码签名证书在本地可用于构建。

但是对于 TFS 中的相同构建，我收到错误“**无法在证书存储中找到清单签名证书。** ”（只有一个错误阻止构建）

**问题**

如何将代码签名证书安装到“TFS 构建服务帐户”或“构建服务用户帐户”？

如何使代码签名证书在虚拟构建机的证书存储中可用？

使用代码签名和 ClickOnce 清单获得干净的 TFS 构建的任何替代方法？

还没有找到解决方案:(这里有人有帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T14:47:58.833

好吧，我已经设法在 TFS 自动构建中签署了我的 ClickOnce 清单。我的证书受密码保护，因此构建服务器无法访问证书。该证书不在我的个人证书存储中，因此我遇到了麻烦。

我已将证书导入到本地机器的个人存储中，并从那里引用它来签署 clickonce 清单。当您从个人商店引用证书时，它不会要求输入密码。因此，您可以欺骗 TFS 构建，并且现在可以访问您的代码签名证书。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-04T19:06:38.003

我有一个可能的替代方案来为你获得一个干净的构建。

我的公司生产一种名为 ClickOnceMore ( [www.clickoncemore.net](http://www.clickoncemore.net) ) 的产品，可用于构建 ClickOnce 清单而不是 MSBuild。它旨在使用命令行界面轻松集成到持续集成构建中。

要集成到您的构建中： * 在您的 Visual Studio 解决方案中关闭 clickonce * 创建 ClickOnceMore 项目 * 要对清单进行签名，您只需将签名证书放在已知文件夹位置，然后从 ClickOnceMore 项目中引用它 * 添加新的在 TFS 中构建步骤以构建 ClickOnceMore 项目

希望有帮助。**

# sql - 闭包表的前序（深度优先）遍历

> ID：16174046
> 
> 赞同：0
> 
> 时间：2013-04-23T16:00:24.170
> 
> 标签：sql, postgresql

我有一个评论树及其[关闭表](http://www.slideshare.net/billkarwin/sql-antipatterns-strike-back/68)：

```
create table comment (
    id serial primary key,
    author varchar(100) not null,
    content text not null
);

create table closure (
    ancestor integer not null references comment (id),
    descendant integer not null references comment (id) on delete cascade,
    depth integer not null,
    primary key (ancestor, descendant)
); 
```

我想在 ID 的评论下获取所有评论的子树`4`。对评论线程进行广度优先遍历并不难：

```
select comment.*, closure.depth
from comment
inner join closure on closure.descendant = comment.id
where ancestor = 4
order by depth asc; 
```

**如何对评论线程进行预排序（深度优先）遍历？**

（我意识到使用嵌套集很容易进行预订遍历，但我特别好奇如何使用闭包表进行遍历。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T23:38:17.173

我已经在我的 ruby​​ gem 中实现了预排序遍历，[closure_tree](http://mceachen.github.io/closure_tree/)并且 gem 生成的 SQL 可以与 MySQL 和 PostgreSQL 一起使用。我相信我的实现是新颖的——但它很复杂，需要两个选择，并且需要排序列是数字和 [0-N) 其中 N 是兄弟姐妹的数量，并且顺序没有间隙。

[https://github.com/mceachen/closure_tree/blob/master/lib/closure_tree/numeric_deterministic_ordering.rb#L48](https://github.com/mceachen/closure_tree/blob/master/lib/closure_tree/numeric_deterministic_ordering.rb#L48)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T03:48:44.013

首先，请不要以广度优先或深度优先来考虑这个问题。理想情况下，您会将其视为构建结果集的一系列集合操作。执行此操作的 SQLy 方法是做一些类似于广度优先但一次在一个深度级别上操作的事情。如果您尝试使用全广度优先或全深度优先方法，您将遇到性能问题。

**最好的方法**

```
WITH RECURSIVE closure_tree AS (
     SELECT descendent as id, ancestor as parent_id, 0 as depth, descendent::text as path
       FROM closure
      WHERE ancestor = 4
  UNION ALL 
     SELECT c.descendent, ct.id, ct.depth + 1, ct.path || ',' || descendent::text
       FROM closure c
       JOIN closure_tree ct ON ct.id = c.ancestor
)
SELECT c.*, ct.depth, string_to_array(ct.path, ',')::int[]
  FROM comment c
  JOIN closure_tree ct ON c.id = ct.id
 ORDER BY string_to_array(ct.path, ',')::int[]; 
```

未经测试，但这给了你一个想法。基本上，它在每个深度级别扫描表（索引或顺序取决于评论的数量）一次，在每次扫描时检索完整的图形宽度。请记住，SQL 擅长管理集合，因此这确实是唯一明智的方法。当然这意味着闭包表应该只存储直接​​的父/子关系。

请注意，这会以深度优先的方式返回结果，而您的查询会以广度优先的方式返回结果。为了做到这一点，您需要以某种方式存储或生成路径，否则您将无法获得真正的深度信息。因此，您可以以非规范化的方式将路径添加到您的闭包表，或者您可以只获取父/子关系并在查询中生成它，如我的示例所示。

# java - 如何使用 Java 生成 1 到 6 之间的 6 个随机数？

> ID：16174056
> 
> 赞同：4
> 
> 时间：2013-04-23T16:01:06.687
> 
> 标签：java, arrays, random, numbers, prng

我遇到了在 Java 中生成 1 到 6 之间的 6 个随机数的问题。所有数字都必须是唯一的。当我输入 kolon 值 5 时，数组应该是这样的：

```
1 2 3 4 5 6
1 2 3 4 5 6
1 2 3 4 5 6
1 2 3 4 5 6 
```

我不希望程序生成相同的两个数字。这里有什么问题？

相关代码：

```
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    System.out.println("Please enter row quantity: ");

    int kolon = input.nextInt();

    Integer[][] dizi_asil = new Integer[kolon][6];

    for (int i = 0; i < kolon; i++) {
        Integer[] dizi = new Integer[6];

        for (int j = 0; j < 6; j++) { 

            dizi[j] = (int) ((Math.random() * 6) + 1);  

            for (int u = 0; u < 1; u++) { 

                for (int k = 0; k < j; k++) { 

                    while (dizi[k] == dizi[j]) { 
                        dizi[j] = (int) ((Math.random()* 6)  + 1);
                        u++;
                    }

                }
            }
            dizi_asil[i][j] = dizi[j];
        }
        Arrays.sort(dizi_asil[i]);
    }

    for (int i = 0; i < dizi_asil.length; i++) {
        for (int k = 0; k < dizi_asil[i].length; k++) {
            System.out.print(dizi_asil[i][k] + "\t");
        }
        System.out.println();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T16:05:03.150

创建一个包含 1 到 6 的列表。然后使用[Collection.shuffle](http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)对其进行随机播放。然后你会得到随机的唯一号码

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T16:04:24.443

这是一个简单的方法：

```
List<Integer> list = Arrays.asList(1,2,3,4,5,6);
Collections.shuffle(list);
// you can convert it to an array if you need to. 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T16:32:20.500

一个非常简单的修复 - 替换`u++;`为`u--;`. `++`将使循环停止，`--`使其继续。

虽然我建议更像下面的东西。我希望它很容易理解。

```
Integer[] dizi = new Integer[6];

for (int j = 0; j < 6; j++)
{
  boolean isValid;
  do
  {
     dizi[j] = (int) ((Math.random() * 6) + 1);
     isValid = true;
     for (int k = 0; isValid && k < j; k++)
        if (dizi[k] == dizi[j])
           isValid = false;
  }
  while (!isValid);
  dizi_asil[i][j] = dizi[j];
} 
```

我还建议[Random 类](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)，它有一个`nextInt(int)`方法，比`(int) ((Math.random() * 6) + 1)`.

但改组可能是一种更快的方法。要么像其他答案之一一样使用 API，要么查看[Fisher-Yates / Knuth shuffle](http://en.wikipedia.org/wiki/Knuth_shuffle#The_modern_algorithm)以获得简单的 shuffle 算法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T16:05:16.823

尝试[`Collections.shuffle(list);`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)

```
List<Integer> list = new ArrayList<Integer>();
for(int i = 1; i<7 ; i++)
    list.add(i); 
```

或者你可以这样做：

```
List<Integer> list = Arrays.asList(1,2,3,4,5,6)

Collections.shuffle(list); 
```

迭代列表并每次获得唯一值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T18:23:31.833

正如许多人已经提到的那样，一种更短的方法是使用 shuffle 。

```
public static void main(String... ignored) {
    Scanner input = new Scanner(System.in);
    System.out.println("Please enter row quantity: ");

    List<Integer> rolls = Arrays.asList(1, 2, 3, 4, 5, 6);
    for (int i = 0, rows = input.nextInt(); i < rows; i++) {
        Collections.shuffle(rolls);
        System.out.println(rolls);
    }
} 
```

如果你运行它，你会得到类似的东西

```
Please enter row quantity: 
5
[5, 6, 3, 2, 4, 1]
[5, 4, 3, 6, 2, 1]
[6, 4, 2, 3, 5, 1]
[3, 1, 6, 2, 5, 4]
[4, 1, 6, 3, 5, 2] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-20T03:54:54.967

进口：

```
import acm.util.RandomGenerator;
private RandomGenerator rgen = RandomGenerator.getInstance(); 
```

实际采摘：

```
randnum = rgen.nextInt(1, 6); 
```

这会在 0 到 5 之间选择一个随机数。您可以对 1 到 6 执行此操作：

```
randnum = rgen.nextInt(2, 7); 
```

或者：

```
randnum = rgen.nextInt(1, 6);
randnum++; 
```

# mysql - WHERE 子句中的 MySQL 变量

> ID：16174064
> 
> 赞同：2
> 
> 时间：2013-04-23T16:01:22.403
> 
> 标签：mysql, database, variables

我需要一个查询，根据用户关注的电视节目为用户找到推荐的电视节目。为此，我有以下表格：

*   `Progress`包含用户正在关注的节目的表和看过的剧集的百分比（为了解决这个问题，我们可以假设我在数据库中只有一个用户）

*   `Suggested`包含`_id1`,`_id2`和的表`value`（值是 id=`_id1`的节目和id= 的节目之间的联系强度`_id2`：`value`越多越好，节目的共同点越多）。请注意，在此表中应用了交换性质，因此 和 之间的连接强度与`id1`和`_id2`相同。此外，没有两行，例如 ROW1._id1=ROW2._id2 AND ROW1._id2 = ROW2._id1`_id1``_id2`

*   包含有关电视节目的详细信息的表`ShowCache`，例如名称等。

以下查询是我想要做的，但结果是一个空集：

```
SET @a = 0;   //In other tests this line seem to be necessary
SELECT `ShowCache`.*,
       (SUM(value) * (Progress.progress)) as priority
FROM `Suggested`,`ShowCache`, Progress 
WHERE 

    ((_id2 = Progress.id AND _id1 NOT IN (SELECT id FROM Progress) AND @a:=_id1)//There is a best way to set a variable here?

    OR

    (_id1 = Progress.id AND _id2 NOT IN (SELECT id FROM Progress) AND @a:=_id2))

    AND  `ShowCache`._id = @a   //I think that the query fails here

GROUP BY `ShowCache`._id 
ORDER BY priority DESC 
LIMIT 0,20 
```

我知道问题与变量的使用有关，但我无法解决。非常感谢任何帮助。

* * *

**PS：**主要问题是（由于可交换性），没有变量我需要两个查询，开始执行大约需要 3 秒（查询比上面的更复杂）。我真的在尝试做一个查询来完成这项任务

**PPS：**我还绑定了 XOR 操作，导致无限循环？！？！？这是我尝试过的 WHERE 子句：

```
((_id2=Progress.id AND @a:=_id1) XOR (_id1=Progress.id AND @a:=_id2)) AND `ShowCache`._id = @a 
```

编辑：我在不使用任何变量的情况下提出了这个 WHERE 条件：

```
(_id2 = Progress.id OR _id1 = Progress.id) 
AND `ShowCache`._id = IF(_id2 = Progress.id, _id1,_id2)
AND  `ShowCache`._id NOT IN (SELECT id FROM Progress) 
```

它可以工作，但速度很慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:24:17.583

Your attempt to use xor is clever. If you want to get the nonmatching value you want to use bitwise XOR which is ^

Progress.id ^_id1 ^ _id2

> 3 ^ 2 ^ 3 = 2
> 
> 2 ^ 2 ^ 3 = 3

You can use this trick to setup a join and really simplify your query (eliminate the OR's and NOT IN's and do it in one query without variables.)

* * *

```
select users.name as username, showcache.name as show_name, 
  sum(progress * value) as priority  from users
inner join progress on users.id = progress.user_id
inner join suggested on progress.show_id in (suggested.id_1, suggested.id_2)
inner join showcache on showcache.id = 
  (suggested.id_1 ^ suggested.id_2 ^ progress.show_id)
where showcache.id  not in 
  (select show_id from progress where user_id = users.id)
group by showcache.id
order by priority desc; 
```

I also setup a fiddle to demonstrate it: [http://sqlfiddle.com/#!2/2dcd8/24](http://sqlfiddle.com/#!2/2dcd8/24)

To break it down. I created a users table with a single user (but the solution will work with multiple users.)

The select and join to progress is straightforward. The join to suggested uses IN as an alternative to writing it with OR

The join to showcache is where the bitwise XOR happens. One of the id's links up to the progress.show_id and we want to use the other one.

It does include a not in to exclude shows already watched from the results. I could have changed it to not exists? but it seems clearer this way.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:11:39.177

您在 where 子句中设置了两次 @a 的值，这意味着查询实际上归结为：

```
...
WHERE ... AND `ShowCache`._id = _id2 
```

MySQL 以第一次遇到的顺序评估变量分配，因此您应该将 @a 常量留到子句的 END 之前，然后分配一个新值，例如

```
mysql> set @a=5;
mysql> select @a, @a+1, @a*5, @a := @a + 1, @a;
+------+------+------+--------------+------+
| @a   | @a+1 | @a*5 | @a := @a + 1 | @a   |
+------+------+------+--------------+------+
|    0 |    1 |    0 |            1 |    1 |
|    1 |    2 |    5 |            2 |    2 |
|    2 |    3 |   10 |            3 |    3 |
+------+------+------+--------------+------+ 
```

Note that @a's value in the first 3 columns remains constant, UNTIL mysql reaches the `@a := @a +1`, after which @a has a new value

So perhaps your query should be

```
set @a = 0;
select @temp := @a, ..., @a := _id2
where
   ((_id2 = Progress.id AND _id1 NOT IN (SELECT id FROM Progress) AND @temp =_id1)
   ...
etc... 
```

# android - 在 Android 4.2 中使用 AsyncTask 使用 JSON 填充 Spinner

> ID：16174065
> 
> 赞同：1
> 
> 时间：2013-04-23T16:01:24.957
> 
> 标签：android, json, android-asynctask, android-spinner

我目前正在尝试将我在 API10 中创建的应用程序的 MainActivity 代码转换为 API 16。根据我的阅读，我必须开始使用 ASyncTask 来访问 URI 并在我的应用程序上显示信息。我在 2.3 中设法做到了，但在将其转换为 JSON 后，我现在面临一些障碍。

本质上，该应用程序所做的是，它需要一个清单代码，即 WAMF33000，然后单击一个按钮，Spinner 就会填充该清单中包含的作业。由于我对 ASyncTask 的概念相当陌生，因此我想了解我的代码如何应用于 ASyncTask 背后的理论。

根据我的代码，我有一些问题：- i) 我在 ASyncTask 中的哪个代码是正在传递的参数？ii) 我的 AsyncTask 中的进度值是多少？iii) 最后，我的返回值是 ManifestItems 的 ArrayList 吗？

从 2.3 版本开始，我调用 JSON 两次 - 一次是在清单中加载货物，第二次是加载在微调器中选择的货物的详细信息。

以下是我的代码：

```
package com.signonglass;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import org.json.*;

import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.telephony.TelephonyManager;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity
{
    private final static String POD_URI = "http://192.168.0.105:8092/PodCore.svc";
    private EditText evManifestCode;
    private Spinner list_job;
    private Button btnSubmit;
    private String jobName;
    private Button btnCons;
    ArrayList<ManifestItemObj> jobList = new ArrayList<ManifestItemObj>();
    ArrayList<ConsignmentItems> conItemList = new ArrayList<ConsignmentItems>();
    Consignments retConsignment;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        evManifestCode = (EditText)findViewById(R.id.manifest);
        btnSubmit = (Button)findViewById(R.id.btnSearchManifest);
        list_job = (Spinner)findViewById(R.id.jobSpinner);
        //tvView = (TextView)findViewById(R.id.deviceIdt);

        //TelephonyManager telephonyManager = (TelephonyManager) this.getSystemService(Context.TELEPHONY_SERVICE);
        //String IMEI_Number = telephonyManager.getDeviceId();
        //tvView.setText("IMEI Number: " + IMEI_Number);

    }

    public class MyAsyncTask extends AsyncTask<String, Void, ArrayList<ManifestItemObj>>
    {

        protected void onPreExecute()
        {

        }

        protected void onPostExecute(ArrayList<ManifestItemObj> jobList)
        {

        }

        @Override
        protected ArrayList<ManifestItemObj> doInBackground(String... params)
        {
            //http get request
            HttpGet request = new HttpGet(POD_URI + "/getJobs/" + evManifestCode.getText().toString());
            //set the hedear to get the data in JSON format
            request.setHeader("Accept", "application/json");
            request.setHeader("Content-type", "application/json");

            DefaultHttpClient client = new DefaultHttpClient();
            String theString = new String("");

            try
            {
                //get the response
                HttpResponse response = client.execute(request);
                HttpEntity entity = response.getEntity();
                InputStream is = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(is));

                StringBuilder builder = new StringBuilder();
                String line;
                while ((line = reader.readLine()) != null) {
                                builder.append(line);
                        }
                is.close();
                theString = builder.toString();

                JSONObject jobsJSON = new JSONObject(theString);
                JSONArray jobs = jobsJSON.getJSONArray("getJobsResult");

                for(int i = 1; i < jobs.length(); i++)
                {
                    JSONObject mit = jobs.getJSONObject(i);
                    ManifestItemObj mi = new ManifestItemObj();
                    mi.ManifestItemID = mit.getInt("ManifestItemID");
                    mi.JobType = mit.getString("JobType");
                    mi.FKID = mit.getInt("FKID");
                    jobList.add(mi);
                }      
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
            return jobList;
        }
    }

    /*private void showToast(String msg)
    {
        // TODO Auto-generated method stub
        Toast.makeText(this, "Toast: " + msg, Toast.LENGTH_LONG).show();
    }*/

    public void onViewConsignment(View view)
    {
        ShowItemsOfManifest(retConsignment);
    }

    public Consignments getConsignmentManifest(String consignment)
    {
        Consignments con = new Consignments();

        try
        {
            DefaultHttpClient client = new DefaultHttpClient();
            String theString = new String("");
            //http get request
            HttpGet request = new HttpGet(POD_URI + "/getJobDetails/" + consignment);
            //set the hedear to get the data in JSON format
            request.setHeader("Accept", "application/json");
            request.setHeader("Content-type", "application/json");

            //get the response
            HttpResponse response = client.execute(request);
            HttpEntity entity = response.getEntity();
            InputStream is = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));

            StringBuilder builder = new StringBuilder();
            String line;
            while ((line = reader.readLine()) != null)
            {
                builder.append(line);
            }
            is.close();

            theString = builder.toString();

            JSONObject conJSON = new JSONObject(theString);
            JSONArray cons = conJSON.getJSONArray("getJobDetailsResult");

            for(int i = 0; i < cons.length(); i++)
            {
                JSONObject cObj = cons.getJSONObject(i);
                con.ConsignmentID = cObj.getInt("ConsignmentID");
                con.ConsignmentCreationDate = cObj.getString("ConsignmentCreationDate");
                con.ConsignmentCustRef = cObj.getString("ConsignmentCustRef");
                con.OrderNo = cObj.getString("OrderNo");
                con.ConsignmentActive = cObj.getBoolean("ConsignmentActive");
                con.JobType = cObj.getString("JobType");

                //Client object
                JSONObject clObj = cObj.getJSONObject("Client");
                Clients cl = new Clients();
                cl.ClientId = clObj.getInt("ClientID");
                cl.ClientName = clObj.getString("ClientName");
                con.Clients = cl;

                //ShipTo object
                JSONObject stObj = cObj.getJSONObject("ShipTo");
                ShipTo sto = new ShipTo();
                sto.ShipToId = stObj.getInt("ShipToId");
                sto.ShipToName = stObj.getString("ShipToName");
                sto.ShipToAddress1 = stObj.getString("ShipToAddress1");
                sto.ShipToAddress2 = stObj.getString("ShipToAddress2");
                sto.ShipToCity = stObj.getString("ShipToCity");
                sto.ShipToPostcode = stObj.getString("ShipToPCode");
                sto.ShipToState = stObj.getString("ShipToState");
                con.ShipTo = sto;

                //FreightZone object
                JSONObject fzObj = cObj.getJSONObject("FreightZone");
                FreightZones fz = new FreightZones();
                fz.FreightZoneID = fzObj.getInt("FreightZoneId");
                fz.FreightZone = fzObj.getString("FreightZone");
                con.FreightZone = fz;

                JSONArray conItems = cObj.getJSONArray("ConsignmentItems");

                for(int m = 0; m < conItems.length(); m++)
                {
                    JSONObject cit = conItems.getJSONObject(m);
                    ConsignmentItems ci = new ConsignmentItems();
                    ci.ConsignmentItemID = cit.getInt("ConsignmentItemsID");
                    ci.Quantity = cit.getInt("QTY");

                    //get Product from ConsignmentItems
                    JSONObject pro = cit.getJSONObject("Products");
                    Products prod = new Products();
                    prod.ProductId = pro.getInt("ProductID");
                    prod.ProductModel = pro.getString("ProductModel");
                    prod.ItemsPerCarton = pro.getInt("PerCarton");
                    prod.ProductDescription = pro.getString("Description");
                    prod.Height = (float) pro.getDouble("Height");
                    prod.Length = (float) pro.getDouble("Length");
                    prod.Width = (float) pro.getDouble("Width");
                    prod.Cubic = (float) pro.getDouble("Cubic");
                    ci.Product = prod;
                    conItemList.add(ci);
                    con.ConsignmentItems = conItemList;
                }
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        return con;
    }

    public void ShowItemsOfManifest(Consignments consignments)
    {
        Bundle bundle = new Bundle();
        Intent newIntent = new Intent(this.getApplicationContext(), ConActivity.class);
        newIntent.putExtras(bundle);
        newIntent.putExtra("Consignment", consignments);

        this.startActivity(newIntent);

    }

    public void onSearchClick(View view)
    {
        new MyAsyncTask().execute();
        ManifestItemAdapter mia = new ManifestItemAdapter(MainActivity.this, android.R.layout.simple_spinner_item, jobList);
        list_job.setAdapter(mia); 
    }
} 
```

我期待通过您对我的代码的建设性评论来了解更多关于 ASyncTask 的信息。提前感谢你们帮助我改进我的代码和我对 Android 的理解，伙计们！:)

PS：如果您需要更多代码，请告诉我。我会根据需要更新我的帖子，提供更多信息。干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:16:32.033

背后的要点`AsyncTask`是允许您在单独的线程（例如网络内容）上运行后台工作，这样您就不会拖延，`UI`并且用户在下载数据时仍然可以做事。

> 我在 ASyncTask 中的哪个代码是正在传递的参数？

您目前没有将任何内容传递`params`给`AsyncTask`

```
new MyAsyncTask().execute(); // you would put params in here if needed such as a URL, String, etc... 
```

> 我的 AsyncTask 中的进度值是多少？

据我所知，你没有。如果您愿意，您可以使用`publishProgress(value)`它`onProgressUpdate()`来更新下载的文件、进度时间、剩余时间等内容...

> 最后，我的返回值是 ManifestItems 的 ArrayList 吗？

你要回来`jobList`了，所以这就是`onPostExecute()`你需要做的事情

**注意**：要了解的最重要的事情之一`AsyncTask`是您无法更新`UI`from，`doInBackground()`因此您必须在其他方法之一中执行此`AsyncTask`操作或将值传递回`UI`函数。此外，`AsyncTask`在 2.3 中的工作方式与在 3.0 及更高版本中的工作方式不同。它们不再并行运行，而是放入队列中。因此，如果您希望它们在 4.2 中并行运行，您可能需要阅读有关 executeOnExecutor() 的信息。我希望这能回答你的问题

[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

executeOnExecutor()( [http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor(java.util.concurrent.Executor](http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor(java.util.concurrent.Executor) , 参数...)

我看到的其他几件事是，您需要将`@Override`注释添加到已实现的方法和`super`调用中。

# php - 自定义功能不适用于发布数据

> ID：16174072
> 
> 赞同：0
> 
> 时间：2013-04-23T16:01:38.137
> 
> 标签：php, codeigniter

我正在创建一个简单的密码哈希函数：

```
function create_hash($password)
{
    $salt = 'HN|fQyjB.{G~tB%)GxpQ6)1;fW|dr9}ME)np|4@%D]ciL|xI~FqXnvoJs.-.30q}';
    $salt2 = '1e,/]$rc4 +`e==H(^bV+ZBh!p<';
    $hashed_password = md5(strval($salt.$password.$salt2));
    return $hashed_password;
} 
```

但是当我调用我的函数来散列密码时，我得到了一个错误。

```
 $data = array(
 'email'=>$this->input->post('email'),
 'password'=> create_hash($this->input->post('password')),
  ); 
```

当我用 Codeigniter 的 md5 替换我的 create_hash 时，一切正常。也许我做错了什么，有人可以给我建议。如何正确进行自定义散列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:33:03.800

通常会发生这种情况，因为您尝试调用函数'create_hash'的范围，并且此函数超出范围。如果在类中定义函数，只需使用 $this->create_hash(); 如果没有帮助，您可以查看 php 日志或 apache 日志以获取更多错误详细信息。

# iphone - 调用 NSLog 的函数在项目中的位置

> ID：16174079
> 
> 赞同：-2
> 
> 时间：2013-04-23T16:02:06.077
> 
> 标签：iphone, ios, objective-c, cocoa-touch, nslog

我有一个大项目，有很多`NSLog()`电话。当某些事情发生时，有些`NSLog()`工作，我不知道哪个`NSLog`会被调用。如何找到`NSLog()`在类文件中调用的地方？

我`NSLog`的是这样的：`NSLog(@"%@", someArray);`

这是日志：

```
2013-04-23 20:43:38.257 myProj[2101:707] {
    id = 1;
    version = 1;
} 
```

这里是什么`myProj[2101:707]`意思？它是否给了我关于`NSLog`函数在课堂上的位置的任何信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T16:04:36.367

您可以尝试在项目中搜索输出。

例如，如果输出是

```
This is my output with values 3.1415 and 1.2345. 
```

按`cmd``shift``F`并搜索“这是我的输出值”

您还可以在搜索词中插入占位符：

![在此处输入图像描述](https://i.stack.imgur.com/HgEjG.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:08:31.853

将所有 NSLog 使用转换为 DLog，然后将打印日志语句：

1.  文件名
2.  方法名称
3.  行号

输出到日志的每一行。通过这种方式，您可以立即看到所有日志记录在哪里完成。DLog 是一种比 NSLog 更好的日志记录机制，您应该开始在所有项目中使用它。

在您的 pch 文件中将 DLog 定义为：

```
#ifdef DEBUG
#   define DLog(fmt, ...) NSLog((@"%s [Line %d] " fmt), __PRETTY_FUNCTION__, __LINE__,  ##__VA_ARGS__);
#else
#   define DLog(...)
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:06:20.547

您可以使用[该函数`class_getName`](https://stackoverflow.com/a/2056036/213685)获取放置日志语句的对象的类名，并将类名包含在`NSLog()`.

像这样：

```
#import <objc/runtime.h>
…
NSLog("%@ Some Log Statement", class_getName([self class])); 
```

# php - 使用正则表达式将字符串保存在引号 (") 中

> ID：16174082
> 
> 赞同：1
> 
> 时间：2013-04-23T16:02:13.580
> 
> 标签：php, regex

我有一个看起来像的简单字符串，`a:104:{i:143;a:5:{s:5:"naz";s:7:"Alb";s:10:"base"}}`我想将所有文本保存在引号中`s:5`，使用正则表达式清除它的内容。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:21:14.210

想要获取引号之间的所有内容吗？使用：`".*"`作为您的搜索字符串（根据需要转义`"`字符）

..您也可以查看[http://www.zytrax.com/tech/web/regex.htm](http://www.zytrax.com/tech/web/regex.htm)以获得更多关于正则表达式的帮助。（它有一个很棒的工具，您可以在其中测试输入文本、RE，并查看结果）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:24:15.957

只要匹配双引号，下面的调用

```
preg_match_all('/"([^"]*)"/',$input_string,$matches); 
```

将为您提供引号之间的所有文本作为字符串数组`$matches[1]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:28:05.723

```
function session_raw_decode ($data) {
    $vars = preg_split('/([a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff^|]*)\|/', $data, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE);
    $result = array();
    for($i = 0; isset($vars[$i]); $i++)
        $result[$vars[$i++]] = unserialize($vars[$i]);
    return $result;
} 
```

我在我的服务器上的某个地方找到了这个片段......（不知道它在哪里，或者我自己写的）

您可以使用它并执行以下操作：

```
$json = json_encode(session_raw_decode($string)); 
```

这应该可以完成这项工作。

# php - 比较运算符似乎不起作用

> ID：16174083
> 
> 赞同：0
> 
> 时间：2013-04-23T16:02:14.727
> 
> 标签：php

我正在尝试比较两个值，但是当我这样做时，它似乎不起作用。我知道这些值是什么，所以它应该是真实的。更糟糕的是，如果我取出其中任何一个变量并将数字放入其中，它就可以工作。

```
$data = simplexml_load_file('xml/heroes/hero.xml')
    or die("Error: Cannot create object");
$hme = $data->hes->he->maxen;       
$hce = $data->hes->he->curen;
$hac = $data->hes->he->lastac;
echo $hce . ' should not be greater than ' . $hme;
if($hce > $hme){
echo 'should be working';
} 
```

输出：

773 不应大于 20

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:06:32.640

我认为你的变量是这样的

```
$hce = "773";
$hme = "20"; 
```

在比较它们之前做 intval

```
if(intval($hme)>intval($hce)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:07:21.043

将您的字符串转换为整数：

```
$hme = (int)$data->hes->he->maxen;       
$hce = (int)$data->hes->he->curen;
$hac = (int)$data->hes->he->lastac; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:06:28.237

我认为您将它们视为字符串。我认为您需要将它们转换为整数。

执行此操作的简单功能：

```
int atoi(char *s)
{
int val = 0;
while (*s)
{
    val *= 10;
    val += (*s) - '0';
    s++;
}

return val;
} 
```

# mysql - 如何确定 MySQL 5.5 中的 varchar 分区范围？

> ID：16174097
> 
> 赞同：1
> 
> 时间：2013-04-23T16:03:00.063
> 
> 标签：mysql, string, partitioning, varchar

**背景**

我有一张很大的桌子，桌子是这样的

```
CREATE TABLE tb_doc (
did mediumint(8) unsigned NOT NULL auto_increment, 
title varchar(80) NOT NULL default '',
...,
PRIMARY KEY  (did), 
KEY title (title)
) 
TYPE=MyISAM; 
```

title 的类型是 varchar(80)，大多数时候 title 会是纯数字字符串，比如 '111111','2222222','44444444'，有时会是 utf-8 字符串，比如 '3a','a4 ' 或“中国”（汉字）。

我已经使用 HASH (did) 进行分区，但我的 SELECT 语句总是像

```
SELECT did, title,... FROM tb_doc WHERE title= '1111111';
SELECT did, title,... FROM tb_doc WHERE title= '2222222'; 
```

所以我想用title来做分区，希望这样会更快。现在问题来了。

**实验**

我使用了以下语句：

```
PARTITION BY RANGE COLUMNS (title)(
PARTITION p00 VALUES LESS THAN (1),         # not pure number strings
PARTITION p01 VALUES LESS THAN (500000),    # pure number strings from 1 to 500k
PARTITION p02 VALUES LESS THAN (1000000),   # pure number strings from 500k to 1000k
PARTITION p03 VALUES LESS THAN (1500000),   # pure number strings from 1000k to 1500k
..........                                  # ......    

PARTITION pn VALUES LESS THAN (25000000),   # the biggest number now
)
; 
```

**类似问题**

我阅读了以下两个问答： [在 MySQL 中对数据库表](https://stackoverflow.com/questions/1936384/partitioning-a-database-table-in-mysql) [进行分区 如何在 Mysql 中使用 LIKE 标准对表进行分区，](https://stackoverflow.com/questions/5442449/how-to-partitioning-a-table-usign-a-like-criteria-in-mysql/) 但它们适用于英语世界，不适用于我的情况。

**问题**

1.  用title来做partition比较好，对吧？
2.  你能给我一个“utf-8”范围的例子吗？我尝试了'500000'，'1000000'，...，但它们不起作用。
3.  如果我使用 SELECT xxx from tb_doc WHERE title='12345'，MySQL 只从第 1 部分获取数据？
4.  这张表是~50GB，多少个分区是最佳的？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T11:42:12.757

请注意，`VARCHAR`正确存储多种语言的字符会出现问题，更好地使用`NVARCHAR`.

HASH 分区用于在分区上平均分配负载。我想说，首先你应该用对人类有意义的东西进行分区（列经常出现在 Where 子句中），然后进行 HASH 子分区以同时利用尽可能多的核心。因此，在这种情况下，HASH 子分区的数量将 <= 没有核心。

我建议您在`title`列上创建一个聚集索引。这将加快您的查询速度。

关于你的问题：

1.  不一定。由于聚集索引而不是分区，它将加快查询速度。使用分区来管理表：例如。快速删除许多行。如果您的查询中有很大一部分查找多行（不仅仅是 1 行）或者`title`不是一`UNIQUE`列，那么您可以考虑分区

2.  作为 UTF-8 分区边界的示例，我会说：`less then ('c')`

3.  根据您定义分区的方式，它可能会命中 1 个、多个或所有分区。

4.  拥有许多分区不会有任何损失，但 MySQL 5.5+ 中的表最多可以有 1024 个分区和子分区。

当您要按字符串值进行分区时，请`KEY PARTITIONING`按照此处所述使用：[18.2.5。键分区](http://dev.mysql.com/doc/refman/5.5/en/partitioning-key.html)。

例子：

```
CREATE TABLE tm1 (
    s1 CHAR(32) PRIMARY KEY
)
PARTITION BY KEY(s1)
PARTITIONS 10; 
```

将分区数设置为与您的字母表中的字母（或您预期在表中看到的所有字母表）相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T06:27:22.130

分区`title`，即使你能做到，也*不会*加速

```
SELECT did, title,... FROM tb_doc WHERE title= '1111111'; 
```

有关 PARTITIONing 的限制的进一步讨论，以及它会有所帮助的几个用例，请参阅[我的博客](http://mysql.rjweb.org/doc.php/partitionmaint)；

# tfs - 如何定位没有特定标签的 TFS 构建代理？

> ID：16174098
> 
> 赞同：2
> 
> 时间：2013-04-23T16:03:08.690
> 
> 标签：tfs, msbuild

我们的 MS 构建设置有多个带有多个代理的构建机器。代理使用安装在构建机器上的不同软件进行标记。我的构建正在使用“MatchAtLeast”寻找两个标签。最近，TFS 偶尔会选择另一台构建机器，但它总是失败。我相信这可能是因为该特定机器上安装了某个其他软件包，因此我想从可用于我的构建的具有代表违规软件的特定标签的机器中*排除任何机器。*

我想我可以为没有该软件的所有内容添加标签，但这似乎很愚蠢，然后如果确实安装了它，添加它的人不仅需要为新安装的软件添加标签，还要删除这个其他标签表明它没有该软件。

那么有没有办法配置您的构建定义以***避免***构建具有特定标签的代理？

我们正在使用 TFS 2012 更新 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:30:07.223

在构建定义的高级选项卡中，您可以定义代理名称和标签。默认情况下，它设置为 * 但您可以使用您想要定位的代理的名称

# ruby-on-rails - Redis 与 postgres 冲突 - 错误“数据库配置未指定适配器”

> ID：16174100
> 
> 赞同：2
> 
> 时间：2013-04-23T16:03:10.050
> 
> 标签：ruby-on-rails, deployment, redis, capistrano, rails-postgresql

# 问题：

我使用 postgresql（pg gem，redis gem）将 Redis 添加到我的 Rails 应用程序中，现在无法部署到我的暂存环境。在 db:schema:dump 之后，Cap 失败并显示此错误消息：`database configuration does not specify an adapter`

环境通过了所有规范并在本地运行得很好。

如果我删除了 redis gem、redis.yml 和 redis.rb，应用程序部署良好，没有错误。

## 故障排除：

以下是我采取的故障排除步骤：

*   确认我的 staging.yml 没有隐藏字符（通过使用先前提交中的相同文件证明了这一点）
*   添加redis前备份commit，完美部署
*   删除了 Redmon，怀疑它是导致问题的原因
*   升级 pg 到 0.15.1 和 redis 到 3.0.4 (同样的错误)
*   确认 redis-server 确实在登台环境上运行

我已经在任何地方到处提到这个，但只提出“你的 database.yml 文件有隐藏的字符”。

我将用 9 个小时来解决这个问题，因此非常感谢任何帮助。

这是我的第一个 StackOverflow 问题，所以如果我遗漏了任何重要的内容，请告诉我。

## 背景：

这是我运行时得到的实际错误`cap staging deploy`：

```
* executing "cd /var/www/apps/MY_APP_NAME/current && RAILS_ENV=staging bundle exec rake db:migrate"
servers: ["XXX.XXX.XXXX"]
[XXX.XXX.XXXX] executing command
[XXX.XXX.XXXX] /bin/bash -c 'cd /var/www/apps/MY_APP_NAME/current && RAILS_ENV=staging bundle exec rake db:migrate'
** [out :: XXX.XXX.XXXX] Cannot load Rspec tasks.
** [out :: XXX.XXX.XXXX] rake aborted!
** [out :: XXX.XXX.XXXX] database configuration does not specify adapter
** [out :: XXX.XXX.XXXX] 
** [out :: XXX.XXX.XXXX] Tasks: TOP => db:schema:dump
** [out :: XXX.XXX.XXXX] 
** [out :: XXX.XXX.XXXX] (See full trace by running task with --trace)
** [out :: XXX.XXX.XXXX] 
command finished in 18753ms 
```

## 文件：

这是我的 redis.yml，存储在 config\ 下：

```
default:
  host: localhost
  port: 6379
development:
  db: 0
test:
  db: 1
staging:
  db: 2
production:
  db: 3 
```

这是我的 redis.rb，它声明了 redis 实例，以便在应用程序中使用：

```
REDIS_CONFIG = YAML.load( File.open( Rails.root.join("config/redis.yml") ) ).symbolize_keys
dflt = REDIS_CONFIG[:default].symbolize_keys
cnfg = dflt.merge(REDIS_CONFIG[Rails.env.to_sym].symbolize_keys) if REDIS_CONFIG[Rails.env.to_sym]

$redis = Redis.new(cnfg)

# To clear out the db before each test
$redis.flushdb if Rails.env = "test" 
```

这是我的 staging.yml：

```
staging: &staging
  adapter: postgresql
  encoding: unicode
  database: MY_APP_NAME_staging
  pool: 5
  username: postgres
  min_messages: warning 
```

以下是我的 Gemfile 的相关位：

宝石'导轨'，'3.2.2'

```
gem 'pg', '0.13.2'
gem 'redis', '3.0.4'
gem 'activeadmin', '0.4.4'
gem 'acts-as-taggable-on', '2.2.2'
gem 'backup', '3.0.20', :require => false
gem 'backup-task', '0.2.0'
gem 'chargify_api_ares', '0.5.2'
gem 'devise', '2.0'
gem 'dynamic_form', '1.0.0'
gem 'escape_utils', '0.1.9'
gem 'factory_girl_rails', '1.0'
gem 'fog','0.11.0', :require => false
gem 'foreigner', '0.9.1'
gem 'formtastic', '2.1.1'
gem 'haml', '3.1.4'
gem 'hoptoad_notifier', '2.4.0'
gem 'inherited_resources', '1.3.1'
gem 'jquery-rails', '1.0.14'
gem 'less-rails-bootstrap', '2.0.10'
gem 'log_buddy', '0.6.0'
gem 'meta_search', '1.1.3'
gem 'mustache', '0.99.4'
gem 'nested_form', :git => "https://github.com/ryanb/nested_form.git", :ref => "486e0f0e93f3ca455d5d"
gem 'nokogiri', "~> 1.5.0"
gem 'paperclip', '3.1.2'
gem 'rake', "0.9.2", :require => false
gem 'rdiscount', '1.6.5'
gem 'tinymce-rails', '3.5.4.1'
gem 'whenever', '0.6.8', :require => false
gem 'amoeba', '1.2.1' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T05:07:14.667

复制评论中的答案，以便从“未回答”过滤器中删除此问题：

> 发现我的 $redis.flushdb 命令是问题的原因。完全删除它之后，我现在可以部署了。我在 rspec 期间清除了 redis 存储，所以现在我需要以某种方式重新添加它。那好吧。

〜回答每个[用户1775141](https://stackoverflow.com/users/1775141/user1775141)

# pentaho - Liferay：在 portlet 中显示 Pentaho Report Designer HTML 输出

> ID：16174104
> 
> 赞同：0
> 
> 时间：2013-04-23T16:03:18.730
> 
> 标签：pentaho, liferay-6, portlet, pentaho-report-designer

我想将 Pentaho Report Designer .prpt 文件生成的 HTML 集成到一个 portlet 中。问题是生成的 HTML 是带有`<html>`,`<head>`和`body`标签的完整 HTML 页面。

如何在 portlet 中显示这样的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:57:25.540

一种方法是解析 .prpt 文件并删除您不想要的标记，然后在您的 portlet 中使用已解析的文件。如果报告文件始终采用相同的格式，您可以使用

```
String.replace 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T20:20:57.623

[我通过在 Liferay 论坛http://www.liferay.com/community/forums/-/message_boards/message/24039608](http://www.liferay.com/community/forums/-/message_boards/message/24039608)上提问找到了答案

# visual-studio-2010 - 我如何知道自上次 TFS 检出后我实际更改了哪些文件？

> ID：16174105
> 
> 赞同：5
> 
> 时间：2013-04-23T16:03:19.790
> 
> 标签：visual-studio-2010, tfs

我在 VS2010 中从 TFS 中检查了一堆文件，并对其中的几个进行了更改。如何查看我实际更改了哪些文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T18:35:35.370

使用 TFS 电动工具。打开 Visual Studio 命令提示符，导航到您的工作区，然后键入

`tfpt uu /noget /recursive`

这将撤消对尚未修改的文件的任何挂起更改

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:07:11.527

是`View -> Other Windows -> Pending Changes`你要找的吗？这列出了您选择的工作区中等待签入的所有更改。它在 VS2010 中看起来（和行为）不同，但这是 VS2012 中的[样子](http://msdn.microsoft.com/en-us/library/ms245462%28v=vs.110%29.aspx#pending_changes)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T18:09:56.643

要添加到 hawkke 的答案，我使用 CTRL-K C 来显示挂起的更改窗口 - 非常有用。

（按 ctrl-k，然后按“C”键）。

# python - “模块”对象没有属性“interpld”

> ID：16174106
> 
> 赞同：0
> 
> 时间：2013-04-23T16:03:23.147
> 
> 标签：python, module

我对 python 很陌生，使用 python2.7，并且有一些关于代码的问题：

```
import numpy as np
from scipy import interpolate
import pylab as py

x=np.r_[0:10:11j]
y=np.sin(x)
xnew=np.r_[0:10:100j]

#f=interpolate.interpld(x,y)

py.figure(1)
py.clf()
py.plot(x,y,'ro')
for kind in ['nearest','zero','slinear','quadtatic','cublic']:
    f=interpolate.interpld(x,y,kind=kind)
    ynew=f(xnew)
    py.plot(xnew,ynew,label=kind)
py.legend(loc='lower right') 
```

但它导致：

```
Traceback (most recent call last):
  File "C:\Users\LCL\.xy\startups\python_web\my_first_try_on_python_web\python_Interpolation\example1.py", line 22, in <module>
    f=interpolate.interpld(x,y,kind=kind)
AttributeError: 'module' object has no attribute 'interpld' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:05:35.493

你用过`interpld`，即`INTERPLD`。

你想要一维`interp1d`的，即用数字。`1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:05:36.567

看起来您正在使用`interpolate.interpld`，但函数名称是`interpolate.interp1d`（用数字 1 而不是字母 L）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-12T13:17:59.130

它应该是“interp1d”，数字 1，而不是 L

# javascript - 为什么我无法连接到外部链接 .js？（使用Xcode插件phonegap）

> ID：16174107
> 
> 赞同：-1
> 
> 时间：2013-04-23T16:03:31.417
> 
> 标签：javascript, html, xcode

```
 <!DOCTYPE HTML>
    <html>
    <head>
    <title>Doctor List</title>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <link rel="stylesheet" href="css/jquery.mobile-1.0rc1.min.css" />
    <link rel="stylesheet" href="css/styles.css" />

</head>

<body>

    <div id="employeeListPage" data-role="page"  >

        <div data-role="header" data-position="fixed">
            <h1>Doctor</h1>
        </div>

        <div data-role="content">
            <ul id="employeeList" data-role="listview" data-filter="true"></ul>
        </div>

    </div>
    <script src="js/jquery.js"></script>
    <script src="js/jquery.mobile-1.0rc1.min.js"></script>
    <script type="text/javascript"  src="http://panchoslimi.bugs3.com/MMC/js/DoctorList.js"></script>   

</body> 
```

为什么 scr="http://panchoslimi.bugs3.com/mmc/js/DoctorList.js" 不起作用？顺便说一句，我需要在服务器端使用 DoctorList.js 来完成我的 php 文件工作。所以我的 xcode 上不需要本地的 doctorlist.js .. 有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:09:17.237

当我尝试在浏览器中重复加载链接（将其放入 URL 栏中）时，源代码加载了一次。在其他尝试中，我收到一条错误消息：

> 服务暂时不可用

与提供 JavaScript 代码的人谈谈服务器不可靠可用。例如，如果他们使用负载平衡并且只有部分 Web 服务器正常运行，您可能会看到这种行为。

> 顺便说一句，我需要在服务器端使用 DoctorList.js 来完成我的 php 文件工作。所以我不需要本地的医生列表.js

您显示的代码是 HTML。HTML 将在客户端执行，而不是在服务器上执行。您包含脚本的标记似乎是正确的。

JavaScript 不在 PHP 中运行。要在服务器端运行它，您需要一个服务器端 JavaScript 引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:27:39.100

尝试从本地加载您的 js。只需下载它并包含在您的项目中，例如 scr="/js/DoctorList.js"。

# checkbox - AngularJS：孙复选框从父复选框中选择

> ID：16174113
> 
> 赞同：1
> 
> 时间：2013-04-23T16:03:46.603
> 
> 标签：checkbox, angularjs, parent-child

我正在尝试在 AngularJS 中创建复选框层次结构。我可以创建一个父复选框，它会自动检查子复选框，如果我手动检查子复选框，它将更新其子复选框（父复选框）。但是，如果我单击父复选框，它不会更新孙子的复选框。

在我添加 JavaScript 以确保父复选框更新孙子复选框之前，我想知道是否有更简单的方法。这是我的代码和一个[jsFiddle](http://jsfiddle.net/incutonez/D8vhb/3/)供您欣赏。

```
<div ng-app="">
    <strong>Parent</strong> (will check all Child boxes):
    <input type="checkbox" ng-model="parent" />
    <br/>
    <strong>Child 1</strong>:
    <input type="checkbox" ng-checked="parent" />
    <br />
    <strong>Child 2</strong>:
    <input type="checkbox" ng-checked="parent" />
    <br />
    <strong>Child 3</strong> (will check all Grandchild boxes):
    <input type="checkbox" ng-checked="parent" ng-model="child" />
    <br />
    <strong>Grandchild 1</strong>:
    <input type="checkbox" ng-checked="child" />
    <br />
    <strong>Grandchild 2</strong>:
    <input type="checkbox" ng-checked="child" />
    <br />
    <strong>Grandchild 3</strong>:
    <input type="checkbox" ng-checked="child" />
</div> 
```

任何帮助，将不胜感激！

另外，有 1500 个代表的人可以通过创建标签“angularjs-ng-checked”来帮助我吗？那太棒了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:45:46.207

不幸的是，没有更简单的方法。

[通过 github](http://github.com/angular/angular.js/pull/1057)从 Misko ：

> *...我们认为您尝试做的事情没有意义。ng-checked 创建单向数据绑定，但 ng-model 创建双向数据绑定。本质上，您有两个模型连接到同一个输入元素，我认为这是错误的。我认为 ng-model 和 ng-checked 应该单独使用，即一个或另一个但不能一起使用。*

除了使用指令或自己在控制器中同步检查之外，没有太多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T00:41:05.150

我一直在做一些摆弄（哈哈），我想出了一个似乎很通用的解决方案......意思是，你可以有尽可能多的嵌套复选框，只要你的心想要。我确信我正在遵循一些奇怪的做法，并且可能存在可以提高性能的领域——这肯定是循环通过很多对象——所以请随意批评它！我很想听听任何反馈。

代码可以在这个[jsFiddle](http://jsfiddle.net/incutonez/D8vhb/5/)找到。我也会在这里发布。

**的HTML**

```
<!DOCTYPE html>
<html>
  <head>
    <script src="../js/angularjs106.js"></script>
    <script src="angular_checkbox.js"></script>
    <link rel="stylesheet" href="angular_checkbox.css" />
  </head>
  <body ng-app>
    <div ng-controller="Ctrl">
      <ul>
        <li>
          <input type="checkbox" value="allChecks.id" ng-model="allChecks.isChecked" ng-change="checkChange(allChecks)">
          <label>{{allChecks.id}}</label>
        </li>
        <li ng-repeat="child in allChecks.children">
          <input type="checkbox" ng-model="child.isChecked" ng-change="checkChange(child)">
          <label>{{child.id}}</label>
          <ul>
            <li ng-repeat="grandchild in child.children">
              <input type="checkbox" ng-model="grandchild.isChecked" ng-change="checkChange(grandchild)">
              <label>{{grandchild.id}}</label>
              <ul>
                <li ng-repeat="grandgrandchild in grandchild.children">
                  <input type="checkbox" ng-model="grandgrandchild.isChecked" ng-change="checkChange(grandgrandchild)">
                  <label>{{grandgrandchild.id}}</label>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </body>  
</html> 
```

**JavaScript**

```
function Ctrl($scope) { 
  function Node(id, isChecked, parent) {
    this.id = id;
    this.isChecked = isChecked;
    this.parent = parent;
    this.children = [];
  }

  var parent = new Node('ALL', true, "");
  var child1 = new Node('Child 1', true, parent);
  var gchild1 = new Node('Grandchild 1', true, child1);
  var gchild2 = new Node('Grandchild 2', true, child1);
  var gchild3 = new Node('Grandchild 3', true, child1);
  child1.children.push(gchild1, gchild2, gchild3);
  var child2 = new Node('Child 2', true, parent);
  var child3 = new Node('Child 3', true, parent);
  var child4 = new Node('Child 4', true, parent);
  var gchild4 = new Node('Grandchild 4', true, child4);
  var gchild5 = new Node('Grandchild 5', true, child4);
  var gchild6 = new Node('Grandchild 6', true, child4);
  var ggchild1 = new Node('Grandgrandchild 1', true, gchild6);
  var ggchild2 = new Node('Grandgrandchild 2', true, gchild6);
  var ggchild3 = new Node('Grandgrandchild 3', true, gchild6);
  gchild6.children.push(ggchild1, ggchild2, ggchild3);
  child4.children.push(gchild4, gchild5, gchild6);
  var child5 = new Node('Child 5', true, parent);
  parent.children.push(child1, child2, child3, child4, child5);
  $scope.allChecks = parent;

  function parentCheckChange(item) {
    for (var i in item.children) {
      item.children[i].isChecked = item.isChecked;
      if (item.children[i].children) {
        parentCheckChange(item.children[i]);
      }
    }
  }

  function childCheckChange(parent) {
    var allChecks = true;
    for (var i in parent.children) {
      if (!parent.children[i].isChecked) {
        allChecks = false;
        break;
      }
    }
    if (allChecks) {
      parent.isChecked = true;
    }
    else {
      parent.isChecked = false;
    }
    if (parent.parent) {
      childCheckChange(parent.parent);
    }
  }

  $scope.checkChange = function(item) {
    // We're handling the ALL checkbox
    if (item.id === $scope.allChecks.id) {
      parentCheckChange(item);
    }
    // We're handling the toggling of all of the children here
    else {
      if (item.children) {
        parentCheckChange(item);
      }
      childCheckChange(item.parent);
    }
  };
} 
```

**微小的 CSS**

```
ul {
  list-style: none;
} 
```

无论如何，我想找出一种在对象中找到父对象的方法。事实证明，原生 JavaScript 对象不包含对子对象父对象的引用，因此我决定创建一个名为 Node.js 的类。当我实例化节点时，我可以将父对象设置为包含子对象的对象。一旦我这样做了，递归就变得很容易了。

当我们意识到我们有一个父母时，就会调用 parentCheckChange。childCheckChange 在孩子的支票更改时调用（呃！），但它用于监视所有父母的孩子......如果所有孩子都被检查，那么我们需要确保父母被检查，因为这parent 已经被检查，我们需要检查它的 parent 是否应该被检查（递归地）。

代码可能有点混乱，所以如果您感到困惑，请提出问题！

# lisp - Lisp 前缀计算器

> ID：16174115
> 
> 赞同：0
> 
> 时间：2013-04-23T16:03:53.433
> 
> 标签：lisp, scheme, prefix

我怎样才能写一个计算器来前缀符号，当它应该计算这个例子'（+ * 3 2 - 2 1）时，字符之间没有括号？当我有括号时，我可以处理它，但在这种情况下我迷路了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:30:00.240

在 google 上快速搜索产生了[这个](https://en.wikipedia.org/wiki/Polish_notation#Order_of_operations)wikipedia 页面，其中包含使用堆栈的前缀评估的实现（以伪代码形式）。这是编写自己的实现的起点。另请注意，使用 Lisp 的链表可以轻松实现堆栈，只需在头部添加/删除元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T02:33:48.263

```
(define (polish-notation-eval expr)
 (if (finished? expr) 
     (car expr)
     (polish-notation-eval (the-once-over expr)))) 
```

;;要么我们完成了，要么我们需要再做一遍以接近完成。

```
(define (the-once-over expr)
  (cond ((null? expr) expr )
    ((well-formed-expr? expr)
     (cons ((get-operator (car expr)) (cadr expr) (caddr expr))
           (the-once-over (cdddr expr))))
    (else (cons (car expr) (the-once-over (cdr expr)))))) 
```

;; 只是向下滚动列表寻找格式良好的表达式来评估。

```
(define *the-operations*
  (list (list '+ +)
    (list '* *)
    (list '- -)
    (list '/ /))) 
```

;; 具有名称和功能的关联列表

```
(define (get-operator name)
  (cadr (assoc name *the-operations*))) 
```

;;返回名称对应的函数

```
(define (finished? expr) 
 (= (length expr) 1)) 
```

;; 我们完成了一个我们得到一个长度的列表，否则不是

```
(define (well-formed-expr? expr)
 (and (assoc (car expr) *the-operations*) 
      (number? (cadr expr))
      (number? (caddr expr))))
 ;;are the next three elements something we can go ahead and evaluate? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T07:40:37.110

我是方案的初学者（如果是讨厌的代码，请原谅）。这个是带括号的：

```
(define (fce a)
  (case a
    (( + ) +)
    (( - ) -)
    (( * ) *)
    (( / ) /)))

(define (analyze vyraz)
  (if (list? vyraz)
      (calcul vyraz)
      vyraz))

(define (calcul vyraz)
  (if (= (length vyraz) 3 )
      ((fce (car vyraz)) (analyze (cadr vyraz)) (analyze (caddr vyraz)))
      (calcul (cons (calcul (list (car vyraz) (cadr vyraz) (caddr vyraz) (cadddr vyraz))))))) 
```

此代码可以计算例如：`(calcul '(- (* 3 2)(+ 1 2))`

我想将此代码修复为不带括号的代码，但条件和列出原始输入阻止了我。我不知道如何编写条件，以免丢失原始输入并进行最终计算。

有我的条件（但我认为，语法错误

```
(define (count vyraz)
  (cond (list? vyraz)
        (number? (car vyraz) (cons (car vyraz)))
        (number? (cdr vyraz) (cons (cdr vyraz)))
        (symbol? (cddr vyraz) (cons (cddr vyraz)))
        (else (cdr vyraz) (count vyraz))) 
  (calcul vyraz)) 
```

感谢您的所有回答和提示：）

# sql - 使用基于用户函数的计算查询临时表，没有连接，如何避免表扫描

> ID：16174116
> 
> 赞同：1
> 
> 时间：2013-04-23T16:03:57.100
> 
> 标签：sql, sql-server, sql-server-2008-r2

有没有办法根据 WHERE 过滤器优化这个查询？出于兼容性原因，我不能使用计算列。除此之外，我接受任何建议：

```
UPDATE #ATempTable
   SET SomeTotal = (QuantityA + QuantityB + QuantityC) 
 - (dbo.fmin(dbo.fmax(ISNULL(ValueA,0)
  ,dbo.fmax(ISNULL(ROUND(ValueB,0),0)
 , ISNULL(ValueC,0))), ISNULL(round(ValueD,0), 9999999)))

 WHERE QuantityA + QuantityB + QuantityC > 
 (dbo.fmin(dbo.fmax(ISNULL(ValueA,0)
  ,dbo.fmax(ISNULL(ROUND(ValueB,0),0)
 , ISNULL(ValueC,0))), ISNULL(round(ValueD,0), 9999999))) 
```

我正在使用 SQL Server 2008 R2。`fmax`并且`fmin`是用户定义的函数，它们分别返回两个给定值中的最大值和最小值，并且不受模式限制。

编辑：附加信息

#ATempTable 是由应用程序调用的过程中的临时表，SomeTotal、QuantityA/B/C 和 ValueA/B/C/D 都是该表的字段。不，代码不是那样的，我重命名了字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:12:37.690

SQL Server 2008 R2 支持索引视图。您可能希望在基表上创建一个视图并在其中定义总和列，然后在其上创建索引。这将大大减少过滤时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:39:46.637

创建表时，我建议您在`where`子句中添加一个具有差异的列：

```
diff = (QuantityA + QuantityB + QuantityC) -
 (dbo.fmin(dbo.fmax(ISNULL(ValueA,0)
  ,dbo.fmax(ISNULL(ROUND(ValueB,0),0)
 , ISNULL(ValueC,0))), ISNULL(round(ValueD,0), 9999999))); 
```

然后，您可以在新列（我称之为`diff`）上添加索引。这将加快你的`update`陈述。

# php - 在 wordpress 中为循环编写 If-else 条件时遇到问题

> ID：16174117
> 
> 赞同：0
> 
> 时间：2013-04-23T16:03:58.497
> 
> 标签：php, wordpress

我正在尝试编写一个 if else 条件，如果它来自一个名为 home 的类别，则显示一个帖子，但如果不是，则显示默认帖子。

我不确定 wordpress 究竟使用什么语法来输出类别中的帖子或显示默认类别中的帖子。

如果有人能给我一些指导，我将非常感激。

这是我到目前为止所得到的，我不确定我需要在 if 和 else 执行括号中输出什么。

目前，我已经从各个帖子类型中获得了最新的帖子来显示，并且需要添加一些基本上覆盖如果帖子在类别中的帖子被选中。

```
<?php
$query = new WP_Query('post_type=testimonial&catergory_name=home&showposts=1&paged=' . $paged);
$postcount = 0;
?>

<?php if ($query->have_posts()) : ?>
<?php while ($query->have_posts()) : $query->the_post(); ?>
<?php $postcount++; ?>
<li> 
<A HREF="<?php the_permalink(); ?>"></A>
<a href="<?php the_permalink(); ?>">

//start of my ifelse conditional
<?php if (catergory_name=home == true) {

} else { }

<?php
if (has_post_thumbnail()) {
// check if the post has a Post Thumbnail assigned to it.
the_post_thumbnail('thumb-casestudy');
}else {
?>

<img src="<?php bloginfo('template_url'); ?>/assets/images/default.jpg" alt="<?php the_title(); ?>"/>
<?php } ?>
 </a>

<h4><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h4>

<p class="hm_text"><?php 
//the_excerpt(); 
echo get_post_meta($query->post->ID, 'wpld_cf_home_page_text', true) 
?></p>

</li>
 <?php endwhile; ?>
<?php else : ?>
<?php endif; ?>
            <?php wp_reset_query(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:22:35.397

问题可能是因为您在 else 条件之后没有关闭 php 标记，但是您开始了另一个打开 php 标记。

```
//start of my ifelse conditional
<?php if (catergory_name=home == true) {

} else { }
?> <---- NEED TO CLOSE THIS CLAUSE
<?php
if (has_post_thumbnail()) {
// check if the post has a Post Thumbnail assigned to it.
the_post_thumbnail('thumb-casestudy');
}else {
?> 
```

# asp.net-web-api - 使用 asp.net web api 处理批处理的 sendgrid 事件

> ID：16174118
> 
> 赞同：1
> 
> 时间：2013-04-23T16:04:16.107
> 
> 标签：asp.net-web-api, sendgrid

我正在尝试使用 asp.net web api 应用程序来处理批处理的 SendGrid 事件，但由于 SendGrid 处理它发送的帖子的内容类型标题的方式，我遇到了一个绊脚石。

从他们的[文档中](http://sendgrid.com/docs/API_Reference/Webhooks/event.html)：

> 批处理事件 POST 的内容类型标头为 application/json，每行仅包含一个 JSON 字符串，每一行代表一个事件。请注意，目前 POST 标头将此帖子定义为 application/json，尽管它不是；每行都是有效的 JSON 字符串，但整个 POST 正文不是。

所以，给定一个控制器：

```
public class SendGridController : ApiController 
{ 
   // POST api/values 
   public void Post([FromBody]string value) 
   { 
   // do something with value
   }
} 
```

像 SendGrid 那样向其发布帖子将导致“值”为空。

```
string URI = "http://localhost:3018/api/sendgrid/";
string myParameters = 
@"={""email"":""foo@bar.com"",""timestamp"":1322000095,""user_id"":""6"",""event"":""bounced""}
{""email"":""foo@bar.com"",""timestamp"":1322000096,""user_id"":""9"",""event"":""bounced""}";

using (var wc = new System.Net.WebClient())
{
    wc.Headers[System.Net.HttpRequestHeader.ContentType] = "application/json"; // I work fine if "application/x-www-form-urlencoded" is used.
    wc.UploadString(URI, myParameters);
} 
```

如果我将客户端示例中的内容类型更改为“application/x-www-form-urlencoded”，一切都会按预期工作。

是否有一种简单的方法可以覆盖此约定，以便我可以处理 sendgrid 在我的控制器方法中作为字符串提供的格式错误的“json”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:25:34.673

好的，我终于想通了。诀窍是删除“值”参数并直接使用请求对象。

所以像：

```
public class SendGridController : ApiController 
{ 
   // POST api/values 
   public void Post() 
   { 
      var value = Request.Content.ReadAsStringAsync().Result;
      // do something with value
   }
} 
```

# python - Django 在模板中循环 x 次

> ID：16174133
> 
> 赞同：2
> 
> 时间：2013-04-23T16:05:04.917
> 
> 标签：python, django

您如何在模板中简单地循环**x**`Django)`次 ( ?

我知道当我遍历一个列表时，我可以做...

```
{% for i in list %} 
```

但是我有一个变量，`'count_val'`我想做的就是循环 count_val 的值...

有人可以帮助完成以下工作...

```
count_val = 5
{{ loop count_val }}
   I'm {{ forloop.counter }}!

{{ endfor }} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:14:25.157

处理这个问题的一个好方法是在你的views.py 文件中将对象限制为5 行，然后*将该*对象发送到你的模板，这样你的模板就不必处理计数了。（这种逻辑无论如何都应该由views.py文件处理，而不是模板）。由于我不知道您使用的是哪种对象，所以我将向您展示一个“书籍”示例来获取最后五行：

> Book.objects.all()[:5]

# applescript - applescript 移动文件夹脚本

> ID：16174144
> 
> 赞同：0
> 
> 时间：2013-04-23T16:05:37.467
> 
> 标签：applescript, duplicates

我是一个完整的 applescript 处女，我有 2 个版本的同一应用程序，它们使用具有相同名称的不同框架。

我正在寻找创建 2 个脚本，将正确版本的框架移动到 frameworks 文件夹中，以便我可以从桌面快速换出它们。

这是我到目前为止所拥有的，但它引发了 AppleEvent Handler failed -10000 错误。

```
tell application "Finder"
    duplicate POSIX file "Machintosh HD/Framework Store/Test.framework" to POSIX file "Machintosh HD/Library/Frameworks/Test.framework" with replacing
end tell 
```

有人可以指出我哪里出错了吗？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:04:15.543

刚刚注意到您还有 Had 磁盘名称。第一个正斜杠“/”就是您需要引用的所有内容。

```
 tell application "Finder"
    set rootFolder to POSIX file "/Framework Store/Test.framework"
    set targetFolder to POSIX file "/Library/Frameworks/"
        duplicate rootFolder to targetFolder with replacing
  end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:24:11.827

尝试：

```
tell application "Finder"
    duplicate POSIX file "Machintosh HD/Framework Store/Test.framework" to POSIX file "Machintosh HD/Library/Frameworks" with replacing
end tell 
```

# session - 在自定义验证器、servicestack API 中隔离/访问设置会话信息

> ID：16174149
> 
> 赞同：2
> 
> 时间：2013-04-23T16:05:54.207
> 
> 标签：session, servicestack

* * *

我想知道从我们通过 servicestack 的 fluent-validation API 挂钩连接的自定义验证器中访问用户**AuthSession的最佳方式。***基本上，要求迫使我们使用名为“ DocNumberValidator* ”的类通过该验证器访问数据库。用户的 ID 在他们进行身份验证时保存到会话中，我们需要此信息来完成成功的 SQL 查询。如何访问此会话信息（见下文....）。IoC 容器没有对 AuthSession 的引用？

*   **我想问题是，有人如何将必要的会话值传递给 SS 验证框架调用的类**？

示例代码：

* * *

```
public class MyValidator : AbstractValidator<Statuses>
{
    public IDocNumberValidator DocNumberValidator { get; set; }

    public StatusesValidator()
    {
        RuleFor(s => s.DocNumber)
              .Must(docNum => this.DocNumberValidator.Validate(docNum))
              .WithMessage("Document Number is invalid.")
              .WithErrorCode("S-001");
    }
}

 public class DocNumberValidator : IDocNumberValidator
{
    public IDbConnectionFactory Db { get; set; }

    public bool Validate(string docNum)
    {
        var isFound = false;
        this.Db.Run(conn =>
            {
                var sql = "SELECT COUNT([docNumber]) FROM [TABLE] WHERE [docNumber] = @DocNum AND [UserId] = @UserID";
                var cmd = conn.CreateCommand();
                cmd.CommandType = CommandType.Text;
                cmd.CommandText = sql;
                cmd.Parameters.Add(new SqlParameter("@DocNum", docNum));
                cmd.Parameters.Add(new SqlParameter("@UserID", ????????)); // how does one get access to saved users session here
                int cnt = (int) cmd.ExecuteScalar();
                if (cnt == 1)
                    isFound = true;

            });

        return isFound;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:23:41.060

不太确定这是最好的方法。接受建议。

*   使用 SessionFeature.GetSessionKey() 获取会话密钥
*   添加`public ICacheClient CacheClient { get; set; }`到验证器。将由 IoC 容器注入
*   使用密钥从缓存中获取 AuthUserSession（或您正在使用的任何类型）

**添加到您的示例中**

```
public class DocNumberValidator : IDocNumberValidator
{
    public IDbConnectionFactory Db { get; set; }
    public ICacheClient CacheClient { get; set; }

    public bool Validate(string docNum)
    {
        var isFound = false;
        var sessionKey = SessionFeature.GetSessionKey();
        var user = CacheClient.Get<AuthUserSession>(sessionKey); //Use whatever class you stored in the session

        this.Db.Run(conn =>
            {
                var sql = "SELECT COUNT([docNumber]) FROM [TABLE] WHERE [docNumber] = @DocNum AND [UserId] = @UserID";
                var cmd = conn.CreateCommand();
                cmd.CommandType = CommandType.Text;
                cmd.CommandText = sql;
                cmd.Parameters.Add(new SqlParameter("@DocNum", docNum));
                cmd.Parameters.Add(new SqlParameter("@UserID", user.UserAuthId)); // user whatever property you need access to
                int cnt = (int) cmd.ExecuteScalar();
                if (cnt == 1)
                    isFound = true;

            });

        return isFound;
    }
} 
```

# assembly - 推入堆栈时出现分段错误（NASM）

> ID：16174150
> 
> 赞同：0
> 
> 时间：2013-04-23T16:06:03.880
> 
> 标签：assembly, x86, stack, nasm, fault

我正在尝试运行一个 nasm 程序。以下代码：

```
segment .data

contAir:    dt 1.11330e-10
constOil:   dt 2.33656e-10

segment .text

global calc

calc:

mov edx, 0
push ebp
;mov ebp, esp

;mov eax, [ebp + 8]

ret 
```

将 ebp 推入堆栈时出现分段错误（核心转储）。这是为什么？我在 Ubuntu 虚拟机上运行此代码。有趣的是，有时我会收到“非法指令”错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T13:24:13.910

> 将 ebp 推入堆栈时出现分段错误（核心转储）。这是为什么？我在 Ubuntu 虚拟机上运行此代码。有趣的是，有时我会收到“非法指令”错误。

我敢打赌，您不会在 . 处遇到分段错误`push`，而是在`ret`. 该`ret`指令所做的是将返回地址从堆栈中弹出（通常会被`call`指令推送到那里）并跳转到它。

所以当你这样做时：

```
push ebp
ret 
```

您实际上是跳转到恰好存储在`ebp`.
您需要在返回之前平衡堆栈 - 即每个推送类型指令应该有一个相应的弹出类型指令：

```
push ebp
; ... other code goes here ...
pop ebp
ret 
```

# ios - KIF 在横向中点击 UIAlertView

> ID：16174151
> 
> 赞同：0
> 
> 时间：2013-04-23T16:06:06.187
> 
> 标签：ios, objective-c, automated-tests, kif-framework

大家好，

我有一个奇怪的问题，希望有人能给我提示......

我使用`KIF-Framework`. 在特定情况下，我得到一个`UIAlertView`带有三个按钮的按钮。在我点击这些按钮之一之前，我检查所有这些是否都可以通过该方法看到，`stepToWaitForTappableViewWithAccessibilityLabel`然后我点击一个带有 的按钮`stepToTapViewWithAccessibilityLabel`。

如果应用程序在纵向视图中，这可以正常工作，但如果我在横向视图中测试相同，则尽管**KIF**告诉我点击成功，但点击`UIAlertView`将不起作用。所有步骤都通过了，但不会被解雇，因此我的以下步骤失败了。**`UIAlertView`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:06:33.087

我在 GitHub 页面上发现了这个问题：[https ://github.com/square/KIF/issues/60](https://github.com/square/KIF/issues/60)

此解决方案不在当前的仓库中，但可以解决我的问题！**

# heroku - 在 Playframework 2.1.x 中如何仅在开发模式下选择本机 coffescript

> ID：16174154
> 
> 赞同：1
> 
> 时间：2013-04-23T16:06:18.687
> 
> 标签：heroku, playframework, coffeescript, playframework-2.1

在 Play 2.1.x 及更高版本中，您可以通过向 Build.scala 添加如下指令来使用本机 coffeescript 编译：

```
coffeescriptOptions := Seq("native", "/opt/local/bin/coffee -p") 
```

这是对速度的一个非常好的改进，但是当咖啡二进制文件不存在时它会中断，例如在部署到 heroku 时。

您可以仅在开发模式下设置该选项吗？这样我就可以获得开发和生产的速度是一次性成本。

如果我们处于生产或开发模式，Build.scala 似乎还没有信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:01:55.367

我尚未对其进行测试，但您可能想尝试使用[Multi Buildpack](https://github.com/ddollar/heroku-buildpack-multi)来组合[Node.js Buildpack](https://github.com/heroku/heroku-buildpack-nodejs)和[Scala Buildpack](https://github.com/heroku/heroku-buildpack-scala)。Node.js buildpack 应该允许您引入 Coffee Script 二进制文件，然后 Scala buildpack 会执行 Play 构建。

要开始，您可以这样做：

```
$ heroku config:add BUILDPACK_URL=https://github.com/ddollar/heroku-buildpack-multi.git

$ cat .buildpacks
https://github.com/heroku/heroku-buildpack-nodejs.git
https://github.com/heroku/heroku-buildpack-scala.git 
```

然后你需要添加一个`package.json`带来`coffee-script`依赖的：

```
{
  "dependencies": {
    "coffee-script": "1.2.x"
  }
} 
```

您还需要更新`/opt/local/bin/coffee`NPM 删除二进制文件的路径。它可能在`$HOME/node_modules/coffee-script/bin/coffee`.

# xml - 从批处理文件中解析 XML 文件的属性

> ID：16174161
> 
> 赞同：5
> 
> 时间：2013-04-23T16:06:30.190
> 
> 标签：xml, batch-file, xml-parsing

我正在解析如下 XML 文件：

```
<?xml version="1.0"?>
<!--
-->
<configuration>
   <settings>
      <connections>
            <connection name="name1" value="connection1" type="abc"/>
            <connection name="name2" value="connection2" type="def"/>
      </connections>
   </settings>
</configuration> 
```

从批处理文件中，我提示用户输入连接名称。我想解析 XML 获取具有指定名称的连接并获取其值。所以如果用户给出name1，我想选择connection1。[我从使用批处理提取 XML 标记值（基于标志）](https://stackoverflow.com/questions/13902744/extract-xml-tag-values-based-on-a-flag-using-batch)中获得了以下代码

我不熟悉批处理文件中的 for 循环（尤其是分隔符、标记），所以我不确定它是如何工作的以及如何使它对我有用。

```
(for /F "tokens=1,2 delims== " %%a in (connection.config) do (
   if "%%~b" neq "" set %%a=%%~b
   if /I "!name!" equ "%name%" echo !value!
)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T17:05:57.433

如果您使用正确的标记和分隔符，它会起作用：

```
@echo off&setlocal
for /F tokens^=2^,3^,5delims^=^<^"^= %%a in (connection.config) do (
   if "%%a" equ "connection name" echo(%%b %%c
) 
```

输出是：

```
name1 connection1
name2 connection2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-07T14:49:08.147

这是[**xpath.bat -small**](https://github.com/npocmaka/batch.scripts/blob/master/hybrids/jscript/xpath.bat) 脚本，它允许您通过 xpath 表达式获取 xml 值，而无需使用外部二进制文件：

```
call xpath.bat "connection.config" "//connection/@name"
call xpath.bat "connection.config" "//connection/@value" 
```

将其分配给变量：

```
for /f "tokens=* delims=" %%# in ('xpath.bat "connection.config" "//connection/@value"') do set "connection_value=%%#"
echo %connection_value% 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T17:34:02.383

```
@ECHO OFF
SETLOCAL
SET "name=name1"
SET "connection="
SET "type="

for /F "tokens=5,7delims==/ " %%a in (
 'findstr /c:"<connection name=\"%name%\"" ^<connection.config'
 ) do SET connection=%%~a&SET type=%%~b

ECHO connection=%connection%
ECHO TYPE      =%type% 
```

查找包含文字字符串“\”转义的数据行`"`）然后将连接设置为从数据行的第七个标记开始的第 5 个（并键入好衡量标准）

```
 <connection name="name1" value="connection1" type="abc"/> 
```

使用`=`,`/`和`[space]`作为分隔符。

# jquery - jsFiddle捕捉到的这些问题会导致点击事件发生故障吗？

> ID：16174165
> 
> 赞同：0
> 
> 时间：2013-04-23T16:06:56.487
> 
> 标签：jquery, html, xml, ajax, jsfiddle

我的 jQuery 使用 VS2012 编译（并在浏览器中运行），但点击事件没有做我想做的事（实际上，我可以看到它没有做任何事情）。

我将我的 html 和 jQuery 添加到 jsfiddle 并在其上运行“JSHint”。在下面的代码中，它在三个地方摇动虚拟手指：

```
$(document).ready(function () {
            $('#submit').click(function () {
                $.ajax({
                    type: "GET",
                    url: "DuckbillSETUP.XML",
                    dataType: "xml",
                    success: function (PlatypusSetupRec) {
                        var Platypussetup = "<ul>";
                        $(PlatypusSetupRec).find('Platypus').each(function () {
                            var PlatypusNum = $(this).find('PlatypusNumber').text()
                            Platypussetup += "<li>" + PlatypusNum + "</li>";
                        });
                        Platypussetup += "</ul>";
                        $('#Platypus_Setup').append(Platypussetup);
                    }
                error: function (xhr, status) {
                    alert(xhr.status);
                }
                });
                return false;
            });
        }); 
```

...即：

```
var PlatypusNum = $(this).find('PlatypusNumber').text() 
```

上面写着“*缺少分号*”

```
error: function (xhr, status) { 
```

上面写着“*函数声明中缺少名称*”

```
}); 
```

（最后一行）它说，“*预期'（结束）'，而不是看到'}'* ”

我不知道如何修复这个 jQuery，或者如果这些事情中的任何一个可能是单击按钮什么都不做的原因。

注意：我*确实*有一个 ID 为“提交”的按钮：

```
<input type="submit" id="submit" value="Get DuckbillSETUP.XML" />
        <div id="Platypus_Setup">
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:09:39.957

你需要一个`,`之前`error:...`

```
}, // <-- add this comma
error: function (xhr, status) { 
```

并添加一个`;`之后

```
var PlatypusNum = $(this).find('PlatypusNumber').text(); //<-- add the missing ; 
```

# html - 我看不到生成的随机数

> ID：16174166
> 
> 赞同：-1
> 
> 时间：2013-04-23T16:07:02.150
> 
> 标签：html, variables, random, types, batch-file

我编写了这个脚本来组合更多的 html 文件。我使用了随机函数作为其中的一部分。我看到一个奇怪的东西...

```
@echo on 
pause
CD "C:\Documents and Settings\Mauro\Documenti\Firme\ProvaMerge\"
pause
for %%i in (Pasqualino,Mauro) DO (
pause
ECHO %%i 
pause
type Parti_Standard\StrutturaTabella_1parte.txt > %%i.html
pause
type utenti\%%i.html >> %%i.html
pause
type Parti_Standard\StrutturaTabella_2parte.txt >>%%i.html
:loop
set /a photo=%random% %% 3 + 1 
ECHO RANDOM
ECHO %random% %%PHOTO
TYPE Immagini\%photo%.txt >> %%i.html
pause
type Parti_Standard\StrutturaTabella_3parte.txt >> %%i.html
type Firme_Standard\"Firma Inox Pack.html" >> %%i.html
)
pause 
```

一切正常，但我没有看到`%photo%`变量...我尝试使用`%%photo`or`%photo%`但我只获得了一个空变量。相反，首先为了提高该脚本的复杂性，我在没有 for 循环的情况下使用它......而且它工作正常。

```
@echo on 
CD "C:\Documents and Settings\Mauro\Documenti\Firme\ProvaMerge\"
type Parti_Standard\StrutturaTabella_1parte.txt >new.html
type mauro.html >> new.html
type Parti_Standard\StrutturaTabella_2parte.txt >>new.html
:loop
set /a photo=%random% %% 3 + 1 
echo %%photo
pause
TYPE Immagini\%photo%.txt >> new.html
type Parti_Standard\StrutturaTabella_3parte.txt >> new.html
type Firme_Standard\"Firma Inox Pack.html" >>new.html
pause 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:44:44.887

在代码块（例如 for 循环）内，您需要`delayed expansion`. 例如，这不起作用：

```
@echo off&setlocal
(
set /a photo=%random% %% 3 + 1 
echo %photo%
) 
```

..这有效：

```
@echo off&setlocal enabledelayedexpansion
(
set /a photo=!random! %% 3 + 1 
echo !photo!
) 
```

这也必须用于写入文件：

```
TYPE Immagini\!photo!.txt >> %%i.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:45:40.510

好的，现在它工作了！谢谢！！

```
@echooff
pause
CD "C:\Documents and Settings\Mauro\Documenti\Firme\ProvaMerge\"
for %%i in (Pasqualino,Mauro) DO (
for %%g in ("Firma Inox Pack","Firma Mail Arca Cucine") Do (
pause
ECHO "%%i %%g".html 
type Parti_Standard\StrutturaTabella_1parte.txt > Firme_Composte\%%i\"%%i %%g".html
type utenti\%%i.html >> Firme_Composte\%%i\"%%i %%g".html
type Parti_Standard\StrutturaTabella_2parte.txt >> Firme_Composte\%%i\"%%i %%g".html
pause
setlocal enabledelayedexpansion
(
set /a n=!random! %% 3 + 1 
echo !n!
)
TYPE Immagini\!n!.txt >> Firme_Composte\%%i\"%%i %%g".html
pause
type Parti_Standard\StrutturaTabella_3parte.txt >> Firme_Composte\%%i\"%%i %%g".html
type Firme_Standard\%%g.html >> Firme_Composte\%%i\"%%i %%g".html 
)
) 
```

# javascript - 我无法使用 javascript 更改内容选项卡

> ID：16174168
> 
> 赞同：2
> 
> 时间：2013-04-23T16:07:04.003
> 
> 标签：javascript, jquery, css, tabs

**原始标签：请检查此 URL：** [http ://basarhost.com/tab](http://basarhost.com/tab)
**添加新标签：请检查此 URL：** [http ://basarhost.com/tab/mynewtab/](http://basarhost.com/tab/mynewtab/)

正如您在网站上看到的那样，第二个无法正常工作。

这是我的javascript：

```
 $(document).ready(function() {

    /* Activate H5F */

    $('ul#tabs li').click(function() {

        /* If what we clicked is the actual link, we move make the changes */
        if($(this).attr("class") == "inactiveTab") {

            /* Swap classes on the clicked item */
            $(this).addClass('activeTab').removeClass('inactiveTab');

            /* Swap classes on the other LI */
            $(this).siblings('.activeTab').removeClass('activeTab').addClass('inactiveTab');

            /* Change the float of the previous element */
            $(this).prev().css("float", "left");

            /* We toggle the tabs */
            $("div.toggleTab").slideToggle("fast", function() {

                /* Once the animation is complete, focus the first field of the visible form */
                $("div.toggleTab input:visible").first().focus();

            });

        }

    });

}); 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T19:13:31.543

我建议的解决方案是将functions.js的内容更改为：

```
$(document).ready(function() {

    /* Activate H5F */
    H5F.setup($("div#signUp form"));

    $('ul#tabs li').click(function() {

        /* If what we clicked is the actual link, we move make the changes */
        if($(this).attr("class") == "inactiveTab") {

            /* Swap classes on the clicked item */
            $(this).addClass('activeTab').removeClass('inactiveTab');

            /* Swap classes on the other LI */
            $(this).siblings('.activeTab').removeClass('activeTab').addClass('inactiveTab');

            /* Change the float of the previous element */
            $(this).prev().css("float", "left");
        }

    });
    $('#signInTab').click(function() {
        $('#signUp').hide();
        $('#homeBill').hide();
        $("#signIn").slideToggle("fast", function() {
            /* Once the animation is complete, focus the first field of the visible form */
            $("#signIn input:visible").first().focus();
        });
    });
    $('#signUpTab').click(function() {
        $('#signIn').hide();
        $('#homeBill').hide();
        $("#signUp").slideToggle("fast", function() {
            /* Once the animation is complete, focus the first field of the visible form */
            $("#signUp input:visible").first().focus();
        });
    });
    $('#homeBillTab').click(function() {
        $('#signIn').hide();
        $('#signUp').hide();
        $("#homeBill").slideToggle("fast");
    });

}); 
```

您还需要将新的 div css 设置为隐藏：

```
div#homeBill { display: none; } 
```

**CSS FIX：** 为了摆脱烦人的标签切换，我建议将 css 修改`ul#tabs li`为：

```
ul#tabs li {
    padding: 25px;
    float: left;
    width: 27.36%;
} 
```

`float: right;`并从中删除`ul#tabs li.inactiveTab`

希望这可以帮助！

# list - 如何从网格模板列表中制作精灵列表

> ID：16174173
> 
> 赞同：0
> 
> 时间：2013-04-23T16:07:18.730
> 
> 标签：list, grid, pygame, sprite, maze

我需要创建带有精灵列表的类，这些精灵列表是网格列表中的第 1 号特征。但我需要拆分窗口到 len(grid), len(grid[0]) 我在 WallTile 类中的表现如何。但是我需要在网格中为 1 的那个地方用瓷砖填充窗口。这将是一个迷宫般的瓷砖。我想使用精灵，因为我需要使用与瓷砖墙的碰撞检测。

```
width, height = 700, 700  #window size

grid = [[0, 1, 0, 0, 0, 0, 0],
       [0, 1, 0, 1, 1, 1, 0],
       [0, 1, 0, 1, 0, 0, 0],
       [0, 0, 0, 1, 0, 1, 1],
       [0, 1, 0, 1, 0, 1, 0],
       [0, 1, 0, 1, 0, 0, 0],
       [0, 1, 0, 1, 1, 1, 1]]

class WallTile(pygame.sprite.Sprite):
    def __init__(self):
        super(WallTile, self).__init__()
        self.TILE_W = width / len(grid)     # spliting window by len(grid) and set size of one tile
        self.TILE_H = height / len(grid[0])
        self.tiles_x = width / self.TILE_W    # size of all tiles
        self.tiles_y = height / self.TILE_H
        self.imageMaster = pygame.image.load("images/wallBig.png")
        self.image = self.imageMaster
        self.pozX = 0.0
        self.pozY = 0.0
        self.image = pygame.transform.scale(self.imageMaster, (self.TILE_W, self.TILE_H))
        self.rect = self.image.get_rect()
        self.rect.center = (self.pozX, self.pozY)

        # here I need fill some sprite list with tiles with different coordinates.
            # I want to put tile on place where is number 1 in grid. But put it to screen.

        for y in range(self.tiles_y):
            for x in range(self.tiles_x):
                for i in range(len(grid[0])):
                    for j in range(len(grid)):
                        if grid[i][j] is 1:
                                # I need make new tile and put it to sprite list

                                self.pozX, self.pozY = (x * self.TILE_W), (y * self.TILE_H)

                                #
                                #--- here I dont know what to do...
                                #

class MainClass:
    def Main(self):

            # here is how Im drawing sprites on screen.

            screen = pygame.display.set_mode(size)
            screen.fill((grey))

            wallTile = WallTile()
            spriteGroup_1 = pygame.sprite.Group(wallTile)

            background = pygame.Surface(obrazovka.get_size())
            background.fill((grey))
            background.set_colorkey((60,0,0))

            running = True
            while running:
                for event in pygame.event.get():
                    if event.type == QUIT or \
                        event.type == KEYDOWN and (event.key in [K_ESCAPE, K_q]):  
                            running = False

                        spriteGroup_1.clear(screen, background)
                        spriteGroup_1.update()
                        updateScreen = spriteGroup_1.draw(screen)

                        pygame.display.update(updateScreen)
                        pygame.display.flip()

if __name__ == '__main__':
    mainWin = MainClass()
    sys.exit((mainWin.Main())) 
```

真的很感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:14:05.053

我首先将您的 WallTile 类重新定义为仅代表一个瓷砖。WallTile 的构造函数现在接受一个大小和位置参数，它们表示它在屏幕上的大小和位置。

```
class WallTile(pygame.sprite.Sprite):
    def __init__(self, size, location):
        pygame.sprite.Sprite.__init__(self)
        self.size = size
        self.location = location
        self.image = pygame.image.load("images/wallBig.png")
        self.image = pygame.transform.scale(self.image, size)
        self.rect = self.image.get_rect() 
```

然后，在 WallTile 类的代码之外，您可以检查网格中是否存在“1”，并在找到时创建一个新图块。您可以查看网格上该元素的索引，并将这些值乘以每个图块的大小，以确定该图块在屏幕上的位置。然后，您可以获取该图块列表并使用它们创建一个 Sprite 组。

```
tile_size = (20, 20)
tiles = list()
for y in range(len(grid)):
    for x in range(len(grid[y])):
        if grid[x][y] == 1:            
            new_tile = WallTile(tile_size, (x * tile_size[0], y * tile_size[1]))
            tiles.append(new_tile)

tile_group = pygame.sprite.Group(tiles) 
```

如果您想从组中拉出特定的图块，并且您还没有对该图块的引用，则可以遍历该组并查找某个位置

```
search_location = (40, 80)
for tile in tile_group:
    if tile.location = search_location:
        # we've found that tile, now do something with it 
```

# playframework - 在 IDEA 中编译时出现 sbt.ResolveException

> ID：16174175
> 
> 赞同：7
> 
> 时间：2013-04-23T16:07:26.517
> 
> 标签：playframework, intellij-idea, playframework-2.0

当我直接从 comsole 运行“play clean compile”时，一切正常。

但是，如果我从 IDEA 中单击“制作项目”，我会得到：

```
Play 2 compiler
:  (*:update) sbt.ResolveException: download failed: org.slf4j#slf4j-api;1.6.6!slf4j-api.jar
 Total time: 6 s, completed 23-Apr-2013 17:59:14 
```

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T16:30:17.383

这周我遇到了同样的问题。解决了删除`~/.ivy2`目录。

### 更新：

尝试以下操作，删除此文件：

*   `/path/to/your/play/home/repository/cache/org.slf4j`
*   `/path/to/your/play/home/repository/local/org.slf4j`
*   `/path/to/your/play/home/repository/.sbt.ivy.lock`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-14T16:23:46.293

对我来说，这开始于我更新我的应用程序以使用 Play 2.1.3 而不是 2.1.0 in `plugins.sbt`...但忘记实际下载 2.1.3 版本并将其添加到我的路径中。

# c++ - asio 写入成功，但未发送任何信息

> ID：16174177
> 
> 赞同：0
> 
> 时间：2013-04-23T16:07:27.830
> 
> 标签：c++, boost, tcp, network-programming, boost-asio

我在创建发送请求的客户端程序时遇到问题。该请求正在使用保持活动 TCP HTTP 连接。当连接关闭时（由于超时或达到最大值），如果没有可用的连接，我尝试启动一个新连接，然后重新发送请求。连接工作正常，但是，当我尝试发送写入时，没有发送任何内容（根据 Wireshark），但我的写入错误代码是成功的。接收服务器也不接收任何信息。这是我的代码的主要部分：

```
void request_handler::send_1(std::vector<std::string> *bid_vector, std::string request_path, boost::mutex *bids_mutex)
{
    try
    {
        boost::asio::streambuf request;
        std::ostream request_stream(&request);
        std::string reply_information;
        request_stream << "GET /tests HTTP/1.1\r\n";
        request_stream << "Host: 10.1.10.160\r\n";
        request_stream << "Accept: */*\r\n";
        request_stream << "Connection: keep-alive\r\n\r\n";

        server1_mutex_.lock();
        if(server1_available_map_.size() == 0)
        {
            server1_mutex_.unlock();

            persistent_connection *new_connection = new persistent_connection("10.1.10.160","80");
            if(new_connection->send(request, reply_information))
            {
                server1_mutex_.lock();
                    server1_available_map_[new_connection->get_id()] = new_connection;
                server1_mutex_.unlock();
            }
        }
        else
        {
                persistent_connection *current_connection = (*(server1_available_map_.begin())).second;
                server1_available_map_.erase(current_connection->get_id());
            server1_mutex_.unlock();

            int retry_counter = 20;
            while(!current_connection->query_rtb(request, reply_information) && --retry_counter != 0)
            {
                delete current_connection;

                server1_mutex_.lock();
                if(server1_available_map_.size() == 0)
                {
                    server1_mutex_.unlock();
                    current_connection = new persistent_connection("10.1.10.160","80");
                }
                else
                {
                        current_connection = (*(server1_available_map_.begin())).second;
                        server1_available_map_.erase(current_connection->get_id());
                    server1_mutex_.unlock();
                }
            }
            //Could not connect to 20 connections
            if(retry_counter == 0)
            {
                Log::fatal("Could not connect in 20 tries");
                delete current_connection;
                return;
            }

            server1_mutex_.lock();
                server1_available_map_[current_connection->get_id()] = current_connection;
            server1_mutex_.unlock();
        }    
        bids_mutex->lock();
            bid_vector->push_back(reply_information);
        bids_mutex->unlock();    
    }
    catch(boost::thread_interrupted& e)
    {
        std::cout << "before cancel 1" << std::endl;
        return;
    }
    catch(...)
    {
        std::cout << "blah blah blah" << std::endl;
    }
} 
```

还有我的 persistent_connection 类

```
persistent_connection::persistent_connection(std::string ip, std::string port):
    io_service_(), socket_(io_service_), host_ip_(ip)
{
    boost::uuids::uuid uuid = boost::uuids::random_generator()();
    id_ = boost::lexical_cast<std::string>(uuid);

    boost::asio::ip::tcp::resolver resolver(io_service_);
    boost::asio::ip::tcp::resolver::query query(host_ip_,port);
    boost::asio::ip::tcp::resolver::iterator iterator = resolver.resolve(query);
    boost::asio::ip::tcp::endpoint endpoint = *iterator;
    socket_.async_connect(endpoint, boost::bind(&persistent_connection::handler_connect, this, boost::asio::placeholders::error, iterator));
    io_service_.run();
}

void persistent_connection::handler_connect(const boost::system::error_code &ec, boost::asio::ip::tcp::resolver::iterator endpoint_iterator)
{
    if(ec)
    {
        std::cout << "Couldn't connect" << ec << std::endl;
        return;
    }
    else
    {
        boost::asio::socket_base::keep_alive keep_option(true);
        socket_.set_option(keep_option);
        std::cout << "Connect handler" << std::endl;
    }
}

bool persistent_connection::send(boost::asio::streambuf &request_information, std::string &reply_information)
{

    std::cout << "DOING QUERY in " << id_ << std::endl;
    boost::system::error_code write_ec, read_ec;
    try
    {
        std::cout << "Before write" << std::endl;
        boost::asio::write(socket_, request_information, write_ec);
        std::cout << write_ec.message() << std::endl;
    }catch(std::exception& e)
    {
        std::cout << "Write exception: " << e.what() << std::endl;
    }
    if(write_ec)
    {
        std::cout <<"Write error: " << write_ec.message() << std::endl;
        return false;
    }
    boost::array<char,8192> buf;
    buf.assign(0);
    try
    {
        std::cout << "Before read" << std::endl;
        boost::asio::read(socket_, boost::asio::buffer(buf), boost::asio::transfer_at_least(1), read_ec);
        std::cout << read_ec.message() << std::endl;
    }catch(std::exception& e)
    {
        std::cout << "Read exception: " << e.what() << std::endl;
    }
    if(read_ec)
    {
        std::cout << "Read error: " << read_ec.message() << std::endl;
        return false;
    }
    reply_information = buf.data();
    return true;
}

std::string persistent_connection::get_id()
{
    return id_;
} 
```

发生这种情况的路径是如果 server1_available_map_.size() > 0，并且如果 while 执行并失败。然后如果第二个 server1_available_map_.size() 上的 size == 0;

调用的输出是：

```
DOING QUERY in 69a8f0ab-2a06-45b4-be26-37aea6d93ff2
Before write
Success
Before read
End of file
Read error: End of file
Connect handler
DOING QUERY in 4eacaa96-1040-4878-8bf5-c29b87fa1232
Before write
Success
Before read 
```

这表明第一个连接获得了文件的结尾（另一端的服务器关闭了连接）。第二个连接连接正常（Connect handler message），在第二个连接（不同的id）中执行查询，显然写入成功，程序挂在读取上（因为没有什么可读取的）。

有谁知道为什么会这样？有什么我似乎做错了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:03:46.413

看起来您正在将相同的 boost::asio::streambuf 传递给多个写入调用。

```
boost::asio::write(socket_, request_information, write_ec); 
```

**第一次调用boost::asio::write**会消耗缓冲区的内容。这有效地清空了缓冲区，因此没有任何东西可以发送。如果您想对多个写入使用相同的缓冲区，请传递一个 const 字符串。

# android - 在android自定义键盘中设置键盘模式

> ID：16174179
> 
> 赞同：12
> 
> 时间：2013-04-23T16:07:30.543
> 
> 标签：android, android-softkeyboard

我使用 Android 键盘类创建了一个自定义键盘。

我想有两种模式的行。一种是普通模式。一种是当用户按下“Sym”按钮时。对于 XML 中“Sym”按钮的每个 Keyboard.Row，我指定了 android:keyboardMode="@+id/sym"。

现在，当我运行它时，只显示未指定 android:keyboardMode 的行。这是预期的，也是文档所说的。

我的问题是如何在我的代码中设置模式，以便呈现带有 android:keyboardMode="@+id/sym" 的行？

```
<Row>
    <Key android:codes="113"    android:keyLabel="q" />
    <Key android:codes="119"    android:keyLabel="w" />
    <Key android:codes="101"    android:keyLabel="e" />
    <Key android:codes="114"    android:keyLabel="r" />
    <Key android:codes="116"    android:keyLabel="t" />
    <Key android:codes="121"    android:keyLabel="y" />
    <Key android:codes="117"    android:keyLabel="u" />
    <Key android:codes="105"    android:keyLabel="i" />
    <Key android:codes="111"    android:keyLabel="o" />
    <Key android:codes="112"    android:keyLabel="p" />
    <Key android:codes="-5"    android:keyIcon="@drawable/keyboard_backspace_icon" android:keyWidth="91dp" />
</Row>
<Row android:keyboardMode="@+id/sym">
    <Key android:codes="113"    android:keyLabel="+" />
    <Key android:codes="119"    android:keyLabel="_" />
    <Key android:codes="101"    android:keyLabel="=" />
    <Key android:codes="114"    android:keyLabel="%" />
    <Key android:codes="116"    android:keyLabel="^" />
    <Key android:codes="121"    android:keyLabel="|" />
    <Key android:codes="117"    android:keyLabel="&lt;" />
    <Key android:codes="105"    android:keyLabel=">" />
    <Key android:codes="111"    android:keyLabel="[" />
    <Key android:codes="112"    android:keyLabel="]" />
    <Key android:codes="-5"    android:keyIcon="@drawable/keyboard_backspace_icon" android:keyWidth="91dp" />
</Row> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-23T16:47:10.660

好的，我自己想通了。

没有任何方法可以简单地切换键盘模式。您需要做的是创建 2 个不同的键盘并手动在它们之间切换。

这是更新后的 XML 的样子。请注意，您希望在两个关键字中使用的行不应包含标志 android:keyboardMode。

```
<!-- this is the row that shows in both modes -->
<Row android:keyWidth="51dp">
    <Key android:codes="49"    android:keyLabel="1"  />
    <Key android:codes="50"    android:keyLabel="2" />
    <Key android:codes="51"    android:keyLabel="3"  />
    <Key android:codes="52"    android:keyLabel="4"  />
    <Key android:codes="53"    android:keyLabel="5" />
    <Key android:codes="54"    android:keyLabel="6" />
    <Key android:codes="55"    android:keyLabel="7"  />
    <Key android:codes="56"    android:keyLabel="8" />
    <Key android:codes="57"    android:keyLabel="9" />
    <Key android:codes="48"    android:keyLabel="0"/>        
</Row>

<!-- this is the normal mode -->  
<Row  android:keyboardMode="@integer/keyboard_normal">
    <Key android:codes="113"    android:keyLabel="q" />
    <Key android:codes="119"    android:keyLabel="w" />
    <Key android:codes="101"    android:keyLabel="e" />
    <Key android:codes="114"    android:keyLabel="r" />
    <Key android:codes="116"    android:keyLabel="t" />
    <Key android:codes="121"    android:keyLabel="y" />
    <Key android:codes="117"    android:keyLabel="u" />
    <Key android:codes="105"    android:keyLabel="i" />
    <Key android:codes="111"    android:keyLabel="o" />
    <Key android:codes="112"    android:keyLabel="p" />
    <Key android:codes="-5"    android:keyIcon="@drawable/keyboard_backspace_icon" android:keyWidth="91dp" />
</Row>

<!-- this is the symbol mode-->
<Row  android:keyboardMode="@integer/keyboard_symbol">
    <Key android:codes="113"    android:keyLabel="+" />
    <Key android:codes="119"    android:keyLabel="_" />
    <Key android:codes="101"    android:keyLabel="=" />
    <Key android:codes="114"    android:keyLabel="%" />
    <Key android:codes="116"    android:keyLabel="^" />
    <Key android:codes="121"    android:keyLabel="|" />
    <Key android:codes="117"    android:keyLabel="&lt;" />
    <Key android:codes="105"    android:keyLabel=">" />
    <Key android:codes="111"    android:keyLabel="[" />
    <Key android:codes="112"    android:keyLabel="]" />
    <Key android:codes="-5"    android:keyIcon="@drawable/keyboard_backspace_icon" android:keyWidth="91dp" />
</Row> 
```

然后创建一个 integer.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <integer name="keyboard_symbol">1</integer>
    <integer name="keyboard_normal">0</integer>
</resources> 
```

这是相关的java代码。当您创建键盘对象时，您传递了keyboard_normal 或keyboard_symbol。

```
 normalKeyBoard = new Keyboard(activity, R.id.board, R.integer.keyboard_normal);
 symbolKeyBoard = new Keyboard(activity, R.id.board, R.integer.keyboard_symbol); 
```

现在创建一个类变量来跟踪模式。默认值为 R.integer.keyboard_normal

```
private int mKeyboardState = R.integer.keyboard_normal; 
```

现在在您的 onKeyboardActionListner().onKey 方法中放置代码以捕获切换模式的键（假设您已经在键盘中创建了一个）。

```
 if( primaryCode== Keyboard.KEYCODE_MODE_CHANGE) {
            if(mKeyboardView != null) {
                if(mKeyboardState == R.integer.keyboard_normal){
                    //change to symbol keyboard
                    if(symbolKeyBoard== null){
                        symbolKeyBoard = new Keyboard(mHostActivity, R.xml.hexkbd, R.integer.keyboard_symbol);
                    }

                    mKeyboardView.setKeyboard(symbolKeyBoard);
                    mKeyboardState = R.integer.keyboard_symbol;
                } else {
                    if(normalKeyBoard== null){
                        normalKeyBoard = new Keyboard(mHostActivity, R.xml.hexkbd, R.integer.keyboard_normal);
                    }

                    mKeyboardView.setKeyboard(normalKeyBoard);
                    mKeyboardState = R.integer.keyboard_normal;
                }
                //no shifting
                mKeyboardView.setShifted(false);
            }
        } 
```

# javascript - TypeScript，遍历字典

> ID：16174182
> 
> 赞同：283
> 
> 时间：2013-04-23T16:07:40.340
> 
> 标签：javascript, html, typescript

在我的代码中，我有几个字典（如[这里](https://web.archive.org/web/20140901130959/https://typescript.codeplex.com/discussions/398359)所建议的），它们是字符串索引的。由于这是一种即兴的类型，我想知道是否有任何关于如何循环遍历每个键（或值，无论如何我都需要这些键）的建议。任何帮助表示赞赏！

```
myDictionary: { [index: string]: any; } = {}; 
```

* * *

## 回答 #1

> 赞同：394
> 
> 时间：2013-04-23T16:42:17.290

要遍历键/值，请使用`for in`循环：

```
for (let key in myDictionary) {
    let value = myDictionary[key];
    // Use `key` and `value`
} 
```

* * *

## 回答 #2

> 赞同：272
> 
> 时间：2016-10-15T05:59:56.560

**< ES 2017** :

```
Object.keys(obj).forEach(key => {
  let value = obj[key];
}); 
```

**>= ES 2017**：

```
Object.entries(obj).forEach(
  ([key, value]) => console.log(key, value)
); 
```

* * *

## 回答 #3

> 赞同：102
> 
> 时间：2017-06-21T17:50:16.893

这个怎么样？

```
for (let [key, value] of Object.entries(obj)) {
    ...
} 
```

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2013-04-23T17:08:32.027

Ian 提到的键/值循环有一个警告。如果对象可能具有附加到其原型的属性，并且当您使用`in`运算符时，这些属性将被包括在内。因此，您需要确保键是实例的属性，而不是原型的属性。`indexof(v)`较旧的 IE 以作为键出现而闻名。

```
for (const key in myDictionary) {
    if (myDictionary.hasOwnProperty(key)) {
        let value = myDictionary[key];
    }
} 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2019-08-18T19:40:32.277

获取所有字典/对象值的最短方法：

```
Object.keys(dict).map(k => dict[k]); 
```

或者这种方式：

```
Object.entries(dict).map([k,v] => /* ... */); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-08-14T06:37:42.367

如果你只是为`in`一个没有 if 语句的对象，`hasOwnProperty`那么你会从 linter 得到错误，如：

```
for (const key in myobj) {
   console.log(key);
} 
```

```
WARNING in component.ts
for (... in ...) statements must be filtered with an if statement 
```

所以解决方案是使用`Object.keys`而`of`不是。

```
for (const key of Object.keys(myobj)) {
   console.log(key);
} 
```

希望这个帮手有人使用 linter。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-06-17T18:37:22.853

Ians Answer 很好，但您应该使用 const 而不是 let 作为密钥，因为它永远不会更新。

```
for (const key in myDictionary) {
    let value = myDictionary[key];
    // Use `key` and `value`
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-12-08T01:23:40.217

使用**es2019**，现在变得更加简单：

1.  我们可以使用`of`系统的
2.  不再需要用`Object.entries`

例子：

```
let someMap: Map<number, number> = new Map()
someMap.set(3, 7);
someMap.set(4, 12);
for (let [key, value] of someMap) {
    console.log(key, value)
} 
```

输出：

```
3 7
4 12 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-24T23:06:49.840

要获取密钥：

```
function GetDictionaryKeysAsArray(dict: {[key: string]: string;}): string[] {
  let result: string[] = [];
  Object.keys(dict).map((key) =>
    result.push(key),
  );
  return result;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-22T08:46:13.187

这是我的功能，我希望这有帮助

```
function recordToArray<TypeOfSchema>(
  data: Record<string, TypeOfSchema>
): Array<TypeOfSchema> {
  return Object.keys(data).map((key: string) => ({ id: key, ...data[key] }));
} 
```

# ruby-on-rails - main_app 命名空间在 Rspec 中未知，仅在单元套件测试中（批处理）

> ID：16174184
> 
> 赞同：0
> 
> 时间：2013-04-23T16:07:42.800
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我有一个辅助类 ApplicationHelper，它有一个方法 build_links()。我有另一个类，AppleClass，它指的是那个方法。

```
AppleClass 
  def foo
    ....
    build_links
  end
end

ApplicationHelperClass
   def build_links
     main_app.blah_path(1)
   end
end 
```

这里的复杂之处在于有一个引擎，所以我通常明确引用“main_app.blah_path”而不仅仅是“blah_path”。

针对 foo 的测试在其文件中以及在我运行所有帮助程序时自行通过。但是，当我将它包含在所有单元测试中时它失败了 - “rake spec:suite:unit”，以及我们的整个套件。所有 Apple 测试通过，所有 ApplicationHelper 测试通过。唯一失败的是当一种方法引用另一种方法时，在路由中，在引擎之外，在完整套件中。

```
`undefined local variable or method `main_app' for #  
<RSpec::Core::ExampleGroup::Nested_45::Nested_1:0x007fc134b30130>` 
```

我怀疑测试助手或某些配置没有足够早地加载引擎的路由，因此指向“main_app”的链接没有意义。如果我删除 main_app，测试会失败，直到它在主套件中运行。

有没有人有关于故障排除真正发生的事情的提示？另外，我可以在 test_helper 中以某种方式启动路由吗？

ruby-1.9.3-p385，导轨 3.2.13，rspec 2.13.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-03T16:43:13.170

我遇到了同样的问题，发现如果我将此方法添加到我的 Controller RSpec 测试用例的顶部，那么它可以完全解决问题。

```
def main_app
  Rails.application.class.routes.url_helpers
end 
```

我认为这个问题与[这个问题有关](https://stackoverflow.com/questions/13944991/undefined-local-variable-or-method-main-app-on-helper-test)

# android - Android onClickListener 不会为子视图触发

> ID：16174185
> 
> 赞同：3
> 
> 时间：2013-04-23T16:07:46.720
> 
> 标签：android, onclick, android-relativelayout, onclicklistener

我正在开发一个使用 onClickListeners 翻转图块的应用程序。我在一个RelativeLayout 中有整个东西。然后我有第二个 RelativeLayout 来包含我的所有图块，以便于清除和添加。我还在 xml 中预定义了各种其他按钮。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/boardlayout"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/board"
    tools:context=".MainActivity" >

    <RelativeLayout
        android:id="@+id/mainlayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    </RelativeLayout>

    <ImageView
        android:id="@+id/menuButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/skill2Button"
        android:layout_alignParentRight="true"
        android:src="@drawable/ic_menu" />

</RelativeLayout> 
```

在代码中，我添加了 Tiles，它们是带有我的自定义操作的 ImageView。我还向他们添加了 onClickListeners。网格变量是我上面显示的 mainlayout RelativeLayout。

```
private void createTiles(){
    //Create the tiles
    int j = 0;
    Tile t;
    for(int i = 0; i < 30; i++){

        int r = i/5;
        int c = j%5;
        t = new Tile(this, r, c);
        t.setOnClickListener(tileClicked);

        j++;
        if(j == 5)
            j=0;            

        grid.addView(t);
    }
} 
```

问题在于较旧的 Android 版本，这些图块似乎从未触发点击事件。我将 onClickListeners 添加到图块中，然后在 RelativeLayout 上添加一个只是为了测试，RelativeLayout 获取事件，但图块没有。

菜单 ImageView（显示在上面的 xml 中）也有一个 onClickListener，它会被触发。

在较新的 Android 版本中，这可以正常工作。这让我想知道旧版本是否存在从代码中添加的视图传递事件的问题。

有人可以告诉我我在旧版本中做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-05T13:00:55.243

尝试这个，

```
private void createTiles(){
    //Create the tiles
    int j = 0;
    Tile t[30];

    for(int i = 0; i < 30; i++){

        int r = i/5;
        int c = j%5;
        t = new Tile(this, r, c);
        t[i].setOnClickListener(this);

        j++;
        if(j == 5)
            j=0;            

        grid.addView(t);
    }
} 
```

您需要在您的课程中实现 OnClickListener。然后你必须重写 onClick 方法：

```
 @Override
    public void onClick(View v) {
        switch(v.getId()){

          case // switch the ids of your views by calling getId method on them           
        }
    } 
```

# c - 不能通过管道减少(1)

> ID：16174187
> 
> 赞同：1
> 
> 时间：2013-04-23T16:07:57.827
> 
> 标签：c, unix

我正在尝试编写一个应该用作“ printenv | sort | less ”的程序。但是，最后一个到 less 的管道不起作用。我可以通过管道传输到 cat 并获得预期的结果（显示环境变量），但是当我传输到 less 时，什么也没有显示。该程序运行较少，但没有任何反应。如果我选择更多，程序将输出直到窗口底部，然后什么都没有发生。我不在寻呼机中。

有任何想法吗？

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <sys/wait.h>
#include <unistd.h>
#include <sys/types.h>
#include <errno.h>

#define WRITE 1
#define READ 0

#define DEBUG 1

int p1[2], p2[2], p3[2];

void err(char* msg){
  perror(msg);
  exit(EXIT_FAILURE);
}

void closePipe(int pipeEnd[2]){

  if (close(pipeEnd[READ]) == -1)
    err("error when closing pipe, read");

  if (close(pipeEnd[WRITE]) == -1)
    err("error when closing pipe, write");
}

int main(int argc, char** argv, char** envp){

  int pid1, pid2, pid3;

  /*Creating pipes*/
  if (pipe(p1) == -1){
    err("pipe1");
  }
  if (pipe(p2) == -1){
    err("pipe2");
  }

  /*
  if (pipe(p3) == -1){
    err("pipe3");
  }
  */

  /*First fork*/
  pid1 = fork();
  if (pid1 == -1){
    err("fork1");
  }

  /**FIRST CHILD*************PRINTENV****************/
  else if (pid1 == 0){ 

    if (dup2(p1[WRITE],STDOUT_FILENO)== -1){
      err("dup2 miss");
    }

    closePipe(p2);
    closePipe(p1);

    if (execlp("printenv", "printenv", NULL) == -1){
      err("execlp printenv does not like you!");
    }
  }

  /**PARENT*******************************************/
  else {

    pid2 = fork();
    if (pid2 == -1){
      err("fork2");
    }

    /**SECOND*CHILD***********SORT*******************/
    else if (pid2 == 0){

      if (dup2(p1[READ],STDIN_FILENO) == -1){
    err( "dup2 p1 read" );
      }
      if (dup2(p2[WRITE], STDOUT_FILENO) == -1){
    err("dup2 p2 write");
      }

      closePipe(p2);
      closePipe(p1);

      if (execlp("sort", "sort", NULL) == -1){
    err("execlp sort does not like you!");
      }
     }

    /**PARENT*****************************************/
    else {

      pid3=fork();
      if (pid3 == -1){
    err("fork3");
      }
      /**THIRD CILD***************LESS****************/
      else if (pid3 == 0){

    if (dup2(p2[READ], STDIN_FILENO) == -1){
      err("err dup2 read");
    }

    closePipe(p2);
    closePipe(p1);

    char *args4exec[] = {"less", NULL};

    if (execvp(args4exec[0], args4exec) == -1){
      err("err in exelp pager");
    }
      }
    }
  }  
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T16:22:51.980

两件事情。首先，在父级中，您还需要关闭管道。其次，您的父进程应该等待`less`进程完成后再退出。尝试将此添加到您的代码中：

```
/* ... */

  closePipe(p1);
  closePipe(p2);
  waitpid(pid3, NULL, 0);

  return 0;
} 
```

第一个问题导致孩子永远无法正确接收 EOF，第二个问题将导致`less`由于父母离开而立即退出。

# xcode - i386、armv7和armv7s有什么区别？

> ID：16174189
> 
> 赞同：8
> 
> 时间：2013-04-23T16:08:01.870
> 
> 标签：xcode

我想知道 Xcode 中这些架构之间的区别，因为我需要知道我如何理解一个库可以为 iOS 模拟器以及 iPhone 5、iPhone 4s 和 iPhone 4 正确编译。或者只是其中一个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T16:30:52.817

*   **i386：**通常是 MacOSX（我不确定 Simulator 是否包含在此处）。
*   **arm6：**旧 iPhone。
*   **arm7：** iPhone4/4S。
*   **arm7s：** arm7 充分利用 iPhone 5 处理器的附加说明。

希望这可以帮助。编译库以支持所有平台有时是非常令人沮丧和乏味的任务。祝你好运！

# java - 如何从 Servlet 重定向到 JSP 文件

> ID：16174190
> 
> 赞同：2
> 
> 时间：2013-04-23T16:08:07.203
> 
> 标签：java, jsp, servlets

我是一个初学者，正在尝试了解如何从 Servlet 重定向到 JSP 文件。我的 Servlet 在接收到来自当前 JSP 文件的回复后“生成”一个结果，结果我想将它传递给不同的 JSP 文件。我知道有一行代码：

```
request.getRequestDispatcher("/upload.jsp").forward(request, response); 
```

但是我是否为此创建了一个单独的方法并在 doGET 中调用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T16:13:28.090

你可以做

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
      request.getRequestDispatcher("/upload.jsp").forward(request, response);
    } 
```

即使您`method`单独创建了一个，您也`request`需要`response`对`method`.

我强烈推荐官方文档：

[http://docs.oracle.com/javaee/6/tutorial/doc/bnafd.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnafd.html)

和[**画报**](http://www.javatpoint.com/requestdispatcher)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:37:44.420

如果您使用带有注释的 3.0 版，则重定向非常简单。

假设您有一个 User 类（字符串全名和带有 setter 和 getter 的 Username）和处理数据库操作的 UserDAO 类。假设这是您的控制器：

```
@RequestMapping(value = "/user_list")
public String users(HttpServletResponse response, HttpServletRequest request)
{
    //some function to verify access
    boolean authorized = client.getAccess(); 
    request.setAttribute("authorized", authorized);

    if (authorized)
    {
        List<User> users = UserDAO.geUsers();

        request.setAttribute("users", users);
        return "user_list";
    }
    else
    {
        return "access_denied";
    }
} 
```

然后您可以使用以下语法从任何位置重定向

```
@RequestMapping(value = "/create_user", method = RequestMethod.POST)
public String add_user(HttpServletResponse response, HttpServletRequest request)
{

    boolean authorized = client.getAccess();
    if (authorized)
    {
        User user = new User();

            user.setUserName(request.getParameter("username"));
            user.setFullName(request.getParameter("fullname"));

        if (UserDAO.saveUser(user))
        {
            return "redirect:/user_list";
        }
        else
        {
            return "error";
        }
    }
    else
    {
        return "access_denied";
    }
} 
```

redirect:/user_list 将返回更新的 user_list（例如，如果您插入到 db，您的更改将被反映）。

顺便说一句：如果您在 xml 中添加几行，则可以在控制器中删除 .jsp 和路径：

[http://www.mkyong.com/spring-mvc/spring-3-mvc-and-xml-example/](http://www.mkyong.com/spring-mvc/spring-3-mvc-and-xml-example/)

看看这些教程：

[http://www.javatpoint.com/spring-3-mvc-tutorial](http://www.javatpoint.com/spring-3-mvc-tutorial)

[http://www.javatpoint.com/servlet-tutorial](http://www.javatpoint.com/servlet-tutorial)

# java - 插入数据库

> ID：16174195
> 
> 赞同：1
> 
> 时间：2013-04-23T16:08:30.627
> 
> 标签：java, oracle, mybatis

我正在使用 mybatis 插入值：

`Dao.xml`

```
<insert id="someId" parameterType="someBean" >
    INSERT ALL
     <foreach collection="list" item="item" index="index" >
    INTO table_name
               (ID,NAME)        
    VALUES
    (#{item.id},#{item.name})
   </foreach>   
   SELECT * FROM DUAL
</insert> 
```

`Dao.java`

```
void someId(List<SomeBean> list); 
```

通过的列表大小为：350

但是在执行时会引发错误：

```
org.springframework.jdbc.UncategorizedSQLException: 
 Error updating database.  Cause: java.sql.SQLException: ORA-24335: cannot support more than 1000 columns 
```

这里使用的数据库是oracle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:20:16.050

我问“你的目标表真的只有两列吗？” 你说：

> 它有 20 列

我认为这是错误的根源。

INSERT ALL 语句受 Oracle 限制，即一条 SQL 语句只能有 1000 列。每条 INTO 行都有一个投影，所有这些列的总和不能超过 1000。

现在，您的 ibatis 命令将为列表中的每个条目生成一个 INTO 行。750 个条目 * 20 列轻松突破 1000 列限制。因此错误。

如何解决？

在 Oracle 中，我们可以使用 TABLE() 函数将嵌套表（列表）转换为如下数据源：

```
insert into table_name
select * from table (some_list) ; 
```

通常我希望这样的调用被包装在存储过程中。但无论哪种方式，列表都必须适合数据库中先前定义的 SQL 类型（对象）。

所以你可能不想走那条路，因为我猜你是专门使用 Ibatis 来避免与数据库对象争吵。但是，如果您决定采用这条路线，您可能会发现[本教程](http://mail-archives.apache.org/mod_mbox/ibatis-user-java/200802.mbox/%3C15532303.post@talk.nabble.com%3E)很有帮助。

否则，我担心您需要将列表中的条目数限制为 50 个。你可能认为这有点痛苦，但实际上 ibatis 并不是进行批量上传的正确工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:46:40.843

您正在使用多表插入，它并非旨在将记录插入到一​​个表中。请改用以下内容。

```
<insert id="someId" parameterType="someBean" >
    INSERT INTO table_name  (ID,NAME) VALUES
     <foreach collection="list" item="item" index="index" o >              
        ( #{item.id},#{item.name})
     </foreach>   
</insert> 
```

# javascript - 是否可以用 CSS 替换脚本中的文本？

> ID：16174197
> 
> 赞同：0
> 
> 时间：2013-04-23T16:08:34.150
> 
> 标签：javascript, css, select, replace

如果可能，我想使用 CSS 将“来自 tumblr”替换为“tumblr”。我害怕用 Notepad++ 编辑它，因为上次我弄坏了一些东西，现在我有创伤。

HTML类是：

```
<option value="has(span[title^=xtumblr_'])">from tumblr</option> 
```

它来自一个可选字段。

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:12:55.107

不幸的是，没有，CSS 没有能力区分单个单词（尽管有伪元素`::first-letter`和`::first-line`），并且很难用 CSS 可靠地设置`select`和 child`option`元素的样式。

使用 JavaScript 是可能的，但在任何文本编辑器中进行编辑（这次要*小心*），当然使用 Notepad++，也同样可靠（如果不是更可靠的话）。

# java - 加密不适用于从 openssl 为 AES-256 生成的密钥

> ID：16174198
> 
> 赞同：1
> 
> 时间：2013-04-23T16:08:34.760
> 
> 标签：java, encryption, openssl, aes, sha1

我使用 OpenSSL for AES-256 生成了一个密钥。下面是我正在执行的行：

```
openssl enc -aes-256 -cbc -k Secret_key -P -md sha1 > FILE_NAME.txt 
```

它正在生成一个 64 字节/字符的密钥。当我尝试使用此密钥加密数据时，出现错误：

> java.security.InvalidKeyException：无效的 AES 密钥长度：64 字节

我不确定如何使用生成的密钥以及生成的密钥是否正确。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:19:14.097

AES-256 的密钥长度应为 32 字节。很可能它在输出时是十六进制编码的。

# ajax - Yii ClientSide Validation on Render Partial not working

> ID：16174200
> 
> 赞同：5
> 
> 时间：2013-04-23T16:08:38.890
> 
> 标签：ajax, yii, renderpartial

我有一个 Yii 表单，它调用另一个模型（团队 has_many team_members）的渲染部分。我想通过 ajax 调用部分视图以在 team/_form 中添加成员。除了 ajax 验证（服务器和客户端）之外的所有工作（调用、显示、保存）。如果我提交表单，则成员的模型没有验证，即使在客户端，它也没有验证必填字段。

有什么线索吗？

//_形式

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'team-form',
        'enableAjaxValidation'=>true,
        'enableClientValidation'=>true,
        'clientOptions'=>array(
            'validateOnSubmit'=>true,
            'validateOnChange'=>true

        ),
        'htmlOptions' => array('enctype' => 'multipart/form-data'),
)); ?> 
```

//控制器

```
public function actionMember($index)
{
    $model = new TeamMember();
        $this->renderPartial('_member',array(
            'model'=> $model, 'index'=> $index
        )
                ,false,true
                ); 
}  

public function actionCreate()
{
        $model=new Team;
        $members = array();
        if(isset($_POST['Team']))
        {
                $model->attributes=$_POST['Team'];

                if(!empty($_POST['TeamMember'])){
                foreach($_POST['TeamMember'] as $team_member)
                            {
                                $mem = new TeamMember();
                                $mem->setAttribute($team_member);
                                if($mem->validate(array('name'))) $members[]=$mem;
                            }
                }
                        $this->redirect(array('team/create','id'=>$model->id,'#'=>'submit-message'));

        }

        $members[]=new TeamMember;
        $this->performAjaxMemberValidation($members);
        $this->render('create',array(
                'model'=>$model,'members'=>$members
        ));

} 
```

//_成员

```
<div class="row-member<?php echo $index; ?>">
    <h3>Member <?php echo $index+1; ?></h3>
    <div class="row">
    <?php echo CHtml::activeLabel($model, "[$index]name",array('class'=>'member')); ?>
    <?php echo CHtml::activeTextField($model, "[$index]name",array('class'=>'member')); ?>
    <?php echo CHtml::error($model, "[$index]name");?>    
    </div>
</div> 
```

`ProcessOutput`设置为真。没有骰子。切换`renderPartial()`到`render()`。没有骰子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T00:23:40.657

如果您将查看[CActiveForm::run](https://github.com/yiisoft/yii/blob/1b165448af1716c228acb5b89474890acf0a3ead/framework/web/widgets/CActiveForm.php#L369)：

```
$cs->registerCoreScript('yiiactiveform');
//...
$cs->registerScript(__CLASS__.'#'.$id,"jQuery('#$id').yiiactiveform($options);"); 
```

然后你就会明白你的验证不起作用，因为你渲染的是部分而不是整个页面。这些脚本显示在页面底部。所以你应该通过执行这些脚本来解决这个问题。

部分渲染后，尝试获取应该存储在`scipts`数组中的 activeform 脚本：

```
$this->renderPartial('_member',array('model'=> $model, 'index'=> $index));
$script = Yii::app()->clientScript->scripts[CClientScript::POS_READY]['CActiveForm#team-form']; 
```

之后，将其与呈现的 html 一起发送到页面：

```
echo "<script type='text/javascript'>$script</script>" 
```

还要记住，在您将收到的 html 添加到您应该包含的页面上之前`jquery.yiiactiveform.js`，如果您还没有这样做（通过呈现另一个表单，或者`registerCoreScript('yiiactiveform')`），则在调用 ajax 请求的页面上。否则会引发 javascript 错误。

希望这会有所帮助。

**编辑：** 对不起，我不明白你是呈现形式的一部分而不是整体。但是您的验证不会完全适用于相同的问题。因为`jQuery('#$id').yiiactiveform($options);`没有为该字段创建脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T08:26:15.823

实际问题是 ActiveForm 将其属性保存在“设置”数据属性中进行验证。我看到您已经在使用索引，因此您需要将新元素添加到此设置对象以使验证正常工作。在ajax响应之后，这是必须做的：

```
//Get the settings object from the form
var settings = $("#form").data('settings');
//Get all the newly inserted elements via jquery
$("[name^='YourModel']", data).each(function(k, v) {
    //base attribute skeleton
    var base = {
        model : 'YourModel',
        enableAjaxValidation : true,
        errorCssClass : 'error',
        status : 1,
        hideErrorMessage : false,
    };

    var newRow = $.extend({
        id : $(v).attr('id'),
        inputID : $(v).attr('id'),
        errorID : $(v).attr('id') + '_em_',
        name : $(v).attr('name'),
     }, base);
     //push it to the settings.attribute object
     settings.attributes.push(newRow);
 });
 //update the form
 $("#form").data('settings', settings); 
```

```

这样，ActiveForm 将知道新字段并验证它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:35:31.643

好吧，在这种情况下，设置`processOutput`为 true `renderPartial`（为了使客户端验证适用于新添加的字段）将无济于事，因为它仅适用于`CActiveForm`表单并且您的视图中没有任何表单`_member`（仅输入字段）。

处理此类问题的一种**简单方法是****仅使用 ajax 验证**，并[`CActiveForm::validateTabular()`](http://www.yiiframework.com/doc/api/1.1/CActiveForm#validateTabular-detail)在您的控制器中使用来验证您的团队成员。

# jquery - 验证名字和姓氏

> ID：16174201
> 
> 赞同：-1
> 
> 时间：2013-04-23T16:08:40.800
> 
> 标签：jquery, regex

我想检查变量的值是否不是所有文本，例如，如果变量不等于文本，则显示错误消息：

```
if   ( ($(regname).match(/[^a-z ]/gi)) ) {
                $('p.validfirstname').fadeIn(300);
} 
```

我不知道该怎么做，所以上面的代码可能是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:21:51.973

它会是这样的：

```
var matches = $(regname).val().match(/[^a-zA-Z]/g);

if(matches && matches.length > 0) {
// valid first name
} 
```

这是假设 regname 是输入字段的 CSS 选择器。如果它不是输入元素，请使用`.text()`而不是`.val()`. 如果您从中获取值的不是 HTML 元素，则直接`.match()`调用`regname`。

如果您将名字和姓氏都存储为单个字符串，`split()`那么在检查非字母字符之前可能会更好。

```
function checkNames()
{
    var firstAndLast = $(regname).val().split(' ');
    var first = firstAndLast[0];
    var last = firstAndLast[1];

    if(checkName(first))
    {
  // valid first name
    }
    if(checkName(last))
    {
      // valid last name
    }
}

function checkName(name)
{
    var matches = $(regname).val().match(/[^a-zA-Z]/g);
    if(matches && matches.length > 0)
    {
        return true;
    } else return false;
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:36:12.407

尝试这个

```
/^[A-Za-z]*$/.test(string); 
```

如果您的字符串包含所有字母，则为 true，否则为 false。

# asp.net-mvc - NetworkError：SignalR 集线器上的 500 内部服务器错误

> ID：16174206
> 
> 赞同：1
> 
> 时间：2013-04-23T16:09:03.103
> 
> 标签：asp.net-mvc, signalr, signalr-hub

当我在本地计算机上运行该网站时，它可以正常工作，但是当我上传到我的域时，它开始生成此错误。我在不同服务器上的两个应用程序上遇到了同样的问题。同样只是实现解决方案，什么是 ASP.Net MVC 3，C#。我的两个应用程序都在 IIS 服务器上的“完全信任”保护下运行。在本地它工作正常，但问题出在远程服务器上。

应用程序运行良好，但返回错误 :( 这是 Mozilla firebug/network 的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/vGZnT.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T16:25:52.573

我做到了！！！我希望它可以帮助其他人...

只需将此行添加到web.config 的*system.web*部分：

```
<httpRuntime targetFramework="4.5" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T23:02:28.013

我在启用 SignalR 1.x 的 Web 应用程序中遇到了同样的错误（500 内部服务器错误），并在这里尝试了几个建议，但没有任何乐趣。在我能够将 500 错误**解决为 500.19 错误之前，我真的一无所获（配置错误：无法添加类型为“添加”的重复集合条目，其组合键属性“用户、角色、动词”分别设置为“*”， , ')。

对我来说，它最终成为一个重复的位置部分，对 IIS7 工作正常（针对 IIS7 部署的同一个应用程序正在工作），但在运行 IIS8 的新服务器上似乎不正确：

在我的 web.config 中，我定义了这个：

```
 <location path="signalr/hubs"> 
    <system.web> 
        <authorization> 
            <allow users="*"/> 
        </authorization> 
    </system.web> 
    <system.webServer> 
        <security> 
            <authorization> 
                <add accessType="Allow" users="*"/> 
            </authorization> 
        </security> 
    </system.webServer> 
 </location> 
```

我把它改成

```
 <location path="signalr/hubs"> 
    <system.web> 
        <authorization> 
            <allow users="*"/> 
        </authorization> 
    </system.web> 
    <system.webServer> 
        <security> 
            <authorization> 
                <!--add accessType="Allow" users="*"/--> 
            </authorization> 
        </security> 
    </system.webServer> 
 </location> 
```

集线器开始返回 200 OK。

** 99% 的问题是将 500 错误解决为特定问题。帮助我的是使用 Firefox 控制台，在网络选项卡中重新创建错误，突出显示集线器上的 500 错误，然后使用响应和预览选项卡获取详细信息。这些信息让我看到了上面的 web.config 设置，它直接指向了 web.config 中的违规行！也许别人可以在我的痛苦中找到快乐。

# c# - 如何从 C# 代码运行 VBS 脚本

> ID：16174207
> 
> 赞同：1
> 
> 时间：2013-04-23T16:09:05.163
> 
> 标签：c#

我要做的就是能够从后面的代码运行 VBS 脚本，但我收到此错误：“系统找不到指定的文件”。我知道路径名，我只需要执行那个 .vbs 脚本，但这给我带来了困难，我无法弄清楚。请帮忙。谢谢这是我的代码

```
System.Diagnostics.Process.Start(@"cscript  //B //Nologo \\loc1\test\myfolder\test1.vbs"); 
```

我已经更新了如下所示的代码，但我收到了一个安全警告，询问我是否要打开它。有没有办法不得到那种警告而只运行脚本而不发出任何警告？这是更新的代码：

```
 Process proc = null;
        try
        {
            string targetDir = string.Format(@"\\loc1\test\myfolder");//this is where mybatch.bat lies
            proc = new Process();
            proc.StartInfo.WorkingDirectory = targetDir;
            proc.StartInfo.FileName = "test1.vbs";
            proc.StartInfo.Arguments = string.Format("10");//this is argument
            proc.StartInfo.CreateNoWindow = false;
            proc.Start();
            proc.WaitForExit();
        }
        catch (Exception ex)
        {
           // Console.WriteLine("Exception Occurred :{0},{1}", ex.Message, ex.StackTrace.ToString());
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:11:39.663

参数必须单独包含。您可以使用一个参数字段将参数传递给进程。

您可以将其用作[使用命令行从应用程序执行程序](https://stackoverflow.com/questions/361097/c-sharp-service-cannot-execute-batch-file/361121)的指南。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T16:27:00.110

您的代码对我来说工作正常，**我认为错误出在您的 File Path**中，

更好地*确认您提供的文件路径是否有效*..

您也可以像下面一样运行该文件..

```
Process scriptProc = new Process();
scriptProc.StartInfo.FileName = @"cscript"; 
scriptProc.StartInfo.Arguments ="//B //Nologo \\loc1\test\myfolder\test1.vbs";
scriptProc.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
scriptProc.Start();
scriptProc.WaitForExit();
scriptProc.Close(); 
```

但是*请检查您给出的文件路径*..

# opencv - OpenCV 3d 重建：编译错误模糊调用重载函数

> ID：16174210
> 
> 赞同：0
> 
> 时间：2013-04-23T16:09:11.277
> 
> 标签：opencv, 3d

我正在尝试使用 OpenCV 为 3d 重建编译示例代码，但出现以下错误 (1)

您可以在此处找到源代码：[https ://sites.google.com/site/3drecon124/](https://sites.google.com/site/3drecon124/)

错误列表

(1) 错误 C2668: 'sqrt' : 对重载函数的模糊调用

(2) IntelliSense：多个重载函数“sqrt”实例匹配参数列表

(3) IntelliSense：函数调用中的参数太少

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:00:00.407

我的建议是编译器不能选择合适的重载`sqrt`函数。

请尝试明确指定操作数的类型：

```
sqrt(double(T_pts[i].x*T_pts[i].x + T_pts[i].y*T_pts[i].y));
...
float scale=sqrt(2.0)/meandist.val[0]; 
```

代替：

```
dist[i]=sqrt(T_pts[i].x*T_pts[i].x+T_pts[i].y*T_pts[i].y); // It won't hurt to specify operand type

float scale=sqrt(2)/meandist.val[0]; // here '2' has int type 
```

# java - OneToOne 外键保存问题

> ID：16174213
> 
> 赞同：2
> 
> 时间：2013-04-23T16:09:19.600
> 
> 标签：java, hibernate, jpa

```
 @Entity
    @Table(name = "applicant")
    public class Applicant implements Serializable {

        private static final long serialVersionUID = -8634638904962909584L;

        // Primary id required by Hibernate
        @Id
        @GeneratedValue(strategy=IDENTITY)
        @Column(name = "applicant_id", nullable=false, unique=true)
            private Long applicantId; // Unique id for each applicant

        @OneToOne(cascade = CascadeType.ALL)
        @Fetch(value = FetchMode.SELECT)
        @JoinColumn(name = "applicant_id", referencedColumnName= "applicant_id")
        private DS1350 ds1350;

        public Applicant () {

        }

    }

    @Entity
    @Table(name = "ds_1350")

    public class DS1350 implements Serializable {
        private static final long serialVersionUID = -7370747595057569296L;

        // Primary id required by Hibernate
        @Id
        @GeneratedValue(strategy=IDENTITY)
        @Column(name = "ds_1350_id", nullable=false, unique=true)
        private Long ds1350Id;

        @Column(name = "applicant_id", unique=true, nullable=false)
    //    @GeneratedValue(generator="gen")
    //  @GenericGenerator(name = "gen", strategy = "foreign", parameters = @Parameter(name = "property", value = "applicant"))
        private Long applicantId; // Unique id for each applicant

        @Column(name = "ds1350_no", length = 50)
        private String ds1350Number;

    }

   public class ApplicantDaoTest {
        @Autowired
        private ApplicantDao applicantDao;

        private Applicant applicant;
        private DS1350 ds1350 = new DS1350();

        @BeforeClass
        public static void beforeClass() {
        }

        @AfterClass
        public static void afterClass() {
        }

        @Before
        public void setup() {
            this.initApplicant();
        }

        @After
        public void teardown() {
        }

        private void initApplicant() {
            applicant = new Applicant();

            applicant.setFirstName("John");

            Calendar calendar = Calendar.getInstance();
            applicant.setDob(calendar);

            applicant.setSsn("123456789");
            applicant.setCreatedBy("JUNIT");
            applicant.setCreatedDate(Calendar.getInstance());
            applicant.setModifiedBy("JUnit");
            applicant.setModifiedDate(Calendar.getInstance());

            this.initDS1350();

        }

        private void initDS1350 () {        
            ds1350.setDs1350Number("ds1350Number");
            ds1350.setCreatedBy("JUNIT");
            ds1350.setCreatedDate(Calendar.getInstance());  

            applicant.setDs1350(ds1350);
        }

        @Test
        public void testSaveApplicant() {
            Long applicantId = applicantDao.saveApplicant(applicant);
            applicant = applicantDao.getApplicantByPrimaryKey(applicantId);
            assertTrue("ds1350Number".equals(applicant.getDs1350().getDs1350Number()));
        }
    } 
```

这是 ds1350 和申请类别的代码。我使用休眠会话 save() 来保存申请人对象中包含 ds1350 的申请人。我有 OneToMany 非常好，但这个 OneToOne 不起作用。由于外键（ds1350 中的 applicant_id）被保存为 null 并且 applicationDao.getApplicantByPrimaryKey(applicantId) 无法获取 ds1350 对象，因此申请者.getDs1350() 抛出 NullPointerException。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:26:49.180

摆脱“@Fetch(value = FetchMode.SELECT)”。你告诉它在你的 OneToOne 注释中急切地获取，然后告诉它用 @Fetch 注释懒惰地获取。

此外，请确保 ds1350 字段上的连接列引用了正确的 FK 字段（如果申请人中的字段不称为 id）。

```
@OneToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
@JoinColumn(name = "applicant_id", referencedColumnName= "applicant_id")
private DS1350 ds1350; 
```

我起初错过的另一点是您正在使用

```
 @GeneratedValue(strategy=IDENTITY) 
```

引用[文档](http://docs.oracle.com/javaee/6/api/javax/persistence/GenerationType.html#IDENTITY)：“表示持久性提供程序必须使用数据库标识列为实体分配主键。”

如果您在创建链接时没有手动分配想法，则不会保留该 ID。使用 @GeneratedValue(strategy=AUTO) 将告诉数据库它需要为您的子类 (DS1350) 生成 ID。这是一个修复，但可能不是你想要的。

此外，根据您的更新，您在连接列中引用了错误的外键，并且从您的 ds1350 到您的申请人的关联看起来很可疑，请尝试以下操作：

```
 //in applicant
    @OneToOne(cascade = CascadeType.ALL)
    @Fetch(value = FetchMode.SELECT)
    @JoinColumn(name = "ds1350_id", referencedColumnName= "applicant_id")
    private DS1350 ds1350;

   //in ds1350
   @OneToOne(mappedBy="applicant", cascade=CascadeType.ALL)
   private Applicant applicant; // Unique id for each applicant 
```

我没有测试过。

# c# - 在excel中模拟测试单元格的合并

> ID：16174221
> 
> 赞同：0
> 
> 时间：2013-04-23T16:09:52.827
> 
> 标签：c#, excel, moq

我有使用 excel 工作表的课程。如何编写测试来证明 Merge 方法被调用。

```
/// <summary>
        /// Merges the cells together.
        /// </summary>
        /// <param name="ws">The worksheet.</param>
        /// <param name="cellsToMerge">The cells to merge.</param>
        /// <exception cref="System.ArgumentNullException">ws;Worksheet has to be defined</exception>
        /// <exception cref="System.ArgumentException">Cells cannot contain null or empty string;cellsToMerge</exception>
        public void MergeCellsTogether(Worksheet ws, string cellsToMerge)
        {
            if(ws==null) throw new ArgumentNullException("ws","Worksheet has to be defined");
            if(string.IsNullOrEmpty(cellsToMerge))throw new ArgumentException("Cells cannot contain null or empty string", "cellsToMerge");

            var cells = ws.Cells[cellsToMerge]; // failing to setup
            ws.Range[cells].Merge();
        } 
```

现在我的测试是使用最小起订量

```
[TestMethod]
        public void TestForMergingCellsTogether()
        {
            // assign
            var cellsToMerge = "A1:C3";

            // mock
            var ws = new Mock<Worksheet>();
            var range = new Mock<Range>();
            ws.Setup(x => x.get_Range(It.IsAny<object>(), It.IsAny<object>())).Returns(range.Object);

// this is part that is giving my headake           
ws.Setup(x => x.Cells[It.IsAny<object>(),It.IsAny<object>()]).Returns(range.Object);

            range.Setup(x => x.Merge(It.IsAny<object>()));
            // act 
            var ps = new RenderProcess("fileName");
            ps.MergeCellsTogether(ws.Object, cellsToMerge);

            // assert
            range.VerifyAll();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:33:10.360

我找到了我的问题的解决方案。我的方法不正确。

我更新（简化）的代码

```
/// <summary>
        /// Merges the cells together.
        /// </summary>
        /// <param name="worksheet">The worksheet.</param>
        /// <param name="cellsToMerge">The cells to merge.</param>
        /// <exception cref="System.ArgumentNullException">ws;Worksheet has to be defined</exception>
        /// <exception cref="System.ArgumentException">Cells cannot contain null or empty string;cellsToMerge</exception>
        public void MergeCellsTogether(Worksheet worksheet, string cellsToMerge)
        {
            if(worksheet==null) throw new ArgumentNullException("worksheet","Worksheet has to be defined");
            if(string.IsNullOrEmpty(cellsToMerge))throw new ArgumentException("Cells cannot contain null or empty string", "cellsToMerge");

            worksheet.Range[cellsToMerge].Merge();
        } 
```

我的测试方法：

```
 // assign
                var cellsToMerge = "A1:C3";

                // mock
                var ws = new Mock<Worksheet>();
                var range = new Mock<Range>();
                ws.Setup(x => x.get_Range(It.IsAny<object>(), It.IsAny<object>())).Returns(range.Object);

                range.Setup(x => x.Merge(It.IsAny<object>()));
                // act 
                var process = new RenderExcel();
                process.CreateExcelWorkSheet("fileName");
                process.MergeCellsTogether((Worksheet)ws.Object, cellsToMerge);

                // assert
                range.VerifyAll(); 
```

# multithreading - 在多实例和多线程环境中生成 UID

> ID：16174224
> 
> 赞同：0
> 
> 时间：2013-04-23T16:10:03.327
> 
> 标签：multithreading, azure, guid, high-availability

我正在尝试为 Windows Azure 中的内容和用户生成唯一 ID。我在一个具有 3 个实例的 Web 角色服务中（IIS 处理程序当然是多线程的）。

如何生成仅由数字组成且可存储在 10 位或更少位的唯一标识符？这些数字有一定程度的随机性会很好。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:09:37.557

你可以试试[SnowMaker](http://blog.tatham.oddie.com.au/2011/07/14/released-snowmaker-a-unique-id-generator-for-azure-or-any-other-cloud-hosting-environment/)。我自己没有使用过它，但它似乎是一种合理的方法。请注意，它会在 ID 中产生间隙并“浪费”一些 ID。使用 10 位数字，您将拥有大约 100 亿个可能的 ID，因此这对您来说可能是也可能不是问题。

# html - CSS 伪元素 :before & :after 在 Internet Explorer 中的工作方式不同

> ID：16174233
> 
> 赞同：6
> 
> 时间：2013-04-23T16:10:40.383
> 
> 标签：html, css, internet-explorer, pseudo-element

我有一个非常具体的问题，因为我正在尝试使用没有图像或 JavaScript 的纯 CSS 创建具有角度的导航。我已经弄清楚它可以完美运行，但我遇到的问题是 IE 9 和 Chrome 看起来不同。我可以通过更改伪元素的边距来让两者都工作，但我更喜欢一个解决方案来同时工作。如果有人能弄清楚为什么边距不同，并给我一个单一的 CSS 解决方案，可以在两种浏览器中工作，那就太好了。否则我将不得不为 IE 添加一个单独的类并强制它使用单独的 CSS 条目工作。

这是与[箭头导航一起使用的jsfiddle](http://jsfiddle.net/rrg3/jSdWR/)

这是HTML

```
<ul>
    <li><a href="#" >Some Navigation</a></li>
    <li><a href="#">More navigation</a></li>
    <li><a href="#">Another Nav</a></li>
    <li><a href="#">Test Nav</a></li>
    <li><a href="#">A Test Navigation</a></li>
</ul> 
```

CSS

```
ul {
    float:right;
    list-style-type:none;
    margin:0;
    padding:0;
    width: 300px;
}
ul li a {
    float:left;
    width:300px;
}
ul li{
    float:left;
    width: 300px;
    height:50px;
    line-height:50px;
    text-indent:10%;
    background: grey;
    margin-bottom:10px;
    border:1px solid black;
}
ul li:before {
    content:"";
    position:absolute;
    margin-top:-1px;
    border-top: 26px solid transparent;
    border-bottom: 26px solid transparent;
    border-right: 21px solid black;
    margin-left:-22px;
}
ul li:after {
    content:"";
    position:absolute;
    border-top: 25px solid transparent;
    border-bottom: 25px solid transparent;
    border-right: 20px solid grey;
    margin-left:-320px;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T16:25:52.460

您可以通过在伪元素上使用绝对定位来解决此问题。为了使其正常工作，请将位置设置`ul li`为相对（这将导致绝对定位在其中的元素相对于 li）。然后，更新要使用的伪元素的位置，`left`而不是`margin-left`：

```
ul li{
    position: relative; // Add this.
    float:left;
    width: 300px;
    height:50px;
    line-height:50px;
    text-indent:10%;
    background: grey;
    margin-bottom:10px;
    border:1px solid black;
}
ul li:before {
    content:"";
    position:absolute;
    margin-top:-1px;
    border-top: 26px solid transparent;
    border-bottom: 26px solid transparent;
    border-right: 21px solid black;
    left:-22px; // Update from margin-left to left
}
ul li:after {
    content:"";
    position:absolute;
    border-top: 25px solid transparent;
    border-bottom: 25px solid transparent;
    border-right: 20px solid grey;
    left:-20px; // Update from margin-left to left
} 
```

[http://jsfiddle.net/ryanbrill/jSdWR/5/](http://jsfiddle.net/ryanbrill/jSdWR/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:24:18.187

您需要指定元素的位置（例如`top`和`left`值）。出于某种原因，我不完全理解 - 添加`position: relative`到`li`（不是`ul`）：

[http://jsfiddle.net/jSdWR/4/](http://jsfiddle.net/jSdWR/4/)

# php - PHP 似乎返回不正确的工作日

> ID：16174234
> 
> 赞同：0
> 
> 时间：2013-04-23T16:10:52.660
> 
> 标签：php, date, datetime

首先，这是我的代码：

```
<?php
$year = 1006;
while ($year <= 1996)
{
    $date = '1/26/' . $year;
    if (date('l', strtotime($date)) == 'Monday')
    {
        echo $date . PHP_EOL;
    }

    $year += 10;
}
?> 
```

这应该输出 1000 到 1999 年之间的 1 月 26 日，其中年份以 6 结束，日期在星期一。这是输出：

```
1/26/1006
1/26/1096
1/26/1136
1/26/1186
1/26/1226
1/26/1316
1/26/1366
1/26/1406
1/26/1496
1/26/1536
1/26/1586
1/26/1626
1/26/1756
1/26/1846
1/26/1976 
```

一切似乎都很好。然而，当我在 timeanddate.com 上查看这些年中的几年时，工作日似乎没有任何共同点：

[1006](http://www.timeanddate.com/calendar/?year=1006&country=1)年 1 月 26 日是星期六

[1/26/1406](http://www.timeanddate.com/calendar/?year=1406&country=1)是星期二

[1/26/1756](http://www.timeanddate.com/calendar/?year=1756&country=1)确实是星期一

这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:19:04.790

`strtotime()`将日期的字符串表示形式转换为 unix 时间戳 - 自 1970 年 1 月 1 日以来的秒数。您可能会在这里开始看到问题...

时间戳通常存储在 32 位整数中，其范围在 1970 到 2038 之间。尝试为超出该范围的日期生成时间戳会给您带来不确定的行为。

- 编辑 -

从 php 手册：

> 时间戳的有效范围通常是从 1901 年 12 月 13 日星期五 20:45:54 GMT 到 2038 年 1 月 19 日星期二 03:14:07 GMT。（这些日期对应于 32 位有符号整数的最小值和最大值）。但是，在 PHP 5.1.0 之前，此范围在某些系统（例如 Windows）上被限制为 01-01-1970 到 19-01-2038。

# php - 如何为 phpunit 编写测试用例，其中被测试的代码使用可选模块并且并不总是可用

> ID：16174235
> 
> 赞同：0
> 
> 时间：2013-04-23T16:10:59.307
> 
> 标签：php, unit-testing, phpunit

我刚刚开始编写测试用例，不确定如何处理某些测试。我正在测试的类，用非常基本的术语来说，是各种操作码缓存的包装器。测试将被捆绑到软件中，这些软件将被下载并在许多不同的主机上使用，因此我对如何处理这些类的测试感到困惑，原因有两个。

以这个 apc 包装器为例

```
class Storage_Container_Apc extends Storage_Container implements Storage_iContainer
{    
    protected $_id_prefix = '';   
    protected $_file_prefix = '';   

    function __construct($id_prefix='', $file_prefix='', $options=array())
    {               
        $this->_id_prefix = $id_prefix; 
        $this->_file_prefix = $file_prefix; 
    } 

    /**
     * @see Storage_iContainer::available
     */
    public static function available()
    { 
        return extension_loaded('apc') && ini_get('apc.enabled');
    } 
} 
```

还有这个基本的测试用例。

```
class StorageContainerApcTest extends \PHPUnit_Framework_TestCase
{
    public function testAvailability()
    {
        $this->assertTrue(Storage_Container_Apc::available());
    }
} 
```

在没有 APC 的系统上，这个测试显然会失败，但它当然不是真正的失败，因为该类是模块相关的，如果它在系统上不可用，则不会使用它。因此，对于这一点，测试实际上应该是什么，以便它返回 ok。会是这样吗？

```
class StorageContainerApcTest extends \PHPUnit_Framework_TestCase
{
    public function testAvailability()
    {
        if(extension_loaded('apc') && ini_get('apc.enabled'))
        {
            $this->assertTrue(Storage_Container_Apc::available());
        }
        else
        {
            $this->assertFalse(Storage_Container_Apc::available());
        }
    }
} 
```

我的最后一个问题涉及如何通过测试来测试这些操作码包装器。因为不可能在任何给定时间运行多个操作码？

非常感谢您的任何指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:06:55.843

我意识到我应该使用

```
protected function setUp() {
    if (!(extension_loaded('apc') && ini_get('apc.enabled'))) {
        $this->markTestSkipped('The APC extension is not available.');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T22:59:38.317

你也可以使用

```
@codeCoverageIgnore 
```

例如：

```
/**
 * @see Storage_iContainer::available
 * @codeCoverageIgnore
 */
public static function available()
{ 
    return extension_loaded('apc') && ini_get('apc.enabled');
} 
```

请参阅[代码覆盖率分析](https://phpunit.de/manual/current/en/code-coverage-analysis.html)

# javascript - AngularJS：显示加载 HTML，直到加载数据

> ID：16174238
> 
> 赞同：22
> 
> 时间：2013-04-23T16:11:16.840
> 
> 标签：javascript, angularjs, angularjs-ng-repeat

在数据加载完成之前，如何让 AngularJS 显示加载微调器？

如果我的控制器已`$scope.items = [{name: "One"}]`静态设置，并且填充了 AJAX 加载器`$scope.items[0]['lateLoader'] = "Hello"`，我希望微调器显示直到 AJAX 加载完成，然后使用检索到的数据填充绑定范围。

```
<ul ng-repeat="item in items">
  <li>
    <p>Always present: {{item.name}}</p>
    <p>Loads later: <span ng-bind="item.lateLoader"><i class="icon icon-refresh icon-spin"></i></span></p>
  </li>
</ul> 
```

此代码立即填充绑定跨度，并且作为`item.lateLoader`空的微调器被替换为空。

我应该如何干净地做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-23T16:47:00.993

我会根据其他答案创建一个自定义指令，但这里是在没有指令的情况下如何做到这一点，这可能是在进入更复杂的功能之前学习的好主意。有几点需要注意：

1.  使用 setTimeout 模拟 ajax 调用
2.  加载图标已预加载，并在数据加载时隐藏。只是一个简单的 ng-hide 指令。
3.  在我的示例中没有加载图像，只是一些隐藏的文本（显然您的 html 将具有正确的 css 引用）。

演示： [http ://plnkr.co/edit/4XZJqnIpie0ucMNN6egy?p=preview](http://plnkr.co/edit/4XZJqnIpie0ucMNN6egy?p=preview)

看法：

```
<ul >
  <li ng-repeat="item in items">
    <p>Always present: {{item.name}}</p>
    <p>Loads later: {{item.lateLoader}} <i ng-hide="item.lateLoader"  class="icon icon-refresh icon-spin">loading image i don't have</i></p>
  </li>
</ul> 
```

控制器：

```
app.controller('MainCtrl', function($scope) {
  $scope.name = 'World';
  $scope.items = [{name: "One"}];
  setTimeout(function() {
    $scope.$apply(function() {
     $scope.items[0].lateLoader = 'i just loaded';  
    });
  }, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-02-13T17:27:23.963

实际上，我已经为此使用了一段时间的解决方案，该解决方案效果很好，并且在我看来比使用超时更好。我正在使用 $resource，但您可以使用 $http 做同样的事情。在我的 $resource 对象上，我在以下代码中添加了将加载设置为 true 的位。

```
$scope.customer = $resource(dataUrl + "/Course/Social/" + courseName)
    .get({}, function (data) { data.loaded = true; }); 
```

然后，在我看来，我可以使用：

```
ng-hide="customer.loaded" 
```

当然，我不会直接在控制器中使用 $resource，而是将其提取到 customerRepository 服务中，但在这里以这种方式显示更简单。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T16:29:51.520

我会创建自定义指令并使用微调器放置默认标记。

以下是自定义指令的一些链接

1) Egghead 视频很棒！[http://www.egghead.io/video/xoIHkM4KpHM](http://www.egghead.io/video/xoIHkM4KpHM)

2) 关于指令的官方 Angular 文档[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

3）在 60 分钟内很好地概述了角度[http://weblogs.asp.net/dwahlin/archive/2013/04/12/video-tutorial-angularjs-fundamentals-in-60-ish-minutes.aspx](http://weblogs.asp.net/dwahlin/archive/2013/04/12/video-tutorial-angularjs-fundamentals-in-60-ish-minutes.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T17:43:28.047

@lucuma，

很好的答案，另一种方法是注入 $timeout 并替换本机超时功能：

```
var app = angular.module('plunker', []);

app.controller('MainCtrl', function($scope, $timeout) {

        $scope.name = 'World';
        $scope.items = [{name: "One"}];
        $timeout(function() {
                $scope.$apply(function() {
                        $scope.items[0].lateLoader = 'i just loaded';  
                });
        }, 1000);
}); 
```

# c++ - 使用迭代器附加一个 std::vector 和它自己的元素

> ID：16174239
> 
> 赞同：6
> 
> 时间：2013-04-23T16:11:18.073
> 
> 标签：c++, iterator, stdvector

以下代码按预期工作（测试通过），但我想知道以这种方式使用迭代器在 c++ 中是否被认为是一种不好的做法，或者是否可以。

也许这是特定于`std::vector`其他集合的行为不同并且集合（甚至它们的实现）之间的最佳实践不同？

这在其他语言中肯定是不行的，而且大多数时候更改集合会使迭代器无效并抛出异常。

```
BOOST_AUTO_TEST_CASE (ReverseIteratorExample) {
    std::vector<int> myvector;
    for(int i = 0; i < 5; i++)
    {
        myvector.push_back(i);
    }

    // is this generally a bad idea to change the vector while iterating?
    // is it okay in this specific case?
    myvector.reserve(myvector.size() + myvector.size() - 2 );
    myvector.insert(myvector.end(), myvector.rbegin() + 1, myvector.rend() -1);

    int resultset [8] = { 0,1,2,3,4,3,2,1 };
    std::vector<int> resultVector( resultset, resultset + sizeof(resultset)/sizeof(resultset[0]) );
    BOOST_CHECK_EQUAL_COLLECTIONS(myvector.begin(), myvector.end(), resultVector.begin(), resultVector.end());
} 
```

总结问题：

1.  在迭代时更改向量通常是一个坏主意吗？
2.  在这种特定情况下可以吗？
3.  这是特定于`std::vector`和其他集合的行为不同吗？
4.  集合（甚至它们的实现）之间的最佳实践是否有所不同？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T16:18:06.340

这不是有效的代码。标准对序列容器操作的定义（23.2.3@4）：

> a.insert(p,i,j) - [...] pre：i 和 j 不是 a 的迭代器。

因此，您的代码会调用未定义的行为，因为它违反了操作的先决条件`insert`。

如果不是 using ，而是编写了一个从to迭代并调用所有值`insert`的循环，那么您的代码将是有效的：这是因为只有在需要重新分配时才会使向量迭代器无效，并且您的调用 to确保不是这种情况。`myvector.rbegin() + 1``myvector.rend() -1``push_back``push_back``reserve`

一般来说，虽然在某些情况下在迭代容器时修改容器是可以的（例如上面描述的循环），但您必须确保在这样做时迭代器不会失效。发生这种情况时特定于每个容器。

# excel - 对象“_Application”的方法“名称”失败

> ID：16174245
> 
> 赞同：3
> 
> 时间：2013-04-23T16:11:30.623
> 
> 标签：excel, vba

我在将带有 VBA 的 Excel 2010 电子表格部署到客户端时遇到问题。他们报告以下错误：“运行时错误'1004'：对象'_Application'的方法'Names'失败”。

### 截屏

![截屏](https://i.imgur.com/asJavVZ.png)

失败的相关代码部分如下：

```
Dim settings as Range
Set settings = Application.Names("basictags").RefersToRange 
```

“basictags”这个名字肯定存在于电子表格中（而且它在我这边工作得很好），所以我认为它与在客户端启用保护模式有关。但是，他们已经确认，当 Excel 显示保护模式警告时，他们点击了“启用”按钮，所以我不确定还有什么可能导致它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T16:14:41.557

尝试`Application.ThisWorkbook.Names`代替`Application.Names`.

# java - java.lang.NoClassDefFoundError。运行时找不到类。

> ID：16174252
> 
> 赞同：-1
> 
> 时间：2013-04-23T16:12:03.970
> 
> 标签：java, noclassdeffounderror

我正在研究 Eclipse，我需要使用外部库。例如 Jsoup 和 JXL。

现在我到目前为止所做的是：首先在我的项目文件夹中创建了一个“lib”文件夹。然后在eclipse中，单击项目属性，库选项卡，添加外部jar并将jar添加到lib文件夹中。

所以这解决了我的编译问题。现在，当我运行程序时（我去 project/bin 并在控制台中执行： java ProgramName ；我得到

```
java.lang.NoClassDefFoundError: 
```

现在进行测试，我将 Jar 文件添加到 Main.java 所在的文件夹中，现在，我已经能够运行程序，执行以下操作：

```
javac -classpath ./path/to/jar Main.java
java -classpath ./path/to/jar:. Main 
```

这有效。

所以首先想到的是我必须告诉 java 在哪里可以找到相应的库。如果这是正确的？我该怎么做？

```
java -cp ???(dont know what to put here) 
```

但更何况。我还有一个问题。我正在计算机上编写这个程序，但我将在其他可能没有这些库的地方使用它。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:14:32.260

我喜欢使用类似以下的东西：

`java -cp myjar.jar;lib/*.jar com.foo.bar.MyClass`

这不仅将我的 jar 添加到类路径中，还添加了`lib`目录中的 jar。

如果你想在另一台计算机上运行你的 jar，你*也*需要这些 jar，你不能只拥有你的 jar。为什么不直接打包你的 lib 目录呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:17:45.793

要让您的程序运行，您需要担心两条路径

1.  jar 文件的路径，这些文件是您的应用程序依赖项（如 jsoup.jar）（我们称之为 lib）
2.  包含应用程序类的目录的路径（让我们调用这些类）

您需要的命令行的一般形式是：

```
java -cp lib/jsoup.jar:classes Main 
```

如果你有更多的库

```
java -cp lib/jsoup.jar:lib/jxl.jar:classes Main 
```

关于打包您的应用程序以发布到其他计算机的一般说明。您可能要考虑制作自己的应用程序的 jar，最好使用[http://ant.apache.org/manual/Tasks/jar.html](http://ant.apache.org/manual/Tasks/jar.html)

另一种选择是制作一个“一个罐子”，它制作一个大罐子，捆绑在你的库中需要的所有类和应用程序中的所有类中。然后，您可以使 jar 可执行，以获得良好的开箱即用解决方案。看看[http://one-jar.sourceforge.net/](http://one-jar.sourceforge.net/)和[https://code.google.com/p/jarjar/](https://code.google.com/p/jarjar/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:18:38.560

如果你有这个结构：

```
project folder
... code
... libs 
```

然后从代码文件夹中：

```
javac -cp .;../libs/*.jar yourmainclass.java
java -cp  .;../libs/*.jar yourmainclass 
```

当你需要编译和运行这个项目时，把所有的文件夹拿走，在其他机器上做同样的事情。

# python - 在 Networkx 中添加节点时在 Python NumPy 中进行舍入

> ID：16174254
> 
> 赞同：0
> 
> 时间：2013-04-23T16:12:11.590
> 
> 标签：python, graph, numpy, finance, networkx

我从哪里得到尾随的 0 或 9？我在每一步都检查了没有出现舍入问题，并且得到了正确的结果。但是，当我将此数字添加到图表时，会出现舍入问题。

我的完整代码如下：

```
from __future__ import division
from math import sqrt
import networkx as nx
import numpy as np
from decimal import Decimal

n=4   #n is the nummber of steps in the graph.
a = np.array([ 1.1656,  1.0125,  0.8594])

g=nx.DiGraph() #I initiate the graph

#f2 checks for equal nodes and removes them
def f2(seq): 
    checked = []
    for e in seq:
        if (e not in checked):
            checked.append(e)
    return np.asarray(checked)

root = np.array([1])
existing_nodes = np.array([1])
previous_step_nodes = np.array([1])
nodes_to_add =np.empty(0)
clean = np.array([1])

for step in range(1,n):
    nodes_to_add=np.empty(0)
    for values in previous_step_nodes:
        nodes_to_add = np.append(nodes_to_add,values*a)

    print "--------"
    print "*****nodes to add ****" + str(f2(np.round(nodes_to_add,4)))
    print "clean = " + str(clean) + "\n"
    #Up to here, the code generates the nodes I will need 

    # This for loop makes the edges and adds the nodes.
    for node in clean:
        for next_node in np.round(node*a,4):
            print str(node ) + "     "  + str( next_node)
            g.add_edge(np.round(node,4), np.round(next_node,4))
#            g.add_edge(Decimal(np.round(node,4)).quantize(Decimal('1.0000')), Decimal(np.round(next_node,4)).quantize(Decimal('1.0000')))

    previous_step_nodes = f2(nodes_to_add)
    clean = f2(np.round(previous_step_nodes,4))
#    g.add_nodes_from(clean)

    print "\n step" + str(step) + " \n"
    print " Current Step :" + "Number of nodes = " + str(len(f2(np.round(previous_step_nodes,4))))
    print clean

print "How many nodes are there ? " +str(len(g.nodes())) 
```

这段代码工作并打印出一个非常简洁的图形描述，这正是我想要的。但是，当我打印节点列表时，要检查图形是否仅包含我需要的节点数，我得到：

```
How many nodes are there ? 22
[1, 0.88109999999999999, 1.0143, 1.038, 0.74780000000000002, 
1.1801999999999999, 1.3755999999999999, 1.0142, 0.8609, 
0.88100000000000001, 0.85940000000000005, 1.1656,
1.1950000000000001, 1.0125, 1.5835999999999999, 1.0017, 
0.87009999999999998, 1.1676,
0.63480000000000003, 0.73860000000000003, 1.3586, 1.0251999999999999] 
```

这显然是一个使我的程序无用的问题。0.88109999999999999 和 0.88100000000000001 是同一个节点。

因此，在检查了几天的 stackoverflow 之后，我得出的结论是，解决该问题的唯一方法是使用 Decimal()。所以，我更换了：

```
g.add_edge(np.round(node,4), np.round(next_node,4)) 
```

和

```
g.add_edge(Decimal(np.round(node,4)).quantize(Decimal('1.0000')), 
           Decimal(np.round(next_node,4)).quantize(Decimal('1.0000'))) 
```

然而，结果并不是我所期望的：因为

```
0.88109999999999999 = 0.8811
0.88100000000000001 =0.8810, 
```

所以 Python 仍然认为它们是不同的数字。

理想情况下，我不希望使用 Decimal() 使代码复杂化，并且希望截断小数点，以便 0.88109999999999999 = 0.88100000000000001 = 0.8810 但我不知道如何解决这个问题。

感谢您的回复，我已经更新了我的代码。我接受了使用 f2 的建议：

```
def f2(seq): 
    near_equal = lambda x, y: abs(x - y) < 1.e-5
    checked = []
    for e in seq:
        if all([not near_equal(e, x) for x in checked]):
            checked.append(e)
    return np.asarray(checked) 
```

我删除了所有 numpy.round() 因为如果我可以删除“相似”的节点，那么我根本不需要任何舍入。

但是，python仍然无法区分节点：

g.nodes() 打印出 23 个节点，而应该只有 20 个：（注意：我在更改容差级别 1.e-5 时尝试过，但没有得到不同的结果）

有多少个节点？23

```
[0.63474091729864457, 0.73858020442900385, 0.74781245698436638,
 0.85940689107605128, 0.86088399667008808, 0.86088399667008819,
 0.87014947721450187, 0.88102634567968308, 0.88102634567968319,
 1, 1.00171875, 1.0125, 1.0142402343749999, 1.02515625,
 1.0379707031249998, 1.1655931089239486, 1.1675964720799117,
 1.180163022785498, 1.1949150605703167, 1.358607295570996,
 1.3755898867656333, 1.3755898867656335, 1.5835833014513552] 
```

这是因为：0.86088399667008808、0.86088399667008819；0.88102634567968308、0.88102634567968319 和 1.3755898867656333、1.3755898867656335 仍被视为不同的节点。

完整代码：

```
from __future__ import division
from math import sqrt
import networkx as nx
import numpy as np
import matplotlib.pyplot as plt

mu1 = 0.05; sigma1= 0.25
n=4

a0=1
a1 = 1 + mu1/n + sigma1*sqrt(3)/sqrt(2*n)
a2 = 1 + mu1/n
a3 = 1 + mu1 /n - sigma1*sqrt(3)/sqrt(2*n)
a = np.array([a1,a2,a3])

print " a = " + str(a)

g=nx.DiGraph() #I initiate the graph

def f2(seq): 
    near_equal = lambda x, y: abs(x - y) < 1.e-5
    checked = []
    for e in seq:
        if all([not near_equal(e, x) for x in checked]):
            checked.append(e)
    return np.asarray(checked)

root = np.array([1])
existing_nodes = np.array([1])
previous_step_nodes = np.array([1])
nodes_to_add =np.empty(0)
clean = np.array([1])

print "________________This Makes the Nodes____________________________________"
for step in range(1,n):
    nodes_to_add=np.empty(0)
    for values in previous_step_nodes:
        nodes_to_add = np.append(nodes_to_add,values*a)
    print "--------"    
    print "*****nodes to add ****" + str(f2(nodes_to_add))
    print "clean = " + str(clean) + "\n"
    #Up to here, the code generates the nodes I will need 

    # This for loop makes the edges and adds the nodes.
    for node in clean:
        for next_node in node*a:
            print str(node ) + "     "  + str( next_node)
            g.add_edge(node, next_node)

    previous_step_nodes = f2(nodes_to_add)
    clean = f2(previous_step_nodes)
#    g.add_nodes_from(clean)

    print "\n step" + str(step) + " \n"
    print " Current Step :" + "Number of nodes = " + str(len(f2(previous_step_nodes)))
    print clean

print "______________End of the Nodes_________________________________"
print "How many nodes are there ? " +str(len(g.nodes()))
print sorted(g.nodes()) 
```

结果：

有多少个节点？23 [0.63474091729864457, 0.73858020442900385, 0.74781245698436638, 0.85940689107605128, 0.86088399667008808, 0.86088399667008819, 0.87014947721450187, 0.88102634567968308, 0.88102634567968319, 1, 1.00171875, 1.0125, 1.0142402343749999, 1.02515625, 1.0379707031249998, 1.1655931089239486, 1.1675964720799117, 1.180163022785498, 1.1949150605703167, 1.358607295570996, 1.3755898867656333, 1.3755898867656335, 1.5835833014513552]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:44:09.010

依赖浮点数之间的精确相等通常不是一个好主意，因为用于生成数字的同一组输入可能会由于不同的浮点表示、数学运算顺序等而产生不同的结果。

除非您正在处理非常接近的节点，否则您可以`f2`使用以下内容修改您的函数（您可能希望将容差设为变量）：

```
def f2(seq): 
    near_equal = lambda x, y: abs(x - y) < 1.e-8
    checked = []
    for e in seq:
        if all([not near_equal(e, x) for x in checked]):
            checked.append(e)
    return np.asarray(checked) 
```

请注意，如果浮点数完全相等，则获取删除重复项的列表的更简单方法是

```
nodes_without_dupes = list(set(nodes_to_add)) 
```

# php - HTML 和脚本未显示在我的 wordpress 主题中

> ID：16174258
> 
> 赞同：0
> 
> 时间：2013-04-23T16:12:19.993
> 
> 标签：php, wordpress, wordpress-theming

我在我的主题上使用自定义主题选项框架。我已经集成了所有内容，但是在 textarea 中粘贴并尝试保存选项时，它会自动删除 HTML 代码，并且`<script>`只保留文本`<>`。我的网站源页面中显示的文本[http://www.wrock.org/](http://www.wrock.org/)我不知道如何解决这个问题。

还有一些谷歌跟踪代码，当我探索源代码时，我发现了以下内容

```
/* ----------------------------------------------------------------------------------- */
    /* Show analytics code in footer */
/* ----------------------------------------------------------------------------------- */

function wrockmetro_analytics() {
    $shortname = wrockmetro_get_option('of_shortname');
    $output = wrockmetro_get_option($shortname . 'wrock_analytics');
    if ($output <> "")
        echo "<script type='text/javascript'>" . stripslashes($output) . "</script>\n";
}

add_action('wp_footer', 'wrockmetro_analytics'); 
```

**来自 OptionInterface.php 的文本区域代码**

```
// Textarea
        case 'textarea':
            $cols = '8';
            $ta_value = '';
            if (isset($value['options'])) {
                $ta_options = $value['options'];
                if (isset($ta_options['cols'])) {
                    $cols = $ta_options['cols'];
                } else {
                    $cols = '8';
                }
            }
            $val = stripslashes($val);
            $output .= '<textarea id="' . esc_attr($value['id']) . '" class="of-input" name="' . esc_attr($option_name . '[' . $value['id'] . ']') . '" cols="' . esc_attr($cols) . '" rows="8">' . esc_textarea($val) . '</textarea>';
            break; 
```

# matlab - 在 MATLAB 中使用矩阵求解线性方程

> ID：16174259
> 
> 赞同：1
> 
> 时间：2013-04-23T16:12:32.093
> 
> 标签：matlab, variables, for-loop, matrix

我的脚本使用几个“for”循环创建了一个矩阵和 2 个向量，作为示例，它们返回如下：

```
K =

  1.0e+006 *

    1.2409    0.6250    0.8153    0.1250
    0.6250    3.6591   -0.1250    3.5375
    0.8153   -0.1250    1.2409   -0.6250
    0.1250    3.5375   -0.6250    3.6591

F =

  1.0e+006 *

    0.1733
    1.3533
   -0.1066
    1.3371

U =

 u3
 v3
 u4
 v4 
```

可以看出，`'U'`向量是一组变量，我需要`'K*U=F'`求解`'U'`.

当我尝试使用`linsolve`或者`solve`我得到意想不到的结果和我的矩阵的逆接近奇异的消息时。

但是，当我制作另一个脚本并手动输入相同的矩阵和向量时，一切正常，我不知道出了什么问题。

这是否与 MATLAB 存储循环函数创建的矩阵的方式有关，并且我需要在循环之后将矩阵的状态更改为某种东西？

此外，当我用手放置矩阵时，它会在没有`1.0e+006`乘数的情况下显示它：

```
K11 =

     1240900      625000      815300      125000
      625000     3659100     -125000     3537500
      815300     -125000     1240900     -625000
      125000     3537500     -625000     3659100 
```

能有关系吗？？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:21:21.113

试试反斜杠运算符：

```
U = K\F 
```

请参阅[此参考](http://www.mathworks.com/help/matlab/ref/mldivide.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:42:26.197

从前面的讨论中可以清楚地看出您的矩阵是单数的。这意味着您的方程不是线性独立的。当这种情况发生时，有两种可能性。您的系统可能**不一致**（过度约束），在这种情况下**不**存在解决方案。或者，它也可能意味着您的方程是欠约束的，在这种情况下，存在无限的解**集**。

要确定是哪种情况，您可以使用**rref**来获取矩阵的“行减少梯队形式”。执行以下操作：

```
 KF = [K,F]
 rref(KF) 
```

如果最后一行完全归零，那么您的约束不足并且可以从您的简化矩阵中提取解决方案集（但不是唯一解决方案）。

然而，在这种情况下，我得到一行 [0 0 0 0 1]，这使得系统过度约束，因此没有任何解决方案。

# java - 调用Java接口方法的困惑

> ID：16174260
> 
> 赞同：25
> 
> 时间：2013-04-23T16:12:34.267
> 
> 标签：java, interface

假设我有一个接口 A，定义如下：

```
public interface A {
  public void a();
} 
```

它包括称为的方法`void a();`

我有一个实现这个接口的类，并且只有一个方法：

```
 public class AImpl implements A {
       @Override
       public void a() {
           System.out.println("Do something");
       }
    } 
```

Q：如果在主类中调用接口方法，会不会调用属于实现该接口的类的实现？

例如：

```
public static void main(String[] args){
  A aa;
  aa.a();
} 
```

这会打印“做某事”吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-23T16:16:10.997

```
A aa = new AImpl();
aa.a(); 
```

*这里你的参考变量是接口`A`类型但实际`Object`是`AImpl`*。

> 当您定义一个新接口时，您就是在定义一个新的引用数据类型。您可以在可以使用任何其他数据类型名称的任何地方使用接口名称。如果定义类型为接口的引用变量，则分配给它的任何对象都必须是实现该接口的类的实例。

阅读有关[文档的更多信息](http://docs.oracle.com/javase/tutorial/java/IandI/interfaceAsType.html)

一个接口引用可以持有 AImpl 的对象，因为它实现了 A 接口。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-23T16:19:52.600

这取决于对象的运行时类型。看：

这是你的界面：

```
public interface A {
  public void a();
} 
```

这是你的课：

```
public class AImpl implements A {
    public void a() {
       println("I am AImpl");
    }
} 
```

还有另一种实现：

```
public class AnotherAImpl implements A {
    public void a() {
       println("I am another AImpl");
    }
} 
```

所以看看这个主要方法：

```
public static void main(String[] args){
  A aa;
  aa = new AImpl();
  aa.a(); // prints I am AImpl
  aa = new AnotherAImpl();
  aa.a(); // now it prints I am another AImpl
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T16:14:02.983

您需要在实际`AImpl`对象上调用例程

```
A aa = new AImpl();
aa.a(); 
```

这相当于以下

```
AImpl aa = new AImpl();
aa.a(); 
```

由于您尝试在未初始化的对象上调用方法，因此您的示例将引发错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T16:16:22.210

您可能可以通过自己运行代码来发现这一点。

目前你会得到一个`NullPointerException`，因为你没有为变量分配任何东西`aa`。将您的代码更改为以下内容将调用该方法并输出文本：

```
public static void main(String[] args){
    A aa = new AImpl();
    aa.a();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T16:16:43.627

不我不会。

您已经声明了一个变量。在这种情况下，您应该首先使用您的类的对象实例对其进行初始化`AImpl`。

```
public static void main(String[] args){
  A aa = new AImp();
  aa.a();
} 
```

# php - 在 URL 末尾附加变量 - PHP

> ID：16174262
> 
> 赞同：5
> 
> 时间：2013-04-23T16:12:38.183
> 
> 标签：php, url, variables, append

我想将变量 $name 附加到 URL [http://google.com/script.php](http://google.com/script.php)以便我可以在另一个脚本中调用该变量。

如何在没有这些语法错误的情况下修改以下代码？

谢谢。

代码：

```
$name = $_GET['smsname'];
$call = $client->account->calls->create('+103632', $number,                                             
        'http://google.com/script.php'
    ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T16:14:56.357

像这样附加它

```
$name = $_GET['smsname'];
$call = $client->account->calls->create('+103632', $number,                                             
        'http://google.com/script.php?name='.$name
    ); 
```

在下一页中，您可以使用`$_GET['name']`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T16:14:15.583

只需使用连接它`.`

`$var1 = 'text';` `$var2 = 'text2';`

串联 =`$var1.$var2;`

在你的情况下。

```
$name = $_GET['smsname'];
$call = $client->account->calls->create('+103632', $number,                                             
        'http://google.com/script.php?name='.$name;
    ); 
```

但是，您应该验证`$name`值，例如它是否为空。因为，你的代码只有在 if`script.php?name=`有值的情况下才有效，但如果没有，那么你应该准备做一些事情。像这样：

前任：`$name = isset($_GET['smsname']) ? $_GET['smsname'] : 0;`

上面的代码几乎说，如果`script.php?name=`设置为某个值，则将其分配给`$name`else`$name`应该是`0`

该 `: 0;`部分是否设置一个值，`0`如果没有设置或如果`$_GET['smsname']`为空。你可以在那里添加任何你喜欢的东西

# user-interface - 把东西放在窗户里

> ID：16174263
> 
> 赞同：0
> 
> 时间：2013-04-23T16:12:38.817
> 
> 标签：user-interface, widget, pyside

我怎样才能把东西放在主窗口中？我想在主窗口中创建一个行编辑（在菜单栏下方，可能前面有一些描述标签）。这是怎么做到的？我使用了网格布局和这个盒子布局，没有任何效果。（对于另一个微不足道的问题，关于 pyside 的教程很少，其中大多数只介绍了如何使用按钮等创建单个窗口。）

```
import sys
from PySide import QtGui, QtCore, QtWebKit

class FirstClass(QtGui.QMainWindow, QtGui.QWidget):

    def __init__(self):
        super(FirstClass, self).__init__()
        self.startingUI()

    def startingUI(self):

        self.setWindowTitle('Hauptfenster')
        self.resize(800, 400)
        self.statusBar()

        #Menueinstellungen an sich

        menue = self.menuBar()

        #Actions des Menues:
        #datei menue
        menuleiste_datei = menue.addMenu('File')

        datei_exit = QtGui.QAction('Exit', self)
        datei_exit.setStatusTip('Close the programm')
        menuleiste_datei.addAction(datei_exit)
        datei_exit.triggered.connect(self.close)

        #Einstellungen menue
        menuleiste_configurations = menue.addMenu('Configurations')
        configurations_settings = QtGui.QAction('Settings', self)
        configurations_settings.setStatusTip('Configurations(Settings)')
        menuleiste_configurations.addAction(configurations_settings)
        configurations_settings.triggered.connect(self.newwindow)

        self.lineedit = QtGui.QLineEdit()
        self.layout = QtGui.QHBoxLayout()
        self.layout.addWidget(self.lineedit)
        self.setLayout(self.layout)
        self.show()

    def newwindow(self):
        self.wid = QtGui.QWidget()
        self.wid.resize(250, 150)
        self.setWindowTitle('NewWindow')
        self.wid.show()

def main():

    app = QtGui.QApplication(sys.argv)
    start = FirstClass()
    sys.exit(app.exec_())

if __name__== '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:19:48.047

我不认为创建具有多重继承的类是推荐的最佳实践。如果在 中未找到属性`FirstClass`，则从左到右 ( `QtGui.QMainWindow`to `QtGui.QWidget`) 搜索。从我的角度来看，这将变成支持和调试的噩梦。我猜这就是 self.layout 无法正常工作的原因。

`QtGui.QMainWindow`我为和制作了单独的课程`QtGui.QWidget`。`FirstWindowClass`将中央小部件设置为`FirstWidgetClass`. `FirstWidgetClass`有你`QLineEdit`和我继续插入标签。我改为`QHBoxLayout`帮助`QGridLayout`您了解它是如何工作的。

过去几个月我在 Python 和 Pyside 的学习经验中的一些提示：

1.  请记住，您始终可以查看 PyQt 示例，并且大多数将直接使用 PySide 模块。
2.  我建议查看[http://srinikom.github.io/pyside-docs/index.html](http://srinikom.github.io/pyside-docs/index.html)，因为很多模块都有简单的示例。
3.  对于我的个人项目，我的 Qt 问题的很多解决方案都是用 C++ 编写的，所以不要害怕将其转换为 python。

    ```
    import sys
    from PySide import QtGui, QtCore, QtWebKit

    class FirstWindowClass(QtGui.QMainWindow):
        def __init__(self):
            super(FirstWindowClass, self).__init__()

            self.setWindowTitle('Hauptfenster')
            self.resize(800, 400)
            self.statusBar()

            # Set central widget that expands to fill your window
            self.main_widget = FirstWidgetClass(self)
            self.setCentralWidget(self.main_widget)

            #Menueinstellungen an sich

            menue = self.menuBar()

            #Actions des Menues:
            #datei menue
            menuleiste_datei = menue.addMenu('File')

            datei_exit = QtGui.QAction('Exit', self)
            datei_exit.setStatusTip('Close the programm')
            menuleiste_datei.addAction(datei_exit)
            datei_exit.triggered.connect(self.close)

            #Einstellungen menue
            menuleiste_configurations = menue.addMenu('Configurations')
            configurations_settings = QtGui.QAction('Settings', self)
            configurations_settings.setStatusTip('Configurations(Settings)')
            menuleiste_configurations.addAction(configurations_settings)
            configurations_settings.triggered.connect(self.newwindow)

            # Open the window
            self.show()

        def newwindow(self):
            self.wid = QtGui.QWidget()
            self.wid.resize(250, 150)
            self.wid.setWindowTitle('NewWindow')
            self.wid.show()

    class FirstWidgetClass(QtGui.QWidget):
        def __init__(self, parent=None):
            super(FirstWidgetClass, self).__init__()

            self.label_example = QtGui.QLabel('Enter Data:')

            self.lineedit = QtGui.QLineEdit()
            self.layout = QtGui.QGridLayout()
            self.layout.addWidget(self.label_example, 0, 0)
            self.layout.addWidget(self.lineedit, 0, 1)
            self.setLayout(self.layout)
            self.show()

    def main():

        app = QtGui.QApplication(sys.argv)
        start = FirstWindowClass()
        sys.exit(app.exec_())

    if __name__== '__main__':
        main() 
    ```

# c# - 基于输入 url 的 URL 重写

> ID：16174264
> 
> 赞同：0
> 
> 时间：2013-04-23T16:12:44.847
> 
> 标签：c#, asp.net, iis-7, url-rewriting

我有一个用 asp.net webforms 4.0 编写的 Web 应用程序

该站点有大约 20 个 aspx.net 页面和 30 个控件。如果你去`www.mysite.com`默认页面是`www.mysite.com/challenge.aspx`。

如果用户输入

```
www.mysite.com/JohnDoe 
```

我需要它去

```
www.mysite.com/JohnDoe/challenge 
```

我正在寻找类似的东西`www.mysite.com/{0}/challenge.aspx`

该名称将告诉应用程序使用什么连接字符串。

# java - 使用 Java COMM API 发送和接收 SMS

> ID：16174269
> 
> 赞同：0
> 
> 时间：2013-04-23T16:13:09.393
> 
> 标签：java, java-communication-api

我偶然发现了[这篇](http://www.java-samples.com/showtutorial.php?tutorialid=22)关于如何使用它的指南，但作为我的初学者，它让我对如何使用它感到困惑，直到我在[本](http://qa.java-samples.com/questions/805/how-to-send-sms)指南中看到了答案。

但是，我注意到五个文件之一已经命名为 SMSClient 并且第二个指南中的第二步复制了该文件，所以我跳过它并前往第三步，这令人困惑，因为我在此行中遇到错误：

`SMSClient smsc = SMSClient(0);`

我将所有五个 java 文件加上 SendSMS.java 文件放在 src 包的（默认包）包中，但是 Eclipse 似乎找不到 SMSClient.java 文件。

抱歉，如果这是一个非常基本的问题，我还没有上过任何 Java 课程，我正在摸索这些。任何帮助将不胜感激，可能是对上述代码的澄清或发送/接收短信的更好替代方案。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:33:35.387

我建议您使用其中一种替代方法，因为许多开发人员都支持和使用它们：

SMS 发送/接收的更好选择是来自[HERE的](http://opensmpp.logica.com/CommonPart/Introduction/Introduction.htm)**Logica Open SMPP 。它是一个基于****JAVA**的开源 API，为您提供 SMS 技术所需的一切。该网站还有一个用于测试的**SMC 模拟器**，非常有帮助。

 ****另一种选择是**Kannel: Open Source WAP and SMS Gateway** from [Here](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://www.kannel.org/&ei=27Z2UcqbIpSp7Abeg4DABw&usg=AFQjCNE68vF4y1_4VGZd9jlseb6vPVGUXg&bvm=bv.45512109,d.ZGU)这是一个基于 Linux 的开源 API，您可以轻松配置它，您可以使用 Web 服务发送和接收 SMS 或 SQLBox 通过**DB Transactions**发送和接收.. 我个人使用**坎内尔**

[从这里](http://www.kannel.org/doc.shtml)检查 Kannel 的文档****

# c# - 将组合框与数据绑定并保存为外键 c#

> ID：16174271
> 
> 赞同：0
> 
> 时间：2013-04-23T16:13:15.537
> 
> 标签：c#, data-binding, combobox

我正在使用 c# 为大学申请者编写申请。在第一个表单上，我有几个文本框、单选按钮和一个组合框。所有这些都与我创建的数据库（学生）有关。数据库中有一个`table tbl_nationality`和一个表`tblstudent`。在表中`tbl_nationality`，我们有列`Nationality_id`和`Country`。`nationality_id`是表中的外键`tblstudent`。

我编写了几行代码来填充组合框 (cmbnationality) 中国家/地区列的数据。问题是，现在我需要保存表单中的数据，并且组合框的国籍是表 tblstudent 中的外键。`nationality_id`当我显示国家/地区时，如何将外键保存在 tblstudent 中`tbl_nationality`。

```
void FillNationality()
{
    SqlConnection connection = new SqlConnection();
    connection.ConnectionString = "Integrated Security=true; Initial Catalog = student; Data Source = Yudish-PC";
    string Query = "select * from tbl_nationality ;";
    SqlCommand cmdDatabase = new SqlCommand(Query, connection);
    SqlDataReader myReader;
    try
    {
        connection.Open();
        myReader = cmdDatabase.ExecuteReader();
        while (myReader.Read())
        {
          string nationality = myReader.GetString (1);
            cmbnationality.Items.Add(nationality);
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);            
    }
    finally
    {
        connection.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:31:20.467

填充组合框时，使用 Id 作为值，使用国家/地区作为显示文本。更新数据库时，获取组合框的 SelectedValue 属性，该属性将是 Id。如果 Id 不是您想要公开的东西，您可以将数据保存在 Session 对象中并使用 Country 作为对该表的查找（只需循环它）。应该很直截了当。

在会话中设置表：

`Session["myTable"] = ds.tables["myTable"];`

从组合框中获取值：

`myCombo.SelectedValue`

您还应该考虑将数据源（从数据库检索的数据集中的表）绑定到组合框。

# java - Spring：如何使用泛型在 Spring 配置中注入 ENUM？

> ID：16174277
> 
> 赞同：13
> 
> 时间：2013-04-23T16:13:37.580
> 
> 标签：java, spring, generics

我有这样的课：

```
public class CheckSetFilter<E extends Enum<E>> 
{
   public CheckSetFilter(CheckSetManager<E> pCheckSetManager, E pCheckSetId)
} 
```

我有这个枚举：

```
public enum StubCheckId
{
   STUBCHECK1, STUBCHECK2
} 
```

我尝试用 Spring 创建这样一个对象：

```
<bean id="checkSetFilter" class="com.iba.icomp.core.checks.CheckSetFilter">
   <constructor-arg ref="checkSetManager"/>
   <constructor-arg value="STUBCHECK1"/>
</bean> 
```

它抱怨，它不能从字符串转换为枚举。我想这是因为泛型。它无法知道要创建的枚举类型。我也试图给它一个类型提示，但没有运气。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-23T17:37:42.163

您真正需要做的就是在标签`value`内**添加**`constructor-arg`一个标签。

```
<bean id="checkSetFilter" class="com.iba.icomp.core.checks.CheckSetFilter">
    <constructor-arg ref="checkSetManager"/>
    <constructor-arg>
        <value type="your.package.StubCheckId">STUBCHECK1</value>
    </constructor-arg>
</bean> 
```

# java - 以列表为参数的 spring-data 查询方法

> ID：16174291
> 
> 赞同：2
> 
> 时间：2013-04-23T16:14:33.410
> 
> 标签：java, spring-data, spring-data-jpa

我们必须从需要查找与键值对列表匹配的实体的数据库中查询数据。我们认为使用 Spring Data JPA 是个好主意，因为我们还需要分页。

我们创建的表如下所示：

```
terminal(ID,NUMBER,NAME);
terminal_properties(ID,KEY,VALUE,TERMINAL_FK); 
```

是否可以定义一个查询方法来获取具有包含给定键/值对的属性的所有终端？

像这样的东西：*List<Terminal> findByPropertiesKeyAndValue(List<Property>);*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:19:34.473

我没有执行代码，但是给定正确的导入语句，这至少可以编译。根据您的实体定义，可能需要调整某些属性，无论如何，您应该了解如何处理此问题。

我的条件查询基于以下 SQL：

```
SELECT * FROM TERMINAL
  WHERE ID IN (
    SELECT TERMINAL_FK FROM TERMINAL_PROPERTIES
      WHERE (KEY = 'key1' AND VALUE = 'value1')
        OR (KEY = 'key2' AND VALUE = 'value2')
        ...
      GROUP BY TERMINAL_FK
      HAVING COUNT(*) = 42
  ) 
```

您在其中列出每个名称/值对并`42`简单地表示名称/值对的数量。

所以我假设你定义了一个这样的存储库：

```
public interface TerminalRepository extends CrudRepository<Terminal, Long>, JpaSpecificationExecutor {
} 
```

`JpaSpecificationExecutor`为了使用标准 API进行扩展很重要。

然后你可以像这样构建一个条件查询：

```
public class TerminalService {

  private static Specification<Terminal> hasProperties(final Map<String, String> properties) {
    return new Specification<Terminal>() {
      @Override
      public Predicate toPredicate(Root<Terminal> root, CriteriaQuery<?> query, CriteriaBuilder builder) {
        // SELECT TERMINAL_FK FROM TERMINAL_PROPERTIES
        Subquery<TerminalProperty> subQuery = query.subquery(TerminalProperty.class);
        Root propertyRoot = subQuery.from(TerminalProperty.class);
        subQuery.select(propertyRoot.get("terminal.id"));
        Predicate whereClause = null;
        for (Map.Entry<String, String> entry : properties.entrySet()) {
          // (KEY = 'key1' AND VALUE = 'value1')
          Predicate predicate = builder.and(builder.equal(propertyRoot.get("key"),
              entry.getKey()), builder.equal(propertyRoot.get("value"), entry.getValue()));
          if (whereClause == null) {
            whereClause = predicate;
          } else {
            // (...) OR (...)
            whereClause = builder.or(whereClause, predicate);
          }
        }
        subQuery.where(whereClause);
        // GROUP BY TERMINAL_FK
        subQuery.groupBy(propertyRoot.get("terminal.id"));
        // HAVING COUNT(*) = 42
        subQuery.having(builder.equal(builder.count(propertyRoot), properties.size()));

        // WHERE ID IN (...)
        return query.where(builder.in(root.get("id")).value(subQuery)).getRestriction();
      }
    };
  }

  @Autowired
  private TerminalRepository terminalRepository;

  public Iterable<Terminal> findTerminalsWith(Map<String, String> properties) {
    // this works only because our repository implements JpaSpecificationExecutor
    return terminalRepository.findAll(hasProperties(properties));
  }
} 
```

您显然可以替换`Map<String, String>`为`Iterable<TerminalProperty>`，尽管这会感觉很奇怪，因为它们似乎绑定到特定的`Terminal`.

# firefox - selenium dragAndDrop 不拖放，虽然选择器似乎还可以

> ID：16174297
> 
> 赞同：2
> 
> 时间：2013-04-23T16:14:51.580
> 
> 标签：firefox, selenium, drag-and-drop, draggable, selenium-ide

我正在尝试在 Firefox selenium IDE 中使用 dragAndDrop，但它不起作用。

我是硒的忠实粉丝，但这个问题在最后一天让我发疯了。

我有一个 dragAndDrop 测试：

```
dragAndDrop
//div[contains(text(),"Lori F.")]/../../
0,160 
```

但它不会进行拖放。我已经看到它工作了几次，但不知道为什么/为什么现在不行。似乎有时有效，有时无效。

当我单击 IDE [查找] 按钮时，选择器本身可以工作。它突出了`DIV`我正在尝试移动。所以这不是我在 selenium 中遇到的“通常”问题，即实际上无法选择具有正确 xpath 的对象。

它所针对的 HTML 是：

```
<div class="fc-event-inner fc-event-skin" style="background-color: yellow;">
  <div class="fc-event-head fc-event-skin"></div>
  <div class="">
    <div class="fc-event-title">
      Lori F., Marshal H., Chris W., Kenna T.
    </div>
  </div>
  <div class="fc-event-bg"></div>
</div> 
```

当该实际步骤尝试运行时，浏览器实际上确实“刷新”了该对象，表明它能够通过 OK 路径选择它，但不会发生拖放。

我尝试过使用 div 的 dragAndDropToObject，但这不起作用，因为 DIV 本身需要 x,y 坐标才能“降落”在正确的位置。

我发现了两个问题 [这可能对其他人有所帮助] - 并已消除 - 1）在屏幕上放大/缩小会弄乱下降的 x、y 坐标，所以我停止这样做，以及 2）使用元素检查器在 Firefox 中似乎也停止了它的工作。所以我相信我已经消除了这两个潜在的原因。

能够测试拖放是非常重要的，因为现在许多应用程序都使用这种东西采用各种 ajax 路由，所以能够测试它是关键！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-29T12:33:08.297

有时拖放不能正常工作（我不知道为什么）。

因此，您可以使用解决方法来模拟相同的操作，但以另一种方式：

1) mouseDownAt(locator, coordString) - 在这里你按下鼠标左键并按住它

2) 有时等待反应很有用（例如等待工具提示出现或其他）。至少稍作停顿以确保鼠标“捕获”对象并可以拖动它（测试可能运行得非常快，浏览器可能无法正确反应）

3) mouseMoveAt(locator, coordString) - 拖动到你需要的地方

4) mouseUpAt(locator, coordString) - 释放鼠标按钮完成拖放

此外，您可以在这些步骤的开头添加 setMouseSpeed(pixels) 以使鼠标缓慢移动（以确保它可以拖动），最后将 setMouseSpeed 恢复为默认值（默认为 10 表示鼠标步长为 10 pexels . 将速度设置为 3-5 像素会使鼠标移动更慢）。

尝试尝试：通过设置不同的值来设置鼠标速度并通过更改定位器（工具提示、阴影，如果有的话）等待（在 mouseDownAt 之后），或者只是暂停 1-2 秒。

# mysql - 按两个不同表聚合的ID查询条目

> ID：16174306
> 
> 赞同：0
> 
> 时间：2013-04-23T16:15:24.330
> 
> 标签：mysql, join

我有以下表结构

表 object_to_profile

```
objectID | profileID
       1 | 1
       2 | 1
       3 | 1
       2 | 2 
```

表 object_to_task

```
taskID | objectID | profileID
     1 |        1 | 1
     1 |        4 | 1
     1 |        2 | 2 
```

表 object_to_task 是按以下方式构建的：我显示用户复选框，它们基本上代表 object_to_profile 表。用户可以从表中选择对象并将它们保存到 object_to_task 表中。管理员稍后可以从表中删除该对象。但是如果用户已经从配置文件中选择了一些对象，那么他应该仍然可以看到。所以我需要一个查询来选择当前在配置文件中的所有对象，**以及**表中的所有对象并由用户选择。

如您所见，objectID 4 不再在 object_to_profile 表中，但已被用户选中。

将 objectID 放在一起的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:28:17.170

据我了解，您只需要`union`2 个结果集

```
select ObjectID from object_to_profile 
union 
select ObjectID from object_to_task where taskID = 1 
```

# c# - 为什么 RestSharp 以不同的方式反序列化两个日期？

> ID：16174316
> 
> 赞同：4
> 
> 时间：2013-04-23T16:15:45.323
> 
> 标签：c#, .net, asp.net-web-api, deserialization, restsharp

我有一个返回这个的休息调用（使用 Chrome 中的 Advance Rest Client 进行测试）：

```
MyObject: [22]
0:  {
ID: "123456"
UTC1: "2013-04-19T03:12:32Z"
UTC2: "2013-04-19T03:12:36.994Z"
} 
```

获取响应并将其序列化为对象的代码如下所示：

```
IRestResponse<List<MyObject>> response = client.Execute<List<MyObject>>(request); 
```

当我查看响应对象时，其中一个日期是错误的。如果我检查它或以任何方式使用这些对象，我会得到：

```
UTC1: 4/19/2013 3:12     
UTC2: 4/18/2013 9:12:36 PM <--CONVERTED!! 
```

我需要将两者都序列化为响应中返回的时间，而不是从 UTC/GMT 转换为本地时间。如您所见，上面一个值保持其 UTC 值，而另一个值转换为我的时区。我认为两者都是通过 Convert.DateTime 函数运行的，但是如果我对字符串执行此操作，则两个值都会转换为本地时间。我意识到原始值中的一个（正在转换的那个）并不完全符合 ISO 8601 格式（精度太高）；不幸的是，这是我现在必须使用的数据。

谁能告诉我如何强制 RestSharp 确保两个日期都在 UTC 中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T19:51:48.193

使用[Json.NET](http://james.newtonking.com/json)进行反序列化，而不是内置的 RestSharp 反序列化器。

```
response = client.Execute(request);    
var myObjects = JsonConvert.Deserialize<List<MyObject>>(response) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-09T13:22:38.353

为方便起见发布此信息：

```
private class CustomRestClient : RestClient
        {
            public CustomRestClient(string baseUrl) : base(baseUrl) { }

            private IRestResponse<T> Deserialize<T>(IRestRequest request, IRestResponse raw)
            {
                request.OnBeforeDeserialization(raw);
                var restResponse = (IRestResponse<T>)new RestResponse<T>();
                try
                {
                    restResponse = ResponseExtensions.toAsyncResponse<T>(raw);
                    restResponse.Request = request;
                    if (restResponse.ErrorException == null)
                    {

                        restResponse.Data = JsonConvert.DeserializeObject<T>(restResponse.Content);
                    }
                }
                catch (Exception ex)
                {
                    restResponse.ResponseStatus = ResponseStatus.Error;
                    restResponse.ErrorMessage = ex.Message;
                    restResponse.ErrorException = ex;
                }
                return restResponse;
            }

            public override IRestResponse<T> Execute<T>(IRestRequest request)
            {
                return Deserialize<T>(request, Execute(request));
            }
        } 
```

这是我放在一起的一个简单代码，它只是在底层覆盖`Execute<T>`并使用 Json.net。

# php - 两个类使用的修改方法

> ID：16174317
> 
> 赞同：1
> 
> 时间：2013-04-23T16:15:47.343
> 
> 标签：php, oop

我有两个类，它们具有几乎相同的方法，都称为 myMethod()，但是，myChild2::myMethod() 在其中有一行额外的代码，它使用了一个局部变量。我宁愿不在两个子类中复制代码。我想我可以将 myMethod 移动到 myParent，然后添加一个 if 语句来检测哪个子类正在调用该方法，但我猜这是不对的。最干净的方法是什么？谢谢

```
class myParent
{
    //code...
}

class myChild1 extends myParent
{
    public function myMethod()
    {
        // A bunch of code common to both myChild1::myMethod() and myChild2::myMethod() goes here
        // A bunch more code common to both myChild1::myMethod() and myChild2::myMethod() goes here
    }
}

class myChild2 extends myParent
{
    public function myMethod()
    {
        // A bunch of code common to both myChild1::myMethod() and myChild2::myMethod() goes here
        someOtherLineOfCode($someLocalVariable); // A single unique line of code goes here which uses a local variable
        // A bunch more code common to both myChild1::myMethod() and myChild2::myMethod() goes here
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:24:31.880

你可以这样做：

```
class myParent
{
    public function myMethod()
    {
        // A bunch of code common to both myChild1::myMethod() and myChild2::myMethod()     goes here
        $this->templateMethod($someLocalVariable);
        // A bunch more code common to both myChild1::myMethod() and     myChild2::myMethod() goes here
    }

    protected function templateMethod($x) {}
}

class myChild2 extends myParent
{
    protected function templateMethod($x) {
        // some extra line
    }
} 
```

取决于你到底在做什么，我认为这是一个干净的解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:26:38.947

我会说将它移到`myParent`并添加一个构造函数参数。取决于是什么`someOtherLineOfCode`，但您至少可以添加一个标志来确定是否执行它，如下所示：

```
class myParent
{
    public function __construct($shouldExecute) {
        $this->$executeSomeOtherCode = $shouldExecute;
    }

    public function myMethod()
    {
        // A bunch of code common to both myChild1::myMethod() and myChild2::myMethod() goes here

        if($this->$executeSomeOtherCode) {
            someOtherLineOfCode($someLocalVariable); // A single unique line of code goes here which uses a local variable
        }

        // A bunch more code common to both myChild1::myMethod() and myChild2::myMethod() goes here
    }

    //code...
}

class myChild1 extends myParent
{
    public function __construct()(
        parent::__construct(FALSE);
        // Do stuff specific for Bar
    }

    // Other code
}

class myChild2 extends myParent
{
    public function __construct()(
        parent::__construct(TRUE);
        // Do stuff specific for Bar
    }

    // Other code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T16:27:46.400

有几个选项可以实现您的目标。您选择哪一种取决于独特线路的用途。

**覆盖方法**

首先，您可以`myMethod()`在父级中，然后在 myChild2() 中覆盖它，包括额外的行，然后调用父级。如果额外的代码行可以独立于其余部分执行，这将起作用`myMethod()`：

```
class myChild2 extends myParent
{
     public function myMethod()
     {
          someOtherLineOfCode($someLocalVariable);
          parent::myMethod();
      }
} 
```

**传递标志参数**

如果执行顺序很重要，您可以在运行时检测对额外功能的需求：

```
class Parent
{
     function myMethod($enableExtraFunctionality=false)
     {
          // Common stuff
          if ($enableExtraFunctionality) 
          {
               someOtherLineOfCode($someLocalVariable);
          }
          // More common stuff
      }
 } 
```

然后将变量设置为仅在`myChild2()`：

```
 class myChild2 extends Parent
 {
     function myMethod()
     {
          parent::myMethod(true);
     }
  } 
```

如果您愿意，您还可以将该标志作为类变量而不是函数参数传递。

**检测调用类的名称**

作为先前方法的变体，您可以检测孩子的班级名称。查看[get_class() PHP 手册页](http://php.net/function.get-class.php)中的注释以获取详细信息。

# collections - 在恒定时间内生成唯一的随机数

> ID：16174320
> 
> 赞同：0
> 
> 时间：2013-04-23T16:15:54.397
> 
> 标签：collections, random, arraylist, runtime, big-o

有没有办法在恒定时间内生成唯一的随机数？我目前正在使用一个包含我所有可能的数字的数组列表。它实现了 Collection，我在这个 arrayList 上调用了 shuffle 方法。然后我从 arrayList 中删除第 0 个元素以获得唯一的随机数，但我相信这不能是恒定的时间，原因有两个：

*   删除方法是 O(n)
*   Collection.shuffle 是 O(n)

建议？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T18:21:43.177

Collection.shuffle 确实是 O(n)，但只需要调用一次。如果您得到 n 个随机数，则该时间会扩散到其余操作中。（这是摊销分析背后的一种想法，这对于您的问题似乎是必要的：要么你想要“摊销确定性常数时间”，要么“预期常数时间”，就像人们可能对字典所做的那样）

remove 方法一般是 O(n)，但是如果你反复删除最后一个元素而不是第一个元素，则数组不必不断地向下移动它的元素，所以它实际上是 O(1)——它只是它O(n) 在平均和最坏情况下。

# javascript - jQuery 无法识别 .get 请求中的类更改

> ID：16174327
> 
> 赞同：0
> 
> 时间：2013-04-23T16:16:23.803
> 
> 标签：javascript, jquery, getjson

我从 node.js 服务器获取一些数据，这些数据会影响我的一些元素的类。

```
$.get('/example', function (data)
{
//changes element 1 to .newclass from .oldclass
}); 
```

不幸的是，get 请求之外的事件处理程序无法识别更新的类。

```
$('.oldclass').click(function ()
{
//affects both element 1 and 2
}); 
```

如果我将 click 事件处理程序嵌套在 get 中，则问题不再存在。我怀疑这与异步请求有关，但我不完全确定。有人可以向我解释为什么会发生这种情况以及如何在不将我的代码嵌套在每个获取请求中的情况下解决它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T16:18:15.560

您应该使用事件委托：

```
$('body').on('click', '.oldclass', function() { /* whatever */ }); 
```

通过这样做，您可以使用“oldclass”捕获元素上的事件，而不管 DOM 的动态更新如何。使用您的代码，您会*在代码运行的那一刻找到带有“oldclass”的*元素。如果元素随后发生变化，这些事件处理程序不会消失。

不必将委托事件处理程序挂在 body 元素上，但这是最简单的事情。一般来说，它可以是任何合适的父元素，它会处理匹配后代的事件。

# bash - 为多个用户锁定可执行文件

> ID：16174328
> 
> 赞同：0
> 
> 时间：2013-04-23T16:16:29.387
> 
> 标签：bash, locking

我有一个在服务器上的可执行文件。许多用户可以使用 SSH 登录到该服务器并执行二进制文件。

我希望对执行此二进制文件的每个用户拥有独占访问权限。如果可能的话，我希望有一个用户队列，将被一个一个地服务。

是否可以使用 bash 脚本来执行此操作？

假设我将我的二进制文件称为 as`my.exec`并将脚本称为`access.sh`. 我可以保证每个用户`my.exec`只能通过`access.sh`. 所以很容易在这个可执行文件之上编写一个包装器。

此外，可执行文件需要提供可变参数。

我在这里有一个部分解决方案 -

```
#!/bin/bash

# Locking
LOCK_FILE="/tmp/my.lock"

function create_lock_and_execute {
        echo "Waiting for Lock"
        while [ -f ${LOCK_FILE} ]
        do
            username=`ls -l ${LOCK_FILE} | cut -f 3 -d " "`
            echo $username is using the lock.
            sleep 1
        done

        (   
          # Wait for lock ${LOCK_FILE} (fd 200). 
          flock -x 200 

          echo "Lock Acquired..."

          # Execute Command
          echo "Executing Command : $COMMAND"
          ${COMMAND}

        ) 200>${LOCK_FILE}
}

function remove_lock {
    rm -f ${LOCK_FILE}
}

# Exit trap function
function exit_on_error {
    echo "Exiting on error..."
    remove_lock
    exit 1
}

# Exit on kill
function exit_on_kill {
    echo "Killed, exiting..."
    remove_lock
    exit 1
}

# Exit normaly
function exit_on_end {
    echo "Exiting..."
    remove_lock
    exit 0
}

trap exit_on_kill KILL
trap exit_on_error ERR
trap exit_on_end QUIT TERM EXIT INT

create_lock_and_execute 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:27:44.107

检查[如何防止脚本同时运行？](https://stackoverflow.com/questions/169964/how-to-prevent-a-script-from-running-simultaneously). 例如

否则，您可以手动检查文件，如果该文件不存在，请创建它并继续。然后在一切完成后，删除文件。但这并不是真正安全的。可能有并发尝试，检查可能失败

更新：

我有一个链接要分享，我以前看到过，花了一点时间来挖掘。但我没有检查过。快速查看似乎很好，但如果你使用它，请正确测试

[http://gotmynick.github.io/articles/2012/2012-05-02-file_locks_queues_and_bash.html](http://gotmynick.github.io/articles/2012/2012-05-02-file_locks_queues_and_bash.html)

# list - 从python中的函数返回列表

> ID：16174333
> 
> 赞同：0
> 
> 时间：2013-04-23T16:16:43.850
> 
> 标签：list, python-3.x

```
def _pawnHit(state, user, y):
    not_user = _notUser(user)
    hit = 0
    a=[]

    for coordinate in y[1]:
        if(state.whichUserProper(coordinate[0], coordinate[1]) == not_user):
            hit = 1
            a.append(coordinate)

    if(hit==1):
        return [a,True]

    for coordinate in y[0]:
        if(state.whichUserProper(coordinate[0],coordinate[1] == 7)):
            a.append(coordinate)
        else:
            break

    return [a,False] 
```

在 C/C++ 中，我们不能通过引用返回任何在函数内声明的变量（尤其是数组）（它的作用域在函数返回时结束并且变量被销毁），除非它的内存是使用 new/malloc 分配的，然后我们也返回指向数组的指针。

在 python 中，因为我不知道列表的返回是如何发生的。所以我不知道这是否会奏效。列表“a”已在函数内创建。一旦函数的作用域结束，它会被销毁吗？如果是，有什么可能的解决方法？

PS 我知道我可以很容易地返回像`return [i,j,[k,m]]`i,j,k,m 是正常变量的这些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:27:42.160

是的，显然这会起作用。Python 不想让你担心内存管理。如果您退回了某些东西，您可以并且应该期望它在那里。

这样做的原因是因为所有 Python 对象都分配在堆上（至少在 CPython 中）。与 C/C++ 中局部变量在堆栈上获取内存并在函数超出范围时删除堆栈内存不同，所有内容都是动态分配的。就好像一切都将使用`malloc`etc 创建。另一方面，垃圾收集确保所有不再需要的对象的内存被自动释放，因此您无需担心任何事情。

当然，您只需对其进行测试即可轻松验证此行为：

```
>>> def giveMeAList(n):
        l = list(range(n)) # create a list with n values
        print(id(l)) # print the id of the list object
        return l
>>> x = giveMeAList(100)
47264136
>>> id(x)
47264136
>>> len(x)
100 
```

如您所见，对象 id 是相同的，所以它是同一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:21:16.187

是的，它会起作用。前进！

Python 是一种垃圾收集语言；运行时负责内存释放，因此您不必担心。只要需要一个值，它就不会被破坏。有关详细信息，请参阅[Python 垃圾收集](http://www.digi.com/wiki/developer/index.php/Python_Garbage_Collection)。摘抄：

> Python 的内存分配和释放方法是自动的。用户不必像在 C 或 C++ 等语言中使用动态内存分配时那样手动预分配或取消分配内存。Python 使用两种策略进行内存分配引用计数和垃圾回收。© Digi International, Inc., www.digi.com

# pdf - 有关 PDF 表单、Acrobat Reader、浏览器插件和 JavaScript 的问题

> ID：16174339
> 
> 赞同：0
> 
> 时间：2013-04-23T16:17:22.287
> 
> 标签：pdf, plugins, cookies, browser, acrobat

使用最新的 Adob​​e PDF*智能*表单，以下是我的问题：

1) PDF 表单本身是否可以检测或知道打开的客户端软件是什么？

2) 在浏览器插件中打开 PDF 表单时，表单上的脚本是否可以从浏览器 cookie 中读取？表单上的脚本也可以写入浏览器cookie吗？

谢谢（你的）信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T10:49:03.947

“最新的智能表格”……过去 15 年来一直这样做……</p>

To 1)：第一个区别是使用的PDF查看器是否理解（Acrobat）JavaScript。

否则，您的智能表单将保持不变，并且您无法更改任何内容（如果查看器允许提交数据，您可以进行服务器端数据处理和表单填写并将填写的 PDF 返回给客户端）。

如果 PDF 查看器能够理解 (Acrobat) JavaScript，则您可以测试查看器的类型、版本以及是否是外部的（这意味着您是否在 Web 浏览器下查看表单）。请参阅 Acrobat JavaScript 文档（它是 Acrobat SDK 的一部分，可从 Adob​​e 网站下载）。

2）：答案很简单：不。出于安全原因，这是不允许（和实施）的。

希望这能有所帮助。

马克斯·维斯。

# mysql - mySQL：如何进行多个子查询和分组以用于数据表？

> ID：16174340
> 
> 赞同：1
> 
> 时间：2013-04-23T16:17:24.943
> 
> 标签：mysql, join, group-by, datatables, subquery

我想生成以下数据集以用于 DataTables。为了使过滤和排序正常工作，即使不是不可能（据我所知），使用 JOINS 代替子查询也很困难。

申请人姓名、职位、面试官、面试1分数、面试2分数、Demo。分数、面试日期

以下是数据在 mySQL（简化版）中的存储方式：

申请人分数表

```
id  applicant_id    interviewer_id  score_type  score   datetime_recorded
 1             2                 3  Interview 1    80   2013-04-23 09:35:48
 2             2                45  Interview 1    70   2013-04-23 10:14:23
 3             2                 3  Interview 2    85   2013-04-23 09:35:48
 4             2                45  Interview 2    77   2013-04-23 10:14:23
 5             2                 3  Demonstration  76   2013-04-23 09:35:48
 6             3                45  Interview 1    79   2013-04-23 10:14:23
 7             3                 3  Interview 1    86   2013-04-23 09:35:48
 8             3                45  Interview 2    92   2013-04-23 10:14:23 
```

申请人表

```
id  first_name  last_name
 2  John        Doe 
 3  Jane        Doe 
```

面试官桌

```
id  first_name  last_name
 3  Santa       Claus
45  Fred        Flintstone 
```

申请人职位表

```
position_id   applicant_id
          1              2
          1              3 
```

职位表

```
id  title                 
 1  Advanced mySQL Programmer 
```

我已经尝试了所有我能想到的方法，但我无法正确按面试官和申请人对分数进行分组。我期望看到的是：

```
Applicant Name   Position                   Interviewer   Interview 1 Score  Interview 2 Score   Demo. Score  Interview Date
      John Doe   Advanced mySQL Programmer  Santa Claus                  80                 85            76      2013-04-23
      John Doe   Advanced mySQL Programmer  Fred Flintstone              70                 77                    2013-04-23
      Jane Doe   Advanced mySQL Programmer  Santa Claus                  86                                       2013-04-23
      Jane Doe   Advanced mySQL Programmer  Fred Flintstone              79                 92                    2013-04-23 
```

这是我当前的查询，结果为零：

```
SELECT SQL_CALC_FOUND_ROWS 
       CONCAT( a.first_name, ' ', a.last_name), 
       p.title,
       CONCAT( i.first_name, ' ', i.last_name),
      (SELECT score FROM applicant_scores s, applicants a WHERE s.applicant_id = a.id AND s.score_type = 'Interview 1') as score_1, 
      (SELECT score FROM applicant_scores s, applicants a WHERE s.applicant_id = a.id AND s.score_type = 'Interview 2') as score_2, 
      (SELECT score FROM applicant_scores s, applicants a WHERE s.applicant_id = a.id AND s.score_type = 'Demonstration') as score_3, 
      (SELECT DATE_FORMAT(datetime_recorded, '%m-%d-%Y') FROM applicant_scores s, applicants a WHERE s.applicant_id = a.id) as interview_date
 FROM applicants a, positions p, interviewers i, applicant_scores s
 WHERE s.applicant_id = a.id AND i.id = s.interviewer_id
 GROUP BY i.id 
```

这是用于提供 DataTables 的服务器端 ajax 代码...这是有关如何为 DataTables 创建服务器端脚本的信息 - [http://www.datatables.net/release-datatables/examples/data_sources/server_side。 html](http://www.datatables.net/release-datatables/examples/data_sources/server_side.html)

```
<?php
    /* Database connection information */
    $gaSql['user']       = "";
    $gaSql['password']   = "";
    $gaSql['db']         = "";
    $gaSql['server']     = "";

    $q1="'";
    $q2='"';

    $name = "CONCAT( ".$q2."<input type='hidden' id='name' value='".$q2.", LOWER(a.last_name), ' ', LOWER(a.first_name), ".$q2."'><input type='hidden' id='applicant_id' value='".$q2.", a.id, ".$q2."'><a href='applicant_details.php?id=".$q2.", a.id, ".$q2."'><img src='img/search.png' border='0'></a> &nbsp;".$q2.", a.last_name, ', ', a.first_name )";

    $interviewer = "CONCAT( ".$q2."<input type='hidden' id='name' value='".$q2.", LOWER(u.lastname), ' ', LOWER(u.firstname), ".$q2."'><input type='hidden' id='interviewer_id' value='".$q2.", i.id, ".$q2."'><a href='interviewer_details.php?id=".$q2.", i.id, ".$q2."'><img src='img/search.png' border='0'></a> &nbsp;".$q2.", u.lastname, ', ', u.firstname )";

    $int_1_score = "(SELECT score FROM applicant_scores s, applicants a WHERE s.applicant_id = a.id AND s.score_type = 'Interview 1' AND s.interviewer_id = i.id) as score_1";
    $int_2_score = "(SELECT score FROM applicant_scores s, applicants a WHERE s.applicant_id = a.id AND s.score_type = 'Interview 2' AND s.interviewer_id = i.id) as score_2";
    $demo_score = "(SELECT score FROM applicant_scores s, applicants a WHERE s.applicant_id = a.id AND s.score_type = 'Demonstration' AND s.interviewer_id = i.id) as score_3";

    $interview_date = "(SELECT DATE_FORMAT(datetime_recorded, '%m-%d-%Y') FROM applicant_scores s, applicants a WHERE s.applicant_id = a.id) as interview_date";

    $aColumns = array($name, 'p.title', $interviewer, $int_1_score, $int_2_score, $demo_score, $interview_date);

    /* Indexed column (used for fast and accurate table cardinality) */
    $sIndexColumn = "id";
    $sIndexTable = "formtemplates";

    /* DB table to use */
    $sTable = "applicants a, positions p, interviewers i, applicant_scores s, users u";

    $sWhere = " WHERE s.applicant_id = a.id AND i.id = s.interviewer_id AND u.id = i.user_id";

    $sGroupBy = " GROUP BY i.id";

    /* 
     * MySQL connection
     */
    $gaSql['link'] =  mysql_pconnect( $gaSql['server'], $gaSql['user'], $gaSql['password']  ) or
        die( 'Could not open connection to server' );

    mysql_select_db( $gaSql['db'], $gaSql['link'] ) or 
        die( 'Could not select database '. $gaSql['db'] );

    /* 
     * Paging
     */
    $sLimit = "";
    if ( isset( $_GET['iDisplayStart'] ) && $_GET['iDisplayLength'] != '-1' )
    {
        $sLimit = "LIMIT ".mysql_real_escape_string( $_GET['iDisplayStart'] ).", ".
            mysql_real_escape_string( $_GET['iDisplayLength'] );
    }

    /*
     * Ordering
     */
    if ( isset( $_GET['iSortCol_0'] ) )
    {
        $sOrder = " ORDER BY  ";
        for ( $i=0 ; $i<intval( $_GET['iSortingCols'] ) ; $i++ )
        {
            if ( $_GET[ 'bSortable_'.intval($_GET['iSortCol_'.$i]) ] == "true" )
            {
                if(stripos($aColumns[ intval( $_GET['iSortCol_'.$i] ) ], "c.name", 1) >= 1){
                    $sOrder .= "c.name ".mysql_real_escape_string( $_GET['sSortDir_'.$i] ).", ";
                }elseif(stripos($aColumns[ intval( $_GET['iSortCol_'.$i] ) ], "t.firstName", 1) >= 1){
                    $sOrder .= "t.firstName ".mysql_real_escape_string( $_GET['sSortDir_'.$i] ).", ";
                }elseif(stripos($aColumns[ intval( $_GET['iSortCol_'.$i] ) ], "d.shortName", 1) >= 1){
                    $sOrder .= "d.shortName ".mysql_real_escape_string( $_GET['sSortDir_'.$i] ).", ";
                }else{
                    $sOrder .= $aColumns[ intval( $_GET['iSortCol_'.$i] ) ]."
                    ".mysql_real_escape_string( $_GET['sSortDir_'.$i] ) .", ";
                }
            }
        }

        $sOrder = substr_replace( $sOrder, "", -2 );
        if ( $sOrder == "ORDER BY" )
        {
            $sOrder = "";
        }
    }

    /* 
     * Filtering
     * NOTE this does not match the built-in DataTables filtering which does it
     * word by word on any field. It's possible to do here, but concerned about efficiency
     * on very large tables, and MySQL's regex functionality is very limited
     */

    //define columns to filter on
    $aFcolumns = array( 'u.username', 'u.firstname', 'u.lastname', "REPLACE (g.status, 'OUT_FOR_SIGNATURE', 'WAITING')");

    if ( $_GET['sSearch'] != "" )
    {
        //$sWhere .= "WHERE (";
        $sWhere .= " AND (";
        for ( $i=0 ; $i<count($aFcolumns) ; $i++ )
        {
            $sWhere .= $aFcolumns[$i]." LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR ";
        }
        $sWhere = substr_replace( $sWhere, "", -3 );
        $sWhere .= ')';
    }

    /* Individual column filtering */
    for ( $i=0 ; $i<count($aFcolumns) ; $i++ )
    {
        if ( $_GET['bSearchable_'.$i] == "true" && $_GET['sSearch_'.$i] != '' )
        {
            if ( $sWhere == "" )
            {
                $sWhere = "WHERE ";
            }
            else
            {
                $sWhere .= " AND ";
            }
            $sWhere .= $aFcolumns[$i]." LIKE '%".mysql_real_escape_string($_GET['sSearch_'.$i])."%' ";
        }
    }

    /*
     * SQL queries
     * Get data to display
     */
    $sQuery = "
        SELECT SQL_CALC_FOUND_ROWS ".str_replace(" , ", " ", implode(", ", $aColumns))."
         FROM   $sTable
        $sWhere
        $sGroupBy       
        $sOrder 
        $sLimit
    ";

    //echo $sQuery;  die();  //for firebug debugging

    $rResult = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());

    /* Data set length after filtering */
    $sQuery = "
        SELECT FOUND_ROWS()
    ";
    $rResultFilterTotal = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    $aResultFilterTotal = mysql_fetch_array($rResultFilterTotal);
    $iFilteredTotal = $aResultFilterTotal[0];

    /* Total data set length */
    $sQuery = "
        SELECT COUNT(".$sIndexColumn.")
        FROM   $sIndexTable
    ";
    $rResultTotal = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    $aResultTotal = mysql_fetch_array($rResultTotal);
    $iTotal = $aResultTotal[0];

    /*
     * Output
     */
    $output = array(
        "sEcho" => intval($_GET['sEcho']),
        "iTotalRecords" => $iTotal,
        "iTotalDisplayRecords" => $iFilteredTotal,
        "aaData" => array()
    );

    while ( $aRow = mysql_fetch_array( $rResult ) )
    {
        $row = array();
        for ( $i=0 ; $i<count($aColumns) ; $i++ )
        {
            if ( $aColumns[$i] != ' ' )
            {
                /* General output */
                $row[] = $aRow[$i];
            }
        }

        //add another row for buttons
        //$row[] = "<div style='float:right;'><span style='padding-right:2px;'><a href=''><img src='global_img\user_info.png' border='0'></a></span><span style='padding-right:2px;'><a href=''><img src='global_img\user_edit.png' border='0'></a></span><span style='padding-right:0px;'><a href=''><img src='global_img\user_delete.png' border='0'></a></span></div>";

        $output['aaData'][] = $row;
    }

    echo json_encode( $output );
?> 
```

我修改了服务器端脚本以尝试使用 bluefeet 提供的解决方案，以下是生成的查询：

```
 SELECT SQL_CALC_FOUND_ROWS concat(a.first_name, ' ', a.last_name), p.title, CONCAT(i1.first_name, ' ', i1.last_name), max(case when ac.score_type='Interview 1' then ac.score else '' end), max(case when ac.score_type='Interview 2' then ac.score else '' end), max(case when ac.score_type='Demonstration' then ac.score else '' end), DATE_FORMAT(ac.datetime_recorded, '%m-%d-%Y')
         FROM   applicants a
         inner join applicant_positions ap on a.id = ap.applicant_id inner join positions p on ap.position_id = p.id inner join applicant_scores ac on a.id = ac.applicant_id inner join interviewers i1 on ac.interviewer_id = i1.id 
         GROUP BY concat(a.first_name, ' ', a.last_name), p.title, CONCAT(i1.first_name, ' ', i1.last_name), DATE_FORMAT(ac.datetime_recorded, '%m-%d-%Y')      
         ORDER BY  concat(a.first_name, ' ', a.last_name)
                    asc 
        LIMIT 0, 500 
```

这给了我一个空的结果集。帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T16:29:32.030

你肯定在正确的轨道上得到结果。

您当前在查询中缺少一些连接。您需要加入`applicants`到`positions`使用`applicant_positions`表中。您还可以向`applicant_scores`表中添加一个连接，这将允许您使用带有 a 的聚合函数`CASE`来获取包含采访/演示分数的列：

```
select 
  concat(a.first_name, ' ', a.last_name) ApplicantName,
  p.title Position,
  CONCAT(i1.first_name, ' ', i1.last_name) Interviewer,
  max(case when ac.score_type='Interview 1' then ac.score else '' end) Interview1Score,
  max(case when ac.score_type='Interview 2' then ac.score else '' end) Interview2Score,
  max(case when ac.score_type='Demonstration' then ac.score else '' end) DemoScore,
  DATE_FORMAT(ac.datetime_recorded, '%m-%d-%Y') InterviewDate
from applicants a
inner join applicant_positions ap
  on a.id = ap.applicant_id
inner join positions p
  on ap.position_id = p.id
inner join applicant_scores ac
  on a.id = ac.applicant_id
inner join interviewers i1
  on ac.interviewer_id = i1.id
group by concat(a.first_name, ' ', a.last_name),
  p.title,
  CONCAT(i1.first_name, ' ', i1.last_name),
  DATE_FORMAT(ac.datetime_recorded, '%m-%d-%Y'); 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/9fe06/17)。这给出了结果：

```
| APPLICANTNAME |                  POSITION |     INTERVIEWER | INTERVIEW1SCORE | INTERVIEW2SCORE | DEMOSCORE | INTERVIEWDATE |
-------------------------------------------------------------------------------------------------------------------------------
|      Jane Doe | Advanced mySQL Programmer | Fred Flintstone |              79 |              92 |           |    04-23-2013 |
|      Jane Doe | Advanced mySQL Programmer |     Santa Claus |              86 |                 |           |    04-23-2013 |
|      John Doe | Advanced mySQL Programmer | Fred Flintstone |              70 |              77 |           |    04-23-2013 |
|      John Doe | Advanced mySQL Programmer |     Santa Claus |              80 |              85 |        76 |    04-23-2013 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:27:50.243

```
SELECT  CONCAT(b.first_name, ' ', b.last_Name) Applicant_Name,
        CONCAT(c.first_name, ' ', c.last_Name) Interviewer_Name,
        e.Title,
        MAX(CASE WHEN a.score_type = 'Interview 1' THEN a.score END) `Interview 1 Score`,
        MAX(CASE WHEN a.score_type = 'Interview 2' THEN a.score END) `Interview 2 Score`,
        MAX(CASE WHEN a.score_type = 'Demonstration' THEN a.score END) `Demonstration Score`,
        MAX(DATE(a.datetime_recorded)) `Interview Date`
FROM    applicant_scores a
        INNER JOIN applicants b
            ON a.applicant_ID = b.ID
        INNER JOIN interviewer c
            ON a.interviewer_ID = c.id
        INNER JOIN applicant_positions d
            ON a.applicant_ID = d.applicant_ID
        INNER JOIN positions e
            ON d.position_ID = e.ID
GROUP   BY  CONCAT(b.first_name, ' ', b.last_Name),
            CONCAT(c.first_name, ' ', c.last_Name),
            e.Title 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/da51f/3)

# javascript - 从 JavaScript 中的对象数组中获取对象

> ID：16174343
> 
> 赞同：0
> 
> 时间：2013-04-23T16:17:45.913
> 
> 标签：javascript, arrays

抱歉，我觉得这是一个愚蠢的问题，我已经搜索了很多，但找不到答案。

我在 JavaScript 中有一个数组，我正在插入一堆元素。问题是我无法将元素的值取回，我想我得到了实际数组的属性。以下是我正在做的以及我正在尝试做的事情。在此先感谢您的帮助。这不是完整的遍历方法，它实际上确实经历了很多次。当我以前只有一个关联数组 items[a] 时，它工作得很好。

```
var element = { html: "", group: "" };
var array = [];

function traverse(o) {
    for (var key in o) {
        element.html = "<li class='item'>" + key + " : </li>";
        element.group = b;
        array.push(element);
    }
} 
```

我想从每个元素打印 html，问题是我每次只从第一个元素获取 .html。

```
function printElements() {
    for (item in array) {
        var element = array.pop();
        console.log(element.html);
    }
} 
```

我也试过。

```
function printElements() {
    for (item in array) {
        console.log(array.html);
    }
} 
```

我想保持数组完整，我不想弹出元素，我只想打印它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:22:49.410

主要问题不是将数据从数组中取出，它从一开始就永远不会进入数组。

数组中没有一堆元素，只有一个元素可以反复更改并添加到数组中。当您将它放入数组时，它不会被复制，它只是对放置在数组中的元素的引用。您最终会得到一个包含对同一单个元素的引用的数组。

填充时为循环中的每次迭代创建一个新元素：

```
for (var key in o) {
  var element = {};
  element.html = "<li class='item'>" + key + " : </li>";
  element.group = b;
  array.push(element);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:19:52.673

改用简单的 for 循环：

```
for (var i = 0; i < array.length; i++) {
    var item = array[i];
    // do stuff
} 
```

在 JavaScript 中的数组上使用更好的 for 循环语法是不可取的，因为它们将遍历数组中的*所有*键/值对，而不仅仅是数组数字键。这是因为数组也是对象，而 for...in 循环语法不区分它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:20:24.183

您没有使用迭代对象，而是使用数组...更改此：

```
function printElements() {
    for (item in array) {
        console.log(array.html);
    }
} 
```

对此：

```
function printElements() {
    for (item in array) {
        console.log(array[item].html);
    }
} 
```

[jsfiddle](http://jsfiddle.net/Eeuej/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T16:43:54.033

这样做：

```
var array = [];

function traverse(o) {
    for (var key in o) {
        var b = 'b'; // if that is what you have ment
        var element = {  html : "<li class='item'>" + key + " : </li>", group : b};
        array.push(element);
    }
}

function printElements() {
    for (var item=0; item<array.length; item++) {
        console.log(array[item].html);
    }
} 
```

那是因为在数组的情况下使用 each 是不安全的，你应该为每个数组元素都有新的对象。确保不要在数组元素上使用 delete 。

# maven - 引用 JDK 编译器版本的所有 Maven 构造是什么？

> ID：16174345
> 
> 赞同：1
> 
> 时间：2013-04-23T16:17:48.247
> 
> 标签：maven, java

我为当前使用 JDK4 和 JDK5 的 Maven 项目计划了大规模的 Java 6 迁移。

在这样做时，我想尽可能多地编写脚本。我想要编写脚本的一件事是将所有对 JDK4 或 JDK5 的 Maven 引用替换为 JDK6。

问题是，Maven 文件可以通过哪些方式引用 JDK？

以下是我所知道的，列为 XPath 的：

1.  `//plugin/artifactId[.='maven-compiler-plugin']`
2.  `//maven.compiler.source`
3.  `//maven.compiler.target` 编辑：找到另一个
4.  `/project/profiles/profile/activation/jdk` 编辑：用户添加了一个
5.  具有`aspectj-maven-plugin`源和目标配置。

我有什么遗漏吗？

# wolfram-mathematica - Mathematica 自定义符号/禁用预定义函数？

> ID：16174347
> 
> 赞同：1
> 
> 时间：2013-04-23T16:17:52.883
> 
> 标签：wolfram-mathematica, notation

我找不到如何在mathematica 中使用我想要的任何变量名。（我已经搜索了我可以搜索的地方，但我想不出要搜索的正确术语）

例如，我想将我的变量之一命名为 {pi}'（{pi} 我的意思是希腊语 pi，只是不能在此处输入）。但是，也有问题。首先，{pi} 已经预定义为等于 3.14 的常数。其次，素数 (') 符号预定义为导数。因此，{pi}' 默认值为 0&。

另一个例子是，如果我想用指数中的“0”来命名我的变量。但是，我不希望mathematica 将其理解为指数，而只是将其理解为名称。

如果我可以停用 ' 被解释为导数，或者上标被解释为指数，那会很好。但我更喜欢一些函数，它可以让我将任何符号集合定义为变量。

有人可以帮忙吗？

# c# - 方法“Where”不能跟随方法“Select”或不受支持

> ID：16174351
> 
> 赞同：3
> 
> 时间：2013-04-23T16:18:00.670
> 
> 标签：c#, linq, dynamics-crm-2011, automapper, iqueryable

为什么我得到：

> 方法“Where”不能跟随方法“Select”或不受支持。尝试根据支持的方法编写查询，或者在调用不受支持的方法之前调用“AsEnumerable”或“ToList”方法。

...当使用 WHERE 子句时，例如调用时：

```
XrmServiceContext.CreateQuery<Contact>().Project().To<Person>().Where(p => p.FirstName == "John").First(); 
```

?

这有效：

```
XrmServiceContext.CreateQuery<Contact>().Project().To<Person>().First(); 
```

这也有效：

```
XrmServiceContext.CreateQuery<Contact>().Where(p => p.FirstName == "John").First(); 
```

我正在使用[AutoMapper QueryableExtension](https://stackoverflow.com/a/12365931/1133338)。

附加信息：

*   我不想在 Where 子句之前调用 ToList() 。我知道它会这样工作。
*   `CreateQuery<TEntity>()`返回`IQueryable<TEntity>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:11:37.133

这是因为您使用的任何查询提供程序都无法处理此问题。一般情况下不是无效的；事实上，大多数查询提供程序*都*支持投影后的过滤。某些查询提供程序根本不如其他提供程序健壮，或者它们代表的查询模型不如 LINQ 接口灵活/强大（或两者兼而有之）。因此，从 C# 编译器的角度来看是正确的 LINQ 操作可能仍然无法被查询提供程序翻译，因此它所能做的最好的事情就是在运行时引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:13:30.423

为什么不直接移动投影之前的位置？这将导致执行过滤器和项目的单个查询：

```
XrmServiceContext.CreateQuery<Contact>().Where(p => p.FirstName == "John").Project().To<Person>().First(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:47:40.717

查看[AutoMapper 对 QueryableExtensions 的说明，](https://github.com/AutoMapper/AutoMapper/wiki/Queryable-Extensions)它有一个示例显示投影之前的 Where 子句。您需要重构代码以支持此模型，而不是将`Where`子句放在投影之后。

```
公共列表 GetLinesForOrder(int orderId)
{
  映射器.CreateMap()
    .ForMember(dto => dto.Item, conf => conf.MapFrom(ol => ol.Item.Name);

  使用 (var context = new orderEntities())
  {
    返回 context.OrderLines.Where(ol => ol.OrderId == orderId)
             .Project().To().ToList();
  }
}

```

鉴于 Dynamic CRM 的 LINQ 提供程序的限制，您不应期望 AutoMapper 一定会正确获取 LINQ 查询。

这种设计背后其实是有逻辑的。作为开发人员，您创建一个工作`Where`条款。然后让 AutoMapper`Project().To()`定义`select`语句。由于 CRM 的 LINQ 提供程序支持匿名类型，因此它应该可以正常工作。AutoMapper 中投影的目的是将每个类检索到的数据限制为仅投影到类所需的数据。它不打算`Where`根据投影到类来编写子句。

# iphone - 如何在针对 iOS 5 的项目中使用 PSTCollectionView？

> ID：16174354
> 
> 赞同：1
> 
> 时间：2013-04-23T16:18:07.983
> 
> 标签：iphone, ios, objective-c, pstcollectionview

在一个针对 iOS 5.1（最低）的项目上工作，我正在使用它[`PSTCollectionView`](https://github.com/steipete/PSTCollectionView)来创建一个非常简单的流布局视图。`PSTCollectionView`应该可以在 iOS 5.1 上运行，但`CollectionView`只能在 iOS 6.1 模拟器上运行。当我在 iOS 5.1 模拟器中运行它时，我可以看到 的背景颜色`CollectionView`，但没有单元格。

设置的代码`CollectionView`是：

```
-(void)loadCollectionView
{
    if (!_collectionView) {
        PSUICollectionViewFlowLayout *collectionViewFlowLayout = [[PSUICollectionViewFlowLayout alloc] init];

        [collectionViewFlowLayout setScrollDirection:UICollectionViewScrollDirectionVertical];
        [collectionViewFlowLayout setItemSize:CGSizeMake(256, 196)];
        [collectionViewFlowLayout setHeaderReferenceSize:CGSizeMake(500, 30)];
        [collectionViewFlowLayout setFooterReferenceSize:CGSizeMake(500, 50)];
        [collectionViewFlowLayout setMinimumInteritemSpacing:0];
        [collectionViewFlowLayout setMinimumLineSpacing:0];
        [collectionViewFlowLayout setSectionInset:UIEdgeInsetsMake(10, 0, 20, 0)];

        _collectionView = (PSTCollectionView*)[[PSUICollectionView alloc] initWithFrame:CGRectMake(0,0,self.view.frame.size.width,self.view.frame.size.height) collectionViewLayout:collectionViewFlowLayout];
        [_collectionView setDelegate:self];
        [_collectionView setDataSource:self];
        [_collectionView setAutoresizingMask:UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin];
        [_collectionView setBackgroundColor:BOOLSHELF_BACKGROUND_COLOR];
        [_collectionView registerClass:[BookshelfViewCell class] forCellWithReuseIdentifier:cellIdentifier];
    [self.view addSubview:_collectionView];
} 
```

}

是否需要任何额外的配置？

难道我做错了什么？

我正在使用 iOS 5.1 和 iOS 6.1 模拟器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:30:38.653

我在 iOS 5 上使用了 PSTCollectionView，尽管我使用了自定义布局而不是内置的流布局，因为我需要水平和垂直滚动。也许我的例子会帮助你。[https://github.com/neildavis/MyCollectionView](https://github.com/neildavis/MyCollectionView)

# github - GitHub 将无法识别任何更改的文件或新文件

> ID：16174357
> 
> 赞同：-1
> 
> 时间：2013-04-23T16:18:26.490
> 
> 标签：github

更新：解决方案是 github 以某种方式从我的遥控器中删除，所以我只是将其添加回来。谢谢大家的帮助。

我一直在研究 Ruby on Rails 教程中的 sample_app 应用程序，但我的数据库遇到了问题。我必须从 heroku 导入我的应用程序，现在它被称为 shielded-dawn-xxxx。我进行了更改并添加了新文件。Git 无法识别任何新文件或更改，当我尝试

git 推送

当它明显不同时，它说“一切都是一样的”。我试过了

触摸文件

但是有很多文件，当我尝试提交时它无论如何都不起作用。我尝试将名称重命名为 sample_app，但它仍然不允许我推送到 github。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:23:30.317

至少阅读[http://git-scm.com/book](http://git-scm.com/book)的前两章（推荐更多）。

当您 git push 并且“一切都一样”时，这意味着从您的最后一次本地提交与推送到服务器的最后一次提交匹配。我想你可能忘了承诺，试着`git status`告诉我们它说了什么？只是想知道更多，也与我们分享什么`git remote -v`节目。重命名应用程序不会影响 git，因为所有内容都存储在 .git 文件夹中。

# ios - 出队单元的表视图问题

> ID：16174358
> 
> 赞同：2
> 
> 时间：2013-04-23T16:18:29.837
> 
> 标签：ios, objective-c, uitableview

所以我无法在`UITableView`. 我确实相信这与重复使用细胞有关。我已经在网上和 SO 上进行了检查，但没有找到适合我的解决方案。任何帮助，将不胜感激。

我有一个由文本和图片填充的数组。然后我将信息显示在`tableView`. 如果我要使用静态大小的单元格，一切正常，但是文本的数量会发生变化，所以我也实现了该`heightForRowAtIndexPath`方法。这也有效，直到我一直向下滚动到底部。

之后，当我向上滚动时，所有单元格的高度都会发生变化，并且显示会变得混乱。一些文本被截断，图片被切掉，一些单元格只有文本的最后一部分。我真的认为这与重复使用细胞有关，但我不知道如何解决这个问题。下面是我的`cellForRowAtIndexPath`and代码`heightForRowAtIndexPath`。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

if ([[_theBigArray objectAtIndex:indexPath.row] isKindOfClass:[NSString class]])
{
    NSString *label = [_theBigArray objectAtIndex:indexPath.row];
    CGSize stringSize = [label sizeWithFont:[UIFont systemFontOfSize:15] constrainedToSize:CGSizeMake(320, 9999) lineBreakMode:NSLineBreakByWordWrapping];

    UITextView *textV = [[UITextView alloc] initWithFrame:CGRectMake(5, 5, 290, stringSize.height +50)];
    textV.font = [UIFont systemFontOfSize:15];
    textV.text = [_theBigArray objectAtIndex:indexPath.row];
    textV.textColor = [UIColor blackColor];
    textV.editable = NO;
    [cell.contentView addSubview:textV];
}
else if ([[_theBigArray objectAtIndex:indexPath.row] isKindOfClass:[UIImage class]])
{
    UIImageView *imageV = [[UIImageView alloc] initWithFrame:CGRectMake(5, 5, 290, 100)];
    imageV.contentMode = UIViewContentModeScaleAspectFit;
    imageV.image = [_theBigArray objectAtIndex:indexPath.row];
    [cell.contentView addSubview:imageV];
}

return cell;
[tableView reloadData];
} 
```

为了`heightForRowAtIndexPath`

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

int rowHeight = 0.0f;

if ([[_theBigArray objectAtIndex:indexPath.row] isKindOfClass:[NSString class]])
{    
    NSString *temp = [_theBigArray objectAtIndex:indexPath.row];
    CGSize size = [temp sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(320, 9999) lineBreakMode:NSLineBreakByWordWrapping];
    rowHeight = size.height+50;
}
else if ([[_theBigArray objectAtIndex:indexPath.row] isKindOfClass:[UIImage class]])
{
    rowHeight = 115.0f;
}

//NSLog(@"rowHeight is %i", rowHeight);

return rowHeight;
[tableView reloadData];
} 
```

我什至尝试制作两个不同的单元格并分别调用它们，但同样的事情发生了。我仍然使用相同的`heightForRowAtIndexPath`方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

UITableViewCell *newCell = [[UITableViewCell alloc] init];

if ([[_theBigArray objectAtIndex:indexPath.row] isKindOfClass:[NSString class]])
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }

    NSString *label = [_theBigArray objectAtIndex:indexPath.row];
    CGSize stringSize = [label sizeWithFont:[UIFont systemFontOfSize:15] constrainedToSize:CGSizeMake(320, 9999) lineBreakMode:NSLineBreakByWordWrapping];
    UITextView *textV = [[UITextView alloc] initWithFrame:CGRectMake(5, 5, 290, stringSize.height +50)];
    textV.font = [UIFont systemFontOfSize:15];
    textV.text = [_theBigArray objectAtIndex:indexPath.row];
    textV.textColor = [UIColor blackColor];
    textV.editable = NO;
    [cell.contentView addSubview:textV];

    newCell = cell;
}
else if ([[_theBigArray objectAtIndex:indexPath.row] isKindOfClass:[UIImage class]])
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"PictureCell"];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"PictureCell"];
    }

    UIImageView *imageV = [[UIImageView alloc] initWithFrame:CGRectMake(5, 5, 290, 100)];
    imageV.contentMode = UIViewContentModeScaleAspectFit;
    imageV.image = [_theBigArray objectAtIndex:indexPath.row];
    [cell.contentView addSubview:imageV];

    newCell = cell;

}

return newCell;
[tableView reloadData];
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:32:55.050

主要问题是您每次滚动时都会向单元格添加子视图，但是当一个单元格被重用时，它已经添加了这些子视图。（也就是说，当一个单元格被重用时，它已经有一个 UITextView 或 UIImageView 取决于重用标识符。）

您需要先检查这些子视图是否存在；这通常通过使用[-[UIView viewWithTag]](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/viewWithTag:)方法或通过子类化 UITableViewCell 并将每个视图分配为属性来完成。

（您可以查看 SO 问题[How to get other control value from UITableViewCell?](https://stackoverflow.com/questions/6000350/how-to-get-other-control-value-from-uitableviewcell)了解如何使用 viewWithTag。在您对开箱即用的实现更加熟悉之前，我会避免继承 UITableViewCell。）

另外，这行代码：

```
UITableViewCell *newCell = [[UITableViewCell alloc] init]; 
```

是一个糟糕的主意，因为您正在创建一个新的 UITableViewCell 而没有检查是否可以先重用一个。这违背了重用单元格的全部目的，即快速滚动性能。相反，只需声明它而不初始化它：

```
UITableViewCell *newCell; 
```

此外，在 heightForRowAtIndexPath 中，您是

*   声明`rowHeight`为`int`（应该是`CGFloat`）
*   在方法返回后尝试调用`reloadData`（这永远不会发生，但你永远不应该尝试从此方法调用 reloadData）

# windows - 指针偏移量有什么好处？

> ID：16174362
> 
> 赞同：1
> 
> 时间：2013-04-23T16:18:40.120
> 
> 标签：windows, memory-management, reverse-engineering, memory-editing

我正在使用称为作弊引擎的内存编辑应用程序。我将作弊引擎附加到游戏中。在我的游戏中，我有一个称为 HP 的 32 位整数。HP 存储在内存地址 A。如果我重新启动游戏，HP 将存储在新的内存地址 B。似乎使用 Cheat Engine，我可以进行指针扫描并找到一个静态内存地址 C，它指向另一个内存地址及其附带的偏移量 D 和偏移量，因此 [D + offset] 在该会话期间始终存储 HP 的内存地址。因此，如果我取消引用 [D + offset]，我总是会得到存储 HP 的内存地址。

这是一个图表：

A 或 B --> 生命值

D + 偏移 --> A 或 B

C --> D

使用偏移量有什么好处？为什么 C 不能直接指向 A 或 B？我熟悉在 C 语言中处理数组时使用偏移量是有益的。这是否意味着每当我看到指针的偏移量时，指针都指向数组中的第一个元素，而偏移量指的是数组中的一个元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:06:57.010

如果您了解 C 编程语言，应该很容易想象和理解。您用 C 编写的任何内容都非常接近编译程序时生成的实际机器代码。

C 中对象的抽象通常使用“结构”来完成。

在您的示例中，想象一个非常简单的“播放器”结构：

```
struct Player {
    int id;
    float xposition;
    float yposition;
    int health;
    int maxhealth;
}; 
```

如果要创建这样的对象，可以执行以下操作：

```
struct Player *myPlayer = malloc(sizeof(struct Player)); 
```

高级语言中看起来漂亮的结构化事物实际上只是已编译程序中的一块内存。

要访问例如“健康”，您`myPlayer->health;`在 C 中执行。但是现在，在一个不知道美丽名称并且只有一块内存可以使用的编译程序中，这看起来如何？

它必须使用基指针的偏移量。在上面的示例中（假设 Windows 操作系统和任何默认配置的健全编译器），一些伪机器代码中的访问将如下所示：

```
move myHealth, read4bytes[myPlayer + 12] 
```

如果对程序进行逆向工程，则无法从偏移访问中判断内存块是结构、数组还是类（来自 C++ 代码）或完全不同的东西。

# xmpp - 用户可以使用多少资源登录到符合标准的 XMPP 服务器？

> ID：16174365
> 
> 赞同：2
> 
> 时间：2013-04-23T16:18:51.717
> 
> 标签：xmpp

简单的问题：XMPP标准中对使用相同裸JID但不同资源的并发登录数量是否有任何限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:29:02.497

无限制，RFC 中没有限制

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T17:13:46.547

它是实现定义的，在 RFC 中没有设置最大值。但是，[RFC 6120，第 7.6.2.1 节](https://www.rfc-editor.org/rfc/rfc6120#section-7.6.2.1)说：

> 如果帐户已达到允许同时连接的资源数量的限制，则服务器必须返回一个节错误（第[8.3.3.18](https://www.rfc-editor.org/rfc/rfc6120#section-8.3.3.18)节）。

```
S: <iq id='tn281v37' type='error'>
     <error type='wait'>
       <resource-constraint
         xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
     </error>
   </iq> 
```

*因此，没有*限制是不正确的，只是每个服务器安装可以对限制是什么做出不同的决定。

# c# - 验证动态创建的富文本框

> ID：16174374
> 
> 赞同：0
> 
> 时间：2013-04-23T16:19:26.330
> 
> 标签：c#, wpf, richtextbox, validating

我需要验证`RichTextBox`我在按下按钮时动态创建的 x 数量的 es。在将内容复制到剪贴板并调用下一个表单之前，我需要确保没有一个 RTB 为空。

我尝试添加一个布尔变量，但如果中间有一个空的 RTB，这只会被跳过。

这是我拥有的当前代码。任何帮助是极大的赞赏。

```
List<RichTextBox> rtbs = scrlPanel.Children.OfType<RichTextBox>().ToList();
List<TextBlock> texts = scrlPanel.Children.OfType<TextBlock>().ToList();
StringBuilder raTemplate = new StringBuilder();
//bool flag = true; // True as in It is empty

foreach (RichTextBox rtb in scrlPanel.Children.OfType<RichTextBox>())
{
    TextRange txtRange = new TextRange(rtb.Document.ContentStart, rtb.Document.ContentEnd);
    if (txtRange.Text.Trim() == string.Empty)
    {
        MessageBox.Show("Empty fields.");
        break;
    }
    else
    {
        foreach (TextBlock txtb in texts)
        {
            //RichTextBox rtb = rtbs[texts.IndexOf(txtb)];
            //TextRange txtRange = new TextRange(rtb.Document.ContentStart, rtb.Document.ContentEnd);
            raTemplate.Append(txtb.Text + " " + "::" + Environment.NewLine + txtRange.Text.Trim() + Environment.NewLine);
        }
        Clipboard.SetText(raTemplate.ToString());
        RA_Email ra = new RA_Email();
        ra.raEmail();
        //flag = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:42:55.187

复制方面可以移到循环之外，以确保它仅在所有`RichTextBoxes`为空时才开始。

```
bool doCopy = true;
foreach (RichTextBox rtb in scrlPanel.Children.OfType<RichTextBox>())
{
     TextRange txtRange = new TextRange(rtb.Document.ContentStart, rtb.Document.ContentEnd);
     if (txtRange.Text.Trim() == string.Empty)
     {
         MessageBox.Show("Empty fields.");
         doCopy = false;
         break;
     }
}

if(doCopy)
{
     foreach (TextBlock txtb in texts)
     {
         //RichTextBox rtb = rtbs[texts.IndexOf(txtb)];
         //TextRange txtRange = new TextRange(rtb.Document.ContentStart, rtb.Document.ContentEnd);
         raTemplate.Append(txtb.Text + " " + "::" + Environment.NewLine + txtRange.Text.Trim() + Environment.NewLine);
     }

     Clipboard.SetText(raTemplate.ToString());
     RA_Email ra = new RA_Email();
     ra.raEmail();
} 
```

# websphere - WASLTPARealm 身份验证器问题

> ID：16174376
> 
> 赞同：0
> 
> 时间：2013-04-23T16:19:28.780
> 
> 标签：websphere, ibm-mobilefirst, application-server, websphere-8

我在 WAS 8.0.0.5 上安装了 Worklight 5.0.6。

我已通过编辑 authenticationConfig.xml 并通过编辑 worklight.properties 添加 Worklight Console 用户名和密码来启用 Worklight Console 保护

现在我遇到了 WASLTPARealm 身份验证器的问题：控制台正在使用 WASLTPARealm 进行身份验证，并将凭据发布到 j_security_check

你能帮我解决这个问题吗？提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:48:44.493

在此处查看文档以设置 WAS 身份验证：[http ://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/08_06_WebSphere_LTPA_based_authentication.pdf](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/08_06_WebSphere_LTPA_based_authentication.pdf)

# c++ - 时间：2019-01-01 标签：c++c-strings,strncat,strncpy

> ID：16174383
> 
> 赞同：0
> 
> 时间：2013-04-23T16:19:49.690
> 
> 标签：c++, while-loop, strcpy, strncpy

这个程序应该输入某人的名字并像“Last, first middle”一样输出。这些名称应该存储在 3 个不同的数组中，它们是最后的全名的第四个数组。我还应该使用 strncpy 和 strncat 来构建第四个数组。我的问题是我不知道在这种情况下 strncpy 的用途以及如何使用它。我可以让程序说“第一个中间最后一个”，但不是正确的输出。我遇到的另一个问题是while循环应该允许用户说'q'或'Q'并退出程序但它不这样做

```
#include <iomanip>
#include <iostream>
#include <cctype>
using namespace std; 

int main()
{
char replay; //To hold Q for quit

const int SIZE = 51;
char firstName[SIZE]; // To hole first name
char middleName[SIZE]; // To hold middle name
char lastName[SIZE]; // To hold last name
char fullName[SIZE]; //To hold the full name
int count = 0;
int maxChars1;
int maxChars2;

cout << "Enter Q to quit or enter your first name of no more than " << (SIZE - 1)
     << " letters: ";
cin.getline(firstName, SIZE);

while(firstName[SIZE] != 'Q' || firstName[SIZE] != 'q')
{
cout << "\nEnter your middle name of no more than " << (SIZE - 1)
     << " letters: ";
cin.getline(middleName, SIZE);

cout << "\nEnter your last name of no more than " << (SIZE - 1)
     << " letters: ";
cin.getline(lastName, SIZE);

maxChars1 = sizeof(firstName) - (strlen(firstName) + 1);
strncat(firstName, middleName, maxChars1);

cout << firstName << endl;

maxChars2 = sizeof(lastName) - 1;
strncpy(firstName, lastName, maxChars2);
lastName[maxChars2] = '\0';

cout << lastName << endl;
    }

system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:17:11.130

由于以下几个原因，您的 while 循环不起作用：

*   您实际上是在查看`firstName`数组末尾的一个 ( `firstName[SIZE]`) 而不是第一个字符 ( `firstName[0]`)。
*   您没有检查以确保`firstName`只有**一个**字符`q`或`Q`.
*   您只在循环之前询问一次名字，而不是每个循环。

你的电话`strncpy`看起来不对。如所写，您将取姓氏并将其复制到`firstName`，从而破坏您刚刚在此处连接在一起的名字和中间名。就像@steve-jessop 所说，将全名组装在`fullName`.

您可能*应该*使用`strncpy`并且`strncat`因为这是一个人为的示例/练习，其中采用全名的缓冲区的大小受到限制，因此某些名称组合不适合，需要截断。

# java - 应用为全局变量

> ID：16174392
> 
> 赞同：0
> 
> 时间：2013-04-23T16:20:34.293
> 
> 标签：java, android

我搜索了存储将与所有活动共享的全局变量的方法。

我找到了这个：

[如何在Android中声明全局变量？](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)

我创建了一个扩展应用程序的类，并在清单文件中声明了这个应用程序。

但是我有一个问题：

我不能在清单文件中标记多个应用程序...

因此，如果我想申报两个申请，我该怎么办？

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.sa"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.CAMERA"/>

    <permission
    android:name="com.example.sa.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <!-- The following two permissions are not required to use
     Google Maps Android API v2, but are recommended. -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
        <uses-permission android:name="com.example.sa.permission.MAPS_RECEIVE"/>
        <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
         android:debuggable="true"
        android:name=".FriendPickerApplication">

        <activity
            android:name="com.example.sa.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

              </activity>

         <!--  Entry for RegisterActivity.class -->
        <activity android:name=".RegisterActivity"
                  android:label="Register New Account"></activity>
        <meta-data android:value="@string/app_id" android:name="com.facebook.sdk.ApplicationId"/>
        <activity android:label="@string/app_name" android:name="com.facebook.LoginActivity"></activity>
        <activity android:name=".ProfileActivity" android:label="Profile page"></activity>

        <meta-data
              android:name="com.google.android.maps.v2.API_KEY"
              android:value="xxxx"/>

        <activity android:name="DashBoardActivity"></activity>
        <activity android:name="AllItemsActivity"></activity>
        <activity android:name="itemCategory"></activity>
        <activity android:name="ItemMapActivity"></activity>

    </application>

</manifest> 
```

而且我还想定义一个扩展将存储共享变量的应用程序的类：

```
<application android:name="MyApp" 
   android:icon="@drawable/icon" 
   android:label="@string/app_name2"></application> 
```

这是课程：

```
class MyApp extends Application {

  private String myState;

  public String getState(){
    return myState;
  }
  public void setState(String s){
    myState = s;
  }
}

class Blah extends Activity {

  @Override
  public void onCreate(Bundle b){
    ...
    MyApp appState = ((MyApp)getApplicationContext());
    String state = appState.getState();
    ...
  }
} 
```

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:23:15.933

您不能申报多个申请。

您的应用程序中可以有更多变量，但应用程序是一个单例类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:23:24.400

要定义全局变量，您可以使用 static 关键字：

```
public static String myState; 
```

# c++ - 我在哪里可以了解 C++ 实例关键字？

> ID：16174393
> 
> 赞同：1
> 
> 时间：2013-04-23T16:20:37.063
> 
> 标签：c++, instance, keyword

在我维护的一个程序中，我找到了一个结尾带有关键字 instance 的类。像这样：

```
class SomeClass{ 
public:
} instance; 
```

该程序是一个 DLL，而这个“SomeClass”是加载 DLL 时创建的第一个对象。实例关键字从何而来？它是gcc特有的吗？我在哪里可以阅读更多关于它的信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T16:44:31.083

结构或类定义的语法是这样的：

( `class`| `struct`) [类标签]`{` *成员* `}` *实例* `;`

我使用`[`and`]`表示可选项目，斜体表示任意项目列表。

换句话说，您可以只定义类型本身，例如：

```
 class xxx { /* ... */ }; 
```

...或者您可以只定义一个实例，例如：

```
 class { /* ... */ } an_instance; 
```

...或者您可以同时执行以下操作：

```
 class xxx { /* ... */ } another_instance; 
```

...或者您可以定义多个实例，如果您愿意：

```
 class xxx { /* ... */ } instance1, instance2, instance3; 
```

后者不是关键字——它们只是普通变量。大多数想要完成相同事情的人可能会分别编写两者：

```
class SomeClass { 
   /* ... */
};

SomeClass instance; 
```

对于大多数实际目的，这与问题中的形式同义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T16:22:49.267

这个词`instance`不是关键字。您正在实例化一个`SomeClass`名为`instance`.

这是我从 Google 搜索中找到[的 C++ 关键字列表。](http://en.cppreference.com/w/cpp/keyword)

# c# - C# 中的 dllimport 来自

> ID：16174394
> 
> 赞同：0
> 
> 时间：2013-04-23T16:20:41.737
> 
> 标签：c#, c++

首先，我是 C# 新手。我正在使用vs2010。

我正在尝试在我的 C# 项目中包含一个 dll。我在关注[这个](http://msdn.microsoft.com/en-us/library/ms235636%28v=vs.80%29.aspx)。我制作了dll。我想在 C# 项目中使用 dllimport 包含这个 dll，但我得到 dll 不存在的错误。我尝试提供完整路径，或将 .dll 文件添加到当前项目，但仍然没有运气。

请帮忙。

代码：

```
[DllImport("MathFuncDll.dll")]
public extern static double Add(double a, double b);
double tt = Add(15, 10); 
```

错误：

```
System.Windows.Markup.XamlParseException was unhandled
  Message='The invocation of the constructor on type 'WpfApplication1.MainWindow' that matches the specified binding constraints threw an exception.' Line number '3' and line position '9'.
  Source=PresentationFramework
  LineNumber=3
  LinePosition=9
  StackTrace:
       at System.Windows.Markup.XamlReader.RewrapException(Exception e, IXamlLineInfo lineInfo, Uri baseUri)
       at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
       at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
       at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
       at System.Windows.Application.LoadBamlStreamWithSyncInfo(Stream stream, ParserContext pc)
       at System.Windows.Application.LoadComponent(Uri resourceLocator, Boolean bSkipJournaledProperties)
       at System.Windows.Application.DoStartup()
       at System.Windows.Application.<.ctor>b__1(Object unused)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.DispatcherOperation.InvokeImpl()
       at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
       at System.Threading.ExecutionContext.runTryCode(Object userData)
       at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Windows.Threading.DispatcherOperation.Invoke()
       at System.Windows.Threading.Dispatcher.ProcessQueue()
       at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
       at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
       at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
       at System.Windows.Threading.Dispatcher.Run()
       at System.Windows.Application.RunDispatcher(Object ignore)
       at System.Windows.Application.RunInternal(Window window)
       at System.Windows.Application.Run(Window window)
       at System.Windows.Application.Run()
       at WpfApplication1.App.Main() in E:\projects\development\vs_test\WpfApplication1\WpfApplication1\obj\x86\Debug\App.g.cs:line 0
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.DllNotFoundException
       Message=Unable to load DLL 'MathFuncDll.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E)
       Source=WpfApplication1
       TypeName=""
       StackTrace:
            at WpfApplication1.MainWindow.Add(Double a, Double b)
            at WpfApplication1.MainWindow..ctor() in E:\projects\development\vs_test\WpfApplication1\WpfApplication1\MainWindow.xaml.cs:line 31
       InnerException: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:30:09.497

该 DLL 可能需要一些不在路径上的其他 DLL。使用[Dependency Walker](http://www.dependencywalker.com/)进行检查。

您也可能在拥有 DLL 的文件夹上获得了某种权限，例如在这种[情况下](http://web.archive.org/web/20110628012649/http://www.stillhq.com/aus-dotnet/archives2/msg00033.html)描述。

如果您在开发机器以外的另一台机器上尝试它，您可能需要安装相应的 Microsoft Visual C++ Redistributable Package。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:23:41.233

将 DLL 作为链接添加到您的项目中，并确保“复制到输出目录”设置为“始终复制”或“如果更新则复制”。

如果这不起作用，请使用 Dependency Walker 找出您缺少哪些依赖项，然后对它们执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T14:30:03.977

愚蠢的愚蠢的我。

这是一个打字错误。虽然非常感谢依赖步行者。

这就是你学习的方式。

# android - 从外部 URL 获取视频缩略图

> ID：16174395
> 
> 赞同：2
> 
> 时间：2013-04-23T16:20:43.973
> 
> 标签：android, video-capture

我想知道在外部 URL 上获取视频缩略图的最佳做法是什么，即可以流式传输的 HTTP 视频。

我试过使用`ThumbnailUtils.createVideoThumbnail()`，它非常适用于本地视频，但不适用于网络上的视频。

我考虑过部分下载文件，然后看看是否有可能基于此获得缩略图，但我还没有尝试过。

有什么建议或想法吗？

# python - 溢出错误：long int 太大而无法在 python 中转换为浮点数

> ID：16174399
> 
> 赞同：41
> 
> 时间：2013-04-23T16:20:50.663
> 
> 标签：python, overflow, factorial

我试图在python中计算泊松分布，如下所示：

```
p = math.pow(3,idx)
depart = math.exp(-3) * p 
depart = depart / math.factorial(idx) 
```

idx 范围从 0

但我得到了`OverflowError: long int too large to convert to float`

我试图将离开转换为`float`但没有结果。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-23T16:29:25.333

阶乘变大*真的很快*：

```
>>> math.factorial(170)
7257415615307998967396728211129263114716991681296451376543577798900561843401706157852350749242617459511490991237838520776666022565442753025328900773207510902400430280058295603966612599658257104398558294257568966313439612262571094946806711205568880457193340212661452800000000000000000000000000000000000000000L 
```

注意`L`; 170 的阶乘仍然可以转换为浮点数：

```
>>> float(math.factorial(170))
7.257415615307999e+306 
```

但下一个阶乘太大：

```
>>> float(math.factorial(171))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: long int too large to convert to float 
```

您*可以*使用该[`decimal`模块](http://docs.python.org/2/library/decimal.html)；计算会更慢，但`Decimal()`该类可以处理这种大小的阶乘：

```
>>> from decimal import Decimal
>>> Decimal(math.factorial(171))
Decimal('1241018070217667823424840524103103992616605577501693185388951803611996075221691752992751978120487585576464959501670387052809889858690710767331242032218484364310473577889968548278290754541561964852153468318044293239598173696899657235903947616152278558180061176365108428800000000000000000000000000000000000000000') 
```

您必须在`Decimal()`整个过程中使用值：

```
from decimal import *

with localcontext() as ctx:
    ctx.prec = 32  # desired precision
    p = ctx.power(3, idx)
    depart = ctx.exp(-3) * p 
    depart /= math.factorial(idx) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T16:30:05.040

当`idx`变大时，`math.pow`和/或`math.factorial`将变得非常大并且无法转换为浮点值（`idx=1000`在我的 64 位机器上触发错误）。您不希望使用 math.pow 函数，因为它比内置`**`运算符更早溢出，因为它试图通过更早的浮点转换来保持更高的精度。此外，您可以将每个函数调用包装在一个`Decimal`对象中以获得更高的精度。

处理非常大的数字时，另一种方法是使用对数刻度。取每个值的对数（或计算每个值的对数版本）并在对结果取幂之前执行所有必需的操作。这允许您的值暂时离开浮动域空间，同时仍然准确计算位于浮动域内的最终答案。

```
3 ** idx  =>  math.log(3) * idx
math.exp(-3) * p  =>  -3 + math.log(p)
math.factorial(idx)  =>  sum(math.log(ii) for ii in range(1, idx + 1))
...
math.exp(result) 
```

这会一直保留在日志域中，直到最后，所以在遇到溢出问题之前，您的数字会变得非常非常大。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T16:25:53.687

尝试使用十进制库。它声称支持任意精度。
`from decimal import Decimal`

此外，您不需要使用`math.pow`. `pow`是内置的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T16:40:39.477

该`scipy`模块可以帮助您。

[scipy.misc.factorial](http://docs.scipy.org/doc/scipy/reference/generated/scipy.misc.factorial.html)是一个阶乘函数，可以使用伽玛函数逼近计算阶乘，并使用浮点返回结果。

```
import numpy
from scipy.misc import factorial

i = numpy.arange(10)
print(numpy.exp(-3) * 3**i / factorial(i)) 
```

给出：

```
[ 0.04978707  0.14936121  0.22404181  0.22404181  0.16803136  0.10081881
  0.05040941  0.02160403  0.00810151  0.0027005 ] 
```

还有一个[计算泊松分布的模块](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.poisson.html)。例如：

```
import numpy
from scipy.stats import poisson

i = numpy.arange(10)
p = poisson(3)
print(p.pmf(i)) 
```

给出：

```
[ 0.04978707  0.14936121  0.22404181  0.22404181  0.16803136  0.10081881
  0.05040941  0.02160403  0.00810151  0.0027005 ] 
```

# opentsdb - OpenTSDB 过滤标签排除特定标签

> ID：16174407
> 
> 赞同：1
> 
> 时间：2013-04-23T16:21:15.980
> 
> 标签：opentsdb

是否可以查询所有可能的值但从搜索中排除特定值？

例如`m=sum:rate:proc.stat.cpu{host=foo,type=*?!user}`，表示所有值，`type`但不包括`user`值。或类似的东西`m=sum:rate:proc.stat.cpu{host=foo,type=*, type=!user}`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-30T09:42:27.117

作为更新，现在使用**not_literal_or**过滤器在 OpenTSDB 版本 2.X 中支持此功能。你可以做`m=sum:rate:proc.stat.cpu{host=foo,type=not_literal_or(user)}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:19:34.970

不，从 OpenTSDB 1.1.0 开始，目前不支持此功能。没有根本原因不支持它，只是还没有实现。

# javascript - 我在“document.ready()”块之外执行这个安全吗？

> ID：16174410
> 
> 赞同：0
> 
> 时间：2013-04-23T16:21:16.543
> 
> 标签：javascript, html, dom

我可以安全地将这段代码从`document.ready()`块内移出吗？

```
var $userInfoNode = $('#userOptions');
CURR_USER_ID = $userInfoNode.attr('data-userId');
CURR_USER_NAME = $userInfoNode.text(); 
```

此代码放置在从 html 页面部分加载的外部 js 文件中，`head`并选择放置在 html 中的 html 元素`body`，以从那里提取数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:24:13.410

**简短的回答：**不，因为 JavaScript 文件放在标题中。

DOM（文档对象模型）需要包含`<div id="userOptions">`执行代码的时间。

要么将代码放在*之后*，`div`例如在关闭之前`</body>`。

或者您将代码放在`$(document).ready()`函数中，该函数在 DOM 完全加载后立即触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T16:27:21.950

> *   出 document.ready() 块。
> *   从 head 部分加载的外部 js 文件
> *   选择放置在 html 正文中的 html 元素

=> 没有。你可以试试，会发现是`$userInfoNode`空的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:25:24.550

是的。

您还需要确保您要引用的 html 元素出现在您的 javascript 之前。

简而言之

```
var $userInfoNode = $('#userOptions');
CURR_USER_ID = $userInfoNode.attr('data-userId');
CURR_USER_NAME = $userInfoNode.text(); 
```

在您的 html 页面的末尾...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T16:27:34.910

如果您必须/想要将其保存在外部文件中，您可以将引用它的脚本元素放在结束正文标记之前的底部。起初它看起来有点奇怪，但它是有效的。

# mysql - 从组合函数返回 id

> ID：16174413
> 
> 赞同：0
> 
> 时间：2013-04-23T16:21:30.237
> 
> 标签：mysql, pdo

我正在尝试优化我创建的平台，并删除可能不需要的代码。自从我开始阅读 PHP 类并决定重写整个函数页面以来。

我的登录页面有两个功能。

```
valid_credientials($email,$password){} and
function fetch_user_id($email){ } 
```

返回登录用户的`fetch_user_id`id，因此我的会话将从会话电子邮件更改为会话 uid。

现在我是否试图结合这两个功能，但我只收到错误消息所以我在想，也许我需要这两个功能？这就是我现在所拥有的。

```
public function valid_credientials($email,$password){

if(!empty($email) && !empty($password)){
$query =    $this->db->prepare("SELECT id FROM user WHERE email=? AND password=?" );

$query->    bindParam(1, $email);
$query->    bindParam(2, $password);
$query->    execute();

if($query->rowCount() == 1){
$row = $query->fetch(PDO::FETCH_ASSOC);
    return $row[id];
        echo "user verified Access granted";
}
}else{
    echo 'Wrong Username of password';} 
} 
```

}

```
function fetch_user_id($email){
global $db;
$query = $db->query("SELECT id FROM user WHERE email='{$_SESSION['email']}'");
$row = $query->fetch(PDO::FETCH_ASSOC);
return $row[id];
} 
```

如您所见，我是否尝试在 valid_credential 函数中使用 $row = 查询。但它只返回错误 - 未定义的常量 id - 假定为“id”。

谢谢！

# node.js - 在节点上安装 Karma 时出错 - 在 OSX 上检索当前目录时出错

> ID：16174416
> 
> 赞同：3
> 
> 时间：2013-04-23T16:21:41.043
> 
> 标签：node.js, angularjs, npm, karma-runner

我今天一直在努力解决这个问题，无法弄清楚问题出在哪里——不幸的是，谷歌并没有提供太多帮助。

我正在尝试遵循 AngularJS 教程，但无法安装 Karma。每次我尝试时都会收到一条错误消息，提示“检索当前目录时出错：getcwd：无法访问父目录：权限被拒绝”。

这是 bash 中输出的副本：

```
Barts-MacBook-Pro:~ bart$ sudo npm install -g karma
Password:
npm http GET https://registry.npmjs.org/karma
npm http GET https://registry.npmjs.org/karma
npm http 200 https://registry.npmjs.org/karma
npm http GET https://registry.npmjs.org/karma/-/karma-0.8.5.tgz
npm http 200 https://registry.npmjs.org/karma/-/karma-0.8.5.tgz
npm http GET https://registry.npmjs.org/chokidar
npm http GET https://registry.npmjs.org/minimatch
npm http GET https://registry.npmjs.org/glob
npm http GET https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/xmlbuilder/0.4.2
npm http GET https://registry.npmjs.org/optimist/0.3.5
npm http GET https://registry.npmjs.org/colors/0.6.0-1
npm http GET https://registry.npmjs.org/LiveScript/1.0.1
npm http GET https://registry.npmjs.org/dateformat/1.0.2-1.2.3
npm http GET https://registry.npmjs.org/mime
npm http GET https://registry.npmjs.org/rimraf
npm http GET https://registry.npmjs.org/istanbul/0.1.22
npm http GET https://registry.npmjs.org/pause/0.0.1
npm http GET https://registry.npmjs.org/growly
npm http GET https://registry.npmjs.org/q
npm http GET https://registry.npmjs.org/lodash
npm http GET https://registry.npmjs.org/log4js
npm http GET https://registry.npmjs.org/http-proxy
npm http 304 https://registry.npmjs.org/chokidar
npm http 304 https://registry.npmjs.org/xmlbuilder/0.4.2
npm http 200 https://registry.npmjs.org/optimist/0.3.5
npm http GET https://registry.npmjs.org/optimist/-/optimist-0.3.5.tgz
npm http 200 https://registry.npmjs.org/colors/0.6.0-1
npm http GET https://registry.npmjs.org/colors/-/colors-0.6.0-1.tgz
npm http 304 https://registry.npmjs.org/LiveScript/1.0.1
npm http 304 https://registry.npmjs.org/dateformat/1.0.2-1.2.3
npm http 304 https://registry.npmjs.org/mime
npm http 304 https://registry.npmjs.org/rimraf
npm http 200 https://registry.npmjs.org/coffee-script
npm http 200 https://registry.npmjs.org/colors/-/colors-0.6.0-1.tgz
npm http 304 https://registry.npmjs.org/pause/0.0.1
npm http 304 https://registry.npmjs.org/growly
npm http 304 https://registry.npmjs.org/istanbul/0.1.22
npm http 200 https://registry.npmjs.org/minimatch
npm http GET https://registry.npmjs.org/minimatch/-/minimatch-0.2.12.tgz
npm http 304 https://registry.npmjs.org/log4js
npm http 200 https://registry.npmjs.org/optimist/-/optimist-0.3.5.tgz
npm http 200 https://registry.npmjs.org/minimatch/-/minimatch-0.2.12.tgz
npm http 200 https://registry.npmjs.org/glob
npm http 200 https://registry.npmjs.org/socket.io
npm http 200 https://registry.npmjs.org/http-proxy
npm http GET https://registry.npmjs.org/http-proxy/-/http-proxy-0.10.2.tgz
npm http 200 https://registry.npmjs.org/q
npm http GET https://registry.npmjs.org/q/-/q-0.9.3.tgz
npm http 200 https://registry.npmjs.org/lodash
npm http 200 https://registry.npmjs.org/http-proxy/-/http-proxy-0.10.2.tgz
npm http 200 https://registry.npmjs.org/q/-/q-0.9.3.tgz
npm http GET https://registry.npmjs.org/graceful-fs
npm http GET https://registry.npmjs.org/lru-cache
npm http GET https://registry.npmjs.org/sigmund
npm http GET https://registry.npmjs.org/graceful-fs
npm http GET https://registry.npmjs.org/inherits
npm http GET https://registry.npmjs.org/wordwrap
npm http GET https://registry.npmjs.org/socket.io-client/0.9.11
npm http GET https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/base64id/0.1.0
npm http GET https://registry.npmjs.org/redis/0.7.3
npm http GET https://registry.npmjs.org/prelude-ls
npm http GET https://registry.npmjs.org/async/0.1.15
npm http GET https://registry.npmjs.org/dequeue/1.0.3
npm http GET https://registry.npmjs.org/semver
npm http GET https://registry.npmjs.org/readable-stream
npm http GET https://registry.npmjs.org/mkdirp
npm http GET https://registry.npmjs.org/esprima
npm http GET https://registry.npmjs.org/handlebars
npm http GET https://registry.npmjs.org/escodegen
npm http GET https://registry.npmjs.org/fileset
npm http GET https://registry.npmjs.org/which
npm http GET https://registry.npmjs.org/nopt
npm http GET https://registry.npmjs.org/wordwrap
npm http GET https://registry.npmjs.org/async
npm http GET https://registry.npmjs.org/abbrev
npm http GET https://registry.npmjs.org/pkginfo
npm http GET https://registry.npmjs.org/utile
npm http 304 https://registry.npmjs.org/inherits
npm http 304 https://registry.npmjs.org/sigmund
npm http 304 https://registry.npmjs.org/graceful-fs
npm http 304 https://registry.npmjs.org/graceful-fs
npm http 304 https://registry.npmjs.org/wordwrap
npm http 304 https://registry.npmjs.org/socket.io-client/0.9.11
npm http 304 https://registry.npmjs.org/policyfile/0.0.4
npm http 304 https://registry.npmjs.org/base64id/0.1.0
npm http 304 https://registry.npmjs.org/redis/0.7.3
npm http 304 https://registry.npmjs.org/prelude-ls
npm http 304 https://registry.npmjs.org/dequeue/1.0.3
npm http 200 https://registry.npmjs.org/async/0.1.15
npm http GET https://registry.npmjs.org/async/-/async-0.1.15.tgz
npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http GET https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http GET https://registry.npmjs.org/ws
npm http 304 https://registry.npmjs.org/semver
npm http 304 https://registry.npmjs.org/readable-stream
npm http 304 https://registry.npmjs.org/mkdirp
npm http 304 https://registry.npmjs.org/esprima
npm http 200 https://registry.npmjs.org/lru-cache
npm http 304 https://registry.npmjs.org/handlebars
npm http 304 https://registry.npmjs.org/fileset
npm http 304 https://registry.npmjs.org/nopt
npm http 304 https://registry.npmjs.org/wordwrap
npm http 304 https://registry.npmjs.org/abbrev
npm http 304 https://registry.npmjs.org/pkginfo
npm http 304 https://registry.npmjs.org/which
npm http 304 https://registry.npmjs.org/utile
npm http 304 https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http GET https://registry.npmjs.org/rimraf
npm http GET https://registry.npmjs.org/deep-equal
npm http GET https://registry.npmjs.org/i
npm http GET https://registry.npmjs.org/ncp
npm http 200 https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/uglify-js/-/uglify-js-1.2.5.tgz
npm http 304 https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http 200 https://registry.npmjs.org/async/-/async-0.1.15.tgz
npm http 304 https://registry.npmjs.org/rimraf
npm http 304 https://registry.npmjs.org/deep-equal
npm http 304 https://registry.npmjs.org/i
npm http 304 https://registry.npmjs.org/ncp
npm http 200 https://registry.npmjs.org/escodegen
npm http GET https://registry.npmjs.org/escodegen/-/escodegen-0.0.21.tgz
npm http 200 https://registry.npmjs.org/ws
npm http 200 https://registry.npmjs.org/uglify-js/-/uglify-js-1.2.5.tgz
npm http 200 https://registry.npmjs.org/escodegen/-/escodegen-0.0.21.tgz
npm http 200 https://registry.npmjs.org/async
npm http GET https://registry.npmjs.org/esprima
npm http GET https://registry.npmjs.org/estraverse
npm http GET https://registry.npmjs.org/source-map
npm http GET https://registry.npmjs.org/uglify-js
npm http 304 https://registry.npmjs.org/source-map
npm http 304 https://registry.npmjs.org/estraverse
npm http 304 https://registry.npmjs.org/esprima
npm http GET https://registry.npmjs.org/amdefine
npm http 200 https://registry.npmjs.org/uglify-js
npm http 304 https://registry.npmjs.org/amdefine
npm http GET https://registry.npmjs.org/zeparser/0.0.5
npm http GET https://registry.npmjs.org/commander
npm http GET https://registry.npmjs.org/tinycolor
npm http GET https://registry.npmjs.org/options
npm http 304 https://registry.npmjs.org/zeparser/0.0.5
npm http 304 https://registry.npmjs.org/tinycolor
npm http 304 https://registry.npmjs.org/options
npm http 200 https://registry.npmjs.org/commander

> ws@0.4.25 install /usr/local/lib/node_modules/karma/node_modules/socket.io/node_modules/socket.io-client/node_modules/ws
> (node-gyp rebuild 2> builderror.log) || (exit 0)

shell-init: error retrieving current directory: getcwd: cannot access parent directories: Permission denied
job-working-directory: error retrieving current directory: getcwd: cannot access parent directories: Permission denied
job-working-directory: error retrieving current directory: getcwd: cannot access parent directories: Permission denied
/usr/local/bin/karma -> /usr/local/lib/node_modules/karma/bin/karma
karma@0.8.5 /usr/local/lib/node_modules/karma
├── pause@0.0.1
├── dateformat@1.0.2-1.2.3
├── xmlbuilder@0.4.2
├── colors@0.6.0-1
├── chokidar@0.6.2
├── growly@1.1.1
├── mime@1.2.9
├── q@0.9.3
├── coffee-script@1.6.2
├── lodash@1.1.1
├── glob@3.1.21 (inherits@1.0.0, graceful-fs@1.2.0)
├── rimraf@2.1.4 (graceful-fs@1.2.0)
├── optimist@0.3.5 (wordwrap@0.0.2)
├── LiveScript@1.0.1 (prelude-ls@0.6.0)
├── minimatch@0.2.12 (sigmund@1.0.0, lru-cache@2.3.0)
├── log4js@0.6.3 (dequeue@1.0.3, semver@1.1.4, async@0.1.15, readable-stream@1.0.2)
├── http-proxy@0.10.2 (pkginfo@0.2.3, utile@0.1.7)
├── istanbul@0.1.22 (abbrev@1.0.4, which@1.0.5, fileset@0.1.5, nopt@2.0.0, wordwrap@0.0.2, async@0.1.22, mkdirp@0.3.5, esprima@0.9.9, handlebars@1.0.10, escodegen@0.0.21)
└── socket.io@0.9.14 (base64id@0.1.0, policyfile@0.0.4, redis@0.7.3, socket.io-client@0.9.11)
Barts-MacBook-Pro:~ bart$ 
```

我正在运行节点 0.10.4，顺便说一句。

不幸的是，我现在有点茫然，所以任何帮助都将不胜感激！

非常感谢，

巴特

**编辑 - 2017 年 1 月**

我最初在 OSX Mountain Lion 上问过这个问题，但我在新版本的 OSX 上也遇到了类似的问题。我在下面编辑了我的答案，以包括我认为对*所有*OSX 版本更好的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T17:05:31.247

好的，所以我进一步研究了这一点，并尝试了以下方法：

```
sudo npm install -g ws 
```

这是实际上无法安装的软件包。从那里谷歌搜索在 StackOverflow 上找到了这个：[Trouble installed tower module - ws module crashs](https://stackoverflow.com/questions/11442249/trouble-installing-tower-module-ws-module-crashes)。这将引导我在我的 Macbook Pro 上启用 root 帐户的说明：http: [//support.apple.com/kb/ht1528](http://support.apple.com/kb/ht1528)。

完成后，我现在可以在 bash 中执行以下命令以成功安装业力：

```
su
npm install -g karma 
```

就是这样！希望这可以帮助遇到类似问题的其他人。

**编辑 - 2017 年 1 月 - 更好的解决方案**

为了避免不得不在 OSX 上使用 sudo 安装全局模块的整个过程，这可能导致 getcwd() 由于缺少权限而失败等奇怪的问题，我强烈建议使用 nvm 安装节点：[https://github。 com/creationix/nvm](https://github.com/creationix/nvm)。这还有一个好处是您还可以在同一台机器上使用多个版本的节点。

# java - 调整已完成事件的大小？

> ID：16174418
> 
> 赞同：3
> 
> 时间：2013-04-23T16:21:49.060
> 
> 标签：java, events, resize, javafx-2

我需要知道控件的宽度何时发生变化，因此目前我将 a 附加`ChangeListener`到`widthProperty()`相应控件的 。

现在，当用户调整窗口大小（用鼠标拖动窗口的一个角）时，`widthProperty()`更改非常频繁，并且对这些频繁更改做出反应会消耗性能（我正在基于此更改进行 CPU 密集型图形更新）。

是否有类似“调整大小”事件而不是“调整大小”事件？那么只有当用户完成调整窗口大小时才会触发的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:45:34.367

你可以使用mouseclicklistener（我不记得名字）并等待mouseReleased并询问大小是否改变，这样当调整大小结束时图形将更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:55:47.830

我认为 JavaFX 2.2 中没有 Resize Finished 事件。

# javascript - 如何使用 JQuery 创建具有左右和其他幻灯片选项的内容滑块？

> ID：16174419
> 
> 赞同：-2
> 
> 时间：2013-04-23T16:21:49.550
> 
> 标签：javascript, jquery, slider

我对 JQuery/JavaScript 的这一部分有点陌生。

我知道我可以从某个地方使用 jquery 插件或滑块，但我认为我的要求有点不同。

我创建了带有背景图像和文本的内容，并准备了内容。当单击顶部的图像以及单击左/右选项时，我需要使用 jquery 将内容更改为下一个内容。类似于滑块的工作方式。我还需要左右选项来回走。

我该如何开始呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:41:02.213

这个想法是将整个内容包装在一个具有固定宽度的分区中，然后您可以使用[jQuery animate api](http://api.jquery.com/animate/)使用 jquery animate 选项将内容的宽度动态更改为向左或向右。
将内容向左移动的示例

```
$('#innerscroll').animate({"left": "+=150px"}, 500); 
```

将内容向右移动的示例

```
$('#innerscroll').animate({"left": "-=150px"}, 500); 
```

innerscroll 是滑块所在的父分区 ID

详细步骤在这个[jQuery 图像滑块教程](http://sreevathsabv.blogspot.in/p/simple-jquery-image-gallery-tutorial.html)中给出，确保你使用 li 标签而不是 img 作为你的内容。你可以即兴创作。

# batch-file - 用于将文本行从一个文本板复制到另一个的批处理脚本，并执行一些其他操作

> ID：16174421
> 
> 赞同：-1
> 
> 时间：2013-04-23T16:21:56.493
> 
> 标签：batch-file, cmd

我有这个记事本文件，里面装满了一长串的行......就像这样：

```
MCDXY22 = 
    (DESCRIPTION = 
       (ADDRESS = (PROTOCOL = TCP)(HOST = xyzbdk012)(PORT = 11234)
       (CONNECT_DATA = 
          (SERVER = DEDICATED)
          (SERVICE_NAME = MCDXY22))) 
```

记事本充满了这些。每组由单个空行分隔。我要做的是将所有这些行复制到另一个记事本文件并进行一些更改...-->

```
define DYLINK = MCDXY22
define DYLINK_PYS = ???
define DYLINK_XCSR = (DESCRIPTION = 
           (ADDRESS = (PROTOCOL = TCP)(HOST = xyzbdk012)(PORT = 11234)
           (CONNECT_DATA = 
              (SERVER = DEDICATED)
              (SERVICE_NAME = MCDXY22))) 
```

这有意义吗？

这就是最终产品的样子。我理解应该发生什么以及伪代码和东西，但是，就是想不通。如果我手动执行此操作，我将花费数小时 n 小时... :)

谢谢！任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:50:33.420

在 VBScript 中，这样的东西应该可以工作：

```
filename = WScript.Arguments(0)

Set fso = CreateObject("Scripting.FileSystemObject")

Set re = New RegExp
re.Pattern = "^\S"

Set f = fso.OpenTextFile(filename)

Do Until f.AtEndOfStream
  line = f.ReadLine
  If re.Test(line) Then
    WScript.StdOut.WriteLine "define DYLINK = " & line
    WScript.StdOut.WriteLine "define DYLINK_PYS = ???"
    WScript.StdOut.WriteLine "define DYLINK_XCSR = " & LTrim(f.ReadLine)
  Else
    WScript.StdOut.WriteLine line
  End If
Loop

f.Close 
```

像这样运行脚本：

```
cscript //NoLogo script.vbs C:\input.txt >C:\output.txt 
```

它将读取`C:\input.txt`文件的修改内容并将其打印到`StdOut`您可以将其重定向到输出文件的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:29:12.843

希望这有效。将输入和输出分别设置为到`input.txt`和的路径`output.txt`。

```
@echo off
setlocal enabledelayedexpansion

set input=path to\input.txt
set output=path to\output.txt

set count=0
for /f "usebackq delims=" %%g in ("%input%") do call :process "%%g"
goto :eof

:process
set /a count+=1
set line=%1
for /f "tokens=1* delims= " %%i in (%line%) do set first=%%i&set rest=%%j
set "line=%line:~1%
if "%first:~0,1%" neq "(" set count=1&echo.>>"%output%"
if %count%==1 echo define %first%1>>"%output%"
if %count%==2 echo define DYLINK_PYS = ???>>"%output%"
if %count%==2 echo define DYLINK_XCSR = %first% %rest%1>>"%output%"
if %count% gtr 2 echo %line%1>>"%output%" 
```

笔记：

我无法找到检测换行符的方法，因此我检查了该行的第一个字符是否为`(`. 如果不是，它会重置`%count%`并`echo`换行。如果由于某种原因在第一行之前有一个括号，则此代码将不起作用..

这`1>>`是为了防止末尾的任何数字`%line%`弄乱附加。

`for /f "tokens=1* delims= " %%i in (%line%)`并且`set "line=%line:~1%`不是语法错误，`%line%`已经包含引号所以..

# asp.net - 是否有 ASP.NET 字处理控件？

> ID：16174424
> 
> 赞同：0
> 
> 时间：2013-04-23T16:22:00.863
> 
> 标签：asp.net, rich-text-editor, word-processor

是否有成熟的 ASP.NET 字处理控件？在每个（主）浏览器中运行的一个，包括对页边距、分页符和分节符、字段等的支持？

TextControl 具有该功能，但仅在 IE 中运行。Telerik、DevExpress 等的编辑器是 HTML 编辑器 - 所以没有边距、中断等的概念。

我不在乎它是付费的还是开源的。

# asp.net - 将经典 ASP 升级到 MVC 4.0

> ID：16174425
> 
> 赞同：0
> 
> 时间：2013-04-23T16:22:06.193
> 
> 标签：asp.net, asp.net-mvc-4, url-rewriting, custom-routes

我正在从经典 ASP 升级到 MVC 4.0。MVC 项目具有独特的文件夹结构，包括模块、视图和控制器。我们的经典 ASP 网站在搜索引擎中有很好的索引，并使用所有友好的 URL（一些映射到现有文件夹并删除页面扩展名，还有一些映射到 SEO 而不是包含文件的文件夹），使用 web.config 中的重写规则. 我需要维护所有当前的 URL，但它们都映射到与 MVC 项目不同的文件夹中。我希望 MVC 项目保留在默认项目中定义的文件夹结构中，但还需要继续使用现有的 URL。

迁移到 MVC 时，维护站点当前 URL 的最佳方法是什么？自定义路由是处理此问题的唯一/最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:06:39.180

我想有四种方法可以重写 url，无论你使用哪一种，你都需要做一些改变。例如，您应该更改读取 url 参数的方式。

我按照本教程[http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

它有很大帮助

# javascript - Sencha Touch 2：如何过滤协会商店？

> ID：16174426
> 
> 赞同：2
> 
> 时间：2013-04-23T16:22:11.550
> 
> 标签：javascript, model-view-controller, extjs, sencha-touch

我在尝试过滤关联结果时遇到问题。我有一个包含许多子类别的类别列表。我正在使用 MVC 架构。所以，这是我正在尝试做的一个例子：

```
var subcategories = category.subcategories();

subcategories.filter("title", "some text");
subcategories.each( function (item) { console.log(item.get('title')); } ); 
```

一些过滤器未应用的方式。它总是返回原始存储、相同数量的记录等。

我也在这样做：

```
var subcategories = category.subcategories();

subcategories.filterBy(function(item) {
   console.log( item );
   return (item.get('title') == 'some text');
}); 
```

但是console.log它甚至没有运行一次！商店里满是唱片，我已经查到了

有任何想法吗？难道我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:53:56.960

几个问题：

1.  您使用的是什么版本的 Sencha Touch？

2.  在 Sencha Touch 中使用关联时，您仍然需要自己做很多工作。它不是完全自动的。例如，您需要手动将所有子类别添加到每个类别对象。你在做这个吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T12:17:11.943

这可能是一个迟到的答案，但它将帮助许多正在寻找相同问题的解决方案的人。

关键是调用**`setRemoteFilter(false)`**Association's Store。

```
var products = user.products();
products.setRemoteFilter(false); // without this line, filter on Association's Store didn't work
var categorieFilter = new Ext.util.Filter({
    property: 'categories',
    value   : 'Electronic'
});
products.setFilters(categorieFilter); 
```

# java - SWT lining up ICON_WARNING with Label

> ID：16174428
> 
> 赞同：1
> 
> 时间：2013-04-23T16:22:15.920
> 
> 标签：java, eclipse, swt

I want to add a Composite to Eclipse that appears when a certain checkbox is checked. The composite will be comprised of 2 parts: a WARNING_ICON and a label with some text.

I can't seem to get the layout quite right - I want to display the image and label side by side. Here's my section of the code:

```
 final Composite warningComposite = new Composite(parent, SWT.NONE);
        warningComposite.setLayout(new GridLayout(2, false));
        warningComposite.setLayoutData(new GridData(0, 0, true, false));

        Label l = SWTUtilities.createLabel(composite, "", -1, -1, 1, GridData.BEGINNING);
        final Image img = PlatformUI.getWorkbench().getDisplay().getSystemImage(SWT.ICON_WARNING);
        l.setImage(img);
        l.setLayoutData(new GridData());

        l = SWTUtilities.createLabel(composite, "Wizards Gone Wild", -1, -1, 1, GridData.END); 
```

And the SWTUtilities.createLabel method:

```
public static Label createLabel(final Composite parent, final String label, final int width, final int indent, final int span, final int style) {
        Assert.isNotNull(parent);
        Assert.isNotNull(label);
        final Label control = new Label(parent, SWT.WRAP);
        control.setText(label);
        if (width > 0 || indent > 0 || span > 0) {
            final GridData data = new GridData(style);
            if (width > 0)
                data.widthHint = width;
            if (indent > 0)
                data.verticalIndent = indent;
            if (span > 1)
                data.horizontalSpan = span;
            control.setLayoutData(data);
        }
        return control;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:28:16.840

There you go:

```
public static void main(String[] args)
{
    Display d = new Display();
    final Shell shell = new Shell(d);
    shell.setLayout(new GridLayout(2, false));

    Label image = new Label(shell, SWT.NONE);
    image.setImage(d.getSystemImage(SWT.ICON_WARNING));
    image.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

    Label text = new Label(shell, SWT.NONE);
    text.setText("SOME TEXT HERE");
    text.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, true));

    shell.pack();
    shell.open();
    while (!shell.isDisposed())
        while (!d.readAndDispatch())
            d.sleep();
} 
```

Looks like this:

![enter image description here](https://i.stack.imgur.com/ar09k.png)

* * *

Here is the explanation: SWT does not support vertical alignment of text within the `Label` (because not all OSs support it). The solution is to align the label at the center of the parent, rather than the text within the label.

# .htaccess - 如何通过 .htaccess 将子域根文件夹更改为 Public_html？

> ID：16174432
> 
> 赞同：2
> 
> 时间：2013-04-23T16:22:29.180
> 
> 标签：.htaccess, subdomain, root

我有一个子域，我想将根文件夹设为“Public_html”，例如，我的根子域是

```
- /public_html/subdomain 
```

所以我想将该路径更改为我的子域的 /public_html/ 。我知道它可以用.htaccess 来完成，但我不知道该怎么做。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:33:50.090

我不知道你到底想要什么，但这是我的两个答案：

**答案 1**：您希望您`DocumentRoot`的指向`public_html`

在这种情况下，`DocumentRoot`在您的网络服务器的（虚拟）主机配置中添加/更改（我假设您使用的是 Apache，这将是`/etc/httpd/conf/httpd.conf`或`/etc/httpd/conf/extra/httpd-vhosts.conf`什至`/etc/apache2/sites-enabled/yourhost`）

**答案 2**：您想从您的`subdomain`文件夹重定向到`public_html`

这是不可能`RewriteRule`的，因为您的主机指向该`subdomain`文件夹。反过来也是可能的（从`public_html`to重定向`subdomain`）。

你可以做的是创建一个符号链接，`subdomain`从中指向`public_html`或文件 - 但我不推荐这样做。

更多资源：

*   关于如何使用重写规则转发到子文件夹[的简要说明](https://stackoverflow.com/questions/990392/htaccess-rewrite-to-redirect-root-url-to-subdirectory)
*   [关于](http://www.serverschool.com/dedicated-servers/apaches-documentroot-directive/)_`DocumentRoot`

# c++ - const类成员函数时的链接错误

> ID：16174435
> 
> 赞同：-2
> 
> 时间：2013-04-23T16:22:36.970
> 
> 标签：c++

我有一堂课，说

```
/* class.h */ 
class myClass {

public:
    void member_function();
};

/* class.cpp */

void myClass::member_function() {
    /* blabla */
} 
```

但是当我 make 时`member_function` `const`，我得到一个链接错误：

```
error: undefined reference to `member_function()' 
```

我将添加`const`到函数声明`myClass`和它的定义`class.cpp`。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:28:14.507

const 函数的正确语法如下所示：

```
/* class.h */ 
class myClass {

public:
    void member_function() const;
};

/* class.cpp */

void myClass::member_function() const {
    /* blabla */
} 
```

如果尝试这个之后仍然有问题，那么代码中肯定有其他事情发生。

# sql - AgileToolkit - 自定义 SQL 请求 + 分页器

> ID：16174438
> 
> 赞同：0
> 
> 时间：2013-04-23T16:22:47.577
> 
> 标签：sql, atk4, paginator, agiletoolkit

您好，我的分页器有点问题，我想使用一些自定义 SQL 请求，但是每次我单击分页器链接时，它都会在没有自定义请求的情况下加载我的模型

我在通过 GET 方法发送的表单上输入信息：

```
$view->grid->js()->reload(array("From" => 
  $form->get("From"),"To" => $form->get("To"),"SSID" => $form->get("SSID")))
  ->execute(); 
```

在我看来，我有：

```
 $this->request=$this->api->db->dsql();        
  $this->grid=$this->add('Grid');
  $this->grid->setModel('Systemevents',array('ID','ReceivedAt','Message'));
  $this->grid->addPaginator(10);

  if (isset($_GET["SSID"])) {
     $this->ssid = $_GET["SSID"];       
  }
  if (isset($_GET["From"])) {
     $this->from = $_GET["From"];           
  }
  if (isset($_GET["To"])) {
     $this->to = $_GET["To"];            
  }

   $this->grid->dq->where($this->requette->expr('Message like "%.% ' 
        . $this->ssid . ' % src=%"'))
        ->where($this->requette->expr("ReceivedAt >= '".$this->from. "' 
          AND ReceivedAt <= '".$this->to."'")); 
```

问题是当我使用分页器更改页面时 where 条件消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:39:25.143

我没有找到任何解决我的问题的方法，所以我做了一些不同的事情

我在网格中添加了两个按钮，允许我更改 sql 请求的限制。

如果限制为 0，则隐藏上一个按钮。

现在我必须找到如何计算行数（从'SystemEvents' where ....中选择计数（'ID'））并将其存储在一个变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T14:47:36.957

最后的最终解决方案是：

```
if ((isset($_GET["SSID"])) || (isset($_GET["From"])) || (isset($_GET["To"]))) { 
//GET Method from Recherche.php

  $this->ssid     = ($_GET["SSID"]    == "null" ? null : $_GET["SSID"]);
  $this->api->stickyGET("SSID"); // the solutiuon is here
  $this->from     = ($_GET["From"]    == "null" ? null : $_GET["From"]);            
  $this->api->stickyGET("From"); // <===== the solutiuon is here         
  $this->to       = ($_GET["To"]      == "null" ? null : $_GET["To"]);
  $this->api->stickyGET("To"); // <===== the solutiuon is here 

} 
```

# extjs - 使用 SenchaCmd 构建时出现 SenchaTouch 错误：找不到文件以供依赖参考

> ID：16174442
> 
> 赞同：0
> 
> 时间：2013-04-23T16:22:56.823
> 
> 标签：extjs, build, sencha-touch, sencha-cmd

当我想用 SenchaCmd 构建我的应用程序时，我收到以下错误：

```
Failed to find file(s) for depdency reference     /workspace/SmartphoneClient/app.js::ExtRequire::Ext.ux.picker.DateTime 
```

这就是我的 app.js 的外观：

```
Ext.Loader.setPath({
'Ext': 'touch/src',
'CatchMyPain': 'app',
'Ext.ux': 'extensions/ux'
});
Ext.require('Ext.ux.picker.DateTime');
Ext.require('Ext.ux.field.DateTimePicker'); 
```

DateTime 和 DateTimePicker 这两个文件位于 extension/ux/field/DateTimePicker.js 和 extensions/ux/picker/DateTime.js 下的正确文件夹中

该应用程序在 Chrome 浏览器和 Safari 移动浏览器上运行良好。我在控制台中没有收到任何消息或错误。

我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T11:03:44.480

我必须将目录添加到 .sencha/app/sencha.cfg 的类路径中

```
app.classpath=${app.dir}/app.js,${app.dir}/app,${app.dir}/extensions 
```

这样 senchaCMD 就找到了所有文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T15:24:30.927

因为 Sencha CMD build 无法自动解析来自加载器的路径。但是它使用类路径。这应该在配置文件中定义（如逗号分隔列表）。我没有测试过它，因为我使用了 sencha 编译命令（见下文）

来自文档： 由于存储在“.sencha/app/sencha.cfg”中的 app.classpath 配置值，sencha app build 命令知道在哪里可以找到应用程序的源代码。默认情况下，此值为：

```
app.classpath=${app.dir}/app 
```

将目录添加到这个以逗号分隔的列表中会通知编译器在哪里可以找到构建应用程序所需的源代码。

你的应该是：`app.classpath=${app.dir}/app, ${app.dir}/extensions/ux`

如果使用 sencha 编译命令：

```
sencha compile -classpath=./extensions/ux -classpath=./app page -in index.html -out test.html 
```

# java - 需要一种在接口中为构造函数定义输入参数的方法

> ID：16174443
> 
> 赞同：0
> 
> 时间：2013-04-23T16:22:58.623
> 
> 标签：java, design-patterns, interface, constructor

首先，我知道在 Java 的接口中定义构造函数是不可能的。但不知何故，我遇到了一个问题，我需要一些非常相似的东西。也许我的情况有一个简单的解决方案......

我有一个界面：

```
public interface SomeObject {

    /**
     * Generate a xml representation of the object.
     */
    public String generateXMLRepresentation();

} 
```

对象的这个 xml 表示将存储在某个地方，以后应该可以使用这个 xml 表示构造对象的副本。我最初的想法是定义一个以 String 作为输入的构造函数，并让 SomeObject 的每个实现都知道如何处理它以及如何构造相应的对象。

我怎样才能做到这一点？

**编辑：**要么我对此不够清楚，要么我想错了，但我认为工厂或生成器模式行不通。我需要更强大的东西，每个人都可以编写 SomeObject 的新实现，并被迫实现一个采用 xml 字符串的构造函数。换句话说，我不知道 SomeObject 存在多少或哪些实现，但我仍然依赖于每个实现都知道如何从 xml 表示中构造自己。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:30:10.210

一些设计模式可以帮助您定义可以处理当前上下文的解决方案。[抽象工厂](http://sourcemaking.com/design_patterns/abstract_factory)和[建造者](http://sourcemaking.com/design_patterns/builder)模式都可以帮助你。

我宁愿选择 Builder 设计模式。通过实现适当的逻辑，您最终将能够仅基于您拥有的 XML 表示来构造从简单到复杂的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:30:23.453

我认为您应该考虑将 xml 序列化的关注点与您的对象正在处理的任何关注点分开。往返 xml 的知识真的是你的类领域固有的，还是一个正交的问题？

看看[http://x-stream.github.io/](http://x-stream.github.io/)

如果你不想使用 xstream 本身，因为你不能依赖 jar，或者你的 xml 表单是特定于你的项目的，至少看看 xstream 做了什么。您应该能够定义一个策略来（反思地？）递归一个对象结构并以您需要的形式写出 xml，以及一个伴随类来做相反的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:27:10.957

我相信为此您应该使用**[工厂模式](http://en.wikipedia.org/wiki/Factory_pattern)**，因为我们正在讨论基于字符串构建对象。

所以你应该有不同的静态方法为给定的字符串构造不同的实现。

```
public class ObjV1 implements SomeObject(){ // objects would simply extend interface
    ...
}

public class SomeObjectFactory{// factory would provide construction methods for different implementations of the interface

   //Hide factory constructor, so we use it only as a singleton
   private SomeObjectFactory(){
   }

   public static ObjV1 buildV1(String str){
      ObjV1 obj = new ObjV1(); // note that we're using the noarg constructor
      ...
      return obj;
   }
} 
```

如果您想更好地控制构建过程，您应该尝试**[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)**

# macos - 使用 launchd 在启动时启动 shell 脚本时无法获取真实主机名

> ID：16174448
> 
> 赞同：1
> 
> 时间：2013-04-23T16:23:21.317
> 
> 标签：macos, plist, launchd

我正在尝试通过 /Library/LaunchDaemons 中的 plist 文件（在 10.8.x 上，如果重要的话）使用 launchd 在启动时运行 shell 脚本：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>testD</string>
    <key>ProgramArguments</key>
    <array>
        <string>/Users/lfriedman/cuda-stuff/sw/gpgpu/build/scripts/testing/testD.sh</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
    <key>KeepAlive</key>
        <true/>
    <key>UserName</key>
    <string>lfriedman</string>
    <key>AbandonProcessGroup</key>
    <false/>
    <key>StandardOutPath</key>
    <string>/tmp/testD.out</string>
    <key>StandardErrorPath</key>
    <string>/tmp/testD.err</string>
</dict>
</plist> 
```

在 shell 脚本中调用了“hostname -s”。如果我手动运行脚本，一切正常。如果我通过 cron 运行脚本，一切正常。但是，当它通过 launchd 在引导时运行时，从“hostname -s”返回的值总是（错误地）返回为“localhost”，而不是系统的实际主机名。如果我调整 plist 以在启动时以外的时间运行脚本，它也会做正确的事情并返回系统的实际短主机名。这让我认为，在操作系统的网络子系统完全运行之前，launchd 正在启动它的工作，这会导致某种竞争情况发生。

是否有一些特殊的方法可以确保操作系统在 launchd 运行作业之前“完全”启动？或者在调用程序之前强制plist文件中的延迟的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T16:58:29.517

不幸的是，launchd 没有设置依赖项的方法，因此您需要在脚本中设置延迟。在 shell 脚本中，检查网络的一种简单方法是：

```
#!/bin/bash

# Example Daemon Starter
. /etc/rc.common

CheckForNetwork

while [ "${NETWORKUP}" != "-YES-" ]
do
    sleep 5
    NETWORKUP=
    CheckForNetwork
done

# Now do what you need to do. 
```

您可以在以下链接中查看更多信息：http: [//blog.slaunchaman.com/2010/07/01/how-to-run-a-launchdaemon-that-requires-networking/](http://blog.slaunchaman.com/2010/07/01/how-to-run-a-launchdaemon-that-requires-networking/)

# ios - 冲突的 iOS 令牌存储信息 - 它是什么？

> ID：16174451
> 
> 赞同：1
> 
> 时间：2013-04-23T16:23:35.593
> 
> 标签：ios, box-api

使用 iOS Box SDK 时，代币在哪里持有以及持有多长时间？它们是放在钥匙链中还是放在其他地方？

我在“Web API 库”部分下的“iOS 上的 OneCloud”网页中找到了以下行。

> “其次，Web API 库使用 Keychain 来存储 Auth Token 等敏感信息。”

这似乎与在“iOS 应用程序中的身份验证”网页上的关注相冲突。

> “用户现在已完全登录，您可以在每次需要它的 API 调用中使用此身份验证令牌。您可以存储身份验证令牌以供将来使用，这样用户就无需每次都使用您的应用程序重新进行身份验证。使用它。请为此使用（安全框架的）钥匙串。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:04:11.263

您所指的第一页是指您使用我们的 iOS SDK 时的页面。

您所指的第二页是指您从头开始构建自己的 API 集成。

# qt - QtWebKit：如何检测通过 HTML5 历史 API 更改的 URL

> ID：16174453
> 
> 赞同：4
> 
> 时间：2013-04-23T16:23:35.840
> 
> 标签：qt, qtwebkit, qwebview

我们目前正在使用 QtWebKit 构建一个应用程序，其中一部分显示了我们网站的产品目录页面。在该网页上，我们使用[jQuery.history](https://github.com/browserstate/history.js "jQuery.history")插件来跟踪排序和过滤选项，而无需用户重新加载页面。

当调用 jQuery.history 的`pushState()`函数时，提供的 URL 被正确推送到历史记录，但即使当前 URL 已更改，也不会触发`QWebView`'s信号（我们正在监听以更新后退/前进按钮和地址栏） `urlChanged()`. 我只能假设这是因为没有点击链接，也没有重新加载页面，所以 Qt 认为它不需要做任何与 URL 相关的事情。

有什么方法可以检测通过 QtWebKit 中的 HTML5 历史 API 进行的 URL 更改，还是我遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:29:17.313

有[QWebPage::saveFrameStateRequested](http://qt-project.org/doc/qt-4.8/qwebpage.html#saveFrameStateRequested)信号：

> 此信号在框架中导航页面的历史记录更改之前不久发出，例如在历史记录中导航时。

您可以使用它来跟踪历史更改：

```
void MainWindow::saveFrameStateRequested(QWebFrame *frame, QWebHistoryItem *item) {
    // this slot is executed before the history is changed, 
    // so we need to wait a bit:
    QTimer::singleShot(100, this, SLOT(listHistoryItems()));
}

void MainWindow::listHistoryItems() {
    for (QWebHistoryItem historyItem: view->page()->history()->items()) {
        qDebug() << "item" << historyItem.url() << historyItem.title();
    }
}

void MainWindow::finishLoading(bool) {
    // (re)connect the signal to track history change,
    // maybe there is a better place to connect this signal
    // where disconnect won't be needed
    disconnect(view->page(), SIGNAL(saveFrameStateRequested(QWebFrame*,QWebHistoryItem*)),
            this, SLOT(saveFrameStateRequested(QWebFrame*,QWebHistoryItem*)));

    connect(view->page(), SIGNAL(saveFrameStateRequested(QWebFrame*,QWebHistoryItem*)),
            this, SLOT(saveFrameStateRequested(QWebFrame*,QWebHistoryItem*)));
} 
```

修改后的[Fancy Browser](http://qt-project.org/doc/qt-4.8/webkit-fancybrowser.html)示例[截图](http://i.imgur.com/1JdfqPy.png)。

# html - 将嵌套的 div 放在屏幕的左侧

> ID：16174456
> 
> 赞同：0
> 
> 时间：2013-04-23T16:23:45.460
> 
> 标签：html

假设我有 2 个 div：

```
<div id="divOuter">
    <div id="divInner"></div>
</div> 
```

假设外部 div 位于页面下方约 3/4 处，位于屏幕中心（水平方向），宽度为 200px。显然，内部 div 最初会位于此位置。如何将内部 div 保持在相同的垂直位置（目前是），但将其一直移动到屏幕的左侧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:28:17.343

绝对定位`divInner`并将 left 属性设置为零：

```
position:absolute;
left:0px; 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/y4NUu/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:37:58.650

这个HTML怎么样...

```
<div id="divOuterWrapper">
    <div id="divOuter">
        <div id="divInner"></div>
    </div>
</div> 
```

...这个CSS？

```
#divOuterWrapper {
    position:relative;
    background-color:#dddddd;
}

#divOuter {
    width:200px;
    margin:0 auto;
    margin-top:300px;
    background-color:#00ff00;
    min-height:50px;
}

#divInner {
    position:absolute;
    background-color:#0000ff;
    min-height:30px;
    width:200px;
    margin-left:50%;
    left:-50%;
} 
```

这是一个JSFiddle：

[http://jsfiddle.net/5Qfq3/1/](http://jsfiddle.net/5Qfq3/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:28:03.957

你可以添加一些 CSS 到它。但是，我知道的唯一方法是使用固定位置，例如：

```
 .position{
     position: relative; left: -20px;
      } 
```

然后在你的 div

```
<div id="divInner" Class="position"></div> 
```

将在左侧 20 像素处

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T16:28:09.747

您可以提供`#divInner`绝对左侧位置，但将其顶部位置保留为自动；

```
#divInner {
    position: absolute;
    left: 0;
} 
```

这假设它`#divOuter`本身不是绝对定位的。

# time - DomU 中的 Xen 时间漂移

> ID：16174457
> 
> 赞同：-1
> 
> 时间：2013-04-23T16:23:50.433
> 
> 标签：time, xen

我的 Xen domu 一直在漂泊他们的时代。我的 dom0 正在为 AMD 64 使用内核 3.2.0。DomU 正在使用 2.6.26。如何让时间不漂移？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T06:52:56.487

我猜你的 Domu 已经在你的 Dom0 时间漂流了。在这种情况下，您可以执行以下操作之一：-

1.  在 Domu 上配置 ntp（网络时间协议）。这是一个相当简单的过程。您可以在 /etc/ntp.conf 文件中进行更改（假设它是一个 linux domu），以将 Dom0 作为 ntp 服务器包含在内，然后启动 ntp 守护进程（“service ntpd start”）。这样domu 可以与Dom0 同步他们的时间。

2.  配置 Dom0 和所有 Domu，以便它们与外部服务器同步时间。在所有的 ntp 配置文件中进行更改，然后在所有这些上重新启动 ntp。这样，所有这些都将与某些外部源同步，因此不应发生时间漂移。

3.  对于即时时间同步，您可以在 Domu 上使用“ntpdate”命令。

# android - 如何自动增加搜索栏（没有 MediaPlayer）

> ID：16174458
> 
> 赞同：1
> 
> 时间：2013-04-23T16:23:52.300
> 
> 标签：android, seekbar

是否可以在特定持续时间（例如 60 分钟）内每秒自动增加搜索栏？（我想获得类似播放器进度条的东西，但我没有使用 MediaPlayer）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:40:12.550

是的，您可以创建与 seekbar 相同的自定义进度并使用 Asynctask 方法执行相同的操作。这意味着在 doInbackground 中休眠一段时间并在 postexecute 方法中更新它。

# python - 如何使用easy_install进行本地安装？

> ID：16174460
> 
> 赞同：0
> 
> 时间：2013-04-23T16:23:54.700
> 
> 标签：python, import, installation, easy-install, pytables

我尝试使用 easy_install安装[PyTables 包。](http://www.pytables.org)

我的问题是我不是系统上的 root 并且不允许写入`/usr/local/lib/python2.7/dist-packages/`目录。

为了解决这个问题，我决定在本地安装。为此，我创建了一个新目录：`/home/myname/mylibs`. 然后我执行了`easy_install -d /home/myname/mylibs tables`. 结果`easy_install`抱怨 PYTHONPATH 环境变量。为了解决这个问题，我将我的新目录添加到 PYTHONPATH 并重复前面的命令。结果，我得到`syte.py`并`syte.pyc`归档在我的`/home/myname/mylibs`目录中。

但是，当我尝试`import tables`使用 Python 时，它仍然无法正常工作。我还担心的是，新文件的名称和内容中都没有“表格”。

任何人都可以请解释一下发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T11:43:29.797

我最近遇到了一个类似的问题，试图`easy_install`将包放在我可以写访问的位置。像你一样，我必须将位置添加到我的`PYTHONPATH`变量中才能安装它。然后`PYTHONPATH`每次我想使用已安装的软件包运行命令时都需要进行设置。

例如，要安装和使用`flask`我需要执行此操作的包：

```
$ PYTHONPATH=/tmp easy_install -d /tmp flask
$ PYTHONPATH=/tmp python -c 'import flask; print(flask.__version__)'
0.10.1 
```

如果没有`PYTHONPATH`变量集，你会得到一个错误：

```
$ python -c 'import flask; print(flask.__version__)'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named flask 
```

您当然可以通过运行永久设置变量： $ export PYTHONPATH=/tmp

或放入`export PYTHONPATH=/tmp`您的`~/.bashrc`文件中。

# javascript - 如何在 Razor 视图中更新 JavaScript 中的模型值？

> ID：16174465
> 
> 赞同：47
> 
> 时间：2013-04-23T16:24:16.083
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, razor

我想在 JavaScript 中更新模型值，如下所示，但它不起作用。

```
function updatePostID(val)
{
    @Model.addcomment.PostID = val;
} 
```

在 Razor 视图中，如下所示

```
foreach(var post in Model.Post)
{
    <br/>
    <b>Posted by :</b> @post.Username <br/>
    <span>@post.Content</span> <br/>
    if(Model.loginuser == Model.username)
    {
        @Html.TextAreaFor(model => model.addcomment.Content)
        <button type="submit" onclick="updatePostID('@post.PostID');">Add Comment </button>
    }
} 
```

谁能告诉我如何在 JavaScript 中分配模型值？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-23T16:51:35.770

这应该工作

```
function updatePostID(val)
{
    document.getElementById('PostID').value = val;

    //and probably call document.forms[0].submit();
} 
```

然后有一个隐藏字段或其他控件`PostID`

```
@Html.Hidden("PostID", Model.addcomment.PostID)
//OR
@Html.HiddenFor(model => model.addcomment.PostID) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-23T16:25:51.267

模型 ( `@Model`) 仅在构建页面时存在。一旦页面在浏览器中呈现，所有存在的就是 HTML、JavaScript 和 CSS。

您要做的是将 PostID 放在隐藏字段中。由于 PostID 值是固定的，因此实际上不需要 JavaScript。一个简单的`@HtmlHiddenFor`就足够了。

但是，您需要将[foreach 循环更改为 for 循环](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。最终解决方案将如下所示：

```
for (int i = 0 ; i < Model.Post; i++)
{
    <br/>
    <b>Posted by :</b> @Model.Post[i].Username <br/>
    <span>@Model.Post[i].Content</span> <br/>
    if(Model.loginuser == Model.username)
    {
        @Html.HiddenFor(model => model.Post[i].PostID)
        @Html.TextAreaFor(model => model.addcomment.Content)
        <button type="submit">Add Comment</button>
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T17:01:11.143

您可以使用**jQuery 和 Ajax 调用**通过 Javascript 将特定更新发布回您的服务器。

它看起来像这样：

```
function updatePostID(val, comment)
{

    var args = {};
    args.PostID = val;
    args.Comment = comment;

    $.ajax({
     type: "POST",
     url: controllerActionMethodUrlHere,
     contentType: "application/json; charset=utf-8",
     data: args,
     dataType: "json",
     success: function(msg) 
     {
        // Something afterwards here

     }
    });

} 
```

# vba - 从 VB 代码中解除对 VBProject 的保护

> ID：16174469
> 
> 赞同：29
> 
> 时间：2013-04-23T16:24:22.960
> 
> 标签：vba, excel, excel-2007

如何从 vb 宏中取消保护我的 VB 项目？我找到了这段代码：

```
 Sub UnprotectVBProject(ByRef WB As Workbook, ByVal Password As String)
  Dim VBProj As Object
  Set VBProj = WB.VBProject
  Application.ScreenUpdating = False
  'Ne peut procéder si le projet est non-protégé.
  If VBProj.Protection <> 1 Then Exit Sub
  Set Application.VBE.ActiveVBProject = VBProj
  'Utilisation de "SendKeys" Pour envoyer le mot de passe.

  SendKeys Password & "~"
  SendKeys "~"
  'MsgBox "Après Mot de passe"
  Application.VBE.CommandBars(1).FindControl(ID:=2578, recursive:=True).Execute
  Application.Wait (Now + TimeValue("0:00:1"))

End Sub 
```

但此解决方案不适用于 Excel 2007。它在我的 IDE 中显示身份验证窗口和打印密码。

然后，我的目标是在不显示此窗口的情况下取消保护我的 VBproject。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-23T18:27:09.503

**编辑**：

将此转换为 VBA 和 VB.Net的[博客文章。](http://www.siddharthrout.com/index.php/2019/01/20/unprotect-vbproject-from-vb-code/)

我从来不赞成`Sendkeys`。它们在某些情况下是可靠的，但并非总是如此。不过，我对 API 有一个柔软的角落。

可以实现您想要的，但是您必须确保要取消保护 VBA 的工作簿必须在单独的 Excel 实例中打开。

这是一个例子

假设我们有一个工作簿，其 VBA 项目目前看起来像这样。

![在此处输入图像描述](https://i.stack.imgur.com/AzlJ6.png)

**逻辑**：

1.  使用查找“VBAProject Password”窗口的句柄`FindWindow`

2.  一旦找到，在该窗口中找到编辑框的句柄，使用`FindWindowEx`

3.  找到编辑框的句柄后，只需使用`SendMessage`写入即可。

4.  `Buttons`使用在该窗口中查找句柄`FindWindowEx`

5.  找到按钮的句柄后`OK`，只需使用`SendMessage`单击它即可。

**推荐**：

1.  对于 API，[这](http://allapi.mentalis.org/apilist/apilist.php)是我可以推荐的最佳链接。

2.  如果您希望精通 API `FindWindow`，`FindWindowEx`然后`SendMessage`获得一个工具，它可以为您提供系统进程、线程、窗口和窗口消息的图形视图。例如：uuSpy 或 Spy++。

这是 Spy++ 将向您显示的“VBAProject 密码”窗口

![在此处输入图像描述](https://i.stack.imgur.com/LEcu9.png)

**测试**：

打开一个新的 Excel 实例并将以下代码粘贴到模块中。

**代码**：

我已经对代码进行了注释，因此您理解它应该没有任何问题。

```
Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" _
(ByVal lpClassName As String, ByVal lpWindowName As String) As Long

Private Declare Function FindWindowEx Lib "user32" Alias "FindWindowExA" _
(ByVal hWnd1 As Long, ByVal hWnd2 As Long, ByVal lpsz1 As String, _
ByVal lpsz2 As String) As Long

Private Declare Function GetWindowText Lib "user32" Alias "GetWindowTextA" _
(ByVal hwnd As Long, ByVal lpString As String, ByVal cch As Long) As Long

Private Declare Function GetWindowTextLength Lib "user32" Alias _
"GetWindowTextLengthA" (ByVal hwnd As Long) As Long

Private Declare Function SendMessage Lib "user32" Alias "SendMessageA" _
(ByVal hwnd As Long, ByVal wMsg As Long, ByVal wParam As Long, lParam As Any) As Long

Dim Ret As Long, ChildRet As Long, OpenRet As Long
Dim strBuff As String, ButCap As String
Dim MyPassword As String

Const WM_SETTEXT = &HC
Const BM_CLICK = &HF5

Sub UnlockVBA()
    Dim xlAp As Object, oWb As Object

    Set xlAp = CreateObject("Excel.Application")

    xlAp.Visible = True

    '~~> Open the workbook in a separate instance
    Set oWb = xlAp.Workbooks.Open("C:\Sample.xlsm")

    '~~> Launch the VBA Project Password window
    '~~> I am assuming that it is protected. If not then
    '~~> put a check here.
    xlAp.VBE.CommandBars(1).FindControl(ID:=2578, recursive:=True).Execute

    '~~> Your passwword to open then VBA Project
    MyPassword = "Blah Blah"

    '~~> Get the handle of the "VBAProject Password" Window
    Ret = FindWindow(vbNullString, "VBAProject Password")

    If Ret <> 0 Then
        'MsgBox "VBAProject Password Window Found"

        '~~> Get the handle of the TextBox Window where we need to type the password
        ChildRet = FindWindowEx(Ret, ByVal 0&, "Edit", vbNullString)

        If ChildRet <> 0 Then
            'MsgBox "TextBox's Window Found"
            '~~> This is where we send the password to the Text Window
            SendMess MyPassword, ChildRet

            DoEvents

            '~~> Get the handle of the Button's "Window"
            ChildRet = FindWindowEx(Ret, ByVal 0&, "Button", vbNullString)

            '~~> Check if we found it or not
            If ChildRet <> 0 Then
                'MsgBox "Button's Window Found"

                '~~> Get the caption of the child window
                strBuff = String(GetWindowTextLength(ChildRet) + 1, Chr$(0))
                GetWindowText ChildRet, strBuff, Len(strBuff)
                ButCap = strBuff

                '~~> Loop through all child windows
                Do While ChildRet <> 0
                    '~~> Check if the caption has the word "OK"
                    If InStr(1, ButCap, "OK") Then
                        '~~> If this is the button we are looking for then exit
                        OpenRet = ChildRet
                        Exit Do
                    End If

                    '~~> Get the handle of the next child window
                    ChildRet = FindWindowEx(Ret, ChildRet, "Button", vbNullString)
                    '~~> Get the caption of the child window
                    strBuff = String(GetWindowTextLength(ChildRet) + 1, Chr$(0))
                    GetWindowText ChildRet, strBuff, Len(strBuff)
                    ButCap = strBuff
                Loop

                '~~> Check if we found it or not
                If OpenRet <> 0 Then
                    '~~> Click the OK Button
                    SendMessage ChildRet, BM_CLICK, 0, vbNullString
                Else
                    MsgBox "The Handle of OK Button was not found"
                End If
            Else
                 MsgBox "Button's Window Not Found"
            End If
        Else
            MsgBox "The Edit Box was not found"
        End If
    Else
        MsgBox "VBAProject Password Window was not Found"
    End If
End Sub

Sub SendMess(Message As String, hwnd As Long)
    Call SendMessage(hwnd, WM_SETTEXT, False, ByVal Message)
End Sub 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-05-09T15:39:07.663

我知道您已将其锁定以获取新答案，但上述代码存在一些问题，主要是我在 Office 64 位 (VBA7) 中工作。然而，我也这样做了，这样代码就可以在当前的 Excel 实例中工作，并添加了更多的错误检查并将其格式化以粘贴到单独的模块中，只`UnlockProject`暴露方法。

为了全面披露，我真的从[这篇文章](http://www.ozgrid.com/forum/showthread.php?t=174982&page=2#post_message_649012)中的代码开始，尽管它是一个主题的变体。

该代码还显示了条件编译常量，因此它应该同时兼容 32 位和 64 位风格的 Excel。我用[这个页面](https://msdn.microsoft.com/en-us/library/office/ee691831(v=office.14).aspx)来帮助我解决这个问题。

无论如何，这是代码。希望有人觉得它有用：

```
Option Explicit

#If VBA7 Then
    Private Declare PtrSafe Function FindWindowEx Lib "user32" Alias "FindWindowExA" (ByVal hwndParent As LongPtr, ByVal hwndChildAfter As LongPtr, ByVal lpszClass As String, ByVal lpszWindow As String) As LongPtr
    Private Declare PtrSafe Function GetParent Lib "user32" (ByVal hWnd As LongPtr) As LongPtr
    Private Declare PtrSafe Function GetDlgItem Lib "user32" (ByVal hDlg As LongPtr, ByVal nIDDlgItem As Long) As LongPtr ' nIDDlgItem = int?
    Private Declare PtrSafe Function GetDesktopWindow Lib "user32" () As LongPtr
    Private Declare PtrSafe Function SendMessage Lib "user32" Alias "SendMessageA" (ByVal hWnd As LongPtr, ByVal Msg As Long, ByVal wParam As Long, lParam As Any) As Long
    Private Declare PtrSafe Function SetFocusAPI Lib "user32" Alias "SetFocus" (ByVal hWnd As LongPtr) As LongPtr
    Private Declare PtrSafe Function LockWindowUpdate Lib "user32" (ByVal hWndLock As LongPtr) As Long
    Private Declare PtrSafe Function SetTimer Lib "user32" (ByVal hWnd As LongPtr, ByVal nIDEvent As LongPtr, ByVal uElapse As Long, ByVal lpTimerFunc As LongPtr) As LongPtr
    Private Declare PtrSafe Function KillTimer Lib "user32" (ByVal hWnd As LongPtr, ByVal uIDEvent As LongPtr) As Long
    Private Declare PtrSafe Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)
#Else
    Private Declare Function FindWindowEx Lib "user32" Alias "FindWindowExA" (ByVal hwndParent As Long, ByVal hwndChildAfter As Long, ByVal lpszClass As String, ByVal lpszWindow As String) As Long
    Private Declare Function GetParent Lib "user32" (ByVal hWnd As Long) As Long
    Private Declare Function GetDlgItem Lib "user32" (ByVal hDlg As Long, ByVal nIDDlgItem As Long) As Long ' nIDDlgItem = int?
    Private Declare Function GetDesktopWindow Lib "user32" () As Long
    Private Declare Function SendMessage Lib "user32" Alias "SendMessageA" (ByVal hWnd As Long, ByVal Msg As Long, ByVal wParam As Long, lParam As Any) As Long
    Private Declare Function SetFocusAPI Lib "user32" Alias "SetFocus" (ByVal hWnd As Long) As Long
    Private Declare Function LockWindowUpdate Lib "user32" (ByVal hWndLock As Long) As Long
    Private Declare Function SetTimer Lib "user32" (ByVal hWnd As Long, ByVal nIDEvent As Long, ByVal uElapse As Long, ByVal lpTimerFunc As Long) As Long
    Private Declare Function KillTimer Lib "user32" (ByVal hWnd As Long, ByVal uIDEvent As Long) As Long
    Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)
#End If

Private Const WM_CLOSE As Long = &H10
Private Const WM_GETTEXT As Long = &HD
Private Const EM_REPLACESEL As Long = &HC2
Private Const EM_SETSEL As Long = &HB1
Private Const BM_CLICK As Long = &HF5&
Private Const TCM_SETCURFOCUS As Long = &H1330&
Private Const IDPassword As Long = &H155E&
Private Const IDOK As Long = &H1&

Private Const TimeoutSecond As Long = 2

Private g_ProjectName    As String
Private g_Password       As String
Private g_Result         As Long
#If VBA7 Then
    Private g_hwndVBE        As LongPtr
    Private g_hwndPassword   As LongPtr
#Else
    Private g_hwndVBE        As Long
    Private g_hwndPassword   As Long
#End If

Sub Test_UnlockProject()
    Select Case UnlockProject(ActiveWorkbook.VBProject, "Test")
        Case 0: MsgBox "The project was unlocked"
        Case 2: MsgBox "The active project was already unlocked"
        Case Else: MsgBox "Error or timeout"
    End Select
End Sub

Public Function UnlockProject(ByVal Project As Object, ByVal Password As String) As Long

#If VBA7 Then
    Dim lRet As LongPtr
#Else
    Dim lRet As Long
#End If
Dim timeout As Date

    On Error GoTo ErrorHandler
    UnlockProject = 1

    ' If project already unlocked then no need to do anything fancy
    ' Return status 2 to indicate already unlocked
    If Project.Protection <> vbext_pp_locked Then
        UnlockProject = 2
        Exit Function
    End If

    ' Set global varaibles for the project name, the password and the result of the callback
    g_ProjectName = Project.Name
    g_Password = Password
    g_Result = 0

    ' Freeze windows updates so user doesn't see the magic happening :)
    ' This is dangerous if the program crashes as will 'lock' user out of Windows
    ' LockWindowUpdate GetDesktopWindow()

    ' Switch to the VBE
    ' and set the VBE window handle as a global variable
    Application.VBE.MainWindow.Visible = True
    g_hwndVBE = Application.VBE.MainWindow.hWnd

    ' Run 'UnlockTimerProc' as a callback
    lRet = SetTimer(0, 0, 100, AddressOf UnlockTimerProc)
    If lRet = 0 Then
        Debug.Print "error setting timer"
        GoTo ErrorHandler
    End If

    ' Switch to the project we want to unlock
    Set Application.VBE.ActiveVBProject = Project
    If Not Application.VBE.ActiveVBProject Is Project Then GoTo ErrorHandler

    ' Launch the menu item Tools -> VBA Project Properties
    ' This will trigger the password dialog
    ' which will then get picked up by the callback
    Application.VBE.CommandBars.FindControl(ID:=2578).Execute

    ' Loop until callback procedure 'UnlockTimerProc' has run
    ' determine run by watching the state of the global variable 'g_result'
    ' ... or backstop of 2 seconds max
    timeout = Now() + TimeSerial(0, 0, TimeoutSecond)
    Do While g_Result = 0 And Now() < timeout
        DoEvents
    Loop
    If g_Result Then UnlockProject = 0

ErrorHandler:
    ' Switch back to the Excel application
    AppActivate Application.Caption

    ' Unfreeze window updates
    LockWindowUpdate 0

End Function

#If VBA7 Then
    Private Function UnlockTimerProc(ByVal hWnd As LongPtr, ByVal uMsg As Long, ByVal idEvent As LongPtr, ByVal dwTime As Long) As Long
#Else
    Private Function UnlockTimerProc(ByVal hWnd As Long, ByVal uMsg As Long, ByVal idEvent As Long, ByVal dwTime As Long) As Long
#End If

#If VBA7 Then
    Dim hWndPassword As LongPtr
    Dim hWndOK As LongPtr
    Dim hWndTmp As LongPtr
    Dim lRet As LongPtr
#Else
    Dim hWndPassword As Long
    Dim hWndOK As Long
    Dim hWndTmp As Long
    Dim lRet As Long
#End If
Dim lRet2 As Long
Dim sCaption As String
Dim timeout As Date
Dim timeout2 As Date
Dim pwd As String

    ' Protect ourselves against failure :)
    On Error GoTo ErrorHandler

    ' Kill timer used to initiate this callback
    KillTimer 0, idEvent

    ' Determine the Title for the password dialog
    Select Case Application.LanguageSettings.LanguageID(msoLanguageIDUI)
        ' For the japanese version
        Case 1041
            sCaption = ChrW(&H30D7) & ChrW(&H30ED) & ChrW(&H30B8) & _
                        ChrW(&H30A7) & ChrW(&H30AF) & ChrW(&H30C8) & _
                        ChrW(&H20) & ChrW(&H30D7) & ChrW(&H30ED) & _
                        ChrW(&H30D1) & ChrW(&H30C6) & ChrW(&H30A3)
        Case Else
            sCaption = " Password"
    End Select
    sCaption = g_ProjectName & sCaption

    ' Set a max timeout of 2 seconds to guard against endless loop failure
    timeout = Now() + TimeSerial(0, 0, TimeoutSecond)
    Do While Now() < timeout

        hWndPassword = 0
        hWndOK = 0
        hWndTmp = 0

        ' Loop until find a window with the correct title that is a child of the
        ' VBE handle for the project to unlock we found in 'UnlockProject'
        Do
            hWndTmp = FindWindowEx(0, hWndTmp, vbNullString, sCaption)
            If hWndTmp = 0 Then Exit Do
        Loop Until GetParent(hWndTmp) = g_hwndVBE

        ' If we don't find it then could be that the calling routine hasn't yet triggered
        ' the appearance of the dialog box
        ' Skip to the end of the loop, wait 0.1 secs and try again
        If hWndTmp = 0 Then GoTo Continue

        ' Found the dialog box, make sure it has focus
        Debug.Print "found window"
        lRet2 = SendMessage(hWndTmp, TCM_SETCURFOCUS, 1, ByVal 0&)

        ' Get the handle for the password input
        hWndPassword = GetDlgItem(hWndTmp, IDPassword)
        Debug.Print "hwndpassword: " & hWndPassword

        ' Get the handle for the OK button
        hWndOK = GetDlgItem(hWndTmp, IDOK)
        Debug.Print "hwndOK: " & hWndOK

        ' If either handle is zero then we have an issue
        ' Skip to the end of the loop, wait 0.1 secs and try again
        If (hWndTmp And hWndOK) = 0 Then GoTo Continue

        ' Enter the password ionto the password box
        lRet = SetFocusAPI(hWndPassword)
        lRet2 = SendMessage(hWndPassword, EM_SETSEL, 0, ByVal -1&)
        lRet2 = SendMessage(hWndPassword, EM_REPLACESEL, 0, ByVal g_Password)

        ' As a check, get the text back out of the pasword box and verify it's the same
        pwd = String(260, Chr(0))
        lRet2 = SendMessage(hWndPassword, WM_GETTEXT, Len(pwd), ByVal pwd)
        pwd = Left(pwd, InStr(1, pwd, Chr(0), 0) - 1)
        ' If not the same then we have an issue
        ' Skip to the end of the loop, wait 0.1 secs and try again
        If pwd <> g_Password Then GoTo Continue

        ' Now we need to close the Project Properties window we opened to trigger
        ' the password input in the first place
        ' Like the current routine, do it as a callback
        lRet = SetTimer(0, 0, 100, AddressOf ClosePropertiesWindow)

        ' Click the OK button
        lRet = SetFocusAPI(hWndOK)
        lRet2 = SendMessage(hWndOK, BM_CLICK, 0, ByVal 0&)

        ' Set the gloabal variable to success to flag back up to the initiating routine
        ' that this worked
        g_Result = 1
        Exit Do

        ' If we get here then something didn't work above
        ' Wait 0.1 secs and try again
        ' Master loop is capped with a longstop of 2 secs to terminate endless loops
Continue:
        DoEvents
        Sleep 100
    Loop
    Exit Function

    ' If we get here something went wrong so close the password dialog box (if we have a handle)
    ' and unfreeze window updates (if we set that in the first place)
ErrorHandler:
    Debug.Print Err.Number
    If hWndPassword <> 0 Then SendMessage hWndPassword, WM_CLOSE, 0, ByVal 0&
    LockWindowUpdate 0

End Function

#If VBA7 Then
    Function ClosePropertiesWindow(ByVal hWnd As LongPtr, ByVal uMsg As Long, ByVal idEvent As LongPtr, ByVal dwTime As Long) As Long
#Else
    Function ClosePropertiesWindow(ByVal hWnd As Long, ByVal uMsg As Long, ByVal idEvent As Long, ByVal dwTime As Long) As Long
#End If

#If VBA7 Then
    Dim hWndTmp As LongPtr
    Dim hWndOK As LongPtr
    Dim lRet As LongPtr
#Else
    Dim hWndTmp As Long
    Dim hWndOK As Long
    Dim lRet As Long
#End If
Dim lRet2 As Long
Dim timeout As Date
Dim sCaption As String

    ' Protect ourselves against failure :)
    On Error GoTo ErrorHandler

    ' Kill timer used to initiate this callback
    KillTimer 0, idEvent

    ' Determine the Title for the project properties dialog
    sCaption = g_ProjectName & " - Project Properties"
    Debug.Print sCaption

    ' Set a max timeout of 2 seconds to guard against endless loop failure
    timeout = Now() + TimeSerial(0, 0, TimeoutSecond)
    Do While Now() < timeout

        hWndTmp = 0

        ' Loop until find a window with the correct title that is a child of the
        ' VBE handle for the project to unlock we found in 'UnlockProject'
        Do
            hWndTmp = FindWindowEx(0, hWndTmp, vbNullString, sCaption)
            If hWndTmp = 0 Then Exit Do
        Loop Until GetParent(hWndTmp) = g_hwndVBE

        ' If we don't find it then could be that the calling routine hasn't yet triggered
        ' the appearance of the dialog box
        ' Skip to the end of the loop, wait 0.1 secs and try again
        If hWndTmp = 0 Then GoTo Continue

        ' Found the dialog box, make sure it has focus
        Debug.Print "found properties window"
        lRet2 = SendMessage(hWndTmp, TCM_SETCURFOCUS, 1, ByVal 0&)

        ' Get the handle for the OK button
        hWndOK = GetDlgItem(hWndTmp, IDOK)
        Debug.Print "hwndOK: " & hWndOK

        ' If either handle is zero then we have an issue
        ' Skip to the end of the loop, wait 0.1 secs and try again
        If (hWndTmp And hWndOK) = 0 Then GoTo Continue

        ' Click the OK button
        lRet = SetFocusAPI(hWndOK)
        lRet2 = SendMessage(hWndOK, BM_CLICK, 0, ByVal 0&)

        ' Set the gloabal variable to success to flag back up to the initiating routine
        ' that this worked
        g_Result = 1
        Exit Do

        ' If we get here then something didn't work above
        ' Wait 0.1 secs and try again
        ' Master loop is capped with a longstop of 2 secs to terminate endless loops
Continue:
        DoEvents
        Sleep 100
    Loop
    Exit Function

    ' If we get here something went wrong so unfreeze window updates (if we set that in the first place)
ErrorHandler:
    Debug.Print Err.Number
    LockWindowUpdate 0

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-11T05:10:38.063

@James Macadie 的答案（上图）是我找到的最好的答案（我正在运行 32 位 Excel 365/2019）

**注意**：我发现你必须有`Application.ScreenUpdating = True`才能通过不同的子或函数调用 James 的方法。否则，您可能会收到`Invalid procedure call or argument`错误消息（如果在调试模式之外运行）。

此解决方案似乎优于以下两种：

1.  [http://www.siddharthout.com/index.php/2019/01/20/unprotect-vbproject-from-vb-code/](http://www.siddharthrout.com/index.php/2019/01/20/unprotect-vbproject-from-vb-code/)。创建一个单独的 Excel 应用程序实例来运行不适用于我的用例的解锁过程

2.  [https://www.mrexcel.com/board/threads/lock-unlock-vbaprojects-programmatically-without-sendkeys.1136415/](https://www.mrexcel.com/board/threads/lock-unlock-vbaprojects-programmatically-without-sendkeys.1136415/)。不稳定并且如果按顺序运行多个工作簿会失败，我认为由于缺乏在詹姆斯的解决方案中实现的计时器/等待循环 - 我没有彻底调试问题

# unity3d - Unity Javascript - Mecanim 动画状态

> ID：16174470
> 
> 赞同：1
> 
> 时间：2013-04-23T16:24:23.413
> 
> 标签：unity3d, unityscript

我这里有个大问题。我需要知道我目前处于哪个动画师状态，以便让某些事情发生。我一直在搜索这个问题，但是因为 mecanim 动画太新了，所以没有太多关于它的信息。至少不适合统一脚本。

希望有人能帮忙，

谢谢，罗伯特丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:30:15.823

不幸的是我不懂 JS，但是下面的 C# 行应该很容易翻译。动画师。[GetCurrentAnimatorStateInfo](http://docs.unity3d.com/Documentation/ScriptReference/Animator.GetCurrentAnimatorStateInfo.html)返回一个描述当前动画状态的[AnimatorStateInfo结构。](http://docs.unity3d.com/Documentation/ScriptReference/AnimatorStateInfo.html)

```
int stateId = Animator.StringToHash("Base Layer.State Name"); 
Animator anim = GetComponent<Animator>();
AnimatorStateInfo currentBaseState = anim.GetCurrentAnimatorStateInfo(0);

if (currentBaseState.nameHash == stateId )
{
  //you are in stateId
} 
```

就像您在上面的示例中看到的那样，动画状态的名称被散列（出于性能原因），因此您必须使用[Animator.StringToHash](http://docs.unity3d.com/Documentation/ScriptReference/Animator.StringToHash.html)对状态名称进行散列，以便检索与该特定状态关联的整数 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T20:51:50.690

它不工作试试这个： print (currentBaseState.nameHash +" "+ stateId);

并播放动画。它们不一样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T19:05:10.040

NOVA，我意识到你的答案是 2 年前的，但如果你使用“完整路径”而不是 .nameHash，它就会匹配。

obl.GetCurrentAnimatorStateInfo (0).fullPathHash == Animator.StringToHash ("Base Layer.StateName")

# ios - Core Data fetchedresultscontroller 仅在设备上返回空

> ID：16174488
> 
> 赞同：0
> 
> 时间：2013-04-23T16:25:48.087
> 
> 标签：ios, core-data, device, nsfetchedresultscontroller

我编写了一个使用核心数据的应用程序，它在模拟器和设备上都运行良好。然后我创建了一个新的项目 git 分支，它在模拟器上完美运行，但在设备上却不行。

这是代码`fetchedResultsController`

```
-(NSFetchedResultsController *)fetchedResultsController{
    if (_fetchedResultsController != nil) {
        NSLog(@"Fetched Controler : %@", _fetchedResultsController);
        return _fetchedResultsController;
    }
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Membership" inManagedObjectContext:managedObjectContext];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"userdata.email == %@",    [[NSUserDefaults standardUserDefaults] stringForKey:@"email"]];    
    NSSortDescriptor *sort1 = [[NSSortDescriptor alloc]initWithKey:@"type" ascending:NO];
    NSSortDescriptor *sort2 = [[NSSortDescriptor alloc]initWithKey:@"membership_name" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc]initWithObjects:sort1,sort2, nil];
    [fetchRequest setEntity:entity];
    [fetchRequest setPredicate:predicate];
    [fetchRequest setSortDescriptors:sortDescriptors];

    _fetchedResultsController = [[NSFetchedResultsController alloc]initWithFetchRequest:fetchRequest managedObjectContext:managedObjectContext sectionNameKeyPath:@"type" cacheName:nil];
    return _fetchedResultsController;
} 
```

然后我会出现视图中的对象。

```
-(void)viewWillAppear:(BOOL)animated{
    NSError *error;
    [[self fetchedResultsController]performFetch:&error];
    [self.tableView reloadData];
} 
```

被`managed object context`传递`appDelegate`到登录视图，然后从 loginView 传递到第二个视图。第二种观点是我遇到问题的地方

我能想到的唯一一件事是设备上的内存限制或可能是并发问题发生了一些事情？
如果创建了任何线程，我不是故意的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:15:35.100

看来你的谓词

```
NSPredicate *predicate = 
   [NSPredicate predicateWithFormat:@"userdata.email == %@",    
   [[NSUserDefaults standardUserDefaults] stringForKey:@"email"]]; 
```

正在返回一个空集。记录此用户默认值，我相信这将被清除。

# .net - 是否有任何适用于 .NET 的 SPDY/WebSockets 库可用？

> ID：16174494
> 
> 赞同：2
> 
> 时间：2013-04-23T16:26:00.487
> 
> 标签：.net, windows-8, microsoft-metro, websocket, spdy

我想开发一个 Windows 8 Metro 风格的应用程序，想知道是否有任何可用的 SPDY 或 Websockets 协议库？他们也应该是免费的:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:36:02.550

## 网络套接字

可以在此处找到 WebSocket 客户端（包括 .NET 客户端）的列表：http: [//www.leggetter.co.uk/real-time-web-technologies-guide#websocket-client-libraries](http://www.leggetter.co.uk/real-time-web-technologies-guide#websocket-client-libraries)

.NET 4.5 有一个 WebSocket 命名空间和许多类：http: [//msdn.microsoft.com/en-us/library/hh159285.aspx](http://msdn.microsoft.com/en-us/library/hh159285.aspx)

似乎还有一个 Windows Store 应用程序特定类（MessageWebSocket）：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.networking.sockets.messagewebsocket.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.sockets.messagewebsocket.aspx)

[您可以在此处](https://github.com/digitalcreations/Pusher.NET/blob/master/Pusher.Connections.WindowsStore/WebSocket.cs#L12)查看使用此示例的示例

# java - 定义生成密钥的密钥

> ID：16174497
> 
> 赞同：1
> 
> 时间：2013-04-23T16:26:07.737
> 
> 标签：java, macos, security, aes, secret-key

我正在制作一个关于 Java 安全性的项目。服务器收到一个密码，这个密码应该插入 MAC 以验证一个特定文件的一致性。

```
Mac m;
SecretKey sk;
sk = KeyGenerator.getInstance( "AES" ).keygenerator();/* what i don't want to use */
byte[]mac=null;
Mac m = Mac.getInstance("HmacSHA1");
m.init( password ); /* it's wrong */
m.update("work of security".getBytes());
mac = m.doFinal(); 
```

我能理解的是如何定义一个`SecretKey`to MAC init ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:51:20.017

用于从密码派生 AES 密钥的两种典型方法是：

1.  使用密码的原始字节。这个选项不是很强大（受到微不足道的[字典攻击](http://en.wikipedia.org/wiki/Dictionary_attack)）并且依赖于密码正好是 128/192/256 位。

2.  使用函数派生密钥，例如 PBKDF2。

您需要找出密钥是如何派生的。代码中的两个选项是：

**原始字节**

```
SecretKey aesKey = new SecretKeySpec(password.getBytes(someCharset), "AES"); 
```

**推导函数**

PBKDF2 示例：

```
SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
SecretKey aesKey = factory.generateSecret(new PBEKeySpec(password, salt,
      iterations, 256)); 
```

该`salt`值是一个随机字节数组（即可能是八个字节）。可以以`iterations`牺牲性能为代价提高安全性。

# .net - 使用单个字符作为具有 specflow 功能的参数

> ID：16174503
> 
> 赞同：0
> 
> 时间：2013-04-23T16:26:21.067
> 
> 标签：.net, parsing, parameters, specflow, gherkin

我很难弄清楚我在 VS2012 和/或 VS2010 中的规范流程功能出了什么问题

如果该字符包含在步骤表达式中的其他任何位置，我根本无法在步骤中使用单个字符作为参数

它永远无法正确解析，我尝试过各种方法，包括使用引号等，但似乎无法使用单个字符。

请有人确认这是预期的或已知的问题，甚至我只是做错了什么？

我尝试过使用 SpecFlow 1.9.1 和 1.9.2（最新版本），但都不起作用。

显示我的问题的一个简单示例是以下功能/步骤

特征

```
Feature: Test1
    In order to check the id of an object using a character
    As a frustrated developer
    I want to define a step with a single char as a parameter

@mytag
Scenario: Test single char param of character existing in phrase
    Given I have an array of 8 characters   
    Then the array should contain the character a

Scenario: Test single char param of character not existing in phrase
    Given I have an array of 8 characters   
    Then the array should contain the character z 
```

脚步

```
public class TestSpecFlow1Steps
{
    char[] charArray = new char[] { 'a', 'b', 'c', 'd', 'e', 'x', 'y', 'z' };

    [Given(@"I have an array of (.*) characters")]
    public void CheckArrayCount(int arrayCount)
    {
        Assert.AreEqual(charArray.Length, arrayCount);
    }

    [Then(@"the array should contain the character (.*)")]
    public void CheckCharaExists(char val)
    {
        Assert.AreEqual(true, charArray.Contains(val));
    }

} 
```

对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:12:50.310

我认为这是 SpecFlow 的 VS 插件中的一个已知错误。他们用来应用格式的正则表达式找到了错误的字符，如第一个 Then 所示。但是，这并不意味着您的测试有任何问题。正如您在此处看到的，测试通过了。

![在此处输入图像描述](https://i.stack.imgur.com/ZbDvT.png)

（哎呀，刚刚发现你在上面说的正是，当你更新你的问题时，我会更新这个答案）

# php - 在php中按色调排序颜色

> ID：16174504
> 
> 赞同：2
> 
> 时间：2013-04-23T16:26:22.530
> 
> 标签：php, sorting, colors, rgb, hsv

大家好，

我想对颜色进行排序，以便它们井井有条（以相似的颜色组合在一起的方式）

我在论坛的某个地方找到了这个函数“rgb2hsl”（对不起，如果我不记得链接了）将 RGB 值转换为 HSL，然后按 H、S、L 排序。

结果还可以，但远不能令人满意，因为一些浅色与深色混合在一起：

以下是 php 中的整个脚本：您能否帮助调整函数以更好地对颜色进行分组？

提前致谢。

```
<?php
function rgb2hsl ($R, $G, $B)  
{                                 

   $var_R = ($R / 255);
   $var_G = ($G / 255);
   $var_B = ($B / 255);

   $var_Min = min($var_R, $var_G, $var_B);
   $var_Max = max($var_R, $var_G, $var_B);
   $del_Max = $var_Max - $var_Min;

   $V = $var_Max;

   if ($del_Max == 0)
   {
      $H = 0;
      $S = 0;
   }
   else
   {
      $S = $del_Max / $var_Max;

      $del_R = ( ( ( $var_Max - $var_R ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;
      $del_G = ( ( ( $var_Max - $var_G ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;
      $del_B = ( ( ( $var_Max - $var_B ) / 6 ) + ( $del_Max / 2 ) ) / $del_Max;

      if      ($var_R == $var_Max) $H = $del_B - $del_G;
      else if ($var_G == $var_Max) $H = ( 1 / 3 ) + $del_R - $del_B;
      else if ($var_B == $var_Max) $H = ( 2 / 3 ) + $del_G - $del_R;

      if ($H<0) $H++;
      if ($H>1) $H--;
   }

    $HSL = array();
   $HSL['H'] = $H;
   $HSL['S'] = $S;
   $HSL['L'] = $V;

   return $HSL;
}

function hex2rgb( $colour ) 
{
        if ( $colour[0] == '#' ) 
        {
            $colour = substr( $colour, 1 );
        }
        if ( strlen( $colour ) == 6 ) {
                list( $r, $g, $b ) = array( $colour[0] . $colour[1], $colour[2] . $colour[3], $colour[4] . $colour[5] );
        } elseif ( strlen( $colour ) == 3 ) {
                list( $r, $g, $b ) = array( $colour[0] . $colour[0], $colour[1] . $colour[1], $colour[2] . $colour[2] );
        } else {
                return false;
        }
        $r = hexdec( $r );
        $g = hexdec( $g );
        $b = hexdec( $b );
        return array( 'R' => $r, 'G' => $g, 'B' => $b );
}

function cmp($a, $b)
{
    $rgb1 = hex2rgb($a);
    $rgb2 = hex2rgb($b);

    $hsl1 = rgb2hsl($rgb1['R'], $rgb1['G'], $rgb1['B']);
    $hsl2 = rgb2hsl($rgb2['R'], $rgb2['G'], $rgb2['B']);

    $h1 = $hsl1['H'];
    $s1 = $hsl1['S'];
    $l1 = $hsl1['L'];

    $h2 = $hsl2['H'];
    $s2 = $hsl2['S'];
    $l2 = $hsl2['L'];

    if($h1 == $h2 && $s1 == $s2 && $l1 == $l2)
    {
        return 0;
    }
    else
    {   
        if  (($h1 > $h2) || 
            (($h1 == $h2) && ($s1 > $s1) ) ||
            (($h1 == $h2) && ($s1 == $s1) &&  ($l1  > $l2)))
        {
            return 1;
        }
        else 
        {
            return -1;
        }
    }

}

$a = array(
"#000000","#FFFFFF","#642424","#CC0605","#CB2821","#A2231D",
"#AF2B1E","#BF4435","#F54021","#C93C20","#FFDDD6","#F44611","#F75E25","#C1876B",
"#FABFA1","#734222","#FF7514","#FFCC99","#8A6642","#FDF4E3","#F3A505","#C6A664",
"#F4A900","#C2B078","#F5CB21","#E6D690","#FAD201","#E1CC4F","#F3DA0B","#7E7B52",
"#FFFCC1","#B8B799","#F8F32B","#FFFF99","#EDFF21","#B8CE3B","#424632","#343B29",
"#85BD3E","#31372B","#79BB51","#89AC76","#4FAE2E","#C0DEBC","#2D572C","#8D948D",
"#1CA744","#1E5945","#39B49F","#3F888F","#439AA4","#256D7B","#434B4D","#293133",
"#008FB7","#0D3A4D","#D0E6F1","#474B4E","#2271B3","#0E294B","#0B2C59","#0E3987",
"#4170CC","#1D1E33","#A49FC7","#6C3EC3","#261448","#986DE9","#37225D","#260B3E",
"#D8C6DE","#6C4675","#FFA3FF","#E54EE5","#6D3F5B","#D569A7","#A03472","#9E1A65",
"#421C31","#CF3476","#DE4C8A","#4A192C","#641C34","#F8C5CE","#EA899A","#412227",
"#5E2129","#9B111E","#75151E","#D60B11","#D36E70","#D53032" );  

usort($a, "cmp");

foreach ($a as $key => $value) 
{
    echo "<div style=\"width:390px; height:40px; background:$value;\"> $value</div>";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T18:28:03.430

除非您首先定义要使用的配色方案，即如果您想自动化它，否则您不能将随机颜色从美学上列出在一起。

该网站向您展示如何使用不同的配色方案：[http ://colorschemedesigner.com/](http://colorschemedesigner.com/)

您可以做的是使用 HSV r HSL 计算所有颜色的色调并制作颜色组（一组中的最大颜色不应超过 5 个）。

TBH 虽然标准配色只是在一定程度上方便你，但有很多配色看起来真的很棒，但由于标准配色没有考虑饱和度和感知亮度，它们完全违反了标准配色。例如[http://www.colourloves.com/palettes](http://www.colourlovers.com/palettes)

现在我不想让你离开道路，所以我的建议是不要自己选择托盘，而是选择一些随机色调并通过选择特定的配色方案来计算其余的色调/色调/饱和度。

# iframe - iframe 中加载的内容是否会影响 Google Analytics（分析）“页面加载时间”？

> ID：16174505
> 
> 赞同：1
> 
> 时间：2013-04-23T16:26:22.990
> 
> 标签：iframe, google-analytics

GA 报告我的页面加载时间非常长，我怀疑这是因为我在 i-frame 中加载加载缓慢的广告，但是我不确定 GA 在计算“页面加载”时是否计算 iframe 中加载的内容时间”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:38:51.467

我进行了一些测试并确认在 Chrome/Firefox 中将外部内容加载到 iframe 中（来自慢速源）确实增加了 Google Analytics 中的“平均页面加载时间”。

# python - 无法从 python 发送带有附件的电子邮件？

> ID：16174506
> 
> 赞同：2
> 
> 时间：2013-04-23T16:26:24.720
> 
> 标签：python, python-2.7, smtp

```
import smtplib
from email.MIMEMultipart import MIMEMultipart
from email.MIMEText import MIMEText
from email.MIMEImage import MIMEImage

msg = MIMEMultipart('multipart/related')

fromaddr = 'from@gmail.com'
toaddrs = 'to@gmail.com'

#provide gmail user name and password
username = 'to@gmail.com'
password = 'messifan'

filename = "1.jpg"
f = file(filename)
attachment = MIMEImage(f.read()) # error here
attachment.add_header('Content-Disposition', 'attachment', filename=filename)
.
.
server.sendmail(fromaddr, toaddrs, msg.as_string()) 
```

我正在使用此代码发送电子邮件。我可以使用此脚本附加文本文件。（将 MIMEImage 转换为 MIMEtext）。但无法附加图像。**错误是无法猜测图像 mime 子类型**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-11T07:39:05.880

尝试

```
attachment = MIMEImage(f.read(), _subtype="jpeg") # error here 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T16:37:15.183

这里有点猜测，但也许尝试以二进制模式打开文件？

```
f = file(filename, 'rb') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-28T15:15:03.747

Looks to me like you created a "file" object, but you never opened it.

Where you have:

```
f = file(filename)
attachment = MIMEImage(f.read()) # error here 
```

I think you instead need:

```
fp = open(filename, 'rb')
attachment = MIMEImage(fp.read())
fp.close() 
```

# parsing - 使用替换运算符从字符串中删除多余的文本

> ID：16174507
> 
> 赞同：0
> 
> 时间：2013-04-23T16:26:37.327
> 
> 标签：parsing, powershell

我在表单中有一个 Active Directory 组名称列表

`cn=GROUPA,ou=Dept1,ou=Departmental Groups,ou=GROUPS1,dc=test,dc=server,dc=com`

我想知道是否有办法使用 -replace 函数删除所有“ou=”和“dc=”部分。我知道我可以使用

`-replace "ou=Dept1",""`

但我想知道是否有一种方法可以在不知道 Dept1 部分的情况下替换“ou=Dept1”，因为并非所有组名都包含 Dept1，而是使用其他名称。我在想也许可以通过某种方式使用`select-string`a `-notlike`，但我还没有找到一种方法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:14:43.263

从另一个方向来：

```
-replace '.+?(dc=.+)','$1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:31:36.843

是的，只需使用替换...

```
$myOUString.Replace(",ou",",dc") 
```

将每个 ,cn 替换为 ,dn 并确保如果有一个包含 ou 的组由于其他原因你没问题，例如*Thousands*不会变成*thdcsands*。

```
$myOuString -Replace ",ou",",dc" should also work. 
```

无论哪种方式，您的示例中都不需要通配符，因为您不想将 ou=ForgottenUsers 替换为 dc=

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T16:34:42.220

删除所有 ou= 和 dc=

```
-replace 'dc=.+?,|dc=.+$|ou=.+?,','' 
```

它会给你留下`cn=GROUPA,`. 如果您实际上只想要 cn 部分，您可以这样做：

```
-match '(cn=.+?),' | Out-Null
$matches[1] 
```

在问题的第二部分中，您可以在不知道名称的情况下替换 ou= 部分，如下所示：

```
-replace 'ou=.+?', 'ou=test,' 
```

# php - 而循环除法低于确定的数字

> ID：16174514
> 
> 赞同：0
> 
> 时间：2013-04-23T16:26:58.233
> 
> 标签：php, while-loop, division

此代码将分数除以数字 5。

$rows[score] 在数据库中等于 6600。

```
<?php
    $i = $rows[score]; //score is 6600 in the database
    while ($i >= 5) {
        echo $i = $i /2; 
        echo "<br>";
}
?> 
```

这是我的浏览器输出的内容：

3300

1650

825

412.5

206.25

103.125

51.5625

25.78125

12.890625

6.4453125

3.22265625

**我不明白为什么浏览器输出最后一个 3.22 - 如何停止循环回显小于 5 的最后一个？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:29:47.970

这里没有错，你得到的最后一个值是 from `6.4453125 / 2 = 3.22265625`since`6.4453125`仍然大于`5`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:29:45.003

因为6高于5？所以它又做了一个循环，使 $i 3.2 在循环停止的地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:30:34.773

如果`($i<5)`它不会进入循环，但在您检查之前无法知道。`$i = 6.4453125`最后一次检查，所以它进入循环并将其除以 2，使其小于 5，因此它不会再次进入循环并停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T16:44:59.670

我找到了回答我自己问题的方法，因此页面上不会显示 3,22。

```
<?php
$i = $rows[score]; //score is 6600 in the database
while ($i >= 5) {
    $i = $i /2; 

    if($i >= 5) {
    echo $i;
    echo "<br>";
    }
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T17:03:23.693

由于您在显示结果之前立即除以 2，因此您希望在 $i >= (5*2) 即 $i >= 10，而不是 5 时停止循环。

```
<?php
$i = $rows[score]; //score is 6600 in the database
while ($i >= 10) {
    echo $i = $i /2; 
    echo "<br>";
}
?> 
```

这给出了：

```
3300
1650
825
412.5
206.25
103.125
51.5625
25.78125
12.890625
6.4453125 
```

# asp.net-mvc-3 - asp.net MVC 内存流 DICOM 图像到会话变量

> ID：16174516
> 
> 赞同：0
> 
> 时间：2013-04-23T16:27:07.443
> 
> 标签：asp.net-mvc-3, image, session-variables, dicom

我正在使用以下方法从 DICOM 文件动态生成图像：

```
 public ActionResult Generatemage()
        {
            FileContentResult data;
.....
    objImage = im.Bitmap(outputSize, PixelFormat.Format24bppRgb, m);

    using (var memStream = new MemoryStream())
    {
        objImage.Save(memStream, ImageFormat.Png);
        data = this.File(memStream.GetBuffer(), "image/png");
    }
      return data;
        } 
```

我可以将图像存储为会话变量，以便使用 Point3D 对其进行修改吗？我尝试使用：

```
 Bitmap data = (Bitmap)Session["newimage"]; 
```

得到这两个错误：

```
Cannot implicitly convert type 'System.Drawing.Bitmap' to 'System.Web.Mvc.FileContentResult' and 
A local variable named 'data' is already defined in this scope 
```

我会很感激你的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:15:36.173

> 我可以将图像存储为会话变量，以便使用 Point3D 对其进行修改吗？

我建议不要那样做。如果您还没有[阅读 Nathanael 关于图像调整大小陷阱的帖子，](http://www.nathanaeljones.com/blog/2009/20-image-resizing-pitfalls)那么我建议您现在就阅读。它可能是在谈论调整大小，但它也给出**了一般处理图像的**提示。在第 3 点它说：

> 通过将文件加载到内存来从磁盘提供文件。想想你的服务器有多少内存，单个图像有多大，在用户下载它之前它必须在内存中保留多长时间，以及你有多少用户请求图像。

在您的特定情况下，您可以将*“在用户完成下载之前”*替换为*“在 Point3D 完成处理图像之前”*。所以，我的建议是你得到那个文件的句柄，比如说可能有一个`Id`唯一标识每个用户`Id`的文件，当需要用 Point3D 处理它时使用它来检索文件，将它加载到一个`MemoryStream`（假设 Point3D 可以使用 mem.stream)，处理它，然后处理它。以这种方式，您仅在“Point3D 处理”期间保留图像。

> 无法将类型“System.Drawing.Bitmap”隐式转换为“System.Web.Mvc.FileContentResult”，并且此范围内已定义名为“data”的局部变量

这很可能是因为您已这样定义`data`：

```
FileContentResult data; 
```

然后你正在做一个：

```
Bitmap data = (Bitmap)Session["newimage"]; 
```

同一范围内两种不同类型的相同变量。

# asp.net-mvc - 将 EF CodeFirst 部署到服务器时遇到问题

> ID：16174523
> 
> 赞同：0
> 
> 时间：2013-04-23T16:27:28.707
> 
> 标签：asp.net-mvc, entity-framework, sql-server-express, webdeploy

我有一个最初使用 LocalDb 的 CodeFirst Web 应用程序。我将连接字符串更改为：

```
<add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=.\SqlExpress;Initial Catalog=aspnet-BatchFindings;Integrated Security=True" /> 
```

我使用服务器资源管理器创建了适当的数据库。

我正在使用 WebDeploy 发布到运行 IIS8 的 Windows Server 2012 实例。

发布后，我无法使用该应用程序；它没有数据库的权限。然后我将身份更改为用户帐户，现在我没有收到数据库错误。除了应用程序似乎没有将任何数据保存到数据库中。我完全不知所措-感谢任何帮助！

回顾：实体框架，Code First Web 部署到 IIS 8 自定义应用程序池，身份设置为用户帐户

数据未存储在数据库中。

编辑：我希望能够简单地使用 Web Deploy 并让它使用自己的数据库（因此它不会从我的数据库中获取测试数据），但这太令人沮丧了！我正在发布，连接字符串应该可以工作，不知道我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:43:26.927

愚蠢的问题，但您是否在数据操作后调用 DbContext SaveChanges() 方法 - 数据保存在测试时有效？

您还可以在测试（调试）和部署（发布版本）时使用不同的 web.config 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:15:30.913

所以我无意中找出了它不保存的原因。由于某种原因，在我的测试环境中一切正常，但是当它被推出时，我需要添加以下行：

```
db.Entry(obj).State = System.Data.EntityState.Added; 
```

我查看了该教程，该教程似乎可以正常工作，直到它进入该 Grant.sql 文件。Visual Studio 中没有连接选项。

在这种情况下，为了让数据库正常工作，我最终所做的是将我的应用程序池设置为在为此目的创建的用户身份下运行，同时将 Load User Profile 设置为 True。您也可以作为 LocalSystem 运行（只要您创建以下文件夹：C:\Windows\SysWOW64\config\systemprofile\Desktop - 这会诱使系统认为 LocalSystem 帐户是交互式的）。

# javascript - 如何在chrome和firefox中右键单击禁用/启用复选框

> ID：16174527
> 
> 赞同：4
> 
> 时间：2013-04-23T16:27:38.433
> 
> 标签：javascript, jquery, right-click

我编写了一些代码，允许我在右键单击复选框时禁用/启用复选框。它适用于 IE，但不适用于 Chrome 或 Firefox。

```
rightClickFunc: function (e) 
{
    var obj;
    if ($.browser.msie) obj = event.srcElement;
    else obj = e.target;
    stuff.disableEnableObject(obj);
    return false;
},

disableEnableObject: function (o)
{
    if (o.getAttribute("disabled") == null)                
          $('#'+o.id).attr("disabled", "disabled");
    else  $('#'+o.id).removeAttr("disabled");
} 
```

如何在 Chrome 中获得与 IE 相同的功能？问题似乎是右键单击 chrome 中的禁用项目确实会打开上下文菜单（右键菜单）。

我制作了一个代码示例 - 请参阅[http://jsfiddle.net/e72M6/](http://jsfiddle.net/e72M6/)。在 IE 和 chrome 中运行它以查看差异。（IE 可以启用这些框，Chrome 不能）。

我希望其他浏览器具有与 IE 相同的功能。因此可以启用这些框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T16:36:14.227

根据规范禁用元素不应响应点击事件。

您想要做的是`opacity: 0`在此之上覆盖一个不可见的 ( ) 元素并将其用作您的事件的代理。请记住，一些旧浏览器不理解`opacity`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T16:50:27.543

这将是很多工作，但从技术上讲，当您禁用该元素时，您可以在其顶部堆叠一个透明元素（因此用户看不到它），相同的大小/形状，并侦听该单击事件。启用后，隐藏该堆叠元素。

这里有一些让你开始的东西：http: [//jsfiddle.net/8dYXd/2/](http://jsfiddle.net/8dYXd/2/)

它使用这种结构：

```
<span>
    <input id='a' type='checkbox' disabled="disabled" />
    <span class="disabled-detector"></span>
</span> 
```

这个CSS：

```
span {
    position: relative;
}

span.disabled-detector {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    opacity: 0;
}

input+span.disabled-detector {
    display: none;
}

input[disabled]+span.disabled-detector {
    display: inline;
} 
```

请注意您仍然可以“单击”禁用的元素。

您必须更新它以确保`click`(or `contextmenu`) 事件同时针对 the`input`和透明元素。从技术上讲，您可以只使用父`<span>`级 - 给它一个特殊的类，并在其上监听`click`事件。这些事件将从其后代中冒出来，所以应该没问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T16:30:46.637

它可以禁用元素，但不能重新启用它。这是因为禁用的元素不会触发鼠标事件。我不认为有办法让你在所有浏览器中都能正常工作。

# ios - 将下载的 Box 文件存储到备用文件夹？

> ID：16174529
> 
> 赞同：0
> 
> 时间：2013-04-23T16:27:41.033
> 
> 标签：ios, objective-c, box-api

使用该`storeWithCallbacks:`方法时，文件存储在应用程序`Documents/SavedFiles`文件夹中。

有没有办法将目标设置为另一个文件夹路径？

以下是我拨打电话的方式。**BoxFile**的`localURL`是只读的。

 **```
- (void) downloadFile: (BoxFile *) boxFile
{
    [Box registerObserverForDownloadQueue: (id)self];

     [boxFile storeWithCallbacks:^(id <BoxOperationCallbacks> on)
     {
         on.after(^(BoxCallbackResponse response)
                  {
                       [Box removeObserverForDownloadQueue: (id)self];
                      // Proprietory code here and a call to update the folder listing.
                  });
     }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:09:53.193

目前没有办法将目的地设置为另一条路径。**

# android - 在 Android 应用程序之间共享进度数据

> ID：16174532
> 
> 赞同：4
> 
> 时间：2013-04-23T16:27:44.003
> 
> 标签：android, sharedpreferences

我几乎完成了为 Android 市场编写的游戏。我有一个完整版和一个只有一半级别的免费版。我读过很多人在类似情况下遇到以下问题，但找不到令人满意的解决方案：

我的应用程序是独立的，但我希望它们共享数据。至少我希望完整版能够读取免费版的进度数据。如果用户完成免费版，然后安装完整版，则需要访问进度信息，因为游戏的第一阶段与免费版相同，并且应该共享/映射进度。

根据我的阅读，保存游戏进度的最佳方法是使用 SharedPreferences，这就是我正在做的事情，而且效果很好。

在寻找共享数据的方法时，我读到最好的办法是在两个 AndroidManifest.xml 文件中定义相同的 android:sharedUserId 为相同的值，并确保两个应用程序都使用相同的密钥进行签名：

[Android 中的 sharedUserId 是什么，它是如何使用的？](https://stackoverflow.com/questions/9783765/what-is-shareduserid-in-androidhow-can-i-used-shareduserid)

[多个应用程序，共享相同的数据目录](https://stackoverflow.com/questions/7139421/multiple-apps-sharing-same-data-directory)

我已经完成了这项工作，并通过使用 ApplicationInfo 查看两个应用程序的 uid 来检查它是否正常工作，它们是相同的。但是，我当时期望能够从两个应用程序（在不同时间运行）读取和写入 SharedPrefs 并读取/写入相同的数据。但可惜没有。如果这不会使应用程序共享相同的 SharedPreferences，那么它们通过指定相同的 sharedUserId 共享什么数据？

在进行了更多挖掘之后，有些人似乎在说我需要先访问另一个应用程序的上下文：

[http://thedevelopersinfo.com/2009/11/25/getting-sharedpreferences-from-other-application-in-android/](http://thedevelopersinfo.com/2009/11/25/getting-sharedpreferences-from-other-application-in-android/)

[无法从另一个应用程序读取 SharedPreferences](https://stackoverflow.com/questions/9928945/cant-read-sharedpreferences-fron-another-application)

因此，如果我希望 App2 访问 App1 的数据，这会在 App2 的 Activity 中为我提供以下代码：

```
Context otherAppsContext = null;
try {
    otherAppsContext = createPackageContext("com.example.app1package",0);
} catch (NameNotFoundException e) {
}
SharedPreferences sharedPrefs = otherAppsContext.getSharedPreferences("TestShareData",Context.MODE_PRIVATE); 
```

但是当我向 sharedPrefs 询问数据时，它仍然只给我来自当前应用程序（App2 而不是 App1）的数据。

检查 otherAppsContext 变量我不确定它给了我什么。它有一个 mBasePackageName 属性，它是 App2 的包名称（错误）。但它也有一个 mPackageInfo 属性，它似乎包含有关 App1 的数据。

我只是不知道我是否以正确的方式做事但遗漏了一些东西，或者这根本不是正确的方法。我只想以一种可以读取另一个的 SharedPrefs 的方式链接我的 2 个应用程序。大多数完整版本的应用程序如何链接到免费数据？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:02:20.020

当然这种情况经常发生，但我想我可能已经解决了我自己的问题。

我的两个应用程序（完整版和免费版）都以相同的名称写入 sharedPrefs：

```
SharedPreferences settings = getSharedPreferences( PREFS_NAME, 0 ); 
```

两个应用程序的 PREFS_NAME 相同。当我从 App2 询问 App1 的上下文时，它给了我一个上下文，但它似乎是一个可以访问两个应用程序数据的上下文？

为了解释当我从 App2 获得 App1 的上下文并要求提供名称为 PREFS_NAME 的 SharedPreferences 时，我从 App2 获得了 SharedPrefs。但我尝试更改 App1 的 SharedPrefs 名称，然后从 App2 的上下文中访问它，突然它获取了 App1 的数据。

我真的不知道我从 createPackageContext 调用中得到了什么，它似乎是两组数据的句柄。但我认为我可以让我的应用程序对 SharedPrefs 使用不同的名称，并让完整的应用程序在需要时搜索免费应用程序的数据。

# c# - 多线程访问 Excel

> ID：16174535
> 
> 赞同：1
> 
> 时间：2013-04-23T16:27:46.920
> 
> 标签：c#, multithreading, excel

我有两个方法，method1，method2，它们都有 lock(App)，其中 App 是同一类中的静态实例。

***App是共享项目Helper中的静态实例***

```
void method1()
{
    lock(Helper.App)
    { 
       ExcelApp.FormulaCell.AddComments(errMsg);
    }
}

    void method2()
    {
        lock(Helper.App)
        {  
           //plot data (an 2-D array) to cells
           var dataRng = ExcelApp.CurrentSheet.Cells(Formulacell.Row + 1, Formulacell.Column + 1);
           dataRng = dataRng.get_Resize(n, m);
           dataRng.Value2 = data;
        }
    } 
```

method1、method2 被多个线程调用。我想一次只运行 method1 或 method2 问题是它们似乎没有。
在方法 1 和方法 2 中，我将一些数据绘制到 Excel 中，我得到了异常

> 名称：COMException 消息：来自 HRESULT 的异常：0x800AC472

我用谷歌搜索，发现异常是由于 Excel 应用程序未准备好引起的。没有 UI 手势，所以我认为异常是由两种方法同时尝试写入 Excel 引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:56:51.500

请检查您是否正在调用异步方法来 Excel。
如果是这样，这就是问题所在，即使您使用了锁，实际调用也是同时运行的。
尝试等到 Excel 方法结束。
奥菲尔

# c# - 下拉列表和选定值

> ID：16174541
> 
> 赞同：0
> 
> 时间：2013-04-23T16:28:04.140
> 
> 标签：c#, html

我很难弄清楚我在这里做错了什么。在我的编辑项目模板中，我的下拉列表有以下代码：

```
<asp:DropDownList ID="dd_is_active" runat="server" AppendDataBoundItems="true"
 DataValueField="Enabled">
 <asp:ListItem Text="Yes" Value="1"></asp:ListItem>
 <asp:ListItem Text="No" Value="0"></asp:ListItem>
 </asp:DropDownList>
 <asp:HiddenField ID="is_activeTextBox" runat="server" Value='<%# Bind("Enabled") %>' /> 
```

这是我的 aspx.cs 代码：

```
 protected void ListView1_ItemInserting(object sender, ListViewInsertEventArgs e)
{
    e.Values["SUB_last_modified_date"] = DateTime.Now.ToString();
    e.Values["SUB_last_modified_by_user_id"] = HttpContext.Current.User.Identity.Name;
    e.Values["SUB_last_modified_by_user_name"] = Session["UserName"].ToString();
    e.Values["Enabled"] = ((DropDownList)(sender as ListView).InsertItem.FindControl("dd_is_active")).SelectedValue;
    e.Values["Category_ID"] = ((DropDownList)(sender as ListView).InsertItem.FindControl("dd_category")).SelectedValue;
}
protected void ListView1_ItemUpdating(object sender, ListViewUpdateEventArgs e)
{
    e.NewValues["SUB_last_modified_date"] = DateTime.Now.ToString();
    e.NewValues["SUB_last_modified_by_user_id"] = HttpContext.Current.User.Identity.Name;
    e.NewValues["SUB_last_modified_by_user_name"] = Session["UserName"].ToString();

} 
```

似乎我的 .cs 代码中缺少某些内容，或者我在 html 代码中错误地绑定了 1 和 0 的值。此完全相同的代码适用于插入项目模板，但更新（或编辑项目模板）无法正常工作。

当我尝试编辑表格中的项目时，我收到一条错误消息，指出输入字符串的格式不正确。我知道它正在尝试绑定“是”或“否”的文本，但我需要将值绑定到“0”或“1”的值。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:34:15.743

我认为您的语法对于 HiddenField 值是错误的。而不是这个

```
<asp:HiddenField ID="is_activeTextBox" runat="server" Value='<%# Bind("Enabled") '>' /> 
```

它应该是

```
<asp:HiddenField ID="is_activeTextBox" runat="server" Value='<%# Bind("Enabled")%>' /> 
```

# sql - 我正在尝试使用 PL/SQL 收集学生的总学分

> ID：16174552
> 
> 赞同：0
> 
> 时间：2013-04-23T16:28:22.920
> 
> 标签：sql, oracle, plsql

我对 PL/SQL 非常“菜鸟”，但我必须专门编写一些 PL/SQL 代码（DECLARE/BEGIN/等），而不仅仅是一个查询。

我真的在努力寻找一个很好的例子，希望能让我掌握其余的问题。这是我目前正在尝试弄清楚的一个：

编写一个 PL/SQL 程序来计算每个学生的总学分。注意：学生获得 F 的课程不计入学分。如果学生重修一门他/她成绩较低的课程，则只计入一次学分。输出应包括学生人数和总学分。

```
Student-schema =(studentnum, name, standing, gpa, major)
Class-schema = (schedulenum, semester, department, classnum, days, time, place, enrollment)
Instructor-schema = (name, department, office)
Teaches-schema = (name, schedulenum, semester)
Taking-schema = (studentnum, schedulenum, semester, grade) 
```

这是我可悲的尝试之一：

```
DECLARE
    stud_id student.studentnum%TYPE;
    total number(10);
BEGIN
    FOR count IN (SELECT* FROM taking)
    LOOP
        SELECT studentnum, count(*) total
    INTO stud_id, total
    WHERE grade >= 1;
    END LOOP;
END; 
/ 
```

在上面的一个中，idk 我在做什么错或对。我在第 1 行收到错误“精确提取返回的行数超过请求的行数”。我之前遇到过这个错误，并认为 for 循环可以解决它。显然我错了。我什至不知道这将如何成功输出结果，即使它确实查询正确。我很迷茫，一点点的方向会有很长的路要走。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:40:30.787

下面的代码迭代学生的结果集和他们的成绩计数，不计算“F”成绩。该片段没有实施任何课程不得贡献超过一个成绩的限制；但是，它应该让你开始，这样你就可以补充缺失的部分。

```
DECLARE
    stud_id student.studentnum%TYPE;
    total number(10);
BEGIN
    FOR i IN (
        SELECT s.studentnum  stud
             , COUNT(*)      cnt
          FROM student  s
          JOIN taking   t   on ( t.studentnum   = s.studentnum  )
          JOIN class    c   on ( c.schedulenum  = t.schedulenum )
         WHERE t.grade > 0
      GROUP BY s.studentnum
    ) LOOP
        NULL; -- whatever
    END LOOP;
END; 
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:21:46.363

I do believe I found a proper solution. None of the answers really worked, so I ended up just making a cursor to go through the data. Because of the joins I'm doing, I believe it will filter out duplicate classes taken by the same student:

```
DECLARE
    CURSOR c IS
        SELECT taking.studentnum, count(*) total
        FROM student, taking, class
        WHERE grade > 0
    AND student.studentnum = taking.studentnum
    AND taking.schedulenum = class.schedulenum
    AND taking.semester = class.semester
    GROUP BY taking.studentnum;
    credits c%ROWTYPE;
BEGIN
    OPEN c;
    LOOP
    FETCH c INTO credits;
        EXIT WHEN c%NOTFOUND;
    dbms_output.put_line('Student#: ' || credits.studentnum || 
        '  Credits: ' || credits.total);
    END LOOP;
END;
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:32:12.343

我认为`select * from taking`不会返回数字，而是返回一堆行。如果你想要你需要的行数 `SELECT count(*) FROM taking`

# apache-zookeeper - 将独立的 Zookeeper 服务器添加到 Fabric ensemble

> ID：16174556
> 
> 赞同：0
> 
> 时间：2013-04-23T16:28:33.190
> 
> 标签：apache-zookeeper, fuseesb

我们正在尝试将独立的 zookeeper 服务器添加到由 fuse fabric 运行的 zk ensemble（作为跟随者或观察者）。但是，fabric 似乎对 zk 配置有非常严格的控制，而且我还没有找到任何与将硬编码的服务器配置参数添加到fabric 使用的动态配置参数相关的文档。其他人尝试这个或有一些想法在哪里看？

# c# - 如何使用 protobuf-net 序列化/反序列化锯齿状/嵌套数组？

> ID：16174558
> 
> 赞同：4
> 
> 时间：2013-04-23T16:28:56.733
> 
> 标签：c#, protobuf-net

[在他对protobuf-net 不适合哪些场景](https://stackoverflow.com/questions/3462775/for-which-scenarios-is-protobuf-net-not-appropriate/3462828#3462828)的回答中？马克提到：

> 没有中间类型的锯齿状数组/嵌套列表是不行的 - 你可以通过在中间引入一个中间类型来填充它

我希望这表明有一种方法可以在不更改我的基础代码的情况下做到这一点，也许使用代理？有没有人找到一种对嵌套/锯齿状数组进行序列化/反序列化的好方法

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T08:50:43.387

目前，它需要（如消息所示）更改您的模型。然而，原则上，这是图书馆完全可以在自己的想象中完成的事情——这只是我还没有编写/测试过的代码。所以这取决于你多久需要它......我可以看看它，但我不能保证任何特定的时间表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-26T19:46:55.120

一种解决方案可能是序列化中间类型，并使用 getter/setter 将其隐藏在其余代码中。例子：

```
 List<double[]> _nestedArray ; // The nested array I would like to serialize.

    [ProtoMember(1)] 
    private List<ProtobufArray<double>> _nestedArrayForProtoBuf // Never used elsewhere
    {
        get 
        {
            if (_nestedArray == null)  //  ( _nestedArray == null || _nestedArray.Count == 0 )  if the default constructor instanciate it
                return null;
            return _nestedArray.Select(p => new ProtobufArray<double>(p)).ToList();
        }
        set 
        {
            _nestedArray = value.Select(p => p.MyArray).ToList();
        }
    }

[ProtoContract]
public class ProtobufArray<T>   // The intermediate type
{
    [ProtoMember(1)]
    public T[] MyArray;

    public ProtobufArray()
    { }
    public ProtobufArray(T[] array)
    {
        MyArray = array;
    }
} 
```

# r - 如何用 R 处理中文/日文字符

> ID：16174561
> 
> 赞同：0
> 
> 时间：2013-04-23T16:29:04.740
> 
> 标签：r, text-mining

我希望能够使用类似 tm 的包来使用 R 拆分和识别非英文字符（主要是日文/泰文/中文）。我想做的是将其转换为某种矩阵格式和然后运行随机森林/逻辑回归进行文本分类。有没有可能用 tm 或其他 R 包做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:53:25.673

**编辑：**

看起来 R 很难以文本形式阅读非英文字符。我尝试从网上抓取中文字母，如果字符编码一致，得到的结果可能会有所帮助。

```
### Require package used to parse HTML Contents of a web page
require(XML)
### Open an internet connection
url <- url('http://www.chinese-tools.com/characters/alphabet.html')
### Read in Content line by line
page <- readLines(url, encoding = "UTF-8")
### Parse HTML Code
page <- htmlParse(page)
### Create a list of tables
page <- readHTMLTable(page)
### The alphabet is contained in the third table of the page
alphabet <- as.data.frame(page[3]) 
```

您现在有一个美国字母字符列表，另一列对应于这些字符是如何读入 R 中的。如果在您希望文本挖掘的原始对象中以相同的方式读取它们，是否可以使用 Regular一次一个搜索这些编码字符的表达式？

# python - 在分布式爬虫中使用经过 IP 身份验证的代理

> ID：16174563
> 
> 赞同：2
> 
> 时间：2013-04-23T16:29:07.760
> 
> 标签：python, proxy, web-crawler

我正在开发一个在 CentOS 6.3 服务器集群上运行的 Python 分布式网络爬虫，该爬虫使用来自不同代理提供商的许多代理。对于用户名/密码认证的代理提供商来说，一切都像一个魅力。但是现在我们已经购买了一些使用基于 IP 的身份验证的代理，这意味着当我想使用其中一个代理爬入网页时，我需要从我们的一部分服务器发出请求。

问题是，在 Python 中有没有办法（使用库/软件）向通过 2 个代理的域发出请求？（一个代理是需要用于 IP 身份验证的子集之一，第二个是来自提供商的实际代理）或者是否有另一种方法可以在不将我们的服务器的这个子集设置为代理的情况下执行此操作？

我现在用来通过代理发出请求的代码使用 requests 库：

```
import requests
from requests.auth import HTTPProxyAuth

proxy_obj = {
    'http':proxy['ip']
}

auth = HTTPProxyAuth(proxy['username'], proxy['password')

data = requests.get(url, proxies = proxy_obj, auth = auth) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:23:33.263

> Python中有没有办法（使用库/软件）向通过2个代理的域发出请求？

如果您需要通过两个代理，看起来您将不得不使用[HTTP tunneling](http://en.wikipedia.org/wiki/HTTP_tunnel)，因此任何不在授权列表中的主机都必须在其中一台主机上连接 HTTP 代理服务器，并使用HTTP`CONNECT`方法来创建到远程代理的隧道，但使用库可能无法实现`requests`。

> 或者是否有另一种方法可以在不将我们的服务器子集设置为代理的情况下做到这一点？

假设使用基于 IP 地址的身份验证的远程代理都期望相同的 IP 地址，那么您可以改为在集群和远程代理之间配置一个 NAT 路由器，以将所有出站 HTTP 请求转换为来自该单个 IP 地址.

但是，在您考虑实施这些不必要的复杂选项之前，并且考虑到您正在为这项服务付费，您不能只要求提供商允许您当前使用的整个 IP 地址范围的请求吗？

# git - 我如何告诉 git 使用哪个 vim？

> ID：16174564
> 
> 赞同：8
> 
> 时间：2013-04-23T16:29:14.713
> 
> 标签：git, vim, version-control, vim-plugin, git-commit

当我使用 vim（通过输入 ）编辑提交消息时`git commit`，vim 打开，但首先提示[YouCompleteMe 插件](https://github.com/Valloric/YouCompleteMe)不可用：

```
$ git commit
YouCompleteMe unavailable: requires Vim 7.3.584+
Press ENTER or type command to continue 
```

当我`:version`按 后检查版本时`ENTER`，我看到 vim 7.3 正在运行。但是，如果我直接从命令行启动 vim（不使用`git commit`），我会看到我正在运行 vim 7.3.754。如何告诉 git 使用较新版本的 vim？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T16:31:17.137

利用

```
git config --global core.editor /my/version/of/vim 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-20T13:27:25.763

这解决了我的问题。

```
git config --global core.editor `which vim` 
```

# actionscript-3 - 具有 Flash 流的 Limelight 媒体库

> ID：16174571
> 
> 赞同：0
> 
> 时间：2013-04-23T16:29:46.370
> 
> 标签：actionscript-3, streaming, rtmp

我担心 Limelight 的文档已经过时，我找不到任何新的东西。昨天我花了两个小时进行支持聊天，询问如何让媒体库正常工作。支持告诉我一件事与文档所说的相矛盾。

问题是是否有人使用他们的媒体库系统（从`s`文件夹内播放媒体）成功播放了 RTMP 链接？

文档说只对来自服务器 ftp 根目录的路径进行哈希处理（`/aXXX/oXX/s/path/to/file`），而支持人员一直告诉我对整个文件进行哈希处理`rtmp://xxxxx.fcod.llnw.net/aXXX/oXX/s/path/to/file`

我知道这个问题将是一个很长的问题，但我束手无策。我用谷歌搜索了无数次，无法找到正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T16:30:09.310

我的团队两年前只是为了概念验证才这样做，所以他们可能已经更改了设置，但当时我们对整个 URL 进行了哈希处理，包括 rtmp://。

# c# - ZlibStream - 保持流打开并刷新流的一部分

> ID：16174573
> 
> 赞同：0
> 
> 时间：2013-04-23T16:29:50.280
> 
> 标签：c#, zlib

我正在使用`Ionic.Zlib.ZlibStream`以解压缩收到的字节。

我无法关闭流 ZlibStream。如果我关闭流，我将无法解压缩收到的下一个字节数组。

我需要保持流打开，并且偶尔（例如在 1 MB 流之后）清除 Zlibstream 并保留 Zlibstream 中的最后 32K。

我怎样才能做到这一点？

**顺便说一句**- 如果我将 Zlibstream 的缓冲区大小设置为 32768 ，是否意味着流不会增加到 32768 以上？因为我可以看到 Position 比 32768 高很多。

# sql - 子查询返回超过 1 个值。内部查询

> ID：16174577
> 
> 赞同：-1
> 
> 时间：2013-04-23T16:29:57.090
> 
> 标签：sql, sql-server, sql-server-2008

我有两张桌子`tbl_Category`和`tbl_Course`.

在`tbl_Category`我有这样的行：

```
 CatID CatName CatDesc
  1     Cat1   catDesc1
  2     Cat2   catDesc2
  3     Cat3   catDesc3
  4     Cat4   catDesc4
  5     Cat5   catDesc5 
```

和`tbl_course`价值观就像

```
CoursID Name AssignCategory AdditionalCat
 1       cou1   1             2,3
 2       cou2   2               3
 3       cou3   1             3,4 
```

我需要如下结果

包含 AsignCategory 和 additionalcat 的类别

```
 CatID CatName CatDesc
  1     Cat1   catDesc1
  2     Cat2   catDesc2
  3     Cat3   catDesc3
  4     Cat4   catDesc4 
```

不包含 AsignCategory 和 additionalcat 的类别

```
 CatID CatName CatDesc
  5     Cat5   catDesc5 
```

我正在使用这个拆分功能

```
CREATE FUNCTION dbo.StrSplit (@sep char(1), @s varchar(512))  
RETURNS table  
AS  
RETURN (  
    WITH Pieces(pn, start, stop) AS (  
      SELECT 1, 1, CHARINDEX(@sep, @s)  
      UNION ALL  
      SELECT pn + 1, stop + 1, CHARINDEX(@sep, @s, stop + 1)  
      FROM Pieces  
      WHERE stop > 0  
    )  
    SELECT pn,  
      SUBSTRING(@s, start, CASE WHEN stop > 0 THEN stop-start ELSE 512 END) AS s  
    FROM Pieces  
  ) 
```

我正在使用以下查询形式分配类别结果：

```
 select * from dbo.Tbl_Category
 where catid in(select assigncategory from Tbl_Course ) 

 )

 select * from dbo.Tbl_Category
 where catid not in(select assigncategory from Tbl_Course          
 ) 
```

请帮我完成上述查询的其他类别结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:01:17.443

您应该使用 CROSS APPLY 来使用您的`StrSplit`udf：

```
SELECT * FROM dbo.tbl_Category
WHERE CatID IN(
    SELECT AssignCategory 
    FROM tbl_Course
    UNION
    SELECT CAST(split.S as int) 
    FROM tbl_Course
    CROSS APPLY dbo.StrSplit(',', AdditionalCat) as split )

SELECT * FROM dbo.tbl_Category
WHERE CatID NOT IN(
    SELECT AssignCategory 
    FROM tbl_Course
    UNION
    SELECT CAST(split.S as int) 
    FROM tbl_Course
    CROSS APPLY dbo.StrSplit(',', AdditionalCat) as split ) 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!3/746cd/6)。

您还可以使用 UNPIVOT 来避免使用 UNION。但由于只有 2 列需要合并，因此 UNION 对于此目的可能“足够好”。

# java - 如何使用 findViewById 获取 ListView

> ID：16174578
> 
> 赞同：0
> 
> 时间：2013-04-23T16:29:59.653
> 
> 标签：java, android, arraylist, android-listview, findviewbyid

我不知道为什么这段代码使用 findViewById 来获取列表视图。列表视图不是我之前设置的 ContentView 原生的吗？如果不是，我如何为该内容视图设置 ListView？我真的只想知道是否需要设置列表视图。

```
setContentView(R.layout.imgp_activity_home);
final String[] values = new String[] {"No Docs", "Pending", "Processed"};

final ListView listview = (ListView) findViewById(R.id.???);

final ArrayList<String> list = new ArrayList<String>();
for (int i = 0; i<values.length; i++) {
    list.add(values[i]); 
```

...

```
listview.setAdapter((ListAdapter) adapter);
listview.setOnItemClickListener(new AdapterView.OnItemClickListener() { 
```

...我觉得我应该能够以某种方式将侦听器添加到数组列表中。

这是我用来帮助我[入门](http://www.vogella.com/articles/AndroidListView/article.html)的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:09:55.610

在关于活动布局的布局文件中，名为 imgp_activity_home.xml 的 XML 文件在此文件中可能有关于<listview> 的标签。设置<listview android:id="@+id/listname"＞这样的标签。然后在Java文件中你可以findviewbyid(r.id.listname)。如果你没有声明listview标签。你必须新建一个listview对象在你的代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:12:14.033

从示例中您应该编写

```
final ListView listview = (ListView) findViewById(R.id.listview); 
```

# jsf - 两个@ViewScoped、Inject 之间的 JSF 2.0 通信

> ID：16174586
> 
> 赞同：1
> 
> 时间：2013-04-23T16:30:13.647
> 
> 标签：jsf, communication, managed-bean, view-scope

我在两个 @ViewScoped 托管 Bean 之间的通信存在巨大问题。以下清单显示了我这样做的方式。UserAddEditMB 被注入到 UserSearchMB 并在用户单击带有 onAdd 操作的按钮后，它调用 UserAddEditMB init 方法。最后，我的第二种形式有导航规则，但 u1 和 u2 为空。

这是在两个 @ViewScoped Managed bean 中执行通信的好方法吗？

```
@ManagedBean
@ViewScoped
public class UserSearchMB {

@ManagedProperty(value ="#{userAddEditMB}")
private UserAddEditMB userAddEditMB;

public void onAdd(){
    userAddEditMB.init(String param1, String param2);
    return "userAddEdit";
}
...
}

@ManagedBean
@ViewScoped
public class UserAddEditMB {

private String u1;
private String u2;

public void init(String param1, String param2){
    this.u1 = param1;
    this.u2 = param2;
}
....
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T16:33:29.693

我发布作为答案，因为评论太小。您可以尝试从 UserAddEditMB 获取 UserSearchMB：

```
FacesContext context = FacesContext.getCurrentInstance();
UserSearchMB test= (UserSearchMB) context.getApplication().evaluateExpressionGet(context, "#{userSearchMB}", UserSearchMB .class); 
```

# c# - 在 Machine.config 和 App.config 中存储相同的密钥

> ID：16174590
> 
> 赞同：0
> 
> 时间：2013-04-23T16:30:20.097
> 
> 标签：c#, configurationmanager, configurationelement, configsection

我在 machine.config 中保存了一个自定义配置部分，其结构如下：

```
<CustomSettings>
   <add key="testkey" local="localkey1" dev="devkey" prod="prodkey"/>
</CustomSettings> 
```

现在，我希望能够通过将覆盖存储在 app.config 中来覆盖相同的键设置，如下所示：

```
<CustomSettings>
   <add key="testkey" dev="devkey1" prod="prodkey1"/>
</CustomSettings> 
```

所以当我在代码中阅读它时，我会得到 - dev="devkey1", prod="prodkey1", **local="localkey1"**

问题是当我像这样阅读我的自定义配置部分时：

```
CustomConfigurationSection section = ConfigurationManager.GetSection("CustomSettings") as CustomConfigurationSection; 
```

我收到一条错误消息，指出已添加密钥：

**“已经添加了条目‘testkey’。”**

我修改了**ConfigElementCollection.Add**函数来检查相同的键是否已经存在但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:00:18.863

你应该先删除密钥，试试

```
<CustomSettings>
   <remove key="testkey"/>
   <add key="testkey" dev="devkey1" prod="prodkey1"/>
</CustomSettings> 
```

这应该够了吧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:21:00.053

我最终在 ConfigurationElementCollection 中覆盖了 BaseAdd：

```
protected override void BaseAdd(ConfigurationElement element)
    {

 CustomConfigurationElement newElement = element as CustomConfigurationElement;

      if (base.BaseGetAllKeys().Where(a => (string)a == newElement.Key).Count() > 0)
      {
        CustomConfigurationElement currElement = this.BaseGet(newElement.Key) as CustomConfigurationElement;

        if (!string.IsNullOrEmpty(newElement.Local))
          currElement.Local = newElement.Local;

        if (!string.IsNullOrEmpty(newElement.Dev))
          currElement.Dev = newElement.Dev;

        if (!string.IsNullOrEmpty(newElement.Prod))
          currElement.Prod = newElement.Prod;
      }
      else
      {
        base.BaseAdd(element);
      }
    } 
```

我希望它有帮助...

# mongodb - Mongo：统计一组文档中单词出现的次数

> ID：16174591
> 
> 赞同：17
> 
> 时间：2013-04-23T16:30:21.783
> 
> 标签：mongodb, aggregation-framework

我在 Mongo 中有一组文档。说：

```
[
    { summary:"This is good" },
    { summary:"This is bad" },
    { summary:"Something that is neither good nor bad" }
] 
```

我想计算每个单词的出现次数（不区分大小写），然后按降序排序。结果应该是这样的：

```
[
    "is": 3,
    "bad": 2,
    "good": 2,
    "this": 2,
    "neither": 1,
    "nor": 1,
    "something": 1,
    "that": 1
] 
```

知道怎么做吗？聚合框架将是首选，因为我已经在某种程度上理解它:)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-23T18:10:05.417

[MapReduce](http://docs.mongodb.org/manual/core/map-reduce/)可能是一个很好的选择，它可以在服务器上处理文档而无需在客户端上进行操作（因为在 DB 服务器上没有拆分字符串的功能（[未解决的问题](https://jira.mongodb.org/browse/SERVER-6773)）。

从功能开始`map`。在下面的示例中（可能需要更健壮），每个文档都被传递给`map`函数（as `this`）。代码查找该`summary`字段，如果存在，则将其小写，在空格上拆分，然后`1`为找到的每个单词发出一个。

```
var map = function() {  
    var summary = this.summary;
    if (summary) { 
        // quick lowercase to normalize per your requirements
        summary = summary.toLowerCase().split(" "); 
        for (var i = summary.length - 1; i >= 0; i--) {
            // might want to remove punctuation, etc. here
            if (summary[i])  {      // make sure there's something
               emit(summary[i], 1); // store a 1 for each word
            }
        }
    }
}; 
```

然后，在`reduce`函数中，它将函数找到的所有结果相加，并为上面提到`map`的每个单词返回一个离散的总数。`emit`

```
var reduce = function( key, values ) {    
    var count = 0;    
    values.forEach(function(v) {            
        count +=v;    
    });
    return count;
} 
```

最后，执行 mapReduce：

```
> db.so.mapReduce(map, reduce, {out: "word_count"}) 
```

样本数据的结果：

```
> db.word_count.find().sort({value:-1})
{ "_id" : "is", "value" : 3 }
{ "_id" : "bad", "value" : 2 }
{ "_id" : "good", "value" : 2 }
{ "_id" : "this", "value" : 2 }
{ "_id" : "neither", "value" : 1 }
{ "_id" : "or", "value" : 1 }
{ "_id" : "something", "value" : 1 }
{ "_id" : "that", "value" : 1 } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T18:21:41.410

一个基本的 MapReduce 示例

```
var m = function() {
    var words = this.summary.split(" ");
    if (words) {
        for(var i=0; i<words.length; i++) {
            emit(words[i].toLowerCase(), 1);
        }   
    }
}

var r = function(k, v) {
    return v.length;
};

db.collection.mapReduce(
    m, r, { out: { merge: "words_count" } }
) 
```

这会将字数插入到集合名称 words_count 中，您可以对其进行排序（和索引）

请注意，它不使用词干、省略标点符号、处理停用词等。

另请注意，您可以通过累积重复出现的单词并发出计数来优化地图功能，而不仅仅是 1

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-13T07:29:46.283

您可以使用#split。试试下面的查询

```
db.summary.aggregate([
{ $project : { summary : { $split: ["$summary", " "] } } },
{ $unwind : "$summary" },
{ $group : { _id:  "$summary" , total : { "$sum" : 1 } } },
{ $sort : { total : -1 } }
]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-07T15:12:02.400

老问题，但从 4.2 开始，现在可以使用 $regexFindAll 来完成。

```
db.summaries.aggregate([
  {$project: {
    occurences: {
      $regexFindAll: {
        input: '$summary',
        regex: /\b\w+\b/, // match words
      }
    }
  }},
  {$unwind: '$occurences'},
  {$group: {
    _id: '$occurences.match', // group by each word
    totalOccurences: {
      $sum: 1 // add up total occurences
    }
  }},
  {$sort: {
    totalOccurences: -1
  }}
]); 
```

这将以以下格式输出文档：

```
{
  _id: "matchedwordstring",
  totalOccurences: number
} 
```

# html - 如何在 HTML5 中制作简单的快照 webapp？

> ID：16174593
> 
> 赞同：1
> 
> 时间：2013-04-23T16:30:29.627
> 
> 标签：html, web-applications, camera, webcam, snapshot

我需要制作一个 HTML5 页面，该页面可以显示来自设备摄像头/网络摄像头的实时视频，并且有一个可以拍摄快照的按钮；没什么花哨的（类似于 html5camera.com）。我尝试遵循一些教程（[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)和 [http://davidwalsh.name/browser-camera](http://davidwalsh.name/browser-camera)），但我还是 HTML 新手，所以我我不确定如何处理我找到的代码片段。

我将一些代码复制到一个 HTML 文件中，但是当我用 Chrome 打开它时，它在地址栏的右侧显示它阻止了对摄像头和麦克风的访问（无需请求许可）。当我下次单击请求许可选项并重新加载页面时，没有任何反应。无法将首选项设置为默认允许。我还尝试了 Chrome Canary（与 Chrome 相同）和 Firefox（未请求许可）。

**我在 HTML 中犯了错误吗？铬是问题吗？**

我到目前为止的代码：

```
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=yes">
    </head>
    <body>
        <video id="video" width="640" height="480" autoplay></video>
        <button id="snap">Snap Photo</button>
        <canvas id="canvas" width="640" height="480"></canvas>
        <script>
            // Put event listeners into place
            window.addEventListener("DOMContentLoaded", function() {
                // Grab elements, create settings, etc.
                var canvas = document.getElementById("canvas"),
                    context = canvas.getContext("2d"),
                    video = document.getElementById("video"),
                    videoObj = { "video": true },
                    errBack = function(error) {
                        console.log("Video capture error: ", error.code); 
                    };
                // Put video listeners into place
                if(navigator.getUserMedia) { // Standard
                    navigator.getUserMedia(videoObj, function(stream) {
                        video.src = stream;
                        video.play();
                    }, errBack);
                } else if(navigator.webkitGetUserMedia) { // WebKit-prefixed
                    navigator.webkitGetUserMedia(videoObj, function(stream){
                        video.src = window.webkitURL.createObjectURL(stream);
                        video.play();
                    }, errBack);
                }
                // Trigger photo take
                document.getElementById("snap").addEventListener("click", function() {
                    context.drawImage(video, 0, 0, 640, 480);
                });
            }, false);
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T17:46:01.463

你也可以考虑只做本地人。您可以使用 BridgeIt 轻松地将本地相机和摄像机支持添加到 Android、iOS 或 Windows Phone 8 上的任何 Web 应用程序：http: [//bridgeit.mobi](http://bridgeit.mobi)。这是一个简单的 javascript api，可让您访问本机移动功能。

# google-mirror-api - Mirror API 是否支持编码折线？

> ID：16174595
> 
> 赞同：3
> 
> 时间：2013-04-23T16:30:45.020
> 
> 标签：google-mirror-api

可以使用[编码折线](https://developers.google.com/maps/documentation/utilities/polylinealgorithm "编码折线算法格式")在时间线卡上[渲染地图](https://developers.google.com/glass/location#rendering_maps_on_timeline_cards)吗？如果不是，坐标计数的实际限制是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:47:49.930

当前的实现还不支持编码折线。请随时在我们的[问题跟踪器](https://code.google.com/p/google-glass-api/issues/list)上提交功能请求以请求支持。

关于坐标的数量，目前没有已知的上限，但我们可能会在几百个以上以限制资源消耗。

# google-apps-script - 如何在谷歌电子表格中做一个日期公式

> ID：16174600
> 
> 赞同：0
> 
> 时间：2013-04-23T16:30:55.303
> 
> 标签：google-apps-script, google-sheets

我必须做一个每年自动递增日期的查询。例如，我使用这个公式：

```
=INDEX(query('Scheda Intervento'!C3:K14;"select sum (K) where (F >= date '2013-01-01' and F <= date '2013-01-31' and C = '" & A3 &"')");2;1) 
```

...但是每年我都必须更改公式中出现的任何地方的日期（2014 年、2015 年）等。

我的电子表格副本在[此处](https://docs.google.com/spreadsheet/ccc?key=0AtZwzv4EAc54dGRkcnlOS2JoMjZJQjktOGR4aENUX0E#gid=5)共享。该公式位于单元格 C2 中的工作表“riepilogo totale ore , date, compensi operatore”中。

如何让我的公式在未来几年自动更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:43:04.517

如果您在“riepilogo”（摘要）表的标题中将月份表示为日期，则可以在公式中引用它们。通过以年份编号开始行，您可以轻松地调整日期以适应年份的变化。

例如，这里的 A2 是年份，用一个简单的数字表示。B2，对于 Gennaio（一月），使用`Date(year,month,day)`电子表格函数构建日期，在本例中为 2013/1/1。接下来的几个月使用`EDATE(date,number_of_months)`电子表格功能设置每个后续月份的第一天。

![日期计算](https://i.stack.imgur.com/V83E9.png)

现在，调整您的公式以引用该月的日期。操作员希望日期格式为“ `date`yyyy-mm-dd”，因此您需要使用该`TEXT`函数对其进行格式化。B3 中的公式如下所示：

```
=INDEX(query('Scheda Intervento'!$C$2:$K$13;ʺselect sum (K) where (F >= date'ʺ & text(B$2,ʺyyyy-mm-ddʺ) & ʺ' and F < date 'ʺ & text(edate(B$2,1),ʺyyyy-mm-ddʺ) & ʺ' and C = 'ʺ & $A3 &ʺ')ʺ);2;1) 
```

请注意，`EDATE()`再次使用 - 这是为了使公式仅依赖于同一列中的值。不是必需的，但很有帮助，因为它可以在电子表格的最右边一列中使用而无需修改。

除了将年份放入 A2 之外，您还可以选择：

*   使用自动确定年份`=year(today())`，或
*   引用电子表格中的另一个单元格。

## 编辑：Google 电子表格日期的本地化问题

上述解决方案有效 - 但不适用于意大利，也可能不适用于其他地区。对于Locale == Italia 的用户，`Date()`和`EDate()`函数都会在 Google 电子表格中导致“解析错误”。

为了解决这个问题，下面的自定义函数将给定的日期值转换为适合in 中`date`运算符格式的字符串`QUERY`。有关自定义函数的更多信息，请参阅[此博客条目。](https://developers.google.com/apps-script/execution_custom_functions)您需要做的就是从“工具”菜单中选择“脚本编辑器...”，将此代码块粘贴到编辑器工作区，然后保存。您可以为脚本命名任何您喜欢的名称。

```
/**
 * Return the given date as a string formatted as 'yyyy-mm-dd'.
 */
function date2string(dateval) {
    var d = new Date(dateval);
    var dateArr = [];
    dateArr[0]=d.getFullYear();
    dateArr[1]=d.getMonth() + 1; //Months are zero based
    dateArr[2]=d.getDate();
    return dateArr.join('-');  
} 
```

有了脚本，您就有了一个`date2string()`可以在电子表格中使用的新函数。单元格 C3 的更新公式为：

```
=INDEX(query('Scheda Intervento'!$C$2:$K$13;"select sum (K) where (F >= date '" & date2string(C$2) & "' and F < date '" & date2string(D$2) & "' and C = '" & $A3 &"')");2;1) 
```

## INDEX() 的问题

这个公式还有另一个问题，就是`INDEX()`函数。该函数需要一个数组作为输入，以及对数组中的项目进行索引的索引。当`QUERY()`在查询字符串中找到符合条件的数据时，这很有效。在这种情况下，返回 from`QUERY('Scheda Intervento'!$C$2:$K$13;"select...`类似于这个 2 行数组：

```
Sum
54 
```

在这种情况下，`INDEX([["Sum"],[54]];2;1)`结果为`54`，从数组的第 2 行第 1 行中选取。

但是如果我们没有匹配的数据，就没有第 2 行，我们就会`#REF`出错。我们可以通过简单地使用`SUM()`添加数组的数值来避免这种情况。当没有数字时，这将导致`0`- 完美。

这是单元格 C3 的结果公式：

```
 =SUM(query('Scheda Intervento'!$C$2:$K$13;"select sum (K) where (F >= date '" & date2string(C$2) & "' and F < date '" & date2string(D$2) & "' and C = '" & $A3 &"')")) 
```

# tfs - 如何在 TFS 中批量修改工作项的标题？

> ID：16174601
> 
> 赞同：8
> 
> 时间：2013-04-23T16:30:57.213
> 
> 标签：tfs, tfs-workitem

我在 TFS 中有一个产品待办事项项目 (PBI)，它在网格下有多个 Sprint 待办事项任务 (SBT)。

如何修改该网格中项目的标题，而无需在预览中单独打开每个项目或以其他方式？

![在此处输入图像描述](https://i.stack.imgur.com/nbrZF.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-30T10:15:16.960

这是可能的，因为在底部的半屏幕中选择一个工作列表时，您将有其详细信息，因此可以更改它。完成后，您将能够将所有内容保存在一个 Ctrl-S 中

更好的方法 ：

我通过在 MS Excel 中导出查询结果，快速修改多列和多行来做到这一点；然后一键发布整个。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-07T20:21:57.833

对于 Visual Studio 2010、2013，以下将起作用：

1.  在 Visual Studio/Team Explorer 选项卡中打开要编辑的项目列表。这可以通过新查询来完成。
2.  突出显示要更改的所有项目（相同类型）。
3.  单击“在 Microsoft Office 中打开”下拉菜单或右键单击所选任务项之一，然后选择“在 Microsoft Excel 中打开”。
4.  使用标准 Excel 功能编辑您感兴趣的字段以复制/粘贴或替换。
5.  单击 Excel 左上角的“发布”按钮。
6.  完成后，单击 Visual Studio 中产品积压视图顶部的刷新图标。
7.  现在将显示您更新/批量编辑的条目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-12T00:18:51.843

[您可以在Team Web Access 2010](http://blogs.msdn.com/b/serkani/archive/2010/01/22/how-to-bulk-edit-work-items-in-team-web-access-2010.aspx)中进行批量编辑。在 Excel 中打开查询更适合批量编辑标题，但如果您要更改区域路径，TWA 会在层次结构中提供可展开/可折叠的节点，而 Excel 只是为您提供值的下拉菜单.

# awk - 在具有两个字行的文件中，仅对具有白名单中两个字的行进行 grep

> ID：16174602
> 
> 赞同：1
> 
> 时间：2013-04-23T16:31:00.913
> 
> 标签：awk, grep, whitelist

我有一个文件1：

```
green
yellow
apple
mango 
```

和一个文件2：

```
red apple
blue banana
yellow mango
purple cabbage 
```

我需要从 file2 中找到两个单词都属于 file1 中的列表的元素。所以它应该显示：

> 黄芒果

我试过了：

```
awk < file2 '{if [grep -q $1 file1] && [grep -q $2 file1]; then print $0; fi}' 
```

我收到语法错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:58:13.510

这可以解决问题：

```
$ awk 'NR==FNR{a[$0];next}($1 in a)&&($2 in a)' file1 file2 
yellow mango 
```

**解释：**

`NR`是一个特殊`awk`变量，它跟踪输入中的`FNR`当前行并跟踪每个单独文件中的当前行，因此`NR==FNR`仅当我们在第一个文件中时条件才成立。`a`是一个关联数组，其中键是第一个文件中的每个唯一行。`$0`是当前行的值`awk`。语句跳转到文件中的`next`下一行以跳过不执行的下一部分。`$1`如果第一个字段在数组中，则最后一部分是直截了当的`a`，然后第二个字段打印当前行。默认块`awk`是`{print $0}`所以这是隐式的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:25:16.127

这是一种非常骇人听闻的方法，并且可能被许多 grep/sed 实现者所反对。此外，它可能取决于终端。你被警告了。

GNU grep 在颜色模式下会突出显示与其中一种模式匹配的输入片段，这在理论上可以用作完全匹配的测试。在这里，这甚至可以在实践中使用，也就是说，在 GNU sed 的帮助下：

```
grep --color=always -f file1 file2 | sed -n '/^\x1b.*\x1b\[K *\x1b.*\x1b\[K$/ { s/\x1b\[K//g; s/\x1b[^m]*m//gp }' 
```

输出：

```
yellow mango 
```

请注意，sed 模式假定`file2`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T17:01:10.120

您可以使用 bash、sed 和 grep 来完成：

```
grep -f <(sed 's/^/^/' file1) file2  | grep -f <(sed 's/$/$/' file1) 
```

这有点晦涩难懂，所以我将其分解：

`grep -f <file>`从文件中读取一系列模式并将匹配其中任何一个。

`<(...)`是`bash` [进程替换](http://www.gnu.org/software/bash/manual/bash.html#Process-Substitution)，将执行 shell 命令并创建一个伪文件，其输出可用于代替文件名。

`sed 's/^/^/' file1`在 file1 的每一行的开头插入一个`^`字符，将这些行转换为匹配 file2 的第一个单词的模式。

`sed 's/$/$/' file1``$`在末尾插入一个字符，因此模式将匹配第二个单词。

**编辑**：使用：

```
grep -f <(sed 's/^/^/;s/$/\b/' file1) file2  | grep -f <(sed 's/$/$/;s/^/\b/' file1) 
```

绕过乔纳森在评论中指出的问题。

# javascript - 学习knockout.JS的机制

> ID：16174604
> 
> 赞同：2
> 
> 时间：2013-04-23T16:31:14.470
> 
> 标签：javascript, asp.net-mvc-3, knockout.js, knockout-mvc

我正在使用 MVC，我正在尝试使用[http://learn.knockoutjs.com/#/?tutorial=intro](http://learn.knockoutjs.com/#/?tutorial=intro)上的介绍教程， 不过我想在 Visual Studio 中实现它们。我不完全确定如何做到这一点......

所以我创建了一个 JS 文件：

```
// This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
function AppViewModel() {
    this.firstName = "Bert";
    this.lastName = "Bertington";
}

// Activates knockout.js
ko.applyBindings(new AppViewModel()); 
```

我的观点：

```
 <!-- This is a *view* - HTML markup that defines the appearance of your UI -->

<p>First name: <strong>todo</strong></p>
<p>Last name: <strong>todo</strong></p> 
```

但是我需要像往常一样创建模型和控制器吗？还是只是一个视图和一个 JS 文件？

请建议不确定这是如何工作的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T20:03:34.523

如果您希望将它们用于其设计的真正目的，还有更多配置要做，但这里是使它们运行基本的基础：

```
$(function(){
    var viewModel = 
    {
        firstName : "Bart",
        lastName : "Bartington"
    };
    ko.applyBinding(viewModel);
}); 
```

鉴于：

```
<p><span data-bind="text: firstName"> <span></p>
<p><span data-bind="text: lastName"> <span></p> 
```

如果你想要 2 种方式的数据绑定，不要忘记忘记 observables 和其他设置。

# android - 将 Activity 包装在片段中，或替代解决方案

> ID：16174605
> 
> 赞同：2
> 
> 时间：2013-04-23T16:31:16.990
> 
> 标签：android, android-activity, android-fragments

我在 Google Play 上发布了一个相当大的、已经发布的铁路时刻表应用程序，现在我也计划整合公共汽车时刻表。我的问题是这样的：

*   目前，每当应用启动时，它都会加载 Activity，您可以在其中搜索火车，我们称之为 A
*   我已经实现了公交搜索活动的测试版，我们称之为 B
*   最终，我会想出一个混合解决方案，它可以同时搜索火车和公共汽车，当然有一些限制，我们称之为 C

现在，我想实现主屏幕，使其具有可滑动的选项卡，选项卡将是 A、B 和 C。我从未真正使用过这些选项卡，所以我的知识不是那么深，但是，我来了提出一个解决方案，这确实可行，但它需要大量的重新编码（请记住，我的应用程序是在一年前发布的），因为我从来没有真正为碎片做好准备。我正在做[这](http://android.amolgupta.in/2013/01/backward-compatibility-super-quick.html)件事，而且效果非常好。但是，这意味着主屏幕应该是一个FragmentActivity，这很好，我可以处理。但我不能提供 A、B 和 C 活动，作为选项卡，它只接受片段。

问题是：我可以将我已经编码的 Activity 作为片段进行补充，以便我可以在它们之间滑动吗？有没有我不知道的包装机制？还有其他解决方案，您可以告诉我吗？只要给我指个方向，剩下的交给我。或者，我是不是该死，必须从头开始重新编码所有内容？没问题，如果是这样的话，我很乐意避免它。

提前谢谢，干杯。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:28:50.507

您可以做的是将您的片段包装在一个活动中。如果您的活动中包含多个类，这将是更好的选择。否则，我会选择[wangyif2 的建议](https://stackoverflow.com/a/16175032/2109241)。

无论如何，如果你想做前者：

```
public class SampleActivity extends Activity {
  ...

  public static class SampleFragment extends Fragment {
    ...

  }
} 
```

当您最终在 ActionBar 中初始化所有这些时

```
final ActionBar bar = getActionBar();
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

bar.addTab(bar.newTab()
            .setText("Sample")
            .setTabListener(new TabListener<SampleActivity.SampleFragment>(
                    this, "sample", SampleActivity.SampleFragment))); 
```

我建议从 API 14+ 示例中查看 API Demo。FragmentTabs (com.example.android.apis.app.FragmentTabs) 中有一个很好的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T10:58:10.693

谢谢你们的建议，我确实尝试了wangyif2建议的方法，它在代码中产生了太多的开销，因为我做了一些具体的事情。

我将查看一些演示，但我想我会从头开始重新编码所有内容，这似乎是目前最干净的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:57:54.157

代替原来的 Activity A、B、C 扩展 SherlockActivity，只需将它们更改为扩展 SherlockFragments，并将它们提供给选项卡。

显然，您必须修复一些编译错误，即活动生命周期和[片段生命周期](http://developer.android.com/guide/components/fragments.html#Lifecycle)之间的差异，但是一旦修复它们，您就可以开始了。

# sql - SQL如何INNER JOIN具有相似字段名称的多个值

> ID：16174613
> 
> 赞同：0
> 
> 时间：2013-04-23T16:31:37.567
> 
> 标签：sql, join

我有一张名为**玩家的桌子**

```
p_id | first    | last
========================
1    | Michael  | Jordan
2    | Charles  | Barkley
3    | Kobe     | Bryant
4    | Allen    | Iverson
5    | Kevin    | Garnett 
```

然后我有一个名为**users的表**

```
u_id | user | player_1 | player_2 | player_3
============================================
1    | John | 1        | 2        | 5
2    | Jane | 3        | 4        | 5
3    | Jim  | 2        | 3        | 4 
```

通过网站上的表格，用户选择他们的球员（字段：player_1，player_2，player_3对应于**players**表中的id

我正在尝试运行 INNER JOIN，在其中打印**用户**表中的**用户**及其玩家选择（第一个，最后一个）

到目前为止我有这个

```
SELECT * FROM users 
INNER JOIN players p1 ON player_1 = p1.player_id                
INNER JOIN players p2 ON player_2 = p2.player_id                
INNER JOIN players p3 ON player_3 = p3.player_id                
INNER JOIN players p4 ON player_4 = p4.player_id                
INNER JOIN players p5 ON player_5 = p5.player_id                
ORDER BY data"; 
```

当我跑

```
while ($row = mysql_fetch_assoc($result_users))
{
$player_1_first = $row['player_name'];      
$player_1_last = $row['player_last'];

echo $player_1_first." ".$player_2_last;
} 
```

我只得到用户的最后一个选择。

**我的问题：** 我如何才能正确地完成我想要实现的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:39:24.333

这是一个可能的解决方案：

```
SELECT users.*, p1.player_id AS player1_id, p2.player_id AS player2_id, p3.player_id AS player3_id, p4.player_id AS player4_id, p5.player_id AS player5_id FROM users 
INNER JOIN players p1 ON player_1 = p1.player_id                
INNER JOIN players p2 ON player_2 = p2.player_id                
INNER JOIN players p3 ON player_3 = p3.player_id                
INNER JOIN players p4 ON player_4 = p4.player_id                
INNER JOIN players p5 ON player_5 = p5.player_id                
ORDER BY data"; 
```

在您的 PHP 代码中，您当然会按名称选择字段，因为它们在 Select 子句中被“重命名”。

但是你也应该修改你的数据库模式，因为一个好的模式不会有这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:39:38.143

如果我了解您所追求的（您并没有真正说），您需要更改选择以请求您想要的输出

```
SELECT users.FieldsYouWant, 
p1.first as p1first, p1.last as p1last, 
p2.first as p2first, p2.last as p2last,
p3.first as p3first, p3.last as p3last, 
p4.first as p4first, p4.last as p4last, 
p5.first as p5first, p5.last as p5last 
FROM users 
INNER JOIN players p1 ON player_1 = p1.player_id                
INNER JOIN players p2 ON player_2 = p2.player_id                
INNER JOIN players p3 ON player_3 = p3.player_id                
INNER JOIN players p4 ON player_4 = p4.player_id                
INNER JOIN players p5 ON player_5 = p5.player_id                
ORDER BY data"; 
```

然后在您的输出中，在一行中读取所有 5 个名称请注意，如果用户没有选择 5 个玩家，您将一无所获

# metadata - 我从哪里获得信息来为 OpenStreetMap 图层创建元数据？

> ID：16174615
> 
> 赞同：0
> 
> 时间：2013-04-23T16:31:40.907
> 
> 标签：metadata, openstreetmap

我被要求为从 Open Street Map 中提取的一个 gdataset 创建元数据 (INSPIRE)。我下载了多边形图层并添加了基本信息，但我不知道在哪里可以找到比这更多的信息：http: [//openstreetmapdata.com/data/land-polygons](http://openstreetmapdata.com/data/land-polygons) 我已经找了 2 个小时了，我想我会去的很快就疯了。所以如果有人知道，非常感谢。

干杯，

我特别关注数据质量！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:23:53.743

您将找不到有关您下载的多边形文件的完整元数据信息。不幸的是，您下载 OSM 数据的源没有与多边形关联的任何 ID。例如，如果您从[Geofabrik](http://download.geofabrik.de/)下载数据，则数据将具有关联的 id。通过这种方式，您可以查找各个行，并可能获得有关它们的创建方式或作者的更多信息。

Inspire 元数据采用 XML 格式。您可能必须从头开始创建它。据我所知，没有可用的 OSM XML 元数据。

# .htaccess - ZEND .htaccess，重定向到 www 和 index.php

> ID：16174616
> 
> 赞同：0
> 
> 时间：2013-04-23T16:31:42.653
> 
> 标签：.htaccess, zend-framework, mod-rewrite, redirect

这是我的问题：

**目标：**

将所有非 www 查询重定向到 www（如果可能，永久重定向），以及所有查询到 index.php（为了 Zend 框架的正常工作）

**问题：**

.htaccess 无法正常工作

**.ht 访问：**

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule !^www\.(.*)$ http://www.%{HTTP_HOST}/$1 [NC]
RewriteRule ^www\.(.*)$ http://%{HTTP_HOST}/$1 [NC]
RewriteRule ^.*$ index.php [NC]
RewriteRule ^.*\.index.php ./ [NC,L]

SetEnv APPLICATION_ENV development 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:47:09.693

要重定向到 www 试试这个：

```
RewriteCond %{HTTP_HOST} ^yourdomain\.co\.uk
RewriteRule ^(.*)$ http://www.yourdomain.co.uk/$1 [R=permanent,L] 
```

要将所有查询映射到 index.php，请尝试以下操作：

```
RewriteRule ^(.*)$ /index.php [QSA,L] 
```

以下是有关 R、QSA 和 L 用途的更多信息：

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

# javascript - Javascript替换为部分匹配？

> ID：16174625
> 
> 赞同：0
> 
> 时间：2013-04-23T16:32:28.923
> 
> 标签：javascript

我正在查看`replace()`示例，但我不确定执行此操作的最佳方法：

说我有一个类似的字符串

```
{G}{J}{L}... 
```

`string.replace()`更改内括号和外括号但将字母留在其中的最佳方法是什么？我是否需要对外部和内部括号进行单独的匹配，或者是否可以/更快地在单个语句中进行匹配？

我看到`$`可以得到整个匹配，我想我可以删除第一个和最后一个字符并在之后替换它们，但这似乎很慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:34:54.533

```
> "{G}{J}{L}".replace(/{(.)}/g,"$1")
"GJL" 
```

这就是你所追求的吗？或者也许这个？

```
> "{G}{J}{L}".replace(/{(.)}/g,"[$1]")
"[G][J][L]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:35:08.420

一种非常简单的方法是单独执行替换，除非您的字符串很大，否则性能差异应该可以忽略不计：

```
var string = "{G}{J}{L}";
string = string.replace(/\{/g, "<").replace(/}/g, ">") 
```

# java - 两个“like”查询组合并排序

> ID：16174628
> 
> 赞同：1
> 
> 时间：2013-04-23T16:32:51.797
> 
> 标签：java, mysql, sql, hibernate

我有一个表“mytable”，其中有一列“name”。我希望查询以某个字符串开头或在名称中包含该字符串的所有行，并以以该名称开头的行排在第一位的方式对它们进行排序。是否可以只有一个查询？

我不能使用“联合”，我使用的是 Hibernate，它不受支持。我不想使用视图，因为它们没有被 Hibernate 二级缓存缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:01:27.530

在 Oracle 中，您可以执行以下操作：

```
select *
  from myTable mt
 where mt.column like '%TargetString%'
 order by instr(mt.column, 'TargetString') 
```

如果您使用的是 Hibernate + Oracle，它支持`instr`方言中的功能。

我相信其他RDBMS也有类似的功能，可能是Hibernate dialect支持的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:07:47.140

也许这样的事情可以工作？

```
select nvl(mytable1.name, '') || nvl(mytable2.name, '') as name, 
nvl(mytable1.i, '') || nvl(mytable2.i, '') as i from 
(select 1 as i, name from mytable where name like ('string%')) mytable1
full outer join
(select 2 as i, name from mytable where name like ('%string%')) mytable2
where (mytable1.name is null or mytable2.name is null)
and mytable1.name != mytable2.name
order by i, name 
```

但我想我会使用以下之一：

*   这个查询的一个简单的联合查询
*   而是在 Java 中进行排序，并将其作为 2 个查询进行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T17:28:51.907

**编辑**：由于您厌恶利用多个标准查询 - 无论出于何种原因 - 我建议阅读[Order](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/criterion/Order.html)类。它不会为您提供您想要的。这让你几乎没有选择。

一种选择是利用[Hibernate Search](http://docs.jboss.org/hibernate/search/4.1/reference/en-US/html/)。

另一种方法是利用 Hibernate 进行查询，然后再`Collections.sort(...)`进行排序。

```
List<MyObject> lstMyObject = ...;
Collections.sort(lstMyObject, new Comparator<MyObject>() {
    @Override
    public int compare(MyObject o1, MyObject o2) {
        // Assuming 'argument' is passed to this method and defined as 'final'
        return o1.getName().startsWith(argument) && o2.getName().startsWith(argument) ? 0 :
            o1.getName().startsWith(argument) ? -1 : 1;
    }
} 
```

这满足您的要求：1) 使用 Hibernate，2) 不使用多个查询，3) 不使用本机 SQL，4) 不使用视图，5) 不使用“联合”。

* * *

我的建议是两个查询，**例如**：

```
public List<MyObject> findMyObjects(...) {
    Criteria queryStartsWith = sf.getCurrentSession().createCriteria(MyObject.class)
        .add(Restrictions.like("myProperty",nameArgument,MatchMode.START))
        .addOrder(Order.desc);

    Criteria queryLike = sf.getCurrentSession().createCriteria(MyObject.class)
        .add(Restrictions.like("myProperty",nameArgument,MatchMode.ANYWHERE))
        .addOrder(Order.desc);

    List<MyObject> lstMyObject = new ArrayList<MyObject>();
    for (Object curObject : queryStartWith.list())
        if (curObject instanceOf MyObject)
            lstMyObject.add((MyObject) curObject);

    for (Object curObject : queryLike.list())
        if (curObject instanceOf MyObject)
            lstMyObject.add((MyObject) curObject);

    return lstMyObject;
} 
```

我不确定 Hibernate 是否会适应您的条件订购。老实说，org.hibernate.criterion.Order 类非常有限。

除了使用本机 SQL，这是我能想到的唯一选择。

# git - Git - 推送后恢复合并的所有提交

> ID：16174629
> 
> 赞同：3
> 
> 时间：2013-04-23T16:32:53.060
> 
> 标签：git

我有以下情况：

```
master A -  B -  E 
                / 
second   C -   D - F 
```

从主分支恢复“第二个分支”的所有提交的最佳解决方案是什么？

“第二个”分支有大约 70 次提交。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T20:21:57.190

您应该看一下我为稍微不同的问题提供的答案，该问题涉及恢复合并提交。[“恢复合并与重置合并”](https://stackoverflow.com/questions/15736564/why-after-merge-does-git-say-already-upto-date-but-differences-between-branch/15737656#15737656)。这将解释 revert 是如何工作的，以及 reset 对于合并提交是如何工作的。在这种情况下，有人已经恢复，但在想要撤消恢复后出现了一些奇怪的行为 - 因此请在阅读此答案后查看，以便全面了解它的工作原理。

## 不要重置！

在推送提交后使用`git-reset`意味着您已经更改了其他人已经拥有的历史记录，**这很糟糕**。如果你重置，你实际上是在倒回历史。要推动这一点，您需要执行`forced push`. 然后其他开发人员将需要知道使用`git-fetch`后跟，如果他们在您删除的合并提交后有新的提交`git reset --hard origin/master`，他们甚至可能需要执行复杂的操作。`git rebase --onto`否则，他们最终只会推送您刚刚重置的相同提交。

修改已经推送的历史通常是个**坏主意。**

## 使用 Git 还原

使用`git revert`创建一个新的提交，它否定合并提交的内容而不是倒回它。它使您在历史中前进，而不是修改历史。

```
git revert E 
```

还原该合并提交后，您将拥有以下历史记录...

```
master A -  B -  E  - G 
                / 
               /
second   C -  D - F 
```

`G`提交代表还原。该提交“撤消”了合并引入的更改。还原合并提交时需要注意一些问题。请阅读我关于[“恢复合并与重置合并”](https://stackoverflow.com/questions/15736564/why-after-merge-does-git-say-already-upto-date-but-differences-between-branch/15737656#15737656)的回答，了解它是如何工作的，以及以后如何撤消恢复。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-23T16:53:14.357

我假设'E'是一个合并提交。有两种简单的方法可以做到这一点。一种是从分支*master**重置*您的最后一次提交：

 *```
git checkout master
git reset --hard HEAD^ 
```

我不推荐这样做，因为这会从你的*主*分支**中删除**最后一次提交。

 *现在第二个选项是*恢复*提交：

```
git checkout master
git revert HEAD -m 1 M 
```

您必须通过**-m**选项，因为 'E' 是合并提交。这将创建一个新的提交来还原所做的更改。我建议您先在存储库的副本上尝试此操作。此外，如果您正在与其他开发人员合作，最好**不要**重写历史。第一种方法重写历史，所以我建议你使用第二种方法。

另外，请检查以下链接：

[如何恢复错误的合并](https://www.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.txt)

[改写历史](http://git-scm.com/book/ch6-4.html)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:39:12.997

要还原它，很容易，commit E 是第二个分支中所有提交的合并提交，要做的就是删除 E（合并提交），然后在 master 分支中，第二个分支就没有更多的东西了。

1.  git结账大师
2.  git reset --hard HEAD^

然后就可以了。

第二个分支中的所有内容仍将保留。对于主分支，第二个分支没有更多的东西。**

# javascript - 向 GeoJson 添加属性/更多数据

> ID：16174632
> 
> 赞同：0
> 
> 时间：2013-04-23T16:33:11.777
> 
> 标签：javascript, jquery, json, gis

我有一个来自 Internet 的美国县的 GeoJson。我正在围绕县数据进行可视化。

这是数据结构。有没有一种方法可以添加更多属性而无需复制和粘贴到每个属性中？

```
{ "type": "Feature", "properties": { "DATA": 25.0, "COUNTY": "27049", "NAME": "Goodhue", "POPULATION": 46183.0, "F18_POP_20": 32425.0, "F18_POP": 35233.0, "H18_POP": 745.0, "NH18_WHT": 33501.0, "NH18_DOJ_B": 279.0, "NH18_DOJ_I": 427.0, "NH18_DOJ_A": 210.0, "NH18_DOJ_H": 23.0, "NH18_DOJ_O": 19.0, "NH18_DOJ_1": 29.0 }, "geometry": { "type": "Polygon", "coordinates": [ [ SVG DATA ] ] } }, 

{ "type": "Feature", ........ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:36:45.973

您可以通过几种不同的方式设置 JavaScript 对象的属性

```
obj.property = value 
```

或者

```
obj['property'] = value; 
```

尽管乍一看，您的文件似乎是一个未解析的 JSON 文件，但在这种情况下，您希望首先在字符串上调用 JSON.parse()。

```
var obj = JSON.parse(string); 
```

# ios - Xcode 优化导致变量在首次使用时返回无效

> ID：16174634
> 
> 赞同：2
> 
> 时间：2013-04-23T16:33:14.653
> 
> 标签：ios, objective-c, xcode, ipad, optimization

我创建了一个对象数组。这些对象有一个公共变量`correct`。当我关闭 xcode 优化时，我的项目中的所有内容都运行良好，但是当我设置任何类型的优化时，事情就会出错。我第一次创建这些对象中的一个`correct`时，从另一个类访问时，变量总是返回 false。但随后创建此类对象会返回正确的值`correct`。这是我的代码和问题的片段。

。H

```
@interface ShellQuestionAnswer : UIView
{
    ...

    @public
    bool correct;
    ...
} 
```

.m

```
-(void)setLetter:(NSString*)letter forAnswer:(XMLNode*)answer withResponse:(XMLNode*)response
{
    ...
    correct = [[[answer attributes] valueForKey:@"Correct"] isEqualToString:@"true"];
    //Putting NSLog here shows "correct" to be true
} 
```

以及使用这个对象的类：

```
-(void)addQuestion:(XMLNode*) rootNode ID:(NSString*)ID
{
...
     answer1 = [[ShellQuestionAnswer alloc] initWithFrame:CGRectMake(0, currentY, textContainer.frame.size.width, 50)]; 
        [answer1 setLetter:@"A" forAnswer:[answerstextArray objectAtIndex:0] withResponse:[responsestextArray objectAtIndex:0]];
        currentY += answer1.frame.size.height + QUESTION_SEPARATION;
        if(!answerObjects)
        {
            answerObjects = [[NSMutableArray alloc] init];
        }
        else
        {
            [answerObjects removeAllObjects];
        }
        [answerObjects addObject:answer1];

        answer2 = [[ShellQuestionAnswer alloc] initWithFrame:CGRectMake(0, currentY, textContainer.frame.size.width, 50)];
        [answer2 setLetter:@"B" forAnswer:[answerstextArray objectAtIndex:1] withResponse:[responsestextArray objectAtIndex:1]];
        currentY += answer2.frame.size.height + QUESTION_SEPARATION;
        [answerObjects addObject:answer2];

        [textContainer addSubview:answer1];
        [answer1 setUserInteractionEnabled:YES];
        [textContainer addSubview:answer2];
        [answer2 setUserInteractionEnabled:YES];
        if([answerstextArray count] > 2)
        {
            answer3 = [[ShellQuestionAnswer alloc] initWithFrame:CGRectMake(0, currentY, textContainer.frame.size.width,50)];
            [answer3 setLetter:@"C" forAnswer:[answerstextArray objectAtIndex:2] withResponse:[responsestextArray objectAtIndex:2]];
            [textContainer addSubview:answer3];
            currentY += answer3.frame.size.height + QUESTION_SEPARATION;
            [answerObjects addObject:answer3];
            [answer3 setUserInteractionEnabled:YES];
        }
        if([answerstextArray count] > 3)
        {
            answer4 = [[ShellQuestionAnswer alloc] initWithFrame:CGRectMake(0, currentY, textContainer.frame.size.width, 50)];
            [answer4 setLetter:@"D" forAnswer:[answerstextArray objectAtIndex:3] withResponse:[responsestextArray objectAtIndex:3]];
            [textContainer addSubview:answer4];
            currentY += answer4.frame.size.height + QUESTION_SEPARATION;
            [answerObjects addObject:answer4];
            [answer4 setUserInteractionEnabled:YES];
        }

        [textContainer setNeedsDisplay]; 
        for(ShellQuestionAnswer *answer in answerObjects)
        {
            if(answer->correct)  //<-- always returns false the first time I run this function
            {
                if(!self.correctAnswer)
                {
                    self.correctAnswer = [[NSMutableArray alloc] init];
                }
                [self.correctAnswer addObject:answer];
            }
        }
} 
```

我已经记录了所有内容，但不明白为什么在`answer->correct`对象外部返回 false，但在`answer`对象内部，变量`correct`实际上是 true。这仅在优化开启（任何模式）并且仅在使用此类的第一个实例时发生。

如果我将`correct`变量更改为属性而不是公共类成员变量，则问题不再存在。我对这个解决方案很好，但我不明白为什么会发生这种情况。这个问题可能出现在我的代码中的任何其他类中，直到客户在第一次运行时抱怨随机怪癖，我才知道在哪里。这是我无法接受的。有人对为什么优化会弄乱我的代码有任何想法吗？

编辑：为了更清楚，这是我正在使用的测试用例。一种有效，一种无效（以上述方式）。

在职的：

```
@interface ShellQuestionAnswer : UIView
{
    ...

    @public
    //bool correct;
    ...
}
@property (nonatomic, assign) bool correct; 
```

不工作：

```
@interface ShellQuestionAnswer : UIView
{
    ...

    @public
    bool correct;
    ...
} 
```

这些是为获得工作集而更改的唯一行（除了`answer->correct`更改`answer.correct`为属性案例的 for 循环内部）。

# image - GWT，为什么 CellTable 在 Eclipse 中运行时不显示图像？

> ID：16174639
> 
> 赞同：0
> 
> 时间：2013-04-23T16:33:44.197
> 
> 标签：image, gwt, project, directory, celltable

我有代码：

```
ClickableTextCell imageCell = new ClickableTextCell() {

    @Override
    public void render(Context context, SafeHtml data, SafeHtmlBuilder sb) {
        if (data != null) {
            String imagePath = "contact.jpg";
            //sb.appendEscaped(imagePath);
            sb.appendHtmlConstant("<img width=\"20\" src=\"" + imagePath + "\">");
        }
    }

};

Column<List<String>,String> imageColumn = new Column<List<String>,String>(imageCell) {

    @Override
    public String getValue(List<String> object) {
        return "";
    }

 };

imageColumn.setFieldUpdater(new FieldUpdater<List<String>, String>() {

     @Override
     public void update(int index, List<String> object, String value) {
         //Window.alert("You clicked " + object.get(index));
     }

 });

table.addColumn(imageColumn, columnName); 
```

但是在 Eclipse 中运行时，它不会显示图像。Web 服务器收到此错误：

```
 Request headers
  Host: 127.0.0.1:8888
  User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:20.0) Gecko/20100101 Firefox/20.0
  Accept: image/png,image/*;q=0.8,*/*;q=0.5
  Accept-Language: en-US,en;q=0.5
  Accept-Encoding: gzip, deflate
  Referer: http://127.0.0.1:8888/abc.html?gwt.codesvr=127.0.0.1:9997
  Cookie: MYCOOKIE=htzjk7g2pva9; JSESSIONID=1xjqdxl3kuuxw; PRODUCTSERVICECOOKIE=1xjqdxl3kuuxw
  Connection: keep-alive
  Response headers
  Set-Cookie: PRODUCTSERVICECOOKIE=1xjqdxl3kuuxw;Path=/
  Content-Length: 1397
  Content-Type: text/html; charset=iso-8859-1
  [WARN] 404 - GET /contact.jpg (127.0.0.1) 1397 bytes
 Request headers
   Host: 127.0.0.1:8888
  User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:20.0) Gecko/20100101 Firefox/20.0
  Accept: image/png,image/*;q=0.8,*/*;q=0.5
  Accept-Language: en-US,en;q=0.5 
```

此外，第二个问题是将图像放在哪里，以便在我们部署最终的 Web 应用程序时，我们可以轻松地管理图像。我实际上对 Eclipse 中的文件夹结构感到困惑。

在 MyProject 中，我有：
war\myproject
war\WEB-INF
war\MyProjet.css
war\MyProjet.html

但在 MyProject 我也有文件夹 src ，其中包含所有 java 文件
src\myproject\client\ （在客户端文件夹中，我放了“contact.jpg”
src\myproject\server

我不确定我是否将contact.jpg 放在正确的文件夹中。另外，当我们部署我们的 webapp 时，Eclipse 会将所有图像文件迁移到这个文件夹中：-->
war\myproject

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:33:33.313

任何一个：

*   将您的图像放在公共路径中。[公共路径](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideModules)中的静态资源（例如图像）会自动复制到编译器输出目录中。要在客户端代码中引用它们，您必须使它们相对于`GWT.getModuleBaseURL()`.

或者

*   `ImageResource`在 a中使用 an`ClientBundle`并使用：

    *   `imageResource.getSafeUri().asString()`链，获取其解析（安全）`URI`；或者

    *   `AbstractImagePrototype.create(imageResource).getHTML()`对于整个`<img>`片段。

我已排除该`new Image(imageResource).getUrl()`选项，因为它对您的用例无用（不需要`Image`小部件）。

此外，如果您想使用图标装饰单元格，请查看`IconCellDecorator`，也许会有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:49:41.817

如果您将图像文件放在`rc\myproject\public\img\contact.jpg`文件夹中，那么 GWT 将在编译期间将文件复制到您的`war\gwtmodulename\img\contact.jpg`文件夹中，您需要使用`GWT.getModuleBaseURL()+"img\"+"contact.jpg"`as 进行编码，因为它可以为您提供图像 wrt 的位置`http:\\domain\war\gwtmodulename`。

如果您将图像文件放在`war\img`文件夹中，那么您需要使用代码来`GWT.getHostPageBaseURL()+"img\"+"contact.jpg"`为您提供图像 wrt yout 的位置`http:\\domain\war\`。

# sql-server - 如果条目重复并保留最新条目，我如何更新 SQL 表中的列？

> ID：16174640
> 
> 赞同：0
> 
> 时间：2013-04-23T16:33:47.153
> 
> 标签：sql-server, duplicate-removal

我有一个包含大约 90,000 个条目的数据库表。我需要更新任何较旧的条目，以便将它们移动到存档表中。我能够找到计数大于 1 的重复项，并找出它被重复了多少次。

这是我用来工作的查询。

```
 SELECT DWPAGECOUNT, DOCTYPE, FILENAME, First, middleinitial, last, 
     COUNT(*) as Number_of_Duplicates
   FROM dbo.REGISTRAR
  WHERE first IS NOT NULL
  GROUP BY DWPAGECOUNT, DOCTYPE, FILENAME, First, middleinitial, last
 HAVING COUNT(*) > 1
  ORDER by Number_of_Duplicates desc 
```

我现在需要多次更新表中的任何内容，并保持最新条目不变，并将状态列更新为重复。

我怎样才能做到这一点？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:37:55.230

```
;WITH x AS 
(
  SELECT DWPAGECOUNT, DOCTYPE, FILENAME, First, middleinitial, last, 
    [STATUS],
    rn = ROW_NUMBER() OVER 
         (
           PARTITION BY 
             DWPAGECOUNT, DOCTYPE, FILENAME, First, middleinitial, last
           ORDER BY 
             STOREDATETIME DESC
         )
  FROM dbo.REGISTRAR
)
UPDATE x SET [STATUS] = CASE WHEN rn > 1 THEN 'DUP' ELSE 'NOT DUP' END; 
```

# ruby - 运行时的 Ruby 脚本错误

> ID：16174648
> 
> 赞同：1
> 
> 时间：2013-04-23T16:34:31.153
> 
> 标签：ruby, input, stream, terminal

我正在运行一个包含以下内容的 Ruby 脚本：

```
def addCourses 
crns = []

loop do                                   Line 168
    system("clear")
    puts "Your CRNs:".color(:red)
    crns.each do |crn|
        puts "  -> #{crn[:title]} (CRN: #{crn[:crn]})".color(:magenta)
end

    #Prompt for CRN
    alt = (crns.length > 0)  ? " (or just type 'start') " : " "
    input = ask("\nEnter a CRN to add it#{alt}".color(:green) + ":: ") { |q| q.echo = true }        LINE 177     

    #Validate CRN to be 5 Digits 
    if (input =~ /^\d{5}$/) then

        #Display CRN Info
        c = getCourse(input.to_s)
        puts "\nCourse: #{c[:title]} - #{c[:crn]}".color(:red)
        puts "--> Time: #{c[:begin]}-#{c[:end]} on #{c[:days]}".color(:cyan)
        puts "--> Teacher: #{c[:instructor]}".color(:cyan)
        puts "--> Type: #{c[:type]} || Status: #{c[:status]}".color(:cyan)
        puts "--> Availability: #{c[:seats]} / #{c[:capacity]}\n".color(:cyan)

        #Add Class Prompt
        add = ask("Add This Class? (yes/no)".color(:yellow) + ":: ") { |q| q.echo = true }
        crns.push(c) if (add =~ /yes/)

    elsif (input == "start") then
        checkCourses(crns)
    end 
end
end 
```

但我收到一个错误：

您的 CRN：

```
Enter a CRN to add it :: /Library/Ruby/Gems/1.8/gems/highline-1.6.18/lib/highline.rb:844:in `get_line': The input stream is exhausted. (EOFError)
from /Library/Ruby/Gems/1.8/gems/highline-1.6.18/lib/highline.rb:867:in `get_response'
from /Library/Ruby/Gems/1.8/gems/highline-1.6.18/lib/highline.rb:259:in `ask'
from Untitled.rb:177:in `addCourses'
from Untitled.rb:168:in `loop'
from Untitled.rb:168:in `addCourses'
from Untitled.rb:210:in `main'
from Untitled.rb:217 
```

我不完全确定是什么导致了错误，因为我在其他地方有类似的代码，它们具有相同的基本目的。此错误的原因可能是什么？我在相应代码右侧的顶部块中包含了适当的代码行号。

# python - 使用鼻子测试特别命名的目录

> ID：16174649
> 
> 赞同：2
> 
> 时间：2013-04-23T16:34:33.217
> 
> 标签：python, unit-testing, import, nose, nosetests

是否`nosetests`以不同的方式对待具有某些名称的目录？目录是`src`特殊的吗？

如果我有一个源目录名为 的项目`src`，`nosetests`似乎可以正常工作。但是，如果该目录被命名为其他任何名称，则会`nosetests`报告一堆导入错误。

这是我所做的：

1.  运行测试

    ```
    ~/src$ nosetests
    ..
    ----------------------------------------------------------------------
    Ran 2 tests in 0.001s

    OK 
    ```

2.  重命名目录

    ```
    ~/src$ cd ..
    ~/$ mv src/ src2 
    ```

3.  重新运行测试

    ```
    ~/$ cd src2
    ~/src2$ nosetests
    E
    ======================================================================
    ERROR: Failure: ImportError (No module named **whatever**)
    ----------------------------------------------------------------------
    Traceback (most recent call last):
    ... etc. ...
        import **whatever**
    ImportError: No module named **whatever**

    ----------------------------------------------------------------------
    Ran 1 test in 0.001s

    FAILED (errors=1) 
    ```

我无法在文档中找到有关此的任何内容。

* * *

示例：使用此目录结构：

```
.
|-- a
|   |-- b.py
|   `-- __init__.py
|-- __init__.py
`-- test
    |-- a
    |   |-- __init__.py
    |   `-- testb.py
    `-- __init__.py 
```

所有`__init__.py`文件都是空的，内容`a/b.py`是：

```
y = 3 
```

和`test/a/testb.py`：

```
import a.b
import unittest as u

class TestB(u.TestCase):

    def test1(self):
        self.assertTrue(True)

    def test2(self):
        self.assertTrue(False) 
```

我可以可靠地重现这个问题。运行`nosetests -V`给出：

```
nosetests version 1.2.1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T21:18:39.147

快速解决方案是`__init__.py`从顶级目录中删除。另一种选择是使用相对导入，例如：替换`import a.b`为`from ...a import b`.

这种混乱和棘手的罪魁祸首是[鼻子进口商](https://github.com/nose-devs/nose/blob/master/nose/importer.py)。

如果您正在运行的目录`nosetests`是一个包，则nose不会将其添加到`sys.path`，否则，它将添加它（[source](https://github.com/nose-devs/nose/blob/master/nose/importer.py#L136)）。然后，它向上抛出目录树并递归地应用相同的逻辑。所有受影响的文件都是一样的。这解释了为什么它不能使用`__init__.py`- 根目录（`src2`在你的情况下）不在 sys.path 中 - 这就是`a`找不到包的原因。

但是，这里的悬而未决的问题是：为什么它第一次使用`src`文件夹？ `src`在这种情况下，文件夹位于 sys.path 上。可能会有其他答案或编辑。

查看相关问题：

*   [Python 鼻子导入错误](https://stackoverflow.com/questions/3073259/python-nose-import-error)
*   [Nosetest 包括不需要的父目录](https://stackoverflow.com/questions/6197940/nosetest-including-unwanted-parent-directories)
*   [使用nose进行测试的Python导入-在当前包之上导入模块的最佳实践是什么](https://stackoverflow.com/questions/6670275/python-imports-for-tests-using-nose-what-is-best-practice-for-imports-of-modul)

# asp.net - ASP.NET 按钮单击导致重复事件 IE10/Win7HomePremium

> ID：16174650
> 
> 赞同：1
> 
> 时间：2013-04-23T16:34:34.773
> 
> 标签：asp.net, button, click

只是进行调查以了解是否有人以前遇到过此问题。我已将问题缩小到使用 IE10 运行 Win7HomePremium 的本地计算机，报告称当用户单击“打印机友好”按钮时，该事件在 0.03 时间范围内发生两次。有时，当点击也发生在白天时，时间戳会在上午 12:00:00 返回。是否有人对点击事件有任何问题，您采取了哪些步骤来解决问题。

我不能在我们办公室的任何其他机器上复制它，客户也不能在家里的任何其他机器上复制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T17:04:04.967

尽管看起来很疯狂，但该决议是强制 IE10 将 Doc Mode 呈现为 IE5 Quirks。该应用程序的日期约为 1999 年，并在占位符中使用了许多占位符，表中的表已经导致它在任何版本的 IE 的 Quirks 中呈现。无论出于何种原因，使用 IE5Quirks 修复了事件中数据库中的重复条目。

# objective-c - FBSDKLog：系统授权失败：

> ID：16174653
> 
> 赞同：2
> 
> 时间：2013-04-23T16:34:53.863
> 
> 标签：objective-c, facebook, ios6

我添加了用于访问用户帐户的 facebook sdk。但是，当用户已经通过 iOS 6 facebook 登录 facebook 时，在我的应用程序的第一页中，它必须显示应用程序正在请求配置文件权限的警报。为此，我在应用程序委托中添加了以下代码

[FBSession openActiveSessionWithAllowLoginUI:true];

```
NSArray *permissions = [NSArray arrayWithObjects:
                        @"friends_about_me",nil];
[FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:true  
 completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
    if (error) {
        NSLog(@"Failure");
    }
}];

return YES; 
```

}

-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString* ) sourceApplication注解:(id)annotation { return [FBSession.activeSession handleOpenURL:url]; }

我得到了正确的警报。![在此处输入图像描述](https://i.stack.imgur.com/snFFk.png)

但是当我点击确定按钮时，它给了我以下错误

FBSDKLog：系统授权失败：“Facebook 服务器无法完成此访问请求：remote_app_id 与存储的 id 不匹配”。这可能是由于 bundle 标识符与您在 developers.facebook.com/apps 上的服务器上的应用程序配置不匹配造成的。

但在我的 fb 开发者帐户中，一切都很好。请帮我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T20:41:27.273

您确定在 Facebook 应用设置中设置了相同的捆绑 ID 吗？验证的一个好方法是使用此代码将捆绑 ID 打印到控制台，并将其与 Facebook 上的应用设置进行比较：

```
NSLog(@"Bundle ID: %@",[[NSBundle mainBundle] bundleIdentifier]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T07:02:42.257

亲爱的 Sudha，您的捆绑包 ID 可能尚未从 facebook 的所有服务器确认。你必须等待它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-24T10:04:01.997

请注意，您的捆绑包 ID 区分大小写！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-03T13:34:42.067

当我在 3.5 英寸模拟器中运行我的项目时，我遇到了同样的问题，它显示了同样的错误。它在 4 英寸模拟器中运行良好。我通过转到我的 3.5 英寸模拟器设置解决了这个问题，然后我从我的 Facebook 帐户中注销。然后我重新运行它工作的项目。

# javascript - 使用 iMacros 和 javascript 检查是否存在 html 元素

> ID：16174655
> 
> 赞同：3
> 
> 时间：2013-04-23T16:34:56.720
> 
> 标签：javascript, html, firefox, imacros

我想检查 iMacros 是否存在 HTML 元素。如果是这样，我想转到一个 URL。如果没有，我想转到其他 URL。

因为 iMacros 没有语句，所以我将 javascript 与 iMacros 的 EVAL 一起使用。这是处理 javascript 执行的行：

```
SET !VAR3 EVAL("var element = window.content.document.getElementById(\"some_element\");
if (typeof(element) != 'undefined' && element != null) { 
var redirect = 'http://192.168.178.22/sc/report.php'; 
} else { 
var redirect = 'http://192.168.178.22/sc/index.php?action=connect'; 
} 
redirect;
") 
```

*全部在一行中，但我在这里对其进行了格式化。

然后，我将重定向

```
URL GOTO={{!VAR3}} 
```

问题出在这两种情况下，!VAR3 设置为“未定义”。

我只在 Firefox 上尝试了几乎相同的 JS 代码，它似乎工作正常。

带有最新 Firefox 和最新 iMacros 版本的 Windows 8。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:46:10.623

```
var macro;

macro ="CODE:";
macro +="TAG POS=1 TYPE=DIV ATTR=CLASS:some_class CONTENT=EVENT:MOUSEOVER ";

var ret=null;

ret=iimPlay(macro);

if(ret>0)
{
//do something
}
else
{
//do something else
} 
```

这将是您想要的脚本的基本模型。您只需插入正确的 imacros 代码。

# machine-learning - KNN 分类器情感分析 vs 类别分析精度

> ID：16174656
> 
> 赞同：0
> 
> 时间：2013-04-23T16:35:03.313
> 
> 标签：machine-learning, sentiment-analysis, document-classification

我在java中实现了KNN分类器，结果很奇怪。如果我对数据集示例亚马逊书评进行情感分析，我得到了 55% 的准确率。从 100 个测试文档中，55 个正确分类为负面或正面评论，45 个错误分类。但如果我将 KNN 用于类别分类示例相机或书籍，那么我的准确率达到 95%。

有一些解释我的代码是错误的？任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:02:10.647

@Christopher Pfohl 是对的。它们是不同的方法，对您来说有一个关键区别。一般来说，情感分析（基于简单的词袋）比您的案例中的类别分类要复杂得多。

顺便说一句，只是一个澄清，55％不是精度，而是精度。（更多信息：[http](http://en.wikipedia.org/wiki/Accuracy_and_precision#In_binary_classification) ://en.wikipedia.org/wiki/Accuracy_and_precision#In_binary_classification ）

# python - 如何创建独立的python平台？

> ID：16174658
> 
> 赞同：1
> 
> 时间：2013-04-23T16:35:23.487
> 
> 标签：python, linux, macos, bundle

我想为 Mac/Linux/Windows 创建压缩的 python 平台包（带有 pyGTK 库）。目的是允许用户下载带有 python 库（如 pyGTK）的自定义版本的 eclipse。这样用户就不需要自己安装 python 和 pyGTK。

可能吗？

我尝试使用 virtualenv 创建 python 平台，但它创建了指向原始安装的符号链接。覆盖文件（与原始文件的符号链接）后，它不起作用。

到目前为止，我发现的唯一方法是从源代码编译 python 并通过 shell 脚本安装它。问题是是否有其他方法可以做到这一点？

雅库布

# php - preg_match 成功后的代码循环

> ID：16174659
> 
> 赞同：0
> 
> 时间：2013-04-23T16:35:28.360
> 
> 标签：php, preg-match

我遇到了非常奇怪的代码行为。本质上，在应该返回 true 的 preg_match 上，下一条语句不会自行执行。让我用我自己的代码演示一下：

```
foreach($params as $param)
{
  error_log("processing $param");
  $doesInputContainBadCode = preg_match("/<script\b[^>]*>([\s\S]*?)<\/script>/m",$param);
  error_log("input contains bad code? :".$doesInputcontainBadCode);
  if($doesInputContainBadCode === 1) 
    error_log("process this input");
} 
```

假设我的 $params 数组包含：

```
$params = {"first_name","last_name","middle_name","<script type="text/javascript">alert("javascript massacre");</script>", "whatever", "something else"} 
```

这是 error_log 显示的内容：

```
processing first_name
input contains bad code? : 0
processing last_name
input contains bad code? : 0
processing middle_name
input contains bad code? : 0
processing <script type="text/javascript">alert("javascript massacre");</script>
processing whatever 
```

请注意在处理包含参数的“javascript”后如何跳过 error_log。它应该有记录的 **输入包含错误的代码？: 1** **处理这个输入**

但是，这些都没有记录。至少，我认为它必须记录：

**输入包含错误代码？：**

无论 preg_match 结果如何。但它显然没有，而且不仅针对此输入，而且 preg_match 成功的任何输入都会重复此行为。

[PHP 文档](http://php.net/manual/en/function.preg-match.php)指出 preg_match 返回 1 或 0 取决于 preg_match 是成功还是失败，如果有错误则返回 false。不知道这里发生了什么，如果有人能指出我正确的方向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:06:58.770

您应该只测试 `===`错误

更改日志 php 5.3.6 如果偏移量高于主题长度，则返回 FALSE。
以上是一个错误。

警告

此函数可能返回布尔值 FALSE，但也可能返回计算结果为 FALSE 的非布尔值。请阅读有关布尔值的部分以获取更多信息。使用 === 运算符测试此函数的返回值。

正如您在日志中看到的那样，它永远不会运行低谷

```
if($doesInputContainBadCode === 1) 
   error_log("process this input");
} 
```

例如，您必须进行测试。

```
$param ="<script type=\"text/javascript\">alert(\"javascript massacre\");</script>";
if (preg_match("/<script/i", $param)) {
    echo "A match was found.";
} else {
    echo "A match was not found.";
} 
```

输出：

> 找到匹配项。

# c# - 使用 Unity 解决命名依赖项

> ID：16174661
> 
> 赞同：7
> 
> 时间：2013-04-23T16:35:33.100
> 
> 标签：c#, inversion-of-control, unity-container

我有一个具有 2 个依赖项的服务：一个存储库和一个网关（短信）。

我需要解决 2 个不同版本的服务，它们仅在传递给网关的参数之一上有所不同。

代码简化为如下

```
public interface IService
{
    string DoSomething();
}

public interface IServiceFoo
{
    string DoSomething();
}

public interface IServiceBar
{
    string DoSomething();
}

public interface IRepository { }
public class Repository : IRepository { }

public interface IGateway
{
    string Name { get; set; }
}

public class Gateway : IGateway
{
    public string Name { get; set; }
    public Gateway(string name)
    {
        this.Name = name;
    }
}

public class Service : IService, IServiceFoo, IServiceBar
{
    private readonly IGateway _gateway;
    private readonly IRepository _repo;
    public Service(IRepository repo, IGateway gateway)
    {
        _gateway = gateway;
        _repo = repo;
    }

    public string DoSomething()
    {
        return _gateway.Name;
    }
} 
```

失败的测试

```
[TestClass]
public class UnityTest
{
    [TestMethod]
    public void TestMethod1()
    {
        var container = new UnityContainer();
        container
            .RegisterType<IRepository, Repository>()
            .RegisterType<IGateway, Gateway>("FooGateway", new InjectionConstructor("I am foo"))
            .RegisterType<IGateway, Gateway>("BarGateway", new InjectionConstructor("I am bar"))
            .RegisterType<IServiceFoo, Service>(new InjectionConstructor(new ResolvedParameter<IRepository>(), new ResolvedParameter<IGateway>("FooGateway")))
            .RegisterType<IServiceBar, Service>(new InjectionConstructor(new ResolvedParameter<IRepository>(), new ResolvedParameter<IGateway>("BarGateway")));

        var barGateway = container.Resolve<IGateway>("BarGateway");
        var fooGateway = container.Resolve<IGateway>("FooGateway");

        var serviceBar = container.Resolve<IServiceBar>();
        var serviceBarGatewayName = serviceBar.DoSomething();

        var serviceFoo = container.Resolve<IServiceFoo>();
        var serviceFooGatewayName = serviceFoo.DoSomething();

        Assert.AreEqual("I am bar", barGateway.Name); // pass
        Assert.AreEqual("I am foo", fooGateway.Name); // pass

        Assert.AreEqual("I am bar", serviceBarGatewayName); // pass
        Assert.AreEqual("I am foo", serviceFooGatewayName); // FAIL 
```

解析服务时传入了错误的网关，但是如果我通过名称显式解析网关，则它是正确的。我认为我在 ResolvedParameter(string name) 的工作方式中遗漏了一些基本的东西，但我认为它在容器中查找具有该名称的类型。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T07:15:22.237

仍然不知道为什么您的版本不起作用，但这确实起作用（正如我所料）：

```
 var container = new UnityContainer();
        container
            .RegisterType<IRepository, Repository>()
            .RegisterType<IGateway, Gateway>( "FooGateway", new InjectionConstructor( "I am foo" ) )
            .RegisterType<IGateway, Gateway>( "BarGateway", new InjectionConstructor( "I am bar" ) )
            //.RegisterType<IServiceFoo, Service>( new InjectionConstructor( new ResolvedParameter<IRepository>(), new ResolvedParameter<IGateway>( "FooGateway" ) ) )
            //.RegisterType<IServiceBar, Service>( new InjectionConstructor( new ResolvedParameter<IRepository>(), new ResolvedParameter<IGateway>( "BarGateway" ) ) );
            .RegisterType<IServiceFoo>( new InjectionFactory( c => new Service( c.Resolve<IRepository>(), c.Resolve<IGateway>( "FooGateway" ) ) ) )
            .RegisterType<IServiceBar>( new InjectionFactory( c => new Service( c.Resolve<IRepository>(), c.Resolve<IGateway>( "BarGateway" ) ) ) ); 
```

请注意，我使用`InjectionFactory`的是`InjectionConstructor`.

另一个有效的版本。这次我保留了您注册服务的方式，但我将它们命名并按名称解析：

```
 var container = new UnityContainer();
        container
            .RegisterType<IRepository, Repository>()
            .RegisterType<IGateway, Gateway>( "FooGateway", new InjectionConstructor( "I am foo" ) )
            .RegisterType<IGateway, Gateway>( "BarGateway", new InjectionConstructor( "I am bar" ) )
            .RegisterType<IServiceFoo, Service>( "sf", new InjectionConstructor( new ResolvedParameter<IRepository>(), new ResolvedParameter<IGateway>( "FooGateway" ) ) )
            .RegisterType<IServiceBar, Service>( "sb", new InjectionConstructor( new ResolvedParameter<IRepository>(), new ResolvedParameter<IGateway>( "BarGateway" ) ) );
            //.RegisterType<IServiceFoo>( new InjectionFactory( c => new Service( c.Resolve<IRepository>(), c.Resolve<IGateway>( "FooGateway" ) ) ) )
            //.RegisterType<IServiceBar>( new InjectionFactory( c => new Service( c.Resolve<IRepository>(), c.Resolve<IGateway>( "BarGateway" ) ) ) );

        var barGateway = container.Resolve<IGateway>( "BarGateway" );
        var fooGateway = container.Resolve<IGateway>( "FooGateway" );

        var serviceBar = container.Resolve<IServiceBar>( "sb" );
        var serviceBarGatewayName = serviceBar.DoSomething();

        var serviceFoo = container.Resolve<IServiceFoo>( "sf" );
        var serviceFooGatewayName = serviceFoo.DoSomething(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-18T08:57:51.503

也可以使用 ParameterOverride 来完成，如下所示

```
 container
            .RegisterType<IRepository, Repository>()
            .RegisterType<IGateway, Gateway>("FooGateway", new InjectionConstructor("I am foo"))
            .RegisterType<IGateway, Gateway>("BarGateway", new InjectionConstructor("I am bar"))
            .RegisterType<IServiceFoo, Service>(new InjectionConstructor(new ResolvedParameter<IRepository>(), typeof(IGateway)))
            .RegisterType<IServiceBar, Service>(new InjectionConstructor(new ResolvedParameter<IRepository>(), typeof(IGateway)));

        var barGateway = container.Resolve<IGateway>("BarGateway");
        var fooGateway = container.Resolve<IGateway>("FooGateway");

        var serviceBar = container.Resolve<IServiceBar>(new ParameterOverride("gateway", barGateway));
        var serviceBarGatewayName = serviceBar.DoSomething();

        var serviceFoo = container.Resolve<IServiceBar>(new ParameterOverride("gateway", fooGateway));
        var serviceFooGatewayName = serviceFoo.DoSomething();

        Assert.AreEqual("I am bar", barGateway.Name); // pass
        Assert.AreEqual("I am foo", fooGateway.Name); // pass

        Assert.AreEqual("I am bar", serviceBarGatewayName); // pass
        Assert.AreEqual("I am foo", serviceFooGatewayName); // pass 
```

# python - windows x64中的python calg库

> ID：16174663
> 
> 赞同：0
> 
> 时间：2013-04-23T16:35:42.547
> 
> 标签：python, windows, python-2.7, 64-bit

当我在 Windows 7 for x64 中运行 python 时，看到这个

[-]calg 库：[http ://c-algorithms.sourceforge.net](http://c-algorithms.sourceforge.net)

![在此处输入图像描述](https://i.stack.imgur.com/uiQ7a.jpg)

为什么会这样，我该怎么做？？

windows x64中w3af的python calg库

有没有人不知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T23:15:24.647

尝试在 Mac (mavericks) 上设置 w3af 时出现此错误。原来`pybloomfiltermmap`用pip没有安装成功。我通过从其存储库手动下载它来解决它 - [https://github.com/axiak/pybloomfiltermmap](https://github.com/axiak/pybloomfiltermmap) - 并根据说明安装它（python setup.py install）。

# node.js - 使用域和 socket.io 处理 Nodejs 错误

> ID：16174664
> 
> 赞同：7
> 
> 时间：2013-04-23T16:36:01.583
> 
> 标签：node.js, socket.io, dns, node.js-domains

我刚刚开始在 nodejs 中使用域进行错误管理。

当我将它们与 socket.io 一起使用时，有些东西我无法理解。

这是我的示例代码：

```
io.sockets.on('connection', function cb1(socket){
    socket.on('event', function cb2(data){
    });
}); 
```

我开始将所有代码放入“运行”方法中

```
domain.run(function(){
    io.sockets.on('connection', function cb1(socket){
        socket.on('event', function cb2(data){
        });
    });
}); 
```

但如果 cb1 或 cb2 发生错误，则不会处理！

然后我在 che cb1 上使用了绑定方法

```
domain.run(function(){
    io.sockets.on('connection', domain.bind(function cb1(socket){
        socket.on('event', function cb2(data){
        });
    }));
}); 
```

但是如果在 cb2 中发生错误，它不会被处理！

我的问题是：我是否必须在每个回调上放置一个“绑定”？在服务器和所需的文件中？

当我开始研究这些领域时，所有教程都将它们定义为单点处理错误的最佳解决方案！

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T09:46:49.550

**编辑**：是的，您必须绑定每个回调。

看看这个截屏视频，它解释了这个问题：[Node Tuts Episode VIII - Handling Errors Using Domains](http://nodetuts.com/08-domains.html)（他从 13:45 开始谈论这个问题）。

如果我理解正确，如果您不在回调中发出或抛出错误，则必须使用[`.bind`](http://nodejs.org/api/domain.html#domain_domain_bind_callback)or显式绑定它们[`.intercept`](http://nodejs.org/api/domain.html#domain_domain_intercept_callback)。但根据我自己在回调方面的经验，这还不够，我必须将每个回调绑定到域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T14:12:23.197

我所做的是为每个套接字创建一个新域：

```
var Domain = require('domain');

...

io.sockets.on('connection', function (socket){

    d = domain.create();
    d.add(socket);

    d.on('error', function () {

        // You have access to the socket too in here, useful
    });

    socket.on('event', function (data){

        socket.on('event2', function (data){

            throw new Error('I will be caught!');
        });
    });
}); 
```

**为什么这行得通？**

`Domain.prototype.add`将现有的事件发射器添加到域。这意味着该发射器上事件的所有新回调都将隐式绑定到域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T17:23:57.867

如果您在域范围内创建套接字，则该套接字对象中引发错误的所有事件都将被域捕获。

```
domain.run(function(){
  var io = require('socket.io').listen(80);
  io.sockets.on('connection', function cb1(socket){
    socket.on('event', function cb2(data){
   });
  }));
}); 
```

尝试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:15:56.233

（我是dorexx45，忘记密码了）

我试过了，但它部分有效。

如果我在域内创建一个对象（例如 mysql 连接），则不会处理该对象上的错误！

```
domain.run(function(){
  var pool = mysql.createPool();
  var io = require('socket.io').listen(80);
  io.sockets.on('connection', function cb1(socket){
    socket.on('event', function cb2(data){
       pool.something();
   });
  }));
}); 
```

如果在 中发生某些事情`pool.something()`，例如错误的查询语法或错误的连接数据，则错误不会被`domain.run`!

# javascript - 滚动到元素后突出显示该元素

> ID：16174669
> 
> 赞同：0
> 
> 时间：2013-04-23T16:36:16.007
> 
> 标签：javascript, jquery, html, css

这是我正在使用的小提琴：http: [//jsfiddle.net/fz5Yk/5/](http://jsfiddle.net/fz5Yk/5/)

如您所见，它具有一页滚动导航。我想`<strong> </strong>`在滚动到某个部分时对标签中的标题实现高亮效果（最好使用 .animate 函数）。只需手动滚动页面，您就会在导航菜单中看到突出显示；滚动部分的项目，但我无法完全解析 js 代码以便将其应用于标题，并且使用 .animate 函数对其进行干预对我来说似乎要困难得多。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:43:35.377

插件页面似乎有据可查；[https://github.com/davist11/jQuery-One-Page-Nav](https://github.com/davist11/jQuery-One-Page-Nav)。

只需在定义内滚动到的位置放置动画即可`end:`；

```
$('#nav').onePageNav({
    end: function() {
        //I get fired when the animation is ending
    }
}); 
```

**测试更新**

```
$(window).scroll(function() {
    var visible_start = window.pageYOffset;
    var window_height = window.innerHeight;
    var section3_height = $('#section-3').height();
    var section3_start = $('#section-3')[0].offsetTop;

    if ((visible_start - window_height >= section3_start) &&
       $('#section-3').css('background-color', 'yellow');
    }
}); 
```

# c# - 可以在本地检索数据库上的格式化消息，但不能在实时站点上检索

> ID：16174671
> 
> 赞同：0
> 
> 时间：2013-04-23T16:36:20.360
> 
> 标签：c#, asp.net, label, repeater

如果标题看起来含糊不清，我很抱歉，但我/实际上/不知道该怎么说。
欢迎任何可以改变它的人。

我正在使用`Repeater`控件从数据库中读取消息，并将它们显示在`Label`.

通过VS2010，我能够愉快地看到和显示消息。但是，当我发布该网站时，它会出现以下警告：

```
Attempt by method 'System.Web.UI.DataBinder.GetIndexedPropertyValue(System.Object, System.String)' to access method 'System.Data.Common.DataRecordInternal.get_Item(System.String)' failed.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.MethodAccessException: Attempt by method 'System.Web.UI.DataBinder.GetIndexedPropertyValue(System.Object, System.String)' to access method 'System.Data.Common.DataRecordInternal.get_Item(System.String)' failed.

Source Error: 

Line 106:                <asp:Panel ID="pnlModuleHolder" class="module blue" runat="server">
Line 107:                    <h2>
Line 108:                        <asp:Label ID="lblTitle" runat="server" Text='<%# Eval("[newsColumnTitle]")%>' Font-Bold="True"></asp:Label>
Line 109:                        <a href='<%# "NewsReport?report=" +Eval("[id]") %>'>Read More</a></h2>
Line 110:                </asp:Panel>

Source File: f:\Domains\SEE47\ocdbt.whatyouneed.com\wwwroot\Default.aspx    Line: 108 
```

我以前从未见过这种情况，而且因为它在我的本地站点上运行，所以我无法真正通过调试来寻找答案。

有没有人有过这方面的经验？

这是存储在数据库中的消息片段。

```
<p style="font-family: Arial; line-height: 18px;"><strong>Welcome to the Beta build and release of the O 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:54:32.313

[根据这个博客](http://arahuman.blogspot.com/2008/09/systemmethodaccessexception.html)：

> 在中等信任环境中，根据微软的“不允许反射”。看起来当您在内部将数据读取器分配给中继器控件时，它正在做一些导致此问题的反射。此错误的另一个奇怪行为是它甚至不会告诉您确切的错误...

他说要在本地复制以下内容`web.config`：

```
<system.web>
    <trust level="Medium" />
</system.web> 
```

他最后的解决方法是使用`DataSet`而不是`DataReader`.

# google-glass - 镜像 API，获取附件时的 503 响应

> ID：16174674
> 
> 赞同：0
> 
> 时间：2013-04-23T16:36:32.663
> 
> 标签：google-glass, google-mirror-api

在获取帖子的图片附件时，我经常收到 503 响应。它有时有效。我使用与 QuickStart python 示例相同的代码。

```
attachment = self.mirror_service.timeline().attachments().get(itemId, attachmentId).execute()
resp, content = self.mirror_service._http.request(attachment['contentUrl']) 
```

有人见过这个吗？我认为凭据已过期，所以我尝试再次登录，但这似乎并没有解决问题。

更新：请求中返回的内容是“后端错误”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T03:22:57.243

问题似乎已经解决了。我认为这是服务器端问题。

# django - Django easy_thumbnails 访问图像 URL

> ID：16174675
> 
> 赞同：4
> 
> 时间：2013-04-23T16:36:39.520
> 
> 标签：django, json, thumbnails, easy-thumbnails

是否可以访问 easy_thumbs 创建的图像的 URL？

我有一个模型与 a`ImageField`和 a`ModelForm`匹配。

```
# models.py

class ModelWithAnImage(models.Model):
    image = ThumbnailerImageField(
        upload_to='images',
    ) 
```

按照[文档](http://easy-thumbnails.readthedocs.org/en/latest/usage/#pregeneration)，我在上传图像时使用信号生成两个拇指。

```
# somewherethatdefinitelygetsloaded.py

from easy_thumbnails.signals import saved_file
from easy_thumbnails.signal_handlers import generate_aliases_global

saved_file.connect(generate_aliases_global) 
```

这工作正常，但是否可以访问这些拇指的网址？

.

`model_with_an_image.image.url`返回原始图像（如您所料）。

目的是通过 AJAX 将拇指 url 发送到外部源，因此`{% thumbnail %}`目前不会帮助我。

```
# requirements.txt

Django==1.5.1
Pillow==2.0.0
boto==2.9.0
django-storages==1.1.8
easy-thumbnails==1.2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:06:22.700

文档指向[`thumbnail_url`](http://easy-thumbnails.readthedocs.org/en/latest/usage/#thumbnail-url-filter)模板过滤器，它可以返回模板内缩略图的 URL。

您可以从您的视图（或其他任何地方）像真正的函数一样调用模板过滤器，它应该像在模板中一样工作，例如：

```
from easy_thumbnails.templatetags.thumbnail import thumbnail_url

thumbnail_url = thumbnail_url(model_with_an_image, 'small') 
```

在幕后，过滤器只是调用[`get_thumbnailer`](http://easy-thumbnails.readthedocs.org/en/latest/usage/#get-thumbnailer)，所以你也可以写：

```
thumbnailer = get_thumbnailer(model_with_an_image)
thumbnailer.generate = False  # so a not generate a thumb if sthg went wrong
thumbnail = thumbnailer.get_thumbnail(thumbnail_options)
#  do stuff with thumbnail.url 
```

# jsf-2 - 表为空时如何更改默认消息

> ID：16174677
> 
> 赞同：1
> 
> 时间：2013-04-23T16:36:46.037
> 
> 标签：jsf-2, primefaces

我有一个这样的数据表：

```
 <p:dataTable rowStyleClass="#{(item.vigente) eq true ? 'hh1' : 'hh2'}" rowIndexVar="rowIndex" id="tabla_Contratos"  var="item" selection="#{suplementosMB.contratoParaSuplemSelected}" selectionMode="single" rowKey="#{item.idContrato}" value="#{contratosMB.itemsContratosUtil}"> 
                            <p:ajax event="rowSelect" listener="#{suplementosMB.mostrarTablaSuplementos}"  update=":form2:tabla_Suplementos :form2:panelDetallesSuplementos :form2:growl"/>  
                            <p:ajax event="rowUnselect"  update=":form2:growl"/> 
                            <p:column id="ctipo" headerText="Seleccione el contrato">                         
                                <h:outputText value="#{item.noContrato}/#{item.tipoContrato.tipoContrato}"/>
                                <p:commandButton id="estado" icon="#{contratosMB.definirIconEstadoContrato(item.vigente)}" title="#{(item.vigente) eq true ? 'Estado del contrato: Vigente' : 'Estado del contrato: Cancelado'}" style="left:20px;width:25px"/>
                            </p:column> 
        </p:dataTable> 
```

当表为空时显示：“未找到记录”，我该如何更改此消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:38:26.620

请先阅读[文档](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/dataTable.html)。您可以通过设置更改消息`emptyMessage`。

# git - Bitbucket 回车

> ID：16174678
> 
> 赞同：5
> 
> 时间：2013-04-23T16:36:49.427
> 
> 标签：git, bitbucket

当我将源推送回 Bitbucket 时，我发现 BB 找不到我修改的地方。我只是在代码的某处输入了几个回车问题，但 BB 将其视为整个文件的重大更改并将整个文件标记为红色或绿色。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:10:00.830

这听起来像是一个行尾问题。

Windows 和 UNIX 系统不使用相同的换行符，为了防止基于这些的冲突发生，你应该这样设置你的 git config： + 在 Windows 上： git config --global core.autocrlf true + 在 Unix 上： git config --global core.autocrlf 输入

这个想法是始终推动 LF（Unix 风格）。这样，Bitbucket 或 Git 不会将所有行尾标记为已更改，从而导致巨大的差异文件。

附带说明一下，在 Github 上，您可以添加`?w=0`到 URL 的末尾以通过忽略空格来查看差异。不幸的是，我不知道 bitbucket 上有任何类似的功能:(

# android - Android org.json 将 Map 转换为 JSON 的问题

> ID：16174680
> 
> 赞同：0
> 
> 时间：2013-04-23T16:36:57.120
> 
> 标签：android, json

我有一些代码可以在 Java 中创建特定的 JSON 结果（适用于 Android）：

```
Map<String, Object> jsonDict = new HashMap<String, Object>();
Map<String, Object> dict = new HashMap<String, Object>();
dict.put(_operator, _value);
System.out.println("Dict is: " + new JSONObject(dict).toString());

jsonDict.put(_field, dict);
System.out.println("jsonDict is: " + new JSONObject(jsonDict).toString()); 
```

当我打印出每一步的结果时，得到：

```
Dict is: {"$eq":"asdf"} // <-- this line is correct 
```

最后的结果：

```
Filter 1 is: {"testing":"{eq=asdf}"}  // <-- this line is INCORRECT 
```

我应该得到的结果是：

```
{"testing":{"eq":"asdf"}} 
```

当我将 a`Map`放入`Object`其中时，`Map`它会将其切换为 a`String`并添加一个 = 符号。它为什么这样做以及可以做些什么呢？

注意：“eq”、“asdf”和“testing”是我的函数的输入。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:41:11.587

尝试这个

```
JSONObject json=new JSONObject();
json.put("testing",new JSONObject(dict).toString()) 
```

**输出：**

```
{"testing":{"eq":"asdf"}} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-05-27T10:25:06.083

尝试这个

```
Gson gson = new Gson();
new JSONObject(gson.toJson(jsonDict)); 
```

**输出：**

```
{"testing":{"eq":"asdf"}} 
```

# list - 如何从 Prolog 的列表中删除最后一个元素？

> ID：16174681
> 
> 赞同：7
> 
> 时间：2013-04-23T16:37:10.067
> 
> 标签：list, prolog

我处于以下情况：我有一个列表，我只想从中删除最后一个元素。

我已经实施了以下规则（效果不佳）：

```
deleteLastElement([Only],WithoutLast) :-
    !,
    delete([Only],Only,WithoutLast).
deleteLastElement([_|Tail],WithoutLast) :-
    !,
    deleteLastElement(Tail,WithoutLast). 
```

问题是当我调用它时，列表中的所有元素都被删除了，实际上如果我执行以下语句我得到：

```
[debug]  ?- deleteLastElement([a,b,c], List).
List = []. 
```

查看跟踪我认为这很清楚导致此问题的原因：

```
[trace]  ?- deleteLastElement([a,b], List).
   Call: (7) deleteLastElement([a, b], _G396) ? creep
   Call: (8) deleteLastElement([b], _G396) ? creep
   Call: (9) lists:delete([b], b, _G396) ? creep
   Exit: (9) lists:delete([b], b, []) ? creep
   Exit: (8) deleteLastElement([b], []) ? creep
   Exit: (7) deleteLastElement([a, b], []) ? creep
List = []. 
```

当达到基本情况时，**WithoutLast**列表与**空列表**[] 统一，并且在执行回溯时，**WithoutLast**仍然是空列表。

情况不妙。

我正在考虑执行以下操作来实现它：

1.  在调用删除最后一个元素的谓词之前计算列表中元素的数量。
2.  递归迭代，每次递减元素个数的值
3.  如果元素的数量为 0，则表示这是最后一个元素，因此我将其从原始列表中删除

但这在我看来并不清楚而且不太好，我会知道是否有针对此问题的声明性良好解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T16:59:35.607

我觉得你的分析有点过于复杂。让我们从基本情况开始：

```
without_last([_], []). 
```

当您位于最后一个元素时，结果应该是空列表。

因此，归纳情况必须是我们不在最后一个元素的情况。在我将一些元素附加到任意长列表的情况下，没有最后一个元素的列表只是列表的尾部，没有最后一个元素，当前元素在前面。或者：

```
without_last([X|Xs], [X|WithoutLast]) :- 
    without_last(Xs, WithoutLast). 
```

这在各个方向都有效。

```
?- without_last([1,2,3,4], X).
X = [1, 2, 3] ;
false.

?- without_last([1,2], X).
X = [1] .

?- without_last([1], X).
X = [] ;
false.

?- without_last([], X).
false.

?- without_last(X, [1,2,3]).
X = [1, 2, 3, _G294].

?- without_last([1,2,3,4], [1,2,3]).
true.

?- without_last([1,2,3,X], [1,2,3]).
true. 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-15T17:24:44.310

为了防止创建无用的选择点，请使用滞后以从第一个参数索引中受益：

```
list_butlast([X|Xs], Ys) :-                 % use auxiliary predicate ...
   list_butlast_prev(Xs, Ys, X).            % ... which lags behind by one item

list_butlast_prev([], [], _).
list_butlast_prev([X1|Xs], [X0|Ys], X0) :-  
   list_butlast_prev(Xs, Ys, X1).           % lag behind by one 
```

示例查询：

```
?- list_butlast([], Xs).
false.

?- list_butlast([1], Xs).
Xs = [].                                    % succeeds deterministically

?- list_butlast([1,2], Xs).
Xs = [1].                                   % succeeds deterministically

?- list_butlast([1,2,3], Xs).
Xs = [1,2].                                 % succeeds deterministically 
```

另一个方向呢？

```
?- list_butlast(Xs, []).
Xs = [_A].

?- list_butlast(Xs, [1,2,3]).
Xs = [1,2,3,_A]. 
```

最一般的查询呢？

```
?- list_butlast(Xs, Ys).
   Xs = [_A]            , Ys = []
;  Xs = [_A,_B]         , Ys = [_A]
;  Xs = [_A,_B,_C]      , Ys = [_A,_B]
;  Xs = [_A,_B,_C,_D]   , Ys = [_A,_B,_C]
;  Xs = [_A,_B,_C,_D,_E], Ys = [_A,_B,_C,_D]
⋯ 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-23T16:55:18.460

如果您开发一个遍历输入列表的每个元素的递归过程，那么当您找到将结果列表与空列表统一的最后一个元素时，您的基本案例将停止。然后，从递归调用返回，您只需将所有其他项目添加到结果列表中：

不使用剪切：

```
deleteLastElement([_], []).
deleteLastElement([Head, Next|Tail], [Head|NTail]):-
  deleteLastElement([Next|Tail], NTail). 
```

当第一个参数列表中只有一个元素时，第一个子句（基本情况）将第二个参数与空列表统一起来。

第二个子句指出，当第一个参数是一个包含至少两个元素的列表时，您递归地调用自身（没有头部），并将头部添加到该调用返回的第二个参数。

事实上，您不需要在第二个子句中明确表明列表需要至少有两个元素，

```
deleteLastElement([Head|Tail], [Head|NTail]):-
  deleteLastElement(Tail, NTail). 
```

而且，当然，您也可以使用`append/3`从列表中删除最后一项：

```
append(WithoutLast, [_], List). 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-05T07:55:54.547

@repeat 的实现肯定是当前 Prolog 处理器最有效的实现，但我仍然喜欢为此目的使用 DCG - 暗中希望有一天实现技术足以以相当的（空间）效率运行它。

```
list_butlast(Xs, Ys) :-
   phrase( ( seq(Ys), [_] ), Xs).

seq([]) -->
   [].
seq([E|Es]) -->
   [E],
   seq(Es). 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-26T21:42:41.693

从列表中删除最后一个元素的最简单方法是：

*   反转列表
*   现在删除第一个元素
*   反转剩余列表

您应该使用的代码：

```
delete_last(X,Y):-
    reverse(X,[_|X1]), reverse(X1,Y). 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-10T09:26:05.760

这是一个老问题，但我发现了另外两种方法：

*   不要创造一个无用的选择点。
*   不需要额外的谓词。

```
findall(X ,append(X, [_], List), [X]). 
```

```
length(List, N), nth1(N, List, _, X). 
```

# c++ - 数组、向量和链表

> ID：16174686
> 
> 赞同：1
> 
> 时间：2013-04-23T16:37:30.123
> 
> 标签：c++, arrays, data-structures, vector, linked-list

我的主要问题是向量如何工作。

我知道链接列表是连接在一起的节点列表。这就是我在脑海中想象的样子。但我无法想象向量是什么样的。

我读到向量具有随机访问权限，就像数组一样。但什么是随机访问？计算机最终不会在内部搜索索引吗？我这样说是因为我可以通过运行 for 循环重载`[]`运算符以给我链表中的第 i^(个元素。)

还有一个数组是由什么组成的？我知道数组是如何工作的，但它背后是什么，它也是节点的集合吗？我问这个只是为了一般知识。

[这](https://docs.google.com/file/d/0ByMP-XLaZiP4cWlTc0pQSnZGa2s/edit?usp=sharing)是一个关于向量的问题。它看起来与用于链表的函数非常相似。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T16:46:39.093

C++ 中的A`vector`是一个本质上包装数组并在您向其中添加新元素时自动调整其大小的类。

数组本质上只是一个连续的内存块，其中每个元素都在内存中紧挨着放置。

随机访问基本上意味着通过索引访问一个元素，即获取列表中的第 5 个元素。数组（因此`vector`）通过元素的恒定时间查找提供有效的随机访问。这意味着访问第 5 个元素与访问第 573 个元素一样快。

由于`vector`包装了一个数组并将其数据作为数组在内部存储，因此元素查找的效率与数组的效率相同（基本上）。它不需要查找索引或类似的东西，因为它将数据保存在数组中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T16:49:07.947

通常一个向量有三个数据成员：

*   指向数据开头的指针
*   指向数据末尾的指针（或保存向量大小的整数）
*   一个包含向量当前容量的整数（不要担心这个）

“数据”是一个数组，所以最终一个向量看起来像一个指向包含一些额外信息的数组的指针。

数组是内存中相邻对象的序列，因此每个对象都从比前一个对象的最后一个字节高一个字节的地址开始。

> 计算机最终不会在内部搜索索引吗？

不，RAM 硬件的部分功能是在不扫描内存的情况下获取指定地址的内容。这就是 RAM 与（例如）转鼓存储器的区别。

在这种情况下，“随机访问”是指最多在固定时间内访问任何地址。

对于向量和数组，`i`可以通过将偏移量添加到第一个元素的地址来计算第一个元素的地址。以字节为单位的偏移量等于`i`单个元素大小的倍数。对于链表，获取第`i`th 个元素的唯一方法是遵循`next`指针`i`时间。因此，如果您确实`operator[]`为链表实现了该功能，则执行更大的值将花费更长的时间`i`，因此不会提供*随机*访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T16:59:59.877

一个向量（至少在 C++ 中）表示一个连续的内存块，它保存着大小相等的对象。这允许它在恒定时间内计算任何给定项目的地址，例如：

```
address = base_address + index * item_size; 
```

请注意，大部分内容都在幕后（可以这么说）——C++（就像之前的 C 一样）根据计算某些指定大小的对象的地址来定义索引，所以实际上代码可能看起来像：

```
T &operator[](size_t index) { return base[index]; } 
```

...并且编译器处理生成代码以基于`sizeof(T)`.

这意味着访问数组的任何部分都需要代码部分基本相同的机制。公平地说，这并不意味着所有访问都必然具有相同的速度。

例如，数据的一部分可能在缓存中，其他部分在主内存中，还有其他部分很可能在虚拟内存中，其中检索需要从磁盘驱动器读取数据。这可能很容易意味着一百万到一（或更多）的速度差异。

然而，这仍然与链表形成对比，链表需要线性复杂度才能找到链表中任意项的地址。从那里，我们获得了关于如何存储数据的所有相同可能性（并且由于数据不连续，我们往往会获得较差的参考局部性，从而导致任何给定数据更有可能在一种较慢的存储形式）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T17:18:37.587

数组是内存中的一个位置以及它后面的一系列串行位置。

考虑我是否有数组`int[] a = [1,2,3,4,5,6,7,8,9,10]`；

如果我们查看内存中的这个数组，它可能看起来像这样——

```
15  null           00000000
    null           00000000
    null           00000000
    a[10]          00001011
    a[9]           00001010
10  a[8]           00001001
    a[7]           00001000
    a[6]           00000111
    a[5]           00000110
    a[4]           00000101
5   a[3]           00000100
    a[2]           00000011
    a[1]           00000010
    a[0]           00000001
    other stuff    00011101
0   other stuff    01010101 
```

您可以在数组中随机访问，因为编译器正在为您工作以找到您正在寻找的确切地址。

例如在这种情况下，如果我运行该函数

```
print(a*); //print the location in memory of a (the pointer to a) 
```

它会输出

```
2 
```

现在，当我要求 [2]

```
print (a[2]) 
```

编译器实际上在做什么

```
print (&(a*+2) // print the values at the memory location 
               // that is 2 plus the pointer to a 
```

这意味着它应该打印出内存位置 4 的值，即

```
3 
```

当我们说一个数组可以随机访问时，这意味着访问的时间是恒定的，因为找到元素 a[100000] 和 a[1] 都需要相同的时间。

```
1.) look-up a.
2.) add the index to a. 
3.) look-up the value at a + index. 
```

现在向量只是一个数组的包装器。它为数组添加了特殊功能并定义了“行为”。想象它像一个具有 3-4 条数据的结构，其中一些数据是指向特殊“向量函数”的指针。

想象一下这样的数据。

```
struct vect { 
    int* array; 
    int  arraysize; 
    int* functionPtr1;
    int* functionPtr2;
    int* functi....
}; 
```

我要避免在 c 中看起来如何的 gorp，因为我不是很好并且肯定会出错，但是在像 java 这样的面向对象语言中，我们的向量看起来像这样

```
vect.array[1];
int arg2 = vect.array[2]; 
vect.functionPtr1(2); 
int vectSize = vect.arraysize; 
```

很简单。令人困惑的是，c++ 允许您在对象上定义 [] 运算符。当您执行此操作时，在 c++ 中的向量中。

```
vect[2]; 
```

它实际上只是这里 java 等价物的语法糖：

```
vect.array[2]; 
```

但是 tl;博士; 这一切的版本是向量只是一个用于将函数包装在原始数组周围的对象。C++ 提供了特殊的语法糖，因此您可以直接从对象指针寻址原始数组，而不仅仅是从对象数组成员，但是获取对象数组成员的工作仍在完成，只是抽象出来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T16:47:53.880

在不特定于语言的情况下，这些术语通常意味着：

*   数组是一个固定长度的、非结构化的连续内存区域。通过计算与基地址的偏移量来访问位置。
*   向量像数组一样是随机访问的，但知道它的长度，因此可以动态更改它。
*   链表是完全动态且不连续的，因此它不是随机访问的。

# eclipse - 如何处理与抽象超类没有区别且不需要表的类

> ID：16174690
> 
> 赞同：1
> 
> 时间：2013-04-23T16:37:48.497
> 
> 标签：eclipse, inheritance, jpa, eclipselink

我有一些与抽象超类没有真正区别的类，因此不需要它们自己的表。我正在使用 Spring Roo。

我有一个 Task 超类映射到一个 Task 表，并且正在使用 Inheritance.Joined 继承模型。

```
import java.math.BigDecimal;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;
import javax.persistence.Table;

privileged aspect Task_Roo_Jpa_Entity {

declare @type: Task: @Entity;

declare @type: Task: @Table(schema = "ADMIN_DIRECT", name = "TASK");

declare @type: Task: @Inheritance(strategy = InheritanceType.JOINED);

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "ID")
private BigDecimal Task.id;

public BigDecimal Task.getId() {
    return this.id;
}

public void Task.setId(BigDecimal id) {
    this.id = id;
}

} 
```

我有一些与抽象超类没有区别的子类，因此不需要数据库中的专用表，而另一些与超类不同，因此有专用表。

我可以通过在与抽象类没有区别的子类中执行此操作来获得持久性。即创建一个扩展任务的子类并注释如下（注意表名TASK实际上是超类表）：

```
@Entity
@Table(schema = "ADMIN_DIRECT", name = "TASK")

public class ExpensesTask extends Task {

} 
```

这会在 TASK 超类表中保留一个实体，其中一个 DTYPE 列标记为“ExpensesTask”作为鉴别器值。

所以它似乎可以工作，尽管 Eclipse 提出了错误说明

```
ExpensesTask" is mapped, but is not included in any persistence unit ... JPA Problem 
```

如果我让 Roo 像我在“适当的”任务子类中所做的那样接管，那么持久性似乎会经历这些动作，然后默默地失败（没有任何持久性，没有引发错误）：

即这不起作用

```
@RooJavaBean
@RooToString
@RooDbManaged(automaticallyDelete = true)
@RooJpaActiveRecord(versionField = "", table = "TASK", schema = "ADMIN_DIRECT")
public class ExpensesTask extends Task {

}  

import javax.persistence.Entity;
import javax.persistence.Table;

privileged aspect ExpensesTask_Roo_Jpa_Entity {

    declare @type: ExpensesTask: @Entity;

   declare @type: ExpensesTask: @Table(schema = "ADMIN_DIRECT", name = "TASK");    
} 
```

当不需要区分子类和抽象超类时，有兴趣知道映射这种继承情况的正确方法。

我总是可以创建一个“ExpensesTask”表，其中只有一个“ID”字段，因此 Roo 方法适用于我的其他“带表的子类”类，但因为我有一个工作版本（尽管有一些 Eclipse 投诉）我不确定这是否有点“软糖”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T15:17:17.813

将表设置为子类中的超类表是 EclipseLink 中当前支持这样做的方式，并且确实有效。（从技术上讲，JPA 不允许类在 JOINED 继承中没有表，但 EclipseLink 可以）。

完成同样事情的另一种方法是让它默认一个表并使用 DescriptorCustomizer 清除描述符的表以摆脱它。

# java - Java MiniMax TicTacToe AI vs AI 不会进行防守

> ID：16174691
> 
> 赞同：1
> 
> 时间：2013-04-23T16:37:51.073
> 
> 标签：java, algorithm, artificial-intelligence, minimax

我一直在尝试通过使用井字游戏来学习 MiniMax，因为这似乎是最常用的示例之一。我从不修剪开始尝试掌握它。我有 2 个 AI 互相对抗，但 X 总是获胜。我认为问题在于他们没有进行防守，我不太确定如何实施。下面是代码，我还有一些其他的类文件，但我认为除非有要求，否则不需要它们。非常感谢。

```
import java.util.*;

public class TicTacToe {

    GameState gameState;      // Current game state
    int totalNodesExpanded;   // Total number of nodes expanded in
                  // search so far
    int levelNodesExpanded;   // Number of nodes expanded to explore this
                  // level of the tree (i.e. all
                  // non-pruned successors of the current
                  // state) 

    public TicTacToe() {
    gameState = new GameState();
    ArrayList<Coordinate> moves = new ArrayList<Coordinate>();
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
        moves.add(new Coordinate(i,j));
        }
    }
    gameState.player = "X";
    gameState.moves = moves;
    totalNodesExpanded = 0;
    levelNodesExpanded = 0;
    }

    /*
     * Return a list of the states reachable in one move from the
     * current state.
     */
    public ArrayList getSuccessorStates(GameState state) {
    ArrayList<GameState> result = new ArrayList<GameState>();
    for (int i = 0; i < state.moves.size(); i++) {
        Coordinate c = (Coordinate) state.moves.get(i);
        GameState s = makeMove(state, c);
        s.moveMade = c;
        result.add(s);
    }
    return result;
    }

    /*
     * Perform a move to "c" from the given "state" (checking that the
     * move is valid in the current state) 
     */
    public GameState makeMove(GameState state, Coordinate c) {
    GameState result = null;
    ArrayList newMoves = (ArrayList) state.moves.clone();
    if (newMoves.contains(c)) {
        newMoves.remove(c);
        result = new GameState();
        result.moves = newMoves;
        TicTacToeBoard newBoard = (TicTacToeBoard) state.board.clone();
        if (state.player.equals("X")) {
        newBoard.markX(c.x, c.y);
        result.player = "O";
        } else {
        newBoard.markO(c.x, c.y);
        result.player = "X";
        }
        result.board = newBoard;
    } else {
        System.out.println("ERROR: attempt to make invalid move");
    }
    return result;
    }

    /*
     * Make the next move, determined using minimax.
     * Print out information about the search progression.
     */
    public void makeMiniMaxMove() {
    totalNodesExpanded += levelNodesExpanded;
    levelNodesExpanded = 0;
    GameState state = gameState;
    ArrayList<GameState> states = getSuccessorStates(state);
    int best = 0;
    int temp = 0;
    for (GameState s : states) {
        if (state.player.equals("X")) {
            best = -1;
            temp = min(s);
            if (temp > best) {
                best = temp;
                gameState.next = s;
            }
            if (best == 1)
                break;
        }
        else {
            best = 1;
            temp = max(s);
            if (temp < best) {
                best = temp;
                gameState.next = s;
            }
            if (best == -1) 
                break;
            }
    }

    GameState nextState = gameState.next;
    System.out.println("Nodes considered: " + levelNodesExpanded);
    System.out.println("Move chosen: " + nextState.moveMade);
    gameState = makeMove(gameState, nextState.moveMade);
    }

    private int max(GameState state) {
        if (state.board.lineExists() && state.player.equals("X"))
            return 1;
        else if (state.board.boardFull() == true)
            return 0;
        else if (state.board.lineExists() && !state.player.equals("X"))
            return -1;

        levelNodesExpanded++;

        ArrayList<GameState> states = getSuccessorStates(state);
        int best = -1;
        for (GameState s : states) {
            int temp = min(s);
            if (temp > best) {
                best = temp;
                gameState.next = s;
            }
            if (best == 1)
                break;
        }
        return best;
    }

    private int min(GameState state) {
        if (state.board.lineExists() && state.player.equals("O"))
            return -1;
        else if (state.board.boardFull() == true)
            return 0;
        else if (state.board.lineExists() && !state.player.equals("O"))
            return 1;

        levelNodesExpanded++;

        ArrayList<GameState> states = getSuccessorStates(state);
        int best = 1;
        for (GameState s : states) {
            int temp = max(s);
            if (temp < best) {
                best = temp;
                gameState.next = s;
            }
            if (best == -1)
                break;
        }
        return best;
    }

    public static void main(String[] args) {

    TicTacToe board1 = new TicTacToe();
    System.out.println("board:\n" + board1.gameState.board + "\n");
    while (!(board1.gameState.board.lineExists() ||
         board1.gameState.board.boardFull())) {
        System.out.println("Current player: " + board1.gameState.player);
        System.out.println("Possible moves: " + board1.gameState.moves);
        board1.makeMiniMaxMove();
        System.out.println("board:\n" + board1.gameState.board + "\n");
    }
    System.out.println("Total nodes expanded: " 
               + board1.totalNodesExpanded);

    System.out.println("\n\n\n");
    }
} 
```

# perforce - 在 perforce 中恢复未搁置的文件

> ID：16174693
> 
> 赞同：6
> 
> 时间：2013-04-23T16:37:54.903
> 
> 标签：perforce, revert

我已经搁置了一个包含名为 foo.txt 的“添加”文件的 cl。当我恢复该更改列表时， foo.txt 会从我的工作区中消失，但仍保留在我的硬盘上。

```
p4 unshelve -f -s $A -c default :: unshelving add foo.txt
p4 revert -c default //MY_WORKSPACE/... :: foo.txt is reverted
p4 opened -C MY_WORKSPACE :: shows none 
```

当我打开工作区时，我仍然可以看到 foo.txt。

有没有办法删除添加的文件？（除了明显的手动删除）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-20T05:20:09.257

使用标志运行 revert 命令`-w`将删除在恢复期间标记为添加的所有文件（请参阅[p4_revert 文档](http://www.perforce.com/perforce/r15.1/manuals/cmdref/p4_revert.html "这里")）

`p4 revert -w [file specification]`

例如， `p4 revert -w -c default //MY_WORKSPACE/...` （foo.txt 从磁盘中删除，然后恢复）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T15:59:22.667

这种行为是设计使然。

[http://www.perforce.com/perforce/doc.current/manuals/p4guide/04_files.html](http://www.perforce.com/perforce/doc.current/manuals/p4guide/04_files.html)

> **放弃更改（还原）**
> 
> 要从更改列表中删除打开的文件并放弃您所做的任何更改，请发出 p4 revert 命令。当您恢复文件时，Perforce 会恢复您同步到工作区的最后一个版本。**如果您恢复为添加而打开的文件，则该文件将从更改列表中删除，但不会从您的工作区中删除。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:43:17.650

一旦你在 Perforce 中恢复了文件添加，我认为你可以从磁盘中删除它们——Perforce 已经完全忘记了它们。

# json - 在 json 解析上使用 if/else 在地图 android 上显示标记

> ID：16174697
> 
> 赞同：0
> 
> 时间：2013-04-23T16:37:59.513
> 
> 标签：json, google-maps, if-statement, google-maps-markers

我有 2 个 json 文件，第一个用于类别，第二个用于生成标记并将它们放在地图中。

我的应用程序的第一个屏幕在列表视图上显示类别，当我单击其中一个类别时，它应该根据地图上选择的类别显示标记，显示地图或读取 json 没有问题

示例 json 类别：

```
{
  "categories": [
    {
      "id": "01",
      "categoria": "Restaurante"
    }
  ]
} 
```

示例 json 位置：

```
{
  "places": [
    {
      "id": "01",
      "lat": "20.583566571214778",
      "long": "-100.37047419121245",
      "dist": "100m",
      "star": "1",
      "icon": "03",
      "name": "Restaurante San Pedro",
      "cat": "Restaurante",
      "sched": "9:00 - 23:00",
      "text": "Una gran seleccion de platillos para su deleite."
    }
  ]
} 
```

问题是它不会显示标记，我使用 if 来比较选择的类别与场所 json 中的任何类别业务相同，如果相同则显示标记，我使用 toast看结果和是一样的，不知道为什么它不会执行if语句而不是else

```
if (cat == recuperamos_variable_cat) {
  LatLng lugares = new LatLng(dlatitud, dlongitud);
  Marker ubicacion2 = mapa.addMarker(new MarkerOptions().position(lugares).title(name).snippet(text));
  Toast mensaje2 = Toast.makeText(getApplicationContext(), cat + recuperamos_variable_cat, Toast.LENGTH_SHORT);
  mensaje2.show();
} else {
  Toast mensaje2 = Toast.makeText(getApplicationContext(), "No hay coincidencias", Toast.LENGTH_SHORT);
  mensaje2.show();
} 
```

我把其余的代码：

```
//recover the value of the category selected
final String recuperamos_variable_id = getIntent().getStringExtra("TAG_ID");
final String recuperamos_variable_cat = getIntent().getStringExtra("TAG_CAT");
// Hashmap for ListView
ArrayList<HashMap<String, String>> placesList = new ArrayList<HashMap<String, String>> ();
// Creating JSON Parser instance
JSONParser jParser = new JSONParser();
// getting JSON string from URL
JSONObject json = jParser.getJSONFromUrl(url);
try {
  // Getting Array of Contacts
  places = json.getJSONArray(TAG_PLACES);
  // looping through All Contacts
  for (int i = 0; i < places.length(); i++) {
    JSONObject c = places.getJSONObject(i);
    // Storing each json item in variable
    String id = c.getString(TAG_ID);
    String lat = c.getString(TAG_LAT);
    String lon = c.getString(TAG_LONG);
    String dist = c.getString(TAG_DIST);
    String star = c.getString(TAG_STAR);
    String name = c.getString(TAG_NAME);
    String cat = c.getString(TAG_CAT);
    String icon = c.getString(TAG_ICON);
    String sched = c.getString(TAG_SCHED);
    String text = c.getString(TAG_TEXT);
    double dlatitud = Double.parseDouble(lat); //Convertimos valores a double
    double dlongitud = Double.parseDouble(lon);
    if (cat == recuperamos_variable_cat) {
      LatLng lugares = new LatLng(dlatitud, dlongitud);
      Marker ubicacion2 = mapa.addMarker(new MarkerOptions().position(lugares).title(name).snippet(text));
      Toast mensaje2 = Toast.makeText(getApplicationContext(), cat + recuperamos_variable_cat, Toast.LENGTH_SHORT);
      mensaje2.show();
    } else {
      Toast mensaje2 = Toast.makeText(getApplicationContext(), "No hay coincidencias", Toast.LENGTH_SHORT);
      mensaje2.show();
    }
  }
} catch (JSONException e) {
  e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:49:30.757

已经可以做到了

必须使用这个

如果（cat.equals（recuperamos_variable_cat））{

代替

if (cat == recuperamos_variable_cat) {

希望这对将来的人有所帮助

# javascript - 使用 Javascript 在标签中显示列表项

> ID：16174700
> 
> 赞同：1
> 
> 时间：2013-04-23T16:38:15.620
> 
> 标签：javascript, jquery, vb.net

嘿伙计们，我已经在这个问题上停留了几天。我有两个列表框，用户可以在它们之间来回传输数据。我需要右侧列表框中的项目也显示在位于列表框下方表格中的标签中。

我已经获得了要在标签中显示的文本，但我无法让它为每个项目输入一个新行（就像它们会显示在列表框中一样）。文本带有空格，但仍然没有在新行上拆分。我对javascript相当陌生，所以请善待:)

这是我的javascript：

```
 function displayLabel()
            {
                var item = document.getElementById("lstRightBox").options.innerText;
                var arr = new Array();
                var test = item.split(arr.join("|"));
                document.getElementById("label").innerHTML = test.join("\r\n");
                return true;
            } 
```

**添加**

这是在列表框之间传输项目的代码：

```
 // This moves selected items
    function move_list_items(lstLeftBox, lstRightBox)
      {
        $("#"+lstLeftBox+"  option:selected").appendTo("#"+lstRightBox).toString;
      }

      //this will move all items 
    function move_list_items_all(lstLeftBox, lstRightBox)
      {
        $("#"+lstLeftBox+" option").appendTo("#"+lstRightBox);
      } 
```

**编辑**

这是我的显示功能的更新。我在我的移动函数（上面列出）中调用它，以便每次单击按钮时都会执行它。我目前正在为每个移动的项目在我的标签中显示 [object Object]。

```
 function displayLabel(lstLeftBox, lstRightBox)
          {
            $("#"+lstRightBox+"  option").each(function(){
                document.getElementById("label").innerHTML += $(this);
            });
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:00:18.010

我认为您对使用`split()`and有点困惑`join()`。正如所写，代码不是因为存在`"|"`而分裂，而是分裂每个字符。那是因为您调用的数组中没有值`.join()`。

我认为这将满足您的需求：

```
 function displayLabel()
        {
            var item = document.getElementById("lstRightBox").options.innerText;
            var test = item.split("|");
            document.getElementById("label").innerHTML = test.join("\r\n<br/>");
            return true;
        } 
```

### 以下是其工作原理的细分：

*   我假设您的值与.`lstRightBox`分隔`|`。
*   该行在变量`var test = item.split("|");`中创建了一个数组，数组的`test`每个元素都是与字符串不同的值`item`（其中每个值由 分隔`|`）。
*   然后它后面的行将输出放入元素`test.join("\r\n<br/>")`的 HTML 中，其中输出是一个字符串，其中每个项目用 . 分隔。`label``test.join("\r\n<br/>")``"\r\n<br/>"`

请注意，我在其中添加了`<br/>`后面，以便它会在每个匹配项之间显示一个换行符`test`。

还值得注意的是，您可能可以使用以下方法完成同样的事情[`.replace()`](http://www.w3schools.com/jsref/jsref_replace.asp)：

```
 function displayLabel()
        {
            var items = document.getElementById("lstRightBox").options.innerText;
            document.getElementById("label").innerHTML = items.replace("|", "\r\n<br/>");
            return true;
        } 
```

**编辑：**查看您用于移动项目的代码，我认为您可以在此处执行类似的操作。您可以依赖已在使用的相同 jQuery 选择器，而不是执行 replace() 或 .join()：

```
// selected items
function display_list_items(lstBox)
  {
    $("#"+lstBox+"  option:selected").each(function(){
        document.getElementById("label").innerHTML += $(this);
    });
  }

  // all items 
function display_list_items_all(lstComplete, lstRightBox)
  {
    $("#"+lstBox+"  option").each(function(){
        document.getElementById("label").innerHTML += $(this);
    });
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:54:06.977

我终于找到了一种让项目正确显示的方法！我所做的是对上面列出的原始 displayLabel() 函数进行了一些更改。我使用 for 循环来查看右侧列表框中的选项。下面列出了代码，供任何可能觉得有用的人使用。

```
 function displaylabel()
                {
                    var lstBox = document.getElementById("lstRightListBox").options.innerText;
                    var label = "";
                    for (var i = 0; i < document.getElementById("lstRightListBox").options.length; i++)
                        {
                            label += document.getElementById("lstRightListBox").options(i).text + '<br>';
                        }
                    document.getElementById("label ").innerHTML = label;
                } 
```

# ruby-on-rails - Ruby on Rails 4 在补丁方法的功能测试中弃用警告

> ID：16174706
> 
> 赞同：2
> 
> 时间：2013-04-23T16:38:34.170
> 
> 标签：ruby-on-rails, deprecated, functional-testing

我已经开始了新的 rails 4 项目，并为我的资源生成了脚手架：文章。

Rails 为我的控制器生成了功能测试，如下所示：

```
test "should update article" do      
  patch :update, id: @article, article: { :indexx=>'TEST001' }
  assert_redirected_to article_path(assigns(:article))
end 
```

在控制器示例方法中：

```
def update
  respond_to do |format|
    if @article.update(article_params)
      format.html { redirect_to @article, notice: 'Article was successfully updated.' }
      format.json { head :no_content }
    else
      format.html { render action: 'edit' }
      format.json { render json: @article.errors, status: :unprocessable_entity }
    end
  end
end 
```

当我运行测试时，我会收到如下警告：

```
DEPRECATION WARNING: Relation#first with finder options is deprecated. Please build a scope and then call #first on it instead. (called from block in <class:ArticlesControllerTest> at /home/harry/s/b2c/test/controllers/articles_controller_test.rb:56)
DEPRECATION WARNING: Relation#first with finder options is deprecated. Please build a scope and then call #first on it instead. (called from block in <class:ArticlesControllerTest> at /home/harry/s/b2c/test/controllers/articles_controller_test.rb:50) 
```

我在谷歌上搜索并在 stackoverflow 上搜索了一段时间，但没有任何结果可以改变我的项目以使其完美地通过测试。什么是正确的解决方案？

这是我的 Gemfile.lock：

```
actionmailer (4.0.0.beta1)
  actionpack (= 4.0.0.beta1)
  mail (~> 2.5.3)
actionpack (4.0.0.beta1)
  activesupport (= 4.0.0.beta1)
  builder (~> 3.1.0)
  erubis (~> 2.7.0)
  rack (~> 1.5.2)
  rack-test (~> 0.6.2)
activemodel (4.0.0.beta1)
  activesupport (= 4.0.0.beta1)
  builder (~> 3.1.0)
activerecord (4.0.0.beta1)
  activemodel (= 4.0.0.beta1)
  activerecord-deprecated_finders (~> 0.0.3)
  activesupport (= 4.0.0.beta1)
  arel (~> 4.0.0.beta1)
activerecord-deprecated_finders (0.0.3)
activesupport (4.0.0.beta1)
  i18n (~> 0.6.2)
  minitest (~> 4.2)
  multi_json (~> 1.3)
  thread_safe (~> 0.1)
  tzinfo (~> 0.3.33)
ansi (1.4.3)
arel (4.0.0)
atomic (1.1.8)
bcrypt-ruby (3.0.1)
builder (3.1.4)
carrierwave (0.8.0)
  activemodel (>= 3.2.0)
  activesupport (>= 3.2.0)
coffee-rails (4.0.0)
  coffee-script (>= 2.2.0)
  railties (>= 4.0.0.beta, < 5.0)
coffee-script (2.2.0)
  coffee-script-source
  execjs
coffee-script-source (1.6.2)
devise (1.5.4)
  bcrypt-ruby (~> 3.0)
  orm_adapter (~> 0.0.3)
  warden (~> 1.1)
erubis (2.7.0)
execjs (1.4.0)
  multi_json (~> 1.0)
factory_girl (4.2.0)
  activesupport (>= 3.0.0)
factory_girl_rails (4.2.1)
  factory_girl (~> 4.2.0)
  railties (>= 3.0.0)
hashr (0.0.22)
hike (1.2.2)
i18n (0.6.4)
jbuilder (1.0.2)
  activesupport (>= 3.0.0)
jquery-rails (2.2.1)
  railties (>= 3.0, < 5.0)
  thor (>= 0.14, < 2.0)
json (1.7.7)
mail (2.5.3)
  i18n (>= 0.4.0)
  mime-types (~> 1.16)
  treetop (~> 1.4.8)
mime-types (1.23)
minitest (4.7.3)
multi_json (1.7.2)
orm_adapter (0.0.7)
polyglot (0.3.3)
protected_attributes (1.0.1)
  activemodel (>= 4.0.0.beta, < 5.0)
rack (1.5.2)
rack-test (0.6.2)
  rack (>= 1.0)
rails (4.0.0.beta1)
  actionmailer (= 4.0.0.beta1)
  actionpack (= 4.0.0.beta1)
  activerecord (= 4.0.0.beta1)
  activesupport (= 4.0.0.beta1)
  bundler (>= 1.3.0, < 2.0)
  railties (= 4.0.0.beta1)
  sprockets-rails (~> 2.0.0.rc3)
railties (4.0.0.beta1)
  actionpack (= 4.0.0.beta1)
  activesupport (= 4.0.0.beta1)
  rake (>= 0.8.7)
  rdoc (~> 3.4)
  thor (>= 0.17.0, < 2.0)
rake (10.0.4)
rdoc (3.12.2)
  json (~> 1.4)
rest-client (1.6.7)
  mime-types (>= 1.16)
sass (3.2.8)
sass-rails (4.0.0.rc1)
  railties (>= 4.0.0.beta, < 5.0)
  sass (>= 3.1.10)
  sprockets-rails (~> 2.0.0.rc0)
  tilt (~> 1.3)
simplecov (0.7.1)
  multi_json (~> 1.0)
  simplecov-html (~> 0.7.1)
simplecov-html (0.7.1)
sprockets (2.9.3)
  hike (~> 1.2)
  multi_json (~> 1.0)
  rack (~> 1.0)
  tilt (~> 1.1, != 1.3.0)
sprockets-rails (2.0.0.rc4)
  actionpack (>= 3.0)
  activesupport (>= 3.0)
  sprockets (~> 2.8)
sqlite3 (1.3.7)
thor (0.18.1)
thread_safe (0.1.0)
  atomic
tilt (1.3.7)
tire (0.5.7)
  activemodel (>= 3.0)
  activesupport
  ansi
  hashr (~> 0.0.19)
  multi_json (~> 1.3)
  rake
  rest-client (~> 1.6)
treetop (1.4.12)
  polyglot
  polyglot (>= 0.3.1)
turbolinks (1.1.1)
  coffee-rails
tzinfo (0.3.37)
uglifier (2.0.1)
  execjs (>= 0.3.0)
  multi_json (~> 1.0, >= 1.0.2)
warden (1.2.1)
  rack (>= 1.0)
will_paginate (3.0.4) 
```

# c# - Microsoft Office 文档映像无法正常工作

> ID：16174708
> 
> 赞同：1
> 
> 时间：2013-04-23T16:38:38.230
> 
> 标签：c#, .net, ocr, modi

这越来越奇怪了。

我在让 MODI 引擎识别 C# 中的图像 (OCR) 中的文本时遇到问题。它总是以毫无头绪的消息失败（SEHException（0x80004005）：外部组件已引发异常）。我在互联网上挖掘了它，发现了不同的建议，包括将图像格式从 BMP 更改为 TIFF，将图像大小调整为 2 的幂以及其他一些，但这些都不起作用。有趣的是，即使是 Office Imaging 应用程序也无法检测到我的应用程序中的任何文本，所以我将其归咎于我的图像质量/格式。

现在，今天我已经成功地使用该应用程序从 TIFF 图像中获取（正确的）文本，但是当我通过库处理它时，相同的图像仍然失败（同样的例外）。所以我现在有理由相信我的代码有问题。有没有人在 C#（或 VB.NET）中成功使用过 MODI？

如果可能有帮助，这是我正在使用的代码：

```
MODI.Document md = new MODI.Document();
string TempFile =@"Test.tif";
md.Create(TempFile);
md.OCR(MODI.MiLANGUAGES.miLANG_ENGLISH, true, false); 
```

它在第 4 行引发异常。

# doctrine-orm - 教义选择对象而不获取所有列

> ID：16174709
> 
> 赞同：2
> 
> 时间：2013-04-23T16:38:39.767
> 
> 标签：doctrine-orm

我有一个简单的功能

```
function getitembyid($id)
{
    $item = $em->find('models\Item', $id);
    return $item;
} 
```

我在我的应用程序中经常使用这个功能，我也在使用它，例如：

```
$item = getitembyid($id);
$item->setName($name);
$em->flush(); 
```

现在问题来了，项目表中的一列包含大量的文本数据，这使得这个查询有时-非常慢-。（在普通 sql 中测试，没有那 1 列的选择很快，否则很慢）

有没有办法改变我的简单功能，避免选择该列并且不破坏我的应用程序的功能（更新行必须在不触及那个大列的情况下工作）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:44:08.597

这是一种部分对象方法。尝试：

```
$item = $em->createQuery("select partial i.{id,name} from models\Item i")
           ->getResult(); 
```

有关部分对象的更多信息：http: [//docs.doctrine-project.org/en/latest/reference/partial-objects.html](http://docs.doctrine-project.org/en/latest/reference/partial-objects.html)

# python - Matplotlib 3D Scatter - 等长宽比

> ID：16174712
> 
> 赞同：0
> 
> 时间：2013-04-23T16:39:11.220
> 
> 标签：python, matplotlib, scatter, mplot3d

我正在尝试使用 matplotlib 制作 3D 散点图。我遇到的问题是该图没有在所有轴对之间使用 1:1 的纵横比。有人知道如何解决这个问题吗？

我的代码看起来像这样：

```
from matplotlib.pyplot import *
from mpl_toolkits.mplot3d import *

figure(1, figsize=(7,7))
ax = gca(projection='3d')
ax.scatter(FH[:,0],FH[:,1],FH[:,2],s=0.5)
show() 
```

我已经尝试将“aspect=1”之类的 kwargs 添加到脚本的各个部分（即 - scatter()、figure()、ax()），但到目前为止没有任何效果。

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:32:37.393

好的 - 我已经解决了我的问题。我在这里找到它：[set matplotlib 3d plot aspect ratio?](https://stackoverflow.com/questions/8130823/set-matplotlib-3d-plot-aspect-ratio) （在我忽略的帖子中）。

我的问题实际上是如何设置我的情节的边界框（或范围），而不是如何设置纵横比。诀窍是，如果您知道要用于绘制数据的边界框的范围，请像这样绘制不可见点：

```
fig=figure(1, figsize=(7,7))
ax = fig.gca(projection='3d')
ax.scatter(FH[:,0],FH[:,1],FH[:,2],s=0.5)

# plotting white points
MAX = 3 # I wanted -3 to 3 in each direction
for direction in (-1, 1):
    for point in diag(direction * MAX * array([1,1,1])):
        ax.plot([point[0]], [point[1]], [point[2]], 'w')

show() 
```

希望这可以帮助。对我来说有点奇怪，我无法为我的 3D 散点图找到类似函数/kwarg 的范围，但我想这并不意味着该机制不存在。

# python - 给定一个不均匀概率的列表，至少发生一个概率的概率是多少？

> ID：16174713
> 
> 赞同：3
> 
> 时间：2013-04-23T16:39:11.690
> 
> 标签：python, statistics, probability

我正在编写一个包含概率列表的 Python 程序。每个概率代表事件的灾难性结果：

```
# doing six different events, the array is the risk of each having a bad outcome:
list = [0.2, 0.1, 0.4, 0.3, 0.2, 0.4] 
```

每个事件都可以发生一次或多次。他们的顺序无关紧要。不止一个事件可能具有相同的概率。我将如何计算这些事件中的**一个或多个**发生的机会？

*我很抱歉，这是一个基本问题。我已经有很多年没有像学校这样的东西了，当我搜索这个时，术语很难。可汗学院似乎也没有提供答案。如果答案很简单，只需告诉我要搜索什么就足够了。提前致谢！（：*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T16:43:50.420

看待这个问题的一个好方法是考虑相反的问题：这些事件**都不发生的概率是多少？**也就是，概率是多少

事件 1 没有发生并且事件 2 没有发生并且等等。

这只是产品

(1 - p1) * (1 - p2) * .....

对于导致概率 p_none 的每个概率。然后采取相反的做法：

(1 - p_none)

并且您有可能发生一个或多个事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T16:42:12.297

基本上你想要 1 - （没有事件发生的机会），这很容易。从 1 开始，遍历列表乘以 1 - 数字：

伪代码：

```
result = 1
foreach item in list
  result = result * (1 - item)
end foreach
return 1 - result 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T16:49:28.460

如果列出的概率都是事件 i 发生 1 次或多次的概率，那么这应该有效：

概率 1 或更多发生 == 1.0 - 概率都没有发生

概率没有发生 = 每个事件我没有发生的概率的乘积

我没有发生的概率事件 = 1.0 - 我发生的概率事件

当然，这假设每个事件类别都是独立的。

所以在你的情况下 prob = 1.0 - (1.0-0.2) *(1.0-0.1)* (1.0-0.4) *(1.0-0.3)* (1.0-0.2)*(1.0-0.4)

# eclipse - 如何在我的分支上合并标签？

> ID：16174720
> 
> 赞同：0
> 
> 时间：2013-04-23T16:39:40.927
> 
> 标签：eclipse, git, egit

我只使用一个主分支，就像这样：

分支（远程仓库） A --> B --> C ( --> D --> E )

User1 从 A 开始做了两次提交 B 和 C（本地提交、标记、e 推送到远程）

从 A 开始的 User2 做了两次提交 D 和 E（只有本地提交和标记）

User2 进行了一次提取但全部更新（我仍然想知道为什么），但在 Repository TAG 下出现了 B 和 C。然后 User2 尝试将 C 与 master 分支合并，但发生了错误（我们在 Eclipse 中使用 Egit 插件）。

User2 将他的更改推送到远程仓库，但没有任何改变。

无论如何，有一种方法可以加入 C 和 E 更改并在一个版本中提交？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:41:56.637

`git checkout E && git merge C`应该做的伎俩。`F`由于合并操作，您最终会提交。

# javascript - jQuery移动页面导航后仍在播放音频

> ID：16174721
> 
> 赞同：1
> 
> 时间：2013-04-23T16:39:45.410
> 
> 标签：javascript, jquery-ui, jquery-mobile, audio, html5-audio

如果确实在其他地方提出并回答了这个问题，我将首先道歉......我已经改写和谷歌搜索了几天来解决这个问题，但没有运气。

我承担了我的网页设计顶点课程的代码编写职责，我们正在将印刷出版物转换为数字格式。我们决定使用 jquery-mobile 框架。在此之前我没有使用 jquery 的经验，但我学得很快并且非常喜欢它。我在我们的网站上使用 jquery-ui，它使用一个带有 data-role="page" 导航的长 index.html 文件。网站内有书面作品，其中一些有音频旁白。

我已经使用了 html 音频标签：

```
<audio controls>
  <source src="audio/source.mp3" />
  <source src="audio/source.ogg" />
</audio> 
```

音频播放得很好，但是当我导航到另一个“页面”时，除非刷新整个站点或单击暂停按钮，否则音频不会停止。我所理解的情况是，虽然在视觉上，该网站是从一个页面到另一个页面，但浏览器只是在一个 html 文件中移动，只显示它被告知显示的部分。

是否有一些基本的 js 代码可以插入到我的页面中的某个地方，告诉它当单击链接或按钮时，停止正在播放的任何音频？让我重申一下，导航都是在一个 html 文件中完成的，而不是通过链接到不同的 html 文件。

（1000 为冗长的故事道歉……我想我应该具体一点）

感谢任何和所有的帮助和建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T16:56:03.507

当导航到另一个页面`pagebeforehide`时会触发。在此阶段，`audio`在该页面中找到`.pause()`它们。

```
$(document).on('pagebeforehide', function () {
 $(this).find('audio').each(function () {
  $(this)[0].pause();
 });
}); 
```

# java - 如何在 jruby 中将 Java Map 转换为 json

> ID：16174722
> 
> 赞同：6
> 
> 时间：2013-04-23T16:39:48.097
> 
> 标签：java, json, rvm, jruby

我在 JRuby 中有一个 Java HashMap，我正在尝试将其转换为 JSON，但它没有正确转换，我认为这个示例显示了问题：

```
$ irb                                                                            [17:23:50]
irb(main):001:0> require 'java'
=> false
irb(main):003:0> require 'json'
=> true
irb(main):005:0> h = java.util.HashMap.new()
=> {}
irb(main):006:0> x = {}
=> {}
irb(main):007:0> JSON.parse JSON.dump x
=> {}

irb(main):008:0> JSON.parse JSON.dump h
JSON::ParserError: unexpected token at '"{}"'
    from json/ext/Parser.java:251:in `parse'
    from /Users/kimptoc/.rvm/rubies/jruby-1.7.3/lib/ruby/1.9/json/common.rb:155:in `parse'
    from (irb):9:in `evaluate'
    from org/jruby/RubyKernel.java:1066:in `eval'
    from org/jruby/RubyKernel.java:1409:in `loop'
    from org/jruby/RubyKernel.java:1174:in `catch'
    from org/jruby/RubyKernel.java:1174:in `catch'
    from /Users/kimptoc/.rvm/rubies/jruby-1.7.3/bin/irb:13:in `(root)'
irb(main):010:0> JSON.dump h
=> "\"{}\"" 
```

关于如何处理这个问题的任何想法 - 我需要将地图变成 Ruby 地图吗？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T11:13:47.323

目前，您似乎是对的，并且`json`gem 不支持`HashMap`，所以唯一的方法确实是转换为 ruby​​：

```
> JSON.parse JSON.dump h.to_hash
=> {} 
```

可能值得开一张[票](https://github.com/flori/json/issues)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-29T11:36:40.060

我有同样的问题，但是当 java 对象嵌套时 to_hash 解决方法不起作用，请参阅[gist](https://gist.github.com/carlossg/acf11902911ebccbf1f7)。

我能够让它与 jrjackson gem 一起工作，并移至 multi_json 以避免特定实现中的依赖关系。

我在[https://github.com/jruby/jruby/issues/1931在 JRuby 中打开了一个问题](https://github.com/jruby/jruby/issues/1931)

# java - 如何中止或取消图片上传 HttpPost？

> ID：16174726
> 
> 赞同：-1
> 
> 时间：2013-04-23T16:40:01.553
> 
> 标签：java, android, http-post, android-image

我根本无法中止图像上传。我已经用谷歌搜索了很多次，以寻找任何方法来中止 HttpPost，但都失败了。如果我取消仍在上传的过程映像，则告诉它已完成。请寻求帮助，以下是我搞砸的代码：

```
private class shareIt extends AsyncTask<HttpResponse, Integer, HttpResponse> {
    long totalSize;
    String serverResponse = null;
    ProgressDialog pd;
    String  filepath, ar_name, en_name, serverurl = null;
    JSONObject jsonr = null;

    HttpClient httpClient;
    HttpContext httpContext;
    HttpPost httpPost;

    public shareIt(String filepath, int share_code) {
        this.filepath = filepath;
        this.serverurl = Api.upload_url(share_code);
    }

    public shareIt(String filepath, int share_code, String ar_name, String en_name) {
        this.ar_name = ar_name;
        this.en_name = en_name;
        this.filepath = filepath;
        this.serverurl = Api.upload_url(share_code) + "&ar_name="+ar_name+"&en_name="+en_name;
    }

    @Override
    protected void onPreExecute() {
        pd = new ProgressDialog(File_Share.this);
        pd.setMessage("hora");
        pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pd.setCancelable(false);
        pd.setIndeterminate(false);
        pd.setIcon(android.R.drawable.ic_menu_upload); 

        //cancel button
        pd.setButton(DialogInterface.BUTTON_NEGATIVE, "cancel", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                pd.dismiss();
                cancel(true);
            }
        });

        pd.show();  
    }

    @Override
    protected HttpResponse doInBackground(HttpResponse... arg0) {
        httpClient = new DefaultHttpClient();
        httpContext = new BasicHttpContext();
        httpPost = new HttpPost(serverurl);

        try {
            CustomMultiPartEntity multipartContent = new CustomMultiPartEntity(new ProgressListener() {
                @Override
                public void transferred(long num) {
                    publishProgress((int) ((num / (float) totalSize) * 100));
                }
             });

             multipartContent.addPart("file", new FileBody(new File(filepath)));
             totalSize = multipartContent.getContentLength();

             httpPost.setEntity(multipartContent);
             HttpResponse response = httpClient.execute(httpPost, httpContext);

             serverResponse = EntityUtils.toString(response.getEntity());

             return null;

         } catch (Exception e) {
             Log.e("uploader", "Uploading Error : "+ e.getMessage());
         }

         return null;
     }
     @Override
     protected void onCancelled() {
         httpPost.abort();
         httpClient.getConnectionManager().shutdown();       
     }

     @Override
     protected void onProgressUpdate(Integer... progress) { 
         pd.setProgress((int) (progress[0]));
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:04:47.830

问题是如果你只是取消你的任务在完成`onCancelled()`后被调用`doInBackground()`。这意味着如果您开始在`doInBackground()`任务中上传图像，则在上传完成之前不会中断。所有单独的调用都是通过调用 `onCancelled()' 来`cancel()`阻止运行。`onPostExecute()`

如果你调用`cancel(true)`你的任务然后检查任务。`isCancelled()`从您的`doInBackground()`方法中，您应该能够中断`doInBackground()`和停止上传。

# ipython - 在等待下一个 ipython 并行映射结果时处理异常

> ID：16174729
> 
> 赞同：2
> 
> 时间：2013-04-23T16:40:02.913
> 
> 标签：ipython, ipython-parallel

我想在 ipython 并行映射到达时迭代一些异步结果。我能找到的唯一方法是遍历结果对象。但是，如果其中一项任务引发异常，则迭代终止。有没有办法做到这一点？请参见下面的代码，当第二个作业引发异常时，迭代终止。

```
from IPython import parallel

def throw_even(i):
    if i % 2 == 0:
        raise RuntimeError('ERROR: %d' % i)
    return i

rc = parallel.Client()
lview = rc.load_balanced_view() # default load-balanced view

# map onto the engines.
args = range(1, 5)
print args
async_results = lview.map_async(throw_even, range(1, 5), ordered=True)

# get results
args_iter = iter(args)
results_iter = iter(async_results)
while True:
    try:
        arg = args_iter.next()
        result = results_iter.next()
        print 'Job %s completed: %d' % (arg, result)            
    except StopIteration:
        print 'Finished iteration'
        break
    except Exception as e:
        print '%s: Job %d: %s' % (type(e), arg, e) 
```

给出在报告作业 3 和 4 之前停止的以下输出

```
[1, 2, 3, 4]
Job 1 completed: 1
<class 'IPython.parallel.error.RemoteError'>: Job 2: RuntimeError(ERROR: 2)
Finished iteration 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T04:34:33.527

解决这个问题的一个偷偷摸摸的方法是进入内部`AsyncMapResult`并抓取`_result`结果列表。这不会直接帮助您，但只能在事后帮助您：

```
tt = async_results._results
fail_indx = [j for j, r in enumerate(tt) if isinstance(r, IPython.parallel.error.RemoteError)]
good_indx = [j for j, r in enumerate(tt) if not isinstance(r, IPython.parallel.error.RemoteError)]

just_the_results =  [r for  r in tt if not isinstance(r, IPython.parallel.error.RemoteError)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T12:42:06.560

This [question](https://stackoverflow.com/questions/19509059/processing-results-from-asyncmap-as-they-come-in) might be relevant. I dont't really see why you would want to throw an exception from a remote engine, though. Although, if you do want to do it, I think you can do it in the same way I answered the question mentioned. Which I now see you already realized in your comments, but this should do it anyway.

```
def throw_even(i):
    if i%2:
       return i
    raise(RuntimeError('Error %d'%i)

params = range(1,5)

n_cores = len(c.ids)
for n,p in enumerate( params ):
    core = c.ids[n%n_cores]
    calls.append( c[core].apply_async( throw_even, p ) )

#then you get the results

while calls != []:
    for c in calls:
        try:
             result = c.get(1e-3)
             print(result[0])
             calls.remove( c )
             #in the case your call failed, you can apply_async again.
             # and append the call to calls.
        except parallel.TimeoutError:
             pass
        except Exception as e:
             knock_yourself_out(e) 
```

# .htaccess - .htaccess 替换一个单词并重定向

> ID：16174732
> 
> 赞同：2
> 
> 时间：2013-04-23T16:40:19.597
> 
> 标签：.htaccess, redirect, replace

我需要重定向`http://example.com/view-abc-def.html`到`http://example.com/view/abc-def.html`. 为了做到这一点，我使用了，

```
RewriteRule ^(.*)view-(.*)$ /$1view/$2 [R=301,L] 
```

在 URL中没有其他**view-出现之前，这非常有效。**但不幸的是，如果 URL 像这样`http://example.com/view-abc-view-def.html`，它将以 404 结尾。

所以我尝试了

```
RewriteRule ^(.*)/view-(.*)$ /$1view/$2 [R=301,L] 
```

但在这种情况下，它不会更改 URL 中的任何内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T17:21:37.860

用这个改变你现有的规则：

```
RewriteRule (^|.*?/)view-(.*)$ /$1view/$2 [R=302,L,NC] 
```

一旦您验证它正在工作，请从 更改为`R=302`。`R=301`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T19:05:02.943

您可以先消除所有 internal `-view-`，然后进行实际的重定向

```
RewriteRule ^(.*)-view-(.*)$ $1-$2 [L]
RewriteRule ^(.*)/view-(.*)$ /$1/view/$2 [R,L] 
```

当一切按预期工作时，您可以更改`R`为`R=301`.

*永远不要*在启用的情况下进行测试，有关详细信息`301`，请参阅此答案 [提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542) 。

# java - 是否可以将单个 Spring DataSource 与多个 TransactionManager 一起使用？

> ID：16174734
> 
> 赞同：1
> 
> 时间：2013-04-23T16:40:37.387
> 
> 标签：java, spring

我正在使用`Spring`. 我有一堆服务正在被单个桌面应用程序使用。由于这不是一个分布式系统，所有服务都是应用程序本身的一部分，它们不是远程运行的（我知道这可能并不理想）。

我不想为每个服务使用不同的数据源，而是想为所有服务使用相同的数据源，以减少数据库连接的数量。我已经使用`BeanFactoryPostProcessor`. 我将共享数据源注入到所有允许数据源的 bean。

我遇到的问题是，虽然应用程序似乎正确加载，但所有 bean 都已正确初始化并且数据源注入没有问题，当我尝试在应用程序中执行任何操作时，我得到以下异常：

```
"org.springframework.transaction.IllegalTransactionStateException: 
Pre-bound JDBC Connection found! 
HibernateTransactionManager does not support running within DataSourceTransactionManager if told to manage the DataSource itself. 
It is recommended to use a single HibernateTransactionManager for all transactions on a single DataSource, no matter whether Hibernate or JDBC access." 
```

我还必须提到我同时使用`HibernateTransactionManagers`和`DataSourceTransactionManagers`。`DataSourceTransactionManagers`在处理时使用`JDBC`，`HibernateTransactionManagers`用于使用 Hibernate 的服务。

我尝试使用 a`TransactionAwareDataSourceProxy`来包装我的共享数据源以与 the 一起使用，`DataSourceTransactionManagers`但这没有效果。

上述异常是否意味着我可能必须使用单个事务管理器？

# windows - 无法让 sc.exe 为我的程序工作

> ID：16174736
> 
> 赞同：5
> 
> 时间：2013-04-23T16:40:40.340
> 
> 标签：windows, service

我正在尝试关注[此网站](http://www.howtogeek.com/50786/using-srvstart-to-run-any-application-as-a-windows-service/)并安装我们作为服务提供的程序。

这就是我所拥有的：

```
SC CREATE SqlPort binPath= “D:\RPG\VbLib\SqlPort\SqlPort\srvstart.exe SqlPort -c D:\RPG\VbLib\SqlPort\SqlPort\sqlport.ini” DisplayName= SqlPort start= auto 
```

当我按下回车键时，它给了我帮助：

```
DESCRIPTION:
        Creates a service entry in the registry and Service Database.
USAGE:
        sc <server> create [service name] [binPath= ] <option1> <option2>...

OPTIONS:
NOTE: The option name includes the equal sign.
      A space is required between the equal sign and the value.
 type= <own|share|interact|kernel|filesys|rec>
       (default = own)
 start= <boot|system|auto|demand|disabled|delayed-auto>
       (default = demand)
 error= <normal|severe|critical|ignore>
       (default = normal)
 binPath= <BinaryPathName>
 group= <LoadOrderGroup>
 tag= <yes|no>
 depend= <Dependencies(separated by / (forward slash))>
 obj= <AccountName|ObjectName>
       (default = LocalSystem)
 DisplayName= <display name>
 password= <password> 
```

我已经将帮助与我所拥有的进行了比较，我认为它没有任何问题。这是在 Windows 7 x64 系统上。

有人看到我做错了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-06-10T13:45:29.197

I've had this exact problem and my quotation marks were fine... Finally figured it out -- there *must be* a space after the '=' !

I.e. this was not working/causing the 'help' dump:

```
C:\>sc create "My Service" binPath="C:\MyService\MyService.exe" 
```

But this worked:

```
C:\>sc create "My Service" binPath= "C:\MyService\MyService.exe" 
```

The behavior depicted in the original question is more "generic" than improper quotation marks. It is how the OS reacts to commands that were *improperly formatted in any way*. It could be *any* non-ANSI character, or some other problem with the command format (e.g. misspelling "binPath", etc.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T16:45:38.760

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-09T12:44:51.087

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-22T13:43:41.307

In my case, I had not escaped one of the internal double quotes.

Had:

```
sc config postgresql-x64-13 start= auto displayname= "PostgreSQL Server 13" binPath= "\"C:\Program Files\PostgreSQL\13\bin\pg_ctl.exe\" runservice -N \"postgresql-x64-13\" -D \"D:\PostgreSQL\13\data" -w" 
```

Needed to escape the end double quote after D:\PostgreSQL\data:

```
sc config postgresql-x64-13 start= auto displayname= "PostgreSQL Server 13" binPath= "\"C:\Program Files\PostgreSQL\13\bin\pg_ctl.exe\" runservice -N \"postgresql-x64-13\" -D \"D:\PostgreSQL\13\data\" -w" 
```

The error message was the same:

> "A space is required between the equal sign and the value."

And, it was not helpful at all.

# ruby-on-rails - 将具有相同符号值的散列组合起来

> ID：16174737
> 
> 赞同：1
> 
> 时间：2013-04-23T16:40:41.410
> 
> 标签：ruby-on-rails, ruby, arrays

```
array =
[ {
        :keyword => "A", 
        :total_value => "10"
    },
    {
        :keyword => "B", 
        :total_value => "5"
    },
    {
        :keyword => "C", 
        :total_value => "15"
    },
    {
        :keyword => "B", 
        :total_value => "6"
    },
    {
        :keyword => "A", 
        :total_value => "50"
    },
    {
        :keyword => "D", 
        :total_value => "40"
    },
    {
        :keyword => "A", 
        :total_value => "30"
    }] 
```

我正在尝试用相同的`:keyword`值合并散列。通过巩固，我的意思是结合`:total_value`。例如，合并后...

```
new_array =
[ {
        :keyword => "A", 
        :total_value => "90"
    },
    {
        :keyword => "B", 
        :total_value => "11"
    },
    {
        :keyword => "C", 
        :total_value => "15"
    },
    {
        :keyword => "D", 
        :total_value => "40"
    }] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T16:57:01.797

[注入](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-inject)是你的朋友：

```
combined_keywords = array.inject(Hash.new(0)){|acc, oh| acc[oh[:keyword]] += oh[:total_value].to_i ; acc } 
```

或者，`each_with_object`在这种情况下，该方法可能更具可读性：

```
combined_keywords = array.each_with_object(Hash.new(0)){|oh, newh| newh[oh[:keyword]] += oh[:total_value].to_i } 
```

上述两种方法在功能上是等效的。

最后，如果您真的希望它采用哈希数组样式，这将使您到达那里：

```
combined_keywords.collect{|(k,v)| {:keyword => k,  :total_value => v}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:48:56.710

我认为它可能是这样的

```
new_array = {}
array.each do |hsh|
  new_array[hsh[:keyword]] ||= 0
  new_array[hsh[:keyword]] += hsh[:total_value].to_i
end 
```

# javascript - HTTP 标头变为小写

> ID：16174741
> 
> 赞同：0
> 
> 时间：2013-04-23T16:40:55.583
> 
> 标签：javascript, xmlhttprequest

我有html页面。按下提交按钮后，请求正在发送。我的问题是请求的标头被小写了！我使用 IE 是因为它是公司的限制。

```
<html>
<head>
<script language="JavaScript" type="text/javascript">

function AjaxRequest(url,callback,method){
        var req = new XMLHttpRequest();
        req.onreadystatechange= function(){
                if(req.readyState != 4) return;
                callback(req);
        }
        req.open(method,url,true);

        var hdrsArr =  document.getElementById('headers').value.split('&');
        for (var i = 0; i < hdrsArr.length; i++){
            var p = hdrsArr[i].split('=');
            req.setRequestHeader(p[0],p[1]);
        }

        var params =  document.getElementById('params').value ;
        req.send(params);
}
function AjaxResponse(res){}
function MakeRequst(){
        alert('');
        var url = "http://localhost:8080/test-servlet/TestServlet";
        AjaxRequest(url,AjaxResponse,"POST");
}
</script>
</head>
<body>
<input type='text' id="headers" size="200" value='key=value&SOAPAction=requestCreditBureau&Content-Type=text/xml;charset=UTF-8&Accept=text/xml'/><br>
<input type='text' id="params" size="200" value='<?xml version="1.0" encoding="UTF-8"?><CB_Document appl="00000000000127725161" >[....]</CB_Document>'/><br>
<input type='button' value='doPost' onClick="MakeRequst();"/><br>
<div id="response_div"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:46:35.380

根据 HTTP RFC 2616，标头字段名称不区分大小写。在下面引用它：

> HTTP 头字段，包括 general-header（第 4.5 节）、request-header（第 5.3 节）、response-header（第 6.2 节）和 entity-header（第 7.1 节）字段，遵循与第 7.1 节中给出的相同的通用格式RFC 822 [9] 的 3.1。每个标头字段由一个名称后跟一个冒号（“：”）和字段值组成。**字段名称不区分大小写**。字段值可以在任意数量的 LWS 之前，但最好使用单个 SP。通过在每个额外行之前至少使用一个 SP 或 HT，可以将标题字段扩展到多行。在生成 HTTP 结构时，应用程序应该遵循“通用形式”，其中一种是已知的或指示的，因为可能存在一些无法接受任何内容的实现

这是标准行为，除 IE6 之外的所有浏览器都符合这一点。因此，如果这给您带来问题，您将在更改`XMLHttpRequest`对象行为时遇到严重问题（它不是用户态可修改的）。你在用标题做什么？

（今天的幸运 cookie：**让你的应用程序严格发送它，宽松它接收的东西**完全适用于此。期望接收小写、大写、驼峰式标题的混合......但符合 RFCs on您发送的所有内容）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T16:44:15.850

你的标题不是小写对你来说很重要吗？

如果是，则不应该根据[RFC 2616](http://www.ietf.org/rfc/rfc2616.txt)，所有字段名称都不区分大小写。

# spring - 在 spring-hibernate 项目中找不到当前线程的会话

> ID：16174743
> 
> 赞同：1
> 
> 时间：2013-04-23T16:41:02.603
> 
> 标签：spring, hibernate

我创建了一个 spring-hibernate 项目，但是当我尝试运行我的应用程序时出现以下错误。

我在这里提供相关的课程。

资源/spring-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="configLocation" value="hibernate.cfg.xml"/>
    </bean>

    <context:annotation-config />
    <context:component-scan base-package="foo.bar, com.mkyong.stock"/>

</beans> 
```

资源/hibernate.cfg.xml：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="connection.url">jdbc:mysql://localhost:3306/mkyong</property>
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.username">root</property>
        <property name="connection.password">skia0987</property>

        <!-- DB schema will be updated if needed -->
        <property name="hbm2ddl.auto">create</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

        <mapping class="com.mkyong.stock.model.StockEntity"/>
        <mapping resource="mapping.xml"/>
    </session-factory>
</hibernate-configuration> 
```

foo.bar/HelloApp.java ：

```
package foo.bar;

import com.mkyong.stock.bo.StockBo;
import com.mkyong.stock.model.StockEntity;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class HelloApp {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext("spring-config.xml");

        StockBo stockBo = (StockBo)context.getBean("stockBo");

        //insert
        StockEntity stock = new StockEntity();
        stock.setStockCode("7668");
        stock.setStockName("HAIO");
        stockBo.save(stock);

        //select
        StockEntity stock2 = stockBo.findByStockCode("7668");
        System.out.println(stock2);

        //update
        //stock2.setStockName("HAIO-1");
        //stockBo.update(stock2);

        //delete
        //stockBo.delete(stock2);

        System.out.println("Done");
    }
} 
```

com.mkyong.stock.bo/StockBoImpl.java：

```
package com.mkyong.stock.bo;

import com.mkyong.stock.dao.StockDao;
import com.mkyong.stock.model.StockEntity;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

@Service("stockBo")
public class StockBoImpl implements StockBo{

    @Autowired
    StockDao stockDao;

    public void setStockDao(StockDao stockDao)
    {
        this.stockDao = stockDao;
    }

    @Override
    public void save(StockEntity stock) {
        stockDao.save(stock);
    }

    @Override
    public void update(StockEntity stock) {
        stockDao.save(stock);
    }

    @Override
    public void delete(StockEntity stock) {
        stockDao.delete(stock);
    }

    @Override
    public StockEntity findByStockCode(String stockCode) {
        return stockDao.findByStockCode(stockCode);
    }
} 
```

com.mkyong.stock.dao/StockDaoImpl.java：

```
package com.mkyong.stock.dao;

import com.mkyong.stock.model.StockEntity;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

@Repository("stockDao")
public class StockDaoImpl implements StockDao{

    private SessionFactory sessionFactory;

    @Autowired
    public StockDaoImpl(SessionFactory sessionFactory)
    {
        this.sessionFactory = sessionFactory;
    }

    private Session currentSession()
    {
        return sessionFactory.getCurrentSession();
    }

    @Override
    public void save(StockEntity stock) {
        currentSession().save(stock);
    }

    @Override
    public void update(StockEntity stock) {
        currentSession().update(stock);
    }

    @Override
    public void delete(StockEntity stock) {
        currentSession().delete(stock);
    }

    @Override
    public StockEntity findByStockCode(String stockCode) {
        return (StockEntity)currentSession().get(StockEntity.class, stockCode);
    }
} 
```

com.mkyong.stock.model/StockEntity.java ：

```
package com.mkyong.stock.model;

import javax.persistence.*;

import java.io.Serializable;

import static javax.persistence.GenerationType.IDENTITY;

@javax.persistence.Table(name = "stock", schema = "", catalog = "mkyong",
        uniqueConstraints = {
                @UniqueConstraint(columnNames = "STOCK_NAME"),
                @UniqueConstraint(columnNames = "STOCK_CODE")
        }
)
@Entity
public class StockEntity implements Serializable{
    private int stockId;
    private String stockCode;
    private String stockName;

    //---constructors
    public StockEntity() {
    }

    public StockEntity(String stockCode, String stockName) {
        this.stockCode = stockCode;
        this.stockName = stockName;
    }

    //---getters and setters
    @javax.persistence.Column(name = "STOCK_ID", unique = true, nullable = false, insertable = true, updatable = true, length = 10, precision = 0)
    @Id
    @GeneratedValue(strategy = IDENTITY)
    public int getStockId() {
        return stockId;
    }

    public void setStockId(int stockId) {
        this.stockId = stockId;
    }

    @javax.persistence.Column(name = "STOCK_CODE", unique = true, nullable = false, insertable = true, updatable = true, length = 10, precision = 0)
    @Basic
    public String getStockCode() {
        return stockCode;
    }

    public void setStockCode(String stockCode) {
        this.stockCode = stockCode;
    }

    @javax.persistence.Column(name = "STOCK_NAME", unique = true, nullable = false, insertable = true, updatable = true, length = 20, precision = 0)
    @Basic
    public String getStockName() {
        return stockName;
    }

    public void setStockName(String stockName) {
        this.stockName = stockName;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        StockEntity that = (StockEntity) o;

        if (stockId != that.stockId) return false;
        if (stockCode != null ? !stockCode.equals(that.stockCode) : that.stockCode != null) return false;
        if (stockName != null ? !stockName.equals(that.stockName) : that.stockName != null) return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = stockId;
        result = 31 * result + (stockCode != null ? stockCode.hashCode() : 0);
        result = 31 * result + (stockName != null ? stockName.hashCode() : 0);
        return result;
    }

    @Override
    public String toString()
    {
        return "Stock [stockCode=" + stockCode + ", stockId=" + stockId + ", stockName=" + stockName + "]";
    }
} 
```

关于如何解决该错误的任何想法？谢谢你。

更新：这是堆栈跟踪

```
Exception in thread "main" org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:1039)
    at com.mkyong.stock.dao.StockDaoImpl.currentSession(StockDaoImpl.java:29)
    at com.mkyong.stock.dao.StockDaoImpl.save(StockDaoImpl.java:34)
    at com.mkyong.stock.bo.StockBoImpl.save(StockBoImpl.java:28)
    at foo.bar.HelloApp.main(HelloApp.java:18)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:31:09.263

`hibernate.cfg.xml`在Hibernate 4的文件中添加以下属性。

```
<property name="hibernate.current_session_context_class">thread</property> 
```

或者

```
<property name="hibernate.current_session_context_class">org.hibernate.context.ThreadLocalSessionContext</property> 
```

对于其他版本。

这一行告诉 Hibernate a`Session`将绑定到线程上下文，这样当您第一次调用`getCurrentSession()`时，将创建一个会话并将其附加到正在运行的线程。同一线程中的任何未来调用都将返回相同的`Session`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T14:15:09.473

使用 Java-configs，我需要的解决方案是替换

```
<tx:annotation-driven/> 
```

和

```
@EnableTransactionManagement 
```

# delphi - 在 Delphi 中创建屏幕保护程序预览

> ID：16174748
> 
> 赞同：0
> 
> 时间：2013-04-23T16:41:38.730
> 
> 标签：delphi, preview, screensaver

我在 Delphi 10 Lite 中创建了一个屏幕保护程序，使用关于这个问题的不同描述，可在网络上找到。现在，屏幕保护程序运行良好，但缺少一件事：“屏幕保护程序设置”对话框中的良好工作预览。它是如何被创造出来的？我已阅读此说明：[如何在 Delphi 中进行屏幕保护程序预览？](https://stackoverflow.com/questions/903180/how-to-make-a-screen-saver-preview-in-delphi) 但我想要更具体的东西，也许有一个例子。我正在使用 Windows 7 Ultimate SP1。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T16:59:25.253

Embarcadero 站点，提供了一个功能齐全的屏幕保护程序示例，包括正常执行（运行）、预览、密码设置等。试试这篇文章[`Random Images Screen Saver - a complete screen saver example`](http://edn.embarcadero.com/article/26652)，源代码可以从[这里](http://cc.embarcadero.com/Item/15504)下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:44:58.273

这是我在[我的小擦洗屏幕保护程序测试](http://www.tek-tips.com/faqs.cfm?fid=6914)中所做的（这样做是为了看看一个人如何工作而不是打磨它）：

WinHandle 是 /P 切换期间传递的窗口 ID。我操纵了一些东西（屏幕保护程序只是以不同的颜色放置一个定义的文本，它们之间有一个定义的延迟）让屏幕保护程序作用于窗口句柄，所以我不必复制屏幕保护程序代码本身。SS_Init 为屏幕保护程序初始化事物，SS_Start 完成其中一步，SS_End 将事物包装起来。

```
if program_state = Preview then  // code before indicates /P was passed
  begin
    { spindle off messages until window is visible }
    while not IsWindowVisible(WinHandle) do
      Application.ProcessMessages;
    { initialize and do screen saver draw }
    start_time := WinMSSinceStart; // timeGetTime
    SS_Init(WinHandle);
    while IsWindowVisible(Winhandle) do
      begin
        if (WinMSSinceStart - Start_Time) >= config_rec.Delay then
          begin
             SS_Start(WinHandle);
             start_time := WinMSSinceStart;
          end;
        Application.ProcessMessages;
        sleep(10);
      end;
    SS_End(Winhandle);
end; 
```

这是您如何设置 TCanvas 以在传递的窗口句柄上绘制（这是在 SS_Init 中（但不是全部）。MyCanvas 是我根据此代码定义的属性：

```
 { get window dimensions and set up TCanvas }
  GetClientRect(WinHandle, WinRect);
  MyCanvas := TCanvas.Create;
  MyCanvas.Handle := GetDC(Winhandle); 
```

然后当你完成时（这是我的整个 SS_End 函数）：

```
 ReleaseDC(WinHandle, MyCanvas.Handle);
  MyCanvas.Free; 
```

希望能有所帮助。

# .net - 在 linq 查询中返回特定类型的对象

> ID：16174749
> 
> 赞同：0
> 
> 时间：2013-04-23T16:41:40.570
> 
> 标签：.net, vb.net, linq

我正在尝试编写一个返回某种类型的所有对象的 linq 查询。

如果我想得到所有的轿车，这样的事情会起作用吗？

```
Dim cars = From c In carFactory.GetAllcars()
           Select car = carFactory.GetAuto(c.ID)
           Where TypeOf (car) Is Sedan 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T16:43:01.983

这会起作用，但返回类型仍然是`IEnumerable(Of Car)`.

相反，你可以写`sequence.OfType(Of Sedan)()`; 这将过滤掉非轿车*并*返回一个`IEnumerable(Of Sedan)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T16:43:29.563

```
carFactory.GetAllcars().OfType<Sedan>().Select(car=>car.ID) 
```

# c# - C# WPF 应用程序打印问题（PageOrientation 属性不存在）

> ID：16174751
> 
> 赞同：1
> 
> 时间：2013-04-23T16:41:54.593
> 
> 标签：c#, wpf, system.printing

有没有人遇到过无法`PageOrientation`在 C# WPF 项目中使用该属性的问题？我已经尝试了一切，仍然说：

> “当前上下文中不存在名称‘PageOrientation’”。

我已经包括了所有用途，只是无法弄清楚。

这是我的打印方法：

```
private void btnPrindi_Click(object sender, RoutedEventArgs e)
{
    PrintDialog prtDlg = new PrintDialog();
    if (prtDlg.ShowDialog() == true)
    {
        **prtDlg.PrintTicket.PageOrientation = PageOrientation.Landscape;**

        Size pageSize = new Size(prtDlg.PrintableAreaWidth - 30, prtDlg.PrintableAreaHeight - 30);
        gridKaart.Measure(pageSize);
        gridKaart.Arrange(new Rect(15,15,pageSize.Width,pageSize.Height));
        prtDlg.PrintVisual(gridKaart,"Patsiendikaart");

    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:08:43.243

该错误实际上是指[`PageOrientation.Landscape`](http://msdn.microsoft.com/en-us/library/system.printing.pageorientation.aspx)赋值右侧的枚举 ( )。

如果该属性不存在，您将收到（尝试编译`"".Y`，您会明白我的意思）：

> “字符串”不包含“Y”的定义，并且找不到接受“字符串”类型的第一个参数的扩展方法“Y”（您是否缺少 using 指令或程序集引用？）

将此与`Aoeui.Dhtns`：

> 当前上下文中不存在名称“Aoeui”

您可能缺少所需的命名空间引用，例如`System.Printing`：

```
// ...
using System.Printing;
// ... 
```

另一种可能性是您没有引用`ReachFramework`.

如果有，您的代码将按原样编译：

![似乎工作](https://i.stack.imgur.com/wsXJt.png)

# ios - 如何从钥匙串中删除 nsdictionary 以进行替换

> ID：16174753
> 
> 赞同：2
> 
> 时间：2013-04-23T16:42:02.047
> 
> 标签：ios, objective-c, nsdictionary, nsdata, keychain

我正在将序列化的 nsdictionary 存储并加载到钥匙串中，如本文（将[NSDictionary 存储在钥匙串中](https://stackoverflow.com/questions/9948698/store-nsdictionary-in-keychain)），但我需要能够更新/编辑字典内容，所以我想删除它并重新添加。

我只是不知道该怎么做。我从上面的帖子中获取了以下代码：

```
 KeychainItemWrapper *keychain = [[KeychainItemWrapper alloc] initWithIdentifier:@"arbitraryId" accessGroup:nil]
    NSString *error;
    //The following NSData object may be stored in the Keychain
    NSData *dictionaryRep = [NSPropertyListSerialization dataFromPropertyList:dictionary format:NSPropertyListXMLFormat_v1_0 errorDescription:&error];
    [keychain setObject:dictionaryRep forKey:kSecAttrService];

    //When the NSData object object is retrieved from the Keychain, you convert it back to NSDictionary type
    dictionaryRep = [keychain objectForKey:kSecAttrServce];
    NSDictionary *dictionary = [NSPropertyListSerialization propertyListFromData:dictionaryRep mutabilityOption:NSPropertyListImmutable format:nil errorDescription:&error];

    SecItemDelete((CFDictionaryRef)dictionaryRep); // doesnt work 
```

这些值不会从钥匙串中删除。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:55:11.643

这是一个奇怪的存储数据的地方。您将其放入`kSecAttrService`未加密的 中。我想你的意思是把它放进去`kSecValueData`（这是钥匙串中唯一被加密的部分）。

也就是说，没有必要删除该项目。您可以随时使用`[keychain setObject:forKey:]`来更新值。`KeychainItemWrapper`自动检测项目是否已经存在，如果存在则更新它。

如果要使用 删除项目`KeychainItemWrapper`，请使用`-resetKeychainItem`。这调用`SecItemDelete()`了正确的值。如果不充分了解 Keychain API 及其工作原理，您通常无法混合搭配使用`KeychainItemWrapper`和原始调用。`SecItem*``KeychainItemWrapper`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:53:04.923

虽然我从来没有接触过钥匙串属性。但是通过查看`SecItemDelete`Apple 文档中的方法，预期的参数是一个字典，在你的代码中你传递`dictionaryRep`的是一个`NSData`类型。

[https://developer.apple.com/library/mac/#documentation/security/Reference/keychainservices/Reference/reference.html#//apple_ref/doc/c_ref/SecItemDelete](https://developer.apple.com/library/mac/#documentation/security/Reference/keychainservices/Reference/reference.html#//apple_ref/doc/c_ref/SecItemDelete)

在这里找到一个问题，希望它可能会有所帮助。

[我想在 Mac OS X 上删除我自己创建的 KeyChain 中的所有项目](https://stackoverflow.com/questions/11666727/i-want-to-delete-all-items-in-my-self-created-keychain-on-mac-os-x)

# ffmpeg - FFmpeg 直播 - 循环视频？

> ID：16174755
> 
> 赞同：8
> 
> 时间：2013-04-23T16:42:10.683
> 
> 标签：ffmpeg, streaming, justin.tv

我正在尝试使用 FFmpeg 将视频循环流式传输到 justin.tv？我设法循环了一个图像序列并将其与音频中的行结合起来：

```
ffmpeg -loop 1 -i imageSequence%04d.jpg -f alsa -ac 2 -ar 22050 -ab 64k \
  -i 脉冲 -acodec adpcm_swf -r 10 -vcodec flv \
  -f flv rtmp://live.justin.tv/app/<yourStreamKeyHere>

```

是否可以使用视频文件执行此操作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-12-15T03:34:02.537

绝对有可能。在最新版本的 ffmpeg 中，他们添加了一个 -stream_loop 标志，允许您根据需要循环输入多次。

问题是，如果您不从源重新生成 pts，ffmpeg 将在第一个循环后丢帧（因为时间戳会突然回到过去）。为避免这种情况，您需要告诉 ffmpeg 生成 pts，以便在循环之间获得增加的时间戳。这是通过 +genpts 调用完成的（它必须在 -i arg 之前）。

这是一个示例 ffmpeg 调用（将 $F 替换为您的输入文件）。此示例生成两个输出流，并且 -stream_loop -1 参数告诉 ffmpeg 连续循环输入。这种情况下的输出是用于类似的流广播摄取（MetaCDN），请根据您的要求进行相应调整。

```
ffmpeg -threads 2 -re -fflags +genpts -stream_loop -1 -i $F \
-s 640x360 -ac 2 -f flv -vcodec libx264 -profile:v baseline -b:v 600k -maxrate 600k -bufsize 600k -r 24 -ar 44100 -g 48 -c:a libfdk_aac -b:a 64k "rtmp://publish.live.metacdn.com/2050C7/dfsdfsd/lowquality_664?hello&adbe-live-event=lowquality_" \
-s 1920x1080 -ac 2 -f flv -vcodec libx264 -profile:v baseline -b:v 2000k -maxrate 2000k -bufsize 2000k -r 24 -ar 44100 -g 48 -c:a libfdk_aac -b:a 64k "rtmp://publish.live.metacdn.com/2050C7/dfsdfsd/highquality_2064?mate&adbe-live-event=highquality_" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-01T21:59:33.750

[Sinclair Media](http://sinclairmediatech.com/looping-over-an-input-with-ffmpeg/)通过使用 lavfi 过滤器并附`:loop=0`加到文件名找到了解决方案：

这是未经测试的：

```
ffmpeg -f lavfi -re -i movie=StreamTest.avi:loop=0 \
-acodec libfaac -b:a 64k -pix_fmt yuv420p -vcodec libx264 \ 
-x264opts level=41 -r 25 -profile:v baseline -b:v 1500k  \ 
-maxrate 2000k -force_key_frames 50 -s 640×360 -map 0 -flags \ 
-global_header -f segment -segment_list index_1500.m3u8 \ 
-segment_time 10 -segment_format mpeg_ts \
-segment_list_type m3u8 segmented.ts 
```

但它应该创建一个本地“index_1500.m3u8”文件，以流式传输“StreamTest.avi”中的视频。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-09-27T21:43:27.583

我只是通过一些修改重用 Rob 的答案，以便为实时流提供文件

```
ffmpeg -threads 2 -re -fflags +genpts -stream_loop -1 -i gvf.mp4 -c copy -f mpegts -mpegts_service_id 102 -metadata service_name=My_channel -metadata service_provider=My_Self -max_interleave_delta 0 -use_wallclock_as_timestamps 1 -flush_packets 1 "udp://233.0.0.1:1001?localaddr=10.60.4.237&pkt_size=188" 
```

# php - 代码点火器中的常用函数

> ID：16174757
> 
> 赞同：1
> 
> 时间：2013-04-23T16:42:14.717
> 
> 标签：php, codeigniter

我已经编写了一些常用功能，目前正在复制到我的每个控制器中。一个例子是一种将我的主要导航组合在一起的方法 - 我目前正在将它复制到每个人或我的控制器中。

有什么办法可以将这些常用功能放在某个地方，这样我就不必在每个控制器中重复相同的代码？

我认为在用户指南中创建核心类就可以了，但这似乎只是扩展当前核心

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:03:15.940

有很多方法可以做到这一点：

1.  就像 Rikesh 说的，使用[Helpers](http://ellislab.com/codeigniter/user-guide/general/helpers.html)。
2.  如果您有一大堆这样的功能，请将它们构建到[库中](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

通常在 CI 中，助手只是带有一堆“助手”函数的文件。图书馆更好地组织成班级。就个人而言，我会创建一个名为的自定义库，`Common`或者可能像 a`Nav Lib`左右那样进一步专门化它们。这就是为什么我喜欢 CI，它如此简单而灵活！

# python - 带有 Hive 流的 Python 2.7 模块

> ID：16174761
> 
> 赞同：1
> 
> 时间：2013-04-23T16:42:19.873
> 
> 标签：python, streaming, hive, statsmodels

我正在使用 Python 映射器在 DSE 3.0 集群（Hive 0.9）上进行 Hive 流处理。我的 python 脚本导入了需要 Python 2.7 的 statsmodels 模块。由于默认不是 2.7（它是 2.4），我下载并安装它，以及 statsmodels 模块。

但是，在运行简单的 Hive 查询时

```
hive> select transform (line) using 'python python-mapper.py' from docs; 
```

其中“docs”是带有行 STRING 的 Hive 表。但是，我收到错误：

```
File "python-mapper.py", line 6, in ?
import statsmodels
ImportError: No module named statsmodels 
```

所以我将我的 Hive 查询更改为：

```
hive> select transform (line) using 'python2.7 python-mapper.py' from docs; 
```

调用 2.7 版。但后来我得到了错误

```
Caused by: java.io.IOException: Cannot run program "python2.7": 
           java.io.IOException: error=2, No such file or directory 
```

我也尝试过 python27 和 /usr/local/bin/python2.7 并且仍然遇到相同的错误。有没有人遇到过这个？我已经参考了文章[On linux SUSE or RedHat, how do I load Python 2.7](https://stackoverflow.com/questions/4149361/on-linux-suse-or-redhat-how-do-i-load-python-2-7)的第二个答案。任何建议将不胜感激！

谢谢，上午

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-14T00:33:54.917

我知道这有点老了，但是我最近遇到了同样的问题，并认为我会为遇到这个问题的其他人回答。

如果您安装了多个版本的 python，python2.7 命令将不起作用。

有两种方法可以解决这个问题。一，使用 python 虚拟环境，这将允许您启动脚本并将其添加为资源以分发到所有节点。二，您可以通过键入以下内容来查找 python2.7 库的安装位置：

```
which python2.7 
```

然后像这样引用您的配置单元查询中的位置（示例）：

```
select transform (line) using '/usr/local/bin/python2.7 python-mapper.py' from docs; 
```

注意每个节点可能有不同的安装 python2.7 的位置，因此请事先检查。最好使用虚拟环境。

# html - 在背景中显示大量图像 (SVG)

> ID：16174765
> 
> 赞同：0
> 
> 时间：2013-04-23T16:42:28.250
> 
> 标签：html, svg

我想在 SVG 中显示很多圆圈。我们每个人都会包含一个图像。

我找到了这样做的方法。我定义了一个模式：

```
<defs>
        <pattern preserveAspectRatio="true" patternContentUnits="objectBoundingBox" height="1" width="1" y="0" x="0" id="imageExample">
            <image height="1" width="1" y="0" x="0" xlink:href="img/imageExample.png"/>
        </pattern>
</defs> 
```

然后我显示圆圈：

```
<circle cx=x cy=y r=r stroke="white" stroke-width="2" fill="url(#imageExample)"/> 
```

我的问题是：如果我想显示 1000 个圆圈，是否需要定义 1000 个模式？

[编辑]我希望每个圈子都有不同的背景图片，对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:00:18.433

当然，我不是。请参阅下面的演示，也可[在线获取](http://collapsar.co.ohost.de/data/so.1kcircles.svg)：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- SO: http://stackoverflow.com/questions/16174765/display-a-lot-of-images-in-background-svg  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg"
   xmlns:xhtml="http://www.w3.org/1999/xhtml"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   version="1.1"
   width="20cm" height="20cm"
   viewBox="0 0 1000 1000"
   preserveAspectRatio="xMinYMin"
   style="background-color:white; border: solid 1px black;"
>
    <defs>
            <pattern preserveAspectRatio="true" patternContentUnits="objectBoundingBox" height="1" width="1" y="0" x="0" id="imageExample">
                <image height="1" width="1" y="0" x="0" xlink:href="img/imageExample.png"/>
            </pattern>
    </defs>
    <circle cx="123" cy="109" r="10" stroke="black" stroke-width="1" fill="url(#imageExample)"/>
    <circle cx="456" cy="332" r="10" stroke="black" stroke-width="1" fill="url(#imageExample)"/>
    <circle cx="12"  cy="444" r="10" stroke="black" stroke-width="1" fill="url(#imageExample)"/>
    <circle cx="77"  cy="567" r="10" stroke="black" stroke-width="1" fill="url(#imageExample)"/>
    <circle cx="66"  cy="712" r="10" stroke="black" stroke-width="1" fill="url(#imageExample)"/>
    <circle cx="47"  cy="855" r="10" stroke="black" stroke-width="1" fill="url(#imageExample)"/>
    <circle cx="843" cy="30"  r="10" stroke="black" stroke-width="1" fill="url(#imageExample)"/>
    <circle cx="112" cy="321" r="10" stroke="black" stroke-width="1" fill="url(#imageExample)"/>
    <circle cx="387" cy="543" r="10" stroke="black" stroke-width="1" fill="url(#imageExample)"/>
    <circle cx="444" cy="67"  r="10" stroke="black" stroke-width="1" fill="url(#imageExample)"/>
</svg> 
```

# qt - QT Spim Mips 编程——将字符输入到字符串中

> ID：16174766
> 
> 赞同：0
> 
> 时间：2013-04-23T16:42:31.060
> 
> 标签：qt, mips, spim

我如何将一个字母添加到一个字符串中。例如，我有：

```
str: .asciiz "abcdefghijklmnopqrstuvwxyz" 
```

我想在字符串末尾添加字母 a 以使其在打印字符串时显示“abcdefghijklmnopqrstuvwxyza”。

我试过了

```
la $t0, str
lb $t1, 0($t0)
add $t0, $t0, 25
sb $t2, 1($t0)    # assume that $t2 contains the character a 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:08:16.167

你不能只增长一个字符串而没有空间让它长*成*. 在这种情况下，您将用 NULL 终止符覆盖`'a'`，这可能会在以后导致各种问题。

您可以在字符串后面分配一些额外的空间：

```
str: .asciiz "abcdefghijklmnopqrstuvwxyz"
extra_space: .space 32 
```

然后在最后添加一个`'a'`可以像这样完成：

```
la  $t0,str+26
li  $t1,'a'
sb  $t1,($t0)     # append an 'a' to the string
sb  $zero,1($t0)  # add a NULL terminator after the 'a' 
```

# java - 我的一个面板没有显示

> ID：16174769
> 
> 赞同：0
> 
> 时间：2013-04-23T16:42:35.920
> 
> 标签：java, swing, layout-manager, grid-layout

我的代码有什么问题？当我运行程序时，名为“leftPanel”的面板没有出现，而“flightPanel”

```
 import javax.swing.*;
        import java.awt.*;
        import java.awt.event.ActionEvent;
        import java.awt.event.ActionListener;

    public class TravelAgentSystem {

    public static void main(String[] args){

        JFrame mainFrame = new JFrame();
        mainFrame.setLayout(new BorderLayout());
        mainFrame.setTitle("Main Menu");
        mainFrame.setVisible(true);
        mainFrame.setSize(500,500);
        mainFrame.setLocationRelativeTo(null);
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel flightPanel = new JPanel();
        flightPanel.setLayout(new GridLayout(2,2));

        JButton timeb, priceb, hotelb, exitb;
        timeb = new JButton("Time");
        priceb = new JButton ("Price");
        hotelb = new JButton ("Hotels Menu");
        exitb = new JButton ("Exit Program");

        class buttonHandler implements ActionListener{

            public void actionPerformed(ActionEvent event) {
                JButton clickedButton = (JButton)event.getSource();
                String buttonText = clickedButton.getText();
                if (buttonText.equals("Exit Program")) {System.exit(0);}
            }

        }

        buttonHandler handler = new buttonHandler();

        exitb.addActionListener(handler);

        flightPanel.add(timeb);
        flightPanel.add(priceb);
        flightPanel.add(hotelb);
        flightPanel.add(exitb);

        mainFrame.add(flightPanel, BorderLayout.CENTER);

        JPanel travelPanel = new JPanel();
        travelPanel.setLayout(new GridLayout(2,2));
        travelPanel.setVisible(true);

        JPanel timePanel = new JPanel();
        timePanel = new JPanel();
        timePanel.setLayout(new GridLayout(2,1));
        timePanel.setVisible(true);

        JPanel leftPanel = new JPanel();
        leftPanel.setLayout(new GridLayout(2,1));
        leftPanel.setVisible(true);

        JLabel Lfrom, Lto, LDeparture;
        Lfrom = new JLabel("From");
        Lto = new JLabel("To");
        LDeparture = new JLabel("Departure Date (DD/MM/YY)");

        String[] fromOptions = {"East Midlands","Birmingham","Heathrow","Manchester"};
        String[] toOptions = {"New York", "Dahab", "Rome", "Sydney", "Tokyo"};

        JComboBox fromDest = new JComboBox(fromOptions);
        JComboBox toDest = new JComboBox(toOptions);

        JPanel datePanel = new JPanel();
        datePanel.setLayout(new FlowLayout());   // So i can fix size of dateField
        JTextField dateField = new JTextField();
        dateField.setPreferredSize(new Dimension(100,20));
        datePanel.add(dateField);

        travelPanel.add(Lfrom);
        travelPanel.add(fromDest);
        travelPanel.add(Lto);
        travelPanel.add(toDest);

        timePanel.add(LDeparture);
        timePanel.add(datePanel);

        leftPanel.add(travelPanel);
        leftPanel.add(timePanel);

        mainFrame.add(leftPanel, BorderLayout.EAST);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:48:49.543

最后打电话`mainFrame.setVisible(true);`。IE，

```
mainFrame.add(leftPanel, BorderLayout.EAST);
    mainFrame.setVisible(true); 
```

这是我得到的：

![在此处输入图像描述](https://i.stack.imgur.com/E27oG.png)

# php - 如何创建一个 php 函数以在提交时更新数据库？

> ID：16174770
> 
> 赞同：5
> 
> 时间：2013-04-23T16:42:45.757
> 
> 标签：php, function

我创建了这个函数来在单击提交按钮时更新数据库。但这似乎不起作用。该脚本旨在通过 id 使用用户的登录详细信息从数据库中提取用户的值并填充表单。该功能是在表单文本字段发生更改时帮助更新用户的详细信息。

请，我需要帮助调试它。

```
libraries.php
function db(){ //handles database connection

//connect to the database server or die and spit out connection error
$conn = mysql_connect('localhost','root', '') or die("Cannot connect to the database server now". mysql_error());
//select database table or die and spit out database selection error
mysql_select_db('newbishop',$conn) or die("Error in selecting database now ".mysql_errno());
  return $conn;  
}

personalsettings.php
<?php
include_once('libraries.php'); // contains the database function
session_checker();

db();
$categoryid = $_SESSION['id'];
$select =  "SELECT * FROM users WHERE categoryid ='$categoryid' LIMIT 1";
$row1 = dbprocess ($select);
$rows = mysql_fetch_assoc($row1);
$pname1 = $rows['pname'];
$email1 = $rows['email'];
$user1 = $rows['user'];
$pass1 = $rows['pass'];
$salt1 = $rows['salt'];
$phone1 = $rows['phone'];
$accesslevel = $rows['accesslevel'];
$position = $rows['position'];

function update(){
   db(); // database function
   $pname = $_POST['pname'];
   $categoryid = $_POST['categoryid'];
   $email = $_POST['email'];
   $phone = $_POST['phone'];
   $user = $_POST['users'];
   $pass = $_POST['pass'];

   function createSalt(){
     $string = md5(uniqid(rand(), true));
     return substr($string, 0, 3);
   };

   $salt = createSalt();
   $hash = hash('sha256', $salt . $pass);

   $sql = "UPDATE users SET user=?,pass=?,salt=?,pname=?,email=?,phone=? WHERE categoryid=?";
   $q = $conn->prepare($sql);
   $q->execute(array($user,$hash,$salt,$pname,$email,$phone,$categoryid));
}

?> 
```

表单编辑个人设置

```
<input name="users" type="text" id="users" class="users" autocomplete="off" value="<?php echo $user1;  ?>" />

<input type="text" autocomplete="off" name="pass" id="pass" placeholder="Create password" class="passwd" value="<?php echo $pass;  ?>"/>
    <input type="hidden" name="salt" id="salt" value="<?php echo $salt1;  ?>"/>

    <input name="pname" type="text" id="lname" placeholder="Name of Group" class="input-block-level" value="<?php echo $pname1;  ?>"/>

   <input type="hidden" id="categoryselect" name="categoryselect"/> 
   <input name="categoryid" type="text" id="resultselect"   readonly class="input-block-level" value="<?php echo $_SESSION['id'];  ?>"/>

    <input type="text" name="email" id="email" placeholder="Email Address" class="input-block-level" value="<?php echo $email1;  ?>"/>

    <input type="text" name="phone" id="phone" placeholder="Enter Phone Number" class="input-block-level" value="<?php echo $phone1;  ?>"/>

    <input type="text" name="accesslevel" id="accesslevel" class="input-block-level" value="<?php echo $accesslevel;  ?>" readonly/>

    <input type="text" name="position" id="position" class="input-block-level" value="<?php echo $position;  ?>" readonly/>

    <button type="submit" class="btn btn-small btn-primary" name="register" id="register" value="Register" onclick="update()">Submit</button>
  </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T16:47:51.407

```
db(); // database function 
```

似乎您忘记将函数的返回值分配给`$conn`.

正确的应该是：

```
$conn = db(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:46:58.943

尝试将此代码添加到底部之前的行`?>`：

```
if isset($_POST['user']) { update(); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:50:31.593

这只是一个粗略的例子，我没有测试过。它在这里，只是为了让你可以得到图片。

**功能**

```
 function update_db($data, $update){
   $conn = new PDO('mysql:host=locahost; dbname=xxxx', 'xxx', 'xxx');
   $stmt = $conn->prepare("UPDATE table, SET something=? WHERE id = ? ");
   $stmt->execute(array($data, $update));

  if($stmt->rowCount() > 0){
     return 'Updated';}
  else {
     return 'Something is wrong';
    }
 } 
```

**调用它**

```
if(isset($_GET['data'])) {
$data = $_GET['data'];
$update = 'text';

echo update_db($data, $update)

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T06:58:24.340

谢谢大家。我已经解决了这个问题。问题出在数据库上，因为被调用的函数无法访问数据库。

# asp.net-mvc - 如何在 MVC4 Razor 中访问枚举？

> ID：16174783
> 
> 赞同：0
> 
> 时间：2013-04-23T16:43:19.170
> 
> 标签：asp.net-mvc, razor, enums

我有一个枚举：

```
[Flags]
public enum ResultType {
    Success = 0x01,
    Failed = 0x02,
    Comment = 0x03
} 
```

如何在我的 MVC4 Razor 视图中访问它？像这样的东西：

```
You have:  @ResultType.Failed!!! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:45:47.227

那会很好用。
但是，您需要导入命名空间：

```
@using Some.Namespace; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T21:08:09.247

@SLacks 给出的答案确实有效，但我想对其进行扩展。我将所有应用程序枚举保存在一个文件中（为了可维护性），您可以在 ~/Views/Web.Config 或其他相关配置文件中添加该文件的名称空间（以及您在视图中始终需要的任何其他内容）。这将允许您使用枚举而无需记住添加命名空间，如果您使用的是 Visual Studio 脚手架，这将特别有用。

```
<namespaces>
    <add namespace="YourApp.Enums" />
</namespaces> 
```

# android - Android Widget 的屏幕尺寸

> ID：16174786
> 
> 赞同：0
> 
> 时间：2013-04-23T16:43:36.337
> 
> 标签：android, android-widget, size, screen

我正在尝试使用以下代码从小部件获取屏幕尺寸：

```
WindowManager wm = (WindowManager) ctx.getSystemService(Context.WINDOW_SERVICE);
Display display = wm.getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

我想它应该给我以像素为单位的屏幕尺寸。

我正在尝试在 Nexus 7 平板电脑 (1280 x 800) 和 LGE610(320 x 480) 上获取尺寸；

怎么可能，第一个得到 482 像素，第二个得到 480 像素？在 Galaxy Nexus (Maguro) 上，我得到了 526...

有可能还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:46:56.830

[http://developer.android.com/reference/android/view/Display.html#getSize(android.graphics.Point)](http://developer.android.com/reference/android/view/Display.html#getSize(android.graphics.Point))

> 获取显示的大小，以像素为单位。
> 
> 请注意，此值不应用于计算布局，因为设备通常会在显示屏边缘具有屏幕装饰（例如状态栏），这会减少此处返回的大小可用的应用程序空间量。布局应改为使用窗口大小。
> 
> 大小根据显示器的当前旋转进行调整。
> 
> 此方法返回的尺寸不一定代表显示器的实际原始尺寸（原始分辨率）。可以调整返回的大小以排除某些始终可见的系统装饰元素。它还可以扩展以提供与最初为较小显示器设计的旧应用程序的兼容性。

换句话说，您从 getSize 获得的内容是不一致的，具体取决于标题栏等的存在。买者自负。

这里有一个更彻底的讨论：

[如何获取 android Honeycomb 系统的屏幕宽度和高度？](https://stackoverflow.com/questions/7144814/how-can-i-get-android-honeycomb-systems-screen-width-and-height)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-23T15:10:26.070

您可以在 dp 中获取小部件大小，但我不知道如何调整大小的小部件高度和宽度。

```
public class MyProvider extends AppWidgetProvider {
 @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
                         int[] appWidgetIds) {
        super.onUpdate(context, appWidgetManager, appWidgetIds);
        for (int i : appWidgetIds) {
            updateWidget(context, appWidgetManager, i);
            AppWidgetProviderInfo info = appWidgetManager.getAppWidgetInfo(i);
            int highResize = info.minResizeHeight;
            int weighResize = info.minResizeWidth;
            int high = info.minHeight;
            int weigh = info.minWidth;
        }
    }
} 
```

# asp.net-mvc - 由于文件正在使用，Web 部署失败

> ID：16174797
> 
> 赞同：9
> 
> 时间：2013-04-23T16:44:19.070
> 
> 标签：asp.net-mvc, web-deployment, webdeploy, log4net-appender

我正在使用 Microsoft 的 Web Deploy Remote Agent 服务，让我可以轻松地从 Visual Studio 中将代码发布到服务器。

我正在部署的网站使用 log4net 将消息记录到日志文件中，每次尝试部署新版本的代码时，我都会在 Visual Studio 中收到此错误，指出当前 log4net 日志文件正在使用中：

> 在远程计算机上处​​理请求时发生错误。文件“Web.log”正在使用中。
> 
> 该进程无法访问“C:\inetpub\wwwroot\Logs\Web.log”，因为它正被另一个进程使用。

我可以通过进入服务器并`iisreset`在发布之前执行此操作来解决这个问题......但这有点违背了从 Visual Studio 发布“轻松”的观点:)

有什么方法可以让发布任务自动发出 iisreset，或者我可以通过其他方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T13:45:45.353

我一直在四处寻找，发现文件被锁定在其他几个论坛中的一些花絮。您是否尝试过添加

```
<lockingModel type="log4net.Appender.FileAppender+MinimalLock" /> 
```

到`<appender>`web.config 文件中的元素？来自[Apache 文档](https://logging.apache.org/log4net/release/sdk/?topic=html/T_log4net_Appender_FileAppender_MinimalLock.htm)

> 每个 AcquireLock/ReleaseLock 周期打开一次文件，从而在最短的时间内保持锁定。这种锁定方法比 FileAppender.ExclusiveLock 慢得多，但允许其他进程在继续记录时移动/删除日志文件。

至于性能方面的考虑，我想您需要测试这是否会影响您，因为我假设这实际上取决于您写入日志文件的频率以及这会对性能产生多大影响。我无法相信获取/释放锁可能需要这么多时间*。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-28T16:28:47.693

有一个[名为的 MSDEPLOY 提供程序`recycleApp`](http://technet.microsoft.com/en-us/library/ee522997%28v=ws.10%29.aspx)正是用于此目的。您可以将其包含在部署清单中。

另一种选择是使用`ignoreOnErrors`标志，它将跳过正在使用的文件并继续部署。

# sql - Rails 3 & heroku - 数据库之间的克隆表

> ID：16174801
> 
> 赞同：0
> 
> 时间：2013-04-23T16:44:39.997
> 
> 标签：sql, ruby-on-rails-3, heroku

我有本地机器，它在使用 db:push 和 taps 将结果数据推送到 heroku 之前执行大量数据处理 - 这很笨重，但速度很快。问题是水龙头非常不稳定，工具带不再支持。

一种选择是在生成结果时将结果运行到生产环境中 - 通过使用连接字符串和类似的东西：

`ActiveRecord::Base.establish_connection(:production)`

*   但是有 1000000 条记录，并且以这种方式单独插入记录需要的**时间**太长。

有没有办法可以使用原始 sql 之类的东西：

```
CREATE TABLE new_tbl LIKE orig_tbl; 
```

但是新表在不同的数据库连接上？……

或者有没有更好的方法来克隆本地表并推送到heroku？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:12:19.277

您可以从本地转储表格并将文件通过管道传输到远程，类似于我在这里概述的内容：[https ://stackoverflow.com/a/16151503/95741](https://stackoverflow.com/a/16151503/95741)

# ravendb - RavenDB SaveChanges() 不保存派生类的属性（[DataMember] 在其他类中使用）

> ID：16174802
> 
> 赞同：0
> 
> 时间：2013-04-23T16:44:40.137
> 
> 标签：ravendb

我最近升级到 build 2230，一切正常。但是，我刚刚更新了 RavenDB .NET 客户端程序集，现在我遇到了这个问题。

该代码已经存在一年左右。这就是我保存的方式：

```
public void Save(EntityBase objectToSave)
{
    using (IDocumentSession session = GetOptimisticSession())
    {
        session.Store(objectToSave, objectToSave.Etag);
        session.SaveChanges();
    }
} 
```

这就是我要保存的对象。

```
public class InstallationEnvironment : EntityBase
{
    public string Name { get; set; }
    public int LogicalOrder { get; set; }
} 
```

现在是基类：

```
public class EntityBase : NotifyPropertyChangedBase
{
    public string Id { get; set; }  // Required field for all objects with RavenDB.
} 
```

问题是基类属性 (Id) 在 RavenDB 中被持久化，但派生属性 (Name, LogicalOrder) 不是。

为什么只有基类属性会保存在 RavenDB 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:24:42.987

知道了。通过反复试验，我注意到*一个*派生属性被保存（在与我的问题中显示的不同的类上），并且该属性被属性修饰`[DataMember]`。我刚刚添加了它，因为我正在为我的应用程序创建 WCF 服务，并且我首先在一个属性上使用该属性进行测试。

正如 Ayende[在这里](https://stackoverflow.com/a/6986324/279516)所说，您必须`[DataMember]`在所有属性上使用，或者不使用任何属性。如果`[DataMember]`存在于属性上，则所有其他属性都将被忽略。

注意：这对我来说是个问题，即使是*在不同类*`[DataMember]`的属性上指定的。似乎如果我在任何地方使用它，我必须将它用于一切。*`[DataMember]`*

# java - JAXWS 运行时异常

> ID：16174812
> 
> 赞同：1
> 
> 时间：2013-04-23T16:45:13.513
> 
> 标签：java, web-services, jboss, jax-ws, jboss5.x

我正在使用 JBoss 5.1.0GA 和 jaxws-api 2.1.1 和 maven，我的网络服务是

```
@WebMethod
public GenericResponse getExternalSystems() throws java.rmi.RemoteException{
    return engineExternal.getExternalSystems();
} 
```

我在部署时遇到的运行时异常如下：

```
Caused by: org.jboss.ws.WSException: arg0 is not a valid property on class ClassName
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getElementPropertyAccessor(JAXBContextImpl.java:971)
    at org.jboss.ws.metadata.accessor.JAXBAccessorFactory.create(JAXBAccessorFactory.java:49)
    at org.jboss.ws.metadata.umdm.EndpointMetaData.createAccessor(EndpointMetaData.java:763)
    at org.jboss.ws.metadata.umdm.EndpointMetaData.eagerInitializeAccessors(EndpointMetaData.java:697)
    at org.jboss.ws.metadata.umdm.EndpointMetaData.initializeInternal(EndpointMetaData.java:569)
    at org.jboss.ws.metadata.umdm.EndpointMetaData.eagerInitialize(EndpointMetaData.java:557)
    at org.jboss.ws.metadata.umdm.ServiceMetaData.eagerInitialize(ServiceMetaData.java:433)
    at org.jboss.ws.metadata.umdm.UnifiedMetaData.eagerInitialize(UnifiedMetaData.java:199)
    at org.jboss.wsf.stack.jbws.EagerInitializeDeploymentAspect.start(EagerInitializeDeploymentAspect.java:48)
    at org.jboss.webservices.integration.deployers.WSDeploymentAspectDeployer.internalDeploy(WSDeploymentAspectDeployer.java:107)
    at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)
    at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)
    ... 30 more 
```

我找到了一些使用 ant 任务的解决方案：

[http://billytee.wordpress.com/2009/09/03/jboss-jax-ws-is-not-a-valid-property-on-class/](http://billytee.wordpress.com/2009/09/03/jboss-jax-ws-is-not-a-valid-property-on-class/)

[http://www.javalinux.it/wordpress/2009/03/16/ant-171-and-package-infojava-compilation-problem-of-jax-ws-generated-classes/](http://www.javalinux.it/wordpress/2009/03/16/ant-171-and-package-infojava-compilation-problem-of-jax-ws-generated-classes/)

但是我使用maven，所以我不能使用这些解决方案。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:10:31.940

当 Web 服务实现中的参数未正确注释时，会发生此错误。

确保所有参数都已注释。例如：@WebParam(name="param_name")

其中 param_name 表示 WSDL 中存在的元素的名称。

# php - 根据下拉选择限制自动完成的结果数

> ID：16174813
> 
> 赞同：0
> 
> 时间：2013-04-23T16:45:16.630
> 
> 标签：php, jquery, sql, ajax, autocomplete

我试图在这里弄清楚几件事，似乎很接近，但遇到了障碍。我的问题是，在我选择一个下拉选项（用于过滤大量结果）后，当我开始在自动完成框中输入时应该可用的结果不可用。如果我对下拉列表传递的值进行硬编码并开始在自动完成框中输入，那么一切正常。只有当我传入该值时，我才会遇到问题。

我有两个 PHP 页面，一个包含包含下拉列表（其结果的 SQL）和一个自动完成框的布局，另一个包含自动完成的 SQL。

### 搜索.php

```
<select id="loc">
<?php
// sql for dropdown
while ($row = odbc_fetch_array($result)) {
echo "<option value\"".$row['Location']"\">".$row['Description']."</option>";
}
?>
</select>

<label for="search">Search: </label>
<input type="text" id="search" />

<script>
// Send value entered in the autocomplete box to data.php for it to be used in sql statement
$(document).ready(function(){
    $('#search').autocomplete({
        minLength: 3,
        source: function(query, process) {
            $.ajax({
                url: 'data.php',
                type: 'GET',
                data: "name=" + $('#search').val(),
                dataType: 'JSON',
                async: true,
                success: function(data) {
                    process(data);
                }
            });
        }
    });
});

// Append selected dropdown value to URL so it can be accessed
$(document).ready(function() {
    $('#search').change(function() {
        var res = $(this).val();
        location.href = "search.php?src="+res;
    });
});
</script> 
```

### 数据.php

```
<?php
if (isset($_GET['src'])) {
$loc = $_GET['src'];
$fullname = explode(" ", $_GET['name']);
$sql = "SELECT p.lastname + ', ' + p.firstname as fullname,
        l.city as city
        FROM people p
        JOIN location l on p.city = l.city
        WHERE p.lastname like '".$fullname[1]."%' AND p.firstname like '".$fullname[0]."%'
        AND l.city = '$loc'
        GROUP BY p.lastname + ', ' + p.firstname, l.city
        ORDER BY p.lastname + ', ' + p.firstname";

// DB connection and execute connection here

$array = array();
while ($row = odbc_fetch_array($db)) {
    $array[] = $row['fullname'];
}
echo json_encode($array);
}
?> 
```

因此，当我有这样的代码并从下拉列表中选择一个选项时，它会在 select 语句中运行，因为正在传递所选值。如果我在 search.php 页面上回显结果，它们会被正确过滤，或者如果我直接导航到 data.php 页面并传入正确的参数，一切都是正确的。不过，在我做出选择并开始在自动完成框中输入内容后，我没有得到任何结果。我猜我需要以某种方式根据选择过滤结果，获取这些结果并在我开始输入时运行不同的查询？

提前感谢您的帮助，如果我不清楚任何事情，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:07:38.190

好吧，就像它通常发生的那样，在休息一下之后，我现在已经开始工作了。

下面是修改后的代码，其中的注释显示了我所做的更改。

### 搜索.php

```
<select id="loc">
<?php
// sql for dropdown
while ($row = odbc_fetch_array($result)) {
echo "<option value\"".$row['Location']"\">".$row['Description']."</option>";
}
?>
</select>

<label for="search">Search: </label>
<input type="text" id="search" />

<script>
/* Send value entered in the autocomplete box to data.php 
 * for it to be used in sql statement */
$(document).ready(function(){
    $('#search').autocomplete({
        minLength: 3,
        source: function(query, process) {
// Added the variable below to get the dropdown's selected value
            var res = $('#loc').val();
            $.ajax({
                url: 'data.php',
                type: 'GET',
// Edited: included the dropdown value 
                data: "src="+res + "&name=" + $('#search').val(),
                dataType: 'JSON',
                async: true,
                success: function(data) {
                    process(data);
                }
            });
        }
    });
});

/* This event is not needed since the value is set when a selection 
 * is made. 'change' passed that value to search.php causing
 * the query to run without the search value. This caused a HUGE 
 * number of results, and usually causing the page to timeout. 
 * Making sure all variables get passed prior to running the query
 * is a must. I knew this but got stuck on how to make it work. */
// Append selected dropdown value to URL so it can be accessed
//$(document).ready(function() {
//    $('#search').change(function() {
//        var res = $(this).val();
//        location.href = "search.php?src="+res;
//    });
//});
</script> 
```

### 数据.php

```
<?php
if (isset($_GET['src'])) {
    $loc = $_GET['src'];
}
// Moved the $loc variable into the if statement above
// $loc = $_GET['src'];
$fullname = explode(" ", $_GET['name']);
$sql = "SELECT p.lastname + ', ' + p.firstname as fullname,
        l.city as city
        FROM people p
        JOIN location l on p.city = l.city
        WHERE p.lastname like '".$fullname[1]."%' 
              AND p.firstname like '".$fullname[0]."%'
        AND l.city = '$loc'
        GROUP BY p.lastname + ', ' + p.firstname, l.city
        ORDER BY p.lastname + ', ' + p.firstname";

// DB connection and execute connection here

$array = array();
while ($row = odbc_fetch_array($db)) {
    $array[] = $row['fullname'];
}
echo json_encode($array);
?> 
```

我还没有完成主页上的几部分，例如禁用/隐藏自动完成框，直到从下拉列表中进行选择并调整查询以进行额外过滤，但这些在我的列表中。我敢肯定还有一些其他的东西我也可以清理，但我的第一个目标是让它正常工作，现在已经完成了！

如果有人正在使用 php 并且有几十万+的结果，并且想使用自动完成框来过滤那些结果而不等待结果显示的荒谬时间，我希望这可能会有所帮助。不像我最初想象的那么复杂，但过度认为它会对你造成这种影响。此外，即使它现在正在工作，请随时为任何语法错误添加一些建议和道歉！

# java - 如何获取像素的颜色

> ID：16174814
> 
> 赞同：0
> 
> 时间：2013-04-23T16:45:27.683
> 
> 标签：java, getpixel

在我下面的代码中......黄色框。为此，我计划首先检测子弹接触移动条的像素的颜色，如果像素颜色为黄色，则在下方添加黄色条............这里是我的代码：//

```
import java.awt.*;
import java.applet.Applet;
import java.awt.event.*;

public class abyss extends Applet implements Runnable,KeyListener{
int lim=446,l,src,i=-40,n,c,ct=450,cl=225,y,f,bl,bw,fr,mud=0;
Thread v=null;

public void init() {
setBackground(Color.black);
addKeyListener(this);
                          }
public void start() {
       v=new Thread(this);
       v.start();
                                   }
public void run() {
try {
         int trainDelay = 0;

    while (true) {
           if(ct<=200)
           {repaint();
            }

            if (y == 1) {
            if (f<=41) {
                bl = cl + 25;
                bw = 10;
                f = lim;
            } 
                   if (f > 41) {
                repaint(bl, f, bw, bw + 1);
           if (--f<=41) {
                   if(l%80==0)
                   {mud=1; 
                    ct=ct-20;
                    System.out.println("decreased");
                    lim=lim-20; 
                    repaint();}
                   else if(l%80!=0  && (ct+20<=420))
                   {ct=ct+20;
                    lim=lim+20; 
                    }
                    y = 0;
                    bw = 0;
                                      }
            }
        }

        if (trainDelay <= 0) {
            repaint();
            i = i + 40;
            c = 1;
            n = i / 40;
            trainDelay = 200;
        }
        Thread.sleep(5);
        trainDelay--;
   }
} catch (Exception e) {
} 
```

}

```
public void paint(Graphics g) {
if(ct>=200){
if(mud==1)
{g.setColor(Color.orange);
g.fill3DRect(0,ct+20,500,450-ct,true);}
g.setColor(Color.darkGray);
g.fill3DRect(0,200,30,300,true);
g.fill3DRect(470,200,30,300,true);
g.fill3DRect(0,470,500,30,true);
g.setColor(Color.blue);
g.fill3DRect(cl,ct,50,20,true);
setBackground(Color.black);
for(int j=n-1;j>=0;j--)
{  l=j*40;
if((c%2)==0)
{g.setColor(Color.cyan);
g.fill3DRect(l,0,50,40,true);}
else
{g.setColor(Color.orange);
g.fill3DRect(l,0,50,40,true);}
c++;
}
} 

{g.setColor(Color.yellow);
g.fillOval(bl,f,bw,bw);
if(ct<=200)
{setBackground(Color.red);
g.setColor(Color.yellow);
g.drawString("You win!!",215,210);
}   
}                                         }

public void keyPressed(KeyEvent e) {
if(e.getKeyCode()==KeyEvent.VK_LEFT && cl>=38){
cl=cl-10;}
if(e.getKeyCode()==KeyEvent.VK_RIGHT && cl<=412){
cl=cl+10;}
if(e.getKeyCode()==KeyEvent.VK_UP){
y=1;}
}
public void keyReleased(KeyEvent e) {}
public void keyTyped(KeyEvent e) {}
public void stop() {
try{wait();}
catch(Exception e) {}
}
public void destroy() {}
} 
```

请告诉我如何检测颜色............可以使用 getColor() 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:03:36.173

看起来你有了一个好的开始。我建议您将青色和黄色框设置为具有颜色和位置属性的对象。

为您的盒子对象创建一个 getColor 方法，并为您的盒子对象和项目符号对象创建一个 getLocation 方法。

当 bullet.getLocation = box.getLocation 然后 box.getColor

看看这个 Java/Processing App，它在点击时设置了一个圆圈的颜色。它使用类似于我刚才描述的原理。

[https://sourceforge.net/projects/all-spark-cube/](https://sourceforge.net/projects/all-spark-cube/)

[https://github.com/spudstud/All-Spark-Cube/blob/master/Sandbox/Panel_2d/LedObject.pde](https://github.com/spudstud/All-Spark-Cube/blob/master/Sandbox/Panel_2d/LedObject.pde)

# python - Python 动态执行

> ID：16174815
> 
> 赞同：1
> 
> 时间：2013-04-23T16:45:29.517
> 
> 标签：python, dynamic

我有一个存储在变量 List_dicts 中的字典项目列表，我必须将上面列表中的选定项目列表写入文件。在我的python函数下面给出：

```
def write_items(List_dicts,key_list):
  #List_dicts contains the list if dicts
  #key_list contains the key separated by comma
  k_list=key_list.split(',')
  write_string=''
  for i in k_list:
    write_string=write_string+"item['"+i+"'],"
  f=open('log.txt','w')
  for item in List_dicts:
    f.write(write_string[0:len(write_string)-1]) #this should write item['key1'],item['key2'],item['key3']..,item['keyn'] not the value of string 'write_string'
  f.close() 
```

无论如何这可能吗？我的灵感来自 SQL 动态执行查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:48:48.913

编辑：从您的代码来看，您的函数似乎没有编写任何与`dict`s 的内容相关的内容。您正在`write_string[0:len(write_string)-1]`为您获得的每个 dict 写入文件（这只是您的副本，`write_string`没有最后一个尾随逗号）并且`write_string`与您的 dict 中的项目无关，它只是从`key_list`.

有一个 python 模块，`csv`有一个名为 的类[`DictWriter`](http://docs.python.org/2/library/csv.html#csv.DictWriter)，适合您的工作。

```
import csv

def write_dicts(dicts, keys, filename):

   with open(filename, 'w') as csvfile:
       writer = csv.DictWriter(csvfile, keys, extrasaction='ignore')
       for d in dicts:
           writer.writerow(d) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:47:59.703

我不确定我是否理解这个问题，但如果我理解了，这就是你应该使用的： http: [//docs.python.org/2/library/pickle.html](http://docs.python.org/2/library/pickle.html)

基本上，它允许您将 python 对象存储在文件中。这是一个你应该看看的快速示例： [http ://wiki.python.org/moin/UsingPickle](http://wiki.python.org/moin/UsingPickle)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T16:58:03.797

除了更好地使用`csv`模块之外，你做错的事情是你把事情复杂化了。

您已经有了要编写的键列表，因此只需*直接*遍历这些键即可：

```
def write_items(List_dicts, key_list):
    k_list = key_list.split(',')
    with open('log.txt','w') as f:
        for item in List_dicts:
          for key in k_list:
              f.write(item[key]) 
```

# ruby-on-rails - 卸载 Helicon Zoo 模块

> ID：16174817
> 
> 赞同：0
> 
> 时间：2013-04-23T16:45:30.927
> 
> 标签：ruby-on-rails, helicontech

我已经通过 Helicon Zoo 安装了 Ruby on Rails。现在我想卸载 Ruby on Rails 模块，但找不到“卸载”项。是否必须卸载 Helicon Zoo 才能卸载 Ruby on Rails？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T18:19:59.113

转到添加/删除程序并卸载 Helicon Zoo 模块、Ruby 1.8 和 Ruby 1.9。

# python - 如何获取 Riak 对象，更改其值并将其与 Python 中的所有索引一起存储回来

> ID：16174818
> 
> 赞同：1
> 
> 时间：2013-04-23T16:45:31.500
> 
> 标签：python, database, riak

我正在使用 Riak 数据库来存储我的 Python 应用程序对象，这些对象由多个脚本并行使用和处理。因此，我需要将它们锁定在不同的地方，以避免一次被多个脚本处理，如下所示：

```
riak_bucket = riak_connect('clusters')
cluster = riak_bucket.get(job_uuid).get_data()
cluster['status'] = 'locked'
riak_obj = riak_bucket.new(job_uuid, data=cluster)
riak_obj.add_index('username_bin', cluster['username'])
riak_obj.add_index('hostname_bin', cluster['hostname'])
riak_obj.store() 
```

问题是，这是做一件简单、可重复的事情的相当多的代码，并且鉴于锁定经常发生的事实，我想找到一种更简单、更清洁的方法来做到这一点。我试图编写一个函数来进行锁定/解锁，就像那样（对于一个不同的对象，称为'build'）：

```
def build_job_locker(uuid, status='locked'):
    riak_bucket = riak_connect('builds')
    build = riak_bucket.get(uuid).get_data()
    build['status'] = status
    riak_obj = riak_bucket.new(build['uuid'], data=build)
    riak_obj.add_index('cluster_uuid_bin', build['cluster_uuid'])
    riak_obj.add_index('username_bin', build['username'])
    riak_obj.store()
    # when locking, return the locked db object to avoid fetching it again
    if 'locked' in status:
        return build
    else:
        return 
```

但是由于对象显然彼此完全不同，它们有不同的索引等等，我最终为每个对象编写了一个锁定函数......这几乎和根本没有这些函数并重复代码。

问题是：有没有办法编写一个通用函数来做到这一点，知道每个对象都有一个“状态”字段，将它们锁定在数据库中，保留所有索引和其他属性？或者，也许，我还没有想到另一种更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T09:21:27.673

经过更多的研究，以及在各种 IRC 频道上提出的问题，这似乎是不可行的，因为没有办法从 Riak 获取这种关于对象的元数据。

# android - 用于设置壁纸的 Android 图库选项

> ID：16174819
> 
> 赞同：0
> 
> 时间：2013-04-23T16:45:32.163
> 
> 标签：android, gallery

这是包含4张图片的画廊的项目代码。我设置了一个选项菜单，它将图片设置为墙纸。我尝试运行它，但是当我选择“设置为墙纸”（menuSet）时，它被迫关闭。

```
private ImageView foto;
private Gallery gallery;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_naruto_hd_wallpapers);

    gallery = (Gallery) findViewById(R.id.gallery);
    foto = (ImageView) findViewById(R.id.imageView1);

    gallery.setAdapter(new ImageAdapter(this));

    gallery.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position, long id) {

            switch(position) {

            case 0: foto.setImageResource(R.drawable.ornek1); break;

            case 1: foto.setImageResource(R.drawable.ornek2); break;

            case 2: foto.setImageResource(R.drawable.ornek3); break;

            case 3: foto.setImageResource(R.drawable.ornek4); break;

            }
        }
    });

}
public class ImageAdapter extends BaseAdapter {
    int mGalleryItemBackground;
    private Context mContext;
    private Integer[] mImageIds = {
            R.drawable.ornek1,
            R.drawable.ornek2,
            R.drawable.ornek3,
            R.drawable.ornek4,

         };
    public ImageAdapter(Context c) {
        mContext = c;
        TypedArray attr = mContext.obtainStyledAttributes(R.styleable.GaleriOlusturma);
        mGalleryItemBackground = attr.getResourceId(
                R.styleable.GaleriOlusturma_android_galleryItemBackground, 0);
        attr.recycle();
    }
    public int getCount() {
        return mImageIds.length;
    }
    public Object getItem(int position) {
        return position;
    }
    public long getItemId(int position) {
        return position;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = new ImageView(mContext);
        imageView.setImageResource(mImageIds[position]);
        imageView.setLayoutParams(new Gallery.LayoutParams(150, 100));
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.setBackgroundResource(mGalleryItemBackground);

        return imageView;
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu, menu);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub

    switch (item.getItemId()) {
    case R.id.menuSet:

        Bitmap mBitmap = BitmapFactory.decodeResource(getResources(),R.drawable.ornek1);
        WallpaperManager myWallpaperManager = WallpaperManager.getInstance(getApplicationContext());
        try {
            myWallpaperManager.setBitmap(mBitmap);
            Toast.makeText(NarutoHdWallpapers.this, "Wallpaper set", Toast.LENGTH_SHORT).show();
        } catch (IOException e) {
            Toast.makeText(NarutoHdWallpapers.this, "Error setting wallpaper", Toast.LENGTH_SHORT).show();
        }

        return true;

    default:
        return super.onOptionsItemSelected(item);
    }

}

} 
```

如果我将这些块更改为简单的 toast 消息，它可以正常工作。

```
Bitmap mBitmap = BitmapFactory.decodeResource(getResources(),R.drawable.ornek1);
        WallpaperManager myWallpaperManager =        WallpaperManager.getInstance(getApplicationContext());
        try {
            myWallpaperManager.setBitmap(mBitmap);
            Toast.makeText(NarutoHdWallpapers.this, "Wallpaper set", Toast.LENGTH_SHORT).show();
        } catch (IOException e) {
            Toast.makeText(NarutoHdWallpapers.this, "Error setting wallpaper",  Toast.LENGTH_SHORT).show();
        } 
```

**注意：我将权限放入清单

# php - 速率限制。推特 API

> ID：16174820
> 
> 赞同：0
> 
> 时间：2013-04-23T16:45:32.960
> 
> 标签：php, api, twitter, foreach

我正在编写一个小而简单的代码，它基本上可以过滤一些推文。问题是我达到了 Twitter API 的请求限制，我想知道是否**有解决方法，或者我想做的事情是否无法完成。**

首先，我输入一个 twitter 用户名来检索该用户关注的人的 ID。

```
$user_id = $_GET["username"]; 
$url_post = "http://api.twitter.com/1/friends/ids.json?cursor=-1&screen_name=" . urlencode($user_id);
$following = file_get_contents($url_post, true);
$json = json_decode($following);

$ids = $json->ids; 
```

Twitter API 以 ID 列表响应。

问题来了。下一步是请求找出每个 ID 的用户名、头像和描述。

```
$following = array();
foreach ($ids as $value)
{
$build_url = 'http://api.twitter.com/1/users/lookup.json?user_id=' . $value . '';
$following[] = $build_url;
}

foreach ($following as $url) 
{
$data_names = file_get_contents($url, true); //getting the file content
$json_names = json_decode($data_names);

foreach ($json_names as $tweet) {

$name = $tweet->name;
$description = $tweet->description;

echo '<p>'; 
echo $name . '<br>';
echo $description;
echo '</p>';
}
} 
```

如果用户关注 50 个人，它就可以工作。但是，如果他跟随，假设是 60000 次，那将是超过限制的 Twitter API 的 600000 次请求（用于用户名、描述和个人资料图片）。

**有什么办法可以解决这个问题吗？**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T23:56:48.883

您可以并且应该`users/lookup`一次请求具有 100 个用户 ID 的 API 端点，而不是每个 Twitter ID 执行一个请求。参看。[https://dev.twitter.com/docs/api/1.1/get/users/lookup](https://dev.twitter.com/docs/api/1.1/get/users/lookup)

您必须用`foreach ($following as $url)`递归函数替换您的 forEach 循环 ()。

在函数结束时，在再次调用之前检查剩余的命中数（参见[此链接](http://classicaspreference.com/aspexamples/check_Twitter_rate_limit_for_remaning_hits.asp)以了解如何知道在您获得速率限制之前的时间）。

如果没有命中，则在再次调用该函数之前休眠 15 分钟，否则再次调用。

有很多关于如何执行此操作、使用 Google 和搜索现有 stackOverflow 问题的信息。

# java - 获取 GridPane 列/行的宽度/高度？

> ID：16174828
> 
> 赞同：5
> 
> 时间：2013-04-23T16:45:52.247
> 
> 标签：java, layout, grid, javafx-2

虽然很明显如何在 a 中设置列​​/行的宽度/高度，`GridPane`但我如何才能真正查询这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-10T13:48:20.253

JavaFX8：有一个包保护方法`GridPane.getGrid`可以在两个暗淡的双数组中获取当前行/列的大小。您可以使用反射来访问它。在具有安全管理器的环境中，这将不起作用。

```
public double[][] getCurrentGrid(GridPane gp) {
    double[][] ret=new double [0][0];

    try {
        Method m=gp.getClass().getDeclaredMethod("getGrid");
        m.setAccessible(true);
        ret=(double[][])m.invoke(gp);                   

    } catch (Exception e) {
        e.printStackTrace();
    }

    return ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-04T14:07:44.413

[**免责声明**：我从问题中提取了这个，OP（[**stefan.at.wpf**](https://stackoverflow.com/users/298288/stefan-at-wpf)）自行回答了它。[答案不应包含在问题本身](https://meta.stackexchange.com/q/309552/316262)中。也[不要使用编辑/更新：问题/答案不需要记录历史](https://meta.stackexchange.com/questions/127639/when-is-edit-update-appropriate-in-a-post/127655#127655)。]

* * *

可以将空`HBox`/添加`VBox`到相应的`GridPane`列/行并将侦听器附加到`HBox`/ `VBox` `widthProperty`/ `heightProperty`，但我仍然想知道是否有一种方法可以直接获取 a 中列/行的宽度和高度`GridPane`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-23T13:49:51.470

在 javafx-8 中，现在有一个方法`GridPane#impl_getCellBounds`可以解决问题，尽管它是内部 API 的一部分。（不确定这是否也适用于 javafx-2）

**请注意**，正如*@olmstov*所评论的，所提到的方法在更高版本的 javafx 中已被贬低和删除。如果有更好的方法（与公共 API 兼容），建议使用它而不是这种替代方法。

# vb.net - 字符串加/减函数

> ID：16174829
> 
> 赞同：1
> 
> 时间：2013-04-23T16:46:06.443
> 
> 标签：vb.net, string, eval, addition, scriptcontrol

通过使用带有 eval 函数的脚本控件，这在 VB 脚本中是一种可能性。例如

```
ScriptControl1.Eval("(10+1.5)") 'Returns 11.5 
```

有没有办法在 Vb.Net 中做到这一点？另一种方法是简单地拆分字符串并验证它是加法还是减法，然后从那里开始工作。我只是想知道是否已经有一个我还不知道的内置函数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:57:41.530

我想到了。我必须像这样添加对 Microsoft Script 控件的 COM 引用： ![在此处输入图像描述](https://i.stack.imgur.com/82pc8.png)

然后我只是将我的新变量声明为脚本控件。

```
Dim ScriptControl1 As New MSScriptControl.ScriptControl()
ScriptControl1.Eval("(10+1.5)") ' Returns 11.5 
```

## 笔记*

确保您的目标 CPU 为 x86！如果我将它设置为任何 CPU，我会收到一个 COMException。

# string - 将数字矩阵与字符串数组组合

> ID：16174833
> 
> 赞同：0
> 
> 时间：2013-04-23T16:46:17.793
> 
> 标签：string, matlab, matrix, numbers

我正在尝试使用 MatLAB 以更聪明的方式计算下面看到的代码：

```
f=zeros(5,2) %Values irrelevant.
y = {'A1', 'B1'; 
     f(1,1) f(1,2); 
     f(2,1) f(2,2); 
     f(3,1) f(3,2); 
     f(4,1) f(4,2); 
     f(5,1) f(5,2)}; 
```

我得到的是带有两个向量及其上方`f`文本的矩阵。`A1``B1`

`num2str`我想有一种更简单的方法来写这个，用于更复杂的目的，但我尝试了我能想到的括号、括号和大括号的任何组合。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:57:42.640

最简单的解决方案是使用[`num2cell`](http://www.mathworks.com/help/matlab/ref/num2cell.html)字符串并将结果连接起来：

```
y = [{'A1', 'B1'}; num2cell(f)]; 
```

### 例子

```
>> f = reshape(1:10, 2, [])';
>> y = [{'A1', 'B1'}; num2cell(f)]

y =
    'A1'    'B1'
    [ 1]    [ 2]
    [ 3]    [ 4]
    [ 5]    [ 6]
    [ 7]    [ 8]
    [ 9]    [10] 
```

# c# - 模拟鼠标事件

> ID：16174834
> 
> 赞同：2
> 
> 时间：2013-04-23T16:46:18.487
> 
> 标签：c#, winforms, mouse, virtual, mouseclick-event

我正在尝试使用以下代码模拟鼠标移动：`mouse_event(MOUSEEVENTF_MOVE,150 ,150, 0, 0);`

它工作正常，但 X 和 Y 坐标从我当前的光标位置开始。有没有办法让它们从屏幕的左上角开始？

我正在使用 c# 在 Windows 窗体应用程序中工作

如果你不知道我在问什么，我试着为你画出来；![在此处输入图像描述](https://i.stack.imgur.com/uhYGj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:07:44.363

MSDN 文档说您可以简单地[设置表单光标的位置](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.position.aspx)。只需这样做，然后发送您的鼠标事件。

```
System.Windows.Forms.Cursor.Position = new Point(0, 0); 
```

其次是你的`mouse_event`，应该做的伎俩。

# asp.net-mvc - MVC Web 应用程序与 iPad 不兼容

> ID：16174836
> 
> 赞同：0
> 
> 时间：2013-04-23T16:46:31.793
> 
> 标签：asp.net-mvc, ipad, logout

我目前正在维护一个基于 ASP MVC 框架的网络应用程序，最近几天，我一直在尝试解决一个奇怪的错误，但我基本上没有解决任何问题。

网络应用程序被命名为 www.buddyjet.com，它是一种基于当地社区的小型工人分组，帮助他们找到兼职工作。

看起来有点奇怪的是，当我使用 iPad 登录时，我根本无法与应用程序交互。每次点击任何链接都会让我退出，我真的不知道为什么会这样。在 Safari 中它运行良好，但是当我在 iPad 上使用 Chrome 时，它​​会发生这种奇怪的事情。

您是否知道为什么会发生这种情况，或者如何尝试更有效地调试它，而不是我到目前为止所做的事情（基本上什么都没有，不知道从哪里开始：/）。

提前谢谢大家！

# xslt - 如何在转换中用新元素替换 seome 元素

> ID：16174843
> 
> 赞同：1
> 
> 时间：2013-04-23T16:46:48.197
> 
> 标签：xslt, xslt-1.0

我想根据每个 XML Copy 转换的逻辑来修改 XML 文档：

输入 XML

```
<Request>
        <Parameters>

            <Parameter ID="SpecialDiscountPercent" Changed="false" Value="6.00"/>
            <Parameter ID="AccessoryDiscount" Changed="false" Value="0.00"/>
            <Parameter ID="AccessoryDiscountPercent" Changed="false" Value="0"/>
            <Parameter ID="BulkDiscountPercent" Changed="false" Value="4.0"/>
        </Parameters>
    </Product>
</Request> 
```

预期输出 XML

```
<Request>
        <Parameters>
            <Parameter ID="AccessoryDiscount" Changed="false" Value="0.00"/>
            <Parameter ID="AccessoryDiscountPercent" Changed="false" Value="0"/>
            <Parameter ID="totalDiscountPercent" Changed="false" Value="10.0"/>
        </Parameters>
    </Product>
</Request> 
```

如果输入 XML 文件中有任何 Parameter[@ID='SpecialDiscountPercent'] 或 Paramete[@ID='BulkDiscountPercent']，那么我希望在输出 XML 中有一个新的 XML Element Parameter[@ID=' totalDiscountPercent'] 将保存 'SpecialDiscountPercent' 和 'BulkDiscountPercent' 的总和。在这种情况下，Parameter[@ID='SpecialDiscountPercent'] 和 Paramete[@ID='BulkDiscountPercent'] 都不应出现在最终 XML 中。我如何做到这一点？感谢您的任何输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:01:54.640

有很多方法可以做到这一点，但这里有一种方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:strip-space elements="*" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Parameters">
    <xsl:variable name="specialDiscounts"
                  select="Parameter[@ID = 'SpecialDiscountPercent' or
                                    @ID = 'BulkDiscountPercent']" />

    <xsl:copy>
      <xsl:apply-templates select="@* | node()[count(. | $specialDiscounts) != 
                                               count($specialDiscounts)]" />
      <xsl:if test="$specialDiscounts">
        <Parameter ID="totalDiscountPercent" Changed="false"
                   Value="{format-number(sum($specialDiscounts/@Value), '0.0')}" />
      </xsl:if>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

在您的样本输入上运行时（一旦`</Products>`去除杂散），结果是：

```
<Request>
  <Parameters>
    <Parameter ID="AccessoryDiscount" Changed="false" Value="0.00" />
    <Parameter ID="AccessoryDiscountPercent" Changed="false" Value="0" />
    <Parameter ID="totalDiscountPercent" Changed="false" Value="10.0" />
  </Parameters>
</Request> 
```

# c# - 如何在实体框架中处理此层次结构

> ID：16174844
> 
> 赞同：2
> 
> 时间：2013-04-23T16:46:48.767
> 
> 标签：c#, sql-server, entity-framework, database-design

我有一种特殊类型的数据模型必须使用闭包表，因为几乎每个 material_composite 都是它自己树的根，但也可以在任何其他 material_composite 的树的层次结构中：

![sql_model](![数据模型向根元素而不是叶元素加权](https://i.stack.imgur.com/1f0vc.png)

我正在使用 SQL Server、Entity Framework 5 和 WPF，这里有两个主要用例：

1）浏览整个树

2) 浏览/修改单个 material_composite 的树。

我可以使用 SQL Server 的 FOR XML 返回整个树，但是每当我想查看层次结构中特定节点的详细信息/关系时，我都会在 db 上来回做很多事情。我更愿意使用 POCO 实体中的实际属性。

有没有人对如何使用实体框架从闭包表中获得任意深度的层次结构到应用程序有任何具体建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T09:24:03.363

我是 oracle，我可能会通过事先查询使用某种连接来获取您需要的信息。我认为您现在可以使用 CTE 在 sqlserver 中执行类似的操作

[http://technet.microsoft.com/en-us/library/ms186243(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)

# jquery - 调整容器内的图像大小？

> ID：16174853
> 
> 赞同：0
> 
> 时间：2013-04-23T16:47:07.190
> 
> 标签：jquery, css

使用 jquery 函数调整图像大小

`$('div.container').resizable({ aspectRatio:true})`

我将图像放在这样的 div 中：

```
.container { width:350px; height:auto; background-color:black}
.container img { width:100%; height:auto}

<div class=container>
    <img .../>
</div> 
```

但是正如你在这里看到的那样，[http://jsfiddle.net/Gz4ts/](http://jsfiddle.net/Gz4ts/) 底部总是有一个小边框。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T16:48:03.380

*但是正如你在这里看到的那样，[http://jsfiddle.net/Gz4ts/](http://jsfiddle.net/Gz4ts/)底部总是有一个小边框。我怎样才能解决这个问题？*

只需添加：

```
display: block; 
```

到`<img>`, 因为它们被默认替换为[内联元素](http://www.w3.org/TR/CSS2/visuren.html#inline-formatting)

[http://jsfiddle.net/Gz4ts/1/](http://jsfiddle.net/Gz4ts/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:49:06.167

你应该使用`max-width`而不是`width`

```
 .container img { max-width:100%; height:auto} 
```

# paypal - 贝宝沙盒商户账户错误

> ID：16174859
> 
> 赞同：0
> 
> 时间：2013-04-23T16:47:28.770
> 
> 标签：paypal, paypal-sandbox

我有一个网站，我正在尝试使用 php 脚本将 paypal 连接到该网站。php 构建查询字符串，然后附上查询字符串提交到[https://www.paypal.com/cgi-bin/webscr](https://www.paypal.com/cgi-bin/webscr)。我可以验证这工作正常。我尚未处理付款，但它以正确的数量和价格等指向 PayPal。

但是，当我更改为[https://www.sandbox.paypal.com/cgi-bin/webscr](https://www.sandbox.paypal.com/cgi-bin/webscr)时，我在尝试处理时出现错误，提示商家 PayPal 帐户存在问题。

我已经在 PayPal 沙盒上创建了几个测试帐户，但是从我可以告诉周围的情况来看，似乎我需要在沙盒中使用另一个商家帐户？如果是这样，我不知道该怎么做。我猜我需要更改查询字符串的“？business = *mycode* ”部分，但我不知道如何弄清楚将其更改为...

无论如何，我环顾了一会儿，找不到答案，谁能帮助或指导我到另一个回答这个问题的帖子（我看了但找不到，或者至少我不明白）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:42:07.330

从实时更改回沙盒时，如果使用非托管按钮，您只需要更改 URL 以反映您尝试测试的环境和业务变量的值。这可以设置为您的实际测试或真实卖家帐户的电子邮件地址或商家 ID。如果您尚未创建用于测试的帐户。您可以通过访问 PayPal 的开发人员站点并创建一个开发人员帐户来完成此操作。完成此操作后，您可以登录开发人员帐户并转到“应用程序”选项卡。进入此页面后，单击左侧沙盒帐户的链接，然后创建一个预配置的测试卖家帐户。这将生成一个链接到测试帐户的电子邮件地址。这将是您需要使用的电子邮件地址。如果这不起作用，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T19:41:17.310

Paypal 中用于沙盒测试的 API 密钥存在错误...这是由于在您发送购买请求时未在沙盒服务器上正确解码的损坏的密钥生成。

我尝试使用以下沙盒公共凭据，它对我来说很好用

```
username: sdk-three_api1.sdk.com
password: QFZCWN5HZM8VBG7Q
key: A-IzJhZZjhg29XQ2qnhapuwxIDzyAZQ92FRP5dqBzVesOkzbdUONzmOU 
```

但是我尝试了几次使用我自己创建的沙盒商家帐户....但无法确认成功。

# html - Bootstrap 模板未居中对齐

> ID：16174864
> 
> 赞同：0
> 
> 时间：2013-04-23T16:47:49.697
> 
> 标签：html, css, twitter-bootstrap

我有一个小问题。我正在构建一个模板，`twitter-bootstrap`我遇到了这两个问题。在这里你可以看到我的网站：

[http://jsfiddle.net/e9SGL/embedded/result/](http://jsfiddle.net/e9SGL/embedded/result/) - 全屏
[http://jsfiddle.net/e9SGL/](http://jsfiddle.net/e9SGL/) - 带代码的小程序

如您所见，该站点未与中心对齐。它从中心向右对齐 5px。我知道它被移动了，`padding: 5px;`但我想保留那个填充，因为没有它它看起来很奇怪。

第二个问题是文本`Mira's Koding`。它位于`#logo div`. 我想把它放在底部`#logo div`。这是我的代码：

**CSS to bootstrap 和我的 CSS。**

```
<link rel="stylesheet" href="css/wise.css" type="text/css">
<link rel="stylesheet" href="css/bootstrap.css" type="text/css">
<link rel="stylesheet" href="css/bootstrap-responsive.css" type="display"> 
```

**HTML**

```
<html>
    <div class="container-fluid" id="back">
        <div class="row-fluid" id="logo">
            <div class="span12">Mira's Koding</div>
        </div>
        <div class="row-fluid" id="menu">
            <div class="span12">
                <ul class="inline">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">My Work</a></li>
                </ul>
            </div>
        </div>
        <div class="row-fluid" id="content">
            <div class="span10" id="cleft">
                <h3>Example 1</h3>
                <p>No need of long text here.</p>
                <a href="#">Read more &rsaquo;&rsaquo;</a>
                <hr>
                <h3>Example 1</h3>
                <p>Lorem ipsum...</a>
            </div>
            <div class="span2" id="cright">
                <h3>Author</h3>
                <p><i class="icon-envelope"></i> my@mail.com</p>
            </div>
        </div>
    </div>
</html> 
```

**明智的.css**

```
::selection {
    color:#1f7bac;
}
::-moz-selection {
    color:#1f7bac;
}
html, body {
    background-color: #ebeaea;
    overflow: auto;
}
#back {
    background-color: #ebeaea;
}
#logo {
    background-color: #1f7bac;
    border-left: 1px solid #1f7bac;
    border-right: 1px solid #1f7bac;
    height: 50px;
    font-size: 28px;
    padding: 5px;
    color: white;    
}
#menu {
    background-color: #fff;
    border-left: 1px solid #1f7bac;
    border-right: 1px solid #1f7bac;
    border-bottom: 1px solid #1f7bac;
    padding: 5px;
    height: 20px;
    margin-bottom: 20px;
}
#content {
    background-color: white;
    border: 1px solid #1f7bac;
    padding: 5px;
}
.footer {
    height: 100px;
    background-color: #1f7bac;
    position:fixed; 
    bottom:0;
    width: 100%;
} 
```

bootstrap.css 和 bootstrap-responsive.css 未编辑。它是默认的引导 CSS。

**非常感谢。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:56:16.307

可能有很多方法可以解决问题 #1，但这个方法可以解决问题：

```
.row-fluid {
    width: auto;
} 
```

至于问题 #2，我没有看到 ID 为“header”的 div，但在我看来，您只需将 #logo 移到 #menu 下方即可。

编辑：我看到一个 div#head。也许这就是你的意思。但是，在 Firefox 中，#logo 低于 #head。请说清楚。

再次编辑：你可以这样做：

```
#logo {position: relative;}
#logo > div {position: absolute; bottom: 0;} 
```

同样，您有很多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:20:19.440

删除所有混淆和不必要的代码，只需放置

`.container, .container-fluid {margin: 0 auto;}`

此代码将使您的页面居中对齐。

您的第二个问题很简单，只需深入研究 css。

希望能帮助到你。

# sql - 获取一个人在特定日期的最后一个动作

> ID：16174867
> 
> 赞同：0
> 
> 时间：2013-04-23T16:47:58.990
> 
> 标签：sql, sql-server, greatest-n-per-group

我有一个包含以下行的表：

```
 NAME                        RFID                  ACTION    TIME       DATE

Kashif Islam            E2001026770D00742340248A    OUT  12:40:00   1/30/2013
Dr.Arshad Ali Shahid    E2001026770D0212267009D3    IN   13:52:00   1/30/2013
Qasim Mehmood           E2001026770D018223202774    IN   13:52:00   1/30/2013
M.Bilal Khan            E2001026770D009522402D80    IN   13:52:00   1/30/2013
Abdul Hameed            E2001026770D0181248019B8    IN   13:52:00   1/30/2013
Usman Tariq             E2001026770D00862570111D    IN   13:52:00   1/30/2013
Dr. Asif Gondal         E2001026770D012426600B32    IN   13:52:00   1/30/2013
Dr.Arshad Ali Shahid    E2001026770D0212267009D3    OUT  13:52:00   1/30/2013
Dr.Arshad Ali Shahid    E2001026770D0212267009D3    IN   13:53:00   1/30/2013
Dr.Arshad Ali Shahid    E2001026770D0212267009D3    OUT  13:53:00   1/30/2013
Dr.Arshad Ali Shahid    E2001026770D0212267009D3    IN   13:53:00   1/30/2013
Dr.Arshad Ali Shahid    E2001026770D0212267009D3    OUT  13:53:00   1/30/2013
Dr.Arshad Ali Shahid    E2001026770D0212267009D3    IN   13:54:00   1/30/2013
Dr.Arshad Ali Shahid    E2001026770D0212267009D3    OUT  13:54:00   1/30/2013
Aamir Hafeez            E2001026770D01952510155B    IN   13:55:00   1/30/2013
Amjad Ali Anjum         E2001026770D024125401476    IN   13:55:00   1/30/2013
Amjad Ali Anjum         E2001026770D024125401476    OUT  13:56:00   1/30/2013
Dr. Asif Gondal         E2001026770D012426600B32    OUT  13:56:00   1/30/2013
Arif Shah               E2001026770D01852370206D    IN   13:56:00   1/30/2013
Fida ul Hassan          E2001026770D02112720095C    IN   13:56:00   1/30/2013 
```

现在我想获取`ACTION`每个人在给定日期的最新信息，例如：

```
 1/30/2013   13:56:00    OUT Amjad Ali Anjum
    1/30/2013   13:56:00    IN  Arif Shah
    1/30/2013   13:56:00    OUT Dr. Asif Gondal
    1/30/2013   13:54:00    OUT Dr.Arshad Ali Shahid
    1/30/2013   13:56:00    IN  Fida ul Hassan 
```

我正在使用以下查询来获取它，但我没有得到正确的结果：

```
WITH CTE AS (
SELECT 
   row_number() over (partition by personname order by date) rn,
   date,action,time,
   personname

FROM
   AISDb)
SELECT date,time,action,
       personname
FROM CTE WHERE RN = 1 AND datestamp = '1/30/2013' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T16:52:50.617

我认为您只是将过滤器放在了错误的位置，并且 over() 子句中的 order by 都是错误的。

```
;WITH CTE AS (
  SELECT 
   row_number() over (partition by personname order by time DESC) rn,
   date,action,time,
   personname
FROM
   AISDb
WHERE datestamp = '20130130')
SELECT date,time,action,
       personname
FROM CTE WHERE RN = 1; 
```

[SQL小提琴演示](http://sqlfiddle.com/#!3/335e4/3)

如果您需要在 IN/OUT 以某种方式同时记录的情况下打破平局，一种方法是打破平局，假设 OUT 最后发生：

```
;WITH CTE AS (
  SELECT 
   row_number() over (partition by personname order by time DESC, action DESC) rn,
   date,action,time,
   personname
FROM
   AISDb
WHERE datestamp = '20130130')
SELECT date,time,action,
       personname
FROM CTE WHERE RN = 1; 
```

[SQL小提琴演示](http://sqlfiddle.com/#!3/335e4/13)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:24:17.120

经典[的每组最大 n](/questions/tagged/greatest-n-per-group "显示标记为“每组最大数”的问题")问题。一种可能的解决方案：

```
select w.* 
from w
inner join (
    select name, max(time) time
    from w
    where date = '2013-01-30'
    group by Name
) sel on w.Name = sel.Name 
     and w.Time = sel.Time
where w.date = '2013-01-30' 
```

[捎带 Aaron 的小提琴： http](http://sqlfiddle.com/#!3/335e4/11) ://sqlfiddle.com/#!3/335e4/11

几点考虑：

*   你真的应该*有*一个字段来保存日期和时间。过滤、索引、排序，所有这些都更简单。
*   如果您有 TIE（同一名称同时进行两个交易），此解决方案将同时带来两者。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T17:56:10.157

正如人们的回答表明您需要将日期/时间逻辑的顺序更改为 Desc 以便您首先获得最新的。另一件事是您仅在 CTE 中按人名进行分区，因此无论日期如何，1 值都将是最新值，然后您将日期限制在外部，因此您可能没有匹配的值。您可以通过几种方式解决此问题，但我只是将日期添加到分区逻辑中。

```
WITH    CTE AS 
(
        SELECT  row_number() over (partition by personname, [date]  order by [time] desc, rn desc) rn,
                [date],
                [action],
                [time],
                personname
        FROM   (Select  row_number() over (Order By (Select Null)) rn,
                        [date],
                        [action],
                        [time],
                        personname
                FROM    AISDb)
)
SELECT  [date],
        [action],
        [time],
        personname
FROM    CTE 
WHERE   RN = 1 
AND     datestamp = '1/30/2013' 
```

为了绕过关系，我添加了一个嵌套表，该表根据（选择 Null）获取 row_number。这是一个 janky 解决方法，将获得默认排序。如果这不起作用，您将无法使用当前输入做您想做的事情，您应该添加一个标识列来捕获插入的顺序。

# spring - Cloudfoundry：使用 Spring 和 RabbitMQ 部署独立应用程序

> ID：16174871
> 
> 赞同：1
> 
> 时间：2013-04-23T16:48:07.230
> 
> 标签：spring, rabbitmq, cloud-foundry

我正在尝试将独立应用程序部署到 CloudFoundry。我`ApplicationContext`在我的方法中使用 Spring`main`来初始化 Spring，并且我有一个简单的 Bean 来处理与 RabbitMQ 的消息传递。

在`spring.xml`我配置了 RabbitMQ 和 pom 文件中，我添加了必要的依赖项`cglib-nodep`，`spring-rabbit`和`cloudfoundry-runtime`. 我进一步使用该`maven-assembly-plugin`插件创建一个包含所有库的单个 jar 文件，然后使用`vmc`-tool 将其部署到 cloudfoundry。

当我将`jar`-file 部署到 CloudFoundry 时，出现以下错误：

```
Exception in thread "main" org.springframework.beans.factory.parsing.BeanDefinitionParsingException:
Configuration problem: Unable to locate Spring NamespaceHandler for XML schema namespace
[http://www.springframework.org/schema/context]

Offending resource: class path resource [spring.xml]

[stacktrace ommited] 
```

这是我的`spring.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:rabbit="http://www.springframework.org/schema/rabbit"
    xmlns:cloud="http://schema.cloudfoundry.org/spring"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/rabbit
        http://www.springframework.org/schema/rabbit/spring-rabbit-1.0.xsd
        http://schema.cloudfoundry.org/spring
        http://schema.cloudfoundry.org/spring/cloudfoundry-spring-0.7.xsd">

    <context:component-scan base-package="mypackage" />

    <!-- Obtain a connection to the RabbitMQ via cloudfoundry-runtime: -->
    <cloud:rabbit-connection-factory id="connectionFactory"/>

    <!-- Set up the AmqpTemplate/RabbitTemplate: -->
    <rabbit:template connection-factory="connectionFactory"/>

    <!-- Request that queues, exchanges and bindings be automatically
         declared on the broker: -->
    <rabbit:admin connection-factory="connectionFactory"/>

    <!-- Declare the "messages" queue: -->
    <rabbit:queue name="messages" durable="true"/>
</beans> 
```

以及 maven-assembly-plugin 的配置：

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <mainClass>at.ac.tuwien.infosys.dse2013s.group17.allocator.ui.StartUpAllocator</mainClass>
            </manifest>
        </archive>
        <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
    </configuration>
    <executions>
        <execution>
          <id>make-assembly</id> <!-- this is used for inheritance merges -->
          <phase>package</phase> <!-- bind to the packaging phase -->
          <goals>
            <goal>single</goal>
          </goals>
        </execution>
    </executions>
</plugin> 
```

上述错误的原因可能是什么？我配置 maven-assembly-plugin 的方式有问题，还是 spring.xml 中真的有问题？

**更新**

我能够通过将 spring-context 依赖项作为托管依赖项添加到我的根 pom 中，然后在没有版本元素的情况下从我的模块中引用它来解决该错误。现在我遇到了同样的错误，但这次异常抱怨[http://schema.cloudfoundry.org/spring](http://schema.cloudfoundry.org/spring)模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T09:26:25.797

**[更新]**我建议看一下[cf-maven-plugin](https://github.com/cloudfoundry/vcap-java-client/tree/master/cloudfoundry-maven-plugin#deploying-a-stand-alone-spring-application)，它可以更轻松地部署到 CloudFoundry，因此不再需要直接使用 vmc 工具。GitHub 页面解释了如何使用此插件部署**普通**应用程序和**独立**应用程序，还解释了如何将 appassembler-maven-plugin 用于独立应用程序。这篇[博文](http://blog.springsource.org/2011/09/22/rapid-cloud-foundry-deployments-with-maven/)对于入门也很有用。 **[/更新]**

事实证明，我以错误的方式将应用程序部署到 CloudFoundry。我使用的是`maven-assembly-plugin`，它将所有依赖项的类文件解压缩到 jar 文件中。事实上，我不得不使用`appassembler-maven-plugin`：

```
<plugin>
     <groupId>org.codehaus.mojo</groupId>
     <artifactId>appassembler-maven-plugin</artifactId>
     <version>1.1.1</version>
     <executions>
         <execution>
             <phase>package</phase>
             <goals>
                 <goal>assemble</goal>
             </goals>
             <configuration>
                 <assembledirectory>target</assembledirectory>
                 <programs>
                     <program>
                         <mainClass>my.package.myclass</mainClass>
                     </program>
                 </programs>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

然后我从`target/`文件夹中将应用程序部署到 CloudFoundry

```
vmc push <myappname> --path=appassembler 
```

作为运行命令，我需要在`appassembler/bin`文件夹中选择运行脚本的名称。例如`bin/start-up-myapp`.

# r - 将数据框与可预测的错别字合并

> ID：16174874
> 
> 赞同：3
> 
> 时间：2013-04-23T16:48:18.760
> 
> 标签：r, dataframe, merge, gsub

我需要合并两个数据框。第一个看起来像这样：

```
> df1 <- data.frame(Artist = c("Vincent van ", "Vincent van ", "Theo van Gogh", "Alexandre", "Alexandre"), Location = c("a","a","a","b","c"), time = c(1,2,1,1,1))
> df1
         Artist Location time
1  Vincent van         a    1
2  Vincent van         a    2
3 Theo van Gogh        a    1
4     Alexandre        b    1
5     Alexandre        c    1 
```

第二个：

```
> df2 <- data.frame(Artist = c("Vincent van Gogh", "Theo van Gogh", "Alexandre Dumas", "Alexandre Dumas"), HomeNumber = c(123,234,456,789), Location = c( "a","a","b","c"))
> df2
            Artist HomeNumber Location
1 Vincent van Gogh        123        a
2    Theo van Gogh        234        a
3  Alexandre Dumas        456        b
4  Alexandre Dumas        789        c 
```

我想要这个数据框：

```
> df3 <- data.frame(Artist = c("Vincent van ", "Vincent van ", "Theo van Gogh", "Alexandre", "Alexandre"), Location = c("a","a","a","b","c"), time = c(1,2,1,1,1), HomeNumber = c(123,123,234,456,789))
> df3
         Artist Location time HomeNumber
1  Vincent van         a    1        123
2  Vincent van         a    2        123
3 Theo van Gogh        a    1        234
4     Alexandre        b    1        456
5     Alexandre        c    1        789
> 
```

合并仅适用于 Theo：

```
 > df3 <- merge(df1, df2, by.x = "Artist", by.y = "Artist", all.x =TRUE)
> df3
         Artist Location.x time HomeNumber Location.y
1     Alexandre          b    1         NA       <NA>
2     Alexandre          c    1         NA       <NA>
3 Theo van Gogh          a    1        234          a
4  Vincent van           a    1         NA       <NA>
5  Vincent van           a    2         NA       <NA> 
```

原因有两个： (a) 文森特在`df1`. (b) 亚历山大是大仲马和大仲马的名字。

我可以用 处理（a）`df1$Artist <- gsub("Vincent van $","Vincent van Gogh", df1$Artist)`，但我的数据实际上非常大，在执行之前`gsub`我必须先知道文森特的全名。一种可能的解决方案是`grep("Vincent van "...`在 df2 中使用，构建一个函数，如果结果向量的长度是`1`我将使用`gsub`返回`df2$Artist`的 to `df1`。我不知道该怎么做。

(b) 对我来说有点棘手。我能想到的一个解决方案（但不能编码）是首先使用一个`if`函数从一个位置选择 Alexandre，然后使用 (a) 的解决方案来`gsub`命名。

我认为解决 (a) 和 (b) 会返回我想要`df3`的 . 你们知道如何有效地合并这些数据框吗？谢谢！

编辑：请注意，这`Alexandre`实际上是两个不同的单位。因此，当合并两者时，应该有它们关联的 HomeNumber 和 Location。`Vincent`是一个单一的单位，但在时间上有两个观察。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:39:42.610

您希望该结果被以下事实破坏：您必须在每个数据框中有两行您想要考虑为具有相同的 id，即`Alexandre`行。JOIN 过程将使其成为 2 x 2 匹配：

```
df2$short <- substr(df2$Artist, 1,7)
df1$short <- substr(df1$Artist, 1,7)
(dfmer <- merge(df1, df2, by="short") )
#-----
    short      Artist.x Location.x time         Artist.y HomeNumber Location.y
1 Alexand     Alexandre          b    1  Alexandre Dumas        456          b
2 Alexand     Alexandre          b    1  Alexandre Dumas        789          c
3 Alexand     Alexandre          c    1  Alexandre Dumas        456          b
4 Alexand     Alexandre          c    1  Alexandre Dumas        789          c
5 Theo va Theo van Gogh          a    1    Theo van Gogh        234          a
6 Vincent  Vincent van           a    1 Vincent van Gogh        123          a
7 Vincent  Vincent van           a    2 Vincent van Gogh        123          a 
```

如果您想挑选第一个实例，您可以使用 !duplicated on location 和 time：

```
> dfmer[!duplicated( dfmer[, c("Location.x", "time")]), ]
    short      Artist.x Location.x time         Artist.y HomeNumber Location.y
1 Alexand     Alexandre          b    1  Alexandre Dumas        456          b
3 Alexand     Alexandre          c    1  Alexandre Dumas        456          b
5 Theo va Theo van Gogh          a    1    Theo van Gogh        234          a
7 Vincent  Vincent van           a    2 Vincent van Gogh        123          a 
```

为了回应关注（以前没有提出需要将 Location 添加为链接变量：

```
> (dfmer <- merge(df1, df2, by=c("short", "Location") ) )
    short Location      Artist.x time         Artist.y HomeNumber
1 Alexand        b     Alexandre    1  Alexandre Dumas        456
2 Alexand        c     Alexandre    1  Alexandre Dumas        789
3 Theo va        a Theo van Gogh    1    Theo van Gogh        234
4 Vincent        a  Vincent van     1 Vincent van Gogh        123
5 Vincent        a  Vincent van     2 Vincent van Gogh        123 
```

# android - 在 Android 中使用 DOM 创建 XML 文件

> ID：16174890
> 
> 赞同：0
> 
> 时间：2013-04-23T16:49:08.167
> 
> 标签：android, xml, dom

我正在尝试使用 Dom 在 Android 中生成 XML 文件，但是当我执行应用程序时，虽然我也没有收到错误，但没有生成 XML 文件。请帮帮我。

```
package com.example.samplexml;

import java.io.File;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.w3c.dom.Element;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
    TextView  myTextView;
     EditText E1;
     EditText E2;
     EditText E3;
   @Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

   Button b= (Button) findViewById(R.id.button1);
    E1 = (EditText) findViewById(R.id.editText1);
    E2 = (EditText) findViewById(R.id.editText2);
    E3 = (EditText) findViewById(R.id.editText3);

   b.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View arg0) { 

            DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder;
            try {
                docBuilder = docFactory.newDocumentBuilder();

            // root elements
            Document doc = docBuilder.newDocument();
            Element rootElement = doc.createElement("Class");
            doc.appendChild(rootElement);

            // staff elements
            Element student = doc.createElement("Student");
            rootElement.appendChild(student);

            // firstname elements
            Element firstname = doc.createElement("firstname");
            firstname.appendChild(doc.createTextNode(E1.getText().toString()));
            student.appendChild(firstname);

            Element Email = doc.createElement("Email");
            Email.appendChild(doc.createTextNode(E2.getText().toString()));
            student.appendChild(Email);

            // nickname elements
            Element Roll = doc.createElement("Roll_No");
            Roll.appendChild(doc.createTextNode(E3.getText().toString()));
            student.appendChild(Roll);

                    // write the content into xml file
            TransformerFactory transformerFactory = TransformerFactory.newInstance();

                Transformer transformer = transformerFactory.newTransformer();

            DOMSource source = new DOMSource(doc);
            StreamResult result = new StreamResult(new File("C:\\f.xml"));

                    transformer.transform(source, result);

                }
             catch (ParserConfigurationException e) {

                e.printStackTrace();
            }
             catch (TransformerException e) {

                    e.printStackTrace();}
            Toast.makeText(getApplicationContext(), 
                    "XML generated", Toast.LENGTH_LONG).show();

                                }
    }); }
}

    enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T22:33:56.857

这是你的解决方案

```
package com.example.dom_tutorial;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

import org.w3c.dom.*;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import android.widget.Toast;
import java.io.FileOutputStream;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        CreateBlankDocument();
    }
    public void CreateBlankDocument(){
        Toast.makeText(getBaseContext(),
                "Creating Blank Document",
                Toast.LENGTH_LONG).show();
        try{
            //Create instance of DocumentBuilderFactory
            DocumentBuilderFactory factory = 
                    DocumentBuilderFactory.newInstance();
             //Get the DocumentBuilder
            DocumentBuilder parser = factory.newDocumentBuilder();
             //Create blank DOM Document
            Document doc=parser.newDocument();
            //create the root element
            Element root=doc.createElement("root");
            //all it to the xml tree
            doc.appendChild(root);
            //create a comment
            Comment comment=doc.createComment("This is a comment");
            //add in the root element
            root.appendChild(comment);
            //creat child element
            Element childelement=doc.createElement("child");
            //Add the attribute to the child
            childelement.setAttribute("value", "1");
            root.appendChild(childelement);

            TransformerFactory transformerfactory=
                    TransformerFactory.newInstance();
            Transformer transformer=
                    transformerfactory.newTransformer();

            DOMSource source=new DOMSource(doc);
            FileOutputStream _stream=getApplicationContext().openFileOutput("NewDom.xml", getApplicationContext().MODE_WORLD_WRITEABLE);
            StreamResult result=new StreamResult(_stream);
            transformer.transform(source, result);
            Toast.makeText(getBaseContext(),
                    "Done File created",
                    Toast.LENGTH_LONG).show();
        }catch(Exception ex){
            ex.printStackTrace();
        }
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T13:48:16.607

看来你包括

```
 StreamResult result = new StreamResult(new File("C:\\f.xml")); 
```

android中没有C:\f.xml这样的目录。使用 android 的 Environment 类来访问 SDCard 并在那里写你的文件

# postgresql - postgresql：层次树的实现

> ID：16174892
> 
> 赞同：0
> 
> 时间：2013-04-23T16:49:19.070
> 
> 标签：postgresql, marker, hierarchical-clustering, quadtree

我一直在努力解决 1000 多个标记的标记聚类问题（应该放在谷歌地图上）。我不太热衷于使用所有标记渲染大型 JSON 结构，也不喜欢使用 PostGIS 进行一些复杂的服务器“地理”计算。

我想出的解决方案是将世界地图划分为某种分层空间树，比如说[四叉树](http://en.wikipedia.org/wiki/Quadtree)，其中我的数据库中的每个点都将在该树中分配有“坐标”。这些坐标是具有 的字符串`on position_x index_of_tile in tier_x`，例如'031232320012'。字符串的长度取决于将为前端地图启用的缩放级别数。基本上，如果用户移动或缩放地图，我将使用当前缩放级别和视口坐标作为参数启动 Ajax GET 请求。然后在后端我计划构建一个应该指向“给定缩放级别的视口”的字符串，例如'02113'，我想在树坐标列中找到所有具有此前缀（'02113'）的点.

编辑：我还需要快速 GROUP BY，例如`SELECT count(*) from points GROUP BY left(coordinates, 5);`

我的问题是如何尽可能快地执行这些操作？我的数据库是 PostgreSQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T17:05:21.543

> 然后在后端我计划构建一个应该指向“给定缩放级别的视口”的字符串，例如'02113'，我想在树坐标列中找到所有具有此前缀（'02113'）的点.

只要您在索引列中查看字符串的最左侧五个（或六个或七个）字符，普通索引就应该在任何现代 dbms 上表现良好。

```
SELECT ...
...
WHERE column_name LIKE '02113%'; 
```

在 PostgreSQL 中，您还可以[在表达式上构建索引](http://www.postgresql.org/docs/9.2/static/indexes-expressional.html)。所以你可以在前五个字符上创建一个索引。

```
CREATE INDEX your_index_name ON your_table (left(column_name, 5)); 
```

如果有三四个这样的索引，我希望 PostgreSQL 的查询优化器能够选择正确的索引。（5个字符一个，6个字符一个，等等）

* * *

我建立了一个表，并用一百万行随机数据填充了它。

在下面的查询中，PostgreSQL 的查询优化器确实选择了正确的索引。

```
explain analyze
select s
from coords
where left(s, 5) ='12345'; 
```

它在 0.1 毫秒内返回。

我还使用 GROUP BY 进行了测试。再次，PostgreSQL 的查询优化器选择了正确的索引。

```
"GroupAggregate  (cost=0.00..62783.15 rows=899423 width=8) (actual time=91.300..3096.788 rows=90 loops=1)"
"  ->  Index Scan using coords_left_idx1 on coords  (cost=0.00..46540.36 rows=1000000 width=8) (actual time=0.051..2915.265 rows=1000000 loops=1)"
"Total runtime: 3096.914 ms" 
```

像 GROUP BY 子句中的表达式`left(name, 2)`将要求 PostgreSQL 接触索引中的每一行，如果不是表中的每一行的话。这就是为什么我的查询需要 3096 毫秒；它必须触及索引中的一百万行。但是你可以从 EXPLAIN 计划中看到它使用了索引。

通常，我希望地理应用程序对 PostGIS 表使用边界框来减少您访问的行数。如果你的四叉树实现不能做得比这更好，我会坚持使用 PostGIS 足够长的时间来成为它的专家。（在你花一些时间之前，你不会确定它不能完成这项工作。）

# javascript - 在自动完成表单上输入 onkeydown 函数

> ID：16174898
> 
> 赞同：1
> 
> 时间：2013-04-23T16:49:31.790
> 
> 标签：javascript, html, function, addeventlistener, onkeydown

当我在表单上按 Enter 键时，我的代码中的所有内容都正常工作，该函数正确执行......但是，当我在表单的自动完成部分按 Enter 键时，什么也没有发生，所以我必须再次按 Enter 键启用...

这是我的代码：

```
var element = document.getElementById("form");
element.addEventListener("keydown", dothis, false); 
```

和功能：

```
function dothis(e){ 
  if(e.keyCode==13){  
    alert('yey');
  }
} 
```

反正有这个工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:53:35.353

添加一个“onKeyUp”侦听器以处理第一次按 Enter 时未处理的任何内容：

> element.addEventListener("keyup", dothat, false);

# charts - 如何在 Microsoft 图表控件中获取绘图区域的大小

> ID：16174901
> 
> 赞同：1
> 
> 时间：2013-04-23T16:49:42.017
> 
> 标签：charts, mschart, microsoft-chart-controls, dundas

我在 Windows 应用程序中使用 MS 图表控件。

我正在动态绘制各种系列，用户可以指定每个系列应该是哪种图表类型。这会导致饼图与折线图/样条图等相结合的情况。

当至少一个系列被指定为饼图时，我会动态添加图表区域和图例，为这些系列中的每一个提供自己的图表区域，而所有“基本”图表类型（线（区域）/样条线（区域）/等。 ) 合并为一个图表区域。

问题是，当添加 10 多个以饼图为主的系列时，图表的大小会被调整得如此之小，以至于它们变得毫无用处。我的想法是动态增加图表控件的大小（从而增加其中所有图表区域的大小）。我的问题是，除非我明确设置，否则 InnerPlotPosition 的宽度和高度始终为零。

有没有办法确定绘图区域的大小（以像素或百分比为单位）（我可以乘以图表控件的大小来获得像素）等，即使没有明确设置？这将允许我增加图表控件的大小，直到达到某个最小值（并且希望是可读的）值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T00:47:56.913

我发现 InnerPlotPosition 至少在 PostPaint 事件回调中设置。您可能会在计算地块面积之前检查该属性。

这有效：

```
var c = new Chart();
c.PostPaint += c_PostPaint;
// Do whatever to setup the chart
// Then in my case I'm saving the image which causes rendering
c.SaveImage(myFileName);

void c_PostPaint(object sender, ChartPaintEventArgs e)
{
    var ipp = e.Chart.ChartAreas[0].InnerPlotPosition; // Values populated here
} 
```

# html - HTML5 Not working in packaged app

> ID：16174904
> 
> 赞同：6
> 
> 时间：2013-04-23T16:49:49.183
> 
> 标签：html, google-chrome-app

使用此示例[http://www.w3schools.com/tags/tag_datalist.asp](http://www.w3schools.com/tags/tag_datalist.asp) - 我在浏览器中没有问题，但它似乎不适用于打包的应用程序。

我在 Chrome v26 上。版本 26.0.1410.64 m。在 Windows 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T23:27:29.207

不确定“似乎不起作用”是什么意思，但[这个错误](https://code.google.com/p/chromium/issues/detail?id=161302)表明 Chrome 中的扩展数据列表也存在问题。我在那里添加了指向您问题的链接，以便在修复后，我们可以更新此问题。

# c# - xaml.cs 中用于从本地化 resx 资源更改 xaml 中的文本的方法

> ID：16174909
> 
> 赞同：0
> 
> 时间：2013-04-23T16:50:12.480
> 
> 标签：c#, windows-phone-7, xaml, resx

我有一个 WP7 应用程序，在底部显示 3 个缩略图，在屏幕中央显示一个大缩略图。单击每个缩略图时，会触发 xaml.cs 文件中的一个方法，替换大图像的源以显示缩略图的放大版本。

![在此处输入图像描述](https://i.stack.imgur.com/4txBH.png)

现在，我在大图像的底部添加了一个文本框，用于显示描述每个图像的文本。对于每个语言环境（en、fr），此类文本作为单独的字符串存储在 RESX 文件中。

![Visual Studio 2010 资源视图](https://i.stack.imgur.com/ipNZi.png)

在现有的 3 种方法中，通过单击 3 个缩略图中的每一个来更新大图像，我想添加一行来更新文本框的文本，显示 Windows Phone 7 当前区域设置的正确字符串。

```
private void thumb1_Click(object sender, RoutedEventArgs e)
        {
            Uri uri = new Uri("/myApp;component/Images/Dialog%20-%20Blocked%20Sites.png", UriKind.Relative);
            ImageSource newSource = new System.Windows.Media.Imaging.BitmapImage(uri);
            imgTarget.Source = newSource;
            imgDesc.Text = "placeholderDesc1";
        } 
```

我知道如何使用绑定来显示 XAML 中 resx 文件中的本地化文本，但我不知道 xaml.cs 代码文件中的语法。你能帮忙吗？

```
<TextBlock Height="67" Name="appDesc" Style="{StaticResource PhoneTextTitle1Style}" Text="{Binding Path=LocalizedResources.appDesc, Source={StaticResource LocalizedStrings}}" FontSize="22" TextWrapping="Wrap" /> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:33:00.017

尝试

```
AppResources.appDesc 
```

而已

# url - 网址是如何工作的？

> ID：16174912
> 
> 赞同：1
> 
> 时间：2013-04-23T16:50:27.293
> 
> 标签：url, ip

我有一个指向特定页面的 URL `http://stackoverflow.com/questions/123`。假设 stackoverflow.com 是 123.12.12.12。DNS识别IP后如何将特定的URL映射到特定的页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T16:51:42.167

它没有。DNS 只是告诉您要连接的 IP 地址。将 URL 映射到页面是 Web 服务器的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T16:54:29.483

DNS 不会将 URL 映射到页面，它仅用于查找主机/域名。URL 通过集成到 Web 服务器中的路由映射到页面。

例如，客户端计算机有一个 URL，并在 DNS 中查找主机名部分，这将返回 IP。然后计算机连接到协议特定端口上的 IP，并通过该连接发送 HTTP 请求。然后服务器在内部处理来自 HTTP 请求的 URL 并返回适当的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T16:59:12.677

一旦您知道服务器的 ip，要访问的特定资源在 HTTP（在 HTTP 的情况下）请求中给出。

使用您的示例中的案例，GET 请求将是这样的：

```
GET /questions/123 HTTP/1.1   <- Here you have the specific resource
Host: stackoverflow.com       <- Here you have the host 
```

DNS 将主机 stackoverflow.com 转换为 123.12.12.12

# java - SQLite JDBC 类未找到异常

> ID：16174923
> 
> 赞同：1
> 
> 时间：2013-04-23T16:51:28.160
> 
> 标签：java, sqlite, jdbc, ivy

我一直在尝试使用 Xerial 的 SQLite jdbc 类。每次我尝试运行我拥有的东西时，它都会失败，给我以下错误：

```
java.lang.ClassNotFoundException: org.sqlite.Driver 
```

我正在使用 Ivy，并且在我的`ivy.xml`文件中有以下内容。

```
<dependency org="org.xerial" name="sqlite-jdbc" rev="3.7.2"/> 
```

这包括我的类路径中的 sqlite-jdbc-3.7.2.jar 文件。我也尝试手动添加它，但无济于事。

运行此命令的命令还包含命令行中的 jar：

```
java -cp ... sqlite-jdbc-3.7.2.jar ... 
```

我仍然在以下行中发现类未找到异常：

```
Class.forName("org.sqlite.Driver"); 
```

我试过四处寻找这个特定的问题，但似乎大多数时候它只是通过在类路径中包含 jar 来解决，这不应该是这里的问题，因为 Eclipse 在类路径中列出了 jar。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T17:01:09.060

你能确认 jar 版本`sqlite-jdbc-3.7.2`有 class`org.sqlite.Driver`吗？

您可以通过解压缩jar文件并检查解压缩的文件夹是否具有目录结构来检查它`org\sqlite\Driver.class`？

我认为 sqlLite 驱动程序名称是`org.sqlite.JDBC`and `not org.sqlite.Driver`。[来源](https://bitbucket.org/xerial/sqlite-jdbc)。

# jquery - 将默认选定索引值设置为 -1 jquery easy ui 组合框

> ID：16174925
> 
> 赞同：0
> 
> 时间：2013-04-23T16:51:35.687
> 
> 标签：jquery, combobox, jquery-easyui

我在这样的页面上有一个[jQuery EasyUI 组合框](http://www.jeasyui.com/documentation/combobox.php)：

```
<select id="subject_selection" class="easyui-combobox">
    <option value="math">Math</option>
    <option value="physics">Physics</option>
    <option value="chemistry">Chemistry</option> 
    <option value="biology">Biology</option>
</select> 
```

如果没有设置值，我正在尝试将默认选定值的索引设置为 -1，我尝试将属性设置为`selectedIndex`-1，就像元素一样，但这仍然不起作用。我不想让用户能够在组合框中选择和清空值，因此我不想添加这个：`selectedIndex="-1"``select`

```
<option value=""></option> 
```

在我的组合框中。有谁知道我怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:54:27.403

> “你正试图在一个圆孔中安装一个方钉。”

没有 -1 索引之类的东西，因为您不能选择不存在的东西。添加空选项并防止用户使用 JavaScript 选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:58:07.440

如果组合框中没有项目，您可以禁用组合框或设置警报消息，而不是将 selectedIndex 设置为 -1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T06:30:11.280

如果您想将数学作为默认值，您可以尝试这样的事情

```
<select id="subject_selection" class="easyui-combobox">
   <option value="math" selected="selected">Math</option>
   <option value="physics">Physics</option>
  <option value="chemistry">Chemistry</option> 
  <option value="biology">Biology</option>
</select> 
```

只需将`selected="selected"`您希望被选为默认的选项

或者你可以这样做

```
<select id="subject_selection" class="easyui-combobox" data-options="onLoadSuccess : function(){$(this).combobox('setValue','biology');}">
  <option value="math">Math</option>
  <option value="physics">Physics</option>
  <option value="chemistry">Chemistry</option> 
  <option value="biology">Biology</option> 
```

只需根据需要更改默认值即可

只需使用下面的链接测试代码

[http://jsfiddle.net/kapasaja/3v666ncg/](http://jsfiddle.net/kapasaja/3v666ncg/)

[http://jsfiddle.net/kapasaja/few3xgtj/](http://jsfiddle.net/kapasaja/few3xgtj/)

# c# - 如何从其他方法访问我的控件

> ID：16174936
> 
> 赞同：2
> 
> 时间：2013-04-23T16:52:19.887
> 
> 标签：c#, class, variables, object, scope

我正在制造太空侵略者，我希望我的子弹从我的大炮所在的位置出来。当我按空格键时，子弹会发射，但我每次按空格键时都需要它能够访问我的 cannonX 的位置，它不允许我访问它的信息。

```
 public void tsbtnStart_Click(object sender, EventArgs e)
    {

        // Make invader

            Invader invaderX = new Invader();
            pnlBattleField.Controls.Add(invaderX);

        // Mke UFO

            Ufo ufoX = new Ufo();
            pnlBattleField.Controls.Add(ufoX);

        // Make cannon
            Cannon cannonX = new Cannon(this.pnlBattleField.Height - 80);

        if (made == false)
        {
            pnlBattleField.Controls.Add(cannonX);
            made = true;

        }
        Point location = cannonX.PointToScreen(Point.Empty);

        tmrClock.Interval = 200;
        tmrClock.Start();
        tmrClock2.Interval = 100;
        tmrClock2.Start();
    }

    public void Form1_KeyPress(object sender, KeyPressEventArgs e)
    {

        if (e.KeyChar == (char)Keys.Space)
        {

            Bullet bulletX = new Bullet(this.pnlBattleField.Height - 80, location.x );
            // "location does not exist in current context

            pnlBattleField.Controls.Add(bulletX);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:57:09.550

`location`并且`cannonX`是 中的局部变量`tsbtnStart_Click`，因此一旦`tsbtnStart_Click`返回它们就不再存在。使它们成为您的类的属性，以便它们将持续存在并可以在`Form1_KeyPress`其他方法中访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:59:00.600

好吧，你声明

```
Point location = cannonX.PointToScreen(Point.Empty); 
```

在你的方法中：

```
public void tsbtnStart_Click(object sender, EventArgs e) 
```

您需要在开始时在类成员中声明此位置。之后，您将用正确的值覆盖他的值。

像这样：

```
private Point location = new Point();
location = cannonX.PointToScreen(Point.Empty); // in your method 
```

# facebook - 通过 API 禁用事件墙上的评论/帖子？

> ID：16174938
> 
> 赞同：1
> 
> 时间：2013-04-23T16:52:23.380
> 
> 标签：facebook, facebook-wall, facebook-events

当使用 Graph API 将事件发布到 Facebook 页面时，是否可以将事件设置为“只有管理员可以发布到事件墙”，就像在 Facebook.com 上可用的事件对话中一样？

我在 API 参考文档中找不到有关此设置或字段的任何信息 ( [http://developers.facebook.com/docs/reference/api/event/](http://developers.facebook.com/docs/reference/api/event/) )

提前致谢！

# javascript - 数据表标题对齐问题

> ID：16174942
> 
> 赞同：0
> 
> 时间：2013-04-23T16:52:37.803
> 
> 标签：javascript, jquery, css, datatables

我正在为我的应用程序使用 dataTables，它很棒，但我确实有一个小问题：fnAdjustColumnSizing 函数仅在我调整浏览器大小时才有效。假设我没有调整浏览器的大小并且弹出任何额外的滚动条（即正文滚动）条或弹出任何额外的滚动条，因为我将页面中的某些溢出设置为自动标题与列不对齐. 我包括了图像，所以你可以看到发生了什么。

![在此处输入图像描述](https://i.stack.imgur.com/zqF9T.jpg)

如上图所示，右侧的滚动条会导致对齐问题。我必须重新调整窗口大小以解决这个问题，每次它没有自动执行它时，当我重新调整浏览器大小时它是如何工作的。有什么建议么？

Javascript：

```
$(document).ready(function() {
var oTable = $('#myTable').dataTable({
    "sScrollY" : "400px",
    "bPaginate" : false,
    "aaSorting": []
});
    $(window).bind('resize', function () {
        oTable.fnAdjustColumnSizing();
    } );
}); 
```

CSS：

```
#summary{
overflow-y: auto;
overflow-x: auto;
}
table.display {
font-family:arial;
background-color: #FFFFFF;
margin:0px 0pt 0px;
text-align: left;
position: relative;
border: 2px #808080;
border-style: outset;

}
table.display thead th {
background-color: #FFFFFF;
border: 1px #808080;
border-style: groove;
font-size: 14px;
font-family: Arial;
font-weight: normal;
text-align: center;
background-position: center bottom;
cursor: hand;
position: relative;

}

table.display tbody {
color: #3d3d3d;
font-size: 12px;
font-weight: normal;
vertical-align: center;
text-align:left;    
font-family: Arial;

}
#export{
cursor: hand;
}
.highlight td {background: #FFFFFF;}
.cbx{
width: 13px;
height: 13px;
}
#table1{
height:600px; 
overflow:auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:09:38.020

将“sScrollX”：“100％”添加到我的javascript后，它现在对我来说很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-23T13:54:47.360

在 dataTables.fixedHeader.js 中将其从**固定**更新为**自动**对我有用。

[![在此处输入图像描述](https://i.stack.imgur.com/a1AlN.png)](https://i.stack.imgur.com/a1AlN.png)

**注意**：像我在这个例子中那样直接更新*dataTables.fixedHeader.js*可能不是一个好主意。

# powershell - 卷曲 http://url/script.ps1 | powershell 可能吗？

> ID：16174943
> 
> 赞同：6
> 
> 时间：2013-04-23T16:52:42.360
> 
> 标签：powershell, curl, stream

我只想复制我在 Linux 系统上所做的相同行为

```
c:\> \{CURL_EQUIVALENT_ON_WINDOWS} - http://url/script | powershell 
```

那可能吗？

基本上我想执行从服务器下载的流。

IE：分步骤：

1) 了解如何在 powershell 中执行流。执行一个流（我已经在文件系统上）

```
c:\> type script.ps1 | powershell -command - 
```

但这不起作用。

有一个选项 -File 可以执行“文件”，基本上我想在可能的情况下执行流。

2) 了解如何执行我从服务器下载的流并将其通过管道传输到 powershell。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T18:20:42.417

感谢 dugas，我学习了如何使用 powershell 执行流，并通过此链接[http://blog.commandlinekungfu.com/2009/11/episode-70-tangled-web.html](http://blog.commandlinekungfu.com/2009/11/episode-70-tangled-web.html)我了解如何从 http 获取内容作为流与powershell。

所以最后的卷曲| powershell 管道如下所示：

```
PS C:\>(New-Object System.Net.WebClient).DownloadString("http://url/script.ps1") | powershell -command - 
```

非常感谢为这个问题做出贡献的每个人:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T17:09:30.327

您可以使用连字符指定 powershell 的命令参数，以使其从标准输入中读取其命令。下面是一个例子：

```
"Write-Host This is a test" | powershell -command - 
```

使用脚本文件内容的示例：

```
Get-Content .\test.ps1 | powershell -command - 
```

从 powershell 帮助菜单：

```
powershell /? 
```

> -Command
> 执行指定的命令（和任何参数），就好像它们是在 Windows PowerShell 命令提示符下键入的一样，然后退出，除非指定了 NoExit。Command 的值可以是“-”，一个字符串。或脚本块。

```
If the value of Command is "-", the command text is read from standard
input. 
```

# silverlight - Silverlight DataGrid 密码文本列

> ID：16174946
> 
> 赞同：1
> 
> 时间：2013-04-23T16:52:53.977
> 
> 标签：silverlight, datagrid, passwords, datagridtemplatecolumn

新问题。

我在可以编辑的数据网格中显示信息。但是，其中一列是数据库中的密码字段。是否可以像密码文本框控件一样屏蔽显示给用户的文本？这是网格的 XAML：（我指的是 Credentials 列）

```
 <sdk:DataGrid x:Name="grdApplications" 
                              HorizontalAlignment="Left" 
                              Height="570" Margin="10,39,0,0"
                              VerticalAlignment="Top" 
                              Width="1132" 
                              AlternatingRowBackground="#FFB4CDCD" 
                              AutoGenerateColumns="False" 
                              ItemsSource="{Binding Data, ElementName=Apps}" >
                    <sdk:DataGrid.Columns>
                        <sdk:DataGridTemplateColumn Header="Name">
                            <sdk:DataGridTemplateColumn.CellTemplate>
                                <DataTemplate x:Name="appTemplate">
                                    <HyperlinkButton Content="{Binding Name}" 
                                                     HorizontalAlignment="Left" 
                                                     VerticalAlignment="Center"
                                                     Foreground="#2020F0"
                                                     Click="lnkEditApp_Click" />
                                </DataTemplate>
                            </sdk:DataGridTemplateColumn.CellTemplate>
                        </sdk:DataGridTemplateColumn>
                        <sdk:DataGridTextColumn Header="Require Authentication?" Binding="{Binding Type}" />
                        <sdk:DataGridTextColumn Header="User ID" Binding="{Binding Data}" />
                        <sdk:DataGridTextColumn Header="Retry Count" Binding="{Binding Binding}" />
                        <sdk:DataGridTextColumn Header="Credentials" Binding="{Binding Url}" />
                    </sdk:DataGrid.Columns>
                </sdk:DataGrid> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:33:16.277

您需要找回密码还是只是为了显示？

如果是这样，您可以尝试使用转换器：

```
 <sdk:DataGridTextColumn Header="Credentials" Binding="{Binding Url, Converter={StaticResource MyConverterReference}}" />

 <Grid.Resources>
    <c:MyConverter x:Key="MyConverterReference"/>
 </Grid.Resources> 
```

耦合：

```
 public class MyConverter : IValueConverter
 {
    public object Convert(object o, Type type,object parameter, CultureInfo culture)
    {
      string objectToConvert = o.ToString();
      var secure = new SecureString();

      foreach (char c in objectToConvert )
      {
        secure.AppendChar(c);
      }

      return secure;
    }

    public object ConvertBack(object o, Type type,object parameter, CultureInfo culture)
    {
      return null;
    }
 } 
```

# clojure - 在 clojure 中，为什么 assoc 除了地图之外还需要参数，而 dissoc 不需要？

> ID：16174949
> 
> 赞同：8
> 
> 时间：2013-04-23T16:53:12.820
> 
> 标签：clojure

在clojure中，

```
(assoc {}) 
```

抛出一个arity异常，但是

```
(dissoc {}) 
```

才不是。为什么？我本来希望他们俩都抛出异常，或者在没有提供键或值时都不会进行任何更改。

**编辑**：我看到了允许这些表格的理由；这意味着我们可以将 assoc 或 dissoc 应用于可能为空的参数列表。我只是不明白为什么一个会被允许而另一个不会，我很好奇我是否有充分的理由错过这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T13:36:13.273

我个人认为缺少 1-arity assoc 是一个疏忽：每当需要一个尾随参数列表 ( `& stuff`) 时，该函数通常应该能够使用零参数，以使其成为`apply`一个空列表。

Clojure 有许多其他函数可以使用零参数正常工作，例如`+`和`merge`.

另一方面，Clojure 有其他*不*接受零尾随参数的函数，例如`conj`.

所以Clojure API在这方面有点不一致.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T19:45:00.820

这不是一个权威的答案，而是基于我的测试和查看 ClojureDocs：

[dissoc](http://clojuredocs.org/clojure_core/clojure.core/dissoc)的 arity 包括您能够传入一个参数，即地图。在这种情况下，不会从地图中删除任何键/值。

```
(def test-map {:account-no 12345678 :lname "Jones" :fnam "Fred"})
(dissoc test-map)
{:account-no 12345678, :lname "Jones", :fnam "Fred"} 
```

[assoc](http://clojuredocs.org/clojure_core/clojure.core/assoc)没有类似的数量。那就是调用 assoc 需要一个映射、键和值。

现在为什么这样设计是另一回事，如果你没有收到关于该信息的答案——我希望你会——那么我建议提供赏金或继续 Clojure 的 Google 组并提出这个问题。

这是来源。

```
(defn dissoc
  "dissoc[iate]. Returns a new map of the same (hashed/sorted) type,
that does not contain a mapping for key(s)."
  {:added "1.0"
   :static true}
  ([map] map)
  ([map key]
   (. clojure.lang.RT (dissoc map key)))
  ([map key & ks]
   (let [ret (dissoc map key)]
     (if ks
       (recur ret (first ks) (next ks))
       ret)))) 
```

# jquery - 带有自定义警报的jquery中的多答案测验

> ID：16174951
> 
> 赞同：1
> 
> 时间：2013-04-23T16:53:16.780
> 
> 标签：jquery, if-statement, alert

对 jquery 来说有点新，我有一个多答案测验问题。在我添加自定义错误消息之前，它工作正常。

该问题有多个正确答案，这些答案会根据顶部的变量进行检查。我希望问题还检查他们是否选择了所有复选框或没有复选框。它通过警报消息向用户提供反馈。

下面是我的 jsfiddle...单击“提交”按钮而不选中任何框，您将看到自定义警报显示两次（第二个警报错误）。然后注释掉替换警报框的js代码的第一行“window.alert”，它将显示一个错误，然后显示另一个错误（理想方式）。

有没有更好的方法可以构建我的 if 语句以同时检查框检查的数量和正确的答案？

[http://jsfiddle.net/bregm/6/](http://jsfiddle.net/bregm/6/)

```
 <p>Please select the 5 correct answers:</p>

    <label><input type="checkbox" name="q1" class="wrong"></input>Answer 0  </label>
    <label><input type="checkbox" name="q1" id="q1-a"></input>Answer 1</label>
    <label><input type="checkbox" name="q1" class="wrong"></input>Answer 2 </label>
    <label><input type="checkbox" name="q1" id="q1-b"></input>Answer 3</label>
    <label><input type="checkbox" name="q1" id="q1-c" ></input>Answer 4 </label>
    <label><input type="checkbox" name="q1" id="" class="wrong"></input>Answer 5</label>    
    <label><input type="checkbox" name="q1" id="" class="wrong"></input>Answer 6</label>
    <label><input type="checkbox" name="q1" id="q1-d"  ></input>Answer 7</label>
    <label><input type="checkbox" name="q1" id="q1-e"  ></input>Answer 8</label>

<br />
 <button class="submit1">Submit1</button>
  <div id="messageBox"> </div> 

#messageBox {
 position: fixed;
top:40%;
left: 20px;
width: 240px;
height:auto;
font-family: Arial, Helvetica, Sans-Serif;
font-size: 12px; 
background-color:#F93;
color: #FFFFFF;
padding: 6px;
display: none;
border: 1px solid #ccc;
border-radius: 4px;
-webkit-border-radius: 4px;
-moz-border-radius: 4px;
box-shadow: 8px 8px 8px #000;
padding: 1em;

}
window.alert = function(message) { 
        $('#messageBox').text(message).fadeIn().delay(1000).fadeOut('slow');
     //comment out this bit of code and you can see my issue.
    }

    $(function(){
        //correct answers stored here by id
         var rules = ['q1-a,q1-b,q1-c,q1-d,q1-e'];

    $('.submit1').click(function(e) {
             e.preventDefault();
            ///checks to see how many checkboxes have been clicked
            var countchecked1 = $("input[name=q1]:checked").length;
              if(countchecked1 == 0) 
                {
               alert("You have not selected any checkboxes.");
                } 
              if(countchecked1 == 9) 
                {
               alert("Cheating.. You can't select all the boxes.");
               $('input[name=q1]:checked').removeAttr('checked'); 
                return false;
                }

    //check correct answers from var above
           if( $('input[name=q1]:checked').map(function(i,v) { return v.id; }).get().join(',') == rules[0] ) {
                alert("Correct! you selected the correct answers. ");
                return false;
              } 
             else
              {   
                $('input[type="checkbox"].wrong:checked').parent('label').addClass('highlight');     
                $('.wrong:checked').attr('disabled', 'disabled');
                $('.wrong:checked').removeAttr('checked'); 
                alert("Incorrect... Please try again");
                return false;
             }

         });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:19:06.687

您应该将所有`if`s 更改为`else if`s。这样，代码在找到匹配项后就完成了。否则，即使已经满足条件，代码仍会继续运行。在这种情况下，它不仅更有效，而且是必要的。

```
$('.submit1').click(function(e) {
         e.preventDefault();
        ///checks to see how many checkboxes have been clicked
        var countchecked1 = $("input[name=q1]:checked").length;
          if(countchecked1 == 0) 
            {
           alert("You have not selected any checkboxes.");
            } 
          else if(countchecked1 == 9) 
            {
           alert("Cheating.. You can't select all the boxes.");
           $('input[name=q1]:checked').removeAttr('checked'); 
            return false;
            }

//check correct answers from var above
       else if( $('input[name=q1]:checked').map(function(i,v) { return v.id; }).get().join(',') == rules[0] ) {
            alert("Correct! you selected the correct answers. ");
            return false;
          } 
         else
          {   
            $('input[type="checkbox"].wrong:checked').parent('label').addClass('highlight');     
            $('.wrong:checked').attr('disabled', 'disabled').removeAttr('checked');
            alert("Incorrect... Please try again");
            return false;
         }

     }); 
```

还使用链接，以便 Jquery 不必再次搜索 DOM 树：

```
$('.wrong:checked').attr('disabled', 'disabled').removeAttr('checked'); 
```

如果我是你，我一次不会允许超过 5 个复选标记。

JSFIDDLE：http: [//jsfiddle.net/bregm/9/](http://jsfiddle.net/bregm/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:32:12.747

好吧，我认为即使下面的代码也可以解决问题，因为您已经`wrong`为所有错误答案添加了类

```
 $('.submit1').click(function (e) {
    e.preventDefault();
    ///checks to see how many checkboxes have been clicked
    var $inputq = $("input[name=q1]");
    var $checked = $inputq.filter(":checked");

    if ($checked.length == $inputq.length) {
        alert("Cheating.. You can't select all the boxes.");
        $checked.removeAttr('checked');
        return false;
    }
    var wrongChecked = $('input[type="checkbox"].wrong:checked');
    if (wrongChecked.length > 0) {
        wrongChecked.parent('label').addClass('highlight');
        wrongChecked.attr('disabled', 'disabled');
        wrongChecked.removeAttr('checked');
        alert("Incorrect... Please try again");
        return false;
    } else if ($checked.length == 5) {
        alert("Correct! you selected the correct answers. ");
        return false;
    } else {
        alert("You have not selected All correct checkboxes.");
        return false;
    }
}); 
```

[http://jsfiddle.net/bregm/8/](http://jsfiddle.net/bregm/8/)

# php - magento模板debuing突然出现

> ID：16174958
> 
> 赞同：0
> 
> 时间：2013-04-23T16:53:52.810
> 
> 标签：php, magento

我是一个初学者magento开发人员。

我知道这听起来很愚蠢，但由于某种原因，我的 magento 系统开始拥有自己的生命。

它输入了模板调试模式，因此我检查了控制面板，并在检查复选框“使用网站”（我不知道它的含义）时看到了它，所以我没有选中它，然后选择了否。

所有的调试框都消失了，只有一个。我不明白它来自哪里。

这是我的网站：[http ://www.bellaterracosmetics.com](http://www.bellaterracosmetics.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:15:10.533

您的显示模板路径提示和显示块路径提示已打开

转到系统>>配置

转到高级下左下角的开发人员

切换到左上角的商店视图到您当前的网站或商店视图。

在同一开发人员配置页面的调试选项卡下，您将看到一个新选项出现

将允许您打开/关闭模板路径/块路径提示。

转到系统>>缓存管理清除并刷新所有缓存:)

# c# - 更改 TextBlock 的值时是否可以运行动画？

> ID：16174963
> 
> 赞同：0
> 
> 时间：2013-04-23T16:54:10.383
> 
> 标签：c#, xaml, windows-phone, datatrigger

我正在创建一些`Animation`s 来动画化 a 中值之间的变化`Textblock`。
从我所见，我可以在's`DataTrigger`时使用 a 来触发动画，但是有没有办法在它改变时使用相同的机制来触发？（也就是说，我不在乎新值是什么，只是它不同）`Textblock``value == something`

我认为使用`EventTrigger`with的 WPF 支持这一点，`TargetUpdated`但这似乎在 Windows Phone 中不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:18:26.333

我相信您正在寻找的是[PropertyChangedTrigger](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj733159%28v=vs.105%29.aspx)

希望这可以帮助。

# wordpress - 如何删除 Wordpress 联系表单管理器插件中的默认下拉选择选项

> ID：16174964
> 
> 赞同：0
> 
> 时间：2013-04-23T16:54:18.347
> 
> 标签：wordpress

我正在使用[Wordpress 联系表单管理器](http://wordpress.org/extend/plugins/contact-form-manager/)插件。如果我将下拉列表的元素设置`Default drop down value`为某个值，则该值确实会在我设置时显示为选中状态。问题是当我单击下拉菜单以展开它时，会`Select`出现如图所示的附加选项，我似乎找不到在哪里可以自定义它。我浏览了他们的常见问题解答并用谷歌搜索但没有帮助。![在此处输入图像描述](https://i.stack.imgur.com/Lgbex.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:54:18.347

因为通过插件管理面板似乎确实不存在编辑此选项的选项，并且为了删除附加`Select`选项，您必须`create-contact-form.php`在线编辑开始`1006`并将代码注释掉：

```
if($formElementDetail->client_view_multi_select_drop_down != 1){
    //$replace = $replace.'<option value="">Select</option>';
} 
```

您当然可以评论（或删除）整个`if`案例。希望这会对某人有所帮助。

# c# - 替代 C# 中的内联？

> ID：16174967
> 
> 赞同：3
> 
> 时间：2013-04-23T16:54:21.283
> 
> 标签：c#, inline-code

我使用以下语句将当前函数的名称（例如，事件处理程序）打印到 Visual Studio (2010) 中的输出窗口：

```
Debug.Write(MethodBase.GetCurrentMethod().Name); 
```

如果我把它放在一个实用函数中`DisplayFunctionName()`，而不是调用它的父函数，每次显示的是“ `DisplayFunctionName`”——这并不奇怪！

我知道 C# 中没有内联，但是对于这种情况是否有另一种解决方案，除了使用'snippets'，以免重复这样的语句？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T16:56:11.453

您可以使用[`CallerMemberNameAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callermembernameattribute.aspx)来显示呼叫者的姓名。

```
public void WriteDebug(string message, [CallerMemberName] string memberName = "")
{
    Debug.Write("[" + memberName + "] " + message);
} 
```

您还可以使用它来包含此信息以进行更多诊断[`CallerLineNumberAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callerlinenumberattribute.aspx)。[`CallerFilePathAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callerfilepathattribute.aspx)这些属性[在 MSDN 上有详细描述](http://msdn.microsoft.com/en-us/library/hh534540.aspx)。结合`[Conditional("DEBUG")]`on 方法，您可以在调试期间提供大量信息，而这些信息在发布版本中完全消除。

> 我知道 C# 中没有内联，但是对于这种情况是否有另一种解决方案，除了使用'snippets'，以免重复这样的语句？

请注意，这实际上与“内联”没有直接关系，与获取调用成员的诊断信息一样。话虽如此，当您的代码运行时，JIT 肯定会执行内联，这是 C# 具有良好性能的主要原因之一。

这需要 Visual Studio 2012，因为它使用该版本中的新编译器功能来运行。

* * *

如果您使用的是较旧的编译器，另一种选择是使用[`StackTrace`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)提取堆栈跟踪信息。但是，这会对性能产生相当大的影响，因此我不会在紧密循环中使用它，至少不会在生产环境中使用它，尽管它仍然可以在调试期间进行诊断。

```
string callingMethodName = (new StackTrace()).GetFrame(1).GetMethod().Name; 
```

# jquery - 我如何在 jQuery 的点击功能中使用动态 div id

> ID：16174975
> 
> 赞同：3
> 
> 时间：2013-04-23T16:54:34.157
> 
> 标签：jquery

```
<div id="div1" style="display:none;" class="abcd">
     <p>Black</p>
 </div>
  <div id="div2" style="display:none;"  class="abcd">
    <p>Red</p>

 </div>
  <div id="div3" style="display:none;" class="abcd">
   <p>Blue</p>
 </div>

<input type="button" value="Black" id="black" class="btn" 
onClick="showDiv('div1')"/>

<input type="button" value="Red" id="red" class="btn" 
onClick="showDiv('div2')"/>

<input type="button" value="Blue" id="blue" class="btn" 
onClick="showDiv('div3')"/>

function showDiv(divId){

$('.abcd').hide();
$('#'+divId).show();

} 
```

我在 javascript 中使用上面的代码在单击相应按钮并且需要隐藏剩余 div 时显示隐藏 div。我从 javascript 函数传递 div id。

```
$('#btn').click(function(){ 

}); 
```

在这里，我如何在 jQuery .click 事件中动态传递这些除法。在此先感谢....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T17:00:46.967

这将是一个更清洁的方法，没有 onclick：

```
<input data-id="div1" type="button" value="Black" id="black" class="btn" />

<input data-id="div2" type="button" value="Red" id="red" class="btn" />

<input data-id="div3" type="button" value="Blue" id="blue" class="btn"/>

$('.btn').click(function(){
   $('#'+$(this).data('id')).toggle(); 
}); 
```

这样，如果您将其 id 插入`data-id`按钮的属性中，您就可以显示/切换任何元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T17:02:51.000

Since you give your input class `btn`, you need to use `.` instead of `#` for reference. Then you can do like this to show the div according to the button clicked:

```
$('.btn').click(function(i) {
    var index = $(this).index('input') + 1;
    $('#div' + index).show().siblings('div').hide();
}); 
```

**[FIDDLE](http://jsfiddle.net/H9pyk/1/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T17:01:02.857

你可以这样做：

```
$('.btn').click(function(){
    $('.abcd').not(':contains('+$(this).val()+')').hide();
    $('.abcd:contains('+$(this).val()+')').show();
}); 
```

这样，您将不需要元素`onClick`上的属性，`<button>`因为您的`<div>`元素具有`<p>`的文本等于单击按钮的值...

[**Jsfiddle 示例**](http://jsfiddle.net/darkajax/kpL22/)

# social-networking - 如何维护一个社交网站？

> ID：16174976
> 
> 赞同：-1
> 
> 时间：2013-04-23T16:54:34.893
> 
> 标签：social-networking

我搜索了堆栈溢出，发现了一个与我需要问的问题相关的问题。[管理社交网站我应该做什么以及如何做？](https://stackoverflow.com/questions/931573/managing-a-social-networking-website-what-should-i-do-and-how).

我有一个我建立的小型社交网站。这不是一件大事，但它只是提供了它所构建的最好的东西。现在我需要在代码中添加新功能、改进代码、修复错误等。该网站已上线，当该网站上线时，我如何对代码进行这些更改。如果我覆盖了一个用户或网站的许多用户正在访问的代码文件怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:05:05.293

为避免覆盖或丢失对您的项目很重要的代码，最好使用某种[源代码版本控制软件](http://en.wikipedia.org/wiki/List_of_revision_control_software)。 **Git**和（和[Github](http://github.com)）是目前比较流行的产品之一。

使用版本控制软件将允许您添加新功能并改进代码而不会丢失所有内容，因为所有更改都会被跟踪，并且可以在必要时撤消。

# actionscript-3 - 动态文本字段不显示为 3

> ID：16174977
> 
> 赞同：0
> 
> 时间：2013-04-23T16:54:35.210
> 
> 标签：actionscript-3, flash-cs6, dynamic-text

我已经在我的 .as 文件中实例化了：

```
private var heroLives:int;

heroLives = 3; 
```

然后稍后在代码中，我调用了一个名为 showHeroLives() 的函数，如下所示：

```
public function showheroLives() {
    heroLivesTxt.text = String(heroLives);
    trace(heroLivesTxt.text);
    trace(heroLives);
} 
```

我只是使用跟踪来确保 heroLivesTxt 使用 heroLives 进行更新。heroLivesTxt 是舞台上的动态文本字段。如果我注释掉 showHeroLives() 使其不尝试分配值，则显示 heroLivesTxt 的分配值（在舞台内）。但是，一旦我实现 showHeroLives() 以通过代码更新文本，它就会消失，即使它跟踪显示我已经更新了文本。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T17:28:53.193

您需要嵌入字体。您可以通过 TextField 的属性面板嵌入它。

# mysql - 假名数据到 MySQL 查询

> ID：16174978
> 
> 赞同：1
> 
> 时间：2013-04-23T16:54:37.417
> 
> 标签：mysql, scripting, obfuscation, anonymize

我有一个包含一些机密个人信息的数据库。出于数据分析的目的，我想将这些数据发送给一些人。但是，需要保持数据的匿名性。

有没有办法让我生成假表来在 ie 上执行 JOIN，而不是 JOIN 到`user`具有真实名称的表，我`fakeuser`动态生成一个表并 JOIN 到那个表。

我知道它可以手动完成，但查询不会在整个数据库中的所有用户上运行，动态完成它会很好，即当查询调用`fakeuser`ID 23 并且 ID 不存在时，它只是从某处选择一个随机名称并填充表和查询。

如果 MySQL 不够灵活，我愿意通过其他类型的脚本来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:45:42.917

这似乎是一项非常简单的任务，但它涉及几个步骤，我不确定你在哪里卡住了。

你需要一个名字列表，你可以通过随机生成字母组合（给出不可读的名字）来获得名字列表，或者你可以找到一个公共的名字来源（可能是[http://www.listofbabynames.org/](http://www.listofbabynames.org/)）。

然后，您只需要一个循环，通过从列表中随机选择名称来在您的 fakeuser 表中插入记录。您只需要确保不要为 fakeuser 中的不同记录分配相同的名称。这可以通过在您选择一个名称时从列表中删除名称来完成。如果列表不够大，可以生成组合。

我也会仔细考虑@eggyal 给出的建议/文章，看看它是否适用于你的情况。如果您需要更好的解决方案，我认为在匿名数据方面还有很多工作要做。

# java - Spring security oauth2 - 从 OAuth2 主体获取自定义数据

> ID：16174987
> 
> 赞同：8
> 
> 时间：2013-04-23T16:55:03.290
> 
> 标签：java, spring, rest, spring-security, oauth-2.0

我有一个使用 Spring 安全性并具有用户（用户名和密码）和标准表单身份验证的站点。我允许用户生成链接到他们的帐户的客户端 ID 和客户端密码，以便与 OAuth2 安全休息 API 一起使用。

我为 API 使用单独的客户端 ID 和客户端密码，而不是用户名和密码，因此用户可以在不破坏 API 凭据、设置特定范围、禁用 API 访问等的情况下更改密码等。

我使用 spring-security-oauth2 (provider) 来保护其余的 API，并且我允许客户端凭据流。我已经为 api 设置了客户端身份验证，以便检查客户端 ID 和密码。

从一个单独的应用程序中，我使用客户端 ID 和客户端密码来检索访问令牌并开始将其与 api 一起使用。在大多数情况下，我使用简单的 @PreAuthorize 表达式，通常基于客户端角色和范围，并且这些似乎可以正常工作。

**以上所有似乎工作正常**

但是......我现在有一些 API 端点，但是我需要根据来自底层用户的一些细节来实现一些更复杂的规则——在这种情况下，是生成客户端 ID 和密码的用户。

作为一个简单的例子，考虑一个消息传递应用程序，其中我有一个端点，允许用户发布一个可以变化的特定类型的新“消息”。我有每个用户和每种类型的允许收件人表，我想检查已发布消息的收件人是否与该类型的允许收件人匹配。（用户允许的收件人数据通常不大，并且很少更改，因此我很乐意在生成访问令牌时存储它的副本）

我在这些端点获得了主体，我看到它是 OAuth2Authentication 的一个实例，其中包含：

*   userAuthentication - null - 这对于客户端凭据流来说似乎是可以预期的。
*   填充了 clientAuthentication 并且 authenticationParameters 包含授权类型和 client_id

我想我可以使用 clientAuthentication.authorizationParameters 中的客户端 ID 来查找用户和我需要的详细信息，但这将是每个 api 调用的一些查询，这似乎没有意义。

我猜想 Spring OAuth2 库中有一个不错的地方/方式，在授予访问令牌的同时，我可以添加一些额外的细节，以便稍后我可以从 OAuth2Authentication（主体）对象（或扩展它的东西？）

或者，是否有更好的方法完全解决此类问题？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-28T14:27:45.020

为什么您不使用可以在客户端详细信息中定义的范围，然后使用 ScopeVoter 验证此令牌是否具有访问此资源的适当范围。

请查看我的演示以获取更多详细信息

[https://github.com/bassemZohdy/Spring_REST_OAuth_Demo](https://github.com/bassemZohdy/Spring_REST_OAuth_Demo)

更新 1：我没有回复您的问题“从 OAuth2 主体获取自定义数据”的第 2 部分，您可以在授权服务器上添加休息服务，该服务器可以使用 OAuth 令牌访问，为您提供有关此令牌用户的所需信息，所以您可以这样做不必关心您也将授权服务器作为资源服务器处理的“OAuth2 主体”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-28T15:31:07.420

You can override the Token creation class so the token himself would contain the username. (maybe encrypted using the client_secret). This way you can get the user related to a token from the token itself without additional data base access. you should override

```
<bean id="tokenServices" class="org.springframework.security.oauth2.provider.token.DefaultTokenServices"> 
```

with your own class, or use [`TokenEnhancer`](http://static.springsource.org/spring-security/oauth/apidocs/org/springframework/security/oauth2/provider/token/DefaultTokenServices.html#setTokenEnhancer%28org.springframework.security.oauth2.provider.token.TokenEnhancer%29)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-28T14:33:08.307

在我看来，正确的方法是使用 oauth2 “密码”流程而不是客户端凭据。您可以创建一个通用的客户端 ID 和客户端密码，并将它们提供给您的所有用户。然后，每个用户都可以使用这些客户详细信息以及他自己的用户名和密码来请求他自己的令牌。这样，每个令牌都将连接到一个 UserDetails 对象，这将解决您的问题。你可以在这里看到这是如何完成的：[https ://labs.hybris.com/2012/06/18/trying-out-oauth2-via-curl/](http://techblog.hybris.com/2012/06/18/trying-out-oauth2-via-curl/)

# java - 从带有标志 Intent.FLAG_ACTIVITY_NEW_TASK 的 onPostExecute() 方法开始的意图不起作用

> ID：16174988
> 
> 赞同：0
> 
> 时间：2013-04-23T16:55:11.047
> 
> 标签：java, android, android-activity

当您转到**New... > Android Activity**时，我正在使用默认**LoginActivity****当您使用 Android 4.2 SDK 上的 ADT 工具**

 **它包含一个电子邮件字段、密码字段和一个显示“登录或注册”的按钮。当你点击那个按钮时，它会执行一个虚假的异步网络请求，调用一些方法来显示进度条，使用虚拟数据验证用户登录，如果一切都成功，最后会调用：

```
 @Override
        protected void onPostExecute(final Boolean success) {
            mAuthTask = null;
            showProgress(false);

            if (success) {
                //finish();
                Intent intent = new Intent(LoginActivity.this, MainActivity.class)
                    .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_TASK_ON_HOME);
                startActivity(intent);
            } else {
                mPasswordView
                        .setError(getString(R.string.error_incorrect_password));
                mPasswordView.requestFocus();
            }

} 
```

我注释掉了finish()，而是想打开一个新的活动窗口，这将是我的主应用程序窗口（登录状态）。我昨天刚开始使用Android，我已经看到很多例子使用片段而不是活动来完成这类事情。有关系吗？无论如何，它工作正常，它会打开一个新活动，但我仍然可以按“后退按钮”，它会带我进入*登录屏幕*。我很确定我在活动下面设置的那些标志是清除历史堆栈所需的，但它不起作用。

如何修复上述代码以清除历史堆栈？换句话说，在我登录后，它应该带我到新活动，如果我按**Back**，它应该带我到*主屏幕*。

## 更新

我附上了 LoginActivity、MainActivity、AndroidManifest 的代码。

**链接**：[https ://gist.github.com/sahat/5445657](https://gist.github.com/sahat/5445657)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:50:38.030

尝试这个

```
@Override
    protected void onPostExecute(final Boolean success) {
        mAuthTask = null;
        showProgress(false);

        if (success) {
            Intent intent = new Intent(LoginActivity.this, MainActivity.class)
            startActivity(intent);
            finish();
        } else {
            mPasswordView
                    .setError(getString(R.string.error_incorrect_password));
            mPasswordView.requestFocus();
        } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T16:57:22.877

改为使用`Intent.FLAG_ACTIVITY_CLEAR_TOP`。您正在使用的标志创建一个新任务，但不对堆栈的其余部分做任何事情。此标志将清除所有其他`Activities`. 如果`Activity`存在，它将清除其余的，`Activities`因此`MainActivity`将位于顶部

[FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

**编辑**

如果您想在从下一个按下后返回主屏幕，`Activity`那么只需`finish()`在登录`Activity`时调用登录。这将从您的堆栈中删除登录页面。您还可以指定

```
android:noHistory="true" 
```

在`Activity`登录屏幕的标签中`manifest`**

# python - 无法让 argparse 读取带有破折号的引号字符串？

> ID：16174992
> 
> 赞同：72
> 
> 时间：2013-04-23T16:55:18.783
> 
> 标签：python, argparse, command-line-interface

有没有办法让 argparse 将两个引号之间的任何内容识别为单个参数？似乎一直看到破折号并假设它是一个新选项的开始

我有类似的东西：

```
mainparser = argparse.ArgumentParser()
subparsers = mainparser.add_subparsers(dest='subcommand')
parser = subparsers.add_parser('queue')
parser.add_argument('-env', '--extraEnvVars', type=str,
                        help='String of extra arguments to be passed to model.')
...other arguments added to parser... 
```

但是当我运行时：

```
python Application.py queue -env "-s WHATEVER -e COOL STUFF" 
```

它给了我：

```
Application.py queue: error: argument -env/--extraEnvVars: expected one argument 
```

如果我不使用第一个破折号，它完全可以正常工作，但是我能够传入一个带有破折号的字符串是至关重要的。我试过用 \ 转义它，这会导致它成功，但会将 \ 添加到参数字符串中有人知道如何解决这个问题吗？无论 -s 是否是解析器中的参数，都会发生这种情况。

编辑：我正在使用 Python 2.7。

编辑2：

```
python Application.py -env " -env" 
```

工作得很好，但是

```
python Application.py -env "-env" 
```

才不是。

EDIT3：看起来这实际上是一个已经在争论的错误：[http](http://www.gossamer-threads.com/lists/python/bugs/89529) ://www.gossamer-threads.com/lists/python/bugs/89529，http : [//python.6.x6.nabble.com/issue9334- argparse-does-not-accept-options-take-arguments-beginning-with-dash-regression-from-optp-td578790.html](http://python.6.x6.nabble.com/issue9334-argparse-does-not-accept-options-taking-arguments-beginning-with-dash-regression-from-optp-td578790.html)。它仅在 2.7 中而不在 optparse 中。

EDIT4：当前打开的错误报告是：[http ://bugs.python.org/issue9334](http://bugs.python.org/issue9334)

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-23T17:02:15.870

**更新的答案：**

调用时可以加上等号：

```
python Application.py -env="-env" 
```

* * *

**原答案：**

我在做你想做的事情时也遇到了麻烦，但是 argparse 中有一个解决方法，它是[parse_known_args](http://docs.python.org/3.4/library/argparse.html#partial-parsing)方法。这将使您尚未定义的所有参数都通过解析器，并假设您会将它们用于子进程。缺点是您不会收到带有错误参数的错误报告，并且您必须确保您的选项和子流程的选项之间没有冲突。

另一种选择可能是强制用户使用加号而不是减号：

```
python Application.py -e "+s WHATEVER +e COOL STUFF" 
```

然后在传递给子进程之前，在后处理中将“+”更改为“-”。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-02-19T22:54:18.763

这个问题在[http://bugs.python.org/issue9334](http://bugs.python.org/issue9334)中有深入讨论。大部分活动是在 2011 年。我去年添加了一个补丁，但有很多`argparse`补丁积压。

问题是字符串中的潜在歧义`'--env'`，或者`"-s WHATEVER -e COOL STUFF"`当它跟随一个带有参数的选项时。

`optparse`做一个简单的从左到右的解析。第一个`--env`是带有一个参数的选项标志，因此它使用下一个参数，无论它看起来如何。 `argparse`，另一方面，循环遍历字符串两次。首先，它将它们分类为“O”或“A”（选项标志或参数）。在第二个循环中，它使用它们，使用`re`类似的模式匹配来处理变量`nargs`值。在这种情况下，看起来我们有`OO`, 两个标志并且没有参数。

使用时的解决方案`argparse`是确保参数字符串不会与选项标志混淆。此处（以及错误问题中）显示的可能性包括：

```
--env="--env"  # clearly defines the argument.

--env " --env"  # other non - character
--env "--env "  # space after

--env "--env one two"  # but not '--env "-env one two"' 
```

其本身`'--env'`看起来像一个标志（即使被引用，请参阅`sys.argv`），但当后面跟着其他字符串时它不是。但是`"-env one two"`有问题，因为它可以被解析为`['-e','nv one two']``'-e' 标志后跟一个字符串（甚至更多选项）。

`--`也`nargs=argparse.PARSER`可用于强制`argparse`将所有后续字符串视为参数。但它们只在参数列表的末尾起作用。

在 issue9334 中有一个建议的补丁来添加`args_default_to_positional=True`模式。在这种模式下，解析器只将字符串分类为选项标志，如果它可以清楚地将它们与定义的参数匹配。因此 '--env --one' 中的 '--one' 将被归类为参数。但是 '--env --env' 中的第二个 '--env' 仍将被归类为选项标志。

* * *

展开相关案例

[将 argparse 与以破折号 ("-") 开头的参数值一起使用](https://stackoverflow.com/questions/45541581/using-argparse-with-argument-values-that-begin-with-a-dash)

```
parser = argparse.ArgumentParser(prog="PROG")
parser.add_argument("-f", "--force", default=False, action="store_true")
parser.add_argument("-e", "--extra")
args = parser.parse_args()
print(args) 
```

生产

```
1513:~/mypy$ python3 stack16174992.py --extra "--foo one"
Namespace(extra='--foo one', force=False)
1513:~/mypy$ python3 stack16174992.py --extra "-foo one"
usage: PROG [-h] [-f] [-e EXTRA]
PROG: error: argument -e/--extra: expected one argument
1513:~/mypy$ python3 stack16174992.py --extra "-bar one"
Namespace(extra='-bar one', force=False)
1514:~/mypy$ python3 stack16174992.py -fe one
Namespace(extra='one', force=True) 
```

“-foo one”案例失败，因为`-foo`被解释为`-f`标志加上未指定的额外内容。这与允许`-fe`被解释为的动作相同`['-f','-e']`。

如果我将 更改`nargs`为`REMAINDER`(not `PARSER`)，之后的所有内容都`-e`被解释为该标志的参数：

```
parser.add_argument("-e", "--extra", nargs=argparse.REMAINDER) 
```

所有案例都有效。请注意，该值是一个列表。并且不需要引号：

```
1518:~/mypy$ python3 stack16174992.py --extra "--foo one"
Namespace(extra=['--foo one'], force=False)
1519:~/mypy$ python3 stack16174992.py --extra "-foo one"
Namespace(extra=['-foo one'], force=False)
1519:~/mypy$ python3 stack16174992.py --extra "-bar one"
Namespace(extra=['-bar one'], force=False)
1519:~/mypy$ python3 stack16174992.py -fe one
Namespace(extra=['one'], force=True)
1520:~/mypy$ python3 stack16174992.py --extra --foo one
Namespace(extra=['--foo', 'one'], force=False)
1521:~/mypy$ python3 stack16174992.py --extra -foo one
Namespace(extra=['-foo', 'one'], force=False) 
```

`argparse.REMAINDER`就像'*'，除了它接受后面的所有内容，无论它是否看起来像一个标志。 `argparse.PARSER`更像是“+”，因为它首先需要一个`positional`类似的参数。它`nargs`是`subparsers`使用的。

记录了这种用法`REMAINDER`，[https://docs.python.org/3/library/argparse.html#nargs](https://docs.python.org/3/library/argparse.html#nargs)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-04-23T17:13:31.343

`python tst.py -e ' -e blah'`作为一个非常简单的解决方法，您可以使用空格开始参数。如果您愿意，只需`lstrip()`选择将其恢复正常即可。

或者，如果第一个“子参数”不是原始函数的有效参数，那么您根本不需要做任何事情。也就是说，`python tst.py -e '-s hi -e blah'`不起作用的唯一原因是因为`-s`是`tst.py`.

此外，现在已弃用的[optparse模块可以正常工作。](http://docs.python.org/2.7/library/optparse.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-15T20:22:28.293

我已经将一个脚本从 optparse 移植到 argparse，其中某些参数的值可能以负数开头。我遇到了这个问题，因为该脚本在许多地方都使用了，而没有使用“=”符号将负值连接到标志。在阅读了此处和[http://bugs.python.org/issue9334](http://bugs.python.org/issue9334)中的讨论后，我知道参数只取一个值，并且接受后续参数（即缺失值）作为值没有风险。FWIW，我的解决方案是在传递给 parse_args() 之前预处理参数并使用 '=' 加入有问题的参数：

```
def preprocess_negative_args(argv, flags=None):
    if flags is None:
        flags = ['--time', '--mtime']
    result = []
    i = 0
    while i < len(argv):
        arg = argv[i]
        if arg in flags and i+1 < len(argv) and argv[i+1].startswith('-'):
            arg = arg + "=" + argv[i+1]
            i += 1
        result.append(arg)
        i += 1
    return result 
```

这种方法至少不需要任何用户更改，它只修改明确需要允许负值的参数。

```
>>> import argparse
>>> parser = argparse.ArgumentParser("prog")
>>> parser.add_argument("--time")
>>> parser.parse_args(preprocess_negative_args("--time -1d,2".split()))
Namespace(time='-1d,2') 
```

告诉 argparse 哪些参数应该明确允许带有前导破折号的值会更方便，但这种方法似乎是一个合理的折衷方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-12T01:58:41.767

类似的问题。我通过用“\”替换空格来解决这个问题。例如：

替换
`python Application.py "cmd -option"`
为
`python Application.py "cmd\ -option"`。
不确定你的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-02T06:39:04.657

为了绕过必须处理 argparse 甚至查看不是您想要的标志的“-”，您可以在 argparse 读取它之前编辑 sys.argv。只需保存您不想看到的参数，在其位置放置一个填充参数，然后在 argparse 处理 sys.argv 后将填充参数替换为原始参数。我只需要为我自己的代码执行此操作。它不漂亮，但它有效并且很容易。如果您的标志并不总是以相同的顺序，您也可以使用 for 循环遍历 sys.argv。

```
parser.add_argument('-n', '--input', nargs='*')
spot_saver = ''
if sys.argv[1] == '-n':             #'-n' can be any flag you use
    if sys.argv[2][0] == '-':       #This checks the first character of the element
        spot_saver = sys.argv[2] 
        sys.argv[2] = "fillerText" 
args = parser.parse_args()
if args.input[0] == 'fillerText':
    args.input[0] = spot_saver 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-01T12:44:13.710

```
paser.add_argument("--argument_name", default=None, nargs=argparse.REMAINDER) 
```

> > python_file.py --argument_name "--abc=10 -a=1 -b=2 cdef"

注意：参数值只能在双引号内传递，这不适用于单引号

# python - 在 dotcloud 上构建 mysql-python 时遇到问题：需要分发 >= 0.6.28

> ID：16174994
> 
> 赞同：1
> 
> 时间：2013-04-23T16:55:36.110
> 
> 标签：python, mysql-python, dotcloud, distribute, requirements.txt

我突然无法在**dotcloud**上构建我的 Python/Django 应用程序。看来`MySQL-python`需要`distribute >= 0.6.28`。我的 requirements.txt 指定`distribute==0.6.36`，但这被忽略了。Dotcloud 似乎正在使用`0.6.10`。有没有办法升级正在使用的分发包？

## 要求.txt

```
Django==1.5.1
MySQL-python==1.2.4
PIL==1.1.7
Pygments==1.6
South==0.7.6
anyjson==0.3.3
boto==2.8.0
distribute==0.6.36
django-background-task==0.1.6
django-extensions==1.1.1
django-mptt==0.5.5
django-social-auth==0.7.22
django-storages==1.1.8
django-tinymce==1.5.1b4
djangorestframework==2.2.6
docutils==0.10
httplib2==0.8
importlib==1.0.2
oauth2==1.5.211
ordereddict==1.1
python-dateutil==1.5
python-openid==2.2.5
pytz==2013b
selenium==2.32.0
six==1.3.0
wsgiref==0.1.2 
```

## 建设者成绩单

```
16:43:46.608001: [www] I am snapshotsworker_00/ec2-23-22-131-20, and I will be your builder today.
16:44:02.918066: [www] Requirement already satisfied (use --upgrade to upgrade): Django==1.5.1 in /opt/ve/2.6/lib/python2.6/site-packages (from -r requirements.txt (line 1))
16:44:02.918522: [www] Downloading/unpacking MySQL-python==1.2.4 (from -r requirements.txt (line 2))
  Downloading MySQL-python-1.2.4.zip (113Kb): 113Kb downloaded13Kb): 
16:44:23.028019: [www]   Storing download in cache at /home/dotcloud/.pip-cache/http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2FM%2FMySQL-python%2FMySQL-python-1.2.4.zip
16:44:23.028471: [www]   Running setup.py egg_info for package MySQL-python
16:44:23.808020: [www]     The required version of distribute (>=0.6.28) is not available,
16:44:23.808477: [www]     and can't be installed while this script is running. Please
16:44:23.808732: [www]     install a more recent version first, using
16:44:23.808985: [www]     'easy_install -U distribute'.
16:44:23.809487: [www]     (Currently using distribute 0.6.10 (/opt/ve/2.6/lib/python2.6/site-packages))
16:44:23.828053: [www]     Complete output from command python setup.py egg_info:
16:44:23.828490: [www]     The required version of distribute (>=0.6.28) is not available,
16:44:23.828999: [www] and can't be installed while this script is running. Please
16:44:23.829503: [www] install a more recent version first, using
16:44:23.830016: [www] 'easy_install -U distribute'.
16:44:23.831304: [www] (Currently using distribute 0.6.10 (/opt/ve/2.6/lib/python2.6/site-packages))
16:44:23.832167: [www] ----------------------------------------
16:44:23.832633: [www] Command python setup.py egg_info failed with error code 2 in /opt/ve/2.6/build/MySQL-python
16:44:23.833106: [www] Storing complete log in /home/dotcloud/.pip/pip.log
16:44:24.598341: [www] -- Build failed: "/home/dotcloud/env/bin/pip install --download-cache=~/.pip-cache -r requirements.txt" failed with return code 1
16:44:24.677501: [www] Build failed for service (www) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:22:01.160

我找到了使用[预构建挂钩](http://docs.dotcloud.com/guides/hooks/#pre-build)的解决方法。构建器记录中给出的`easy_install`建议不起作用，但它确实适用于`pip`. 这是详细信息。

## 点云.yml

```
www:
  type: python
  prebuild: ./prebuild
db:
  type: mysql 
```

## 预构建（chmod +x）

```
pip install --upgrade distribute==0.6.36 
```

# c++ - 二叉搜索树 - 值和键有什么区别？

> ID：16174999
> 
> 赞同：-2
> 
> 时间：2013-04-23T16:55:57.157
> 
> 标签：c++, binary-search-tree

我对 BinarySearchTree 节点中的键和值之间的区别感到困惑。钥匙的意义何在？您不能仅根据一个值来确定 BST 吗？下面是两个包含 Key 和 Value 的代码示例。它们是我从两个不同来源获得的两段不同的代码。

```
template<typename Key, typename Value>
class Node
{
private:
public:
Node<Key, Value>(Key key, Value value)
{
this->key = key;
this->value = value;
N = 1;
left = NULL;
right = NULL;
};
Node* left; 
Node* right; 
Key key; 
Value value; 
int N; 
}; 
```

第二段代码是；

```
void insert(int value)
{
    if(root == NULL)
        root = new Node(value);
    else
        insertHelper(root, value);
}

void insertHelper(Node* node, int value)
{
    if(value < node->key)
    {
        if(node->leftChild == NULL)
            node->leftChild = new Node(value);
        else
            insertHelper(node->leftChild, value);
    }
    else
    {
        if(node->rightChild == NULL)
            node->rightChild = new Node(value);
        else
            insertHelper(node->rightChild, value);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T16:59:19.303

价值只是附加到节点的东西。如果您愿意，它是节点的有效负载。它是任意原始类型或对象。

Key 用于确定将节点插入树的位置。请注意，Value 并不像 Key 那样参与开发和维护树结构。

Nik 提供了一个很好的类比：节点是一个容器。Value 是您放入该容器的内容，而 Key 是您标记容器的方式，以便您以后可以检索它。