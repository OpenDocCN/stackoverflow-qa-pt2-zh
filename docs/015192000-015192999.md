# StackOverflow 问答 15192000-15192999

# c# - LINQ to XML to Datatable

> ID：15192000
> 
> 赞同：2
> 
> 时间：2013-03-03T23:02:39.780
> 
> 标签：c#, linq, xml-parsing

我有以下 xml 格式

```
<feed>
 <entry>
   <s:product>
   <s:author>
    <s:name>amazone</s:name>
    <s:accountId>1111</s:accountId>
   </s:author>
   <s:title>xxx
   </s:title>
   <s:condition>used
   </s:condition>
   <s:inventories>
    <s:inventory channel="online" availability="inStock">
     <s:price shipping="4.9" currency="EUR">14.95</s:price>
    </s:inventory>
   </s:inventories>
  </s:product>
 </entry>
 <entry>
  <s:product>
   <s:author>
    <s:name>ebay</s:name>
    <s:accountId>1221</s:accountId>
   </s:author>
   <s:title>yyy
   </s:title>
   <s:condition>new
   </s:condition>
   <s:inventories>
    <s:inventory channel="online" availability="inStock">
     <s:price shipping="4.90" currency="EUR">99.95</s:price>
    </s:inventory>
   </s:inventories>
  </s:product>
 </entry>  
</feed> 
```

我一直在尝试将其放入一个如下所示的数据表中

```
name       condition       price      shipping      totalprice      availablity
amazone    used            14.95      4.95          19.90           inStock 
ebay       new             99.95      4.90          104.85          inStock 
```

如您所见，每个`<entry>`都应该是一行，我不想要所有标签的值，只需以下

```
column name       :value of <s:name>      
column condition  :value of <s:condition> 
column sprice     :value of <s:price>
column shipping   :value of shipping which is an attribute of <s:price>
column totalprice :value of <s:price> + its attribute shipping
column avilability:value of avialability an attribute of <s:inventory> 
```

我怎样才能使用 LINQ 实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T00:25:28.930

那里的代码中有很多事情发生，其中大部分都不好。您只是没有正确使用 LINQ to XML 库。

*   您的 XML 文档和您感兴趣的数据具有名称空间。您在文档中遗漏了命名空间声明，并且您没有正确访问任何元素。

    您需要为`XNamespace`文档中使用的命名空间创建一个变量集，并在您尝试引用适当的元素时使用它。

*   您不能像这样将元素/属性（字符串）的值转换为 double，在这种情况下您必须对其进行解析。但是 LINQ to XMl 提供了处理转换的显式转换。因此，您在元素/属性本身上转换为适当的类型，而不是它们包含的值。使用它而不是操纵`Value`.

    附带说明一下，无论何时处理货币，都不要使用`double`（或任何其他浮点类型），使用`decimal`.

*   如果不从数据表中创建数据行实例，则无法创建数据行实例。建议您的查询首先关注数据。为表创建新的数据行 获得数据后，请担心创建行和填充数据。

话虽如此，这就是您如何更正确地使用它。

```
XDocument doc = GetDocument();
// assuming this is the correct namespace
XNamespace s = "http://www.google.com/shopping/api/schemas/2010";
var query =
    from product in doc.Root.Elements("entry").Elements(s + "product")
    // declare some variables to make the query cleaner
    let inventory = product.Element(s + "inventories").Element(s + "inventory")
    let price = (decimal)inventory.Element(s + "price")
    let shipping = (decimal)inventory.Element(s + "price").Attribute("shipping")
    select new
    {
        Name = (string)product.Element(s + "author").Element(s + "name"),
        Condition = (string)product.Element(s + "condition"),
        Price = price,
        Shipping = shipping,
        TotalPrice = price + shipping,
        Availability = (string)inventory.Attribute("availability"),
    };

var dt = new DataTable();
dt.Columns.Add("Name", typeof(string));
dt.Columns.Add("Condition", typeof(string));
dt.Columns.Add("Price", typeof(decimal));
dt.Columns.Add("Shipping", typeof(decimal));
dt.Columns.Add("TotalPrice", typeof(decimal));
dt.Columns.Add("Availability", typeof(string));
foreach (var product in query)
{
    dt.Rows.Add(
        product.Name,
        product.Condition,
        product.Price,
        product.Shipping,
        product.TotalPrice,
        product.Availability
    );
} 
```

# r - 从 UScensus2010 导出数据

> ID：15192004
> 
> 赞同：0
> 
> 时间：2013-03-03T23:03:03.430
> 
> 标签：r, census

我需要为 CDP（全国）提取 2010 年人口普查数据，并认为使用 UScensus2010 包来提取我需要的关键表，一次一个状态，然后导出结果数据是最简单的。为此，我运行了以下代码

```
 library(UScensus2010) 
 install.cdp("osx")
 demographics(dem="P0030001", state="oh",level="cdp")
 p3.race <- demographics(dem=c("P0010001", "P0030001", "P0030002",  "P0030003", "P0030004", "P0030005", "P0030006"), state="oh",level="cdp") 
```

请注意，因为`p3.race`我们有

```
 ..$ : chr [1:1204] "Hamler village" "Florida village" "Deshler village" "New Bavaria village" ...
  ..$ : chr [1:7] "P0010001" "P0030001" "P0030002" "P0030003" ... 
```

到目前为止，一切都很好。现在，导出 p3.race（如 *.csv *.dta 或任何其他格式）以使 CDP 名称显示为 A 列和 P001001:P0030006 显示为 B:H 列的最佳方法是什么？

# c - 分配新的调用堆栈

> ID：15192006
> 
> 赞同：7
> 
> 时间：2013-03-03T23:03:44.147
> 
> 标签：c, assembly, stack, callstack

（我认为这个问题很有可能是重复的，或者已经在这里得到了回答，但是由于“堆栈分配”和相关术语的干扰，很难找到答案。）

我有一个我一直在为脚本语言工作的玩具编译器。为了能够在脚本执行过程中暂停脚本的执行并返回到宿主程序，它有自己的堆栈：一个简单的内存块，带有一个“堆栈指针”变量，该变量使用正常的 C 代码操作递增诸如此类的事情等等。到目前为止不感兴趣。

目前我编译为 C。但我也有兴趣研究编译为机器代码 - 同时保持辅助堆栈和在预定义控制点返回主机程序的能力。

所以......我认为在我自己的代码中使用传统的堆栈寄存器不太可能成为问题，我假设寄存器发生的事情是我自己的事，只要一切都在完成后恢复（如果我在这一点上是错误的）。*但是*......如果我希望脚本代码调用其他一些库代码，那么使用这个“虚拟堆栈”离开程序是否安全，或者为此目的是否必须将原始堆栈归还？

[像this](https://stackoverflow.com/questions/6777765/how-does-stack-growing-work-on-windows-and-linux/6777825#6777825)和[this这样](https://stackoverflow.com/questions/6648059/why-is-there-a-limit-on-the-stack-size/6648119#6648119)的答案表明堆栈不是传统的内存块，而是依赖于特殊的系统特定行为来处理页面错误等等。

所以：

*   将堆栈指针移动到其他内存区域是否安全？堆栈内存不是“特殊”的吗？我认为线程库必须做这样的事情，因为它们会创建更多的堆栈......
*   假设内存的任何区域都可以安全地使用堆栈寄存器和指令进行操作，我认为没有理由调用具有已知调用深度（即没有递归，没有函数指针）的任何函数会成为问题，只要那个数量在虚拟堆栈上可用。对？
*   无论如何，堆栈溢出显然是普通代码中的一个问题，但是在这样的系统中溢出会产生任何额外的灾难性后果吗？

这显然不是必需的，因为简单地将指针返回到真正的堆栈将是完全可用的，或者就此而言，首先不要滥用它们而只是忍受更少的寄存器，我可能不应该尝试这样做完全没有（尤其是因为显然超出了我的理解范围）。但无论哪种方式，我仍然很好奇。想知道这些事情是如何工作的。

**编辑：**对不起，当然应该说。我正在研究 x86（我自己的机器为 32 位）、Windows 和 Ubuntu。没有什么异国情调。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T23:24:28.187

所有这些答案都基于“通用处理器架构”，并且由于它涉及生成汇编代码，因此它必须是“特定于目标的” - 如果您决定在处理器 X 上执行此操作，它对堆栈有一些奇怪的处理，下面是显然不值得它写在[替代纸]上的屏幕表面。对于一般的 x86，除非另有说明，否则以下内容成立。

> ```
> is it safe to move the stack pointers into some other area of memory? 
> ```
> 
> 堆栈内存不是“特殊”的吗？我认为线程库必须做这样的事情，因为它们会创建更多的堆栈......

这样的记忆并不特别。然而，这确实假设它不在 x86 架构上，其中堆栈段用于限制堆栈使用。虽然这是可能的，但在实现中很少见。我知道几年前诺基亚有一个使用 32 位模式段的特殊操作系统。就我现在所能想到的，这是我接触过的唯一一个使用栈段的人，正如 x86 分段模式所描述的那样。

> 假设内存的任何区域都可以安全地使用堆栈寄存器和指令进行操作，我想不出为什么调用具有已知调用深度（即没有递归，没有函数指针）的任何函数会成为问题，只要那个数量在虚拟堆栈上可用。对？

正确的。只要您不希望能够在不切换回原始堆栈的情况下返回到其他功能。有限级别的递归也是可以接受的，只要堆栈足够深[有某些类型的问题在没有递归的情况下肯定很难解决——例如二叉树搜索]。

> 无论如何，堆栈溢出显然是普通代码中的一个问题，但是在这样的系统中溢出会产生任何额外的灾难性后果吗？

确实，如果你有点不走运，这将是一个难以破解的错误。

我建议您使用对`VirtualProtect()`(Windows) 或`mprotect()`(Linux 等) 的调用将“堆栈的末尾”标记为不可读和不可写，这样如果您的代码意外地离开堆栈，它会正确崩溃而不是其他一些更微妙的未定义的行为[因为不能保证正下方的内存（较低地址）不可用，因此如果它确实离开堆栈，您可以覆盖一些其他有用的东西，这将导致一些非常难以调试的错误]。

添加一些偶尔检查堆栈深度的代码（您知道堆栈的开始和结束位置，因此检查特定堆栈值是否“超出范围”应该不难[如果您给自己一些“额外的缓冲区”堆栈顶部和您保护的“我们死了”区域之间的空间” - 如果它是一辆撞车的汽车，他们会称之为“崩溃区域”。您还可以用一个填充整个堆栈可识别的模式，并检查其中有多少是“未触及”的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T23:52:30.713

通常，在 x86 上，您可以毫无问题地使用现有堆栈，只要：

*   你不会溢出它
*   您不会将堆栈指针寄存器（使用`pop`或`add esp, positive_value`/ `sub esp, negative_value`）增加超出代码开头的内容（如果这样做，中断或异步回调（信号）或使用堆栈的任何其他活动将丢弃其内容）
*   您不会导致任何 CPU 异常（如果这样做，异常处理代码可能无法将堆栈展开到可以处理异常的最近点）

这同样适用于将不同的内存块用于临时堆栈并指向`esp`其末尾。

异常处理和堆栈展开的问题与您编译的 C 和 C++ 代码包含一些与异常处理相关的数据结构（如范围）有关，`eip`其中包含指向它们各自异常处理程序的链接（这告诉最近的异常处理程序在哪里是针对每一段代码的），还有一些与调用函数的标识相关的信息（即返回地址在堆栈上的位置等），因此您可以冒泡异常。如果你只是将原始机器代码插入到这个“框架”中，你将无法正确扩展这些异常处理数据结构来覆盖它，如果出现问题，它们很可能会出错（整个过程可能会崩溃或损坏，尽管您在生成的代码周围有异常处理程序）。

所以，是的，如果你小心，你可以玩筹码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T00:14:26.133

您可以将任何您喜欢的区域用于处理器的堆栈（以内存保护为模）。

本质上，您只需使用指向新区域的指针加载 ESP 寄存器（“MOV ESP，...”），但是您设法分配它。

您必须为*您的*程序提供足够的资源，以及它可能调用的任何东西（例如，Windows 操作系统 API），以及操作系统具有的任何有趣行为。您可能能够计算出您的代码需要多少空间；一个好的编译器可以很容易地做到这一点。弄清楚 Windows 需要多少更难；您总是可以分配“太多”，这是 Windows 程序倾向于做的事情。

如果您决定严格管理此空间，则可能必须切换堆栈以调用 Windows 函数。这还不够；您可能会被各种 Windows 惊喜所困扰。我在这里描述了其中之一[Windows: Avoid push full x86 context on stack](https://stackoverflow.com/q/994555/120163)。我有平庸的解决方案，但没有很好的解决方案。

# java - 从 .txt 将列表作为数组调用，需要显示平均值

> ID：15192007
> 
> 赞同：0
> 
> 时间：2013-03-03T23:03:51.327
> 
> 标签：java, arrays

.txt 文件如下所示：

```
Gator Ali 85
Vator Ella 75
Beam James 95
Lastin Class 55 
```

我见过其他人试图在这里获得类似的代码，但这些都没有帮助。
我可以得到平均值；但是，如果分数低于平均水平 10 分，我还需要打印出来。
这是我的输出：运行：

欢迎来到学生成绩申请表。

```
Ali Gator 85
Ella Vator 75
James Beam 95
Class Lastin 55
Beam, James: 95
Gator, Ali: 85
Lastin, Class: 55
Vator, Ella: 75

Your score is 10 points or more below the class average

Class Average: 77.5 
```

这是我的代码：

```
public static void main(String[] args) throws Exception {

    Scanner aScanner = new Scanner(new FileReader("src//chapt11//Studentdata.txt"));
    System.out.println("Welcome to the Student Scores Application.\n");

    int nStudent = 100;
    Student[] studentArray = new Student[nStudent];
    int counter = 0;
    while (aScanner.hasNext()) {
        String lastName = aScanner.next();
        String firstName = aScanner.next();
        int score = aScanner.nextInt();
        System.out.println(firstName + " " + lastName + " " + score);
        studentArray[counter++] = new Student(lastName, firstName, score);  
        Arrays.sort(studentArray, 0, counter); 
    } 

    System.out.println();

    for(int j = 0; j < counter; j++){  
        System.out.println(studentArray[j]);
    }

    double sum = 0;
    for(int j = 0; j < counter; j++){    
        sum += studentArray[j].getExamScore();
    }
    double average = (sum*1.0)/counter;

    for(int j = 0; j < counter; j++){    
        int score = studentArray[j].getExamScore();
        if (score <= (average - 10)){
             System.out.println("Your score is 10 points or more below the class average");
        } 
    }
    System.out.println();
    System.out.println("Class Average: " + average);

    System.out.println();
    aScanner.close();  
}

class Student implements Comparable<Student> {
private String firstName;
private String lastName;
private int score;

public Student(String firstName, String lastName, int score) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.score = score;
}

public int getExamScore() {
    return score;
}

public String getFirstName() {
    return firstName;
}

public String getLastName() {
    return lastName;
}

@Override
public int compareTo(Student s) {
    if(!firstName.equalsIgnoreCase( s.firstName)) {
        return firstName.compareToIgnoreCase(s.firstName);
    }
    if(!lastName.equalsIgnoreCase(s.lastName)) {
        return lastName.compareToIgnoreCase(s.lastName);
    }
        return score - s.score;
    }
 @Override 
 public String toString(){ 
        return firstName + ", " + lastName + ": "+ score;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:20:50.010

我发现您的代码存在一些问题。

首先，`Arrays.sort`每次添加 a`Student`到`studentArray`. 将此方法调用放在`while`排序完整数组的末尾之外，只需一次调用该方法。

其次，更重要的是，您希望如何`Student`比较对象？

里面的`compareTo`方法`Student`没有意义。如果您希望学生仅按他们的分数排序，您应该有这样的东西：

```
@Override
public int compareTo(Student s) {
    return this.score - s.score;
} 
```

就预期输出而言，这就是正在发生的事情。

以下行在`Student`将它们添加到数组时打印它们：

```
System.out.println(firstName + " " + lastName + " " + score); 
```

这部分再次打印每个`Student`对象：

```
for (int j = 0; j < counter; j++) {
    System.out.println(studentArray[j]);
} 
```

*并且仅*当`score <= (average - 10)`评估为 true时才会打印此行：

```
System.out.println("Your score is 10 points or more below the class average"); 
```

我相信你现在看到了问题。

# java - Selenium WebElement xpath Java

> ID：15192010
> 
> 赞同：5
> 
> 时间：2013-03-03T23:04:00.117
> 
> 标签：java, xml, selenium, xslt, xpath

我正在尝试使用 xpath 浏览网页，但我想出了一些混合的结果。这就是我正在使用的：

```
driver.findElement(By.xpath("//div[contains(@class, 'x-grid3-cell-inner x-grid3-col-0')]")); 
```

这实际上很好用，但我遇到的问题是：

```
<div class="x-grid3-cell-inner x-grid3-col-0" unselectable="on">92300</div>
<div class="x-grid3-cell-inner x-grid3-col-0" unselectable="on">92475</div>
<div class="x-grid3-cell-inner x-grid3-col-0" unselectable="on">92476</div>
<div class="x-grid3-cell-inner x-grid3-col-0" unselectable="on">92301</div>
<div class="x-grid3-cell-inner x-grid3-col-0" unselectable="on">92474</div> 
```

当我在我的 Selenium 测试中运行那个 xpath 时，我总是得到第一个 div。如何编辑我的 xpath 以检索第 4 个 div (92301) 或不是列表中第一个的其他 div？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T23:21:21.150

使用此 XPath`(//div[contains(@class, 'x-grid3-cell-inner x-grid3-col-0')])[4]`获得 4 ^(th) `div`。

要查找`div`包含`92301`文本的内容，请使用此 XPath：

```
//div[contains(text(), '92301')] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T23:23:56.947

你可以使用`WebElement.findElements()`：

```
driver.findElements(By.xpath(...)).get(3) 
```

或将 xpath 修改为：

```
driver.findElement(By.xpath("(//div[contains(@class, 'x-grid3-cell-inner x-grid3-col-0')])[4]")); 
```

# parsing - 使用 Bison 生成语法时出现语法错误

> ID：15192011
> 
> 赞同：0
> 
> 时间：2013-03-03T23:04:09.280
> 
> 标签：parsing, syntax-error, grammar, bison

作为一个测试文件，我正在使用这段代码来查看解析器是否运行良好：

```
/* A test program  */

void main(void){
int x;
int y;
    int z;

x= 10;
y = 20;
z =x* (x+y);
} 
```

但是，我在第一个 void 之后立即收到语法错误，我不太明白为什么它甚至不会到达参数部分。如果有任何提示或看到一些我可能没有看到的东西，我将不胜感激。我知道我还没有解决悬空的 else 问题，但这不应该成为这个测试的问题。

到目前为止，这是我的解析器：

```
%{

#include <stdio.h>
#include <string.h>
#include <stdlib.h>

/* external function prototypes */
extern int yylex();
extern int initLex(int ,  char **);

/* external global variables */

extern int      yydebug;
extern int      yylineno;

/* function prototypes */ 
void    yyerror(const char *);

/* global variables */

%}

/* YYSTYPE */

/* terminals */
/* Start adding token names here */
/* Your token names must match Project 1 */
/* The file cmparser.tab.h was gets generated here */

%token TOK_ERROR
%token TOK_ELSE 
%token TOK_IF
%token TOK_RETURN
%token TOK_VOID
%token TOK_INT
%token TOK_WHILE
%token TOK_PLUS
%token TOK_MINUS
%token TOK_MULT
%token TOK_DIV
%token TOK_LT
%token TOK_LE
%token TOK_GT
%token TOK_GE
%token TOK_EQ
%token TOK_NE
%token TOK_ASSIGN
%token TOK_SEMI
%token TOK_COMMA
%token TOK_LPAREN
%token TOK_RPAREN
%token TOK_LSQ
%token TOK_RSQ
%token TOK_LBRACE
%token TOK_RBRACE
%token TOK_NUM
%token TOK_ID

/* associativity and precedence */
/* specify operator precedence (taken care of by grammar) and associatity here -
-uncomment */

//%left

%left '*' '/'
%left '+' '-'
%nonassoc '<' '>' "<=" ">="
%left "==" "!=" 
%right  '=' 
%nonassoc error

/* Begin your grammar specification here */
%%

Start   : /* put your RHS for this rule here */
   Declarations
    { printf ("Declaration.\n"); }

; /* note that the rule ends with a semicolon */

Declarations    :
/* empty */
{}
| Vardeclaration Declarations
{ printf ("Var-declaration.\n");}
| Fundeclaration Declarations
{ printf ("Fun-declaration.\n");}
;

Vardeclaration  :   
Typespecifier TOK_ID ';'
{ printf ("Not an array.\n");}
| Typespecifier TOK_ID '[' TOK_NUM ']' ';'
{ printf ("An array.\n");}
;

Typespecifier   :
TOK_INT
{ printf ("Type int.\n");}
| TOK_VOID
{ printf("Type void.\n");}
;

Fundeclaration  :
Typespecifier TOK_ID '(' Params ')' Compoundstmt
{ printf ("Function Declaration.");}
;

Params  :
Paramlist
| TOK_VOID
{ printf ("Void param.\n");}
;

Paramlist   :
Paramlist ',' Param
| Param
;

Param   :
Typespecifier TOK_ID
| Typespecifier TOK_ID '[' ']'
;

Compoundstmt    :
'{' Localdeclaration Statement '}'
;

Localdeclaration    :
Vardeclaration Localdeclaration
| /* empty */
;

Statement   :
Expressionstmt Statement
| Compoundstmt Statement
| Selectionstmt Statement
| Iterationstmt Statement
| Returnstmt Statement
| /* empty */
;

Expressionstmt  :
Expression ';'
| ';'
;

Selectionstmt   :
TOK_IF '(' Expression ')' Statement
| TOK_IF '(' Expression ')' Statement TOK_ELSE Statement
;

Iterationstmt   :
TOK_WHILE '(' Expression ')' Statement
;

Returnstmt  :
TOK_RETURN ';'
| TOK_RETURN Expression ';'
;

Expression  :
Var '=' Expression
| SimpleExpression
;

Var :
TOK_ID
| TOK_ID '[' Expression ']'
;

SimpleExpression    :
AdditiveExpression Relop AdditiveExpression
| AdditiveExpression
;

Relop   :
"<="
| '<'
| '>'
| ">="
| "=="
| "!="
;

AdditiveExpression  :
AdditiveExpression Addop Term
| Term
;

Addop   :
'+'
| '-'
;

Term    :
Term Mulop Factor
| Factor
;

Mulop   :
'*'
| '/'
;

Factor  :
'(' Expression ')'
| Var
| Call
| TOK_NUM
;

Call    :
TOK_ID '(' Args ')'
;

Args    :
Arglist
| /* empty */
;

 Arglist    :
Arglist ',' Expression
| Expression
;
%%
void yyerror (char const *s) {
   fprintf (stderr, "Line %d: %s\n", yylineno, s);
}

int main(int argc, char **argv){

initLex(argc,argv);

#ifdef YYLLEXER
while (gettok() !=0) ; //gettok returns 0 on EOF
return;
#else
yyparse();

#endif

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:02:47.620

您的语法看起来不错，所以我最好的猜测是您的词法分析器无法将字符串识别`void`为`TOK_VOID`，而是返回其他内容。

在调用 yyparse 之前尝试编译你的解析器`-DYYDEBUG`并设置`yydebug = 1`，看看它从词法分析器中得到了什么。

# qt - 为 Raspberry Pi 交叉编译 Qt 5.0.1 时出错

> ID：15192013
> 
> 赞同：2
> 
> 时间：2013-03-03T23:04:27.017
> 
> 标签：qt, cross-compiling, raspberry-pi, raspbian, crosstool-ng

我正在尝试为我的 Raspberry Pi 交叉编译 Qt 5.0.1（目前的最新版本）。我的设置如下：

操作系统：Ubuntu 12.04 32 位

交叉编译器：由 crosstool-NG 程序构建，使用[此处找到的确切说明](http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler-for-your-raspberry-pi/)

Raspberry Pi 操作系统：Raspbian Wheezy 2013-02-09（安装在 /mnt/raspberry-pi-rootfs）

配置命令：

```
./configure -no-pch -opengl es2 -device linux-rasp-pi-g++ -device-option CROSS_COMPILE=/home/<myusername>/x-tools/arm-unknown-linux-gnueabi/bin/arm-unknown-linux-gnueabi- -sysroot /mnt/raspberry-pi-rootfs -opensource -confirm-license -optimized-qmake -reduce-exports -release -make libs -prefix /usr/local/qt5-raspberry-pi -v 
```

当我运行配置命令时，它总是失败并出现以下错误：

```
Could not determine the target architecture!

/mnt/raspberry-pi-rootfs/usr/include/features.h:323:26: fatal error: bits/predefs.h: No such file or directory 
```

有谁知道这是什么意思？

[我已经从这里](https://wiki.linaro.org/WorkingGroups/ToolChain)尝试了最新的预构建 Linaro Toolchain 交叉编译器，并且至少构建了 Qt，但是任何用它编译的程序都会在程序运行时导致 SIGILL（非法指令）错误，我猜这是因为预我使用的内置交叉编译器没有针对正确的架构。

**笔记：**

我知道交叉编译非常困难，但我想更多地了解正在发生的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:37:51.230

我不确定这条消息的确切原因是什么，但我设法从这里使用 Raspberry Pi 的预构建工具链进行了整理：

[https://github.com/raspberrypi/tools](https://github.com/raspberrypi/tools)

# wordpress - Wordpress：更改域名后出现403错误

> ID：15192019
> 
> 赞同：0
> 
> 时间：2013-03-03T23:05:01.573
> 
> 标签：wordpress, .htaccess, http-status-code-403

我在第三方虚拟主机 (www.hoststar.ch) 上安装了一个 wordpress 实例（版本 3.5.1）。服务器上的安装位于 /test/wordpress 的子目录中。当我安装 wordpress 实例时，我将 URL [http://test.example.com](http://test.example.com)作为 URL。现在我想将 URL 更改为[http://www.newexample.com](http://www.newexample.com)。我将新 URL 设置为指向服务器上与旧 URL 相同的子目录。但是当我打开新的 URL 时，服务器给了我一个 403 错误，告诉我：

> “您无权访问此服务器上的 /。”

我发现当我将 .htaccess 文件（wordpress 子目录之一，而不是根目录中的那个）中的条目“RewriteEngine On”更改为“RewriteEngine Off”时，它可以与新 URL 一起使用。但是，漂亮的永久链接不再起作用，因为 RewriteEngine 已关闭。

有人知道为什么当 RewriteEngine 设置为 On 时我无法使用新 URL 访问 wordpress 实例吗？

这是我的 .htaccess 文件：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T17:55:00.570

感谢您的评论和回答。最后是服务器上的 mod_rewrite 模块有问题。托管公司必须为新域名激活 mod_rewrite 才能使其正常工作。它仅针对旧域名激活。

干杯卢卡斯

# php - 如何从除数字之外的所有内容中去除 PHP 中的字符串

> ID：15192021
> 
> 赞同：2
> 
> 时间：2013-03-03T23:05:17.560
> 
> 标签：php, html, preg-replace

目前，当我`echo`保存一个字符串时，它看起来像这样：

> • 94% 正面 ·

我想要的只是：

> 94

我认为以下方法可以解决问题：

> preg_replace("/[^0-9]/","", $string)

但出于某种原因（我假设要点）这样做反而给了我这个：

> 94018332

任何帮助获得“94”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:09:30.940

您是对的，项目符号点作为 HTML 实体处理，因此包含数字。

但是，由于您的格式足够具体，您可以使用更好的正则表达式：

```
preg_match("/\d+(?=%)/",$string,$match);
$percentage = $match[0]; 
```

此正则表达式专门搜索紧跟百分号的数字（并且仅搜索第一个此类匹配项）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T23:09:35.897

您可以使用过滤器功能将数字过滤掉。

```
$yourString =  "• 94% positive";
$int = filter_var($yourString, FILTER_SANITIZE_NUMBER_INT);
echo $int; //WIll echo 94 
```

`[Demo](http://codepad.org/yBgBeXIl)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T23:09:07.973

如果您的号码总是在第一个和后面的字符上，您可以使用类似[`floatval`](http://php.net/manual/en/function.floatval.php)或的功能`intval`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-03T23:20:32.670

您只是尝试投射吗？

```
echo (int) trim("• 94% positive ·", "•  ·");
echo (int) trim("• 94% positive", "•  ·"); 
```

两者都应输出到：

```
94 
```

亲切的问候...

# django - 在端口 80 上托管多个网站

> ID：15192023
> 
> 赞同：1
> 
> 时间：2013-03-03T23:05:33.653
> 
> 标签：django, apache, mod-wsgi, virtualhost

所以我可能对这里发生的事情有一些基本的了解，但我无法让它发挥作用。我有两个 django 网站，我希望能够将它们都托管在同一个盒子上，都在端口 80 上。有什么魔法可以让它正常工作吗？这是我的站点可用/默认文件的样子：

```
<VirtualHost *:80>
    WSGIScriptAlias / /path/to/proj/apache/django.wsgi
    AliasMatch ^/([^/]*\.css) /path/to/proj/static/
    Alias /media /path/to/proj/static/
    Alias /static/ /path/to/proj/static/

    ErrorLog ${APACHE_LOG_DIR}/error.log
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

<VirtualHost *:80>
    WSGIScriptAlias / /path/to/otherproj/apache/django.wsgi

    ErrorLog ${APACHE_LOG_DIR}/error2.log
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

显然，这是行不通的，因为导航到该站点会命中第一个站点，而它永远不会转到第二个站点。所以我的问题是，我如何设置它，以便我可以在端口 80 上托管 2 个网站。也许我可以像 localhost/site1 和 localhost/site2 那样做，但无论我尝试什么，我都可以似乎无法让它发挥作用。

我玩过 ServerName 属性，但我真的不明白它是如何工作的，设置它似乎并没有改变点击那台机器的 ip 只显示第一个网站，我不知道在哪里使用ServerName 影响任何东西。

任何建议，或者让我知道是否需要提供更多信息。

另请注意，如果我将第二个更改为端口 8080，它们都可以工作，但是这样做时，我似乎无法将域名放在 myip:8080 之上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:21:56.750

我认为这里没有什么可以解释的。您只需要实际*指定*每个虚拟域的名称。

注意：**不推荐使用 NameVirtualHost**

```
<VirtualHost *:80>
    ServerName site1.ltd
    WSGIScriptAlias / /path/to/proj/apache/django.wsgi
    AliasMatch ^/([^/]*\.css) /path/to/proj/static/
    Alias /media /path/to/proj/static/
    Alias /static/ /path/to/proj/static/

    ErrorLog ${APACHE_LOG_DIR}/error.log
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

<VirtualHost *:80>
    ServerName site2.ltd
    WSGIScriptAlias / /path/to/otherproj/apache/django.wsgi

    ErrorLog ${APACHE_LOG_DIR}/error2.log
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

# java - 打开一个窗口并获取它的 URL？

> ID：15192024
> 
> 赞同：0
> 
> 时间：2013-03-03T23:05:36.890
> 
> 标签：java, security, applet, java-web-start

java applet 是否能够打开新的浏览器窗口并检索其最终 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:30:16.337

> java applet 是否能够打开新的浏览器窗口并检索其最终 URL？

不，这真的不关小程序的事。这是一个安全的事情。

想象一下，您控制一个打开无害窗口的小程序。我对此感到厌烦，并重新使用该窗口浏览 BigBustyBabes.com。最终 URL 不是我（作为用户）希望您的小程序知道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:22:10.230

此[链接](http://www.roseindia.net/java/example/java/applet/Opening-a-URL-from-an-Applet.shtml)可能有助于打开新 URL，但来自同一浏览器窗口。但是，假设您可以到达浏览器所在的路径，则可以轻松运行它。但是我认为使用 javascript 可以更轻松地完成此操作，至少在检索最终 URL 的部分，javascript 似乎是解决方案。

用 javascript打开一个[新窗口](http://www.w3schools.com/jsref/met_win_open.asp)`window.open(URL,name,specs,replace)`： .
使用 javascript 检索 URL`document.URL`

# function - 尝试在 Lua 中调用函数时出现 Nil 错误

> ID：15192028
> 
> 赞同：2
> 
> 时间：2013-03-03T23:05:59.043
> 
> 标签：function, lua, lua-table

我遇到了一个奇怪的错误，我终生无法破解。

我正在编写纸牌游戏，我有两张不同长度的桌子。一个将条目链接到功能，另一个持有打出的牌。第一个表是牌组中某些牌的属性。

```
ATTRIBUTES = {  
        Reset   = RuleBook.Do_Reset,
        Go_Lower= RuleBook.Do_Go_Lower,
        Mirror  = RuleBook.Do_Mirror} 
```

这些函数的调用方式如下：

```
ATTRIBUTES[cardPile[#cardPile].Attribute]() 
```

我已经打印出了卡片对象和 ATTRIBUTES 表的内容，并且两者都完全完好无损。具有属性的卡片在函数的 Attribute 下有一个表条目，这些卡片链接到 Do_... 函数。然而，上面的代码行似乎不起作用。如果有人有想法或建议，他们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:57:38.360

Lua 基本上允许您使用任何类型的 lua 值作为表中的键。上面代码的问题是您的`ATTRIBUTE`表使用字符串作为键，但`cardPile[#cardPile].Attribute`它是一个函数而*不是*字符串。

当您在此处执行查找时：

```
ATTRIBUTES[cardPile[#cardPile].Attribute]() 
```

您是说在`ATTRIBUTES`拥有作为函数的键时查找相应的值`cardPile[#cardPile].Attribute`。您`ATTRIBUTES`定义的表仅包含字符串作为键 - 它没有作为键的功能，因此返回 nil 。

对此有两个可能的修复：

假设`cardPile`'s`Attribute`字段已经引用了你想要的函数，你可以这样调用它：

```
cardPile[#cardPile].Attribute() 
```

另一种方法是更改​​设置字段`card_obj`的`Attribute`方式-使其引用字符串而不是函数：

```
function Card.Create(Suit, Number, Name)
  local card_obj = {}
  -- ...
  if( card_obj.number == 1 ) then
    card_obj.Attribute = "Reset"
  elseif( card_obj.number == 6 ) then
    card_obj.Attribute = "Go_Lower"
  -- ... etc.
  else
    card_obj.Attribute = nil;
  end
end 
```

# function - 通过函数传递值

> ID：15192029
> 
> 赞同：0
> 
> 时间：2013-03-03T23:06:00.683
> 
> 标签：function, visual-c++, c++-cli, readprocessmemory

我正在尝试在 VisualC++ 中为 ReadProcessMemory 和 WriteProcessMemory 创建自己的函数，因此我不必在每次创建新函数调用时都输入所有信息。这个项目是 Windows 窗体。这就是问题所在

```
void Read(DWORD Add, int Value);

private: System::Void btnP1Money_Click_1(System::Object^  sender, System::EventArgs^e) 
{   
int BigMoney = 100000;
int GetMoneyValue;
DWORD MonAddr = 0x180A6C8;

Read(MonAddr, GetMoneyValue);
}

void Read(DWORD Add, int Value)
{
HWND window = FindWindow(0, _T("Process Window Name"));
DWORD pID = NULL;
DWORD base = dwGetModuleBaseAddress(pID, _T("Game.exe"));
HANDLE handle = OpenProcess(PROCESS_ALL_ACCESS, FALSE, pID);
GetWindowThreadProcessId(window, &pID);

ReadProcessMemory(handle, (LPCVOID)(base+Add), &Value, 4, NULL);
} 
```

游戏中的值为 500，但从 Read() 返回的值为 0。不知道我做错了什么。我只是不想在每次单击按钮和复选框时都在我的 Read() 函数中定义所有内容。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:07:07.190

您需要通过引用传递，否则该函数将获得自己的副本`int`：

```
void Read(DWORD Add, int& Value); 
```

或者，您可以返回值：

```
int Read(DWORD Add, int Value)
{
  ....
  return Value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T12:26:19.577

您应该将`Read`标题修改为

```
void Read(DWORD Add, int& Value) 
```

我写了一个有效的小例子。确保检查变量的内容，而不是地址

```
void Read(int& Value)
{
    Value++;
}

int main(array<System::String ^> ^args)
{
    int GetMoneyValue = 5;
    Read(GetMoneyValue);

    Console::WriteLine(GetMoneyValue);
    //6;
    return 0;
} 
```

# c#-4.0 - 从 KeyValuePair 获取密钥参考

> ID：15192031
> 
> 赞同：0
> 
> 时间：2013-03-03T23:06:11.807
> 
> 标签：c#-4.0, dictionary, keyvaluepair

我有以下课程。

```
public class myType
{
  public event Action myAction;
} 
```

还有一个包含该类的一些实例的字典。

```
var myDictionary = new Dictionary<myType, string>(); 
```

在我的 Main 我有一个带有签名的方法 void SomeMethod(myType, Dictionary)

通过以下循环，我添加了对象的行为：

```
foreach(var pair in myDictionary)
  pair.Key.myAction += () => SomeMethod(pair.Key, myDictionary); 
```

运行此循环后，当调用我的一个对象的操作时，效果就好像循环已使用字典中的最后一个 pair.Key 来处理所有 lambda 表达式。

另一方面，循环中有一个小的变化：

```
foreach(var pair in myDictionary)
{
  myType temp = pair.Key;
  pair.Key.myAction += () => SomeMethod(temp, myDictionary);
} 
```

运行此循环后，所有对象操作都按预期工作。

我有点不知所措，为什么这样的改变会产生这样的效果。键值对可能是一个结构，键本身是一个引用类型（我的类的一个实例）。任何想法为什么会这样？

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:31:03.993

> 运行此循环后，当调用我的一个对象的操作时，效果就好像循环已使用字典中的最后一个 pair.Key 来处理所有 lambda 表达式。

是的，这正是正在发生的事情。您有一个变量`pair`供所有事件处理程序使用。在循环之后，变量包含循环中最后一项的键。

通过在作用域中创建一个局部变量并在 lambda 表达式中使用它，您实际上是在为每个事件处理程序创建一个闭包。局部变量不作为常规局部变量存储在堆栈中，而是存储在闭包中，并且由于每个事件处理程序都有自己的闭包，因此您会为每个事件处理程序获得一个版本的局部变量。

（第一个代码也有一个闭包，但这只是为了让变量在当前范围内存活，事件处理程序共享相同的闭包。）

# javascript - jQuery 表格图像

> ID：15192037
> 
> 赞同：2
> 
> 时间：2013-03-03T23:07:05.753
> 
> 标签：javascript, jquery, html, html-table

编写一个 jQuery 函数来测试 a 的类`<td>`并采取相应的行动。该功能通过单击`img`内部来工作，`<td>`并使用 的类信息`td`进行测试。

```
$(document).ready(function () {
$('td img').click(function () {
    if ((this).parent().hasClass('x')) {
        alert("Seat " + ((this).parent().attr("id")) + " is taken");
    } else if ((this).parent().hasClass('selected')){
        $(this).attr('src', 'images/a.gif');
        $(this).parent().removeClass('selected');
        alert($(this).parent().attr("class"));
        return false;
        } else {
        $(this).attr('src', 'images/c.gif');
        $(this).parent().addClass('selected');
        alert($(this).parent().attr("class"));
        return false;
        };
    });
}); 
```

该错误表示图像的方法不存在，尽管我指定了父级。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:09:40.317

有一个`$`标志不见了。

```
If($(this).parent()... 
```

这里发生的是 click 函数传递 dom/html 对象而不是 jQuery 对象，因此您必须使用 jQuery 函数构建对象才能使用正确的对象！

# ant - 多次运行 ant 目标，但替换它引用的文件集

> ID：15192041
> 
> 赞同：3
> 
> 时间：2013-03-03T23:07:15.540
> 
> 标签：ant, build.xml, fileset

我有一个 Ant 目标，它在具有特定名称的文件集上运行单元测试，在目标内部进行硬编码。

我想多次调用该目标，每次将文件集设置为一个新值。我无法更改目标查找的文件集的名称，我只能在调用目标之前定义文件集。

是否可以像这样调用目标，并在每次目标调用期间重新定义相同的文件集？

# charts - 如何删除 SSRS 图表上的这些交替带

> ID：15192042
> 
> 赞同：0
> 
> 时间：2013-03-03T23:07:16.930
> 
> 标签：charts, reporting-services

简单的问题。但我似乎无法找到答案。

我尝试将背景图案和样式设置为无。

* * *

## ![在此处输入图像描述](../Images/dc6b344400640fb16a844e98fea7d6a0.png)

一定是我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:19:43.923

我想我已经找到了。

您单击`Axis Properties`并选择`Axis Options`然后删除检查`Use Interlace Colour`

![在此处输入图像描述](../Images/450b71a50a6019e015db78b424f0188c.png)

等等！

![在此处输入图像描述](../Images/6c6bfabbd5ca55cb589db1881c22f56d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:00:30.270

我假设您使用的是 2008，因为它没有被提及 - 如果我需要更新它，请告诉我。

右键单击**轴**并确保`Show Major Gridlines`未选中：

![在此处输入图像描述](../Images/76418fcc21cc5632e683bc3ab728312e.png)

**评论后编辑：**

您可以在图表中使用波段的另一种方法是通过**Striplines**。**您是否在此属性下为您的Axis**设置了任何内容？

![在此处输入图像描述](../Images/2b740d60fdef2e056a751eb269178dbc.png)

**删除Collection**中存在的任何内容。

# .htaccess - htaccess mod_rewrite - 将所有 url 重新路由到索引，除了 /admin

> ID：15192044
> 
> 赞同：1
> 
> 时间：2013-03-03T23:07:50.553
> 
> 标签：.htaccess, url, mod-rewrite, rewrite

我在 htaccess 文件中设置了一小组重写规则，我希望每个 url 都转到 index.php 文件，但我想重定向到 admin.php 的 /admin 除外。不幸的是，对 mod_rewrite 或 regexp 不太熟悉。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^admin$ admin.php [L]
    RewriteRule . /index.php [L]
</IfModule> 
```

这给了我一个内部服务器错误（不是说 500）。删除或取消注释管理员重写使其工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:59:46.483

需要对 index.php 重写规则应用条件，否则会导致重定向循环。A`RewriteCond`仅应用于紧随其后`RewriteRule`的，因此将所有内容路由到索引的规则没有条件。尝试重新排列线条：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^admin$ admin.php [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

# perl - Perl Image::Magick 获取内存内容

> ID：15192048
> 
> 赞同：3
> 
> 时间：2013-03-03T23:08:01.733
> 
> 标签：perl, memory, imagemagick

我[`Image::Magick`](https://metacpan.org/module/Image%3a%3aMagick)用来修改我的图像。然后我使用[`HTTP::Request`](https://metacpan.org/module/HTTP%3a%3aRequest)将图像内容发送到 API。

`HTTP::Request`有一个`content`方法可以让你设置请求的内容，但显然这需要你在内存中有内容。

我知道我可以通过打开一个文件并读取它来将图像的内容读入一个变量。但是，由于`Image::Magick`内存中已经有图像的内容，有什么方法可以通过我的`Image::Magick`对象获取它？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T23:55:42.170

`Image::Magick`将图像以自定义格式保存在内存中，以使其更简单有效地操作。在将数据写入文件之前，它必须将数据压缩为 JPEG、PNG 或您要求的任何格式，因此您不能只访问内存中的图像。

但是，该模块的`ImageToBlob`方法将提供它已写入磁盘的数据的内存副本，以节省您将其写出并再次读取它的时间。

请注意，它返回一个图像列表以允许包含多个帧的对象，因此如果您只有一个帧，则必须编写

```
my @blobs = $image->ImageToBlob;
$request->content($blobs[0]); 
```

或者

```
my ($blob) = $image->ImageToBlob;
$request->content($blob); 
```

# django - django 在 url 模板标签中使用另一个字段而不是 id

> ID：15192049
> 
> 赞同：1
> 
> 时间：2013-03-03T23:08:04.353
> 
> 标签：django

我正在使用 Django 1.5

我在 html 文件中有这段代码

```
{% for p in latest_posts %}
      <li><a href="{% url 'blog:detail' p.id %}">{{p.title}}</a></li>
{% endfor %} 
```

如果我将 p.id 更改为 p.title

```
{% for p in latest_posts %}
      <li><a href="{% url 'blog:detail' p.title %}">{{p.title}}</a></li>
{% endfor %} 
```

然后我收到以下错误

```
Reverse for 'detail' with arguments '(u'Second post',)' and keyword arguments '{}' not found. 
```

我希望 url 是 /title 而不是 /id。

这是我的 urls.py 文件

```
urlpatterns = patterns ('',

    url(r'^(?P<title>\w+)/$',
            PostDetailView.as_view(),
            name = 'detail'
        ),
) 
```

我应该只使用 get_absolute_url 吗？

**更新**

我添加了 slug 字段，但它仍然不起作用

```
{% url 'blog:detail' p.slug %} 
```

我得到的错误是

```
Reverse for 'detail' with arguments '(u'third-post',)' and keyword arguments '{}' not found. 
```

**后模型**

```
class Post(models.Model):
    title = models.CharField(max_length = 225)
    body = models.TextField()
    slug = models.SlugField()
    pub_date = models.DateTimeField()
    modified = models.DateTimeField(auto_now=True)
    created = models.DateTimeField(auto_now_add=True)

    def __unicode__(self):
        return self.title 
```

管理员更新了

```
class PostAdmin(admin.ModelAdmin):
    prepopulated_fields = {"slug" : ("title",)}

admin.site.register(Post, PostAdmin) 
```

如果这有效

```
<a href="{% url 'blog:detail' p.id %}">{{p.title}}</a> 
```

为什么这不起作用

```
<li><a href="{% url 'blog:detail' p.slug %}">{{p.title}}</a></li> 
```

**更新**

PostDetailView

```
class PostDetailView(DetailView):

    template_name = 'blogapp/post/detail.html'

    def get_object(self):
        return get_object_or_404(Post, slug__iexact = self.kwargs['slug']) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:19:00.863

您将要研究的一件事是一个[slugfield](https://docs.djangoproject.com/en/dev/ref/models/fields/#slugfield)，它将允许您拥有能够在 url 中使用的数据。Slug 只能包含字母、数字、下划线或连字符。从那里您很可能希望覆盖模型的`save`方法来设置并确保 slugfield 是唯一的。然后，您可以使用该字段作为您的 url 的标识符。然后，您可以执行一些操作，例如`{% url 'blog:detail' slug=p.slug %}`假设您为该字段命名`slug`。此外，正如在另一个答案中指出的那样，如果您确实使用它，则需要修复您的 url 以查找 slug。

```
urlpatterns = patterns ('',

    url(r'^(?P<slug>[\w-]+)/$',
        PostDetailView.as_view(),
        name = 'detail'
    ), 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T01:13:31.470

如果您使用的是通用详细视图，它需要一个 id 或一个 slug 值。

但是，在您的 URL 配置中，您将命名变量指定为“标题”。尝试将其更改为“slug”：

```
urlpatterns = patterns ('',

    url(r'^(?P<slug>\w+)/$',
            PostDetailView.as_view(),
            name = 'detail'
        ),
) 
```

# wpf - WPF 在哪里执行矩阵运算？

> ID：15192051
> 
> 赞同：0
> 
> 时间：2013-03-03T23:08:09.150
> 
> 标签：wpf, gpu

我想知道如果我在具有 GPU 的系统上使用 WPF 应用程序，它会在 GPU 上进行矩阵运算吗？

我的第一个猜测是否定的，但我看到它非常快，例如，当我们进行 3D 投影时，我确信它正在 GPU 上进行投影。

如何找到在 GPU 上运行的方法以及在 CPU 上运行的方法？

# java - 没有为相机调用Android onPreviewFrame回调

> ID：15192053
> 
> 赞同：0
> 
> 时间：2013-03-03T23:08:52.440
> 
> 标签：java, android, callback, android-camera

我正在尝试从 onPreviewFrame(byte[] data, Camera camera) 获取数据。但这似乎不起作用。你看到这段代码有什么问题吗？其中大部分直接来自[http://developer.android.com/training/camera/cameradirect.html](http://developer.android.com/training/camera/cameradirect.html)

```
public class UAVCamera extends Thread {

    Camera mCamera;
    CameraPreview mPreview;

    public UAVCamera(Context context) {
        mPreview = new CameraPreview(context);
    }

    @Override
    public void run() {
        safeCameraOpen();
        mPreview.setCamera(mCamera);
    }

    private boolean safeCameraOpen() {
        boolean qOpened = false;

        try {
            releaseCameraAndPreview();
            mCamera = Camera.open();
            qOpened = (mCamera != null);
        } catch (Exception e) {
            //Log.e(getString(R.string.app_name), "failed to open Camera");
            e.printStackTrace();
        }

        return qOpened;    
    }

    private void releaseCameraAndPreview() {
        mPreview.setCamera(null);
        if (mCamera != null) {
            mCamera.release();
            mCamera = null;
        }
    }
} 
```

这是我的预习课

```
class CameraPreview extends ViewGroup implements SurfaceHolder.Callback {

    SurfaceView mSurfaceView;
    SurfaceHolder mHolder;
    Camera mCamera;

    CameraPreview(Context context) {
        super(context);

        mSurfaceView = new SurfaceView(context);
        addView(mSurfaceView);

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = mSurfaceView.getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    private void stopPreviewAndFreeCamera() {

        if (mCamera != null) {
            /*
              Call stopPreview() to stop updating the preview surface.
            */
            mCamera.stopPreview();

            /*
              Important: Call release() to release the camera for use by other applications. 
              Applications should release the camera immediately in onPause() (and re-open() it in
              onResume()).
            */
            mCamera.release();

            mCamera = null;
        }
    }

    public void setCamera(Camera camera) {
        if (mCamera == camera) { return; }

        stopPreviewAndFreeCamera();

        mCamera = camera;

        if (mCamera != null) {

            try {
                mCamera.setPreviewDisplay(mHolder);
            } catch (IOException e) {
                e.printStackTrace();
            }

            /*
              Important: Call startPreview() to start updating the preview surface. Preview must 
              be started before you can take a picture.
              */
            mCamera.startPreview();            
            mCamera.setPreviewCallback(new PreviewCallback() {

                  public void onPreviewFrame(byte[] data, Camera camera) {

                  }
                });
        }
    }

    @Override
    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceCreated(SurfaceHolder arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onLayout(boolean arg0, int arg1, int arg2, int arg3, int arg4) {
        // TODO Auto-generated method stub

    }
} 
```

这是我的活动

```
public class MainActivity extends Activity {

    private UAVCamera uavCamera;    

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        uavCamera = new UAVCamera(this);
        uavCamera.start();
    }                           
} 
```

我什至不需要向用户展示图片。我只需要获取数据。有可能这样做吗？我在 onPreviewFrame(byte[] data, Camera camera) 上设置了一个断点，但它永远不会被击中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:37:24.240

您应该使用 `setPreviewCallbackWithBuffer (Camera.PreviewCallback cb)`而不是`setPreviewCallback`. 并且，使用添加回调缓冲区`addCallbackBuffer(byte[])`

使用时`addCallbackBuffer(byte[])`，字节长度大于预览大小（宽度*高度）。然后，我认为您可以在`onPreviewFrame`方法中获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:51:38.703

我按照[http://developer.android.com/guide/topics/media/camera.html#custom-camera](http://developer.android.com/guide/topics/media/camera.html#custom-camera)上的说明进行操作 问题是我没有创建活动。我想将其作为服务运行，即使屏幕未打开也能够获取此信息。不知道该怎么做。

# java - 为什么我的字数和字数被取消了？

> ID：15192055
> 
> 赞同：0
> 
> 时间：2013-03-03T23:09:02.340
> 
> 标签：java, regex, string, text, word-count

给定以下字符串：

> String text = "树林\n可爱，\t\t又黑又深。";

我希望所有空格都被视为单个字符。例如，`\n`是 1 个字符。`\t\t`也应该是 1 个字符。按照这个逻辑，我数了 36 个字符和 7 个单词。但是当我通过以下代码运行它时：

```
String text = "The woods are\nlovely,\t\tdark and deep.";

int numNewCharacters = 0;
for(int i=0; i < text.length(); i++)
    if(!Character.isWhitespace(text.charAt(i)))
        numNewCharacters++;

int numNewWords = text.split("\\s").length;

// Prints "30"
System.out.println("Chars:" + numNewCharacters);

// Prints "8"
System.out.println("Words:" + numNewWords); 
```

它告诉我有 30 个字符和 8 个单词。关于为什么的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T23:11:21.650

您正在匹配单个空格。相反，您可以匹配*一个或多个*：

```
text.split("\\s+") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:16:44.130

您在第一个循环中只计算非空白字符 - 所以根本不计算空格等。那么30是正确答案。至于第二个 - 我怀疑 split 将连续的空格视为不同的，因此两个选项卡之间有一个“空”字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T23:17:25.130

Reimueus 已经解决了你的字数问题：

```
text.split("\\s+") 
```

而且您的字符数是正确的。换行符`\n`和制表符`\t`被视为空白。如果您不希望它们成为，您可以实现自己的`isWhitespace`功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T23:45:11.460

这是计算单词和字符的完整解决方案：

```
 System.out.println("Characters: " + text.replaceAll("\\s+", " ").length());
    Matcher m = Pattern.compile("[^\\s]+", Pattern.MULTILINE).matcher(text);
    int wordCount = 0;
    while (m.find()) {
        wordCount ++;
    }
    System.out.println("Words: "+ wordCount); 
```

字符计数是通过将所有空白组替换为单个空格并仅获取结果字符串的长度来完成的；

对于字数统计，我们创建了一个匹配任何不包含空格的字符组的模式。您可以在此处使用**\\w+**模式，但它只会匹配字母数字字符和下划线。还要注意**Pattern.MULTILINE**参数。

# php - 为什么没有“标头已发送”错误？

> ID：15192056
> 
> 赞同：2
> 
> 时间：2013-03-03T23:09:05.293
> 
> 标签：php

我写了这段代码，应该会导致错误，但没有显示错误！

```
<?php
    error_reporting(-1);
    echo "s";
    header("Location: /index2.php");
?> 
```

因为`header()`是在 之后`echo`，PHP 应该报错，*标头已经发送*；但没有显示错误，页面成功重定向到`index2.php`！

我怎样才能看到错误？为什么会发生重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:24:17.230

检查[输出缓冲](http://www.php.net/manual/en/outcontrol.configuration.php#ini.output-buffering)是否被激活。

它与 ob_start 相同，但隐含。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:49:15.710

真的，我第一次看到真正想看到标头的人已经发送了错误。通常会冒犯我的事情。因为我通过使用 ob_start() 和 ob_flush 来解决它，所以我认为在你的情况下，服务器正在为你解决缓冲区问题。

尝试使用 PHP ob_end_flush() 关闭缓冲区。或阅读：[https ://stackoverflow.com/a/6386034/827224](https://stackoverflow.com/a/6386034/827224)

# r - R中的“意外符号”

> ID：15192066
> 
> 赞同：3
> 
> 时间：2013-03-03T23:10:45.293
> 
> 标签：r

我不知道为什么我不断收到此错误

```
Error: unexpected symbol in:
"  ans <- logver(theta)-logver(est)
  return exp"
> }
Error: unexpected '}' in "}" 
```

这是我的代码：

```
n <- 27
sum <- 30 + 28 + 26 + 22 + 26 + 27 + 25 + 18 + 34 + 33 + 20 + 25 + 27 + 33 + 31 + 27 + 21 + 30 + 26 + 24 + 30 + 33 + 17 + 28 + 21 + 30 + 27

precision<-0.1                #precision de la rejilla
intervalo<-1                  #parámetro del tamaño del intervalo a graficar

logver <- function (theta) {
  return -27 * theta + log (theta) * sum
}

est<- sum / n;
VR <- function (theta) {              #Verosimilitud Relativa (RV)
  ans <- logver(theta)-logver(est)
  return exp(ans)
} 
```

虽然，如果我删除“exp”函数调用，它工作正常。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T23:13:10.717

你没有括号`return`

```
return(exp(ans)) 
```

# asp.net-web-api - 使用 WebAPI 和 RavenDB 进行基本会话处理

> ID：15192068
> 
> 赞同：6
> 
> 时间：2013-03-03T23:10:59.017
> 
> 标签：asp.net-web-api, ravendb

使用它作为基础 APIController，想法？主要是我对处理 dispose 中的 savechanges 与我在其他地方看到的 ExecuteAsync 方法感到好奇......

```
using System;
using System.Net.Http;
using System.Threading;
using System.Threading.Tasks;
using System.Web.Http;
using System.Web.Http.Controllers;
using Raven.Client;
using Raven.Client.Document;

public abstract class RavenDbController : ApiController
{
    private IDocumentStore _documentStore;

    public IDocumentStore Store
    {
        get { return _documentStore ?? (_documentStore = LazyDocStore.Value); }
        set { _documentStore = value; }
    }

    protected override void Initialize(HttpControllerContext controllerContext)
    {
        Session = Store.OpenSession();
        base.Initialize(controllerContext);
    }

    protected override void Dispose(bool disposing)
    {
        using (Session)
        {
            Session.SaveChanges();
        }
    }

    public IDocumentSession Session { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T07:29:49.030

我更喜欢使用操作过滤器属性来管理基本 API 控制器上会话对象的生命周期。请参阅以下演示此方法的代码：

```
public class RavenSessionManagementAttribute : ActionFilterAttribute
{
    private readonly IDocumentStore store;

    public RavenSessionManagementAttribute(IDocumentStore store)
    {
        if (store == null) throw new ArgumentNullException("store");    
        this.store = store;
    }

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        var controller = actionContext.ControllerContext.Controller as AbstractApiController;
        if (controller == null)
            return;

        // Can be set explicitly in unit testing
        if (controller.RavenSession != null)
            return;

        controller.RavenSession = store.OpenSession();
        controller.RavenSession.Advanced.UseOptimisticConcurrency = true;
    }

    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        var controller = actionExecutedContext.ActionContext.ControllerContext.Controller as AbstractApiController;
        if (controller == null)
            return;

        using (var session = controller.RavenSession)
        {
            if (session == null)
                return;

            if (actionExecutedContext.Exception != null)
            {
                session.SaveChanges();
            }
        }
    }
} 
```

过滤器配置.cs：

```
public class FilterConfig
    {
        public static void RegisterGlobalFilters(HttpFilterCollection filters)
        {
            filters.Add(new RavenSessionManagementAttribute(DocumentStoreHolder.Store));
        }
    } 
```

AbstractApiController.cs：

```
public abstract class AbstractApiController : ApiController
    {
        public IDocumentSession RavenSession { get; set; }
    } 
```

# twitter-bootstrap - 所有 IE 版本的标签崩溃页面上的 Bootstrap.css “font-family”！（windows7 64位机）

> ID：15192072
> 
> 赞同：0
> 
> 时间：2013-03-03T23:11:11.950
> 
> 标签：twitter-bootstrap

我使用的是Bootstrap v2.3.1的更新版本，它在IE上崩溃了，我的机器是Windows 7 64位，我已经尝试了我所有的IE版本浏览器，它都崩溃了，说“Internet Explorere受限此网页来自运行脚本或 ActiveX 控件”，然后我关闭此消息，然后页面变为空白，无论您使用哪种默认背景颜色。

然后我尝试关闭 bootstrap.css，网站在 IE 上显示文本等。然后我尝试访问官方站点[http://twitter.github.com/bootstrap/index.html](http://twitter.github.com/bootstrap/index.html)，它在 IE 上显示相同的错误消息。其他浏览器都很好！

然后我回到 bootstrap.css，并尝试调试它，我发现如果我删除 line font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; 来自网站在 IE 屏幕上显示的标签！但当然样式有点乱，导致字体丢失，但页面最终显示在 IE 上！

以前有人遇到过这个问题吗？你知道如何解决这个问题吗？它在 IE 上显示非常难看，如果我放回任何字体系列样式，页面再次崩溃......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T13:26:19.997

近一年来，我一直无法在 Windows 7 64 位上使用我的 IE。它会切换到兼容模式，然后在我访问过的几乎 70% 的网站上崩溃。经过大量的故障排除和研究，我发现我机器上安装的 Helvetica 字体与 Windows 7 或 IE 不完全兼容。自从从我的机器上卸载 Helvetica 字体后，IE 一直运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:37:03.940

我有同样的问题，它似乎是导致问题的前两种字体，我将属性更改为....

字体系列：Arial，无衬线；

它看起来不错，只要你喜欢 Arial！如果不尝试另一种字体。

# objective-c - 在 iOS 6 中快速保存多张图片（自定义相册）

> ID：15192074
> 
> 赞同：2
> 
> 时间：2013-03-03T23:11:28.963
> 
> 标签：objective-c, ios6

我正在编写一个应用程序，它将从 URL 中获取几张图像，将它们转换为 UIImage，然后将它们添加到照片库中，然后添加到自定义相册中。我不相信在不将它们放在相机胶卷中的情况下将它们添加到自定义相册中是不可能的，所以我接受它是不可能的（但如果可能的话，那将是理想的）。

我的问题是我正在使用[该站点](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)的代码并且它确实有效，但是一旦它处理较大的照片，它就会返回一些“写忙”。如果我将函数复制到它自己的完成代码中，然后再复制到下一个函数中，我已经成功地将它们全部保存，依此类推，直到 6（我看到的最多是 3-4，但我不知道图像，我可以得到一些非常大的图像） - 这导致了一个问题，即它们没有全部包含在自定义相册中，因为它们在这个阶段也出错了，并且没有任何障碍可以让它重复.

我知道实际的图像保存被移动到后台线程（虽然我没有专门设置这个），因为我的代码在错误开始出现之前返回，但理想情况下我需要排队图像以保存在单个背景上线程，因此它们同步发生但不会冻结 UI。

我的代码如下所示：

```
UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:singleImage]]];
    [self.library saveImage:image toAlbum:@"Test Album" withCompletionBlock:^(NSError *error) {
        if (error!=nil) {
            NSLog(@"Error");
        }
    }]; 
```

我已经删除了代码的重复，否则代码示例会很长！它以前是 NSLog 代码存在的地方。

对于我的测试样本，我正在处理 25 张图像，但这可能很容易达到 200 张左右，并且分辨率可能非常高，因此我需要能够可靠地一遍又一遍地执行此操作而不会丢失多张图像的东西。

谢谢罗伯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T20:06:51.677

我已经设法通过剥离保存图像代码并将其移动到它自己的函数中使其工作，该函数在对象的数组上递归调用自身，如果它失败，它会将相同的图像重新解析回函数，直到它成功工作完成后将显示“完成”。因为我使用了 completedBlock: from 函数来完成循环，所以每次运行它只运行一个文件保存。

这是我递归使用的代码：

```
- (void)saveImage {

if(self.thisImage)
{
    [self.library saveImage:self.thisImage toAlbum:@"Test Album" withCompletionBlock:^(NSError *error) {
        if (error!=nil) {
            [self saveImage];
        }
        else
        {
            [self.imageData removeObject:self.singleImageData];
            NSLog(@"Success!");
            self.singleImageData = [self.imageData lastObject];
            self.thisImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:self.singleImageData]]];
            [self saveImage];
        }
    }];
}
else
{
    self.singleImageData = nil;
    self.thisImage = nil;
    self.imageData = nil;
    self.images = nil;
    NSLog(@"Done!");
} 
```

}

为了设置它，我最初使用了一组 UIImages，但这使用了大量内存并且非常慢（我正在测试多达 400 张照片）。我发现一个更好的方法是将 URL 的 NSMutableArray 存储为 NSString，然后在函数中执行 NSData GET。

以下代码是使用数据设置 NSMutableArray 然后调用该函数的代码。它还将第一个 UIImage 设置到内存中并将其存储在 self.thisImage 下：

```
NSEnumerator *e = [allDataArray objectEnumerator];
NSDictionary *object;

while (object = [e nextObject]) {
    NSArray *imagesArray = [object objectForKey:@"images"];
    NSString *singleImage = [[imagesArray objectAtIndex:0] objectForKey:@"source"];
    [self.imageData addObject:singleImage];
}

self.singleImageData = [self.imageData lastObject];
self.thisImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:self.singleImageData]]];
[self saveImage]; 
```

这意味着 UIImage 的其余 getter 可以包含在函数中，并且可以监视 UIImage 的单个实例。我还将原始 URL 记录到 self.singleImageData 中，以便我可以从数组中删除正确的元素以停止重复。

这些是我使用的变量：

```
self.images = [[NSMutableArray alloc] init];
self.thisImage = [[UIImage alloc] init];
self.imageData = [[NSMutableArray alloc] init];
self.singleImageData = [[NSString alloc] init]; 
```

这个答案应该适用于任何使用[http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)的 iOS 6（在 iOS 6.1 上测试）并且应该导致所有图片都正确保存并且没有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:52:24.247

如果 saveImage:toAlbum:withCompletionBlock 它正在使用 dispatch_async 我担心对于 i/o 操作会产生太多线程：您触发的每个写入任务都被前一个阻塞（因为仍在同一个队列上执行 I/O），所以 gcd将创建一个新线程（通常 global_queue 上的 dispatch_async 由 gcd 通过使用优化的线程数进行优化）。

如果我没记错的话，您应该使用信号量同时将写入操作限制为固定数量，或者使用 iOS 5 提供的 dispatch_io_ 函数。有很多关于如何用这两种方法做到这一点的例子。

一些用于给出想法的即时代码：

```
 dispatch_semaphore_t aSemaphore = dispatch_semaphore_create(4);
 dispatch_queue_t ioQueue = dispatch_queue_create("com.customqueue", NULL);

 // dispatch the following block to the ioQueue
 // ( for loop with all images )
 dispatch_semaphore_wait(aSemaphore , DISPATCH_TIME_FOREVER);
 [self.library saveImage:image 
                 toAlbum:@"Test Album"
     withCompletionBlock:^(NSError *error){
          dispatch_semaphore_signal(aSemaphore);
     }]; 
```

所以每次你最多有 4 个 saveImage:toAlbum，一旦一个完成，另一个就会开始。您必须创建一个自定义队列，就像上面一样（ioQueue）在哪里调度对图像执行 for 循环的代码，因此当信号量等待时，主线程不会被阻塞。

# android - .takePicture 上的相机错误 100 仅在停止视频录制后

> ID：15192075
> 
> 赞同：4
> 
> 时间：2013-03-03T23:11:29.063
> 
> 标签：android, video, camera, photo, recording

问候 StackOverflowers！

我已经搜索了很长时间，但最终不得不承认我没有想法。

[请在https://github.com/ppinter1/AndroidCamera.git](https://github.com/ppinter1/AndroidCamera.git)找到一个极简 Eclipse 项目，它演示了我在三星 Galaxy Tab 10.1 和 Android 4.1.1 上遇到的问题

本质上：每当我在停止视频录制后调用 .takePicture 时，都会发生可怕的 Camera Error 100（伴随着 ICamera/媒体服务器/Camera 服务器的死亡）。

在提供的代码中测试和工作的内容：

*   可以拍摄任意数量的照片
*   也可以录制任意数量的视频
*   即使在录制时拍照也可以正常工作（一个很好的副作用）

*但是，在停止录制后*拍照（即，通过点击“停止录制”按钮，或者因为在达到最大文件大小 5MB 时自动停止录制）会导致通用相机错误 100。

如果其他人能在他们的 Android 设备上测试这段代码，我将不胜感激。

这只是这款平板电脑的错误吗？如果它在其他设备上也失败了，谁能告诉我我做错了什么或如何进一步诊断？

如果代码适合您，请回复您的设备型号和 Android 版本。

非常感谢，

皮特

更新：

几件事：

*   三星开发人员支持技术报告在 S3 设备上运行我的 github 测试代码没有错误，但看到 Galaxy Tab 和 Nexus 出现异常。他认为测试代码错误地使用了 Camera API，但我认为我不能让代码变得更简单......如果有人发现 API 使用错误，请纠正我！
*   我在[Google 的 Android 跟踪器](https://code.google.com/p/android/issues/detail?id=52734)上打开了一个问题，其中包含额外的日志文件详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T14:00:55.667

正如上面的跟踪链接所详述，事实证明需要在**.reconnect() 之后和 .startPreview 之前添加一个额外的 .stopPreview()**。

非常感谢Android 开放手机联盟项目的开发人员*etalv提供的提示。*

# php - 从 PHP 脚本发送多封电子邮件

> ID：15192076
> 
> 赞同：0
> 
> 时间：2013-03-03T23:11:42.763
> 
> 标签：php, mysql, email, mailchimp, bulk-email

我有这个问题。我在 PHP 中制作了一个注册公式（带有一个简单的后端/控制面板）。旅行者进入他们注册的页面（姓名、电话号码、电子邮件等）。然后注册存储在 MySQL 数据库中。每当控制面板加载时，它就会从 MySQL 数据库中获取所有信息。这是在不同国家/地区举行的不同运动营的注册。所以我正在尝试制作一个“向注册目的地 X 的参与者发送电子邮件”的方法，然后以某种方式向所有注册目的地 X 的人发送一封电子邮件。我已经考虑过几种不同的方法来做到这一点，但无法弄清楚，哪个更容易制作或更好。

1) 制作一个“SELECT theEmailAddress FROM tablename WHERE 1”，它会获取所有的电子邮件地址。此后，为每个人制作一个 PHP 邮件功能。然后制作一个联系人格式的 HTML 表单，发送到这些电子邮件中的每一个。我只是觉得这个解决方案看起来有点笨拙，还是什么？

2) 我已经创建了一个 Mailchimp 帐户。我也在考虑使用 Mailchimps API（我没有使用它，它看起来有点复杂）在控制面板中创建一个按钮，因此为每个目的地创建一个列表。然后应该从 Mailchimp 发送消息。这种方式的巨大好处是，不会有垃圾邮件过滤器的斗争（因为 Mailchimps 电子邮件很少被垃圾邮件过滤器捕获。

3）其他一些我还没有想到的聪明的方法。我愿意接受任何建议。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:14:45.013

以下代码将继续发送邮件，直到处理完所有行（符合条件）。

```
$query = mysql_query("SELECT theEmailAddress FROM tablename WHERE 1");
while ($row = mysql_fetch_assoc($query)) {

  $to      = $row['theEmailAddress'];
  $subject = 'the subject';
  $message = 'hello';
  $headers = 'From: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

  mail($to, $subject, $message, $headers);
} 
```

然而，大多数邮件服务器都会阻止 php 邮件程序，或者将其标记为垃圾邮件。所以我建议研究一个 SMTP 邮件类。有很多不同的类型，所以你必须自己选择一个。但是您可以连接到 gmail（或其他 SMTP 帐户）并通过那里发送您的邮件。它使事情更可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:42:28.580

我推荐使用 MailChimp 制作的[Mandrill API](http://mandrillapp.com/api/docs/)而不是 MailChimp API（设计用于向人员列表发送电子邮件活动） 。它是一种用于发送一次性和交易电子邮件的 API，如您所描述的。使用 Mandrill 将具有可靠的交付能力（如您所提到的）的优势，并为您提供有关谁在打开和单击您的电子邮件的数据。

在这种情况下，您将有一个类似于@Neograph734 的脚本，但您将使用 Mandrill API，而不是使用 PHP 的 mail() 函数。

@Neograph734 也是正确的，您也可以使用直接 PHP 来做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T23:18:32.290

MailChimp API 具有您需要的功能。一种方法是创建每个国家特定的[利益集团。](http://kb.mailchimp.com/article/what-is-a-group-and-why-would-i-want-to-set-one-up)单独使用群组可以让您向整个列表发送电子邮件，并按每个用户订阅的群组自定义内容。与[Segments](http://kb.mailchimp.com/article/how-can-i-send-to-a-segment-of-my-list)结合使用，您可以只写给兴趣组的成员。

MailChimp API 可能看起来很复杂，但它正在建模一个固有的复杂问题。API 经过精心设计，只具有所需的功能。

您也可以通过使用您的程序生成列表来进行妥协，然后手动将其导入 MailChimp 并从 Web UI 发送电子邮件。这取决于列表的大小以及您发送电子邮件的频率。

如果您想要坚如磐石的电子邮件和跟踪，MailChimp 是您的不二之选。只是需要一些时间来学习。

# python - Python拆分和csv；修改现有 Python 脚本

> ID：15192081
> 
> 赞同：0
> 
> 时间：2013-03-03T23:12:26.650
> 
> 标签：python, csv, split

另一位用户很友好地帮助我编写了一个脚本，该脚本读取文件并删除/替换'::'并将列移动到标题：（我正在重新发布，因为它可能对这种形式的人有用-我的问题如下）

```
with open('infile', "rb") as fin, open('outfile', "wb") as fout:
    reader = csv.reader(fin)
    writer = csv.writer(fout)
    for i, line in enumerate(reader):
        split = [item.split("::") for item in line if item.strip()]
        if not split: # blank line
            continue
        keys, vals = zip(*split)
        if i == 0:
            # first line: write header
            writer.writerow(keys)
        writer.writerow(vals) 
```

我不知道该文件的最后一列末尾有以下文本：

```
{StartPoint::7858.35924983374[%2C]1703.69341358077[%2C]-3.075},{EndPoint::7822.85045874375[%2C]1730.80294308742[%2C]-3.53962362760298} 
```

如何修改此现有代码以采用上述内容并： 1\. 删除括号 { } 2\. 将 '[%2C]' 转换为 ',' - 使其像文件的其余部分一样以逗号分隔 3\. Produce ' Xa Ya Za' 和 'Xb Yb Zb' 作为 #2 中释放的值的标题

上面的文本是输入文件。原始脚本的输出产生以下内容：

```
{StartPoint,EndPoint}
7858.35924983374[%2C]1703.69341358077[%2C]-3.075, 7822.85045874375[%2C]1730.80294308742[%2C]-3.53962362760298} 
```

是否可以在其中插入一个简单的条命令？

谢谢，感谢您的指导 - 我是 Python 新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:30:40.727

似乎您正在寻找`replace`字符串上的方法：http: [//docs.python.org/2/library/stdtypes.html#str.replace](http://docs.python.org/2/library/stdtypes.html#str.replace)

之后可能是这样的`zip`：

```
keys = [key.replace('{', '') for key in keys]
vals = [val.split('[%2C]') for val in vals] 
```

我不确定 csv.writer 是否会处理嵌套列表，就像在这之后的 vals 中一样，但你明白了。如果是这样， vals 应该是一个平面列表。也许这样的事情会使它变平：

```
vals = [item for sublist in vals for item in sublist] 
```

# c++ - 向量的向量字符串问题

> ID：15192084
> 
> 赞同：1
> 
> 时间：2013-03-03T23:12:53.600
> 
> 标签：c++

我处于声明的情况`vector<vector<string>>`。在 Windows 上没关系，我可以在 struct 中声明它，`vector<vector<string>>v={{"me","you"}}`但在 linux 机器上。只有错误，所以我必须在 struct 初始化后声明它，但是如何因为`mystruct.vec[0]={"me","you"}`给我一个分段错误。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:19:33.990

`-std=c++0x`如果您使用的是 GCC，他们需要一个支持此 C++11 初始化功能的版本，然后您需要通过向编译器传递标志（或`=std=c++11`4.7 系列）来告诉编译器以 C++11 模式编译。请参阅使用 GCC 4.7.2 编译的[这个演示](http://ideone.com/nXC1Xd)：

```
#include <vector> 
#include <string>   
int main() 
{   
  std::vector<std::vector<std::string>> v = {{"me","you"}}; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T23:23:29.467

gcc 4.7.2 上的这个程序运行良好：

```
#include <vector>
#include <string>
#include <utility>
#include <iostream>

using ::std::vector;
using ::std::string;
using ::std::move;

vector<vector<string>> foo()
{
   vector<vector<string>>v={{"me","you"}};
   return move(v);
}

int main()
{
   using ::std::cout;

   cout << "{\n";
   for (auto &i: foo()) {
      cout << "   {\n";
      for (auto &o: i) {
         cout << "      \"" << o << "\",\n";
      }
      cout << "   },\n";
   }
   cout << "}\n";
   return 0;
} 
```

它产生这个输出：

```
$ /tmp/a.out 
{
   {
      "me",
      "you",
   },
} 
```

我认为您的问题要么是旧的编译器，要么是您的代码中其他地方有其他问题。

我用这个命令行编译：

```
$ g++ -std=gnu++0x -march=native -mtune=native -Ofast -Wall -Wextra vvstr.cpp 
```

我的 g++ 给出了这个版本：

```
$ g++ --version
g++ (GCC) 4.7.2 20121109 (Red Hat 4.7.2-8)
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

这个页面告诉你哪个版本的 gcc 有哪个 C++ 特性：

*   [http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)

# css - CSS：设置图像高度；纵横比；高尔-彼得斯投影

> ID：15192086
> 
> 赞同：0
> 
> 时间：2013-03-03T23:13:13.977
> 
> 标签：css, aspect-ratio

我的网站上有一个 Gall-Peters 投影。我想给图像 100% 的可用宽度，同时保持高度正确，这样国家就不会被拉长。保持纵横比的正确 CSS 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:22:25.153

```
img {
  width: 100%;
  height: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:20:11.427

简直了`width: 100%`。应自动设置图像的高度以保持原始纵横比。

# winforms - 有没有办法用White截取整个屏幕？

> ID：15192087
> 
> 赞同：2
> 
> 时间：2013-03-03T23:13:18.437
> 
> 标签：winforms, white-framework

是否有一个 API 可以让我在[http://teststack.github.com/White/](http://teststack.github.com/White/)中做到这一点？我似乎找不到它。

谢谢

帕维尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-23T08:50:01.220

我知道这是一个非常古老的帖子。但我虽然不能伤害更新它。TestStack.White 现在有这些功能：

```
//Takes a screenshot of the entire desktop, and saves it to disk
Desktop.TakeScreenshot("C:\\white-framework.png", System.Drawing.Imaging.ImageFormat.Png);
//Captures a screenshot of the entire desktop, and returns the bitmap
Bitmap bitmap = Desktop.CaptureScreenshot(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:26:49.057

通过查看 GitHub 上的代码，它似乎没有相应的 API（也许[将其添加为功能请求](https://github.com/TestStack/White/issues)？）。

尽管使用[`Screen`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.screen.aspx)类和[`Graphics.CopyFromScreen`](http://msdn.microsoft.com/en-us/library/6yfzc507.aspx). [此问题](https://stackoverflow.com/questions/1163761/)的答案中有一些关于如何捕获屏幕或活动窗口的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:36:52.283

White.Repository 项目实际上记录了您的测试流程，带有屏幕截图，但它的文档记录不是很好，还没有在 NuGet 上发布（很快就会发布）。

就我个人而言，我使用我们从一堆资源中汇总的这个类，忘记了我最初是从哪里得到它的。这捕获了模态对话和许多其他实现由于某种原因没有捕获的其他内容。

```
/// <summary>
/// Provides functions to capture the entire screen, or a particular window, and save it to a file.
/// </summary>
public class ScreenCapture
{
    [DllImport("gdi32.dll")]
    static extern bool BitBlt(IntPtr hdcDest, int xDest, int yDest, int wDest, int hDest, IntPtr hdcSource, int xSrc, int ySrc, CopyPixelOperation rop);
    [DllImport("user32.dll")]
    static extern bool ReleaseDC(IntPtr hWnd, IntPtr hDc);
    [DllImport("gdi32.dll")]
    static extern IntPtr DeleteDC(IntPtr hDc);
    [DllImport("gdi32.dll")]
    static extern IntPtr DeleteObject(IntPtr hDc);
    [DllImport("gdi32.dll")]
    static extern IntPtr CreateCompatibleBitmap(IntPtr hdc, int nWidth, int nHeight);
    [DllImport("gdi32.dll")]
    static extern IntPtr CreateCompatibleDC(IntPtr hdc);
    [DllImport("gdi32.dll")]
    static extern IntPtr SelectObject(IntPtr hdc, IntPtr bmp);
    [DllImport("user32.dll")]
    public static extern IntPtr GetDesktopWindow();
    [DllImport("user32.dll")]
    public static extern IntPtr GetWindowDC(IntPtr ptr);

    public Bitmap CaptureScreenShot()
    {
        var sz = System.Windows.Forms.Screen.PrimaryScreen.Bounds.Size;
        var hDesk = GetDesktopWindow();
        var hSrce = GetWindowDC(hDesk);
        var hDest = CreateCompatibleDC(hSrce);
        var hBmp = CreateCompatibleBitmap(hSrce, sz.Width, sz.Height);
        var hOldBmp = SelectObject(hDest, hBmp);
        BitBlt(hDest, 0, 0, sz.Width, sz.Height, hSrce, 0, 0, CopyPixelOperation.SourceCopy | CopyPixelOperation.CaptureBlt);
        var bmp = Image.FromHbitmap(hBmp);
        SelectObject(hDest, hOldBmp);
        DeleteObject(hBmp);
        DeleteDC(hDest);
        ReleaseDC(hDesk, hSrce);

        return bmp;
    }
} 
```

然后消费

```
var sc = new ScreenCapture();
var bitmap = sc.CaptureScreenShot();
bitmap.Save(fileName + ".png"), ImageFormat.Png); 
```

# php - 为用户输入的文本字符串创建 MySQL 表

> ID：15192090
> 
> 赞同：0
> 
> 时间：2013-03-03T23:13:42.340
> 
> 标签：php, mysql

使用 PHP 表单将来自用户的文本字符串插入表中，然后使用另一个表单将其拉到另一个页面上，在 MySQL 中为文本字符串创建表的最佳方法是什么，以及创建表时有哪些选项可能需要最好地处理文本字符串？

我想，复杂的因素是表格中存在的文本还不存在（因为它需要通过表单输入等），我不确定这是否是我遇到麻烦的原因（加上我相对缺乏经验，所以我不确定什么才是理想的桌子配置）。

由于我不想存储此用户输入之外的任何其他数据（就像我说的，只是文本字符串，即一个句子），我假设在创建表时我只需要一列，但我也不确定这一点；似乎我更有可能只是忽略了一些关于 SQL 工作原理的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:07:59.220

我现在将我的评论放入答案中：

1.  考虑这些字符串的估计最大长度来决定是在 mysql 中使用`varchar`-fields 还是`text`-fields。

    引用 MySQL 手册（顺便说一句，你的目的很好读）： VARCHAR 列中的值是可变长度字符串。在 MySQL 5.0.3 之前，长度可以指定为 0 到 255 之间的值，在 5.0.3 和更高版本中可以指定为 0 到 65,535 之间的值。 [http://dev.mysql.com/doc/refman/5.0/en/char.html](http://dev.mysql.com/doc/refman/5.0/en/char.html)

    据说`varchar`比较快，**总结一下**，见[MySQL: Large VARCHAR vs. TEXT?](https://stackoverflow.com/questions/2023481/mysql-large-varchar-vs-text)

2.  当您稍后需要引用这些字符串时，请考虑至少有一个名为 id （int、主键、自动增量）的第二个字段。考虑让一个字段引用该字符串的作者。也许存储字符串放入数据库的日期和时间的字段也是一个好主意。

3.  使用 mysqli 或 PDO 代替已弃用的 mysql。请参阅此处，第一个答案中有指向优秀教程的链接：[如何将我的站点从 mysql 迁移到 mysqli？](https://stackoverflow.com/questions/4598854/how-do-i-migrate-my-site-from-mysql-to-mysqli)

# php - 如何在数组中的所有子数组中按键名取消设置键？

> ID：15192097
> 
> 赞同：-1
> 
> 时间：2013-03-03T23:14:53.507
> 
> 标签：php, arrays, multidimensional-array

假设我有一个看起来像这样的数组：`array("a"=>array("a"=>"b"), "b"=>array("a"=>"d"))`. 我想在数组及其子数组中使用键“a”取消设置所有变量。假设数据的结构是未知的。我想要的是，如果键“a”存在于父数组或其子数组中的某处——它将被取消设置。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:40:05.570

```
function unsetKey (&$array, $key) {
  foreach ($array as $k => $v)
    if (is_array($v))
      unsetKey($array[$k], $key);
  if (isset($array[$key])) unset(array[$key]);
} 
```

那应该这样做。

# c# - 如何以编程方式设置附加属性？

> ID：15192099
> 
> 赞同：2
> 
> 时间：2013-03-03T23:15:05.583
> 
> 标签：c#, wpf, attached-properties

我正在阅读有关附加属性的信息，并且我刚刚读到它们可以设置为类似于以下内容：

```
Grid.SetRow(myElement, 0); 
```

如果这是一个静态方法，`Grid.SetRow()`现在`Grid`它应该怎么`myElement`放进去呢？或者它是否以某种方式`myElement`与第 0 行相关联，所以当有一个新`Grid`对象包括`myElement`时，它可以检查`myElement`应该去哪一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:20:58.753

设置附加属性时，值仅存储在元素中，而不是附加属性所属的类型。

例如，附加的行属性是这样实现的：

```
public static readonly DependencyProperty RowProperty = ...;

public static void SetRow(UIElement element, int value)
{
    element.SetValue(RowProperty, value);
}

public static int GetRow(UIElement element)
{
    return (int)element.GetValue(RowProperty);
} 
```

因此，当您调用 时`Grid.SetRow`，会在内部`element.SetValue`调用。作为`element`一个依赖对象，它可以存储那些额外的属性。您可以将其想象为`Dictionary<DependencyProperty, object>`依赖对象内部（尽管实际上它要复杂得多），您可以使用`SetValue`and访问它`GetValue`。

所以该值只存储在依赖对象本身的内部。现在，当 Grid 呈现自身时，它将遍历其子级以调用其测量和布局例程。它还将要求`Grid.GetRow`每个孩子查看是否设置了附加的行属性，并在其自己的布局阶段相应地尊重这些选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:23:41.167

> 如果这是一个静态方法，那么 Grid.SetRow() 现在应该如何将 myElement 放入哪个 Grid 中？

它不知道

> 或者它是否以某种方式将 myElement 与第 0 行相关联，所以当有一个包含 myElement 的新 Grid 对象时，它可以检查 myElement 应该去哪一行？

对，就是这样

# php - 如何动态地将数据从数据库放入会话

> ID：15192104
> 
> 赞同：0
> 
> 时间：2013-03-03T23:15:59.170
> 
> 标签：php, mysql, database

我正在从数据库中提取数据并希望将其保存到会话变量中。我想将键命名为与我的表格单元格相同的名称。例如：我有一个名为“EMAIL”的单元格，我想获取 $_SESSION["EMAIL"]

我已经将数据库中的数据保存在一个数组 ($data) 中，该数组具有以单元格命名的数组键，但我想用相同的键将该数据移动到 SESSION 数组中......

我怎样才能动态地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:18:07.923

你可以这样做：

```
foreach($myArr as $k=>$v) {
  $_SESSION[$k] = $v;
} 
```

或者，

```
$_SESSION['user'] = $myArr; 
```

在第一种情况下，您将通过执行访问电子邮件`$_SESSION['EMAIL']`，在第二种情况下，您将访问电子邮件`$_SESSION['user']['EMAIL']`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:39:11.187

另一种选择是

```
$_SESSION = array_merge($_SESSION, $myArr); 
```

我不确定这是否是一个好习惯。

# excel-2007 - Excel 2007（条件格式）AND & IF

> ID：15192107
> 
> 赞同：1
> 
> 时间：2013-03-03T23:16:09.450
> 
> 标签：excel-2007, conditional-formatting, multiple-value

我希望你能在这个问题上帮助我。

我目前正在使用 Excel 2007，并且正在为我们的团队创建一个动态计划/时间表。到目前为止，一切进展顺利。

现在不幸的是，我遇到了条件格式的问题。我正在格式化单元格，以便以图形方式显示工作人员的当前状态。我正在使用带有公式示例的条件格式：`=OFFSET(DataStart17D;COLUMN();ROW()-49;1;1)="PM"`

现在我正在尝试使用 2 种颜色的渐变填充来应用 2 个条件，例如：`=AND(IF(OFFSET(DataStart17D;COLUMN();ROW()-49;1;1)="PM";TRUE;FALSE);IF(OFFSET(DataStart17D;COLUMN();ROW()-52;1;1)="AM";TRUE;FALSE)`

问题是，一旦我使用 IF 或 AND 语句，就根本不应用任何条件。我已将上述公式应用于单元格本身并收到“TRUE”作为条件。

奇怪的是，如果我应用`=OFFSET(DataStart17D;COLUMN();ROW()-49;1;1)="PM"`它可以正常工作，如果我`=IF(OFFSET(DataStart17D;COLUMN();ROW()-49;1;1)="PM";TRUE;FALSE)`再次使用，则不适用任何条件。

我在网上搜索了一个解决方案，但还没有找到一个:(

如果有人能帮我解决这个问题，我会很高兴:)

最好的问候，理查德 J. 达纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:22:28.387

您不需要条件格式公式中的 IF 语句和 TRUE 和 FALSE。就其性质而言，该公式是有条件的。

尝试类似：

```
=AND(OFFSET(DataStart17D;COLUMN();ROW()-49;1;1)="PM";OFFSET(DataStart17D;COLUMN();ROW()-49;1;1)="AM") 
```

一旦你这样做，你会看到一个额外的问题。AND 函数中的两个语句是互斥的，因此它永远不会评估为 TRUE。

编辑：

`AND`该语句和多个`OFFSET`使用`ROW`或的语句似乎确实存在问题`COLUMN`

请注意，这里我将使用逗号而不是分号作为函数参数分隔符，否则太难转换了。您必须将逗号改回分号。

另请注意，您不需要原始问题中 ROW 或 COLUMN 函数中的最后两个参数。您将它们设置为 1 的高度和宽度，这是默认值，并且是可选的。

这是一个简化的示例：

如果您执行以下操作：

```
OFFSET(DataStart17D,ROW()+1,COLUMNS())="PM" 
```

它将在工作表和条件格式中评估为 TRUE

如果您执行以下操作：

```
=AND(OFFSET(DataStart17D,ROW()+1,COLUMNS())="PM",OFFSET(DataStart17D,ROW()+1,COLUMNS())="PM") 
```

这只是重复相同的语句两次，它将在工作表中评估为 TRUE，但不会触发条件格式。

以上所有内容正如您在问题中所说的那样。我认为可行的答案是改用 ROWS 和 COLUMNS ，如下所示：

```
=AND(OFFSET(DataStart17D,ROWS($1:2)+1,COLUMNS($A:A))="PM",OFFSET(DataStart17D,ROWS($1:2)+1,COLUMNS($A:A))="AM") 
```

以上将是A2的公式。请注意，括号内的第一行或第一列以美元符号锚定。这为您提供了 A1 中的行数或列数，实际上与 ROW 或 COLUMN 函数相同。

# javascript - 很简单，如何在画布中使用数组制作多行动画？

> ID：15192109
> 
> 赞同：1
> 
> 时间：2013-03-03T23:16:31.580
> 
> 标签：javascript, animation, canvas

我是编码和 Javascript 的新手，我有点迷茫。我正在尝试创建在刷新时动画的多行。像这样的东西......

[http://jsfiddle.net/79zcp/6/](http://jsfiddle.net/79zcp/6/)

```
 if (min < max) {
    context.beginPath();
    if (direction) {
        context.moveTo(topMinX, topMinY);
        topMinX = topMinX + 2;
        context.lineTo(topMinX, topMaxY);
    } else {
        context.moveTo(topMinX, topMinY);
        topMinY = topMinY + 2;
        context.lineTo(topMaxX, topMinY);
    }
    context.lineWidth = 4;
    context.stroke();
} 
```

}

但沿 y 轴有多条线，相隔约 20 像素。

我的老师建议用数组制作多行，但我完全迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:01:28.593

我已经分叉了小提琴来创建一个新的：http: [//jsfiddle.net/UcrUj/3](http://jsfiddle.net/UcrUj/3)。
请注意，我已经更改了函数，使其仅适用于垂直线（该`direction`变量现在已过时）。

您应该使用数组作为 x 坐标。这里，数组是

```
linesX = [20, 40, 60, 80] 
```

它在 x 坐标 x = 20、x = 40、x = 60 和 x = 80 上指定了 4 条线。现在，您运行一个`for`循环遍历每个 x 坐标，分别绘制每条线。最后在末尾添加增量`topMinY += 2`，要澄清的是，它是 的简写`topMinY = topMinY + 2`。

# iphone - 新对象添加到 tableView 时未正确保存

> ID：15192111
> 
> 赞同：0
> 
> 时间：2013-03-03T23:16:32.103
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我在获取 Core Data 以保存我在使用 UITextField 时添加的新行时遇到了一些问题。这是我在表格视图中插入对象的方法。应该发生的是当我单击添加按钮时，应该添加一个文本字段，然后直接进入编辑模式。然后，当用户在键盘上单击完成时，文本字段应结束编辑，然后文本字段应将条目保存到核心数据中。

`textFieldDidEndEditing`编辑：删除方法中的调用`insertNewObject:(id)sender`。它使应用程序崩溃

```
 - (void)insertNewObject:(id)sender {

NSManagedObjectContext *context = [self.fetchedResultsController     managedObjectContext]; 

TehdaItem *item = [NSEntityDescription insertNewObjectForEntityForName:@"TehdaItem" inManagedObjectContext:context];

// If appropriate, configure the new managed object.
// Normally you should use accessor methods, but using KVC here avoids the need to add a custom class to the template.

// Putting the cell in edit mode
TehdaTableViewCell *editcell;
for (TehdaTableViewCell *cell in [self.tableView visibleCells]) {
    if (cell.itemLabel.text == item.itemTitle) {

        editcell = cell;

        break;
    }
}

[editcell.itemLabel becomeFirstResponder];

// The cell needs to call the method textfield did end editing so that it can save the new object into the store

// Save the context.

NSError *error = nil;
if (![context save:&error]) {
     // Replace this implementation with code to handle the error appropriately.
     // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

} 
```

这是我的 textFieldDidEndEditing 方法：

```
- (void)textFieldDidEndEditing:(UITextField *)textField {
TehdaTableViewCell *cell = (TehdaTableViewCell *) textField.superview.superview;
TehdaItem *item = [self.fetchedResultsController objectAtIndexPath:[self.tableView indexPathForCell:cell]];

//TehdaTableViewCell *cell;
item.itemTitle = cell.itemLabel.text; 
```

}

不太确定从这里去哪里。任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:50:23.123

您可以使用

```
NSError *error;
[item.managedObjectContext save:&error];
if (error) {
// Triage the problem and respond appropriately
} 
```

在`- (void)textFieldDidEndEditing:(UITextField *)textField`方法中。但如果我是你，我会在你保存对象之前做一些验证。

# 3d - XNA - 如何在世界空间中画线？

> ID：15192112
> 
> 赞同：0
> 
> 时间：2013-03-03T23:16:38.547
> 
> 标签：3d, xna, lines, perspective

我正在研究 A* 算法，我希望能够在寻路图中的节点之间画线，尤其是那些通往出口的节点。我工作的环境是 3D。我只是想不通为什么我的代码没有显示这些行，所以我对其进行了简化，以便它只呈现一行。现在我可以看到一条线，但它在屏幕空间中，而不是在世界空间中。有没有一种简单的方法可以在 XNA 中的世界坐标中画线？

这是代码：

```
 _lineVtxList = new VertexPositionColor[2];
        _lineListIndices = new short[2];

        _lineListIndices[0] = 0;
        _lineListIndices[1] = 1;
        _lineVtxList[0] = new VertexPositionColor(new Vector3(0, 0, 0), Color.MediumPurple);
        _lineVtxList[1] = new VertexPositionColor(new Vector3(100, 0, 0), Color.MediumPurple);
        numLines = 1;
....
            BasicEffect basicEffect = new BasicEffect(g);
            basicEffect.VertexColorEnabled = true;
            basicEffect.CurrentTechnique.Passes[0].Apply();
            basicEffect.World = Matrix.CreateTranslation(new Vector3(0, 0, 0));
            basicEffect.Projection = projMat;
            basicEffect.View = viewMat;
            if (_lineListIndices != null && _lineVtxList != null)
            {

            //    g.DrawUserPrimitives<VertexPositionColor>(PrimitiveType.LineList, _lineVtxList, 0, 1);

                g.DrawUserIndexedPrimitives<VertexPositionColor>(
                        PrimitiveType.LineList,
                        _lineVtxList,
                        0,  // vertex buffer offset to add to each element of the index buffer
                        _lineVtxList.Length,  // number of vertices in pointList
                        _lineListIndices,  // the index buffer
                        0,          // first index element to read
                        numLines   // number of primitives to draw
                        );
            } 
```

矩阵 projMat 和 viewMat 是我用来渲染场景中其他所有内容的相同视图和投影矩阵。我是否将它们分配给 basicEffect 似乎并不重要。这是场景的样子：

![在此处输入图像描述](../Images/94a577f3c4c584180ae8dca2e2d1139a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:40:28.373

您没有开始或结束您的`BasicEffect`，因此投影和视图矩阵不会应用于`DrawUserIndexedPrimitives`. 试着`DrawUserIndexedPrimitives`用这个来包含你的电话：

```
if (_lineListIndices != null && _lineVtxList != null)
{
    basicEffect.Begin();
    foreach (EffectPass pass in basicEffect.CurrentTechnique.Passses)
    {
        pass.Begin();
        g.DrawUserIndexedPrimitives<VertexPositionColor>(...); // The way you have it
        pass.End();
    }
    basicEffect.End();
} 
```

# api - CRUD REST API 中的各种资源集合

> ID：15192114
> 
> 赞同：1
> 
> 时间：2013-03-03T23:16:47.730
> 
> 标签：api, twitter, crud

我很好奇 CRUD REST API 将如何实现`tweets`资源的想法。当然，诸如 Twitter 之类的应用程序具有`tweet`对象的概念，但应用程序以各种方式（“集合”）需要这些概念。

Twitter 需要一个`user`时间线端点（`tweets`由某个用户发布）和`home`时间线（用户关注的人的推文时间线）。我想，在 CRUD API 中，`user`时间线将位于 URI，例如：`tweets?filter={username:"Bob"}`

但是，我不太确定 CRUD API 设计将如何实现`home`推文的时间线集合。此外，诸如`favourites`用户的集合——这些集合是完全被视为单独的资源，还是应该以某种方式附加到`tweets`资源？

此外，Twitter 还没有为他们的 API 使用 CRUD 设计。也许这有充分的理由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:13:16.320

资源设计的好处在于它并不重要，只要它（某些）有意义。显然有些细微差别已经到位，但让我们直奔主题。商业模式不必（必须）将 1:1 映射到资源，这可能就是您在 Twitter API 中找不到这种关系的原因。

一些假设：时间线是预先定义的，他们的行为是不可影响的，其他的通过创建新的推文。收藏夹是（引用）推文。收藏夹是有影响的。

最喜欢的收藏资源，可能是这样的：

*   `/user/bob/favorites`

您的“CRUD”操作可能类似于：

*   `[POST] /user/bob/favorite`{ "tweet_id": "343fe4a" } -- 添加新的收藏夹
*   `[GET] /user/bob/favorite`-- 用户 Bob 的所有收藏夹
*   `[DELETE] /user/bob/favorite/343fe4a`-- 删除推文 343fe4a 为收藏

通常最好避免在单个资源中使用多个变量，因为这会引入某种不需要的复杂性。然而，在此示例中，收藏夹没有自己的标识符。相反，它重新使用了推文中的标识符，并且它还与用户紧密耦合。

如果收藏夹确实有它自己的标识符，我将着手创建一个资源，例如：`/favorite/ef213e13f`这可以返回元数据或充当 HTTP GET 方法的推文的别名（重定向）或“取消收藏”的资源（删除方法）。

如果我们不谈论推文，而是谈论带有文章和评论的博客，那么这种说法可能更有意义：

*   `/blog/article/42`-- 代表一篇文章
*   `/blog/article/42/comments`-- 代表本文所有评论的集合
*   `/blog/comment/44571`-- 代表一条评论

根据您的需要，时间线的几个示例可能是资源，例如：

1.  `/user/bob/timeline/home`
2.  `/user/bob/timeline?type=home`
3.  `/timeline/home?user=bob`

正如我之前提到的，最好避免在一个资源中使用多个变量。我可能会选择选项 3。除了具有太多变量的复杂性之外，原因是这样的资源可能不值得缓存（客户端）并且可能不会对其执行 CUD 操作。因为它很可能是不同实体的聚合资源。

几句结束语：

*   先设计资源，然后才想出匹配的 URL
*   不要将资源 1:1 设计为（业务）模型
*   不要从一开始就过度考虑情况。实现一些东西并对其进行修补，以查看将来可能出现的问题。满意后，将其投入生产。

进一步阅读的建议：

*   HAL - [http://stateless.co/hal_specification.html](http://stateless.co/hal_specification.html)
*   超媒体 - [http://en.wikipedia.org/wiki/Hypermedia](http://en.wikipedia.org/wiki/Hypermedia)
*   RMM - [http://martinfowler.com/articles/richardsonMaturityModel.html](http://martinfowler.com/articles/richardsonMaturityModel.html)
*   Roy Fielding 的博客 - [http://roy.gbiv.com/untangled/tag/rest](http://roy.gbiv.com/untangled/tag/rest)

# php - jQuery 表格行突出显示 onClick 并恢复 onChange 交替 css 类

> ID：15192115
> 
> 赞同：3
> 
> 时间：2013-03-03T23:16:57.713
> 
> 标签：php, jquery, html, css

第一篇文章和 jQuery 新手。努力寻找，但没有找到完全相关的帖子。

在表格中有交替的行颜色；一类 NULL/空 一类=alt。jQuery 脚本部分用于在单击时突出显示该行。

问题是：如何使用 removeClass 然后恢复（addClass/toggleClass）在 onChange 事件中删除的特定类？任何帮助表示赞赏。谢了。（见下面的小提琴）

HTML

```
 <table id="fooBar" border="0">
    <tr>
        <th>Text</th>
        <th>Text</th>
        <th>Text</th>
        <th></th>
        <th></th>
    </tr>
    <tr class="">
        <td>Text</td>
        <td></td>
        <td></td>
        <td></td>
        <td>image</td>
        <td>image</td>
    </tr>
    <tr class="alt">
        <td>Text</td>
        <td></td>
        <td></td>
        <td></td>
        <td>image</td>
        <td>image</td>
    </tr>
    <tr class="">
        <td>Text</td>
        <td></td>
        <td></td>
        <td></td>
        <td>image</td>
        <td>image</td>
    </tr>
    <tr class="alt">
        <td>Text</td>
        <td></td>
        <td></td>
        <td></td>
        <td>image</td>
        <td>image</td>
    </tr>
</table> 
```

CSS

```
table {
    width:100%;
    border-collapse:collapse;
    table-layout:auto;
    vertical-align:top;
    margin-bottom:15px;
    border:1px solid #999999;
}

th {
    font: bold 11px"Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
    color: #F2EDEB;
    border-right: 1px solid #C1DAD7;
    border-bottom: 1px solid #C1DAD7;
    border-top: 1px solid #C1DAD7;
    letter-spacing: 2px;
    text-transform: uppercase;
    text-align: left;
    padding: 6px 6px 6px 12px;
    background: #522D25 url(images/bg_header.jpg) no-repeat;
}

tr {
    background: #fff;
    color: #261F1D;
}

tr:hover, tr.alt:hover {
    color: #261F1D;
    background-color: #E5C37E;
}

.highlighted {
    color: #261F1D;
    background-color: #E5C37E;
}

tr.alt {
    background: #F5FAFA;
    color: #B4AA9D;
}

td {
    border-right: 1px solid #C1DAD7;
    border-bottom: 1px solid #C1DAD7;
    padding: 6px 6px 6px 12px;
} 
```

jQuery

```
$(document).ready(function () {
    $("tr").click(function () {
        $(this).closest("tr").siblings().removeClass("highlighted");
        $(this).toggleClass("highlighted");
    })
});
// Note: currently only works for row without '.alt' css class assigned (ie. empty)
// question is how to replace a class and then RESTORE the class onChange 
```

这是 jsFiddle：http: [//jsfiddle.net/codeChaos1988/kh4VY/1/](http://jsfiddle.net/codeChaos1988/kh4VY/1/)

此外，任何关于实际学习 javascript/jQuery 编程的最佳教程网站的指针也将不胜感激。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-03T23:30:38.517

为了让您不必担心删除/恢复原始类，请尝试将您的 css 更改为：

```
.highlighted {
    color: #261F1D !important;
    background-color: #E5C37E !important;
} 
```

对于 JS：

```
$('table').on('click', 'tr', function () {
    var state = $(this).hasClass('highlighted');
    $('.highlighted').removeClass('highlighted');
    if ( ! state) { $(this).addClass('highlighted'); }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-04-11T16:43:38.640

在数据表初始化部分添加了这个：

```
"createdRow": function( row, data, index ) {
            if (tableInitialized){
                flashRow( row );
            } 
```

这行得通！

# php - 用于计算查看次数最多的页面的 PHP 脚本无法按预期工作

> ID：15192116
> 
> 赞同：-1
> 
> 时间：2013-03-03T23:17:05.330
> 
> 标签：php, mysql

我正在尝试在网站中实现一个简单的脚本，以计算访问次数最多的页面并将前 10 名列表作为输出。作为一个业余爱好者（在 php/mysql 中），我无法弄清楚为什么在执行代码时字段没有填充适当的数据。

这是代码：

```
$pagename = $_SERVER['PHP_SELF']; 
$sql = "UPDATED visits SET hits=hits+1 WHERE pagename='$pagename' LIMIT 1"; 
$res = mysql_query($sql); 
if(!$res) { 

} 
```

错误处理不显示任何错误，但表仍然为空。我错过了什么？（我试图通过以 mysql 的 root 用户身份启动会话来做到这一点，因此所有权限都存在，并且我创建了以下字段：pagename，hits。）。我尝试使用其他代码：

```
*$sql = "CREATE TABLE 'yourDatabaseName'.'count' ('id' INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 'count' INT NOT NULL, 'page_id' INT NOT NULL) ENGINE = MyISAM;";
mysql_query($sql) or die('<p>Error, the count table was not created.</p>');
$query = "INSERT INTO count (page_id) VALUE ('$thePageID')";
mysql_query($query) or die('<p>Error, the Page ID was not entered into the table field.</p>');
$data = mysql_query("SELECT * FROM count WHERE page_id='$thePageID'")
or die(mysql_error('Could not find the page id in the count table.'));
while($info = mysql_fetch_array( $data ))
{
$count=$info['id'];
$count = $count + 1;
}
$querytwo = "UPDATE 'count' SET 'count' = '$count' WHERE 'page_id' ='$thePageID'";
mysql_query($querytwo) or die('Error, the count was not updated');* 
```

并且 page_id/id 字段将被更新，但不是“计数”字段（在这种情况下，错误处理会返回一个错误'..）。我确定我在这里遗漏了一些简单的东西，因为这两个脚本基本上是相同的问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:26:29.393

更新仅更新现有行。您需要先添加具有给定页面名称和计数为 0 的行，然后更新才能增加计数。

或者，试试这个 SQL：

```
$sql = "INSERT INTO visits (pagename, hits) VALUES ('$pagename', 0) ON DUPLICATE KEY UPDATE hits=hits+1";" 
```

另请注意，您的 SQL 查询应为“UPDATE”而不是“UPDATED”:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:33:06.860

在您错误拼写 UPDATE 之外，这当然与您的第二个示例不同，

我还关心您在表格列 pagename 中的内容。我猜你有类似 index.php 的东西。如果是这种情况，并且您碰巧从中访问文件`sub/index.php`，`$_SERVER['PHP_SELF'];`则会产生`/sub/index.php`因此基于您的`WHERE CLAUSE`. 所以尝试回显

```
echo $_SERVER['PHP_SELF']; 
```

查看结果并确保您的数据库具有相同的值、目录和文件名。因为我看不到你在那里有什么，我也猜你那里也有文件扩展名，没有多余的字符。

如果您修复了错误的 UPDATE 拼写并验证您的数据库中的内容是否与您从回显 $_SERVER['PHP_SELF']; 中获得的内容相匹配。您的第一个代码应该可以更好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T23:23:48.827

首先想到...应该这样：

```
$sql = "UPDATED visits SET hits=hits+1 WHERE pagename='$pagename' LIMIT 1"; 
```

是

```
$sql = 'UPDATE visits SET hits=hits+1 WHERE pagename=' . mysql_real_escape_string($pagename) . ' LIMIT 1'; 
```

它失败的原因是由于 UPDATE(D) 语句，我也修改了您的查询，因此您的 $pagename 不能被“注入”，请参阅：[http](http://en.wikipedia.org/wiki/SQL_injection) ://en.wikipedia.org/wiki/SQL_injection 。

您可能还想考虑使用 mysqli，因为 mysql 在最新版本的 PHP 中已被弃用。

# foreach - JSTL ForEach 循环/数组或列表

> ID：15192122
> 
> 赞同：2
> 
> 时间：2013-03-03T23:17:42.317
> 
> 标签：foreach, jstl, foreach-loop-container

我需要遍历项目，但我也在寻找一种方法来获取项目列表中的下一个或上一个元素，以便如下所示，我可以检查第二个项目是否以第一个项目开头。有没有办法可以将元素存储在 List 或 Array 中？

```
 <c:forEach var="item" items="${entry.value.options}">                        
                    <c:set var="upper" value="${item.key }"/>
                    <c:choose>
                        <c:when test="${fn:startsWith(item, upper)}">
                            <c:if test="${item ne upper} }">
                                <ul>
                                    <li>
                                        <input class="parent" type="checkbox" name="criterias[${entry.key}]" value="${item.key}" />
                                        <label>${item.value}</label>
                                    </li>                                       
                                </ul>
                            </c:if>
                        </c:when>
                        <c:otherwise>
                        <li>
                            <input class="child" type="checkbox" name="criterias[${entry.key}]" value="${item.key}" />
                            <label>${item.value}</label>
                        </li>       
                        </c:otherwise>
                    </c:choose>             
    </c:forEach> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:24:46.657

您可以向 jsp 传递一个结构`List<Item> list`，例如 Item 拥有自己的 ArrayList，然后使用内部 forEach。它可能比扁平结构更容易。

```
<c:forEach var="item" items="${list}">
Access here item if needed <c:out value="${item.value}"/>
   <c:forEach var="elem" items="${item}">
   ...
   Access here elem <c:out value="${elem.value}"/>
   ...
   </c:forEach>
</c:forEach> 
```

# c++ - 无法打开源文件“swap.h”

> ID：15192123
> 
> 赞同：0
> 
> 时间：2013-03-03T23:17:56.120
> 
> 标签：c++

我正在完成一项学校作业，但我在使用 swap.h 时遇到了问题。我知道通常这样的事情是外部依赖项，但在 Visual Studio 2010 中，我没有在我的外部依赖项列表中看到它。我不确定在哪里可以找到它或如何将它添加到列表中，以便我可以使用交换功能。有没有人可以在这里指出我正确的方向？

```
#include "swap.h" 
```

这只是为了简单地展示我如何尝试包含该文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T23:20:41.057

> 所以我可以使用交换功能

[**`std::swap()`**](http://en.cppreference.com/w/cpp/algorithm/swap)来自[C++ 算法库](http://en.cppreference.com/w/cpp/algorithm)是

*   在标头中定义`<algorithm>`（C++11 前）
*   在标头中定义`<utility>`(C++11 起)

在 Visual Studio 2010 中，您可能需要：

```
#include <algorithm> 
```

* * *

### 以下评论：

因此调用`std::swap()`，以启用[参数相关查找](/questions/tagged/argument-dependent-lookup "显示标记为“argument-dependent-lookup”的问题")：

```
using std::swap;
swap(theArray[index], theArray[nextIndex]); 
```

**进一步阅读：** [如何`swap`为我的班级提供功能？](https://stackoverflow.com/q/6380862/78845)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:19:01.287

包括`<algorithm>`得到`std::swap`

# c - Emacs -*- lang -* 标签和旧式 K&R C

> ID：15192124
> 
> 赞同：1
> 
> 时间：2013-03-03T23:18:00.617
> 
> 标签：c, emacs

我正在从事一个使用多种编程语言的大型项目，但我完全没有使用 Emacs 的经验。我在谷歌上搜索了有关如何`-*- this -*-`工作的信息，但没有找到任何东西。

例如，如果我有一个文件`test.krc`，意味着在旧式 K&R C 中，我应该如何在其上标记它以便 Emacs 识别？

如果有人能解释`-*- lang -*-`标签是如何工作的，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T23:38:46.603

请参阅[指定文件变量](http://www.gnu.org/software/emacs/manual/html_node/emacs/Specifying-File-Variables.html)。

```
# -*- text -*- 
```

只是一个简写

```
# -*- mode: text -*- 
```

*总结以下注释中的重要部分：*
在这种情况下，第一行的以下注释将产生预期的效果：

```
/* -*- mode: c; c-file-style: "k&r"; -*- */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T20:56:56.987

另一种选择，如果有问题的文件确实有`.krc`扩展名：

```
(add-to-list 'auto-mode-alist '("\\.krc\\'" . c-mode))
(add-hook 'c-mode-hook 'my-c-mode-hook)
(defun my-c-mode-hook ()
  (when (and buffer-file-name
             (equal (file-name-extension buffer-file-name) "krc"))
    (c-set-style "k&r"))) 
```

# database - 即时从多个列表中创建字典的字典

> ID：15192128
> 
> 赞同：0
> 
> 时间：2013-03-03T23:18:39.627
> 
> 标签：database, list, dictionary, python-2.7

我对python很陌生，我正在尝试使用python 2.7中的dicts创建一个数据库。我现在对如何将列表放入字典然后再放入数据库的字典感到困惑。我一直在寻找如何做到这一点。我有获取 MP3 文件的专辑、艺术家、年份、曲目编号和路径的功能。我正在获取我想要的数据我只是不知道如何在字典的字典中获取数据。下面的这个循环给了我想要使用的键的值。

```
 for x in FileList():
pathlist.append(x)
for artist in getArtist(x):
    artistlist.append(artist)
    for track in getTrack(x): 
        tracklist.append(track)
        for year in getYear(x):
            yearlist.append(year) 
```

我希望我为某人提供了足够的信息来帮助我解决这个问题。我暂时想远离 CSV 文件，因为我认为知道如何在 Python 中执行此操作对我来说很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:13:31.363

首先：不要像在示例代码中那样混合 TAB 和空格字符。

要使用各种列表创建字典，只需使用适当的键和列表作为值创建字典：

```
dict_of_list = dict(
    pathlist = pathlist,
    artistlist = artistlist,
    tracklist = tracklist,
    yearlist = yearlist,
) 
```

或者

```
dict_of_list = {
    'pathlist': pathlist,
    'artistlist': artistlist,
    'tracklist': tracklist,
    'yearlist': yearlist,
} 
```

创建的第二个版本将允许字符串以外的键。

# java - scala while循环赋值

> ID：15192131
> 
> 赞同：8
> 
> 时间：2013-03-03T23:19:05.703
> 
> 标签：java, scala

我正在尝试将一些 Java 代码移植到 Scala 中：

```
while ((j=f('blah'))>=0) ... 
```

错误：“值 >= 不是单位的成员”

这不可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-03T23:20:22.147

Scala 中的作业返回`()`（单位）。但这没关系，因为您可以将代码块放在任何地方。你需要这个：

```
while ({ j=f("blah"); j } >= 0) ... 
```

# android - Actionbarsherlock getHeight() 返回 0

> ID：15192133
> 
> 赞同：1
> 
> 时间：2013-03-03T23:19:14.567
> 
> 标签：android, actionbarsherlock

我正在使用 Actionbarsherlock，我想`PopupWindow`在操作栏的正下方放置一个。使用`showAtLocation()`x 和 y 偏移量，因此理想情况下 y 偏移量将是操作栏的高度。但是当我打电话

```
int abHeight = getSupportActionBar().getHeight(); 
```

它返回零。我正在使用一个`SherlockFragmentActivity`

以下是相关代码：

```
slidingLayout = inflater.inflate(R.layout.sliding_menu, null);
menuDrawer = MenuDrawer.attach(this, MenuDrawer.MENU_DRAG_CONTENT, Position.LEFT);
menuDrawer.setContentView(R.layout.activity_main);
menuDrawer.setMenuView(slidingLayout.findViewById(R.id.sliding_menu));

getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
getSupportActionBar().setDisplayHomeAsUpEnabled(true);
int abHeight = getSupportActionBar().getHeight(); 
```

我已经翻遍了，找不到类似的问题/答案，那么以前有人经历过吗？谢谢。

编辑：杰克的回答是正确的。为了获得该属性值，我使用[了这篇文章](https://stackoverflow.com/a/13216807/1754999)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:54:19.510

`actionBarSize`您可以从主题属性中读取操作栏的高度。这会根据设备配置而变化，因此请确保在创建或重新创建活动时始终阅读它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T07:51:53.457

在你 style.XML 中添加： `<item name="@android:attr/actionBarSize">50px</item>`

然后在您的活动中添加以下代码：

```
 TypedArray actionbarSizeTypedArray = mContext.obtainStyledAttributes(new int[] {  android.R.attr.actionBarSize});  

        int h = (int) actionbarSizeTypedArray.getDimension(0, 0); 
```

这是一种，我正在尝试其他方法。祝你好运！

是的！我找到了一个非常简单的方法：

```
 TypedValue tv = new TypedValue();
    if (getTheme().resolveAttribute(android.R.attr.actionBarSize, tv, true))
    {
        int  h=TypedValue.complexToDimensionPixelSize(tv.data,getResources().getDisplayMetrics());
    } 
```

更多信息，看这个[链接](https://stackoverflow.com/questions/12301510/how-to-get-the-actionbar-height)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T23:37:15.170

在布置视图之前，您无法获得视图的高度。尝试添加`ViewTreeObserver`：

```
someView.getViewTreeObserver().addGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        // Remember to remove it if you don't want it to fire every time
        someView.getViewTreeObserver().removeGlobalOnLayoutListener(this);

        int abHeight = getSupportActionBar().getHeight();
        // Use the height as desired...
    }
}); 
```

请参阅从 开始的文档[`View.getViewTreeObserver()`](http://developer.android.com/reference/android/view/View.html#getViewTreeObserver%28%29)。

# jquery - 保留当前的 src attr，以便我可以检索图像

> ID：15192135
> 
> 赞同：0
> 
> 时间：2013-03-03T23:19:16.393
> 
> 标签：jquery

代码是这样的：

```
$(' html body div.wrapper div.middle div.post_home:first-child a ').hover(
function() {
        $(' html body div.wrapper div.middle div.post_home:first-child a > img ').attr("src", "http:/site/test1.png");
},
 function() {
        $('html body div.wrapper div.middle div.post_home:first-child a > img ').attr("src", "currentSrc");
}); 
```

我只需要在更改之前保留图像的 src 值，以便在 mouseleave 上检索图像并显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:29:05.803

您可以使用`data`属性来存储您的 src 以便以后检索：

```
var thisImg;
$('.post_home:first-child a').hover(function () {
    thisImg = $('img', this)[0];
    $(this).data('img-src', thisImg.src);
    thisImg.src = "http:/site/test1.png";
}, function () {
    thisImg.src = $(this).data('img-src');
}); 
```

**[演示](http://jsfiddle.net/H2uc3/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:24:31.037

`src`在更改之前在活动开始时备份您的属性。并在您想返回时使用它。

```
var currentSrc;
$('.post_home:first-child a ').hover(function() {

    currentSrc = $('.post_home:first-child a > img').attr("src");
    $('.post_home:first-child a > img ').attr("src", "http:/site/test1.png");

}, function() {

        $('.post_home:first-child a > img').attr("src", currentSrc);

}); 
```

**注意：**我编辑了您的选择器，因为您所拥有的已经超出了必要的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T23:24:07.807

您可以将原始 src 缓存在变量中以供以后使用。像这样的东西：

```
var originalSrc = $(' html body div.wrapper div.middle div.post_home:first-child a > img ').attr('src');
$(' html body div.wrapper div.middle div.post_home:first-child a ').hover(
function() {
        $(' html body div.wrapper div.middle div.post_home:first-child a > img ').attr("src", "http:/site/test1.png");
},
 function() {
        $('html body div.wrapper div.middle div.post_home:first-child a > img ').attr("src", originalSrc);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T23:25:10.150

尝试使用 HTML5[数据属性](http://html5doctor.com/html5-custom-data-attributes/)，这样您就可以将原始 url 存储在“src”道具和`data-src="my other image"`您想要更改的图像中。

```
<img src="my original image" data-src="my other src" /> 
```

# rest - AngularJS $resource 创建新对象而不是更新对象

> ID：15192137
> 
> 赞同：7
> 
> 时间：2013-03-03T23:19:21.600
> 
> 标签：rest, angularjs

```
// Set up the $resource
$scope.Users = $resource("http://localhost/users/:id");

// Retrieve the user who has id=1
$scope.user = $scope.Users.get({ id : 1 }); // returns existing user

// Results
{"created_at":"2013-03-03T06:32:30Z","id":1,"name":"testing","updated_at":"2013-03-03T06:32:30Z"}

// Change this user's name
$scope.user.name = "New name";

// Attempt to save the change 
$scope.user.$save();

// Results calls POST /users and not PUT /users/1
{"created_at":"2013-03-03T23:25:03Z","id":2,"name":"New name","updated_at":"2013-03-03T23:25:03Z"} 
```

我希望这会导致对 /users/1 的 PUT 具有更改的属性。但它改为 POST 到 /users 并创建一个新用户（具有新 id 和新名称）。

有什么我做错了吗？

```
AngularJS v1.0.5 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T00:51:53.670

您只需要告诉 $resource，他必须如何将路由参数“:id”与 JSON 对象绑定：

```
$scope.Users = $resource("http://localhost/users/:id",{id:'@id'}); 
```

这应该工作，问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T08:33:03.910

感谢你的回答。它最终也对我有用。作为旁注，我使用的是 .NET WEB API，并且我的实体有一个 Id 属性（大写“I”）。PUT 和 DELETE 仅在我使用以下内容后才起作用：

```
$scope.Users = $resource("http://localhost/users/:Id",{Id:'@Id'}); 
```

希望能帮助到你。

# jquery - 用 Open Div 替换 HR 元素

> ID：15192145
> 
> 赞同：2
> 
> 时间：2013-03-03T23:20:18.010
> 
> 标签：jquery, replacewith

所以我已经被这个问题困扰了一段时间，而且似乎无法绕过它。我有一些通过所见即所得编辑器添加的内容。我想要做的是使用`<hr>`元素在其中添加 div 来控制容器的外观。问题是它添加了关闭 div。我想将结束 div 添加到下一个 hr 元素。

```
var firstChild = jQuery('.content-container-wrapper hr:first-child');
var lastChild = jQuery('.content-container-wrapper hr:last-child');
if (firstChild) {
    jQuery(firstChild).replaceWith('<div class="working">');
}; 
```

有没有办法告诉浏览器不要添加关闭 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:29:38.080

听起来您想包装从第一个 HR 开始到最后一个结束的所有内容。

以下将包装两个 HR 之间的所有内容，然后将其删除（我对您问题的解释）。

```
var $start=jQuery('.content-container-wrapper hr:first-child'),
    $end=jQuery('.content-container-wrapper hr:last-child');

$start.nextUntil( $end).wrapAll( '<div class="working">');
$start.add($end).remove(); 
```

您不能像在文本编辑器中那样插入元素的一部分然后插入结尾

API参考：

[http://api.jquery.com/wrapAll/](http://api.jquery.com/wrapAll/)

[http://api.jquery.com/nextUntil/](http://api.jquery.com/nextUntil/)

# cocoa-touch - 隐藏 UIView 的最有效方法

> ID：15192152
> 
> 赞同：0
> 
> 时间：2013-03-03T23:21:03.200
> 
> 标签：cocoa-touch, uiview, uitableview

在以下情况中，隐藏视图的最佳方法是什么？

*   将框架设置为 CGRectZero
*   隐藏属性为 YES
*   alpha 属性为 0.0

一个有没有另一个没有的好处？在运行时节省资源方面？特别是在具有可重用单元格的 UITableView 中，一个单元格与另一个单元格可能不需要某些子视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:28:02.970

这取决于您想要/需要完成什么。对于可能会被大量重用的视图，结合`view.hidden=TRUE`（我在这种情况下的选择）和/或`view.alpha=0.0`，并且可能操纵 z-index 以确保您的视图不再位于前面。

我不确定将视图的框架设置为 的好处，`CGRectZero`此时完全删除它可能更合适。

简而言之，如果您不需要它，请不要保留它。

**更新**：

提到表格单元格，还要考虑创建多个[自定义单元格](http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/)的可能性，特别是如果删除子视图会导致布局问题。可以根据您设置的任何标准创建每个单元格。

**更新 2**：

根据下面留下的评论，如果单元格很复杂，通过代码绘制单元格可能是正确的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:28:41.207

使用 UIView，`alpha=0`具有可动画化的优点，而`hidden=YES`没有。`frame=CGRectZero`也是可动画的，但效果完全不同。动画`alpha=0.0`时会导致视图淡出，而`frame=CGRectZero`会导致它看起来消失在左上角。我不会担心任何这些技术的系统资源开销，因为它们都很轻量级。

# javascript - 如何在 Internet Explorer 中获得诸如线索提示之类的工具提示？

> ID：15192153
> 
> 赞同：0
> 
> 时间：2013-03-03T23:21:12.600
> 
> 标签：javascript, html, css, tooltip, cluetip

我的线索提示在 Chrome 中运行良好，但每当我将相同的确切代码带到 IE 时，它甚至都不会显示或显示默认工具提示。有什么建议么？是否有一些代码可以放入我的线索提示中以使其在 IE 中工作？任何帮助，将不胜感激。

是否需要一些代码才能使线索提示或其他客户工具提示在 IE 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:28:33.460

试试我的 jQuery 工具提示插件。它针对手机使用进行了优化，并适用于 IE lt 7：[https ://github.com/yckart/jquery.tooltip.js](https://github.com/yckart/jquery.tooltip.js)

这不是答案，而是线索提示的替代方法。

# c# - 如何创建 WaitableTimer 回调？

> ID：15192156
> 
> 赞同：2
> 
> 时间：2013-03-03T23:21:34.653
> 
> 标签：c#

我正在尝试在 C# 中创建一个例如 30 分钟的周期性计时器，它能够将计算机从睡眠中唤醒并开始工作。

在网络上进行一些研究后，似乎应该使用 Waitable 计时器功能。我已经制作了一些测试代码，但它并没有像我希望的那样工作。当我调试和单步执行代码时，可以创建计时器并多次调用回调。但是当我在没有任何断点的情况下运行代码时，回调只会被调用几次。

我制作了一个表单应用程序，在按下按钮时运行“testWaitableTimer”。“myTimerEvent”应该打印每个定时器事件的时间。我不想在测试时等待 30 分钟超时，因此将时间段设置为 2 秒间隔和 5 秒的到期时间。

```
 public void myTimerEvent(IntPtr complretionArg, UInt32 timerLow, UInt32 timerHigh)
    {
       SetText( DateTime.Now.ToString() + "hepp ");
    }

    public delegate void TimerCompleteDelegate(IntPtr complretionArg,
                                           UInt32 timerLow, UInt32 timerHigh);

    [DllImport("kernel32.dll")]
    public static extern SafeWaitHandle CreateWaitableTimer(IntPtr lpTimerAttributes, bool bManualReset, string lpTimerName);

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool SetWaitableTimer(SafeWaitHandle hTimer, [In] ref long pDueTime, int lPeriod, TimerCompleteDelegate pfnCompletionRoutine, IntPtr lpArgToCompletionRoutine, bool fResume);

    SafeWaitHandle handle;
    private void testWaitableTimer()
    {

        DateTime utc = DateTime.Now.AddSeconds(5);
        long duetime = utc.ToFileTime();

        using (handle = CreateWaitableTimer(IntPtr.Zero, true, "MyWaitabletimer"))
        {
            // create a periodic timer that will fire of the first event after 5sec and then every 2 sec
            if (SetWaitableTimer(handle, ref duetime, 2000, myTimerEvent, IntPtr.Zero, true))
            {
                using (EventWaitHandle wh = new EventWaitHandle(false, EventResetMode.AutoReset))
                {
                    wh.SafeWaitHandle = handle;
                    wh.WaitOne();                       // wait for first event
                    System.Threading.Thread.Sleep(2000);
                    wh.WaitOne();                       // wait for second event
                    System.Threading.Thread.Sleep(500);
                    wh.WaitOne();                       // wait for third event.

                }
            }
            else
            {
                throw new Win32Exception(Marshal.GetLastWin32Error());
            }
        }
    } 
```

我对 C# 很陌生，有一些问题：

1.  运行代码时，多次调用 wh.WaitOne()，但它似乎只等待第一个计时器事件。如果所有“睡眠”功能都被删除，代码将等待第一个，然后跳过其余的。

2.  我在 testfunction 之外创建了 safeWaitHandle。但似乎只有在运行 testfunction 时才会调用计时器回调。并在退出测试功能时停止执行。这是为什么？

# php - PHP/SQLite 接受不正确的帖子值

> ID：15192157
> 
> 赞同：0
> 
> 时间：2013-03-03T23:21:43.663
> 
> 标签：php, html, css, sqlite

我正在使用 SQLite 创建一个简单的 PHP 登录系统，当用户发布 HTML 表单时，无论他们输入什么，系统都会将他们引导到“仅限会员页面”。这是我的表单处理代码：

```
<?php
    $username = $_POST["username"];
    $password = $_POST["password"];

    $database = new PDO("sqlite:database.sqlite");

    $result = $database -> query("SELECT COUNT (*) FROM accounts WHERE username = '$username' AND password = '$password'");
    if ($result > 0)
    {
            setcookie("session", "Cool", time()+3600);
            header("location:index.php");
    }
    else
    {
            echo "Failure";
    }
?> 
```

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:25:44.217

我觉得应该是...

```
if ($result->rowCount() > 0) ... 
```

并且：使用准备好的语句来避免 SQL 注入，不要在数据库中存储未加密的密码，这是一个巨大的安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:38:43.030

试试这个（你不应该需要计数，只是一个简单的逻辑语句）：

```
$query = "SELECT * FROM accounts WHERE username = :username AND password = :password";
$stmt = $database->prepare($query);
$stmt->execute(array(":username"=>$username, "password"=>$password));
$result = $stmt->fetch(PDO::FETCH_ASSOC);
if($result)
{
    //Success
    setcookie("session", "Cool", time()+3600);
    header("location:index.php");
}
// Not successful.
return null; 
```

# mule - 使用骡子的 https:inbound-endpoint 的任何示例？

> ID：15192160
> 
> 赞同：1
> 
> 时间：2013-03-03T23:21:58.167
> 
> 标签：mule

我想使用 mule ESB 定期访问 rest api，并将响应 JSON 保存到磁盘。

基本上，我需要使用 https:inbound-endpoint 来执行类似的操作：

```
curl -H "Authorization: Bearer XXXXX" -k https://somehost.com/api 
```

在骡子。

我可以从任何工作示例开始吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:42:11.203

基本上，您需要配置 https 连接器并创建一个密钥库或使用 JDK 上的密钥库。

[mule 文档](http://www.mulesoft.org/documentation/display/33X/HTTPS+Transport+Reference)页面包含一个非常简单的示例，其中包含逐步设置。

# html - 如何防止“a”样式应用于链接？

> ID：15192161
> 
> 赞同：0
> 
> 时间：2013-03-03T23:21:59.357
> 
> 标签：html, css

我正在尝试在不使用图像的情况下为我的网站创建横幅。但是，该横幅也是一个链接。

有没有办法让我覆盖我的 div 中“a”（链接）CSS 样式的使用？

假设 CSS 看起来像这样：

```
a:link, a:visited {
    color: #176093;
}

#logo {
    color: red;
    font-size: 48px;
} 
```

换句话说，我希望#logo 的CSS 定义覆盖链接的定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:28:24.170

将评论转换为答案：

使用它，您可以在给定容器中指定样式：

```
#logo a {
    color: red;
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:28:46.847

如果您只想将样式应用于 div 中的锚点`#logo`，则必须使用如下选择器：

```
#logo a { 
    color: red;
    font-size: 48px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T23:28:46.857

如果 HTML 是这样的；

```
<div id="logo"><a href="#">Banner Text</a></div> 
```

然后使用 CSS

```
#logo a:link, #logo a:visited{color:#176093;} 
```

如果 HTML 是这样的

```
<a id="logo" href="#">Banner Text</a> 
```

然后使用 CSS

```
#logo:link, #logo:visited{color:#176093;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T23:29:19.017

你的问题是你的选择器的特殊性`:link`，`:visited`你也应该覆盖它们：

```
#logo {
    font-size: 48px;
}

#logo:link, #logo:visited {
    color: red;
} 
```

# jquery - jQuery Google Maps - 点击时打开信息窗口

> ID：15192164
> 
> 赞同：1
> 
> 时间：2013-03-03T23:22:19.257
> 
> 标签：jquery, google-maps-api-3

我正在从 HTML 数据运行谷歌地图，我真的需要能够点击行（div）来打开相关的标记。我希望在一个`.each()`函数中添加一个 onclick，但我无法得到任何我试图工作的东西。

基本上，如果单击每一行可以打开相关的信息窗口，它将解决我所有的问题:)

帮助将不胜感激。

```
<script type="text/javascript" language="javascript">
        var infowindow = new google.maps.InfoWindow();
        var myOptions = {
           zoom: 4,
           center: new google.maps.LatLng(-40.900557, 174.885971),
           mapTypeId: google.maps.MapTypeId.ROADMAP,
           disableDefaultUI: true
        };
        var icon = "img/marker.png";
        $(function() {
            map = new google.maps.Map(document.getElementById("map"), myOptions);
            // grab data attributes from html
            $('.row').each(function( index ){
                var rLat = $(this).data("coordinates").lat;
                var rLong = $(this).data("coordinates").long;
                var rTitle = $(this).find('.itemtitle a').html();
                var rTel = $(this).find('.tel').html();
                var rAdd = $(this).find('.add').html();
                var contentString = '<div style="text-align:left"><h4 style="color:#0068a6;font-size:16px;margin:0px 0px 10px 0px;">' + rTitle + '</h4><strong>' + rTel + '</strong><br /><br />' + rAdd + '</div>';
                var myLatLng = new google.maps.LatLng( rLat, rLong );
                var otherMarkers = new google.maps.Marker({
                    position: myLatLng,
                    map: map,
                    icon: icon
                });
                // click actions
                google.maps.event.addListener(otherMarkers, 'click', (function(otherMarkers, index) {
                    return function() {
                        infowindow.setContent( contentString );
                        infowindow.open( map, otherMarkers );
                    }
                })(otherMarkers, index));               
            });
        });

        $(function() {
            $(".leftblock .ctrlholder:nth-child(2)").addClass("last");
            $(".leftblock .ctrlholder:nth-child(3)").addClass("last");
        });
    </script> 
```

HTML

```
<div class="row" data-coordinates='{"lat" : -41.407493, "long" : 174.584122}'>
    <h4 class="itemtitle"><a href="">Title</a></h4>
    <p class="centralregion">Address</p>
    <ul>
        <li class="add">Post Address</li>
        <li class="tel">tel</li>
    </ul>
    <span class="filter3"></span>
</div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:47:53.543

由于您已经遍历所有行以创建标记，因此您可以向将单击标记的每一行添加一个单击处理程序

添加标记事件监听器后：

```
 google.maps.event.addListener(otherMarkers......); 
```

添加触发标记单击的行单击处理程序：

```
/* "this" is the row instance*/
$(this).click(function(){
 google.maps.trigger( otherMarkers ,'click')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:46:39.220

以下方法略微复杂，但具有节省内存的优势。

```
$(function() {
    var myOptions = {
       zoom: 4,
       center: new google.maps.LatLng(-40.900557, 174.885971),
       mapTypeId: google.maps.MapTypeId.ROADMAP,
       disableDefaultUI: true
    };
    var map = new google.maps.Map(document.getElementById("map"), myOptions);
    var infowindow = new google.maps.InfoWindow();
    var icons = {
        'dflt': "../images/map_icons/beach-certified.png",
        'selected': "../images/map_icons/harbour-guest.png"
    };
    var infoTemplate = '<div style="text-align:left"><h4 style="color:#0068a6;font-size:16px;margin:0px 0px 10px 0px;">%Title</h4><strong>%Tel</strong><br /><br />%Add</div>';
    var seletedMarker = null;

    //Function for composing the info string on the fly.
    //This avoids needing to store fully composed info strings in a closure,
    //on the offchance that they will be viewed.
    function composeInfoString(row) {
        var $row = $(row);
        return infoTemplate
            .replace('%Title', $row.find('.itemtitle a').html())
            .replace('%Tel', $row.find('.tel').html())
            .replace('%Add', $row.find('.add').html());
    }

    //closure-forming function to trap row and marker
    function clickHandler(row, marker) {
        return function() {
            if(seletedMarker) {
                seletedMarker.setIcon(icons.dflt);//revert seletedMarker's icon to .dflt
            }
            infowindow.setContent( composeInfoString(row) );
            infowindow.open( map, marker );
            marker.setIcon(icons.selected);//Set marker's icon to .seleted
            seletedMarker = marker;//Remember the currently selected marker so it can be reverted to default next time round.
        };
    }

    $('.row').each(function( index, row ) {
        var $row = $(row);
        var coords = $row.data("coordinates");
        //console.log([coords.lat, coords.lng].join());
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng( Number(coords.lat), Number(coords.lng) ),
            icon: icons.dflt,
            map: map
        });
        var fn = clickHandler(row, marker);
        google.maps.event.addListener(marker, 'click', fn);
        $row.data('clickFn', fn);//associate fn with row.
    });

    //Delegate handling of row clicks upward (to closest common row container).
    $(document).on('click', '.row', function() {
        var fn = $(this).data('clickFn');
        if(fn) fn();//this is the functionality you seek
    });
}); 
```

经济是双重的：

*   通过动态组合信息字符串，您可以避免将完全组合的信息字符串存储在闭包中（每个标记/行一个），以免被查看。
*   通过将`fn`（务实地说，“闭包”）作为一个`.data()`项目附加到每一行，并向上委派单击处理，您可以利用直接单击标记时使用的相同闭包，而无需为每个标记/行添加额外的函数包装器。

当使用许多标记时，这些类型的经济可能很重要，否则不会造成伤害。

此外，您可能想考虑将坐标经度属性从 更改`long`为`lng`。在代码中，这将避免`.long`在某些浏览器中出现问题。`long`是许多底层语言关键字之一，应该避免作为 js 对象属性标识符。

## 编辑

现已测试 - 请参阅[更新的小提琴](http://jsfiddle.net/acMS8/5/)。上面反映了各种修复。

## 编辑 2

修改代码以换出选定的标记图标 - 请参阅[更新的小提琴](http://jsfiddle.net/acMS8/6/)。

# macos - OS X iconutil 报告“无效的图标集”

> ID：15192173
> 
> 赞同：15
> 
> 时间：2013-03-03T23:23:14.380
> 
> 标签：macos, icons, packaging

我正在使用 JarBundler 将现有的 Java Swing 应用程序打包为 OS X 应用程序，除了添加图标之外，一切都进行得很好。我在 Photoshop 中创建了 PNG 文件，命名如下：

```
icon_16x16.png
icon_32x32.png
icon_128x128.png 
```

这些进入一个名为 JHOVEicons 的文件夹，然后我运行：

```
iconutil -c icns -o JHOVEicons.icns JHOVEicons/ 
```

这会导致错误消息：

```
JHOVEicons/:error: Invalid Iconset. 
```

我仔细检查了这些文件的大小是否符合他们声称的大小。我尝试添加 256 和 512 尺寸，但据说不需要一整套。它不断给出同样的错误。

我可能做错了什么？我在山狮上奔跑。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-04T02:11:40.320

我想到了。我正在转换的图标目录必须具有 .iconset 扩展名。

# java - 显示模型中的 JList 元素

> ID：15192174
> 
> 赞同：0
> 
> 时间：2013-03-03T23:23:15.873
> 
> 标签：java, swing, user-interface, model, jlist

我有一个对象列表，这些对象`Person (int age, String name)`存储在`DefaultListModel`要分配给`JList`.

```
DefaultListModel model;
model = new DefaultListModel();

Person p = new Person(43,"Tom");
//insert in the model
model.add(size, p);

jList1.setModel(model); 
```

我只想在 中显示名称`JList`，但如果不使用另一个名称列表（我希望避免），我无法弄清楚如何做到这一点。

有没有简单的方法来告诉`JList`对象的哪个属性`Person`要显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:35:46.430

视图的显示应该是`ListCellRenderer`

就像是...

```
public class PersonCellRenderer extends DefaultListCellRenderer {
    public Component getListCellRendererComponent(JList<?> list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
        super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
        if (value instanceof Person) {
            setText(((Person)value).getName());
        }
        return this;
    }
} 
```

要将渲染应用于列表，您需要执行...

```
jList1.setCellRenderer(new PersonCellRenderer()); 
```

查看[编写自定义单元格渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#renderer)以获取更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T18:41:06.573

只需重写 Person 类的 toString() 方法即可返回 Person 的名称

```
DefaultListModel model;
model = new DefaultListModel();

Person p = new Person(43,"Tom");
//insert in the model
model.add(size, p);

jList1.setModel(model);

public class Person {

  private int age;
  private String name;

  public Person(int age, String name) {
    this.age = age;
    this.name = name;
  }

  public String getName() {
    return name;
  }

  public String toString() {
    return this.getName();
  }
} 
```

# c# - 为什么 System.Data.SQLite 总是从 bool 列的查询中返回 False？

> ID：15192175
> 
> 赞同：2
> 
> 时间：2013-03-03T23:23:28.980
> 
> 标签：c#, sqlite, system.data.sqlite

这是我的代码：

```
 string sql = "SELECT * FROM rosters WHERE team_id = " + teamID;
        SQLiteCommand command = new SQLiteCommand(sql, db.GetConnection());
        SQLiteDataReader reader = command.ExecuteReader();
        while (reader.Read())
        {

            if ((bool)reader["in_lineup"])
            {
                lineup.Add(player);
            }

        } 
```

我遇到的问题是最后一个 if 语句。"in_lineup" 是一个布尔列，一些记录将其设置为 true，但从未输入 if 语句，并且 reader["in_lineup"] 始终为 false。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:39:59.793

我建议反对基于对象的 getter，如`Reader["colName"]`. 我一直使用知道列索引的强类型吸气剂，如

```
Reader.GetBoolean(3) 
```

这具有检测表布局/类型关联中的错误的额外好处。

编辑：作为旁注，我们添加了扩展方法来处理 DBNull 返回。例如：

```
/// <summary>
    /// Returns a string from a column
    /// This extension exists because SQLite doesn't recognize null as a valid string but C# does
    /// </summary>
    /// <param name="Source"></param>
    /// <param name="Column"></param>
    /// <returns></returns>
    public static String xGetString(this System.Data.Common.DbDataReader Source, Int32 Column)
    {
        if (Source.IsDBNull(Column))
            return null;

        if (Source.GetFieldType(Column) != typeof(String))
            throw new Core.DatabaseException(
                String.Format("Column `{0}` ({1}) is not of type String. Type is {2}.",
                Source.GetName(Column), Column, Source.GetFieldType(Column).Name));

        return Source.GetString(Column);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T06:36:50.330

SQLite 似乎为布尔值返回 0 或 1。C#（与 C++ 不同）不会将整数转换为布尔值。因此重写测试可能会更好：

```
if ((bool)reader["in_lineup"]) 
```

作为

```
if((int)reader["in_lineup"] == 1) 
```

# javascript - JScript 将链接绑定到键

> ID：15192178
> 
> 赞同：0
> 
> 时间：2013-03-03T23:23:37.933
> 
> 标签：javascript, jquery, key, hyperlink

`<li id="add-this" style=""><a href="#">Add this</a></li>`

我们都知道这是做什么的，当你按下它时它会激活一个脚本，但我想知道它是否可以将它绑定到一个键，所以当你按下它时它会激活脚本。尝试了不同的东西，现在在谷歌上搜索了几个小时，但找不到我要找的东西。我试图为我的网站制作一个脚本，以便您可以使用键盘浏览它，我可以将脚本绑定到一个键，但不知道如何做到这一点。

谢谢 //Nemx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:04:39.227

您可以将 keydown、keypress 或 keyup 事件处理程序添加到文档并触发对您的链接的点击。像这样（只需将 *YOUR_KEYCODE* 替换为您希望用户必须按下的键的代码）：

```
$(document).keydown(function(e){
    if( e.which === YOUR_KEYCODE ) {
        $("#add-this").click();
    }
}); 
```

[http://fiddle.jshell.net/QEk33/](http://fiddle.jshell.net/QEk33/)

# android - 在 Google In-App Billing API 中使用什么作为开发人员有效负载？

> ID：15192184
> 
> 赞同：32
> 
> 时间：2013-03-03T23:24:02.037
> 
> 标签：android, security, in-app-purchase, in-app-billing

[在 Android 中销售应用内产品](http://developer.android.com/training/in-app-billing/purchase-iab-products.html#Purchase)的培训课程建议在发出购买请求时使用有效负载：

> 第五个参数包含一个“开发人员有效负载”字符串，您可以使用它来发送有关订单的补充信息（它可以是一个空字符串）。通常，这用于传递唯一标识此购买请求的字符串令牌。如果您指定字符串值，Google Play 会将此字符串与购买响应一起返回。随后，当您查询此次购买时，Google Play 会返回此字符串以及购买详情。
> 
> **安全建议：**最好传入一个字符串，以帮助您的应用程序识别进行购买的用户，以便您以后可以验证这是该用户的合法购买。对于消耗品，您可以使用随机生成的字符串，但对于非消耗品，您应该使用唯一标识用户的字符串。

[实施 IAB 购买页面](http://developer.android.com/google/play/billing/billing_integrate.html)有类似的建议，另外建议应在您自己的安全服务器上检查有效负载值：

> **安全建议：**当您发送购买请求时，创建一个唯一标识此购买请求的字符串令牌，并将此令牌包含在 developerPayload 中。您可以使用随机生成的字符串作为令牌。当您收到来自 Google Play 的购买响应时，请务必检查返回的数据签名、orderId 和 developerPayload 字符串。为了增加安全性，您应该在自己的安全服务器上执行检查。确保验证 orderId 是您之前未处理的唯一值，并且 developerPayload 字符串与您之前发送的购买请求的令牌相匹配。

查看 Google 用于演示 API 的 Trivial Drive 应用程序的源代码，我发现了以下警告：

```
* WARNING: Locally generating a random string when starting a purchase and
* verifying it here might seem like a good approach, but this will fail in the
* case where the user purchases an item on one device and then uses your app on
* a different device, because on the other device you will not have access to the
* random string you originally generated.
*
* So a good developer payload has these characteristics:
*
* 1\. If two different users purchase an item, the payload is different between them,
*    so that one user's purchase can't be replayed to another user.
*
* 2\. The payload must be such that you can verify it even when the app wasn't the
*    one who initiated the purchase flow (so that items purchased by the user on
*    one device work on other devices owned by the user).
*
* Using your own server to store and verify developer payloads across app
* installations is recommended. 
```

因此，从所有这些消息来看，使用随机数/字符串作为有效负载听起来是个坏主意。此外，在阅读了最后一个警告之后，将设备 ID 作为有效负载也传递听起来是个坏主意，因为对于不同设备上的同一用户，它会有所不同。那么开发人员有效载荷应该使用什么？

我的应用程序提供了用户无需登录任何服务即可访问的本地功能。所以没有“用户”的概念，也没有服务器端组件。应用内购买请求是针对从应用中删除广告的升级。像这样的应用程序使用有效负载功能是否有意义，或者我最好只使用一个空字符串并让它容易受到重放攻击？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-06T13:59:34.347

我对 InApp 购买的了解来自较旧的 v2 库。我还没有使用最新的 v3。但是，希望我仍然可以提供帮助。

是的，使用开发人员有效负载作为附加的安全功能肯定会有所帮助，但是您是否应该这样做可能比客观困境更主观。在我的例子中，我的客户已经有一个服务器，因为客户在购买应用程序后必须下载 200mb 的文件。我们使用开发人员有效负载来存储有关授权下载文件的信息。此信息对于告诉应用程序如何处理下载的文件至关重要。

`verifyPurchase()`我们仍然通过使用服务器调用覆盖本地方法来提供额外的安全性。IE，提供我们自己的 nonce 来检查。在本地这样做不是很安全。

至于你的情况，我说这是风险与成本的问题。您的应用程序被黑客入侵和客户绕过购买的风险与实施附加安全性的成本是什么？如果您的应用程序被下载超过 100,000 次，那么您将面临相当大的风险。如果超过 100 万次，则风险很高。如果只有几千，那么盗版可能会忽略你的App。如果您选择增加的安全性，您需要启动并运行服务器，然后添加应用程序和服务器所需的所有代码和握手。所有这些都需要时间和金钱。尤其是在您的应用程序生命周期内支付服务器费用。

# java - 为基于单链接节点的自定义堆栈创建迭代器

> ID：15192187
> 
> 赞同：0
> 
> 时间：2013-03-03T23:24:11.883
> 
> 标签：java

对于作业，我必须创建一个自定义堆栈类来实现 java.util.Stack 的常用功能。通过类扩展，这些堆栈之一基于实际的 java.util.Stack 类。然而，另一个基于创建“可链接”节点，允许您创建一个可以推送或弹出的单链接堆栈（`Linkable`在这种情况下，是一个由`getNext()`和组成的接口`setNext()`）。我有基本的代码，基本上如下：

```
public class LStack {
    Linkable head;

    public pop() { /* Pop element off of stack */ }
    public push() { /* Push element onto stack */ }
    public front() { /* Return tail of stack without removing it */ }
    public makeNull() { /* Clear entire stack */ }
    public empty() { /* Return true or false based on emptiness of stack */ }
} 
```

对于作业的下一部分，我必须`Iterator`使用`iterator()`我将在 中实现的方法创建一个实例`LStack`。在尝试实现迭代器时，我一直在试图弄清楚如何实现`Iterator.next()`方法覆盖。不幸的是，我的教授强烈反对泛型，所以我不能使用`Iterator<E>`或类似的东西来为我正在迭代的内容提供上下文。这是我当前的`Iterator`代码：

```
class LIterator implements Iterator {
    Object current;
    LStack stack;

    LIterator(LStack stack) {
        current = null;
        this.stack = stack;
    }

    // .... unimplemented next(), hasNext(), remove()  
} 
```

如何从迭代器中检索下一个对象？我曾尝试强制转换为一个`Linkable`对象以便我可以使用`getNext()`，但 eclipse 将其标记为与`Iterator.next()`.

# ios - 加载 ViewController 时出错 - 加载了 nib 但未设置视图出口

> ID：15192190
> 
> 赞同：2
> 
> 时间：2013-03-03T23:24:20.493
> 
> 标签：ios, objective-c, uiviewcontroller

我的 iOS 5-6 应用程序在尝试从一个故事板文件 (FifthViewController.storyboard) 中推送的按钮加载 ViewController 到单独的 xib (WebViewController.xib) 后崩溃。确切的错误信息：`Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "WebViewController" nib but the view outlet was not set.'`

此错误通常在未连接视图出口或未为 ViewControllers 分配类时出现。在 WebViewController.xib 中，所有东西都是连接的，包括视图（实际上你不能断开它）和我的 web 视图。我的 ViewController 的类被正确标记为 WebViewContrller。

这是我的代码：

**WebViewController.h**

```
@property (weak, nonatomic) IBOutlet UIWebView *webView;
@property (weak, nonatomic) NSURL *urlToLoad;

- (id)initWithURL:(NSURL *)url; 
```

**WebViewController.m**

```
@synthesize webView, urlToLoad;

- (void)viewDidLoad {
[super viewDidLoad];
[webView loadRequest:[NSURLRequest requestWithURL:urlToLoad]];
}

- (id)initWithURL:(NSURL *)url {
[self setUrlToLoad:url];
return self;
} 
```

**FifthViewController.m** - 这是一个按钮所在的 VC，它调用 WebViewController

```
- (IBAction)pushedArts:(id)sender {
WebViewController *wvc = [[WebViewController alloc] initWithURL:[NSURL URLWithString:@"http://www.yahoo.com"]];
[self presentModalViewController:wvc animated:YES];
} 
```

![图 1](../Images/cc0fe1c8907e0b70b47205220047decf.png)![图 2](../Images/55dee5bdd28ef0d424c4061444cab001.png) 这些图像显示了 WebViewController.xib 及其类中的连接。任何见解将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:54:51.543

您的`-[WebViewController initWithURL:]`方法应该调用`[super initWithNibName:bundle:]`以正确初始化您的视图控制器，包括关联正确的 nib 等。

通常，如果您编写任何初始化程序，它必须（直接或间接）调用超类的指定初始化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:29:54.267

我认为您需要检查您的 nib 文件，因为我很清楚系统无法找到您的 nib 文件，或者未连接视图插座。打开您的 nib 文件，转到最后一个选项卡，然后连接您的视图插座，就像您应该连接其他组件的正常方式一样

# ios - UITextField - 观察 selectedTextRange 的变化？

> ID：15192195
> 
> 赞同：2
> 
> 时间：2013-03-03T23:25:02.520
> 
> 标签：ios, text, uitextfield, selection

有没有办法观察 UITextField 的 selectedTextRange 的变化？

我尝试观察所有 UIControlEvents。但是更改 selectedTextRange 不会触发 UIControlEvent。

另一个死胡同—— UIKit 类不兼容 KVO。

然后是 UITextFieldTextDidChangeNotification。但这是对文本的更改。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:16:34.860

子类`UITextField`如下。

```
@interface WJTextField : UITextField
@end

@protocol WJTextFieldDelegate <UITextFieldDelegate>
- (void) textFieldDidChangeSelection: (UITextField *) textField;
@end 
```

执行：

```
@implementation WJTextField

- (void) setSelectedTextRange: (UITextRange *) selectedTextRange
{
    [super setSelectedTextRange: selectedTextRange];
    if ([self.delegate respondsToSelector: @selector(textFieldDidChangeSelection:)])
        [(id <WJTextFieldDelegate>) self.delegate textFieldDidChangeSelection: self];
}

@end 
```

然后添加`-textFieldDidChangeSelection:`到您的文本字段的委托。

**警告：**此委托消息仅在光标移动时发送，在键入或粘贴文本时*不会*发送，对于那些您必须实现的事件`textField:shouldChangeCharactersInRange:replacementString:`，选择范围将设置为`range.location + [string length]`（如果您返回`YES`）或保持不变（如果您返回`NO`）。

# jquery - JQuery父标签不粘

> ID：15192205
> 
> 赞同：1
> 
> 时间：2013-03-03T23:27:21.617
> 
> 标签：jquery, parent, slidedown

我在让我的 JQuery 向下滑动效果粘在我的标签（文本）上时遇到问题。

我的 CSS

```
html, body { 
    margin:0; 
    padding:0; 
}
body {
    background-color: #222222;
}
a {
    -moz-transition: all 200ms ease-in-out 0s;
    z-index:99 !important;
}
div#navigation {
    background-color: #333333;
    box-shadow: 0 0 16px #000000;
    min-height:200px;
    width: 100%;

}
ul#nav {
    list-style: none outside none;
    display:inline-table;
    margin: 0;
    z-index:1; /* ########################################################## */
    width: 100%;
}
#nav:after { content:""; clear:both; }
ul#nav li {
   /* background-color: #666666;*/
    border-bottom: 1px solid #333333;
    color: #FFFFFF;
    display:table-cell;
    max-width:80px; 
    min-height:40px;
    position:relative;
}
ul#nav li a {
    color: #999999;
    text-decoration: none;
}
ul#nav li a:hover {
    color: #FFFFFF;
}

/* ############################################################# */
/*  MAGIC li bg   */
#libg{
    background:#666;
    z-index:1;
    width:0px;
    position:absolute;
    max-width:200px;
    min-height:30px;
    margin:-20px 0 0 0;
    opacity:0;
    -moz-opacity:0.0;
} 
```

我的 html

```
<body>
    <div id="navigation">
        <ul id="nav">
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Software</a></li>
            <li><a href="#">Contact</a></li>

            <li><a href="#">Forum</a></li>
            <div style="clear:both"></div>
        </ul>
    </div>
</body> 
```

我的jQuery

```
$('#nav li a').append('<div id="libg"></div>');
var posTop, liW, liH;
$('#nav li a').hover(function(){

    posTop = $(this).offset().top;

    liW = $(this).parent('li').width();
    liH = $(this).parent('li').height();

    $('#libg').css({ width: liW+'px' }).stop().animate({height: liH, opacity: '1'}, 500);

},function(){

    $('#libg').stop().animate({width: '0px', width: '0px' , opacity: '0'}, 0);

}); 
```

这是一个[jsfiddle](http://jsfiddle.net/eUSNd/53/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:52:38.950

你有几个问题：

1）您正在创建具有相同 ID 的多个对象。考虑给添加的对象一个类。

2）您只捕获父对象的顶部位置`topPos`。包括父级的高度将允许您将对象定位在其底部。

更新了js

```
$('#nav li a').append('<div class="libg"></div>');

var posTop, liW, liH;
$('#nav li a').hover(function(){

    posTop = $(this).offset().top + $(this).outerHeight();

    liW = $(this).parent('li').width();
    liH = $(this).parent('li').height();

    $(this).children('.libg').css({ width: liW+'px'}).offset({top: posTop}).stop().animate({height: liH, opacity: '1'}, 500);

},function(){

    $(this).children('.libg').stop().animate({width: '0px', width: '0px' , opacity: '0'}, 0);

}); 
```

我在这里更新了你的代码：http: [//jsfiddle.net/eUSNd/73/](http://jsfiddle.net/eUSNd/73/)

# sql - Oracle REGEXP-如何获取下一个字符串

> ID：15192206
> 
> 赞同：-1
> 
> 时间：2013-03-03T23:27:24.333
> 
> 标签：sql, oracle11g

我正在使用 Oracle 11G，并且具有以下字段 NAME 和以下字符串：

```
NAME
'String having ZT-01183 - App # 2'
'This String having AG-01183 with - Apps # 4' 
```

我正在使用以下正则表达式，但得到的是以下内容：ZT-01183 - App # 2 和 AG-01183 with - Apps # 4。

```
CASE 
    WHEN REGEXP_LIKE(NAME, 'ZT-|AG-|having') 
    THEN regexp_replace(NAME, '^.*? having ','')
    END AS NEW_NAME 
```

我只想获取语句中的下一个字符串，因此结果应该是 AG-01183 和 ZT-01183。相反，我得到了一切。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:51:33.650

你可以使用

```
THEN regexp_replace(name, '.*having ([^ ]+).*', '\1') 
```

编辑：

我最初使用lookbehind 的想法似乎已被Oracle 似乎无法使用lookbehind 所破坏。我的编辑使用组来取回您想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:14:01.020

请试试：

```
THEN regexp_substr(NAME, '[A-Z]{2}-[0-9]{5}') 
```

# iphone - 使用 SMTP 的 iPhone 应用程序

> ID：15192210
> 
> 赞同：0
> 
> 时间：2013-03-03T23:28:21.003
> 
> 标签：iphone, ios, smtp

我正在为 iPhone 创建一个应用程序，它使用 SMTP 自动将电子邮件发送到预设地址。如果提交到应用商店，这种事情会被接受，还是苹果只允许使用 UI 发送电子邮件？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:37:34.243

据我所知，只要您在实现 SMTP 客户端时没有使用私有 API，Apple 不会拒绝该应用程序不使用内置邮件 API。

也就是说，Apple 担心的是未经用户明确同意以用户名义发送的消息。如果您使用他们的个人信息（电子邮件地址），那么如果他们检测到这一点，您将不得不切换到本机 API，或者需要在发送之前提示用户。

让 iOS 应用程序联系服务器并让该服务器发送电子邮件可能会更好。苹果无法检测到这一点。

# properties - UIScrollView 中嵌入的 UIImageView 和 UIImage 属性的强或弱声明？

> ID：15192218
> 
> 赞同：4
> 
> 时间：2013-03-03T23:29:00.217
> 
> 标签：properties, ios6, uiscrollview, uiimageview

我在 NavController 中嵌入了一个 UIScrollview，两者都在 iOS6 故事板中拖出。在我的 scrollViewController viewDidLoad 中，我以编程方式添加一个 UIImageView 并为进入该 UIImageView 的图像保留一个属性。

```
@interface MyScrollViewController () <UIScrollViewDelegate>

@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;
@property (strong, nonatomic) UIImageView *imageView;
@property (strong, nonatomic) UIImage *image;

@end 
```

默认情况下，将故事板中的 ScrollView 拖出并连接插座使其成为弱属性，但其他两个属性的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T15:50:19.183

最新版本的 Xcode 默认使用`strong`. 如果您使用`weak`，最终可能会收到有关在给定范围内多次访问弱变量的编译器警告。`strong`因此，除非您有充分的理由不这样做，否则只需将其用于所有内容。

# c - 在c中连接整数数组

> ID：15192221
> 
> 赞同：0
> 
> 时间：2013-03-03T23:29:30.197
> 
> 标签：c

我在尝试将整数数组连接成一个数字时遇到了一些麻烦。我了解如何使用单个数字（我的代码如下）来执行此操作，但是如果我提示用户输入 5 个数字并且他们输入了 12、345、552、126、44。我需要开发一种算法用户输入并将其连接成一个整数，例如 1234555212644

```
#include<stdio.h>

int main(void)
{

    int num[3]={1, 2, 3}, n1, n2, new_num;

    n1 = num[0] * 100;
    n2 = num[1] * 10;

    new_num = n1 + n2 + num[2];

    printf("%d \n", new_num);

    return 0;
} 
```

输出：123

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:43:24.970

如果您只是尝试打印整数，@dreamlax 的建议是有意义的，但如果您已经简化了问题并且实际上您想要实际的整数，您可以使用对数来确定一个数字有多少位数：

```
int concat(int* arr, size_t len)
{
    int result = 0;

    for (int i = 0; i < len; i++)
    {
        int digits = floor(log10(arr[i])) + 1;
        result *= pow(10, digits);
        result += arr[i];
    }

    return result;
} 
```

这是[一个 Ideone.com 演示](http://ideone.com/BlPAsJ)。

但是，确实，您很快就会用完存储如此大整数的空间。如果您需要存储如此大的整数，您可能需要考虑使用 char 数组并`sprintf`在循环中使用来连接数字，或者使用`stringstream`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:58:36.593

像这样的东西适用于长数字。这里没有错误检查，只是为了说明。

```
int main(int argc, char **argv)
{   
    int num[] = {12, 345, 552, 126, 44};
    char buf[1000] = ""; // max size of number in digits - 1
    char n[10] = ""; // max size of individual number - 1

    for (int i = 0; i < sizeof(num)/sizeof(num[0]); i++) {
        sprintf(n, "%d", num[i]);
        strcat(buf, n);
    }

    printf("Number: %s\n", buf);

    return 0;
} 
```

如果需要，您还可以使用 strtoll 轻松地将字符串编号分配给一个大整数（例如 unsigned long long），并且该函数还会告诉您该数字是否太大而无法容纳。

# c# - 使用 LINQ to JSON 将 JSON 反序列化为字典

> ID：15192226
> 
> 赞同：9
> 
> 时间：2013-03-03T23:30:14.123
> 
> 标签：c#, linq, json.net

我有一些这样的 JSON（从字典中序列化）：

```
{
  "Context":
  {
    "Test": "Test"
  }
} 
```

并想使用 JSON.NET 的 JSON to LINQ 将其反序列化为字典。

我尝试了一些不同的东西：

```
var obj = JObject.Parse(json);
obj.Value<Dictionary<string, string>>("Context"); 
```

但这会引发如下异常：

> System.InvalidCastException
> 无法将 Newtonsoft.Json.Linq.JObject 转换为 Newtonsoft.Json.Linq.JToken

我也试过：

```
var obj = JObject.Parse(json);
var context = obj.Values("Context"); 
```

但是后来我不知道如何将元素处理成字典。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-04T01:38:21.617

这应该适合你：

```
string json = "{\"Context\":{\"Test\": \"Test\"}}";
var obj = JObject.Parse(json);
var dict = obj["Context"].ToObject<Dictionary<string,string>>(); 
```

# python - 通过递归调用寻找路径：最佳字符串对齐

> ID：15192231
> 
> 赞同：2
> 
> 时间：2013-03-03T23:30:57.630
> 
> 标签：python, recursion, dynamic-programming, sequence-alignment

所以我以前试过问这个，但我想我对我要找的东西还不够清楚。我正在制作一个最佳的字符串对齐算法，[它实际上只是一个动态编程问题](http://www.biorecipes.com/DynProgBasic/code.html)。所以我决定递归地写它。该计划由两部分组成：

*   找到两个单词之间的“编辑距离”，您可以根据一些相关成本最小化对齐。例如，对齐同一个字母的成本为 0，对齐两个元音的成本为 0.5，但对齐一个字母与间隙的成本为 1。
*   可视化对齐方式：即将字符串彼此叠放，字符和间隙的最佳对齐方式。

我认为我的编辑距离有效。我得到了与同龄人相同的价值观，而且似乎没有直接的问题。但是，我很难弄清楚如何恢复匹配、插入和删除的序列以可视化对齐。我的问题来自这样一个事实，即我有一个递归函数，它至少需要三个递归调用。所以，我最终得到了一个比必要的更长的序列，因为每个递归调用都附加了一个“移动”（匹配、插入、删除），它可能不会被使用，因为它不是成本最低的一个。

这是我的代码：

```
newseq = []
@memoize
def opt(a, b):
    global newseq # Visual Alignment 'move' sequence
    gap = 1 # Gap cost
    if not a: 
        return len(b)
    if not b: 
        return len(a)

    if a and b:
        p1 = a[0] in v   # First letters vowells?
        p2 = b[0] in v   
        if a[0] == b[0]: # First letters equal each other?
            alpha = 0
        elif p1 ^ p2:    # Vowel and Consonant?
            alpha = 1.2
        elif p1 and p2:  # Vowel and Vowel?
            alpha = 0.5
        else:            # Consonant and Consonant?
            alpha = 0.6

    r1 = opt(a[1:], b[1:]) + alpha
    r2 = opt(a[1:], b) + gap
    r3 = opt(a, b[1:]) + gap
    # Reset newseq
    newseq = newseq[:-3]

    # Takes min of recursive calls, and gives associated 'move'
    res = min((r1, 'Match'),      # Match
              (r2, 'Insertion'),  # Insertion
              (r3, 'Deletion'),   # Deletion
              key = lambda x: x[0])

    newseq.append(res[1])
    return res[0] 
```

所以，是的，我知道我所拥有的东西不起作用。我的全局`newseq`变量当前的长度为 1，因为我尝试通过删除递归调用期间发生的所有附加来重置它。**如何设置一种方法来记录构成与此递归算法的最佳对齐的“移动”序列？**

**编辑：**这是我的 memoize 装饰器功能：

```
def memoize(f):
    cache = {}
    def decorated_function(*args):
        if args in cache:
            return cache[args]
        else:
            cache[args] = f(*args)
            return cache[args]
    return decorated_function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:42:47.797

1）通过您的递归函数将堆栈（或其他集合）作为参数传递。

2）当您递归调用自己时，还将您正在采取的步骤推入堆栈（例如，使用步骤类型和整数/字符/字符串/指示它正在做什么的枚举）。

3) 当您从 2) 中的调用返回时，弹出堆栈并重复 2)。

4）当您有解决方案时，您可以存储与其结果/分数相关联的堆栈。

# javascript - 无法使用 JSON 发送 Jquery Ajax 帖子以工作

> ID：15192233
> 
> 赞同：1
> 
> 时间：2013-03-03T23:31:12.370
> 
> 标签：javascript, jquery, ajax, cordova, jquery-mobile

我需要将一些数据从我的 Phonegap 应用程序同步回服务器。我在服务器上有一个 PHP 脚本来接收数据，我需要能够从我的应用程序中向它发布一些值。

我将我的数据存储在 SQLite 数据库中，我想将其输出并 AJAX 将其输出到服务器。

我似乎没有将任何数据发送到 PHP 脚本，并且 onSuccess 函数只是返回它正在发送的数据的副本，而不是来自服务器的响应。如果我控制台记录 currentRow 对象，它会按预期返回每行的数据字符串。

有人可以指出我正确的方向吗？

这是数据库查询和 AJAX 调用...

```
var query = "SELECT * FROM fixturesfittings WHERE propertyid = ?;"
localDatabase.transaction(function (trxn) {
    trxn.executeSql(query, [propertyid], function (transaction, thedata) {
        var i = 0,currentRow;
        for (i; i < thedata.rows.length; i++) {
        currentRow = thedata.rows.item(i);

        $.ajax({
            type: "POST",
            url: "http://myserver.com/putData.php",
            cache: false,
            dataType: "text",
            data: currentRow,
            success: function(mydata) {
               $("#resultLog").append(mydata);
            },
            error: function() {
               $("#resultLog").html("Error");
            }

        });
    }

    },errorHandler);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:46:13.613

我认为问题实际上出在 php.ini 中。我将其全部剥离，一次发送一行并重新调整 JSON 字符串而不是文本，现在一切都很好

# c# - 在实体框架中管理复杂类型？

> ID：15192234
> 
> 赞同：1
> 
> 时间：2013-03-03T23:31:20.123
> 
> 标签：c#, .net, entity-framework

我有以下实体模型。当我尝试保存包含新帐户的新用户对象时，它会引发 DBUpdateException：保存不为其关系公开外键属性的实体时发生错误。

是否可以在不向我的模型中添加外键的情况下为这两个对象提供映射。我讨厌在我的模型中使用外键的想法。如果没有其他解决方案，我将如何使用外键解决此问题？

```
public class User
{
   public virtual int Id { get; set; }
   public virtual Account Account { get; set; }
}

public class Account
{
   public virtual int Id { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:26:47.913

这些类中的任何一个真的是“复杂类型”还是它们都是具有自己对应表的实体？

如果它们是实体，您确实可以将 EF 配置为在类本身中不需要外键属性。在您的 DbContext 类中，覆盖`OnModelCreating`并添加一些配置代码，如下所示：

```
modelBuilder.Entity<User>().HasRequired(u => u.Account).WithRequiredPrincipal(); 
```

如果我做对了，那将在用户和帐户之间配置“必需：必需”关系，而不需要任何一个类的任何外键属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:58:29.247

您必须`Id`从类中删除该属性，`Account`否则实体框架会将类`Account`视为实体而不是复杂类型。

# php - 来自输入和未设置的数组

> ID：15192240
> 
> 赞同：0
> 
> 时间：2013-03-03T23:32:04.143
> 
> 标签：php, arrays

您好，我遇到了问题，我无法取消会话设置，任何人都可以发现错误吗？这个想法是通过这个过程，直到数组 4 取消设置会话，然后返回数组 3，并且在数组 4 中删除的会话应该消失了....但它没有消失，我希望这是有道理的，谢谢所有的帮助。

HTML

```
 <form action="array2.php" method="post"> 
    <select name="tickets">
    Select amount of tickets you require.
        <option value=""></option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
    </select>
    Select the acomidation you require.
    <select name="accom">
        <option value=""></option>
        <option value="camping">Camping</option>
        <option value="caravan">Caravan</option>
    </select>
    <input name="submit" type="submit" value="submit">
</form> 
```

数组2

```
<?php
session_start();
if(isset($_POST['submit'])){
    if($_POST['tickets'] == "" || $_POST['accom'] == ""){
        header("Location: error.html");
        exit; 
    }else{
        $tickets = $_POST['tickets'];
        $accom = $_POST['accom'];
        $_SESSION['tickets'] = $tickets;
        $_SESSION['accom'] = $accom;
        header('Location: array3.php');
    }
} 
```

?>

数组3

```
<?php
session_start();
$tickets = $_SESSION['tickets'];
$accom = $_SESSION['accom'];
?>

    <form method="post" action="array4.php">
    <input type="submit" value="remove" />
</form>
<?php
    for($i=0; $i < count($tickets); $i++){
        echo "You have selected to recive " . $tickets[$i] . " tickets<br/>";
    }
    for($i=0; $i < count($accom); $i++){
        echo "And you have selected to recive " . $accom[$i] . " for accommodation are you sure? <br/>";
    }
?> 
```

数组4

```
<?php
session_start();
if(isset($_POST['remove'])){
    unset($_SESSION['accom']);
}
$tickets = $_SESSION['tickets'];
?>

<form method="post" action="array3.php">
    <input type="submit" value="go back?" />
</form>
<?php
    for($i=0; $i < count($tickets); $i++){
        echo "You have selected to recive " . $tickets[$i] . " tickets<br/>";
    }
    for($i=0; $i < count($accom); $i++){
        echo "And you have selected to recive " . $accom[$i] . " for accommodation are you sure? <br/>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:36:36.120

改变这个

```
value="remove" 
```

在（或只是添加这个）

```
name="remove" 
```

并且不要使用 for，对于获取数组，使用简单的 foreach

```
foreach($tickets as $ticket){
    echo "You have selected to recive $ticket tickets<br/>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:36:42.350

而不是这个：

```
if(isset($_POST['remove'])){
    unset($_SESSION['accom']);
} 
```

你需要这个：

```
if(isset($_POST['submit']) && $_POST['submit'] == 'remove'){
    unset($_SESSION['accom']);
} 
```

`$_POST`variables 将表单变量的名称而不是值作为键。

# node.js - Jade 无法链接到 javascript 文件 + node.js

> ID：15192247
> 
> 赞同：0
> 
> 时间：2013-03-03T23:33:09.380
> 
> 标签：node.js, pug

我正在运行一个呈现玉文件的网络服务器。在玉文件中，我有一些 javascript 文件。页面呈现正常，但未找到 javascript 文件。

**节点服务器**

```
var http = require('http')
  , url = require('url')
  , fs = require('fs')
  , jade = require('jade')
  , server;

server = http.createServer(function(req, res) {
  var path = url.parse(req.url).pathname;

  switch (path) {

    case '/audio':
        var options = {pretty: true};
        jade.renderFile('myJadeFile.jade', options, function(err, html) {
          if (err) return send404(res);
          res.writeHead(200, {"Content-Type": "text/html"});
          res.write(html, 'utf8');
          res.end();
        });
        break;

    default: send404(res);
  }
});

function send404(res) {
  res.writeHead(404);
  res.write('404');
  res.end();
}

server.listen(3000, function() {
  console.log("listening on port:3000");
}); 
```

**玉文件**

```
!!! 5
html(lang="en")
  head
    meta(charset="UTF-8")
    title Please Work
    script(src="myJSFile.js")
  body
    #container
      h1 It worked! 
```

我收到此错误：
`GET http://localhost:3000/myJSFile.js 404 (Not Found)`

它没有找到文件，我不确定我必须在服务器端的翡翠选项上放什么才能找到 javascript 文件。所有文件都在同一个文件夹中。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:42:23.993

Jade 是一个 HTML 渲染工具，所以它是渲染一个标准的`<script>`标签。它不会将 JS 编译成 HTML 文件本身。您将需要在您的文件中提供处理程序`case`来处理任何依赖文件，以便浏览器可以获取它们。

这是此特定情况的示例，假设您的 myJSFile.js 与服务器文件位于同一目录中。

```
case '/myJSFile.js':
  fs.createReadStream(__dirname + path).pipe(res);
  break; 
```

# asp.net - 无法接收消息错误的上下文连接ID

> ID：15192249
> 
> 赞同：0
> 
> 时间：2013-03-03T23:33:56.650
> 
> 标签：asp.net, signalr

所以我使用的是 SignalR 0.5 版，一切正常。但尝试升级到版本 1 以使用 connectionSlow 方法。不幸的是，当我升级时它似乎已经坏了。我有一个 mvc 应用程序，我正在尝试使用 signalr 将数据推送到客户端。我希望连接永远打开。

服务器不会向客户端发送消息。在使用 LoggingPiplineModule 进行一些调查后，我发现 context.Connection.Identifier 不是所连接浏览器的 connextionID，它好像在尝试将其发送给其他人。

我的 Hub 只有几个方法：

```
public void JoinGroup(string groupID)
    {
        if (!String.IsNullOrEmpty(Context.User.Identity.Name) && (!String.IsNullOrEmpty(groupID)))
        {
            Groups.Add(Context.ConnectionId, groupID.Trim());
        }
        else
        {
            LoggerSingleton.Instance.Logger.Error("Error: Could not join group as user is not logged in or group is null");
        }
    }

    public void LeaveGroup(string groupID)
    {
        if (!String.IsNullOrEmpty(Context.User.Identity.Name) && (!String.IsNullOrEmpty(groupID)))
        {
            Groups.Remove(Context.ConnectionId, groupID.Trim());
        }
        else
        {
            LoggerSingleton.Instance.Logger.Error("Error: Could not leave group as user is not logged in or group is null");
        }
    }
    public static void SendCallLog(CallLog newCall, int groupID)
    {
        var context = GlobalHost.ConnectionManager.GetHubContext<CommandCentreHub>();
        context.Clients.Group(groupID.ToString()).addMessage(CallLog.ToJson(newCall), groupID.ToString());
    } 
```

还有我的 javascript：

```
conChat = $.connection.commandcentrehub;

// Push method for signalR, process the pushed message passed from the server
conChat.addMessage = function (message, groupID) {
    var call = JSON.parse(message);
    updateTableImages($('#groupContent' + groupID), call, groupID);
    updateTableImages($('#groupContent' + 'All'), call, 'All');

    applyFilter();
};

$.connection.hub.start().done(function () {
    $('.groupID').each(function () {
    conChat.server.joinGroup(this.id.replace("group", ""));
});
}); 
```

还有我的 global.asax

```
protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);

        RouteTable.Routes.MapHubs();
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

        GlobalHost.HubPipeline.AddModule(new LoggingPipelineModule());

        log4net.Config.XmlConfigurator.Configure();
    } 
```

我在 chrome dev 中没有收到任何错误，并且 joingroup 工作正常，但是当服务器调用 addMessage 时，我什么也没得到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:52:47.223

好的，我解决了这个问题。这是我的javascript。

下面：

```
conChat.addMessage = function (message, groupID) { ... 
```

应该：

```
conChat.client.addMessage = function (message, groupID) { 
```

希望这可以帮助某人...

# ruby-on-rails - Rails 和 activesupport-3.2.12 的 Ruby 版本的困难

> ID：15192251
> 
> 赞同：0
> 
> 时间：2013-03-03T23:34:07.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, ruby-on-rails-3.2, ubuntu-12.04

我有一个构建在我的测试环境上的 rails 应用程序。

```
ruby -v  => 1.9.3p194    
rails -v => 3.2.12    
gem -v   => 1.8.23 
```

在我希望部署到的服务器上，输出如下：

```
ruby -v  => 1.9.3p0
rails -v => 3.2.12
gem -v   => 1.8.15 
```

我已经开始全新安装服务器，但我无法让服务器版本的 ruby​​ 和 gem 匹配。

此外，当我在服务器上运行 rails s 时（只是为了测试），这是失败的输出：

```
rails s
=> Booting WEBrick
=> Rails 3.2.12 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/var/lib/gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load': /var/www/New/confed ':', expecting kEND (SyntaxError)
  match '/about',   to: 'static_pages#about'
                       ^
/var/www/New/config/routes.rb:6: syntax error, unexpected ':', expecting kEND
  match '/cv',          to: 'static_pages#cv'
                           ^
        from /var/lib/gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
        from /var/lib/gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in `load_dependency'
        from /var/lib/gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:245:in `load'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:40:in `load_paths'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:40:in `each'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:40:in `load_paths'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:16:in `reload!'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:26:in `updater'
        from /var/lib/gems/1.8/gems/activesupport-3.2.12/lib/active_support/file_update_checker.rb:78:in `call'
        from /var/lib/gems/1.8/gems/activesupport-3.2.12/lib/active_support/file_update_checker.rb:78:in `execute'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:27:in `updater'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/application/finisher.rb:66
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `instance_exec'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `run'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/initializable.rb:55:in `run_initializers'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `each'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `run_initializers'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/application.rb:136:in `initialize!'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `send'
        from /var/lib/gems/1.8/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from /var/www/New/config/environment.rb:5
        from /var/www/New/config.ru:3:in `require'
        from /var/www/New/config.ru:3
        from /var/lib/gems/1.8/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
        from /var/lib/gems/1.8/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
        from /var/www/New/config.ru:0:in `new'
        from /var/www/New/config.ru:0 
```

我查看了我的测试系统，但我没有`/var/lib/gems/1.8`我只有`/var/lib/gems/1.9.1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:57:42.733

从您的堆栈跟踪来看，实际上您运行的是 Ruby 1.8，它不支持简化的哈希语法`symbol: value`，而 1.8 只有`:symbol => value`.

您可以使用[rvm](https://rvm.io/)或[rbenv](https://github.com/sstephenson/rbenv/)来管理多个 ruby​​ 版本。`rbenv`在使用 Rails 时，imo 是两者中的佼佼者。

* * *

回答瑞恩关于我为什么认为`rbenv > rvm`是基于个人感受的问题。我发现它`rbenv`易于使用、易于理解和概念化它是如何工作的，而且我还没有遇到让我失望的场景。此外，源代码可读性很强，这使我的一次配置尝试变得容易。

# get - AngularJS - 如何发送多维 $http.get() 数据

> ID：15192255
> 
> 赞同：2
> 
> 时间：2013-03-03T23:35:12.613
> 
> 标签：get, angularjs, urlencode

所以我有一个看起来像这样的 JSON 数组：

```
var myData = {
    foo : {
        biz : 'baz',
        fig : 'tree'
    }
} 
```

这可以输入到地址栏中，如：

```
http://www.mysite.com/index?foo[biz]=baz&foo[fig]=tree 
```

这将按预期工作。

问题是，当我将此`myData`对象提供给 AngularJS 的`$http`服务时，例如：

```
$http.get('http://www.mysite.com', {
    data : myData
}); 
```

它转义了查询字符串，即使它没有以奇怪的方式转义，它也似乎不是正确的格式。它看起来像：

```
url?foo=%7B%22biz%22%3A%22baz%22%2C%22fig%22%3A%22tree%22%7D 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:47:08.403

这实际上是正确的格式。假设您的后端是 PHP，当您这样做时，`$_GET['foo']`您将获得`%7B%22biz%22%3A%22baz%22%2C%22fig%22%3A%22tree%22%7D`. 您看到的奇怪字符是因为 Angular 正在为您对字符串进行 url 编码。这必须在传输数据之前完成。如果您像`foo[biz]=baz&foo[fig]=tree`在浏览器中一样输入它，浏览器通常会自动对其进行 urlencode。

之后`urldecoding`，`json_decoding`您将获得您期望的数据。

```
$foo = json_decode(urldecode($input), true);

Array
(
    [biz] => baz
    [fig] => tree
) 
```

`$foo['biz']`然后，您可以访问这些`$foo['fig']`

[**演示**](http://codepad.org/42V4eR91)

# php - 安全的 JavaScript 站点特定 API

> ID：15192256
> 
> 赞同：0
> 
> 时间：2013-03-03T23:35:28.370
> 
> 标签：php, javascript, api

我一直在考虑如何做到这一点，但我不确定最好的方法是什么。

我想做的是允许用户注册他们的网站，然后给他们一个带有密钥、代码和存储在我服务器上的文件的链接的 javascript 片段。

**例子**

```
<script>
    var prefix_key  = 1234567890;
    var prefix_code = "hfj48fj4587tgfj5trutjh47dl4gx04jd9f";
</script>
<script src="http://mysite.com/js/somefile.js"></script> 
```

现在，可能发生的情况是说我在我的网站上有那个，然后你来把它复制到你的网站上。我怎样才能确保它不能在您的网站上运行，但仍然可以在我的网站上运行？

**注意：**如果需要后端，我将使用 PHP 作为后端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:40:15.763

根据用户特定的固定 API 代码从 ajax 请求中获取`key`和。`code`

例如：

给你每个用户一个固定的API代码来查询返回的页面`key`和`code`

```
http://mysite.com/some_page_to_get_the_key_and_code.php?apikey=243h325h2353 
```

# android - 在我的应用程序开始变得太慢之前，我可以拥有多少个数据库条目？

> ID：15192258
> 
> 赞同：0
> 
> 时间：2013-03-03T23:35:40.597
> 
> 标签：android, database, search, dictionary

我有一个关于移动应用程序数据库的问题：我想开发一个应用程序，它将成为法语-库尔德语词典。我的想法是用法语单词和他的库尔德语翻译填充我的数据库（一个简单的想法不是吗？）。但它是一个移动应用程序，我对数据库没有任何经验，所以我的问题是：数据库的限制是什么？当我说限制时，我说的是数据库的大小，因为应用程序的目标是快速。

对于我的申请，我至少有 1000 个条目：这是太多了，还是合理的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:38:10.440

就 SQLite 可以处理的内容而言，1000 个条目非常好。

这是关于 SQLite 限制的[讨论。](http://www.sqlite.org/limits.html)

> 表中的理论最大行数为 2^64（18446744073709551616 或大约 1.8e+19）。由于将首先达到 140 TB 的最大数据库大小，因此无法达到此限制。一个 140 TB 的数据库最多可以容纳大约 1e+13 行，并且只有在没有索引并且每行包含非常少的数据的情况下。

就您的数据库的大小和速度而言，我认为您也无需担心 1k 条目。如果您的查询速度成为问题，那么值得研究优化，但我认为您不需要给出问题陈述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:48:54.807

对于前面的答案，我相信 OP 不是在问他可以存储多少个数据库条目的理论限制，而是在搜索特定单词之前他可以存储多少个数据库条目变得很慢，因为纯粹要搜索的数据库条目数，作为响应，阅读 sqlite 数据库的搜索技术：[搜索 sqlite 数据库](https://stackoverflow.com/questions/1175978/best-way-to-search-sqlite-databasehttp://answers.oreilly.com/topic/1955-how-to-use-full-text-search-in-sqlite/)和 sqlite 数据库缓存和优化的最佳方法：[http ://web.utk.edu/~jplyon/sqlite/ SQLite_optimization_FAQ.html](http://web.utk.edu/~jplyon/sqlite/SQLite_optimization_FAQ.html)

# ruby - Sinatra 应用程序作为一个类 - 为什么要这样做？

> ID：15192265
> 
> 赞同：1
> 
> 时间：2013-03-03T23:36:36.637
> 
> 标签：ruby, oop, sinatra

在阅读 Sinatra 文档时，我的印象是所有的路由和助手都放在一个文件中。然而，在阅读了 Stack 上的许多 Sinatra 问题和答案后，我发现大多数人都将他们的路线和助手放在一个类中。这对集合 a 块有什么好处？

编辑：我知道将路由器和助手放在他们自己的模块中是有帮助的，但为什么我应该为应用程序设置一个类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:45:42.457

组织和减少命名空间污染。当我的所有处理程序都在模块`Handlers`中时，很清楚它们都是什么，我可以将它们作为一个组进行操作（迭代、重新定义等）。此外，它通过将事物放在自己的命名空间中来减少全局命名空间污染。

# java - 显示来自 InputStream 的图像

> ID：15192282
> 
> 赞同：2
> 
> 时间：2013-03-03T23:38:25.930
> 
> 标签：java, android, sockets, android-imageview

我可以将字符串从我的 Android 手机发送到我的计算机，反之亦然。但是，我想从计算机发送图像并将其显示到手机上。在我的例子中，电脑是服务器，手机是客户端。

这是我在服务器端的代码的一部分：

```
socket = serverSocket.accept();
dataOutputStream = new DataOutputStream(socket.getOutputStream());
captureScreen("C:\\Users\\HP\\Desktop\\capture.png");

File f = new File("C:\\Users\\HP\\Desktop\\capture.png");
byte [] buffer = new byte[(int)f.length()];
dataOutputStream.write(buffer,0,buffer.length);
dataOutputStream.flush(); 
```

请注意，这`captureScreen()`是一种成功截取服务器截图并将其保存为上述路径中的 .PNG 图像的方法。

现在，在Android手机的客户端，如果我有一个`ImageView`控件，如何读取从计算机发送的图像`InputStream`并显示在`ImageView`？

此外，我是否成功地将图像写入`dataOutputStream`？如果有人帮助我，我会很高兴！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:45:38.747

你可以调用`setImageBitmap(Bitmap bm)`你的 ImageView。

[http://developer.android.com/reference/android/widget/ImageView.html](http://developer.android.com/reference/android/widget/ImageView.html)

如何将图像数据提供给客户端：这取决于您选择的解决方案，但从技术上讲，您可以使用与纯 Java 相同的库。

您可以使用`android.graphics.BitmapFactory``Bitmap`从您的流中创建。

[http://developer.android.com/reference/android/graphics/BitmapFactory.html](http://developer.android.com/reference/android/graphics/BitmapFactory.html)

```
Bitmap bitmap1 = BitmapFactory.decodeStream(inputStream);
Bitmap bitmap2 = BitmapFactory.decodeFile(filename); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:49:42.937

这是什么 ？

```
 byte [] buffer = new byte[(int)f.length()];
    dataOutputStream.write(buffer,0,buffer.length); 
```

您刚刚声明了缓冲区字节数组的大小，但它是空的！您应该将文件转换为字节，然后将其传输到 OutputStream ，就像这样：

```
 byte[] buffer = System.IO.File.ReadAllBytes("C:\\Users\\HP\\Desktop\\capture.png"); 
```

（c#的代码）然后你会像你一样发送它：

```
 dataOutputStream.write(buffer,0,buffer.length);
     dataOutputStream.flush(); 
```

试试这个文件接收：

```
 public void fileReceived(InputStream is)
throws FileNotFoundException, IOException {
Log.i("IMSERVICE", "FILERECCC-1");

if (is!= null) {
    FileOutputStream fos = null;
    BufferedOutputStream bos = null;
    try {
        fos = new FileOutputStream("/sdcard/chats/gas1.jpg/");
        bos = new BufferedOutputStream(fos);
        byte[] aByte = new byte[1024];
        int bytesRead;

        while ((bytesRead = is.read(aByte)) != -1) {
            bos.write(aByte, 0, bytesRead);
        }
        bos.flush();
        bos.close();
        Log.i("IMSERVICE", "FILERECCC-2");

    } catch (IOException ex) {
        // Do exception handling
    }
}
}
} 
```

因此，您将在 Android 上的 sd 卡中获得新文件。

# vim - 在 Vim 中，如何切换 'i'、'j'、'k' 和 'h' 的功能

> ID：15192284
> 
> 赞同：1
> 
> 时间：2013-03-03T23:38:44.070
> 
> 标签：vim

我在学习 Vim 进行开发方面已经 5 周左右了，虽然事情开始深入人心，但我有一个令人沮丧的个人问题仍然困扰着我。

我一直在使用“i”来“向上”移动。'k' 是向下的，'j' 和 'l' 分别是左和右。

我知道这一切都来自于玩了太多年的 PC 游戏，而这些都是方向运动。老实说，我不想再与之抗争了，我宁愿做对我来说非常自然的事情。我怎样才能重新映射这些，所以上面是方向运动并且“h”是插入的？

2 个问题：如何将这些永久存储在本地设置中以在我自己的机器上进行开发，以及当我在其他人的机器上工作时如何快速切换它们。我的意思是，是否有一组命令我可以调用，然后在我关闭 Vim 时将它们删除？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T00:12:43.480

**不要做那个映射！比使用方向键还要糟糕**

首先，我建议你学习 vim 移动光标的方法。

回到你的问题，重新映射`h,j,k,l`很容易。然而，做这些映射是没有意义的（你不应该这样做），它不会让你工作得更快，当你使用你的 vim 时它只会让你发疯。你知道，用 vim 编辑并不意味着

*   在正常模式下，只需移动光标
*   进入 INSERT 模式，进行实际的文本编辑
*   返回正常模式以保存文件

在`NORMAL`mode 下你可以做很多 vim 魔法（这就是它被称为 的原因`NORMAL`）。使用您的映射，当您想要应用这些映射时，您真的会很头疼。让我们举个例子。假设您已经根据需要设置了映射。`i,j,k and h`. 我们有一行：

```
function foo (String arg) 
```

当您的光标位于 和 之间时`(`，`)`您可以键入`ci(`以更改括号中的内容。不过你的`i`手段`k`。会发生什么？当前行和它上面的行将被删除！！好吧，您可以说，您会记得键入`chw, dhw,ch(,dhw...`所以您还必须在脑海中重新映射这些键。:)

此外，当您想“借用”别人的`.vimrc`，或使用一些插件时，您也会遇到问题。

您可以通过上面的简单示例看到这一点。因此，在重新映射这些基本键之前，请三思而后行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T23:48:50.007

把它放在一个名为的文件中`~/.vimrc`：

```
noremap i k
noremap k j
noremap j h
noremap h i 
```

如果您在其他人的计算机上使用 vim，您可以在提示符下键入相同的四个命令（在每个命令`:`之前键入，在每个命令之后输入），这些设置将仅适用于 1 个会话。

此外，`no`是 的缩写`noremap`，因此您可以将整个序列缩短为

```
:no i k<enter>:no k j<enter>:no j h<enter>:no h i<enter> 
```

当你使用别人的电脑时。

# javascript - jQuery toggle() 防止加载图像

> ID：15192289
> 
> 赞同：0
> 
> 时间：2013-03-03T23:39:18.753
> 
> 标签：javascript, jquery, html

我是 jQuery 新手，发现切换功能真的很有吸引力。我希望图像在单击并再次返回后切换到不同的图像，如下所示：

```
$(document).ready(function() {
    $("#expand").toggle(function(){
        $(this).attr("src","images/expandWidget.png");
    },function(){
        $(this).attr("src", "images/minimizeWidget.png");
    });
}); // end ready 
```

图像本身是这样声明的：

```
<img id="expand" src="images/minimizeWidget.png"></img></div> 
```

我注意到当我通过 Chrome 运行它时，图像变为：

```
<img id="expand" src="images/minimizeWidget.png" style="display: none;"> 
```

我的图像没有显示。为什么 Chrome 会这样做？如果我改为将切换更改为 click()，我的图像显示没有问题，我可以切换到不同的图像，但当然不能返回。我在控制台中没有错误，并且页面没有导入会影响 img 的其他样式。我是否错误地使用了切换开关？如果您需要更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:45:31.897

您误解了 jQuery toggle 的作用。

它“切换”元素的可见性，因此它消失了。诚然，这不是最伟大的名字，但我们过去都必须在内部编写自己的切换方法版本`.click()`。

请参阅文档：

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

你可能想要这样的东西：

```
$("#expand").click(function(){
    if($(this).attr("src") == "images/expandWidget.png") {
        $(this).attr("src", "images/minimizeWidget.png");
    } else {
        $(this).attr("src","images/expandWidget.png");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:51:07.127

而不是`toggle`使用`.click()`

`**[LIVE DEMO](http://jsbin.com/avehiw/2/edit)**`

```
var images = ["images/expandWidget.png", "images/minimizeWidget.png"], c=0;
$("#expand").click(function(){
    this.src = images[++c%2];
}); 
```

# objective-c - 将布尔值重新分配给 NSArray

> ID：15192299
> 
> 赞同：1
> 
> 时间：2013-03-03T23:40:17.397
> 
> 标签：objective-c, nsarray

我有一个带有布尔值的 NSArray： NSArray* boolResults = [super foo:values]; 如何更改单元格 0 中的值？

我尝试了以下方法： boolResults[0] = @NO; 这会导致错误：在“NSArray *”类型的对象上找不到写入数组元素的预期方法

还有这个： BOOL* b = &[[array objectAtIndex:i] boolValue]; 收到以下错误：地址表达式必须是左值或函数指示符

我不希望将此 NSArray 转换为 NSMutableArray 以设置此值，有正常的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T23:43:15.427

如果数组不可变，则不能更改该值。解决方法有两个：

1.  使数组可变；
2.  让数组包含可变对象。

由于您不想使用可变数组，因此我将为您提供第二种解决方案的示例。由于标准框架中没有可变数字，我将其包装到 NSMutableData 中。该示例假设您有一个包含单个对象的数组，其值为@YES，并且您希望将其更改为@NO：

```
NSNumber* number= @YES;
NSMutableData* data=[[NSMutableData alloc]initWithData: [NSKeyedArchiver archivedDataWithRootObject: number]];
NSArray* array= @[data];   // Now you have an array with a single value
// You want to change the first value to @NO:  
number= @NO;
[array[0] setData: [NSKeyedArchiver archivedDataWithRootObject: number]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:44:35.923

No.`NSArray`是不可变的。您可以使用修改后的`NSArray`.

```
NSArray *anArray = [super foo:values]
NSMutableArray *mutableCopy = [anArray mutableCopy];
// change your mutable copy and then reassign
anArray = [mutableCopy copy]; 
```

就像`NSArray`, `NSNumber`s 也是不可变的，所以类似的东西`[anArray[0] setBoolValue:NO]`不存在。

# asp.net-mvc-4 - 如何将用户首选项传递给我的 MVC4 中的每个视图，而无需手动将其添加到我的数百个视图模型中

> ID：15192300
> 
> 赞同：1
> 
> 时间：2013-03-03T23:40:27.953
> 
> 标签：asp.net-mvc-4

我为用户存储了首选项（日期格式、语言、货币符号等）。现在，在我看来，我需要使用这些首选项来显示日期或使用正确的符号显示货币。

问题是，由于我有数百个视图模型（实际上是模型和视图模型的混合），为了在我的视图中拥有此首选项对象，我需要在每个 VM 中添加一个属性并将该属性加载到控制器中。这会起作用，但有点臭。

我想让我的所有视图模型都继承自`BaseViewModel`可以设置首选项属性的位置。这将帮助我定义一次属性，但是一旦虚拟机被实例化，我仍然需要在每个控制器的操作中加载它。

**那么，我应该怎么做才能避免这种情况并访问我所有视图中的首选项？**

这可能是在动作过滤器中很好地使用并将对象`ViewData`“注入”到其中吗？`Preferences`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:48:44.563

好吧，我最终以这种方式创建了一个动作过滤器：

```
public class IncludePreferencesAttribute : ActionFilterAttribute
{       
   public override void OnActionExecuting(ActionExecutingContext filterContext)
   {
        var controller = filterContext.Controller as MyBaseController;

        if (controller != null)
        {
           controller.ViewBag.MyPref = controller.GetUserPreferences();
        }
    }
} 
```

在 Controller 操作中，我需要使用我用`[IncludePreferences]`.

然后，在我看来：

```
@{
   var pref = ViewBag.MyPref as MyPreferences;
} 
```

这样，我不需要更改我的 ViewModel，并且只在需要首选项的那些操作上加载它。

# javascript - 正则表达式和嵌套方括号来分隔子集

> ID：15192303
> 
> 赞同：1
> 
> 时间：2013-03-03T23:40:47.060
> 
> 标签：javascript, regex, json, square-bracket

我正在尝试构建一个快速的 JavaScript 函数，它将接收这样的 JavaScript 对象：

```
{
    "sample[one]": "value 1",
    "sample[hard][damn_you[0]]": "this 1",
    "sample[hard][damn_you[1]]": "this 2"
} 
```

并将其转换为如下内容：

```
{
    "[sample][one]": "value 1",
    "[sample][hard][damn_you][0]": "this 1",
    "[sample][hard][damn_you][1]": "this 2"
} 
```

微妙但很大的区别。我已经制定了第一部分，其中包括将文本的第一部分包装在方括号中，但是当谈到取出嵌套的方括号并将它们取出时，我不知所措。我已经尝试了很长一段时间没有成功。这是我到目前为止所拥有的：

```
var data = {
        "sample[one]": "value 1",
        "sample[hard][damn_you[0]]": "this 1",
        "sample[hard][damn_you[1]]": "this 2"
    },
    subset = /^([a-z0-9-_]+?)\[/i;

for (var key in data) {
    if (subset.test(key)) {
        data[key.replace(subset,'[$1][')] = data[key];
    } else {
        data[key.replace(/^(.+)$/,'[$1]')] = data[key];
    }
    delete data[key];
} 
```

哪个输出：

```
{
    "[sample][one]": "value 1",
    "[sample][hard][damn_you[0]]": "this 1",
    "[sample][hard][damn_you[1]]": "this 2"
} 
```

但是在提取那些嵌套的方括号时我不知所措。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:47:26.090

本质上，您正在寻找不是方括号的每个连续字符集。括号的顺序无关紧要。所以你可以很容易地做这样的事情：

```
key = "["
    +key.replace(/]/g,'[') // replace close brackets with open ones
                           // (to make them the same symbol)
    .replace(/\[+$/,'')    // trim off brackets at the end of the string
    .replace(/\[+/g,"][")  // replace brackets with "][" (separating the words)
    +"]"; 
```

例如`sample[hard][damn_you[0]]`，通过以下步骤：

*   `sample[hard][damn_you[0]]`
*   `sample[hard[[damn_you[0[[`
*   `sample[hard[[damn_you[0`
*   `[sample][hard][damn_you][0]`

# linux - 为什么套接字连接被阻止和 TCP 内核不断重传 [ACK] 数据包

> ID：15192309
> 
> 赞同：4
> 
> 时间：2013-03-03T23:41:50.243
> 
> 标签：linux, sockets, networking, tcp, nat

我们面临一个问题，从一段时间后，特定的套接字连接被阻塞，客户端的 tcp 内核不断重传 [ACK] 数据包。

拓扑流程如下：

```
 Client A ←→ Switch A ← Router A:NAT ← .. Internet .. 
               → Router B:NAT → Switch B ←→ Server B 
```

以下是 WireShark 捕获的数据包：
A) 服务器

```
1\. 8013 > 6757 [PSH, ACK] Seq=56 Ack=132 Win=5840 Len=55     
2\. 6757 > 8013 [ACK] Seq=132 Ack=111 Win=65425 Len=0 
```

B) 客户

```
//lines 3 and 4 are exactly the same as line 1 and 2      
3\. 8013 > 13000 [PSH, ACK] Seq=56 Ack=132 Win=5840 Len=55      
4\. 13000 > 8013 [ACK] Seq=132 Ack=111 Win=65425 Len=0     
5\. 13000 > 8013 [PSH, ACK] Seq=132 Ack=111 Win=65425 Len=17     

[TCP Retransmission]          
6\. 13000 > 8013 [PSH, ACK] Seq=132 Ack=111 Win=65425 Len=17 
```

8013 是服务器端口，6757 是客户端 NAT 端口。

为什么 TCP 内核继续发送 [ACK] 数据包告诉客户端它收到了数据包 1（参见数据包 4、5 和 6），即使服务器已经收到了一个 [ACK] 数据包（参见数据包 2）？发生问题时，连接的任何一方都不会关闭套接字。

在数据包 6 之后，连接丢失，我们无法再通过该套接字向服务器发送任何内容。

```
 psuedocode:  
         //client
         serverAddr.port =htons(8013) ;
         serverAddr.ip = inet_addr(publicIPB);
         connect(fdA, serverAddr,...);         

         //server
         listenfd = socket(,SO_STREAM,);
         localAddr.port = htons(8013);
         localAddr.ip = inet_addr(INADDR_ANY);
         bind(localAddr...)
         listen(listenfd, 100);

         ...
         //using select model
         select(fdSet, NULL, NULL, NULL);
         for(...)
         {
         if (FD_ISSET(listenfd))
            {
            ...
              }
         ...
         } 
```

**更新**
UP1。以下是重现问题的具体步骤

1.  给定三台计算机，分别是 PC1、PC2 和 PC3。这三个都在RouterA之后，而Server在RouterB之后。

2.  给定两个用户，即 U1 和 U2。U1 从 PC1 登录，U2 从 PC3 登录。U1 和 U2 都会在自己和服务器之间建立一个 tcp 连接。现在 U1 能够通过其 tcp 连接向 Server 发送数据，然后 Server 将所有数据中继到 U2。直到这一刻一切正常。

    表示U1和Server之间TCP连接的Server端点对应的socket号：U1-OldSocketFd

3.  不要注销U1，拔掉PC1的线。然后 U1 从 PC2 登录，现在它与服务器建立了新的 TCP 连接。

    表示U1和Server之间的TCP连接的Server端点对应的socket号：U1-NewSocketFd

    在服务器端，当它使用 U1 更新其 Session 时，它会调用`close(U1-OldSocketFd)`.

4.1。在第 3 步之后大约 30 秒，我们发现 U1 无法通过其新的 TCP 连接向服务器发送任何数据。

4.2\. 在步骤 3 中，如果 Server 没有`close(U1-OldSocketFd)` 立即调用（U1 和 Server 之间建立了相同的第二个新连接），而是 Server `close(U1-OldSocketFd)`在超过 70-80 秒后调用，则一切正常。

UP2。路由器 B 在端口 8013 上使用端口转发
。UP3。运行服务器的 Linux 操作系统的一些参数。

```
 net.ipv4.tcp_tw_reuse = 1
    net.ipv4.tcp_tw_recycle = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:06:29.897

在数据包 1（与 3 相同）和 2（与 4 相同）过去后，您的客户端似乎正在向服务器传输 17 个字节的数据（数据包 5）。我不知道在第一次交换数据包之后多久数据包 5 出现，所以我不知道这种情况发生了多少时间。您的伪代码没有澄清它，因为它只显示了套接字初始化，它没有显示哪一方尝试在什么时间传输什么数据。在这种情况下，[梯形图](http://en.wikipedia.org/wiki/Message_Sequence_Chart)可能有助于表示您的协议交换。

在任何情况下，服务器显然都没有确认这 17 个字节的数据，因此它们被再次传输（数据包 6）。

除非您的网络或防火墙或 NAT 路由器或其他丢弃数据包的东西有问题，否则服务器应该没有任何理由能够接收 TCP 交换的早期部分但显然无法接收数据包 5 或 6 . 再次，在之前的数据交换和数据包 5 之间是否有大量的时间过去（例如，足够的时间让 NAT 路由器、防火墙或负载平衡器使连接失效）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T16:01:02.350

根据您重现问题和 UPD3 的步骤，这可能是由于

> net.ipv4.tcp_tw_recycle = 1

原因是内核试图在到期时间之前回收 TIME_WAIT 连接（感谢 tw_recycle）。

[此答案](https://stackoverflow.com/questions/8893888/dropping-of-connections-with-tcp-tw-recycle)解释了 tw_reuse 和 tw_recycle 的行为方式（此处对 NAT 部分感兴趣）。

根据重现的步骤和观察4-1和4-2，当你立即调用fclose()时，连接进入TIME_WAIT状态，从那里tw_recycle可以承担并假设由于这边已经关闭了连接，socket可以回收。由于从服务器的角度来看，连接来自同一主机，因此 tw_recycle 启动。

当您在调用 fclose() 之前等待时，由于没有从服务器的 POV 触发断开连接，它将假定连接仍然存在，这会阻止 tw_recycle 启动，可能/可能会强制创建全新的连接。

根据[1](https://stackoverflow.com/questions/8893888/dropping-of-connections-with-tcp-tw-recycle)，为了免受协议 POV 的影响，您有两种情况：

*   禁用 tw_reuse 和 tw_recycle
*   启用 tw_reuse，启用 TCP 时间戳，禁用 tw_recycle

鉴于您的网络拓扑，tw_recycle 可能总是会触发无连接条件。

# xcode - 保存后解析云代码不起作用

> ID：15192311
> 
> 赞同：1
> 
> 时间：2013-03-03T23:42:06.130
> 
> 标签：xcode, push-notification, parse-platform

嘿，我使用 Parse 作为后端，我喜欢它，但 afterSave 钩子有问题。

这是我正在使用的代码：

```
Parse.Cloud.afterSave ("JGZwoelf",function (request) {

                       Parse.Push.send({
                                       //Selecting the Channel
                                       channels: [ request.object.get('JGZwoelfPush') ],

                                            data: {
                                            //Selecting the Key inside the Class
                                            alert: request.object.get('AusfallInfo')

                                            }
                                       }, {
                                            success: function () {
                                            //Push was send successfully
                                            },

                                            error: function (error) {
                                            //Handle error
                                            throw "Got an error" + error.code + " : " + error.message;
                                            }

                                       });
                       }); 
```

每次日志控制台告诉我：结果：

> 未捕获 出现错误 112：缺少频道名称。

我只是不明白出了什么问题！它必须在那个 JavaScript 代码中。如果我手动输入推送通知一切正常：/

编辑： Parse.Push.send 部分应如下所示：

```
Parse.Push.send ({
        //Selecting the already existing Push Channel
        channels: ["JGAchtPush"], //This has to be the name of your push channel!!
        data: {
            //Selecting the Key inside the Class
            alert: request.object.get ("AusfallInfo")
        }
    }, {
        success: function () {
            //Push was sent successfully
            //nothing was loged
        },
        error: function (error) {
            throw "Got and error" + error.code + " : " + error.message;
        }
    }); 
```

频道名称需要类似于 ["exampleChannel"]。

提前感谢任何给定的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:07:03.147

afterSave 的第一个参数应该是类名，而不是 objectId。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T05:27:29.103

以下是针对新人（比如我）的，它与原始问题中的代码完全相同，再加上一些评论，以及对已接受答案的更正。目的是展示需要更改几段代码才能在您的解析云代码中工作的示例。谢谢康斯坦丁雅各布和 bklimt。

```
Parse.Cloud.afterSave ("UserVideoMessage",function (request) { // name of my parse class is "UserVideoMessage"

    Parse.Push.send ({
        //Selecting the already existing Push Channel
        channels: ["admin"], //This has to be the name of your push channel!!
        data: {
            //Selecting the Key inside the Class, this will be the content of the push notification
            alert: request.object.get ("from")
        }
    }, {
        success: function () {
            //Push was sent successfully
            //nothing was loged
        },
        error: function (error) {
            throw "Got and error" + error.code + " : " + error.message;
        }
    });

}); 
```

# javascript - 三.js：用 JSONLoader 加载模型只加载一半的纹理

> ID：15192316
> 
> 赞同：1
> 
> 时间：2013-03-03T23:42:49.493
> 
> 标签：javascript, three.js

在搅拌机中制作房屋模型后，我将其作为单个对象导出为 three.js json 格式，但是当将其添加到场景中时，我显示了一半纹理，另一半只是灰色网格。

JSON URL（带有绝对纹理图像链接）：[http](http://pobegushki.meetroll.net/inn1.js) ://pobegushki.meetroll.net/inn1.js 我在搅拌机中得到的和在生产中得到的截图：![http://touhou.ru/upload/78c7239c8306d7ee6d6ad6304935b3e1.jpg](../Images/201127b0cf2265c71eef8cba84569214.png)

还有两个桶模型实例，它们都具有完美映射的材质。我尝试将桶图像设置为地板的材料（简单缩放的盒子网格），但没有任何改变，它仍然是灰色的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:17:15.590

我认为文件 loaders/Loader.js (Rev56) 中有一个错误。在第 332 行，尝试替换：

```
if ( m.mapDiffuse && texturePath ) { 
```

经过

```
if ( m.mapDiffuse && texturePath != null ) { 
```

（当然，所有类型的纹理都有相同的错误）

这个周末我偶然发现了这个错误，我的纹理没有显示，因为`texturePath = ""`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:27:42.867

塔塔塔塔姆！我已经解决了这个问题（~~愚蠢的方式 tbh~~，但我得到了完全纹理化的模型）。

看：[http ://touhou.ru/upload/56e75518ab580497358741bec62491ff.png](http://touhou.ru/upload/56e75518ab580497358741bec62491ff.png)

~~Blender three.js 导出为我得到的所有未纹理网格创建空纹理，我尝试将非空材料复制粘贴到空。经过数千次页面刷新后，我将正确的材料分配给了正确的网格。~~

~~花了很多时间，我想我应该提交一个错误报告:(~~

**更新：**这就是为什么这些材料在出口时是空的：

![http://touhou.ru/upload/9f9d879cbf4964f8343e610d6930fe1a.jpg](../Images/8abd8f85a46fae13a6a19e666b090430.png)

在第一张图片中，我选择了一个在生产中具有纹理的网格，而在第二张图片中，我选择了一个没有纹理的网格。

感谢您的关注！

# android - 使用没有填充的图像完全填充 GridView

> ID：15192321
> 
> 赞同：2
> 
> 时间：2013-03-03T23:43:30.510
> 
> 标签：android, android-layout, android-gridview, populate

我试图填充我的整个`GridView`，照片之间没有任何空格，没有填充......

我快到了，但是有一个小错误，因为我可以向上滚动并且没有照片...就像我向上滚动并且有一个完整的WHITE页面...无法理解。

这是我`onCreate()`在活动课上的方法：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this, gridview));

    gridview.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View v, int position,
                long id) {
            Toast.makeText(MainActivity.this, "" + position, Toast.LENGTH_SHORT).show();
        }
    });
} 
```

这是我的`ImageAdapter`类，`getView()`方法和一些重要属性：

```
private Context mContext;
private GridView grid;

public ImageAdapter(Context c, GridView gridview) {
    mContext = c;
    this.grid = gridview;
}

// references to our images
private Integer[] mThumbIds = {
    R.drawable.sample_2, R.drawable.sample_3,
    R.drawable.sample_4, R.drawable.sample_5,
    R.drawable.sample_6, R.drawable.sample_7,
    R.drawable.sample_0, R.drawable.sample_1,
    R.drawable.sample_2, R.drawable.sample_3,
    R.drawable.sample_4, R.drawable.sample_5,
    R.drawable.sample_6, R.drawable.sample_7,
    R.drawable.sample_0, R.drawable.sample_1,
    R.drawable.sample_2, R.drawable.sample_3,
    R.drawable.sample_4, R.drawable.sample_5,
    R.drawable.sample_6, R.drawable.sample_7
};

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(
                grid.getWidth()/2,  grid.getHeight()/11));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(0, 0, 0, 0);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);
    return imageView;
} 
```

这是布局，不太重要...

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="110dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="0dp"
    android:horizontalSpacing="0dp"
    android:stretchMode="columnWidth"
    android:gravity="center" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T15:58:01.033

问题可能出在这一行：

```
imageView.setLayoutParams (new GridView.LayoutParams (grid.getWidth () / 2, grid.getHeight () / 11)); 
```

尝试用这一行替换：

```
imageView.setLayoutParams(new GridView.LayoutParams (50, 50)); 
```

这对你有帮助吗？

# angularjs - 通过 angularjs 从 WebApi 设置 cookie

> ID：15192324
> 
> 赞同：1
> 
> 时间：2013-03-03T23:44:00.650
> 
> 标签：angularjs, asp.net-web-api

我正在调用 WebApi 服务，该服务在响应对象中设置 cookie。调用是通过 $resource 从 angularjs 进行的所以这是服务器代码：

```
CookieHeaderValue cookie = new CookieHeaderValue("Token", "blah") { HttpOnly = true, Expires = DateTime.Now.AddYears(10), Path="/"  };
response.Headers.AddCookies(new CookieHeaderValue[] { cookie }); 
```

这有效，我可以在响应中看到 Set-Cookie 标头，但是没有设置 cookie。

我的一个朋友在使用 jQuery 时必须将 xhrFields' withCredentials 设置为 true，所以我想知道是否还需要在 angular 中配置一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:29:31.000

可能会发生很多事情。

首先，由于您在不同的域上，您可能需要实现[COR（跨源资源共享）](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)，但似乎请求已成功发出。我不确定为什么会这样，我认为浏览器会阻止它。无论如何，这里有一个[jsfiddle，它说明了使用 COR 和 angularjs 来发出 $http 和 $resource](http://jsfiddle.net/ricardohbin/E3YEt/)请求。诀窍似乎是配置 $http 服务：

```
 $http.defaults.useXDomain = true; 
```

另一个想法是来自一个域的 cookie 不能被另一个域访问。Here is another [question on cookies with angularjs](https://stackoverflow.com/questions/10961963/how-to-access-cookies-in-angularjs)，但请求和服务器似乎在同一个域上。这是关于[cookie 域](https://stackoverflow.com/questions/1062963/how-do-browser-cookie-domains-work)以及如何应用它们的讨论。

如果可能的话，我会尝试让 cookie 请求/响应在同一个域上工作，然后将客户端移动到另一个域。

# php - 为什么 mysql_num_rows 为空表上的 SELECT 返回 1？

> ID：15192325
> 
> 赞同：2
> 
> 时间：2013-03-03T23:44:14.487
> 
> 标签：php, mysql

编码：

```
 $review = mysql_query("SELECT conceptID, MIN(nextReview) FROM userconcepts WHERE userID='$userID'");
 $nrows = mysql_num_rows($review);
 echo "$nrows<br />\n"; 
```

当表具有此类条目并返回正确的列值时，查询将起作用。但是，当表为空时，正如我现在可以在 HeidiSQL 中确认的那样，mysql_num_rows 仍返回 1，但列值为空。（如果表具有不同用户 ID 的其他值，问题仍然存在）。

我希望此查询在正常操作期间有时会返回空集，并且我想根据结果的存在采取行动，但如果结果存在，我也想使用它。知道为什么这段代码不能像我预期的那样工作（如果表为空，我希望它返回 0）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T23:46:52.713

首先，查询有一个非常简单的问题：您正在显示该`conceptID`字段，但没有按它进行分组。如果你想在 a 上显示一个`SELECT`使用聚合函数的字段，你应该显示它；不这样做是错误的，并且会使许多引擎不执行您的查询。

除此之外，只要您有一个聚合函数，并且您不按任何内容进行分组（即不添加`GROUP BY`子句），结果就是**一行**。无论表中的行数如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:58:29.383

原因是当 SQL 引擎执行一个只有聚合函数的查询时，它会返回一行。所以：

```
select count(*)
from table
where 1 = 2 
```

将返回值为 0 的 1 行。这是所有 SQL 引擎的工作方式。

您的查询有点不同：

```
select conceptID, MIN(nextReview)
FROM userconcepts
WHERE userID='$userID'" 
```

在大多数 SQL 方言中，您会收到来自“conceptID not in group by 子句”或类似内容的错误。也就是说，查询将有语法错误。

MySQL 支持这一点。它将返回`nextReview`（来自满足条件的行）的最小值以及（来自那些相同的行）`where`的任意值。`conceptID`在这种情况下，没有行，因此值将设置为`NULL`。

也许，您希望每`conceptId`. 该查询将是：

```
select conceptID, MIN(nextReview)
FROM userconcepts
WHERE userID='$userID'
group by conceptId 
```

# css - CSS - 不知道多余的水平滚动来自哪里？

> ID：15192326
> 
> 赞同：-1
> 
> 时间：2013-03-03T23:44:23.207
> 
> 标签：css, html, scale

我一直在尝试修改使用媒体查询的响应式网站。

当网站缩放到移动尺寸时，无论您制作什么尺寸的屏幕，都需要水平滚动。

我已尝试更改我认为可能导致此问题的所有内容，但无法深究。

这是网站的链接和媒体查询 css 文件

[http://stopcry.in](http://stopcry.in) [http://stopcry.in/styles/media-queries.css](http://stopcry.in/styles/media-queries.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T23:58:13.837

您正在为 #sidebar 和 #container 添加宽度：100% 的填充，因此总宽度将始终高于 100%；尝试对填充也使用百分比值，以便总宽度为 100%；像这样的东西：

```
#sidebar{width:90%; padding:25px 5% 10px}
#container{width:90%; padding:5%;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:02:10.717

填充添加在 % 宽度/高度之上。因此，当您有 100% 的宽度和填充时，它会超过 100%。

一个快速的解决办法是`box-sizing: border-box`改变盒子模型，但你可能想走另一条路。

[http://caniuse.com/css3-boxsizing](http://caniuse.com/css3-boxsizing)

*编辑：似乎我迟到了...*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T00:02:28.567

将此添加到您的CSS

```
*{
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;

} 
```

或者

```
.Your_Container{
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
} 
```

# c++ - BOOST_MESSAGE 未定义

> ID：15192332
> 
> 赞同：3
> 
> 时间：2013-03-03T23:45:16.187
> 
> 标签：c++, boost, quantlib

我通过从 svn 结帐然后在 Windows 上安装了 boost_1_54

```
bootstrap
.\b2 
```

依赖于 boost 的 QuantLib 库除了一个项目之外都编译得很好：使用 BOOST_MESSAGE 的测试套件。这是未定义的。我可以看到我的 boost 版本中没有 BOOST_MESSAGE。因此，这是 QuantLib 不兼容还是我错过了什么？在我的 linux boost 版本上，同样的事情适用于 BOOST_MESSAGE - 它是未定义的

我已经看到[了这一点](http://www.boost.org/doc/libs/1_34_0/libs/test/doc/components/test_tools/reference/deprecated.html)，但我不确定如何解释这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T09:33:36.333

恐怕你给我们的功劳多于我们应得的:)

我们还没有针对 Boost svn 编译 QuantLib。我尝试过的最新版本是 Boost 1.53（最新发布的版本），其中 BOOST_MESSAGE 仍然可用。

不过，感谢您的提醒。我将修补库，以便为下一个版本做好准备。正如评论中提到的，它应该像添加一样简单

```
#if BOOST_VERSION > 105300
#define BOOST_MESSAGE(msg) BOOST_TEST_MESSAGE(msg)
#endif 
```

到测试套件/utilities.hpp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:58:14.777

在linux上我必须添加

> libboost_unit_test_framework.so

到 Linker->Libraries 和

```
#include <boost/test/unit_test.hpp>

#define BOOST_MESSAGE( M )                  BOOST_TEST_MESSAGE( M ) 
```

已经存在于 test/test_tools.hpp 中。在 Windows 上我有不同的#defines 并且这不存在，所以我将它添加到

> unit_test_log.hpp

其中 BOOST_TEST_MESSAGE 被定义（在 boost 文件中，以避免在其他应用程序使用 BOOST_MESSAGE 的情况下再次出现同样的问题）。BOOST_MESSAGE 问题已解决，但仍无法消除歧义

```
const void* = boost::test_tools::check_is_close 
```

和

```
const void* = boost::test_tools::check_is_small 
```

因为这些是模板。所以解决方案是删除它（测试套件编译得很好）或使用适当的指向函数模板的指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:23:44.267

在 Windows 上，在移动或功能之后

> _use_check

在实用程序.hpp

更改为默认没有指向 TEMPLATE 函数的指针，因此更改为：

```
void _use_check(
                        const void*,
                        const void*) const {} 
```

构建测试套件项目时仍然存在错误。未解决的外部：fdmhestonfwdop、fdmblackscholesfwdop、fdmsquarerootfwdop。显然这个类（头文件+源代码）我必须添加到 Quantlib 项目中，再次构建库 QuantLib-vc110-mt-gd.lib 然后重建测试套件项目。在对 VS 链接器错误“lnk1210 超出内部 ilk 大小限制链接且增量无”感到满意后（它真的很喜欢 RAM，但在 Windows 上我的资源非常有限），没关系。编译。：p

# android - 你如何检查新活动中哪个按钮开始？

> ID：15192333
> 
> 赞同：1
> 
> 时间：2013-03-03T23:45:19.023
> 
> 标签：android, android-intent

我有两个按钮调用相同的地图活动。但是在新活动中要执行的操作会根据单击的按钮而有所不同。在我的`MyMapsActivity`中，如何检查哪个意图触发了新活动？我对 Android 编程比较陌生，所以我不确定这样做是否正确。

```
case (R.id.location_button1):
    Intent intent1 = new Intent(getApplicationContext(),
            MyMapsActivity.class);
    startActivity(intent1);
    break;

case (R.id.location_button1):
    Intent intent2 = new Intent(getApplicationContext(),
            MyMapsActivity.class);
    intent2.putExtra("address", address);
    startActivity(intent2);
    break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:57:33.190

由于您的意图已经有了“额外”，您可以使用它来区分它们。

在您`MyMapsActivity`只需使用`getIntent`() 获取意图，然后检查“地址”是否存在。

文档`Intent`解释了如何获取和设置附加功能等：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

# java - Android Maps V2 应用程序在手机上崩溃

> ID：15192334
> 
> 赞同：0
> 
> 时间：2013-03-03T23:45:24.393
> 
> 标签：java, android, api, maps

我已经在我的手机（三星 Galaxy S3，4.1.2）上使用了我的应用程序，正如人们在谈到 android map v2 应用程序时建议我的那样，但我仍然遇到同样的错误，它说我的应用程序不幸停止了。

**MainActivity.java**

```
package com.example.name;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        SupportMapFragment fragment = new SupportMapFragment();
        getSupportFragmentManager().beginTransaction()
                .add(android.R.id.content, fragment).commit();
    }
} 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.name"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission
        android:name="com.example.name.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.name.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        android:debuggable="true" >
        <activity
            android:name="com.example.name.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="**api_key**" />
    </application>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

</manifest> 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
      android:layout_width="wrap_content"
      android:layout_height="match_parent"
      class="com.google.android.gms.maps.SupportMapFragment"/> 
```

**日志猫**

```
03-04 00:26:51.274: E/dalvikvm(14369): Could not find class 'com.google.android.maps.MapView', referenced from method com.cornboyzmaps.googlemapsA.MainActivity.onCreate

03-04 00:26:51.279: W/dalvikvm(14369): VFY: unable to resolve check-cast 465 (Lcom/google/android/maps/MapView;) in Lcom/cornboyzmaps/googlemapsA/MainActivity;

03-04 00:26:51.279: D/dalvikvm(14369): VFY: replacing opcode 0x1f at 0x0014

03-04 00:26:51.279: D/dalvikvm(14369): DexOpt: unable to opt direct call 0x0cdf at 0x34 in Lcom/cornboyzmaps/googlemapsA/MainActivity;.onCreate

03-04 00:26:51.344: D/AndroidRuntime(14369): Shutting down VM

03-04 00:26:51.344: W/dalvikvm(14369): threadid=1: thread exiting with uncaught exception (group=0x413832a0)

03-04 00:26:51.354: E/AndroidRuntime(14369): FATAL EXCEPTION: main

03-04 00:26:51.354: E/AndroidRuntime(14369): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cornboyzmaps.googlemapsA/com.cornboyzmaps.googlemapsA.MainActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class fragment

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.ActivityThread.access$600(ActivityThread.java:140)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.os.Handler.dispatchMessage(Handler.java:99)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.os.Looper.loop(Looper.java:137)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.ActivityThread.main(ActivityThread.java:4898)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at java.lang.reflect.Method.invokeNative(Native Method)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at java.lang.reflect.Method.invoke(Method.java:511)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at dalvik.system.NativeStart.main(Native Method)

03-04 00:26:51.354: E/AndroidRuntime(14369): Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class fragment

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:308)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.Activity.setContentView(Activity.java:1924)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at com.cornboyzmaps.googlemapsA.MainActivity.onCreate(MainActivity.java:21)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.Activity.performCreate(Activity.java:5206)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)

03-04 00:26:51.354: E/AndroidRuntime(14369):    ... 11 more

03-04 00:26:51.354: E/AndroidRuntime(14369): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: make sure class name exists, is public, and has an empty constructor that is public

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.Fragment.instantiate(Fragment.java:584)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.Fragment.instantiate(Fragment.java:552)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.Activity.onCreateView(Activity.java:4849)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)

03-04 00:26:51.354: E/AndroidRuntime(14369):    ... 21 more

03-04 00:26:51.354: E/AndroidRuntime(14369): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.SupportMapFragment

03-04 00:26:51.354: E/AndroidRuntime(14369):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)

03-04 00:26:51.354: E/AndroidRuntime(14369):    at android.app.Fragment.instantiate(Fragment.java:574)

03-04 00:26:51.354: E/AndroidRuntime(14369):    ... 24 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T15:03:25.003

当我将**Google_Play_Services_lib**导入到 Eclipse 时出现此错误，而没有选中**Copy Project to Workspace**选项。参见图片 ![在此处输入图像描述](../Images/679b46e6150bbb787dd8a3921081cfdd.png)

另请查看我的[blogPost](http://mzubair.com/solving-the-problemserrors-of-google-maps-api-v2/)我已尝试解释问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T15:11:19.907

如果您使用的是在 Google I/O 之后推出的 SDK 工具 v17，请在此处检查这些工具是否有帮助：

[http://xrigau.wordpress.com/2012/03/22/fix-some-problems-with-libraries-in-the-adt-17-plugin-10/](http://xrigau.wordpress.com/2012/03/22/fix-some-problems-with-libraries-in-the-adt-17-plugin-10/)

[http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T00:19:48.153

不知何故，您的项目中缺少 Maps V2 库的代码。您需要正确附加到代表 Play Services SDK 的 Android 库项目。请参阅[Play 服务文档](http://developer.android.com/google/play-services/setup.html)，特别是以“设置项目以使用 Google Play 服务 SDK”开头的部分。

# php - 如何防止php超时，运行循环？不操纵 max_execution_time？

> ID：15192335
> 
> 赞同：2
> 
> 时间：2013-03-03T23:45:25.017
> 
> 标签：php, javascript, ajax, jquery

我有一个文件夹，其中包含需要由 php 脚本处理的文档。假设文件夹中有 1000 个文档，每个文档在处理后都会被删除。

如何从浏览器运行或重新运行 php 脚本而无需访问服务器 max_execution_time 而无需操作 max_execution_time 本身并且不使用 cronjobs？

我想到了一些解决方案：

- 有 2 个 php 脚本运行相同的 while 循环并在 25 秒后自行停止并激活另一个脚本来接管工作。并以此来回前进，直到文件夹为空。

- 使用 ajax/javascript 停止执行脚本并重新激活它。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T23:51:23.937

我成功地使用了 ajax/javascript。您可以保留 $_SESSION 中处理的项目数。我运行的批处理可以运行一个多小时没有问题。

# asp.net - 使用 Open Flash 图表的条件折线图

> ID：15192336
> 
> 赞同：3
> 
> 时间：2013-03-03T23:45:27.963
> 
> 标签：asp.net, flash, charts, open-flash-chart

我正在使用 Open Flash Charts v2。我一直在尝试制作条件折线图。但我找不到任何直接的方式、示例或任何生成条件图表的类。

*条件图示例* ![条件图示例](../Images/25f43ec4ebc5522159a284af428c2b32.png)

所以我想使用一些技术来模拟条件图，我为超出限制范围的值制作了单独的 Line 对象，然后这条线用于与绘制的线重叠。

这种技术有些作用，但也有问题，

1.  如何为有条件的彩色线着色或放置在限制之上。
2.  从限制线上移除工具提示和点。
3.  条件线（红色）和绘制线（绿色）的工具提示都显示了，我只需要绿线的工具提示。

*条件线图问题说明* ![闪图](../Images/41b268c2b224c6c69f8878c9cf08a50d.png)

*源代码：* // C#

```
 var chart = new OpenFlashChart.OpenFlashChart();
    var data1 = new List<double?> { 1, 3, 4, 5, 2, 1, 6, 7 };//>4=
    var overlap = new List<double?> { null, null, 4, 5, null, null, null, null };
    var overlap2 = new List<double?> { null, null, null, null, null, null, 6, 7 };
    var limitData = new List<double?> { 4, 4, 4, 4, 4, 4, 4, 4 };

    var line1 = new Line();
    line1.Values = data1;
    //line1.HaloSize = 0;
    line1.Width = 2;
    line1.DotSize = 5;
    line1.DotStyleType.Tip = "#x_label#<br>#val#";
    line1.Colour = "#37c855";
    line1.Tooltip = "#val#";

    var overLine = new Line();
    overLine.Values = overlap;
    //overLine.HaloSize = 0;
    overLine.Width = 2;
    overLine.DotSize = 5;
    overLine.DotStyleType.Tip = "#x_label#<br>#val#";
    overLine.Colour = "#d81417";
    overLine.Tooltip = "#val#";

    var overLine2 = new Line();
    overLine2.Values = overlap2;
    //overLine2.HaloSize = 0;
    overLine2.Width = 2;
    overLine2.DotSize = 5;
    //overLine2.DotStyleType.Tip = "#x_label#<br>#val#";
    //overLine2.DotStyleType.Type = DotType.DOT;
    overLine2.Colour = "#d81417";
    overLine2.Tooltip = "#val#";

    var limit = new Line();
    limit.Values = limitData;
    limit.Width = 2;
    limit.Colour = "#ff0000";
    limit.HaloSize = -1;
    limit.DotSize = -1;
    // limit.DotStyleType.Tip = "";
    limit.DotStyleType.Type = null;
    //limit.Tooltip = "";

    chart.AddElement(line1);
    chart.AddElement(overLine);
    chart.AddElement(overLine2);
    chart.AddElement(limit);

    chart.Y_Legend = new Legend("Experiment");
    chart.Title = new Title("Conditional Line Graph");
    chart.Y_Axis.SetRange(0, 10);
    chart.X_Axis.Labels.Color = "#e43456";
    chart.X_Axis.Steps = 4;
    chart.Tooltip = new ToolTip("#val#");
    chart.Tooltip.Shadow = true;
    chart.Tooltip.Colour = "#e43456";
    chart.Tooltip.MouseStyle = ToolTipStyle.CLOSEST;
    Response.Clear();
    Response.CacheControl = "no-cache";
    Response.Write(chart.ToPrettyString());
    Response.End(); 
```

**笔记：**

我已经下载了 OFC（Open Flash Charts）源，如果我修改 OFC`Line.as`源，我将如何***为更改后的图表生成 json？***,b/c 我目前正在使用 .Net 库为 OFC 图表生成 json，请务必让我知道这一点。

**更新：**

`David Mears`我根据我正在使用 FlashDevelop for ActionScript的建议修改了源代码。

**PS：**如果另一个图书馆可以完成这项工作，我愿意提供想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:42:58.493

如果您不介意进行一点[重建，您可以在](http://teethgrinder.co.uk/open-flash-chart-2/build-ofc.php)[此处](http://sourceforge.net/projects/openflashchart/files/)获取 OFC 的源代码并修改其中的`Line.solid_line()`方法`open-flash-chart/charts/Line.as`以相当轻松地完成此操作。

为了使用 .NET 库通过 JSON 设置额外的图表详细信息，您还必须进行修改`OpenFlashChart/LineBase.cs`以添加替代颜色和边界属性。我对 .NET 不是很熟悉，但根据现有属性，您可能会添加如下内容：

```
private double boundary;
private string altcolour;

[JsonProperty("boundary")]
public virtual double Boundary
{
    set { this.boundary = value; }
    get { return this.boundary; }
}
[JsonProperty("alt-colour")]
public virtual string AltColour
{
    set { this.altcolour = value; }
    get { return this.altcolour; }
} 
```

然后我相信以下内容应该适用`Line.as`：

```
public function solid_line(): void {

    var first:Boolean = true;
    var i:Number;
    var tmp:Sprite;
    var x:Number;
    var y:Number;

    var last_e:Element;
    var ratio:Number;

    for ( i=0; i < this.numChildren; i++ ) {
        // Step through every child object.

        tmp = this.getChildAt(i) as Sprite;

        // Only include data Elements, ignoring extra children such as line masks.
        if( tmp is Element )
        {
            var e:Element = tmp as Element;

            if( first )
            {
                if (this.props.get('alt-colour') != Number.NEGATIVE_INFINITY) {
                    if (e._y >= this.props.get_colour('boundary'))
                    {
                        // Line starts below boundary, set alt line colour.
                        this.graphics.lineStyle( this.props.get_colour('width'), this.props.get_colour('alt-colour') );
                    }
                    else
                    {
                        // Line starts above boundary, set normal line colour.
                        this.graphics.lineStyle( this.props.get_colour('width'), this.props.get_colour('colour') );
                    }
                }

                // Move to the first point.
                this.graphics.moveTo(e.x, e.y);
                x = e.x;
                y = e.y;
                first = false;
            }
            else
            {
                if (this.props.get('alt-colour') != Number.NEGATIVE_INFINITY) {
                    if (last_e._y < this.props.get_colour('boundary') && e._y >= this.props.get_colour('boundary'))
                    {
                        // Line passes below boundary. Draw first section and switch to alt colour.
                        ratio = (this.props.get_colour('boundary') - last_e._y) / (e._y - last_e._y);
                        this.graphics.lineTo(last_e.x + (e.x - last_e.x) * ratio, last_e.y + (e.y - last_e.y) * ratio);
                        this.graphics.lineStyle( this.props.get_colour('width'), this.props.get_colour('alt-colour') );
                    }
                    else if (last_e._y >= this.props.get_colour('boundary') && e._y < this.props.get_colour('boundary'))
                    {
                        // Line passes above boundary. Draw first section and switch to normal colour.
                        ratio = (this.props.get_colour('boundary') - last_e._y) / (e._y - last_e._y);
                        this.graphics.lineTo(last_e.x + (e.x - last_e.x) * ratio, last_e.y + (e.y - last_e.y) * ratio);
                        this.graphics.lineStyle( this.props.get_colour('width'), this.props.get_colour('colour') );
                    }
                }

                // Draw a line to the next point.
                this.graphics.lineTo(e.x, e.y);
            }

            last_e = e;
        }

    }

    if ( this.props.get('loop') ) {
        // close the line loop (radar charts)
        this.graphics.lineTo(x, y);
    }
} 
```

使用新的 open-flash-chart.swf，您应该能够在以下位置设置新属性`line1`：

```
line1.Boundary = 4;
line1.AltColour = "#d81417"; 
```

# facebook - Facebook FQL 中的分页

> ID：15192338
> 
> 赞同：0
> 
> 时间：2013-03-03T23:45:34.533
> 
> 标签：facebook, pagination, facebook-fql

我正在尝试获取用户的所有聊天对话。我得到访问令牌并直接查询 facebook 表（没有图形 api，只是普通的 FQL）。[FQL 指南](https://developers.facebook.com/docs/technical-guides/fql/)

这是我正在使用的查询

> select body,thread_id from message where thread_id in（在thread_id = 0或folderid = 1的线程中选择thread_id）

我没有得到整个结果。我已经尝试过 Offset 和 Limit 但不确定我应该在什么条件下迭代它（我如何找到结尾？？）。

还有如何在 FQL 中使用 since 和 until ？就像是 **`select thread_id from thread where folder_id=0 since =UNIXTIMESTAMP`**（这不起作用！！！）。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:07:37.097

您可以尝试使用[消息表](https://developers.facebook.com/docs/reference/fql/message)`created_time`的字段来按时间限制请求并控制每个请求的限制结果。

`16/8/2011 00:00`对于和`16/8/2011 23:59`（我的生日）之间的所有线程：

```
SELECT body,thread_id FROM message WHERE thread_id IN  
  (SELECT thread_id FROM thread WHERE folder_id=0 OR folder_id=1)  
AND created_time > 1313452800 AND created_time < 1313539140` 
```

如果您控制分页，对您的性能会更好...通过[Graph API Explorer](https://developers.facebook.com/tools/explorer?fql=select%20body%2Cthread_id%20from%20message%20where%20thread_id%20in%20%28select%20thread_id%20from%20thread%20where%20folder_id%3D0%20or%20folder_id%3D1%29%0A%0A)，我能够获得 +-750 个线程，但我不知道适用什么（如果有）限制。我认为可以肯定地说会有一个限制。

# backbone.js - 骨干网.js 用骨干集合翻译 django 服务器模板

> ID：15192339
> 
> 赞同：1
> 
> 时间：2013-03-03T23:45:36.267
> 
> 标签：backbone.js, mustache, tastypie, icanhaz.js

我习惯于使用 http 请求定义我的 django 视图，该请求使用我可以迭代和显示的 python 数据字典发回 http 响应。我正在尝试使用backbone.js 来替换它。

目前我有这样的设置：

```
<ul id="teaching_students">

 {% for student in students.object_list %}
    <li class="selected">
      <span> {{ student.name }} </span>
    </li>
 {% endfor %}
</ul> 
```

我想使用 ICanHaz.js 和 Mustache.js 作为 javascript 模板来填充`{{ student.name}}`客户端。

到目前为止，我使用了美味的派，`PersonResource`当通过以下 url 时，我有一个所有学生都作为 json 对象返回。

```
http://127.0.0.1:8000/api/people/?format=json 
```

1.  我是否需要在views.py 中为这个url 生成一个API 视图，如果需要，那是什么样的？
2.  我如何在backbone.js中调用这个url并设置一个集合、视图和一个正确的路由？

我的客户端结构被分解为`views/models`（我使用 require.js 将它们组合在一起）。

我正在使用几个插件来帮助弥合骨干和美味派（backbone-tastypie.js）之间的差距，但我真的想看看其他人如何用 REST api 和骨干.js 取代传统的 django 模板渲染

编辑：添加主干模型，这是我正在使用的模型

```
define([
    'underscore',
    'backbone'
], function(_, Backbone) {

    var PersonModel = Backbone.Model.extend({

        defaults : {

        },

        initialize: function( options ) {

        },

        parse : function(res) {
            // because of jsonp
            return res.data;
        }

    });

    return PersonModel;

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:27:04.360

所以你想从服务器端渲染转移到客户端渲染？这意味着您会产生额外的 http 请求。但这是可能的。

> 我是否需要在views.py 中为这个url 生成一个API 视图，如果需要，那是什么样的？

一旦你指定了你的`ModelResource`and ，美味的派就可以完成所有的工作`urlpattern`。您无需在应用的 views.py 中添加其他函数来处理 http 请求-响应周期。

1.  查看[美味派教程](http://django-tastypie.readthedocs.org/en/latest/tutorial.html#creating-resources)，了解如何将您的资源挂接到 url。
2.  使用像[Postman chrome 扩展](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en)这样的测试 REST 客户端来查看是否一切正常。

> 我如何在backbone.js中调用这个url并设置一个集合、视图和一个正确的路由？

1.  像对待其他任何 API 一样对待 API。`url`将模型的字段设置为

    `/api/people/?format=json`

2.  让你的视图监听`change`事件`PersonModel`

3.  [获取](http://backbonejs.org/#Model-fetch)模型。

4.  收到数据后，使用您选择的模板引擎渲染视图。

另请参阅[将 REST 添加到 Django](https://stackoverflow.com/questions/308605/adding-rest-to-django)，以了解为 django 应用程序提供 RESTful 接口的选项。

# c# - 按下按钮时防止多个打开的 .XMAL 窗口

> ID：15192342
> 
> 赞同：0
> 
> 时间：2013-03-03T23:45:43.067
> 
> 标签：c#, wpf, expression-blend

伙计们，当按钮按下事件时，如何防止打开已经打开的 WPF 窗口（不使用用户控件并且不添加到 Windows 窗体）？

我有以下代码，但每次按下按钮时，它都会根据按下按钮的数量打开 WPF 窗口。

任何人都知道如何防止该错误谢谢，

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        win2 v2 = new win2();
        v2.Show();

    } 
```

在这里，当我每次点击上面的按钮时，它都会打开一个窗口，但是当它已经打开时；如果我单击同一个按钮，它将打开另一个窗口，而不是专注于已经打开的窗口。

我该如何防止呢？（我正在使用 C# ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:50:03.563

```
win2 v2 = null;

private void button1_Click(object sender, RoutedEventArgs e)
{

   if (v2 == null)
    {
       v2 = new win2();
       v2.Show();
    }
    else
       v2.Activate();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:50:43.543

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        if(!Application.Current.Windows.OfType<win2>().Any())
        {
            win2 v2 = new win2();
            v2.Show();
        }   
    } 
```

Application.Current.Windows 列出了您的程序拥有的所有当前打开的窗口。我们可以检查是否有任何类型的已打开，`win2`如果没有，则创建一个新的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T23:52:28.143

您可以使用它`Application.Current.Windows`来查找应用程序中所有打开的窗口。

如果它包含您的`Window`类型`Activate`，它将使其成为焦点，如果该集合不包含您`Window`创建一个新的

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    if (Application.Current.Windows.OfType<win2>().Any())
    {
        Application.Current.Windows.OfType<win2>().First().Activate();
    }
    else
    {
        new win2().Show();      
    }
} 
```

# javascript - drawImage 并调整大小为 Canvas

> ID：15192343
> 
> 赞同：33
> 
> 时间：2013-03-03T23:45:44.950
> 
> 标签：javascript, html5-canvas

我有一张 1836 x 3264 的图像，我想`drawImage()`画布并将其调整为 739 x 1162。

阅读文档后，我认为这可以通过以下方式完成：

```
ctx.drawImage(image, 0, 0, 739, 1162); 
```

我也试过：

```
ctx.drawImage(image, 0, 0, 1836, 3264, 0, 0, 739, 1162); 
```

两者都只显示完整图像的一小部分，而不是缩小它。

如何通过值从 1836 x 3264 -> 739 x 1162 调整大小？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-04T02:30:02.223

你所拥有的看起来是正确的，所以你可能会在某处仔细检查错字。

[额外的想法：你的图像真的是 1836x3264 而不是 3264x1836。]

这是工作代码和小提琴：http: [//jsfiddle.net/m1erickson/MLGr4/](http://jsfiddle.net/m1erickson/MLGr4/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    img=new Image();
    img.onload=function(){
        canvas.width=400;
        canvas.height=300;
        ctx.drawImage(img,0,0,img.width,img.height,0,0,400,300);
    }
    img.src="http://www.onestopwebmasters.com/wp-content/uploads/2011/06/eitai-bridge.jpg";

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=100 height=100></canvas>
</body>
</html> 
```

# android - Android：如何设置接近警报仅在退出时或仅在进入位置时触发

> ID：15192347
> 
> 赞同：3
> 
> 时间：2013-03-03T23:46:09.930
> 
> 标签：android, alert, locationmanager, proximity

我正在开发一个带有提醒（按时间和按位置）的 ToDo 应用程序，问题是我让用户选择是否希望按位置提醒在他**进入**该位置或**离开**该位置时发出警报。我怎样才能做到这一点？？

我知道**KEY_PROXIMITY_ENTERING**但我不知道如何使用它请帮助...thanx提前

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T06:19:41.817

KEY_PROXIMITY_ENTERING 通常用于判断设备是进入还是退出。

您应该首先注册到 LocationManager

```
LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
Intent intent = new Intent(Constants.ACTION_PROXIMITY_ALERT);
PendingIntent pendingIntent = PendingIntent.getService(this, 0, intent, 0);

locationManager.addProximityAlert(location.getLatitude(),
    location.getLongitude(), location.getRadius(), -1, pendingIntent); 
```

当检测到进入或退出警报区域时，PendingIntent 将用于生成要触发的 Intent。您应该定义一个广播接收器来接收从 LocationManager 发送的广播：

```
public class YourReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {

        final String key = LocationManager.KEY_PROXIMITY_ENTERING;
        final Boolean entering = intent.getBooleanExtra(key, false);

        if (entering) {
            Toast.makeText(context, "entering", Toast.LENGTH_SHORT).show();
        } else {
            Toast.makeText(context, "exiting", Toast.LENGTH_SHORT).show();
        }
    }
} 
```

然后在清单中注册接收器。

```
<receiver android:name="yourpackage.YourReceiver " >
    <intent-filter>
        <action android:name="ACTION_PROXIMITY_ALERT" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T06:04:50.963

你可以在这里找到一个很好的例子： [http ://www.java2s.com/Code/Android/Core-Class/ProximityAlertDemo.htm](http://www.java2s.com/Code/Android/Core-Class/ProximityAlertDemo.htm)

# java - 我需要将正则表达式的所有匹配项包含到文本文件中；我是 Java 编程新手

> ID：15192349
> 
> 赞同：1
> 
> 时间：2013-03-03T23:46:30.507
> 
> 标签：java, regex, file-io

我试图将找到的所有匹配项包含在一个文本文档中，过去 3 个小时我一直在我的桌子上敲打我的头，并认为是时候寻求帮助了。

我目前的问题是，`List<String>`我不确定是因为输入的信息错误还是我的文件打印方法。它不会打印到文件和使用其他打印方式，例如`writer.println(returnvalue)`，即使那样，它仍然只显示一个匹配项，而不是全部，我确实在控制台中显示了匹配项，只是为了确保它们正在显示并且它们是。

Edit2：对不起，这将是我在 stackoverflow 上的第一个问题，我想我的问题是如何将列表数组中的所有数据打印到文本文件中？

Edit3：我最新的问题是打印出所有比赛我目前卡在打印最后一场比赛，有什么建议吗？

```
public static void RegexChecker(String TheRegex, String line){
  String Result= "";
  List<String> returnvalue = new ArrayList<String>();
  Pattern checkRegex = Pattern.compile(TheRegex);
  Matcher regexMatcher = checkRegex.matcher(line);
  int count = 0 ;

  FileWriter writer = null;
  try {
    writer = new FileWriter("output.txt");
  } catch (IOException e1) {
    e1.printStackTrace();
  } 

  while ( regexMatcher.find() ){
    if (regexMatcher.group().length() != 0){
      returnvalue.add(regexMatcher.group());
      System.out.println( regexMatcher.group().trim() );
    }

    for(String str: returnvalue) {
      try {
        out.write(String.valueOf(returnvalue.get(i)));
        writer.write(str);
      } catch (IOException e) {
        e.printStackTrace();
      }
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:36:18.237

摆脱。`for`_ `while`您只想在所有匹配项都添加到列表后才写入文件。该`for-each`块也需要一些修改。

该`for-each`构造为您提供了对集合进行迭代的值。您无需使用索引再次获取这些值。

尝试这个：

```
while (regexMatcher.find()) {
    if (regexMatcher.group().length() != 0) {
        returnvalue.add(regexMatcher.group());
        System.out.println(regexMatcher.group().trim());
    }
}
try {
    for (String str : returnvalue) {
        writer.write(str + "\n");
    }
    writer.flush();
    writer.close();
} catch (IOException e) {
    e.printStackTrace();
} 
```

# android - 日历 - 获取月份和月份的日期

> ID：15192357
> 
> 赞同：0
> 
> 时间：2013-03-03T23:47:04.647
> 
> 标签：android, android-calendar

所以我有一个简单的日历，我正在处理。我有它，所以当天被标记为蓝色。但是，它将采用日期（假设今天是 3 号）并将每个月的 3 号标记为蓝色。我认为问题出在这里；

```
// Current Month Days
for (int i = 1; i <= daysInMonth; i++) {
    Log.d(currentMonthName, String.valueOf(i) + " "
            + getMonthAsString(currentMonth) + " " + yy);
    if (i == getCurrentDayOfMonth()) {
        list.add(String.valueOf(i) + "-BLUE" + "-"
                + getMonthAsString(currentMonth) + "-" + yy);
    } else {
        list.add(String.valueOf(i) + "-WHITE" + "-"
                + getMonthAsString(currentMonth) + "-" + yy);
    }
} 
```

有没有办法让我也可以添加`if (i == getCurrentDayOfMonth() + getMonth())`它来阅读当前月份？还是有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:56:35.337

你有正确的想法，但是像这样：

```
if (i == getCurrentDayOfMonth() && getMonth() == currentMonth) { 
```

# python - 如何找到两个图像之间的相关性

> ID：15192359
> 
> 赞同：6
> 
> 时间：2013-03-03T23:47:22.253
> 
> 标签：python, matplotlib, correlation

我需要一些帮助来弄清楚一些事情。我目前是一个 python 脚本，它使用 matplotlib 中的 imshow 方法生成两个图像。我的任务是找到这两个图像之间的相关性，或者换句话说，两个图像之间的相似性。两个图像的大小相同，并且都使用 jet 颜色图。
让我知道这是否足够清楚，或者我是否需要更详细地解释。如果有人可以提供如何执行此操作的示例代码，那将会很有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T00:43:30.750

你看过 scipy 信号处理套件吗？

```
from scipy import signal
cor = signal.correlate2d (im1, im2) 
```

将为您计算二维相关性。

# python - 如何正确使用 Rules、restrict_xpaths 用 scrapy 抓取和解析 URL？

> ID：15192362
> 
> 赞同：6
> 
> 时间：2013-03-03T23:47:32.003
> 
> 标签：python, xpath, web-crawler, scrapy

我正在尝试编写一个抓取蜘蛛来抓取网站的 RSS 提要，然后解析文章的元标记。

第一个 RSS 页面是显示 RSS 类别的页面。我设法提取了链接，因为标签在标签中。它看起来像这样：

```
 <tr>
           <td class="xmlLink">
             <a href="http://feeds.example.com/subject1">subject1</a>
           </td>   
        </tr>
        <tr>
           <td class="xmlLink">
             <a href="http://feeds.example.com/subject2">subject2</a>
           </td>
        </tr> 
```

单击该链接后，它会为您带来该 RSS 类别的文章，如下所示：

```
 <li class="regularitem">
    <h4 class="itemtitle">
        <a href="http://example.com/article1">article1</a>
    </h4>
  </li>
  <li class="regularitem">
     <h4 class="itemtitle">
        <a href="http://example.com/article2">article2</a>
     </h4>
  </li> 
```

如您所见，如果我使用我希望我的爬虫转到该标签内的链接并为我解析元标签的标签，我可以再次获取与 xpath 的链接。

这是我的爬虫代码：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from tutorial.items import exampleItem

class MetaCrawl(CrawlSpider):
    name = 'metaspider'
    start_urls = ['http://example.com/tools/rss'] # urls from which the spider will start crawling
    rules = [Rule(SgmlLinkExtractor(restrict_xpaths=('//td[@class="xmlLink"]')), follow=True),
        Rule(SgmlLinkExtractor(restrict_xpaths=('//h4[@class="itemtitle"]')), callback='parse_articles')]

    def parse_articles(self, response):
        hxs = HtmlXPathSelector(response)
        meta = hxs.select('//meta')
        items = []
        for m in meta:
           item = exampleItem()
           item['link'] = response.url
           item['meta_name'] =m.select('@name').extract()
           item['meta_value'] = m.select('@content').extract()
           items.append(item)
        return items 
```

然而，这是我运行爬虫时的输出：

```
DEBUG: Crawled (200) <GET http://http://feeds.example.com/subject1> (referer: http://example.com/tools/rss)
DEBUG: Crawled (200) <GET http://http://feeds.example.com/subject2> (referer: http://example.com/tools/rss) 
```

我在这里做错了什么？我一遍又一遍地阅读文档，但我觉得我一直在忽略一些东西。任何帮助，将不胜感激。

**编辑：**添加： items.append(item) 。原来的帖子里忘记了。 **编辑：：**我也试过这个，它产生了相同的输出：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from reuters.items import exampleItem
from scrapy.http import Request

class MetaCrawl(CrawlSpider):
    name = 'metaspider'
    start_urls = ['http://example.com/tools/rss'] # urls from which the spider will start crawling
    rules = [Rule(SgmlLinkExtractor(allow=[r'.*',], restrict_xpaths=('//td[@class="xmlLink"]')), follow=True),
             Rule(SgmlLinkExtractor(allow=[r'.*'], restrict_xpaths=('//h4[@class="itemtitle"]')),follow=True),]

    def parse(self, response):       
        hxs = HtmlXPathSelector(response)
        meta = hxs.select('//td[@class="xmlLink"]/a/@href')
        for m in meta:
            yield Request(m.extract(), callback = self.parse_link)

    def parse_link(self, response):       
        hxs = HtmlXPathSelector(response)
        meta = hxs.select('//h4[@class="itemtitle"]/a/@href')
        for m in meta:
            yield Request(m.extract(), callback = self.parse_again)    

    def parse_again(self, response):
        hxs = HtmlXPathSelector(response)
        meta = hxs.select('//meta')
        items = []
        for m in meta:
            item = exampleItem()
            item['link'] = response.url
            item['meta_name'] = m.select('@name').extract()
            item['meta_value'] = m.select('@content').extract()
            items.append(item)
        return items 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:30:28.697

你返回了一个空的`items`，你需要追加`item`到`items`.
你也可以`yield item`在循环中。

# ios - iOS UITableViewBackground 图片居中

> ID：15192364
> 
> 赞同：0
> 
> 时间：2013-03-03T23:47:41.610
> 
> 标签：ios, uitableview

我有一个设计师为 iPhone 5 屏幕制作的背景图片，我想将其用作我的 TableView 的背景。不过，图像比旧 iPhone 上的图像要大，而且会被压缩，这使它看起来很奇怪。有没有办法让它在电视中居中而不调整它的大小？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:50:01.997

尝试将`contentMode`UITableView 上的设置`backgroundView`为`UIViewContentModeCenter`或`UIViewContentModeScaleAspectFit`。

# flash - 如果孩子从舞台上移除，所有与他相关的事件监听器也将被移除？

> ID：15192367
> 
> 赞同：0
> 
> 时间：2013-03-03T23:48:02.377
> 
> 标签：flash, actionscript

所以我问我是否需要写removeEventListener，或者当我写removeChild - 这个孩子的所有相关动画都将被删除？像这样：

```
displayObject.addEventListener(Event.ENTER_FRAME, onEnterFrame);
displayObject.addEventListener(MouseEvent.click, onClick)

and so on... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:46:52.120

是的，您需要删除事件侦听器。否则对象不会从内存中删除。

您可以通过使用弱引用的侦听器来解决这个问题。
这意味着当对象的所有其他引用都被删除时，事件侦听器不会阻止对象被垃圾回收。

有关更多信息，请参阅本文：http:
[//gskinner.com/blog/archives/2006/07/as3_weakly_refe.html](http://gskinner.com/blog/archives/2006/07/as3_weakly_refe.html)

# ios - C FOpen() 打开文档目录 iOS

> ID：15192368
> 
> 赞同：1
> 
> 时间：2013-03-03T23:48:07.133
> 
> 标签：ios, c, fopen

我需要帮助才能在 iOS 上仅使用 C 来访问文档目录。

我有我的 .c 文件在应用程序包中寻找特定文件。我访问这个文件没有问题。它看起来像这样： fopen(" *filename* ",

不幸的是，如果我想将该文件移动到文档目录，附加“/Documents/ *filename* ”是行不通的。

我知道如何使用文件系统表示轻松地使用objective-c 类访问文件。但我不知道如何只在 C 中做到这一点。任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:13:32.723

Fopen 默认为可执行文件所在的目录，“.app/” - 在 iOS 上。

我可以通过制作当前工作目录的一个字符来访问文档目录，然后删除该字符的最后几个字符以脱离“.app/”包，然后将文档路径附加到它的末尾.

# ruby-on-rails - 无法启动新的 Rails 应用程序

> ID：15192369
> 
> 赞同：0
> 
> 时间：2013-03-03T23:48:09.727
> 
> 标签：ruby-on-rails, ruby

当我尝试启动一个新的 rails 应用程序时，我会收到以下通知：

***“无法在另一个目录中初始化新的 Rails 应用程序，请键入“rails”寻求帮助。”***

我读到我可能必须清空某个目录，因为可能已经创建了另一个 Rails 应用程序。我不确定如何执行此操作并重新开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T23:52:38.613

```
cd ~
cd ProjectsDir # <= Wherever you save your projects
rails new project
cd project
rails generate ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:08:51.527

键入 cd .. 意味着在您所在的目录中向后退...

例如，您在 this_directory 中，它在桌面上...

因此，在 this_directory 中键入 cd .. 意味着您现在回到桌面目录...

至于你所在的当前目录，不用担心...

只需向后退，当在它之外时，您可以根据需要删除该目录，或不理会它。

输入“rails new name_of_app”开始一个新的 Rails 项目...

当然，键入 cd name_of_app 进入新 Rails 项目的目录。

如果您需要进一步说明，请告诉我们...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T23:52:31.857

```
cd ../
rails new i_am_in_new_directory 
```

# php - 无法捕获重复项

> ID：15192371
> 
> 赞同：1
> 
> 时间：2013-03-03T23:48:20.440
> 
> 标签：php, mysql, duplicates, populate

我正在尝试制作一个脚本，1）检查数据库中是否已经存在具有给定电子邮件地址的条目，如果不存在 2）用新条目填充数据库。

这是我目前拥有的代码：

```
$result = mysql_query("SELECT * FROM cbsclassy WHERE email = '$email' LIMIT 1");
$num_rows = mysql_num_rows($result);

if ($num_rows > 0) { echo "It seems that you're already participating. It is
only allowed to make one entry into the competition. <a href=index.html>Click to
return to the previous page</a>.";  
}

else { $sql="INSERT INTO cbsclassy (name, email, answer) VALUES
        ('$name','$email','$answer')";

        if (!mysqli_query($con,$sql)) { die('Error: ' . mysqli_error());
        }

        echo "You're now participating in the contest. The winners will be
        notified        directly via email. Good luck! <a     href=index.html>Click
        to return to the previous page</a>.";
} 
```

该脚本在填充数据库时运行良好，但是如果电子邮件地址已存在于数据库中，它就无法捕获。谁能发现问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T23:53:02.917

你在 else 之前有两个`}`，所以它每次都会被触发。

`UNIQUE KEY`在电子邮件字段上设置 a 然后检查`affected rows`插入时的数量以了解它是否存在会更有效。

同样如注释中所述，您的代码易受`SQL Injection`. 我建议你使用[`prepared statements`](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:54:35.923

更正 if/else 构造

```
if ($num_rows > 0) { echo "It seems that you're already participating. It is
only allowed to make one entry into the competition. <a href=index.html>Click to
return to the previous page</a>.";  
     } //here remove a }

  else { $sql="INSERT INTO cbsclassy (name, email, answer) VALUES
         ('$name','$email','$answer')";
               if (!mysqli_query($con,$sql)) { die('Error: ' . mysqli_error());
             }
           //and also here   
    echo "You're now participating in the contest. The winners will be
       notified        directly via email. Good luck! <a     href=index.html>Click
        to return to the previous page</a>.";
    } 
```

# clojure - 如何为 ritz.nrepl.middleware/wrap-javadoc 设置本地路径？

> ID：15192378
> 
> 赞同：2
> 
> 时间：2013-03-03T23:49:40.577
> 
> 标签：clojure

在 nrepl-middleware [wrap-javadoc](https://github.com/pallet/ritz/blob/develop/nrepl-middleware/src/ritz/nrepl/middleware/javadoc.clj#L19)的 api 文档中，它说它“接受本地路径一个空格分隔的路径列表”

我该如何设置？

我在我的profiles.clj中尝试了以下

```
{:user {:plugins []
    :jvm-opts ["-Xmx4G"]
    :injections [(require 'clojure.repl)]
    :warn-on-reflection true
    :dependencies [[ritz/ritz-nrepl-middleware "0.7.0"]]
    :repl-options {:nrepl-middleware 
                   [ritz.nrepl.middleware.javadoc/wrap-javadoc :local-paths "/usr/local/share/javadocs/7/docs/api"]
                   }}} 
```

但是当我执行时会导致以下异常`nrepl-jack-in`

```
Starting nREPL server...
Mark set
error in process sentinel: nrepl-server-sentinel: Could not start nREPL server: Reflection warning, NO_SOURCE_PATH:1:483 - reference to field getLocalPort can't be resolved.
Exception in thread "main" java.lang.ClassCastException: java.lang.String cannot be cast to clojure.lang.IFn
    at clojure.core$comp$fn__4166.doInvoke(core.clj:2347)
    at clojure.lang.RestFn.invoke(RestFn.java:408)
    at clojure.tools.nrepl.server$default_handler.doInvoke(server.clj:89)
    at clojure.lang.RestFn.invoke(RestFn.java:436)
    at user$eval1192.invoke(NO_SOURCE_FILE:1)
    at clojure.lang.Compiler.eval(Compiler.java:6619)
    at clojure.lang.Compiler.eval(Compiler.java:6609)
    at clojure.lang.Compiler.eval(Compiler.java:6582)
    at clojure.core$eval.invoke(core.clj:2852)
    at clojure.main$eval_opt.invoke(main.clj:308)
    at clojure.main$initialize.invoke(main.clj:327)
    at clojure.main$null_opt.invoke(main.clj:362)
    at clojure.main$main$fn__6661.invoke(main.clj:440)
    at clojure.main$main.doInvoke(main.clj:437)
    at clojure.lang.RestFn.invoke(RestFn.java:421)
    at clojure.lang.Var.invoke(Var.java:419)
    at clojure.lang.AFn.applyToHelper(AFn.java:163)
    at clojure.lang.Var.applyTo(Var.java:532)
    at clojure.main.main(main.java:37)
Subprocess failed 
```

如果我包裹`:local-paths "..."`在地图中，我不会得到任何 javadoc 中间件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:02:21.733

如果您在其 github 页面上查看 nrepl-middleware 的示例，您会发现要`:nrepl-middleware`传递的向量应该是中间件函数的向量，当您将其传递给字符串路径时，这就是为什么异常“无法将字符串转换为干扰素”。

就本地路径而言，这是 nrepl 客户端在 java-doc 请求本身中发送的内容。您可以通过调用在 Emacs 中设置本地路径：

`(setq nrepl-ritz-javadoc-local-paths (list "/usr/local/share/javadocs/7/docs/api"))`

# android - 什么时候家不是家（启动器相关）

> ID：15192384
> 
> 赞同：1
> 
> 时间：2013-03-03T23:50:10.707
> 
> 标签：android, android-launcher

我遇到了一个非常奇怪的情况，我得到了所有具有 CATEGORY_HOME 意图的已安装软件包的列表。

我的意图是手动启动本机 Home 应用程序（目前不是默认的本机 Home 应用程序，因为我的应用程序具有该角色）。

因此，我使用的方法（下面）正确识别出有两个应用程序设置为 CATEGORY_HOME。

当我尝试启动我的那个（获取启动器活动）时，它工作正常。但是，当我尝试获取默认启动器活动时，它返回为空。

所以......我很难过。当我尝试从中提取相关的启动活动时，当股票主页应用程序的包名称返回 null 时，如何确定我应该实际启动 `getLaunchIntentForPackag`什么？

这就是我正在做的事情（有一些评论以避免混淆），并且为了记录，我知道并不是所有的人都会在名称空间中使用“android”这个表达式，但我正试图让它在最初的时候起作用一个确实与该字符串一起返回的设备，因此它的一部分不是问题。

```
 //get a list of all apps that set themselves up as CATEGORY_HOME
    final Intent intent = new Intent(Intent.ACTION_MAIN); 
    intent.addCategory(Intent.CATEGORY_HOME); 
    final List<ResolveInfo> list = ((PackageManager)getPackageManager()).queryIntentActivities(intent, 0);

    String packageName = null;
            //look for the one that has the word android in the package name
    for(ResolveInfo ri : list){

        if(ri.activityInfo.packageName.indexOf("android") != -1)
            //this does get set correctly and looks like "com.sec.android.app.launcher"
            packageName = ri.activityInfo.packageName;
    }

    PackageManager pm = SlidePlayer.this
            .getPackageManager();
    Intent it = pm.getLaunchIntentForPackage(packageName);

    //it is NULL so this doesn't work
            startActivity(it); 
```

***编辑

根据 CommonsWare 的建议尝试以下方法...

```
String packageName = null;
    String className = null;
    for(ResolveInfo ri : list){
        //L.d("HOME PACK = " + ri.);
        if(ri.activityInfo.packageName.indexOf("android") != -1){
            className = ri.activityInfo.applicationInfo.className;
            packageName = ri.activityInfo.applicationInfo.packageName;
        }
    }

    //PackageManager pm = SlidePlayer.this
            //.getPackageManager();
    Intent it = new Intent();//pm.getLaunchIntentForPackage(packageName);

            //both packageName and className appear to be set correctly
             //packageName = "com.sec.android.app.launcher"
            //className = "com.android.launcher2.LauncherApplication"
    it.setClassName(packageName, className);
    it.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(it); 
```

***编辑 2*** ***** 半huzzah ...

在一台设备（Samsung Note II）上，关键是通过 Component 像这样设置它......

```
 Intent it = new Intent();//pm.getLaunchIntentForPackage(packageName);
ComponentName cn = new ComponentName(packageName, className);
it.setComponent(cn);
//it.setClassName(packageName, className);
it.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(it); 
```

这不适用于三星 Tab 10" 或摩托罗拉 M（这是迄今为止我用这种方法测试过的仅有的另外 2 台设备）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:13:27.163

`getLaucnIntentForPackage`专门寻找`CATEGORY_INFO`or `CATEGORY_LAUNCHER`-not `CATEGORY_HOME`，在这种情况下它将返回*null*。从[文档](http://developer.android.com/reference/android/content/pm/PackageManager.html#getLaunchIntentForPackage%28java.lang.String%29)：

> 公共抽象意图 getLaunchIntentForPackage (String packageName)
> 
> 在 API 级别 3 中添加 返回“良好”意图以在包中启动前门活动，例如用于在浏览包时实现“打开”按钮。当前实现将首先查找类别 CATEGORY_INFO 中的主要活动，然后查找类别 CATEGORY_LAUNCHER 中的主要活动，如果两者都找不到，则返回 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:17:32.743

> 但是，当我尝试获取默认启动器活动时，它返回为空。

这是因为大多数固件主屏幕并非设计为由主屏幕启动，因此可能不包括启动器活动。

> 当我尝试通过 getLaunchIntentForPackag 从中提取相关启动活动时，当股票主页应用程序的包名称返回 null 时，如何确定我应该实际启动什么？

由于它是主屏幕，因此您知道它必须具有与您相同`ACTION_MAIN`/的活动`CATEGORY_HOME`。找到那个并启动它。

# javascript - 为什么 Meteor Router 功能总是运行两次

> ID：15192400
> 
> 赞同：5
> 
> 时间：2013-03-03T23:51:32.377
> 
> 标签：javascript, coffeescript, meteor

我正在使用来自陨石的路由器包。

```
Meteor.Router.add
  "/article/:id": ->
    log "article"
    "article" 
```

每当文章页面/模板被加载时，路由器中的回调函数总是运行两次。我正在尝试使用回调函数来增加文章的查看次数。所以这带来了一个问题（每个公司都做两次）。

这是预期的行为吗？还是我做错了什么？

**更新**

它实际上并不总是运行两次。当页面刷新或浏览器第一次导航到页面时会发生这种情况。无论如何，它仍然存在问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T19:43:06.020

**更新：**

罪魁祸首是我用于 IE 8+ 路由支持的 HTML5-History-API 包。下面的解决方案将帮助有相同设置和问题的人。

* * *

找到了解决方案。但我不确定这是否是处理此问题的预期方式。

```
"/article/:id": (id) ->
   unless this.init
     Session.set "articleId", id
     Meteor.call "incArticleViews", id
   "article" 
```

如果有更好的解决方案，请发布，我会接受。

# iis - 在 Windows 功能中打开了 IIS，但无法使用 search->inetmgr 或管理工具启动它

> ID：15192401
> 
> 赞同：0
> 
> 时间：2013-03-03T23:51:33.327
> 
> 标签：iis

我在一台机器上安装了 Windows 7 Ultimate。我使用打开或关闭 Windows 功能打开了 IIS。见下文： ![在此处输入图像描述](../Images/b1ec00e7b0f86ed9e03c0f27560eb7dc.png)

但我无法启动 IIS！如果我在搜索窗口中键入 IIS 管理器，我不会得到任何结果。如果我浏览到管理工具，IIS 不存在！见下文： ![在此处输入图像描述](../Images/fb87e484ce34904075d5c2d9664f5828.png)

我也重启了好几次。请帮忙。

也做了iisreset。

```
C:\Windows\system32>iisreset

Attempting stop...
Internet services successfully stopped
Attempting start...
Internet services successfully restarted

C:\Windows\system32> 
```

c:\windows\system32\inetsrv下没有iis.msc

```
C:\Windows\System32\inetsrv>dir *.msc
 Volume in drive C has no label.
 Volume Serial Number is BA56-4174

 Directory of C:\Windows\System32\inetsrv

File Not Found 
```

**修复。没有打开 IIS->Web 管理工具 -> IIS 管理控制台。**

![在此处输入图像描述](../Images/fe4003e1e0754b598ab563815489210c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:56:11.950

我还不能写评论:( - 很抱歉它在一个答案空间。如果你打开一个dos shell，然后输入iisreset，会发生什么吗？我问看看IIS是否正在运行。不管怎样，然后尝试卸载重新安装 IIS。

如果你愿意，我们可以在这里的聊天室聊天......

# c++ - opengl的着色器应该做多少工作？

> ID：15192403
> 
> 赞同：1
> 
> 时间：2013-03-03T23:51:34.350
> 
> 标签：c++, c, opengl, glsl, shader

我应该避免在opengl的着色器中进行过多的计算吗？

例如：光照等每一帧都需要计算的东西。我应该进行计算然后将结果发送到着色器，还是应该只在着色器中进行计算？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T01:09:01.197

GPU 与 CPU 是一个巨大的讨论话题，正如@Nicol Bolas 指出的那样，问题是寻找一种通用解决方案，其中有多种因素会影响结果。

在考虑性能时，没有什么比分析更好的了。众所周知，人类不善于预测其应用程序的性能影响。如果在开发过程中您发现自己突然受制于 GPU，那么您可能希望将一些工作卸载到 CPU 上。另一方面，如果您受 CPU 限制，您可以选择将更多工作卸载到 GPU，即使该工作与图形无关。您很可能希望首先为 GPU 提供您所能提供的（尤其是与图形相关的）以释放 CPU 周期。

[您可以在NVIDIA](https://developer.nvidia.com)和[AMD](http://developer.amd.com/)开发人员网站上阅读更多关于分析 GPU 的信息，或者通过搜索 GPU 分析教程/博客[文章](http://www.reedbeta.com/blog/2011/10/12/gpu-profiling-101/)，例如。

[GPGPU](http://en.wikipedia.org/wiki/GPGPU)已成为并行编程世界中讨论的主要话题，因为 GPU 的设计考虑了并行性。[使用SLI](http://en.wikipedia.org/wiki/Scalable_Link_Interface)等技术将多个 GPU 添加到系统中以进一步并行化处理也并不罕见。这是@Patashu 评论中支持 GPU 并行处理的原则之一。如果您有兴趣了解更多信息，可以深入了解两个更流行的基于 GPU 的并行编程平台[OpenCL](http://www.khronos.org/opencl/)和[CUDA](http://en.wikipedia.org/wiki/CUDA)。

在以下帖子中也对该主题进行了更多讨论：

*   [CPU 与 GPU](https://softwareengineering.stackexchange.com/questions/88356/opengl-cpu-vs-gpu)
*   [用于一般计算的着色器](https://stackoverflow.com/questions/3915001/using-shader-for-calculations)
*   [坚持使用 CPU 的示例](https://gamedev.stackexchange.com/questions/31529/should-the-modelview-and-projection-matrices-be-calculated-in-the-shader-or-on-t)

在其他出版物中阅读[GPU gems](https://developer.nvidia.com/gpu-gems)系列也是一个好主意。您可能会发现其他人通过拆分工作量而获得的结果。

# javascript - 从模型中删除项目时未更新表单验证。漏洞？

> ID：15192404
> 
> 赞同：8
> 
> 时间：2013-03-03T23:52:04.287
> 
> 标签：javascript, html, validation, angularjs

我最近开始使用[AngularJS](http://angularjs.org/)，我想我遇到了一个奇怪的错误。

* * *

首先，这是一些工作代码：

**看法：**

```
<body ng-controller="MainCtrl">

    <form name="form">

        <div ng-repeat="phone in phoneNumbers">
            <input ng-model="phone.number" required />
            <button ng-click="deleteNumber($index)">Delete Number</button>
        </div>

        <button ng-click="addNumber()">Add Number</button>

        <input type="submit" ng-disabled="form.$invalid" />

    </form>

</body> 
```

**控制器：**

```
app.controller('MainCtrl', function ( $scope ) {

    $scope.phoneNumbers = [{
        number: '212-123-4567'
    }];

    $scope.addNumber = function () {
        $scope.phoneNumbers.push({
            number: ''
        });
    };

    $scope.deleteNumber = function ( index ) {
        $scope.phoneNumbers.splice(index, 1);
    };

}); 
```

这是 Plunkr：[**工作示例**](http://plnkr.co/edit/Ta4tXI8KUkRjXpv2PkaB?p=preview)。

我认为代码非常简单：`ng-repeat`显示每个电话号码，您可以编辑/删除。如果添加了电话号码，则不能为空；如果电话号码为空，则提交按钮将被禁用。

* * *

当提交按钮放在`ng-repeat`. 如果您添加电话号码，将其留空，然后将其删除，则提交按钮将保持禁用状态：

```
<body ng-controller="MainCtrl">

    <form name="form">

        <input type="submit" ng-disabled="form.$invalid" />

        <div ng-repeat="phone in phoneNumbers">
            <input ng-model="phone.number" required />
            <button ng-click="deleteNumber($index)">Delete Number</button>
        </div>

        <button ng-click="addNumber()">Add Number</button>

    </form>

</body> 
```

这是 plunkr：[**破碎的例子**](http://plnkr.co/edit/pJGQNN45hkfiWfoOfYv5?p=preview)。

* * *

我喜欢 AngularJS，但这几乎把我逼疯了。我花了超过 20 个小时来追逐这个愚蠢的错误。由于通常的演示底部有提交按钮，因此我无法重现该问题。我不得不拿我的实际代码，慢慢地将代码减少到最低限度。这是一个非常庞大而复杂的应用程序，而且...好吧，我现在停止抱怨。

我的问题有两个：

1.  这是一个错误吗？我什至用不稳定的分支（1.1.3）尝试了这个，它的工作方式完全相同。

2.  *在不更改 source order*的情况下，我能做些什么来解决它。我知道我可以通过 CSS 来移动我的提交按钮，但在我的情况下，这并不是一个真正的选择；我需要提交按钮成为表单中的第一件事。

* * *

**PS[这是它的实际操作视频](http://www.youtube.com/watch?v=pg-Itozaqrw)**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T00:36:43.517

显然这是一个活跃的错误。

见[https://github.com/angular/angular.js/issues/1572](https://github.com/angular/angular.js/issues/1572)

在那个错误中，发布了一个解决方法，它使用一个隐藏的计数器，当添加/删除字段时递增 - 这用于强制 Angular 重新验证表单。

给出了一个示例 jsFiddle：http: [//jsfiddle.net/HhcXT/](http://jsfiddle.net/HhcXT/)

在模板中：

```
<input type="hidden" ng-bind="abc" /> 
```

在控制器中：

```
$scope.removeYears = function(item) {
    var index = $.inArray(item, $scope.years)
    $scope.years.splice(index, 1);        //remove element
    $scope.abc += 1;
} 
```

# javascript - 用 Javascript 和链接动态替换内容

> ID：15192405
> 
> 赞同：-1
> 
> 时间：2013-03-03T23:52:17.130
> 
> 标签：javascript, jquery, html, css

[http://jsfiddle.net/bUjx7/42/](http://jsfiddle.net/bUjx7/42/)

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.9.1.js'>
</script>

<script type='text/javascript'>
$(document).ready(function () {
    $('.fieldreplace a').click(function () {
        $('#fieldmatch, .fieldgame').hide();
        var region = $(this).data('region');
        $('#' + region).show();
    });
});
</script> 
```

我正在努力做到这一点，因此单击一个链接将替换所有单元格中的内容，而不是仅替换一个单元格中的内容。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:55:13.933

你可以代替所有`td`的s之类的吗？

```
$('#tableId td').html('content to update on all cells'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:05:38.267

您的代码中有几个问题。

1.  我看到你已经指定`id="fieldgame1"`了很多次，记住`id`每个元素都应该是唯一的。
2.  您将使用类选择器而不是 id 选择器来选择所有元素。

现在，您将使用不同的类制作单元格内容，并使用类选择器来隐藏/显示它们。

HTML

```
<div class="fieldmatch" >2-5</div>
<div class="fieldgame1" >1-6</div>
<div class="fieldgame2" >6-1</div>
<div class="fieldgame3" >2-5</div> 
```

CSS

```
.fieldgame1, .fieldgame2, .fieldgame3 {
    display:none;
} 
```

JavaScript

```
$(document).ready(function () {
    $('.fieldreplace a').click(function () {
        $('#fieldmatch, .fieldgame').hide();
        var region = $(this).data('region');
        $('#' + region).show();
    });
}); 
```

代码示例：http: [//jsfiddle.net/bUjx7/44/](http://jsfiddle.net/bUjx7/44/)

# php - PHP/SQLite：删除 Cookie（刷新错误）

> ID：15192419
> 
> 赞同：0
> 
> 时间：2013-03-03T23:53:16.337
> 
> 标签：php, html, sqlite

当用户想要退出我的网站时，我有一个简单的 PHP 页面可以运行。这是代码：

```
<?php
    setcookie("session", "", time()-3600);
    header("location:signin.php");
?> 
```

我的问题是，每当我链接到此代码时，服务器都会说找不到该页面，但是当我刷新它时“突然”找到了该页面。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:46:25.857

位置可能需要一个完全合格的网址，[http://whatever.com/signin.php](http://whatever.com/signin.php)应该可以工作

# ruby-on-rails - rake db:populate rake 中止！nil:NilClass 的未定义方法“每个”

> ID：15192420
> 
> 赞同：1
> 
> 时间：2013-03-03T23:53:26.520
> 
> 标签：ruby-on-rails, rake

我正在关注[这里](http://french.railstutorial.org/chapters/following-users#code%3auser_reverse_relationships)的 Rails 教程。

但是在第 12.2 章运行时`db:populate`，我在第 54 行收到此错误：

> 耙中止！nil:NilClass 的未定义方法“每个”

好吧，以下似乎是空的，但是我该怎么做才能解决它？

[这是我的相关代码](https://github.com/xavierva/sample_app2/blob/following-user/lib/tasks/sample_data.rake)

# c++ - 每个节点有两条边的有向图的实现 - 递归搜索函数

> ID：15192425
> 
> 赞同：0
> 
> 时间：2013-03-03T23:53:56.570
> 
> 标签：c++, debugging, data-structures, recursion

我已经开始玩结构，我创建了一个我称之为`LR`：

```
struct LR{
    int v;
    LR* L;
    LR* R;
}; 
```

我了解如何以通用方式操作它 -`main`下面的代码，在我开始构建类之前，我已经开始编写递归函数，它以字符串（“LRLRR”）的形式获取 LR 中节点的“地址”并返回需要LR，但我仍然从编译器中得到错误：

```
LR.cpp In function 'LR chooseNode(LR*, std::string)':    
LR.cpp [Error] request for member 'L' in 'tree', which is of pointer type 'LR*' 
```

`(maybe you meant to use '->' ?)`- 部分带有递归的行错误`chooseNode(*tree.L,str2);`

我在做什么错，或者更确切地说如何调试它？（除了我的实施的整个概念，这是相当练习）。

```
#include<iostream>
#include<string>
#define SHOW(a) std::cout << #a << ": " << (a) << std::endl
using namespace std;
struct LR{
    int v;
    LR* L;
    LR* R;
};

LR chooseNode(LR* tree, string str){// for example str="LRL"    

            // for clarity I've cutted the most of the code

            if(str[0]=='L')
            chooseNode(*tree.L,str2);   
        else if(str[0]=='R')
            chooseNode(*tree.R,str2);

};

int main(){

    LR d1,d2,d3;
    d1.v=4; 
    d1.L=&d2;
    (*(d1.L)).L=&d3;
    d3.v=12345;
    SHOW((*(*d1.L).L).v);

    cout<<"Opis: "<<"\n";
    SHOW(int(&d1));
    SHOW(int(&d2));
    SHOW(sizeof(d2.v));

    return (0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:58:18.120

> 我究竟做错了什么？

`tree`是一个类型的指针`LR*`

可以使用以下语法从指针访问结构成员：

```
tree->L 
```

或者（不太常见，但它看起来像你正在尝试的）

```
(*tree).L 
```

> 或者更确切地说如何调试它？

“调试”是对成功构建的可执行文件执行的过程。你有一个编译器错误，所以调试不适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:52:55.740

@Qbik - 开始考虑你的字符串处理和效率，最终得到了这个，我不妨与你分享：

```
LR* chooseNodeUsingCString(LR* tree, const char* str){// for example str="LRL"
    // Pre-conditions
    if ((str[0] == 0) || (tree == 0))
        return 0; // or assert or whatever

    // This assumes an L unless an R, but handle however if needed.
    LR* next = tree->L;
    if (str[0]=='R')
        next = tree->R;

    // End of path case
    if (str[1] == 0)
    {
        return next;
    }

    // Error case, path string does not exist in the tree.
    if (!next)
        return 0;

    // Standard recurse case; easy iteration with no copying along a C-String.
    const char* pathStringWithFirstElementRemoved = str + 1;
    return chooseNodeUsingCString(next, pathStringWithFirstElementRemoved);
}; 
```

# macos - 如何修复我的 Jenkins Slave 上的 SVN 结账？

> ID：15192427
> 
> 赞同：2
> 
> 时间：2013-03-03T23:54:28.110
> 
> 标签：macos, svn, jenkins, jenkins-plugins

我花了几天时间试图让 Jenkins 使用 svn。

在 master 上，当我配置 svn url 时，它会验证 URL。

我可以手动进行结帐，并以与我进行测试手动结帐时相同的用户身份运行从站。

我尝试在 jenkins 配置页面上选择所有不同版本的 svn。

我已经检查过在 subversion enterCredential 页面上输入不正确的凭据会导致错误，输入正确的凭据允许它通过。

我们在 http 上使用基本的 svn auth（在端口 8080 上）。

作业配置中的 URL 验证正常通过，但在从属设备上运行的作业仍会引发以下异常。

从我从网上收集到的各种信息中，我很确定这是一个身份验证问题。

从机是 Mac OS X，主机是 Windows Server 2008。

Jenkins 正在运行 1.504（已尝试使用 1.502）。我们使用的是 svn 1.6。

这是一个例外：

```
Building remotely on Mac OS Test Node in workspace /Users/buildmachine/jenkins/xcode
hudson.util.IOException2: remote file operation failed: /Users/buildmachine/jenkins/xcode at hudson.remoting.Channel@1695eeb:Mac OS Test Node
at hudson.FilePath.act(FilePath.java:861)
at hudson.FilePath.act(FilePath.java:838)
at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:843)
at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:781)
at hudson.model.AbstractProject.checkout(AbstractProject.java:1342)
at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:683)
at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:588)
at hudson.model.Run.execute(Run.java:1568)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:237)
Caused by: java.io.IOException: Remote call on Mac OS Test Node failed
at hudson.remoting.Channel.call(Channel.java:681)
at hudson.FilePath.act(FilePath.java:854)
... 11 more
Caused by: java.lang.NoSuchMethodError: org.tmatesoft.svn.core.wc.SVNBasicClient.getOperationsFactory()Lorg/tmatesoft/svn/core/wc2/SvnOperationFactory;
at hudson.scm.SvnClientManager.wrapUp(SvnClientManager.java:46)
at hudson.scm.SvnClientManager.getUpdateClient(SvnClientManager.java:67)
at hudson.scm.subversion.CheckoutUpdater$1.perform(CheckoutUpdater.java:71)
at hudson.scm.subversion.WorkspaceUpdater$UpdateTask.delegateTo(WorkspaceUpdater.java:153)
at hudson.scm.SubversionSCM$CheckOutTask.perform(SubversionSCM.java:903)
at hudson.scm.SubversionSCM$CheckOutTask.invoke(SubversionSCM.java:884)
at hudson.scm.SubversionSCM$CheckOutTask.invoke(SubversionSCM.java:867)
at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2348)
at hudson.remoting.UserRequest.perform(UserRequest.java:118)
at hudson.remoting.UserRequest.perform(UserRequest.java:48)
at hudson.remoting.Request$2.run(Request.java:326)
at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-06T18:17:02.377

我还必须删除较新的 jar：
cd /var/lib/jenkins/plugins/subversion/WEB-INF/lib
mv svnkit-1.7.10-jenkins-1.jar /tmp
/etc/init.d/jenkins restart它奏效了！伟大的发现！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T00:05:14.967

发现问题了。。

C:\Program Files (x86)\Jenkins\plugins\subversion\WEB-INF\lib 中有一个旧的 svnkit-1.3.6.1-jenkins-2.jar

关闭 jenkins 并删除这个文件解决了这个问题。

# android - PreferenceFragment：在 onSharedPreferenceChanged() 中启动 AlertDialog

> ID：15192428
> 
> 赞同：1
> 
> 时间：2013-03-03T23:54:29.430
> 
> 标签：android, android-preferences

我试图在单击`AlertDialog`a 时显示一条消息`SwitchPreference`。我试图使用`this`，但出现错误：*构造函数 AlertDialog.Builder(Settings) is undefined*。所以我使用`getActivity()`了，但是这个方法没有显示任何东西。

还有人知道如何在选择首选项和选择勾选框之间执行不同的操作。您知道如何在某些设置中单击首选项文本，它会给您一个描述，然后您必须单击小框才能实际启用/禁用。

```
public class Settings extends PreferenceFragment implements OnSharedPreferenceChangeListener{

    Bundle savedInstanceState;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.settings);

        this.savedInstanceState = savedInstanceState;
    }

    @Override
    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
        if (key.equals("this")) {
            final SwitchPreference sp = (SwitchPreference) getPreferenceScreen().findPreference(key);
            if (sp.isChecked()) {
                System.out.println("enabled");
            } else {
                AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
                builder.setMessage("blah...")
                        .setTitle("Title")
                        .setPositiveButton("proceed", new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog, int id) {
                                System.out.println("positive");
                            }
                        })
                        .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

                            public void onClick(DialogInterface dialog, int id) {
                                sp.setChecked(true);
                                System.out.println("cancled");
                            }
                        })
                        .create();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:23:45.297

当您完成构建`AlertDialog`时，最后一次调用应该是[`AlertDialog.Buidler.show()`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#show%28%29)，而不是[`AlertDialog.Builder.create()`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#create%28%29)。但如果你打电话`create()`，以后你可以使用[`Dialog.show()`](http://developer.android.com/reference/android/app/Dialog.html#show%28%29)。

另一个注意事项，您可能希望用于[`Log`](http://developer.android.com/tools/debugging/debugging-log.html)调试，而不是`System.out`.

# php - exif_read_data() 表示给定资源

> ID：15192432
> 
> 赞同：3
> 
> 时间：2013-03-03T23:54:46.440
> 
> 标签：php, exif

我从这里得到了一个代码[http://www.white-hat-web-design.co.uk/articles/php-image-resizing.php](http://www.white-hat-web-design.co.uk/articles/php-image-resizing.php)来让用户发送的图像被调整大小。

这是它如何处理发送的图像。

```
 include('image_resize.php');
            $image = new SimpleImage();
            $image->load($upload_dir.$filename);
            $image->resizeToWidth(190);
            $image->save($upload_dir.$filename); 
```

这是其中的一部分`image_resize.php`：

```
function resizeToWidth($width) {
  $ratio = $width / $this->getWidth();
  $height = $this->getheight() * $ratio;
  $this->resize($width,$height);
}
function resize($width,$height) {
    $new_image = imagecreatetruecolor($width, $height);
    imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
    $this->image = $new_image;
} 
```

我不会粘贴所有代码，因为直到这里一切都工作正常。

问题是我在直接从手机相机上传照片时遇到了方向问题，所以我写了这个：

```
function resize($width,$height) {
    $exif = exif_read_data($this->image, 0, true);
    if(!empty($exif['IFD0']['Orientation'])) {
        switch($exif['Orientation']) {
            case 3: // 180 rotate left
            $this->image = imagerotate($this->image, 180, 0);
            break;

            case 6: // 90 rotate right
            $this->image = imagerotate($this->image, -90, 0);
            break;

            case 8: // 90 rotate left
            $this->image = imagerotate($this->image, 90, 0);
            break;
        }
    }
    $new_image = imagecreatetruecolor($width, $height);
    imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
$this->image = $new_image;
} 
```

但是当我运行它时，服务器说：

```
exif_read_data() expects parameter 1 to be string, resource given in /home/…/public_html/image_resize.php on line 101 
```

这是第 101 行：`$exif = exif_read_data($this->image, 0, true);`

我已经搜索了有关的问题`exif_read_data()`，但我找不到“给定资源”的含义，正如我在其他问题和文档中看到的那样，您可以使用临时图像作为参数。

so the question is: how can i handle the `$image->this` to make it not be seen as a resource?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:11:17.427

`$this->image` is an image resource, created by functions like `imagecreatetruecolor()`, which is a representation of an image. For your exif function, you have to specify the (string) filename.

So it should look like:

```
function load($filename) {

  $this->filename = $filename;
  // ...
}

function resize($width,$height) {
   $exif = exif_read_data($this->filename, 0, true);
   // ...
} 
```

# php - Kohana 3.3 模型无法在 linux 上加载，但会在 Windows 上加载

> ID：15192434
> 
> 赞同：0
> 
> 时间：2013-03-03T23:55:05.517
> 
> 标签：php, kohana

所以我正在努力迁移到 linux 服务器。我得到错误

```
ErrorException [ Fatal Error ]: Class 'Model_Game' not found 
```

我的文件结构是

```
application/classes/Model/game.php 
```

模型定义是

```
class Model_Game extends ORM {
    protected $_table_name = 'game';
    protected $_primary_key = 'game_id';

    ...
} 
```

这适用于我的 windows 环境，但不适用于我的 linux 环境。据我了解，这是正确的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:20:03.017

您需要遵循 PSR-0 命名： http: [//kohanaframework.org/3.3/guide/kohana/upgrading#psr-0-support-fileclass-naming-conventions](http://kohanaframework.org/3.3/guide/kohana/upgrading#psr-0-support-fileclass-naming-conventions)和[http://kohanaframework.org/3.3/guide/kohana /conventions#class-names-and-file-location](http://kohanaframework.org/3.3/guide/kohana/conventions#class-names-and-file-location)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T23:59:17.160

您需要将文件名更改为`Game.php`（大写“G”）。

Linux 文件系统区分大小写

# php - 用于抓取的循环数组

> ID：15192439
> 
> 赞同：1
> 
> 时间：2013-03-03T23:55:56.360
> 
> 标签：php

我有一个包含一些值的数组

```
$array = array("Bob","jim","frank","pat"); 
```

我有一些来自简单 html dom 的抓取代码

```
$html = file_get_html('http://somesite.com?search=name');
//itteration and so on 
```

我希望能够一次为 url 提供数组中的值，因此它将使用 search=bob 抓取 url，然后转到 search=jim 等等

我尝试将 file_get_html 与迭代等放在一个循环中，然后使用

```
foreach($array as $arrays){
$html = file_get_html('http://somesite.com?search=$arrays');
//more code
} 
```

但这不起作用，无论如何要这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T23:57:17.750

您需要使用`"`而不是`'`. `double quotes`允许在字符串中使用变量。或者使用`concatenation`：

```
$html = file_get_html('http://somesite.com?search=' . $arrays); 
```

# c - 在同一行更新 printf 值而不是新的

> ID：15192441
> 
> 赞同：20
> 
> 时间：2013-03-03T23:56:09.340
> 
> 标签：c

我想知道是否有办法`C`覆盖已经打印的现有值，而不是每次都创建一个新行或只是移动一个空间。我需要从传感器获取实时数据，并希望它坐在那里并不断更新现有值而无需任何滚动。这可能吗？

更新：添加代码

```
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdint.h>
#include <time.h>

#include <wiringPi.h>
#include <wiringPiI2C.h>

#define CTRL_REG1 0x20
#define CTRL_REG2 0x21
#define CTRL_REG3 0x22
#define CTRL_REG4 0x23

int fd;
short x = 0;
short y = 0;
short z = 0;
int main (){

    fd = wiringPiI2CSetup(0x69); // I2C address of gyro
    wiringPiI2CWriteReg8(fd, CTRL_REG1, 0x1F); //Turn on all axes, disable power down
    wiringPiI2CWriteReg8(fd, CTRL_REG3, 0x08); //Enable control ready signal
    wiringPiI2CWriteReg8(fd, CTRL_REG4, 0x80); // Set scale (500 deg/sec)
    delay(200);                    // Wait to synchronize

void getGyroValues (){
    int MSB, LSB;

    LSB = wiringPiI2CReadReg8(fd, 0x28);
    MSB = wiringPiI2CReadReg8(fd, 0x29);
    x = ((MSB << 8) | LSB);

    MSB = wiringPiI2CReadReg8(fd, 0x2B);
    LSB = wiringPiI2CReadReg8(fd, 0x2A);
    y = ((MSB << 8) | LSB);

    MSB = wiringPiI2CReadReg8(fd, 0x2D);
    LSB = wiringPiI2CReadReg8(fd, 0x2C);
    z = ((MSB << 8) | LSB);
}
    for (int i=0;i<10;i++){
    getGyroValues();
    // In following Divinding by 114 reduces noise
    printf("Value of X is: %d\r", x/114);
//  printf("Value of Y is: %d", y/114);
//  printf("Value of Z is: %d\r", z/114);
    int t = wiringPiI2CReadReg8(fd, 0x26);
    t = (t*1.8)+32;//convert Celcius to Fareinheit
    int a = wiringPiI2CReadReg8(fd,0x2B);
    int b = wiringPiI2CReadReg8(fd,0x2A);
//  printf("Y_L equals: %d\r", a);
//  printf("Y_H equals: %d\r", b);
    int c = wiringPiI2CReadReg8(fd,0x28);
    int d = wiringPiI2CReadReg8(fd,0x29);
//  printf("X_L equals: %d\r", c);
//  printf("X_H equals: %d\r", d);
    int e = wiringPiI2CReadReg8(fd,0x2C);
    int f = wiringPiI2CReadReg8(fd,0x2D);
//  printf("Z_L equals: %d\r", e);
//  printf("Z_H equals: %d\r", f); 

//  printf("The temperature is: %d\r", t); 
    delay(2000);
}
}; 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-06-10T09:12:11.447

`\r`正如其他人所说，您应该添加到您的 printf 中。此外，请确保您刷新标准输出，因为标准输出流被缓冲并且只会在到达换行符后显示缓冲区中的内容。

在你的情况下：

```
for (int i=0;i<10;i++){
    //...
    printf("\rValue of X is: %d", x/114);
    fflush(stdout);
    //...
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-03T23:59:23.293

您正在寻找回车。在 C 中，就是`\r`. 这将使光标回到当前行的开头而不开始新行（换行）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-04T00:01:08.383

您可以使用“\r”而不是“\n”来做到这一点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-04T00:03:03.907

印在哪里？

如果您将数据输出到标准输出，您通常无法返回并更改已写入的任何内容。如果您的标准输出被定向到终端，您可以尝试`\r`在某些终端上输出将光标移动到行首的字符（效果取决于平台），以便后续输出行将覆盖其中打印的内容之前的行。这将产生旧数据被新数据替换的视觉效果。但是，这并没有真正“替换”流中的旧数据，这意味着如果您将标准输出重定向到文件，该文件将存储打印的所有内容。再次记住，这`\r`将迫使您覆盖终端上的整行。

如果您将数据输出到文件，那么您可以使用`fseek`函数返回到某个先前访问过的点并从那里“重新开始”，覆盖过程中的数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-03T23:59:58.393

您是否测试过 '\b' 字符（退格）？可能取决于您的控制台。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T23:57:11.940

您可以打印出与控制台屏幕一样多的换行符。这将有效地清除屏幕。

这是一个关于以不同方式清除屏幕的好[链接。](http://www.cplusplus.com/forum/articles/10515/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-09-07T10:27:56.550

参考示例代码了解：

```
#include <stdio.h>
#include <pthread.h>

void myThread(void* ptr) {
    printf("Hello in thread\n");
    int i=0;    
    for(;i<10;i++)
    {
        sleep(1);
        printf(". ");
        fflush(stdout);  //comment this, to see the difference in O/P
    }
    printf("sleep over now\n");
}

int main(void) {
    pthread_t tid;
    printf("creating a new thread\n");
    pthread_create(&tid, NULL, (void*)myThread, 0);
    printf("going to join with child thread..\n");
    pthread_join(tid, NULL);
    printf("joined..!!\n");
    return 0;
} 
```

[参考博客](http://cboard.cprogramming.com/c-programming/118404-printf-refresh-screen.html)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2018-10-06T21:05:19.970

除了上面的答案， \r 实际上是终端的代码。c 似乎没有提供一种方法来更改已经放入标准输出流的任何程序。

```
#include<stdio.h>
int main(){
    freopen("output.txt", "w", stdout);
    printf("somthing");
    printf("\r other thing");
} 
```

在 output.txt 中，有些东西没有改变，因为 \r 对于 txt 文件没有任何意义。但是对于终端来说，\r 是有意义的。它处理格式并很好地显示。

使用终端代码可以做一些有趣的事情。像下面

```
#include<iostream>
#include<bits/stdc++.h>
#include<unistd.h>

int main(){
std::string processBar[] {
    "00%: [                     ]",
    "05%: [#                    ]",
    "10%: [##                   ]",
    "15%: [###                  ]",
    "20%: [####                 ]",
    "25%: [#####                ]",
    "30%: [######               ]",
    "35%: [#######              ]",
    "40%: [########             ]",
    "45%: [#########            ]",
    "50%: [##########           ]",
    "55%: [###########          ]",
    "60%: [############         ]",
    "65%: [#############        ]",
    "70%: [##############       ]",
    "75%: [###############      ]",
    "80%: [################     ]",
    "85%: [#################    ]",
    "90%: [###################  ]",
    "95%: [#################### ]",
    "100%:[#####################]",
};

int n = sizeof(processBar)/ sizeof(*processBar);
// pretty fanny
for(int i{0}; i<n; ++i){
    fprintf(stdout, "\e[%d;1H \e[2K \r \a%s", i, processBar[i].c_str());
    fflush(stdout);
    sleep(1);
}

} 
```

# ruby-on-rails - 尝试结合骨干网和导轨时的额外用户网址

> ID：15192445
> 
> 赞同：0
> 
> 时间：2013-03-03T23:56:49.710
> 
> 标签：ruby-on-rails, backbone.js

我有一个在主页上使用主干的 Rails 应用程序。它在导航栏中有一个搜索字段。如果用户搜索名称，则会打开一个下拉栏，显示名称中带有特定字母的所有用户，此时用户可以单击指向任何配置文件的链接。Backbone 集合“Users”建立在这样的 url 上，“key”代表在搜索框中输入的字母。

var url =“用户/搜索/”+键；

但是，该应用程序仅以有限的方式使用主干。例如，用户点击一个链接后，页面发生变化，他们被带到 `localhost:3000/users/28`. 我希望搜索栏在用户的个人资料页面上可用，但是，如果我从个人资料页面搜索名称，则 url（在控制台日志中）现在变为。

```
/users/users/search/" + key; 
```

换句话说，从用户的个人资料页面搜索会在搜索查询中添加一个额外的“用户”（以及 404 未找到错误），即使用户集合的 ajax 请求的 url 是这样的

```
var url =  "users/search/" + key; 
```

出于好奇，我在 routes.rb 中添加了一条路由来尝试处理 '/users/users' 的情况

```
 match '/users/search/:query' => 'users#getUsersByName', defaults: {format: :json}
  match '/users/users/search/:query' => 'users#getUsersByName', defaults: {format: :json} 
```

但是，即使这消除了 404 错误并返回搜索结果，如果我单击链接以访问另一个用户的个人资料（从用户的个人资料页面），Rails 仍将我带到 /users/users/28，因为链接在该模板被附加到基本用户 url 上。

谁能推荐我如何处理这个问题？

**模板中的链接**

```
<a href='users/{{= id }}'> 
```

**用户集合**

```
window.Users = Backbone.Collection.extend({

  model: User,
    url:"users",
    findByName:function (key) {

        var url =  "users/search/" + key;
        console.log('findByName: ' + key);
        var self = this;
        $.ajax({
            url:url,
            dataType:"json"
            success:function (data) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:07:40.397

它需要在用户之前有一个正斜杠。所以代替这个

```
var url =  "users/search/" + key; 
```

做

```
var url =  "/users/search/" + key; 
```

# c# - Razor WebViewPage 扩展方法不起作用

> ID：15192460
> 
> 赞同：1
> 
> 时间：2013-03-03T23:58:56.373
> 
> 标签：c#, asp.net, razor

我正在尝试为 WebViewPage 类创建扩展方法，以便能够在我的 .cshtml 文件中调用 @Foo() 。而且我几乎可以肯定以下代码应该可以工作，但它没有......

我正在使用 System.Web.Mvc，所以我认为这也不是命名空间问题。

```
namespace System.Web.Mvc
{

    public static class WebViewPageExtensions
    { 

        public static void Foo(this System.Web.Mvc.WebViewPage view)
        {
            //do something...
        }

    }
} 
```

注意：我也尝试使用自定义 WebViewPage 类来执行此操作，该类有效，但我想了解为什么我不能使用扩展方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T08:47:47.907

也许一个迟到的答案，但你应该能够在你的 cshtml 文件中调用 @this.Foo() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:06:32.063

您是否在 web.config 中为 webviewpages 声明了您的程序集？

```
 <assemblies>
    <add assembly="YourAssembly, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-14T13:21:13.263

首先，您应该创建自己的`WebViewPage`

```
 public abstract class MyWebViewPage : System.Web.Mvc.WebViewPage
    {

        public Foo F
        {
        //do something...

        }

    } 
```

然后将其添加到您的`web.config` in`<system.web.webPages.razor>`部分：

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=5.2.3.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="[your custom webview class with namespace,ex: myproject.utiles.MyWebViewPage ]">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

然后您可以轻松地在所有视图中使用 @foo

# tomcat - 在Windows 7中没有连接的tomcat关闭

> ID：15192461
> 
> 赞同：0
> 
> 时间：2013-03-03T23:58:56.977
> 
> 标签：tomcat

我已经在 Windows 7 中下载并解压缩了 tomcat。我还安装了 java sdk、java jre 和 net beans，它们可以正常工作。我遇到的问题是当我转到安装了 tomcat 的 bin 目录并执行 startup.bat 文件时。我的 tomcat 版本是 7.0.37，我已经修改了 startup.bat 中的 JAVA_HOME，所以它显示为：

设置 JAVA_HOME=C:\Program Files\Java\jdk1.7.0_15

现在，当我启动时，命令行显示此错误：

![在此处输入图像描述](../Images/794861cdb81dda105e4a70cd4ec4745e.png)

![在此处输入图像描述](../Images/93e3bee681c081d4abbb7ca5000438fd.png)

然后关机。我试图用 netbeans 启动 tomcat，但出现以下错误：

![在此处输入图像描述](../Images/64e336b0143bf2062c1542c997062c11.png)

有什么帮助吗？

xml文件：

```
<?xml version='1.0' encoding='utf-8'?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!-- Note:  A "Server" is not itself a "Container", so you may not
     define subcomponents such as "Valves" at this level.
     Documentation at /docs/config/server.html
 -->
<Server port="8005" shutdown="SHUTDOWN">
  <!-- Security listener. Documentation at /docs/config/listeners.html
  <Listener className="org.apache.catalina.security.SecurityListener" />
  -->
  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener SSLEngine="on" className="org.apache.catalina.core.AprLifecycleListener"/>
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener"/>
  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener"/>
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"/>
  <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener"/>

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource auth="Container" description="User database that can be updated and saved" factory="org.apache.catalina.users.MemoryUserDatabaseFactory" name="UserDatabase" pathname="conf/tomcat-users.xml" type="org.apache.catalina.UserDatabase"/>
  </GlobalNamingResources>

  <!-- A "Service" is a collection of one or more "Connectors" that share
       a single "Container" Note:  A "Service" is not itself a "Container",
       so you may not define subcomponents such as "Valves" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name="Catalina">

    <!--The connectors can use a shared executor, you can define one or more named thread pools-->
    <!--
    <Executor name="tomcatThreadPool" namePrefix="catalina-exec-"
        maxThreads="150" minSpareThreads="4"/>
    -->

    <!-- A "Connector" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080
    -->
    <Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="8443"/>
    <!-- A "Connector" using the shared thread pool-->
    <!--
    <Connector executor="tomcatThreadPool"
               port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" />
    -->
    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->
    <!--
    <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS" />
    -->

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443"/>

    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="jvm1">
    -->
    <Engine defaultHost="localhost" name="Catalina">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->
      <!--
      <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
      -->

      <!-- Use the LockOutRealm to prevent attempts to guess user passwords
           via a brute-force attack -->
      <Realm className="org.apache.catalina.realm.LockOutRealm">
        <!-- This Realm uses the UserDatabase configured in the global JNDI
             resources under the key "UserDatabase".  Any edits
             that are performed against this UserDatabase are immediately
             available for use by the Realm.  -->
        <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase"/>
      </Realm>

      <Host appBase="webapps" autoDeploy="true" name="localhost" unpackWARs="true">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern="common" -->
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs" pattern="%h %l %u %t &quot;%r&quot; %s %b" prefix="localhost_access_log." suffix=".txt"/>

      </Host>
    </Engine>
  </Service>
</Server> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:02:05.827

问题解决了，首先我使用 netstat 查看是否有任何进程挂在那里。在那里发现了甲骨文。

然后我刚刚更新了 Oracle 的端口以指向另一个端口，现在它在默认端口中运行 Tomcat。

# javascript - filepicker.io Javascript API 调用导致不安全的 javascript 错误

> ID：15192466
> 
> 赞同：4
> 
> 时间：2013-03-03T23:59:24.700
> 
> 标签：javascript, angularjs, filepicker.io

我目前正在使用 AngularJS，我想从我的上传控制器调用 filePicker.pickAndStore。对 filepicker.io API 函数的任何调用都会导致“不安全的 Javascript 尝试”错误：

> 请求访问的帧具有“https”协议，被访问的帧具有“http”协议。Procols 必须匹配。

**Javascript**

```
angular.module('app').controller('UploadCtrl', ['$scope, function ($scope) {
    $scope.uploadFiles = function() {
        filepicker.pickAndStore({mimetype:'image/*'},{},function(files){console.log(files)},function(err){console.log(err)});
    }
}]); 
```

**HTML：**

```
<button type="button" ng-click="uploadFiles()">Upload</button> 
```

一旦我单击按钮并显示文件选择器模式，错误就会显示在控制台中。

我仍然可以选择和上传文件，但是我不知道为什么会出现这个错误，因为我在我的项目中包含了 http 文件选择器源。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:50:25.133

这是一个[已知的 chrome/webkit 问题](http://code.google.com/p/chromium/issues/detail?id=76748)。这发生在任何通过 JavaScript（filepicker 使用的技术）向自身添加 flash 标记的跨域 iframe 上。

文件选择器团队的最新消息：他们正在努力规避这个问题。

# macos - 通过 bash 中的 10 个文件迭代压缩过程

> ID：15192467
> 
> 赞同：0
> 
> 时间：2013-03-03T23:59:25.903
> 
> 标签：macos, bash, loops, iteration, batch-processing

嗨我想知道是否有人可以帮助我的编码，理论上我知道如何使用基本命令手动完成但是为了节省时间并提高效率我想使用 .sh 脚本手动完成它可能使用大量数据。

所以我的想法是我有 10 个文件，它们将被命名为 file_1.txt 到 file_10.txt，我想将 file_1 视为一种“培训”文件。因此将file_2附加到file_1，然后使用gzip压缩并保存在其他地方，我想它看起来像这样......

```
cat file_1.txt file_2.txt | gzip -c > newfile.gz 
```

但是下一步是对 file_3 到 file_1 和 zip 作为新文件执行相同的操作，然后将 file_4 到 file_1 等（你明白了）。

一旦使用file_1从_2运行到_10，我想对file_2执行相同的操作，并分别附加1、3、4、5、6、7、8和10并压缩等。

因此，最后我应该有 90 个单独的 zip 文件。（包括每个单独压缩的文件，即 file_1.gz、file_2.gz 等，作为比较我附加文件的参考）。

提前感谢任何提示或帮助。

Ps 提供的任何代码是否真的有效都没有关系，例如，一个接一个地分成 10 个不同的循环，如果清楚就可以了。我只是分析结果，而不是使用每个说的代码。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:27:33.560

使用循环：

```
for i in {1..10} ; do
    for j in {1..10} ; do
        if (( i != j )) ; then
            cat file_$i.txt file_$j.txt | gzip -c > newfile-$i-$j.gz
        fi
    done
done 
```

这会创建 90 个 gzip 文件，*不包括*每个自己压缩的文件。额外的 10 个 gzip 的创建留给读者作为练习。

# cordova - 带有 IOS 和 Phonegap 的 Web Audio API 导致从后台恢复时崩溃

> ID：15192468
> 
> 赞同：1
> 
> 时间：2013-03-03T23:59:32.553
> 
> 标签：cordova, uiwebview, web-audio-api

这可能是在黑暗中拍摄，但它是这样的：

我有一个使用 Phonegap 在 iPhone 上运行良好的 HTML5 游戏。

我使用 Web Audio API（从 ios 6 开始支持）添加了音频。这也很有效，除非我退出应用程序然后重新打开应用程序（从“后台”）。

恢复后，应用程序现在暂停然后崩溃。

### 其他一些信息

*   在使用 howler.js 音频框架后，我首先注意到了这一点。我删除了这个并尝试了 Web Audio API 的最基本的准系统示例，但问题仍然存在。

*   我正在 iOS 6.1.2 和 iPhone5 上使用 Phonegap 2.5.0 对此进行测试。

*   连接到xcode时由于某种原因无法通过xcode进行调试，应用程序仍然会在恢复时暂停但不会崩溃。（所以只有从主屏幕上的图标运行时才会崩溃）

*   我想我把它归结为`ctx.createBufferSource()`电话。

* * *

如果其他人有同样的经历甚至有解决方案，我很想听听！

谢谢
j。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:29:03.867

您是否尝试过让您的应用在后台播放音频？这将是一个很好的实验来确定您正在使用的音频 API 是否正在处理您的应用程序进入后台并从中恢复。在较低级别的音频 API 中，您需要正确执行几件事以避免崩溃。

无论如何，回到实验。为了允许您的应用在后台播放音频，请修改您的 .plist 文件，将“应用播放音频”项添加到“必需的背景模式”字典中。然后重建，重新测试。

如果这不能帮助您更好地理解问题，那么您将不得不使用一种流行的方法生成崩溃回溯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T22:43:00.180

更新到新版本的xcode，问题就消失了。

我相当有信心这不是电话差距问题，而是 xcode/ios 中的错误。

# php - php echo 和 require 语法

> ID：15192470
> 
> 赞同：2
> 
> 时间：2013-03-03T23:59:41.493
> 
> 标签：php, syntax, echo, require

如果这是一个不必要的问题，我提前道歉。

我四处寻找有关 php echo 和 require 函数的语法，并且多个页面有不同的答案。但是，每个版本的语法都有效。

我想知道的是这些版本中是否有任何版本已过时，或者其中一个版本的性能是否略好于另一个版本。

```
<?php echo($variable); ?>
<?php echo $variable ?>

<?php require('file.php'); ?>
<?php require 'file.php'; ?> 
```

我看到它们有括号，没有括号，有单引号，没有..等。

每个都有明确的语法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:02:14.327

`echo``require`不是，`functions`它们是`language constructs`不需要`parenthesis`的。

没有显着的性能差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T00:04:12.387

来自[PHP](http://php.net/manual/en/function.echo.php)文档`echo`

> [`echo`](http://php.net/manual/en/function.echo.php)实际上不是函数（它是一种语言结构），因此您不需要使用括号。echo（与其他一些语言结构不同）的行为不像函数，因此它不能总是在函数的上下文中使用。**此外，如果您想向 echo 传递多个参数，则这些参数不能用括号括起来。**

* * *

`echo`和都是`require`语言**结构**，同样适用于`require`、`include`和。`require_once``include_path`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-04T00:05:37.823

括号确实有所作为。您需要做的就是阅读精美的手册

[`echo`](http://php.net/manual/en/function.echo.php)

> 另外，如果你想传递多个参数给echo，参数不能用括号括起来

[`include`](http://php.net/manual/en/function.include.php)（同样适用`require`）

> 因为 include 是一种特殊的语言结构，所以它的参数不需要括号。比较返回值时要小心。

请参阅[示例 #4](http://php.net/manual/en/function.include.php#example-140)，了解它如何发挥作用。

我建议*不要*将括号与任一构造一起使用，因为它们施加的限制 ( `echo`) 以及对返回值的影响 ( `include`)

# http - 单个请求请求过大或过多资源时的 HTTP 状态代码

> ID：15192477
> 
> 赞同：28
> 
> 时间：2013-03-03T23:59:57.193
> 
> 标签：http, rest, http-status-codes, restful-architecture

有人知道哪种 HTTP 状态码适合以下情况吗？

匿名客户端可以使用`GET /collection/?range_start=100&range_end=200`. 示例查询返回一个包含 100 个项目的列表（在 JSON 中）。对于客户可以请求的项目数量也有限制，比如说 300。例如，如果客户端询问 [100, 1100] 范围内的 1000 个项目，响应状态代码应该是什么意思是 700 个项目超出限制？

应该是 400 Bad Request、403 Forbidden、409 Conflict、416 Requested Range Not Satisfiable(?) 还是 422 Unprocessable Entity？你会推荐什么？

一个相关问答提出409但情况略有不同： [https ://stackoverflow.com/a/13463815/638546](https://stackoverflow.com/a/13463815/638546)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-04T00:20:40.140

403 听起来是最合适的选择。它基本上说“nu-uh。你看不到那个。”，这几乎就是这种情况。

> ### [10.4.4 403 禁止](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.4)
> 
> **服务器理解请求，但拒绝执行。** 授权将无济于事，并且不应重复请求。[...]

当然，响应正文中包含您拒绝请求的*原因是个好主意。*

在我看来，所有其他代码都有特定的含义，无法在这里使用它们。

**400**不太合适，因为请求有效，你理解就好了；它只是要求比你愿意一次发送的更多。

**409**不合适，因为它与资源的“状态”特别相关。（这适用于您链接的问题，因为在这种情况下，错误是添加到已经“满”的集合中。但是，在您的情况下，不是资源有问题；而是请求。）另外，

> 仅在预期用户可能能够解决冲突并重新提交请求的情况下才允许使用此代码。

其中“重新提交”标准意味着“重复”。在这种情况下，无论客户端做什么，该请求都是无效的。

**416**专门指“范围”标头，因此完全不存在。

**417**同样指的是标题字段（在本例中为“Expect”），因此它同样被排除在外。

**422**不合适，因为它特别表示您发送了一个语法正确但仍然损坏的*实体。*由于 GET 传统上没有请求正文（没有实体），因此没有什么是不可处理的。如果客户端正在发布请求，您可能几乎有一个案例......但是，您还必须说明为什么 RESTful API 需要一个不更新任何内容的 POST。

（我大约有 47% 的人确信代码在 WebDAV 之外也没有多大意义……但似乎确实有可以想象的用例。只是不是这个。）

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-04T00:12:48.637

这应该总是产生 400 系列客户端错误。究竟哪个错误是由 API/CGI 开发人员选择的。我希望是 405、406、416 或 'catch-all' 417。api 开发人员可以控制这些错误消息的文本（正文）以包含更多有用的信息。

# git - 如何在 GitBash 中禁用 SSH 并改用 HTTPS

> ID：15192485
> 
> 赞同：6
> 
> 时间：2013-03-04T00:00:52.880
> 
> 标签：git, https, ssh

我在连接到 Bitbucket 时正在使用 SSH，突然 Bitbucket 使用的端口 22 被阻止，所以我决定改用 HTTPS 选项。如何在 git bash 中禁用 ssh 并改用 HTTPS？我已经重新安装了 git，但它仍然使用 SSH/Putty 进行连接。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T00:04:49.163

它不在 git 设置中，而是在您的存储库设置中。

您需要更改远程存储库的地址并指定`https://`协议

```
git remote set-url origin <repo-https-url> 
```

但是，使用 https，您必须在每次推/拉操作时输入密码，但请参阅[在 GitHub 上使用 https:// 时是否可以跳过密码输入？](https://stackoverflow.com/q/5343068/11343).

# html - 突出显示文本时如何防止看到溢出？

> ID：15192488
> 
> 赞同：0
> 
> 时间：2013-03-04T00:01:07.627
> 
> 标签：html, overflow

在下图中，我的代码在左侧，我的输出在右侧。在 div 中，我只允许 y-overflow，并将 x-overflow 设置为隐藏，并将 x-overflow 替换为省略号。如您所见，我能够在输出框中实现此结果。

但是，如果我在输出框 div 中单击并突出显示“dddd...”部分的文本，然后向右拖动，我可以看到省略号右侧的所有这些空白区域。也就是说，我可以突出显示文本并拖动，以查看 div 中的空白溢出。有没有办法防止这种情况发生？

![在此处输入图像描述](../Images/3bcf28dfbb7a07c1fc3088548a61e799.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:09:24.183

我可以“突出显示”框中的文本并将其“拖动”到右侧以查看“x-overflow”的原因是因为我使用的是浏览器 google chrome。由于某种原因，当我使用浏览器“firefox”时，问题消失了。

（如果有人可以建议如何解决 chrome 中的问题，请发布答案。）

# android - AdMob 中介不会产生展示次数

> ID：15192490
> 
> 赞同：1
> 
> 时间：2013-03-04T00:01:21.193
> 
> 标签：android, admob, inmobi, mobile-ad-mediation

我使用 AdMob 在我的 Android 应用中展示他们的广告，效果很好。我决定尝试使用 AdMob 进行广告中介。我遵循他们的指导方针，在 InMobi 中注册了一个帐户，并设置了我应该做的一切（我猜）。但是现在展示广告没有区别。我的意思是我仍然从谷歌获得广告，而且只来自谷歌（就像之前一样）。InMobi 和 AdMob 表明我没有产生任何印象，而且我不知道哪里出了问题。

作为记录，我在布局中更改了我的“ads:adUnitId”，应用程序在市场上的时间超过 24 小时并产生了一些点击，LogCat 中只有一个奇怪的错误（无法找到 com.google.plus.platform 的提供商信息) 并且 InMobi 正在 LogCat 中打印一些响应。

来自 InMobi 的示例响应：

```
InMobiAndroidSDK_3.6.2 : requestactivity=AdRequest&tp=c_gwhirl&u-rt=0&d-device-screen-density=1.5&d-device-screen-size=480X854&mk-siteid=a84ad8be300942ef8d356180085f8a41&u-id-map=uoJf3VOg5BXq327SMdvB5HwqkNA3jxHbj5FTAQhhpjIvzCnyMm%2BbQ3gGYv6%2BFukANGHv9uZdrfum%0AMcqlu8fqSw%3D%3D%0A&u-id-key=-991818964&u-key-ver=1&aid=bd3df942-9b44-49db-a8ed-798012f10bbb&mk-version=pr-SAND-DTGTC-20121219&mk-rel-version=3.6.2&format=xhtml&mk-ads=1&h-user-agent=Mozilla%2F5.0+%28Linux%3B+U%3B+Android+2.3.4%3B+en-gb%3B+LT18i+Build%2F4.0.2.A.0.62%29+AppleWebKit%2F533.1+%28KHTML%2C+like+Gecko%29+Version%2F4.0+Mobile+Safari%2F533.1&u-appBId=counterpicks.leagueoflegends&u-appDNM=LoL+Counter+picker&u-appVer=1.12&d-localization=en_gb&d-netType=wifi&d-orientation=1&mk-ad-slot=15

InMobiAndroidSDK_3.6.2 : Ad Response: <AdResponse><Ads></Ads></AdResponse> 
```

所以我想这是一个正常的、有效的反应。

不知道为什么调解不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T14:51:31.570

事实证明，等待 24 小时是不够的。大约 48 小时后，一切开始工作。

# php - 使用输出 php/wordpress 从 post 到 supersized 获取 imgs

> ID：15192492
> 
> 赞同：-1
> 
> 时间：2013-03-04T00:01:38.340
> 
> 标签：php, jquery, wordpress, supersized

我有 WordPress，我需要包含 Supersized，但我遇到了关于图像的问题。

我需要通过 PHP 将多个字符串（基于帖子的数字图像）制作成 jQuery 代码：

```
{image : 'http://....jpg'}, 
```

例如，这是帖子，图像容器：

```
<div id="container_post">
<img src="http:....jpg" />
<img src="http:....jpg" />
</div> 
```

并且，通过 PHP，我需要将多个字符串放入 tag `slides:[]`：

```
<script>
[...]

Slides :[
   {image : 'http:....jpg'},
   {image : 'http:....jpg'},
]

[...]
</script> 
```

* * *

我已将此代码放入页面 php。

我需要通过 php 使用这个字符串从这篇文章中获取图像`query_posts('page_id=170');`。

```
 <script type="text/javascript">

                jQuery(function($){

                    $.supersized({

                        // Functionality
                        slideshow               :   1,          // Slideshow on/off
                        autoplay                :   1,          // Slideshow starts playing automatically
                        start_slide             :   1,          // Start slide (0 is random)
                        stop_loop               :   0,          // Pauses slideshow on last slide
                        random                  :   0,          // Randomize slide order (Ignores start slide)
                        slide_interval          :   3000,       // Length between transitions
                        transition              :   5,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                        transition_speed        :   1000,       // Speed of transition
                        new_window              :   1,          // Image links open in new window/tab
                        pause_hover             :   0,          // Pause slideshow on hover
                        keyboard_nav            :   1,          // Keyboard navigation on/off
                        performance             :   1,          // 0-Normal, 1-Hybrid speed/quality, 2-Optimizes image quality, 3-Optimizes transition speed // (Only works for Firefox/IE, not Webkit)
                        image_protect           :   1,          // Disables image dragging and right click with Javascript

                        // Size & Position                         
                        min_width               :   0,          // Min width allowed (in pixels)
                        min_height              :   0,          // Min height allowed (in pixels)
                        vertical_center         :   1,          // Vertically center background
                        horizontal_center       :   1,          // Horizontally center background
                        fit_always              :   0,          // Image will never exceed browser width or height (Ignores min. dimensions)
                        fit_portrait            :   1,          // Portrait images will not exceed browser height
                        fit_landscape           :   0,          // Landscape images will not exceed browser width

                        // Components                           
                        slide_links             :   'blank',    // Individual links for each slide (Options: false, 'num', 'name', 'blank')
                        thumb_links             :   0,          // Individual thumb links for each slide
                        thumbnail_navigation    :   0,          // Thumbnail navigation
                        slides : [ 
                                      {image : 'http://....jpg'},
                                      {image : 'http://....jpg'},
                                      etc

] , 

                        // Theme Options               
                        progress_bar            :   1,          // Timer for each slide                         
                        mouse_scrub             :   0

                    });
                });

            </script> 
```

我想每个图像生成相同的字符串`{image : 'http://....jpg'},`，成行`slides: []`

* * *

我看到了这个旧代码......但它只有缩略图......我需要图像和多个字符串。

```
 slides : [  <?php
        if ( have_posts() ) {
            $post_array = Array();
            while ( have_posts() ) {
                the_post();
                $thumb = get_post_meta($post->ID,'_thumbnail_id',false); 
                $thumb = wp_get_attachment_image_src($thumb[0], false); 
                $thumb = $thumb[0]; 
                if ( has_post_thumbnail() ) {
                    $post_array[] = "{image : '".$thumb."'}";
                } 
            }
            echo implode(",",$post_array);
        }
    ?> }, 
```

全部进入字符串：`slides : []`

* * *

我有问题。

我需要插入 imgs 的标题：

例如：

```
{image : 'http://***.jpg', title : 'title_img'} 
```

你能帮我怎么做吗？

ps：我有这个修改后的代码：

```
<script type="text/javascript">

            jQuery(function($){
                var imagesArray = [
                <?php 
                function foo($anArray){
                foreach($myimages as $img){
                    echo "\{image : '".$img."'\},";
                }
                }?>
                ];
                $('#container_post img').each(function(){
                    var obj = {};
                    obj.image = this.src ;
                    imagesArray.push(obj);
                });
                $.supersized({

                    // Functionality
                    slideshow               :   1,          // Slideshow on/off
                    autoplay                :   1,          // Slideshow starts playing automatically
                    start_slide             :   1,          // Start slide (0 is random)
                    stop_loop               :   0,          // Pauses slideshow on last slide
                    random                  :   0,          // Randomize slide order (Ignores start slide)
                    slide_interval          :   5000,       // Length between transitions
                    transition              :   6,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                    transition_speed        :   1000,       // Speed of transition
                    new_window              :   1,          // Image links open in new window/tab
                    pause_hover             :   0,          // Pause slideshow on hover
                    keyboard_nav            :   1,          // Keyboard navigation on/off
                    performance             :   1,          // 0-Normal, 1-Hybrid speed/quality, 2-Optimizes image quality, 3-Optimizes transition speed // (Only works for Firefox/IE, not Webkit)
                    image_protect           :   1,          // Disables image dragging and right click with Javascript

                    // Size & Position                         
                    min_width               :   0,          // Min width allowed (in pixels)
                    min_height              :   0,          // Min height allowed (in pixels)
                    vertical_center         :   1,          // Vertically center background
                    horizontal_center       :   1,          // Horizontally center background
                    fit_always              :   0,          // Image will never exceed browser width or height (Ignores min. dimensions)
                    fit_portrait            :   1,          // Portrait images will not exceed browser height
                    fit_landscape           :   0,          // Landscape images will not exceed browser width

                    // Components                           
                    slide_links             :   'blank',    // Individual links for each slide (Options: false, 'num', 'name', 'blank')
                    thumb_links             :   0,          // Individual thumb links for each slide
                    thumbnail_navigation    :   0,          // Thumbnail navigation
                        slides : imagesArray 
, 

                    // Theme Options               
                    progress_bar            :   1,          // Timer for each slide                         
                    mouse_scrub             :   0

                });
            });

        </script> 
```

谢谢你，弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:19:31.953

基本上在你看来：

```
<script>
$(document).ready(function(){
var imagesArray = [
<?php
  foreach($myimages as $img){
    echo "\{image : '" . $img . "'\},";
  }
?>
];
    api.options.slides = imagesArray;
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:46:53.827

基本上，您需要创建一个数组，该数组将保存带有图像路径值的对象键“图像”：

```
var imagesArray = [];

$('#container_post img').each(function(){
    var obj = {};
    obj.image = this.src ;
    imagesArray.push(obj);
});

// console.log( JSON.stringify(imagesArray) );  // UNCOMMENT TO TEST IN CONSOLE

// USE LIKE:
$.supersized({
    slides : imagesArray 
}); 
```

# javascript - 获取 Backbone.View 中模板的计算 CSS 属性

> ID：15192494
> 
> 赞同：4
> 
> 时间：2013-03-04T00:02:13.533
> 
> 标签：javascript, backbone.js, backbone-views

**是否可以在不**将其附加到**DOM**的情况下获得**渲染的**模板计算的 CSS 值？

 ****我对 Backbone.View $el CSS 值和一种预先计算它的属性（如宽度和高度）而不将它们附加到 DOM 的方法感兴趣。

**如果那不可能**，

计算渲染模板的目标值以便它们可以与 jQuery.animate 一起使用的最佳方法是什么？

例如，淡入/淡出功能将成为 View 扩展方法的一部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:37:41.657

我认为除了执行插入隐藏元素、进行测量然后删除它的艰巨任务之外，你最好的选择是使用：

```
window.getComputedStyle 
```

[文档](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)（[https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)）

然后在您的视图中设置方法，如下所示：

```
fadeIn : function (event) {
    var rootElement = this.$el.get(0);
    var cssStyles = window.getComputedStyle(rootElement, null);
    var rootElementHeight = cssStyles.getPropertyValue("height");
    var rootElementWidth = cssStyles.getPropertyValue("width");

    // perform fadeIn animation     
},

fadeOut : function (event) {
    var rootElement = this.$el.get(0);
    var cssStyles = window.getComputedStyle(rootElement, null);
    var rootElementHeight = cssStyles.getPropertyValue("height");
    var rootElementWidth = cssStyles.getPropertyValue("width");

    // perform fadeOut animation     
}, 
```

这并不理想，返回的高度和宽度只是应用于该元素的最终 CSS 规则的表示。因此，当元素实际呈现在页面上时，实际高度和宽度完全有可能发生变化。

希望这可以帮助！****

# php - 在 php 中选择 WHERE x = $array[index]?

> ID：15192497
> 
> 赞同：2
> 
> 时间：2013-03-04T00:02:22.940
> 
> 标签：php, mysql, select

我已经尝试寻找我的问题的答案，但似乎没有其他人遇到过这个问题！我基本上是在尝试使用 WHERE 语句在 php 中进行选择，我想将我的 $ID 与存储在一个名为 $resultAddID2 的数组中的变量进行比较。该数组具有值 [1,2,1]；如果我尝试访问 $resultAddID2[0] 它可以正常工作，但如果我尝试使用 $resultAddID2[1] 或 $resultAddID2[2] 它根本不起作用！我敢肯定这很愚蠢，但对于我的生活，我就是想不通！任何帮助将不胜感激，谢谢。

这是我尝试执行此操作的部分：

```
$resultAddID = mysql_query("SELECT ADDRESS_ID FROM hospital");

while($resultAddID1=mysql_fetch_array($resultAddID)){

$resultAddID2[]=$resultAddID1['ADDRESS_ID'];

for ($i = 0; $i <= 2; $i++) {
$resultAddT = mysql_query("SELECT * FROM address WHERE ID = $resultAddID2[]");
$resultAddTm= mysql_fetch_array($resultAddT);
$resultAddT2[]=$resultAddTm['GOVER_ID'];

}
}
$response["hospADD"]= $resultAddT2; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:14:38.243

你应该添加`{}`'喜欢

```
$resultAddT = mysql_query("SELECT * FROM address WHERE ID = {$resultAddID2[$i]}"); 
```

如果您这样做会更好，因为您查询第二项的次数太多了

```
$resultAddID = mysql_query("SELECT ADDRESS_ID FROM hospital");

while($resultAddID1=mysql_fetch_array($resultAddID)){
    $resultAddID2[]=$resultAddID1['ADDRESS_ID'];
}
for ($i = 0; $i <= 2; $i++) {
    $resultAddT = mysql_query("SELECT * FROM address WHERE ID = {$resultAddID2[$i]}");
    $resultAddTm= mysql_fetch_array($resultAddT);
    $resultAddT2[] = $resultAddTm['GOVER_ID'];

}
$response["hospADD"]= $resultAddT2; 
```

或者更简单：

```
$resultAddID = mysql_query("SELECT ADDRESS_ID FROM hospital");
while($resultAddID1=mysql_fetch_array($resultAddID)){
    $resultAddT = mysql_query("SELECT * FROM address WHERE ID = {$resultAddID1['ADDRESS_ID']}");
    $resultAddTm= mysql_fetch_array($resultAddT);
    $resultAddT2[] = $resultAddTm['GOVER_ID'];
}
$response["hospADD"]= $resultAddT; 
```

# php - php 检查用户计算机上的目录

> ID：15192500
> 
> 赞同：0
> 
> 时间：2013-03-04T00:03:01.610
> 
> 标签：php, file, directory

是否可以在不知道目录的情况下检查用户计算机上的目录？我想编写一个 php 程序，让我可以查看我的 Skype 照片，但每台计算机都有不同的文件目录，具体取决于计算机上的帐户名。文件目录：

```
C:\Users\compUser\AppData\Roaming\skype\Pictures 
```

我正在寻找类似的功能；如果我们要在 Windows pc 上执行运行命令，您可以键入`%appdata%\skype\pictures`并弹出文件目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:07:38.817

PHP 是一种服务器端语言，它只能浏览自己服务器上的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:07:46.493

出于安全考虑，您无法访问本地用户 pc 目录，您只能访问服务器目录（运行 php 的位置）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T15:03:26.593

PHP 是一种服务器端语言，它只能浏览自己服务器上的文件。并且您无法在没有输入的情况下从计算机访问任何文件到 php 服务器

# excel - excel - vba - userform - frame - 设置滚动条位置

> ID：15192502
> 
> 赞同：6
> 
> 时间：2013-03-04T00:03:06.313
> 
> 标签：excel, scrollbar, excel-2010, userform, vba

如何设置框架的滚动条位置（在用户窗体内）？

案子：

我在用户窗体中有一个具有动态内容的框架。因此，如果内容太大而无法容纳框架，它会（动态地）在该框架中创建一个滚动条。滚动条还具有动态值，遵循帧内容大小。

更新滚动条的代码如下：

```
With userform1.frame1
    'dynamic size
    .ScrollHeight = param1 * param2
    .ScrollWidth = .InsideWidth * 30
End with 
```

所以我想要一些东西将滚动条发送到底部位置！我怎么做？提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T01:40:24.290

设置 ScrollHeight 和 ScrollWidth 并仍在`With`块内尝试：

`.Scroll ActionX:=fmScrollActionNoChange, ActionY:=fmScrollActionEnd`

更多细节可以在[这里找到](http://msdn.microsoft.com/en-us/library/office/gg264840%28v=office.14%29.aspx)

# ruby - 生成所有可能的字符串组合，包括给定长度的重复？

> ID：15192503
> 
> 赞同：0
> 
> 时间：2013-03-04T00:03:08.813
> 
> 标签：ruby, string, combinations

`a`我需要`z`根据长度生成所有可能的字母组合。我知道我可以这样做：

```
('a'..'z').to_a.repeated_combination(2).map(&:join) 
```

但问题是删除了重复项。如果长度为 2，我需要 to 之间`aa`的所有内容`zz`，包括`ab`and`ba`等。我知道这是一个简单的过程，但我无法得到它，而且我的 Google fu 已关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:17:31.247

在这种情况下，您需要`repeated_permutation`改用。[数组排列](http://apidock.com/ruby/v1_9_3_125/Array/repeated_permutation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T00:20:22.820

怎么样：

```
('aa'..'zz').to_a 
```

缩短版本如下所示：

```
'aa'..'bb').to_a
[
    [0]“啊”，
    [1] "ab",
    [2]“交流”，
    [3]“广告”，
    [4] “AE”，
    [5]“AF”，
    [6] “ag”，
    [7]“啊”，
    [8]“爱”，
    [ 9] “阿杰”，
    [10] “阿克”，
    [11] “人”，
    [12] “我”，
    [13] “一个”，
    [14] “奥”，
    [15] “AP”，
    [16] “水”，
    [17] “阿尔”，
    [18] “作为”，
    [19] “在”，
    [20] “非”，
    [21] “av”，
    [22] “啊”，
    [23] “斧头”，
    [24] “啊”，
    [25] “阿兹”，
    [26] “巴”，
    [27] “bb”
]

```

* * *

编辑：

> ...我根据长度生成。

然后使用长度。

```
长度 = 2
(('a' * 长度) .. ('z' * 长度)).to_a

```

这是生成组合的一种非常快速的方法：

```
require 'benchmark'

N = 1_000

1.upto(3) do |length|
  puts %Q[Length: #{ length }, generating "#{ 'a' * length }" to "#{ 'z' * length }"]
  Benchmark.bm(11) do |b|
    b.report('permutation') { N.times { ('a'..'z').to_a.repeated_permutation(length).map(&:join) }}
    b.report('range') { N.times { (('a' * length) .. ('z' * length)).to_a }}
  end
end 
```

哪个输出：

```
Length: 1, generating "a" to "z"
                  user     system      total        real
permutation   0.030000   0.000000   0.030000 (  0.028286)
range         0.010000   0.000000   0.010000 (  0.009942)
Length: 2, generating "aa" to "zz"
                  user     system      total        real
permutation   0.500000   0.010000   0.510000 (  0.504663)
range         0.240000   0.000000   0.240000 (  0.240362)
Length: 3, generating "aaa" to "zzz"
                  user     system      total        real
permutation  15.350000   0.140000  15.490000 ( 15.535756)
range         6.200000   0.000000   6.200000 (  6.221575) 
```

“排列”的时间比我愿意等待的时间长`4`。随意在您自己的机器上运行基准测试。

# ruby-on-rails - Rails Active Record：根据连接结果修改和保存对象的子对象？

> ID：15192508
> 
> 赞同：1
> 
> 时间：2013-03-04T00:03:32.430
> 
> 标签：ruby-on-rails, activerecord, join, rails-activerecord, arel

所以这：

```
p = Person
.joins('join organization o on o.id = organization_id')
.where('o.id' => 1)
.select('person.*')
.first!

p.name = 'hi!'
p.save! 
```

按预期工作，保存人的名字。但是，我该怎么做：

```
p.organization.name = 'bye!'
p.save! 
```

我无法找出正确的投影来映射组织字段（或者如果可能的话）。我试过'*'和'organization.name as "person.organization.name"'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:19:19.973

为了使您所做的工作正常工作，您必须在关联中将`autosave`选项设置为 true 。`belongs_to :organization`

```
belongs_to :organization, autosave: true 
```

或者只是在组织上调用保存

```
p.organization.name = 'Org Name'
p.organization.save 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:15:45.727

您必须在您的 Person 类中声明关联，使用 belongs_to has_one has_many has_many :through has_one :through 或 has_and_belongs_to_many，Rails 将自行连接并将您的两个类链接在一起。

让我在这里粘贴一段 Rails 指南：

通过 Active Record 关联，我们可以 [..] 告诉 Rails 这两个模型之间存在联系。这是用于设置客户和订单的修改后的代码：

```
class Customer < ActiveRecord::Base
  has_many :orders, :dependent => :destroy
end

class Order < ActiveRecord::Base
  belongs_to :customer
end 
```

通过此更改，为特定客户创建新订单变得更加容易：

```
@order = @customer.orders.create(:order_date => Time.now) 
```

我建议你在这里阅读完整的指南：http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

# sql - 将撇号连接到 oracle sql 查询

> ID：15192509
> 
> 赞同：-1
> 
> 时间：2013-03-04T00:03:44.607
> 
> 标签：sql, concat, apostrophe

大家好，我正在寻找一些关于如何在第一列的查询结果中添加撇号的指示。

我目前的查询：

```
set verify off
set colsep "',"
set pagesize 2000
ALTER SESSION SET NLS_DATE_FORMAT='DD-MON-YY-HH24:MI:SS';
spool /home/user/out.txt

select '[' || table1.collectdatetime as "['Date-Time",table1.cycletime as "'Time'" from table1 where interfacename='somename' and collectdatetime > (CURRENT_DATE - 1)
order by collectdatetime ASC; 
```

结果：

```
['Date-Time        ','InCycleTime'
-------------------',-------------
[02-MAR-13-17:56:16',           29 
```

我正在努力让结果返回并在 [ 之后添加撇号

```
['Date-Time        ','InCycleTime'
-------------------',-------------
['02-MAR-13-17:56:16',           29 
```

* * *

这是针对 oracle 11.1.0.7 构建的。正在查询和解析数据，但我需要解决撇号问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:28:11.627

用这个：

```
select '[''' || table1.collectdatetime as "['Date-Time",table1.cycletime as "'Time'" from table1 where interfacename='somename' and collectdatetime > (CURRENT_DATE - 1)
order by collectdatetime ASC; 
```

# javascript - 为什么ngResource在收到响应后将保存的对象修改为：g {0：“O”，1：“K”，..}

> ID：15192511
> 
> 赞同：2
> 
> 时间：2013-03-04T00:04:21.603
> 
> 标签：javascript, rest, angularjs

我有一个这样定义的默认 ngResource：

```
var Posts = $resource('/posts/'); 
```

在我从我的 nodejs 服务器收到一篇博文后，如下所示：

```
$scope.post = Posts.get({_id:query._id}); 
```

用户对其进行了一些更改，然后我调用：

```
$scope.post.$save(); 
```

服务器返回响应码 200 后，我的 $scope.post 如下所示：

```
g {0: "O", 1: "K", $get: function, $save: function, $query: function, $remove: function, $delete: function} 
```

为什么？有什么原因吗？字母“O”和“K”是否应该表示操作成功并返回响应 200？我是否能够在不从头开始编写自己的保存方法的情况下修改此行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T00:24:26.087

在这种情况下，对资源（$get、$save 等）使用实例方法将使用从服务器返回的任何内容更新实例（$scope.post）。

但我认为这里的问题比这要大一些。您的 $resource 定义不会对 .get() 方法上的 ID 属性做任何事情，因为它不在 URL 配置中。因此，服务器可能返回了一个帖子数组，因为您访问了“/posts”资源。当你执行 $save() 方法时，Angular 从一个数组开始，因此获取返回“OK”的字符串并在 $scope.post 中创建项目以匹配这些字符。

以下是您应该更改的内容：

```
var Posts = $resource('/posts/:_id'); 
```

然后：

```
$scope.post = Posts.get({_id: query._id}); 
```

现在您可以致电：

```
$scope.post.$save(); 
```

唯一的问题是，如果您的服务器在正文中返回“OK”，您的 $scope.post 现在将被返回数据所震撼。解决此问题的选项是：

1.  从服务器只返回状态码，不返回正文。我认为 RESTful API 是 204，这意味着客户端版本不需要更新。

2.  如果客户端版本需要更新（如服务器上生成的新时间戳），则返回 200 并返回更新后的 Post 对象的完整主体。

3.  如果无法进行上述调整，请使用服务级别方法而不是实例方法：

    Posts.save({_id: query._id} , post);

# javascript - 在javascript中使图像可点击到下一个图像

> ID：15192516
> 
> 赞同：0
> 
> 时间：2013-03-04T00:04:48.390
> 
> 标签：javascript, css, image, hyperlink, clickable

我的网站上有一个上一个/下一个链接，可让我使用以下代码浏览图像： `<a href="JavaScript:previousImage()">Previous</a> | <a href="JavaScript:nextImage()">Next</a> <span id='num'></span>`

我已将图像放在下面的代码中。上一个/下一个链接工作得很好，但我希望能够单击图像本身导航到下一个图像：所以单击 1.jpg 然后转到 2.jpg 等等，一旦单击 5.jpg 就可以了回到 1.jpg。请告知，提前感谢您的帮助。我是一个盲目地建立我的网站的初学者，非常感谢任何帮助。

```
<script type="text/javascript">

var image = new Array("jpegs/1.jpg",
"jpegs/2.jpg",
"jpegs/3.jpg",
"jpegs/4.jpg",
"jpegs/5.jpg"
)

var imgNumber=1

var numberOfImg = image.length

function previousImage(){
  if(imgNumber > 1){
    imgNumber--
    }

  else{
    imgNumber = numberOfImg
    }

document.slideImage.src = image[imgNumber-1]

  }
function nextImage(){
  if(imgNumber < numberOfImg){
    imgNumber++
    }

  else{
    imgNumber = 1
    }

document.slideImage.src = image[imgNumber-1]

  }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:07:46.300

怎么样：

```
document.slideImage.onclick = nextImage; 
```

我还建议使用事件注册（也用于锚点）：

```
document.slideImage.addEventListener('click', nextImage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:35:39.957

我不建议使用`href="Javascript:function()"`，所以让您了解如何处理它......

```
<script type="text/javascript">
  window.onload = function() {
    var n = 0;
    var src = ["jpegs/1.jpg", "jpegs/2.jpg", "jpegs/3.jpg", "jpegs/4.jpg", "jpegs/5.jpg"];
    var e = document.getElementById('slideImage');
    var prev = function() {
      n -= 1;
      if(n < 0) n = src.length - 1;
      e.setAttribute('src', src[n]);
    };        
    var next = function() {
      n += 1;
      if(n >= src.length) n = 0;
      e.setAttribute('src', src[n]);
    };
    e.onclick = next;
    document.getElementById('nextlink').onclick = next;
    document.getElementById('prevlink').onclick = prev;
  };
</script> 
```

此方法不会将变量写入`window`（不包括`onload`），只需要一个`id`属性。

# android - Android上的SDL2，如何捕捉onResume事件？

> ID：15192520
> 
> 赞同：2
> 
> 时间：2013-03-04T00:05:02.783
> 
> 标签：android, android-ndk, sdl, activity-lifecycle

我正在尝试在 Android 上使用简单的 SDL2 制作一些项目。

我首先尝试编译存档中给出的示例`tesgesture.c`，您可以[在此处查看代码](http://cgit.freedesktop.org/~bnf/sdl-wayland/tree/test/testgesture.c?id=794c5cb3ee58b4d790ebd1e87da60b40e646609c)。

它在我的 Android 手机上运行良好，但每当我暂停应用程序（启动另一个，无论如何），当我恢复它时，应用程序冻结并停止响应（我认为这是因为我们还没有返回 SDL 线程）。

我发现这是一个常见问题，但没有找到任何明确的解决方案。

我尝试应用[此补丁](http://www.union.org.pl/download/sdl/)并将这些事件添加到我的开关：

```
case SDL_SYSEVENT_TERMINATE:
case SDL_SYSEVENT_SUSPEND:
case SDL_SYSEVENT_RESUME :
case SDL_SYSEVENT_WILL_RESUME :
case SDL_SYSEVENT_WILL_SUSPEND: 
```

但它不会改变任何东西。

我还看到，当应用程序置于后台时，事件似乎`SDL_WINDOWEVENT_MINIMIZED`是`SDL_WINDOWEVENT_FOCUS_LOST`发送的，所以我测试了：

```
case SDL_WINDOWEVENT:
    if (event.window.event == SDL_WINDOWEVENT_MINIMIZED ||
            event.window.event == SDL_WINDOWEVENT_FOCUS_LOST) {
        SDL_Quit();
        return 1;
    }
    break; 
```

没有更多的成功。

那么有人知道如何捕捉这些事件吗？

# joomla - Joomla 分页 URL 不包括 view=viewname

> ID：15192523
> 
> 赞同：0
> 
> 时间：2013-03-04T00:05:23.017
> 
> 标签：joomla, pagination

我在自定义 Joomla 组件上设置了分页。为了避免冗长的解释，我们做了一些复杂的 iframe 嵌入和前向掩码。这是组件前端的分页。

在我的 iframe 中，我有一个小狗列表（来自自定义组件）。它是分页的。为了让小狗在 iframe 中正确显示，它必须具有 URL：

[http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-2.html?tmpl=component&view=microsite](http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-2.html?tmpl=component&view=microsite)

但是，当我实际单击第 2 页的分页链接时，它会删除导致问题的 view=microsite。我该如何调整它以使其不会删除 view=microsite？

原始网址是[http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-1.html?tmpl=component&view=microsite](http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-1.html?tmpl=component&view=microsite)

这个分页的代码很长，在模型、视图和 view.html.php 之间，所以我似乎很难发布所有相关代码。这里有一些我一直在寻找的地方。

关于在哪里/如何做到这一点的任何想法或提示？

谢谢扎克

```
// Get the pagination request variables
    $limit      = $app->input->get('limit', $params->get('display_num', 20), 'uint');
    $limitstart = $app->input->get('limitstart', 0, 'uint');

    $this->setState('puppies.limit', $limit);
    $this->setState('puppies.limitstart', $limitstart);

    // Load the parameters.
    $this->setState('params', $params);
    }           

/** Method to get a store id based on the model configuration state. **/
protected function getStoreId($id = '')
    {
    // Compile the store id.
    $id .= ':' . $this->getState('puppies.breed_alias');
    $id .= ':' . $this->getState('puppies.limit');
    $id .= ':' . $this->getState('puppies.limitstart');
    $id .= ':' . serialize($this->getState('puppies.filter'));
    $id .= ':' . $this->getState('puppies.featured');

    return parent::getStoreId($id);
    }

/** Method to get a JPagination object for the data set. **/
public function getPagination()
    {
    // Create the pagination object.
    $limit = (int) $this->getState('puppies.limit');
    $page = new JPagination($this->getTotal(), $this->getStart(), $limit);

    return $page;
    }

/** Method to get the total number of items for the data set. **/
public function getTotal()
    {
    return $this->items_total;
    }

/** Method to get the starting number of items for the data set. **/
public function getStart()
    {
    $start = $this->getState('puppies.limitstart');
    $limit = $this->getState('puppies.limit');
    $total = $this->getTotal();
    if ($start > $total - $limit)
        {
        $start = max(0, (int) (ceil($total / $limit) - 1) * $limit);
        }

    return $start;
    } 
```

同样，这里有一部分代码，但我不知道要开始发布什么来回答这个问题，所以请我发布任何代码，但指向正确的方向，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:14:26.057

在该视图的“管理表单”底部的某处，应该有提交视图/控制器/令牌的所有隐藏输入。

像这样的东西：

```
 <input type="hidden" name="option" value="com_puppies" />
            <input type="hidden" name="view" value="microsite" />
            <input type="hidden" name="task" value="" />
            <input type="hidden" name="boxchecked" value="0" />
            <inupt type="hidden" name="controller" value="microsite" />
            <input type="hidden" name="filter_order" value="<?php echo $this->escape($this->state->get('list.ordering')); ?>" />
            <input type="hidden" name="filter_order_Dir" value="<?php echo $this->escape($this->state->get('list.direction')) ?>" />
            <?php echo JHtml::_('form.token'); ?> 
```

随意删除您不会使用的输入（即，如果您以不同方式处理，则为 filter_order ）。最重要的是视图输入。此外，如果您没有为该视图使用控制器（这意味着您正在使用该组件的默认控制器），请保留控制器输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:57:20.560

你能给这个链接[http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-1.html?tmpl=component&view=microsite](http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-1.html?tmpl=component&view=microsite)没有 SEF 吗？您可以尝试使用此类代码创建文件 /templates/{$your_template}/html/pagination.php

```
<?php
function pagination_item_active(&$item){
    $getData = new JInput($_GET);
    $view = $getData->get('view','','string');
    $link_part = ($view == 'microsite' ? '&view=microsite' : '');
    $link = "<a title=\"" . $item->text . "\" href=\"" . $item->link.$link_part  . "\" class=\"pagenav2\">" . $item->text . "</a>";
    return $link;
}

function pagination_item_inactive(&$item){
    return "<span class=\"pagenav\">" . $item->text . "</span>";
} 
```

另外我认为您的问题链接不正确。你是如何得到这个链接[http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-1.html?tmpl=component&view=microsite](http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-1.html?tmpl=component&view=microsite)的？如果您使用带有 view=microsite 的现成链接，请尝试在管理面板中的视图（微型站点）上创建链接并使用此链接。

# android - XML 布局教程

> ID：15192524
> 
> 赞同：0
> 
> 时间：2013-03-04T00:05:24.703
> 
> 标签：android, xml, android-layout

我正在为一个项目开发银行应用程序。

我希望应用程序的布局如下所示：

![](../Images/f69cff14ca4ccf1ed4b3e96987781727.png)

我想知道如何做视图，以及分隔每个视图的线。

如果您有关于如何执行此操作的教程或 XML 代码或提示，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:39:22.187

除了接受的答案。您还可以查看[Android 的 Preference Fragment](http://developer.android.com/reference/android/preference/PreferenceFragment.html)或[此示例](http://android-er.blogspot.com/2012/07/example-of-using-preferencefragment.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:34:36.377

这有很多实现，但[https://github.com/emilsjolander/StickyListHeaders](https://github.com/emilsjolander/StickyListHeaders)是其中之一（如果你只想要这些部分，你可以打开粘性标题）。我相信你也可以使用我们自己的@CommonsWare 中的[https://github.com/commonsguy/cwac-merge ;)](https://github.com/commonsguy/cwac-merge)

# c++ - 如何填充 int 和 vector 的地图 在 C++ 中？

> ID：15192534
> 
> 赞同：7
> 
> 时间：2013-03-04T00:06:25.960
> 
> 标签：c++, dictionary, vector, containers, stdmap

我一直在使用`<map>`，我在其中声明了一张地图，如下所示：

```
map <int, vector<int> > tree; 
```

我现在正在尝试为它分配值。我的目标是将多个值作为其键的元素。像这样的东西：

```
0=null
1=>0
2=>1,0
3=>2,1,0
4=>3,2,1,0
5=>0 
```

我试图像这样分配给地图，但它不起作用：

```
tree[3]=vector<int>(2,1,0); 
```

但是，以下两种分配工作的方式：

```
tree[1]=vector<int>(0);
tree[2]=vector<int>(1,0); 
```

问题出在哪里？如何制作一个可以用作 Python 字典的函数？

我没有使用 C++11。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T00:08:43.367

使用 C++11，您可以尝试：

```
tree[3]=vector<int>({2,1,0}); 
```

^(除此之外，这个问题可以使用更多细节和一些你已经尝试过的代码......)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T00:35:04.440

由于您要求 C++03 的答案，这个（比 C++11 更详细）解决方案将起作用。

```
tree[3].push_back(2);
tree[3].push_back(1);
tree[3].push_back(0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-19T09:15:02.440

请注意，以下两行没有达到您的预期：

```
tree[1] = vector<int>(0);
tree[2] = vector<int>(1, 0); 
```

[对应向量的构造函数](https://en.cppreference.com/w/cpp/container/vector/vector)的第一个参数是容器的初始大小。第二个参数是初始化容器元素的值。因此，第一行构造了一个空向量，第二行构造了一个向量，其中一个元素初始化为 0。

如其他答案所示，[`push_back()`](https://en.cppreference.com/w/cpp/container/vector/push_back)如果您不能使用[C++11 features](https://en.wikipedia.org/wiki/C%2B%2B11) ，这是一个不错的选择。但是，一旦升级到 C++11，您还可以使用嵌套[列表初始化](https://en.cppreference.com/w/cpp/language/list_initialization)来初始化地图，如下所示：

```
int main() {
    std::map<int, std::vector<int>> tree{
        {1, {0}}, {2, {1, 0}}, {3, {2, 1, 0}}, {4, { 3, 2, 1, 0 }}, {5, { 0 }}
    };

    for (auto const &kv : tree) {
        std::cout << kv.first << " =>";
        for (auto const &i : kv.second)
            std::cout << " " << i;
        std::cout << std::endl;
    }

    return 0;
} 
```

输出：

> 1 => 0
> 2 => 1 0
> 3 => 2 1 0
> 4 => 3 2 1 0
> 5 => 0

[Ideone 上的代码](http://ideone.com/KLDCis)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T01:50:30.150

你考虑过[`std::multi_map`](http://en.cppreference.com/w/cpp/container/multimap)吗？

```
#include <map>

int main()
{
    std::multimap<int, int> map;

    for (int i=1; i < 6; i++)
        for (int j=1; j < i; j++)
            map.insert(std::make_pair(i, j));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T01:17:36.333

我不是特别*喜欢*va_args 但只要您（用户）不搞砸，即混合类型，解决方案在一定程度上比大多数解决方案“更整洁”。另一个缺点是您的向量不能包含-1，但您的示例案例没有显示它。

```
#include <vector>
#include <cstdarg>
#include <iostream>

//Unsafe but it works.
template<typename T>
std::vector<T> make_vector(T num, ...) {
    std::vector<T> result;
    va_list args;
    va_start(args,num);
    for(T i = num; i != -1; i = va_arg(args,T))
        result.push_back(i);
    va_end(args);
    return result;
}

int main() {
    std::vector<int> v = make_vector(0,1,2,3,-1); //-1 to stop
    //do stuff with vector v
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T00:26:11.927

正如 Daniel Frey 指出的那样，您可以使用

```
tree[3] = vector<int>({2,1,0}) 
```

在类似 python 的伪代码中，这里使用的向量构造函数是

```
def vector(arr) 
```

原始帖子建议您尝试使用表单的构造函数

```
def vector(*args) 
```

这不存在。

如果您不使用 C++11，请考虑使用`vector`'s [other constructors](http://www.cplusplus.com/reference/vector/vector/vector/)之一。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-04T00:35:23.380

如果没有 C++11，代码就不会那么优雅：

```
tree[0]; // create empty vector for index 0
tree[1].push_back(0);
tree[2].push_back(1);
tree[2].push_back(0);
tree[3].push_back(2);
tree[3].push_back(1);
tree[3].push_back(0);
tree[4].push_back(3);
tree[4].push_back(2);
tree[4].push_back(1);
tree[4].push_back(0);
tree[5].push_back(0); 
```

# java - Java if-else 比较

> ID：15192535
> 
> 赞同：-1
> 
> 时间：2013-03-04T00:06:31.003
> 
> 标签：java

我有一个程序测试，看看用户输入是否是正数和整数。该`if`语句测试是否为整数，`else if`测试是否为负。如果是负数或小数，则要求用户输入正整数。问题出在 else 语句中，它再次等待用户输入，我希望它使用`System.out.print("Enter the test number: ");`if 它通过 if 和 else if 测试的值。

我尝试将用户输入分配`System.out.println("Please enter an integer!");` 给一个 int 变量，但如果用户输入一个双精度，我会收到一个错误，所以我认为这种方式行不通。任何有关如何使程序工作的见解都值得赞赏，谢谢！

```
import java.util.Scanner;  

public class FibonacciNumbersTester  
{  
    public static void main(String[]args)  
    {   //Variables  
        Scanner userDed = new Scanner(System.in);  
        String userChoice = "Y";  
        while(userChoice.equalsIgnoreCase("Y"))  
        {  
            Scanner userNum = new Scanner(System.in);  
            System.out.print("Enter the test number: ");  
            if(!userNum.hasNextInt() )  
            {  
                System.out.println("Please enter an integer!");  
            }  
            else if(userNum.nextInt() < 0 )  
            {     
                System.out.println("Please enter a postive integer!");  
            }  
            else  
            {  
                int NumTo = userNum.nextInt();  
                System.out.println(NumTo);  
            }  

            System.out.print("Would you like to continue? (Y/N)");  
            userChoice = userDed.next();                
        }  
    }  
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:18:25.930

您应该调用一次[nextInt](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextInt%28%29)，保存结果并将其用于比较。

尝试这个 ：

```
public static void main(String[] args) { // Variables
        Scanner userDed = new Scanner(System.in);
        String userChoice = "Y";
        while (userChoice.equalsIgnoreCase("Y")) {
            Scanner userNum = new Scanner(System.in);
            System.out.print("Enter the test number: ");
            if (!userNum.hasNextInt()) {
                System.out.println("Please enter an integer!");
            } else {
                int NumTo = userNum.nextInt();
                if (NumTo < 0)
                    System.out.println("Please enter a postive integer!");
                else
                    System.out.println(NumTo);

            }
            System.out.print("Would you like to continue? (Y/N)");
            userChoice = userDed.next();

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:29:27.460

```
Pattern positiveInt = Pattern.compile("^[1-9]\d*$"); // for positive integer
if(!userNum.hasNext(positiveInt)) {
    System.out.println("Please enter an positive integer (greater than 0) !");  
}
else {
    int NumTo = userNum.nextInt(positiveInt);
    System.out.println(NumTo);  
} 
```

# jakarta-ee - 我应该使用哪个 Oracle Java EE 教程？Java EE 6 教程还是 Java EE 5 教程？

> ID：15192537
> 
> 赞同：0
> 
> 时间：2013-03-04T00:06:32.373
> 
> 标签：jakarta-ee

我是 Java EE 技术的新手。我确实在 uni 上过 Java 编程课程（入门和中级）。

我想从 oracle Java EE 教程开始，但我不确定应该使用哪一个（Java EE 6 教程或 Java EE 5 教程）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:53:51.650

绝对要使用 Java EE 6 教程。Java EE 6 现在已经 3 年多了，并且已经完全成熟。

事实上，在短短 2 个月内 Java EE 7 就会问世。如果你这样做纯粹是为了自学，你甚至可以考虑直接使用 Java EE 7。已经有很多可用的资源，官方教程将在 Java EE 7 发布[的同时](https://blogs.oracle.com/theaquarium/entry/last_java_ee_6_tutorial)发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:16:10.000

取决于你想用它做什么（直接的行业应用或只是个人技能的提升？）Java EE 6 现在有点年轻，并没有完全被行业采用，无论如何它确实比第 5 版更简单和更强大（我是 Java EE 5 架构师认证）。
Web 部件 (JSF) 在上一个版本中也特别成熟和用户友好。我建议从 Web 配置文件开始，深入了解 CDI 功能，这是 Java EE 6 堆栈中的主要创新。

享受

# java - 有没有办法将文件附加到 Java 中具有不同名称的 zip 文件中？

> ID：15192543
> 
> 赞同：0
> 
> 时间：2013-03-04T00:07:18.357
> 
> 标签：java, zip, rename, zipinputstream, zipoutputstream

我想知道是否有一种方法，而不仅仅是将文件添加到 zip，而是在添加文件时重命名文件。我知道写方法：

```
(while ((len = zin.read(buf)) > 0) {
                    out.write(buf, 0, len);
                } 
```

我在整个互联网上搜索过，没有关于它的信息。Java有没有类es或方法？我不想重命名然后添加它的唯一原因是因为我正在使用 aux 文件处理 Windows。我的整个代码是：

```
File tempFile = File.createTempFile(zipFile.getName(), null);
    tempFile.delete();

    boolean renameOk=zipFile.renameTo(tempFile);
    if (!renameOk)
    {
        throw new RuntimeException("could not rename the file "+zipFile.getAbsolutePath()+" to "+tempFile.getAbsolutePath());
    }
    byte[] buf = new byte[1024];

    ZipInputStream zin = new ZipInputStream(new FileInputStream(tempFile));
    ZipOutputStream out = new ZipOutputStream(new FileOutputStream(zipFile));

    ZipEntry entry = zin.getNextEntry();
    while (entry != null) {
        String name = entry.getName();
        boolean notInFiles = true;
        for (File f : files) {
            if (f.getName().equals(name)) {
                notInFiles = false;
                break;
            }
        }
        if (notInFiles) {
            out.putNextEntry(new ZipEntry(name));
            int len;
            while ((len = zin.read(buf)) > 0) {
                out.write(buf, 17, len);
            }
        }
        entry = zin.getNextEntry();
    }        
    zin.close();
    for (int i = 0; i < files.length; i++) {
        InputStream in = new FileInputStream(files[i]);
        out.putNextEntry(new ZipEntry(files[i].getName()));
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        out.closeEntry();
        in.close();
    }
    out.close();
    tempFile.delete(); 
```

# sql - 使用 EXISTS 子句的 UPDATE QUERY 问题导致 DB2 中的表空间扫描缓慢

> ID：15192549
> 
> 赞同：-1
> 
> 时间：2013-03-04T00:07:47.977
> 
> 标签：sql, db2, sql-update, tablespace

我们的工作场所有一个数据库，其中包含一个包含 500 万条记录的客户表。每次更新客户端时，都会在包含 1 亿条记录的 client_history 表中添加另一行。Client 表中的所有列都已编入索引。仅索引客户端历史记录表中的主键 (ID)、外键 (FK_Client_ID) 和创建时间戳。

我被要求更新数十万客户记录，但前提是相应的客户历史记录表明客户记录自某个日期（例如 2012 年 9 月 19 日）以来没有更新。

我编写了一个使用 EXISTS 子句的 SQL 更新查询。DBA 告诉我不应该使用 EXISTS 子句，因为这会触发表空间扫描，从而减慢查询的执行速度。这显然是更新数十万客户记录时的问题 -

```
UPDATE Client_History SET Surname = 'MisterX',
 Update_Timestamp = CURRENT_TIMESTAMP 
 WHERE (FK_Client_ID = 123 AND ID = 456)
 AND NOT EXISTS
 (SELECT * 
 FROM Client
 WHERE Client.Client_Id = Client_History.FK_Client_ID
 AND Client_History.Update_Timestamp > TIMESTAMP('2012-09-21-00:00:00')
 AND Client_History.Update_Timestamp < TIMESTAMP('4000-12-31-00:00:00')
 AND Client_History.Creation_Timestamp < NAME.Update_Timestamp); 
```

谁能想到更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:22:33.970

黑暗中的一枪：尝试将所有常量提升到主查询中（它们所属的位置）

```
UPDATE Client_History ch
 SET Surname = 'MisterX'
     , Update_Timestamp = CURRENT_TIMESTAMP 
 WHERE ch.FK_Client_ID = 123
   AND ch.ID = 456
   AND ch.Update_Timestamp > TIMESTAMP('2012-09-21-00:00:00')
   AND ch.Update_Timestamp < TIMESTAMP('4000-12-31-00:00:00')
   AND ch.Creation_Timestamp < NAME.Update_Timestamp
   AND NOT EXISTS (
     SELECT * 
     FROM Client cl
     WHERE cl.Client_Id = ch.FK_Client_ID
     )
   ; 
```

顺便说一句：什么是`NAME`？某种伪表，如 Oracle 的`dual`？

# c# - 保存和加载 ListView 内容

> ID：15192550
> 
> 赞同：0
> 
> 时间：2013-03-04T00:07:48.630
> 
> 标签：c#, winforms, listview, save, restore

我正在用 C# winForm 编写一个应用程序，并且我正在使用 ListView 来存储一些数据。我需要在表单关闭时保存此项目列表，并在再次打开表单时再次加载它。

这是在列表中添加新元素的代码：

```
string[] timeitem = new string[2];

timeitem[0] = txtDescription.Text;
timeitem[1] = msktime.Text;

ListViewItem lvi = new ListViewItem(timeitem);

lstTimes.Items.Add(lvi); 
```

保存和加载此列表的最佳方式是什么？我不需要用户的对话框，每次用户打开包含 ListView 项的表单时，都应该自动保存和加载此列表。我愿意使用 .txt 或 xml 文件，无论是最好的/更容易处理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:15:06.410

您可以为此编写一个简单的辅助类：

```
class ListItemsHelper
{
    private const string FILE_NAME = "items.dat";

    public static void SaveData(Items items)
    {
        string data = SerializeItems(items);
        File.WriteAllText(GetFilePath(), data);
    }

    public static Items LoadData()
    {
        string data = File.ReadAllText(GetFilePath());
        return DeserializeItems(data);
    }

    private static string GetFilePath()
    {
        return Path.Combine(AppDomain.CurrentDomain.BaseDirectory, FILE_NAME);
    }

    private static string SerializeItems(Items items)
    {
        //Do serialization here
    }

    private static Items DeserializeItems(string data)
    {
        //Do deserialization here
    }
} 
```

采用：

```
ItemsStateHelper.SaveData(items);

Items data = ItemsStateHelper.LoadData(); 
```

此外，您必须包括一些异常处理并选择要保存文件的位置。在我发布的代码中，它保存在 exe 文件所在的文件夹中。

# c++ - TranslateAccelerator 和禁用的菜单项

> ID：15192551
> 
> 赞同：3
> 
> 时间：2013-03-04T00:07:52.777
> 
> 标签：c++, winapi, menu, accelerator

在我的应用程序中，我根据上下文启用/禁用菜单项 - 如果文本区域有焦点，我禁用会与导航键冲突的加速器（例如 Ctrl-Left/Right）。

根据[微软的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646335%28v=vs.85%29.aspx)：

> 如果加速器与菜单项具有相同的标识符并且菜单项是灰色或禁用的，则加速器被禁用并且不会生成 WM_COMMAND 或 WM_SYSCOMMAND 消息。

但是，如果关联的菜单加速器仍在加速器表中，则 TranslateAccelerator 仍然返回 true，尽管没有调度任何消息（因此“吃掉”键盘事件）。

我想知道是否有办法确定 TranslateAccelerator 是否真的发送了消息？我试图避免每次启用或禁用菜单项时重建加速器表。

# php - PDO 提取不返回任何内容

> ID：15192553
> 
> 赞同：4
> 
> 时间：2013-03-04T00:08:13.847
> 
> 标签：php, mysql, pdo

我遇到了一个小问题。我有以下代码：

```
 $query = $db->prepare('(SELECT last_visit, last_ip FROM user_log WHERE user_id = :id) 
                            UNION
                           (SELECT time AS last_visit, packet_hex AS last_ip FROM crack_log WHERE target_id = :id)
                            ORDER BY last_visit DESC LIMIT 0,10;');
    $query->execute(array(':id'=> $_SESSION['id']));
    $log = $query->fetchAll(PDO::FETCH_ASSOC); //Last visit/IP

    var_dump($log); 
```

返回：

```
array(0) { } 
```

我已经在 phpmyadmin 中尝试过查询，它运行良好。你能帮我找出错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T00:16:10.530

[根据文档](http://php.net/manual/en/pdo.prepare.php)

> 您不能在准备好的语句中两次使用同名的命名参数标记。您不能将多个值绑定到单个命名参数，例如 SQL 语句的 IN() 子句。

在你的情况下，你应该使用类似的东西

```
$query = $db->prepare('(SELECT last_visit, 
                               last_ip 
                        FROM user_log 
                        WHERE user_id = :id_1
                       ) 
                        UNION
                       (SELECT time AS last_visit,
                               packet_hex AS last_ip 
                        FROM crack_log 
                        WHERE target_id = :id_2
                       )
                       ORDER BY last_visit DESC LIMIT 0,10;'
                     );
    $query->execute(array(':id_1'=> $_SESSION['id'],
                          ':id_2'=> $_SESSION['id'] 
                         )
                   ); 
```

# drawing - 绘制单四边形纹理 openGL ES 2.0

> ID：15192562
> 
> 赞同：0
> 
> 时间：2013-03-04T00:10:59.327
> 
> 标签：drawing, opengl-es-2.0, texture2d

我是 ES 2.0 的新手，我正在尝试在 openGL ES 2.0 中绘制单个纹理。

这是我的代码：

data ：指向纹理的指针（它正在工作，我已经可以使用 ES 1.0 对其进行测试）

w : 纹理宽度

h : 纹理高度

纹理为 256x256 像素

glGetError 在每一行都返回 GL_NO_ERROR……</p>

希望有人能帮忙！我只能看到黑屏！

谢谢，

明智的

{ {

```
enum  {
    ATTRIB_VERTEX=0,
    ATTRIB_TEXTURE_POSITION,
    NUM_ATTRIB
};

glClearColor (0.0f, 0.0f, 0.0f, 0.0f);
glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

const GLfloat vertices[] = { -0.5f, -0.5f, 0.5f,  -0.5f, -0.5f,  0.5f, 0.5f, 0.5f };
const GLfloat texture_coord[] = {   0.0f, 1.0f,0.0f, 0.0f, 1.0f, 1.0f, 1.0f, 0.0f };

GLuint texName;

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, texName);

glEnableVertexAttribArray(ATTRIB_VERTEX);
glVertexAttribPointer(ATTRIB_VERTEX, 2, GL_FLOAT, 0, 0, vertices);

glEnableVertexAttribArray(ATTRIB_TEXTURE_POSITION);
glVertexAttribPointer(ATTRIB_TEXTURE_POSITION, 2, GL_FLOAT, 0, 0, texture_coord);

glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glTexImage2D (GL_TEXTURE_2D, 0, GL_RGBA,w,h,
              0, GL_RGBA,
              GL_UNSIGNED_BYTE, data);

glDrawArrays (GL_TRIANGLES, 0, 4);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:32:24.743

那是完整的来源吗？？如果是这样，你必须做这些，但你必须在这些之前设置着色器。

设置把手

```
ATTRIB_VERTEX = glGetAttribLocation(m_paintProgram, "position");
ATTRIB_TEXTURE_POSITION = glGetAttribLocation(m_paintProgram, "inputTextureCoordinate");
maintextureHandle= glGetUniformLocation(m_EffectProgram[displayMode], "texture0"); 
```

通过句柄赋予价值

```
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, texName);  
glUniform1i(maintextureHandle, 0); // add 
```

而且您不必每次都调用此代码，只需调用一次

```
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, texName);  
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexImage2D (GL_TEXTURE_2D, 0, GL_RGBA,w,h,0, GL_RGBA,GL_UNSIGNED_BYTE, data); 
```

实际上，您的代码没有那么多必需的代码，例如 Shader load、Shader compile、glUseProgram()、glBindFramebuffer()、glviewport()、glBindRenderbuffer 之类的。但我不能教所有这些，所以我希望你参考这个链接并了解更多关于 opengl es 2.0 的信息。

[http://examples.oreilly.com/9780596804831/readme.html#WireframeSkeleton](http://examples.oreilly.com/9780596804831/readme.html#WireframeSkeleton)

# css - 顶部，较大圆圈的中心部分

> ID：15192563
> 
> 赞同：-1
> 
> 时间：2013-03-04T00:11:01.603
> 
> 标签：css

我正在尝试复制这个模型：

![在此处输入图像描述](../Images/d960d809285e290de5218152ccc79b0c.png)

我知道如何在 CSS 中创建一个半圆，但我不想要一个完整的半圆。我只想要一个更大的圆圈的顶部中心部分。

**我正在专门寻找在上述模型中创建黑色圆圈的 CSS 代码**。谢谢！

这是我的尝试：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Landing Page</title>
        <link rel="stylesheet" href="/stylesheets/style.css">
    </head>
    <body>
        <h1>
            <img id="logo" src="/images/logo.png">
        </h1>
        <div id="half_circle">
            <div id="footer_container">
                <div id="learn">
                    <a href="/about">Learn more.</a>
                </div>
                <div id="signin">
                    <div>
                        <a href="/login">Sign in to start callin'it</a>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>

  #half_circle {
    width: 100%;
    height: 50%;
    border-radius: 100% 100% 0 0;
    background-color: #111111;
    display: block;
    position: absolute;
    bottom: 0; 
  }

  #footer_container {
    display: block;
    position: relative;
    height: 100%;
    width: 100%;
  }

  #learn {
    text-align: center;
    padding-top: 3em;
  }

  #footer_container a {
    color:white;
  }

  #signin {
    display: block;
    width: 100%;
    position: absolute;
    bottom: 10%;
    margin-right: auto;
    margin-left: auto;
  }

  #signin div {
    text-align: center;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:20:06.493

做一个大圆圈并隐藏它:)

演示：http: [//jsfiddle.net/Ye35w/1/](http://jsfiddle.net/Ye35w/1/)

```
body {
  overflow: hidden;
}

.circle {
  position: absolute;
  top: 65%;
  left: -25%;
  display: block;
  width: 150%;
  height: 150%;
  background-color: #ccc;
  border-radius: 50%;
} 
```

# cakephp - 如何在 Heroku 上运行的 CakePHP 应用程序不注销？

> ID：15192565
> 
> 赞同：1
> 
> 时间：2013-03-04T00:11:26.837
> 
> 标签：cakephp, heroku

本质上，我在 Heroku 上托管了一个 CakePHP 站点，但是每当我执行 Git 推送更新站点时，我的所有用户都会被注销。

我假设它与`/tmp`每次在 Heroku 上进行更新时都会刷新的文件夹有关。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:40:49.367

You should probably change the cache provider to either `database` or `cache` (memcached) as described in the docs: [http://book.cakephp.org/2.0/en/development/sessions.html#built-in-session-handlers-configuration](http://book.cakephp.org/2.0/en/development/sessions.html#built-in-session-handlers-configuration)

This will also have the advantage of working if you scale to multiple dynos (which won't share a /tmp folder)

# android - 在从服务器检索数据的片段中创建 ListView

> ID：15192567
> 
> 赞同：2
> 
> 时间：2013-03-04T00:11:46.040
> 
> 标签：android, listview, android-asynctask, fragment, android-listfragment

我一直在尝试在从服务器获取数据的片段中创建一个 ListView，但到目前为止还没有成功。我一直在使用以下站点：[Vogella](http://www.vogella.com/articles/AndroidListView/article.html#listfragments)用于学习如何在片段中实现 ListView，但是在尝试从服务器填充数据时遇到了困难。

```
package com.example.ips_alpha;

import java.util.ArrayList;
import java.util.HashMap;
import android.util.Log;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TableLayout;

public class Gold_Visitors2 extends ListFragment{

//JSON Node names (level, sensorID, value)
String SPACES = "spaces"; //String array name of php
String LEVEL = "level";
String SENSORID = "sensorID";
String VALUE = "value";
//pspace JSONArray
JSONArray pspace = null;
String[] levels = new String[]{LEVEL, SENSORID, VALUE};

int [] ids = new int[]{};

private static String url = "http://www.example.com/getUsers12.php";

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    View view = inflater.inflate(R.layout.fragment_gold_visitors, null);

    new MyAsyncTask().execute();
    return view;

}

class MyAsyncTask extends AsyncTask<String, Integer, ArrayList<HashMap<String, String>> > {

    //Hashmap for ListView
    ArrayList<HashMap<String, String>> levelList = new ArrayList<HashMap<String, String>>();

    @Override
    protected ArrayList<HashMap<String, String>>doInBackground(String... params) {

//Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        //getting JSON string from URL

        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            //Getting Array of spaces
            pspace = json.getJSONArray(SPACES);

            //looping through all spaces
            for(int i = 0; i < pspace.length(); i++){
                JSONObject p = pspace.getJSONObject(i);

            //Storing each json item in variable
                String level = p.getString(LEVEL);
                String sensorID = p.getString(SENSORID);
                String value = p.getString(VALUE);
            //creating new HashMap

                HashMap<String, String> map = new HashMap <String, String>();
            //adding each child node to HashMap Key =>
                map.put(LEVEL, level);
                map.put(SENSORID, sensorID);
                map.put(VALUE, value);

            //adding HashList to ArrayList
            }
        }catch(JSONException e){
            e.printStackTrace();

        }
        return levelList;

    }

    @Override
    protected void onPostExecute(ArrayList<HashMap<String, String>> levelList) {

        ListAdapter adapter = new SimpleAdapter(getActivity(), levelList, R.layout.fragment_gold_visitors, levels, ids);
        setListAdapter(adapter);

    }

}
} 
```

以下是布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@id/android:list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

目前我的应用程序正在编译并且不会崩溃，但是在访问应该显示 ListView 的片段时，它是空白的。我相信我在 ASyncTask 和适配器中搞砸了，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:39:00.040

您返回`levelList`in `doInBackground`，但从未从检索到的 JSON 中向其中添加任何项目。你所拥有的只是一个空的`ArrayList`，所以`ListView`是空的。

# python - GAE上pyfpdf的实现

> ID：15192569
> 
> 赞同：0
> 
> 时间：2013-03-04T00:11:57.887
> 
> 标签：python, google-app-engine, pdf

关于 Google App Engine 上 pyfpdf 的一些问题。我花了很多时间搜索，但找不到任何东西。

它们可能与安装有关，但我不确定。在我的笔记本电脑上，如果有帮助，我正在运行 Windows Vista、Python 2.7、pyfpdf 1.7.hg、Explorer 7.0、Chrome 23.0.1271.91 m。

Q 1：在资源管理器中，在开发过程中，与互联网断开连接，

a) 报告的第一次运行显示空白页，
b) 按“返回”并再次运行，它按预期显示，
c) 按“返回”并再次运行，显示空白页，依此类推

这种模式相当一致，但并不完全一致。

Chrome 只是告诉我它无法连接到互联网（无论我启用了 Chrome PDF 查看器还是启用了 Adob​​e Reader）有什么想法吗？

Q2：当我部署应用程序时，直到我在 fpdf.py 第 449 行和第 1326 行进行以下更改后，应用程序才会运行。#except IOError as e: DAVID #if not e.errno == errno.EACCES: #raise # Not a权限错误。except: raise 这是否意味着我的安装遗漏了什么？

Q3：部署时，ID显示如下（Chrome在自己的窗口中显示相同）：

3 0 obj <> endobj 4 0 obj <> 流 xœ…–Ko 1 F÷ù Wê¦-Tã÷c™ç"RªJAêz œ††ÌD0 õß×ž ]'ãkØðøÎµÍÅFÂí gÆÁáìb ‹ B2Îaù ×Ë"¤—S" µaV‚ç Ë |¾ÙÆøÒõp?<Ž‡n ¿ÀòO®™†I$Ž'>1Ê3§Á Ä[ùîw ñ®(ÍÍßUIÍ™õà,eÊMUwÝº¬cßõ n‡_; X ¬¦þ0ŠJs p^æ§% ÛË§øð¼- #[ ¶Aä_wŽ¬ž iK¸ÀêÂ ÐÜÝ‚«Ê:Ç”~b§æ²~òÐEìrØ ›MWñEæbýíÐTF´ªlÕñfðr®ŒiS 1b hï/rUÙtl„• ‰Ï]‹0 ¸2»ªŠ+b„ + mWäª®éÔprÅ0Ÿ•¤+bt+ s² ¬ Kžÿj Æ 6 #v öî"Wuå–iC¹b~/ Ò 1Â ¶+r5W Eum æûr-0² æT' hÕØ¥ë™SÆ 6 «ïn 4w•àª®éÈ Šr-Ât&( Ê 1Â “ ZÁV}u`ŽêÜ2lù"Fw 2§•'-*+ÃŒ§”‹°¥Œ ±Å ´Û ¹ª«0yº Í ¸îW0<Â6¾ Û ¦ÏŽEÿì¤#ª endstream endobj 1 0 obj <> endobj 5 0 obj <> endobj 6 0 obj <> endobj 2 0 obj << /ProcSet [/PDF /Text /ImageB /ImageC /ImageI] /Font << /F2 5 0 R /F1 6 0 R >> /XObject < < >> >> endobj 7 0 obj << /Producer (PyFPDF 1.7 [http://pyfpdf.googlecode.com/](http://pyfpdf.googlecode.com/)) /CreationDate (D:20130304000514) >> endobj 8 0 obj << /Type /Catalog /Pages 1 0 R /OpenAction [3 0 R /FitH null] /PageLayout /OneColumn >> endobj xref 0 9 0000000000 65535 f 0000000851 00000 ñ0000001135 00000ñ0000000009 00000ñ0000000087 00000ñ0000000938 00000ñ0000001034 00000ñ0000001249 00000ñ0000001356 00000ñ拖车<< /尺寸9 /根8 0 R /信息7 0 R >> startxref 1459 %% EOF状态：200 OK内容-类型：文本/html；charset=utf-8 缓存控制：无缓存过期：星期五，1990 年 1 月 1 日 00:00:00 GMT 内容长度：0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:10:28.970

q1：我认为与 pyfpdf 无关，您不需要安装它：只需将文件夹放在您的应用程序中即可。

q2：gae 不允许在磁盘上写入，pyfpdf 使用该`file()`模块在 pdf 输出中插入图像。也许这是你的情况。

q3：你看到的是pdf代码，我看到了`Content-Type: text/html`。尝试将 Content-Type 更改为`'application/pdf'`

# mysql - 使用 mysql 组后获取具有最高 ID 的值

> ID：15192572
> 
> 赞同：0
> 
> 时间：2013-03-04T00:12:16.163
> 
> 标签：mysql, mysqli

我有一个网站，允许用户上传图像以进行审核。用户首先创建一个审计，它有一个随机数作为 auditID 和一个 dateStart（用户选择的日期，存储为 DATE 而不是 DATETIME）存储在审计表中。然后他们选择要上传的图像，然后为其分配一个 ID (imageID) 和它在服务器上的文件路径 (imageLocation) 和一个始终为“标准”的类型，该类型存储在图像表中。auditID 是图像表中的外键。

如果相同的图像被重新用于另一次审计，则在数据库中为其创建另一个条目，该条目具有与以前相同的值，只是一个新的 imageID 和一个具有新 dateStart 的新 auditID。

然后通过使用按其 imageLocation 对图像进行分组的脚本来显示这些图像，以便显示每个图像的一个实例以及使用 MAX(dateStart) 进行的最后一次审核的名称。

这很有效，除非用户使用相同的图像进行具有相同 dateStart 的多个审核，在这种情况下，它会显示多次，每次审核在同一日期显示一次。最简单的做法是将 dateStart 从 date 更改为 datetime，但这不是一个可行的选择，因此下一个最好的方法是不仅要找到 MAX(dateStart)，还要找到 MAX(imageID)。

我尝试在 GROUP 之后添加 SORT BY i.imageID LIMIT 1 DESC 但它只返回一个图像而不是每个图像的最新实例。

这是我目前所拥有的......

```
SELECT i.imageID AS newest_image, 
       i.userID AS image_userID, 
       i.auditID AS image_auditID, 
       i.type AS image_type, 
       i.imageLocation AS location,
       a.*
       FROM image i
       JOIN audit a
       ON i.auditID = a.auditID
       JOIN 
        (
         SELECT i.imageLocation, MAX(a.dateStart) MaxDate
         FROM image i
             JOIN audit a
             ON i.auditID = a.auditID
         WHERE i.userID = '$id' 
         AND i.type = 'standard' 
         GROUP BY i.imageLocation
        )
      g ON  g.MaxDate = a.dateStart
      AND g.imageLocation = i.imageLocation
      WHERE i.userID = '$id' 
      AND i.type = 'standard'
      AND i.imageLocation NOT LIKE '%standard_examples%'" 
```

我希望它返回与现在相同的结果，但如果在同一日期多次使用同一图像，那么我想要具有最高 imageID 的图像实例。

我希望这是足够的信息，表格非常复杂，但如果需要，我可以提供它们和示例数据，但这需要一段时间。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:48:59.223

尝试重新表述问题：您正在存储`image`具有关联记录的`audit`记录。有时会加载重复的图像，这些图像通过相同的`imageLocation`. 查找最新的图像记录及其关联的审计记录。

`audit`我认为您的查询看起来不错，但如果所有图像 id 都是唯一的，则无需在内部查询中加入表。之后加入`audit`表。`id`如果已经确定，也无需再次加入最大日期。

这是对同一查询的尝试，为了清楚起见，我只是将子查询拉到 CTE 中，但您可以将其放回原来的位置。

```
WITH images AS (
    SELECT imageLocation, MAX(imageID) AS newest_imageID
      FROM image
      WHERE i.userID = '$id' 
        AND i.type = 'standard'
        AND i.imageLocation NOT LIKE '%standard_examples%'
      GROUP BY imageLocation
)

SELECT i.imageID AS newest_image, 
       i.userID AS image_userID, 
       i.auditID AS image_auditID, 
       i.type AS image_type, 
       i.imageLocation AS location,
       a.*

  FROM image i
  JOIN images ni ON (i.imageID = ni.newest_imageID)
  JOIN audit a ON (i.auditID = a.auditID) 
```

**更新：**

如果没有 CTE，您可以返回原始格式（注意我没有创建表并加载数据进行测试，这只是基于查询中的问题）：

```
SELECT i.imageID AS newest_image, 
       i.userID AS image_userID, 
       i.auditID AS image_auditID, 
       i.type AS image_type, 
       i.imageLocation AS location,
       a.*

  FROM image i

  JOIN ( SELECT imageLocation, MAX(imageID) AS newest_imageID
               FROM image i
               WHERE i.userID = '$id' 
                 AND i.type = 'standard'
                 AND i.imageLocation NOT LIKE '%standard_examples%'
               GROUP BY imageLocation
       ) ni ON (i.imageID = ni.newest_imageID)

  JOIN audit a ON (i.auditID = a.auditID) 
```

# scheme - 对 Scheme 列表进行分区

> ID：15192573
> 
> 赞同：3
> 
> 时间：2013-03-04T00:12:35.343
> 
> 标签：scheme, racket

我将如何制作一个分区函数，该函数将采用一个数字和一个列表将列表划分为较小的列表列表，其大小由数字给出，以便

```
Partition 3 '(a b c d e f g h) -> '((a b c) (d e f) (g h)) and etc. using take and drop? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:49:12.643

我会给你一些提示，以便你自己找到答案。填空：

```
(define (partition n lst)
  (cond (<???>                      ; if the list is empty
         <???>)                     ; then return the empty list
        ((< <???> n)                ; if the lists' length is less than n
         <???>)                     ; return a list with lst as its only element
        (else                       ; otherwise
         (cons                      ; cons a list with the result of
          (<???> lst n)             ; grabbing the first n elements of lst with
          (<???> n                  ; the result of advancing the recursion and
                 (<???> lst n)))))) ; removing the first n elements of lst 
```

显然，您必须按照问题描述中的要求在解决方案中的某处使用`take`和。`drop`像这样测试您的解决方案：

```
(partition 3 '(a b c d e f g h))
=> '((a b c) (d e f) (g h))

(partition 3 '(a b c d e f g h i))
=>'((a b c) (d e f) (g h i)) 
```

# java - 多线程代码中的每个线程访问一个数组列表

> ID：15192580
> 
> 赞同：0
> 
> 时间：2013-03-04T00:13:29.920
> 
> 标签：java, multithreading, thread-safety, race-condition

我正在做一个项目，其中我在不同的数据库中有两个具有不同模式的表。所以这意味着我有两个不同的连接参数让这两个表使用 JDBC-

假设下面是 config.property 文件。

```
TABLES: table1 table2

#For Table1
table1.url: jdbc:mysql://localhost:3306/garden
table1.user: gardener
table1.password: shavel
table1.driver: jdbc-driver
table1.percentage: 80
table1.columns: COL1,COL2,COl3,Col4,COL5

#For Table2
table2.url: jdbc:mysql://otherhost:3306/forest
table2.user: forester
table2.password: axe
table2.driver: jdbc-driver
table2.percentage: 20
table1.columns: COL10,COL11,COl12,Col13,COL14 
```

下面的方法将读取上面的`config.properties`文件并`TableConnectionInfo`为每个表创建一个对象。

```
private static void readPropertyFile() throws IOException {

    prop.load(LnPRead.class.getClassLoader().getResourceAsStream("config.properties"));

    tableNames = Arrays.asList(prop.getProperty("TABLES").trim().split(","));

    for (String arg : tableNames) {

        TableConnectionInfo ci = new TableConnectionInfo();
        ArrayList<String> columns = new ArrayList<String>();

        String table = prop.getProperty(arg + ".table").trim();
        columns = new ArrayList<String>(Arrays.asList(prop.getProperty(arg + ".columns").split(",")));

        ci.setTableName(table);
        ci.setColumns(columns);

        tableList.put(arg, ci);
    }
} 
```

下面是一个特定表的`TableConnectionInfo class`所有内容。`table connection info`

```
public class TableConnectionInfo {

    public String tableName;
    public ArrayList<String> columns;

    public String getTableName() {
        return tableName;
    }

    public void setTableName(String tableName) {
        this.tableName = tableName;
    }

    public ArrayList<String> getColumns() {
        return columns;
    }

    public void setColumns(ArrayList<String> columns) {
        this.columns = columns;
    }
} 
```

现在我正在`ExecutorService`为指定数量的线程创建并将这个`tableList`对象（我通过阅读创建`config.property file`）传递给构造函数`Task class`之后，这个`tableList`对象不会被任何线程修改，只有每个线程将访问这些值 -

```
// create thread pool with given size
ExecutorService service = Executors.newFixedThreadPool(10);

long startTime = System.currentTimeMillis();
long endTime = startTime + (durationOfRun * 60 * 1000);

for (int i = 0; i < threads; i++) {
    service.submit(new Task(endTime, tableList));
} 
```

下面是我实现 Runnable 接口的任务类

```
class Task implements Runnable {

    private static Random random = new SecureRandom();
    private final long endTime;
    private final LinkedHashMap<String, TableConnectionInfo> tableLists;

    public Task(long endTime, LinkedHashMap<String, TableConnectionInfo> tableList) {
        this.endTime = endTime;
        this.tableLists = tableList;
    }

    @Override
    public void run() {

        while (System.currentTimeMillis() <= endTime) {

            .....

            double randomNumber = random.nextDouble() * 100.0;
            TableConnectionInfo table = selectRandomTable(randomNumber);

            /* Below line is Thread Safe right? 
             * And there won't be any issue with it? As I am doing
             * table.getColumns which will returns me an ArrayList of columns
             */
            final String columnsList = getTableColumns(table.getColumns());

            ....
        }
      }

     private String getTableColumns(final List<String> columns) {

      ...

     }
} 
```

**问题陈述：-**

在我上面的运行方法中，我试图访问`getColumns`特定表的方法，`table.getColumns`并且每个线程都将做同样的事情。我不确定这是否是线程安全的。它不会给我带来任何问题，比如比赛条件或其他问题。任何想法都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:44:04.187

只要底层 ArrayList 在初始构造后没有更改，这在技术上是线程安全的。在这种情况下，每个线程都将引用同一个 ArrayList 实例。

如果将来有计划使这些表列可变，则会导致问题。在此列表可变的情况下，我将构建一个新列表和指针交换或使用 java.util.concurrent.* 类来保存您的列列表。

# java - 使用 O 表示法在 for 循环中对 LinkedList 调用 get() 的复杂性

> ID：15192581
> 
> 赞同：5
> 
> 时间：2013-03-04T00:13:34.480
> 
> 标签：java, linked-list

我有一个实用的方法来确定使用 O() 表示法的一小段代码的复杂性。

代码是：

```
for (int i = 0; i < list.size(); i++)
    System.out.println(list.get(i)); 
```

有问题的列表是一个链表。对于我们的实践，我们得到了一个现成的 LinkedList 类，尽管我们必须编写自己的`size()`和`get()`方法。

这个问题让我感到困惑的是在最终计算中要计算什么。问题问：

> 如果列表中有 100 个元素，它将进行多少次查找？在此基础上，使用 O() 表示法计算程序的复杂度。

如果我只是计算该`get()`方法，它将平均进行 n/2 次查找，从而产生 O(n) 的大 O 表示法。但是，for 循环的每次迭代都需要重新计算 size()，这涉及到查找（以确定链表中有多少节点）。

在计算这段代码的复杂度时，是否应该考虑到这一点？或者计算大小不算作查找？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-12-10T00:10:31.353

我可能回答得有点晚了，但我认为这个 for 循环实际上是[![O(n^2)](../Images/ebb43c1df648ceecc7c8fb4df19fd5b7.png)](https://i.stack.imgur.com/gJuLj.gif)

**解释**

您将访问列表的第 i 个索引的每次循环迭代。因此，您的呼叫顺序将是：

[![顺序](../Images/6b156e7187806685e37ade70c270f756.png)](https://i.stack.imgur.com/GLjVW.gif)

这是因为每次迭代**i**都会递增，并且您正在循环**n**次。

因此，可以使用以下总和来评估方法调用的总数：

[![在此处输入图像描述](../Images/08244798f3290de44052fad9c784741f.png)](https://i.stack.imgur.com/SPIUJ.gif)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-20T00:21:16.653

在 Java LinkedList 中，get(int) 操作是 O(N)，size() 操作是 O(1) 复杂度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T00:15:52.780

由于它是一个链表，因此确定大小将是一个 O(N) 操作，因为您必须遍历整个列表。

此外，您错误地计算了 .get() 的时间复杂度。对于 big-O，重要的是*最坏情况*的计算。对于链表，最坏的检索情况是元素在链表的末尾，所以也是 O(N)。

总而言之，您的算法每次迭代将花费 O(2N) = O(N) 时间。我希望你能从那里弄清楚整个循环的时间复杂度是多少。

顺便说一句，在现实世界中，您可能只想在循环之前计算一次大小，正是因为这样可能效率低下。显然，如果列表的大小可以在循环期间发生变化，这不是一个选项，但对于这种非变异算法来说，情况似乎并非如此。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-17T03:08:41.720

### 简短回答：这取决于对问题的解释。

如果问题是问如果我想找到第 100 个位置（比如调用），我必须跳多少次列表`.get(100)`，那么复杂性将是**O(N)**，因为我需要遍历整个列表一次。

`.get(1)`如果问题是通过检查每个索引（如, `.get(2)`, ..., ）来询问找到第 i 个变量`.get(100)`的复杂性，那么复杂性将是**O(N²)**，正如 michael 所解释的那样。

### 长答案：

计算大小的复杂性取决于您的实现。如果您遍历整个列表以查找大小，则大小计算的复杂度将为**O(N)** （在第一种情况下为**O(2N) ，在第二种情况下为****O(N² + N)**）<-*这最后一部分也是取决于您的实现，因为我认为您正在计算 for 循环之外的大小。*

如果您将大小保存为每次添加元素时都会变大的实例变量，那么您将拥有**O(1)**的大小，并且对于第一种和第二种情况具有相同的复杂性。

**我们将O(2N)**（或**O(aN + b)**的任何情况）舍入到**O(N)**的原因是因为我们只关心处理数据所花费的时间的增长。如果 N 很小，代码无论如何都会运行得很快。如果 N 很大，则代码可能会运行更多时间，具体取决于复杂性，但与更糟糕的复杂性实现相比，常量 a 和 b 不会有太大影响。

> 假设对于 O(N) 复杂度的小输入 N，代码在 2 秒内运行。
> 随着值变大：N, 2N, 3N, 4N, ..., kN
> 如果代码复杂度为**O(N)**，则时间为：2, 4, 6, 8, ..., 2k
> 如果代码有复杂度**O(2N)**时间为：4, 8, 12, 16, ..., 2k * 2
> 如果代码复杂度为**O(N²)**，时间为：4, 16, 36, 64, ... , (2k)²

正如你所看到的，最后一个实现很快就失控了，而第二个实现只比简单的线性慢两倍。所以 O(2N) 较慢，但与 O(N²) 解决方案相比几乎没有什么。

# c++ - 指向新对象的智能指针

> ID：15192584
> 
> 赞同：0
> 
> 时间：2013-03-04T00:13:57.713
> 
> 标签：c++, pointers, shared-ptr

我创建了一个如下所示的程序

```
void Encode(shared_ptr<string>str)
{
    shared_ptr<string> n(new string());
        //I am creating the string pointed by n here by analyzing the string pointed by str 
    cout<<endl;
    cout<<str.get()<<" Func "<<str.use_count()<<" "<<n.get()<<" "<<n.use_count()<<endl;
    str=n;
    cout<<str.get()<<" Func "<<str.use_count()<<" "<<n.get()<<" "<<n.use_count()<<endl;
}

int main ()
{
    string s("aaabbbccd");
    shared_ptr<string> str(new string(s));
    Print(str);
    cout<<endl;
    cout<<str.get()<<"  Main "<<str.use_count()<<" "<<endl;
    Encode(str);
    cout<<str.get()<<" Main "<<str.use_count()<<" "<<endl;
    cout<<endl;
    Print(str);
    _getch();
    return 0;
} 
```

由于我正在对字符串进行编码，所以我在编码后不想要原始字符串，我尝试通过编写该行`str=n`来做它认为这将`str`指向我可以在我的主程序中使用的新字符串，但它是不正确，因为我仅将原始字符串作为输出，而不是修改后的字符串。

我什至检查了使用`.get()`函数，它似乎只指向原始字符串。

谁能解释我为什么会这样，我怎样才能`str`指向新的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:19:41.137

您的`Encode`函数被传递了共享指针的**副本**。而且您只是在修改该副本。不是主要的那个。

```
void Encode(shared_ptr<string>str) 
```

您应该改为通过*引用*传递指针。然后它将在 main 中*引用*相同的内容。`shared_ptr`

```
void Encode(shared_ptr<string> &str) 
```

**作为旁注**，调用通常是一个坏主意，`shared_ptr::get()`因为它会产生一个原始指针，从而回避了智能指针的目的。而不是`str.get()`，只需使用`*str`.

# symfony - 无法使用 MAMP 在 Symfony2 中为 Doctrine2 创建数据库连接（连接被拒绝）

> ID：15192587
> 
> 赞同：5
> 
> 时间：2013-03-04T00:14:12.233
> 
> 标签：symfony, doctrine-orm

我正在为我和一些朋友正在进行的项目学习 Symfony2，并且正在学习一个教程，您可以在 Symfony2 中创建博客：http: [//tutorial.symblog.co.uk/docs/doctrine- 2-the-blog-model.html](http://tutorial.symblog.co.uk/docs/doctrine-2-the-blog-model.html)

**问题**

我似乎无法让 Doctrine2 工作。我向终端发出以下指令：

```
php app/console doctrine:database:create 
```

并得到以下错误信息：

> 无法为名为`symfony` SQLSTATE[HY000] [2002] 的连接创建数据库 连接被拒绝

**系统信息**

我有一台运行 Mountain lion 的 Mac，我使用 MAMP。

**我做了什么**

我去了配置页面（`http://localhost/NameOfProject/web/config.php`），然后去了你配置数据库的地方。我在那里输入了 MAMP 起始页的路径、端口、用户、密码等。

**我试过的**

我遇到的博客建议使用以下命令创建指向 MAMP mysql 套接字的符号链接：

```
sudo ln -s /Applications/MAMP/tmp/mysql/mysql.sock mysql.sock 
```

这并没有使我的错误消失。

**我在 symfony 中的一些文件（如果它们是相关的）**

来自`app/config/config.yml`：

```
parameters:
    database_driver: pdo_mysql
    database_host: 127.0.0.1
    database_port: '8889'
    database_name: symfony
    database_user: root
    database_password: root
    mailer_transport: smtp
    mailer_host: 127.0.0.1
    mailer_user: null
    mailer_password: null
    locale: en
    secret: 0408312e2b9861c0c86dbb7488aceec4296054ec
    database_path: /Applications/MAMP/tmp/mysql/mysql.sock 
```

来自`app/config/parameters.yml`：

```
parameters:
    database_driver: pdo_mysql
    database_host: 127.0.0.1
    database_port: '8889'
    database_name: symfony
    database_user: root
    database_password: root
    mailer_transport: smtp
    mailer_host: 127.0.0.1
    mailer_user: null
    mailer_password: null
    locale: en
    secret: 0408312e2b9861c0c86dbb7488aceec4296054ec
    database_path: /Applications/MAMP/tmp/mysql/mysql.sock 
```

本教程讨论了更新位于位于的参数文件中的 database_* 选项`app/config/parameters.ini`。但是，我没有`parameters.ini`位于此文件夹中的文件！只有`parameters.yml`.

**编辑：解决方案：**

我为 MySql 使用了错误的端口号。当我使用 3306 时，它起作用了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T16:09:23.483

我为 MySql 使用了错误的端口号。当我使用标准 mysql 端口 3306 时，它可以工作。（谢谢jperovic）

# ios - 设置新的 ViewController 时 UITabBarController 丢失

> ID：15192588
> 
> 赞同：0
> 
> 时间：2013-03-04T00:14:18.210
> 
> 标签：ios, ios5, ios6

我有以下带有 uiTabBarItems 的 TabBarController

> [项目1，项目2，项目3，项目4]

这个结构工作正常（每个 ViewController 都正确显示），我的问题是：

当我从 Item1、Item2 更改为另一个 ViewController ... TabBarItems 底部被隐藏/丢失

```
[, , , ] 
```

我正在使用以下代码从 Item1 ViewController 更改 viewController

```
NewViewController *controller = [[NewViewController alloc]init];
[self.tabBarController setViewControllers:[[NSArray alloc] initWithObjects:controller, nil]]; 
```

使用前面显示的代码正确更改视图控制器吗？

编辑。-

基本上我想在 Item1 (UITabBar) 的 ViewControllers 上导航而不会丢失 UITabBarItems

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T06:36:12.470

尝试这个。

调用这个方法，在哪里展示`UITabBar`

在.h中，

```
@property (strong, nonatomic) UINavigationController *navigation;
@property(nonatomic, strong) UITabBarController *tabbarcontroller; 
```

米，

```
-(void)loadtabview
{

    self.tabbarcontroller = [[UITabBarController alloc] init];
    NSMutableArray *localControllersArray = [[NSMutableArray alloc] initWithCapacity:4];
    self.firstViewController = [[FirstViewController alloc]initWithNibName:@"firstViewController" bundle:nil];
    navigation = [[UINavigationController alloc] initWithRootViewController:self.firstViewController];
    self.viewController.navigationItem.title=@"First";
    [localControllersArray addObject:navigation];

    self.secondViewController = [[secondViewController alloc] initWithNibName:@"secondViewController" bundle:nil];
    navigation = [[UINavigationController alloc] initWithRootViewController:secondViewController];
    self.secondViewController.navigationItem.title=@"second";
    [localControllersArray addObject:navigation];

    self.ThirdViewController = [[Third ViewController alloc]initWithNibName:@"Third ViewController" bundle:nil];
    navigation = [[UINavigationController alloc] initWithRootViewController:ThirdViewController];
    self.secondViewController.navigationItem.title=@"Third";
    [localControllersArray addObject:navigation];

    tabbarcontroller.viewControllers = localControllersArray;
    self.tabbarcontroller.delegate = self;
    [self.tabbarcontroller setSelectedIndex:0];
    [self.window addSubview:tabbarcontroller.view];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:19:20.027

如果要设置活动选项卡，则不应使用`setViewControllers:`，因为它会替换所有选项卡。你应该使用`setSelectedIndex:`你的`UITabBarController`代替。

# gwt - gwt 单元格表动态列 - 排序

> ID：15192593
> 
> 赞同：1
> 
> 时间：2013-03-04T00:15:03.587
> 
> 标签：gwt, dynamic, celltable, dynamic-columns

您可以将“行”表示为`List<String>`实例，您必须在网格、列和数据提供程序中将参数化从字符串更改为列表；`List<List<String>>`当然，您必须使用 a而不是 a来调用 updateRowData `List<String>`。

您还需要每列一个 Column 实例，按索引从 List 中取出值：

```
 class IndexedColumn extends Column<List<String>, String> {

       private final int index;

       public IndexedColumn(int index) {
           super(new EditTextCell());
           this.index = index;
       }

       @Override
       public String getValue(List<String> object) {
           return object.get(this.index);
       }

   } 
```

我如何在这个例子中添加排序。我尝试了`ListHandler`但不确定如何比较`List<String>`。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:41:23.667

您需要在`ListHandler`要单独排序的每一列中添加一个。有点像这样：

您必须为以下内容添加一个 getter`IndexedColumn`方法`index`：

```
class IndexedColumn extends Column<List<String>, String> {

    private final int index;

    public IndexedColumn(int index) {
        super(new EditTextCell());
        this.index = index;
    }

    @Override
    public String getValue(List<String> object) {
        return object.get(this.index);
    }

    public int getIndex(){
        return index;
    }

} 
```

然后你需要添加`ListHandler`一个`CellTable`：

```
ListHandler<List<String>> columnSortHandler = new ListHandler<List<String>>(list);
    columnSortHandler.setComparator(columnName, new Comparator<List<String>>() {

        public int compare(List<String> o1, List<String> o2) {
          if (o1 == o2) {
            return 0;
          }

          // Compare the column.
          if (o1 != null) {
            int index = columnName.getIndex();
            return (o2 != null) ? o1.get(index).compareTo(o2.get(index)) : 1;
          }
          return -1;
        }
    });
table.addColumnSortHandler(columnSortHandler); 
```

在上面的例子`list`中是`List<List<String>>`对象。是`columnName`对象`Column`。您必须为要排序的每一列执行此操作。

不要忘记还调用`.setSortable(true)`您将排序的每一列。

可以在[此处](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellTable#columnSorting)找到列排序的一个很好的基本示例。上面的代码基于此示例，但我使用了您`index`的`IndexedColumn`in 以获得正确`String`的列进行比较。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T17:43:51.730

这是数据网格代码

```
indexedColumn.setSortable(true);
sortHandler.setComparator((Column<T, ?>) indexedColumn, (Comparator<T>) indexedColumn.getComparator(true)); 
```

这是实际的课程

```
 public class IndexedColumn extends Column<List<String>, String>
{
   private Comparator<List<String>> forwardComparator;
   private Comparator<List<String>> reverseComparator;
   private final int index;

   public IndexedColumn(int index)
   {
      super(new TextCell());
      this.index = index;
   }

   @Override
   public String getValue(List<String> object)
   {
      return object.get(index);
   }

   public Comparator<List<String>> getComparator(final boolean reverse)
   {
      if (!reverse && forwardComparator != null)
      {
         return forwardComparator;
      }
      if (reverse && reverseComparator != null)
      {
         return reverseComparator;
      }
      Comparator<List<String>> comparator = new Comparator<List<String>>()
      {
         public int compare(List<String> o1, List<String> o2)
         {
            if (o1 == null && o2 == null)
            {
               return 0;
            }
            else if (o1 == null)
            {
               return reverse ? 1 : -1;
            }
            else if (o2 == null)
            {
               return reverse ? -1 : 1;
            }

            // Compare the column value.
            String c1 = getValue(o1);
            String c2 = getValue(o2);
            if (c1 == null && c2 == null)
            {
               return 0;
            }
            else if (c1 == null)
            {
               return reverse ? 1 : -1;
            }
            else if (c2 == null)
            {
               return reverse ? -1 : 1;
            }
            int comparison = ((String) c1).compareTo(c2);
            return reverse ? -comparison : comparison;
         }
      };

      if (reverse)
      {
         reverseComparator = comparator;
      }
      else
      {
         forwardComparator = comparator;
      }
      return comparator;
   }

} 
```

# javascript - 从另一个对象中引用对象

> ID：15192595
> 
> 赞同：0
> 
> 时间：2013-03-04T00:15:15.087
> 
> 标签：javascript, jquery, backbone.js, require

我正在主干中创建一个视图，该视图接受我想要渲染的集合，然后使用该集合将另一个视图附加到原始视图，但我不知道如何在集合的成功函数中引用原始视图。当我尝试以下代码时，我得到了未定义。

```
new GenreView().render(new PopVideosCollection());

define (['jquery','underscore','backbone'],function($,_,Backbone) {
GenreView = Backbone.View.extend({
    tagName:"div",
    className:"sect",
    template: _.template($("#genreView").html()),
    render: function (collection)
    {
        this.$el.html(this.template);
        collection.fetch ({success:function (video)
            {
                console.log(video.toJSON());
                                    console.log(GenreView.el);
            },
        });
    },
});
return GenreView;
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:36:06.597

您需要从回调内部获取对 GenreView 实例的引用。像这样的东西应该能让你到达那里：

```
var context = this;
collection.fetch ({success:function (video){
  console.log(video.toJSON());
  console.log(context.el);
  }
}); 
```

但是，您应该重新考虑一下您的方法。最好在您的收藏上调用 fetch，并让视图订阅`reset`您收藏的事件。从您的示例代码开始，它看起来像：

```
var GenreView = Backbone.View.extend({

  initialize: function() {
    this.listenTo(this.model, "reset", this.appendSubView);
  },

  render: function() {
     this.model.fetch();
  },
  appendSubView : function(video){
     console.log(video.toJSON());
     console.log(this.el);
  }

}); 
```

# jquery - jQuery 滚动动画

> ID：15192596
> 
> 赞同：0
> 
> 时间：2013-03-04T00:15:16.783
> 
> 标签：jquery, scroller

我正在研究视差滚动器，需要一些关于 jquery 动画的帮助。

```
if($(window).scrollTop() >= 180){
    $("#wasBorn").animate({"top": "+=20px"}, "fast");       } 
```

当页面滚动超过 180 时，div 正在移动，我该如何在特定位置停止它让我们说`top:350px`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:20:29.890

```
if( $(window).scrollTop() >= 180
    && parseInt( $('#wasBorn').css('top') )<=330 ){
  $("#wasBorn").animate({"top": "+=20px"}, "fast");
} 
```

但是，这不是一个完美的解决方案，因为`#wasBorn`元素可能会在 350px 之前停止（例如，如果它在`top`值为 320 时触发，因为在动画之后，它将处于 340 - 小于目标 350，但大于 330 的测试）。但是，由于我无法再看到您是如何触发此操作的，因此这是我目前能提出的最佳“现成”建议/解决方案。

交替...

```
$wasBorn = $('#wasBorn');
....
if( $(window).scrollTop() >= 180 ){
  var curr = parseInt( $wasBorn.css('top') );
  if( curr<350 ){
    $wasBorn.animate(
      { top : Math.min( 350 , curr+20 ) } ,
      'fast'
    );
  }
} 
```

# ruby - 修改子类的常量

> ID：15192604
> 
> 赞同：3
> 
> 时间：2013-03-04T00:16:12.060
> 
> 标签：ruby

我是 Ruby 新手，所以请原谅可能的菜鸟问题，但到目前为止，谷歌在这方面一直没有帮助。

我在父类中定义了一个类常量

```
Items = [[1, 3, 5], [2, 4, 6]] 
```

然后我有一个子类，我想在其中将数组 [1, 5, 9] 添加到 Items 数组中。你能以这种方式引用超级/重新定义常量吗？

就像是

```
Items = super.Items.concat([1, 5, 9]) 
```

我希望不需要将 Items 定义与附加项目一起复制到我的子类中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-04T00:36:16.293

常量在它们定义的类或模块中以名称分隔。它们通过通常的祖先路径解决。在您的子类中，您可以定义一个与超类中同名的常量，并且初始化它的表达式可以引用超类的常量，因为子类的常量要等到初始赋值之后才会定义。像这样：

```
$ pry
[1] pry(main)> class A; Items = [[1, 3, 5], [2, 4, 6]]; end
=> [[1, 3, 5], [2, 4, 6]]
[2] pry(main)> class B < A; end
=> nil
[3] pry(main)> class B; Items; end
=> [[1, 3, 5], [2, 4, 6]]
[4] pry(main)> A::Items
=> [[1, 3, 5], [2, 4, 6]]
[5] pry(main)> B::Items
=> [[1, 3, 5], [2, 4, 6]]
[6] pry(main)> class B; Items = Items.dup << [7,8,9]; end
=> [[1, 3, 5], [2, 4, 6], [7, 8, 9]]
[7] pry(main)> A::Items
=> [[1, 3, 5], [2, 4, 6]]
[8] pry(main)> B::Items
=> [[1, 3, 5], [2, 4, 6], [7, 8, 9]] 
```

派生新常量时，`dup`如果您打算使用变异方法（如[`Array#<<`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-3C-3C)）对其进行修改，请注意原始常量。看陷阱：

```
[9] pry(main)> class A; Foo = [[1,2],[3,4]]; end
=> [[1, 2], [3, 4]]
[10] pry(main)> A::Foo
=> [[1, 2], [3, 4]]
[11] pry(main)> class B; Foo = Foo << [5,6]; end
=> [[1, 2], [3, 4], [5, 6]]
[12] pry(main)> B::Foo
=> [[1, 2], [3, 4], [5, 6]]
[13] pry(main)> A::Foo
=> [[1, 2], [3, 4], [5, 6]]
[14] pry(main)> B::Foo.object_id == A::Foo.object_id
=> true
[15] pry(main)> B::Items.object_id == A::Items.object_id
=> false 
```

您可以显式引用父命名空间中的常量，而无需使用命名超类[`Class#superclass`](http://www.ruby-doc.org/core-1.9.3/Class.html#method-i-superclass)

```
[16] pry(main)> class B; superclass::Items; end
=> [[1, 3, 5], [2, 4, 6]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T00:36:02.417

常量查找在 Ruby 中并不总是非常明显，特别是因为它通常没有作用域（例如，我们写`String`, not `::String`）

您可以在子类中覆盖它。您可以通过访问[`superclass`](http://www.ruby-doc.org/core-1.9.3/Class.html#method-i-superclass)：

```
class C < Base
  CONST = build_on(superclass::CONST)
end 
```

但是，您必须小心如何从实例和单例方法访问常量：

```
class Base
  FOO = [42]

  def self.naive
    FOO
  end

  def naive_ins
    FOO
  end

  def self.aware
    self::FOO
  end

  def aware_ins
    self.class::FOO
  end
end

class C < Base
  FOO = superclass::FOO + [:bar]
end

C.naive # => [42]
C.new.naive_ins # => [42]
C.aware # => [42, :bar]
C.new.aware_ins # => [42, :bar] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T00:21:58.230

常量的作用域是它们定义的类。因此，您可以根据需要重新定义子类中的常量。

# ruby-on-rails-3 - 嵌套路线中的一条路线不起作用

> ID：15192606
> 
> 赞同：0
> 
> 时间：2013-03-04T00:16:32.620
> 
> 标签：ruby-on-rails-3, rails-routing

我有一个用户模型，其中 has_many :portfolios 和每个 Portfolio has_many :pictures。我的路线如下所示：

```
resources :users do
  resources :portfolios do
    resources :pictures
  end
end 
```

然后我尝试像这样创建一个新的投资组合：

```
<%= link_to "new portfolio...", new_user_portfolio_path(current_user) %> 
```

使用这样的表格：

```
<%= form_for [current_user, @portfolio], html: { class: "form_settings" } do |f| %>
...
<% end %> 
```

但是当我点击“新的投资组合......”时，我的 URL`/users/12/portfolios/new`显示并出现此错误：

```
No route matches {:action=>"show", :controller=>"portfolios", :user_id=>#<User id: 12, name: "michael", password_digest: "d787f56b080945c1ec0b3343cbf962ca427bb8ef", remember_token: "dL4nPlt0E5azUMemNIvkdg", admin: false, created_at: "2013-03-03 01:18:19", updated_at: "2013-03-03 19:56:28">, :id=>#<Portfolio id: nil, user_id: 12, name: nil, created_at: nil, updated_at: nil>} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:35:30.167

我不认为错误来自创建投资组合的表单。页面上必须有一个链接`/portfolios/new`来添加图片或类似的东西，这就是失败的原因（因为投资组合是一个新记录）。

当您在`new`页面上时，您需要隐藏此链接。

# cordova - iphone应用程序上未显示jquery移动箭头/图标

> ID：15192607
> 
> 赞同：4
> 
> 时间：2013-03-04T00:16:39.063
> 
> 标签：cordova, jquery-mobile

这让我想知道发生了什么，已经有几天了..

我一直在 xcode 上开发一个概念应用程序并最初依赖于 iOS 模拟器，然后我开始在 iPhone 上对其进行测试，结果发生了一些相当奇怪的事情。

当我查看模拟器时，我有屏幕：

![在此处输入图像描述](../Images/fd3a24784c4970ababc03efae4872c10.png)

这正是我想要的样子，但后来我将它加载到 iPhone 中，我看到了： ![在此处输入图像描述](../Images/941162cbb144d9ea0a066d2eb411be5f.png)

可以清楚地看到箭头丢失的地方，标题栏等也会发生这种情况。iOS 模拟器上的箭头似乎有点偏离 - 当我在 Chrome 上打开网站时，这是可以复制的。

关于这个问题的任何想法？

再次提前感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:25:23.020

我发现问题是当我更新到 Jquery Mobile 1.3（从 1.2 开始）时，我没有更新 images 文件夹中的图标文件，这在这个版本中显然发生了一些变化。现在我更新了它们，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:46:34.760

在 iOS 设备上，文件路径区分大小写，而在模拟器上文件路径不区分大小写。您可以检查代码中的文件路径引用是否区分大小写？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T13:08:04.513

我知道这是一篇旧帖子，但我认为有趣的是，如果您正在测试的 iPhone 是视网膜，您将需要 icon-36-white.png 而不是 icon-18-white.png。因此，要么在 jquery.mobile css 中注释掉像素比为 1.5 的 @media，要么将 icon-36-white.png 图像添加到图像文件夹中，并且应该像魅力一样工作。

# php - 标记系统问题 - 重复图像

> ID：15192608
> 
> 赞同：1
> 
> 时间：2013-03-04T00:16:52.347
> 
> 标签：php, mysql

我有一个漫画网站，并实现了一个类似于 StackOverflow 的标记系统。

我想通过引入 SO 风格的标记系统为用户提供更多排序选项——每个用户可以选择和删除 1 个或多个标签……每个漫画 id 都与 1 个或多个标签相关联。

目标是：

*   如果没有选择类别和标签，函数将显示所有漫画
*   如果选择类别 x，将仅显示该类别的漫画
*   如果选择类别 x 和标签 x，将显示类别 x 和标签 x 中的所有漫画
*   如果选择了 NO 类别，但选择了标签 x、y、z，则函数将仅显示与这些标签关联的漫画

我正在使用关系表来检查是否有与所选 tagid 匹配的 imgid。

所以在数据库中，为了使图像与多个标签相关联（它应该能够），我必须再次添加相同的 imgid，但使用不同的 tagid。

![在此处输入图像描述](../Images/2f49f8c0408893edee3d9998f26af275.png)

这是查询：

```
 $sql = 
     "SELECT tbl.*, t.* 
     FROM $table tbl 
     LEFT JOIN $assocTable a ON (tbl.id = a.imgID) 
     LEFT JOIN $tagsTable t ON (t.tagid = a.tagID) 
     WHERE "; 

    $sql .= !empty($_SESSION[$sessiontagIDs]) ? "a.tagID IN (" . implode(', ', $_SESSION[$sessiontagIDs]). ") " : "1 = 1"; 
    $sql .= $catquery ." " . $order; 
```

不幸的是，这意味着漫画现在从查询中显示两次：

![在此处输入图像描述](../Images/68103bf501d49a815c7afdb6ab4d85bd.png)

我的表或查询设置不正确吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:20:15.633

问题是您正在为它匹配的每个标签获取漫画。也许您希望查询获得：

```
select distinct tbl.*
. . . 
```

或者，如果您想要同时使用标签，请使用`group_concat()`将它们放在列表中：

```
select tbl.*, group_concat(t.tagname)
. . .
group by tbl.id 
```

# java - Java 对象移动

> ID：15192610
> 
> 赞同：0
> 
> 时间：2013-03-04T00:17:26.313
> 
> 标签：java, keyboard, path-finding

我试图让一个圆圈通过键盘的输入移动。我根本无法移动对象。有人可以帮我找出问题所在吗？这是我的代码：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JPanel;

public class AlienInvader extends JPanel implements KeyListener{

    Constants constant = new Constants();

    public void update() {
        constant.x += constant.xvel;
        addKeyListener(this);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.MAGENTA);
        g.fillOval(constant.x, constant.y, 30, 30);
        repaint();
    }

    @Override
    public void keyPressed(KeyEvent e) {
        System.out.println(constant.x);
        switch(e.getKeyCode()) {
        case KeyEvent.VK_LEFT:
            constant.xvel = -1;
            break;
        case KeyEvent.VK_RIGHT:
            constant.xvel = 1;
            break;
        }
    }

    @Override
    public void keyReleased(KeyEvent e) {
        switch(e.getKeyCode()) {
        case KeyEvent.VK_LEFT:
            constant.xvel = -1;
            break;
        case KeyEvent.VK_RIGHT:
            constant.xvel = 1;
            break;
        }
    }

    @Override
    public void keyTyped(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }

} 
```

我不确定我做错了什么。我以为是因为我没有调用update方法，但是当我在paintComponent中添加了一个if语句（所以它只调用自己一次）并尝试了它时，我没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:22:31.143

首先，不要`repaint`在任何`paintXxx`方法中调用。Paint 方法通常被调用以响应对 的调用`repaint`，因此您正在创建一个令人讨厌的、永无止境的、永远消耗资源地狱的循环。

其次，`KeyListener`s 仅在 1- 注册到的组件是可聚焦的 2- 当它们注册到的组件具有焦点时才响应关键事件。

在这种情况下，它们是一个糟糕的选择。改用键[绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

第三，您没有`preferredSize`为布局管理器提供使用提示。在您的情况下，这可能是坏事，也可能不是坏事，但您的组件可能会以 0x0 的大小布局

**例子**

就像是....

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class MoveCircle {

    public static void main(String[] args) {
        new MoveCircle();
    }

    public MoveCircle() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private int xDelta = 0;
        private int keyPressCount = 0;
        private Timer repaintTimer;
        private int xPos = 0;
        private int radius = 10;

        public TestPane() {
            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0, false), "pressed.left");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0, false), "pressed.right");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0, true), "released.left");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0, true), "released.right");

            am.put("pressed.left", new MoveAction(-2, true));
            am.put("pressed.right", new MoveAction(2, true));
            am.put("released.left", new MoveAction(0, false));
            am.put("released.right", new MoveAction(0, false));

            repaintTimer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    xPos += xDelta;
                    if (xPos < 0) {
                        xPos = 0;
                    } else if (xPos + radius > getWidth()) {
                        xPos = getWidth() - radius;
                    }
                    repaint();
                }
            });
            repaintTimer.setInitialDelay(0);
            repaintTimer.setRepeats(true);
            repaintTimer.setCoalesce(true);

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(Color.RED);
            g2d.drawOval(xPos, 0, radius, radius);
            g2d.dispose();
        }

        public class MoveAction extends AbstractAction {

            private int direction;
            private boolean keyDown;

            public MoveAction(int direction, boolean down) {
                this.direction = direction;
                keyDown = down;
            }

            @Override
            public void actionPerformed(ActionEvent e) {
                xDelta = direction;
                if (keyDown) {
                    if (!repaintTimer.isRunning()) {
                        repaintTimer.start();
                    }
                } else {
                    repaintTimer.stop();
                }
            }
        }
    }
} 
```

例如...

# json - 查找json python中是否存在嵌套键

> ID：15192613
> 
> 赞同：4
> 
> 时间：2013-03-04T00:17:36.070
> 
> 标签：json, python-2.7, nested, exists

在以下 JSON 响应中，检查嵌套键“C”是否存在于 python 2.7 中的正确方法是什么？

```
{
  "A": {
    "B": {
      "C": {"D": "yes"}
         }
       }
} 
```

一行 JSON { "A": { "B": { "C": {"D": "yes"} } } }

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-19T19:24:53.200

这是一个已接受答案的老问题，但我会使用嵌套的 if 语句来代替。

```
import json
json = json.loads('{ "A": { "B": { "C": {"D": "yes"} } } }')

if 'A' in json:
    if 'B' in json['A']:
        if 'C' in json['A']['B']:
            print(json['A']['B']['C']) #or whatever you want to do 
```

或者如果你知道你总是有'A'和'B'：

```
import json
json = json.loads('{ "A": { "B": { "C": {"D": "yes"} } } }')

if 'C' in json['A']['B']:
    print(json['A']['B']['C']) #or whatever 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T23:17:01.313

使用`json`模块解析输入。然后在 try 语句中尝试从解析的输入中检索键“A”，然后从结果中检索键“B”，然后从该结果中检索键“C”。如果抛出错误，则嵌套的“C”不存在

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-29T12:55:26.293

一个非常简单和舒适的方法是使用`python-benedict`具有完整 keypath 支持的包。`d`因此，使用函数`benedict`()转换现有的 dict ：

```
d = benedict(d) 
```

现在您的 dict 具有完整的密钥路径支持，您可以使用 in 运算符检查密钥是否以 pythonic 方式存在：

```
if 'mainsnak.datavalue.value.numeric-id' in d:
    # do something 
```

请在[此处](https://github.com/fabiocaccamo/python-benedict)找到完整的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-18T11:26:13.363

我使用了一个简单的递归解决方案：

```
def check_exists(exp, value):
# For the case that we have an empty element
if exp is None:
    return False

# Check existence of the first key
if value[0] in exp:

    # if this is the last key in the list, then no need to look further
    if len(value) == 1:
        return True
    else:
        next_value = value[1:len(value)]
        return check_exists(exp[value[0]], next_value)
else:
    return False 
```

要使用此代码，只需在字符串数组中设置嵌套键，例如：

```
rc = check_exists(json, ["A", "B", "C", "D"]) 
```

# javascript - JavaScript：如何阻止随机数出现两次

> ID：15192614
> 
> 赞同：1
> 
> 时间：2013-03-04T00:17:36.767
> 
> 标签：javascript, random

如果一个数字已经出现过一次，你怎么能在使用随机数生成器时阻止它出现？

这是当前代码：

```
var random = Math.ceil(Math.random() * 24); 
```

但这些数字不止一次出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:25:35.170

您可以使用一组可能的值（我认为在您的情况下它将是 24）：

```
var values = [];
for (var i = 1; i <= 24; ++i){
    values.push(i);
} 
```

当您想选择一个随机数时，您只需执行以下操作：

```
var random = values.splice(Math.random()*values.length,1)[0]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T00:24:22.080

如果你知道你想要多少个数字那么很容易，首先创建一个数组：

```
var arr = [];
for (var i = 0; i <= 24; i++) arr.push(i); 
```

然后你可以用这个小函数来洗牌：

```
function shuffle(arr) {
  return arr.map(function(val, i) {
    return [Math.random(), i];
  }).sort().map(function(val) {
    return val[1];
  });
} 
```

并像这样使用它：

```
console.log(shuffle(arr)); //=> [2,10,15..] random array from 0 to 24 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T00:22:05.153

您始终可以使用哈希表，在使用新号码之前，请检查它是否在其中。这适用于更大的数字。现在对于 24 位，您始终可以对数组进行洗牌。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T00:24:20.153

您可以将生成的数字放入一个数组中，然后对其进行检查。如果找到该值，请重试：

```
var RandomNumber = (function()
{
    // Store used numbers here.
    var _used = [];

    return {

        get: function()
        {
            var random = Math.ceil(Math.random() * 24);
            for(var i = 0; i < _used.length; i++)
            {
                if(_used[i] === random)
                {
                    // Do something here to prevent stack overflow occuring.
                    // For example, you could just reset the _used list when you
                    // hit a length of 24, or return something representing that.
                    return this.get();
                }
            }

            _used.push(random);
            return random;
        }

    }

})(); 
```

您可以测试是否能够获得所有唯一值，如下所示：

```
for(var i = 0; i < 24; i++)
{
    console.log( RandomNumber.get() );
} 
```

当前唯一的问题是，如果您尝试获得的随机数超过您可以获得的可能数字的数量（在本例中为 24），您将收到堆栈溢出错误。

# javascript - Using Processing.js: Can I have multiple canvases with only one data-processing-source sketch.pde?

> ID：15192621
> 
> 赞同：0
> 
> 时间：2013-03-04T00:18:32.510
> 
> 标签：javascript, processing.js

using Processing.js, I would like to know if what I'm trying to do is even possible. I've looked on Pomax's tutorials, Processing.js the quick start of JS developers page, PJS the Google group, here, and I can't seem to find an answer to the question, "Can you have multiple canvases, such that they all use the same processing sketch (in my example below, engine.pde) each canvas passing variables to the sketch with the result being processing opens different images in each canvas, but edits them the same way.

So to sum up, I would like to use only 1 processing sketch, with many canvases, with each canvas telling the processing sketch a different name, and having a corresponding background image open in the sketch in each canvas.

```
<!DOCTYPE html><html><head><meta charset="utf-8">
    <script src="../../../processingjs/processing.js"></script>
    <script>
        // Tell sketch what counts as JavaScript per Processing on the Web tutorial
        var bound = false;

        function bindJavascript(instance) { // Can I pass 'instance' like this?
            var pjs = Processing.getInstanceById(instance); 
            if(pjs!=null) {
                pjs.bindJavascript(this);
                bound = true; }
            if(!bound) setTimeout(bindJavascript, 250); }

        bindJavascript('B104');
        bindJavascript('B105');

        function drawSomeImages(instance) { 
            // This is where I am trying to tell processing that each canvas has a number, and the number is assigned to a corresponding image.
            var pjs = Processing.getInstanceById(instance);
            var imageName = document.getElementById(instance);
            pjs.setup(instance);
        }
        drawSomeImages('B104');
        drawSomeImages('B105');

        // Where is the Mouse?
        function showXYCoordinates(x, y) { ... this is working ... }

        // Send images back to server   
        function postAjax(canvasID) { ... AJAX Stuff is working ...}
    </script>
    </head>
<body>
    <canvas id="B104" data-processing-sources="engine.pde" onmouseout="postAjax('B104')"></canvas>
    <canvas id="B105" data-processing-sources="engine.pde" onmouseout="postAjax('B105')"></canvas>
</body>
</html> 
```

And on the processing side:

```
/* @pjs preload=... this is all working ; */

// Tell Processing about JavaScript, straight from the tutorial...
  interface JavaScript {
    void showXYCoordinates(int x, int y); 
  }
  void bindJavascript(JavaScript js) {
    javascript = js; 
  }
  JavaScript javascript;

// Declare Variables
  PImage img;
  ... some other variables related to the functionality ...

void setup(String instance) {
  size(300,300);
  img = loadImage("data/"+instance+".png");
  //img = loadImage("data/B104.png"); Example of what it should open if canvas 104 using engine.pde
  background(img);
  smooth();
}

void draw() { ... this is fine ... }

void mouseMoved(){ ... just calls draw and checks if mouse is in canvas, fine... }

if(javascript!=null){
  javascript.showXYCoordinates(mouseX, mouseY); 
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:36:06.930

Just add a million canvas elements to your page all with the same data-processing-sources attribute, so they all load the same file. Processing.js will build as many sketches as you ask for, it doesn't care that the sketch files are the same for each one =)

(Note that what you described, one sketch instance rendering onto multiple canvases, giving each a different image, is not how sketches work. A sketch is tied to a canvas as its drawing surface. However, you can make a million "slave" sketches whose sole responsibility is to draw images when so instructed from JavaScript, and making the master sketch tell JavaScript to tell slave sketches to draw. Note that this is very, very silly. Just make JavaScript set the image, you don't need Processing if you're just showing images really)

# c - msgrcv() - 接收各种消息

> ID：15192625
> 
> 赞同：0
> 
> 时间：2013-03-04T00:19:29.167
> 
> 标签：c, ipc

在我的项目中，协议（不可更改）指定了以下结构：

```
typedef struct {
long type;
char username[USER_NAME_MAX_LENGTH];
int ipc_num;
}MSG_LOGIN;

typedef struct{
long type;
int msg_type;
char send_time[6];
char sender[USER_NAME_MAX_LENGTH];
char receiver[USER_NAME_MAX_LENGTH];
char message[MAX_MSG_LENGTH];
}MSG_CHAT_MESSAGE;

typedef struct{
long type;
int request_type;
char user_name[USER_NAME_MAX_LENGTH];
}MSG_REQUEST; 
```

客户端可以将任何这些结构发送到服务器，服务器必须做出相应的反应。我正在写一个服务器，不知道如何使用`msgrcv()`来接收它们。当我只有一个这样的结构时，这很容易——我只需将一个指向这种类型的空结构的指针传递给它。但是，如果我事先不知道我会收到哪一份呢？我应该定义`struct generic {long type; char buffer[BIG_NUMBER];}`吗？如果是这样，我能否将数据提取到单个变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:38:20.813

msgrcv()的[linux 手册页](https://www.kernel.org/doc/man-pages/online/pages/man2/msgrcv.2.html)指出您必须使用通用结构

```
struct msgbuf {
    long mtype;                             /* message type, must be > 0 */
    char username[USER_NAME_MAX_LENGTH];    /* message data */
}; 
```

我想不出任何可能的方法来避免使用通用结构。但我确信您的客户端/服务器可以修改为使用通用结构，方法是将现有结构拆分为多个其他通用结构

例如，考虑 struct **MSG_LOGIN**，一些修改，我可以建议是

```
typedef struct {
long mtype;
char username[USER_NAME_MAX_LENGTH];
int ipc_num;
}MSG_LOGIN_UNAME;

typedef struct {
long mtype;
int ipc_num;
}MSG_LOGIN_IPC_NUM; 
```

当您使用 msgrcv() 接收消息时，根据指定的类型，您可以以不同的方式处理各种结构，或者您可以将它们收集回您计划发送的结构中。

例如，收到 struct MSG_LOGIN_UNAME 和 struct MSG_LOGIN_IPC_NUM 后，可以在接收端将它们重新组装成原来的**MSG_LOGIN**结构。

**另一个可能的解决方案**：

您可以使用嵌套结构，您使用的所有类型的数据结构将与类型字段一起放入一个结构中，并在接收时根据类型访问特定结构。

# ios - 堆叠 UIView 动画和块的正确方法？

> ID：15192631
> 
> 赞同：3
> 
> 时间：2013-03-04T00:19:50.840
> 
> 标签：ios, objective-c-blocks, uiviewanimation

我只使用了一点 UIView 动画和块，基本上是一步动画。我想将几个步骤堆叠成一个序列。下面的代码似乎正在工作，但我想知道这是否是正确的方法和/或在块内放置块是否存在任何问题/限制。

尽管代码格式有点笨拙/不可读，但块似乎很棒。

```
CGRect newFrame = CGRectMake(0, 0, 500, 500);
UIView *flashView = [[UIView alloc] initWithFrame:newFrame];

flashView.tag = 999;
[flashView setBackgroundColor:[UIColor grayColor]];
[flashView setAlpha:0.f];
[self.view addSubview:flashView];

[UIView animateWithDuration:.2f
                 animations:^{
                     // STEP 1: FADE IN
                     [flashView setAlpha:1.f];
                 }
                 completion:^(BOOL finished){
                     [UIView animateWithDuration:.9f
                                      animations:^{
                                          // STEP 2: FADE OUT
                                          [flashView setAlpha:0.f];
                                      }
                                      completion:^(BOOL finished){
                                          // STEP 3: CLEAN UP
                                          [flashView removeFromSuperview];
                                      }
                      ];
                 }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:34:41.067

如果您只是用简单的代码嵌套一次，那么这种方式并不可怕。如果您打算做一些更复杂的事情，您可以尝试`animateWithDuration:delay:options:animations:completion:` 使用`delay:`它作为链接动画的一种方式。例如：

```
[UIView animateWithDuration:.2f delay:0
                    options:UIViewAnimationOptionCurveEaseIn|UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     // STEP 1: FADE IN
                     [flashView setAlpha:1.f];
                 }
                 completion:nil
 ];
[UIView animateWithDuration:.9f delay:.2f
                    options:UIViewAnimationOptionCurveEaseIn|UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     // STEP 2: FADE OUT
                     [flashView setAlpha:0.f];
                 }
                 completion:^(BOOL finished){
                     // STEP 3: CLEAN UP
                     [flashView removeFromSuperview];
                 }
 ]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T19:41:35.317

你在做什么是正确的。有时嵌套会变得丑陋。可读性的另一种选择是将每个动画放在自己的方法中：

```
-(IBAction)someButtonPressed:(id)sender {
    [self saveSomeData];
    [self fadeInAndOut];
}

-(void)fadeInAndOut {
    [UIView animateWithDuration:.2f
                     animations:^{
                         // STEP 1: FADE IN
                         [self.flashView setAlpha:1.f];
                     }
                     completion:[self fadeOut]
     ];
}

-(void (^)(BOOL))fadeOut {
    return ^(BOOL finished) {
        [UIView animateWithDuration:.9f
                         animations:^{
                             // STEP 2: FADE OUT
                             [self.flashView setAlpha:0.f];
                         }
                         completion:[self cleanUpFlashView]
         ];
    };
}

-(void (^)(BOOL))cleanUpFlashView {
    return ^(BOOL finished){
        // STEP 3: CLEAN UP
        [self.flashView removeFromSuperview];
    };
} 
```

# python - RuntimeWarning：最大值遇到无效值

> ID：15192637
> 
> 赞同：8
> 
> 时间：2013-03-04T00:20:15.353
> 
> 标签：python, numpy, runtime-error, max, nan

numpy 中的奇怪行为（错误？？）与文档相反，以下代码给出了一个 RuntimeWarning: 在 fmax 中遇到的无效值

```
a = np.random.uniform(0.1, 0.4, (5, 5))
b = np.random.uniform(0, 3.5, (5, 5))
b[0, 0] = np.nan

c = np.fmax(a, b) # Same problem with c = np.maximum(a, b) 
```

我被困住了，因为我需要在我的数组中使用这些 NaN，现在我的函数在 iPython 中停止了这个该死的警告（好吧，它们真的没有停止，但它很烦人）

**编辑**：

numpy 1.6.1

ipython 0.13.1

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-14T23:27:32.533

我也遇到同样的问题。这些警告是 numpy 的一个有意的方面，用于在用户可能遇到框架的某些限制时通知用户。的值`c`仍然在上面的代码中返回，所以它工作正常。

如果您不想再看到这些特定错误，只需根据需要修改 numpy 的警告设置：

```
np.seterr(invalid='ignore') 
```

而且您不会再看到无效值警告。

# iphone - UINavigationViewController 嵌入在 UIViewController 容器中

> ID：15192640
> 
> 赞同：1
> 
> 时间：2013-03-04T00:20:29.300
> 
> 标签：iphone, cocoa-touch

我有一个导航控制器作为自定义视图控制器容器的子视图控制器之一。有两个视图控制器充当子级 - 左侧的一个是灰色的，右侧的一个实际上是从橙色的故事板加载的导航控制器树。

显示的是图像 a。导航之前 b. 导航到下一个屏幕并按返回后。

为什么按钮的位置会这样自行改变？

![导航前](../Images/ba5c7c0230f12324a9c117c7274a154f.png)

![导航后](../Images/8a2b2d76598c997e79bae0a35d39f116.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:44:59.373

使用 IB 中的容器视图控件来解决此问题。

# javascript - 使用拼接和 for 循环删除原始数组

> ID：15192642
> 
> 赞同：0
> 
> 时间：2013-03-04T00:20:30.327
> 
> 标签：javascript, arrays, for-loop, array-splice

我正在尝试从一个数组创建多个数组，然后添加 html 字符串。我使用`.splice()`和`for`。我的主要问题是`.splice()`只显示删除的数组而不是第一个。

这是我到目前为止所拥有的：

```
array = ["a1", "a2", "a3", "b1", "b2", "b3", "c1", "c2" ,"c3","d1","d2","d3"]

for(var i = 0; i < array.length; i++){
array.splice(0,3);
console.log(array[0] + '<br/>' + '<a href="' + array[2] + '">' + array[1] + '</a>');

 } 
```

唯一的问题是这会导致：

```
b1<br/><a href="b3">b2</a>
c1<br/><a href="c3">c2</a>
d1<br/><a href="d3">d2</a> 
```

我缺少包含“a”值的第一个数组。输出所有这些数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:26:57.040

只是做这样的事情？

```
for(var i = 0; i < array.length; i+=3){
   console.log(array[i] + '<br/>' + '<a href="' + array[i+2] + '">' + array[i+1] + '</a>');
} 
```

## [jsFiddle](http://jsfiddle.net/7ceeL/)

或者您可以将拼接线移动到循环的末尾。

# java - 如何使服务器端域模型可用于客户端 Web 浏览器？

> ID：15192644
> 
> 赞同：3
> 
> 时间：2013-03-04T00:20:44.590
> 
> 标签：java, spring-mvc, client-side, server-side, domain-model

在我使用 Spring MVC 的 Web 应用程序中，我有一个丰富的域模型。我想让这个域模型可用于客户端 Web 浏览器。例如，由于我的域模型包含一个`Person`带有方法的类`Set<Person> getFriends()`和`DateTime getBirthday()`，我想在客户端使用这些方法。使用场景包括

*   在用户请求时动态更新访问浏览器的 HTML 以列出所有朋友，或者
*   按生日在 HTML 中排序`persons`。

请注意，我在这里不是为了在“视图渲染阶段”（例如 JSP）中访问我的域模型。我在这里寻找在我的 Web 应用程序用户的浏览器上访问我的域模型。因此，例如，我不想`Person`在“视图渲染阶段”对实例进行排序。我希望稍后在我的用户浏览器上进行这种排序。

我的挑战有哪些解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:55:48.020

[Ember.js](http://emberjs.com)（特别是它的[Models](http://emberjs.com/guides/models/)）和[Grails一起使用时](http://grails.org)**，完全**可以满足您的需求。我确信您可以使用任何 Java 框架来执行此操作，但 Grails 使这变得**非常**简单。以下是一些帮助您入门的模式，但[这里有一个完整的示例应用程序](https://github.com/kentbutler/todomvc-grails-emberjs)！

领域类：

```
class Person {
    String name
} 
```

控制器：

```
class PersonsController {
    def index() { render (["person": Person.list()] as JSON) }
} 
```

Ember.js 应用程序：

```
App.Store = DS.Store.extend({
   revision: 11,
   adapter:  DS.RESTAdapter.create({
    namespace: 'app'
  })
)};
App.Person = DS.Model.extend({
    name: DS.attr('string')
)}; 
```

`/app/persons`在您的浏览器中，此单个命令将通过从后端获取来填充浏览器内的数据存储。修改浏览器内的实例会自动`POST`将更新后的实例 HTTP 发送到您的控制器。

```
App.Person.list() 
```

你会想看看[我关于让两者完美和谐地一起玩](https://stackoverflow.com/questions/15307576/how-to-make-ember-js-behave-with-grails-controller-names)更复杂的应用程序的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T00:29:51.807

Javascript - 有一些框架可以帮助减轻负担。您描述的场景是对某个服务的 Ajax 调用。您可以将数据表示为 json，这将是轻量级且易于使用 javascript 添加到页面的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T20:32:39.973

Abdull 你看过 GWT（Google Web ToolKit）[http://bit.ly/YYz2Yx](http://bit.ly/YYz2Yx)吗？

下面是一些示例代码，说明了客户端组件的创建。

例如加载联系人

```
 VerticalPanel contactsPanel = new VerticalPanel();
            contactsPanel.setSpacing(4);
            String[] contactNames = constants.cwStackPanelContacts();
            String[] contactEmails = constants.cwStackPanelContactsEmails();
            for (int i = 0; i < contactNames.length; i++) {
              final String contactName = contactNames[i];
              final String contactEmail = contactEmails[i];
              final Anchor contactLink = new Anchor(contactName);
              contactsPanel.add(contactLink) 
```

[http://bit.ly/12MOhZQ](http://bit.ly/12MOhZQ)（实际代码示例）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T01:53:15.250

两个流行的 javascript MVC 框架：

[http://backbonejs.org/](http://backbonejs.org/)
[http://knockoutjs.com/](http://knockoutjs.com/)

您可以亲自尝试。建议总是主观的，你的选择也总是主观的。所以自己感受一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T20:43:57.747

如果您不限于浏览器 - 以及 JavaScript，我现在会尖叫 RMI。幸运的是，似乎有一个解决方案可以让它发挥作用。我还没有尝试过，但它可能是值得的：

> jabsorb 是一个简单、轻量级的 JSON-RPC 库，用于在浏览器中运行的 Javascript 和服务器上运行的 Java 之间进行通信。它允许您从 Javascript 调用服务器上的 Java 方法，就好像它们是本地的一样，并带有自动参数和结果序列化。

[https://code.google.com/p/jabsorb/](https://code.google.com/p/jabsorb/)

# c++ - 类中的 CreateThread 错误：“DWORD (windows_thread::)(void*)”类型的参数与“DWORD (*)(void*)”不匹配？

> ID：15192648
> 
> 赞同：0
> 
> 时间：2013-03-04T00:21:42.140
> 
> 标签：c++, windows, createthread

我试图在一个类中创建一个线程，但出现错误。我只是想知道是否有办法解决这个问题，还是我必须`int main()`只在其中使用线程？

```
C:\windows_thread_2\windows_thread_2.cpp||In member function 'void windows_thread::thread()':|
C:\windows_thread_2\windows_thread_2.cpp|24|error: argument of type 'DWORD (windows_thread::)(void*)' does not match 'DWORD (*)(void*)'|
C:\windows_thread_2\windows_thread_2.cpp||In member function 'DWORD windows_thread::Thread_no_1(void*)':|
C:\windows_thread_2\windows_thread_2.cpp|70|warning: deprecated conversion from string constant to 'char*'|
||=== Build finished: 1 errors, 1 warnings ===| 
```

继承人的代码。

```
#include <windows.h>
//#include <strsafe.h>
#include <stdio.h>

#define BUF_SIZE 255

class windows_thread
{
//-------------------------------------------------------------------
// A function to Display the message indicating in which tread we are
//-------------------------------------------------------------------
    public:

        windows_thread(){}
        ~windows_thread(){}
        void thread()
        {
            int Data_Of_Thread_1 = 1;            // Data of Thread 1
            HANDLE Handle_Of_Thread_1 = 0;       // variable to hold handle of Thread 1

            HANDLE Array_Of_Thread_Handles[1];   // Aray to store thread handles

    // Create thread 1.
            Handle_Of_Thread_1 = CreateThread( NULL, 0, Thread_no_1, &Data_Of_Thread_1, 0, NULL);
            if ( Handle_Of_Thread_1 == NULL)  ExitProcess(Data_Of_Thread_1);

    // Store Thread handles in Array of Thread Handles as per the requirement of WaitForMultipleObjects()
            Array_Of_Thread_Handles[0] = Handle_Of_Thread_1;

    // Wait until all threads have terminated.
            WaitForMultipleObjects( 1, Array_Of_Thread_Handles, TRUE, INFINITE);

            printf("Since All threads executed lets close their handles \n");

    // Close all thread handles upon completion.
            CloseHandle(Handle_Of_Thread_1);
        }
        void DisplayMessage (HANDLE hScreen, char *ThreadName, int Data, int Count)
        {
            TCHAR msgBuf[BUF_SIZE];
            size_t cchStringSize;
            DWORD dwChars;

    // Print message using thread-safe functions.
    //StringCchPrintf(msgBuf, BUF_SIZE, TEXT("Executing iteration %02d of %s having data = %02d \n"), Count, ThreadName, Data);
    //StringCchLength(msgBuf, BUF_SIZE, &cchStringSize);
            WriteConsole(hScreen, msgBuf, cchStringSize, &dwChars, NULL);
            Sleep(1000);
        }

//-------------------------------------------
// A function that represents Thread number 1
//-------------------------------------------
        DWORD WINAPI Thread_no_1( LPVOID lpParam )
        {
            int     Data = 0;
            int     count = 0;
            HANDLE  hStdout = NULL;

    // Get Handle To screen. Else how will we print?
            if( (hStdout = GetStdHandle(STD_OUTPUT_HANDLE)) == INVALID_HANDLE_VALUE )
                return 1;

    // Cast the parameter to the correct data type passed by callee i.e main() in our case.
            Data = *((int*)lpParam);

            for (count = 0; count <= 4; count++ )
            {
                DisplayMessage (hStdout, "Thread_no_1", Data, count);
            }

            return 0;
        }
};
int main()
{
    windows_thread threading;
    threading.thread();

    return 0;
} 
```

我根据答案编辑了代码，如果你能解决这个错误，请编辑它。 `line 78 error: no matching function for call to 'windows_thread::Thread_no_1()'|`

```
#include <windows.h>
//#include <strsafe.h>
#include <stdio.h>

#define BUF_SIZE 255

class windows_thread
{
//-------------------------------------------------------------------
// A function to Display the message indicating in which tread we are
//-------------------------------------------------------------------
    public:

        windows_thread(){}
        ~windows_thread(){}
        void thread()
        {
            int Data_Of_Thread_1 = 1;            // Data of Thread 1
            HANDLE Handle_Of_Thread_1 = 0;       // variable to hold handle of Thread 1

            HANDLE Array_Of_Thread_Handles[1];   // Aray to store thread handles

    // Create thread 1.
            Handle_Of_Thread_1 = CreateThread( NULL, 0,  Wrap_Thread_no_1, &Data_Of_Thread_1, 0, NULL);
            if ( Handle_Of_Thread_1 == NULL)  ExitProcess(Data_Of_Thread_1);

    // Store Thread handles in Array of Thread Handles as per the requirement of WaitForMultipleObjects()
            Array_Of_Thread_Handles[0] = Handle_Of_Thread_1;

    // Wait until all threads have terminated.
            WaitForMultipleObjects( 1, Array_Of_Thread_Handles, TRUE, INFINITE);

            printf("Since All threads executed lets close their handles \n");

    // Close all thread handles upon completion.
            CloseHandle(Handle_Of_Thread_1);
        }
        void DisplayMessage (HANDLE hScreen, char *ThreadName, int Data, int Count)
        {
            TCHAR msgBuf[BUF_SIZE];
            size_t cchStringSize;
            DWORD dwChars;

    // Print message using thread-safe functions.
    //StringCchPrintf(msgBuf, BUF_SIZE, TEXT("Executing iteration %02d of %s having data = %02d \n"), Count, ThreadName, Data);
    //StringCchLength(msgBuf, BUF_SIZE, &cchStringSize);
            WriteConsole(hScreen, msgBuf, cchStringSize, &dwChars, NULL);
            Sleep(1000);
        }

//-------------------------------------------
// A function that represents Thread number 1
//-------------------------------------------
        DWORD WINAPI Thread_no_1( LPVOID lpParam )
        {
            int     Data = 0;
            int     count = 0;
            HANDLE  hStdout = NULL;

    // Get Handle To screen. Else how will we print?
            if( (hStdout = GetStdHandle(STD_OUTPUT_HANDLE)) == INVALID_HANDLE_VALUE )
                return 1;

    // Cast the parameter to the correct data type passed by callee i.e main() in our case.
            Data = *((int*)lpParam);

            for (count = 0; count <= 1; count++ )
            {
                //DisplayMessage (hStdout, "Thread_no_1", Data, count);
            }

            return 0;
        }
        static DWORD WINAPI Wrap_Thread_no_1( LPVOID lpParam )
        {
            windows_thread *self = reinterpret_cast<windows_thread*>(lpParam);
            self->Thread_no_1();
        }
};
int main()
{
    windows_thread threading;
    threading.thread();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T00:29:09.363

线程必须是“普通函数”，而不是对类的非静态成员函数的调用——这些需要“this-pointer”的额外“隐藏”参数。

由于到目前为止您的代码没有使用任何成员变量[据我所知]，因此简单的解决方案是制作函数`static`.

如果要使用类的成员变量或成员函数，则需要有一个静态函数并将对象 ( `this`) 作为参数的（部分）传递给线程，然后使用 a`reinterpret_cast<windows_thread*>(arg);`将其转换回来。

这些方面的东西：

```
... 
    Handle_Of_Thread_1 = CreateThread( NULL, 0, Wrap_Thread_no_1, this, 0, NULL);

... 

    static DWORD WINAPI Wrap_Thread_no_1( LPVOID lpParam )
    {
          windows_thread *self = reinterpret_cast<windows_thread*>(lpParam);
          self->Thread_no_1();
    } 
```

我已经删除了你原来的论点。假设线程每个对象只运行一个线程，您可以将其设为成员变量。如果您需要具有单独参数的多个线程，那么您需要将传入的参数设置为 a `struct`or `class`，然后`reinterpret_cast`将`this`指针存储为`struct`or `class`[这可能`windows_thread*`不需要强制转换]的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T00:26:58.180

您正在尝试将[指向成员的指针](http://www.parashift.com/c++-faq/fnptr-vs-memfnptr-types.html)传递给线程，这与此处的原始指针不同。它需要一个对象附加到它上面。

```
Handle_Of_Thread_1 = CreateThread( NULL, 0, Thread_no_1, &Data_Of_Thread_1, 0, NULL); 
```

`static`通过改变这个来制作函数：

```
 DWORD WINAPI Thread_no_1( LPVOID lpParam ) 
```

对此：

```
 static DWORD WINAPI Thread_no_1( LPVOID lpParam ) 
```

...它（正确地）声明此功能不需要`this`.

# javascript - 处理一个 JQuery 元素数组以与复选框交互

> ID：15192654
> 
> 赞同：1
> 
> 时间：2013-03-04T00:22:16.450
> 
> 标签：javascript, jquery, arrays, checkbox

我基本上想要做的是构建一个 JQuery 元素数组以便与复选框交互，元素是 $(.arms) 和 $(.neck)

Javascript：

```
var elements = new Array ($('.arms'),$('.neck'));

for (var i=0; i < elements.length; i++) {

elements[i].change = function() {

elements[i].not(this).prop('disabled',this.checked);

});

} 
```

HTML：

```
<input type="checkbox" id="15000" class="arms"/>$50<br/>
<input type="checkbox" id="9400" class="arms"/>$60<br/>
<input type="checkbox" id="9500" class="neck"/>$70<br/>
<input type="checkbox" id="9600" class="neck"/>$80<br/> 
```

这是[小提琴](http://jsfiddle.net/VTShe/1)

这是应该做的，但仅适用于 1 个元素：[一个元素小提琴](http://jsfiddle.net/davidThomas/2H5kB/11/)

我想我已经很接近了，但有些东西不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:28:50.660

`**[LIVE DEMO](http://jsfiddle.net/VTShe/2/)**`

```
$('.arms, .neck').change(function(){
    var myClass = $(this).attr('class'); 
    $('.'+myClass).not(this).prop('disabled', this.checked); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:28:40.527

```
$(".arms, .neck").on("change", function() {

    $(".arms, .neck").not(this).prop('disabled',this.checked);
}); 
```

一起做类，jQuery 处理数组。

# iphone - iPhone：GLKTextureInfo 无法使用 Grand Central Dispatch 工作？

> ID：15192658
> 
> 赞同：1
> 
> 时间：2013-03-04T00:22:43.690
> 
> 标签：iphone, opengl-es, grand-central-dispatch, glkit

我正在使用 GLKit 开发一个 iPhone OpenGL 应用程序，并使用以下代码创建纹理：

```
NSRange dotRange = [textureFileName rangeOfString:@"." options:NSCaseInsensitiveSearch];
        if (dotRange.location == NSNotFound){
            NSLog(@"OpenGLDRawMaterial:createTextureFromFileName, incorrect file name given in inputs");
            return nil;
        }   

   GLKTextureInfo *newTexture;

        NSError *error = nil;   // stores the error message if we mess up
        NSString *bundlepath = [[NSBundle mainBundle] pathForResource:[textureFileName substringToIndex:dotRange.location] 
                                                               ofType:[textureFileName substringFromIndex:(dotRange.location+1)]];

newTexture = [GLKTextureLoader textureWithContentsOfFile:bundlepath options:[NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:GLKTextureLoaderOriginBottomLeft] error:&error]; 
```

该代码运行良好，只要它在主线程中运行。每次我尝试让它在工作线程中工作时，我都会收到以下消息：

“2013-03-04 02:09:01.528 Puppeteer[7063:1503] 从图像加载纹理时出错：错误域=GLKTextureLoaderErrorDomain Code=17”操作无法完成。（GLKTextureLoaderErrorDomain 错误 17。）“UserInfo=0x1c5977e0”

我用于大型中央调度队列的代码是：

```
dispatch_queue_t backgroundQueue = dispatch_queue_create("loadPlayViewBackgroundTexture", 0);

    dispatch_async(backgroundQueue, ^{
       [self createTexturesForPlayView]; // method calling texture creation

        dispatch_async(dispatch_get_main_queue(), ^{
                  });
             });
             dispatch_release(backgroundQueue); 
```

如果您有任何见解或想法如何解决此问题并在后台加载纹理，我将非常感激 :) 干杯，Stéphane

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:29:45.107

请注意，在文档中`+textureWithContentsOfFile:options:error:`包含此声明：[在此处查看](https://developer.apple.com/library/mac/#documentation/GLkit/Reference/GLKTextureLoader_ClassRef/Reference/Reference.html)

`This class method loads the texture into the sharegroup attached to the current context for the thread this method is called on.`

当您`-textureWithContentsOfFile:`从后台线程调用时，该线程没有设置 OpenGL 上下文（当前 GL 上下文是每个线程的状态），因此 GLKit 不知道要将纹理加载到哪个共享组。

但是，你让这变得比它需要的更难。GLKit 已经可以自己管理异步纹理加载。看看变种`-textureWithContentsOfFile:options:queue:completionHandler:`。您根本不必创建自己的队列：您只需传入主队列即可在加载完成时接收通知。

# c# - SocketException 读取 Socket 中的部分可用数据时

> ID：15192659
> 
> 赞同：0
> 
> 时间：2013-03-04T00:23:05.717
> 
> 标签：c#, .net, sockets, udp

我有一个 UdpClient 来回发送小数据报到另一个客户端。我试图通过使用一次从套接字缓冲区中提取一个数据报

```
udpClient.Client.Receive(byte[] buffer, int offset, int size, SocketFlags socketFlags); 
```

我有两个问题。第一个问题是在接收时，我从套接字中提取的字节少了一个字节，我得到了一个 SocketException：

> 在数据报套接字上发送的消息大于内部消息缓冲区或其他网络限制，或者用于接收数据报的缓冲区小于数据报本身

当（试图从可用的 7 个字节中提取 6 个字节）时就是这种情况：

```
Client.Available = 7
buffer = byte[1024]
offset = 0
size = 6
socketFlags = SocketFlags.None 
```

底层的套接字缓冲区大小很大，比如 8k。我发现如果我设置 size=Client.Available，我不会收到此错误。出于某种原因，我不喜欢我只尝试从套接字中提取 7 个字节中的 6 个。

为了解决这个问题，我使用了重载

```
udpClient.Client.Receive(byte[] buffer, int offset, int size, SocketFlags socketFlags, out SocketError socketError); 
```

并忽略了“错误”。这让我收到了 7 个字节中的 6 个。

然而，这让位于第二个问题，即：

当我拉出套接字上可用的 7 个字节中的 6 个时，缓冲区刷新，并且 Socket.Available = 0。让我感到困惑的是，这段代码可能在 6 个月前工作，但在不同的机器上。我做了一些阅读，我猜 SocketException 可能是由操作系统访问套接字引起的，但我当时和现在都使用 Windows 7 64 位。有没有人遇到过这样的问题，或者可能有一些知识可以阐明这个问题？感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:46:24.767

您应该一次读取整个数据报。如果你不这样做，充其量剩下的就会丢失。它不是像 TCP 那样的字节流。

# c# - simplemembership MVC4通过userId获取用户名

> ID：15192660
> 
> 赞同：2
> 
> 时间：2013-03-04T00:23:30.710
> 
> 标签：c#, asp.net-mvc-4, membership, simplemembership

使用 MVC4 和 SIMPLEMEMBERSHIP 的人知道如何通过 userId 获取用户名？用户未登录，我想删除它，要删除我必须使用

```
Membership.DeleteUser(string username) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T13:05:39.297

您可以使用以下`GetUserNameFromId`方法`SimpleMembershipProvider`：

```
SimpleMembershipProvider provider = new SimpleMembershipProvider();
string name = provider.GetUserNameFromId(id); 
```

确保您有参考，`WebMatrix.WebData`以便您可以使用`SimpleMembershipProvider`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T16:26:14.287

```
SimpleMembershipProvider provider = (SimpleMembershipProvider)Membership.Provider;

string username= provider.GetUserNameFromId(12345); 

//12345 is the id in SM UserProfile db table 
```

# python - Matplotlib Contourf 在 Alpha < 1 时绘制不需要的轮廓

> ID：15192661
> 
> 赞同：5
> 
> 时间：2013-03-04T00:23:33.543
> 
> 标签：python, matplotlib, alpha

我在 Python 2.7 中使用 matplotlib 来绘制填充轮廓图。我想将它覆盖在图像上，所以我使用 alpha 关键字使绘图半透明。当我这样做时，轮廓的主体是正确的透明度，但是 contourf() 在不同级别之间的边界上绘制不需要的线。我试图用关键字参数 linecolor='none' 来消除它们，但这并没有帮助。

代码：

> CS = map.contourf(xi, yi, zi, 25, alpha=0.3, linecolor='none')

问题图片示例的链接；我希望填充的轮廓在没有明亮边界线的情况下相遇：

![](../Images/e2aad18d14943fd6810bfbc0983bcceb.png)

对此问题的任何帮助或见解表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T01:23:25.840

尝试开启`antialiased=True`：

```
x, y = np.mgrid[-1:1:100j, -1:1:100j]
contourf(x, y, x**2+y**2 + np.random.rand(100, 100)*0.1, 10, alpha=0.3, antialiased=True) 
```

这是我的结果：

![在此处输入图像描述](../Images/31d0b7298a5790465e770949b862eaca.png)

# c# - 如何在单个 spritebatch 中多次设置相同的像素着色器参数

> ID：15192664
> 
> 赞同：0
> 
> 时间：2013-03-04T00:24:02.950
> 
> 标签：c#, .net, xna, shader, pixel-shader

我在 XNA 中使用 Effect 类进行测试，我想多次设置相同的参数（下面代码中的 MyParameter）。

我的代码是：

```
[...]
//In Engine class
Effect ShaderEffect = GameEngine.Instance.Content.Load<Effect>(@"shaders\test");

spriteBatch.Begin(
    SpriteSortMode.Deferred,
    BlendState.AlphaBlend,
    SamplerState.PointWrap,
    DepthStencilState.Default,
    RasterizerState.CullNone,
    ShaderEffect);

[...]

//in drawable class
foreach(//big loop) {
     ShaderEffect.Parameters["MyParameter"].SetValue(//random vector4);
     spriteBatch.Draw(
            SpriteSheet,
            ScreenRect,
            sprite_to_draw.Rectangle,
            color,
            rotation,
            Scene.getInstance().Camera.Position,
            sprite_to_draw.SpriteEffect,
            layer
     );
}

[...]

//In Engine class
spriteBatch.End();
[...] 
```

但是在我的屏幕上看起来参数“MyParameter”没有被覆盖。

那么我可以覆盖它吗？如果是，你知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:01:28.333

我通过劫持颜色参数来解决我的问题，如下所示：

```
/*
* hijack color desciption :
* r : offset color of refill magenta
* g : offset color of refill cyan
* b : offset color of local light
* a : 0 - 255 intensity of light color, usefull for smoothy light
*/ 
```

之后，我只需要在 spritebatch 中为与下面的 color_list 着色器数组匹配的对象指定颜色成员（r/g/b/a）：

```
color_list[0] = float4(0.969, 0.627, 0.145,1) ;     //red hair
color_list[1] = float4(1, 0.894, 0.173,1) ;         //golden red
color_list[2] = float4(0.953, 0.953, 0.953,1) ;     //white hair
color_list[3] = float4(0.1, 0.1, 0.1,1) ;           //black hair
color_list[4] = float4(0.424, 0.314, 0.082,1) ;     //brown
color_list[5] = float4(0.5,0.5,0.5,1) ;             //grey
color_list[6] = float4(1,0.906,0.098,1) ;           //gold
color_list[7] = float4(0.651, 0.643, 0.584,1) ;     //pure iron
color_list[8] = float4(0.294, 0.459, 0.6,1) ;       //bluejeans
color_list[9] = float4(0.714, 0.439, 0.114,1) ;     //leather1
color_list[10] = float4(0.714, 0.243, 0.114,1) ;    //leather2
color_list[11] = float4(1, 1, 1,1) ;    //white
color_list[12] = float4(0.027, 0.49, 0.102,1) ;     //greenpants
color_list[13] = float4(1,0,0,1) ;                  //red
color_list[14] = float4(1,1,1,0.3) ;                //ghost 
```

然后在着色器中，我使用给定的偏移量匹配/更改颜色。

# java - 如何在 Java 小程序中创建图形实例

> ID：15192670
> 
> 赞同：0
> 
> 时间：2013-03-04T00:24:27.493
> 
> 标签：java, testing, graphics, applet

我们刚刚学会了如何创建自己的类，以及我们必须处理图形的这个特殊任务。我们必须画一支蜡笔，然后创建一个测试程序，其中有 5 支蜡笔并排排列（所以我们只需更改每个蜡笔的颜色和 x、y）。我知道如何改变颜色和 x,y 坐标，但我的问题是......

我如何“打印”每支蜡笔？是的，它是一个小程序，是的，我知道我需要一个 .html 文件。但是，当我运行 .html 文件时，为了让蜡笔出现在测试程序中究竟发生了什么？我以前在测试程序中运行过非小程序`System.out.println`，但从未使用任何图形。会是这样`System.out.println(Crayon);`吗？

另外，如何获得多支蜡笔？我假设它是`Crayon crayons = new Crayon`;，然后下一个可能是'Crayon crayons2 = new Crayons;`？我不确定。

x,y 坐标需要使用每个蜡笔进行修改，但分配的 UML 告诉我不要将它们设为实例变量，而是将其放入“公共 void paint (Graphics g, int x, int y)”中。到目前为止我对测试程序的了解（可能正确也可能不正确）：

```
import javax.swing.JApplet;
import java.awt.*;

public class BoxOfCrayons extends JApplet {
   Crayon first = new Crayon (Color.red, 50, 250) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:19:32.617

首先阅读[2D Graphics](http://docs.oracle.com/javase/tutorial/2d/index.html)。

基本上，您将需要创建某种`Cryon`s 列表。这可以是一个[`Collection`](http://docs.oracle.com/javase/tutorial/collections/index.html)或数组，这取决于你知道什么。我个人会使用 a `ArrayList`，因为它灵活且易于使用，但不会受到与数组相同的限制。

接下来，为您自己创建一个自定义组件（即`BoxOfCryons`），该组件从`JPanel`. 覆盖此类`paintComponent`方法。在此方法中，遍历`Cryon`s 列表并绘制每一个，将`x`偏移量增加 last 的宽度`Cryon`。

```
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g.create();
    int x = 0;
    int y = 0;
    for (Crayon crayon : cryons) {
        crayon.paint(g2d, x, y);
        x += crayon.getWidth();
    }
    g2d.dispose();
} 
```

为自己创建一个从`JApplet`. 在它的`init`方法中，将小程序布局管理器设置为`BorderLayout`并向其添加类的实例`BoxOfCryons`。

# javascript - XSS - 不转义，但不渲染

> ID：15192671
> 
> 赞同：-3
> 
> 时间：2013-03-04T00:24:41.863
> 
> 标签：javascript, html, xss, exploit

我有一个网站，其中一个页面`http://www.example.com/errorpage.html?errmsg="Some error string"`

然后这个错误字符串被渲染到`<p class="error">Some error string</p>`时尚服务器端的网页中，然后 HTML 被发送到客户端。

过去我一直在尝试，看看我是否可以摆脱这种情况并在没有成功的情况下更改标记。

是否有可能，或者页面是否安全。

谢谢-米切尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:30:52.350

[这个网站](http://www.technicalinfo.net/papers/CSS.html)有一个非常全面的 CSS/XSS 漏洞列表，以及具体的例子。但是，允许通过查询参数呈现错误消息是非常可疑的，即使这些向量都不起作用，也不能保证将来不会出现某些向量。

# c# - 在 C# 中使用循环计算阶乘

> ID：15192673
> 
> 赞同：3
> 
> 时间：2013-03-04T00:25:12.270
> 
> 标签：c#, math, loops, for-loop

这是我到目前为止所拥有的：

```
namespace factorials
{
    class Program
    {
        static void Main(string[] args)
        {
            int number;

            do
            {
                Console.WriteLine("What non-negative integer do you want to factorial?");
                while (!int.TryParse(Console.ReadLine(), out number))
                    Console.WriteLine("Please enter a whole number only");
                calculate(ref number);
            } while (number >= 0);
            Console.WriteLine("Please enter a non-negative number");

        }
        static void calculate(ref int number)
        {
            int factorial;
            int counter;

            for (counter = number; counter <= number; counter++)
            {
                factorial = number * number;
                Console.WriteLine("The factorial of {0} is {1}", number, factorial);
            }

    }
    }
    } 
```

现在它只给我数字的平方，而不是它们的阶乘。如何让它重复输入的次数，从而产生阶乘？

另外我不确定是否有必要将程序限制为仅非负整数，但如果我想要那部分只是在那里结束程序而不是循环回到开头。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T00:32:06.267

for 循环根本没有任何意义！如果您正在寻找阶乘，则必须将所有数字从 1 乘以给定数字。那将是：

```
int factorial = 1;

for (counter = 1; counter <= number; counter++)
{
    factorial = factorial * counter;

}

Console.WriteLine("The factorial of {0} is {1}", number, factorial); 
```

这将计算一个数字的阶乘。您必须为所有想要的数字重复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:30:35.520

您的循环将数字的平方分配给循环中的结果，然后立即退出。您需要对其进行更改，以使结果重复乘以从 1 到 N 的数字（包括 1 到 N）。

将 1 分配给阶乘，并在循环中乘以计数器：

```
factorial *= counter; 
```

不要忘记从 1 开始计数器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T00:31:18.777

我会给你提示。

1.  将变量初始化为 1。假设它为`Answer`.
2.  运行从 1 到 Number 的循环，执行 的操作`Answer = Answer * loopIterationVariable`。每次迭代后，循环迭代变量加 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-30T14:41:50.140

```
static void Main(string[] args)
    {

        Console.WriteLine("Enter an integer number to factorise");

        int ans = 1;
        int a = int.Parse(Console.ReadLine());

        for (int i = 1; i <= a; i++)
        {
            ans = ans * i;
        }
        Console.WriteLine(ans.ToString());
        Console.ReadLine();             
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-01T23:14:59.520

```
 string str = Interaction.InputBox("Enter the number to find the factorial of: ");
        double counter = double.Parse(str);
        long factorial = 1;

        while (counter > 1)
        {
            factorial *= (long)counter--;//factorial = factorial * counter - 1
        }
        MessageBox.Show("The factorial of " + str + " is " + String.Format("{0:N}", factorial)); 
```

我使用了方法`Microsoft.VisualBasic`参考`Interaction.InputBox()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-16T04:31:35.470

递归实现以及基本实现如下

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication50
{
    class Program
    {
        static void Main(string[] args)
        {

        NumberManipulator manipulator = new NumberManipulator();
        Console.WriteLine("Please Enter Factorial Number:");
        int a= Convert.ToInt32(Console.ReadLine());

        Console.WriteLine("---Basic Calling--");
        Console.WriteLine("Factorial of {0} is: {1}" ,a, manipulator.factorial(a));

        Console.WriteLine("--Recursively Calling--");
        Console.WriteLine("Factorial of {0} is: {1}", a, manipulator.recursively(a));

        Console.ReadLine();
    }
}

class NumberManipulator
{
    public int factorial(int num)
    {
        int result=1;
        int b = 1;
        do
        {
            result = result * b;
            Console.WriteLine(result);
            b++;
        } while (num >= b);
        return result;
    }

    public int recursively(int num)
    {
        if (num <= 1)
        {
            return 1;
        }
        else
        {
            return recursively(num - 1) * num;
        }
    }
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-20T08:24:58.103

```
 private void btnCalculate_Click(object sender, EventArgs e)
    {
        try
        {
            userinputF = Int32.Parse(txtFaculteit.Text);
            for (counter = 1; counter <= userinputF; counter++)
            {
                answer = answer *=  counter;
            }          
        }
        catch (Exception exception)
        {

                MessageBox.Show("Please fill in a number " + exception.Message);
        }

        lblAnswerFaculteit.Text = lblAnswerFaculteit.Text + "The faculty of " + userinputF + " = " + answer;
    }
} 
```

}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-20T08:35:21.613

```
 int userinputF;
    int counter;
    int answer =1;

    public Form1()

    {
        InitializeComponent();

    }

    private void btnCalculate_Click(object sender, EventArgs e)
    {
        try
        {
            userinputF = Int32.Parse(txtFaculteit.Text);
            for (counter = 1; counter <= userinputF; counter++)
            {
                answer = answer *=  counter;
            }          
        }
        catch (Exception exception)
        {

                MessageBox.Show("Please fill in a number " + exception.Message);
        }

        lblAnswerFaculteit.Text = lblAnswerFaculteit.Text + "The faculty of " + userinputF + " = " + answer;
    }
} 
```

}

# android - CSS - 兄弟选择器在 android 中不起作用？

> ID：15192674
> 
> 赞同：5
> 
> 时间：2013-03-04T00:25:15.830
> 
> 标签：android, css, siblings

此代码在桌面上的 Chrome 中运行良好，但在 android 股票浏览器中运行良好：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
input:checked ~ span {color:red;}
</style>
</head>
<body>
<label>
<input type="checkbox" />
<span>First item</span>
</label>
</body>
</html> 
```

基本上，当您单击 hte 复选标记时，跨度标记文本应变为红色。我的 android 4.0 的 Galaxy Note 没有变红。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T00:31:53.973

[http://quirksmode.org/css/selectors/mobile.html](http://quirksmode.org/css/selectors/mobile.html)

支持兄弟选择器

:checked 伪类不是

# c# - WPF 的自定义皮肤引擎

> ID：15192675
> 
> 赞同：2
> 
> 时间：2013-03-04T00:25:23.690
> 
> 标签：c#, wpf, templates, themes, skin

我想让我的应用程序（C# + WPF）的用户构建自己的主题和皮肤。实现这一目标的最佳方法是什么？是否有一些示例或者我需要寻找某种“皮肤引擎”？

来自网络开发，我通常同时使用 XAML 和图像来构建 UI ......但是这样所有源都将被“硬编码”，嵌入到主 exe 或某些 dll 中......

相反，我想要一些包含所有参数（如颜色、间距、尺寸、字体大小等）的文本文件以及包含在 jpg 或 png 格式的文件夹中的所有图像。可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:05:35.183

我不知道有任何预构建的 WPF 蒙皮引擎允许用户选择颜色并更新应用程序。但是，我在 WPF 应用程序中对您的“具有所有参数的文本文件......”使用了类似的方法，并且效果相对较好。

我们使用了一个带有主题颜色/图标/等的 XML 文件。在运行时加载并用于使用公司定义的颜色和图像更新应用程序资源。根据您的架构，您还可以将皮肤/主题存储在数据库中。

为了使它起作用，有几个建议：

*   定义一组`Colors`可在整个应用程序中使用的标准（例如 LightControlColor、ControlColor、DarkControlColor、LightBackgroundColor、BackgroundColor、Dark...）。这些是 XML 文件中定义的颜色，将在皮肤/主题更改时更新。
*   `Brushes`定义将在所有 XAML 中使用的标准集。这些画笔将使用`Colors`，因此 ControlBackgroundBrush 可以`SolidColorBrush`由其中一种`Colors`（从上面）组成，也可以`LinearGradientBrush`由多种颜色组成。
*   在任何地方使用`DynamicResource`，而不是`StaticResource`这样当您`Color`根据 XML 文件更新资源时，所有内容都会更新。
*   您需要在显示主窗口之前更新 ，`Colors`因为`Application.Resources`在`DynamicResources`呈现视觉元素时会对其进行评估。在加载、解析和合并皮肤时，启动画面是一种吸引用户的好方法。
*   我们没有太多图像，但我相信我们以二进制格式将我们拥有的图像存储在 XML 中。
*   我们构建了一个单独的应用程序来创建皮肤/主题。这是独立于主应用程序分发的，并且严格用于创建和更新皮肤。

# ruby-on-rails - Heroku CSS 和图像文件没有更新？

> ID：15192679
> 
> 赞同：1
> 
> 时间：2013-03-04T00:25:35.090
> 
> 标签：ruby-on-rails, heroku, assets

我已经阅读了其他类似问题的问题，并尝试了他们的修复无济于事:(

我有一个 Rails 应用程序，当我在其中更改 CSS 文件或将图像添加到 assets/images 目录，然后将代码推送到 heroku 时，该站点不会更新。Heroku 正在继续处理我的 css 文件的旧版本。它会更新对 HTML 文件所做的更改，但不会更新 CSS 或图像。我的 GitHub 存储库更新正确，并且与应用程序相关联。我完全了解最新的承诺。

我已经尝试过`heroku run rake assets:precompile`，`heroku restart`但仍然没有。在测试之前，我已经清除了我的缓存和所有浏览历史记录，但什么也没有。

一些背景：它目前是一个免费的应用程序；这会影响我的问题吗？此外，该应用程序可在[此处](http://arcane-badlands-8218.herokuapp.com)找到。对我来说，我只能看到顶级项目的图像，并且我的所有项目之间的边距为 0，尽管我的本地 CSS 文件（和 GitHub 版本）规定了边距。

代码本身也可以在[这里](http://github.com/mful/MySite)找到。

谢谢阅读！对于这个问题的一些见解，我将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:45:22.470

来自评论：预编译资产并将它们提交到 repo 是另一种选择，因此您不要让 heroku 处理资产编译。

# python - wxPython 消息对话框不适用于函数

> ID：15192680
> 
> 赞同：1
> 
> 时间：2013-03-04T00:25:44.947
> 
> 标签：python, string, unicode, wxpython, messagedialog

我是 Python 新手，刚开始用 wxPython 编写一个基本的 GUI 程序。我有一系列文本框，用户在其中输入数据，然后单击提交按钮。

提交按钮为每个框触发一个`getvalue`方法（看起来像`a=self.textbox1.GetValue()`）。

有一个简单地读取的函数`answer=a+b+c+d+e+f+g+h`。

最后是在对话框`wx.MessageDialog(self, answer, Title, wx.OK | wx.ICON_EXCLAMATION)`中打印答案的。`msg`

但是，它不是打印数字的总和，而是按一系列打印它们。

我搞砸了，用实际整数替换了答案函数中的变量，它给了我一个错误，上面写着：

> 需要字符串或 Unicode 类型

我真的想不出任何方法来解决它，因为我只有两天的 Python 经验。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:11:26.647

`GetValue()`为您提供输入内容的字符串值。

您想在尝试对它们求和之前将字符串转换为整数。

```
a = int(self.textbox1.GetValue()) 
```

# ruby-on-rails - Rails 3.2验证字符串包含默认值未检测到

> ID：15192687
> 
> 赞同：1
> 
> 时间：2013-03-04T00:27:21.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我正在使用带有模型字段的 mongoid 并给出验证：

```
field :status, type:String, :default=>'Active'
validates :status, :inclusion=>{:in=>%w(Active, Done, Canceled, Merged)}, :allow_nil=>true, :allow_blank=>true 
```

在表单中，我没有状态字段，所以它应该不是 POST-ed，因此它在创建时为零：

```
= simple_form_for([@user, @task], :html => {:class=>'form-horizontal',:'data-type'=>'html'}) do |f|
  - if @task.errors.any?
    .error_explanation
      .alert.alert-error
        The form contains
        = pluralize(@task.errors.count, 'error')
      %ul
        - @task.errors.full_messages.each do |msg|
          %li=msg
  .form-inputs
    = f.error_notification
    = f.association :project, :collection => current_user.projects.all
    = f.input :description, :as => :text, :input_html => {:rows => 5}
    = f.input :priority, :as=>:radio_buttons, :collection=>1..4, :item_wrapper_class=>'inline'
    = f.input :due_date

    .control_group.select.optional
      = f.label :assigned_to, :class=>'select optional control-label', :for => 'assigned_to_id'
      .controls
        = f.collection_select :assigned_to_id, User.all, :id, :username, :class => 'select optional'

  .form-actions
    = f.button :submit, :class => 'form-button btn-primary', 'data-loading-text' => 'Submitting...' 
```

但是，尽管设置了默认值“Active”，我仍然得到这个，这显然是在为包含验证提供的数组中：

```
Status is not included in the list 
```

为什么我仍然收到此错误？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:29:50.927

这是你的问题

```
%w(Active, Done, Canceled, Merged) 
```

这转化为

```
["Active,", "Done,", "Canceled,", "Merged"] 
```

解决方案是删除逗号

```
%w(Active Done Canceled Merged) 
```

# visual-studio-2010 - 字符处理 VB

> ID：15192689
> 
> 赞同：-2
> 
> 时间：2013-03-04T00:27:43.530
> 
> 标签：visual-studio-2010, try-catch

如果我想对 char 使用 Try-Catch 并确保在我输入数值时它不会运行程序，我将如何在 Visual Basic 中执行此操作？一小段代码的例子会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:11:50.717

您不应该将 a `Try/Catch`用于正常的程序控制流。例外就是这样：您不希望正常发生的特殊情况。

当字符包含数字时，不要使用异常来炸毁，而是防止它被存储在第一个实例中。

实现这一点的一个好方法是添加一个[`KeyPress`](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventhandler.aspx)处理程序。

这是一个仅允许数字和退格键的 KeyPress 处理程序示例（它在 C# 中，但很容易转换为 VB.NET）：

```
 private void txtTimeout_KeyPress(object sender, KeyPressEventArgs e)
    {
        e.Handled = !(Char.IsNumber(e.KeyChar) || e.KeyChar == '\b');
    } 
```

> 将 KeyPressEventArgs.Handled 设置为 true 以取消 KeyPress 事件。这使控件无法处理按键。

[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventhandler.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)和 StackOverflow 上还有更多示例。

```
Private Sub textBox1_KeyPress(sender As Object, e As System.Windows.Forms.KeyPressEventArgs) _
    Handles textBox1.KeyPress

    ' Determine what is a valid key press 
    If Char.IsNumber(e.KeyChar) = True Then 
        ' Stop the character from being entered into the control since it is numeric
        e.Handled = True 
    End If 

End Sub 
```

# css - Internet Explorer hack 用于将鼠标悬停在非链接元素上？

> ID：15192691
> 
> 赞同：1
> 
> 时间：2013-03-04T00:28:04.880
> 
> 标签：css, internet-explorer, cross-browser, internet-explorer-9

我有：

```
UL LI:hover {
    background-color: #729518;
} 
```

它适用于除 IE (<=9) 之外的所有浏览器。我似乎只能用 IE`:hover`在实际`a`标签上设置样式。

有谁知道破解`:hover`其他元素的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:30:40.103

这家伙认为它只有在您拥有 HTML 4.01 严格的 DOCTYPE 时才有效：[http ://www.bernzilla.com/item.php?id=762](http://www.bernzilla.com/item.php?id=762)

要获得更完整的悬停支持，您可能需要使用 Javascript 解决方案。

# css - FLEX - 是否可以将默认表单项标签字体粗细从粗体覆盖为正常？

> ID：15192698
> 
> 赞同：0
> 
> 时间：2013-03-04T00:28:40.173
> 
> 标签：css, apache-flex

我正在尝试取消加粗表单项中的标签。如您所见，标签以编程方式对颜色更改做出反应，但不受 fontWeight 属性更改的影响。有人有建议吗？

谢谢你。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx">

        <fx:Style>
            @namespace mx "library://ns.adobe.com/flex/mx";
            @namespace s "library://ns.adobe.com/flex/spark";
            global {
                font-family: Verdana;
                fontWeight: normal;
            }

            s|Label#labelDisplay {
                color: red;
                fontWeight:normal;
            }
        </fx:Style>

    <s:Form>
        <s:FormItem label="Please enter a string:" fontWeight="normal">
            <s:TextInput/>
        </s:FormItem>
    </s:Form>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:30:38.933

尝试直接在[FormItem](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/FormItem.html#SkinPartSummary)的 labelDisplay Skin Part 上设置 fontWeight 样式。您可能必须在 ActionScript 中执行此操作。尝试这样的事情：

```
<s:FormItem id="stringLabel" label="Please enter a string:" creationComplete="{stringLabel.labelDisplay.setStyle('fontWeight','normal'}" > 
```

因为 FormItem 只是一个 SkinnableContainer；我对 fontWeight 没有影响并不感到惊讶。然而，令人沮丧的是，这种风格并没有传递给标签 child。

# c++ - 如何重写它以使其符合 C++ 标准

> ID：15192700
> 
> 赞同：3
> 
> 时间：2013-03-04T00:28:45.477
> 
> 标签：c++, templates, template-specialization

下面的代码片段演示了我想要实现的目标，即创建两个模板特化（嗯，这里是一个主模板和一个特化），一个用于非常量成员函数，一个用于 const 成员函数：

```
// instantiate for non-const member functions
template <typename C, void(C::*F)()>
struct A {};

// instantiate for const member functions
template <typename C, void(C::*F)() const>
struct A<C const, F> {};

struct foo
{
    void bar() const {}
    typedef A<foo const, &foo::bar> bar_type;

    void baz() {}
    typedef A<foo, &foo::baz> baz_type;
}; 
```

虽然此代码使用 gcc 4.7、Intel 13.0 和 MSVC 2012 编译良好，但使用 Clang 3.3 或 Comeau 4.3.10.1 编译失败。我相信 Clang 实际上是对的。

如何重写此代码以使其符合标准（即使用 Clang 编译）？

这是编译错误：

```
test_6.cpp:22:26: error: non-type template argument of type 'void (foo::*)() const' cannot be converted to a value of type 'void (const foo::*)()'
    typedef A<foo const, &foo::bar> bar_type;
                         ^~~~~~~~~
test_6.cpp:7:33: note: template parameter is declared here
template <typename C, void (C::*F)()>
                                ^ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:38:58.770

这不是（部分）专业化的工作方式。当您在特化中提供参数时，它必须匹配相应参数的种类。

您的主模板有一个*指向**非 const**成员函数*(PTNCMF) 参数的指针，需要一个此类模板参数。但是，您的部分特化将指向***const****成员函数(PTCMF) 的**指针***作为参数传递，从而造成不匹配。PTCMF 不能转换为 PTNCMF，因此部分特化无效。**

 **解决问题就这么多。您需要将参数的*类型*与实际参数分开。一种方法如下，简单地断言`const`类类型只与 PTCMF 匹配。

```
#include <type_traits>

template<class Fty>
struct is_ptcmf : std::false_type{};

template<class C, class R, class... Args>
struct is_ptcmf<R (C::*)(Args...) const> : std::true_type{};

template<class C, class Fty, Fty F>
struct A{
  static_assert(std::is_const<C>() == is_ptcmf<Fty>(), "Must pair const with const.");
}; 
```

[活生生的例子。](https://ideone.com/xvgqNg)

用法将是`A<foo, decltype(&foo::bar), &foo::bar>`. 如果你认为有一些冗余，我同意，但[还没有很好的方法来摆脱它](https://stackoverflow.com/q/5628121/500104)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T00:46:20.567

如果您使成员函数类型成为模板参数，那么您可以将模板专门用于不同的成员函数类型：

```
template <typename C, typename F, F>
struct A;  // undefined

template <typename C, void(C::*f)()>
struct A<C, void(C::*)(), f> {};

template <typename C, void(C::*f)() const>
struct A<C const, void(C::*)() const, f> {};

struct foo
{
    void bar() const {}
    typedef A<foo const, decltype(&foo::bar), &foo::bar> bar_type;

    void baz() {}
    typedef A<foo, decltype(&foo::baz), &foo::baz> baz_type;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T13:27:07.933

只是为了记录，这是我解决它的方法：

```
template <typename F, F ptr>
struct A;  // undefined

template <typename C, void (C::*F)()>
struct A<void (C::*)(), F> {};

template <typename C, void (C::*F)() const>
struct A<void (C::*)() const, F> {};

struct foo
{
    void bar() const {}
    typedef A<decltype(&foo::bar), &foo::bar> bar_type;

    void baz() {}
    typedef A<decltype(&foo::baz), &foo::baz> baz_type;
}; 
```

谢谢大家的见解！**

# php - SQL排序堆叠

> ID：15192702
> 
> 赞同：0
> 
> 时间：2013-03-04T00:28:52.793
> 
> 标签：php, html

我有这个： [http ://screencloud.net/img/screenshots/e796a906e816a8c44f9be15ed37d1735.png](http://screencloud.net/img/screenshots/e796a906e816a8c44f9be15ed37d1735.png)

如您所知，在右侧，它显示的顺序与左侧相同。我不希望它基本上表明这一点。我希望它在我发布新闻文章时会堆叠但在左侧显示最旧的位置。如果你明白我的意思。

我不想要这个：[http ://screencloud.net/img/screenshots/d9be1bd327b31c523094e19510ff4922.png](http://screencloud.net/img/screenshots/d9be1bd327b31c523094e19510ff4922.png)

如果视图向右看，他们会看到同一篇文章。我为整篇文章留下的代码是这样的：

```
$grab = mysql_query("SELECT * FROM articles WHERE id='" . mysql_real_escape_string($_GET['id']) . "' LIMIT 1");    
$grab = mysql_query("SELECT id, news_title, news_content, news_author, news_day, news_month, news_year, news_date FROM articles ORDER BY id DESC limit 4"); 
```

我在右边是这样的：

```
$grab = mysql_query("SELECT id, news_title, news_content, news_author, news_day, news_month, news_year, news_date FROM articles ORDER BY id DESC limit 8"); 
```

你们会碰巧知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:55:03.963

我相信您正在寻找 MySQL 的 OFFSET 关键字：

```
SELECT id, news_title, news_content, news_author, news_day, news_month, news_year, news_date FROM articles ORDER BY id DESC limit 8 offset 4 
```

或者，更简单：

```
SELECT id, news_title, news_content, news_author, news_day, news_month, news_year, news_date FROM articles ORDER BY id DESC limit 4,8 
```

[http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:06:15.550

试试这个现场演示：[http ://sqlfiddle.com/#!2/0a05db/8](http://sqlfiddle.com/#!2/0a05db/8)

`LIMIT X,Y`与 X = 起始行数和 Y = 行数一起使用...

# iphone - 从 MPMediaPickerController 导出视频 - 没有音频

> ID：15192703
> 
> 赞同：0
> 
> 时间：2013-03-04T00:28:58.390
> 
> 标签：iphone, ios, objective-c, avassetexportsession, mpmediapickercontroller

我正在使用 MPMediaPickerController 来允许用户从设备上的库中选择视频和歌曲。我允许这样做：`initWithMediaTypes:MPMediaTypeAny`选择器的初始化。导出完成后，用户可以在应用内播放歌曲或视频。这是我将其剥离为核心功能后的电影导出代码：

```
- (void)mediaPicker:(MPMediaPickerController*)mediaPicker didPickMediaItems:(MPMediaItemCollection*)mediaItemCollection {
    AVAssetExportSession *exportSession;
    NSString *filePath;
    NSURL *fileUrl;

    for (MPMediaItem *item in mediaItemCollection.items) {
        NSURL *assetUrl = [item valueForProperty:MPMediaItemPropertyAssetURL];
        AVAsset *currAsset = [AVAsset assetWithURL:assetUrl];
        exportSession = [[AVAssetExportSession alloc] initWithAsset:[AVAsset assetWithURL:assetUrl] presetName:AVAssetExportPresetHighestQuality];
        exportSession.shouldOptimizeForNetworkUse = YES;
        exportSession.outputFileType = AVFileTypeQuickTimeMovie;
        filePath = [title stringByAppendingString:@".mov"];
        fileUrl = [NSURL fileURLWithPath:[[NSFileManager documentDirectory] stringByAppendingPathComponent:filePath]];

        exportSession.outputURL = fileUrl;
        dispatch_group_enter(dispatchGroup);

        [exportSession exportAsynchronouslyWithCompletionHandler:^{
            // success
        }
        dispatch_group_leave(dispatchGroup);
    }];
    } 
```

这个类似的代码可以很好地处理音频，但对于视频，视频的音频不会播放。iTunes 中的大多数内容都受保护且不可导出，因此我想用我用 iPhone 拍摄的自制快速视频进行测试。我拍摄了视频，将它拖到了 iTunes 中（我把它做成了一个“音乐视频”，这样它就可以正确显示并可以导出到我的手机库中）。然后我同步并将其发送到我的设备进行测试。

在应用程序中，视频在媒体选择器中显示良好，我可以将其导出，并且看不到任何错误。但是，当我在应用程序中播放它时，它只播放视频而不播放音频。我从其他来源导入的其他视频可以很好地播放视频的音频，所以我不“认为”它是播放器本身。

关于为什么音频不会来自媒体选择器的这种导出，我可能会在这里遗漏一些东西吗？提前感谢您在此问题上提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:12:09.603

不确定这是否是理想的解决方案，但我们发现解决此问题的唯一方法是将其更改为使用 PresetPassthrough 设置强制 m4v 格式。IE：

```
exportSession = [[AVAssetExportSession alloc] initWithAsset:[AVAsset assetWithURL:assetUrl] presetName:AVAssetExportPresetPassthrough];
exportSession.shouldOptimizeForNetworkUse = YES;
exportSession.outputFileType = AVFileTypeAppleM4V;
filePath = [title stringByAppendingString:@".m4v"]; 
```

在进行更改后，音频和视频似乎适用于以这种方式在本地导入的视频。

# java - 公共学生retrieveById（int id）

> ID：15192705
> 
> 赞同：0
> 
> 时间：2013-03-04T00:29:03.427
> 
> 标签：java

```
public class Roster extends ArrayList<Student> 
{
public boolean containsStudent(String ln)
{ 
    Scanner user_input = new Scanner (System.in);
    System.out.println("Enter last name of student: ");
    String lName = user_input.next();
    for (Student student : this)
    {
        if (student.getLastName().equals(lName)) 
        return true;
    }
    return false; 
} 
```

如何修复下一个方法中的错误：

```
public Student retrieveByld(int id)
{
    Scanner user_input = new Scanner (System.in);
    System.out.println("Enter the ID of the student: ");
    String idNum = user_input.next(); 
    for (Student student : this)
    {
        if (student.getID().equals(idNum)) 
        return student.getFullName();
    }
    return " "; 
} 
```

错误：无法取消引用 int。我猜我无法与使用 .equals 方法的整数进行比较，但我怎样才能在不过多更改语法的情况下进行比较。

给定 id，我必须让程序在列表中找到学生并返回该学生的全名。如果找不到学生，我必须返回 null。如果有帮助，这是我的学生课。

```
public class Student
{
    private String lName, fName;
    private int idNum;

public Student(int id, String fn, String ln)
{
lName = ln;
fName = fn;
idNum = id;
}

public String getFullName()
{
    return fName + " " + lName;
}

public String getLastName()
{
    return lName;
}

public String getFirstName()
{
    return fName;
}

public int getID()
{
    return idNum;
}

public String toString()
{
    return fName + " " + lName + " " + idNum;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:33:49.043

`int`s 没有`equals()`查看它们是否相等的方法，它们使用`==`运算符，因为它是原始类型。您要更改的是该行`if (student.getID().equals(idNum))`，它应该是： `if (student.getID() == idNum)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:34:53.910

您的 getID() 方法返回一个 int，它是一种原始类型，这意味着它没有任何方法，包括您尝试调用的“等于”。因此，您需要将 idNum 从 String 更改为 int，或者您需要将从 student.getID() 返回的内容更改为 String。

由于您使用的是 Scanner，它有一个 nextInt() 方法，它将用户输入作为 int 返回。然后，您只需使用标准 == 运算符检查等于。

像这样的东西：

```
public Student retrieveByld(int id)
{
    Scanner user_input = new Scanner (System.in);
    System.out.println("Enter the ID of the student: ");
    int idNum = user_input.nextInt(); 
    for (Student student : this)
    {
        if (student.getID() == idNum) 
        return getFullName();
    }
    return " "; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T00:34:12.603

使用`Integer`类。它是一个包装器`int`，让您可以访问诸如`equals()`方法之类的东西：http: [//docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html)

# jquery - 使用 Jquery 的 Bing 搜索建议

> ID：15192707
> 
> 赞同：0
> 
> 时间：2013-03-04T00:29:16.413
> 
> 标签：jquery, bing-api

我的网站有一个要求，用户可以在文本框中输入一些“文本”，我必须在下拉列表中显示一些搜索建议。我已经注册了一个必应搜索帐户并获得了一个帐户密钥。但我看不到任何示例代码如何使用 Jquery 实现此功能。

我的网站是用 Asp.Net MVC 编写的，如果有人能指出示例代码，那就太好了。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:02:25.953

```
http://api.bing.net/xml.aspx?Appid=<AppID>&sources=spell&query=cofee 
```

来源： http: [//www.bing.com/developers/s/APIBasics.html](http://www.bing.com/developers/s/APIBasics.html)

您需要做的就是通过 XHR (POST) 发布 REST API 请求并以文本形式获取数据。您可以使用 JSON.parse() 解析响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T21:14:35.100

早在 6 月份，我就为自己的需要编写了一个简单的库：[jquery-bingsearch](https://github.com/cbenard/jquery-bingsearch)（GitHub 源代码和网页）。我意识到您可能已经解决了您的问题，但我想将其留在这里以备将来使用 Google 果汁。

我在我的[个人网页上](http://chrisbenard.net/search/)使用它。

## 用法

### 应用密钥

[按照此页面](http://blog.jongallant.com/2012/07/bing-search-api-azure-csharp.html)上的步骤 1 获取应用程序密钥。

### HTML

```
<script type="text/javascript" src="js/jquery.bingsearch-min.js"></script> 
```

### Javascript

**注意：**必须至少传入 、 或 中的一个，`beforeSearchResults`否则 插件将不执行任何操作（因为没有任何内容可以返回结果。这是对下面列出的必填字段的补充。`afterSearchResults``searchResultInterator`

```
$.bingSearch({
    // Required: query text
    query: 'query text here',
    // Required (unless you use urlBase) by Bing Search API
    appKey: 'Put your Windows Azure Marketplace Bing Search API Primary Account Key here'
    // Optional (defaults to the Bing Search API Web Results Query).
    // Additional information: This feature allows you to proxy through a server-side
    //                         script in order to hide your API key, which is exposed to the
    //                         world if you set it client-side in appKey. An example PHP
    //                         script is included (searchproxy.php).
    urlBase: 'searchproxy.php',
    // Optional (defaults to 1): Page Number
    pageNumber: parseInt($('#pageNumber').val()),
    // Optional (defaults to 10): Page Size
    pageSize: 10,
    // Optional (defaults to null): Limit to site. Shortcut to adding "site:example.org " to query
    limitToSite: 'example.org',
    // Optional (defaults to false): Print console logging information about search results
    debug: false,
    // Optional: Function is called after search results are retrieved, but before the interator is called
    beforeSearchResults: function(data) {
        // Use data.hasMore, data.resultBatchCount
    },
    // Optional: Function is called once per result in the current batch
    searchResultIterator: function(data) {
        // Use data.ID, data.Title, data.Description, data.Url, data.DisplayUrl, data.Metadata.Type (check for undefined)
    },
    // Optional: Function is called after search results are retrieved and after all instances of the interator are called
    afterSearchResults: function(data) {
        // Use data.hasMore, data.resultBatchCount
    },
    // Optional: Called when there is an error retrieving results
    fail: function(data) {
        // data contains an error message
    }
}); 
```

# graph-algorithm - 判断从 s 到 t 的所有最短路径是否包含边 e

> ID：15192712
> 
> 赞同：0
> 
> 时间：2013-03-04T00:29:35.317
> 
> 标签：graph-algorithm, dijkstra, shortest-path, bellman-ford

令 G = (V;E) 是一个有向图，其边都具有非负权重。设 s,t 是 V 中的 2 个顶点，设 e 是 E 中的一条边。描述一种算法，该算法确定从 s 到 t 的所有最短路径是否包含边 e。

好吧，这就是实现 Dijsktra 时间复杂度的方法：只需从 s 运行 Dijkstra 并计算 delta(s,t)（从 s 到 t 的最短路径的权重）。删除边 e，然后从新图中的 s 再次运行 Djikstra。如果新图中的 delta(s,t) 增加了，则说明从 s 到 t 的所有最短路径都包含边 e，否则不成立。

我想知道是否有更有效的算法来解决这个问题。你认为有可能打败 Dijkstra 的时间复杂度吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:57:37.713

你的方法对我来说听起来是正确的。您只需计算有和没有可能获得边 e 的最短路径。这为您提供了 2 个 Dijkstra 搜索。

如果你去 A*，双向搜索或恢复你的 Dijkstra 搜索树，还有改进的空间：

*   A* 会加快您的 Dijkstra 查询，但您的图表可能无法实现，因为您需要能够定义剩余距离的良好界限。
*   双向搜索可以通过两个搜索在边缘相遇来完成。然后，您可以检查所有带有和不带有边缘的路径，只需 1 个快速双向查询 + 两种情况下的一些额外工作，而不是拥有 2 个非常相似的完整 Dijkstra
*   您可以在没有边缘的情况下搜索一次并维护您的搜索树。然后添加 e 并从 e 的起点开始更新最短路径树。如果终点标签>起点标签+长度e，则使用e可以更快到达终点。递归搜索端点的邻居，只有在可以比以前更快地到达时才更新距离。应该为您节省一些工作。

# database - 如何避免在 Play framework 2.1 中创建和执行进化脚本？

> ID：15192713
> 
> 赞同：5
> 
> 时间：2013-03-04T00:29:44.350
> 
> 标签：database, playframework, playframework-2.1

我刚开始玩框架（2.1）并复制示例项目（Zentasks）和定制。我删除了所有以前的视图、控制器和模型类。当我运行该应用程序时，我的浏览器会显示进化脚本，我必须运行该脚本。但我不想创建和执行这个脚本，因为在这个应用程序之前我已经有了我的数据库和表。\ 另外，脚本中仍有DDLs创建表已被删除。我一次又一次地删除了进化目录，文件自动生成，我现在可以工作了。

我想了解它是如何工作的，并知道如何避免这种烦人的情况？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T08:24:01.517

对此有注释选项`evolutionplugin=disabled`，`application.conf`只需取消注释即可：

```
# Evolutions
# ~~~~~
# You can disable evolutions if needed
evolutionplugin=disabled 
```

要使其再次工作，只需对其进行评论或将其值设置为`enabled`

# javascript - JavaScript 扩展类

> ID：15192722
> 
> 赞同：80
> 
> 时间：2013-03-04T00:30:41.780
> 
> 标签：javascript, oop, object, inheritance, ecmascript-6

我有一个基类：

```
function Monster() {
  this.health = 100;
}

Monster.prototype.growl = function() {
  console.log("Grr!");
} 
```

我想扩展并创建另一个类：

```
function Monkey extends Monster() {
  this.bananaCount = 5;
}

Monkey.prototype.eatBanana {
  this.bananaCount--;
  this.health++; //Accessing variable from parent class monster
  this.growl();  //Accessing function from parent class monster
} 
```

我已经做了很多研究，似乎有很多复杂的解决方案可以在 JavaScript 中执行此操作。在 JS 中实现这一目标的最简单和最可靠的方法是什么？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-03-04T00:33:56.190

*下面更新了 ES6*

# 2013 年 3 月和 ES5

这个 MDN 文档很好地描述了扩展类：

[https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)

特别是，现在他们处理它：

```
// define the Person Class
function Person() {}

Person.prototype.walk = function(){
  alert ('I am walking!');
};
Person.prototype.sayHello = function(){
  alert ('hello');
};

// define the Student class
function Student() {
  // Call the parent constructor
  Person.call(this);
}

// inherit Person
Student.prototype = Object.create(Person.prototype);

// correct the constructor pointer because it points to Person
Student.prototype.constructor = Student;

// replace the sayHello method
Student.prototype.sayHello = function(){
  alert('hi, I am a student');
}

// add sayGoodBye method
Student.prototype.sayGoodBye = function(){
  alert('goodBye');
}

var student1 = new Student();
student1.sayHello();
student1.walk();
student1.sayGoodBye();

// check inheritance
alert(student1 instanceof Person); // true 
alert(student1 instanceof Student); // true 
```

请注意，[`Object.create()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create)某些较旧的浏览器不支持该功能，包括 IE8：

[![Object.create 浏览器支持](../Images/cb517bd21f765d5e6a91ee082e245e06.png)](https://i.stack.imgur.com/IipQa.png)

如果您需要支持这些，链接的 MDN 文档建议使用 polyfill，或以下近似值：

```
function createObject(proto) {
    function ctor() { }
    ctor.prototype = proto;
    return new ctor();
} 
```

使用 this like`Student.prototype = createObject(Person.prototype)`比使用更好`new Person()`，因为它[避免](https://stackoverflow.com/a/17952160/568458)在继承原型时调用父构造函数，并且仅在调用继承者构造函数时调用父构造函数。

# 2017 年 5 月和 ES6

值得庆幸的是，JavaScript 设计者听到了我们的求助请求，并采用了更合适的方式来解决这个问题。

[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#Sub_classing_with_extends)有另一个关于 ES6 类继承的好例子，但我将展示与上面在 ES6 中复制的完全相同的类集：

```
class Person {
    sayHello() {
        alert('hello');
    }

    walk() {
        alert('I am walking!');
    }
}

class Student extends Person {
    sayGoodBye() {
        alert('goodBye');
    }

    sayHello() {
        alert('hi, I am a student');
    }
}

var student1 = new Student();
student1.sayHello();
student1.walk();
student1.sayGoodBye();

// check inheritance
alert(student1 instanceof Person); // true 
alert(student1 instanceof Student); // true 
```

干净易懂，就像我们都想要的那样。请记住，虽然 ES6 很常见，但[并非所有地方都支持](https://caniuse.com/#feat=es6-class)它：

[![ES6 浏览器支持](../Images/4bb6c471d32c7c191711f33456d60b77.png)](https://i.stack.imgur.com/2RCk1.jpg)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-08-06T00:46:05.020

ES6 现在让你有机会使用**class**和**extends**关键字：

然后，您的代码将是：

你有一个基类：

```
class Monster{
       constructor(){
             this.health = 100;
        }
       growl() {
           console.log("Grr!");
       }

} 
```

您想扩展并创建另一个类：

```
class Monkey extends Monster {
        constructor(){
            super(); //don't forget "super"
            this.bananaCount = 5;
        }

        eatBanana() {
           this.bananaCount--;
           this.health++; //Accessing variable from parent class monster
           this.growl(); //Accessing function from parent class monster
        }

} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-04T00:35:23.053

试试这个：

```
Function.prototype.extends = function(parent) {
  this.prototype = Object.create(parent.prototype);
};

Monkey.extends(Monster);
function Monkey() {
  Monster.apply(this, arguments); // call super
} 
```

**编辑：**我在这里放了一个快速演示[http://jsbin.com/anekew/1/edit](http://jsbin.com/anekew/1/edit)。请注意，这`extends`是 JS 中的保留字，您在 linting 代码时可能会收到警告，您可以简单地命名它`inherits`，这就是我通常所做的。

有了这个帮助器并使用一个对象`props`作为唯一参数，JS 中的继承变得更简单了：

```
Function.prototype.inherits = function(parent) {
  this.prototype = Object.create(parent.prototype);
};

function Monster(props) {
  this.health = props.health || 100;
}

Monster.prototype = {
  growl: function() {
    return 'Grrrrr';
  }
};

Monkey.inherits(Monster);
function Monkey() {
  Monster.apply(this, arguments);
}

var monkey = new Monkey({ health: 200 });

console.log(monkey.health); //=> 200
console.log(monkey.growl()); //=> "Grrrr" 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-22T15:55:15.103

如果您不喜欢原型方法，因为它并没有真正以良好的 OOP 方式运行，您可以尝试以下操作：

```
var BaseClass = function() 
{
    this.some_var = "foobar";

    /**
     * @return string
     */
    this.someMethod = function() {
        return this.some_var;
    }
};

var MyClass = new Class({ extends: BaseClass }, function()
{
    /**
     * @param string value
     */
    this.__construct = function(value)
    {
        this.some_var = value;
    }
}) 
```

使用轻量级库（缩小 2k）：[https ://github.com/haroldiedema/joii](https://github.com/haroldiedema/joii)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-17T19:13:36.587

我可以提出一种变体，只是在书中读过，这似乎是最简单的：

```
function Parent() { 
  this.name = 'default name';
};

function Child() {
  this.address = '11 street';
};

Child.prototype = new Parent();      // child class inherits from Parent
Child.prototype.constructor = Child; // constructor alignment

var a = new Child(); 

console.log(a.name);                // "default name" trying to reach property of inherited class 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-09T20:45:31.850

这是 elclanrs 解决方案的扩展（请原谅双关语），包括实例方法的详细信息，并对问题的这方面采取可扩展的方法；我完全承认，这要归功于 David Flanagan 的“JavaScript：权威指南”（针对此上下文进行了部分调整）。请注意，这显然比其他解决方案更冗长，但从长远来看可能会受益。

首先，我们使用 David 的简单“扩展”函数，它将属性复制到指定对象：

```
function extend(o,p) {
    for (var prop in p) {
        o[prop] = p[prop];
    }
    return o;
} 
```

然后我们实现他的子类定义实用程序：

```
function defineSubclass(superclass,     // Constructor of our superclass
                          constructor,  // Constructor of our new subclass
                          methods,      // Instance methods
                          statics) {    // Class properties
        // Set up the prototype object of the subclass
    constructor.prototype = Object.create(superclass.prototype);
    constructor.prototype.constructor = constructor;
    if (methods) extend(constructor.prototype, methods);
    if (statics) extend(constructor, statics);
    return constructor;
} 
```

在最后的准备工作中，我们使用 David 的新 jiggery-pokery 来增强我们的 Function 原型：

```
Function.prototype.extend = function(constructor, methods, statics) {
    return defineSubclass(this, constructor, methods, statics);
}; 
```

在定义了我们的 Monster 类之后，我们执行以下操作（这对于我们想要扩展/继承的任何新类都是可重用的）：

```
var Monkey = Monster.extend(
        // constructor
    function Monkey() {
        this.bananaCount = 5;
        Monster.apply(this, arguments);    // Superclass()
    },
        // methods added to prototype
    {
        eatBanana: function () {
            this.bananaCount--;
            this.health++;
            this.growl();
        }
    }
); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-25T19:06:17.027

对于传统的扩展，您可以简单地将超类编写为构造函数，然后将此构造函数应用于继承的类。

```
 function AbstractClass() {
      this.superclass_method = function(message) {
          // do something
        };
     }

     function Child() {
         AbstractClass.apply(this);
         // Now Child will have superclass_method()
     } 
```

angularjs 示例：

[http://plnkr.co/edit/eFixlsgF3nJ1LeWUJKsd?p=preview](http://plnkr.co/edit/eFixlsgF3nJ1LeWUJKsd?p=preview)

```
app.service('noisyThing', 
  ['notify',function(notify){
    this._constructor = function() {
      this.scream = function(message) {
          message = message + " by " + this.get_mouth();
          notify(message); 
          console.log(message);
        };

      this.get_mouth = function(){
        return 'abstract mouth';
      }
    }
  }])
  .service('cat',
  ['noisyThing', function(noisyThing){
    noisyThing._constructor.apply(this)
    this.meow = function() {
      this.scream('meooooow');
    }
    this.get_mouth = function(){
      return 'fluffy mouth';
    }
  }])
  .service('bird',
  ['noisyThing', function(noisyThing){
    noisyThing._constructor.apply(this)
    this.twit = function() {
      this.scream('fuuuuuuck');
    }
  }]) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-26T10:47:13.110

对于自学者：

```
function BaseClass(toBePrivate){
    var morePrivates;
    this.isNotPrivate = 'I know';
    // add your stuff
}
var o = BaseClass.prototype;
// add your prototype stuff
o.stuff_is_never_private = 'whatever_except_getter_and_setter';

// MiddleClass extends BaseClass
function MiddleClass(toBePrivate){
    BaseClass.call(this);
    // add your stuff
    var morePrivates;
    this.isNotPrivate = 'I know';
}
var o = MiddleClass.prototype = Object.create(BaseClass.prototype);
MiddleClass.prototype.constructor = MiddleClass;
// add your prototype stuff
o.stuff_is_never_private = 'whatever_except_getter_and_setter';

// TopClass extends MiddleClass
function TopClass(toBePrivate){
    MiddleClass.call(this);
    // add your stuff
    var morePrivates;
    this.isNotPrivate = 'I know';
}
var o = TopClass.prototype = Object.create(MiddleClass.prototype);
TopClass.prototype.constructor = TopClass;
// add your prototype stuff
o.stuff_is_never_private = 'whatever_except_getter_and_setter';

// to be continued... 
```

使用 getter 和 setter 创建“实例”：

```
function doNotExtendMe(toBePrivate){
    var morePrivates;
    return {
        // add getters, setters and any stuff you want
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-31T08:00:31.477

## 概括：

有多种方法可以解决在 Javascript 中使用原型扩展构造函数的问题。这些方法中的哪一个是“最佳”解决方案是基于意见的。但是，这里有两种常用的方法来扩展构造函数的函数原型。

## ES 2015 课程：

```
class Monster {
  constructor(health) {
    this.health = health
  }

  growl () {
  console.log("Grr!");
  }

}

class Monkey extends Monster {
  constructor (health) {
    super(health) // call super to execute the constructor function of Monster 
    this.bananaCount = 5;
  }
}

const monkey = new Monkey(50);

console.log(typeof Monster);
console.log(monkey);
```

上述使用`ES 2015`类的方法只不过是 javascript 中原型继承模式的语法糖。在我们评估的第一个日志中，`typeof Monster`我们可以观察到这是函数。这是因为类只是底层的构造函数。尽管如此，您可能喜欢这种实现原型继承的方式，并且绝对应该学习它。它用于主要框架，例如`ReactJS`和`Angular2+`.

## 工厂功能使用`Object.create()`：

```
function makeMonkey (bananaCount) {

  // here we define the prototype
  const Monster = {
  health: 100,
  growl: function() {
  console.log("Grr!");}
  }

  const monkey = Object.create(Monster);
  monkey.bananaCount = bananaCount;

  return monkey;
}

const chimp = makeMonkey(30);

chimp.growl();
console.log(chimp.bananaCount);
```

此方法使用的`Object.create()`方法接受一个对象，该对象将是它返回的新创建对象的原型。因此，我们首先在这个函数中创建原型对象，然后调用`Object.create()`它返回一个空对象，并将`__proto__`属性设置为 Monster 对象。在此之后我们可以初始化对象的所有属性，在这个例子中我们将香蕉计数分配给新创建的对象。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-16T23:20:41.270

绝对最小（并且正确，与上面的许多答案不同）版本是：

```
function Monkey(param){
  this.someProperty = param;
}
Monkey.prototype = Object.create(Monster.prototype);
Monkey.prototype.eatBanana = function(banana){ banana.eat() } 
```

就这样。你可以[在这里阅读更长的解释](https://medium.com/@gdanov/javascripts-oo-for-java-developers-525d5dddbfa5)

# mysql - 具有联合返回错误结果的 MySQL 查询

> ID：15192726
> 
> 赞同：0
> 
> 时间：2013-03-04T00:31:21.940
> 
> 标签：mysql, union

我无法找出执行此 MySQL 语句的最佳方法。

第一个表 'friends' 有 userID、friendID 和 status

第二个表 'users' 有 firstName、lastName、userID

第三个表 'users_temp' 有 tempUserID、tempUserName

我希望有一个查询从用户 ID 或朋友 ID = 1 的“朋友”中全部提取，并将另一个字段（如果用户 ID = 1，则获取朋友 ID，或者如果朋友 ​​ID = 1，则获取用户 ID）加入“用户”/“用户临时”其中 userID = users.userID 并离开 join users_temp 如果存在。

现在我有这个，但它一直返回错误的结果。它返回的用户 ID 也必须是唯一的，所以我只为每个用户返回 1 个（因为这是一个朋友列表）

```
SELECT users.userid, 
       users.fbid              AS fbID, 
       users.firstname         AS firstName, 
       users.lastname          AS lastName, 
       users.phonenumber       AS phoneNumber, 
       users.avatar            AS avatar, 
       users_temp.tempusername AS tempUserName, 
       status, 
       friendid 
FROM   users 
       JOIN (SELECT friendid, 
                    userid, 
                    status 
             FROM   friends 
             WHERE  friendid = $userid 
                    AND ( ( status != 2 ) 
                          AND ( status != 3 ) ) 
             UNION ALL 
             SELECT friendid, 
                    userid, 
                    status 
             FROM   friends 
             WHERE  userid = $userid 
                    AND ( ( status != 2 ) 
                          AND ( status != 3 ) )) foo 
         ON users.userid = foo.userid 
       LEFT JOIN users_temp 
              ON users.userid = users_temp.tempuserid 
```

我创建了一个 sqlfiddle，希望能进一步解释我的 sql 设置

[http://sqlfiddle.com/#!2/690c3/4](http://sqlfiddle.com/#!2/690c3/4)

任何帮助将非常感激！

谢谢，

韦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:50:32.390

据我所知，问题可能是您在 unionall 查询的第二部分使用不正确的字段进行连接

请尝试以下

```
SELECT users.userid, 
  users.fbid              AS fbID, 
  users.firstname         AS firstName, 
  users.lastname          AS lastName, 
  users.phonenumber       AS phoneNumber, 
  users.avatar            AS avatar, 
  users_temp.tempusername AS tempUserName, 
  status
FROM   users 
   JOIN (SELECT friendid AS joinid, 
            userid AS otherid, 
            status 
     FROM   friends 
     WHERE  friendid = 1 
            AND ( ( status != 2 ) 
                  AND ( status != 3 ) ) 
     UNION ALL 
     SELECT userid AS joinid, 
            friendid AS otherid, 
            status 
     FROM   friends 
     WHERE  userid = 1 
            AND ( ( status != 2 ) 
                  AND ( status != 3 ) )) foo 
   ON users.userid = foo.otherid 
  LEFT JOIN users_temp 
      ON users.userid = users_temp.tempuserid 
```

编辑：更改了 unionall 的第二个子查询的列顺序。您真的需要主查询中的friendid 列吗？或者其他会做吗？

# java - android.R 的 Android 开发问题

> ID：15192727
> 
> 赞同：0
> 
> 时间：2013-03-04T00:31:30.170
> 
> 标签：java, android, xml

我无法将我的界面与我的 java 链接。

```
 package com.example.game;

import android.os.Bundle;
import android.R;
import android.app.Activity;
import android.view.Menu;
import android.widget.Button;

public class MainActivity extends Activity {

   Button btn1 = (Button) findViewById(R.id.button1);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main); <---- activity_main
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu); <--- main
        return true;
    }

} 
```

我的布局有问题。我可以链接我的按钮等。但它总是在生成的代码上引发错误？为什么这样做？我做了建议的修复并运行它，导致崩溃......我是java和android开发的新手。我边走边学。我在视觉基础方面确实有其他经验，什么都没有。

建议修复：更改为 activity_list_ 项且无法解决。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T00:38:38.870

你的`btn1`作业不正确。当您在初始化时分配它时，没有视图，因为代码在 onCreate 之前运行。相反，它应该如下所示：

```
Button btn1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); <---- activity_main
    btn1 = (Button) findViewById(R.id.button1);
} 
```

# php - 当人们更改标签时，我的计数器停止工作

> ID：15192728
> 
> 赞同：1
> 
> 时间：2013-03-04T00:31:37.030
> 
> 标签：php, javascript, counter

我正在创建一个关于足球的浏览器游戏，它有一个计数器。每次计数器达到 0（从 10 分钟开始）时，您都可以踢球并进球。发生的情况是，如果您更改选项卡或在同一页面上停留太久（没有刷新或转到网站的其他页面），计数器将冻结/停止。如果您从其他选项卡返回（返回到游戏选项卡），计数器将解冻（但它会出现错误，并且它会从“错误时间”继续，当您不在游戏选项卡时暂停的时间） .

基本上就是这样。我想要的是即使您正在浏览另一个选项卡（或者如果您不刷新页面），计数器也能正常工作。

我的代码如下：

```
<?php

ob_start();

$Atempo_permitido = 600; // tempo em segundos até redirecionar

$Atempo_atual = mktime(date("H:i:s"));
if($_COOKIE['ACookie_countdown']=="") {
$Atempo_entrada = mktime(date("H:i:s"));
$Atempo_cookie = '3600'; // em segundos
setcookie("ACookie_countdown", "$Atempo_entrada", time()+86400*365);
} else {
$Atempo_gravado = $_COOKIE['ACookie_countdown'];
$Atempo_gerado = $Atempo_atual-$Atempo_gravado;
$Afim = $Atempo_permitido-$Atempo_gerado;
if($Afim <= 0) {
echo "tempo esgotado";
} else {
//echo $fim;
}
}
?>
<script language="Javascript" type="text/javascript">
var Asegs = '<?php if($Afim=="") { echo $Atempo_permitido+1; } else { echo "$Afim";    }     ?>';
var Ats = Asegs*10;
Atuw1();
function Atuw1(){
Asegs = parseInt(Ats / 10);
Asegs = Asegs % 3600;
Aminutes = parseInt(Asegs / 60);
Asegs = Asegs % 60;
if(Ats>0){
document.getElementById("Avalor").innerHTML = "Tempo restante: " + "00" + ":<?php         if($Afim <=540){echo "0";}?>" + Aminutes + ":" + Asegs + "h";
Ats = Ats-1;
setTimeout("Atuw1()", 100)
} else {
document.getElementById("Adiv1").innerHTML = 'Você já pode chutar!';
location.href='index.php?menu=gol';
}
}
</script>
<!-- BLOCO 1 //-->
<body onLoad="Atuw1();Btuw1();Ctuw1();Dtuw1();Etuw1();">
<div id="Avalor"></div>
<div id="Adiv1"></div> 
```

如果你们能告诉我一些关于如何完成这项工作的信息。

# c# - InitializeComponent 中的 Stackoverflow

> ID：15192729
> 
> 赞同：0
> 
> 时间：2013-03-04T00:31:38.333
> 
> 标签：c#, windows, stack-overflow

我的表单中添加了很多控件（至少数百个），其中不少是自定义控件，InitializeComponent 中的代码非常庞大。尽管如此，我还是看不出怎么会有任何递归以及为什么会发生堆栈溢出。只有当我从 VS 内部运行 Debug 版本时才会发生这种情况（2008，它使用 .net framework 3.5 和 Winforms）。如果我只是双击可执行文件，应用程序就会运行。有人可以告诉我这怎么可能，我该怎么做才能找出原因？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:40:53.140

最好的办法是找出异常发生的确切位置 - 控制 Alt E 调出“异常”对话框 - 单击“抛出”下的公共语言运行时异常，一旦抛出错误，调试就会停止 - 从那里你可以查看调用堆栈并跟踪调用以查看哪里出错了。（如果快捷方式不起作用，您可以单击 Visual Studio 中的调试/异常进行相同操作）

（只是要清楚 - 异常窗口会弹出一个对话框，其中包含左侧列表、C++ 异常、公共语言运行时异常等...您要单击与公共语言运行时异常一致的第一个复选框，以便您的一旦你遇到问题，代码就会中断然后为了进一步调查，调试/windows/callstack - 或 control/alt C - 这将很快让你看到你是否有递归或其他问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T03:01:51.130

可能您的`InitializeComponent`方法的代码包含很多局部变量/大局部变量（例如`struct`，带有很多字段） - 它们几乎使用了所有可用的堆栈空间，并且当在 VS 中的调试器下运行时，空间会少一点堆栈，因此错误。

如果这是问题所在，可能会修复将局部变量转换为类字段，和/或将`InitInstance`方法拆分为具有自己的局部变量的各种方法 - 这将共享相同的堆栈空间。

# google-maps - 由于未定义的变量，Google Maps API V3 标记未显示

> ID：15192732
> 
> 赞同：2
> 
> 时间：2013-03-04T00:31:52.787
> 
> 标签：google-maps, google-maps-api-3

我很难使用 Google Maps V3 API 显示我的标记。

加载页面时出现以下错误 -

**类型错误：xml 未定义**

**var 标记 = xml.documentElement.getElementsByTagName("marker");**

我尝试以几种不同的方式声明 xml 变量，但无济于事。

非常感谢任何帮助。

```
function load() {
  map = new google.maps.Map(document.getElementById("map_canvas"), {
    center: new google.maps.LatLng(37.765558,-122.450867),
    zoom: 11,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("phpsearch.php", function(data) {
    xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");//<- error occurs right here
//Uncaught TypeError: Cannot read property 'documentElement' of undefined
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function downloadUrl(url,callback) {
 var request = window.ActiveXObject ?
     new ActiveXObject('Microsoft.XMLHTTP') :
     new XMLHttpRequest;

 request.onreadystatechange = function() {
   if (request.readyState == 4) {
     request.onreadystatechange = doNothing;
     callback(request.responseText, request.status);
   }
 };
 request.open('GET', url, true);
 request.send(null);
} 
```

页面在这里：

[http://www.students.bl.rdi.co.uk/stu26984/index2.php](http://www.students.bl.rdi.co.uk/stu26984/index2.php)

似乎对以下问题的修复应该有所帮助，但我不明白为什么我仍然被告知变量未定义。

[无法从 XML 变量加载 Google 地图标记](https://stackoverflow.com/questions/14163297/cannot-load-google-maps-markers-from-xml-variable)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:37:17.523

您的`downloadUrl`函数将响应文本而不是响应对象传递给您的回调。您可以更改函数以传递所需的对象。当然，您必须在响应中接收 xml。

```
function downloadUrl(url,callback) {
 var request = window.ActiveXObject ?
     new ActiveXObject('Microsoft.XMLHTTP') :
     new XMLHttpRequest;

 request.onreadystatechange = function() {
   if (request.readyState == 4) {
     request.onreadystatechange = doNothing;
     callback(request, request.status);//right here
   }
 };
 request.open('GET', url, true);
 request.send(null);
} 
```

# symfony - 在 symfony2.1 上的“实体”buildForm 上使用“query_builder”时，“此值无效”

> ID：15192735
> 
> 赞同：3
> 
> 时间：2013-03-04T00:32:16.150
> 
> 标签：symfony, entity, query-builder

这是我的问题。我使用`buildForm`symfony 2.1 上的方法来构建我的表单。使用以下代码一切正常：

```
$builder->add('combat','entity',array(
                    class' => 'KarateCompetitionBundle:CompetitionCombat',
                    'empty_value' => 'Sélectionner un combat')); 
```

但我只想过滤和显示一些`Combat`. 这就是为什么我必须使用该`query_builder`选项。当我这样做时，我收到`This value is not valid`错误消息。这是代码：

```
$builder->add('combat','entity',array(
                  'class' => 'KarateCompetitionBundle:CompetitionCombat',
                  'empty_value' => 'Sélectionner un combat',
                  'query_builder' => function(CombatRepository $cr) {
                      return $cr->getAllWithoutBilanQueryBuilder();})); 
```

`getAllWithoutBilanQueryBuilder`为了能够找到问题，我至少减少了代码（即不对方法进行过滤）。

```
public function getAllWithoutBilanQueryBuilder(){
    $queryBuilder = $this->getEntityManager()->createQueryBuilder();
    return $queryBuilder->select('c')->from('KarateEntrainementBundle:CompetitionCombat', 'c'); 
```

}

我比较了每种情况下生成的两种 html 代码，它们是相同的。

`var_dump($object)`在将表单与请求绑定后，我在控制器上放了一个`$form->bind($request)`，看起来当我使用该`query_builder`选项`combat`时，如果我不使用它，则它是空的，而它不是空的。

我无法理解为什么？我在网上发现很少有相同问题的帖子，但没有一个答案。这里是否可能存在 symfony 问题，或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:47:36.550

我遇到了完全相同的问题 - 就我而言 - 将其追溯到 Symfony\Bridge\Doctrine\Form\ChoiceList\ORMQueryBuilderLoader。

验证表单后，通过向查询生成器添加 IN() 子句，通过 ORMQueryBuilderLoader::getEntitiesByIds() 中的主键加载实体。在我的例子中，这个 IN() 子句是无效的，并且所有可选择的实体都被返回了。

这反过来又导致 Symfony\Component\Form\Extension\Core\DataTransformer\ChoicesToValuesTransformer::reverseTransform() 抛出 TransformationFailedException，因为加载的实体数量和提交的选择不一样。

我想这个特定错误还有其他可能的原因。以下是您可以尝试的方法：

*   查看生成的查询，手动运行它并确保它只返回*选定*的值
*   在 Symfony\Component\Form\Form 中，尝试输出捕获的 TransformationFailedException 并查看它会将您引向何处。
*   如果以上都不是合理的，添加一些调试输出到 Symfony\Component\Form\Extension\Validator\Constraints\FormValidator 看看你是否可以缩小范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T10:55:25.787

作为@mike-b 答案的补充：对我来说，失败的 QueryBuilder 语句是 ->having('...') 查询部分：

```
 ...
    'query_builder' => function(EntityRepository $er) use ($pn) {
                    return $er->createQueryBuilder('p')
                                    ->select('p')
                                    ->join('p.product', 'pr')
                                    ->where('p.name = ' . $pn->getId())
                                    ->andWhere("LENGTH(p.value_en) > 1")
                                    ->andWhere("p.value_en != ''")
                                    /* when I remove this - validation passe flawlessly  */
                                    ->having('COUNT(pr.id) > 1')
                                    ->groupBy('p.value_en)
                                    ->orderBy('p.value_en', 'ASC');
    ... 
```

使用 Symfony 2.3.6 版测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T18:36:33.070

我终于设法使它工作:-)

所以这里是修复。在`getAllWithoutBilanQueryBuilder`功能上，我替换

```
$queryBuilder = $this->getEntityManager()->createQueryBuilder(); 
```

经过

```
$queryBuilder = $this->createQueryBuilder('c'); 
```

我不知道到底有什么区别以及为什么现在可以使用。但这是有效的。

谢谢大家的帮助。

# java - 在排空 ArrayBlockingQueue 之前阻塞

> ID：15192736
> 
> 赞同：0
> 
> 时间：2013-03-04T00:32:19.937
> 
> 标签：java, concurrency

我发现自己在重复这种模式，并且经常想知道它是否在 Java 中是惯用的，或者有更好的方法来实现这种行为。

问题：给定生产者/消费者设置，消费者想要处理成批的项目，因此它使用`drainTo()`, 但是`drainTo()`会轮询现有项目并且可能无法获取任何项目，为了避免这种情况，我在排水管前面加上 a`take()`以确保它阻塞直到至少有一项可用。

对于特定数据集，我遇到的一个问题是，在许多用例中，批量大小通常在 (1, N, 1, N) 之间不规则交替。一般来说，这是解决此问题的常用方法：

例子：

```
 ArrayBlockingQueue<Foo> queue;

 function void produce() {
    while(true) {
       queue.put(createFoo());
    }
 }

 function void consumeBatchSpin() {
    while(true) {
       List<Foo> batch = Lists.newLinkedList();
       queue.drainTo(batch);

       doSomething(batch);
       //the problem here is that if nothing is being produced, this loop will spin
    }
 }

 function void consumeBatchTake() {
    while(true) {
       List<Foo> batch = Lists.newLinkedList();
       batch.add(queue.take()); //force at least one item to be there
       queue.drainTo(batch);

       doSomething(batch);
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:48:49.673

您是否考虑过添加到列表中并在获取时获取**整个**列表。

我最近在[这里](https://stackoverflow.com/a/15135308/823393)发了一篇。它正在[这里](https://codereview.stackexchange.com/q/23275/11913)进行代码审查，但我的测试表明它很健壮。

本质上，当您执行 put 时，您会将新元素添加到当前列表中。当您执行 get 时，您将获得**整个**列表并自动将其替换为新的空列表。

无需使用`drainTo`，也无需旋转。

# angularjs - AngularJS 中的动态数据绑定

> ID：15192740
> 
> 赞同：11
> 
> 时间：2013-03-04T00:32:45.847
> 
> 标签：angularjs, angularjs-directive

我正在构建一个 AngularJS 应用程序，但遇到了一个问题。我一直在玩这个框架，但我还没有看到类似这样的文档或任何示例的文档。我不确定要走哪条路，指令，模块，或者我还没有听说过的东西......

**问题：**

基本上，我的应用程序允许用户添加对象，我们将在此示例中说跨度，这些对象具有某些可编辑的属性：高度和关联的标签。而不是每个跨度都有自己专用的高度和标签操作输入字段，我想使用一组能够控制跨度对象的所有迭代的输入字段。

所以我的大约。工作代码是这样的：

```
<span ng-repeat="widget in chart.object">
    <label>{{widget.label}}</label>
    <span id="obj-js" class="obj" style="height:{{widget.amt}}px"></span>
</span>
<button ng-click="addObject()" class="add">ADD</button>

<input type="text" class="builder-input" ng-model="chart.object[0]['label']"/>
<input type="range" class="slider" ng-model="chart.object[0]['amt']"/> 
```

上面的代码将允许用户添加新对象，但 UI 显然是硬编码为数组中的第一个对象。

**所需功能：**

当用户单击一个对象时，它会更新输入的 ng-model 的值以绑定到单击的对象。因此，如果单击“object_2”，输入的 ng-model 会更新以与 object_2 的值同步。如果用户点击“object_4”，它会更新输入的 ng-model，你就明白了。本质上是智能用户界面。

我考虑过编写一个名为“sync”的指令属性，它可以将 ng-model 状态推送到绑定的 UI。我已经完全创建了一个名为`<object>`并在控制器中构造它们的新标签。而且我考虑过使用`ng-click="someFn()"`它来更新输入字段。所有这些都是“可能性”，各有优缺点，但我想在我开始做某事或走错路之前，我会询问社区。

有没有人这样做过（如果有，例子）？如果不是，那么执行此操作的最干净的 AngularJS 方法是什么？干杯。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-04T01:15:07.180

我认为您不需要专门针对这种情况使用自定义指令 - 尽管一旦您的控件参与更多，这可能会对您的应用程序有所帮​​助。

看看这个可能的解决方案，添加了一些格式：http: [//jsfiddle.net/tLfYt/](http://jsfiddle.net/tLfYt/)

我认为解决此问题的最简单方法需要： - 在范围内存储“选定”索引 - 将 ng-click 绑定到每个重复的跨度，并使用它来更新索引。

从那里，您可以完全按照您的建议进行操作：根据您的输入更新模型。这种声明式思维方式是我喜欢 Angular 的一点——你的应用程序可以按照你对问题的逻辑思考方式进行。

在您的控制器中：

```
$scope.selectedObjectIndex = null;

$scope.selectObject = function($index) {
    $scope.selectedObjectIndex = $index;
} 
```

在您的 ng-repeat 中：

```
<span ng-repeat="widget in chart.object" ng-click="selectObject($index)"> 
```

您的输入：

```
<input type="text" class="builder-input" ng-model="chart.object[selectedObjectIndex]['label']"/>
<input type="range" class="slider" ng-model="chart.object[selectedObjectIndex]['amt']"/> 
```

# c# - 使用 AudioVideoCaptureDevice WP8 获取 RGB 值（来自 GetPreviewBufferArgb）

> ID：15192745
> 
> 赞同：0
> 
> 时间：2013-03-04T00:33:40.997
> 
> 标签：c#, windows-phone-8, buffer, windows-phone

我想在 Windows Phone 8 中使用 AudioVideoCaptureDevice 从视频中计算 RGB 值。我想使用 AudioVideoCaptureDevice，因为它可以设置某些其他人无法像 VideoTorch 一样的属性。现在，我可以在 Videotorch On 的情况下使用 AudioVideoCaptureDevice 捕获视频。但是我可以分析视频以逐帧获取 RGB 值（微秒计算）吗？

我不认为这是可能的。我其实不知道。

但我认为还有另一种方法是从预览缓冲区中获取 RGB 值（使用实时提要）。我知道如何将它与 capturedevice 或 photocamera 一起使用。我也可以使用 PhotoCamera 获取 RGB 值。但是，我可以使用 AudioVideoCaptureDevice 从 PreviewBuffer 中获取 RGB 值吗？我怎样才能使用这个功能？

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.media.capture.audiovideocapturedevice.getpreviewbufferargb%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/windows.phone.media.capture.audiovideocapturedevice.getpreviewbufferargb%28v=vs.105%29.aspx)

请我真的需要帮助。任何意见都会对我有很大帮助。谢谢您阅读此篇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:03:13.067

做到了，现在得到十秒的RGB值。跟随：

1.  使用 audiovideocapturedevice 设置相机。
2.  摄像头的 VideoTorchmode 开启。
3.  从预览中获取相机像素。
4.  获取数组中的每个像素。
5.  读出数组并使用 getpreviewbufferargb 获取每一帧的 RGB 值。
6.  计算帧数并从总数/计数中获取平均值。
7.  循环十秒钟。

# java - Java调用方法使用||

> ID：15192748
> 
> 赞同：1
> 
> 时间：2013-03-04T00:34:05.887
> 
> 标签：java

这是我难以理解的行

```
return (match(regex.substring(1), s)|| match(regex, s.substring(1))); 
```

我的理解是，如果第一种方法为假，它将调用后者。所以我写了一个简单的程序来测试。

```
public static void main(String[] args)
{
   System.out.println(test(5));
}

public static boolean test(int a)
{
    System.out.println(a);
    if (a>10)
        return true;
    if (a==4)
        return false;
    else
        return (test(a-1) || (test(a+1)));
} 
```

但它只打印 5 4 6 5 4 6...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:35:57.543

如果左表达式或右表达式为真，则逻辑 OR 为真。如果左表达式为真，计算机语言可以选择不计算右表达式以节省时间。事实上，这正是 Java 所做的。

这意味着

```
match(regex, s.substring(1)) 
```

当且仅当

```
match(regex.substring(1), s) 
```

是假的。

所以返回值为：

*   *如果`match(regex.substring(1), s)`返回 true，*则为true，**
**   `match(regex, s.substring(1)`否则的返回值*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:40:30.357

它相当于：

```
if match(regex.substring(1), s) return true;
if match(regex, s.substring(1)) return true;
return false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T00:50:31.157

您编写的程序以 5 作为参数调用 test。这将打印五个。这不大于 4 的 10，所以它转到 else。在 else 中，您递归地调用它自己的方法，第一次使用 4 。所以打印了 4 这返回了一个错误。然后它尝试第二个是 a+1，所以它用 6 调用 test。这会在屏幕上打印 6，通过 else，然后再次递归调用 test，用 a（现在是 6）-1 所以5。这个循环是无止境的。

你必须把第一个 if: if (a==4)

这修复了程序，但不是您想要的。

另外问题是您使用的逻辑或完全错误。OR 旨在查看两个答案中的一个是否为真。如果要根据情况调用方法，则必须使用 if 或三元运算符。

```
public static void main(String[] args)
{
   System.out.println(test(5));
}

public static boolean test(int a)
{
    System.out.println(a);
    if (a>10)
        return true;
    if (a==4)
        return false;
    else
        if(test(a-1)) {
            return test(a-1);
        }
        else {
            return (test(a+1));
        }
} 
```

这应该给你你想要的我猜*

# php - 将值从 HTML 表单传输到 PHP 文件时，变量的值未正确存储

> ID：15192749
> 
> 赞同：-4
> 
> 时间：2013-03-04T00:34:09.933
> 
> 标签：php, html, mysql, css

谢谢 Ben，但现在我面临的另一个问题是，当我将分页添加到代码中时，第一次没有显示结果。请参阅下面代码的后半部分。请帮忙

```
if(isset($_GET['k'])){ $k1 = $_GET['k']; } else { $k1 = ''; }
echo $k1;
    $term = explode(" ", $k1);

$query = "SELECT * FROM database ";

foreach ($term as $each) 
{
    echo $each;
$i++;
    if($i==1)
    {
        $query .= "WHERE keywords LIKE '%$each%' ";
    }

else {
    $query .= "OR WHERE keywords LIKE '%$each%' ";
}

}

$per_pages=3;
$page_query = mysql_query("SELECT COUNT('title') FROM kcpdatabase");
    $pages = ceil(mysql_result($page_query, 0)/$per_pages)  or die

       ($page_query."<br/><br/>".mysql_error());    
       $page = (isset($_GET['page'])) ? (int) 
       ($_GET['page']) : 1;                             
$start = ($page - 1) * $per_pages;  
$query .= "LIMIT $start, $per_pages";

$ourquery1 = mysql_query ($query);
if(!$ourquery1)
echo "No query found";
$row1 = mysql_num_rows ($ourquery1);

if($pages >= 1 && $page <= $pages){ 

    for($x = 1; $x <= $pages; $x++)
    {

        echo '<a href="?page='.$x.'">'.$x.'</a> ';
    }

if ($row1 > 0)
{

    while($result = mysql_fetch_assoc($ourquery1))
    {
           echo "<tr>";
        echo "<td>";
        $title = $result['title'];
        $link = $result['link'];
        $region = $result['region'];
        $sector = $result['sector'];
        $theme = $result['theme'];      
        echo "<td> <a href=$link><h3>$title<h3></a>";
        echo "<h4>Sector: $sector <br>Theme: $theme <br> Region: $region  
                          </td>  </tr>";
    }
}   

}
echo "</tbody>"; 
```

下面是我试图搜索在文本框中输入的单词/短语的代码的一部分。当我使用“$k1 = isset($_GET['k']);”从 php 文件中的表单中捕获值时 存储在变量“$each”中的值是“1”，而不是用户输入的单词或短语。这会弄乱正在执行搜索功能的查询。请帮我定位错误。

请注意，“k”是下面表单代码中定义的文本框的名称。

```
 <form name="keywordquery" method="get" action="page2.php">
<fieldset class="fieldsetclass"><legend class="legendclass">Search by Keywords</legend>
      <div id="searchbox">
<input type="text" name="k" value="<?php if(isset($_GET['k'])){echo htmlentities($_GET
       ['k']);} ?>" style="border: 1px, thin; width:92%; "/> 
<input type="image" style="margin-bottom: 0; margin-top: 2px;" src="search.png"
      value="submit" />
</div>
</fieldset>
    </form>
    </div>
<table cellpadding="0" cellspacing="0" border="1">

    <tbody>    
<?php

$connection = mysql_connect('', '', '');
if(!$connection)
echo "No database connected";
$dbase = mysql_select_db("", $connection);
if(!$dbase)
echo "No datatable connected";

$k1 = isset($_GET['k']);
echo $k1;
$term = explode(" ", $k1);

$query = "SELECT * FROM datatable ";

foreach ($term as $each) 
{
    echo $each;
$i++;
    if($i==1)
    {
        $query .= "WHERE keywords LIKE '%$each%' ";
    }

else {
    $query .= "OR WHERE keywords LIKE '%$each%' ";
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:38:21.343

```
$k1 = isset($_GET['k']); 
```

它设置`$k1`为 1，因为它正在检查它是否已设置 - 在这种情况下，它已经并且`isset()`正在返回 true，或者 1。

你想要的是：

```
if(isset($_GET['k'])){ $k1 = $_GET['k']; } else { $k1 = ''; } 
```

或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:38:07.543

那是因为 isset() 是一个布尔函数，请检查以下链接[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

就这样做

```
if(isset($_GET['k']))
    $k1 = $_GET['k']; 
```

# python - Broken Pipe - 试图在 LCD 显示屏上显示 dd 的进度

> ID：15192756
> 
> 赞同：1
> 
> 时间：2013-03-04T00:35:03.803
> 
> 标签：python, gzip, subprocess, dd

我正在尝试使用 Python 创建一个工具，用于使用 Raspberry Pi 对 CF 卡进行映像。

在我使用`dd`.

当我尝试通过管道输出`gzip`to时，`dd`我失去了戳`dd`过程并取得进展的能力。

我尝试使用多个子进程，但不断出现管道损坏或没有此类文件错误。

下面是我的代码：

```
#!/usr/bin/env python
from Adafruit_CharLCD import Adafruit_CharLCD
import os
import sys
import time
import signal
from subprocess import Popen, PIPE
lcd = Adafruit_CharLCD()
lcd.begin(16,2)
imgpth = '/home/pi/image/image_V11.img.gz'
line0 = ""
line1 = ""
q = 0
r = 0
s = 0

def lcdPrint(column, row, message, clear=False):
    if ( clear == True ):
        lcd.clear()

    lcd.setCursor(column, row)
    lcd.message(message)

lcd.clear()                 
lcdPrint(0, 0, 'Preparing Copy', True)
lcdPrint(0, 1, '')

gz = Popen(['gunzip -c /home/pi/image/image_V11.img.gz'], stdout=PIPE)
dd = Popen(['dd of=/dev/sda'],stdin=gz.stdout, stderr=PIPE)                     

filebyte = os.path.getsize(imgpth)                                  
flsz = filebyte/1024000 

while dd.poll() is None:                                        
    time.sleep(1)
    dd.send_signal(signal.SIGUSR1)
    while 1:                                            
        l = dd.stderr.readline()
    if '(' in l:                                            
        param, value = l.split('b',1)                           
        line1 = param.rstrip()                              
        r = float(line1)                                    
        s = r/1024000
        break
lcdPrint(0, 0, 'Copying....', True)
q = round(s/flsz*100, 2)                                
per = str(q)        

lcdPrint(0, 1, per + '% Complete',)

lcdPrint(0, 0, 'Copy Complete', True)   
time.sleep(1)
exit() 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T22:10:36.053

我偶然发现了这个问题，因为我正在做同样的事情。我的完整解决方案在这里：

*   [http://github.com/jrmhaig/面包店](http://github.com/jrmhaig/Bakery)

我试图找出我所拥有的和你所拥有的之间的一些差异，这些差异可能会向你展示解决方案。

启动 dd 时，我将 stderr 和 stdout 都重定向到了管道。

```
dd = subprocess.Popen(['dd', 'of=/dev/sda', 'bs=1M'], bufsize=1, stdin=unzip.stdout, stdout=PIPE, stderr=STDOUT) 
```

我不认为这真的应该有所作为。你需要的一切都应该去stderr，但由于某种原因，它似乎对我来说很混乱。

我使用一个单独的线程来获取 dd 的输出：

```
def read_pipe(out, queue):
    for line in iter(out.readline, b''):
        queue.put(str(line))
    out.close()

dd_queue = queue.Queue()
dd_thread = threading.Thread(target = read_pipe, args=(dd.stdout, dd_queue))
dd_thread.daemon = True
dd_thread.start() 
```

然后当你打电话时：

```
dd.send_signal(signal.SIGUSR1) 
```

输出被 dd_queue 捕获。

我还发现 gzip 文件的未压缩大小存储在最后 4 个字节中：

```
fl = open(str(imgpath), 'rb')
fl.seek(-4, 2)
r = fl.read()
fl.close()
size = struct.unpack('<I', r)[0] 
```

os.path.getsize(imgpth) 只会给你压缩后的大小，所以百分比计算是错误的。

# javascript - 将取消隐藏 div 的 Jquery 函数的问题

> ID：15192760
> 
> 赞同：-2
> 
> 时间：2013-03-04T00:35:32.950
> 
> 标签：javascript, jquery, html

随附的小提琴是我想要的工作副本：http: [//jsfiddle.net/DLEBf/2/](http://jsfiddle.net/DLEBf/2/)

但它在我的代码中不起作用。

这是我的代码：

HTML：`<div class="listResults"></div>`

JS：

```
function createMarker(latlng, address) {
    var html =  "<br/>" + address;
    var marker = new google.maps.Marker({
        map: map,
        position: latlng
    });
    google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
    });
    markers.push(marker);

    $(function(){
        $('.listResults').on('click', '.heading',  function(){
           $(this).next().slideToggle('slow');
        });

        var el = $('<div/>', {
        'class' : 'heading',
        'html' : 'Header-1'
        });
        var content = $('<div/>', { 
        'class' : 'content',
        'style' : 'display:none',
        'html' : 'This is content'
        })
        $('.listResults').append(el);
        el.after(content);
    }); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:47:54.917

在该`$(function(){})`部分之后应该有一个`(jQuery);`，并且您需要`$`像这样作为参数传递：

```
(function($){
    ...
})(jQuery); 
```

# javascript - Emberjs - 简单的应用程序不起作用

> ID：15192763
> 
> 赞同：1
> 
> 时间：2013-03-04T00:35:55.390
> 
> 标签：javascript, ember.js

我只是在[http://trek.github.com/](http://trek.github.com/)上浏览 Emberjs 教程，但部分代码没有返回预期的输出。

我的 HTML 是

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.0.0-rc.3/handlebars.min.js"></script> 
    <script type="text/javascript" src="https://raw.github.com/emberjs/ember.js/release-builds/ember-1.0.0-rc.1.min.js"></script>
    <script type="text/javascript" src="js/App.js"></script>
</head>
<body>
    <div></div>

    <script type="text/x-handlebars" data-template-name="application">
        <h1>Ember committers</h1>
        {{outlet}}
    </script>

    <script type="text/x-handlebars" data-template-name="contributors">
        {{#each person in controller}}
            {{person.login}}
        {{/each}}
    </script>

</body>
</html> 
```

我的 App.js（用 App.coffee 编写）

```
window.App = Ember.Application.create()

App.ApplicationView = Ember.View.extend
    templateName:"application"

App.ApplicationController = Ember.Controller.extend()

App.AllContributorsController = Ember.ArrayController.extend()
App.AllControbutorsView = Ember.View.extend
    templateName:"contributors"

App.Router = Ember.Router.extend
    root:Ember.Route.extend
        index:Ember.Route.extend
            route:"/"
            connectOutlets: (router) ->
                router.get("applicationController").connectOutlet("allContributors", [{login:'wycats'},{login:'tomdale'}]) 
```

我希望打印出“wycats”和“tomdale”，但什么也没有。这是我的 jsFiddle - [http://jsfiddle.net/Djunu/](http://jsfiddle.net/Djunu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:07:46.437

您的代码基于过时的 API。Ember 1.0.rc 有一种全新的、更友好的方式来定义路由和设置控制器。有关最新材料，请参阅本指南：http: [//emberjs.com/guides/routing/](http://emberjs.com/guides/routing/)

# ssis - 删除具有相同键的行

> ID：15192774
> 
> 赞同：5
> 
> 时间：2013-03-04T00:36:55.313
> 
> 标签：ssis, rows

我有如下行的数据：

```
Name1  Name2  Name3  Col  
aaa    bbb    ccc    ...  
abc    ddd    ddd    1  
abc    ddd    ddd    2  
abc    ddd    ddd    3  
fff    fff    fff    ...  
ggg    ggg    hhh    4  
ggg    ggg    hhh    5 
```

( `Name1`,`Name2`和`Name3`是主键)

如何从具有相同 3 个主键的数据集中删除第一行？（只留下*集合*的最后一行）

即上述结果将是：

```
Name1  Name2  Name3  Col  
aaa    bbb    ccc    ...  
abc    ddd    ddd    3  
fff    fff    fff    ...  
ggg    ggg    hhh    5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T19:36:23.067

假设您的源数据顺序正确，并且您想要每组中的*最后一条*记录，则没有任何开箱即用的转换可以处理这种情况。但是，脚本转换可以相当容易地处理它。

这是一个示例数据流：

![在此处输入图像描述](../Images/56270de4ac289219d90a43a64bc59d40.png)

为简单起见，我使用`FF_SRC_AllRows`和作为平面文件源和目标（分别），使用您提供的示例数据；`FF_DST_SelectedRows`您的具体需求会有所不同。脚本转换`SCR_SelectLastRow`配置为转换（输入和输出）：

![在此处输入图像描述](../Images/d34c09d27682d362c61b6a48adad3ae1.png)

选择所有输入列（使用类型`ReadOnly`）：

![在此处输入图像描述](../Images/779ad09843c4e784792278017ef92994.png)

创建一个输出（我命名为 mine `OutgoingRows`，但您可以随意命名），并将`SynchronousInputID`属性设置为`None`. 这将使您的脚本过滤掉您不想要的行。

![在此处输入图像描述](../Images/95c87b2ab205b039e3f1e04d8a108309.png)

添加与输入列对应的输出列：

![在此处输入图像描述](../Images/029c26455710e0c55cd4e44cb9e4b06f.png)

并使用以下代码：

```
/* Microsoft SQL Server Integration Services Script Component
*  Write scripts using Microsoft Visual C# 2008.
*  ScriptMain is the entry point class of the script.*/

using System;
using Microsoft.SqlServer.Dts.Pipeline.Wrapper;
using Microsoft.SqlServer.Dts.Runtime.Wrapper;

[Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute]
public class ScriptMain : UserComponent
{
    class IncomingRowData
    {
        public string Name1;
        public string Name2;
        public string Name3;
        public string Col;
        public IncomingRowData(IncomingRowsBuffer Row)
        {
            Name1 = Row.Name1;
            Name2 = Row.Name2;
            Name3 = Row.Name3;
            Col = Row.Col;
        }
        public bool KeysDiffer(IncomingRowData other)
        {
            return (Name1 != other.Name1
                || Name2 != other.Name2
                || Name3 != other.Name3);
        }
        public void WriteToOutputBuffer(OutgoingRowsBuffer Row)
        {
            Row.AddRow();
            Row.Name1 = Name1;
            Row.Name2 = Name2;
            Row.Name3 = Name3;
            Row.Col = Col;
        }
    }

    private IncomingRowData _previousRow;

    public override void IncomingRows_ProcessInputRow(IncomingRowsBuffer Row)
    {
        if (_previousRow == null)
        {
            _previousRow = new IncomingRowData(Row);
        }
        IncomingRowData currentRow = new IncomingRowData(Row);
        if (currentRow.KeysDiffer(_previousRow))
        {
            _previousRow.WriteToOutputBuffer(this.OutgoingRowsBuffer);
        }
        _previousRow = currentRow;
    }

    public override void FinishOutputs()
    {
        if (_previousRow != null)
        {
            _previousRow.WriteToOutputBuffer(this.OutgoingRowsBuffer);
        }
        base.FinishOutputs();
    }
} 
```

这种技术的一个好处是它允许您一次处理数据，并且不需要使用临时表，也不需要将整个源数据集保存在内存中。根据您的数据集有多大，其中任何一个都可能导致严重的性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T00:43:38.050

建议 #1：尽可能在源查询中执行此操作。

假设这是不可能的，*并且*假设您始终希望选择 Col 的最大值，您可以在数据流中使用 Aggregate 组件。

只需将所有列添加到聚合输入中，对于操作，为 Name1、Name2 和 Name3 选择“Group By”，为 Col 选择“Maximum”。

不幸的是，聚合组件是一个异步组件 - 这意味着您的整个流程将在数据流入其中时暂停，因为在每一行中读取它之前它不会知道每个集合的“最大值”值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T01:52:02.887

```
SELECT name1, 
       name2, 
       name3, 
       col 
FROM   (SELECT name1, 
               name2, 
               name3, 
               col, 
               Max(rn) 
                 over ( 
                   PARTITION BY name1, name2, name3 ) AS max_rn, 
               rn 
        FROM   (SELECT name1, 
                       name2, 
                       name3, 
                       col, 
                       Row_number() 
                         over ( 
                           PARTITION BY name1, name2, name3 
                           ORDER BY col ) AS rn 
                FROM   test1)) 
WHERE  max_rn = rn; 
```

你可以试试这个 test1 是表名

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T06:49:29.400

您需要对数据进行分组并选择最大 Col 值。

流动：

![在此处输入图像描述](../Images/17725e7013613b2995b91e347939fbd8.png)

数据：

![在此处输入图像描述](../Images/b18cd1f3a550c625fe80387bd9c91c5d.png)

聚合元素：

![在此处输入图像描述](../Images/3a902a1270140f3af7f3ed4d82f6b5a7.png)

结果： ![在此处输入图像描述](../Images/d317d6f4beeec4c0023702815f9a9f6e.png)

如果您使用 SQL Table 并且可以编写查询：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/54d13/1)**

```
SELECT Name1, Name2, Name3, MAX(Col) Col
FROM Table1
GROUP BY Name1, Name2, Name3 
```

结果：

```
| NAME1 | NAME2 | NAME3 | COL |
-------------------------------
|   aaa |   bbb |   ccc | ... |
|   abc |   ddd |   ddd |   3 |
|   fff |   fff |   fff | ... |
|   ggg |   ggg |   hhh |   5 | 
```

# asp.net-mvc - 动态填充选择列表 MVC

> ID：15192782
> 
> 赞同：1
> 
> 时间：2013-03-04T00:38:43.923
> 
> 标签：asp.net-mvc

我正在尝试创建级联下拉列表。我的控制器看起来像这样初始化视图..

```
 public ActionResult Create()
        {

            var model = new RoundDetailViewModel();

                model.AvailableFacilities = new SelectList(db.Facilities, "FacilityId", "Facility_Name");
                model.AvailableCourses = new SelectList(Enumerable.Empty<Course>(), "CourseId", "Course_Name");
                model.AvailableTeeTypes= new SelectList(Enumerable.Empty<TeeType>(), "TeeTypeId", "Name");

            return View(model);
        } 
```

这将填充第一个下拉列表，并按预期创建 2 个空下拉列表。

现在，在选择第一个下拉列表时，我想在我的控制器中调用一个 Action 来填充第二个下拉列表。这是我对填充第二个下拉列表的操作中的代码有点模糊的地方。我想用这样的东西来触发调用动作..

```
 $("#ddlFacility").change(function () {
        var selectedFacility = $(this).val();
        if (selectedFacility != null && selectedFacility != '') {
            $.getJSON("@Url.Action("GetCourse")", { facility: selectedFacility }, function (courses) {
                var coursesSelect = $('#ddlCourse');
                coursesSelect.empty();
                $.each(courses, function (index, course) {
                    coursesSelect.append($('<option/>', {
                        value: course.value,
                        text: course.text
                    }));
                });
            });
        }
    });

   public ActionResult Courses(int facilityId)
        {
           //WHAT GOES HERE TO POPULATE SELECT LIST??           

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:42:19.407

需要返回 JsonResult 并允许 Get（如果这是您决定做的）或者您需要将其设为 POST 并对其执行 POST。

就像是

```
public JsonResult GetCourses(int id)
{        
    var Courses= db.Courses.Where(a=>facilityId==id).ToList();
    SelectList list = new SelectList(Courses,"Text", "Value");
    return Json(list , JsonRequestBehavior.AllowGet);
} 
```

# web-services - 创建一个网络服务，每小时连接到另一个网络服务以更新我的数据库

> ID：15192783
> 
> 赞同：0
> 
> 时间：2013-03-04T00:38:51.327
> 
> 标签：web-services, web-applications, programming-languages, webserver

我想为我的 android 手机创建一个天气应用程序，但现在我被困在应用程序的后端部分。

我找到了一个气象服务，我可以通过他们的网络服务免费获取某个位置的详细信息。但是他们在他们的规则中已经声明不允许我频繁地轮询他们的服务。所以我想我可以自己创建一个网络服务，从我找到的气象站检索天气信息，然后通过我的网络服务使其可用，这样我的应用程序就只调用我的服务。

沟通将如下所示

MyApp <--> MyWebService <--> 商业网络服务

android 应用程序与 MyWebService 对话。我的网络服务与商业服务对话。

所以我想让 MyWebService 做一些事情。

1.  每小时从商业网络服务中检索一次信息并更新我的数据库
2.  处理来自我的 androidApp 的请求

我的问题是我对 Web 应用程序和 Web 服务知之甚少。我真的不知道为网络服务选择什么语言。带有soap 或REST 的PHP 看起来是第二个任务的不错选择。但我找不到任何关于如何处理第一个任务的样本。有没有简单的方法告诉服务器每小时运行一次我的脚本？我也一直在研究 C#，这会更适合我，因为我更习惯 C#。但同样的问题出现在这里。我如何处理第二个任务？

这是我想写很久的东西，但在这里我完全迷失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:44:06.330

出于多种原因，从纯 Web 应用程序“每小时一次”（或更一般地，调度任务）做事是很棘手的。一般来说，最好使用操作系统的内置机制来执行计划任务（例如，Linux 下的*cron ，或 Windows 下的**计划任务*），或者编写一个服务/守护进程来处理更新。

话虽如此，有一种相当简单的方法可以满足您的要求。您可以在您的 Web 应用程序层中*缓存*商业 Web 服务的结果，以及您上次检索信息的时间戳。当 Web 请求从您的应用程序进入您的 Web 服务时，首先检查缓存的时间戳。如果时间戳小于一小时，则返回缓存的天气数据。如果时间戳超过一个小时，则直接从那里调用商业 Web 服务，将结果和当前时间写入缓存，并将刚刚获得的数据返回给应用程序。

PHP 当然非常适合这种任务。有关如何执行此操作的详细说明超出了 Stack Overflow 问题的范围。谷歌 PHP 和缓存，尝试一些示例，如果遇到困难，请询问详细的后续问题。

# visual-studio-2010 - CUDA 5.0 单独编译和链接选项和 Visual Studio 2010

> ID：15192787
> 
> 赞同：0
> 
> 时间：2013-03-04T00:39:23.063
> 
> 标签：visual-studio-2010, cuda

根据[CUDA 5 及更高](http://developer.download.nvidia.com/GTC/PDF/GTC2012/PresentationPDF/S0641-GTC2012-CUDA-5-Beyond.pdf)版本和其他来源，我应该能够通过 -dc 选项编译和链接几个单独的 .cu 文件。我唯一的问题是我在 Visual Studio 2010 中究竟在哪里放置了这个选项。这可能很简单，只是无法弄清楚:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:13:31.520

好的，再次很好看，它很简单:( 配置 -> CUDA C/C++ -> 命令行现在您可以在命令行参数的打印输出下方添加其他选项。

# multithreading - 生产者 - python 中的消费者

> ID：15192788
> 
> 赞同：1
> 
> 时间：2013-03-04T00:39:31.920
> 
> 标签：multithreading, python-3.x, producer-consumer

对于生产者-消费者问题，我提出了这个解决方案：

```
import threading
import random
import time

class Bucket:

def __init__(self, size):
    self.size = size
    self.current_size = 0
    self.cond_var = threading.Condition()

def available_for_put(self):
    return self.current_size < self.size

def available_for_get(self):
    return self.current_size > 0

def put(self):
    self.current_size = self.current_size + 1
    print(self)
    self.cond_var.notify_all()

def get(self):
    self.current_size = self.current_size - 1
    print(self)
    self.cond_var.notify_all()

def acquire(self):
    self.cond_var.acquire()

def release(self):
    self.cond_var.release()

def wait(self):
    self.cond_var.wait()

def __str__(self):
    return "Size is {0}".format(self.current_size)

class Worker(threading.Thread):

PRODUCER = 1
CONSUMER = 0

def __init__(self, bucket, kind):
    threading.Thread.__init__(self)
    self.kind = kind
    self.bucket = bucket

def run(self):
    while(1):
        self.bucket.acquire()
        while(((self.kind == Worker.PRODUCER) and (not self.bucket.available_for_put())) or \
            ((self.kind == Worker.CONSUMER) and (not self.bucket.available_for_get()))):
            self.bucket.wait()
            ### self.bucket.acquire()
        if self.kind == Worker.PRODUCER:
            self.bucket.put()
        else:
            self.bucket.get()
        time.sleep(0.1)
        self.bucket.release()

bucket = Bucket(10)
workers = []

for i in range(10):
    workers.append(Worker(bucket, i % 2))

for w in workers:
    w.start()
    print("Thread started")

for w in workers:
    w.join() 
```

显然，如果我删除`while(1)`循环并让每个线程只在循环中运行块时，它就会达到死锁，我不明白为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T01:28:21.693

生产者-消费者模式可以很容易地使用 Python 的内置队列支持来实现：

*   [queue - 一个同步队列类](http://docs.python.org/3/library/queue.html)

这可以简化您的代码。调度程序也非常有用：

*   [schedule - 事件调度程序](http://docs.python.org/3/library/sched.html)

由于您的问题是用 Python-3.x 标记的，因此您绝对应该看看 concurrent.futures 模块：

*   [期货 - 启动并行任务](http://docs.python.org/3/library/concurrent.futures.html)

您的工人可以是任务，而桶可以成为队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T23:22:03.967

显然问题是，从等待中醒来后，您重新获取锁，因此现在注释掉的获取将阻塞。

# html - 使用 .live() 处理 jQuery Checkbox 事件

> ID：15192789
> 
> 赞同：3
> 
> 时间：2013-03-04T00:39:32.700
> 
> 标签：html, checkbox, jquery

jQuery 新手在这里。我有一个通过 jQuery 中的以下代码动态添加的复选框：

```
.html("<input type='checkbox' class='checkbox' value='7.5'>"); 
```

如果单击复选框，我希望能够最终调用一个函数。我尝试使用这两种代码变体：对于类复选框：

```
$(".checkbox").live('click', function() {
    alert('test');
}); 
```

或调用所有复选框：

```
$(":checkbox").live('click', function() {

    alert('test');
}); 
```

这根本行不通。有任何想法吗？非常感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T00:42:47.267

`.live()`已弃用。使用事件委托语法：

```
$(document).on('change', 'input[type="checkbox"]', function(e) {
    alert(e);
}); 
```

替换`document`为绑定事件处理程序时存在的最近父元素的选择器。我也建议不要使用`:checkbox`，因为它是一个非本地选择器，并且会比`input[type="checkbox"]`

# ios - 在 iOS 设备上创建可写文件夹

> ID：15192791
> 
> 赞同：0
> 
> 时间：2013-03-04T00:40:02.437
> 
> 标签：ios

如何在 Documents 目录的同一级别上创建一个读/写文件夹？有没有办法在 iTunes 和应用程序之间设置用于 iOS 文件共享的目录，或者是否将其硬编码到 Documents 目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:51:59.830

在未越狱的设备上，您无法在 Documents 目录的同一级别上创建读/写文件夹。此外，无法更改文件共享中使用的目录。

如果您需要创建文件并希望它们远离文件共享，则可以使用其他可写目录。这个[SO question & answer](https://stackoverflow.com/questions/1567134/how-can-i-get-a-writable-path-on-the-iphone/1567147#1567147)很好地解决了这个问题。

# grid - 将纹理应用到网格

> ID：15192794
> 
> 赞同：0
> 
> 时间：2013-03-04T00:40:35.930
> 
> 标签：grid, processing

我想使用处理将纹理应用于 3d 空间中的网格，我尝试声明 PImage 并使用 loadimage 设置 .jpg 文件但没有结果..

```
 PImage tex;

    void setup()  {    
size(800, 600, P3D);   
 tex=loadImage("ground104"); 
noCursor(); 
}  
void draw() 
  {    
directionalLight(255, 255, 255, 0, 0, -1); 
   background(180); 
   drawPlane();  
}    
void drawPlane()
  {  //lights(); 
   int s = 10000;  
        int ss = 500;
         fill(0, 200, 20);   stroke(200);    for(int i = 0; i < s; i += ss)    {
        stroke(0,100,0);
        strokeWeight(3);
        beginShape(QUAD_STRIP);
        for(int j = 0; j <= s; j += ss)
        {
          texture(tex);
          vertex(j, i, 0);
          vertex(j, i + ss, 0);
        }
        endShape();    }    noStroke();  } 
```

你有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:55:24.330

看起来你需要一个像.jpg这样的文件扩展名。您可以通过运行参考页面中的代码进行故障排除：

[http://www.processing.org/reference/texture_](http://www.processing.org/reference/texture_)

```
size(100, 100, P3D);
noStroke();
PImage img = loadImage("laDefense.jpg");
beginShape();
texture(img);
vertex(10, 20, 0, 0);
vertex(80, 5, 100, 0);
vertex(95, 90, 100, 100);
vertex(40, 95, 0, 100);
endShape(); 
```

并将 laDefense.jpg 替换为您的图像名称。另外，它需要放在草图目录中的数据目录中。如果它有效，那么您的问题在其他地方。我不确定你在草图中的计划是什么，但你可能会发现 peasycam 对 3d 中的故障排除很有用。

[http://mrfeinberg.com/peasycam/](http://mrfeinberg.com/peasycam/)

另一种技术是每帧将浮点数增加 0.01，并在 draw() 方法/循环的开头调用 RotateX()、Y 或 Z 或以上所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:53:16.580

感谢你的回复！我已经把我的代码改成了这个，现在你可以运行它看看我得到了什么（首先从[https://www.dropbox.com/s/fsda0tih67q8tll/grass.jpg?m](https://www.dropbox.com/s/fsda0tih67q8tll/grass.jpg?m)下载grass.jpg ）。我很接近，但我想知道为什么网格应该是草地时是绿色的......

```
PImage tex;

void setup()  
{    
size(800, 600, P3D);   
tex=loadImage("grass.jpg"); 
noCursor(); 
}  

void draw() 
{ 
  translate(width/2 , height/2 , 0);  // center of screen
    rotateX(QUARTER_PI * 1.0);            // move camera up
    rotateZ(QUARTER_PI * 1.8);
    //rotateZ(camZ.val + offset);           // rotate around turret

    rotateZ(map(mouseX, mouseY, width, 2.5, -2.5));

    translate(-1000, 0, -1000);
  directionalLight(255, 255, 255, 0, 0, -1); 
  background(180); 
  drawPlane();  
}    
void drawPlane()
  {  //lights(); 
   int s = 10000;  
        int ss = 500;
         fill(0, 200, 20);   stroke(200);    for(int i = 0; i < s; i += ss)    {
        stroke(0,100,0);
        strokeWeight(3);
        beginShape(QUAD_STRIP);
        for(int j = 0; j <= s; j += ss)
        {
          texture(tex);
          vertex(j, i, 0);
          vertex(j, i + ss, 0);
        }
        endShape();
    }    
noStroke();
  } 
```

# android - 在清单中调用另一个包中的类？

> ID：15192800
> 
> 赞同：1
> 
> 时间：2013-03-04T00:41:59.583
> 
> 标签：android

我的预计设置如下：

```
com.myApp.app 
```

-----包含主要活动文件

```
com.myApp.background 
```

-----包含一个带有服务的类

我的清单设置如下：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myApp.app"
    android:versionCode="1"
    android:versionName="1.0" >

<service android:enabled="true" android:name=".background.SendLocationtoServer" >
        </service> 
```

我一直遇到无法找到服务的问题。这很明显，因为它当前的调用`com.myApp.app.background`是不正确的。我想让它打电话`com.myApp.background`。我已经尝试在服务标签中明确设置它，并将整个包更改为 com.myApp ，这会导致大量错误和强制关闭。我如何告诉它查看上面的包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:53:10.480

您可以在创建时使用完全限定的包名称`Intent`来启动`Service`，但我认为更简单的方法是为（在清单中）设置`Intent`过滤器`Service`，然后只需在您`Intent`从外部包创建的操作中指定该操作.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:56:00.450

`<service>`使用清单中定义的完全限定包名称。现在，您正在注册一个名称解析为 com.myApp.app.background.SendLocationtoServer 的服务器。将名称更改为 com.myApp.background.SendLocationtoServer，或任何完全限定的名称。

# excel - 如何在 excel VBA 中控制多页内的按钮

> ID：15192801
> 
> 赞同：2
> 
> 时间：2013-03-04T00:42:16.777
> 
> 标签：excel, vba, multipage, commandbutton

我有一个多页，我成功地将作为我的参考页面的第一页的元素复制到动态创建的新页面。

我的问题是，如何在多页控件的页面内设置命令按钮的操作？我的目标是单击任何页面上的按钮，然后弹出另一个表单。

我该怎么做呢？从 Android 调整到 VB 非常困难。我真的很感谢你们的帮助。

这是我克隆页面的代码。

```
i = 0
MultiPage1.Pages.Add
MultiPage1.Pages(i).Controls.Copy
i = i + 1
MultiPage1.Pages(i).Paste
For Each ctl In Me.MultiPage1.Pages(i).Controls
     If TypeOf ctl Is MSForms.Label Then
           '~~~ code omitted
           Select Case ctl.Tag
                Case "startTime"
                        ctl.Caption = "4:00pm"
           End Select
     End If
Next 
```

这就是它的样子。 ![在此处输入图像描述](../Images/c57cf8397ea335965263f5d6de050882.png)

该按钮将连接页面内的所有字符串。连接的字符串将显示在另一个用户窗体上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T03:53:06.707

您可能最好在功能区中创建一个按钮，以便它在所有页面上都可用：

[http://chandoo.org/wp/2012/02/27/how-to-add-your-own-macros-to-excel-ribbon/](http://chandoo.org/wp/2012/02/27/how-to-add-your-own-macros-to-excel-ribbon/)

编辑：

我的错，我以为您的意思是用户表单中的工作表而不是 VBA MultiPage。

看一下这个。我能够为我完成这项工作：

[将代码分配给动态创建的按钮](https://stackoverflow.com/questions/10224511/assign-code-to-a-button-created-dynamically-using-vba-on-excel)

第一类：

```
Option Explicit

Public WithEvents CmdEvents As MSForms.CommandButton

Private Sub CmdEvents_Click()
    MsgBox "yo"
End Sub 
```

具有 MultiPage 对象的用户窗体：

```
Option Explicit

Dim cmdArray() As New Class1

Private Sub CommandButton1_Click()
    Dim newControl As Control

    Set newControl = Me.MultiPage1.Pages(0).Controls.Add("Forms.CommandButton.1", "NewCommand", True)

    newControl.Object.Caption = "hello"

    newControl.Left = 50
    newControl.Top = 50

    ReDim Preserve cmdArray(1 To 1)
    Set cmdArray(1).CmdEvents = newControl

    Set newControl = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:36:03.477

您可以使用自定义类来做到这一点。班级基本上只有一名成员`Public WithEvents b as CommandButton`。

诀窍是`WithEvents`关键字。您现在可以插入一些代码来一般处理分配给此类的按钮的单击：

```
Private Sub b_Click()
    MsgBox "You clicked " & b.Name 'Modify this event so that different code is executed base on the page/name/etc.
End Sub 
```

为了完成这项工作，您需要将您在代码中创建的按钮分配给这个新类的对象：

```
Private objButtonHandler as New MyClass 'this should be scope a UserForm wide

Sub YourSub
    Dim objYourButton as CommandButton
    Set objYourButton = ... `your code here
    Set objButtonHandler.b = objYourButton
End Sub 
```

# time - 动态（在某些时间间隔）在three.js中的平面/立方体上更改纹理？

> ID：15192807
> 
> 赞同：1
> 
> 时间：2013-03-04T00:43:14.993
> 
> 标签：time, three.js, textures, intervals

我知道在渲染时它与 texture.needsUpdate() 有关，但我不知道如何实际实现它。也许有人知道我可以看到一个工作示例或发布一些代码的链接？干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:08:50.937

一个很好的问题；我创建了一些示例代码来做到这一点——使用 spritesheet 在平面和立方体上做一些 2D 动画，这需要定期更新。这是一个文档示例的链接，该示例特别包含一个功能，可以完全满足您的需求。

[http://stemkoski.github.com/Three.js/Texture-Animation.html](http://stemkoski.github.com/Three.js/Texture-Animation.html)

希望能帮助到你！

# python - 用户注册后Django自动登录（1.4）

> ID：15192808
> 
> 赞同：5
> 
> 时间：2013-03-04T00:43:19.923
> 
> 标签：python, django, authentication, django-views, django-authentication

我有一个成功注册用户的问题 - 但是，我希望用户在注册时登录。这是代表我的注册视图的代码。关于为什么用户没有自动登录的任何想法？

笔记：

*   用户已正确注册，他们可以在此之后登录
*   authenticate(**kwargs) 正在返回正确的用户
*   在 settings.py 我有：

    ```
    AUTHENTICATION_BACKENDS = ('django.contrib.auth.backends.ModelBackend',) 
    ```

谢谢！

```
def register(request):
    user_creation_form = UserCreationForm(request.POST or None)
    if request.method == 'POST' and user_creation_form.is_valid():
        u_name = user_creation_form.cleaned_data.get('username')
        u_pass = user_creation_form.cleaned_data.get('password2')
        user_creation_form.save()
        print u_name # Prints correct username
        print u_pass # Prints correct password
        user = authenticate(username=u_name,
                            password=u_pass)
        print 'User: ', user # Prints correct user
        login(request, user) # Seems to do nothing
        return HttpResponseRedirect('/book/') # User is not logged in on this page
    c = RequestContext(request, {'form': user_creation_form})
    return render_to_response('register.html', c) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:46:06.177

啊! 我想到了。如果有人遇到这个问题，如果您手动调用它，请从 django.contrib.auth 导入登录名 - 我正在导入视图。注释掉的代码代表我的情况的错误导入。

```
# from django.contrib.auth.views import login
from django.contrib.auth import authenticate, logout, login 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T00:48:36.380

我这样做：

```
u.backend = "django.contrib.auth.backends.ModelBackend"
login(request, u) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-10T21:49:16.117

对于基于类的视图，这里是对我有用的代码（django 1.7）

```
from django.contrib.auth import authenticate, login
from django.contrib.auth.forms import UserCreationForm
from django.views.generic import FormView

class SignUp(FormView):
   template_name = 'signup.html'
   form_class = UserCreationForm
   success_url='/account'

   def form_valid(self, form):
      #save the new user first
      form.save()
      #get the username and password
      username = self.request.POST['username']
      password = self.request.POST['password1']
      #authenticate user then login
      user = authenticate(username=username, password=password)
      login(self.request, user)
      return super(SignUp, self).form_valid(form) 
```

# c# - 如何修复索引超出范围错误

> ID：15192813
> 
> 赞同：6
> 
> 时间：2013-03-04T00:44:09.537
> 
> 标签：c#

我该如何解决这个错误：

> 指数超出范围。必须是非负数且小于集合的大小。参数名称：索引

在这段代码中：

```
dataGridView1.AllowUserToAddRows = false;
dataGridView1.Columns.Add("ID", "ID");
dataGridView1.Columns.Add("Firstname", "Firstname");
dataGridView1.Columns.Add("MI", "MI");
dataGridView1.Columns.Add("Lastname", "Lastname");
dataGridView1.Columns.Add("Username", "Username");
dataGridView1.Columns.Add("Rights", "Rights");
c.Open();
OleDbCommand cmd = new OleDbCommand();
cmd.Connection = c;
cmd.CommandText = "SELECT * From Account";
OleDbDataReader reader = cmd.ExecuteReader();
while (reader.Read())
{
    dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["ID"].Value = reader[0].ToString();
    dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["Firstname"].Value = reader[1].ToString();
    dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["MI"].Value = reader[2].ToString();
    dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["Lastname"].Value = reader[3].ToString();
    dataGridView1.Rows[dataGridView1.Rows.Count -    1].Cells["Username"].Value = reader[7].ToString();
    dataGridView1.Rows[dataGridView1.Rows.Count - 1].Cells["Rights"].Value      = reader[9].ToString();
}
c.Close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T01:04:28.633

您是否尝试将数据从数据库显示到`datagridview`？为什么不使用`databind`？

查看我的示例代码：

```
string connStr = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=the directory or the path of your database";
string query = "SELECT * From Table Name";
using (OleDbConnection conn = new OleDbConnection(connStr))
{
    using (OleDbDataAdapter adapter = new OleDbDataAdapter(query, conn))
    {
        DataSet ds = new DataSet();
        adapter.Fill(ds);
        dataGridView1.DataSource = ds.Tables[0];
    }
    conn.Close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T01:34:22.350

Rows 集合有一个接受对象数组的“添加”方法。与您问题中的代码示例相比，这绝对是一种更简单、更直接的方法：

[http://msdn.microsoft.com/en-us/library/fbs04kbx.aspx](http://msdn.microsoft.com/en-us/library/fbs04kbx.aspx)

# javascript - 不明白接受前缀作为参数

> ID：15192818
> 
> 赞同：0
> 
> 时间：2013-03-04T00:44:46.723
> 
> 标签：javascript, function

所以我要根据用户的输入创建一个星号三角形：

[http://jsfiddle.net/u6mjm/](http://jsfiddle.net/u6mjm/)

`makeTriangle`而且我不明白修改函数以接受前缀作为参数是什么意思，而且每一行输出都应该包含这个前缀。前缀作为参数是什么意思？我很困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:57:44.313

我假设您的问题与“作为参数的前缀”一词的含义有关。这些词的简单含义是您应该修改`makeTriangle`以采用附加参数，该参数应作为前缀打印到每行输出。在这种情况下，*前缀*仅表示出现在每行开头的字符串。

# c# - C#从列表中获取字符串

> ID：15192819
> 
> 赞同：0
> 
> 时间：2013-03-04T00:44:58.700
> 
> 标签：c#, string, list

我正在尝试从 c# 中的列表中获取字符串，但找不到方法。这是我的代码

```
public class CurrentCondition
{
    public string cloudcover { get; set; }
    public string humidity { get; set; }
    public string observation_time { get; set; }
    public string precipMM { get; set; }
    public string pressure { get; set; }
    public string temp_C { get; set; }
    public string temp_F { get; set; }
    public string visibility { get; set; }
    public string weatherCode { get; set; }
    public List<WeatherDesc> weatherDesc { get; set; }
    public List<WeatherIconUrl> weatherIconUrl { get; set; }
    public string winddir16Point { get; set; }
    public string winddirDegree { get; set; }
    public string windspeedKmph { get; set; }
    public string windspeedMiles { get; set; }
}
    public class Data
{
    public List<CurrentCondition> current_condition { get; set; }
} 
```

例如，我想从列表中获取`temp_F`字符串。`current_condition`我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:47:16.260

假设您想要 CurrentCondition 实例列表中的所有温度，您可以使用 Linq 轻松完成此操作：

```
List<string> temps = current_condition.Select(x => x.temp_F).ToList(); 
```

根据接受的答案，以下是使用 Linq 获得特定温度的方法：

```
string temp = current_condition.Where(x => x.observation_time == "08:30").FirstOrDefault(x => x.temp_F); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T00:47:08.917

因为`current_condition`是一个列表，你必须知道你对哪个列表索引感兴趣。假设你想要索引 0，你会写

```
Data data = new Data();
// Some code that populates `current_condition` must somehow run
string result = data.current_condition[0].temp_F. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T00:48:40.320

```
List<string> list = new List<string>();
current_condition.ForEach(cond => list.Add(cond.temp_F)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T00:51:04.397

您可以使用 ElementAt(int) 访问列表中的对象。

```
String t = current_condition.ElementAt(index).temp_F; 
```

# image - 如何识别和显示来自 MATLAB .mat 数据文件的图像？

> ID：15192825
> 
> 赞同：1
> 
> 时间：2013-03-04T00:45:23.727
> 
> 标签：image, matlab, arraylist, structure, datalist

我有一个 MATLAB 文件`xyz.mat`（

这是我唯一的线索：

> Matlab 数据文件包含一个结构“data”和一个字段“dataList”，它本身就是一个结构数组，每个图像一个元素。所以第一张图片可以在data.dataList(1).img中找到

将文件加载到 MATLAB（什么也没发生）并输入命令`data.dataList(1).img`（我得到一个巨大的数字列表）后，我仍然没有得到图像。

任何帮助/想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:24:16.230

如果`data.dataList(1).img`是 2D 或 3D（使用 检查`size`），您可以使用[imshow](http://www.mathworks.com/help/images/ref/imshow.html)将此 2D 数组（灰度）或 3D 数组（颜色）可视化为图像。

```
im = data.dataList(1).img;
figure; imshow(im, []); 
```

[您可以使用imhist](http://www.mathworks.com/help/images/ref/imhist.html)找到此图像的范围，`min(im(:))`或`max(im(:))`绘制其值的分布。

要以矩形蒙太奇查看所有图像，请查看[蒙太奇](http://www.mathworks.com/help/images/ref/montage.html)函数：

> montage(I) 在单个图像对象中显示多帧图像阵列 I 的所有帧。I 可以是二进制、灰度或真彩色图像的序列。二值或灰度图像序列必须是 M×N×1×K 数组。

实际上，您可以将许多 K 图像（`M x N`大小相同）放入一个`M x N x 1 x K`数组并调用 montage：

```
for k = 1:K
    I(:,:,1,k) = data.dataList(k).img; 
end
figure; montage(I); 
```

# c# - 为什么无法将 ListA 从从线程转移到主线程？

> ID：15192832
> 
> 赞同：3
> 
> 时间：2013-03-04T00:46:53.297
> 
> 标签：c#, wpf, multithreading, dependencies, backgroundworker

我正在尝试生成和调度（同时让我的 UI 线程使用[`progressRing.IsActive = true;`](http://mahapps.com/MahApps.Metro/#progress_ring)），三个`List`对象放在 a 上`BackgroundWorker`，然后将所述列表传输到`UI Thread`，但我遇到了问题......

> [必须在与 DependencyObject 相同的线程上创建 DependencySource。](http://iforce.co.nz/i/ewb1xx3y.k5x.png)

**资源，我读过**

*   [C# 锁（MSDN 文档）](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx)
*   [向后台工作人员发送参数（Stackoverflow）](https://stackoverflow.com/questions/4807152/sending-arguments-to-background-worker)
*   [C# 后台工作者（MSDN 文档）](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)
*   [C# 让后台工作人员返回结果 (Stackoverflow)](https://stackoverflow.com/questions/939635/how-to-make-backgroundworker-return-an-object)

`BackgroundLogin()`分班法`MainWindow`

```
 private void BackgroundLogin()
    {
        //process the form on UI Thread
        this.LoginForm(FadeOut);
        this.LoadingRing(FadeIn);

        //Start a new Thread
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += worker_DoWork;
        worker.RunWorkerCompleted += worker_RunWorkerCompleted;
        //initialize custom class WorkerThread object to store/process a result
        WorkerThread wt = new WorkerThread(this, txtEmailAddress.Text, txtPassword.Password);
        //start the worker and send the object across.
        worker.RunWorkerAsync(wt);
    } 
```

`worker_DoWork`分班法`MainWindow`

```
 private void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        //grab the object
        WorkerThread wt = (WorkerThread)e.Argument;
        //check if we can login
        if (!wt.Login())
        {
            //cancel the thread
            e.Cancel = true;
        }
        else
        {
            //load additional data
            wt.UpdateAuthLbl(".. Loading New Data ..");
            wt.LoadLists();
            wt.UpdateAuthLbl(".. Data Loaded ..");
        }
        //pass the object back
        e.Result = wt;
    } 
```

`loadLists()`上课方式[`WorkerThread`](http://pastebin.com/xYNXc6zD)

```
 /// <summary>
    /// Load data into the list
    /// </summary>
    public void LoadLists()
    {
        this.gene_fact_list = db.loadGeneFactTable();
        this.gene_trait_fact_list = db.loadGeneTraitFactTable(this.gene_fact_list);
        this.category_trait_list = db.loadCategoryTraits();
    } 
```

`worker_RunWorkerCompleted`部分类方法,类`MainWindow`对象`gl`[`GeneList`](http://pastebin.com/2Xp69NvY)

```
 private void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        //grab the finished object
        WorkerThread wt = (WorkerThread) e.Result;
        //work out if we are logged in
        Boolean LoginFlag = !e.Cancelled && e.Error == null;
        if (LoginFlag)
        {
            lblAuthentication.Content = ".. Loading Interface ..";
            //pass the finished object into memory
            this.gl = wt;
            //reset the listbox
            this.resetListBox();
        }
        this.LoginForm(LoginFlag);
    } 
```

方法`resetListBox()`和`ListBoxItems`

```
 /// <summary>
    /// Load the data for the form
    /// </summary>
    public void resetListBox()
    {
        if (this.gl.notNullOrEmpty())
        {
            this.ListBoxItems.Clear();
            //begin compiling the mainTab
            foreach (KeyValuePair<long, GeneNotesDataModel> kvp in this.gl.gene_fact_list)
            {
                this.ListBoxItems.Add(kvp.Value);
            }
        }
    } //close function

    //declare WPF list binding
    private ObservableCollection<GeneNotesDataModel> _listBoxItems = new ObservableCollection<GeneNotesDataModel>();

    /// <summary>
    /// Control the listbox of rsid codes
    /// </summary>
    public ObservableCollection<GeneNotesDataModel> ListBoxItems
    {
        get { return _listBoxItems; }
        set { _listBoxItems = value; }
    } 
```

XAML `ListBox`lstSnpCodes

```
<ListBox ItemsSource="{Binding ElementName=UI, Path=ListBoxItems}" Margin="6,38,0,60" BorderThickness="2" HorizontalAlignment="Left" Width="180" Name="lstSnpCodes" SelectionChanged="lstSnpCodes_SelectionChanged" KeyUp="OnKeyUpHandler" /> 
```

该行`this.ListBoxItems.Add(kvp.Value);`导致[`Exception`](http://pastebin.com/z7FPJN3s)发生（如果我用它替换`Debug.WriteLine(kvp.Value.getValueAsString());`它会运行得很好）。关于为什么我得到一个 DependencySource 异常的任何想法？为什么不能`ListA`从`Slave Thread`to转移`Main Thread`？

*PasteBin 链接将于 2013 年 4 月到期*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T06:25:15.697

与其尝试直接跨线程访问属性，不如尝试访问其背后的变量。

在示例应用程序中：

```
private static List<object> _lst;

    static void Main(string[] args)
    {
        Task tsk =  new Task(() => _lst = new List<object>()); //task will create new thread if available and execute the Action.
        tsk.Start(); //initiates task, which initiates new List<object> on new thread.
        tsk.Wait(); //waits for task to complete.  Note that this locks main thread.
        _lst.Add(1); //Attempt to access _lst from main thread.
    } 
```

具体到你的例子。

```
private ReadOnly object _lockMyList = new object();
private List _MyList;

public void SetMyList(List lst) //Use this to set list from other thread.
{
    Lock(_lockMyList)
    {
        _MyList = lst;
    }
    //Invoke Property Changed event if needed for binding.
}

public List MyList
{
    get
    {
        List lst = null;
        Lock(_lockMyList)
        {
            lst = _MyList; //You might need to do _MyList.ToList() for true thread safety
        }
        return lst;
    }
    //Property setter if needed, but use accessor method instead for setting property from other thread
} 
```

此外，您可能需要查看 SynchronizedCollection 以查看它是否更适合您的需求。

我希望这有帮助。

# php - MySQL 插入序列化对象时出现错误 1064

> ID：15192838
> 
> 赞同：0
> 
> 时间：2013-03-04T00:47:25.390
> 
> 标签：php, mysql

所以我有一个已序列化的自定义 PHP 对象，我正在尝试使用 PHP 代码将其插入 MySQL 数据库：

```
$serializedOrder = serialize($objectOrder);

//I have tried both of these, and all combinations of them
$serializedOrder = mysql_real_escape_string($serializedOrder);
$serializedOrder = stripslashes($serializedOrder);

$result = mysql_query("INSERT INTO orders(order) VALUES('".$serializedOrder."')");
if ($result == false) {
   echo "mysql_query failed  ";
   echo mysql_error();
   echo "   ";
   echo mysql_errno();
} 
```

这会产生响应：

mysql_query failed 你的 SQL 语法有错误；查看与您的 MySQL 服务器版本相对应的手册，了解在 'order) VALUES('O:10:"OrderClass":6:{s:9:"foodArray";a:0:{}s: 附近使用的正确语法8:"baseTime";i:0;s:1' 在第 1 行 1064

总序列化字符串为：

O:10:"OrderClass":6:{s:9:"foodArray";a:0:{}s:8:"baseTime";i:0;s:11:"orderNumber";i:0;s :11:"卡车编号";i:0;s:10:"customerID";i:0;s:11:"orderStatus";s:0:"";}

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:01:50.137

正确查询

```
$result = mysql_query("INSERT INTO orders(`order`) VALUES('".$serializedOrder."')"); 
```

[https://dev.mysql.com/doc/refman/4.1/en/reserved-words.html](https://dev.mysql.com/doc/refman/4.1/en/reserved-words.html)

# actionscript-3 - AS3 中 5287 的堆栈限制是变量还是预定义的？

> ID：15192839
> 
> 赞同：10
> 
> 时间：2013-03-04T00:47:25.823
> 
> 标签：actionscript-3

我刚才做了一个测试：

```
function overflow(stack:int = 0):void
{
    if(stack < 5290)
    {
        trace(stack);
        overflow(stack + 1);
    }
}

overflow(); 
```

`5287`这总是在调用后引发 StackOverflow 错误。

> 错误 #1023：发生堆栈溢出。

这个限制变量是（取决于机器规格、环境等）还是在某处定义的平面值？如果我将`if`语句更改为小于 5287，我不会收到错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T06:30:50.097

嗯，这很有趣。我查看了 Barış 提供的链接。毕竟，它似乎可能与“方法复杂性”有关，但我不确定如何进一步测试它。我正在使用 Flash CS5，为 Flash Player 10、Actionscript 3 发布（当然）。

原来的：

```
function overflow(stack:int = 0):void {
    if(stack < 5290){
        trace(stack);
        overflow(stack + 1);
    }
}
// gives 5287 
```

现在向 overflow() 方法添加一个 Math.random() 调用：

```
function overflow(stack:int = 0):void {
    Math.random();
    if(stack < 5290){
        trace(stack);
        overflow(stack + 1);
    }
}
// gives 4837 
```

添加多个 Math.random() 调用没有区别，也不会将其存储在局部变量中或向 overflow() 方法添加另一个参数以“携带”随机生成的值

```
function overflow(stack:int = 0):void {
    Math.random();
    Math.random();
    if(stack < 5290){
        trace(stack);
        overflow(stack + 1);
    }
}
// still gives 4837 
```

此时我尝试了不同的数学调用，例如：

```
// just the change to that 1 line:
Math.pow() // gives 4457
Math.random(), Math.sqrt(), Math.tan(), Math.log() // gives 4837 
```

有趣的是，传递给 Math 类的内容似乎并不重要，但它保持不变：

```
Math.sqrt(5) vs Math.sqrt(Math.random()) // gives 4837
Math.tan(5) vs Math.tan(Math.random()) // gives 4837
Math.pow(5, 7) vs Math.pow(Math.random(), Math.random()) // 4457 
```

直到我链接了其中的 3 个：

```
Math.tan(Math.log(Math.random())); // gives 4457 
```

看起来来自该“组”的两个 Math 调用与一个 Math.pow() 调用“相等”？=b 混合 Math.pow() 和其他东西似乎并没有降低价值：

```
Math.pow(Math.random(), Math.random()); // gives 4457 
```

但是，链接两个 Math.pow()：

```
Math.pow(Math.pow(Math.random(), Math.random()), Math.random()); // 4133 
```

我可以继续说下去，但我想知道是否有某种模式：

```
Results:   5287, 4837, 4457, 4133
Differences:  450   380   324 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T07:55:35.017

显然它是可变的。由于您真正执行的所有计算都位于堆栈中（反汇编报告代码显示`pushbyte`指令和其他与堆栈一起使用的东西，作为非操作数算术），因此该值仅报告可以将多少函数上下文放入堆栈直到它溢出。

我决定根据baris 评论中引用的[这篇文章对递归阈值进行一些测试。](http://jacksondunstan.com/articles/949)结果相当尴尬。测试环境：FlashDevelop 3.3.4 RTM，Flash播放器调试器10.1.53.64，flash编译模式：release。“调试”模式基本上没有改变数字，也检查过。

```
Locals number     Iterations (static int)       Iterations (Math.random())   
0                 5306                          
1                 4864                          4856
2                 4850                          4471
3                 4474                          4149
4                 4153                          3870
5                 3871                          3868
6                 3869                          3621
7                 3620                          3404
8                 3403                          3217
9                 3210                          3214
10                3214                          3042
11                3042                          3045
10 mixed          3042     1 value was assigned Math.random() and 9 - static int
10 advancedRandom 2890     1 value was assigned a custom random with 1 parameter 
```

请注意，在后续执行之间，所有这些值都在 10 的范围内变化。“static int”和“Math.random()”是在递归调用函数中分配给本地人的名称。然而，这导致我假设以下内容：

1.  在递归函数中包含函数调用会增加函数上下文
2.  locals 的内存与其类型一起分配，超过 8 个字节的块，因为添加一个 local 并不总是减少递归限制
3.  对某个函数添加多个调用不会为函数上下文添加更多内存
4.  “内存块”很可能是 16 字节长，因为这个值是 2^N，添加一个 int 或 Number local 并不总是会减少递归，而且这大于 8，因为 Number 变量的原始值需要8 个字节，是一个双精度浮点数。
5.  假设#4 是正确的，函数上下文大小的最佳值似乎是 172 字节，总堆栈大小为 912632 字节。这在很大程度上证实了我最初的假设，即 Flash 10 中的堆栈大小实际上是 1 兆字节。当我尝试在其调试器中打开测试 SWF 时，Flash 11 向我显示了更高的数字，但我没有用它进行广泛的测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:00:45.783

一定是可变的！刚刚编译了您的示例，我在堆栈溢出之前达到了 5274。

@baris 这就是 mxmlc 编译器

+1 堆栈溢出问题^^

# iphone - 在ios中的按钮上方显示小动画的最有效方法？

> ID：15192843
> 
> 赞同：0
> 
> 时间：2013-03-04T00:47:44.243
> 
> 标签：iphone, ios, objective-c, animation

我想将其嵌入到我的 iphone 应用程序上方的一个字段中，该字段包括一个用户按下以进行注册的按钮。提前致谢！！本文的其余部分是为了帮助提高质量标准

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:34:05.773

您可以使用 UIView 动画来制作这种动画：

```
[UIView animateWithDuration:0.5 animations:^{
     button.frame = CGRectMake(20, 10, 50, 10); // the final button frame
}]; 
```

# python - 使用 np.savetxt 将数组保存为列

> ID：15192847
> 
> 赞同：54
> 
> 时间：2013-03-04T00:48:26.243
> 
> 标签：python, numpy

我正在尝试做一些可能非常简单的事情。我想使用'np.savetxt'将三个数组作为列保存到一个文件中当我尝试这个时

```
x = [1,2,3,4]
y = [5,6,7,8]
z = [9,10,11,12]

np.savetxt('myfile.txt', (x,y,z), fmt='%.18g', delimiter=' ', newline=os.linesep) 
```

数组是这样保存的

```
1 2 3 4
5 6 7 8
9 10 11 12 
```

但我想要的是这个

```
1 5 9
2 6 10
3 7 11
4 8 12 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-04T01:12:12.633

使用[`numpy.c_[]`](http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.c_.html)：

```
np.savetxt('myfile.txt', np.c_[x,y,z]) 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-08-26T23:42:36.460

使用`numpy.transpose()`：

```
np.savetxt('myfile.txt', np.transpose([x,y,z])) 
```

我发现这比使用`np.c_[]`.

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-07-05T19:12:19.047

我觉得`numpy.column_stack()`最直观：

```
np.savetxt('myfile.txt', np.column_stack([x,y,z])) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-08-05T11:18:30.080

使用邮编：

`np.savetxt('myfile2.txt', zip(x,y,z), fmt='%.18g')`

对于 python3 列表+zip：

`np.savetxt('myfile.txt', list(zip(x,y,z)), fmt='%.18g')`

要了解解决方法，请参见此处：[How can I get the "old" zip() in Python3?](https://stackoverflow.com/questions/26090117/how-can-i-get-the-old-zip-in-python3) 和[https://github.com/numpy/numpy/issues/5951](https://github.com/numpy/numpy/issues/5951)。

# c# - Windows Phone BackgroundTransferRequest 问题

> ID：15192848
> 
> 赞同：5
> 
> 时间：2013-03-04T00:48:29.010
> 
> 标签：c#, .net, windows-phone-7, windows-phone

我目前正在尝试编写一个 Windows Phone 7.1 应用程序，它允许您访问 Coursera 课程信息，包括流式讲座。

我还希望能够允许用户下载讲座视频和幻灯片 (PDF)。不幸的是，这些文件受到保护。这通常不是问题。我已`ClientHttpWebRequest`设置为使用`CookieContainer`. 这一切都很好。

尝试使用 a`BackgroundTransferRequest`下载资产时会很有趣。该类不允许您`CookieContainer`为 cookie 提供实例。这意味着我必须使用`BackgroundTransferRequest.Headers`.

Coursera 将其会话 cookie 作为 HttpOnly cookie 返回。不幸的是，`ClientHttpWebRequest`不允许您从响应中访问 HttpOnly cookie，并且通过代理，这意味着我无法从中读取会话 cookie `CookieContainer`。

是否有任何明显的我遗漏的东西可以让我访问我感兴趣的价值，或者我是否需要提出我自己的后台文件传输基础设施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T12:49:37.987

不，你没有错过任何东西。这是 SDK 产品中的一个缺口。

不过，我可以想到 2 种可能的选择。

1.  让应用程序在锁定屏幕下运行并自行处理下载。- 在后台文件传输可用之前，我们必须这样做。

2.  拥有自己的代理服务器，它位于应用程序和其他站点之间，它可以为您处理 cookie 方面的事情，并使文件直接对应用程序可用。显然，在采用这种方法之前，可能需要考虑一些重要的安全考虑。运行和维护服务器可能还会产生额外费用。

# smalltalk - 在 OS X 上使用额外内存启动 Pharo

> ID：15192851
> 
> 赞同：2
> 
> 时间：2013-03-04T00:48:48.880
> 
> 标签：smalltalk, pharo

我正在运行一项昂贵的分析，而我的 Pharo 图像引发了内存不足的错误。

我知道有一种方法可以用额外的内存启动 Cog VM，但现在找不到。有人知道如何在 Mac 上做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T01:03:37.217

Oki，似乎我自己找到了答案。对于我拥有的 VM 版本，我可以运行：

```
croquet -m 2000M 
```

用 2G 内存运行镜像。

# c - 将 const char** 传递给函数 - 如何构建 char**？

> ID：15192856
> 
> 赞同：2
> 
> 时间：2013-03-04T00:49:19.023
> 
> 标签：c, matlab, redis

我正在尝试为hiredis构建一个matlab包装器。我从来没有做过任何 C 编程，而且我总是遇到麻烦，因为我不记得基础知识。因为我正在处理来自 matlab 的 args，需要将其从 mxArray 对象转换为`char*`，所以我需要使用该函数

void *redisCommandArgv(redisContext *c, int argc, const char **argv, const size_t *argvlen);

我理解要点，但让我感到困惑的是什么是 argv 定义的`const char**`？为什么不只是`char*`？我不知道`char**`在这种情况下如何构建。如果是这样，`char*`我将每次循环遍历我的 mxArrays 和 realloc 并添加到主 char*。

编辑-我知道是什么`char*`，我知道 const 是什么。我不记得或通过谷歌搜索找到的是如何构建一堆`char*`不同长度的`char**`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:01:53.920

库中有一个错误，应该是`const char* const* argv`因为函数没有修改它。然后你可以`char**`毫无困难地通过a。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T01:32:36.873

> 我不记得或通过谷歌搜索找到的是如何将一堆不同长度的 char* 构造成 char**

如果您提前知道您想要的字符串是什么，这是一种方法：

```
const char* my_string_array[] = {"hi", "world"}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T00:53:02.177

这`char **`是一个指向字符指针（即字符串）数组的指针。简单来说，您需要将一个字符串数组传递给`redisCommandArgv`函数，而 argc 是该数组的大小。

`const char*`关键字表示该函数不会对该指针指向的数据（即字符串）进行任何更改。`const char**`是此类`const char *`指针的数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T00:53:49.377

您需要了解`const char **` *通常*指的是什么。`const char *` *通常*是指一个字符串，`const char **` *通常*是指一个字符串数组。当有问题的参数是`argv`你可以指望它期待一个字符串数组。

理解为什么`char *`是字符串的一种方法是，字符串只是一个字符数组，在 C 字符串的情况下以 null 结尾，这绝对是预期的。该`const`部分只是保证它不会被相关功能修改，这是一件好事。

# mysql - MySQL 插入的原子性...选择查询

> ID：15192857
> 
> 赞同：0
> 
> 时间：2013-03-04T00:49:21.850
> 
> 标签：mysql, atomic

假设我有这个查询：

```
INSERT INTO contest_project_entries (project_id, number) 
SELECT 17477, COUNT(*) FROM contest_project_entries WHERE project_id = 17478; 
```

并假设两个用户同时（或几乎同时）使用上述查询向服务器发出请求。子查询“ `SELECT COUNT(*) FROM contest_project_entries WHERE project_id = 17478`”是否会针对用户的两个请求返回相同的结果？

我只是在找出此类查询的原子性。

# css - 删除列中选定图像之间的空间

> ID：15192858
> 
> 赞同：0
> 
> 时间：2013-03-04T00:49:40.740
> 
> 标签：css, html, alignment, image

我有一系列由间隔 div 分割的图像，但我需要图像一个接一个，没有任何间距。我试过了

```
float:left 
```

这给出了我想要的效果，但把所有东西都扔到了左边，并删除了所有的填充。

```
display: block 
```

似乎不影响我的图像。

但都没有给出想要的

```
<div class="stage">
    <div class="spacer"></div>
            <img src="images/portfolio/GifHeader32col.gif" >
            <img src="images/portfolio/lights.png" />
            <img src="images/portfolio/SG-Body.png" />
            <img src="images/portfolio/footer.png" >
    <div class="spacer"></div>
            <img src="images/portfolio/GifHeader32col.gif" >
            <img src="images/portfolio/lights.png" />
            <img src="images/portfolio/SLT-Body.png" />
            <img src="images/portfolio/footer.png" >
    <div class="spacer"></div>
            <img src="images/portfolio/GifHeader32col.gif" >
            <img src="images/portfolio/lights.png" />
            <img src="images/portfolio/SSG-Body.png"/>
            <img src="images/portfolio/footer.png" >
    <div class="spacer"</div>
</div> 
```

我已经尝试了我能想到的一切，但我的 css/html 仍然非常原始。非常感谢。

编辑：CSS

```
#stage {
width: 700px;
} 
```

-

```
.spacer {
height: 1px;
clear: both;
border-bottom: 1px;
border-style: solid;
border-color: #d6d6d6;
margin: 20px 5px 20px 5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:37:14.263

**在你的 CSS 中添加这个：**

```
.stage img{
    float: left;
    margin: 0px 0px 24px 0px;
} 
```

**注意：**仔细检查您的*(last div class="spacer")*它必须是：

```
<div class="spacer"></div> 
```

--->希望对您有所帮助..™</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:57:56.077

图像是内联的，因此要删除间距，您需要逐字逐句地这样做。

IE

```
 <img src="images/portfolio/GifHeader32col.gif" ><!--
     --><img src="images/portfolio/lights.png" /><!--
     --><img src="images/portfolio/SG-Body.png" /><!--
     --><img src="images/portfolio/footer.png" > 
```

或者，您可以将它们放在无序列表中并将列表元素浮动到左侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T00:58:17.267

如果将每张图像放在一行中，则所有图像之间都会有空格。

如果您想将图像保留在一行中，请将图像放在 a 中`<div class="image-container">`并将`float: "left"`属性放在`.image-container img`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T01:03:25.530

这是你想要的？ [http://jsfiddle.net/5QJhg/](http://jsfiddle.net/5QJhg/)

```
.stage img { float: left; }
.spacer { clear: both; } 
```

# vb.net - 如何在 VB.NET 中更改动态创建的标签的值？

> ID：15192859
> 
> 赞同：2
> 
> 时间：2013-03-04T00:50:05.797
> 
> 标签：vb.net, label, dynamically-generated

在我的项目中，为数据库中的每一行创建一个标签并添加到面板控件中。我需要一个解决方案来实现以下目标：当计时器滴答作响时，我希望所有这些标签文本值与 System.Time.Now 同步。所有这些标签都因此命名。如何从 Time.Tick 访问他们的 .Text 值？

```
For i = 1 To ds.Tables("MyTable").Rows.Count
  Dim NextPanel As New Panel
  Dim NextLabel As Label
  NextPanel.Controls.Add(NextLabel)
  MyForm.Controls.Add(NextPanel)
  NextLabel.Name = "MyLabel" & i
  NextPanel.Name = "MyPanel" & i
Next 
```

在这里我调用这些控件时遇到问题：

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        ' I want each label's text to be Time.Now()
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T01:48:21.043

集合属性引用的控件`Controls`可以通过其名称访问，如下所示：

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    For i As Integer = 1 to ds.Tables("MyTable").Rows.Count
        Dim panel As Panel = CType(MyForm.Controls("MyPanel" & i.ToString()), Panel)
        Dim label As Label = CType(panel.Controls("MyLabel" & i.ToString()), Label)
    Next
End Sub 
```

但是，您可能会发现在创建它们时将它们全部添加到列表中更容易，以便以后可以访问它们。例如，如果您像这样创建了几个列表作为表单上的私有字段：

```
Private myPanels As New List(Of Panel)()
Private myLabels As New List(Of Label)() 
```

然后，当您创建控件时，您可以将它们添加到列表中，如下所示：

```
For i = 1 To ds.Tables("MyTable").Rows.Count
  Dim nextPanel As New Panel()
  Dim nextLabel As New Label()
  nextPanel.Controls.Add(nextLabel)
  MyForm.Controls.Add(nextPanel)
  nextLabel.Name = "MyLabel" & i.ToString()
  nextPanel.Name = "MyPanel" & i.ToString()

  'Add them to the lists
  myPanels.Add(nextPanel)
  myLabels.Add(nextLabel)
Next 
```

然后，当您需要遍历它们时，它会容易得多，并且您不必关心创建的总数：

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    For Each label As Label In myLabels
        ' ...
    Next
End Sub 
```

然而，值得一提的是，如果您将标签添加到[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)控件而不是直接在表单上的单独面板中，那么您所做的事情可能会大大简化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T01:51:44.843

试试这个代码：

```
Public Class Form1

Private panelList As New List(Of Panel)

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    For i = 1 To ds.Tables("MyTable").Rows.Count
        Dim newPanel As New Panel
        newPanel.Name = "MyPanel" & i
        newPanel.Size = New Size(150, 22)
        newPanel.BackColor = Color.Yellow

        If (i = 1) Then
            newPanel.Location = New Point(10, 10)
        Else
            newPanel.Location = New Point(10 * i + ((i - 1) * newPanel.Width), 10)
        End If

        Dim newLabel As New Label
        newLabel.Name = "MyLabel" & i
        newLabel.Dock = DockStyle.Fill
        newPanel.Controls.Add(newLabel)

        Me.Controls.Add(newPanel)

        // save panel in generic list
        panelList.Add(newPanel)
    Next

End Sub

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

    // read panel from generic list
    For Each panel In panelList
        For Each control In panel.Controls
            If TypeOf (control) Is Label Then
                control.Text = control.Name + ": " + DateTime.Now.ToString("dd/mm/yy hh:MM:ss")
            End If
        Next
    Next
End Sub

End Class 
```

# java - spring rabbitmq 应用程序：控制台或网络

> ID：15192865
> 
> 赞同：1
> 
> 时间：2013-03-04T00:50:37.553
> 
> 标签：java, spring, rabbitmq

我必须在 spring 和 rabbitmq 中开发一个应用程序。这对我来说是新的，我根本没有太多经验。

基本上，该应用程序必须：

*   不断检查数据库，如果有一些更改，则将消息发送到确定的队列。

*   监听一些队列并回复一些数据。

所以我的问题是你会选择什么来制作这个应用程序，一个基于控制台的应用程序还是一个基于 Web 的应用程序。为什么？

ps：对不起，如果我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T02:56:26.190

无论您将其编写为控制台应用程序还是 Web 应用程序，对您实际执行数据库检查和消息发送的方式几乎没有影响。如果这就是你要问的，那没关系。

独立与 Web 应用程序的选择受其他因素的影响，例如您将如何部署应用程序，其他开发人员（如果有其他人与您一起工作）对构建和运行独立应用程序与 Web 应用程序的熟悉程度，以及用于在开发中运行和测试您的应用程序的工具支持。

就个人而言，我认为我会选择一个 Web 应用程序，因为全世界都在编写 Web 应用程序，因此已经建立了大量的支持来在其中和与它们一起做事，包括构建、测试和部署它们。您往往会从 Maven 和 Gradle 等构建工具中获得更好的测试 web 应用程序的支持，尽管 Gradle 似乎缩小或缩小了这方面的差距。您还可以获得一个免费的远程界面，其中包含一个几乎是当今通用语言 (HTTP) 的 web 应用程序，它可以让您轻松地在任何地方使用该应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T05:31:13.623

如果您只想检查数据库并将消息发送到 rabbitmq 队列并回复一些数据，那么我建议您使用仅限控制台的应用程序。您可以将应用程序作为独立服务运行。Spring 已经与 RabbitMQ 集成。

我们已经在使用 Spring-RabbitMQ 在我们的应用程序中进行一些繁重的计算，这些计算是由另一个应用程序完成的。因此，我们将计算应用程序作为独立的控制台应用程序运行，该应用程序会监听到达 Rabbit MQ 的消息。

如果您想远程监控此过程，则需要一个 Web 应用程序。例如，您需要查看到达的消息类型，然后根据输入消息进行回复，并且您需要远程完成所有操作，您需要一个 Web 应用程序。否则，让它成为一个简单的控制台应用程序。您也可以使用 Maven 等构建工具来测试控制台应用程序。希望这可以帮助

# delphi - 在方法之前或之后的数据字段是否有任何约定？（在类或对象或记录中）

> ID：15192866
> 
> 赞同：1
> 
> 时间：2013-03-04T00:50:56.183
> 
> 标签：delphi

当您定义一个类（或带有方法的对象或记录）时，我只是想知道数据字段是否应该出现在方法字段之前是否有任何约定？

我的意思是像下面这个简单的例子中两种情况之间的区别。（*编辑*以使具体问题更清楚）

```
type TWhatever = Object
      private
        a,b : Integer;
      public
        procedure SetWhatever(x,y :Integer);
        procedure ShowWhatever;
      end; 
```

相对

```
type TWhatever = Object
      public
        procedure SetWhatever(x,y :Integer);
        procedure ShowWhatever
      private
        a,b : Integer;
     end; 
```

我一直使用首先列出数据字段的约定，但老实说，我并不认为它有任何区别。但是最近我遇到了一些不起作用的代码（无法编译），除非首先列出数据字段。

我在这里记录了这个案例：[Delphi 2006 wont allow const parameters of type record within record method?](https://stackoverflow.com/questions/15145615/delphi-2006-wont-allow-const-parameters-of-type-record-within-record-method)

总结是，如果您将数据字段放在方法之后，那么如果对象有任何方法尝试将给定对象作为“const”参数传递，则代码将无法编译。例如像这样的东西不会编译：

```
procedure TWhatever.SomeMethod( const : w1: TWhatever); 
```

显然它将在更高版本的 Delphi 上编译，但我已经在 Delphi7 和 Delphi 2006 上对其进行了测试，但两者都无法编译。

**仅当您执行所有三**件事时才会出现问题（数据字段最后，在方法中将对象作为参数传递，为此参数使用 const 关键字）。因此，您可以通过从参数中删除 const 关键字或将数据字段放在方法之前来解决问题。

无论如何，这个问题让我想知道这里是否有要遵循的约定？

**编辑我添加了这个来给出一个特定的代码示例**

以下程序无法在 D7 和 D2006 上编译：

```
program bugtest;
{$APPTYPE CONSOLE}
uses SysUtils;

type Tob = object
   public
    procedure setOb(const a,b: integer);
    procedure addToOb(const ob1: Tob);
    procedure printOb;
   private
    x,y : Integer;
   end;

procedure Tob.setOb(const a,b: integer);
begin
  x:=a; y:=b;
end;

procedure Tob.addToOb(const ob1: Tob);
begin
  x:=x+ob1.x; y:= y+ob1.y;
end;

procedure Tob.printOb;
begin
  writeln(x,' ',y);
end;

var r1,r2: Tob;
begin
  r1.setOb(2,3);
  r2.setOb(10,100);
  r1.addToOb(r2);
  r1.printOb;
  r2.printOb;
  readln;
end. 
```

以下程序可以在 D7 和 D2006 上完美编译和运行：

```
program bugtest;
{$APPTYPE CONSOLE}
uses SysUtils;

type Tob = object
   private
    x,y : Integer;
   public
    procedure setOb(const a,b: integer);
    procedure addToOb(const ob1: Tob);
    procedure printOb;
   end;

procedure Tob.setOb(const a,b: integer);
begin
  x:=a; y:=b;
end;

procedure Tob.addToOb(const ob1: Tob);
begin
  x:=x+ob1.x; y:= y+ob1.y;
end;

procedure Tob.printOb;
begin
  writeln(x,' ',y);
end;

var r1,r2: Tob;
begin
  r1.setOb(2,3);
  r2.setOb(10,100);
  r1.addToOb(r2);
  r1.printOb;
  r2.printOb;
  readln;
end. 
```

Delphi 7 版本为：**Delphi Personal Version 7.0 build 4.453**。

D2006版本是：**Borland Delphi for MS Windows。版本 10.0.2288.42451，更新 2**。

![编译器截图](../Images/1217f1b58fc8244ac9138de996df6084.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T01:02:18.337

根据编译器，**字段声明在任何[类 section](http://docwiki.embarcadero.com/RADStudio/XE3/en/Private,_Protected,_Public,_and_Published_Declarations)**中的任何方法声明之前。一个类可能有任意数量的部分，即使具有相同的可见性。

例如：

```
type
  TMyObject = class
  private
    FTest: Integer;
    procedure A();
  private
    FOtherTest: Integer;
    procedure B();
  end; 
```

编译，你可以争论是否`FOtherTest`在之后`procedure A()`。

由于这是由编译器强制执行的，因此无法以其他方式进行，因此我不确定是否将其称为*约定*，但必须如此。

另一方面，

```
type
  TMyObject = class
  private
    procedure A();
    FTest: Integer;
  end; 
```

不编译，报错：

> E2169 在方法或属性之后不允许字段定义

是否将它作为任何类型的参数传递都没关系。根据我的经验，如果您只是在方法之后声明任何字段，则会引发错误。

### 编辑

编辑问题后，如果**对象**作为 const 参数传递给例行公事。

我设法在 VM 中运行我*非常旧的*D7，并且这个示例编译正常：

![在此处输入图像描述](../Images/0b3d6a33b5fdad51c270612f014aaf84.png)

它使用`object`or`class`声明进行编译，并且由于`records`不支持该版本的方法，显然记录声明无法编译。

### 编辑2

如果对象作为 const 参数传递给方法，它也会编译（不管是同一个对象的方法还是其他方法）

![在此处输入图像描述](../Images/9007b266c0f52e41e482949e1d7c8130.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T09:16:48.393

我认为公平地说，有一个广泛使用的约定。通常一个类声明会这样安排：

```
TMyClass = class
  // published declarations, managed by form designer
  Component1: TMyComponent;
  procedure MyEventHandler(Sender: TObject);
private
  FMyPrivateField: Integer;
  procedure MyPrivateMethod;
protected
  FMyProtectedField: Integer;
  procedure MyProtectedMethod;
public
  FMyPublicField: Integer;
  procedure MyPublicMethod;
published
  FMyPublishedField: Integer;
  procedure MyPublishedMethod;
end; 
```

换句话说，这些部分将首先按照表单设计者的声明进行组织，然后按照增加可见性的顺序进行组织。

有趣的是，其他语言也使用了其他约定。例如，查看[Google C++ 样式指南](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml?showone=Declaration_Order#Declaration_Order)，其中部分的顺序与上述相反。

就我个人而言，我更愿意先看到公开声明。在阅读已经存在的代码时，我通常会以自上而下的视角阅读。通常在编写代码时，我发现自上而下的方法是有益的。

查看我的`TComplex`记录，声明按原样排序是有原因的。我有许多类似的记录，其中一些是变体记录。例如：

```
type
  TVector = record
  public
    class operator Negative(const V: TVector): TVector;
    class operator Equal(const V1, V2: TVector): Boolean;
    class operator NotEqual(const V1, V2: TVector): Boolean;
    class operator Add(const V1, V2: TVector): TVector;
    class operator Subtract(const V1, V2: TVector): TVector;
    class operator Multiply(const V: TVector; const D: Double): TVector;
    class operator Multiply(const D: Double; const V: TVector): TVector;
    class operator Divide(const V: TVector; const D: Double): TVector;
    function IsZero: Boolean;
    function IsNonZero: Boolean;
    function IsUnit: Boolean;
    function Max: Double;
    function Sum: Double;
    function Mag: Double;
    function SqrMag: Double;
    function MagNormalComponent: Double;
    procedure MakeAxisymmetric;
    class function SNaN: TVector; static;
    function GetHashCode: Integer; inline;
  public
    case Boolean of
    False:
      (X, Y, Z: Double);
    True:
      (a: array [1..3] of Double);
  end; 
```

现在，记录的变体部分必须出现在最后。否则会出现编译错误。所以这张唱片根本没有选择。建立了公约`TVector`和相关记录后，`TComplex`简单地效仿。

# javascript - jQuery 在单击和悬停之间切换事件处理程序

> ID：15192870
> 
> 赞同：0
> 
> 时间：2013-03-04T00:51:37.947
> 
> 标签：javascript, jquery, twitter-bootstrap

`on`我知道我可以使用and添加和删除处理程序`off`。

我想要完成的是`click`在触摸设备和`hover`台式机上工作的响应式导航。

当我将窗口从小调整为大时，我的代码有效，但在缩小时不起作用（无法取消绑定悬停处理程序）。

如果有帮助，我正在使用引导程序的下拉菜单。

```
 enableHover : function() {
    $('.dropdown-toggle').off();
    $('.dropdown-toggle').parent().on({ //parent needed for hover
        mouseenter: function() {
          $(this).addClass('open').find('ul').show();
        },
        mouseleave: function() {
          $(this).removeClass('open').find('ul').hide();
        }
    });

  },
  disableHover : function() {
    $('.dropdown-toggle').parent().off('mouseenter mouseleave');
    $('.dropdown-toggle').dropdown();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:09:04.920

使用类而不是`hide`&`show`方法解决了这个问题。

# c++ - 解析 CFMutableDictionary 键

> ID：15192871
> 
> 赞同：0
> 
> 时间：2013-03-04T00:51:43.883
> 
> 标签：c++, string, macos, parsing, macos-carbon

我正在使用 IOKit 获取一些信息

```
kr = IOServiceGetMatchingServices(kIOMasterPortDefault, IOServiceNameMatching("AppleUSBEHCI"), &io_objects);
[snip]
kr = IORegistryEntryCreateCFProperties(child, &child_props,  kCFAllocatorDefault, kNilOptions );
            NSLog(@"Child props: %@", child_props);
            //release child_props
        }

        IOObjectRelease(io_service);
    }

sn = (CFStringRef) CFDictionaryGetValue(child_props, CFSTR("IOCFPlugInTypes"));
NSLog(@"sn: %@", sn); 
```

我要找钥匙`IOCFPlugInTypes`：

它有效，我回来了：

`{ "9dc7b780-9ec0-11d4-a54f-000a27052861" = "IOUSBFamily.kext/Contents/PlugIns/IOUSBLib.bundle"; }`

但我接下来需要做的就是得到上面写着的部分：`9dc7b780-9ec0-11d4-a54f-000a27052861`

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T04:36:36.770

此处 CFDictionaryGetValue 返回另一个类型为 CFDictionaryRef 的对象（不是您键入的字符串）。所以“9dc7b780-9ec0-11d4-a54f-000a27052861”是该字典中的关键。您应该执行以下操作：

```
CFTypeRef sn = (CFTypeRef)CFDictionaryGetValue(child_props, CFSTR("IOCFPlugInTypes"));
if (CFDictionaryGetTypeID() == CFGetTypeID(sn))
{
    int dictSize = CFDictionaryGetCount(sn);
    CFStringRef * keys = (CFStringRef*)malloc (dictSize * sizeof (CFStringRef));
    CFDictionaryGetKeysAndValues (sn, keys, NULL);
    for (int i = 0; i < dictSize; i++)
    {
        CFShow(keys[i]);
    }
} 
```

# python - 我无法使用 h5py 读回数据。“无法创建组”

> ID：15192874
> 
> 赞同：1
> 
> 时间：2013-03-04T00:51:59.050
> 
> 标签：python, h5py

我正在尝试完成快速入门页面上的简单示例

[http://www.h5py.org/docs/intro/quick.html](http://www.h5py.org/docs/intro/quick.html)

```
import h5py
f = h5py.File('myfile.hdf5','w')
dset = f.create_dataset("MyDataset", (100, 100), 'i')
dset[...] = 42
f.close()

ff = h5py.File('myfile.hdf5','r')
dset = ff.create_group("MyDataset") 
```

输出是

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/h5py/_hl/group.py", line 28, in create_group
    gid = h5g.create(self.id, name, lcpl=lcpl)
  File "h5g.pyx", line 135, in h5py.h5g.create (h5py/h5g.c:2057)
ValueError: unable to create group (Symbol table: Unable to initialize object) 
```

我是否试图正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T00:58:56.927

使用`'a'`mode 附加到文件，并且不要将组命名为与数据集相同的名称：

```
import h5py
with h5py.File('myfile.hdf5','w') as f:
    dset = f.create_dataset("MyDataset", (100, 100), 'i')
    dset[...] = 42

with h5py.File('myfile.hdf5','r+') as ff:
    dset = ff.create_group("MyGroup") 
```

# jquery - jQuery调整元素内的文本大小

> ID：15192877
> 
> 赞同：1
> 
> 时间：2013-03-04T00:52:05.867
> 
> 标签：jquery, resize

好的，有成功的代码可以`td`在页面加载时将表格中的元素大小调整为用户屏幕的百分比，如下所示：

```
jQuery(document).ready(function($){
    var xWidth = $(window).width();
    $("td.tablecol_0").animate({ 
        width: (xWidth * (15 / 100)) + 'px',
        minWidth: (xWidth * (15 / 100)) + 'px',
        maxWidth: (xWidth * (15 / 100)) + 'px'}, 1000);
    $("td.tablecol_1").animate({ 
        width: (xWidth * (35 / 100)) + 'px',
        minWidth: (xWidth * (35 / 100)) + 'px',
        maxWidth: (xWidth * (35 / 100)) + 'px'}, 1000);
    $("td.tablecol_2").animate({ 
        width: (xWidth * (15 / 100)) + 'px',
        minWidth: (xWidth * (15 / 100)) + 'px',
        maxWidth: (xWidth * (15 / 100)) + 'px'}, 1000);
}); 
```

因此，这根据窗口宽度起作用：15%、35% 和 15%（对于 3 列）。效果很好。但是，我想让它的内部内容也调整大小......就像它里面的所有元素一样。我希望他们相应地调整大小。

如何使用上面的以下代码在 jQuery 中快速轻松地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:38:28.600

只需将`font-size`属性设置为某个`percent`值，就像，

```
table{ font-size:50% } 
```

使用`jQuery`你可以这样做，

```
$('table').css('font-size', '100%') 
```

或者

```
$('table').css('font-size', '70%') 
```

或单独为`td`

```
$("td.tablecol_0").animate({ 
    'width' : (xWidth * (15 / 100)) + 'px',
    'minWidth' : (xWidth * (15 / 100)) + 'px',
    'maxWidth' : (xWidth * (15 / 100)) + 'px',
    'fontSize' : (xWidth * (15 / 100)) + '%'
}, 1000); 
```

如果你设置`100%`为 all`tds`那么你可以简单地使用`$(`table `).css('fontSize', '100%')`。

[**演示。**](http://jsfiddle.net/2xx6F/3/)

# google-oauth - 对于给定的客户端/用户组合，有多少个刷新令牌 Google API 问题？

> ID：15192878
> 
> 赞同：3
> 
> 时间：2013-03-04T00:52:08.757
> 
> 标签：google-oauth

我正在将已安装的应用程序迁移到 OAuth2 并遇到了这[一段](https://developers.google.com/accounts/docs/OAuth2InstalledApp)：

> 请注意，将发行的刷新令牌的数量是有限制的；每个客户端/用户组合一个限制，所有客户端的每个用户另一个限制。您应该将刷新令牌保存在长期存储中，并在它们保持有效时继续使用它们。如果您的应用程序请求太多刷新令牌，它可能会遇到这些限制，在这种情况下，较旧的刷新令牌将停止工作。

正如建议的那样，该应用程序正在存储刷新令牌，但用户可以通过在多个设备上使用它来请求多个刷新令牌。我想知道：

*   客户端/用户组合限制是多少？

*   如果用户超过“跨所有客户端”限制，哪个 client_id 刷新令牌会被撤销？

*   除非用户超过这些限制或撤销它，否则给定的刷新令牌将**永远不会过期？**

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-04T10:15:31.183

官方限制为 25。

[https://developers.google.com/accounts/docs/OAuth2#expiration](https://developers.google.com/accounts/docs/OAuth2#expiration)

```
There is currently a 25-token limit per Google user account. 
If a user account has 25 valid tokens, the next authentication request succeeds, 
but quietly invalidates the oldest outstanding token 
without any user-visible warning. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-26T16:41:42.797

实际数字不在公共领域。它可能是特定于服务的，并且可能会不时更改。参考：[https ://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtAuthorization#helpme](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtAuthorization#helpme)

据我了解，如果数字可以低至 25，那么当用户从第 26 台机器登录时，第 1 台机器上的帐户就会失效。

通过网络将刷新令牌存储在数据库中会是一个更好的主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T14:30:28.990

@bazik 有正确的数字，25。但是......没有什么可以阻止这个数字在未来发生变化，所以不要依赖它

此外

**如果用户超过“跨所有客户端”限制，哪个 client_id 刷新令牌会被撤销？**

最老的

**除非用户超过这些限制或撤销它，否则给定的刷新令牌将永远不会过期？** 永不说永不。您的应用程序应该通过访问重新验证对话来处理这种可能性。

你确定你真的有问题吗？我相信刷新令牌对于 clientid/userid/scope 组合是唯一的。如果您的所有设备都具有相同的客户端 ID，我怀疑您将重新获得一个现有的刷新令牌，而不是一个新的。所以你永远不应该接近 25 的限制。请进行您自己的测试以确认这一点。

# batch-file - 使用 .bat 将文件夹复制到新创建的目录

> ID：15192879
> 
> 赞同：0
> 
> 时间：2013-03-04T00:52:11.043
> 
> 标签：batch-file

我使用 MD 创建了一个目录。插入 USB 驱动器后，选择它并创建驱动器的目录，但是我正在尝试将文件从源复制到 USB 上的新目录。我尝试了很多东西，但似乎没有任何效果。这是.bat文件

```
@echo OFF

diskpart

set source=C:\Users\Public\Documents

set DESTINATION= %computername% %DATE:~10,4%-%DATE:~4,2%-%DATE:~7,2%-%TIME:~0,2%-%TIME:~3,2%-%TIME:~6,2%/

@echo DESTINATION =%DESTINATION%

:: Create new directory
md "%1\%DESTINATION%"

xcopy %source% %DESTINATION% /y 
```

它创建目录，但不会将文件从源复制到新创建的目录。我怎样才能做到这一点？你如何传递论点？这是我第一次写脚本。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:39:01.817

这里有几个问题。

1.  您正在创建目标目录，`%1\%DESTINATION%`但`XCOPY`您只指定了`%DESTINATION%`. 复制时很可能`%1\`不是当前目录，这必须解释为什么预期的目标目录没有收到任何文件。因此，您应该在`%1\`前面添加.`%DESTINATION%``XCOPY`

2.  命令设置的目标目录名称`SET DESTINATION`包含空格。这意味着在大多数文件操作上下文中，名称必须用双引号引起来。“大多数”是指有些命令不需要引用名称，尽管我仍然不建议省略引号。并且`XCOPY`无论如何都不是这些命令之一，因此，您的目标路径实际上应该是`"%1\%DESTINATION%"`，就像在`MD`命令中一样。

3.  可能不是问题，但我不确定。`=`在`SET DESTINATION`命令之后你有一个空间。该空间实际上成为价值的一部分。您可能想要删除它，除非您的目标目录名称以空格字符开头。

4.  同样半问题，`/`名称末尾的尾随是不必要的。在此特定脚本中可能不是问题，但通常您必须更加小心地将此类路径用作更复杂路径的一部分，特别是当名称位于更复杂路径的开头或中间时小路。`\`使用它或只是一起省略尾随分隔符会不那么麻烦。

最后，如果目标目录不存在，您可以省略该`MD`命令并为您创建目标目录。`XCOPY`添加`/I`开关 to`XCOPY`避免询问目标是文件还是目录。

请注意，如果源目录完全为空，则不会创建目标。为确保它已创建，您还需要添加`/E`。但是，这也意味着复制整个目录结构，包括空子*目录*（如果有的话）。如果这不符合您的意图，请坚持您当前的`MD`+`XCOPY`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:28:25.917

试试这个代码，它对我有用。它确实复制了源文件夹中的所有文件。只需为 source 和 dest 变量分配适当的值。

```
@ECHO OFF
setlocal enabledelayedexpansion
set SOURCE="C:\Users\Public\Documents"
SET DEST="%computername% %DATE:~10,4%-%DATE:~4,2%-%DATE:~7,2%-%TIME:~0,2%-%TIME:~3,2%-%TIME:~6,2%"

echo %SOURCE% %DEST%

IF NOT EXIST %DEST% mkdir %DEST%

xcopy %SOURCE%\*.* %DEST%\*.* /Y 
```

# objective-c - 需要帮助阅读目标 c 中的 plist 文件

> ID：15192880
> 
> 赞同：1
> 
> 时间：2013-03-04T00:52:13.240
> 
> 标签：objective-c, uitableview, plist

我一直在尝试从 plist 文件中读取数据。这就是它的结构

```
|term|detail(string)| 
```

我的属性：

```
@property (nonatomic, strong) NSDictionary *terms;
@property (nonatomic, strong) NSArray *termKeys;//this is just a array to keep track
@property (nonatomic, strong) NSString *detail; 
```

这就是我访问 cellForRowAtIndexPath 中的详细信息的方式

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [[UITableViewCell alloc]
                             initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];

    NSString *currentTermsName = [termKeys objectAtIndex :[indexPath row]];
                                  [[cell textLabel] setText:currentTermsName];
    cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;

    detail = [terms objectForKey:[termKeys objectAtIndex:indexPath.row]];

    NSLog(@" bombs %@",terms[@"Bomb Threats"]);
    return cell;

} 
```

并鉴于 didload 我有

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        NSString *myfile = [[NSBundle mainBundle]
                            pathForResource:@"terms" ofType:@"plist"];
        terms = [[NSDictionary alloc] initWithContentsOfFile:myfile];
        termKeys = [terms allKeys];
    } 
```

它访问值，但它为每个对象存储相同的值假设我在 plist 中有 5 条不同的记录，如果我打印详细信息，它会显示相同的记录 5 次。

```
Once detail is set then I pass it to detialView
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"detailsegue"]){
        TermsDetailViewController *controller = (TermsDetailViewController *)segue.destinationViewController;
        controller.detailTerm = detail;
    }
} 
```

这是我的字典： http: [//pastebin.com/bxAjJzHp](http://pastebin.com/bxAjJzHp)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T05:06:18.037

您不需要保留属性的详细信息，因为它会在您滚动 tableView 时不断变化，并且代码编写在 cellForRowAtIndexPath: 中。

尝试实现以下代码。

```
- (void)viewDidLoad{ 

      //Path of plist from bundle
      NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"plistFil" ofType:@"plist"];

     //Since your plist's root is a dictionary else you should form NSArray from contents of plist
      self.terms = [NSDictionary dictionaryWithContentsOfFile:plistPath];

      self.termKeys = [self.terms allKeys];

      [self.tableView reloadData];

     //As you have a key for "Bomb Threats" in your plist,try logging if it successfully initialized with values of plist
      NSLog("%@",terms[@"Bomb Threats"]);
}

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsForSection:(NSInteger)section{
       return [self.termkeys count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

     //Initialize cell

     NSString *key   = self.termKeys[indexPath.row];
     NSString *value = self.terms[key];

     cell.textLabel.text = key;
     cell.detailTextLabel.text = value;

     return cell;
} 
```

编辑：

//如果segues直接来自单元格，请尝试使用它

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"detailsegue"])
    {
        TermsDetailViewController *controller = (TermsDetailViewController *)segue.destinationViewController;
        NSIndexPath *indexPath = [ self.tableView indexPathForCell:sender];
        NSString *key   = self.termKeys[indexPath.row];
        self.detail = self.terms[key];
        controller.detailTerm = self.detail;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:07:24.517

我就是这样做的

```
 NSString *plistFile = [[NSBundle mainBundle] pathForResource:@"myPlist" ofType:@"plist"];
 NSDictionary *terms = [NSDictionary dictionaryWithContentsOfFile:plistFile];
 NSLog(@"%@", [terms objectForKey:@"term1"]); 
```

在您的代码中，如果

```
termKeys = [terms allKeys]; 
```

那么这应该返回正确的值，

```
detail = [terms objectForKey:[termKeys objectAtIndex:indexPath.row]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T05:44:32.937

试试这个

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;
}

NSString *strPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
        strPath = [strPath stringByAppendingPathComponent:@"fileName.plist"];
NSMutableDictionary  *terms = [NSMutableDictionary dictionaryWithContentsOfFile:strPath];
NSArray *arrTemp =[terms allKeys];
arrTemp = [arrTemp sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
NSString *detail = [terms objectForKey:[termKeys objectAtIndex:indexPath.row]];
cell.textLabel.text = detail;

return cell;
} 
```

# javascript - Jquery 显示和隐藏不起作用？缺少某些东西，我无法弄清楚

> ID：15192882
> 
> 赞同：2
> 
> 时间：2013-03-04T00:52:51.933
> 
> 标签：javascript, jquery, show-hide

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">     
$(".social").hover(function() {
        $("h1", this).hide();
        $(".networks", this).fadeIn();
    }, function() {
        $(".networks", this).hide();
        $("h1", this).fadeIn();
    });
</script>

<style>
.networks {
    display:none;
}
</style>
</head>

<body>
<div class="social">
    <h1>Share this</h1>
    <div class="networks">
        <p>Twitter</p>
        <p>Facebook</p>
    </div>
</div>      

</body>
</html> 
```

[当我在http://jsfiddle.net/ppksR/](http://jsfiddle.net/ppksR/)中尝试它时，它确实有效，但是当我将它复制粘贴到我的 Dreamweaver 中时，它不起作用。我错过了什么？？？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T00:55:18.533

jsfiddle 将 JavaScript 代码包装在 中`onLoad`，您应该这样做。将脚本内容包装在：

```
$(function () {
    // your code
}); 
```

要让 jsfiddle 模拟您正在做的事情，`onLoad`请将`No wrap - in <head>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T00:55:47.280

您的问题是基本的 jQuery 101 ......当您的代码触发时，这些元素不存在。

将代码包装在 中`document.ready`，或将代码放在它所引用的元素之后

API 参考：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

还值得阅读文档中的[jQuery 工作](http://learn.jquery.com/about-jquery/how-jquery-works/)原理以获得更好的解释。

**编辑**在 jsfiddle 中工作的共振代码是由于左上角的下拉菜单显示`onLoad`。选择时，小提琴会自动将代码包装在负载处理程序中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T00:56:05.080

你需要包装它：

```
 $( function(){ .....

 } ); 
```

这将确保在浏览器读取所有 HTML 之前代码不会执行。目前，您在定义任何元素之前执行代码`.social`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T00:57:23.013

您是否在本地使用其他编辑器/浏览器尝试过该代码？也许 DW 没有正确加载 jQuery。您是否将代码粘贴到纯文本文件并在浏览器中测试页面？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T01:04:07.117

那只是空闲的脚本。

```
$(document).ready(function(e) {
 $(".social").hover(function() {
    $("h1", this).hide();
    $(".networks", this).fadeIn();
    }, function() {
    $(".networks", this).hide();
    $("h1", this).fadeIn();
    });
}); 
```

此`$(document).ready(function(e) {`行使其通过脚本启动 onLoad。

这就是你的代码所做的。[http://jsfiddle.net/3SKqQ/](http://jsfiddle.net/3SKqQ/)

# mysql - 使用来自不同来源的您自己的数据集填充 Maxmind 数据库

> ID：15192890
> 
> 赞同：0
> 
> 时间：2013-03-04T00:54:07.373
> 
> 标签：mysql, sql, geolocation, geoip, maxmind

我目前正在使用`Maxmind Geolite`数据库。我有一张表`GEO_IP_CITY_BLOCKS_0`，其中的列命名为-

```
START_IP_NUM     END_IP_NUM     LOCATION_ID 
```

上表中的样本数据——

```
7602176           7864319           16
16777216          16777471          17 
```

我知道，如果我正在寻找 IP 地址，那么我需要将该 IP 地址转换为 long，这意味着我可以在 MySql 中使用以下查询来获取`LOCATION_ID`，然后基于`LOCATION_ID`我可以进一步查找来获取`City`等等`State`。 -

```
SELECT * FROM `GEO_IP_CITY_BLOCKS_0` WHERE INET_ATON("174.36.207.186") BETWEEN start_ip_num AND end_ip_num 
```

现在我的问题是——

1.  假设任何`IP Address`，如果有`no range`，那么我将无法获得任何 LOCATION_ID 对吗？然后我不能做进一步的查找，因为 LOCATION_ID 不存在？
2.  而这些又是如何`START_IP_NUM`决定`END_IP_NUM`意义的`Maxmind database`呢？

我问这个的原因是，假设如果`IP Address`MySql Maxmind 数据库中没有任何范围，那么我的想法是创建自己的范围并将来自其他来源的与该 IP 地址相对应的数据放入我的 MySql 数据库（Maxmind）中。

`datasets`如果由于某种原因在 Maxmind中`Maxmind database`该特定 IP 地址的数据不存在，是否有人尝试过填充其中？

请让我知道你的想法。

**例如-**

就像这个 IP 地址一样，当我尝试执行这个 SQL`105.160.159.59`时，我没有任何范围`Maxmind database`

`SELECT * FROM GEO_IP_CITY_BLOCKS_0 WHERE INET_ATON("105.160.159.59") BETWEEN start_ip_num AND end_ip_num`

但是对于相同的 IP 地址，我可以从其他来源获取数据，所以我正在寻找的是 - 有没有什么方法可以为我上面描述的类似用例填充 Maxmind 数据库中的数据集？

# c - 错误 C2040：“void *()”的间接级别与“int ()”不同

> ID：15192891
> 
> 赞同：3
> 
> 时间：2013-03-04T00:54:15.780
> 
> 标签：c

```
#include <stdio.h>

main()
{
    myfunction();
}

void* myfunction() {
    char *p;
    *p = 0;
    return (void*) &p;
} 
```

当程序在 Visual Studio 上运行时，它无法编译，错误消息如下所示：

“错误 2 错误 C2040：'myfunction'：'void *()' 与 'int ()' 的间接级别不同”

有人可以做一个简单的解释吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T00:58:31.243

您应该在函数中`myfunction()`使用它之前添加声明：`main()`

```
void* myfunction(void);

int main(void)
{
    myfunction();
    return 0;
}

void* myfunction(void) {
    char *p;
    *p = 0;
    return (void*) &p;
} 
```

试试看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T01:19:05.967

你的程序有两个问题。第一个问题是[Nan Xiao 的回答](https://stackoverflow.com/a/15192925/82320)中提到的问题，编译器在看到你的调用时假设`myfunction`is的签名。`int myfunction()``main`

第二个问题是您`myfunction`自身内部的间接级别不正确：

```
void* myfunction(void) {
    char *p; // Create a pointer to a character
    *p = 0;  // Set some random location to zero
    return (void*) &p; // Take the address of the pointer to a character,
                       // and turn it into a pointer to anything
} 
```

也就是说，你的演员正在接受`char **`并`void *`与之合作，这可能不是你想要的。

如果要将字符指针转换为 void 指针，只需返回字符指针本身，不进行转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T00:59:01.417

编辑：我误读了你的代码。答案已更新。

正如@Nan Xiao 所说，您应该在调用 myfunction 之前声明它。我只能假设您的编译器错误地假设它存在并返回一个 int，这会导致后来的投诉。

我相信它抱怨该函数最初被“定义”为返回一个 int，但现在它找到了一个返回 void* 的函数。int 有 0 个间接级别（它不是指针），而 void* 有一个（例如，它可以指向一个 int）。继续， void** 有两个间接级别（指向可以指向 int 的东西）。

在 C 中，虽然您可以安全地将（比如说）double 转换为 int，但您不能在不解释如何操作的情况下将 int* 转换为 int（应该取消引用还是使用地址？）。

# ios - 清除配置文件并重新开始后无法运行 Adhoc 应用程序

> ID：15192894
> 
> 赞同：0
> 
> 时间：2013-03-04T00:55:01.620
> 
> 标签：ios, provisioning-profile, ios-provisioning

在过去的几个小时里，我一直在努力，试图让一个简单的“Hello World”应用程序在我的 iOS 设备上以 adhoc 模式运行：

*   假设我搞砸了，我决定按照 Apple 的“[如何删除/撤销我的证书并重新开始](http://developer.apple.com/library/ios/#technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG15)”中的步骤进行操作。我还按照“[保持您的个人资料库清洁](http://developer.apple.com/library/ios/#technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG15)”中的步骤进行操作。

*   按照这两个步骤，我确认我在与 iPhone 匹配的钥匙串访问中没有证书/密钥/任何内容。在管理器中，Library -> Provisioning Profiles 下没有列出任何内容，Devices -> -My Device- -> Provisioning Profiles 下也没有列出任何内容。

*   我还访问了 iOS 配置门户并删除了证书分发配置文件。之后，“开发”下没有列出任何内容，“分发”下没有任何内容。

*   我选择了 Library -> Provisioning Profiles & 从菜单 Editor -> Refresh from Developer Portal 系统提示我登录。我愿意，这个过程开始了。

这里的事情似乎与指南不同：

*   我现在在 Organizer -> Library -> Provisioning Profiles 中有一个“iOS Team Provisioning Profile: myID”，**但是新生成的配置文件的状态是“未找到有效的签名身份”。**

> 第一次按下刷新时，会出现一个提示，要求您提供团队成员凭据。当被要求创建您的签名证书（如果需要）时，积极回答是很重要的。为此，请在出现提示时单击“提交请求”，Xcode 将创建、下载和安装证书。

*   系统提示我输入凭据，**但我从未看到“提交请求”提示。**

*   当我尝试构建一个全新的 Hello World 应用程序（即单一视图，带有静态文本的标签）时，它在模拟器中运行，但由于**“代码签名错误：身份‘iPhone 开发者’没有’而拒绝在应用程序上运行t 匹配钥匙串中任何有效的、未过期的证书/私钥对”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:00:58.470

好吧，正如评论交流中所指出的，您似乎删除了您的个人资料，但没有删除您的非工作证书。经验法则：如果您的证书没有在您的钥匙串中附有私钥，您**就不能用它来签署**。如果这种情况发生在您身上，您要么需要

a) 找到拥有私钥的计算机并从那里导出。

b) 从头开始​​重新创建证书并重新创建所有配置文件以使用它（然后相应地通知您的团队，因为他们的配置文件会突然变得无效）。

# haskell - 偏性单子变压器

> ID：15192897
> 
> 赞同：11
> 
> 时间：2013-03-04T00:55:43.323
> 
> 标签：haskell, monads

我试图将`IResult`单子从[attoparsec](http://hackage.haskell.org/package/attoparsec-0.10.4.0)解构为几块。这里是`IResult`

```
data IResult t r = Fail t [String] String
                 | Partial (t -> IResult t r)
                 | Done t r 
```

这感觉应该是效果、“偏袒”和失败的结合。如果失败只是一种表现形式，`Either ([String], String)`那么偏袒可能是

```
data Partiality t a = Now a | Later (t -> Partiality t a)

instance Monad (Partiality t) where
  return = pure
  (Now a) >>= f = f a
  (Later go) >>= f = Later $ \t -> go t >>= f

class MonadPartial t m where
  feed  :: t -> m a -> m a
  final :: m a -> Bool

instance MonadPartial t (Partiality t) where
  feed _ (Now a) = Now a
  feed t (Later go) = go t
  final (Now _) = True
  final (Later _) = False 
```

（当你使用它时，它的名字来自[Danielsson 的一篇论文](http://www.cse.chalmers.se/~nad/publications/danielsson-semantics-partiality-monad.pdf)`Partiality ()`）

我可以`Partiality`用作基本单子，但是有`PartialityT`单子转换器吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-04T04:18:13.143

肯定有！你的`Partiality`monad 是一个免费的 monad：

```
import Control.Monad.Free  -- from the `free` package

type Partiality t = Free ((->) t) 
```

...对应`PartialityT`的是一个免费的monad转换器：

```
import Control.Monad.Trans.Free  -- also from the `free` package

type PartialityT t = FreeT ((->) t) 
```

这是一个示例程序，展示了如何使用它：

```
import Control.Monad
import Control.Monad.Trans.Class
import Control.Monad.Trans.Free

type PartialityT t = FreeT ((->) t)

await :: (Monad m) => PartialityT t m t
await = liftF id

printer :: (Show a) => PartialityT a IO r
printer = forever $ do
    a <- await
    lift $ print a

runPartialityT :: (Monad m) => [a] -> PartialityT a m r -> m ()
runPartialityT as p = case as of
    []   -> return ()
    a:as -> do
        x <- runFreeT p
        case x of
            Pure _ -> return ()
            Free k -> runPartialityT as (k a) 
```

我们使用命令构建免费的 monad 转换器`await`来请求新值并`lift`调用基本 monad 中的操作。我们免费获得`Monad`and`MonadTrans`实例`PartialityT`，因为免费的 monad 转换器自动成为任何给定函子的 monad 和 monad 转换器。

我们像这样运行上面的程序：

```
>>> runPartialityT [1..] printer
1
2
3
... 
```

我建议你阅读[我写的关于免费 monad 转换器的这篇文章](http://www.haskellforall.com/2012/07/free-monad-transformers.html)。但是，免费的 monad 转换器的新官方主页是`free`包。

此外，如果您正在寻找有效的增量解析器，我将`pipes-parse`在几天内将其作为软件包发布。您可以在[此处查看当前草稿](https://github.com/Gabriel439/Haskell-Pipes-Parse-Library)。

# python - Python：在文件中寻找相同的单词？

> ID：15192899
> 
> 赞同：1
> 
> 时间：2013-03-04T00:55:47.677
> 
> 标签：python, copy, boolean, duplicates

我正在尝试用 Python 编写一个程序来检查文本文件中是否有重复的单词。（反过来，如果存在或不存在，则返回布尔值）

例如，我有一个名为“copy”的文本文件。在那个文本文件中是一个单行句子。“没有副本”（句子中有两个）

在另一个文件“nocopy”中，它将是一行，“没有副本”。（那里只有一个）

到目前为止，我已经构建了我的 Python 程序：

```
def duplicate(fname):
 '(file.txt) ==> (Boolean) Returns True if there are duplicate words'
 infile = open(fname, 'r')
 l = infile.read()
 infile.close
 #Missing code here 
```

我不知道下一步该做什么。我的想法是嵌套的 for 循环，但我认为我不需要它。帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T01:14:17.243

如果您想查看文件中是否有*任何*重复的单词，那么我会这样做：

```
def duplicates(fname):
    with open(fname) as f:
        words = f.read().split()
    return len(set(words)) != len(words) 
```

这将检查所有单词（即每个唯一单词）的集合的数量是否等于有多少单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T01:13:56.013

我想你想要这个：

```
def duplicate(fname):
    infile = open(fname, 'r')
    for line in infile.readlines():
        for a in line.split(' '):
                line=line.replace(a,"",1)
                if a in line:
                        return True 
```

如果你想试试：

```
def duplicate(fname):
    infile = open(fname, 'r')
    for line in infile.readlines():
                for a in line.split(' '):
                        line=line.replace(a,"",1)
                        if a in line:
                                return True

if(duplicate('fname.txt')):
        print "yes" 
```

如果重复返回 true，它将打印是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:03:55.260

我假设您正在寻找彼此相邻的重复单词。例如，您不想删除“那边有一座漂亮的房子”中的“那里”。非常直接的选项是将行拆分为列表，然后比较连续的元素，删除重复项。然后，这将是遍历列表并相应地用空格打印每个值的问题。如果您只是对大小感兴趣，您可以随时将单词列表转换为一组单词，然后检查它们的大小是否仍然相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T02:32:42.230

```
def duplicate(fname):
    '(file.txt) ==> (Boolean) Returns True if there are duplicate words'
    infile = open(fname, 'r')
    fLines = []
    for line in infile:
        l = line.split(' ')
        fLines += [i.lower().rstrip('\n') for i in l]
    infile.close()
    nLines = list(set(fLines))
    for l in nLines:
        if fLines.count(l) > 1: return True
    return False 
```

我建议使用集合，因为它会删除重复项，因此它会限制所需的迭代次数。请注意，这不考虑标点符号（只是`s.strip(punctuation)`用来摆脱它）。但是，重复项被定义为相同的单词，不区分大小写。

# php - 在结果 = 1 到 100 之间选择所有数据到数据库

> ID：15192905
> 
> 赞同：-5
> 
> 时间：2013-03-04T00:56:18.327
> 
> 标签：php

我在将数据选择到表格并回显时遇到问题，例如

```
--------------------------------------
id   |   bought   |   customerName    | 
--------------------------------------
1    |     70     |  customer 1       |
2    |     20     |  customer 2       |
3    |     50     |  customer 3       |
4    |     30     |  customer 4       |
5    |     80     |  customer 5       |
6    |    100     |  customer 6       |
-------------------------------------- 
```

我想要做的是通过购买并选择购买 50 到 100 之间的顺序，这将导致

```
customer 3 --- 50
customer 1 --- 70
customer 5 --- 80
customer 6 --- 100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:02:37.693

你可以试试这个来选择数据

```
"SELECT * FROM table_name WHERE bought BETWEEN 50 AND 100 ORDER BY bought ASC" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:05:04.887

试试这个

> SELECT * FROM table_name WHERE BETWEEN 50 AND 100 ORDER BY 购买 ASC

# ruby-on-rails - 未找到 simple_form 配置包装器

> ID：15192906
> 
> 赞同：1
> 
> 时间：2013-03-04T00:56:34.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, simple-form

我一直在尝试将我的“记住我”复选框放在我的垂直表单中（使用 simple_form）

我得到了错误

```
ActionView::Template::Error (Couldn't find wrapper with name inline_checkbox): 
```

config/initializers/simple_form_bootstrap.rb（我也试过把is放在simple_form.rb中）

```
 config.wrappers :inline_checkbox, :tag => 'div', :class => 'control-group', :error_class => 'error' do |b|
  b.use :html5
  b.use :placeholder
  b.wrapper :tag => 'div', :class => 'controls' do |ba|
    ba.wrapper :tag => 'label', :class => 'checkbox' do |bb|
      bb.use :input
      bb.use :label_text
    end
    ba.use :error, :wrap_with => { :tag => 'span', :class => 'help-inline' }
    ba.use :hint,  :wrap_with => { :tag => 'p', :class => 'help-block' }
  end
end 
```

newform.html.erb

```
<div class="row">
    <div class="span4">
        <%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name), html: {class: "well"}) do |f| %>

        <fieldset>
          <legend>Log In</legend>
          <%= f.input :email %>
          <%= f.input :password %>

          <% if devise_mapping.rememberable? -%>
            <div ><%= f.input :remember_me, :wrapper => :inline_checkbox, as: :boolean %> 
          <% end -%></div>

          <div><%= f.button :submit, "Log in" %></div>
        </fieldset>
        <% end %>

        <%= render "devise/shared/links" %>
    </div>

    <div class="span8">
    </br>
        <h2>Logging in is easy and secure </h2>
    </div>
</div> 
```

我无法弄清楚为什么它没有找到我的 config.wrapper ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:59:16.493

要在不使用 config.wrappers 的情况下解决您的原始问题，您可以尝试执行以下操作：

```
f.input :remember_me, inline_label: true ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T12:47:27.253

我有同样的问题，通过将以下行添加到 'config/initializers/simple_form.rb' 来解决它

```
 <p> config.wrappers :checkbox, :tag => 'div', :class =>
 'control-group', :error_class => 'error' do |b|<br>   b.wrapper :tag
 => 'div', :class => 'controls' do |ba|<br>
     ba.use :label_input<br>   end<br> end </p> 
```

# java - 使用自定义打包类型对遗留项目进行 Mavenizing

> ID：15192907
> 
> 赞同：1
> 
> 时间：2013-03-04T00:56:41.787
> 
> 标签：java, maven, maven-plugin

我有一些不应更改的遗留 eclipse 项目和一些可以移植到 maven 项目的新项目。

我现在想将这些较新的项目移植到 Maven 项目中，但它们依赖于一些遗留项目。我现在的问题是，我需要将依赖项目的输出文件夹添加到编译类路径中。

我想创建一个插件来处理所有这些，但我不确定如何更改类路径。

任何人都可以帮助我完成这项任务的基本插件结构，还是无法以这种方式更改类路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:59:58.690

您应该构建旧项目并将它们作为`jar`文件添加到您的 Maven 存储库。然后，您可以将它们标记为 Maven 项目的依赖项。

# wpf - WPF、Prism、Unitybootstrapper 和企业库日志记录设置抛出 LogWriter 异常

> ID：15192920
> 
> 赞同：0
> 
> 时间：2013-03-04T00:58:19.887
> 
> 标签：wpf, prism, unity-container, enterprise-library

我只是想起床并习惯使用 Prism，在我的引导程序中，我有：

```
public class Bootstrapper : UnityBootstrapper
{

    private readonly EnterpriseLibraryLoggerAdapter _logger =  new EnterpriseLibraryLoggerAdapter();  

    protected override void InitializeShell()
    {
        base.InitializeShell();

        Application.Current.MainWindow = (Shell)this.Shell;
        Application.Current.MainWindow.Show();
    }

    protected override DependencyObject CreateShell()
    {
        return this.Container.Resolve<Shell>();
    }

    protected override ILoggerFacade CreateLogger()
        {
              return _logger; 
        } 
```

对于我的 App OnStartup：

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);
        Bootstrapper bootstrapper = new Bootstrapper();
        bootstrapper.Run();
    }
} 
```

和日志适配器

```
public class EnterpriseLibraryLoggerAdapter : ILoggerFacade
{
    #region ILoggerFacade Members

    public void Log(string message, Category category, Priority priority)
    {
        Logger.Write(message, category.ToString(), (int)priority); // <--Blows up here 
    }

    #endregion
} 
```

当引导程序运行时，它会命中 Logger.Write 并抛出异常：

```
The type LogWriter does not have an accessible constructor. 
```

我正在关注 StockTraderRI 示例应用程序。我在某处错过了注册吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:21:06.943

将配置移至我的引导程序构造函数，一切似乎都在工作

```
 var builder = new ConfigurationSourceBuilder();
        builder.ConfigureLogging()
            .WithOptions
            .DoNotRevertImpersonation()
            .LogToCategoryNamed("Debug")
            .SendTo.FlatFile("Basic Log File")
            .FormatWith(new FormatterBuilder()
                            .TextFormatterNamed("Text Formatter")
                            .UsingTemplate(
                                "Timestamp: {timestamp}{newline}Message: {message}{newline}Category: {category}{newline}"))
            .ToFile("core.log")
            .SendTo.RollingFile("Rolling Log files")
            .RollAfterSize(1024)
            .ToFile("RollingTest.log")
            .LogToCategoryNamed("General")
                .WithOptions.SetAsDefaultCategory()
                .SendTo.SharedListenerNamed("Basic Log File");

        var configSource = new DictionaryConfigurationSource();
        builder.UpdateConfigurationWithReplace(configSource);
        EnterpriseLibraryContainer.Current = EnterpriseLibraryContainer.CreateDefaultContainer(configSource); 
```

# c# - 表单关闭时保存控件状态

> ID：15192922
> 
> 赞同：0
> 
> 时间：2013-03-04T00:58:27.293
> 
> 标签：c#, xml, winforms, state

您好我正在尝试将使用 2D 数组动态创建的这个 4x4 按钮网格的颜色状态保存到 xml 文档中：

![在此处输入图像描述](../Images/1f35eb9f89641b596282ba2789c0a8f1.png)

但是，当我按保存时，我不断收到此消息：

如果我对按钮使用一维数组，我可以完成这项工作，但这不会给我想要的网格，但是当我对按钮使用二维数组时，它不会工作：

![在此处输入图像描述](../Images/4a3dedb2dee3a3bbb34a0c61add31abd.png)

我可以改变什么，以便我可以让它工作任何建议都非常感谢：

这是我的代码：

`FormState`班级：

```
public class FormState
{
    public string ButtonBackColor { get; set; }
} 
```

表格代码：

```
public partial class Form1 : Form
{
        int col = 4;
        int row = 4;
        Button[,] buttons;
        FormState[,] states;
        public Form1()
        {
            InitializeComponent();
            buttons = new Button[col, row];
            states = new FormState[col, row];
        }

        public void placeRows()
        {
            for (int r = 0; r < row; r++)
            {
                createColumns(r);
            }
        }

        public void createColumns(int r)
        {
            int s = r * 25; //gap
            for (int c = 0; c < col; c++)
            {
                buttons[r, c] = new Button();
                buttons[r, c].SetBounds(75 * c, s, 75, 25);
                buttons[r, c].Text = Convert.ToString(c);
                buttons[r, c].Click += new EventHandler(grid_Click);
                panel1.Controls.Add(buttons[r, c]);
            }
        }

        int count = 0;
        //backcolor change
        void grid_Click(object sender, EventArgs e)
        {
            Button button = sender as Button;

            if (count == 0)
            {
                button.BackColor = Color.Red;
                count++;
            }

            else if (count == 1)
            {
                button.BackColor = Color.Blue;
                count--;
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            placeRows();

            if (File.Exists("config.xml"))
            {
                loadConfig();
            }

            for (int i = 0; i < col; ++i)
            {
                for (int j = 0; j < row; ++j)
                {
                    if (states[i,j] != null)
                    {
                        buttons[i,j].BackColor = ColorTranslator.FromHtml(states[i,j].ButtonBackColor);
                    }
                }
            }
        }

        //method to load file
        private void loadConfig()
        {
            XmlSerializer ser = new XmlSerializer(typeof(FormState[]));
            using (FileStream fs = File.OpenRead("config.xml"))
            {
                states = (FormState[,])ser.Deserialize(fs);
            }
        }

        private void writeConfig()
        {
            for (int i = 0; i < col; i++)
            {
                for (int j = 0; j < row; j++)
                {
                    if (states[i,j] == null)
                    {
                        states[i,j] = new FormState();
                    }
                    states[i,j].ButtonBackColor = ColorTranslator.ToHtml(buttons[i,j].BackColor);
                }

                using (StreamWriter sw = new StreamWriter("config.xml"))
                {
                    XmlSerializer ser = new XmlSerializer(typeof(FormState[]));
                    ser.Serialize(sw, states);
                }
            }
        }

        private void btnSave_Click(object sender, EventArgs e)
        {
            writeConfig();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:12:43.273

这可能不是一个理想的解决方案（我还没有尝试过，所以它甚至可能不起作用），但您可以创建一个嵌套数组而不是二维数组。就像是

```
FormStates[][] states = new FormStates[row][];
for(Int32 i = 0; i < row; i++)
{
    states[i] = new FormStates[col];
} 
```

而不是使用索引`states[i, j]`，您将使用`states[i][j]`. 由于一维数组是可序列化的，这可能有效。

**编辑**

稍长的示例，基于您的代码：

```
public partial class Form1 : Form
{
    int col = 4;
    int row = 4;
    Button[][] buttons;
    FormState[][] states;
    public Form1()
    {
        InitializeComponent();
        buttons = new Button[col][];
        states = new FormState[col][];
        for(Int32 c = 0; c < col; c++)
        {
            buttons[c] = new Button[row];
            states[c] = new FormState[row];
        }
    }

    public void createColumns(int r)
    {
        int s = r * 25; //gap
        for (int c = 0; c < col; c++)
        {
            buttons[r][c] = new Button();
            buttons[r][c].SetBounds(75 * c, s, 75, 25);
            buttons[r][c].Text = Convert.ToString(c);
            buttons[r][c].Click += new EventHandler(grid_Click);
            panel1.Controls.Add(buttons[r][c]);
        }
    }
} 
```

这应该足以为您提供更改其余代码的语法。

您还需要将您的`XmlSerializer`声明更改为使用`typeof(FormState[][])`，而不仅仅是`typeof(FormState[])`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T02:04:44.253

诚然，我对此并没有太多考虑，但根据评论，您无法序列化多维数组，因此您可以：

```
 [Serializable]
    public class FormState
    {
        public int RowIndex { get; set; }
        public int ColIndex { get; set; }
        public string BackColor { get; set; }
    }

    [Serializable]
    public class Layout : Collection<FormState> { 

        public Layout(){}
    } 
```

..

```
 public void SomeCallingMethod() {
            Layout l = new Layout();
            foreach (FormState fs in l) {
                buttons[fs.RowIndex, fs.ColIndex].BackColor = ColorTranslator.FromHtml(fs.BackColor);
            }     
        } 
```

或在必要时使用 List 并将其序列化。

# c - 无法在 C 中的 Linux 中设置串口配置

> ID：15192923
> 
> 赞同：0
> 
> 时间：2013-03-04T00:58:28.773
> 
> 标签：c, linux, serial-port

我已经编写了一些 Linux 程序来通信我的设备。我的 Windows 程序“相同”（“相同”，因为它的逻辑相同）。我使用 8N2 数据帧格式 @ 9600 bps，既没有软件 (XOn/XOff) 也没有硬件 (RTS/CTS) 流控制。我不使用 RS-232 9 针 D-sub 的 DTR、DCD、RI、DSR 引脚。我只使用 RX 和 TX 引脚与我的设备通信。在 Linux 中，我有这部分代码：

```
 struct termios PortOpts, result;
 int fd; /* File descriptor for the port */

/* Configure Port */
 tcgetattr(fd, &PortOpts);
 // BaudRate - 9600
 cfsetispeed(&PortOpts, B9600);
 cfsetospeed(&PortOpts, B9600);
 // enable reciever and set local mode, frame format - 8N2, no H/W flow control
 PortOpts.c_cflag &= (~(CLOCAL | CREAD | CSIZE | CSTOPB));
 PortOpts.c_cflag |= ((CLOCAL | CREAD | CS8 | CSTOPB) & (~PARENB));
 PortOpts.c_cflag &= (~CRTSCTS);
// PortOpts.c_cflag &= ~PARENB
// PortOpts.c_cflag |= CSTOPB
// PortOpts.c_cflag &= ~CSIZE;
// PortOpts.c_cflag |= CS8;
 // no parity check, no software flow control on input
 PortOpts.c_iflag |= IGNPAR;
 PortOpts.c_iflag &= ~(IGNBRK | BRKINT | PARMRK | ISTRIP | INLCR | IGNCR | ICRNL | IXON | IXOFF | IXANY | INPCK);
 // raw data input mode
 PortOpts.c_lflag &= ~(ECHO | ECHONL | ICANON | ISIG | IEXTEN);
 // raw data output
 PortOpts.c_oflag &= ~OPOST;
 // setting timeouts
 PortOpts.c_cc[VMIN] = 1; // minimum number of chars to read in noncanonical (raw mode)
 PortOpts.c_cc[VTIME] = 5; // time in deciseconds to wait for data in noncanonical mode (raw mode)

 if (tcsetattr(fd, TCSANOW, &PortOpts) ==  0) {
    tcgetattr(fd, &result);
    if ( (result.c_cflag != PortOpts.c_cflag) ||
         (result.c_oflag != PortOpts.c_oflag) ||
         (result.c_iflag != PortOpts.c_iflag) ||
         (result.c_cc[VMIN] != PortOpts.c_cc[VMIN]) ||
         (result.c_cc[VTIME] != PortOpts.c_cc[VTIME]) ) {
        perror("While configuring port1");
        close(fd);
        return 1;
    }
 } else {
    perror("While configuring port2");
    close(fd);
    return 1;
 }; 
```

文件描述符“fd”用于“/dev/ttyS0”设备。我收到这条消息：**配置端口 2 时：输入/输出错误** 我有一台笔记本电脑，但除了 USB 之外我没有任何串行端口。这是一个原因吗？我以“root”身份运行程序。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T20:49:09.440

你能在程序上运行 strace 吗？这将更详细地说明 IO 错误发生的位置。

要记住的一件事 - errno 不会被重置，因此实际错误可能来自 perror 之前的任何系统调用。

# android - Android - 如何阻止用户打开 Wi-Fi

> ID：15192924
> 
> 赞同：0
> 
> 时间：2013-03-04T00:58:29.367
> 
> 标签：android, android-wifi

如何阻止用户打开他们的 Wi-Fi？他们无法从菜单和设置中打开 wifi。当用户打开他们的 wifi 时，会显示一个警报并关闭 wifi。我应该在我的按钮（可以打开和关闭的按钮）的监听器中输入什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:05:27.693

如果您有 root 访问权限，您可以参考[这个问题](https://stackoverflow.com/questions/5766518/can-wifi-be-turned-off-programatically)，它显示了如何使用 开启/关闭 Wifi`WifiManager.setWifiEnabled()`以及所需的权限。您需要监听`BroadcastReceiver`以了解状态何时发生变化。[这个问题](https://stackoverflow.com/questions/5888502/android-wifi-how-to-detect-when-wifi-connection-has-been-established/5890553#5890553)显示了如何做到这一点。

如果您没有 root 访问权限，那么您就不走运了。您仍然可以监听状态更改以了解它*何时*打开，但您实际上无能为力。也许会抛出警告对话框或其他东西，但您将无法将其关闭。

# objective-c - 尝试将 GCCelendar 添加到我的应用程序中

> ID：15192927
> 
> 赞同：0
> 
> 时间：2013-03-04T00:58:47.793
> 
> 标签：objective-c, uiviewcontroller, uisegmentedcontrol

我有一个带有 5 个标签栏的应用程序，第三个是我想要放置日历的地方。我有一个单独的类用于实现标签栏，但是我如何将日历实现到 tabbarview 控制器的子视图中?

```
@implementation CalendarDayView

@synthesize managingViewController;

- (id)initWithParentViewController:(UIViewController *)aViewController {
    if (self = [super init]) {
        self.managingViewController = aViewController;
        self.title = @"Day";
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];

    //GCCalendar *calendar = [[GCCalendar alloc] init];
    GCCalendarPortraitView *calendar = [[GCCalendarPortraitView alloc] init];// autorelease];
    calendar.dataSource = self;
    calendar.delegate = self;
    calendar.hasAddButton = YES;
    [self.view addSubview:calendar];
    //[self.view addSubview:calendar.view];
    //[self addChildViewController:calendar];
    CGRect frame = self.view.frame;
    frame.origin.x = 0.0f;
    frame.origin.y = -20.0f;
    self.view.frame = frame;
} 
```

这是我的课的样子。我还应该提到，这个视图是一个分段的按钮动作。我有一个列表视图日视图和月视图。我目前正在研究日视图。

如果有人有问题或意见，请告诉我。也请远离使用 nib 文件。谢谢你。我也是objective-c的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:19:14.493

我能够使标题视图正常工作，但找不到网格视图。

GCCalendarPortraitView *calendar = [[GCCalendarPortraitView alloc] init];

```
calendar.dataSource = self;
calendar.delegate = self;
calendar.hasAddButton = YES;
[self.view addSubview:calendar.view];
//[self.view addSubview:calendar.view];
[self addChildViewController:calendar];
CGRect frame = self.view.frame;
frame.origin.x = 0.0f;
frame.origin.y = -20.0f;
self.view.frame = frame; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:37:51.447

问题解决了。

只需将以上内容添加到 - (id)initWithParentViewController:(UIViewController *)aViewController

# polygon - 最小重量三角测量永远

> ID：15192930
> 
> 赞同：1
> 
> 时间：2013-03-04T00:59:27.627
> 
> 标签：polygon, minimum, triangulation, decomposition

所以我一直在用 Python 编写一个程序，该程序可以找到凸多边形的最小权重三角剖分。这意味着它找到了权重（所有三角形周长的总和），以及弦列表（穿过多边形的线将其分解为三角形，而不是边界）。

我的印象是我正在使用动态编程算法，但是当我尝试使用更复杂的多边形时，它需要很长时间（我不确定需要多长时间，因为我还没有完成它）。

它适用于 10 边多边形，但我正在尝试 25，这就是让它停滞的原因。我的老师给了我多边形，所以我认为 25 应该也可以工作。

由于该算法应该是`O(n^3)`，因此 25 边多边形的计算时间大约要长 15.625 倍，但是看到 10 边似乎是瞬时的，需要更长的时间。

我是否在那里进行了某种我没有意识到的 n 操作？我看不到我正在做的任何事情，除了最后一部分我通过将列表变成一个集合来消除重复项，但是在我的程序中，我在转换发生之前在 decomp 之后放置了一个跟踪，它不是甚至达到了那个地步。

这是我的代码，如果你们需要更多信息，请询问。里面的东西使它需要更长的时间`O(n^3)`，我需要找到它，这样我就可以把它修剪掉。

```
#!/usr/bin/python
import math

def cost(v):
    ab = math.sqrt(((v[0][0] - v[1][0])**2) + ((v[0][1] - v[1][1])**2))
    bc = math.sqrt(((v[1][0] - v[2][0])**2) + ((v[1][1] - v[2][1])**2))
    ac = math.sqrt(((v[0][0] - v[2][0])**2) + ((v[0][1] - v[2][1])**2))
    return ab + bc + ac

def triang_to_chord(t, n):
    if t[1] == t[0] + 1:
        # a and b
        if t[2] == t[1] + 1:
            # single
            # b and c
            return ((t[0], t[2]), )
        elif t[2] == n-1 and t[0] == 0:
            # single
            # c and a
            return ((t[1], t[2]), )
        else:
            # double
            return ((t[0], t[2]), (t[1], t[2]))
    elif t[2] == t[1] + 1:
        # b and c
        if t[0] == 0 and t[2] == n-1:
            #single
            # c and a
            return ((t[0], t[1]), )
        else:
            #double
            return ((t[0], t[1]), (t[0], t[2]))
    elif t[0] == 0 and t[2] == n-1:
        # c and a
        # double
        return ((t[0], t[1]), (t[1], t[2]))
    else:
        # triple
        return ((t[0], t[1]), (t[1], t[2]), (t[0], t[2]))

file_name = raw_input("Enter the polygon file name: ").rstrip()
file_obj = open(file_name)
vertices_raw = file_obj.read().split()
file_obj.close()

vertices = []

for i in range(len(vertices_raw)):
    if i % 2 == 0:
        vertices.append((float(vertices_raw[i]), float(vertices_raw[i+1])))

n = len(vertices)

def decomp(i, j):
    if j <= i: return (0, [])
    elif j == i+1: return (0, [])

    cheap_chord = [float("infinity"), []]
    old_cost = cheap_chord[0]
    smallest_k = None

    for k in range(i+1, j):
        old_cost = cheap_chord[0]
        itok = decomp(i, k)
        ktoj = decomp(k, j)
        cheap_chord[0] = min(cheap_chord[0], cost((vertices[i], vertices[j], vertices[k])) + itok[0] + ktoj[0])
        if cheap_chord[0] < old_cost:
            smallest_k = k
            cheap_chord[1] = itok[1] + ktoj[1]

    temp_chords = triang_to_chord(sorted((i, j, smallest_k)), n)
    for c in temp_chords:
        cheap_chord[1].append(c)
    return cheap_chord

results = decomp(0, len(vertices) - 1)
chords = set(results[1])
print "Minimum sum of triangle perimeters = ", results[0]
print len(chords), "chords are:"
for c in chords:
    print "   ", c[0], "  ", c[1] 
```

我将添加我正在使用的多边形，第一个多边形马上就解决了，而第二个多边形到目前为止已经运行了大约 10 分钟。

第一：

```
202.1177      93.5606
177.3577     159.5286
138.2164     194.8717
73.9028     189.3758
17.8465     165.4303
2.4919      92.5714
21.9581      45.3453
72.9884       3.1700
133.3893      -0.3667
184.0190      38.2951 
```

第二个：

```
397.2494     204.0564
399.0927     245.7974
375.8121     295.3134
340.3170     338.5171
313.5651     369.6730
260.6411     384.6494
208.5188     398.7632
163.0483     394.1319
119.2140     387.0723
76.2607     352.6056
39.8635     319.8147
8.0842     273.5640
-1.4554     226.3238
8.6748     173.7644
20.8444     124.1080
34.3564      87.0327
72.7005      46.8978
117.8008      12.5129
162.9027       5.9481
210.7204       2.7835
266.0091      10.9997
309.2761      27.5857
351.2311      61.9199
377.3673     108.9847
390.0396     148.6748 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:39:36.997

看起来您在这里遇到了低效递归的问题。

```
...
def decomp(i, j):
...
for k in range(i+1, j):
    ...
    itok = decomp(i, k)
    ktoj = decomp(k, j)
    ...
... 
```

您遇到了与[Fibonacci Numbers 的幼稚递归实现](http://geeksonjava.com/interview/fibonacci.php)相同的问题，但是该算法的工作方式在运行时可能会更糟糕。假设这是你算法的唯一问题，那么你只需要使用记忆来确保每个唯一输入只计算一次 decomp。

发现这个问题的方法是将 i、j 和 k 的值打印为三元组 (i,j,k)。为了获得 O(N^3) 的运行时间，您不应两次看到完全相同的三元组。但是，三元组 (22, 24, 23) 至少出现两次（在 25 中），并且是第一个这样的重复项。这表明该算法多次计算相同的东西，这是低效的，并且将性能提高到 O(N^3) 以上。我将把算法的实际性能作为练习留给你。假设算法没有其他问题，算法最终应该停止。

# c# - 如何知道在 SslStream 异步套接字中发送的数据包的大小

> ID：15192933
> 
> 赞同：0
> 
> 时间：2013-03-04T01:00:09.573
> 
> 标签：c#, winforms, sockets, asynchronous, sslstream

由于**EndWrite**没有输出，如何知道在**SslStream 异步套接字****中发送的数据包的大小？**

 ****```
 public void DataSent(IAsyncResult result)
    {
        SslStream stream = null;
        try
        {
            if (result != null)
            {
                stream = result.AsyncState as SslStream;                
                if (stream != null && stream.CanWrite)
                {
                    stream.EndWrite(result);                        
                    this.m_sendSignal.Set();

                    // how to calculate size of packet received in here ???
                }
            }
        }
        catch (Exception ex)
        {
             MessageBox.Show(ex.message);                
        }
    } 
```****

# sql - 查询性能太慢

> ID：15192934
> 
> 赞同：0
> 
> 时间：2013-03-04T01:00:14.787
> 
> 标签：sql, performance, sql-server-2008-r2, subquery

我有这个查询的性能问题。如果我删除状态列，它会运行得非常快，但是在列部分添加子查询会使查询延迟太多 1.02 分钟。如何修改此查询，使其快速运行以获取所需的数据。

我把那个子查询放在那里的原因是因为我需要最新活动的状态，一些活动的状态为空，所以我必须忽略它们。

机构：6.5k 行 - EstablishmentActivities：70k 行 - 状态：2（活动，非活动）

```
SELECT DISTINCT
    est.id,
    est.trackingNumber,
    est.NAME AS 'establishment',
    actTypes.NAME AS 'activity',
    (
        SELECT stat3.NAME
        FROM SACPAN_EstablishmentActivities eact3
        INNER JOIN SACPAN_ActivityTypes at3
            ON eact3.activityType_FK = at3.code
        INNER JOIN SACPAN_Status stat3
            ON stat3.id = at3.status_FK
        WHERE eact3.establishment_FK = est.id
          AND eact3.rowCreatedDT = (
            SELECT MAX(est4.rowCreatedDT)
            FROM SACPAN_EstablishmentActivities est4
            INNER JOIN SACPAN_ActivityTypes at4
                ON est4.establishment_fk = est.id
                AND est4.activityType_FK = at4.code
            WHERE est4.establishment_fk = est.id
              AND at4.status_FK IS NOT NULL
          )
          AND at3.status_FK IS NOT NULL
    ) AS 'status',
    est.authorizationNumber,
    reg.NAME AS 'region',
    mun.NAME AS 'municipality',
    ISNULL(usr.NAME,  '') + ISNULL(+ ' ' + usr.lastName,  '')
        AS 'created',
    ISNULL(usr2.NAME, '') + ISNULL(+ ' ' + usr2.lastName, '')
        AS 'updated',
    est.rowCreatedDT,
    est.rowUpdatedDT,
    CASE WHEN est.rowUpdatedDT >= est.rowCreatedDT
         THEN est.rowUpdatedDT
         ELSE est.rowCreatedDT
    END AS 'LatestCreatedOrModified'
FROM SACPAN_Establishments est
INNER JOIN SACPAN_EstablishmentActivities eact
    ON est.id = eact.establishment_FK
INNER JOIN SACPAN_ActivityTypes actTypes
    ON eact.activityType_FK = actTypes.code
INNER JOIN SACPAN_Regions reg
    ON est.region_FK = reg.code --
INNER JOIN SACPAN_Municipalities mun
    ON est.municipality_FK = mun.code
INNER JOIN SACPAN_ContactEstablishments ce
    ON ce.establishment_FK = est.id
INNER JOIN SACPAN_Contacts con
    ON ce.contact_FK = con.id
--JOIN SACPAN_Status stat ON stat.id = actTypes.status_FK
INNER JOIN SACPAN_Users usr
    ON usr.id = est.rowCreatedBy_FK
LEFT JOIN SACPAN_Users usr2
    ON usr2.id = est.rowUpdatedBy_FK
WHERE (con.ssn = @ssn OR @ssn = '*')
  AND eact.rowCreatedDT = (
    SELECT MAX(eact2.rowCreatedDT)
    FROM SACPAN_EstablishmentActivities eact2
    WHERE eact2.establishment_FK = est.id
)
--AND est.id = 6266
ORDER BY 'LatestCreatedOrModified' DESC 
```

![执行计划](../Images/56de316833b6fc8cf65ece22dbc12737.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T02:29:35.583

尝试将“活动”查询移动到左连接，看看它是否加快了速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:15:47.423

我通过创建一个临时表并为其创建索引解决了这个问题，这消除了 select 语句中慢子查询的需要。然后我加入临时表，就像我加入普通表一样。

谢谢大家。

# ios - UICollectionView 内的 UITableView 处理触摸。

> ID：15192936
> 
> 赞同：10
> 
> 时间：2013-03-04T01:00:58.283
> 
> 标签：ios, uitableview, uicollectionview

集合视图由单行水平对齐的单元格组成，其大小与集合视图的边界大小相同，单个单元格填充整个屏幕。

问题是集合视图似乎拦截了所有的平底锅。如何将它们转发到表格，以便我也可以垂直滚动表格。

我希望将垂直平移传送到单元格内的表格，以便它可以上下滚动。我希望将水平平移传送到集合视图，以便它可以水平滚动。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T02:45:52.150

对于使用 storyBoard 的 CollectionView 中的 UITableView，请按照以下步骤操作：

- 将 CollectionView 拖到 UIViewController，将数据源拖到 UIViewController（不要拖委托）。在 ViewController.m 中添加数据源方法

- 创建单元格：CollectionViewCell 类。在 storyBoard 中为 Cell 选择类到 Cell 类，指定重用 ID。

- 将 tableView 拖到 collectionCell 方格内。委托，数据源也拖到 CollecionCell Square。在 Cell.m 中添加 tableView 数据源，委托

- 在其中实现 tableViewDidSelect 时创建 CellDelegate。将此委托转移到 UIViewController 以执行其他操作

示例代码：[https ://github.com/lequysang/github_zip/blob/master/TableViewInCollection.zip](https://github.com/lequysang/github_zip/blob/master/TableViewInCollection.zip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-11T17:21:07.210

Swift2 更新 - 我们不需要执行上述所有步骤。只需让控制器成为 tableview 和 collection view 的委托和数据源就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T08:38:46.530

我已经能够在不使用情节提要的情况下完成这项工作——尽管我使用 XIBs 作为我的视图，但只是为了添加自动布局规则。所有自定义（颜色、字体、标签等）都在代码中设置。无论如何，这也应该适用于以编程方式构建的单元格。

怎么做：

*   要记住的最重要的事情是**将您的自定义视图添加到单元格的`contentView`属性中，**而**不是在单元格本身内部**。如果您将 XIB 用于自定义`UICollectionViewCell`，请将其留空。实例化您的自定义视图（在哪里`UITableView`），然后将其添加为`UICollectionViewCell`'s的子视图`contentView`。如果直接在集合视图单元格内添加表格视图，*表格视图将不会垂直滚动*。

*   实现`shouldSelectItemAtIndexPath`and`shouldHighlightItemAtIndexPath`的`UICollectionViewDelegate`and 使两者都 return `false`，以便点击集合视图单元格不会拦截用于内部表格视图的点击。

使用适用于 iOS 9+ 的 Xcode 7.3 完成。

# android - 表格填充无法用按钮填充行

> ID：15192939
> 
> 赞同：0
> 
> 时间：2013-03-04T01:01:52.307
> 
> 标签：android, button, fill, android-tablelayout

我试图只用一个按钮填充表格的第一行。第二行用两个按钮分隔，但我做不到。它看起来总是这样：

[![](../Images/223a86e54cb83c2c945f9b67ee3b95c7.png)](https://i.stack.imgur.com/Kz2XS.png)

我已经添加了这些行： android:stretchColumns=" *" android:shrinkColumns="* "

任何线索为什么？这就是我的 XML 目前的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:stretchColumns="*"
    android:shrinkColumns="*" >

    <!-- 1 column -->
    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button1"
            android:text="Column 2" />
    </TableRow>

    <!-- 2 columns -->
    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button2"
            android:text="Column 3" />

        <Button
            android:id="@+id/button3"
            android:text="Column 4" />
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:10:26.830

将 android:layout_span="2" 添加到您的第一个按钮：

```
<Button
     android:id="@+id/button1"
     android:layout_span="2"    
     android:text="Column 2" /> 
```

# c - C动态printf double，不损失精度且不尾随零

> ID：15192948
> 
> 赞同：6
> 
> 时间：2013-03-04T01:03:03.427
> 
> 标签：c, floating-point, printf

我是 C 的新手，从书本/网上学习。我正在尝试编写一个函数，我可以将任何传递`double`给并返回一个`int`以在`printf("%.*lf" ...`语句中使用，这样`int`返回的既不会降低精度也不会产生尾随零。

我有一个工作函数，但它非常大，因为它是为了可读性而编写的，并且都被评论了。

总结一下这个函数，我计算了需要多少除以 10 才能得到`double`range `10 > d >= 0`，只取小数部分并将其放入`string`带有 n 位小数的 a 中`n = 15 - number_of_digits_left_of_decimal`（我读到该类型`double`只能跟踪 15 位数字），从右到左检查`string`尾随零并保持计数，最后，返回一个`int`表示小数点右侧非零位数的数字。

有没有更简单的方法？谢谢。

```
int get_number_of_digits_after_decimal(double d)
{
  int i = 0;      /* sometimes you need an int */
  int pl = 0;     /* precision left = 15 - sigfigs */
  int sigfigs = 1; /* the number of digits in d */
  char line[20];  /* used to find last non-zero digit right of the decimal place */
  double temp;    /* a copy of d used for destructive calculations */

  /* find digits to right of decimal */
  temp = d;
  while(sigfigs < 15)
  {
    if(temp < 0)
      temp *= -1;
    if(temp < 10)
      break;
    temp /= 10;
    ++sigfigs;
  }
  /* at this point 10 > temp >= 0
  * decrement temp unitl 1 > temp >=0 */
  while(temp > 1)
  {
    --temp;
  }
  if(temp == 0)
    return(0);
  pl = 15 - sigfigs;   /* if n digits left of decimal, 15-n to right */
  switch(pl)
  {
  case 14:
    sprintf(line, "%.14lf", d);
    break;
  case 13:
    sprintf(line, "%.13lf", d);
    break;
  case 12:
    sprintf(line, "%.12lf", d);
    break;
  case 11:
    sprintf(line, "%.11lf", d);
    break;
  case 10:
    sprintf(line, "%.10lf", d);
    break;
  case 9:
    sprintf(line, "%.9f", d);
    break;
  case 8:
    sprintf(line, "%.8lf", d);
    break;
  case 7:
    sprintf(line, "%.7lf", d);
    break;
  case 6:
    sprintf(line, "%.6lf", d);
    break;
  case 5:
    sprintf(line, "%.5lf", d);
    break;
  case 4:
    sprintf(line, "%.4lf", d);
    break;
  case 3:
    sprintf(line, "%.3lf", d);
    break;
  case 2:
    sprintf(line, "%.2lf", d);
    break;
  case 1:
    sprintf(line, "%.1lf", d);
    break;
  case 0:
    return(0);
    break;
  }
  i = (strlen(line) - 1); /* last meaningful digit char */
  while(1) /* start at end of string, move left checking for first non-zero */
  {
    if(line[i] == '0') /* if 0 at end */
    {
      --i;
      --pl;
    }
    else
    {
      break;
    }
  }
  return(pl);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T08:11:03.563

可能没有更简单的方法了。这是一个相当复杂的问题。

由于以下几个原因，您的代码无法正确解决：

*   浮点运算的大多数实际实现不是十进制的，它们是二进制的。因此，当您将浮点数乘以 10 或除以 10 时，可能会丢失精度（这取决于数字）。
*   即使标准`64-bit IEEE-754`浮点格式`53`为尾数保留位，相当于`floor(log10(2 ^ 53))`=**`15`**十进制数字，但这种格式的有效数字在精确打印时可能需要在小数部分中最多包含一些**`1080`**十进制数字，这就是您的样子询问。

解决此问题的一种方法是使用`%a`格式类型说明符 in `snprintf()`，它将使用尾数的十六进制数字打印浮点值，并且从 1999 年开始的 C 标准保证，如果浮点格式，这将打印所有有效数字是 radix-2（AKA base-2 或简单的二进制）。所以，有了这个，你可以获得数字尾数的所有二进制数字。从这里您将能够计算出小数部分中有多少个十进制数字。

现在，请注意：

1.00000 = 2 ^(+0) = 1.00000（二进制）
0.50000 = 2 ^(-1) = 0.10000
0.25000 = 2 ^(-2) = 0.01000
0.12500 = 2 ^(-3) = 0.00100 0.06250
= 2 ^(-4) = 0.00010
0.03125 = 1.0 = 2 ^(-0)

等等。

您可以在这里清楚地看到，二进制表示*`i`*中该点右侧的第 -th 位置的二进制数字也会在十进制表示中该点右侧的第 -th 位置产生最后一个非零十进制数字*`i`*。

因此，如果您知道二进制浮点数中最低有效的非零位在哪里，您就可以计算出精确打印数字的小数部分需要多少十进制数字。

这就是我的程序正在做的事情。

代码：

```
// file: PrintFullFraction.c
//
// compile with gcc 4.6.2 or better:
//   gcc -Wall -Wextra -std=c99 -O2 PrintFullFraction.c -o PrintFullFraction.exe
#include <limits.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>
#include <float.h>
#include <assert.h>

#if FLT_RADIX != 2
#error currently supported only FLT_RADIX = 2
#endif

int FractionalDigits(double d)
{
  char buf[
           1 + // sign, '-' or '+'
           (sizeof(d) * CHAR_BIT + 3) / 4 + // mantissa hex digits max
           1 + // decimal point, '.'
           1 + // mantissa-exponent separator, 'p'
           1 + // mantissa sign, '-' or '+'
           (sizeof(d) * CHAR_BIT + 2) / 3 + // exponent decimal digits max
           1 // string terminator, '\0'
          ];
  int n;
  char *pp, *p;
  int e, lsbFound, lsbPos;

  // convert d into "+/- 0x h.hhhh p +/- ddd" representation and check for errors
  if ((n = snprintf(buf, sizeof(buf), "%+a", d)) < 0 ||
      (unsigned)n >= sizeof(buf))
    return -1;

//printf("{%s}", buf);

  // make sure the conversion didn't produce something like "nan" or "inf"
  // instead of "+/- 0x h.hhhh p +/- ddd"
  if (strstr(buf, "0x") != buf + 1 ||
      (pp = strchr(buf, 'p')) == NULL)
    return 0;

  // extract the base-2 exponent manually, checking for overflows
  e = 0;
  p = pp + 1 + (pp[1] == '-' || pp[1] == '+'); // skip the exponent sign at first
  for (; *p != '\0'; p++)
  {
    if (e > INT_MAX / 10)
      return -2;
    e *= 10;
    if (e > INT_MAX - (*p - '0'))
      return -2;
    e += *p - '0';
  }
  if (pp[1] == '-') // apply the sign to the exponent
    e = -e;

//printf("[%s|%d]", buf, e);

  // find the position of the least significant non-zero bit
  lsbFound = lsbPos = 0;
  for (p = pp - 1; *p != 'x'; p--)
  {
    if (*p == '.')
      continue;
    if (!lsbFound)
    {
      int hdigit = (*p >= 'a') ? (*p - 'a' + 10) : (*p - '0'); // assuming ASCII chars
      if (hdigit)
      {
        static const int lsbPosInNibble[16] = { 0,4,3,4,  2,4,3,4, 1,4,3,4, 2,4,3,4 };
        lsbFound = 1;
        lsbPos = -lsbPosInNibble[hdigit];
      }
    }
    else
    {
      lsbPos -= 4;
    }
  }
  lsbPos += 4;

  if (!lsbFound)
    return 0; // d is 0 (integer)

  // adjust the least significant non-zero bit position
  // by the base-2 exponent (just add them), checking
  // for overflows

  if (lsbPos >= 0 && e >= 0)
    return 0; // lsbPos + e >= 0, d is integer

  if (lsbPos < 0 && e < 0)
    if (lsbPos < INT_MIN - e)
      return -2; // d isn't integer and needs too many fractional digits

  if ((lsbPos += e) >= 0)
    return 0; // d is integer

  if (lsbPos == INT_MIN && -INT_MAX != INT_MIN)
    return -2; // d isn't integer and needs too many fractional digits

  return -lsbPos;
}

const double testData[] =
{
  0,
  1, // 2 ^ 0
  0.5, // 2 ^ -1
  0.25, // 2 ^ -2
  0.125,
  0.0625, // ...
  0.03125,
  0.015625,
  0.0078125, // 2 ^ -7
  1.0/256, // 2 ^ -8
  1.0/256/256, // 2 ^ -16
  1.0/256/256/256, // 2 ^ -24
  1.0/256/256/256/256, // 2 ^ -32
  1.0/256/256/256/256/256/256/256/256, // 2 ^ -64
  3.14159265358979323846264338327950288419716939937510582097494459,
  0.1,
  INFINITY,
#ifdef NAN
  NAN,
#endif
  DBL_MIN
};

int main(void)
{
  unsigned i;
  for (i = 0; i < sizeof(testData) / sizeof(testData[0]); i++)
  {
    int digits = FractionalDigits(testData[i]);
    assert(digits >= 0);
    printf("%f %e %.*f\n", testData[i], testData[i], digits, testData[i]);
  }
  return 0;
} 
```

输出（[ideone](http://ideone.com/lCbkvr)）：

```
0.000000 0.000000e+00 0
1.000000 1.000000e+00 1
0.500000 5.000000e-01 0.5
0.250000 2.500000e-01 0.25
0.125000 1.250000e-01 0.125
0.062500 6.250000e-02 0.0625
0.031250 3.125000e-02 0.03125
0.015625 1.562500e-02 0.015625
0.007812 7.812500e-03 0.0078125
0.003906 3.906250e-03 0.00390625
0.000015 1.525879e-05 0.0000152587890625
0.000000 5.960464e-08 0.000000059604644775390625
0.000000 2.328306e-10 0.00000000023283064365386962890625
0.000000 5.421011e-20 0.0000000000000000000542101086242752217003726400434970855712890625
3.141593 3.141593e+00 3.141592653589793115997963468544185161590576171875
0.100000 1.000000e-01 0.1000000000000000055511151231257827021181583404541015625
inf inf inf
nan nan nan
0.000000 2.225074e-308 0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002225073858507201383090232717332404064219215980462331830553327416887204434813918195854283159012511020564067339731035811005152434161553460108856012385377718821130777993532002330479610147442583636071921565046942503734208375250806650616658158948720491179968591639648500635908770118304874799780887753749949451580451605050915399856582470818645113537935804992115981085766051992433352114352390148795699609591288891602992641511063466313393663477586513029371762047325631781485664350872122828637642044846811407613911477062801689853244110024161447421618567166150540154285084716752901903161322778896729707373123334086988983175067838846926092773977972858659654941091369095406136467568702398678315290680984617210924625396728515625 
```

您可以看到，**`π`**并且**`0.1`**只有**`15`**十进制数字才是正确的，其余数字显示了数字真正四舍五入的结果，因为这些数字不能以二进制浮点格式精确表示。

您还可以看到**`DBL_MIN`**，最小的正归一化`double`值**`1022`**在小数部分有数字，其中有**`715`**有效数字。

此解决方案可能存在的问题：

*   您的编译器的`printf()`函数不支持`%a`或无法正确打印精度要求的所有数字（这很有可能）。
*   您的计算机使用非二进制浮点格式（这种情况极为罕见）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T05:14:17.997

我注意到的第一件事是您正在除以`temp`，`10`这会导致精度下降。

不是要关闭您或阻止您再次尝试，而是要正确执行此操作比您所展示的要复杂得多。

Guy L. Steele 和 Jon L. White 写了一篇名为“[如何准确地打印浮点数](https://lists.nongnu.org/archive/html/gcl-devel/2012-10/pdfkieTlklRzN.pdf)”的论文，详细介绍了一些陷阱，并提出了一种打印浮点数的工作算法。这是一个很好的阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-27T20:45:42.543

**没有简单的方法。**

二进制浮点类型和十进制表示之间的严格无损或全精度转换（对于浮点到字符串的转换，“ `dtoa`”），在幼稚的情况下不容易完成。事实上，即使是经典的`dtoa`实现也可能足够复杂。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/3173056)。

`<charconv>`对于研究和工业实现（例如 ISO C++'s ）来说，这仍然是一个活跃的领域。在过去十年中开发了各种新算法。仅举几例，有 GrisuExact、Ryu、Schubfach 和 Dragonbox。这些算法旨在尽可能快地处理“正常”情况，并在往返转换中保证全精度和无损属性（对于 IEEE-754 binary64 而言，这通常需要 768 字节的内部缓冲区`double`，并且至少需要 float96+int128 功能，如果不是任意精度的算术运算），以可移植性为代价：它们依赖于浮点类型的内部表示，而 C 和 C++ 等语言无法保证这一点。

这些算法的一些实现在[此处](https://github.com/ibireme/c_numconv_benchmark)收集（和基准测试） ，并带有指向其他资源的链接。您可以看到每个实现都有数千行 C/C++ 代码。其中一些可以保证消除尾随零，但结果可能不是您想要的。（因为它们是完全精确的，而不是四舍五入，所以可能会有类似的情况`...00000000001`。）

另请注意，一旦您需要输出的具体格式和/或往返无损可转换保证，由于`printf`不同的原因，该系列通常不是完全符合代码的解决方案：它*依赖于语言环境*，并且具体行为在C/C++ 是*实现定义的*。因此，除非您还提供该语言的实现，否则您无法保证其符合 ISO C/ISO C++。

我搜索这个问题是因为我仍在试图找出一个完全可移植的解决方案（即使效率不高，但至少比从`sprintf`.`dtoa`

# objective-c - 用按钮填充网格

> ID：15192953
> 
> 赞同：0
> 
> 时间：2013-03-04T01:03:37.353
> 
> 标签：objective-c, cocoa-touch

我是目标 c 的新手，并尝试学习创建 UI 的基础知识。在我的 UIView 类中，我创建了一个带有按钮的网格，但这些按钮实际上并不存在（据我所知）。理想情况下，当我单击一个按钮时，图像应该会改变，但这不会发生。我应该在哪里寻找修复？

```
- (id)initWithFrame:(CGRect)frame {
    if( self = [super init]){
        tiles_ = [NSMutableArray array];
        tileClosed = NO;
    }
    return self = [super initWithFrame:frame];
}

- (void) initTile : (Tile *) sender
{
    int MINE_COUNT = 16;
    for(int i = 0; i < MINE_COUNT; i++){
        while(1){
            int rand = random() % [tiles_ count];
            Tile * tile = [tiles_ objectAtIndex:rand];
            if(tile != sender && !tile.isMine){
                tile.isMine = YES;
                break;
            }
        }
    }
    tileClosed = YES;
}

- (void)drawRect:(CGRect)rect 
{
    NSLog( @"drawRect:" );

    CGContextRef context = UIGraphicsGetCurrentContext();
      // shrink into upper left quadrant
    CGRect bounds = [self bounds];          // get view's location and size
    CGFloat w = CGRectGetWidth( bounds );   // w = width of view (in points)
    CGFloat h = CGRectGetHeight ( bounds ); // h = height of view (in points)
    dw = w/16.0f;                           // dw = width of cell (in points)
    dh = h/16.0f;                           // dh = height of cell (in points)

    NSLog( @"view (width,height) = (%g,%g)", w, h );
    NSLog( @"cell (width,height) = (%g,%g)", dw, dh );   

    // draw lines to form a 16x16 cell grid
    CGContextBeginPath( context );               // begin collecting drawing operations
        for ( int i = 1;  i < 16;  ++i )
    {
        // draw horizontal grid line
        CGContextMoveToPoint( context, 0, i*dh );
        CGContextAddLineToPoint( context, w, i*dh );

    }
    for ( int i = 1;  i < 16;  ++i )
    {
        // draw vertical grid line
        CGContextMoveToPoint( context, i*dw, 0 );
        CGContextAddLineToPoint( context, i*dw, h );
    }
    for(int x=1; x<16;x++){
        for(int y=1;y<16;y++){

            Tile * tile = [[Tile alloc] init];
            [tile setFrame:CGRectMake(x * 16.0f, y * 16.0f, 16.0f, 16.0f)];
            [tile addTarget:self action:@selector(clickCell:) forControlEvents:UIControlEventTouchUpInside];
            [tiles_ addObject: tile];        }

    }
    [[UIColor grayColor] setStroke];             // use gray as stroke color
    CGContextDrawPath( context, kCGPathStroke ); // execute collected drawing ops

}

- (void) clickCell : (Tile *) sender
{
    if(! tileClosed) [self initTile: sender];
    [sender open];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:19:15.740

您的 init 方法不正确，您可以简单地将其更改为

```
 - (id)initWithFrame:(CGRect)frame 
      {
        self = [super initWithFrame:frame]
        if( self)
        {
          tiles_ = [NSMutableArray array];
          tileClosed = NO;
        }
        return self;
      } 
```

并且对于要出现的按钮，您没有将其添加到子视图中

```
 [self.view addSubview:tile]; 
```

不见了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:49:04.733

你的`initwithFrame:`方法坏了：返回线应该是`return self;`.

你现在所做的实际上破坏了`tiles_`数组，所以它最终为零，因此试图在其中存储图块什么都不做（因此它们不会被保留）。

# hashmap - 读取文本文件并将其存储在哈希图中

> ID：15192955
> 
> 赞同：0
> 
> 时间：2013-03-04T01:03:52.923
> 
> 标签：hashmap

我正在阅读一个名为 Expenses.txt 的文件...我想将它存储在一个哈希图中，其中包含重复的项目条目

该文本文件包含多行数据，其中每一行（一条记录）由两个字段组成：类别名称（一个字符串）及其值（一个数字）。例如，下面的文件按类别显示费用。

**输入**

费用.txt

化妆品 100.00 药品 120.00 化妆品 50.00 书籍 250.00 药品 80.00 药品 100.00

程序应生成一个汇总报告，按类别显示总和和平均值，按类别排序。摘要应显示在控制台上。程序应该提示用户并读入输入文件的名称。

例如，对于上述数据，摘要将是：

**输出**

类别总平均

书籍 $250 $250.00 药品 $300.00 $100.00 化妆品 $150.00 $75.00

a) 第一个字段是字符串，第二个字段是浮点数。

b) 每个类别的记录数可能不同。例如，在上面的示例中，化妆品有 2 条记录，药品有 3 条，书籍有 1 条。

c) 记录（行）的总数可能会有所不同。不要将它们限制为任何固定数量。

d) 记录没有按任何排序顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:09:02.827

这实际上取决于您使用的语言，但我建议您使用某种元组结构来保存在 hashmap 中。您可以读取每一行，将它们一分为二（用于标签和值），并检查标签是否已经在哈希图中。如果是，只需将单位数加一，以及对海岸求和。最后，只需做一个 hashmap 横向并打印所有需要的值。

# c - C中的管道通信

> ID：15192956
> 
> 赞同：0
> 
> 时间：2013-03-04T01:03:53.463
> 
> 标签：c, process, pipe

我一直在研究管道，我想知道是否有一种方法可以使用管道在同一进程中进行读写。这是我的代码：

```
// Creates 2 pipes per child
    for (i=0; i<atoi(argv[1]); i++) {
        pipe(fd[i]);
    }

    for(i = 0; i < atoi(argv[1]); i++) {
        pid = fork();
        //pipe(fd);
        int r[2];
        int check=0;
        srand(getpid());
        int** Board=build_board(width);
        if(pid < 0) {
            printf("Error");
            exit(1);
        } else if (pid == 0) {
            printf("Child (%d): %d\n", i + 1, getpid());

           // srand(getpid());

            makeMove(Board, 2,r);
            printf("Child R: %d:%d\n", r[0],r[1]);
            display(Board, width, width);

            close(fd[i][0]);

            write(fd[i][1], r, sizeof(r));

         //   play(Board);
            exit(0);
        } else  {
            printf("Parent (%d): %d\n", i + 1, getpid());

            while (1) {

                if (check==0) {

                close(fd[i][1]);
                read(fd[i][0], readbuffer, sizeof(readbuffer));
                printf("Received string: %d:%d\n", readbuffer[0], readbuffer[1]);

                Board[readbuffer[0]][readbuffer[1]]=2;
                puts("Fixed Board");
                display(Board, width, width);
                check=checkVictory(Board);

                if (check!=0) {
                    puts("Winner");
                    display(Board, width, width);
                    break;
                }

                //srand(getpid());
                AI_move(Board,1,2);
                display(Board, width, width);

                }   
            }
            wait(NULL);
        }
    } 
```

我试图在两个进程之间来回发送动作，但是使用我拥有的代码，我从孩子那里得到了第一个动作，然后父母只是移动直到它获胜。我相信在父母搬家后我必须回信给孩子，但我在孩子进程的顶部关闭了这个能力。How 和我都相互沟通，直到找到获胜者以及何时退出。

这是一些示例输出：

```
Parent (1): 17291
Child (1): 17293
Child laced peice at: 7,3
Child R: 7:3
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  B  -  -  -  - 
Received string: 7:3
Fixed Board
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  B  -  -  -  - 
Parent placed peice at: 7,5
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  B  -  R  -  - 
Received string: 7:3
Fixed Board
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  B  -  R  -  - 
Parent placed peice at: 6,5
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 -  -  -  B  -  R  -  - 
Received string: 7:3
Fixed Board
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 -  -  -  B  -  R  -  - 
Parent placed peice at: 7,4
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 -  -  -  B  R  R  -  - 
Received string: 7:3
Fixed Board
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 -  -  -  B  R  R  -  - 
Parent placed peice at: 7,0
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 R  -  -  B  R  R  -  - 
Received string: 7:3
Fixed Board
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 R  -  -  B  R  R  -  - 
Parent placed peice at: 7,2
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 R  -  R  B  R  R  -  - 
Received string: 7:3
Fixed Board
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 R  -  R  B  R  R  -  - 
Parent placed peice at: 6,2
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  R  -  -  R  -  - 
 R  -  R  B  R  R  -  - 
Received string: 7:3
Fixed Board
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  R  -  -  R  -  - 
 R  -  R  B  R  R  -  - 
Parent placed peice at: 5,5
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 -  -  R  -  -  R  -  - 
 R  -  R  B  R  R  -  - 
Received string: 7:3
Fixed Board
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 -  -  R  -  -  R  -  - 
 R  -  R  B  R  R  -  - 
Parent placed peice at: 4,5
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 -  -  -  -  -  R  -  - 
 -  -  R  -  -  R  -  - 
 R  -  R  B  R  R  -  - 
Received string: 7:3
Fixed Board
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 -  -  -  -  -  R  -  - 
 -  -  R  -  -  R  -  - 
 R  -  R  B  R  R  -  - 
Winner
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  -  -  - 
 -  -  -  -  -  R  -  - 
 -  -  -  -  -  R  -  - 
 -  -  R  -  -  R  -  - 
 R  -  R  B  R  R  -  - 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:49:39.333

这是一些代码的大纲，大致是我如何实现它。我假设这两个参与者将是父进程和子进程；我不确定两个孩子将如何与父母一起工作。

```
#include <errno.h>
#include <stdarg.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

static void err_exit(const char *, ...);
static void be_childish(int fd_in, int fd_out);
static void be_parental(int fd_in, int fd_out);

int main(void)
{
    pid_t pid;
    int to_child[2];
    int to_parent[2];

    if (pipe(to_child) != 0 || pipe(to_parent) != 0)
        err_exit("Failed to open pipe");
    if ((pid = fork()) < 0)
        err_exit("Failed to fork");

    if (pid == 0)
    {
        close(to_child[1]);
        close(to_parent[0]);
        be_childish(to_child[0], to_parent[1]);
    }
    else
    {  
        close(to_child[0]);
        close(to_parent[1]);
        be_parental(to_parent[0], to_child[1]);
    }
    return(0);
}

static void be_childish(int fd_in, int fd_out)
{
    srand(getpid());
    char buffer[32];
    ssize_t nbytes;

    while ((nbytes = read(fd_in, buffer, sizeof(buffer))) > 0)
    {
        /* Process parent's move from buffer */
        /* Write child's move to buffer */
        nbytes = strlen(buffer);
        if (write(fd_out, buffer, nbytes) != nbytes)
            err_exit("Short write from child to parent");
    }
}

static void be_parental(int fd_in, int fd_out)
{
    srand(getpid());
    char buffer[32];
    ssize_t nbytes;

    /* Determine first move */
    nbytes = strlen(buffer);

    if (write(fd_out, buffer, nbytes) != nbytes)
        err_exit("Short write from parent to child");
    while ((nbytes = read(fd_in, buffer, sizeof(buffer))) > 0)
    {
        /* Process child's move from buffer */
        /* Write parent's move to buffer */
        nbytes = strlen(buffer);
        if (write(fd_out, buffer, nbytes) != nbytes)
            err_exit("Short write from parent to child");
    }
}

static void err_exit(const char *fmt, ...)
{
    int errnum = errno;
    va_list args;
    va_start(args, fmt);
    vfprintf(stderr, fmt, args);
    va_end(args);
    if (errnum != 0)
        fprintf(stderr, " (%d: %s)", errnum, strerror(errnum));
    putc('\n', stderr);
    exit(1);
} 
```

该`err_exit()`功能简化了错误报告——通常在报告错误的地方只有一行。您可以在主题上使用无穷无尽的变化，但拥有这样的功能会大大简化错误检查。

# git - Cruise Control.NET：如何为 git 存储库任务设置用户名和密码？

> ID：15192961
> 
> 赞同：3
> 
> 时间：2013-03-04T01:04:18.947
> 
> 标签：git, passwords, cruisecontrol.net

我在构建服务器上运行 CCNet 服务来构建基于 Git 存储库的解决方案。Git 存储库受密码保护。有没有办法为源代码管理任务设置用户名和密码？

```
<sourcecontrol type="git">
</sourcecontrol> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T01:34:45.103

方法一

如果您不关心安全性，请在 URL 字符串中嵌入密码

```
http://user:password@abcdef.com/abc/def.git 
```

方法二

使用 git credential helper 存储用户名和密码（更安全）

msysgit 1.8.1 或更高版本：设置配置以启用内置 git-credential-wincred [credential] helper = wincred

或为旧版 msysgit 安装 git-credential-winstore

# haskell - Haskell：'makeNtuple'函数？

> ID：15192964
> 
> 赞同：5
> 
> 时间：2013-03-04T01:04:32.297
> 
> 标签：haskell, tuples

Haskell 中是否有一个或多个函数接受 n 个参数并返回一个 n 元组？例如：

```
make3tuple:: a -> a -> a -> (a,a,a)
make3tuple a b c = (a,b,c) 
```

即：像逗号，但不止两个参数。显然 make3tuple 可以完成这项工作，但我觉得必须有一个内置的方法来做到这一点，我还没有找到它，或者错过了使用其他一些无处不在的功能的方法。

FWIW，使用liftM3（或更高版本）时会出现这种情况。例如：

```
type RandomState a = State StdGen a
[...]
getTwoRandoms = liftM2 (,) getRandom getRandom
get3Randoms = liftM3 make3tuple getRandom getRandom getRandom 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T01:16:53.967

是的。

```
(,,) :: a -> b -> c -> (a, b, c)
(,,,) :: a -> b -> c -> d -> (a, b, c, d) 
```

等等

所以你可以写`liftM3 (,,) getRandom getRandom getRandom`

Haskell 编译器提供这样的函数，直到一定大小（我认为保证是 15 元组）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T01:25:03.780

不像一个函数`makeNtuple :: Int -> a -> a -> ... -> (a,a,...)`，请注意它似乎在类型语言中甚至是不可表达的。如果您对具有同质类型的元组感到满意，那么您可以使用["dependent-typed" `Vector`s](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/kind-polymorphism-and-promotion.html)

```
data Nat = Ze | Su Nat

data Vec :: * -> Nat -> * where
  Nil  :: Vec a Ze
  Cons :: a -> Vec a n -> Vec a (Su n) 
```

# c# - 加密 XML 并向应用程序用户提供可读密码

> ID：15192972
> 
> 赞同：1
> 
> 时间：2013-03-04T01:06:11.437
> 
> 标签：c#, .net, xml, encryption, cryptography

我对加密这个话题很陌生。

我正在构建一个 WPF 应用程序（用于管理数据库权限），其中包含一个需要加密的连接字符串的配置文件。我正在使用 256 Rijndael 加密并生成对称密钥和 IV。

现在我有了密钥和 IV，我可以生成正确的 Rijndael 密钥来解密相关的 XML 节点。我现在需要的是每个授权用户从我这里收到的可读密码，以便应用程序成功与数据库通信。如果用户每次启动应用程序时都必须输入密码，那也没关系。

我正确地接近这个吗？有没有更简单的方法来做我想做的事情？

非常感谢您的帮助。

谢谢！

# ios - 为什么使两个角变圆比使所有角变圆慢？

> ID：15192975
> 
> 赞同：1
> 
> 时间：2013-03-04T01:06:16.183
> 
> 标签：ios, layer

编辑：语言更新以提高可读性。

我制作了一个带有 2 个圆角的图像视图，如下所示：

```
UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.photoImageView.bounds byRoundingCorners:UIRectCornerBottomLeft|UIRectCornerBottomRight cornerRadii:CGSizeMake(10, 10)];
CAShapeLayer *maskLayer = [CAShapeLayer layer];
maskLayer.path = maskPath.CGPath;
self.photoImageView.layer.mask = maskLayer; 
```

但它比使用此代码制作所有角落要慢。

```
self.photoImageView.layer.cornerRadius = 10; 
```

请问有人知道为什么以及如何改进我的“2角”代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:27:25.353

您的代码正在向绘图添加另一个阶段。通常，背景直接绘制（使用给定的cornerRadius）到目标，但使用指定的遮罩，它被绘制到临时表面，然后使用遮罩复制到目标。

没有任何内置功能仅用于对标准 CALayer 对象中的某些背景角进行四舍五入。

我确实想知道“慢”到底有多慢；这是过早的优化吗？

# google-app-engine - Jquery-Ajax 调用未按预期工作

> ID：15192978
> 
> 赞同：0
> 
> 时间：2013-03-04T01:07:20.070
> 
> 标签：google-app-engine, jquery, twitter-bootstrap

我正在做一个这样的项目：（HTML Forms（AJAX）+ twitter bootstrap）（solo HTML，没有 JSP 等）->Servlets（在 Google App Engine-JAVA 上）->Persistence（Google Cloud SQL） .

我对 jQuery ajax 调用很陌生，但我理解这个过程，因为我习惯于编写旧的 XHR 代码。下面是 JS 中的函数，它不会写入控制台预期的结果..到目前为止，大多数时候表单数据都是持久化的。我的 Servlet 如果没问题，并输出一个有效的 JSON。（在浏览器上调用 URL 总是按预期工作。）

我的回答是为什么 jQuery ajax 回调（完成，失败，总是）不能正常工作？他们确实写入控制台/显示警报（）。谢谢你的时间！

```
$(document).ready(function() {
    var myEmail = "";
    var myGender = "";

    $('#saveButton').click(function() {
        $('#myform').submit();
        //alert('Handler for .submit() called.');
        myEmail = document.getElementById("inputEmail").value;
        window.console.log('EMAIL---->' + myEmail);/*ok log!*/
        //alert('EMAIL->' + myEmail);
        var radioObj = document.forms['myForm'].elements['gender'];
        myGender = getCheckedValue(radioObj);
        window.console.log('GENDER---->' + myGender);/*ok log!*/
        //alert('GENDER->' + myGender);
        var jqXHR = $.ajax({
            statusCode : {
                404 : function() {
                    alert("404 ERROR - page not found");
                }
            },
            url : "/newuser",
            type : "GET",
            timeout : 10000,
            data : {
                email : myEmail,
                gender : myGender,
                operation : '0'
            },
            done : function(data, textStatus, jqXHR) {
                window.console.log('done -> RESPONSE---->' + data);/*this does not log!*/
                alert(data);
            },
            fail : function(jqXHR, textStatus, errorThrown) {
                window.console.log('always -> RESPONSE---->' + data); /*this does not log!*/
                alert(data);
            },
            always : function(data, textStatus, jqXHR) {
                window.console.log('always -> RESPONSE---->' + data); /*this does not log!*/
                alert(data);
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:53:54.310

`done`，`fail`并且`always`不是传递给 的设置对象的属性*，*`$.ajax`它们是调用*返回*的jqxhr 对象的回调`$.ajax`。它们应该像这样配置：

```
var jqxhr = $.ajax( "example.php" )
  .done(function() { alert("success"); })
  .fail(function() { alert("error"); })
  .always(function() { alert("complete"); }); 
```

查看[API 文档](http://api.jquery.com/jQuery.ajax/)以获取更多使用指南。

# javascript - 需要帮助避免双垂直滚动条

> ID：15192983
> 
> 赞同：1
> 
> 时间：2013-03-04T01:07:29.900
> 
> 标签：javascript, html, css

我在类“包装器”中的 div 中遇到了 Disqus iframe 的问题。它显示了一个滚动条，即使浏览器本身也有一个用于浏览器中的大图像的滚动条。

**HTML**

```
<section id="commentContainer" class="darkbgType">
    <div id="commentPane">
        <div class="wrapper">
            <h2 class="pbxl">File Title</h2>
            <!--Disqus-->
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'inspectacle'; // required: replace example with your forum shortname
                var disqus_identifier = '@file.fileHash';
                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><!--end Disqus-->
        </div><!--end wrapper-->    
    </div><!--end commentPane-->
</section><!--end commentContainer--> 
```

**CSS**

```
#commentContainer {
    position: fixed;
    right: 0;
    top: 0;
    overflow: hidden;
}

#commentPane {
    background: #181818;
    height: 100%;
    padding: 40px 24px 40px 40px;
    width: 300px;
    position: fixed;
    overflow: hidden;
}

.wrapper {
    overflow: auto;
    height: 100%;
    width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:11:14.267

您正在使用`overflow:auto`，这意味着您告诉浏览器它应该在出现溢出时使用滚动条。

如果您只想将滚动限制在单个轴上，请使用`overflow-x`或`overflow-y`。

[编辑] 双滚动条是由于文档主体的高度超出了 100% 的视口大小，因为您在分配给 100% 的顶部添加了*额外*`#commentPane`的填充。我建议您使用`border-box: box-sizing`使得最终高度包括边框宽度（如果有）和您包含的填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:16:23.043

如果我正确地看待它，一切似乎都在正常工作。评论在其容器中不垂直，并为它们显示滚动条。左侧的图像太大，因此浏览器右侧的滚动条用于滚动页面。

我唯一的假设是您不希望`overflow-y: hidden`该容器所需的评论上有滚动条。

# php - 如何在 html 中回显变量（新手）

> ID：15192984
> 
> 赞同：0
> 
> 时间：2013-03-04T01:07:41.623
> 
> 标签：php

我想将一个随机 swf 变量回显到 html 中，但我似乎无法得到正确的结果。

通过检查萤火虫，我可以看到它输出了我的 php 代码 php echo '$randomImage'

到目前为止我所拥有的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html>
<head>

<style media="screen" type="text/css">

.content {
    position: absolute;
    height: 200px;
    width: 400px;
    margin: -100px 0 0 -200px;
    top: 25%;
    left: 50%;
}

</style>

</head>

<body>
<?php

$imagesDir = '/';

$images = glob($imagesDir . '*.{swf}', GLOB_BRACE);

$randomImage = $images[array_rand($images)];

?>

<div class="content"> 
  <center><object width="675" height="517"><param value="<?php echo '$randomImage' ?>" name="movie"><embed width="475" height="317" type="application/x-shockwave-flash" src="<?php echo '$randomImage' ?>"></object></center><center></center>
  </div>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T01:08:55.690

删除引号。

```
<?php echo $randomImage; ?> 
```

PHP 将其解释为字符串而不是变量`$randomImage`。您可以在引号中使用变量，但它们必须是这样的双引号。

```
echo "$randomImage"; 
```

但是，没有理由这样做，因为您可以回显变量。这在您想要格式化具有多个变量而不使用连接操作的字符串的情况下很有用。

```
echo "Hello, my name is $myName!, I am a $species."; 
```

这比替代方案更简单、更易读。

```
echo "Hello, my name is ", $myName ,"!, I am a ", $species ,"."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T01:09:39.737

你要么：

1.  需要使用双引号
2.  可以完全摆脱qutes

通过将变量放在单引号中，您是在告诉 PHP 您的美元符号将按字面意思使用，而不是用来表示存在变量。

所以使用

```
<?php echo $randomImage ?> 
```

或者

```
<?php echo "$randomImage" ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T01:10:26.930

要正确回显，您应该删除引号`'$randomImage'`->`$randomImage`或者您可以将它们包裹在 "" （双引号）`"$randomImage"`

# ruby-on-rails - Ruby、Paperclip、Formtastic、ActiveAdmin 和图像

> ID：15192987
> 
> 赞同：0
> 
> 时间：2013-03-04T01:08:06.903
> 
> 标签：ruby-on-rails, ruby, paperclip, activeadmin, formtastic

如何在 Paperclip、ActiveAdmin 和 Formtastic 中创建表单？图像不是模型的一部分，而是子模型的一部分。

我试过：

```
form :html => {:multipart => true} do |f|
   f.inputs "Ticket Info" do
      ...
      f.input :image1.photo
      f.input :image2.photo 
```

但它给出了一个错误`ActionView::Template::Error (undefined method 'photo' for :image1:Symbol):`。

这是票证模型：

```
class Ticket < ActiveRecord::Base
  attr_accessible ... :image1_id, :image2_id
...
  belongs_to :image1, class_name: "TicketImage"
  belongs_to :image2, class_name: "TicketImage" 
```

这是 TicketImage 模型：

```
class TicketImage < ActiveRecord::Base
  attr_accessible :file, :photo
  has_one :ticket
  has_attached_file :photo, :styles => { :medium => "300x300>", :thumb => "100x100>" }, :default_url => "/images/:style/missing.png"
end 
```

* * *

我也试过`f.input :image1`，但它只是给了我一个空的选择框。

* * *

我也试过`f.input :image1, :as => :file`了，但是在我选择一个文件并单击提交后它给了我这个错误：

```
ActiveRecord::AssociationTypeMismatch in Admin::TicketsController#update
TicketImage(#89768376) expected, got ActionDispatch::Http::UploadedFile(#29533068) 
```

* * *

我也试过

```
 f.semantic_fields_for :image1 do |image|   
        image.input :photo, :as => :file, :name => "Image1"
  end
  f.semantic_fields_for :image2 do |image|   
        image.input :photo, :as => :file, :name => "Image2"
  end 
```

但它只给出了一个标有照片的文件选择按钮，在我提交后，出现了这个错误：

```
ActiveRecord::AssociationTypeMismatch in Admin::TicketsController#update
TicketImage(#86546820) expected, got ActiveSupport::HashWithIndifferentAccess(#20656416) 
```

* * *

我也试过这个：添加：

```
ActiveAdmin.register Ticket do
    ...
    f.input :photo, :as => :file, :for => :image1, :name => "Image 1"

class Ticket < ActiveRecord::Base
  attr_accessible ... :image1_id, :image2_id, :image1_attributes, ...
  accepts_nested_attributes_for :image1, :image2, :allow_destroy => true

class TicketImage < ActiveRecord::Base
  attr_accessible :file, :photo, :photo_file_name, :photo_content_type, :photo_file_size, :photo_updated_at 
```

并且文件上传框出现并接受上传，但在日志中，它说：

```
WARNING: Can't mass-assign protected attributes: photo 
```

* * *

我也试过这个，它适用于一个上传字段，但是当两者都放在表单中时，都不显示！服务器日志中也没有错误：

```
 f.semantic_fields_for :image1 do |image|
    image.input :photo, :as => :file, :name => "Image1", :hint => image.object.nil? ? "No Image" : f.template.image_tag(image.object.photo.url(:thumb))
  end
  # f.semantic_fields_for :image2 do |image|   
    # image.input :photo, :as => :file, :name => "Image2", :hint => image.object.nil? ? "No Image" : f.template.image_tag(image.object.photo.url(:thumb))
  # end 
```

* * *

我也试过这个，它似乎一直有效并保存图像，除了它允许您创建与 image1 字段的一对多关联，这只是一个条目！我没有尝试将两个图像添加到 image1，但我希望它会崩溃。

```
 f.has_many :image1  do |p|
    p.input :photo, :as => :file, :label => "Image 1", :hint => p.template.image_tag(p.object.photo.url(:thumb)) 
    p.input :_destroy, :as=>:boolean, :required => false, :label => 'Remove image'
  end
  f.has_many :image2  do |p|
    p.input :photo, :as => :file, :label => "Image 2", :hint => p.template.image_tag(p.object.photo.url(:thumb)) 
    p.input :_destroy, :as=>:boolean, :required => false, :label => 'Remove image'
  end 
```

* * *

这效果最好，但提示不起作用！

```
 f.inputs :photo, :as => :file, :for => :image1, :name => "Image 1", :hint => "A Hint"
  f.inputs :photo, :as => :file, :for => :image2, :name => "Image 2", :hint => "A Hint" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:21:01.723

Formtastic 也支持嵌套表单：

```
form :html => {:multipart => true} do |f|
  f.input :number
  f.semantic_fields_for :image1 do |image|   
    image.input :photo, :name => "Image1"
  f.semantic_fields_for :image2 do |image|   
    image.input :photo, :name => "Image2" 
```

# php - 使用PHP从MySQL表列中随机拉取数据

> ID：15192989
> 
> 赞同：0
> 
> 时间：2013-03-04T01:08:11.647
> 
> 标签：php, mysql

我正在使用以下内容（假设我已经计划在以后将这些更改为 mysqli 并且知道所使用查询的不安全性），从 MySQL 表的一列中的行中提取文本字符串并在浏览器中输出理想情况下，将是从该列中随机选择的字符串：

```
mysql_connect($host,$username,$password); 
mysql_select_db($database) or die(mysql_error ()); 

$query="SELECT * FROM `tablename` ORDER BY RAND() LIMIT 0,1;";
$result=mysql_query($query);
$rows = array();
while($row = mysql_fetch_array($rs)) {
$rows[] = $row;
 }
mysql_close();
$max = count($rows) - 1; 
```

使用下面的 echo 行来实现浏览器中的最后一位：

```
echo $rows[rand(0, $max)][0] . " " . $rows[rand(0, $max)][1] . " " . $rows[rand(0, $max)][2] . " " . $rows[rand(0, $max)][3] . " " . $rows[rand(0, $max)][4]$
?> 
```

我收到错误“PHP Notice: Undefined offset: 0 in script.php on line 19”参考这个 echo 行（诚然，它是从其他线程和教程拼凑而成的，所以我不完全遵循），但是，我已经解决了所有其他记录和观察到的错误，所以如果可能的话，我该如何修改它，以便输出只是列中的一行（其中的文本）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T01:21:50.353

比使用 RAND() 更快更好

```
$conn = mysqli_connect($host,$username,$password, $database);
if($conn->connect_errno > 0) {
  die('Unable to connect to database [' . $conn->connect_error . ']');
}

$total_rows = 20; //Generate Random number. You could get $total_rows with a first query counting all rows.
$selected_row = mt_rand(0, $total_rows);
//$selected_row -= 1; //just in case you randomized 1 - $total_rows and still need first row.

//Use the result in your limit.
$query="SELECT * FROM `tablename` LIMIT $selected_row, 1;";
$result=$conn->query($query);

while($row = $result->fetch_assoc()) {
  echo $row["columnname"];
} 
```

将其从`mysql`到编辑`mysqli`（即时）。`RAND()`如果您的表非常大，您将不想使用。*相信我！*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T01:16:19.573

在您的`SELECT`-statement 中，您告诉数据库随机排序字符串。因此，只需获取第一个并回显它：

```
$row = mysql_fetch_array($rs)

echo $row['name_of_field_you_want_to_echo']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T01:18:45.067

您永远不会定义变量 $rs。除此之外...

如果您从 SQL 查询中选择第一个项目，则不需要同时指定限制和顶部。

```
$result = mysql_query("SELECT * FROM `tablename` ORDER BY RAND() LIMIT 1"); 
```

由于这将返回一行，因此您可以使用 mysql_fetch_row

```
$row = mysql_fetch_row($result); 
```

然后你可以从该行中获取字段

```
echo $row["column_name"]; 
```

# java - FullAjaxExceptionhandler 只捕获 javax.el.E LException 或 java.lang.Throwable

> ID：15192990
> 
> 赞同：1
> 
> 时间：2013-03-04T01:08:16.410
> 
> 标签：java, jsf, jsf-2, spring-el, omnifaces

FullAjacExceptionHandler 只能捕获 javax.el.E​​LException 或 java.lang.Throwable。Throwable 也优先于 javax.el.E​​LException。我需要显式捕获托管 bean 抛出的特定异常。但是，ELException 显然包含了根本原因异常（即 LoginFailedException）。

我正在使用 JSF 2 (MyFaces 2.1.10)、Spring EL resolver (Spring managed beans)、el-api-2.2 和 glassfish el-impl-2.2。

这是错误：

```
Ajax request: No
Status code: 500
Exception type: class org.apache.myfaces.view.facelets.el.ContextAwareELException
Exception message: javax.el.ELException: org.tests.omnifaces.exception.LoginFailedException: Login failed.
Stack trace: org.apache.myfaces.view.facelets.el.ContextAwareELException: javax.el.ELException: org.tests.omnifaces.exception.LoginFailedException: Login failed.
... 
```

LoginFailedException 是一个简单的自定义异常。我将不胜感激任何帮助。提前致谢。

编辑：实验完成：

我创建了 3 个错误页面，以查看在引发 LoginFailedException 时将调用/使用哪个错误页面。XHTML 错误页面包含完全相同的代码，但标头 String 标识哪个是哪个。这是 web.xml 错误条目：

```
<error-page>
    <exception-type>org.tests.omnifaces.exception.LoginFailedException</exception-type>
    <location>/pages/errors/loginError.xhtml</location>
</error-page>

<error-page>
    <exception-type>javax.el.ELException</exception-type>
    <location>/pages/errors/elException.xhtml</location>
</error-page>

<error-page>
   <exception-type>java.lang.Throwable</exception-type>
   <location>/pages/errors/catchAllThrowable.xhtml</location>
</error-page> 
```

将使用 catchAllThrowable.xhtml。如果我删除（在 web.xml 上注释掉） Throwable ，将使用 ELException.xhtml。如果我删除 ELException，异常将由容器（tomcat）而不是 loginError.xhtml 处理。

希望这能澄清我的情况。

更新：

我现在使用 AJAX 调用来提交表单（我想这是处理程序的用途），所有 3 个错误处理程序页面都在 web.xml 上处于活动状态（Throwable、ELException、LoginFailedException）：

```
<h:commandButton id="loginButton" value="Login" action="#{login.loginUser}">
    <f:ajax execute="@form" render="@form messages" />
</h:commandButton> 
```

Throwable 已被跳过，并且 ELException 已匹配（呈现 elException.xhtml）。仍然无法将 LoginFailedException 归零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:23:39.177

唯一`FullAjaxExceptionHandler`解开. `FacesException`但是，MyFaces`ContextAwareELException`不是 的子类`FacesException`，而是 的子类，`ELException`因此未包装。

根据 OmniFaces[问题 149](https://code.google.com/p/omnifaces/issues/detail?id=149)，它`FullAjaxExceptionHandler`也被改进为展开`ELException`。这从 OmniFaces 1.4 开始可用。

# authentication - 如何在 Worklight 5.0.5 上验证应用程序身份验证

> ID：15192991
> 
> 赞同：1
> 
> 时间：2013-03-04T01:08:42.357
> 
> 标签：authentication, ibm-mobilefirst

我正在使用 WL 5.0.5 Server 和 Studio。

现在我正在验证应用程序身份验证。但我做不到。

我制作了一个使用 WL studio 5.0.5 的 android 应用程序。我试图伪造应用程序以使用 apktool 和 motizen 工具（这是一个伪造的签名工具）。

*   反编译应用程序。
*   修改Androidmanifest.xml（添加一些权限）
*   重建
*   使用 motizen 工具伪造签名

由于自动配置是 WL 5.5 的一项功能，我希望能够防止执行伪造的应用程序。

但它运作良好。我不知道它为什么这样做。

请让我知道如何在 WL 5.0 上检测应用程序伪造。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:21:56.343

了解真实性仅在 Worklight 的商业版本中有效，了解这一点很重要。从 IBM developerWorks 站点下载的版本没有激活此功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T08:23:42.287

如果您希望检查您的 publickSigningKey，您必须在安全测试中指定 wl_authenticityRealm。例如：

```
<customSecurityTest name="authenticity">
    <test realm="wl_antiXSRFRealm" step="1"/>
    <test realm="wl_authenticityRealm" step="1"/>
    <test realm="wl_remoteDisableRealm" step="1"/>
    <test realm="wl_anonymousUserRealm" isInternalUserID="true" step="1"/>
<test realm="wl_deviceNoProvisioningRealm" isInternalDeviceID="true" step="2"/>
</customSecurityTest> 
```

请注意，您的应用程序将按预期在设备上运行，直到它尝试连接到服务器。然后连接应该失败，您将在 WLResponseListener.onFailure 中收到通知。