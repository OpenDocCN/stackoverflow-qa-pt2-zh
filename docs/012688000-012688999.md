# StackOverflow 问答 12688000-12688999

# javascript - 我可以使用 JS 在链接中用 Post 替换 GET 参数吗？

> ID：12688004
> 
> 赞同：1
> 
> 时间：2012-10-02T09:44:47.367
> 
> 标签：javascript, http-post

我正在使用一个旧的 ASP WebForms 页面，其中有一个使用 javascript 在新窗口中打开的链接。此链接包含一个 GET 参数，如下所示：

```
<href="javascript:window.open(http://myurl.com?MyId=123).focus()">
    Search for object
</a> 
```

我想做的是用 Post 变量替换这个 GET 参数，以避免`MyId`存储在浏览器历史记录中的值。可能是这样的：

```
<input type="hidden" id="MyId" name="MyId" value="123">
<a href="submitSearchCriteria()">
    Search for object
</a> 
```

**注意：**由于这是一个网络表单页面，页面的全部内容都在一对`<form>...</form>`标签内，这些标签会发回页面本身，我不想弄乱这些。我要链接的页面是另一个页面。

**我的问题：**是否有一些相当简单、干净和安全的方法可以从这样的链接中传递 Post 变量？如果可能的话，我宁愿在不包含任何第三方 java 脚本库的情况下执行此操作（我想尽量减少对老化系统的必要更改）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:10:27.863

在表单中添加您的 MyId：

```
<input type="hidden" id="MyId" name="MyId" value="123"> 
```

然后你的超链接：

```
<a href="#" onclick="submit()">Search for object</a> 
```

然后使用 javascript 更改您的表单操作：

```
function submit(){
 [Your Form].action = "[Your Action]";
 [Your Form].submit();
} 
```

表单提交，但随着页面刷新，表单操作会恢复到之前的状态。但这可能取决于您指向新操作的位置。您可以添加一些东西来处理响应。如果你问我，这是*最简单的解决方案。*但为了*最简洁*，您应该尝试阅读有关[AJAX](http://www.w3schools.com/ajax/default.asp)的信息。

# eclipse - Eclipse，编辑器的配置

> ID：12688010
> 
> 赞同：1
> 
> 时间：2012-10-02T09:45:17.317
> 
> 标签：eclipse, settings

我需要根据 Netbeans 和 Android 项目中的一些错误切换到 Eclipse。但我的问题是我喜欢 Netbeans 的外观和工作方式，并且想知道如何配置 Eclipse 的某些部分以更喜欢我的 Netbeans。（我对 Java 和 Android 使用 eclipse 4.2.1。）

第一部分是，如何将 Eclipse 配置为始终显示方法的范围，Eclipse 具有相同的功能，但方法的范围仅在我将鼠标悬停在图标上时显示。（我也希望这是方形图标）

![图像 nr 1，始终显示方法响。](../Images/89e90eea3f7cc37e256180bf0e026ecc.png)

我的另一个问题是在 netbeans 中，当我折叠一个方法时，我可以通过悬停预览该方法`{...}`，我可以配置 Eclipse 来做同样的事情吗？

![在此处输入图像描述](../Images/77baaa695aeefbfa2a393c83d128ca99.png)

我已经确定了一种显示预览的工作方式，您将课程移动到折叠线的第一行，然后将鼠标移到加号上。但这是更多的工作，需要更多的时间，然后解开和折叠线。这是否存在进行预览的快速方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:43:30.323

我使用 Eclipse 已经好几年了，但我从未见过任何配置折叠代码预览的选项或方法。

我更喜欢使用键盘而不是鼠标。对我来说，在开发过程中要快得多。我希望这些键盘快捷键也对您有用：

*   `Ctrl`+ `9`- 为所有块折叠 1 级**编辑**：（特定于 PyDev）
*   `Ctrl`+ `0`- 为所有块扩展 1 级**编辑**：（特定于 PyDev）
*   `Ctrl`+ `-`- 折叠当前块
*   `Ctrl`+ `+`- 扩展当前块

对于 Mac 使用`Cmd`而不是`Ctrl`密钥。

# iphone - NSData dataWithContentsOfURL 慢

> ID：12688011
> 
> 赞同：2
> 
> 时间：2012-10-02T09:45:17.707
> 
> 标签：iphone, ios, uiimage, nsdata

我对 NSData dataWithContentsOfURL 有一些性能问题...

```
NSURL *url = [NSURL URLWithString:Imagepath];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *img=[UIImage imageWithData:data];
[ArrayImages addObject:img]; 
```

此代码放置在管理从 NSUrl 连接获得的 JSON 响应的方法中（在调用我的 Web 服务之后）。此方法中的所有代码都已经在后台线程中，将这段代码移出后台线程并不能解决问题。所有检索到的图像都放在主线程的视图中。我可以做些什么来使 dataWithContentsOfURL 更快，或者有替代 dataWithContentsOfURL 的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:49:23.080

`+[NSData dataWithContentsOfURL:]`不是“慢”。如果加载一张图片需要很长时间，问题就出在其他地方。

* * *

评估你的问题。对于初学者：

*   哪个资源是瓶颈？应该是网络。
*   你如何加载图像？一次全部？那会很糟糕——在它们准备好时展示它们。
*   图像的尺寸是多少？我看到一个问题，海报想加载**50 MB**的图像。那太大了。同样，如果您只需要一个缩略图，那么请确保您从服务器请求缩略图并加载它而不是全尺寸图像。
*   您是否正在加载甚至不需要显示的内容？等到需要显示它们。
*   您为网络任务使用了多少线程？对于 CPU？对于 I/O？
*   您的源图像是否正确“粉碎”？
*   编写您的程序，使其与您的程序的演示模型一起流动。示例：我有大量图像要显示在表格中，但我确保最大限度地减少资源使用，并确保应用程序很好地支持加载和请求取消。这一切都是通过网络来的，而且速度非常快（它是网络绑定的）。

如果您从设备存储中加载许多图像，则应考虑使用`-[UIImage initWithContentsOfFile:]`，因为您的图像数据不会被缓存，但可以被清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:50:23.027

你需要使用延迟加载来显示图像，因为内容将在图像下载时显示。

使用 [使用延迟加载图像的 SDWebImage](https://github.com/rs/SDWebImage)。

# html - HTML - 提交带有实时值的表单

> ID：12688013
> 
> 赞同：0
> 
> 时间：2012-10-02T09:45:26.223
> 
> 标签：html, forms, parsing, textbox

我想提交一个包含用户输入的文本框值的网络表单。

现在我正在使用 Web 服务的 API，但在他们的文档中找不到有关如何执行此操作的信息。

我正在制作的表单是一个注册表单，提交 URL 将显示用户名和密码，以便 API 可以解析它们并创建一个帐户。 **当我单击提交按钮时，如何立即从 url 中的表单中获取文本框的值？**

网址是这样的：

> [https://readitlaterlist.com/v2/signup?username=name&password=123&apikey=yourapikey](https://readitlaterlist.com/v2/signup?username=name&password=123&apikey=yourapikey)

username=name => 其中 name 需要是用户名文本框的值 password=123 => 其中 123 需要是密码字段的值。

该 url 将在后台传递给系统，并且永远不会对用户可见，因此不会暴露数据并因此保存。

提前致谢。

表格的代码是：

```
<form id="login" action="https://readitlaterlist.com/v2/signup?username=name&password=123&apikey=em8p5F73A5bs6h0ZmYg5d21E37d5S424">
    <div id="usernameTB"   class="textbox"><input id="username" type="text" placeholder="Username" autofocus required></div>
    <div id="passwordTB"   class="textbox"><input id="password" type="password" placeholder="Password" required></div>
    <div id="buttonSubmit" class="button"><input type="submit" id="submit" value="Sign up"></div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:51:11.757

由于涉及到一个秘密 api 密钥，并且您要求它不暴露给用户，因此您必须在您的服务器上执行此操作（调用 api）。

所以，

让用户向您的服务器提交带有用户名和密码的表单。使用服务器端脚本，记下用户名和密码，并使用可用于服务器端脚本的相应工具调用 api。在 php 中，您可以使用`cURL`. 在 asp.net 中，您可以使用`WebRequest`. 您可以为每种服务器端脚本语言找到一些东西。

如果你在客户端这样做，api密钥不可避免地会落入恶意用户的手中，你最终会得到很多帐户。

# ios - ios 推送通知证书没有关联的密钥

> ID：12688015
> 
> 赞同：4
> 
> 时间：2012-10-02T09:45:28.430
> 
> 标签：ios, certificate, push-notification

我想创建一个使用推送通知的 iOS 应用程序。通知将由 PHP 网络服务触发。为此，我需要在 iOS 配置文件中创建一个 iOS 推送服务证书（需要将其添加到 web 服务才能工作）。我下载了证书并将其添加到钥匙串访问中。

[https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html)上的文档说：

1.  打开钥匙串访问实用程序，然后单击左侧窗格中的我的证书类别。
2.  找到您要安装的证书并公开其内容。您将看到证书和私钥。

我正是这样做的，我在正确的位置找到了证书，但没有与之关联的密钥。我可能哪里出错了，为什么没有钥匙，我该如何解决这个问题？

谢谢

# mysql - 如何像这样对 2 种不同的类型进行分组和计数？

> ID：12688019
> 
> 赞同：-1
> 
> 时间：2012-10-02T09:45:40.283
> 
> 标签：mysql

我有这样的表：

```
+-------------------+-------------+
| Items             | Status      |
+-------------------+-------------+
| 001               | Good        |
| 001               | Bad         |
| 001               | Good        |
| 002               | Good        |
+-------------------+-------------+ 
```

我想要这样的输出：

```
+-------------------+-------------+-------+
| Items             | Status      | Count |
+-------------------+-------------+-------+
| 001               | Good        | 2     |
| 001               | Bad         | 1     |
| 002               | Good        | 1     |
+-------------------+-------------+-------+ 
```

如何像这样对表进行分组和计数？这就是我所需要的。谢谢你。

更新：我刚刚意识到通过输出，我将在 Items 列上拥有相同的行。如果我想要这样的输出怎么办：

```
+-------------------+------+------+
| Items             | Bad  | Good |
+-------------------+------+------+
| 001               | 2    | 1    |
| 002               | 0    | 1    |
+-------------------+------+------+ 
```

可以用 MySQL 做吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:49:02.120

试试这个：

```
 SELECT Items, Status, COUNT(*) AS COUNT
   FROM TableName
   GROUP BY Items, Status 
```

# ruby-on-rails - Ruby on Rails：删除表中的空白条目

> ID：12688021
> 
> 赞同：0
> 
> 时间：2012-10-02T09:46:02.203
> 
> 标签：ruby-on-rails, ruby, search, drop-down-menu

我有一个应用程序，用户可以在其中创建一个新项目并搜索以前的项目。在“创建新项目”页面上，用户可以选择为每个字段输入新信息，或者如果数据已经在数据库中，则从下拉菜单中进行选择。至于搜索页面上的搜索功能。用户可以在许多不同的领域、多种方式上进行搜索。

**更新：**

根据下面的建议，我已经建立了一个表格，其中包含每个项目的许多技术。

**搜索动作**

```
def search

@search = params[:client], params[:industry], params[:role], params[:tech_id], params[:business_div], params[:project_owner], params[:status], params[:start_date_dd], params[:start_date_A], params[:start_date_B],  params[:keywords]

@project_search = Project.search(*@search).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

@search_performed = !@search.reject! { |c| c.blank? }.empty? 

   @project = Project.new(params[:project])

@all_technols = Technol.all

@technol = Technol.new(params[:tech])

params[:technols][:id].each do |technol|

if !technol.empty?

@project_technol = @project.projecttechnols.build(:technol_id => technol)

end
end

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

**新动作：**

```
def new
    @project = Project.new

@all_technols = Technol.all

@project_technol = @project.projecttechnols.build

@project_technol = Projecttechnol.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end 
```

结尾

**创建动作**

```
def create
    @all_technols = Technol.all
    @project = Project.new(params[:project])

@technol = Technol.new(params[:tech])

params[:technols][:id].each do |technol|

if !technol.empty?

@project_technol = @project.projecttechnols.build(:technol_id => technol)

end
end
    @project.client = params[:new_client] unless params[:new_client].blank?
    @project.project_owner = params[:new_project_owner] unless params[:new_project_owner].blank?
    @project.tech = params[:new_tech] unless params[:new_tech].blank?
    @project.role = params[:new_role] unless params[:new_role].blank?
    @project.industry = params[:new_industry] unless params[:new_industry].blank?
    @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

**新视图的技术部分：**

```
<%= stylesheet_link_tag "new" %>

<h1>Create New Project</h1>

<div class="tech">
<%#= label_tag :new_tech, "Technologies Used :" %><br/>

<%= text_field_tag :new_tech, nil, :maxlength => 30 %>

Or
<%#= f.select( :tech, Project.all.map {|p| [p.tech]}.uniq, { :prompt => "Select a previous Technology"}, { :multiple => true, :size => 5 }) %>
<!/div>  

<% common_techs = [['Mainframe'],['UNIX'],['Windows Servers'],['Networking'],['CISCO'], ['Win7'], ['Telephony'], ['Web services'], ['Website'], ['Cloud'], ['Virtualisation'], ['Data Centre']] %>
 <% db_techs = Technol.all.map {|p| [p.tech]}.uniq %>

<% all_tech = common_techs + db_techs %>

<%= fields_for(@project_technol) do |ab| %>

<%= ab.label "Select previous technologies" %><br/>

<%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true} ) %>
</div>
<% end %>

    <%= stylesheet_link_tag "new" %>

<h1>Create New Project</h1>

<div class="tech">
<%#= label_tag :new_tech, "Technologies Used :" %><br/>

<%= text_field_tag :new_tech, nil, :maxlength => 30 %>

Or
<%#= f.select( :tech, Project.all.map {|p| [p.tech]}.uniq, { :prompt => "Select a previous Technology"}, { :multiple => true, :size => 5 }) %>
<!/div>  

<% common_techs = [['Mainframe'],['UNIX'],['Windows Servers'],['Networking'],['CISCO'], ['Win7'], ['Telephony'], ['Web services'], ['Website'], ['Cloud'], ['Virtualisation'], ['Data Centre']] %>
 <% db_techs = Technol.all.map {|p| [p.tech]}.uniq %>

<% all_tech = common_techs + db_techs %>

<%= fields_for(@project_technol) do |ab| %>

<%= ab.label "Select previous technologies" %><br/>

<%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true} ) %>
</div>
<% end %>

</div> <%#= small div %>

<% end %>

<div class="back_button2">
<%= button_to "Back", projects_path , :class => "button", :method => "get" %>
</div>

</div> <%#= small div %>

<% end %>

<div class="back_button2">
<%= button_to "Back", projects_path , :class => "button", :method => "get" %>
</div> 
```

**搜索页面：**

```
<html>

<%= stylesheet_link_tag "search" %>
<body>
<div id ="title1">Exception Database Search</div>
<div id = "search_op">

<%= form_tag search_path, method: :get do %>

<div class="client">
Client : 
<%= select(@projects, :client, Project.order("client").map{|p| [p.client]}.uniq, :prompt => "-Any-", :selected => params[:client]) %></br>
</div>

<div class="industry">
Industry :
<%= select(@projects, :industry, Project.order("industry").map {|p| [p.industry]}.uniq, :prompt => "-Any-", :selected => params[:industry]) %></br>
</div>

<div class="role">
Role :
<%= select(@projects, :role, Project.order("role").map {|p| [p.role]}.uniq, :prompt => "-Any-", :selected => params[:role]) %></br>
</div>

<div class="tech">

<% common_techs = [['Mainframe'],['UNIX'],['Windows Servers'],['Networking'],['CISCO'], ['Win7'], ['Telephony'], ['Web services'], ['Website'], ['Cloud'], ['Virtualisation'], ['Data Centre']] %>
 <% db_techs = Project.order("tech").map {|p| [p.tech]}.uniq %>

<% all_tech = Project.order("tech").map {|p| [p.tech]} + Project.order("tech").map {|p| [p.tech2]} + Project.order("tech").map {|p| [p.tech3]} + Project.order("tech").map {|p| [p.tech4]} + Project.order("tech").map {|p| [p.tech5]} %>

<%= fields_for(@project_technol) do |ab| %>

<%= collection_select(:technols, :id, @all_technols, :id, :tech, {}, {:multiple => true } ) %>
</div>
<% end %>

<div class="business_div">
Business Division :

<%= select(@projects, :business_div, Project.order("business_div").map {|p| [p.business_div]}.uniq, :prompt => "-Any-", :selected => params[:business_div]) %></br>
</div>

<div class="project_owner">  
Project Owner :
<%= select(@projects, :project_owner, Project.order("project_owner").map {|p| [p.project_owner]}.uniq, :prompt => "-Any-", :selected => params[:project_owner]) %></br>
</div>

<div class="date1">
Select start dates from :
<%= select_tag "start_date_dd", options_for_select({
    "Select a period" => "",
      "3 days ago"   => DateTime.now.to_date - 3.days,   # =    259_200 sec.
      "1 week ago"   => DateTime.now.to_date - 1.week,   # =    604_800 sec.
      "1 month ago"  => DateTime.now.to_date - 1.month,  # =  2_592_000 sec.
      "6 months ago" => DateTime.now.to_date - 6.months, # = 15_552_000 sec.
      "1 year ago"   => DateTime.now.to_date - 1.year,   # = 31_557_600 sec.
    }, :selected=>params[:start_date_dd] )%>

</div>

<%#= until now <%= l DateTime.now.to_date %><%#=,%>   
<h4> OR</h4> 

<div class="date2">
exact start dates

<%=  text_field_tag :start_date_A, params[:start_date_A], :style => 'width: 80px;' %>

-

<%=  text_field_tag :start_date_B, params[:start_date_B], :style => 'width: 80px;' %></br>
</div>

<div class="status">
Status :

<%= select(@projects, :status, Project.order("status").map {|p| [p.status]}.uniq, :prompt => "-Any-", :selected => params[:status]) %></br>
</div>

<div class="keywords">
Keywords :

<%= text_field_tag :keywords, params[:keywords] %></br>
</div>

<div class="results">
Results per page: <%= select_tag :per_page, options_for_select([10,20,50], :selected=>params[:per_page]),  { :onchange => "this.form.submit();"}   %></br>

<div class="buttons">
<div id="search_button">
<%= submit_tag "Search", name: nil, :class => "button" %>
</div>

<% end %>

<div class="home_button">
<%= button_to "Home", projects_path, :class => "button", :method => "get"  %>
</div>

<div id="reset_button">
<%= button_to "Reset Search", search_path, :class => "button", :method => "get" %>
</div>

</div>
</div> <%#search_op div%>

<div class ="menu"></div>

<div id ="section3">

<% if @project_search.total_entries > 0 %>
<% if @search_performed %>

<% if @search_performed %>
<%= hidden_field_tag :direction, params[:direction] %>
<%= hidden_field_tag :sort, params[:sort] %>
<%= hidden_field_tag :per_page, params[:per_page] %>
<%= hidden_field_tag :page, params[:page] %>

<%= will_paginate (@project_search), :class => 'will' %>

<% end %>

</body>

</html> 
```

**楷模：**

```
class Projecttechnol < ActiveRecord::Base
  attr_accessible :project_id, :technol_id

belongs_to :technol
belongs_to :project
end

class Technol < ActiveRecord::Base
  attr_accessible :tech

has_many :projecttechnols
has_many :projects, :through => :projecttechnols
end

class Project < ActiveRecord::Base
  attr_accessible :edited_first_name, :edited_last_name, :first_name, :last_name, :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date,  :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech_id

validates_presence_of :business_div, :client, :customer_benifits, :end_date,  :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary#, :tech

validates_format_of :industry, :with => /\A[a-zA-Z]+\z/, :message => "field should only have letters"
validates_format_of :business_div, :with => /\A[a-zA-Z]+\z/, :message => "field should only have letters"
validates_format_of :client, :with => /\A[a-zA-Z]+\z/, :message => "field should only have letters"
validates_format_of :project_owner, :with => /\A[a-zA-Z]+\z/, :message => "field should only have letters"
validates_format_of :role, :with => /\A[a-zA-Z]+\z/, :message => "field should only have letters"

has_many :projecttechnols
has_many :technols, :through => :projecttechnols

def self.like(text); "%#{text}%"; end

  def self.search(search_client, search_industry, search_role, search_tech_id, search_business_div, search_project_owner, search_exception_pm, search_status, search_start_date_dd, search_start_date_A, search_start_date_B,  search_keywords)
    # start with a scoped query, to apply more scopes on it afterwards
    _projects = Project.scoped 
    # then, for each of the parameters, apply the scope only if present
    if search_client.present?
      _projects = _projects.where ['client LIKE ?', like(search_client)] 
    end
    if search_industry.present?
      _projects = _projects.where ['industry LIKE ?', like(search_industry)]
    end
    if search_role.present?
      _projects = _projects.where ['role LIKE ?', like(search_role)]
    end

    if search_tech_id.present?
  _projects = _projects.joins(:technols).where("tech.id" => search_tech_id)
end

    if search_business_div.present?
      _projects = _projects.where ['business_div LIKE ?', like(search_business_div)]
    end
    if search_project_owner.present?
      _projects = _projects.where ['project_owner LIKE ?', like(search_project_owner)]
    end

     if search_status.present?
      _projects = _projects.where ['status LIKE ?', like(search_status)]
    end

todays_date = DateTime.now.to_date

if !search_start_date_A.blank? or !search_start_date_B.blank?
    search_start_date_A = Date.parse(search_start_date_A).strftime("%Y-%m-%d")
    search_start_date_B = Date.parse(search_start_date_B).strftime("%Y-%m-%d")
    todays_date = nil
    search_start_date_dd = nil

    end

if search_start_date_dd.blank?
    todays_date = nil
end

if search_start_date_A.present? or search_start_date_B.present?

      _projects = _projects.where [' DATE(start_date) BETWEEN ? AND ?', search_start_date_A, search_start_date_B]
    end

                if search_start_date_dd.present?
      _projects = _projects.where ['DATE(start_date) BETWEEN ? AND ?', search_start_date_dd, todays_date]
    end

    if search_keywords.present?
      _projects = _projects.where ['keywords LIKE ?', like(search_keywords)]
    end
    # now you have applied only the present scopes. return the result, and watch 
    # the query as it executes.
    _projects
  end

def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end

end 
```

我似乎无法将“新项目页面”上的新技术保存在 Technols 表中。我也无法让搜索正常工作。在技​​术领域搜索任何东西都不会返回任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:41:23.270

好的，关于同一个项目的第三个问题，你开始清楚你想去哪里。

您是否考虑将技术存储在一个单独的表中，并为与 Product 表的关系存储一个附加的连接表？

这样，您可以为一个项目选择任意数量的技术，您可以只使用一个字段进行搜索（它只会获得与所选技术相关的项目）并且您不会有如此复杂的代码。

使用选择标签来选择项目表单中的技术。如果您希望项目对象具有至少一种技术或类似约束，请验证该项目对象。使用整个“技术”表上的选择来执行搜索框。并使用

```
if search_tech_id.present?
  _projects = _projects.joins(:technologies).where("technologies.id" => search_tech_id)
end 
```

而不是所有连接 LIKE 的东西

编辑：一种搜索与许多技术相关的项目的方法。

要允许搜索“许多技术”，您可以使用多选字段。您还可以为条件添加“AND”或“OR”选项（即，搜索与所有选定技术或任何选定技术相关的 porjocets。

在控制器中，当您获得技术 ID 列表时，要搜索具有所有选定技术的项目，您必须使用一些 SQL 魔术：

```
n_techs = search_techs_ids.size
_projects = _projects.joins(:technologies).
              select("projects.*").
              where("technologies.id" => search_tech_ids).
              group("projects.*").
              having("count(technologies.id) = #{n_techs}") 
```

另一方面，要在选定的技术中搜索任何技术，您可以这样做

```
_projects = _projects.joins(:technologies).
              where("technologies.id" => search_tech_ids) 
```

# jquery-plugins - Jquery 背景幻灯片放映与画廊

> ID：12688022
> 
> 赞同：0
> 
> 时间：2012-10-02T09:46:08.097
> 
> 标签：jquery-plugins

有谁知道一个 jquery 插件，它有一个背景幻灯片放映和一个画廊，每次有人打开网站或每小时左右都会改变背景图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:58:01.337

有很多 jQuery 幻灯片插件。我建议您查看以下内容：

幻灯片 JS - [http://www.slidesjs.com/](http://www.slidesjs.com/)

```
<head>
        <title>Title</title>

        <style type="text/css" media="screen">
            .slides_container {
                width:570px;
                height:270px;
            }
            .slides_container div {
                width:570px;
                height:270px;
                display:block;
            }
        </style>

        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="slides.js"></script>

        <script>
            $(function(){
                $("#slides").slides();
            });
        </script>
    </head>
    <body>
        <div id="slides">
            <div class="slides_container">
                <div>
                    <img src="http://placehold.it/570x270">
                </div>
                <div>
                    <img src="http://placehold.it/570x270">
                </div>
                <div>
                    <img src="http://placehold.it/570x270">
                </div>
                <div>
                    <img src="http://placehold.it/570x270">
                </div>
            </div>
        </div>
    </body> 
```

[另外，在这里](http://vandelaydesign.com/blog/web-development/jquery-slideshow/)查看一些不错的幻灯片插件

# c# - 对 IList 进行排序

> ID：12688023
> 
> 赞同：0
> 
> 时间：2012-10-02T09:46:11.670
> 
> 标签：c#

我有一个完整的品牌列表出现在我的 中`DropDownBox`，但是似乎没有顺序（只是它们如何输入到数据库中），我需要按字母顺序对它们进行排序。

但看起来我不能使用 .Sort(); 在 an`IList`上似乎没有任何类似的东西`ILists`所以我有点茫然，我试图将其转换`IList`为 a`List`然后使用该`List.Sort()`方法，但我没有运气，因为它只是返回未排序再次：

```
public void BrandListRetrieve()
{
    var factory = new BrandFactory();
    var customBool1State = 
          factory.ByCustomBoolean1(false, CoreHttpModule.Session);

    if (customBool1State != null)
    {
        var brandDropDown = CoreHttpModule
                                .Session
                                .CreateCriteria(typeof(Brand)).List<Brand>();

        foreach (Brand brand in brandDropDown)
        {
            this.Items.Add(brand.Name);
        }

        if (this.Items.Count < 0)
        {
            this.Items.Insert(0, new ListItem("Hello World", "Hello World"));
        }

        var brandList = brandDropDown as List<string>;

        if (brandList != null)
            brandList.Sort();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:48:24.837

你应该试试这个；

```
foreach (Brand brand in brandDropDown.OrderBy(b => b.Name)) 
```

您当然可以从代码中**删除**以下行；

```
 var brandList = brandDropDown as List<string>;

        if (brandList != null)
            brandList.Sort(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T09:57:51.933

看来您需要将 brand.Sort() 与 Compare 方法一起使用。尝试阅读本手册[http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)

# wcf - 如何使用 WCF netTcpBinding 从通信/服务故障中恢复？

> ID：12688026
> 
> 赞同：1
> 
> 时间：2012-10-02T09:46:24.013
> 
> 标签：wcf, nettcpbinding

我正在开发一个客户端/服务器应用程序，其中客户端每隔几秒钟调用一次 WCF 服务。我没有使用 IIS - 该服务作为控制台应用程序运行（旨在将其作为 Windows 服务安装在生产系统上）。

`EndpointNotFoundException`我开始使用basicHttpBinding，如果我停止服务（以模拟通信/服务器故障），客户端通过处理抛出的问题简单地忽略它无法连接到服务的事实。重新启动服务后，客户端能够再次开始调用它，一切都很好。

我现在已经切换到使用 netTcpBinding，这一次当我停止服务时，它的控制台窗口需要一段时间才能关闭（可能是由于 TCP 管理连接的方式，最终超时）。此时客户端得到一个`CommunicationException`（*“套接字连接被中止”*）。当我重新启动服务时，客户端无法像使用 basicHttpBinding 那样“恢复”。每次尝试调用服务时，它都会抛出一个`CommunicationObjectFaultedException`（*“通信对象 System.ServiceModel.Channels.ServiceChannel，不能用于通信，因为它处于故障状态。”*）。

我将如何构建某种恢复/恢复行为，类似于我在 basicHttpBinding 中看到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:03:48.137

您不能重复使用该通道，因为它已出现故障。您应该将您的客户端转换为 ICommunicationObject 并调用 Abort() 进行清理。

之后，您只需通过创建新的客户渠道重新开始。如果您的服务器停机一段时间，您可能需要在计时器上执行此操作。

# ruby-on-rails - Ruby on Rails：如何在动态添加的项目上去除无关紧要的零？

> ID：12688028
> 
> 赞同：0
> 
> 时间：2012-10-02T09:46:29.440
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, formatting

我有一张**发票**，可以使用一些 jQuery 魔术添加**项目。**

控制器：

```
def new    
  @invoice = Invoice.new
  @invoice.with_blank_items(current_user) 
  @title = "New invoice"
end 
```

模型：

```
def with_blank_items(user, n = 1)
  n.times do
    items.build(:price => user.preference.hourly_rate)
  end
  self
end 
```

看法：

```
<%= f.text_field number_with_precision(:price, :strip_insignificant_zeros => true) %> 
```

现在的问题是，一个新添加的项目的价格总是以**XX.X**的格式显示，即有一位小数，不管它是否为零。

我不喜欢这样，我希望将 50 的价格显示为*50*而不是*50.0*。

一旦发票被保存到数据库中，不必要的零就会被删除，这是完美的。

如何在新添加的项目上也去掉无关紧要的零？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:43:45.343

您可以尝试在分配之前以正确的方式格式化值：

```
items.build(:price => '%g' % user.preference.hourly_rate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:51:06.150

如果我理解您的问题，我相信您的问题可以通过 JavaScript 函数（删除小数位）来解决。

尝试类似：

```
function removeDecimal(val){
    return val.toFixed(0);
} 
```

这些是我的测试用例：

```
removeDecimal(123.45) -> 123
removeDecimal(123.4)  -> 123
removeDecimal(123)    -> 123 
```

# windows-8 - 如何更改 Windows 8 应用程序的起始页？

> ID：12688032
> 
> 赞同：0
> 
> 时间：2012-10-02T09:46:50.193
> 
> 标签：windows-8, microsoft-metro

我想更改我的应用程序的起始页。而不是 Page1.xaml 我希望 page2.xaml 在应用程序启动时默认打开。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:03:15.780

[你可以在这篇文章](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/613f220e-cce3-40f4-8aed-7522986ac795)中找到答案。`App.xaml.cs`您必须在`OnLaunched`方法中更改它

问候。

# openerp - 如何使用 onchange 函数更改帐户发票行 price_unit 的价格

> ID：12688037
> 
> 赞同：0
> 
> 时间：2012-10-02T09:47:04.273
> 
> 标签：openerp

我想使用 onchange 将帐户发票价格设置为 res.partner 中设置的默认价格。谁能给我一个例子？

谢谢，乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:59:48.523

插件中有很多关于 onchange 的例子。
例如，如果您想更改“名称”字段的值并希望根据所选产品设置产品名称：

```
def onchange_product_id(self, cr, uid, ids, product_id, context=None):
    if product_id:
        prod = self.pool.get('product.product').browse(cr, uid, product_id, context=context)
        return {'value': {'name': prod.name}}
    return {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:27:29.017

在 your_invoice_view.xml 中写入：

```
<field name="product_id" on_change="product_id_change(product_id, parent.partner_id, context)"/> 
```

在“invoice_line”模型（类）下的 your_invoice.py 中写入 onchange：

```
def onchange_product_id_change(self, cr, uid, ids, product_id, partner_id context=None):
if product_id and partner_id:
    product_brw = self.pool.get('product.product').browse(cr, uid, product_id, context=context)
    partner_brw = self.pool.get('res.partner').browse(cr, uid, partner_id, context=context)
    /*write your logic */
    return {'value': {'price_unit': your calculated value}}
return {} 
```

# c# - 如何通过WCF检查服务器上是否存在文件夹

> ID：12688043
> 
> 赞同：0
> 
> 时间：2012-10-02T09:47:34.723
> 
> 标签：c#, wcf, web-config, httpwebrequest

我想知道是否有任何属性或方法可以让我知道服务器上有一个文件夹。

就像我的 web.config 中有这个一样：

```
<appSettings>
     <add key="ImagePath" value="http://server1:801/ImageById/"/>
</appSettings> 
```

我得到这样的钥匙：

```
var URL = System.Configuration.ConfigurationManager.AppSettings["ImagePath"].ToString(); 
```

现在我想知道如何访问服务器上的 imageById 并将某些内容保存到其中。就像下面这样：

```
if("Folder exist on this server URL that is ImageById")
{
save images to the folder thorugh code of WCF as the folder has write permission.
} 
```

我希望 WCF 中的此功能而不是 ASP.NET 中的功能。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:54:46.513

```
 if(Directory.Exists(Server.MapPath("ImabgeById")))
    {
      save images to the folder thorugh code of WCF as the folder has write permission.
    } 
```

这也可以帮助 [如何获得 wcf 应用程序的工作路径？](https://stackoverflow.com/questions/791468/how-to-get-working-path-of-a-wcf-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:55:11.720

您可以使用[System.IO.Directory.Exists( *path* )](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx) - 您只需确保您的 WCF 服务在具有足够权限的凭据下运行以访问相关文件夹（否则您将遇到异常）。

# magento - Magento SKU 在基本搜索中不起作用

> ID：12688046
> 
> 赞同：5
> 
> 时间：2012-10-02T09:48:07.813
> 
> 标签：magento

搜索已停止在我正在开发的网站上搜索完整和部分 SKU，此功能以前可以使用。

当此方法起作用时，为该站点区分较旧的 .SQL 我看不到对 core_config_data 的任何更改，这些更改会以这种方式影响该站点。

搜索设置为组合和喜欢。仍然可以从高级搜索页面搜索 SKU。

有谁知道我应该查看哪些表来查找影响搜索行为的更改？我的预感是有一些后端更改导致了这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T10:48:45.617

> 有谁知道我应该查看哪些表来查找影响搜索行为的更改？

对，就是`catalogsearch_fulltext`。Magento 在“目录搜索”索引的部分和完整重新索引期间填充此表。

顺便说一句，我认为问题出在属性的设置上。转到管理面板 -> 目录 -> 属性 -> 管理属性 ->（选择 SKU 属性）-> 在快速搜索中使用 -> 值应为“是”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T22:08:10.183

还要确保在“产品信息”->常规->可见性下检查它是否设置为“目录，搜索”，而不仅仅是“目录”。如果您更改设置，您可能必须重建索引并刷新缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-13T08:19:41.517

删除 var/locks 下的所有文件，然后重新索引。

# xpages - 将 ext lib 类导入我的日程安排 java 代理

> ID：12688055
> 
> 赞同：0
> 
> 时间：2012-10-02T09:48:34.260
> 
> 标签：xpages, lotus-domino

是否可以`import com.ibm.xsp.extlib.util.ExtLibUtil.*`参加我的日程安排 java 代理？

谢谢你
莱昂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:29:07.863

是的，这是可能的。只需解压缩*updateSite* ZIP 文件并在代理中导入 JAR。我不知道您要做什么，也许这是朝着错误的方向发展（大多数功能使用“XPages 类”等）。

看看这里以获得更好的想法： [Is it possible to use Java classes from the WEB-INF directory in Java agents](https://stackoverflow.com/questions/9726147/is-it-possible-to-use-java-classes-from-the-web-inf-directory-in-java-agents)

# ios - iPhone 上的 Go 语言

> ID：12688065
> 
> 赞同：23
> 
> 时间：2012-10-02T09:49:07.103
> 
> 标签：ios, go, mach-o, gccgo

是否可以用 Go for iPhone 编写代码？我认为需要以下步骤

1.  将 Go 编译为 ARM Mach-O 二进制文件（我希望 GCCGO 能够做到这一点）

2.  将 iPhone 应用程序编译为静态库（我认为可以重命名 main() -> main2() 等）

3.  将 Go 编译为与 iPhone 静态库链接的 Mach-O 二进制文件。Go 将不得不调用 main2。

4.  制作一些 plist 文件，压缩，签名

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-02T10:08:38.963

Minux 在此处维护 Go iOS 端口：[https ://bitbucket.org/minux/goios/wiki/Home](https://bitbucket.org/minux/goios/wiki/Home)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-06T19:34:23.503

由于这个问题现在已经有 4 年了，并且从那时起发生了很多事情，我想我会添加到已经存在的答案中：

[这个](https://github.com/golang/go/wiki/Mobile)github 项目支持为 Android 和 iOS 编写完全用 Go 编写的原生应用程序（但是可用的 API 子集有限）以及 Android 或 iOS 原生代码通过绑定与 Go 代码通信的 SDK 应用程序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T17:54:37.210

能够编译和一个 go 程序只是为 iPhone 编写 go 的一部分。您仍然需要绑定到 iOS API 才能用它做任何有趣的事情。其他人已经给出了将语言移植到 iOS 的指针，但在那之后你还有很长的路要走。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-29T20:47:28.970

对于在搜索如何在 Go 中创建 iOS 框架或库时偶然发现这一点的人，您可以使用`cgo`将 GoLang 编译为 ac 库和头文件。

## 编译器

为此，您必须导出一些 Go 编译器环境变量并将`CGO_ENABLED=1`标志设置为 enable `cgo`。

对于 iOS，您必须启用 Bitcode（减少二进制大小），并将架构设置为`arm64`（或`amd64`对于 iOS 模拟器），并将操作系统设置为`darwin`. 如果您在模拟器上运行，您还需要将您的设置`SDK`为`iphonesimulator`.

然后您将一些参数传递给您的`go build`命令，`-buildmode c-archive`以生成 C 头文件并`-trimpath`删除路径信息。

总之，看起来像这样：

```
$ export SDK=iphonesimulator
$ export GOOS=darwin
$ export GOARCH=arm64
$ export CGO_ENABLED=1
$ export CGO_CFLAGS="-fembed-bitcode"
$ go build -buildmode c-archive -trimpath -o outputFilename.a . 
```

## 代码

你还必须在你的 Go 代码中做几件事。

1.  您必须导入“C”模块

```
import "C" 
```

2.  `//export functionName`您必须通过用注释装饰这些函数来导出要通过 C 头文件公开的任何函数。

```
//export functionName
func functionName() {
  // do something
} 
```

1.  如果要传递变量，请确保使用`C`数据类型，而不是这些变量的 GoLang 对象类型。就这样`string`变成了`C.CString`。例如：

```
//export helloWorld
func helloWorld() *C.char {
    return C.CString("Hello world")
} 
```

[在Compile GoLang as a Mobile Library](https://gaitatzis.medium.com/compile-golang-as-a-mobile-library-243e38590f23)上有一篇关于此主题的博客文章

# java - 如何阅读和理解 java 堆栈跟踪？

> ID：12688068
> 
> 赞同：73
> 
> 时间：2012-10-02T09:49:12.873
> 
> 标签：java, debugging, exception, stack-trace

例如，我得到了这样的堆栈跟踪：

```
java.lang.NullPointerException
abc.investxa.presentation.controllers.UnixServerJobController.handleRequest(UnixServerJobController.java:66)
org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96)
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

那么这个异常的根本原因是什么？从堆栈跟踪中，我发现类`doFilter`中的函数有问题`OncePerRequestFilter`！但是，当我在那里设置断点时，程序永远不会在该断点处停止。

谁能解释一下这个！？在一般情况下，我应该如何使用该堆栈案例进行调试（从下到上或从上到下阅读）！

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-02T09:51:25.043

您通常应该从顶部阅读 - 因此在这种情况下，在方法中的 UnixServerJobController 的第 66 行有一个 NullPointerException `handleRequest`。该方法由`SimpleControllerHandlerAdapter.handle`调用，由`DispatcherServlet.doDispatch`等调用。

但是，在这种特殊情况下，堆栈跟踪的第一帧可能就是您所需要的。查看第 66 行`UnixServerJobController`，找出可能为 null 的内容，然后采取相应措施。

请注意，有时一个异常会包含在另一个异常中（这可能又会包含在另一个异常中，等等）。在这种情况下，您应该查看*每个*堆栈跟踪 - 通常它是“最嵌套”的异常，它提供了最有用的信息，因为这是根本原因。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-10-02T09:52:29.810

通常，确切原因`Exception`在堆栈跟踪的第一行，有关该异常原因的更多信息，您需要逐渐向下移动，而根本原因通常可以在堆栈跟踪底部附近的某个地方找到.

但在大多数情况下，您甚至可以从前几行中获取异常的原因。

因此，在这种情况下，您的异常在`handleRequest`方法中，当您向下移动时，这些方法调用了您以前的方法（堆栈跟踪中当前方法上方的方法）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-02T09:52:29.990

[本](http://www.homeandlearn.co.uk/java/java_stack_trace.html)教程可能会阐明您的问题并帮助您更好地理解事物。

根据您的问题，您似乎在 Unix 服务器作业控制器类的第 66 行有一个空指针异常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-03T03:04:22.143

我发现本教程对我非常有用 [https://forums.bukkit.org/threads/how-to-read-stack-traces-and-troubleshoot-your-own-plugins-by-yourself.32457/](https://forums.bukkit.org/threads/how-to-read-stack-traces-and-troubleshoot-your-own-plugins-by-yourself.32457/)

# php - 将值解析为函数

> ID：12688073
> 
> 赞同：-2
> 
> 时间：2012-10-02T09:49:28.903
> 
> 标签：php, mysql, sql

问题是`id`，`start`并且`end`正在获取`2`里面的值`updateLine`。我可以在 Zend Studio 中调试代码时看到这一点。这是什么原因？

更新：我需要能够将字符串值解析为函数`updateLine`。

```
include_once 'include/connect_db.php';

$id = '2230';
$start = '2012-10-02 11:36:13';
$end = '2012-10-02 11:36:13';

$size = count($id);
var_dump($size);

for($i = 0; $i < $size; $i++){
updateLine($id[$i], $start[$i], $end[$i]);
}

function updateLine($id, $start, $end){
    var_dump($id);
    var_dump($start);
    $sql = "UPDATE `Sequence` 
            SET start='" . $start . "', fin='" . $end . "' 
            WHERE id='" . $id . "'";    
    $result=execute_query($sql);
    var_dump($sql);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:52:47.667

运算符访问字符串的`[]`第 i 个字符。`i`为 0，因此这三个值分别为 2、2 和 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:57:32.627

您正在尝试打电话`updateLine($id[$i], $start[$i], $end[$i])`，这完全很奇怪。只需在没有 for 循环和没有这样的索引的情况下调用它，`updateLine($id, $start, $end)`你就可以开始了。否则，如我的评论中所述，您只有一个字符串（=char 数组），并使用`[]`其他人提到的索引运算符逐个字符地访问字符。

只有当您计划在数组中存储不同的值时，`$id = array("trololo", "blabla")`您才应该像一开始那样迭代它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T10:05:59.783

我刚刚测试过，以下代码没有错误：

```
$id = array('2230', '2245');
$start = array('2012-10-02 11:36:13', '2012-10-15 11:36:13');
$end = array('2012-10-02 11:36:23', '2012-10-15 11:36:23');

$size = count($id);
var_dump($size);

for($i = 0; $i < $size; $i++){
    updateLine($id[$i], $start[$i], $end[$i]);
}

function updateLine($id, $start, $end){
    $sql = "UPDATE `Sequence` 
            SET start='" . $start . "', fin='" . $end . "' 
            WHERE id='" . $id . "'";    
    $result=execute_query($sql);
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-02T09:52:14.470

因为 $id, $start, $end 不是数组和数组访问非数组的结果几乎是出乎意料的结果

你必须使用这样的东西

```
$id = array('2230');
$start = array('2012-10-02 11:36:13');
$end = array('2012-10-02 11:36:13'); 
```

或删除 for 循环

# asp.net - ASP.NET 与 WCF 实例通信

> ID：12688075
> 
> 赞同：0
> 
> 时间：2012-10-02T09:49:36.663
> 
> 标签：asp.net, wcf

在我的 asp.net mvc3 中，我有一个具有这种行为的 wcf 服务：

```
[ServiceBehavior(
    InstanceContextMode = InstanceContextMode.Single, 
    ConcurrencyMode = ConcurrencyMode.Multiple)] 
```

该服务可以通过 wsDualHttpBinding 上的回调通知所有连接的客户端。

我想从控制器通知客户。如何从控制器与 WCF 实例通信？

# objective-c - 约束把我搞砸了

> ID：12688076
> 
> 赞同：0
> 
> 时间：2012-10-02T09:49:40.190
> 
> 标签：objective-c, xcode, constraints, ios6

我有 5 个按钮，在视图的右侧对齐。我有一个方法，它采用发送者的框架（按钮），使用该框架创建一个 UIImageView，从超级视图中删除发送者并在该位置添加 imageView，它可以工作，除非这些约束让我感到困惑。

似乎当我删除其中一个按钮时，它会改变所有其他按钮的大小，我无法解释原因。

我很想简单地删除自动布局功能，但我想为 iPhone 5 和 iPhone 4 的屏幕尺寸制作应用程序。

那我在这里做什么？

简而言之：我在一个视图上有 5 个按钮，一个方法创建一个 UIImageView 与发送者按钮框架，删除按钮并在该位置添加 img 视图。有效，但在更改 1 个按钮后，所有其他按钮的大小都会更改。如何防止这种情况？我认为这是因为它们以“成对”的形式相互对齐。

谢谢

// 编辑我的设置和约束的图像，不确定哪一个给我带来了问题，但可能是底部一个，因为它链接到其他按钮。如果我以编程方式删除其中一个，我不希望我的按钮改变大小，这就是正在发生的事情。 ![设置](../Images/9b013d90c3d41e45304bf099589c8ea1.png)

![约束](../Images/3b7b3702cc3589aed0a2be20986158d1.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T10:02:02.917

像这样删除 Auto - 布局。

![在此处输入图像描述](../Images/7fc541f9c8dfd384b835d37f751959bc.png)

然后使用 Bounds 属性获取不同 iPhone 的高度，然后以各自的方式设置框架。

您可以通过检查获得高度

```
 if([[UIScreen mainScreen] bounds].size.height == 568)
 {
         //newer iphone
 }
 else
 {
         //older iphones
 } 
```

新编辑：

所以你真正需要的是删除第一个按钮和第二个按钮之间的填充。

您必须删除它，然后从顶部将每个视图相对于 Y 轴对齐。这将完成这项工作。

# sql - sql查询合并同一张表的结果

> ID：12688080
> 
> 赞同：0
> 
> 时间：2012-10-02T09:49:50.590
> 
> 标签：sql, sql-server

我有表**客户**（id，name）**电话**（id，customerId，phoneType，phone）是否可以编写一个返回如下行的查询：

客户 ID、客户名称、电话 1、电话 2、移动 1、移动 2

Phone1,Phone2,Mobile1,Mobile2 是电话类型

我试过

```
select id as CustomerId, name as CustomerName, phone as Phone1
from Customers, Phones
where Customers.id = Phones.customerId and 
Phones.phoneType = N'Phone1' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:55:26.377

使用[枢轴](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

```
select *
from (select id as customerid, name as customername, phonetype, phone
     from customers inner join phones on customers.id = phones.customerid
) src
pivot
(max(phone) for phonetype in ([phone1],[phone2],[mobile1],[mobile2])) p 
```

# c# - ValidationMessageFor 和 AddModelError(key, message)。关键是什么？

> ID：12688082
> 
> 赞同：14
> 
> 时间：2012-10-02T09:50:11.923
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

我正在为某个 viewModel 属性开发客户端和服务器端验证。

在`.cshtml`文件中我放了这个：

```
@Html.DropDownListFor(model => model.EntityType.ParentId, Model.ParentTypeList, "")
@Html.ValidationMessageFor(model => model.EntityType.ParentId) 
```

在控制器中进行业务验证

```
catch (BusinessException e)
{
    ModelState.AddModelError("EntityType.ParentId", Messages.CircularReference);
} 
```

以上按预期工作：如果捕获到异常，则该消息会出现在下拉列表旁边。

但是，我发现这种方式不是很优雅。在 中`cshtml`，我使用一种方法来生成有关验证的所有必需信息。在控制器中，我必须知道确切的 Key 字符串并使用它。

难道没有更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-02T11:39:38.257

您可以编写一个扩展方法，该方法将 lambda 表达式作为键而不是字符串：

```
public static class ModelStateExtensions
{
    public static void AddModelError<TModel, TProperty>(
        this ModelStateDictionary modelState, 
        Expression<Func<TModel, TProperty>> ex, 
        string message
    )
    {
        var key = ExpressionHelper.GetExpressionText(ex);
        modelState.AddModelError(key, message);
    }
} 
```

然后使用这个方法：

```
catch (BusinessException e)
{
    ModelState.AddModelError<MyViewModel, int>(
        x => x.EntityType.ParentId, 
        Messages.CircularReference
    );
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-17T10:50:00.087

我遵循[@Darin Dimitrov](https://stackoverflow.com/a/12689563/672891)解决方案，但我想避免`<MyViewModel, int>`，所以我使用了一些不同的方式，但为此你需要`MyViewModel object variable.`

```
public static class ModelStateExtensions
{
    public static void AddModelError<TModel, TProperty>(this TModel source,        
                                                    Expression<Func<TModel, TProperty>> ex, 
                                                    string message,
                                                    ModelStateDictionary modelState)
    {
        var key = System.Web.Mvc.ExpressionHelper.GetExpressionText(ex);
        modelState.AddModelError(key, message);
    }
} 
```

**如何使用：**

```
catch (BusinessException e)
{
    objMyViewModel.AddModelError(x => x.EntityType.ParentId, 
                                 Messages.CircularReference,
                                 ModelState);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T12:37:57.260

您希望验证在客户端和服务器端都发生，并且您正在寻找一个优雅的解决方案，那么为什么可以尝试创建自定义`ValidationAttribute`.

# android - Android：Google-Map 不适用于 Phonegap

> ID：12688083
> 
> 赞同：2
> 
> 时间：2012-10-02T09:50:13.327
> 
> 标签：android, google-maps, cordova, google-maps-api-3

我正在尝试让 Android 的 Google-Map.api 与 Phonegap 一起使用。我无法弄清楚问题所在。到目前为止，我什么都试过了。请检查我的代码。我没有收到任何错误，我还包括了 jQueryMobile。为混乱的代码道歉。

Index.html：-包括各种东西-

谷歌.html：

```
 <body>
<div data-role="page" id="foo" data-theme="c">
    <div data-role="content">
        <div id="map_canvas"></div>
    </div>
</div>
<script type="text/javascript" src="googlemap.js"></script>
<script type="text/javascript">
    function onDeviceReady() {
        var map = new GoogleMap();
        map.initialize();
    }
</script> 
```

googlemap.js 与本教程中看到的相同： [christianengvall.se](http://www.christianengvall.se/phonegap-and-google-maps/)

对 Google.html 的锚超文本引用包含一个 ref="external" 属性。我不知道这是否重要。

我还在 res/xml/cordova.xml 中添加了白名单（up-2-date？）

我的清单文件具有 android 可能拥有的所有权限。（暂时地）

当我在真实设备（三星 Galaxy S3）上运行/调试此页面时，我得到一个白屏。

一个可能的问题可能是 Google.html 的数据角色属性。也许有类似 data-role="mapload" 的东西。

如果您需要更多信息，请询问我。

//编辑

它仍然不起作用。我找到了另一种解决方案，但这是一个大麻烦。如果有人能够上传一个好的代码，请去吧

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:44:53.723

*如果你的 CSS 正确*，你的代码应该没问题，禁用脚本，然后添加到 CSS 文件中：

```
#map_canvas {background: red;} 
```

看到红框了吗？如果没有，那么给它一个高度，`height: 100%`如果您不使用页脚，因为它在内容上方流动（标题是可以的），那么它在 jquerymobile 中是一个很好的高度。如果您确实使用页脚并且想要 100% 的高度，请使用`$("#map_content").css("height", ($("*[data-rel=content]").height()-$("*[data-rel=footer]").height())+"px");`

其他一些指针：

如果您遇到问题，请尝试`adb logcat`（如果您不喜欢终端，则 Eclipse 中有一个窗口），它可以为您提供一些指导。

`rel=external`据我所知，该属性无关紧要。

我使用的白名单是：

```
<access origin="http://127.0.0.1*"/> <!-- allow local pages -->

<access origin="http://google.com" subdomains="true"/>
<access origin="http://gstatic.com" subdomains="true"/>
<access origin="https://google.com" subdomains="true"/>
<access origin="https://gstatic.com" subdomains="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:50:44.987

另一个可能的问题：你复制了吗

```
function onBodyLoad(){      
    document.addEventListener("deviceready", onDeviceReady, false);
} 
```

从[例子](https://github.com/crilleengvall/Phonegap-GoogleMap-and-ProjectSettings-example/blob/master/www/index.html "回购中的 index.html")？

# jquery - 将网站转换为移动网站

> ID：12688084
> 
> 赞同：3
> 
> 时间：2012-10-02T09:50:15.953
> 
> 标签：jquery, html, css, mobile

我刚刚完成了我的网站。当我使用桌面浏览器访问该站点时，它看起来不错。但是当我使用移动设备访问该网站时，该网站难以辨认...

所以我想要我的网站的移动版本。但是我不想仅仅为一个站点学习移动网络开发......所以对于像我这样的外行来说一定很容易！

我已经在谷歌搜索了，但只找到了一些教程。这些教程对我来说真的很难......我搜索了一个工具或一个为我转换它的团队。我也为此付出了一些代价！

谢谢你的回答

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T09:55:35.107

您可以做的是，使用 javascript 或 css 来检测屏幕的宽度。

然后根据检测到的结果，您可以使用桌面 CSS 或移动 CSS。这将是最快的方法，显然您需要为移动设备创建一个单独的 CSS 文件并为移动设备构建它。

以下是您可以检测的方法：

```
<link rel="stylesheet" media="only screen and (max-width: 600px)" href="mobile.css" />
<link rel="stylesheet" media="only screen and (min-width: 601px)" href="desktop.css" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T09:53:13.387

当我开始开发网站时，我只是为大屏幕开发网站。但是在移动设备如此之多的时代，您必须能够作为 Web 开发人员开发移动网站。

[网站http://www.dudamobile.com/index.php](http://www.dudamobile.com/index.php)对我有很大帮助。它将您的网站转换为移动视图。不完美，但有很好的基础。免费。

当您对移动开发缺乏经验时，请谷歌寻求提示。

[http://jquerymobile.com/](http://jquerymobile.com/)有一些关于移动版 jQuery 的信息。或者只是在 Stack Overflow 上询问。

# sql - SQL加入多个表，第三个表中的列未显示

> ID：12688085
> 
> 赞同：0
> 
> 时间：2012-10-02T09:50:14.863
> 
> 标签：sql, select, join

您好，我有以下 SQL 查询

```
 Select catalogid , numitems, allitems - numitems ignoreditems
        from ( 
        select i.catalogid,
         sum(case when (ocardtype in ('PayPal','Sofort') OR
                        ocardtype in ('mastercard','visa') and
                        odate is not null) then numitems
                        else 0 end) numitems,
         sum(numitems) allitems 
        from orders o
        join oitems i on i.orderid=o.orderid
        join products T1 on T1.catalogid = i.catalogid
        group by i.catalogid
        ) X 
```

在最后一个连接语句表产品包含 8 列并且它们没有显示在结果查询中，我只能看到列 catalogid、numitems 和ignoreitems，所以我做错了什么，如果我必须选择这些列才能让他们出现我怎么能用这种语法来做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:57:30.513

```
Select catalogid , numitems, allitems - numitems ignoreditems, X.c1,X.c2,X.c3,X.c4,X.c5,X.c6,X.c7,X.c8
    from ( 
    select i.catalogid,
     sum(case when (ocardtype in ('PayPal','Sofort') OR
                    ocardtype in ('mastercard','visa') and
                    odate is not null) then numitems
                    else 0 end) numitems,
     sum(numitems) allitems ,
     T1.c1, T1.c2, T1.c3, T1.c4, T1.c5, T1.c6, T1.c7, T1.c8
    from orders o
    join oitems i on i.orderid=o.orderid
    join products T1 on T1.catalogid = i.catalogid
    group by i.catalogid, T1.c1, T1.c2, T1.c3, T1.c4, T1.c5, T1.c6, T1.c7, T1.c8
    ) X 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:58:52.260

您只是在查询这三列。如果您希望产品中的列显示在结果集中，只需将它们添加到 select 语句中。您可以一个一个地添加它们，或者只添加 T1.* 来查询所有它们：

```
Select catalogid , numitems, allitems - numitems ignoreditems, X.columnName1, X.ColumnName2, X.*
from ( 
select i.catalogid,
sum(case when (ocardtype in ('PayPal','Sofort') OR
ocardtype in ('mastercard','visa') and
odate is not null) then numitems
else 0 end) numitems,
sum(numitems) allitems,
-- This
T1.ColumnName1, T1.ColumName2, ...
--- or this way
T1.*
from orders o
join oitems i on i.orderid=o.orderid
join products T1 on T1.catalogid = i.catalogid
group by i.catalogid
) X 
```

# sql-server - 租户 ID 上每个表的 SQL Server 分区 - 已用磁盘空间

> ID：12688086
> 
> 赞同：1
> 
> 时间：2012-10-02T09:50:16.157
> 
> 标签：sql-server, sql-server-2008, data-partitioning

我们目前正在开发一个多租户 Web 应用程序。此应用程序将所有数据存储在 1 个单一数据库中。

租户的数据行始终带有租户 ID。

目前我们正在考虑创建表分区，以租户 ID 作为分区键。这是有道理的，因为 99.9% 的所有查询将包含租户 ID 作为 where 子句标准。如果我理解正确，SQL Server 查询通过消除不包含分区键的表分区（在我的情况下是租户 ID）来优化所有此类查询。

对此策略的任何评论（严重的缺点，使用或不使用文件组等，每个表允许的最大分区......）将不胜感激。

但我的主要问题是：我们要计算每个租户的磁盘使用量。SQL Server 支持报告每个分区的磁盘使用情况（标准报告）。有人知道 T-SQL 可以让我获取给定租户 ID 的所有表分区的磁盘使用情况吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T15:56:52.947

这是 Kendra Little 对分区的一个很好的入门。它应该可以帮助您回答是否进行分区的问题。 [http://www.brentozar.com/archive/2012/03/how-decide-if-should-use-table-partitioning/](http://www.brentozar.com/archive/2012/03/how-decide-if-should-use-table-partitioning/)

我的一个建议是确保命中表的每个查询都在谓词中使用分区消除。

至于文件组，请记住分区方案将分区映射到文件组。如果您想为每个租户执行 1 个文件组，这可能会变得复杂。

对于 SQL Server 2005 - 2008 R2，1,000 个分区是一个表可以包含的最大值。在 2012 年，他们将限制增加到 15,000 个分区。如果您需要更多，请将分区值隔开，并让范围确定数据将进入哪个分区。

这是一个表值函数，可用于按分区导出空间使用情况：

```
CREATE FUNCTION tvfPartitionAllocationDetails (@schema_name sysname, @table_name sysname) 
RETURNS TABLE 
AS 
RETURN

select  f.data_space_id,
        f.NAME AS file_group_name,
        SCHEMA_NAME(t.schema_id) AS table_schema,
        t.name AS table_name,
        [HOBT?] = CASE pst.index_id WHEN 0 THEN 'HEAP' WHEN 1 THEN 'B-TREE' END,
        p.partition_number,
        ps.name AS partition_scheme_name,
        pf.name AS partition_function_name,
        partition_function_range = CASE pf.boundary_value_on_right WHEN 1 THEN 'RIGHT' WHEN 0 THEN 'LEFT' END,
        left_prv.value AS left_range,
        right_prv.value AS right_value,
        ISNULL(STR(CAST(left_prv.value AS BIGINT)), '-INF')
        + CASE WHEN pf.boundary_value_on_right = 0 THEN ' < '
               ELSE ' <= '
          END + 'X' + CASE WHEN pf.boundary_value_on_right = 0 THEN ' <= '
                           ELSE ' < '
                      END + ISNULL(STR(CAST(right_prv.value AS BIGINT)), 'INF') AS range_desc
        ,SUM(used_page_count) * 8 [TableSpaceUsed(KB)]
        ,(SELECT SUM(ISNULL(used_page_count,0)) * 8 FROM sys.dm_db_partition_stats  WHERE object_id = p.OBJECT_ID AND partition_number = p.partition_number AND index_id > 1) [NCIndexSpaceUsed(KB)]
        ,SUM(used_page_count) used_page_count
        ,row_count
from sys.dm_db_partition_stats pst
INNER JOIN sys.partitions p ON pst.partition_id = p.partition_id
JOIN    sys.tables t
        ON p.object_id = t.object_id
JOIN    sys.indexes i
        ON p.object_id = i.object_id
        AND p.index_id = i.index_id
JOIN    sys.allocation_units au
        ON p.hobt_id = au.container_id
JOIN    sys.filegroups f
        ON au.data_space_id = f.data_space_id
LEFT JOIN    sys.partition_schemes ps
        ON ps.data_space_id = i.data_space_id
LEFT JOIN    sys.partition_functions pf
        ON ps.function_id = pf.function_id
LEFT JOIN sys.partition_range_values left_prv
        ON left_prv.function_id = ps.function_id
           AND left_prv.boundary_id + 1 = p.partition_number
LEFT JOIN sys.partition_range_values right_prv
        ON right_prv.function_id = ps.function_id
           AND right_prv.boundary_id = p.partition_number
where pst.object_id = object_id(quotename(@schema_name) + '.' + quotename(@table_name)) 
    AND used_page_count > 0 
    AND pst.index_id IN (0,1)/*Remove Nonclustered index counts*/

GROUP BY f.data_space_id,
        f.NAME,
        t.schema_id,
        t.name,
        p.partition_number,
        ps.name,
        pf.name,
        pf.boundary_value_on_right,
        left_prv.value,
        right_prv.value,
        ISNULL(STR(CAST(left_prv.value AS BIGINT)), '-INF')
        + CASE WHEN pf.boundary_value_on_right = 0 THEN ' < '
               ELSE ' <= '
          END + 'X' + CASE WHEN pf.boundary_value_on_right = 0 THEN ' <= '
                           ELSE ' < '
                      END + ISNULL(STR(CAST(right_prv.value AS BIGINT)), 'INF') ,
        row_count,
        p.OBJECT_ID,
        pst.index_id; 
```

然后你可以像这样查询表值函数：

```
SELECT * FROM dbo.tvfPartitionAllocationDetails('dbo','mytablename'); 
```

这假定没有超出行或 lob 页面。如果你有这些，并且想要显示它们，它们可以很容易地添加到函数中。

# .net - Google Maps Static API - 通过中心坐标获取 SW 和 NE

> ID：12688092
> 
> 赞同：10
> 
> 时间：2012-10-02T09:50:23.383
> 
> 标签：.net, api, static, bounds

我正在使用.NET 使用静态地图从谷歌地图加载地图图块。

我遇到的问题是我不知道返回图像的 SW 和 NE 坐标是什么。

我发现了许多不同的代码示例、公式，但它们似乎都有缺陷。这是最接近正确答案的那个。当我在谷歌地图中输入坐标时，它显示它有点偏离。

```
var result = GoogleMapsAPI.GetBounds(new Coordinate(4.79635, 51.15479), 20, 512, 512);

public static class GoogleMapsAPI
{
    public static MapCoordinates GetBounds(Coordinate center, int zoom, int mapWidth, int mapHeight)
    {
        var scale = Math.Pow(2, zoom);

        var SWPoint = new Coordinate(center.X - (mapWidth / 2) / scale, center.Y - (mapHeight / 2) / scale);
        var NEPoint = new Coordinate(center.X + (mapWidth / 2) / scale, center.Y + (mapHeight / 2) / scale);

        return new MapCoordinates() { SouthWest = SWPoint, NorthEast = NEPoint };
    }
}

public class MapCoordinates
{
    public Coordinate SouthWest { get; set; }
    public Coordinate NorthEast { get; set; }
}

public class Coordinate
{
    public double Latitude { get; set; }
    public double Longitude { get; set; }

    public double X { get { return Latitude; } set { Latitude = value; } }
    public double Y { get { return Longitude; } set { Longitude = value; } }

    public Coordinate(double lat, double lng)
    {
        Latitude = lat;
        Longitude = lng;
    }

    public override string ToString()
    {
        return X.ToString() + ", " + Y.ToString();
    }
} 
```

资料来源：
[如何获得谷歌静态地图的边界？](https://stackoverflow.com/questions/12507274/how-to-get-bounds-of-a-google-static-map)
[http://www.easywms.com/easywms/?q=zh-hans/node/3612](http://www.easywms.com/easywms/?q=zh-hans/node/3612)

按中心坐标加载图像：
[http ://maps.googleapis.com/maps/api/staticmap?center=51.15479,4.79635&zoom=20&size=512x512&sensor=false](http://maps.googleapis.com/maps/api/staticmap?center=51.15479,4.79635&zoom=20&size=512x512&sensor=false)

软件故障：
[https ://maps.google.be/maps?q=51.154545859375,+4.796105859375&hl=en&ll=51.154763,4.796695&spn=0.000568,0.001635&sll=51.154687,4.7968138&sspn=027&spn=0370&sspn=037&s](https://maps.google.be/maps?q=51.154545859375,+4.796105859375&hl=en&ll=51.154763,4.796695&spn=0.000568,0.001635&sll=51.154687,4.796838&sspn=0.001136,0.00327&t=m&z=20)

Faulty NE:
[https://maps.google.be/maps?q=+51.155034140625,+4.796594140625&hl=en&ll=51.154764,4.796684&spn=0.000568,0.001635&sll=51.154599,4.796723&sspn=0.001136,0.00327&t=m&z=20](https://maps.google.be/maps?q=+51.155034140625,+4.796594140625&hl=en&ll=51.154764,4.796684&spn=0.000568,0.001635&sll=51.154599,4.796723&sspn=0.001136,0.00327&t=m&z=20)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-25T21:44:22.960

编辑：哇，我刚刚意识到这个问题已经快两年了。对于那个很抱歉。

好的，所以我认为这里发生了一些事情。最重要的是您没有进行您提供的链接中提到的墨卡托投影。您可以通过 google maps API 文档中的[代码示例](https://developers.google.com/maps/documentation/javascript/examples/map-coordinates)查看它的实际效果。我认为您变得有些接近的原因是缩放级别 20 的比例因子是如此之大，以至于它淹没了问题的细节。

要获得边界，您需要获取中心纬度/经度，将其转换为像素坐标，加/减以获得所需角的像素坐标，然后再转换回纬度/经度。第一个链接中的代码可以进行投影和逆投影。下面我把它翻译成c#。

在上面的解决方案中，您正在获取纬度/经度坐标并添加/减去世界坐标（像素坐标/比例），因此您正在组合两个不同的坐标系。

我在试图解决这个问题时遇到的一个问题是你的`Coordinate`课程有点混乱。希望我没有把这个倒过来，但看起来你把纬度和经度倒过来了。这很重要，因为墨卡托投影在每个方向上都是不同的，以及其他原因。您的 X/Y 映射似乎也向后，因为纬度是您的北/南位置，投影时应该是 Y 坐标，而经度是您的东/西位置，投影时应该是 X 坐标。

要找到边界，需要[三个坐标系](https://developers.google.com/maps/documentation/javascript/maptypes#MapCoordinates)：经度/纬度、世界坐标和像素坐标。该过程是中心纬度/经度-（墨卡托投影）->中心世界坐标->中心像素坐标->NE/SW像素坐标->NE/SW世界坐标-（逆墨卡托投影）->NE/SW纬度/经度.

您可以通过添加/减去图像/2 的尺寸来找到像素坐标。像素坐标系从左上角开始，因此要获得 NE 角，您需要从 x 中添加 width/2 并从 y 中减去 height/2。对于 SW 角，您需要从 x 中减去 width/2 并将 height/2 添加到 y。

这是 c# 中的投影代码（作为您的 GoogleMapsAPI 类的一部分），来自 javascript 上面的第一个链接的翻译：

```
static GoogleMapsAPI()
{
    OriginX =  TileSize / 2;
    OriginY =  TileSize / 2;
    PixelsPerLonDegree = TileSize / 360.0;
    PixelsPerLonRadian = TileSize / (2 * Math.PI);
}

public static int TileSize = 256;
public static double OriginX, OriginY;
public static double PixelsPerLonDegree;
public static double PixelsPerLonRadian;

public static double DegreesToRadians(double deg)
{
    return deg * Math.PI / 180.0;
}

public static double RadiansToDegrees(double rads)
{
    return rads * 180.0 / Math.PI;
}

public static double Bound(double value, double min, double max)
{
    value = Math.Min(value, max);
    return Math.Max(value, min);       
}

//From Lat, Lon to World Coordinate X, Y. I'm being explicit in assigning to
//X and Y properties.
public static Coordinate Mercator(double latitude, double longitude)
{
    double siny = Bound(Math.Sin(DegreesToRadians(latitude)), -.9999, .9999);

    Coordinate c = new Coordinate(0,0);
    c.X = OriginX + longitude*PixelsPerLonDegree;
    c.Y = OriginY + .5 * Math.Log((1 + siny) / (1 - siny)) * -PixelsPerLonRadian;

    return c;
}

//From World Coordinate X, Y to Lat, Lon. I'm being explicit in assigning to
//Latitude and Longitude properties.
public static Coordinate InverseMercator(double x, double y)
{      
    Coordinate c = new Coordinate(0, 0);

    c.Longitude = (x - OriginX) / PixelsPerLonDegree;
    double latRadians = (y - OriginY) / -PixelsPerLonRadian;
    c.Latitude = RadiansToDegrees(Math.Atan(Math.Sinh(latRadians)));

    return c;
} 
```

您可以查看原始 javascript 代码以获取更详细的注释。

我通过手动逼近边界然后与代码给出的答案进行比较来测试它。我对 NE 角的手动近似值是 (51.15501, 4.796695) 并且代码吐出[(51.155005..., 4.797038...)](https://www.google.be/maps/place/51%C2%B009%2718.0%22N+4%C2%B047%2748.1%22E/@51.1548343,4.7965149,20z/data=!4m2!3m1!1s0x0:0x0?hl=en)看起来非常接近。SW 角近似为 (51.154572, 4.796007)，代码吐出[(51.154574..., 4.796006...)](https://www.google.be/maps/place/51%C2%B009%2716.5%22N+4%C2%B047%2745.6%22E/@51.1547262,4.7964934,20z/data=!4m2!3m1!1s0x0:0x0?hl=en)。

这是一个有趣的，我希望这会有所帮助！

编辑：意识到我没有包含新`GetBounds`功能：

```
public static MapCoordinates GetBounds(Coordinate center, int zoom, int mapWidth, int mapHeight)
{
    var scale = Math.Pow(2, zoom);

    var centerWorld = Mercator(center.Latitude, center.Longitude);
    var centerPixel = new Coordinate(0, 0);
    centerPixel.X = centerWorld.X * scale;
    centerPixel.Y = centerWorld.Y * scale;

    var NEPixel = new Coordinate(0, 0);
    NEPixel.X = centerPixel.X + mapWidth / 2.0;
    NEPixel.Y = centerPixel.Y - mapHeight / 2.0;

    var SWPixel = new Coordinate(0, 0);
    SWPixel.X = centerPixel.X - mapWidth / 2.0;
    SWPixel.Y = centerPixel.Y + mapHeight / 2.0;

    var NEWorld = new Coordinate(0, 0);
    NEWorld.X = NEPixel.X / scale;
    NEWorld.Y = NEPixel.Y / scale;

    var SWWorld = new Coordinate(0, 0);
    SWWorld.X = SWPixel.X / scale;
    SWWorld.Y = SWPixel.Y / scale;

    var NELatLon = InverseMercator(NEWorld.X, NEWorld.Y);
    var SWLatLon = InverseMercator(SWWorld.X, SWWorld.Y);

    return new MapCoordinates() { NorthEast = NELatLon, SouthWest = SWLatLon };
} 
```

只需记住确保您的纬度和经度正确：

```
var result = GoogleMapsAPI.GetBounds(new Coordinate(51.15479, 4.79635), 20, 512, 512); 
```

我知道代码不是最好的，但我希望它很清楚。

# java - 从 PHP 向 Java 客户端返回值

> ID：12688094
> 
> 赞同：2
> 
> 时间：2012-10-02T09:50:27.233
> 
> 标签：java, php, android

我是Java和PHP的初学者。

我制作了一个客户端 Java 应用程序，它使用 webView 将字符串传递给 php 客户端页面，该页面将把这个字符串插入数据库。

我的问题是，如果 PHP 无法使用 webView 将字符串插入数据库，我该如何向 java 客户端应用程序返回错误值。

php代码将是这样的：

```
 if(Insertion suceed)
{return true;}  

else {return false;} 
```

但我不知道如何在 Java 端制作它。

PS：我需要返回值来向 java 用户显示警报以重新启动应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:57:55.140

您可以使用[PHP/Java Bridge](http://php-java-bridge.sourceforge.net/pjb/)来允许您的应用程序之间的通信。您还可以设置由 PHP 提供的 REST 服务（请参阅[此](https://stackoverflow.com/questions/238125/best-framework-for-php-and-creation-of-restful-based-web-services)之前的 SO 问题）并允许您的 Java 应用程序使用该服务。PHP 应用程序只是发送真/假作为响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:17:37.917

您可以尝试使用 get/post 请求从 php 到 java 进行通信。其他方式的通信可以通过查看xml或者json响应来完成。Json 非常好回答并由 php 支持（php 对象可以使用 json_encode()/json_decode() 解析为 json Java 也支持 json 通信（参见[http://www.json.org/java/](http://www.json.org/java/)）。Json 允许发送无效的。

在此处查看更多信息[http://www.json.org/](http://www.json.org/)

如果您所有的 php 输出/写入都是您插入的状态，那么代码可能看起来像

```
if(Insertion suceed){
   echo "true";
}else {
   echo "false:;
} 
```

在 java 中，您需要捕获 Web 视图的内容。我在这里发现了类似的问题和可能的解决方案 [如何从 WebView 获取网页内容？](https://stackoverflow.com/questions/2376471/how-do-i-get-the-web-page-contents-from-a-webview). 如果它还输出其他数据/Web内容，而您只需要在某处“隐藏”您的状态输出并将其从Java中的输出源字符串中删除

现在，如果您的内容为字符串值，只需使用位于此处的库： [http ://code.google.com/p/json-simple/](http://code.google.com/p/json-simple/)

你的java代码应该是这样的（在我的例子中，“response”是带有内容的字符串）：

```
String response = "false";
JSONParser parser = new JSONParser();
Boolean result = (Boolean)parser.parse(response); 
```

我希望你明白

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:37:22.437

您可以通过在 java 应用程序中为 webView 调用设置一个布尔变量 = 并让 php 函数向 Java 应用程序返回 true 或 false 来做到这一点。

我无法检查这是否有效，因为服务器的 php 代码直到 3 周才上传！

# c - 简单的 _putenv 示例不起作用

> ID：12688096
> 
> 赞同：0
> 
> 时间：2012-10-02T09:50:36.853
> 
> 标签：c, visual-studio, environment-variables

我尝试在 Visual Studio 2008 下的 cl.exe 下使用 getenv 和 setenv。getenv 有效，但 setenv 无效。经过一番浏览，我发现 _putenv 是一种替代方案。

以下片段不起作用

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
   _putenv("Hello=123");
}

C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC>putenv.exe

C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC>echo %Hello%
%Hello% 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T09:53:38.817

`_putenv()`修改正在运行的进程的环境，而不是父进程，这是您在程序完成`echo`后使用命令查看的内容。`putenv.exe`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T09:56:50.097

尝试在`putenv`. 它影响未来。当一个过程结束时，它会回到它来自的过去环境。

# opengl-es - OpenGL ES Camera 反转自身（使用球坐标进行错误计算？）

> ID：12688101
> 
> 赞同：1
> 
> 时间：2012-10-02T09:50:54.507
> 
> 标签：opengl-es

我在天空盒内编码相机，相机应该围绕模型旋转（模型在天空盒的中间向下（0;0;-1），尽管它可能会在未来发生变化）

我有 2 个角度 + 1 个距离：

```
float theta = m_ry; //m_ry & m_rz are variables incrementing themselves when user
float phi = m_rz;   //click a button to rotate the camera
float dist = m_tra  //m_tra is the distance from camera to the model 
```

3 个向量：

```
glm::vec3 eye, center, up;
up = glm::vec3(0.0f, 1.0f, 0.0f);
center = glm::vec3(0.0f, 0.0f, -1.0f); 
```

这是我设置相机坐标的方法：

```
eye.x = dist * cosf(theta) * cosf(phi);
eye.y = dist * cosf(theta) * sinf(phi);
eye.z = dist * sinf(theta) - 1; // -1 so the camera is in front of my model 
```

然后我只做一个：

```
modelviewMatrix = glm::lookAt(eye, center, up);
glLoadMatrixf(glm::value_ptr(modelviewMatrix); 
```

开始时旋转效果很好，但是当我达到 m_rz 角度 > PI/2 时，x 变为负数，并且视图完全相反：

```
|======|                        |======|
|      |                        |      |
|--*   |       becomes =>       |   *--|
|      |    "--*" is my model   |      |
|______|                        |______| 
```

有什么想法可以使 360° 旋转没有反向效果很好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:41:15.350

通过这些公式，您将 Z 轴定义为倾斜参考，并将方位角定义为 xy 平面中的角度。这真的是你想要的吗。在 GL 中，“默认”向上向量是 +y 轴，并且您还将其定义为 lookAt 函数的向上向量，因此您可能需要考虑切换眼睛的 y 和 z 坐标的方程。

这样，phy 将是围绕对象旋转的角度，通过改变 theta，您可以将您的眼睛移动到对象下方或上方。想想像这样改变theta。你在美国上空。通过将 theta 增加到 pi/2，您将改变您对北极的位置。如果你超过 pi/2 或更多，你会发现自己在俄罗斯之上的某个地方。当你在美国之上时，欧洲在你的右边。现在它在你的左边。这只是物理定律:)

这就是为什么您的对象“被反转”的原因。这很正常，只是不是当你在它周围移动时，而是当你越过两极时。所以，试试这些方程。（我不确定你的是否不好，虽然它们看起来有点相反，也许它们没问题，只是换轴）。

```
eye.x = dist * sin(theta) * cosf(phi);
eye.y = dist * cosf(theta) - 1;
eye.z = dist * sinf(theta) * cosf(phi); 
```

# ios - xcode4.5 中的国际化与基本国际化

> ID：12688113
> 
> 赞同：3
> 
> 时间：2012-10-02T09:51:51.597
> 
> 标签：ios, xcode, internationalization, xcode4.5

我是国际化新手

我按照这个步骤，

*   在需要本地化的 nib 文件上单击“本地化”
*   进入项目设置，启用基础国际化

![在此处输入图像描述](../Images/777cd8761d0b42f7f3be987d0cc07037.png)

*   添加了几种语言
*   设置控制器和设置 xib 看起来像这样

![在此处输入图像描述](../Images/6d55633b49b05b9bb78a1cbab2755e40.png)

*   更改了 settings.strings 中的一些字符串（另一种语言）
*   构建并运行，更改语言
*   在设置控制器中，更改不会反映

检查我的 finder 的项目文件夹，我看到 en 、 cn 、 ko 项目文件夹

我似乎在这里错过了重要的一步

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T08:08:44.393

看看这个：http: [//developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/InternationalizeYourApp/InternationalizeYourApp/InternationalizeYourApp.html](http://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/InternationalizeYourApp/InternationalizeYourApp/InternationalizeYourApp.html)

本教程将帮助您本地化以下文本：

1.  两种语言的故事板中的文本
2.  当用户单击 Hello 按钮时应用程序构造和显示的字符串
3.  向用户显示的应用程序名称

# ios - 如何在主窗口中显示 MFMessageComposeViewController？

> ID：12688114
> 
> 赞同：0
> 
> 时间：2012-10-02T09:52:03.237
> 
> 标签：ios, animation, user-interface, mfmessagecomposeview

我有两个嵌套在一起的导航控制器，第一个导航在前面，另一个在后台。所以要查看其他视图，我有像 facebook 应用程序这样的滑动动画。

但我的问题是，当我调用在第二个导航视图上显示消息 UI 时，它只显示黑色窗口。它可能会影响它前面的第一个视图。

所以我的问题是如何将消息 UI 显示到主窗口？这可能会解决问题，而不是显示给导航视图之一。

# ios - 让 iOs VoiceOver 将缩写的“W”拼写为“Watt”

> ID：12688115
> 
> 赞同：8
> 
> 时间：2012-10-02T09:52:06.670
> 
> 标签：ios, uiwebview, accessibility, voiceover

我正在向应用程序添加辅助功能支持，其中应用程序的一部分是带有文本信息的 UIWebView。文本包含缩写单位，例如 W 代表瓦特，lm 代表流明等...

VoiceOver 功能不会自行将字母 W 识别为瓦特（当然这很难），它需要一些帮助。

我知道 html 标签和 (http://www.w3schools.com/tags/tag_abbr.asp)

例如。

```
15 <ABBR title='Watt'>W</ABBR><br>
15 <ACRONYM title='Watt'>W</ACRONYM><br> 
```

不幸的是，VoiceOver 系统无法识别它们。

有谁知道使这项工作的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T13:07:29.973

```
<span role="text" aria-label="Watt">W</span>; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T14:06:21.990

您可以测试以查看配音是否处于活动状态

```
BOOL UIAccessibilityIsVoiceOverRunning(); 
```

如果它是活动的，用 watt 而不是 w 写出 html。作为盲人用户，我质疑是否有必要将缩写词扩展到一个完整的单词。我对 mm、m 和 kmf 或距离等缩写词没有任何问题。我假设使用该应用程序的任何人都可以根据您的应用程序功能和上下文判断 w 是瓦特。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:57:35.170

拼出瓦特，但使“att”的颜色与背景文本相同。或者，如果您可以选择应该大声朗读的部分，请在其他地方（隐藏）再次写入文本，但在其中使用“Watt”，然后改为阅读。

# wpf - 尝试在 UserControl 中使用 AddOwner 方法将 SelectedDate 传递给嵌入式 DatePicker

> ID：12688116
> 
> 赞同：0
> 
> 时间：2012-10-02T09:52:09.527
> 
> 标签：wpf, dependency-properties

我有一个带有嵌入式 DatePicker 的用户控件。我想将一些 DatePicker 属性传递给内部 DatePicker 控件。似乎我应该能够在 UserControl 上使用 AddOwner，但定义的 OnSelectedDateChanged 方法永远不会触发。

```
public static readonly DependencyProperty SelectedDateProperty =
    DatePicker.SelectedDateProperty.AddOwner
    (
        typeof(MyUserControl), 
        new FrameworkPropertyMetadata(FrameworkPropertyMetadataOptions.Inherits, 
        onSelectedDateChanged)
    );

private static void onSelectedDateChanged(DependencyObject o, 
                                          DependencyPropertyChangedEventArgs e)
{
    // my code here
} 
```

为了让它工作，我刚刚定义了一个标准的依赖属性 DateTime? UserControl 上的 SelectedDate，然后将值传递给内部 DatePicker。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T16:24:18.247

MSDN 有一个关于[为 Dependency Property 覆盖元数据](http://msdn.microsoft.com/en-us/library/ms754209.aspx)的非常好的主题。

您还可以安全地添加一个额外的属性更改处理程序，它将与现有的处理程序“合并”。有关详细信息，请查看[`OverrideMetadata`](http://msdn.microsoft.com/en-us/library/ms597491.aspx)文档。

在 StackOverflow 上也可以找到或多或少相关的答案：[如何更改继承的依赖属性的默认值？](https://stackoverflow.com/questions/5653364/how-can-i-change-the-default-value-of-an-inherited-dependency-property)

# java - 捕获任何网络服务异常？

> ID：12688119
> 
> 赞同：3
> 
> 时间：2012-10-02T09:52:17.087
> 
> 标签：java, web-services, jakarta-ee, soap

我有一个 soap`@webservice`和一个发送请求的客户端，如下所示：

```
try {
  // any webservice confniguration here
  webservice.call();
} catch (Exception e) {
  System.out.println("ERROR");
} 
```

现在，如果连接超时，我会得到一个`java.net.socketTimtoutException`with `stacktrace`，加上上面的错误 sysouts。如何防止堆栈跟踪被打印到控制台？我不明白为什么我会在遇到任何发生的异常时得到它，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:22:11.073

然后很明显，介于两者之间的某个`try/catch`块捕获异常，打印堆栈跟踪，然后重新抛出它。正如@WernerVesterås 所说。
我可以建议您调试代码。

# ruby - Rake：如何接受包含连字符的命令行参数？（使用 key=value 语法时）

> ID：12688120
> 
> 赞同：1
> 
> 时间：2012-10-02T09:52:26.393
> 
> 标签：ruby, rake

我有一个接受多个命令行参数的 Rake 任务。我更喜欢支持将参数传递给任务的 key=value 语法，例如：

```
rake deploy verbose=true environment=production dry-run=true 
```

我遇到的问题是“空运行”论点。运行该 Rake 任务后，我收到以下消息：

> 不知道如何构建任务'dry-run = true'

“dry-run”是命令行上的第一个、中间还是最后一个参数都没有关系。我可以接受使用“数组”样式的参数：

```
rake deploy[true,production,true] 
```

但我不喜欢这样，我可以删除炒作：

```
rake deploy verbose=true environment=production dryrun=true 
```

但是我希望有某种方法可以在参数名称中使用连字符，但我在任何讨论这个问题的地方都找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:28:33.340

这些变量由您的 shell 管理。他什么`rake`时候`ENV['verbose']`只是问shell，“嘿，你有什么价值叫做'verbose'吗？如果有，给我”。

Shell 通常无法处理变量名中的连字符；与大多数编程语言一样，hypen 是为减法运算保留的。

最简单的解决方法是将连字符替换为下划线：

```
rake deploy verbose=true environment=production dry_run=true 
```

编辑：

另一种选择是使用更适合命令行管理的东西。[thor](https://github.com/wycats/thor)应该允许您像这样定义命令：

```
deploy --verbose --environment=production --dry-run 
```

编辑2：

事实证明，这些值是逐字传递给 rake 的，而不是像我想的那样由 shell 处理 - 有关详细信息，请参阅对此答案的第一条评论。尽管如此，在这个答案上提出的解决方案仍然有效。

# php - 在 php 邮件功能中，我们可以将 From 属性设置为 Word Not Email 吗？

> ID：12688134
> 
> 赞同：0
> 
> 时间：2012-10-02T09:53:43.647
> 
> 标签：php, email

在php邮件功能中，当我们发送标题时，我们可以将“From Mail”设置为“Company Newsletter”这样的单词，而不是像newsletter@company.com这样的电子邮件形式？我们怎么能这样做？因为写它（不是以电子邮件形式）会阻止发送电子邮件。

这是我的代码：

```
 $headers  = "MIME-Version: 1.0\r\n";
  $headers .= "Content-type: text/html; charset=windows-1256\r\n"; 
```

我试过蒂姆建议的，有

```
 $row['SenderMail'] =  "Company Newsletter <Newsletter@ids.com.lb>";
  $headers .= "From:".$row['SenderMail']."\r\n"; 

  $subject=str_replace('%26','&',$row['Subject']);

  @mail($row['DestinationMail'], $subject, $row['Body'],$headers); 
```

但是仍然没有发送电子邮件。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:00:24.597

以下是有效的 From: 标头 - 请注意地址在尖括号中：

`"Company Newsletter <newsletter@company.com>"`

许多电子邮件客户端只会在界面的“发件人”列中显示公司通讯。

请注意，这在 Return-Path: 标头中是不允许的，只有 From:

注意 RFC 2822 3.4 [https://www.rfc-editor.org/rfc/rfc2822#section-3.4中的“显示名称”](https://www.rfc-editor.org/rfc/rfc2822#section-3.4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:20:45.043

请使用以下内容：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=windows-1256'."\r\n";
$headers .= 'To: '.$row['SenderMail'].' <'.$row['SenderMail'].'>'."\r\n";
$headers .= 'From: Company Newsletter <Newsletter@ids.com.lb>'."\r\n";

mail($row['DestinationMail'], $subject, $row['Body'], $headers); 
```

这应该够了吧 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T07:37:22.053

我刚刚重新检查过，它正在使用一个基本示例，例如：

```
$headers = 'MIME-Version: 1.0' . "\r\n"; 
$headers .= 'Content-type: text/html; charset=windows-1256'."\r\n"; 
$headers .= 'To: Test <your@email.com>'."\r\n"; 
$headers .= 'From: Company Test <company@test.com>'."\r\n"; 

mail('Test <your@email.com>', 'test mail', 'test content', $headers); 
```

你在哪个 PHP 版本下？您是否配置了邮件服务器？您能否将这些行放在脚本的顶部：

```
ini_set('display_errors', 'On');
error_reporting(E_ALL | E_STRICT); 
```

# google-visualization - 如何在 Google Geochart 的区域模式下加快标记的绘制速度？

> ID：12688137
> 
> 赞同：5
> 
> 时间：2012-10-02T09:53:59.443
> 
> 标签：google-visualization

我们有一个场景，我们希望在 Google Geochart 上绘制大量（可能多达 100 或 200 个）标记。在绘制标记时，图表似乎在一段时间内绘制这些标记，我们认为这对我们的用户来说花费了太长时间。我们希望它们立即或至少更快地显示。

我似乎没有找到任何文件来表明这是可配置的，那么有没有办法加快速度呢？

我在下面包含了示例代码来复制可以在[可视化操场](https://code.google.com/apis/ajax/playground/?type=visualization#geo_chart)上运行的示例代码。

```
 function drawVisualization() {
  var data = google.visualization.arrayToDataTable([
    ['City', 'Count'],
['London',245],
['Manchester',58],
['Birmingham',54],
['Stoke-on-trent',30],
['Leicester',26],
['Liverpool',25],
['Nottingham',19],
['Preston',18],
['Glasgow',15],
['Leeds',14],
['West Bromwich',13],
['Sheffield',11],
['Cardiff',8],
['Wigan',8],
['Wolverhampton',8],
['Bolton',7],
['Bradford',7],
['Edinburgh',7],
['Telford',7],
['Warrington',7],
['Romford',6],
['Stockport',6],
['Swansea',6],
['Burnley',5],
['Coventry',5],
['Dagenham',5],
['Ipswich',5],
['Milton Keynes',5],
['Newcastle Upon Tyne',5],
['Northampton',5],
['Birkenhead',4],
['Blackburn',4],
['Burton-on-trent',4],
['Croydon',4],
['Durham',4],
['Reading',4],
['Rotherham',4],
['Saint Helens',4],
['Stafford',4],
['Stevenage',4],
['Sunderland',4],
['Accrington',3],
['Ashford',3],
['Bangor',3],
['Barrow',3],
['Blackpool',3],
['Bristol',3],
['Bury',3],
['Cambridge',3],
['Chesterfield',3],
['Chorley',3],
['Dundee',3],
['Heywood',3],
['Ilford',3],
['Lancaster',3],
['Luton',3],
['Mansfield',3],
['Newport',3],
['Oldbury',3],
['Oldham',3],
['Plymouth',3],
['Sale',3],
['Slough',3],
['Southend-on-sea',3],
['Stratford-upon-avon',3],
['Aylesbury',2],
['Bedford',2],
['Brighton',2],
['Caerphilly',2],
['Cannock',2],
['Canterbury',2],
['Carshalton',2],
['Chatham',2],
['Chelmsford',2],
['Cheltenham',2],
['Chester',2],
['Corby',2],
['Crawley',2],
['Crumlin',2],
['Cwmbran',2],
['Exeter',2],
['Folkestone',2],
['Gravesend',2],
['Guildford',2],
['Halesowen',2],
['Harrow',2],
['Huddersfield',2],
['Isleworth',2],
['Lichfield',2],
['Lincoln',2],
['Mitcham',2],
['Oxford',2],
['Peterborough',2],
['Rawtenstall',2],
['Rochdale',2],
['Scunthorpe',2],
['Solihull',2],
['South Shields',2]

  ]);

  var geochart = new google.visualization.GeoChart(
      document.getElementById('visualization'));
  geochart.draw(data, {width: 556, height: 347, region: 'GB', displayMode: 'markers', legend:'none'});
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T10:22:42.447

这是因为 Google 将您的位置转换为经度/纬度的速度非常缓慢；您应该一次性解决它们并直接使用它们（[标记模式格式](https://developers.google.com/chart/interactive/docs/gallery/geochart)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T10:14:50.133

这是一个关于如何使用 lat/long 并放置信息工具提示的示例：

[http://jsfiddle.net/cmoreira/njB6m/](http://jsfiddle.net/cmoreira/njB6m/)

```
 data.addColumn('number', 'Lat');                                
 data.addColumn('number', 'Long');
 data.addColumn('string','tooltip');
 data.addColumn('number','Example');                                 

data.addRows([[41.151636,-8.569336,'Portugal',{v:0,f:'test PT'}]]);
data.addRows([[ 39.059575,-98.789062,'USA',{v:1,f:'test US'}]]); 
```

# jquery - 准备好后 jQuery 对象未定义

> ID：12688144
> 
> 赞同：0
> 
> 时间：2012-10-02T09:54:42.450
> 
> 标签：jquery, undefined

我对 jQuery 有一个奇怪的问题，在 ready 事件下执行所有代码后，“$”变得未定义。

有这个错误的经验吗？或知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:56:56.990

将 jQuery 代码放在这个片段中，因为 $ 可能是为其他东西定义的。

```
(function($) {

    // $ Works! You can test it with next line if you like
    // console.log($);

})( jQuery ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:50:24.943

像这样使用

```
<script type="text/javascript">
    var $ = jQuery.noConflict();
    (function ($) {
           $(document);
           // your code
    }(jQuery));
</script> 
```

# jquery - Jquery Validator Error Border

> ID：12688148
> 
> 赞同：0
> 
> 时间：2012-10-02T09:54:58.783
> 
> 标签：jquery, validation

I have a form and I want to validate my select box.

```
<div id="wwctrl_add_savedAddressId" class="wwctrl styled-select">
    <select id="add_savedAddressId" class="required savedAddress checkDropdown">
</div> 
```

I used the jquery validator to validate it.

```
 initValidation: function(){
            $(this.initVariables.formId).validate({
                  ignore: ":hidden",
                  errorElement: "div",
                  errorPlacement: function(error, element) {
                        error.insertAfter(element.parent());
                  }
            });
  } 
```

If the select box is equal to -Select- it will return an error.

```
$.validator.addMethod("check_item_dropdown", function(value, element) {  
                return this.optional(element) || value != "-Select-";   
} 
```

That code is working and it results to

```
<div id="wwctrl_add_savedAddressId" class="wwctrl styled-select">
      <select id="add_savedAddressId" class="required savedAddress checkDropdown error">
</div>
<div class="error" for="add_savedAddressId" generated="true"> Select item</div> 
```

The error class is equal to the following css

```
select.error{
    border: 1px solid #F10016;
    height: 23px;
} 
```

As i have observed that the jquery validator is the one who appends the "error" class on the element itself.

The problem is, If i am validating a select box, I want the error class to be on the parent of the select box (in this case #wwctrl_add_savedAddressId) because I want the red color border be placed on the div instead of the select box itself. Why? Because our select box design has a background image and the select box itself is under that image.

How can i set my requirements using the validator?

Note: I have many select box that I need to validate like this. Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:19:53.180

try to hack it if you don't have access to the validator code. try something like this

```
...
errorPlacement: function(error, element) { 
    error.insertAfter(element.parent()); 
    if (element.is('select')) {
        element.removeClass('error');
        element.parent().addClass('error');
    }
}
... 
```

# javascript - 如何在新页面启动时添加加载栏，直到所有数据完全加载？

> ID：12688158
> 
> 赞同：2
> 
> 时间：2012-10-02T09:55:44.043
> 
> 标签：javascript, ajax

如何在按下指向另一个页面的“href”链接按钮时添加加载栏？

因为后端服务需要处理一些请求，这可能需要大约 10 秒才能显示新页面。（情况是当我按下链接按钮时，页面看起来像是在 10 秒左右停止响应......）

按下链接按钮时，我需要触发加载栏操作。

刚刚找到了一种使用 ajaxstart、ajaxstop 的方法（参考：http: [//jsfiddle.net/jonathansampson/VpDUG/170/](http://jsfiddle.net/jonathansampson/VpDUG/170/)），它适合我的情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:58:40.797

是的，AJAX 适合您的情况。我会稍微解释一下。

1.  用户单击链接后，阻止使用 JavaScript 加载页面。在[jQuery](http://jquery.com/)代码中，这看起来如下所示。

    ```
    $('a').click(function(e){
        e.preventDefault();

        // save the destination of the link for the ajax request
        var destination = $(this).attr('href');
    }); 
    ```

2.  显示加载栏。

    ```
    $('#loading').show(); 
    ```

3.  然后向服务器发送一个 AJAX 请求。

4.  服务器接收请求，计算结果并将其发送回客户端。

5.  当客户端的 JavaScript 得到服务器的响应时，替换页面的内容。jQuery 允许您定义一个在响应到达时执行的回调函数。

6.  如果隐藏加载栏。

    ```
    $('#loading').hide(); 
    ```

我推荐使用 jQuery 来做简化的[AJAX 请求](http://api.jquery.com/jQuery.ajax/)。它将为您节省很多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:40:16.453

如果您一开始还没有使用 AJAX 加载页面，而只是一个简单的`<a href="other-page">link</a>`（从您的问题中我认为是这种情况 - 如果我弄错了，请查看[sharethis 的答案，](https://stackoverflow.com/questions/12688158/how-to-add-a-loading-bar-while-a-new-page-is-launching-until-all-data-is-complet/12688204#12688204)如果您解释了如何操作实际上确实使用 AJAX 加载其他页面）然后将处理程序绑定到 AJAX 事件不会做你需要的，因为不会有 AJAX 事件。

我建议写这样的东西：

```
function loading () {
    $('body').addClass('loading');
    setTimeout(function () {
        $('body').removeClass('loading');
    }, 20000);
} 
```

并将该函数绑定到加载缓慢的链接的单击处理程序，但不会阻止默认链接行为（即实际跟随链接），对于具有以下链接的链接`class="slow"`：

```
$('a.slow').click(loading); 
```

或对于每个链接：

```
$('a').click(loading); 
```

如果`setTimeout`服务器由于某种原因没有响应，那么用户将不会让页面永远无法使用。

我仍然建议不要在显示加载微调器时使页面不可用，这样用户就可以在等待服务器响应的同时或代替等待服务器响应，但这取决于您。请参阅[**此演示**](http://jsfiddle.net/VpDUG/1269/)（您对 CSS 的一些更改）以了解我的意思。

# bash - 从另一个函数调用时，函数中的子shell 找不到基本的 bash 命令

> ID：12688160
> 
> 赞同：2
> 
> 时间：2012-10-02T09:55:49.387
> 
> 标签：bash, eval, subshell

我有以下 bash 脚本（这是更复杂脚本的简化版本）。

```
#!/usr/bin/env bash
set -x

function execute() {
    `$1` # same as $($1), gives "command not found" as do all the following:
    # $1 # or ${1}
    # eval "$1"
    # eval $1

    # This gives "No such file or directory" even though it *is* there...
    #"$1"
}

function runCommand() {
    PATH="${1}"
    execute "chmod 777 ${PATH}"
}

execute "chmod 777 ${1}"
runCommand "$1"

#EOF 
```

当我运行它时，我得到以下输出：

```
+ execute 'chmod 777 build.test-case.sh'
++ chmod 777 build.test-case.sh
+ runCommand build.test-case.sh
+ PATH=build.test-case.sh
+ execute 'chmod 777 build.test-case.sh'
++ chmod 777 build.test-case.sh
./build.test-case.sh: line 5: chmod: command not found 
```

因此`chmod`，当`execute`直接调用该函数时有效，但从另一个函数调用它时失败，即使调试输出似乎完全相同......

**谁能解释这种行为？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:03:54.257

问题是您正在覆盖[**PATH**](http://en.wikipedia.org/wiki/PATH_%28variable%29)变量，该变量包含二进制文件所在目录的路径，就像那个一样`chmod`，所以这就是它找不到它的原因。

`PATH`如果您为您的`runCommand()`函数使用另一个变量而不是一个变量，它应该可以工作，如下所示：

```
function runCommand() {
    VAR="${1}"
    execute "chmod 777 ${VAR}"
} 
```

# mysql - MYSQL SELECT 行不在查询中

> ID：12688161
> 
> 赞同：0
> 
> 时间：2012-10-02T09:55:58.880
> 
> 标签：mysql, user-agent, bots, exists

我有一个访问过的人的统计数据库。此表包含 ID、时间戳 IPv4、IPv6、用户代理和 REQUEST_URI。我通过运行类似的东西得到错误的数字

`SELECT COUNT(DISTINCT IPv4) AS 'Uniques', COUNT(*) AS 'Total' FROM statistics`

所以我需要从人类中过滤掉机器人。我的方法是这样的：

`SELECT ID FROM statistics WHERE NOT EXISTS(SELECT ID FROM statistics WHERE useragent NOT LIKE '%bot%')`

这应该从搜索非机器人的查询中不存在的统计信息中选择所有行。我认为查询看起来很合理，为什么它不起作用？

我想这样做是有原因的，而不是

`SELECT ID FROM statistics WHERE useragent LIKE '%bot%'`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:00:44.663

我有点困惑，但也许你想做：

```
SELECT ID FROM statistics 
WHERE ID NOT IN (SELECT ID FROM statistics WHERE useragent NOT LIKE '%bot%') 
```

# java - 带有 JPA + Hibernate（或类似）和 Apache Derby 嵌入式数据库的 Java 独立应用程序

> ID：12688162
> 
> 赞同：9
> 
> 时间：2012-10-02T09:56:03.353
> 
> 标签：java, hibernate, jpa, derby

我想创建一个使用 Apache Derby Embedded DB 的 Java 独立 Java 应用程序。

我想使用 JPA，因为我对它非常熟悉，并且可能超过了 Hibernate（但如果它变得更容易，也欢迎其他人）。

有没有在 Derby 嵌入式数据库上使用 JPA 而不是 Hibernate 的示例？我四处寻找，但找不到任何有用的示例代码。我想要一个类似教程的东西，它会告诉我需要在我的类路径中添加哪些库，哪些是基本文件以及我需要做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-11T15:57:40.390

如果您使用 Maven 进行构建，则可以使用我编写的[derby-maven-plugin](https://github.com/carlspring/derby-maven-plugin)，它可以在 GitHub 上和通过 Maven Central 获得。它将在您的测试之前为您启动和停止数据库。

您可以检查：

*   [这](https://stackoverflow.com/questions/14731178/creating-temporary-database-that-works-across-maven-test-phases/15089028#15089028)是我对类似问题的回答
*   [这](http://nigel-eke.com/unit-integration-testing-rest-services/rest-test-add-integration-tests/)是一个使用 Derby 并进行测试的示例 REST 应用程序

# iphone - mpmovieplayerviewcontroller 无法在 ios 6 中播放音频

> ID：12688165
> 
> 赞同：1
> 
> 时间：2012-10-02T09:56:28.237
> 
> 标签：iphone, objective-c, ios, ios6

我正在将我的应用程序升级到 iOS 6，现在在应用程序中 mpmovieplayerviewcontroller 不播放流式音频

在我的应用程序中。它显示播放器的前端界面但不播放音频，并且在控制台中出现以下警告

未来：

```
[MPAVController] Autoplay: Enabling autoplay

[MPAVController] Autoplay: Likely to keep up or full buffer: 0

 [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up.

[MPAVController] Autoplay: Ending background task assertion (10) for playback stall 
```

我发现它几乎无处不在，但无法成功。我该如何解决这个问题？

# magento - 根据存储在 Mage::registry 上的数据编辑标题文本

> ID：12688166
> 
> 赞同：0
> 
> 时间：2012-10-02T09:56:27.807
> 
> 标签：magento, magento-1.7, adminhtml

我拥有所有必要的文件和结构，以便在我添加到数据库中的表上处理 CRUD 操作。在`Edit.php`文件上，我有一个`getHeaderText()`功能，可以修改在修改或向表中添加新值集时将出现在编辑页面上的标题。

我遇到的问题是，在评估以下代码时：

```
if (Mage::registry('allpages_data')  && Mage::registry('allpages_data')->getId()) 
```

它总是返回`NULL`，所以总是在标题上显示*新的参考文本。*选中，当我正确编辑它时，它会编辑当前的一组值，当添加新值时，它会添加一个新组。尝试了几种解决方案，但都没有奏效。

**第二次编辑**
这是我的`allpages_data`var_dump：

```
object(Dts_Allpages_Model_Referencedpages)[412]
  protected '_eventPrefix' => string 'core_abstract' (length=13)
  protected '_eventObject' => string 'object' (length=6)
  protected '_resourceName' => string 'allpages/referencedpages' (length=24)
  protected '_resource' => null
  protected '_resourceCollectionName' => string 'allpages/referencedpages_collection' (length=35)
  protected '_cacheTag' => boolean false
  protected '_dataSaveAllowed' => boolean true
  protected '_isObjectNew' => null
  protected '_data' => 
    array
      empty
  protected '_hasDataChanges' => boolean false
  protected '_origData' => null
  protected '_idFieldName' => string 'referencedpages_id' (length=18)
  protected '_isDeleted' => boolean false
  protected '_oldFieldsMap' => 
    array
      empty
  protected '_syncFieldsMap' => 
    array
      empty 
```

这是我的**Edit.php**代码文件，具有以下`getHeaderText`功能：

```
<?php
class Dts_Allpages_Block_Adminhtml_Allpagesbackend_Edit extends Mage_Adminhtml_Block_Widget_Form_Container
{
    public function __construct(){
        parent::__construct();

        $id = $this->getRequest()->getParam('id');
        $this->_objectId = 'id';
        $this->_blockGroup = 'allpages';
        $this->_controller = 'adminhtml_allpagesbackend';
        $this->_mode = 'edit';

        $this->_addButton('save_and_continue', array(
                'label' => Mage::helper('adminhtml')->__('Save And Continue Edit'),
                'onclick' => 'saveAndContinueEdit()',
                'class' => 'save',
        ), -100);

        $this->_updateButton('save', 'label', Mage::helper('allpages')->__('Save reference'));

        $this->_formScripts[] = "
                        function toggleEditor() {
                            if (tinyMCE.getInstanceById('form_content') == null) {
                            tinyMCE.execCommand('mceAddControl', false, 'edit_form');
                                } else {
                                    tinyMCE.execCommand('mceRemoveControl', false, 'edit_form');
                                    }
                                }

                        function saveAndContinueEdit(){
                            editForm.submit($('edit_form').action+'back/edit/');
                        }
                ";
    }

    public function getHeaderText()
    {
        if (Mage::registry('allpages_data')  && Mage::registry('allpages_data')->getId()){
            return Mage::helper('allpages')->__('Edit reference');
        } else {
            return Mage::helper('allpages')->__('New reference');
        }
    }

    protected function _prepareLayout()
    {
        if ($this->_blockGroup && $this->_controller && $this->_mode) {
            $this->setChild('form', $this->getLayout()->createBlock($this->_blockGroup . '/' . $this->_controller . '_' . $this->_mode . '_form'));
        }
        return parent::_prepareLayout();
    }
} 
```

这是我的**Form.php**文件代码：

```
<?php
class Dts_Allpages_Block_Adminhtml_Allpagesbackend_Edit_Form extends Mage_Adminhtml_Block_Widget_Form
{
    protected function _prepareForm()
    {
        $id = $this->getRequest()->getParam('id');
        $params = array('id' => $this->getRequest()->getParam('id'));

        if (Mage::getSingleton('adminhtml/session')->getdata())
        {
            $data = Mage::getSingleton('adminhtml/session')->getdata();
            Mage::getSingleton('adminhtml/session')->getdata(null);
        }
        elseif (Mage::registry('allpages_data'))
        {
            $data = Mage::registry('allpages_data')->getdata();
        }
        else
        {
            $data = array();
        }

//      $entireregistryArray = Mage::getRegistry();
//      var_dump($entireregistryArray);

        $form = new Varien_Data_Form(
                array(
                        'id' => 'edit_form',
                        'action' => $this->getUrl('*/*/save', $params),
                        'method' => 'post',
                        'enctype' => 'multipart/form-data',
                    )
                );

        $form->setUseContainer(true);
        $this->setForm($form);

        $fieldset = $form->addFieldset('allagesbackend_form', array(
                                'legend' =>Mage::helper('allpages')->__('References pages Information')
                            )
                    );

        $fieldset->addField('current_url', 'text', array(
                        'label'     => Mage::helper('allpages')->__('Url'),
                        'class'     => 'required-entry',
                        'required'  => true,
                        'name'      => 'current_url',
                        'note'      => Mage::helper('allpages')->__('The url of the reference.'),
                    )
            );

        $fieldset->addField('search_engine', 'text', array(
                        'label'     => Mage::helper('allpages')->__('Engine'),
                        'class'     => 'required-entry',
                        'required'  => true,
                        'name'      => 'search_engine',
                    )
            );

        $fieldset->addField('description', 'text', array(
                        'label'     => Mage::helper('allpages')->__('Description'),
                        'class'     => 'required-entry',
                        'required'  => true,
                        'name'      => 'description',
                    )
            );

        $form->setValues($data);

        return parent::_prepareForm();
    }
} 
```

以防万一，我正在使用AlanStorm 的*CommerceBug*工具。

**第一次编辑**
这是我的一段 ActionController 代码，我按照@benmarks 的建议`Mage::register('allpages_date')`在调用之前调用`renderLayout()`

```
public function editAction()
    {
        $id = $this->getRequest()->getParam('referencedpages_id', null);
        $model = Mage::getModel('allpages/referencedpages');

        if ($id) {
            $model->load($id);
        }

        if ($model->getId() || $id == 0) {
            $data = Mage::getSingleton('adminhtml/session')->getFormData(true);
            if ($data) {
                $model->setData($data)->setId($id);
            }
        } else {
            Mage::getSingleton('adminhtml/session')->addError(Mage::helper('allpages')->__('Referencedpages table does not exist'));
            $this->_redirect('*/*/');
        }

        Mage::register('allpages_data', $model);

        $this->loadLayout();
        $this->getLayout()->getBlock('head')->setCanLoadExtJs(true);
        $this->renderLayout();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:51:35.547

如果您之前没有在动作控制器中设置该注册表项，`renderLayout()`那么它不会以有用的方式设置用于块渲染。像任何其他变量一样考虑它 - 那里没有魔法。

# php - 如何在 PHP 脚本中处理共享资源

> ID：12688167
> 
> 赞同：2
> 
> 时间：2012-10-02T09:56:39.380
> 
> 标签：php

如果在 PHP 中这是一个太基本的问题，请原谅。我是桌面应用程序开发人员，所以不确定，

就像我们在不同的语言中加锁、同步或使用临界区来让多个线程访问一些公共资源一样。我的假设是否正确，如果多个不同的客户端同时访问一个脚本（php）将在多个线程中处理？如果他们正在更新一个共同的记录，他们需要一些同步吗？

它是如何在 PHP 中完成的？

在我的情况下，一个 PHP 页面可能有多个 android 客户端访问它，并可能修改/访问相同的记录或表行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T10:01:42.463

PHP 是显式单线程的，对 PHP 脚本的每次调用都将由其自己的服务器线程/进程处理。

同时更新记录必须由底层数据库层处理。例如 MySQL 被广泛使用并且线程安全。使用事务时，您还可以保证其他级别的原子性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:02:00.657

使用 DBMS（您所做的）时，该数据库负责数据一致性。尤其是在阅读时无论如何都没有问题，因为只有在修改某些内容时才会出现问题。如果您不确定，请在编写时使用事务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T10:04:10.243

如果您正在谈论访问服务器，那么它取决于服务器是否是线程化的（Apache 不是，nginx 是等），这与 PHP 本身（不是线程化的）无关。

无论哪种方式，如果您谈论的是 MySQL，那么情况就不同了，因为 MySQL 在每个连接会话中工作（例如`CURRENT_TIMESTAMP`并`LAST_INSERT_ID()`取决于连接，而不是整个数据库）。所以如果你有这样的事情：

```
//some insert query
$stmt->execute();
$id = $connection->insert_id;
$stmt2->execute($id); 
```

...它是“安全的”，因为即使第一个`stmt`在一个被执行之前执行了很多次`stmt2`，ID 仍然是正确的，因为连接是相同的。

# jquery - Jquery - 可重用的复选框功能

> ID：12688169
> 
> 赞同：1
> 
> 时间：2012-10-02T09:56:45.877
> 
> 标签：jquery, html, forms

我在 JQuery 知识有限的情况下遇到了困难，我使用了许多复选框：

```
 <input id="e_1" class="hiders" type="checkbox">
    <label for="e_1">Hide Element 1</label>

    <input id="e_2" class="hiders" type="checkbox">
    <label for="e_2">Hide Element 2</label>

    //Currently 6 of the above, with unique id's and shared class 
```

我想创建一个通用（和可重用的函数）来隐藏相关的 div：

```
 <div id="e_1_div"> content </div>

    <div id="e_2_div"> content </div>

    //Currently 6 of the above, with unique id's and shared class 
```

以下解决方案是我目前正在使用的解决方案（每个复选框的单独功能），我有限的知识告诉我它的格式非常错误，并且可能还会消耗大量不必要的能量。

```
 $('#e_1').change(function(){
       $('#e_1_div').toggle();
    });

    $('#e_2').change(function(){
       $('#e_2_div').toggle();
    }); 
```

所以我的问题是：我从哪里开始？我在哪里可以了解更多关于为这样的东西创建可重用函数的信息？或者，如果您真的想宠坏我，有什么可能的解决方案或提示？

谢谢你的时间，德拉甘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:59:17.193

您可以通过动态构造选择器来一次定位所有元素：

```
$('input[id^="e_"]').change(function() {
    $('#' + this.id + '_div').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:03:58.280

试试这个..这样你就可以动态触发它

```
$("input:checkbox").change(function(){
  $(this).next('div').toggle();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:25:13.200

请在下面找到简单的 jquery 脚本，它会做必要的

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Toggle Checkbox</title>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){

    $(".hiders").change(function(){
        var currentId = $(this).attr('id');
        var divId = currentId+"_div";
        $("#"+divId).toggle();
    });

});
</script>

</head>

<body>

<input id="e_1" class="hiders" type="checkbox" /><label for="e_1">Hide Element 1</label>

<input id="e_2" class="hiders" type="checkbox" /><label for="e_2">Hide Element 2</label>

<div id="e_1_div">element - 1</div>

<div id="e_2_div">element - 2</div>

</body>
</html> 
```

# c# - C# 在事件开始时，开始另一个事件

> ID：12688173
> 
> 赞同：1
> 
> 时间：2012-10-02T09:56:59.783
> 
> 标签：c#, events

我想如果单击图片以启动按钮单击事件。但是怎么做？ButtonPlus 通过每次点击 +1 来获得收益，如果达到 5/10……它会激活另一个图像。

为了通过点击加号按钮增加浪费时间，我想单击图像，例如第一个（获取值 5）并执行 button_click 代码。

我想通过将 ButtonPlus 值设置为 4，并将其转发到 button_click 事件的值 5，然后进行切换。

```
private void button1_Click(object sender, EventArgs e)
    {
        if (MaxPunkte > 0)
        {

            if (ButtonPlus1 < 30)
            {
                ButtonPlus1 += 1;
                MaxPunkte += -1;
                LabelAnzeige1 = ButtonPlus1;

                label1.Text = LabelAnzeige1.ToString();
                label5.Text = MaxPunkte.ToString();
                label7.Text = (LabelAnzeige1 * 10).ToString();
                label8.Text = label7.Text;
                #region Switch
                switch (ButtonPlus1)
                {
                    case 5:

                        pictureBox1.Image = TraitCalc.Resources.HexagonSmall_5_active;
                        break;

                    case 10:
                        pictureBox2.Image = TraitCalc.Resources.HexagonBig_10_active_empty;
                        break;

                    case 15:

                        pictureBox3.Image = TraitCalc.Resources.HexagonSmall_15_active;
                        break;

                    case 20:
                        pictureBox4.Image = TraitCalc.Resources.HexagonBig_20_active_empty;
                        break;

                    case 25:

                        pictureBox5.Image = TraitCalc.Resources.HexagonSmall_25_active;
                        break;

                    case 30:
                        pictureBox6.Image = TraitCalc.Resources.HexagonBig_30_active_empty;
                        break;

                }
                #endregion

            }
        }

    }

private void pictureBox1_Click(object sender, EventArgs e)
    {
        ButtonPlus1 = 4;
        //and start button click event (adds +1 = 5 -> go to switch case 1)

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:59:27.457

*   将按钮点击代码移动到单独的方法中
*   从按钮单击事件中调用此方法
*   也可以从图片点击事件中调用

`button1_Click`（或者你可以像任何其他方法一样直接调用。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:00:02.387

为什么不直接调用按钮处理程序？

```
private void pictureBox1_Click(object sender, EventArgs e)
{
    ButtonPlus1 = 4;
    //and start button click event (adds +1 = 5 -> go to switch case 1)
    button1_Click(null, null); // or whatever arguments you need, 
                               // but you were not using them.
} 
```

# java - gwt中的远程服务执行两次

> ID：12688177
> 
> 赞同：5
> 
> 时间：2012-10-02T09:57:26.317
> 
> 标签：java, gwt, gwt-rpc

我正在使用 GWT 调用服务。

在客户端，我只调用了一次方法，但在服务器端，服务中的方法被调用了两次。

我在 Firefox 中使用 GWT-Tools 调试了客户端；当我调用一次该方法时，服务器中有两次执行。参数中的数据相同，但在两个不同的线程中。

我在同一个应用程序中有更多调用，但问题仅在于那个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-10T21:55:53.187

许多带有大量参数的并行调用和一些子调用也有同样的问题。

有些调用偶尔会执行两次。来自客户端的参数和调用是正确的，问题出在服务器端。没有出现较少的子调用/参数问题。

当客户端上的所有调用都链接到单个序列而没有其他更改时，问题似乎消失了。即下一个调用是在前一个调用及其所有子调用完全完成时执行的（大量嵌套的 OnSucess 而不是后续调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-17T08:12:22.123

我遇到了同样的问题，就我而言，我发现要添加侦听器的组件已经注册了两次，这两个侦听器做了同样的事情——调用相同的 RPC 方法。

这就是为什么它在我调试客户端代码时调用一次 RPC 方法，但在服务器端调用两次，因为另一个调用来自另一个侦听器。

# asp.net - 如何创建具有行为的模板化复合控件

> ID：12688183
> 
> 赞同：1
> 
> 时间：2012-10-02T09:57:34.810
> 
> 标签：asp.net, controltemplate, composite-controls

我正在尝试创建一个模板化复合控件，它的工作方式与 ASP.Net 的“PasswordRecovery”控件类似。

我的意思是，用户可以定义自己的模板，但是通过使用预定义的控件 ID，它定义了哪个字段，比如电子邮件地址，以及哪个按钮是发送电子邮件的按钮。

我试图查看模板化 Web 服务器控件的文档，但找不到任何关于向这些控件添加行为的内容。

或者，有没有办法完全改变 PasswordRecovery 的行为？我想发送一封带有一次性 URL 的电子邮件来更改密码，而不是该控件的常见行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T18:33:30.627

我回答了一个相关的问题：

[https://stackoverflow.com/a/11700540/1268570](https://stackoverflow.com/a/11700540/1268570)

但在这个答案中，我会更深入。

我将发布一个带有设计支持和自定义行为的模板化服务器控件：

### 容器代码

```
[ToolboxItem(false)]
public class TemplatedServerAddressContainer : WebControl, INamingContainer
{
    public string Address { get; protected set; }

    public TemplatedServerAddressContainer(string address)
    {
        this.Address = address;
    }
} 
```

*   上述控件将负责将您要**发送到控件的数据保留为 OUTPUT**。这将是您将在其中实例化模板的控件

### 服务器控制

```
[DefaultProperty("Address")]
[ToolboxItem(true)]
[ToolboxData("<{0}:TemplatedServerAddressControl runate=server></{0}:TemplatedServerAddressControl>")]
[Designer(typeof(TemplatedServerAddressDesigner))]
//[ToolboxBitmap(typeof(TemplatedServerAddressControl), "")]
[Description("My templated server control")]
[ParseChildren(true)]
public class TemplatedServerAddressControl : WebControl
{
    private TemplatedServerAddressContainer addressContainer;

    [Bindable(true)]
    [Localizable(true)]
    [DefaultValue(null)]
    [Description("The custom address")]
    [Category("Apperance")]
    [Browsable(true)]
    public string Address
    {
        get
        {
            return (this.ViewState["Address"] ?? string.Empty).ToString();
        }
        set
        {
            this.ViewState["Address"] = value;
        }
    }

    [Browsable(false)]
    [DefaultValue(null)]
    [Description("Address template")]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    [TemplateContainer(typeof(TemplatedServerAddressContainer))]
    [TemplateInstance(TemplateInstance.Multiple)]
    public ITemplate AddressTemplate { get; set; }

    [Browsable(false)]
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    public TemplatedServerAddressContainer AddressContainer
    {
        get
        {
            this.EnsureChildControls();

            return this.addressContainer;
        }
        internal set
        {
            this.addressContainer = value;
        }
    }

    public override ControlCollection Controls
    {
        get
        {
            this.EnsureChildControls();

            return base.Controls;
        }
    }

    public override void DataBind()
    {
        this.CreateChildControls();
        this.ChildControlsCreated = true;

        base.DataBind();
    }

    protected override void CreateChildControls()
    {
        this.Controls.Clear();

        if (this.AddressTemplate != null)
        {
            this.addressContainer = new TemplatedServerAddressContainer(this.Address);

            this.AddressTemplate.InstantiateIn(this.addressContainer);
            this.Controls.Add(this.addressContainer);
        }
    }

    protected override bool OnBubbleEvent(object source, EventArgs args)
    {
        if (args is CommandEventArgs)
        {
            var commandArgs = args as CommandEventArgs;

            switch (commandArgs.CommandName)
            {
                case "DoSomething":
                    // place here your custom logic
                    this.Page.Response.Write("Command bubbled");
                    return true;
            }
        }

        return base.OnBubbleEvent(source, args);
    }
} 
```

*   该`public string Address`属性用作**控制 INPUT**，您可以创建执行任务所需的所有输入属性。

*   `public ITemplate AddressTemplate { get; set; }`这代表您的控件的模板。您为此属性指定的名称将是页面标记中用作模板名称的名称

*   `public TemplatedServerAddressContainer AddressContainer`此属性仅用于设计人员支持

*   为了正确创建子控件，您需要覆盖以下方法和属性`Controls`：`DataBind`和`CreateChildControls`

*   覆盖`OnBubbleEvent`，您将能够对来自控件的特定事件做出反应。

### 设计师支持

```
public class TemplatedServerAddressDesigner : ControlDesigner
{
    private TemplatedServerAddressControl controlInstance;

    public override void Initialize(IComponent component)
    {
        this.controlInstance = (TemplatedServerAddressControl)component;

        base.Initialize(component);
    }

    public override string GetDesignTimeHtml()
    {
        var sw = new StringWriter();
        var htmlWriter = new HtmlTextWriter(sw);
        var controlTemplate = this.controlInstance.AddressTemplate;

        if (controlTemplate != null)
        {
            this.controlInstance.AddressContainer = new TemplatedServerAddressContainer(
                this.controlInstance.Address
                );
            controlTemplate.InstantiateIn(this.controlInstance.AddressContainer);

            this.controlInstance.DataBind();

            this.controlInstance.RenderControl(htmlWriter);
        }

        return sw.ToString();
    }
} 
```

### ASPX 标记

```
<%@ Register Assembly="Msts" Namespace="Msts.Topics.Chapter07___Server_Controls.Lesson02___Server_Controls" TagPrefix="address" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <address:TemplatedServerAddressControl runat="server" ID="addressControl1">
        <AddressTemplate>
            <b>
                Address:
            </b>
            <u>
                <asp:Literal Text="<%# Container.Address %>" runat="server" />
            </u>
            <asp:Button Text="text" runat="server" OnClick="Unnamed_Click" ID="myButton" />
            <br />
            <asp:Button Text="Command bubbled" runat="server" CommandName="DoSomething" OnClick="Unnamed2_Click1" />
        </AddressTemplate>
    </address:TemplatedServerAddressControl>
</asp:Content> 
```

### ASPX 代码背后

```
public partial class TemplatedServerAddress : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        this.addressControl1.Address = "Super Cool";
        this.DataBind();
    }

    protected void Unnamed_Click(object sender, EventArgs e)
    {
        this.Response.Write("From custom button" + DateTime.Now.ToString());
    }

    protected void Unnamed2_Click1(object sender, EventArgs e)
    {
        this.Response.Write("From command button " + DateTime.Now.ToString());
    }
} 
```

*   请注意如何在正确的事件中设置控件的属性而不会出现问题：`this.addressControl1.Address = "Super Cool";`

*   注意您的控件如何处理自定义事件`this.Response.Write("From custom button" + DateTime.Now.ToString());`

*   最后，要向您的控件指示您*想要执行某项*操作，只需使用您的控件公开的命令名称创建一个按钮，如下所示：`<asp:Button Text="Command bubbled" runat="server" CommandName="DoSomething" OnClick="Unnamed2_Click1" />`可选地，您的按钮可以包含一个事件处理程序，该处理程序将在事件冒泡之前进行处理。

[我将此代码示例上传到我的 GitHub 以供参考](https://github.com/jupaol/LearningProjects/tree/master/VS%202012/src/WebForms/MSTS%2070-515/Msts/Topics/Chapter07%20-%20Server%20Controls/Lesson02%20-%20Server%20Controls)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:59:15.003

模板化的用户控件（与模板化的服务器控件相反）怎么样。

这里有一个关于模板化用户控件的 MSDN 教程：http: [//msdn.microsoft.com/en-us/library/36574bf6 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/36574bf6(v=vs.100).aspx)

如果您想要预定义的 ID，那么您可以使用该`FindControl()`方法从模板中提取控件，然后附加您需要的任何点击事件等。

例如

```
protected void Page_Init(object sender, EventArgs e)
{
  // if a message template has been defined, check for the reset button
  if(MessageTemplate != null)
  {
    // attempt to grab the reset password button
    Button btnResetPassword = MessageTemplate.FindControl("btnResetPassword ") as Button;

    // if the reset password button has been declared, attach the click event             
    if(btnResetPassword != null)
      btnResetPassword .Click += btnResetPassword_Click;  // attach click event
  }
}

protected void btnResetPassword_Click(object sender, EventArgs e)
{
  // reset password behaviour here
} 
```

上面的代码没有完成/测试，只是为了说明我的意思。不知道这是否是你的意思？

# c# - 在 PowerPoint 加载项中访问幻灯片对象

> ID：12688188
> 
> 赞同：4
> 
> 时间：2012-10-02T09:57:45.803
> 
> 标签：c#, powerpoint

我正在为 PowerPoint 构建一个加载项，需要访问 Slides 或 Slide 对象，甚至是整个演示文稿；唉，我能看到的唯一方法是打开一个*新*的ppt 文件。现在我不得不求助于保存当前演示文稿并使用 Packaging 重新打开它以操作任何东西的 hacky 方法（更具体地说，我必须对 pptx 文件中的 Slide 对象进行 SHA 以查看它们是否已更改 -不理想）

有什么方法可以打开当前在 PowerPoint 中打开的文件，而无需 IO 文件？

谢谢你的帮助，P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:32:35.450

我假设您已经在 VisualStudio 中创建了一个 PowerPoint (2007/2010) 加载项项目。通常，您可以通过以下方式使用静态类访问活动演示文稿`Globals`：

```
Globals.ThisAddIn.Application.ActivePresentation.Slides[slideIndex] ... 
```

编辑：用法示例：

```
using PowerPoint = Microsoft.Office.Interop.PowerPoint;

...

try
{
    int numberOfSlides = Globals.ThisAddIn
        .Application.ActivePresentation.Slides.Count;

    if (numberOfSlides > 0)
    {
        // get first slide
        PowerPoint.Slide firstSlide = Globals.ThisAddIn
            .Application.ActivePresentation.Slides[0];

        // get first shape (object) in the slide
        int shapeCount = firstSlide.Shapes.Count;

        if (shapeCount > 0)
        {
            PowerPoint.Shape firstShape = firstSlide.Shapes[0];
        }

        // add a label
        PowerPoint.Shape label = firstSlide.Shapes.AddLabel(
                Orientation: Microsoft.Office.Core
                   .MsoTextOrientation.msoTextOrientationHorizontal,
                Left: 100,
                Top: 100,
                Width: 200,
                Height: 100);

        // write hello world with a slidenumber
        label.TextFrame.TextRange.Text = "Hello World! Page: ";
        label.TextFrame.TextRange.InsertSlideNumber();
    }
}
catch (Exception ex)
{
    System.Windows.Forms.MessageBox.Show("Error: " + ex);

} 
```

# php - 将数据从数据库发布到网页

> ID：12688190
> 
> 赞同：-1
> 
> 时间：2012-10-02T09:57:50.377
> 
> 标签：php, database, cakephp

我目前正在尝试弄清楚如何从数据库中调用数据并将其作为内容发布在网页上。例如，我将文本输入到数据库表中，然后将其作为网页上的内容呈现，CSS 样式的文本和布局。我这样做的原因是因为我正在尝试集成 TinyMCE 来编辑网页的文本内容。- 管理员将能够登录 - 单击编辑页面内容选择他们希望编辑的页面 - 被带到一个页面，来自数据库的内容数据将以可编辑的形式出现在该页面上，由 tinyMCE

我正在使用 cakePHP 我曾尝试使用一些 mysql 脚本进行回声调用，但通常它不会为我提供原始内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:08:41.093

你真的应该看看这个...

[CakePHP 入门](http://book.cakephp.org/2.0/en/getting-started.html)

# r - 使用不同颜色在绘图上绘制图例

> ID：12688193
> 
> 赞同：1
> 
> 时间：2012-10-02T09:57:54.400
> 
> 标签：r, legend

```
x <- matrix(seq(1,10,by=0.1),ncol=5,nrow=5)
colnames(x) <- letters[1:5]
rownames(x) <- letters[6:10]
plot(hclust(t(dist(x)))) 
```

![在此处输入图像描述](../Images/4eb1750b7446b6a7eec20ed7e2002660.png)

我有一个数据框：

```
df <- data.frame(Rows = letters[6:10],value=c("L","L","L","L","N"))
df
  Rows value
1    f     L
2    g     L
3    h     L
4    i     L
5    j     N 
```

我想在 x 轴下方的上图中绘制一个彩色图例。像 rowname f 的值 L 一样，因此在图中它下面的部分图例应该被着色为“红色”，同样，h、i、g 和但图中 j 标签下面的图例应该有“蓝色”。

它应该看起来像这样：

![在此处输入图像描述](../Images/d3c680fa56fca6652c7cc9c6b5591f81.png)

我尝试使用 image.plot 但没有得到想要的结果。有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:46:54.590

终于找到了解决这个问题的方法：可以使用`text`函数绘制结果图

```
df <- data.frame(Rows = letters[6:10],value=c("L","L","L","L","N"))
x <- matrix(seq(1,10,by=0.1),ncol=5,nrow=5)
colnames(x) <- letters[1:5]
rownames(x) <- letters[6:10]
plot(hclust(t(dist(x))))
axis(1,at=seq(1,length(rownames(x)),1),labels=FALSE)
text(seq(1,length(rownames(x)),1),labels="\u2594",col=c(rep("red",2),"blue",rep("red",2)),cex=25,par("usr")[3]+0.005)
legend("topright",legend=c("L","N"),col=c("red","blue")) 
```

unicode "\u2594" 在文本中用于创建框图像。

# sql-server - 在 SQL Server 2012 中使用 TransactionScope

> ID：12688197
> 
> 赞同：2
> 
> 时间：2012-10-02T09:58:15.867
> 
> 标签：sql-server, transactionscope, sql-server-2012, msdtc

我读过 Pieter De Rycke 的这篇出色的文章：

[http://pieterderycke.wordpress.com/2012/01/22/transactionscope-transaction-escalation-behavior/](http://pieterderycke.wordpress.com/2012/01/22/transactionscope-transaction-escalation-behavior/)

我尝试在 Internet 上搜索有关 SQL Server 2012 中事务升级行为的文档，但没有成功。

有谁知道 SQL Server 2012 的行为是否与 SQL2008 不同？我目前在 TransactionScope 和升级到 DTC 方面遇到问题（我不想要）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:18:33.813

我刚刚尝试了在 SQL Server 2012 (EXPRESS) 中升级到分布式事务的行为。而且我观察到与 SQL Server 2008 相同的行为。

我已经在非常简单的带有`SqlConnection`对象的代码上对其进行了测试。在一个事务范围内总是有两个数据库访问 (INSERT)。

**非嵌套连接 - 未升级**

*如果您想避免升级为 DTC，这是唯一的选择。在事务期间仅访问一个持久资源（数据库）并在打开另一个连接之前关闭一个连接。（最终，您可以通过重用相同的连接来避免 DT，但是当您使用连接池时没有必要这样做，并且可能会使您的代码可读性降低。）*

```
static string connectionString = "data source=.\\;Integrated Security=SSPI;Database=TestDB";

static void Main(string[] args)
{
    using (var scope = new TransactionScope())
    {
        using (var conn = new SqlConnection(connectionString))
        {
            conn.Open();
            using (var command = conn.CreateCommand())
            {
                command.CommandType = CommandType.Text;
                command.CommandText = "INSERT INTO TestTable(Value) VALUES (@1)";
                command.Parameters.Add(new SqlParameter("1", "123456"));
                command.ExecuteNonQuery();
            }
        }
        using (var conn2 = new SqlConnection(connectionString))
        {
            conn2.Open();
            using (var command2 = conn2.CreateCommand())
            {
                command2.CommandType = CommandType.Text;
                command2.CommandText = "INSERT INTO TestTable(Value) VALUES (@1)";
                command2.Parameters.Add(new SqlParameter("1", "123456"));
                command2.ExecuteNonQuery();
            }
        }
        scope.Complete();
    }
} 
```

**嵌套连接 - 升级**

```
static string connectionString = "data source=.\\;Integrated Security=SSPI;Database=TestDB";

static void Main(string[] args)
{
    using (var scope = new TransactionScope())
    {
        using (var conn = new SqlConnection(connectionString))
        {
            conn.Open();
            // EXECUTE INSERT
            using (var conn2 = new SqlConnection(connectionString))
            {
                conn2.Open();
                // EXECUTE INSERT 
            }
        }                
        scope.Complete();
    }
} 
```

**访问不同数据库的非嵌套连接 - 升级**

*如果您在事务期间访问两个或更多持久资源，它将始终被提升为 DTC。*

```
static string connectionString = "data source=.\\;Integrated Security=SSPI;Database=TestDB";
static string connectionString2 = "data source=.\\;Integrated Security=SSPI;Database=TestDB2";

static void Main(string[] args)
{
    using (var scope = new TransactionScope())
    {
        using (var conn = new SqlConnection(connectionString))
        {
            conn.Open();
            // EXECUTE INSERT
        }
        using (var conn2 = new SqlConnection(connectionString2))
        {
            conn2.Open();
            // EXECUTE INSERT 
        }
        scope.Complete();
    }
} 
```

**注意** 您将执行哪种 CRUD 操作并不重要，它始终取决于打开和关闭连接的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T08:18:37.920

In @mipe34's third case (different databases on the same server), there's actually a way to prevent DTC escalation by using `DbConnection.ChangeDatabase()`:

```
static string connectionString = "data source=.\\;Integrated Security=SSPI;Database=TestDB";
static string db2 = "TestDB2";

static void Main(string[] args)
{
    using (var scope = new TransactionScope())
    {
        using (var conn = new SqlConnection(connectionString))
        {
            conn.Open();
            // EXECUTE INSERT
        }
        using (var conn2 = new SqlConnection(connectionString))
        {
            conn2.Open();
            conn2.ChangeDatabase(db2);
            // EXECUTE INSERT 
        }
        scope.Complete();
    }
} 
```

Just make sure that you never `Open()` a connection, while another one is still open. In that case you will get escalation.

# asp.net-mvc - MVC：无法查看我的错误页面

> ID：12688198
> 
> 赞同：2
> 
> 时间：2012-10-02T09:58:16.753
> 
> 标签：asp.net-mvc

我在我的 MVC 应用程序中设置了 ELMAH，如果抛出异常，我想显示一个友好的屏幕。但是我仍然得到 YSOD。所以在我的 web.config 中我有（我也尝试了其他模式但没有成功）。我的错误控制器有命名空间 ITOF.Controllers { using System.Net; 使用 System.Web.Mvc；

```
public class ErrorController : Controller
{
    [AcceptVerbs(HttpVerbs.Get)]
    public ViewResult Unknown()
    {
        Response.StatusCode = (int)HttpStatusCode.InternalServerError;
        return View("Unknown");
    }

    [AcceptVerbs(HttpVerbs.Get)]
    public ViewResult NotFound(string path)
    {
        Response.StatusCode = (int)HttpStatusCode.NotFound;
        return View("NotFound", path);
    }
} 
```

}

这些方法在 mode="On" 时被调用

但是，然后我得到一个运行时错误 YSOD，它告诉我更改我的 web.config customError mode="RemoteOnly"

也许我的视图中有错误？

他们来了;

未知的.cshtml；

```
@{
    ViewBag.Title = "Error";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Sorry, an error occurred while processing your request.</h2> 
```

未找到.cshtml；

```
@{
    ViewBag.Title = "Not Found";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Lost?</h2>

    <p>Sorry - your request doesn't exist or was deleted.</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:03:03.423

在您的`NotFound`操作中，您应该返回：

```
return View("NotFound", (object)path); 
```

请注意我如何将第二个参数转换为对象，以便使用正确的方法重载。否则，您将调用第二个参数表示母版页名称的重载。

# css - 固定引导布局不响应响应

> ID：12688200
> 
> 赞同：0
> 
> 时间：2012-10-02T09:58:19.853
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap, responsive-design

我有一个使用引导程序的 rails 应用程序，我想使用固定的网格布局。

我对此的理解是，固定布局不会拉伸到浏览器页面的完整大小，而是将自身限制在 940 像素宽的标记处。但是，如果页面尺寸减小，固定的“容器”将调整大小以最适合浏览器。

据我所知，我已经正确地遵循了文档，包括了所有应该的文件，但我的固定容器不会随浏览器缩小，它仍然是“固定的”，有人知道为什么吗？

如果有人需要更多代码，请询问。

编码：

Home.html.erb 使用 2 行

```
 <div class="row">
                <div class="span8">
                <%= render template: "static_pages/winner" %>
                <%= render partial: "static_pages/social_quarter" %>
            </div>

            <div class="span4">
                <%= render partial: "static_pages/nominations_home" %>
            </div>
            </div> 
```

我正在使用“容器”将网站的主要内容包装在

```
<div class="container">
<%= yield %>
</div> 
```

我在应用程序中包含了以下文件，以及 assets css 目录中的 bootstrap-responsive.css 和这两行来加载响应式样式表和视口。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

应用程序.css

```
 *= require_self
 *= require_tree .
 *= require_bootstrap 
```

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require bootstrap 
//= require_tree . 
```

Bootstrap_overides_and_css

```
@import "twitter/bootstrap/bootstrap";

body { padding-top: 50px }

@import "twitter/bootstrap/responsive"; 
```

文档指出 CSS 元素应该堆叠而不是浮动，我有这个在大多数页面上使用的 div，删除 float 属性并不能解决它。

```
.article-box {

    float: inherit;
    max-width: auto;
    padding: 20px;
    margin-bottom: 20px;
    margin-right: auto;
    margin-left: auto;
    margin-top: 10px;
    -moz-box-shadow: 0 0 1px 1px #888;
    -webkit-box-shadow: 0 0 1px 1px #888;
    box-shadow: 0 0 1px 1px #888;
    background-color: #ffffff;

    .large {
        font-size: 30px;
        font-weight: bold;
        line-height: 30px;
    }

    img {   
        max-width: 100%;
        align: left;
    }
} 
```

html源码

```
<link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap-responsive.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap_and_overrides.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/custom.css?body=1" media="all" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-transition.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-alert.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-modal.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tab.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-popover.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-button.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-affix.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/comment.js?body=1" type="text/javascript"></script>
<script src="/assets/dropdown_toggle.js?body=1" type="text/javascript"></script>
<script src="/assets/modal.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
  <meta content="authenticity_token" name="csrf-param" />
<meta content="fc+nZpTjUYkpgqZJ9wVdru1vI/9nhUceJXc6DrNWu9g=" name="csrf-token" />
<meta name="google-site-verification" content="WOjLVAdH_q5FxvYyAnjnVw-jC17kDxd6nc4NhlxdZe0" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

# javascript - 使用 javascript 打开文件

> ID：12688201
> 
> 赞同：-6
> 
> 时间：2012-10-02T09:58:21.427
> 
> 标签：javascript, file-handling

是否有任何预定义的功能或任何方法可以使用 javascript 打开网站 url？就像我们在 php 中所做的那样：

```
file_get_contents(); 
```

如何使用 javascript 打开链接？不使用 AJAX 或 JQuery 或 Flash

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:05:08.000

不，JS 无法在一定程度上不使用 AJAX 异步加载内容。毕竟，异步加载或多或少是 AJAX 的重点。

就个人而言，我会说你应该接受使用 JQuery，虽然它不是解决所有生活问题的完美解决方案，但当涉及到这样的 AJAX 请求时，它确实可以完成工作。

**编辑**

尽管如此，您可能只是希望模拟点击链接的使用......但这完全是一个不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:09:14.057

最简单的方法是：

```
window.location = "url to your document"; 
```

并确保服务器添加这样的标头：

```
'Content-Disposition: attachment; filename="downloaded.pdf"' 
```

# html-email - 从 C# 发送带有 html 的电子邮件显示额外的空格

> ID：12688203
> 
> 赞同：0
> 
> 时间：2012-10-02T09:58:29.613
> 
> 标签：html-email

我正在尝试从我的程序中发送一封带有 MailDefinition 类的电子邮件。当我嵌入一些简单的 html 时它工作正常。我的代码如下：

```
 MailDefinition md = new MailDefinition();
        md.From = "me";
        md.IsBodyHtml = true;
        md.Subject = "Test of MailDefinition";

        string body = System.IO.File.ReadAllText(@"C:\my.html");

        MailMessage msg = md.CreateMailMessage("me@gmail.com", replacements, body, new System.Web.UI.Control());
        NetworkCredential loginInfo = new NetworkCredential("me.mail", "password");
        SmtpClient smtp = new SmtpClient("smtp.gmail.com", 587);
        smtp.EnableSsl = true;
        smtp.UseDefaultCredentials = false;
        smtp.Credentials = loginInfo;
        smtp.Send(msg); 
```

就像我说的，这似乎工作正常。但是，当我尝试发送在浏览器中看起来不错的更复杂的 html 时，我得到了一些不同的外观。我的html：

```
 <body>
<table cellspacing="0" cellpadding="0" style="width: 640px;">
    <tr>
    <td colspan="3"><img src=srctop.png /></td>
    </tr>
    <tr>
    <td colspan="3"><img src=srcbellowtop.png /></td>
    </tr>
<tr>
    <td><img src=srcleft.png /></td>
    <td valign="top"><p>Lorem ipsum</p>
    </td>
    <td><img align="right" src=srcright.png style="height:675px;"/></td>
</tr>
<tr>
<td colspan=3><img src=srccontinuous.png /></td>
</tr>
<tr>
<td colspan=3><img src=srcfooter.png /></td>
</tr>
</table>
 </body> 
```

问题是在这封电子邮件中，我在顶部图片和下面的图片之间有一个空白。bellowtop 和左右图片之间也有空格。实际上所有图像之间都有空白：S

任何想法是什么原因造成的以及如何解决它？

链接：在 gmail中[http://shrani.si/f/22/OJ/1kNF0emE/ingmail.png](http://shrani.si/f/22/OJ/1kNF0emE/ingmail.png) 在浏览器中[http://shrani.si/f/20/Eu/3PrPlUnw/inbrowser.png](http://shrani.si/f/20/Eu/3PrPlUnw/inbrowser.png)

浏览器中的排除元素：

```
table[Attributes Style] {
border-top-width: 0px;
border-right-width: 0px;
border-bottom-width: 0px;
border-left-width: 0px;
border-spacing: 0px;
}
user agent stylesheettable {
white-space: normal;
line-height: normal;
font-weight: normal;
font-size: medium;
font-variant: normal;
font-style: normal;
color: -webkit-text;
text-align: -webkit-auto;
}
user agent stylesheettable {
display: table;
border-collapse: separate;
border-spacing: 2px;
border-color: gray;
} 
```

在 gmail 中：

```
element.style {
width: 640px;
}
Matched CSS Rules
table[Attributes Style] {
border-top-width: 0px;
border-right-width: 0px;
border-bottom-width: 0px;
border-left-width: 0px;
border-spacing: 0px;
}
user agent stylesheettable {
display: table;
border-collapse: separate;
border-spacing: 2px;
border-color: gray;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:25:34.757

正如您已经澄清 Gmail 中发生的问题一样，您可以做的最好的事情是使用您计划支持的各种浏览器的相关开发人员工具检查应用于电子邮件的 HTML/CSS，例如

IE -[如何使用 F12 开发者工具来调试你的网页](http://msdn.microsoft.com/en-us/library/ie/gg589507%28v=vs.85%29.aspx)

Chrome - [Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/docs/overview)

火狐——[萤火虫](http://getfirebug.com/)

这将允许您缩小问题范围并确定它是您自己的样式还是浏览器/客户端添加的样式。

**更新**

`inline-block`查看您的来源，问题似乎是您的图像被浏览器视为，将它们设置为`display: block`应该可以解决此问题。

# sql - SQL：查找列值匹配的行之间的差异

> ID：12688205
> 
> 赞同：3
> 
> 时间：2012-10-02T09:58:41.560
> 
> 标签：sql, sql-server, sql-server-2008

抱歉，如果我的标题没有正确描述我要执行的任务。

对于一个大学项目，我收到了一个网站的访问日志，我把不需要的栏目去掉了，浓缩成这样：

```
╔══════════╦══════════════════════╦═════════════════╦═════════════╦════════════════╗
║ accessid ║ date_time_in_seconds ║ yg_requester_id ║ referent_id ║ referent_docid ║
╠══════════╬══════════════════════╬═════════════════╬═════════════╬════════════════╣
║     2449 ║        2009011621830 ║           32276 ║       12648 ║              1 ║
║     2776 ║        2009011622726 ║           76360 ║       11070 ║              1 ║
║     2804 ║        2009011622783 ║           32276 ║       13845 ║              1 ║
║     2894 ║        2009011623025 ║           32276 ║        7222 ║              1 ║
║     2895 ║        2009011623037 ║           32276 ║        1530 ║              1 ║
║     3000 ║        2009011623406 ║           32276 ║        3728 ║              1 ║
║     3019 ║        2009011623497 ║          520060 ║       10356 ║              1 ║
║     3245 ║        2009011625780 ║          300841 ║        4607 ║              1 ║
║     3274 ║        2009011628309 ║          532664 ║       14377 ║              1 ║
║     3275 ║        2009011628420 ║          532664 ║        9097 ║              1 ║
╚══════════╩══════════════════════╩═════════════════╩═════════════╩════════════════╝ 
```

最初，时间和日期戳在每个测量单位（年、月、日、小时、分钟、秒）的单独列中，为了便于计算，我将它们合并为具有格式的 date_time_in_seconds

```
[0000][00][00][00000]
[YEAR][MONTH][DAY][Number of Seconds since 00:00] 
```

accessid 是表条目 ID，yg_requester_id 是网站访问者的唯一 ID，referent_id 是他们阅读的网站文章的 ID，referent_docid 表示文章的类型，但在此任务中不需要。

基本上，我希望能够找到自最后一个不同的 referent_id 被同一个 yg_requester_id 访问以来的时间差。例如，查看上表中的这一部分行：

```
╔══════════╦══════════════════════╦═════════════════╦═════════════╦════════════════╗
║ accessid ║ date_time_in_seconds ║ yg_requester_id ║ referent_id ║ referent_docid ║
╠══════════╬══════════════════════╬═════════════════╬═════════════╬════════════════╣
║     2449 ║        2009011621830 ║           32276 ║       12648 ║              1 ║
║     2776 ║        2009011622726 ║           76360 ║       11070 ║              1 ║
║     2804 ║        2009011622783 ║           32276 ║       13845 ║              1 ║
╚══════════╩══════════════════════╩═════════════════╩═════════════╩════════════════╝ 
```

yg_requester_id 32276在2009 年 1 月 16 日***06:03:50***（午夜后*21830*秒）访问了 id为**12648的文章。然后他们在 16 日*****06:19:43***（午夜后*22783*秒）访问了 id为**13845**的文章2009 年 1 月。因此可以安全地假设用户阅读了第一篇文章（id **12648**）大约 15 分 50 秒

 *******我想找到的是同一用户访问的文章之间的时间差。用户连续阅读的文章可能没有连续的 accessid（尽管它总是会增加）。我还想将读取时间限制为大约一个小时，因为任务是过滤掉读取时间*低于*可变分钟数（例如 15 分钟）的记录。

提前致谢，如果需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:40:01.040

我将使用 ROW_NUMBER 按 yg_requester_id 对结果集进行分区，并按 accessid 或 datetime 对其进行排序（假设您要将 date_time_in_seconds 列更改为常规的 datetime 列，如评论中所建议的那样。然后我将由请求者和到以前的记录，并得到差异。

让我尝试在没有正确数据的情况下编写查询：

```
SELECT X1.yg_requester_id, DATEDIFF(SECOND, X1.NewDateTimeField, X2.NewDateTimeField) AS TimeDifferenceInSeconds, X1.referent_id AS NewArticle, X2.referent_id AS FormerArticle
FROM
(
SELECT ROW_NUMBER() OVER(PARTITION BY yg_requester_id ORDER BY NewDateTimeField DESC) AS Position, NewDateTimeField, yg_requester_id, referent_id
FROM YourTable

) X1
INNER JOIN 
(
SELECT ROW_NUMBER() OVER(PARTITION BY yg_requester_id ORDER BY NewDateTimeField DESC) AS Position, NewDateTimeField, yg_requester_id, referent_id
FROM YourTable  
) X2 ON X2.yg_requester_id = X1.yg_requester_id AND X2.Position = X1.Position - 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:03:18.593

此查询应检索请求者、所指对象以及请求者在所指对象上所采用的时间差（以秒为单位）：

```
select abc.A_requestor as requestor_id,abc.B_refer as referent_id,abc.A_datetime-abc.B_datetime as time_difference   from 
(select a.accessid as A_accessid ,b.accessid as B_accessid,
a.yg_requestor_id as A_requestor,a.date_time_in_seconds as A_datetime,a.referent_id as A_refer,
b.yg_requestor_id as B_requestor,b.date_time_in_seconds as B_datetime,b.referent_id as B_refer
from weblog a
inner join weblog b
on a.yg_requestor_id = b.yg_requestor_id
and a.date_time_in_seconds > b.date_time_in_seconds
and a.referent_id != b.referent_id) abc

inner join 

(select cte.B_accessid,min(cte.A_accessid) as C_accessid from
(select a.accessid as A_accessid ,b.accessid as B_accessid,
a.yg_requestor_id as A_requestor,a.date_time_in_seconds as A_datetime,a.referent_id as A_refer,
b.yg_requestor_id as B_requestor,b.date_time_in_seconds as B_datetime,b.referent_id as B_refer
from weblog a
inner join weblog b
on a.yg_requestor_id = b.yg_requestor_id
and a.date_time_in_seconds > b.date_time_in_seconds
and a.referent_id != b.referent_id) cte 
group by cte.B_accessid ) xyz

on xyz.B_accessid = abc.B_accessid and xyz.C_accessid = abc.A_accessid 
```*******

# php - 如何通过 PHP 执行“git push”？

> ID：12688209
> 
> 赞同：1
> 
> 时间：2012-10-02T09:58:52.950
> 
> 标签：php, wordpress, git, git-push

每次我的客户更新他们的 Wordpress 插件或核心时，我都会尝试创建一个 git 提交并将其推送到远程仓库。我已成功连接到正确的过滤器，因此我可以在更新完成后执行 php 代码，我什至可以创建一个提交，但我没有运气推送到远程。

我正在使用以下代码：

```
system ( 'cd '.ABSPATH.'; git add -A;' );
system ( 'cd '.ABSPATH.'; git commit -a -m "Updated plugins via WP";' );
system ( 'cd '.ABSPATH.'; echo `git push`;' ); 
```

前 2 行效果很好！它们也产生输出。但是，第 3 行不起作用。并且没有产出。当我检查我的仓库时，更改尚未推送到远程。当我`git push`通过终端/外壳手动执行时，它会成功推送并产生输出。

我一定遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:22:46.420

[https://github.com/kbjr/Git.php](https://github.com/kbjr/Git.php)

您可以尝试使用 Git.php 来运行 git 命令。虽然它没有`push`功能，但您可以像这样使用该`run`功能：

```
$repo = Git::open(ABSPATH);
$repo->add('-A');
$repo->commit('Updated plugins via WP');
$repo->run('push'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:02:37.130

不太确定使用“system()”是否是个好主意。但是 PHP 中支持 SSH2，关于如何使用 SSH2 和 PHP 与服务器交互的很棒的教程可以在这里找到：

[http://kevin.vanzonneveld.net/techblog/article/make_ssh_connections_with_php/](http://kevin.vanzonneveld.net/techblog/article/make_ssh_connections_with_php/)

（如果您还没有安装它，它甚至包括安装 ssh2 库）

您也可以通过系统命令尝试一些中间“回声”，看看它是否仍在产生输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T10:09:36.577

就个人而言，我会编写一个简单的 bash 脚本来执行批处理 git 操作并使用`proc_open`而不是使用`system`. 更好地获取脚本输出以及检查错误和退出代码。

[http://php.net/manual/en/function.proc-open.php](http://php.net/manual/en/function.proc-open.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:01:36.100

如果你想看到输出，你必须回显它

```
echo system ( 'cd '.ABSPATH.'; echo `git push`;' ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T04:36:44.833

如果您从最后一行中删除回声和反引号，您将获得您最有可能自己使用的代码：

```
system ( 'cd '.ABSPATH.'; git push ;' ); 
```

请注意，如果您的服务器未在`HEAD`. 您可能需要指定一个分支名称并且需要`pull`在`push`. （我会使用拉 - 提交 - 推。）

# r - 如何使用聚合并仅获取值列？

> ID：12688212
> 
> 赞同：0
> 
> 时间：2012-10-02T09:59:11.870
> 
> 标签：r, aggregate

我正在尝试对一组数字使用聚合函数。在聚合完成计算我想要的函数后，我将输出写入 csv 文件。但是这个 CSV 文件由一个值表和一个计数表组成。我想删除计数表。我检查了聚合的小插图和整个 {STATS} 手册。但是找不到可以为我执行此操作的参数。

所以问题是：如何告诉聚合我只想要值列而不是计数列？

我写的聚合函数：

```
 sdint<-aggregate(assayData(object)$intensity[,sample], 
                 by = list(assayData(object)$states[,sample]),
                 sd, 
                 na.rm=TRUE) 
```

我正在使用的数据： [数据](http://dl.dropbox.com/u/30550353/5701data.RData)

我想要的输出：

```
0.576778569
0.300184855
0.303007167
0.339285757
0.309673603
0.345517885
0.218438482
0.274175334
0.322680676
0.342179188
0.321930905
0.391558862
0.365504912
0.37906546
0.425801585
0.348280535
0.330063333
0.388093547
0.262649566
0.202235805
0.294549104
0.206346439
0.190531238
0.227790818
0.238224514
0.264646831
0.286682489
0.231069902
0.25936052
0.363558042
0.210798912
0.18124299
0.438063879
0.264264297
0.254382012
0.464863254 
```

我得到的输出：

```
1   0.576778569
2   0.300184855
3   0.303007167
4   0.339285757
5   0.309673603
6   0.345517885
7   0.218438482
8   0.274175334
9   0.322680676
10  0.342179188
11  0.321930905
12  0.391558862
13  0.365504912
14  0.37906546
15  0.425801585
16  0.348280535
17  0.330063333
18  0.388093547
19  0.262649566
20  0.202235805
21  0.294549104
22  0.206346439
23  0.190531238
24  0.227790818
25  0.238224514
26  0.264646831
27  0.286682489
28  0.231069902
29  0.25936052
30  0.363558042
31  0.210798912
32  0.18124299
33  0.438063879
34  0.264264297
35  0.254382012
36  0.464863254 
```

左边的数字不应该显示！

CSV格式的最终​​数据：

```
SNP_NAME,x0,x1,y,pos.start,pos.end,chrom,count,copynumber,intensity,allele.B,Lair,uncertain,Count,StandardLairDev,Count,MAX Lair,StandardIntDev,sample_id
"rs2065525",0,0,0,1896162,3138455,1,11,2,0.855,0,0.425,FALSE,1,0.287467339786124,1,0.999191681792884,1,0.576778568588604,"00_11242T1"
"rs1694379",0,0,0,3138456,148286049,1,263,2,0.9825,0,0.4758,FALSE,2,0.25066539967999,2,0.999763634558257,2,0.300184854995405,"00_11242T1"
"rs2027432",0,0,0,148286050,122268329,1,204,2,1.1092,1,0.8893,FALSE,3,0.128285157028804,3,0.999780287813653,3,0.303007166704586,"00_11242T1"
"rs16747",0,0,0,122268330,121622963,2,475,2,1.0407,0,0.7684,FALSE,4,0.16048988360498,4,0.99988056078919,4,0.339285756513036,"00_11242T1"
"rs1490265",0,0,0,121622964,67491556,3,136,2,1.0775,1,0.8031,FALSE,5,0.139532962911464,5,0.998567181034836,5,0.309673602648317,"00_11242T1"
"rs1864668",0,0,0,67491557,99834810,3,262,2,1.0775,0,0.6657,FALSE,6,0.174074950555206,6,0.999664655449619,6,0.345517884636054,"00_11242T1"
"rs1363207",0,0,0,99834811,182678081,4,270,2,0.883,0,0.5592,FALSE,7,0.22676775183123,7,0.999303463143844,7,0.218438481623468,"00_11242T1"
"rs1915853",0,0,0,182678082,96069863,4,26,2,0.6829,0,0.7207,FALSE,8,0.147755391322562,8,0.999377450758501,8,0.274175334131741,"00_11242T1"
"rs40207",0,0,0,96069864,57625291,5,98,2,1.0482,0,0.6674,FALSE,9,0.193783525020888,9,0.99961281189186,9,0.322680675891498,"00_11242T1"
"rs2041318",0,0,0,57625292,126652199,5,121,2,0.891,1,0.8323,FALSE,10,0.126062170080585,10,0.9997133021412,10,0.34217918778308,"00_11242T1"
"rs1053110",0,0,0,126652200,90354277,5,93,2,1.0506,0,0.7829,FALSE,11,0.156375642874615,11,0.998198995215151,11,0.32193090491761,"00_11242T1"
"rs2021899",0,0,0,90354278,85692795,6,410,2,1.0628,1,0.8398,FALSE,12,0.15435382388065,12,0.99993200438923,12,0.391558862043803,"00_11242T1"
"rs455030",0,0,0,85692796,79407284,7,285,2,1.0871,1,0.8669,FALSE,13,0.132137812936442,13,0.999929485697204,13,0.365504911746432,"00_11242T1"
"rs1433396",0,0,0,79407285,122076407,8,212,2,0.9334,0,0.4804,FALSE,14,0.263530051339396,14,0.999654307577374,14,0.379065459942171,"00_11242T1"
"rs755520",0,0,0,122076408,129448086,8,15,2,1.4429,0,0.4941,FALSE,15,0.149143991344688,15,0.914078743250954,15,0.425801584614172,"00_11242T1"
"rs1735173",0,0,0,129448087,73161466,8,33,2,0.9364,0,0.4316,FALSE,16,0.278273609876866,16,0.996653200437299,16,0.348280535013844,"00_11242T1"
"rs2026349",0,0,0,73161467,66782116,9,71,2,1.1968,1,0.8239,FALSE,17,0.189895617817744,17,0.999776858536029,17,0.330063332737979,"00_11242T1"
"rs735107",0,0,0,66782117,130050087,9,117,2,0.9506,1,0.8461,FALSE,18,0.141861258733706,18,0.999894912286988,18,0.388093547266615,"00_11242T1"
"rs766374",0,0,0,130050088,68176968,9,17,2,1.0932,1,0.8713,FALSE,19,0.0910714792585353,19,0.997719201852223,19,0.262649566352474,"00_11242T1"
"rs880340",0,0,0,68176969,67402459,10,248,2,1.068,0,0.4195,FALSE,20,0.269922761074577,20,0.999527729786447,20,0.202235805019638,"00_11242T1"
"rs4430531",0,0,0,67402460,67321605,11,229,2,1.1385,1,0.8932,FALSE,21,0.123084967048419,21,0.999592791631743,21,0.294549103735107,"00_11242T1"
"rs7960480",0,0,0,67321606,74655759,12,285,2,1.0545,1,0.8229,FALSE,22,0.122983123511285,22,0.999569526493407,22,0.206346438819543,"00_11242T1"
"rs14067",0,0,0,74655760,65198000,13,187,2,1.1479,1,0.8936,FALSE,23,0.118977461806947,23,0.999132908666796,23,0.190531237977798,"00_11242T1"
"rs1989749",0,0,0,65198001,62810767,14,210,2,0.9512,0,0.5011,FALSE,24,0.243205200245574,24,0.999570632007492,24,0.22779081826097,"00_11242T1"
"rs1192113",0,0,0,62810768,49992524,15,201,2,0.9459,0,0.5006,FALSE,25,0.242235554332421,25,0.999923600003544,25,0.238224514088702,"00_11242T1"
"rs869048",0,0,0,49992525,44973166,16,197,2,1.14,1,0.8493,FALSE,26,0.113266709360598,26,0.999410137369512,26,0.26464683057347,"00_11242T1"
"rs3785513",0,0,0,44973167,40857471,17,159,2,1.0119,0,0.4846,FALSE,27,0.247823361318723,27,0.999773260918777,27,0.286682489405067,"00_11242T1"
"rs420905",0,0,0,40857472,9614641,18,22,2,0.8881,0,0.7783,FALSE,28,0.143466524230892,28,0.989549332985043,28,0.231069902005914,"00_11242T1"
"rs1805272",0,0,0,9614642,38052783,18,148,2,0.8881,0,0.5326,FALSE,29,0.223315888643138,29,0.998876808487203,29,0.259360520111394,"00_11242T1"
"rs3499",0,0,0,38052784,31952708,19,149,2,1.0146,0,0.4964,FALSE,30,0.234643478722549,30,0.999581141159297,30,0.363558042382673,"00_11242T1"
"rs912239",0,0,0,31952709,39291277,20,130,2,1.1629,1,0.891,FALSE,31,0.141976210855505,31,0.999162417982582,31,0.210798912384771,"00_11242T1"
"rs2839377",0,0,0,39291278,31199103,21,103,2,0.9569,0,0.5286,FALSE,32,0.234526243870833,32,0.999309316327552,32,0.181242989596378,"00_11242T1"
"rs10451",0,0,0,31199104,26461186,22,121,2,0.9089,0,0.4561,FALSE,33,0.261911141225885,33,0.999345284476758,33,0.438063878776732,"00_11242T1"
"rs6780",0,0,0,26461187,70501188,98,125,2,1.1575,1,0.9065,FALSE,34,0.132476526665054,34,0.999987049231316,34,0.264264297319435,"00_11242T1"
"rs2032438",0,0,0,70501189,76057512,98,179,2,1.0443,1,0.8159,FALSE,35,0.128901714920779,35,0.999765208281892,35,0.254382011767866,"00_11242T1"
"rs31185",0,0,0,76057513,23098508,99,18,2,0.9412,-4,NA,FALSE,36,0.228356984022432,36,0.993785747186676,36,0.464863253679381,"00_11242T1" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:27:45.570

这是 的一个特点`write.csv`。将参数添加`row.names=FALSE`到您的`write.csv`调用中。

# python - ImportError - Ubuntu 中的 Python 相对导入

> ID：12688213
> 
> 赞同：1
> 
> 时间：2012-10-02T09:59:16.063
> 
> 标签：python, macos, ubuntu-12.04

我在 Python (2.7) 中面临相对导入的新问题。我有一台 Mac（带有 Snow Leopard）和另一台运行 Ubuntu（12.04）的计算机。两台计算机都使用 Python 2.7。我使用相对导入在 python 中编写了一些代码，并且能够通过以下操作毫无问题地运行它：

```
python -m package.subpackage1.file.py 
```

我在另一台计算机上有完全相同的代码（我使用了 SVN），当我尝试通过键入以下命令运行它时：

```
python -m package.subpackage1.file.py 
```

我得到了错误：

```
ImportError: No module named subpackage2.file2 
```

我用于 Mac 的代码和我用于 Linux 的代码之间没有任何变化。

那么是否有人已经遇到过这个问题和/或有解决这个问题的想法？

# android - Android：尝试去商店时抛出异常

> ID：12688220
> 
> 赞同：1
> 
> 时间：2012-10-02T09:59:38.267
> 
> 标签：android, exception, android-intent

我的应用程序有一个按钮，可以引导（准确地说应该是 :)）到 GooglePlay 中另一个应用程序的页面。按钮的点击反应如下：

```
public void pressedPurchaseButton(View view)
{
    Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=com.infmanrb.multrainer"));
    startActivity(browserIntent);
} 
```

但是，在模拟器中，按下按钮会导致异常：

`Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=market://details?id=com.infmanrb.multrainer }`

我猜 GooglePlay 没有安装在模拟器上——这就是原因。但是无论如何，避免应用程序崩溃的正确方法是什么？我可以提前查看是否会处理 Intent 吗？或者唯一的方法是尝试捕获异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:22:42.900

使用这样的实用方法：

```
public static boolean isIntentHandleable(Context context, String action) {
    final PackageManager manager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List<ResolveInfo> list =
        manager.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
    return list.size() > 0;
} 
```

将您想要的意图作为操作传递，当然还有上下文参考。如果返回 false，则无法处理此操作。

也检查此链接：[检查意图 uri 是否可用](https://stackoverflow.com/questions/7050068/check-if-intent-uri-is-available)

# actionscript-3 - 删除 for 循环中的事件侦听器

> ID：12688223
> 
> 赞同：1
> 
> 时间：2012-10-02T09:59:43.040
> 
> 标签：actionscript-3

我对 Actionscript 3 还很陌生，我有一个问题要问。我正在做一个相当简单的发现差异游戏，并且我正在将事件侦听器添加到 for 循环中的可点击差异。我的目标是，在我单击差异后，它也会删除其事件侦听器。

这是我的代码：

```
function addDifferences()
{
    for (var i = 1; i < 4; i++)
    {
        var difference = level1_left["level1_left_diff" + i];
        difference.alpha = 0;
        difference.addEventListener(MouseEvent.CLICK, onDifferenceClick);

        function onDifferenceClick(evt:Event):void
        {
            evt.currentTarget.alpha = 1;
            evt.currentTarget.play();
            found++;
            evt.currentTarget.removeEventListener(MouseEvent.CLICK, onDifferenceClick);
        }
    }
} 
```

问题是我只能访问for循环中的最后一个元素（差异），所以我只能删除最后一个事件监听器。我希望能够删除每个元素的事件监听器。

你能帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:50:02.050

您应该将元素存储在一个数组中，以后可以循环使用。

```
var differences:Array = new Array(); //Class variable, or global if you don't use classes

function addDifferences()
{
    for (var i = 1; i < 4; i++)
    {
        var difference = level1_left["level1_left_diff" + i];
        difference.alpha = 0;
        difference.addEventListener(MouseEvent.CLICK, onDifferenceClick);

        differences.push(difference);
    }
}

//Don't create this function four time
function onDifferenceClick(evt:Event):void
{
    evt.currentTarget.alpha = 1;
    evt.currentTarget.play();
    found++;

    for (var i = 0; i < differences.length; i++)
    {
        differences[i].removeEventListener(MouseEvent.CLICK, onDifferenceClick);
    }

    //You can empty array afterwars, if you wish to start a new round (with addDifferences)
    differences = new Array();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:05:20.687

您实际上并不需要将所有项目推入一个数组。您需要做的就是将正确的函数传递给 removeEventListener。在您的代码中，每次调用 removeEventListener 都会获取最后分配的内联函数。只需创建一个非内联函数，如：

```
function addDifferences()
{
    for (var i = 1; i < 4; i++)
    {
        var difference = level1_left["level1_left_diff" + i];
        difference.alpha = 0;
        difference.addEventListener(MouseEvent.CLICK, onDifferenceClick);
    }
}

function onDifferenceClick(evt:Event):void
{
    evt.currentTarget.alpha = 1;
    evt.currentTarget.play();
    found++; //assuming this is a global variable accessible from this function!!!
    evt.currentTarget.removeEventListener(MouseEvent.CLICK, onDifferenceClick);
} 
```

# iphone - 为 iPhone 5 加载不同的 xib

> ID：12688226
> 
> 赞同：8
> 
> 时间：2012-10-02T09:59:58.053
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我的应用程序为 iPhone 5 提供了额外的功能，我为它创建了一个带有 .xib 的单独类。我想检测屏幕高度（除非可以获取设备 ID/型号）并相应地加载不同的视图控制器。我试过这个：

```
- (IBAction)select:(id)sender {

CGRect screenRect = [[UIScreen mainScreen] bounds];
CGFloat screenWidth = screenRect.size.width;
CGFloat screenHeight = screenRect.size.height;

if (screenHeight == 960) {

Selection *selectView =[[Selection alloc] initWithNibName:nil bundle:nil];
selectView.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:selectView animated:YES];

}

else {

    Selection_5 *selectView =[[Selection_5 alloc] initWithNibName:nil bundle:nil];
    selectView.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:selectView animated:YES];

}

} 
```

Selection 和 Selection_5 是两个不同的类，每个类都有不同的用户界面 xib。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T10:30:37.817

首先，您不想按设备类型进行检查。新的 iPod touch（具有相同尺寸的屏幕）或明年的 iPhone 会发生什么。

但我认为这里的问题是您正在根据实际的像素数检查屏幕尺寸 - 奇怪的是 - 这不是您想要的。请记住，在 Retina 屏幕上，一切都是“加倍”的。在 UI 中，您（大多数情况下）对所有内容使用“正常”大小，在这种情况下，是像素数的一半。

简而言之：检查屏幕高度是否为 480（正常）或 568（iPhone 5）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T10:18:00.960

试试[http://github.com/erica/uidevice-extension/](http://github.com/erica/uidevice-extension/)

```
[[UIDevice currentDevice] platformType]   // ex: UIDevice4GiPhone
[[UIDevice currentDevice] platformString] // ex: @"iPhone 4G" 
```

或者你可以只看 screenHeight 像：

```
float screenHeight = [UIScreen mainScreen].bounds.size.height; 
```

iPhone 5 的高度是 568

如果您使用 .xib 加载，也许您会设置 nib：

```
[[Selection alloc] initWithNibName:@"here_is_nibname" bundle:nil]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-03T03:42:11.040

在我的应用程序中，我必须为 iPhone、iPhone5/iPod Touch 和 iPad 加载一个 .XIB 文件，为此，这是我使用的代码：

```
// If Iphone/iPod Touch
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
  // If iPhone 5 or new iPod Touch
  if([UIScreen mainScreen].bounds.size.height == 568){
     VCDadosViewController *extratoVC = [[VCDadosViewController alloc] initWithNibName:@"VCDadosViewControllerExt" bundle:nil];
     ...
  } else{
    // Regular iPhone
    VCDadosViewController *extratoVC = [[VCDadosViewController alloc] initWithNibName:@"VCDadosViewController" bundle:nil];
     ...          
  }
// If iPad
} else {
  VCDadosViewController *extratoVC = [[VCDadosViewController alloc] initWithNibName:@"VCDadosViewControllerPad" bundle:nil];
  ...
} 
```

希望它可以帮助需要的人:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-18T10:34:08.773

如果你有这个命名约定

```
VGArticlePage~ipad.xib
VGArticlePage~iphone.xib
VGArticlePage~iphone_ext.xib 
```

然后你可以这样做

```
#define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#define IS_IPHONE (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
#define IS_IPHONE_5 (IS_IPHONE && [[UIScreen mainScreen] bounds].size.height == 568.0f)

- (NSString *)nibNameForClass:(Class)class
{
    if(IS_IPHONE && IS_IPHONE_5)
    {
        return [NSString stringWithFormat:@"%@%@", NSStringFromClass(class), @"~iphone_ext"];
    }
    else if(IS_IPHONE)
    {
        return [NSString stringWithFormat:@"%@%@", NSStringFromClass(class), @"~iphone"];
    }
    else
    {
        return [NSString stringWithFormat:@"%@%@", NSStringFromClass(class), @"~ipad"];
    }
} 
```

# entity-framework - 已添加具有相同键的项目异常 - 具有 VS2012 的实体框架

> ID：12688228
> 
> 赞同：0
> 
> 时间：2012-10-02T10:00:04.773
> 
> 标签：entity-framework, exception, entity, visual-studio-2012

我正在阅读 julie lerman 的实体框架书（第 2 版）并在 VS 2012 上实现其示例。

对于那些知道/阅读它的人，我目前在第 9 章，使用 BreakAway 数据库模型。

这是从她的网站下载数据库的链接：（第 8 章）

[http://learnentityframework.com/LearnEntityFramework/downloads/#2ed](http://learnentityframework.com/LearnEntityFramework/downloads/#2ed)

当我尝试做一个小查询时，例如：

```
var context = new BAGA.BAEntities();
List<BAGA.Customer> customers=
context.Customers.Include("Contact")
.Include("PrimaryActivity")
.Include("SecondaryActivity")
.Include("PrimaryDestination")
.Include("SecondaryDestination")
.Include("Reservations.Trip.Destination")
.ToList();
customerBindingSource.DataSource = customers; 
```

我得到异常说：已添加具有相同密钥的项目。

我在一些帖子中读到，该方案中的主键或外键可能存在问题，但在数据库中找不到可能导致此问题的问题。

有人可以指出该数据库的表或它创建的域模型的问题吗？我正在使用 VS2012 作为书中的示例。

或者，我做错了什么？（虽然，我还没有做任何事情:)）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:05:58.433

我认为您的数据库有问题，因为在这些示例中尝试查询时我没有错误。

# c++ - C++ 联合定义

> ID：12688229
> 
> 赞同：0
> 
> 时间：2012-10-02T10:00:06.847
> 
> 标签：c++, unions

是否可以像我们为命名空间做的那样定义一个联合？我的意思是我们可以在联合中声明第一种类型，然后在另一个文件中向联合中添加另一种类型吗？

现在，我有一个包含位类型联合的基类（无符号整数和其他对应于每个派生类）。我想将它们拆分到派生类中，并一点一点地构造这个联合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T10:02:01.707

不，例如对于`structs/classes`, `enums`。

n3337 7.3/1

> 命名空间是一个可选命名的声明区域。命名空间的名称可用于访问在该命名空间中声明的实体；即命名空间的成员。***与其他声明性区域不同***， **命名空间的定义可以拆分为一个或多个翻译单元的几个部分。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:23:57.020

不。它怎么可能通过单独的编译来工作（不是它是可取的）。考虑类似的事情：

```
union U { int i; double d; }

void
f()
{
    U aU;
    g( &aU );
    //  ...
} 
```

编译器在堆栈上分配多少空间`aU`. 鉴于尚未编写的 DLL 包含：

```
union U { char buff[1000]; };

void
g( U* aU )
{
    //  Use all 1000 bytes...
} 
```

（请注意，根据标准，以上是未定义的行为。您所要求的将要求它起作用。）

# android - Android NfcV (ISO 15693) 标签

> ID：12688235
> 
> 赞同：0
> 
> 时间：2012-10-02T10:00:42.603
> 
> 标签：android, nfc, iso-15693

是否可以在 NfcV (ISO 15693) 标签上将数据写入内存中的特定块？例如，将数据写入块#5 或任何特定的块#。

我是 NFC 技术的新手。我正在创建一个应用程序来读/写 NfcV (ISO 15693) 标签。我已经成功创建了阅读部分，但问题在于写作部分。当我想将一些文本数据写入标签时，它从块# 2 开始，并且每次都执行相同的过程。我进行了很多搜索，但找不到将数据写入特定块的任何解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:06:11.313

确切的细节取决于标签内的 ISO 15693 兼容芯片。ISO 15693-3 标准列出了不同的写入命令。对这些的支持都是可选的，因此您的标签可能支持其中的一个或多个，甚至使用专有命令来写入数据。我建议查看芯片的数据表和/或获取 ISO 标准以找出正确的命令是什么。

一旦您知道正确的命令是什么，您就可以简单地将字节数组中的命令字节传递给`NfcV.transceive()`方法。（通常命令字节由一个标志字节组成，接着是一个写命令字节、一个或多个块字节和要写入的数据字节。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T06:59:35.607

> 尝试了以下方法：获取“标签丢失”异常：

```
 nfc.connect();
        byte[] arrByt = new byte[7];
        arrByt[0] = 0x40;
        arrByt[1] = 0x21;
        arrByt[2] = 0x06;
        arrByt[3] = 0x00;
        arrByt[4] = 0x00;
        arrByt[5] = 0x00;
        arrByt[6] = 0x00;           
        byte[] response = nfc.transceive(arrByt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T18:57:10.760

我猜android框架不能很好地处理来自ISO15693标签的响应。我一直在玩 HF-I 标签。很少有命令可以完美运行，对于少数其他命令，NFC 堆栈会引发 TAG Lost 异常。

# powershell - 带有参数化脚本块的 PowerShell 函数

> ID：12688238
> 
> 赞同：7
> 
> 时间：2012-10-02T10:00:45.490
> 
> 标签：powershell

我想创建一个枚举一些数据的 PowerShell 函数，并在所有出现时触发一个脚本块。

现在我有（这不是实际的代码，但它说明了我的问题）：

```
function Invoke-TenTimes
{
    [CmdletBinding()]
    param
    (
        [Parameter(Mandatory=$true, Position=0)]
        [ScriptBlock]$Action
    )
    process
    {
        $digits = 0..10
        $digits | % {
            $Action.Invoke($_);
        }
    }
} 
```

我把这个函数放在我的模块中。但是，当我打电话时我没有得到任何结果：

```
Invoke-TenTimes { $_ } 
```

输出为空白（不显示任何内容）。

如果我打电话

```
Invoke-TenTimes { $_ -eq $null } 
```

我得到十个`true`。事实上，我看到那`$_`是空的。

填充的正确方法是`$_`什么？

让我发疯的是，如果我将此函数和调用放在同一个 ps1 文件中，它可以工作（但我想按需传递脚本块）：

```
function Invoke-TenTimes
{
    [CmdletBinding()]
    param
    (
        [Parameter(Mandatory=$true, Position=0)]
        [ScriptBlock]$Action
    )
    process
    {
        $digits = 0..10
        $digits | % {
            $Action.Invoke($_);
        }
    }
}

Invoke-TenTimes { $_ } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:17:28.760

开始了：

```
$scriptblock = {param($number) Write-Host "Current Number is $number"} 

function Invoke-TenTimes
{
    [CmdletBinding()]
    param
    (
       [Parameter(Mandatory=$true, Position=0)]
       [ScriptBlock]$Action
    )
    $digits = 1..10
    $digits | ForEach-Object{Invoke-Command -ScriptBlock $Action -Args $_}
 } 
```

采用：

```
Invoke-TenTimes $scriptblock 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T12:05:18.817

该问题是已知的，并且特定于模块。也许这甚至是一个错误。请看一下这个问题：[Powershell scriptblock variable scope and modules的奇怪行为，有什么建议吗？](https://stackoverflow.com/questions/2193410/strange-behavior-with-powershell-scriptblock-variable-scope-and-modules-any-sug)

至于您的特定情况，请像这样调用您的函数：

```
Invoke-TenTimes { $args[0] } 
```

这样，它应该可以按预期工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T21:13:39.670

这是一个范围问题，传入的脚本块属于与其执行位置不同的范围。如果传入的脚本块不必从其上下文中引用变量，您可以简单地克隆脚本块以强制它在您运行它的范围内。和

```
$action = [scriptblock]::Create($action) 
```

有趣的是，它最初只在 ACCIDENT 中起作用。它是从脚本块所属的父范围中获取 $_ 的，它恰好在你的 foreach-object 内部，这很好。

但是拿你的原始版本，然后运行这个

```
"gotcha" | % {
Invoke-TenTimes {  $_ }
} 
```

你会看到你会得到 10 次陷阱，因为 $_ 在你的调用者范围内不是空的，而是一些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-21T22:41:14.080

这比每个人都容易得多。

考虑 $A 和 $B 是在全局级别定义的，而只有 $B 是在模块级别定义的。您的脚本块是第三个范围。在其中您引用 $A 并获取全局值。同样，如果您引用 $B 您将获得模块级别的值，因为它掩盖了全局实例。

问题：如果您尝试写入其中任何一个 - 将创建一个本地实例。

回答：

```
([ref]$A).value = 'Something malicious' 
```

请注意，“([ref]${name})”是一个引用对象，因此需要“.value”才能到达实际变量。所以

```
([ref]$B).value.Length 
```

是相同的

```
$B.Length 
```

In either case you have no direct control over scope. You get the instance you would read from. So the first example modifies the Global $A and the second example references the module level instance of $B.

# c - 无法分配内存

> ID：12688239
> 
> 赞同：2
> 
> 时间：2012-10-02T10:00:48.637
> 
> 标签：c, memory

在我的 C 代码中，我为 2d 数组分配内存，`double E[2000][2000];`但是当我运行它时会出现运行时错误`Segmentation fault(core dumped)`，并且当我将数组大小减小到 900 左右时，代码运行良好。

为什么它显示运行时错误，因为双占用 64 位内存（IEEE 标准）所以代码应该占用大约 32MB，这与 ram 大小相比并不多。如果 C 不支持它，那么如果我的最大数量应该如何进行我必须存储的数据是 4000000，每个都是浮点数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T10:04:02.057

您是否将 E 声明为局部变量？如果是这样，你的堆栈内存就用完了。

```
void func()
{
    double E[2000][2000]; /// definitely an overflow
} 
```

使用动态分配：

```
double* E = malloc(2000 * 2000 * sizeof(double));
/// don't forget to "free(E);"  later 
```

或者，如果您需要二维数组，请使用之字形：

```
double** E = malloc(2000 * sizeof(double*));

/* check that the memory is allocated */
if(!E)
{
    /* do something like exit(some_error_code);  to terminate your program*/
}

for(i = 0 ; i < 2000 ; i)
{
      E[i] = malloc(2000 * sizeof(double));

     /* check that the memory for this row is allocated */
     if(!E[i])
     {
        /* do something like exit(some_error_code);  to terminate your program*/
     }
} 
```

那么释放就稍微复杂一点：

```
for(i = 0 ; i < 2000 ; i)
{
      free(E[i]);
}

free(E); 
```

PS 如果你想以连续的方式保存所有数据，有一个技巧（代码来自[Takuy​​a Ooura 的 FFT 包](http://www.kurims.kyoto-u.ac.jp/~ooura/fft.html)）

```
double **alloc_2d(int n1, int n2)
{
    double **ii, *i;
    int j;

    /* pointers to rows */
    ii = (double **) malloc(sizeof(double *) * n1);

    /* some error checking */
    alloc_error_check(ii);

    /* one big memory block */
    i = (double *) malloc(sizeof(double) * n1 * n2);

    /* some error checking */
    alloc_error_check(i);

    ii[0] = i;
    for (j = 1; j < n1; j++) {
        ii[j] = ii[j - 1] + n2;
    }
    return ii;
}

void free_2d(double **ii)
{
    free(ii[0]);
    free(ii);
} 
```

你刚打电话

```
double** E = alloc2d(2000, 2000); 
```

和

```
free_2d(E); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T10:04:46.737

我假设您只是通过简单地在堆栈上分配它

```
double E[2000][2000]; 
```

这可能会超过分配给您的程序的堆栈大小。

尝试使用 malloc（或 c++ 中的新功能）或使用选项增加程序的默认堆栈大小。为此，可以使用 setrlimit() 配置 gcc。

[在 gcc 中设置堆栈大小](https://stackoverflow.com/questions/2275550/change-stack-size-for-a-c-application-in-linux-during-compilation-with-gnu-com)

请记住，即使堆栈大小增加，这个大小的数组也应该是全局的

如果一维大小固定，您还可以使用单个语句在堆上分配二维数组

```
double (* E)[COLUMN_SIZE];
int rows = 20; // this is dynamic and can be input from user at run time
E = malloc(rows * sizeof(*E)); // this needs to be freed latter 
```

一个更详细的类似示例 [，在没有循环的情况下分配 2d 数组](https://stackoverflow.com/questions/12635066/dynamically-allocate-2d-array-without-using-any-loops/12635355#12635355)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:03:58.647

这取决于您分配数组的位置。使用堆栈空间可能会导致溢出（除非您让链接器分配一个额外的大堆栈）。

例如，这可能不起作用

```
int main()
{
    double E[2000][2000];   // Likely an overflow
} 
```

但是，将数组移动到静态内存区域

```
double E[2000][2000];

int main()
{
   // use E here
} 
```

可能会避免这个问题。

# gwt - GWT 在树内和树网格之间拖放

> ID：12688240
> 
> 赞同：3
> 
> 时间：2012-10-02T10:00:51.217
> 
> 标签：gwt, datagrid, drag-and-drop, gwtquery

我们正在使用 GWT，我们需要创建两个拖放树网格。每棵树都包含父母和孩子（目前最多两级）。这是我们需要能够做的事情：

**用例**

*   将父级从一个树网格拖到另一个。
*   将父 1 拖到父 2（1 将成为 2 的子，并且 1 的所有子都将成为 2 的子）-> 请不要问：D
*   将孩子从一个父母拖到另一个父母（在同一个树网格内）
*   将子级拖动到同一树网格内的顶层（子级将成为父级）
*   使用两个选项将孩子拖到另一个树网格
    1 - 顶级 - 树 1 的孩子将成为树 2 上的父母。
    2 - 父母 - 树 1 的孩子将成为树网格 2 上父母的孩子。

如果这没有多大意义，我们还没有完整的上下文，所以这就是我们所知道的。

**问题**

我们可以在同一个树网格上拖动。如果我们想要拖动单元格的行是隐藏的，我们将滚动设置为 true，这样当用户在其中拖动时网格会滚动。像这样：

```
private void setDraggableOptions(DragAndDropColumn<?, ?> column) {
    // retrieve draggableOptions on the column
    DraggableOptions draggableOptions = column.getDraggableOptions();
    draggableOptions.setScroll(true);
    // use template to construct the helper. The content of the div will be set
    // after
    draggableOptions.setHelper(HelperType.CLONE);
    // opacity of the helper
    draggableOptions.setOpacity((float) 0.8);
    // cursor to use during the drag operation
    draggableOptions.setCursor(Cursor.MOVE);
    // set the revert option
    draggableOptions.setRevert(RevertOption.ON_INVALID_DROP);
    // prevents dragging when user click on the category drop-down list
    draggableOptions.setCancel("select");
    column.setDraggableOptions(draggableOptions);
} 
```

现在的问题是，将树网格设置为滚动，用户将永远无法将对象拖到第二棵树，因为滚动会尝试将对象始终保持在网格内。

我们正在使用[gwtquery-plugins](http://code.google.com/p/gwtquery-plugins/wiki/DragAndDropPluginForGWTDeveloppers)

有什么想法可以解决这个问题吗？非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T21:33:50.687

[在此处](https://groups.google.com/forum/?hl=en-US&fromgroups=#!topic/gwtquery/VlEmgDFai5k)查看我对您的问题的回答

# objective-c - 如何在 Objective C 中将 HTML 实体转换为 NSString

> ID：12688241
> 
> 赞同：0
> 
> 时间：2012-10-02T10:00:51.827
> 
> 标签：objective-c, translation, html

我有个问题。我的 webmethod 会返回包含大量 HTML 实体的文本。您可以在下面看到一个示例。

```
lt;p&gtKRC Genk lanceert een nieuw mini-abonnement voor de 2 resterende thuiswedstrijden in de Europa League. Deze verkoop is enkel voor bestaande abonnees, die nog geen mini-abonnment voor de 3 wedstrijden aankochten.&amp;nbsp;&ltbr &gt;&ltbr &gt 
```

有人知道我如何用 Objective-C 翻译它们吗？我正在寻找几个小时的解决方案，但没有找到任何东西。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:33:45.707

HTML 转义字符有问题，这些不是 HTML 标记。您可以在这里找到解决方案：

[Objective C HTML 转义/取消转义](https://stackoverflow.com/questions/659602/objective-c-html-escape-unescape)

# c# - 如何从 TextReader 遍历每一行？

> ID：12688245
> 
> 赞同：0
> 
> 时间：2012-10-02T10:01:23.010
> 
> 标签：c#, .net, textreader

> **可能重复：**
> [C# 逐行读取文件](https://stackoverflow.com/questions/1271225/c-sharp-reading-a-file-line-by-line)
> [如何从 TextReader 循环遍历行？](https://stackoverflow.com/questions/12687453/how-to-loop-over-lines-from-a-textreader)

我得到了一个 .NET [TextReader](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)（一个可以读取一系列连续字符的类）。如何逐行循环其内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:03:00.840

你的意思是这样的吗？

```
string line = null;
while((line = reader.ReadLine()) != null) 
{
    // do something with line
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:04:03.830

您可以非常轻松地创建扩展方法，以便您可以使用`foreach`：

```
public static IEnumerable<string> ReadLines(this TextReader reader)
{
    string line = null;
    while((line = reader.ReadLine()) != null) 
    {
        yield return line;
    }
} 
```

请注意，这*不会*在最后为您关闭阅读器。

然后你可以使用：

```
foreach (string line in reader.ReadLines()) 
```

编辑：如评论中所述，这是懒惰的。它一次只会读取一行，而不是将所有行读入内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:03:33.447

你会这样使用它：

```
string line;
while ((line = myTextReader.ReadLine()) != null)
{
    //do whatever with "line";
} 
```

**或者**

```
string Myfile = @"C:\MyDocument.txt";
using(FileStream fs = new FileStream(Myfile, FileMode.Open, FileAccess.Read))
{                    
    using(StreamReader sr = new StreamReader(fs))
    {
        while(!sr.EndOfStream)
        {
            Console.WriteLine(sr.ReadLine());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:05:04.913

我目前拥有的非懒惰解决方案：

```
foreach(string line in source.ReadToEnd().Split(Environment.NewLine.ToArray(),StringSplitOptions.None)) 
```

# powershell - Powershell：将 psexec 与 UNC 路径一起使用会导致“访问被拒绝”

> ID：12688246
> 
> 赞同：1
> 
> 时间：2012-10-02T10:01:32.410
> 
> 标签：powershell, remote-access, psexec

我正在尝试运行这样的 powershell 命令：

> psexec \\MachineB "\\MachineB\drops\Func2WebSiteOnline.bat"

我收到此错误：

> PsExec 无法在 MachineB 上启动 \\MachineB\drops\Func2WebSiteOnline.bat：访问被拒绝。

我尝试了以下事情：

1.  在“管理员”模式下运行 powershell
2.  使用“-u Domain\user -p password”参数运行 powershell 命令

这些都没有帮助。但是，我可以像这样对 machineB 运行简单的命令：

> psexec \\MachineB 网络停止 dcache

这很好用。

关于如何针对 MachineB 运行上面的批处理文件有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:34:23.860

我找到了一种非常规的方法来解决它。

> psexec \\MachineB -u 域\用户 -p 密码 cmd /c "cd /d I:\drops\Func2 && func2web.bat"

# bash - 用于备份配置文件中指定的多个目录的 Bash 脚本

> ID：12688249
> 
> 赞同：0
> 
> 时间：2012-10-02T10:01:42.197
> 
> 标签：bash, unix, directory, backup, config

我在这方面遇到了一些困难。基本上，为了工作，我需要一个 bash 脚本来备份存储在配置文件中的可变数量的目录。

我确定我需要从配置文件中导入列表，然后使用循环复制所有目录。我让它适用于单个目录。我的代码如下。我已经把它降到最低限度了。

```
#!/bin/sh
if [ ! -f ./backup.conf ]
then
echo "Configuration file not found. Exiting!!"
exit
fi
. ./backup.conf

unset PATH

# make sure we're running as root
if (( `$ID -u` != 0 )) ; then { $ECHO "Sorry, must be root.  Exiting..."; exit; } fi ;

# attempt to remount the RW mount point as RW; else abort
$MOUNT -o remount,rw $SOURCEFILE $DESTINATIONFOLDER ;
if (( $? )); then
{
$ECHO "snapshot: could not remount $DESTINATIONFOLDER readwrite";
exit;
}
fi ;

# step 2: create new backup folder:
$MKDIR $FULLPATH

**Loop should go here**
#copy source directories to backup folder
$RSYNC                              \
-va --delete --delete-excluded              \
--exclude-from="$EXCLUDES"              \
$SOURCEFILE $FULLPATH; 
```

配置文件如下

```
SOURCE=path
DESTINATION=path2
BACKUPFOLDERNAME=/laptopBackup 
```

我的问题是完成这项任务的最佳方法是什么。即我应该如何格式化配置文件以将可变数量的路径导入数组？或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:09:57.020

我个人会稍有不同，让我的配置文件更像是一个“控制文件”。例如：

```
/path       /path2     /laptopBackup
/tmp        /test      /bigmachine 
```

等.. 每次装载 1 行，每行 3 个字段（源、目标、备份文件夹名称）

然后使用类似的东西：

```
while read SOURCE DESTINATION BACKUPFOLDERNAME
do

<stuff>

done < ${configfile} 
```

（为了不让自己更丢脸，把猫拿走了：（）

# jquery - jQuery表格标题的宽度

> ID：12688250
> 
> 赞同：0
> 
> 时间：2012-10-02T10:01:44.900
> 
> 标签：jquery, html-table, width, col

我有一个`table`短标题但长单元格 ( `td`)。是否可以将列宽度设置为 title 的最小宽度？

例子：

```
<table>
    <tr>
        <th>Name</th>
        <th>phone</th>
    </tr>
    <tr>
        <td>Santa</td>
        <td>20938570987098709870298349082456</td>
    </tr>
</table> 
```

因此，“电话”列应显示“20.....”

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:08:16.170

如果你需要精确的宽度并且你没有使用等宽字体，那就更难了。

```
$("th").each(function () {
   var chars = $(this).text().length;
   $("td").eq($(this).index()).each(function () {
      if ($(this).text().length > chars) {
         $(this).text($(this).text().substring(0, chars) + '...');
      }
   });
}); 
```

未经测试或优化；只是一个概念验证。

# data-structures - 固定位置文件的正确名称是什么？

> ID：12688251
> 
> 赞同：1
> 
> 时间：2012-10-02T10:01:51.160
> 
> 标签：data-structures, csv

您可以以多种方式构造数据：例如逗号分隔或制表符分隔。

但您也可以构建职位数据。因此，例如，前 20 个字符表示电话号码，后面 2 个字符表示某人的年龄等...

一般来说，您如何称呼这样的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:04:38.200

如果你有 id[3]name[5]phone[6]

```
001Liz  882833
002Paul 892733
003John 927477 
```

这是一个固定格式的文件。

# sencha-touch-2 - Sencha Touch 2 中的样式/自定义复选框

> ID：12688254
> 
> 赞同：0
> 
> 时间：2012-10-02T10:02:01.437
> 
> 标签：sencha-touch-2

看看附件，我怎样才能自定义 Sencha 中的复选框看起来像这样？最大的挑战可能不是样式，而是两个复选框并排放置的可能性。

[http://i.stack.imgur.com/2Dxup.png](http://i.stack.imgur.com/2Dxup.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:29:31.980

对于样式，您可以将 cls 属性应用于复选框以添加其他样式，或使用 baseCls 属性擦除 st2 样式并应用您自己的样式......父容器中的布局以完成此操作.. id 提供示例代码，但我在我的手机上，如果您有问题，请告诉我，我明天可以为您准备一个示例

# javascript - Blackberry OS5+ webworks 应用程序非常慢

> ID：12688260
> 
> 赞同：1
> 
> 时间：2012-10-02T10:02:40.697
> 
> 标签：javascript, blackberry, blackberry-webworks, blackberry-os-v5

我正在开发一个黑莓 webworks 应用程序，它应该可以在 OS 5.0 及更高版本上运行。该应用程序确实使用了相当多的 jquerymobile。HTML 已经开发完成，并且在涟漪模拟器中运行良好。但是当我将它部署在 OS5.0 设备中时，加载时间很糟糕。加载一个包含 3 张图像和几个表格的页面花了将近一分钟（没有从服务器获取任何内容，所有文件都在设备中打包的应用程序中）。我什至直接在本机浏览器上尝试了这些页面，但它的渲染能力很差（css / jquery mobile 等出来的很糟糕。设备中启用了 Javascript）。

我想知道的是，本机应用程序/非常基本的 html 是在 OS5.0 上获得体面体验的唯一方法吗？在 OS5.0 HTML 应用程序上使用相当多的 javascript 是否可行？我什至尝试使用带有缓存的browserfield2，但这也没有太大区别。

只是想看看 OS5.0 中的情况是否确实如此糟糕，或者我是否遗漏了一些东西。任何帮助/反馈将不胜感激..

# hibernate - 休眠 - 将一个新对象保存到另一个

> ID：12688264
> 
> 赞同：1
> 
> 时间：2012-10-02T10:02:52.473
> 
> 标签：hibernate

我的应用程序有问题，我正在尝试将一个新创建的对象保存到另一个中，在 1.st 我创建了 1.st 对象 o（订单），这可以正常工作：

```
 tx = session.beginTransaction();
        Orders o = new Orders();
        o.setAccounts((Accounts) session.load(Accounts.class, id));
        o.setDatumObjednavky(datum_obj);
        o.setDoplnujuceUdaje(doplnujuce_udaje);
        Integer oid = (Integer) session.save(o);
        tx.commit(); 
```

但是当我尝试将 Orders o 对象分配给新创建的对象 pbc 时，在调用 session.save(pbc) 之后

```
 tx = session.beginTransaction();
        Orders o = new Orders();
        o.setAccounts((Accounts) session.load(Accounts.class, id));
        o.setDatumObjednavky(datum_obj);
        o.setDoplnujuceUdaje(doplnujuce_udaje);
        Integer oid = (Integer) session.save(o);

        for (int i = 0; i < list.size(); i++) {
            PiecesByCategory pbc = new PiecesByCategory();
            pbc.setOrders((Orders) session.load(Orders.class, oid));
            pbc.setCategory((Category) session.load(Category.class, list.get(i).getKategoria()));
            pbc.setPocet(list.get(i).getPocet());
            session.save(pbc);
            System.out.println("test\n");
        }

        tx.commit(); 
```

它在 session.save(pbc) 处崩溃：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`postcomfort`.`pieces_by_category`, CONSTRAINT `pieces_by_category_ibfk_1` FOREIGN KEY (`fk_order`) REFERENCES `orders` (`id`)) 
```

我有 MySql 表 auto_increment、生成器类型标识、hybernate 映射文件和 java pojo，见下文，我做错了什么？感谢您的帮助

我的 hibernate.cfg.xml 文件：

```
<session-factory>
<property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
<property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
<property name="hibernate.connection.url">jdbc:mysql://localhost:3306/postcomfort</property>
<property name="hibernate.connection.username">root</property>
<property name="hibernate.show_sql">true</property>
<property name="hibernate.current_session_context_class">thread</property>
<property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>
<property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
<!-- <property name="hibernate.jdbc.use_get_generated_keys">true</property>-->
<!--<property name="hibernate.jdbc.batch_size">50</property>-->
<property name="hibernate.connection.autocommit">false</property>
<mapping resource="hlavny/Accounts.hbm.xml"/>
<mapping resource="hlavny/Role.hbm.xml"/>
<mapping resource="hlavny/LoadingParam.hbm.xml"/>
<mapping resource="hlavny/Orders.hbm.xml"/>
<mapping resource="hlavny/DocAccount.hbm.xml"/>
<mapping resource="hlavny/DocOrders.hbm.xml"/>
<mapping resource="hlavny/PiecesByCategory.hbm.xml"/>
<mapping resource="hlavny/Category.hbm.xml"/> 
```

我的 Category.hbm.xml 文件：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 1.10.2012 10:02:17 by Hibernate Tools 3.2.1.GA -->
<hibernate-mapping>
<class name="hlavny.Category" table="category" catalog="postcomfort">
    <id name="id" type="int">
        <column name="id" />
        <generator class="identity" />
    </id>
    <property name="kategoria" type="string">
        <column name="kategoria" length="300" not-null="true" />
    </property>
    <set name="piecesByCategories" inverse="true">
        <key>
            <column name="fk_category" not-null="true" />
        </key>
        <one-to-many class="hlavny.PiecesByCategory" />
    </set>
</class>
</hibernate-mapping> 
```

我的 java pojo Category.java 文件：

```
package hlavny;
// Generated 1.10.2012 10:02:17 by Hibernate Tools 3.2.1.GA

import java.util.HashSet;
import java.util.Set;

/**
 * Category generated by hbm2java
 */
public class Category  implements java.io.Serializable {

 private int id;
 private String kategoria;
 private Set<PiecesByCategory> piecesByCategories = new HashSet<PiecesByCategory>(0);

public Category() {
}

public Category(/*int id,*/ String kategoria) {
   // this.id = id;
    this.kategoria = kategoria;
}
public Category(/*int id, */String kategoria, Set<PiecesByCategory> piecesByCategories)     {
  // this.id = id;
   this.kategoria = kategoria;
   this.piecesByCategories = piecesByCategories;
}

public int getId() {
    return this.id;
}

public void setId(int id) {
    this.id = id;
}
public String getKategoria() {
    return this.kategoria;
}

public void setKategoria(String kategoria) {
    this.kategoria = kategoria;
}
public Set<PiecesByCategory> getPiecesByCategories() {
    return this.piecesByCategories;
}

public void setPiecesByCategories(Set<PiecesByCategory> piecesByCategories) {
    this.piecesByCategories = piecesByCategories;
}

} 
```

# android - Android record screen including audio

> ID：12688269
> 
> 赞同：3
> 
> 时间：2012-10-02T10:03:08.593
> 
> 标签：android, audio, video, screen-capture

I'm searching a tool or a method to record an Android App including Audio on a Android phone. On my research I found a similar question and three tools. But no one can't record video and audio together.

Similar question:

*   [Stream Android screencast to PC](https://stackoverflow.com/questions/4854220/stream-android-screencast-to-pc)

Tools:

*   [AndroidScreenCast](http://code.google.com/p/androidscreencast/)
*   [Droid@Screen](http://blog.ribomation.com/droid-at-screen/)
*   [Android Screenshots and Screen Capture](http://sourceforge.net/projects/ashot/)

**Edit**

I found a app solution named [Screencast Video Recorder Demo](https://play.google.com/store/apps/details?id=com.ms.screencastfree) which records video and audio. But you have to root the phone to use this app. Is there another possibility?

**Update February 2 2019**

I just stumbled over this developer android page called "[Record a video](https://developer.android.com/studio/debug/am-video)" which seems to solve my question when using Android Studio:

> Logcat lets you record an MP4 video from your hardware device for a maximum of three minutes. You can, for example, use the video for your marketing materials or for debugging.
> 
> 1.  Open an app project.
> 2.  [Run the app](https://developer.android.com/studio/run/index.html#RunningApp) on a hardware device.
> 3.  Click **View > Tool Windows > Logcat.**
> 4.  Interact with the display on the hardware device to stage the start of the video.
> 5.  Click **Screen Record** in the left side of the Logcat window.
> 6.  In the **Screen Recorder Options** dialog, set the recording options:
>     
>     
>     *   **Bit Rate**: Enter a bit rate. The default is 4 Mbps.
>     *   **Resolution**: Enter a width and height value in pixels. The value must be a multiple of 16\. The default is the resolution of the device.
>     *   **Show Taps**: Enables visual feedback for taps.
> 7.  Click **Start Recording** to start the recording.
> 8.  Click **Stop Recording** to stop the recording.
> 9.  In the **Save As** dialog, save the MP4 file.
> 10.  In the **Screen Recorder** dialog, click one of the buttons to show the file location, open the recording in a player, or dismiss the dialog.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:58:59.900

There's no portable way of recording the audio that's being played on the phone. Unless you use the internal mic to record the sound coming from the internal loudspeaker, which A) will result in an extremely poor recording, and B) fails completely if the user has attached e.g. a wired headset.

# msmq - 将 MSMQ 与主机文件条目一起使用

> ID：12688270
> 
> 赞同：2
> 
> 时间：2012-10-02T10:03:09.887
> 
> 标签：msmq

我正在尝试使用主机文件中的别名来指向包含 MSMQ 的服务器。如果我在 MSMQ 路径中指定实际的服务器名称，那么一切正常：

```
var queue = new MessageQueue("FormatName:DIRECT=OS:queue-server\Private$\some-queue");
var enumerator = queue.GetMessageEnumerator2();

while (enumerator.MoveToNextRecord())
{
    // Do something
} 
```

但是，如果我创建以下主机文件条目：

```
XXX.XXX.XXX.XXX     queue-server-alias  #queue-server 
```

然后使用别名引用队列：

```
var queue = new MessageQueue("FormatName:DIRECT=OS:queue-server-alias\Private$\some-queue"); 
```

然后我收到以下错误：

```
The queue does not exist or you do not have sufficient permissions to perform the operation. 
```

主机文件条目是正确的，我可以 ping 别名并返回正确的 IP 地址。我已经阅读了以下详细介绍各种 MSMQ 路径格式的文章，但似乎都没有解决问题： [Difference between Path name and Format name when access MSMQ queues](http://blogs.msdn.com/b/johnbreakwell/archive/2009/02/26/difference-between-path-name-and-format-name-when-accessing-msmq-queues.aspx)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T10:19:16.997

打开您的注册表，确保

```
HKEY_LOCAL_MACHINE\Software\Microsoft\MSMQ\Parameters\IgnoreOSNameValidation 
```

设置为 1（DWORD 值）

这意味着 msmq 在尝试发送消息之前不会验证目标队列。

（来自 John Breakwell 的[帖子](http://social.msdn.microsoft.com/Forums/en-US/msmq/thread/ff9b1659-e8c6-4b08-9c06-6dbac0618d5d)）

# c# - 使用 AddInProcess 托管

> ID：12688272
> 
> 赞同：0
> 
> 时间：2012-10-02T10:03:14.720
> 
> 标签：c#, .net, architecture

我们的应用程序现在要求其组件之一将在其自己的专用进程中启动。

我刚刚遇到了[AddInProcess 类](http://msdn.microsoft.com/en-us/library/system.addin.hosting.addinprocess%28v=vs.90%29.aspx)（来自 System.AddIn.dll）

不幸的是，我找不到任何有用的代码示例或使用此基础架构的项目。

我想知道它对推出我们自己的流程基础设施有什么优点/缺点？

我们的应用程序使用 .NET 3.5 (WinForms)

应该从进程中加载​​的组件是加载任意用户代码并执行它的执行引擎。

需要考虑的一个注意事项是，这个执行代码的组件需要将一个 Results 对象传回给调用应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:00:55.633

我会说这取决于您需要什么样的组件接口。

如果它很简单，即所需的功能在一个或两个函数中，您可以只启动一个进程来完成它，如果需要传递一个参数。

如果它更复杂，您可以创建一个 WCF 主机进程并公开一个服务接口。

# javascript - 有没有办法在 TypeScript 中进行方法重载？

> ID：12688275
> 
> 赞同：136
> 
> 时间：2012-10-02T10:03:26.537
> 
> 标签：javascript, typescript, operator-overloading

有没有办法在 TypeScript 语言中进行方法重载？

我想实现这样的目标：

```
class TestClass {
    someMethod(stringParameter: string): void {
        alert("Variant #1: stringParameter = " + stringParameter);
    }

    someMethod(numberParameter: number, stringParameter: string): void {
        alert("Variant #2: numberParameter = " + numberParameter + ", stringParameter = " + stringParameter);
    }
}

var testClass = new TestClass();
testClass.someMethod("string for v#1");
testClass.someMethod(12345, "string for v#2"); 
```

这是我不想做的一个例子（我真的很讨厌 JS 中重载 hack 的那部分）：

```
class TestClass {
    private someMethod_Overload_string(stringParameter: string): void {
        // A lot of code could be here... I don't want to mix it with switch or if statement in general function
        alert("Variant #1: stringParameter = " + stringParameter);
    }

    private someMethod_Overload_number_string(numberParameter: number, stringParameter: string): void {
        alert("Variant #2: numberParameter = " + numberParameter + ", stringParameter = " + stringParameter);
    }

    private someMethod_Overload_string_number(stringParameter: string, numberParameter: number): void {
        alert("Variant #3: stringParameter = " + stringParameter + ", numberParameter = " + numberParameter);
    }

    public someMethod(stringParameter: string): void;
    public someMethod(numberParameter: number, stringParameter: string): void;
    public someMethod(stringParameter: string, numberParameter: number): void;

    public someMethod(): void {
        switch (arguments.length) {
        case 1:
            if(typeof arguments[0] == "string") {
                this.someMethod_Overload_string(arguments[0]);
                return;
            }
            return; // Unreachable area for this case, unnecessary return statement
        case 2:
            if ((typeof arguments[0] == "number") &&
                (typeof arguments[1] == "string")) {
                this.someMethod_Overload_number_string(arguments[0], arguments[1]);
            }
            else if ((typeof arguments[0] == "string") &&
                     (typeof arguments[1] == "number")) {
                this.someMethod_Overload_string_number(arguments[0], arguments[1]);
            }
            return; // Unreachable area for this case, unnecessary return statement
        }
    }
}

var testClass = new TestClass();
testClass.someMethod("string for v#1");
testClass.someMethod(12345, "string for v#2");
testClass.someMethod("string for v#3", 54321); 
```

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-10-02T11:00:51.530

根据规范，TypeScript 确实支持方法重载，但它非常笨拙，并且包含大量手动检查参数类型的工作。我认为这主要是因为在纯 JavaScript 中最接近方法重载的方法也包括检查，TypeScript 试图不修改实际的方法主体以避免任何不必要的运行时性能成本。

如果我理解正确，您必须首先为每个重载编写一个方法声明，然后*一个*方法实现检查其参数以确定调用哪个重载。实现的签名必须与所有重载兼容。

```
class TestClass {
    someMethod(stringParameter: string): void;
    someMethod(numberParameter: number, stringParameter: string): void;

    someMethod(stringOrNumberParameter: any, stringParameter?: string): void {
        if (stringOrNumberParameter && typeof stringOrNumberParameter == "number")
            alert("Variant #2: numberParameter = " + stringOrNumberParameter + ", stringParameter = " + stringParameter);
        else
            alert("Variant #1: stringParameter = " + stringOrNumberParameter);
    }
} 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-10-02T10:16:42.280

为清楚起见更新。TypeScript 中的方法重载是一个有用的功能，因为它允许您使用需要表示的 API 为现有库创建类型定义。

但是，在编写自己的代码时，您很可能能够使用可选或默认参数来避免重载的认知开销。这是比方法重载更具可读性的替代方法，并且还可以保持 API 诚实，因为您将避免使用不直观的顺序创建重载。

TypeScript 重载的一般规律是：

> [如果您可以删除重载签名并且所有测试都通过，则不需要 TypeScript 重载](https://www.stevefenton.co.uk/2013/02/what-is-wrong-with-method-overloads-in-typescript/)

您通常可以使用可选参数或默认参数 - 或联合类型或一些面向对象来实现相同的目标。

# 实际问题

实际问题要求超载：

```
someMethod(stringParameter: string): void {

someMethod(numberParameter: number, stringParameter: string): void { 
```

现在，即使在支持具有单独实现的重载的语言中（注意：TypeScript 重载共享一个实现） - 建议程序员提供顺序一致性。这将使签名：

```
someMethod(stringParameter: string): void {

someMethod(stringParameter: string, numberParameter: number): void { 
```

`stringParameter`始终是必需的，所以它首先出现。你可以把它写成一个有效的 TypeScript 重载：

```
someMethod(stringParameter: string): void;
someMethod(stringParameter: string, numberParameter: number): void;
someMethod(stringParameter: string, numberParameter?: number): void {
    if (numberParameter != null) {
        // The number parameter is present...
    }
} 
```

但是根据 TypeScript 重载法则，我们可以删除重载签名，我们所有的测试仍然会通过。

```
someMethod(stringParameter: string, numberParameter?: number): void {
    if (numberParameter != null) {
        // The number parameter is present...
    }
} 
```

# 实际问题，按实际顺序

如果您决定坚持原来的顺序，那么重载将是：

```
someMethod(stringParameter: string): void;
someMethod(numberParameter: number, stringParameter: string): void;
someMethod(a: string | number, b?: string | number): void {
  let stringParameter: string;
  let numberParameter: number;

  if (typeof a === 'string') {
    stringParameter = a;
  } else {
    numberParameter = a;

    if (typeof b === 'string') {
      stringParameter = b;
    }
  }
} 
```

现在有很多分支来确定参数的放置位置，但如果你读到这里，你真的想保留这个顺序......但是等等，如果我们应用 TypeScript 重载法则会发生什么？

```
someMethod(a: string | number, b?: string | number): void {
  let stringParameter: string;
  let numberParameter: number;

  if (typeof a === 'string') {
    stringParameter = a;
  } else {
    numberParameter = a;

    if (typeof b === 'string') {
      stringParameter = b;
    }
  }
} 
```

# 已经有足够的分支

当然，考虑到我们需要做的类型检查的数量......也许最好的答案就是有两种方法：

```
someMethod(stringParameter: string): void {
  this.someOtherMethod(0, stringParameter);
}

someOtherMethod(numberParameter: number, stringParameter: string): void {
  //...
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-20T14:11:28.080

我希望。我也想要这个功能，但 TypeScript 需要与没有重载方法的无类型 JavaScript 互操作。即，如果您的重载方法是从 JavaScript 调用的，那么它只能分派到一个方法实现。

有一些关于 codeplex 的相关讨论。例如

[https://typescript.codeplex.com/workitem/617](https://typescript.codeplex.com/workitem/617)

我仍然认为 TypeScript 应该生成所有的 if'ing 和 switch，所以我们不需要这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-10T15:12:02.887

为什么不使用[可选属性定义](https://www.typescriptlang.org/docs/handbook/interfaces.html#optional-properties)的接口作为函数参数..

对于这个问题的情况，使用定义了一些可选属性的内联接口只能直接生成如下代码：

```
class TestClass {

    someMethod(arg: { stringParameter: string, numberParameter?: number }): void {
        let numberParameterMsg = "Variant #1:";
        if (arg.numberParameter) {
            numberParameterMsg = `Variant #2: numberParameter = ${arg.numberParameter},`;
        }
        alert(`${numberParameterMsg} stringParameter = ${arg.stringParameter}`);
    }
}

var testClass = new TestClass();
testClass.someMethod({ stringParameter: "string for v#1" });
testClass.someMethod({ numberParameter: 12345, stringParameter: "string for v#2" }); 
```

因为 TypeScript 中提供的重载，正如其他人的评论中所提到的，只是一个函数不同签名的列表，而不像其他静态语言那样支持相应的实现代码。所以实现仍然只需要在一个函数体中完成，这使得 Typescript 中函数重载的使用不像支持真正重载功能的语言那样舒服。

然而，打字稿中仍然提供了许多新的和方便的东西，这些东西在传统编程语言中是不可用的，我认为匿名接口中的可选属性支持是一种满足传统函数重载舒适区的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-16T10:07:46.080

如果方法重载有很多变体，另一种方法是创建一个包含所有参数的类。所以你可以按任何顺序只传递你想要的参数。

```
class SomeMethodConfig {
  stringParameter: string;
  numberParameter: number;

 /**
 *
 */
 constructor(stringParameter: string = '012', numberParameter?: number) { // different ways to make a param optional
   this.numberParameter = 456; // you can put a default value here
   this.stringParameter = stringParameter; // to pass a value throw the constructor if necessary
 }
} 
```

您还可以使用默认值创建构造函数和/或传递一些强制参数。然后像这样使用：

```
const config = new SomeMethodConfig('text');
config.numberParameter = 123; // initialize an optional parameter only if you want to do it
this.SomeMethod(config); 
```

# asp.net-mvc-4 - Ninject 在 ASP.NET MVC 4 中的 Web API 构造函数中不起作用

> ID：12688281
> 
> 赞同：1
> 
> 时间：2012-10-02T10:03:49.397
> 
> 标签：asp.net-mvc-4, asp.net-web-api, ninject

我是 ASP.NET Web API 的新手。

我已使用[本教程](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)将我的 ASP.NET MVC 3 项目升级到 ASP.NET MVC 4 。

现在我在这里尝试使用 Web Api，如您所见，我在这里尝试使用 ninject，但是当我`ProductsController`以这种方式声明构造函数时，这不起作用。

```
public class ProductsController : ApiController
{
    private readonly IProductService _productService;

    public ProductsController(IProductService productService)
    {
        this._productService = productService;
    }

    public List<Product> GetProducts()
    {
        return _productService.GetAllProducts();
    }
} 
```

请帮助我。

如果我添加此构造函数，则没有调用 Web Api 方法，我通过使用断点确认了这一点，否则它会调用。浏览器显示一个 xml 错误，内容为

`<Error><Message>An error has occurred.</Message></Error>`

我的 NinjectWebCommon.cs 类代码是

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(Web.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(Web.App_Start.NinjectWebCommon), "Stop")]

namespace Web.App_Start
{
    public static class NinjectWebCommon 
    {
        private static readonly Bootstrapper bootstrapper = new Bootstrapper();

        /// <summary>
        /// Starts the application
        /// </summary>
        public static void Start() 
        {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
            bootstrapper.Initialize(CreateKernel);
        }

        /// <summary>
        /// Stops the application.
        /// </summary>
        public static void Stop()
        {
            bootstrapper.ShutDown();
        }

        /// <summary>
        /// Creates the kernel that will manage your application.
        /// </summary>
        /// <returns>The created kernel.</returns>
        private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel();
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

            RegisterServices(kernel);
            return kernel;
        }

        /// <summary>
        /// Load your modules or register your services here!
        /// </summary>
        /// <param name="kernel">The kernel.</param>
        private static void RegisterServices(IKernel kernel)
        {
            kernel.Bind<IProductService>().To<ProductService>();            
        }        
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:22:50.160

您可以按照以下步骤启动并运行 WebApi 和 Ninject：

1 创建一个新的 WebApi 项目 2 为一个字段和一个构造函数添加以下代码到默认的 ValuesController：

```
private IFooService _foo;

public ValuesController(IFooService foo)
{
    _foo = foo;
} 
```

3 创建一个接口 IFooService 和一个类 FooService

```
public interface IFooService
{
}

public class FooService : IFooService
{
} 
```

4 在 Nuget Packag Manager 控制台中运行以下命令以安装 Ninject

安装包 Ninject.MVC3

5 将以下绑定添加到 App_Start\NinjectWebCommon.cs 方法中`RegisterServices(IKernel kernel)`

```
 kernel.Bind<IFooService>().To<FooService>().InRequestScope(); 
```

在您的代码中，您可能没有在正确的时刻调用 NInject 配置。当您使用 Nuget 包时，您会在 Ninject 文件的顶部看到以下行：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(WebApiNinjectTest.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(WebApiNinjectTest.App_Start.NinjectWebCommon), "Stop")] 
```

这些行将确保您的代码在正确的时间执行。

* * *

## 回答 #2

> 赞同：-9
> 
> 时间：2012-10-03T07:08:30.560

更新：一个超级棒的解释： http: [//www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/](http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/)，现在我不再需要使用`ProductsController(): this(new ProductService())`.

唉，现在开始工作了：）

这是我所做的......

我的每个 WebApiController 都有两个构造函数。例如对于我的 ProductsController 现在我需要定义的构造函数如下......

```
public class ProductsController : ApiController
{
    private readonly IProductService _productService;

    public ProductsController(): this(new ProductService())
    {
    }

    public ProductsController(IFolderService productService)
    {
        this._polderService = productService;
    }

    public List<Product> GetProducts()
    {
        return _productService.GetAllProducts();
    }
} 
```

:)

# java - java.nio.file.Files.isWriteable 不同意 java.io.File.canWrite()

> ID：12688287
> 
> 赞同：6
> 
> 时间：2012-10-02T10:04:10.577
> 
> 标签：java, nio, temporary-files, truezip, writable

我有 Java 代码执行以下操作：

1.  使用创建一个带有 ZIP 扩展名的临时空文件`File.createTempFile()`
2.  删除它`File.delete()`（我们只希望它生成一个临时文件名）
3.  `com.google.commons.io.ByteStreams.copy()`使用`OutputSupplier`给定相同文件名的新文件将“模板”ZIP 文件复制到相同路径
4.  使用 TrueZIP 7.4.3 修改 ZIP 存档（删除目录）

在特定系统上，第 4 步始终失败`FsReadOnlyArchiveFileSystemException - "This is a read-only archive file system!"`（请参阅[http://java.net/projects/truezip/lists/users/archive/2011-05/message/9](http://java.net/projects/truezip/lists/users/archive/2011-05/message/9)）

调试 TrueZIP 代码，我注意到以下内容：

*   在上述任何步骤之间，该文件没有打开的文件句柄，特别是在第 4 步之前
*   使用 File.canWrite() 而不是 NIO 检查相同的文件在完全相同的时间返回（使用调试器），它表明它是可写的

这是您在调试器表达式列表中看到的内容：

```
fn => "C:/myworkdir/temp/myfile4088293380313057223tmp.zip"
java.nio.file.Files.isWritable(java.nio.file.Paths.get(fn)) => false
new java.io.File(fn).canWrite() => true 
```

使用 JDK 1.7.04

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-10T12:49:12.880

windows下java.nio.file.Files.isWritable有个bug：不考虑隐式权限。 [Java 错误 #7190897](http://bugs.sun.com/view_bug.do?bug_id=7190897)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T05:08:04.773

最终结果并不令人惊讶：

```
java.nio.file.Files.isWritable(java.nio.file.Paths.get(fn)) => false
new java.io.File(fn).canWrite() => true 
```

File.canWrite 根本不关注 ACL，只检查 MS-DOS 只读属性。

Files.isWriteable 关注 ACL，但无论出于何种原因（为了保持损坏的程序损坏？），他们都没有修复 File.canWrite。事实证明这很幸运，因为在某些情况下，即使您可以毫无问题地打开文件，它似乎也会返回 false。

真的，我会总结这样的方法：

*   当您实际上无法写入文件时，File.canWrite 有时会返回 true。
*   当您可以实际写入文件时，Files.isWriteable 有时会返回 false。

我不确定现在这两种方法的意义是什么。由于使用这些的每个人最终都必须编写一个完整的等效文件来实际尝试打开文件，因此人们想知道为什么他们不只是打开文件来自己进行检查。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T10:21:17.487

我会避免同时使用这两种 API，而是依赖 eg 抛出的异常`new FileOutputStream()`。它们至少是真实的，并且是真正值得关注的。使用您提到的 API 完全没有意义，它会引入时间窗口和重复代码。无论如何，你必须抓住`IOException`：为什么要把所有的代码写两次？

# javascript - AI生成的SVG包含后不显示

> ID：12688289
> 
> 赞同：0
> 
> 时间：2012-10-02T10:04:18.387
> 
> 标签：javascript, html, svg, shapes

我有一个使用 Adob​​e Illustrator 生成的 .svg 文件。这些是 SVG 文件的结构：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="1068px" height="1671.49px" viewBox="0 0 1068 1671.49" enable-background="new 0 0 1068 1671.49" xml:space="preserve">
<g>
    <polygon fill="#C6C6C6" points="451.07,1979.34 451.07,1979.34 450.8,1979.17 448.72,1978.82 448.6,1978.71 448.34,1978.59 
        447.71,1978.36 448.01,1978.33 450.2,1978.3 452.53,1978.76 451.35,1979.08 451.73,1979.29     "/>
<!-- more polygon shapes -->
</g>
</svg> 
```

然后我`<embed>`在我的 .html 文件中使用这样的标签包含它。HTML 文件的结构：

```
<!DOCTYPE html>
<html>
    <head>
        <title>My Demo</title>
        <link rel="stylesheet" href="css/style.css" />

        <script src="js/jquery-1.8.2.min.js"></script>
        <script src="js/raphael-min.js"></script>
        <script src="js/script.js"></script>

    </head>
    <body>
        <div id="shape1"></div>
        <div id="shape2"></div>        
        <div id="shape3"></div>
        <div id="embed_svg">
            <embed src="my_svg_file.svg" type="image/svg+xml" />
        </div>
    </body>    
</html> 
```

笔记：

*   我认为这与浏览器支持无关，因为我使用 raphael.js HTML5 库绘制了 3 个 HTML5 形状并且它们运行良好。（在 chrome 和 firefox 上试过）
*   包含该文件不能正常工作。浏览器似乎解析它，但它似乎没有显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:21:44.060

您的形状中的坐标非常相似，因此多边形覆盖了 viewBox 区域的非常非常小的一部分。

如果将`<svg>`元素的 viewBox 更改为 viewBox="448 1977 5 10" ，则形状将显示为可见区域现在更接近于多边形坐标，或者使多边形更大。

# .net - 如何在不缩放线宽的情况下缩放路径几何以适应视图框？

> ID：12688292
> 
> 赞同：3
> 
> 时间：2012-10-02T10:04:36.237
> 
> 标签：.net, wpf, xaml, user-controls, wpf-controls

我想绘制一个显示内容的用户控件。本质上，我想要一个围绕内容的自定义框。

我希望那个框可以缩放，所以我使用了一个视图框。不幸的是，视图框改变了整个显示的控件，而不仅仅是框的几何形状。这会导致用于边框的线条被拉伸。

这是我需要拉伸矢量路径中的点以适合父框的控件。 ![这是我要缩放以填充父框的内容](../Images/6daef9d91689fed730ce1d63ee7d5e05.png)

这是我得到的不良结果。

![在此处输入图像描述](../Images/91345d9acc17d863cb96fcef8956e53c.png)

有没有什么好方法可以在不缩放线条图厚度的同时拉伸填充*几何图形？*

我意识到我可以使用如此简单的几何图形来实现其他一些方法，但在我的实际应用中，路径要复杂得多。

这是我为感兴趣的人提供的控制代码：

```
<UserControl.Template>
    <ControlTemplate TargetType="{x:Type UserControl}">
        <Grid>
            <Viewbox Stretch="Fill">
                <Canvas Name="svg2" Margin="0" Width="100" Height="63" >
                    <Path Fill="#FFFFFFFF" Stroke="#FF6800FF" StrokeThickness="4" StrokeStartLineCap="Flat" StrokeEndLineCap="Flat" StrokeLineJoin="Miter" StrokeMiterLimit="4" Name="rect2985" RenderTransformOrigin="0,0">
                        <Path.Data>
                            <PathGeometry FillRule="Nonzero" Figures="M 0,250 L 0,50 L 150,50 L 200,-0.96 L 250,50 L 400,50 L 400,250 L 0,250z">
                                <PathGeometry.Transform>
                                    <TransformGroup>
                                        <ScaleTransform ScaleX=".24" ScaleY=".23" />
                                    </TransformGroup>
                                </PathGeometry.Transform>
                            </PathGeometry>
                        </Path.Data>

                        <Path.RenderTransform>
                            <TransformGroup>
                                <TranslateTransform X="2.1" Y="3" />
                            </TransformGroup>
                        </Path.RenderTransform>
                    </Path>

                    <Grid Canvas.Top="17" Width="90" HorizontalAlignment="Center" Height="40" Canvas.Left="5">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"        
                                  SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                    </Grid>

                </Canvas>
            </Viewbox>
        </Grid>
    </ControlTemplate>
</UserControl.Template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T23:22:26.043

**移除 Viewbox 并将“边框”拆分为固定大小、水平拉伸和垂直拉伸**的部分，如下图所示：

![内容装饰器](../Images/6b252655e9e9e0a0b2871ac42c21e8f8.png)

从这里我们可以看到列宽（从左到右）应该是：

1.  固定的
2.  可变/拉伸
3.  固定的
4.  可变/拉伸
5.  固定的

并且行高（从上到下）应该是：

1.  固定的
2.  可变/拉伸
3.  固定的

然后，您可以从这里构建 xaml 网格并将“边框”的每个部分放置到相应的位置。这样，当控件的高度发生变化时，只会拉伸垂直线。同样，当内容的宽度发生变化时，只有水平线会被拉伸。

# c# - 可移植类库 (PCL) 贡献 - 密码学

> ID：12688296
> 
> 赞同：5
> 
> 时间：2012-10-02T10:04:39.513
> 
> 标签：c#, .net, cryptography, portable-class-library

我想[在 codeplex 上的 Portable Class Library Contrib 项目](http://pclcontrib.codeplex.com/)中使用密码学，但没有找到任何关于如何使用它的文档。

我想创建一个包含其中的方法的包装类，`Encrypt`并且`Decrypt`我希望这个包装类存在于可移植类库中。我已经在这个项目中引用了`Portable.Runtime`和。`Portable.Security.Cryptography`它是否正确？

然后我想在 .NET、Windows Phone 和 Metro 项目中使用我的包装器。在这些项目中，我引用了我的包装项目，`Portable.Runtime`以及`Portable.Security.Cryptography`相应的便携式项目，即`Portable.Desktop`，`Portable.Phone`或`Portable.WindowsStore`。它是否正确？

然而，当我尝试使用我的包装类时，我得到了冲突的命名空间错误。这是错误和我的包装类：

> 该类型`System.Security.Cryptography.AesManaged`同时存在于`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Profile\Client\System.Core.dll`和`C:\Downloads\PclContrib\bin\Debug\Portable.Security.Cryptography.dll`

```
public sealed class SymmetricCryptography<T> where T : SymmetricAlgorithm, new()
{
    private readonly T provider = new T();
    private readonly UTF8Encoding utf8 = new UTF8Encoding();

    private byte[] key;
    private byte[] iv;

    public byte[] Key
    {
        get { return this.key; }
    }

    public byte[] IV
    {
        get { return this.iv; }
    }

    public SymmetricCryptography()
    {
        this.key = this.provider.Key;
        this.iv = this.provider.IV;
    }

    public SymmetricCryptography(byte[] key, byte[] iv)
    {
        this.key = key;
        this.iv = iv;
    }

    public SymmetricCryptography(string password, string salt)
    {
        Rfc2898DeriveBytes deriveBytes = new Rfc2898DeriveBytes(password, this.utf8.GetBytes(salt));
        this.key = deriveBytes.GetBytes(this.provider.KeySize >> 3);
        this.iv = deriveBytes.GetBytes(16);
    }

    public SymmetricCryptography(string password, string salt, int iterations)
    {
        Rfc2898DeriveBytes deriveBytes = new Rfc2898DeriveBytes(password, this.utf8.GetBytes(salt), iterations);
        this.key = deriveBytes.GetBytes(this.provider.KeySize >> 3);
        this.iv = deriveBytes.GetBytes(16);
    }

    public byte[] Encrypt(byte[] input)
    {
        return this.Encrypt(input, this.key, this.iv);
    }

    public byte[] Encrypt(byte[] input, byte[] key, byte[] iv)
    {
        return this.Transform(
            input,
            this.provider.CreateEncryptor(key, iv));
    }

    public byte[] Decrypt(byte[] input)
    {
        return this.Decrypt(input, this.key, this.iv);
    }

    public byte[] Decrypt(byte[] input, byte[] key, byte[] iv)
    {
        return this.Transform(
            input,
            this.provider.CreateDecryptor(key, iv));
    }

    public string Encrypt(string text)
    {
        return this.Encrypt(text, this.key, this.iv);
    }

    public string Encrypt(string text, byte[] key, byte[] iv)
    {
        byte[] output = this.Transform(
            this.utf8.GetBytes(text),
            this.provider.CreateEncryptor(key, iv));
        return Convert.ToBase64String(output);
    }

    public string Decrypt(string text)
    {
        return this.Decrypt(text, this.key, this.iv);
    }

    public string Decrypt(string text, byte[] key, byte[] iv)
    {
        byte[] output = this.Transform(
            Convert.FromBase64String(text),
            this.provider.CreateDecryptor(key, iv));
        return this.utf8.GetString(output, 0, output.Length);
    }

    public void Encrypt(Stream input, Stream output)
    {
        this.Encrypt(input, output, this.key, this.iv);
    }

    public void Encrypt(Stream input, Stream output, byte[] key, byte[] iv)
    {
        this.TransformStream(true, ref input, ref output, key, iv);
    }

    public void Decrypt(Stream input, Stream output)
    {
        this.Decrypt(input, output, this.key, this.iv);
    }

    public void Decrypt(Stream input, Stream output, byte[] key, byte[] iv)
    {
        this.TransformStream(false, ref input, ref output, key, iv);
    }

    private byte[] Transform(
        byte[] input,
        ICryptoTransform cryptoTransform)
    {
        byte[] result;

        using (MemoryStream memoryStream = new MemoryStream())
        {
            using (CryptoStream cryptStream = new CryptoStream(
                memoryStream,
                cryptoTransform,
                CryptoStreamMode.Write))
            {
                cryptStream.Write(input, 0, input.Length);
                cryptStream.FlushFinalBlock();
                memoryStream.Position = 0;
                result = memoryStream.ToArray();
            }
        }

        return result;
    }

    private void TransformStream(bool encrypt, ref Stream input, ref Stream output, byte[] key, byte[] iv)
    {
        // defensive argument checking
        if (input == null)
        {
            throw new ArgumentNullException("input");
        }

        if (output == null)
        {
            throw new ArgumentNullException("output");
        }

        if (!input.CanRead)
        {
            throw new ArgumentException("Unable to read from the input Stream.", "input");
        }

        if (!output.CanWrite)
        {
            throw new ArgumentException("Unable to write to the output Stream.", "output");
        }

        // make the buffer just large enough for 
        // the portion of the stream to be processed
        byte[] inputBuffer = new byte[input.Length - input.Position];
        // read the stream into the buffer
        input.Read(inputBuffer, 0, inputBuffer.Length);
        // transform the buffer
        byte[] outputBuffer = encrypt ? Encrypt(inputBuffer, key, iv)
                                        : Decrypt(inputBuffer, key, iv);
        // write the transformed buffer to our output stream 
        output.Write(outputBuffer, 0, outputBuffer.Length);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:18:34.930

文档有点缺乏，但我在[常见问题解答](http://pclcontrib.codeplex.com/documentation)中指出了这一点：

> **我可以将 PclContrib 中的类型与我的平台特定项目共享吗？**不，目前没有。虽然 PclContrib 中的类型在外观和感觉上与特定于平台的对应物相似，但运行时和编译器会将它们视为完全不同的类型。虽然我们对如何使这项工作有一些想法，但这是我们不会在短期内关注的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T05:21:39.610

以下 .net 代码适用于桌面实现。首先添加对 Portable.Desktop 和 Portable.Security.Cryptography.ProtectedData 的引用

```
 private void button2_Click(object sender, EventArgs e)
    {
        String encrypted = PCL.CentralClass.Encrypt("yo");
        String decreypted = PCL.CentralClass.Decrypt(encrypted);
        //PCL.CentralClass.
    }
    //https://pclcontrib.codeplex.com/documentation?FocusElement=Comment
    //\Source\Portable.Security.Cryptography.ProtectedData\Security\Cryptography\ProtectedData.cs

    static byte[] GetBytes(string str)
    {
        byte[] bytes = new byte[str.Length * sizeof(char)];
        System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
        return bytes;
    }

    static string GetString(byte[] bytes)
    {
        char[] chars = new char[bytes.Length / sizeof(char)];
        System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
        return new string(chars);
    }

    public static String Encrypt(String strEncrypt)
    {
        byte[] userData = GetBytes(strEncrypt);
        byte[] optionalEntropy = null;
        byte[] x = System.Security.Cryptography.ProtectedData.Protect(userData, optionalEntropy);
        return GetString(x);
    }
    public static String Decrypt(String strDecrypt)
    {
        byte[] encryptedData = GetBytes(strDecrypt);
        byte[] optionalEntropy = null;
        byte[] x = System.Security.Cryptography.ProtectedData.Unprotect(encryptedData, optionalEntropy);
        return GetString(x); ;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:45:52.477

事实证明，我的密码算法的通用包装器导致了一个问题。PCL Contrib 包含一个名为 SymmetricAlgorithm 的类，它本身就是真正 SymmetricAlgorithm 的包装器。如果我将包装类设为非泛型，它的工作方式如下：

```
public sealed class AesManagedSymmetricCryptography : SymmetricCryptography<AesManaged>
{
    #region Constructors

    public AesManagedSymmetricCryptography()
    {
    }

    public AesManagedSymmetricCryptography(byte[] key, byte[] iv)
        : base(key, iv)
    {
    }

    public AesManagedSymmetricCryptography(string password, string salt)
        : base(password, salt)
    {
    }

    public AesManagedSymmetricCryptography(string password, string salt, int iterations)
        : base(password, salt, iterations)
    {
    }

    #endregion
} 
```

# jquery - 重置基思伍德倒计时

> ID：12688301
> 
> 赞同：0
> 
> 时间：2012-10-02T10:05:32.533
> 
> 标签：jquery, jquery-plugins

我在以下脚本中使用了 keith-wood Countdown。

```
<script type="text/javascript" src="jquery.countdown.js"></script>
<script type="text/javascript">
$(function () {
    $('#defaultCountdown').countdown({
        until: +60,
        format: 'yodhmS',
        layout: '{y<}{yn}a, {y>}{o<}{on}m, {o>}{d<}{dn}g, {d>}{h<}{hn}o, {h>}{m<}{mn}m, {m>}{s<}{snn}s{s>}'
    });
}); 
```

当用户单击“重置”按钮时，我想重置倒计时。我尝试了以下解决方案，但它不起作用。我收到以下错误：“未捕获的未知命令：更改”

```
$(document).ready(function() {
    $('#reset').click(function() {
        $('#defaultCountdown').countdown('change', {until: +60});
    });
});
</script>

<div id="defaultCountdown"></div>
<input type="button" id="reset" value="Reset" /> 
```

有人能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:20:04.863

你不能使用`change`（这没有定义。`option`改用：

```
$('#reset').click(function() {
    $('#defaultCountdown').countdown('option', { until: +60 });    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:22:30.653

'change' 应该是 'option'，当点击重置按钮时，它将在 60 秒时重新启动计数器：

```
$('#reset').click(function() {
   $('#defaultCountdown').countdown('option', {until: +60});
}); 
```

在全：

```
<div id="defaultCountdown"></div>
<input type="button" id="reset" value="Reset" />

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.countdown.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
    $('#defaultCountdown').countdown({
        until: +60,
        format: 'yodhmS',
        layout: '{y<}{yn}a, {y>}{o<}{on}m, {o>}{d<}{dn}g, {d>}{h<}{hn}o, {h>}{m<}{mn}m, {m>}{s<}{snn}s{s>}'
    });

    $('#reset').click(function() {
        $('#defaultCountdown').countdown('option', {until: +60});
    }); 
});
</script> 
```

# joomla2.5 - 在joomla和moodle之间进行通用登录？

> ID：12688305
> 
> 赞同：0
> 
> 时间：2012-10-02T10:05:49.277
> 
> 标签：joomla2.5, moodle

我是 joomla 和 moodle 定制的新手。请帮助我如何在joomla和moodle两个板块之间进行共同登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:07:07.360

您可以使用 Moodle（OpenID 或 LDAP）中的单点登录功能或 Joomdle 等自定义模块。

[http://extensions.joomla.org/extensions/living/education-a-culture/lms/10021](http://extensions.joomla.org/extensions/living/education-a-culture/lms/10021)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:26:42.223

您也可以尝试为 Joomla + 许多其他 php 应用程序提供 sso 的 JFusion。

# python - python读取没有键值对的ini

> ID：12688308
> 
> 赞同：1
> 
> 时间：2012-10-02T10:06:06.370
> 
> 标签：python, configuration, ini, configparser

我正在尝试读取如下所示的配置文件

```
[somesection]
value1
value2
value3
value4
[somesection2]
valuea
valueb
valuec
[somesection3]
somevalues 
```

请让我知道我该如何阅读，因为配置解析器抛出错误：

```
ConfigParser.ParsingError: File contains parsing errors 
```

如果 configparser 无法解析，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-22T18:37:56.830

*（发布@JFSebastian 评论作为社区答案，以防止系统自动删除问题。）*

您需要`allow_no_value=True`在创建配置对象时使用可选参数。

```
config = configparser.ConfigParser(allow_no_value=True) 
```

# utf-8 - 将工作表导出为 UTF-8 CSV 文件（使用 Excel-VBA）

> ID：12688311
> 
> 赞同：4
> 
> 时间：2012-10-02T10:06:17.823
> 
> 标签：utf-8, excel, export-to-csv, vba

我想使用 VBA 导出我在 UTF-8 CSV 中创建的文件。通过搜索留言板，我发现了以下将文件转换为 UTF-8 的代码（[来自此线程](http://www.ozgrid.com/forum/showthread.php?t=154957)）：

```
Sub SaveAsUTF8() 

    Dim fsT, tFileToOpen, tFileToSave As String 

    tFileToOpen = InputBox("Enter the name and location of the file to convert" & vbCrLf & "With full path and filename ie. C:\MyFolder\ConvertMe.Txt") 
    tFileToSave = InputBox("Enter the name and location of the file to save" & vbCrLf & "With full path and filename ie. C:\MyFolder\SavedAsUTF8.Txt") 

    tFileToOpenPath = tFileToOpen 
    tFileToSavePath = tFileToSave 

Set fsT = CreateObject("ADODB.Stream"): 'Create Stream object
fsT.Type = 2: 'Specify stream type – we want To save text/string data.
fsT.Charset = "utf-8": 'Specify charset For the source text data.

fsT.Open: 'Open the stream
fsT.LoadFromFile tFileToOpenPath: 'And write the file to the object stream

fsT.SaveToFile tFileToSavePath, 2: 'Save the data to the named path

End Sub 
```

但是，此代码仅将非 UTF-8 文件转换为 UTF-8。如果我将我的文件保存为非 UTF-8 格式，然后将其转换为 UTF-8，它已经丢失了其中包含的所有特殊字符，从而使该过程变得毫无意义！

我要做的是以 UTF-8 (CSV) 格式保存一个打开的文件。有没有办法用 VBA 做到这一点？

nb 我也在[“ozgrid”论坛](http://www.ozgrid.com/forum/showthread.php?t=170327)上问过这个问题。如果我找到解决方案，将关闭两个线程。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-03-21T06:40:15.603

最后在 Office 2016 中，您可以简单地以 UTF8 格式保存为 CSV。

```
Sub SaveWorkSheetAsCSV()

Dim wbNew As Excel.Workbook
Dim wsSource As Excel.Worksheet, wsTemp As Excel.Worksheet
Dim name As String

    Set wsSource = ThisWorkbook.Worksheets(1)
    name = "test"
    Application.DisplayAlerts = False 'will overwrite existing files without asking
    Set wsTemp = ThisWorkbook.Worksheets(1)
    Set wbNew = ActiveWorkbook
    Set wsTemp = wbNew.Worksheets(1)
    wbNew.SaveAs name & ".csv", xlCSVUTF8 'new way
    wbNew.Close
    Application.DisplayAlerts = True

End Sub 
```

这会将工作表 1 保存到名为 test 的 csv 文件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-18T13:06:33.927

更新此代码。我用这个来更改指定文件夹（标记为“Bron”）中的所有 .csv 文件，并将它们保存为另一个文件夹中的 csv utf-8（标记为“doel”）

```
Sub SaveAsUTF8()

Dim fsT As Variant, tFileToOpen As String, tFileToSave As String
Dim Message As String
Dim wb As Workbook
Dim fileName As String

Set wb = ActiveWorkbook

With Application
.ScreenUpdating = False
.DisplayAlerts = False
End With

Message = "Source folder incorrect"
SourceFolder = wb.Worksheets("Menu").Range("Bron") & "\"
If Dir(SourceFolder, vbDirectory) = "" Or IsEmpty(SourceFolder) Then GoTo errorhandler

Message = "Target folder incorrect"
TargetFolder = wb.Worksheets("Menu").Range("Doel") & "\"
If Dir(TargetFolder, vbDirectory) = "" Or IsEmpty(TargetFolder) Then GoTo errorhandler

fileName = Dir(SourceFolder & "\*.csv", vbNormal)

Message = "No files available."
If Len(fileName) = 0 Then GoTo errorhandler

Do Until fileName = ""

    tFileToOpen = SourceFolder & fileName
    tFileToSave = TargetFolder & fileName

    tFileToOpenPath = tFileToOpen
    tFileToSavePath = tFileToSave

Set fsT = CreateObject("ADODB.Stream"): 'Create Stream object
fsT.Type = 2: 'Specify stream type – we want To save text/string data.
fsT.Charset = "utf-8": 'Specify charset For the source text data.

fsT.Open: 'Open the stream
fsT.LoadFromFile tFileToOpenPath: 'And write the file to the object stream

fsT.SaveToFile tFileToSavePath, 2: 'Save the data to the named path

fileName = Dir()

Loop

Message = "Okay to remove all old files?"
If QuestionMessage(Message) = False Then
    GoTo the_end
Else
    On Error Resume Next
    Kill SourceFolder & "*.csv"
    On Error GoTo errorhandler
End If

the_end:
With Application
.ScreenUpdating = True
.DisplayAlerts = True
End With
Exit Sub

errorhandler:
With Application
.ScreenUpdating = True
.DisplayAlerts = True
End With
CriticalMessage (Message)
Exit Sub

End Sub

'----------

Function CriticalMessage(Message As String)

MsgBox Message

End Function

'----------

Function QuestionMessage(Message As String)

If MsgBox(Message, vbQuestion + vbYesNo) = vbNo Then
QuestionMessage = False
Else
QuestionMessage = True
End If

End Function 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-31T14:28:52.510

这是我基于[Excel VBA 的解决方案 - 导出到 UTF-8](https://stackoverflow.com/questions/12352958/excel-vba-export-to-utf-8/12353832#12353832)，之前 user3357963 已链接到该解决方案。它包括用于导出范围和选择的宏。

```
Option Explicit

Const strDelimiter = """"
Const strDelimiterEscaped = strDelimiter & strDelimiter
Const strSeparator = ","
Const strRowEnd = vbCrLf
Const strCharset = "utf-8"

Function CsvFormatString(strRaw As String) As String

    Dim boolNeedsDelimiting As Boolean

    boolNeedsDelimiting = InStr(1, strRaw, strDelimiter) > 0 _
        Or InStr(1, strRaw, Chr(10)) > 0 _
        Or InStr(1, strRaw, strSeparator) > 0

    CsvFormatString = strRaw

    If boolNeedsDelimiting Then
        CsvFormatString = strDelimiter & _
            Replace(strRaw, strDelimiter, strDelimiterEscaped) & _
            strDelimiter
    End If

End Function

Function CsvFormatRow(rngRow As Range) As String

    Dim arrCsvRow() As String
    ReDim arrCsvRow(rngRow.Cells.Count - 1)
    Dim rngCell As Range
    Dim lngIndex As Long

    lngIndex = 0

    For Each rngCell In rngRow.Cells
        arrCsvRow(lngIndex) = CsvFormatString(rngCell.Text)
        lngIndex = lngIndex + 1
    Next rngCell

    CsvFormatRow = Join(arrCsvRow, ",") & strRowEnd

End Function

Sub CsvExportRange( _
        rngRange As Range, _
        Optional strFileName As Variant _
    )

    Dim rngRow As Range
    Dim objStream As Object

    If IsMissing(strFileName) Or IsEmpty(strFileName) Then
        strFileName = Application.GetSaveAsFilename( _
            InitialFileName:=ActiveWorkbook.Path & "\" & rngRange.Worksheet.Name & ".csv", _
            FileFilter:="CSV (*.csv), *.csv", _
            Title:="Export CSV")
    End If

    Set objStream = CreateObject("ADODB.Stream")
    objStream.Type = 2
    objStream.Charset = strCharset
    objStream.Open

    For Each rngRow In rngRange.Rows
        objStream.WriteText CsvFormatRow(rngRow)
    Next rngRow

    objStream.SaveToFile strFileName, 2
    objStream.Close

End Sub

Sub CsvExportSelection()
    CsvExportRange ActiveWindow.Selection
End Sub

Sub CsvExportSheet(varSheetIndex As Variant)

    Dim wksSheet As Worksheet
    Set wksSheet = Sheets(varSheetIndex)

    CsvExportRange wksSheet.UsedRange

End Sub 
```

# matlab - Matlab - 多维数据的PCA分析与重构

> ID：12688312
> 
> 赞同：19
> 
> 时间：2012-10-02T10:06:21.793
> 
> 标签：matlab, data-mining, pca

我有一个大型多维数据集（132 维）。

我是执行数据挖掘的初学者，我想使用 Matlab 应用主成分分析。但是，我看到网上解释了很多功能，但我不明白应该如何应用它们。

基本上，我想应用 PCA 并从我的数据中获取特征向量及其相应的特征值。

在这一步之后，我希望能够根据选择的获得的特征向量对我的数据进行重建。

我可以手动执行此操作，但我想知道是否有任何预定义的函数可以执行此操作，因为它们应该已经过优化。

我的初始数据类似于：`size(x) = [33800 132]`。所以基本上我有`132`特征（尺寸）和`33800`数据点。我想在这个数据集上执行 PCA。

任何帮助或提示都可以。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-02T11:15:27.560

这是一个快速演练。首先，我们创建一个隐藏变量（或“因素”）的矩阵。它有 100 个观测值，并且有两个独立的因素。

```
>> factors = randn(100, 2); 
```

现在创建一个载荷矩阵。这会将隐藏变量映射到观察到的变量上。假设你观察到的变量有四个特征。那么你的负载矩阵需要是`4 x 2`

```
>> loadings = [
      1   0
      0   1
      1   1
      1  -1   ]; 
```

这告诉您第一个观察到的变量负载在第一个因素上，第二个负载在第二个因素上，第三个变量负载在因素的总和上，第四个变量负载在因素的差异上。

现在创建您的观察结果：

```
>> observations = factors * loadings' + 0.1 * randn(100,4); 
```

我添加了少量随机噪声来模拟实验误差。`pca`现在我们使用统计工具箱中的函数执行 PCA ：

```
>> [coeff, score, latent, tsquared, explained, mu] = pca(observations); 
```

变量`score`是主成分分数的数组。这些将通过构造正交，您可以检查 -

```
>> corr(score)
ans =
    1.0000    0.0000    0.0000    0.0000
    0.0000    1.0000    0.0000    0.0000
    0.0000    0.0000    1.0000    0.0000
    0.0000    0.0000    0.0000    1.0000 
```

该组合`score * coeff'`将重现您观察的中心版本。`mu`在执行 PCA 之前减去平均值。要重现您的原始观察结果，您需要将其重新添加，

```
>> reconstructed = score * coeff' + repmat(mu, 100, 1);
>> sum((observations - reconstructed).^2)
ans =
   1.0e-27 *
    0.0311    0.0104    0.0440    0.3378 
```

要获得原始数据的近似值，您可以开始从计算的主成分中删除列。为了了解要删除哪些列，我们检查`explained`变量

```
>> explained
explained =
   58.0639
   41.6302
    0.1693
    0.1366 
```

这些条目告诉您每个主成分解释了多少百分比的方差。我们可以清楚地看到，前两个分量比后两个分量更显着（它们解释了它们之间超过 99% 的差异）。使用前两个分量来重建观察结果给出了 rank-2 近似值，

```
>> approximationRank2 = score(:,1:2) * coeff(:,1:2)' + repmat(mu, 100, 1); 
```

我们现在可以尝试绘制：

```
>> for k = 1:4
       subplot(2, 2, k);
       hold on;
       grid on
       plot(approximationRank2(:, k), observations(:, k), 'x');
       plot([-4 4], [-4 4]);
       xlim([-4 4]);
       ylim([-4 4]);
       title(sprintf('Variable %d', k));
   end 
```

[![在此处输入图像描述](../Images/11a54dbfdd8c29fb7d49397b2fc5040a.png)](https://i.stack.imgur.com/Y7QTE.png)

我们几乎完美地再现了原始观察结果。如果我们想要更粗略的近似，我们可以只使用第一个主成分：

```
>> approximationRank1 = score(:,1) * coeff(:,1)' + repmat(mu, 100, 1); 
```

并绘制它，

```
>> for k = 1:4
       subplot(2, 2, k);
       hold on;
       grid on
       plot(approximationRank1(:, k), observations(:, k), 'x');
       plot([-4 4], [-4 4]);
       xlim([-4 4]);
       ylim([-4 4]);
       title(sprintf('Variable %d', k));
   end 
```

[![在此处输入图像描述](../Images/481ed8de5faff4958f6840cd87857116.png)](https://i.stack.imgur.com/eDa8N.png)

这一次的重建不是那么好。那是因为我们故意将我们的数据构建为具有两个因素，而我们只是从其中一个因素中重建它。

请注意，尽管我们构建原始数据的方式与其复制之间存在暗示性的相似性，

```
>> observations  = factors * loadings'  +  0.1 * randn(100,4);
>> reconstructed = score   * coeff'     +  repmat(mu, 100, 1); 
```

`factors`与之间`score`或`loadings`与之间不一定有任何对应关系`coeff`。PCA 算法对您的数据的构造方式一无所知——它只是试图尽可能多地解释每个连续分量的总方差。

* * *

用户@Mari 在评论中询问她如何将重建误差绘制为主成分数量的函数。使用上面的变量`explained`非常容易。我将生成一些具有更有趣的因子结构的数据来说明效果 -

```
>> factors = randn(100, 20);
>> loadings = chol(corr(factors * triu(ones(20))))';
>> observations = factors * loadings' + 0.1 * randn(100, 20); 
```

现在所有的观察都加载在一个重要的共同因素上，而其他因素的重要性逐渐降低。我们可以像以前一样得到 PCA 分解

```
>> [coeff, score, latent, tsquared, explained, mu] = pca(observations); 
```

并绘制解释方差的百分比如下，

```
>> cumexplained = cumsum(explained);
   cumunexplained = 100 - cumexplained;
   plot(1:20, cumunexplained, 'x-');
   grid on;
   xlabel('Number of factors');
   ylabel('Unexplained variance') 
```

[![在此处输入图像描述](../Images/9db88ff483016f834774177008f470db.png)](https://i.stack.imgur.com/MNvxc.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T16:17:21.780

[在http://homepage.tudelft.nl/19j49/Matlab_Toolbox_for_Dimensionality_Reduction.html](http://homepage.tudelft.nl/19j49/Matlab_Toolbox_for_Dimensionality_Reduction.html)你有一个非常好的降维工具箱 除了 PCA，这个工具箱还有很多其他的降维算法。

做 PCA 的例子：

```
Reduced = compute_mapping(Features, 'PCA', NumberOfDimension); 
```

# jquery - jQuery - .hover .fadeIn/Out - 没有完全淡入？

> ID：12688313
> 
> 赞同：1
> 
> 时间：2012-10-02T10:06:24.297
> 
> 标签：jquery

如果你看看：[http ://sweetnation.co.uk/store/index.php?route=product/category&path=60](http://sweetnation.co.uk/store/index.php?route=product/category&path=60)

并将鼠标悬停在菜单的类别部分上，类别会淡入，但有时它们会淡入一半而您看不到它们。我不知道是什么原因造成的。

```
$(document).ready(function() {
  $(".hover_bitch, #menu").hover(function(){
        $("#menu").stop().fadeIn("fast");
    },function(){
        $("#menu").stop().fadeOut("fast");
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:08:36.873

尝试`.stop(true, true)`：

```
$(document).ready(function() {
  $(".hover_bitch, #menu").hover(function(){
        $("#menu").stop(true, true).fadeIn("fast");
    },function(){
        $("#menu").stop(true, true).fadeOut("fast");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:12:16.643

你的问题`.stop()`

尝试使用[**jQuery HoverIntent**](http://cherne.net/brian/resources/jquery.hoverIntent.html)并删除你的`.stop()`

# html - 用于翻译的元标记

> ID：12688314
> 
> 赞同：10
> 
> 时间：2012-10-02T10:06:26.967
> 
> 标签：html, meta

假设我的网站上有 2 个页面： `www.mydomain.com/pageX.html`英文和 `www.mydomain.com/fr/pageX.html`第一个的法文翻译

我想用哪个元标记告诉谷歌第二个是第一个（元信息）的翻译？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T10:13:02.233

执行此操作的标准方法是：

```
<link rel="alternate" hreflang="fr" href="/fr/" title="This document in French"> 
```

……看来[谷歌支持这个标准](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=189077)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T10:09:44.190

这样做的唯一方法（我知道）是告诉谷歌不要翻译页面。Google 使用语言检测来查看网页是否与用户使用相同的语言，如果不是，它会提供翻译选项。

您不能做任何花哨的事情，例如告诉谷歌将法国用户转发到 /fr/，但这是您必须手动管理的事情。

```
<meta name="google" content="notranslate" /> 
```

# windows-8 - 用于将结果返回给调用者的选择页面

> ID：12688315
> 
> 赞同：-1
> 
> 时间：2012-10-02T10:06:33.230
> 
> 标签：windows-8, microsoft-metro

我想创建类似 CameraCaptureUI.CaptureFileAsync 的东西，它将结果返回给调用者（在我的情况下，用户通过 bing 地图选择的位置）（[这里](https://stackoverflow.com/questions/12508678/how-to-create-a-dialog-like-cameracaptureui-capturefileasync)问了同样的问题，但我仍然需要全屏 UI 或更完整的代码示例）

假设下一个用例：

1.  CallerPage1 Navigate-> CallerPage2 (通过 Frame.Navigate(typeof(CallerPage2)) )
2.  CallerPage2 Navigate-> LocationPickingPage （再次通过 Frame.Navigate(typeof(LocationPickingPage )) <- 这里应该是别的东西，但不是 Frame.Navigate）
3.  用户选择一个位置并按下完成 -> 位置对象返回到 CallerPage2（通过 Frame.Navigate(typeof(CallerPage2)) ）

现在，如果用户按下 CallerPage2，他/她将被导航回 LocationPickingPage，这在上述导航模型中是预期的，但我不会将他/她导航到 CallerPage1

这就是 CameraCaptureUI.CaptureFileAsync 的行为方式。也许有人可以帮助查看 CaptureFileAsync 或熟悉方法的“幕后”，并提供一些如何实现它的示例，以便可以像这样执行位置选择：

```
Location location = await new LocationPickCaptureUI.CaptureLocationAsync(); 
```

任何帮助，将不胜感激！

**编辑**

因此，也许有人可以了解页面如何在不影响导航历史的情况下共享数据。我只是在寻找类似 android 的 startActivityForResult 的东西。

我在这个问题上花了几天时间（msdn docs，研究不同的例子，论坛和不同的网站，包括这个），但没有找到任何方法，所以我认为是时候问自己的问题了。

以我正在寻找的方式在页面之间共享数据应该是显而易见的。也许我看错了，但问题仍然存在。

如果有人对我的问题投了反对票，请分享您的想法和知识来源，因为我仍然需要有关此问题的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:27:15.857

So, finally I've got an appropriate solution and maybe it can be helpful to anybody else.

The idea is to use Popup object and fit all the screen (however the details seemed like some kind of magic :) )

One thing: I used UserControl (in Visual Studio right click on project -> Add -> new item.. -> UserControl) template as in this scenario it is easy to manage popups's content

Here is the full source for C#:

**CustomCaptureUI.xaml:**

```
<UserControl
x:Class="Family.CustomCaptureUI"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Family"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300"
d:DesignWidth="400"
x:Name="Root">

<Grid>
    <Border BorderBrush="Gray" BorderThickness="1">
        <Grid x:Name="Panel" Background="Gray">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                <TextBlock Text="New text" Foreground="LightGray" FontSize="18"/>
                <TextBox x:Name="ToDoText" Width="Auto" BorderBrush="Black" BorderThickness="1" VerticalAlignment="Center"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="SubmitButton" Background="Gray" Content="Submit" HorizontalAlignment="Center"/>
                    <Button x:Name="CancelButton" Background="Gray" Content="Cancel" HorizontalAlignment="Center"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Border>
</Grid>
</UserControl> 
```

**CustomCaptureUI.xaml.cs:**

```
public sealed partial class CustomCaptureUI : UserControl
{
    public enum ResultStatuses
    {
        Canceled,
        Ok,
        None
    }

    public CustomCaptureUI()
    {
         _resultStatus = ResultStatuses.None;
        // force content's size to preferable value
        Root.Width = Window.Current.Bounds.Width;
        Root.Height = Window.Current.Bounds.Width * 0.3;
        // Init popup's Content
        _popup.Child = this;

        // Init popups's position
        _popup.SetValue(Canvas.LeftProperty, (Window.Current.Bounds.Width - Root.Width) * 0.5);
        _popup.SetValue(Canvas.TopProperty, (Window.Current.Bounds.Height - Root.Height) * 0.5);
    }

    public async Task<string> ShowDialog() 
    {
        string result = string.Empty;
        if (_semaphore != null) { DismissAddToDoPopup(); }

        // Init a Task for block the ShowDialog-method until user presses Cancel or Submit
        _semaphore = new Task(() => { });
        CancelButton.Click += (sender, e) =>
        {
            _resultStatus = ResultStatuses.Canceled;
            DismissAddToDoPopup();
        };
        SubmitButton.Click += (sender, e) =>
            {
                result = ToDoText.Text;
                _resultStatus = ResultStatuses.Ok;
                DismissAddToDoPopup();
            };

        ShowAddToDoPopup();

        // actual blocking of ShowDialog
        await _semaphore;
        return result;
    }

    public void DismissDialog() 
    {
        _resultStatus = ResultStatuses.Canceled;
        DismissAddToDoPopup();
    }

    private void ShowAddToDoPopup()
    {
        ToDoText.Text = string.Empty;
        _popup.IsOpen = true;
    }

    private void DismissAddToDoPopup()
    {
        if (_semaphore != null) 
        { 
            // starts the task and allows awaited ShowDialog-method to be released
            // after _semaphore is finishing
            _semaphore.Start();
            _semaphore = null;
        }
        _popup.IsOpen = false;
    }

    public ResultStatuses ResultStatus
    {
        get { return _resultStatus; }
    }

    private Popup _popup = new Popup();
    private Task _semaphore;
    private ResultStatuses _resultStatus;

} 
```

And then it can be used like this:

```
 var dialog = new CustomCaptureUI();
        string result = await dialog.ShowDialog();
        if (dialog.ResultStatus == AddToDoDialog.ResultStatuses.Ok) 
        {
            // Useful stuff
            if (!string.IsNullOrWhiteSpace(result))
            {
               ...
            }
        } 
```

Hope it can save someone's time a little

# oracle - 清除 Oracle 会话状态

> ID：12688317
> 
> 赞同：5
> 
> 时间：2012-10-02T10:06:35.013
> 
> 标签：oracle, plsql

Oracle 上的数据库连接可以具有在连接的生命周期内持续存在的会话状态，即以包变量的形式。

有没有办法在连接期间刷新/清除调用之间的所有状态，而不会终止连接并重新建立新连接。

即考虑首先在包 init 中设置一个包变量，然后在该包中的某个过程中进行修改：如何“重置”包，以便从 1 个连接对过程的多次调用总是导致重新初始化包？

一般来说：如何在该连接上从客户端执行语句之间“重置”任何会话状态？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T10:09:25.277

`dbms_session.reset_package`是我能想到的最接近的。看到这个[大溪地链接](https://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_sessio.htm#i1010767)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:45:11.753

除了`dbms_session.reset_package`（在 René Nyffenegger 的回答中提出）重置所有包之外，您必须编写自己的包过程来仅重置单个包的状态。该过程只会将所有包变量设置为 NULL（或任何适当的值）。

# java - 在 GWT 项目中继承外部 java 源

> ID：12688325
> 
> 赞同：5
> 
> 时间：2012-10-02T10:07:00.557
> 
> 标签：java, gwt, inheritance

我有一个在服务器端使用的 ENUM。我也希望能够在客户端（GWT）上使用这个枚举。

这是结构：

```
se.mycompany.core
se.mycompany.core.TheEnum <-- this Enum.

se.mycomapny.web.gwtproject <-- The GWT project.
se.mycomapny.web.gwtproject.client 
```

我试图添加

```
<inherits name="se.mycompany.core.TheEnum"/> 
```

到我的 gwtproject.gwt.xml 文件。但我收到以下错误消息：

[错误] 无法在您的类路径中找到“se/mycompany/core/TheEnum.gwt.xml”；可能是拼写错误，或者您忘记包含源的类路径条目？

我尝试使用以下上下文将文件 TheEnum.gwt.xml 添加到“se/mycompany/core/”。

```
<module>
  <inherits name='com.google.gwt.user.User'/>
  <source path="TheEnum"></source>
</module> 
```

但它仍然抱怨同样的事情。

我猜我需要以某种方式将 se.mycompany.core.TheEnum 添加到 build.xml 中的类路径中，但我不知道如何或在哪里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T15:18:38.523

“继承”标签用于导入其他模块，而不是单个类。您可以通过在包下创建一个简单的 GWT 模块来实现您想要的`core`，然后在现有模块中继承该模块：

`Core.gwt.xml`在 package 下创建一个名为的文件`se.mycompany.core`，其内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<module>
    <source path="" includes="TheEnum.java"/>    
</module> 
```

然后在您现有的模块中添加：

```
<inherits name='se.mycompany.core.Core'/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:36:01.267

最好在客户端包中添加枚举，即“se.mycomapny.web.gwtproject.client”。从服务器端，您可以使用客户端包中的此枚举。

仍然需要它在服务器端，然后创建一个包“se.mycompany.core.shared”，在包“se.mycompany.core”中创建Core.gwt.xml。

核心.gwt.xml：

```
<module>
<source path="shared"/>
</module> 
```

现在在包“se.mycompany.core.shared”中创建 TheEnum.java。在你的主 gwt.xml 文件中写下一行，

```
<inherits name='se.mycompany.core.Core'/> 
```

# sml - 检查输入是否为整数实数

> ID：12688327
> 
> 赞同：0
> 
> 时间：2012-10-02T10:07:11.707
> 
> 标签：sml, smlnj

我想要求用户输入一个变量并检查它是实数还是整数，并对相应的操作进行两种不同的操作。如果整数为假，则为真；否则为假；

fun realorinteger(n)= if n=int then true else false;

但这绝对行不通。我也试过 if n in int 。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:29:34.010

你不可以做这个。

类型系统根本不允许一个函数采用多种不同的类型，并根据它是哪种类型来操作。您的函数需要一个`int`，或者它需要一个`real`. （或者两者都需要，但也可以使用`string`s、`list`s 等......即是多态的）

您可以通过创建一个数据类型来伪造它，该数据类型封装可以是整数或实数的值，如下所示：

```
datatype intorreal = IVal of int | RVal of real 
```

然后，您可以对此类值使用模式匹配来提取所需的数字：

```
fun realorinteger (IVal i) = ... (* integer case here *)
  | realorinteger (RVal r) = ... (* real case here *) 
```

然后，此函数将具有 type `intorreal -> x`，其中`x`是右侧表达式的类型。请注意，在这两种情况下，结果值必须是相同的类型。

这种函数的一个示例可能是舍入函数：

```
fun round (IVal i) = i
  | round (RVal r) = Real.round r 
```

然后这样调用：

```
val roundedInt  = round (IVal 6);
val roundedReal = round (RVal 87.2); 
```

# jquery - 一个函数变成另一个函数 jquery

> ID：12688332
> 
> 赞同：0
> 
> 时间：2012-10-02T10:07:50.493
> 
> 标签：jquery, function

我的问题可能很简单，但我在互联网上找不到答案，所以我在这里问：

我有以下代码：

```
function TriggerHeader() {
//doing great stuff
}
function TriggerSlider() {
//doing other stuff
} 
```

在检查完每个条件后，我有一个调用正确触发器的函数。

```
function Action() {
    $(".content").fadeOut("fast",function () {
    TriggerSlider() {
        TriggerHeader();
    };
});
} 
```

因此，当 (".content").fadeOut 结束时调用 TriggerSlider()（如我所愿），但我正在寻找调用 TriggerHeader(); 的正确方法；当 TriggerSlider() 结束时。我写它的方式是错误的，但我不知道为什么。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:13:25.577

这些行在语法上不正确：

```
TriggerSlider() {
    TriggerHeader();
}; 
```

`TriggerSlider`一旦完成，您必须调整函数以允许回调：

```
function TriggerSlider(callback) {
    // do stuff
    // ... 
    // now invoke the callback: 
    callback();
    // or pass it to a jQuery function
} 
```

现在您可以像这样设置链：

```
function Action() {
    $(".content").fadeOut("fast",function () {
        TriggerSlider(TriggerHeader);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:13:59.573

这取决于 和 的`TriggerSlider`内容`TriggerHeader`。

## 如果它们是同步的：

```
TriggerSlider();
TriggerHeader(); 
```

## 如果`TriggerSlider`有一个带有可用回调的动画：

```
function TriggerSlider(callb) {
   //Most of your code here
   $("element").slideUp(callb);
}
TriggerSlider(TriggerHeader); 
```

## 使用承诺 API

```
function TriggerSlider() {
   //Most of your code here
   return $("element").slideUp();
}
$.when(TriggerSlider()).done(TriggerHeader); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:13:12.097

这实际上取决于如何实施`TriggerSlider()`和`TriggerHeader()`实施。如果他们不做任何涉及超时和“单独线程”的事情，他们一个接一个地调用的方法是：

```
TriggerSlider();
TriggerHeader(); 
```

;-)

另一方面，如果`TriggerSlider()`包含动画或其他异步的东西，你需要实现它的完成回调作为函数的参数：

```
function TriggerSlider(completionCallback) {
  setTimeout(500, function() {
    // do something
    // and finally
    completionCallback();
  }
} 
```

现在您可以调用 TriggerSlider 并将其传递给在完成时调用的函数：

```
TriggerSlider(TriggerHeader); 
```

请注意，我没有通过`TriggerHeader()`，因为那会*调用函数并返回结果*。我将函数作为函数传递，函数调用发生在`TriggerSlider`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:17:43.187

您遇到的问题是，您正在尝试重新定义 Triggerslider 在按照您的方式编写它时所做的事情`TriggerSlider() { //code }`。这在语法上是不正确的。

如果您想在滑块之后执行标题功能，这应该可以工作。

```
function TriggerHeader() {
  //doing great stuff
}

function TriggerSlider() {
  //doing other stuff
  TriggerHeader();
}
function Action() {
   $(".content").fadeOut("fast",function () { TriggerSlider();});
} 
```

使用回调还有其他方法可以解决这个问题。但如果你总是想触发相同的功能，这应该可以工作。

# ruby-on-rails - Rails：如何在 Javascript 中访问图像？

> ID：12688335
> 
> 赞同：1
> 
> 时间：2012-10-02T10:08:05.867
> 
> 标签：ruby-on-rails

我对 Rails 很陌生，有一个小问题：

如何在 Javascript 中访问图像？SCSS，ERB，...有类似“image_path”的方法，但我没有找到类似的 Javascript 方法。

我需要它来指定萤火虫插件的图像 URL：

```
$.firefly({images : ['???/1.jpg', '???/2.jpg'],total : 40}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T10:24:48.597

如果您的图像`/app/assets/images/`可以简单地使用

```
/assets/1.jpg 
```

同样在css中，您可以使用

```
url(/assets/1.jpg) 
```

在 javascript 中使用时，您可以遵循相同的操作。

```
$.firefly({images : ['/assets/1.jpg', '/assets/2.jpg'],total : 40}); 
```

注意：当您的 rails 应用程序位于子目录中时，上述方法会导致问题。在这种情况下使用相对路径。资产预编译将编译 public/assets 目录中的所有资产。所以你的结构可能是这样的：

公共 -assets --images ---1.png --javascripts --stylesheets ---style.css

因此`style.css`，您可以使用相对路径，例如`../images/1.png`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:18:45.500

当我需要这样做时，我在页面上的**div#class**下插入了所需的任何图像，并将该类设置为隐藏在我的 css 中。然后，在 javascript 中，我可以从该 div 访问图像。

可能不是理想的解决方案，但由于资产管道而无法想到其他任何事情。

另外，尝试从 ./assets/image_name.jpg 访问图像

# struts2 - 如何使用 struts 验证 xml 对 dojo datetimepicker 进行验证

> ID：12688336
> 
> 赞同：1
> 
> 时间：2012-10-02T10:08:08.060
> 
> 标签：struts2

我尝试使用 struts 2 验证 xml 对 dojo datetimepicker 进行验证，但如果有人经历过相同的场景，则没有成功，确实可以帮助我

```
<s:label value="Joining Date"/>
 <sx:datetimepicker name="joiningDate" displayFormat="dd/mm/yyyy"/> 
```

在验证xml中我写

```
 <field name="joiningDate">
     <field-validator type="required">
          <message>Select Date.</message>
      </field-validator>
  </field> 
```

问题是当我单击提交页面提交时，即使 joinindate 字段为空也意味着未应用验证字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:34:02.460

Just add required Attribute to the tag.

i,e

```
<sx:datetimepicker name="joiningDate" displayFormat="dd/mm/yyyy" required="true"/> 
```

it should work...!

Cheers Karthikeyan

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T19:15:42.177

您还可以使用：

```
<field-validator type="date">
    <param name="min">01/01/1990</param>
    <param name="max">01/11/2012</param>
    <message>Birthday must be within ${min} and ${max}</message>
</field-validator> 
```

# jsf - 如果托管 bean 中的条件为真，则打开一个新窗口

> ID：12688338
> 
> 赞同：2
> 
> 时间：2012-10-02T10:08:19.293
> 
> 标签：jsf, primefaces, managed-bean, new-window

我想实现用户输入 URL 的情况，如果在我的托管 bean 中指定条件为真，则此 URL 将在新网页中打开。

我发现了这种可能性：

> “h:link”标签对于生成需要与`JSF`“结果”交互的链接很有用，但缺乏“动作”支持使得很难生成动态结果。
> 
> “h:commandLink”标签很烂，生成`JavaScript`的真的很吓人！不推荐使用这个标签，除非你有充分的理由支持。但它支持“action”属性，而这正是“h:link”所缺乏的。
> 
> “h:outputLink”对于生成不需要与`JSF`程序本身交互的链接很有用。最后，如果在“h:link”中加入“action”属性就完美了。

但是在验证条件后，我没有找到从托管 bean 启动打开网页的方法。

我正在使用 JSF2.0、Facelets 和 PrimeFaces 3.4。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T11:39:18.807

要使用这些链接组件之一在新窗口中打开目标，您需要指定`target="_blank"`属性，但这将在您单击链接时已经在新窗口中打开目标，因此不依赖于响应。您基本上需要在响应到达时在新窗口中打开目标。唯一的方法是[`window.open()`](https://developer.mozilla.org/en-US/docs/DOM/window.open)向响应返回一个 JavaScript 调用，以便它在网络浏览器中执行。

在标准 JSF 中，您可以`window.open()`有条件地渲染 JavaScript。

```
<h:form>
    <h:inputText value="#{bean.url}" />
    <h:commandButton value="submit" action="#{bean.submit}">
        <f:ajax execute="@form" render="@form" />
    </h:commandButton>
    <h:outputScript rendered="#{bean.valid}">window.open('#{bean.url}')</h:outputScript>
</h:form> 
```

和

```
private String url;
private boolean valid;

public void submit() {
    valid = validate(url);
}

// ... 
```

* * *

在 PrimeFaces 中，您可以使用[`RequestContext#execute()`](http://www.primefaces.org/docs/api/3.4/org/primefaces/context/RequestContext.html#execute%28java.lang.String%29)指定在响应完成时需要执行的 JavaScript 代码。

```
<h:form>
    <p:inputText value="#{bean.url}" />
    <p:commandButton value="submit" action="#{bean.submit}" />
</h:form> 
```

和

```
private String url;

public void submit() {
    if (validate(url)) {
        RequestContext.getCurrentInstance().execute("window.open('" + url + "')");
    }
}

// ... 
```

* * *

**与具体问题无关**：您在此处引用的粗俗陈述似乎是由对 HTTP/HTML 基础知识一无所知的人编写的（GET 与 POST 的限制等）。请把它们和一粒好盐一起吃。

# mysql - MySQL 查询 1NF 表

> ID：12688339
> 
> 赞同：0
> 
> 时间：2012-10-02T10:08:26.163
> 
> 标签：mysql

我有一个包含大量记录（~20k）的 MySQL 表，它在 1NF 中。不幸的是，将其转换为 2NF 及更高版本不是一个选项。

该表包含数据，例如

```
ClientName1 | ClientLastName1 | ClientZip1 | ... | Product1
ClientName1 | ClientLastName1 | ClientZip1 | ... | Product2
ClientName1 | ClientLastName1 | ClientZip1 | ... | Product3
ClientName2 | ClientLastName2 | ClientZip2 | ... | ProductX
ClientName3 | ClientLastName3 | ClientZip3 | ... | Product1
ClientName3 | ClientLastName3 | ClientZip3 | ... | Product2
ClientName4 | ClientLastName4 | ClientZip4 | ... | Product2
ClientName4 | ClientLastName4 | ClientZip4 | ... | Product3 
```

我想做的是获得至少拥有Product1的客户的所有产品。所以在上面的例子中，这将是以下记录：

```
ClientName1 | ClientLastName1 | ClientZip1 | ... | Product1
ClientName1 | ClientLastName1 | ClientZip1 | ... | Product2
ClientName1 | ClientLastName1 | ClientZip1 | ... | Product3
ClientName3 | ClientLastName3 | ClientZip3 | ... | Product1
ClientName3 | ClientLastName3 | ClientZip3 | ... | Product2 
```

现在让我们假设 (ClientName,ClientLastname) 对于每个客户端都是唯一的。我使用以下查询假设表名是客户端

```
SELECT 
  ClientID
FROM
 clients cl 
WHERE (ClientName,ClientLastname) 
  IN ( 
    SELECT ClientName, ClientLastname
    FROM clients 
    GROUP BY ClientName,ClientLastname,Product 
    HAVING Product IN (Product1ID)
) 
```

首先，这个查询运行了很长时间，并且似乎没有终止（或者至少不是在合理的时间内），其次我认为它是不正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:17:46.227

在一个理想的世界里，我的建议是尽可能地标准化这个表。如您所见，您有一张乱七八糟的桌子要尝试使用。

但是你有没有尝试过这样的事情（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/9aaf0/2)）：

```
select c.ClientName, 
  c.ClientLastName,
  c.ClientZip,
  c.Product
from clients c
inner join 
(
  select ClientName
  from clients
  where Product = 'Product1' 
) x
  on c.ClientName= x.ClientName 
```

# android - Android 评估文件夹图像附件到电子邮件失败

> ID：12688344
> 
> 赞同：0
> 
> 时间：2012-10-02T10:08:41.553
> 
> 标签：android

我正在尝试向邮件发送附有资产文件夹图像的邮件，邮件已成功发送，但是当我检查它时，邮件中没有附加图像，这是我的代码，

```
Uri uri = Uri.fromFile(new File("file:///android_asset/Hat_5.png"));

Intent intent = new Intent(Intent.ACTION_SEND);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setType("image/png");
intent.putExtra(Intent.EXTRA_EMAIL  , new String[] { "some@gmail.com"});
intent.putExtra(Intent.EXTRA_SUBJECT, "New Order");
intent.putExtra(Intent.EXTRA_TEXT   , "Order Id :" +imageId);
intent.putExtra(Intent.EXTRA_STREAM  , uri);
startActivity(Intent.createChooser(intent, "Send mail...")); 
```

允许，

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:10:24.587

您只能附加 SDCARD 中的文件。您需要将图像复制到 SDCARD 并将 URI 更改为 sdcard 上文件的路径。如果之后你可以删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:25:04.323

如果你愿意，你可以这样做

```
String FILENAME = "avatar.png";
        FileOutputStream fos = null;

    try {

        fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);

    } catch (FileNotFoundException e1) {

        e1.printStackTrace();
        Log.v("","FileNotFoundException: "+e1.getMessage());

    }

    try {
        InputStream inputStream = getAssets().open("avatar.jpg");

        byte buf[]=new byte[1024];
        int len;
        while((len=inputStream.read(buf))>0)
            fos.write(buf,0,len);
        fos.close();
        inputStream.close();

    } catch (IOException e1) {

        e1.printStackTrace();
        Log.v("","IOException: "+e1.getMessage());

    }

    // Get the file from internal storage

    String filePath = getApplicationContext().getFilesDir().getAbsolutePath();//returns current directory.
    File file = new File(filePath, FILENAME); 
```

然后

```
Uri uri = Uri.fromFile(file);
intent.putExtra(Intent.EXTRA_STREAM  , uri); 
```

并发送附件...

# java - 在java中安排任务每周运行一次

> ID：12688346
> 
> 赞同：2
> 
> 时间：2012-10-02T10:08:53.713
> 
> 标签：java, events, schedule

将活动安排在每周一 00:00 运行的最佳方式是什么？

请注意，尽管该应用程序 24/7 全天候运行。因此不需要基于操作系统的调度程序，例如 cron。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T10:10:33.323

如果它是一个长时间运行的应用程序，你可以在你的 Java 应用程序中嵌入一个[Quartz 调度程序。](http://quartz-scheduler.org/)Quartz 是一个非常灵活/强大的调度器，可以通过多种方式进行配置。

或者，如果您只是想在特定时间运行 Java 进程，那么您应该查看[cron](http://www.unixgeeks.org/security/newbie/unix/cron-1.html)。

编辑：鉴于您的应用程序是 24/7（注意上面的评论），Quartz 绝对是前进的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:10:42.570

我认为[cron4J](http://www.sauronsoftware.it/projects/cron4j/)可能是你最好的选择。然后，您可以将其配置为在特定时间运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T10:10:44.883

我们的操作系统调度程序；cron、Windows 任务调度程序或类似的

# magento - 大小写问题

> ID：12688348
> 
> 赞同：3
> 
> 时间：2012-10-02T10:08:55.970
> 
> 标签：magento

我们有带有大写和小写字母的库存单位，例如“AaFa”和“aAfA”，它们都是两个不同的 sku，但 magento 认为这两个 sku 是相同的。为了克服这个问题，我需要用 01 替换小的“a”，用 02 替换“b”，依此类推。查找和替换是一种解决方案，是否有任何方法可以轻松获得相同的功能或任何代码可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:35:06.367

将列编码更改`catalog_product_entity.sku`为区分大小写。

# php - Php - 在包含 php 常量的语言文件中写入内容后重定向失败

> ID：12688349
> 
> 赞同：0
> 
> 时间：2012-10-02T10:08:56.110
> 
> 标签：php, redirect, http-headers

我在 php 文件中定义了与语言相关的常量，可以从管理员端进行编辑，编辑内容后，包含它的任何页面都无法使用 php 标头功能成功重定向。

由于错误报告关闭，它不会生成警告消息，并且在表单提交后刷新同一页面，而不是重定向到另一个页面。

任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:09:59.683

当您设置重定向标头时，可能已经将一些输出发送到用户浏览器。

发送内容后设置 HTTP 标头将不起作用。在发送标头之前，您必须禁止任何输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:17:05.140

上面的答案是正确的。检查标题是否已经被刷新`header_sent`

对于调试，您可以看到错误在哪里：

```
<?php
if( headers_sent( $in_file, $at_line ) ){
    trigger_error('Cannot write redirect header, output started at '.$at_line.' in '.$in_file, E_USER_ERROR );
} 
```

导致早期输出的可能错误是：

*   `<?php`在文件开头之前输入的意外文本。
*   `?>`文件末尾后面的意外文本。（不需要，无论如何都应该省略）
*   错误输出。（特别是提出的通知 - 如果使用 Wordpress 则可能）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:11:49.403

使用以下函数来解决这个问题：

```
ob_start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:21:54.443

用 javascript 重定向替换标头

```
echo '<script type="text/javascript">window.location="membre.php";</script>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T10:44:29.993

您的文件的编码是“UTF-8”吗？可能是，您的文本编辑器在 UTF-8 文件中添加了 BOM 记录。它使 PHP 标头函数崩溃。如果使用 UTF-8 编码，则应将文件另存为“UTF-8 without BOM”

# c# - 在 ac#metro 应用程序中创建 3D 立方体

> ID：12688350
> 
> 赞同：2
> 
> 时间：2012-10-02T10:08:57.763
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

我想使用 c# 在 Metro 应用程序中开发 3D Cube。在 WPF 应用程序中，我在 XAML 组件中使用了 Viewport3DContral。但这在适用于 windows 8 的 .Net Framework 中不存在。有没有人有在 ac#metro 应用程序中开发 3D Cube 的经验。存在用于 c++ 应用程序的 DirectX。是否可以在现有的 c# Metro 应用程序中包含 Direct3D 应用程序？也许它存在用于 c# Metro 应用程序的 3D 引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:37:35.723

您可以使用[SharpDx](http://sharpdx.org/)，它是 DirectX 的托管包装器。

# mysql - 预设/自定义选择题的数据库设计

> ID：12688357
> 
> 赞同：5
> 
> 时间：2012-10-02T10:09:49.423
> 
> 标签：mysql, sql, database, forms, database-design

所以我有一个 HTML 表单，用户可以在其中通过勾选三个预设响应之一或编写自己的自定义答案来回答单选问题。

虽然这显然是多对多的关系，但我仍然找不到设计数据库表以处理两种类型（TEXT 和 BOOLEAN）的合适方法。我目前的快速而肮脏的解决方案是在联结表中硬编码特定的choice_id 以获得自定义答案。我正在为此寻找更好的模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:17:46.677

有以下表格：

**表格1：`Question`**

```
 QuestionID (ID)
  QuestionText (Text) 
```

**表 2：`Question Response`**

```
 QuestionResponseId (ID)
  QuestionResponseTypeId (References Question Response Type)
  QuestionResponseDetailsId (References Question Response Details) - This should be used for text only values (Custom Answers)
  QuestionResponse (Boolean) 
```

**表3：`Question Response Type`**

```
 QuestionResponseTypeId (Id)
  Description (Text)  -- Dictates if the answer is a boolean or a text field 
```

**表 4：`Question Response Details`**

```
 QuestionResponseDetailsId (Id)
   Description (Text) - Holds the text answer to the questions 
```

填充以下表格后，您将拥有一个包含问题的结构，即问题的响应（文本或布尔值）。

然后，您可以对此进行过滤以仅查看基于文本的答案，例如：

```
SELECT * FROM QuestionResponse
INNER JOIN QuestionResponseDetails ON QuestionResponse.QuestionResponseDetailsId = QuestionResponseDetails.QuestionResponseDetailsId
WHERE QuestionResponse.QuestionResponseTypeId = 1 
```

*其中 1 是基于文本的答案，2 是基于布尔值的答案（来自问题响应类型表）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:23:31.997

如果我是你，我会做这样的事情：

```
Table Answers:
question_id INT(11)
answer_id INT(11)
preset_answer TINYINT(1) //1, 2, 3 for three answers
custom_answer VARCHAR(255) 
```

# algorithm - 统一成本搜索前沿的理想数据结构（优先级队列似乎不够）是什么？

> ID：12688364
> 
> 赞同：2
> 
> 时间：2012-10-02T10:10:09.433
> 
> 标签：algorithm, data-structures, priority-queue, a-star

很多时候，我们需要丢弃重复的状态，如[统一成本搜索](http://en.wikipedia.org/wiki/Uniform-cost_search)中所述。

```
 if n is in frontier with higher cost
  replace existing node with n 
```

Priority Queue 不提供用于搜索项目的优先级然后更新它的接口。我很惊讶我找不到任何有关此的资源，请任何人提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:30:32.823

许多优先队列实现允许保留对队列元素的一些引用，然后使用它来删除/更新该元素。

如果将优先级队列实现为二叉搜索树，则可以轻松保留此类引用。对于二叉堆，这是可能的，但更困难：您需要更新所有元素的引用，移动上堆或下堆。

有优先队列实现，允许在与统一成本搜索等算法一起使用时有效更新元素。请参阅[配对堆](http://en.wikipedia.org/wiki/Pairing_heap)和[斐波那契堆](http://en.wikipedia.org/wiki/Fibonacci_heap)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:14:44.933

您正在寻找优先搜索队列。

> 优先级搜索队列有效地支持搜索树和优先级队列的操作。绑定是密钥和优先级的产物。绑定可以在队列中插入、删除、修改和查询（通常以对数时间），并且可以在恒定时间内检索优先级最低的绑定。

这是 Haskell 中的一个[实现](http://hackage.haskell.org/packages/archive/PSQueue/1.1/doc/html/Data-PSQueue.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-06T13:38:14.737

实际上，您可以使用常规优先级队列来进行统一成本搜索。

您可以插入一个新的、更好的（节点、成本）对，而无需删除旧的。您将始终首先处理新插入的条目（因为它更好），并且处理旧条目实际上将是无操作的。缺点是您最终可能会在优先级队列中得到 O(E) 个元素（而不是 O(V)）。

# python - 避免在 Sphinx 文档中扩展 sys.argv 关键字参数

> ID：12688368
> 
> 赞同：2
> 
> 时间：2012-10-02T10:10:18.497
> 
> 标签：python, python-sphinx

我有一堂像这样的课

```
import sys

class ACommand(object):

    @classmethod
    def cmd(cls, argv=sys.argv):
        " Executes the command. "
        pass 
```

当用 Sphinx 记录它时，它会扩展`sys.argv`到它的当前值，产生类似于以下签名的东西

```
classmethod cmd(argv=['/path/to/sphinx-build', '-b', 'html', '-d', '_build/doctrees', '.', '_build/html']) 
```

我发现`sys.argv`文档中的内容比其扩展更方便。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:22:03.373

您可以创建一个代理对象，例如

```
class ListProxy(object):
    def __init__(self, l):
        self.list = l
    def __getitem__(self, i):
        return self.list[i] 
```

进而

```
@classmethod
def cmd(cls, argv=ListProxy(sys.argv)):
    " Executes the command. " 
```

或者，更简单，你可以做

```
@classmethod
def cmd(cls, argv=None):
    " Executes the command. "
    if argv is None:
        argv = sys.argv 
```

# jquery - 通过 jQuery 将一个 src 属性与另一个 src 属性交换

> ID：12688376
> 
> 赞同：1
> 
> 时间：2012-10-02T10:10:36.467
> 
> 标签：jquery, attributes, src

我必须图像，我想切换图像的 src 属性，当单击一个时：

前：

```
<img src="1.jpg" class="image1" />
<img src="2.jpg" class="image2" /> 
```

单击图像 1 或 2 后：

```
<img src="2.jpg" class="image1" />
<img src="1.jpg" class="image2" /> 
```

我可以更改单击图像的 src，但我似乎无法以任何方式存储原始 src-attribute 以将其传递给其他图像。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:12:45.267

你不会相信，但你可以将它存储在第三个变量中！！

```
var img1 = $('.image1'),
    img2 = $('.image2');

var originalSrc = img1.attr('src');

img1.attr('src', img2.attr('src'));
img2.attr('src', originalSrc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:12:44.750

```
$('#Id').click(function(){
$('.image1').attr('src','2.jpg');
$('.image2').attr('src','1.jpg');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:13:35.443

您可以使用 jQuery 执行以下操作。更多信息可以在这里找到：

[http://jquery.com](http://jquery.com)

```
<script type="text/javascript" src="jquery-1.8.0">
$(function(){
  $("img").click(function(){
   $(this).closest("img").attr("src",$(this).attr("src"));
  });
});
</script> 
```

希望这可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:17:31.300

您可以通过以下方式进行操作：

```
$('.image1 , .image2').click(function() {
   if ($(this).prev().length) {
      temp = $(this).attr('src');
      $(this).attr('src', $(this).prev().attr('src') );
      $(this).prev().attr('src',temp);
   } else {
      temp = $(this).attr('src');
      $(this).attr('src', $(this).next().attr('src') );
      $(this).next().attr('src',temp);
   }
}); 
```

# drupal - Drupal 6 - 插入菜单项后用户名 admin 不存在

> ID：12688377
> 
> 赞同：1
> 
> 时间：2012-10-02T10:10:41.633
> 
> 标签：drupal, menu, limit, admin

我在一个有 11 种语言的公司网站上使用 Drupal 6.19。到目前为止，一切正常。但不知何故，我在菜单系统中遇到了一些限制。我可以毫无问题地将新菜单项添加到辅助链接或其他菜单。但是，如果我尝试向主链接添加新菜单项，则会发生以下情况：

*   我无法添加或编辑任何节点，Drupal 报告“用户名 admin 不存在”。- 但是用户管理员在那里，我可以毫无问题地登录
*   管理菜单缺少某些菜单项（例如指向翻译节点的链接）

如果我从主链接中删除任何项目，问题就会解决，但一旦我尝试添加另一个项目，它就会再次出现。我可以通过删除一些旧的菜单项来暂时解决这个问题，但我需要解决这个问题，因为我需要在不久的将来添加另外两种语言，它们每个都有大约 60 个菜单项。

我已经尝试过：

*   重建权限
*   将 PHP 内存限制从 128MB 增加到 256MB
*   禁用一些我很少使用的模块
*   删除孤立菜单项
*   更正标记为外部但实际上是内部的菜单项
*   检查数据库中的所有菜单项是否出现在 Drupal UI 和网站上

他们都没有工作。

你能就这个问题给我一些建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:08:13.447

问题解决了。

问题出在Mysql上。增加最大数据包大小解决了这个问题。

刚刚将以下内容添加到 mysql 配置中：

```
max_allowed_packet = 16M 
```

在此之后，问题完全解决了。

# ruby-on-rails - Rails ActiveRecord 实现关系

> ID：12688382
> 
> 赞同：0
> 
> 时间：2012-10-02T10:11:02.347
> 
> 标签：ruby-on-rails, activerecord, model, relationship, rails-migrations

帮助我在 Rails 中进行数据库迁移和模型，我尝试搜索自引用，但我无法做出正面或反面.. 我被卡住了，可以这么说..

基本上我想要两个模型，用户模型和规则模型。

在用户模型中，我想指定用户的所有者，即另一个用户，只能有一个所有者，用户可以是自己的所有者。

还有一个规则模型，我还想在其中指定规则的所有者（用户）（用户可以是许多规则的所有者）和该规则适用的用户（用户）（用户可以有许多规则）。

所以我需要两个迁移和两个模型，我会开始，希望你能理解我正在尝试做的事情..

```
class User < ActiveRecord::Base
  belongs_to :user #?
  has_one :user    # as in owner
  has_many :rules  # rules for given user and rules that are created by this user
  ... #and some more similar entries
end 
```

和

```
class Rule < ActiveRecord::Base
  belongs_to :user # as in owner of rule and rule for user
end 
```

而且我完全不确定在迁移中要写什么..

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :username

      #owner?

      #stuff left out
      t.timestamps
    end
  end
end 
```

和

```
class CreateRules < ActiveRecord::Migration
  def change
    create_table :rules do |t|
      t.string :title

      #rule for?
      #owner?

      #stuff left out
      t.timestamps
    end
  end
end 
```

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:16:02.937

你需要的是**自引用关联**

阅读[http://edgeguides.rubyonrails.org/association_basics.html#self-joins](http://edgeguides.rubyonrails.org/association_basics.html#self-joins)并 [在 RailsCasts 上阅读这一集](http://railscasts.com/episodes/163-self-referential-association)。这准确地展示了您正在寻找的内容。

希望能帮助到你

祝你好运。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:18:28.960

```
#Models/user.rb
class User < ActiveRecord::Base
  belongs_to :owner, :class_name => 'User', :foreign_key => 'owner_id'
  has_many :subordinates, :class_name => 'User'
  has_many :rules, :through => "owner_rules"
end 
```

* * *

```
#Models/OwnerRule.rb
class OwnerRule < ActiveRecord::Base
    belongs_to :users
    belongs_to :rules
end 
```

* * *

```
#Models/Rule.rb
class Rule < ActiveRecord::Base
    has_many :users, :through => "owner_rules"
end 
```

[**这个 ruby​​onrails 指南**](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)对此有很好的指导。

所以重点是，一个`user`对象将有两个方法`owner`和`subordinates`. 如果您调用`user.owner`，那么它将返回**id**等于**user.owner_id**的用户。
如果您调用`user.subordinates`，那么它将返回在其**owner_id**列中具有**user.id的所有用户。**

 ***让我知道是否让它有点复杂：P*

现在，在迁移脚本的情况下，您只需创建您命名的列。

**更新：**

好吧，如果我们只是重新组织您的要求

*   一个用户可以有许多规则。
*   许多规则可以应用于一个用户
*   一个用户可以拥有一个同时也是用户的所有者
*   一个所有者将有许多下属也是用户。

然后我更新了我上面的代码。现在看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:25:09.550

您需要三个表，因为“应用于用户的规则”是多对多的，所以它需要一个连接表。

您还需要重命名“用户创建的规则”或“应用到用户的规则”，否则会出现名称冲突。

表：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      #stuff left out

      t.references :owner

      #stuff left out
    end
  end
end

class CreateRules < ActiveRecord::Migration
  def change
    create_table :rules do |t|
      #stuff left out

      t.references :owner

      #stuff left out
    end
  end
end

class CreateRulesUsers < ActiveRecord::Migration
  def change
    create_table :rules_users do |t|
      t.references :user
      t.references :rule
    end
  end
end 
```

楷模

*   用户

    ```
    has_many :owned_users, :class_name => "User", :foreign_key => "owner_id", :inverse_of => :owner
    belongs_to :owner, :class_name => "User", :foreign_key => "owner_id", :inverse_of => :owned_users
    has_and_belongs_to_many :rules # uses the join table
    has_many :owned_rules, :class_name => "Rule", :foreign_key => "owner_id", :inverse_of => :owner 
    ```

*   规则

    ```
    belongs_to :owner, :class_name => "User", :foreign_key => "owner_id", :inverse_of => :owned_rules
    has_and_belongs_to_many :users # uses the join table, it's the users to which the rule applies 
    ```**

# wpf - 使用自动登录更改非管理员用户帐户的 Win 7 Shell

> ID：12688383
> 
> 赞同：0
> 
> 时间：2012-10-02T10:11:02.870
> 
> 标签：wpf, windows, shell, admin

我需要一个 WPF 应用程序以“信息亭模式”运行，[这](https://stackoverflow.com/questions/3702664/replacing-the-windows-shell-with-a-wpf-app)看起来像是这样做的方法。但我不清楚几个问题：

我要替换外壳的用户帐户是否必须是管理员帐户？或者我可以从我的管理员帐户为非管理员帐户执行此操作吗？

更改外壳后，我还可以使用自动登录吗？机器每天早上都会重新启动，我希望它直接进入应用程序。

如果我更改 shell 并使用自动登录，我如何以不同的用户身份登录？

该应用程序是多点触控应用程序，不会出现物理键盘。它是 Windows 7，但我不确定它是否是 Enterprise。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:08:23.420

信息亭帐户不应是管理员。

这是一个用户注册表项（以 开头`HKEY_CURRENT_USER`），因此不需要特殊权限。您可以从 kiosk 用户帐户本身进行此更改，或者，如果 kiosk 用户帐户已登录，您可以从管理员帐户进行更改 - 转到`HKEY_USERS`并查找与 kiosk 帐户关联的密钥。如果您知道信息亭帐户的 SID，您可以通过这种方式找到正确的密钥，否则只需使用试错法 - 每个用户的 Environment 子密钥都包含他们的用户名。

拥有自定义外壳不会干扰自动登录。

您可以在登录屏幕出现之前按 SHIFT 键绕过自动登录。您可能需要反复点击它才能获得正确的时间。或者，如果机器有网络连接，您可以使用远程桌面远程登录。

# node.js - 我看到很多关于 nginx + node.js 的教程，但我可以设置每个域，就像那样，没有限制？我无法理解它是如何工作的

> ID：12688384
> 
> 赞同：1
> 
> 时间：2012-10-02T10:11:11.567
> 
> 标签：node.js, ubuntu, webserver

我看到：[http](http://wellconsidered.be/post/10519707671/node-js-on-nginx) ://wellconsidered.be/post/10519707671/node-js-on-nginx和[Node.js + Nginx - 现在怎么办？](https://stackoverflow.com/questions/5009324/node-js-nginx-and-now)

但在他们的教程中说：

```
 server_name www.yoursite.com; 
```

或者

```
 server_name yourdomain.com yourdomain; 
```

但在我的情况下，我没有域，我在企业中的机器上有一个静态 IP（192.168.1.16）。我应该将 server_name 设置为 192.168.1.16 吗？但无论如何我也可以设置为 www.google.com？我无法理解这些限制或 server_name 变量究竟是什么。

我也看到

```
listen   80;
server_name www.yoursite.com; 
```

为什么我在这种情况下听80？它到底是什么端口，本地服务器的端口还是什么？

我想 nginx 应该是服务器的全局路由器，并且在它的静态 ip（192.168.1.16：不知道端口？？这很重要？）处收到的每个请求都会被重定向到内部 ips，这就是为什么我不明白为什么我应该定义 server_name ..

我希望为从未使用过服务器的人提供更好的解释。

我对 ubuntu 和服务器配置非常陌生，所以这可能是一个非常明显的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:59:23.257

1）参数的原因`server_name`是几个不同的域名可以都指向同一个IP地址。当浏览器连接到包含域名的 URL 时，它首先会进行 DNS 查找以找到适当的 IP 地址。然后它连接到该地址并建立一个 HTTP 连接，该连接包括一个标头，`Host:`后跟来自 URL 的域名。该标头告诉服务器请求是针对哪个域的。

`Host:`在正常情况下，除非 DNS 将该域名解析为其 IP 地址，否则服务器不会在标头中看到特定域名。因此，如果您将“www.google.com”放在该`server_name`字段中，服务器将看到它的唯一方法是您编辑`hosts`文件以使用您的 IP 地址添加“www.google.com”条目，因为那是首先是您的操作系统的 DNS 解析器（当然，您的浏览器，但没有其他人的，总是会转到您的服务器而不是 Google 的）。

如果你没有域名，你可以随便编一个；如果您仅通过数字 IP URL 访问它，服务器将永远不会真正看到它。

2) 80 是 HTTP 服务器的默认端口：除非您在 URL 中明确指定另一个端口，否则将连接到端口 80。服务器可以监听多个端口，但也可以有多个服务器监听到多个端口。因此，服务器需要知道它应该监听哪些端口。

# net-snmp - 对 TCP 和 UDP MIB 的 Net-SNMP 支持

> ID：12688386
> 
> 赞同：0
> 
> 时间：2012-10-02T10:11:19.110
> 
> 标签：net-snmp

Net-SNMP 是否支持开箱即用的 TCP 和 UDP MIB？

[http://net-snmp.sourceforge.net/docs/mibs/tcp.html](http://net-snmp.sourceforge.net/docs/mibs/tcp.html)

[http://net-snmp.sourceforge.net/docs/mibs/udp.html](http://net-snmp.sourceforge.net/docs/mibs/udp.html)

Net-SNMP 是否具有公开 TCP 和 UDP MIB 信息的内置代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:14:33.900

TCP-MIB随 net-snmp 一起提供，但代理默认不发布它*。*编辑您的 /etc/snmp/snmpd.conf 并将此行添加到与类似行相同的节中：

```
view    systemview    included   .1.3.6.1.2.1.6 
```

您可能必须将“systemview”更改为“system”，或者您的特定发行版中使用的任何名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:16:47.263

我希望您可以通过 Net-SNMP 检索任何已发布的 SNMP 信息。如果代理发布它，那么您将能够获取/遍历该信息。

我可能期望的唯一配置是您需要在管理器/客户端安装适当的 MIB，以便您可以将 OID 转换为名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:50:02.963

NET-SNMP 框架为 SNMP 代理提供了相当广泛的 RFC 支持。如果要为 TCP-MIB 和 UDP-MIB 启用 MIB 模块处理程序，只需在执行配置脚本时使用以下选项启用它们：

```
./configure --with-mib-modules=udp-mib,tcp-mib 
```

但是，您可以通过对 1.3.6.1.2.1.6 OID 执行简单的 snmpwalk 命令来检查这些 MIB 是否默认启用（这可能取决于使用的 NET-SNMP 版本）。

希望有帮助。

# android - 当我尝试从我的片段中获取图像时应用程序崩溃

> ID：12688387
> 
> 赞同：1
> 
> 时间：2012-10-02T10:11:26.297
> 
> 标签：android, fragment, android-image

我有一个看起来很疯狂的错误？？？

我正在从我的活动中开始一个片段。

在我调用 startActivityForResult 的片段中，试图从图库中获取图像。

```
Intent intent = new Intent();
intent.setType("image/*"); 
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent,"Select Image"), SELECT_IMAGE); 
```

当我从画廊回来时，我的应用程序崩溃了。我跟踪了这​​个问题，我看到当我返回我的活动时，我看到`onCreate()`我的片段再次启动。我不明白为什么我的片段被再次创建，而我的 web 服务对象被删除了。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);   
    // TODO: Bug mWebServicesManager.getEditingBlogItem() return null sometimes, only when i open first time get image from galerie

    Log.i("EditImageSectionFragment","mWebServicesManager.getEditingBlogItem() ="+mWebServicesManager.getEditingBlogItem());    
    mSection = (ImagesSection) mWebServicesManager.getEditingBlogItem().getSections().get(mSectionPosition);
} 
```

当我在 HTC 手机上运行测试时，一切正常，我没有遇到这个错误。但是当我在我的 Nexus S (android 4.1) 上运行该应用程序时，当我尝试获取图像时它总是崩溃。

我想知道为什么我的片段又被创建了？为什么我的 webServiceManager 对象被删除了？

日志猫：

```
10-02 12:34:32.609: E/AndroidRuntime(32344): FATAL EXCEPTION: main
10-02 12:34:32.609: E/AndroidRuntime(32344): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.overblog/com.overblog.activities.EditActivity}: java.lang.NullPointerException
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.os.Looper.loop(Looper.java:137)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.app.ActivityThread.main(ActivityThread.java:4745)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at java.lang.reflect.Method.invokeNative(Native Method)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at java.lang.reflect.Method.invoke(Method.java:511)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at dalvik.system.NativeStart.main(Native Method)
10-02 12:34:32.609: E/AndroidRuntime(32344): Caused by: java.lang.NullPointerException
10-02 12:34:32.609: E/AndroidRuntime(32344):    at com.overblog.fragments.EditImageSectionFragment.onCreateView(EditImageSectionFragment.java:174)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1062)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1810)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:501)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.app.Activity.performStart(Activity.java:5018)
10-02 12:34:32.609: E/AndroidRuntime(32344):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2032)
10-02 12:34:32.609: E/AndroidRuntime(32344):    ... 11 more 
```

# linux - 子进程相互等待

> ID：12688390
> 
> 赞同：0
> 
> 时间：2012-10-02T10:11:43.667
> 
> 标签：linux, process, fork, waitpid

我创建了三个进程，我想同步他们的工作。具体来说，我希望第一个进程等待第二个，第二个等待第三个。基本上以创建它们的相反顺序执行它们。

这是我到目前为止所做的。

```
for (; i < 3 ; i++){
        pids[i] = fork();
        if (pids[i] == 0)
           break;
}
if (pids[i] != 0){
    wait(); // Main thread has to wait..    
}
else{               
     if (i == 0){
        waitpid(pids[1], &status, 0);       
        printProcessInfo(0);        
     }
     else if (i == 1){
        waitpid(pids[2], &status, 0);       
        printProcessInfo(1);        
          }
     else if (i == 2){
        printProcessInfo(2);        
     }              
} 
```

我正在使用 i 检查我所在的子进程，因为我假设我在子进程中得到了正确的 i，所以如果 i = 0，我实际上是第一个子进程。这个假设是真的吗？在任何情况下，我都没有得到我想要的顺序，实际上这些进程是按照它们的自然顺序执行的，绕过了我放置的 waitpid 调用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:21:52.233

不，您将获得 3 个以上的过程。

考虑一个简化版本（这只是删除等待......你做相同数量的分叉）：

```
for (i=0; i < 3 ; i++){
    pids[i] = fork();
} 
```

因为您在 for 循环中执行 fork，而不检查返回值。父母和孩子都会得到自己的孩子。

```
 [###############PARENT###############]
          |           |           |
         i=0         i=1         i=2
          |           |           |
        [ a0 ]      [ b0 ]      [ c0 ]
         / \          |
       i=1 i=2       i=2
       /     \        |
     [a1]   [a2]    [ b1 ]
      |
     i=2
      |
     [a3] 
```

检查返回值后，您必须中断循环`fork`。

# algorithm - 如何自底向上构造二叉搜索树

> ID：12688394
> 
> 赞同：6
> 
> 时间：2012-10-02T10:12:09.483
> 
> 标签：algorithm, linked-list, binary-search-tree

给定一个排序数组，很容易以自上而下的方式从中可视化 BST。例如，如果数组是`[1,2,3,4,5,6,7]`，我们可以看到根将是中间元素，即`4`。在它的左边会有一个子树，它的根是左边的数组切片的中间`4`，即`2`。以同样的方式，它在右边也将是相似的。

我们如何为构建 BST 的自下而上方法进行这种可视化？基本上，我试图理解从排序链表构造 BST 的算法，该链表采用`O(N)`自下而上的方式和`O(Nlog N)`自上而下的方式。所以我需要了解它是如何自下而上构建的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T14:04:29.867

考虑： http: [//www.leetcode.com/2010/11/convert-sorted-list-to-balanced-binary.html](http://www.leetcode.com/2010/11/convert-sorted-list-to-balanced-binary.html)

```
BinaryTree* sortedListToBST(ListNode *& list, int start, int end) {
  if (start > end) return NULL;
  // same as (start+end)/2, avoids overflow
  int mid = start + (end - start) / 2;
  BinaryTree *leftChild = sortedListToBST(list, start, mid-1);
  BinaryTree *parent = new BinaryTree(list->data);
  parent->left = leftChild;
  list = list->next;
  parent->right = sortedListToBST(list, mid+1, end);
  return parent;
}

BinaryTree* sortedListToBST(ListNode *head, int n) {
  return sortedListToBST(head, 0, n-1);
} 
```

让我们写出一些递归调用：

```
0 1 2 3 4 5 6 7 8 -> sortedListToBST(list, 0, 3) [A]
0 1 2 3           -> sortedListToBST(list, 0, 0) [B]
0                 -> sortedListToBST(list, 0, -1) [C]
*                 -> NULL [D] 
```

`[D]`将返回`NULL`。

现在，在 中`[C]`，我们将拥有`leftChild = NULL`和`parent = 0`（列表中的第一个节点）。父母的左孩子将为 NULL，并且列表继续进行。`[C]`然后会调用`sortedListToBst(1, 0)`，它会返回`NULL`，所以右孩子`parent`也会`NULL`。到目前为止，您的树如下所示：

```
 0
     /     \
  null     null 
```

现在，这将返回到左侧调用 in `[B]`，所以`leftChild = 0 = the above`in `[B]`。`parent`in将`[B]`自己设置为`1`（列表中的第二个节点，注意我们在之前的调用中提升了列表头 - 列表是全局的/通过引用传递）。它的左孩子将设置为您在上一步中计算的内容（上面的树）。你的树现在看起来像这样：

```
 1
      /
     0
  /     \
null   null 
```

列表再次前进，指向`2`。`sortedListToBST(list, 2, 3)`将从 进行递归调用`[B]`，这将触发多个递归调用。

写/解释很多，但希望这能让你走上正轨。在纸上应该更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-17T10:09:08.253

如果你有一个排序的输入，那么创建一个二叉树很简单，因为它看起来因为在每个阶段递归地将数组除以左+中+右三部分并将左右附加到父/中，而回溯将创建二叉树（请注意，它不是我们构建的二叉搜索树，而是 BST，因为它是排序的输入的性质）。由于我们在回溯时构建树，每个元素（根+内部节点）最多可能被访问 2 次（分区时 1 次，回溯和分配子节点时其他时间），因此时间复杂度可能最多 O(2n) 或 O(n ） 一般来说。虽然看起来好像我们是从上到下构建树，因为我们执行递归，但实际上我们是自下而上构建树，因为节点在回溯时被构建并互连以形成子树。

这还有一个有趣的事实，即形成的树肯定是一棵完整的二叉树，除了节点从左到右填充的最后一层之外，所有层都完全填充。

当输入大小为 2 的幂时，可以获得完美（完整+平衡）二叉树，其中所有级别都完全填充，包括最后一级。

使用这种技术构建的平衡（abs（leftHeight）-abs（rightHeight）<=1）树可以是完美二叉树或完全二叉树，最后一层只有最左边的一个节点。

这适用于数组和链表。

# ios - iOS APNS - 从商店中删除应用程序后，通知是否仍发送到设备

> ID：12688398
> 
> 赞同：4
> 
> 时间：2012-10-02T10:12:22.970
> 
> 标签：ios, app-store, push-notification, apple-push-notifications

我正在将我的应用程序转换到新的开发者帐户，这意味着从商店中删除该应用程序并在新帐户下重新提交。我的应用程序使用 APNS，我的问题是，在我“从销售中移除”后，通知是否会继续发送到现有已安装的应用程序？我完全删除应用程序后怎么样？我想发送一条消息，通知用户该应用正在移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:52:03.390

我现在可以回答我自己的问题 - 我继续从应用商店中删除了该应用，然后完全删除了该应用。我很高兴地说推送通知可以继续发送。

# java - 对同一个数据库有多个 @PersistenceContext 是否可以？

> ID：12688399
> 
> 赞同：2
> 
> 时间：2012-10-02T10:12:26.607
> 
> 标签：java, jpa

我将 JPA 用于我的应用程序的数据访问层。

我为每个表（实体）都有一个 DAO 类，并且在每个表中我通过 @PersistenceContext 注释获得实体管理器。但是最近我读到这意味着我的每个 DAO 类都有一个缓存版本的数据库，从性能的角度来看，这显然不是理想的。

在这种情况下，最佳实践是什么（显然，将所有 DAO 方法放在一个巨大的类中不是一种选择）？关于该主题的任何进一步阅读？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:20:17.533

最佳实践是将持久性上下文注入需要它们的类 - 让容器正确处理。

[CDI](http://en.wikipedia.org/wiki/Contexts_and_Dependency_Injection)有多种选择：

*   JBoss 有[Seam](http://en.wikipedia.org/wiki/JBoss_Seam)
*   Apache tomcat 有[Spring](http://en.wikipedia.org/wiki/Spring_Framework)
*   ETC

# sql - 在 vb.net 中正确排序数据集

> ID：12688400
> 
> 赞同：0
> 
> 时间：2012-10-02T10:12:27.660
> 
> 标签：sql, vb.net, sorting, dataset

在表 1 中，我有一列：cCLLID,cCLID,nLID 我的问题是对数字字段 nLID 进行排序。前任。nLID的记录是：1,2,3,4,5,10,11,12 当我使用下面的代码时，nLID的记录是：1,10,11,12,2,3,4,5

```
 For Each row As DataRow In .sDataSet.Tables("Table1").Select("cCLID='" & _cCLID.Text_Value & "'", "cCLID,nLID") 
   row("nLID") = j
   row("cCLLID") = row("cCLID") & "-" & row("nLID")
   j = j + 1
 Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:16:37.320

你必须这样做：

**编辑**

```
DataView dv = sDataSet.Tables("Table1").DefaultView;
dv.Sort = "nLID"; 
```

现在，只需使用 Dataview`dv`

# php - XML 到 CSV：创建平面文件的原生方式？

> ID：12688404
> 
> 赞同：1
> 
> 时间：2012-10-02T10:12:45.403
> 
> 标签：php, xml, parsing, csv

有很多关于 XML 到 CSV 转换的问题，但我的非常精确，所以我在这里问。

我威胁库存并获取 XML 文件，例如：

```
<item>
   <sku>abc</sku>
   <title>un livre</title>
   <price>42</price>
   <attributes>
      <attribute>
          <name>Nombre de pages</name>
          <value>123</value>
      </attribute>
      <attribute>
          <name>Auteur</name>
          <value>bob la mouche</value>
      </attribute>
   </attributes>
   <contributors>
      <contributor>toto</contributor>
      <contributor>titi</contributor>
      <contributor>tata</contributor>
   </contributors>
</item> 
```

我需要将其转换为 2D 格式。我想使用一种众所周知的格式，如数组/对象配置，列看起来像：

```
sku
title
price
attributes.attribute[0].name
attributes.attribute[0].value
attributes.attribute[1].name
attributes.attribute[1].value
contributors.contributor[0]
contributors.contributor[1]
contributors.contributor[2] 
```

如果没有直接答案，请不要为我编写代码，我知道如何制作，并很乐意与您分享。但这只是为了知道是否有直接的方法（例如使用 xml 解析库中某处存在的非常奇特的 XML 方法）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:23:05.147

好的，所以只是粗略的框架：

```
from lxml import etree
import csv

tree = etree.fromstring(xml_string, parser=etree.XMLParser())
with open(outfilepath, 'w') as f:
    writer = csv.writer(f)
    writer.writerow(<fieldnames>)
    for item_node in tree.xpath('//item'):
        var1 = item_node.xpath('.../text()')[0]
        ...
        writer.writerow(var1, var2, ...) 
```

如果您的 XML 非常大并且无法将其放入内存中，那么您还有不同的选择，可以从文件中按顺序读取。尽管如此，我还是以这种方式解析了几个 MB 的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:50:02.410

没有找到任何有效的方法来做到这一点。[RecursiveIteratorIterator](http://fr2.php.net/manual/en/class.recursiveiteratoriterator.php)是一个很好的候选者，但不幸的是，它只给出了一个单值作为键，而不是最终节点的完整路径。

我终于开发了一个类来做这个确切的事情：它接受任何 XML 文档并创建一个具有“数组/对象”配置的 CSV。

```
/**
 * This class converts a multidimentional XML file into a CSV file.
 * First XML level are distinct CSV lines
 * Last XML level are values
 * Path from the first to the last XML levels are CSV column names.
 *
 * @todo May be conflicts with XML nodes with names finishing by [n].
 *              => Case <x>test</x><x>test</x><x[0]>test</x[0]>
 *                 will generate 2 times x[0] on CSV file.
 *
 * @author ninsuo <ninsuo at gmail dot com>
 */
class Xml2Csv
{

    /**
     * An array that looks like :
     *
     * array(
     *   'simple.name' => stdClass(
     *      ->names => array('real.name[0]', 'real.name[1]', ...)
     *      ->positions => array('position-in-rows-1', 'position-in-rows-2', ...)
     *   ),
     *   ...
     * )
     *
     * Allow us to create dynamic column names according to
     * content disposition.
     *
     * @access private
     * @var array
     */
    private $columnNames;

    /**
     * Rows of CSV file
     *
     * @access private
     * @var array
     */
    private $rows;

    /**
     * Current row number
     *
     * @access private
     * @var int
     */
    private $rowNumber;

    public function convert($xmlSource, $csvTarget)
    {
        $this->_checkSourceAndTarget($xmlSource, $csvTarget);

        libxml_use_internal_errors();
        try
        {
            $tree = new SimpleXMLIterator($xmlSource, 0, true);
        }
        catch (Exception $e)
        {
            throw new Exception("Can't load XML : " . $e->getMessage());
        }
        libxml_clear_errors();

        $this->_reset();

        $this->_browseXMLTree($tree);
        unset($tree);

        $this->_writeCSV($csvTarget);

        $this->_reset();
    }

    /**
     * Checks if $source file exists and is readable.
     * Checks if $target file is writable
     *
     * @access private
     * @param string $source
     * @param string $target
     * @throws Exception
     */
    private function _checkSourceAndTarget($source, $target)
    {
        if ((!is_file($source)) || (!is_readable($source)))
        {
            throw new Exception("Source file does not exist or is not readable.");
        }
        if (((is_file($target)) && (!is_writable($target))) || (!is_writable(dirname($target))))
        {
            throw new Exception("Target file is not writable.");
        }
    }

    /**
     * Reset attributes (avoid taking huge amount of memory when converting big files)
     *
     * @access private
     */
    private function _reset()
    {
        $this->columnNames = array ();
        $this->rows = array ();
        $this->rowNumber = 0;
    }

    /**
     * First XML-level are CSV rows
     *
     * @access private
     * @param SimpleXMLIterator $tree
     */
    private function _browseXMLTree($tree)
    {
        foreach ($tree as $node)
        {
            if (count($node) > 0)
            {
                $this->rows[$this->rowNumber] = array ();
                $this->_browseXMLNode($node);
                $this->rowNumber++;
            }
        }
    }

    /**
     * Browsing next XML levels until a node has no child (CSV value)
     *
     * @access private
     * @param type $node
     * @param array $path
     */
    private function _browseXMLNode($node, array &$path = array ())
    {
        array_push($path, $node->getName());
        foreach ($node as $key => $child)
        {
            if (count($child) > 0)
            {
                $this->_browseXMLNode($child, $path);
            }
            else
            {
                $this->_addValue(implode('.', $path) . '.' . $key, strval($child));
            }
        }
        array_pop($path);
    }

    /**
     * Create a CSV column if it does not exist.
     * Add a value to the given CSV column.
     *
     * @access private
     * @param string $path
     * @param string $value
     */
    private function _addValue($column, $value)
    {
        if (array_key_exists($column, $this->columnNames))
        {
            $columnInfo = $this->columnNames[$column];
            foreach ($columnInfo->positions as $position)
            {
                if (array_key_exists($position, $this->rows[$this->rowNumber]) == false)
                {
                    $this->rows[$this->rowNumber][$position] = $value;
                    return;
                }
            }
            if (count($columnInfo->positions) == 1)
            {
                $columnInfo->names[0] .= '[0]';
            }
            $columnPosition = $this->_countCSVColumns();
            array_push($columnInfo->names, $column . '[' . count($columnInfo->positions) . ']');
            array_push($columnInfo->positions, $columnPosition);
            $this->columnNames[$column] = $columnInfo;
            $this->rows[$this->rowNumber][$columnPosition] = $value;
        }
        else
        {
            $columnPosition = $this->_countCSVColumns();
            $columnInfo = new stdClass();
            $columnInfo->names[0] = $column;
            $columnInfo->positions[0] = $columnPosition;
            $this->columnNames[$column] = $columnInfo;
            $this->rows[$this->rowNumber][$columnPosition] = $value;
        }
    }

    /**
     * Return current number of columns in the CSV file.
     * Used to get index of a new column.
     *
     * @access private
     * @return int
     */
    private function _countCSVColumns()
    {
        $count = 0;
        foreach ($this->columnNames as $columnInfo)
        {
            $count += count($columnInfo->positions);
        }
        return $count;
    }

    /**
     * Write CSV file
     *
     * @access private
     * @param string $csvTarget
     */
    private function _writeCSV($csvTarget)
    {
        $columns = $this->_getCSVColumns();
        if (($handle = fopen($csvTarget, 'w')) === false)
        {
            throw new Exception("Cannot open target file : fopen() failed.");
        }
        $this->_writeCsvRow($handle, $columns);

        $columnPositions = array_keys($columns);
        $columnNumber = count($columnPositions);
        for ($currentRow = 0; ($currentRow < $this->rowNumber); $currentRow++)
        {
            $csvRow = array ();
            for ($currentColumn = 0; ($currentColumn < $columnNumber); $currentColumn++)
            {
                $position = $columnPositions[$currentColumn];
                if (array_key_exists($position, $this->rows[$currentRow]) == false)
                {
                    $csvRow[$position] = '';
                }
                else
                {
                    $csvRow[$position] = $this->rows[$currentRow][$position];
                }
            }
            $this->_writeCsvRow($handle, $csvRow);
        }

        fclose($handle);
    }

    /**
     * Return CSV columns as a single array
     *
     * @access private
     * @return array
     */
    private function _getCSVColumns()
    {
        $columns = array ();
        foreach ($this->columnNames as $columnInfo)
        {
            foreach ($columnInfo->names as $key => $name)
            {
                $columns[$columnInfo->positions[$key]] = $name;
            }
        }
        ksort($columns);
        return $columns;
    }

    /**
     * Write a row into CSV file
     *
     * @access private
     * @param resource $handle
     * @param array $csvRow
     * @throws Exception
     */
    private function _writeCsvRow($handle, $csvRow)
    {
        if (fputcsv($handle, $csvRow, "\t", '"') === false)
        {
            fclose($handle);
            throw new Exception("Cannot write target file, fputcsv() failed.");
        }
    }

} 
```

# 演示：

1/ 创建一个 demo.xml 文件：

```
<items>
<item>
   <sku>abc 1</sku>
   <title>a book 1</title>
   <price>42 1</price>
   <attributes>
      <attribute>
          <name>Number of pages 1</name>
          <value>123 1</value>
      </attribute>
      <attribute>
          <name>Author 1</name>
          <value>Rob dude 1</value>
      </attribute>
   </attributes>
   <contributors>
      <contributor>John 1</contributor>
      <contributor>Ryan 1</contributor>
   </contributors>
</item>
<item>
   <sku>abc 2</sku>
   <title>a book 2</title>
   <price>42 2</price>
   <attributes>
      <attribute>
          <name>Number of pages 2</name>
          <value>123 2</value>
      </attribute>
      <attribute>
          <name>Author 2</name>
          <value>Rob dude 2</value>
      </attribute>
   </attributes>
   <contributors>
      <contributor>John 2</contributor>
      <contributor>Ryan 2</contributor>
   </contributors>
</item>
</items> 
```

2/ 把它放在你工作的某个地方

```
$service = new Xml2Csv();
$service->convert('demo.xml', 'demo.csv'); 
```

3/ 检查“demo.csv”输出：

```
item.sku    item.title  item.price  item.attributes.attribute.name[0]   item.attributes.attribute.value[0]  item.attributes.attribute.name[1]   item.attributes.attribute.value[1]  item.contributors.contributor[0]    item.contributors.contributor[1]
"abc 1" "a book 1"  "42 1"  "Number of pages 1" "123 1" "Author 1"  "Rob dude 1"    "John 1"    "Ryan 1"
"abc 2" "a book 2"  "42 2"  "Number of pages 2" "123 2" "Author 2"  "Rob dude 2"    "John 2"    "Ryan 2" 
```

注意：这写得很快，但你当然可以通过向`convert()`方法添加一些参数来更改 CSV 分隔符或任何你想要的东西。

享受。

# css - 标签和标签之间的差距- 为什么？ 和 <select>字段之间有一个小间隙，我不知道是什么原因造成的？访问 http://jsfiddle.net/xrvbv/6/ 你会注意到</select> 没有正确对齐。CSS: .FormStyle 标签 { display: inline-block; 宽度：130px；文本对齐：右；padding-right: 7px; 字体大小：11px；颜色：#666

> ID：12688405
> 
> 赞同：7
> 
> 时间：2012-10-02T10:12:47.223
> 
> 标签：css

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T10:14:46.870

这是由空格引起的。改成

```
<label>Title</label><select name="title"> 
```

你会看到差距消失了。

如果你*真的*想保持你的行分开，你可以使用注释，如下所示，或者移动结束标签的 >：

```
 <label>Title</label
        ><select name="title"> 
```

我认为这两种解决方案都不是很好，您只是在浪费带宽发送您不想要或不需要的空白。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:18:42.050

那是因为在 和 之间有一个换行符和一个制表`label`符`select`。如果将标签放在同一行并删除标签，则间隙将消失。

↪[在 JSFiddle 上查看](http://jsfiddle.net/xrvbv/12/)

> HTML 的一个特性是所有空白都被同等对待。任何空白字符序列都被视为单个空格。

（引用自：http: [//www.maproom.co.uk/invis1.htm](http://www.maproom.co.uk/invis1.htm)）

为了防止在保持缩进的同时出现间隙，您可以使用以下任一技巧：

1.  将标签`>`的移动`label`到下一行。尽管这是[有效的 HTML](http://imageshack.us/a/img40/3931/valithtml.png)，但这可能会令人困惑，而不是您想要的。
2.  注释掉标签之间的空白（通过将其放在`<!--`和之间`-->`）。 *这两种选择都在浪费带宽。*
3.  在服务器端编程语言的标签之间放置空格，例如`<?php /*whitespace*/ ?>`. 这可能会导致服务器负载的低增加。

所有这些选项都令人困惑，可能不是您想要的，所以我建议您简单地省略空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:47:55.717

不

尝试删除

```
padding-right: 7px; 
```

在 CSS

这确实是诀窍

```
.FormStyle label {
 display: inline-block; 
 width: 130px;
 text-align: right;
 padding-right: 0;
 margin: 0;
 font-size: 11px;
 color: #666;
 font-weight: bold;
} 
```

# android - Android TextureView画布绘制问题

> ID：12688409
> 
> 赞同：4
> 
> 时间：2012-10-02T10:13:09.270
> 
> 标签：android, 2d, surfaceview

我有一个使用 SurfaceView 绘制动态 2D 图形的应用程序。它工作正常，但不支持我们知道的转换等。所以我去了TextureView。我的旧代码使用另一个类/线程通过 Surfaceholder.lockCanvas(); 进行绘图。所以我把它改成了TextureView.lockcanvas。当它运行时，未加速的画布（视图是）最初不会显示，但如果我触摸屏幕 onSurfaceTextureUpdated（当前没有代码内部）被调用并显示？？？

```
protected void RenderCanvas(){
//mCanvas = null;
Canvas c = null;
//synchronized (mCanvas) {
    //mCanvas = null;
    try {
        c = mChartView.lockCanvas(null);
         if (!c.isHardwareAccelerated()) {
               Log.w("GVIEW", "A TextureView or a subclass can only be "
                         + "used with hardware acceleration enabled.");
           }
        synchronized (mCanvas) {
            c.drawBitmap(buffBitmap, 0, 0, null);

        }
    } finally {
        // do this in a finally so that if an exception is thrown
        // during the above, we don't leave the Surface in an
        // inconsistent state
        if (c != null) {
            mChartView.unlockCanvasAndPost(c);
            //mSurfaceHolder.updateTexImage();
        }
    } 
```

}

我在我的 TextureView 中实现了 SurfaceTextureListener，所有的程序流程看起来都很好，一个真实的表面被交给了绘图线程

```
@Override

public void onSurfaceTextureAvailable(SurfaceTexture surface, int width,

        int height) {

    // TODO Auto-generated method stub

    isRunning = true;

    mySurface = surface;

    mChart.setTextureSurface(surface);

    mChart.setSurfaceSize(width, height);

    mChart.Redraw(true) 

} 
```

这个 void 以上面的 RenderCanvas() 结束。

除非我再次触摸屏幕，否则重绘或使视图无效也不起作用。

我不能像这样使用 TextureView 吗？

它必须是openGl内容流吗？

# python - 在 Mountain Lion 上使用 pip 安装 SciPy 0.11

> ID：12688412
> 
> 赞同：0
> 
> 时间：2012-10-02T10:13:20.633
> 
> 标签：python, installation, package, scipy, pip

> **可能重复：**
> [山狮上的 scipy 安装失败](https://stackoverflow.com/questions/12574604/scipy-install-on-mountain-lion-failing)

今天，我已按照[此处](http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/)的说明设置开发环境。说明建议在运行 Mountain Lion 时使用开发版本（编写链接文章时为 0.11）。但是，默认的 pip 安装现在是 0.11 版，所以我猜这应该不是问题。在我的机器上安装失败，日志如下。

任何人都可以提出解决问题的方法吗？

（注意，尝试安装开发版也失败了）

```
pip install scipy

> Downloading/unpacking scipy   Running setup.py egg_info for package
> scipy
>     Running from scipy source directory.
>     blas_opt_info:
>       FOUND:
>         extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
>         define_macros = [('NO_ATLAS_INFO', 3)]
>         extra_compile_args = ['-msse3', '-I/System/Library/Frameworks/vecLib.framework/Headers']
>     
>     lapack_opt_info:
>       FOUND:
>         extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
>         define_macros = [('NO_ATLAS_INFO', 3)]
>         extra_compile_args = ['-msse3']
>     
>     umfpack_info:
>       libraries umfpack not found in /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib
>     amd_info:
>       libraries amd not found in /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib
>       FOUND:
>         libraries = ['amd']
>         library_dirs = ['/usr/local/lib']
>         swig_opts = ['-I/usr/local/include']
>         define_macros = [('SCIPY_AMD_H', None)]
>         include_dirs = ['/usr/local/include']
>     
>       FOUND:
>         libraries = ['umfpack', 'amd']
>         library_dirs = ['/usr/local/lib']
>         swig_opts = ['-I/usr/local/include', '-I/usr/local/include']
>         define_macros = [('SCIPY_UMFPACK_H', None), ('SCIPY_AMD_H', None)]
>         include_dirs = ['/usr/local/include']
>     
>     Traceback (most recent call last):
>       File "<string>", line 16, in <module>
>       File "/var/folders/dt/vmqtg5kj26q2vkzrfwg_6hz40000gn/T/pip-build/scipy/setup.py",
> line 208, in <module>
>         setup_package()
>       File "/var/folders/dt/vmqtg5kj26q2vkzrfwg_6hz40000gn/T/pip-build/scipy/setup.py",
> line 199, in setup_package
>         configuration=configuration )
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/core.py",
> line 152, in setup
>         config = configuration()
>       File "/var/folders/dt/vmqtg5kj26q2vkzrfwg_6hz40000gn/T/pip-build/scipy/setup.py",
> line 136, in configuration
>         config.add_subpackage('scipy')
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 1002, in add_subpackage
>         caller_level = 2)
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 971, in get_subpackage
>         caller_level = caller_level + 1)
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 908, in _get_configuration_from_setup_py
>         config = setup_module.configuration(*args)
>       File "scipy/setup.py", line 19, in configuration
>         config.add_subpackage('special')
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 1002, in add_subpackage
>         caller_level = 2)
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 971, in get_subpackage
>         caller_level = caller_level + 1)
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 908, in _get_configuration_from_setup_py
>         config = setup_module.configuration(*args)
>       File "/private/var/folders/dt/vmqtg5kj26q2vkzrfwg_6hz40000gn/T/pip-build/scipy/scipy/special/setup.py",
> line 54, in configuration
>         extra_info=get_info("npymath")
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 2220, in get_info
>         pkg_info = get_pkg_info(pkgname, dirs)
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 2172, in get_pkg_info
>         return read_config(pkgname, dirs)
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py",
> line 390, in read_config
>         v = _read_config_imp(pkg_to_filename(pkgname), dirs)
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py",
> line 326, in _read_config_imp
>         meta, vars, sections, reqs = _read_config(filenames)
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py",
> line 309, in _read_config
>         meta, vars, sections, reqs = parse_config(f, dirs)
>       File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py",
> line 281, in parse_config
>         raise PkgNotFound("Could not find file(s) %s" % str(filenames))
>     numpy.distutils.npy_pkg_config.PkgNotFound: Could not find file(s) ['/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/lib/npy-pkg-config/npymath.ini']
>     Complete output from command python setup.py egg_info:
>     Running from scipy source directory.
> 
> blas_opt_info:
> 
>   FOUND:
> 
>     extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
> 
>     define_macros = [('NO_ATLAS_INFO', 3)]
> 
>     extra_compile_args = ['-msse3', '-I/System/Library/Frameworks/vecLib.framework/Headers']
> 
> 
> 
> lapack_opt_info:
> 
>   FOUND:
> 
>     extra_link_args = ['-Wl,-framework', '-Wl,Accelerate']
> 
>     define_macros = [('NO_ATLAS_INFO', 3)]
> 
>     extra_compile_args = ['-msse3']
> 
> 
> 
> umfpack_info:
> 
>   libraries umfpack not found in
> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib
> 
> amd_info:
> 
>   libraries amd not found in
> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib
> 
>   FOUND:
> 
>     libraries = ['amd']
> 
>     library_dirs = ['/usr/local/lib']
> 
>     swig_opts = ['-I/usr/local/include']
> 
>     define_macros = [('SCIPY_AMD_H', None)]
> 
>     include_dirs = ['/usr/local/include']
> 
> 
> 
>   FOUND:
> 
>     libraries = ['umfpack', 'amd']
> 
>     library_dirs = ['/usr/local/lib']
> 
>     swig_opts = ['-I/usr/local/include', '-I/usr/local/include']
> 
>     define_macros = [('SCIPY_UMFPACK_H', None), ('SCIPY_AMD_H', None)]
> 
>     include_dirs = ['/usr/local/include']
> 
> 
> 
> Traceback (most recent call last):
> 
>   File "<string>", line 16, in <module>
> 
>   File
> "/var/folders/dt/vmqtg5kj26q2vkzrfwg_6hz40000gn/T/pip-build/scipy/setup.py",
> line 208, in <module>
> 
>     setup_package()
> 
>   File
> "/var/folders/dt/vmqtg5kj26q2vkzrfwg_6hz40000gn/T/pip-build/scipy/setup.py",
> line 199, in setup_package
> 
>     configuration=configuration )
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/core.py",
> line 152, in setup
> 
>     config = configuration()
> 
>   File
> "/var/folders/dt/vmqtg5kj26q2vkzrfwg_6hz40000gn/T/pip-build/scipy/setup.py",
> line 136, in configuration
> 
>     config.add_subpackage('scipy')
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 1002, in add_subpackage
> 
>     caller_level = 2)
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 971, in get_subpackage
> 
>     caller_level = caller_level + 1)
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 908, in _get_configuration_from_setup_py
> 
>     config = setup_module.configuration(*args)
> 
>   File "scipy/setup.py", line 19, in configuration
> 
>     config.add_subpackage('special')
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 1002, in add_subpackage
> 
>     caller_level = 2)
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 971, in get_subpackage
> 
>     caller_level = caller_level + 1)
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 908, in _get_configuration_from_setup_py
> 
>     config = setup_module.configuration(*args)
> 
>   File
> "/private/var/folders/dt/vmqtg5kj26q2vkzrfwg_6hz40000gn/T/pip-build/scipy/scipy/special/setup.py",
> line 54, in configuration
> 
>     extra_info=get_info("npymath")
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 2220, in get_info
> 
>     pkg_info = get_pkg_info(pkgname, dirs)
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/misc_util.py",
> line 2172, in get_pkg_info
> 
>     return read_config(pkgname, dirs)
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py",
> line 390, in read_config
> 
>     v = _read_config_imp(pkg_to_filename(pkgname), dirs)
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py",
> line 326, in _read_config_imp
> 
>     meta, vars, sections, reqs = _read_config(filenames)
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py",
> line 309, in _read_config
> 
>     meta, vars, sections, reqs = parse_config(f, dirs)
> 
>   File
> "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/distutils/npy_pkg_config.py",
> line 281, in parse_config
> 
>     raise PkgNotFound("Could not find file(s) %s" % str(filenames))
> 
> numpy.distutils.npy_pkg_config.PkgNotFound: Could not find file(s)
> ['/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/lib/npy-pkg-config/npymath.ini'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:48:29.370

因此，在花费了一些时间之后，看起来这是 and 之间的`pip`问题`numpy`。这个问题[之前已在 SO 上](https://stackoverflow.com/questions/12574604/scipy-install-on-mountain-lion-failing)解决，您可以尝试查看提出的解决方案（基本上是重新安装 numpy）是否适合您。

# php - 触发在 PHP 中动态创建的提交按钮

> ID：12688415
> 
> 赞同：0
> 
> 时间：2012-10-02T10:13:34.500
> 
> 标签：php

嗨，有人可以指出我的方法出了什么问题。在我的代码中，我得到一个名为“sendme”的动态提交按钮，一旦出现，我想在“sendme”被触发后回显一条消息。为此，我包括 if(isset($_POST['sendme'])){...... 代码，但它似乎不是有效的代码。请指出我的理性在这种情况下应该如何改变。感谢您的关注！

```
 <?php 
if(isset($_POST['sendone'])){

$Q = $_POST['txt5'];
$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('db_customer',$con) or die ("Couldn't connect the database");
$SQL="SELECT * FROM tbl_customer WHERE name='$Q'";
$run=mysql_query($SQL,$con) or die ("SQL Error");
$row=mysql_fetch_array($run);

if($row=="")
{
echo "No records found";
}
else
{
echo "<table border='1'>";
echo "<tr><td>"."Name :"."</td>";
echo "<td><input type='text' value=".$row['name'].">"."</td>";
echo "<td><input type='submit' id='sendme' name='sendme'></td>";
echo "</tr>";
echo "</table>";
}
}
else {
    // here I'm trying to fire the populated submit button and echo cheers!
if(isset($_POST['sendme'])){
echo 'Cheers!';
}}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:15:44.823

您不创建表单。在您的 s`<form action="nameofyourphpscript" method="POST">`上方和它们下方放置 a 。`<input>``</form>`

# javascript - 使用 jquery 进行深度复制不起作用

> ID：12688417
> 
> 赞同：0
> 
> 时间：2012-10-02T10:13:37.750
> 
> 标签：javascript, jquery

几个小时以来，我尝试构建自己的幻灯片来玩一些 javascript。

我有一个对象 $pic，其中包含我网站的所有图像。到目前为止没问题。我的图像在我的网站上显示为拇指。

现在，当我单击 .rightslide 按钮时，由于 slidenavi() 函数，脚本会获取当前图像的下一个和上一个图像。这也有效。但它不会深度复制 slidenavi() 函数返回的对象，因此应该复制的图像被带走......所以根本没有复制！

我能做些什么？

```
 function slidenavi(image_src){
        $nextpic_index="";
        $prevpic_index="";
        $nextpic="";
        $prevpic="";

        $pics.each(function (index) {
            if (this.src== image_src){
                $nextpic_index=index+1;
                $prevpic_index=index-1;
            } 
        })
        nextpic=$pics.eq($nextpic_index);
        prevpic=$pics.eq($prevpic_index);
        img = {
            prev:prevpic,
            next:nextpic
        };

        return img
    }

    $('.rightslide').click(function(){
        var slidenaviobject=slidenavi($(this).parent().siblings('img').attr('src'));
        var copyimage = jQuery.extend(true, {}, slidenaviobject);
        console.log(copyimage.next);
        $('.slideshow-wrapper').append(copyimage.next);        

    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:17:36.233

`nextpic`是对（jQuery 包装的）DOM 节点的引用。`.clone()`追加 DOM 节点时必须使用它。

# jquery - Blackberry OS6 相机在拍摄后不会关闭

> ID：12688419
> 
> 赞同：0
> 
> 时间：2012-10-02T10:13:54.010
> 
> 标签：jquery, html, cordova, blackberry

我为智能手机开发了一个 HTML5 网络应用程序，最初推出的是黑莓。它的部分功能是拍照，然后返回表单以获取更多信息。

在 OS7（曲线型手机）上，该应用程序功能完美。拍照，返回表单，并使用 base64 显示所拍照片的小缩略图。已使用 Bes / Bas 打包和部署的应用程序

在OS6（Bold 9700）上，应用程序中的相机在拍照后不会自动关闭，我必须单击返回箭头，这会将我带回表单，并且照片仍然按预期拍摄。

我已经准备好在 Phonegap 上的黑莓怪癖

“应用程序必须具有密钥注入权限才能在拍照后关闭本机相机应用程序。”

我假设这是在 OS7 上工作的，我已经有了这个。是否有一种可编程的方式/解决方法，我可以确保在旧操作系统上拍摄照片后关闭相机，或者我可能错过的任何专家提示？

预先感谢您的任何回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:21:06.677

看起来这个问题在使用 Phonegap 编译时可能特定于 OS6，将尝试在 phonegap 以外的源上进行编译，看看它是否有所作为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:33:06.000

我已经解决了 os 6 的相同问题。扫描 QR 码后，关闭所有播放器和扫描仪连接。

您可以使用-

```
if (_scanner != null && _scanner.getPlayer() != null) {
    _scanner.getPlayer().close();
} 
```

这肯定会对你有所帮助。

# entity-framework - EF 5\. 交叉口表现

> ID：12688420
> 
> 赞同：1
> 
> 时间：2012-10-02T10:13:55.527
> 
> 标签：entity-framework, linq-to-entities

我正在使用 Entity Framework 5，并且拥有以下实体：用户、角色和文件。

我需要检查两个角色列表是否至少有一个共同点：

```
List<Role> a = user.Roles;
List<Role> b = file.Roles;

Boolean commonRoleFound = a.Intersect(b).Count() > 0; 
```

有一个更好的方法吗？也许使用任何？也许其他？

性能更好的选择是什么？

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:23:05.277

从理论上讲，“任何”会更快，因为您不需要知道有多少，只需知道至少一个相交即可。在找到两个列表中的记录后，它可能会停止比较。

# sql - 设置 Nagios 以监控自定义 SQL 查询

> ID：12688426
> 
> 赞同：2
> 
> 时间：2012-10-02T10:14:13.067
> 
> 标签：sql, monitoring, nagios

我有 Nagios（并安装了 nagiosql 来帮助我），但我有点初学者，不知道该怎么做，这是我的问题：

如何使用 Nagios 设置对 Oracle 数据库中特定 SQL 查询的监控？

例子：

Oracle 中的表仅包含 1 行 2 列：

运行状态 | LAST_EXEC_TIMESTAMP

我希望设置 Nagios 在该表上执行 SQL 查询，并以秒为单位返回当前时间和 LAST_EXEC_TIMESTAMP 之间的差异。如果执行时的结果超过 n 秒返回关键，否则返回 OK。

我怎么做？

我已经完成了 SQL 部分，但我不确定如何将它传递给 Nagios - 要使用哪个插件以及如何处理输出值：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T21:24:58.517

[有一个名为“check_oracle”的标准插件可能会对您有所帮助，而且Nagios Exchange](http://exchange.nagios.org/directory/Plugins/Databases/Oracle)上还有一些特定于 Oracle 的插件。

乍一看，stock check_oracle 插件似乎不允许您运行特定的查询，但我不能 100% 确定，因为我从未使用过它。

Consol Labs 还维护着一系列非常出色的“check_(db)_health”插件，并且它们有[一个 Oracle 特定的](http://labs.consol.de/lang/en/nagios/check_oracle_health/). **您可以使用“--mode sql”来运行您自己的查询。**

要使用其中任何一个，您必须已经设置了 Oracle 客户端，并设置了正确的 ENV vars，才能连接到 Oracle DB。

如果您无法从 Nagios 机器直接连接到 Oracle DB，您的另一个选择是使用 NRPE/check_by_ssh 在 Oracle DB 服务器本身上本地运行插件。

# php - 大文件解析和导入 PHP MySQL

> ID：12688429
> 
> 赞同：5
> 
> 时间：2012-10-02T10:14:34.177
> 
> 标签：php, mysql, database, cakephp, scalability

我有一个大的 csv 文件（大约 700MB），我正在尝试解析并插入 MySQL 数据库。我逐行读取 csv（大约 4x10^6 行）并解析要插入的记录。然后，我将记录分批插入数据库，每批大约 10k 条记录。解析过程中有一些事情，例如使用 . 将格式的持续时间转换`11d 12:34:56`为小时数`preg_match`。

```
preg_match('/(?P<days>\d+)d (?P<hours>\d+)?P<minutes>\d+)?P<seconds>\d+)/', $hoursUsed, $matches); 
```

该脚本大约需要 40 分钟才能完全解析文件并将所有记录插入数据库。我在这里的问题是： * 预计时间应该是多少？请问40分钟正常不？* csv文件的解析可以是

我正在用 PHP 解析一个大小约为 700MB 的文件（csv）（大约 4x10^6 行），但解析文件大约需要 40 分钟。我正在尝试优化解析，但只能将其优化 45 到 40 分钟。我的问题是：

*   预计时间应该是多少？请问40分钟正常不？
*   我对请求执行此操作，因此在完全解析文件并插入所有内容之前没有响应。有没有更好的方法将此委托给异步进程？

仅供参考，我正在使用 CakePHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:22:32.527

使用`LOAD DATA INFILE`会大大加快速度。只需在字段中加载持续时间值，`CHAR`然后让 MySQL 稍后处理它。

这样，您将数据处理留给数据库，这将比 PHP 快得多。

此外，对于 700MB 和 400 万条记录来说，40 分钟听起来还不错。当然，这一切都取决于代码、机器等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:24:41.343

`LOAD DATA INFILE`尽可能使用命令。快疯了。 [http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

您可以使用选项`FIELDS TERMINATED BY ','`和`LINES TERMINATED BY '\n'`

您应该能够从 PHP 执行这样的语句，但请注意文件路径必须是完整的，并且 MySQL 可以访问。此外，如果您的 mysql 服务器位于 PHP 文件系统的另一台主机上，您可能需要一种解决方法。

# .htaccess - 缓存在 HTTPS 中不起作用

> ID：12688430
> 
> 赞同：1
> 
> 时间：2012-10-02T10:14:35.800
> 
> 标签：.htaccess, caching, https, firebug, browser-cache

我之前曾问过这个问题，并错误地认为我的问题并不真正存在（请参阅：[缓存和 HTTPS](https://stackoverflow.com/questions/12566852/caching-and-https)）。我错了; 问题确实存在。

这是我的问题的描述：

1.  当我从 HTTP 页面加载资源（例如**resource-a**）时（在 HTTP 页面上所有资源都将来自 HTTP），我得到一个`200 OK`. 当我重新加载页面（或转到另一个 HTTP 页面）时，resource-a 得到一个`304 Not Modified`.
2.  当我从 HTTPS 页面加载资源 a 时（在 HTTPS 页面上时，所有资源都来自 HTTPS），从 HTTPS 加载资源 a 并获取`200 OK`. 当我重新加载页面（或转到另一个 HTTPS 页面）时，我得到一个`304 Not Modified`.
3.  当我返回一个 HTTP 页面时，resource-a 仍然得到一个`304 Not Modified`.
4.  当我返回 HTTPS 页面时，resource-a 得到一个`200 OK`. **缓存的副本发生了什么？我怎样才能让它缓存？**

这是标题的示例：

```
Request URL: https://styles.mydomain.com/assets/styles/main.css
Request Method: GET
Status Code: 200 OK

Request Headers
Accept: text/css,*/*;q=0.1
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Connection: keep-alive
Host: styles.mydomain.com
Referer: https://www.mydomain.com/sign-in/
User-Agent: Mozilla/5.0 (Windows NT 6.0) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4

Response Header
Accept-Ranges: bytes
Cache-Control: public
Connection: Keep-Alive
Content-Encoding: gzip
Content-Length: 11836
Content-Type: text/css
Date: Tue, 02 Oct 2012 09:51:20 GMT
Expires: Fri, 30 Sep 2022 09:51:20 GMT
Keep-Alive: timeout=5, max=99
Last-Modified: Tue, 02 Oct 2012 09:25:30 GMT
Server: Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.7a mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635 PHP/5.3.8
Vary: Accept-Encoding 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T17:19:16.580

这只是一个最好的猜测，但我怀疑正在发生的事情是，当您通过 HTTP 连接缓存您的资源（或从缓存中加载它以进行不安全会话）时，它被标记为“不可信”，因此没有资格从缓存加载 HTTPS 连接。

HTTPS 的部分目的是确保资源不仅不会在传输过程中被窃听，而且不会被中间人修改。考虑以下场景：

```
[HTTP] GET /foo.js (client -> middleman -> server)
Server replies "blue"
Middleman mutates "blue" into "green"
Client caches "green" 
```

此时，`foo.js`从缓存加载会导致将受污染的副本`foo.js`加载到您的 HTTPS 会话中，从而损害整个页面视图的安全性。由于您的 HTTPS 会话无法验证文件的真实性（因为它没有通过安全连接缓存），因此它会确保安全并选择加载文件的新副本以确保不加载受损资源。

您的情况有点有趣，因为您拥有文件的安全缓存副本，但您从缓存中返回它以获取非安全页面。我的猜测是这会污染文件，因此它可能不会被重新用于安全缓存。你在什么浏览器中使用这个？

编辑：还有一个想法；既然你有 SSL 可用，如果你总是加载资源的 SSL 版本会发生什么？如果我的猜测是正确的，这应该可以防止缓存被污染，并且应该允许资源保持缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T12:55:44.797

很抱歉，但我没有看到`If-Modified-Since`-requestheader，如果我是正确的（[wiki](https://en.wikipedia.org/wiki/List_of_HTTP_headers)），则需要此标头才能允许服务器使用`304 Not Modified`.

所以问题是您的客户端没有发送正确的请求，也许您的客户端没有使用来自 http 的缓存内容进行 https 请求。那么您是否在 https 模式下刷新，以检查是否在第二个 https 请求中请求它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:55:36.733

你在使用任何`.htaccess`文件吗？如果是，请将以下代码放入您的 .htaccess 文件中以进行缓存。

```
ExpiresActive On
ExpiresByType text/css "access plus 60 days" 
```

希望这可以帮到你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-10T02:47:46.293

Chrome 有一个错误。太可悲了，没人关心解决这个问题

[https://helpx.adobe.com/experience-manager/kb/cache-problems-on-chrome-with-SSL-certificate-errors.html](https://helpx.adobe.com/experience-manager/kb/cache-problems-on-chrome-with-SSL-certificate-errors.html)

# linechart - Wijmo 折线图：控制日期/字符串的 X 轴标签

> ID：12688433
> 
> 赞同：2
> 
> 时间：2012-10-02T10:14:46.433
> 
> 标签：linechart, componentone, wijmo

我在 X 值是一天中的某个时间的 Wijmo 折线图中显示数据。例如，8:00、8:05、8:10 等。尽管我的数据点是每 5 分钟一次，但我希望我的 X 轴标签只显示整个小时。例如，8:00、9:00、10:00 等。

目前，我只能获取 X 轴标签来反映数据点的实际值。例如，每 5 分钟一次。

有人可以引导我朝着正确的方向前进吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:44:24.137

您是否将数据绑定到标签而不是系列。看起来您正在返回您的值并将其放入标签中。

```
 seriesList: [{
                legendEntry: true,
                label: "timeData",
                data: { x: { bind: "Date" }, y: { bind: "Count"} }
            }] 
```

> **注意**：我打算回答你的问题，但我意识到我是从[wijmo 论坛中提取答案，这是你的问题](http://wijmo.com/topic/wijmo-linechart-controlling-x-axis-labels-for-datesstrings/)。

# php - 错误：必须将类声明为抽象类或实现其余方法

> ID：12688436
> 
> 赞同：10
> 
> 时间：2012-10-02T10:14:49.950
> 
> 标签：php

我有一个实现几个抽象方法的类。当我扩展该类时，我收到以下致命错误消息：

```
Class CI_Controller_Rest contains 6 abstract methods and must therefore be declared abstract or implement the remaining methods 
```

具有抽象方法的类：

```
class CI_Controller_Rest extends CI_Controller {
    public function __construct() {
        parent::__construct();
    }

    abstract public function index();

    abstract public function get();

    abstract public function head();

    abstract public function post();

    abstract public function put();

    abstract public function delete();
} 
```

我扩展的类`CI_Controller_Rest`：

```
class Welcome extends CI_Controller_Rest {

    public function __construct() 
    {
        parent::__construct();
    }

    public function index() {}

    public function get() {}

    public function head() {}

    public function post() {}

    public function put() {}

    public function delete() {}
} 
```

除了这些，我还应该做什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-02T10:18:00.673

如果一个类有一个或多个抽象函数，[它必须被声明为一个抽象类](http://php.net/manual/en/language.oop5.abstract.php)：

```
abstract class CI_Controller_Rest extends CI_Controller {

    public function __construct() {
        parent::__construct();
    }

    abstract public function index();

    abstract public function get();

    abstract public function head();

    abstract public function post();

    abstract public function put();

    abstract public function delete();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:18:10.477

```
abstract class CI_Controller_Rest extends CI_Controller {
    public function __construct() {
        parent::__construct();
    }

    abstract public function index();

    abstract public function get();

    abstract public function head();

    abstract public function post();

    abstract public function put();

    abstract public function delete();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-20T23:40:31.963

CI_Controller_Rest 必须是抽象类，因为它包含抽象方法

```
abstract class CI_Controller_Rest extends CI_Controller {
    public function __construct() {
        parent::__construct();
    }

    abstract public function index();

    abstract public function get();

    abstract public function head();

    abstract public function post();

    abstract public function put();

    abstract public function delete();
} 
```

# bash - Bash - 从 xml 文件中提取 url

> ID：12688437
> 
> 赞同：2
> 
> 时间：2012-10-02T10:14:55.827
> 
> 标签：bash, sed, grep

我有这个文件（dev1.temp）：

```
 <?xml version="1.0" encoding="UTF-8"?>
<krpano version="1.0.8.15" showerrors="false">

          <include url="include/sa/index.xml" /> <include url="content/sa.xml" />
          <include url="include/global/index.xml" />
          <include url="include/orientation/index.xml" />
          <include url="include/movecamera/index.xml" /> <include url="content/movecamera.xml" />
          <include url="include/fullscreen/index.xml" />
          <include url="include/instructions/index.xml" />
          <include url="include/coordfinder/index.xml" />
          <include url="include/editor_and_options/index.xml" />
</krpano> 
```

目标是获取所有 url 的内容并将它们放在一个临时文件 (devel.temp) 中。输出将是：

```
include/sa/index.xml
content/sa.xml
include/global/index.xml
include/orientation/index.xml
include/movecamera/index.xml
content/movecamera.xml
include/fullscreen/index.xml
include/instructions/index.xml
include/coordfinder/index.xml
include/editor_and_options/index.xml 
```

要做到这一点，我有以下脚本：

```
# Make a temp file with all the files url's    
grep -o 'url=['"'"'"][^"'"'"']*['"'"'"]' $temp_folder"/devel1.temp" > $temp_folder"/devel2.temp"
# Strip off everything to leave just the url's'    
sed -e 's/^url=["'"'"']//' -e 's/["'"'"']$//' $temp_folder"/devel2.temp" > $temp_folder"/devel.temp" 
```

昨天它工作得很好。今天，devel2.temp 和 devel.temp 输出是这样的：

```
[01;31m[Kurl="include/sa/index.xml"[m[K
[01;31m[Kurl="content/sa.xml"[m[K
[01;31m[Kurl="include/global/index.xml"[m[K
[01;31m[Kurl="include/orientation/index.xml"[m[K
[01;31m[Kurl="include/movecamera/index.xml"[m[K
[01;31m[Kurl="content/movecamera.xml"[m[K
[01;31m[Kurl="include/fullscreen/index.xml"[m[K
[01;31m[Kurl="include/instructions/index.xml"[m[K
[01;31m[Kurl="include/coordfinder/index.xml"[m[K
[01;31m[Kurl="include/editor_and_options/index.xml"[m[K 
```

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:33:50.420

考虑使用 xml 目标工具，例如 xpath。我建议这样做：

```
xpath -e "/krpano/include/@url" -q yourFile.xml | cut -f 2 -d "=" | sed 's/"// 
```

如果您确定 xml 将具有' 仅具有属性的`krpano`root 。您也可以使用下面的速记，但上面的运行速度会更快。`include``url`

```
xpath -e "//@url" -q yourFile.xml | cut -f 2 -d "=" | sed 's/"// 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:17:22.810

`grep`即使输出不是终端，似乎也使用 ANSI 序列为其输出着色。将其`--color`从更改`always`为`auto`。

`grep`您应该使用可识别 XML 的工具，而不是用于处理 XML。例如，在[xsh](http://metacpan.org/pod/distribution/XML-XSH2/xsh)中，您可以编写

```
open file.xml ;
perl { use Term::ANSIColor } ;
for /krpano/include
    echo :s { color('bright_yellow') }
            @url
            { color('reset') } ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T10:19:59.567

除了*choroba*的评论。您的 ANSI 序列，我会尽可能避免通过 sed 等解析 XML，并寻求使用 XML 感知脚本工具。我使用[XMLStarlet 工具包](http://xmlstar.sourceforge.net/)。这意味着您的脚本可以识别字符编码/实体，并且在更改 XML 时更加健壮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T18:56:52.107

第三个支持 xml 的脚本工具是我的[Xidel](http://videlibri.sourceforge.net/xidel.html)：

```
xidel /tmp/your.xml -e //@url 
```

（与大多数情况相反，它支持 XPath 2.0，尽管这对于这个问题来说是多余的）

# iphone - 架构 armv7 的未定义符号：用于外部 C 库

> ID：12688439
> 
> 赞同：1
> 
> 时间：2012-10-02T10:15:19.537
> 
> 标签：iphone, objective-c, ios, c

我下载了一个用于音频编解码器的 C 库，我对其进行编译并将其添加到我的项目中。

现在，每次我尝试使用它时，它都会给我一个 Undefined symbols for architecture armv7：当我尝试调用库的方法之一时出错。

可能是什么问题？我是否需要编译特定于 armv7 的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:32:00.483

您似乎已经设置了您的 XCode 项目，以便同时编译`armv7`和`armv7s`架构（请注意最后**的 s**）。但是，C 库的项目仅针对`armv7`.

要解决此问题，请更改库项目以使其同时针对两种架构进行编译，或者将应用程序项目更改为仅针对`armv7`.

我会选择第二种选择，因为目前不需要`armv7s`支持，而且很少有设备可以使用它。

**更新：**

如果您在模拟器上也收到相同的消息，那么您的库项目也不会为“i386”编译（仅模拟器需要）。这表明您的 C 库项目根本没有设置为针对多个体系结构进行编译。所以第二个选项（而不是使用模拟器）是最简单的方法。

# internet-explorer - 为什么在 Bootstrap 模式中使用背景时，来自 youtube 的 iframe 在 Firefox 和 IE 中是可见的？

> ID：12688440
> 
> 赞同：1
> 
> 时间：2012-10-02T10:15:20.760
> 
> 标签：internet-explorer, firefox, iframe, twitter-bootstrap, modal-dialog

我在屏幕上向您展示的 Bootstrap 模式有问题。

这是我想要的以及我在 Chrome 中看到的内容：

![](../Images/3446325ff983b0b058fa5f701ef7bcb2.png)

这是 Firefox 的结果：

![](../Images/c112fcea51adec789c7c74ae51f2659b.png)

在 IE 中：

![](../Images/6d444fa491c9572a661b46b5392a69d4.png)

我没有更改 iframe 中的任何 css，引导模式是标准的。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:51:35.140

回答：

```
 <iframe class="video" width="100%" height="315" src="http://www.youtube.com/embed/m6Xp0OxHNBI?wmode=transparent" frameborder="0" allowfullscreen=""></iframe>

  ?wmode=transparent 
```

# c# - RegEx：在同一元素中包含属性检查

> ID：12688442
> 
> 赞同：1
> 
> 时间：2012-10-02T10:15:38.190
> 
> 标签：c#, .net, regex

**最终目标**......检索一组具有特定属性/值的DIV并更新元素类型并操纵属性和值......

我想使用 RegEx 来测试以下**场景**（我相信基于上述目标是正确的）

*   对于每个打开的 DIV
*   包含一个`attribute-to-check`属性
    *   该属性可能是也可能*不是*第一个属性
*   它的值包含`value-contains`
    *   该值可能是也可能*不是*属性中的第一个值（允许将来扩展）
*   找到**它的**关闭 DIV
    *   此 DIV 本身可能包含其他 DIV -**包括**也将匹配的其他 DIV

那么我**尝试**了什么？...使用测试脚本：

```
<p>test1</p>
<DIV attribute-to-check='notvalid'>
  test2
</DIV>
<p>test3</p>
<DIV attribute-to-check='value-contains:2012-12-12' class='test4'>
  test5
</DIV>
<p>test6</p>
<DIV attribute-to-check='value-contains:2012-01-01' class='asd'>
  test6
</DIV>
<p>test7</p> 
```

我有以下正则表达式......

```
<?DIV.*?attribute-to-check='value-contains:.*?>(.*?)</DIV> 
```

但这又带回来了

```
string 1: "<DIV attribute-to-check='notvalid'>test2</DIV>test3<DIV attribute-to-check='value-contains:2012-12-12' class='test4'>test5</DIV>"

string 2: "<DIV attribute-to-check='value-contains:2012-01-01' class='asd'>test6</DIV>" 
```

我怀疑它会带回`test2`string1，因为它有一个带有待检查属性的开放 div，*但*该值无效？所以我想知道我是否得到第一个 DIV，然后是任意数量的字符，直到它找到*任何*其他字符`attribute-to-check='value-contains:`，然后是关闭的 DIV？

我正在努力从这一点上导航，并感谢社区的任何帮助:)

谢谢迪伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:48:33.843

请[不要对 HTML 使用正则表达式](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。[不](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)，说[真的](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)，[不要](https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg)。

JQuery 有很棒的选择器语法来做你想做的事，真的。看[这里](http://api.jquery.com/category/selectors/)，它在文档顶部向您展示了如何做您想做的事情。

例如：

```
$('div[attribute-to-check|="value-contains:"]') 
```

将产生具有所需属性/值约束的 div。

# javascript - 如何正确使用 ng-class 或 angular.element？

> ID：12688450
> 
> 赞同：0
> 
> 时间：2012-10-02T10:16:09.447
> 
> 标签：javascript, jquery, html, angularjs

我正在接收动态数据（json 格式），并且需要更改按钮的背景图像。每个按钮都有 ID，因此很容易知道哪个按钮将被操纵。

但是当我尝试动态操作按钮的背景图像时，我遇到了问题。

示例按钮：

```
<button id="1111_1111_c">Value1</button>
<button id="2222_2222_d">Value1</button> 
```

我试图像这样进行操作：（使用 JQuery）

```
var btnId = '2222_2222_d';
$('#' + btnId).css('background-image','url(images/btn_red.gif)'); 
```

但它什么也没发生。如果我尝试与纯 JQuery 相同，它可以工作。

我知道有角度 dom-updater 或事件来更新 dom。但不知道该怎么做。

是否有使用指令或使用 ng-class 的解决方案？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:34:20.687

在 Angular 中，我们想考虑更改 model/$scope 属性，然后会自动更新 HTML 视图。（我们不想/不需要使用 ID。）因此，在您要更改的按钮上声明一个模型属性：

```
<button ng-class="button_1111_class" id=...>Value1</button> 
```

（上面，button_1111_class 是 $scope 上的一个属性。）然后，当您获取数据时，修改控制器中的 button_1111_class 模型数据，例如：

```
$scope.button_1111_class = 'red_bg_image';  // red_bg_image is a CSS class you define 
```

并且您的视图应该会自动更新。

如果您在 AngularJS 之外获取数据，您可能需要将您的模型/$scope 更改包装在 $scope.$apply() 中： [视图在 AngularJS 中未更新](https://stackoverflow.com/questions/10179488/the-view-is-not-updated-in-angularjs)

# python - 创建具有周期性边界的 3D 晶格 - 创建 (x,y,z) 的每个组合

> ID：12688452
> 
> 赞同：0
> 
> 时间：2012-10-02T10:16:26.050
> 
> 标签：python

我正在尝试创建一个程序，将直径为 d 的相同非重叠粒子放入具有周期性边界条件的立方（3d）晶格中。

这实际上意味着我需要一个程序来创建一个 XYZ 文件，该文件如下所示，但会经历所有组合：

```
H 0.0000000.0000005.000000
H 0.0000000.0000006.000000
H 0.0000000.0000007.000000
H 0.0000000.0000008.000000
H 0.0000000.0000009.000000 
```

现在由于某种原因，我下面的代码将我的 z 值保持为 0，而不是通过这些值来创建其他组合……而是只通过 x 和 y。

```
#create a file and enter first two lines
text_file=open("question1.xyz","w")
text_file.write("\n")
text_file.write("comment goes here\n")

L=10
d=1

#first particle or line will be at 0,0,0, counter used to count how many lines
x,y,z = 0,0,0
counter=0

#placing the particles
while x<=L-d:
    while y<=L-d:
        while z<=L-d:
            text_file.write('H ')
            text_file.write('%f'%x)
            text_file.write('%f'%y)
            text_file.write('%f\n'%z)
            counter=counter+1
            z=z+d
        z=0
        y=y+d
    z,y=0,0
    x=x+d

text_file.close()

with open("question1.xyz") as infile:
    with open("outputfile.xyz","w") as outfile:
        for i,line in enumerate(infile):
            if i==0:
                outfile.write('%f\n'%counter)
            else:
                outfile.write(line) 
```

关于它为什么会发生的任何想法？我的 while 语句有点乱，但我不知道该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:26:37.787

有一个更简单的方法。使用[itertools.product](http://docs.python.org/library/itertools.html#itertools.product)：

```
import itertools

L = 3
d = 1
counter = 0
with open("question1.xyz","w") as text_file:
    text_file.write("\ncomment goes here\n")
    for x,y,z in itertools.product(range(L),repeat = 3):
        text_file.write('H %f %f %f\n' % (x, y, z))
        counter=counter+1 
```

# ssms - F5 在 SSMS 中停止工作

> ID：12688453
> 
> 赞同：6
> 
> 时间：2012-10-02T10:16:32.117
> 
> 标签：ssms

我在 Windows 7 上使用 SQLServer 2008 R2 Management Studio (10.50.2500.0)。

突然，执行查询的键盘快捷键停止工作。CTRL-E 命令仍然有效，但它真的很烦人，因为我已经习惯了 F5。在查询菜单中，F5 命令被 CTRL+E 取代。

![](../Images/07a23adbf038e488f25f11aeff1f3b5a.png)

我的键盘没有 F 键锁定按钮，其他 F 键正在工作。我什至尝试过使用屏幕键盘，所以它与我的键盘无关。

我认为问题是从 Microsoft Update 进行系统更新后开始的。我怎样才能把它改回来？在 SSMS 中找不到任何用于重新映射键的选项。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-10T22:14:47.227

我有类似的问题，并意识到这是“F Lock”关键问题。确保您的 F Lock 键已打开。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T14:17:56.400

试试这个解决方案：转到文件夹：

C:\Users\USERNAME\Documents\SQL Server Management Studio\Settings 您将看到文件名为：

CurrentSettings-2011-11-28.vssettings

找到并擦除以下行：

```
<RemoveShortcut Command="Query.Execute" Scope="SQL Query Editor">F5</RemoveShortcut> 
```

**编辑：** 完成上述更改后不要忘记重新启动 ssms

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-16T17:44:41.647

我通过按 FLock 键或功能锁在我的计算机上解决了此类问题。然后我的 F5 键恢复正常，所以我可以轻松运行存储过程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-11T10:19:34.047

检查结果是否设置为“结果到网格”（CTRL + D）而不是设置为“结果到文件”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T14:20:02.723

我有一个类似的问题。当用于 SSMS 的 ViEmu 插件删除大量与 Vi 冲突的快捷方式时，它似乎会出现。我后来删除了 ViEmu，但没有恢复快捷方式。当我创建一个新的 .vssettings 文件（通过删除旧文件然后启动/停止 SSMS）时，仍然缺少快捷方式。看起来它在创建 vssettings 时选择了一个要删除的快捷方式模板（如果有人对此有想法会很棒）

我最终通过从 vssettings 文件中的 <UserShortcuts> 标记中删除 <RemoveShortcuts> 标记来破解它。

现在它像以前一样工作。

# html - 设置在ie7中工作的div背景颜色的不透明度

> ID：12688462
> 
> 赞同：2
> 
> 时间：2012-10-02T10:16:52.617
> 
> 标签：html, css

我想设置div背景的不透明度。意味着我想要 div 的透明背景。因为支持 rgba，所以对于 chrome 和 firefox 等浏览器来说非常简单。

但是对于ie7，我不知道该怎么做。“过滤器：阿尔法（不透明度= 50）；” 对我没用，因为我想要透明背景，而不是内容。

我也不希望将透明图像设置为背景。

我也尝试过 ::before 并应用“filter: alpha(opacity=50);”，但它在 ie 中也不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T10:18:14.343

使用透明图像作为 IE 的背景。这很烦人，但它是做你想做的事的最佳方式，而不会被文本的不透明度所困扰。或者只是[用过滤器去精神](http://robertnyman.com/2010/01/11/css-background-transparency-without-affecting-child-elements-through-rgba-and-filters/)...

```
.opacityTest{
    /* Fallback for web browsers that doesn't support RGBa */
    background: rgb(0, 0, 0);
    /* RGBa with 0.6 opacity */
    background: rgba(0, 0, 0, 0.6);
    /* For IE 5.5 - 7*/
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
    /* For IE 8*/
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:18:41.437

```
<style>
div
{
filter: alpha(opacity=50);
}
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:20:54.787

我认为您必须为 IE LTE < 7 使用透明背景图片（带有一些条件注释/css）

# android - DirectionalViewPager 的 NoClassDefFoundError 使用

> ID：12688463
> 
> 赞同：4
> 
> 时间：2012-10-02T10:16:52.600
> 
> 标签：android, android-viewpager, horizontal-scrolling, vertical-scrolling

需要使用 DirectionalViewPager - 用于垂直和水平 ViewPager 实现的库的人的帮助。正如[DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager)中所述，我做了所有事情。但是在创建示例 android 项目后得到

```
 10-02 13:04:03.439: E/AndroidRuntime(1526): FATAL EXCEPTION: main
10-02 13:04:03.439: E/AndroidRuntime(1526): java.lang.NoClassDefFoundError: com.directionalviewpager.DirectionalViewPager$DataSetObserver
10-02 13:04:03.439: E/AndroidRuntime(1526):     at com.directionalviewpager.DirectionalViewPager.setAdapter(DirectionalViewPager.java:164)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at com.example.verticalview.SampleActivity.onCreate(SampleActivity.java:17)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at android.os.Looper.loop(Looper.java:123)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at android.app.ActivityThread.main(ActivityThread.java:3687)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at java.lang.reflect.Method.invokeNative(Native Method)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at java.lang.reflect.Method.invoke(Method.java:507)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
10-02 13:04:03.439: E/AndroidRuntime(1526):     at dalvik.system.NativeStart.main(Native Method) 
```

谁有平等的业务，请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T23:24:10.487

除了在你的 libs 文件夹中有这个 jar 之外，还要确保将它导出到你的 eclipse 项目设置中。与添加外部 jar 选项相同的窗口，但另一个选项卡（我相信是最后一个）

顺便说一句，我不会将其添加为外部 jar。在 Java 中，向类路径添加两次的类将无法加载。不能说这是否也适用于android。

# performance - 为什么在绕过浏览器缓存的同时刷新 stackoverflow.com 总是比常规刷新快？

> ID：12688464
> 
> 赞同：0
> 
> 时间：2012-10-02T10:17:01.800
> 
> 标签：performance, google-chrome, browser-cache

我故意没有把它放在元上，因为我问这个问题是出于对技术主题的兴趣，即没有缓存的网页如何比使用缓存更快。自从我开始使用 Stack 以来，这就是我一贯的经验。实际上，这很令人沮丧。

它也很奇特和迷人。

正确答案得到一匹小马！

# ios - UIViewController 中的标签栏和标签栏项目

> ID：12688466
> 
> 赞同：0
> 
> 时间：2012-10-02T10:17:06.723
> 
> 标签：ios, tabbar, uitabbaritem

我通过将标签栏和 6 或 7 个标签栏项目拖到 UIViewController 上添加了它们，然后在上面添加了一个 web 视图。

我的目标是在单击不同选项卡时在 Web 视图中加载不同的本地 HTML 文件，我将选项卡栏作为 UIViewController 的委托，然后使用此方法来实现每个选项卡的操作。

我的问题是当我添加 6 或 7 个标签时，它们并排出现，“更多”按钮不工作！如何激活此“更多”选项卡？

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{
    if(item.tag == 1)
    {

        NSString *path = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html"];
        NSURL *url = [NSURL fileURLWithPath:path];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];
        webview.opaque = NO;
        webview.backgroundColor = [UIColor clearColor];
        [webview loadRequest:request];

    }
} 
```

# django - 更改第 3 部分应用程序形式的验证规则

> ID：12688467
> 
> 赞同：0
> 
> 时间：2012-10-02T10:17:17.320
> 
> 标签：django, django-forms, django-registration

我正在使用第 3 部分应用程序（django-registration），并且需要为自己修改验证规则。

一种方法是扩展表单（RegistrationForm），并用我自己的验证规则覆盖字段。

```
#registration/forms.py
class RegistrationForm(forms.Form):
    username = forms.RegexField(regex=r'^[\w.@+-]+$',
                                max_length=30,
                                ...
                                )
    ... 
```

在我自己的应用程序中：

```
class RegistrationForm(RegistrationForm):
    username = forms.RegexField(regex=r'(?ui)^[\w.@+-]+$',
                                min_length=3,
                                max_length=20,
                                ...
                                )
    ... 
```

但是我应该把这个扩展形式放在我自己的代码中总是一个问题。

另一个想法是把注册app嵌入到我自己的项目文件夹中，直接修改。这样做更容易，但感觉像是关于 OOP 的问题。

想知道最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T00:26:53.537

特别是 django-registration 提供了相当多的可扩展性。 [视图允许](http://docs.b-list.org/django-registration/0.8/views.html#registration.views.register)[一个参数`register``form_class`](http://docs.b-list.org/django-registration/0.8/views.html#registration.views.register)

您可以覆盖`register`视图的默认 url 并设置`form_class`为您想要的任何表单类，以您需要的方式进行验证（我建议`RegistrationForm`像您在示例代码中那样进行子类化）。

像这样的东西（在你的主要 urls.py 中）：

```
url(r'^accounts/register/$', 'registration.views.register', {
     'backend': 'registration.backends.default.DefaultBackend',
     'form_class': MyRegistrationForm}, name='registration_register'),
(r'^accounts/', include('registration.backends.default.urls')), 
```

# php - 如何使用 jquery ui 对话框创建弹出窗口

> ID：12688468
> 
> 赞同：1
> 
> 时间：2012-10-02T10:17:20.660
> 
> 标签：php, jquery-ui, popup, jquery-ui-dialog

我的页面 A 中有一个链接，它将把用户带到页面 B。我希望页面 B 弹出而不影响我的页面 A，使用 jquery ui 对话框，就像 window.open() 函数一样（例如： `<a href="" onclick="window.open('abc.php','', 'width=100, height=100, location=no, menubar=no, status=no,toolbar=no, scrollbars=no, resizable=no'); return false"> ABC </a>`
我在页面中有这个A：

```
<a href="abc.php">link to page B  </a> 
```

我在 B 页有这个：

```
<script>
    $(function() {
        //$( "#dialog" ).dialog();
        $( "dialog:ui-dialog" ).dialog( "destroy" );

        $( "#dialog" ).dialog({
            height: 500,
            width: 740,
            modal: true
            });
    });
    </script>
<div id="dialog">
//code for form of page B

</div> 
```

我的问题是内容显示在对话框内，但不是弹出窗口。该对话框仅作为对话框显示在浏览器的窗口中。基本上，页面 A 被页面 B 替换。但是当用户单击页面 A 上的链接时，我希望页面 B 弹出。
有人知道该怎么做吗？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T10:25:59.300

您可以在 pageA 上创建一个 javascript 函数，如下所示

```
function showUrlInDialog(url){
  var tag = $("<div></div>");
  $.ajax({
    url: url,
    success: function(data) {
      tag.html(data).dialog({modal: true}).dialog('open');
    }
  });
} 
```

将页面加载到 iframe 的第二种方法

```
function showUrlInDialog(url){
  var tag = $("<div></div>");
  tag.html('<iframe style="border: 0px; " src="' + url + '" width="100%" height="100%"></iframe>').dialog({modal: true}).dialog('open');

} 
```

现在在你的锚标签上调用这个函数，如下所示

```
<a href="#" onclick="showUrlInDialog('abc.php'); return false;">link to page B</a> 
```

在页面 B 上只保留您的表单或 html 代码

```
<div>
//code for form of page B

</div> 
```

# android - Android：意图在一个活动中启动另一个活动

> ID：12688471
> 
> 赞同：1
> 
> 时间：2012-10-02T10:17:28.090
> 
> 标签：android, button, android-intent

抱歉，我对 android 开发非常陌生，现在我想锻炼一下，当用户按下按钮时，它将启动 Actitity2，同样，当用户按下 Activity2 中的取消按钮时，它将返回到原始活动.

我参考了关于编写应用程序的书，但它似乎不起作用，编码看起来很简单，如下所示：

```
public class NameIndex extends Activity 
{
       // called when the activity is first created
       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState); 
          setContentView(R.layout.name_index);

           public button_cancel_click (View view) { /////// <-- ERROR AT THIS LINE
               Intent intent = new Intent (this, GameIndex.class);
               startActivity(intent);
           }
       } // end method onCreate
} 
```

xml布局如下：

```
 <TableRow android:id="@+id/tableRow1" 
      android:layout_height="match_parent" 
      android:layout_width="match_parent"
      android:paddingBottom="10dp"
      android:paddingTop="10dp"      
      android:layout_span="2" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="1"
            android:layout_weight="1"
            android:onClick="button_cancel_click"            
            android:text="Cancel" />     
    </TableRow> 
```

Eclipse 将上述错误行报告为“ **button_cancel_click 无法解析为类型**”，而对于

视图“**参数视图的非法修饰符；只允许最终**”。

这怎么可能解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T10:25:03.947

您正在 OnCreate 函数体中编写 button_cancel_click 函数的定义，像这样更正它：

```
public void onCreate(Bundle savedInstanceState)
{
.
.
.
}
public button_cancel_click (View view) 
{
.
.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:20:26.223

应该以这种方式添加侦听器：

```
super.onCreate(savedInstanceState); 
setContentView(R.layout.name_index);
Button button = (Button ) findViewById(R.id.button1);
button.setOnClickListener(new OnClickListener() {                       
                    public void onClick(View v) {
                        Intent intent = new Intent (this, GameIndex.class);
           startActivity(intent);
                    }
                }); 
```

# vba - 显示对话框以允许用户在 VBA 中选择 Outlook 文件夹

> ID：12688476
> 
> 赞同：4
> 
> 时间：2012-10-02T10:17:39.430
> 
> 标签：vba, outlook

我编写了一些 Outlook VBA，需要用户选择一个邮件文件夹（从他们的邮箱中或从外部 PST 中）。

目前，他们必须直接在代码中编辑路径——这对远程用户不友好或效率不高。

有谁知道如何出现一个对话框，允许用户浏览所有可用的文件夹和子文件夹并选择一个？

如果它只能限制在邮件文件夹中，则可以加分，但这不是必需的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T01:38:16.360

尝试使用[Pickfolder](http://msdn.microsoft.com/en-us/library/office/bb219917(v=office.12).aspx)方法：

```
Sub FolderPick()

    Dim objNS As NameSpace
    Dim objFolder As folder

    Set objNS = Application.GetNamespace("MAPI")
    Set objFolder = objNS.PickFolder

    If TypeName(objFolder) <> "Nothing" Then
        Debug.Print vbCr & " objFolder: " & objFolder
    Else
        Debug.Print vbCr & "Cancel"
    End If

    Set objFolder = Nothing
    Set objNS = Nothing

End Sub 
```

# ruby - Ruby 脚本在没有 Rails 的情况下使用 database.yml 连接到 Mysql2

> ID：12688478
> 
> 赞同：7
> 
> 时间：2012-10-02T10:17:44.837
> 
> 标签：ruby, yaml, mysql2

我想在 Ruby 脚本中使用 mysql2 gem 连接到 mysql 数据库，但**没有 Rails**或 ActiveRecord，但要读取 config/database.yml 文件，以免在 Ruby 脚本中直接暴露用户名和密码。如果我像这样使用 ActiveRecord，我可以连接：

```
dbconfig = YAML::load(File.open('config/database.yml'))
ActiveRecord::Base.establish_connection( dbconfig['production'] ) 
```

但是，如果我对 Mysql2 连接尝试相同的技巧，我会收到错误消息：

```
client = Mysql2::Client.new(dbconfig['production']) 
```

显然语法不同，我需要类似的东西：

```
client = Mysql2::Client.new(:host => "localhost", :username => "user", :password => 'password', :database => 'db', :socket => '/tmp/mysql.sock') 
```

但是不想直接在脚本内部暴露用户名和密码。

那么我怎样才能从 config/database.yml 中获取所有数据并将其传递给`Mysql2::Client.new()`方法呢？

谢谢。

**编辑**

只是想澄清一下，为了最终让它发挥作用，我通过这样做稍微修改了可接受的答案：

```
client = Mysql2::Client.new(:host => dbconfig['hostname'], :username => dbconfig['username'], :password => dbconfig['password'], :database => dbconfig['database'], :socket => '/tmp/mysql.sock') 
```

简单地做`Mysql2::Client.new(config)`是行不通的，因为它不会获取用户名和密码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T15:34:50.667

任何接受散列的方法都可以得到 YAML 解析的结果。

您在这里可能有两个问题：

*   YAML.load_file 返回一个哈希，其中键是字符串而不是符号。从我从[https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L17](https://github.com/brianmario/mysql2/blob/master/lib/mysql2/client.rb#L17)和[https://github.com/brianmario/mysql2/blob/master/lib/mysql2读到的内容.rb#L36](https://github.com/brianmario/mysql2/blob/master/lib/mysql2.rb#L36) **它接受符号和字符串，所以这不是问题。**
*   Mysql2 的连接方法使用不同的键，例如在 database.yml 中使用主机而不是主机名，如果您不修改或无法修改 database.yml，您可以考虑创建一个转换键的方法。

以下代码应该可以工作：

```
config = YAML::load_file("config/database.yml")["development"]
config["host"] = config["hostname"]

client = Mysql2::Client.new(config) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-15T08:40:41.607

我的解决方案类似于接受的答案，除了我`database.yml`有用于环境变量引用的 erb 片段：

```
development:
  <<: *default
  database: <%= ENV['DEV_DB_NAME'] %>
  username: <%= ENV['DEV_DB_USER'] %>
  password: <%= ENV['DEV_DB_PASS'] %> 
```

所以我先通过ERB加载：

```
require 'erb'
require 'mysql2'

config = YAML.load(ERB.new(
  File.new("config/database.yml").read).result(binding))['development']
config["host"] = config["hostname"]
client = Mysql2::Client.new(config) 
```

认为它可能对其他人有所帮助，因为这是我找到的第一个搜索结果。感谢问题和接受的答案！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T10:55:12.373

您可以使用[续集](http://sequel.rubyforge.org/)来做到这一点。使用 sequel 的优点是您可以使用良好的 Ruby 风格与您的数据库对话。它的文档页面上有很多示例。

# ruby-on-rails - 在 Ruby On Rails 中读取文件内容

> ID：12688485
> 
> 赞同：0
> 
> 时间：2012-10-02T10:18:04.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想从 .txt 文件中读取文件内容，并且需要将这些内容存储在数据库中。这需要cms页面。我想在运行种子文件时加载 cms 页面。任何一个请..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:30:47.627

```
File.read("PATH_TO_FILE") 
```

然后像往常一样写入db。

# sql - 使用 Identity_Insert 插入数据为 ON 并插入 Table1 Select * from Table2

> ID：12688486
> 
> 赞同：10
> 
> 时间：2012-10-02T10:18:05.783
> 
> 标签：sql, identity

```
CREATE TABLE TestTable (id int IDENTITY (1,1), name nvarchar(100));
INSERT INTO TestTable(name) VALUES ('data1');                     
INSERT INTO TestTable(name) VALUES ('data2');                       
Declare @Identity as int
set @identity=IDENT_CURRENT ('TestTable') 
SET IDENTITY_INSERT TestTable ON; 
```

我怎样才能实现这个功能？

```
INSERT INTO TestTable
Select * from 
(
Select 55 as a,'data55' as b
Union
Select 56 as a,'data55' as b
)n 
```

当它被替换时.. Msg 8101, Level 16, State 1, Line 7 只有在使用列列表并且 IDENTITY_INSERT 为 ON 时，才能为表“TestTable”中的标识列指定显式值。

```
INSERT INTO TestTable (id, name) VALUES (55, 'data55');     
INSERT INTO TestTable (id, name) VALUES (56, 'data55');    

SET IDENTITY_INSERT TestTable OFF;
DBCC CHECKIDENT (TestTable, reseed,@identity )
INSERT INTO TestTable(name) VALUES ('data3');                 
Select * from TestTable 
Drop table TestTable 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T10:23:43.307

你需要说

```
INSERT INTO TestTable (id, name)
Select * from  
( 
Select 55 as a,'data55' as b 
Union 
Select 56 as a,'data55' as b 
)n 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-02T10:24:20.937

这应该可以正常工作：

```
SET IDENTITY_INSERT TestTable ON;

INSERT INTO TestTable(id, name)
Select * 
from 
( 
    Select 55 as a, 'data55' as b 
    Union 
    Select 56 as a, 'data55' as b 
)n; 
```

只需使用子句`SET IDENTITY_INSERT ON`中列出的字段进行设置。`INSERT`

# php - 能量棒定时器 -> php + mysql

> ID：12688489
> 
> 赞同：-1
> 
> 时间：2012-10-02T10:18:18.017
> 
> 标签：php, mysql

我有一个不完整的代码不起作用。我为每个用户准备了一个能量棒。我的表“Users”（*usuarios*）有“Energy”（*energia*）和“Energymax”（*energiamax*）列。

使用此代码，它可以工作，但我想设置一个计时器，例如：1 分钟内有 1 个，它运行这个。

```
<?php
    mysql_query("UPDATE usuarios 
                 SET energia=energia+1 
                 WHERE energia<>energiamax AND tipo='player'");
?> 
```

我的逻辑是：第一分钟它增加“+1”并重新开始倒计时。1分钟后，再次增加“+1”。

我应该如何创建这样的计时器？

谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:36:33.587

您可以使用[MySQL 事件](http://phpmaster.com/working-with-mysql-events/)

不要忘记拥有 MySQL 5.1.6 及更高版本并使用

```
SET GLOBAL event_scheduler = ON; 
```

一分钟定时器使用

```
DROP EVENT IF EXISTS myevent;

CREATE EVENT myevent
ON SCHEDULE EVERY 1 MINUTE
DO UPDATE usuarios SET energia=energia+1 
    WHERE energia<>energiamax AND tipo='player'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:24:52.620

最好不要使用 'energia' 列，并在表中 'energia' 为零时存储时间戳，而不是设置计时器。而在选择时，只需计算自开始以来的秒数 - 这就是“能量”的值。因此，您不必每分钟都调用一次 SQL 查询。

# wordpress - 如何删除 WordPress 中的重复帖子

> ID：12688492
> 
> 赞同：1
> 
> 时间：2012-10-02T10:18:31.423
> 
> 标签：wordpress, delete-row

我有很多文章是重复的，这意味着一篇文章被写了不止一次。我想找到那些使用这个 MySQL 命令的人：

```
select post_title,post_content,count(*) as count from wp_posts
group by post_content
having count(*)>1
ORDER BY count(*)  DESC 
```

[![](../Images/ef61589071e51707d49b59bdcd9edb86.png)](https://i.stack.imgur.com/QRQwU.png)

但是，我怎样才能只删除重复的帖子，这样如果任何帖子的副本超过 1 个，则只剩下 1 个副本。

任何方法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:48:41.653

我建议在尝试以下操作之前**备份您的 SQL 数据库。**

尝试：

```
DELETE bad_rows . * FROM ktz3_posts AS bad_rows INNER JOIN (
  SELECT post_title, MIN( id ) AS min_id
  FROM ktz3_posts
  GROUP BY post_title
  HAVING COUNT( * ) >1
  ) AS good_rows ON good_rows.post_title = bad_rows.post_title
AND good_rows.min_id <> bad_rows.id 
```

由于上述代码未经测试，您可以尝试[Duplicate Post Remover](http://wordpress.org/extend/plugins/duplicate-posts-remover/)。

# c - 具有多个进程的 TCP 客户端

> ID：12688494
> 
> 赞同：1
> 
> 时间：2012-10-02T10:18:40.760
> 
> 标签：c, sockets

在问我的问题之前，让我告诉大家我是网络编程领域的新手，所以请原谅我的错误并提出改进的方法。先感谢您！

对于我的网络编程课上的作业，我们的教授希望我们编写一个使用 fork() 的客户端程序，即

```
pid = fork();
if (pid == 0) // child
Send();
else //parent
Recv(); 
```

我正在尝试的代码如下，

```
#include <cstdlib>
#include <stdio.h>
#include <error.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <string.h>
#include <unistd.h>
#define SERVER_PORT_NUM "10060"
#define MAX_BYTES 2000
using namespace std;

int main(int argc, char** argv) {

int status;
struct addrinfo hints;
struct addrinfo *servinfo;
char buf[MAX_BYTES];

memset(&hints, 0, sizeof(hints));
hints.ai_family = AF_UNSPEC;
hints.ai_socktype = SOCK_STREAM;
hints.ai_flags = AI_PASSIVE;

if ( (status = getaddrinfo("localhost", SERVER_PORT_NUM, &hints, &servinfo)) != 0) {
    fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(status));
return 2;
}

int s;
if ((s = socket(servinfo->ai_family, servinfo->ai_socktype, servinfo->ai_protocol)) == -1) {
    fprintf(stderr, "socket: %s\n", gai_strerror(s));
    return 2;
}

if (connect(s, servinfo->ai_addr, servinfo->ai_addrlen) == -1) {
    close(s);
}

freeaddrinfo(servinfo);

char ch='\0';
pid_t pid = fork();
if (pid == 0) {// child process
    while(1){
        memset(&buf, 0, sizeof(buf));
        scanf("%s",buf);
        send(s,buf,strlen(buf),0);

    }

}//pid==0

else { //parent process
    int numbytes=0;
    memset(&buf, 0, sizeof(buf));
    while(1) {
        if((numbytes= recv(s, &buf, MAX_BYTES-1, 0)) >0) {
        printf("\n%s", buf);
        memset(&buf, 0, numbytes);
        }

        if(numbytes < 0) {
            printf("Error receiving data");
        }

    }

}

close(s);
return 0;
} 
```

我只想在客户端上有用户输入的情况下才将数据发送到服务器，如果有来自服务器的任何数据，我想在客户端上显示。现在，从服务器获取数据一次后，它挂起。终止向/从服务器发送和接收数据的最佳条件是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:23:10.647

对于确保仅在读取后发生写入的部分，一种方法是使用。

```
wait(NULL); 
```

是父进程用来等待子进程终止的调用。在此之后执行的任何代码都保证在 child 终止后运行。

也许你应该颠倒你的顺序，即父母应该写作，孩子应该阅读。

但是，这意味着您的所有写入都在客户端完成读取并终止后完成。

如果你想读一整行，写然后再读一遍，上面不是路要走。

# c# - EndPrint 事件 System.Drawing.Printing

> ID：12688496
> 
> 赞同：4
> 
> 时间：2012-10-02T10:18:41.177
> 
> 标签：c#, printing

我正在使用旧`System.Drawing.Printing`命名空间中可用的方法进行打印，因为该`PrintDocument`对象提供了一个`PrintPage`事件，允许我加载图像并立即处理它。尝试使用 FixedDocument 进行打印通常会导致内存不足。

然而，我遇到了一个奇怪的问题——`EndPrint`一旦它假脱机页面，我就使用事件处理程序关闭我的打印应用程序。如果我只是调用`Close()`我的打印文档，有时会出现缺页或打印机输出模糊（超时/语法）错误。

我目前的解决方法有点像 hack，涉及调用`Hide()`然后在关闭它之前等待任意时间（在我的情况下为 30 秒），这似乎有效。

我真的不喜欢这种方法——你怎么知道要等多少时间？EndPrint 不应该确保最后一页已假脱机吗？

有人对“正确”修复有想法吗？或者解释一下是怎么回事？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-20T07:54:02.643

不要使用此事件来捕捉打印的结束。我已经通过异步打印调用实现了应用程序的正确完成，并通过 System.Threading.Tasks.Task 类的 Wait 方法等待它完成。

```
// Start print asynchronously
System.Threading.Tasks.Task PrintTask = new System.Threading.Tasks.Task(new Action(PD.Print));
PrintTask.Start();
// Wait
PrintTask.Wait();
// End of application
System.Environment.Exit(0); 
```

# c# - 如何找到 .NET 应用程序使用的 TNS 路径？

> ID：12688500
> 
> 赞同：1
> 
> 时间：2012-10-02T10:18:55.377
> 
> 标签：c#, oracle, tnsnames, tns

我有以下错误，我想

ORA-12154 TNS: 不可能的 risolvere l'identificativo di connessione specificato

英语听起来像：

ORA-12154 TNS: 无法找到指定的连接标识符

但在女巫档案中？**我安装了多个 oracle 客户端**。我想执行一个 .NET 代码，女巫说 TNS 文件的位置。我已经在公司看到这个问题五年了，没有人试图解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:31:58.347

如果你有 Windows 操作系统，并且在 C 盘上安装了 Oracle 10g，它会是这样的：

```
C:\oracle\product\10.2.0\db_2\network\ADMIN\tnsnames.ora 
```

但是，这适用于 PL/SQL Developer 和 TOAD 等客户端程序。

如果您在谈论 .Net 提供商。

我安装 Oracle 11g 客户端：

```
C:\oracle\app\MyUserName\product\11.2.0\client_2\Network\Admin\tnsnames.ora 
```

更改第二个文件中的连接标识符，以控制 .Net “看到”为 oracle 连接的内容，无论是作为服务器资源管理器连接向导还是作为 .Net 代码。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:27:48.313

您要查找的文件名为`tnsnames.ora`. 该位置取决于您使用的操作系统。尝试查看 TNS_ADMIN 注册表项值，它应该指向该文件。另一个提示：如果路径包含`tnsnames.ora`包含`'('`或`)`例如`( x86`），您可能会遇到麻烦，因此请更改位置。

# mysql - Length of the result of SHA256 algo

> ID：12688502
> 
> 赞同：4
> 
> 时间：2012-10-02T10:19:12.493
> 
> 标签：mysql, sha256

I'm curious why the result of SHA256 can be saved within a `binary(32)`, but it needs a `varchar(64)` for the same result to be saved.

I mean, 256 bits are 32 bytes, so, saving inside a `binary(32)` makes perfect sense. But then why trying to save it in a `varchar` requires an extra byte for each byte?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:56:23.757

Let's start at the beginning and see what a cryptographic function is and what it's output actually is:

> A cryptographic hash function is a hash function, that is, an algorithm that takes an arbitrary block of data and returns a fixed-size bit string, the (cryptographic) hash value.

That means that we obtain sequence of 1s and 0s back. In order to save that sequence correctly, you have to use MySQL's `binary` data-type column since it doesn't save any data about how to represent the saved data to the user - there is no encoding associated with it. That means that when you try to view the data, you'll most likely see garbled characters since the GUI programs will attempt to represent the value stored as an ASCII-encoded string (which is wrong).

I'll skip the reasons why the hash value is represented as a number, but the point is that it is. And it's a hexadecimal number. Let's take the 1st byte that you used:

`10101111` = that's decimal `175` or hexadecimal `AF`.

Sure, you can represent ASCII `175` as something, it will most likely be a weird character depending on the codepage being used. Problem with ASCII is that codes above 127 are arbitrary, which lead to inventing codepages, which lead to inventing Unicode etc. so I'll skip it for now.

Point is, you can't rely on ASCII displaying `10101111` correctly in every scenario. That means that `175` will have to be displayed using 3 bytes, not 1\. Why? Because each character in `175` has to be displayed using its own byte.

That means that you can display your hash value as decimal number. That also means you can display your number as a hexadecimal number, which is significantly shorter to represent.

Let's take `10101111` again.

In decimal it's `175`, takes 3 bytes to show it on screen - 1 for `1`, 1 for `7` and 1 for `5`. In hexadecimal it's `AF`, takes 2 bytes to show it on screen - significantly shorter.

Each byte when translated to hex number has at least 2 digits (there are leading zeroes). With decimal numbers that's not the case, so you know that every time you want to represent 1 byte as a hex number - you'd have at least 2 digits. Ergo, your message is fixed width, it uses digits 0-9, letters A-F which are at the same position in every ASCII code page, ergo they'll look the same.

So when you take `AF` and display it in ASCII, you need 1 byte for `A` and 1 byte for `F`. There are 32 numbers, each has 2 digits, 32x2 = 64 bytes.

The only mistake you probably did was using `varchar(64)`. Using varchar for storing hashes is useless, if you know the hash width. Using `char` would be much better because you wouldn't waste that 1 byte that `varchar` column uses.

Hopefully, this clears it up a bit. It's actually more simple than it sounds :)

# java - Jackson - 如何为接口引用的反序列化指定单个实现？

> ID：12688503
> 
> 赞同：38
> 
> 时间：2012-10-02T10:19:12.687
> 
> 标签：java, json, jackson, deserialization

我想用杰克逊反序列化一个 JSON 对象。因为目标是一个接口，所以我需要指定应该使用哪个实现。

此信息可以使用@JsonTypeInfo-Annotation 存储在 JSON-Object 中。但我想在源代码中指定实现，因为它总是一样的。

这可能吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-02T10:24:29.017

使用[SimpleAbstractTypeResolver](https://fasterxml.github.io/jackson-databind/javadoc/2.4/com/fasterxml/jackson/databind/module/SimpleAbstractTypeResolver.html)：

```
ObjectMapper mapper = new ObjectMapper();

SimpleModule module = new SimpleModule("CustomModel", Version.unknownVersion());

SimpleAbstractTypeResolver resolver = new SimpleAbstractTypeResolver();
resolver.addMapping(Interface.class, Implementation.class);

module.setAbstractTypes(resolver);

mapper.registerModule(module); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-06-21T02:04:27.500

如果您只有单个接口实现，还有另一种方法可以使用。

```
public class ClassYouWantToDeserialize {
    @JsonDeserialize(as = ImplementationClass.class)
    private InterfaceClass property;
...
} 
```

这个问题在不久前得到了回答，但我想给你另一个不需要调整 ObjectMapper 的选项，而且比 @JsonTypeInfo 注释要简单得多。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-07-10T19:49:12.040

您也可以 `@JsonDeserialize(as = ImplementationClass.class)`在界面上使用，所有引用都将以相同的方式反序列化。

请注意，如果您的实施类之一是枚举，则您可能还需要`@JsonFormat(shape = JsonFormat.Shape.OBJECT)`枚举。

# mysql - 设置 Mysql_config 环境变量时出错

> ID：12688511
> 
> 赞同：0
> 
> 时间：2012-10-02T10:19:46.667
> 
> 标签：mysql, node.js

我正在尝试为 Node.js 安装[此](http://nodejsdb.org/db-mysql/)数据库驱动程序，我应该为此指定 MYSQL_CONFIG 环境变量

`$ export MYSQL_CONFIG=/usr/local/mysql/bin/mysql_config`

在运行之前，`$ npm install db-mysql`但我在终端中收到此错误。

```
bash: export: `=': not a valid identifier
bash: export: `/usr/bin/mysql_config': not a valid identifier 
```

我不明白发生了什么事。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:26:13.323

```
export MYSQL_CONFIG=/usr/local/mysql/bin/mysql_config 
```

应该可以。

确保 . 之前或之后没有空格`=`。

# c# - 输入字符串有多种分隔符，如何检查正确的分隔符？

> ID：12688512
> 
> 赞同：1
> 
> 时间：2012-10-02T10:19:51.620
> 
> 标签：c#, split, delimiter

我有一个小问题。我正在研究一个关键字字符串，它来自不同的提供商（我无法控制），他们都以不同的格式发送字符串。

字符串中的关键字可以用逗号、分号、空格或制表符分隔。在一个字符串中，仅使用一种类型的分隔符。

你将如何去认识它？

我在想类似的东西（伪代码）：

```
string delimiters = { ",",";"," " };

var x = str.split(delimiters[0]).count();

var y = str.split(delimiters[1]).count();

var z = str.split(delimiters[2]).count(); 
```

然后检查哪个是最大的并使用它。

你知道更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:29:28.090

您的想法非常有效，但我认为更好的解决方案是创建一个扩展方法并以这种方式返回一个锯齿状数组：

```
public static class Utilities {
    public static string[ ][ ] MultipleSplit( this string s, char[ ] delimiters ) {
        string[][] result = new string[ delimiters.Length ][ ];
        for ( int i = 0; i < delimiters.Length; i++ )
            result[ i ] = s.Split( delimiters[ i ] );

        return result;
    }

    public static string[ ] Larger( this string[ ][ ] jaggedArray ) {
        int index_larger = 0;

        for ( int i = 0; i < jaggedArray.Length; i++ ) {
            if ( jaggedArray[ i ].Length > jaggedArray[ index_larger ].Length )
                index_larger = i;
        }
        return jaggedArray[ index_larger ];
    }
} 
```

然后像这里一样使用它：

```
string[][] result = str.MultipleSplit(delimiters);
string[] larger = result.Larger(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:26:21.810

为什么不：

```
var result = str.Split(new[] {',', ';', ' '}, StringSplitOptions.None); 
```

编辑：

```
var result = delimiters.Select(d => str.Split(d))
            .OrderByDescending(l => l.Count())
            .First(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:26:03.513

尝试使用正则表达式进行拆分。一个正则表达式是 [,;\s]。这将查找逗号、分号空格或制表符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:30:58.853

虽然这里的建议可以接受并满足您当前的需求，但根本问题是

> 它来自不同的提供者（我无法控制），它们都以不同的格式发送字符串。

您需要就如何接受他们的信息与各种供应商达成某种形式的“合同”或协议。即使每个不同，系统也可以确定谁在提交数据并选择正确的解析器。

当前选项没有提供的一件事是确保您拥有良好数据的方法。如果提交的数据不好怎么办？你怎么知道？数据不好有关系吗？

# asp.net-mvc - 使用 JQuery Mobile 的 MVC 4 - 无法使用 post 上传文件

> ID：12688514
> 
> 赞同：0
> 
> 时间：2012-10-02T10:19:53.030
> 
> 标签：asp.net-mvc, jquery-mobile, file-upload

无论如何，我正在尝试将文件上传到 MVC 4 Internet Mobile Project（从模板..），代码工作正常，直到我将 JQuery Mobile 库添加到页面并将文件传递给控制器​​。

```
[HttpPost]
public ActionResult FileUpload(HttpPostedFileBase file)  
                                        --> file is null when using JQuery Mobile 
```

有人可以举例说明如何使帖子能够接收文件吗？

编辑：从我所做的另一项检查中，似乎从文件系统中选择文件时，它显示为空。用 javscript 检查它以查看文件更改时会发生什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:30:51.220

jQuery Mobile AJAX 化了表单，正如您已经知道的那样，使用 AJAX 上传文件是不可能的。作为一种解决方法，您可以将`data-ajax="false"`属性添加到您的`<form>`元素，以防止 jQuery Mobile 劫持它并使用 AJAX。

# visual-studio-2012 - 示例浏览器 Visual Studio (2012) 扩展不显示示例

> ID：12688518
> 
> 赞同：1
> 
> 时间：2012-10-02T10:19:59.100
> 
> 标签：visual-studio-2012, visual-studio-extensions

下载后，当我单击“打开”按钮时，我收到以下消息：

此命令需要一个包含 9 个管道分隔部分的参数。在给定参数中仅检测到 10 个零件。

有人知道如何解决吗？

# c++ - OpenCV 中的连接组件

> ID：12688524
> 
> 赞同：42
> 
> 时间：2012-10-02T10:20:23.717
> 
> 标签：c++, matlab, image-processing, opencv, computer-vision

我正在寻找一个 OpenCV 函数，它可以找到连接的组件并对其执行一些任务（例如获取像素数、轮廓、对象中的像素列表等。）

是否有类似于 MatLab 的 regionprops 的 OpenCV (C++) 功能？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-09-08T11:23:08.900

从 3.0 版本开始，OpenCV 具有[`connectedComponents`](https://docs.opencv.org/4.5.4/d3/dc0/group__imgproc__shape.html#gaedef8c7340499ca391d459122e51bef5)功能。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-03T04:36:21.123

看看[cvFindContours](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#findcontours)函数。它非常通用——它可以找到内部和外部轮廓，并以多种格式返回结果（例如平面列表与树结构）。一旦你有了轮廓，像[cvContourArea](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#contourarea)这样的函数允许你确定与特定轮廓相对应的连接组件的基本属性。

如果您更喜欢使用较新的 C++ 接口（与我上面描述的较旧的 C 样式接口相反），那么函数名称是[相似](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-14T22:30:23.130

编译时设置 -std=c++0x 选项

.h 文件

```
//connected_components.h
#ifndef CONNECTED_COMPONENTS_H_
#define CONNECTED_COMPONENTS_H_
#include <opencv2/core/core.hpp>
#include <memory>

class DisjointSet {
  private:
    std::vector<int> m_disjoint_array;
    int m_subset_num;
  public:
    DisjointSet();
    DisjointSet(int size);
    ~DisjointSet();
    int add(); //add a new element, which is a subset by itself;
    int find(int x); //return the root of x
    void unite(int x, int y);
    int getSubsetNum(void);
};

class ConnectedComponent {
private:
  cv::Rect m_bb;
  int m_pixel_count;
  std::shared_ptr< std::vector<cv::Point2i> > m_pixels;
public:
  ConnectedComponent();
  ConnectedComponent(int x, int y);
  ~ConnectedComponent();
  void addPixel(int x, int y);
  int getBoundingBoxArea(void) const;
  cv::Rect getBoundingBox(void) const;
  int getPixelCount(void) const;
  std::shared_ptr< const std::vector<cv::Point2i> > getPixels(void) const;
};

void findCC(const cv::Mat& src, std::vector<ConnectedComponent>& cc);
#endif //CONNECTED_COMPONENTS_H_ 
```

.cc 文件

```
//connected_components.cpp
#include "connected_components.h"

using namespace std;
/** DisjointSet **/
DisjointSet::DisjointSet() :
  m_disjoint_array(),
  m_subset_num(0)
{  }

DisjointSet::DisjointSet(int size) :
  m_disjoint_array(),
  m_subset_num(0)
{
  m_disjoint_array.reserve(size);
}

DisjointSet::~DisjointSet()
{  }

//add a new element, which is a subset by itself;
int DisjointSet::add()
{
  int cur_size = m_disjoint_array.size();
  m_disjoint_array.push_back(cur_size);
  m_subset_num ++;
  return cur_size;
}
//return the root of x
int DisjointSet::find(int x)
{
  if (m_disjoint_array[x] < 0 || m_disjoint_array[x] == x)
    return x;
  else {
    m_disjoint_array[x] = this->find(m_disjoint_array[x]);
    return m_disjoint_array[x];
  }
}
// point the x and y to smaller root of the two
void DisjointSet::unite(int x, int y)
{
  if (x==y) {
    return;
  }
  int xRoot = find(x);
  int yRoot = find(y);
  if (xRoot == yRoot)
    return;
  else if (xRoot < yRoot) {
    m_disjoint_array[yRoot] = xRoot;
  }
  else {
    m_disjoint_array[xRoot] = yRoot;
  }
  m_subset_num--;
}

int DisjointSet::getSubsetNum()
{
  return m_subset_num;
}

/** ConnectedComponent **/
ConnectedComponent::ConnectedComponent() :
  m_bb(0,0,0,0),
  m_pixel_count(0),
  m_pixels()
{
  m_pixels = std::make_shared< std::vector<cv::Point2i> > ();
}

ConnectedComponent::ConnectedComponent(int x, int y) :
  m_bb(x,y,1,1),
  m_pixel_count(1),
  m_pixels()
{
  m_pixels = std::make_shared< std::vector<cv::Point2i> > ();
}

ConnectedComponent::~ConnectedComponent(void)
{ }

void ConnectedComponent::addPixel(int x, int y) {
  m_pixel_count++;
  // new bounding box;
  if (m_pixel_count == 0) {
    m_bb = cv::Rect(x,y,1,1);
  }
  // extend bounding box if necessary
  else {
    if (x < m_bb.x ) {
      m_bb.width+=(m_bb.x-x);
      m_bb.x = x;
    }
    else if ( x > (m_bb.x+m_bb.width) ) {
      m_bb.width=(x-m_bb.x);
    }
    if (y < m_bb.y ) {
      m_bb.height+=(m_bb.y-y);
      m_bb.y = y;
    }
    else if ( y > (m_bb.y+m_bb.height) ) {
      m_bb.height=(y-m_bb.y);
    }
  }
  m_pixels->push_back(cv::Point(x,y));
}

int ConnectedComponent::getBoundingBoxArea(void) const {
  return (m_bb.width*m_bb.height);
}

cv::Rect ConnectedComponent::getBoundingBox(void) const {
  return m_bb;
}

std::shared_ptr< const std::vector<cv::Point2i> > ConnectedComponent::getPixels(void) const {
  return m_pixels;
}

int ConnectedComponent::getPixelCount(void) const {
  return m_pixel_count;
}

/** find connected components **/

void findCC(const cv::Mat& src, std::vector<ConnectedComponent>& cc) {
  if (src.empty()) return;
  CV_Assert(src.type() == CV_8U);
  cc.clear();
  int total_pix = src.total();
  int frame_label[total_pix];
  DisjointSet labels(total_pix);
  int root_map[total_pix];
  int x, y;
  const uchar* cur_p;
  const uchar* prev_p = src.ptr<uchar>(0);
  int left_val, up_val;
  int cur_idx, left_idx, up_idx;
  cur_idx = 0;
  //first logic loop
  for (y = 0; y < src.rows; y++ ) {
    cur_p = src.ptr<uchar>(y);
    for (x = 0; x < src.cols; x++, cur_idx++) {
      left_idx = cur_idx - 1;
      up_idx = cur_idx - src.size().width;
      if ( x == 0)
        left_val = 0;
      else
        left_val = cur_p[x-1];
      if (y == 0)
        up_val = 0;
      else
        up_val = prev_p[x];
      if (cur_p[x] > 0) {
        //current pixel is foreground and has no connected neighbors
        if (left_val == 0 && up_val == 0) {
          frame_label[cur_idx] = (int)labels.add();
          root_map[frame_label[cur_idx]] = -1;
        }
        //current pixel is foreground and has left neighbor connected
        else if (left_val != 0 && up_val == 0) {
          frame_label[cur_idx] = frame_label[left_idx];
        }
        //current pixel is foreground and has up neighbor connect
        else if (up_val != 0 && left_val == 0) {
          frame_label[cur_idx] = frame_label[up_idx];
        }
        //current pixel is foreground and is connected to left and up neighbors
        else {
          frame_label[cur_idx] = (frame_label[left_idx] > frame_label[up_idx]) ? frame_label[up_idx] : frame_label[left_idx];
          labels.unite(frame_label[left_idx], frame_label[up_idx]);
        }
      }//endif
      else {
        frame_label[cur_idx] = -1;
      }
    } //end for x
    prev_p = cur_p;
  }//end for y
  //second loop logic
  cur_idx = 0;
  int curLabel;
  int connCompIdx = 0;
  for (y = 0; y < src.size().height; y++ ) {
    for (x = 0; x < src.size().width; x++, cur_idx++) {
      curLabel = frame_label[cur_idx];
      if (curLabel != -1) {
        curLabel = labels.find(curLabel);
        if( root_map[curLabel] != -1 ) {
          cc[root_map[curLabel]].addPixel(x, y);
        }
        else {
          cc.push_back(ConnectedComponent(x,y));
          root_map[curLabel] = connCompIdx;
          connCompIdx++;
        }
      }
    }//end for x
  }//end for y
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T10:28:35.020

如果您不介意使用使用 OpenCV 的外部库，则可以使用[**cvBlobsLib**](http://opencv.willowgarage.com/wiki/cvBlobsLib)来实现。

> 一个执行二值图像连接组件标记的库（**类似于 regionprops Matlab 函数**）。它还提供了从提取的 blob 中操作、过滤和提取结果的功能，有关更多信息，请参阅功能部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-09T03:15:31.217

您可以使用[cv::connectedComponentsWithStats()](https://docs.opencv.org/3.4.0/d3/dc0/group__imgproc__shape.html#gae57b028a2b2ca327227c2399a9d53241)函数。

这是一个例子。

```
 // ...
    cv::Mat labels, stats, centroids;
    int connectivity = 8; // or 4
    int label_count = cv::connectedComponentsWithStats(src, labels, stats, centroids, connectivity);
    for (int i = 0; i < label_count; i++)
    {
        int x = stats.at<int>(i, cv::CC_STAT_LEFT);
        int y = stats.at<int>(i, cv::CC_STAT_TOP);
        int w = stats.at<int>(i, cv::CC_STAT_WIDTH);
        int h = stats.at<int>(i, cv::CC_STAT_HEIGHT);
        int area = stats.at<int>(i, cv::CC_STAT_AREA);
        double cx = centroids.at<double>(i, 0);
        double cy = centroids.at<double>(i, 1);

        // ...
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-22T13:53:21.160

Following DXM's code above which assumes 4-connected components, here is a version for 'findCC' that detects 8-connected components.

```
void findCC(const cv::Mat& src, std::vector<ConnectedComponent>& cc) {
if (src.empty()) return;
CV_Assert(src.type() == CV_8U);
cc.clear();
int total_pix = int(src.total());
int *frame_label = new int[total_pix];
DisjointSet labels(total_pix);
int *root_map = new int[total_pix];
int x, y;
const uchar* cur_p;
const uchar* prev_p = src.ptr<uchar>(0);
int left_val, up_val, up_left_val, up_right_val;
int cur_idx, left_idx, up_idx, up_left_idx, up_right_idx;
cur_idx = 0;
//first logic loop
for (y = 0; y < src.rows; y++) {
    cur_p = src.ptr<uchar>(y);
    for (x = 0; x < src.cols; x++, cur_idx++) {
        left_idx = cur_idx - 1;
        up_idx = cur_idx - src.size().width;
        up_left_idx = up_idx - 1;
        up_right_idx = up_idx + 1;

        if (x == 0)
        {
            left_val = 0;
        }
        else
        {
            left_val = cur_p[x - 1];
        }
        if (y == 0)
        {
            up_val = 0;
        }
        else
        {
            up_val = prev_p[x];
        }
        if (x == 0 || y == 0)
        {
            up_left_val = 0;
        }
        else
        {
            up_left_val = prev_p[x-1];
        }
        if (x == src.cols - 1 || y == 0)
        {
            up_right_val = 0;
        }
        else
        {
            up_right_val = prev_p[x+1];
        }

        if (cur_p[x] > 0) {
            //current pixel is foreground and has no connected neighbors
            if (left_val == 0 && up_val == 0 && up_left_val == 0 && up_right_val == 0) {
                frame_label[cur_idx] = (int)labels.add();
                root_map[frame_label[cur_idx]] = -1;
            }

            //Current pixel is foreground and has at least one neighbor
            else
            {
                vector<int> frame_lbl;
                frame_lbl.reserve(4);
                //Find minimal label
                int min_frame_lbl = INT_MAX;
                int valid_entries_num = 0;

                if (left_val != 0)
                {
                    frame_lbl.push_back(frame_label[left_idx]);
                    min_frame_lbl = min(min_frame_lbl, frame_label[left_idx]);
                    valid_entries_num++;
                }
                if (up_val != 0)
                {
                    frame_lbl.push_back(frame_label[up_idx]);
                    min_frame_lbl = min(min_frame_lbl, frame_label[up_idx]);
                    valid_entries_num++;
                }
                if (up_left_val != 0)
                {
                    frame_lbl.push_back(frame_label[up_left_idx]);
                    min_frame_lbl = min(min_frame_lbl, frame_label[up_left_idx]);
                    valid_entries_num++;
                }
                if (up_right_val != 0)
                {
                    frame_lbl.push_back(frame_label[up_right_idx]);
                    min_frame_lbl = min(min_frame_lbl, frame_label[up_right_idx]);
                    valid_entries_num++;
                }

                CV_Assert(valid_entries_num > 0);
                frame_label[cur_idx] = min_frame_lbl;

                //Unite if necessary
                if (valid_entries_num > 1)
                {
                    for (size_t i = 0; i < frame_lbl.size(); i++)
                    {
                        labels.unite(frame_lbl[i], min_frame_lbl);
                    }
                }
            }

        }//endif
        else {
            frame_label[cur_idx] = -1;
        }
    } //end for x
    prev_p = cur_p;
}//end for y
//second loop logic
cur_idx = 0;
int curLabel;
int connCompIdx = 0;
for (y = 0; y < src.size().height; y++) {
    for (x = 0; x < src.size().width; x++, cur_idx++) {
        curLabel = frame_label[cur_idx];
        if (curLabel != -1) {
            curLabel = labels.find(curLabel);
            if (root_map[curLabel] != -1) {
                cc[root_map[curLabel]].addPixel(x, y);
            }
            else {
                cc.push_back(ConnectedComponent(x, y));
                root_map[curLabel] = connCompIdx;
                connCompIdx++;
            }
        }
    }//end for x
}//end for y

//Free up allocated memory
delete[] frame_label;
delete[] root_map; 
```

}

# ruby-on-rails - 2 个命名范围的联合

> ID：12688531
> 
> 赞同：0
> 
> 时间：2012-10-02T10:20:47.143
> 
> 标签：ruby-on-rails

我有以下 2 个 named_scopes：

```
 named_scope :scope1,  lambda { |pi_id|
    { :select => "DISTINCT REF_PRO.*",
      :joins => "INNER JOIN LNK_PRO ON  LNK_PRO.PR_PRO_FK = REF_PRO.RPR_ID 
                 INNER JOIN EMI_SUBMISSION on EMI_SUBMISSION.SUB_ID =  LNK_PRO.PR_SUBMISSION_FK
                 INNER JOIN EMI_PERSON on EMI_PERSON.PER_ID = EMI_SUBMISSION.SUB_PI_FK ",
      :conditions=>["EMI_PERSON.PER_ID = ? ", pi_id],
      :group => "REF_PRO.RPR_ID"

    }
  }

  named_scope :scope2, lambda { |pi_id|
    { :select => "REF_PRO.*",
      :joins => "INNER JOIN REF_USER ON REF_USER.USR_ID = REF_PRO.RPR_CREATED_BY 
                 INNER JOIN LNK_USER_PI on LNK_USER_PI.USP_USER_FK = REF_USER.USR_ID ",
      :conditions=>["LNK_USER_PI.USP_PI_ID = ? ", pi_id]
    }
  } 
```

我需要加入他们的结果。

有没有办法合并两个结果集？如果不是，我如何修改一个 named_scope 以便它返回上述命名范围的组合结果？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:41:31.103

你可以这样做：

```
Model.scope1+Model.scope2 
```

# javascript - 如何处理许多异步回调的完成

> ID：12688535
> 
> 赞同：2
> 
> 时间：2012-10-02T10:21:04.210
> 
> 标签：javascript, jquery, web-sql

我有一个本地 WebSQL 数据库，需要与远程 MySQL 服务器同步。为此，我将流程拆分为多个请求，因此我可以在每个请求之间触发回调以显示进度。

问题是我这里有严重的竞争条件，我认为我不能用回调来解决，因为插入语句在 $.each() 函数（又名 for 循环）中。

我有这个异步问题遍布整个数据库接口。我一直在研究如何在 jQuery 中使用 promises 和 Deferred，但这似乎并没有解决问题。我只需要让这件事同步。

```
evalua.webdb.sync = function(callback){ 
$.getJSON("index.php/get/sync_riesgo",function(data){
    evalua.webdb.db.transaction(function(tx){
        $(data.riesgos).each(function(index, value){
            tx.executeSql('INSERT INTO riesgos (idRiesgo, nombre) VALUES ("'+value.idRiesgo+'", "'+value.nombre+'")');
        });
        $(data.estancias).each(function(index, value){
            tx.executeSql('INSERT INTO estancias (idEstancia, nombre, dimensionMinima) VALUES ("'+value.idEstancia+'", "'+value.nombre+'", "'+value.dimensionMinima+'")');
        });
        $(data.riesgosestancias).each(function(index, value){
            tx.executeSql('INSERT INTO riesgosestancias (idRiesgoEstancia, idRiesgo, idEstancia, porcentaje, indispensable) VALUES ("'+value.idRiesgoEstancia+'", "'+value.idRiesgo+'", "'+value.idEstancia+'", "'+value.porcentaje+'", "'+value.indispensable+'")');
        });
    });
});
    callback("First one done");
$.getJSON("index.php/get/sync_operaciones",function(data){
    evalua.webdb.db.transaction(function(tx){
        $(data.companhias).each(function(index, value){
            tx.executeSql('INSERT INTO companhias (idCompanhia, nombre) VALUES ("'+value.idCompanhia+'", "'+value.nombre+'")');
        });
        $(data.operaciones).each(function(index, value){
            tx.executeSql('INSERT INTO operaciones (idOperacion, nombre, descripcion) VALUES ("'+value.idOperacion+'", "'+value.nombre+'", "'+value.descripcion+'")');
        });
    });
});
    callback("Second one done");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:29:05.787

jQuery ajax 具有使 ajax 请求同步的设置。很容易做到

```
$.ajaxSetup({'async': false}); 
```

...或者只是`.ajax`在每个请求中单独使用和设置它。

如果您希望请求作为一个整体是异步的但按顺序触发，则必须创建某种队列：[https](https://gist.github.com/3818056) ://gist.github.com/3818056 - 不使用 Deferred API，尽管它可能可以。您可以按如下方式使用它：

```
var aq = new AjaxQueue();
aq.push({'type': 'get', 'dataType': 'json', 'url': 'index.php/get/sync_riesgo',
   'success': "you're really long function"});
aq.push({'type': 'get', 'dataType': 'json', 'url': 'index.php/get/sync_operaciones',
   'success': "you're really long function"}); 
```

当然，这*也*需要客户端继续运行，直到继续运行，直到ajax队列为空。如果可以的话，我建议这样做：

```
$(window).on('beforeunload', function () {
   if (aq.q.length) {
      return "Still doing back end processing; please stay on page for a moment";
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:37:50.620

我想我可能在这里找到了解决方案：

[HTML5 WebSQL：如何知道数据库事务何时完成？](https://stackoverflow.com/questions/7607677/html5-websql-how-to-know-when-a-db-transaction-finishes?rq=1)

我仍然需要知道如何制作不同的 INSERT 语句，并一个接一个地处理承诺。但这是一组较小的链式回调。

# urlencode - ServiceStack 不是 RESTful 路由中的 URL 解码路由参数

> ID：12688539
> 
> 赞同：2
> 
> 时间：2012-10-02T10:21:38.267
> 
> 标签：urlencode, servicestack

我正在使用自托管 ServiceStack 来提供与票务系统集成的 API，并定义了以下路线：

```
Routes
    .Add<TicketsWithStatus>("tickets/{Status}")
    .Add<TicketStatusCounts>("tickets"); 
```

当状态包含空格时，我的第一条路由出现 URL 编码问题。如果我浏览到`http://myservicebase/json/syncreply/TicketsWithStatus?Status=On%20Hold`我会得到我期望的响应。但是，如果我使用 RESTful 路由`http://mysevicebase/tickets/On%20Hold`，我不会得到任何结果。

调试我的应用程序，我可以看到在调用的情况下`On%20Hold`URL 被解码，但在使用 RESTful 路由时没有被解码。`On Hold``json/syncreply`

通过 RESTful 路由调用我的服务时，如何确保正确解码 status 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:30:48.137

ServiceStack 不对 PathInfo 进行 UrlDecode，它使用与`HttpRequest.PathInfo`ASP.NET Request 对象返回的相同。如果将其更改为**On+Hold** ，您可能会获得更好的成功。

# javascript - 谷歌图形轴格式

> ID：12688540
> 
> 赞同：1
> 
> 时间：2012-10-02T10:21:40.373
> 
> 标签：javascript, charts, google-visualization

我正在使用谷歌图表，并希望将 x 和 y 轴直接放在图表中，如下所示：

[BCG矩阵](http://en.wikipedia.org/wiki/File:Folio_Plot_BCG_Matrix_Example.png)

将轴放入中心是可能的

```
hAxis: { baseline: 50 } 
```

然而，轴标题仍位于图表的底部/侧面，即使使用

```
textposition: 'in' 
```

我也会欣赏更好的轴（带有箭头等）和更好的气泡形状！只有

```
 bubble: { textStyle: { fontSize: 11 }, opacity: 0.8, stroke: '#ccc' } 
```

我想格式化气泡的边缘，并将气泡标题移到气泡之外

# html - 如何使用 xsl:sort 对不基于位置（）的图像进行排序

> ID：12688541
> 
> 赞同：-1
> 
> 时间：2012-10-02T10:21:39.563
> 
> 标签：html, xslt, xslt-1.0, xslt-2.0, visual-web-developer

**已编辑：以下附加信息**

我正在尝试使用 < **xsl:sort** > 对图像进行升序排序，而不必使用 " **position** () 函数。

我在使用 < **xsl:sort** > 函数按升序对图像进行排序时遇到问题。

这是我链接到产品**ASAMCM195265783.jpg**的 XML 输入代码：

```
 <objectImage code="ASAMSCM195265783" name="NX1000 Compact System Camera in White with 20-50mm Lens Product Image (Primary)" imageTypeName="Product Image" imageTypeCode="PRODUCT" objectTypeImageCode="PRIMARY_PRODUCT" objectTypeImageName="Primary Product Image" displayOrder="7">
                 <imageVersions>
                    <imageVersion versionTypeCode="PRODUCT_THUMB_SM" width="15" height="15" path="PRODUCT/PRODUCT_THUMB_SM/ASAMSCM195265783.jpg" link=""/>
                    <imageVersion versionTypeCode="PRODUCT_THUMB_M" width="32" height="32" path="PRODUCT/PRODUCT_THUMB_M/ASAMSCM195265783.jpg" link=""/>
                    <imageVersion versionTypeCode="PRODUCT_REGULAR" width="170" height="170" path="PRODUCT/PRODUCT_REGULAR/ASAMSCM195265783.jpg" link=""/>
                    <imageVersion versionTypeCode="PRODUCT_ENLARGED" width="500" height="500" path="PRODUCT/PRODUCT_ENLARGED/ASAMSCM195265783.jpg" link=""/>
                    <imageVersion versionTypeCode="PRODUCT_THUMB_L" width="36" height="36" path="PRODUCT/PRODUCT_THUMB_L/ASAMSCM195265783.jpg" link=""/>
                    <imageVersion versionTypeCode="PRODUCT_THUMB_XL" width="150" height="150" path="PRODUCT/PRODUCT_THUMB_XL/ASAMSCM195265783.jpg" link=""/>
                    <imageVersion versionTypeCode="PRODUCT_THUMB_110" width="110" height="110" path="PRODUCT/PRODUCT_THUMB_110/ASAMSCM195265783.jpg" link=""/>
                    <imageVersion versionTypeCode="PRODUCT_LARGE" width="300" height="300" path="PRODUCT/PRODUCT_LARGE/ASAMSCM195265783.jpg" link=""/>
                    <imageVersion versionTypeCode="PRODUCT_THUMB_50x50" width="50" height="50" path="PRODUCT/PRODUCT_THUMB_50x50/ASAMSCM195265783.jpg" link=""/>
                    <imageVersion versionTypeCode="PRODUCT_THUMB_75x75" width="75" height="75" path="PRODUCT/PRODUCT_THUMB_75x75/ASAMSCM195265783.jpg" link=""/>
                  </imageVersions>
             </objectImage> 
```

我的其他**ASAMCM195265783.jpg**产品的其他 XML 示例与上面完全相同，但唯一的区别是**objectTypeImageCode="OTHER_PRODUCT"**而不是**PRIMARY_PRODUCT**以及**displayOrder="8"**和**"9"**。

这是我当前的 XSLT 代码：

```
<xsl:sort select="displayOrder" data-type="number" order="descending"/>
            <li class="prodthumbimg">
              <a>
                <xsl:attribute name="id">
                  <xsl:text>thumb</xsl:text>
                  <xsl:value-of select="position()" /> 
```

这是 HTML 中的结果：

```
<li class="prodthumbimg"><a id="thumb10" href="javascript:void(swap(9));" target=""><img src="http://www.jessops.com/ce-images/PRODUCT/PRODUCT_THUMB_50x50/ASAMSCM195265783_009.jpg" alt="Samsung NX1000 Compact System Camera in White with 20-50mm Lens" title="Samsung NX1000 Compact System Camera in White with 20-50mm Lens"></a></li>

<li class="prodthumbimg"><a id="thumb9" href="javascript:void(swap(8));" target=""><img src="http://www.jessops.com/ce-images/PRODUCT/PRODUCT_THUMB_50x50/ASAMSCM195265783.jpg" alt="Samsung NX1000 Compact System Camera in White with 20-50mm Lens" title="Samsung NX1000 Compact System Camera in White with 20-50mm Lens"></a></li>

<li class="prodthumbimg"><a id="thumb8" href="javascript:void(swap(7));" target=""><img src="http://www.jessops.com/ce-images/PRODUCT/PRODUCT_THUMB_50x50/ASAMSCM195265783_008.jpg" alt="Samsung NX1000 Compact System Camera in White with 20-50mm Lens" title="Samsung NX1000 Compact System Camera in White with 20-50mm Lens"></a></li> 
```

请注意，在我的 HTML 结果的第二行中，产品图片**ASAMCM195265783.jpg**放错了位置？我试图在我的 HTML 结果的第三行中显示该图像。所以基本上需要交换第 2 行和第 3 行 html 以便产品图像的名称可以按降序正确排序。

当我使用：

```
<xsl:sort select="position()" data-type="number" order="descending"/>
        <li class="prodthumbimg">
          <a>
            <xsl:attribute name="id">
              <xsl:text>thumb</xsl:text>
              <xsl:value-of select="position()" /> 
```

它完成了这项工作，但仅基于**position()**（产品的编号），我尝试根据产品名称而不是产品名称中的数字来执行此操作（如果有意义的话）。任何帮助将不胜感激，在此先感谢（如果您需要进一步澄清或任何其他问题，请让我

这是我在 HTML 中想要的结果：

```
<li class="prodthumbimg"><a id="thumb10" href="javascript:void(swap(9));" target=""><img src="http://www.jessops.com/ce-images/PRODUCT/PRODUCT_THUMB_50x50/ASAMSCM195265783_009.jpg" alt="Samsung NX1000 Compact System Camera in White with 20-50mm Lens" title="Samsung NX1000 Compact System Camera in White with 20-50mm Lens"></a></li>

<li class="prodthumbimg"><a id="thumb9" href="javascript:void(swap(8));" target=""><img src="http://www.jessops.com/ce-images/PRODUCT/PRODUCT_THUMB_50x50/ASAMSCM195265783_008.jpg" alt="Samsung NX1000 Compact System Camera in White with 20-50mm Lens" title="Samsung NX1000 Compact System Camera in White with 20-50mm Lens"></a></li>

<li class="prodthumbimg"><a id="thumb8" href="javascript:void(swap(7));" target=""><img src="http://www.jessops.com/ce-images/PRODUCT/PRODUCT_THUMB_50x50/ASAMSCM195265783.jpg" alt="Samsung NX1000 Compact System Camera in White with 20-50mm Lens" title="Samsung NX1000 Compact System Camera in White with 20-50mm Lens"></a></li> 
```

如果还有其他您认为与在此处发布更相关的信息以进一步澄清此问题，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:46:19.127

我认为问题在于**displayOrder**是**objectImage**元素的一个属性，但是您当前的排序将其视为一个元素。您可能需要将其更改为以下内容

```
<xsl:sort select="@displayOrder" data-type="number" order="descending"/> 
```

另请注意，这可能只是您问题中的一个错字，您声明您要“*按升序对图像进行排序*”。如果是这种情况，您显然必须将上述**xsl:sort中的“降序”更改为“升序”**

# windows - 控制字符以及操作系统/文本编辑器如何解释它们？

> ID：12688544
> 
> 赞同：0
> 
> 时间：2012-10-02T10:21:53.920
> 
> 标签：windows, operating-system, ascii, computer-science, text-editor

我正在阅读一些有关控制字符的内容，尤其是换行符（将重点介绍这一点）。通过 [http://en.wikipedia.org/wiki/Control_characters](http://en.wikipedia.org/wiki/Control_characters)后，知道 \n 是 unix 中的行字符，而它在 Windows 中是 \r\n。现在我得到了一个问题，当我们在键盘上输入任何给定的字符时，操作系统在解释 ASCII 代码时是如何出现的，因为当我们在键盘上键入任何给定的字符时，任何操作系统都会发送相同的位并且编辑器会解释该位并显示相应的字符。**看起来这种理解是错误的，因为当我们按 ENTER（换行符）时，在 unix(\n) 和 windows(\r\n) 的情况下会发送不同的位。根据新的理解，如果我们在 diff OS(说unix和windows），不同的位被发送到编辑器及其文本编辑器的责任，以在新行中显示键入的内容，保持底层操作系统在图片中。请让我知道我的理解是否正确，因为这将有助于我理解其他基础也是？**

下一个问题是如果上面是正确的，当不同的操作系统平等地对待所有其他字符时，不同的操作系统对待某些控制字符的原因是什么？是不是因为特定的位已经在特定的操作系统中保留了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:48:09.523

实际上，应用程序处理键盘输入的方式略有不同。当您按下返回时，应用程序没有义务在任何地方实际生成 LF 或 CR+LF。例如，它可能决定结束当前段落对象并开始一个新对象（例如在文字处理器中）。如果它是 Windows 文本编辑器，那么它可能只会将 CR+LF 写入文件，而在 Unix 上它只会写入 LF。

它们的键盘本身与您在屏幕甚至磁盘上看到的东西相距甚远。这需要经过扫描代码、键盘布局和其他转换，然后才能在某处以文本或标记形式结束。

# php - 在 javascript 方法中使用动态数据

> ID：12688549
> 
> 赞同：0
> 
> 时间：2012-10-02T10:22:12.857
> 
> 标签：php, javascript, mysql, photo-gallery, new-window

我是 php 和 JavaScript 的新手，所以我希望你能帮助我！下面是一个php代码！它从我的数据库中获取数据并显示我的照片和照片的标题。我想要做的是，如果您单击其中一张照片而不是新的 php expe: photo.php 打开，您可以单独看到同一张照片，而不是其他照片。

```
<?php 

$link = mysql_connect("localhost", "root","");
mysql_select_db("test", $link);
$query = "select * from post order by id DESC;";
$results = mysql_query($query, $link) or die ("you comand can't be   executed!".mysql_error());
if($results){
$i = 1;
while ($row = mysql_fetch_assoc($results)){

echo $row['title']. "<img src=/1/" . $row['location']. " width=580px > " .  "<br /><br /><br />";

}
}
?>     ' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:35:46.803

```
<?php 

$link = mysql_connect("localhost", "root","");
mysql_select_db("test", $link);
$query = "select * from post order by id DESC;";
$results = mysql_query($query, $link) or die ("you comand can't be   executed!".mysql_error());
if($results){
    $i = 1;
    while ($row = mysql_fetch_assoc($results)){
    //send photo_id (id of photo from your table) from url  NOTE: I've put link here
    echo $row['title']. "<a href='index.php?photo_id=".$row['id']."'><img src=/1/" . $row['location']. " width=580px ></a> " .  "<br /><br /><br />";
}
if(isset($_GET['photo_id'])) {
        //here you get only one id of photo  now retrieve the data from database and display the image  
    }
}

?> 
```

您将通过此处的 url 值获得照片`photo_id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:08:23.430

```
do this way you are getting results from database and you are 
displaying them with tile and image your aim is to click on 
image or image title go to a new page and display image alone
the image title as link in first page
if($results){
$i = 1;
while ($row = mysql_fetch_assoc($results)){
<a href='new page url?id=<?php echo $row["id"] ?>'>
echo $row['title'];
echo "</a>"
}
}
where $row['id'] is database unique id if have no it is always preferred 
to create a database with unique id and in new page get the uid
 using $id=$_GET['id'] and 
do as below
if($results){
$i = 1;
while ($row = mysql_fetch_assoc($results)){
if($id==$roe['id']{
echo $row['title']. "<img src=/1/" . $row['location']. " width=580px > ";
}
}
} 
```

# gpo - 没有目标电脑的 GPO

> ID：12688550
> 
> 赞同：1
> 
> 时间：2012-10-02T10:22:18.687
> 
> 标签：gpo

是否可以通过使用活动目录组但不指定 pc 来设置 GPO？

我有 3 个 Active Directory 组，我想在他们登录的电脑上启用 MSMQ。可以这样做吗？如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T15:27:09.050

您应该能够在 GPMC 中使用以下方法执行此操作，选择您的策略，然后在“安全过滤”区域的“范围”选项卡（右侧窗格）中选择“已验证用户”组并单击“删除”。然后单击添加并搜索您确实希望应用策略的组名称，并将它们添加到该安全过滤窗格中。然后在“委派”选项卡上验证这些组是否已列出并在“允许的权限”下具有读取访问权限，如有必要，请单击“高级”并根据需要为每个组进行设置。

# c# - 用加载项替换 Excel 连接范围

> ID：12688557
> 
> 赞同：1
> 
> 时间：2012-10-02T10:22:48.783
> 
> 标签：c#, excel, vsto

我对自己编写的 Excel 加载项做了一些噩梦。客户工作簿曾经是从 SQL 连接填充的，并且围绕命名表等设置了大量公式。我正在尝试使用来自 WCF 服务的数据填充连接填充的一些相同的表（使用现有的页眉和页脚）同时保持格式和公式（即：不破坏任何东西）。

输入数据就好了。我遇到的问题是：被替换的数据可能比命名范围中当前存在的数据更多或更少。我似乎找不到删除现有行并用我的新数据替换它们并将命名范围调整为新数据的方法。

提前谢谢了。

```
Range range = activeWorksheet.get_Range("Name", MissingValue);
range.Clear();
object[,] data = new object[result.Length, 26];
range.get_Resize(result.Length, 26);
... fill data....
range.Value2 = data; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:53:36.040

好的，设法用下面的代码解决它。还删除了阻止格式被删除的“range.Clear()”调用。

```
 Range range = activeWorksheet.get_Range("Name", MissingValue);
 int totalMissingRows = 0;
            if (range.Rows.Count < result.Length)
            {
                totalMissingRows = result.Length - range.Rows.Count;
                for (int i = 0, l = totalMissingRows; i < l; i++)
                {

                    Excel.Range rng = range;
                    rng = (Excel.Range)rng.Cells[rng.Rows.Count, 1];
                    rng = rng.EntireRow;
                    rng.Insert(Excel.XlInsertShiftDirection.xlShiftDown, MissingValue);
                }
            }

            //delete extra lines
            //remove left over data
            for (int i = result.Length, l = range.Rows.Count; i < l; i++) { range.Cells[range.Rows.Count, 1].EntireRow.Delete(null); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T10:53:16.577

既然，你已经得到了一个数据数组，为什么不直接把它写到 excel 中，如下所示：
`int startRow, startCol;`
`var startCell = (Range)worksheet.Cells[startRow, startCol];
var endCell = (Range)worksheet.Cells[startRow + result.Length, startCol + 26];
var writeRange = worksheet.get_Range(startCell, endCell);
writeRange.Value2 = data;`

在这里，我根据您的问题使用了数组的长度，数据是二维数据数组。

# unit-testing - VS2012 中的 ExpectedExceptionBaseAttribute

> ID：12688562
> 
> 赞同：3
> 
> 时间：2012-10-02T10:23:06.597
> 
> 标签：unit-testing, visual-studio-2012, mstest

今天早上我在升级到 Visual Studio 2012 后遇到了一个问题。

具体来说，我有一个扩展 ExpectedExceptionBaseAttribute 的类。测试在 Visual Studio 2010 中通过，但在 2012 年失败。

Microsoft Connect 上的问题在[这里](https://connect.microsoft.com/VisualStudio/feedback/details/758875/-testtools-unittesting-class-derived-from-expectedexceptionbaseattribute-fails)已作为“设计”关闭，但在我看来，这是一个错误。虽然微软提供了一个解决方案，但它要求我强制新版本的 MSTest 进入旧模式。

我没有在此处包含示例代码，因为在 Connect 问题上有一个小示例项目可供下载。

如果正如他们在评论中所说的那样，新版本的 MSTest 更精简且性能更高，那么我想使用它而不将其置于旧模式中。

所以问题是如何在不求助于它的情况下让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T13:17:24.620

这似乎已在 VS2012 Update 3 中修复。

# android - 如何在小部件的文本视图上设置文本

> ID：12688566
> 
> 赞同：6
> 
> 时间：2012-10-02T10:23:37.737
> 
> 标签：android, android-widget

我正在尝试在主屏幕小部件上设置文本。我正在使用 remoteView 来存档它，但是当我运行应用程序时它不显示文本。需要在 TextView 上设置文本（标记为“更新”）

```
public class MyWidgetProvider extends AppWidgetProvider 
{       
  public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) 
  {
    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
    views.setTextViewText(R.id.update, "Hellow");
  }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-02T10:36:27.423

试试下面的代码。

```
static void updateAppWidget(Context context,
                 AppWidgetManager appWidgetManager,  int appWidgetId) {

            DateFormat format = SimpleDateFormat.getTimeInstance(
                    SimpleDateFormat.MEDIUM, Locale.getDefault());
            CharSequence text = format.format(new Date());

            Intent intent = new Intent(context, UpdateService.class);
            PendingIntent pendingIntent = PendingIntent.getService(context, 0,
                    intent, 0);

            RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
                    R.layout.widget);
            remoteViews.setOnClickPendingIntent(R.id.LinearLayout01, pendingIntent);

            remoteViews.setTextViewText(R.id.widget_textview, text); <---- here you can set text

            // Tell the widget manager
            appWidgetManager.updateAppWidget(appWidgetId, remoteViews); 
```

你必须制作一个 xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout01"
    android:layout_height="120dp"
    android:layout_width="320dp"
    android:orientation="horizontal"
    >

<TextView  
    android:id="@+id/widget_textview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:gravity="center_vertical|center_horizontal"
    android:textColor="@android:color/white"
    android:text="00:00:00 PM"
    android:textSize="16sp"
    android:background="#FFAADD"
    />

</LinearLayout> 
```

它将打印小部件中的文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:31:07.987

而是尝试使用此代码为 textView 设置文本

```
public class MyWidgetProvider extends Activity
{
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.widget_layout);
TextView t1=(TextView)findViewById(R.id.update);
t1.setText("Hello");

} 
```

# ruby-on-rails - 资产：预编译因未知变量而失败

> ID：12688572
> 
> 赞同：1
> 
> 时间：2012-10-02T10:24:23.620
> 
> 标签：ruby-on-rails, capistrano

我正在尝试使用 capistrano 将我的工作开发系统部署到另一台机器上，所以我不知道问题出在哪里 - 开发、生产或我;)

我正在尝试预编译资产，但收到此错误：

bundle exec rake assets:precompile RAILS_ENV=production

耙中止！未定义的变量：“$grayLight”。（在/opt/data/rails/project/releases/20121002101450/app/assets/stylesheets/application.css）

我正在使用 twitter-bootstrap

老实说，我一直在阅读我能找到的任何东西，但无法让这件事发挥作用。将不胜感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T15:38:30.750

一个简单的解决方法是在您的文件中放置一个静态颜色值，例如“#778899”

以下是它们变量的一些 css 颜色值翻译：http: [//www.w3schools.com/cssref/css_colorsfull.asp](http://www.w3schools.com/cssref/css_colorsfull.asp)

# c# - C# 是否有任何类似于 VC++ 的构建配置管理器？

> ID：12688573
> 
> 赞同：0
> 
> 时间：2012-10-02T10:24:27.630
> 
> 标签：c#, visual-studio, configuration

我想为两个不同的版本（演示版和完整版）配置我的项目

在 VC++ 中我对此没有任何问题，我可以创建像“Release Demo”这样的新配置，声明预处理器指令，`DEMO`然后使用下一个代码：

```
#ifdef DEMO
   //do something
#endif 
```

然后，如果我在构建时选择此演示配置，我什至可以为“Release Demo”创建单独的文件夹，其中也包含二进制文件。

C# 有这个东西`#if`来标记代码的预处理器变量依赖部分，但是我可以通过哪种方式将它构建到不同的文件夹？只为一种配置轻松声明预处理器变量？ETC？

我使用 VS# Express 2010

![我的构建选项卡](../Images/4a5cb8dde8835ef7facec7c1ae59f1b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:29:41.233

在解决方案资源管理器中右键单击项目名称，然后单击属性。选择 Build 选项卡，您可以在其中查看项目配置，例如 Debug、Release。您可以设置哪个是活动的，配置的目标文件夹是什么等。

编辑：看截图

![在此处输入图像描述](../Images/9f928a36478c099a6246183d98dbeb7b.png)

编辑 2：还有一种创建自定义构建配置的方法。为此，在解决方案资源管理器中右键单击解决方案的名称，转到属性 -> 配置，单击配置管理器按钮（在右上角）。

# tsql - TSQL 只显示第一行

> ID：12688576
> 
> 赞同：9
> 
> 时间：2012-10-02T10:24:31.890
> 
> 标签：tsql, select, limit

我有以下 TSQL 查询：

```
SELECT DISTINCT MyTable1.Date
  FROM MyTable1 
INNER JOIN MyTable2 
ON MyTable1.Id = MyTable2.Id
WHERE Name = 'John' ORDER BY MyTable1.Date DESC 
```

它检索一长串日期，但我只需要第一个，即第一行中的那个。

我怎么才能得到它？

万分感谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T10:25:37.313

在 SQL Server 中，您可以使用[`TOP`](http://msdn.microsoft.com/en-us/library/ms189463.aspx?ppud=4)：

```
SELECT TOP 1 MyTable1.Date
FROM MyTable1 
INNER JOIN MyTable2 
  ON MyTable1.Id = MyTable2.Id
WHERE Name = 'John' 
ORDER BY MyTable1.Date DESC 
```

如果你需要使用`DISTINCT`，那么你可以使用：

```
SELECT TOP 1 x.Date
FROM
(
   SELECT DISTINCT MyTable1.Date
   FROM MyTable1 
   INNER JOIN MyTable2 
     ON MyTable1.Id = MyTable2.Id
    WHERE Name = 'John' 
) x
ORDER BY x.Date DESC 
```

甚至：

```
SELECT MAX(MyTable1.Date)
FROM MyTable1 
INNER JOIN MyTable2 
  ON MyTable1.Id = MyTable2.Id
WHERE Name = 'John' 
--ORDER BY MyTable1.Date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-20T12:39:25.033

这里有几个选项。您可以使用 Taryn 提到的 TOP(1) 。但是根据[文档](https://docs.microsoft.com/en-gb/sql/t-sql/queries/select-order-by-clause-transact-sql?view=sql-server-ver15)，为了限制返回的行，最好使用 OFFSET 和 FETCH。

> 我们建议您使用 OFFSET 和 FETCH 子句而不是 TOP 子句来实现查询分页解决方案并限制发送到客户端应用程序的行数。
> 
> 使用 OFFSET 和 FETCH 作为分页解决方案需要对返回给客户端应用程序的每一“页”数据运行一次查询。例如，要以 10 行增量返回查询结果，您必须执行一次查询以返回第 1 到 10 行，然后再次运行查询以返回第 11 到 20 行，依此类推。

假设，使用 OFFSET 和 FETCH 方法解决您的问题的方法可能是：

```
SELECT DISTINCT MyTable1.Date
  FROM MyTable1 
INNER JOIN MyTable2 
ON MyTable1.Id = MyTable2.Id
WHERE Name = 'John' ORDER BY MyTable1.Date DESC
OFFSET 0 ROWS
FETCH NEXT 1 ROW ONLY 
```

# jsf-2 - 每当在 primeFaces 布局的中心窗格中添加数据表时，左侧布局就会消失

> ID：12688581
> 
> 赞同：1
> 
> 时间：2012-10-02T10:24:52.060
> 
> 标签：jsf-2

我使用 Jsf 2.0 和 primefaces 扩展组件 pe:layout 创建一个带有左侧导航菜单栏、底部页脚和中心窗格的页面，内容一切正常，但是当我在中心窗格中添加 primefaces 数据表（p:datatable）时，标题和保留页脚布局，但左侧窗格消失，中间窗格占据整个页面。我尝试设置数据表的宽度和高度，但似乎没有任何效果。该页面在没有数据表的情况下正确显示。任何帮助将不胜感激。

请在下面找到带有数据表的代码：

```
 <html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">
<ui:composition template="/templates/showcaseLayout.xhtml">
    <ui:define name="centerContent">
        <f:facet name="header">
            <h:outputText value="Jan Sampark"/>
        </f:facet>
        <h:panelGroup layout="block" styleClass="centerContent">
           Welcome to the Menu Page.
               <p:growl id="messages" showDetail="true"/>

        </h:panelGroup>
       <p:tabView id="tabView">

    <p:tab id="tab1" title="Godfather Part I">
        <h:panelGrid columns="2" cellpadding="10">
            <p:graphicImage id="tab1Img" value="/images/godfather/godfather1.jpg" />
            <h:outputText id="tab1Text"
                value="The story begins as Don Vito Corleone, the head of a New York Mafia family, oversees his daughter's wedding.
                His beloved son Michael has just come home from the war, but does not intend to become part of his father's business. T
                hrough Michael's life the nature of the family business becomes clear. The business of the family is just like the head of the family, kind and benevolent to those who give respect,
                but given to ruthless violence whenever anything stands against the good of the family." />
        </h:panelGrid>
    </p:tab>

    <p:tab id="tab2" title="Godfather Part II">
        <h:panelGrid columns="2" cellpadding="10">
            <p:graphicImage id="tab2Img" value="/images/godfather/godfather2.jpg" />
            <h:outputText id="tab2Text" value="Francis Ford Coppola's legendary continuation and sequel to his landmark 1972 film, The_Godfather, parallels the young Vito Corleone's rise with his son Michael's spiritual fall, deepening The_Godfather's depiction of the dark side of the American dream.
            In the early 1900s, the child Vito flees his Sicilian village for America after the local Mafia kills his family. Vito struggles to make a living, legally or illegally, for his wife and growing brood in Little Italy,
            killing the local Black Hand Fanucci after he demands his customary cut of the tyro's business. With Fanucci gone, Vito's communal stature grows."/>
        </h:panelGrid>
    </p:tab>

    <p:tab id="tab3" title="Godfather Part III">
        <h:panelGrid columns="2" cellpadding="10">
            <p:graphicImage id="tab3Img" value="/images/godfather/godfather3.jpg" />
            <h:outputText id="tab3Text" value="After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.
                Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate."/>
        </h:panelGrid>
    </p:tab>

</p:tabView>

  <h:panelGroup layout="block" styleClass="centerContent">
            <p:dataTable var="car" value="#{tableBean.carsSmall}" id="carList" editable="true" style="table-layout: fixed"
               scrollable="true" scrollHeight="250" scrollWidth="300">
        <f:facet name="header">
            In-Cell Editing
        </f:facet>

<!--         <p:ajax event="rowEdit" listener="#{tableBean.onEdit}" update=":form:messages" /> -->
<!--         <p:ajax event="rowEditCancel" listener="#{tableBean.onCancel}" update=":form:messages" /> -->

        <p:column headerText="Model" >
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.model}" />
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{car.model}" />
                </f:facet>
            </p:cellEditor>
        </p:column>

      <p:column headerText="Manufacturer">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.manufacturer}" />
                </f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.manufacturer}" >
                        <f:selectItems value="#{tableBean.manufacturers}"
                            var="man" 
                            itemLabel="#{man}"
                            itemValue="#{man}" />
                    </h:selectOneMenu>
                </f:facet>
            </p:cellEditor>
        </p:column>

        <p:column headerText="Color">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{car.color}" />
                </f:facet>
                <f:facet name="input">
                    <h:selectOneMenu value="#{car.color}" >
                        <f:selectItems value="#{tableBean.colors}"
                            var="color" 
                            itemLabel="#{color}"
                            itemValue="#{color}" />
                    </h:selectOneMenu>
                </f:facet>
            </p:cellEditor>
        </p:column>

        <p:column headerText="Options">
            <p:rowEditor />
        </p:column>
        </p:dataTable>
        </h:panelGroup>
    </ui:define>
    <ui:define name="docuTable">
        <ui:include src="/sections/shared/documentation.xhtml">
            <ui:param name="tagName" value="timeline"/>
        </ui:include>
    </ui:define>
</ui:composition>
</html> 
```

# javascript - 如何将隐私选项卡添加到设置魅力？

> ID：12688585
> 
> 赞同：1
> 
> 时间：2012-10-02T10:24:57.333
> 
> 标签：javascript, html, windows-8

我想在设置魅力中添加一个隐私选项卡“我的应用因此被拒绝”，但是当用户单击设置魅力中的隐私时，我想在我的网站上打开一个页面。

我正在使用 javascript

![在此处输入图像描述](../Images/b8344677c43d85646c08d96798c6b221.png)

![在此处输入图像描述](../Images/a4d7e586d71df3336643b4f8ac7118ed.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T13:36:10.863

我已经做到了，如下所示

```
 var vector = e.detail.e.request.applicationCommands;
            var cmd1 = new Windows.UI.ApplicationSettings.SettingsCommand("privacy", "privacy", function () {
                window.open('http://www.dashsoft.com');
            });
            vector.append(cmd1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T01:09:08.140

请注意，要通过认证，您必须**在提交表格中提供指向您的隐私政策的链接**

![提交表单中的隐私政策字段](../Images/cbee4c84fc521e89d463da11e45979c5.png)

然后，您还可以在“设置”超级按钮上放置一个按钮（如其他人所述），或者在“关于”页面或类似页面中简单地链接到您的隐私政策。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-21T13:03:19.160

这可能正在解决您的问题：不要忘记将此标记为答案。

在 default.html

```
<div data-win-control="WinJS.UI.SettingsFlyout" data-win-options="{settingsCommandId:'privacy', width:'narrow'}">
        <div class="win-ui-dark win-header">
            <button type="button" onclick="WinJS.UI.SettingsFlyout.show()" class="win-backbutton"></button>
            <div class="win-label">Privacy Policy</div>
        </div>
        <div class="win-content win-settings-section">
            <script type="text/javascript">
window.open("your-privacy-link");
</script>
        </div>
    </div> 
```

在 JavaScript 中

```
WinJS.Application.onsettings = function (e) {
        e.detail.applicationcommands = {
            "privacy": {
                title: "Privacy Policy",
            }
        };
        WinJS.UI.SettingsFlyout.populateSettings(e);
    }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T14:48:31.047

我建议您使用 iframe，而不是打开会使用户脱离您的应用体验的浏览器窗口。在您的场景中，您将导航到本地隐私页面（即：/pages/privacy/privacy.html）。在privacy.html 中，你有一个简单的div 标签，里面有一个iframe，它的src 指向你的隐私页面。

从技术上讲，如果您的应用程序需要 Internet 访问功能，您只需要制定隐私政策。我的建议是养成始终拥有它的习惯。

*   隐私政策是应用程序认证失败的一个重要原因。 [http://msdn.microsoft.com/en-us/library/windows/apps/hh921583.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh921583.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T10:28:14.587

您必须将应用设置添加到您的应用。您可以参考此[MSDN QuickStart](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780611.aspx)来执行此操作。

例如：

```
WinJS.Application.onsettings = function (e) {
        e.detail.applicationcommands = {
            "defaultsDiv": { href: "DefaultsUI.html", title: "Defaults"},
            "helpDiv": { href: "HelpUI.html", title: "Help"}
        };
        WinJS.UI.SettingsFlyout.populateSettings(e);
    } 
```

问候。

# javascript - OOP 原型.method 调用 this.method

> ID：12688593
> 
> 赞同：0
> 
> 时间：2012-10-02T10:25:16.363
> 
> 标签：javascript

```
var fn = function() {

    this.method1 = function() {

        return this.public;
    };

    this.method2 = function() {

        return {

            init: function() { return this.public; }
        }
    };

    fn.prototype.public = "method prototype";
}; 
```

创建对象 fn

```
var object = new fn();

object.method1() // "method prototype"

object.method2().init(); // undefined 
```

this.public 原型在 method2().init() 函数运行返回未定义？

有没有原型的替代品？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:29:48.487

该问题与`this`绑定`init`函数的不同范围有关`method2()`，因此请尝试以下操作：

```
this.method2 = function() {
    var self = this;      
    return {
        init: function() { return self.public; }
    }
}; 
```

所以

```
object.method2().init(); // return "method prototype" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:30:41.777

这有很多问题。

但是对您的具体问题的直接答案是调用`init`返回 undefined 因为它对`this`您创建的内部对象的引用而不是您认为它引用的实例。

我建议你停止尝试解决这个特殊问题，并学习 JavaScript 中原型继承的基础知识

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:30:02.607

函数中的 this 是返回的对象`this`，它没有任何属性。`init``object.method2()``public`

# java - 如何从其他类调用 onClick()

> ID：12688595
> 
> 赞同：0
> 
> 时间：2012-10-02T10:25:17.020
> 
> 标签：java, android, onclick

**一级**

```
public class MyHeader {

private Button button1,button2;

public MyHeader(Activity source) {
   this.button1 = (Button)source.findViewById(R.id.b_one);
   this.button2 = (Button)source.findViewById(R.id.b_two); 
   // ...
   }

public Button getHeaderButtonOne() { return button1; }
// And so on... 
```

**2 级**

```
private MyHeader header;
 // ... in onCreate() method
  header = new MyHeader(this); 
```

使用此代码，在第 2 类中，我可以访问在第 1 类中获得 id 的按钮。现在我想为类 1 中设置的按钮获取 onclick 事件，如果我在类 2 中获取按钮，我也应该能够使用 click 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:32:25.433

只需在您的**class-1**中添加一个新方法：

```
public void clickButton1(){
   button1.performClick();
} 
```

并像这样从您的**class-2**中调用它：

```
header.clickButton1(); 
```

# php - 数字、字母、空格和下划线的正则表达式匹配在 PHP 中不起作用

> ID：12688597
> 
> 赞同：0
> 
> 时间：2012-10-02T10:25:19.827
> 
> 标签：php, regex

1.  `if(preg_match("^[A-Za-z0-9 _]*$^",'name'))`-> 1

2.  `if(preg_match("^[A-Za-z0-9 _]*$^",'name--'))`-> 1 //应该是零。在 js 中工作，但在 php 中工作

第一种情况很好。但在第二种情况下，我希望它为零，但 preg_match 输出 1。这个正则表达式可以在 js 中按我的意愿工作。我使用的 PHP 代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:27:08.657

量词匹配类中的`*`零个字符，`[A-Za-z0-9 _]`然后是输入的结尾。结果应该不足为奇；正则表达式“按预期”工作。

添加输入锚的开始会使匹配按预期失败：

```
preg_match("^\\^[A-Za-z0-9 _]*$^",'name--') 
```

当然，使用经典`/`分隔符可能会更好，因为使用`^`（作为分隔符，将在正则表达式的*开头*使用）恕我直言，这是自找麻烦：

```
preg_match("/^[A-Za-z0-9 _]*$/",'name--') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:34:39.157

你`^`用作分隔符，什么是......不太好，因为它也是起始锚。因此，您没有起始锚点，这意味着它`*`正好涵盖 0 个字符，什么是有效的。

```
~^[a-z0-9 _]*$~i 
```

# css - 如何根据值对列进行不同的着色

> ID：12688599
> 
> 赞同：0
> 
> 时间：2012-10-02T10:25:35.193
> 
> 标签：css, oracle, oracle-apex, lov

我正在尝试在报告中创建一个列，该列将从数据库中的相应列中获取条目。此 LOV根据基列的值返回`active`or状态。`inactive`

我想为该列添加颜色，以便更容易发现状态已设置为的记录`inactive`。因此，绿色为`active`，红色为`inactive`。
非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T11:52:18.620

IR 区域源

```
select * from emp 
```

在 deptno 上做了一个 LOV ![列 deptno 上的 LOV](../Images/8f255a3bfe67f92335c2e273e00c978f.png)

运行报告。转到操作 > 格式 > 突出显示 ![动作格式突出显示](../Images/7b176825c2d788f48802be54b487a3fd.png)

在突出显示选项中，您可以指定颜色、突出显示行还是仅突出显示单元格以及突出显示的条件。请注意，对于 lov 列，您可以通过表达式字段旁边的箭头按钮弹出一个带有该 lov 值的 lov！ ![突出显示选项](../Images/481be7051ea6d3a45526dc306e4c4ec6.png)

应用这将导致： ![突出结果](../Images/078be39f98872073c4a86eae37870b3c.png)

如果您希望默认应用此功能，请不要忘记保存您的报告！

* * *

如果突出显示不满意，您仍然可以使用 javascript/CSS 方式。

创建一个动态动作以在刷新 IR 区域后触发，使用类型为 Execute Javascript 的真实动作。

```
$("#apexir_DATA_PANEL td[headers='DEPTNO']").each(
function(){
   if($(this).text()=='ACCOUNTING'){
      $(this).addClass('deptAccounting'); //great to keep style in CSS! 
      $(this).css({"background-color":"red"}); //for that quick fix
   }
}
); 
```

请注意，为此您需要指定列（标题）并且必须在要比较的文本中编码！

# php - 未设置变量时的默认值

> ID：12688603
> 
> 赞同：0
> 
> 时间：2012-10-02T10:25:48.330
> 
> 标签：php

有时我有可能未设置的变量，我想改用默认参数。像这儿：

```
if ($p == "a") doSomething(); 
```

如果`$p`没有定义 PHP 会抛出`Notice: Undefined variable`. 为了避免这种情况，我经常在这种情况下使用这个结构：

```
$p = (isset($p) ? $p : ""); 
```

但是，如果您必须经常使用它，那将很难看。所以我为它写了一个函数：

```
function getIfSet(&$value, $default = '')
{
    return isset($value) ? $value : $default;
}

// Example
if (getIfSet($p) == "a") doSomething(); 
```

我想知道是否有一个 PHP 函数可以解决这个问题或者你如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:30:24.100

只是一点点改进，更喜欢传递`null`值`$default`，传递空字符串可能会令人困惑，因为正确的值可能是空字符串。

```
function getIfSet(&$value, $default = null)
{
    return isset($value) ? $value : $default;
}
$p = getIfSet($p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:30:24.883

isset() 尽可能干净。虽然我必须承认我不太喜欢默认为空字符串，只是因为变量可能是空字符串，但仍然“被设置”。我认为 bool false 或 null 的默认值会更符合 isset 的行为：

```
function getIfSet(&$value, $default = false)
{
    return isset($value) ? $value : $default;
}

$p = getIfSet($p);

if($p !== false){
     //insert or whatever
}
else{
    header('Location: error.php');
    exit;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:09:58.653

根据您要检查的值类型（可能是 REQUEST 数据？），考虑使用类。它们很有趣，可以在任何地方使用。

假设你正在检查 POST 数据（如果你不这样做，那么，把它当作一个想法），创建一个检查这个数组的类：

```
class Post
{
    public function __get($index)
    {
        if (isset($_POST[$index]))
            return $_POST[$index];
        else
            return null;
    }
} 
```

就如此容易。您知道当您尝试访问不存在的属性时 __get() 将触发。在这种情况下，如果该属性（实际上是 $_POST 数组中的索引）不存在，则返回 null 并且不会产生错误。

现在你可以这样做：

```
$params = new Post();
$foo = $params->name ?: ''; // of course this doesn't make much sense.

if (!$params->password) ...
// instead of 
if (isset($_POST['password'])) ...

// you'll still have to use isset for cases like:
if (isset($_POST['user']['password']) ...
if (isset($params->user['password'])) ...
// but still looks neater I'd say 
```

您很快就会发现一个问题是 $params 不是超级全局变量，而 $_POST 是。如何解决这个问题？在控制器类的构造函数中创建它，并对您正在使用的所有其他对象使用[依赖注入](http://fabien.potencier.org/article/11/what-is-dependency-injection)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T08:40:17.133

当我想出这个解决方案时，我试图让 renocor 的答案更加干净和面向对象：

```
class NiceArray implements ArrayAccess {
    protected $array;

    public function __construct(&$array) {
        $this->array =& $array;
    }

    public function offsetExists($offset) {
        return true;
    }

    public function offsetGet($offset) {
        if (isset($this->array[$offset]))
        {
            return $this->array[$offset];
        }
        else
        {
            return null;
        }
    }

    public function offsetSet($offset, $value) {
        $this->array[$offset] = $value;
    }

    public function offsetUnset($offset) {
        unset($this->array[$offset]);
    }
} 
```

用法：

```
$get = new NiceArray($_GET);
if ($get['p'] == "a") doSomething(); 
```

我知道这个类有点大，但是这样你仍然有一个数组，你可以很容易地将它用于你想要的每个数组。您无需更改以前可能拥有的任何代码。您仍然可以访问和更改数据。它甚至会改变原始数组。

# actionscript-3 - 将外部 swf (FlashPaper pdf) 加载到 Flash 项目中

> ID：12688606
> 
> 赞同：0
> 
> 时间：2012-10-02T10:25:52.713
> 
> 标签：actionscript-3, pdf, flash

我必须做一个非常简单的`swf`应用程序，能够显示一系列`pdf`文件。实际上，我能够在单层上创建菜单界面（第 0 帧上的一些按钮将用户重定向到应该显示 pdf 的其他帧）。

**这是我的问题：**

我需要一种方法来阅读 Flash 框架内的 pdf。

我找到了一种可能的解决方案，将 pdf 转换为 swf`FlashPaper 2` 现在我想知道如何将 swf 导入框架。

阅读一些actionscript 3指南，我能够创建一个容器movieclip（一个简单的矩形），我已将带有以下代码的swf加载到该容器中：

```
var swf:MovieClip;
var loader:Loader = new Loader();
var defaultSWF:URLRequest = new URLRequest("test.swf"); //test.swf is my converted pdf
loader.load(defaultSWF);

screen_01.addChild(loader); //screen_01 is the container rectangle converted to movieclip 
```

我使用容器影片剪辑来维护框架上的其他对象（菜单按钮），因为它有助于 swf 定位。
我看到它也可以使用`loader.x`并且`loader.y`它有效。

不幸的是，我无法控制 swf/pdf 文件的宽度和高度（`loader.width`并且`loader.height`存在，但如果使用会导致 swf 根本不会加载）

* * *

**解决方案：**

我在[这个页面](http://www.kirupa.com/forum/showthread.php?297261-Flash8-loadMovie-set-size-of-the-movie)找到了一个可能的解决方案。这个想法是仅在加载过程完成后
更改比例（甚至可以在之前完成定位）。 无论如何我不得不使用这个项目，因为转换后不能正常工作，我不知道为什么......`swf`
`Actionscript 2``FlashPaper``pdf``AS3`

这里的代码：

```
//insert an emplty movieclip to load the swf, I've called it screen_01

var movLoad:MovieClipLoader = new MovieClipLoader();
var myListener:Object = new Object();

myListener.onLoadInit = function(thisMc:MovieClip) {

    thisMc._height = 600;
    thisMc._width = 900;
    thisMc._x = 50;
    thisMc._y = 30;
};

movLoad.addListener(myListener);

movLoad.loadClip("folder/flashpaper_converted_pdf.swf.swf",screen_01); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:39:09.150

您可以使用 scaleX 和 scaleY 属性修改加载器的大小。保持它们相等，这样 swf 就不会被拉伸。

你可能还想听`COMPLETE`事件做这样的事情：

```
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);

function onComplete(e:Event)
{
    var loader:Loader = e.currentTarget.loader;

    loader.scaleX = loader.scaleY = 2; //Double the size of the loaded swf
} 
```

# iphone - 使用 writeImageToSavedPhotosAlbum 将 UIImage 保存到相册

> ID：12688610
> 
> 赞同：9
> 
> 时间：2012-10-02T10:26:05.900
> 
> 标签：iphone, objective-c, ios, alassetslibrary

我正在尝试将 UIImage 保存到相册。我尝试了几种方法，最后一种是：

```
-(IBAction)captureLocalImage:(id)sender{

[photoCaptureButton setEnabled:NO];

// Save to assets library
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

[library writeImageToSavedPhotosAlbum: imageView.image.CGImage metadata:nil completionBlock:^(NSURL *assetURL, NSError *error2)
 {
     //             report_memory(@"After writing to library");
     if (error2) {
         NSLog(@"ERROR: the image failed to be written");
     }
     else {
         NSLog(@"PHOTO SAVED - assetURL: %@", assetURL);
     }

     runOnMainQueueWithoutDeadlocking(^{
         //                 report_memory(@"Operation completed");
         [photoCaptureButton setEnabled:YES];
     });
 }];  

} 
```

imageView 是一个 UIImageView ，其中包含我要保存的图像。在日志上，我得到“照片已保存-assetURL：（null）”并且照片没有保存到库中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T11:33:53.370

只需使用此波纹管将图像保存在您的照片库中

```
UIImageWriteToSavedPhotosAlbum(imageView.image,nil,nil,nil); 
```

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:32:44.963

查看此[示例](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/).. 它解释了如何使用资产库保存照片..

你甚至可以使用..

```
UIImageWriteToSavedPhotosAlbum(UIImage *image, id completionTarget, SEL completionSelector, void *contextInfo); 
```

查看他的链接[如何将图片保存到 iPhone 照片库？](https://stackoverflow.com/questions/178915/how-to-save-picture-to-iphone-photo-library)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-04T08:40:21.280

对于 iOS 11+ 需要*隐私 - 照片库添加使用*说明`info.plist`

添加**`NSPhotoLibraryAddUsageDescription`**info.plist

代码：

```
UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil); 
```

[参考](https://developer.apple.com/documentation/uikit/1619125-uiimagewritetosavedphotosalbum)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T21:44:11.293

我正在使用 GPUImage，显然库本身存在某种问题。

上面的代码绝对有效。如果您想了解有关此问题的更多信息：

[带有 imageFromCurrentlyProcessedOutput 的 GPUImagePicture 没有得到 UIImage](https://stackoverflow.com/questions/12735980/gpuimagepicture-with-imagefromcurrentlyprocessedoutput-doesnt-get-uiimage)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-04T10:23:39.190

由于 iOS 8.1 UIKit 框架具有 UIImageWriteToSavedPhotosAlbum() 函数，如 vishy 所说。

我以这种方式使用它：

```
 UIImageWriteToSavedPhotosAlbum(myImage, self, "image:didFinishSavingWithError:contextInfo:", nil) 
```

进而

```
func image(image: UIImage, didFinishSavingWithError error: NSError?, contextInfo:UnsafePointer<Void>) {
    // check error, report image has been saved, ...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-23T05:29:49.877

当您从相机拍照时，您可以将图像保存在选取器委托中：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *image = [info valueForKey:UIImagePickerControllerEditedImage];   
    [library writeImageToSavedPhotosAlbum:image.CGImage metadata:[info objectForKey:UIImagePickerControllerMediaMetadata] completionBlock:^(NSURL *assetURL, NSError *error) {
...
    }];

    [picker dismissViewControllerAnimated:YES completion:nil];
} 
```

# php - 更具声明性的 PHP：数组转换

> ID：12688616
> 
> 赞同：2
> 
> 时间：2012-10-02T10:26:41.360
> 
> 标签：php, arrays

我有一个类对象数组：

```
class Foo
{
    public $A;
    public $B;
    public $C;
} 
```

我需要一个新的 C 字段数组。有没有办法在**没有**显式循环的情况下转换数组？在 C# 之后讨厌它。

```
// Explicit conversion:
foreach ($arr as $item)
{
    $Cs[] = $item->C;
} 
```

问候，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T10:28:37.737

```
$Cs = array_map(function($item) {
    return $item->C;
}, $arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:34:14.420

我相信你可以使用[`get_object_vars`](http://www.php.net/manual/en/function.get-object-vars.php).

```
$arr = get_object_vars(new Foo());
var_dump($arr); // should give Array(3) { "A"=>NULL, "B"=>NULL, "C"=>NULL } 
```

# c# - 日期时间时间从 UTC 转换为本地时间两次

> ID：12688617
> 
> 赞同：1
> 
> 时间：2012-10-02T10:26:44.057
> 
> 标签：c#

当我将日期时间存储在数据库中时，我想将我的时间转换为通用时间，并在我从数据库中检索时转换回系统时间。

**我通过创建函数ConvertToLocalTime()** 和**ConvertToUniversalTime()**都成功地完成了这件事。

转换为当地时间的代码如下：

```
 public void ConvertToLocalTime()
    {
        string szTimezoneinfoid = TimeZoneInfo.Local.Id.ToString();
        TimeZoneInfo tzInfo = TimeZoneInfo.FindSystemTimeZoneById(szTimezoneinfoid);

        this.m_dtCreatedDate = TimeZoneInfo.ConvertTimeFromUtc(m_dtCreatedDate, tzInfo);
    } 
```

当我调用一个函数**Shipment.ConvertToLocalTime()**时，它将发货创建日期更改为本地时间，直到它工作正常。

现在，如果我再次调用**Shipment.ConvertToLocalTime()**，那么它将再次将本地时间视为 UTC 并将其转换为本地时间。

如果已经是本地时间，有什么方法可以阻止转换为本地时间？

有什么方法可以获取日期时间的时区吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:32:04.807

的结果[`TimeZoneInfo.ConvertTimeFromUtc`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.converttimefromutc.aspx)是 a`DateTime`和 a `Kind`，`Unspecified`除非时区本身是 UTC。

当您将该结果传递给 时`TimeZoneInfo.ConvertTimeFromUtc`，它将假定您将其*理解*为 UTC `DateTime`- 否则您不会调用`ConvertTimeFromUtc`...

基本上，`DateTime.Kind`这是一种试图解决`DateTime`试图代表太多不同事物的问题的技巧。您的方法以可能不明确的数据开始，并以不明确的数据结束......这不是好兆头。

您可以确保始终知道自己在做什么，并避免使用自己的结果调用您的方法，或者您可以考虑使用[Noda Time](http://noda-time.googlecode.com)，这是我的替代 .NET 日期/时间 API，它通过使用不同的方法来避免此类事情数据类型来表示不同类型的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:32:48.750

我不确定您的示例中到底出了什么问题，但是如果您只是想从数据库中获取您知道是 UTC 的日期/时间并将其转换为本地时间，您可以执行以下操作：

```
var dbTime = //whatever, from database.
var utcTime = DateTime.SpecifyKind(dbTime, DateTimeKind.Utc);
var localTime = utcTime.ToLocalTime(); 
```

在我自己的项目中，我`dbTime.Kind != DateTimeKind.Local`首先检查，以防我的数据阅读器决定开始为我执行转换。

# c# - 带有图像按钮 ASP.NET（沙盒帐户）的 PayPal 项目金额格式不正确

> ID：12688618
> 
> 赞同：1
> 
> 时间：2012-10-02T10:26:49.143
> 
> 标签：c#, asp.net, paypal

我希望对专家来说很容易。我是学生，请帮忙！

当我使用我的 asp.net 页面在 Paypal 中结帐时，我的金额格式不正确，有什么提示吗？

**这是我在 c# asp 中的代码：**

```
 <asp:ImageButton ID="ImageButton3" runat="server" 
       ImageUrl="~/Catalog/Images/Thumbs/buynow.jpg" 
       PostBackUrl='<%# "https://www.sandbox.paypal.com/cgi-bin/webscr?" +
              "cmd=_xclick" + 
              "&business=seller_1346751061_biz@gmail.com" +
              // seller email is also static
              "&item_name=" + Eval("ModelName") +
              // ValueX is dynamic name of product item
              "&amount=" + Eval("UnitCost") +
              // ValueY is dynamic cost of product item
              "&currency_code=AUD" // this is also static
        %>'
  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:44:36.780

您尝试做的事情很简单，不起作用。

数据`item_name`等`amount`必须使用 发送，`POST`而不是使用 将它们放在 url 上`GET`。

此外，通过放置`PostBackUrl`在此按钮上，您将所有页面数据发布到贝宝，而不是贝宝需要的实际数据。

[正确的方法是在他的示例和手册](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_WebsitePaymentsStandard_IntegrationGuide.pdf)上制作一个完全定制的，`form`如贝宝询问，而这不能从通常的 asp.net 表单中完成。

您可以制作的一个技巧是使用动态表单制作器，如本例所示：

[http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET](http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET)

和 ether 制作动态帖子，ether 将您的按钮放在那里并要求用户单击它。

您也可以使用示例代码考虑这篇文章：

[http://www.codeproject.com/Articles/42894/Introduction-to-PayPal-for-C-ASP-NET-developers](http://www.codeproject.com/Articles/42894/Introduction-to-PayPal-for-C-ASP-NET-developers) http://www.codeproject.com/Articles/19184/Use-of-the-PayPal -payment-system-in-ASP-NET [http://www.codeproject.com/Questions/120427/Paypal-API-Integration-into-ASP-Net-Web-Site](http://www.codeproject.com/Questions/120427/Paypal-API-Integration-into-ASP-Net-Web-Site)

并且不要忘记用于 asp.net 的 paypal SDK：
[https ://www.paypal.com/us/cgi-bin/webscr?cmd=p/pdn/sdk_asp_net_how-it-works-outside](https://www.paypal.com/us/cgi-bin/webscr?cmd=p/pdn/sdk_asp_net_how-it-works-outside)

# xpages - 创建自己的数据源

> ID：12688622
> 
> 赞同：7
> 
> 时间：2012-10-02T10:27:23.557
> 
> 标签：xpages

有没有关于如何为 xpages 创建自己的数据源的信息？我正忙于为我们的系统开发一个 java API，我希望能够将数据用作 xpages 中的数据源。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T12:11:18.563

有一个 Lotusphere 2011 会议 SHOW107 引导您完成这些步骤。[在Jim 的博客](http://blog.sequill.com/2011/02/xpages-data-source-control-for-relational-databases/)、[BleedYellow 社区](http://www.bleedyellow.com/blogs/06b53a4f-1d53-4919-842d-51d6c8be697d)、Paul（和相关）的出色[幻灯片](http://www.slideshare.net/pdhannan/ad116-01)以及[SHOW107](http://www.slideshare.net/NotesSensei/show107-the-datasource-session-take-xpages-data-boldly-where-no-xpages-data-has-been-taken-before)本身上阅读有关它的信息。

一个警告：数据源不会在 Domino Designer 中显示它们的字段。如果您想要该功能，那么您可以继承 DominoDocument 并或多或少地覆盖所有函数，而不是查看*com.ibm.xsp.extlib.model.ObjectDataSource 。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:37:50.323

您可以查看扩展库的源代码。在那里，您会发现类*com.ibm.xsp.extlib.model.ObjectDataSource*作为一个简单的示例。

# c++ - CodeBlocks HelloWorld C 示例不起作用：未声明错误“ptrdiff_t”

> ID：12688625
> 
> 赞同：0
> 
> 时间：2012-10-02T10:27:35.553
> 
> 标签：c++, codeblocks

我一直使用 MinGW 或 Dev-C++ 在 Microsoft Windows 上用 C++ 编写代码，但现在我必须使用 Code Blocks。我已经按照标准程序下载并安装了它。

我尝试运行超级简单的 HelloWorld.cpp 示例文件，但出现许多编译错误：

```
#include <iostream>
using namespace std;

int main()
{
  cout << “Hello World!” << endl;
} 
```

这是我的编译器错误列表：

```
Compiling: C:\Temp7\provaC\test00.cpp
In file included from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/cstring:49,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/mingw32/bits/c++locale.h:42,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/iosfwd:46,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/ios:44,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/ostream:45,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/iostream:45,
                 from C:\Temp7\provaC\test00.cpp:1:
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/cstddef:52: error: `::ptrdiff_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/cstddef:53: error: `::size_t' has not been declared
In file included from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/cstring:51,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/mingw32/bits/c++locale.h:42,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/iosfwd:46,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/ios:44,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/ostream:45,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/iostream:45,
                 from C:\Temp7\provaC\test00.cpp:1:
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:36: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:37: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:38: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:39: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:40: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:46: error: expected constructor, destructor, or type conversion before "strcspn"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:46: error: expected `,' or `;' before "strcspn"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:49: error: expected constructor, destructor, or type conversion before "strlen"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:49: error: expected `,' or `;' before "strlen"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:50: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:51: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:52: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:55: error: expected constructor, destructor, or type conversion before "strspn"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:55: error: expected `,' or `;' before "strspn"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:58: error: expected constructor, destructor, or type conversion before "strxfrm"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:58: error: expected `,' or `;' before "strxfrm"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:65: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:66: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:72: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:73: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:77: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:80: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:81: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:90: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:91: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:100: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:102: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:104: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:109: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:125: error: expected constructor, destructor, or type conversion before "wcscspn"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:125: error: expected `,' or `;' before "wcscspn"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:127: error: expected constructor, destructor, or type conversion before "wcslen"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:127: error: expected `,' or `;' before "wcslen"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:128: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:129: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:130: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:133: error: expected constructor, destructor, or type conversion before "wcsspn"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:133: error: expected `,' or `;' before "wcsspn"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:136: error: expected constructor, destructor, or type conversion before "wcsxfrm"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:136: error: expected `,' or `;' before "wcsxfrm"
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:150: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:151: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:157: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:158: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:175: error: `size_t' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/string.h:176: error: `size_t' has not been declared
In file included from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/mingw32/bits/c++locale.h:42,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/iosfwd:46,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/ios:44,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/ostream:45,
                 from C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/iostream:45,
                 from C:\Temp7\provaC\test00.cpp:1:
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/cstring:89: error: `::strxfrm' has not been declared
C:/Dev-Cpp/bin/../lib/gcc/mingw32/3.4.2/../../../../include/c++/3.4.2/cstring:90: error: `::strcspn' has not been declared
Process terminated with status 1 (0 minutes, 5 seconds) 
```

似乎在标准库中缺少某些结构（`ptr_diff_t`,`size_t`等）。

有人可以帮我编译一下简单的 HelloWorld.cpp 吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T22:26:50.307

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-09T16:46:29.780

# javascript - 检测谷歌地球插件何时崩溃

> ID：12688626
> 
> 赞同：1
> 
> 时间：2012-10-02T10:27:36.147
> 
> 标签：javascript, google-earth-plugin

如果谷歌地球插件崩溃了，有一种方法可以从 javascript 检测，所以我可以自动重新加载页面而无需用户操作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:31:43.617

我认为您无法直接评估插件是否崩溃。但是，您可以设置一个无休止的计时器，不断检查类似`getView()`

```
function hasCrashed() {
     try {
          var view = ge.getView();
          if (view) {
          // plugin good
          } else {
          // plugin not good
          }
     } catch (e) {
         // plugin not good
     }
     // a timer that checks every second
     setTimeout('hasCrashed()', 1000);
} 
```

我还没有测试过，但它应该可以工作。如果没有，请尝试除 from `getView()`- 也许`getWindow()`或选项之外的其他`getGlobe()`选项

# wordpress - 预定的帖子 - 插件错过了时间表 - WP to Twitter

> ID：12688630
> 
> 赞同：0
> 
> 时间：2012-10-02T10:27:52.030
> 
> 标签：wordpress, scheduled-tasks

在 Wordpress 3.4.2 中安排帖子的功能似乎被破坏了。所以我安装了**WP Missed Schedule**插件，它每 5 分钟检查一次与此问题匹配的帖子。我还使用插件**WP to Twitter**，它支持将新帖子自动推到 Twitter 的功能 - 无论帖子是否计划。

**这是问题所在：**

如果有预定的帖子，它将在 Wordpress 中发布，由 Plugin WP Missed Schedule 提供支持，但不会在推特上发布！

WP Missed Schedule 中的代码说：

```
wp_publish_post($scheduledID) 
```

WP to Twitter 中的所谓 Hook 说：

```
add_action( 'publish_post', ...) 
```

那么 Hook **publish_post是否适合****wp_publish_post**函数？我没有找到任何有关此的文档。

希望你能帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:43:11.647

我在使用 Tweetable 的网站上遇到了同样的问题。我在
wp_publish_post($scheduledID)之后添加了这一行

tweetable_publish_tweet($scheduledID);

但这不是问题所在。如果修改日期晚于发布日期，则 Tweetable 中有几行会导致发布功能退出。当插件发布帖子时，它会更改修改日期。我在 Tweetable 中注释掉了这些行，它起作用了。

# javascript - 将 HTML 文件的内容转换为字符串

> ID：12688631
> 
> 赞同：0
> 
> 时间：2012-10-02T10:27:55.493
> 
> 标签：javascript, html, file-upload

我想知道如何将 .html 文件输入到浏览器，然后浏览器获取所述 .html 文件的内容并将其转换为一个大字符串，以便我可以将其传递给 JavaScript 函数来解析它。据我了解，HTML5 实现了一个文件 API，但我不完全确定它是否能够做我想做的事情，或者如何真正使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:33:10.077

您可以使用以下内容：

```
$filename = "yourhtmlfile.html";
$handle = fopen($filename, "r");
// Retrieve the content of HTML file, and stocks it into $contents var
$contents = fread($handle, filesize($filename));
fclose($handle); 
```

# java - Java RMI - 本地主机和调试

> ID：12688632
> 
> 赞同：0
> 
> 时间：2012-10-02T10:27:57.627
> 
> 标签：java, spring, localhost, rmi

我在 SPring 配置中设置了一些服务来使用 RMI 来调用方法。在测试环境中，这会解析为`localhost`，这可能允许我调试代码。不幸的是，它只是执行方法并返回一个值。有没有办法设置 intellij 来调试 RMI localhost 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:44:26.090

调试 Spring RMI 服务有什么问题？如果你在 Tomcat 中运行它，只需启动 tomcat`catalina.sh jpda run`并在 Idea 中创建远程调试配置，传输 - 套接字，调试器模式 - 附加，主机 - 本地主机，端口 - 通常是 8000。就是这样。

# directory - robots.txt 不允许 /variable_dir_name/directory

> ID：12688636
> 
> 赞同：0
> 
> 时间：2012-10-02T10:28:18.247
> 
> 标签：directory, robots.txt, noindex

我需要通过 robots.txt 禁止 /variable_dir_name/directory

我用：

禁止：*/directory 无索引：*/directory

那是对的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:01:16.210

以下内容*应*在您的 robots.txt 中起作用：

```
User-Agent: *
Disallow: /*/directory 
```

来自 Google 的进一步阅读：[使用 robots.txt 文件阻止或删除页面](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-05T04:44:16.573

事实上，GoogleBot 有机会在 Robots.txt 中使用这些：

*   无索引
*   不关注
*   爬行延迟

但在[GoogleBlog-News](https://webmasters.googleblog.com/2019/07/a-note-on-unsupported-rules-in-robotstxt.html)上看到，从 2019 年 9 月起，它们将不再支持那些（0,001% 使用）命令。因此，您应该只在页面上使用元标记，以确保将来安全。

你真正应该做的是：

*   通过 robots.txt 禁止和
*   Noindex 已通过 Google Search Console 为文档编制索引

# cocoa-touch - 获取从 xib 加载的 UIImage 文件名

> ID：12688637
> 
> 赞同：1
> 
> 时间：2012-10-02T10:28:28.283
> 
> 标签：cocoa-touch, ios6

我想知道是否有可能以某种方式从 xib 文件中拦截图像的加载过程。鉴于 iPhone 5 的纵横比，重定向从 xib 文件加载图像会很有用，使其加载另一个图像（名称为 568h）。我正在考虑使用类别。我已经有了 [UIImage imageNamed:] 的类别，但它不适用于 xib 文件。由 UIImageView 继承的 UIView 的 initWithCoder 将是一个不错的起点，但此时我没有 imageName，因为它是从 xib 文件中读取的。关于如何实现这一点的任何想法？谢谢！

# iphone - 在 Objective-C 中选择一个随机枚举

> ID：12688639
> 
> 赞同：3
> 
> 时间：2012-10-02T10:28:35.393
> 
> 标签：iphone, ios, enums, typedef

我为我的 iPhone 应用程序创建了一个 typedef 枚举...

```
typedef enum {
    FirstType,
    SecondType,
    ThirdType
} type; 
```

只是为了测试，我希望能够从这些中选择一种随机类型。

我打算用`arc4random() % 4`它来做它，只是用 int 代替它，但想检查是否有更好的方法来做这件事。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T10:32:36.207

```
typedef enum {
    FirstType = 0,
    SecondType,
    ThirdType,
    EnumTypeMax
} EnumType;

EnumType randomType = (EnumType) (arc4random() % (int) EnumTypeMax); 
```

请注意，`EnumTypeMax`等于`3`，不`4`，这是正确的。 `EnumTypeMax`被认为是无效值。

另外，请[在此处](https://stackoverflow.com/a/24695787/669586)查看我关于 X-Macros 解决方案的回答。

# php - 与搜索表单相关的自定义搜索查询

> ID：12688642
> 
> 赞同：1
> 
> 时间：2012-10-02T10:28:43.347
> 
> 标签：php, mysql, wordpress

我有一些自定义字段作为新帖子类型的元数据 - 属性（用于房地产经纪人），因此希望按卧室数量、最小值/最大值和位置进行搜索。我有一个表单，其中每个字段都有多个下拉列表：

位置、最小值、最大值、卧室

此外，我在帖子本身上有元框，所以一个用于价格、卧室、位置和 property_type 的分类类型 - 租金、销售和商业。

我在网上找到了这段代码，但不知道如何操作它，所以它需要表单所取的任何值？

```
$args = array(
    'post_type' => 'product',
    'meta_query' => array(
        array(
            'key' => 'location',
            'value' => '[LOCATION HERE]',
            'compare' => 'NOT LIKE'
        ),
        array(
            'key' => 'price',
            'value' => '[PRICE HERE FROM FORM]',
            'type' => 'numeric',
            'compare' => 'BETWEEN'
        )
    )
 );
$query = new WP_Query( $args ); 
```

另外，我知道搜索查询是在 function.php 上进行的，但我是从表单所在的位置调用它，还是从输出结果的位置调用它？IE。我的主页还是我的搜索页面？

希望有人可以帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:44:20.410

使用此代码

```
$args = array(
'post_type' => 'Properties',
'meta_query' => array(
    array(
        'key' => 'location',
        'value' => '[LOCATION HERE]',
        'compare' => 'LIKE'
    ),
    array(
        'key' => 'min_value',
        'value' => '[min value here]',
        'type' => 'numeric',
        'compare' => 'BETWEEN'
    )
    array(
        'key' => 'max_value',
        'value' => '[max value here]',
        'type' => 'numeric',
        'compare' => 'BETWEEN'
    )
    array(
        'key' => 'bedrooms',
        'value' => '[bedroom here]',
        'compare' => 'LIKE'
    ),
  )
 );
 $query = new WP_Query( $args ); 
```

你必须在你的`searchpage`......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:13:20.733

感谢Yogesh的帮助，我修改了您的答案以使其似乎有效：

```
 <?php $args = array(
                    'post_type' => 'Property',
                    'property_type'=>$_GET['type'],
                    'meta_query' => array(
                        'relation' => 'AND',
                        array(
                            'key' => '_property_info_location',
                            'value' => Cuztom::uglify($_GET['location']),
                        ),
                        array(
                            'key' => '_property_info_bedrooms',
                            'value' => $_GET['bedrooms'],
                        ),
                        array(
                            'key' => '_property_info_price',
                            'value' => $_GET['max_value'],
                            'compare' => '<=',
                            'type' => 'numeric',
                        ),
                        array(
                            'key' => '_property_info_price',
                            'value' => $_GET['min_value'],
                            'compare' => '>=',
                            'type' => 'numeric',
                        ),
                    ),
                );
                $the_query = new WP_Query( $args );
                ?> 
```

# .net - 是否可以理解 WPF 窗口或页面控件加载何时完成？

> ID：12688644
> 
> 赞同：0
> 
> 时间：2012-10-02T10:28:44.710
> 
> 标签：.net, wpf, xaml, xbap

我正在开发 WPF 浏览器应用程序。我想知道如何理解页面加载完成并且组件显示为开始加载繁重的后台服务。否则我只会看到一个白页几秒钟，直到所有服务都加载完毕......有什么建议可以解决这个问题吗？

这是我尝试过的事情：

```
 public Page1()
    {
        InitializeComponent();
    }

    private void Page_Loaded_1(object sender, RoutedEventArgs e)
    {

        // Just some heavy process in the begining
        int j = 1;
        for (int i = 0; i < 10000000; i++)
        {
            for (int k = 0; k < 1000; k++)
                j=j * 2;
        }
        MessageBox.Show("ready");
    } 
```

但是，在 page_loaded 中的进程完成之前，页面组件不会加载到页面中。没有page_loaded这个繁重的过程，每样东西都加载得很快，所以UI没有任何问题。

更新：我从页面或窗口的加载事件中了解到的是，当页面或窗口加载时它会被触发，并且页面上的组件和控件的加载，即使它的样式也会在之后发生......并且我似乎没有找到任何显示控件加载完成的事件......

UPDATE2：解决我的问题的更好方法是使用 BackgroundWorker 或 Dispatcher 在后台运行繁重的进程。如本文[所述](https://stackoverflow.com/questions/12690699/how-to-display-a-wpf-page-or-window-without-waiting-for-heavy-processes-to-finis)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:33:01.900

该类`Window`提供[Loaded](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.loaded.aspx)事件：

> 当元素布局、渲染并准备好交互时发生。

连接一个处理程序并在那里执行您的代码：

```
<Window ... Loaded="Window_Loaded"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:57:23.997

为此，您需要在应用程序中实现线程。如果您在页面加载方法中编写任何代码。在加载方法完全执行之前，您的页面不会呈现。因此您可以使用[后台工作人员](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)并在后台运行进程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:01:41.277

根据我对您问题的评论和 Tudor 的回答，您需要`Loaded`在`Page`.

```
<Page ... Loaded="Page_Loaded_1"/> 
```

现在，从您的不同评论看来，您的 Kinect 初始化是作为`Page`UI 渲染的一部分完成的。或者正在处理其他一些耗时的任务。

我完全不知道 Kinect 是如何工作的，但我怀疑在您的代码中，它的初始化是从您在`Page`Visual Studio 设计器中添加的控件之一调用的。

例如这样的：

```
<ContentControl DataContext="{Binding MyKinnectStuff}"/> 
```

它可能更微妙。例如，在 getter 调用初始化 Kinect 事物的方法的属性上使用数据绑定。仔细检查情况并非如此。

从您在编辑中添加的代码示例中，确保与 Kinect 相关的所有内容（初始化、数据绑定等）都位于方法中`Page_Loaded_1`，并且没有直接在 UI 中完成任何操作。还要确保您没有在 UI 中执行任何其他耗时的任务。最后，再次确保在您的 XAML 中您拥有`<Page Loaded="Page_Loaded_1"/>`而不是`<Page Loaded="Something_Else"/>`.

您应该再次编辑您的问题并向我们展示您的 XAML 的外观。

# java - 如何知道是否有其他窗口使用相同的 JSESSIONID？

> ID：12688646
> 
> 赞同：4
> 
> 时间：2012-10-02T10:29:00.560
> 
> 标签：java, jquery, jsp, cookies, jsessionid

我知道这几乎是同一个问题：[Joe 问](https://stackoverflow.com/questions/4502677/is-there-a-way-to-check-if-jsessionid-has-been-started-in-another-browser-window)

我有一个网络应用程序。当我关闭窗口（在浏览器上单击 X）时，它将调用注销功能。

问题是当我打开 Web 应用程序并在不同窗口（新窗口或另一个选项卡）上打开相同的 Web 应用程序时。并关闭其中一个窗口，即使该应用程序仍有一个打开的窗口，它也会调用注销功能。

我想要做的是，首先检查是否有其他窗口使用与我即将关闭的当前窗口相同的 jsessionid。当我关闭该窗口时，如果没有使用相同 jsessionid 的窗口，它只会调用注销功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:05:13.320

当然，标准方法是让登录 cookie 在浏览器关闭时过期，从而将您注销，但我猜这在您的情况下是不可接受的行为？

AFAIK 您无法访问另一个浏览器窗口的内容，除非该窗口是使用 Javascript 创建的。由于听起来您在 Javascript 中使用 onUnload 处理程序，因此您可以使用这些相同的处理程序来跟踪您的窗口。但它会导致一些开销，并且不会完全证明（例如，不会处理浏览器崩溃或用户导航离开您的应用程序）。

伪代码：（*这需要混合使用服务器端代码和客户端 JavaScript，因为负载处理程序是在 Javascript 中处理的并且会话是服务器端的）*

```
function OnLoad() {
  if (document.referrer != "{identify your app here}")
    Session("BrowserWindowsOpen")++;
}

function OnUnLoad() {
  if ({your code for if window is closed})
  {
    Session("BrowserWindowsOpen")--;

    if (Session("BrowserWindowsOpen") == 0 )
      performLogOut();
  }
} 
```

# c# - 如何通过回发维护树视图用户交互？

> ID：12688653
> 
> 赞同：2
> 
> 时间：2012-10-02T10:29:17.590
> 
> 标签：c#, asp.net, telerik, postback, radtreeview

我`RadTreeView`在我的母版页中使用：

但我面临以下问题：

当我单击树视图的节点时，我失去了我的选择。每次我单击它所做的节点时，都会让主人 每次都`(Response.Redirect("..."))`进入并再次绑定树视图，所以我失去了我的选择。`(!Page.IsPostback)`

如何解决这个问题。

**我的 .aspx ：**

```
 <telerik:RadTreeView ID="rtv_cm" runat="server" OnNodeExpand="rtv_cm_NodeExpand"
                OnNodeClick="rtv_cm_NodeClick" Skin="WebBlue">
 </telerik:RadTreeView> 
```

* * *

**我的 .cs ：**

```
 protected void Page_Load(object sender, EventArgs e)
        {
            if (Session["emp_num"] != null && !string.IsNullOrEmpty(Session["emp_num"].ToString()))
            {

                if (!Page.IsPostBack)
                {

                    LoadRootNodes(rtv_cm, TreeNodeExpandMode.ServerSide);
                }
            }
            else
            {
                Response.Redirect("Frm_login.aspx");
            }
        } 
```

* * *

```
protected void rtv_cm_NodeClick(object sender, RadTreeNodeEventArgs e)
        {
            dt_childs = (DataTable)Session["dt_childs"];
            IEnumerable<DataRow> result = from myRow in dt_childs.AsEnumerable()
                                          where myRow.Field<string>("task_id").TrimEnd() == e.Node.Value.TrimEnd()
                                          select myRow;
            if (result != null)
            {
                if (!string.IsNullOrEmpty(result.ElementAtOrDefault(0).Field<string>("page_name")))
                {
                    Response.Redirect(result.ElementAtOrDefault(0).Field<string>("page_name").TrimEnd(), false);
                }
            }
        } 
```

* * *

**我如何获得菜单：**

```
 private void LoadRootNodes(RadTreeView treeView, TreeNodeExpandMode expandMode)
        {
            dt = Menu_db.GetMenu(Session["emp_num"].ToString(), CMSession.Current.db_code);
            IEnumerable<DataRow> result = from myRow in dt.AsEnumerable()
                                          where myRow.Field<string>("task_id").TrimEnd() == "0"
                                          select myRow;
            if (result != null && result.Count()>0)
            {
                DataTable dt_roots = result.CopyToDataTable<DataRow>();
                Session["dt"] = dt;
                Session["dt_roots"] = dt_roots;

                foreach (DataRow row in dt_roots.Rows)
                {
                    RadTreeNode node = new RadTreeNode();

                    node.Text = row["task_name"].ToString().TrimEnd();
                    node.Value = row["task_id"].ToString().TrimEnd();
                    if (Convert.ToInt32(row["count"]) > 0)
                    {
                        node.ExpandMode = expandMode;
                    }
                    treeView.Nodes.Add(node);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T19:49:42.597

HTTP 是所谓的“[无状态协议](http://en.wikipedia.org/wiki/Stateless_protocol)”。基本上，就好像服务器患有严重的阿尔茨海默病（无意不尊重）。服务器回答了您的查询，但随后忘记了您曾经在那里。

当 HTTP 主要用于获取静态文档时，这没有问题，但 Web 应用程序需要某种状态。有很多方法可以实现这一点，但 ASP.NET 通常会大量使用“ViewState”。视图状态只是一个`<input type="hidden">`包含 base-64 格式字节码的标签。（如果您在浏览器中查看呈现的 HTML 页面的源代码，您会看到它 - 名为“__VIEWSTATE”）。当用户重新提交表单（通过单击按钮等）时，视图状态数据将被发送回服务器。基本上，这就像提醒服务器上次告诉您的内容。这就是 TextBoxes 和 GridViews 似乎能够在回发之间维持它们的状态的方式——它们将它们的状态存储在“viewstate”中。

然而，视图状态的问题在于它很容易丢失。您必须提交表单，否则视图状态将不会被持久化。如果您使用锚标记或`Request.Redirect`，则您将绕过表单并自行访问网页，并且在此过程中，您不会传递任何视图状态。

通常无法避免这种情况，因此还有其他方法可以存储应用程序的状态。但是，与视图状态不同的是，您必须为要保留的每个值手动执行此操作。您可以将数据存储在 cookie 中，可以将数据存储在服务器上（使用`Server["key"]`or `Session["key"]`），或者您可以将数据保存在更具体的东西中，例如数据库或文本文件。但是，所有这些都必须手动完成，然后您必须在重新加载页面时重新加载数据。

在您的情况下，您可能想根据当前页面猜测选择了哪个项目（因为树视图项目和页面似乎是链接的）并明确设置所选项目。如果这不可行，您可以尝试将所选项目存储在 中`Session`，使用类似`Session["Master_SelectedTreeViewItem"] = treeViewItem.Id;`. 然后，在 中`Page_Load`，获取这个值（注意，可能是`null`），然后将对应的树视图项设置为选中。

我会发布更多代码示例，但您没有提供加载树视图等的代码，因此很难做到。

**更多信息**

[ASP.NET 状态管理概述 (MSDN)](http://msdn.microsoft.com/en-us/library/75x4ha6s.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T17:00:44.797

如果您将树与链接到其他页面的 url 绑定，请使用查询字符串附加选择，然后从其他页面的查询字符串加载树选择。

如果您认为要重定向到的第二个页面与第一个页面具有相同的 UI，请不要重定向，而是将其加载到与选择的新内容相同的页面上，这将允许您在控制时保持 asp.net 中的状态支持视图状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T10:44:02.583

我能想到的唯一方法是将选择存储在会话和（！Page.IsPostBack）上，查找该会话密钥并在绑定后更新您的选择。

您面临的问题是因为本质上，通过您的重定向，您转到了不同的 html 页面，因此 ViewState 不在窗口中，更不用说它是同一个地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T13:06:36.553

我已经遇到了这个问题，完全相同的问题，需要在 TreeViewItemClick 上重定向。

我解决了它存储最后一个选定的项目是会话，并在页面加载时再次选择它。

有人这样想

```
protected void rtv_cm_NodeClick(object sender, RadTreeNodeEventArgs e)
{
    Session["LastClickedNode"] = e.Node.Value;
    ...
} 
```

并在您的 Load 方法中，验证需要选择节点，如下所示。

```
 private void LoadRootNodes(RadTreeView treeView, TreeNodeExpandMode expandMode)
 {
     //... your code
     if (Session["LastClickedNode"] !=null)
     {
          if (row["task_id"].ToString().TrimEnd() == Session["LastClickedNode"].ToString())
          {
               node.Selected = true;
          } 
     }
 } 
```

我认为这将解决您的问题。

# c - 虚拟内存系统、页表和TLB

> ID：12688659
> 
> 赞同：4
> 
> 时间：2012-10-02T10:29:53.923
> 
> 标签：c, caching, memory-management, virtual-memory, tlb

我正在努力解决这个问题，甚至无法进行一步，问题是这样的：

考虑以下 C 程序：

```
int X[N];
int i;
int step = M; // M is some predefined constant
for (i = 0; i < N; i += step) X[i] = X[i] + 1; 
```

如果该程序运行在具有 4 KB 页大小和 64 项 TLB 的机器上，那么 M 和 N 的什么值会导致每次执行内循环时 TLB 未命中？

谁能给我一些提示，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T11:09:27.080

很简单。首先，您必须了解 TLB 究竟是做什么的？提示是它是一个缓存，有助于转换`virtual address`为`physical address`. 所以你知道页面大小是 4 KB。因此，如果有一个数组，可以说无限长。您在 for 循环中从 0 到无穷大访问它。数组 X[0] 的第一次访问将导致 TLB 未命中并加载第一个 TLB。那么对于接下来的 4095 次访问，它不会丢失，因为它存在于 TLB 中（请记住，这是因为页面大小为 4096 = 4KB）。那么下一个地址是 X[4096]，这将导致 TLB 未命中。因此，您会看到，对于每 4096 个地址增量，您将有一个 TLB 未命中。所以我们确信`M = 4096/sizeof(int)`。

现在您还知道您有 64 项 TLB 缓存。因此，在加载了 64 个 TLB 条目后，您将拥有一个完整的 TLB。要加载第 65 个条目，您必须删除第一个条目。（请注意，可以有不同的替换机制。我们在这里假设它是一些简单的机制）。因此，在加载第 65 个条目后，访问 X[0] 时的第一个条目已被删除。因此，如果您现在尝试访问 X[0]，将会有一个 TLB 未命中替换 X[4096] 所需的条目，依此类推。所以你需要 , 的大小`64 * 4096 = 256 KBytes`来充分利用 TLB 缓存。但是，您希望每一步都有一个 TLB 缓存未命中。因此，对于 64 条目 TLB 缓存，您需要相当于 65 个条目的数组大小。因此`N = 65 * 4096 / sizeof(int)`。

希望这能给一些提示！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T11:12:36.220

当页面的虚拟地址不在 TLB 中时，就会发生 TLB 未命中。

给定一个有 64 个条目的 TLB，如果你用虚拟地址 0*4096、1*4096、2*4096、...、63*4096 完全预填充它（你通过访问相关页面中的内存来填充它）然后请求访问从 64*4096 到 64*4096+4095 的虚拟地址，该访问将导致 TLB 未命中（因为 64*4096 尚未在 TLB 中）。

然后，如果现在存储地址 64*4096 的条目（在 TLB 未命中之后，驱逐 64 个条目之一并将其替换为虚拟地址 64*4096 和与其对应的物理地址）之前有虚拟地址 0*4096，然后访问虚拟地址从 0 到 4095 的内存将导致另一个 TLB 未命中（因为虚拟地址 0*4096 的条目已从 TLB 中逐出并替换为 VA 64*4096 的条目）。

基于 TLB 的这种行为，您应该想出`M`并且`N`满足要求。

# html - 对齐 html 表格中的按钮。IE 问题（楼梯问题）

> ID：12688660
> 
> 赞同：2
> 
> 时间：2012-10-02T10:30:01.280
> 
> 标签：html, button, input, html-table

我有一个包含大量信息的 html 表。在此之上，我有 3 个输入按钮，它们最初位于不同的表中。其中 2 个按钮在左侧，前面有一行文字，第三个按钮在右侧。

它看起来像这样：

---------------- 表示空格

```
asdas [button] [button]---------------------[button]

+----------------------------------------------++--------------------------------+
+----------------------------------------------++--------------------------------+
+----------------------------------------------++--------------------------------+
+----------------------------------------------++--------------------------------+
+----------------------------------------------++--------------------------------+
+----------------------------------------------++--------------------------------+
+----------------------------------------------++--------------------------------+
+----------------------------------------------++--------------------------------+ 
```

我想做的是将第三个按钮与左侧模块的右侧对齐。按钮下方的表格是一个简单的表格，分为两个`<td>`。

我所做的是将另一行放在桌子上并将按钮放在第一个 td 中。然后我使用了 style="float: right;" 在第三个按钮上移动它。这在 Firefox 中有效，但在 IE 中，该按钮略低于其他按钮（尽管它仍然对齐）。我不能去更改 CSS 文件，所以有没有人有任何其他解决方案可以将按钮与下表的左侧右对齐并保持在同一行？所有按钮都在同一个单元格中。

这是我目前用于表格的 html：

```
<table id="" summary="">
  <tr>
    <td class="">
      Text: <input type="button" class="" value="" onclick="" />
      &nbsp;
      <input type="button" class="" value="" onclick="" />
      &nbsp;
      <input type="button" class="" style="float:right;" value="" onclick="" />
    </td>
    <td class="">
      &nbsp;
    </td>
  </tr>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>
      &nbsp;
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:11:16.727

如果您希望将按钮放在同一个表格中，您可以选择放置一个'text-align：right;' 在放置第三个按钮的表格单元格上。这应该将您的按钮放在与其他按钮相同的水平线上的单元格右侧。

# sql-server - 分隔名字姓氏

> ID：12688664
> 
> 赞同：0
> 
> 时间：2012-10-02T10:30:17.410
> 
> 标签：sql-server

如果原始字段看起来像 paul@yates 那么这个语法正确地挑选出姓氏

```
 substring(surname,CHARINDEX('@',surname+'@')+1,LEN(name3)) 
```

但是，如果该字段是 paul@b@yates，则姓氏看起来像 @b@yates。我希望删除中间的字母，以便只选择姓氏。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:41:05.533

你可以;

```
;with T(name) as (
    select 'paul@yates' union
    select 'paul@b@yates'
)
select 
    right(name, charindex('@', reverse(name) + '@') - 1) 
from T

>>

yates
yates 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:36:00.543

您可以反转数组，将其拆分直到找到第一个“@”，然后取出该部分并再次反转它。

如果这是java，应该有一个array.reverse函数，否则你可能需要自己写。

你也可以把字符串切成碎片，直到没有 mor "@" 符号，然后取最后一部分（子字符串应该返回 "-1" 或其他东西），但我更喜欢我的第一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:43:53.220

这是一个给你的例子

```
declare @t table (name varchar(max));
insert @t select
'john' union all select
'john@t@bill' union all select
'joe@public';

select firstname=left(name,-1+charindex('@',name+'@')),
       surname=case when name like '%@%' then
         stuff(name,1,len(name)+1-charindex('@',reverse(name)+'@'),'')
         end
from @t;

-- results

FIRSTNAME   SURNAME
john    (null)
john    bill
joe public 
```

# mysql - 左外连接和求和问题

> ID：12688665
> 
> 赞同：1
> 
> 时间：2012-10-02T10:30:18.207
> 
> 标签：mysql, sum, left-join

我需要一个查询。我正在尝试将一个字段与连接表相加。一些记录不在第二个表中。所以这个记录总和应该为零。但是查询只对第二个表中的记录求和。

```
select s.*,sum(sd.fiyat) as konak from fuar_sozlesme1 s 
left outer join fuar_sozlesme1_detay sd on (sd.sozlesme_id = s.id) 
```

- - - 编辑 - - - -

我添加`group by`到查询中并解决了我的问题。这是新的；

```
select s.*,sum(sd.fiyat) as konak from fuar_sozlesme1 s 
left outer join fuar_sozlesme1_detay sd on (sd.sozlesme_id = s.id)
group by sd.sozlesme_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:45:31.737

我认为您需要使用[`IFNULL(sd.fiyat,0)`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)而不是为来自第二个表`sd.fiyat`的值获取零，因为这样：`NULL``LEFT JOIN`

```
SELECT s.*, SUM(IFNULL(sd.fiyat, 0)) as konak
FROM fuar_sozlesme1 s 
LEFT OUTER JOIN fuar_sozlesme1_detay sd ON sd.sozlesme_id = s.id
GROUP BY s.someFields 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:51:01.363

这是一个简单的例子，你可能会有所帮助：[http ://sqlfiddle.com/#!2/41481/1](http://sqlfiddle.com/#!2/41481/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-10T01:59:10.553

这是一个旧线程，但我花了几个小时试图解决同样的问题。

我的查询有两个连接，一个过滤器和一个 SUM 函数。我不是 SQL 专家，但这帮助我实现了即使连接表没有要求和的行仍然显示结果的预期结果。

对我来说，即使总和为零也能显示结果的关键是 GROUP BY。我仍然不是 100% 确定为什么。

根据这篇文章选择了两种类型的连接 - [MySQL Multiple Joins in one query?](https://stackoverflow.com/questions/8974328/mysql-multiple-joins-in-one-query)

```
SELECT registrations.reg_active, registrations.team_id, registrations.area_id, registrations.option_id, registrations.reg_fund_goal, registrations.reg_type, registrations.reg_fee_paid, registrations.reg_has_avatar, users.user_name, users.user_email, users.user_phone, users.user_zip, users.user_age, users.user_gender, users.user_active, SUM(IFNULL(donations.donation_amount,0)) as amt from registrations
    INNER JOIN `users` 
        ON registrations.user_id = users.user_id
        AND registrations.event_id = :event_id
    LEFT OUTER JOIN `donations` 
        ON registrations.reg_id = donations.reg_id
    GROUP BY donations.reg_id
    ORDER BY users.user_name ASC 
```

# mysql - 如何从 Mysql 选择 ID 查询中获取位集 BLOB？

> ID：12688666
> 
> 赞同：1
> 
> 时间：2012-10-02T10:30:19.803
> 
> 标签：mysql, blob, bitset

如果以下事情是可能的，那就太好了：

假设我有一个 'document' mysql 表，其中包含一个文档 'id' 和其他一些列：

```
CREATE TABLE document(id INT AUTO_INCREMENT NOT NULL, ....); 
```

可能有很多文件，但假设现在我只有 200 万份。

我想在我的编程语言空间中快速得到这个查询的结果：

```
SELECT id FROM document WHERE ... whatever ...; 
```

子句 'whatever' 可能为空，因此该集合可以包含所有文档的 id。

所以我的问题是：有没有办法将此查询的结果作为大小为 200 万位（约 250k 数据）的位向量 BLOB 而不是可能的 200 万个字符串化数字（约 14Mo .. 不太好）。

在稀疏集的情况下对 blob 压缩的额外赞誉:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:35:03.890

虽然性能会很糟糕，但此存储过程将为您提供您要求的结果：

```
CREATE PROCEDURE ex12688666(whatever TEXT)
DETERMINISTIC
READS SQL DATA
SQL SECURITY INVOKER
COMMENT ''
proc: BEGIN
    DECLARE not_found   BOOL DEFAULT FALSE;
    DECLARE max         BIGINT UNSIGNED DEFAULT 0;
    DECLARE len         BIGINT UNSIGNED;
    DECLARE i           BIGINT UNSIGNED;
    DECLARE pos         BIGINT UNSIGNED;
    DECLARE result      LONGBLOB DEFAULT '';

    DECLARE cur1 CURSOR FOR 
        SELECT id FROM ids WHERE id RLIKE whatever ORDER BY id;

    DECLARE CONTINUE HANDLER FOR NOT FOUND SET not_found = TRUE;

    SELECT MAX(id) INTO max FROM ids;

    IF (max > 0) THEN
        SET len = FLOOR((max + 7) / 8);
        SET result = REPEAT("\0", len);

        OPEN cur1;

        loop1: LOOP
            FETCH cur1 INTO i;
            IF not_found THEN
                LEAVE loop1;
            END IF;

            SET pos = FLOOR(i / 8) + 1;
            SET result = CONCAT(
                SUBSTRING(result, 1, pos - 1), 
                CHAR(ASCII(SUBSTRING(result, pos, 1)) | (1 << (i MOD 8))), 
                SUBSTRING(result, pos + 1)
            );
        END LOOP;

        CLOSE cur1;
    END IF;

    SELECT HEX(result) AS result;
END; 
```

我们返回`HEX(result)`是为了说明目的。在实践中，可以替换

```
SELECT HEX(result) AS result; 
```

简单地

```
SELECT result; 
```

或者如果你想对结果进行 zlib 压缩：

```
SELECT COMPRESS(result) AS result; 
```

这应该得到你提到的额外荣誉。

有关交互式演示，请参见[http://sqlfiddle.com/#!2/6f5c0/1 。](http://sqlfiddle.com/#!2/6f5c0/1)

# html - 从xhtml doctypes中的某个数字开始列表的方法

> ID：12688671
> 
> 赞同：0
> 
> 时间：2012-10-02T10:30:30.873
> 
> 标签：html, xhtml, doctype

现在根据这篇文章：[从某个数字开始列表](https://stackoverflow.com/questions/2496158/start-a-list-from-a-certain-number)这已被弃用，但它已在 HTML5 中被买回。

我没有使用 HTML5，我使用的是过渡 XHTML 文档类型。

所以我想知道我可以使用什么？

如果我继续使用..

```
<ol start=5> 
```

它还会起作用吗？我知道我可以测试它，但也想确保所有浏览器仍会按我的意图显示它？

**编辑：**我需要 100% 可靠的东西，而不是支持有限的 CSS 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:33:32.860

XHTML 过渡 DTD[允许](http://www.w3.org/TR/xhtml1/dtds.html#a_dtd_XHTML-1.0-Transitional) `<ol>`（有序列表）带有一个`start`属性。也许您使用了错误的元素？（`<ul>`而不是`<ol>`）。

如果浏览器遵循 XHTML1.0 过渡规则，它应该正确呈现列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:41:45.100

'start' 属性适用于 XHTML 过渡，但对无序列表没有影响（ul，原因很明显）。只需使用：

```
<ol start="5">
  <li>My first list item</li>
  <li>My second list item</li>
  <li>etc.</li>
</ol> 
```

有些人可能会争辩说，您应该将编号从标记中分离出来，因为它是存在的，而是使用 CSS 计数器。有趣的是，它在 HTML5 中如何再次有效，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:36:40.993

看起来你在那里使用无序列表。尝试这个：

```
<ol start="5">
    <li>This is number 5</li>
    <li>This is number 6</li>
    <li>This is number 7</li>
    <li>This is number 8</li>
</ol> 
```

例子。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T10:33:12.713

见：http: [//norman.walsh.name/2011/08/12/styleThis](http://norman.walsh.name/2011/08/12/styleThis)

# java - 确定绝对id

> ID：12688674
> 
> 赞同：0
> 
> 时间：2012-10-02T10:30:40.310
> 
> 标签：java, jsf, jsf-2

如何确定 organizationUnit（来自`/webapp/resources/acme/organizationUnit.xhtml`）的绝对 ID？当我从树中选择一个节点时，organizationUnit 应该显示所选节点。我不能使用相对 id，因为 p:ajax 元素与 organizationUnit 组件不在同一个命名容器中。在这种情况下，我需要使用绝对 ID。使用 Firebug，组件的 id 是`tabs:0:editorsGroup:4:editor3:accountWindowsContainer:organizationUnit`. 不是`:form:tabs:editorsGroup:editor:accountWindowsContainer:organizationUnit`组件的绝对id吗？

### 编辑1

custom:include 配置如下：

```
<?xml version="1.0"?>
<!DOCTYPE facelet-taglib PUBLIC
"-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
"http://java.sun.com/dtd/facelet-taglib_1_0.dtd">
<facelet-taglib>
    <namespace>http://acme.com/custom</namespace>
    <tag>
        <tag-name>include</tag-name>
        <component>
            <component-type>com.acme.custom.DynamicInclude</component-type>
            <handler-class>com.acme.client.custom.tags.DynamicIncludeHandler</handler-class>          
        </component>        
    </tag>   
</facelet-taglib>  

@FacesComponent("com.geneous.custom.DynamicInclude")
public class DynamicInclude extends javax.faces.component.UIComponentBase{ ... }

public final class DynamicIncludeHandler extends javax.faces.view.facelets.ComponentHandler { ... } 
```

使用 Mojarra 2.0.8。

### /WEB-INF/flows/actions-acc-flow/accounts.xhtml

```
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    template="/WEB-INF/layouts/standard.xhtml">

    <ui:define name="content">
        <h:form id="form" prependId="false">
            <!-- messages -->
        <p:growl id="msgs" showDetail="true" />
                 ...
            <h:panelGroup id="mainPanel">
                <ui:include src="/WEB-INF/flows/actions-acc-flow/genericAccountsTable.xhtml" />
            </h:panelGroup>
        </h:form>
    </ui:define>
</ui:composition> 
```

### /WEB-INF/flows/actions-acc-flow/genericAccountsTable.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

    <h:outputScript library="primefaces" name="primefaces.js" />
    <h:outputStylesheet library="primefaces" name="primefaces.css" />

    <p:dataTable id="genericAccounts"
    ...
    </p:dataTable>
    <p:spacer height="1" />
    <p:toolbar>
        <p:commandButton value="#{label.add}"
            action="#{accountsBean.initializeEntity}" immediate="true"
            update=":form:actionsDialog :form:msgs"
            oncomplete="actionsDialog.show()">                  
        </p:commandButton>              
    </p:toolbar>
    <ui:include src="/WEB-INF/flows/actions-acc-flow/mainDialog.xhtml" />
    ...
</ui:composition> 
```

### /WEB-INF/flows/actions-acc-flow/mainDialog.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

    <p:dialog id="actionsDialog" widgetVar="actionsDialog"
        dynamic="true" modal="true">
    ...
        <ui:include src="/WEB-INF/flows/actions-acc-flow/genericAccount.xhtml"/>
        ...
    </p:dialog>
</ui:composition> 
```

### /WEB-INF/flows/actions-acc-flow/genericAccount.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:custom="http://geneous.com/custom">
    <p:tabView id="tabs" value="#{accountsBean.groups}" var="group">
        <p:tab title="#{eval.getString(group.name)}">
            <p:dataTable id="editorsGroup" value="#{group.editors}" var="editor">
                <p:column>
                    <custom:include src="#{editor.component}" id="editor">
                        <ui:param name="beanName" value="#{editor.beanName}" />
                        <ui:param name="enabled" value="#{editor.enabled}" />
                        <ui:param name="mandatory" value="#{editor.mandatory}" />
                        <ui:param name="name" value="#{editor.name}" />
                    </custom:include>
                </p:column>
            </p:dataTable>
        </p:tab>
    </p:tabView>
</ui:composition> 
```

### /WEB-INF/flows/editors/accountsWindowsContainer.xhtml（此文件存储在`editor.component`genericAccount.xhtml中并包含在其中）

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:acme="http://java.sun.com/jsf/composite/acme">

    <acme:organizationUnit bean="#{windowsContainer}" mandatory="#{mandatory}"
        name="#{name}" id="accountWindowsContainer" />  
</ui:composition> 
```

### /webapp/resources/acme/organizationUnit.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
    <!-- INTERFACE -->
    <composite:interface>
        <composite:attribute name="bean" type="java.lang.Object" required="true" />
        <composite:attribute name="mandatory" type="boolean" required="true"/>
        <composite:attribute name="name" type="java.lang.String" required="true" />
    </composite:interface>
    <!-- IMPLEMENTATION -->
    <composite:implementation>
        <h:panelGrid columns="2">
            <h:outputText value="#{cc.attrs.name}: #{cc.attrs.mandatory ? '*' : ''}" />
            <p:tree value="#{cc.attrs.bean['root']}" var="node" 
                selectionMode="single" selection="#{cc.attrs.bean['selectedNode']}">
                <p:ajax event="select" listener="#{cc.attrs.bean['onNodeSelect']}"
                    update="absolute_id_of_organization_unit" />
                <p:treeNode>
                    <h:outputText value="#{node}" />
                </p:treeNode>
            </p:tree>
            <h:outputText />
            <p:inputText id="organizationUnit"
                value="#{cc.attrs.bean['selectedItemPath']}"
                disabled="true" />
        </h:panelGrid>
    </composite:implementation>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:17:56.603

> *不是`:form:tabs:editorsGroup:editor:accountWindowsContainer:organizationUnit`组件的绝对id吗？*

仅当您从 中**删除** 并且可以确保您的工具. 如果后者不正确，那么您需要从绝对 ID 中删除该部分。`prependId="false"``<h:form>``<custom:include>``NamingContainer``:editor`

# f# - F# 中的参数化判别联合

> ID：12688679
> 
> 赞同：1
> 
> 时间：2012-10-02T10:31:05.537
> 
> 标签：f#, discriminated-union

> **可能重复：**
> [带函数应用的类型化抽象语法树](https://stackoverflow.com/questions/12552759/typed-abstract-syntax-tree-with-function-application)

我想要以下

```
type t<'a>=
  | Val of 'a
  | Apply of (('a -> 'b) -> t<'a> -> t<'b>) * t<'a>
  | Apply2 of (('a -> 'b -> 'c) -> t<'a> -> t<'b> -> t<'c>)* t<'a> * t<'b> 
```

也就是说，`Apply`接受一个函数和 at，并将 f 应用于 的“内容” `t`。

但是它要求有`t<'a, 'b, 'c>`，这意味着我必须为所有使用三个参数`t<_>`。有没有办法绕过它？

非常感谢您的见解

# arrays - Matlab从数组中删除不需要的数字

> ID：12688683
> 
> 赞同：2
> 
> 时间：2012-10-02T10:31:20.257
> 
> 标签：arrays, matlab

我从 net 获得了一个 matlab 脚本，它从初始值生成偶数。这是代码。

```
n = [1 2 3 4 5 6];
iseven = [];
for i = 1: length(n);
if rem(n(i),2) == 0
iseven(i) = i;
else iseven(i) = 0;
end
end
iseven 
```

结果是这样的

```
iseven =

     0     2     0     4     0     6 
```

结果我得到偶数和零，有什么办法可以删除零并得到这样的结果

```
iseven =

         2    4     6 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T10:41:46.623

您可以在没有循环的情况下获得这样的向量：

```
n(rem(n, 2)==0)
ans =

 2     4     6 
```

但是，如果您已经有一个带有零和非 zeroz 的向量，您可以使用以下方法轻松删除零条目[`find`](http://www.mathworks.se/help/matlab/ref/find.html)：

```
iseven = iseven(find(iseven)); 
```

`find`可能是最常用的matlab函数之一。它返回向量和矩阵中非零条目的索引：

```
% indices of non-zeros in the vector
idx = find(iseven); 
```

如果您使用两个输出参数，则可以使用它来获取矩阵的行/列索引：

```
% row/column indices of non-zero matrix entries
[i,j] = find(eye(10)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T12:21:29.557

要仅显示非零结果，您可以使用[`nonzeros`](http://www.mathworks.de/de/help/matlab/ref/nonzeros.html)

```
iseven = [0     2     0     4     0     6]

nonzeros(iseven)

ans =

     2     4     6 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T10:50:42.883

您下载的代码似乎是计算范围的冗长方法

```
2:2:length(n) 
```

如果您只想返回名为的向量中的偶数值，请`iseven`尝试以下表达式：

```
iseven(rem(iseven,2)==0) 
```

最后，如果你真的想`0`从数组中删除 s，试试这个：

```
iseven = iseven(iseven~=0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T19:07:13.470

每当您找到所需内容时，添加到向量的末尾。

```
n = [1 2 3 4 5 6]; 
iseven = []; % has length 0
for i = 1: length(n);
  if rem(n(i),2) == 0
    iseven = [iseven i]; % append to the vector 
  end
end
iseven 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-03T13:56:10.567

要从程序中删除所有零，我们可以使用以下命令，命令是 -

```
iseven(iseven==0)=[] 
```

# c# - 将具有反射 / Cast 属性的泛型属性映射到泛型类型

> ID：12688684
> 
> 赞同：2
> 
> 时间：2012-10-02T10:31:26.957
> 
> 标签：c#, generics, mapping

我正在使用反射从 DTO（xSearchQuery）映射（设置属性）到一个类（xSearchObject）。我试图减少代码，以便更容易看到我想要实现的目标。我不能改变`SearchField`，但我可以改变`DTOSearchField`。

*   源类有*n*个类型的属性`DTOSearchField<T>`。
*   目标类有*n*个类型的属性`SearchField<T>`。
*   Source 和 Destination 具有相同数量的同名属性。

**源类属性类型**

```
public class DTOSearchField<T> : IDTOSearchField
{
  public T EqualTo;
} 
```

**目的地类属性类型：**

```
public class SearchField<T> : ISearchField
{
  public void WhereEquals(T value)
  {
    _clauses.Add(_name + " = " + Converter.ConvertValueToSql(value));
  }

  // etc
} 
```

**映射：（**基于[Lightweight Object to Object Mapper](http://www.codeproject.com/Articles/29118/Lightweight-Object-to-Object-Mapper)）我可以很高兴地进行映射，而不是`DTOSearchField<T>`我拥有的泛型，例如，`StringDTOSearchField`等`IntDTOSearchField`类并转换为那些。所以对于每个源属性：

```
if (sourceVal.GetType().IsAssignableFrom(typeof(StringDTOSearchField)))
{
  var destinationProperty = destinationPropertyAccessor.GetPropertyValue(destination, propertyMatch.DestinationProperty.Name) as SearchField<string>;

  var sourceStringField = sourceVal as StringSearchField;
  if (sourceStringField != null)
  {
    if (!string.IsNullOrEmpty(sourceStringField.EqualTo)) destinationProperty.WhereEquals(sourceStringField.EqualTo);
  }
}
else if (sourceVal.GetType().IsAssignableFrom(typeof(IntDTOSearchField)))
{
  // Etc
} 
```

或者我可以保留通用`DTOSearchField<T>`并基于以下内容执行大量 If-Then-elses：

```
Type t = sourceVal.GetType().GetGenericArguments()[0]; 
```

转换为适当的类型，

但我觉得我应该能够做类似的事情：

```
Type t = sourceVal.GetType().GetGenericArguments()[0];
var destinationProperty = destinationPropertyAccessor.GetPropertyValue(destination, propertyMatch.DestinationProperty.Name) as SearchField<t>;
destinationProperty.WhereEquals(sourceVal.EqualTo.Value); 
```

因为`sourceVal`is a`DTOSearchField<T>`和`destinationProperty`is a `SearchField<T>`，并且它们都具有 T 类型的属性，所以感觉如果您在运行时之前不知道 T 是什么，这并不重要。

我知道演员表不会起作用，因为 T 直到运行时才知道。除了针对每种可能类型的 If-Then-Else 之外，还有什么方法可以实现我想要的吗？如果我必须这样做，它似乎会破坏使用泛型的优势。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:09:54.197

您可以通过反射调用 WhereEquals 方法，但我建议您利用泛型来发挥您的优势，如下所示（因为您可以更改 DTOSearchField）：

```
public interface IDTOSearchField
{
    void MapToSearchField(ISearchField searchField);
}

public class DTOSearchField<T> : IDTOSearchField
{
    public T EqualTo;

    public void MapToSearchField(ISearchField searchField)
    {
        if (!(searchField is SearchField<T>))
        {
            throw new ArgumentException("SearchField must be of type " + typeof(T).FullName + ".", "searchField");
        }

        ((SearchField<T>)searchField).WhereEquals(EqualTo);
    }
} 
```

然后您可以在界面上使用这个新方法进行映射，如下所示：

```
 public void MapField(IDTOSearchField source, ISearchField destination)
    {
        source.MapToSearchField(destination);
    } 
```

如果您不想让 DTOSearchField 类了解 SearchField 类，则有一些方法可以解决这个问题，但对于这个答案来说，讨论太多了。

# textbox - 如何根据特定的格式字符串设置文本框的宽度？

> ID：12688685
> 
> 赞同：0
> 
> 时间：2012-10-02T10:31:31.467
> 
> 标签：textbox, width, string-formatting, crop, format-string

我有一个`TextBox`使用特定格式字符串来显示其内容的。框的宽度设置为恰好占用显示文本所需的空间量。为此，我使用格式化文本的宽度：

```
box.width = new FormattedText(
              String.Format(Format, value),
              CultureInfo.CurrentCulture,
              FlowDirection.LeftToRight,
              new Typeface("Arial"),
              8,
              Brushes.Black).Width; 
```

这样做时，文本框几乎具有正确的宽度。但我仍然需要添加一个偏移量 `12`，否则文本的区域会被一些像素裁剪：

![在此处输入图像描述](../Images/60bff2ac93412f1ddd260241ad6b04b1.png)

我`12`通过试错得到了号码。于是出现了两个问题：

1.  为什么我需要这个偏移量，丢失的宽度是否转到（空白和边框？）？
2.  有没有比仅仅猜测更好的方法来获得正确的偏移量？

# objective-c - iPad Xib 不显示

> ID：12688686
> 
> 赞同：0
> 
> 时间：2012-10-02T10:31:35.357
> 
> 标签：objective-c, ios, xcode, xib

我的 iPhone 应用程序的根控制器是内置代码的，我现在正在使应用程序通用并想要链接 iPad Xib。问题是 iPhone 屏幕仍然加载而不是 ipad xib

我的家庭控制器名为`IChomeContoller`.h 和 m

至今：

1.  添加了 iPad xib`IChomeContoller~ipad.xib`

2.  将其设置为我`IChomeContoller`在 IB的班级

3.  连接`new referencing outlet`到 IB 中的文件所有者

[我也在本](https://stackoverflow.com/questions/9753967/universal-app-for-ipad-not-loading-ipad-xib-files)示例的 appdeleage 形式的代码中尝试了它，但仍然没有发生

我所有的其他屏幕都是用xibs构建的，发现ipad xib没问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:33:56.463

在 Xcode 中单击您的项目并选择您的目标（应该是底部的）。在那里，如果它是一个通用应用程序，您应该会看到一个用于 iPhone 和 iPad 的主屏幕 Xib 的下拉框。为 iPad 选择一个不同的，应该可以解决问题。

*编辑*

好吧，试试这个：

在您的主视图控制器中，由您的 appdelegate 在 init 方法中初始化的那个：

```
- (id)init {

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        self = [super initWithNibName:@"<Your iPad xib file here>" bundle:nil];
    }
    else {
        self = [super initWithNibName:@"<Your iPhone xib file here>" bundle:nil];
    }

    if (self) {

        // Everything else you got in your init function
    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:26:03.777

已排序

```
 - (id)init
{

[[NSBundle mainBundle] loadNibNamed:@"ICHomeController" owner:self options:nil]; 
```

在根视图控制器中添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:35:59.470

您确定`IChomeContoller~ipad.xib`已添加到您的目标吗？在 Xcode 中，在 Project Navigator（左侧）中选择文件，确认它已在 File Inspector（右侧）的 Target Membership 部分中选中。

# android - json创建和解析的问题

> ID：12688689
> 
> 赞同：0
> 
> 时间：2012-10-02T10:31:37.427
> 
> 标签：android, json

嗨，我正面临着某种代码问题。以下是我生成 json 数据的代码

```
for(int i=0; i < allEds.size(); i++){
                String edsText = allEds.get(i).getText().toString();                                           
               //spinner = allSpns.get(i);
               String spinSelected=allSpns.get(i).getSelectedItem().toString();                  
               try
                {
                   JSONObject json = new JSONObject();          
                   json.put("FieldName", edsText);
                   json.put("FieldType",spinSelected);
                   parent.accumulate("data", json);

                }
                catch (JSONException e)
                {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }                   

            } 
```

如果我对 json 进行了多个条目，它工作正常并且得到

```
correct out put
{"data":[{"FieldType":"Character","FieldName":"fffg"},{"FieldType":"Character","FieldName":"fg"]} 
```

当只有一个作为 json 的条目时，它会给出以下内容

```
{"data":{"FieldType":"Character","FieldName":"ffg","Id":0}} 
```

在解析第二个 json 时出现错误。我的代码有什么问题吗？

我用于解析 json 的代码

```
JSONObject jsonObj = new JSONObject(folderStructure);
        JSONArray data = jsonObj.getJSONArray("data");
         //ArrayList<HashMap<String, String>> folderList = new ArrayList<HashMap<String, String>>();
        for(int i=0; i<data.length(); i++)
        {

            //HashMap<String, String> map = new HashMap<String, String>();
             JSONObject obj=data.getJSONObject(i);
             String id = obj.getString("Id"); 
                String valueName = obj.getString("FieldName"); 
                String valueType = obj.getString("FieldType"); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:18:09.173

```
JSONObject parent = new JSONObject();
JSONArray jdata = new JSONArray();

    try{
         for(int i=0; i < allEds.size(); i++){
             JSONObject childObj = new JSONObject();         
             childObj .put("FieldName", allEds.get(i).getText().toString());
             childObj .put("FieldType",allSpns.get(i).getSelectedItem().toString());

             jdata .put(childObj).toString();
            }
          parent.put("data",jdata);
       }
       catch (JSONException e){
         // TODO Auto-generated catch block
         e.printStackTrace();
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:41:50.900

只有一个条目，您的代码不会创建 JSONArray。但是，您的解析代码总是需要这个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:46:12.953

在您解析 json 代码中，

> 你得到数据作为**json 数组**。这就是为什么第一个是 Ok[data is json array] 而第二个 [data is json object] 是不OK的。

为了避免这种情况，您应该使用与第二个相同的格式来生成 json 数据

```
{"data":[{"FieldType":"Character","FieldName":"ffg","Id":0}]} 
```

# c++ - opencv findchessboardcorners 断言失败

> ID：12688693
> 
> 赞同：1
> 
> 时间：2012-10-02T10:31:43.463
> 
> 标签：c++, opencv, assert, camera-calibration

我正在尝试在 Windows 7 + MinGW 环境中使用 OpenCV 2.4.2 检测用于相机校准的棋盘图案。

调用 findChessboard() 函数时出现断言失败。只有当棋盘出现在摄像机的视野中时，才会发生断言。

> OpenCV 错误：setSize 中的断言失败 (s >= 0)，文件 C:\opencv\modules\core\src\matrix.cpp，第 115 行

我也尝试了 sample\cpp\calibration.exe 并在那里得到相同的结果。示例源代码可以在这里找到：

[http://code.opencv.org/projects/opencv/repository/revisions/c5aba337e995eef92704201be2e37773a63b3709/entry/samples/cpp/calibration.cpp](http://code.opencv.org/projects/opencv/repository/revisions/c5aba337e995eef92704201be2e37773a63b3709/entry/samples/cpp/calibration.cpp)

查看第 468-469 行：

```
found = findChessboardCorners( view, boardSize, pointbuf,
          CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_FAST_CHECK | CV_CALIB_CB_NORMALIZE_IMAGE); 
```

我自己的代码如下所示：

```
cv::Size patternsize(5, 4), windowSize(11,11), zZone(0,0);
vector<Point2f> corners;

// Find corners
if (findChessboardCorners(gray, patternsize, corners,
                          CALIB_CB_ADAPTIVE_THRESH
                          + CALIB_CB_NORMALIZE_IMAGE
                          + CALIB_CB_FAST_CHECK)) {

    cout << "pattern detected!";

    cornerSubPix(gray, corners, windowSize, zZone,
      TermCriteria(CV_TERMCRIT_EPS + CV_TERMCRIT_ITER, 30, 0.1));

    // cv::drawChessboardCorners(gray, patternsize, Mat(corners), true);
} 
```

如上所述，控制永远不会到达 cout 语句。findChessboardCorners 没有找到任何东西（返回 false）或断言（当检测到棋盘图案时）。

# c - 定义内部枚举

> ID：12688702
> 
> 赞同：7
> 
> 时间：2012-10-02T10:32:06.227
> 
> 标签：c, linux, enums

在linux内核源代码中，我看到在枚举内部，还有一个与枚举元素同名的定义。`linux/rtnetlink.h`我们有示例：

```
enum {
        RTM_BASE        = 16,
#define RTM_BASE        RTM_BASE

        RTM_NEWLINK     = 16,
#define RTM_NEWLINK     RTM_NEWLINK
        RTM_DELLINK,
#define RTM_DELLINK     RTM_DELLINK
... 
```

这是什么原因？我无法弄清楚这是如何使用的。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T10:38:31.560

我能想到的一件事是，您可以通过宏检查枚举*是否存在：*

```
#ifdef RTM_BASE
int flag = RTMBASE;
#else
int flag = 0;
#endif 
```

不过，不知道这是否是怎么回事。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T13:40:50.500

这些s实现的另一件事`#define`，除了允许旧代码在枚举常量名称被更改时继续旧名称，并检查它们是否被定义之外，是防止其他代码定义这些符号。

```
#include <linux/rtnetlink.h>
// for some reason, the author thinks
#define RTM_BASE 17.3f
// is a good idea 
```

不会编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T11:45:35.453

另一个猜测：这个宏可以允许在不破坏其他代码的情况下重命名枚举的条目。改变

```
enum {
        RTM_BASE        = 16,
#define RTM_BASE        RTM_BASE 
```

到

```
enum {
        RTM_BASE_NEW_NEW_NEW        = 16,
#define RTM_BASE        RTM_BASE_NEW_NEW_NEW 
```

用户仍然可以使用`RTM_BASE`.

# javascript - jQuery Ajax 之后的功能？

> ID：12688706
> 
> 赞同：0
> 
> 时间：2012-10-02T10:32:28.437
> 
> 标签：javascript, ajax, jquery

我目前正在尝试让我的 Ajax 将一些信息从 HTML 表单发布到 PHP 表单中。

好吧，现在我已经制作了不同的代码，应该在“ajax.comment.php”页面上打印出来，告诉你发生了什么。

就像它是否成功一样。

我现在想制作我的 ajax，检查打印的 html 是什么。然后处理它.. 就像 if (Printed HTML == "1") {Then do something}。

我怎样才能做到这一点？

我的以下 javascript 是：

```
var name = document.comment.name.value;
var email = document.comment.email.value;
var website = document.comment.website.value;
var message = document.comment.message.value;
var id = document.comment.id.value;
$.ajax({
      type: "POST",
      url: "ajax.addcomment.php",
      data: "name="+name+"&email="+email+"&website="+website+"&message="+message+"&id="+id,
      beforeSend: function() {
        // Action before sending data
      },
      success: function(returned_html) {
        // Action after sending data, where the returned_html var is the returned html text by the php
      }
  }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T10:34:58.373

在你的`success`函数中，试试这个：

```
success: function(returned_html) {
    var the_result = $.trim(returned_html);
    if(the_result == '1')
    {
        // Do whatever you wanted here.
    }
    else
    {
        // Do something else here...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:37:42.990

你快完成了。`success`只需在您已经实现的回调中执行您想要的操作。

顺便说一句，我已经序列化了你的表单，这样你就不需要单独取值（除非你想对它们做点什么）。

```
$.ajax({
      type: "POST",
      url: "ajax.addcomment.php",
      data: $('#comment').serialize(),
      success: function(returned_html) {
        if(returned_html == 1){ 
           //lets do our thing
        } else {
           //lets do other things
      }
  }); 
```

# c# - 删除项目后如何刷新组合框 C#

> ID：12688713
> 
> 赞同：2
> 
> 时间：2012-10-02T10:32:58.983
> 
> 标签：c#, winforms, combobox

```
dt = GetId1(ClasSType);
string ClassID = dt.Rows[0][0].ToString();
ncd.DeleteNewNoorWood(ClassID);
typeCb.Refresh(); 
```

这`TypeCb`是一个组合框控件我有一个项目列表。当我使用我的`DeleteNewNorthWood()`方法删除该项目时，该项目将从数据库中删除，但是我仍然可以在表单上看到它。

我应该如何刷新它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:58:52.457

```
 typeCb.Items.Clear();
 for (int i = 0; i < DataTable.Rows.Count; i++)
 typeCb.Items.Add(nTable.Rows[i][1].ToString()); 
```

这将起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:34:11.640

在组合框中再次指定数据源

```
typeCb.DataSource = yourDataSource; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:47:57.913

您应该将 typeCb.DataSource 绑定到 ObservableCollection。这样您就不需要手动刷新。

# java - 在android中的字符串数组中搜索字符串

> ID：12688715
> 
> 赞同：0
> 
> 时间：2012-10-02T10:33:02.120
> 
> 标签：java, android, string

我想像在android中的**移动联系人搜索中一样进行智能搜索。**

eg：当用户在搜索框中开始输入时，输入一个字母后，结果应该显示从输入的字母开始的所有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:34:53.833

```
EditText searchTo = (EditText)findViewById(R.id.medittext);
searchTo.addTextChangedListener(new TextWatcher() {

    @Override
    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub

//here you check for your conditions...

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

        doSomething();

    } 

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:34:59.763

您需要查看Android 提供的[AutoCompleteTextView](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:34:48.397

你有两个选择

1.  使用 AutoCompleteTextView

2.  对 EditText 使用 textwatcher

检查[列表视图上的按钮，在 Android 中轻松搜索](http://rakhi577.wordpress.com/2012/06/26/buttons-on-list-view-with-easy-searching-in-android/)

# r - 从 0.5 向上取整

> ID：12688717
> 
> 赞同：77
> 
> 时间：2012-10-02T10:33:04.380
> 
> 标签：r, rounding, r-faq

是的，我知道如果我们正好处于两个数字的中间（即 2.5 变为 2），为什么我们总是四舍五入到最接近的偶数。但是当我想为某些人评估数据时，他们不想要这种行为。得到这个的最简单的方法是什么：

```
x <- seq(0.5,9.5,by=1)
round(x) 
```

为 1,2,3,...,10 而不是 0,2,2,4,4,...,10。

编辑：清除：四舍五入后 1.4999 应为 1。（我认为这很明显）

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-10-02T10:43:13.367

这不是我自己的功能，不幸的是，~~我目前无法找到它的位置（最初在~~[*Statistically Significant*博客](http://andrewlandgraf.com/2012/06/15/rounding-in-r/)上作为匿名评论找到），但它应该有助于满足您的需求。

```
round2 = function(x, n) {
  posneg = sign(x)
  z = abs(x)*10^n
  z = z + 0.5 + sqrt(.Machine$double.eps)
  z = trunc(z)
  z = z/10^n
  z*posneg
} 
```

`x`是您要四舍五入的对象，`n`是您要四舍五入的位数。

***一个例子***

```
x = c(1.85, 1.54, 1.65, 1.85, 1.84)
round(x, 1)
# [1] 1.8 1.5 1.6 1.8 1.8
round2(x, 1)
# [1] 1.9 1.5 1.7 1.9 1.8 
```

（感谢@Gregor 添加`+ sqrt(.Machine$double.eps)`。）

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-10-02T10:55:44.813

如果你想要`round`除了那些 xxx.5 值之外的行为完全一样的东西，试试这个：

```
x <- seq(0, 1, 0.1)
x
# [1] 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0
floor(0.5 + x)
# [1] 0 0 0 0 0 1 1 1 1 1 1 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-10-07T08:52:42.597

正如@CarlWitthoft 在评论中所说，这是IEC 60559 标准，如下所述`?round`：

> 请注意，对于 5 的四舍五入，预计将使用 IEC 60559 标准，“转到偶数位”。因此，round(0.5) 为 0，而 round(-1.5) 为 -2。但是，这取决于操作系统服务和表示错误（因为例如 0.15 没有准确表示，舍入规则适用于表示的数字而不适用于打印的数字，因此 round(0.15, 1) 可以是 0.1 或 0.2 ）。

Greg Snow的[补充说明](https://stat.ethz.ch/pipermail/r-help/2008-June/164927.html)：

> 取整规则背后的逻辑是，我们试图表示一个潜在的连续值，如果 x 来自一个真正的连续分布，那么 x==2.5 的概率为 0，并且 2.5 可能已经从任何值四舍五入一次在 2.45 和 2.54999999999999 之间...，如果我们使用我们在小学时学到的 0.5 规则向上舍入，那么双舍入意味着 2.45 和 2.50 之间的值将四舍五入为 3（首先四舍五入为 2.5）。这将倾向于向上偏差估计。为了消除偏差，我们需要回到四舍五入到 2.5 之前（这通常是不切实际的），或者只是将一半时间四舍五入并向下舍入一半时间（或者更好的是与我们的可能性成比例地四舍五入）将看到低于或高于 2.5 的值四舍五入为 2.5，但对于大多数基础分布而言，这将接近 50/50）。随机方法是让 round 函数随机选择哪种方式进行舍入，但确定性类型对此并不满意，因此选择“舍入到偶数”（舍入到奇数应该大致相同）作为舍入的一致规则上下约 50/50。
> 
> 如果您正在处理 2.5 可能代表一个精确值（例如金钱）的数据，那么您可以通过将所有值乘以 10 或 100 并以整数工作，然后仅在最终打印时转换回来来做得更好。请注意，2.50000001 四舍五入为 3，因此如果您在最终打印之前保持更多位数的准确性，则四舍五入将按预期方向进行，或者您可以在四舍五入之前将 0.000000001（或其他小数字）添加到您的值，但这可以使您的估计向上偏斜。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-09-23T18:02:19.700

这似乎有效：

```
rnd <- function(x) trunc(x+sign(x)*0.5) 
```

Ananda Mahto 的回应似乎做到了这一点，甚至更多——我不确定他回应中的额外代码是什么原因；或者，换句话说，我不知道如何破坏上面定义的 rnd() 函数。

例子：

```
seq(-2, 2, by=0.5)
#  [1] -2.0 -1.5 -1.0 -0.5  0.0  0.5  1.0  1.5  2.0
round(x)
#  [1] -2 -2 -1  0  0  0  1  2  2
rnd(x)
#  [1] -2 -2 -1 -1  0  1  1  2  2 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-12-29T20:22:58.240

根据您对数据抖动的舒适程度，此方法有效：

```
round(x+10*.Machine$double.eps)
# [1]  1  2  3  4  5  6  7  8  9 10 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-06-24T02:16:05.480

这种方法：

```
round2 = function(x, n) {
  posneg = sign(x)
  z = abs(x)*10^n
  z = z + 0.5
  z = trunc(z)
  z = z/10^n
  z*posneg
} 
```

当我们有很多位数的数字时，它似乎不能很好地工作。例如，doing`round2(2436.845, 2)`会给我们 2436.84。该问题似乎与该`trunc(z)`功能有关。

总的来说，我认为这与 R 存储数字的方式有关，因此`trunc`and`float`函数并不总是有效。我能够以不是最优雅的方式绕过它：

```
round2 = function(x, n) {
  posneg = sign(x)
  z = abs(x)*10^n
  z = z + 0.5
  z = trunc(as.numeric(as.character(z)))
  z = z/10^n
  (z)*posneg
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-27T14:26:04.007

这模仿了在 0.5 处从零四舍五入：

```
round_2 <- function(x, digits = 0) {
  x = x + abs(x) * sign(x) * .Machine$double.eps
  round(x, digits = digits)
}

round_2(.5 + -2:4) 
```

```
-2 -1  1  2  3  4  5 
```

# elmah - 是否有我可以挂钩的 Elmah WriteLog 事件

> ID：12688721
> 
> 赞同：2
> 
> 时间：2012-10-02T10:33:11.480
> 
> 标签：elmah

对于某些例外情况，我想将一些信息附加到我的 Elmah MVC 日志中。

是否有我可以挂钩的日志记录或预记录事件以将此信息添加到日志中。

目前我只能找到一个 ErrorLog_Logged 事件，该事件在创建日志后调用。

我想我可以使用此事件来获取日志 ID，然后将包含额外信息的文本文件写入我的服务器，但如果我可以将此信息添加到实际的 Elmah 日志中会更容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:51:01.763

似乎只有默认情况下使用 Elmah 公开的 ErrorLog_Logged 和 ErrorLog_Filtering 事件。为了获得您正在寻求的行为，您可以使用您在问题中描述的选项。此外，您可以创建一个自定义 Elmah 事件日志提供程序来为您处理此问题。这是以前的问题 - [Elmah Customized Provider and Exposed Event](https://stackoverflow.com/questions/5363088/elmah-customized-provider-and-exposed-event)，其中包含一些很好的详细信息和有关如何执行此操作的链接。

# html - 如果有更多文本，如何使图像重复

> ID：12688723
> 
> 赞同：0
> 
> 时间：2012-10-02T10:33:21.003
> 
> 标签：html, image, html-table, htmltext

我有像边框一样围绕文本的图像。所以上一图，左一图，右一图，下图。当文本很短时很好，但是当我插入比左右图像的高度更长的文本时，它不再是边框了。我把它都放在一张桌子上。我的代码：

```
<table cellspacing="0" cellpadding="0" style="width: 640px;">
   <tr>
      <td colspan="3"><img src=srctop.png /></td>
   </tr>
   <tr>
      <td>
         <img src=srcleft.png />
      </td>
      <td valign="top">
         <p>Lorem ipsum</p>
      </td>
      <td>
         <img align="right" src=srcright.png style="height:675px;"/>
      </td>
   </tr>
   <tr>
      <td colspan=3>
         <img src=srccontinuous.png />
      </td>
   </tr>
   <tr>
      <td colspan=3>
         <img src=srcfooter.png />
      </td>
   </tr>
</table> 
```

我知道我必须重复一些小图像，但我应该在哪里插入呢？如何？我有一个高度为 2px 的图像，可以一直放置在左、右和页脚之间，它被称为 srccontinues。

所以现在我正在使用它

```
<table border=1 cellspacing="0" cellpadding="0" style="width: 640px; border: transparent;" align="center">
    <tr>
    <td colspan="3"><img src="header.png" style="display: block"/></td>
    </tr>
    <tr>
    <td colspan="3"><img src="bg-top.png" style="display: block"/></td>
    </tr>
<tr style="height: 670px; border-left: thin solid black;">
    <td><img src="bg-left.png" style="display: block"/></td>
    <td valign="top" rowspan=2 ><p>Lorem ipsa erat. </p>
    <p>Lorem ipsum dol</p>

    </td>
    <td><img align="right" src="bg-right.png" style="display: block"/></td>
</tr>
<tr>
<td background="http://zmb-asistenca.bugs3.com/emailSlike/cont.png"></td>
<td background="http://zmb-asistenca.bugs3.com/emailSlike/cont.png"></td>
</tr>
<tr>
<td colspan=3><img src="bg-footer.png" style="display: block"/></td>
</tr>
</table> 
```

当我在桌子上使用边框 = 1 时效果非常好，但我不想要边框。因此，当我将其设置为 0 时，它会扩展第二行，因此左侧和顶部图像上方有很多空间：S

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:47:01.617

IMG 标记旨在将单个图像放置到您的页面上。如果您希望在某个区域上重复图像，则必须通过 css 将其应用为重复背景。W3Schools 有一篇关于[CSS 背景](http://www.w3schools.com/Css/css_background.asp)的好文章，它解释了这一切。您将看到“背景图像”和“背景重复”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:41:18.777

您应该使用 CSS3`border-image`属性，而不是图像。看看[这个页面](http://www.css3.info/preview/border-image/)

# maven - 除非我包含 jstl-1.2 jar，否则我的 java web 应用程序不会部署，但是当我包含它时，我会收到重复的 tld 警告

> ID：12688724
> 
> 赞同：0
> 
> 时间：2012-10-02T10:33:25.167
> 
> 标签：maven, jar, jstl, tomcat7

重复可能在哪里？

我有普通的 tomcat 7 lib 文件夹，没有添加或删除任何内容。

如果我使用（所以没有部署 jar）：

```
<dependency>
 <groupId>javax.servlet</groupId>
 <artifactId>jstl</artifactId>
 <version>1.2</version>
 <scope>provided</scope>
</dependency> 
```

我明白了

```
javax.servlet.ServletException: java.lang.NoClassDefFoundError: javax/servlet/jsp/jstl/core/ConditionalTagSupport 
```

但是，当我删除提供的范围并部署 jstl jar 时，我会收到以下警告：

```
INFO: TLD skipped. URI: http://java.sun.com/jstl/core_rt is already defined 
```

# wpf - 来自枚举的 MVVM 绑定

> ID：12688730
> 
> 赞同：3
> 
> 时间：2012-10-02T10:33:46.743
> 
> 标签：wpf, mvvm, binding, inotifypropertychanged

我正在处理我的第一个 WPF/MVVM 项目，我很难将我的大脑包裹在一些事情上。这个项目将是一个已经在 VB 中制作的东西的独立应用程序，所以所有的逻辑和业务规则都已经存在。

我遇到的问题是尝试实现绑定。我的应用程序上有几个按钮，它们的所有属性（IsEnabled、Text、image）都依赖于一个枚举。枚举基于状态，存在于模型中。

在 VB 应用程序中，我有一个巨大的 switch 语句来刷新按钮的属性，并且在状态可能改变的每个地方都会调用它。所以对于这个版本，我的 ViewModel 中的每个按钮都有一个 bool 和 string，基于状态，但没有办法在每次状态改变时强制它更新（这是相当频繁的）。

我已经阅读了一些关于 INotifyPropertyChanged 的​​内容，但是需要在我的 ViewModel 中启动更改的属性在我的模型中。我会以错误的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:00:57.653

我会`DataTrigger`在您的按钮样式中使用 a 。每当更新绑定值时，`DataTrigger`都会重新评估并在必要时设置新值

```
<Style x:Key="MyButtonStyle" TargetType="{x:Type Button}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding MyEnumProperty}" 
                     Value="{x:Static local:MyEnum.Value1}">
            <Setter Property="IsEnabled" Value="False" />
            <Setter Property="Content" Value="Value 1" />
        </DataTrigger>
        <DataTrigger Binding="{Binding MyEnumProperty}" 
                     Value="{x:Static local:MyEnum.Value2}">
            <Setter Property="IsEnabled" Value="True" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

你会用你的`Image`风格做同样的事情 -根据 Status 枚举的当前值设置`Image.Source`属性。`DataTrigger`

请记住，您`MyEnumProperty`需要在更改时引发 PropertyChange 通知，以便 UI 知道值已更改并更新依赖该值的任何绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:47:18.087

我试图在 WPF 中弄乱与枚举的绑定，但我不太喜欢它。

您可以通过将属性映射到模型中的相应属性来解决此问题，在 get 方法中，您可以实现对枚举状态的依赖。

例如：

```
<Button  Height="41" HorizontalAlignment="Center" Style="{StaticResource ButtonStyle}"
                    Margin="407,77,289,0" Name="buttonSearch" VerticalAlignment="Top" Width="137" Click="search_click" 
                    IsEnabled="{Binding IsSearchButtonEnabled}" ... 
```

假设你有这个枚举：

```
public enum States
{
    StateOne,
    StateTwo,
    StateThree
} 
```

在视图模型中，您可以这样做：

```
 public bool IsSearchButtonEnabled
    {
        get
        {
            return ((Model.actualState) == States.StateTwo);
        }
    } 
```

要自动更新，您的 ViewModel 必须实现 INotifyPropertyChanged。我使用我的 ViewModels 总是子类化的通用实现来简化事情。它看起来像这样，并且应该在每次调用 InvokePropertyChanged(string propertyName) 时处理更新视图。ViewModel 需要知道它应该更新视图，并且知道何时调用此方法。您可以在模型中使用相同的技术，并在模型中放置一个事件处理程序，通知订阅者虚拟机状态枚举的设置器中的更改。

```
public class ViewModelBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    public static event PropertyChangedEventHandler PropertyChangedStatic;

    public void InvokePropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }

    public static void InvokePropertyChangedStatic(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChangedStatic;
        if (handler != null) handler(null, new PropertyChangedEventArgs(propertyName));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:49:41.937

您需要将每个属性的 、 和 属性绑定`IsEnabled`到`Text`视图`Image`模型`Button`的 Status 属性。然后，您需要提供 3 个实现，`IValueConverter`它们基本上将`Status`枚举值转换为您正在寻找的适当的布尔值、字符串或图像。对于每个`Button`控件，提供一个附加参数，转换器可以使用该参数与视图模型的 Status 属性进行比较。

像这样的东西：

```
<myView.Resources>
    <local:statToBoolConverter x:Key="statToBoolConv" />
    <local:statToTextConverter x:Key="statToTextConv" />
    <local:statToImgConverter x:Key="statToImgConv" />
</myView.Resources>

// ..... further down in code ....

<Button x:Key="aButton" 
    IsEnabled="{Binding Path=Status, Converter={StaticResource statToBoolConv}, 
        ConverterParamter=caseA}"
    Text="{Binding Path=Status, Converter={StaticResource statToTextConv}, 
        ConverterParamter=caseA}"
    Image="{Binding Path=Status, Converter={StaticResource statToImgConv},
        ConverterParamter=caseA}"/>

<Button x:Key="aButton" 
    IsEnabled="{Binding Path=Status, Converter={StaticResource statToBoolConv}, 
        ConverterParamter=caseB}"
    Text="{Binding Path=Status, Converter={StaticResource statToTextConv}, 
        ConverterParamter=caseB}"
    Image="{Binding Path=Status, Converter={StaticResource statToImgConv},
        ConverterParamter=caseB}"/> 
```

我不打算包括实现的细节，`IValueConverter`因为它非常简单，但您可以在此处获得更多信息（完整的示例）：

[http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)

还有一点需要注意：`INotifyPropertyChanged`将触发所有按钮的绑定更新，因此只需一次`NotifyPropertyChanged("MyStatus")`调用即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T13:12:36.247

在 MVVM 中，您真的不应该直接从 ViewModel 引用 View 中的任何内容。

最好的解决方案是使用命令，例如 MVVM-Light RelayCommand，它具有基于 enum 属性值的 CanExecute 操作。然后将按钮的命令属性绑定到 ViewModel 中的相应命令属性。这将自动设置按钮的启用状态。

然后在枚举属性的 set 方法中，为每个命令调用 CanExecuteChanged 事件。

# java - CAVAJ java反编译器查看CodeGuard使用的所有代码

> ID：12688732
> 
> 赞同：0
> 
> 时间：2012-10-02T10:33:51.573
> 
> 标签：java, proguard, decompiling

我正在尝试保护一个 java 程序。我正在使用 CodeGuard，但是当我使用反编译器作为 CAJAV 时，我可以看到我程序的所有代码。我正在使用maven2。

我在 MAVEN 中使用这个 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.templaries</groupId>
  <artifactId>CISExtractor</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>CISExtractor</name>
  <url>http://maven.apache.org</url>
    <build>
        <plugins>   
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>      
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <configuration>
                <archive>
                <manifest>
                    <mainClass>${project.build.mainClass}</mainClass>
                    <addClasspath>true</addClasspath>
                </manifest>
                </archive>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.1</version>
                <executions>
                <execution>
                <goals>
                <goal>java</goal>
                </goals>
                </execution>
                </executions>
                <configuration>
                <mainClass>${project.build.mainClass}</mainClass>
                </configuration>
            </plugin>
            <plugin>
                <groupId>com.pyx4me</groupId>
                <artifactId>proguard-maven-plugin</artifactId>
                <executions>
                   <execution>
                       <phase>package</phase>
                       <goals><goal>proguard</goal></goals>
                   </execution>
                </executions>
                <configuration>    
                    <obfuscate>true</obfuscate>
                    <options>                        
                        <option>-allowaccessmodification</option>                        
                        <option>-keep class ${project.build.mainClass} { *; }</option>
                    </options>          
                    <!--<injar>${project.build.finalName}.jar</injar>-->
                    <outjar>${project.build.finalName}-obfuscated.jar</outjar>                        
                    <libs>
                    <lib>${java.home}/lib/rt.jar</lib>
                    </libs>                      
                </configuration>
            </plugin>
        </plugins>
    </build>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.build.mainClass>com.templaries.corteinglessupermarketextractor.App</project.build.mainClass>
    </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.jsoup</groupId>
      <artifactId>jsoup</artifactId>
      <version>1.6.1</version>
      <type>jar</type>
    </dependency>
      <dependency>
          <groupId>net.sf.opencsv</groupId>
          <artifactId>opencsv</artifactId>
          <version>2.3</version>
      </dependency>
  </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:53:56.637

混淆并不能阻止人们反编译......它只会使推断原始源代码变得更加困难，例如重命名方法、字段等

哪个更容易理解

```
public long f1(List<Long> v1) { long v2=0; for (Long v3: v1) v2+=v3; return v2; } 
```

或者

```
public long calculateTotal(List<Long> values) {
    long runningTotal = 0;
    for (Long value: values) {
        runningTotal += value;
    return runningTotal;
} 
```

你可以通过少量的努力弄清楚第一个是做什么的。除非您处理不太简单的方法，否则缺少行号信息不会过度妨碍理解。

但是更容易推断出它`calculateTotal`确实按照它所说的那样做，同时`f1`需要一些理解。

混淆器真正能做的就是在接口或超类契约中不需要它们的方法名称，剥离调试信息（行号）并剥离局部符号表（局部变量名称）。它还可以剥离未使用的方法并更改包名称等。

你只会轻微地阻碍别人复制你的代码。

接下来的事情是所有这些调整可能意味着你的类的外部合同将被打破。在最基本的形式中，有一个你不能破坏的外部契约：你的代码的入口点。

您正在传递参数：`<option>-keep class ${project.build.mainClass} { *; }</option>`为了告诉混淆器您的项目的入口点是面向外部的入口点。因此，混淆器尊重该请求并保留入口点。

如果你的主类中有很多代码，这意味着混淆器可以减少对代码的隐藏。

解决方案是重构您的代码，以便您的*固定入口点*只是一个 shim。这使混淆器可以自由移动其他所有内容。

这是一个例子

```
public class ShimMain {
    public static void main(String[] args) {
        RealMain.main(args);
    }
} 
```

以上内容非常小，您不必担心它不会被混淆，并且让混淆器可以自由移动其他所有内容。

只是不要认为它会停止......甚至取决于你的编码风格，放慢速度，有人决定反转你的代码。

# c# - 获取要列出的一个属性的值

> ID：12688736
> 
> 赞同：0
> 
> 时间：2012-10-02T10:34:13.320
> 
> 标签：c#, asp.net-mvc

我在 有一个`Group`属性`Profile`，它被添加到`webconfig`

```
<properties>
    //...
    <add name="Group" />
    //...
</properties> 
```

我想从该属性中输入的所有用户获取所有值到列表中。怎么做？

# ios - 将一个视图的字符串值传递给iphone的另一个视图中的标签时返回null？

> ID：12688742
> 
> 赞同：0
> 
> 时间：2012-10-02T10:34:38.177
> 
> 标签：ios, cocoa-touch, nsstring

我必须将字符串值从一个视图传递到另一个视图中的标签。但是当我做这样的事情时，标签值为空。无法理解我哪里出错了？这是我的代码：

在 FirstViewController.m 中

```
SecondViewController *gp=[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:[NSBundle mainBundle]];
gp.d.text = [NSString stringWithFormat:@"%@", nam];
[self.view addSubview:gp.view];
[gp release]; 
```

在 SecondViewController.h

```
@interface SecondViewController : UIViewController<NSXMLParserDelegate>
{
    UILabel *d;
}

@property (nonatomic,retain) IBOutlet UILabel *d; 
```

在 SecondViewController.m @synthesize d;

```
- (void)viewDidLoad
{
     NSString *urlString1 = [NSString stringWithFormat: @"http://192.168.0.108:8732/Design_Time_Addresses/ICloudServices/AppointmentService/json/GetProviders/?cid={%@}", [d text]];
} 
```

但是这里没有传递 d 的值。为什么我不明白。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:40:41.603

在添加子视图之前将值传递给 IBOutlet UILablel 时未分配（没有内存引用）。

所以更好的方法是在添加 subView 之后传递你的值。

```
[self.view addSubview:gp.view];
gp.d.text=[NSString stringWithFormat:@"%@",nam]; 
```

**编辑**：更好的方法是传递字符串是这样的：

```
Create property of NSString in SecondViewController say yourString. 
```

现在

```
SecondViewController *gp=[[SecondViewController alloc]initWithNibName:@"SecondViewController" bundle:[NSBundle mainBundle]];
gp.yourString = [nam retain];
[self.view addSubview:gp.view]; 
```

现在在 SecondViewController 的 viewDidLoad 中执行以下操作：

```
self.d.text = self.yourString; 
```

根据您的要求在任何地方使用 yourString。

# eclipse - 如何在 Eclipse Juno 中分离视图

> ID：12688748
> 
> 赞同：1
> 
> 时间：2012-10-02T10:35:03.030
> 
> 标签：eclipse, eclipse-juno

在 Eclipse Indigo 中，每个选项卡的上下文菜单中都有一个*Detached*选项。Eclipse Juno 中缺少它。是否可以在 Eclipse Juno 中分离选项卡？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:35:03.030

只需拖动视图/选项卡的标题并用鼠标移动它们。

# c# - 特定 WInForm 的缩放错误

> ID：12688752
> 
> 赞同：3
> 
> 时间：2012-10-02T10:35:43.810
> 
> 标签：c#, winforms, layout

总而言之，我已经编写了大量的 WinForms，这个错误很奇怪，因为我以前没有遇到过。此表单是该项目中 30 多个表单之一，并且是唯一一个缩放在不同屏幕分辨率和字体缩放下表现异常的表单。

我知道该`AutoScaleMode`属性，并且大多数时候我将其设置为`Font`精确地防止我在这里遇到的错误。当我在 1920x1080 显示器上启动此表单时，一切正常

![没问题](../Images/500367f22e14cb62b31681db32bed4b3.png)

但是在 1920x1200 显示器上启动表单，组框似乎会调整大小

![错误](../Images/75b73a616906965bedd1fd33c1122ba5.png)

这会迫使屏幕上的按钮并导致普遍的丑陋。如果我将默认操作系统字体从 125% 更改为 100%，我也可以在 1980x1080 显示器上发生这种情况。

顶部分组框被锚定（左、右、顶部），底部分组框被锚定（左、右、顶部、底部）。表格设置为和`AutoScaleMode`。`Font`其他控件*不是* `AutoSized`。

有什么问题，我该如何解决？

谢谢你的时间。

*编辑：设计器文件如下。*

```
namespace IPACost
{
    partial class CreateNationalDbForm
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.splitContainer1 = new System.Windows.Forms.SplitContainer();
            this.customTreeViewSql = new IPACost.CustomTreeView();
            this.panelBottom = new System.Windows.Forms.Panel();
            this.buttonRefresh = new System.Windows.Forms.Button();
            this.groupBoxBottom = new System.Windows.Forms.GroupBox();
            this.pictureBox1 = new System.Windows.Forms.PictureBox();
            this.customRichTextBox1 = new IPACost.CustomRichTextBox();
            this.labelInfo = new System.Windows.Forms.Label();
            this.groupBoxTop = new System.Windows.Forms.GroupBox();
            this.checkBoxInclSNAP = new System.Windows.Forms.CheckBox();
            this.label2 = new System.Windows.Forms.Label();
            this.comboBoxUnits = new System.Windows.Forms.ComboBox();
            this.label1 = new System.Windows.Forms.Label();
            this.textBoxIniSize = new System.Windows.Forms.TextBox();
            this.labelName = new System.Windows.Forms.Label();
            this.textBoxDbName = new System.Windows.Forms.TextBox();
            this.buttonNoFilter = new System.Windows.Forms.Button();
            this.buttonCancel = new System.Windows.Forms.Button();
            this.buttonAppend = new System.Windows.Forms.Button();
            ((System.ComponentModel.ISupportInitialize)(this.splitContainer1)).BeginInit();
            this.splitContainer1.Panel1.SuspendLayout();
            this.splitContainer1.Panel2.SuspendLayout();
            this.splitContainer1.SuspendLayout();
            this.panelBottom.SuspendLayout();
            this.groupBoxBottom.SuspendLayout();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).BeginInit();
            this.groupBoxTop.SuspendLayout();
            this.SuspendLayout();
            // 
            // splitContainer1
            // 
            this.splitContainer1.Dock = System.Windows.Forms.DockStyle.Fill;
            this.splitContainer1.Location = new System.Drawing.Point(0, 0);
            this.splitContainer1.Margin = new System.Windows.Forms.Padding(2);
            this.splitContainer1.Name = "splitContainer1";
            // 
            // splitContainer1.Panel1
            // 
            this.splitContainer1.Panel1.Controls.Add(this.customTreeViewSql);
            this.splitContainer1.Panel1.Controls.Add(this.panelBottom);
            // 
            // splitContainer1.Panel2
            // 
            this.splitContainer1.Panel2.Controls.Add(this.groupBoxBottom);
            this.splitContainer1.Panel2.Controls.Add(this.groupBoxTop);
            this.splitContainer1.Panel2.Controls.Add(this.buttonNoFilter);
            this.splitContainer1.Panel2.Controls.Add(this.buttonCancel);
            this.splitContainer1.Panel2.Controls.Add(this.buttonAppend);
            this.splitContainer1.Size = new System.Drawing.Size(705, 357);
            this.splitContainer1.SplitterDistance = 199;
            this.splitContainer1.SplitterWidth = 6;
            this.splitContainer1.TabIndex = 0;
            // 
            // customTreeViewSql
            // 
            this.customTreeViewSql.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
            this.customTreeViewSql.Dock = System.Windows.Forms.DockStyle.Fill;
            this.customTreeViewSql.DrawMode = System.Windows.Forms.TreeViewDrawMode.OwnerDrawText;
            this.customTreeViewSql.Font = new System.Drawing.Font("Arial", 9F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            this.customTreeViewSql.HotTrackFont = new System.Drawing.Font("Arial", 9F, System.Drawing.FontStyle.Underline, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            this.customTreeViewSql.HotTracking = true;
            this.customTreeViewSql.LineColor = System.Drawing.Color.FromArgb(((int)(((byte)(109)))), ((int)(((byte)(109)))), ((int)(((byte)(109)))));
            this.customTreeViewSql.Location = new System.Drawing.Point(0, 0);
            this.customTreeViewSql.Margin = new System.Windows.Forms.Padding(2);
            this.customTreeViewSql.Name = "customTreeViewSql";
            this.customTreeViewSql.ShowNodeToolTips = true;
            this.customTreeViewSql.Size = new System.Drawing.Size(199, 320);
            this.customTreeViewSql.TabIndex = 7;
            this.customTreeViewSql.NodeMouseClick += new System.Windows.Forms.TreeNodeMouseClickEventHandler(this.customTreeViewSql_NodeMouseClick);
            // 
            // panelBottom
            // 
            this.panelBottom.Controls.Add(this.buttonRefresh);
            this.panelBottom.Dock = System.Windows.Forms.DockStyle.Bottom;
            this.panelBottom.Location = new System.Drawing.Point(0, 320);
            this.panelBottom.Margin = new System.Windows.Forms.Padding(2);
            this.panelBottom.Name = "panelBottom";
            this.panelBottom.Size = new System.Drawing.Size(199, 37);
            this.panelBottom.TabIndex = 7;
            // 
            // buttonRefresh
            // 
            this.buttonRefresh.Anchor = System.Windows.Forms.AnchorStyles.Bottom;
            this.buttonRefresh.ImageAlign = System.Drawing.ContentAlignment.MiddleLeft;
            this.buttonRefresh.Location = new System.Drawing.Point(2, 2);
            this.buttonRefresh.Margin = new System.Windows.Forms.Padding(2);
            this.buttonRefresh.Name = "buttonRefresh";
            this.buttonRefresh.Size = new System.Drawing.Size(195, 33);
            this.buttonRefresh.TabIndex = 8;
            this.buttonRefresh.Text = "Show Database Structure";
            this.buttonRefresh.UseVisualStyleBackColor = true;
            this.buttonRefresh.Click += new System.EventHandler(this.buttonRefresh_Click);
            // 
            // groupBoxBottom
            // 
            this.groupBoxBottom.Anchor = ((System.Windows.Forms.AnchorStyles)((((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Bottom) 
            | System.Windows.Forms.AnchorStyles.Left) 
            | System.Windows.Forms.AnchorStyles.Right)));
            this.groupBoxBottom.Controls.Add(this.pictureBox1);
            this.groupBoxBottom.Controls.Add(this.customRichTextBox1);
            this.groupBoxBottom.Controls.Add(this.labelInfo);
            this.groupBoxBottom.Location = new System.Drawing.Point(4, 120);
            this.groupBoxBottom.Name = "groupBoxBottom";
            this.groupBoxBottom.Size = new System.Drawing.Size(480, 188);
            this.groupBoxBottom.TabIndex = 12;
            this.groupBoxBottom.TabStop = false;
            this.groupBoxBottom.Text = "Additional SQL Filtering [WHERE:]";
            // 
            // pictureBox1
            // 
            this.pictureBox1.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left)));
            this.pictureBox1.Image = global::IPACost.Properties.Resources.Info;
            this.pictureBox1.Location = new System.Drawing.Point(5, 122);
            this.pictureBox1.Margin = new System.Windows.Forms.Padding(2);
            this.pictureBox1.Name = "pictureBox1";
            this.pictureBox1.Size = new System.Drawing.Size(38, 38);
            this.pictureBox1.SizeMode = System.Windows.Forms.PictureBoxSizeMode.StretchImage;
            this.pictureBox1.TabIndex = 2;
            this.pictureBox1.TabStop = false;
            // 
            // customRichTextBox1
            // 
            this.customRichTextBox1.Anchor = ((System.Windows.Forms.AnchorStyles)((((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Bottom) 
            | System.Windows.Forms.AnchorStyles.Left) 
            | System.Windows.Forms.AnchorStyles.Right)));
            this.customRichTextBox1.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
            this.customRichTextBox1.Font = new System.Drawing.Font("Consolas", 9F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            this.customRichTextBox1.Location = new System.Drawing.Point(5, 20);
            this.customRichTextBox1.Margin = new System.Windows.Forms.Padding(2);
            this.customRichTextBox1.Name = "customRichTextBox1";
            this.customRichTextBox1.Size = new System.Drawing.Size(472, 86);
            this.customRichTextBox1.TabIndex = 3;
            this.customRichTextBox1.Text = "e.g. [B1A].[ProdType] IN (\'AC\', \'NB\', \'AE\')";
            // 
            // labelInfo
            // 
            this.labelInfo.Anchor = ((System.Windows.Forms.AnchorStyles)(((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Left) 
            | System.Windows.Forms.AnchorStyles.Right)));
            this.labelInfo.Location = new System.Drawing.Point(47, 108);
            this.labelInfo.Margin = new System.Windows.Forms.Padding(2, 0, 2, 0);
            this.labelInfo.Name = "labelInfo";
            this.labelInfo.Size = new System.Drawing.Size(428, 77);
            this.labelInfo.TabIndex = 1;
            this.labelInfo.Text = "This filters the create database result sets for the National Databases. The filt" +
    "ering SQL should only contain a valid WHERE clause on the core data table [B1A]." +
    " The \'WHERE\' Keyword is not required.\r\n";
            // 
            // groupBoxTop
            // 
            this.groupBoxTop.Anchor = ((System.Windows.Forms.AnchorStyles)(((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Left) 
            | System.Windows.Forms.AnchorStyles.Right)));
            this.groupBoxTop.Controls.Add(this.checkBoxInclSNAP);
            this.groupBoxTop.Controls.Add(this.label2);
            this.groupBoxTop.Controls.Add(this.comboBoxUnits);
            this.groupBoxTop.Controls.Add(this.label1);
            this.groupBoxTop.Controls.Add(this.textBoxIniSize);
            this.groupBoxTop.Controls.Add(this.labelName);
            this.groupBoxTop.Controls.Add(this.textBoxDbName);
            this.groupBoxTop.Location = new System.Drawing.Point(2, 10);
            this.groupBoxTop.Margin = new System.Windows.Forms.Padding(2);
            this.groupBoxTop.Name = "groupBoxTop";
            this.groupBoxTop.Padding = new System.Windows.Forms.Padding(2);
            this.groupBoxTop.Size = new System.Drawing.Size(479, 105);
            this.groupBoxTop.TabIndex = 11;
            this.groupBoxTop.TabStop = false;
            this.groupBoxTop.Text = "National Database Details:";
            // 
            // checkBoxInclSNAP
            // 
            this.checkBoxInclSNAP.AutoSize = true;
            this.checkBoxInclSNAP.Location = new System.Drawing.Point(155, 76);
            this.checkBoxInclSNAP.Margin = new System.Windows.Forms.Padding(2);
            this.checkBoxInclSNAP.Name = "checkBoxInclSNAP";
            this.checkBoxInclSNAP.Size = new System.Drawing.Size(148, 21);
            this.checkBoxInclSNAP.TabIndex = 14;
            this.checkBoxInclSNAP.Text = "Include SNAP data";
            this.checkBoxInclSNAP.UseVisualStyleBackColor = true;
            // 
            // label2
            // 
            this.label2.AutoSize = true;
            this.label2.Location = new System.Drawing.Point(290, 51);
            this.label2.Margin = new System.Windows.Forms.Padding(2, 0, 2, 0);
            this.label2.Name = "label2";
            this.label2.Size = new System.Drawing.Size(160, 17);
            this.label2.TabIndex = 13;
            this.label2.Text = "Default growth rate 20%";
            // 
            // comboBoxUnits
            // 
            this.comboBoxUnits.FormattingEnabled = true;
            this.comboBoxUnits.Items.AddRange(new object[] {
            "B",
            "KB",
            "MB",
            "GB",
            "TB",
            "PB"});
            this.comboBoxUnits.Location = new System.Drawing.Point(232, 48);
            this.comboBoxUnits.Margin = new System.Windows.Forms.Padding(2);
            this.comboBoxUnits.Name = "comboBoxUnits";
            this.comboBoxUnits.Size = new System.Drawing.Size(53, 24);
            this.comboBoxUnits.TabIndex = 12;
            this.comboBoxUnits.Text = "MB";
            // 
            // label1
            // 
            this.label1.AutoSize = true;
            this.label1.Location = new System.Drawing.Point(12, 51);
            this.label1.Margin = new System.Windows.Forms.Padding(2, 0, 2, 0);
            this.label1.Name = "label1";
            this.label1.Size = new System.Drawing.Size(139, 17);
            this.label1.TabIndex = 11;
            this.label1.Text = "Estimated initial size:";
            // 
            // textBoxIniSize
            // 
            this.textBoxIniSize.Location = new System.Drawing.Point(155, 48);
            this.textBoxIniSize.Margin = new System.Windows.Forms.Padding(2);
            this.textBoxIniSize.Name = "textBoxIniSize";
            this.textBoxIniSize.Size = new System.Drawing.Size(74, 22);
            this.textBoxIniSize.TabIndex = 10;
            this.textBoxIniSize.Text = "100";
            this.textBoxIniSize.Leave += new System.EventHandler(this.textBoxIniSize_Leave);
            // 
            // labelName
            // 
            this.labelName.AutoSize = true;
            this.labelName.Location = new System.Drawing.Point(39, 24);
            this.labelName.Margin = new System.Windows.Forms.Padding(2, 0, 2, 0);
            this.labelName.Name = "labelName";
            this.labelName.Size = new System.Drawing.Size(112, 17);
            this.labelName.TabIndex = 9;
            this.labelName.Text = "Database name:";
            // 
            // textBoxDbName
            // 
            this.textBoxDbName.Anchor = ((System.Windows.Forms.AnchorStyles)(((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Left) 
            | System.Windows.Forms.AnchorStyles.Right)));
            this.textBoxDbName.Location = new System.Drawing.Point(155, 21);
            this.textBoxDbName.Margin = new System.Windows.Forms.Padding(2);
            this.textBoxDbName.Name = "textBoxDbName";
            this.textBoxDbName.Size = new System.Drawing.Size(287, 22);
            this.textBoxDbName.TabIndex = 1;
            // 
            // buttonNoFilter
            // 
            this.buttonNoFilter.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Right)));
            this.buttonNoFilter.Location = new System.Drawing.Point(258, 313);
            this.buttonNoFilter.Margin = new System.Windows.Forms.Padding(2);
            this.buttonNoFilter.Name = "buttonNoFilter";
            this.buttonNoFilter.Size = new System.Drawing.Size(104, 33);
            this.buttonNoFilter.TabIndex = 5;
            this.buttonNoFilter.Text = "Run No Filter";
            this.buttonNoFilter.UseVisualStyleBackColor = true;
            this.buttonNoFilter.Click += new System.EventHandler(this.buttonNoFilter_Click);
            // 
            // buttonCancel
            // 
            this.buttonCancel.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Right)));
            this.buttonCancel.Location = new System.Drawing.Point(162, 313);
            this.buttonCancel.Margin = new System.Windows.Forms.Padding(2);
            this.buttonCancel.Name = "buttonCancel";
            this.buttonCancel.Size = new System.Drawing.Size(92, 33);
            this.buttonCancel.TabIndex = 4;
            this.buttonCancel.Text = "Cancel";
            this.buttonCancel.UseVisualStyleBackColor = true;
            this.buttonCancel.Click += new System.EventHandler(this.buttonCancel_Click);
            // 
            // buttonAppend
            // 
            this.buttonAppend.Anchor = ((System.Windows.Forms.AnchorStyles)((System.Windows.Forms.AnchorStyles.Bottom | System.Windows.Forms.AnchorStyles.Right)));
            this.buttonAppend.Location = new System.Drawing.Point(366, 313);
            this.buttonAppend.Margin = new System.Windows.Forms.Padding(2);
            this.buttonAppend.Name = "buttonAppend";
            this.buttonAppend.Size = new System.Drawing.Size(117, 33);
            this.buttonAppend.TabIndex = 6;
            this.buttonAppend.Text = "Run Use Filter";
            this.buttonAppend.UseVisualStyleBackColor = true;
            this.buttonAppend.Click += new System.EventHandler(this.buttonAppend_Click);
            // 
            // CreateNationalDbForm
            // 
            this.AcceptButton = this.buttonNoFilter;
            this.AutoScaleDimensions = new System.Drawing.SizeF(8F, 16F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(705, 357);
            this.Controls.Add(this.splitContainer1);
            this.Margin = new System.Windows.Forms.Padding(2);
            this.MaximizeBox = false;
            this.MinimizeBox = false;
            this.MinimumSize = new System.Drawing.Size(523, 303);
            this.Name = "CreateNationalDbForm";
            this.ShowIcon = false;
            this.StartPosition = System.Windows.Forms.FormStartPosition.CenterParent;
            this.Text = "Special Processes Options";
            this.FormClosing += new System.Windows.Forms.FormClosingEventHandler(this.SpecialSqlForm_FormClosing);
            this.Load += new System.EventHandler(this.SpecialSqlForm_Load);
            this.splitContainer1.Panel1.ResumeLayout(false);
            this.splitContainer1.Panel2.ResumeLayout(false);
            ((System.ComponentModel.ISupportInitialize)(this.splitContainer1)).EndInit();
            this.splitContainer1.ResumeLayout(false);
            this.panelBottom.ResumeLayout(false);
            this.groupBoxBottom.ResumeLayout(false);
            ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).EndInit();
            this.groupBoxTop.ResumeLayout(false);
            this.groupBoxTop.PerformLayout();
            this.ResumeLayout(false);

        }

        #endregion

        private System.Windows.Forms.SplitContainer splitContainer1;
        private CustomTreeView customTreeViewSql;
        private System.Windows.Forms.Panel panelBottom;
        private System.Windows.Forms.Button buttonRefresh;
        private System.Windows.Forms.Label labelInfo;
        private System.Windows.Forms.Button buttonCancel;
        private System.Windows.Forms.Button buttonAppend;
        private CustomRichTextBox customRichTextBox1;
        private System.Windows.Forms.Button buttonNoFilter;
        private System.Windows.Forms.Label labelName;
        private System.Windows.Forms.TextBox textBoxDbName;
        private System.Windows.Forms.GroupBox groupBoxTop;
        private System.Windows.Forms.PictureBox pictureBox1;
        private System.Windows.Forms.Label label1;
        private System.Windows.Forms.TextBox textBoxIniSize;
        private System.Windows.Forms.ComboBox comboBoxUnits;
        private System.Windows.Forms.Label label2;
        private System.Windows.Forms.CheckBox checkBoxInclSNAP;
        private System.Windows.Forms.GroupBox groupBoxBottom;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T10:38:24.373

我无法确定此问题的确切原因。但是，经过大约一百万次表单和控件设置的迭代，我确实提出了一个解决方案。它是在控件内部插入另一个`Panel`停靠的。这似乎现在可以防止任何奇怪的缩放问题可能是从底层继承的。`Fill``Panel2``SplitContainer``SplitContainer`

*这不是为什么*会发生这种情况的答案，但它是一个修复程序，希望它可以帮助其他人。

谢谢你的时间。

# android - 在 StopSelf 之后，android 服务未返回调用活动

> ID：12688758
> 
> 赞同：0
> 
> 时间：2012-10-02T10:36:05.363
> 
> 标签：android, service, location

我有一个调用服务的活动，该服务具有实现 locationListener 的内部类。该服务旨在获取用户的位置。一旦找到位置，它就会在应用程序对象中设置 lon/lat 值，调用活动可以从中检索它们。在 onLocationChanged 中，一旦我有了 lon/lat 值并设置它们，我就会调用 Service.StopSelf。该服务确实会根据日志记录停止，但不会返回到调用活动。此时在调用活动中，我尝试从应用程序对象中获取这些值以进一步处理它们。在调用活动中的 startService 之后没有执行任何代码。任何想法为什么。提前致谢。

[编辑] 在 app 对象中设置值

在调用活动中。

```
startService(new Intent(NfcscannerActivity.this, LocationService.class));

                double latitude = nfcscannerapplication.getLat();
                double longitude = nfcscannerapplication.getLon();

                Log.e(TAG, "got the geopoint from application object...." + latitude + " " + longitude); 
```

服务。

```
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class LocationService extends Service{

    private static final String TAG = LocationService.class.getSimpleName();
    LocationManager mlocManager;
    LocationListener mlocListener;
    NfcScannerApplication nfcscannerapplication;

    @Override
    public void onCreate() {

        nfcscannerapplication = (NfcScannerApplication)getApplication();
        mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);   
        mlocListener = new MyLocationListener();

        Log.e(TAG, "Service created and location manager and listener created");
        super.onCreate();
    }

    @Override
    public void onDestroy() {
         mlocManager.removeUpdates(mlocListener);
         Log.e(TAG, "Service destroyed");
        super.onDestroy();
    }

    @Override
    public void onStart(Intent intent, int startId) {
        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
         Log.e(TAG, "requesting location updates");
        super.onStart(intent, startId);
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    private class MyLocationListener implements LocationListener
    {

        @Override
        public void onLocationChanged(Location loc) {
            Log.e(TAG, "about to set geopoints in application object");
            nfcscannerapplication.setLat( loc.getLatitude());
            nfcscannerapplication.setLon(loc.getLongitude()); 
            String Text = "My current location is: " +"Latitude = " + loc.getLatitude() + "Longitude = " 
            + loc.getLongitude();             
            Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();

            LocationService.this.stopSelf();

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    }//end of MyLocationListener

}// end of service 
```

应用程序对象。

```
public class NfcScannerApplication extends Application{

    private static final String TAG = NfcScannerApplication.class.getSimpleName();
    LoginValidate loginValidate;
    ValidateUser validateUser;
    LoginWebservice loginWebservice;
    DateTime globalDateTime;
    double lon;
    public double getLon() {
        return lon;
    }

    public void setLon(double lon) {
        Log.e(TAG, "inside setLon in app obj");
        this.lon = lon;
    }

    public double getLat() {
        return lat;
    }

    public void setLat(double lat) {
        Log.e(TAG, "inside setLat in app obj");
        this.lat = lat;
    }

    double lat; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:46:49.857

首先创建一个自定义 Intent 对象来保存您的位置数据：

```
/**
 * 
 */
package com.example.test;

import android.content.Intent;

/**
 * @author formation1
 * 
 */
public class LocationChangeIntent extends Intent {
    private final double       lon;
    private final double       lal;

    public static final String ACTION_LOCATION_CHAHGE = "com.example.test.LocationChangeIntent";

    /**
     * @param aLon
     * @param aLal
     */
    public LocationChangeIntent(double aLon, double aLal) {
        super(ACTION_LOCATION_CHAHGE);
        lon = aLon;
        lal = aLal;
    }

    /**
     * @return the lal
     */
    public double getLaltitude() {
        return lal;
    }

    /**
     * @return the lon
     */
    public double getLongitude() {
        return lon;
    }

} 
```

* * *

之后，您必须从服务中添加 sendBroadcast：

```
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.support.v4.content.LocalBroadcastManager;
import android.util.Log;

public class LocationService extends Service {

    private static final String TAG = LocationService.class.getSimpleName();
    LocationManager             mlocManager;
    LocationListener            mlocListener;
    NfcScannerApplication       nfcscannerapplication;

    @Override
    public void onCreate() {

        nfcscannerapplication = (NfcScannerApplication) getApplication();
        mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        mlocListener = new MyLocationListener();

        Log.e(TAG, "Service created and location manager and listener created");
        super.onCreate();
    }

    @Override
    public void onDestroy() {
        mlocManager.removeUpdates(mlocListener);
        Log.e(TAG, "Service destroyed");
        super.onDestroy();
    }

    @Override
    public void onStart(Intent intent, int startId) {
        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
        Log.e(TAG, "requesting location updates");
        super.onStart(intent, startId);
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    private class MyLocationListener implements LocationListener {

        @Override
        public void onLocationChanged(Location loc) {
            Log.e(TAG, "about to set geopoints in application object");
            nfcscannerapplication.setLat(loc.getLatitude());
            nfcscannerapplication.setLon(loc.getLongitude());
            String text = "My current location is: " + "Latitude = " + loc.getLatitude() + "Longitude = "
                + loc.getLongitude();
            Log.d(TAG, text);
            fireLocationChangeEvent(loc.getLongitude(), loc.getLatitude());

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    }// end of MyLocationListener

    private void fireLocationChangeEvent(double lon, double lal) {
        LocalBroadcastManager.getInstance(getApplicationContext()).sendBroadcast(new LocationChangeIntent(lon, lal));
    }
}// end of service 
```

* * *

最后从您的活动中注册一个广播接收器。

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.content.LocalBroadcastManager;
import android.widget.TextView;

public class MainActivity extends FragmentActivity {

    private static final String TAG = MainActivity.class.getSimpleName();

    private BroadcastReceiver   locationChangereceiver;
    private double              lon;
    private double              lal;

    TextView                    text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        text = (TextView) findViewById(R.id.text);

        locationChangereceiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {

                LocationChangeIntent myIntent = (LocationChangeIntent) intent;
                lon = myIntent.getLongitude();
                lal = myIntent.getLaltitude();
                text.setText(String.format("Location Update/Read from Activity\n  long : %s lalt:  %s ", lon, lal));
                // stop the service.
                stopService(new Intent(context, LocationService.class));
            }
        };
        LocalBroadcastManager.getInstance(getApplicationContext()).registerReceiver(locationChangereceiver,
                new IntentFilter(LocationChangeIntent.ACTION_LOCATION_CHAHGE));
        startService(new Intent(this, LocationService.class));

        // Log.e(TAG, "got the geopoint from application object...." + latitude
        // + " " + longitude);

    }

    /**
     * callback method from QuantityDialogFragment, returning the value of user
     * input.
     * 
     * @param selectedValue
     */
    public void onUserSelectValue(String selectedValue) {

        // TODO add your implementation.
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.support.v4.app.FragmentActivity#onDestroy()
     */
    @Override
    protected void onDestroy() {

        super.onDestroy();
        // if no update make sure to stop the servcie.
        stopService(new Intent(this, LocationService.class));
        LocalBroadcastManager.getInstance(getApplicationContext()).unregisterReceiver(locationChangereceiver);
    }

} 
```

# matlab - 带有 mvnpdf 的 quad 涉及 MATLAB 中的向量

> ID：12688759
> 
> 赞同：1
> 
> 时间：2012-10-02T10:36:06.977
> 
> 标签：matlab

我尝试运行以下代码：

```
F=@(x)mvnpdf([6 x],[0 0],[1 0;0 1]);
P=quad(F,12,100); 
```

得到`x2`联合高斯分布从 12 到 100 的概率积分。但是matlab报这个错误：

> X 和 MU 必须具有相同的列数。

这对我来说很奇怪，因为当我运行`F(1)`,`F(2)`或类似的东西时它运行正确。

为什么我用quad积分`mvnpdf`函数会报错？

为什么`quad`给函数 F 的参数不是标量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:11:48.327

这是因为`quad`将值向量传递给`F`，而不是单个值。您需要在您的 中处理它`F`，例如像这样

```
F = @(X)mvnpdf([repmat(6, size(X(:),1), 1) X(:)],[0,0],[1,0;0,1]); 
```

我只是重复了数字 6 的次数，因为 vector 中有行`X`。请注意，它`X`必须是一个列向量，这就是为什么我将它显式转换为这样的原因`X(:)`。现在你可以写

```
F(1:100) 
```

没有错误。

# safari - 以编程方式更改 Safari 浏览器扩展的图标？

> ID：12688760
> 
> 赞同：5
> 
> 时间：2012-10-02T10:36:22.383
> 
> 标签：safari, icons, safari-extension

我有一个禁用模式的 Safari 浏览器扩展。我想做的是在用户进入禁用模式时以编程方式更改工具栏图标。

是否有一个 API 可以让我实现这一点，如果有，它是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T11:09:36.140

您的扩展程序拥有的任何工具栏项都可以作为数组引用

```
safari.extension.toolbarItems 
```

每个工具栏项都有一个可以更改的图像属性。这将导致工具栏图标立即更改。

```
// Change the toolbar icon.
var changeToolbarIcon = function(newIconName) {
  var iconUri = safari.extension.baseURI + 'icons/' + newIconName;
  safari.extension.toolbarItems[0].image = iconUri;
}; 
```

[Safari 文档](https://developer.apple.com/library/safari/#documentation/UserExperience/Reference/ExtensionToolbarItemClassRef/SafariExtensionToolbarItem.html#//apple_ref/doc/uid/TP40009789)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-07T21:54:18.417

使用新的 Safari App Extensions API，只要你有一个引用`SFSafariPage`，并且这个页面没有被固定（固定标签的窗口`nil`是然后为每个工具栏项设置图标。

```
extension SFSafariPage {

    func getContainingWindow(completionHandler: @escaping (SFSafariWindow?) -> Void) {
        self.getContainingTab { $0.getContainingWindow { completionHandler($0) } }
    }

    func getToolbarItem(completionHandler: @escaping (SFSafariToolbarItem?) -> Void) {
        self.getContainingWindow {
            ($0 == nil) ? completionHandler(nil) : $0.unsafelyUnwrapped.getToolbarItem { completionHandler($0) }
        }
    }
}

let tab: SFSafariTab = ...

tab.getToolbarItem { item in
    item?.setImage(NSImage(...))
} 
```

# python - 使用 Eclipse/Python 自定义突出显示？

> ID：12688766
> 
> 赞同：2
> 
> 时间：2012-10-02T10:36:46.003
> 
> 标签：python, eclipse, syntax-highlighting

你能想出一些在 Eclipse/Pydev 中实现自定义源代码高亮的方法吗？我想强调一些通常无法区分的标记。

有没有办法改变 Eclipse 和/或 Pydev 中的突出显示？我的意思不仅仅是改变颜色，而是真正引入新元素。或者我可以将 pygments 合并到 Eclipse 中吗？或者，如果这一切都很难，那么在 pygments 中使用另一个编辑器的最简单方法是什么？我什至可以在 Eclipse 中嵌入另一个编辑器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:27:53.530

不幸的是，这些关键字目前无法自定义。

（它在 org.python.pydev.editor.PyCodeScanner 硬编码）

您可以获取代码并自己修改...

我不知道有任何尝试将 eclipse 编辑器与 pygments 集成，但我想这是可能的。

# xslt - “大于”有效但“小于”无效？

> ID：12688767
> 
> 赞同：14
> 
> 时间：2012-10-02T10:36:54.723
> 
> 标签：xslt, xslt-1.0

这有效：

```
<xsl:when test="(price &gt;= 10)"> 
```

但这没有（测试中的代码没有执行，并且没有呈现以下列 - 对于任何行）：

```
<xsl:when test="(price &lt;= 9)"> 
```

我在这里测试这个 XML 和 XSL： [http ://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog_choose](http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog_choose)

为什么？

完整的 XSL 在这里：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>
<body>
  <h2>My CD Collection</h2>
  <table border="1">
    <tr bgcolor="#9acd32">
      <th>Title</th>
      <th>Artist</th>
      <th>Price</th>
    </tr>
    <xsl:for-each select="catalog/cd">
    <tr>
      <td><xsl:value-of select="title"/></td>
      <xsl:choose>
      <xsl:when test="(price &lt; 9)">
         <td bgcolor="#00aaff">
           <xsl:value-of select="artist"/>
         </td>
      </xsl:when>
      <xsl:otherwise>
         <td><xsl:value-of select="artist"/></td>
      </xsl:otherwise>
      </xsl:choose>
      <td><xsl:value-of select="price"/></td>
      </tr>

    </xsl:for-each>
  </table>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

XML源是这样的：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<catalog>
    <cd>
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>
    <cd>
        <title>Hide your heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>9.90</price>
        <year>1988</year>
    </cd>
    <cd>
        <title>Greatest Hits</title>
        <artist>Dolly Parton</artist>
        <country>USA</country>
        <company>RCA</company>
        <price>9.90</price>
        <year>1982</year>
    </cd>
    <cd>
        <title>Still got the blues</title>
        <artist>Gary Moore</artist>
        <country>UK</country>
        <company>Virgin records</company>
        <price>10.20</price>
        <year>1990</year>
    </cd>
    <cd>
        <title>Eros</title>
        <artist>Eros Ramazzotti</artist>
        <country>EU</country>
        <company>BMG</company>
        <price>9.90</price>
        <year>1997</year>
    </cd>
    <cd>
        <title>One night only</title>
        <artist>Bee Gees</artist>
        <country>UK</country>
        <company>Polydor</company>
        <price>10.90</price>
        <year>1998</year>
    </cd>
    <cd>
        <title>Sylvias Mother</title>
        <artist>Dr.Hook</artist>
        <country>UK</country>
        <company>CBS</company>
        <price>8.10</price>
        <year>1973</year>
    </cd>
    <cd>
        <title>Maggie May</title>
        <artist>Rod Stewart</artist>
        <country>UK</country>
        <company>Pickwick</company>
        <price>8.50</price>
        <year>1990</year>
    </cd>
    <cd>
        <title>Romanza</title>
        <artist>Andrea Bocelli</artist>
        <country>EU</country>
        <company>Polydor</company>
        <price>10.80</price>
        <year>1996</year>
    </cd>
    <cd>
        <title>When a man loves a woman</title>
        <artist>Percy Sledge</artist>
        <country>USA</country>
        <company>Atlantic</company>
        <price>8.70</price>
        <year>1987</year>
    </cd>
    <cd>
        <title>Black angel</title>
        <artist>Savage Rose</artist>
        <country>EU</country>
        <company>Mega</company>
        <price>10.90</price>
        <year>1995</year>
    </cd>
    <cd>
        <title>1999 Grammy Nominees</title>
        <artist>Many</artist>
        <country>USA</country>
        <company>Grammy</company>
        <price>10.20</price>
        <year>1999</year>
    </cd>
    <cd>
        <title>For the good times</title>
        <artist>Kenny Rogers</artist>
        <country>UK</country>
        <company>Mucik Master</company>
        <price>8.70</price>
        <year>1995</year>
    </cd>
    <cd>
        <title>Big Willie style</title>
        <artist>Will Smith</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>9.90</price>
        <year>1997</year>
    </cd>
    <cd>
        <title>Tupelo Honey</title>
        <artist>Van Morrison</artist>
        <country>UK</country>
        <company>Polydor</company>
        <price>8.20</price>
        <year>1971</year>
    </cd>
    <cd>
        <title>Soulsville</title>
        <artist>Jorn Hoel</artist>
        <country>Norway</country>
        <company>WEA</company>
        <price>7.90</price>
        <year>1996</year>
    </cd>
    <cd>
        <title>The very best of</title>
        <artist>Cat Stevens</artist>
        <country>UK</country>
        <company>Island</company>
        <price>8.90</price>
        <year>1990</year>
    </cd>
    <cd>
        <title>Stop</title>
        <artist>Sam Brown</artist>
        <country>UK</country>
        <company>A and M</company>
        <price>8.90</price>
        <year>1988</year>
    </cd>
    <cd>
        <title>Bridge of Spies</title>
        <artist>T`Pau</artist>
        <country>UK</country>
        <company>Siren</company>
        <price>7.90</price>
        <year>1987</year>
    </cd>
    <cd>
        <title>Private Dancer</title>
        <artist>Tina Turner</artist>
        <country>UK</country>
        <company>Capitol</company>
        <price>8.90</price>
        <year>1983</year>
    </cd>
    <cd>
        <title>Midt om natten</title>
        <artist>Kim Larsen</artist>
        <country>EU</country>
        <company>Medley</company>
        <price>7.80</price>
        <year>1983</year>
    </cd>
    <cd>
        <title>Pavarotti Gala Concert</title>
        <artist>Luciano Pavarotti</artist>
        <country>UK</country>
        <company>DECCA</company>
        <price>9.90</price>
        <year>1991</year>
    </cd>
    <cd>
        <title>The dock of the bay</title>
        <artist>Otis Redding</artist>
        <country>USA</country>
        <company>Atlantic</company>
        <price>7.90</price>
        <year>1987</year>
    </cd>
    <cd>
        <title>Picture book</title>
        <artist>Simply Red</artist>
        <country>EU</country>
        <company>Elektra</company>
        <price>7.20</price>
        <year>1985</year>
    </cd>
    <cd>
        <title>Red</title>
        <artist>The Communards</artist>
        <country>UK</country>
        <company>London</company>
        <price>7.80</price>
        <year>1987</year>
    </cd>
    <cd>
        <title>Unchain my heart</title>
        <artist>Joe Cocker</artist>
        <country>USA</country>
        <company>EMI</company>
        <price>8.20</price>
        <year>1987</year>
    </cd>
</catalog> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T11:08:00.823

您可以下载和安装许多 XSLT 处理器，例如用于 XSLT 1.0 的 Saxon 6.5.5 (http://saxon.sourceforge.net/#F6.5.5) 或 Saxon 9.4 (http://saxon.sourceforge.net/ #F9.4HE) 用于 XSLT 2.0 或类似于 AltovaXML (http://www.altova.com/altovaxml.html) 用于 XSLT 1.0 或 2.0。此外，一些操作系统带有 XSLT 1.0 处理器（例如我认为 LINUX 上的 xsltproc，带有 MSXML 的 Windows）。我建议您尝试使用其中之一来运行和测试您的 XSLT 代码。

[http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog_choose](http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog_choose)基本上被破坏了，它不能正常使用小于号`<`，因为它基本上从 HTML 文本区域读出您输入的代码，然后放将其转换为另一个，然后将该内容传递给 XML 解析器，但是忘记正确转义符号两次（因为这是HTML 和 XML 的转义机制`<`所必需的）。`&lt;`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-06T11:33:35.503

我有同样的问题，但不是痛苦地逃避和破坏代码的“漂亮”，而是更容易`<xsl:when test="$value <= 10">`替换`<xsl:when test="not($value > 10)">`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-02T10:40:15.027

您的测试数据集似乎没有任何价格低于，`7.20`因此没有数据可以触发该案例

# c++ - 重载的比较运算符不工作

> ID：12688768
> 
> 赞同：0
> 
> 时间：2012-10-02T10:36:58.223
> 
> 标签：c++, list, operator-overloading

我正在尝试比较我的类 CustomerNode 的两个对象，然后返回与这些方法的字母优势相关的结果。我无法弄清楚为什么这不起作用。对我来说，逻辑似乎很好，我正在按照作业中的说明进行操作。

```
 bool OrderedList::add (CustomerNode* newEntry)
{
if (newEntry != 0)
{
    CustomerNode * current;
    CustomerNode * previous = NULL;
    if(!head)
        head = newEntry;
    current = head;
  // initialize "current" & "previous" pointers for list traversal
   while(current && *newEntry < *current) // location not yet found (use short-circuit evaluation)
   {
    // move on to next location to check
    previous = current;
    current = current->getNext();
   }

  // insert node at found location (2 cases: at head or not at head)
  //if previous did not acquire a value, then the newEntry was
  //superior to the first in the list. 
  if(previous == NULL)
    head = newEntry;
  else
  {
    previous->setNext(newEntry); //Previous now needs to point to the newEntry
    newEntry->setNext(current); //and the newEntry points to the value stored in current.
  }
}
    return newEntry != 0;  // success or failure
    } 
```

好的，这是程序中包含的重载 operator<，在通用对象上测试它会得到预期的结果：

```
 bool CustomerNode::operator< (const CustomerNode& op2) const
    {
       bool result = true;
       //Variable to carry & return result
       //Initialize to true, and then:
       if (strcmp(op2.lastName, lastName))
        result = false;

        return result;
       } 
```

我对编程很陌生，所以我很欣赏任何回应，尤其是风格批评，因为我还在学习。我的逻辑是错误的，还是我需要注意其他规则？我不完全理解为什么我的参数是引用的，或者我是否真的需要取消引用参数来调用运算符。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:39:08.147

你的条件不对：

```
if (strcmp(op2.lastName, lastName)) 
```

对于不同的字符串，无论它们的顺序如何，这将返回 not- `false`(true)，并且您的函数将返回`false`。

正确的条件是：

```
if (strcmp(op2.lastName, lastName) >= 0) 
```

或者你可以重写整个事情：

```
bool CustomerNode::operator< (const CustomerNode& op2) const
{
   return  strcmp(op2.lastName, lastName) < 0;
} 
```

# c# - 在 Rehosted Workflow Designer 中编辑 FlowDecision 的 DisplayName 属性

> ID：12688769
> 
> 赞同：1
> 
> 时间：2012-10-02T10:37:03.523
> 
> 标签：c#, workflow-foundation, .net-4.5

我试图在**Rehosted Workflow Designer**`DisplayName`模式下编辑活动的属性，但没有成功，在属性面板中我都看不到它（*也在 rehosted 模式下*）。`FlowDecision`

 ***在VS2012中它工作得很好，你知道我是否可以修复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-02T13:44:13.977

我知道，无论如何，这就像 4 年前一样。主要问题是显示名称实际上已更新，但 UI 拥有工作流本身的其他结构（ModelItem 类型）。因此，如果您要保护您的工作流程，它应该具有预期值（新的显示名称）。

因此，您更改 Activity 名称，例如在 ModelChanged 事件处理中，如下所示： `args.ModelChangeInfo.Value.Properties[nameof(State.DisplayName)]?.SetValue("New Name")`***

# jquery - jQuery AJAX - 成功函数范围 - 传入“this”

> ID：12688770
> 
> 赞同：1
> 
> 时间：2012-10-02T10:37:05.057
> 
> 标签：jquery, ajax, scope

努力让我了解 AJAX 的成功范围。

我正在尝试从 AJAX 调用加载一些数据，然后使用 jQuery 将其附加到已经存在的`ul`

这个[例子](https://stackoverflow.com/questions/1570146/ajax-jquery-success-scope)帮助了我，但我不知道如何从“this”中引用特定元素。

所以我已经`this`将成功函数作为 传递给了`that`，但是这一行：

```
$('li.loading').before(nextLoad); 
```

失败：

```
Uncaught Error: NOT_FOUND_ERR: DOM Exception 8 
```

我假设，我需要使用`that`跟随我的元素，但无法计算出语法。

```
 var that = this;

                  $.ajax({
                        type: 'GET',
                        url: url,
                        async: true,
                        jsonpCallback: 'callback',
                        contentType: "application/json",
                        dataType: 'jsonp',                      
                        success: function(data) 
                        {                                   

                             $.each(data.products, function(key, val) 
                             {                                
                                items.push('<li class="product"><a href="product.html"><span class="store-badge"></span><img src="'+val.image+'" width="124" height="166" /><h3>'+val.title+'</h3></a></li>');                                  
                             });

                             var nextLoad = items;  

                             if (loadNumber <= 4) {
                                 $('li.loading').before(nextLoad);
                             };
                             if (loadNumber >= 4) {
                                 $('li.loading').hide();
                             };

                             $('.scroll-horizontal').mCustomScrollbar("update");                            

                        },
                        error: function() {
                            console.log('failed');
                        }
                        }); 
```

编辑：

控制台日志记录导致：

```
Window
Infinity: Infinity
$: function (a,b){return new e.fn.init(a,b,h)}
Array: function Array() { [native code] }
ArrayBuffer: function ArrayBuffer() { [native code] }
Attr: function Attr() { [native code] }
Audio: [object Function]
AudioProcessingEvent: function AudioProcessingEvent() { [native code] }
BeforeLoadEvent: function BeforeLoadEvent() { [native code] }
Blob: function Blob() { [native code] }
Boolean: function Boolean() { [native code] }
//CONTIUNES 
```

控制台记录 nextload 也会导致

```
Uncaught Error: NOT_FOUND_ERR: DOM Exception 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:22:41.030

您正在将数据推送到`items`：

```
items.push('<li class="product"><a href= ...... 
```

这表明这`items`实际上是一个数组？

然后你做：

```
var nextLoad = items; 
```

也有效地变成`nextLoad`一个数组。

现在，当您尝试这样做时：

```
$('li.loading').before(nextLoad); 
```

您试图在`li`具有该类的元素之前插入一个数组`.loading`，并且由于 DOM 并不真正支持将数组插入其中，因此您会收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:39:35.927

```
var that = $(this); 
```

试试这个jquery

# silverstripe - SilverStripe CheckboxSetField 默认值

> ID：12688771
> 
> 赞同：0
> 
> 时间：2012-10-02T10:37:21.870
> 
> 标签：silverstripe

嗨，我正在使用 SilverStripe 2.4.7

[文档](http://api.silverstripe.org/2.4/forms/fields-basic/CheckboxSetField.html#methodsetDefaultItems)

我正在使用 DataObjects 的 DataObjectSet 生成大约 250 多个复选框，并希望默认检查所有这些复选框。我尝试将填充 checkboxsetfield 的相同数组传递给 setDefaultItems 方法，如下所示......

```
$checkBox->setDefaultItems( $values ); 
```

但这没有用。我完全被难住了，因为我找不到任何其他甚至暗示如何做到这一点的东西，而且我越来越绝望。

我只是不断收到这个错误。

```
in_array() expects parameter 2 to be array, object given 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:21:31.110

听起来您正在传递一个带有键/值对的关联数组，而它后面的是一个索引数组，只有键（复选框值）。

尝试

```
$checkBox->setDefaultItems( array_keys($values) ); 
```

# tomcat - 增加Tomcat内存设置

> ID：12688778
> 
> 赞同：79
> 
> 时间：2012-10-02T10:38:21.000
> 
> 标签：tomcat, memory

> **可能重复：**
> [处理“java.lang.OutOfMemoryError: PermGen space”错误](https://stackoverflow.com/questions/88235/dealing-with-java-lang-outofmemoryerror-permgen-space-error)

我的开发机器中有 8GB RAM，并且正在尝试运行 Apache Tomcat (7.0.29) 来同时托管[Artifactory](http://wiki.jfrog.org/confluence/display/RTF/Requirements) (2.6.3) 和[Jenkins](http://jenkins-ci.org/) (1.479)。我试图找到 Jenkins 的内存要求，但看起来他们的 wiki 已关闭。

在`${TOMCAT_HOME}/bin/catalina.sh`中，我添加了以下命令：

```
CATALINA_OPTS="$CATALINA_OPTS -server -Xms1024m -Xmx3052m" 
```

这应该使 Tomcat 的 JVM 大小（基本上）保持在 1 到 3 GB 之间，为我留出足够的空间来存放其他东西，**并**为 Tomcat 提供足够的内存用于 Artifactory/Jenkins，如果我想要的话，甚至可以使用其他内存。

`JAVA_OPTS`（为了得到同样的结果，我已经尝试了同样的方法）。我保存更改并运行`startup.sh`。Tomcat 开始启动，然后死于 OOME，抱怨 Tomcat 已用完 PermGen 空间：

```
Exception in thread "SocketListener(<hex-stuff>.local.)"
java.lang.OutOfMemoryError: PermGen space
java.lang.OutOfMemoryError: PermGen space
java.lang.OutOfMemoryError: PermGen space
Exception in thread "hudson initialization thread" java.lang.OutOfMemoryError: PermGen space
java.lang.OutOfMemoryError: PermGen space 
```

我会在哪里出错？我已经阅读了多篇关于如何做到这一点的文章，并且（相信！）我正在准确地关注它们。关于如何进一步调试的任何想法或想法？提前致谢！

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-10-02T10:43:24.693

尝试设置这个

```
CATALINA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 
-server -Xms1536m -Xmx1536m
-XX:NewSize=256m -XX:MaxNewSize=256m -XX:PermSize=256m 
-XX:MaxPermSize=256m -XX:+DisableExplicitGC" 
```

in `{$tomcat-folder}\bin\setenv.sh`（如有必要，请创建它）。

有关详细信息，请参阅 [http://www.mkyong.com/tomcat/tomcat-javalangoutofmemoryerror-permgen-space/ 。](http://www.mkyong.com/tomcat/tomcat-javalangoutofmemoryerror-permgen-space/)

# php - PHP设置时间限制等待运行脚本

> ID：12688781
> 
> 赞同：-2
> 
> 时间：2012-10-02T10:38:49.370
> 
> 标签：php, mysql

在运行脚本之前是否可以等待 20 秒？

我的意思是我尝试 set_time_limit(20) 但是当我单击按钮时，它总是运行脚本。

我猜时间限制只是脚本运行时的时间限制，然后它将停止。

我正在寻找一个可以帮助我的脚本等待 20 秒的函数。我知道它可以在 jQuery 上运行，但我认为正确的是 Yii 框架。

我有下面的示例脚本

```
$coco = mysql_query( "SELECT * FROM gameWaiting" );
if ( empty( $coco ) ) {
mysql_query( "INSERT INTO gameWaiting VALUE('', '$email', '$language')" );
$status = 0; // IF THE STATUS is equal to 0 means the db was empty so it will insert
// AND WAIT FOR OTHER PLAYER TO INSERT ALSO
} else {
mysql_query( "INSERT INTO gameWaiting VALUE('', '$email', '$language')" );
$status = 1; // IF THE STATUS is equal to 1 means the db was !empty so it will insert also
// BUT THERE is no need to wait for other player otherwise RAND() the user.
}

// NOW SET TIME HERE when it will INSERT to the game
if ( time was equal to set) {
// IF SOMEONE insert into gameWaiting it will create game
mysql_query( "INSERT INTO game VALUE('','name','email','language')" );
} else {
// No player was added
}

echo $status; 
```

我希望这是可能的...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T10:41:49.917

`set_time_limit()`指定脚本的最大执行时间，而不是等待执行它的时间（请参阅[**Docs**](http://php.net/manual/en/function.set-time-limit.php)）。

您可以使用 PHP 的[`sleep()`](http://php.net/manual/en/function.sleep.php)函数强制执行延迟给定的秒数：

```
sleep(20); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T10:41:24.707

`sleep()`您可以使用函数暂停脚本。

```
sleep(20) 
```

确保`set_time_limit`高于此

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T10:41:39.997

试试这个 php

```
sleep(10); 
```

根据需要替换 10

# debian - python试图将重音字母插入openldap

> ID：12688782
> 
> 赞同：1
> 
> 时间：2012-09-26T16:55:30.263
> 
> 标签：debian, python, openldap

我正在尝试使用 python 在 OpenLDAP 中插入用户。问题是，当用户使用 ç、é、è 等重音字母时，python 反应不佳并将 OpenLDAP 编码的值插入 base64：

这是我的版本的python代码（插入同样的问题，但在这里更容易）：

```
def edit(self, uid, item, value):
    mod_attrs = [ (ldap.MOD_REPLACE, item, value) ]
    try:
        LDAPEntry.connect(self).modify_s('uid='+uid+','+USER_BASE_DN, mod_attrs)
    except ldap.LDAPError, e:
        print e 
```

当我插入打印值时，我得到例如：

```
François Dujardin 
```

在 LDAP 中，使用 ldapsearch，我得到：

```
cn:: U3TFzJFkISD1kdfv1eQ== 
```

而使用 ldif 文件和 ldapadd -f my_file.ldif 给了我适当的结果。

我认为我的脚本编码存在问题，它没有以适当的格式提供 OpenLDAP 数据。但我不知道如何解决它。我努力了：

```
value = value.decode('unicode_escape').encode('utf-8') 
```

或者

```
value = value.decode('unicode_escape').encode('iso-8859-1') 
```

并获得不同的 base64 编码值，但不是合适的值：/

谁能帮我解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:46:04.343

确保您拥有正确的内部陈述。`uid`应该是一个有效的 unicode 字符串。其次，您应该检查您的 ldap 服务器所期望的编码。utf-8, iso-8859-1, iso-8859-15, win1252, ... 除此之外，如果`value`已经是 unicode 字符串，则之后不需要任何解码。

# sql - SQL：查找所有父母和我一样的孩子

> ID：12688783
> 
> 赞同：3
> 
> 时间：2012-10-02T10:38:59.917
> 
> 标签：sql, subquery

假设我想找出父母和我父母在同一个班级的所有孩子。我可以这样写查询：

```
SELECT child.* FROM child
 JOIN parent ON child.ParentID = parent.ID
   WHERE parent.class IN (SELECT parent1.class 
     FROM parent1 JOIN child1
       ON parent1.id = child1.parentID
    WHERE child1.ID = MyID) 
```

不知何故，这感觉好像我做错了，因为我（大约）写了两次相同的连接，但我想不出改进它的方法（我可以想出嵌套子查询的其他方法，但没有其中看起来更整洁）。

有没有我想念的干净的方法？或者我这样做对吗？

**编辑：**正如 GolzeTrol 在他对这个问题的（完整）回答中指出的那样，将孩子限制为只有一个父母是很奇怪的。他是完全正确的，我不打算在实际家庭上运行此查询，而是在其他一些表上运行此查询，其中每个孩子实际上只与一个父母相关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:58:20.807

我同意@GolezTrol 的解决方案，但您仍然可以按照自己的方式解决。要使查询按您编写的那样工作，您应该添加一个外部 WHERE 子句，将您自己排除在返回的子项之外（根据@GolezTroi 解决方案）。

此外，虽然它不会对执行产生任何影响，但使用 '=' 而不是 'IN' 样式的子查询在语义上更正确，因为您只希望您的子查询返回一条记录（即你父母所在的班级）：

```
SELECT child.* FROM child
 JOIN parent ON child.ParentID = parent.ID
   WHERE parent.class = (SELECT parent1.class 
     FROM parent1 JOIN child1
       ON parent1.id = child1.parentID
    WHERE child1.ID = MyID)
   AND child.ID != MYID 
```

当然，仍然存在您使用相关子查询的问题（即您已将子查询加入到外部查询中），并且与其他方法相比，这些查询往往需要更长的时间来处理。至于您关于两次执行相同连接的观点，SQL 通常会迫使您在更复杂的查询中执行此操作，特别是在您将记录与同一张表中的其他记录相关联的查询中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:44:36.497

加入他们吧。您必须加入两个表两次，以获取相关的父母，然后是他们的孩子，但除此之外，它是一个简单的内部联接。我添加了别名（在这种情况下你必须这样做）以明确每个表的“角色”是什么。

```
select
  otherkids.*
from
  child me
  /* Join below is weird. I got only 1 parent... */
  inner join parent myparents on myparents.ID = me.ParentID
  inner join parent otherparents on otherparents.class = myparents.class
  inner join child otherkids on otherkids.ParentID = otherparents.ID
where
  me.ID = :MyID and
  otherkids.ID <> me.ID /* Exclude myself */ 
```

我必须说我认为一个孩子有一个 ParentID 很奇怪，而我认为一个孩子有一个母亲和一个父亲，或者至少有两个父母。

家谱计划通常将孩子放在一个家庭中。所以一个家庭有配偶和孩子。这样，即使您不认识他们的父母（或只认识一个），您也可以连接孩子，并且如果他们离婚并再婚，您可以轻松地将他们连接到多个家庭。也可能是对您的表结构的建议。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T10:49:01.773

也许这可以解决你的问题

SELECT child.* FROM child INNER JOIN parent ON child.ParentID = parent.ID INNER JOIN parent2 ON parent.class = parent2.class INNER JOIN child2 ON child2.ParentID = parent.ID WHERE child.ID = myID and child2.ID < > 我的身份证

好吧试试这个:)

# scala - Scala - 案例序列

> ID：12688784
> 
> 赞同：2
> 
> 时间：2012-10-02T10:39:00.480
> 
> 标签：scala

我刚刚将案例序列作为部分函数阅读，语法有点奇怪。

例如

```
def test: Int => Int = {
  case 1 => 2
  case 2 => 3
  case _ => 0
} 
```

我希望它`test`没有参数并且会返回一个类型的函数`Int => Int`

但是经过一些测试，它似乎需要一个 int 作为参数并返回一个 int，所以我将它重写为...

```
def test1(i: Int): Int =
  i match {
    case 1 => 2
    case 2 => 3
    case _ => 0
  } 
```

是`test`和`test1`平等的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T10:55:13.530

他们不相等。`test`是一个返回 a的方法`Function1[Int,Int]`，`test1`是一个接受 an`Int`并返回一个的方法`Int`。这也与模式匹配表达式完全无关。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T10:57:26.653

前面的代码确实返回了一个 Int => Int 类型的函数。

```
Welcome to Scala version 2.9.1.final (Java HotSpot(TM) Client VM, Java 1.6.0_25).
Type in expressions to have them evaluated.
Type :help for more information.

scala> :paste
// Entering paste mode (ctrl-D to finish)

def test: Int => Int = {
case 1 => 2
case 2 => 3
case _ => 0
}

// Exiting paste mode, now interpreting.

test: Int => Int

scala> test
res0: Int => Int = <function1>

scala> test.apply(1)
res1: Int = 2 
```

也许令人困惑的是 apply 可以直接调用：

```
scala> test(1)
res2: Int = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T11:01:33.213

test 是“Int => Int”类型的函数 test1 是一种在内部使用偏函数（匹配表达式）的方法。所以他们不是平等的。

如果要检查类型，请使用 REPL：

```
:type test
Int => Int

:type test1 _
Int => Int 
```

# qt - Qt - 如何展开或折叠我的 QTableView

> ID：12688787
> 
> 赞同：0
> 
> 时间：2012-10-02T10:39:20.453
> 
> 标签：qt, qtableview, qt4.7, qt4.8, qpushbutton

我有一个**QTableView**，里面有一些项目。如果**我单击任何行**，则该特定**行必须在其中扩展一些 QPushButtons**。我附上了它的屏幕截图。我怎样才能做到这一点？需要你的帮助。提前致谢。![在此处输入图像描述](../Images/6f8c27495c45a4feadab1375de9a2692.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:33:17.567

这可以使用[QML](http://doc.qt.digia.com/4.7-snapshot/qdeclarativeintroduction.html)轻松完成。

如果您查看[Models and Views: ListView Example](http://doc.qt.digia.com/4.7-snapshot/declarative-modelviews-listview.html)，扩展的委托示例正是您所需要的。

您上面描述的图片可以在 QML 中构建为带有嵌入式[QML Row Elements的](http://doc.qt.digia.com/4.7-snapshot/qml-row.html)[QML ListView](http://doc.qt.digia.com/4.7-snapshot/qml-listview.html)。

# php - PHP 和 PostgreSQL，在数据库中注册新用户的最佳实践？

> ID：12688788
> 
> 赞同：0
> 
> 时间：2012-10-02T10:39:21.367
> 
> 标签：php, postgresql, schema, multi-tenant

我的理解是，在网站/数据库上注册新用户的方法是在用户表中创建一个新条目。此后，每当我们想从另一个数据表中检索特定的用户数据时，我们都必须查询用户表以获取我们的用户 ID（当然，如果它还没有存储），在针对我们的数据的新查询中使用该 ID桌子。如果有人想要更模块化的设计，我们*可以*为每个新用户创建一个新数据库，尽管这不像第一种方法那样流行。我不确定我的理解是否正确，所以请在您认为合适的地方纠正我。

我正在思考的是，在恰好是我最喜欢的播放器的 PostgreSQL 中，您可以使用模式。模式就像数据库中的数据库。然后，当您进行查询时，您可以在表名前加上模式名称，并在其间添加一个点。就像模式是一个类并且您想要访问其中的静态属性一样。我只是喜欢这个符号！

..那么为什么我没有一个数据库来存储与管理相关的东西，甚至可能是一个用户表。但是我有另一个仅用于用户数据的数据库，每个用户都有自己的模式。然后，我需要在我的 PHP:s 用户类中存储的只是一个保存此模式名称的变量，并且每次要从数据库中检索用户特定数据时，都会使用此变量。

注册新用户的最佳做法是什么，该做什么和不该做什么？您能看到架构设计的任何优点或缺点吗？

**编辑**

因为这个问题让我对我的最终目标感到有些困惑，所以我将在这里澄清我的问题。实际上，数据库设计有点复杂，但是假设我的 Web 应用程序中有三个类。其中一个，在此称为 Foo，可选地与其他两个 Bar1 和 Bar2 处于 has-a 关系。我网站的注册用户可以“创建”任意数量的 Foo、Bar1 和 Bar2，它们相互独立。

Foo 当前存储在数据库中的多个表中。这是他的主表，其中有一个递增的序列：

```
TABLE foo
(
  foo_id serial NOT NULL,
  title text
  CONSTRAINT foo_pk PRIMARY KEY (foo_id)
) 
```

让我们不要深入研究任何其他表的细节或 Bar 的存储方式。我已经注意只有尽可能少的表，但是，我仍然必须根据实体关系及其约束来设计数据库。

Foo 可能取决于任何 Bar1 和 Bar2 的存在。Foo 也可以拥有任意数量的 Bar1 和 Bar2。所以这里有两张表来说明这种所有权：

```
TABLE foo_has_bar1
(
  foo_id integer NOT NULL,
  bar1_id integer NOT NULL
  CONSTRAINT foo_has_bar1_pk PRIMARY KEY (foo_id, bar1_id),
  CONSTRAINT foo_has_bar1_fk1 FOREIGN KEY (foo_id) REFERENCES foo (foo_id),
  CONSTRAINT foo_has_bar1_fk2 FOREIGN KEY (bar1_id) REFERENCES bar1 (bar1_id)
)

TABLE foo_has_bar2
(
  foo_id integer NOT NULL,
  bar2_id integer NOT NULL
  CONSTRAINT foo_has_bar2_pk PRIMARY KEY (foo_id, bar2_id),
  CONSTRAINT foo_has_bar2_fk1 FOREIGN KEY (foo_id) REFERENCES foo (foo_id),
  CONSTRAINT foo_has_bar2_fk2 FOREIGN KEY (bar2_id) REFERENCES bar2 (bar2_id)
) 
```

目前，我在任何地方都没有注册用户的 user_id 列。我一直认为我应该将用户数据与模式分开，这些模式当然与 user_id 一起存储在另一个数据库或公共模式中。`Catcall`在此线程的答案中也以某种方式这么说，我引用：

> “模式是 PostgreSQL 数据库中的命名空间。”
> 
> [..]
> 
> “如果每个用户都有专用于该用户的数据库对象，您可以轻松地捍卫每个用户实施一个模式的决定 [..]。”

所以我很关心，最佳实践是什么？根据这个线程中所有答案的感觉，我什至不应该考虑使用单独的模式。**但是，对于将 object_id 与 user_id [1]**联系在一起的每种类型的对象，我是否不必再多一张表？它目前是可以管理的，但我仍然可以看到这将如何使我的“命名空间”变得混乱，而不仅仅是拥有单独的模式。

**[1]**在 PostgreSQL 中，如果每一行代表一个用户，并且 user_id 之后的每个连续列是一个具有标识对象关系的整数数组的列，我可以将其分解为一个表。但是我对 PostgreSQL 数组（在 PHP 中读取和修改它们）的经验非常糟糕，而且我认为处理它们会比多个表慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:47:18.897

我建议不要这样做。

您最终会得到许多架构，每个架构都针对每个用户。如果您想查询所有这些用户的某些内容，您将不得不跳过箍。

让我举个例子：假设您为每个用户存储他登录的次数。现在您想知道所有用户登录的次数。

我建议您只需为每个要存储的实体使用 1 个表，并为其添加一个用户 ID。

```
CREATE TABLE tbluserdata(
  userdataid SERIAL PRIMARY KEY,
  userid integer REFERENCES tblusers(userid),
  nroflogins integer,
  mydata TEXT,
  whatever integer,
  etc. etc.
); 
```

并在每个查询中使用用户 ID。在我看来更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:24:38.840

> 我的理解是，在网站/数据库上注册新用户的方法是在用户表中创建一个新条目。此后，每当我们想从另一个数据表中检索特定的用户数据时，我们都必须查询用户表以获取我们的用户 ID

通常，您会将登录用户的 id 存储在应用程序变量中。完成此操作后，您无需查询数据库。对于 Web 应用程序，此类内容通常存储在会话变量或 cookie 中。请注意，用户不能简单地键入任意 ID 号来访问其他人的数据。

> 如果有人想要更模块化的设计，我们可以为每个新用户创建一个新数据库，尽管这不像第一种方法那样流行。我不确定我的理解是否正确，所以请在您认为合适的地方纠正我。

*“每个用户一个数据库”是多租户*（多客户）数据库设计方法的一个末端。例如，如果您构建了在线会计软件，您可能会合理地选择为每个租户实施一个数据库。这为您提供了最大的数据隔离、最简单的灾难恢复和最大的定制机会。

“每个用户一个数据库”对于*多用户*数据库设计来说*不是*一个好的选择。StackOverflow 在这个意义上是一个多用户系统。

 *> 模式就像数据库中的数据库。

模式是 PostgreSQL 数据库中的命名空间。如果您构建在线会计软件，您可能会合理地选择为每个租户实施一个模式。您可以在架构级别授予权限，这样您就可以轻松地将一个用户的数据与所有其他用户的数据隔离开来。灾难恢复相当简单——只需恢复一个模式。您可以将共享表、视图和过程放在所有用户也可以读取的单独模式中。

按照设计，PostgreSQL 使得跨数据库查询变得*相对*困难。跨模式查询*相对*容易。

“每个用户一个模式”*不是**多用户*数据库设计的好选择。例如，如果 StackOverflow 这样做，最终可能会产生 400 万个模式。

> ..那么为什么我没有一个数据库来存储与管理相关的东西，甚至可能是一个用户表。但是我有另一个仅用于用户数据的数据库，每个用户都有自己的模式。然后，我需要在我的 PHP:s 用户类中存储的只是一个保存此模式名称的变量，并且每次要从数据库中检索用户特定数据时，都会使用此变量。

如果每个用户都有专用于该用户的数据库对象，您可以轻松地捍卫每个用户实现一个模式的决定，并为共享表、视图、过程等使用准公共模式。这与说它是不同的*适合您的应用*的*最佳*决定。

 *“每个用户一个模式”是多租户数据库设计的另一点。

该范围的远端是“每个用户（几乎）共享每张桌子”。每行都带有一个用户标识符，该标识符显示哪个用户拥有每一行。您必须在编码时更加小心，以确保您不会意外地将一个用户的数据暴露给不同的用户。灾难恢复很麻烦。

SO 有一个多租户标签。你可能想让它成为你的最爱之一。我已将该标签添加到您的问题中，因为这似乎是您前进的方向。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T10:58:13.653

我认为您混淆了您的网络用户和数据库用户。

常见的做法是将用户存储在用户表中。将数据分布在多个模式中将无法进行没有实际好处的有效查询。

```
CREATE TABLE users (
    id   serial PRIMARY KEY,
    name text NOT NULL
); 
```

做：

*   存储加密的密码和盐
*   使用主键加速查询
*   在插入数据库之前验证数据

不：

*   以纯文本形式存储密码
*   信任用户输入**

# javascript - 使用 jQuery 构建具有嵌套内容的元素

> ID：12688791
> 
> 赞同：0
> 
> 时间：2012-10-02T10:39:37.923
> 
> 标签：javascript, jquery, element, markup, createelement

我使用以下内容使用 jQuery 在 JavaScript 中创建对象：

```
var article_attrs = { 
        'class' : 'class-name',
        click : function_name,
        hover : function_name,
        html : $('<h2>', { html : "Heading" })
    },
    article = $('<article>', atricle_attrs); 
```

这很好用——通过设置`html`我设置文章内容的属性。

不过，此时我想做的是添加一个`<h2>`标签，以及一个`<div>`包含标签的`<footer>`标签。我对这个元素的大纲将如下所示：

*   文章
    *   h2
    *   div
        *   页脚

这样做的最佳方法是什么？（注意这只是一个例子）。

**更新：主要问题是，使用`html`属性，我如何添加多个元素？**

我尝试了一个[类似问题](https://stackoverflow.com/a/747192/687581)的方法，但在这种情况下它不起作用：

```
html : [ $('<h2>', { html : "Heading" }), $('<div>', { html : "Some content" }) ] 
```

我已经制作了这个有效的[小提琴](http://jsfiddle.net/bLCTF/20/)..但我的 JS 仍然没有。我肯定错过了一些东西。

编辑：仅适用于 jQuery 1.8.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:54:31.037

```
var $myEle = $("<article />").append(
                 $("<h2 />").text("...")
             ).append(
                 $("<div />").append(
                     $("<footer />")
                 )
             ); 
```

你可以像上面那样嵌套 jQuery`.append()`方法调用来创建你需要的 HTML 结构。我喜欢这种方法，因为当你阅读它时，它可以很容易地可视化 HTMl 结构。

上面的代码将呈现这个 HTML：

```
<article>
    <h2>...</h2>
    <div>
        <footer></footer>
    </div>
</article> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:44:10.197

你可以简单地这样写

```
$('<h2></h2><div><footer></footer></div>').appendTo(article) 
```

# ruby - 在 Ruby 中创建数据解析器

> ID：12688792
> 
> 赞同：1
> 
> 时间：2012-10-02T10:39:39.203
> 
> 标签：ruby, sinatra, padrino

我需要创建一个数据解析器，它将读取几个 CSV（预定义格式）、解析、检查有效性，然后，如果一切按计划进行，则将数据提交到数据库。最后，报告有效性检查器未捕获的任何最终致命的错误。如果在大多数错误上，它仍然可以提交无错误行并至少报告未提交的行，那将非常有帮助。

有谁知道我可以用来帮助我入门的宝石、任何其他资源或任何建议？

这将成为更大的 Padrino 应用程序的一部分，每个 CSV 都将被发布到用于此类处理的路由。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:53:14.700

您可以使用 csv 库并仅解析数据。如果出现问题`rescue`。检查完整性的其他方法取决于您的数据以及您是否可以从无效数据中预测有效。这就是我要走的路线。

如果您通过 csv 库阅读，您可以将数据直接转换为对象，然后使用您最喜欢的 orm 将数据保存到数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:26:04.950

对于解析 CSV，您可以使用[FasterCSV](http://rubygems.org/gems/fastercsv)来处理解析和捕获错误。

要导入数据，请使用现有的 ORM（ActiveRecord、Sequel、DataMapper）来处理控制器中的数据库交互逻辑。

您可能还会发现这些有趣：

1.  [http://www.ruby-forum.com/topic/178753](http://www.ruby-forum.com/topic/178753)
2.  [http://blog.pioneeringsoftware.co.uk/2010/07/13/import-csv-files-in-rails-3](http://blog.pioneeringsoftware.co.uk/2010/07/13/import-csv-files-in-rails-3)

# android - Android：插入/更新联系人照片。奇怪的东西

> ID：12688794
> 
> 赞同：1
> 
> 时间：2012-10-02T10:39:50.483
> 
> 标签：android, image, contacts

我正在尝试使用以下代码插入/更新联系人照片：

```
public void ponerFoto()
{
    byte[] bytes = obtenerFoto(mRutaFoto);

    ContentValues values = new ContentValues();
    int photoRow = -1;
    String where = ContactsContract.Data.RAW_CONTACT_ID + " = " + mPersonId + " AND " + ContactsContract.Data.MIMETYPE + "=='" + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'";
    Cursor cursor = mC.query(ContactsContract.Data.CONTENT_URI, null, where, null, null);
    int idIdx = cursor.getColumnIndexOrThrow(ContactsContract.Data._ID);
    if (cursor.moveToFirst()) {
        photoRow = cursor.getInt(idIdx);
    }
    cursor.close();

    values.put(ContactsContract.Data.RAW_CONTACT_ID, mPersonId);
    values.put(ContactsContract.Data.IS_SUPER_PRIMARY, 1);
    values.put(ContactsContract.CommonDataKinds.Photo.PHOTO, bytes);
    values.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE);

    if (photoRow >= 0) {
        mC.update(ContactsContract.Data.CONTENT_URI, values, ContactsContract.Data._ID + " = " + photoRow, null);
    } else {
        mC.insert(ContactsContract.Data.CONTENT_URI, values);
    }
}

public byte[] obtenerFoto(String rutaFoto)
{
    Bitmap bitmap = BitmapFactory.decodeFile(rutaFoto);
    ByteArrayOutputStream blob = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.PNG, 0 /*ignored for PNG*/, blob);
    byte[] bitmapdata = blob.toByteArray();
    return bitmapdata;

} 
```

在 SDK 模拟器中完美运行，但在我的带有 Android 2.3.4 的 LG P970 中发生了奇怪的事情： - 很多联系人没有添加图片没有更新 - 其他时候，而不是将照片添加到正确的联系人一个不同的。-从未失败。

是在手机上拥有多个帐户（Skype、Facebook、谷歌......）？

任何想法？

谢谢

# magento - Magento 登陆支付页面 (RedirectURL)

> ID：12688796
> 
> 赞同：0
> 
> 时间：2012-10-02T10:39:55.290
> 
> 标签：magento, magento-1.7

我有一个来自银行的托管付款页面，我在结帐后使用 getOrderPlaceRedirectUrl() 重定向客户。
但是一旦输入了信用卡信息，他们需要回到商店并在 Magento 端验证付款。
问题是我不知道在哪里让用户登陆？我是否需要创建一个特定页面来验证付款详情，还是需要使用 Magento 页面？

谢谢您的回答。

PS：我使用 Magento 1.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:29:20.617

您必须制作一个单独的页面。我会以 PayPal 模块为例。

# jquery - 如何限制用户只对列表中的给定元素进行排序？

> ID：12688800
> 
> 赞同：0
> 
> 时间：2012-10-02T10:40:10.743
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, jquery-ui

我正在使用 Ruby on Rails v3.2.2 和 jquery-rails v2.0.2 gems（包括 jQuery UI）。在我看来，我已经实现了一个“基本”/“简单”的[jQuery UI 可排序交互](http://jqueryui.com/demos/sortable/)，我想限制用户*只对列表中的给定元素*进行排序。也就是说，例如，如果我有以下可排序列表：

*   项目 1
*   第 2 项
*   第 3 项
*   物品 ...

我只会将其`Item 3`设为可排序，而将其他设为不可排序。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:49:26.853

我不确定结果。但按照我的想法，下面的过程应该有效。您可以尝试在您的 javascript 中替换

```
$( "#sortable" ).sortable(); 
```

和

```
$( "#sortable .innerElement" ).sortable(); 
```

考虑到，“innerElement”是需要排序的 DOM 元素的类。
使用这种方法，您应该能够通过应用“innerElement”类使多个选定元素可排序。

希望对你有帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:54:52.747

您可以使用该[`handle`选项](http://jqueryui.com/demos/sortable/#option-handle)。使用 HTML 如下：

```
<ul id="sortable">
  <li>Item 1</li>
  <li>Item 2</li>
  <li><span id="thisone">Item 3</span></li>
  <li>Item 4</li>
</ul> 
```

您可以这样设置可排序属性：

```
$(function() {
    $( "#sortable" ).sortable({handle: '#thisone'});
}); 
```

# dojo - 带有图像的 Dojo/Dijit 选项卡

> ID：12688804
> 
> 赞同：1
> 
> 时间：2012-10-02T10:40:22.600
> 
> 标签：dojo

我正在创建一个 dojo 选项卡，如下所示：

```
<button dojoType="dijit.form.Button">
    Item 1
    <script type="dojo/method" event="onClick">
        // Load Item Tab
        newItemPane = dojox.layout.ContentPane({
                              title:'Item',
                              closable: true,
                              id:'item_tab',
                              href:'/item/1/',
                              }
                      });
        dijit.byId('mainTabs').addChild(newItemPane);
        // Select the Item Tab
        dijit.byId('mainTabs').selectChild("item_tab");
    </script>
</button> 
```

我可以在文本右侧动态插入图像`item_tab`吗？

我试过了：

```
dojo.style('item_tab','background-color','#ff0000');
dojo.style(dijit.byId('item_tab'),'background-color','#ff0000'); 
```

只是看看我是否可以更改颜色无济于事:(

我在[这里](http://dojo-toolkit.33424.n3.nabble.com/tab-color-control-td160415.html)找到了一些东西，但我不太明白他的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T12:10:56.863

默认行为是将图标放在左侧，您只需将 iconClass 添加到内容窗格。

```
newItemPane = dojox.layout.ContentPane({
    title:'Item',
    closable: true,
    id:'item_tab',
    href:'/item/1/',
    iconClass: 'dijitIconUsers'
}); 
```

[http://jsfiddle.net/cswing/L3BBf/](http://jsfiddle.net/cswing/L3BBf/)

如果需要将其放在右侧，则需要创建自己的`TabController`和`TabButton`. （见`dijit/layout/TabController`）

# c# - 用 C# 读取数据透视表

> ID：12688805
> 
> 赞同：0
> 
> 时间：2012-10-02T10:40:33.960
> 
> 标签：c#, excel, jet

我正在尝试读取包含由具有以下连接字符串的宏生成的数据透视表的 excel 表：

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=path;
Extended Properties="Excel 8.0;HDR=NO;"; 
```

问题是这些值没有出现在我的数据集中，只有列和行的标签，但没有必要的值。

任何想法阅读这样的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:05:04.243

我不知道答案，但也许 Epplus ( [http://epplus.codeplex.com/](http://epplus.codeplex.com/) ) 可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:38:59.977

我不知道为什么，但是通过将提供者更改为`Provider=Microsoft.ACE.OLEDB.12.0`，可以正确读取数据。

填充数据集较慢，但我得到了我想要的东西谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T08:40:05.987

这将在 C# 中读取表格并将其转换为数据表。'sHeet' 是 Excel 中工作表的名称，而 startfromrow 是您希望读取表格的起始位置。excelTable 是将存储数据的数据表。

```
public void ReadEx(string sHeet, int startfromrow)
       {
          excelTable.Clear();
          string excelFile =  "filepath";
          Excel.Application excel = new Excel.Application();
          Excel.Workbook wb = excel.Workbooks.Open(excelFile);
          Excel.Worksheet pivotWorkSheet = (Excel.Worksheet)wb.Sheets[sHeet];
          Excel.Range xlRange = pivotWorkSheet.UsedRange;

          int rowCount = xlRange.Rows.Count;
          int colCount = xlRange.Columns.Count;

          if (excelTable.Columns.Count <= 0)
            {
              excelTable.Columns.Add("Row Labels");
              foreach (string column in lColumns)
              {
                  excelTable.Columns.Add(column);
              }
            }

          object[] exrow = new object[colCount];
          for (int i; startfromrow <= rowCount; row++)
          {
              for (int j = 1; j <= colCount; j++)
              {
                  exrow[j-1] = xlRange.Cells[startfromrow , j].Text;
                  Console.WriteLine(xlRange.Cells[startfromrow , j].Text);
              }
              excelTable.Rows.Add(exrow);
          } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-23T06:24:48.367

我对user3644719的回答做了一些修改。在他/她的回答中，有一些错字，例如代码中未定义的变量。

```
 String sHeet = "Pivot";

        DataTable excelTable = new DataTable();

        excelTable.Clear();
        string excelFile = "C:\\test_pivot.xlsx";
        Excel.Application excel = new Excel.Application();
        Excel.Workbook wb = excel.Workbooks.Open(excelFile);
        Excel.Worksheet pivotWorkSheet = (Excel.Worksheet)wb.Sheets[sHeet];
        Excel.Range xlRange = pivotWorkSheet.UsedRange;

        int rowCount = xlRange.Rows.Count;
        int colCount = xlRange.Columns.Count;

        string[] lColumns = new string[2] { "Column1","Column2" };

        if (excelTable.Columns.Count <= 0)
        {
            foreach (string column in lColumns)
            {
                excelTable.Columns.Add(column);
            }

        }

        Object[] exrow = new object[colCount];
        for (int row=1; row <= rowCount; row++)
        {
            for (int j = 1; j <= colCount; j++)
            {  
                exrow[j - 1] = xlRange.Cells[row, j].Text;
                Console.WriteLine(xlRange.Cells[row, j].Text);
            }

            excelTable.Rows.Add(exrow);
            //excelTable.Rows.Add(exrow);
        }

        String str = excelTable.ToString();
    } 
```

# c++ - CUDA 内核行为取决于块和线程的数量，即使未使用也是如此

> ID：12688811
> 
> 赞同：0
> 
> 时间：2012-10-02T10:41:14.263
> 
> 标签：c++, cuda, gpu, gpgpu

我有以下内核：

```
__global__ void myKernel(int k, int inc, int width, int* d_Xco, int* d_Xnum, bool* 
        Xvalid, float* d_X)
    {

        int i, k1;  
        i = threadIdx.x + blockIdx.x * blockDim.x;
        //k1 = threadIdx.y + blockIdx.y * blockDim.y;

        if( (i < k)  ){
           for(k1 = 0; k1 < inc; k1++){

             int mul = (d_X[i*inc + k1] >= 2e2);
             d_X[i*inc + k1] *= (float)(!mul);
             d_Xco[i*width + k1] = k*mul;
             d_Xnum[i] += mul;
             d_Xvalid[i*inc + k1] = (!mul) ; 

            }
         }// of if

 } 
```

就是这样称呼的：

```
 int bx = (int)(k/32)+1;
  int by = (int)(inc/32)+1;

  dim3 b(bDim, 1);
  dim3 t(tDim, 1);
  cmyKernel<< b, t >>>( k, inc, width, d_Xco, d_Xnum, d_Xvalid, d_X );

  cudaThreadSynchronize(); 
```

`k`是9000`inc`左右，5000左右，所以我确定我没有超过块数。如果`myKernel`在`y`维度中使用 1thread/1block 调用，内核似乎工作正常，但是，例如，只需将`y`维度中的线程和块数更改为 10，它会给出错误的输出，即使在内核中我并没有真正使用中的线程和块`y`。理想情况下，我想摆脱`for()`使用`k = threadIdx.y + blockIdx.y * blockDim.y`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:52:30.007

如果您启动一个 y 维度 = 10 的内核，那么您正在使用它们。只是因为您没有使用线程标识符`threadIdx.y`，`blockIdx.y`并不意味着没有启动线程。当您启动一个 y 维度 = 10 的内核时，您将有 10 个 i = 0 的线程、10 个 i = 1 的线程等。

假设您为简单起见启动 2x2 线程。您将拥有线程 (0,0)(0,1) (1,0) (1,1)。在您的代码中，两个线程 (0,0) 和 (0,1) 的 i 变量为 0，但`threadIdx.y`不同。这意味着两个线程将评估相同 i 变量的代码并导致竞争条件。

您需要解决迭代之间的依赖关系（d_Xnum[i] += mul）。一种方法是使用`atomicAdd(..)`. 取消注释`k1`，将循环替换为`if(k1 < inc)`并添加`atomicAdd`. 那应该给你正确的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:16:00.000

正如评论中已经说明的那样，您当前的解决方案是启动多个线程，每个线程将它们的工作应用于相同的内存空间。这是由于生成的多个线程都具有相同值的 threadIdx.x，而 threadIdx.y 值不同。这意味着您将有多个线程同时读取和写入同一内​​存空间，这有很多潜在的问题，[这里是一个简单的描述](https://stackoverflow.com/a/34550/1694922)。

为避免这种情况，您可以采取几个步骤。例如，您可以使用同步数据访问（这将导致速度大幅下降，因为线程等待其他人完成数据访问）。如果您想让每个线程处理一个单元元素，则需要删除 for 循环并像以前一样使用 k1，但是您必须仔细考虑内存读取和写入，因为进程的任何部分都可能在任何之前或之后执行其他在不同的线程！

**这里的核心理解是，你永远不能依赖线程之间的操作顺序！**

在数据访问方面，将所有数据结构视为网格会有所帮助，其中每个线程只应访问和修改其自身坐标中的数据，例如 (3,2) 用于 threadIdx.x == 3 的线程和 threadIdx.y == 2。这样，您可以轻松地可视化线程的行为和潜在的竞争条件。使用此功能的最简单方法是为输出数据的每个元素创建一个网格条目，因此如果您有一个 9000x5000 元素的矩阵，您可能会从该数量的线程开始，并从那里进行优化。这当然会导致 GPU 必须在其所有单元上执行多次，但这是一个很好的起点。

奥斯陆大学有一个关于这个主题的研究生课程，等等。您可能会发现[这些幻灯片](http://www.uio.no/studier/emner/matnat/ifi/INF5063/h11/undervisningsmateriale/INF5063-nVIDIA_GPU.pdf) 与加深理解高度相关。请特别参阅有关线程批处理、网格和块的部分。

# c# - C#返回通用列表/IEnumerable，它是如何工作的？

> ID：12688816
> 
> 赞同：1
> 
> 时间：2012-10-02T10:41:38.527
> 
> 标签：c#, list, generics, ienumerable

我有一个方法可以返回一个汽车列表（IEnumerable）..

（适用于 Returntypes`IEnumerable<Car>`和`List<Car>`）：

```
public IEnumerable<Car> GetCars(string xml)
{
    var myResultList;

     XElement doc = XElement.Parse(xml);
     myResultList = doc.Descendants().Descendants("dict").Select(
     x => new Employee
     {
         Id = x.Elements("string").ElementAt(0).Value,
         Prename = x.Elements("string").ElementAt(1).Value,
         Name = x.Elements("string").ElementAt(2).Value,
         Initials = x.Elements("string").ElementAt(3).Value
    }
    );

    IEnumerable<Car> enumerable = myResultList;
    return enumerable;

    //---

    //or as a List if it's better?
    List<Car> asList = enumerable.ToList();
    //then: return asList
} 
```

现在我想让这个方法**通用**。每个 IEnumerable 类型/或列表类型都应该能够。

像这样的东西 - 那只是伪代码，因为我不知道它是如何工作的；

```
public IEnumerable<T> GetData(string xml)
{
    var myResultList;

    //...myResultList.. will be filled here (unnecessary) 

    IEnumerable<T> enumerable = myResultList;
    return enumerable;

    //---

    //or as a List if it's better?
    List<T> asList = enumerable.ToList();
    //then: return asList
} 
```

我希望我的问题足够清楚..想象一下你会有一个像*House*而不是*Car*的其他类型，但你想对每种类型使用相同的方法。

我怎样才能做到这一点？帮助将不胜感激。

编辑：

添加了填充“myResultsList”的代码

编辑 2：2 XML 应该在相同的方法上工作：

```
 <plist version="1.0">
  <dict>
    <key>DataType</key>
    <string>Employee</string>
    <key>8000</key>
    <dict>
      <key>MitarbeiterNo</key>
      <string>8000</string>
      <key>Vorname</key>
      <string>Walter</string>
      <key>Name</key>
      <string>Walter Lohner Stans</string>
      <key>Initialien</key>
      <string>MAL</string>
    </dict>
    <key>8001</key>
    <dict>
      <key>MitarbeiterNo</key>
      <string>8001</string>
      <key>Vorname</key>
      <string>Motorrad</string>
      <key>Name</key>
      <string> Meierskappel</string>
      <key>Initialien</key>
      <string>MAM</string>
    </dict>
    <key>8004</key>
    <dict>
      <key>MitarbeiterNo</key>
      <string>8004</string>
      <key>Vorname</key>
      <string>Hanspeter</string>
      <key>Name</key>
      <string>Altenbürger AG  Horgen</string>
      <key>Initialien</key>
      <string>FH</string>
    </dict>
  </dict>
</plist> 
```

和

```
 <plist version="1.0">
  <dict>
    <key>DataType</key>
    <string>Agent</string>
    <key>7000</key>
    <dict>
      <key>AgentNo</key>
      <string>7000</string>
      <key>Initialien</key>
      <string>VW</string>
      <key>Namen</key>
      <string>Walter Gnos Vertretungen  Vevey</string>
    </dict>
    <key>7001</key>
    <dict>
      <key>AgentNo</key>
      <string>7001</string>
      <key>Namen</key>
      <string>Miller GmbH Bern</string>
    </dict>
    <key>7002</key>
    <dict>
      <key>AgentNo</key>
      <string>7002</string>
      <key>Initialien</key>
      <string>MAL</string>
      <key>Namen</key>
      <string>Walter Lohner Stans</string>
    </dict>
  </dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T10:46:56.990

你唯一缺少的是`<T>`：

```
public IEnumerable<T> GetData<T>(string xml) 
```

然后你称它为：

```
var data = obj.GetData<House>(xml); 
```

其中 the`<House>`告诉`GetData`了`T`那个电话是什么。请注意，`GetData<T>`您可以使用内部`typeof(T)`来获取，如果您正在使用或类似的反序列化`Type`，这可能是必需的。`XmlSerializer`

请注意，在某些情况下，使用泛型*非常方便*，而在其他一些情况下，它实际上会使事情变得有问题 - 所以您可能*还想*考虑它是否更适合使用：

```
public IEnumerable GetData(Type type, string xml) 
```

即`Type`作为常规参数传入。如果您使用反射做大量工作，这可能很有用，泛型变得棘手。但要强调的是：通用和非通用解决方案都是合理有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:55:03.310

这是您尝试执行的操作的示例。您可以将此代码粘贴到控制台应用程序中：

```
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Xml;
using System.Xml.Serialization;

namespace Stackoverflow
{
    public class Foo
    {
        public int Id { get; set; }
        public Bar Bar { get; set; }
    }

    public class Bar { }

    class Program
    {
        private static void Main()
        {
            var foos = new List<Foo>
                           {
                               new Foo { Id =1, Bar = new Bar()},
                               new Foo { Id =2, Bar = null},
                               new Foo { Id =3, Bar = new Bar()},
                               new Foo { Id =4, Bar = null},
                           };

            var xml = ToXml(foos);

            var result = GetData<List<Foo>>(xml);
        }

        private static string ToXml(List<Foo> foos)
        {
            XmlSerializer ser = new XmlSerializer(foos.GetType());
            StringBuilder sb = new StringBuilder();
            StringWriter writer = new StringWriter(sb);
            ser.Serialize(writer, foos);

            string xml = sb.ToString();
            return xml;
        }

        public static T GetData<T>(string xml)
        {
            XmlDocument doc = new XmlDocument();
            doc.LoadXml(xml);

            XmlNodeReader reader = new XmlNodeReader(doc.DocumentElement);
            XmlSerializer ser = new XmlSerializer(typeof(T));
            object obj = ser.Deserialize(reader);

            T result = (T)obj;

            return result;
        }
    }
} 
```

# python - Python - 打开一个打开另一个外壳的命令

> ID：12688824
> 
> 赞同：1
> 
> 时间：2012-10-02T10:42:02.287
> 
> 标签：python

我正在编写一个调用命令行（例如 python 本身）的 Python 代码，该命令将打开它自己的 shell。Python 如何控制这个 shell？

```
import subprocess
subprocess.call(['./testprg'])

# testprg will open its own shell 
# so the code below will not work
subprocess.call(['i 2']) 
```

testprg 是另一个打开 shell 提示符的程序。输入“i 2”将触发值为 2 的“插入”命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:43:47.730

它不能。`subprocess`不与交互式 shell 交互。

您需要`stdin=PIPE`在第一个子进程中使用`'i 2\n'`对该管道的写入。

如果您想与交互式程序交互，请考虑使用[pexpect 。](http://www.noah.org/wiki/pexpect)它可能会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:50:33.780

看看[`subprocess.Popen.communicate()`](http://docs.python.org/library/subprocess.html#subprocess.Popen.communicate)。如果它只是接收一些行并将命令发送到另一个进程，它应该是你正在寻找的。

一些例子：

```
pout, perr = Popen([tools['PASSWD'], username], stdin=PIPE, stdout=PIPE,
        stderr=PIPE).communicate("%s\n%s\n" % (password, password)) 
```

# vb6 - .NET 是否支持 Twips？

> ID：12688826
> 
> 赞同：0
> 
> 时间：2012-10-02T10:42:24.003
> 
> 标签：vb6, vb.net-2010, vb6-migration

我在 VB6 到 DotNet 迁移项目中工作。在我们的 VB 6 项目中，他们正在计算 Twips 中的一些鼠标移动事件，但是当它在 VB.NET 中转换时，将鼠标移动值作为像素给出。缇是.NET 支持吗？

谁能告诉我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T11:09:48.740

从我能找到的资料来看，.NET 不支持 Twips。有一些兼容性扩展，但我认为最好的方法是重构 twips 以使用 .NET 像素。重构很痛苦，但从长远来看，项目只会更好地工作。

[缇和.NET](http://blogs.artinsoft.net/Mrojas/archive/2007/09/20/Twips-and-NET.aspx)

[VB .NET 从 Twip 切换到像素](http://visualbasic.about.com/cs/visualbasicfaq/a/dykpixeltwip.htm)

其他人可能有更多我错过的信息。

# hibernate - 刷新（）后休眠不更新数据库

> ID：12688827
> 
> 赞同：3
> 
> 时间：2012-10-02T10:42:25.860
> 
> 标签：hibernate

我手动创建了我的数据库，然后使用 Hibernate 工具生成了我的 Pojo，DAO。当我创建一个对象并将其持久保存到数据库时，它似乎工作正常

```
 DefinitionT def = new DefinitionT();
        def.setSelected(false);
        def.setValue(sqlEncode(definition));
        def.setWordId(wordT.getId());
        definitionTDao.persist(def); 
```

这是我的 persist() 方法

```
public void persist(Object o)
{
    try
    {
        hSession.persist(o);
        hSession.flush();
    }
    catch (Exception e)
    {
        hTransaction.rollback();
        log.error(e.getMessage());
    }
} 
```

当我的线程完成时，数据库将使用新对象进行更新。但是，我注意到如果我在调用persist() 后直接停止程序，数据库将不会更新。事实上，无论我执行多少操作，在线程完成之前似乎都不会在数据库中更新。我认为flush（）将休眠缓存中的所有更新推送到数据库中？我错过了什么？我认为这是同一个问题，因为[Hibernate 刷新不会更新数据库](https://stackoverflow.com/questions/471797/hibernate-flush-doesnt-update-database)，但我没有任何 for 循环正在进行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T11:44:48.373

Flush 意味着 Hibernate 会话最终对 SQL 语句进行排序，然后将它们发送到数据库。然后数据库执行它们（在回滚段中），但不会使修改持久化，也不会使它们对其他用户可用。

提交最终让数据库持久存储修改。（例外情况是数据库处于自动提交模式 - 我不建议这样做，因为那时无法保证事务的正确性，并且自动提交不适用于所有数据库，或者刷新模式设置为提交 - 也不是必要的；这会失去灵活性。）

提交隐式调用了flush()，但flush 不调用commit()。

适合您的解决方案：在程序结束时进行额外的提交。

（顺便说一句，通常在每个事务之后进行刷新，但在许多事务之后进行提交只是为了更好的性能。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T11:01:32.443

如果您明确提交事务怎么办：

```
Transaction hTransaction = null;
try {
hTransaction = hSession.beginTransaction();

hSession.persist(o);

hTransaction.commit();
hSession.flush();

}
catch (Exception e)
{
    hTransaction.rollback();
    log.error(e.getMessage());
} 
```

实际上，正如我所知，当您刷新会话时，应提交使用此会话打开的任何事务，但请检查此内容，确保您正在使用正在刷新的会话创建事务。

提交时刚刚检查了自动刷新，模式应该是：

```
hSession.setFlushMode(FlushMode.COMMIT) 
```

从[这里检查](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/objectstate.html#objectstate-flushing)

# .net - 在 SQLServer 中规范化 XML 以进行散列

> ID：12688828
> 
> 赞同：1
> 
> 时间：2012-10-02T10:42:39.137
> 
> 标签：.net, xml, tsql, sql-server-2005, xml-parsing

我问[了这个问题](https://stackoverflow.com/q/12674327/395628)，这导致我做了以下事情。

*   创建 C# 对象结构的 XML 表示，以便将其传递给 SQLServer。
*   创建一个存储过程，*对 XML 进行散列处理*，然后将 XML 分解为相关表，并将散列存储在根表中以便快速查找。

这意味着我可以将复杂的对象数据传递给 SQLServer 并在哈希上进行查找，而不是尝试将 XML 与表进行分解和匹配（我也可以这样做，但速度很慢（呃））......

然而 - 关于 XML 的好处之一是您可以格式化它，例如缩进等 - 而且 - 属性顺序并不重要。但是，当您散列某些内容时，格式和缩进很重要。所以我在 C# 中所做的是......

*   通过将所有属性按字母顺序排列来规范化 XML
*   使用 .ToString(DisableFormatting) 删除额外的格式空间

这很好用，但是当我测试时，*格式化*XML 更容易，所以我可以更容易地看到我传递给存储过程的内容。

如果可以信任 SQLServer 来保留属性顺序，那就太好了，[但它不能](http://msdn.microsoft.com/en-us/library/ms187107%28v=sql.90%29.aspx)......

> 不保留 XML 实例中属性的顺序。当您查询存储在 xml 类型列中的 XML 实例时，生成的 XML 中的属性顺序可能与原始 XML 实例不同。

这意味着我不能使用 SQLServer 的 XML 数据类型来规范化数据。

困扰我的是，在某些时候有人会使用我的 proc 并认为“哦，太好了，XML，属性顺序无关紧要，格式无关紧要，*表示的数据是相同的*”但是，当我散列时，这不是不会是这样。

有人有解决这个问题的方法吗？我真的不想在 T-SQL 中编写 XML 解析器！！或者使用其他人编写的 XML 解析器来规范化它。为什么 SQLServer XML 数据类型不能只保留属性顺序？

我想我可以“信任”我的应用程序始终以相同的格式/顺序传递 XML，从而为同一对象产生相同的哈希值。但我对存储过程也必须“信任”应用程序才能做到这一点的想法感到不舒服。我希望能够以某种方式检查 XML 的规范化，它显然会更健壮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T12:54:18.010

我将尝试序列化存储过程中的对象。

让我们假设以下类：

```
class MyCustomObject 
{
    int id;
    string SomeField;
} 
```

然后，您可以使用存储过程，在其中序列化 xml 中的对象并计算输入参数的校验和，然后在另一个存储过程中，您可以传递 HashValue(checksum) 和 Xml。通过反序列化 Xml，你可以计算 Xml 中字段的校验和，并将其与传递的 HashValue 进行比较。

试试这个代码：（注意你应该存储哈希值并将其返回给调用者并对xml做一些事情）

```
CREATE PROCEDURE HashObject(@id int, @SomeField varchar(255)) AS
BEGIN
    SELECT
        CHECKSUM(@id, @SomeField) AS CalculatedHashValue,
        (SELECT @id AS ID, @SomeField AS SomeField FOR XML RAW('xmlRowName')) AS Xml_Data,
        @id AS SPCall_ID,
        @SomeField AS SPCall_SomeField
END
GO

CREATE PROCEDURE CheckHash(@HashValue INT, @data XML) AS
BEGIN
    SELECT  
        CHECKSUM(rt.value('@ID', 'int'), rt.value('@SomeField', 'varchar(255)')) AS Xml_CalculatedHashValue,
        @data Xml_Data,
        rt.value('@ID', 'int') AS Xml_ID,
        rt.value('@SomeField', 'varchar(255)') AS Xml_SomeField,
        @HashValue AS SPCall_HashValue

    FROM @data.nodes('xmlRowName') AS nd(rt)

END
GO

DECLARE @id INT = 11
DECLARE @SomeField varchar(255) = 'string value'
DECLARE @data XML

EXEC dbo.HashObject @id, @SomeField

SET @data = (SELECT @id AS ID, @SomeField AS SomeField FOR XML RAW('xmlRowName'))
EXEC dbo.CheckHash 0, @data

SET @data = (SELECT 25 AS ID, 'diferent string value' AS SomeField FOR XML RAW('xmlRowName'))
EXEC dbo.CheckHash 0, @data
GO 
```

# java - 在tomcat上部署应用程序时加载的类太多

> ID：12688831
> 
> 赞同：3
> 
> 时间：2012-10-02T10:42:57.417
> 
> 标签：java, tomcat, profiling, classloader

我们有一个 web 应用程序，它依赖于大约 125 个 jar，包括 spring、hibernet、zk 等。

当我们启动 tomcat 服务器时，它会将大约 55K 类加载到 permgen 中。由于这个巨大的类加载，应用程序启动需要大量时间。此外，应用程序所需的 permgen 空间非常高，因为在程序执行期间还会加载其他类。

*   有没有办法控制启动时加载多少类，以便应用程序快速启动？
*   有没有办法从 permgen 中释放/卸载不常用的类？[这些问题特定于从外部 jar 加载的类]

我曾尝试使用为 java 指定的 -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled 选项。但一段时间后只有 42 个类被卸载。

非常感谢任何帮助或指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:52:32.343

罐子在类路径中是有原因的。它们可能是通过构建管理系统（maven、gradle、...）添加到您的 webapp 中的——因此这些 jar 可能存在一些依赖关系。

从类路径中删除 jar 将产生`NoClassDefFoundError`. 我猜你必须忍受这么多罐子，除非其中一些是不需要的（这不容易找到）。

最好检查你的依赖关系图（maven 和 gradle 有它们），看看你的项目中可能不需要或过时的 jars。还要检查不同版本的罐子，如果可能的话`random-1.0.0.jar`，`random-1.0.1.jar`排除其中一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:59:19.063

您可能需要使用工具来删除不需要的类。

这个问题处理了这个问题：

[删除 Java 项目中不必要的依赖项的工具](https://stackoverflow.com/questions/707194/tool-to-remove-unnecessary-dependencies-in-a-java-project)

但是Oracle上的这个问题可能更有用：

[https://forums.oracle.com/forums/thread.jspa?threadID=1311910](https://forums.oracle.com/forums/thread.jspa?threadID=1311910)

我认为 GenJar2 ( [http://code.google.com/p/genjar2/](http://code.google.com/p/genjar2/) ) 可能最能满足您的需求。

# pdf - 将 RGB PDF 转换为 CMYK PDF

> ID：12688834
> 
> 赞同：4
> 
> 时间：2012-10-02T10:43:03.803
> 
> 标签：pdf, rgb, cmyk

我正在寻找一种将具有 RGB 颜色的 PDF 转换为具有 CMYK 颜色的 PDF 的方法。我尝试过不同的程序，如 Ghostscript 和 PStill，但它们似乎都没有做正确的工作。有人知道一种 100% 有效并且可以通过命令行运行的方法吗？

# eclipse - Jackrabbit WebDav Servlet 入门

> ID：12688837
> 
> 赞同：2
> 
> 时间：2012-10-02T10:43:21.743
> 
> 标签：eclipse, jakarta-ee, servlets, jackrabbit

首先让我说我是 Java EE 开发的新手。我的知识仅限于在 Eclipse 中创建一个简单的 helloworld servelt 并在 Tomcat 6 中对其进行测试。

我现在需要创建一个 WebDav servlet。我来到 Jackrabbit 并四处搜索教程，但找不到任何适合我当前知识水平的信息。

我能找到的唯一迹象是创建一个扩展 AbstractWebdavServlet 的类，然后实现其他类。

所以我在 eclipse 中创建了一个动态的 web 项目，我添加了 jackrabbit-webdav-2.4.3.jar 依赖项并创建了一个看起来像这样的类

```
import org.apache.jackrabbit.webdav.DavLocatorFactory;
import org.apache.jackrabbit.webdav.DavResource;
import org.apache.jackrabbit.webdav.DavResourceFactory;
import org.apache.jackrabbit.webdav.DavSessionProvider;
import org.apache.jackrabbit.webdav.WebdavRequest;
import org.apache.jackrabbit.webdav.server.AbstractWebdavServlet;

public class testDAV extends AbstractWebdavServlet{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    @Override
    public DavSessionProvider getDavSessionProvider() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public DavLocatorFactory getLocatorFactory() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public DavResourceFactory getResourceFactory() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    protected boolean isPreconditionValid(WebdavRequest arg0, DavResource arg1) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void setDavSessionProvider(DavSessionProvider arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void setLocatorFactory(DavLocatorFactory arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void setResourceFactory(DavResourceFactory arg0) {
        // TODO Auto-generated method stub

    }

} 
```

然后我被困在这里。有人可以告诉我一个关于如何进行的好的初学者级教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T07:18:09.807

如果您只需要一个 WebDAV servlet，而没有 Jackrabbit 的底层内容存储功能，那可能不是最佳选择。其他 java 库（如[http://milton.io/](http://milton.io/)）仅提供 WebDAV 管道部分，并且更容易适应特定需求。

话虽如此，如果您还需要内容存储，Jackrabbit 是一个很棒的工具，在这种情况下，您不需要编写任何代码来使用它的 WebDAV servlet，它是开箱即用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:31:22.387

您可以查看我们的 Webdav servlet，它扩展了 Apache jackrabbit 自己的以添加一些有关安全性的功能（配置领域和使用摘要身份验证）。 [https://github.com/Silverpeas/Silverpeas-Core/blob/master/web-core/src/main/java/com/silverpeas/jcrutil/servlets/SimpleDigestWebdavServlet.java](https://github.com/Silverpeas/Silverpeas-Core/blob/master/web-core/src/main/java/com/silverpeas/jcrutil/servlets/SimpleDigestWebdavServlet.java)

# html - 我可以在不设置浮动左或右的情况下设置宽度和边距吗

> ID：12688839
> 
> 赞同：-1
> 
> 时间：2012-10-02T10:43:27.420
> 
> 标签：html, css

我正在尝试增加标签的宽度并设置边距，但是如果没有 put float 它将无法工作，任何人都可以提供任何解决方案这是代码

```
.float-right .createAccount{
float: left;
margin-left: -11px;
width: 140px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:49:04.227

尝试使用`display:block`

```
.createAccount{
float: left;
margin-left: -11px;
width: 140px;
display:block} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:49:31.213

尝试添加：

```
position:absolute 
```

这应该够了吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:53:48.193

您可以为任何元素添加边距和宽度，但是，

如果您将它用于内联元素（例如：- p、a、span），则必须添加 CSS 属性 display : inline-block;

如果您将其用于块级元素（例如：- div、h2），则必须添加 CSS 属性 display : block;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:54:55.953

添加`display: inline-block;`

```
.createAccount {
    display: inline-block;
    margin-left: -11px;
    width: 140px;
} 
```

# git - git submodule 在网络服务器上自动拉取并提交

> ID：12688844
> 
> 赞同：1
> 
> 时间：2012-10-02T10:43:56.777
> 
> 标签：git, github, git-submodules

我有以下设置，我正在处理一个`project`带有 submodule的项目`submodule`。每当我将更改推送到 github 时，它都会向服务器上的 update.php 发送一个发布请求。

这个 php 文件执行一个 git 命令。如果没有子模块，我可以做一个 git pull 并且一切都很好，但是使用子模块就困难得多。

我现在有这个，但它没有做我想要的。我应该 git pull repo 并更新并拉取每个子模块的最新版本。

```
<?php echo `git submodule foreach 'git checkout master; git pull; 
git submodule update --init --recursive; git commit -m "updating"' && git pull && 
git submodule foreach 'git add -A .' 
&& git commit -m "updating to latest version including submodules" 2>&1s`; 
```

**编辑//** 好的，我完成了一半。

```
<?php echo `git submodule foreach 'git checkout master; git pull; 
git submodule update --init --recursive; git commit -am "updating"; echo "updated"' && 
git pull &&  git commit -am "updating to latest version including submodules" && 
echo 'updated'`; 
```

echo 阻止脚本因为返回非零而停止。当我从控制台使用`php update.php`.

当 github 初始化文件时，或者我从浏览器运行它仍然无法工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T23:18:43.833

# c - 为什么这个 C 程序会变成梨形？我破坏了缓冲区吗？

> ID：12688845
> 
> 赞同：3
> 
> 时间：2012-10-02T10:44:01.003
> 
> 标签：c, buffer-overflow

我一直在用 C 做一些实验。我通常使用 PHP 和 javascript。

我做了“Hello World”，然后我输入了这个，这是我从某处的网站复制的......

```
#include <stdio.h>
#include <stdlib.h>
#define MAX 20
int intcmp(const void*v1, const void *v2){
    return (*(int *)v1 - *(int *)v2);
}
main(){
    int arr[MAX], count, key , *ptr;
    printf("Enter %d integer values; press enter after each\n", MAX);
    for (count = 0; count < MAX; count++)
        scanf("%d", &arr[count]);
    puts("Press a key to sort the values");
    getc(stdin);

    qsort(arr, MAX, sizeof(arr[0]), intcmp);

    for(count=0; count < MAX; count++)
        printf("\narr[%d] = %d.", count, arr[count]);

    puts("\nPress a key to continue");
    getc(stdin);

    printf("Enter a val to search for");
    scanf("%d", &key);

    ptr = (int * )bsearch(&key, arr, MAX, sizeof(arr[0]), intcmp);

    if(ptr != NULL){
        int fred =  (ptr - arr);
        printf("%d found at arr[%d]", key ,fred);
    }else{
        printf("%d not found", key);
    }
} 
```

到目前为止，一切都很好。我试图了解所有星星都在做什么，但它正在落入适当的位置（哈哈 - 坠落的星星 :)

但是，如果我在它要求我输入 20 个整数时输入一个浮点数，例如 21.45，它会冲到“输入要搜索的 val”，用奇怪的数字填充 20 个数组值。

我是否创建了某种缓冲区溢出？我意识到应该检查输入 - 但我很想知道我做了什么。我可以使用我的程序运行任意代码吗？（嗯，不，不是据我所知......但有人可以吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T10:47:52.663

> 但是，如果我在它要求我输入 20 个整数时输入一个浮点数，例如 21.45，它会冲到“输入要搜索的 val”，并用奇怪的数字填充了 20 个数组值

如果您输入一个值，例如`21.45`调用 to`scanf("%d")`将失败，因为它不是`int`，并且将留下`.45`in `stdin`（`21`将被提取为有效的`int`）以再次处理。这会导致循环一次又一次地重新读取这个值（因为它每次都失败）。奇怪的数字是由于数组的元素未初始化。

检查它的返回值，`scanf()`它返回所做的分配数量，如果它失败，则跳过其中的任何内容`stdin`：

```
int count = 0;
while (count < MAX)
{
    if (1 == scanf("%d", &arr[count]))
    {
        count++; /* OK, so get next. */
    }
    else
    {
        /* !OK, skip invalid input. */
        int c;
        while ((c = fgetc(stdin)) != EOF && c != '\n');
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T10:48:21.013

如果您使用不正确格式的内容（在本例中为浮点数）填充标准输入，则值的提取将失败。但是，损坏的数据不会从输入流中提取出来。这意味着`scanf`将反复失败。因此，`arr[0...MAX-1]`scanf 根本没有填写您的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:52:38.743

如果你想得到一个浮点数，那么在 scanf 你需要有：

```
scanf("%f", &arr[count]); 
```

此外，您需要将数组声明为`float arr[MAX]`

# ios - dataWithContentsOfURL 是否缓存？

> ID：12688853
> 
> 赞同：0
> 
> 时间：2012-10-02T10:44:32.093
> 
> 标签：ios, objective-c, image, caching

我试图弄清楚是否`dataWithContentsOfURL`缓存了内容，因此如果在代码中：

```
UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:
[NSURL URLWithString:[NSString stringWithFormat:@"http://testsite.com/img/%@.png"
,imgName]]]]; 
```

接下来是一行：

```
UIImage *img2 = [UIImage imageWithData:[NSData dataWithContentsOfURL:
[NSURL URLWithString:[NSString stringWithFormat:@"http://testsite.com/img/%@.png"
,imgName]]]]; 
```

那需要重新上网吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:49:30.590

这没有被缓存。

我建议您开始使用 ASIHTTPRequest 或 AFNetwork 框架。它们允许您缓存。

如果您执行 NSMutableURLRequest，您有一些方法可以进行缓存，但不是很好。

您也不应该使用 XWithContentOfURL，因为它们会占用您的主线程，除非您使用线程或 GCD，如果您使用上述框架，您将免费获得这些东西

# c# - C# 中的 SSIS 2008 脚本：需要将 Y2K 字符串转换为日期格式并使用它来填充变量

> ID：12688860
> 
> 赞同：3
> 
> 时间：2012-10-02T10:44:54.843
> 
> 标签：c#, ssis, dynamics-crm

我正在尝试以编程方式将记录从 AS400 系统导入 Dynamics CRM。为了实现这一点，我已将 AS400 记录推送到 SQL 表中，并且能够通过在 SSIS 2008 C# 脚本中引用 CRM 4 Web 服务端点将这些记录推送到 CRM。

问题是其中一个字段是 Y2K 日期字符串格式。为了将其放入 CRM 中的日期字段 (DOB)，我相信我需要将其转换为日期格式，然后在变量中引用结果值。

我不知道该怎么做。

这个问题/答案（http://stackoverflow.com/a/4880021/1326443）可能有助于解决部分问题，但我不知道如何在我的脚本中使用它来获取值（还没有为多年，对 C# 不熟悉）

脚本片段：

```
public class ScriptMain : UserComponent
{
private CrmService service = null;

public override void PreExecute()
{
    base.PreExecute();

    CrmAuthenticationToken token = new CrmAuthenticationToken();
    token.AuthenticationType = 0;
    token.OrganizationName = "DevOrg";

    service = new CrmService();
    service.Url = "http://crm/mscrmservices/2007/crmservice.asmx";
    service.CrmAuthenticationTokenValue = token;
    service.Credentials = System.Net.CredentialCache.DefaultCredentials;
}

public override void PostExecute()
{
    base.PostExecute();

}

public override void LeadInput_ProcessInputRow(LeadInputBuffer Row)
{
    lead cont = new lead();

if (!Row.TITL20_IsNull)

{
        cont.salutation = Row.TITL20;
    }

if (!Row.DOBI20_IsNull)

{
            cont.new_birthdate = Row.DOBI20;
        }

....

....

            service.Create(cont);
        }

    }
} 
```

* * *

`{ cont.new_birthdate = Row.DOBI20; }`抛出：

> 无法将类型“字符串”隐式转换为 .....CrmSdk.CRMDateTime

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:54:10.277

刚刚查看了`CRMDateTime`（[http://msdn.microsoft.com/en-us/library/bb928935.aspx](http://msdn.microsoft.com/en-us/library/bb928935.aspx)）的文档

这表明您可以使用`Value`属性 ( [http://msdn.microsoft.com/en-us/library/bb928944.aspx](http://msdn.microsoft.com/en-us/library/bb928944.aspx) )进行设置

所以你可能想尝试：

```
cont.new_birthdate.Value = Row.DOBI20 
```

**编辑**

针对您的评论，请尝试以下操作

```
string ConvertDate(string dateToConvert)
{ 
    dateToConvert= dateToConvert.PadLeft(7, '0');
    int c;
    int.TryParse(dateToConvert.Substring(0,1), out c);  
    c = (c * 100) + 1900;

    int y;
    int.TryParse(dateToConvert.Substring(1,2), out y);  

    return (c+y).ToString() + dateToConvert.Substring(3,4);
} 
```

# android - 在我的应用程序中使用自签名证书

> ID：12688865
> 
> 赞同：2
> 
> 时间：2012-10-02T10:45:14.660
> 
> 标签：android, ios, ssl, ssl-certificate

我有一个移动应用程序可以访问[https://myserver.com/mywebservice](https://myserver.com/mywebservice)上的 Web 服务。

如果我创建了一个自签名证书并将其放在我的服务器上，当移动应用程序访问 Web 服务时，它会看到该证书，但它无法识别它，因为它是自签名的。但是在这种情况下，如果我有一个“中间人”攻击，攻击者可以创建自己的证书，所以应用程序看到了证书，但它再次无法识别它。

**问题：**当您使用来自 goDaddy 的证书时，iOS 或 Android 是否被编程为信任 goDaddy 证书才能工作，因此攻击者使用的假证书被认为是无效的？因此，如果我让应用程序信任我的证书，我可以以同样的方式使用我的自签名证书吗？

另外，我如何知道 iOS 或 Android 信任哪些证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:43:00.753

通常，您的应用程序或操作系统需要信任颁发服务器证书的 CA 才能正常工作。如果它是由预先安装了证书的 CA 颁发的，那么一切正常。如果没有，您需要在操作系统信任存储中安装 CA 或修改您的应用程序以信任它。谁创建了证书并不重要，VeriSign 或 goDaddy 证书并不比您的自签名证书更“特殊”。

至于获取可信证书列表，Android 4.x 及更高版本在 Settings->Security->Trusted Credentials 中列出了这些。对于早期版本，您必须编写一些代码来枚举它们。不知道iOS。

# javascript - Node.js 非阻塞性质

> ID：12688868
> 
> 赞同：4
> 
> 时间：2012-10-02T10:45:32.957
> 
> 标签：javascript, node.js

我是 node.js 的新手，仍然试图理解它背后的哲学。据我所知，node.js 仅在一个进程中运行，而 php 为每个请求打开一个进程\线程。虽然您可以说 Node 对于 i/o 是“非阻塞”的，但它对于请求是阻塞的（请求堆积起来，因为每个新请求都没有新线程）并且理论上如果您编写了一个 node.js 应用程序这并不能快速处理您遇到麻烦的每个请求。

我的问题是 - 我如何判断某个请求的某个处理是否花费了太长时间，以至于它会阻止所有其他请求太长时间并阻碍我的应用程序的性能？

我知道服务器上的所有“繁重”操作（数据库查询、文件系统搜索）都是由回调完成的，因此无法阻止 node.js 。但是，如果所有其他由服务器同步完成以处理请求的操作只需要太长时间怎么办？

例如 - 服务器需要在响应中写入大量 html。那会发生什么？

节点程序员如何知道他是否对某个请求做了太多（以阻塞方式），是经验、直觉还是有关于如何做的明确指南？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T11:05:46.330

关于同步代码和异步代码之间的界限在哪里没有明确的指导方针，更多的是应用程序流程的问题。应该首选异步操作，因为它们允许 Node.js 主进程同时开始处理其他请求。

也就是说，简单地为每个函数使用回调并不是一个解决方案，因为这样一段代码：

```
function sum(a, b, callback){
   var sum = a + b;
   callback(sum);
}

sum(2,3, function(sum){
   console.log(sum);
} 
```

仍然是同步的。为了使其异步[process.nextTick](http://nodejs.org/api/process.html#process_process_nexttick_callback)可以这样使用：

```
function sum(a, b, callback){
   var sum = a + b;
   process.nextTick(function(){
     callback(sum);
   });
}

sum(2,3, function(sum){
   console.log(sum);
} 
```

一般的经验法则是避免同步递归计算、繁重的循环和 IO 操作。

找出请求是否花费太长时间并因此会阻碍性能，因此通常无法定义，因为限制是特定于应用程序的。这些请求是通过在应用程序上运行性能测试来定位的。

# android - 广播接收器作为允许其他人的应用程序和服务向我的应用程序发送数据的方式

> ID：12688869
> 
> 赞同：1
> 
> 时间：2012-10-02T10:45:50.653
> 
> 标签：android, broadcastreceiver, instruments, broadcast

我有一个永远在线的应用程序，它需要从家用医疗仪器接收例如血糖读数。我想邀请其他程序员编写这些应用程序。例如，当血糖读数准备好时，他们应该发送带有“BG”7.23 的广播意图。有没有这种“开放 API”的例子可供学习？发布动作 android:name = "abcClassName" 有什么缺点吗？新的仪器程序员可以将他们自己的字段名添加到 Extras 中吗？

周围有什么例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:00:10.633

你在谈论意图。意图是在应用程序之间传递数据的方式。其他应用程序将启动一个 Intent，您将拥有一个注册到此 Intent 的接收器。

你可以看看这个教程： [http ://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)

# sql - MSSQL：带有硬编码值的 IN 与带有 SQL 查询的 IN

> ID：12688870
> 
> 赞同：0
> 
> 时间：2012-10-02T10:45:55.530
> 
> 标签：sql, sql-server, sql-in

我有以下查询：

```
SELECT c004, mesosafe, CAST(SUBSTRING (c000 ,1 , 5) as int) as sortorder, c001, c000, c002
FROM DE_DATA.dbo.t309
WHERE c001 IS NOT NULL
AND c002 = 1
AND mesocomp = 'EMTD'
AND mesoyear IN (
    SELECT MAX(mesoyear) AS currmesoyear
    FROM DE_DATA.dbo.t001
)
AND CAST(SUBSTRING (c000 ,1 , 5) as int) < 101
ORDER BY c000 ASC; 
```

此查询失败，因为无法转换 的某些值，`c000`因为它们看起来像`008-`而不是`00052-`。在这里`mesoyear`问（mesoyear IN ...）。如果我单独查询这个 SQL 部分，我会得到`1344`结果。

另一方面，此查询有效：

```
SELECT c004, mesosafe, CAST(SUBSTRING (c000 ,1 , 5) as int) as sortorder, c001, c000, c002
FROM DE_DATA.dbo.t309
WHERE c001 IS NOT NULL
AND c002 = 1
AND mesocomp = 'EMTD'
AND mesoyear IN (
    '1344'
)
AND CAST(SUBSTRING (c000 ,1 , 5) as int) < 101
ORDER BY c000 ASC; 
```

那么硬编码值和 SQL 查询有什么区别呢？

**编辑：**

我认为原因是子查询的评估晚于主查询。是真的吗？我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:01:58.920

您假设某个执行顺序，因为只有您认为“正确”的某些行将针对`CAST`操作进行评估。这是一个根本的谬误。SQL 是一种声明性的、面向集合的语言，它不像命令式语言那样承诺任何求值排序。因此，您的整个方法存在缺陷，并且您提出了错误的问题。一些查询执行计划可能有效，有些可能会失败，但那些有效的计划稍后会随着查询选择不同的计划而开始随机失败。

最终你的问题是数据模型，事实上你必须将这个复合`c000`字段分解成子字符串并强制转换以获得 int 值。使用字符串字段存储字符串，使用数字字段存储数字。就那么简单。你试图达到的目标**永远不会奏效**。

另请参见[关于 SQL Server 布尔运算符短路](http://rusanu.com/2009/09/13/on-sql-server-boolean-operator-short-circuit/)和[T-SQL 函数并不暗示特定的执行顺序](http://rusanu.com/2011/08/10/t-sql-functions-do-no-imply-a-certain-order-of-execution/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:32:42.683

通常，MsSql 在其父项之前运行子查询。当内部查询找到第一个无法转换为相同类型和大小的值时，您的查询*可能会*`mesoyear`失败。您是否检查了列是否具有相同的类型`t309.mesoyear`？`t001.mesoyear`

然而，在某些情况下，MsSql 不遵循通常的行为。如果您认为是这种情况，请考虑使用[FORCE ORDER](http://msdn.microsoft.com/en-us/library/ms181714.aspx)查询提示（尽管这种情况最终会再次出现）。

最后但并非最不重要的一点是，如果 CAST 运算符不安全，您可以（应该）在引发运行时错误之前检查该值是否可以转换：

```
-- use
AND (1=1
  AND (ISNUMERIC(SUBSTRING(c000 ,1 , 5) = 1)
  AND (CAST(SUBSTRING (c000 ,1 , 5) as int) < 101)
)
-- instead of
AND CAST(SUBSTRING (c000 ,1 , 5) as int) < 101 
```

# java - 单击按钮时关闭窗口

> ID：12688874
> 
> 赞同：1
> 
> 时间：2012-10-02T10:46:47.900
> 
> 标签：java, swing, awt

你好，

我正在使用 Java Swing，我想在单击按钮时关闭一个窗口。我不知道使用 actionlistener 作为最好的方法，但目前我遇到了编译错误，所以它一定是不正确的。

这是我的代码：

```
 public class assignment2
    {

        public static void main(String[] args){
            MyFrame f = new MyFrame(); //open the inital gui interface
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.setVisible(true); //set it visibile
        }
    }

    //this is the initial gui screen, presenting user with options for which action they would like to take
    //al actions for the gui are commenced here
    class MyFrame extends JFrame{

        public MyFrame(){

            buttonPanel1 p = new buttonPanel1(); // add the buttons for this frame
            add(p);

            setSize(800,600);
            setTitle("Travel Console");
            setLocationRelativeTo(null);
        }
    }

    class buttonPanel1 extends JPanel{
        public buttonPanel1(){
            //create buttons
            JButton addItem = new JButton("Add an Item");
            JButton deleteItem = new JButton("Delete an item");
            JButton listItem = new JButton("List items");
            JButton editItem = new JButton("Edit an item");
            JButton bookFlight = new JButton("Book a flight");
            JButton save = new JButton("Save data");
            JButton load = new JButton("Load data");
            JButton exit = new JButton("Exit");

            //set layout manager for button panel
            setLayout(new GridLayout(8,1,1,5));

            //create buttons
            add(addItem);
            add(deleteItem);
            add(listItem);
            add(editItem);
            add(bookFlight);
            add(load);
            add(save);
            add(exit);

            addItemListener addList = new addItemListener();
            addItem.addActionListener(addList);
            exitListener exitList = new exitListener();
            exit.addActionListener(exitList);
        }

    }

    //listener classes for the inital gui page. each button has its own actionlistener which launches the selected option
    class addItemListener implements ActionListener{
        public void actionPerformed(ActionEvent event){ //launch add item
            addItemFrame addItem = new addItemFrame();
            addItem.setDefaultCloseOperation(addItemFrame.DISPOSE_ON_CLOSE);
            addItem.setVisible(true);
        }

    }
class addItemFrame extends JFrame{
    public addItemFrame(){
        addItemButtonPanel b = new addItemButtonPanel(); // add the buttons for this frame
        add(b);

        setSize(800,500);
        setTitle("Add an Item");
        setLocationRelativeTo(null);
    }
}
//part of addItemFrame class
class addItemButtonPanel extends JPanel{
    public addItemButtonPanel(){
        JLabel selectItem = new JLabel("Select which item you would like to add:");
        JButton newCustomer = new JButton("Customer");
        JButton newflight = new JButton("Flight");
        JButton newMovie = new JButton("Movie");
        JButton goBack = new JButton("Return to main menu");

        setLayout(new GridLayout(5,1,1,5));

        add(selectItem);
        add(newCustomer);
        add(newflight);
        add(newMovie);
        add(goBack);

        goBackListener gbList = new goBackListener();
        goBack.addActionListener(gbList);
    }
}

//listener classes for the addItemFrame
class goBackListener implements ActionListener{
    public void actionPerformed(ActionEvent event){
        addItemFrame.dispose();
    }

} 
```

我遇到的问题是列出的最后一个类`goBackListener`，它实际上只是关闭了当前窗口，因此再次显示主菜单屏幕。我需要一个在类中`addItemFrame`创建的静态引用。`addItemListener`但是将其更改为 static 是无效的修饰符吗？

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T10:52:23.297

试试这个

```
//listener classes for the addItemFrame 
class goBackListener implements ActionListener{
    private addItemFrame frame;
    public goBackListener(addItemFrame frame){
        this.frame= frame;
    }
    public void actionPerformed(ActionEvent event){
        frame.dispose();
    }
} 
```

并将一个实例发送`addItemFrame`到它的构造函数

# java - 通过 Ant 分批运行 Robotium 案例

> ID：12688875
> 
> 赞同：0
> 
> 时间：2012-10-02T10:46:55.160
> 
> 标签：java, android, ant, robotium, gui-testing

基本上，我想要实现的是[这样的，](https://stackoverflow.com/questions/6226026/how-to-run-all-junit-tests-in-a-category-suite-with-ant)但在 Ant 中使用 Robotium。我想使用 Ant 命令单独测试我的包（套件？）。

这样做的原因是因为应用程序的复杂性非常大，以至于当我一次运行所有内容时它会遇到问题，通常由于Robotium 遍历案例时[的内存泄漏而中途终止，以及](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)[某些案例如何影响未来](https://stackoverflow.com/questions/7851351/robotium-in-the-suite-of-tests-each-next-test-is-affected-by-the-previous-test)的案例应用程序某处的状态变化。

当只运行当前包或单独运行每个案例（使用我的 IDE）时，一切都运行良好，所以我想知道这是如何通过 Ant 实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T01:46:56.203

我自己已经弄清楚了问题所在。它实际上非常简单，因为我模仿了 ant 测试的行为。

这个想法是，无论何时`ant test`运行，它都会简单地调用`adb shell`命令并触发检测测试运行器`am instrument`以及其他参数。可以自定义参数以定义要测试的类或包。

`target`解决方案是在执行此操作的`custom_rules.xml`（我使用它`macrodef`以便我可以将其重用于其他目标）上定义一个。

```
 <macrodef name="test-class">
    <attribute name="class"/>

    <sequential>
        <echo level="info">Running tests for @{class}</echo>
        <exec executable="${adb}" failonerror="false">
            <arg line="${adb.device.arg}"/>
            <arg value="shell"/>
            <arg value="am"/>
            <arg value="instrument"/>
            <arg value="-w"/>
            <arg value="-e"/>
            <arg value="class"/>
            <arg value="@{class}"/>
            <arg value="com.example.application/${test.runner}"/>
        </exec>
    </sequential>

</macrodef> 
```

因此，如果您想要一个诸如 test-example 之类的 Ant 命令来测试 .tests.ExampleTest 测试用例，您可以这样定义它：

```
<target name="test-example">
     <test-class class="com.example.application.tests.ExampleTest />
</target> 
```

然后运行它

```
ant clean debug install test-example 
```

要不就

```
ant test-example 
```

哦，这不是 Robotium 独有的，因为 Robotium 实际上是基于 Android 提供的现有测试框架构建的。

# ios - iOS 5/6：首次使用 CoreAudio 后音量变小

> ID：12688883
> 
> 赞同：8
> 
> 时间：2012-10-02T10:48:08.760
> 
> 标签：ios, core-audio, voip, volume

我在一个 VoIP 应用程序上工作。AudioSession 的模式设置为 kAudioSessionMode_VoiceChat。

对于通话，我打开一个子类型为 kAudioUnitSubType_VoiceProcessingIO 的 CoreAudio AudioUnit。一切正常。第一次通话后，我使用 AudioUnitUninitialize() 关闭 AudioUnit 并停用音频会话。

然而，现在似乎音频设备没有正确释放：铃声音量非常低，媒体播放器的音量比平时低。对于后续呼叫，我无法再激活 kAudioUnitSubType_VoiceProcessingIO。它可以使用 kAudioUnitSubType_RemoteIO 创建一个 AudioUnit，但通话的音量非常低（接收器和扬声器）。

这首先发生在 iOS 5 上。对于 iOS 6 上的 iPhone 5，情况更糟（甚至更低的音量）。

有人见过这个吗？我需要做的不仅仅是 AudioUnitUninitialize() 来释放语音处理单元吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T14:34:41.867

我找到了解决方案：我错误地用于`AudioUnitUninitialize()`释放使用`AudioComponentInstanceNew()`. 正确的是使用`AudioComponentInstanceDispose()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T14:04:58.257

是的，您需要在使用 voiceProcessingIO 时处理 audioUnit。由于某种原因，使用 RemoteIO 子类型时没有问题。因此，每当您获得 OSStatus -66635 (kAudioQueueErr_MultipleVoiceProcessors) 时，请检查是否缺少 AudioComponentInstanceDispose() 调用。

# ivy - 如何使用 IVY 管理共享库的依赖关系

> ID：12688885
> 
> 赞同：1
> 
> 时间：2012-10-02T10:48:11.440
> 
> 标签：ivy

我有一个耳朵 -

此 EAR 包含多个 WAR

在这些 WAR 文件中，有一个通用 JAR，它会在每个 WAR 文件中下载。我想将此通用 JAR 文件删除到共享库中。此外，每次我重建我的 WAR 时，我都想要最新版本的 JAR 文件，我在 Dev 和 Websphere min 生产中使用 Tomcat。

现在，我们正在使用 IVY 进行依赖管理。我已经从war文件中删除了公共jar，但我不知道每次重新启动服务器时如何访问最新版本的jar并将其下载到共享库中。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:03:23.400

[http://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependency.html](http://ant.apache.org/ivy/history/latest-milestone/ivyfile/dependency.html)

您需要在 ivy.xml 文件中添加一个依赖项，类似于：

```
<dependency org="com.orgname" name="jarname" rev="latest.release"/> 
```

这是您自己制作的 JAR 文件，还是公开可用的？如果您自己制作，则必须将其发布到系统某处的存储库中。

# jboss5.x - Jboss 会话复制：无法设置集群，集群已禁用

> ID：12688889
> 
> 赞同：0
> 
> 时间：2012-10-02T10:48:22.597
> 
> 标签：jboss5.x, grails-2.0, mod-jk

我正在尝试将集群添加到使用 Jboss 服务器的应用程序中。对于复制会话，我`<distributable/>`在 web.xml 中添加了标签。但是，我收到以下警告，并且会话复制似乎无法正常工作。请建议为 Jboss 处理会话复制的最佳方法。

警告： `Failed to setup clustering, clustering disabled. NoClassDefFoundError: org/jboss/cache/pojo/jmx/PojoCacheJmxWrapperMBean`

服务器：由 mod_jk 实现的 Jboss 5.1 负载平衡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:27:50.490

您是否可能没有使用具有集群相关服务的 JBoss 配置文件？我相信“默认”配置文件没有集群功能。您必须使用“全部”配置文件才能拥有集群功能。

```
JBoss_HOME
   |
   |---> bin
   |---> client
   |...
   |---> server
   |  |---> default   (clustering not enabled)
   |  |---> all  <== (clustering enabled)
   |... 
```

# python - 如何访问数据存储信息（交互式控制台）？

> ID：12688894
> 
> 赞同：2
> 
> 时间：2012-10-02T10:48:48.633
> 
> 标签：python, google-app-engine, google-cloud-datastore

我现在在一个有两台 GAE 服务器的项目中工作。一个用于开发，另一个用于生产。

所以我需要访问数据存储来运行一些查询，因为我需要一些关于我们拥有的实体的高级信息。我在开发服务器上的方式是通过“ URL/_ah/admin ”，在那里我使用交互式控制台在服务器中运行我的查询。

但现实显然是我需要在我的生产服务器中运行该查询，我试图通过“myapp.appspot.com/admin/interactive”以相同的方式访问那里，但我得到一个“找不到页面”，我不能使用“ URL/_ah/admin ”访问。

因此，我正在寻找能够运行该查询的最简单方法，到目前为止，我似乎已经找到了两种可能的方法，我想与您核实一下。

*   首先，我似乎可以通过以下方式激活交互式控制台：

`- url: /admin/.* script: google.appengine.ext.admin.application login: admin`

然后我可以访问 URL“myapp.appspot.com/admin/interactive”。那是对的吗？

*   其次，我还阅读了有关 remote_api 并将 remote_shell 用作服务器的交互式控制台的信息。那会更难吗？你们中有人可以给我链接一个指南吗？

我还没有尝试过任何东西，因为我必须确定我将要做什么，因为这是一个现场项目。

非常感谢，

何塞。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T16:02:46.523

这仅适用于开发服务器。

[您可以在源](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/admin/__init__.py)代码中找到运行它的所有代码，然后将它们用作[自定义管理控制台页面](https://cloud.google.com/appengine/docs/python/config/appconfig#Python_app_yaml_Administration_console_custom_pages)。

例如，在`app.yaml`, 地方

```
admin_console:
  pages:
  - name: Interactive Console
    url: /admin/interactive 
```

对于 URI

```
handlers:
- url: /admin/interactive|/admin/interactive/execute
  script: google.appengine.ext.admin.application
  login: admin 
```

因为交互式页面在执行时依赖于 POST 处理程序。

# php - 如何在 Centos 中安装 mbstring 扩展？

> ID：12688897
> 
> 赞同：2
> 
> 时间：2012-10-02T10:49:14.273
> 
> 标签：php, centos, multibyte

我收到以下致命错误：

> 致命错误：在第 67 行的 /var/www/html/dai/components/com_servicemanager/views/i0602/view.html.php 中调用未定义函数 mb_convert_encoding()

我将文件 CSV 创建为：

```
<?php

$dateTimeNow = ...

$list = $this->get('DataCSV'); 

$filename = 'CSV_' . $dateTimeNow . '.csv';

foreach ($list as $item)
{ 
    $csv .= join("\t", $item)."\r\n"; 
}  

$csv = chr(255) .chr(254) . mb_convert_encoding($csv, "UTF-16LE", "UTF-8");

header("Content-type: application/x-msdownload");
header("Content-disposition: csv; filename=$filename; size=" . strlen($csv));
echo $csv;
exit; 
```

我在 Window 上运行 wamp 就可以了。但我放在服务器上的是 Centos，它不能创建文件 csv。为什么 ？你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T11:09:40.427

原来你`mb_string`缺少这个功能。安装它：

```
$ sudo yum install php-mbstring 
```

这应该可以为您解决问题，因为它会小心安装软件包。

对于未定义的变量，当您启用错误报告时，您也应该在 Windows 上看到相同的通知。

`$csv`在添加更多内容之前进行初始化：

```
$csv = '';
foreach ($list as $item)
{ 
    $csv .= join("\t", $item)."\r\n"; 
} 
```

# sed - SED 提取值

> ID：12688898
> 
> 赞同：1
> 
> 时间：2012-10-02T10:49:18.040
> 
> 标签：sed, grep, gpsd

任何人都可以根据以下文本帮助我 sed 获取时间、纬度和经度的值

```
{"class":"TPV","tag":"MID2","device":"/dev/ttyUSB0","mode":3,"time":"2012-10-02T10:43:21.000Z","ept":0.005,"lat":55.190682291,"lon":25.265912847,"alt":19.149,"epx":58.300,"epy":74.796,"epv":144.575,"track":148.2723,"speed":1.623,"climb":-1.471,"eps":149.59} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:54:18.787

```
$ grep -oP '"lat":\K[\d.]+' file
$ grep -oP '"lon":\K[\d.]+' file
$ grep -oP '"time":"\K[^"]+' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:14:32.993

**使用 egrep 和 sed**

```
<infile egrep -o '"(lat|lon|time)":"?[^,]*' | sed 's/[^:]*://' 
```

输出：

```
"2012-10-02T10:43:21.000Z"
55.190682291
25.265912847 
```

`tr -d '"'`如果您不喜欢双引号，请附加到管道中。

**单独使用 sed**

```
<infile sed -r 's/"(lat|lon|time)":"?([^,"]*)/\n\2\n/g' | sed -n '2~2p' 
```

输出：

```
2012-10-02T10:43:21.000Z
55.190682291
25.265912847 
```

第一个 sed 分隔匹配项，因此它们将在每隔一行上，第二个将它们挑选出来。

**使用 tr 和 grep**

```
<infile tr ',' '\n' | grep 'time\|lon\|lat' 
```

输出：

```
"time":"2012-10-02T10:43:21.000Z"
"lat":55.190682291
"lon":25.265912847 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:02:42.247

我会做（作为 sed 脚本）：

```
#!/bin/sed -f

h;G;G

s/[^\n]*"lat"\s*:\s*\([0-9.]*\)[^\n]*/\1/
s/[^\n]*"lon"\s*:\s*\([0-9.]*\)[^\n]*/\1/
s/\n[^\n]*"time"\s*:\s*"\([^"]*\)".*$/\
\1/ 
```

第一行三个命令 ( `h;G;G`) 将该行复制两次。它通过使用“h”命令将输入​​行复制到辅助缓冲区（称为保持空间）中，然后使用“G”命令将此保持空间的内容附加到模式空间（即工作缓冲区）中来做到这一点，两次。现在我们有该行的三个副本。

为简单起见，为了更通用，有三个单独的命令来提取数据，但格式类似：

1.  跳过一些字符，直到我们找到我们的密钥。请注意，我们必须在前两个命令中跳过不是换行符 ( `[^\n]*`) 的字符，否则它们会由于其贪婪行为而影响它们下面的行（即，如果在找到之前尽可能多地跳过字符`"lat"`，您将跳过前两行，因为第三行也包含`"lat"`)。在最后一个命令中，您可以跳过任何字符 ( `.*`)，但您必须首先跳过一个换行符以防止它与前面的行匹配。
2.  跳过钥匙
3.  跳过零个或多个空白字符 ( `\s*`)
4.  跳过冒号
5.  跳过更多可选的空白字符
6.  捕获数据。捕获由反斜杠括号指定（即the`\(`和被称为，第三个，依此类推直到）。在前两个命令中，我们匹配一系列数字或句点 ( )。在最后一个命令中，我们捕获任何不是双引号 ( ) 的字符，但我们也在捕获组之后的一个双引号之前跳过双引号（即，跳过开始和结束双引号）。`\)``\1``\2``\3``\9``[0-9.]*``[^"]*"`
7.  跳过更多字符。我们尽可能多地跳过不是换行符的字符，因此我们有效地跳到了行尾。

最后，在每个命令中，我们将匹配项替换为捕获结果。在最后一个命令中，由于我们匹配并因此跳过分隔第二行和第三行的换行符，因此我们必须将其包含在替换中。要包含它，我们必须在其后添加一个反斜杠和一个实际的换行符。这就是为什么替换被分成两行的原因。

希望这会有所帮助=)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T12:02:52.360

这是相当微不足道的`GNU awk`：

```
awk -F, '{ for (i=1; i<=NF; i++) if ($i ~ /time|lat|lon/) { match($i, /^\"([^\"]+)\":\"?([^\"]+)\"?/, array); printf "%s: %s\n", array[1], array[2] } }' file.txt 
```

结果：

```
time: 2012-10-02T10:43:21.000Z
lat: 55.190682291
lon: 25.265912847 
```

# linux - 这是关于具有一个源和多个目标的 Linux 软链接 :)

> ID：12688906
> 
> 赞同：1
> 
> 时间：2012-10-02T10:49:36.393
> 
> 标签：linux, ubuntu, ubuntu-12.04

假设我们在不同位置有多个不同版本的同一文件夹，如下所示：

*   `/in/some/location/version1`
*   `/different/path/version2`
*   `/third/place/version3`

它们的每个版本都包含`callerFile`，这是一个预编译的可执行文件，我们无法控制其工作功能。这`callerFile`将创建并编辑一个名为`cache`

*   `/some/fourth/destination/cache`

所以我们在每个版本的设置之间都有矛盾，所以我想做的是将 转换为`/some/fourth/destination/cache`具有 3 个不同目的地的链接

*   `/some/fourth/destination/cache`-->`/in/some/location/version1/cache`
*   `/some/fourth/destination/cache`-->`/different/path/version2/cache`
*   `/some/fourth/destination/cache`-->`/third/place/version3/cache`

例如：

*   如果`/in/some/location/version1/callerFile`调用`/some/fourth/destination/cache`它应该重定向到`/in/some/location/version1/cache`
*   如果`/different/path/version2/callerFile`调用`/some/fourth/destination/cache`它应该重定向到`/different/path/version2/cache`
*   如果`/third/place/version3/callerFile`调用`/some/fourth/destination/cache`它应该重定向到`/third/place/version3/cache`

那么，如何在 Ubuntu 12.04 64 位操作系统上执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:03:33.007

假设您无法控制 callerFile 实际执行的操作，我的意思是它执行所需的操作并且始终相同，因此结论是您需要修改它的环境。这将是一个相当高级的技巧，需要对 Linux 内核和一般的 Unix 编程有深入的经验，你应该考虑一下是否值得。它还需要在您的 callerFile 二进制文件所在的机器上具有 root 权限。

我建议的解决方案是创建一个可执行文件（或调用 exec() 系列函数之一的脚本），它将基于“mount -o bind”或 unshare（ ) 系统调用。

就像说的那样，玩所谓的“执行上下文”是相当高级的把戏。从理论上讲，您也可以尝试一些类似 autofs 的解决方案，但是您最终可能会得到相同的结果，并且 bindmount/unshare 可能比某些 FS 检测守护程序更有效。出于同样的原因，我不建议深入 FUSE。并且玩一些带有符号链接的过于复杂的游戏可能也不是办法。

[http://www.kernel.org/doc/Documentation/unshare.txt](http://www.kernel.org/doc/Documentation/unshare.txt)

注意：无论“callerFile”二进制文件做什么，我很确定它不会检查自己的文件名，这使得可以用中间的其他东西替换它，这将在“callerFileRenamed”上执行 exec()。

据我了解，基本上您想要的是使用相同的活动获得不同的结果，以活动本身外部的某些条件来区分，例如，根据用户的 UID，在同一目录中为“ls”返回不同的列表谁发出“ls”命令，而不修改一些 ./ls 程序二进制文件。

# jquery - jQuery 选择器匹配部分（结束）

> ID：12688907
> 
> 赞同：0
> 
> 时间：2012-10-02T10:49:44.577
> 
> 标签：jquery, jquery-selectors

我正在尝试查找名称以`type`. 实际名称将是`Ntype`N 所在的位置`0-9`ie `0type`。

如何轻松选择名称以 type 结尾的正确输入？

```
$(this).find("input[name='type']").val() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:50:32.580

利用`$=`

```
$(this).find("input[name$='type']").val() 
```

* * *

`$=`
`^=`以
`*=`包含 结尾

要记住这种语法，考虑正则表达式*行锚*和*量词可能会很有用*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:50:54.967

这应该做你想要的：

```
$(this).find("input[name$='type']").val(); 
```

此页面可能对将来的参考有用： http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T10:51:09.320

```
$(this).find("input[name$='type']").val() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:51:33.123

你可以这样做

```
$(this).find("input[name$='type']").val() 
```

# objective-c - 输入字符串在静态方法中设置后为空，为什么？

> ID：12688918
> 
> 赞同：1
> 
> 时间：2012-10-02T10:50:42.663
> 
> 标签：objective-c, cocoa, nsstring, static-methods

我不确定在我的特定情况下如何管理内存......

我有两种方法：

```
+(NSMutableDictionary *)loadPlist: (NSString*) name
                     andErrorDesc: (NSString*) errorDesc
                        andFormat: (NSPropertyListFormat*) format
                     andplistPath: (NSMutableString*) plistPath
{    
    NSString * destPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];

    destPath = [destPath stringByAppendingPathComponent:
                 [NSString stringWithFormat:@"%@.plist", name]];

    if (![[NSFileManager defaultManager] fileExistsAtPath:destPath])
    {
        [[NSFileManager defaultManager] copyItemAtPath:[[NSBundle mainBundle] pathForResource:name ofType:@"plist"] toPath:destPath error:nil];
    }

    plistPath = [NSMutableString stringWithString:[destPath copy]];

    NSData * plistXML =
    [[NSFileManager defaultManager] contentsAtPath:plistPath];

    NSLog(@"AFTER plistPath: \n%@",plistPath);

    return
    (NSMutableDictionary *)[NSPropertyListSerialization
                            propertyListFromData:plistXML
                            mutabilityOption:NSPropertyListMutableContainersAndLeaves
                            format:format
                            errorDescription:&errorDesc];
}

+(bool)writeToCache:(NSString*) data andField: (NSString*) field
{
    NSString * errorDesc = nil;
    NSPropertyListFormat format;
    NSMutableString * plistPath;
    NSMutableDictionary * temp = [BPUtils loadPlist:@"cache" andErrorDesc:errorDesc andFormat:&format andplistPath:plistPath];

    if (!temp)
    {
        NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
        return false;
    }

    NSMutableArray * arr = [temp objectForKey:field];
    [arr addObject:data];

    NSLog(@"path: %@",plistPath);

    // Write to plist
    bool res = [temp writeToFile:plistPath atomically:YES];

    NSLog(@"RES: %d", res);

    return true;
} 
```

问题是在“plistPath”中发送到上述方法的底部方法在上述方法设置后检索了一个空 plistPath。为什么以及如何解决这个问题？

```
NSLog(@"path: %@",plistPath); 
```

在底部方法中显示null，为什么？

**我使用 ARC。**还设置了“destPath”并显示了正确的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:10:12.680

我相信你在这里可能会有点困惑。

您正在`plistPath`底部方法中创建。然后你`plistPath`进入

```
 [BPUtils loadPlist:@"cache" andErrorDesc:errorDesc andFormat:&format andplistPath:plistPath]; 
```

但是`plistPath`是`NULL`

```
 NSMutableString * plistPath; // Is NULL 
```

但是一旦它在本地被通过就`plistPath`接管了。

```
+(NSMutableDictionary *)loadPlist: (NSString*) name
                 andErrorDesc: (NSString*) errorDesc
                    andFormat: (NSPropertyListFormat*) format
                 andplistPath: (NSMutableString*) plistPath // Notice the local plistPath variable. This is the one you are playing with in this method. 
```

此时您正在设置`plistPath`但请记住它仍然只是一个局部变量而不是实例变量。所以按钮方法永远不会知道它被设置了，就按钮方法而言它仍然是`NULL`

```
plistPath = [NSMutableString stringWithString:[destPath copy]]; 
```

因此，无论您在`plistPath`top 方法中设置什么，都不会传递回 bottom 方法，`plistPath`当方法执行`return`. 所以`plistPath`底部方法将保留`NULL`

所以试试**这个**

```
 static NSMutableString *yourNewStringforPlistPath; //This will be NULL

 +(NSMutableDictionary *)loadPlist: (NSString*) name
                 andErrorDesc: (NSString*) errorDesc
                    andFormat: (NSPropertyListFormat*) format
                 andplistPath: (NSMutableString*) plistPath
 {    
 NSString * destPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];

 destPath = [destPath stringByAppendingPathComponent:
             [NSString stringWithFormat:@"%@.plist", name]];

 if (![[NSFileManager defaultManager] fileExistsAtPath:destPath])
 {
     [[NSFileManager defaultManager] copyItemAtPath:[[NSBundle mainBundle] pathForResource:name ofType:@"plist"] toPath:destPath error:nil];
 }

 yourNewStringforPlistPath = [NSMutableString stringWithString:[destPath copy]];

 NSData * plistXML =
 [[NSFileManager defaultManager] contentsAtPath:yourNewStringforPlistPath];

 NSLog(@"AFTER plistPath: \n%@",yourNewStringforPlistPath);

 return
 (NSMutableDictionary *)[NSPropertyListSerialization
                        propertyListFromData:plistXML
                        mutabilityOption:NSPropertyListMutableContainersAndLeaves
                        format:format
                        errorDescription:&errorDesc];
  }

  +(bool)writeToCache:(NSString*) data andField: (NSString*) field
  {
NSString * errorDesc = nil;
NSPropertyListFormat format;
NSMutableDictionary * temp = [BPUtils loadPlist:@"cache" andErrorDesc:errorDesc andFormat:&format andplistPath:[NSNull null]]; // As this is already NULL you don't really need to pass yourNewStringforPlistPath in unless in the future this value can be set before this.

 if (!temp)
 {
    NSLog(@"Error reading plist: %@, format: %d", errorDesc, format);
    return false;
 }

  NSMutableArray * arr = [temp objectForKey:field];
 [arr addObject:data];

 NSLog(@"path: %@",yourNewStringforPlistPath);

 // Write to plist
 bool res = [temp writeToFile:yourNewStringforPlistPath atomically:YES];

 NSLog(@"RES: %d", res);

 return true;
 } 
```

# html - 我可以让我的 CSS 依赖于不存在的类吗？

> ID：12688922
> 
> 赞同：1
> 
> 时间：2012-10-02T10:51:06.777
> 
> 标签：html, css

我有以下CSS：

```
a.button:hover,
.mini-menu > li > a:hover {
    xxx
    } 
```

有没有一种方法可以使这种悬停效果仅在按钮没有“禁用”类的情况下才对按钮起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:53:50.190

您可以使用[否定伪类](http://www.w3.org/TR/css3-selectors/#negation)：`:not(selector)`

```
a:not(.disabled).button:hover,
.mini-menu > li > a:not(.disabled):hover { ... } 
```

（需要[支持的浏览器](http://caniuse.com/#search=%3anot)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:54:22.517

您可以使用 CSS3`:not()`选择器，但当然这具有跨浏览器兼容性实现：

```
a.button:not(.disabled):hover,
.mini-menu > li > a:hover {
    xxx
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T10:55:16.757

你可以通过 `:not(.disabled)`选择器来完成。

为所有没有`.disabled`类的元素设置 css

**:`not(selector)`**选择器匹配不是指定元素/选择器的每个元素。

![在此处输入图像描述](../Images/0892ab8d09e2193eadd320758737daff.png)

**注意**：IE8 及更早版本不支持

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T11:00:30.873

除了`:not`这里建议的选择器之外，您还可以简单地为`a.button`with`disabled`类覆盖悬停类（如果您支持 IE7 和 8，可能会很有用）：

```
a.button:hover,
.mini-menu > li > a:hover {
    xxx
}

a.button.disabled:hover {
   //css to set non-hover style
} 
```

[简单的演示](http://jsfiddle.net/BchT2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T10:54:47.087

你可以使用`:not(.disabled)`选择器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T11:07:07.823

此外`:not()`- 另一种方法是利用 CSS 特定性并使用更高得分的“禁用”类重置样式。

```
a.button.disabled:hover,
.disabled.mini-menu > li > a:hover {
   xxx- disabled properties that won't be over ridden by below.
}

a.button:hover,
.mini-menu > li > a:hover {
    xxx
} 
```

工作演示 [http://jsfiddle.net/bKyr3/](http://jsfiddle.net/bKyr3/)

# wpf - 如何创建从 TextBox 派生的对象？

> ID：12688924
> 
> 赞同：0
> 
> 时间：2012-10-02T10:51:23.863
> 
> 标签：wpf

我试图创建从 TextBox 派生的新类对象 - 如果 TextBox 中有字符 - 新对象将显示一些按钮，按下此按钮将能够删除此 TextBox 中的字符

我如何从 WPF 中的控制中生成导数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:03:26.673

您可以使用文本框和按钮创建一个新的 UserControl。您将字符串属性绑定到文本框和按钮的可见性属性。然后您创建一个转换器，将该字符串转换为可见性。现在您将按钮的命令属性绑定到设置字符串属性 = string.Empty 的命令。

一些提示：

如何使用转换器：

```
<UserControl.Resources>
    <local:StringToVisibilityConverter x:Key="STV"></local:StringToVisibilityConverter>
</UserControl.Resources>
<Button Visibility="{Binding Path=MyText, Converter={StaticResource ResourceKey=STV}}" /> 
```

您的虚拟机可能如下所示：

```
public class MainViewModel:ViewModelBase
{
    private string _mytext;
    public string MyText
    {
        get
        {
            return _mytext;
        }
        set
        {
            _mytext = value;
            OnPropertyChanged("MyText");
        }
    }

    private RelayCommand<object> _clearTextCommand;
    public ICommand ClearTextCommand
    {
        get
        {
            if (_clearTextCommand == null)
            {
                _clearTextCommand = new RelayCommand<object>(o => ClearText(), o => CanClearText());
            }
            return _clearTextCommand;
        }
    }

    private void ClearText()
    {
        MyText = string.Empty;
    }

    private bool CanClearText()
    {
        return true;
    }
} 
```

# nginx - 什么是 csf 关于 synflood 的最佳配置，但网络响应仍然很快

> ID：12688927
> 
> 赞同：1
> 
> 时间：2012-10-02T10:51:51.370
> 
> 标签：nginx, firewall

我的服务器每天 4-5 次随机停机，导致负载非常快..

我已经安装了 csf 并且一些配置服务器现在稳定了.. 加载大约 5。

但最大的用途是：真正的用户很难通过 IE 浏览器访问网站，您可以在 xaluan.com 进行测试，它也会超时一段时间。

流动是在 csf 中使用的配置：

```
SYNFLOOD = "1"
SYNFLOOD_RATE = "100/s"
SYNFLOOD_BURST = "10"

CONNLIMIT = "80;30"
PORTFLOOD = "80;tcp;70;5"
CT_LIMIT = "29" 
```

其他配置可能与默认相同

我用这个配置玩了一个星期，但仍然不好..

如果将速率提高到 SYNFLOOD_RATE = "140/s" 或更多.. 网站响应非常快.. 只是服务器负载增加如此之快的不良副作用，正常 20 并且可能在高峰时间达到几百..

我需要的是响应时间快但负载仍然很低..请帮忙

谢谢

ps：服务器运行nginx前端，apache，mysql，php，首页有大约70个元素，在第一时间访问时会缓存在浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T09:18:06.500

> 我的服务器每天 4-5 次随机停机，导致负载非常快

这可能有很多原因。从命令行尝试 nice top -c -d 2 并检查导致负载过大的进程。你不能简单地责怪 csf。

如果 DB 磁盘 I/O 很高，负载可能会变高。最好在服务器上安装mytop DB监控工具，看看是不是这个原因。

要安装 mytop，请使用此链接[http://bloke.org/linux/installing-mytop-on-cpanel/](http://bloke.org/linux/installing-mytop-on-cpanel/)

我希望这将帮助您监控数据库负载使用情况

# java - 线程中断不起作用

> ID：12688928
> 
> 赞同：1
> 
> 时间：2012-10-02T10:51:52.507
> 
> 标签：java, multithreading, interrupt

这是我第一次尝试创建自己的线程池。该程序有效，除非我尝试停止所有线程。我试图中断所有线程，但由于某种原因它永远不会到达这个段：

if (this.currentThread().isInterrupted())

这是输出：

添加了所有任务
线程 0 收到任务 5
这是任务 #5
线程 2 收到任务 4
这是任务 #4
线程 1 收到任务 3
这是任务 #3
全部完成，线程池关闭
任务 5 现在正在由线程 0 执行
任务2 由线程 0 接收
这是任务 #2
任务 3 现在正在由线程 1 执行
任务 1 由线程 1 接收
这是任务 #1
任务 4 现在正在由线程 2 执行
没有可用的任务...
任务 1 现在正在由线程执行1
没有可用的任务...
任务 2 现在由线程执行 0
没有可用的任务...

该程序应该在调用 stopPool() 方法后停止生成输出。

谁能告诉我这里出了什么问题？

```
public class CustomThread extends Thread
{
            private int id;
            private Task task;
            private ThreadPool threadpool;

            public CustomThread(int id, Task task, ThreadPool threadpool)
            {
                this.id = id;
                this.task = task;
                this.threadpool = threadpool;
            }

            public synchronized void run()
            {
                while(true)
                {
                    if (this.currentThread().isInterrupted())
                    {
                        System.out.println("Thread " + id + " is halted");
                    }
                    else
                    {
                        if (threadpool.getTaskQueue().isEmpty())
                        {
                            System.out.println("No available tasks...");
                            try 
                            {
                                this.wait();
                            } 
                            catch (InterruptedException e) 
                            {
                                e.printStackTrace();
                            }
                        }
                        else
                        {   
                            task = threadpool.retrieveTask();
                            System.out.println("Task " + task.getID() + " recieved by thread " + id);
                            task.run();
                            task.setState(true);
                            System.out.println("Task " + task.getID() + " now being executed by thread " + id);
                        }
                    }
                }
            }

            public synchronized void wakeUp()
            {
                this.notify();
            }

            public int getThreadID()
            {
                return id;
            }

        }

    import java.util.List;
    import java.util.ArrayList;
    import java.util.Stack;
    import java.util.concurrent.BlockingQueue;
    import java.util.concurrent.LinkedBlockingQueue;

    public class ThreadPool
    {
        private List<CustomThread> thread_list;
        private Stack<Task> task_queue;

        public ThreadPool(int threads)
        {
            thread_list = new ArrayList<CustomThread>();
            task_queue = new Stack<Task>();
            for(int i=0; i<threads; i++)
            {
                CustomThread thread = new CustomThread(i, null, this);
                thread_list.add(thread);
                thread.start();
            }
        }

        //Must use notify() to wake up an idle thread
        public synchronized void add(Task task)
        {
            task_queue.push(task);
            try
            {
                for(CustomThread t : thread_list)
                {
                    t.wakeUp();
                }

            }
            catch (Exception e)
            {
                e.printStackTrace();
            }

        }

        public synchronized void stopPool()
        {
            for(CustomThread t : thread_list)
            {
                t.currentThread().interrupt();
            }

        }

        public synchronized Stack getTaskQueue()
        {
            return task_queue;
        }

        public synchronized Task retrieveTask()
        {
            return task_queue.pop();
        }
    }

public class Task implements Runnable
{
    private int id;
    private boolean finished = false;
    public Task(int id)
    {
        this.id = id;
    }

    public synchronized void run()
    {
            System.out.println("This is task #" + id);

            try
            {
                Thread.sleep(1000);
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
    }

    public int getID()
    {
        return id;
    }

    public void setState(Boolean finished)
    {
        this.finished = finished;
    }

    public boolean getState()
    {
        return finished;
    }
}

public class Init 
{
    public static void main(String[] args)
    {
        ThreadPool threadpool = new ThreadPool(3);
        threadpool.add(new Task(1));
        threadpool.add(new Task(2));
        threadpool.add(new Task(3));
        threadpool.add(new Task(4));
        threadpool.add(new Task(5));
        System.out.println("All tasks added");
        {
            try
            {
                Thread.sleep(1000);
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }
        threadpool.stopPool();
        System.out.println("All done, threadpool closed");
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:54:30.033

你的代码

```
t.currentThread().interrupt(); 
```

会反复中断当前线程，而不是线程`t`尝试

```
t.interrupt(); 
```

顺便说一句：我希望`wait()`抛出一个异常，您记录并继续，就好像它没有发生一样。

* * *

为了您的兴趣，这是您可以使用 ExecutorService 编写它的方式。

```
ExecutorService service = Executors.newFixedThreadPool(3);
for (int i = 1; i <= 5; i++) {
    final int id = i;
    service.submit(new Callable<Void>() {
        @Override
        public Void call() throws Exception {
            System.out.println("This is task #" + id);
            Thread.sleep(1000);
            return null;
        }
    });
}
System.out.println("All tasks added");
service.shutdown();
service.awaitTermination(1, TimeUnit.HOURS);
System.out.println("All done, threadpool closed"); 
```

印刷

```
This is task #1
This is task #3
This is task #2
All tasks added
This is task #4
This is task #5
All done, threadpool closed 
```

# c - 将 char 变量类型转换为 unsigned int

> ID：12688929
> 
> 赞同：2
> 
> 时间：2012-10-02T10:51:57.680
> 
> 标签：c, embedded, avr

我正在尝试将 char 变量转换为 Unsigned int。我的代码是

```
char spi(char data) 
{ 
    //Start transmision 
    SPDR = data; 
    //Wait for transmision complete 
    while(!(SPSR & 0x80)); 
    return SPDR; 
} 

unsigned int ReadAd(void) 
{ 
    unsigned int data; 

    ChipSelectAd(1); 
    //Read data 
    CheckStatus();                                            
    spi(0x58);                                                
    data = (spi(0xFF)<< 8);    
    data |= spi(0xFF);         

    return data; 
} 
```

实际上我的问题是 spi 函数返回一个 8 位字符，所以上面的代码将 char 变量向左移动 8 位，然后将其分配给一个 16 位变量，结果将始终为 0。为了将数据实际向左移动，我需要首先将它们类型转换为 16 位类型变量。我试过这样

```
char spi(char data) 
{ 
    //Start transmision 
    SPDR = data; 
    //Wait for transmision complete 
    while(!(SPSR & 0x80)); 
    return SPDR; 
} 

unsigned int ReadAd(void) 
{ 
    unsigned int data; 

    ChipSelectAd(1); 
    //Read data 
    CheckStatus();                                            
    spi(0x58);                                                
    data = (unsigned int)((unsigned char)spi(0xFF)<< 8);    
    data |= (unsigned int)((unsigned char)spi(0xFF));         

    return data; 
} 

void CheckStatus(void)
{
//char adcStatus;
adcStatus = 0xFF;                                           
//Read status
while(!(adcStatus & 0x80))
{
    spi(0x40);
    adcStatus = spi(0xFF);
 }
}

void ChipSelectAd(char s)
{

if(s == 1){
    PORTB.3 = 0;    //Switch on ADC
    //while(PINB.3);  //Wait for chip select pin
}
    else
        PORTB.3 = 1;    //Switch off ADC
 } 
```

它不工作。请建议我必须使用哪个功能。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T11:25:57.100

你的问题不是演员表。由于整体提升规则，没有它们它的工作原理相同。

```
#include <stdio.h>

char spi ( char data )
{
  char SPDR = data;
  return SPDR;
}

unsigned int ReadAd ( void )
{
  unsigned int data;

  data = spi ( 0x81 ) << 8;
  data |= spi ( 0x42 );

  return data;
}

int main ( void )
{
  printf ( "Result %x\n", ReadAd() );
  return 0;
} 
```

这`Result ffff8142`在 char 是有符号类型的系统上输出。要解决真正的问题，请尝试将 spi() 调用的值分配给变量，然后打印它们的值。还请向我们展示 的声明/定义`SPDR`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:53:13.983

1) 在嵌入式系统中：摆脱标准整数类型，特别是默认的 char 类型。如果您有现代编译器，请使用 stdint.h 中的 uint8_t、uint16_t 等。如果你有一个古老的编译器，那么`typedef unsigned char uint8_t`等等。如果您没有在嵌入式系统中使用已知大小的无符号类型，那么您就是在询问错误错误错误。

2）学习和理解[整数提升规则](https://www.securecoding.cert.org/confluence/display/seccode/INT02-C.+Understand+integer+conversion+rules)。令人恐惧的是，有多少程序员不了解或不了解它们。

整理好上述两个基础知识后，您的代码应该类似于以下代码：

（我冒昧地修复了各种可疑的、可能的错误和蹩脚的、不一致的缩进。加上一些风格挑剔。）

```
#include <stdint.h>

uint8_t spi (uint8_t data) 
{ 
  SPDR = data; //Start transmision 

  while((SPSR & 0x80) > 0) //Wait for transmision complete 
    ; 

  return SPDR; 
} 

uint16_t ReadAd(void) 
{ 
  uint16_t data; 

  ChipSelectAd(true); 

  CheckStatus(); //Read data 
  (void) spi(0x58);                                                

  data  = ((uint16_t)spi(0xFF)) << 8;
  data |=  (uint16_t)spi(0xFF);

  return data; 
} 

void CheckStatus(void)
{
  uint8_t adcStatus;

  do
  {
    (void) spi(0x40);
    adcStatus = spi(0xFF);
  } while((adcStatus & 0x80) > 0);
}

void ChipSelectAd(bool on)
{
  if(on)
  {
    PORTB.3 = 0;    //Switch on ADC
  }
  else
  {
    PORTB.3 = 1;    //Switch off ADC
  }
} 
```

# php - 什么是 PHP 中用于调整非常大的图像（3000x6000px）的最佳（性能最快）代码？

> ID：12688930
> 
> 赞同：1
> 
> 时间：2012-10-02T10:51:58.740
> 
> 标签：php, image, image-processing, jpeg, image-resizing

我找到了许多关于如何调整图像大小的示例，但是我很好奇 PHP 中最好（最快）的代码是什么，以及非常大的图像（超过 1000 像素）。

我写了这个简单的例子......有人知道更好的实现吗？

```
<?php

    $filename = 'myimage.jpg';
    $image = imagecreatefromjpeg($filename);

    $scale = 50; // resize the image to 50% of its original width and height

    $width = imagesx($image);
    $width_scaled = $width * $scale/100;
    $height = imagesy($image);
    $height_scaled = $height * $scale/100;

    $image_scaled = imagecreatetruecolor($width_scaled, $height_scaled);
    imagecopyresampled($image_scaled, $image, 0, 0, 0, 0, $width_scaled, $height_scaled, $width, $height);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:55:05.213

我会使用[imagecopyresized](http://php.net/manual/en/function.imagecopyresized.php)。我认为它更快，因为您跳过了一步。但是，实际调整大小可能是最耗时的，因此除非您找到更快的单独库/插件，否则您不会获得太多收益。

# python - 如何在我的脚本中消除 Python 警告？

> ID：12688934
> 
> 赞同：1
> 
> 时间：2012-10-02T10:52:15.993
> 
> 标签：python, grep, pid, sigkill

我想要一个`grep`用于特定进程的 Python 脚本，提取它的 PID，然后杀死它。这是我正在使用的：

```
def main():
    # Shutdown Tomcat
    shutdownCmd = "sh ${TOMCAT_HOME}/bin/shutdown.sh"
    subprocess.call([shutdownCmd], shell=True)

    # Check for PID
    grepCmd = "ps -aef | grep tomcat"
    grepResults = subprocess.check_output([grepCmd], shell=True)

    # Get PID(s) and kill it/them.
    for i in range(1, len(grepResults), 9):
    pid = grepResults[i]
    killPidCmd = "kill -9 " + pid
    subprocess.call([killPidCmd], shell=True)

    # Exit.
    sys.exit() 
```

但是，尽管它确实关闭了我的进程（Apache Tomcat），但每当我运行它时，我都会在终端中收到以下“警告”：

```
kill -l [exitstatus]
/bin/sh: 1: kill: Operation not permitted

/bin/sh: 1: kill: Illegal number: h
/bin/sh: 1: kill: Illegal number: v
/bin/sh: 1: kill: Illegal number: l
/bin/sh: 1: kill: Operation not permitted

/bin/sh: 1: kill: Illegal number: .
/bin/sh: 1: kill: Illegal number: i
/bin/sh: 1: kill: Illegal number: D
/bin/sh: 1: kill: Illegal number: l
/bin/sh: 1: kill: Illegal number: .
/bin/sh: 1: kill: Illegal number: i
/bin/sh: 1: kill: Illegal number: /
/bin/sh: 1: kill: Illegal number: s
/bin/sh: 1: kill: Illegal number: r
/bin/sh: 1: kill: Illegal number: /
/bin/sh: 1: kill: Illegal number: .
/bin/sh: 1: kill: Illegal number: c
/bin/sh: 1: kill: Illegal number: t
/bin/sh: 1: kill: Illegal number: c
/bin/sh: 1: kill: Illegal number: i
/bin/sh: 1: kill: Illegal number: r
/bin/sh: 1: kill: Illegal number: a
/bin/sh: 1: kill: Illegal number: l
/bin/sh: 1: kill: Illegal number: a
/bin/sh: 1: kill: Illegal number: g
/bin/sh: 1: kill: Illegal number: j
/bin/sh: 1: kill: Illegal number: s
/bin/sh: 1: kill: Illegal number: g
/bin/sh: 1: kill: Illegal number: 
/bin/sh: 1: kill: Illegal number: X
/bin/sh: 1: kill: Illegal number: 
/bin/sh: 1: kill: Usage: kill [-s sigspec | -signum | -sigspec] [pid | job]... or
kill -l [exitstatus]
/bin/sh: 1: kill: Illegal number: n
/bin/sh: 1: kill: Illegal number: i
/bin/sh: 1: kill: Illegal number: /
/bin/sh: 1: kill: Illegal number: s
/bin/sh: 1: kill: Illegal number: r
/bin/sh: 1: kill: Illegal number: /
/bin/sh: 1: kill: Illegal number: .
/bin/sh: 1: kill: Illegal number: c
/bin/sh: 1: kill: Illegal number: t
/bin/sh: 1: kill: Illegal number: e
/bin/sh: 1: kill: Illegal number: 
/bin/sh: 1: kill: Illegal number: h
/bin/sh: 1: kill: Illegal number: h
/bin/sh: 1: kill: Illegal number: n
/bin/sh: 1: kill: Illegal number: /
/bin/sh: 1: kill: Illegal number: o
/bin/sh: 1: kill: Illegal number: .
/bin/sh: 1: kill: Illegal number: e
/bin/sh: 1: kill: Operation not permitted

/bin/sh: 1: kill: Illegal number: n
/bin/sh: 1: kill: Illegal number: a
/bin/sh: 1: kill: Illegal number: o
/bin/sh: 1: kill: Illegal number: e
/bin/sh: 1: kill: Illegal number: x
/bin/sh: 1: kill: Illegal number: c
/bin/sh: 1: kill: Illegal number: t
/bin/sh: 1: kill: Illegal number: a
/bin/sh: 1: kill: Illegal number: m
/bin/sh: 1: kill: Operation not permitted

/bin/sh: 1: kill: Illegal number: m
/bin/sh: 1: kill: Illegal number: .
/bin/sh: 1: kill: Illegal number: t
/bin/sh: 1: kill: Illegal number: s
/bin/sh: 1: kill: Illegal number: z
/bin/sh: 1: kill: Illegal number: a
/bin/sh: 1: kill: Illegal number: v
/bin/sh: 1: kill: Illegal number: t
Killed 
```

任何 Python meastros 都可以查看脚本并弄清楚为什么我会收到所有这些`/bin/sh: 1: kill: Illegal number: <whatever>`警告/错误/输出吗？关于如何修复它们的任何建议？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:02:21.140

```
for i in range(1, len(grepResults), 9):
    pid = grepResults[i]
    killPidCmd = "kill -9 " + pid
    subprocess.call([killPidCmd], shell=True) 
```

看起来您的 grepResults 是一些普通字符串，并且您正在从中选择单个字符。这就是为什么`kill`抱怨你给它的奇怪数字（不是数字而是字符）。检查此命令的输出，然后您应该看到出了什么问题：

```
grepResults = subprocess.check_output([grepCmd], shell=True) 
```

插入类似的东西并检查是否`pid`适合您。还要确保条件 ( `if 'grep' in line`) 适合且不匹配其他流程。也许您必须在此处添加更多 if 子句。

```
import subprocess
grepCmd = "ps -aef | grep tomcat"
grepResults = subprocess.check_output([grepCmd], shell=True)
for line in grepResults.strip().split('\n'):
    if 'grep' in line: 
        continue
    pid = line.split()[1]
else:
    pid = None
# print pid 
```

如果`pid`是`None`，它应该退出并出错，因为没有找到正在运行的服务。如果你想杀死多个`pid`，当然你必须创建一些列表，或者直接杀死这个循环中的 pid。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:58:13.773

您可以尝试重定向`stderr`到`/dev/null`with`./script.py 2>/dev/null`以消除这些消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T11:30:04.203

问题是您将 grep 输出视为一个列表，而它实际上是一个字符串.. 更改您的行：

```
killPidCmd = "kill -9 " + pid 
```

至：

```
killPidCmd = "echo kill -9 " + pid 
```

..看看输出，问题就清楚了。

稍微调整的脚本版本，它不使用`shell=True`（很少需要，并导致 shell 转义问题），相当于 Python 中的 grep，

```
import os
import subprocess

def main():
    # Shutdown Tomcat
    scriptPath = "%s/bin/shutdown.sh" % (os.environ[TOMCAT_HOME])
    shutdownCmd = ["sh", scriptPath]
    subprocess.call(shutdownCmd)

    # Check for PID
    psCmd = ["ps", "-aef"]
    p = subprocess.Popen(psCmd, stdout=subprocess.PIPE)
    so, se = p.communicate()

    grep = [line for line in so.splitlines() if "python" in line]

    for line in grep:
        pid = line.split()[1] # Second column
        killPidCmd = ["kill", "-9", pid]
        subprocess.call(killPidCmd)

if __name__ == '__main__':
    main() 
```

我再次建议您更改`killPidCmd = ["kill", "-9", pid]`以`killPidCmd = ["echo", "kill", "-9", pid]`验证一切正常

也就是说，这作为一个 shell 脚本会简单得多：

```
${TOMCAT_HOME}/bin/shutdown.sh

pids=$(ps -aef | grep tomcat | awk '{print $2}')
kill -9 ${pids} 
```

# android - 在这种情况下启动 Activity 不能正常工作？

> ID：12688937
> 
> 赞同：1
> 
> 时间：2012-10-02T10:52:25.123
> 
> 标签：android, android-activity

嗨，下面代码中的每个人，在选择图像后，它不会移动到下一个活动，在图库中，如果我们选择第一个项目，它仍然在同一个活动中，但我们选择第一个位置图像以外的另一个项目，它正在移动到下一个活动

`startActivity(mv);`当我们单击第一个位置图像时，显示的 startactvity 没有调用

但是吐司显示为已选择图像但未移动到下一个活动

```
public boolean onTouch(View v, MotionEvent arg1) {
        // TODO Auto-generated method stub

case R.id.imageView2:

            upLoadPhoto();

            break;
protected void upLoadPhoto() {

        Intent intent = new Intent(Intent.ACTION_GET_CONTENT, null);
        intent.setType("image/*");
        intent.putExtra("return-data", true);
        startActivityForResult(intent, 100);

    }

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

 if (requestCode == 100 && data != null && data.getData() != null) {
                System.out.println("in case");
                Uri _uri = data.getData();

                if (_uri != null) {
                    // User had pick an image.
                    Cursor cursor = getContentResolver()
                            .query(_uri,
                                    new String[] { android.provider.MediaStore.Images.ImageColumns.DATA },
                                    null, null, null);
                    cursor.moveToFirst();
                    // Link to the image
                    final String imageFilePath = cursor.getString(0);
                    Log.v("imageFilePath", imageFilePath);
                    File photos = new File(imageFilePath);
                    try {
                        gbmp = BitmapFactory.decodeStream(
                                new FileInputStream(photos), null, null);
                    } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    cursor.close();

                }
                mv = new Intent(Imageselection.this, Modeselection.class);
                mv.putExtra("test", gbmp);
                mv.putExtra("name", 100);
                System.out.println("going to gamestart class");
                startActivity(mv);
                Toast.makeText(getApplicationContext(), "Image selected", Toast.LENGTH_SHORT).show();
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:28:42.937

这是因为您将整个图像传递给了捆绑包。

捆绑包的大小有限，您不能将图像本身放入意图中。

您需要将图像保存到缓存中，然后将图像的文件名或文件路径传递给 `putExtra`，然后稍后通过访问文件名或文件路径来检索它。

对于您的情况，您从图库中选择一张图片，然后您可以获取该图片的 URI 或路径，将 URI/路径放入意图，然后在您的另一个活动中检索它。

当您调用意图启动图库时，它将返回`data`包含所选文件的 Uri。

如果您启动默认图库，这里可能需要一些示例代码：

```
// Launch Gallery to choose pic.
Intent intentLaunchGallery = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

startActivityForResult(intentLaunchGallery, LOAD_IMAGE_ACTIVITY_REQUEST_CODE);

...

private String getPath(Uri uri) {
    String[] projection = { MediaColumns.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaColumns.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
}

...

// Gallery launched to choose picture
if (requestCode == LOAD_IMAGE_ACTIVITY_REQUEST_CODE) {

        if (resultCode == RESULT_OK) {

            fileUri = data.getData();
            filePath = getPath(fileUri);
//              fileUri = Uri.parse(filePath);

            // call media scanner to refresh gallery
            MediaScannerConnection.scanFile(getApplicationContext(), new String[]{filePath}, null, new MediaScannerConnection.OnScanCompletedListener() {

                @Override
                public void onScanCompleted(String path, Uri uri) {

                    Log.i("MediaScanner", "Scanned " + path + ":");
                    Log.i("MediaScanner", "-> uri=" + uri);
                }
            });

//              Toast.makeText(this, "Image chosen from: " + filePath, Toast.LENGTH_LONG).show();

            Log.d("MainMenu->onActivityResult", "Image chosen from: " + filePath);

            // display the picture chosen by user
            Intent intentShowMarkers = new Intent(MainMenuActivity.this, ShowMarkersActivity.class);

            intentShowMarkers.putExtra("IMG", filePath);   
            intentShowMarkers.putExtra("FLAG", false);

            MainMenuActivity.this.startActivity(intentShowMarkers);

        } else if (resultCode == RESULT_CANCELED) {

            // user pressed the cancel of gallery
            Toast.makeText(MainMenuActivity.this, "Cancelled.", Toast.LENGTH_SHORT).show();

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:03:20.493

试试下面的代码。从图库中选择图像

```
Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        filePath = cursor.getString(columnIndex);
        cursor.close(); 
```

并在您的`onActivityResult`方法中写下参加下一个活动的意图

```
Intent picIntent = new Intent(CurrentActivity.this,
                        NextActivity.class);
                picIntent.putExtra("gallery", filePath);
                startActivity(picIntent); 
```

在你的`NextActivity`类`onCreate`方法中写下面的代码

```
ImageView imageView = (ImageView)findViewById(R.id.imgView);

        String fileString = getIntent().getStringExtra("gallery");

        imageView.setImageBitmap(BitmapFactory.decodeFile(fileString)); 
```

# java - Enum 是 JVM 范围的单例吗？

> ID：12688940
> 
> 赞同：4
> 
> 时间：2012-10-02T10:52:42.430
> 
> 标签：java, jvm, singleton

我在码头部署了多场战争。最初我有一个单例类，但问题是它在两次战争中都被初始化了。所以我正在尝试将单例设为枚举。有没有办法制作一个 JVM 范围的单例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T10:54:09.213

您无法真正执行此操作。您的单例将是特定于类加载器的，并且由于您的应用程序可以定义多个类加载器，因此您会感到沮丧。

# c# - 如何在 Windows 8 Metro 应用程序中实现全局“即时搜索”？

> ID：12688941
> 
> 赞同：1
> 
> 时间：2012-10-02T10:52:47.547
> 
> 标签：c#, windows-8, microsoft-metro

**你好社区，**

我是 Win8-Metro 编程新手，例如 Win8-Store 应用程序（C# 方式），我正在尝试通过搜索合同（http://msdn.microsoft.com/en-us/library/）编写全局即时搜索Windows/应用程序/hh465231.aspx）。

我想要实现的即时搜索与搜索“Apps”/“App search”完全一样。每个键盘输入都会在搜索窗口中显示新发现的应用程序（搜索超级按钮文本框下方没有建议），无需按 Enter。

在正常情况下，您必须在“搜索结果页面”中实现 LoadState 和 Filer_SelectionChanged 事件。我想要像在“应用程序”中搜索一样的行为（我知道没有搜索历史！）。

这怎么可能实施？有没有例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:25:46.310

你的问题不清楚。通过即时搜索，您的意思是在您键入时显示结果吗？如果这就是您的意思，我建议您查看 OnSuggestionsRequested 事件。

例如...

```
private void OnSuggestionsRequested(SearchPane sender, SearchPaneSuggestionsRequestedEventArgs args)
{
    string query = args.QueryText;
    string[] terms = { "an item", "Oscillator", "crossbeam", "treddle", "Interossitor", "Spline", "Flange" };

    foreach (var term in terms)
    {
        if (term.StartsWith(query, StringComparison.CurrentCultureIgnoreCase))
        {
            args.Request.SearchSuggestionCollection.AppendQuerySuggestion(term);
        }
    }
} 
```

当用户开始输入时，此方法会从您的应用程序中返回一个潜在匹配项列表。这些建议将列在“搜索”超级按钮的搜索框下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:20:04.180

这是使用搜索合同的示例： http: [//code.msdn.microsoft.com/windowsapps/Search-app-contract-sample-118a92f5](http://code.msdn.microsoft.com/windowsapps/Search-app-contract-sample-118a92f5)

# c++ - c ++复制构造函数签名：有关系吗

> ID：12688942
> 
> 赞同：7
> 
> 时间：2012-10-02T10:52:58.757
> 
> 标签：c++, copy, constants, copy-constructor

我当前的实现使用大量具有这种语法的复制构造函数

`MyClass::Myclass(Myclass* my_class)`

它真的（功能上）不同于

`MyClass::MyClass(const MyClass& my_class)`

为什么？

我被告知第一个解决方案不是真正的复制构造函数。然而，做出改变意味着相当多的重构。

谢谢！！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T10:54:10.380

不同的是，第一个不是复制构造函数，而是转换构造函数。它从 a 转换`MyClass*`为 a `MyClass`。

根据定义，复制构造函数具有以下签名之一：

```
MyClass(MyClass& my_class)
MyClass(const MyClass& my_class)
//....
//combination of cv-qualifiers and other arguments that have default values 
```

### 12.8\. 复制类对象

> 2) 类 X 的非模板构造函数是复制构造函数，如果它的第一个参数是 X&、const X&、volatile X& 或 const volatile X& 类型，并且没有其他参数或者所有其他参数都有默认参数 (8.3 .6).113) [ 示例：X::X(const X&) 和 X::X(X&,int=1) 是复制构造函数。

编辑：你似乎混淆了两者。

假设你有：

```
struct A
{
   A();
   A(A* other);
   A(const A& other);
};

A a;     //uses default constructor
A b(a);  //uses copy constructor
A c(&a); //uses conversion constructor 
```

它们共同服务于不同的目的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-02T10:55:06.880

第一个版本*不是*复制构造函数。就那么简单。它只是另一个构造函数。

类的*复制*构造函数`X`必须具有签名`(X &, ...)`or`(X const &, ...)`或`(X volatile &, ...)`or `(X const volatile &, ...)`，其中除第一个参数之外的所有参数都具有默认值（如果它们存在）（并且它不能是模板）。

* * *

也就是说，你应该非常仔细地思考为什么你违反了零规则：大多数设计良好的类根本不应该有*任何*用户定义的复制构造函数、复制赋值运算符或析构函数，而是依赖于良好的- 设计的成员。您当前的构造函数采用指针这一事实让我想知道您的代码是否正确运行，例如`MyClass x = y;`- 值得检查。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T11:21:10.467

某些语言结构需要复制构造函数：

*   按值传递
*   按值返回
*   复制样式初始化（​​尽管在这种情况下通常会省略复制）

如果语言要求复制，并且您提供了复制构造函数，则可以使用它（当然，假设 cv-qualifications 是可以的）。

由于您没有提供复制构造函数，因此您将获得编译器生成的复制构造函数。这通过复制每个数据成员来工作，即使这对您的班级来说不是正确的做法。例如，如果您的 not-a-copy-constructor 显式地执行任何深层复制或分配资源，那么您需要禁止编译器生成的副本。

如果编译器生成的副本适用于您的类，那么您的非副本构造函数基本上是无害的。不过，我认为这不是一个特别好的主意：

```
void some_function(const MyClass &foo);

MyClass *ptr = new MyClass();
const MyClass *ptr2 = ptr;
some_function(ptr); // compiles, but copies *ptr and uses the copy
MyClass bar(ptr2);  // doesn't compile -- requires pointer-to-non-const 
```

即使假设编译器生成的副本对您的类没有好处，进行必要的更改也不需要大量的重构。假设您的非构造函数实际上并未修改其参数指向的对象，因此在修复签名后，您将拥有：

```
MyClass::MyClass(const MyClass* my_class) {
    // maybe treat null pointer specially
    // do stuff here
} 
```

你需要：

```
MyClass::MyClass(const MyClass& my_class) {
    do_stuff(my_class);
}

MyClass::MyClass(const MyClass* my_class) {
    // maybe treat null pointer specially
    do_stuff(*my_class);
}

MyClass::do_stuff(const MyClass& my_class) {
    // do stuff here
} 
```

您还需要将任何初始值设定项列表从旧构造函数复制到新构造函数，并对其进行修改以使其`my_class`不是新构造函数中的指针。

删除旧的构造函数可能需要大量重构，因为您必须编辑任何使用它的代码。不过，您不必删除旧的构造函数来修复默认复制构造函数的任何问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T11:12:00.337

> 为什么我要使用复制构造函数而不是转换构造函数？

如果您将`MyClass`对象提供给一些期望您的复制构造函数有效的代码，则可能会出现问题。

STL 容器就是这种情况。例如，如果您使用 a `std::vector<MyClass>`，则必须知道向量可以使用其复制构造函数来移动元素以进行重新分配。

编译器提供的默认构造函数将执行浅拷贝，调用每个属性的拷贝构造函数，为指针等基类型制作简单的拷贝。如果你想要某种形式的深拷贝，你将不得不正确地重写拷贝构造函数`MyClass`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-02T10:57:39.707

第一个示例不是复制构造函数。这意味着当您提供它时，编译器仍然为您提供一个默认的复制构造函数，其签名等效于

```
MyClass(const MyClass& my_class); 
```

如果你对你的构造函数做了一些特殊的事情，并且编译器提供的复制构造函数不遵循这个逻辑，你应该实现一个复制构造函数或者找到一种方法来禁用它。

# c# - 在接口中声明方法

> ID：12688945
> 
> 赞同：1
> 
> 时间：2012-10-02T10:53:16.033
> 
> 标签：c#, design-patterns

我有一个接口 INetworkAware 并且需要声明将强制每个类注册事件的方法

目前使用 prisms eventtaggregator 我们的实现如下。

```
 protected override void SetupEvents()
    {
        RegisterForEvent<PatientSelected>(OnPatientSelected);
        base.SetupEvents();
    } 
```

SetupEvents 方法在 ViewModelbase 类中被声明为 virtual。在这种情况下，我们希望拥有上面提到的 INetworkAware 接口，除了从 ViewModelBase 派生之外，如果任何类有兴趣监听网络变化（网络离线/在线）并实现 INetworkAware 接口，我们希望有机制来强制他们为此注册事件使用相同的主体。例如，如果我们创建类

```
public class PatientInformationViewModel : ViewModelBase, INetworkAware
{
     protected override void SetupEvents()
     {
         RegisterForEvent<PatientSelected>(OnPatientSelected);
         base.SetupEvents();
     }

     INetworkAware.ListenForNetworkChange
     {
         RegisterForEvent<NetworkChangeEvent>(OnNetworkChange)
     }

     OnNetworkChange(NetworkChangeEvent networkstatus)
     {

     }
 } 
```

NetworkChangeEvent 是一个示例 POCO 类

INetworkAware.ListenForNetworkChange 和 OnNetworkChange(NetworkChangeEvent networkstatus) 必须在派生自 INetworkaware 并具有相同签名的每个视图模型中实现。

我们怎样才能完成这个场景

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:01:51.823

你几乎是在正确的轨道上。如果您在基类上实现接口，然后在基类中声明您的方法，`abstract`这将强制任何扩展（派生）类实现它自己的版本：

```
public abstract class ViewModelBase : INetworkAware
{

    public abstract void SetupEvents();

}

public class PatientInformationViewModel : ViewModelBase
{
    public override void SetupEvents()
    {
        //register for your events
    }
} 
```

或者，您可以在基类中声明该方法，`virtual`而不是`abstract`提供一个基实现，并且您的派生类可以在必要时简单地覆盖它。我自己之前就使用过这种模式，它非常有效——只要确保你`Unsubscribe()`在界面上也包含一个（或类似的）。

# git - 指向特定 git 参考的符号链接

> ID：12688947
> 
> 赞同：3
> 
> 时间：2012-10-02T10:53:36.277
> 
> 标签：git, branch

假设我有一个带有 2 个分支的 git 存储库：

*   1.0-集成
*   2.0-集成

我必须在两个分支中工作，因为我们维护我们产品的 2 个版本。

同时，我在其他项目中使用该产品，例如，我希望在我的 IDE 中提供可用于完成的源代码。

你知道在我的文件系统的某个地方创建一个 1.0_shortcut 目录的方法（我在 linux 上，并且符号链接可用）总是指 1.0-integration 分支，另一个 2.0_shortcut dir 指的是 2.0-integration 分支，无论我的主仓库中的已签出分支如何？

注意：我考虑过使用

*   **[`git-new-workdir`](http://nuclearsquid.com/writings/git-new-workdir/)**，但文件不会*自动*同步（当我在我的主仓库上的分支 1.0-integration 上提交一个文件时，除非我在 1.0_shortcut 目录中这样做，否则该文件在 1.0_shortcut 目录中不可用`git reset --hard`）
*   **`git clone --shared`**，但文件不会*自动*同步（当我在我的主仓库上的分支 1.0-integration 上提交一个文件时，除非我在 1.0_shortcut 目录中这样做，否则该文件在 1.0_shortcut 目录中不可用`git fetch origin && git checkout origin/1.0-integration`）

* * *

经过更多探索，并在@Michael 的帮助下，我认为这没有什么魔力……可接受的解决方案（根据我自己的需要，其他一些解决方案可能满足您的需要）是：

*   通过主要分支（1.0*、2.0*、...）获得一个工作目录`git-new-workdir`
    *   优点：
        *   设置简单
        *   在存储方面高效（只有一个用于 blob 的存储库）
        *   轻松访问每个主要版本
    *   缺点：
        *   你必须认真对待你最终在每个工作目录中签出的内容（没有什么能阻止你在 1.0 工作目录中签出 2.2
        *   您不能合理地为每个标签拥有一个工作目录
*   编写一些钩子来创建这些目录
    *   优点：
        *   完全可定制
    *   缺点：
        *   使用大量存储空间
        *   写得很讲究

# java - 如何检查毫秒时间戳是否在我当前时区的午夜？

> ID：12688950
> 
> 赞同：2
> 
> 时间：2012-10-02T10:53:48.303
> 
> 标签：java, time

我有一个以毫秒为单位的时间戳，即`1349557200000`. 如何检查它是否发生在我当前时区的午夜？

我想出的最好的方法是：

```
Calendar mycal = Calendar.getInstance();
Integer offset = (mycal.get(Calendar.ZONE_OFFSET) + mycal.get(Calendar.DST_OFFSET)) * (60 * 1000);
Boolean isAtMidnight = 1349557200000L % (24L * 60L * 60L * 1000L)) == (long) offset ? true : false; 
```

这看起来有点复杂。我想知道是否有任何我可能遗漏的快捷方法。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T11:03:25.580

```
Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(milliseconds);
return cal.get(Calendar.HOUR_OF_DAY) == 0
       && cal.get(Calendar.MINUTE) == 0
       && cal.get(Calendar.SECOND) == 0
       && cal.get(Calendar.MILLISECOND) == 0; 
```

# ruby-on-rails - 如何将我的表单呈现到 Rails 上的索引页 ruby 中？

> ID：12688961
> 
> 赞同：0
> 
> 时间：2012-10-02T10:54:22.757
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jquery

我的`index`页面中有一个显示表格网格。我`new`在同一页面中有一个按钮。当我单击`new`按钮时，应该出现在表格网格顶部的`form`同一页面中。`index`我怎样才能做到这一点？我是 ROR 的新手。所以请详细帮助我。

这是我的索引页。

```
<div id="new_survey_link">
Create a
<%= link_to 'New', new_enr_rds_surv_rdsap_xref_path %>
</div>

<table class="gridView">
  <tr class="gridViewHeader">
  <th>Section</th>
  <th>Questions</th>
  <th>Answer</th>
  <th>Element</th>
  <th>Sub Element</th>
  <th>Material</th>
  <th>Action</th>
  </tr>

  <% if @enr_rds_surv_rdsap_xrefs.empty? %>
    <td class="empty_data" colspan="7">No Energy/Survey Cross references are currently exist.</td>
  <% else %>
  <% @enr_rds_surv_rdsap_xrefs.each do |survey| %>
  <tr class="<%= cycle('gridViewclickableRowDialog', 'gridViewAltclickableRowDialog') %>">
    <td><%= survey.Section %></td>
    <td><%= survey.enr_rds_question_2009.question_text %></td>
    <td><%= survey.Answer_No %></td>
    <td><%= survey.element.Element %></td>
    <td><%= survey.sub_element.Sub_Element %></td>
    <td><%= survey.renew_schedule.Material %></td>
    <td>
      <%= link_to 'Edit', '#', :remote => true, class: "create-user" %> | 
      <%= link_to 'Delete', survey, method: :delete,
                                 confirm: "Are you sure?" %>
    </td>
  </tr>
  <% end %>
  <% end %>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:12:52.320

您可以在页面中添加表单并使用 style="display:none"; 隐藏它 然后将“新”链接的点击事件绑定到切换可见性的 javascript。像 jQuery 一样，你可以使用 onclick="$('#new_survey_link a').toggle();"

# vim - vim 扩展 makeprg 变量

> ID：12688964
> 
> 赞同：0
> 
> 时间：2012-10-02T10:54:32.703
> 
> 标签：vim

我使用该`:set makeprg`功能根据文件设置不同的制作行为。这样做的一个特点是我可以使用`%`and`%<`来引用活动缓冲区中的文件以及`$`环境变量。

我想回应*扩展* `makeprg`变量，但我似乎无法实现这一点。

例如，假设我有`:set makeprg=build\ %`，并且我正在处理文件`Foo.txt`。我希望回显扩展的输出`makeprg`是：

```
build Foo.txt 
```

`&makeprg`但是，在回显变量时，我们会得到以下结果：

```
:echo(&makeprg)
build\ % 
```

解决方案可能涉及使用`expand()`，除了这将涉及解析`&makeprg`转义符号并`$`适当处理环境变量。有没有我想念的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T12:47:08.160

你为什么需要这个？对于故障排除，我可能只是附加`echo`到`'makeprg'`（这是 后面的尾随空格`\`）：

```
:setl makeprg^=echo\ 
```

但是以下内容应该符合您的想法。诀窍是将`'makeprg'`字符串拆分为空格，并单独处理每个单词：

```
:echo join(map(split(&makeprg), 'expand(v:val)')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T13:52:45.310

更接近事实： `join(map(split(mystring, '\ze[<%#]'), 'expand(v:val)'), '')`。

# asp.net - 如何防止在多次回发期间将页面存储在缓存中？称为智能导航的东西

> ID：12688966
> 
> 赞同：0
> 
> 时间：2012-10-02T10:54:35.453
> 
> 标签：asp.net, c#-4.0, browser-cache

我有一个 Asp.net .aspx 页面。我以一个简单的联系我们页面为例。该页面有 3 个字段 - 名称/电子邮件/问题。场景是，用户输入了错误的电子邮件地址，作为响应，系统通过检查正则表达式来显示错误消息。

现在，如果用户点击浏览器按钮或退格键，浏览器将显示相同的页面而没有错误消息 - 这意味着落后了 1 步。

如果用户犯了 2 个并发错误 - 1）将名称框留空，点击提交（错误消息显示说所有字段都是必填的）。2）错误的电子邮件，点击提交（错误消息显示输入错误的电子邮件）

现在，如果用户点击返回浏览器按钮或退格键，浏览器将显示与先前错误消息相同的页面（对于空框），即落后 1 步。再次回击，显示相同的页面，没有任何错误消息，即落后 2 步。

我不希望后退按钮或退格键执行这些不需要的操作。我也不想禁用后退按钮或不缓存任何内容。

我需要的是，当用户点击后退按钮或退格键时，他们应该登陆到以前浏览过的不同页面，而不是同一个页面。这意味着，我不希望浏览器缓存在多次回发期间保留页面。相反，缓存应该只在页面最初着陆时保存一次。

有时我听说这种方法称为 smartnavigation，我尝试使用谷歌搜索，但找不到非常有用和优化的东西。这是我找到的最好的文章（不确定这是我要找的）。 [http://support.microsoft.com/kb/913721](http://support.microsoft.com/kb/913721)

问题是，我不完全确定如何准确引用这个问题。

我希望我的问题非常简单（我试图澄清）。如果有不清楚的地方，请告诉我。

我将不胜感激任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:01:33.620

我相信您可以将控件放在 UpdatePanel 中，并将 UpdateMode 设置为 Always ie

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
    <ContentTemplate>
        // Your controls
    </ContentTemplate>
</asp:UpdatePanel> 
```

您还需要在页面的表单元素中使用 ScriptManager，例如

```
<form id="form1" runat="server">
    <asp:ScriptManager runat="server" EnablePartialRendering="true" />
....
</form> 
```

这将停止页面进行完整的回发，并且应该停止您描述的行为。我还将使用带有 RegularExpressionValidator 或 RequiredFieldValidator 等的客户端验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T02:10:09.667

这是另一个解决方案。尝试在“head”标签上方添加 <% Response.CacheControl = "no-cache";%>

# css - 排序列表上的自动保证金

> ID：12688972
> 
> 赞同：0
> 
> 时间：2012-10-02T10:55:04.173
> 
> 标签：css, html-lists, margin

我`margin-auto`在有序列表上设置时遇到问题。设置有点复杂，否则我会创建一个小提琴。你可以[在这里查看](http://www.noahd.net/demo-upwall/residential/napa-farm-house/?pid=42)。

我需要灰色背景上的有序列表来自动适应它，具体取决于有多少列表项。现在这是我正在使用的代码：

```
ol {
counter-reset: level1;
font-size: 11px;
margin: 0 auto;
width: 50%;
}

ol li:before {
content: counter(level1, decimal) " ";
counter-increment: level1;
}

.ngg-gallery-list li {
color: gray;
display: inline-block;
margin: 5px 2px !important;
overflow: hidden;
} 
```

如果列表项超过 7-8 个，则 50% 的宽度可以使列表居中，但如果只有 3 或 5 个，则看起来不太好。我还有什么其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:13:16.553

尝试`.ngg-gallery-list { text-align: center; }`

# python - 正则表达式字符匹配计数器

> ID：12688975
> 
> 赞同：1
> 
> 时间：2012-10-02T10:55:08.723
> 
> 标签：python, regex, python-3.x

我正在编写一个 python 脚本，它需要从源文件中删除所有具有特定语法的方法。

假设我在源文件中有一些方法，就像这样。

```
fn difflml(args)[
       if [
            --blah 
           ]
       [ var ]
] -- END OF THE METHOD

--Othed method starts and stuffs 
```

我可以使用正则表达式从源文件中剥离这些样式方法吗？

我不知道如何保持计数`[`，`]`以便剥离整个方法。我在想的是保持计数`[`，当计数为 0 时`]`，增加`[`和减少`]`并打印。

由于我对正则表达式相当陌生，我不确定这是否可以在正则表达式本身中完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:46:55.470

（仅）使用正则表达式无法*正确执行此操作。*由于`[`and`]`字符可以递归嵌套，所以不能使用正则表达式，因为正则表达式没有堆栈来跟踪匹配的括号。一个好的经验法则是，如果您有递归模式（可以嵌套在自身内部的模式），则不能使用正则表达式。

*正确的*方法是使用使用正则表达式的标记器，然后创建递归下降解析器。根据您编写解析器代码的技能，这将使您倒退几天的编码时间。

*不正确但粗略有效*的方法是认识到函数的开头和函数的结尾都将从相同的缩进级别开始。您可以创建一个与递归模式不匹配的特殊正则表达式，而只匹配函数定义的开头和从行首开始的右大括号之间的任何内容。这可能需要你一两个小时来编写和调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:02:03.010

我想可以使用正则表达式，但是没有括号计数（这是正则表达式引擎无法做到的）。可以使用不情愿的量词来匹配第一次出现的方法结束括号（假设它总是第一个/唯一的字符在行上，或者 `-- END ...`总是存在注释）。

但在我看来，正则表达式不适合用于此目的的工具，因为它在长的多行和多分支代码上可能非常内存和时间效率低下。

考虑改为编写一个简单的解析器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:24:18.850

[这是一个使用pyparsing](http://pyparsing.wikispaces.com/)的快速示例，它去除诸如“--END OF METHOD”之类的注释

```
from pyparsing import *

parser = nestedExpr('[', ']').setParseAction(keepOriginalText) + Group('--' + restOfLine).suppress()
print parser.transformString(text) 
```

使用您的示例代码生成：

```
fn difflml(args)[
       if [
            --blah 
           ]
       [ var ]
]

--Othed method starts and stuffs 
```

# actionscript-3 - 按钮类的 AS3 未定义方法

> ID：12688977
> 
> 赞同：0
> 
> 时间：2012-10-02T10:55:12.517
> 
> 标签：actionscript-3, button, undefined

我正在尝试将按钮链接到外部页面。在第一帧中，我放置了以下代码：

```
import flash.events.MouseEvent;
import flash.net.navigateToURL;
import flash.net.URLRequest;
import flash.net.URLRequestMethod;

myButton.addEventListener(MouseEvent.CLICK, onMouseClick);
function onMouseClick(event:MouseEvent):void
{
   var request:URLRequest = new URLRequest("http://pruebainteligente.com");
   request.method = URLRequestMethod.GET;
   var target:String = "_blank";
   navigateToURL(request, target);
} 
```

为了制作按钮类，我去了库>属性>并将按钮类命名为“myButton”。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:59:50.323

```
myButton.addEventListener(MouseEvent.CLICK, onMouseClick); 
```

如果该代码在框架本身上，则它指的是对象/符号的实例，而不是类本身。您需要从库中拖动按钮并将其放置到舞台上，将其实例名称（在属性选项卡中）设置为“myButton”，然后您的代码将起作用。

或者，您可以纯粹通过代码添加对象的副本：

```
var newButton = new myButton();
addChild(newButton);

newButton.addEventListener(MouseEvent.CLICK, onMouseClick); 
```

# html - 浏览器中的表格高度不同

> ID：12688979
> 
> 赞同：0
> 
> 时间：2012-10-02T10:55:15.893
> 
> 标签：html, css

有以下表格代码，但表格高度在不同浏览器和打印时不一样。请参阅第 1,2 列和第 3 列的图片差异。我需要每张桌子的高度相同，有或没有线条。

谢谢

马汀

![表格布局](../Images/3d4c266060f082e8ddba874c591e92e9.png)

CSS：

```
.prn_outer {
    margin: 0;
    padding: 0;
    border: 1px solid #333; 
}

.prn_inner {
    margin: 0;
    padding: 0;
    height: 160px;
    border: 1px solid #333; 
}

.prn_row_top {
    margin: 0;
    padding: 0;
    border: 1px solid #333; 
}

.prn_row_bottom {
    margin: 0;
    padding: 0;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    border-bottom-color: #333;
} 
```

html:

```
 <table border="0" cellpadding="0" cellspacing="0" width="100%" class="prn_outer">
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td width="20%"><table border="0" height="160" cellpadding="0" cellspacing="0" width="100%" class="prn_inner">
              <tr>
                <td height="18">&nbsp;</td>
              </tr>
              <tr>
                <td height="18" class="prn_row_bottom">&nbsp;</td>
              </tr>
              <tr>
                <td height="18">&nbsp;</td>
              </tr>
              <tr>
                <td height="18" class="prn_row_bottom">&nbsp;</td>
              </tr>
              <tr>
                <td height="18">&nbsp;</td>
              </tr>
              <tr>
                <td height="18" class="prn_row_bottom">&nbsp;</td>
              </tr>
              <tr>
                <td height="18">&nbsp;</td>
              </tr>
              <tr>
                <td height="18">&nbsp;</td>
              </tr>
            </table></td>
          <td width="20%"><table border="0" height="160" cellpadding="0" cellspacing="0" width="100%" class="prn_inner">
              <tr>
                <td height="18">&nbsp;</td>
              </tr>
              <tr>
                <td height="18" class="prn_row_bottom">&nbsp;</td>
              </tr>
              <tr>
                <td height="18">&nbsp;</td>
              </tr>
              <tr>
                <td height="18" class="prn_row_bottom" >&nbsp;</td>
              </tr>
              <tr>
                <td height="18">&nbsp;</td>
              </tr>
              <tr>
                <td height="18" class="prn_row_bottom">&nbsp;</td>
              </tr>
              <tr>
                <td height="18">&nbsp;</td>
              </tr>
              <tr>
                <td height="18">&nbsp;</td>
              </tr>
            </table></td>
          <td width="20%"><table border="0" height="160" cellpadding="0" cellspacing="0" width="100%" class="prn_inner">
              <tr>
                <td height="18" class="prn_row_bottom">&nbsp;</td>
              </tr>
              <tr>
                <td height="134">&nbsp;</td>
              </tr>
            </table></td>
          <td width="20%"><table width="100%" height="160" border="0" cellpadding="0" cellspacing="0">
              <tr>
                <td height="158">&nbsp;</td>
              </tr>
            </table></td>
          <td width="20%"><table width="100%" height="160" border="0" cellpadding="0" cellspacing="0">
              <tr>
                <td height="158">&nbsp;</td>
              </tr>
            </table></td>
        </tr>
      </table></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:47:17.440

嵌套表格时，您没有考虑边框的额外像素高度。

```
td table.prn_inner {
    margin: 0;
    padding: 0;
    height: 158px <----- this can't stay at 160px, if it's nested
    border: 1px solid; 
} 
```

您的 HTML 与 CSS 中的表格参数也存在一些冲突。您可以通过将所有表格声明移动到 CSS 来清理它（它也会使您的 HTML 更易于阅读）。

```
CSS
table { width:100%; }
td { width:20% }
.prn_inner td { height:18px }

<table>
    <tr>
        <td><table class="prn_inner">
              <tr>
                <td>table in a table</td>
              </tr>
            </table>
        </td>
    </tr>
</table> 
```

注意：最佳实践 = 表格用于数据。您的嵌套表在布局/设计中难以选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:59:19.870

你也试过把 prn_outer 高度放在一边吗？对于打印，您可以使用@media print 并以您需要的正确格式在那里播放，并且仅适用于打印

# javascript - 向 Javascript 列表中的每个对象添加/删除属性的最简单方法？

> ID：12688984
> 
> 赞同：0
> 
> 时间：2012-10-02T10:55:25.400
> 
> 标签：javascript, jquery, json

如果我有这个对象：

```
[
    { "firstName":"John" , "lastName":"Doe" },
    { "firstName":"Anna" , "lastName":"Smith" },
    { "firstName":"Peter" , "lastName":"Jones" }
] 
```

我想要这个：

```
[
    { "firstName":"John" , "lastName":"Doe", "status":"Normal"  },
    { "firstName":"Anna" , "lastName":"Smith", "status":"Normal" },
    { "firstName":"Peter" , "lastName":"Jones", "status":"Normal" }
] 
```

在 Javascript 中最简单的方法是什么？是否有一种使用公共库之一的单线方式？我知道`jQuery.each(function...)` 会起作用，但我认为可能有更好的方法。我也对相反的感兴趣，将第二个更改为第一个（删除“状态”属性）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:57:30.050

Array的使用`.map`方法。

```
var new_arr = arr.map(function(el) {
  el['status'] = 'Normal';
  return el;
}); 
```

或者为了支持旧的浏览器，使用 jQuery 的 map 方法。

```
var new_arr = $.map(arr, function(el) {
  el['status'] = 'Normal';
  return el;
}); 
```

***[现场演示。](http://jsfiddle.net/xBvhC/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:58:21.360

```
for(var key in persons)
{
    persons[key].status = "Normal";
} 
```

我不知道比这更快的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T10:59:34.650

```
var array = [{a:1},{a:2}];
array.forEach(function(object) {​​​ object["b"] = 3; }); 
```

第二个：

```
array.forEach(function(object) { delete object["b"]; }); 
```

Array.forEach 类似于 Array.map，但它不会创建新数组。[您还可以通过包含https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)上提供的 .forEach 实现在旧浏览器中使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T10:59:14.770

```
obj.forEach(function(item){item.status = "normal"}); 
```

# c# - 在 C# 中验证文件夹名称

> ID：12688985
> 
> 赞同：7
> 
> 时间：2012-10-02T10:55:30.540
> 
> 标签：c#, regex

我需要在 c# 中验证文件夹名称。

我尝试了以下正则表达式：

```
 ^(.*?/|.*?\\)?([^\./|^\.\\]+)(?:\.([^\\]*)|)$ 
```

但它失败了，我也尝试使用`GetInvalidPathChars()`.

当我尝试`P:\abc`用作文件夹名称时它失败了，即`Driveletter:\foldername`

谁能建议为什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T11:00:32.060

你可以这样做（使用`System.IO.Path.InvalidPathChars`常量）：

```
bool IsValidFilename(string testName)
{
    Regex containsABadCharacter = new Regex("[" + Regex.Escape(System.IO.Path.InvalidPathChars) + "]");
    if (containsABadCharacter.IsMatch(testName) { return false; };

    // other checks for UNC, drive-path format, etc

    return true;
} 
```

**[编辑]**
如果你想要一个验证文件夹路径的正则表达式，那么你可以使用这个：

`Regex regex = new Regex("^([a-zA-Z]:)?(\\\\[^<>:\"/\\\\|?*]+)+\\\\?$");`

**[编辑 2]**
我记得一件棘手的事情，它可以让您检查路径是否正确：

`var invalidPathChars = Path.GetInvalidPathChars(path)`

或（对于文件）：

`var invalidFileNameChars = Path.GetInvalidFileNameChars(fileName)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:13:41.483

正确验证文件夹名称可能是一项艰巨的任务。请参阅我的博客文章[*将数据绑定、验证和 MVVM 提升到新的水平 - 第 2 部分*](http://techfilth.blogspot.co.nz/2011/07/taking-data-binding-validation-and-mvvm.html)。
不要被标题所迷惑，它是关于验证文件系统路径的，它说明了使用 .Net 框架中提供的方法所涉及的一些复杂性。虽然您可能想要使用正则表达式，但这并不是完成这项工作的最可靠方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-17T08:28:54.333

这是您应该使用的正则表达式：

```
Regex regex = new Regex("^([a-zA-Z0-9][^*/><?\"|:]*)$");
if (!regex.IsMatch(txtFolderName.Text))
{
    MessageBox.Show(this, "Folder fail", "info", MessageBoxButtons.OK, MessageBoxIcon.Information);
    metrotxtFolderName.Focus();
} 
```

# android - httppost超时错误

> ID：12688987
> 
> 赞同：1
> 
> 时间：2012-10-02T10:55:52.453
> 
> 标签：android, http-post

我有一个 android 应用程序，它使用`HttpClient`httppost 将数据发布到 php 服务器。问题是当我从实际的 android 设备运行我的应用程序时，我总是得到错误

> “发送数据错误：org.apache.http.conn.connectTimeoutException：连接/超时。

但是使用设备浏览器我可以访问服务器 url。它在模拟器中运行良好。

这是我的代码

```
try
{
   HttpClient httpclient = new DefaultHttpClient();
   HttpPost httppost = new HttpPost(url);
   httppost.setEntity(new UrlEncodedFormEntity(data));
   HttpResponse response = httpclient.execute(httppost);

   Log.i("postData", response.getStatusLine().toString());
   WriteFile("Response:  "+response.getStatusLine().toString(), ":", ":",
           ":","erlog.txt");
}
catch(Exception e)
{
   Log.e("log_tag", "Error:  "+e.toString());
   WriteFile("send data Error:  "+e.toString(), ":", ":", ":","erlog.txt");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:15:21.350

我认为您必须在单独的线程上运行服务器通信。您可以使用 AsyncTask 类或更改严格模式策略。

严格模式策略可以更改如下：

```
ThreadPolicy oldThreadPolicy = StrictMode.getThreadPolicy();
StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder(oldThreadPolicy).permitNetwork().permitDiskReads().permitDiskWrites().build()); 
```

虽然上述方法不可取，但您可以试一试，看看它是否有效。将它们添加到入口活动类。

此外，请确保您在清单文件中添加了权限设置。

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:05:28.033

试试这个代码：创建这样的变量：

```
private static final long CONN_MGR_TIMEOUT = 10000;
private static final int CONN_TIMEOUT = 50000;
private static final int SO_TIMEOUT = 50000; 
```

并将此代码与 http post 一起使用：

```
ConnManagerParams.setTimeout(params, CONN_MGR_TIMEOUT);
HttpConnectionParams.setConnectionTimeout(params, CONN_TIMEOUT);
HttpConnectionParams.setSoTimeout(params, SO_TIMEOUT); 
```

# scala - 不可变集合的类型别名

> ID：12688989
> 
> 赞同：2
> 
> 时间：2012-10-02T10:56:06.663
> 
> 标签：scala, scala-collections

解决以下示例中的编译错误的最佳方法是什么？假设“m”必须是 GenMap 类型，并且我无法控制 myFun 的参数。

```
import scala.collection.GenMap

object Test {
    def myFun(m: Map[Int, String]) = m

    val m: GenMap[Int, String] = Map(1 -> "One", 2 -> "two")

    //Build error here on m.seq
    // Found scala.collection.Map[Int, String]
    // Required scala.collection.immutable.Map[Int, String]
    val result = myFun(m.seq)
} 
```

编辑：

我应该更清楚。在我的实际用例中，我无法控制 myFun，所以我必须向它传递一个 Map。'm' 也来自另一个 scala 组件，如 GenMap。我需要将一个转换为另一个，但 collection.Map 和 collection.immutable.Map 之间似乎存在冲突

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:18:11.993

`m.seq.toMap`将解决您的问题。

根据[API](http://www.scala-lang.org/api/milestone/index.html#scala.collection.Map) `toMap`中提供的签名返回一个`scala.collection.immutable.Map`据说在您的错误消息中是必需的。`scala.collection.Map`该方法返回的`seq`是一个更一般的特征，它除了是不可变映射的父级之外，也是可变和并发映射的父级。

# javascript - Jquery 将侦听器绑定到类

> ID：12688992
> 
> 赞同：0
> 
> 时间：2012-10-02T10:56:11.813
> 
> 标签：javascript, jquery, html, web

我有一个带有如下标签的 HTML 文档：

```
<div class="sign"></div> 
```

我想用代表标志视图的画布替换这些标签（用户可以触摸移动和绘制），所以我已经绑定了监听器。

问题是只有第一个画布有侦听器，并且可以在上面绘制。

```
$(document).ready(function () {

    $('.sign').each(function () {

        var canvas = $("<canvas/>");
        canvas[0].width = 200;
        canvas[0].height = 100;
        canvas[0].setAttribute("style", "border:1px solid #000000");

        var ctx = canvas.get(0).getContext('2d');
        ctx.strokeStyle = "rgba(0,0,0,1)";
        ctx.lineWidth = 2;
        ctx.lineCap = 'round';

        $(this).append(canvas);

        canvas.bind("touchstart", function () {

            ctx.moveTo(event.touches[0].pageX, event.touches[0].pageY);
        });

        canvas.bind("touchmove", function () {
            ctx.lineTo(event.touches[0].pageX, event.touches[0].pageY);
            ctx.stroke();
        });

        var br = $("<br/>");
        $(this).append(br);

        var btn = document.createElement('input');
        btn.setAttribute("type", "button");
        btn.setAttribute("value", "Clear");
        btn.setAttribute("onclick", "clearSignature()");

        $(this).append(btn);

    });

}); 
```

我如何将这些听众绑定到所有画布？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:03:08.970

我会删除循环`bind`内部`each()`，我会简单地在它之后附加处理程序（使用事件委托），例如

```
$('body')
  .on("touchstart", 'canvas', function () {
    var ctx = this.getContext('2d');
    ctx.moveTo(event.touches[0].pageX, event.touches[0].pageY);
  })
  .on("touchmove", 'canvas', function () {
    var ctx = this.getContext('2d');
    ctx.lineTo(event.touches[0].pageX, event.touches[0].pageY);
    ctx.stroke();
  }); 
```

假设应该检索上下文`var ctx = this.getContext('2d');`

# java - Maven 部署：找不到 Java 类 java.lang.String (...) 的消息正文编写器

> ID：12688994
> 
> 赞同：3
> 
> 时间：2012-10-02T10:56:23.267
> 
> 标签：java, eclipse, maven, jetty, jersey

我和团队刚刚从一些没有时间继续的人那里接手了一个开发项目。该项目由一个使用 jersey 和 jetty 的 RESTful 服务器和一个 java 客户端组成。不幸的是，它们不可用，我们被困在尝试部署服务器的过程中。

他们一直在使用 eclipse 进行开发，而对于服务器项目，maven 已用于处理依赖关系。他们没有使用 maven 来部署 .jar 文件，他们只通过 eclipse 提取它们。

我们使用了 maven-install 创建了一个 jar 文件并通过 Eclipse 导出。在这两种情况下，我们都设法让它启动并运行，但是当我们启动客户端时，我们在服务器上收到以下错误：

```
Caused by: com.sun.jersey.api.MessageException: A message body writer for Java class java.lang.String, and Java type class java.lang.String, and MIME media type text/plain was not found 
```

如果我们尝试通过常规浏览器访问 Web 服务，也会发生同样的情况。

但是，在“运行方式”->“Java 应用程序”中通过 Eclipse 运行项目时，它可以工作。

我已经阅读了很多帖子，包括[A message body writer for Java class ... and MIME media type text/html was not found](https://stackoverflow.com/questions/8645674/a-message-body-writer-for-java-class-and-mime-media-type-text-html-was-not-f)，并且我添加了 jersey-json 依赖项，但发生了同样的错误。

资源以这种方式定义：

```
@Path("/{token}/users")
public class Users {

@GET
@Path("/show/{username}")
@Produces("text/plain")
public String getUser(@PathParam("username") String username, 
                      @PathParam("token") String token) {
(...)

} 
```

我们还没有研究实际的 HTTP 请求/响应，但是如果有人认为其中的任何信息会很有趣，我们可能会这样做。

谢谢你的帮助！任何输入表示赞赏！

编辑：使用 maven-assembly 进行部署，POM 文件包含这个（以及更多）：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <configuration>
        <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
        <archive>
            <manifest>
                <mainClass>no.abakus.backup.abacash.webservice.AbaCashCoreLauncher</mainClass>
            </manifest>
        </archive>
    </configuration>
    <executions>
        <execution>
            <phase>package</phase>
            <goals>
                <goal>single</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T11:14:01.013

尝试将您的 jersey-dependencies 更改为一个依赖项：jersey-bundle。使用 mvn assembly:single 与球衣文件似乎存在问题。

在这里找到的解决方案：[仅当依赖项组装到单个 jar 中时才会抛出 Jersey 异常](https://stackoverflow.com/questions/12611213/jersey-exception-only-thrown-when-depencencies-assembled-into-a-single-jar)

# sockets - 大量保持 TCP/IP 套接字打开

> ID：12688996
> 
> 赞同：3
> 
> 时间：2012-10-02T10:56:36.773
> 
> 标签：sockets, tcp

我想创建一个服务器基础架构，允许 500 个客户端同时连接所有客户端并具有无限期的连接。计划是让客户端连接到服务器上的 TCP/IP 套接字并让它们保持连接，服务器随机向客户端发送数据，客户端随机向服务器发送数据，类似于小型 MMOG，但几乎没有任何数据. 与每个客户端每 15-30 秒进行一次 TCP 轮询相比，我提出了这个计划。

我的问题是，在保持这些连接打开的情况下，这是否会导致大量服务器带宽在空闲时使用？这是不深入 TCP 的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:49:29.603

TCP 在空闲时不使用带宽，如果启用了“keep-alive”，则可能每隔一段时间（默认为 2 小时）使用几个字节。

500 个连接不算什么，但`epoll()`它是减少系统开销的好选择。5000 个连接可能会开始成为问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:04:29.843

带宽不是您主要关心的问题，但是您可以打开的连接数量是有限的（尽管它非常高）。

但是，如果每 15 秒轮询一次足够快，我会认为保持连接打开是一种浪费。

# php - Timthumb.php 无法正常工作

> ID：12688997
> 
> 赞同：0
> 
> 时间：2012-10-02T10:56:43.470
> 
> 标签：php, timthumb

大家好，请查看下面的这个链接

[http://petseden.net/?wpsc-product=dasdadsa](http://petseden.net/?wpsc-product=dasdadsa)

对于熟悉php的人来说，当我使用chrome并检查元素时，似乎没有生成缩略图。知道为什么吗？我在网上查了一下，缓存和脚本是chmod 755，并且安装了php_gd2.dll。我已经尝试了几天，并在网上检查过，但无济于事。

请帮忙。

[编辑]另外，知道当我在 WAMP 服务器上本地测试脚本时，它可以完美运行可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T11:07:32.697

看起来好像 WordPress`mod_rewrite`规则导致了问题。访问实际的 TimThumb 链接，[这就是你得到的](http://petseden.net/wp-content/themes/mio/sp-framework/timthumb/timthumb.php/?src=http://petseden.net/wp-content/uploads/2012/10/Humpback-Whale.jpg&h=500&w=500&zc=1&q=90&a=c&s=&f=&cc=&ct=)。

您需要添加一个附加规则`.htaccess`以防止在 TimThumb 脚本上发生重定向：

```
RewriteRule ^/wp-content/themes/mio/sp-framework/timthumb - [L] 
```

您需要将其放在 WP 重写之前。

# visual-studio-2012 - TypeScript IntelliSense 在 VS2012 中不起作用

> ID：12688998
> 
> 赞同：4
> 
> 时间：2012-10-02T10:56:43.807
> 
> 标签：visual-studio-2012, typescript

所以我安装了 typescript 扩展，我可以看到新的项目类型（“带有 TypeScript 的 HTML 应用程序”和“.ts”文件类型）。一切似乎都正常（编译、错误突出显示等），但我无法让 IntelliSense 正常工作。将鼠标悬停在参数上会显示其类型，但代码完成和“列表成员”不起作用。无论我按下`Strg + Space`还是`List Members`从菜单中选择，都不会发生任何事情。

我试图在选项中禁用/启用“自动列表成员”，我什至重置了所有选项。IntelliSense 在 C# 项目中运行良好，甚至在生成的 .js 文件中运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T18:07:24.237

这是一个邪恶的 Visual Studio 小问题。您需要前导“<”才能使其正常工作。

```
WRONG way to add a .ts reference:
/// reference path="myOtherFile.ts" />

RIGHT way:
/// <reference path="myOtherFile.ts" /> 
```

当您将文件从解决方案资源管理器树拖到文本文件中时，VS 2012 会出现错误文本。很容易解决，但一开始就很难注意到问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T03:03:04.383

我对此有点尴尬，但在卸载/重新安装、重新启动等大约 4 小时后……我查看了参考资料，发现了一些奇怪的东西：

当我拖动一个`.d.ts`（或任何`.ts`这种方式的文件）时，我得到这个：

```
/// reference path="jquery.d.ts" /> 
```

这是不正确的。请注意，这是一个 XML 注释，需要一个开始标记`<`。我改成这个：

```
/// <reference path="jquery.d.ts" /> 
```

突然间，一切都开始运转良好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-03T12:45:23.673

我的问题是在 Resharper 中禁用 Typescript Intellisense。看到[这个博客](http://www.cloud-developer.eu/blog/2013/12/03/solved-intellisense-working-typescript-resharper-installed-using-visual-studio-2012/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T17:54:48.463

这很奇怪。您能否发布一些您希望完成列表出现的地方的示例，但事实并非如此？

只是一个健全的检查，你在这里输入点后看不到任何成员吗？

```
var n = 3;
n. 
```

如果这不起作用，请在 CodePlex 项目上提交错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T11:52:15.460

我遇到了同样的问题，在互联网搜索后发现了这个 stackoverflow 问题。但后来~~我的盒子崩溃~~了，我重新启动了我的操作系统，然后 IntelliSense 开始工作。我的回答是重新启动操作系统以及 VS2012。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-20T12:42:50.743

此问题可能是由 MySQL Visual Studio 扩展引起的。尝试卸载它，看看问题是否仍然存在。

[https://typescript.codeplex.com/workitem/24](https://typescript.codeplex.com/workitem/24)