# StackOverflow 问答 12946000-12946999

# python - 有限制的 Python 列表理解

> ID：12946003
> 
> 赞同：1
> 
> 时间：2012-10-18T01:57:34.667
> 
> 标签：python, list-comprehension

我有一个这样的元组列表（但要大得多）：

```
t = [(1, 2, 3), (4, 5, 6)] 
```

我想要一个包含每个元组的所有第一个元素的列表。我有：

```
first = list(x[0] for x in t) 
```

假设我只想添加一个小于 EPS 的数字。我想要的是这样的：

```
first = list(x[0] for x in t, x[0] < EPS) 
```

但这不是一个有效的 python 语句。

我想知道这样做的**pythonic**方式是什么（我可以像在Java/C++中那样做，但我想一定有更好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T02:00:05.297

采用：

```
[x[0] for x in t if x[0] < EPS] 
```

# ruby-on-rails - 检索具有空数组的记录时出现问题

> ID：12946004
> 
> 赞同：32
> 
> 时间：2012-10-18T01:57:44.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord, arel

我有一个大约 100 个用户的表，我还有一个用户 ID 数组。我想要做的是显示所有不属于这个用户 ID 数组的用户。当我做这样的事情

```
 User.where('id NOT IN (?)', [9, 2, 3, 4]) 
```

它成功返回了用户 id 不属于该数组的记录。但是，如果该数组像这样为空

```
 User.where('id NOT IN (?)', []) 
```

它不会返回任何用户，SQL 查询看起来像这样

```
 SELECT "users".* FROM "users" WHERE (id NOT IN (NULL)) 
```

有谁知道为什么会发生这种情况，或者这可能是一个错误？我正在使用带有 PostgreSQL 的 Rails 3.2.5。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-07T01:22:37.883

在 Rails 4 中，您可以使用`User.where.not(id: [])`which 将为您提供正确的结果。它产生：

```
SELECT "users".* FROM "users" WHERE (1 = 1) 
```

不幸的是`User.where('id NOT IN (?)', [])`应该是等价的，但事实并非如此。它仍然给你错误的结果：

```
SELECT "users".* FROM "users" WHERE (id NOT IN (NULL)) 
```

参考：

*   [https://github.com/rails/rails/issues/778](https://github.com/rails/rails/issues/778)
*   [https://github.com/rails/arel/commit/cbff1bcf](https://github.com/rails/arel/commit/cbff1bcf)
*   [https://github.com/rails/rails/pull/8332](https://github.com/rails/rails/pull/8332)
*   [https://github.com/rails/rails/commit/8d02afeaee8993bd0fde69687fdd9bf30921e805](https://github.com/rails/rails/commit/8d02afeaee8993bd0fde69687fdd9bf30921e805)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-18T02:47:53.273

ActiveRecord（至少 3.2.1）将空数组视为 NULL。`where`呼叫中的占位符由 处理[`sanitize_sql`](https://github.com/rails/rails/blob/3-2-rel/activerecord/lib/active_record/sanitization.rb#L33)。如果您稍微跟踪一下代码，您会发现[`replace_bind_variables`](https://github.com/rails/rails/blob/3-2-rel/activerecord/lib/active_record/sanitization.rb#L127)：

```
def replace_bind_variables(statement, values) #:nodoc:
  raise_if_bind_arity_mismatch(statement, statement.count('?'), values.size)
  bound = values.dup
  c = connection
  statement.gsub('?') { quote_bound_value(bound.shift, c) }
end 
```

然后[`quote_bound_value`](https://github.com/rails/rails/blob/3-2-rel/activerecord/lib/active_record/sanitization.rb#L163)：

```
def quote_bound_value(value, c = connection) #:nodoc:
  if value.respond_to?(:map) && !value.acts_like?(:string)
    if value.respond_to?(:empty?) && value.empty?
      c.quote(nil)
    else
      value.map { |v| c.quote(v) }.join(',')
    end
  else
    c.quote(value)
  end
end 
```

一个空数组将满足所有四个条件，`c.quote(nil)`这就是你的 NULL 的来源。导致的所有特殊逻辑都`c.quote(nil)`表明这是故意行为。

用空列表说 IN（或 NOT IN）：

```
where c in () 
```

应该会产生一个 SQL 错误，所以也许 AR 人员正试图通过悄悄地将坏 SQL 转换为`c in (null)`. 请注意，这些都不是：

```
select ... from t where c in (null);
select ... from t where c not in (null); 
```

由于 SQL 的 NULL 的行为，应该永远产生任何结果。这是一个典型的新手错误，AR 人真的应该知道得更多。

我自己更喜欢一个例外：告诉我我将要部署一个脚子弹比只是给我一把不同的枪要友好得多。

* * *

**执行摘要**：

1.  这种“空数组意味着 NULL”的行为是故意的。
2.  你永远不应该尝试`where('c in (?)', [])`，`where('c not in (?)', [])`因为这两种说法都没有多大意义。
3.  更新您的 Ruby 代码以检查空数组并做任何需要做的事情以获得您期望的结果。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-09-13T14:34:29.737

```
User.where('id NOT IN (?)', ids+[0]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-20T13:12:04.663

使用 ruby​​ 的活动记录包装器：

```
User.where.not(id: []) 
```

这将为您处理空数组问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-12T10:05:31.280

我不知道这是否是所要求的问题，但我来这里是为了找到所有具有空（序列化）数组属性的记录。我为 Rails 5.0 解决了这个问题：

```
User.where(my_array_attribute: nil) 
```

或者反过来：

```
User.where.not(my_array_attribute: nil) 
```

# regex - htaccess 重定向后出现 403 禁止错误

> ID：12946007
> 
> 赞同：0
> 
> 时间：2012-10-18T01:58:40.433
> 
> 标签：regex, .htaccess, http-status-code-403

我有一个 .htaccess 文件，旨在通过获取文件扩展名从相应的文件夹中获取图像、js 和 css。它应该始终从根文件夹中的 /img、/js 和 /css 获取文件。

我为 css 和 js 设置的行工作正常：

```
RewriteRule ^(([a-zA-Z0-9\-\.\/]+)/)?([a-zA-Z0-9\-\.]+).js$ js/$3.js [NC,L]
RewriteRule ^(([a-zA-Z0-9\-\.\/]+)/)?([a-zA-Z0-9\-\.]+).css$ css/$3.css [NC,L] 
```

但是当我尝试对图像使用类似的行时，我得到一个 403 “您无权访问此服务器上的 /img/”。错误：

```
RewriteRule ^(([a-zA-Z0-9\-\.\/]+)/)?(([a-zA-Z0-9\-\.]+).(jpg|png|svg|gif))?$ img/$3 [NC,L] 
```

主页上一切正常，但如果您尝试访问 mydomain.com/contact/ 等其他页面，则会收到 403 错误。即使您将图像 URL 复制并粘贴到浏览器中，它也可以正常打开。

[我在这里](http://www.regextester.com/)测试了正则表达式，没问题。什么可能导致问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:36:50.273

```
RewriteRule ([a-z0-9\-\.]+)\.(js|css)$ $2/$1.$2 [NC,L]
RewriteRule ([a-z0-9\-\.]+)\.(jpe?g|png|svg|gif)$ img/$1.$2 [NC,L] 
```

# php - 使用表单元素多次更新数据库

> ID：12946009
> 
> 赞同：4
> 
> 时间：2012-10-18T01:58:48.503
> 
> 标签：php, javascript, jquery, ajax, pdo

我一直在为医生办公室工作。我很擅长 HTML/CSS 和一些 PHP，但我仍在努力学习 Javascript/JQuery。

所以描述我的问题的最简单方法（至少对我来说，我的问题非常复杂）是使用图像（如果这不是描述这个问题的最佳方式，请告诉我，我会更详细地描述它): ![在此处输入图像描述](../Images/4969c1cd9405468d56809d4c77302783.png)

我有 PHP 代码，它接受传递给它的值（即位置编号）并将位置编号与用户的时间一起插入到数据库中。

这是PHP代码：

```
<?php
  date_default_timezone_set('America/Denver');

  $apptid = $_REQUEST['apptid'];
  $currentlocation = $_REQUEST['currentlocation'];
  $currentlocationstart = date("Y-m-d H:i:s"); 

  /*** mysql hostname ***/
  $hostname = '******';

  /*** mysql username ***/
  $username = '***********';

  /*** mysql password ***/
  $password = '***************';

  $conn = new PDO("mysql:host=$hostname;dbname=sv", $username, $password);
  /*** The SQL SELECT statement ***/
  $sql = "UPDATE schedule SET currentlocation = ?, currentlocationstart = ? WHERE apptid= ? ";

  $q = $conn->prepare($sql);
  $q->execute(array($currentlocation,$currentlocationstart, $apptid));

?> 
```

这是 html 代码（填充了一些 php，用于填充）：

```
$sql = "SELECT * FROM locations order by patientlocation ASC";

echo "<td><select name=location>";
foreach ($dbloc->query($sql) as $row2)
    {
    echo "<option>".$row2['patientlocation']."</option>";
    }
            echo "<option value='Check Out'>Check Out</option>";
    echo "</select></td>"; 
```

所以我遇到的问题是如何使用 Javascript/JQuery 执行此操作，以及我的 php 是否可以与 Javascript/Jquery 一起使用。我还想存储从最初的“签入”按钮到用户点击签出的所有内容。

另一个问题是我需要使用 AJAX 自动发生这种情况，而不是多次刷新页面。

非常感谢所有和任何帮助。如果我没有很好地解释我的问题，请告诉我，我会填写更多详细信息！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T02:31:36.993

首先是一个简单的问题，您是否能够将字段变成一种形式而不是让它们在更改时消失？

这样，当他们单击签入时，您可以使表单出现，他们填写，当他们在表单底部按结帐时，我们可以使用 AJAX 提交表单并显示响应。

所以这将是这样的：

```
<script type="text/javascript">
$(document).ready(function() {
    // Hide the form on load      
    $('#myForm').hide();
    // Hide the completed message
    $('#finished').show();
});

// When someone clicks checkin this function will be called
$('#checkIn').click(function(){
    $e = $(this);
    $.ajax({
        type: "POST",
        url: "[URL OF PHP PAGE HERE]", // this page should add date to the database
        data: "checkIn="+$(this).val(), // This will send $_POST['checkIn']
        success: function(){
           // Display the form once the AJAX is finished 
           $('#myForm').show();
        }
    });
});

// This function will be called when someone uses the select field
$('.[yourClassName]').change(function(){
    $e = $(this);
    $.ajax({
        type: "POST",
        url: "[URL OF PHP PAGE HERE]",
        data: "yourFieldName="+$(this).val(),
        success: function(){
           // Display the form once the AJAX is finished 
           alert('Done');
        }
    });
});

// When someone clicks checkOut this function will be called
$('#checkOut').click(function(){
    $e = $(this);
    $.ajax({
        type: "POST",
        url: "[URL OF PHP PAGE HERE]", // this page should save data to db
        data: "example="+$('select#exampleId').val(), 
        success: function(){
           // Hide the form again 
           $('#myForm').hide();
           // Show the finished div with your success msg
           $('#finished').show();
        }
    });
});
</script>

<input type="button" value="Check In" id="checkIn" />
<form method="post" id="myForm" action="">
    // Build the rest of your form here
    <select name="example" id="exampleId">
        <option value="1">Test</option>
    </select>

    <input type="button" value="Check Out" id="checkOut" />
</form>
<div id="finished" style="color:#ff0000;">Checked Out</div> 
```

应该就是这样，除非您当然需要在我的示例所在的位置构建自己的表单。使用您将 AJAX 发送到的 PHP 页面，它应该是一个常规的 PHP 页面，它接受`$_POST`数据，就像您正常发布表单时一样。

# objective-c - 创建 UITableView 单元 iPhone

> ID：12946010
> 
> 赞同：0
> 
> 时间：2012-10-18T01:58:56.010
> 
> 标签：objective-c, ios, uitableview, nsstring

如何以`table view cell`编程方式创建？我想为文本使用一个字符串。我已经搜索过，但在任何地方都没有找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:38:45.250

首选方法是从表格视图中取出可重用单元格。从 iOS 5 开始，无需检查您的单元格`nil`，它会为您实例化一个单元格（如果需要），前提是您使用的单元格重用 ID 与您的 XIB 或情节提要中的单元格与您使用的编程 ID 相匹配在代码中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellID = @"SomeTableCellID";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];
    cell.textLabel.text = @"Hello!";

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:39:29.870

刚刚经历：[链接](https://stackoverflow.com/questions/8123430/ipad-create-a-programmatically-uitableviewcell)

教程：[链接](http://jainmarket.blogspot.in/2009/05/creating-custom-table-view-cell.html)

这肯定会对你有所帮助。

# google-maps-api-3 - 谷歌地图标记的外部链接

> ID：12946012
> 
> 赞同：2
> 
> 时间：2012-10-18T01:59:21.870
> 
> 标签：google-maps-api-3, google-maps-markers

我正在尝试创建一个外部链接，该链接可以拉起标记的信息气泡并将其居中。我想通过引用我称为 clickaway 的 div ID 来做到这一点，这是我设置的，但似乎无法让它工作：

```
<script>
  function initialize() {
    var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
    var mapOptions = {
      zoom: 4,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    var contentString = '<div id="content">'+
        '<div id="siteNotice">'+
        '</div>'+
        '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
        '<div id="bodyContent">'+
        '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
        'sandstone rock formation in the southern part of the '+
        'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
        'south west of the nearest large town, Alice Springs; 450&#160;km '+
        '(280&#160;mi) by road. Kata Tjuta and Uluru are the two major '+
        'features of the Uluru - Kata Tjuta National Park. Uluru is '+
        'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
        'Aboriginal people of the area. It has many springs, waterholes, '+
        'rock caves and ancient paintings. Uluru is listed as a World '+
        'Heritage Site.</p>'+
        '<p>Attribution: Uluru, <a href="http://en.wikipedia.org/w/index.php?
 title=Uluru&oldid=297882194">'+
        'http://en.wikipedia.org/w/index.php?title=Uluru</a> '+
        '(last visited June 22, 2009).</p>'+
        '</div>'+
        '</div>';

    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });

    var name = '#clickaway';

    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        title: 'Hello World!'
    });

    google.maps.event.addListener(marker, 'click', function() {
      infowindow.open(map,marker);
    });

    google.maps.event.addListener(name, 'click', function() {
      infowindow.open(map,marker);
    });

  }

  function loadScript() {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = 'https://maps.googleapis.com/maps/api/js?sensor=false&' +
        'callback=initialize';
    document.body.appendChild(script);
  }

  window.onload = loadScript;
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:15:58.150

我认为你想使用`addDomListener`而不是`addListener`，因为正如它的名字所说，它可以监听 DOM 中对象的事件。检查这个由您的代码[制作的示例](http://jsbin.com/afetot/1/edit)，注意`name`变量中的 CSS 选择器已经消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:08:39.503

它不能那样工作，标记是一个 javascript 对象，它不能被 HTML id 引用。如果将标记设为全局，则可以在 HTML onclick 函数中引用它。

```
onclick="google.maps.event.trigger(marker, 'click');" 
```

[另一个带有可点击侧边栏的示例](http://www.geocodezip.com/v3_MW_example_map2.html)

# mysql - Zend 框架按查询排序

> ID：12946018
> 
> 赞同：-1
> 
> 时间：2012-10-18T02:00:38.587
> 
> 标签：mysql, zend-framework

```
 $field=$userVo->field;
        $order=$userVo->order;

    $selectQry      =   $this->_util->db->select()->from(array('M'=>$this->_name))
                            ->join(array('MX'=>TBL_MEDICATIONS_XREF),
                            'M.medication_id = MX.medication_id')
                            ->join(array('U'=>TBL_USERS),
                            'U.user_id = MX.user_id',array('U.identifier','U.email','U.mobile_number','U.first_name','U.last_name'))
                            ->where('MX.user_id = ?',mysql_escape_string($userId));

            if (!empty($field) && !empty($order))
            {
                // if(($field=="notes") || ($field=="rx_number"))
                if($field=="rx_number") 
                $selectQry->order("MX.$field  $order"); 

                if($field=="nick_name")
                $selectQry->order("M.$field  $order");

            } 

$medications        =   $this->_util->db->fetchAll($selectQry); 
```

`if($field=="rx_number")`条件不行，是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:03:49.853

```
 if($field=="rx_number") 
            $selectQry->order("MX.$field  $order"); 

          if($field=="nick_name")
            $selectQry->order("M.$field  $order"); 
```

安装它，你必须这样写。

```
 if($field=="rx_number") 
          {
            $orderfield = "MX.".$field." ".$order; 
            $selectQry->order($orderfield); 
          }

          if($field=="nick_name")
          {
            $orderfield2 = "M.".$field." ".$order;
            $selectQry->order($orderfiled2);
          } 
```

# cuda - 无法制作 CUDA 示例程序

> ID：12946022
> 
> 赞同：0
> 
> 时间：2012-10-18T02:01:09.800
> 
> 标签：cuda, makefile

我正在尝试在运行 RHEL6.3 的服务器上制作 2 CUDA (4.2.9) 示例程序 bandwidthTest 和 deviceQuery，但收到错误“-lshrutil not found”。我用谷歌搜索了一下，发现在 CUDA 4.2 示例中不再需要 Shrutil 库。但我仍然得到错误。

我该如何克服这个问题？我需要安装任何库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:05:01.863

虽然并非所有示例都需要 shrutil，但有些示例需要，所以是的，您需要安装 shrutil 库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T08:43:53.080

正如其他答案所建议的那样，您仍然需要拥有这个库。在类似 RedHat/CentOS 的 64 位系统中，该库以不同的名称编译，`libshrutil.a`并且您无法通过`-lshrutil`标志链接到它。要修复它，请使用正确的名称创建软链接：

```
ln -s /root/NVIDIA_GPU_Computing_SDK/shared/lib/libshrutil_x86_64.a /root/NVIDIA_GPU_Computing_SDK/shared/lib/libshrutil.a 
```

然后启动 SDK 的顶级制作，一切都会正常工作。而已！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T02:06:35.540

与版本 4.1 状态相关的[发行说明（重点是我的）：](http://developer.download.nvidia.com/compute/DevZone/docs/html/doc/CUDA_SDK_Release_Notes.txt)

> **一些**CUDA C SDK 示例已经过重构，因此它们是自包含的，不再依赖并且不再与 CUTIL 或 SHRUTIL 库链接

这并不意味着所有样本不再依赖于它们。因此，如果您想构建所有示例，您仍然需要这两个库。

# java - Spring框架可以在android应用程序中使用吗？

> ID：12946029
> 
> 赞同：12
> 
> 时间：2012-10-18T02:02:18.263
> 
> 标签：java, android, spring, dependency-injection

我正在编写一个android应用程序，它需要在应用程序需要的数据访问API中进行依赖注入（我正在实现这个API）。我不想手动编写依赖注入。因此，我正在考虑使用 Spring。我意识到有两个版本的spring。普通版和安卓版。可以在 android 应用程序中使用常规版本吗，因为我只想要依赖注入功能并且已经有了文件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T02:45:49.910

不。Spring 是一个重量级的服务器端框架，并未针对 Android 进行优化。有一些 Android 库，但那些是针对特定事物的，例如 REST。如果您需要 DI，请使用 Android 框架，例如[RoboGuice](http://code.google.com/p/roboguice/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-19T15:39:42.060

如果您需要 DI**和**Spring，请尝试**使用 RoboSpring**。我已将 Spring 框架移植到 Android 并显着调整了性能！从描述：

RoboSpring 是 Spring 框架到 Android 平台的（真正的）端口。此外，它还为 RoboGuice 引入的功能提供初步支持，例如将视图引用注入活动等。RoboSpring 基于 Spring 的**core**、**beans**、**context**和**aop**组件的 3.1.0 RELEASE 版本。它提供以下功能：

*   使用 Spring 配置文件 (XML) 配置应用程序组件
*   使用 Spring 应用程序上下文中的 bean 自动装配您的 Android 组件。
*   将 Android 应用程序上下文注入到您的 Spring Beans 中。
*   将视图注入活动。
*   … 和更多

请看这里：[https ://github.com/dthommes/RoboSpring](https://github.com/dthommes/RoboSpring)

![RoboSpring - Android 的控制反转](../Images/20b24491c8f3817103bb4a853b4a88fc.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T04:14:43.920

如果您只需要依赖注入。你可以选择一些轻量级的框架，比如 google guice。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T04:29:12.800

Spring 有用于 android 的库，但它可以有效地与一些 OAuth 进行 REST 通信，详细信息可在此处获得[spring-android](http://www.springsource.org/spring-android)和 spring 倡导者使用 RoboGuice for DI 的开发人员，您可以从[这里](http://blog.springsource.org/2011/08/26/clean-code-with-android/)阅读有关它的信息，对于硬核依赖注入，它的[RoboGuice](http://code.google.com/p/roboguice/)是迄今为止最好的。

# ios - 基于内容的 UILabel 填充

> ID：12946036
> 
> 赞同：1
> 
> 时间：2012-10-18T02:03:21.417
> 
> 标签：ios, uilabel, cgrect, cg

我有可用填充的问题。我想让我的 uilabel 有填充事件只有一个字符显示

[http://i.stack.imgur.com/T4Aet.png](http://i.stack.imgur.com/T4Aet.png)

所以我有“问问题”字的填充，

我所做的是：

```
#import "NetraCell.h"
#import <QuartzCore/QuartzCore.h>
@implementation NetraCell
@synthesize NetraLabelForPrice,NetraImageDeals;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {

        /////implement for NetraLabelForPrice
//
         NetraLabelForPrice=[[UILabel alloc] init];
         NetraLabelForPrice.backgroundColor=[UIColor brownColor];
         NetraLabelForPrice.textColor=[UIColor whiteColor];
         NetraLabelForPrice.textAlignment=NSTextAlignmentCenter;
         NetraLabelForPrice.font=[UIFont fontWithName:@"HelveticaNeue-Bold" size:18];
         [NetraLabelForPrice.layer setCornerRadius:20];

    //   NetraImageDeals=[[UIImage alloc] init];
     [self.contentView addSubview:NetraLabelForPrice];
         /////

    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}
- (void)layoutSubviews {

    [super layoutSubviews];
    self.imageView.frame = CGRectMake(10.0f, 15.0f, 80.0f, 80.0f);
    self.NetraLabelForPrice.frame = CGRectMake(100.0f, 15.0f, NetraLabelForPrice.frame.origin.x, 25);
    [self.imageView.layer setCornerRadius:7.0f];
    [self.NetraLabelForPrice.layer setCornerRadius:7.0f];

}
@end 
```

我这样放

```
self.NetraLabelForPrice.frame = CGRectMake(100.0f, 15.0f, NetraLabelForPrice.frame.origin.x, 25); 
```

但是为什么当我 label.text 只是“-”时宽度没有减小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:25:33.007

这令人困惑。在`layoutSubviews`您尝试将标签的新宽度设置为标签的当前 x 原点。这根本没有意义。您应该根据标签中的文本加上您希望的任何填充来设置标签的宽度。

在`layoutSubviews`中，替换这一行：

```
self.NetraLabelForPrice.frame = CGRectMake(100.0f, 15.0f, NetraLabelForPrice.frame.origin.x, 25); 
```

有了这个：

```
[NetraLabelForPrice sizeToFit]; // make the label just big enough for the text
CGRect labelFrame = NetraLabelForPrice.frame;
labelFrame.origin.x = 100;
labelFrame.origin.y = 15;
labelFrame.size.width += 20; // set to the amount of padding you want
NetraLabelForPrice.frame = labelFrame; 
```

您的代码中的另一个奇怪之处 - 在`init`您将标签的角半径设置为 20 然后将其设置为 7 in 的方法中`layoutSubviews`。为什么？

# android - 一种识别子视图的简单方法

> ID：12946043
> 
> 赞同：1
> 
> 时间：2012-10-18T02:04:33.213
> 
> 标签：android, layout, view, viewgroup

我在运行时向布局添加视图。你的观点是这样的：

```
<LinearLayout android:id="@+id/ll1">
<LinearLayout android:id="@+id/ll2" >
    <ImageView android:id="@+id/iv1" />
    <TextView android:id="@+id/tv1"/>
    <ImageView android:id="@+id/iv2"/>
</LinearLayout> 
```

（为了简单起见，我花了很多时间）

现在在代码中，我将任意数量的这些添加到布局中。那么如何在每次添加此视图时访问 ImageViews 和 TextViews？

目前我有这种复杂的方式来遍历每个孩子并做一个

```
if (View instanceof ImageView) 
```

如果我要调用`parentView.getChildAt(0)`（父视图是 ll2），这是否总是返回 iv1？在“1”处，这总是会返回 tv1 吗？

然后我一直将这些对象存储在自身的向量中，以便稍后调用它们。

有没有更简单的方法来做到这一点？就像我第一次添加整个内容时一样，有没有一种方法可以设置图像视图的来源，并设置文本视图的文本，而不必以这种方式找到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:46:08.203

当你膨胀你的视图时，找到它的孩子并为每个孩子设置一个特定的标签（使用[`setTag()`](http://developer.android.com/reference/android/view/View.html#setTag%28int,%20java.lang.Object%29)）。当你需要识别时，使用。你可以在 setTag[的主要目的是什么中](https://stackoverflow.com/q/5291726/1043882)[`getTag()`](http://developer.android.com/reference/android/view/View.html#getTag%28%29)找到关于 getTag 和 setTag 的使用的好主意（ [) 视图的 getTag() 方法？](https://stackoverflow.com/q/5291726/1043882)和[Android:setTag() 和 getTag() 用于更改控件的用法。](http://jongladwin.blogspot.de/2010/03/androidsettag-and-gettag-usage-for.html)

# hibernate - 休眠 hbm2ddl 问题

> ID：12946044
> 
> 赞同：2
> 
> 时间：2012-10-18T02:04:38.930
> 
> 标签：hibernate, hbm2ddl

我正在开发一个新的休眠项目。通过定义`*.hbm.xml`我想生成 java 类和 SQL 查询。我已经做到了。`hbm2ddl.auto`在将属性设置为更新时，我无法生成更改表查询。我已经在 persistence.xml 文件和 hibernate.cfg.xml 文件中尝试过这个。还尝试在 pom.xml from 中使用 true，但没有成功。请分享您对此的看法。当此更新在 hbm2ddl 目标中设置为 true 时，`pom.xml`也不会生成查询。

# entity-framework - 实体框架在保存实体时出现意外行为

> ID：12946051
> 
> 赞同：0
> 
> 时间：2012-10-18T02:05:28.260
> 
> 标签：entity-framework, entity-relationship

我有两个实体 Fisioterapeuta 和 Paciente，一个 Fisioterapeuta 有 * Pacientes。当添加一个新的 Fisioterapeuta 时，就可以了。

在 Paciente 表单中，我有一个 DropDownList 来选择 Paciente 的 Fisioterapeuta，因此，实体 Paciente 具有 Fisioterapeuta 类型的属性。

当添加一名患者时，EF 复制（创建另一名）Fisioterapeuta。

我知道发生这种情况是因为 Paciente.Fisioterapeuta 为 != null，因为我在尝试保存 Paciente 时使用通用存储库，因此 Fisioterapeuta 变得更加紧密。

有没有办法避免这种行为？如何处理？

PS：我正在使用通用存储库，所以我不能覆盖 SaveChanges 或在保存时进行验证。

## 编辑1

遵循@Brad Christie 的建议，我执行以下操作：

```
Paciente p = (Paciente)grdEdicao.DataContext; //here the DataContext brings me the Fisioterapeuta on the property p.Fisioterapeuta

p.Fisioterapeuta = Repository<Fisioterapeuta>.GetByID((int)comboFisioterapeutas.SelectedValue); // i try to set the Fisioterapeuta getting it from the repository. 
```

这个改变并没有解决我的问题。

## 编辑2

我创建了一个 github 项目来测试它，这里是[https://github.com/Ewerton/RelatedEntities_EF](https://github.com/Ewerton/RelatedEntities_EF)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:10:55.117

您可能正在重新创建`Medic`on insert （而不是为其分配以前建立的`Medic`），因此 EF 认为它需要创建一个新条目来满足插入。

确保在分配`Patient.Medic`引用时`Medic`已在数据库中。例如

```
patient.Medic = Medics.SingleOrDefault(x => x.Name = medicName); 
```

*假设`medicName`是从下拉列表中传递的值。或者（可能更好）您应该参考医生的 ID 并使用它来获取参考。*

所以，一起来：

```
<label for="name">
  Patient Name:
  <input type="text" id="name" name="name" />
</label>
<label for="medic">
  Medic:
  <select id="medic" name="medic">
    <option value="">Please select one</option>
    <option value="1">Dr. Smith</option>
    <option value="2">Dr. Jones</option>
  </select>
</label>
<input type="submit" value="Save" /> 
```

然后：

```
Patient patient = new Patient {
  Name = name,
  Medic = Medics.SingleOrDefault(x => x.Id == medic)
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:25:51.853

好的，我会回答我自己的问题（我不喜欢这样做）。

我最终得到了以下意见，如果我正在使用 EF，我有两种方法，如下所示：

## 不使用参照约束

在这种情况下，在 EDMX 中设计实体时，只需从工具箱中选择关联，在父实体中单击，将线拖动到子实体即可创建关联，这样，您可能需要注意附加和分离实体（如果您像我一样使用通用存储库，您将以我的问题中描述的相同问题结束）。使用这种方法，您将编写这样的代码。

```
 Fisioterapeuta f2 = new Fisioterapeuta();
        using (var ctx = new Model1Container())
        {
            f2 = ctx.Set<Fisioterapeuta>().FirstOrDefault();
        }

        Paciente p = new Paciente();
        p.Nome = "Paciente1";
        p.Fisioterapeuta = f2; // here you associate a Fisioterapeuta to a Paciente 
```

当您尝试保存“p”实体时，也会在数据库中创建“f2”实体。避免它的一种方法是管理“f2”实体的状态，注意它是连接还是分离。

## 使用参照约束

在这种情况下，在 EDMX 中设计实体时，不要在工具框中选择关联，而是单击 EDMX 的空白区域，添加新关联，填写表格，不要忘记标记选项“将外键属性添加到” YourEntity 的实体”。这样，我的实体 Paciente 将具有 FisioterapeutaId 属性，它是 Fisioterapeuta 的外键，我可以编写这样的代码

```
 Fisioterapeuta f2 = new Fisioterapeuta();
        using (var ctx = new Model1Container())
        {
            f2 = ctx.Set<Fisioterapeuta>().FirstOrDefault();
        }

        Paciente p = new Paciente();
        p.Nome = "Paciente1";
        //HERE ARE THE TRICK. I MANAGE THE ID OF THE RELATED ENTITIE, I DONT LET THIS WORK FOR EF.
        p.FisioterapeutaId = f2.Id; 
```

请注意，这种方式我只设置“p”对象的 FisioterapeutaId。在这种情况下，当我保存“p”对象时，将不会再次创建 Fisioterapeuta 实体。

## 结论

不存在正确的方法，您需要自己选择方法。

PS：我在 GitHub 中更新了项目，这里是链接[https://github.com/Ewerton/RelatedEntities_EF](https://github.com/Ewerton/RelatedEntities_EF)

# grails - 在“服务”中插入方法“控制器”

> ID：12946060
> 
> 赞同：1
> 
> 时间：2012-10-18T02:07:05.977
> 
> 标签：grails, grails-2.0, grails-controller

我有一个类来管理我的上传者。它利用了插件文件上传器'并补充了我的应用程序的其他信息和规则。

我正在尝试创建一个管理应用程序某些行为的服务，并注意到“服务”无法识别控制器中使用的某些方法。例如，方法“重定向”仅适用于控制器，在服务中无法识别。

在我的一项服务中，我将“文件”类型的文件作为参数转发给服务，但将此“文件”属性为“原始文件名”、大小等在“服务”中无法识别。有人可以告诉我如何从“文件”中获取这些属性，并且这些方法作为“重定向”在“服务”中被识别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T02:14:09.330

听起来您可能对 Grails 中控制器与服务的角色有些混淆。

通常的模式是控制器获取用户浏览器（绑定）发送的信息，对其进行验证，然后在必要时调用服务方法来处理该数据。一旦服务方法返回，控制器就会呈现视图、转发或重定向。

因此，您的服务不应该尝试进行重定向。这是控制器的工作，这就是为什么该功能对您的服务不可用的原因。

# jboss - JBoss Messaging 越过防火墙

> ID：12946062
> 
> 赞同：0
> 
> 时间：2012-10-18T02:07:08.287
> 
> 标签：jboss, messaging

我最近设置了 JBoss AS 5.1 并实现了一个点对点消息传递服务，其中一个客户端生成一条消息，另一个使用它，这在 localhost 上运行良好，但当 localhost 绑定到IP地址和客户端（消费者）在防火墙之外的系统之外，生产者在本地主机内。当前开放的端口（由我机构的系统管理员）是：

1098 1099 4444 4457（打开解决->问题为InvokerLocator建立套接字连接
[bisocket://???.??.??.???:4457/）4460

该 IP 地址对公众开放，甚至我的 Windows 7 中的防火墙也已关闭以进行测试。我在启动 JBoss AS 时使用的命令是

**run.bat -b ???.??.??.??? -c 默认值**

从昨天开始，我一直没能找到问题的任何线索，完全卡住了。我希望一些大师可以唤醒我。

错误消息就像

**org.jboss.jms.exception.MessagingNetworkFailureException**

在 org.jboss.jms.client.delegate.DelegateSupport.handleThrowable(DelegateSupport.java:245)

在……呜呜呜……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:37:43.670

我所做的是取消注释

```
<attribute name="secondaryBindPort"> 4460 </attribute> 
```

在 remoting-bisocket-service.xml 并给它一个可用的端口。重新启动 JBoss AS(5.1) 后，它开始工作。

# java - 小程序运行时按钮和滚动条不响应

> ID：12946063
> 
> 赞同：1
> 
> 时间：2012-10-18T02:07:20.280
> 
> 标签：java, button, applet, awt

我有一个仅使用 AWT 编写的小程序，其中有一个可自定义的弹跳球在其中移动。如果您使用它们然后按运行，所有按钮和滚动条都会起作用。但是，如果您先按运行，则其余按钮将不会响应。我正在发布整个程序，因为我不知道问题出在哪里或者我可以删掉什么。我在 Jcreator 中编译并在基本 HTML 页面（在 java 代码下方）的 640*480 小程序窗口内运行。

```
import java.awt.*;
import java.applet.*;
import java.awt.event.*;

public class Bounce extends Applet implements ActionListener, AdjustmentListener
{
    //runtime variables
    boolean running = false;
    boolean currentlyCircle = true;
    boolean showtails = false;

    //buttons
    Button runbutton = new Button("Run");
    Button tailbutton = new Button("Tail");
    Button shapebutton = new Button("Square");
    Button clearbutton = new Button("Clear");
    Button quitbutton = new Button("Quit");

    //text
    Label speedlabel = new Label("Speed");
    Label sizelabel = new Label("Size");

    //scrollbars
    private final int barHeight = 20;
    private final int SLIDER_WIDTH = 10;
    private final int MAXSPEED = 110;
    private final int MINSPEED = 0;
    private final int MAX_SIZE = 110;
    private final int MIN_SIZE = 10;
    Scrollbar speedbar = new Scrollbar(Scrollbar.HORIZONTAL, MAXSPEED/2, SLIDER_WIDTH, MINSPEED, MAXSPEED);
    Scrollbar sizebar = new Scrollbar(Scrollbar.HORIZONTAL, MAX_SIZE/2, SLIDER_WIDTH, MIN_SIZE, MAX_SIZE);

    //drawn objs
    int size = 50;  
    private Graphics obj;
    Point currentlocation = new Point(100,100);
    Point previouslocation;
    Point nextlocation;

    //boundaries
    int bound_x;
    int bound_y;

    //directions
    int dx = 1; //1 = left, -1 = right
    int dy = 1; //1 = up, -1 = down

    //speed
    int speed = speedbar.getValue();

    //initialize the applet and draw everything
    public void init()
    {
        Dimension appSize = this.getSize();
        bound_x = appSize.width - 100;
        bound_y = appSize.height - 232;
        double colWeight[] = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};//15 cols
        double rowWeight[] = {1,1,1,1,1,1,1,1,1,1}; //10 rows
        int colWidth[] = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};//15 cols
        int rowHeight[] = {1,1,1,1,1,1,1,1,1,1}; //10 rows
        GridBagConstraints c = new GridBagConstraints();
        GridBagLayout gbl = new GridBagLayout();
        gbl.rowHeights = rowHeight;
        gbl.rowWeights = rowWeight;
        gbl.columnWeights = colWeight;
        gbl.columnWidths = colWidth;
        c.anchor = GridBagConstraints.CENTER;

        setBounds(0,0,480,640);
        setLayout(new BorderLayout());
        Panel p = new Panel();
        p.setLayout(gbl);

        //speed scrollbar
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 1;
        c.gridy = 7;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.speedbar,c);

        //run button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 2;
        c.gridheight = 1;
        c.gridx = 5;
        c.gridy = 7;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.runbutton,c);

        //tail button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 2;
        c.gridheight = 1;
        c.gridx = 8;
        c.gridy = 7;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.tailbutton,c);

        //size scrollbar
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 11;
        c.gridy = 7;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.sizebar,c);

        //speed text label
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 1;
        c.gridy = 8;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.speedlabel,c);

        //shape button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 2;
        c.gridheight = 1;
        c.gridx = 5;
        c.gridy = 8;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.shapebutton,c);

        //clear button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 2;
        c.gridheight = 1;
        c.gridx = 8;
        c.gridy = 8;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.clearbutton,c);

        //size text label
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 11;
        c.gridy = 8;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.sizelabel,c);

        //quit button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 6;
        c.gridy = 9;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.quitbutton,c);

        //add to the screen
        p.add(this.speedbar);
        p.add(this.runbutton);
        p.add(this.tailbutton);
        p.add(this.sizebar);
        p.add(this.speedlabel);
        p.add(this.shapebutton);
        p.add(this.clearbutton);
        p.add(this.sizelabel);
        p.add(this.quitbutton);

        //add listners
        speedbar.addAdjustmentListener(this);
        runbutton.addActionListener(this);
        tailbutton.addActionListener(this);
        sizebar.addAdjustmentListener(this);
        shapebutton.addActionListener(this);
        clearbutton.addActionListener(this);
        quitbutton.addActionListener(this);

        //drawing paramaters, draw the first object
        obj = getGraphics();
        obj.drawOval(100, 100, size, size);
        obj.fillOval(100, 100, size, size);
        nextlocation = new Point(currentlocation.x+dx, currentlocation.y+dy);

        //add the panels
        add("South", p);
    }

    public void run()
    {
        while (running)
        {
            if (!showtails)
            {
                obj.setColor(Color.white);
                obj.clearRect(currentlocation.x,currentlocation.y,size+5,size+5);
            }
            update();
            draw(obj);
            pause();
            move();
        }
    }

    public void update()
    {
        previouslocation = new Point(currentlocation);
        currentlocation = nextlocation;
    }

    //draw the dot an the next location
    public void draw(Graphics obj)
    {
        obj.setColor(Color.black);
        if(currentlyCircle)
        {
            obj.drawOval(nextlocation.x, nextlocation.y, size, size);
            obj.fillOval(nextlocation.x, nextlocation.y, size, size);
        }
        else
        {
            obj.drawRect(nextlocation.x, nextlocation.y, size, size);
            obj.fillRect(nextlocation.x, nextlocation.y, size, size);
        }
    }

    //wait a period of time, depending on the speed.
    public void pause()
    {
        long waittime = MAXSPEED - speedbar.getValue();
        for (long i = 0; i < waittime*100000L; i++) { continue; }
    }

    public void move()
    {
        nextlocation = new Point(currentlocation.x+dx, currentlocation.y+dy);
        //if it will hit the right or left, flip the x direction and set it 
        if (nextlocation.x >= bound_x || nextlocation.x <= 0)
        { dx *= -1; }
        nextlocation.x += dx;
        //if it will hit the top or bottom, flip the y direction and set it
        if (nextlocation.y >= bound_y + 100 || nextlocation.y <= 0)
        { dy *= -1; }
        nextlocation.y += dy;
    }

    public void actionPerformed(ActionEvent e)
    {
        Object source = e.getSource();
        if (source == this.runbutton)
    {
        running = true;
        run();
    }
        else if (source == this.shapebutton)
        {
            if (currentlyCircle) //if circle, draw it as a rectangle
            {
                this.shapebutton.setLabel("Square");
                currentlyCircle = false;
            }
            else //if rectangle, draw it as a circle
            {
                this.shapebutton.setLabel("Circle");
                currentlyCircle = true;
            }
        }
        else if (source == this.clearbutton)
        {
            //clear tail off the screen
            obj.clearRect(0,0,bound_x,bound_y);
        }
        else if (source == this.tailbutton)
        {
            //toggle showing tails. This is used in run
            showtails = true;
        }
        else if (source == quitbutton)
        {
            //remove listeners
            stop();
        }
    }

    public void adjustmentValueChanged(AdjustmentEvent e)
    {
        Object source = e.getSource();
        //set the new size. If the size is too big its adjusted in draw
        if (source == sizebar)
        {
            size = sizebar.getValue();
        }
        if (source == speedbar)
        {
            speed = speedbar.getValue();
        }
    }

    public void stop()
    {
        this.speedbar.removeAdjustmentListener(this);
        this.runbutton.removeActionListener(this);
        this.tailbutton.removeActionListener(this);
        this.sizebar.removeAdjustmentListener(this);
        this.shapebutton.removeActionListener(this);
        this.clearbutton.removeActionListener(this);
        this.quitbutton.removeActionListener(this);
    }
} 
```

HTML：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
   <title>Bounce/title>
   <style type="text/css">
      body { color: black; background: grey }
   </style>
</head>
<body>
  <div align="center">
   <applet code=Bounce.class width=640 height=480 ></applet>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:24:58.890

方法是你的`run`问题。执行此方法后，您将阻止事件调度线程 (EDT) 调度事件，包括所有重要的重绘事件......

```
public void run()
{
    while (running)
    {
        if (!showtails)
        {
            obj.setColor(Color.white);
            obj.clearRect(currentlocation.x,currentlocation.y,size+5,size+5);
        }
        update();
        draw(obj);
        pause();
        move();
    }
} 
```

您绝不能阻止 EDT。

我会通读

*   [事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

通常，我会建议使用 a [`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)，但在你的情况下，我认为它不适合模型，相反，你将不得不使用 a[`Thread`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)和[`Runnable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html)。

这将使您的事情变得复杂，因为您永远不应该从除 EDT 之外的任何线程更新任何 UI 组件。为此，您将不得不使用[`SwingUtilities#invokeLater`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)或[`SwingUtilities#invokeAndWait`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeAndWait%28java.lang.Runnable%29)

**更新**

这是我为另一个问题整理的一个小例子

```
public class TestApplet02 extends Applet implements KeyListener, Runnable {

    Button options = new Button("Options");
    Thread thread = new Thread(this);
    int y = 0;

    public void init() {
        thread.start();
    }

    @Override
    public void start() {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                setLayout(new BorderLayout());
                addKeyListener(TestApplet02.this);
            }
        });
    }

    public void paint(Graphics graphics) {
        super.paint(graphics);
        Graphics2D g2d = (Graphics2D) graphics;
        y++;
        if (y > getHeight()) {
            y = 0;
        }
        g2d.drawLine(0, y, getWidth(), y);
    }

    public void run() {
        try {
            while (true) {
                thread.sleep(40);
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        repaint();
                    }
                });
            }
        } catch (InterruptedException exception) {
        }
    }

    public void keyPressed(KeyEvent keyEvent) {
        switch (keyEvent.getKeyCode()) {
            case KeyEvent.VK_ESCAPE:
                // pause game
                add(options);
                invalidate();
                revalidate();
        }
    }

    public void keyReleased(KeyEvent keyEvent) {
    }

    public void keyTyped(KeyEvent keyEvent) {
    }
} 
```

# ios - 在 UIViewController 的生命周期中确定 UIView 的实际大小

> ID：12946064
> 
> 赞同：0
> 
> 时间：2012-10-18T02:07:42.637
> 
> 标签：ios, uiviewcontroller, uiscrollview

我正在使用 iOS 4.3。

我有一个 UIViewController，它的视图只有一个 UIToolbar 和一个覆盖视图其余部分的子视图。主 UIView 具有弹簧和支柱，以使其符合任何形状，子视图也是如此。默认情况下，xib 是纵向的。

我把这个 UIViewController 放在我的 UISplitViewController 的右侧。在我展示这个视图控制器之前，我的 iPad 是横向的，并且一直保持横向……所以要清楚，我不会改变方向。

xib是768w和1004h，所以我的子视图是768w和960h。

在`-viewDidLoad`我的子视图中是 768x960。

在`-viewWillAppear`我的子视图中是 768x960。

在`-viewDidAppear`我的子视图中是 768x960。

但是当我在我的 iPad 上实际看到它时，UISplitViewController 的右侧是 704px 宽（应该是这样），而我的视图和我的子视图可验证只有 704px 宽。

但是，在代码或视图控制器生命周期中，我无法查询`self.view`或我的子视图并看到宽度为 704 像素。

我需要根据整体视图的大小进行一些更改，因为我的子视图是 UIScrollView，我想根据我的`self.view`.

在 View Controller 生命周期中必须有某种方式可以让我获得视图的真实大小。我已经尝试过`frame`and the`bounds`但它们都一直显示 768x906。

```
NSLog(@"scroll view frame=%@ bounds=%@", NSStringFromCGRect(self.scrollView.frame), NSStringFromCGRect(self.scrollView.bounds));

NSLog(@"view frame=%@ bounds=%@", NSStringFromCGRect(self.view.frame), NSStringFromCGRect(self.view.bounds));

UIViewController *detailVC = [self.splitViewController.viewControllers objectAtIndex:1];
NSLog(@"splitview frame=%@ bounds=%@", NSStringFromCGRect(detailVC.view.frame), NSStringFromCGRect(detailVC.view.bounds)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:12:49.313

您应该使用**UIViewController**方法`viewWillLayoutSubviews`。这是更新滚动视图的最佳位置。

请记住，您的视图控制器将以纵向开始。在某些时候，它会旋转到横向。出于调试目的，您可能希望覆盖`willRotateToInterfaceOrientation:duration:`and`didRotateFromInterfaceOrientation:`方法。

# php - 根据特定键对php中的对象数组进行排序

> ID：12946068
> 
> 赞同：0
> 
> 时间：2012-10-18T02:07:55.567
> 
> 标签：php, arrays, sorting, object

> **可能的重复：对象数组**
> [排序](https://stackoverflow.com/questions/2122062/sort-array-of-objects)
> [在php中对对象数组进行排序](https://stackoverflow.com/questions/12912333/sort-an-object-array-in-php)

编辑：这是一个重复的问题。关闭这个

我有一个对象数组存储在 $articles 中，它们不一定以任何特定的顺序返回。我正在尝试根据 idarticles 对对象进行排序。我知道如何在 javascript 中执行此操作，但不知道如何在 PHP 中执行此操作。这是一个示例响应。为了便于阅读，我用 json_encode 回应了它。任何帮助都会很棒

```
[
   {
      "idarticles":"61",
      "full_text":"",
      "main_image":"",
      "tags":null,
      "url":null,
      "summary":null,
      "title":"No Title Given"
   },
   {
      "idarticles":"64",
      "full_text":"",
      "main_image":"http:\/\/i2.cdn.turner.com\/cnn\/dam\/assets\/121014085050-11-stratos-1014-horizontal-gallery.jpg",
      "tags":"Sound,New Mexico,Maxima and minima",
      "url":"some string",
      "summary":"text",
      "title":"text"
   },
   {
      "idarticles":"63",
      "full_text":"",
      "main_image":"http:\/\/i2.cdn.turner.com\/cnn\/dam\/assets\/121014085050-11-stratos-1014-horizontal-gallery.jpg",
      "tags":"Sound,New Mexico,Maxima and minima",
      "url":"some string",
      "summary":"text",
      "title":"text"
   }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:18:12.333

这是易于使用的[`uasort`](http://www.php.net/manual/en/function.uasort.php)功能（这是用户定义的排序）：

```
uasort($yourData, function ($a, $b) {
    if ($a['idarticles'] == $b['idarticles']) {
        return 0;
    }
    return ($a['idarticles'] < $b['idarticles']) ? -1 : 1;
}); 
```

比较函数在这里非常标准（请参见[此处](http://www.php.net/manual/en/function.uasort.php)的示例） - 只是它不是按值本身排序，而是按数据中的某些键排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:17:39.690

尝试使用[`usort`](http://www.php.net/manual/en/function.usort.php)：

```
function sortByArticleId($a,$b){
  return strcmp($a->idarticles,$b->idarticles);
}

usort($ary,'sortByArticleId'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T02:18:32.737

你可以简单地做

```
usort($list, function ($a, $b) {
    $a = $a['idarticles'];
    $b = $b['idarticles'];
    return ($a == $b) ? 0 : (($a < $b) ? -1 : 1);
}); 
```

# r - 如果一个数字介于两个数字之间，则赋值

> ID：12946070
> 
> 赞同：10
> 
> 时间：2012-10-18T02:08:03.783
> 
> 标签：r, if-statement

我试图将 -1 的值分配给我的向量中介于 2 和 5 之间的每个数字。

我认为 if - then 语句会起作用。我遇到了一些麻烦。我不认为 (2<x<5) 是正确的，但我不确定如何在 R 之间写。有人可以帮忙吗？谢谢

```
x <- c(3.2,6,7.8,1,3,2.5)
if (2<x<5){
    cat(-1)
} else {
    cat (x)
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-18T02:10:57.713

您的代码中有许多语法错误。

尝试使用`findInterval`

```
x[findInterval(x, c(2,5)) == 1L] <- -1
x
## [1]  -1.0  6.0  7.8  1.0 -1.0 -1.0 
```

阅读`?findInterval`有关使用的更多详细信息`findInterval`

你也可以使用`replace`

```
replace(x, x > 2 & x < 5, -1) 
```

注意

*   因为`2<x<5`你需要写`x > 2 & x < 5`
*   `cat`将输出到控制台或文件/连接。它不会分配任何东西。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-18T02:16:32.363

您可能只想用 -1 替换这些元素。

```
> x[x > 2 & x < 5] <- -1; x
[1] -1.0  6.0  7.8  1.0 -1.0 -1.0 
```

你也可以使用`ifelse`.

```
> ifelse(x > 2 & x < 5, -1, x)
[1] -1.0  6.0  7.8  1.0 -1.0 -1.0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-24T12:42:29.647

我将解决方案与`microbenchmark`：

```
library(microbenchmark)
library(TeachingDemos)

x = runif(100000) * 1000
microbenchmark(200 %<% x %<% 500
               , x > 200 & x < 500
               , findInterval(x, c(200, 500)) == 1
               , findInterval(x, c(200, 500)) == 1L
               , times = 1000L
               ) 
```

结果如下：

```
 expr       min        lq      mean    median        uq       max neval
                  200 %<% x %<% 500 17.089646 17.747136 20.477348 18.910708 21.302945 113.71473  1000
                  x > 200 & x < 500  6.774338  7.092153  8.746814  7.233512  8.284603 103.64097  1000
  findInterval(x, c(200, 500)) == 1  3.578305  3.734023  5.724540  3.933615  6.777687  91.09649  1000
 findInterval(x, c(200, 500)) == 1L  2.042831  2.115266  2.920081  2.227426  2.434677  85.99866  1000 
```

你应该拿`findInterval`。请考虑将其与`1L`而不是`1`. 它几乎快两倍。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-17T21:34:10.843

我更喜欢根据明确定义的数字区间为变量赋值是使用基本 R 语法：

```
 DF$NewVar[DF$LowerLimit <= DF$OriginalVar & DF$OriginalVar < DF$UpperLimit] = "Normal"
 DF$NewVar[DF$LowerLimit < DF$OriginalVar] = "Low"
 DF$NewVar[DF$OriginalVar >= DF$UpperLimit] = "High" 
```

我认为这种语法比任何数量的 R 函数都更清晰，主要是因为可以快速自定义代码以指定包含与排除间隔。在实践中，很常见的情况是，区间可以定义为包含（即 [-x 到 +x]）或排除（即 (-x 到 +x)）或组合（即 [- x 到 +x))。

此外，如果其他人稍后对其进行审查，基本语法可以使代码更加清晰。每个独特的函数库似乎都有自己独特且略有不同的语法，以达到与使用基本 R 语法明确定义区间相同的特异性水平。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T15:53:43.427

这是另一种与原始方法更相似的方法：

```
library(TeachingDemos)

x <- c(3.2,6,7.8,1,3,2.5)

(x <- ifelse( 2 %<% x %<% 5, -1, x ) ) 
```

# c# - Word 互操作代码中的歧义

> ID：12946073
> 
> 赞同：9
> 
> 时间：2012-10-18T02:08:51.860
> 
> 标签：c#, ms-word, vsto, compiler-warnings

[我最近在这里](https://stackoverflow.com/questions/12945462/c-sharp-microsoft-office-interop)发布了一个关于阅读 Word 文件的问题。

该应用程序运行良好，但我收到此警告消息；

> 警告方法“Microsoft.Office.Interop.Word._Document.Close(ref object, ref object, ref object)”和非方法“Microsoft.Office.Interop.Word.DocumentEvents2_Event.Close”之间存在歧义。使用方法组。

某些 using 命名空间似乎有些歧义，我想知道如何解决这个问题。虽然应用程序运行，但我想尽量减少警告/错误。

我为该课程提供了以下代码；它所指的行是这两行

```
docs.Close(ref nullobject, ref nullobject, ref nullobject);
wordObject.Quit(ref nullobject, ref nullobject, ref nullobject); 
```

整个代码：

```
namespace Wizard.Classes
{
    class MSWordReader
    {
        public void read(String filename)
        {
            String buffer = "";
            try
            {
                Microsoft.Office.Interop.Word.Application wordObject = new   
                Microsoft.Office.Interop.Word.Application();
                object file = filename; //this is the path
                object nullobject = Type.Missing;
                object visible = false;
                object readonlyp = true;
                object addtorecent = false; //add to words recent filelist

                Microsoft.Office.Interop.Word.Document docs = wordObject.Documents.Open
                    (ref file,ref nullobject, ref readonlyp, ref addtorecent,
                    ref nullobject, ref nullobject, ref nullobject, ref nullobject,
                    ref nullobject, ref nullobject, ref nullobject, ref visible,
                    ref nullobject, ref nullobject, ref nullobject, ref nullobject
                                    );
                docs.ActiveWindow.Selection.WholeStory();
                docs.ActiveWindow.Selection.Copy();
                IDataObject data = Clipboard.GetDataObject();
                buffer = data.GetData(DataFormats.Text).ToString();

                docs.Close(ref nullobject, ref nullobject, ref nullobject);

                wordObject.Quit(ref nullobject, ref nullobject, ref nullobject);
                MessageBox.Show(buffer);

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-18T02:22:27.307

要解决歧义，请使用：

```
((Microsoft.Office.Interop.Word._Document)docs).Close(ref nullobject, ref nullobject, ref nullobject);    
((Microsoft.Office.Interop.Word._Application)wordObject).Quit(ref nullobject, ref nullobject, ref nullobject); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T02:22:09.287

尝试铸造你的`docs`第一个：

```
((_Document)docs).Close(ref nullobject, ref nullobject, ref nullobject); 
```

[Microsoft.Office.Interop.Word.Document](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.document.aspx)接口实现[DocumentEvents2_Event](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word._document%28v=office.11%29.aspx)[和](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.documentevents2_event%28v=office.11%29.aspx)_Document接口。每个都有一个 close 方法，编译器很难确定你的意思。

或者，您可以首先将`docs`变量声明为 a `_Document`：

```
Microsoft.Office.Interop.Word._Document docs = wordObject.Documents.Open ... 
```

相同的分辨率可用于您的歧义`wordObject`，将其转换为`_Application`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-29T23:18:44.177

建议的解决方案运行良好，但它给 ReSharper 留下了一个不明确的调用错误，除了在 R# 错误对话框中使用旧的“忽略错误”技巧之外，您无法摆脱该错误，即使编译器对此很满意。

我无法从 R# 中真正得到一个好的解决方案，而且它只出现在少数几个地方，所以我发现的最不坏的答案是有效的并且不会产生 Visual Studio 或 R# 错误是强制转换为动态的。

```
((dynamic) Doc).Close(); 
```

不理想，但我只是捏着鼻子用它。如果您要多次使用它，您显然可以保存到动态变量中。从技术上讲，您可以对所有内容使用动态（它只是后期绑定的 COM），但是您会失去所有的智能感知，所以我只在它出现的少数方法和事件上使用它。

# zend-framework - 在 Zend Framework 中更改路由以隐藏密钥

> ID：12946075
> 
> 赞同：1
> 
> 时间：2012-10-18T02:08:59.143
> 
> 标签：zend-framework, routes, zend-route

我正在使用 Zend Framework 构建一个网站，但我对它很陌生，仍然没有真正理解它。

我有一个像这样的网址：

```
http://localhost/public/directory/category/catid/art 
```

我想要的是为 URL 创建一个路由，如下所示：

```
 http://localhost/public/directory/category/art 
```

我已经完成了简单的路线，例如：

```
$frontController = Zend_Controller_Front::getInstance();
$router = $frontController->getRouter();

// TERMNS  ROUTE
$route = new Zend_Controller_Router_Route_Static(
   'termns',
    array('controller' => 'Index', 'action' => 'termns')
);

$router->addRoute('terms', $route); 
```

有没有办法，在此基础上让我控制其他路线？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:33:49.480

从`category/catid/art`到`category/art`。将此方法添加到您的 Bootstrap.php：

```
protected  function _initRouter()
{
    $router = Zend_Controller_Front::getInstance()->getRouter();
    $router->addRoute('category/:catid', new Zend_Controller_Router_Route('category/:catid',array(
        'module'     => 'default',
        'controller' => 'category',
        'action'     => 'index' // Check your action and controller
)); 
```

在控制器的操作中，`category/testid`您可以`$this->_getParam('catid')`使用`testid`.

# ios - 在 iPhone 应用程序中自定义许多 UIButton

> ID：12946076
> 
> 赞同：0
> 
> 时间：2012-10-18T02:09:06.773
> 
> 标签：ios, uibutton, calculator, iboutlet

在一个 iPhone 应用程序中，我在一个视图中有一堆 UIButtons（比如大约 60 个按钮）。我正在使用以下方法来自定义按钮的外观。

```
- (void) setButtonAttributes:(UIButton *) buttonName withTitle:(NSString *)title withImage:(NSString *) imageSuffix
{
    NSString *unpressedName, *pressedName;
    pressedName = [NSString stringWithFormat:@"pressed%@.png", imageSuffix];
    unpressedName = [@"un" stringByAppendingString: pressedName];
    buttonName.layer.cornerRadius = 5;
    buttonName.clipsToBounds = YES;
    [buttonName setTitle:title forState:UIControlStateNormal];
    if ([imageSuffix isEqualToString:@""] || [imageSuffix isEqualToString:@"brown"] ||  [imageSuffix isEqualToString:@"green"])
    {
    buttonName.titleLabel.font = [UIFont boldSystemFontOfSize:15];
    [buttonName setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [buttonName setTitleColor:[UIColor whiteColor] forState:UIControlStateHighlighted];
    [buttonName setBackgroundImage:[UIImage imageNamed:unpressedName] forState:UIControlStateNormal];
    [buttonName setBackgroundImage:[UIImage imageNamed:pressedName] forState:UIControlStateHighlighted];
    }
    else
    {
    [buttonName setImage:[UIImage imageNamed:unpressedName] forState:UIControlStateNormal];
    [buttonName setImage:[UIImage imageNamed:pressedName] forState:UIControlStateHighlighted];
    }
    [buttonName addTarget:self action:@selector(playClick) forControlEvents:UIControlEventTouchDown]; 
```

}

因此，我在视图的 - (void)viewDidLoad 中调用了这个方法大约 60 次。例如：

```
 [self setButtonAttributes:firstButton withTitle:@"First" withImage:@"brown"]; 
```

一些按钮在 IB 中可见。但也有一些按钮在 IB 中不可见，所以我使用以下内容来展示它们：

```
secondButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
secondButton.frame = CGRectMake(64, 394, BUTTOM_WIDTH, BUTTOM_HEIGHT);
secondButton.bounds = CGRectMake(0, 0, BUTTOM_WIDTH, BUTTOM_HEIGHT);
[self setButtonAttributes:secondButton withTitle:@"Second" withImage:@"brown"];    
[secondButton addTarget:self action:@selector(someSelector) forControlEvents:UIControlEventTouchUpInside];
[somePane addSubview:secondButton];  //somePane is a scrollview. 
```

并且所有这 60 个按钮都在视图的头文件中定义了一个 IBOutlet。例如：

```
 IBOutlet  UIButton *firstButton; 
```

当我将我的应用程序与 iPhone 的计算器应用程序进行比较时，我注意到 iPhone 的计算器中的按钮感觉比我的应用程序快得多。所以基本上，我的问题是与 iPhone 的计算器相比，我的应用程序中按钮的响应时间要慢得多。我想知道这是否与我在上面的代码中解释的自定义按钮的方式有关？如果是这样的话，自定义这么多按钮的正确方法是什么？

# asp.net-mvc - 在 ASP.NET MVC 中使用 foreach 编辑列表

> ID：12946077
> 
> 赞同：1
> 
> 时间：2012-10-18T02:09:09.533
> 
> 标签：asp.net-mvc

抱歉，如果这是一个非常愚蠢的问题。

如果我有一个带有列表的模型，例如：

```
public class Edit_model
{
    public List<Other_model> Items { get; set; }

    /// <summary>
    /// Default class constructor
    /// </summary>
    public RecipesEdit_model()
    {
        this.Items = new List<Other_Model>();
    }
} 
```

然后我将它传递给我的`Edit`操作，填充`Items`然后将其发送到视图。由于`Items`是一个列表，我总是尝试做这样的事情：

```
 <div>
            <ul>
                @foreach (var item in Model.Items)
                {
                    <li>
                        @Html.EditorFor(m => item, "_ItemEditorTemplate")
                    </li>
                }
            </ul>
        </div> 
```

这总是搞砸模板中生成的控件的 id，因此对`Edit`post 操作的模型绑定永远不会起作用。

如果我`Items`使用循环进行循环，它确实有效`for`，如下所示：

```
 <div>
            <ul>
                @for (int i = 0; i < Model.Items.Count; i++)
                {
                    <li>
                        @Html.EditorFor(m => m.Items[i], "_ItemEditorTemplate")
                    </li>
                }
            </ul>
        </div> 
```

我知道为什么会这样，因为我得到的 lambda 表达式实际上在函数中使用了正确的变量......但我不太喜欢这个，因为根据 C# 编程的经验，你可能会遇到索引问题，所以我很想而是使用`foreach`.

使它起作用的语法是什么`foreach`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:43:36.747

```
@Html.EditorFor(m => item, "_ItemEditorTemplate") 
```

这是正确的。

m 只是一个变量，实际上并没有在方法体中使用它。

什么是错误信息？

# android - 在 Android 上从蓝牙获取文本

> ID：12946079
> 
> 赞同：1
> 
> 时间：2012-10-18T02:09:26.297
> 
> 标签：android, bluetooth

我正在为 android 编写一个应用程序（API 级别：7），它允许在 android 设备和另一个设备（例如，另一个 android 设备）之间交换文本消息。这是BlueToothChat 的简单版本。

我正在连接并成功启动侦听线程，但是当收到消息时（当到达设置文本 os stBluetooth TextView 并收到消息的命令时），应用程序崩溃。请问，这里有人可以帮我吗？

我的整个代码写在下面：

```
public class ControlebluetoothActivity extends Activity {
    //variaveis globais:
    BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    TextView stBluetooth;
    TextView stHttp;

    protected BluetoothSocket mySocket;
    private BluetoothDevice  mBluetoothDevice = null;
    private InputStream MyInStream;
    private OutputStream MyOutStream;
    private ConnectedThread mConnectedThread;
    private Verifica mVerifica;

    private boolean flag_t;
    byte[] bufferIn = new byte[100];
    byte[] bufferIn_temp = new byte[10];
    int bytesIn=0;
    int bytesIn_tmp=0;
    String strTempIn;
    String strTempIn2;
    String strBufferIn;
    String recebido;
    Timer timer = new Timer();

    byte[] buffer = new byte[1024];
    int bytes=0;

    private static final int REQUEST_ENABLE_BT = 2;
    private static final UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        stBluetooth=(TextView)findViewById(R.id.status_bluetooth);
        stHttp=(TextView)findViewById(R.id.status_http);

        //verifica se o dispositivo aceita bluetooth
        if (mBluetoothAdapter == null) {
            stBluetooth.setText("Dispositivo não possui bluetooth");

        } else {

                //ativação do bluetooth caso este nao esteja habilitado

                if (!mBluetoothAdapter.isEnabled()) 
                    {       
                        stBluetooth.setText("Habilitando bluetooth");
                        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
                    }  

                //scaneando e conectando:
                if (mBluetoothAdapter.isEnabled()) 
                {
                    stBluetooth.setText("Conectando ao shield bluetooth");
                    String endereco ="00:12:05:01:94:20"; //for the beginning, i fixed the MAC addres of my bluetooth device

                    mBluetoothDevice = mBluetoothAdapter.getRemoteDevice(endereco);

                }

                BluetoothSocket tmp = null;

                try {
                    tmp = mBluetoothDevice.createRfcommSocketToServiceRecord(MY_UUID);
                } catch (IOException e) {
                    stBluetooth.setText("Primeira tentativa - falha");
                }
                mySocket = tmp;

                try {
                mySocket.connect();
                } catch (IOException e) {
                    stBluetooth.setText("Segunda tentativa - falha");
                }   

                try {
                    MyInStream = mySocket.getInputStream();
                } catch (IOException e) {
                    stBluetooth.setText("Falha de conexão");
                }

                stBluetooth.setText("Conectado a "+mySocket.getRemoteDevice());

                //thread que faz a comunicação

                mConnectedThread = new ConnectedThread(mySocket);
                mConnectedThread.start();

      }
 }

    private class ConnectedThread extends Thread {

        public ConnectedThread(BluetoothSocket socket) {
        mySocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the input and output streams, using temp objects because
        // member streams are final
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) { }

        MyInStream = tmpIn;
        MyOutStream = tmpOut;

        }
        public void run() {

            // Keep listening to the InputStream while connected
            while (true) {
                try {
                    // Read from the InputStream
                    bytes = MyInStream.read(buffer);

                    recebido=buffer.toString();

                } catch (IOException e) {

                }

                stBluetooth.setText("Dado: "+recebido);  //it crashes here!!!

            }
        }

    }  

    private class Verifica extends Thread {

        public Verifica() {

        }
        public void run() {

            while (true) {
                        stBluetooth.setText("dado: "+buffer.toString());
                        try{ Thread.sleep(1000); }catch(InterruptedException e){ }
                }

        }
    }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:23:19.083

您的应用程序崩溃的原因是您试图从内部线程更新 GUI 线程。

尝试这个：

```
public void run() {

    // Keep listening to the InputStream while connected
    while (true) {
        try {
            // Read from the InputStream
            bytes = MyInStream.read(buffer);

            recebido=buffer.toString();

        } catch (IOException e) {
        }

        runOnUiThread(new Runnable() {
            public void run() {
                stBluetooth.setText("Dado: "+recebido);
            }
        });

    }
} 
```

# emacs - 最新的 CEDET 版本无法加载语义包

> ID：12946084
> 
> 赞同：3
> 
> 时间：2012-10-18T02:09:45.290
> 
> 标签：emacs, cedet

在使用最新版本的 CEDET 时，我在加载 Alex Ott 在[其著名的 CEDET 指南中推荐的一些语义包时遇到问题。](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)

我之前的设置在 Emacs 24.2.1 中没有问题，但我刚刚在 Bazaar**升级**到最新版本的 CEDET，并且 Emacs 在尝试加载`semantic-*`包时遇到了问题。按照 Alex 的指南，我的`.emacs`文件中有以下命令：

```
(require 'semantic-ia)
(require 'semantic-gcc)
(require 'semanticdb) 
```

Emacs 现在抱怨说它无法加载这些模块。

运行命令时同样的事情：

```
(global-semantic-tag-folding-mode 1) 
```

这个功能在最新版本的 CEDET 中哪里去了？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:28:09.097

在 CEDET 1.1 之后，它开始使用与 GNU Emacs 中的 CEDET 相同的激活方案，但文章仍然讨论 1.1 之前的 CEDET 版本。我计划在有时间的时候更新文章。同时，您可以使用我的[实际 CEDET 配置](https://github.com/alexott/emacs-configs/blob/master/rc/emacs-rc-cedet.el)- 它使用新的激活方案。

# database - 数据库规范化

> ID：12946085
> 
> 赞同：0
> 
> 时间：2012-10-18T02:09:47.560
> 
> 标签：database, dependencies, primary-key, normalization, partial

我想问一个关于标准化的问题。

我有 2 个 PK，VIN 和 Reg_no。VIN 是车辆 ID 号，注册号是车牌号。我有一个称为当前里程表的属性。它对 2 个 PK 有部分依赖还是完全依赖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:32:19.380

> 我有 2 个 PK，VIN 和 Reg_no。VIN 是车辆 ID 号，注册号是车牌号。

你有两个候选键。VIN是唯一的；车牌号也*可能是*唯一的。（但这取决于您的应用程序。）

任何键都可以由多列组成，但您没有一个多列键，您只有一个键 (VIN) 或两个单独的键（VIN 和车牌）。这并没有错。

> 我有一个称为当前里程表的属性。它对 2 个 PK 有部分依赖还是完全依赖？

无论您在此表中只有一个键还是两个键，每个键都只有一列。由于每个可能的键只有一列，因此不可能有部分键依赖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:19:36.660

您可能只需要 ONE PK。使用 VIN，因为它绝对是独一无二的。注册号可以跨州/省“重复使用”。

您的“复合主键”将在您需要的连接表上。

**VEHICLE_TABLE**

```
VIN                  nvarchar(50) [pk]
RegistrationNumber   nvarchar(50)
NumberOfPassengers   int
Make                 nvarchar(20)
Model                nvarchar(20)
Color                nvarchar (20)
Features             nvarchar(MAX) 
```

**DRIVER_TABLE**

```
DriverID             int [pk]
Name                 nvarchar(20)
Address              nvarchar(50)
OtherCrap            nvarchar(MAX) 
```

**POSITION_TABLE**

```
PositionID           int [pk]
Position             nvarchar(50) 
```

**MAINTENANCE_TABLE**

```
MaintenanceID        int [pk]
VIN                  nvarchar(50) [fk - VEHICLE_TABLE.VIN]
Odometer             decimal(9,2)
MaintenanceDate      DateTime 
```

**STAFF_TABLE**

```
StaffID              int [pk]
Name                 nvarchar(20)
PositionID           int [fk - POSITION_TABLE.PositionID] 
```

**VEHICLE_JOIN_DRIVER_TABLE**

```
VIN                  nvarchar(50) [cpk fk - VEHICLE_TABLE.VIN]
DriverID             int [cpk fk - DRIVER_TABLE.DriverID] 
```

**VEHICLE_JOIN_STAFF_TABLE**

```
VIN                  nvarchar(50) [cpk fk - VEHICLE_TABLE.VIN]
DriverID             int [cpk fk - DRIVER_TABLE.DriverID]
StaffID              int [cpk fk - STAFF_TABLE.StaffID] 
```

这个答案也试图“有点”回答你的其他问题。
[我应该分配给我的桌子的 PK 和 FK 是什么？](https://stackoverflow.com/questions/12601416/what-is-the-pk-and-fk-i-should-assign-to-my-table)

# android - 带有 ContextMenu 选项的 ListView

> ID：12946088
> 
> 赞同：3
> 
> 时间：2012-10-18T02:10:04.737
> 
> 标签：android, listview, textview, contextmenu

首先，我的英语不太好。我有一个`ListView` [这样](http://lalit3686.blogspot.com.es/2012/06/today-i-am-going-to-show-how-to-deal.html)的和另一个`TextView`。我的问题是我想放在`contextMenu`那里，但我不能。我为此浪费了很多时间，找不到解决方案。

我用过 `registerForContextMenu(listViewTotes)`,`onCreateContextMenu`和`onContextItemSelected`.

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:27:17.063

我建议你使用 OnItemLongClickListener()。看起来，OnItemClickListener() 没有响应 registerForContextMenu(arg0)。

对于使用 OnItemLongClickListener() 示例，代码如下：

```
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.activity_main);

    listView = (ListView) findViewById(R.id.my_list);
    adapter = new MyAdapter(this,getModel());
    listView.setAdapter(adapter);
    listView.setOnItemLongClickListener(new PlayListOnItemLongClickListener());
}

private class PlayListOnItemLongClickListener implements AdapterView.OnItemLongClickListener {
    public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        registerForContextMenu(arg0);

        return false;
    }
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    getMenuInflater().inflate(R.menu.context_playlist_operation, menu);
    menu.setHeaderIcon(R.drawable.ic_launcher);
    menu.setHeaderTitle("What do you want to do");
} 
```

在 /ListViewTest/res/menu/context_playlist_operation.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <group>
        <item
            android:id="@+id/context_playlist_remove_playlist"
            android:title="@string/app_name"
            />
    </group>
</menu> 
```

# git - 为什么我必须做一个 git rebase --skip (git svn)

> ID：12946096
> 
> 赞同：2
> 
> 时间：2012-10-18T02:11:02.043
> 
> 标签：git, git-svn, git-rebase

我做了一个`git svn rebase`合并远程更改并发生冲突。手动解决冲突并尝试`git rebase --continue`，但它并没有让我这样做。

然后我发现[了这个](http://tech.hickorywind.org/articles/2008/06/10/larry-vs-the-git-rebase-merge-conflict)：

> 如果它抱怨“您是否忘记调用 'git add'？”，那么显然您的编辑将冲突变成了无操作更改。执行“git rebase --skip”跳过它。（非常奇怪，但确实如此。）

谁能向我解释为什么`git rebase --continue`不工作而我不得不做一个`git rebase --skip`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:18:30.910

只是：

```
git rebase --skip 
```

因为通过合并，您不会手动更改任何内容。

`git rebase --continue`仅在合并中更改冲突文件时使用。

`git rebase --skip`在合并中不更改冲突文件时使用。

# excel - VBA 过滤年份

> ID：12946098
> 
> 赞同：0
> 
> 时间：2012-10-18T02:11:44.173
> 
> 标签：excel, vba

我有下面显示的代码。我第一次过滤，效果很好。然而第二次，它没有。过滤的列包含年份。

```
For i = 1 To LastRow
    If wSheet.Range("A1").Offset(i, 0) <> wSheet.Range("A1").Offset(i + 1, 0) Then
        WellName = wSheet.Range("A1").Offset(i, 0)
        Set rng = wSheet.Range("A1", Cells(LastRow, LastColumn))
        rng.AutoFilter Field:=1, Criteria1:=Name
        L_top = wSheet.Range("A2:A" & LastRow).SpecialCells(xlCellTypeVisible).Row
        L_bot = wSheet.Range("A2:A" & LastRow).SpecialCells(xlCellTypeVisible).Count
        LastRowFilter = wSheet.Range("A1").End(xlDown).Row
        LastColumnFilter = wSheet.UsedRange.Columns.Count

        For j = 1 To LastRowFilter
            If Year(wSheet.Range("B1").Offset(j, 0)) <> Year(wSheet.Range("B1").Offset(j + 1, 0)) Then
                ReportYear = Year(wSheet.Range("B1").Offset(j, 0))
                Set rng2 = wSheet.Range("B1", Cells(LastRowFilter, LastColumnFilter))
                rng2.AutoFilter Field:=2, Criteria2:=ReportYear
                L_top = wSheet.Range("B2:B" & LastRowFilter).SpecialCells(xlCellTypeVisible).Row
                L_bot = wSheet.Range("B2:B" & LastRowFilter).SpecialCells(xlCellTypeVisible).Count

            End If
        Next

    End If
 Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:45:40.107

看来您的问题是您的第二个过滤器（似乎初始过滤器应该导致错误，但如果它没有损坏，请不要修复它:)）。问题在于以下几行：

```
ReportYear = Year(wSheet.Range("B1").Offset(j, 0))
Set rng2 = wSheet.Range("B1", Cells(LastRowFilter, LastColumnFilter))
rng2.AutoFilter Field:=2, Criteria2:=ReportYear 
```

您设置`ReportYear`等于要过滤的年份（有意义），但随后您尝试过滤等于该年份的值。这在逻辑上似乎是有道理的，但请记住该列包含日期，而不是年份。对您的代码一无所知（因此对任何其他错误表示歉意），这似乎适用于我的简单测试：

```
ReportYear = Year(wSheet.Range("B1").Offset(j, 0))
Set rng2 = wSheet.Range("B1", Cells(LastRowFilter, LastColumnFilter))
rng2.AutoFilter Field:=2, Criteria1:= ">=" & DateSerial(ReportYear, 1, 1), _
               Operator:=xlAnd, Criteria2:="<=" & DateSerial(ReportYear, 12, 31) 
```

这会使用您的`ReportYear`值，但会将过滤器转换为“显示 1 月 1 日至 12 月 31 日之间的所有日期”的形式`ReportYear`。我同意这似乎有点不雅（我敢肯定这里的一位大师有一个更短的解决方案），但它可能适用于您的情况。

# asp.net - 不支持关键字：“元数据”。？使用 MVC3 的 Entityt 框架中的 Sql 连接

> ID：12946099
> 
> 赞同：19
> 
> 时间：2012-10-18T02:11:52.897
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4.3

我将 Entity Framework 4 与我的 Asp.Net MVC3 应用程序一起使用。我的问题是我正在使用实体框架对我的数据库执行操作，这工作正常。出于其他目的，我还使用 Sql Connection 来存储和检索数据库中的数据。我正进入（状态

```
[Keyword not supported: 'metadata'] 
```

连接我的数据库时出错。

这是我的网络配置

```
 <add name="VibrantEntities" connectionString="metadata=res://*/Vibrant.csdl|res://*/Vibrant.ssdl|res://*/Vibrant.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=KAPS-PC\KAPSSERVER;initial catalog=vibrant;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

我正在使用类库，所以这是我的应用程序配置。

```
 <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />

   <add name="VibrantEntities" connectionString="metadata=res://*/Vibrant.csdl|res://*/Vibrant.ssdl|res://*/Vibrant.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=KAPS-PC\KAPSSERVER;initial catalog=vibrant;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-18T02:16:17.347

ADO.NET（在本例中`SqlConnection`）的连接字符串不采用这种格式。您正在使用特定于实体框架的一个。ADO.NET 应该是这样的：

```
"data source=KAPS-PC\KAPSSERVER;initial catalog=vibrant;integrated security=True" 
```

因此，总而言之，您需要两个单独的连接字符串，一个用于 EF，一个用于 ADO.NET

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-06-11T02:27:27.790

您的连接字符串特定于实体框架并包含元数据。您需要从中获取您的提供者连接字符串。您可以使用[`EntityConnectionStringBuilder`](https://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnectionstringbuilder.providerconnectionstring(v=vs.110).aspx)：

```
var efConnectionString = "Your Entity Framework connection string";
var builder = new EntityConnectionStringBuilder(efConnectionString);
var regularConnectionString = builder.ProviderConnectionString; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-25T16:00:13.760

另一种选择（同一事物的 2 个单独的连接字符串除外）是构建一个从 Entity Framework 对象返回 ADO.NET 连接字符串的方法：

```
using System.Data.EntityClient;
using System.Data.SqlClient;
...
private string GetADOConnectionString()
{
    SalesSyncEntities ctx = new SalesSyncEntities(); //create your entity object here
    EntityConnection ec = (EntityConnection)ctx.Connection;
    SqlConnection sc = (SqlConnection)ec.StoreConnection; //get the SQLConnection that your entity object would use
    string adoConnStr = sc.ConnectionString;
    return adoConnStr;
} 
```

（我把它放在我的 edmx 文件所在的类库中）

（我从[http://justgeeks.blogspot.com/2009/11/getting-sqlconnection-from.html](http://justgeeks.blogspot.com/2009/11/getting-sqlconnection-from.html)得到这个）

甚至更好...如果您的 SQLConnection 内容是手动 SQL 查询，请通过 ExecuteStoredCommand 完全跳过 SQLConnection：

```
new AdventureEntities().ExecuteStoreCommand(
        @"    UPDATE Users
              SET lname = @lname 
              WHERE Id = @id",
        new SqlParameter("lname", lname), new SqlParameter("id", id)); 
```

（我从[Entity Framework 得到了这个，得到了一个 sql 连接](https://stackoverflow.com/questions/5286071/entity-framework-getting-an-sql-connection)）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T03:26:55.813

这里有一个更好的解决方案，使用 Entity Framework Power 工具，将您的数据库反向工程到您的项目中，然后您可以在这两种情况下使用单个 EF 连接字符串（这是一个正常的连接字符串）。

# mysql - 如何在mysql中搜索多类别

> ID：12946103
> 
> 赞同：4
> 
> 时间：2012-10-18T02:12:08.143
> 
> 标签：mysql, sql, search

**视频：**

```
v_id, 
v_name 
```

**财产：**

```
p_id,
p_name 
```

**财产视频：**

```
pv_id,
pv_v_id, <- video id
pv_p_id, <- property id 
```

我想搜索 muti-cat 例如：

给定一些 `p_id`（属性 id）我想搜索匹配那些 id 视频

需要 property_video 中的所有 p_id 和相同的 pv_v_id

然后mysql写道：

```
SELECT
  a.*, 
  b.* 
FROM 
  video as a, 
  property_video as b 
WHERE
  a.v_id = b.pv_v_id 
  and b.pv_p_id in(12,15) 
GROUP BY a.v_id; 
```

我知道这部分 `in(12,15)`必须改为“和”，但我不知道如何使它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:32:33.447

在这里，我们将property_video 和video 加入到表示视频ID 的列上。where 条件允许我们将结果限制为仅具有包含在 IN 子句中的属性的视频。

```
SELECT v.v_id
FROM property_video pv
    JOIN video v
    ON pv.pv_v_id = v.v_id
WHERE pv.pv_p_id IN (12,15)
GROUP BY v.v_id
HAVING count(distinct pv.pv_p_id) = 2 
```

By grouping by the video ID and then only keeping the videos that have 2 distinct properties (i.e. must have both, not just one), you achieve the multi-category requirement. This assumes that your method to build the syntax of the query gives you the ability to adjust the number in the HAVING clause to match the number of distinct properties in your intended filter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:20:44.590

我认为你需要使用 innerJoin，试试这个。

```
SELECT
  a.*, 
  b.* 
FROM 
  video as a, 
InnerJoin property_video as b
WHERE a.v_id = b.pv_p_id
and b.pv_p_id in(12,15) 
GROUP BY a.v_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T02:21:41.487

```
select a.*, b.*, c.* from video as a, property_video as b, property as c 
where a.v_id = b.pv_v_id and c.p_id = b.pv_p_id and c.p_id in (12,15); 
```

假设您正在寻找**属性 ID**为12*或*15的**视频。**

# c#-4.0 - 接收不正确的实体结果

> ID：12946105
> 
> 赞同：0
> 
> 时间：2012-10-18T02:12:46.833
> 
> 标签：c#-4.0, entity-framework-4, lambda, entity

我有两个表：所有者和客户，它们具有一对多的关联。试图微调我的实体学习，我遇到了障碍。一整天，没有任何运气，我尝试通过这两条相似的代码行返回不同的值进行推理：

仅用于测试目的，我正在尝试将每个所有者的客户总数。Owners 实体有一个返回 Client 对象集合的 Clients 导航。我希望结果包括 Owners 实体，其中包括 Clients 实体。

我想知道为什么这三种返回客户总数的方式不同。第一个和第二个返回零个客户端，第三个返回正确的客户端总数。

返回零客户：

```
Owner owner = context.Owners.First(o => o.ownerID == 5);
var clients = owner.Clients.Count(); 
```

-

```
Owner owner = context.Owners.Where(o => o.ownerID == 5).FirstOrDefault();
var clients = owner.Clients.Count(); 
```

返回正确计数

```
var clients = context.Owners.Where(o => o.ownerID == 5).Select(o => o.Clients.Count()).FirstOrDefault(); 
```

我希望找到一个解释为什么事情如此不同。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:01:57.420

正如 Pawel 所说，这一定与延迟加载有关。缺席，就是。我假设您的`Owner`类创建了自己的`Clients`集合（我认为在其构造函数中），否则它将为空。

现在，如果您将`Clients`集合定义为虚拟的（假设您首先使用代码），EF 将能够在您寻址时延迟加载它`owner.Clients.Count()`。

# c++ - XCode 中的 C/C++ 库和 STL C++ 库有什么区别？

> ID：12946106
> 
> 赞同：22
> 
> 时间：2012-10-18T02:13:02.973
> 
> 标签：c++, xcode, shared-libraries, static-libraries

我正在尝试在 Xcode 中创建 C++ 库，但不确定是选择 C/C++ 库还是 STL C++ 库选项？我注意到该`STL C++ Library`选项不允许您创建静态库并强制您创建动态库。但是，`C/C++ Library`除了创建静态库之外，该选项还允许您创建动态库。

这两个选项有什么区别，我应该什么时候使用它们？我阅读了选项下方的描述，但不幸的是它们并没有太大帮助。

另一方面，为什么静态库文件与动态库文件完全不同？似乎区别主要在于如何找到库（与您的应用程序一起打包与依赖目标机器上的存在），而不是库本身的功能或代码。如果有人能澄清这一点，那就太好了。

![在此处输入图像描述](../Images/0fec5a17ba3d56d087ab6d367522f157.png)

![在此处输入图像描述](../Images/9ff2eb3b10f7de0b7cd15927f60cc44e.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T10:30:20.887

静态链接库不能在运行时加载，但必须在链接可执行文件时合并到二进制文件中。这意味着静态链接库中代码的所有入口点都已明确定义，并且它们的地址不会相对于可执行代码的开头发生变化（因此是“静态的”）。

对于动态加载的库，无法知道代码将在哪里，因此当库在运行时加载时，需要一定的性能开销来“绑定”加载的代码。本质上，链接被推迟到运行时，这就是为什么它有时也被称为“后期绑定”。

您选择实施哪个取决于您的使用要求。如果您想要一个独立的可执行文件，用户可以简单地拖放到他的应用程序文件夹中而不必担心依赖关系，那么静态链接您的库可能是要走的路。

但是对于规模较大的项目，在提供大量功能的应用程序中，一次加载所有功能可能是禁止和不必要的。提供一组可动态加载的库，既可以节省内存，又可以缩短启动时间。然后，随着用户访问特性，相关代码被加载，并且可能有一段时间没有使用的特性可以被卸载。

此外，如果您对代码进行更改，您可能能够简单地重新分发一两个库，而不必重新编译、重新链接和重新分发整个可执行文件。我需要提到插件的前景吗？

上面两个模板之间的差异是微妙的。两者都根据 GNU99 标准编译 C。但是 C/C++ 库模板设置 xcode 以根据 C++/GNU++0x“标准”编译 C++。C++/GNU++0x 后来在 2011 年正式发布为 C++/GNU++11。这两个模板都默认使用 libc++，但 STL C++ 模板允许您选择链接到较旧的 libstdc++。你为什么要这样做？如果您的代码链接到 libc++，但您还链接到引用 libstdc++ 的其他库，并且您遇到冲突的符号，您可以通过链接 libstdc++ 来解决此问题。STL C++ 库模板还允许您要求编译器坚持 C++11 标准，不包括 GNU++11 扩展，或者回到 C++/GNU++98（如果您需要编译遗留代码，

# plsql - 我正在为触发器组合两个表并且在创建它时遇到问题？

> ID：12946108
> 
> 赞同：0
> 
> 时间：2012-10-18T02:13:42.340
> 
> 标签：plsql

```
CREATE OR REPLACE TRIGGER check_enumber
BEFORE INSERT on emp
FOR EACH ROW
Declare result NUMBER;
dnumber NUMBER;
d_name VARCHAR(20);
Begin
check_eno(:new.ENO, result);
IF result = -1 THEN
RAISE_APPLICATION_ERROR (-20502, 'deptno already exist');
insert into emp_audit(ENO,ENAME,SAL,DNAME) values 
(:new.ENO,:new.ENAME,:new.SAL,:new.DNAME);
END IF;

IF Find_Dn(:new.DNAME) = 1 THEN
Select DNO, DNAME INTO dnumber, d_name
FROM dept
WHERE :new.DNAME = d_name;
:new.dno = dnumber;
IF d_name = 'SALES' THEN
:new.COMM := 300;
Update DEPT Set tot_sals = tot_sals + :new.SAL;
Update DEPT Set tot_emps = tot_emps + 1;  
END IF;
END IF; 
END;
/ 
```

LINE/COL 错误

* * *

16/13 PLS-00103：在预期以下情况之一时遇到符号“=”：：=。( @ % ; 指示符 ":= 符号被插入到 "=" 之前以继续。

19/36 PLS-00103：在预期以下情况之一时遇到符号“_”：。( , * @ % & - + ; / at mod remaining rem return 返回 where || multiset 符号 ". 被插入到 "_" 之前以继续。

----------------------新代码和错误消息------------ ----------------

```
SQL> CREATE OR REPLACE TRIGGER check_enumber
  2  BEFORE INSERT on emp
  3  FOR EACH ROW
  4     Declare result NUMBER;
  5     dnumber NUMBER;
  6     d_name VARCHAR(20);
  7  Begin
  8   check_eno(:new.ENO, result);
  9   IF result = -1 THEN
 10     RAISE_APPLICATION_ERROR (-20502, 'deptno already exist');
 11     insert into emp_audit(ENO,ENAME,SAL,DNAME) values
 12             (:new.ENO,:new.ENAME,:new.SAL,:new.DNAME);
 13   END IF;
 14
 15   IF Find_Dname(:new.DNAME) = 1 THEN
 16     Select DNO, DNAME INTO dnumber, d_name
 17     FROM dept
 18     WHERE :new.DNAME :=d_name;
 19     :new.dno = dnumber;
 20     IF d_name = 'SALES' THEN
 21     :new.COMM := 300;
 22     Update DEPT Set tot_sals = tot_sals + :new.SAL;
 23     Update DEPT Set tot_emps = tot_emps + 1;
 24     END IF;
 25     END IF;
 26  END;
 27  / 
```

警告：使用编译错误创建触发器。

SQL> 显示错误；TRIGGER CHECK_ENUMBER 的错误：

LINE/COL 错误

* * *

13/2 PL/SQL：SQL 语句被忽略 15/20 PL/SQL：ORA-01745：无效的主机/绑定变量名 16/11 PLS-00103：在预期以下之一时遇到符号“=”：：=。( @ % ; 指示符 ":= 符号被插入到 "=" 之前以继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:18:53.033

我认为，这条线`:new.dno = dnumber;`导致了第一个问题（缺少冒号）。

应该改为`:new.dno := dnumber;`

对于第二个问题（**谢谢`Mr. Glenn`**），请更新（删除tot _sals中的空间）`Update DEPT Set tot_sals = tot _sals + :new.SAL;`到

```
 Update DEPT Set tot_sals = tot_sals + :new.SAL; 
```

line 似乎还有另一个问题`WHERE :new.DNAME :=d_name;`。请从语句中删除“：”为：

```
 WHERE :new.DNAME = d_name; 
```

# c++ - 编译器优化如何影响代码逻辑？

> ID：12946114
> 
> 赞同：6
> 
> 时间：2012-10-18T02:14:35.103
> 
> 标签：c++, c++11, g++, compiler-optimization

当同一段代码在完全禁用优化的情况下编译`g++ -O0`（`g++ -O3`

例如，编译器可以

*   [展开循环](https://en.wikipedia.org/wiki/Loop_unwinding)和
*   做[不断的折叠](https://en.wikipedia.org/wiki/Constant_folding)。

这两个优化使代码执行得更快，而不会影响原始源代码的完整性。任何在没有这些优化的情况下运行的代码都将在启用它们的情况下运行。

但是，编译器优化也会影响代码逻辑。以下是我知道的两个例子：

*   [从临时对象中删除复制构造函数和赋值运算符](https://en.wikipedia.org/wiki/Return_value_optimization)可能会消除可能的副作用。
*   重新排列包含浮点值的算术可能会影响浮点错误（希望需要`-ffast-math`参数）。

我很惊讶，也很幸运，了解到这些，因为在错误的情况下它们可能会成为巨大的潜在陷阱。

所以我想知道，是否还有其他情况下c++编译器优化会影响代码逻辑？我专门在 g++ 编译器下寻找有关 c++11 的信息（没有任何未定义的行为），但欢迎使用其他编译器的提示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T04:22:57.187

“好像”规则：

> **只要从程序的可观察行为中可以确定，**只要结果好像已经遵守了要求，就可以自由地忽略本国际标准的任何要求。**例如，如果一个实际的实现可以推断出它的值没有被使用并且没有产生影响程序可观察行为的副作用，那么它就不需要评估表达式的一部分。**

 **但是，该标准提到了一种允许的优化，它打破了“as-if”规则：

> 当满足某些条件时，**允许实现省略类对象的复制/移动构造，即使对象的复制/移动构造函数和/或析构函数具有副作用。**在这种情况下，实现将省略的复制/移动操作的源和目标简单地视为引用同一对象的两种不同方式，并且该对象的销毁发生在两个对象本应被删除的较晚时间。在没有优化的情况下销毁。123 这种复制/移动操作的省略，称为复制省略，在以下情况下是允许的（可以结合起来消除多个副本）：
> 
> — 在具有类返回类型的函数的 return 语句中，当表达式是具有与函数返回类型相同的 cvunqualified 类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，可以通过将自动对象直接构造到函数的返回值中来省略复制/移动操作
> 
> — 在 throw 表达式中，当操作数是非易失性自动对象（函数或 catch 子句参数除外）的名称时，其范围不超出最里面的封闭 try 块的末尾（如果有一）、从操作数到异常对象（15.1）的复制/移动操作可以通过将自动对象直接构造到异常对象中来省略
> 
> — 当尚未绑定到引用 (12.2) 的临时类对象将被复制/移动到具有相同 cv-unqualified 类型的类对象时，可以通过将临时对象直接构造到省略复制/移动的目标
> 
> — 当异常处理程序的异常声明（第 15 条）声明与异常对象（15.1）具有相同类型的对象（cv 限定除外）时，可以通过处理异常声明来省略复制/移动操作作为异常对象的别名，如果程序的含义将保持不变，除了为异常声明声明的对象执行构造函数和析构函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:03:16.603

“未指定行为”是实现可以自由选择任何可能行为的行为。在这种情况下，优化器可能会影响所做的选择。

一个简单的例子是计算函数参数的顺序。未优化的构建可以使用从左到右或从右到左，而优化的构建可以以“混合”顺序评估参数。一个很好的理由是在参数中最大化公共子表达式优化的机会。

如果这些参数中的任何一个具有明显的副作用，则代码逻辑将被更改，但这是否是错误因情况而异。**

# python - Python中的二进制补码？

> ID：12946116
> 
> 赞同：54
> 
> 时间：2012-10-18T02:14:59.977
> 
> 标签：python, binary, bit-manipulation

Python中的整数存储在二进制补码中，对吗？

虽然：

```
>>> x = 5
>>> bin(x)
0b101 
```

和：

```
>>> x = -5
>>> bin(x)
-0b101 
```

这很蹩脚。如何让 python 给我 REAL 二进制位的数字，并且前面没有 0b？所以：

```
>>> x = 5
>>> bin(x)
0101
>>> y = -5
>>> bin(y)
1011 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-10-18T02:31:11.940

如果您提供口罩，效果最好。这样您就可以指定签名扩展的距离。

```
>>> bin(-27 & 0b1111111111111111)
'0b1111111111100101' 
```

或者更一般地说：

```
def bindigits(n, bits):
    s = bin(n & int("1"*bits, 2))[2:]
    return ("{0:0>%s}" % (bits)).format(s)

>>> print bindigits(-31337, 24)
111111111000010110010111 
```

在基本理论中，数字的实际宽度是存储大小的函数。如果是 32 位数字，则负数在一组 32 的 MSB 中有 1。如果是 64 位值，则有 64 位要显示。

但在 Python 中，整数精度仅限于硬件的限制。在我的电脑上，这*确实有效*，但它消耗 9GB 的 RAM 来存储**x**的值。任何更高的东西，我都会得到一个 MemoryError。如果我有更多的 RAM，我可以存储更大的数字。

```
>>> x = 1 << (1 << 36) 
```

考虑到这一点，二进制数代表`-1`什么？正如前面的示例所示，Python 能够很好地解释数百万（甚至数十亿）位的精度。在 2 的补码中，符号位一直向左延伸，但在 Python 中没有预定义的位数；有多少你需要多少。

但是随后您会遇到歧义：二进制`1`表示`1`, 还是`-1`? 好吧，它也可能是。`111`代表`7`或？`-1`_ 同样，它也可能是。`111111111`代表`511`, 或... 也是如此`-1`，这取决于您的精确度。

Python 需要一种方法来用二进制表示这些数字，这样它们的含义就不会模棱两可了。前缀只是说“这个`0b`数字是二进制的”。就像`0x`意思是“这个数字是十六进制的”。所以如果我说`0b1111`，我怎么知道用户想要 -1 还是 15？有两种选择：

**选项A：** *符号位*
您可以声明所有数字都是有符号的，最左边的位是符号位。这意味着`0b1`是-1，`0b01`而是1。这也意味着`0b111`也是-1，`0b0111`而是7。最后，这可能比有用更令人困惑，特别是因为**大多数二进制算术无论如何都将是无符号的，**而且人们更多可能会因不小心将数字标记为负数而出错，因为它们没有包含明确的符号位。

**选项 B：** *符号指示*
使用此选项，二进制数表示无符号，负数有一个“-”前缀，就像它们在十进制中一样。这（a）与十进制更一致，（b）与最有可能使用二进制值的方式更兼容。您将失去使用二进制补码表示指定负数的能力，但请记住，二进制补码是*存储实现*细节，而不是底层值本身的正确指示。它不应该是用户必须理解的东西。

最后，选项 B 最有意义。混淆较少，用户无需了解存储详细信息。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-18T04:53:39.790

要将二进制序列正确解释为二进制补码，需要与序列相关联的长度。当您处理直接对应于 CPU 寄存器的低级类型时，存在隐式长度。由于 Python 整数可以具有任意长度，因此实际上没有内部二进制补码格式。由于没有与数字相关的长度，因此无法区分正数和负数。为了消除歧义，bin() 在格式化负数时包含一个减号。

Python 的任意长度整数类型实际上使用符号大小内部格式。逻辑运算（位移、与、或等）旨在模仿二进制补码格式。这是多精度库的典型特征。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-11-24T10:53:02.757

一个负数的补码是 **模值减去正值**。所以我认为，-27的恭维的简单方法是

```
bin((1<<32) - 27)  // 32 bit length  '0b11111111111111111111111111100101'
bin((1<<16) - 27)
bin((1<<8) - 27)   // 8 bit length  '0b11100101' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T02:34:57.783

不知道如何使用标准库获得你想要的东西。有一些脚本和包可以为您进行转换。

我只是想注意“为什么”，以及为什么它不跛脚。

bin() 不返回二进制位。它将数字转换为二进制字符串。根据 python 语言定义，前导 '0b' 告诉解释器您正在处理二进制数。这样你就可以直接使用二进制数，像这样

```
>>> 0b01
1
>>> 0b10
2
>>> 0b11
3
>>> 0b01 + 0b10
3 
```

这不是蹩脚的。那太棒了。

* * *

[http://docs.python.org/library/functions.html#bin](http://docs.python.org/library/functions.html#bin)

> 仓（x）
> 
> > 将整数转换为二进制字符串。

[http://docs.python.org/reference/lexical_analysis.html#integers](http://docs.python.org/reference/lexical_analysis.html#integers)

> 整数和长整数文字由以下词法定义描述：
> 
> > bininteger ::= "0" ("b" | "B") bindigit+
> > 
> > 二进制数字 ::= "0" | “1”

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-24T09:13:27.960

```
tobin = lambda x, count=8: "".join(map(lambda y:str((x>>y)&1), range(count-1, -1, -1))) 
```

例如

```
tobin(5)      # =>  '00000101'
tobin(5, 4)   # =>      '0101'
tobin(-5, 4)  # =>      '1011' 
```

或作为明确的功能：

```
# Returns bit y of x (10 base).  i.e. 
# bit 2 of 5 is 1
# bit 1 of 5 is 0
# bit 0 of 5 is 1
def getBit(y, x):
    return str((x>>y)&1)

# Returns the first `count` bits of base 10 integer `x`
def tobin(x, count=8):
    shift = range(count-1, -1, -1)
    bits = map(lambda y: getBit(y, x), shift)
    return "".join(bits) 
```

（改编自[WJ Van de Laan 的](http://code.activestate.com/recipes/219300-format-integer-as-binary-string)评论）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-09-09T13:08:26.213

这是[Tylerl answer](https://stackoverflow.com/questions/12946116/twos-complement-binary-in-python/12946226#12946226)的可读性更高的版本，例如，假设您希望**-2**在其“二进制补码”的**8 位**负表示中：

```
bin(-2 & (2**8-1)) 
```

2**8 代表第 9 位 (256)，减去 1，您将所有前面的位设置为 1 (255)

对于 8 位和 16 位掩码，您可以将 (2**8-1) 替换为 0xff 或 0xffff。在那之后，十六进制版本变得不那么可读。

如果不清楚，这是它的常规功能：

```
def twosComplement (value, bitLength) :
    return bin(value & (2**bitLength - 1)) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-18T02:20:33.330

我不完全确定你最终想要做什么，但你可能想看看[bitarray](http://pypi.python.org/pypi/bitarray/)包。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-18T04:06:53.543

```
def tobin(data, width):
    data_str = bin(data & (2**width-1))[2:].zfill(width)
    return data_str 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-01-10T09:27:30.040

使用切片去除不需要的“0b”。

> > > `bin(5)[2:]` '101'

或者如果你想要数字，

> > > `tuple ( bin(5)[2:] )` ('1', '0', '1')

甚至

> > > `map( int, tuple( bin(5)[2:] ) )` [1, 0, 1]

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-07-16T22:02:49.467

您可以使用[二进制分数](https://pypi.org/project/binary-fractions/)包。这个包`TwosComplement`用二进制整数和二进制分数实现。您可以将二进制分数字符串转换为其二进制补码，反之亦然

例子：

```
>>> from binary_fractions import TwosComplement
>>> TwosComplement.to_float("11111111111") # TwosComplement --> float
-1.0
>>> TwosComplement.to_float("11111111100") # TwosComplement --> float
-4.0
>>> TwosComplement(-1.5) # float --> TwosComplement
'10.1'
>>> TwosComplement(1.5) # float --> TwosComplement
'01.1'
>>> TwosComplement(5) # int --> TwosComplement
'0101' 
```

要将其与 Binary's 而不是 float's 一起使用，您可以使用`Binary`同一个包中的类。

PS：无耻插件，我是这个包的作者。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-10-18T02:31:38.370

对于正数，只需使用：

```
bin(x)[2:].zfill(4) 
```

对于负数，它有点不同：

```
bin((eval("0b"+str(int(bin(x)[3:].zfill(4).replace("0","2").replace("1","0").replace("2","1"))))+eval("0b1")))[2:].zfill(4) 
```

作为一个完整的脚本，它应该是这样的：

```
def binary(number):
    if number < 0:
        return bin((eval("0b"+str(int(bin(number)[3:].zfill(4).replace("0","2").replace("1","0").replace("2","1"))))+eval("0b1")))[2:].zfill(4)
    return bin(number)[2:].zfill(4)      
x=input()
print binary(x) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-04-02T07:14:05.273

对 tylerl 非常有用的答案的修改，它为正数和负数提供符号扩展（无错误检查）。

```
def to2sCompStr(num, bitWidth):
    num &= (2 << bitWidth-1)-1 # mask
    formatStr = '{:0'+str(bitWidth)+'b}'
    ret =  formatStr.format(int(num))
    return ret 
```

例子：

```
In [11]: to2sCompStr(-24, 18)
Out[11]: '111111111111101000'

In [12]: to2sCompStr(24, 18)
Out[12]: '000000000000011000' 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-05-03T19:36:54.347

不需要，已经是了。只是 python 选择以不同的方式表示它。如果您开始单独打印每个半字节，它将显示其真实颜色。

```
checkNIB = '{0:04b}'.format
checkBYT = lambda x: '-'.join( map( checkNIB, [ (x>>4)&0xf, x&0xf] ) ) 
checkBTS = lambda x: '-'.join( [ checkBYT( ( x>>(shift*8) )&0xff ) for shift in reversed( range(4) ) if ( x>>(shift*8) )&0xff ] )

print( checkBTS(-0x0002) ) 
```

输出很简单：

```
>>>1111-1111-1111-1111-1111-1111-1111-1110 
```

现在，当您想要显示半字节的二进制补码时，它会恢复为原始表示，但如果您将其分成半字节等半部分，它仍然是可能的。**请记住，最好的结果是使用负十六进制和二进制整数解释**简单的数字而不是那么多，也可以使用**十六进制**设置字节大小。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-05T02:51:36.057

我们可以利用按位异或的特性。使用按位异或翻转位，然后加 1。然后您可以使用 python 内置的 bin() 函数来获取 2 的补码的二进制表示。这是一个示例函数：

```
def twos_complement(input_number):
    print(bin(input_number))                            # prints binary value of input
    mask = 2**(1 + len(bin(input_number)[2:])) - 1      # Calculate mask to do bitwise XOR operation
    twos_comp = (input_number ^ mask) + 1               # calculate 2's complement, for negative of input_number (-1 * input_number)
    print(bin(twos_comp))                               # print 2's complement representation of negative of input_number. 
```

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2017-04-12T16:40:01.257

**我希望这能解决你的问题**`

```
num = input("Enter number : ")
bin_num=bin(num)
binary = '0' + binary_num[2:]
print binary 
```

# android - Android：带有多选的警报对话框

> ID：12946119
> 
> 赞同：4
> 
> 时间：2012-10-18T02:15:37.387
> 
> 标签：android, android-alertdialog

是否可以在列表中显示带有禁用项目（行）的多选警报对话框？通过选中列表中的“无”选项，列表中的所有选项都应该被禁用，除了“无”选项，如果我取消选中“无”选项需要再次启用所有项目吗？

```
 AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(context);
    dialogBuilder.setMultiChoiceItems(optionsList,selectionState,new
                                       DialogInterface.OnMultiChoiceListener()
    {

      @Override
      public void onClick(DialogInterface dialog,int which, boolean isChecked){

      final AlertDialog alertDialog = (AlertDialog) dialog;
      final ListView alertDialogList = alertDialog.getListView();

        // Here how to make the items in the list as disabled when None is clicked
        // None OPtion is one among  in optionsList string array

         // A loop to disable all items other than clicked one 
         for (int position = alertDialogList.getCheckedItemPosition(); position<
                                alertDialogList.getChildCount; position++)
         {
                alertDialogList.getChildAt(position).setEnabled(false);
         }

      }
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:22:27.590

你`OnMultiChoiceClickListener`的就快到了。它只有两个问题：首先，您的`for`循环没有遍历所有的孩子，除了被点击的孩子。

```
 // A loop to disable all items other than clicked one 
     for (int position = alertDialogList.getCheckedItemPosition(); position<
                            alertDialogList.getChildCount; position++)
     {
            alertDialogList.getChildAt(position).setEnabled(false);
     } 
```

你从被点击的那个开始，然后禁用那个，然后是它之后的所有孩子，直到列表的末尾。只有*严格在*点击之前的孩子不会被禁用。第二个问题是您的禁用代码将针对单击的任何项目运行，而不仅仅是“无”项目。试试这样的东西。我`which`用来确定是否按下了特殊的“无”项。

```
private static final int specialItem = ...;
public void onClick(DialogInterface dialog, int which, boolean isChecked) {
    if (which == singleItem) { // only if they clicked 'none'
        final AlertDialog alertDialog = (AlertDialog) dialog;
        final ListView alertDialogList = alertDialog.getListView();

        for (int position = 0; position < alertDialogList.getChildCount(); position++)
        {
            if (position != which) {
                alertDialogList.getChildAt(position).setEnabled(!isChecked);
            }
        }
    }
} 
```

`which`请注意，如果不是 0 ，我什么都不做。我的`for`循环从 1 开始以避免项目 0，如果*未*选中“无”项目，它会将每个元素设置为启用，如果没有检查任何*项目*。

最后，我要注意的是，这不是多选对话框的常见行为。用户会对“无”选项的行为感到惊讶，因为它与其他所有选项都不同。没有“无”选项会更常见：如果用户不检查任何其他选项，则表示没有。如果您确实需要“无”选项，以区分用户明确选择“无”和不回答之间的区别，请考虑使用带有单独“无”按钮或复选框组之外的单选按钮的自定义布局，所以用户可以知道它的行为会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:28:23.880

```
AlertDialog alertDialog  = new AlertDialog.Builder(context).create();   
            alertDialog.setTitle("Warning!");
            alertDialog.setMessage("Confirm closing activity without succes?");
            alertDialog.setButton(DialogInterface.BUTTON_POSITIVE, "Yes", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    UpdateWebActivityState(ActivitiesEditActivity.this, serviceActivity.ActivityId,serviceActivity.WebActivityState , notes, sigBitmap);
                    isSuccessfullyClosed = false;
                    AlertDialog alert  = new AlertDialog.Builder(context).create(); 
                    alert.setTitle("Warning!");
                    alert.setMessage("Activity closed successfully");
                    alert.setButton(DialogInterface.BUTTON_POSITIVE, "Ok", new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub

                            do what you want here
                            finish();                   
                        }

                    });

                    alert.show();

                }
            });

            alertDialog.setButton(DialogInterface.BUTTON_NEGATIVE, "No", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which)
                {
                        return;
                }
                });

            alertDialog.show(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T05:19:43.277

是的，这是真的

```
 new AlertDialog.Builder(Main.this)
            .setIcon(R.drawable.icon)
            .setTitle("Title")
            .setView(textEntryView)
            .setPositiveButton("Save", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    //android.os.Debug.waitForDebugger();

                    /* User clicked OK so do some stuff */ 
                }
            })
            .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                    /* User clicked cancel so do some stuff */
                }
            })
            .setNeutralButton("Delete", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                }
            })
            .create(); 
```

# c# - 将图像添加到构建 C#

> ID：12946124
> 
> 赞同：0
> 
> 时间：2012-10-18T02:16:04.913
> 
> 标签：c#, image, build

将图像添加到项目的实际构建中的最佳方法是什么？

我目前拥有它，因此它引用了图像的文件路径，但是如果我要将构建发送到另一台计算机，则图像的文件路径会由于明显的原因而改变。

所以我想问的问题是我如何将文件路径概括为可能只是一个包含我的 .exe 的文件夹，或者如果可能的话，甚至将文件构建到 .exe 中？

如果有帮助，我正在使用 Microsoft Visual Studios 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:35:18.563

您可以将图像作为嵌入式资源作为 exe 的一部分。然后，您可以使用反射通过[`GetManifestResourceStream`](http://msdn.microsoft.com/en-us/library/xc4235zt.aspx)将图像作为流访问并从流中创建位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:25:48.833

您可以在应用程序安装目录中创建一个子目录。相对路径可以在 app.config 文件中配置。

或者，您可以创建附属程序集并将图像作为资源包含在附属程序集中。

# lotus-domino - 关于@Dblookup

> ID：12946128
> 
> 赞同：0
> 
> 时间：2012-10-18T02:17:00.390
> 
> 标签：lotus-domino

我的公式是这样的`@DbLookup("";"";"vwCompanyHR";1;"companyHR");`。但是，它不起作用。我无法获取视图中`companyHR`字段的值。`vwCompanyHR`在`vwCompany view, when I change the`排序标签的#` 列中选择类别中的标准，它可以工作。然后我发现如果选择排序，它就不再起作用了。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:36:03.513

您提到了“#”列。我有点猜测：该列是否使用简单函数列表中的“# in View”选项？（或等效公式：@DocNumber？）

如果是这样，则不应将其用作@DbLookup 的键。它是一种特殊的“不可读”类型。

使用分类列可能会产生可读性的副作用，但这仍然是一个坏主意。

# c# - 如何将视图模型传递给布局/母版页？

> ID：12946130
> 
> 赞同：15
> 
> 时间：2012-10-18T02:17:20.007
> 
> 标签：c#, asp.net-mvc-3, master-pages

谷歌搜索了一段时间后，我对如何在 asp mvc 3 中执行此操作有点困惑。

因此，任务是为多个控制器的视图提供一个通用布局（或母版？）页面。所有的视图本身都是强类型的......这个布局页面实际上可视化了一些强类型的对象。因此，我需要将此对象传递给布局页面，以将其传递给“Html.RenderPartial()”或直接在页面中呈现。

[Passing Data to View Master Pages (C#)](http://www.asp.net/mvc/tutorials/older-versions/views/passing-data-to-view-master-pages-cs)一文（尽管对于 mvc2 来说是旧的）给出了一个示例来提供一个基本的抽象控制器类，将模型传递给`ViewData`. 这可能是治疗方法。

但...

在某些线程中，我发现了一种可以制作强类型母版页的方法：

```
<%@ Master ... Inherits="System.Web.Mvc.ViewMasterPage<MyWeb.Models.Client>" %> 
```

那么，在 mvc3 中是否有相同的方法？或者将数据传递到布局页面的唯一方法是使用 ViewBag 或 ViewData？

阅读[了在 asp.net-mvc 中将 ViewModel 数据绑定到母版页的最佳方法是什么](https://stackoverflow.com/questions/7539384/what-is-the-best-way-to-bind-viewmodel-data-to-master-page-in-asp-net-mvc)，我考虑了 Darin 的回答，但仍然认为这堆视图将具有相同的布局，并且没有理由反对 DRY原则。

那么，如何将强类型对象传递给布局页面呢？还是我混淆了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T02:50:57.347

这是一个有趣的辩论主题 -> 传递`view models`到母版页/布局与`ViewBags`.

我讨厌使用`ViewBags`，所以我的所有视图层都有视图模型。从`_layout.cshtml`和向上开始。任何使用 Layout 的视图 .. 好吧 .. 该视图模型只是继承 Layout .. 或它下面的任何视图 .. 重复此操作，直到您到达通常是 _layout 的底层...

我的[RavenOverflow 项目](https://github.com/PureKrome/RavenOverflow)有一些示例代码显示了这一点。

*   这是定义的[布局视图](https://github.com/PureKrome/RavenOverflow/blob/master/Code/RavenOverflow.Web/Views/Shared/_Layout.cshtml#L2)。
*   这是定义的[布局视图模型](https://github.com/PureKrome/RavenOverflow/blob/master/Code/RavenOverflow.Web/Models/_LayoutViewModel.cs)。
*   这是[使用布局的视图](https://github.com/PureKrome/RavenOverflow/blob/master/Code/RavenOverflow.Web/Views/Home/Index.cshtml)。
*   这是以前的视图的[视图模型](https://github.com/PureKrome/RavenOverflow/blob/master/Code/RavenOverflow.Web/Models/ViewModels/IndexViewModel.cs)。
*   这是[一些控制器代码](https://github.com/PureKrome/RavenOverflow/blob/master/Code/RavenOverflow.Web/Controllers/HomeController.cs#L66)，用于创建模型.. 然后将其传递到视图中。

# java - 在 smartGWT 应用程序中 RPC 成功时返回 ListGridRecord[]

> ID：12946133
> 
> 赞同：1
> 
> 时间：2012-10-18T02:17:31.450
> 
> 标签：java, google-app-engine, gwt, smartgwt

我创建了一个扩展 com.smartgwt.client.widgets.grid.ListGridRecord 并实现 com.google.gwt.user.client.rpc.IsSerializable 的类。由于 RPC，我正在返回一个此类对象的数组。但是在开发模式下运行时会引发异常

```
 [java] SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
 [java] com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract com.aman.gwt.test.shared.FriendRecord[] com.aman.gwt.test.client.FirstService.test()' threw an unexpected exception: java.lang.UnsatisfiedLinkError: com.smartgwt.client.util.JSOHelper.createObject()Lcom/google/gwt/core/client/JavaScriptObject;
 [java]     at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:389)
 [java]     at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:579)
 [java]     at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
 [java]     at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
 [java]     at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
 [java]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
 [java]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
 [java]     at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
 [java]     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
 [java]     at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
 [java]     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
 [java]     at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:110)
 [java]     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
 [java]     at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
 [java]     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
 [java]     at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
 [java]     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
 [java]     at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
 [java]     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
 [java]     at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
 [java]     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
 [java]     at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
 [java]     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
 [java]     at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
 [java]     at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
 [java]     at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
 [java]     at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
 [java]     at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
 [java]     at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
 [java]     at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
 [java]     at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:380)
 [java]     at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
 [java]     at org.mortbay.jetty.Server.handle(Server.java:326)
 [java]     at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
 [java]     at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
 [java]     at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
 [java]     at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
 [java]     at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
 [java]     at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
 [java]     at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
 [java] Caused by: java.lang.UnsatisfiedLinkError: com.smartgwt.client.util.JSOHelper.createObject()Lcom/google/gwt/core/client/JavaScriptObject;
 [java]     at com.smartgwt.client.util.JSOHelper.createObject(Native Method)
 [java]     at com.smartgwt.client.core.DataClass.<init>(DataClass.java:35)
 [java]     at com.smartgwt.client.core.RefDataClass.<init>(RefDataClass.java:30)
 [java]     at com.smartgwt.client.data.Record.<init>(Record.java:59)
 [java]     at com.smartgwt.client.widgets.grid.ListGridRecord.<init>(ListGridRecord.java:127)
 [java]     at com.aman.gwt.test.shared.FriendRecord.<init>(FriendRecord.java:13)
 [java]     at com.aman.gwt.test.server.FirstServiceImpl.test(FirstServiceImpl.java:26)
 [java]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 [java]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
 [java]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 [java]     at java.lang.reflect.Method.invoke(Method.java:616)
 [java]     at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
 [java]     ... 38 more
 [java] 
 [java] Oct 18, 2012 1:52:36 AM com.google.appengine.tools.development.LocalResourceFileServlet doGet
 [java] WARNING: No file found for: /favicon.ico 
```

共享类和服务实现方法是：

```
 package com.aman.gwt.test.shared;
     import com.smartgwt.client.widgets.grid.ListGridRecord;
     import com.google.gwt.user.client.rpc.IsSerializable;
     public class FriendRecord extends ListGridRecord implements IsSerializable{

public FriendRecord(){

}

public FriendRecord(String name,String id){
    setName(name);
    setId(id);
}
public void setName(String name){
    setAttribute("name",name);
}
//public void setImgSrc(String imgSrc){
    //setAttribute("imgSrc",imgSrc);
//}
public void setId(String id){
    setAttribute("id",id);
}
    }

    public FriendRecord[] test(){
    FriendRecord[] fr = new FriendRecord[10];
    for(int i=0;i<10;i++){
        fr[i]=new FriendRecord("name"+i,String.valueOf(i*2));
    }
    return fr;

} 
```

我做对了吗？我唯一想做的就是用这些记录填充 ListGrid。为什么 ListGrid 只接受 JSObjects 而不是 Java 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:33:41.230

If it's what you are doing I don't think You can't instantiate `ListGridRecord` on the server side since it's just a javascript object. Your rpc is sending a serilizable objects and client side you are filling your `ListGridRecord` or `YouClassDerivatedFromListGridRecord` objects with data included in these objects.

# jakarta-ee - WebSphere 中的 JavaEE 应用程序配置管理（有限制）

> ID：12946136
> 
> 赞同：0
> 
> 时间：2012-10-18T02:17:39.173
> 
> 标签：jakarta-ee, configuration, configuration-files, websphere-7

我们有一个在 WebSphere 应用程序服务器 (v7) 上运行的 JavaEE 应用程序。我们希望在 EAR 之外管理应用程序配置（键/值对）。由于某些有效的非技术原因，我们***无法使用以下选项：***

1.  外部数据库
2.  共享文件系统
3.  Websphere 管理控制台中的命名空间绑定
4.  WebSphere 启动脚本中的更改

**问题**：是否有任何其他方法可以在 WebSphere 控制台或 EAR 之外管理配置？

我们当前的选择是将所有配置文件打包到 EAR 中，并在发生任何更改时重新打包/重新部署 EAR。

我在这个网站上研究了很多文章和问题。[JavaEE 解决方案配置最佳实践](https://stackoverflow.com/questions/8164502/javaee-solution-configuration-best-practices)从最佳实践的角度解决了这个问题。除了使用数据库或命名空间绑定之外，它仍然没有提供其他选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:30:00.363

标准的 EE 解决方案是使用 env-entry。这些可以在部署期间进行配置，并且可以在部署后进行修改（企业应用程序 > 应用程序 > 环境条目），而无需重新部署。它们不需要服务器名称空间绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:10:26.003

另一种选择是使用“配置名称绑定”。您可以在 AdminConsole 中找到它们：

环境/命名/命名空间绑定

使用“配置名称绑定”，您可以将常规字符串绑定到 JNDI 名称。它的好处是更改会立即反映在 JNDI 中。可以通过 AdminConsole 和 wsadmin 添加/修改/删除值。

信息中心链接： http: [//pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/cnam_configured_bindings.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/cnam_configured_bindings.html)

有了“配置名称绑定”，您可以使用 InitialContext 在 JNDI 中查找它的值。首选方法是在应用程序中配置名称空间绑定，并将应用程序绑定解析为配置的名称绑定。然后在您的代码中，您可以在 java:comp 下查找名称。

# jquery - 在 Chrome 浏览器中检测到 Jquery 异常

> ID：12946138
> 
> 赞同：0
> 
> 时间：2012-10-18T02:17:49.143
> 
> 标签：jquery, google-chrome, exception

这是 chrome 浏览器抛出的消息错误，它在 IExplorer 和 FireFox 中运行良好

```
$ XMLHttpRequest cannot load file:///C:/Users/Lew/Documents/Human%20Staff/students.xml. Origin null is not allowed by Access-Control-Allow-Origin. 
```

....如果已经定义了变量，我不知道为什么它不起作用...

chrome开发者工具抛出的另一个错误消息：

```
$nombre: [Exception: ReferenceError: telefono is not defined]
$edad : [Exception: ReferenceError: telefono is not defined]
$telefono : [Exception: ReferenceError: telefono is not defined]
$carnet : [Exception: ReferenceError: telefono is not defined] 
```

有什么想法可以解决吗？

这是一段代码：

```
<pre><code>

    // JavaScript Document
    // File: leerXML.js

   $(document).ready(function(){

   $("#ContentArea").ready(function(){
   $.get("students.xml",{},function(xml){ //Abrimos el archivo students.xml

// Crearemos un string HTML
    HTMLcontent = '<br/><br/>';
    HTMLcontent += '<table width="70%" border="1" cellpadding="0" cellspacing="0">';
    HTMLcontent += '<th>Nombre</th><th>Edad</th><th>Telefono</th><th>Carnet</th>';

   $('estudiante',xml).each(function(i) {

   var nombre ='';
   var edad='';
   var telefono='';
   var carnet='';
   nombre = $(this).find("nombre").text(); 
   edad = $(this).find("edade").text();
   telefono = $(this).find("telefono").text();
   carnet = $(this).find("carnet").text(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:29:42.147

您不能这样做，因为您是从本地文件系统加载网站。您需要运行 Web 服务器才能进行跨域请求（文件系统的来源为 null，因为它没有域，并且永远不允许发出跨域请求）。

设置一个小型 Web 服务器并从中提供文件以进行测试。请参阅[http://code.google.com/p/chromium/issues/detail?id=40787](http://code.google.com/p/chromium/issues/detail?id=40787)。

# css - Wordpress 页面上的内嵌图像和清除

> ID：12946147
> 
> 赞同：0
> 
> 时间：2012-10-18T02:18:51.730
> 
> 标签：css, wordpress, css-float

所以，

我正在构建一个页面，我希望在其中包含几句文字（例如“联系我们”），然后在同一行上添加图像或图标。我已经能够在[JSfiddle](http://jsfiddle.net/w5hpS/3/)中实现这种效果，但是当我将相同的 CSS 和 HTML 传输到 WordPress 时，我的文本和图像总是在不同的行上，正如你[在这里](http://lrgi.org/?page_id=20)看到的那样。我不知道是什么阻止了文本和图像留在同一行。我以为我会通过将此代码添加到主题的 functions.php 文件中来禁用 autop：

```
// Remove WordPress Auto P
remove_filter( 'the_content', 'wpautop' );
// Auto P is also called in these filters, I'm just adding these lines for your information.
// If you want to disable them, uncomment
// remove_filter( 'the_content', 'wpautop' );
// remove_filter( 'the_excerpt', 'wpautop' );
// remove_filter( 'comment_text', 'wpautop' ); // <-- Be careful with this one 
```

但也许我错了。我很尴尬被一个看似如此简单的问题难住了，但我希望有人能对这个问题有所了解。

提前致谢，

马卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:23:09.363

添加这个：

```
.bodyheadtext {
  float: left;
} 
```

*或*从. `float: left`_`.bodyhead`

# linux - 如何为 linux 运行老化测试

> ID：12946149
> 
> 赞同：2
> 
> 时间：2012-10-18T02:18:52.457
> 
> 标签：linux, testing, hardware, fedora12

我已经在我的嵌入式电脑上安装了 Fedora core 12，因为我遇到的内存和 I/O 错误很少。但是现在我已经在我的系统上重新安装了 fedora 12。我只想运行硬件测试。Fedora 12 在基于文本的命令行或基于图形的软件上是否有可用的“老化测试”程序来测试整个硬件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:27:33.143

这取决于您对“老化”的意图。例如，如果您想确保测试整个 RAM 范围，那么[Memtest86+](http://www.memtest.org/)非常理想。对于高清也是一样的想法；使用各种缺陷检查工具进行全表面扫描。

对于一个持续的现实世界负载生成器，源代码编译是一个非常常见的技巧——它可以很好地加载 CPU、RAM 和磁盘。只需下载一些较大软件包的 SRPM 并重新构建它们。

此外，标准化的基准测试是生成负载（和测量结果）的非常常见的方法。[Phoronix](http://www.phoronix-test-suite.com/)制作了一些广泛使用的基准测试套件。

至于 GPU 负载生成，要么是图形基准，要么可能更好，比特币挖掘。这将使您的机器在几分钟内达到最高安全温度，并且可以无限期地保持在那里。假设这就是你所追求的。

# delphi - How to bring my application to the front?

> ID：12946150
> 
> 赞同：24
> 
> 时间：2012-10-18T02:19:12.720
> 
> 标签：delphi, delphi-xe2

I know all the reasons why it is a bad idea. I dislike it if an application steals input focus, but this is for purely personal use and I want it to happen; it will not disturb anything.

(for the curious: I am running unit tests in NetBeans, which generate a log file. When my background application sees the log file's timestamp change I want it to parse the log file and come to the front to show the results).

[This question](https://stackoverflow.com/questions/5282588/how-can-i-bring-my-application-window-to-the-front) did not help, nor did googling. It seems that `BringToFront()` hasn't worked for a long time and I can't find any alternative that does.

Any ideas?

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-18T08:40:07.913

Here's something simple that seems to work, tested with multiple boxes consisting of XP, Server2003, Vista, Server2008, W7\. Test application ran with a standard (or admin) account, stole the input focus from notepad while writing in the foreground.

```
var
  Input: TInput;
begin
  ZeroMemory(@Input, SizeOf(Input));
  SendInput(1, Input, SizeOf(Input)); // don't send anyting actually to another app..
  SetForegroundWindow(Handle); 
```

You can tweak it further f.i. for a minimized app or such if required.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-18T02:42:21.610

You can't do this reliably. Windows XP had a workaround that would allow it, but versions since then prohibit it for the most part (see note below). This is expressly stated in the remarks section of the MSDN documentation on [`SetForegroundWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633539%28v=vs.85%29.aspx):

> The system restricts which processes can set the foreground window. A process can set the foreground window only if one of the following conditions is true:
> 
> *   The process is the foreground process.
> *   The process was started by the foreground process.
> *   The process received the last input event.
> *   There is no foreground process.
> *   The foreground process is being debugged.
> *   The foreground is not locked (see LockSetForegroundWindow).
> *   The foreground lock time-out has expired (see SPI_GETFOREGROUNDLOCKTIMEOUT in SystemParametersInfo).
> *   No menus are active.
> 
> An application cannot force a window to the foreground while the user is working with another window. Instead, Windows flashes the taskbar button of the window to notify the user.

Note the final paragraph of the quoted documentation, especially the first sentence.

The problem with

> this is for purely personal use and I want it to happen; it will not disturb anything.

is that any application could try to do the same thing. How does "purely personal use" tell it's you personally and not just any application? :-)

Note: I've tried everything I can think of to get the IDE's documentation to show in the foreground when I click the help toolbutton, but all I can get is the flashing taskbar button (and I as the user want it to do so).

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-10-18T07:56:51.050

I am doing something similar in one of my applications and this function works for me in xp/vista/w7:

```
function ForceForegroundWindow(hwnd: THandle): Boolean;
const
  SPI_GETFOREGROUNDLOCKTIMEOUT = $2000;
  SPI_SETFOREGROUNDLOCKTIMEOUT = $2001;
var
  ForegroundThreadID: DWORD;
  ThisThreadID: DWORD;
  timeout: DWORD;
begin
  if IsIconic(hwnd) then ShowWindow(hwnd, SW_RESTORE);

  if GetForegroundWindow = hwnd then Result := True
  else
  begin
    // Windows 98/2000 doesn't want to foreground a window when some other
    // window has keyboard focus

    if ((Win32Platform = VER_PLATFORM_WIN32_NT) and (Win32MajorVersion > 4)) or
      ((Win32Platform = VER_PLATFORM_WIN32_WINDOWS) and
      ((Win32MajorVersion > 4) or ((Win32MajorVersion = 4) and
      (Win32MinorVersion > 0)))) then
    begin
      Result := False;
      ForegroundThreadID := GetWindowThreadProcessID(GetForegroundWindow, nil);
      ThisThreadID := GetWindowThreadPRocessId(hwnd, nil);
      if AttachThreadInput(ThisThreadID, ForegroundThreadID, True) then
      begin
        BringWindowToTop(hwnd); // IE 5.5 related hack
        SetForegroundWindow(hwnd);
        AttachThreadInput(ThisThreadID, ForegroundThreadID, False);
        Result := (GetForegroundWindow = hwnd);
      end;
      if not Result then
      begin
        // Code by Daniel P. Stasinski
        SystemParametersInfo(SPI_GETFOREGROUNDLOCKTIMEOUT, 0, @timeout, 0);
        SystemParametersInfo(SPI_SETFOREGROUNDLOCKTIMEOUT, 0, TObject(0),
          SPIF_SENDCHANGE);
        BringWindowToTop(hwnd); // IE 5.5 related hack
        SetForegroundWindow(hWnd);
        SystemParametersInfo(SPI_SETFOREGROUNDLOCKTIMEOUT, 0, TObject(timeout), SPIF_SENDCHANGE);
      end;
    end
    else
    begin
      BringWindowToTop(hwnd); // IE 5.5 related hack
      SetForegroundWindow(hwnd);
    end;

    Result := (GetForegroundWindow = hwnd);
  end;
end; 
```

Another solution is not to steal focus and just put the window TOPMOST in the z buffer:

```
procedure ForceForegroundNoActivate(hWnd : THandle);

begin
 if IsIconic(Application.Handle) then
  ShowWindow(Application.Handle, SW_SHOWNOACTIVATE);
 SetWindowPos(hWnd, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOSIZE or SWP_NOACTIVATE or SWP_NOMOVE);
 SetWindowPos(hWnd, HWND_NOTOPMOST, 0, 0, 0, 0, SWP_NOSIZE or SWP_NOACTIVATE or SWP_NOMOVE);
end; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-12-11T22:55:32.040

Assuming that there are no other StayOnTop applications running you can temporarily set your forms FormStyle to be fsStayOnTop and then do an Application Restore and BringToFront and then change the formstyle back to whatever it was.

```
tmpFormStyle := Application.MainForm.FormStyle;
Application.MainForm.FormStyle := fsStayOnTop;
Application.Restore; // optional
Application.BringToFront;
Application.MainForm.FormStyle := tmpFormStyle; 
```

Again, this only works if there are no other stayontop applications.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-12-20T16:11:12.517

This should work even in Windows7+8 OS. Only requirement is an application itself can call functions. It's trickier to use an external app to set another process's window front.

```
Application.Restore; // unminimize window, makes no harm always call it
SetWindowPos(self.Handle, HWND_NOTOPMOST,0,0,0,0, SWP_NOMOVE or SWP_NOSIZE);
SetWindowPos(self.Handle, HWND_TOPMOST,0,0,0,0, SWP_NOMOVE or SWP_NOSIZE);
SetWindowPos(self.Handle, HWND_NOTOPMOST,0,0,0,0, SWP_SHOWWINDOW or SWP_NOMOVE or SWP_NOSIZE); 
```

**Edit** Ok I found out one problem with this. Application is brought to front but focus is kept in an original application. Use this answer to fix the problem, its quite complex method but copypaste does the trick. Before calling ForceForegroundWindow(wnd) you may have to call Application.Restore unminimizing a window. [https://stackoverflow.com/a/5885318/185565](https://stackoverflow.com/a/5885318/185565)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-18T07:43:28.477

You could write an Executable to workaround that limitation. Take for example a simple (non-visual) application (basically a console app but without the {$APPTYPE CONSOLE}) with the only purpose to bring your desired window to front.

Your monitoring background application calls the helper app via command line call (e.g. ShellExecute) whenever your bringtofront action is needed. Since this app is becoming the foreground process, it is then able to bring other windows to front (SetForeGroundWindow). You could use FindWindow to get a handle on your target window or pass appropriate parameters when starting your helper app.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-10-07T04:34:08.877

```
function WinActivate(const AWinTitle: string): boolean;
var
  _WindowHandle: HWND;
begin
  Result := false;
  _WindowHandle := FindWindow(nil, PWideChar(AWinTitle));
  if _WindowHandle <> 0 then
  begin
    if IsIconic(_WindowHandle) then
      Result := ShowWindow(_WindowHandle, SW_RESTORE)
    else
      Result := SetForegroundWindow(_WindowHandle);
  end;
end;

if WinActivate(self.Caption) then
  ShowMessage('This works for me in Windows 10'); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-10-25T17:51:40.263

Form.bringtofront; ?

Should work. If you put it in a timer it will stay at front.

# javascript - 更新产品时如何处理 body_html 中的特殊 UTF8 字符？

> ID：12946152
> 
> 赞同：0
> 
> 时间：2012-10-18T02:19:25.617
> 
> 标签：javascript, shopify, non-ascii-characters

我正在使用 API 更新产品。但是，当 body_html 字段中存在非 ASCII（大于 0x7f）时，产品不会得到更新。

例如：

```
 body_html: "<b>Acer’s Aspire®</b>" 
```

失败没有任何错误/警告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:52:18.263

我解决了这个问题：http: [//mothereff.in/js-escapes](http://mothereff.in/js-escapes)

但是，我认为 Shopify 应该在后端解决这个问题。

# jquery - 使用jQuery根据选择值更改隐藏字段值

> ID：12946153
> 
> 赞同：0
> 
> 时间：2012-10-18T02:19:32.043
> 
> 标签：jquery, html

我正在尝试根据用户从下拉菜单中选择的内容更改隐藏的表单值。

这是我的 jQuery 代码：

```
$("#color").change(function() {
    if ($(this).val() == "black" ) {
        $("#id").val("21");
    } else if ($(this).val() == "white" ) {
        $("#id").val("22");
    }
}); 
```

这是我的表单html：

```
<form class="addToCart" id="addToCart" name="addToCart" action="/cart/add">
    <input type="hidden" id="id" name="id" value="21">
    <input type="hidden" id="name" name="name" value="Tank Top">
    <table width="100%" border="0" cellspacing="0" cellpadding="2">
        <tr>
            <td align="center"><span class="pink-font">Color</span></td>
            <td align="center"><span class="pink-font">Size</span></td>
            <td align="center"><span class="pink-font">Qty</span></td>
            <td align="center">&nbsp;</td>
        </tr>
        <tr>
            <td align="center">
                <select id="color" name="color">
                    <option value="black" selected="selected">Black</option>
                    <option value="white">White</option>
                </select>
            </td> 
```

谁能指出我正确的方向。我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:30:58.890

这是我使用的代码：

```
$(function() {
    $("#color").change(function() {
        if (this.value == "black") {
            $("#id").val("21");
        } else if (this.value == "white") {
            $("#id").val("22");
        }
    });
}); 
```

# c# - 如何获取索引大于 max_int 的数组元素

> ID：12946154
> 
> 赞同：3
> 
> 时间：2012-10-18T02:19:35.007
> 
> 标签：c#, arrays

假设我们有一个长度非常大的字符串，甚至比 max_int 还要大。

```
string str="this should contain a long string"; 
```

如果我想到达`str[100000000000]`.

我该怎么做？

当我尝试放置其类型不是 int 的索引时，我收到以下错误：

> 'string.this[int]' 的最佳重载方法匹配有一些无效参数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:30:30.457

你不能。我不相信你可以拥有一个占用超过 2^32 字节的对象，所以你真的不会遇到这个。

根据[这篇文章](https://stackoverflow.com/questions/3657181/very-large-collection-in-net-causes-out-of-memory-exception)，最大 CLR 对象大小为 2GB，这证实了我的说法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T02:45:22.770

在 .NET 4.5 之前，单个对象的最大大小为 2GB，因此您永远不可能拥有这么大的字符串，因此尝试使用这么大的索引没有任何意义。

* * *

在 .NET 4.5 中，您可以增加该限制。引用[MSDN](http://msdn.microsoft.com/en-us/library/ms241064%28v=vs.110%29.aspx)：

*“默认情况下，当您在 64 位 Windows 操作系统上运行 64 位托管应用程序时，您可以创建不超过 2 GB 的对象。但是，在 .NET Framework 4.5 中，您可以增加这个限制。有关更多信息，请参阅[gcAllowVeryLargeObjects](http://msdn.microsoft.com/en-us/library/hh285054.aspx)元素。”*

但是，大多数容器仍然具有基于数组的接口`int`，甚至对于数组，这[也无济于事](http://msdn.microsoft.com/en-us/library/hh285054.aspx)......

*“数组中元素的最大数量是[UInt32MaxValue](http://msdn.microsoft.com/en-us/library/system.uint32.maxvalue.aspx)。”*

...这是 4,294,967,295，仍然小于您建议的 100,000,000,000。

* * *

你真的需要有那么多**连续**的记忆吗？为什么不将数据拆分为更小的块？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T02:32:16.100

您需要实现支持大范围索引的自定义数组。

所有普通的 .Net 类型（如字符串、数组、列表）仅支持用于索引的整数。这部分是由于对最大连续分配大小的限制 - 因此您的自定义类需要分块数据以支持此类索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T02:34:06.833

您可以使用[Array.GetValue](http://msdn.microsoft.com/en-us/library/2zexc3z9.aspx)来获取大于的数组索引`int`。

# vector - clojure 解构向量的向量以返回每个向量

> ID：12946156
> 
> 赞同：4
> 
> 时间：2012-10-18T02:19:41.437
> 
> 标签：vector, clojure

我对clojure很陌生，语法很粗糙。我正在尝试解构向量的向量。

这是我使用的函数的输出： [[:b 2 3] [:b 3 7] [:b 9 8]]

但是，我想做的是像这样显示输出： [:b 2 3] [:b 3 7] [:b 9 8]

基本上，试图摆脱那些最外面的括号。这可能吗？任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:51:53.193

如果你只想要指定的输出，你当然可以这样按摩：

```
(apply str (interpose " " [[:b 2 3] [:b 3 7] [:b 9 8]]))
;= "[:b 2 3] [:b 3 7] [:b 9 8]" 
```

成功了。至于解构，如果你有一个`f`返回的函数`[[:b 2 3] [:b 3 7] [:b 9 8]]`，你可以使用解构如下：

```
(defn f []  ;; something presumably more complicated goes here
    [[:b 2 3] [:b 3 7] [:b 9 8]])

(let [[a b c] (f)]
    (println a b c))
; prints [:b 2 3] [:b 3 7] [:b 9 8] 
```

# php - 这个 jquery 语句有什么问题。？

> ID：12946158
> 
> 赞同：1
> 
> 时间：2012-10-18T02:19:52.063
> 
> 标签：php, javascript, jquery, ajax, dialog

我有以下代码。一切似乎都运行良好，但只是有时，确认和警报通知会出现多次，而且它们会变得过于烦人。下面的代码有没有问题。感谢您的任何建议。

```
 $('.order_stateselect').hover(function(){
        var value_text=$(this).find(":selected").text();
        var value_code=$(this).find(":selected").val();
        $(this).change(function(){
            if(confirm('Confirm Order Status Change?')){
                var conduct_status_chge=$.post('/seller/helpers/order_status_change.php',{order_item_id:$(this).parent('td').siblings('.order_item_id').text(),order_item_status:$(this).find(':selected').val()},function(data){
                    alert(data);
                })
                .error(function() {
                    $(this).find(':selected').removeAttr('selected');
                    $(this).find('option:contains(value_code)').attr('selected','selected');
                    alert('error');

                });
            }else{
                $(this).find(':selected').removeAttr('selected');
                $(this).find('option:contains(value_code)').attr('selected','selected');
            }
        });
    }); 
```

简要说明我在这里做什么。

这是一个带有多个选项的选择框。此选择框是项目列表中表格单元格的一部分。

即：意味着每一行都包含一个项目，并且对于每一行，都有一个专用于该特定行的选择框。

1）悬停时，我在页面加载时通过我的数据库值加载所选选项的值。

2）当用户从选择框中选择不同的值并确认选择时，我会执行 $.post。

3) 如果用户按下取消或脚本调用出错导致 $.post 失败，我将所选选项恢复为数据库中的原始值。

如果我的解释有点不清楚，我很抱歉，但如果你们需要更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:28:14.000

我将从您的代码中摘录一小段：

```
$('.order_stateselect').hover(function(){
    var value_text=$(this).find(":selected").text();
    var value_code=$(this).find(":selected").val();
    $(this).change(function(){ 
```

当鼠标光标进入该区域时，您正在附加一个更改处理程序；如果这种情况发生多次，您的更改处理程序也会被多次应用。

您应该`.change(...)`移动`.hover()`:

```
$('.order_stateselect')
    .hover(function() { ... })
    .change(function() { ... }) 
```

# c - C 数组指针失败

> ID：12946162
> 
> 赞同：0
> 
> 时间：2012-10-18T02:20:18.117
> 
> 标签：c, pointers

我知道网上有很多 c 指针教程，我确实阅读了它们。但是我仍然对指针的某些部分感到困惑。例如，我有一个数组 unsigned `char M[10000]`，现在我想使用指针方式将值存储在数组中，而不是指定索引，我下面的代码有错误。

```
//starting to put value into M[0]
*(char*)&M='1';
//increase the address to M[1]
&M++;
//input value at M[1]
*(char*)&M='a'; 
```

据我了解，当我这样做时，我`&M++`将地址增加到 1 个字节，`M[1]`支架的位置在哪里，但是有一个错误。我是c新手，谢谢帮助。

详细代码 - 更新：

```
#include <stdio.h>
#include <stdlib.h>

int eax,ebx,ecx,edx,esi,edi,ebp,esp;
unsigned char M[10000];

void exec(void){
    *M= 'a';
    M++ ;
    //append space behind a
    *(char*)&M += ' ' ;
    *(char*)&M += 'b' ;
}

int main() {
    exec();
    print(M);
} 
```

我正在使用 gcc 和代码块

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:54:01.933

数组变量名可以被认为是一个常量指针。虽然可以将其视为指针，但不能修改变量名值。

例如，我们可以创建一个数组，然后通过使用下标或使用指针算术和使用星号 (*) 符号取消引用来访问数组的元素。

```
char myArray[20];    // an array of 20 characters

myArray[2] = 'C';    // assigning a value of the letter C to the third element of the array
*(myArray + 2) = 'K';  // assigning a value of the letter K to third element of the array

char *pmyArray;      // a pointer to one or more characters, not yet initialized though.
pmyArray = myArray;  // assigning the address of the first element of the array to my pointer
*(pmyArray + 2) = 'J';     // assigning a value of the letter J to third character after the character pointed to by pmyArray 
```

指针的值可以递增。例如：

```
pmyArray++;    // increment by one position
pmyArray = pmyArray + 1;    // increment by one position
pmyArray += 1;       // increment by one position 
```

但是，数组名称不是真正的指针变量，它更像是一个指针常量，因此数组名称不能以指针变量可以递增的方式递增。递增指针的好处是实际地址增加了将指针移动到该类型的下一个内存地址的地址所需的字节数。

例如：

```
char myArray[48];
char *pmyChar = myArray;
short *pmyShort = (short *)myArray;  // use cast to assign address of array to pointer
long  *pmyLong = (long *)myArray; 
```

使用这些语句，三个不同的指针都将指向同一个内存地址，即字符数组 myArray 开始的地址。但是，如果我们像这样递增这些指针中的每一个：

```
pmyChar++;      // increment by one to next character
pmyShort++;     // increment by one to next short
pmyLong++;      // increment by one to next long 
```

现在，这些指针中的每一个都将包含不同的地址。指针 pmyChar 将包含字符数组 myArray 的第二个元素的地址，因为 pmyChar 是一个 char 指针，就像 myArray 是一个 char 数组一样。

指针 pmyShort 将包含字符数组 myArray 的第三个元素的地址，因为 pmyShort 是一个短指针，一个 short 包含两个字节（每个 char 为一个字节），而 pmyShort 的递增是通过增加包含在指针变量由 short 的大小而不是 char 的大小。

指针 pmyLong 将包含字符数组 myArray 的第五个元素的地址，因为 pmyLong 是一个 long 指针，一个 long 包含四个字节，而 pmyLong 的递增是通过将指针变量中包含的地址增加 a 的大小来完成的长而不是一个字符的大小。

您还可以有一个指向指针的指针，如下所示：

```
char myArray[48];
char *pmyArray;
char **pmyPointerToMyArray;

pmyArray = myArray;                 // pointer to myArray
pmyPointerToMyArray = &pmyArray;    // address of pointer to myArray 
```

然后你可以做这样的事情：

```
pmyArray++;   // increment to second element of myArray
*(pmyArray) = 'J';  // set the second element of myArray to letter J
*(*pmyPointerToMyArray) = 'K';  // set the second element of myArray to letter K 
```

最后一条语句的作用是获取 pmyPointerToMyArray 所指向的值，即变量 pmyArray 的地址，然后将该值用作字符的地址来放置字母 K。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:26:49.910

您需要声明一个新指针并将其值分配给 &M 然后增加这个新指针而不是直接增加 &M 。

在 C 中，数组名称是指针，但它的值不能更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T03:51:27.237

您将需要声明一个单独的指针变量，而不是试图操纵`M`. C 将不允许您`M`直接分配或修改。

```
char M[1000];
char *p = M; // or &M[0]
...
*p++ = 'a';  // M[0] = 'a'
*p++ = 'b';  // M[1] = 'b' 
```

除非它是、 或一元运算符的操作数`sizeof`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of”类型的*表达式*将被转换（“decay”）为“指针”类型的表达式，表达式的值将是数组第一个元素的地址。`_Alignof``&`*`T``T`*

 *然而...

虽然您可以取消引用生成的指针表达式`*`（例如，表达式`*M`和`M[0]`具有相同的类型并产生相同的值），但它可能不是`++`or`--`运算符的操作数，也可能不是赋值运算符的目标。所以你不能做类似`M++`or的事情`M += ...`。

还，

> 据我了解，当我执行 &M++ 时，我将地址增加到 1 个字节，

不。每当你用 推进一个指针时`++`，你都会将地址增加*指向类型的大小*。如果`p`指向一个`char`类型，那么是的，`p++`将前进到下一个`char`值的地址，也就是下一个字节。如果`p`指向一个`int`类型，`p++`将前进到下一个`int`值的地址，可能是当前地址的 2、4 甚至 8 个字节，具体取决于平台。

请注意，`&M++`由于多种原因，这不起作用。一，我已经指出它`M`可能不是 的操作数`++`，因为它是一个数组类型。二、 postfix`++`的优先级高于 unary `&`，所以表达式被解析为`&(M++)`，结果`++`不是*lvalue*，也就是说它本身没有地址，所以不能`&`对它应用操作符。第三，表达式`&M`将产生一个指向( )*数组*的指针，而不是单个。假设以下声明：`char``char (*)[1000]``char`

```
char *p = M;
char (*ap)[1000] = &M;

p++;  // points to M[1];
ap++; // points to the char following M[999]; 
```

`p++`前进`p`到下一个`char`。 `ap++`前进`ap`到 的下一个*1000 元素数组`char`*。*

# sql - 找到一个键，使其对应的值是另一个表中的所有不同值

> ID：12946164
> 
> 赞同：-1
> 
> 时间：2012-10-18T02:20:39.990
> 
> 标签：sql

我有 3 个如下所示的表：

`STUDENT(*snum: integer, sname: string, deptid: integer, slevel: string, age: integer)`

`CLASS(*cname: string, meets_at: date, room: string, fid: integer)`

`ENROLLED(*snum: integer, *cname: string)`

我正在尝试查找所有房间（CLASS 中的房间）都有课程的学生的学生姓名（sname）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:01:59.780

```
select sname from STUDENT
join ENROLLED on STUDENT.snum = ENROLLED.snum
join CLASS on ENROLLED.cname = CLASS.cname
group by sname
having count(distinct room) = (select count(distinct room) from CLASS) 
```

SQLfiddle在这里：[http ://sqlfiddle.com/#!2/71cba/1/0](http://sqlfiddle.com/#!2/71cba/1/0)

您可能应该将 ROOMS 作为一个单独的表，以避免房间名称输入不一致的问题。

# cassandra - 如何查询 Cassandra 集群的元数据？

> ID：12946170
> 
> 赞同：5
> 
> 时间：2012-10-18T02:22:21.200
> 
> 标签：cassandra, hector, astyanax

我们有一个创造性地命名为“引导程序”的过程，它为环境（Dev1、Dev2、QA、...、PROD）中给定的软件版本设置我们的 Cassandra 集群。此引导程序创建/更新键空间和列族以及在非产品中填充初始数据。

我们正在使用 Astyanax，但我们可以使用 Hector 进行引导。

鉴于另一个团队已决定每个环境都有自己的数据中心名称。鉴于当我们从两个数据中心转移到更多数据中心时，我希望它能够在产品中发挥作用。鉴于我们将使用 PropertyFileSnitch：

我如何询问 Cassandra 集群的布局？（不脱壳到`nodetool ring`）

具体来说，我需要知道数据中心的名称，以便在使用 NetworkTopologyStrategy 时使用正确的策略选项设置创建或更新键空间。我们希望每个数据中心有 3 个副本。有些环境有一个，几个有两个，最终生产会有更多。

是否有 CQL 或 Thrift 调用可以为我提供有关集群布局的信息？

我查看了各种文档集中的几个 TOC，并用谷歌搜索了一下。我想在挖掘 nodetool 代码之前我会在这里问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T19:30:25.850

我不确定 Hector 或 Astyanax 是如何暴露这一点的，但基本的 Thrift 方法`describeRing(keyspace)`应该可以为您提供所需的内容。它包含的部分信息是`EndpointDetails`如下所示的结构：

```
endpoint_details=[EndpointDetails(datacenter='datacenter1', host='127.0.0.1', rack='rack1')] 
```

连同该方法的其余结果，您应该能够找出集群中每个节点的令牌、DC、机架等。

由于您使用的是 Java 客户端，因此您还可以使用一些 JMX 方法（nodetool 使用）来描述集群的更多选择部分。例如，您可能会查看 snitch mbean ( `"org.apache.cassandra.db:type=EndpointSnitchInfo"`)，特别是`getDatacenter(ip)`and`getRack(ip)`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:31:59.927

好吧，另一个选择（间接答案）是你可以做 PlayOrm 正在做的事情，所有创建 CF 都会通过你，你保存一些你想要的数据，这样你就可以查询自己的数据，尽管这意味着另一个团队和你有最好通过同一个中间人，所以所有信息都在那里。好吧，可能不是你想要的，只是一个让你思考其他潜在解决方案的想法。

# php - MongoDB PHP，按价格排序

> ID：12946173
> 
> 赞同：0
> 
> 时间：2012-10-18T02:22:30.127
> 
> 标签：php, mongodb

我正在尝试按价格高-> 低和低-> 高对 Mongo 数据库中的房地产进行排序。这就是我进行查询的方式：

```
<?php
// open connection to MongoDB server
$conn = new Mongo();
$db = $conn->test;
$collection = $db->residential;
$filter = array('LISTSTATUS' => 'Active');
$listings = $collection->find($filter);
// Sort by price High->Low
$listings->sort(array('LISTPRICE' => -1));
// Skip if the offset is set
if($skip != 0)
{
     $listings->skip($skip);
}
// 9 results per page
$listings->limit(9);
?> 
```

在视图中，我只是做一个这样的while循环：

```
foreach($listings as $listing)
{
   print_r($listing);
} 
```

该脚本返回一个 Mongo 对象，但它没有正确排序。看起来它将“LISTPRICE”作为字符串：

```
Array
(
    [LISTPRICE] => 999900
)
1           
        Array
(
    [LISTPRICE] => 99900
)
1   
        Array
(
    [LISTPRICE] => 99900
)
1       
        Array
(
    [LISTPRICE] => 99900

) 
```

99.9 万美元和 9.9 万美元之间存在巨大差距，我敢肯定，在这个范围内有房产。如果我从低->高排序，第一页上的房产是 100 万美元和 10 万美元。如何让 mongodb 将价格作为整数或双精度而不是字符串？

# mysql - Mysql Subpartioning -- 按天分区，然后是一个值

> ID：12946175
> 
> 赞同：1
> 
> 时间：2012-10-18T02:23:18.987
> 
> 标签：mysql, partitioning, database-partitioning

我在运行 5.5.24 的 Linux Mysql 服务器上有一个表，如下所示：

```
 CREATE TABLE Level (
      snr float DEFAULT NULL,
      checkDate datetime DEFAULT NULL,
      id bigint(20) unsigned NOT NULL AUTO_INCREMENT,
      checkTs int(11) DEFAULT NULL,
      CheckType tinyint(11) NOT NULL DEFAULT '0',
      PRIMARY KEY (id),
      UNIQUE KEY LevelIndex (checkDate,snr),
      KEY checkDateIndex (checkDate),
      KEY CheckTypeDate (checkTs,CheckType)
    ) ENGINE=InnoDB AUTO_INCREMENT=5290273472 DEFAULT CHARSET=latin1 
```

它有大约 4 亿行 - 我想先按一天，然后按 CheckType 的值（即 0、1、2、3）对其进行分区。或者，至少，我认为我愿意——这就是我来到这里的原因——我要问的是，我解释的是否可能，其次，如果是的话，这是一个合理的想法吗？我正在努力做到这一点，因此对于每种支票类型来说，查看一天的报告很快，但我有历史数据，例如，30 天的数据可供查看。感谢您抽时间阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:58:56.550

select snr,checkDate,CheckType from dbGreen.Level where checkDate >= '2012-10-14' and checkDate < '2012-10-15'; produces daily report

```
+------+---------------------+----------------+
| snr  | checkDate           |   CheckType    |
+------+---------------------+----------------+
|   38 | 2012-10-14 19:33:01 |              2 |
| 37.9 | 2012-10-14 19:33:01 |              1 |
| 44.9 | 2012-10-14 19:33:01 |              2 |
| 35.6 | 2012-10-14 19:33:01 |              2 |
| 37.3 | 2012-10-14 19:33:01 |              2 |
| 37.6 | 2012-10-14 19:33:01 |              2 |
| 37.5 | 2012-10-14 19:33:01 |              2 |
| 37.8 | 2012-10-14 19:33:01 |              1 |
| 35.8 | 2012-10-14 19:33:01 |              1 |
| 39.6 | 2012-10-14 19:33:01 |              2 | 
```

# objective-c - 如何删除目标C中'>'之前和空格之后的内容？

> ID：12946176
> 
> 赞同：0
> 
> 时间：2012-10-18T02:23:18.783
> 
> 标签：objective-c, string, cocoa-touch, parsing

这是示例：

`<aNodeName thsisjijdsnjdnjsd>`, 我想删除`thsisjijdsnjdnjsd`,

如何检测空格之前`>`和之后的字符串`，并在目标 C 中将其修剪掉？另外，请提醒我不知道`aNodeName`or `thsisjijdsnjdnjsd`，因为数据可能会变成这样：`

 ``<anotherNodeName zxzxxzxzxz>`, 我需要删除`zxzxxzxzxz`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:29:39.703

基本上你有两个选择

*   [常用表达](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

    ```
    NSString *string = @"<aNodee thsisjijdsnjdnjsd>";
    NSError *error;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<(\\S+)( .*)>" options:NSRegularExpressionCaseInsensitive
                                                                             error:&error];
    NSArray *matches = [regex matchesInString:string options:0 range:NSMakeRange(0, [string length])];
    [matches enumerateObjectsUsingBlock:^(NSTextCheckingResult *result, NSUInteger idx, BOOL *stop) {
        NSString* nodeName = [string substringWithRange:[result rangeAtIndex:1]];
        NSString* value = [string substringWithRange:[result rangeAtIndex:2]];
        NSLog(@"%@ %@",nodeName, value);
    }]; 
    ```

    [请注意，您不应该使用正则表达式解析复杂的 html。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

*   [NSScanner](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)

    ```
    NSScanner *scanner = [NSScanner scannerWithString:string];
    BOOL recordingValue = NO;

    NSMutableString *valueString = [@"" mutableCopy];
    [scanner setScanLocation:0];
    while (![scanner isAtEnd]) {

        NSString *charAtlocation = [string substringWithRange:NSMakeRange([scanner scanLocation], 1)];
        if ([charAtlocation isEqualToString:@" "]){
            recordingValue = YES;
            [valueString appendString:@" "];
        } else{
            if ([charAtlocation isEqualToString:@">"]){
                recordingValue = NO;
            } else if (recordingValue) {
                [valueString appendString:charAtlocation];
            }
        }
        [scanner setScanLocation:[scanner scanLocation]+1];
    } ;

    NSLog(@"Scanner approach: %@", valueString);
    NSLog(@"Scanner approach: %@", [string stringByReplacingOccurrencesOfString:valueString withString:@""]); 
    ```

* * *

完整的基于命令行的示例

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        NSString *string = @"<aNodee thsisjijdsnjdnjsd> ";
        NSError *error;
        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<([a-zA-z]+)( .*)>" options:NSRegularExpressionCaseInsensitive
                                                                                 error:&error];
        NSArray *matches = [regex matchesInString:string options:0 range:NSMakeRange(0, [string length])];
        [matches enumerateObjectsUsingBlock:^(NSTextCheckingResult *result, NSUInteger idx, BOOL *stop) {
            NSString* nodeName = [string substringWithRange:[result rangeAtIndex:1]];
            NSString* value = [string substringWithRange:[result rangeAtIndex:2]];
            NSLog(@"Regex approach: %@ %@",nodeName, value);

            NSLog(@"Regex approach: %@", [string stringByReplacingOccurrencesOfString:value withString:@""]);
        }];

        NSScanner *scanner = [NSScanner scannerWithString:string];
        BOOL recordingValue = NO;

        NSMutableString *valueString = [@"" mutableCopy];
        [scanner setScanLocation:0];
        while (![scanner isAtEnd]) {

            NSString *charAtlocation = [string substringWithRange:NSMakeRange([scanner scanLocation], 1)];
            if ([charAtlocation isEqualToString:@" "]){
                recordingValue = YES;
                [valueString appendString:@" "];
            } else{
                if ([charAtlocation isEqualToString:@">"]){
                    recordingValue = NO;
                } else if (recordingValue) {
                    [valueString appendString:charAtlocation];
                }
            }
            [scanner setScanLocation:[scanner scanLocation]+1];
        } ;

        NSLog(@"Scanner approach: %@", valueString);
        NSLog(@"Scanner approach: %@", [string stringByReplacingOccurrencesOfString:valueString withString:@""]);
    }
    return 0;
} 
```

输出：

```
Regex approach: aNodee  thsisjijdsnjdnjsd
Regex approach: <aNodee> 
Scanner approach:  thsisjijdsnjdnjsd
Scanner approach: <aNodee> 
````

# java - Java拆分列表

> ID：12946181
> 
> 赞同：1
> 
> 时间：2012-10-18T02:24:11.447
> 
> 标签：java

我有一项任务是创建一个链接列表并拆分为两个子列表，现在我的代码有错误。如果有人可以帮助我编写代码，我无法弄清楚每次需要更改的地方，因为我更改了一些它给了我更多错误。

```
public class UnorderedLinkedList<E extends Comparable<? super E>> extends LinkedList<T>
{
    public void splitMid(LinkedList<String> subList)
    {
        LinkedList<T> current;//the head pointer
        LinkedList<T> mid;//the mid point 

        //Node first = firstNode;
        //Node last = firstNode;

        //Node subListFirst;
        //Node subListLast;
        int i;

        if(head == null)
        {
            subList.head = null;
            subList.last = null;
            subList.count = 0;
        }
        else
        {
            //mid =
            head = null;
            current = head.next;
            i = 1;

            if(current != null)
                current = current.next;

            while(current != null)
            {
                mid = mid.next;
                current = current.next;
                i++;

                if(current != null)
                    current = current.next;
            }

             subList.head = head.next;
             subList.last = last;
             last = mid ;
             last.next = null;

             subList.count = count - i;
             count = i;
        }
    }
} 
```

# 错误信息

> G:\LinkedList\src\LinkedList.java:184：错误：找不到符号 subList.count = 0；
> 
> 符号：变量计数。
> 
> 位置：LinkedList.Node 类型的变量 subList
> 
> 其中 T,E 是类型变量：
> 
> T 扩展类 LinkedList 中声明的 Object。
> 
> E 扩展类 LinkedList.UnorderedLinkedList 中声明的 Comparable

# 我的主要课程：

```
public void main(String args[])
{
    LinkedList<Integer> myList = new LinkedList<Integer>();
    LinkedList<Integer> subList = new LinkedList<Integer>();

    myList.addLast(34);
    myList.addLast(65);
    myList.addLast(87);
    myList.addLast(29);
    myList.addLast(12);

    myList.splitMid( subList);
} 
```

# 错误信息

> G:\LinkedList\src\LinkedTest.java:31：错误：找不到符号。
> 
> myList.splitMid(subList);
> 
> 符号：方法 splitMid(LinkedList)
> 
> 位置：LinkedList 类型的变量 myList

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:26:11.177

关于编译错误：

您正在使用实例`LinkedList`调用您为类定义的方法`UnorderedLinkedList`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:37:01.900

1.

```
G:\LinkedList\src\LinkedList.java:184: error: cannot find symbol subList.count = 0; 
```

尝试删除 subList.count；不必为计数分配值；

2.

```
G:\LinkedList\src\LinkedTest.java:31: error: cannot find symbol.

myList.splitMid(subList); 
```

做这个：

```
UnorderedLinkedList<Integer> myList = new UnorderedLinkedList<Integer>(); 
```

# javascript - 在具有未知后代数量的选择中循环遍历 textNodes

> ID：12946183
> 
> 赞同：0
> 
> 时间：2012-10-18T02:24:36.067
> 
> 标签：javascript, jquery

我需要基本上*查找和替换*从 Web 服务中检索为对象数组（具有逗号分隔的术语）的单词列表。*查找和替换*仅发生在 DOM 中的特定元素上，但它们可以有未知且数量不定的子元素（其中可以嵌套未知次数）。

我正在努力解决的主要部分是弄清楚如何选择所有节点到 textNode 级别，并且嵌套元素的数量未知。

这是一个非常精简的示例：

从网络服务中检索：

```
[{
  terms: 'first term, second term',
  youtubeid: '123qwerty789'
},{
  terms: 'match, all, of these',
  youtubeid: '123qwerty789'
},{
  terms: 'only one term',
  youtubeid: '123qwerty789'
},
etc] 
```

HTML 可能类似于：

```
<div id="my-wrapper">  
  <ol>
    <li>This is some text here without a term</li>
    <li>This is some text here with only one term</li>
    <li>This is some text here that has <strong>the first term</strong> nested!</li>
  </ol>
</div> 
```

Javascript：

```
$('#my-wrapper').contents().each(function(){
  // Unfortunately only provides the <ol> - 
  // How would I modify this to give me all nested elements in a loopable format?
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:37:36.693

我想你想要

`$('#my-wrapper *').each`

这应该选择所有后代，`#my-wrapper`无论它们是什么。

看[这个小提琴](http://jsfiddle.net/YYQZC/)的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:02:58.867

我不确定您是否在严格寻找 jQuery 答案，但这是 JavaScript 中的一种解决方案：

```
var recurse = function(el) {
    // if text node or comment node
    if(el.nodeType == 3 || el.nodeType == 8) {
        // do your work here
        console.log("Text: " + el.nodeValue);
    }else {
        for(var i = 0, children = el.childNodes, len = children.length; i < len; i++) {
            recurse(children[i]);
        }
    }
}
recurse(document.getElementById("my-wrapper")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T03:53:10.370

以下函数与 cbayram 的函数非常相似，但应该更高效一些，并且它会跳过脚本元素。您可能还想跳过其他元素。

它基于我使用了一段时间的*getText函数，您的要求相似。*唯一的区别是如何处理文本节点的值。

```
function processTextNodes(element) {
  element = element || document.body;
  var self = arguments.callee;  // or processTextNodes
  var el, els = element.childNodes;

  for (var i=0, iLen=els.length; i<iLen; i++) {
    el = els[i];

    // Exclude script element content
    // May need to add other node types here
    if (el.nodeType == 1 && el.tagName && el.tagName.toLowerCase() != 'script') {

      // Have an element node, so process it
      self(el);

    // Othewise see if it's a text node
    // If working with XML, add nodeType 4 if you want to process
    // text in CDATA nodes
    } else if (el.nodeType == 3) {

      /* do something with el.data */

    }
  }
  /* return a value? */
} 
```

该函数应该完全与浏览器无关，并且应该适用于任何符合要求的 DOM（例如 XML 和 HTML）。顺便说一句，它也非常类似于 jQuery 的*文本*功能。

您可能要考虑的一个问题是将单词拆分为两个或多个节点。它应该很少见，但很难找到它何时发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T02:29:39.423

试试下面的：

```
 $('#my-wrapper li') 
```

# security - 没有密码但每次用户尝试登录时都会通过电子邮件发送登录链接的用户帐户？

> ID：12946186
> 
> 赞同：0
> 
> 时间：2012-10-18T02:25:19.810
> 
> 标签：security, authentication, login, passwords

我正在考虑以这种方式为我的网站构建用户登录系统。用户每次需要登录时，通过单击发送到其电子邮件的链接来进行身份验证。

不确定以前是否有人这样做过，但我想知道这实际上是积极的用户体验还是消极的用户体验？

在我的脑海中，我认为这是积极的，因为：

1.  用户只需要提供他或她的电子邮件地址即可注册，因此注册更加容易。（积极的）
2.  没有密码或任何存储在网站数据库中，这对开发人员来说更容易，对黑客来说更难。（积极的）
3.  该系统确保用户是电子邮件的合法所有者（而不是知道/猜到密码的人）。（积极的）
4.  系统需要在发送电子邮件时得到保护，因此开发人员/系统管理员需要做更多的工作。（消极的）
5.  电子邮件可能由于某种原因而延迟，即使是 10 秒也很可能会让用户感到沮丧并最终放弃。（大负面）

这真的适用吗？请问有人有这方面的第一手经验吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:23:27.497

我能想到的最大缺点是，如果有人入侵了他们的电子邮件帐户，他们也可以免费访问您的系统。

考虑到很多很多黑客都是基于首先访问一个人的电子邮件帐户并利用它来访问其他网站，我会说这是一个很大的负面影响。

# haskell - 为什么我不能使用 iterate 重复应用地图？

> ID：12946187
> 
> 赞同：3
> 
> 时间：2012-10-18T02:25:36.340
> 
> 标签：haskell, higher-order-functions, lifting

我已经意识到，当我嵌套了数据结构时，我一直在手动编写代码来深入研究它们。像这样：

```
--one level
Prelude> map (*2) [1,2,3]
[2,4,6]

--nested two levels
Prelude> let t2 = map $ map (*2)
Prelude> t2 [[1,2,3],[4,5,6]]
[[2,4,6],[8,10,12]]

--nested three levels
Prelude> let t3 = map $ map $ map (*2)
Prelude> t3 [[ [1,2,3],[4,5,6] ],[ [1,2,3],[4,5,6] ]]
[[[2,4,6],[8,10,12]],[[2,4,6],[8,10,12]]] 
```

所以我突然想到，我应该能够使用更高阶的函数自动构造一个函数来深入研究我的嵌套数据结构：

```
Prelude> let t f n = (iterate map f) !! n

<interactive>:35:22:
    Occurs check: cannot construct the infinite type: b0 = [b0]
    Expected type: (a0 -> b0) -> a0 -> b0
      Actual type: (a0 -> b0) -> [a0] -> [b0]
    In the first argument of `iterate', namely `map'
    In the first argument of `(!!)', namely `(iterate map f)' 
```

它让我印象深刻

1.  我知道它会在预期的位置找到一个列表……别的
2.  我不知道如何解决这个问题 - 我是否应该编写代码来重复应用程序，即使那是我认为 iterate 的用途？
3.  这似乎类似于“提升”的概念——但我不知道如何应用这种直觉。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T03:09:18.187

问题是这些“迭代”有不同的类型。对于每次迭代，您都会获得额外的嵌套级别，因此您想要

```
t f 0 :: a -> b
t f 1 :: [a] -> [b]
t f 2 :: [[a]] -> [[b]] 
```

但`iterate :: (a -> a) -> a -> [a]`要求迭代都具有相同的类型。事实上，上述的直接实现需要某种形式的依赖类型，因为返回类型取决于`n`.

除非你有充分的理由不这样做，否则我建议保持简单，只写出所需的`map`调用次数。可以使用 Template Haskell 来生成它们，但这可能会比它的价值更麻烦。

但是，如果您有复杂的嵌套数据结构，您可能需要研究[SYB](http://hackage.haskell.org/package/syb)，它可以自动处理在嵌套结构中应用此类转换的样板。

这是一个简单的例子：

```
> import Data.Generics
> let t x = everywhere (mkT (*2)) x
> :t t
t :: Data a => a -> a
> t [2,4,6]
[4,8,12]
> t [[2,4,6],[8,10,12]]
[[4,8,12],[16,20,24]]
> t (Just [(1, 2, 3), (4, 5, 6)])
Just [(2,4,6),(8,10,12)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T03:09:48.340

想想`(iterate map f) !! n`. 您希望它是`a -> a`for `n = 0`, `[a] -> [a]`for `n = 1`, `[[a]] -> [[a]]`for `n = 2`- 通常，您希望此表达式的类型取决于的*值*。`n`但这在 Haskell 中是不可能的，因为它不是一种依赖类型的语言。

# android - Android SQLite 中的多主键

> ID：12946190
> 
> 赞同：3
> 
> 时间：2012-10-18T02:26:30.893
> 
> 标签：android, sqlite, syntax, null, primary-key

在 SQLite for Android 中添加多主键的正确方法是什么？

目前我有：

```
String Create_table = "CREATE TABLE project ( keyId INTEGER PRIMARY KEY, keyName TEXT PRIMARY KEY)"; 
```

我想到的另一种方法是：

```
 String Create_table = "CREATE TABLE project (keyID INTEGER, keyName TEXT, PRIMARY KEY(keyID, keyName))"; 
```

两者都有效吗？如果是这样，哪个更好？另外，我如何禁止 NULL 值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T02:27:45.107

不，不可能为单个表创建多个主键。这是任何 SQL 的基本规则。但是，您可以使用其他约束，例如带有索引的**UNIQUE**来实现此目的。

这不是有效的 SQL 语法：

> String Create_table = "CREATE TABLE 项目 (keyId INTEGER PRIMARY KEY, keyName TEXT PRIMARY KEY)";

以其他方式，您可以为多个列创建主键，如下所示：

```
Create Table yourTableName (col1, col2, col3, PRIMARY KEY (col1, col2)); 
```

> 如何禁止**NULL**值？

您可以使用**NOT NULL** Constraint ，它不允许您输入**NULL**值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T02:29:39.577

您可以在一张表中使用一个主键，多个外键

# gwt - UiField 和文本框的 GWT UI 问题

> ID：12946192
> 
> 赞同：0
> 
> 时间：2012-10-18T02:27:16.200
> 
> 标签：gwt

**概念**

当用户单击 removeUser 标签时，会弹出一个文本框。然后，用户输入他们想要删除的用户的用户名。然后，用户点击“Enter”删除用户。

**GWT 问题**

我正在使用一个实现类型对象的类，`com.google.gwt.user.client.ui.Composite.`

它的一个字段包括一个@UiField 标签：

```
@UiField
Label removeUser; 
```

而且我有一个常规的 TextBox，当单击 removeUser Label 时应该出现该文本框。

```
 private TextBox removeUserTextBox = new TextBox(); 
```

如果我的代码是正确的，那么当点击 removeUser 时会出现 removeUserTextBox。

```
 removeUser.addClickHandler(new ClickHandler()
    {
        public void onClick(final ClickEvent event)
        {   
            removeUserTextBox.setVisible(true);
            removeUserTextBox.setText("blah blah")
            removeUserTextBox.addStyleName(StaticResourceBundle.
INSTANCE.coreCss().removeUserTextBox());
            }
        }); 
```

但是，当我单击 removeUser 标签时，removeUserTextBox 不显示。

我不认为（或不知道）这是否是 CSS 问题，因为 removeUserTextBox 的 CSS 类似于 removeUser 的 CSS，它显示正确。

请指教。

谢谢，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:25:02.470

您的文本框似乎未附加到 DOM。您可以执行以下任一操作。

1）在标记（uiBinder）中包含一个文本框，并使用@UiField 注释注入它。

2) 将使用构造函数创建的文本框添加到已附加到 DOM 的 RootPanel 或其他容器。

3）将文本框包装到弹出面板中并相对于标签显示它。我最喜欢这个变体，因为不需要用 css 定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:51:12.650

为什么要在处理程序的文本框中添加样式？只需在点击时 setVisible(true)，然后在用户确认删除时 setVisible(false)。

# javascript - 了解while循环

> ID：12946193
> 
> 赞同：2
> 
> 时间：2012-10-18T02:27:29.377
> 
> 标签：javascript

我是 Javascript 的新手，我正试图绕开 while 循环。我了解他们的目的，我想我了解他们的工作方式，但我遇到了麻烦。

我希望 while 值不断重复，直到两个随机数相互匹配。目前，while 循环只运行一次，如果我希望它重复自己，我需要再次运行它。

如何设置此循环，以便它自动重复 if 语句，直到 diceRollValue === compGuess？谢谢。

```
diceRollValue = Math.floor(Math.random()*7);
compGuess = Math.floor(Math.random()*7);
whileValue = true;

while (whileValue) {
    if (diceRollValue === compGuess) {
        console.log("Computer got it right!")
        whileValue = false;
    }
    else {
        console.log("Wrong. Value was "+diceRollValue);
        whileValue = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T02:29:44.993

那是因为你只是在 while 之外执行随机数生成器。如果您想要两个新数字，则需要*在*while 语句中执行它们。类似于以下内容：

```
var diceRollValue = Math.floor(Math.random() * 7),
    compGuess = Math.floor(Math.random() * 7),
    whileValue = true;
while (whileValue){
  if (diceRollValue == compGuess){
    console.log('Computer got it right!');
    whileValue = false; // exit while
  } else {
    console.log('Wrong. Value was ' + diceRollValue);
    diceRollValue = Math.floor(Math.random() * 7); // Grab new number
    //whileValue = true; // no need for this; as long as it's true
                         // we're still within the while statement
  }
} 
```

如果你想重构它，你也可以使用`break`退出循环（而不是使用变量）：

```
var diceRollValue = Math.floor(Math.random() * 7),
    compGuess = Math.floor(Math.random() * 7);
while (true){
  if (diceRollValue == compGuess){
    // breaking now prevents the code below from executing
    // which is why the "success" message can reside outside of the loop.
    break;
  }
  compGuess = Math.floor(Math.random() * 7);
  console.log('Wrong. Value was ' + diceRollValue);
}
console.log('Computer got it right!'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:35:12.063

您有两个问题，第一个是您`whileValue`在 if 和 else 块中都进行了设置，因此无论随机数的值如何，循环都会在一次迭代后中断。

其次，您在循环之前生成猜测，因此您将一遍又一遍地检查相同的值。

所以删除`whileValue`else 块中的`compGuess`赋值并将赋值移动到 while 循环中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T02:39:34.350

将 2 个随机变量放入循环中。

```
whileValue = true;

while (whileValue) {
    diceRollValue = Math.floor(Math.random()*7);
    compGuess = Math.floor(Math.random()*7);
    if (diceRollValue === compGuess) {
        console.log("Computer got it right!")
        whileValue = false;
    }
    else {
        console.log("Wrong. Value was "+diceRollValue);
    }
} 
```

# ios - 在 iOS 中使用 NSBlockOperation 和 NSOperationQueue 进行延迟图像下载

> ID：12946201
> 
> 赞同：1
> 
> 时间：2012-10-18T02:28:51.717
> 
> 标签：ios

我正在尝试在我的应用程序中使用 tableview 显示图像和文本，对于延迟图像下载，我使用 NSBlockOperation 和 NSOPerationQueue 进行图像下载。这样所有的图像请求都将被添加到队列中，并同时启动图像下载。如果您等待几分钟下载所有图像，则在登陆该页面时工作正常。如果一进入此屏幕并返回上一个屏幕，应用程序就会崩溃。我可以理解问题是屏幕不再存在。帮我！我将如何解决这个问题？

感谢你的帮助！！

斯里兰卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:45:54.707

如果您想异步下载图像，请查看 [github](https://github.com/markofjohnson/HJCache)上的此存储库并参考此[博客](http://www.markj.net/hjcache-iphone-image-cache/)，希望能解决您的问题。对于崩溃放一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:32:16.317

根据 Apple 的建议，请参阅此内容以进行延迟图像加载

[http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-09T10:57:22.107

解决方案是使用这个库，不需要你设置下载它，库自己处理 - [SDWebImage](https://github.com/rs/SDWebImage)

您只需要到`#import <SDWebImage/UIImageView+WebCache.h>`您的项目，您还可以在下载图像时使用以下代码定义占位符：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        static NSString *CellIdentifier;
        CustomCell *cell = [tableview dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

        MyObject *object = (MyObject *)[self.list.array objectAtIndex:indexPath.row];

        [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
                       placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

        return cell;
} 
```

它还缓存下载的图像并为您提供出色的性能。

# multithreading - QThread::finished() is never emitted?

> ID：12946209
> 
> 赞同：1
> 
> 时间：2012-10-18T02:29:50.950
> 
> 标签：multithreading, qt4

I don't have a forever loop [like this question](https://stackoverflow.com/questions/12942461/qthread-finished-signal-is-never-emited?rq=1), but it still doesn't emit the finished() signal,

In the constructor of a class:

```
connect (&thread, SIGNAL(started()), SLOT(threadFunc()));
connect (&thread, SIGNAL(finished()), SLOT(finished())); 
```

In the finished() function,

```
void XX::finished()
{
  qDebug() << "Completed";
}

void XX::threadFunc()
{
  qDebug() << "Thread finished"; // only single line, finishes immediately
} 
```

But I never see the `finished()` get called, everytime before I start the thread with `thread.start()`, I must call `thread.terminate()` manually, did I misunderstood the usage of QThread?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:55:12.850

`QThread` will emit `finished` signal when `QThread::run` method is finished. Perhaps, you have incorrect implementation of this.

Default implementation of `run` method looks like this. It just calls another `exec` method.

```
void QThread::run()
{
    (void) exec();
} 
```

Implementation of `exec` method is a bit more complex. Now I simplified it.

```
int QThread::exec()
{
    // .....

    if (d->exited) {
        return d->returnCode;   
    }

    // ......

    QEventLoop eventLoop;
    int returnCode = eventLoop.exec();
    return returnCode;
} 
```

Judging by code, it can finish in two cases. In first case if it is already exited. In second it enters the event loop and waits until `exit()` is called.

How we can see now, your infinity thread loop is here. So you need `QThread::quit()` which is equal `QThread::exit(0)`.

**P.S.** Don't use `terminate`. It is dangerous.

# ruby-on-rails - 我可以增加设计中使用的身份验证令牌的大小吗？

> ID：12946211
> 
> 赞同：2
> 
> 时间：2012-10-18T02:30:17.270
> 
> 标签：ruby-on-rails, devise

是否可以增加设计使用的身份验证令牌的大小。目前，它们生成长度为 20 个字符的令牌。我想要 64 个字符的标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:05:33.213

要增加身份验证令牌的大小，您必须覆盖`generate_token`模型上的方法。`generate_token`是设计方法，您必须用您在模型中编写的方法覆盖。

见设计 - [https://github.com/plataformatec/devise/blob/master/lib/devise/models/confirmable.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/models/confirmable.rb)

# android - H.264、720p 视频比特率

> ID：12946215
> 
> 赞同：0
> 
> 时间：2012-10-18T02:30:23.293
> 
> 标签：android, ios, youtube, video-capture, h.264

免责声明：我对视频编解码器和编码知之甚少。

我正在开发一个允许用户录制视频的 iOS 和 Android 应用程序。我希望能够将视频上传到 YouTube 并让它们以 720p 质量播放。

我正在录制的视频总是少于 180 秒，总是 ~30fps 并且总是有音频。

1.  据我所知，这意味着我需要以 1280x720 的分辨率录制，那么我应该很好。这个对吗？
2.  我正在尝试确定 H.264 视频文件平均每秒视频的大小。据我了解，我需要知道视频的比特率。在 Android 2.2+ 和 iOS 5+ 上录制的 H.264 视频的比特率是多少？[这个 Android 开发者页面](http://developer.android.com/guide/appendix/media-formats.html)提到“高清”视频的比特率为“2Mbps”——是每秒 2 兆字节还是每秒 2 兆比特？对于任何录制的 H.264 视频，该速率是否相同？

我对此感到如此困惑的部分原因是因为我对 4 个不同长度的不同 Android 编码视频进行了测试，并产生了以下输出；

![Android 编码 H.264 视频的文件大小与时间](../Images/4d659eff3c1811e756dcfb8903d93c3b.png)

哇！？

如果您可以将我链接到一些详细说明此信息的 iOS 开发人员文档，则可以加分 - 我已经搜索过并且找不到任何内容。

**编辑：**

*   可能相关：[1 小时高清视频的 H.264 文件大小](https://stackoverflow.com/questions/701991/h-264-file-size-for-1-hr-of-hd-video)
*   [这篇维基百科文章](http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC)提到 3.1 级 H.264 视频 (1280x720 @ 30fps) 的最大比特率是 14000 - 17500kbps。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:06:17.120

1.  是的，720p 代表 1280x720。我认为这是正确的。

2.  要定义视频文件的大小，您应该以恒定比特率 (CBR) 录制，但我怀疑相机会使用 CBR，而 VBR（可变比特率）更有效。
    Mbps 代表每秒兆位。
    我怀疑该速率是否与我之前所说的可以使用 VBR 相同。

**编辑：**
从图表来看，它绝对是一个 VBR。

# ruby-on-rails - memcached (Dalli) 和 caches_action 的过期时间

> ID：12946219
> 
> 赞同：1
> 
> 时间：2012-10-18T02:30:28.773
> 
> 标签：ruby-on-rails, memcached, dalli

我正在为我的 rails 应用程序使用 Memcached 和 Dalli 商店。

有没有办法设置类似`expires_in`和`gzip`for 的东西`caches_action`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:49:28.837

`caches_action`只需将它们作为缓存参数添加到调用行；所有不特定的参数都`caches_action`将传递给实际的 memcache`fetch`调用。

```
caches_action :show, :unless => proc {current_user},
  :cache_path => proc {"post_#{params[:id]}"},
  :expires_in => 10.seconds,
  :race_condition_ttl => 2.seconds 
```

我使用 Dalli 和 Rails 3.1.3，此代码按预期工作。我想，gzipping也可以。

# mysql - MySQL按Hashtable上的条件搜索

> ID：12946221
> 
> 赞同：0
> 
> 时间：2012-10-18T02:30:45.320
> 
> 标签：mysql, select, hashtable

我有一个哈希表，格式如下：

```
key | value | updated_date 
```

我要查询的是：

```
if the updated_date of a key_a is greater than the updated_date of key_b, then select the data relevant to both of them 
```

本质上，如果应用程序的一部分已更新，我需要提醒此更新的其他部分。

我猜它需要在一个查询中进行多项选择，但不确定如何进行，因为它们都有相同的列名，所以必须使用“AS”语法选择每个。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:16:41.257

对于任何最终遇到类似问题的人，答案是：

```
SELECT * FROM `log_action` WHERE `module_identifier` = 'module_1' AND `action_identifier` = 'action_1'
AND `date_created` > (SELECT `date_created` FROM `log_action` WHERE `module_identifier` = 'module_1' AND `action_identifier` = 'action_2' ORDER BY `date_created` DESC) 
```

# python - python 3.2导入问题

> ID：12946224
> 
> 赞同：1
> 
> 时间：2012-10-18T02:31:04.140
> 
> 标签：python, import, module, python-3.x

过去几天我一直在尝试安装分发进行故障排除，以便我可以开始导入 3rd 方模块。我已经有几年没有使用 python 了，所以我重新记住了所有非常困难的事情。

我按照给定目录的错误，但不知道下一步该做什么。

我正在运行 Eclipse 中运行 python 3.2 的 mac 版本 10.8.2。

这是代码：

```
Traceback (most recent call last):
  File "/Volumes/James Hard Drive/Python/Python_Lessons/3rd_Party_Stuff/easy_install.py", line 5, in <module>
    from setuptools.command.easy_install import main
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/distribute-0.6.28-py3.2.egg/setuptools/__init__.py", line 2, in <module>
    from setuptools.extension import Extension, Library
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/distribute-0.6.28-py3.2.egg/setuptools/extension.py", line 5, in <module>
    from setuptools.dist import _get_unpatched
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/distribute-0.6.28-py3.2.egg/setuptools/dist.py", line 6, in <module>
    from setuptools.command.install import install
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/distribute-0.6.28-py3.2.egg/setuptools/command/__init__.py", line 8, in <module>
    from setuptools.command import install_scripts
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/distribute-0.6.28-py3.2.egg/setuptools/command/install_scripts.py", line 3, in <module>
    from pkg_resources import Distribution, PathMetadata, ensure_directory
  File "/Volumes/James Hard Drive/Python/Python_Lessons/3rd_Party_Stuff/pkg_resources.py", line 45
    def _bypass_ensure_directory(name, mode=0777):
                                               ^
SyntaxError: invalid token 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T03:15:49.097

要安装分发（和 pip、virtualenv）：

```
#!/bin/bash
# download latest virtualenv.py
wget https://raw.github.com/pypa/virtualenv/master/virtualenv.py

# create a bootstrap virtual environment in ./venv directory
python3 virtualenv.py venv 
```

要激活 virtualenv：

```
$ . ./venv/bin/activate 
```

现在您可以使用`pip`,`easy_install`来安装其他软件包或使用`virtualenv-3.x`来创建新的 virtualenvs。

如果你使用很多 virtualenvs（不同的项目，不同的 python 版本）；您可以使用`pip install`[virtualenvwrapper](http://virtualenvwrapper.readthedocs.org/en/latest/)轻松管理它们，例如`workon/mkvirtualenv/rmvirtualenv`命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T02:34:04.680

问题在于 Python 3 对八进制数的解释与 Python 2.x 不同。在 2.x 中，你可以在一个数字前加上 a`0`来表示它是八进制的。在 Python 3 中，您需要为其添加前缀`0o`，因此您的号码必须是`0o777`.

```
def _bypass_ensure_directory(name, mode=0o777): 
```

有关更多详细信息，请参阅[http://docs.python.org/release/3.0.1/whatsnew/3.0.html#integers](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#integers)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T09:40:14.217

文件 dist 可能不是最新版本。注意：[https](https://pypi.python.org/pypi/distribute#uninstallation-instructions) ://pypi.python.org/pypi/distribute#uninstallation-instructions ；并在 Python(version xxx)\scripts 中用更高版本替换您的文件夹。它在我的情况下引发了这个问题，没有之前描述的文件上的所有解析错误。擦除以前安装的版本以完成。

# php - PHP 从数据库中选择

> ID：12946231
> 
> 赞同：-4
> 
> 时间：2012-10-18T02:31:36.350
> 
> 标签：php, database, arrays, select

我无法从数据库中的一个表中选择数据。

我试图在点击用户名时显示用户的个人资料。

```
<?php
    $view = mysql_fetch_array(mysql_query("select * from users where id=$view"));
    if (empty ($view[id])) {
    print "No such user.";
    exit;
    }
    print "<center><b><u>$view[user]</b></u> ($view[id])</center><br>";
    print "Rank: $view[rank]<br>";
?> 
```

他们将点击的链接是：

```
viewpage.php?page_id=4&view=.... 
```

我不能让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:45:14.347

```
 <?php
   $id=$_GET["view"];
   $query = mysql_query("SELECT * FROM users WHERE id=$id");
   if($query)
   {
      echo '<table>';
      echo '<tr><th>Name</th><th>ID</th><th>Something Else</th></tr>';
      while($view = mysql_fetch_assoc($query))
      {
         echo '<tr>';
         echo '<td>'.$view['Name'].'</td>';
         echo '<td>'.$view['id'].'</td>';
         echo '<td>'.$view['some other variable in your data'].'</td>';
         echo '</tr>'; //This one goes after you've echoed all the data for one user.
      }
      echo '</table>';
   } else {
      echo 'no user found';
   }

 ?> 
```

# php - 'Modules/Application' 和 'Modules/Application/src/Application' 中的 zf2 应用程序文件夹重复

> ID：12946234
> 
> 赞同：1
> 
> 时间：2012-10-18T02:32:10.653
> 
> 标签：php, zend-framework2

为什么在 Modules/ 和 Modules/Application/src 中有 zf2 Application 文件夹？我的意思是......为什么不是结构模块/应用程序/src/控制器等......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:36:42.993

您可以找到新 zf2 结构的详细信息[http://akrabat.com/zend-framework-2/modules-in-zf2/](http://akrabat.com/zend-framework-2/modules-in-zf2/)

> 由于我们使用的是 PHP 5.3，我们希望 src 文件夹中的类将被命名空间。默认情况下，模块的主名称假定为其主命名空间，在本例中为 Simple。为了使自动加载更简单并遵循 PSR-0 约定，我们在 src 中创建 Simple 命名空间文件夹。这意味着 SimpleController 类的命名空间是文件 src/Simple/Controller/SimpleController.php 中的 Simple\Controller。
> 
> 这显然是更简单的模块之一，并且 src/Simple 文件夹可能还有其他文件夹，例如 Model、Form 等。此外，视图文件夹可能会有更多用于其他控制器的子文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:36:34.663

Modules are intended to be single-purpose, reusable containers of code. As such, they will contain everything they need to accomplish that task -- which may (or may not!) include controllers, models, public assets, configuration, view templates, and more.

In order to keep the various pieces semantically grouped, each has its own subfolder in the module. Source PHP code goes in "src", and the code in that directory should follow [PSR-0 naming conventions](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md) - and thus you'll see the module namespace repeated there. Configuration goes in "config", view templates in "view", public assets in "public", and so on.

That said, you're free to organize your modules however you want, so long as its Module class is discoverable, and it can indicate how to autoload classes and provide configuration to the MVC. The structure you see in the ZendSkeletonApplication and ZendSkeletonModule, however, is recommended as it's the result of a lot of brainstorming within the community, and provides clean semantics for each type of file provided.

# ios - NSPredicate 解析

> ID：12946239
> 
> 赞同：0
> 
> 时间：2012-10-18T02:32:54.510
> 
> 标签：ios, json, core-data, nspredicate

我有一个简单的谓词让我发疯。

```
NSString *name;
NSDate *myDate;

-(void)fetch:(NSString *)name Date:(NSDate *)myDate
{
  ...
  //predicate
  NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name = %@ AND myDate = %@",name,myDate];
  [req setPredicate:predicate];
}

-(void)fetch2:(NSString *)predicateStr
{
   ...
  //predicate
  NSPredicate *predicate = [NSPredicate predicateWithFormat:predicateStr];
  [req setPredicate:predicate];
}

////// call #1/////
[self fetch:name Date:myDate]; //WORKS

////// call #2/////
NSString *predicateStr = [NSString stringWithFormat:@"name = %@ AND myDate = %@",name,myDate];
[self fetch2:predicateStr]; 
```

//Call#2 不起作用 - 无法解析 Date ?? 他们不是一模一样吗？参数相同，值没有变化。请注意，Date 参数是问题所在，NSString 参数可以在没有 Date 的情况下正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:06:30.933

不，它们不一样。

对于呼叫 #1，这是您传递给的内容`+predicateWithFormat:`：

```
@"name = %@ AND myDate = %@" 
```

对于呼叫 #2，这是您传递给的内容`+predicateWithFormat:`：

```
@"name = Some Name AND myDate = 2012-10-17 8:05:42 PM -0800" 
```

第一个是有效的[谓词格式字符串](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)，因此它可以工作。第二个不是有效的谓词格式字符串，因此它失败了。

# java - 如何使用 JProfiler 远程分析 Web 应用程序？

> ID：12946240
> 
> 赞同：13
> 
> 时间：2012-10-18T02:33:22.917
> 
> 标签：java, jprofiler

我正在运行一个部署在远程机器服务器上的 Web 应用程序，并且我拥有该应用程序的 IP 地址和 URL。当我用浏览器点击 URL 时，应用程序就会显示出来。

我现在必须分析该 Web 应用程序，因为我需要找出它运行如此缓慢的原因。

我尝试使用JProfiler，没有成功。有人可以建议如何配置 JProfiler 进行远程分析吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T07:59:01.690

在没有 GUI 的系统上分析远程 JVM 的最简单方法是：

*   在远程机器上的某处提取 JProfiler 存档（不是安装程序）
*   在安装目录中调用 bin/jpenable 并选择要配置的 JVM
*   在您的本地机器上启动 JProfiler 并创建一个类型为“附加到已分析的 JVM（本地或远程）”的新会话
*   在会话配置中，输入 jpenable 给出的主机名和端口
*   启动会话和配置文件

提示：要找到瓶颈，请使用采样而不是检测。

* * *

**JProfiler 10.0+ 的更新**

从 JProfiler 10.0 开始，有一个远程附加功能不需要上述任何步骤，您只需要远程计算机的 SSH 凭据即可。

[![在此处输入图像描述](../Images/fa388597f464b9e31f0f812628e0c7c1.png)](https://i.stack.imgur.com/mEsk4.png)

SSH 连接由 JProfiler 直接建立，您不必自己设置 SSH 隧道。也可以配置多跳隧道。

JProfiler 将自动下载所需的代理程序包，将其上传到远程计算机并使用其命令行工具收集您在附加对话框中看到的信息。代理程序包被缓存，因此只执行一次。

[![在此处输入图像描述](../Images/bdb5b6f4a5317519d3977392ab696510.png)](https://i.stack.imgur.com/xq4Vn.png)

因为您必须以启动您要分析的 JVM 的同一用户身份进行身份验证，所以可以切换用户以进行远程连接。例如，您可以对 root 用户执行 sudo 以附加到以 root 身份启动的服务。

[![在此处输入图像描述](../Images/f815f3b28d0ca4dd216f98e323d4e10a.png)](https://i.stack.imgur.com/EXSfU.png)

所选用户启动的所有 JVM 都会显示出来，您可以启动完整的分析会话，也可以只获取低开销的 HPROF 堆转储并在 JProfiler 中打开它。

[![在此处输入图像描述](../Images/c339bb13a75a4b3d90e033cfda1c5d66.png)](https://i.stack.imgur.com/8F3SE.png)

# python - TypeError:enqueuqe 接受 1 个位置参数，但传递了 2 个

> ID：12946241
> 
> 赞同：2
> 
> 时间：2012-10-18T02:33:22.780
> 
> 标签：python, python-3.x

只传递了一个参数。我仍然收到 2 个参数已通过的错误。`head`并且`tail`没有被初始化为-1。

```
class Queue_demo:
    head=-1
    tail=-1
    a=[]

    def enqueue(data=10):
        if(head==-1 and tail==-1):
            head=head+1
            tail=tail+1
            a.append(data)
        else:
            tail=tail+1
            a.append(data)

    def dequeue():
        y=a[head]
        if(head==tail):
            head,tail=-1,-1
        else:
            head=head+1
        return y

q1=Queue_demo()
q2=Queue_demo()
q1.enqueue(12)

while(q1.tail==-1):
    print(q1.dequeue()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T03:36:05.773

您的代码存在一些问题。

直接导致你的错误的是你没有给你的方法一个`self`参数。当您调用`q1.enqueue(12)`Python 时，它会将其转换为`Queue_demo.enqueue(q1, 12)`. 正在调用该方法的对象作为第一个参数传递给该方法。按照惯例，它通常被命名为`self`.

这导致我遇到第二个问题，一旦您通过错误数量的参数错误。您的实例都将共享同一组数据成员，因为它们当前正在访问类变量和`head`，而不是实例变量。这将非常令人困惑，因为将一个项目添加到一个队列会使其也出现在所有其他队列中。`tail``a`

为了解决这个问题，您要做的是在构造函数中创建这些变量（它只是一个名为 的方法`__init__`），而不是在类定义中定义它们。您的`__init__`方法可能如下所示：

```
def __init__(self):
    self.head = -1
    self.tail = -1
    self.a = [] 
```

请记住，Python 通常与其他编程语言不同！您不需要声明您的成员变量，只需开始将事物作为值分配`self`，您就可以完成所有设置。

# android - 任何人都知道文件values-sw580？

> ID：12946243
> 
> 赞同：1
> 
> 时间：2012-10-18T02:33:43.933
> 
> 标签：android, file

我在我的 Android 联系代码中找到了一个名为的奇怪文件`values-sw580`。我不知道这是为了什么以及为什么它会这样调用。有人知道吗？:) 请告诉我。thanx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:45:31.573

Android 3.2 中引入了新的尺寸限定符。查看[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html#NewQualifiers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:47:48.947

swXXX 限定符声明目录中的资源设计用于的最小屏幕宽度（以 dips 为单位）。

所以 values-sw580 为至少 580 dips 宽的设备定义资源。

# ruby - 检查具有特定扩展名的文件的目录

> ID：12946244
> 
> 赞同：2
> 
> 时间：2012-10-18T02:33:56.630
> 
> 标签：ruby, file, directory, file-extension

我正在尝试检查通过命令行输入的目录是否包含具有特定文件扩展名的文件。例如，如果我有一个文件夹“Folder1”，其中有另一个文件夹“Folder 2”，Folder2 包含多个文件，“test.asm”、“test.vm”、“test.tst”。我通过这样的命令行获取目录或文件

```
ruby translator.rb Folder1/Folder2 
```

或者

```
ruby translator.rb Folder1/Folder2/test.vm 
```

我想做的是错误检查。我已经检查了输入是否是一个文件夹，现在我需要检查该文件夹是否实际上包含一个 .vm 文件。到目前为止我所做的是：

```
require 'pathname'

pn = Pathname.new(ARGV[0])

if ARGV.size != 1
    puts "Proper usage is: ruby vmtranslator.rb file_directory\file.vm \nOR \nruby vmtranslator.rb file_directory\ where file_directory has multiple vm files test".split("\n")
elsif !pn.exist? && !pn.directory?
    puts "Something is wrong with the file"
    puts "Either try another file or check the file extension"
elsif pn.directory? && pn.children(false).extname.include?('.vm')
    puts "this should print if Folder1 is the folder, but not if Folder2 is.."
    vm_file1 = File.open("OPEN FILES WITH .vm AS EXTENSION)
elsif pn.exist? || pn.file?
    puts "this is right"
    vm_file = File.open(ARGV[0], "r")
    asm_file = File.new(ARGV[0].sub('.vm', '.asm'), "w")
end 
```

所以应该做的是首先检查是否只有1个参数，如果是，那么它检查它是文件还是目录，否则它会输出错误，然后我正在做的是检查它是否是一个目录。如果是这样，我需要检查该目录是否实际包含 .vm 文件。我试过`pn.each_child {|f| f.extname == '.vm'}`了，但它只在返回 true 之前检查第一个值。除了设置一些布尔值之外，还有什么更简单的方法可以在返回 true 之前检查整个数组？

上面的一些代码没有完成，我只是问是否有任何方法可以检查目录中是否有某个扩展名的文件。到目前为止，我的搜索找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T03:36:08.387

```
str = ARGV[0]

proc = ->(f) { puts "doing something with #{f.path}" }

if Dir.exists?(str)
  Dir.glob(File.join(str, File.join('**', '*.vm'))).each do |entry|
    proc[File.open(entry)]
  end
elsif File.exists?(str) && File.extname(str) == '.vm'
  proc[File.open(str)]
else
  puts "couldn't do anything with #{str}"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:13:20.260

```
require 'pathname'

def directory_has_vm_files?(path)
  Dir.glob(path.join('*.vm')).size > 0
end

unless ARGV[0]
  puts %{
    Proper usage is:

    ruby vmtranslator.rb file_directory or file.vm

    OR

    ruby vmtranslator.rb file_directory
    where file_directory has multiple vm files
  }
else
  path = Pathname.new(ARGV[0])

  if path.exist?
    if path.file?
      if File.extname(path) == '.vm'
        puts "Valid VM file"
      else
        puts "Not a VM file"
      end
    else
      if directory_has_vm_files?(path)
        puts "Valid Directory - contains vm files"
      else
        puts "#{path} does not contain any VM file"
      end
    end
  else
    puts "Invalid path"
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T02:36:53.483

```
Dir["Folder1/Folder2/*.vm"].empty? 
```

`false`如果 . 中有任何`.vm`文件，将返回`Folder1/Folder2`。

# .net - 在 IDictionary 的上下文中 CopyTo 的预期行为是什么？

> ID：12946249
> 
> 赞同：1
> 
> 时间：2012-10-18T02:34:29.780
> 
> 标签：.net, collections, interface, dictionary

我在看界面`IDictionary<T, U>`。我在必须实现的方法列表中注意到的一件奇怪的事情是`CopyTo`描述：

> 将 ICollection 的元素复制到一个数组，从一个特定的数组索引开始。

在字典的上下文中，这甚至意味着什么？这是否意味着将值复制到数组或键或 KeyValuePairs 或什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:59:01.280

由于`IDictionary<TKey, TValue>`实现`ICollection<KeyValuePair<TKey, TValue>` 和`CopyTo`方法的类型是`ICollection<T>`接口的通用参数，它将返回一个`KeyValuePair<TKey, TValue>`对象数组。

# emacs - Emacs CEDET：头文件中未解析的路径，但在 .cpp 文件中已解析

> ID：12946250
> 
> 赞同：2
> 
> 时间：2012-10-18T02:34:44.273
> 
> 标签：emacs, cedet

`ede-cpp-roo-project`我已经按照[Alex 的 CEDET 指南和 CEDET](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)随附的文档设置了包含路径。许多路径都被正确解析。但是，我注意到某些系统标头在文件中未解析，`.h`即使**它们已**在`.cpp`文件中解析。

我在 Bazaar 和 Emacs 24.2.1 上使用最新版本的 CEDET。我已经定义了以下项目：

```
(ede-cpp-root-project "One"
                :name "One Project"
                :file "/path/to/file/in/the/project"
                :include-path '("/")
                :system-include-path '("path/1/"
                       "/path/2"                       
                       "/path/3"
                       )
                :spp-table '(("isUnix" . "")
                             ("BOOST_TEST_DYN_LINK" . ""))) 
```

在我的一个`.cpp`文件中，标题：

```
#include <iostream>
#include <fstream>
#include <string>
#include <queue> 
```

已解决，但未在关联`.h`文件中解决。我已经尝试`.h`多次重新解析文件（ `C-c , ,` ），重新启动 Emacs 等，但没有结果。

万一这很重要，我注意到我的`.cpp`文件是在`c++-mode`文件`.h`加载时打开的`c-mode`。但是，如果我尝试更改任何这些文件的模式，则所有包含都将无法解析（并且重新解析 `C-c , ,` 无济于事）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:12:06.447

在 Bazaar中将 CEDET 升级到[最新版本](http://cedet.sourceforge.net/bzr-repo.shtml)修复了它。

请参阅另一个线程：[最新的 CEDET 版本无法加载语义包](https://stackoverflow.com/questions/12946084/latest-cedet-version-cant-load-semantic-packages)以获取有关如何使用新版本设置 CEDET 的信息（特别是[Alex Ott 在 GitHub 上](https://github.com/alexott/emacs-configs/blob/master/rc/emacs-rc-cedet.el)的 CEDET 配置文件）。

# jquery - jQuery 事件未触发

> ID：12946255
> 
> 赞同：0
> 
> 时间：2012-10-18T02:35:23.010
> 
> 标签：jquery

我遇到了分配给按钮标签的点击事件在点击时没有触发的问题。有几个按钮具有相同的类属性，但这不应该影响 JS，因为类选择器会影响所有匹配的元素。

整个 html 部分在页面加载时隐藏，并在单击特定链接时正确显示，但单击提交按钮时不会触发任何事件。如果你在附近，有人会好心并链接 jquery、bootstrap.css 和 bootstrap.js 的 url，这样我就可以尝试在 jsfiddle 中创建所需的效果。非常感谢

HTML：

```
<span class="reply-comment" id="<?php echo $imagecomments[1][$i]['commentid']; ?>">
<div class="row-fluid">
    <div class="span11 offset1">
        <textarea class="<?php echo $imagecomments[1][$i]['commentid']; ?>" id="reply-textarea"></textarea><br>
        <button class="btn btn-mini submit-reply-button" data-commentid="<?php echo $imagecomments[1][$i]['commentid']; ?>"><strong>Submit</strong></button>
    </div>
</div> 
```

JS：

```
$('.reply-comment').hide();
$('.submit-reply-button').click(function(e){
    e.preventDefault();
    var commentid = $(this).data('commentid');
    var reply = $(textarea.commentid).val();
    var filename = $('.mainimage').data('filename');
    var imgowner = $('.mainimage').data('imgowner');
    $.ajax({
        type: 'POST',
        url: '?category=addimgcomment',
        data: {
            "commentid" : commentid,
            "imgcomment" : reply,
            "filename" : filename,
            "imgowner" : imgowner
        },
        success: function(data){
            $(textarea.commentid).val("");
            $('.'+commentid+'subcomments').html(data);
        }
    });
return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:42:35.153

你觉得`$(textarea.commentid)`在做什么？

看看控制台，我敢打赌有一个错误。它正在寻找一个名为 textarea 且属性为 commentid 的变量。那不是你所追求的。

您想要的是构建选择器字符串

```
$("textarea." + commentid).val() 
```

# oauth - MVC4 Web API 的身份验证

> ID：12946256
> 
> 赞同：4
> 
> 时间：2012-10-18T02:35:32.230
> 
> 标签：oauth, asp.net-web-api, oauth-2.0

我正在尝试保护我的 MVC4 Web Api。实际上，我真的需要一个具有一些安全性的身份提供者。我的服务类似于 twitter，从安全的角度来看，没有很多私人数据，但服务确实需要知道调用者的用户 ID。

同样重要的是要知道 Web 服务现在只能由移动设备使用，尽管网站可能会在未来某个时候伴随它。

所以和互联网把我带到了 Thinktecture.IdentityModel，但是看起来很复杂，我可以找到零文档或样本。在基于声明的身份验证方面，我还没有愉快的经历。我没有声明服务器、令牌提供程序或类似的东西，您似乎需要它才能使用此方法。对于我的情况来说，这一切似乎都太沉重了。

我还阅读了有关实施自己的 HMAC 解决方案 (https://github.com/cuongle/WebAPI.Hmac) 或使用 OAuth (https://github.com/maksymilian-majer/DevDefined.OAuth) 的人，但这些也是看起来有点复杂（我读过没有帮助类的 OAuth 足以让最好的开发人员哭泣，而我不是最好的）。Janrain 看起来可能会起作用，但看起来您每年必须为超过 2,500 个经过身份验证的用户付费......

为 Web Api 实现简单身份提供者和安全性的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:53:52.167

[在使用 DotNetOpenAuth 创建 OAuth 2.0 服务提供者](https://stackoverflow.com/questions/11438517/create-an-oauth-2-0-service-provider-using-dotnetopenauth/11644882#11644882)之前，我曾尝试回答类似的问题，其中我突出显示了 Thinkecture Identity **Server**。[安装说明](http://wiki.thinktecture.com/IdentityServer.Installation-and-Prerequisites.ashx)不太难（恕我直言）安装视频在这里[，](http://vimeo.com/51088126)应该有很大帮助。

我也用这个更新了我的旧答案，但这里还有一个相当轻量级的 O-Auth 2.0 实现示例 这里的示例[代码](http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx) [http://code.google.com/p/codesmith/downloads/detail?name=OAuth2.zip&can= 2&q=#makechanges](http://code.google.com/p/codesmith/downloads/detail?name=OAuth2.zip&can=2&q=#makechanges)

您是否也在这里阅读过这个清晰的问题[Authenticating requests from mobile (iPhone) app to ASP.Net Web API (Feedback requested on my design)](https://stackoverflow.com/questions/11889556/authenticating-requests-from-mobile-iphone-app-to-asp-net-web-api-feedback-re)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T19:37:07.400

针对查找示例代码作为文档的问题，考虑 Thinktecture github repo 中的 samples 文件夹：[https ://github.com/thinktecture/Thinktecture.IdentityModel.45/tree/master/Samples](https://github.com/thinktecture/Thinktecture.IdentityModel.45/tree/master/Samples)

（为什么你需要更多的声誉来评论 SO 而不是回答？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T03:43:32.363

好吧，安全性很难:)

至于 Thinktecture.IdentityModel——这是一个令牌处理库（除其他外），您将在 WebAPI 应用程序中使用它。您将使用它，因此您不需要执行逻辑来接受令牌（基本身份验证、SAML、SWT、JWT）。索赔只是副作用。

如果您正在寻找身份提供者，那么姊妹开源项目 Thinktecture.IdentityServer 是版本 2 的测试版。它是支持自定义数据库和颁发令牌的身份提供者。项目网址为：

[http://thinktecture.github.com/Thinktecture.IdentityServer.v2/](http://thinktecture.github.com/Thinktecture.IdentityServer.v2/)

# sql - T-SQL - 未定义脚本变量

> ID：12946257
> 
> 赞同：4
> 
> 时间：2012-10-18T02:35:36.230
> 
> 标签：sql, sql-server, tsql

我是新手`T-SQL`，我正在尝试备份我的数据库（使用 SQL Server 2008）。

当我尝试通过运行脚本时`sqlcmd -i inputfile`收到以下错误消息： `'DATE' Scripting variable not defined`.

问题是我有这样一行： ... `TO DISK = "FileName_$(ESCAPE_NONE(DATE)).BAK"`...文件名中有日期，它将阻止它替换我的旧备份。

如果我在管理工作室中运行它，它可以工作，但如果我在命令行中使用`sqlcmd -i`命令运行它，那么它就不起作用。

**编辑：**

我查看了工作历史记录，并看到了以下错误消息：

> > “对于 SQL Server 2005 SP1 或更高版本，您必须使用适当的 ESCAPE_xxx 宏来更新包含令牌的作业步骤，然后才能运行作业”

我不太明白那是什么意思。我已经用过`$ESCAPE_NONE(DATE)`了，怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-24T11:27:29.577

我知道的老问题，但这是第一个结果之一，如果其他人有同样的问题，答案并不是特别容易找到。

包括 -x 开关来禁用环境变量为我解决了这个问题；

```
sqlcmd -x -i inputfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:04:07.640

如果您尝试备份您的 sql server 数据库并使用 sqlcmd 将日期附加到它们，那么您可以尝试一个简单的方法。

首先，创建名为 sp_BackupDabases 的 sp，您可以在此处找到它：http: [//support.microsoft.com/kb/2019698](http://support.microsoft.com/kb/2019698)

您可以使用以下命令从 sql cmd 调用它：

```
sqlcmd -U Damieh -P ilovechocolate -S (local) -Q "EXEC sp_BackupDatabases  @backupLocation ='C:\MyBackups\', @BackupType='F'" 
```

我确定您已经知道这一点，但以防万一：-U 是用户，-P 是密码，-S 是服务器，-Q 是查询。您可以备份所有数据库或其中一些数据库，有一些参数。您可以在我给您的同一链接上找到存储的 proc 参数详细信息。

**日期将自动附加**，如果您希望使用不同的位置/方式/格式，您可以使用 sp 的代码。我经常在没有非 express sqlserver 的服务器上使用它（这意味着我无法在不使用 .bat 和任务调度程序的情况下安排备份）并取得了巨大的成功。

如果这不是您正在寻找的答案，我深表歉意 =)。祝你今天过得愉快！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-18T15:21:48.120

我知道我在这个线程上迟到了，但你可以使用以下内容：

```
SQLCMD -S YourServer -E -d YourDatabase -i YourScript 2> nul 
```

这会将 StdErrorOut 发送到位桶。

# syntax - fortran，如何使用模块或接口制作程序的多个副本？

> ID：12946259
> 
> 赞同：1
> 
> 时间：2012-10-18T02:35:52.587
> 
> 标签：syntax, fortran, fortran77

我想使用**`CGAUSS`**中的 FORTRAN 程序进行双重积分`cernlib`。我必须制作两份副本*`CGAUSS1`，`CGAUSS2`*以避免`CGAUSS`自己调用。

但是我没有找到原始`CGAUSS`代码。有没有办法使用 FORTRAN 中的模块或接口进行复制？

# android - 什么类型的布局和用户界面最适合一个 *n 益智游戏 android？

> ID：12946262
> 
> 赞同：0
> 
> 时间：2012-10-18T02:36:06.010
> 
> 标签：android, android-layout

**1)**我正在为一个涉及`n*n matrix`向用户显示的谜题开发一个 android 应用程序。每个单元格中都会有对象（图像）。每当用户单击任何单元格时，该单元格的对象应与附近的一个有效单元格交换位置。
**2）**当物体交换位置时，​​应该向用户展示移动 - 图像从原来的位置缓慢移动到另一个位置。

如果上面的动画很难实现，请离开。但我想知道答案`question 1)`。哪种布局最适合这样的难题，这将涉及子元素（单元格）的不断重新定位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:42:38.433

如果它是游戏 - SurfaceView 是你的方式。这是个好主意，因为您可以从不同的线程中绘制并且很舒服。如果您想创建不简单的游戏，请使用引擎作为示例 AndEngine。所以你可以使用 GLSurfaceView - openGL 非常快但并不简单。最后一种方式使用简单视图，但我认为它可以是 XO、大麦破碎和其他不快速简单的游戏。

更新：

如果我按照你的情况创建这个游戏，我将使用 SurfaceView 没有任何布局。但我认为你可以在没有表面的标准视图的帮助下做到这一点。如果您对布局有疑问，我认为这无关紧要。例如网格布局。至少听起来合乎逻辑。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:54:17.607

如果您使用 View 或[SurfaceView创建自定义](https://developer.android.com/reference/android/view/SurfaceView.html)[视图](https://developer.android.com/reference/android/view/View.html)，您将拥有更大的控制权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T03:36:46.373

我正在开发一个类似的 n*n 矩阵游戏，并且正在使用[AndEngine](http://www.andengine.org/)游戏引擎。它允许我加载图像，然后将它们放置在 n*n 网格中。

# php - PHP zip 不起作用

> ID：12946263
> 
> 赞同：0
> 
> 时间：2012-10-18T02:36:07.210
> 
> 标签：php, drupal

我做了一个drupal模块，模块的功能之一是将一些文件压缩成一个zip包。它在我的本地环境（xampp）中运行良好，但在服务器上失败。我的服务器确实启用了 php zip 扩展，因为我可以在 php info 上看到 zip 信息，也可以使用 php 解压缩文件。

此外，我已经 chmod 文件为 0777 。

我的代码：

```
$folder = file_directory_path();

$zip = new ZipArchive();

if ($zip->open('b.zip', ZIPARCHIVE::CREATE) === TRUE) {

    foreach ( $files as $file ) {
        drupal_set_message(t($file)); // I can see the the message on this stpe
        $zip->addFile($file);
    }

    $zip->close();
    if (file_exists('b.zip')) {

        copy('b.zip', $folder . '/b.zip');
        unlink('b.zip');
        global $base_url;
        variable_set('zippath', $base_url . $folder . '/b.zip');
        drupal_set_message(t('new zip package has been created'));
    }
} else {
    drupal_set_message(t('new zip package failed'));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:57:40.547

是的..我知道你的意思..这是三种可能性

*   你有写权限
*   你没有使用完整路径
*   您将文件夹作为文件包含在内

你可以试试这个

```
error_reporting(E_ALL);
ini_set("display_errors", "On");

$fullPath = __DIR__ ; // <-------- Full Path to directory
$fileZip = __DIR__ . "/b.zip";  // <---  Full path to zip

if(!is_writable($fullPath))
{
    trigger_error("You can't Write here");
}

$files = scandir($fullPath); // <--- Just to emulate your files
touch($fileZip); // <----------------- Try Creating the file temopary 

$zip = new ZipArchive();
if ($zip->open($fileZip, ZIPARCHIVE::CREATE) === TRUE) {

    foreach ( $files as $file ) {
        if ($file == "." || $file == "..")
            continue;
        $fileFull = $fullPath . "/$file";
        if (is_file($fileFull)) { // <-------------- Make Sure its a file
            $zip->addFile($fileFull, $file);
        }

        // Play your ball
    }
    $zip->close();
} else {
    echo "Failed";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:55:48.830

我建议你使用 rar 或 zip 命令来制作 zip。我正在使用 linux 并在我的 php 系统中作为

```
$folder = 'your_folder';  // folder contains files to be archived
$zipFileName  = 'Your_file_name'; // zip file name
$command = 'rar a -r ' . $zipFileName . ' ' . $folder . '/';
exec($command); 
```

它非常快。但是你需要在你的系统中安装 rar 包。

谢谢

# proxy - 通过环回适配器和 SSH 代理应用程序

> ID：12946264
> 
> 赞同：1
> 
> 时间：2012-10-18T02:36:14.010
> 
> 标签：proxy, socks

这是部分编程，部分系统管理员，所以如果你觉得这应该在服务器故障上结束，请原谅。

我有一个*不*支持 SOCKS 的应用程序，我们需要通过防火墙使用它。我们也不能修改应用程序以支持 SOCKS。

目前，我们通过将应用程序与主机上的环回适配器对话的 IP 设置别名来实现此目的，然后创建通向另一台主机的 SSH 隧道。应用程序使用的 IP 是硬编码的。我们的 SSH 连接如下所示：

ssh -L 1.2.3.4:9999:1.2.3.4:9999 user@somehost

其中 1.2.3.x 是环回上的别名。

因此，应用程序连接到环回上的开放端口，该端口被发送到 SSH 主机并发送到真正的 1.2.3.4。

它可以工作，但问题是这个应用程序连接到相当多的 IP（50+），所以我们最终得到了 50 个 ssh 连接。

我们尝试使用几个“代理”应用程序，例如 tsocks 和其他应用程序，但遇到了很多问题（该应用程序在 OS X 上运行，并且 tsocks 不能很好地工作，即使有补丁）

我们的想法是编写一个监听指定端口上所有接口的守护进程——然后它会从应用程序中获取传入的数据包，抓取数据包信息（dst IP、端口、有效负载），重新创建数据包并通过单个代理它SSH SOCKS 连接（ ssh -D 1080 user@somehost ）。这样，我们只有 1 个 SSH 连接，所有端口都被代理通过。

我的问题是——这可行吗？有什么我在这里想念的吗？我一直在梳理 pfctl、ipfw、iptables 文档，但我没有看到任何选项可以通过这些文档来完成，而且这似乎不是最难编码的事情。它将根据原始目标 IP 和端口重新创建数据包，连接到本地 SOCKs 代理并重新发送数据包，就好像它是原始应用程序一样，但现在支持 SOCKS。

如果我错过了有人知道的已经这样做的东西，请告诉我。我不太了解套接字编程或 SOCK，但这似乎不是一个太大的项目来解决，但如果我咬得比我应该的更多，我想听一些意见。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:04:27.607

如果您的应用程序可以添加 SOCKS 客户端支持，您可以简单地`ssh -D lock_socks_port remote_machine`打开本地 *lock_socks_port* 作为 localhost 的 SOCKS 服务器，然后可以连接到远程机器可访问的任何主机。

示例：假设您正在使用未加密的不受信任的 wifi 网络。您可以简单地启动`ssh -D 1082 home`，然后将您的网络浏览器配置为使用*localhost:1080*作为 SOCKS 服务器。当然，您需要一个支持 SOCKS 的客户端。所有流量都将显示为来自您的网关，并且对于那些窥探 wifi 的人来说，连接将是不透明的。

您还可以打开`ssh`具有无限数量`LocalForward`请求的单个客户端，这些请求将在单个 ssh 会话之上进行隧道传输。

`ControlMaster`此外，您可以使用 ssh 的和`ControlPath`选项将 ssh 连接添加到已建立的 ssh 连接。

# json - 使用 Web 服务 JAVA 和 Axis2 发送具有交叉引用的复杂对象

> ID：12946265
> 
> 赞同：1
> 
> 时间：2012-10-18T02:36:17.893
> 
> 标签：json, web-services, reference

大家好，这是我在 Stack Overflow 上的第一篇文章，我是一名学生，是 Java 的新开发者，我正在尝试解决一个问题。

我有一个对象结构，我正在尝试通过 Web 服务发送它以在 android 应用程序中使用。问题是因为这个结构有很多交叉引用。

现在我正在尝试使用 Axis2 返回一个对象，但这给了我一个错误，因为我使用了枚举。在此之前，我尝试以字符串形式发送 JSON，但在创建带有交叉引用的 JSON 时遇到问题。

在我的结构中，我有类、接口、继承、抽象类和泛型。

我花了很多时间试图解决它。但是当我解决一件事时，我遇到了一个新问题。

解决这个问题的最佳方法是什么？

# java - 在 Swing FileChooser 事件中检测批准按钮

> ID：12946266
> 
> 赞同：0
> 
> 时间：2012-10-18T02:36:36.240
> 
> 标签：java, swing, jbutton, jfilechooser

我知道还有另一种方法可以做到这一点，但我更愿意看看是否有人有这样做的答案。原来的方式是调用ShowDialog()函数后获取整数返回值；我想从事件（如下所示）本身中获取它。我已经在其中抛出了一些代码来检查是否选择了文件，但是我需要在它到达那里之前检查是否已经选择了批准按钮（确定按钮）。有谁知道如何使用如下设置检查 FileChooser 对话框中按下了哪个按钮？

这是我的代码：

```
private void FileChooser_OpenMouseClicked(java.awt.event.MouseEvent evt) {
        if(!FileChooser_Open.getSelectedFile().equals(null)) 
        {

        }
    } 
```

原始方法：

```
//In response to a button click:
int returnVal = fc.showOpenDialog(aComponent); 
```

不同的是，原来的方法在对话框关闭时会得到一个返回值，而在这个方法中，我不知道有什么方法可以得到这个返回值（我相信盒子已经关闭了，但是没有什么可做的）捕获返回值）。如果我看起来没有多大意义，我深表歉意。

**编辑：更多信息**

所以这就是我创建对话的方式（一个菜单项，“打开”引发一个事件，该事件调用 showOpenDialog() 方法。如您所见，它没有捕获返回值（请耐心等待）。是否可能然后获取返回值或设计一种方法来确定是否在 MouseClicked 事件中按下了 OK 按钮？我想我正在尝试专注于基于事件的编程风格，其中代码根据引发的事件做出反应, 并在 Open Menu 事件中检查 OK/approval 按钮单击似乎有点……从我的角度来看是杂乱无章的。也许我太习惯 C#/WinForm 解决这个问题的方法了？

```
private void MenuItem_OpenActionPerformed(java.awt.event.ActionEvent evt) {                                              
        FileChooser_Open.showOpenDialog(this);
    }  

private void FileChooser_OpenMouseClicked(java.awt.event.MouseEvent evt) {                                              
        if(!FileChooser_Open.getSelectedFile().equals(null)) 
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:34:00.667

如果我理解这个问题，您也许可以使用 JFileChooser#approveSelection() 方法：

*   [OTN 论坛：如何对 JFileChooser 触发的事件做出反应？](https://forums.oracle.com/forums/thread.jspa?messageID=5872486)
*   [java - 带有确认对话框的JFileChooser - 代码日志](https://stackoverflow.com/questions/3651494/jfilechooser-with-confirmation-dialog)

* * *

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import javax.swing.*;

public class ApproveSelectionDemo {
  public JComponent makeUI() {
    final JPanel p = new JPanel();
    final JFileChooser fileChooser = new JFileChooser() {
      @Override public void approveSelection() {
        if(!getSelectedFile().exists()) {
          int returnVal = JOptionPane.showConfirmDialog(
                  this, "message", "title", JOptionPane.YES_NO_OPTION);
          if(returnVal!=JOptionPane.YES_OPTION) {
            return;
          }
        }
        super.approveSelection();
      }
    };
    p.add(new JButton(new AbstractAction("Open") {
      @Override public void actionPerformed(ActionEvent e) {
        int retvalue = fileChooser.showOpenDialog(p);
        if(retvalue==JFileChooser.APPROVE_OPTION) {
          System.out.println(fileChooser.getSelectedFile());
        }
      }
    }));
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new ApproveSelectionDemo().makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
} 
```

# clojure - 在 Clojure 和 Clojurescript 之间共享一个原子？

> ID：12946276
> 
> 赞同：4
> 
> 时间：2012-10-18T02:37:40.060
> 
> 标签：clojure, clojurescript

假设我有一个名为 main 的 Clojurescript 命名空间，其中有一个名为 state 的原子。

```
(ns main)

(atom state nil) 
```

我编译我的 Clojurescript 应用程序，在服务器上运行它，启动 Clojurescript repl，然后使用浏览器连接到我的服务器。一切正常。

在 Clojurescript repl 中，我可以确认通常的

```
> (+ 1 1) 
2
> (js/alert "Hey there") //shows an alert dialog with "Hey there" in the browser
nil
> main.state
(atom nil) 
```

Clojurescript repl 非常适合开发。因此，显然我可以从 Clojure 应用程序中获取并（使用交换！或重置！）设置 Clojurescript 原子的值。我想知道是否有办法在我的 Clojurescript 项目中的原子值和正在运行的 Clojure 应用程序之间建立联系。或许 Clojurescript 客户端连接到指定端口并将结果发送到某个在该端口上等待的 Clojure 服务器。简单地说，我想知道是否有可能让正在运行的服务器应用程序共享`state`客户端原子的值。

为什么，你可能会问？好吧，我认为只要在运行的 Clojurescript 应用程序中进行修改，将原子的值写入`state`实际文件 (state.clj)会很好。`state`这样，我总能看到 的当前值`state`。我可以使用诸如 emacs 之类的东西`(global-auto-revert-mode t)`来确保 state.clj 缓冲区始终是最新的。这有点像拥有一个调试器。

除此之外，我真正的愿望是让运行中的 Clojure 应用程序也定期轮询 state.clj 本身。当服务器检测到我修改了 state.clj 时，它会接受修改作为 Clojurescript`state`原子的新值。然后它会做类似于 Clojurescript repl 所做的事情，如以下伪代码所示：

```
(send-to-client-for-evaluation
  (compile-into-js 
    (reset! 
      main.state 
      the-read-string-value-of-the-content-of-state.clj))) 
```

基本上，我希望服务器能够拥有类似于客户端和服务器之间共享原子的东西。我希望在`state`客户端和服务器之间双向共享的值。这有可能吗，还是我只是在做梦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:17:47.203

当然，只需向一个以[EDN 格式](https://github.com/edn-format/edn)发送数据的 REST API 发出请求，瞧！如果您想避免轮询，请考虑在 Nginx 实例后面运行 Jetty 或 Tomcat 以利用[Nginx HTTP Push Module](http://pushmodule.slact.net/)。[我在这里](https://github.com/rplevy/sayoperation)有一个有点蜘蛛网的例子（这是之前的 ClojureScript，所以我用纯 JS 编写了客户端）。还有[gifsockets](https://github.com/videlalvaro/gifsockets)。

# iphone - iOS 6 应用内相机

> ID：12946279
> 
> 赞同：1
> 
> 时间：2012-10-18T02:38:34.117
> 
> 标签：iphone, video, camera, ios6, uiimagepickercontroller

我正在构建一个应用程序，允许用户通过按下主屏幕上的按钮来录制视频（在应用程序中）。我不希望用户被带到照片应用程序，因为视频只能在应用程序上观看（最多 15 秒），我不太明白。有人有代码可以做到这一点吗？我希望相机做的一个很好的例子是应用程序 Cinemagram 中的相机。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T03:38:04.477

如果您打算将电影保存到用户的照片库，那么您可以使用 UIImagePickerController。特别是，您应该阅读课堂随附的指南。

但是，如果您只希望视频是临时的，那么您可能需要使用 AVFoundation。然后，您需要使用 AVCaptureMovieFileOutput 配置 AVCaptureSession 以将视频写入磁盘。然后，当您准备好播放视频时，使用您刚刚编写的文件 url 创建一个 AVURLAsset，使用它创建一个 AVPlayer 来播放视频，并使用所述播放器将 AVPlayerLayer 添加到您的视图中以显示视频.

无论哪种方式，我都建议研究 Apple 提供的示例。 [AVCam](http://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112)和 [AVPlayerDemo](http://developer.apple.com/library/ios/#samplecode/AVPlayerDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010101)应该足以让您入门（尤其是 AVCam 示例项目）。

# mysql - 在 1 个结果集中组合多列

> ID：12946280
> 
> 赞同：0
> 
> 时间：2012-10-18T02:38:36.057
> 
> 标签：mysql, sql

我有一张像

```
CREATE TABLE sales
    (`id` int, `date` date, `amount` int(4))
;

insert into sales values (1, '2012-09-01', 200),
                         (2, '2012-09-01', 300),
                         (3, '2012-09-02', 400),
                         (4, '2012-09-02', 500),
                         (5, '2012-09-02', 600) 
```

我希望检索显示今天销售额和昨天销售额的行

像

```
Date             Today Total sales   Yesterday Sales
2012-09-02       1500                500 
```

尝试使用类似的东西

```
SELECT id, date, sum(amount) FROM sales
GROUP BY date; 
```

但它会明智地返回销售日。我知道可以以编程方式完成，但是有没有更好的方法可以直接从数据库中检索它？

[sqlfiddle](http://sqlfiddle.com/#!2/b1eff/3)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:54:36.507

```
SELECT id, date(now()) as `date`, 
      SUM(IF(date(`date`) = date(now()), `amount`, 0)) as TodayTotalSales,
      SUM(IF(date(`date`) < date(now()), `amount`, 0)) as OtherDaySales
FROM sales; 
```

[http://sqlfiddle.com/#!2/0ef6a/18](http://sqlfiddle.com/#!2/0ef6a/18)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:44:15.837

您会得到它，因为`Id`每条记录都不同。你现在有两个选择：

1.  不要检索 Id 并编写如下查询：

    ```
    SELECT date, sum(amount) FROM sales
    GROUP BY date; 
    ```

2.  使用带有子查询的连接

    ```
    SELECT a.ID, a.date, b.amount
    FROM sales a, (SELECT date, sum(amount) amount FROM sales
                   GROUP BY date) b
    WHERE a.date = b.date; 
    ```

    **请注意：**在选项 2 中，第二列和第三列将在一天内为每个 id 重复相同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T02:55:41.400

```
SELECT date, sum(amount), yestersales 
FROM sales AS s1, 
    (SELECT sum(amount) as yestersales, ADDDATE(date, 1) AS yesterdate 
        FROM sales GROUP BY date) AS s2
WHERE s1.date = s2.yesterdate
GROUP BY date; 
```

会做你想做的事，但我不认为它真的很有效。我会亲自用代码来做。

由于您是按日期分组的，因此在这里选择 ID 并没有多大意义。

# python - Python url构造：转义字符而不是常规字母

> ID：12946285
> 
> 赞同：-1
> 
> 时间：2012-10-18T02:39:19.733
> 
> 标签：python, url-rewriting, mediawiki

我正在使用 wikipedia api 并使用以下 api 请求，

```
http://en.wikipedia.org/w/api.php?`action=query&meta=globaluserinfo&guiuser='$cammer'&guiprop=groups|merged|unattached&format=json` 
```

但问题是我无法逃脱美元符号和类似的字符，我尝试了以下但没有奏效，

```
 r['guiprop'] = u'groups|merged|unattached'
    r['guiuser'] = u'$cammer' 
```

我在 w3school 中找到了它，但是检查每个字符都会很痛苦，在`strip.http://www.w3schools.com/tags/ref_urlencode.asp`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:57:01.453

你应该看看使用[urlencode](http://docs.python.org/library/urllib.html#urllib.urlencode)。

```
from urllib import urlencode

base_url = "http://en.wikipedia.org/w/api.php?"

arguments = dict(action="query",
                 meta="globaluserinfo",
                 guiuser="$cammer",
                 guiprop="groups|merged|unattached",
                 format="json")
url = base_url + urlencode(arguments) 
```

如果您不需要构建完整的 url，您可以对单个字符串使用[quote函数：](http://docs.python.org/library/urllib.html#urllib.quote)

```
>>> import urllib
>>> urllib.quote("$cammer")
'%24cammer' 
```

所以你最终得到：

```
r['guiprop'] = urllib.quote(u'groups|merged|unattached')
r['guiuser'] = urllib.quote(u'$cammer') 
```

# grails - Grails URL 映射安全问题

> ID：12946292
> 
> 赞同：0
> 
> 时间：2012-10-18T02:40:45.567
> 
> 标签：grails, spring-security, url-mapping

我正在构建一个 grails 应用程序，grails 提供的默认 URLMapping 是`/$controller/$action?/$id`

我担心这个捕获所有映射的安全方面。一方面，明确列出我们所有的映射很痛苦，但另一方面似乎可能存在潜在的安全问题，例如忘记保护某些映射。

通过显式指定映射，我们可以更严格地控​​制 URL。它还让我们可以制作更加用户友好的 URL（例如，也许我们可以将诸如使用`people/john/`url 代替`/erson/john`.

保留默认映射是否还有其他问题？是否有可能我们无意中暴露了某个管理页面有效的事实（我将不得不更多地研究弹簧安全性，以了解如何重定向到 404 以尝试访问非管理员用户的管理页面）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:52:57.010

我想你自己回答了。默认 url 映射 "/$controller/$action?/$id" 易于使用，但在控制器安全实施不良的情况下可能会被用作漏洞。

但最好的解决方案可能是在域级别进行安全检查，因此即使用户可以访问未经授权的控制器，异常也会阻止他对域执行任何操作。

# python - 在 Python 中是否需要为 Mongodb 使用 ODM 框架？

> ID：12946294
> 
> 赞同：-1
> 
> 时间：2012-10-18T02:41:02.773
> 
> 标签：python, mongodb

现在我想使用mongodb作为我的Python网站后端存储，但我想知道是否有必要使用诸如MongoEngine之类的ODM？还是直接使用mongodb python驱动？

有什么好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:02:40.773

是绝对必要的吗？不 - 您可以直接使用 python 驱动程序而无需中间的 ODM。如果您更喜欢定义模式和模型，而不是通过正常的数据库操作来制作/修改自己的模式，那么 ODM 可能是您应该研究的东西。

在将他们的开发数据模型映射到关系数据库（在这种情况下是 ORM）时，很多人已经习惯了使用这种解决方案。因为 MongoDB 文档模型更紧密地映射到代码中的对象（例如），所以您可能会觉得不再需要这种映射。

虽然它仍然很方便（从 mongoengine、mongoid、morphia 等的流行中可以看出）——最终，选择权在你。

# asp.net-mvc - jqueryuihelpers 对话框 triggerclick 事件源

> ID：12946297
> 
> 赞同：0
> 
> 时间：2012-10-18T02:41:30.357
> 
> 标签：asp.net-mvc, jquery-ui-dialog

我正在为 MVC 4 使用 jqueryuihelpers (http://jqueryuihelpers.apphb.com/Docmo/Dialog)。以下代码来自文档页面。

```
<p>@Html.JQueryUI().Button("Click me!", new { id = "triggerButton" })</p>

@using (Html.JQueryUI().Begin(new Dialog().AutoOpen(false)
   .TriggerClick("#triggerButton")))
{
    <p>This dialog is opened with a button.</p>
    <p>Please click the X at the top right corner to close it.</p>
} 
```

在上面的示例中，TriggerClick 的选择器仅用于一个按钮，并且可以正常工作。

如果我有超过 1 个按钮，我想使用类选择器“.button”。

```
@using (Html.JQueryUI().Begin(new Dialog().AutoOpen(false)
   .TriggerClick(".button")))
{
    <p>This dialog is opened with a button.</p>
    <p>Please click the X at the top right corner to close it.</p>
} 
```

在这种情况下，我如何确定哪个按钮触发了单击事件，从而打开了对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:36:44.460

在同一页面的购物车示例中演示了一种解决方法。

```
<div id="cart">
@{Html.RenderPartial("ShoppingCart");}
</div>

@using (Html.JQueryUI().Begin(new Dialog().Title("Remove").AutoOpen(false)
.ConfirmAjax(".removeLink", "Yes", "No",
new AjaxSettings() { Method = HttpVerbs.Post, Success = "removeSuccess", Error = "removeError" })))
{
    <p>Remove the item from your shopping cart?</p>   
} 
```

它使用类选择器并回发到服务器并更新部分页面内容。

这不完全是我想要的。但它可以作为替代方案。

# sql - 获取博客文章标题和博客名称的最佳方式

> ID：12946298
> 
> 赞同：0
> 
> 时间：2012-10-18T02:42:00.903
> 
> 标签：sql, sql-server, sql-server-2008

假设我有 2 张桌子：

> ```
> Blog      BlogPosts
> BlogId    BlogPostId
> Name      BlogId
>           Title 
> ```

当我检索记录时，我想要 CSV 格式的 BlogPosts。我为此创建了一个用户定义的函数，并将 BlogId 作为参数传入。还有比这更好的方法吗？在用户定义的函数中发出数据库请求通常会成为性能杀手。你有什么其他的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:29:41.270

试试这个：

```
select B.Name,
       (
         select ', '+BP.Title
         from BlogPosts as BP
         where B.BlogId = BP.BlogId
         for xml path(''), type
       ).value('substring((./text())[1], 3)', 'varchar(max)') as BlogPosts
from Blog as B 
```

[SQL小提琴](http://sqlfiddle.com/#!3/6c2b4/1/0)

# java - jUnit：通用测试类 - 将测试名称设置为类/方法名称以外的其他名称？

> ID：12946302
> 
> 赞同：4
> 
> 时间：2012-10-18T02:42:21.387
> 
> 标签：java, testing, junit, automated-tests, testng

我有一个项目测试套件，其中包含一组我想用作测试套件的文件 -**每个文件一个测试**。

但是测试的数量将达到数百个，并且每个测试都是相同的：解析文件并检查输出。为每个文件维护一个方法很乏味。

JBoss Operation Network 使用 TestNG，它允许创建一个测试套件，并用同一个类的多个实例填充它，并允许显式设置**测试名称**。

在 jUnit 中，我还没有找到更改测试名称的方法。所以对所有人来说都是一样的。

**是否有某种方法或扩展可以使用自定义生成的测试名称多次运行同一个类？**

PS：我不想诉诸于课堂仪器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T03:02:38.863

创建时，您可以作为构造函数参数`TestSuite`传递：`desiredTestCaseName`

```
public class AllTestSuite extends TestSuite{

  public static Test suite() {
      TestSuite suite= new TestSuite();
      Test testCase1 = new MyTest("TestCaseOne");
      Test testCase2 = new MyTest("TestCaseTwo");
      suite.addTest(testCase1);
      suite.addTest(testCase2);
      return suite;
  }
} 
```

当您运行该套件时，它将引用构造函数中提供的名称，即`TestCaseOne`测试`TestCaseTwo`类为`MyTest`.

**编辑：**

请确保您已将`MyTest`类中的构造函数定义为：

```
public MyTest(String name) {
    super(name);
} 
```

如果需要额外的参数支持，您可以在测试用例中添加一个构造函数来接受参数并将它们分配给测试用例类变量（最初默认使用默认测试场景值），可以在测试执行期间使用：

```
public MyTest(String name, String param1, Integer param2...) {
    super(name);
    this.param1 = param1;
    this.param2 = param2;
} 
```

运行测试套件后，JUnit 控制台如下所示： ![在此处输入图像描述](../Images/6b88c89ecfbbeb4ec42fcb14e9b5d647.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T12:20:59.280

如果您使用的是 JUnit4，则可以查看[@Parameterized](http://kentbeck.github.com/junit/javadoc/latest/org/junit/runners/Parameterized.html)。基本思想是您提供一个待办事项列表，JUnit 对列表中的每个项目执行相同的测试方法。

使用 4.10 版本，命名不是太好，您可以得到 0、1、2... 作为名称，但是使用 4.11-beta-1（应该很快会从 beta 版本中出来），您可以获得更好的命名方案，因为您可以指定名称。[请参阅@Parameterized](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/runners/Parameterized.java)顶部的 javadoc 。

```
@RunWith(Parameterized.class)
public class FibonacciTest {
    @Parameters(name= "{index}: fib({0})={1}") // we specify the name here
    public static Iterable<Object[]> data() {
        return Arrays.asList(new Object[][] { { 0, 0 }, { 1, 1 }, { 2, 1 },
                { 3, 2 }, { 4, 3 }, { 5, 5 }, { 6, 8 } });
    }

    private int fInput;

    private int fExpected;

    public FibonacciTest(int input, int expected) {
        fInput= input;
        fExpected= expected;
    }

    @Test
    public void test() {
        assertEquals(fExpected, Fibonacci.compute(fInput));
    }
} 
```

在上面，您最终会得到诸如

```
fib(0)=0
fib(1)=1
fib(2)=1 
```

等等

# javascript - 是否可以将常规 Javascript 库转换为 NodeJS 库？

> ID：12946303
> 
> 赞同：1
> 
> 时间：2012-10-18T02:42:23.093
> 
> 标签：javascript, node.js, canvas

我一直在使用 Javascript 库，即[canvas-lib](http://sourceforge.net/projects/html-canvas-lib/)，我在服务器端使用 Node.JS/Socket.io，因此我可以在客户端之间传递事件。

我正在使用一种架构，其中一次只允许一个客户端控制画布，因为我正在制作一种由移动设备控制并显示在第二个（更大）屏幕上的“scratch”游戏。

[您可以在此处](https://cacoo.com/diagrams/oVVGfA1pJK1ghNVM)查看架构图。

问题是，目前画布交互是在客户端上的一个脚本上完成的，这会导致一些问题：

*   无法缩放画布
*   没有统一的时限计数器
*   我必须在外部屏幕上手动加载页面

我的目标是：

*   让服务器将时间传递给两个设备（或屏幕）
*   将画布加载到移动设备上并缩放到外部屏幕（在新连接上，并在移动设备连接后自动完成，或退出队列并进入当前活动状态）

为了实现这一点，我相信我必须让 canvas-lib 在节点上工作，那么由于 lib 还没有准备好，我该如何实现呢？如何将常规库变成 Node 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:34:08.303

我为使[Fabric.js](http://fabricjs.com)节点兼容所做的一些事情：

*   使用在节点环境中提供画布 API 的[node-canvas 。](https://github.com/LearnBoost/node-canvas)
*   提供（或阻止）对库可能正在使用的任何 DOM 对象的访问。见[jsdom](https://github.com/tmpvar/jsdom)。
*   删除对专有（仅限浏览器）API 的调用。请参阅[非标准功能](http://kangax.github.com/es5-compat-table/non-standard/)。
*   调整库的测试套件以在节点下运行（如果还没有）。见[mocha](http://visionmedia.github.com/mocha/)或[qunit](http://qunitjs.com/)。
*   运行测试套件并确保一切仍按预期运行。
*   （可选）为方便起见创建 NPM 包。

或者您可以只使用已经为节点提供支持的库；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:47:31.390

出色地，

如果你正在开发一个专门为浏览器做东西的库，我看不出为它制作 Node 包的任何意义。

但是无论如何，请看一下[Node Package Manager](https://npmjs.org/)（简称 NPM），它会在您需要开发一些 Node 库时为您提供帮助。

# web-crawler - 实现这个爬虫的难度

> ID：12946304
> 
> 赞同：1
> 
> 时间：2012-10-18T02:42:25.953
> 
> 标签：web-crawler

[根据您的经验，您认为以编程方式在黄页网站](http://www.yellowpages.com/seattle/hotels?q=Hotels)中搜索一个术语，然后将结果中的联系信息刮到 CSV 文件中有多难？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:06:46.850

你可以只使用[YP 搜索 API](http://developer.yp.com/api/Listings%2520Endpoints/Search-60)吗？访问是免费的，只需一分钟即可设置开发者帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:24:03.323

使用 Perl 和一些像 WWW::Robot 这样的模块可能不会那么难。我没有尝试，但既然你知道 Python，Scrapy 可能会有所帮助。[http://scrapy.org](http://scrapy.org)

记住不要在抓取时敲击网站，因为您的 IP 可能会被禁止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T02:47:50.543

使用正确的模块和库，它非常可行！不过，这取决于您的工具，Perl 或 Python，您将万事俱备。如果您尝试使用 C++ 执行此操作，您可能会遇到更多的痛苦。

如果您提供有关您的情况的更多信息（语言框架限制），我可以更具体。

此外，抓取还需要考虑法律问题，我不确定黄页关于机器人的政策。在继续之前阅读他们的 robots.txt。[http://www.robotstxt.org/](http://www.robotstxt.org/)应该给你一些关于学习这些东西的开始信息。

既安全又合法的最好方法就是使用 API，[http://developer.yp.com/](http://developer.yp.com/)

# asp.net-mvc - 使用 T4MVC 的 ASP.NET 路由未达到默认值

> ID：12946311
> 
> 赞同：1
> 
> 时间：2012-10-18T02:43:16.293
> 
> 标签：asp.net-mvc, asp.net-mvc-4, routes, t4mvc

这以前没有发生过，但突然之间我不再使用我的默认路线了。我的主页转到`http://localhost:2222/assets/images/30?Controller=home&Action=index`. 为什么会发生这种情况？

我注意到当我在家庭控制器上进行操作时它工作正常，但是如果我转到另一个控制器，就会出现这个问题。

```
@foreach(var t in MVC.Home.Index().GetRouteValueDictionary())
    {
        <span>@t.Key - @t.Value</span>
    }

Area - Controller - home Action - index 
```

关联

```
@Html.ActionLink("Home", MVC.Home.Index()) 
```

全球.asax

```
 routes.Add(
                "Images",
                new Route(
                    "assets/images/{Id}",
                        new RouteValueDictionary(),
                        new RouteValueDictionary { { "Id", "\\d+" } },
                        new ImageRouteHandler(new ImageHandler())
                    )
                );

            routes.MapRouteLowercase(
               "Default",

                  "{controller}/{action}",

                   new { controller = "Home", action = "Index", area="" }
                   ); 
```

家庭控制器.cs

```
public partial class HomeController : SiteController

     {
          public virtual ActionResult Index()
                {
                    var model = new HomeViewModel();

                    return View(model);
                } 
```

T4MVC.cs

```
 public class ActionNamesClass {
            public readonly string Index = ("Index").ToLowerInvariant();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:58:59.903

我继续并颠倒了默认路线，资产路线和一切都在工作，很奇怪。

# php - 从 Perl 脚本运行 PHP

> ID：12946316
> 
> 赞同：1
> 
> 时间：2012-10-18T02:44:24.580
> 
> 标签：php, perl, drupal, fastcgi

我正在尝试从我的 goDaddy 共享主机上的 perl 脚本运行 php 脚本。我最初编写的 PHP 脚本超过了 120 秒的时间限制和 mySQL 内存限制，所以我将脚本分成几个部分。

我希望这全部作为一个 cron 作业运行，所以我想调用一个运行 4-5 个 php 脚本的 perl 脚本。

这是我的网站，使用 Drupal 7 运行。

我编写了一个包含以下内容的 perl 脚本：

```
my $command = '/web/cgi-bin/php5 -q $HOME/html/phpscript1.php';
exec ($command) or print STDERR "couldn't exec $command: $!"; 
```

它调用了一个包含如下内容的 php 脚本：

```
<?php

define('DRUPAL_ROOT', getcwd());

include_once DRUPAL_ROOT . '/includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);
....
do stuff
....
?> 
```

但是当我从 perl 运行它时（在我的 $HOME 目录和 html 目录中都试过）我在运行脚本时看到了以下问题（其中 XXXXXX 是我的 Godaddy 帐户文件夹）：

```
<b>Notice</b>:  Undefined index:  SCRIPT_NAME   
<b>/home/content/05/XXXXXXX/html/includes/bootstrap.inc</b> on line <b>1627</b><br />
<br />
<b>Notice</b>:  Undefined index:  REMOTE_ADDR in    
<b>/home/content/05/XXXXXXX/html/includes/bootstrap.inc</b> on line <b>2802</b><br />
<br />
<b>Notice</b>:  Undefined index:  argc in
<b>/home/content/05/XXXXXXX/html/includes/bootstrap.inc</b> on line <b>3290</b><br /> 
```

我推断这些是 FastGCI 的问题，我可能需要定义/导出/将这些索引/变量指向某些东西，但是经过大量搜索后我无法找出要做什么。

PHP 脚本使用 CURL 将图像从外部服务器复制到我的服务器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T04:28:07.000

您收到 php 通知是因为您在自定义 php 脚本中引导 Drupal，并且这些变量未在 cli 上定义。

该 php 脚本可能会更好地实现为[Drush](http://drupal.org/project/drush)命令。Drush 已经设置了 Drupal 期望定义的所有变量，并为您提供了一个框架，可以在 Drupal 实例中轻松运行自定义代码。即使您不想费心编写自定义命令，也可以像这样使用 drush 的脚本命令：

```
drush scr $HOME/html/phpscript1.php 
```

此外，值得指出的是，这些只是 php 通知。它们不太可能导致您的脚本出现任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:38:30.630

所以这里的答案是不要像在您的drupal 站点中工作时那样引导Drupal（例如在模块中创建函数）。相反，创建一个包含您需要的功能的 .php 文件并在 Drupal 之外使用它（例如，在您的 html 文件夹上方）。感谢马克的快速帮助。

# windows-phone-7 - Window Phone 应用内 webBrowser 显示 j-Query+ajax 网站

> ID：12946323
> 
> 赞同：0
> 
> 时间：2012-10-18T02:46:13.763
> 
> 标签：windows-phone-7, jquery

我是 Window Phone 的新手，我正在开发一个应用内 webview 应用程序。我用于 Window Phone 的网站使用的是 javascript+jquery+ajax jsp。

使用 Window Phone webbrowser 的网页中的某些链接无法获得点击事件，因此该页面不能否定 webbrowser 组件内的另一个页面。

但是，当我在 Window Phone (IE) 上使用浏览器时，它似乎在否定时效果很好。

谁能帮我解决这个问题？

我需要在应用内浏览器组件中启用某些功能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:38:24.617

确保该[`IsScriptEnabled`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.webbrowser.isscriptenabled%28v=vs.92%29.aspx)属性设置为 true：

> **WebBrowser.IsScriptEnabled 属性** 启用或禁用脚本。 *这适用于导航到的下一个文档，而不是当前文档*。此属性默认为 false。将此属性设置为 true 以启用脚本，或设置为 false 以禁用脚本。

# python - Python：递归和返回语句

> ID：12946326
> 
> 赞同：0
> 
> 时间：2012-10-18T02:46:22.743
> 
> 标签：python, recursion, exponentiation

我有这个使用递归计算指数的简单代码。我了解递归是如何在这里工作的，除了：`if exp <= 0: return 1`。假设我调用函数来给我五次方。如果我让它返回 1，它会给我正确的值 25，但如果是 2，它会返回 50、3、75。

我很难看到这在环境中是如何工作的：

```
def recurPower(base,exp):
    if exp <= 0:
        return 1
    return base*recurPower(base,exp-1)

print str(recurPower(5,2)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T03:14:25.937

我不确定我是否理解这个问题。基本情况下的 1 就在那里`base^0`（对于任何非零基数），而且因为它是乘法恒等式，所以你可以自由地乘以它。

它可能会帮助您尝试“展开”递归，以查看数字的去向：

```
recurPower(5, 2) = 
5 * recurPower(5, 1) = 
5 * 5 * recurPower(5, 0) =
5 * 5 * 1 =
25 
```

用 2 或 3 代替 1 可以得到你试图计算的指数的两到三倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T03:16:00.120

这里发生了什么，您最终会得到一系列返回值，这些值将以该`return 1`语句返回的值开头，例如：

```
recurPower(5,2) == 
recurPower(5,2) -> recurPower(5,1) -> recurPower(5,0) 
```

然后 return 语句将执行以下操作：

```
1 -> (1)*5 -> (5)*5 
```

（与上一个链相反，因为我们正在级联链）。

如果您将返回值更改为，`2`您将获得：

```
2 -> (2)*5 -> (10)*5 
```

（与上一个链相反，因为我们正在级联链）。

括号中的数字从递归链的下游返回。

# android - Android - 将单个元素包含在屏幕上

> ID：12946329
> 
> 赞同：2
> 
> 时间：2012-10-18T02:46:54.320
> 
> 标签：android, android-layout, android-gui

我正在尝试查看我想使用的布局方案是否可行。我想要一个**可滚动**`XML`的布局。在该可滚动布局中，我希望在屏幕上水平放置一条线（我只使用了一个具有固定高度和不同颜色的视图）。当该水平线到达屏幕顶部时，当我向下滚动布局时，我希望它停止并保持在屏幕顶部，同时能够滚动浏览其下方的所有内容。

 **我一直在弄乱 XML 试图让它工作，基本上是在它之前和之后放一堆垃圾。

关于它如何工作的任何想法？当滚动位置到达某个点时，我是否必须对 java 代码做一些花哨的事情来修复顶部的红线？您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:27:44.543

我假设您想要类似 Gmail 应用程序的东西，当您滚动邮件时，标题会粘在顶部...为此，您需要 2 个视图。您在下方有常规滚动条，并在顶部覆盖了一个固定视图（您可以使用相对布局来执行此操作）。当您的单元格经过某个位置时，您想要填充并将固定视图的可见性设置为 VISIBLE。这会给人一种印象，即您想要“粘贴”到顶部的视图实际上只是被卡住而不是滚动出视图。您还必须根据滚动单元格/视图的位置和高度计算出相反的滚动场景。

高温高压**

# python - 如何在循环内限制列表理解重复？

> ID：12946333
> 
> 赞同：-1
> 
> 时间：2012-10-18T02:47:31.340
> 
> 标签：python, list, list-comprehension

下面的列表是 ppm 文件的一部分。这三个数字是红绿蓝。下面的列表是更大列表名称 num 的一部分

```
num=list below  
    [..... [155, 155, 155],...[100, 100, 100]...
    [222, 222, 222]....] 

for pixels in num:
     for rgb in pixels:
          print([255 - rgb for rbg in pixels]) 
```

运行此代码时，您会得到

```
[100, 100, 100]
[100, 100, 100]
[100, 100, 100]
[33, 33, 33]
[33, 33, 33]
[33, 33, 33] 
```

如何得到所以它只打印一个而不是三个相同的。

```
[100, 100, 100]
[33, 33, 33] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:55:55.523

删除你的内部 for 循环

```
>>> nums = [[155, 155, 155],
...         [222, 222, 222]]

>>> for pixels in nums:
...    print([255 - rgb for rgb in pixels])

>>> [100, 100, 100]
>>> [33, 33, 33] 
```

**编辑**：要将`print`s 输出到文件：

```
f = open('path/to/file', 'w')
for pixels in nums:
    f.write(', '.join(str(255 - rgb) for rgb in pixels) +'\n')
f.close() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:56:31.440

从外观上看，您有一个不需要的循环：

```
for pixels in num:
     for rgb in pixels:
          print([255 - rgb for rgb in pixels]) 
```

应该：

```
for pixels in num:
      print([255 - rgb for rgb in pixels]) 
```

否则，您将为每个像素打印列表理解 3 次，为该像素中的每个元素打印一次。

# c# - 散点图“最佳拟合”线的算法

> ID：12946341
> 
> 赞同：9
> 
> 时间：2012-10-18T02:48:14.627
> 
> 标签：c#, mschart

我正在用 C# 编写一个小型应用程序，使用 MSChart 控件来绘制 X 和 Y 数据点集的散点图。其中一些可能相当大（数百个数据点）。

想问是否有一个“标准”算法来绘制跨点的最佳拟合线。我正在考虑将 X 数据点划分为预定义数量的集合，例如 10 或 20，并为每个集合取相应 Y 值和中间 X 值的平均值，依此类推以创建线。这是一个正确的方法吗？

我搜索了现有的线程，但它们似乎都是关于使用 Matlab 等现有应用程序实现相同的目标。

谢谢，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T03:30:36.763

使用线性最小二乘算法

```
public class XYPoint
{
    public int X;
    public double Y;
}

class Program
{
    public static List<XYPoint> GenerateLinearBestFit(List<XYPoint> points, out double a, out double b)
    {
        int numPoints = points.Count;
        double meanX = points.Average(point => point.X);
        double meanY = points.Average(point => point.Y);

        double sumXSquared = points.Sum(point => point.X * point.X);
        double sumXY = points.Sum(point => point.X * point.Y);

        a = (sumXY / numPoints - meanX * meanY) / (sumXSquared / numPoints - meanX * meanX);
        b = (a * meanX - meanY);

        double a1 = a;
        double b1 = b;

        return points.Select(point => new XYPoint() { X = point.X, Y = a1 * point.X - b1 }).ToList();
    }

    static void Main(string[] args)
    {
        List<XYPoint> points = new List<XYPoint>()
                                   {
                                       new XYPoint() {X = 1, Y = 12},
                                       new XYPoint() {X = 2, Y = 16},
                                       new XYPoint() {X = 3, Y = 34},
                                       new XYPoint() {X = 4, Y = 45},
                                       new XYPoint() {X = 5, Y = 47}
                                   };

        double a, b;

        List<XYPoint> bestFit = GenerateLinearBestFit(points, out a, out b);

        Console.WriteLine("y = {0:#.####}x {1:+#.####;-#.####}", a, -b);

        for(int index = 0; index < points.Count; index++)
        {
            Console.WriteLine("X = {0}, Y = {1}, Fit = {2:#.###}", points[index].X, points[index].Y, bestFit[index].Y);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T02:50:43.600

是的。您将需要使用[线性回归](http://en.wikipedia.org/wiki/Linear_regression)，特别是[简单线性回归](http://en.wikipedia.org/wiki/Simple_linear_regression)。

该算法本质上是：

*   假设存在一条最佳拟合线，`y = ax + b`
*   对于您的每个点，您都希望最小化它们与这条线的距离
*   计算每个点到直线的距离，并对距离求和（通常我们使用距离的平方来更严厉地惩罚离直线较远的点）
*   使用基本微积分找到 和 的值`a`，`b`使结果方程最小化（应该只有一个最小值）

维基百科页面将为您提供所需的一切。

# jquery - jQuery加载的Facebook喜欢按钮不起作用

> ID：12946345
> 
> 赞同：1
> 
> 时间：2012-10-18T02:48:24.180
> 
> 标签：jquery, ajax, facebook

我正在尝试使用 jquery 将 news_092612.html 的 #content div 加载到另一个页面中。#content 中的所有内容都加载正常，除了 facebook like 按钮。这是我正在使用的脚本，我相信我应该在某处合并一个解析函数，以便在新的#newswrapper 中重新加载按钮。我已经搜索并尝试过，但我碰壁了。提前致谢！

```
 $(document).ready(function(){
$('#newswrapper1').load('news_092612.html #content');

 }); 
```

这也是我从中获取#content 的原始页面。 [http://www.spadeballlink.com/GALLOWS/news_092612.html](http://www.spadeballink.com/GALLOWS/news_092612.html)

以及我尝试将#content 加载到的其他页面。 [http://www.spadeballlink.com/GALLOWS/TheGoddamnGallows.html](http://www.spadeballink.com/GALLOWS/TheGoddamnGallows.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:04:25.457

这是因为 Facebook 小部件由 Facebook SDK 加载，该 SDK 包含在特定的新闻文件中，而不是您尝试将 #content div 加载到的页面。

尝试将此代码添加到页面 gallows.html 页面中：

```
<script>
  (function(d, s, id) {
   var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script> 
```

# java - fx.prp.file.name 到字符串

> ID：12946347
> 
> 赞同：0
> 
> 时间：2012-10-18T02:48:41.183
> 
> 标签：java, jsp

我无法理解我的导师设定的指导方针之一：

• 分配了值fx.prp.file.name 的公共静态最终字符串。这是属性文件 /WEB INF/fxCalc.prp 的相对路径的上下文初始化参数键

使用代码时

```
public static final String codes = "fx.prp.file.name"; 
```

我得到了错误

```
 cannot find symbol
  symbol:   variable codes
  location: class SimplifiedJSPServlet 
```

当我从java文件调用它到jsp文件时

编辑：

在此之后，我必须在 JSP 上调用它

*   在里面`jspInit`你可以使用`getServletContext`方法来获取一个`ServletContext`对象。该对象对所有 JSP 都可用。该对象有一个方法调用`getInitParameter`，`param-valu`如果你给它一个`param-name`. `public final static String`参数名称fx.prp.file.name应该是 `FxDataModel`. 不要硬编码任何东西。

它将作为参考，简单地将单词括在引号中似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:52:03.950

做了

```
public static final String codes = "fx.prp.file.name"; 
```

如果您想将文字值分配`"fx.prp.file.name"`给参考`codes`

# java - Java - 以下字符串的正则表达式是什么

> ID：12946351
> 
> 赞同：0
> 
> 时间：2012-10-18T02:49:10.113
> 
> 标签：java, regex

我正在编写一个程序，它接收一个java文件并检查每一行是否有一个包含assertEquals的字符串，然后替换属于assertEquals第二个参数的字符串（即expectedVar和expectedVar2）。

假设这些行是从文件中读取并放置在字符串变量中的：

```
String myString1 = "Assert.assertEquals(outputMessage, expectedVar, actualVar);" 

String myString2 = "Assert.assertEquals(/"Hello World, /" + "Hello!", expectedVar2, actualVar);" 
```

我想使用模式库中的单个正则表达式以及“组”并替换 expectedVar 和 expectedVar2 或基本上位于 assertEquals 的第二个参数中的任何字符串。

我正在考虑在第一个逗号之后和第二个逗号之前接受任何内容，但 myString2 也可以包含多个逗号（例如*/"Hello World, /" + "Hello!"*）。

我不确定如何解决这个问题。如果您有其他想法，我愿意以不同的方式实施。

谢谢先进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:29:58.823

您需要使用正则表达式原子分组`(?>...|...)`>>

### Java代码：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

class Main
{
  public static void main (String[] args) throws java.lang.Exception
  {
    String text = "Assert.assertEquals(/\"Hello World, /\" + \"Hello!\", expectedVar2, actualVar)";
    String pattern = "Assert\\.assertEquals\\((?>(?:[^,]*\"(?:[^,]*,)+[^,]*\")+|[^,]+),\\s*([^,]+)";
    Pattern r = Pattern.compile(pattern);
    Matcher m = r.matcher(text);
    if (m.find()) {
      System.out.println("MATCH FOUND: " + m.group(1));
    } else {
      System.out.println("NO MATCH");
    }
  }
} 
```

### 输出：

```
MATCH FOUND: expectedVar2 
```

**[在此处](http://ideone.com/6azQl)**测试此代码。

# javascript - javascript 按值在数组中查找对象并附加附加值

> ID：12946353
> 
> 赞同：2
> 
> 时间：2012-10-18T02:49:14.140
> 
> 标签：javascript, arrays, object, find, push

我认为标题解释得很好。我有一个数组，每个对象有两个值，我需要通过其中一个值查找对象，然后为其分配第三个值。

以下是胆量：

```
$slides.push({
    img: el.attr('href'),
    desc: el.attr('title').split('Photo #')[1]
}); 
```

它构建了一个这样的数组：

```
Object
    desc: 127
    img: img/aaron1.jpg
Object
    desc: 128
    img: img/aaron2.jpg 
```

我想查找该`desc`值，然后分配第三个值`in: yes`

```
$slides.findInArray('desc', '127').addValueToObject('in','yes') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:00:50.510

**[http://jsfiddle.net/S3cpa/](http://jsfiddle.net/S3cpa/)**

```
var test = [
    {
        desc: 127,
        img: 'img/aaron1.jpg',
    },
    {
        desc: 128,
        img: 'img/aaron2.jpg',
    }
];

function getObjWhenPropertyEquals(prop, val)
{
    for (var i = 0, l = test.length; i < l; i++) {
        // check the obj has the property before comparing it
        if (typeof test[i][prop] === 'undefined') continue;

        // if the obj property equals our test value, return the obj
        if (test[i][prop] === val) return test[i];
    }

    // didn't find an object with the property
    return false;
}

// look up the obj and save it
var obj = getObjWhenPropertyEquals('desc', 127);

// set the new property if obj was found
obj.in = obj && 'yes'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:57:29.280

您需要通过 for 循环运行它

```
// Loop through the array
for (var i = 0 ; i < $slides.length ; i++) 
{
    // Compare current item to the value you're looking for
    if ($slides[i]["desc"] == myValue)
    {
        //do what you gotta do
        $slides[i]["desc"] = newValue;
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T03:01:05.947

```
easy way

 for (var i = 0; i < $slides.length; i++) 
    {
        if ($slides[i]["desc"] == "TEST_VALUE")
        {
            $slides[i]['in']='yes';
        }
    } 
```

* * *

```
Another way

    Array.prototype.findInArray =function(propName,value)
    {
        var res={};
        if(propName && value)
        {
          for (var i=0; i<this.length; i++)
          {
            if(this[i][propName]==value)
            {
               res = this[i];
               break;
            }
          }
        }
        return res;
    }

    Object.prototype.addValueToObject =function(prop,value)
   {
        this[prop]=value;
   } 
```

- -使用它 -

```
$slides.findInArray('desc', '127').addValueToObject('in','yes'); 
```

[http://jsfiddle.net/s6ThK/](http://jsfiddle.net/s6ThK/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-28T08:05:24.083

使用现代 JS 可以简单地完成：

```
var obj = $slides.find(e => e.desc === '127');
if (obj) {
    obj.in = 'yes';
} 
```

# android - 过滤器匹配与 Android 中的比率测试

> ID：12946355
> 
> 赞同：1
> 
> 时间：2012-10-18T02:49:29.990
> 
> 标签：android, image-processing, opencv, image-recognition

在我努力研究之后，我知道在我们匹配图像之后，我们仍然需要对其进行过滤，而 SURF 的最佳过滤器之一是比率测试。有人知道如何在 Android 中编码吗？

# scala - 定义一个依赖于隐式的抽象类或特征

> ID：12946359
> 
> 赞同：8
> 
> 时间：2012-10-18T02:50:34.167
> 
> 标签：scala, inheritance, playframework-2.0, traits

我有这个播放框架 2 代码（简化）：

```
import formatters.json.IdeaTypeFormatter._

object IdeaTypes extends Controller {

  def list = Action { request =>
    Ok(toJson(IdeaType.find(request.queryString)))
  }

  def show(id: Long) = Action {
    IdeaType.findById(id).map { ideatype =>
      Ok(toJson(ideatype))
    }.getOrElse(JsonNotFound("Type of idea with id %s not found".format(id)))
  }
} 
```

`IdeaType`类 extends `Entity`，它的伴生对象`IdeaType`， extends `EntityCompanion`。

如您所料，我在每个控制器中都有这种代码，所以我想将基本行为提取到特征中，如下所示：

```
abstract class EntityController[A<:Entity] extends Controller {
  val companion: EntityCompanion
  val name = "entity"

  def list = Action { request =>
    Ok(toJson(companion.find(request.queryString)))
  }
  def show(id: Long) = Action {
    companion.findById(id).map { entity =>
      Ok(toJson(entity))
    }.getOrElse(JsonNotFound("%s with id %s not found".format(name, id)))
  }
} 
```

但我收到以下错误：

```
[error] EntityController.scala:25: No Json deserializer found for type List[A]. 
[error] Try to implement an implicit Writes or Format for this type.
[error]     Ok(toJson(companion.find(request.queryString)))
[error]              ^
[error] EntityController.scala:34: No Json deserializer found for type A.
[error] Try to implement an implicit Writes or Format for this type.
[error]       Ok(toJson(entity))
[error]                ^ 
```

我不知道如何判断隐式`Writes`将由实现`EntityController`特征的类实现（或继承抽象类`EntityController`）

- 编辑

到目前为止，我正在这样做：

```
abstract class CrudController[A <: Entity](
  val model: EntityCompanion[A],
  val name: String,
  implicit val formatter: Format[A]
) extends Controller { 
```

并像这样使用它

```
object CrudIdeaTypes extends CrudController[IdeaType](
  model = IdeaType, 
  name = "type of idea", 
  formatter = JsonIdeaTypeFormatter
) 
```

我无法让 scala 使用隐式自动选择它。我尝试使用此导入，但没有成功

```
import formatters.json.IdeaTypeFormatter._ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T07:26:53.737

如果您希望控制器类自己定义隐式，那么只需声明抽象隐式值，并在派生类中定义它们。

```
abstract class EntityController[A<:Entity] extends Controller {
  protected implicit def entityWriter: Writes[A]
  protected implicit def entityListWriter: Writes[List[A]]
  ...      
}

class MyEntity extends Entity {
  ...
}

class MyEntityController extends EntityController[MyEntity] {
  protected def entityWriter: Writes[MyEntity] = ...
  protected def entityListWriter: Writes[List[MyEntity]] = ...    
} 
```

但是，在控制器之外定义这些隐式更为实际，通常在实体的伴随对象中，以便编译器可以在不导入的情况下自动找到它们。然后，将隐式值传递给 的构造函数`EntityController`：

```
abstract class EntityController[A<:Entity](implicit entityWriter: Writes[A], entityListWriter: Writes[List[A]] ) extends Controller {
  ...      
}

class MyEntity extends Entity {
  ...
}
object MyEntity {
  protected implicit def entityWriter: Writes[A]
  protected implicit def entityListWriter: Writes[List[A]]
}

class MyEntityController extends EntityController[MyEntity] {
  ...
} 
```

最后一点， List[MyEntity] 的隐含可能是不需要的（因此只有 MyEntity 的隐含需要显式定义）。我没有检查过，但通常在使用这种“类型类模式”时，框架已经为每个 List[T] 定义了一个隐式，前提是 T 有一个隐式。这可能是这种情况，尽管我没有检查过。

# r - 带有 lubridate 的 R apply() 函数中的错误

> ID：12946371
> 
> 赞同：-1
> 
> 时间：2012-10-18T02:52:48.157
> 
> 标签：r

我有一个像这样的简单功能：

```
f<-function(x){ ymd_h(x[1]) + (x[2] )} 
```

在这里我`ymd_h(), hours()`从`lubridate`包中使用。但是当我尝试从`apply`这样的方法调用这个函数时：

```
result<-apply(wind.new[,c("date","hors")],1,f) 
```

...和其他列`*wind.new`的数据框在哪里`date`，`hors`我收到以下错误：

```
Error in FUN(newX[, i], ...) : could not find function "ymd_h" 
```

显然`ymd_h`是看不到里面`apply()`的。我将如何解决这个问题？更新：实际上我有下面显示的数据框，并希望将**日期**列转换为 YYYYMMDDHH 格式并将**hors**列添加为小时。我认为最好的方法是使用 lubridate 包，我为此使用了上述功能。但是执行时间很长，输出不正确。请问有什么提示吗？

```
 date    hors   u      v        ws    wd
2009070100  1   2.34    -0.79   2.47    108.68
2009070100  2   2.18    -0.99   2.4     114.31
2009070100  3   2.2     -1.21   2.51    118.71
............
2009070100  47  2.3     -2.18   3.17    133.5
2009070100  48  1.93    -1.87   2.69    134.12
2009070112  1   2.77    -0.65   2.85    103.17 
```

…………

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:17:31.640

我确信@DrewSteen 关于将 lubridate 包加载到搜索路径的评论是正确的。

我认为您的函数会出现问题，因为`apply`会强制转换为矩阵并返回不正确的类型（需要更多强制）

更改您的函数以将日期时间和小时数据作为单独的参数应该会有所帮助。

```
library(lubridate)
f <- function(date, hours){ymd_h(date) + hours(hours)}

result <- with(wind.new, f(as.character(date), hors)) 
```

`ymd_h`会很慢，因为它必须猜测日期/时间的格式。

# python - 如何在 scikit-learn 的 SVM 中使用非整数字符串标签？Python

> ID：12946373
> 
> 赞同：6
> 
> 时间：2012-10-18T02:53:31.907
> 
> 标签：python, nlp, svm, scikit-learn, pos-tagger

Scikit-learn 有相当用户友好的用于机器学习的 python 模块。

我正在尝试为自然语言处理 (NLP) 训练 SVM 标记器，其中我的标签和输入数据是单词和注释。例如词性标记，而不是使用双/整数数据作为输入元组`[[1,2], [2,0]]`，我的元组看起来像这样`[['word','NOUN'], ['young', 'adjective']]`

谁能举例说明我如何将 SVM 与字符串元组一起使用？此处给出的教程/文档适用于整数/双精度输入。[http://scikit-learn.org/stable/modules/svm.html](http://scikit-learn.org/stable/modules/svm.html)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T08:46:52.137

大多数机器学习算法处理作为浮点向量的输入样本，使得一对样本之间的**小（通常是欧几里德）距离****意味着**这两个样本在与手头问题相关的方式上是**相似的。**

机器学习从业者有责任找到一组好的浮点特征进行编码。**这种编码是特定于领域的**，因此没有通用的方法可以从适用于所有应用程序领域（各种 NLP 任务、计算机视觉、事务日志分析......）的原始数据构建表示。这部分机器学习建模工作称为**特征提取**。当涉及大量人工工作时，这通常被称为**特征工程**。

现在，对于您的特定问题，可以使用scikit-learn的[DictVectorizer 特征提取帮助器类](http://scikit-learn.org/dev/modules/feature_extraction.html#loading-features-from-dicts)对句子中感兴趣的单词周围的单词窗口的 POS 标记（例如，用于命名实体检测等序列标记）进行适当编码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T03:03:12.577

这与其说是 scikit 或 python 问题，不如说是 SVM 的一个普遍问题。

SVM 中的数据实例必须表示为各种***标量***的向量，通常是实数。因此，分类属性必须首先映射到一些数值，然后才能包含在 SVM 中。

一些分类属性更自然/更符合逻辑地映射到某种尺度（一些松散的“度量”）。例如，具有 ('no rush'、'standard delivery'、'Urgent' 和 'Most Urgent') 值的 Priority 字段的 (1, 2, 3, 5) 映射可能是有意义的。另一个示例可能是颜色可以映射到 3 个维度，每个维度对应其红色、绿色、蓝色分量等。
其他属性不具有允许任何甚至近似逻辑映射到比例的语义；然后必须在 SVM 的一个（或可能几个）维度上为这些属性的各种值分配任意数值。可以理解，如果 SVM 具有许多这些任意的“非度量”维度，则它在正确分类项目方面的效率可能会降低，因为 SVM 工作中隐含的距离计算和聚类逻辑在语义上相关性较低。

这一观察结果并不意味着当项目包含非数字或非“度量”维度时根本不能使用 SVM，但它肯定提醒我们，特征选择和特征映射通常是分类器特别是 SVM 的非常敏感的参数.

在 POS 标记的特殊情况下……恐怕我现在很难理解要使用标记语料库的哪些属性以及如何将这些属性映射到数值。我知道[***SVMTool***](http://www.lsi.upc.edu/~nlp/SVMTool/)可以使用 SVM 生成非常有效的 POS 标记器，并且还有几篇学术论文描述了也基于 SVM 的标记器。但是我更熟悉其他标记方法（例如使用 HMM 或最大熵。）

# c# - 我应该如何在这个对象的 AddOrUpdate() 中实现 Func：ConcurrentDictionary >

> ID：12946377
> 
> 赞同：1
> 
> 时间：2012-10-18T02:54:07.633
> 
> 标签：c#, multithreading, concurrency, concurrentdictionary

如果该值是一个集合，如何`AddorUpdate`在 ConcurrentDictionary 中实现以便我可以正确更新该值？

我担心的是，由于 TValue 是一种引用类型，我可能会遇到在竞争条件下多次调用 TValue 的情况。我自己会对此进行测试，但我的语法错误，所以我无法继续进行。

我必须改变什么才能使这项工作？

```
 public class TrustList :  ConcurrentDictionary<int, List<TrustRelationshipDetail>>
    {
        public void AddOrUpdateTrustDetail(TrustRelationshipDetail detail)
        {
            List<TrustRelationshipDetail> detailList = new List<TrustRelationshipDetail>();
            detailList.Add(detail);

            this.AddOrUpdate(detail.HierarchyDepth, detailList, (key, oldValue) =>   
            oldValue.Add(detail)  // <--- Compiler doesn't like this, and I think this may cause duplicates if this were to be called...
           );
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:56:59.573

的目的`AddOrUpdate()`是用新值*替换*任何现有值。

由于您只需要*获取*现有值（以便随后对其进行修改），因此您需要`GetOrAdd()`：

```
this.GetOrAdd(detail.HierarchyDepth, new ConcurrentBag<TrustRelationshipDetail>())
        .Add(detail); 
```

# android - finditem() 找不到菜单，卡在 NullPointerException

> ID：12946379
> 
> 赞同：4
> 
> 时间：2012-10-18T02:54:30.473
> 
> 标签：android, android-layout, android-menu

我在更改选项菜单上的某些属性时卡住了`onCreateOptionsMenu()`。似乎 findItem() 返回 null，即使我很确定对菜单项的引用是正确的。我的代码如下所示：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_profile, menu);
        MenuItem leftie = menu.findItem(R.id.menu_profile);
        leftie.setIcon(R.drawable.ic_menu_mapmode);
        leftie.setTitle(R.string.back_map);
        leftie.setIntent(authIntent);

        return true;
    } 
```

我真的不知道那里有什么问题。提前致谢 ：）

编辑：我忘了包括实际问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T04:57:36.070

您可以在 XML 中提及该菜单项的标题和图像。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/newsItem"
    android:icon="@drawable/news_tab"
    android:title="@string/menu_news"/>

<item
    android:id="@+id/dryiceItem"
    android:icon="@drawable/dryice_tab"
    android:title="@string/menu_dryice"/>

</menu> 
```

并且可以像这样在 menuItem 上设置意图：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    case R.id.newsItem:
        // start News activity
        //write your intent here.
        break;
    case R.id.dryiceItem:
                   //start another activity
                   //write your intent here.
         break; 
            }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:54:51.260

我想到了。引用`menu`索引的字符串`R.menu.activity_profile`是错误的路径，因此它正在膨胀一个空菜单。我将字符串更改为`R.menu.layout`，现在它按预期工作。

```
System.out.println(menu.size());
MenuItem leftie = menu.findItem(R.id.menu_profile);
System.out.println(leftie);
leftie.setIcon(R.drawable.ic_menu_mapmode);
leftie.setTitle(R.string.back_map);
leftie.setIntent(authIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T14:24:16.327

当我的子菜单未正确嵌套在项目标签中时，我也发生过这种情况，例如

```
<item />
    <menu>
    </menu> 
```

或者

```
 <item >
        <menu>
        </menu>
   <item> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T05:32:01.853

使用 MenuItem 对 findItem 语句进行类型转换

```
 MenuItem leftie = (MenuItem) menu.findItem(R.id.menu_profile); 
```

# node.js - 用于将更新推送到某些具有 HTTP 1.1 堆栈的微控制器的 Node.js 选项

> ID：12946381
> 
> 赞同：0
> 
> 时间：2012-10-18T02:55:07.273
> 
> 标签：node.js, long-polling, polling

标题很好地说明了这一点。我需要微控制器保持连接到服务器以在几秒钟内接收更新，但我不太确定如何做到这一点。在这种情况下，客户端至少可以说是非常有限的，似乎我为轮询或 socket.io 之类的解决方案找到的所有解决方案都需要向客户端删除一些重要的 JavaScript。如果我不得不在微型计算机上用 C 语言重新实现其中一个库，我绝对可以使用一些指针以最精简的方式来处理它。

我不能只用不断的请求来冲击服务器，因为这将增加到相当数量的连接微控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:56:58.007

只需使用普通的长轮询：每个控制器最初都会发出一个 HTTP 请求并等待响应，这会在有更新时发生。一旦控制器收到响应，它就会发出另一个请求。起泡，冲洗，重复。这不会影响服务器，因为每个控制器每次更新仅发出一个请求，并且节点的体系结构使得您可以有大量请求待处理，因为您没有为每个活动连接创建新线程或进程。

# windows - Windows：从 cmd/.bat 文件安装字体

> ID：12946384
> 
> 赞同：8
> 
> 时间：2012-10-18T02:55:28.523
> 
> 标签：windows, batch-file, fonts, installation, cmd

有谁知道如何通过 Windows 上的命令提示符安装字体文件（.ttf、.TTF、.otf、.OTF 等）？

据我了解，它需要将文本文件移动到正确的文件夹，然后还创建一个我认为的注册表值？但我还没有找到一个确认工作的。

注意：我使用的是 Windows 8，因此可能会有所作为。

另一个注意事项：我想做的是批量安装我从 MKV 文件中提取的字体。（所以这将是一个较大的 .bat 文件的一部分的函数，如果需要，我可以发布代码）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T23:31:02.267

您需要使用 PowerShell 或 VB 脚本。他们基本上重复使用在 Windows 资源管理器中执行相同操作的 shell 组件，并且不需要重新启动。

有关从 Windows 8.1 或更早版本的目录安装所有字体的 PowerShell 脚本，请参见此处： [https ://social.technet.microsoft.com/Forums/fr-FR/winserverpowershell/thread/fcc98ba5-6ce4-466b-a927-bb2cc3851b59](https://social.technet.microsoft.com/Forums/fr-FR/winserverpowershell/thread/fcc98ba5-6ce4-466b-a927-bb2cc3851b59)

这是 Windows 10 (Windows Server 2019) 的类似脚本，它也更新了 Windows 注册表： [https ://social.technet.microsoft.com/Forums/en-US/0c94dcf5-b89d-42e5-a499-06313f46f88b/can-不再安装-fonts-via-script-in-windows-10-1809?forum=win10itprogeneral](https://social.technet.microsoft.com/Forums/en-US/0c94dcf5-b89d-42e5-a499-06313f46f88b/can-no-longer-install-fonts-via-script-in-windows-10-1809?forum=win10itprogeneral)

此外，您需要在管理员模式下运行脚本。因此，如果 PowerShell 脚本是 InstallFonts.ps1，您的批处理文件需要如下所示：

```
powershell -command "Set-ExecutionPolicy Unrestricted" 2>> err.out  
powershell .\InstallFonts.ps1 2>> err.out 
```

任何 powershell 错误都将出现在与脚本相同的文件夹中的“err.out”中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-30T14:47:44.743

也许这也是需要的：

```
reg add "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Fonts" /v "FontName (TrueType)" /t REG_SZ /d FontName.ttf /f 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-21T19:42:59.690

当您安装字体时，它所做的只是将 .ttf 文件复制到`%systemroot%\fonts`并在`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Fonts`. 这可以使用批处理文件自动执行，如下所示

```
Rem fontinst.bat

copy akbar.ttf %systemroot%\fonts

regedit /s font.reg 
```

font.reg 将包含以下内容：

```
REGEDIT4

\[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Fonts\]

"Akbar Plain (TrueType)"="akbar.ttf" 
```

资料来源：m.windowsitpro.com

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T08:31:21.880

您是否尝试将它们复制到字体的文件夹中？

```
copy font.ttf %windir%\Fonts 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-08T05:06:32.623

如果你是 python 粉丝，下面的脚本可以完成这项工作。此脚本生成用于字体安装的 vbscript。在所有子文件夹中搜索 ttf 字体并安装它。您不需要移动任何字体文件。

```
 import os
    import subprocess
    import time

    # vb script template
    _TEMPL  = """ 
    Set objShell = CreateObject("Shell.Application")
    Set objFolder = objShell.Namespace("%s")
    Set objFolderItem = objFolder.ParseName("%s")
    objFolderItem.InvokeVerb("Install")
    """

    vbspath = os.path.join(os.getcwd(), 'fontinst.vbs')

    for directory, dirnames, filenames in os.walk(os.getcwd()):
        for filename in filenames:
            fpath = os.path.join(directory, filename)

            if fpath[-4:] == ".ttf": # modify this line for including multiple extension
                with open(vbspath, 'w') as _f:
                    _f.write(_TEMPL%(directory, filename))
                subprocess.call(['cscript.exe', vbspath])
                time.sleep(3) # can omit this

     os.remove(vbspath)  # clean 
```

在根文件夹上运行这个 python 脚本

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-09T12:04:33.950

于是我和一位同事找到了一个不需要管理员权限，并且不显示任何提示的 powershell 解决方案。您可以使用字体文件的名称来安装*和*卸载。这使得它对脚本特别有用。

安装：

```
# Install-Font.ps1
param($file)

$signature = @'
[DllImport("gdi32.dll")]
 public static extern int AddFontResource(string lpszFilename);
'@

$type = Add-Type -MemberDefinition $signature `
    -Name FontUtils -Namespace AddFontResource `
    -Using System.Text -PassThru

$type::AddFontResource($file) 
```

卸载：

```
# Uninstall-Font.ps1
param($file)

$signature = @'
[DllImport("gdi32.dll")]
public static extern bool RemoveFontResource(string lpszFilename);
'@

$type = Add-Type -MemberDefinition $signature `
    -Name FontUtils -Namespace RemoveFontResource `
    -Using System.Text -PassThru

$type::RemoveFontResource($file) 
```

您可以从 cmd 或 powershell 中像这样使用它们：

```
> powershell -executionpolicy bypass -File .\Install-Font.ps1 .\myfonts\playfair-display-v22-latin-regular.ttf
> powershell -executionpolicy bypass -File .\Uninstall-Font.ps1 .\myfonts\playfair-display-v22-latin-regular.ttf 
```

该解决方案基于[https://www.leeholmes.com/powershell-pinvoke-walkthrough/](https://www.leeholmes.com/powershell-pinvoke-walkthrough/)并使用本机 Win32 函数 ( `gdi32.dll`)。[https://docs.microsoft.com/en-us/windows/win32/api/wingdi/nf-wingdi-addfontresourcew](https://docs.microsoft.com/en-us/windows/win32/api/wingdi/nf-wingdi-addfontresourcew)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-05T15:36:35.470

批处理文件示例。它在当前目录中工作。

```
IF  "%*" NEQ "" SET FONT=%*  (

FOR /F %%i in ('dir /b "%FONT%*.*tf"') DO CALL :DEST %%i

) else (

EXIT

)

:DEST

SET FONTFILE=%~n1%~x1
SET FONTNAME=%~n1

IF "%~x1"==".ttf" SET FONTTYPE=TrueType
IF "%~x1"==".otf" SET FONTTYPE=OpenType

ECHO FILE = %FONTFILE%
ECHO NAME = %FONTNAME:-= %
ECHO TYPE = %FONTTYPE%

fontview  %~dp0%FONTFILE%  

GOTO :EXIT 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-11T22:54:40.683

我以这种方式解决了任务：

假设您必须递归地在具有以下结构的子文件夹中安装许多字体：

```
\root_folder
    Install_fonts.cmd
    \font_folder_1
        font_1.ttf
        font_2.otf
    \font_folder_2
        font_3.ttf
        font_4.otf
    \font_folder_3
        font_5.ttf
        font_6.otf 
```

为此，我在我的**桌面上下载了***[FontReg.exe](http://code.kliu.org/misc/fontreg/)*工具（如果它位于其他位置，则更改文件中的）并在如下的批处理脚本中使用它，位于（在文件中更改其名称，如果不同）：**`path``Install_fonts.cmd``Install_fonts.cmd``root_folder``Install_fonts.cmd`**

 **```
@echo off
set back=%cd%
for /d %%i in (%USERPROFILE%\Desktop\root_folder\*) do (
cd "%%i"
echo current directory:
cd
start /wait %USERPROFILE%\Desktop\fontreg-2.1.3-redist\bin.x86-64\FontReg.exe /move
timeout /t 1 /nobreak >nul
)
cd %back%
echo Process completed!
pause 
```

因此，您必须以管理员身份运行`Install_fonts.cmd`，**以**`root_folder`自动化字体安装过程。

 **干杯****

# c - 这个宏对于复制字符串是否安全？

> ID：12946385
> 
> 赞同：1
> 
> 时间：2012-10-18T02:55:35.607
> 
> 标签：c

这个宏是安全的还是我应该确保 alloca 永远不会返回 NULL？

```
#define DO_COPY(x) strcpy(alloca(strlen((x)) + 1), x) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:21:02.613

如果字符串是用户控制的，我会说 alloca 不安全。在许多编译器中实现 alloca 的方式，它不会对它从堆栈指针中减去（或者如果你的堆栈以​​这种方式增长，则添加到）堆栈指针的量进行任何类型的健全性检查。即使堆栈周围有大的红色区域，使 alloca():ed 字符串指向堆栈外部的方式也相对容易。

特别是在线程环境中，线程堆栈可能非常小并且彼此靠近。

在 linux 机器上我可以测试它需要一个 10MB 的字符串才能开始在其他一些线程堆栈上涂鸦。在 MacOS 上 512kB 似乎就足够了。

这是一个快速的技巧，看看你最终能有多接近（请注意，如果堆栈分配是使用 OpenBSD 中的一些随机分配器完成的，或者其他一些重视分配器安全性的系统，这并不能真正告诉你太多）。

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>
#include <stdint.h>

void *
x(void *v)
{
    int x;

    return &x;
}

int
main(int argc, char **argv)
{
    pthread_t ta, tb;
    char *va, *vb;

    pthread_create(&ta, NULL, x, NULL);
    pthread_create(&tb, NULL, x, NULL);

    pthread_join(ta, (void **)&va);
    pthread_join(tb, (void **)&vb);

    printf("diff: %d\n", abs((intptr_t)vb-(intptr_t)va));

    return 0;
} 
```

这是 strcpy(alloca(strlen(s) + 1), s) 被编译为：

```
 movq    %rbx, %rdi
    call    _strlen
    addq    $31, %rax
    andq    $-16, %rax
    subq    %rax, %rsp
    movq    %rsp, %rdi
    movq    %rbx, %rsi
    call    _strcpy 
```

请注意，在从堆栈指针中减去 strlen（在 %rax 中）的返回值之前，除了快速对齐之外，没有任何完整性检查。

# webkit - 在 webkit-gtk 中移动插入符号

> ID：12946386
> 
> 赞同：1
> 
> 时间：2012-10-18T02:55:40.853
> 
> 标签：webkit, gtk, caret

在 WebkitWebView 上设置“启用插入符号浏览”选项后，是否可以在屏幕上显示的文本行中以编程方式移动插入符号？例如，移动到视线的末端而不是移动到 DOM 节点的末端。

此行为可通过键盘导航访问（例如，End 键转到视线的末尾），但在 API 中找不到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:02:21.363

也许尝试发出[`move-cursor`](http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html#WebKitWebView-move-cursor)信号？

```
gboolean result;
g_signal_emit_by_name(view, "move-cursor", GTK_MOVEMENT_DISPLAY_LINE_ENDS, +1, &result); 
```

我很好奇这是否有效。

# java - Java 中的 UTF-8 和 UTF-16

> ID：12946388
> 
> 赞同：6
> 
> 时间：2012-10-18T02:55:41.293
> 
> 标签：java, string, encoding, utf-8

我真的希望下面的字节数据应该显示不同，但实际上它们是相同的，根据 wiki [http://en.wikipedia.org/wiki/UTF-8#Examples](http://en.wikipedia.org/wiki/UTF-8#Examples)，字节中的编码看起来不同，但为什么Java把它们打印出来一样吗？

```
 String a = "€";
    byte[] utf16 = a.getBytes(); //Java default UTF-16
    byte[] utf8 = null;

    try {
        utf8 = a.getBytes("UTF-8");
    } catch (UnsupportedEncodingException e) {
        throw new RuntimeException(e);
    }

    for (int i = 0 ; i < utf16.length ; i ++){
        System.out.println("utf16 = " + utf16[i]);
    }

    for (int i = 0 ; i < utf8.length ; i ++){
        System.out.println("utf8 = " + utf8[i]);
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T03:00:08.530

尽管 Java 在内部将字符保存为 UTF-16，但当您使用 转换为字节时`String.getBytes()`，每个字符都会使用默认平台编码进行转换，该编码可能类似于[windows-1252](http://en.wikipedia.org/wiki/Windows-1252)。我得到的结果是：

```
utf16 = -30
utf16 = -126
utf16 = -84
utf8 = -30
utf8 = -126
utf8 = -84 
```

这表明我的系统上的默认编码是“UTF-8”。

另请注意， String.getBytes() 的文档有以下注释：`The behavior of this method when this string cannot be encoded in the default charset is unspecified.`

不过，通常情况下，如果您始终像使用`a.getBytes("UTF-8")`

此外，可能导致混淆的另一件事是直接在源文件中包含 Unicode 字符：`String a = "€";`. 该欧元符号必须经过编码才能在文件中存储为一个或多个字节。当 Java 编译您的程序时，它会看到这些字节并将它们解码回欧元符号。你希望。您必须确保将欧元符号保存到文件中的软件（记事本、eclipse 等）对其进行编码的方式与 Java 在将其读回时所期望的方式相同。UTF-8 变得越来越流行，但它并不通用而且很多编辑器不会用 UTF-8 编写文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T03:39:25.897

> 一个好奇心，我想知道 JVM 是如何知道原始默认字符集的......

JVM 用来确定初始默认字符集的机制是特定于平台的。在 UNIX/类 UNIX 系统上，它由 LANG 和 LC_* 环境变量决定；见`man locale`。

* * *

> Ermmm .. 此命令用于检查特定操作系统中的默认字符集是什么？

那是对的。但是我告诉你这是因为手册条目描述**了**默认编码是如何由环境变量确定的。

回想起来，这可能不是您最初评论的意思，但这就是指定平台默认编码的方式。（并且单个文件的“默认字符集”的概念是没有意义的；见下文。）

> 如果假设我有 10 个 Java 源文件，其中一半保存为 UTF-8，其余保存为 UTF-16，编译后，我将它们（类文件）移动到另一个操作系统平台，现在 JVM 如何知道它们的默认编码? Java 类文件中是否会包含默认字符集信息？

这是一组相当混乱的问题：

1.  文本文件没有默认字符集。它有一个字符集/编码。

2.  非文本文件根本没有字符编码。这个概念毫无意义。

3.  没有 100% 可靠的方法来确定文本文件的字符编码是什么。

4.  如果您不告诉 java 编译器文件的编码是什么，它将假定它是平台的默认编码。编译器不会尝试第二次猜测您。如果您的编码不正确，编译器可能会也可能不会注意到您的错误。

5.  字节码（“.class”）文件是二进制文件（见 2）。

6.  当字符和字符串文字被编译成“.class”文件时，它们现在以不受平台默认编码或您可以影响的任何其他方式影响的方式表示。

7.  如果编译时源文件编码出错，则无法在“.class”文件级别进行修复。您唯一的选择是返回并重新编译类，告诉 Java 编译器正确的源文件编码。

8.  *“如果假设我有 10 个 Java 源文件，其中一半保存为 UTF-8，其余保存为 UTF-16”*。
    只是不要这样做！

    *   不要将源文件保存在混合编码中。你会把自己逼疯的。
    *   我根本没有充分的理由以 UTF-16 存储文件......

* * *

> 所以，我很困惑，虽然人们说“平台相关”，但它与源文件有关吗？

平台相关意味着它可能依赖于操作系统、JVM 供应商和版本、硬件等。

它不一定与源文件有关。（任何给定源文件的编码可能与默认字符编码不同。）

> 如果不是，我该如何解释上述现象？无论如何，上面的困惑将我的问题扩展到“所以，在我将源文件编译成类文件后会发生什么，因为类文件可能不包含编码信息，所以现在结果真的依赖于‘平台’而不是源文件了？”

特定于平台的机制（例如环境变量）决定了 java 编译器将什么视为默认字符集。除非您覆盖它（例如，通过在命令行上为 java 编译器提供选项），否则 Java 编译器将使用它作为源文件字符集。但是，这可能不是源文件的正确字符编码；例如，如果您在具有不同默认字符集的不同机器上创建它们。如果 java 编译器使用错误的字符集来解码你的源文件，很可能会将不正确的字符代码放入“.class”文件中。

“.class”文件不依赖于平台。但是，如果因为您没有告诉 Java 编译器源文件的正确编码而导致它们被错误地创建，“.class”文件将包含错误的字符。

* * *

> 为什么你的意思是：“单个文件的“默认字符集”的概念是没有意义的”？

我说它是因为它是真的！

默认字符集是指未指定时使用的字符集。

> 但是我们可以控制我们想要文本文件的存储方式吗？即使使用记事本，也可以在编码之间进行选择。

那是对的。那就是你告诉记事本该文件使用什么字符集。如果您不告诉它，记事本将使用默认字符集来写入文件。

^(记事本中有一点黑魔法来猜测读取文本文件时的字符编码是什么。基本上，它查看文件的前几个字节以查看它是否以 UTF-16 字节顺序标记开头。如果它看到一个，它可以启发式地区分 UTF-16、UTF-8（由 Microscoft 产品生成）和“其他”。但它无法区分不同的“其他”字符编码，并且它不会将不以 BOM 标记开头的文件识别为 UTF-8。（UTF-8 文件上的 BOM 是 Microsoft 特定的约定......如果 Java 应用程序读取文件并且不知道跳过 BOM 字符，则会导致问题。）)

无论如何，问题不在于编写源文件。它们发生在 Java 编译器使用不正确的字符编码读取源文件时。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T03:03:49.230

你正在处理一个糟糕的假设。该`getBytes()`方法不使用 UTF-16 编码。它使用平台默认编码。

您可以使用方法查询它`java.nio.charset.Charset.defaultCharset()`。就我而言，它是 UTF-8，对你来说也应该是一样的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T03:00:34.053

默认是`UTF-8`或者`ISO-8859-1`如果未找到特定于平台的编码。不是`UTF-16`。所以最终你只做字节转换`UTF-8`。这就是为什么你的`byte[]`比赛你可以找到默认编码使用

```
 System.out.println(Charset.defaultCharset().name()); 
```

# oracle - 带有光标的 PL SQL 嵌套 IF ELSE

> ID：12946389
> 
> 赞同：0
> 
> 时间：2012-10-18T02:55:46.227
> 
> 标签：oracle, for-loop, plsql, cursor

我有三个游标声明为 CUR_AD1、CUR_AD1_C、CUR_AD_2。它们所包含的只是来自 3 个运行良好的选择语句的结果。

后来我有以下陈述：

```
BEGIN

    FOR AD1_REC IN CUR_AD1 LOOP

      V_ORG_NAME := AD1_REC.ADDRESS_LINE1;

    IF V_ORG_NAME = AD1_REC.ADDRESS_LINE1 THEN
        INSERT INTO DSOPI_PERSON_ADDR_RULE 
        (CCTR_PERSON_ADDRESS_ID, CCTR_PERSON_ID, SRC_ADDRESS_LINE1, SRC_ADDRESS_LINE2, SRC_ADDRESS_LINE3, SRC_ADDRESS_LINE4, 
        ORG_NAME, DEPT_NAME, TGT_ADDRESS_LINE1, TGT_ADDRESS_LINE2, TGT_ADDRESS_LINE3, TGT_ADDRESS_LINE4, 
        STATE, CITY, COUNTRY_NAME, ZIP_CODE, EXTRACT_DATE) 
        VALUES
        (AD1_REC.CCTR_PERSON_ADDRESS_ID, AD1_REC.CCTR_PERSON_ID, AD1_REC.ADDRESS_LINE1, AD1_REC.ADDRESS_LINE2, AD1_REC.ADDRESS_LINE3, AD1_REC.ADDRESS_LINE4, 
         V_ORG_NAME, '', '', AD1_REC.ADDRESS_LINE2, AD1_REC.ADDRESS_LINE3, AD1_REC.ADDRESS_LINE4, 
         AD1_REC.STATE, AD1_REC.CITY, AD1_REC.COUNTRY_NAME, AD1_REC.ZIP_CODE, SYSDATE);

    ELSIF V_ORG_NAME = AD1_REC.ADDRESS_LINE2 THEN
      FOR AD2_REC IN CUR_AD2 LOOP

        INSERT INTO DSOPI_PERSON_ADDR_RULE 
        (CCTR_PERSON_ADDRESS_ID, CCTR_PERSON_ID, SRC_ADDRESS_LINE1, SRC_ADDRESS_LINE2, SRC_ADDRESS_LINE3, SRC_ADDRESS_LINE4, 
        ORG_NAME, DEPT_NAME, TGT_ADDRESS_LINE1, TGT_ADDRESS_LINE2, TGT_ADDRESS_LINE3, TGT_ADDRESS_LINE4,
        STATE, CITY, COUNTRY_NAME, ZIP_CODE, EXTRACT_DATE) 
        VALUES
        (AD2_REC.CCTR_PERSON_ADDRESS_ID, AD2_REC.CCTR_PERSON_ID, AD2_REC.ADDRESS_LINE1, AD2_REC.ADDRESS_LINE2, AD2_REC.ADDRESS_LINE3, AD2_REC.ADDRESS_LINE4, 
         AD2_REC.ADDRESS_LINE2, NULL, AD2_REC.TGT_ADDRESS_LINE1, NULL, AD2_REC.ADDRESS_LINE3, AD2_REC.ADDRESS_LINE4, 
         AD2_REC.STATE, AD2_REC.CITY, AD2_REC.COUNTRY_NAME, AD2_REC.ZIP_CODE, SYSDATE);
         END LOOP;
         END IF;

END LOOP;                
EXCEPTION WHEN OTHERS THEN
DBMS_OUTPUT.PUT_LINE('ERROR' || SQLERRM);
RAISE;    
END; 
```

当我编译正文时，我不断收到以下错误：

PL/SQL：忽略 SQL 语句 PLS-00302：必须声明组件“ZIP_CODE” PL/SQL：ORA-00984：此处不允许列

桌子没有任何问题。我认为这与我如何放置控制语句有关。非常感谢任何帮助。

表 DSOPI_PERSON_ADDR_RULE 的 DDL

```
 CREATE TABLE "CALSEED_OWNER"."DSOPI_PERSON_ADDR_RULE" 
   (    "CCTR_PERSON_ADDRESS_ID" NUMBER(12,0), 
    "CCTR_PERSON_ID" NUMBER(12,0), 
    "SRC_ADDRESS_LINE1" VARCHAR2(100 BYTE), 
    "SRC_ADDRESS_LINE2" VARCHAR2(100 BYTE), 
    "SRC_ADDRESS_LINE3" VARCHAR2(100 BYTE), 
    "SRC_ADDRESS_LINE4" VARCHAR2(100 BYTE), 
    "ORG_NAME" VARCHAR2(100 BYTE), 
    "DEPT_NAME" VARCHAR2(100 BYTE), 
    "TGT_ADDRESS_LINE1" VARCHAR2(100 BYTE), 
    "TGT_ADDRESS_LINE2" VARCHAR2(100 BYTE), 
    "TGT_ADDRESS_LINE3" VARCHAR2(100 BYTE), 
    "TGT_ADDRESS_LINE4" VARCHAR2(100 BYTE), 
    "STATE" VARCHAR2(100 BYTE), 
    "CITY" VARCHAR2(100 BYTE), 
    "COUNTRY_NAME" VARCHAR2(100 BYTE), 
    "ZIP_CODE" VARCHAR2(100 BYTE), 
    "EXTRACT_DATE" DATE, 
    "STREET" VARCHAR2(100 BYTE), 
    "STREET_CONTD" VARCHAR2(100 BYTE)

CURSOR CUR_AD2 IS         
        SELECT CCTR_PERSON_ADDRESS_ID, 'AL2' AL,ADDRESS_LINE2 
        FROM STG_RT2_PERSON_ADDRESS WHERE UPPER(ADDRESS_LINE2) IN 
        ( SELECT UPPER(ORG_NAME) FROM STG_RT2_ORGANIZATION
        WHERE NOT REGEXP_LIKE(ORG_NAME, '[0-9]') 
        AND NOT (LOWER(ORG_NAME) LIKE 'unknown' OR LOWER(ORG_NAME) LIKE 'no address%'
        OR ORG_NAME ='-' OR ORG_NAME=' ')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:08:23.993

出于调试目的，您可以使用

```
DBMS_UTILITY.format_error_backtrace; 
```

确保游标中的所有别名（不仅是表）与您尝试访问的列匹配，例如

```
FOR x IN SELECT zip_code zipCode FROM myTable LOOP
    dbms_output.put_line(x.zip_Code)
END LOOP; 
```

该示例中断是因为 x 包含 zipCode 而不是 zip_code。

使用您提供的信息，我们无法提供任何进一步的帮助，发布您的表的描述以及您的游标声明或制作可编译的示例。

这很有用[http://sqlfiddle.com/](http://sqlfiddle.com/)

**编辑**

问题是你的游标声明

```
 SELECT
    CCTR_PERSON_ADDRESS_ID,
    'AL2' AL,
    ADDRESS_LINE2,
    ZIP_CODE -- ADD THIS FOR THE ZIP CODE, YOU NEED TO ADD ALL THE OTHER COLUMNS ASWELL...
 FROM
    STG_RT2_PERSON_ADDRESS
  WHERE
    UPPER(ADDRESS_LINE2) IN
    (
      SELECT
        UPPER(ORG_NAME)
      FROM
        STG_RT2_ORGANIZATION
      WHERE
        NOT REGEXP_LIKE(ORG_NAME, '[0-9]')
      AND NOT
        (
          LOWER(ORG_NAME) LIKE 'unknown'
        OR LOWER(ORG_NAME) LIKE 'no address%'
        OR ORG_NAME ='-'
        OR ORG_NAME =' '
        )
    ); 
```

每个 CUR_AD_2 都是您的结果集上的一条记录，因此它具有相同数量的列和名称，在您的查询中，您只有 3 列，但您试图访问其中很多（如邮政编码）不在光标; 确保添加 ZIP_CODE 和所需的所有其他列。或者只是从 INSERT 语句中删除它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:12:46.393

请检查表中的 zip_code 拼写 matchecs 列名

# c - 系统崩溃前如何知道内存是否失效？

> ID：12946392
> 
> 赞同：0
> 
> 时间：2012-10-18T02:56:15.253
> 
> 标签：c, linux, segmentation-fault

众所周知，对无效内存的访问会导致段错误，从而导致系统崩溃。我希望在系统崩溃之前知道内存是否无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:01:12.240

这是特定于 Linux 的，但实现起来简单可靠。

打开`/proc/self/maps`. 它是一个文本伪文件，列出了当前进程的所有内存映射。它在[man 5 proc](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)中有描述；见`/proc/[pid]/maps`章节。线条看起来像

```
7fb5cb179000-7fb5cb32e000 r-xp 00000000 fc:00 14651     /lib/x86_64-linux-gnu/libc-2.15.so 
```

但是您只需要将十六进制的起始地址解析到破折号`-`，将十六进制的结束地址（不包括；它是地图外的第一个地址）解析到空格`，以及一些模式字母到下一个空格`。``

 ``模式字母`r`表示映射是可读、`w`可写、`x`可执行、`s`共享和`p`私有的。（将来可能会有其他字母，所以最好忽略除那些和空格之外的所有内容`。）`

 `因为`long`它是 C 中最大的标准整数类型，所以应该使用`unsigned long`地址（包括解析它们时）。您还可以使用 将任何指针转换为地址`(unsigned long)pointer`。使用`int`just 不适用于大多数 64 位 Linux 架构，因为它往往是 32 位的，因此无法表示所有指针。

如果指针地址在所有这些映射之外，它肯定是无效的：取消引用指针会给你一个分段错误。

如果指针在上述映射之一内，映射的模式描述了哪些操作是有效的，以及它是什么类型的映射。例如，如果您知道指针旨在指向数据，那么您就知道目标映射不应该是可执行的。

在多线程程序中，您会想尝试一次将整个文件读入内存，这样您就会看到内存映射的一致快照，然后使用字符串操作解析数据。如果您发现您没有阅读完整的文件，只需重新阅读该文件。您应该使用 from 的低级 I/O `unistd.h`（而不是使用`stdio.h`or的函数`mman.h`）来执行此操作，以避免任何缓存和抽象。事实上，我也建议将此过程用于单线程应用程序；这是一种稳健的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:15:51.490

简短的回答是没有可移植、可靠的方法来做到这一点。

这是 100% 正确的，而且应该如此。您要问的是“我怎样才能让我的程序检测到我的程序中有错误？” - 获得无效指针的唯一方法是如果你有一个错误（或者只是简单的写得很糟糕的代码）。

使用 valgrind 或类似工具来分析代码并修复任何导致错误内存访问的错误的想法是最好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T03:09:29.733

有趣的话题。请看这里的讨论：[http ://www.cplusplus.com/forum/beginner/49550/](http://www.cplusplus.com/forum/beginner/49550/)

微软为此提供了一个函数：IsBadReadPtr ( [http://msdn.microsoft.com/en-us/library/aa366781(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa366781(VS.85).aspx) )

对于 Linux，我找不到类似的东西。但是，您可以在 valgrind ( [http://valgrind.org/](http://valgrind.org/) ) 中运行程序来检测无效的指针引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T03:37:15.687

在现代多用户操作系统上，无效的内存访问不会使系统崩溃——它只会使您的程序崩溃，使您的访问无效。```

# c# - Mono/Linux 和 wininet.dll

> ID：12946393
> 
> 赞同：1
> 
> 时间：2012-10-18T02:56:19.237
> 
> 标签：c#, mono, wininet

我有一个命令行 C# 程序，可以使用 Visual C# 2010 和 Windows 7 编译和运行良好。它也可以在 Linux/Mono (2.10) 上编译和启动，但然后就在那里。（该程序使用第 3 方 DLL 从远程服务器获取数据。）

在调试器中运行它，我看到它似乎在等待 DNS 查找。所以我对其进行了 DNS 查找，并粘贴了 IP 地址。但它仍然挂起，并且闯入调试器显示三个线程都坐在那里等待：

*   `System.Threading.Monitor.Wait` （超时设置为 -1）
*   `System.Threading.Thread.Sleep`
*   `System.Threading.WaitHandle.WaitOne`

我使用[MoMA](http://www.mono-project.com/MoMA)来分析 DLL。我不确定这有多准确，因为它与 Mono 2.8 匹配，而且我使用的是 2.10.8.1，但它说这`Socket.Dispose()`是一种缺失的方法。然后是 32 个 [MonoTodo] 项目，其中 30 个是 Type.op_Equality 或 Type.op_Inequality。另外两个是`CredentialCache.get_DefaultCredentials()`和`MemoryMappedFile.CreateOrOpen()`。

但引起我注意的是，在报告的底部，有两个条目`GetWindowsSocksProxy`，它们变成了`SingleServerConnection.InternetQueryOption`，而 P/Invoke 库是 wininet.dll。这可能有关系吗？

那么，有什么我可以做的吗？例如，我可以将该 DLL 从 Windows 机器复制到我的 linux 机器吗？如果是这样，我应该把它放在哪里？

PS我想知道连接问题。因此，我使用 快速测试了 Mono `WebClient`，效果很好。但一个有趣的区别是非工作脚本在它首先需要连接到某物的地方加载“/usr/lib/mono/gac/Mono.Posix/4.0.0.0__0738eb9f132ed756/Mono.Posix.dll [External]” . 但我的 WebClient 从来没有这样做过。

# iphone - 从相册中获取视频并将其保存到应用程序中的图像视图

> ID：12946395
> 
> 赞同：0
> 
> 时间：2012-10-18T02:56:29.943
> 
> 标签：iphone, ios, xcode, video, ios6

目前我正在开发一个应用程序，我想在其中获取相册保存的视频，然后显示选中

图像视图中的视频，然后将此视频发送到 Facebook。我成功打开相册

但现在我如何在应用程序的图像视图中保存选定的视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:06:40.573

我想你已经使用**UIImagePickerController**打开相册（mediaType 将是**kUTTypeMovie**）

使用下面的 UIImagePickerController 委托获取 videoUrl 及其缩略图

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {        

        NSURL *videoURL  = [info valueForKey:UIImagePickerControllerReferenceURL];
        UIImage *videoThumbnail = [info valueForKey:UIImagePickerControllerOriginalImage]; 
```

您可以保存 videoURL 并稍后使用[ALAsset_Class](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAsset_Class/Reference/Reference.html)检索视频，甚至可以将 url 设置为 moviePlayer。`[moviePlayer setContentURL:movieURL];`

可以使用 videoThumbnail 来处理 UiImages

最后，做一个**谷歌搜索****分享视频到 Facebook**。

# java - Java Swing - 如何创建自定义组件并自动调整父组件的大小

> ID：12946402
> 
> 赞同：0
> 
> 时间：2012-10-18T02:57:32.853
> 
> 标签：java, resize, components, shapes

我正在尝试构建一个自定义三角形组件，它具有与 JComponent 相同的功能（例如每个 JButton）。

该程序的 porpoise 将在鼠标单击时在鼠标所在的位置添加三角形，并通过突出显示形状的 bg 来处理鼠标悬停事件。

我让默认布局（或 null），因为在使用其他布局时，应用程序不会将三角形放置在我想要的位置......

现在我的主要问题是如何调整与表格大小成正比的三角形的大小？因此，如果我将框架尺寸减小 50%，所有组件也会降低该值。

另一个问题是 JComponent 需要一个矩形区域来处理事件，因为我已经看到没有办法解决这个问题，所以如果我尝试单击受影响的区域，它将忽略它，而不是在那里创建一个新的三角形。

还有一个问题是，有时当从底部移出三角形时，它仍然是绿色的。

谢谢！

这是SSCCE：

```
// TriangleCustom.java
package TriangleCustom;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.GeneralPath;
import java.awt.geom.Point2D;
import java.awt.geom.Rectangle2D;
import java.util.ArrayList;
import javax.swing.BorderFactory;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TriangleCustom {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }

    private static void createAndShowGUI() {
        JFrame f = new JFrame("Triangle");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(1200, 800);
        Panel p = new Panel();
        f.add(p);
        f.setVisible(true);
    }

}

class Panel extends JPanel {
    // the offsets are the area (rect border) to contain the triangle shape
    private final int xOFFSET = 25;
    private final int yOFFSET = 50;

    ArrayList<TriangleShape> triangleAL = new ArrayList<TriangleShape>();

    public Panel() {
        setBounds(0, 0, 800, 400);
        // setBorder(BorderFactory.createLineBorder(Color.black,2));
        addMouseListener(new MouseAdapter() {
            public void mousePressed(MouseEvent e) {
                addTriangle(new Point(e.getX(), e.getY()), new Point(e.getX()
                        - xOFFSET, e.getY() + yOFFSET), new Point(e.getX()
                                + xOFFSET, e.getY() + yOFFSET));
            }

        });
    }

    private void addTriangle(Point topCorner, Point leftCorner,
            Point rightCorner) {
        final TriangleDTO tdto = new TriangleDTO(new Point(25, 0), new Point(0,
                50), new Point(50, 50));
        TriangleShape ts = new TriangleShape(tdto);
        ts.setBorderColor(Color.BLACK);
        ts.setFillColor(Color.RED);
        ts.setBounds((int) (topCorner.getX() - 25), (int) topCorner.getY(), 51,
                51);
        triangleAL.add(ts);
        this.add(ts);
        repaint();

    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.draw(new Rectangle2D.Double(0, 0, 799, 399));
    }
}

// the custom component in a shape of a triangle
class TriangleShape extends JComponent {

    private GeneralPath triangle = new GeneralPath();
    private TriangleDTO tdto = new TriangleDTO();
    private Color borderColor = new Color(0);
    private Color fillColor = new Color(0);

    // Constructor
    public TriangleShape(TriangleDTO tdto) {
        this.tdto = tdto;
        triangle.moveTo(tdto.getTopCorner().getX(), tdto.getTopCorner().getY());
        triangle.lineTo(tdto.getLeftCorner().getX(), tdto.getLeftCorner()
                .getY());
        triangle.lineTo(tdto.getRightCorner().getX(), tdto.getRightCorner()
                .getY());
        triangle.closePath();

        addMouseMotionListener(new MouseAdapter() {
            public void mouseMoved(MouseEvent e) {
                // there are some issues when going out of the triangle from
                // bottom
                if (triangle.contains((Point2D) e.getPoint())) {
                    setFillColor(Color.GREEN);
                    repaint();
                } else {
                    setFillColor(Color.RED);
                    repaint();
                }
            }
        });

    }

    public void setBorderColor(Color borderColor) {
        this.borderColor = borderColor;
    }

    public void setFillColor(Color fillColor) {
        this.fillColor = fillColor;
    }

    @Override
    public void paintComponent(Graphics g) {
        Graphics2D g2d = (Graphics2D) g;
        g2d.setPaint(fillColor);
        g2d.fill(triangle);
        g2d.setPaint(borderColor);
        g2d.draw(triangle);
    }

}

// just a plain DTO for the triangle points
class TriangleDTO {

    private Point topCorner = new Point();
    private Point leftCorner = new Point();
    private Point rightCorner = new Point();

    // Constructors
    public TriangleDTO() {
    }

    public TriangleDTO(Point topCorner, Point leftCorner, Point rightCorner) {
        super();
        this.topCorner = topCorner;
        this.leftCorner = leftCorner;
        this.rightCorner = rightCorner;
    }

    // Getters and Setters
    public Point getTopCorner() {
        return topCorner;
    }

    public void setTopCorner(Point topCorner) {
        this.topCorner = topCorner;
    }

    public Point getLeftCorner() {
        return leftCorner;
    }

    public void setLeftCorner(Point leftCorner) {
        this.leftCorner = leftCorner;
    }

    public Point getRightCorner() {
        return rightCorner;
    }

    public void setRightCorner(Point rightCorner) {
        this.rightCorner = rightCorner;
    }

} 
```

# ios - Cocos2D每秒调用方法一定次数？

> ID：12946404
> 
> 赞同：1
> 
> 时间：2012-10-18T02:57:41.337
> 
> 标签：ios, methods, cocos2d-iphone, intervals, schedule

我正在使用 Cocos2D 2.0，目前我的问题是每秒调度一个方法一定次数。

我基本上想做的是：

```
1\. If score is 10 or less, call the method 5 times a second
2\. If score is 11 or more, call the method 10 times a second 
```

所以对于间隔，我分别尝试了 1/5 或 1/10，但没有奏效。有没有某种方法我应该使用这个调用来做到这一点？

```
[self schedule:@selector() interval:]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:03:46.543

是的，`schedule:interval:`会成功的。这里的问题是`1/10`and`1/5`是用两个整数文字定义的分数，因此按照 C 约定，应用整数除法，结果为 0。

尝试一下`[self schedule:@selector(yourMethod) interval:1.0/10]`，它应该可以工作。

需要注意的是，`schedule:`如果您重新安排相同的选择器，该方法会自动更新间隔，您之前不需要取消安排它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:27:10.147

我认为您可以通过使用它来实现目标

```
if(score <= 10){
[self schedule:@selector(yourMethod) interval:0.5f]; 
```

`}else{ [self schedule:@selector(yourMethod) interval:0.10f]; }`

# android - Android列表加载更多无法更新数据

> ID：12946405
> 
> 赞同：3
> 
> 时间：2012-10-18T02:58:03.833
> 
> 标签：android, android-listview

我已经实施了一个`listview` `onScrollListener`. 我有 20 个数据将显示在 a 中，`listview`但我只想先显示 10 个数据。所以，如果我滚动列表，它将显示接下来的 10 个数据。我的代码没有错误，但滚动时无法更新数据。请更正我的代码并立即需要您的帮助。谢谢。

```
 public class ResultRestoActivity extends ListActivity {

    Context ctx;

    List<Map<String,String>> listData =  new ArrayList<Map<String,String>>();
    List <Map<String,String>> list = new ArrayList<Map<String,String>>();

    ListAdapter adap;
    ListView lv;

    Button btnLoadMore;

    String bank,group,city,merchant,address,telpon,handphone,bb;

    TextView tv_GName,tv_city,tv_merchant,tv_address,tv_telpon,tv_handphone,tv_bb;

    ImageButton tabs_nearby, tabs_all;

    int bil_awal = 10;
    int awal;

    int itemsPerPage = 10;
    boolean loadingMore = false;

    @Override
    public void onCreate (Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        group = getIntent().getStringExtra("GROUP");
        bank = getIntent().getStringExtra("BANK");
        city = getIntent().getStringExtra("CITY");
        merchant = getIntent().getStringExtra("MERCHANT");
        address = getIntent().getStringExtra("ADDRESS");
        telpon = getIntent().getStringExtra("TELPON");
        handphone = getIntent().getStringExtra("HANDPHONE");
        bb = getIntent().getStringExtra("BB");

        ctx = this;
        setContentView(R.layout.activity_restoresult);

        tv_GName = (TextView)findViewById(R.id.tvRestoResult);
        tv_GName.setText(""+group+"");

        list = (ArrayList<Map<String,String>>) getIntent().getSerializableExtra("LIST");        

        awal = list.size()-bil_awal;
        for(int i=0;i<awal; i++){
            final Map<String, String> map = list.get(i);
            for (Map.Entry<String, String> entry : map.entrySet()) {
//              String key = entry.getKey();
                final String value = entry.getValue();
                if(value.equalsIgnoreCase(bank)){
                    listData.add(list.get(i));
                }
            }
        }

        adap = new ListAdapter(listData);

        View footerView = ((LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.listfooter, null, false);
        lv = getListView();
        lv.addFooterView(footerView);
        lv.setAdapter(adap);

        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int position,
                    long arg3) {
                merchant = ((TextView) v.findViewById(R.id.tv_merchantname)).getText()
                            .toString();

                Intent i = new Intent(ResultRestoActivity.this, DetailRestoActivity.class);
                    i.putExtra("GROUP", group);
                    i.putExtra("CITY", city);
                    i.putExtra("MERCHANT", merchant);
                    i.putExtra("ADDRESS", address);
                    i.putExtra("TELPON", telpon);
                    i.putExtra("HANDPHONE", handphone);
                    i.putExtra("BB", bb);
                startActivity(i);
            }
        });

        lv.setOnScrollListener(new OnScrollListener() {
            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
                // TODO Auto-generated method stub
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {
                // TODO Auto-generated method stub
                int lastInScreen = firstVisibleItem + visibleItemCount;

                if((lastInScreen == totalItemCount) && !(loadingMore)){                 
                    Thread thread =  new Thread(null, loadMoreListItems);
                    thread.start();
                }
            }
        });
        Thread thread =  new Thread(null, loadMoreListItems);
        thread.start();
    }

    private Runnable loadMoreListItems = new Runnable() {
        @Override
        public void run() {
            // TODO Auto-generated method stub
            loadingMore = true;

            list = (ArrayList<Map<String,String>>) getIntent().getSerializableExtra("LIST");
            listData = new ArrayList<Map<String,String>>();

            try { Thread.sleep(1000);
            } catch (InterruptedException e) {}

            for (int i=0; i<list.size(); i++) {
                final Map<String, String> map = list.get(i);
                for (Map.Entry<String, String> entry : map.entrySet()) {
//                  String key = entry.getKey();
                    final String value = entry.getValue();
                    if(value.equalsIgnoreCase(bank)){
                        listData.add(list.get(i));
                    }
                }
            }
            runOnUiThread(returnRes);
        }
    };

    private Runnable returnRes = new Runnable() {
        @Override
        public void run() {
            adap = new ListAdapter(listData);
            lv.setAdapter(adap);
            adap.notifyDataSetChanged();

            loadingMore = false;
        }
    };

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:34:20.490

你可以使用 pulltorefresh，这里是它的开源项目[https://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

# php - 回显常规文本和数组

> ID：12946406
> 
> 赞同：0
> 
> 时间：2012-10-18T02:58:10.560
> 
> 标签：php

我正在尝试将常规文本与数组一起回显。我将以下代码基于此处找到的答案，但它不起作用：[Echo arrays with regular text](https://stackoverflow.com/questions/4494117/echo-arrays-with-regular-text)

```
<?php
$val1 = Yes;
if (($row->relation) == ($val1)) {
echo "<p><b>Applicant\'s Name:</b> {$row['relation_name']} | <b>Business:</b> {$row['relation_business']}</p>";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:02:24.090

你在这里做错了很多事情

例子

```
 V--------------------- Row Seems to be Object here
 if (($row->relation) == ($val1)) {
  echo "<p><b>Applicant\'s Name:</b> {$row['relation_name']}
                                       ^---------------------- Calling it as array here 
```

在您澄清上述内容后，您可以`printf`改用

如果它`array`：

```
printf("<p><b>Applicant\'s Name:</b> %s|<b>Business:</b>%s</p>",$row['relation_name'],$row['relation_business']); 
```

如果它是`Object`

```
printf("<p><b>Applicant\'s Name:</b>%s|<b>Business:</b>%s</p>",$row->relation_name,$row->relation_business); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:03:29.793

您可以使用`.`明显用于连接的符号`php`：

```
<?php
    $val1 = Yes;
    if (($row->relation) == ($val1)) {
        echo "<p><b>Applicant\'s Name:</b>" . $row['relation_name'] . |  . "<b>Business:</b>" . $row['relation_business'] . "</p>";
    }
?> 
```

或者你可以分开`HTML`，`PHP`像这样：

```
<?php
    $val1 = Yes;
    if (($row->relation) == ($val1)) {
?>
    <p><b>Applicant\'s Name:</b><?php echo $row['relation_name'] ?>|<b>Business:</b><?php echo $row['relation_business'] ?></p>      
<?
    }
?> 
```

# java - 如何在 Eclipse 中将多个 Java 练习放在一个类中？

> ID：12946407
> 
> 赞同：0
> 
> 时间：2012-10-18T02:58:20.663
> 
> 标签：java, eclipse

我需要将 3 个单独的 Java 练习（类）放在一个类中。有人可以告诉我怎么做吗？谢谢！以下是程序：

--

```
public class Chapter3Exercise1
{

    public static void main(String[] args)
    {
        printNumbers(15);
        System.out.println();
        printNumbers(5);

    }

    public static void printNumbers(int x)
    {

        for (int i = 1; i <= x; i++)
        {
            System.out.print(("[") + (i) + ("]") + (" "));
        }

    }
}

public class Chapter3Exercise4
{

    public static void main(String[] args)
    {
        System.out.print(largerAbsVal(11, 2));
        System.out.println();
        System.out.print(largerAbsVal(4, -5));

    }

    public static int largerAbsVal(int x, int y)
    {
        return Math.max(Math.abs(x), Math.abs(y));

    }

}

public class Chapter3Exercise5
{

    public static void main(String[] args)
    {
        System.out.print(largestAbsVal(7, -2, -11));
        System.out.println();
        System.out.print(largestAbsVal(-4, 5, 2));
    }

    public static int largestAbsVal(int x, int y, int z)
    {
        int abs1 = Math.max(Math.abs(x), Math.abs(y));
        int abs2 = Math.max(Math.abs(y), Math.abs(z));
        return Math.max(abs1, abs2);

    }

} 
```

--

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:01:40.640

```
public class mainclass
{
public static void main(String[] args) {
        printNumbers(15);
        System.out.println();
        printNumbers(5);
    System.out.print(largerAbsVal(11, 2));
        System.out.println();
        System.out.print(largerAbsVal(4, -5));
    System.out.print(largestAbsVal(7, -2, -11));
        System.out.println();
        System.out.print(largestAbsVal(-4, 5, 2));

    }
    public static void printNumbers(int x) {

           for (int i = 1; i <= x; i++) {
                System.out.print(("[")+(i) + ("]")+ (" "));    
       }
    public static int largerAbsVal(int x, int y) {
        return Math.max(Math.abs(x), Math.abs(y));

       }
    public static int largestAbsVal(int x, int y, int z) {
        int abs1 = Math.max(Math.abs(x), Math.abs(y));
        int abs2 = Math.max(Math.abs(y), Math.abs(z));
        return Math.max(abs1, abs2);

       }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:09:54.397

```
public class Chapter3
{
public static void main(String[] args) {
    excercise1();
    excercise2();
    ..........
}
public void excercise1()
{
    printNumbers(15);
    System.out.println();
    printNumbers(5);

}

public static void printNumbers(int x)
{

    for (int i = 1; i <= x; i++)
    {
        System.out.print(("[") + (i) + ("]") + (" "));
    }

}

public void excercise2()
{
    System.out.print(largerAbsVal(11, 2));
    System.out.println();
    System.out.print(largerAbsVal(4, -5));
}

public static int largerAbsVal(int x, int y)
{
    return Math.max(Math.abs(x), Math.abs(y));

}
 .................
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T03:04:44.853

如果我告诉您，您应该能够弄清楚： 1）您的类中只能有一个 main 方法。2）您可以将所有实例方法放在一个类中。

剩下的就是复制粘贴了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T03:05:18.763

java类`public`必须存在于它自己的`.java`文件中。如果要将它们全部放在一个文件中，则应删除`public`访问说明符。但这会使这些类成为包私有的，即不能从其他包访问它们。

```
class Chapter3Exercise1
{
    public static void main(String[] args)
    {
        printNumbers(15);
        System.out.println();
        printNumbers(5);
    }

    public static void printNumbers(int x)
    {

        for (int i = 1; i <= x; i++)
        {
            System.out.print(("[") + (i) + ("]") + (" "));
        }
    }
}

class Chapter3Exercise4
{
    public static void main(String[] args)
    {
        System.out.print(largerAbsVal(11, 2));
        System.out.println();
        System.out.print(largerAbsVal(4, -5));
    }

    public static int largerAbsVal(int x, int y)
    {
        return Math.max(Math.abs(x), Math.abs(y));
    }
}

class Chapter3Exercise5
{
    public static void main(String[] args)
    {
        System.out.print(largestAbsVal(7, -2, -11));
        System.out.println();
        System.out.print(largestAbsVal(-4, 5, 2));
    }

    public static int largestAbsVal(int x, int y, int z)
    {
        int abs1 = Math.max(Math.abs(x), Math.abs(y));
        int abs2 = Math.max(Math.abs(y), Math.abs(z));
        return Math.max(abs1, abs2);
    }
} 
```

顺便说一句，一旦您将所有类移动到 eclipse 中的单个文件并尝试运行，它会要求选择`main`应该运行其方法的类，因为您的每个类都`main`定义了一个方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T03:35:52.943

规则是在一个 java 文件中**只有一个公共类**和**一个 main 方法。**

# python - PyVISA 和 Kethley 2701 只能从一个通道获取结果

> ID：12946408
> 
> 赞同：1
> 
> 时间：2012-10-18T02:58:39.253
> 
> 标签：python, visa

我正在使用 PyVISA 访问我的 Keithley 2701 DMM 上的通道，我在通道 102 和 103 上有 TC。当使用“READ?” 我只从我的一个渠道而不是两个渠道获取价值：波纹管是我的代码：

```
from pyvisa.vpp43 import visa_library
visa_library.load_library("/Library/Frameworks/Visa.framework/VISA")
import visa
import time

keithley = visa.instrument("ASRL1")
keithley.write('*RST')
print keithley.ask('*IDN?')

keithley.write('TRAC:CLE')
keithley.write("INIT:CONT OFF")
keithley.write("TRIG:sour IMM")

keithley.write("SENSE:FUNC 'TEMP', (@102)")
keithley.write("TEMP:TRAN TC, (@102)")
keithley.write("TEMP:TC:TYPE K, (@102)")
keithley.write("TEMP:RJUN:RSEL INT, (@102)")

keithley.write("SENSE:FUNC 'TEMP', (@103)")
keithley.write("TEMP:TRAN TC, (@103)")
keithley.write("TEMP:TC:TYPE K, (@103)")
keithley.write("TEMP:RJUN:RSEL INT, (@103)")

keithley.write('TRAC:CLE')
keithley.write("INIT:CONT OFF")
keithley.write("TRIG:sour IMM")

keithley.write("TRIG:COUN INF")
keithley.write("ROUT:SCAN (@102,103)")
keithley.write("ROUT:SCAN:TSO IMM")
keithley.write("ROUT:SCAN:LSEL INT")

print keithley.ask("READ?") 
```

我的结果是：+2.24654121E+01 C,+61.898106SECS,+00239RDNG#

这对我的一个频道来说是正确的，但我想看看这两个频道的结果......任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T01:06:08.347

我不确定`READ?`应该如何使用多个频道。我认为有两种可能性：

```
print keithley.ask("READ?")
print keithley.ask("READ?") 
```

或者可能：

```
keithley.write("READ?")
print keithley.read()
print keithley.read() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:04:51.200

来自 1999 SCPI 命令参考第 3.3 段

> `READ[:<function>]? <parameters>[,<source list>]`

我以前没用过，但我想你必须指定一个`<source list>`

所以要读取通道 1、3、4、5 和 9，你会写

```
print keithley.ask("READ? (@1,3:5,9)") 
```

# c# - 如何将数据库表设计转换为 C# 类？

> ID：12946412
> 
> 赞同：1
> 
> 时间：2012-10-18T02:59:19.113
> 
> 标签：c#, database

我基于 SQL 图表创建了两个 C# 类联系人和客户（见图）只是我想看看我是否做得对，我需要一些建议吗？向下数据库图和类客户和联系人

![在此处输入图像描述](../Images/58a9900620c412e210094af77abf7732.png)

```
Customer Class

 public class Customer
    {
        public int CustomerID { get; set; }
        public string Title { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Postion { get; set; }
        public Char Gender { get; set; }
        public DateTime BecomeCustomer { get; set; }     
        public DateTime ModifiedDate { get; set; }

        public Customer() { }

        public static bool AddNewCustomer_Contact(Customer cust,Contacts cont)
        {
            try
            {
                // get a configured DbCommand object
                DbCommand comm = GenericDataAccess.CreateCommand();

                //Set the store Proc name 
                comm.CommandText = "AddNewCustomer_Contact";

                //create new parameter @Title 
                DbParameter param = comm.CreateParameter();
                param = comm.CreateParameter();
                param.ParameterName = "@Title";
                param.Value = cust.Title;
                param.DbType = DbType.StringFixedLength;
                comm.Parameters.Add(param);

                //create new parameter @FirstName
                param = comm.CreateParameter();
                param.ParameterName = "@FirstName ";
                param.Value = cust.FirstName;
                param.DbType = DbType.StringFixedLength;
                comm.Parameters.Add(param);

                //create new parameter @LastName
                param = comm.CreateParameter();
                param.ParameterName = "@LastName";
                param.Value = cust.LastName;
                param.DbType = DbType.StringFixedLength;
                comm.Parameters.Add(param);

                //create new parameter @Postion 
                param = comm.CreateParameter();
                param.ParameterName = "@Postion ";
                param.Value = cust.Postion;
                param.DbType = DbType.StringFixedLength;
                comm.Parameters.Add(param);

                //create new parameter @BecomeCustomer
                param = comm.CreateParameter();
                param.ParameterName = "@BecomeCustomer";
                param.Value = DateTime.Now;
                param.DbType = DbType.DateTime;
                comm.Parameters.Add(param);

                //create new parameter @Gender 
                param = comm.CreateParameter();
                param.ParameterName = "@Gender";
                param.Value = cust.Gender;
                param.DbType = DbType.String;
                comm.Parameters.Add(param);

                //create new parameter @ModifiedDate  
                param = comm.CreateParameter();
                param.ParameterName = "@ModifiedDate";
                param.Value = DateTime.Now;
                param.DbType = DbType.StringFixedLength;
                comm.Parameters.Add(param);

                //create new parameter @LabelContactTypeID
                param = comm.CreateParameter();
                param.ParameterName = "@LabelContactTypeID";
                param.Value = cont.LabelContactTypeID;
                param.DbType = DbType.StringFixedLength;
                comm.Parameters.Add(param);

                //create new parameter @ContactDetails
                param = comm.CreateParameter();
                param.ParameterName = "@ContactDetails";
                param.Value = cont.ContactDetail;
                param.DbType = DbType.StringFixedLength;
                comm.Parameters.Add(param);

                //create new parameter @Status
                param = comm.CreateParameter();
                param.ParameterName = "@Status";
                param.Value = cont.Status;
                param.DbType = DbType.StringFixedLength;
                comm.Parameters.Add(param);

                //create new parameter @Notes
                param = comm.CreateParameter();
                param.ParameterName = "@Notes";
                param.Value = cont.Notes;
                param.DbType = DbType.StringFixedLength;
                comm.Parameters.Add(param);

                return (GenericDataAccess.ExecuteNonQuery(comm) != -1);

            }
            catch
            {
                return false;
            }
        }
    }
Contact Class

public class Contacts
{
    public int ContactsID { get; set; }
    public int CustomerID { get;set; }
    public string ContactDetail { get; set; }
    public bool Status { get; set; }
    public int LabelContactTypeID { get; set; }
    public string Notes { get; set; }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:08:11.183

它看起来不错，但我会将数据访问层放在不同的静态类中，因为它并没有真正操纵模型。一个类应该被封装到它的数据和与模型本身的数据交互的方法中。

另外，查看 AddWithValue()：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)

可能更容易让您使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:10:49.870

大多数架构问题/“我做得对吗？” 归结为“这取决于”。

有几种方法可以解决这个问题。在不是“高性能”的场景中，并且您希望您的对象直接映射到数据库表，那么使用像实体框架这样的 ORM 是非常好的。

如果您想将域层与数据存储的逻辑设计分离，那么您应该研究类似存储库模式并使用 DTO / 直接 ADO.NET。不过，代码要多得多，总体上要付出更多的努力。

从您在此处展示的内容来看，尽管它看起来像一个简单的非高性能相关应用程序，所以我会选择最简单且运行良好的东西，在这种情况下将是实体框架或另一个 ORM。

如果您想使用 ado .net 并计划旧的数据传输对象以保持代码清洁度，我建议将数据库访问代码放入与数据传输对象不同的类中（DTO，在这种情况下，Customer 是一个 DTO，如果您愿意，则是一个属性包)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T03:29:10.867

在设计一个类时，第一步是确定需要哪些类以及它们的属性/职责是什么。据我了解，您要代表的唯一高级类是客户。客户是您的高级类，我的意思是客户的某些属性可以由其他对象（如姓名、联系人等）构成。

此外，像 Id 这样的一些字段在数据库之外没有任何意义（我假设在这种情况下 Id 是您的 Customer 表的主键）。如果您一心想将您的类模型建立在数据库设计（规范化的设计）上，那么我建议您在继续使用类模型之前对您的设计进行“非规范化”。规范化提供的优化仅在关系模型的范围内，通常不应扩展到内存中表示的类。

此外，正如@Yatrix 所建议的，最好从实际数据模型中抽象出数据访问层。

这里有一些建议，

```
public class Customer
{
    // public int CustomerID { get; set; } // Database specific primary key
    public string Title { get; set; } 
    public string FirstName { get; set; } // Is the setter required to be publicly exposed? 
                                          // Or can it be private to the class?
    public string LastName { get; set; }  // FirstName and LastName can be part of a nested class 
                                          // Name, so that the access is more natural... 
                                          // Customer.Name.FirstName 
    public string Postion { get; set; }
    public Char Gender { get; set; } // Can be an enumeration
    public DateTime BecomeCustomer { get; set; }     
    public DateTime ModifiedDate { get; set; }
    public IList<Contact> Contacts { get; private set; } // The getter can be private and you can 
                                                         // expose only some methods like 
                                                         // Customer.GetContactOfType(type)

    public bool AddContact(Contact contact)
    {
         // ...
    }

    public bool RemoveContact(Contact contact)
    {
         // ...
    }       
}

public class Contact
{
    public string ContactDetail { get; set; } // Can be named as Detail or something more specific
    public bool Status { get; set; } // Can be enumeration
    public ContactType Type { get; set; } // ContactType is an enumeration
    public string Notes { get; set; }
} 
```

# windows-8 - 是否有适用于 Windows 8 的好的文本到语音 API？

> ID：12946414
> 
> 赞同：3
> 
> 时间：2012-10-18T03:00:03.930
> 
> 标签：windows-8

我正在为我的 Windows 8 应用程序寻找除了微软翻译器之外的好的 API。我正在使用 HTML/JS

# php - 用于处理 AJAX 请求的 PHP OOP 模式

> ID：12946416
> 
> 赞同：3
> 
> 时间：2012-10-18T03:00:08.347
> 
> 标签：php, javascript, oop, design-patterns

我正在编写一个丰富的 JS 应用程序，我想就如何构建 JS/PHP 提出广泛的建议。我不知道如何分解这个问题，如果它问的东西太多，对不起。我正在遭受信息过载的痛苦！

我希望 JS 会从单个 PHP 文件中请求 JSON 对象。我想要一个最小但有效的 PHP 模式来响应简洁有效的请求。也许 JS 会调用类似模型的对象来查询数据库并将 JSON 返回给客户端。

什么是 PHP 方面的好模式？我将一个 PHP 文件拼凑在一起，该文件杂乱地包含一个大型 switch 语句，用于解析来自客户端的指令以及相关数据。一个请求可能包含多个指令。例如，javascript 发送一个请求：

```
$.ajax({
    url: '/ajax.php', dataType: 'json',
    data: {instructions: [{
        instruction: "newPerson",
        data: {
             name: person.name,
             email: person.email
             city: person.city
        }
    }]},
    success: callback, error: ajaxFail
}); 
```

回调将是一个全局处理程序，处理 PHP 从该请求或其他请求返回的任何对象。例如，上面可能会收到一个带有由 PHP 生成的人员 ID 插入数据库的新人员对象，以及一个带有其 ID 的城市对象。其他请求也可能返回这些对象，所以单个处理程序有意义吗？（一个问题是 javascript 如何将返回的对象与提交的插入相关联）

我对我的 PHP 页面代码感到羞愧，但它看起来像这样：

```
$return = array();
$instructions = $_REQUEST['instructions'];
foreach ($instructions as $instruction){
    switch($instruction['instruction']){
        case 'findPoeple':
            $data = $instruction['data'];
            $res = DB::query("select player from person where player like '%". DB::esc($str) ."%'");
            $return['players'] = array();
            while ($row = DB::fetch($res)){
                $return['players'][] = $row['player'];
            }
        break;
        case 'loadAllPeople':
            // similar code
        break;
        case 'newPerson':
            // similar code
        break;
        default:
            die("command '$command' not recognised");
        break;
    }
}
echo json_encode($return); 
```

显然，这有太多错误，无法说出要更改的内容！但我已经相当清楚我要寻找的最终结果是什么。谁能指出我简洁的模式，专门展示这种使用 OOP 以一种可敬的方式实现的 JS/PHP 方法？

MVC 对我来说是有意义的，直到丰富的 JS 应用程序成为可能，边界似乎非常模糊，任何启示都是上帝赐予的，我现在从头开始。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T04:54:31.123

**tl;dr：PHP 响应简洁有效的请求的最小但有效的模式是为每种类型的请求使用单独的 PHP 脚本**

与其尝试在 PHP 中路由请求，不如让 Web 服务器自动处理路由可能更简单、更容易且性能更高。您所要做的就是将`case`您的`switch`块中的每个分隔成自己的脚本，如下所示：

/findpeople.php
/loadallpeople.php
/newperson.php

这样，当您收到对“newperson.php”的请求时，您明确地知道需要哪些参数(1)、如何验证每个参数(2) 以及客户端期望返回的资源类型(3)。

例如：

1.  'newperson.php' 可能需要一个`name`,`email`和`city`来创建一个新人
2.  A`name`可能是一个字符串（从 3 到 16 个字符或其他任意范围）；`email`地址基本上是一个字符串，但在正确验证时有一些复杂的东西，并且 a可能`city`是一个具有与 a 类似的约束的字符串`name`
3.  如果客户端试图创建一个新的`person`，他们可能想知道请求是否成功，以及新`person`的识别特征（`person_id`也许是你数据库中的一个值？）

最后，如果您想在 Javascript 中对多个请求进行分组，最简单的方法可能就是执行多个单独的 AJAX 请求，每条指令一个。

* * *

如果您想更上一层楼，请对 REST-ful Web 服务进行一些研究，然后重新考虑如何公开资源（在本例中是您的`person`对象集合）。围绕对象的（更多）REST-ful 架构`person`可能看起来像这样，而不是：

POST /person/ - 创建一个新人
POST /person/ `person_id`- 修改一个人
GET /person/ `person_id`- 检索有关个人的信息
GET /person/ - 检索所有人员

您可以通过变量访问 PHP 中的 HTTP 请求方法，[`$_SERVER['request_method']`](http://php.net/manual/en/reserved.variables.server.php)然后采取相应措施。

有关 REST 原则和实现的一些基本信息：

*   [我如何向妻子解释 REST](http://tomayko.com/writings/rest-to-my-wife)
*   （抱歉，我会提供 Wikipedia 和 Roy Fielding 的论文的链接，其中他“发明”了 REST，但没有所需的声誉）

# winforms - 如何在winforms设计器中公开用户控件的整个子控件

> ID：12946418
> 
> 赞同：5
> 
> 时间：2012-10-18T03:00:32.857
> 
> 标签：winforms, user-controls

例如，我想创建一个包含标签和文本框的用户控件（Windows 窗体）。我想将两个子控件公开为属性，以便我可以在客户端表单设计器中设置子控件的属性。

所以代码可能是这样的：

```
公共部分类 LabelTextbox : UserControl
    {
        公共标签文本框（）
        {
            初始化组件（）；
        }

        [
           类别（“外观”），
           可浏览（真），
           描述（“内部标签”）
        ]
        公共 DevComponents.DotNetBar.LabelX LabelPart
        {
            得到
            {
                返回 this.labelx;
            }

            放
            {
                this.labelx = 值；
            }
        }

        [
           类别（“外观”），
           可浏览（真），
           描述（“内部文本框”）
        ]
        公共文本框 TextBoxPart
        {
            得到
            {
                返回 this.textboxx;
            }

            放
            {
                this.textboxx = 值；
            }
        }
    }

```

然后我可以在设计器中看到它，它看起来像：

![在此处输入图像描述](../Images/2f23be6874c5edda16567bb24ee0a236.png)

但是当我在设计器中设置用户控件的内部标签属性时，它无法在设计器中创建关系代码。也就是说客户端设置没有被保存。

那么我该如何解决这个问题。

顺便说一句，我来自 CN，我的英语很差。任何人都可以回答我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T03:14:52.973

使用 Attribute装饰您的子控件的[`DesignerSerializationVisibility`](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerserializationvisibilityattribute.aspx)属性：

```
[
   Category("Appearance"),
   Browsable(true),
   Description("innerLabel"),
   DesignerSerializationVisibility(DesignerSerializationVisibility.Content)  //<-- here
]
public DevComponents.DotNetBar.LabelX LabelPart {
    get {
        return this.labelx;
    }
    set {
        this.labelx = value;
    }
} 
```

# actionscript-3 - 在 AS3 中将 alpha 百分比转换为 RGBA hex？

> ID：12946421
> 
> 赞同：2
> 
> 时间：2012-10-18T03:00:55.147
> 
> 标签：actionscript-3, flash, actionscript

假设我的 AS 代码中有以下设置：

```
var color:String = "#0000FF"; //blue
var alpha:Number = 42; //42% or 42/100 
```

我如何将它们组合成`#RRGGBBAA`十六进制颜色？我一直在谷歌搜索并试图找出十六进制转换和符号，但没有运气。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T04:04:47.603

有两种方法可以做到这一点。[使用 int 的toString()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/int.html#toString%28%29)方法并将 16 作为基数/基数传递有点 hacky ：

```
var rgb:int = (int)("#0000FF".replace("#","0x"));//convert the string to a int (note you can type hex ints starting with 0x (e.g. 0x0000FF)
var a:int = 42;
var rgba:int = int("0x"+rgb.toString(16) + a.toString(16)); 
```

[或使用按位运算符](http://www.nicolabortignon.com/as3-bitwise-operations/)的不太复杂且可能更快的计算方法：

```
var rgb:uint = (uint)("#0000FF".replace("#","0x"));
//extract components using bit shifting (>>) and masking (0xFF)
var r:uint = rgb >> 16 & 0xFF;
var g:uint = rgb >>  8 & 0xFF;
var b:uint = rgb >>  0 & 0xFF;//same as rgb >> 0xFF, just added >> 0 to make the shift obvious
var a:uint = 42;
var rgba:uint = r << 24 | g << 16 | b << 8 | a;
var argb:uint = a << 24 | r << 16 | g << 8 | b;
//test
trace(rgba.toString(16));
trace(argb.toString(16)); 
```

请注意，`toString(16)`在上面的跟踪中使用是为了使其对我们人类有用，在使用十六进制颜色值时，您将使用实际的 uint 值。

另请注意，有时您可能希望在 as3 中使用 ARGB，例如在使用[BitmapData](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#BitmapData%28%29)时：

```
addChild(new BitmapData(100,100,true,0x2a0000ff));//add a 42% transparent blue box (100x100 px) 
```

**更新**

上面的 bitshift 代码片段实际上详细解释了 rgb 提取，这有助于更好地理解事物，但是您已经有了 rgb，所以只需添加 alpha 分量即可。您还提到了 42%，这与 0 到 255 的比例不同。因此，下面是您的答案：

```
var rgb:uint = (uint)("#0000FF".replace("#","0x"));
var   a:uint = (uint)((42 * .01) * 255);//map 42 from 0<>100 to 0<>255 ( *.01 is the same as / 100 but faster
var rgba:uint = rgb << 8 | a;
var argb:uint = a << 24 | rgb; 
```

关于速度，如果我运行这两种不同的转换方法一百万次，这里是执行时间：

```
using strings (var rgba:int = int("0x"+rgb.toString(16) + a.toString(16));) takes 851 ms 
using bitwise ops (var rgba:uint = rgb << 8| a;) takes 3 ms 
```

如您所见，按位版本比字符串版本更快，并且对于您的情况甚至更简洁。此外，既然您了解了按位运算符，可能更容易阅读/理解。

综上所述：

```
var color:String = "#0000FF"; //blue
var alpha:Number = 42; //42% or 42/100
var rgb:uint = (uint)(color.replace("#","0x"));
var   a:uint = (uint)((alpha * .01) * 255);
var rgba:uint = rgb << 8 | a;
trace("hex: #",rgba.toString(16),"test",0x0000ff6b.toString(16)); 
```

此外，您提到 Google 很有趣，因为您可以使用搜索[转换为 hex](https://www.google.co.uk/search?q=107%20to%20hex&aq=f&oq=107%20to%20hex&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8)。

**更新**：似乎有点混乱，所以我将 3 个步骤拆分为函数：

1.  将十六进制字符串转换为 int
2.  将 alpha 百分比 (0-100) 转换为 0-255 int
3.  连接以上

这将是：

```
function getHex(hexStr:String):uint{
    return (uint)(hexStr.replace("#","0x"));
}
function getHexAlpha(alpha:uint):uint{
    return (uint)((alpha * .01) * 255);
}
function rgbaConcat(rgb:uint,a:uint):uint{
    return rgb << 8 | a;
}
trace("test",rgbaConcat(getHex("#FF9900"),getHexAlpha(50)).toString(16)); 
```

或一口气：

```
function rgbaConcat(hexStr:String,alpha:uint):uint{
    var rgb:uint = (uint)(hexStr.replace("#","0x"));
    var a:uint = (uint)((alpha * .01) * 255);
    return (rgb << 8 | a);
}
trace("test",rgbaConcat("#123456",100).toString(16)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T03:14:14.643

我不确定 sprintf 或类似的东西在动作脚本中是否可用，但你会使用类似的东西：

```
var alpha_2:int = Math.round(255*alpha/100);
var rgba:String = sprintf("%s%2x", color, alpha_2); 
```

`#RRGGBBAA`顺便说一句，一定要检查它是否应该是`#AARRGGBB`

所以显然 sprintf 不可用，您可以使用[动作脚本 3 中是否有类似 printf 中提到的一些替代品？](https://stackoverflow.com/questions/1198374/is-there-something-like-printf-in-action-script-3)

如果您不喜欢使用类似 printf 的功能，可以使用：

```
function hex_char(value:int) {
  if (value < 0)
    return "X";
  if (value < 10)
    return String.fromCharCode("0".charCodeAt(0)+value);
  if (value < 16)
    return String.fromCharCode("A".charCodeAt(0)+value-10);
  return "X";
}

var alpha_2:int = Math.round(255*alpha/100);
var rgba:String = color + hex_char(alpha_2/16) + hex_char(alpha_2%16); 
```

或者，您可以使用以下定义（我假设）将为您提供低于或高于`hex_char`的任何值的异常/错误，而不是`0``15``"X"`

```
function hex_char(value:int) {
  return "0123456789ABCDEF".charAt(value);
} 
```

# active-directory - 如何链接到 Windows 中的现有 LDAP 服务器进行身份验证

> ID：12946425
> 
> 赞同：2
> 
> 时间：2012-10-18T03:01:20.343
> 
> 标签：active-directory

所以这是交易。我有一个 Windows 2008 R2 服务器，我想使用现有的 LDAP 服务器进行身份验证和组等。

换句话说，我不想管理 Windows 2008 服务器本身上的帐户，但我希望服务器认为它们在那里（就像充当中继器或中继器）。

我正在尝试做的是让人们访问他们的 Web 发布的 RemoteApp 应用程序，但同样，我不想管理该服务器上的用户，已经有一个包含所有这些信息的现有 LDAP 服务器。

有任何想法吗？这可能吗？提前致谢。

# php - 链接 smarty 模板和清理多行字符串 - PHP

> ID：12946432
> 
> 赞同：0
> 
> 时间：2012-10-18T03:02:27.880
> 
> 标签：php, smarty, multilinestring

我知道第一部分是主观的，但我想听听人们使用的一些不同的技术。这是一个由两部分组成的问题：您在 PHP 中使用什么来处理复杂的多行字符串？而且，我可以使用smarty 的组合类型的关系吗？

问题1：我知道有heredoc和“。” 操作员。如果有的话，我正在寻找新鲜的、更具可读性的想法。

问题 2：更具体地说，这是我想对 smarty 做的事情。

假设我有一个模板 base.tpl：

```
<html>
<head><title></title></head>
<body>
{$main_content}
</body>
</html> 
```

我可以链接模板，即代表 $main_content 的另一个模板，比如 main.tpl：

```
<div id="header">$header</div>
<div id="container">
<h1>{$first_header}</h1>
<p>{$first_paragraph}</p>
<h1>{$second_header}</h1>
<p>{$second_paragraph}</p> 
```

我想在whatever.php中将一个模板加载到另一个模板中，即：

```
// ... including smarty and all other boiler plate things ...

$smarty -> assign('first_header', "Foo");
$smarty -> assign('first_paragraph', "This is a paragraph");
$smarty -> assign('second_header', "Bar");
$smarty -> assign('second_paragraph', "This is another paragraph");

$main_content = $smarty->load('main.tpl');
$smarty -> display('base.tpl'); 
```

我知道smarty中有“模板继承”，但我不熟悉。它能给我类似的功能吗？

注意：我认为 heredoc 的最大问题是我无法为 html 获得语法突出显示（如果我在 heredoc 字符串中指定 html）。如果没有突出显示，我想通过 smarty 传递的 html 很难阅读，这有悖于 smarty 的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:10:16.003

您需要使用 {include} 在模板中调用模板（片段）。

[http://www.smarty.net/docsv2/en/language.function.include.tpl](http://www.smarty.net/docsv2/en/language.function.include.tpl)

```
<html>
<head>
  <title>{$title}</title>
</head>
<body>
{include file='page_header.tpl'}

{* body of template goes here, the $tpl_name variable
   is replaced with a value eg 'contact.tpl'
*}
{include file="$tpl_name.tpl"}

{include file='page_footer.tpl'}
</body>
</html> 
```

将变量传递到包含的模板中：

```
{include file='links.tpl' title='Newest links' links=$link_array}
{* body of template goes here *}
{include file='footer.tpl' foo='bar'} 
```

在多行字符串方面，我倾向于使用这种模式：

```
$my_string = "Wow, this is going to be a long string. How about "
           . "we break this up into multiple lines? "
           . "Maybe add a third line?"; 
```

正如你所说，这是主观的。无论你觉得舒服，只要它易于阅读......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:02:53.217

今天早上我发现了一些关于模板继承的文档......

为了扩展我上面的例子，你可以有一个基本布局（base.tpl）

```
<html>
<head><title>{$title|Default="title"}</head>

<body>

<nav>{block name=nav}{/block}</nav>

<div id="main">{block name=main}Main{/block}</div>

<footer>Copyright information blah blah...</footer>

</body>
</html> 
```

您现在可以使用新版本的 smarty (home.tpl) 扩展模板并覆盖块

```
{extends file=base.tpl}

{block name=nav}
          <ul style="list-style:none">
            {foreach $links as $link}
              <li><a href="{$link.href}" target="_blank">{$link.txt}</a></li>
            {/foreach}
          </ul>
{/block}

{block name=main}
    {foreach $paragraphs as $p}
        <h2>{$p.header}</h2>
        <p>{$p.content}</p>
    {/foreach}
{/block} 
```

[http://www.smarty.net/inheritance](http://www.smarty.net/inheritance)

# ios - UIScrollView 动画问题

> ID：12946434
> 
> 赞同：1
> 
> 时间：2012-10-18T03:02:38.780
> 
> 标签：ios, multithreading, uiscrollview, objective-c-blocks, block

我正在使用水平 UIScrollView 在屏幕的前半部分显示照片。（想象一个CGRect（0,0,320,120）。第一个scrollView嵌入在第二个scrollview中，它占据了所有屏幕。当我向下滚动页面（因此第二个scrollView）时，第一个scrollview停止动画。我编写了一个NSTimer在第一个 UIScrollView 中每 3 秒更改一次照片，但是当我滚动第二个 scrollView 时，似乎动画正在排队。当我松开屏幕的手指时，照片转换很少（即：2 变化如果我连续滚动了 6 秒。**简而言之：**当我滚动第二个 scrollView 时，如何利用块（或其他东西）继续我的动画？

我的 NSTimer（在 viewDidLoad 中）：

```
timer = [NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector(changePage:) userInfo:nil repeats:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:17:48.623

您的 iOS 应用程序有一个运行循环，它不断检查用户输入等内容。如果它忙于检测触摸事件，则在该运行循环上安排的事情将不会被执行。（类似地，如果你用一个大的服务器请求阻塞主线程，你将不会在那段时间得到触摸事件）。

以下是如何在正确的运行循环中获取 NSTimer：

首先，用于`timerWithTimeInterval:target:selector:userInfo:repeats:`创建未在运行循环上安排的计时器。其次，用于`- (void)addTimer:(NSTimer *)aTimer forMode:(NSString *)mode`在运行循环上安排计时器。对于 mode 参数（运行循环类型），用于`NSRunLoopCommonModes`允许计时器触发而无需等待主运行循环。

请注意，`performSelectorAfterDelay`如果在主运行循环中完成，则存在相同的效果。它也适用于动画完成块。除了使用 CoreAnimation 之外，我不确定是否有解决动画完成块问题的简单方法。

# cocoa-touch - 使用 Core Data 存储自定义对象 - 我在这里缺少什么？

> ID：12946435
> 
> 赞同：0
> 
> 时间：2012-10-18T03:02:46.383
> 
> 标签：cocoa-touch, core-data

我有一个简单的自定义对象（“成分”），其中包含实例变量、类方法和实例方法。这个自定义对象在我的应用程序中无情地交织在一起。我想使用 Core Data 存储这个自定义对象的实例。根据我的阅读，不鼓励在托管对象中使用实例变量和方法。

所以现在我对如何进行感到困惑。

从类似情况的示例中，似乎通常的做法是获取结果并将其放入数组中，如下所示：

```
NSMutableArray *array = [managedObjectContext executeFetchRequest:fetchRequest error:&error]; 
```

但我不清楚我可以用对象的 mutableArray 做什么。我可以用我的自定义对象做我目前想做的所有事情吗：修改实例变量、将对象发送到方法等？

或者我是否像目前一样使用我的“Ingredient”对象创建一个属性与我的“Ingredient”实例变量匹配的“ArchivedIngredient”托管对象 - 然后在我需要存储时将“Ingredient”转换回“ArchivedIngredient”对象？如果是这样，那将如何进行？

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:59:15.013

> 根据我的阅读，不鼓励在托管对象中使用实例变量和方法。

我现在不明白你的意思，但如果你的意思是你不应该基于你的核心数据实体创建类，那你就错了。您可以使用核心数据检查器为您的实体分配自定义类，并通过选择模型上的实体并使用 Xcode 的产品菜单找到“创建 NSManagedObject 子类”来创建该类的实现的头文件和源文件。这将生成您的 NSManagedObject 子类。您可以添加实例方法和类方法，就像其他类一样。

当您修改自定义类的属性并希望保存这些更改时，您需要获取用于获取对象的托管对象上下文并调用 save 方法。这会将更改放入持久存储中。

另外，请注意，您调用“executeFetchRequest”的方法**不会**返回可变数组。它返回 NSArray 的不可变子类，您**必须**将其视为 NSArray。

# regex - 将 URL 重写为 Apache 和 Nginx 上的查询字符串

> ID：12946437
> 
> 赞同：10
> 
> 时间：2012-10-18T03:03:09.067
> 
> 标签：regex, apache, mod-rewrite, url-rewriting, nginx

我正在尝试在两台单独的服务器上设置一些路径重写，一台在 Apache 上使用 mod-rewrite，另一台在 Nginx 上使用 HttpRewriteModule。我不认为我正在尝试做任何太复杂的事情，但是我的正则表达式技能有点缺乏，我真的可以使用一些帮助。

具体来说，我正在尝试将格式化的 URL 转换为查询字符串，以便链接格式如下：

```
http://www.server.com/location/ 
```

会指出这一点：

```
http://www.server.com/subdirectory/index.php?content=location 
```

格式化 URL 末尾的任何额外内容都应附加到查询字符串中的“内容”参数中，因此：

```
http://www.server.com/location/x/y/z 
```

应该指出这一点：

```
http://www.server.com/subdirectory/index.php?content=location/x/y/z 
```

根据我所做的研究，我很确定这应该可以同时使用 Apache mod-rewrite 和 Nginx HttpRewriteModule，但我看不到让它工作。如果有人能给我一些关于如何将这些设置中的一个或两个的表达式放在一起的指示，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-30T21:53:38.290

在 nginx 中，您在重写指令中匹配“/location”，捕获变量 $1 中的尾部字符串并将其附加到替换字符串中。

```
server {
...
rewrite ^/location(.*)$ /subdirectory/index.php?content=location$1 break;
...
} 
```

在 Apache 的 httpd.conf 中，这看起来非常相似：

```
RewriteEngine On
RewriteRule ^/location(.*)$ /subdirectory/index.php?content=location$1 [L] 
```

查看本页末尾的示例：[https ://httpd.apache.org/docs/2.4/mod/mod_rewrite.html](https://httpd.apache.org/docs/2.4/mod/mod_rewrite.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T06:37:25.240

对于 Apache，在文档根目录的 htaccess 文件中，添加：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/subdirectory/index\.php$
RewriteRule ^(.*)$ /subdirectory/index.php?content=$1 [L] 
```

在 nginx 中，您首先要确保请求`/subdirectory/index.php`通过，然后重写其他所有内容：

```
location ~ /subdirectory/index\.php$ 
{ 
} 

location / 
{ 
    rewrite ^(.*)$ /subdirectory/index.php?content=$1 break; 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T03:11:20.213

搜索字符串：`(.+)/location/(.*)$`

替换字符串：`$1/subdirectory/index.php?content=location/$2`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-06T06:35:17.767

这可能是在 nginx 中执行此操作的最佳方法：

```
location ^~ /location/ {
    rewrite ^/(location/.*)$ /subdirectory/index.php?content=$1 last;
} 
```

有关更多详细信息，请参阅：

*   [http://nginx.org/r/location](http://nginx.org/r/location)
*   [http://nginx.org/r/rewrite](http://nginx.org/r/rewrite)

# python - 在 Python 中解析电子邮件内容

> ID：12946438
> 
> 赞同：1
> 
> 时间：2012-10-18T03:03:09.533
> 
> 标签：python, python-2.7

我每天都会收到一封电子邮件，其中包含我撰写的一些时事通讯的说明。我想解析电子邮件的内容以提取有用的部分并将它们存储在元组中。

以下是电子邮件内容的示例：

* * *

“没有有用信息的开场白。

(XXX 1-111)

[http://the_link_for_the_resource.com](http://the_link_for_the_resource.com)

(YYY 2-222)

[http://the_link_for_the_second_resource.com](http://the_link_for_the_second_resource.com)

...

另一个无用的句子”

* * *

在此示例中，“XXX”= 邮件列表，“1-111”= 段

我希望将信息存储在元组中 - (mailing_list,segment,url)

这样做的最佳方法是什么？

## 编辑：

我想确定在编写一些东西从服务器检索它之前解析消息的确切内容是否可行。因此，为了开始破解，我使用电子邮件模块和电子邮件文件编写了一个快速脚本。这是代码：

mail_file = open("new_board_mail.eml", "r")
mail_message = email.message_from_file(mail_file)
payload = mail_message.get_payload(decode=True)
charset = mail_message.get_content_charset('iso-8859-1')
mail_content = payload。解码（字符集）

我的理解是，这段代码会导致 `mail_content` 包含邮件内容的 Unicode 字符串。我将如何从这里解析内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:26:39.187

如果您使用的是 python，我建议您使用[imaplib](http://docs.python.org/library/imaplib.html)模块连接到您的邮箱，搜索特定的电子邮件（假设它来自某个地址或具有可识别的主题），然后解析内容。

# django - django 加入 2 个具有 2 个外键的表

> ID：12946441
> 
> 赞同：0
> 
> 时间：2012-10-18T03:03:25.807
> 
> 标签：django, django-models

我有 2 张桌子说 TableA 和 TableB

```
 class A(models.Model)
      A_name = models.CharField(max_length=48,primary_key=True)
      A_version = models.DecimalField(max_digits=3, decimal_places=0,null=False,blank=False)
      A_type = models.CharField(max_length=32, blank=True)
      class Meta:
             unique_together = ("A_name", "A_version") 

   class B(models.Model)
     B_number = models.CharField(max_length=32 ,primary_key=True)
     A_name = models.ForeignKey(A,related_name="AA_name",on_delete=models.DO_NOTHING)
     A_version = models.ForeignKey(A,related_name="AA_version",on_delete=models.DO_NOTHING)
         class Meta:
             unique_together = ("B_number","A_name", "A_version") 
```

现在我想做这样的事情：从 A、B 中选择 *，其中 B.B_name=A.A_name 和 B.B_version=A.A_version 和 A.A_type="type_name"。我无法执行获取，因为 A_type 不是唯一的，它可以返回多个对象。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:44:08.230

不确定这是否回答了您的问题，但如果您想通过使用连接仅通过一个查询获取所有对象，您可以使用`select_related`：

```
all_b = B.objects.all().select_related('A_name', 'A_version')
some_b = all_b[0]
some_b.A_name # does not incur extra db query 
```

如果您想要更多地控制查询，您可以随时添加过滤器：

```
B.objects.filter(A_name__A_type='type_name').select_related('A_name', 'A_version') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:31:43.737

我认为模型的设计不是很好。A 模型的 A_name 和 A_version 是唯一的。这意味着总会有一个对象具有唯一的 A_name 和 A_version 组合。

在模型 B 中，您可以引用 ID 字段，因为这将为您提供唯一的 A_name 和 A_version 组合。

您需要在 B:s save 方法中做的是确保没有新的或现有的记录获得与数据库中已经存在的相同的 B_number 和 A 引用

```
 class B(models.Model)
     B_number = models.CharField(max_length=32, unique=True) #Don't use as primary key
     A        = models.ForeignKey(A,on_delete=models.DO_NOTHING)

    def save(self, *args, **kvargs):
        if self.id:
            try:
                b_s = B.objects.get(B_number=self.B_number, A=self.A).exclude(pk=self.id)

                #The existing combination already exists:
                raise ValueError('The combination of B_number and A already exists')

            except B.DoesNotExist:
                #No existing records violates the rule
                pass
        else:
            try:
                b_s = B.objects.get(B_number=self.B_number, A=self.A)

                #The existing combination already exists:
                raise ValueError('The combination of B_number and A already exists')

            except B.DoesNotExist:
                #No existing records violates the rule
                pass

         #All is good, no violation
         super(B, self).save(*args, **kvargs) 
```

一旦这到位，您肯定知道当您在 A_type 上运行查询时，底层 B:s 是唯一的

示例数据：

```
ID        A_name        A_version    A_type
 1        "name1"       1.0          "type1"
 2        "name2"       1.1          "type1"
 3        "name2"       1.2          "type2"

 Model B
 ID  B_number  A
 1    "10"     1
 2    "20"     1
 3    "30"     2
 4    "40"     3

#Will return A.id=1 and A.id=2
a_s = A.objects.filter(A_type="type1")

for a in a_s:
    for b in a.b.all():
        print b.number, a.A_number, a.A_version 
```

因为我没有时间自己测试，所以我对错别字进行了预订。

# jsp - 如何调试 twitter 引导模式框？

> ID：12946443
> 
> 赞同：1
> 
> 时间：2012-10-18T03:03:41.887
> 
> 标签：jsp, twitter-bootstrap, modal-dialog

我正在尝试使用 Twitter 的引导程序来实现标准模式框。我让它在我的普通 Apache 服务器上工作，但它不能在使用 Tomcat6 的 JSP 中工作。

我不知道如何调试它。我可能有一些错误的副本，但我看不到是什么。

这是适用的代码：

```
<div class="modal hide fade" id="myModal">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">XXX</a>
    <h3>Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body?</p>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn">Close</a>
    <a href="#" class="btn btn-primary">Save changes</a>
  </div>
</div>

<a class="btn" data-toggle="modal" href="#myModal" >Launch Modal</a>

<script src="/javascript/jquery-1.7.0.min.js" type="text/javascript"></script>
<script src="/javascript/bootstrap-modal.js"></script> 
```

注意：jquery 和 bootstrap 都是按顺序加载的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:49:17.627

作为记录-当我在加载 jquery 之后加载 bootstrap-modal.js 时，bootstrap 的模态功能不起作用。当我在加载 jquery 之前加载 bootstrap-modal.js 时，bootstrap 的模态函数可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:42:03.943

@keshav 有钥匙，使用 javascript 控制台，这表明我加载 jquery 的 URL 是错误的。解决了这个问题，一切都很好。谢谢

# c++ - 将按钮界面添加到我的控制台应用程序

> ID：12946444
> 
> 赞同：3
> 
> 时间：2012-10-18T03:03:43.257
> 
> 标签：c++, visual-studio-2010, user-interface

我正在创建一个项目，我必须同步转盘和深度传感器开始运行。我想要做的是通过一些按钮输入一些预定义的参数来开始所有的过程，然后开始这个过程。

我的代码在 Visual Studio 2010 c++ 中，目前是一个控制台应用程序。

我是否使用了合适的解决方案？WPF 是否适合我的项目？或者我应该使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:12:15.393

如果你已经正确地创建了你的原始应用程序，你应该能够将它转换为一个类库，一旦编译可以在任何其他项目中引用。这将使您能够从任何其他项目类型（例如 ASP.NET WPF 等）调用您的代码...

查看：[http ://www.c-sharpcorner.com/uploadfile/61b832/creating-class-library-in-visual-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/61b832/creating-class-library-in-visual-C-Sharp/)

# android - “android.content.res.Resources$NotFoundException：资源 ID #0x0”错误

> ID：12946449
> 
> 赞同：1
> 
> 时间：2012-10-18T03:04:09.423
> 
> 标签：android, spinner, pug

我正在开发一个 Jade 多代理系统，它通过玉服务器在设备之间发送消息，一切正常，直到我需要添加一些 Spinner，我还通过接口从另一个类获取 ArrayList 对象。关于我做错了什么有什么想法吗？继承人的一些代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ventana_enviar_mensaje);

    Intent intent = getIntent();
    usuario = intent.getStringExtra("usuario");

    Button bt = (Button) findViewById(R.id.bt_enviar);
    bt.setOnClickListener(bt_enviar_pregunta_OnClick);

    bt = (Button) findViewById(R.id.bt_agregar);
    bt.setOnClickListener(bt_agregar_OnClick);

    //Register to interface class
    try{
        interfaz = MicroRuntime.getAgent(usuario).getO2AInterface(Interfaz.class);}
    catch (StaleProxyException e) {
        e.printStackTrace();
    } catch (ControllerException e) {
        e.printStackTrace();
    }

            //Put some values into spinners
    Spinner sp = (Spinner) findViewById(R.id.sp_categoria);

    adaptador = new ArrayAdapter<String>(this,0);
    adaptador.add("Cat1");
    adaptador.add("Cat2");
    adaptador.add("Cat3");
    adaptador.add("Cat4");
    sp.setAdapter(adaptador);
    adaptador.clear();

    sp = (Spinner) findViewById(R.id.sp_tipo);
    adaptador.add("Tipo1");
    adaptador.add("Tipo2");
    adaptador.add("Tipo3");
    adaptador.add("Tipo4");
    sp.setAdapter(adaptador);
    adaptador.clear();
    //Retrieve the list from another class
    ArrayList activos = new ArrayList();
    try {
        activos = interfaz.ObtenerActivos();
        sp = (Spinner) findViewById(R.id.sp_destinatarios);
        Iterator it = activos.iterator();
        while(it.hasNext())
        {
            adaptador.add(it.next().toString());
        }           
        sp.setAdapter(adaptador);
    } catch (FIPAException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:50:05.053

刚刚换了：

```
adaptador = new ArrayAdapter<String>(this,0); 
```

和：

```
adaptador = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_dropdown_item); 
```

我的错

# android - 在应用程序的所有活动中保持服务运行

> ID：12946450
> 
> 赞同：2
> 
> 时间：2012-10-18T03:04:13.567
> 
> 标签：android, service, android-activity

当应用程序的所有活动都可见时，如何保持服务运行。并仅在我离开应用程序时关闭服务？

有没有办法在应用程序的一个活动中启动服务并在同一应用程序的另一个活动中停止同一服务？

当用户离开应用程序时，我不希望该服务继续运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:05:38.920

真的没有“应用程序”和离开它的概念。如果从您的一个活动中打开一个链接，启动浏览器查看它，然后通过返回按钮返回，会发生什么情况？你真的离开了应用程序吗？

你的服务是做什么的？活动是否与它绑定？如果是这样，它将在最后一个客户端解除绑定后自动关闭。如果没有，它应该在完成工作后自行关闭（参见`IntentService`）。如果它不符合这些模式中的任何一个，也许您根本不需要服务，只需要一些后台线程？

编辑（基于以下评论）：

对于运行媒体播放器的服务，通常的方法是为服务提供持续通知，让用户启动一个活动来控制服务。或者在 JB 中的通知上有按钮来实现类似的功能。此外，如果您将服务设置为前台服务，这将赋予它更高的优先级，并且如果资源不足，它就不太可能被杀死。

# jquery - jQuery点击许多选择器

> ID：12946454
> 
> 赞同：2
> 
> 时间：2012-10-18T03:04:48.187
> 
> 标签：jquery, click, selector

我想知道哪种方法更好，为什么：A）点击一个文档，带有许多选择器，B）点击多个文档。

A的选择器也有限制吗？谢谢。

一个）

```
$(document).on('click', '#a, #b, #c, #d, #e', function(e){

}); 
```

对比

二）

```
$(document).on('click', '#a', function(e){

});

$(document).on('click', '#b', function(e){

});

$(document).on('click', '#c', function(e){

});

$(document).on('click', '#d', function(e){

});

$(document).on('click', '#e', function(e){

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:06:17.450

当然是第一种方法，因为它促进了最大的代码重用（因为您不需要为每个选择器重复函数体），因此维护起来最简单。

根据经验，您应该只在函数体不同时将代码分解为单独的函数。

您可以使用的选择器数量没有实际限制，因此不应该考虑。

当然，更好的选择是应用单个类并将您的选择器基于该类：

```
$(function() {
    $(".myClass").on('click', function() {
        //do something
    });
});​ 
```

最好的选择是应用一个受上下文限制的类（由于只选择一个类的效率低下）：

```
 $(function() {
    $(".link", "#context").on('click', function() {
        //do something
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T03:19:36.200

选项**A**称为多重选择器方法[http://api.jquery.com/multiple-selector/](http://api.jquery.com/multiple-selector/) -*选择所有指定选择器的组合结果*

> 您可以指定任意数量的选择器组合成一个结果。这种多表达式组合器是选择不同元素的有效方法。返回的 jQuery 对象中的 DOM 元素的顺序可能不相同，因为它们将按文档顺序排列。此组合器的替代方法是 .add() 方法。

**性能（选择器）** **=** *id vs 类 vs 标签 vs 伪 vs. 属性选择器* **==>** [http://jsperf.com/id-vs-class-vs-tag-selectors/2](http://jsperf.com/id-vs-class-vs-tag-selectors/2)

我看到多个选择器的优点：

*   便于使用
*   少写（代码紧凑）
*   如果您对所有 id 具有相同的功能，则完全支持 YAGNI*好*读：[http ://c2.com/cgi/wiki?YouArentGonnaNeedIt](http://c2.com/cgi/wiki?YouArentGonnaNeedIt)

**推荐**

`class`如果他们都做同样的事情，请考虑使用属性而不是这么多的 id

*像这样*

```
$(function() {
    $(".classname").click(function() {

    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T03:15:41.617

我同意你的A方法，

为什么你不使用 jquery 选择器？如果每个项目都有相同的功能，则可以使用 jquery 选择器并在每个项目中提供相同的类名，代码应如下所示：

```
<script>
    $(document).ready(function(){
         $(".item").click(function(){
            #your code here...
})
})
</script> 
```

其他方式，您可以创建一些函数，然后将参数发送给您的函数，这样您的代码就更少了，效率更高。我错了吗？

# linux - 如何在调用 ls 时编辑 fs/readdir.c 中的 readdir 函数以过滤掉特定文件？

> ID：12946456
> 
> 赞同：2
> 
> 时间：2012-10-18T03:05:01.773
> 
> 标签：linux, kernel, ls, readdir

有人可以告诉我以下代码的哪一部分中存在有关目录中存在的所有文件的信息吗？*当ls*尝试列出目录中的所有文件时，我试图过滤掉一些要隐藏的文件。

```
int vfs_readdir(struct file *file, filldir_t filler, void *buf)

{

      struct inode *inode = file->f_path.dentry->d_inode;
      int res = -ENOTDIR;
      if (!file->f_op || !file->f_op->readdir)
              goto out;

      res = security_file_permission(file, MAY_READ);
      if (res)
              goto out;

      res = mutex_lock_killable(&inode->i_mutex);
      if (res)
              goto out;

      res = -ENOENT;
      if (!IS_DEADDIR(inode)) {
              res = file->f_op->readdir(file, buf, filler);
              file_accessed(file);
      }
      mutex_unlock(&inode->i_mutex);
   out:
      return res;
} 
```

# utf-8 - j2me midlet 汉字显示消息乱码

> ID：12946459
> 
> 赞同：0
> 
> 时间：2012-10-18T03:05:12.773
> 
> 标签：utf-8, java-me, midp, midlet

我的 J2ME midlet 可以从 PHP 服务器检索中文字符的消息，但它是乱码。服务器基本上返回响应字符串并通过检测前 2 个字符。AA = 好，其他任何表示错误的消息将传递给调用函数进行显示

```
 InputStream is = null;
    StringBuffer sb = null;
        String str = "";
    HttpConnection http = null;
        DataOutputStream dos = null;
    try
    {
                URL = login.getURL();
        URL += ctlFunction + "/" + uriStr;
        URL = EncodeURL(URL);
                //System.out.println(URL);
                if(!ctlFunction.equals("login"))
                {
                    msg += "&user=" + login.getUsername();
                    msg += "&token=" + login.getToken();
                }
                msg += "&lang=" + System.getProperty("microedition.locale");
        // establish the connection
        http = (HttpConnection) Connector.open(URL);
        http.setRequestMethod(HttpConnection.POST);
                http.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
                http.setRequestProperty("Content-length", ""+EncodeURL(msg).getBytes().length);
                dos = http.openDataOutputStream();
                byte[] request_body = EncodeURL(msg).getBytes();
                for (int i = 0; i < request_body.length; i++)
                {
                        dos.writeByte(request_body[i]);
                }                        
        // server response
        if (http.getResponseCode() == HttpConnection.HTTP_OK)
        {
                    is = http.openDataInputStream();
                    int length = (int) http.getLength();
                    if (length != -1)
                    {
                        // Read data in one chunk
                        byte serverData[] = new byte[length];
                        is.read(serverData);
                        str = new String(serverData);
                    }
                    else  // Length not available...
                    {
                        ByteArrayOutputStream bStrm = new ByteArrayOutputStream();
                        int ch;
                        while ((ch = is.read()) != -1)
                            bStrm.write(ch);

                        str = new String(bStrm.toByteArray());
                        bStrm.close();    
                    }
        }
        else
        {
            networkError();
        }
    }
    catch (Exception e)
    {
        System.err.println("Error3: " + e.toString());
        networkError(e.toString());
    }
    finally
    {
        if (is != null)
            is.close();
        if (!str.equals(""))
            post = str;
        else
            networkError();
        if (http != null)
            http.close();
    }

    if (post != null)
    {
            String fate = post.substring(0, 2);
            if(fate.equals("AA"))
            {
                if(ctlFunction.equals("login"))
                {
                    String rawPost = post.substring(2);
                    Vector v = new Vector();
                    int index = 0;
                    //find the first occurrence of the SPLITTER
                    int endIndex = rawPost.indexOf(SPLITTER, index);
                    String item = "";
                    //extract the items until the end of the last SPLITTER found in the rawPost string
                    while(endIndex != -1)
                    {
                        item = rawPost.substring(index, endIndex);
                        index = endIndex + 1;
                        endIndex = rawPost.indexOf(SPLITTER, index);
                        v.addElement(item);
                    }
                    //extract the rest of the rawPost (the text item)
                    item = rawPost.substring(index);
                    v.addElement(item);
                    String[] ret = new String[v.size()];
                    v.copyInto(ret);
                    login.setToken(ret[0]);
                    login.setToday(ret[1]);
                    login.setNextDrawDay(ret[2]);
                }
        midlet.returnResults(post.substring(2), getCurrentDisplay(), ctlFunction);
            }
            else
            {
                String errmessage = post.substring(2);
                System.out.println(post);
                midlet.showInfo(post, getCurrentDisplay());
            }
    }
    else
    {
        networkError();
    } 
```

在 PHP 服务器上，我已将标头设置为 UTF-8 编码

```
<?php header("Content-Type:text/plain; charset=utf-8"); ?> 
```

什么可能是错的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:53:34.750

我发现这个用户有同样的问题，并且已经回答 [Read UTF8 strings from a server through http using MIDP](https://stackoverflow.com/questions/1095902/reading-utf8-strings-from-a-server-through-http-using-midp)。感谢答案。

我基本上编辑了我的 MIDP 代码

```
//                            is = http.openDataInputStream();
//                            int length = (int) http.getLength();
//                            if (length != -1)
//                            {
//                                // Read data in one chunk
//                                byte serverData[] = new byte[length];
//                                is.read(serverData);
//                                str = new String(serverData);
//                            }
//                            else  // Length not available...
//                            {
//                                ByteArrayOutputStream bStrm = new ByteArrayOutputStream();
//                                int ch;
//                                while ((ch = is.read()) != -1)
//                                    bStrm.write(ch);
//
//                                str = new String(bStrm.toByteArray());
//                                bStrm.close();    
//                            } 
```

至

```
 Reader r = new InputStreamReader(http.openInputStream(), "UTF-8");
                    int ch;
                    while((ch = r.read()) != -1)
                        str = str + (char)ch; 
```

只是想知道为什么读取字节会弄乱 UTF-8 字符？

# symfony - 在 Symfony 2 中验证动态加载的选项

> ID：12946461
> 
> 赞同：19
> 
> 时间：2012-10-18T03:05:18.877
> 
> 标签：symfony, validation, symfony-2.1

我的表单中有一个名为 *sub_choice* 的选项字段类型，其选项将通过 AJAX 动态加载，具体取决于名为 *parent_choice* 的父选项字段的选定值。加载选项非常有效，但在提交时验证 sub_choice 的值时遇到问题。它给出了“此值无效”验证错误，因为提交的值在构建时不在 sub_choice 字段的选择中。那么有没有办法可以正确验证 sub_choice 字段的提交值？下面是构建我的表单的代码。我正在使用 Symfony 2.1。

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('parent_choice', 'entity', array(
                    'label' => 'Parent Choice',
                    'class' => 'Acme\TestBundle\Entity\ParentChoice'
    ));

    $builder->add('sub_choice', 'choice', array(
                    'label' => 'Sub Choice',
                    'choices' => array(),
                    'virtual' => true
    ));
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-04-16T09:34:47.743

要做到这一点，您需要`sub_choice`在提交表单之前覆盖该字段：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    ...

    $builder->addEventListener(FormEvents::PRE_SUBMIT, function (FormEvent $event) {
        $parentChoice = $event->getData();
        $subChoices = $this->getValidChoicesFor($parentChoice);

        $event->getForm()->add('sub_choice', 'choice', [
            'label'   => 'Sub Choice',
            'choices' => $subChoices,
        ]);
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-31T07:57:55.843

这接受任何值

```
 $builder->addEventListener(FormEvents::PRE_SUBMIT, function (FormEvent $event) {
    $data = $event->getData();
    if(is_array($data['tags']))$data=array_flip($data['tags']);
    else $data = array();
    $event->getForm()->add('tags', 'tag', [
        'label'   => 'Sub Choice',
        'choices' => $data,
        'mapped'=>false,
        'required'=>false,
        'multiple'=>true,
    ]);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-18T18:11:43.293

为未来的读者添加一种替代方法，因为我必须进行大量调查才能使我的表单正常工作。这是细分：

1.  通过 jquery 向下拉列表中添加“新建”选项
2.  如果选择“新建”，则显示新表单字段“自定义选项”
3.  提交表格
4.  验证数据
5.  保存到数据库

树枝的jQuery代码：

```
$(function(){
    $(document).ready(function() {
        $("[name*='[custom_option]']").parent().parent().hide(); // hide on load

        $("[name*='[options]']").append('<option value="new">New</option>'); // add "New" option
        $("[name*='[options]']").trigger("chosen:updated");
    });

    $("[name*='[options]']").change(function() {
        var companyGroup = $("[name*='[options]']").val();

        if (companyGroup == 'new') { // when new option is selected display text box to enter custom option
            $("[name*='[custom_option]']").parent().parent().show();
        } else {
            $("[name*='[custom_option]']").parent().parent().hide();
        }
    });
});

// Here's my Symfony 2.6 form code:
    ->add('options', 'entity', [
    'class'         => 'Acme\TestBundle\Entity\Options',
    'property'      => 'display',
    'empty_value'   => 'Select an Option',
    'mapped'        => true,
    'property_path' => 'options.optionGroup',
    'required' => true,
])
->add('custom_option', 'text', [
    'required' => false,
    'mapped'   => false,
]) 
```

要处理表单数据，我们需要使用 PRE_SUBMIT 表单事件。

```
 $builder->addEventListener(FormEvents::PRE_SUBMIT, function (FormEvent $event) {
    $data = $event->getData();
    $form = $event->getForm();
    if (isset($data['options']) && $data['options'] === 'new') {
        $customOption = $data['custom_option'];

        // todo: handle this better on your own
        if (empty($customOption)) {
            $form->addError(new FormError('Please provide a custom option'));
            return;
        }

        // Check for a duplicate option
        $matches = $this->doctrine->getRepository('Acme\TestBundle\Entity\Options')->matchByName([$customOption]);
        if (count($matches) > 0) {
            $form->addError(new FormError('Duplicate option found'));
            return;
        }

        // More validation can be added here

        // Creates new option in DB
        $newOption = $this->optionsService->createOption($customOption); // return object after persist and flush in service
        $data['options'] = $newOption->getOptionId();
        $event->setData($data);
    }
}); 
```

如果您有任何问题或疑虑，请告诉我。我知道这可能不是最好的解决方案，但它确实有效。谢谢！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-08-14T10:52:06.140

您不能不构建 sub_choice 验证，因为在配置其验证器期间您不知道哪些值是有效的（值取决于 parent_choice 的值）。

您可以做的是在您的控制器中创建 new YourFormType() 之前将 parent_choice 解析为实体。然后，您可以获得 sub_choice 的所有可能值，并通过表单构造函数提供它们 - new YourFormType($subChoice)。

在 YourFormType 中，您必须添加 __construct 方法，如下所示：

```
/**
 * @var array
 */
protected $subChoice = array();

public function __construct(array $subChoice)
{
    $this->subChoice = $subChoice;
} 
```

并使用表单中提供的值添加：

```
$builder->add('sub_choice', 'choice', array(
                'label' => 'Sub Choice',
                'choices' => $this->subChoice,
                'virtual' => true
)); 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-04-18T14:12:57.807

假设你有 id 的权利的子选择？创建并清空具有一定数量值的数组并将其作为选择

`$indexedArray = []; for ($i=0; $i<999; $i++){ $indexedArray[$i]= ''; }`

然后`'choices' => $indexedArray,`:)

# ip - 如何在 WiFi Direct 中获取非群组所有者的 IP 地址？

> ID：12946463
> 
> 赞同：5
> 
> 时间：2012-10-18T03:05:51.823
> 
> 标签：ip, wifi, android-wifi, wifi-direct

如果提议连接的设备被指定为组所有者，我们如何知道其他设备的 IP 地址？我们可以得到群主的IP，但我不知道如何获取非群主的IP。因为请求连接的不是设备，所以它没有 WifiP2pInfo 类。它甚至不知道群主的IP。如何从该设备向群组所有者发送数据？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:22:14.420

You can fetch local IP addresses of both peers and than compare them with group owner IP. As you may already know you can easily get group owner IP with this line of code:

```
WifiP2pInfo.info.groupOwnerAddress.getHostAddress(); 
```

For local IP you can simply use this:

```
localIp = getDottedDecimalIP(getLocalIPAddress()); 
```

with the related methods below:

```
private byte[] getLocalIPAddress() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface
                .getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf
                    .getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()) {
                    if (inetAddress instanceof Inet4Address) {
                        return inetAddress.getAddress();
                    }
                }
            }
        }
    } catch (SocketException ex) {
        // Log.e("AndroidNetworkAddressFactory", "getLocalIPAddress()", ex);
    } catch (NullPointerException ex) {
        // Log.e("AndroidNetworkAddressFactory", "getLocalIPAddress()", ex);
    }
    return null;
}

private String getDottedDecimalIP(byte[] ipAddr) {
    if (ipAddr != null) {
        String ipAddrStr = "";
        for (int i = 0; i < ipAddr.length; i++) {
            if (i > 0) {
                ipAddrStr += ".";
            }
            ipAddrStr += ipAddr[i] & 0xFF;
        }
        return ipAddrStr;
    } else {
        return "null";
    }
} 
```

# objective-c - 在应用程序启动时使用复选框设置 BOOL 的值？

> ID：12946464
> 
> 赞同：1
> 
> 时间：2012-10-18T03:06:05.190
> 
> 标签：objective-c, cocoa, checkbox, interface-builder, boolean

对 ObjectiveC 和 Cocoa 来说还是很新的。希望这个问题的答案是直截了当的，但不是很明显。

我有一个简单的应用程序，它使用几个文本字段来设置几个字符串，这些字符串在第三个文本字段中搜索字符串，结果显示在标签中。对于这个练习，我`-rangeOfString`使用`NSString`. 为了让事情变得更有趣，我决定添加一个复选框来进行区分大小写的搜索。

这一切都很好，除了一件事：复选框的状态和它“控制”的 BOOL 在应用程序启动时不同步。在 IB 中，复选框状态设置为打开。复选框操作的目标是`-(IBAction)checkboxChange`评估复选框状态并相应设置 BOOL 的方法。BOOL 的创建值为 NO。

目前我有一行代码`-awakeFromNib`将 BOOL 设置为 YES。我所追求的是一种让复选框在加载应用程序时发送其动作的方法，因此 BOOL 设置为与复选框状态一致。我以为我可以`-applicationDidFinishLoading`在 AppDelegate 中使用，但我不知道如何引用那里的复选框。我还认为我可以在该方法中设置 BOOL 的值，但即使我已经导入了定义 BOOL 的 .h 文件 XCode 抱怨标识符未定义。

如果它是相关的，我所有的代码都在一个名为 AppController 的类中，我根本没有使用默认的 AppDelegate。

感谢您的阅读和您的建议/回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:42:56.623

`NSUserDefaults`是您在应用程序启动时保持偏好状态的最佳朋友。`synchronize`确保在进行更改后调用该方法以将其保存到磁盘。在某些情况下，您可能希望延迟同步，直到应用程序即将进入后台状态。

[NSUserDefaults 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

示例代码：

```
#define USER_DEFAULT_CASE_SENSITIVE @"USER_DEFAULT_CASE_SENSITIVE"

-(IBAction)checkboxChange {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setBool:self.caseSensitive.on forKey:USER_DEFAULT_CASE_SENSITIVE];
    [defaults synchronize];
} 
```

要在应用程序再次启动时恢复它：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // other code

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    self.caseSensitive.on = [defaults boolForKey:USER_DEFAULT_CASE_SENSITIVE]
} 
```

# database - 地理空间数据库云服务器

> ID：12946475
> 
> 赞同：1
> 
> 时间：2012-10-18T03:08:18.670
> 
> 标签：database, google-app-engine, cloud, geospatial

有地理空间数据的云托管解决方案吗？我目前正在编写一个目录样式的应用程序，企业可以在其中注册，然后用户可以找到附近的应用程序。

我正在为此考虑使用 Google App Engine，但据我所知，自从 Google 更新了 App Engine 的定价以来，运行 GeoModel 代码非常昂贵（每年高达数万美元）。App Engine 的数据库似乎并不真正适合这种查询（尽管 SQL 解决方案可能是一个答案）。

我希望找到一种服务，我可以发送 HTTP 请求以将数据（企业 ID、名称和图标 url）添加到数据库，然后找到另一个服务来查找给定点附近的企业列表. 服务更可取，因为这是为客户完成的工作，我们希望通过尽可能少的来自我们或客户所需的交互来管理解决方案。

编辑：我刚刚发现使用 PostgreSQL 且价格合理的[cartodb.com 。](http://cartodb.com)还有其他选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T05:15:39.220

App Engine [Search API](https://developers.google.com/appengine/docs/python/search/)（目前处于实验阶段）支持 GeoPoints 和 geosearch，非常适合您描述的那种查询。

有关更多信息和示例，请参阅 Google Developers Academy (GDA) [App Engine Search API 类。](https://developers.google.com/academy/apis/cloud/appengine/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:19:16.480

[http://www.iriscouch.com/](http://www.iriscouch.com/)是 CouchDB 的基于云的主机，它们支持 CouchDB 的 geocouch 扩展来存储 geoJSON 数据并执行空间查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T23:18:31.277

我们决定选择[cartodb.com](http://cartodb.com)，因为看起来他们的价格和易用性比不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T19:18:30.400

您提到要使用 CartoDB，这是一个不错的选择，具有漂亮的 UI。

补充一下，如果您只是在寻找可扩展的后端，您可以使用 StormDB。它是一个带有地理空间扩展的云托管 SQL 数据库。您的数据会自动分布在多个节点之间，以实现写入、读取和并行查询的可扩展性。

# visual-studio - IIS Express 配置/元数据库文件在哪里找到？

> ID：12946476
> 
> 赞同：366
> 
> 时间：2012-10-18T03:08:37.797
> 
> 标签：visual-studio, iis-express

哪里可以找到 IIS Express 配置/元数据库文件？

* * *

## 回答 #1

> 赞同：609
> 
> 时间：2012-10-18T03:08:37.797

配置文件称为**applicationhost.config**。它存储在这里：

我的文档 > IIS Express > 配置

通常，但并非总是如此，这些路径之一将起作用

```
%userprofile%\documents\iisexpress\config\applicationhost.config
%userprofile%\my documents\iisexpress\config\applicationhost.config 
```

**VS2019 的更新**
如果您使用的是 Visual Studio 2019+，请检查以下路径：

```
$(solutionDir)\.vs\{projectName}\config\applicationhost.config 
```

**VS2015 更新 *（来源：@Talon）***
如果您使用的是 Visual Studio 2015-2017，请检查以下路径：

```
$(solutionDir)\.vs\config\applicationhost.config 
```

在 Visual Studio 2015+ 中，您还可以通过更改项目文件（例如：MyProject.csproj）中的设置来配置使用哪个**applicationhost.config文件。**`<UseGlobalApplicationHostFile>true|false</UseGlobalApplicationHostFile>`（来源：[MSDN 论坛](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/4341a873-2ae8-4ded-878c-1cbd74c599ba/useglobalapplicationhostfile-property?forum=msbuild)）

* * *

## 回答 #2

> 赞同：118
> 
> 时间：2017-01-09T17:47:34.217

**对于 VS 2015 和 VS 2017**：右键单击 IIS Express 系统托盘图标（运行应用程序时），然后选择“显示所有应用程序”：

[![显示备选方案的 IIS Express 系统托盘图标的上下文菜单](../Images/5f89d1ad127ceef89f855b974fe39ba8.png)](https://i.stack.imgur.com/vRzie.png)

然后，选择相关应用，点击applicationhost.config文件路径：

[![显示带有 applicationhost.config 文件路径的任意网站的对话框](../Images/90c97501a1165c31d476c04844f79f77.png)](https://i.stack.imgur.com/9NfDS.png)

* * *

## 回答 #3

> 赞同：95
> 
> 时间：2015-08-11T11:43:13.903

自引入 Visual Studio 2015 以来，此位置已更改并添加到解决方案根目录下的以下位置：

```
C:\<Path\To\Solution>\.vs\config\applicationhost.config 
```

我希望这可以节省您一些时间！

* * *

## 回答 #4

> 赞同：59
> 
> 时间：2015-10-29T18:56:39.560

回到原点并包括所有版本的 Visual Studio，**@Myster**最初表示；

**在 Visual Studio 2015**之前，applicationhost.config 的路径是：

```
%userprofile%\documents\iisexpress\config\applicationhost.config
%userprofile%\my documents\iisexpress\config\applicationhost.config 
```

**Visual Studio 2015/2017**路径可以在以下位置找到：（**信用：@Talon**）

```
$(solutionDir)\.vs\config\applicationhost.config 
```

**Visual Studio 2019**路径可在以下位置找到：（**来源：@Talon**）

```
$(solutionDir)\.vs\config\$(ProjectName)\applicationhost.config 
```

但可能会引起一些人注意的是 .sln 文件中的项目设置可以重新填充**Visual Studio 2015+**的 applicationhost.config 。（**信用：@Lex Li**）

因此，如果您在 applicationhost.config 中进行更改，您还必须确保您的更改在此处匹配：

```
$(solutionDir)\ProjectName.sln 
```

两个重要设置应如下所示：

```
Project("{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}") = "ProjectName", "ProjectPath\", "{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}" 
```

和

```
VWDPort = "Port#" 
```

这里重要的是，如果您打算进行更改，.sln 中的两个设置必须分别与 applicationhost.config 文件中的名称和 bindingInformation 匹配。可能有更多的地方链接这两个文件，当我通过评论或更多经验找到更多链接时，我会更新。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-16T18:56:31.103

对于**Visual Studio 2019 (v16.2.4)**，我只能在这里找到这个文件：

*C:\Users\\Documents\IISExpress\config\applicationhost.config* [![应用程序主机配置](../Images/883d698c3aaa15d0e6ea749f7723dbe4.png)](https://i.stack.imgur.com/b4d4H.png)

希望这会有所帮助，因为我无法找到上述建议中提到的 .vs 文件夹位置。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-03-12T10:40:31.707

我认为这里的所有答案都是相关的，但是如果像我一样，你正在寻找 Visual Studio 在创建**新**版本的**applicationHost.config时从哪里获取*****模板***，那么你可以在这里查看：

 ****```
C:\Program Files (x86)\IIS Express\config\templates\PersonalWebServer 
```

如果您经常在同一个项目的多个分支上工作并在其中的许多分支中按“调试”，这种情况就会发生很多。在此处进行编辑将确保编辑传播到创建的任何新项目/解决方案文件夹。

答案间接来自[这个答案](https://stackoverflow.com/questions/49168276/creation-of-the-virtual-directory-http-localhost16858-failed-with-the-error)****

# log4j - 记录共享中的 passthru 子系统

> ID：12946480
> 
> 赞同：2
> 
> 时间：2012-10-18T03:08:59.607
> 
> 标签：log4j, single-sign-on, alfresco, ntlm

我按照教程扩展了 Share 中的 cm:person 对象。本质上，这涉及到对 userprofile webscript、UserFactory 类扩展和引用此类的 bean 的一些更改。

由于进行了这些更改，SSO 不再起作用。到目前为止，我们已经使用 AD 凭据中的 NTLM SSO，效果很好。到目前为止，SSO 仍然适用于 /alfresco 和 cifs，但用户不再自动登录 /share。用户可以输入其 AD 详细信息以手动登录。

使这难以解决的问题是 - 我无法在日志中获取任何详细信息。在我添加的 log4j 属性文件中：

```
log4j.logger.org.alfresco.smb.protocol.auth=debug
log4j.logger.org.alfresco.acegi=debug
log4j.logger.org.alfresco.passthru.auth=debug 
```

当我在 CIFS 共享中打开一个文件夹时，我看到：

```
13:01:17,410 DEBUG [org.alfresco.smb.protocol.auth] Mapped client /192.168.1.114 to domain null
13:01:17,631 DEBUG [org.alfresco.smb.protocol.auth] Passthru sessId=10, auth ctx=[NTLM,Challenge=f93fbe68854cf0b8]
13:01:17,631 DEBUG [org.alfresco.smb.protocol.auth] Using Write transaction
13:01:17,636 DEBUG [org.alfresco.smb.protocol.auth] Setting current user using person alfresco.admin (username ChrisO)
13:01:17,636 DEBUG [org.alfresco.smb.protocol.auth] Passthru authenticate user=alfresco.admin, FULL
13:01:17,637 DEBUG [org.alfresco.smb.protocol.auth] Using Write transaction
13:01:17,640 DEBUG [org.alfresco.smb.protocol.auth] Closed auth session, sessId=10 
```

当我导航到 /alfresco 时，我看到：

```
13:04:06,347 DEBUG [org.alfresco.passthru.auth] Authenticate org.alfresco.repo.security.authentication.ntlm.NTLMPassthruToken@4374c52a: Username: null; Password: [PROTECTED]; Authenticated: false; Details: null; Not granted any authorities via token
13:04:06,556 DEBUG [org.alfresco.passthru.auth] Passthru stage 1 token org.alfresco.repo.security.authentication.ntlm.NTLMPassthruToken@4374c52a: Username: null; Password: [PROTECTED]; Authenticated: false; Details: MINECORP\192.168.1.200,TCP/IP NetBIOS; Not granted any authorities
13:04:06,559 DEBUG [org.alfresco.passthru.auth] Authenticate org.alfresco.repo.security.authentication.ntlm.NTLMPassthruToken@4374c52a: Username: chriso; Password: [PROTECTED]; Authenticated: false; Details: MINECORP\192.168.1.200,TCP/IP NetBIOS; Not granted any authorities via token 
```

但我根本没有得到任何输出，只是为了导航到 /share。当我在共享的登录页面输入我的详细信息时，我看到的只是：

```
13:06:56,690 DEBUG [org.alfresco.passthru.auth] Authenticate user=ChrisO via local credentials
13:06:56,690 DEBUG [org.alfresco.passthru.auth] Authenticate org.alfresco.repo.security.authentication.ntlm.NTLMLocalToken@7f3384c9: Username: chriso; Password: [PROTECTED]; Authenticated: false; Details: null; Not granted any authorities via token
13:06:56,903 DEBUG [org.alfresco.passthru.auth] Authenticated token=org.alfresco.repo.security.authentication.ntlm.NTLMLocalToken@7f3384c9: Username: chriso; Password: [PROTECTED]; Authenticated: true; Details: null; Granted Authorities: ROLE_AUTHENTICATED 
```

所以我不确定我在 log4j 属性中错过了什么。如果 SSO 不起作用，我认为发送的请求或收到的回复一定存在某种问题，但我看不到有关它们的任何信息。有人知道 Share passthru 子系统的不同 log4j 目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T09:11:03.707

对于共享 SSO 日志记录，您必须在共享 Web 应用程序中调整 log4j.properties 文件。为 org.alfresco.web.site.servlet.SSOAuthenticationFilter 调整记录器，您应该会看到输出。

根据您的日志输出，我假设您没有正确调整 SSO 的共享配置。关于“本地凭据”的输出显示共享登录是通过标准登录执行的。您是否将 share-config-custom.xml 中的“Remote”配置更改为使用 /wcs 而不是 /s？你有指定是真的吗？

# iphone - iPhone 中的增强现实从哪里开始？

> ID：12946481
> 
> 赞同：3
> 
> 时间：2012-10-18T03:09:00.250
> 
> 标签：iphone, ios, xcode, string

我使用 Xcode 为 iOS 做了很多应用程序。我想探索增强现实在 iPhone 中的可行性。我搜索了它，发现我们需要它的 SDK，即 Qualcom 或 String。有人可以建议我从哪个开始最好吗？以及与此相关的任何启动示例教程。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:55:12.723

如果您想了解增强现实和许多不同的 API、IDE、引擎和 SDK，这本书可能是您的最佳资源

[Pro iOS 5 增强现实](https://rads.stackoverflow.com/amzn/click/com/1430239123)

它适用于 iOS 5，但我认为没有任何采用会阻止它与 iOS 6 一起使用。太棒了！它展示了高通演示、Open-CV、String 等等！

作者在整本书中与您一起使用示例和解释，这些示例和解释非常有趣和酷。

看完这本书，感觉自己是专业的，看了评论，很有价值的一本书！

回答您的终极问题，哪个是最好的 SDK/API？我认为这取决于你想要什么，它们有不同的用途、功能、学习曲线等。我建议你阅读这本书来探索所有

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:33:28.197

您可以使用[iPhone-AR-Toolkit](https://github.com/a1phanumeric/iPhone-AR-Toolkit)。它在 GitHub 上，我添加了很多有用的东西，比如雷达、现代标注等......

![在此处输入图像描述](../Images/e21a9cbccd8ba1e7aea6bd0326815080.png)

# php - openSSL 不适用于 PHP 内置网络服务器

> ID：12946486
> 
> 赞同：25
> 
> 时间：2012-10-18T03:09:22.977
> 
> 标签：php, openssl, localhost

**操作系统：** Ubuntu 12.04 64 位

**PHP版本：** 5.4.6-2~精确+1

当我通过内置网络服务器（php5 -S localhost:8000）测试 https 页面时，Firefox（16.0.1）说“加载问题：连接中断”，而终端告诉我“::1 ：37026 无效请求（不支持的 SSL 请求）”。

**phpinfo()**告诉我：

*   注册流套接字传输：tcp、udp、unix、udg、ssl、sslv3、tls
*   [卷曲] SSL：是的
*   SSL 版本：OpenSSL/1.0.1
*   打开ssl：

    OpenSSL 支持：启用

    OpenSSL 库版本 OpenSSL 1.0.1 2012 年 3 月 14 日

    OpenSSL 标头版本 OpenSSL 1.0.1 2012 年 3 月 14 日

是的，http 页面工作得很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-18T03:18:55.097

请参阅内置网络服务器 shim 的手册部分：http:
[//php.net/manual/en/features.commandline.webserver.php](http://php.net/manual/en/features.commandline.webserver.php)

它不支持 SSL 加密。它适用于普通的 HTTP 请求。`openssl`扩展和功能支持无关。它不接受请求或通过流包装器发送响应。

如果您希望 SSL 在其上运行，请尝试使用`stunnel`包装器：

```
php -S localhost:8000 &   
stunnel3 -d 443 -r 8080 
```

反正就是用来玩的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2021-08-29T10:48:44.170

距离上次更新已经三年了；这是我在 2021 年在 macOS 上运行它的方法（作为 mario 答案的扩展）：

```
# Install stunnel
brew install stunnel

# Find the configuration directory
cd /usr/local/etc/stunnel

# Copy the sample conf file to actual conf file
cp stunnel.conf-sample stunnel.conf

# Edit conf
vim stunnel.conf 
```

修改`stunnel.conf`为如下所示：（其他选项都可以删除）

```
; **************************************************************************
; * Global options                                                         *
; **************************************************************************

; Debugging stuff (may be useful for troubleshooting)
; Enable foreground = yes to make stunnel work with Homebrew services
foreground = yes
debug = info
output = /usr/local/var/log/stunnel.log

; **************************************************************************
; * Service definitions (remove all services for inetd mode)               *
; **************************************************************************

; ***************************************** Example TLS server mode services

; TLS front-end to a web server
[https]
accept = 443
connect = 8000
cert = /usr/local/etc/stunnel/stunnel.pem
; "TIMEOUTclose = 0" is a workaround for a design flaw in Microsoft SChannel
; Microsoft implementations do not use TLS close-notify alert and thus they
; are vulnerable to truncation attacks
;TIMEOUTclose = 0 
```

这在端口 443 接受 HTTPS / SSL 并连接到在端口 8000 运行的本地网络服务器，使用 stunnel 的默认伪造证书在`/usr/local/etc/stunnel/stunnel.pem`. 日志级别 is`info`并且日志输出写入`/usr/local/var/log/stunnel.log`.

启动通道：

```
brew services start stunnel # Different for Linux 
```

启动网络服务器：

```
php -S localhost:8000 
```

现在您可以访问`https://localhost:443`访问您的网络服务器：[screenshot](https://i.stack.imgur.com/ezvK5.png)

应该有一个证书错误，您必须单击浏览器警告，但这会让您到达可以使用 HTTPS 请求访问您的本地主机进行开发的地步。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-09T19:51:50.353

最近一直在学习nginx和Laravel，多次出现这个错误。很难诊断，因为您需要同时将 nginx 与 Laravel 以及操作系统中的 SSL 设置对齐（假设您正在制作自签名证书）。

> 如果您在 Windows 上，则更加困难，因为在处理 SSL 证书时必须与 unix 回车作斗争。有时您可以正确完成这些步骤，但您会被证书验证问题所毁。我发现诀窍是在 Ubuntu 或 Mac 中制作证书并将它们通过电子邮件发送给自己，或者使用 linux 子系统。

就我而言，我一直遇到一个问题，我在某处声明**HTTPS**`php artisan serve`但仅适用于**HTTP**。

我只是`Invalid request (Unsupported SSL request)`在 SSL 连接正常后再次导致此错误。原来是我`Axios`用来向`https://`. 将其更改为 POST`http://`修复了它。

我对任何人的建议是查看HTTP/HTTPS 的使用**位置和方式。**

教科书的定义可能类似于`php artisan serve`仅适用于 HTTP 但需要底层 SSL 层。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-06T08:08:55.157

## 使用[Ngrok](https://ngrok.com)

1.  像这样公开服务器的端口： `ngrok http <server port>`

2.  使用 ngrok 的安全公共地址（带有 https 的地址）浏览。

注意：虽然它的作用就像一个魅力，但它似乎有点矫枉过正，因为它需要互联网并且希望得到更好的建议。

# c# - 是否可以将非特殊文件夹用作 FolderBrowserDialog 的根文件夹？

> ID：12946488
> 
> 赞同：3
> 
> 时间：2012-10-18T03:09:37.593
> 
> 标签：c#, .net, wpf, winforms, folderbrowserdialog

[FolderBrowserDialog.RootFolder 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.rootfolder.aspx)仅限于[Environment.SpecialFolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)枚举器中定义的特殊文件夹。但是在我的应用程序中，我们需要显示此对话框，但根路径需要可配置，并且通常是自定义文件夹，与枚举器中的任何特殊文件夹无关。

如何显示分配给自定义文件夹的根目录的文件夹浏览器？也许 RootFolder 属性不可能，但是否可以通过其他方式产生相同的效果（即用户无法在根文件夹之外查看或选择）。在[这个答案](https://stackoverflow.com/a/1451174/385387)中，有人暗示可能使用反射操作，但没有更新。知道这在.NET中是否可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:34:57.757

我根据ParkerJay86的[这个解决方案编写了这个解决方案。](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/4ba0955a-e963-4528-a5f0-105fa8536839)该解决方案适用于 Windows 8，并测试了多个路径。考虑您指定的 rootFolder 应该以`DriveLetter:\`“ `C:\ProgramData`”开头

```
 private void browseFolder_Click(object sender, EventArgs e)
    {
        String selectedPath;
        if (ShowFBD(@"C:\", "Please Select a folder", out selectedPath))
        {
            MessageBox.Show(selectedPath);
        }
    }

public bool ShowFBD(String rootFolder, String title, out String selectedPath)
{
    var shellType = Type.GetTypeFromProgID("Shell.Application");
    var shell = Activator.CreateInstance(shellType);
    var result = shellType.InvokeMember("BrowseForFolder", BindingFlags.InvokeMethod, null, shell, new object[] { 0, title, 0, rootFolder });
    if (result == null)
    {
        selectedPath = "";
        return false;
    }
    else
    {
        StringBuilder sb = new StringBuilder();
        while (result != null)
        {
            var folderName = result.GetType().InvokeMember("Title", BindingFlags.GetProperty, null, result, null).ToString();
            sb.Insert(0, String.Format(@"{0}\", folderName));
            result = result.GetType().InvokeMember("ParentFolder", BindingFlags.GetProperty, null, result, null);
        }
        selectedPath = sb.ToString();

        selectedPath = Regex.Replace(selectedPath, @"Desktop\\Computer\\.*\(\w:\)\\", rootFolder.Substring(0, 3));
        return true;
    }
} 
```

# php - 如何在 Yii 应用程序中使用 HttpRequest 类

> ID：12946492
> 
> 赞同：0
> 
> 时间：2012-10-18T03:09:59.503
> 
> 标签：php, http, yii

> **可能重复：**
> [PHP HTTP-Request](https://stackoverflow.com/questions/4565451/php-http-request)

我想在我的 Yii 应用程序中使用 PHP Core 类。然而，Yii 会自动尝试将类名作为文件导入。

如何在 Yii 中使用 PHP 核心类而不尝试导入文件？

编辑：（添加代码）

```
$r = new HttpRequest('http://example.com/feed.rss', HttpRequest::METH_GET);
$r->setOptions(array('lastmodified' => filemtime('local.rss')));
$r->addQueryData(array('category' => 3));
try {
    $r->send();
    if ($r->getResponseCode() == 200) {
        file_put_contents('local.rss', $r->getResponseBody());
    }
} catch (HttpException $ex) {
    echo $ex;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:22:57.170

默认情况下，未安装/启用 HttpRequest PHP 安装。你需要安装它。

因为它不存在 Yii 试图从它的已知文件夹中自动加载。

# sql - JOIN中的sql语法错误

> ID：12946493
> 
> 赞同：0
> 
> 时间：2012-10-18T03:10:02.903
> 
> 标签：sql, select, join

我有这个简单的 SQL 连接查询，它在第二个给我一个语法错误`FROM`

```
SELECT * FROM ##temporderstable P 
FROM supporder Y join backorder ON P.catalogid = Y.backorder 
GROUP BY P.catalogid 
```

我无法弄清楚它有什么问题，有什么提示吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:13:13.387

你不能有两个这样的 FROM 子句......

您可能意味着 JOIN 但您需要另一个 ON 条件：

```
SELECT *
  FROM ##temporderstable P 
  JOIN supporder Y ON P.catalogid = Y.backorder 
  JOIN backorder B ON B.xxxxxxxxx = P.xxxxyyyyy
 GROUP BY P.catalogid; 
```

第二个 ON 需要引用 B 列和 P 或 Y 列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T03:13:27.000

```
SELECT * 
FROM 
    ##temporderstable P 
    JOIN supporder Y 
    ON P.catalogid = Y.backorder 
GROUP BY P.catalogid 
```

此外，您的查询没有任何聚合函数，因此您应该考虑需要 GROUPing on`P.catalogid`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T03:14:59.950

您的查询有两个 FROM 子句。它应该是这样的。

```
SELECT 
    * 
FROM 
    ##temporderstable P 
INNER JOIN 
    supporder Y 
ON 
    P.catalogid = Y.backorder 
GROUP BY 
    P.catalogid 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T03:27:40.573

两个`From`子句不适用。您必须只使用一个，并且在其中您必须连接两个表。

# opencv - 将 Cv::Mat 的数据存储在 std::vector 中

> ID：12946494
> 
> 赞同：1
> 
> 时间：2012-10-18T03:10:11.400
> 
> 标签：opencv, stdvector

我想将数据从 cv::Mat 复制到 std::vector。我显然可以遍历整个 Mat 并一个一个地复制每个值，但我希望使用 copyTo、克隆或某种指针操作可能有一种更简单的方法。

有人对这个问题有任何见解吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T05:04:44.757

Assuming your Mat is CV_8UC1, you can do following.

```
cv::Mat mat(nrows,ncols,CV_8UC1);
...
std::vector<unsigned char> vec;
vec.assign(mat.data,mat.data+nrows*ncols); 
```

For multiple channel image with different pixel type, I think you will be able to easily generalize the code above.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-21T03:51:33.360

这对我自己有用。我有`Mat matVec2f`大小为 Nx1、类型为 Vec2f 和大小为 N 的向量。以下代码将 Mat 的数据复制到向量中。我相信这对于 Vec2f 以外的数据类型应该同样适用。

```
int N = 10;
vector<Point2f> vec(N);
matVec2f.copyTo(Mat(vec, false)); 
```

# algorithm - 用于计算嵌套间隔的 Sub O(n^2) 算法？

> ID：12946497
> 
> 赞同：10
> 
> 时间：2012-10-18T03:10:20.217
> 
> 标签：algorithm, big-o, computational-geometry

我们有一个形式为 的区间列表。对于每个区间，我们要计算嵌套在其中的其他区间的数量。 `[a[i], b[i]]`

例如，如果我们有两个区间，`A = [1,4]`并且`B = [2,3]`。那么 for 的计数`B`将是`0`因为 ; 没有嵌套的间隔`B`。并且计数`A`将在.`1``B``A`

我的问题是，是否存在针对此问题的**子** 算法，区间数在哪里？`O(n²)``n`

**编辑：** 这是间隔满足的条件。间隔的端点是浮点数。a [i] 's/b [i]的下限是 0，上限是最大浮点数。此外，存在 a [i] < b [i]的条件，因此没有长度为 0 的区间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T06:34:13.117

对的，这是可能的。

我们将借用典型的计算几何“扫描线”技巧。

首先，让我们回答一个更简单（但密切相关）的问题。*让我们报告每个区间包含多少个区间，而不是报告每个区间包含*多少其他区间。因此，对于只有两个区间的示例，区间`I0 = [1,4]`的值为零，因为它包含在零区间中，而`I1 = [2,3]`值为一，因为它包含在一个区间中。

您将在一分钟内看到（a）为什么这个问题更容易以及（b）它如何导致原始问题的答案。

为了解决这个更简单的问题：获取所有起点*和终点*——所有 a [i]和 b [i——]并将它们放入一个主列表。将此列表的每个元素称为“事件”。因此，事件将类似于“间隔 I [37]开始”或“间隔 I [23]结束”。

对该事件列表进行排序并按顺序进行处理。

在处理事件列表时，请维护一组“活动间隔”。如果我们遇到了它的开始事件但没有遇到它的结束事件，则一个间隔是“活动的”；也就是说，如果我们在那个区间内。

现在，每当我们看到一个结束事件 b [j]时，我们就可以计算有多少间隔包含 I [j] (= [a [j] , b [j] ])。我们需要做的就是检查活动区间的集合 S 并确定其中有多少在[j]之前开始。这就是我们对有多少个区间包含区间 I [j]的答案。

为了有效地做到这一点，保持 S 本身按起点排序；例如，通过使用自平衡二叉树。

对事件列表进行排序是 O(2n log 2n) = O(n log n)。从自平衡二叉树中添加或删除元素是 O(log n)。问“自平衡二叉树有多少个元素小于 x？” 也是 O(log n)。因此，整个算法是 O(n log n)。

所以，这解决了简单的问题。称之为“简单算法”。现在看看你实际问的是什么。

将数轴视为延伸到无穷大并环绕到 -infinity，并定义一个区间，其中 b [i] < a [i]从 a [i]开始，伸展到无穷大，环绕到负无穷大，并在 b [i]结束。

对于任何区间 I [j] = [a [j] , b [j] ]，将 Complement(I [j] ) 定义为区间 [b [j] , a [j] ]。（例如，区间 [2, 3] 从 2 开始，在 3 结束；所以 Complement([2,3]) = [3,2] 从 3 开始，延伸到无穷大，回绕到 -infinity，并在2.)

观察区间 I 包含区间 J 当且仅当 Complement(J) 包含 Complement(I)。（证明这一点。）

因此，我们可以简单地通过在所有区间的补集上运行“简单算法”来回答您的原始问题。也就是说，从 -infinity 开始扫描，其中包含*所有*间隔的“活动间隔”集合 S（因为所有补码都包含无穷大/-无穷大）。保持S按结束点排序（即补码的开始点）。

对所有起点和终点进行排序，并按顺序进行处理。当您遇到区间 I [j] (= [a [j] , b [j] ]) 的起点时，您实际上是在到达其补码的终点...所以从 S 中删除 I [j]，查询 S 以查看其端点的数量（即补充起点）出现在 b [j]之前，并将其报告为 I [j]的答案。[如果您稍后遇到 I j]的终点，您将遇到其补码的起点，因此您需要将其重新添加到活动区间的集合 S 中。

出于与“简单算法”相同的原因，这个最终算法是 O(n log n)。

[更新]

一个澄清，一个更正，一个评论……

澄清：当然，必须扩充“自平衡二叉树”，以便每个子树都知道它包含多少元素。否则，您无法回答“有多少个元素小于 x？” 这种增强很容易维护，但并不是每个实现都提供。例如，据我所知，C++`std::set`没有。

更正：您*不想*将任何元素添加回活动区间集合 S；事实上，这样做可能会导致错误的答案。例如，如果间隔只是 [1,2] 和 [3,4]，您将点击 1（并从集合中删除 [1,2]），然后点击 2（并重新添加），然后点击 3 ...由于 2<4，您会得出结论 [3,4] 包含 [1,2]。这是错误的。

从概念上讲，您已经处理了补码区间的所有“开始事件”；这就是为什么 S 开始将其内部的所有间隔。所以你只需要担心终点；您*永远不想*向 S 添加任何元素。

换句话说，您可以将 [b [i] ,a [i] ]（其中 b [i] > a [i]）视为没有回绕的 [b [i] - infinity, a [i] ]，而不是让区间回绕。逻辑仍然有效，但处理更加清晰：首先您处理所有“任意 - 无穷大”项（即终点），然后处理其他项（即起点）。

有了这个更正，我很确定我的解决方案确实有效。这个公式也延伸——我认为——到你在一个输入中同时拥有正常和“向后”间隔的情况。

评论：这个问题很棘手，因为如果您必须*枚举*每个区间中包含的所有区间的集合，则输出本身可能是 O(n^2)。因此，任何工作方法都必须以某种方式计算间隔，甚至无法识别它们:-)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T05:07:18.237

这是一个 O(N*LOG(N))：

让 Ii = 区间 i = (ai, bi)

让 L = 区间列表 I

按 ai 排序 L

将 L 分成两半为 L1a 和 L2a。

按 bi 对 L1a 和 L2a 进行排序得到 L1b 和 L2b

合并排序 L1b 和 L2b 跟踪嵌套计数（例如，因为 L1b 中的所有间隔都在 L2b 中的间隔之前开始，当我们在 L1b 中找到高于 l2b 中的端点的端点时，我们知道它们之间的所有内容都嵌套在里面 -考虑一下）..

现在您已经更新了 L2 中的区间嵌套在 L1 中的区间内的频率。

在合并 L1 和 L2 之后，我们通过将 L1 划分为 L11a 和 L12a 来重复该过程（递归），还将 L2 划分为 L21a 和 L21a..

# javascript - 使用 javascript 函数更改 django 模板中的元素类

> ID：12946498
> 
> 赞同：0
> 
> 时间：2012-10-18T03:10:47.687
> 
> 标签：javascript, css, django, date

在我的 django 模板中，我使用 for 循环列出了一些事件项目。该事件具有关联的 date_of_occurrence 属性，它是一个 python DateTime。如果日期时间小于当前日期时间，我需要将事件的背景设为红色。

我想过这样做

在模板中

```
<ul>
{% for  event in events %}
  <div id="event_div"
    <li>
       event.name<br>
       event.date_of_occurrence
    </li>
  </div>
{% endfor %}
</ul> 
```

在 CSS 中

```
.pastevent{
  background-color:red;
} 
```

我需要一个 javascript 函数来将具有 id 的元素类设置 `event_div` 为`pastevent`。有人可以告诉我如何实现这个函数吗？

据我了解，该功能不会被任何点击事件触发，而是在页面加载时触发。从模板传递的事件的日期时间值将如何与当前的 javascript 日期进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:25:37.483

您不一定必须使用 javascript 来执行此操作。使用模板标签有几个不同的选项。

更简单的方法（更粗略）是将当前日期时间呈现给模板，例如。current_date 然后在您的模板中进行逻辑检查。

```
{% for  event in events %}
    {% if event.date_of_occurrence < current_date %}  
    <div id="pastevent">
    {% else %}
    <div id="event_div">
    {% endif %}
    <li>
       event.name<br>
       event.date_of_occurrence
    </li>
  </div>
{% endfor %} 
```

另一种选择是创建一个自定义模板过滤器，该过滤器返回事件是否过去，并应用与上述相同的逻辑。

# javascript - Javascript：onclick和一些拖拽的东西生了孩子？

> ID：12946502
> 
> 赞同：-1
> 
> 时间：2012-10-18T03:11:17.577
> 
> 标签：javascript, events, onclick

这是我正在处理的页面：http: [//kylemorgan49.com/sb/gridster/](http://kylemorgan49.com/sb/gridster/)

当您将鼠标悬停在一个框上时，背景会更改颜色（来自 css :hover），当您单击 javascript 时会将颜色更改为红色。所以玩了这个之后，你可以想象它可以用作绘图应用程序。那么，当您单击并拖动多个框时，我如何让它改变颜色呢？这样您就不必单击每个框。谢谢！哦，您可以通过右键单击并单击查看源代码来查看代码（仅供参考）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:18:00.183

1.  在网格上绑定 mousedown 事件以设置“点击”标志
2.  在每个网格方块上绑定一个 mouseenter 事件。如果鼠标进入并且“点击”为真，则为其着色
3.  在网格上绑定 mouseup 事件以清除“clicking”标志

例如

```
var clicking = false;

// the user is holding the mouse button down, so we want to draw as they move over squares
$('#grid').mousedown(function(e) {
    clicking = true;

// the user has released the mouse, we don't want to draw anymore
}).mouseup(function(e) {
    clicking = false;
});

// when the user hovers a box, check if the user is holding down the mouse and drawing
$('#grid .box').mouseenter(function(e) {
    if (clicking) {
        $(this).addClass('colour');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:16:42.210

您可以使用 mousedown 和 mouseup 来跟踪鼠标按钮。设置一个变量，比如`var mouseButton = true;`在 mousedown 上。您还需要您的盒子的鼠标悬停事件。当 mouseover 被触发时，检查 mouseButton 的值。如果是真的，改变盒子的颜色。

# python - 美味派 PUT 有效，但 POST 无效

> ID：12946504
> 
> 赞同：2
> 
> 时间：2012-10-18T03:11:23.870
> 
> 标签：python, django, rest, tastypie

我正在尝试使用tastepie 实现一个带有RESTful API 的简单Django 服务。我的问题是，当我尝试使用 PUT 创建 WineResource 时，它​​工作正常，但是当我使用 POST 时，它返回 HTTP 501 错误。阅读美味派文档，它似乎应该可以*工作*，但事实并非如此。

这是我的 api.py 代码：

```
 class CustomResource(ModelResource):
    """Provides customizations of ModelResource"""
    def determine_format(self, request):
    """Provide logic to provide JSON responses as default"""
    if 'format' in request.GET:
        if request.GET['format'] in FORMATS:
        return FORMATS[request.GET['format']]
        else:
        return 'text/html' #Hacky way to prevent incorrect formats
    else:
        return 'application/json'

class WineValidation(Validation):
    def is_valid(self, bundle, request=None):
    if not bundle.data:
        return {'__all__': 'No data was detected'}

    missing_fields = []
    invalid_fields = []

    for field in REQUIRED_WINE_FIELDS:
        if not field in bundle.data.keys():
        missing_fields.append(field)
    for key in bundle.data.keys():
        if not key in ALLOWABLE_WINE_FIELDS:
        invalid_fields.append(key)

    errors = missing_fields + invalid_fields if request.method != 'PATCH' \
        else invalid_fields

    if errors:
        return 'Missing fields: %s; Invalid fields: %s' % \
            (', '.join(missing_fields), ', '.join(invalid_fields))
    else:
        return errors

class WineProducerResource(CustomResource):
    wine = fields.ToManyField('wines.api.WineResource', 'wine_set', 
                 related_name='wine_producer')
    class Meta:
    queryset = WineProducer.objects.all()
    resource_name = 'wine_producer'
    authentication = Authentication() #allows all access
    authorization = Authorization() #allows all access

class WineResource(CustomResource):
    wine_producer = fields.ForeignKey(WineProducerResource, 'wine_producer')

    class Meta:
    queryset = Wine.objects.all()
    resource_name = 'wine'
    authentication = Authentication() #allows all access
    authorization = Authorization() #allows all access
    validation = WineValidation()
    filtering = {
        'percent_new_oak': ('exact', 'lt', 'gt', 'lte', 'gte'),
        'percentage_alcohol': ('exact', 'lt', 'gt', 'lte', 'gte'),
        'color': ('exact', 'startswith'),
        'style': ('exact', 'startswith')

    }

    def hydrate_wine_producer(self, bundle):
    """Use the provided WineProducer ID to properly link a PUT, POST,
    or PATCH to the correct WineProducer instance in the db"""
    #Workaround since tastypie has bug and calls hydrate more than once
    try:
        int(bundle.data['wine_producer'])
    except ValueError:
        return bundle
    bundle.data['wine_producer'] = '/api/v1/wine_producer/%s/' % \
                        bundle.data['wine_producer']
    return bundle 
```

任何帮助是极大的赞赏！:-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T03:25:20.653

这通常意味着您将 POST 发送到详细 uri，例如`/api/v1/wine/1/`. 由于 POST 意味着将封闭的实体视为从属实体，因此将 POST 发送到列表 uri，例如`/api/v1/wine/`，可能是您想要的。

# homebrew - 如何判断哪些自制配方是可升级的？

> ID：12946505
> 
> 赞同：209
> 
> 时间：2012-10-18T03:11:35.503
> 
> 标签：homebrew

我知道我什么时候`brew update`，它列出了所有`==> Updated Formulae`，但是当我更新了几次而没有运行时`brew upgrade`，我如何获得所有可以升级的应用程序的列表？

* * *

## 回答 #1

> 赞同：348
> 
> 时间：2012-10-23T21:09:37.057

根据[github 上的自制代码](https://github.com/Homebrew/brew/blob/master/Library/Homebrew/cmd/outdated.rb)，这显示了所有可以更新的应用程序：

```
brew outdated 
```

`brew help`没有列出该命令，但它记录在[`man brew`](https://docs.brew.sh/Manpage).

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2021-05-23T05:06:58.517

自 2020.12.01 发布 Homebrew 2.6.0 以来，`brew outdated`行为略有不同。

```
# update package repo
brew update

# list outdated pkgs, both formula and cask
brew outdated
# list formula only, the old behavior of 
#  `brew outdated` before brew 2.6.0
brew outdated --formula
# list cask only
brew outdated --cask 
```

在 Homebrew 的行话中，一个包被称为“公式”。Homebrew 不仅可以管理 TUI 应用程序，还可以管理 GUI 应用程序。GUI 应用程序的包称为“Cask”。

在 Homebrew 2.6.0 之前，`brew outdated`只列出公式。从 2.6.0`brew outdated`开始，公式和木桶。

# ios - 从不同的项目更新 iOS 应用程序，锁定沙箱？

> ID：12946510
> 
> 赞同：0
> 
> 时间：2012-10-18T03:12:12.553
> 
> 标签：ios, xcode, app-store-connect

由于太复杂而无法进入，我不得不切换到一个全新的项目来更新 App Store 中的应用程序。

无论如何可以访问旧应用程序的沙箱，还是新应用程序只是创建一个完全独立的沙箱？在测试我的新旧应用程序的开发版本时，它们是完全不同的文档目录，因此我的存档信息无法在更新后保留。

浏览应用商店是否会以任何方式影响这一点，或者我只是不走运？

我已经匹配了 Bundle ID 和配置文件，但没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:13:57.840

如果您将全新版本作为更新提交，则`NSDocumentsDirectory`和中的数据`NSLibraryDirectory`将被保留。如果您在 iTunes Connect 中创建新应用程序，数据将不可用并且无法取回（因为您无法访问其他应用程序的沙盒）。

要对此进行测试，您可以做的最好的事情是在您的设备上安装旧版本的应用程序并运行新版本来更新它。如果你正确匹配了*bundle id ，而不是在**跳板*上创建一个新的应用程序，它应该更新现有的应用程序。**此更新中应**保留数据。

请记住将您的*版本*号设置为比以前更高的值。例如，如果您的旧应用程序是*1.0 版*，您应该尝试使用*1.1*或*2.0*。

# entity-framework - 实体框架意外更新父实体上的 [Timestamp] 属性

> ID：12946512
> 
> 赞同：1
> 
> 时间：2012-10-18T03:12:19.823
> 
> 标签：entity-framework

我正在使用 Entity Framework 5.0（用于 .NET 4）并使用**TimestampAttribute**进行乐观并发检查。但是，我看到了奇怪/意外的行为，其中父实体的版本/时间戳被更新，因为它们的子实体被更新。

这最好通过示例代码来解释。

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity;
using System.Linq;

namespace ConsoleApplication1
{
    public abstract class Entity
    {
        public int Id { get; set; }
        public string Name { get; set; }

        /*[ConcurrencyCheck]
        [DatabaseGenerated(DatabaseGeneratedOption.Computed)]
        [Column(TypeName = "rowversion")]*/
        [Timestamp]
        public byte[] Version { get; set; }
    }

    public class Parent : Entity
    {
        public virtual List<Child> Children { get; set; }
    }

    public class Child : Entity
    {
        public virtual Parent Parent { get; set; }
        // Uncommenting property below causes the parent version to be unexpectedly updated when its child is updated.
        // This occurs regardless of whether the Version property is decorated with [Timestamp] or [ConcurrencyCheck].
        //public int? ParentId { get; set; }
    }

    public class TestDbContext : DbContext
    {
        public DbSet<Parent> Parents { get; set; }
        public DbSet<Child> Children { get; set; }
    }

    internal class Program
    {
        private static void Main(string[] args)
        {
            Database.SetInitializer(new DropCreateDatabaseIfModelChanges<TestDbContext>());
            var child = new Child {Name = "Child"};
            var parent = new Parent {Name = "Parent", Children = new List<Child> {child}};
            using (var context = new TestDbContext())
            {
                context.Parents.Add(parent);
                context.SaveChanges();
                var originalParentVersion = parent.Version.ToArray();
                child.Name = "New Child Name";
                context.SaveChanges();
                if (!originalParentVersion.SequenceEqual(parent.Version))
                    throw new Exception("Not expected");
            }
            Console.Write("Press any key to exit.");
            Console.ReadKey();
        }
    }
} 
```

如果我按原样运行这个简单的控制台应用程序，则不会引发“非预期”异常。但是，如果我取消注释 ID 外键属性 (ParentID)，则会引发异常。

谁能解释这种奇怪的行为？这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:24:58.327

该描述似乎与 EF4 中的一个问题相匹配，我们为此发布了一个修补程序：

[修复：当应用程序使用 .NET Framework 4 中的实体框架时，SQL 应用程序中的主体实体会生成不必要的更新](http://support.microsoft.com/kb/2390624)

该修补程序没有直接下载链接，因此您必须按照一些说明来获取它。否则，该修复程序也包含在 .NET 4.5 中。

# java - Struts 操作的“默认位置”是什么（在配置浏览器中）？

> ID：12946517
> 
> 赞同：2
> 
> 时间：2012-10-18T03:13:13.787
> 
> 标签：java, configuration, struts2, web.xml, struts2-config-browser

我已经看到在使用 Struts 插件“config-browser”进行调试时，我的所有操作都有一个“默认位置”。类似于以下内容：

```
 Action information - list*

Action name:    list*
Namespace:  
Action class:   listAction
Action method:  {1}
Parameters: 
Default location:   /mysite/list*.action 
```

我想知道这个“默认位置”是什么意思？我可以改变它吗？我怎样才能改变它？

顺便说一句：我已将我的 struts 过滤器更改`web.xml`为只听`/test/*`和`/action/*`. 我不确定为什么它仍然说“默认位置”是`/mysite/list*.action`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:11:53.213

没有“默认位置”这样的概念。有“默认操作”。

> 通常，如果请求了一个动作，而框架无法将请求映射到动作名称，则结果将是通常的“404 - 找不到页面”错误。但是，如果您希望综合操作处理任何不匹配的请求，您可以指定默认操作。如果没有其他操作匹配，则使用默认操作。

如果您查看`ActionMapping`该类，您会发现它没有 location 属性。而是`ServletDispatcherResult`有`ServletRedirectResult`这样的参数。因此，将其与映射一起使用可以确定最终位置。

在计算最终位置时还提到了默认命名空间和默认类概念。

此外，术语**位置**可以被视为路径并映射到配置操作的配置文件。

# c# - 如何将焦点设置在 Form1 上？

> ID：12946520
> 
> 赞同：1
> 
> 时间：2012-10-18T03:13:29.000
> 
> 标签：c#

我在设计器中的 Form1 上有一个 RichTextBox1，设置为 ReadOnly true。但是当我运行程序时，焦点在richTextBox 上，输入在richTextBox 中，就像用户可以在里面输入东西一样。他不能，但看起来像。

有什么方法可以避免它或在我运行程序时设置它，或者如果用户点击richTextBox，它永远不会像他可以在里面写的那样进入它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:31:42.223

如果您真的不希望用户访问它，您可能应该将其设置为 Enabled = false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:29:58.823

也许您可以将焦点设置在表单中的下一个控件上。

# python - 具有相同“设置”的 matplotlib 子图

> ID：12946521
> 
> 赞同：6
> 
> 时间：2012-10-18T03:13:36.873
> 
> 标签：python, matplotlib

我以两种不同的格式绘制相同的数据：对数刻度和线性刻度。

基本上我想要完全相同的情节，但比例不同，一个在另一个之上。

我现在拥有的是这样的：

```
import matplotlib.pyplot as plt

# These are the plot 'settings'
plt.xlabel('Size')
plt.ylabel('Time(s)');
plt.title('Matrix multiplication')

plt.xticks(xl, rotation=30, size='small')
plt.grid(True)

# Settings are ignored when using two subplots

plt.subplot(211)
plt.plot(xl, serial_full, 'r--')
plt.plot(xl, acc, 'bs')
plt.plot(xl, cublas, 'g^')

plt.subplot(212)
plt.yscale('log')
plt.plot(xl, serial_full, 'r--')
plt.plot(xl, acc, 'bs')
plt.plot(xl, cublas, 'g^') 
```

*plt.subplot*之前的所有“设置”都将被忽略。

我可以让它按照我想要的方式工作，但是我必须在每个子图声明之后复制所有设置。

有没有办法一次配置两个子图？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T11:41:03.420

这些`plt.*`设置通常适用于 matplotlib 的*当前*绘图；，`plt.subplot`您正在开始一个新的情节，因此设置不再适用于它。您可以通过浏览[`Axes`](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes)与绘图关联的对象来共享标签、刻度等（[请参见此处的示例](http://www.scipy.org/Cookbook/Matplotlib/Multiple_Subplots_with_One_Axis_Label)），但恕我直言，这在此处将是矫枉过正。相反，我建议将常见的“样式”放入一个函数中，并在每个绘图中调用它：

```
def applyPlotStyle():
    plt.xlabel('Size')
    plt.ylabel('Time(s)');
    plt.title('Matrix multiplication')

    plt.xticks(range(100), rotation=30, size='small')
    plt.grid(True)

plt.subplot(211)
applyPlotStyle()
plt.plot(xl, serial_full, 'r--')
plt.plot(xl, acc, 'bs')
plt.plot(xl, cublas, 'g^')

plt.subplot(212)
applyPlotStyle()
plt.yscale('log')
plt.plot(xl, serial_full, 'r--')
plt.plot(xl, acc, 'bs')
plt.plot(xl, cublas, 'g^') 
```

附带说明一下，您可以通过将绘图命令提取到这样的函数中来消除更多重复：

```
def applyPlotStyle():
    plt.xlabel('Size')
    plt.ylabel('Time(s)');
    plt.title('Matrix multiplication')

    plt.xticks(range(100), rotation=30, size='small')
    plt.grid(True)

def plotSeries():
    applyPlotStyle()
    plt.plot(xl, serial_full, 'r--')
    plt.plot(xl, acc, 'bs')
    plt.plot(xl, cublas, 'g^')

plt.subplot(211)
plotSeries()

plt.subplot(212)
plt.yscale('log')
plotSeries() 
```

另一方面，将标题放在图的顶部（而不是在每个图上）可能就足够了，例如，使用[`suptitle`](http://matplotlib.org/api/figure_api.html?highlight=title#matplotlib.figure.Figure.suptitle). `xlabel`同样，仅出现在第二个图下方可能就足够了：

```
def applyPlotStyle():
    plt.ylabel('Time(s)');

    plt.xticks(range(100), rotation=30, size='small')
    plt.grid(True)

def plotSeries():
    applyPlotStyle()
    plt.plot(xl, serial_full, 'r--')
    plt.plot(xl, acc, 'bs')
    plt.plot(xl, cublas, 'g^')

plt.suptitle('Matrix multiplication')
plt.subplot(211)
plotSeries()

plt.subplot(212)
plt.yscale('log')
plt.xlabel('Size')
plotSeries()

plt.show() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T19:29:03.270

汉斯的回答可能是推荐的方法。但是，如果您仍然想将轴属性复制到另一个轴，这是我找到的一种方法：

```
fig = figure()
ax1 = fig.add_subplot(2,1,1)
ax1.plot([1,2,3],[4,5,6])
title('Test')
xlabel('LabelX')
ylabel('Labely')

ax2 = fig.add_subplot(2,1,2)
ax2.plot([4,5,6],[7,8,9])

for prop in ['title','xlabel','ylabel']:
    setp(ax2,prop,getp(ax1,prop))

show()
fig.show() 
```

![在此处输入图像描述](../Images/0ca5a2b4091971489724f6a420345252.png)

这使您可以设置要设置的属性的白名单，目前我有`title`,`xlabel`和`ylabel`，但您可以只使用`getp(ax1)`打印出所有可用属性的列表。

您可以使用以下内容复制**所有**属性，但我建议不要这样做，因为某些属性设置会弄乱第二个图。我试图使用黑名单来排除一些，但你需要摆弄它才能让它工作：

```
insp = matplotlib.artist.ArtistInspector(ax1)
props = insp.properties()
for key, value in props.iteritems():
    if key not in ['position','yticklabels','xticklabels','subplotspec']:
        try:
            setp(ax2,key,value)
        except AttributeError:
            pass 
```

（`except/pass`即跳过可获取但不可设置的属性）

# html - 如何计算 HTML5 视频的播放次数

> ID：12946522
> 
> 赞同：4
> 
> 时间：2012-10-18T03:13:44.410
> 
> 标签：html

我正在开发一个显示来自 youtube 的视频的网站，我很想知道每个视频在我的网络上播放了多少次。Youtube 浏览量不计算在内，只计算来自我的网络的浏览量。我发现了这种音频方法：

[跟踪播放 HTML5 音频元素的次数？](https://stackoverflow.com/questions/6516068/tracking-how-many-times-an-html5-audio-element-is-played)

我可以对视频使用相同的方法吗？有人做过这个吗？如何？我发现了一个类似的问题：

[跟踪视频的播放次数](https://stackoverflow.com/questions/6986979/tracking-the-number-of-times-a-video-was-played)

但是答案对我来说并不令人满意，当然，如果可能的话，我需要在没有第三方服务的情况下这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T19:37:38.467

我使用了[https://developer.mozilla.org/en-US/docs/DOM/Media_events中的示例](https://developer.mozilla.org/en-US/docs/DOM/Media_events)

我调整它来做我想做的事：

```
var v = document.getElementsByTagName("video")[0];
v.addEventListener("ended", function() { 
    alert('Video has been viewed!'); 
}, true); 
```

# ios - iOS 编程：viewDidAppear 中的自定义按钮

> ID：12946527
> 
> 赞同：0
> 
> 时间：2012-10-18T03:14:26.017
> 
> 标签：ios, button, viewdidappear

我在 .xib 文件中创建了常规按钮，并在本节的代码中为它们添加了渐变效果和阴影：

-(void)viewDidAppear:(BOOL)animated { [super viewDidAppear:animated];

```
... my customized buttons code here 
```

}

当我以模态方式切换到另一个视图控制器然后返回到原始视图控制器时，xib 文件会重新绘制，但所有渐变效果和阴影都会消失。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:21:51.757

我不完全确定发生了什么，但请注意，在您关闭模态视图控制器后，`viewDidAppear:`会再次调用。如果您只想制作这些按钮一次，您可以将自定义按钮代码移至`viewDidLoad`.

我以前没有遇到过这个问题，知道发生了什么，所以看看代码本身会很有帮助。但我怀疑将代码移动到`viewDidLoad`可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:27:29.190

当modal View被dismiss时，没有调用ViewDidLoad，而是调用了ViewWillAppear和ViewDidAppear，但是你说代码是用ViewDidAppear写的，还是不行。我建议您在 ViewWillAppear 中编写该代码并检查。

# php - 在 Zend Studio 9 中从 GIT 创建一个新的 PHP 项目

> ID：12946538
> 
> 赞同：1
> 
> 时间：2012-10-18T03:15:48.400
> 
> 标签：php, git, zend-studio

我在尝试使用 Zend Studio 9 从 GIT 创建一个新的 PHP 项目时遇到问题。过去我可以使用这个版本的 Zend Studio 从 GIT 创建项目，但是创建这个特定项目的问题是使用 GIT 存储库网址...

假设我的 GIT 回购网址是： **git@mydomain.beanstalkapp.com:/my-project.git**

..登录凭据是：**myname** / pass1234

现在，当您在 Zend Studio 的*“从 GIT 创建新的 PHP 项目”*弹出窗口中输入 repo 凭据时，*“位置 url”*字段的开头和*“身份验证用户”*字段链接在一起，这意味着如果您更改一个中的值，然后 Zend 会自动为您更改另一个。（因此，url 中 @ 符号之前的任何内容都会预先填充用户字段文本，反之亦然。）

现在存储库 url 只能通过 SSH 获得，而不是 HTTP，所以 url 必须以**git@**开头......并且用户名不是“ **git** ”，所以我实际上无法添加存储库，因为 zend 不允许我用“git”以外的值正确填写用户字段。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:22:29.980

@前面的git就是用户名。它可以是任何东西，只要服务器设置为接受它。

要通过 SSH 访问 git repo，您​​需要设置服务器以使用开发人员的 SSH 身份。它基本上与无密码登录的设置相同。

有关如何设置服务器的详细说明：http: [//git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server](http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server)

# php - 单击提交按钮后按 f5

> ID：12946541
> 
> 赞同：5
> 
> 时间：2012-10-18T03:16:11.523
> 
> 标签：php, javascript, jquery, internet-explorer

我有一个**PHP**应用程序，用户可以在其中申请奖金。但是在奖金兑换代码运行之前有一个确认页面。问题是在**IE**中，如果您`f5`在单击继续按钮后立即点击，确认页面会刷新，而奖金兑换代码已经被继续按钮触发并实际通过。但是因为用户仍然看到确认页面，他们会再次点击继续按钮，现在他们得到一个错误，因为他们已经注册了。

有没有办法可以禁用`f5`按钮使用`javascript`？这是解决这个问题的最好方法吗？我已经尝试了很多我在网上找到的脚本来执行此操作，但没有一个能够实现。有没有更好的方法可以解决这个问题？也许从应用程序方面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:28:04.520

编辑：如果索取奖金的结果已建立数据库，您可以在确认屏幕上加载现有索赔并测试是否已经存在。

* * *

编辑：您可以做的另一个巧妙的技巧是对 $_POST 进行 serailize/json_encode 并从中生成哈希，将其存储在数据库或用户会话中，并针对它进行测试。

* * *

我会为表单生成一个一次性使用令牌（哈希）并将其作为隐藏字段进行数据库化，如果重新提交发布数据，则该令牌将已被使用，并且您可以使发布请求无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:30:34.197

有几种方法可以解决您的问题：

在这里结帐：http: [//bjw.co.nz/developer/general/75-how-to-prevent-form-resubmission](http://bjw.co.nz/developer/general/75-how-to-prevent-form-resubmission)

我一直在使用第二种方法（使用会话），它确实运作良好。

# ruby-on-rails - 这个 ruby /rails 代码是什么意思？

> ID：12946542
> 
> 赞同：0
> 
> 时间：2012-10-18T03:16:26.983
> 
> 标签：ruby-on-rails, ruby

我正在阅读本教程：[http ://blog.assimov.net/blog/2011/04/03/multi-file-upload-with-uploadify-and--carrierwave-on-rails-3/](http://blog.assimov.net/blog/2011/04/03/multi-file-upload-with-uploadify-and--carrierwave-on-rails-3/)

其中一行代码是：

```
@photo = params[:id] ? @property.photos.find(params[:id]) : @property.photos.build(params[:photo]) 
```

我不明白`?`and`:`在该行中做什么，或者它应该完成什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T03:18:24.087

看看这个[::? 三元运算符](http://en.wikipedia.org/wiki/%3F%3a)

# rss - 为播客创建 RSS 链接似乎不适用于 iTunes

> ID：12946543
> 
> 赞同：0
> 
> 时间：2012-10-18T03:16:39.870
> 
> 标签：rss

[我从http://www.apple.com/itunes/podcasts/specs.html](http://www.apple.com/itunes/podcasts/specs.html)复制示例 rss 并将其粘贴到我的 html 文件中进行测试，但 itune 说修复 iTunes“似乎不是有效的播客 URL”错误这是链接

有人可以帮我吗.... 这个提要是有效的，但是通过实施以下建议可以提高与最广泛的提要阅读器的互操作性。

```
Feeds should not be served with the "text/html" media type [help]

Your feed appears to be encoded as "UTF-8", but your server is reporting "iso-8859-1" [help]

line 15, column 35: Email address is missing real name [help]

        <webMaster>joti.chand@gmail.com</webMaster>
                                       ^

line 18, column 4: iTunes elements should only be present in feeds encoded as UTF-8 [help]

        <itunes:author>joti.chand@gmail.com</itunes:author>
        ^

line 55, column 0: Missing atom:link with rel="self" [help]

    </channel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:07:09.060

也许将其粘贴到 HTML 文件中进行测试不是正确的方法？为什么不是 .xml 文件？

# html - Drupal 7 页面无法在 Internet Explorer 中正确显示

> ID：12946545
> 
> 赞同：0
> 
> 时间：2012-10-18T03:16:45.123
> 
> 标签：html, css, internet-explorer, drupal, cross-browser

我使用 Drupal 7 ( [http://quaaoutlodge.com/drupal-7.14/](http://quaaoutlodge.com/drupal-7.14/) ) 设计了一个页面。它在 Firefox 和 Chrome 中看起来很好（我的意思是这样），但在 Internet Explorer 中（在 WXP 上测试 8.0）它都搞砸了。现在，如果您进入带有子链接的页面，例如 Golf ( [http://quaaoutlodge.com/drupal-7.14/golf](http://quaaoutlodge.com/drupal-7.14/golf) )，它在 FF 和 Chrome 中看起来都像预期的那样，但在 IE 中，#ContentWrapper div 仅从底部开始我的“secondnav” div。为什么是这样？如何获取内容以使内容的顶部与 secondnav 的顶部对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:51:48.813

好的，与此同时，我发现如果我添加

```
width:600px; 
```

对我

```
#contentWrapper{ 
```

样式定义，内容 div 跳起来，它的顶部与 secondnav 的顶部对齐，但这不是我想要的。我想将内容保持在 800px 并让它们彼此相邻，有什么提示吗？谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:06:01.400

好的，解决了。底层 div #pageBorder 有一个

```
margin-left:220px 
```

这会将我的内容推送到 IE 中的下一行，而它在 FF 和 Chrome 中运行良好。好吧，现在已经修好了... [http://quaaoutlodge.com/drupal-7.14/?q=contact](http://quaaoutlodge.com/drupal-7.14/?q=contact)

# iphone - 为什么 NSArray objectAtIndex:section for tableView titleForHeaderInSection 错误：空数组的索引 0 超出范围

> ID：12946546
> 
> 赞同：1
> 
> 时间：2012-10-18T03:16:48.373
> 
> 标签：iphone, objective-c, ios, uitableview, nsarray

太诡异了：

_tableDataSectionTitles 是这个 UITableViewController 子类和 NSArray 的一个属性。

```
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
NSLog(@"%@", _tableDataSectionTitles); // returns: ( "string" )
NSLog(@"%@", [_tableDataSectionTitles objectAtIndex:0]); // returns: "string"
NSLog(@"%i", section); // returns 0
NSLog(@"%@", [_tableDataSectionTitles objectAtIndex:section]; // returns "string"
return [_tableDataSectionTitles objectAtIndex:section]; // returns: *** -[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array 
```

那是怎么回事！？（其他一切工作正常。我检查了三次。）（说真的，这就像它运行的第一件事，所以这里应该没有错）

即使使用数组，我也试过了：

```
NSString *rep = [[NSString alloc] init];
if (section == 0) {
    rep = @"Stuff";
} else { // doesn't even need it - it won't run through it anyway
    //rep = [_tableDataSectionTitles objectAtIndex:section]; // commented out just to not have any doubts
}
return rep; 
```

但仍然是同样的错误。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:46:09.357

下面的代码将帮助您轻松检测代码的错误部分

```
-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {

  NSString *title = @"Empty";

  NSLog(@"count: %d", [_tableDataSectionTitles count]); 
  NSLog(@"section: %d", section);

  if([_tableDataSectionTitles count] > section)
      title = [_tableDataSectionTitles objectAtIndex:section]

  return title; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:24:44.013

显然，错误说明了`[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array` 意思，数组是空的，即使它不应该是。所以我不确定到底是什么问题，但您可以按照以下步骤调试问题，

1.  检查它是否仅发生在第 0 部分。不要将部分传递给 objectAtIndex，而是传递 0 并尝试。
2.  仅当数组不为空时才返回标题，

    if([_tableDataSectionTitles count] > 0) { return [_tableDataSectionTitles objectAtIndex:section]; } else { return @"默认标题"; }

3.  在代码中的某处分配了初始化数组..？可能在 ViewDidLoad 或 init 方法中。如果不这样做并尝试。

如果您再次遇到任何奇怪的事情，请告诉我们。希望能帮助到你..：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T15:05:37.333

嗯，我明白了。

因此，事实证明我的 _tableDataSectionContents 数组是空的，而 _tableDataSectionTitles 中有一个。所以，我仍然不明白为什么它会引发一个完全独立的数组的错误，但它现在可以工作了！感谢你的帮助。

# json - @XmlJavaTypeAdapter 不适用于杰克逊 JSON

> ID：12946547
> 
> 赞同：6
> 
> 时间：2012-10-18T03:16:52.130
> 
> 标签：json, spring-mvc, jaxb, jackson

我正在使用 Spring REST 框架和 Jackson JSON

```
<bean id="jsonConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
 <property name="objectMapper" ref="customObjectMapper" /> 
 <property name="supportedMediaTypes" value="application/json" />
</bean>
<bean id="customObjectMapper"class="com.rackspace.payment.webapp.utils.JaxbJacksonObjectMapper" />

public class JaxbJacksonObjectMapper extends ObjectMapper {
    @SuppressWarnings("deprecation")
    public JaxbJacksonObjectMapper() {
        final AnnotationIntrospector introspector = new JaxbAnnotationIntrospector();

        this.configure(org.codehaus.jackson.map.DeserializationConfig.Feature.UNWRAP_ROOT_VALUE, true);
        super.getDeserializationConfig().withAnnotationIntrospector(introspector);

        this.configure(org.codehaus.jackson.map.SerializationConfig.Feature.WRITE_NULL_PROPERTIES, false);
        this.configure(org.codehaus.jackson.map.SerializationConfig.Feature.WRAP_ROOT_VALUE, true);
        super.getSerializationConfig().withAnnotationIntrospector(introspector);
    }
}

//JXAB element
@XmlAttribute(name = "createDate")
@XmlJavaTypeAdapter(CustomDateAdapter.class)
protected Date createDate; 
```

我面临的问题是，当显示 JSON 输出时，“createDate”元素显示为字符串，不会调用 xml 适配器类，而它在 XML 输出中工作正常。

我错过了什么？如何以 JSON 格式调用 XmlJavaTypeAdapter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-19T08:40:48.207

下面的代码对我有用。

```
 ObjectMapper objectMapper = new CustomObjectMapper(ENTITY_WITH_ID_DESERIALIZER);

    AnnotationIntrospector primary = new JacksonAnnotationIntrospector();
    AnnotationIntrospector secondary = new JaxbAnnotationIntrospector();
    AnnotationIntrospector pair = new AnnotationIntrospector.Pair(primary, secondary);

    objectMapper.setAnnotationIntrospector(pair);

    objectMapper.configure(DeserializationConfig.Feature.USE_ANNOTATIONS, true); 
```

# marionette - App结构和App.vent.bind

> ID：12946548
> 
> 赞同：0
> 
> 时间：2012-10-18T03:16:53.673
> 
> 标签：marionette

我有两个应用程序：

`SrvLinkApp`具有链接模型（`sockjs`与服务器的连接）的A。具有视图、`ChatApp`模型和.`chatView``ChatEntry``ChatCollection`

当我收到来自服务器的消息时，我触发了一个**“聊天：服务器：消息”，**有效负载事件：

```
App.vent.trigger('chat:server:message', payload) 
```

在我的`ChatApp`我监听这个事件，将有效负载转换为 a`ChatEntry`然后将其添加到`ChatCollection`被`ChatView`.

我应该在哪里添加绑定？我只有在初始化部分对集合的引用：

```
App.vent.bind("chat:server:msg", function(msg) {}) 
```

**A计划**

```
Foo.module("ChatApp", function(ChatApp, App, Backbone, Marionette, $, _) {

App.addRegions({
    chatRegion: "#chat-region",
});

MsgEntry = Backbone.Model.extend({});

MsgCollection = Backbone.Collection.extend({
    model: MsgEntry
})

MsgView = Backbone.Marionette.ItemView.extend({
    template: '#chat-entry-template',
});

MsgListView = Backbone.Marionette.CompositeView.extend({

    itemView: MsgView,

    itemViewContainer: "#chat-messages",

    template: "#chat",

     ....
});

ChatApp.addInitializer(function() {

   var msgCollection = new MsgCollection();
   var msgListView = new MsgListView({collection: msgCollection});

   // render and display the view
   App.chatRegion.show(msgListView);

   // App Events listeners
   // --------------------

   // New chat message from server 
    App.vent.bind("chat:server:msg", function(msg) {
        // create an entry and add it to our collection
        console.log(msgCollection);
    });

});
}); 
```

或**B 计划**

```
Foo.module("ChatApp", function(ChatApp, App, Backbone, Marionette, $, _) {

App.addRegions({
    chatRegion: "#chat-region",
});

// App Events listeners
// --------------------

// New chat message from server 
App.vent.bind("chat:server:msg", function(msg) {
   // create an entry and add it to our collection
   console.log(ChatApp.msgCollection);
});

MsgEntry = Backbone.Model.extend({});

MsgCollection = Backbone.Collection.extend({
    model: MsgEntry
})

MsgView = Backbone.Marionette.ItemView.extend({
    template: '#chat-entry-template',
});

MsgListView = Backbone.Marionette.CompositeView.extend({

    itemView: MsgView,

    itemViewContainer: "#chat-messages",

    template: "#chat",

     ....
});

ChatApp.addInitializer(function() {

   var msgCollection = new MsgCollection();
   var msgListView = new MsgListView({collection: msgCollection});

   // HERE //
   ChatApp.msgCollection = msgCollection;
   // END HERE //

   App.chatRegion.show(msgListView);
});
}); 
```

还是有其他方法可以访问该集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T03:00:56.040

我不认为这两个都不好。我在不同的时间使用这两种想法。这在很大程度上取决于您的应用程序中的其他情况，处理多个集合的可能性等。

就个人而言，我会选择 A，因为它将所有内容都保留在模块中，并且不会让集合在全局 app 对象上被破坏或遗忘（内存泄漏）。

# ios - 如何在客户端更新数据表。（iOS MMO 游戏）

> ID：12946550
> 
> 赞同：0
> 
> 时间：2012-10-18T03:17:12.857
> 
> 标签：ios, client

目前我正在使用 cocos2d-x 开发一款 iOS MMO 游戏。游戏使用了许多由设计师创建的数据表（excel文件）。这些表格包含升级兵营需要多少金币（水晶等）等数字。

我的问题是，如果在服务器端修改了表，如何更新这些表？

我的选择：使用 SQLite 在客户端存储表，一旦在服务器端修改了表，服务器将解析表（excel 文件）并以 JSON 格式发送数据。然后客户端解析 JSON 字符串并将该数据保存到 SQLite 文件。有没有更好的办法？我发现一些游戏在客户端存储 CSV 文件，他们如何更新这些 CSV 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:44:55.407

您如何存储数据（以及以何种格式）完全取决于您，尽管框架确实提供了一些帮助类（检查 ccUserDefault）。检查客户端上的数据文件是否是最新的最简单的方法是对它们进行校验和（对存储在文件中的数据或整个文件本身应用校验和）。因此，为了检查同步，服务器端应用程序对数据应用校验和，客户端也是如此（当然使用相同的算法；））并比较数字；如果它们匹配，则数据是同步的。

如果服务器端应用程序生成数据文件并将其发送下来，而不是依赖客户端应用程序来完成，这可以说更可靠。但是只要服务器知道如何使用与客户端相同的方法生成数据文件，那么客户端的文件生成过程是否成功总是可以使用相同的校验和方法来验证。

# c++ - typedef char * pChar 和 const pChar

> ID：12946551
> 
> 赞同：-1
> 
> 时间：2012-10-18T03:17:17.893
> 
> 标签：c++

typedef 字符 * pChar

typedef const char * pConstChar

我发现

const pChar 是**char * const**

pConstChar 是**const char ***

我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:23:51.607

是的，这是正确的。在类型的正确一侧写入时更明显`const`，即始终将其放在右侧：

```
const pChar 
```

等同于

```
pChar const 
```

这与

```
char* const 
```

# asp.net-mvc - 如何使用 MVC 和 LLBLGen 显示外键值而不是 id

> ID：12946557
> 
> 赞同：1
> 
> 时间：2012-10-18T03:17:49.440
> 
> 标签：asp.net-mvc, vb.net-2010

我想知道是否有人可以帮助我如何使用 LLBLGen 和 MVC3 显示外键值而不是外键 id？

# php - 使用 PHP 在非常高的图像上绘制线条，脚本会停止绘制。出了什么问题，我该如何解决？

> ID：12946560
> 
> 赞同：4
> 
> 时间：2012-10-18T03:18:15.517
> 
> 标签：php, image, memory

我有一个 PHP 脚本，它创建了一个非常高的图像并在其上画了很多线（一种组织网络的外观）。对于我尝试创建的最高图像，线条画会突然停止在图像的中间到底部：http: [//i.imgur.com/4Plgr.png](http://i.imgur.com/4Plgr.png)

我使用 imagecreate() 遇到了这个问题，然后我发现 imagecreatetruecolor() 可以处理更大的图像，所以我切换到那个。我仍然有同样的问题，但脚本现在可以处理更大的图像。我认为它应该画大约 1200 条线。该脚本的执行时间不超过 3 秒。这是一个完全执行的图像：http: [//i.imgur.com/PaXrs.png](http://i.imgur.com/PaXrs.png)

我用 ini_set('memory_limit', '1000M') 调整了内存限制，但我的脚本从未接近限制。

如何强制脚本继续绘制直到完成？或者我如何使用 PHP 来创建使用更少内存的图像（我认为这是问题所在）？

```
if(sizeof($array[0])<300)
$image=imagecreate($width,$height);
else
$image=imagecreatetruecolor($width,$height);
imagefill($image,0,0,imagecolorallocate($image,255,255,255));
for($p=0; $p<sizeof($linepoints); $p++){
$posx1=77+177*$linepoints[$p][0];
$posy1=-4+46*$linepoints[$p][1];
$posx2=77+177*$linepoints[$p][2];
$posy2=-4+46*$linepoints[$p][3];
$image=draw_trail($image,$posx1,$posy1,$posx2,$posy2);
}
imagepng($image,"images/table_backgrounds/table_background".$tsn.".png",9);
imagedestroy($image);

function draw_trail($image,$posx1,$posy1,$posx2,$posy2){
$black=imagecolorallocate($image,0,0,0);
if($posy1==$posy2)
imageline($image,$posx1,$posy1,$posx2,$posy2,$black);
else{
imageline($image,$posx1,$posy1,$posx1+89,$posy1,$black);
imageline($image,$posx1+89,$posy1,$posx1+89,$posy2,$black);
imageline($image,$posx1+89,$posy2,$posx2,$posy2,$black);
}
return $image;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:49:01.990

我将猜测您已经创建了内存泄漏，并且当您对更大的图像执行更多操作时，您最终会达到 PHP 的内存限制。与其提高限制，不如找到泄漏点。

尝试更改您的代码，使其显式取消分配您正在创建的颜色`draw_trail`。`$image`此外，由于您正在传递资源，因此没有理由返回。

```
if(sizeof($array[0])&lt;300)
$image=imagecreate($width,$height);
else
$image=imagecreatetruecolor($width,$height);
imagefill($image,0,0,imagecolorallocate($image,255,255,255));
for($p=0; $p&lt;sizeof($linepoints); $p++)
{
    $posx1=77+177*$linepoints[$p][0];
    $posy1=-4+46*$linepoints[$p][1];
    $posx2=77+177*$linepoints[$p][2];
    $posy2=-4+46*$linepoints[$p][3];
    draw_trail($image,$posx1,$posy1,$posx2,$posy2);
}
imagepng($image,"images/table_backgrounds/table_background".$tsn.".png",9);
imagedestroy($image);

function draw_trail($image,$posx1,$posy1,$posx2,$posy2)
{
    $black=imagecolorallocate($image,0,0,0);
    if($posy1==$posy2)
    imageline($image,$posx1,$posy1,$posx2,$posy2,$black);
    else
    {
        imageline($image,$posx1,$posy1,$posx1+89,$posy1,$black);
        imageline($image,$posx1+89,$posy1,$posx1+89,$posy2,$black);
        imageline($image,$posx1+89,$posy2,$posx2,$posy2,$black);
    }
    imagecolordeallocate($black);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:19:08.967

在这里。我想通了，或者至少解决了我的问题。我在图像上画了很多线，而我的代码获取这些点的方式产生了很多重复，所以我仍然怀疑这是内存问题。我巩固了所有的要点，去掉了重复，现在它工作得很好。感谢任何试图提供帮助的人。

# html - 如何在html链接后面找到真实地址？

> ID：12946563
> 
> 赞同：0
> 
> 时间：2012-10-18T03:18:45.453
> 
> 标签：html

我想分析 mango.com 网站。我对以下链接感兴趣。 [http://shop.mango.com/US/m/mango/clothing/dresses/day/?m=dresses32&v=Day](http://shop.mango.com/US/m/mango/clothing/dresses/day/?m=dresses32&v=Day) 我在这个页面上找到了一个可以显示所有项目的查看链接。 [http://shop.mango.com/US/all/mango/clothing/#firstitem](http://shop.mango.com/US/all/mango/clothing/#firstitem)

其他类别的 viewall 链接似乎相同。如何找到这个viewall链接背后的真实地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:22:34.803

[http://shop.mango.com/US/all/mango/clothing/#firstitem](http://shop.mango.com/US/all/mango/clothing/#firstitem)

[http://shop.mango.com/US/all/mango/clothing/](http://shop.mango.com/US/all/mango/clothing/)是链接​​。

`#firstitem`是页面中的id。

实际上它都在整个 html 页面中，但是如果您只想显示页面的一部分。只需更改 id 的 css`display:none`即可隐藏其他部分。

# objective-c - 这是否仍然会导致 ARC 中的内存泄漏

> ID：12946565
> 
> 赞同：-2
> 
> 时间：2012-10-18T03:18:50.587
> 
> 标签：objective-c, ios, memory-leaks

`@property (strong) NSObject *aObj`这是场景：假设我们有一个 MyObject 类，并且我们在“MyObject.h”中声明了一个属性；然后我们在“MyObject.m”中使用这个属性。

```
A. self.aObj = [[NSObject alloc] init];

B. aObj = [[NSObject alloc] init]; 
```

我想知道A是否存在内存泄漏。在MRC中似乎如果强保留，A会发生内存泄漏。如果在 ARC 中，这仍然会导致内存泄漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:24:50.270

不，在 ARC 下，两者都不会导致内存泄漏。ARC 足够聪明来处理这些情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:25:24.067

(A) 将在 MRC 中泄漏，RHS 返回一个拥有的对象，并且属性设置器将其保留为第二次。它不会在 ARC 中泄漏。

(B) 可能在 MRC 中泄漏，变量`aObj`可能包含不会被释放的拥有引用。它不会在 ARC 中泄漏。

# browser - 从呈现的网页获取超链接信息的简单方法

> ID：12946567
> 
> 赞同：0
> 
> 时间：2012-10-18T03:18:59.023
> 
> 标签：browser, html-parsing, web-scraping, html-rendering

我想以编程方式执行此操作：

给定一个页面 URL，我需要获取页面上的所有链接。重要的是至少要获取3条链接信息：锚文本、`href`属性值、链接在页面上的绝对位置。

Java CSSBox 库是一个选项，但还没有完全实现（`href`不能同时获取属性值，必须通过额外的库如Jsoup 进行一些额外的映射）。更重要的是，CSSBox 库渲染页面非常慢。

似乎 Javascript 具有所有可用的功能，但我们必须将 javascript 代码注入页面并编写驱动程序以利用现有浏览器。Python 和 Ruby 等脚本语言也对此提供支持。我很难找到最方便的工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:25:31.170

PHP 的 DOM 操作库对您有帮助吗？[http://www.php.net/manual/en/book.dom.php](http://www.php.net/manual/en/book.dom.php)

# asp.net - 在 asp.net 中将 XML 转换为 DATATABLE

> ID：12946571
> 
> 赞同：0
> 
> 时间：2012-10-18T03:19:31.470
> 
> 标签：asp.net, xml

我这里有一个来自本地驱动器的 xml 文件。
我的问题是如何将此 xml 文件转换为数据表？

任何人都可以帮助我吗？提前致谢。

* * *

```
string filePath = "../../Sample.xml";
    DataTable dt = new DataTable("Sample");
    //columns
    dt.Columns.Add("Column1", typeof(int));
    dt.Columns.Add("Column2", typeof(string));

    dt.ReadXml(filePath);
    GridView1.DataSource = dt;
    GridView1.DataBind(); 
```

* * *

如果 XML 有这样的子项怎么办。

```
 <table1>
  <Sample>
    <Sample_1 Code="1" Desc="xxx">
      <Detail>
        <Detail Desc1="01" Desc2="aaa" Desc3="+++" />
        <Detail Desc1="02" Desc2="bbb" Desc3="--" />
        <Detail Desc1="03" Desc2="ccc" Desc3=",,," />
      </Details>
    <Sample>
<Sample>
    <Sample_2 Code="2" Desc="yyy">
      <Details>
        <Detail Desc1="01" Desc2="aaa" Desc3="+++" />
        <Detail Desc1="02" Desc2="bbb" Desc3="--" />
        <Detail Desc1="03" Desc2="ccc" Desc3=",,," />
      </Details>
    <Sample>    
</table1> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:32:18.183

当前版本的 jqGrid 支持这一点。请参阅此示例 [http://www.ok-soft-gmbh.com/jqGrid/XmlWithAttributes.htm](http://www.ok-soft-gmbh.com/jqGrid/XmlWithAttributes.htm)

**更新** 请参阅下面的代码以将 XML 文件显示到 jsGrid 中

**HTML**

```
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" >

    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/themes/redmond/jquery-ui.css" />
    <link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.1/css/ui.jqgrid.css" />
    <style type="text/css">
    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.1/js/i18n/grid.locale-en.js"></script>
    <script type="text/javascript">
        $.jgrid.no_legacy_api = true;
        $.jgrid.useJSON = true;
    </script>
    <script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.1/js/jquery.jqGrid.src.js"></script>

    <script type="text/javascript">
    //<![CDATA[
        /*global $ */
        /*jslint browser: true, plusplus: true */
        $(function () {
            'use strict';
            $("#ourunittb").jqGrid({
                url: 'Sample.xml',
                datatype: "xml",
                height: 'auto',
                colModel: [
                    { name: 'Author', width: 150,
                        xmlmap: function (obj) {
                            return $(obj).find("author").first().text();
                        } 
                    },
                    { name: 'Title', width: 300, xmlmap: function (obj) {
                        return $(obj).find("title").first().text();
                    } 
                    }
                ],
                xmlReader: {
                    root: "catalog",
                    row: "book",
                    repeatitems: false
                },
                loadonce: true,
                rowNum: 1000
            });
        });
    //]]>
    </script>
</head>
<body>
    <table id="ourunittb"><tr><td/></tr></table>
</body>
</html> 
```

**示例 XML 文件**

```
<?xml version="1.0"?>
<catalog>
   <book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications 
      with XML.</description>
   </book>
   <book id="bk102">
      <author>Ralls, Kim</author>
      <title>Midnight Rain</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2000-12-16</publish_date>
      <description>A former architect battles corporate zombies, 
      an evil sorceress, and her own childhood to become queen 
      of the world.</description>
   </book>
   <book id="bk103">
      <author>Corets, Eva</author>
      <title>Maeve Ascendant</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2000-11-17</publish_date>
      <description>After the collapse of a nanotechnology 
      society in England, the young survivors lay the 
      foundation for a new society.</description>
   </book>
   <book id="bk104">
      <author>Corets, Eva</author>
      <title>Oberon's Legacy</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2001-03-10</publish_date>
      <description>In post-apocalypse England, the mysterious 
      agent known only as Oberon helps to create a new life 
      for the inhabitants of London. Sequel to Maeve 
      Ascendant.</description>
   </book>
   <book id="bk105">
      <author>Corets, Eva</author>
      <title>The Sundered Grail</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2001-09-10</publish_date>
      <description>The two daughters of Maeve, half-sisters, 
      battle one another for control of England. Sequel to 
      Oberon's Legacy.</description>
   </book>
   <book id="bk106">
      <author>Randall, Cynthia</author>
      <title>Lover Birds</title>
      <genre>Romance</genre>
      <price>4.95</price>
      <publish_date>2000-09-02</publish_date>
      <description>When Carla meets Paul at an ornithology 
      conference, tempers fly as feathers get ruffled.</description>
   </book>
   <book id="bk107">
      <author>Thurman, Paula</author>
      <title>Splish Splash</title>
      <genre>Romance</genre>
      <price>4.95</price>
      <publish_date>2000-11-02</publish_date>
      <description>A deep sea diver finds true love twenty 
      thousand leagues beneath the sea.</description>
   </book>
   <book id="bk108">
      <author>Knorr, Stefan</author>
      <title>Creepy Crawlies</title>
      <genre>Horror</genre>
      <price>4.95</price>
      <publish_date>2000-12-06</publish_date>
      <description>An anthology of horror stories about roaches,
      centipedes, scorpions  and other insects.</description>
   </book>
   <book id="bk109">
      <author>Kress, Peter</author>
      <title>Paradox Lost</title>
      <genre>Science Fiction</genre>
      <price>6.95</price>
      <publish_date>2000-11-02</publish_date>
      <description>After an inadvertant trip through a Heisenberg
      Uncertainty Device, James Salway discovers the problems 
      of being quantum.</description>
   </book>
   <book id="bk110">
      <author>O'Brien, Tim</author>
      <title>Microsoft .NET: The Programming Bible</title>
      <genre>Computer</genre>
      <price>36.95</price>
      <publish_date>2000-12-09</publish_date>
      <description>Microsoft's .NET initiative is explored in 
      detail in this deep programmer's reference.</description>
   </book>
   <book id="bk111">
      <author>O'Brien, Tim</author>
      <title>MSXML3: A Comprehensive Guide</title>
      <genre>Computer</genre>
      <price>36.95</price>
      <publish_date>2000-12-01</publish_date>
      <description>The Microsoft MSXML3 parser is covered in 
      detail, with attention to XML DOM interfaces, XSLT processing, 
      SAX and more.</description>
   </book>
   <book id="bk112">
      <author>Galos, Mike</author>
      <title>Visual Studio 7: A Comprehensive Guide</title>
      <genre>Computer</genre>
      <price>49.95</price>
      <publish_date>2001-04-16</publish_date>
      <description>Microsoft Visual Studio 7 is explored in depth,
      looking at how Visual Basic, Visual C++, C#, and ASP+ are 
      integrated into a comprehensive development 
      environment.</description>
   </book>
</catalog> 
```

**输出**

![在此处输入图像描述](../Images/1bba701ac6a808b027e99dba2cf697f6.png)

# ios - 从 NSJSONSerialization 返回的对象可能会有所不同

> ID：12946574
> 
> 赞同：7
> 
> 时间：2012-10-18T03:20:42.880
> 
> 标签：ios, nsjsonserialization

以下陈述是正确的，还是我遗漏了什么？

您必须检查返回对象`NSJSONSerialization`以查看它是字典还是数组 - 您可以拥有

```
data = {"name":"joe", "age":"young"}
// NSJSONSerialization returns a dictionary 
```

和

```
data = {{"name":"joe", "age":"young"},
    {"name":"fred", "age":"not so young"}}
// returns an array 
```

每种类型都有不同的访问方法，如果用于错误的访问方法会中断。例如：

```
NSMutableArray *jsonObject = [json objectAtIndex:i];
// will break if json is a dictionary 
```

所以你必须做类似的事情 -

```
 id jsonObjects = [NSJSONSerialization JSONObjectWithData:jsonData
      options:NSJSONReadingMutableContainers error:&error];

    if ([jsonObjects isKindOfClass:[NSArray class]])
        NSLog(@"yes we got an Array"); // cycle thru the array elements
    else if ([jsonObjects isKindOfClass:[NSDictionary class]])
         NSLog(@"yes we got an dictionary"); // cycle thru the dictionary elements
    else
          NSLog(@"neither array nor dictionary!"); 
```

我通过堆栈溢出和Apple文档和其他地方进行了很好的查看，但找不到上述任何直接确认。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T03:47:31.707

如果您只是问这是否正确，是的，这是处理的安全方法`jsonObjects`。这也是您使用其他返回的 API 的方式`id`。

# linux - 使用 awk 将登录统计信息打印到文件中

> ID：12946575
> 
> 赞同：0
> 
> 时间：2012-10-18T03:20:49.590
> 
> 标签：linux, shell, awk

我正在使用 awk 将服务器登录名放在一个新文件中。我只需要前 10 次登录以及过去用户的字段 1、5、6。这是我发出的 awk 命令，但我将每个人的整个服务器登录统计信息放在我创建的新文件中。请注意，名称“mark”是我要检查的人的示例姓氏：

```
awk -F: '(NR > 1 && NR < 11)  {print $1, $5, $6}' last mark > name_list 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:36:42.450

试试这个（我希望我了解您的需求并且您的`last`命令输出与我的相同）：

```
last | awk 'NR<=10{print $1, $5, $6}' > name_list 
```

如果您想为任何用户创建一个新文件：

```
last | awk 'NR<=10{print $1, $5, $6 > $1".txt"}' 
```

# windows-8 - 是否可以减少 Windows 8 中应用栏的高度？

> ID：12946576
> 
> 赞同：2
> 
> 时间：2012-10-18T03:20:58.117
> 
> 标签：windows-8

我想制作一个外观时尚的薄应用栏。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:33:19.893

设置 Height 和 MinHeight 对我有用：

XAML：

```
<AppBar Height="25" MinHeight="25"> ... </AppBar> 
```

HTML/CSS：

```
.win-appbar.sleek {
    height: 25px;
    min-height: 25px;
}

<div id="sleekAppBar" data-win-control="WinJS.UI.AppBar" class="sleek"
    data-win-options=""> ... </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:32:37.373

让我们以不同的方式思考这个问题。

为什么要保持 AppBar 的大小相同？原因是，您的应用程序将在视觉上与 Windows 8 生态系统的其余部分保持一致。我不是说你不能改变 AppBar；我只是说你最好有充分的理由。

如何自定义 AppBar？这是我关于该主题的整个博客：http: [//blog.jerrynixon.com/2012/10/walkthrough-windows-8-appbar-you-might.html](http://blog.jerrynixon.com/2012/10/walkthrough-windows-8-appbar-you-might.html)

# sql-server - 在 SQL 中选择特定时间的记录

> ID：12946577
> 
> 赞同：0
> 
> 时间：2012-10-18T03:21:02.023
> 
> 标签：sql-server, datetime, select

我想从 SQL 服务器表 'employeelogdetails' 中选择记录，该表具有字段 'logintime'（当员工在进入或离开办公室时刷卡时在 GMT 中注册时间），它是 datetime 日期类型。现在我想选择从昨天 2012 年 10 月 17 日 14:00 GMT 开始的记录

```
SELECT * FROM EMPLOYEELOGDETAILS WHERE LOGINTIME > ' ..........' LOGINTIME DESC 
```

不知道如何前进，已经尝试了一段时间

帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:28:08.773

以下查询将为您提供从 17 日 14:00 之后的当天剩余时间的记录。不过，我不确定您要寻找的时间窗口，因此可能需要稍作调整。

```
SELECT *
FROM EmployeeLogDetails AS eld
WHERE eld.LoginTime > '2012-10-17 14:00:00'
   AND eld.LoginTime < '2012-10-18'
ORDER BY eld.LoginTime DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:48:51.920

这也可以这样工作：

```
SELECT * FROM EmployeeLogDetails  
WHERE LoginTime BETWEEN ('20121017 9:00:00.000' AND '20121018 3:37:00.000') 
ORDER BY LoginTime DESC; 
```

谢谢大家的回复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T03:25:42.340

使用此查询：

```
select * from EmployeeLogDetails where LoginTime between '17/10/2012' and Now(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T03:27:53.253

```
 SELECT * FROM EMPLOYEELOGDETAILS WHERE 
   LOGINTIME > CONVERT(DateTime,'2012/10/17 14:00:00') ORDER BY LOGINTIME DESC 
```

# python - 这是一个 python pandas DataFrame 后排序图错误吗？

> ID：12946578
> 
> 赞同：3
> 
> 时间：2012-10-18T03:21:26.670
> 
> 标签：python, pandas, matplotlib, plot

当我创建一个 DataFrame，然后按列排序时，它似乎在迭代显示中排序（即任何**repr**给出），但是当我调用 DataFrame.plot() 函数时，它会绘制未排序的数组。调用 matplotlib.pylab.plot 工作正常。我怀疑这与聪明的指针重新排列没有传递给绘图函数调用来访问数据的任何事情有关......或者我只是在做一些愚蠢的事情。我已经在 pandas 0.8.1（osx 和 linux 与 python2.7.something）和 pandas 0.9.0（osx 与 python3.something）上尝试过这个。

```
import pandas
import numpy
from matplotlib.pylab import *
a = numpy.random.randn(100,10)
df = pandas.DataFrame(a)
df.shape
df.sort(column=0)
df.columns
df.sort(column=0, inplace=True)
df[0]
df[0].plot() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T07:06:36.447

默认情况下，绘图是您的数据与索引。如果是数字索引，请在对列进行排序后查看索引。你可能想使用情节（use_index=False）。请参见下面的示例。

```
In [2]: df = pd.DataFrame(np.random.randn(10, 2), columns=['A', 'B'])

In [3]: df
Out[3]:
          A         B
0 -0.938196  2.220319
1 -0.022503  0.564602
2  0.033094 -0.717969
3  2.466486  1.229651
4 -0.641596 -1.016921
5  0.094125  1.531526
6  0.579631  1.398635
7 -0.854799 -0.930904
8 -1.177894 -1.501657
9  0.341655 -0.917243

In [4]: df.sort(columns='A', inplace=True)
Out[4]:
          A         B
8 -1.177894 -1.501657
0 -0.938196  2.220319
7 -0.854799 -0.930904
4 -0.641596 -1.016921
1 -0.022503  0.564602
2  0.033094 -0.717969
5  0.094125  1.531526
9  0.341655 -0.917243
6  0.579631  1.398635
3  2.466486  1.229651

In [5]: df['A'].plot(use_index=False)
Out[5]: <matplotlib.axes.AxesSubplot at 0xb56ac6c> 
```

![在此处输入图像描述](../Images/31a3e2aa2ced29bc2812dffd8e3a9446.png)

# mysql - 如何在添加了字符串的值上加入表

> ID：12946584
> 
> 赞同：0
> 
> 时间：2012-10-18T03:21:51.907
> 
> 标签：mysql, sql

我怎样才能`Join`以这种方式制作桌子：

```
SELECT * FROM TableA
JOIN TableB ON
TableA.col = 'http://google.com/'+TableB.col 
```

这两个表相互关联，除了一个表在值前面有一个**字符串。** `(like http://google.com)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:28:07.567

如果您以您编写的方式编写查询，例如

```
 SELECT * 
    FROM TABLEA A 
         JOIN
         TABLEB B 
    ON(A.column1 = CONCAT('http://google.com',B.column1)); 
```

它应该完成你的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T03:28:23.707

试试这个：

```
SELECT … FROM …
JOIN TableB ON 
TableA.col LIKE CONCAT('http://google.com/',TableB.col); 
```

# sql - 在表中插入多行并获取3个不同表的值

> ID：12946587
> 
> 赞同：1
> 
> 时间：2012-10-18T03:22:42.747
> 
> 标签：sql, insert, row

我有 4 张不同的桌子

*   帐户，
*   分支，
*   提单者，
*   tblbiller 政策，

包含其列的 4 个表

*   帐户 (accntID) 主键...
*   分支（branchID）主键...
*   tblbillers (Billerid) 和
*   tblbilerpolicy (PolicyID Primary Key, accountID, BranchID, BillerID, Enabled, ServiceCharge, MerchantCOmission,PLUCode)

现在我想像这样插入表 tblbilerpolicy：

```
INSERT INTO dbo.tblbillerpolicy
      ( 

        AccountID                  ,
        BranchID                   ,
        BillerID                   ,
        Enabled                    ,
        ServiceCharge              ,
        MerchantComission          ,
        PLUCode        

      ) 

Select 142, 2171, 2, 'YES', 0.00, 3.50, 'NULL'

UNION ALL

Select 143, 2171, 2, 'YES', 0.00, 3.50, 'NULL'

UNION ALL

Select  143, 2171, 2, 'YES', 0.00, 3.50, 'NULL'

UNION ALL

Select  143, 2171, 2, 'YES', 0.00, 3.50, 'NULL'

where AccountID = accntid <-- for account
and BranchID = branchid <-- for branch
    and BillerID = billerid <-- for tblbillers 
```

现在我真正想做的是将这个“ONLY”插入与上述表（帐户，分支，账单）连接的tblbillerpolicy。，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:41:49.240

克里斯蒂安·赫尔曼 CM，

您是否要将数据（accountID 142、143 等）插入到具有以下条件的表中：
- accountID (142, 143) 已经在 account 表中，
- branchID (2171) 已经在表中分支
- billerID (2) 已经在账单表中

如果是，请尝试以下查询

```
INSERT INTO dbo.tblbillerpolicy
  ( 
    AccountID                  ,
    BranchID                   ,
    BillerID                   ,
    Enabled                    ,
    ServiceCharge              ,
    MerchantComission          ,
    PLUCode        
  ) 

select t.* from
(Select AccountID=142, BranchID=2171, BillerID=2, Enabled='YES', ServiceCharge=0.00,  MerchantComission=3.50, PLUCode='NULL'
UNION ALL
Select AccountID=143, BranchID=2171, BillerID=2, Enabled='YES', ServiceCharge=0.00, MerchantComission=3.50, PLUCode='NULL'
UNION ALL
Select  AccountID=143, BranchID=2171, BillerID=2, Enabled='YES', ServiceCharge=0.00, MerchantComission=3.50, PLUCode='NULL'
UNION ALL
Select  AccountID=143, BranchID=2171, BillerID=2, Enabled='YES', ServiceCharge=0.00, MerchantComission=3.50, PLUCode='NULL') t,
account a, branch b, tblbillers tb
where a.AccountID = t.accountID --for account
and b.BranchID = t.BranchID --for branch
and tb.BillerID = t.BillerID --for tblbillers 
```

# url - 在 JStree 中使用新 URL 重新加载节点

> ID：12946591
> 
> 赞同：2
> 
> 时间：2012-10-18T03:23:06.267
> 
> 标签：url, refresh, jstree

我正在开发一个包含 2 个 ajax 元素的应用程序。在页面的左侧，我使用 JsTree 进行导航，在右侧，我正在显示搜索表单，其中包含与单击的 Tree 元素相关的数据表内容。当用户在右侧页面上搜索/过滤时，树中的相关节点应重新加载以显示过滤后的内容。这类似于 Windows 文件资源管理器或 Eclipse 资源管理器（带同步）。

单击搜索表单中的搜索按钮时，树中当前选定的节点应重新加载：我可以使用 set settings 在 jsTree 中设置新的 url。（警报显示新网址）。但是，当节点刷新时，它会使用 jsTree 初始化期间指定的 url 进行刷新。请帮我用新的 url 重新加载节点。（注意：我不能对树使用绑定事件，因为执行的操作是在树外的按钮上。）

```
$('#searchbtn').live('click', function() {
var tree = jQuery.jstree._reference("#tree_container");
var currentNode = tree._get_node($(".jstree-clicked"), false);
settings = jQuery("#tree_container").jstree('get_settings');
settings.json_data.ajax.url = "<%= request.getContextPath() %>"/inventory/tree/getTree?search=abcd
jQuery("#tree_container").jstree('set_settings', settings); 
alert("new settings url: "+settings.json_data.ajax.url);
tree.refresh(currentNode);
});

$(function () {
    var tree = $("#tree_container")
        .jstree({ 
        "json_data" : {
            "ajax" : {
                "url" : "<%= request.getContextPath() %>/inventory/tree/getTree",
        "data": function (n) {
          return {
            "operation": "get_children",
            "id": n.attr ? n.attr("id").replace("node_", "") : 0,
            "elementType": n.attr ? n.attr("elementType") : "notdefined",
            "page": n.attr ? n.attr("page") : "nopage"
          };
    }
  }
},
"types": {
  "types": {
    "max_children": -2,
    "max_depth": -2
  }
},
"ui": {
  "initially_select": ["node_1"]
},
"core": {
  // just open those two nodes up   
  // as this is an AJAX enabled tree, both will be downloaded from the server
  "initially_open": ["node_1"]
},
"themes": {
  "theme": "classic",
  "dots" : true,
        "url" : "assets/css/tree/classic/style.css"
},
"plugins": ["themes", "json_data", "ui", "types", "hotkeys"] 
```

})

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:07:38.167

```
$('#treeElement').bind("select_node.jstree", function(e,data) {
    var obj = $("#treeElement").jstree("get_selected");
    var tree = jQuery.jstree._reference("#treeElement");
    tree.refresh(obj);
}); 
```

# backbone.js - 在 Playframework 2 中使用小胡子模板

> ID：12946592
> 
> 赞同：1
> 
> 时间：2012-10-18T03:23:39.650
> 
> 标签：backbone.js, playframework, playframework-2.0

嗨，我正在尝试在 playframework 2 中使用 mustache 模板。所以我的 index.scala.html 看起来像

```
@import com.feth.play.module.pa.views.html._

<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>

<title>Test</title>

<script data-main="@routes.Assets.at("javascripts/main.js")" src="@routes.Assets.at("javascripts/require.js")"></script>

<body>
<header> 
</header>
</body>
</html> 
```

我通过主干视图插入标题。

```
define(['use!jquery', 'use!underscore', 'use!backbone', 'text!templates/View.HeaderView.html',
    'bootstrap', 'bootstrap-dropdown'],
    function($, _, Backbone,headerViewTemplate) {

    return Backbone.View.extend({

        el: $('header'),

        events: {

        },

        initialize: function(options) {
            console.log('headerview init');
            this.template = headerViewTemplate;
        }
} 
```

View.HeaderView.Html 定义如下

```
 <div id="auth-status">
                            @currentAuth() { auth =>
                            @if(auth != null) {
                            <div class="btn-group pull-right" id="auth-loggedin" style="display:auto">
                                <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                                    <i class="icon-user" id="auth-displayname"></i> Welcome
                                    <span class="caret"></span>
                                </a>
                                <ul class="dropdown-menu">

                                    <li><a href="#">Settings</a></li>
                                    <li class="divider"></li>
                                    <li><a href="@com.feth.play.module.pa.controllers.routes.Authenticate.logout" id="auth-logoutlink">Sign Out</a></li>
                                </ul>
                            </div>
                            }
                            @if(auth == null) {
                            @forProviders() { p =>
                            <div class="btn pull-right" id="auth-loggedout">
                                <a href="@p.getUrl()" id="auth-loginlink">
                                    <i class="icon-user"></i> Login With Facebook</a>
                            </div>
                            }

                            }
                            }
</div> 
```

所以我遇到的问题是 scala 模板显示为常规文本而不是 scala 代码。如果我将代码放在 index.scala.html 中，它就可以工作。

帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:48:35.740

您的`View.HeaderView.Html`文件未被检测为 scala 代码，也未被执行/编译。

*   首先，将它放在`views`应用程序的包中。
*   其次使用`.scala.html`扩展。否则编译器将找不到它。

# php - 分页 CI 合并表

> ID：12946599
> 
> 赞同：1
> 
> 时间：2012-10-18T03:24:56.167
> 
> 标签：php, codeigniter, pagination, limit, offset

我需要关于联合表上 CI 分页的帮助。

以下代码不起作用。所有信息都显示在单个页面中，但链接 ( $this->pagination->create_links(); ) 显示正确分页时应该具有的页面数量。每当我单击下一页或其他页面时，它都会显示相同的结果。任何使这项工作成功的建议。谢谢你。

```
public function last_three_months(){
$this->load->model('mymodel');
$this->load->database();
$this->load->library('btree');
$this->load->library('session');
$this->load->library('string');
$this->load->library("Pagination");

    if(date("l",strtotime('now')) == "Monday")
        $isMonday = strtotime('now');
    else
        $isMonday = strtotime('last Monday');
    $min = $isMonday - 7257600; // 7257600 = 12 weeks
    $max = strtotime('now');
    //echo(date("l d M Y",$duration));  

    $result = $this->mymodel->query('SELECT DISTINCT pi.ID PLAN_ID, pi.IMP_PLAN_DATE DUE_DATE, pi.CHANGE_TICKET CHANGE_TICKET, 
    pi.PLAN_DESC PLAN_DESC, pi.EC_STAT EC_STAT, per_info.ID PERSON_ID, per_info.FIRSTNAME OWNER_FIRST,per_info.LASTNAME OWNER_LAST,ps.STATUS PLAN_STAT, 
    pi.TIMESTAMP TIMESTAMP, sn.SN SN, loc.ABBR ABBR, sf.SF SF, pn.ID pn_id, pn.TYPE pn_type, pn.CODE pn_code, pn.YEAR pn_year, pn.NAME pn_name, si.IMP_STAT IMP_STAT
    FROM `Plan_Info` pi, `Member` member,`Person_Info` per_info,`Plan_Stat` ps,`Sn_Imp` si,`System_Name` sn,
    `Location` loc, System_Family sf, PN pn
    WHERE member.MEM_TYPE = "Implementer"  AND pi.OWNER = member.PERSON_ID AND member.PERSON_ID = per_info.ID AND pi.PLAN_STAT = ps.ID AND pi.ID = si.PLAN_ID AND si.SN_ID = sn.ID AND sn.LOC_ID = loc.ID AND sn.SF_ID = sf.ID 
    AND pi.PN_ID = pn.ID  AND  pi.IMP_PLAN_DATE >= '.$min. ' AND pi.IMP_PLAN_DATE < '.$max.' ORDER BY pi.IMP_PLAN_DATE, loc.ABBR, sf.SF')->result_array();      

    $plan_info = $this->btree->convertToBtree($result, array('PLAN_ID','DUE_DATE','CHANGE_TICKET','PLAN_DESC','EC_STAT','PERSON_ID','OWNER_FIRST',  
    'OWNER_LAST','PLAN_STAT','TIMESTAMP','SN','ABBR','SF','pn_id','pn_type','pn_code','pn_year','pn_name','IMP_STAT'), array('PLAN_ID','pn_id','DUE_DATE','ABBR'));

    $total = count($plan_info);

    $config = array();
    $config["base_url"] = base_url() . 'index.php/implementer/last_three_months/';
    $config["total_rows"] = $total;
    $config["per_page"] = 3;
    $config["uri_segment"] = 3;
    $config['first_link'] = 'First';
    $config['last_link'] = 'Last';
    $config['next_link'] = 'next';
    $config['prev_link'] = 'prev';
    //$config['use_page_numbers'] = TRUE;
    $this->pagination->initialize($config);         

    $link = $this->pagination->create_links();
    $content_data = array(
        'plan_info' => $plan_info,
        'link' => $link

    );

    $this->load->view('implementer/view_weekly/header');
    $this->load->view('logo');
    $this->load->view('nev');
    $this->load->view('implementer/view_weekly/content',$content_data);
    $this->load->view('implementer/view_weekly/footer');

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:38:17.453

首先，你完全搞砸了 MVC 的设计理念。尽管如此，这是一个广泛的话题，这不是您所要求的，所以我将专注于解决您的问题。

```
public function last_three_months(){
$this->load->model('mymodel');
$this->load->database();
$this->load->library('btree');
$this->load->library('session');
$this->load->library('string');
$this->load->library("Pagination");

    $per_page = 10;
    $page = $this->uri->segment(3, 1);
    $limit = ($page-1)* $per_page;

    if(date("l",strtotime('now')) == "Monday")
        $isMonday = strtotime('now');
    else
        $isMonday = strtotime('last Monday');
    $min = $isMonday - 7257600; // 7257600 = 12 weeks
    $max = strtotime('now');
    //echo(date("l d M Y",$duration));

//Change the following query to COUNT(id) or something like that.
    $sql = 'SELECT DISTINCT pi.ID PLAN_ID, pi.IMP_PLAN_DATE DUE_DATE, pi.CHANGE_TICKET CHANGE_TICKET, 
    pi.PLAN_DESC PLAN_DESC, pi.EC_STAT EC_STAT, per_info.ID PERSON_ID, per_info.FIRSTNAME OWNER_FIRST,per_info.LASTNAME OWNER_LAST,ps.STATUS PLAN_STAT, 
    pi.TIMESTAMP TIMESTAMP, sn.SN SN, loc.ABBR ABBR, sf.SF SF, pn.ID pn_id, pn.TYPE pn_type, pn.CODE pn_code, pn.YEAR pn_year, pn.NAME pn_name, si.IMP_STAT IMP_STAT
    FROM `Plan_Info` pi, `Member` member,`Person_Info` per_info,`Plan_Stat` ps,`Sn_Imp` si,`System_Name` sn,
    `Location` loc, System_Family sf, PN pn
    WHERE member.MEM_TYPE = "Implementer"  AND pi.OWNER = member.PERSON_ID AND member.PERSON_ID = per_info.ID AND pi.PLAN_STAT = ps.ID AND pi.ID = si.PLAN_ID AND si.SN_ID = sn.ID AND sn.LOC_ID = loc.ID AND sn.SF_ID = sf.ID 
    AND pi.PN_ID = pn.ID  AND  pi.IMP_PLAN_DATE >= '.$min. ' AND pi.IMP_PLAN_DATE < '.$max.' ORDER BY pi.IMP_PLAN_DATE, loc.ABBR, sf.SF';

    $sql2 = 'SELECT DISTINCT pi.ID PLAN_ID, pi.IMP_PLAN_DATE DUE_DATE, pi.CHANGE_TICKET CHANGE_TICKET, 
    pi.PLAN_DESC PLAN_DESC, pi.EC_STAT EC_STAT, per_info.ID PERSON_ID, per_info.FIRSTNAME OWNER_FIRST,per_info.LASTNAME OWNER_LAST,ps.STATUS PLAN_STAT, 
    pi.TIMESTAMP TIMESTAMP, sn.SN SN, loc.ABBR ABBR, sf.SF SF, pn.ID pn_id, pn.TYPE pn_type, pn.CODE pn_code, pn.YEAR pn_year, pn.NAME pn_name, si.IMP_STAT IMP_STAT
    FROM `Plan_Info` pi, `Member` member,`Person_Info` per_info,`Plan_Stat` ps,`Sn_Imp` si,`System_Name` sn,
    `Location` loc, System_Family sf, PN pn
    WHERE member.MEM_TYPE = "Implementer"  AND pi.OWNER = member.PERSON_ID AND member.PERSON_ID = per_info.ID AND pi.PLAN_STAT = ps.ID AND pi.ID = si.PLAN_ID AND si.SN_ID = sn.ID AND sn.LOC_ID = loc.ID AND sn.SF_ID = sf.ID 
    AND pi.PN_ID = pn.ID  AND  pi.IMP_PLAN_DATE >= '.$min. ' AND pi.IMP_PLAN_DATE < '.$max.' ORDER BY pi.IMP_PLAN_DATE, loc.ABBR, sf.SF LIMIT '.$limit.', '.$per_page;

     $total =  $this->mymodel->query($sql)->num_rows();

    $result = $this->mymodel->query($sql2)->result_array();      

    $plan_info = $this->btree->convertToBtree($result, array('PLAN_ID','DUE_DATE','CHANGE_TICKET','PLAN_DESC','EC_STAT','PERSON_ID','OWNER_FIRST',  
    'OWNER_LAST','PLAN_STAT','TIMESTAMP','SN','ABBR','SF','pn_id','pn_type','pn_code','pn_year','pn_name','IMP_STAT'), array('PLAN_ID','pn_id','DUE_DATE','ABBR'));

    $total = count($plan_info);

    $config = array();
    $config["base_url"] = base_url() . 'index.php/implementer/last_three_months/';
    $config["total_rows"] = $total;
    $config["per_page"] = $per_page;
    $config["uri_segment"] = 3;
    $config['use_page_numbers'] = TRUE;
    $config['first_link'] = 'First';
    $config['last_link'] = 'Last';
    $config['next_link'] = 'next';
    $config['prev_link'] = 'prev';
    //$config['use_page_numbers'] = TRUE;
    $this->pagination->initialize($config);         

    $link = $this->pagination->create_links();
    $content_data = array(
        'plan_info' => $plan_info,
        'link' => $link

    );

    $this->load->view('implementer/view_weekly/header');
    $this->load->view('logo');
    $this->load->view('nev');
    $this->load->view('implementer/view_weekly/content',$content_data);
    $this->load->view('implementer/view_weekly/footer');

} 
```

# algorithm - 大 O 符号之和

> ID：12946600
> 
> 赞同：7
> 
> 时间：2012-10-18T03:25:02.497
> 
> 标签：algorithm, big-o

> **可能重复：**
> [将不同的例程加在一起时的大 O](https://stackoverflow.com/questions/7007723/big-o-when-adding-together-different-routines)

`O(n) + O(log(n))`减少到什么程度？我的猜测是`O(n)`但不能给出严格的推理。

我理解`O(n) + O(1)`应该减少到`O(n)`因为`O(1)`只是一个常数。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T03:35:55.453

好吧，因为`O( f(n) ) + O( g(n) ) = O ( f(n) + g(n) )`我们只是想计算一个`f(n)`这样的`f(n) > n + log(n)`

由于随着 n 充分增长`log(n) < n`，我们可以说`f(n) > 2n > n + log(n)`

所以`O(f(n)) = O(2n) = O(n)`

在更一般的意义上，`O( f(n) ) + O( g(n) ) = O( f(n) )`如果`c*f(n)>g(n)`对于某个常数 c。为什么？因为在这种情况下`f(n)`将“主导”我们的算法并决定它的时间复杂度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T03:40:46.063

订单总是减少到更高的订单项。我可以给你直观的推理。假设你有`O(n + n^2)`. 那么哪个部分会在运行时扮演更重要的角色呢？n 或 n^2。显然n^2。因为在 n^2 的地方，当 n 增加或减少时，您不会注意到 n 的影响。

例如，

```
let n = 100, then n^2 = 10000
means n is 0.99% and n^2 is 99.01% of total running time.
What would you consider for runtime?
if n is increased then this difference is clearer. 
```

我想你现在明白了，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T03:35:11.920

答案是 O(n)。O(log n) 小于 O(n)。所以它们的加法求和最大值，即 O(n)。

# java - java：两个0（n）的总时间复杂度和发送字符串的Stringbuilder构造函数的时间复杂度是多少

> ID：12946602
> 
> 赞同：-1
> 
> 时间：2012-10-18T03:25:16.677
> 
> 标签：java, constructor, complexity-theory, big-o, stringbuilder

一个例子是两个不在彼此内的 for 循环。它仍然等于0（n）吗？还有为什么我要问一个 Stringbuilder 构造函数在字符串中发送的时间复杂度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:47:58.470

`StringBuilder`内部`arraycopy(Object, int, Object, int, int)`在构造函数调用和追加方法调用时使用本机，我认为这比`2 for`循环更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:48:14.083

O(n) + O(n) = O(n + n) = O(n)。事实上，对于任何（有限）常数 k，O(k * n) = O(n)。

但是对于实际的编程问题，O(n) 的考虑通常远不如所涉及的系数重要。具有大系数的 O(n) 算法在实践中可能比具有小系数的 O(2 ^(n ) 算法差得多。)

最好发布您的代码替代方案，以及对问题规模的估计，并询问哪个更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T03:51:19.687

问题不清楚。

但如果你的意思是，两个 O(n) 代码一个接一个，那么它仍然是 O(n)。

```
Lim (2*n/n) = 2 (constant).
n->INF 
```

因此 O(N) 既是上限又是下限，这意味着`theta(N) => O(n)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T04:26:35.470

**时间复杂度问题**：

说一个算法是 O(n) 意味着该算法最多需要 n*k 步，其中 n 是输入大小， k 是*任意常数*。因此，无论算法采取 n 步、2n 步、(1/2)n 步、100n 步还是 1000000n 步都没有关系，它仍然是 O(n)。

因此，如果你有两个 O(n) 算法，它们每个都有一些常数 k，它给出了它们相对于 n 采取的步数：比如 k1*n 和 k2*n。如果您同时运行这两种算法，它将采取的步骤数是：

k1*n + k2*n

这与以下内容相同：

(k1 + k2)*n

...因为 n 是一个公因数。并且由于 k1 和 k2 都不会随 n 增长（因为它们是常数），因此它们的*和*k1 + k2 不会随 n 增长。这意味着 k1 + k2 仍然是一个常数，因此运行时仍然是 n 的常数倍。

**字符串生成器问题**：

我不知道，但如果我是你，我会尝试以增加字符串长度来运行构造函数，看看每次需要多长时间。您可以通过当字符串变大时构造函数减速的速度来判断复杂性。

# image - 画布绘制图像质量

> ID：12946608
> 
> 赞同：17
> 
> 时间：2012-10-18T03:25:53.377
> 
> 标签：image, html, canvas, image-quality

这是一个 .png 图像（在右侧），以及我在其上绘制图像的画布元素（在左侧）。你能注意到质量差异吗？Canvas 以明显的质量损失渲染图像。我们能做什么？

我在 Chrome 和 IE9 上观察到了这个结果。其他人可能会做同样的事情。我如何渲染图像很常见：在脚本中我创建一个新`Image()`对象，加载后我调用
`context.drawImage(myimage, x, y);`

![右：我想要的，左：我得到的](../Images/c239f50c81a03e9e807efabfa3753637.png)

**编辑：**

这是我在画布上观察到的初始图像：
![更详细：我首先得到了什么](../Images/7b8b6a8f8df9be7a707c7e3d2296e427.png)

这是我写完后画布呈现的内容：
`context.drawImage(myimage,parseInt(x),parseInt(y));`
![更详细地说：我用圆角坐标得到什么](../Images/f7748bf12cc81060dc88599d18d88c40.png)

我能说什么，伟大的回答人。最好的锐化。帽子给你了。

**编辑2：**

我试过`context.drawImage(myimage, parseInt(x) + 0.5, parseInt(y)+ 0.5);`了，结果如下：

![更详细：最坏情况](../Images/d9ec2b9038f19f21f70cdeeace2568bf.png)

我认为这比第一个更糟糕。我在 chrome 上观察到这一点，在 IE9 上它有点糟糕。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T05:42:22.443

我刚刚创建了两个图像的叠加层，以便它们相互抵消。它没有用，我在边缘有困难。

![叠加图像](../Images/0179f46dce0ce79b8bea3590ec059d29.png)

请检查您的坐标`x, y`是否为整数。在此处使用浮点数可能会使您的图像模糊，因为某些实现尝试在“像素之间”渲染它

```
context.drawImage(myimage, parseInt(x), parseInt(y)); 
```

如果这也不起作用，请尝试使用整数值 + 0.5
我知道对于 OpenGL 实现，您必须使用 0.5 的坐标才能击中像素的中心。

```
context.drawImage(myimage, parseInt(x)+0.5, parseInt(y)+0.5); 
```

* * *

编辑：

在 Html5Rocks 上查看[此页面！](http://www.html5rocks.com/en/tutorials/canvas/performance/#toc-avoid-float)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T18:57:46.730

我知道这已经得到解答，但我想提供更多信息来讨论这里发生了什么以及可以做些什么。

* * *

这是因为图像平滑，默认情况下默认为画布上的双线性/trilieaner/bicubic 等平滑算法，而您想要的称为最近邻。

该规范最近添加了一个名为 的属性`imageSmoothingEnabled`，该属性默认`true`并确定在非整数坐标上绘制或按比例绘制的图像是否将使用更平滑的算法。如果将其设置为，`false`则使用最近邻，产生不太平滑的图像，而只是制作更大的像素。

图像平滑只是最近才添加到画布规范中，并非所有浏览器都支持，但一些浏览器已经实现了此属性的供应商前缀版本。`mozImageSmoothingEnabled`在 Firefox 和Chrome 和 Safari 中存在上下文`webkitImageSmoothingEnabled`，将这些设置为 false 将停止发生抗锯齿。不幸的是，在撰写本文时，IE9 和 Opera 还没有实现这个属性，无论是供应商前缀还是其他。

一般来说，您只需要遵循两条规则：

1.  如果要缩放画布，则需要禁用图像平滑或使用最近邻插值对其进行缩放。现在有一些算法可以手动执行此操作，这就是上述选项正在执行的操作。
2.  如果你不是在整数坐标上绘图，你会遇到同样的问题并且它有同样的解决方案。如果您的浏览器上不存在上述选项，则需要恢复为整数坐标`(x | 0, y | 0)`

但是，如果`x | 0`楼层`x`很快，则不适用于大于 2,147,483,647 的数字：最大的 32 位有符号整数。

希望你的坐标不大于那个！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-14T10:50:53.220

我认为这个[链接](http://davidjs.com/2011/08/blurry-images-in-html5-canvas/)会很有帮助。我做了同样的事情，但在我的情况下，我使用 javascript 动态地给画布重量和高度。然后我在声明时将高度和宽度指定给画布。即解决问题。

# android - 在 Canvas 上绘制部分图像

> ID：12946609
> 
> 赞同：2
> 
> 时间：2012-10-18T03:26:01.793
> 
> 标签：android, image, android-canvas

我有一个大小为 265x256 的图像，我想在 Canvas 上的随机位置绘制大小为 16x16 的左上角和右下角部分有人可以分享这个概念或代码吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:31:27.507

我认为您可以使用[Canvas](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20android.graphics.Rect,%20android.graphics.Rect,%20android.graphics.Paint%29)方法

```
public void drawBitmap (Bitmap bitmap, Rect src, RectF dst, Paint paint) 
```

其中文档将第二个参数 src 声明为

> 如果源矩形不为空，它指定要绘制的位图子集。

因此，您可以在第二个参数中传递要绘制的源位图的矩形。

# python - 使用python解析XML文件

> ID：12946610
> 
> 赞同：0
> 
> 时间：2012-10-18T03:26:05.770
> 
> 标签：python, xml-parsing

我有一个已经为我编写的 python 模块，用于下载和解析来自谷歌专利列表的数据。代码运行良好，直到我在 2005 年之前做任何事情。除了如何运行模块之外，我对 python 一无所知。我如何解决它？

我收到的回溯是：

```
Traceback (most recent call last): 
  File "C:\Users\John\Desktop\FINAL BART ALL INFO-Magic Bullet.py", line 46, in <module> 
    assert xml_file is not None
AssertionError 
```

这是我正在使用的代码：

```
#Ignore all this information 
import urllib2, os, zipfile
from lxml import etree
#-------------------------------------------------------------------------------
#Ignore all this information 
def xmlSplitter(data,separator=lambda x: x.startswith('<?xml')):
  buff = []
  for line in data:
    if separator(line):
      if buff:
        yield ''.join(buff)
        buff[:] = []
    buff.append(line)
  yield ''.join(buff)

def first(seq,default=None):
  """Return the first item from sequence, seq or the default(None) value"""
  for item in seq:
    return item
  return default
#-------------------------------------------------------------------------------
#This is where you change the internet source file- Use the file extensions from the sheet provided.
datasrc = "http://storage.googleapis.com/patents/grant_full_text/2003/pg030107.zip"
#http://commondatastorage.googleapis.com/patents/grant_full_text/2012/ipg120117.zip
filename = datasrc.split('/')[-1]
#-------------------------------------------------------------------------------
#Ignore all this information 
if not os.path.exists(filename):
  with open(filename,'wb') as file_write:
    r = urllib2.urlopen(datasrc)
    file_write.write(r.read())

zf = zipfile.ZipFile(filename)
xml_file = first([ x for x in zf.namelist() if x.endswith('.xml')])
assert xml_file is not None
#-------------------------------------------------------------------------------
#output set your folder location here, keep double \\ between
outFolder = "C:\\PatentFiles\\"
outFilename = os.path.splitext(filename)[0]
#-------------------------------------------------------------------------------
#These outputs are the names of the files-Ignore all this information 
output = outFolder + outFilename + "_general.txt"
output2 = outFolder + outFilename + "_USCL.txt"
output3 = outFolder + outFilename + "_citation.txt"
output4 = outFolder + outFilename + "_inventor.txt"
#Open files
outFile = open(output, "w")
outFile2 = open(output2, "w")
outFile3 = open(output3, "w")
outFile4 = open(output4, "w")
#write the headers
outFile.write("Patent No.|GrantDate|Application Date|Number of Claims|Examiners|US Primary Main Classification|Assignee|Assignee Address City_State_Country|First Inventor|First Inventor Address City_State_Country| \n")
outFile2.write("Patent No.|Primary|U.S Classification| \n")
outFile3.write ("Patent No.|Citation|Citation Date|Who Cited This| \n")
outFile4.write ("Patent No.|Inventor Last Name|First Name|City|State|Country|Nationality Country|Residence Country|\n")
#-------------------------------------------------------------------------------
#Here is the count- adjust this each time you run the program for the first time.
#Run at 10 for the 1st run then 5500 afterward.
count = 0
for item in xmlSplitter(zf.open(xml_file)):
  count += 1
  #5500
  if count > 10: break  
  doc = etree.XML(item)
  #-------------------------------------------------------------------------------
  #This is where the python starts parsing the infomation.
  #This is the Start of the General Infomation file.
  docID = "~".join(doc.xpath('//publication-reference/document-id/country/text()|//publication-reference/document-id/doc-number/text()'))
  docID = docID.replace("D0","D") 
  docID = docID.replace("H000","H")
  docID = docID.replace("PP0","PP")
  docID = docID.replace("PP0","PP")
  docID = docID.replace("RE0","RE")
  docID = docID.replace("~0","~")
  docID = docID.replace("US~","")

  grantdate = first(doc.xpath('//publication-reference/document-id/date/text()'))
  applicationdate = first(doc.xpath('//application-reference/document-id/date/text()'))
  claimsNum = first(doc.xpath('//number-of-claims/text()'))

  assignee1 = "-".join(doc.xpath('//assignees/assignee/addressbook/orgname/text()|//assignees/assignee/addressbook/last-name/text()|//assignees/assignee/addressbook/first-name/text()'))
  assignee1 = assignee1.replace('-',', ')
  assignee2 = "_".join(doc.xpath('//assignee/addressbook/address/*/text()'))
  assignees = str(assignee1.encode("UTF-8")) + "|" + str(assignee2.encode("UTF-8"))  

  inventors1 = first(doc.xpath('//applicants/applicant/addressbook/last-name/text()'))
  inventor2 = first(doc.xpath('//applicants/applicant/addressbook/first-name/text()'))
  inventor3 = first(doc.xpath('//applicants/applicant/addressbook/address/city/text()'))
  inventor4 = first(doc.xpath('//applicants/applicant/addressbook/address/state/text()'))
  inventor5 = first(doc.xpath('//applicants/applicant/addressbook/address/country/text()'))
  inventor = str(inventor2.encode("UTF-8") if inventor2 else inventor2) + " " + str(inventors1.encode("UTF-8") if inventors1 else inventors1)
  inventors2 = str(inventor3.encode("UTF-8") if inventor3 else inventor3) + "_" + str(inventor4) + "_" + str(inventor5)
  inventors = str(inventor) + "|" + str(inventors2)

  examiners = "~".join(doc.xpath('//examiners/primary-examiner/first-name/text()|//examiners/primary-examiner/last-name/text()'))
  examiners = examiners.replace("~",", ")

  uscl1 = first(doc.xpath('//classification-national/main-classification/text()'))

  #END FIRST TEXT FILE #-------------------------------------------------------------------------------
  #This begings the USCL file
  notprimary = first(doc.xpath('//publication-reference/document-id/country/text()'))
  notprimary = notprimary.replace("US","0")

  primary1 = first(doc.xpath('//publication-reference/document-id/country/text()'))
  primary1 = primary1.replace("US","1")

  uscl2 = "~".join(doc.xpath('//us-bibliographic-data-grant/classification-national/*/text()|//sequence-cwu/publication-reference/document-id/country/text()'))
  #-------------------------NOTE--------------------------------------------------
  #--------------------------NOTE-------------------------------------------------
  #-----------------------NOTE----------------------------------------------------
  #NOTE- RUN through count 10 then remove pound signs from two below
  uscl2 = uscl2.replace("US~", str(primary1) + "|")
  uscl2 = uscl2.replace("~", "|" + "\n" + str(docID) + "|" + str(notprimary) + "|")
  uscl2 = uscl2.replace("US", "|") 

  #END SECOND TEXT FILE #-------------------------------------------------------------------------------
  #Begin the Citation file
  citation = '~'.join(doc.xpath('//publication-reference/document-id/country/text()|//references-cited/citation/patcit/document-id/country/text()|//references-cited/citation/patcit/document-id/doc-number/text()|//references-cited/citation/patcit/document-id/kind/text()|//references-cited/citation/patcit/document-id/date/text()|//references-cited/citation/category/text()'))

  #Here is the start of the patent connectors- in the patents they exist at the end. They are replaced in this code to make pipes | for the final output
  citation = citation.replace("~A~", "$@")
  citation = citation.replace("~S~", "$@")
  citation = citation.replace("~S1~", "$@")
  citation = citation.replace("~B1~", "$@")
  citation = citation.replace("~B2~", "$@")
  citation = citation.replace("~A1~", "$@")
  citation = citation.replace("~H~", "$@")
  citation = citation.replace("~E~", "$@")

  #citation = citation.replace("~QQ~", "$@")

  #make unique citation changes here-for example when "US" or "DE" in imbeded in citation see below
  citation = citation.replace("05225US~", "05225U$|" )
  citation = citation.replace("063106 DE", "063106D!" )
  citation = citation.replace("US~US~", "US~" )
  citation = citation.replace("PCT/US", "PCT/U$")
  citation = citation.replace("PCTUS", "PCTU$")
  citation = citation.replace("WO US", "WO U$")
  citation = citation.replace("WO~US", "WO~ U$")

  #fixes for cites without pipes-see below -DONT TOUCH THESE
  citation = citation.replace("US~cited by examiner", "||cited by examiner" )
  citation = citation.replace("US~cited by other", "||cited by other" )

  #Here are the changes to return each citation into a unique row
  #If a country is only listed in the columns in Excel they need a fix like this, If KR is alone then use the code:::: citation = citation.replace("KR~", "Foreign -KR-" )
  citation = citation.replace("$@", "|")
  citation = citation.replace("~US~", "|" + "\n" + str(docID) +"|")
  citation = citation.replace("US~", "")
  citation = citation.replace("~JP~", "|" + "\n" + str(docID) +"|"+ "Foreign -JP-")
  citation = citation.replace("JP~", "Foreign -JP-" )
  citation = citation.replace("~GB~", "|" + "\n" + str(docID) +"|"+ "Foreign -GB-")
  citation = citation.replace("GB~", "Foreign -GB-" )
  citation = citation.replace("~WO~", "|" + "\n" + str(docID) +"|"+ "Foreign -WO-")
  citation = citation.replace("WO~", "Foreign -WO-" )
  citation = citation.replace("~CA~", "|" + "\n" + str(docID) +"|"+ "Foreign -CA-")
  citation = citation.replace("~DE~EP~", "~DE~ EP-" )
  citation = citation.replace("~DE~", "|" + "\n" + str(docID) +"|"+ "Foreign -DE-")
  citation = citation.replace("DE~", "Foreign -DE-" )
  citation = citation.replace("~KR~", "|" + "\n" + str(docID) +"|"+ "Foreign -KR-")
  citation = citation.replace("KR~", "Foreign -KR-" )
  citation = citation.replace("~EM~", "|" + "\n" + str(docID) +"|"+ "Foreign -EM-")
  citation = citation.replace("~CH~", "|" + "\n" + str(docID) +"|"+ "Foreign -CH-")
  citation = citation.replace("~DE~", "|" + "\n" + str(docID) +"|"+ "Foreign -DE-")
  citation = citation.replace("~SE~", "|" + "\n" + str(docID) +"|"+ "Foreign -SE-")
  citation = citation.replace("~FR~", "|" + "\n" + str(docID) +"|"+ "Foreign -FR-")
  citation = citation.replace("~FR~EP~", "~FR~ EP-" )
  citation = citation.replace("FR~", "Foreign -FR-" )
  citation = citation.replace("~CN~", "|" + "\n" + str(docID) +"|"+ "Foreign -CN-")
  citation = citation.replace("~TW~", "|" + "\n" + str(docID) +"|"+ "Foreign -TW-")
  citation = citation.replace("~TW", "|" + "\n" + str(docID) +"|"+ "Foreign -TW-")
  citation = citation.replace("TW~", "Foreign -TW-" )
  citation = citation.replace("~NL~", "|" + "\n" + str(docID) +"|"+ "Foreign -NL-")
  citation = citation.replace("~BR~", "|" + "\n" + str(docID) +"|"+ "Foreign -BR-")
  citation = citation.replace("~AU~", "|" + "\n" + str(docID) +"|"+ "Foreign -AU-")
  citation = citation.replace("~ES~", "|" + "\n" + str(docID) +"|"+ "Foreign -ES-")
  citation = citation.replace("~IT~", "|" + "\n" + str(docID) +"|"+ "Foreign -IT-")
  citation = citation.replace("~SU~", "|" + "\n" + str(docID) +"|"+ "Foreign -SU-")
  citation = citation.replace("~AT~", "|" + "\n" + str(docID) +"|"+ "Foreign -AT-")
  citation = citation.replace("~BE~", "|" + "\n" + str(docID) +"|"+ "Foreign -BE-")
  citation = citation.replace("~DK~", "|" + "\n" + str(docID) +"|"+ "Foreign -DK-")
  citation = citation.replace("~RU~", "|" + "\n" + str(docID) +"|"+ "Foreign -RU-")
  citation = citation.replace("RU~", "Foreign -RU-" )

  #citation = citation.replace("~QQ~", "|" + "\n" + str(docID) +"|"+ "Foreign -QQ-")

  #These are just end of citation fixes-DONT TOUCH THESE
  citation = citation.replace("cited by other~cited by other~cited by other~cited by other~cited by other~cited by other~cited by other~cited by other~cited by other~cited by other", "cited by other" )
  citation = citation.replace("cited by examiner~cited by other~cited by other", "cited by examiner" )
  citation = citation.replace("cited by other~cited by examiner~cited by examiner", "cited by other" )
  citation = citation.replace("cited by other~cited by other~cited by other~cited by other", "cited by other" )
  citation = citation.replace("cited by examiner~cited by examiner~cited by examiner~cited by examiner", "cited by examiner" )
  citation = citation.replace("cited by other~cited by other", "cited by other" )
  citation = citation.replace("cited by examiner~cited by examiner", "cited by examiner" )
  citation = citation.replace("cited by other~cited by examiner", "cited by other" )
  citation = citation.replace("cited by examiner~cited by other", "cited by examiner" )
  citation = citation.replace("cited by examiner~cited by other~cited by other", "cited by examiner" )
  citation = citation.replace("cited by other~cited by examiner~cited by examiner", "cited by other" )
  citation = citation.replace("cited by other~cited by other~cited by other~cited by other", "cited by other" )
  citation = citation.replace("cited by examiner~cited by examiner~cited by examiner~cited by examiner", "cited by examiner" )
  citation = citation.replace("cited by other~cited by other", "cited by other" )
  citation = citation.replace("cited by examiner~cited by examiner", "cited by examiner" )
  citation = citation.replace("cited by other~cited by examiner", "cited by other" )
  citation = citation.replace("cited by examiner~cited by other", "cited by examiner" )
  citation = citation.replace("cited by examiner~cited by other~cited by other", "cited by examiner" )
  citation = citation.replace("cited by other~cited by examiner~cited by examiner", "cited by other" )
  citation = citation.replace("cited by other~cited by other~cited by other~cited by other", "cited by other" )
  citation = citation.replace("cited by examiner~cited by examiner~cited by examiner~cited by examiner", "cited by examiner" )
  citation = citation.replace("cited by other~cited by other", "cited by other" )
  citation = citation.replace("cited by examiner~cited by examiner", "cited by examiner" )
  citation = citation.replace("cited by other~cited by examiner", "cited by other" )
  citation = citation.replace("cited by examiner~cited by other", "cited by examiner" )
  citation = citation.replace("cited by other~cited by other", "cited by other" )
  citation = citation.replace("cited by examiner~cited by examiner", "cited by examiner" )
  citation = citation.replace("cited by other~cited by examiner", "cited by other" )
  citation = citation.replace("cited by examiner~cited by other", "cited by examiner" )

  citation = citation.replace("~", "|" )

  citation = citation.replace("US", "||")

  #make unique post-processing citation changes here-If needed for the end of the scripts
  citation = citation.replace("CA|", "Foreign -CA-" )
  citation = citation.replace("EP|", "Foreign -EP-" )
  citation = citation.replace("CN|", "Foreign -CN-" )
  citation = citation.replace("$", "S")
  citation = citation.replace("D!", "DE")

  #citation = citation.replace(" ", " " )

  #END CITATION FILE-------------------------------------------------------------------------------

  #START the inventors file
  inventor1 = doc.xpath('//applicants/applicant/addressbook/last-name/text()|//applicants/applicant/addressbook/first-name/text()|//applicants/applicant/addressbook/address/city/text()|//applicants/applicant/addressbook/address/state/text()|//applicants/applicant/addressbook/address/country/text()|//applicants/applicant/nationality/*/text()|//applicants/applicant/residence/*/text()|//sequence-cwu/publication-reference/document-id/country/text()|//sequence-cwu/number/text()')
  inventor1 = '~'.join(inventor1).replace('\n-','')

  #For files after 2009 use this to replace State errors in the Excel- If the output is short then use this to add in a None value for State
  inventor1 = inventor1.replace('~KR~omitted','~None~KR~omitted')
  inventor1 = inventor1.replace('~GB~omitted','~None~GB~omitted')
  inventor1 = inventor1.replace('~IT~omitted','~None~IT~omitted')
  inventor1 = inventor1.replace('~JP~omitted','~None~JP~omitted')
  inventor1 = inventor1.replace('~FR~omitted','~None~FR~omitted')
  inventor1 = inventor1.replace('~BR~omitted','~None~BR~omitted')
  inventor1 = inventor1.replace('~NO~omitted','~None~NO~omitted')
  inventor1 = inventor1.replace('~HK~omitted','~None~HK~omitted')
  inventor1 = inventor1.replace('~CA~omitted','~None~CA~omitted')
  inventor1 = inventor1.replace('~TW~omitted','~None~TW~omitted')
  inventor1 = inventor1.replace('~SE~omitted','~None~SE~omitted')
  inventor1 = inventor1.replace('~CH~omitted','~None~CH~omitted')
  inventor1 = inventor1.replace('~DE~omitted','~None~DE~omitted')
  inventor1 = inventor1.replace('~SG~omitted','~None~SG~omitted')
  inventor1 = inventor1.replace('~IN~omitted','~None~IN~omitted')
  inventor1 = inventor1.replace('~IL~omitted','~None~IL~omitted')
  inventor1 = inventor1.replace('~CN~omitted','~None~CN~omitted')
  inventor1 = inventor1.replace('~FI~omitted','~None~FI~omitted')
  inventor1 = inventor1.replace('~ZA~omitted','~None~ZA~omitted')
  inventor1 = inventor1.replace('~NL~omitted','~None~NL~omitted')
  inventor1 = inventor1.replace('~AT~omitted','~None~AT~omitted')
  inventor1 = inventor1.replace('~AU~omitted','~None~AU~omitted')
  inventor1 = inventor1.replace('~BE~omitted','~None~BE~omitted')
  inventor1 = inventor1.replace('~CZ~omitted','~None~CZ~omitted')
  inventor1 = inventor1.replace('~RU~omitted','~None~RU~omitted')
  inventor1 = inventor1.replace('~IE~omitted','~None~IE~omitted')
  inventor1 = inventor1.replace('~AR~omitted','~None~AR~omitted')
  inventor1 = inventor1.replace('~MY~omitted','~None~MY~omitted')
  inventor1 = inventor1.replace('~SK~omitted','~None~SK~omitted')
  inventor1 = inventor1.replace('~ES~omitted','~None~ES~omitted')
  inventor1 = inventor1.replace('~NZ~omitted','~None~NZ~omitted')
  inventor1 = inventor1.replace('~HU~omitted','~None~HU~omitted')
  inventor1 = inventor1.replace('~UA~omitted','~None~UA~omitted')
  inventor1 = inventor1.replace('~DK~omitted','~None~DK~omitted')
  inventor1 = inventor1.replace('~TH~omitted','~None~TH~omitted')
  inventor1 = inventor1.replace('~MX~omitted','~None~MX~omitted')

  #inventor1 = inventor1.replace('~QQ~omitted','~None~QQ~omitted')

  #For the 2005-2008 files use these lines

  inventor1 = inventor1.replace('~NO~NO~NO','~None~NO~NO~NO')
  inventor1 = inventor1.replace('~NZ~NZ~NZ','~None~NZ~NZ~NZ')
  inventor1 = inventor1.replace('~RU~RU~RU','~None~RU~RU~RU')
  inventor1 = inventor1.replace('~RO~RO~RO','~None~RO~RO~RO')
  inventor1 = inventor1.replace('~SE~SE~SE','~None~SE~SE~SE')
  inventor1 = inventor1.replace('~SG~SG~SG','~None~SG~SG~SG')
  inventor1 = inventor1.replace('~SI~SI~SI','~None~SI~SI~SI')
  inventor1 = inventor1.replace('~TH~TH~TH','~None~TH~TH~TH')
  inventor1 = inventor1.replace('~TR~TR~TR','~None~TR~TR~TR')
  inventor1 = inventor1.replace('~TW~TW~TW','~None~TW~TW~TW')
  inventor1 = inventor1.replace('~VE~VE~VE','~None~VE~VE~VE')
  inventor1 = inventor1.replace('~ZA~ZA~ZA','~None~ZA~ZA~ZA')
  inventor1 = inventor1.replace('~AN~AN~AN','~None~AN~AN~AN')
  inventor1 = inventor1.replace('~AR~AR~AR','~None~AR~AR~AR')
  inventor1 = inventor1.replace('~BA~BA~BA','~None~BA~BA~BA')
  inventor1 = inventor1.replace('~PH~PH~PH','~None~PH~PH~PH')
  inventor1 = inventor1.replace('~HR~HR~HR','~None~HR~HR~HR')
  inventor1 = inventor1.replace('~LT~LT~LT','~None~LT~LT~LT')
  inventor1 = inventor1.replace('~EE~EE~EE','~None~EE~EE~EE')
  inventor1 = inventor1.replace('~BJ~BJ~BJ','~None~BJ~BJ~BJ')
  inventor1 = inventor1.replace('~CR~CR~CR','~None~CR~CR~CR')
  inventor1 = inventor1.replace('~PL~PL~PL','~None~PL~PL~PL')
  inventor1 = inventor1.replace('~CO~CO~CO','~None~CO~CO~CO')
  inventor1 = inventor1.replace('~UA~UA~UA','~None~UA~UA~UA')
  inventor1 = inventor1.replace('~KW~KW~KW','~None~KW~KW~KW')
  inventor1 = inventor1.replace('~CL~CL~CL','~None~CL~CL~CL')
  inventor1 = inventor1.replace('~CY~CY~CY','~None~CY~CY~CY')
  inventor1 = inventor1.replace('~LI~LI~LI','~None~LI~LI~LI')
  inventor1 = inventor1.replace('~SA~SA~SA','~None~SA~SA~SA')

  #inventor1 = inventor1.replace('~QQ~QQ~QQ','~None~QQ~QQ~QQ')

  #For lines that don't return use these lines in the code for 2009-
  inventor1 = inventor1.replace('omitted~US~','omitted~US' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~FR~','omitted~FR' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~DK~','omitted~DK' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~KR~','omitted~KR' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~JP~','omitted~JP' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~GB~','omitted~GB' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~IT~','omitted~IT' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~CH~','omitted~CH' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~SG~','omitted~SG' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~DE~','omitted~DE' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~IN~','omitted~IN' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~TW~','omitted~TW' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('omitted~CN~','omitted~CN' +"|"+ '\n' + str(docID) +"|")

  #inventor1 = inventor1.replace('omitted~QQ~','omitted~QQ' +"|"+ '\n' + str(docID) +"|")

  #for lines 2005-2008 use this line for returning countries
  inventor1 = inventor1.replace('AT~AT~AT~','AT~AT~AT' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('AN~AN~AN~','AN~AN~AN' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('AR~AR~AR~','AR~AR~AR' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('AU~AU~AU~','AU~AU~AU' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('AZ~AZ~AZ~','AZ~AZ~AZ' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('BA~BA~BA~','BA~BA~BA' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('BE~BE~BE~','BE~BE~BE' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('BR~BR~BR~','BR~BR~BR' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('BS~BS~BS~','BS~BS~BS' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('CA~CA~CA~','CA~CA~CA' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('CH~CH~CH~','CH~CH~CH' +"|"+ '\n' + str(docID) +"|")
  inventor1 = inventor1.replace('CN~CN~CN~','CN~CN~CN' +"|"+ '\n' + str(docID) +"|")

  #inventor1 = inventor1.replace('QQ~QQ~QQ~','QQ~QQ~QQ' +"|"+ '\n' + str(docID) +"|")

  #special case fixes- these are for strange names fixes in the code that may not create the correct amount of columns.
  inventor1 = inventor1.replace('~None~None~NO~','~None~NO~')
  inventor1 = inventor1.replace('Ramandeep~Chandigarh','Ramandeep|None~Chandigarh')
  inventor1 = inventor1.replace('Esk~eh~r','Eskehr')
  inventor1 = inventor1.replace('Baychar~Eastport','Baychar~None~Eastport')

  inventor1 = inventor1.replace('US~1', '||||||')
  inventor1 = inventor1.replace('~','|') 

  #End the inventor file
  #-------------------------------------------------------------------------------

  #Here are the output print fields- you can change one if you want but remember to comment out all but the one you wish to view.
  print "DocID: {0}\nGrantDate: {1}\nApplicationDate: {2}\nNumber of Claims: {3}\nExaminers: {4}\nAssignee: {5}\nInventor: {6}\nUS Cl.: {7}\n".format(docID,grantdate,applicationdate,claimsNum,examiners.encode("UTF-8"),assignees,inventors,uscl1)
  #print "DocID: {0}\nU.S Cl: {1}\nPrimary: {2}\n".format(docID,uscl2,primary1)
  #print "DocID: {0}\nCitation: {1}\n".format(docID,citation.encode("UTF-8"))
  #print "DocID:    {0}\nTitle:    {1}\nInventors: {2}\n".format(docID,appID,inventor1.encode("UTF-8"))

  #------------------------------------------------------------------------------- IGNORE Everything else below this.
  #Output first general info bits
  outFile.write(str(docID) +"|"+ str(grantdate) +"|"+ str(applicationdate) + "|"+ str(claimsNum) + "|"+ str(examiners.encode("UTF-8")) + "|"+ str(uscl1) + "|"+ str(assignees) + "|"+ str(inventors)  +"|"+"\n")

  #Output Classifications only
  outFile2.write(str(docID) +"|"+ str(uscl2) +"|"+ "\n")

  #Output Citations only
  outFile3.write(str(docID) +"|"+ str(citation) +"|"+"\n")

  #Output inventors only
  outFile4.write(str(docID)  + "|"+ str(inventor1.encode("UTF-8")) + "|" +"\n")

outFile.close()
outFile2.close()
outFile3.close()
outFile4.close()
print "output files complete" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T20:57:00.877

您看到的问题不是 python 问题。代码解压缩一个 zipfile 并期望在其中找到一个 xml 文件。assert 语句是用于确保找到 xml 文件的 chack 语句。它旨在在找不到 xml 文件时停止您的程序。如果您下载分配给您的 zipfile，`datasrc`您会发现一个空的 zipfile。当它试图找到 xml 文件时，它没有找到一个，所以`xml_file = None`. 然后当它到达`assert`语句时，它会引发断言错误。

您可能可以取出`assert`并运行代码就好了，但是当您的程序崩溃时，您将不知道为什么。将它放在那里为您提供了一种方便的方法来捕捉失败的时间、地点和原因。

# javascript - 单击时保持输入框处于视图中（块展开）

> ID：12946616
> 
> 赞同：0
> 
> 时间：2012-10-18T03:27:08.007
> 
> 标签：javascript, html

我目前有一个 CSS 表的以下 JavaScript，它在点击时隐藏和显示内容：

```
function toggle2(id, link) {
 var e = document.getElementById(id);
  if (e.style.display == '') {
   e.style.display = 'none';
  } else {
   e.style.display = '';
  }
} 
```

然后我有以下代码在“问题”下显示一个输入框：

```
<li>
  <a href="#" onclick="toggle2(\'question\', this);">Question
   <div id="question" style="display:none; margin:0px;">
    <input type="text" />
  </div>
  </a>
</li> 
```

问题是，当我单击需要保留在 中的**输入框**`block`时，该**框**消失了。我需要那个**盒子**留下来，我怎样才能在不影响其他东西的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:45:42.313

因为当你点击输入框的时候，你也“点击”了`<a>`. 移出：

[http://jsfiddle.net/d33zC/](http://jsfiddle.net/d33zC/)

如果您希望输入框与链接保持在同一行，请`display:inline-block`注意。`<div>`

**编辑**：

从评论延伸，看来这就是你要找的东西：

[http://jsfiddle.net/d33zC/5/](http://jsfiddle.net/d33zC/5/)

`border-bottom`从移动`a`到`li`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:30:53.940

输入框被隐藏，因为它在`question`div 中。把它移到外面，你就不会有问题了。

# timezone - Windows Embedded CE 6.00 cannot .run Net compact Framework 3.5 application

> ID：12946618
> 
> 赞同：2
> 
> 时间：2012-10-18T03:27:18.573
> 
> 标签：timezone, .net-2.0, windows-ce, exchangewebservices

First of all, i have a device with Windows Embedded CE 6.0\. As we know, EWS Managed API can only be used on .NET Framework 3.5 and above.

I created a new project ->Smart Device Project ->

Target Platform: Window CE

.NET Compact Framework Version: .NET Compact Framework Version 3.5

Templates: Device Application

Then i tried to use EWS API library to write a program to send email from server to my email but there is an error.

Error 1 The type 'System.TimeZoneInfo' is defined in an assembly that is not referenced. You must add a reference to assembly 'System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'. C:\Documents and Settings\christopher.lim\My Documents\Visual Studio 2008\Projects\SmartDeviceProject1\SmartDeviceProject1\Form1.cs 23 13 SmartDeviceProject1

This error occur when .NET Framework is not compatible which means my Window Embedded CE 6.0 cannot run application which need .NET Framework 3.5.

So is there anyway that i can upgrade my Window CE so that it can run .NET Framework 3.5 and above application??

Hope someone can help me with this. Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T14:32:38.127

The Compact Framework, in *all* iterations, will work fine under CE 6.0 (1.0 isn't officially "supported" but it would run if you wanted to use it).

The issue you're seeing is a compiler problem, not a runtime problem. The root of the problem is (cryptically) stated in the error, in the public key token. `b77a5c561934e089` is the public key for the desktop framework.

Basically the compiler is telling you "Hey, you're referencing a DLL that uses the desktop System.Core.dll assembly, so you need to add a reference to that DLL." The problem with that is that the desktop System.Core.dll assembly will not run on a Windows CE device.

You have to use the Compact Framework System.Core.dll (which has a public key of `969db8053d3322ac`). That means that whatever you're referencing (EWS Managed API) must be recompiled using the Compact Framework references, or you must find an alternate way to provide the feature/function you're after.

# c# - C#/NHibernate - 获取按分组和排序的前 10 条记录

> ID：12946620
> 
> 赞同：2
> 
> 时间：2012-10-18T03:27:27.063
> 
> 标签：c#, mysql, nhibernate

好吧，基本上我正在尝试找出一种方法来获得 10 种最畅销的产品。我可以通过以下 SQL 查询轻松实现：

```
SELECT `product`.*
FROM `product`
INNER JOIN `sale_item` ON `product`.`id` = `sale_item`.`product_id`
GROUP BY `product`.`id`
ORDER BY SUM(`sale_item`.`quantity`) DESC
LIMIT 10; 
```

我认为最接近 NHibernate 成功的是：

```
ICriteria criteria = NHibernateSession
    .CreateCriteria<SaleItem>("SaleItem")
    .SetMaxResults(10)
    .CreateCriteria("ID.Product")
        .SetProjection(Projections.ProjectionList()
            .Add(Projections.GroupProperty("ID.Product"))
            .Add(Projections.Sum("SaleItem.Quantity"), "QuantitySum")
        )
        .AddOrder(Order.Desc("QuantitySum"));

List<Product> l = criteria
    .List<Product>() as List<Product>; 
```

它生成了以下 SQL（与我的非常相似）：

```
SELECT this_.product_id AS y0_,
       sum(this_.quantity) AS y1_
FROM sale_item this_
INNER JOIN product product1_ ON this_.product_id=product1_.id
GROUP BY this_.product_id
ORDER BY y1_ DESC LIMIT 10; 
```

不幸的是，它在执行查询时失败了。我很确定这与我做`.CreateCriteria<SaleItem>`然后问`.List<Product>`有关，但我不知道该怎么做。

任何帮助都深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T08:35:36.567

您可以使用`Transformers.AliasToBean<Product>()`结果转换器：

```
ICriteria criteria = NHibernateSession
    .CreateCriteria<SaleItem>("SaleItem")
    .SetMaxResults(10)
    .CreateCriteria("ID.Product")
        .SetProjection(Projections.ProjectionList()
            .Add(Projections.GroupProperty("ID.Product"), "ID")
            .Add(..., "...") // another Product property
            .Add(Projections.Sum("SaleItem.Quantity"), "QuantitySum")
        )
        .AddOrder(Order.Desc("QuantitySum"));

List<Product> l = criteria
    .SetResultTransformer(Transformers.AliasToBean<Product>());
    .List<Product>() as List<Product>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:39:34.577

您正在投影数据，因此您没有从数据库中获取 Product（或 SaleItem）。您需要使用非泛型 List() 来获取对象列表。这些对象将是对象数组，其元素对应于投影值。

要一次性获取整个产品，您必须将该查询粘贴到子查询中，其中外部查询返回由子查询标识的产品的完整产品数据。

# pipe - 一个简单的接口程序的文件/管道编写

> ID：12946621
> 
> 赞同：0
> 
> 时间：2012-10-18T03:27:30.413
> 
> 标签：pipe, gnuplot

我最近创建了一个简单的程序，它遍历数值计算，将结果写入 3 个文件，然后将这些文件传递给 Gnuplot。作为一个命令行工具，一切似乎都可以工作，但我已经将所有相同的代码移到了一个在 Xcode 上具有简单界面的程序中，并且我没有得到任何图形输出。我在调试器中逐步执行了程序，一切似乎都在工作（到 gnuplot 的管道、文件、所有对象似乎都已创建，并且一切都按预期的顺序发生），但没有可见的输出。下面的代码应该仍然有效吗？

```
FILE *SomeFile=fopen("SomeFile.txt", "w");
fprintf(SomeFile, "%g\t", SomeNumber);
FILE *pipe=popen("gnuplot", "w");

fprintf(pipe, "plot \"%s\"\n", [filename UTF8String]) 
```

其中 NSString 文件名中的文件名是 SomeFile.txt 。

这在命令行程序中运行良好，知道我现在哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:13:01.710

确保在告诉 gnuplot 读取数据文件之前刷新数据文件，否则，gnuplot 可能会看到一个空的数据文件：

```
fprintf(SomeFile, "%g\t", SomeNumber);
fflush(SomeFile); 
```

# css - 在另一个固定表下方居中 DIV 表

> ID：12946625
> 
> 赞同：0
> 
> 时间：2012-10-18T03:27:54.333
> 
> 标签：css, html

所以我用这个 CSS 设置了一个 div 表，如下所示，使其居中并固定在页面顶部。我可以设置另一个 div 并将其居中，但我无法让 DIV 低于顶部。有什么建议吗？

这是顶部 DIV 的 css：

```
.fixedtop
{
    position: fixed;
    top: 0px;
    left: 50%;
    margin: 0 0 0 -400px;
    background-image: url(bannerlogo.jpg);
    width:800px;
    height: 414;
} 
```

这是我测试过的最新 css：

```
.fixedcenter
{
        position:center;
    margin-top: 414px;
    width:800px;
    height: 414px;
} 
```

我还尝试使用填充和弄乱边距来居中。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:46:43.063

如果使用“位置”，正确的值是：静态、相对和绝对。如果您的 div 的高度不会变化，那么您可以使用 position:absolute 并使用“top”指定位置

示例：您可以对第二个元素执行以下操作：

`.fixedcenter2 { `position:absolute;` `margin-top: 414px;` `width:800px;` height: 414px; `top: 424px //It will be positioned 20px below the first.`
}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:08:52.317

尝试这个：

```
.fixedtop
{
    margin-left: auto;  
    margin-right: auto; 
    border: 1px solid black; /* I only added the borders so that I could*/
                             /* see what was happening more easily.*/
    background-image: url(bannerlogo.jpg); 
    width: 800px; 
    height: 414px;
}

.fixedcenter
{
    border: 1px solid black; 
    margin-left: auto; 
    margin-right: auto; 
    width: 800px; 
    height: 414px;
} 
```

它看起来像这样：

![2 格](../Images/a968c765c5e2f1c9bd22b9b26ec34f60.png)

# javascript - 在 Modernizer / yepnope.js 中使用 Drupal.settings.basePath 加载

> ID：12946626
> 
> 赞同：5
> 
> 时间：2012-10-18T03:27:54.793
> 
> 标签：javascript, drupal-7, modernizr, yepnope

我目前正在 Acquia 上开发 drupal 站点。使用 git 并在本地工作对我来说是一个新的工作流程。在本地构建并尝试使用 Modernizr load / yepnope 时，我的 script.js 文件中的 JS 通常如下所示。

```
Modernizr.load([
    {
    test: Modernizr.mq('only all'),
    nope: '/sitename/docroot/sites/all/themes/theme/js/libs/polyfill.js'
    },
    .... 
```

所以这在我的机器上本地工作，但是当我提交我的更改并推送到我的 acquia 开发服务器时，加载脚本的文件路径不正确，因为我猜它不是相同的设置。

[http://mysite.devcloud.acquia-sites.com/mysite/docroot/sites/all/themes/theme/js/libs/polyfill.js](http://mysite.devcloud.acquia-sites.com/mysite/docroot/sites/all/themes/theme/js/libs/polyfill.js)

它必须是下面的，URL 中没有 mysite/docroot。

[http://mysite.devcloud.acquia-sites.com/sites/all/themes/theme/js/libs/polyfill.js](http://mysite.devcloud.acquia-sites.com/sites/all/themes/theme/js/libs/polyfill.js)

这让我想到了 Drupal.settings.basePath。如果我把它打印出来，它会在我的本地设置上给我 /mysite/docroot/ 。如果我在开发服务器上执行此操作，它会打印出不同的内容（可能只是 / ）。

所以我作为业余爱好者假设我可以做这样的事情..（原谅可怜的样本，我知道它可以做得更好）

```
var myroot = Drupal.settings.basePath

Modernizr.load([
{
test: Modernizr.mq('only all'),
nope: myroot + 'sites/all/themes/theme/js/libs/polyfill.js'
},
.... 
```

这当然行不通。只是返回 query1 没有定义。

所以我确信在我的许多尝试中都存在错误，所以如果有人可以向我提出一些建议，无论是与工作流相关的还是如何修复我的设置/代码，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T12:55:03.850

有点晚了，但无论如何它可能会有所帮助：

尝试类似：

```
var jsFolderPath = window.location.protocol + "//" + window.location.host+ Drupal.settings.basePath + 'sites/all/themes/theme/js/libs/';

nope: jsFolderPath + 'polyfill.js' 
```

然后，您可以轻松地为每个 yesnope 添加 polyfill，无论是在开发服务器中还是在 locahost 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T05:35:59.297

也许我在使用 Acquia 时只是有不同的本地设置，但为什么不只使用 /sites/all/themes/theme/js/libs/polyfill.js 之类的相对路径呢？

# objective-c - 如何将 tableviewCell 填充到另一个视图控制器？

> ID：12946636
> 
> 赞同：0
> 
> 时间：2012-10-18T03:29:20.987
> 
> 标签：objective-c, ios, ios5, uitableview

我正在开发蓝牙 LE 应用程序。在我的`ViewController`中，如果我按下操作按钮，我有一个操作按钮（搜索），可用的 BLE 设备名称列表显示在工作正常的表格视图中。现在我想访问`TableViewCell`（如果我单击一个设备名称，则支持服务正在填充另一个`ViewController`）以获取蓝牙低功耗设备支持的服务。我的问题是如何访问`TableViewCell`（填充）中的设备名称以及如何从 BLE 获取支持的服务（例如警报、TxPwr、电池）。如果我单击一个单元格（设备名称），那么我想知道列表支持的服务。给我一个想法。设备是我的可变数组。我的问题是如何填充`TableViewCell`到我的另一个`ViewController`...

```
 -(void)viewDidLoad 
  { 
     [super viewDidLoad]; 
     peripheralManager=[[PeripheralManager alloc]init]; 
     self.label.text = @"" 
     [self.deviceTable reloadData]; 
     device=[[NSMutableArray alloc]init];     
  } 
```

**表视图**

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{ 
    return 1; 
} 

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{ 
    return [device count]; 
} 

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{ 
   static NSString *CellIdentifier=@"Cell"; 
   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
   if(cell==nil) 
   { 
      cell =[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]; 
   } 

   cell.textLabel.text=[device objectAtIndex:indexPath.row]; 
   cell.accessoryType=UITableViewCellAccessoryDetailDisclosureButton; 
   return cell; 
} 

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

[self performSegueWithIdentifier:@"TableDetails" sender:[device objectAtIndex:indexPath.row]];
//NSString *deviceName = [device objectAtIndex:indexPath.row];
//secondViewController *svController=[[secondViewController alloc] initWithNibName:@"SecondView" bundle:[NSBundle mainBundle]];
    //svController.deviceName=deviceName;
    //[self.navigationController pushViewController:svController animated:YES];
    // svController=nil;
  }
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
       {
if ([segue.identifier isEqualToString:@"TableDetails"]) {
    [segue.destinationViewController setDeviceName:(NSString *)sender];
       }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:40:08.427

我想您从选定的（用户点击的）表格视图单元中需要/想要的只是设备名称来自名为“设备”的可变数组

如果'填充'意味着让新加载的视图控制器，'TableDetails'的目标视图控制器知道设备名称，

*   将设备名称传递给发送者：performSegueWithIdentifier 的参数：发送者：
*   设备名称可以来自 cell.textLabel.text 或 [device objectAtIndex:indexPath.row]，因为您已经使用不同的方法完成了
*   假设新加载的视图控制器的名称有一个类名**DeviceDetailViewController**，例如
*   添加@property (nonatomic, strong) NSString *deviceName; 到**DeviceDetailViewController**

*   覆盖 -prepareForSegue:sender: 执行 segue 的视图控制器的方法，并将设备名称作为 sender 参数传递给 segue 的目标视图控制器，方式如下：

*   如果您在 Storyboard 设计中正确配置了destinationViewController @property，则拥有Storyboard 新加载的DeviceDetailViewController 实例，例如为segue 目标视图控制器提供新的类名

*   setDeviceName: 方法通过@property (...) deviceName 的声明神奇地可用；如果您使用的是最新版本的 Xcode，请声明

**DeviceDetailViewController**

```
@interface DeviceDetailViewController : UITableViewController
@property (nonatomic, strong) NSString *deviceName;
@end 
```

**表视图**

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{    
    if ([segue.identifier isEqualToString:@"TableDetails"]) {
        [segue.destinationViewController setDeviceName:(NSString *)sender];
    }
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{   
    // UITableViewCell *cell=[tableView cellForRowAtIndexPath:indexPath]; 
    [self performSegueWithIdentifier:@"TableDetails" sender:[device objectAtIndex:indexPath.row]]; 
} 
```

现在，您可以在类实现中使用 DeviceDetailViewController 的 deviceName @property 做任何您想做的事情。

# c# - c# Netezza 数据类型的正则表达式

> ID：12946638
> 
> 赞同：0
> 
> 时间：2012-10-18T03:29:41.240
> 
> 标签：c#, .net, sql, regex, netezza

我有点忙于为工作中的一个大型项目迁移 SQL 模式，并且从未在 C# 中使用过正则表达式。所以我正在寻找一个快速转身的希望。如何在 C# 中编写正则表达式，以便在字符串变量中找到这些值。如果拼出数字更容易/更快，那也没关系。我只是想确保它适用于括号内的所有数字。

```
CHARACTER VARYING(8000) ==> regex returns false because the length is <= 8000

CHARACTER VARYING(8001) ==> regex returns true because the length is > 8000 
```

所以我的字符串是，`"CHARACTER VARYING({0})"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:36:03.530

```
public static string ReplaceLength(string s, int maxLength)
{
    return Regex.Replace(s, @"CHARACTER VARYING\((?<length>\d+)\)",
            match => "varchar(" + (
                                   int.Parse(match.Groups["length"].Value) <= maxLength ? 
                                        match.Groups["length"].Value : 
                                        "MAX"
                                  ) + 
                            ")");
} 
```

**测试用例**

```
ReplaceLength("CHARACTER VARYING(8001)", 8000); // varchar(MAX)
ReplaceLength("CHARACTER VARYING(8000)", 8000); // varchar(8000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:35:56.937

您可以使用以下正则表达式获取数字。

`CHARACTER VARYING\((\d+)\)`并将其分组。您可以在 C# 中将其转换为 int 并进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T14:21:35.210

只是想补充一点，有一种更简单的方法可以从 netezza 获取此信息。

```
select attname, datatype, attcolleng, name,  attlen, size, datatype, format_type, atttypid
from _V_RELATION_COLUMN col_t
    cross join _v_datatype dat_t
Where dat_t.objid = col_t.atttypid 
    and name='<table_name>'
    and size ='var' 
```

在结果集中，您应该引用 attcolleng 列，它设置了您要查找的长度。

# php - 准备好的语句mysqli不返回行

> ID：12946639
> 
> 赞同：4
> 
> 时间：2012-10-18T03:29:53.457
> 
> 标签：php, sql, mysqli, prepared-statement

我有一些带有准备好的语句的 php 代码。它是通过 javascript 中的 Ajax 调用的。我确定在 accounts 表中有一个名为 mark （无大写）的帐户，但是当我将 $_POST['query'] 设置为 m 时，它会发现 $stmt->num_rows===0 为真。看不到任何错误，它只是不起作用！如您所知，它将内容回显到表格中。我在 phpMyAdmin 中尝试了这个查询： SELECT username FROM accounts WHERE username LIKE '%m%' 并且效果很好。我创建了这段代码来搜索 mysql 数据库中的用户名。如果您想知道，$conn 是包含文件中定义的有效 mysqli 对象。

```
<?php
require_once('./include.php');
$stmt=$conn->stmt_init();
$stmt->prepare('SELECT username FROM accounts WHERE username LIKE ?');
$compquery='%'.$_POST['query'].'%';
$stmt->bind_param('s',$compquery);
$stmt->execute();
echo '<tr><td>';
if($stmt->num_rows!==0){
    $stmt->bind_result($name);
    while($stmt->fetch()){
        echo "$name</td></tr><tr><td>";
    }
   echo '</td></tr>';
}
else
    echo 'No Results Found</td></tr>'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T03:48:02.717

从评论扩展：

您必须先使用[`mysql_stmt::store_result()`](http://www.php.net/manual/en/mysqli-stmt.store-result.php)才能使用`mysqli_stmt::num_rows`：

```
$stmt=$conn->stmt_init();
$stmt->prepare('SELECT username FROM accounts WHERE username LIKE ?');
$compquery='%'.$_POST['query'].'%';
$stmt->bind_param('s',$compquery);
$stmt->execute();
$stmt->store_result(); 
```

# java - 时间和内存消耗java类和c++文件

> ID：12946641
> 
> 赞同：-1
> 
> 时间：2012-10-18T03:30:13.910
> 
> 标签：java, shell

你好我正在做一个关于编程算法测量的项目

我如何知道从开始到结束的执行时间以及一个类的 RAM 消耗在 java 中创建了一个算法，在 c++ 中创建了一个文件。

我需要从 linux shell 执行，因为我的想法是将这些结果存储在 Ruby on Rails 的变量中以供 Web 查看。所以我不能使用任何外部程序，除非这给了我在 linux 终端中的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:34:00.593

为什么不试试`cat /proc/1234/smaps`？

这里：1234 是应用程序的 PID。JVM 还可以访问用于获取 JVM 可用的可用内存量以及使用的内存量的方法。 [Runtime.getRuntime().totalMemory() 和 Runtime.getRuntime().freeMemory()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#getRuntime()) 要测量执行时间（精度不高），请使用“时间”函数。

对于 C++：

```
 time_t start_time = time(NULL); 
/*your algorithm*/ 
time_t end_time = time(NULL); 
cerr <<"Execution Time: "<< (end_time - start_time); 
```

对于 Java：

```
long startTime = System.nanoTime();
/*Your algorithm*/
long endTime = System.nanoTime();

long duration = endTime - startTime; 
```

# c++ - 使用 CDialogEx 类时不会出现的问题

> ID：12946642
> 
> 赞同：2
> 
> 时间：2012-10-18T03:30:17.480
> 
> 标签：c++, class, visual-c++, cdialog

1.- 你好。在这周搜索了很多网站和论坛之后，我发现了我遇到的问题的重点。问题是，当我在 Visual C++ 中创建一个新的 MFC 项目时，如果我将应用程序类型设置为“基于对话框”并让相应的对话框类从其默认 CDialogEx 派生，那么问题显示立即编译和执行程序而无需修改任何代码（我不知道你是否可以在你的机器上试试这个）。

2.-有线行为是在对话框窗口处于活动状态时，如果我单击任务栏中的空闲空间（甚至在另一个未最大化的窗口中），则对话框窗口的边框（包括标题栏）基于 -based 的应用程序保持“聚焦”（非灰色），即单击任务栏或另一个未完全覆盖我的应用程序窗口的窗口，那么我的应用程序窗口应该有点失去焦点。

3.-我在大量代码之后意识到这一点，因为我使用 CFileDialog 类发现了这种行为，因为当我创建（DoModal）一个 CFileDialog 实例时，当文件对话框打开时我的应用程序窗口失去焦点（变得“变灰”） （应该如此）但是当文件对话框完成时，我的窗口的边框保持灰色（这是不正确的），并且它一直保持这种状态，直到我最小化并恢复我的窗口，或者我切换到另一个窗口并返回到我的窗口.

4.-我发现问题出在从 CDialogEx 类继承，因为我从头开始创建了一个 New 项目（如第 1 段所述），看看是不是我修改了一些使我的程序行为错误的东西，以及事实证明，新项目的行为与我在第 2 段中描述的一样。

5.-好消息是我尝试创建一个新项目，但这次继承自 CDialog 而不是 CDialogEx。令我惊讶的是，这个新程序的行为是正确的，我的意思是，第 2 段中描述的有线行为在这个新项目中不存在。正如我在第 3 段中所描述的，我的另一个问题是文件对话框（CFileDialog 类），幸运的是我的项目代码更改为从 CDialog 继承，而不是 CDialogEx，也解决了这个问题。我的意思是，问题出在 CDialogEx 类上。

6.-我决定写这个问题并提供我发现的信息，因为当我搜索时，我看到不同论坛中的很多人都有同样的问题而没有得到解决方案。我想提一下，我尝试了论坛中提供的所有建议，至于它们，对我没有任何帮助。

7.-正如我所说，一种解决方案是将继承从 CDialogEx 更改为 CDialog。但是我的问题是，如果您知道我应该做些什么来使我的程序在 CDialogEx 类下正常运行，因为我更喜欢使用新接口而不是旧接口。我也想知道你是否在你的视觉工作室中尝试过和我一样的问题。

我希望我的信息和您的回答对其他人有用。非常感谢您的回答。

# xcode - 安装了 iOS 5.1 模拟器，但它没有出现在方案列表中

> ID：12946644
> 
> 赞同：2
> 
> 时间：2012-10-18T03:30:41.247
> 
> 标签：xcode, simulator

我有 XCode 4.4.1，它默认包含 iOS 6.0 模拟器。但是最初，我想为 iOS 5.1 构建一些应用程序。我去了 XCode->Preferences->Downloads 并安装了 iOS 5.1 模拟器。但在我的项目（包括我从那时起创建的项目）中，可用方案列表仅包含“iOS 设备”、“iPad 6.0 模拟器”和“iPhone 6.0 模拟器”。如何让我下载的 iPhone 5.1 模拟器显示出来？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T03:35:12.437

将构建设置中的“iOS 部署目标”设置为 5.1 或 5.0。

# ruby-on-rails - yml 固定装置回形针

> ID：12946646
> 
> 赞同：0
> 
> 时间：2012-10-18T03:30:58.293
> 
> 标签：ruby-on-rails

在 yml 文件中为测试指定 Paperclip 字段的最佳方法是什么？[Fixtures with Paperclip](https://stackoverflow.com/questions/9728391/fixtures-with-paperclip)中概述了其中一种可能的解决方案，但我不确定如何使其工作。

这是我所拥有的：

模型.yml

```
one:
  id: 2
  image: image.jpg

two:
  id: 2
  image: image.jpg 
```

模型

```
class Doodle < ActiveRecord::Base

  attr_accessible :image
  has_attached_file :image,
                :styles => {:thumb => "100x100>"},
                :storage => :s3,
                :s3_credentials => S3_CREDENTIALS 
```

干杯，安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:03:28.020

将 Yaml 文件放在`config`目录中，并在您的模型中使用它，如下所示：

```
class Doodle < ActiveRecord::Base

  s3_config_file = File.expand_path(File.join(File.dirname(__FILE__), 
                                          *%w[.. .. config cloud.yml]))

  attr_accessible :image
  has_attached_file :image,
            :styles => {:thumb => "100x100>"},
            :storage => :s3,
            :s3_credentials => s3_config_file 
```

# jquery - jQuery 仅在页面刷新时有效

> ID：12946647
> 
> 赞同：0
> 
> 时间：2012-10-18T03:31:01.003
> 
> 标签：jquery

当我放置连接到此 jQuery 代码（如下）的网页时，除非我先刷新页面，否则图像滑块不起作用，然后当我单击图像滑块上的箭头时，它会遍历图像。有没有人知道我需要在此代码中更改哪些内容才能使其正常工作？谢谢！！

```
$(window).load(function(){

// We are listening to the window.load event, so we can be sure
// that the images in the slideshow are loaded properly

// Testing whether the current browser supports the canvas element:
var supportCanvas = 'getContext' in document.createElement('canvas');

// The canvas manipulations of the images are CPU intensive,
// this is why we are using setTimeout to make them asynchronous
// and improve the responsiveness of the page.

var slides = $('#slideshow li'),
    current = 0,
    slideshow = {width:0,height:0};

setTimeout(function(){

    window.console && window.console.time && console.time('Generated In');

    if(supportCanvas){
        $('#slideshow img').each(function(){

            if(!slideshow.width){
                // Taking the dimensions of the first image:
                slideshow.width = this.width;
                slideshow.height = this.height;
            }

            // Rendering the modified versions of the images:
            createCanvasOverlay(this);
        });
    }

    window.console && window.console.timeEnd && console.timeEnd('Generated In');

    $('#slideshow .arrow').click(function(){
        var li          = slides.eq(current),
            canvas      = li.find('canvas'),
            nextIndex   = 0;

        // Depending on whether this is the next or previous
        // arrow, calculate the index of the next slide accordingly.

        if($(this).hasClass('next')){
            nextIndex = current >= slides.length-1 ? 0 : current+1;
        }
        else {
            nextIndex = current <= 0 ? slides.length-1 : current-1;
        }

        var next = slides.eq(nextIndex);

        if(supportCanvas){

            // This browser supports canvas, fade it into view:

            canvas.fadeIn(function(){

                // Show the next slide below the current one:
                next.show();
                current = nextIndex;

                // Fade the current slide out of view:
                li.fadeOut(function(){
                    li.removeClass('slideActive');
                    canvas.hide();
                    next.addClass('slideActive');
                });
            });
        }
        else {

            // This browser does not support canvas.
            // Use the plain version of the slideshow.
            current=nextIndex;
            next.addClass('slideActive').show();
            li.removeClass('slideActive').hide();
        }
    });

},100);

// This function takes an image and renders
// a version of it similar to the Overlay blending
// mode in Photoshop. 
// **NOTE: REMOVED COLOR CHANGES

function createCanvasOverlay(image){

    var canvas          = document.createElement('canvas'),
        canvasContext   = canvas.getContext("2d");

    // Make it the same size as the image
    canvas.width = slideshow.width;
    canvas.height = slideshow.height;

    // Drawing the default version of the image on the canvas:
    canvasContext.drawImage(image,0,0);

    // Taking the image data and storing it in the imageData array:
    var imageData   = canvasContext.getImageData(0,0,canvas.width,canvas.height),
        data        = imageData.data;

    // Putting the modified imageData back to the canvas.
    canvasContext.putImageData(imageData,0,0);

    // Inserting the canvas in the DOM, before the image:
    image.parentNode.insertBefore(canvas,image);
}

//end of window load    
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:11:21.707

我过去的成绩很差`$(window).load()`。我的经验是，加载事件通常根本不会触发，例如，如果浏览器认为页面已缓存。这可以解释为什么硬刷新似乎可以解决您的问题。

我的建议是不要依赖它，`$(document).ready()`而是使用它。

# winforms - VB .net 类库

> ID：12946650
> 
> 赞同：0
> 
> 时间：2012-10-18T03:31:34.763
> 
> 标签：winforms

我对类库应用程序类型有疑问，所以我需要这方面的帮助。

我得到了一个可以添加插件的软件。我想使用 Visual Studio 2010 在 VB.NET 中制作这个插件。该软件只接受类库应用程序类型，我需要显示一个带有组合框的表单，以便用户在列表中获取一个值。

在软件调用插件时首先启动的主类中。我在代码下面启动了一个Windows Form，对象的名字是objListValidation。我的问题是，当我执行 Me.Show() 时，它会显示窗口，但它会到 CompareToList 函数的末尾并且不会停在那里。

启动 Win Form 的代码：

```
Public objListValidation As ListValidation

objListValidation = New ListValidation
objListValidation.CompareToList("SELECT <NOM_CHAMP> FROM <NOM_TABLE>") 
```

显示获胜表格的代码：

```
Public Sub CompareToList(ByVal qryStr As String, Optional ByVal isBloquant As Boolean = False)
    Dim alCompteGeneraux As New ArrayList
    Dim isExistsInList As Boolean = False

    Dim objConnectDB2 As New ConnectDB2
    Dim i As Integer = 0

    If Not isBloquant Then btnCancel.Visible = True : manageButtonsPosition() Else mstrIsBloquant = True
    al.Add("AAA")
    al.Add("VVVV")
    al.Add("BBBB")

    For i = 0 To al.Count - 1
        If al.Item(i).ToString = mstrObjInvoiceField.DisplayString Then isExistsInList = True
    Next

    If Not isExistsInList Then
        Me.Text = "Liste de choix pour le champ : " + mstrObjInvoiceField.Name
        lblTitle.Text = "Veuillez choisir dans la liste une valeur pour le champ : " + mstrObjInvoiceField.Name
        cbList.DataSource = al
        Me.Show()
    Else
        validation()
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:34:12.177

您可能想调用`Me.ShowDialog()`，直到用户关闭对话框才会返回。

# python - 尝试将函数导入单独的脚本文件

> ID：12946652
> 
> 赞同：0
> 
> 时间：2012-10-18T03:31:54.617
> 
> 标签：python

我将此函数保存在脚本文件中。另存为 SampCov.py

```
x= [1., 5.5, 7.8, 4.2, -2.7, -5.4, 8.9]  
y =[0.1, 1.5, 0.8, -4.2, 2.7, -9.4, -1.9] 
def mean(x): 
    return sum(x) / len(x) 

def cov(x, y): 
    x_mean = mean(x) 
    y_mean = mean(y) 
    data = [(x[i] - x_mean) * (y[i] - y_mean) 
            for i in range(len(x))] 
    return sum(data) / (len(data) - 1) 
```

我正在尝试将 SampCov.py 导入到单独的 python 脚本文件中。当我导入它们时，我得到了 x 和 y 向量。但是 cov(x,y) 和 mean(x) 给了我语法错误。这就是我到目前为止所拥有的。导入 Sampcov.py

```
import Sampcov.py as samp
samp.x
samp.y
samp.mean(x)
samp.cov(x,y) 
```

所以我试图将我的整个函数导入一个新的脚本文件，我没有检索整个函数。我对 sam.mean(x) 和 samp.cov(x,y) 做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:39:04.320

你想要 samp.x, samp.y 而不是 x, y

```
import Sampcov as samp
samp.x
samp.y
samp.mean(samp.x)
samp.cov(samp.x,samp.y) 
```

# jquery - 带有 PersistJS 的 jQuery treeTable

> ID：12946655
> 
> 赞同：0
> 
> 时间：2012-10-18T03:32:03.993
> 
> 标签：jquery, cookies, persist, treetable

我确信这是最基本的，但无论哪种方式......现在都需要询问，因为我无法让它工作。我已经很好地实现了 jQuery treeTable，现在已经到了需要在页面刷新时保持树状态打开的部分（实际上是在弹出到另一个页面后重新访问页面）。为此，treeTable 有一个用于 persist.js 的内置设置 - 但是，关于两者如何相互交谈的文档不足。我也认为我没有正确启动persist.js。

头部元素是；

```
<script src="jquery_1.4.2.js" type="text/javascript"></script>
<script src="persist-min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function()  {
  store = new Persist.Store('treeTablePers');
});
</script>

<script src="jquery.treeTable.js" type="text/javascript">    </script>
<link href="jquery.treeTable.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
$(document).ready(function()  {
$("#resourceTable").treeTable({
persist: true,
persistStoreName: "treeTablePers"
});
});
</script> 
```

树状态只需要在刷新时重新打开，打开相同的分支。我很确定我不需要更改 html，除了头脚本。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T15:14:04.837

迟到总比没有好：在[https://github.com/jughead/jquery-treetable-ajax-persist](https://github.com/jughead/jquery-treetable-ajax-persist)上有一个关于如何将 treetable 插件（3.0 版）与 PersistJS 一起使用的好例子。感兴趣的主要文件是[https://github.com/jughead/jquery-treetable-ajax-persist/blob/master/src/javascripts/jquery.treetable-ajax-persist.js](https://github.com/jughead/jquery-treetable-ajax-persist/blob/master/src/javascripts/jquery.treetable-ajax-persist.js)。

# python - 这个函数的大 O 是多少？

> ID：12946658
> 
> 赞同：1
> 
> 时间：2012-10-18T03:32:23.290
> 
> 标签：python, big-o

```
def fd(n):
    x,y,count1,count2 = n,1,0,0
    while (x > 1): (x,count1) = (x/5,1+count1)
    while (y < n): (y,count2) = (count1+y,1+count2)
    return count2 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T03:40:01.153

让我们来看看。第一个循环计算`n`可以除以 5 的次数，`count1`log(n) 也是如此（常数不计入 O() 计算）。然后第二个循环计算多少次`count1`(= log(n)) 可以加到 1 到`n`，所以它基本上循环 n / log(n) 次。

在我看来这是 O(log(n) + (n/log(n)))。

正如 JF Sebastian 指出的那样，n/log(n) 支配 log(n)，所以最终答案应该是 O(n/log(n))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:03:52.077

I want to point out that the answer to this question depends on an agreement about what we are talking about (is important the fact that double numbers are going to be manipulated? do you want a theoretical answer that could sound unsatisfactory or a practical answer?)

Please, let me rephrase this answer: [https://stackoverflow.com/a/2027842/512225](https://stackoverflow.com/a/2027842/512225) :

People play a bit fast and loose with big-O notation.

Algorithmic complexity, and hence big-O notation, should be stated in terms of the size in bits of the input, not in terms of the values of the input. Assuming binary input and arbitrarily-large numbers, and N the number of bits of input, N = log(n). The complexity is O(exp(N)/N) = O(exp(N)/N) since the second loop requires n/log(n) steps = exp(N)/N steps.

In practice it makes sense to talk about complexity as though N were the input itself, not the size of the input. In that case the complexity of your function is n/log(n).

Anyway we are disregarding the issues given by the fact that n is limited by the definition of double, so that strictly speaking it does not make sense to talk about the asymptotic behavior (with n -> infinity). And we disregard also the fact that if your input is a double them its size is constant and so the complexity of your algorithm is (strictly speaking) O(1) (huge_constant times 1) with huge_constant equal to worst case time (that constant probably depends on the largest number you can express with Python's doubles).

## Summarizing:

the formal answer is O(1) but O(exp(N)) is not that bad as answer, O(n/log(n)) is a good answer too (and probably what you really need).

# javascript - jquery UI添加/删除类持续时间不起作用

> ID：12946663
> 
> 赞同：0
> 
> 时间：2012-10-18T03:33:10.727
> 
> 标签：javascript, jquery, jquery-ui

我正在使用带有 addClass/removeClass 函数的 Jquery UI。它正在改变课程，但没有持续时间。这是我的代码：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>    
<script src="jquery-ui-1.8.24.custom.min.js" type="text/javascript"></script>
<!--This has the Effects Core and all four boxes checked in the UI Core-->
<style type="text/css">    
.menu {
    height: 35px;
    padding: 15px 20px 5px 20px;
    font-family: 'Open Sans Condensed', sans-serif;
    font-size: 1.3em;
    font-weight: bold;
    display: inline;
    float: right;
    background: none;
}
.menu-hover {
    height: 35px;
    padding: 15px 20px 5px 20px;
    font-family: 'Open Sans Condensed', sans-serif;
    font-size: 1.3em;
    font-weight: bold;
    display: inline;
    float: right;
    background: url(../img/header-bg2.png) repeat-x;
}
</style>
<script>
  $(document).ready(function() {
    $('.menu').hover(function() {
      $(this).addClass("menu-hover", 1000);
    }, function() {
      $(this).removeClass("menu-hover", 1000);
    });
  });
</script>

<a href="#"><div class="menu">Contact</div></a>
<a href="#"><div class="menu">Services</div></a>
<a href="#"><div class="menu">About</div></a>
<a href="index.html"><div class="menu">Home</div></a> 
```

我已经仔细检查以确保它确实在改变班级，而且确实如此。任何想法如何让持续时间工作？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:05:42.470

Jquery UI 将为背景颜色设置动画，但不是背景图像。

资料来源：反复试验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:49:31.287

对于延迟，您可以使用 jQuery 的[**`delay()`**](http://api.jquery.com/delay/)：

```
$('.menu').hover(function() {
  $(this).delay(1000).addClass("menu-hover");
}, function() {
  $(this).delay(1000).removeClass("menu-hover");
}); 
```

# iphone - 如何防止 iOS 上的格式字符串攻击和缓冲区溢出？

> ID：12946664
> 
> 赞同：3
> 
> 时间：2012-10-18T03:33:17.327
> 
> 标签：iphone, objective-c, ios, security, secure-coding

Apple 的[安全编码指南](https://developer.apple.com/library/mac/#documentation/security/conceptual/SecureCodingGuide/Articles/ValidatingInput.html)文档提供了以下方面的指导：

*   格式化字符串攻击
*   缓冲区溢出

不清楚（对我来说，无论如何）是如何在使用 NSString 时防止格式字符串攻击和缓冲区溢出。

我该如何防御此类攻击？我可以申请任何类别来防止这种情况吗？我可以使用“安全”的 NSString 等价物吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T03:53:23.773

`NSString`当您将数据放入（或）时，缓冲区溢出通常不是问题`NSMutableString`，因为当您创建 时`NSString`，您必须告诉它您提供了多少数据，并且它会自动分配足够的私有存储空间来保存您提供的内容它。只需坚持已发布的 API，不要尝试任何恶作剧，例如抛弃`const`由返回的指针`UTF8String`并通过指针写入。

请注意`NSMutableData`，与 不同`NSMutableString`的是，它提供了`mutableBytes`消息，该消息返回一个指向允许您写入的内存的指针。因此，如果您使用该 API，则必须小心缓冲区溢出。

对于格式字符串，您只需遵循该文档中的建议即可。例如，永远不要将来自不受信任来源的数据作为格式参数传递，甚至作为格式参数的一部分。通常，您的格式字符串应该是字符串文字，或者它们应该从`NSLocalizedString`.

没有“安全”版本的`NSString`.

# mysql - mysql全文索引

> ID：12946666
> 
> 赞同：0
> 
> 时间：2012-10-18T03:33:20.863
> 
> 标签：mysql, indexing, full-text-search

我需要`MySQL`全文搜索来索引类似**207/12.25/07/2012**的数据库，该数据库至少有 200 万行并且还在增长，因此正确的索引是绝对必要的。请帮忙。现在似乎省略了**斜杠**和**句号，并且仅对****2012**进行了索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:25:26.117

该`FULLTEXT`索引可用于在较大的文本块中搜索单词。看到您的数据不包含单词，普通索引不适合您吗？这将使搜索像`207/12%`fast这样的前缀。

使用普通索引搜索后缀 like`%25/07/2012`需要全表扫描。如果您正在搜索后缀，您可以创建一个包含反向数据的列，然后索引并搜索该列。

如果您正在搜索位于中间的东西，例如`%12.25%`，创建索引可能有意义`FULLTEXT`，您只需[添加`.`到“单词字符”列表](http://dev.mysql.com/doc/refman/5.5/en/fulltext-fine-tuning.html)（mysql.com）中，但显然这需要从源代码编译 MySQL。

# wordpress - 如何在这个 wordpress 简码中添加 rel="nofollow" 和 target="_blank"？

> ID：12946668
> 
> 赞同：0
> 
> 时间：2012-10-18T03:33:24.393
> 
> 标签：wordpress, wordpress-theming

我打算更改我网站的 wordpress 主题。该主题允许我使用主题中提供的简码选项在侧边栏和网站的其他位置添加社交图标。但我想在结果 URL 的开头添加 rel="nofollow" 和 target="_blank" 。

这是我在其中一个主题文件中找到的代码。

```
// [social_icon src="" title="Add a hover title!" link="#custom-link"]
function social_icon_sc($atts, $content = null) {
    extract(shortcode_atts(array(
        'src' => 'picons33.png',
        'title' => __('Get in touch'),
        'link' => '#'
    ), $atts));

    $output = "";

    $output .= "<a href='".$link."' class='social-icon' title='".$title."'>";
    $output .= "<img src='" . get_template_directory_uri() . "/images/social_icons/".$src."' alt='".$title."' />";
    $output .= "</a>";

    return $output;
}
add_shortcode('social_icon', 'social_icon_sc'); 
```

谁能告诉我如何在 URL 中添加 nofollow 和 target_blank ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:37:48.197

只需更改此行

```
$output .= "<a href='".$link."' class='social-icon' title='".$title."'>"; 
```

到

```
$output .= "<a rel='nofollow' href='".$link."' class='social-icon' title='".$title."' target='_blank'>"; 
```

# php - 西班牙语字符未正确保存在数据库中

> ID：12946670
> 
> 赞同：0
> 
> 时间：2012-10-18T03:33:36.297
> 
> 标签：php, mysql, database, character-encoding, simplepie

我正在浏览一些西班牙博客的提要并将它们保存在数据库中。例如，单词: `Diseño!`，我可以在获取提要的脚本中正确看到它，但是当它保存在数据库中时，它会保存为`DiseÃ±Ã³!`. 我的数据库设置为 utf8 。我想我已经关注了每一个看起来像这样但没有解决的问题。我已将我的 html 中的字符集从 utf8 更改为 iso-8859，但我仍然可以在 html 中正确看到它，但一旦它保存到数据库中就无法看到。有人有解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:55:37.800

你在用`SimplePie_Cache_MySQL`吗？它似乎有一个错误，它没有设置数据库连接的编码。这意味着即使数据已经在 utf8 中，连接也会将数据从 latin1（默认值）静默编码为 utf8。

要解决此问题，请添加`encoding=utf8`到中的连接参数`SimplePie_Cache_MySQL.php`。

您还有另一个问题：当您稍后读取数据库时，您没有将页面编码设置为 utf-8。这意味着正确编码的数据显示为已修改。

**更新**：仔细看，似乎`SimplePie_Cache_MySQL`还可以，问题肯定出在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:38:45.690

猜测一下，是“Diseño！”的来源页面。可能是用 iso-8859-1 或 windows-1252 编码的，并且它没有任何转换就存储在您的数据库中。

如果是这种情况，您需要使用类似[http://php.net/manual/en/function.mb-convert-encoding.php](http://php.net/manual/en/function.mb-convert-encoding.php)的方式将字符串从它所在的编码转换为 utf-8 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T06:12:47.303

您应该在建立与数据库的连接之前设置字符编码。

你可以使用这个：

```
mysql_set_charset( 'utf-8' ); 
```

您也可以[在 php.net 中检查这一点，](http://be.php.net/manual/en/function.mysql-set-charset.php)并按照推荐的链接获取 mysqli 或 pdo 等替代方案。

再见

# c# - C#：使用存储过程从数据库中读取图像

> ID：12946677
> 
> 赞同：4
> 
> 时间：2012-10-18T03:34:34.383
> 
> 标签：c#, sql, image, stored-procedures, parameter-passing

我一直在尝试使用存储过程读取图像文件。下面给出的是获取图像文件的存储过程。

```
CREATE PROCEDURE readImage 
    @sID int,
    @img image output
AS
BEGIN
    SET NOCOUNT ON;
    SET @img=(SELECT s_Image FROM Student WHERE s_ID=@sID);
END
GO 
```

下面给出的是获取从存储过程返回的值的代码。

```
 SqlConnection con = new SqlConnection();
    Connect conn = new Connect();
    con = conn.getConnected();
    con.Open();
    SqlCommand cmd = new SqlCommand("readImage", con);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Add("@sID", SqlDbType.Int).Value = 17;
    SqlParameter retValue = cmd.Parameters.Add("@img", SqlDbType.Image);
    retValue.Direction = ParameterDirection.ReturnValue;
    try
    {
        cmd.ExecuteNonQuery();
        MemoryStream ms = new MemoryStream((byte[])retValue.Value);
        pictureBox1.Image = Image.FromStream(ms);
        pictureBox1.SizeMode = PictureBoxSizeMode.StretchImage;
        pictureBox1.Refresh();
    }
    catch (InvalidOperationException ex)
    {
        MessageBox.Show(ex.Message);
    }

    finally
    {
        if (con.State == ConnectionState.Open)
            con.Close();
    } 
```

但是，当我尝试运行代码时，我得到`SqlException`：

> *过程或函数“readImage”需要参数“@img”，但未提供该参数。*

即使我已经通过了`@img`变量。请帮我！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:42:27.313

更改 `retValue.Direction = ParameterDirection.ReturnValue;`为
`retValue.Direction = ParameterDirection.Output;`

# objective-c - 有视图的手势

> ID：12946679
> 
> 赞同：0
> 
> 时间：2012-10-18T03:34:58.963
> 
> 标签：objective-c, uiview, gesture

请查看此链接以了解我的问题 [http://www.freeimagehosting.net/ahb4y](http://www.freeimagehosting.net/ahb4y)

我的问题是关于 xcode 中的手势和视图。我想在我的应用程序中制作一些视觉效果以通过不同的手势显示视图。

对于 Q1（左图），用户向下拖动视图，然后在黄色视图顶部显示一个写有“更新”的较小视图（类似于 facebook），“更新”是视图还是标签？

对于 Q2（右图），是否可以同时在一个视图内添加 4 个视图（尺寸较小，内容不同）？例如，我从左向右滑动然后显示我想要获得的效果的所有视图？（那些较小的视图是连接到其他 4 个视图控制器的 UIView 吗？）

我希望有人可以针对这种情况给我建议或关键字，然后我可以找到更多信息，谢谢:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:40:45.610

请单独发布不相关的问题。我将在这里回答第一个问题（Q1）。

可能至少涉及三个视图：一个用于旋转进度指示器的视图，一个用于文本“正在更新...”的视图，以及一个用于文本“上次更新：...”的视图。包含文本的视图可能是`UILabel`. 请记住，这`UILabel`是`UIView`.

也有可能所有三个视图都在一个容器视图中，该容器视图的存在只是为了保存这三个视图。

# c# - 如何刷新 ViewModel 以更新 View

> ID：12946680
> 
> 赞同：2
> 
> 时间：2012-10-18T03:34:59.400
> 
> 标签：c#, windows-phone-7, xaml, mvvm

我在我的 MainPage 中实现了一个刷新应用程序栏按钮，我想使用此按钮的单击事件来重新加载视图模型。但是，我不确定如何做到这一点。当我的视图首次加载时，视图模型在 xaml 中被调用，如下所示：

```
DataContext="{Binding InformationProvider, Source={StaticResource DeviceInformationViewModel}}" 
```

我的视图模型在哪里

```
public class DeviceInformationViewModel
{
    private static IInformationProvider informationProvider;

    /// <summary>
    /// Returns the device information to display.
    /// </summary>
    public IInformationProvider InformationProvider
    {
        get
        {
            if (informationProvider == null)
            {
                if (DesignerProperties.IsInDesignTool)
                {
                    informationProvider = new FakeInformation();
                }
                else
                {
                    informationProvider = new RealInformation();
                }
            }

            return informationProvider;
        }
    }
} 
```

`InformationProvider`本质上只是从模型中获取设备信息。这在加载应用程序时执行一次，尽管我也想在刷新按钮单击事件上执行此操作。我如何在我的 MainPage 后面的代码中完成此操作？另外，这是正确的方法吗？如果没有，我该如何完成这个解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:41:26.403

除非他们知道这样做，否则与您的视图模型的绑定不会更新。执行此操作的典型方法是在您的视图模型上实现，然后在您的视图模型上的属性发生更改时`INotifyPropertyChanged`调用。`NotifyPropertyChanged`在您的情况下，您可以简单地实现`INotifyPropertyChanged`然后`NotifyPropertyChanged`为刷新按钮中的每个属性调用该方法。

# sql - PhoneGap-随机选择数据库

> ID：12946681
> 
> 赞同：1
> 
> 时间：2012-10-18T03:35:08.730
> 
> 标签：sql, cordova

我试图用 COUNT 随机选择表中的行

```
tx.executeSql("SELECT COUNT(*) FROM TABLE" , [], querySuccess, errorCB); 
```

但我不知道如何找回它。（**results.rows.length**返回 1，我有 5 行。）我遵循了一些建议，但我想知道是否有更好的解决方案。

1.  数数
2.  然后 var numRand = Math.floor(Math.random()*(TOTALROW+1))
3.  查询特定行

***更新***

```
 function queryDB(tx) {
        tx.executeSql("SELECT COUNT(1) FROM WORD" , [], querySuccess, errorCB);
    }

function querySuccess(tx, results) {
   alert(results.rows.item(0));
} 
```

对于 results.rows(0).item(0)，它显示“Uncaught TypeError: Property 'rows' of object # is not a function”。对于 results.rows.item(0)，它显示警报“[object OBJECT]”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:36:46.553

如果您尝试从数据库中选择随机行，请尝试：

```
SELECT col1, col2
FROM YourTable
ORDER BY RANDOM()
LIMIT 1 
```

这将带回一个随机行。这将让您跳过初始调用来确定表的记录数，并自己选择一个随机值。

* * *

似乎某些版本的 sqlite 禁用了 Random，在这种情况下，我认为您可能希望找到表中的行数：

```
SELECT COUNT(1)
FROM Table 
```

然后你会想在你的代码中选择一个随机数，并查询该记录。

目前您的`results.rows.length returns 1`因为 SELECT COUNT(*) ... 将仅返回一行数据，列是表中的行数。

# java - Java Post 到 Python HTTP 服务器不工作

> ID：12946684
> 
> 赞同：0
> 
> 时间：2012-10-18T03:35:48.783
> 
> 标签：java, python, http, post, webserver

这是我的python服务器代码...

```
#Copyright Jon Berg , turtlemeat.com

import string,cgi,time
from os import curdir, sep
from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
#import pri

class MyHandler(BaseHTTPRequestHandler):

    # our servers current set ip address that clients should look for.
    server_address = "0.0.0.0"

    def do_GET(self):
        try:
            if self.path.endswith(".html"):
                f = open(curdir + sep + self.path)
                self.send_response(200)
                self.send_header('Content-type',    'text/html')
                self.end_headers()

                str = ""
                seq = ("<HTML>", MyHandler.server_address, "</HTML>")
                str = str.join( seq )
                print str
                self.wfile.write( str )
                return
            return

        except IOError:
            self.send_error(404,'File Not Found: %s' % self.path)

    def do_POST(self):
        global rootnode

        try:
            ctype, pdict = cgi.parse_header(self.headers.getheader('content-type'))
            if ctype == 'application/x-www-form-urlencoded':
                query=cgi.parse_multipart(self.rfile, pdict)
            self.send_response(301)

            self.end_headers()
            MyHandler.server_address = "".join( query.get('up_address') )
            print "new server address", MyHandler.server_address
            self.wfile.write("<HTML>POST OK.<BR><BR>")

        except :
            pass

def main():
    try:
        server = HTTPServer(('', 80), MyHandler)
        print 'started httpserver...'
        server.serve_forever()
    except KeyboardInterrupt:
        print '^C received, shutting down server'
        server.socket.close()

if __name__ == '__main__':
    main() 
```

这是我将值发布到“up_address”的Java代码......

```
static public void post( String address, String post_key, String post_value ){

        try {
            // Construct data
            String data = URLEncoder.encode(post_key, "UTF-8") + "=" + URLEncoder.encode(post_value, "UTF-8");

            // Send data
            URL url = new URL(address);
            HttpURLConnection httpCon = (HttpURLConnection) url.openConnection();
            httpCon.setDoOutput(true);
            httpCon.setRequestMethod("POST"); 
            httpCon.setRequestProperty("content-type", "application/x-www-form-urlencoded"); 
            httpCon.setRequestProperty("charset", "utf-8");
            httpCon.setRequestProperty("Content-Length", "" + Integer.toString(address.getBytes().length));
            httpCon.setUseCaches (false);

            OutputStreamWriter wr = new OutputStreamWriter(httpCon.getOutputStream());
            wr.write(data);
            wr.flush();

            // Get the response
            BufferedReader rd = new BufferedReader(new InputStreamReader(httpCon.getInputStream()));
            String line;
            while ((line = rd.readLine()) != null) {
                // Process line...
            }
            wr.close();
            rd.close();
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }

    } 
```

这一切似乎很简单，但我无法成功发布到服务器。我得到两个错误之一。

服务器要么永远不会收到请求（不会发生 python 打印输出），要么它会收到请求（打印）但不更改值（当它打印时它会打印 .

最初的 python 服务器教程附带了一个 html 页面，其中包含一个用于直接更新值的表单。此表单页面完美运行。但是我需要能够从 Java 发布。

我也使用了以下 apache 代码，但它也不起作用......

```
HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(address);
        try {
          List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
          nameValuePairs.add(new BasicNameValuePair( post_key, post_value));
          post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

          HttpResponse response = client.execute(post);
          BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
          String line = "";
          while ((line = rd.readLine()) != null) {
            System.out.println(line);
          }

        } catch (IOException e) {
          e.printStackTrace();
        } 
```

我不知道出了什么问题。如果有帮助，我的文字 POST 键/值是“up_address=10.0.1.2”。

这是所有的代码。你看有什么不对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:27:57.987

我无法辨别问题。我相信这是python服务器代码。

我决定将服务器重新实现为带有参数的 GET，而不是 Get 和 POST。我导入 urlparse 以获取附加到 url ( [source](https://stackoverflow.com/questions/5239547/fetching-http-get-variables-in-python) ) 的键。然后我只是寻找我期望的 w/e 键。

这是我的新服务器代码......（预期的参数是'up_address'：'10.0.1.2'）。

```
import string,cgi,time, urlparse
from os import curdir, sep
from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer
#import pri

class MyHandler(BaseHTTPRequestHandler):

    # our servers current set ip address that clients should look for.
    server_address = "0.0.0.0"

    def do_GET(self):
    qs = {}
    path = self.path
    if '?' in path:
        path, tmp = path.split('?', 1)
        qs = urlparse.parse_qs(tmp)
        MyHandler.server_address = qs['up_address']
        print 'new server address: ', MyHandler.server_address

def main():
    try:
        server = HTTPServer(('', 8080), MyHandler)
        print 'started httpserver...'
        server.serve_forever()
    except KeyboardInterrupt:
        print '^C received, shutting down server'
        server.socket.close()

if __name__ == '__main__':
    main() 
```

这似乎适合我的项目需求。

# sql - SQL 从第 n 行的 Dual 中选择数据

> ID：12946692
> 
> 赞同：1
> 
> 时间：2012-10-18T03:36:15.743
> 
> 标签：sql, oracle, select

我想知道我们是否可以从对偶中进行选择并将结果放在任何结果行中？我想要的结果将是：

```
 CID        EXT
------    ------
ALL       ALL
--        --
DATAA     DATAA
DATAB     DATAB
DATAC     DATAC 
```

我在做

```
SELECT 'ALL' AS "CID"
   , 'ALL' AS "EXT"
FROM DUAL
UNION
SELECT *
FROM
(
   SELECT DISTINCT COLUMN AS "CID"
      ,  COLUMN AS "EXT"
   FROM TABLEA
) 
```

但我的结果是

```
CID        EXT
------    ------
--        --
ALL       ALL
DATAA     DATAA
DATAB     DATAB
DATAC     DATAC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:46:58.423

将一个任意值放在列表顶部是相当容易的。

```
select 'ALL', 1
from dual
union
select your_column_name, 2
from tablea
order by 2, 1 
```

基本上，您正在即时提供排序顺序。

如果您想包含对我来说有点奇怪的“--”，请使用第三个选择和另一个联合。

```
select 'All', 1
from dual
union
select '--', 2
from dual
union
select your_column_name, 3
from tablea
order by 2, 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:46:43.670

```
SELECT 'ALL' AS "CID"
   , 'ALL' AS "EXT"
FROM DUAL
UNION ALL
SELECT *
FROM
(
   SELECT DISTINCT COLUMN AS "CID"
      ,  COLUMN AS "EXT"
   FROM TABLEA
)
ORDER BY CASE WHEN "CID" = 'ALL' THEN 1 ELSE 2 END
        ,"CID"
        ,"EXT"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:23:40.637

好的，我想我找到了答案。如果我使用杰弗里的答案，我会得到

```
ERROR: ORA-01785: ORDER BY item must be the number of a SELECT-list expression 
```

所以，我只是改为

```
SELECT 'ALL' AS "CID" , 'ALL' AS "EXT" FROM DUAL
UNION 
SELECT * FROM
( 
SELECT DISTINCT COLUMN AS "CID",  COLUMN AS "EXT"
 FROM TABLEA ORDER BY "CID", "EXT"
) 
```

然后我的结果起作用了。

# android - 音频流在 5 秒后停止

> ID：12946698
> 
> 赞同：4
> 
> 时间：2012-10-18T03:37:20.637
> 
> 标签：android, android-audiomanager

我在 onCreate() 方法中执行以下操作：

```
mSound = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
AudioManager mAudioManager = (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);
soundID = mSound.load(this, R.raw.sample, 1);
streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
setVolumeControlStream(AudioManager.STREAM_MUSIC); 
```

然后我希望通过按下按钮来播放声音文件......所以在我的 onClick() 方法中我有：

```
mSound.play(soundID, streamVolume, streamVolume, 1, 0, 1f); 
```

它工作得很好......但只有 5 秒钟然后它就切断了......有什么想法吗？谢谢。如果有帮助，我正在 DROID 3 上进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:15:16.257

SoundPool 是为短音频文件创建的，例如通知文件...要播放长音频文件，只需使用 - ...

```
 private MediaPlayer mp_file;  

          ...........
       mp_file = MediaPlayer.create(getApplicationContext(), R.raw.big); 
       mp_file.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:16:07.307

您是否验证过 R.raw.sample 实际上超过 5 秒？

如果是这样，多少？因为请注意，SoundPool 旨在用于短长度样本。如果您无法让 SoundPool 工作，请尝试使用[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)。它使用更简单，设计用于更长的样品。

# php - 如何设置安全 cookie 以指示用户已登录？

> ID：12946699
> 
> 赞同：1
> 
> 时间：2012-10-18T03:37:26.910
> 
> 标签：php, html

目前，在用户登录后，我只需使用以下 PHP 代码将用户的 ID 号存储在 cookie 中：

```
setcookie('userid', "$userid", time()+60*60*24*7*2, '/'); 
```

上面的代码设置了一个持续 2 周的 cookie，其中包含非私有的用户 ID 号（存储在变量 $userid 中）。它还允许用户保持登录状态 2 周。我知道这可能是设置 cookie 以指示用户已登录的最不安全的方法之一，因为人们可以简单地更改他或她的 cookie 参数并以他或她希望的任何用户身份登录。

因此，我如何设置一个 cookie 来完成我上面的 cookie 完成的所有事情，但又是安全的？

换句话说，对我来说，设置一个安全的 cookie 并至少允许我在用户会话期间识别用户的 ID 号的最佳方法是什么？我还希望 cookie 持续 2 周，这样用户就不必一直重新登录我的网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:39:52.503

改用[会话](http://php.net/manual/en/features.sessions.php)。它会将会话 ID 存储在 cookie 中，但所有实际数据都存储在服务器上，因此没有人可以弄乱它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:58:38.760

您还应该发送第二个 cookie，一个哈希值，对用户来说是唯一的。例如，在第二个 cookie 中存储用户 ID、用户名、密码和盐值的哈希值。

```
md5($userId.$userName.$passwordHash.$userSalt); 
```

由于您从第一个 cookie 中知道用户 ID，因此在数据库中找到该用户。第二个 cookie 应该用于验证用户 ID。如果哈希 cookie 值不完全匹配，您就知道您的服务器没有提供第二个 cookie，您应该拒绝隐式登录请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T03:46:23.723

将安全散列（仅服务器知道）与特定于用户的一些数据结合使用并创建散列。将其保存为值而不是 id。当您收到请求时，通过重新生成哈希来比较哈希。请注意，它仍然容易受到 XSS attach 或 CSRF 的攻击。因此，如果您担心，也请解决这些问题。Cookies 是存储数据的不好方式，上面将停止的是有人只是将 cookie 设置为随机用户 ID 并登录。

这是如果您想要自动登录并将其与会话 ID 分开。如果不按照其他答案的建议进行操作并使用会话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T03:49:50.243

登录成功后，所有用户数据都必须存储在会话中。当您调用时，`session_start()`将生成一个唯一 ID，并将其存储在浏览器 cookie 中。每次浏览器发出请求时，它都会将 cookie 中的值连同它一起发送。为了更强大的安全性，您可以`regenerate`在成功登录后获取会话 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T03:56:50.257

您也可以使用 mcrypt 来加密 cookie 中的一些数据，这是我在 cookie 中存储某些内容的首选方式。

如果您出于某种目的需要它，那么只需将其解密即可。

# unix - 对 UNIX Makefile $< 和 $? 感到困惑

> ID：12946705
> 
> 赞同：1
> 
> 时间：2012-10-18T03:38:14.580
> 
> 标签：unix, makefile, dependencies, target

所以我正在学习 makefile，但是 $< 和 $? 真的让我很困惑。说到这， $@ 也让我感到困惑。

如果有多个目标怎么办，那么 $@ 指的是什么，第一个呢？如果你想引用第二个目标怎么办，你是不是被搞砸了？

使用 $<，我的老师告诉我它指的是当前的先决条件。但是，他的幻灯片中有一个示例，如下所示：

```
.SUFFIXES: .c .o .cxx

.c.o:;$(CC) $(CFLAGS) -c $<

.cxx.o:; $(CXX) $(CXXFLAGS) -c $< 
```

这对我来说没有任何意义。如果没有依赖关系， $< 怎么能引用任何东西？在第 2 行和第 3 行中，没有任何依赖项。

至于美元？去，我听说这是更新的先决条件列表，这对我来说只是行话。

感谢大家的帮助，我在过去一个小时里尝试了谷歌，但它都是在同一个简洁的 UNIX 语音中，我有点难以理解。

**编辑：**我应该补充一下，我对第 2 行和第 3 行中的符号感到困惑。在每一行的开头，将每个后缀（分别为 .co 和 .cxx.o）挤在一起意味着什么空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:51:39.430

首先，意识到 make 不是在运行程序。make 文件是一组推理规则。

你告诉 make 如何将一件事变成另一件事，然后给它一个目标。然后它将您的推理规则组合在一起以找出步骤，并在此过程中检查文件上的时间戳以确保它不会重复不必要的工作。

SUFFIXES 告诉 make 应该在文件上识别哪些后缀。

列出两个后缀的规则： .co 表示将带有 .c 后缀的 SINGLE 文件转换为带有 .o 后缀的 SINGLE FILE 的规则。

```
cc -c x.c 
```

构建 xo 所以，

```
.c.o:
<TAB>cc -c $< 
```

说“获取 $< 中的任何源文件，并使用此命令将其转换为 .o 文件”

然后你可以制定这样的规则：

```
mycmd: x.o y.o z.o
<TAB>cc -o $@ $^ 
```

如果当前目录中有三个 c 文件（xc、yc 和 zc），make 将能够推断出当您要制作 mycmd 时，它需要 .o 文件，并且它知道可以从.c，所以它会的。

特殊变量定义在这里：[http ://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html](http://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html)

因此，当您键入（在命令行）时：

```
make mycmd 
```

make 浏览规则列表并看到： 哦，要做到这一点，我需要 xo、yo 和 zo 然后它进入磁盘。假设它找到了 xc、xo、yc 和 zc 现在它认为：

我有 xo ..但是 .o 文件是由 .c 文件制成的...我应该检查源是否已更改。它检查时间戳，如果 .c 文件比 .o 文件新，它会重建它。

对于 yc 和 zc，它知道可以使用 cc 将它们转换为 .o 文件。

假设 xo 比 xc 更新，make 将：

```
cc -c y.c
cc -c z.c
cc -o myprog x.o y.o z.o 
```

如果您再次运行 make，它会执行相同的步骤，但这次发现 myprog 比所有 .o 文件都新，而所有 .o 文件都比 .c 文件新……所以它什么也不做。

现在，假设您编辑 xc 并再次运行 make：它将再次检查整个序列，发现 xc 比 xo 新，因此它将重建它，然后它会注意到 mycmd 现在比 xo 旧，所以它会重新链接它。

因此，对于一组*非常*短的规则，您可以为您完成很多工作。

# python - 在 Django 中分叉后关闭 TCP 端口 80 和 443

> ID：12946708
> 
> 赞同：5
> 
> 时间：2012-10-18T03:38:53.860
> 
> 标签：python, django, linux, apache2

我正在尝试从在 apache2/WSGI Python 中运行的 Django 应用程序中 fork() 和 exec() 一个新的 python 脚本进程。新的 python 进程被守护，因此它与 apache2 没有任何关联，但我知道 HTTP 端口仍然打开。新进程杀死了 apache2，但结果是新的 python 进程现在保持端口 80 和 443 处于打开状态，我不想要这个。

如何从新的 python 进程中关闭端口 80 和 443？有没有办法访问套接字句柄描述符以便关闭它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:43:36.077

如果您使用`subprocess`模块执行脚本，构造函数的`close_fds`参数`Popen`可能会执行您想要的操作：

> 如果 close_fds 为 true，则在执行子进程之前，将关闭除 0、1 和 2 之外的所有文件描述符。

假设它们不是简单地关闭，前三个文件描述符传统上是`stdin`,`stdout`和`stderr`，因此 Django 应用程序中的侦听套接字将在子进程中关闭的套接字中。

# c++ - cin >> 输入字符串时循环循环

> ID：12946713
> 
> 赞同：3
> 
> 时间：2012-10-18T03:39:38.640
> 
> 标签：c++, for-loop, cin

对不起这个极端的菜鸟问题，

我正在使用具有 5 次迭代的 for 循环。每次循环时，我都会提示用户输入小数，我使用 cin >> aDouble。如果我输入任何数字，它都可以正常工作，但如果我输入一个字符串，它会循环五次，然后继续。

这是我的代码。

```
for(int i = 0; i <= ARRSIZE; i++)
{
    cout << "Please enter a decimal value: ";
    cin >> myDouble;

    if (!cin.fail() )
    {
        myVector.push_back(myDouble);
    }
} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T03:56:14.343

一旦流无法读取它设置的值`std::ios_base::failbit`，该位​​将保持设置状态，直到它被清除。当设置了错误位时，流不做任何事情。也就是说，如果`cin.fail()`你`true`也处理这个问题：你需要摆脱“字符串”：

```
if (std::cin.fail()) {
    std::cin.clear();
    std::cin.ignore();                                  // ignore one character or ....
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); // rest of line
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T03:46:15.203

您需要使用`cin.clear()`来清除错误状态。

# node.js - 循环内的猫鼬查询

> ID：12946714
> 
> 赞同：1
> 
> 时间：2012-10-18T03:39:39.873
> 
> 标签：node.js, mongodb, mongoose

我正在尝试用猫鼬开发一个简单的应用程序。给定一组用户名“group.contacts”，我想获取这些用户的相应 ID。但是，循环没有按预期工作：循环在 .find() 方法完成之前继续，所以我无法获得所有人的 ID。我怎么解决这个问题？

```
for(var v = 0; v < group.contacts.length; v++) {
    PersonModel.find({
        name: group.contacts[v]
    }, function (err, person) {
        if(!err && person) {
            console.log('Found ' + person._id + ' ' + v); 
        }

    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:21:40.307

尝试这个：

```
PersoModel
.where('name').in(group.contacts)
.exec(function(person){
   console.log('Found ' + person._id + ' ' + person.name); 
}); 
```

# locking - PostgreSQL 9.1 可以泄漏锁吗？（共享内存不足/增加 max_pred_locks_per_transaction）

> ID：12946715
> 
> 赞同：2
> 
> 时间：2012-10-18T03:39:42.910
> 
> 标签：locking, postgresql-9.1

我们最近升级到了 postgresql 9.1.6（从 8.3）。我们的测试服务器表明 max_pred_locks_per_transaction 应该至少设置为 900（这远远超出了建议的设置 64）。

我们现在正在生产中，我不得不多次增加这个参数，因为我们的日志将开始填充：

```
ERROR:  53200: out of shared memory
HINT:  You might need to increase max_pred_locks_per_transaction. 
```

客户端连接设置为 600（但池系统永远不会超过 100 个客户端）：

max_pred_locks_per_transaction：我们到了 3000。大约一天就用完了。去了9000，3天左右就用完了。

我现在将它设置为 30000，因为这个数字是每个允许的客户端连接分配的平均数，所以我现在有大约 5 GB 的共享内存专用于锁定空间！

我确实将 shared_buffers 设置得相当高（目前为 24GB），超过了 40% 的 RAM 数字。（我计划在下次重新启动时将其调低至 RAM 的 25% 左右）。

**编辑：这个调整结果是一个坏主意。我的数据库有很多繁重的查询，并且有一半的大 RAM 专用于 shared_buffers 可以防止它阻塞，因为它可以完全缓存更大的表。**

平均而言，我一次看到大约 5-10 个活动查询。我们的查询负载*远远*超过我们的更新负载。

有人愿意告诉我如何找出这里出了什么问题吗？有了这么小的更新集，我真的不明白为什么我们经常用完锁……这对我来说确实闻起来像泄漏。

有人知道如何检查锁的去向吗？（例如，关于这个问题，我如何阅读 pg_locks 的内容）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T18:33:32.020

这听起来很可能是由长时间运行的事务引起的。在所有重叠的读写事务完成之前，无法释放一个事务的谓词锁。这包括准备好的交易。

看看几分钟前开始（或准备）的任何交易`pg_stat_activity`。`pg_prepared_xacts`

我能想到的唯一其他可能的、非错误的解释是您的表具有数百或数千个分区。

如果这些解释都没有意义，我很想得到一个可重现的测试用例。有什么方法可以创建表，使用 generate_series() 用查询填充它们并以可预测的方式发生这种情况？有了这样的测试用例，我绝对可以找到原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T11:23:06.930

根据[http://www.progtown.com/topic1203868-error-out-of-shared-memory.html](http://www.progtown.com/topic1203868-error-out-of-shared-memory.html)`work_mem`减少配置参数可能是有意义的。

有关其他详细信息，另请参阅[https://dba.stackexchange.com/questions/27893/increasing-work-mem-and-shared-buffers-on-postgres-9-2-significantly-slows-down](https://dba.stackexchange.com/questions/27893/increasing-work-mem-and-shared-buffers-on-postgres-9-2-significantly-slows-down)。

# c# - 未处理 InvalidOperationException 不允许更改“ConnectionString”属性。在 C# 上

> ID：12946716
> 
> 赞同：0
> 
> 时间：2012-10-18T03:39:46.967
> 
> 标签：c#, winforms, ms-access, ado.net, oledbconnection

尽管语法正确并且遇到了 InvalidOperationExeption，但我遇到了这种错误。 ![截图示例](../Images/6c743169bece21f0b1faa334abb390d7.png)

![在我的 dbs.cs 课上](../Images/4a4a06c8ee0b2cb8676b6f23049f5630.png)

在类 dbs 上我的 konek 函数

```
public String konek()
{
            connectionString = "Provider=" + OleDBProvider + ";Data Source=" + OleDBDataSource + ";JET OLEDB:Database Password=" + OleDBPassword + ";Persist Security Info=" + PersistSecurityInfo + "";
            return connectionString;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:51:28.967

您必须**创建新的 OleDbConnection 对象**，而不是重用现有的对象。

```
OleDbConnection = new OleDbConnection(db.konek()); 
```

此外，长时间保持连接打开也不是一个好习惯。因此，请在操作完成后立即关闭连接。

我相信在您的情况下，如果您已经创建了`OleDbConnection`相同的对象，`ConnectionString`则无需一次又一次地重新分配相同的连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T03:55:19.833

您不允许修改连接字符串属性。试试下面的模板：

```
using (OleDbConnection connection = new OleDbConnection(db.konek()))
{
   try
   {
       connection.Open();
       ....
       ....
   }
   catch (Exception ex)
   {
       ....
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T03:56:35.707

也许可能是该`con`对象已经`Open`导致它是只读的。解决此问题的一种方法是为您的`Connection`对象创建另一个实例。

```
using (OleDbConnection con = new OleDbConnection())
{
    con.ConnectionString = db.konek();
} 
```

*尽可能缩小范围。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T03:56:35.910

正如例外所说，您的“骗局”已经打开了连接。

您可能希望重新使用现有连接或仅在连接未打开时替换：

```
if(con.State!=ConnectionState.Open)
{
con.ConnectionString = db.Konek();
} 
```

但是在连接字符串已经有值并且打开时修改它，表明您的代码逻辑存在一些缺陷。

# json - 是否应该将 PARSE 方言用于从根本上修改输入的任务？

> ID：12946721
> 
> 赞同：2
> 
> 时间：2012-10-18T03:40:40.683
> 
> 标签：json, parsing, rebol, dialect

为了纪念 Rebol 3 随时开放源代码[(?)](http://www.rebol.com/cgi-bin/blog.r?view=0516)，我又开始搞砸它了。作为一个练习，我正在尝试用 PARSE 方言编写我自己的 JSON 解析器。

由于 Douglas Crockford[将 Rebol 的影响归功于他对 JSON 的发现](http://news.ycombinator.com/item?id=780554)，我认为这很容易。除了用括号替换大括号并去掉所有这些逗号之外，仅`LOAD`在字符串上使用的障碍之一是，当他们想要做等效的 a`SET-WORD!`时，他们使用看起来像 Rebol 标记器的字符串的东西，后面有一个非法的冒号：

```
{
    "key one": {
         "summary": "This is the string content for key one's summary",
         "value": 7
    },
    "key two": {
         "summary": "Another actually string, not supposed to be a 'symbol'",
         "value": 100
    }
} 
```

基本上我想找到所有类似的情况`"foo bar":`并将它们转换为`foo-bar:`同时留下不单独冒号的匹配引号对。

当我在 PARSE 中解决这个问题时（我在原则上理解得很好，但仍然没有使用太多）出现了几个问题。但主要是，当您可以转入代码并从解析器下修改系列时的承诺条件是什么……特别是在 Rebol 3 中？更一般地说，它是*“适合工作的工具”*吗？

这是我尝试过的规则，似乎适用于这部分任务：

```
any [
    ; require a matched pair of quotes & capture series positions before
    ; and after the first quote, and before the last quote

    to {"} beforePos: skip startPos: to {"} endPos: skip

    ; optional colon next (if not there the rest of the next rule is skipped)

    opt [
        {:}

        ; if we got to this part of the optional match rule, there was a colon.
        ; we escape to code changing spaces to dashes in the range we captured

        (
            setWordString: copy/part startPos endPos
            replace/all setWordString space "-"
            change startPos setWordString
        )

        ; break back out into the parse dialect, and instead of changing the 
        ; series length out from under the parser we jump it back to the position
        ; before that first quote that we saw

        :beforePos

        ; Now do the removals through a match rule.  We know they are there and
        ; this will not cause this "colon-case" match rule to fail...because we
        ; saw those two quotes on the first time through!

        remove [{"}] to {"} remove [{"}]
    ]
] 
```

可以吗？`change startPos setWordString`开放代码中是否有可能破坏外部解析......如果不是在这种情况下，那么在一些微妙的不同？

与往常一样，任何说教*的“它更干净/更短/更好”的*建议都会受到赞赏。

**PS**为什么没有`replace/all/part`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T17:50:47.407

另一种方法是将 parse 视为带有 EBNF 的编译器 - 编译器。如果我正确回忆了 R2 语法：

```
copy token [rule] (append output token) 
```

假设语法正确，并且没有`{"}`字符串：

```
thru {"} skip copy key to {"} skip
; we know ":" must be there, no check
thru {"} copy content to {"} skip
(append output rejoin[ {"} your-magic-with key {":"} content {"} ]) 
```

更精确，而不是`to`, char by char：

```
any space  {"} copy key some [ string-char | "\" skip ] {"} 
any space ":" any space {"} copy content any [ string-char  | "\" skip ] {"} 
(append output rejoin[ {"} your-magic-with key {":"} content {"} ])
; content can be empty -> any, key not -> some 
```

`string-char`将是一个字符集，除了`{\}`and `{"}`，语法之外的任何内容？

不知道 R3 是否还能这样工作... :-/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T15:13:54.193

新的关键字 like `change`, `insert`and`remove`应该有助于这种类型的事情。我想这种方法的主要缺点是推动系列的延迟问题（我已经看到提到构建新字符串比操作更快）。

```
token: [
    and [{"} thru {"} any " " ":"]
    remove {"} copy key to {"} remove {"} remove any " "
    (key: replace/all key " " "-")
]

parse/all json [
    any [
        to {"} [
            and change token key
            ; next rule here, example:
            copy new-key thru ":" (probe new-key)
            | skip
        ]
    ]
] 
```

这有点令人费解，因为我似乎无法让 'change 像我期望的那样工作（表现得像`change`，不是`change/part`），但理论上你应该能够沿着这些线缩短它*并*有一个相当干净的规则。理想的可能是：

```
token: [
    {"} copy key to {"} skip any " " and ":"
    (key: replace/all key " " "-")
]

parse/all json [
    any [
        to {"} change token key
        | thru {"}
    ]
] 
```

编辑：另一个软糖`change`-

```
token: [
    and [{"} key: to {"} key.: skip any " " ":"]
    (key: replace/all copy/part key key. " " "-")
    remove to ":" insert key
]

parse/all json [
    any [to {"} [token | skip]]
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T02:59:31.013

既然其他人已经回答了这个`parse`问题，我将回答PS：

有一些提议的选项从未添加到 中`replace`，主要原因是处理选项有开销，而且这个函数已经需要一些有趣的优化来处理它已经拥有的选项。一旦我们稍微改进了它的 API，我们将尝试用原生函数替换该函数。这与函数的情况基本相似`reword`，直到最近我们才决定最终的 API。因为`replace`我们还没有讨论过。

在该`/part`选项的情况下，以前没有任何人建议过，并且与现有的内部长度计算统一在概念上可能有点尴尬。可能有一个有限的`/part`选项，只有整数而不是偏移量参考。`/part`如果长度优先于内部计算的长度，这可能是最好的。不过，如果我们最终使用经过调整的 API，则可能不需要`/part`选项。

# c++ - 我可以在没有 Mac 的情况下为 Mac 编程吗？

> ID：12946725
> 
> 赞同：5
> 
> 时间：2012-10-18T03:41:20.043
> 
> 标签：c++, windows, visual-studio-2010, macos, cross-compiling

我正在使用 C++ 和 OpenGL/SDL 编写游戏，使用 Visual Studio 作为我的 IDE。我没有 Mac，我什至对这个平台也不太熟悉。但我想向 Mac 用户发布同样的内容。

我有三个问题。我可以在 PC 上编写和编译 Mac 程序吗？如果可以，这样做是否有任何可能的陷阱？最后，VS2010 可以为 Mac 编译，还是我需要使用另一个编译器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T04:11:51.350

如果您使用的是 SDL，那么答案是“您可以接近您的愿望，直到最后一步”。能够在单个代码库中编写类似游戏的程序，然后将该代码库带到各种机器上并对其进行编译并使其工作，这*[正是 Simple DirectMedia 库的设计目的！](http://en.wikipedia.org/wiki/Simple_DirectMedia_Layer)* 如果它至少没有使它成为一个合理的目标，它就不会很受欢迎。

这并不意味着您可以按下按钮并从 Visual Studio 中获取 Macintosh 或 Linux 二进制包。但是你总是可以找到朋友并让他们在代码库上为你尝试编译。只要您小心地只调用标准 C++ 库中的函数并留在 SDL 提供给您的框内，它就应该编译得很好……*理论上*。

> **2018 年更新：** -*如果您想在 Mac 上编译但没有 Mac，Travis-CI 现在已经[虚拟化了 OS X](https://docs.travis-ci.com/user/reference/osx/)，因此您可以运行 clang 并将生成的二进制文件上传到某处。您可能不想在每次进行更改时都等待通过网络进行完整构建……但是一旦您在 OS X 上构建了跨平台代码库，持续集成可以确保您保持这种状态。*

在 C++ 中比在其他语言中更难确保您处于“可移植沙箱”中（尤其是如果您是初学者）。如果您遵循专门针对 Microsoft 工具的教程，则可能会更难，因为他们对于建议您在其文档中进行仅限 Windows 的调用几乎没有疑虑。因此，能够将“完全调试”的代码交给朋友，让它第一次在新平台上编译和工作的几率很低。

当然，你需要一个测试期。而且您可能不应该等到最后一刻才让其他人通过在 XCode 或其他任何东西中编译它来确保基础工作正常。您可以改用 GCC 编译器来降低编写不可移植代码的风险，如果您开始引入实际上不是跨平台的依赖项，则更有可能抱怨。

如果您喜欢生活在边缘，也可以运行[“Hackintosh”虚拟机。](http://en.wikipedia.org/wiki/OSx86)你当然可以制作一个 Linux VM 并尝试在其下构建，如果它有效，那将提高 Mac 构建也能工作的信心。虽然不会保证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T03:46:15.737

首先，您不能为 Mac 进行交叉编译。您将需要他们的“gcc”。Mac Universal 二进制文件可以（理论上）在 PC 上创建，但实际上还不可能。

VS2010 无法为 Mac 编译，但如果您打算使用不同的语言，那么您可以为 Mac 编写代码（例如在 Python 中）。

任何跨平台语言都会有所帮助。Python、Java、Ruby、Perl

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T03:44:44.017

一种选择是使用Java。如果将它与 eclipse RCP SWT 小部件结合使用，则可以将 Win/Linux/OSX 与本机 LAF 结合使用。您可能希望使用 eclipse 作为您的 IDE。

如果您真的*必须*使用 c++，您可以针对 wxWidgets 或其他一些跨平台小部件集，但编译确实需要所有 OSX 库的副本和知道如何定位平台/链接的编译器集。

如果您不想拥有任何类型的 Apple 硬件，我真的会推荐 Java 路线……更不用说痛苦了。此外，由于 JVM 支持的语言过多，您甚至不必用 Java 编写...试试 Scala！

# printf - 使用相同的 toString() 访问不同的子类变量

> ID：12946729
> 
> 赞同：0
> 
> 时间：2012-10-18T03:41:58.907
> 
> 标签：printf, tostring, subclass

我有兴趣了解当可能需要在其中引用不同的子类时，如何使用单个 printf 语句或 @Override toString() 方法来提供准确的信息。

这是设置的示例程序：

class Animal - String name - int age class Bird extends Animal - private int feathers - Animal animalObj //引用动物对象 vars class Monkey extends Animal - private int weight - Animal animalObj //引用动物对象 vars class Tree - int heightInFeet - Animal animalInTree //引用实例化的动物对象

类树有一个“布尔 inTree()”方法，如果为真则意味着动物在树中类树还有 2 个方法... public Animal nowInTree() public Animal hasLeftTree()

这些方法中的每一个都需要一个 println 或 printf 语句来列出动物的特征……这是关键，Bird 类有一个参数 int feathers ，而 Monkey 类有一个参数 double weight。

我对名为 Tree 类的控制台的输出应该等于......“这只名叫 Falcon 的鸟 3 岁，有 912 根羽毛，已经离开了树。”

然后使用相同的方法或者甚至相同的 printf 语句也可以打印到控制台......“这只名叫 Bubba 的猴子 9 岁，体重 22.5 磅，它的体重已经离开了树。”

可能的 printf 语句（假设创建了超类和子类方法 - 尽管这是不完整的 =

System.out.printf("%d 岁 $s 的动物 %s 离开了树", animalInTree.getAnimalName(), animalObj.getAge(), wtfGoesHere.callMeth(), );

好的，请注意，我需要从 wtfGoesHere() 方法所代表的每个子类中获取 var。wtfGoesHere() 不仅要返回 var 重量或羽毛，还要返回附加的额外信息……所以不仅是重量，而且“它的重量是 %d”。

重量和羽毛变量必须是私有的。虽然如果publis会解决它吗？如果是，那仍然是有风险的编码吗？我仍然是个业余爱好者，但有时在私下工作会让我感到很不舒服。

我很困惑，因为编译器目前确实知道 Animal 类中的信息，但不知道 Monkey 和 Bird 的子类。我可以为子类中的信息创建一个 getBlaBla()，但无法弄清楚如何告诉 java 何时使用哪个。

可能的想法...

1.  进行异常处理并在 printf 方法中添加一个额外的参数，当它到达该字段时，它将使用它可以使用的一个并在另一个上抛出异常......如果可能的话，我还不知道异常，我在高级java 课，还有一个月的时间。作业“暗示”它不允许异常处理。（虽然我很好奇这是否可行）

2.  创建某种级联“if else”，然后确定需要哪个子类。仍然存在问题，因为我限制制作的方法不包括传递子类对象......只接受 Animal 类作为对象参数在 Tree 类中传递。

3.  使用 Tree 类的 toString() 覆盖方法来处理这个......尽管我仍然遇到上面的＃2。

4.  我们了解了抽象类和“实现”函数——所以如果这可以解决我的问题，我也对此持开放态度……只要 hasLeftTree() 方法可以处理这两种子类的可能性。如果我没有明确说明 hasLeftTree() 方法确实会专门调用一个打印语句，提供有关子类的所有信息，包括其动物扩展信息。

我提到上述内容是为了表明我已经对此进行了一些思考，而不仅仅是抱怨手握。此外，尽管有上述限制，我的老师...有时...宣布他希望我们找到课堂上没有特别提到的功能...所以...如果您相信适当的行业公认标准需要不按指示进行我会和我的教授争论这一点。

如果需要，我会提供更多代码。Everyting else 在由 4 个文件组成的程序中工作...... 3 个类和主方法文件。

想法？和 TYVM 提前码神。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:54:16.913

我通过以下理解解决了这个问题：当返回超类的 toString 方法时，通过多态性 java 将查看子类以查看是否存在 toString 方法的“更好的版本”......因为我的对象是子类对象时我将超类称为 toString，它会看到子类对象，然后查看子类以查看是否存在相同的方法……在本例中为“toString”，当它找到它时，它会使用该方法。通过这样做，所有适当的信息都返回到打印语句等。

# mysql - 当行有重复数据时，如何在 MYSQL 中实现触发器以防止插入？

> ID：12946742
> 
> 赞同：0
> 
> 时间：2012-10-18T03:43:54.563
> 
> 标签：mysql

```
CREATE TABLE preferences(
    user_id INT,
    hot_sid INT,
    not_sid INT,
)Engine = InnoDB;

CREATE TRIGGER check_show_comparison
AFTER INSERT ON preferences
REFERENCING NEW ROW
FOR EACH ROW
WHEN ( hot_sid = not_sid )
ROLLBACK TRANSACTION; 
```

所以我正在尝试使用 MYSQL 建立一个数据库来跟踪类似于热或不热的东西。实际目的并不重要，但基本上我有一个名为preferences 的表，它包含三列，第一列是用户ID，第二列和第三列是preference id，它们代表相同类型的对象。（以 hot or not 为例，hot_sid 将存储“hot”实体的 id，not_sid 将存储“not”实体的 id。这两个实体是同一类型）。

我试图在每次插入表时编写一个触发器，以防止有人添加一个具有相同 sid 的行。实施此检查约束时我做错了什么？我考虑过只使用检查约束，但我不相信它们实际上是在 MYSQL 中强制执行的。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:21:21.240

你是对的 - MySQL 中的 DDL 支持检查约束，但被忽略了。从参考 - *CHECK 子句被解析，但被所有存储引擎忽略*。

解决方案是创建一个 BEFORE INSERT 触发器，检查新值并在需要时从触发器中抛出错误。

要引发错误，您可以使用：

*   [信号声明](http://dev.mysql.com/doc/refman/5.5/en/signal-resignal.html)：`SIGNAL SQLSTATE '02000' SET MESSAGE_TEXT = 'hot_sid = not_sid';`
*   调用不存在的存储过程：`CALL proc_error();`

# php - 在 PHP 中从 WSDL 生成 SoapServer

> ID：12946743
> 
> 赞同：6
> 
> 时间：2012-10-18T03:44:06.810
> 
> 标签：php, soap, soap-client

我有一个由 java 中的 web 服务生成的 WSDL，我需要在 php 应用程序中复制同样的 web 服务。

我看了看，我发现的大多数脚本只是生成客户端。我需要将被消耗的服务器端。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T03:52:32.737

如果您有 WSDL，那么您可以简单地将其传递给 PHP5 中定义的 SoapServer 类。

```
$server = new SoapServer("some.wsdl");
$server->setClass('MySoapServer');
$server->handle(); 
```

当然，您需要编写`MySoapServer`类来处理 WDSL 中定义的方法，以使该示例正常工作。

例如，如果 WDSL 定义了一个`add($a, $b)`函数，则该类将如下所示：

```
class MySoapServer
{
    public function add($a, $b)
    {
        return $a + $b;
    }
} 
```

来源：[http](http://au1.php.net/manual/en/soapserver.soapserver.php) ://au1.php.net/manual/en/soapserver.soapserver.php & [http://au1.php.net/manual/en/soapserver.setclass.php](http://au1.php.net/manual/en/soapserver.setclass.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T16:06:00.837

我一直在寻找相同的功能，但对于服务器端来说，它似乎不存在这样的功能。

之后，您可以使用脚本作为 wsdl2php 来生成客户端类，并使用这些类作为信息并响应它创建的部分......然后您将使用 noetix 建议的 SoapServer 声明。

在这个网站上有一个很好的 wsdl2php 介绍：[http ://www.dimuthu.org/blog/2008/09/21/wsdl2php-2-minutes-introduction/](http://www.dimuthu.org/blog/2008/09/21/wsdl2php-2-minutes-introduction/)

如果有人知道生成服务器端的脚本，我仍然感兴趣:)

# udp - 计算 UDP 校验和时接收方的结果是什么

> ID：12946752
> 
> 赞同：0
> 
> 时间：2012-10-18T03:45:16.607
> 
> 标签：udp, checksum

我在这方面找到了不同的答案。许多资源说接收器应该收到全1的计算。在 Andrew S. Tanenbaum 题为《计算机网络》的书中写道：“校验和算法只是简单地将所有 16 位字的反码相加，然后取和的反码。因此，当接收方对整个段进行计算，包括校验和字段，结果应该为0。” 接收器是否也取结果和的补码并得到 0？哪个是表示未检测到错误的正确结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:53:49.773

在一个补码算法中，all-1 和 all-0 都表示相同的值，即 0。

[维基百科](http://en.wikipedia.org/wiki/Ones%27_complement)

# php - CakePHP 导入的控制器范围问题

> ID：12946753
> 
> 赞同：3
> 
> 时间：2012-10-18T03:45:24.580
> 
> 标签：php, cakephp

我有一个控制器，用于通过 cron 运行进程列表，我需要它从单独的控制器运行方法。

当从它自己的控制器调用该方法时，一切正常，但是从 cron 控制器运行时（即使手动调用），它会失败。

我的代码目前看起来像这样：

```
class CronController extends AppController
{
    var $uses = array(.., 'EmailTemplate', ..);
    var $components = array('Email');

    //Some stuff

    function process_for_cron_to_run() {
        //Some stuff

        //Run method from imported controller
        App::import('Controller', 'Imported');
        $imported = new ImportedController;
        $imported->constructClasses();
        $imported->method_to_run(); //Dies when running this method
        exit;
    }
}

...

class ImportedController extends AppController {
    var $uses = array(..);
    var $components = array('Mailer', 'RequestHandler', 'FileHandler', 'Email');            

    //Some stuff

    function method_to_run() {
        //Some stuff

        $this->_sendEmail(..);
    }
}

...

class AppController extends Controller
{
    var $components = array('Cookie', 'RequestHandler', 'Err', 'Email', 'Sms');
    var $uses = array(.., 'EmailTemplate', ..);

    function _sendEmail(..) {
        //Some stuff

        $this->EmailTemplate->find(..); //Dying here (Line 1756)
    }
    ..
} 
```

这将因以下错误而死：

```
Fatal error: Call to a member function find() on a non-object in /../app/app_controller.php on line 1756 
```

其中第 1756 行在上面的 AppController 中。

我尝试添加`EmailTemplate`到`$uses`ImportedController - 这有效，但它在 AppController 中的几行后调用`$this->Email`，它包含在`$components`所有三个控制器中。的错误信息`$this->email`，供参考：

```
Fatal error: Call to a member function reset() on a non-object in /../app/app_controller.php on line 1645 
```

我唯一能想到的另一件事是我从 ImportedController 调用的方法是 admin_X，所以当我从 /processes/process_for_cron_to_run 调用它时，它可能会因为身份验证问题而被踢出？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T22:10:51.843

我现在已经解决了这个问题；我必须采取两个步骤来修复它：

1.  将“EmailTemplate”添加到 $uses 以便 ImportedController 可以引用它。这意味着代码现在在尝试调用 $this->Email 时会死掉。
2.  更新了 process_for_cron_to_run() 以初始化组件：

    ```
    function process_for_cron_to_run() {
        //Some stuff

        App::import('Controller', 'Imported');
        $imported = new ImportedController;
        $imported->_initComponents(); //Added this line
        $imported->constructClasses();
        $imported->method_to_run();
        exit;
    } 
    ```

它死掉的原因是因为导入的控制器没有初始化它的组件；当对象在 AppController 中调用 _sendEmail 时，没有附加任何组件，所以它不知道 $this->Email 是什么。

然而，这个问题的理想解决方案是将 method_to_run 逻辑移动到模型或组件中，而不是导入控制器。

# c - C字符串搜索获取字符串的一部分

> ID：12946760
> 
> 赞同：0
> 
> 时间：2012-10-18T03:46:13.903
> 
> 标签：c, string, search

我正在尝试制作一个小型测试函数，当通过 a 时，`char *`它将在该字符串中搜索某个子字符串，然后在空格之后输出下一个字符，直到下一个空格。

`strstr()`我使用and做了一个基本的实现，`strncpy()`但是这种方法是一种静态的，一次只适用于一个搜索词，下一个字符的输出是固定的。

```
int ParseCommand(char *command)
{
    char *pSearch = strstr(command, CommandOne);
    char str[100];

    if (pSearch != NULL)
    {
        pSearch += strlen(CommandOne) + 1;
        strncpy(str, pSearch, 2);
        printf("%s\n\n", str);
    }

    printf("%s\n", command);
    return 0;
} 
```

此代码示例的作用是，如果您通过 say `ParseCommand("ten hats 10 are cool")`and `CommandOne`is equal`"hats"`函数将输出`"10"`。虽然这确实有效，但它执行的操作过于静态，并且很难在`char *command`. 我本质上需要一些可以遍历命令的东西，直到`strstr()`在传递的字符串中找到一个命令，然后将命令之后的所有内容复制到下一个空格。

我知道我将如何搜索命令（我将创建一个包含所有搜索词的指针 char 数组并循环遍历它们直到`strstr()`不返回 null）但是我将如何在搜索词之后复制下一个“单词” ?

总的来说，我需要一些伪代码逻辑来搜索句子中的搜索词，然后复制预置它的数据，直到到达下一个空格。（复制句子中搜索词之后的下一个词。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:09:50.353

我快速制作了一个原型，它似乎可以工作。

```
char *ParseCommand(char *command, char *find)
{
    char *p, *q, *t;

    p = strstr(command, find);

    if (p != NULL) {
        /* skip to the next word */
        for (q = p; *q != '\0' && *q != ' '; q++)
            ;
        if (*++q != '\0') {
            for (p = q; *q != '\0' && *q != ' '; q++)
                ;
            t = malloc(q - p);
            return strncpy(t, p, q - p);
        }
    }

    return NULL;
} 
```

测试它，`ParseCommand("ten hats 10 are cool", "hats")`它返回`10`.

HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:30:27.060

一个问题是设计函数的接口；你得到的界面太简单了，特别是如果你找到第一个字符串后需要拿起。所以，我提出了一个更复杂的接口：

```
int find_word_following(char *haystack, const char *needle, char **bgn, char **end); 
```

haystack 是要扫描的字符串。针是要找到的词。和参数是指针（输出），函数将其设置为针后单词的开头`bgn`和`end`单词的结尾加一。返回值为 0（未找到单词）或 1（找到单词）。如果`*bgn == *end`在返回时找到了一个词，那么后面就没有另一个词了。我选择不在`const char *`haystack 上指定，因为`bgn`and`end`将指向 haystack 中的位置，并且 const 正确性变得混乱；不过，该代码不会修改 haystack。

```
#include <assert.h>
#include <ctype.h>
#include <stdio.h>
#include <string.h>

int find_word_following(char *haystack, const char *needle, char **bgn, char **end);

int main(void)
{
    char *haystack = "ten hats 10 are cool";
    char *needle   = "hats";
    char *bgn;
    char *end;

    while (find_word_following(haystack, needle, &bgn, &end))
    {
        printf("Found <<%*.*s>>\n", (int)(end - bgn), (int)(end - bgn), bgn);
        needle = "are";  // Change search term
        haystack = end;  // Start where previous scan left off
    }
    return(0);
} 
```

有了这么多的规范，函数编写起来并不难：

```
int find_word_following(char *haystack, const char *needle, char **bgn, char **end)
{
    assert(haystack != 0 && needle != 0 && bgn != 0 && end != 0);
    char *word = strstr(haystack, needle);

    if (word == 0)
        return(0);
    word += strlen(needle);
    // Skip to end of word (in case we found 'hatstand')
    while (*word != '\0' && !isspace(*word))
        word++;
    while (isspace(*word))   // Skip spaces after word
        word++;
    *bgn = word;             // Start of following word
    while (*word != '\0' && !isspace(*word))
        word++;
    *end = word;
    return(1);
} 
```

您可能可以通过适当调用`strspn()`and来替换这些循环`strcspn()`。

程序的输出是：

```
Found <<10>>
Found <<cool>> 
```

* * *

寻找确切单词的变体是：

```
#include <assert.h>
#include <ctype.h>
#include <stdio.h>
#include <string.h>

int find_word_following(char *haystack, const char *needle, char **bgn, char **end);

int find_word_following(char *haystack, const char *needle, char **bgn, char **end)
{
    assert(haystack != 0 && needle != 0 && bgn != 0 && end != 0);
    size_t length = strlen(needle);
    char *word;
    while ((word = strstr(haystack, needle)) != 0)
    {
        if ((word == haystack || (word > haystack && isspace(*(word - 1)))) &&
            isspace(word[length]))
        {

            word += length;
            while (isspace(*word))   // Skip spaces after word
                word++;
            *bgn = word;             // Start of following word
            while (*word != '\0' && !isspace(*word))
                word++;
            *end = word;
            return(1);
        }
        haystack = word + length;
    }
    return(0);
}

int main(void)
{
    char *haystack = "ten hatstands with hats on are OK";
    char *needle   = "hats";
    char *bgn;
    char *end;

    while (find_word_following(haystack, needle, &bgn, &end))
    {
        printf("Found <<%*.*s>>\n", (int)(end - bgn), (int)(end - bgn), bgn);
        needle = "are";  // Change search term
        haystack = end;  // Start where previous scan left off
    }
    return(0);
} 
```

输出（注意不同的输入字符串）是：

```
Found <<on>>
Found <<OK>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:09:09.953

为什么不使用 strtok() 来标记字符串？然后解析字符串以获取命令。

您可能需要一种语法（以递归下降方式编写）。

SPARKOT 建议编辑（谢谢）：如果您想要更快的字符串搜索算法，请查看[Boyer-Moore Algorithm](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)。

# django - 用于电子商务和普通网站的 Django 或 web to py

> ID：12946766
> 
> 赞同：2
> 
> 时间：2012-10-18T03:47:10.040
> 
> 标签：django, web, python-3.x, web.py

我必须为购物系统建立一个**电子商务网站，为一所大学建立一个****内容管理系统网站**。

我必须选择 Django 或 web 来使用**Python 3.x**进行 py，而后端我使用的是**Oracle 11g**。我不明白该使用哪一个，这对于电子商务网站和简单的 CMS 来说可能是一个更简单的解决方案。

另外，我在哪里可以找到好的 web 到 py 和 Django 的教程？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:45:58.313

我只能代表 Django，因为我没有使用过 web.py，但是 Django 在这个阶段只支持 python 2.x，所以你需要确定这是否违反了你的项目的要求。

（有对 3.x 的实验性支持，但还没有成为稳定版本：[https](https://www.djangoproject.com/weblog/2012/aug/19/experimental-python-3-support/) ://www.djangoproject.com/weblog/2012/aug/19/experimental-python-3-support/ ）

话虽这么说，Django 是一个很棒的框架，如果你能抛开 python 3.x 的兼容性问题，我会全力推荐它。Django ORM 还支持您正在使用的 Oracle 版本，这是一个奖励。

官方 django 教程是一个很好的起点 - 请参阅：

[https://docs.djangoproject.com/en/1.4/#first-steps](https://docs.djangoproject.com/en/1.4/#first-steps)

# jquery - 仅定位部分 div 内容

> ID：12946768
> 
> 赞同：3
> 
> 时间：2012-10-18T03:47:33.870
> 
> 标签：jquery

我有以下 html 标记

```
<div class="title-wrap">
      <span class="title">Hello World</span>
        <br/>
   This title is about Hello World
</div> 
```

我想定位文本'This title is about Hello World'

但是我不知道如何在不包括跨度的情况下做到这一点？是否可以使用这种格式的 html 来实现这一点？

我试过使用

```
var test = (jQuery('.title-wrap').text() || '' );
alert (test); 
```

但这会返回

```
Hello World

This title is about Hello World 
```

如[this fiddle](http://jsfiddle.net/aaronk85/Y6dcU/)所示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:53:33.690

### 你可以使用这个：

```
var test = (jQuery('.title-wrap')
        .clone()    //clone the element
        .children() //select all the children
        .remove()   //remove all the children
        .end()  //again go back to selected element
        .text() || '' );
alert (test); 
```

### 输出：

```
This title is about Hello World 
```

### 小提琴：http: [//jsfiddle.net/Y6dcU/6/](http://jsfiddle.net/Y6dcU/6/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T04:05:03.367

您可以使用[`.contents()`](http://api.jquery.com/contents/)获取所有子节点，`.title-wrap`然后用于[`.last()`](http://api.jquery.com/contents/)选择最后一个，因为那是您想要的。

```
jQuery('.title-wrap').contents().last().text() 
```

[http://jsfiddle.net/Y6dcU/11/](http://jsfiddle.net/Y6dcU/11/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-18T03:58:58.930

尝试将其包装在 span 元素中。您可以使用标头（h1、h2 等）替换第一个跨度，也可以使用 id 或类属性来获取特定引用：

```
<div class="title-wrap">
    <span class="title">Hello World</span>
    <br>
    <span id="myTitle">This title is about Hello World<span>
</div> 
```

在 JS 中，你会使用：

```
var test = (jQuery('#myTitle').text() || '' );
alert (test); 
```

# iphone - iphone app 3G上传图片失败（wifi正常）

> ID：12946774
> 
> 赞同：2
> 
> 时间：2012-10-18T03:48:06.477
> 
> 标签：iphone, wwan

我们尝试将图像从 iphone 应用程序上传到 php 脚本。在wifi连接上，一切顺利。但在 3G 连接中，大约 50% 的时间会失败。（我们的 3G 非常稳定）我们在其他帖子中看到了一些评论，但似乎无法正常工作。任何人都可以提供一些建议吗？

```
[asirequest setData:imageData withFileName:[NSString stringWithFormat:@"%@.png",[name objectAtIndex:0]] andContentType:@"image/png" forKey:@"filedata"]; 
```

我们试图限制 3G 带宽：

```
[ASIHTTPRequest setShouldThrottleBandwidthForWWAN:YES]; 
```

但上传变得很慢。仍然失败了大约 50% 的时间。在 wifi 中，上传时间不到 10 秒，并且始终有效。

thx 一百万。

# qt - QtabWidget（pyQT）中的页面焦点

> ID：12946777
> 
> 赞同：0
> 
> 时间：2012-10-18T03:48:25.890
> 
> 标签：qt, focus, pyqt, qtabwidget

可能这个问题似乎是非常基本的事情，但我无法找到问题的解决方案。

当我点击它时，我想在选项卡布局中加载页面（QWidget）的元素。我将焦点策略更改为单击选项卡小部件内 Qwidget(of page) 的焦点。

现在，我坚持使用哪个焦点命令或方法来加载页面元素。我尝试了 hasFocus 或 setFocus，但它不起作用，可能是因为我无法以正确的方式进行操作。

另外，我如何检查该特定页面是否接收到焦点。我尝试在初始化应用程序时添加命令（self.twTest.hasFocus()），但它只检查应用程序的启动。

谢谢

# java - 创建一个生成新 DatagramSockets 的循环？

> ID：12946778
> 
> 赞同：0
> 
> 时间：2012-10-18T03:48:29.890
> 
> 标签：java, variables, loops

嗨，我想遍历`n`我拥有的端口数量列表，并为每个端口创建一个 DatagramSocket：

```
for(int i = 0; i < portList.size(); i++) {
    DatagramSocket socket[i] = new DatagramSocket();
    socket[i].connect(InetAddress.getLocalHost(), portList.get(i));
} 
```

我知道我不应该使用`socket[i]`. 只是为了表达我的意思，上面会生成：

```
DatagramSocket socket1 = new DatagramSocket();
socket1.connect(InetAddress.getLocalHost(), 2000);

DatagramSocket socket2 = new DatagramSocket();
socket2.connect(InetAddress.getLocalHost(), 2001);

DatagramSocket socket3 = new DatagramSocket();
socket3.connect(InetAddress.getLocalHost(), 2002);

DatagramSocket socket4 = new DatagramSocket();
socket4.connect(InetAddress.getLocalHost(), 2003); 
```

我不太擅长 Java，所以这可能是一个愚蠢的问题：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:53:23.693

使用可能，`ArrayList`首先存储您的套接字：

```
ArrayList<DatagramSocket> socketList = new ArrayList<DatagramSocket>();
socketList.add(new DatagramSocket());
socketList.add(new DatagramSocket());
socketList.add(new DatagramSocket());
socketList.add(new DatagramSocket()); 
```

然后循环`socketList`：

```
for(int i = 0; i < portList.size(); i++) {
    socketList.get(i).connect(InetAddress.getLocalHost(), portList.get(i));
} 
```

这是假设您拥有**相同数量**的端口并`DatagramSocket`在`socketList`. 否则，它将`NullPointer`在循环中的某个地方抛出一个。

**更新**

来自**user1753100**的解决方案：

```
ArrayList<DatagramSocket> socketList = new ArrayList<DatagramSocket>();
for (int j = 0; j < portList.size(); j++) {
    socketList.add(new DatagramSocket());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:08:25.903

拉塞尔的回答很好。总结一下，这就是我要写的：

```
//get local host
InetAddress localHost = InetAddress.getLocalHost();

//make a List to hold the sockets
//we know how many there will be so use that capacity
List<DatagramSocket> datagramSockets =
        new ArrayList<DatagramSocket>(portList.size());

//for each port,
for (Integer port : portList) {
    //instantiate a new socket
    DatagramSocket datagramSocket = new DatagramSocket();
    //add it to the list
    datagramSockets.add(datagramSocket);
    //connect it using the port
    datagramSocket.connect(localHost, port);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:07:44.270

```
ArrayList<DatagramSocket> socketList = new ArrayList<DatagramSocket>();

for(int i=0;i<portList.size();i++)

 {
   socketList.add(new DatagramSocket().connect(InetAddress.getLocalHost(), portList.get(i));
} 
```

# c# - C# Json 解析器——一一取

> ID：12946784
> 
> 赞同：0
> 
> 时间：2012-10-18T03:49:28.983
> 
> 标签：c#, json

我的服务会在“json”中接收一些数据，我不知道哪些数据。但是，我有一组可能存在的属性。Json 格式是这样的，不能更改，名称可能不同：

```
{"Parent1":
     {"Child1":"Value1","Child2":"Value2"},
 "Parent2":
     {"Child1":"Value1","Child2":"Value2"},
 "Parent3":
     {"Child1":
          {"SubChild1":"Value1","SubChild2":"Value2"}}
} 
```

我想枚举所有项目以获取键：值对。请注意，层次结构很重要，因为多个对象可能具有相同的键但不同的父对象。另请注意，我不知道键，我需要获取键和值，因此我无法立即从中获取 POCO 对象。

所以问题基本上是：如何获得一个集合，该集合将通过所有属性（具有对键和值的访问器）实现一些迭代器并支持层次结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:11:19.953

您始终可以将 JSON 输入反序列化为一些（无类型）DOM，您可以在其中遍历表示 JSON 文档的树。有几个选项：[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)类，它将 JSON 反序列化为 a `Dictionary<string, object>`（对于数组，它将反序列化为 a `object[]`）。或者您可以使用第三方库，例如[JSON.NET](http://json.net)，您可以将任意 JSON 反序列化为 JToken/JObject/JArray/JValue 树，并使用这些类中的方法对其进行遍历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:55:47.610

从您的问题中并不清楚您对返回的 JSON 的格式有多少了解。如果您不知道任何键名，您可能无法使用反序列化器并从中获得不错的 C# POCO。

您最好的选择可能是使用 C#[动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)类型。由于这个原因，Facebook C# SDK 使用动态，因此他们不必尝试与不断变化的数据保持同步。[你可以在这里](http://blog.ntotten.com/2010/09/07/dynamic-objects-and-the-facebook-c-sdk/)阅读他们的理由，也许它可以提供一些关于如何对数据进行类似建模的建议。

# java - 如何根据传入的参数使方法执行一定次数的操作？

> ID：12946786
> 
> 赞同：0
> 
> 时间：2012-10-18T03:49:30.490
> 
> 标签：java

```
public void printStars(int level) {

    for (int one = level; one >= 1; one--) {

        for (int two = one; two <= level; two++) {

            System.out.print("*");

        }
        System.out.println();

    }
} 
```

我正在尝试制作如下所示的东西：

```
 *
   ***
  *****
 *******
********* 
```

目前，我得到了大约一半的正确图表全部左对齐。

我试图合并 printf，但我意识到它不起作用，因为 的值`level`无法传递给 printf 方法。我还想知道是否有办法将最长的段（底部）设置为等于（2 * 级别） - 1 星长并对其应用某种格式以获得答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:56:07.930

在前面打印适当数量的空格

```
public void printStars(int level) {

    for (int one = level; one >= 1; one--) {
        for(int k=1, k<one;k++){  // print appropriate number of spaces before
            System.out.print(" "); 
        }    
        for (int two = 1; two <=2*(level-one)+1; two++) {
            System.out.print("*");
        }
        System.out.println();
    }
} 
```

解释：

1.  如果总共有 N 个级别，并且最后一行没有任何空间。=> N-1 个级别将在第一行有 N-1 个空格，在第二行有 N-2 个空格，依此类推.. 第 (N-1) 行有 1 个空格。

2.  星数：(level-one) 给你正在打印的行减 1，因为，最初当 one = level (one-level = 0) 时，它的第一行，接下来它的 (level-one) = 1，因为一个是减少。& 在你必须打印的每一行中，2*X +1 *'s，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T03:56:53.757

试试下面：

```
public static void printStars(int level) {
    for (int one = 0; one < level; one++) {
      for(int space = 1; space < (level-one); space++){ //<- print leading space
       System.out.print(" ");
      }

      //<- print stars in odd numbers e.g. 1,3,5,7
      for (int two = 0; two < 2*one+1; two++) { 
       System.out.print("*");
      }
      System.out.println();
   }
 } 
```

# macos - 将 QTMovie 保存到 mac os x 中的文件后，预览图像无法正确显示确切的帧图像

> ID：12946789
> 
> 赞同：1
> 
> 时间：2012-10-18T03:49:59.747
> 
> 标签：macos, cocoa, quicktime, qtkit

我在将 QTMovie 保存到硬盘驱动器中的文件时发现了奇怪的行为..（例如：桌面）...它显示了与开始时间帧图像不同的帧图像作为桌面中的预览.....但是如果我在“Quick Time Player”中打开保存的 QTMovie，它会在开始时显示正确的帧图像......

我怀疑这可能是可可中的错误...

这是我修剪原始电影并将修剪后的电影保存到不同文件的代码片段：

```
QTMovie *newmovie;
NSError *error = nil;

newmovie = [[QTMovie alloc] initToWritableData:[NSMutableData data] error:&error];

[newmovie setAttribute:[NSNumber numberWithBool:YES] forKey:QTMovieEditableAttribute];

QTTime starttime = QTMakeTimeWithTimeInterval(videostarttime);
QTTime duration = QTMakeTimeWithTimeInterval(currentclipduration);

QTTimeRange range = QTMakeTimeRange(starttime, duration);
[newmovie insertSegmentOfMovie:mvmovie timeRange:range atTime:QTZeroTime];

NSDictionary *dictionary = [NSDictionary 
                        dictionaryWithObjects:
                        [NSArray arrayWithObjects:
                         [NSNumber numberWithBool:YES],
                         [NSNumber numberWithBool:YES],
                         [NSNumber numberWithLong:kQTFileTypeMP4],  // TODO - allow to select the codec
                         nil]
                        forKeys:
                        [NSArray arrayWithObjects:
                         QTMovieFlatten, QTMovieExport, QTMovieExportType, nil]];

NSString *fileextn,*underscore,*combinedstring;

clipcount++;

NSString *intString = [NSString stringWithFormat:@"%d", clipcount];
fileextn = @".MP4 ";
underscore = @"_";
intString = [intString stringByAppendingString:fileextn];

combinedstring = [underscore stringByAppendingString:intString];

NSString* filename ;

filename = [curFileName stringValue].stringByDeletingPathExtension;

filename = [filename stringByAppendingString:combinedstring];

NSString *result = [[NSHomeDirectory() stringByAppendingPathComponent:@"Desktop"] stringByAppendingPathComponent:filename];

[newmovie writeToFile:result withAttributes:dictionary];

[newmovie release]; 
```

谁能帮我解决这个问题？....我不知道我做错了什么...除了“保存的 QTMovie 文件的预览帧图像都按预期工作...

谢谢和问候， 穆图

# c# - 我应该如何处理 UDP 数据包服务器创建

> ID：12946792
> 
> 赞同：0
> 
> 时间：2012-10-18T03:50:15.637
> 
> 标签：c#, winforms, udp, listener

我正在开发我的应用程序，我需要的组件之一是在端口 9494 上侦听 UDP 数据包的服务器。然后我将不得不解析这些数据包。

我以前从未这样做过；你能指点我正确的方向，这样我就可以写“听众”了吗？

对于 TCP，我可以做到`this.listener = new TcpListener(IPAddress.Any, port);`；UDP怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:24:53.987

示例在这里：

[http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx)

您所要做的就是创建一个 UdpClient 并调用 Receive 或 BeginReceive。UDP 是“无连接”的，因此使用起来要简单得多——您只需在收到时立即获取整个 UDP 消息。

# c# - 从表 1 中选择记录并复制到 C# 中的表 2

> ID：12946793
> 
> 赞同：4
> 
> 时间：2012-10-18T03:50:19.437
> 
> 标签：c#

我有一个 select 语句，它从 table1 中选择记录并显示在 datagridview 中，

如何在 select 语句之后将 datagridview 中显示的数据复制到 table2。下面是我从 table1 中选择项目的代码

```
 public void getdata(){
        if (txt_Barcode.Text== "" )
        {
            MessageBox.Show ("Please fill in something");
        }
        for (int i = 0; i < dgv_Detail.Rows.Count +1; i++)
        {

            da = new SqlDataAdapter("select * from asset where asset_no='" + txt_Barcode.Text + "'", conn);

        }
             da.Fill(Assetdt);         
        }

    #endregion

    public void fillds()
    {
        dgv_Detail.DataSource = Assetdt;
    } 
```

激活事件

```
 private void txt_Barcode_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyData == Keys.Enter)
        {

            getdata();
            fillds();

            insertbar();

        }
    } 
```

没有人知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:21:12.767

首先将数据从数据网格视图移动到数据表：

```
 DataTable dt = new DataTable(); 
        DataColumn[] dcs = new DataColumn[]{}; 

        foreach (DataGridViewColumn c in dgv.Columns) 
        { 
            DataColumn dc = new DataColumn(); 
            dc.ColumnName = c.Name; 
            dc.DataType = c.ValueType; 
            dt.Columns.Add(dc); 

        } 

        foreach (DataGridViewRow r in dgv.Rows) 
        { 
            DataRow drow = dt.NewRow(); 

            foreach (DataGridViewCell cell in r.Cells) 
            { 
                drow[cell.OwningColumn.Name] = cell.Value; 
            } 

            dt.Rows.Add(drow); 
        } 
```

然后使用 datable.rows 上的 foreach 循环将数据从数据表移动到 sql 表：

```
foreach(DataRow dr in dt.Rows)
{
Product product = new Product(); // make seperate class with same feilds as sql table
//Get the column values 
product.productId = dr["productId"];
 product.productName = dr[ProductName"];
 Product.Insert();//Insert will have inserting records into the dabtase
} 
```

产品是单独的类：

```
public class Product
{
   public int productId { get; set; }
   public string productName { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:34:18.287

使用 SqlCommandBuilder 生成插入命令

```
 DataTable dtSource = null;
        //populate or assign dtSouurce here

        string connectionString = null;
        //assign your connection string here

        var tableName = "TABLE2";

        using (var connection = new SqlConnection(connectionString))
        {
            var adapter = new SqlDataAdapter();
            adapter.SelectCommand = new SqlCommand(tableName, connection);
            adapter.SelectCommand.CommandType = CommandType.TableDirect;
            var builder = new SqlCommandBuilder(adapter);

            connection.Open();

            var dataSet = new DataSet();
            adapter.FillSchema(dataSet, SchemaType.Mapped);

            builder.GetInsertCommand();

            foreach (DataRow row in dtSource.Rows)
            {
                dataSet.Tables[tableName].Rows.Add(row.ItemArray);
                //dataSet.Tables[tableName].Rows.Add(new object[]{ row.ItemArray[0], row.ItemArray[2], "Some Else Values" });
            }

            adapter.Update(dataSet, tableName);

            connection.Close();
        } 
```

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T04:05:56.577

一种方法是在显示数据后运行“SELECT INTO Table2”查询。

实际上，在 Datagridview 上放置数据后，您无需从中读取数据，而是可以重新使用您的查询。

```
for (int i = 0; i < dgv_Detail.Rows.Count +1; i++)
{
string sqlQuery = "FROM asset where asset_no='" + txt_Barcode.Text + "'";
string sqlInsertQuery = "SELECT INTO Table2 " + sqlQuery;
da = new SqlDataAdapter("SELECT * " + sqlQuery, conn);
//Run ExecuteNonQuery using sqlInsertQuery    
} 
```

阅读更多关于 SELECT INTO [http://www.w3schools.com/sql/sql_select_into.asp](http://www.w3schools.com/sql/sql_select_into.asp)

阅读更多关于执行非查询[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

# algorithm - 我应该如何按频率顺序排列字母？

> ID：12946794
> 
> 赞同：1
> 
> 时间：2012-10-18T03:50:19.263
> 
> 标签：algorithm

我正在尝试编写一种算法，以按频率顺序重新排列字符串中的字母，然后按字母顺序排列。例如，“apple”变成“aelpp”。“香蕉”变成了“bnnaaa”。

我知道多种语言，但我现在使用 Python 来编写代码。这是我到目前为止所拥有的，但它不起作用，因为没有频率排序。

```
def order(word):
  word = word.lower()
  storage = [0] * 26
  for c in word:
    storage[ord(c) - 97] += 1
  newWord = []
  for l, c in enumerate(storage):
    for i in range(0, storage[l]):
      newWord.append(chr(l + 97))
  return ''.join(newWord) 
```

关于如何最有效地正确实施此算法的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:10:28.410

这是一个（大部分）pythonic示例，说明如何在python中处理这个问题，我希望评论足以解释正在发生的事情：

```
words = ["apples", "banannas", "oranges"]

def main():
    # our list of jumbled words
    jumbled = []
    for word in words:
        # dictionary of letter / frequency pairs.
        letters = {};
        # get letter frequency
        for letter in word:
            if letter in letters:
                letters[letter] += 1
            else:
                letters[letter] = 1
        # sort the letter / frequency pairs on descending frequency
        jumbled_word = sorted(letters.items(), key = lambda x: x[1],
                                                              reverse = True)
        # join the letters back together and add to our jumbled words
        jumbled.append(''.join([x[0] for x in jumbled_word]))
        letters = {}

    # print out the jumbled words in alphabetical order
    for x in sorted(jumbled):
        print x

if __name__=="__main__":
    main() 
```

此实现将保持大写字母大写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:59:21.630

对于频率，常用的工具是哈希表（python 中的字典）。我对 python 不是很自信，所以我会给你一些伪代码

```
hashtable table
for character in string
  table[character] +=1;
list partiallySorted = alphabetize(table.keys()) 
list sortedList = stablesort partiallySorted by (table[a]<table[b] iff a<b) 
```

稳定排序将保持相等元素之间的相对顺序，从而保留您的顺序。

幸运的是，因为 python 2.2 保证所有排序都是稳定的，所以如果你不想自己实现它，你可以调用库的 sort 函数来进行稳定排序。

# c# - 我们需要“双重”等待，以便 GUI 不会冻结？

> ID：12946799
> 
> 赞同：3
> 
> 时间：2012-10-18T03:50:45.570
> 
> 标签：c#, user-interface, responsive-design, task-parallel-library, async-await

[在阅读Async and Await (C# and Visual Basic) 的异步编程](http://msdn.microsoft.com/en-us/library/hh191443.aspx)之后，我希望我的 GUI 不会挂起

```
 public async Task<string> DoBusyJob()
    {
        // Busy Job
        Thread.Sleep(10000);
        i++;
        return "Finished " + i;
    }

    int i = 0;

    private async void button1_Click(object sender, EventArgs e)
    {
        // Hang!
        string result = await DoBusyJob();

        this.label1.Text = result;
    } 
```

**但是，事实并非如此。它仍然挂起。**我意识到我需要添加额外`await`的`DoBusyJob`

```
 public async Task<string> DoBusyJob()
    {
        // Busy Job
        await Thread.Sleep(10000);
        i++;
        return "Finished " + i;
    }

    int i = 0;

    private async void button1_Click(object sender, EventArgs e)
    {
        // OK!
        string result = await DoBusyJob();

        this.label1.Text = result;
    } 
```

我可以知道为什么会这样吗？我真的需要**double** `await`吗？如果出现以下情况怎么办？

```
 public async Task<string> DoBusyJob()
    {
        // How to prevent Hang?
        for (int j = 0; j < 10000000; j++) {
            double m = Math.Sqrt(1) + Math.Sqrt(2) + Math.Sqrt(3);
        }
        i++;
        return "Finished " + i;
    }

    int i = 0;

    private async void button1_Click(object sender, EventArgs e)
    {
        // Hang!
        string result = await DoBusyJob();

        this.label1.Text = result;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T04:17:36.933

请参阅有关方法[的此问题的出色答案](https://stackoverflow.com/a/9574845/185200)`async`。

如果您没有使用已经异步的方法，则添加`async`不足以使您的方法异步执行。`await`在这种情况下，您需要返回一个`Task`代表您的工作执行的实例，例如。通过调用`Task.Factory.StartNew`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:17:12.233

[`async`/ `await`FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)中有一个很好的答案：

> 问：在方法上使用“async”关键字是否会强制对该方法的所有调用都是异步的？
> 
> A. 不会。当您调用标记为“async”的方法时，它会开始在当前线程上同步运行...
> 
> 问：“async”关键字是否会导致方法调用排队到 ThreadPool？创建一个新线程？向火星发射火箭飞船？
> 
> A. 不。不。而且不...

您可能会发现我的[`async`/`await`介绍](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T18:30:37.747

我希望我能理解你`// OK!`添加 `await`到 `Thread.Sleep(10000);`
它不可能等待方法`Sleep()`返回`void`
只能等待指定其签名`Task`或`Task<TResult>`作为返回类型 的方法

异步方法在没有（或直到）的情况下同步执行，`await`因此阻塞 UI 线程
await Task.Run() 应立即返回到（先前的）UI 同步上下文，即继续下一个 i++；行执行

```
public async Task<string> DoBusyJob()
{
  // Busy Job

  await Task.Run(() =>
    {
        for (int j = 0; j < 10000000; j++)
        {
            double m = Math.Sqrt(1) + Math.Sqrt(2) + Math.Sqrt(3);
        }
    }
                );
  i++;
  return "Finished " + i;
} 
```

# android - 移动背景图像，同时保持前图像静止在画布上

> ID：12946800
> 
> 赞同：1
> 
> 时间：2012-10-18T03:51:06.420
> 
> 标签：android, touch, android-canvas

我想在另一个图像（作为框架）内绘制一个图像（作为家庭照片，即）。

我正在使用 ImageView 来处理这个问题。我可以拖动我的背景图像，但视图没有再次绘制正面图像。

这是我加载两个图像的代码。mFrontImage 是“框架”，mBackImage 是我们将拖动的“背景”。*这些代码行没有问题。*

```
// Create a new bitmap scaled from original bitmap
mFrontImage = Bitmap.createBitmap(bmpTemp, 0, 0, fw, fh, fmatrix, true);

mCanvas = new Canvas(mFrontImage);
mPaint.setXfermode(new PorterDuffXfermode(android.graphics.PorterDuff.Mode.DST_OVER));
mCanvas.drawBitmap(mFrontImage, 0, 0, mPaint);
mCanvas.drawBitmap(mBackImage, 0, 0, mPaint);

mImageV = (ImageView) this.findViewById(R.id.image_view);
mImageV.setImageBitmap(mFrontImage);
mImageV.setOnTouchListener(this); 
```

这些是处理触摸移动的代码：

```
case MotionEvent.ACTION_DOWN:
downx = event.getX();
downy = event.getY();
_moving = true;
break;

case MotionEvent.ACTION_MOVE:
if (_moving)
{
    dx = event.getX() - downx;
    dy = event.getY() - downy;
    downx = event.getX();
    downy = event.getY();
    x += dx;
    y += dy;

    mCanvas.drawColor(Color.TRANSPARENT, Mode.CLEAR);
    mCanvas.drawBitmap(mFrontImage, 0, 0, mPaint);
    mCanvas.drawBitmap(mBackImage, x, y, mPaint);
    mImageEdit.invalidate();
}
break;

case MotionEvent.ACTION_UP:
_moving = false;
break; 
```

线*drawColor*将擦除画布然后*drawBitmap(mBackImage ~)*但不是*drawBitmap(mFrontImage ~)*。

**我想要实现的是在 0、0 处绘制 mFrontImage，在新位置 x、y 处绘制 mBackImage。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:25:21.140

我认为除了创建新类实现 SurfaceView 之外别无他法。我确实尝试过并成功了。这是我的示例代码，供那些想尝试类似方式的人使用。

这段代码是从互联网上的许多来源和我自己的实现中组合而成的。您可以将两个图像加载到视图中，然后调整/移动背景图像的大小。我确实尝试过旋转，但还没有完成。

```
class MyCanvasView extends SurfaceView implements SurfaceHolder.Callback {
    private DrawingThread _thread;
    private Bitmap _frontbmp;
    private Bitmap _backbmp;
    private Matrix _matrix;
    float x, y, downx, downy, oldx, oldy;
    float dx, dy, bw, bh;
    boolean _moving = false;
    ScaleGestureDetector sgdetector;
    float scalefactor = 1.0f;
    float oldscalefactor = 1.0f;

    public MyCanvasView(Context context) {
        super(context);
        x = oldx = 0;
        y = oldy = 0;
        getHolder().addCallback(this);
        _thread = new DrawingThread(getHolder(), this);
        setFocusable(true);
    }

    public void initView(Bitmap front, Bitmap back){
        _matrix = new Matrix();
        sgdetector = new ScaleGestureDetector(getContext(), new ScaleListener());
        _frontbmp = front;
        _backbmp = back;
        bw = _backbmp.getWidth();
        bh = _backbmp.getHeight();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        synchronized (_thread.getSurfaceHolder()) {
            int action = event.getAction();
            sgdetector.onTouchEvent(event);
            switch (action & MotionEvent.ACTION_MASK)
            {
                case MotionEvent.ACTION_DOWN:
                    downx = event.getX();
                    downy = event.getY();
                    if((downx > oldx && downx < (oldx + bw)) && (downy > oldy && downy < (oldy + bh)))
                    {
                        _moving = true;
                    }
                    break;
                case MotionEvent.ACTION_MOVE:
                    if (_moving && !sgdetector.isInProgress())
                    {
                        dx = event.getX() - downx;
                        dy = event.getY() - downy;
                        downx = event.getX();
                        downy = event.getY();
                        oldx = x;
                        oldy = y;
                        x += dx;
                        y += dy;
                    }
                    break;
                case MotionEvent.ACTION_UP:
                    _moving = false;
                    oldx = x;
                    oldy = y;
                    break;
                case MotionEvent.ACTION_CANCEL:
                    break;
                case MotionEvent.ACTION_POINTER_DOWN:
                    _moving = false;
                    break;
                case MotionEvent.ACTION_POINTER_UP:
                    break;
                default:
                    break;
            }
            return true;
        }
    }

    @Override
    public void onDraw(Canvas canvas) {
        if (_backbmp != null && _frontbmp != null){
            canvas.drawColor(Color.WHITE);
            _matrix.postTranslate(x - oldx, y - oldy);
            _matrix.postScale(scalefactor/oldscalefactor, scalefactor/oldscalefactor, x + bw/2, y + bh/2);
            canvas.drawBitmap(_backbmp, _matrix, null);
            oldscalefactor = scalefactor;
            canvas.drawBitmap(_frontbmp, 0, 0, null);
        }

    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {

    }

    public void surfaceCreated(SurfaceHolder holder) {
        _thread.setRunning(true);
        _thread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // we have to tell thread to shut down & wait for it to finish, or else
        // it might touch the Surface after we return and explode
        boolean retry = true;
        _thread.setRunning(false);
        while (retry) {
            try {
                _thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
    }

    class DrawingThread extends Thread {
        private SurfaceHolder _surfaceHolder;
        private MyCanvasView _panel;
        private boolean _run = false;

        public DrawingThread(SurfaceHolder surfaceHolder, MyCanvasView panel) {
            _surfaceHolder = surfaceHolder;
            _panel = panel;
        }

        public void setRunning(boolean run) {
            _run = run;
        }

        public SurfaceHolder getSurfaceHolder() {
            return _surfaceHolder;
        }

        @Override
        public void run() {
            Canvas c;
            while (_run) {
                c = null;
                try {
                    c = _surfaceHolder.lockCanvas(null);
                    synchronized (_surfaceHolder) {
                        _panel.onDraw(c);
                    }
                } finally {
                    if (c != null) {
                        _surfaceHolder.unlockCanvasAndPost(c);
                    }
                }
            }
        }
    }

    class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
        @Override
        public boolean onScale(ScaleGestureDetector detector) {
            oldx = x;
            oldy = y;
            scalefactor *= detector.getScaleFactor();
            // Don't let the object get too small or too large.
            scalefactor = Math.max(0.1f, Math.min(scalefactor, 5.0f));
            return true;
        }
    }
} 
```

希望有人会发现这很有用。

# ios - ios允许特定数量的线程同时使用一个方法

> ID：12946805
> 
> 赞同：0
> 
> 时间：2012-10-18T03:51:28.900
> 
> 标签：ios, multithreading, synchronized, locks

我明白那个

```
 @synchronized(self) { /* lock is effective inside here only */ } 
```

可以防止多个线程同时访问您的方法。因此，在使用 @synchronized{} 时，任何人都无法访问其中的内容。

我以某种方式只允许有限数量的线程，例如只允许 2 个线程或 3 个线程同时访问该方法。

PS：我有一个发送同步请求的方法，我想限制一次最多发送3个同步请求

```
 @synchronized(self) { 
  webData  = [NSURLConnection sendSynchronousRequest: request returningResponse: &response  error: &error]; 
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:16:10.147

使用`NSOperationQueue`（如 Bob Kinney 建议的）是一个好主意。如果由于某种原因你不喜欢它，你可以使用 GCD 信号量。

例如

```
@implementation MyObject {
    dispatch_semaphore_t semaphore_;
}

- (id)init {
    if ((self = [super init])) {
        semaphore_ = dispatch_semaphore_create(3);
    }
}

- (void)dealloc {
    dispatch_release(semaphore_);
}

- (void)doTheThing {
    dispatch_semaphore_wait(semaphore_, DISPATCH_TIME_FOREVER); {
        // Do expensive operation here.  At most 3 threads can do it at once.
    } dispatch_semaphore_signal(semaphore_);
} 
```

[阅读*并发编程指南*](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW24)中的“使用调度信号量来调节有限资源的使用”以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:59:17.110

如果您尝试解释您的用例，也许会更好。如果您的目标是限制一些正在运行的进程，我鼓励您检查一下`NSOperation`，`NSOperationQueue`因为这将为您提供该功能。

[并发编程指南](https://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)

[NSOperationQueue](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)

# android - 如何在android中关闭光标

> ID：12946808
> 
> 赞同：2
> 
> 时间：2012-10-18T03:51:45.753
> 
> 标签：android, android-sqlite, android-cursor

你如何关闭游标每次调用数据库时都会显示此错误

```
10-18 03:29:52.191: E/Cursor(426): Finalizing a Cursor that has not been deactivated or closed. database = /data/data/standard.internet.marketing.mymovingfriend/databases/mymovingfriend, table = movingname, query = SELECT _id, movename, movedate FROM movingname WHERE movename= 'ok'
10-18 03:29:52.191: E/Cursor(426): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
10-18 03:29:52.191: E/Cursor(426):  at android.database.sqlite.SQLiteCursor.<init>(SQLiteCursor.java:210)
10-18 03:29:52.191: E/Cursor(426):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:53)
10-18 03:29:52.191: E/Cursor(426):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
10-18 03:29:52.191: E/Cursor(426):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1229)
10-18 03:29:52.191: E/Cursor(426):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1184)
10-18 03:29:52.191: E/Cursor(426):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1264)
10-18 03:29:52.191: E/Cursor(426):  at standard.internet.marketing.mymovingfriend.SQLHandler.checkMove(SQLHandler.java:1094)
10-18 03:29:52.191: E/Cursor(426):  at standard.internet.marketing.mymovingfriend.ListMovingNames$3.onKey(ListMovingNames.java:98)
10-18 03:29:52.191: E/Cursor(426):  at android.view.View.dispatchKeyEvent(View.java:3735)
10-18 03:29:52.191: E/Cursor(426):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
10-18 03:29:52.191: E/Cursor(426):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
10-18 03:29:52.191: E/Cursor(426):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
10-18 03:29:52.191: E/Cursor(426):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
10-18 03:29:52.191: E/Cursor(426):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1667)
10-18 03:29:52.191: E/Cursor(426):  at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1102)
10-18 03:29:52.191: E/Cursor(426):  at android.app.Activity.dispatchKeyEvent(Activity.java:2063)
10-18 03:29:52.191: E/Cursor(426):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1643)
10-18 03:29:52.191: E/Cursor(426):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2471)
10-18 03:29:52.191: E/Cursor(426):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2441)
10-18 03:29:52.191: E/Cursor(426):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1735)
10-18 03:29:52.191: E/Cursor(426):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 03:29:52.191: E/Cursor(426):  at android.os.Looper.loop(Looper.java:123)
10-18 03:29:52.191: E/Cursor(426):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-18 03:29:52.191: E/Cursor(426):  at java.lang.reflect.Method.invokeNative(Native Method)
10-18 03:29:52.191: E/Cursor(426):  at java.lang.reflect.Method.invoke(Method.java:521)
10-18 03:29:52.191: E/Cursor(426):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-18 03:29:52.191: E/Cursor(426):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-18 03:29:52.191: E/Cursor(426):  at dalvik.system.NativeStart.main(Native Method) 
```

我试着这样做来关闭光标

```
public Cursor getMove(){
        String[] columns = new String[]{KEY_ID1, KEY_MOVENAME};
        Cursor cursor = ourDatabase.query(DATABASE_TABLE1, columns, null, null, null, null, null);
        cursor.close();
        return cursor;
    } 
```

现在的问题是它说

```
10-18 03:47:53.921: E/AndroidRuntime(545): FATAL EXCEPTION: main
10-18 03:47:53.921: E/AndroidRuntime(545): java.lang.RuntimeException: Unable to start activity ComponentInfo{standard.internet.marketing.mymovingfriend/standard.internet.marketing.mymovingfriend.ListMovingNames}: java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT _id, movename FROM movingname) 
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.os.Looper.loop(Looper.java:123)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-18 03:47:53.921: E/AndroidRuntime(545):  at java.lang.reflect.Method.invokeNative(Native Method)
10-18 03:47:53.921: E/AndroidRuntime(545):  at java.lang.reflect.Method.invoke(Method.java:521)
10-18 03:47:53.921: E/AndroidRuntime(545):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-18 03:47:53.921: E/AndroidRuntime(545):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-18 03:47:53.921: E/AndroidRuntime(545):  at dalvik.system.NativeStart.main(Native Method)
10-18 03:47:53.921: E/AndroidRuntime(545): Caused by: java.lang.IllegalStateException: attempt to re-open an already-closed object: android.database.sqlite.SQLiteQuery (mSql = SELECT _id, movename FROM movingname) 
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:34)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:64)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:283)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:264)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.widget.CursorAdapter.getCount(CursorAdapter.java:132)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.widget.ListView.setAdapter(ListView.java:436)
10-18 03:47:53.921: E/AndroidRuntime(545):  at standard.internet.marketing.mymovingfriend.ListMovingNames.allFunctions(ListMovingNames.java:57)
10-18 03:47:53.921: E/AndroidRuntime(545):  at standard.internet.marketing.mymovingfriend.ListMovingNames.onCreate(ListMovingNames.java:36)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-18 03:47:53.921: E/AndroidRuntime(545):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-18 03:47:53.921: E/AndroidRuntime(545):  ... 11 more 
```

任何解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:59:08.430

您必须保持光标打开，直到您不再需要其中的数据。一旦不再需要来自游标的数据，您只需：

```
cursor.close(); 
```

但是在 Activity 中处理数据的一种更简洁的方法是实现[LoaderManager](http://developer.android.com/reference/android/app/LoaderManager.html)。这样做，您就不必担心管理游标状态。相反，Android 有效地为您做到了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:58:16.803

这行代码解决了一切

```
 Cursor c = null;
            try {
                .....
                }
            } finally {
                if(c != null){
                    c.close();
                }       
            }

            return items;
        } 
```

# http - 我如何使用 HTTP 标头在响应中指示这种可能性？

> ID：12946812
> 
> 赞同：0
> 
> 时间：2012-10-18T03:51:57.783
> 
> 标签：http, caching, http-headers

最后，我完成了使用 HTTP 标头缓存动态图像、css 和 javascript 文件但我现在有一个问题：

我有相同但具有不同 URL 的特定动态图像。

例如：

1.  [http://example.com/image/src/the-same-image.jpg](http://example.com/image/src/the-same-image.jpg)

2.  [http://example.com/image/custom/src/the-same-image2.jpg](http://example.com/image/custom/src/the-same-image2.jpg)

1 和 2 具有相同的文件内容但不同的 URL。现在这是一个问题，因为导航器假定文件不同并且需要缓存（由于 URL），而真正的缓存文件只有一个。

我有可能知道 URL 上的文件是否相同。

我如何使用标题在响应中指示这种可能性，并且导航器将只缓存一个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:45:20.583

这不可能。如果你想让你的文件即使在不同的浏览器上也能被正确缓存，它们需要有相同的 URL。

或者，您只能考虑 HTTP 重定向 301 或 307。

但无论如何，您都必须考虑如何继续检查文件是否保持相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:54:46.220

在您的服务器上使用重定向。如果命中第二个 URL，则重定向到第一个 URL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:55:39.807

假定不同的 URI 标识不同的资源。所以两者都将分别缓存。

如果您想表示资源实际上是由不同的 URI 标识的，请使用适当的[HTTP 重定向](https://www.rfc-editor.org/rfc/rfc2616#section-10.3)。

# android - minSdkVersion 是做什么用的？

> ID：12946813
> 
> 赞同：1
> 
> 时间：2012-10-18T03:52:20.087
> 
> 标签：android, android-emulator

关于`NetworkOnMainThreadException`，我做了一个这样的测试：我只安装`android-15`在我的eclipse中，我设置`uses-sdk android:minSdkVersion="7"`（注意它是`7`）在我的应用程序中，我建立了网络连接`Handler`，`it will not throw NetworkOnMainThreadException`; 但是当我更改为时`uses-sdk android:minSdkVersion="15"`，发生了异常！但是我没有android-7，我以为会用android-15。顺便提一句，`AVD is Android 4.0.3`

问题：`Does android-15 contain android-7 ?`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T03:53:45.490

答案是肯定的。如果您针对 SDK 版本 15 进行编程，则还包括 SDK 版本 7 的所有功能。

minSdkVersion 用于告诉 Google Play 商店安装您的应用程序至少需要哪个 Android 版本。

您应该使用`targetSdkVersion`来说明您正在使用哪个版本的 API 进行编程：

```
android:minSdkVersion="7"
android:targetSdkVersion="15" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:55:53.260

**安卓：m​​inSdkVersion**

一个整数，指定应用程序运行所需的最低 API 级别。如果系统的 API Level 低于此属性中指定的值，Android 系统将阻止用户安装应用程序。您应该始终声明此属性。

有关更多信息，请单击[此](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

# python - Python - 同时遍历两个列表，而不在每次迭代中都移到下一行

> ID：12946815
> 
> 赞同：1
> 
> 时间：2012-10-18T03:52:35.113
> 
> 标签：python, list, iteration

我环顾四周，找到了 itertools pacakge，但据我所知，没有一个函数能完全满足我的需要。我已经开始自己编写一个函数，我可以做到，但我想知道是否有人知道一个内置函数可以完成这个双列表迭代的全部或部分？

我想要做的是一次遍历两个列表，比较每个列表的值，作为比较的结果做一些事情，并且可能停留在一个列表的同一行，同时移动到第二个列表的下一行列表（基于比较结果）。这是一个例子：

```
ListA= [[1, 7, 3],
        [1, 12, 4],
        [1, 9, 5]]

ListB= [[2, 2, 3],
        [2, 2, 3],
        [2, 5, 4]] 
```

我想逐行浏览每个列表并比较最终位置的数字。如果它们相等，我想添加两个第二个数字。但我想继续添加它们，只要 ListB 中的第三个数字等于 ListA 中的第三个数字。这意味着 ListA 可能会保持在同一行，而 ListB 会向下移动一对（这就是 itertools 函数不起作用的原因，因为这些函数似乎都将每个列表的每一行串联在一起）。所以我希望输出看起来像这样：

```
Iteration 1 ListOut= [[9, 3]]

Iteration 2 ListOut= [[11,3]]

Iteration 3 ListOut= [[11,3], [17, 4]]

Iteration 4 ListOut= [[11,3], [17, 4],  [9, 5]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T04:10:56.127

你想做这样的事情：

```
listb_iter = iter(ListB)
item_b = next(listb_iter) #we're assuming that ListB as at least one item.
for item_a in ListA:
    if ...: #condition to move on to the next item in ListB
        try:
            item_b = next(listb_iter)
        except StopIteration:
            #went through all of ListB

    #other logic 
```

# css - 垂直布局以使用拉伸的中间组件填充窗口

> ID：12946816
> 
> 赞同：1
> 
> 时间：2012-10-18T03:52:41.837
> 
> 标签：css

我正在寻找一种方法来进行填充整个窗口的单列垂直布局。此布局包含三个组件：

*   标头（常量，但大小未知）
*   身体（可变尺寸，伸展填充）
*   页脚（常量，但大小未知）

在页眉/页脚固定且已知大小之前，我已经完成了布局，但我希望它们现在具有动态大小（基于内容）。灵活的盒子模型似乎是为了让这件事变得简单，但我不知道如何让它工作（这可能是由于浏览器的支持）。

我现在只需要一个针对 FireFox 的解决方案，绝对最新的版本就可以了（比如 18 或 19）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:53:21.950

```
<!doctype html>
<html lang="en">
  <head>
      <title>Header/Footer Vertical Centering Test</title>
      <style type="text/css">
      /* Set document height*/
      html, body { height:100%; }

      /* Set container height and context */ 
      #container { position:relative; min-height:100%; }

      /* Declare positioned children of container */
      #masthead, #footer { position:absolute; }

      /* Position masthead */
      #masthead { top:10px; }

      /* Position and layer footer */
      #footer { bottom:0; z-index: 2; }

      /* Set fluid height for footer */
      #footer { height:5%; }

      /* Set padding for content header placeholder */
      #header { padding-bottom: 10%; }

      /* Set fluid height and display for middle container */
      #middle { height:60%; display:table; padding-bottom: 5%; }

      /* Set display and vertically centered content */
      #vertcenter { display:table-cell; vertical-align: middle; }
      </style>
  </head>

  <body>

    <div id="container">
      <div id="header"></div>

      <div id="middle">
        <div id="vertcenter">
            Content
        </div>
      </div>

      <div id="masthead">
      header
      </div>

      <div id="footer">
      footer
      </div>
    </div>

  </body>

</html> 
```

# internet-explorer - 下拉菜单（子菜单）在 IE 中不可见

> ID：12946817
> 
> 赞同：1
> 
> 时间：2012-10-18T03:52:45.153
> 
> 标签：internet-explorer, drop-down-menu, submenu

我创建了一个下拉菜单，它在 Firefox 和 Chrome 中完美运行，但在 IE 中却不行。IE 中的一切看起来都不错，除了当我将鼠标放在“服务”选项卡上时，子菜单不会下拉。我包括下面的编码，任何帮助将不胜感激。

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>menubar</title>
<style type="text/css">
#div1 {
        background-color: #000;
    margin: 17px;
    width: 801px;
}
#div1 ul {
    margin: 0px;
    padding: 0px;
list-style-type: none;
}
#div1 ul li {
float: left;
position: relative;
}
#div1 ul li a {
line-height: 30px;
text-decoration: none;
background-color: #999999;
display: block;
height: 30px;
width: 155px;
color: #000;
text-align: center;
}
#div1 ul li a {
border-top-width: 1px;
border-right-width: 1px;
border-bottom-width: 1px;
border-left-width: 1px;
border-top-style: solid;
border-right-style: solid;
border-bottom-style: solid;
border-left-style: solid;
border-top-color: #000;
border-right-color: #555;
border-bottom-color: #555;
border-left-color: #000;
}
#div1 ul li :hover {
background-color: #CCC;
}
#div1 ul li ul {
position: absolute;
top: 31px;
visibility: hidden;
}
#div1 ul li:hover ul {
visibility: visible;
}
#div1 ul li ul li a {
border-top-width: 1px;
border-right-width: 1px;
border-bottom-width: 1px;
border-left-width: 1px;
border-top-style: solid;
border-right-style: solid;
border-bottom-style: solid;
border-left-style: solid;
border-top-color: #000;
border-bottom-color: #555;
}
#div1 ul li ul li a {
height: 30px;
width: 160px;
}
#div1 ul li ul li a {
background-color: #CCC;
}
#div1 ul li a {
font-size: 16px;
background-color: #999;
font-family: "Times New Roman", Times, serif;
font-weight: bold;
}
#div1 ul li ul li a {
background-color: #999;
}
</style>
</head>

<body>
<div id="div1">
<ul>
<li><a href="www.leads2rev.com">Home </a>
</li>
</ul>

<ul>
<li><a href="www.leads2rev.com">Services </a>
<ul>
<li><a href="www.leads2rev.com">Surveillance </a>
<li><a href="www.leads2rev.com">Background Check </a>
<li><a href="www.leads2rev.com">Location/Skiptrace </a>
<li><a href="www.leads2rev.com">Activity Check </a>
<li><a href="www.leads2rev.com">Special Investigations </a>
<li><a href="www.leads2rev.com">Medical Investigation </a>
</li>
</ul>
</li>
</ul>

<ul>
<li><a href="www.leads2rev.com">Assign A Case </a>
</li>
</ul>

<ul>
<li><a href="www.leads2rev.com">Contact Us </a>
</li>
</ul>

<ul>
<li><a href="www.leads2rev.com">Careers </a>
</li>
</ul>
</div>
</body>
</html> 
```

# html - 如何打电话 标签 CSS

> ID：12946818
> 
> 赞同：0
> 
> 时间：2012-10-18T03:52:50.760
> 
> 标签：html, css, wordpress

我有一个网站，其中的 html 代码如下：

```
<div id="navmenu"><a id="home" href="http://www.abc.com" ><span>HOME<span></a>
<a id="about" href="http://www.abc.com/about-us/"><span>ABOUT US</span></a>
<ul class="about-child">
           <li><a href="#">Hard Drives1</a></li>
           <li><a href="#">Hard Drives<2/a></li>
 </ul> 
```

我想调用这些 ul 和 li 标签来创建 CSS，但我不知道如何使用 CSS 设置 li 和 ul 的样式，因为我为 Home 和 About 使用了单独的 CSS 标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:59:26.903

如果您需要选择所有`<li>`标签，请使用以下命令：

```
li {... css rules ...} 
```

如果您需要选择 中的所有`<li>`标签`<ul class="about-child">`，请使用以下命令：

```
ul.about-child li {... css rules ...} 
```

如果您需要选择`<li>`任何标签内的所有`<ul>`标签，请使用以下命令：

```
ul li {... css rules ...} 
```

要包含**样式表**，您可以通过以下方式包含它`<link>`：

```
<link rel="stylesheet" href="style.css" /> 
```

或者通过在文档中嵌入样式表：

```
<style type="text/css">
    li {... css rules ...}
    ul.about-child li {... css rules ...}
    ul li {... css rules ...}
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T03:58:06.930

以 ul`ul.about-child { ... }` 为目标：以 li 为目标：`ul.about-child li { ... }`

如果这没有帮助，我无法在不了解您的问题的情况下提供任何更详细的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T04:00:07.260

您可以通过添加文档的链接 int 头来加载外部 css 文件：

```
<html>
  <head>
    ....
    <link href="yourcssfile.css" type="text/css" rel="stylesheet" /> 
```

或者您可以使用样式标签：

```
<style type="text/css">
  ... your css here ...
</style> 
```

这是您将编写的代码来设置这个 li 标签的样式

```
ul.about-child li {
   ... your css rules here...
} 
```

例子：

```
<style type="text/css">
ul.about-child li {
    list-style-type: disc;
    font-size:18px;
}
</style> 
```

# java - JTabbedPane 中添加的选项卡不显示

> ID：12946819
> 
> 赞同：0
> 
> 时间：2012-10-18T03:52:51.630
> 
> 标签：java, multithreading, swing, tabs, jtabbedpane

我有从 JPanel 扩展的 CPanel 扩展的**VTreePanel**类。该类有一个**JSplitPane**对象，该对象分为两个区域：左和右。左侧包含树形菜单选择对象。在右侧，它包含**JTabbedPane**对象。VTreePanel 类是这样的：

```
public final class VTreePanel extends CPanel
    implements ActionListener
{
    private JSplitPane centerSplitPane = new JSplitPane();

    private JTabbedPane tabbedPane;

    ...

    // GET method for the tabbedPane    
    public JTabbedPane getTabbedPane() {
        return tabbedPane;
    }

    // Constructor
    public VTreePanel(int WindowNo, boolean hasBar, boolean editable)
    {

        ...

        tabbedPane = new JTabbedPane();
        centerSplitPane.add(treePart, JSplitPane.LEFT);
        centerSplitPane.add(tabbedPane, JSplitPane.RIGHT);  // Look at this

        ...
    }

} 
```

在构造函数中，我将树选择 (treePart) 和 JTabbedPane 对象 ( **tabbedPane** ) 添加到 JSplitPane 对象 (centerSplitPane) 中。我还没有在 tabbedPane 中添加任何选项卡。看下面的截图：

[http://i45.tinypic.com/2v3j0nl.jpg](http://i45.tinypic.com/2v3j0nl.jpg)

那么当用户单击其中一个菜单时如何添加选项卡？

我有**AMenu**类，它实现了 PropertyChangeListener，当用户单击菜单时触发 propertyChange 方法：

```
public final class AMenu extends CFrame
    implements ActionListener, PropertyChangeListener, ChangeListener
{

    private VTreePanel treePanel = null;    // this is the VTreePanel object

    ...

    public void propertyChange(PropertyChangeEvent e)
    {
        ...

        // Here I pass the VTreePanel object as parameter to AMenuStartItem thread object
        (new AMenuStartItem(cmd, true, sta, this, treePanel)).start();
    }

} 
```

您可以看到我有 VTreePanel 对象 ( **treePanel** )，并且我将 VTreePanel 对象作为参数传递给**AMenuStartItem**线程。AMenuStartItem 包含执行在 JTabbedPane 中添加 Tab 的逻辑（请记住，JTabbedPane 对象 (tabbedPane) 在 VTreePanel 中）。

这是**AMenuStartItem**线程类：

```
public class AMenuStartItem extends Thread implements ActionListener
{
    private VTreePanel m_vtreePanel;

    public AMenuStartItem (int ID, boolean isMenu, String name, AMenu menu, VTreePanel vtreepanel)
    {
        ...

        m_vtreePanel = vtreepanel;  // save the VTreePanel object
    }

    // The thread method that executed when thread is started
    public void run()
    {
        ...

        startWindow(0, cmd);

        ...
    }

    private void startWindow(int AD_Workbench_ID, int AD_Window_ID)
    {
        ...

        // Here I perform adding new tab
        m_vtreePanel.getTabbedPane().addTab(frame.getTitle(), frame.getAPanel());

        ...
    }

} 
```

因此，**getTabbedPane()**返回了 JTabbedPane 对象并执行了 addTab() 方法，但根本没有显示任何选项卡。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:37:16.893

与 UI 的所有交互都必须通过事件调度线程完成，没有例外......

```
public class AMenuStartItem extends Thread implements ActionListener
{
    private VTreePanel m_vtreePanel;

    public AMenuStartItem (int ID, boolean isMenu, String name, AMenu menu, VTreePanel vtreepanel)
    {
        ...

        m_vtreePanel = vtreepanel;  // save the VTreePanel object
    }

    // The thread method that executed when thread is started
    public void run()
    {
        ...

        startWindow(0, cmd);

        ...
    }

    private void startWindow(final int AD_Workbench_ID, final int AD_Window_ID)
    {
        ...

        if (EventQueue.isDispatchingThread()) {
            // This is safe, we're in the EDT
            m_vtreePanel.getTabbedPane().addTab(frame.getTitle(), frame.getAPanel());
            m_vtreePanel.getTabbedPane().invalidate();
            m_vtreePanel.getTabbedPane().repaint();
        } else {
            // This is unsafe, we need to resync with the EDT
            SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    // Here I perform adding new tab
                    m_vtreePanel.getTabbedPane().addTab(frame.getTitle(), frame.getAPanel());
                    m_vtreePanel.getTabbedPane().invalidate();
                    m_vtreePanel.getTabbedPane().repaint();

                }
            });
        }

        ...
    }

} 
```

# ruby-on-rails-3 - 表单rails 3中的多个按钮（不提交）

> ID：12946823
> 
> 赞同：0
> 
> 时间：2012-10-18T03:53:31.100
> 
> 标签：ruby-on-rails-3, button, form-for

这是一个笼统的问题。我不是要别人为我写任何代码，我只是不能完全理解这一点。

我知道 f.button 但据我所知，它只是充当提交按钮并刷新事物。我也尝试过 button_tag，但我也无法正常工作。

我有一个用户用来提交信息的评级表（duh）。我有 3 个不同的类别，用户可以评价“好”“好”“坏”。“好”、“好”、“坏”我想成为用户可以点击的按钮，然后一旦提交该表单，这个评级就会进入类别旁边的数据库。每次用户提交评分表时，他们都会将所有 3 个类别评分为“好”、“好”、“差”。

一个评分属于一个用户，一个用户有_many 个评分。

示例当有人提交评分表时，我希望它看起来像这样：

```
ID  Category 1      Category 2     Category 3    User ID
1    Good              Ok             Good         1 
```

这有意义吗？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:46:41.610

jQuery UI 为标准单选按钮提供了一些包装，使它们看起来像一个拆分为多个部分的按钮。请参阅按钮演示的单选按钮部分：

> [http://jqueryui.com/button/#radio](http://jqueryui.com/button/#radio)

# django - 如何在 Django 中添加新语言？Django 不支持我的语言“维吾尔语”或“维吾尔语”

> ID：12946830
> 
> 赞同：16
> 
> 时间：2012-10-18T03:53:46.793
> 
> 标签：django, locale

如何在 Django 中添加新语言？Django 不支持我的语言“维吾尔语”或“维吾尔语”。

我可以在我的项目中添加新的语言区域设置文件并使用它吗？例如：zh_UG

Django 不支持这种语言。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-11-28T11:30:36.977

**向您的 Django 应用程序添加不可用的语言**

维吾尔语 ئۇيغۇر تىلى 的 ISO 语言代码是“ug”。

在您的**settings.py 中**：

```
from django.conf import global_settings

gettext_noop = lambda s: s

LANGUAGES = (
       ('ug', gettext_noop('Uighur')),
)

EXTRA_LANG_INFO = {
    'ug': {
        'bidi': True, # right-to-left
        'code': 'ug',
        'name': 'Uighur',
        'name_local': u'\u0626\u06C7\u064A\u063A\u06C7\u0631 \u062A\u0649\u0644\u0649', #unicode codepoints here
    },
}

# Add custom languages not provided by Django
import django.conf.locale
LANG_INFO = dict(django.conf.locale.LANG_INFO, **EXTRA_LANG_INFO)
django.conf.locale.LANG_INFO = LANG_INFO

# Languages using BiDi (right-to-left) layout
LANGUAGES_BIDI = global_settings.LANGUAGES_BIDI + ["ug"] 
```

和：

```
manage.py makemessages -l ug
manage.py compilemessages 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-26T16:22:14.830

基于laffuste的回答。第一步，在 settings.py 中添加语言定义：

```
EXTRA_LANG_INFO = {
    'ms': {
        'bidi': False, # right-to-left
        'code': 'ms',
        'name': 'Bahasa Melayu',
        'name_local': u'Bahasa Melayu', #unicode codepoints here
    },
}

# Add custom languages not provided by Django
import django.conf.locale
from django.conf import global_settings
LANG_INFO = dict(django.conf.locale.LANG_INFO.items() + EXTRA_LANG_INFO.items())
django.conf.locale.LANG_INFO = LANG_INFO

# Languages using BiDi (right-to-left) layout
global_settings.LANGUAGES = global_settings.LANGUAGES + (("ms",'Bahasa Melayu'),) 
```

第二步，在settings.py中添加语言环境：

```
import os

PACKAGE_ROOT = os.path.abspath(os.path.dirname(__file__))
LOCALE_PATHS = (
    os.path.join(PACKAGE_ROOT, 'locale'),
) 
```

第三步，在语言环境目录中添加语言环境定义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-23T16:19:16.170

如果有人遇到这种情况，并且将使用已接受的答案（也请检查其评论）并且仍然会重定向到 /en/ 而不是额外的语言 - 您需要为该语言环境创建 .mo 文件。至少是个假人。

Django 通过检查语言是否可以加载 .mo 文件来检查语言是否有效。标准语言没有问题，因为 Django 附带了一堆标准语言，但对于您的自定义语言，它不存在。

我希望这会节省你的时间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T11:42:15.413

在你的 settings.py 添加

```
gettext = lambda s: s

语言 = (
    ('zh_UG', gettext('维吾尔语')),
    ('en', gettext('English')),
)
USE_I18N = 真

```

跑

```
manage.py makemessages -l zh_UG

```

创建语言文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-20T13:22:21.293

```
# add Kyrgyz lang 
###########################################################
from django.conf import global_settings
gettext = lambda s: s
LANGUAGES = (
    ('ru', gettext('Russia')),
    ('ky', gettext('Kyrgyz')),
)
EXTRA_LANG_INFO = {
    'ky': {
        'bidi': False,
        'code': 'ky',
        'name': 'Kyrgyz',
        'name_local': u"Кыргызча",
    },
}

import django.conf.locale
from django.conf import global_settings
import django.conf.locale
LANG_INFO = dict(django.conf.locale.LANG_INFO, **EXTRA_LANG_INFO)
django.conf.locale.LANG_INFO = LANG_INFO
global_settings.LANGUAGES = global_settings.LANGUAGES + [("ky", 'Кыргызча')]

import os
PACKAGE_ROOT = os.path.abspath(os.path.dirname(__file__))
LOCALE_PATHS = (
    os.path.join(BASE_DIR, 'locale'),
)
########################################################### 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-23T09:37:11.560

只是想补充一点，无论您是否为文件添加了一些翻译，您都需要运行以下命令：

```
python manage.py makemessages -l tj
python manage.py compilemessages 
```

注意这里的 tj 是新添加的语言

# c# - 在 asp.net 文件中使用 asp.net 代码（Response.write 由另一个 aspx）

> ID：12946831
> 
> 赞同：0
> 
> 时间：2012-10-18T03:53:48.577
> 
> 标签：c#, asp.net

我有一个名为 header.aspx 的 asp.net 文件，它是 index.aspx 的一部分，这是 index.aspx 的代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="index.aspx.cs" Inherits="index" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
    </head>
    <body>
    <% Response.WriteFile("header.aspx"); %>
    <% Response.WriteFile("body.aspx"); %>
    <form runat="server">
    <%= content %>
    </form>
    </body>
    </html> 
```

在 header.aspx 中：

```
 <style type="text/css">
        .style1
        {
            width: 100%;
        }
    </style>
    <form id="form1" runat="server">
<table border="0" cellpadding="0" cellspacing="0" class="style1">
    <tr>
        <td><img src="images/Banner.jpg" width="990" height="150" /></td>
    </tr>
    <tr>
        <td>
            <img src="images/HomeTopMenu.jpg" width="140" height="30" /><img src="images/AboutTopMenu.jpg" width="140" height="30" /><img src="images/PublicationTopMenu.jpg" width="195" height="30" /><img src="images/FormTopMenu.jpg" width="205" height="30" /><img src="images/LinkTopMenu.jpg" width="160" height="30" /><img src="images/ContactTopMenu.jpg" width="150" height="30" />
            <% Response.Write("abc");  %>
        </td>
    </tr>
</table>
    </form> 
```

当我运行 index.aspx 文件时， <% Response.Write("abc"); %> 显示为纯文本...

如何在 header.aspx 中使用 asp.net 代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:08:35.590

而不是使用`Response.WriteFile("header.aspx")`，尝试使用`Server.Execute("header.aspx")`。这将实际运行该`header.aspx`文件。使用 Response.WriteFile 获取文件的实际内容，并且不执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:09:21.650

看起来您正在尝试在这里实现母版页概念。ASP.Net 提供了一种更简单的方法来执行此操作，以下链接可能会有所帮助：

[http://msdn.microsoft.com/en-us/library/wtxbf3hh(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/wtxbf3hh(v=vs.100).aspx)

# c# - 无法分配给属性“System.Windows.FrameworkElement.Style”（XamlParseException 未处理：Windows Phone SDK）

> ID：12946833
> 
> 赞同：2
> 
> 时间：2012-10-18T03:53:54.783
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我正在使用 SDK 7.1 为 Windows Phone 开发一个简单的应用程序，但出现错误“

> XamlParseException，无法分配给属性“System.Windows.FrameworkElement.Style”，因为“System.Windows.Media.Color”类型无法分配给“System.Windows.Style”类型。”

尝试在 Windows Phone 模拟器上运行应用程序时。我是 WP 新手，如果能得到快速回复，我将不胜感激。

截屏： ![截屏](../Images/18ba5291c82591ea2aad386b9c758d6a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:24:18.157

问题出在 MainPage.xaml 的第 22 行。

正如异常告诉我们的那样：您尝试将 设置`Color`为`UIElement's`Style 属性。

尝试更改`Style`为`Background`.

```
<TextBlock Background="{StaticResource PhoneBorderColor}"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-28T17:54:10.133

我必须分享我在这个问题上的经验......当我编写第一个应用程序时，我也遇到了这个异常你只是看看

```
 shell:SystemTray.IsVisible="True" Name="MiniBrowser"> 
```

您的应用程序中的此代码..您应该明确命名应用程序，这样它不会产生名称冲突，只需继续这个链接，它将更有帮助...... [http://msdn.microsoft.com/en-us/library /windowsphone/develop/ff402526(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402526(v=vs.105).aspx)

# c# - C# 生成类似于 Python 的 UUID5 的 GUID

> ID：12946834
> 
> 赞同：3
> 
> 时间：2012-10-18T03:53:57.763
> 
> 标签：c#, python, guid

> **可能重复：**
> [如何创建确定性指南](https://stackoverflow.com/questions/2642141/how-to-create-deterministic-guids)

使用 C#，我想使用命名空间 UUID 和名称的 SHA-1 哈希生成 GUID，就像 Python 的 UUID5

```
uuid.uuid5(uuid.NAMESPACE_DNS, 'python.org') 
```

[http://docs.python.org/library/uuid.html#example](http://docs.python.org/library/uuid.html#example)

# laravel - 指令“allow_call_time_pass_reference”警告

> ID：12946835
> 
> 赞同：15
> 
> 时间：2012-10-18T03:54:08.993
> 
> 标签：laravel

我最近开始在我的本地开发环境（MAMP，使用 PHP 5.4.3）中开发一个 Laravel 项目，并且对似乎没有记录的奇怪事件感到有些恼火。

偶尔，当我尝试加载页面时，我会看到一个未处理的异常屏幕，并显示消息“指令 'allow_call_time_pass_reference' 在 PHP 中不再可用。” （列出的位置是“第 0 行上的未知”。）如果我重新加载页面一次或两次，它会按预期工作。但问题很快又回来了。自从我第一次运行 Laravel 以来，它就一直在这样做，甚至在我添加任何我自己的控制器或模型之前。

我尝试在 PHP 配置中注释掉 allow_call_time_pass_reference ，并明确将其设置为关闭（当然，在进行更改后重新启动服务器）但间歇性警告继续出现。我认为这对生产来说没什么大不了的，因为显示错误的设置会关闭，但是在本地处理项目时有点烦人。

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-18T17:21:08.017

根据[PHP 5.4 Backward Incompatible Changes](http://php.net/manual/en/migration54.incompatible.php)，Call time pass by references 已被删除。现在因为你得到的错误是指令和第 0 行，我相信这是你的 php.ini 文件的问题，我确定你是否打开它并注释掉表明`allow_call_time_pass_reference`错误将消失的行。希望有帮助！

Ps 如果你不确定你的 php.ini 文件在哪里，你可以通过加载一个调用的页面`phpinfo()`然后搜索来找到它`.ini`

# performance - 如何在特殊条件下证明 Quicksort 是 O(n*lg n)？

> ID：12946837
> 
> 赞同：0
> 
> 时间：2012-10-18T03:54:31.910
> 
> 标签：performance, big-o, quicksort

这是我的数据结构作业中的问题之一：

假设我们有一个线性时间过程，它保证为快速排序找到一个枢轴元素，使得至少 1% 的数组小于或等于枢轴，至少 1% 大于或等于枢轴。证明快速排序将具有最坏情况复杂度 O(n lg n)。

我知道快速排序的最坏情况复杂度一般是 O(n^2)。I read that this happens when all the values of the pivot chosen is either the largest or smallest of the taken set.

我的猜测是，由于给定的条件是至少 1% 的数组大于且至少 1% 的数组小于枢轴，这消除了枢轴是集合中最小或最大元素的情况. 因此它永远不可能是 O(n^2)

这听起来正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T20:33:31.400

这类问题的主要关键是表明只有 O(log(n)) 步。

理想的快速排序递归是

```
T(N) = 2T(N/2) + O(n) 
```

我们可以很容易地通过主定理证明是 O(NlogN)。

O(n) 项是递归树每一层的一个因子；此外，在理想情况下，所有元素都必须在每个级别进行处理；尽管从技术上讲，大多数元素会使其在递归树中比其他元素更远，但我们可以假设不会出现“最坏情况”，并且所有元素都会在每个级别进行处理。因此，我们所要做的就是证明在您给定的假设下，递归树中最多有 O(log(N)) 个步骤。

给定您的假设，快速排序递归：

```
T(N) = T(N/100) + T(99N/100) + O(n). 
```

我们可以假设 WLOG，一旦递归树的单个分支中有 99 个或更少的元素，最多只会发生恒定数量的操作来对它们进行排序（因此，O(1) * O(n) = O(n ) 操作发生在底层；递归树既不收缩也不增长）。

那么，我们如何证明整个树的最大步数呢？好吧，我们追随最不幸的元素！假设我们从 N 个元素开始。鉴于我们的假设，应该有 50 到 99 个元素构成我们实际关心的递归树级别的最后一步的最大分支。他们收到的最坏情况下的操作都是 99% 的一部分。

所以，我们最多有 99 个元素由 X 次迭代形成，被削减 1%。这应该看起来像您以前应该见过的不同的递归树，即“几何递减”树。至于数学：

```
99 = N*(.99)^X
99/N = (1/.99)^-X
(1/.99)^X = N/99
log_(1/.99) (1/.99)^X = log_(1/.99) N/99
X = log_(1/.99) N/99 
```

如您所见，右边的项是 O(log(N))。所以这是递归的最大层数，每层最多做 O(N) 的工作，所以总的工作是 O(Nlog(N))。

我不确定您是否想要比这更严格（从头开始解释真正的递归证明是很多工作），但这对于大多数大学来说都是可以接受的......

# java - 关于构造函数的奇怪 NullPointerException

> ID：12946841
> 
> 赞同：0
> 
> 时间：2012-10-18T03:54:43.443
> 
> 标签：java, swing, constructor, nullpointerexception

我正在开发一个聊天客户端/服务器。在客户端，我有一个名为 的类`ClientGui`和一个名为`InputPane`extends的子类`JPanel`。`ClientGui`处理与 GUI 相关的客户端事物的主要部分，但`InputPane`只处理来自用户的输入。

`NullPointerException`尝试在课堂上的`InputPane`对象中设置字体时，我总是感到奇怪。`ClientGui`这是我的一些代码：

```
public ClientGui() {
    // configure JFrame

    this.serverOutput = new JTextPane();
    this.input = new InputPane();

    // configure JScrollPane

    // configure other objects

    // various set up methods

    frame.add(scrollPane, BorderLayout.CENTER);
    frame.add(input, BorderLayout.PAGE_END);
} 
```

如您所见，`input`对象正在被初始化。这是它的构造函数：

```
public InputPane() {
        this.inputField = new JTextField();
        this.send = new JButton("Send");

        // set size

        this.setFont(getFont());

        // various methods

        // add components
    } 
```

当我尝试设置字体时，它会抛出一个`NullPointerException`. 通过各种`println()`电话，我能够发现`inputField`并且`send`是​​空的。我尝试将`println()`方法放入构造函数中，但没有一个被调用（和/或打印）。

我对此感到非常困惑。如果有人能给出解释，那将有很大帮助。谢谢你。

**编辑**：这里是 StackTrace：

```
Exception in thread "main" java.lang.NullPointerException
at net.dean.tcp.client.gui.ClientGui$InputPane.setFont(ClientGui.java:518)
at javax.swing.LookAndFeel.installColorsAndFont(Unknown Source)
at javax.swing.plaf.basic.BasicPanelUI.installDefaults(Unknown Source)
at javax.swing.plaf.basic.BasicPanelUI.installUI(Unknown Source)
at javax.swing.JComponent.setUI(Unknown Source)
at javax.swing.JPanel.setUI(Unknown Source)
at javax.swing.JPanel.updateUI(Unknown Source)
at javax.swing.JPanel.<init>(Unknown Source)
at javax.swing.JPanel.<init>(Unknown Source)
at javax.swing.JPanel.<init>(Unknown Source)
at net.dean.tcp.client.gui.ClientGui$InputPane.<init>(ClientGui.java:496)
at net.dean.tcp.client.gui.ClientGui.<init>(ClientGui.java:138)
at net.dean.tcp.client.gui.ClientGui.main(ClientGui.java:44) 
```

**编辑2**：这是`ClientGui$InputPane.setFont(Font)`方法：

```
public void setFont(Font f) {
        super.setFont(f);
        inputField.setFont(f);
        send.setFont(f);

        Dimension size = getSizeFromFont(); 
        // Dimension based on getFont()'s height

        send.setPreferredSize(size);
        inputField.setPreferredSize(size);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T05:06:35.093

问题是 Swing 框架`setFont`作为`JPanel`构造函数的一部分进行调用。由于 this 在构造函数的主体之前执行，因此在初始化和成员变量`InputPane.setFont`之前被调用。我认为，这里唯一干净的解决方案是在内部进行明确的空检查：`send``inputField``InputPane.setFont`

```
public void setFont(Font f) {
    super.setFont(f);
    if (inputField != null) {
        inputField.setFont(f);
    }
    if (send != null) {
        send.setFont(f);
    }

    Dimension size = getSizeFromFont(); 
    // Dimension based on getFont()'s height

    if (send != null) {
        send.setPreferredSize(size);
    }
    if (inputField != null) {
        inputField.setPreferredSize(size);
    }
} 
```

（您可能可以重新组织您的调用以减少空检查的数量。）

顺便说一句，这是一个很好的例子，说明为什么[从构造函数调用可覆盖的方法是不好的做法](https://stackoverflow.com/questions/3404301/whats-wrong-with-overridable-method-calls-in-constructors)。但是 Swing 就是这样，抱怨它没有任何好处，所以我就到此为止。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:25:49.683

当您使用设置字体`setFont`并从`getFont`方法中获取并设置它时。这更有可能`getFont()`返回 NULL，这可能就是原因。同样在我看来，除非您明确地将它们设为 NULL，否则对象中`inputField`的`send`对象都不能为 NULL 。`inputPane`

# python - 无法将类作为具有一对一关系的属性？

> ID：12946842
> 
> 赞同：0
> 
> 时间：2012-10-18T03:55:06.857
> 
> 标签：python, django, one-to-one, twython

我是 Python/Django 的新手，所以如果我忽略了一些简单的错误，请原谅我。我正在尝试使用 Twython 并在[这里复制代码](https://github.com/ryanmcgrath/twython-django/blob/master/twython_django_oauth/views.py)

我似乎无法使用这样的点语法获得 TwitterProfile：

```
user = request.user.twitterprofile 
```

它给了我错误：

```
DoesNotExist at /social/user_timeline/
TwitterProfile matching query does not exist. 
```

但如果我得到这样的个人资料：

```
user = TwitterProfile.objects.get(user = u) 
```

它似乎工作正常......花了几个小时才弄清楚......

我还必须在 TwitterProfile 类中为用户添加一个 related_name：

```
user = models.OneToOneField(User, related_name='twitteruser') 
```

知道为什么我不能像那样访问 TwitterProfile 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T06:27:13.667

首先，您需要`AUTH_PROFILE_MODULE`在 settings.py 中定义您的：

```
from twython_django_oauth.models import TwitterProfile

AUTH_PROFILE_MODULE = TwitterProfile 
```

然后，您可以通过请求访问您的个人资料：

```
request.user.get_profile() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T06:29:50.217

`related_name`定义链接模型上的属性名称，因此您可以执行以下操作：

```
user = request.user.twitteruser 
```

# javascript - 显示 map_canvas div 复选框

> ID：12946845
> 
> 赞同：0
> 
> 时间：2012-10-18T03:55:27.267
> 
> 标签：javascript, html, css, google-maps-api-3

我想根据复选框选择显示谷歌地图画布，但是当我点击它时，我看不到地图，它显示地图不正确，并且“地图功能”也不起作用..... css 链接设置 de map_canvas div 大小，如果我删除此显示功能地图效果完美。这是代码：

```
 <html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="utf-8">

<link href="https://developers.google.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=drawing">   </script>

<script type="text/javascript" src="../jquery-1.2.1.pack.js"></script>

<script type="text/javascript">

function lookup(inputString) {

    if(inputString.length == 0) {

        // Hide the suggestion box.

        $('#suggestions').hide();

    } else {

        $.post("do_search.php", {queryString: ""+inputString+""}, 
function(data){

            if(data.length >0) {
                        alert(data);
                $('#suggestions').show();
                $('#autoSuggestionsList').html(data);
            }
        });
}

} // lookup

//alert(queryString);

</script>

<script>
  function initialize() {
    var mapOptions = {
       center: new google.maps.LatLng(-35.48833, -62.97528),
      zoom: 7,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map = new google.maps.Map(document.getElementById('map_canvas'),
      mapOptions);

    var drawingManager = new google.maps.drawing.DrawingManager({
      drawingMode: google.maps.drawing.OverlayType.MARKER,
      drawingControl: true,
      drawingControlOptions: {
        position: google.maps.ControlPosition.TOP_CENTER,
        drawingModes: [
          google.maps.drawing.OverlayType.POLYGON
        ]
      },
      markerOptions: {
        icon: 'images/beachflag.png'
      },
      circleOptions: {
        fillColor: '#ffff00',
        fillOpacity: 1,
        strokeWeight: 5,
        clickable: false,
        editable: true,
        zIndex: 1
      }
    });
    drawingManager.setMap(map);
    google.maps.event.addListener(drawingManager, 'polygoncomplete',     function(polygon) {
        //alert('Poligono cerrado');

        var coordinates = "";

        var path = polygon.getPath();

        for (var i = 0; i < path.getLength(); i++)
            coordinates += path.getAt(i) + ",";

        //alert(coordinates);
        lookup(coordinates);

        drawingManager.drawingControlOptions.drawingModes = [];
        drawingManager.drawingControl = false;
        drawingManager.setMap(map);

    });
  }

  google.maps.event.addDomListener(window, 'load', initialize);
 </script>
<script>
function fnchecked(blnchecked)
{
if(blnchecked)
{
document.getElementById("map_canvas").style.display = "";
}
else
{
document.getElementById("map_canvas").style.display = "none";
}

}
</script>
</head>
<body>
<input type="checkbox" name="fldcheckbox" id="fldcheckbox"   onclick="fnchecked(this.checked);"/>mapa
<div id="map_canvas" style="display:none;">
    </div>
</body> 
```

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:06:45.057

```
 function initialize() {
        var mapOptions = {
           center: new google.maps.LatLng(-35.48833, -62.97528),
          zoom: 7,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById('map_canvas'),
          mapOptions);

        var drawingManager = new google.maps.drawing.DrawingManager({
          drawingMode: google.maps.drawing.OverlayType.MARKER,
          drawingControl: true,
          drawingControlOptions: {
            position: google.maps.ControlPosition.TOP_CENTER,
            drawingModes: [
              google.maps.drawing.OverlayType.POLYGON
            ]
          },
          markerOptions: {
            icon: 'images/beachflag.png'
          },
          circleOptions: {
            fillColor: '#ffff00',
            fillOpacity: 1,
            strokeWeight: 5,
            clickable: true,
            editable: true,
            zIndex: 1
          }
        });
        drawingManager.setMap(map);
        google.maps.event.addListener(drawingManager, 'polygoncomplete',    
 function(polygon) {
            //alert('Poligono cerrado');

            var coordinates = "";

            var path = polygon.getPath();

            for (var i = 0; i < path.getLength(); i++)
                coordinates += path.getAt(i) + ",";

            //alert(coordinates);
            lookup(coordinates);

            drawingManager.drawingControlOptions.drawingModes = [];
            drawingManager.drawingControl = false;
            drawingManager.setMap(map);

        });
      }

     </script>
    <script>
    function fnchecked(blnchecked)
    {
    if(blnchecked)
    {
        document.getElementById("map_canvas").style.display = "block";
    initialize();
    }
    else
    {
    document.getElementById("map_canvas").style.display = "none";
    }

    }
    </script> 
```

像这样更改您的代码

# macos - Applescript 根据文件日期复制较新的文件

> ID：12946846
> 
> 赞同：2
> 
> 时间：2012-10-18T03:55:30.023
> 
> 标签：macos, applescript

我还没有看到这个具体的答案，特别是在根据日期复制文件（例如，不复制同一个文件两次）和运行脚本时，比如每小时一次。

而且，我是 AppleScript 新手。因此，代码可能充满了错误。但是，你明白我要做什么：

```
on idle
    Tell application "Finder"

    set a to folder ":Volumes:G_Drive Mini:source"
    set b to folder ":Volumes:MarkCapsule:destination"
    if dateOfFile > currentDate then
        move file of a to b
    end if
    return 3600

    end tell
end idle 
```

我不知道如何`if dateOfFile < currentDate then`工作。其余的，我想，我可以弄清楚。

任何人都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:50:15.300

这可以通过两个包含日期的变量来完成。

该脚本复制创建日期在这两个日期之间的文件。

这两个日期之间的范围总是大约一个小时，但在脚本第一次运行时没有范围，因为这两个日期之间的差异只有几秒钟。

```
property a : "Volumes:G_Drive Mini:source" as alias
property b : "Volumes:MarkCapsule:destination" as alias
property lastCopy : current date

on idle
    set currDate to current date
    with timeout of 500 seconds
        tell application "Finder" to ¬
            move (files of a whose creation date < currDate and creation date ≥ lastCopy) to b
    end timeout
    copy currDate to lastCopy
    return 3600
end idle 
```

# python - 在 Windows 中链接库

> ID：12946852
> 
> 赞同：2
> 
> 时间：2012-10-18T03:56:09.803
> 
> 标签：python, c, gcc, dll, cython

我很难找到有关如何在 Windows 中简单地链接库的信息。

Linux 似乎有这些可爱的 gcc 选项（来自[这里](http://technozeal.wordpress.com/2011/03/18/writing-and-compiling-c-program-using-custom-library/)）

```
gcc MadgwickAHRS.c -o MadgwickAHRS 
```

而我必须在 Windows 中使用这样的东西（从[这里](http://www.mingw.org/wiki/sampleDLL)）：

```
gcc -c -DBUILDING_EXAMPLE_DLL  MadgwickAHRS.c
gcc -shared -o MadgwickAHRS.dll MadgwickAHRS.o -l,--out-implib,MadgwickAHRS.a 
```

第一个给了我这个错误：

> c:/mingw/bin/../lib/gcc/mingw32/4.5.2/../../../libmingw32.a(main.o):main.c:(.text+0xd2): 未定义参考“WinMain@16”

第二个，这个错误：

> gcc.exe: MadgwickAHRS.a: 没有这样的文件或目录

（我不知道我应该如何`.a`根据给出的说明制作文件）。我从来没有能够正确链接库，我一直在使用`#include "file.c"`(that has a `#include "file.h"`) 而不是`#include "file.h"`仅仅因为它有效。但我想学习“正确”的方法，看看我的 Cython 代码是如何覆盖我的 .c 代码的……我想是时候尝试别的了。

如果你想帮助我解决我的 Cython/numpy 问题/告诉我它永远不会起作用，我也会附上它。我的代码还没有得到很好的注释/编写，所以就是这样......但它应该显示我正在尝试使用我的新链接库/共享对象事物的最基本想法。

我似乎无法找到粘贴代码的好方法，所以我只从 pastebin 中包含它。这主要是从他的网站上获取的 Madgwick 的作品（链接是代码）。

以下是 pastebin“链接”：

[MadgwickAHRS.c](http://pastebin.com/bvxR6rWC)

[MadgwickAHRS.h](http://pastebin.com/ir54PA6k)

[MadgwickAHRS.pyx](http://pastebin.com/Ba35napB)

[MadgwickAHRS.pxd](http://pastebin.com/GUMPHz7m)

[安装程序.py](http://pastebin.com/VqzA8Ve9)

GCC 版本 4.5.2

Windows 7的

蟒蛇2.6

编辑：

我试过了

```
gcc -shared MadgwickAHRS.c -o MadgwickAHRS.o 
```

得到了我的 MadgwickAHRS.o，写了一个快速的 main.c

```
#include "MadgwickAHRS.h"
int main (void) {
    MadgwickAHRSupdate(0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0);
    MadgwickAHRSupdateIMU(0.0,0.0,0.0,0.0,0.0,0.0);
    return 0;
} 
```

然后运行这个

```
gcc -c main.c  -o main.o 
```

然后链接它们

```
gcc main.o MadgwickAHRS.o -lm -o main 
```

得到我的exe并运行它没有错误。在继续之前还有什么我应该知道的吗？感谢您的答复。:)

编辑：感谢您的评论，我最终获得了工作链接。我用了

```
gcc -shared MadgwickAHRS.c -o MadgwickAHRS.o 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:54:41.053

谢谢尼克拉斯 R

```
gcc -shared MadgwickAHRS.c -o MadgwickAHRS.o 
```

创建我需要的 .o 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:30:48.433

我认为您应该指定您正在构建控制台应用程序。看来您编译为窗口应用程序。尝试找出如何更改项目的类型。WinMain - 是 Windows 应用程序的入口函数。可能这个标志会帮助你*--subsystem,console*

# jquery - jQuery Slide Out 选项卡重叠

> ID：12946853
> 
> 赞同：1
> 
> 时间：2012-10-18T03:56:11.993
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用来自[http://www.building58.com/examples/tabSlideOut.html](http://www.building58.com/examples/tabSlideOut.html)的 jQuery 插件，但问题是我在页面上的几个图标在单击时与 jQuery 滑块重叠。选项卡完美滑出，但随后与页面上的内容重叠。有谁知道如何解决重叠问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:59:28.123

您是否为选项卡设置了 z-index？可以设置在 1000 左右，所以不会重叠

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:02:20.793

假设您没有`z-index`在任何可能重叠的元素上设置集合，则在 dom 树中向上移动滑块，因为项目自上而下呈现，或者将 a 设置`z-index`为高于滑块上可能与其重叠的任何元素。

# .net - WPF Page NavigationService - 如何在执行页面事件之前完全加载 UI

> ID：12946854
> 
> 赞同：1
> 
> 时间：2012-10-18T03:56:12.503
> 
> 标签：.net, wpf

我有一个使用 WPF + 页面导航的应用程序。应用程序和流程运行良好，不是问题。但是最近在做一些测试的时候，发现代码中有如下行为。

我用过`NavigationServices.Navigate(new Class())`；

当我触发此功能时，页面确实可以正确导航，但它甚至在完全加载页面之前执行某些事件。

例子：

在`InitializeComponent();`我启用了一个单选按钮并且这个单选按钮启用了事件检查之后，在类构造函数下和下一行。因此，基于此，即使在 UI 完全加载到框架中之前，逻辑也会首先执行。

我的问题：如何停止一段时间内的所有事件并确保 UI 已完全加载，然后事件触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:59:11.437

使用[`Window.Loaded`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.loaded.aspx)事件；一旦所有 UI 组件都准备好就会触发。

> 当元素布局、渲染并准备好交互时发生。

```
public MyWindow() 
{
    InitializeComponent();
    this.Loaded += MyWindow_Loaded;
}

private void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    // initialization stuff ...
} 
```

# ruby-on-rails - 如何在 Rails 中运行 scheduler.rake 文件？

> ID：12946856
> 
> 赞同：-1
> 
> 时间：2012-10-18T03:56:17.463
> 
> 标签：ruby-on-rails, ruby, cron, rake

我是 Rails 领域的新手。刚从头开始用rails自己完成了我的第一个项目。而且，现在我必须从事由其他人完成的第二个项目。

在这个项目中，/lib/tasks 目录下有一个名为 scheduler.rake 的文件。

据我了解，它被用于 cron 工作。我需要对此项目进行一些修改并添加一些新功能。所以，我需要运行这个 scheduler.rake 文件并且必须了解它是如何工作的。谁能帮助我如何在 Rails 中运行这样的 rake 调度程序以及它是如何工作的？任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:45:07.107

lib/tasks 中的所有任务都可以通过以下命令列出：

```
rake -T 
```

如果您没有在响应列表中看到您的命令，那么它的格式不正确或没有描述。所以你需要调查你的 rake 文件。Rake 任务文件具有类似的结构，例如：

```
namespace :some_task do

  task :do_some_work => :environment do
    # Code goes here
  end

  desc 'Do some other work'
  task :do_something => :environment do
    # Code goes here
  end

end 
```

在这段代码中，有两个任务，每个任务都可以像这样执行：

```
#first task
rake some_task:do_some_work

#second task
rake some_task:do_something 
```

有时可能没有命名空间，然后只需使用 rake 命令和任务名称作为第一个参数即可执行任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:56:06.303

如果你一定要理解它，你宁愿阅读任务文件中的代码而不是运行它。

rake 文件中只有 ruby​​ 代码（在特殊的 dsl 中）。

如果你喜欢 Rails，了解 rake 也是值得的。这是其创建者 Jim Weirich 的[Rake 介绍视频](http://www.youtube.com/watch?v=AFPWDzHWjEY)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:47:32.863

试试这将运行 rake 任务

```
 rake scheduler 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T06:01:07.490

你`rake`要先明白。Rake 是一个构建工具，用 Ruby 编写，使用 Ruby 作为构建语言。Rake 支持规则模式来合成隐式任务。Jason Seifer[对 rake 有出色的演练](http://jasonseifer.com/2010/04/06/rake-tutorial)。

# vb.net - 从 VBScript 启动 vb .net 应用程序

> ID：12946860
> 
> 赞同：0
> 
> 时间：2012-10-18T03:56:44.453
> 
> 标签：vb.net

希望这是我所缺少的一些简单的东西，但我试图弄清楚为什么我不能使用启动其他 .exe 文件的 vbscript 启动新创建的 vb .net 应用程序。

```
Set WshShell = CreateObject("WScript.Shell")
WshShell.Run chr(34) & "WindowsApplication5.exe" & Chr(34), 0
Set WshShell = Nothing 
```

该应用程序可以像任何其他 .exe 一样手动启动而没有任何问题，但是这个 .vbs 脚本出于某种原因对其进行了不同的处理。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:17:05.133

我会把它作为一个答案来缓解这个问题：

1.  删除 chr(34) （很可能是可选的，取决于路径中是否有空格）
2.  将完整路径放入可执行文件，而不仅仅是文件名或将路径放入操作系统的环境变量中。如果您在可执行文件所在的同一文件夹中运行脚本并不重要。
3.  删除 ,0 或将其更改为其他数字，因为 0 运行它不可见（您可以在进程的任务管理器中找到它）。[在http://www.devguru.com/technologies/wsh/quickref/wshshell_run.html](http://www.devguru.com/technologies/wsh/quickref/wshshell_run.html)中找到的可能值

# windows-8 - Visual Studio 11 ARM 项目生成器失败

> ID：12946863
> 
> 赞同：5
> 
> 时间：2012-10-18T03:56:51.587
> 
> 标签：windows-8, cmake, arm, windows-runtime, visual-studio-2012

CMake 版本 2.8.9

我正在为 Windows 8 编写一个在平板电脑上运行的应用程序。我编写了一个底层 C++ 库，其中包含我的大部分应用程序逻辑。我正在使用 CMake 编译这个 C++ 库，因为我想为未来的端口提供一个独立于平台的构建系统。

当我从命令行运行 cmake.exe 或使用 cmake-gui 时，我可以使用“Visual Studio 11”和“Visual Studio 11 Win64”生成器生成项目。但是，当我尝试使用“Visual Studio 11 ARM”生成器时，出现以下错误：

```
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:52 (MESSAGE):
  The C compiler "cl" is not able to compile a simple test program. 
```

原因在更详细的输出中：

```
1>------ Build started: Project: cmTryCompileExec2764216458, Configuration: Debug ARM ------

1>C:\Program Files
(x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Platforms\ARM\PlatformToolsets\v110\Microsoft.Cpp.ARM.v110.targets(36,5):
error MSB8022: Compiling Desktop applications for the ARM platform is not supported.

========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

似乎默认情况下“Visual Studio 11 ARM”生成器不起作用，因为 cl.exe 不允许 CMake 测试编译器。

我读过我可以完全关闭编译器检查，但这听起来是个糟糕的选择。这只是 CMake 中的一个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T04:43:29.380

经过一番调查，这只是 CMake 中的一个错误。

[http://public.kitware.com/Bug/view.php?id=13511](http://public.kitware.com/Bug/view.php?id=13511)

修复它似乎已被推送到 CMake 2.8.11 版本。:(

仍在寻找解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:22:32.180

抱歉，我应该发布我使用的解决方法。

我没有使用“Visual Studio 11 ARM”生成器，而是切换到 NMake 并且能够让它工作。CMake 的人可能会在他们的 2.8.11 版本中修复 Visual Studio 生成器。

使用 NMake 为 ARM 构建的技巧只是在调用 cmake 之前运行设置环境以进行交叉编译的批处理脚本。或者，您也可以只打开“VS2012 ARM Cross Tools 命令提示符”。批处理脚本位于：

> C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\x86_arm\vcvarsx86_arm.bat

我用于 cmake 的命令行是：

> cmake -D "CMAKE_BUILD_TYPE=Debug" -G "NMake Makefiles" "path-to-CMakeLists.txt"

当然，您可以将“发布”替换为“调试”。我认为每个人都应该使用源代码构建，但是您可以在与 CMakeLists.txt 相同的目录中运行该命令并省略最后一个参数。

为了成功构建，您需要在 CMakeLists.txt 中设置以下内容：

```
SET( CMAKE_C_FLAGS "${CMAKE_C_FLAGS} /D_ARM_WINAPI_PARTITION_DESKTOP_SDK_AVAILABLE" )
SET( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /D_ARM_WINAPI_PARTITION_DESKTOP_SDK_AVAILABLE" ) 
```

如果您正在为多个平台构建，我发现检测我正在为 ARM 构建以设置上述变量的一个好方法是检查环境：

```
STRING( TOLOWER "$ENV{Platform}" generator )
IF( generator STREQUAL "arm" ) 
```

我不认为最后一部分是必要的，但我注意到 ARM SDK 中缺少很多标准库，因此我设置库以通过设置以下内容排除所有不可用的内容：

```
SET( CMAKE_C_STANDARD_LIBRARIES "kernel32.lib user32.lib ole32.lib oleaut32.lib uuid.lib advapi32.lib" 
     CACHE STRING "Libraries linked by default with all C applications." FORCE )
SET( CMAKE_CXX_STANDARD_LIBRARIES "kernel32.lib user32.lib ole32.lib oleaut32.lib uuid.lib advapi32.lib"
     CACHE STRING "Libraries linked by default with all C++ applications." FORCE ) 
```

完成后，只需运行：

```
nmake 
```

无论如何，这对我有用。我认为我不需要做任何其他事情来让它为我的特定项目工作。祝你好运！

# base-conversion - 基数-2是什么意思？

> ID：12946866
> 
> 赞同：0
> 
> 时间：2012-10-18T03:57:21.540
> 
> 标签：base-conversion, radix

谁能帮我理解什么是base -2？我了解正整数的基数，并且知道如何将十进制数转换为这些基数，但实际上对负基数一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T01:50:50.653

书中描述的这个异国情调的基地：[http](http://www.hackersdelight.org/hacker2TOC.pdf) ://www.hackersdelight.org/hacker2TOC.pdf 而且，不实用。

但是，基本思想与常规二进制代码相同：

ABCD == A*(-2)^3 + B*(-2)^2 + C*(-2) + D

数字示例：

```
-2          Decimal
-------------------
000              0
001              1
010             -2
011             -1
100              4
101              5 
```

等等。

# c++ - 我需要帮助了解如何在 C++ 中使用多个带空格的字符串对集合或向量进行排序

> ID：12946867
> 
> 赞同：2
> 
> 时间：2012-10-18T03:57:23.733
> 
> 标签：c++, sorting, vector, maps, fstream

我正在尝试从一天中的多个时间点获取带有“股市行情”的文本文件。

IE

代码价格
HPQ 121
MSFT 76
X 133
EBAY 92
XOM 64
AAPL 141
DJIA 128
AAPL 130
ABC 139
ABC 102
DJIA 121
HPQ 121
DJIA 96
XOM 130
MSFT 132
HPQ 129
HPQ 71
GOOG 142
MSFT 67
X 70

我需要接受这些值，删除重复项并按字母顺序显示结束值。到目前为止，我有这个...

```
 #include <iostream>
 #include <fstream>
 #include <string>
 #include <vector>
 #include <map>
 using namespace std;

 int main()
{
string filename;
map<string, int> string_count;
vector<string> market_list;

ifstream data_store;

//cout << "Enter stock file name to analyze" << endl;
//cin >> filename;

//data_store.open(filename.c_str());
data_store.open("stock1.txt");

while(!data_store.eof())
{
    string element;
    //data_store >> element;
    getline(data_store, element);
    //Remove ticker price from list
    if(element != "Ticker Price")
    {
        string_count[element]++;
    }
}
map<string, int>::iterator map_iter;
for(map_iter = string_count.begin(); map_iter != string_count.end(); map_iter++)
{
    market_list.push_back(map_iter->first);
}

data_store.close();

ofstream output_file;
output_file.open("stock_result.txt");

output_file << "Latest prices: " << endl;

vector<string>::iterator iter;
for (iter = market_list.begin(); iter != market_list.end(); iter++)
{
    string the_element = *iter;
    int num_times_repeated = string_count[the_element];
    for(int x = 0; x< num_times_repeated; x++)
    {
        output_file << the_element << endl;
    }
}

output_file.close();
} 
```

它按字母顺序输出文件的所有值，而不删除任何内容。我理解为什么会这样，但是我很难解决如何根据我的需要进行设置。请记住，我是一名学生，所以我不想要一个直截了当的答案:)

*编辑*

我希望我的代码接受上面的列表并输出“关闭”值，这是每个股票的最终值并按字母顺序显示

所以结果是

最新价格：
ABC 102
AAPL 130
DJIA 96
等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:04:14.013

要删除重复项，请查看[http://www.cplusplus.com/reference/stl/set/](http://www.cplusplus.com/reference/stl/set/)。此容器仅存储“唯一”值。因此它将删除重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:36:47.833

```
std::map<std::string,int> stocks;
std::string symbol, line;
int value;
while (getline(data_store,line))
{
    std::istringstream iss(line);
    if (iss >> symbol >> value)
        stocks[symbol] = value;
} 
```

然后只是迭代股票。

# javascript - 为什么我的 Javascript 变量没有设置在这个函数之外？

> ID：12946868
> 
> 赞同：3
> 
> 时间：2012-10-18T03:57:43.460
> 
> 标签：javascript, jquery, scope

我正在尝试获取图像的尺寸，以便稍后在我的脚本中使用。直接使用 jQuery 选择 img 元素可以正常工作并且更容易，但是它在 webkit 浏览器中不起作用（在函数调用时未加载图像）。我正在尝试实现此解决方案，其中变量是在图像加载后使用 jquery load() 函数设置的。

为什么我的变量没有按需要设置？

```
function startSlider() {
  if (1 == 1) {
  var bImg = $('#banner img');
  var bWidth = 111, bHeight = 222;
  $("<img/>")
    .attr("src", $(bImg).attr("src"))
    .load(function() {
      bWidth = this.width;
      bHeight = this.height;
      console.log('inner: ' + this.height);
    });
  console.log('outer: ' + bHeight);
  }
}

 $(window).load(startSlider(skin)); 
```

输出

```
outer: 222
inner: 333 
```

示例源

```
<div id="banner">
   <img src="/path/to/image.jpg" />
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T04:02:10.130

`.load()`是一个异步回调，意味着它将在浏览器完成下载图像文件时发生。

您正在绑定`.load()`到您的图像，然后立即记录高度。因为`.load()`回调还没有运行，所以会输出默认高度。

您需要等到`.load()`完成执行，然后再继续执行任何依赖图像高度的进一步逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T06:32:23.833

用这个：

```
$(document).ready(function () {
    startSlider();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T04:30:18.243

1.  `startSlider()`调用并且`$("<img/>")`未准备好或未完成加载，这就是您无法更改变量的原因。

确保您在代码上使用[DOMContentLoaded](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/DOMContentLoaded)，DOMContentLoaded 是事件将在元素解析完成时触发，在 jquery 中您可以使用此功能

```
 $(document).ready(function(){
        console.log('DOM Loaded (DOMContentLoaded)');
        //place your function in here
      }); 
```

# visual-studio-2010 - TFS 2010 Web 访问安全权限：用户无法创建或查看工作项

> ID：12946871
> 
> 赞同：0
> 
> 时间：2012-10-18T03:58:29.263
> 
> 标签：visual-studio-2010, tfs, tfs-workitem, tfs-security

我们已启用对 TFS 2010 服务器的 Web 访问。
我们有一组具有各级安全设置的用户，以便他们可以从 TFS 网站 (http://:8080/tfs/web) 创建新的工作项并查看现有的工作项。

**问题：**

现在，我们正在尝试添加新的 Windows 域用户并提供与上述匹配的安全设置（下面列出的安全设置），以便他们也可以创建新的工作项并查看现有的工作项。
但无论授予什么权限，它们都是

*   无法在左侧菜单中看到“*新工作项”部分，*
*   也不能使用右上角标题菜单上的“*工作项#* ”查询来查看现有工作项。如果他们提供现有的工作项编号并单击“开始”，他们会收到错误：`TF26198: The work item does not exist, or you do not have permission to access it.`
*   他们只能在左侧菜单中看到“*查询”。*
*   如果他们使用左侧的搜索进行搜索，则启用了“*新工作项*”，但单击时会出现错误：`You do not have permission to create work items in project 'OurProject'. Contact your Team Foundation Server administrator`

**我的问题：**

如何从 TFS 2010 Web 访问获得用户创建新工作项和查看现有工作项所需的权限？我是否遗漏了下面列出的安全设置中的某些内容？

**安全设定：**

*从 Team Foundation Server 管理控制台应用的安全设置：*

*   用户`OURDOMAIN\MyUser`被添加到`[TEAM FOUNDATION]\Team Foundation Administrators`组中。
*   在*servername* > *Application Tier* > *Administer Security*：检查所有权限是否允许`OURDOMAIN\MyUser`用户和`[TEAM FOUNDATION]\Team Foundation Administrators group`. 没有为拒绝检查任何权限。
*   在*servername* > *Application Tier* > *Team Project Collections* > *OurProjectCollection* > *Administer Security*：检查所有权限是否允许`OURDOMAIN\MyUser`用户和`[TEAM FOUNDATION]\Team Foundation Administrators group`. 没有为拒绝检查任何权限。

*从 Visual Studio 2010 的团队资源管理器应用的安全设置：*

*   在*servername\OurProjectCollection* > *OurProject* (Right-Click) > *Team Project Settings* > *Security* > *Administer Security*：所有权限都检查了允许`OURDOMAIN\MyUser`用户和`[TEAM FOUNDATION]\Team Foundation Administrators group`. 没有为拒绝检查任何权限。

**我们尝试过的事情：**

在测试过程中，我们尝试了以下但无济于事：
许多安全设置组合，定期清除缓存（刷新缓存），删除和添加区域和迭代（尽管没有任何工作项被归入其中），重新启动 TFS网站，重新启动 IIS 7，回收两个应用程序池：*Microsoft Team Foundation Server Application Pool*和*Microsoft Team Foundation Server Web Access Application Pool*，重新启动我们的 Windows 服务器（Windows Server 2008 Standard）。

**异常跟踪日志：**

```
Web method response: [http://servername:8080/tfs/TeamFoundation/Administration/v3.0/CatalogService.asmx] QueryNodes[Administration] 4 ms
Web method running: [http://servername:8080/tfs/OurProjectCollection/WorkItemTracking/v3.0/ClientService.asmx] QueryWorkitemCount[WorkItemTracking]
Web method response: [http://servername:8080/tfs/OurProjectCollection/WorkItemTracking/v3.0/ClientService.asmx] QueryWorkitemCount[WorkItemTracking] 11 ms
Web method running: [http://servername:8080/tfs/OurProjectCollection/WorkItemTracking/v3.0/ClientService.asmx] GetWorkItem[WorkItemTracking]
Web method response: [http://servername:8080/tfs/OurProjectCollection/WorkItemTracking/v3.0/ClientService.asmx] GetWorkItem[WorkItemTracking] 25 ms
UserControl: [Error, P 2460, T 3260/8, A 7511460, S 0, 10/18/12 06:31:32.271] { Error occured in user control ASP.ui_controls_workitems_editworkitem_ascx. Url: http://servername:8080/tfs/web/UI/Pages/WorkItems/WorkItemEdit.aspx?id=288&pguid=********-****-****-****-************

UserControl: [Error, P 2460, T 3260/8, A 7511460, S 0, 10/18/12 06:31:32.271] Exception: {
Exception Message: TF26198: The work item does not exist, or you do not have permission to access it. (type DeniedOrNotExistException)

Exception Stack Trace:    at Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItem.LoadWorkItem(Int32 id, Int32 rev, Nullable`1 asof)
   at Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItem..ctor(WorkItemStore store, Int32 id)
   at Microsoft.TeamFoundation.WorkItemTracking.Client.WorkItemStore.GetWorkItem(Int32 id)
   at Microsoft.TeamFoundation.WebAccess.UI.Controls.EditWorkItem.OpenWorkitem(String workitemId, Int32 revision)
   at Microsoft.TeamFoundation.WebAccess.UI.Controls.EditWorkItem.GetEditorState(NameValueCollection requestParams)
   at Microsoft.TeamFoundation.WebAccess.UI.Controls.EditWorkItem.RenderUserControl()
   at Microsoft.TeamFoundation.WebAccess.UI.WebAccessUserControl.OnLoad(EventArgs e)

 }
UserControl: [Error, P 2460, T 3260/8, A 7511460, S 0, 10/18/12 06:31:32.271] }
Application_Request: [Info, P 2460, T 3260/8, A 7511460, S 0, 10/18/12 06:31:32.303] Application request processing ended for /tfs/web/UI/Pages/WorkItems/WorkItemEdit.aspx?id=288&pguid=********-****-****-****-************. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T07:37:32.467

终于解决了！TFSJobAgent（Visual Studio Team Foundation 后台作业代理）windows 服务因登录失败而停止（服务帐户密码最近已更改）。因此，我们必须使用新密码启动它。我们可以通过事件日志中的警告来追踪这一点。这解决了问题中描述的所有问题。

# android - 为什么我应该使用 PNG 而不是 JPG？

> ID：12946875
> 
> 赞同：62
> 
> 时间：2012-10-18T03:58:46.727
> 
> 标签：android, image, png, jpeg

我正在构建一个使用大量图像的应用程序，所以它变得非常大。我有超过 15MB 的 PNG 图像，如果我将这些图像转换为 JPG，我会得到 5MB 或更少！那么，为什么我应该使用 PNG 而不是 JPG？

我知道 PNG 是首选，但是 JPG 我会失去什么？

编辑：谢谢大家！

请注意：因为我得到了答案，结果发现我需要在大多数文件中使用 PNG，我发现了那个网站[http://tinypng.org/](http://tinypng.org/)，这对我有很大帮助。我的 15mb 图像现在是 7mb。所以，如果有人和我有同样的情况，我希望它有所帮助！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-18T04:04:20.013

**主要原因**- PNG 将让您在 JPG上获得[Alpha Transparency的优势。](http://en.wikipedia.org/wiki/Alpha_compositing)

另请参阅：[PNG vs. GIF vs. JPEG vs. SVG - 什么时候最好使用？](https://stackoverflow.com/questions/2336522/png-vs-gif-vs-jpeg-when-best-to-use/7752936#7752936)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-18T04:04:00.860

对于一些纯色（实心多边形）的图像，PNG 较小（因为它们使 JPEG 伪影更加明显） JPEG 更适合于照片和其他没有一致模式的图像（JPEG 伪影在这里更难注意到）

# asp.net - 在php中链接帐户时遇到问题

> ID：12946882
> 
> 赞同：0
> 
> 时间：2012-10-18T03:59:17.850
> 
> 标签：asp.net

您好，我正在尝试通过在站点上创建一个类似的表单来登录 ( `http://1betvegas.com/default.aspx`) 来链接一个帐户。我正在创建一个界面，您可以在其中链接您的帐户而无需实际访问网站，您将能够通过界面进行投注和一切。

我的问题是，当我发送数据时它没有登录，我认为这可能与`onkeypress()`表单部分有关，但不确定。

代码：

```
<form name='aspnetForm' method='post' action='http://1betvegas.com/default.aspx' onkeypress='javascript:return WebForm_FireDefaultButton(event, 'ctl00_MainContent_ctlLogin_BtnSubmit')' id='aspnetForm' style='margin: 0 0 0 0;'>
    <table>
        <tr>
            <td>
            username: 
            </td>
            <td>
                <input name='ctl00$MainContent$ctlLogin$_UserName' type='text' size='15' id='ctl00_MainContent_ctlLogin__UserName' accesskey='u' tabindex='60' class='login_input'>
            </td>
        </tr>
        <tr>
            <td>
            password: 
            </td>

            <td>
            <input name='ctl00$MainContent$ctlLogin$_IdBook' type='hidden' id='ctl00_MainContent_ctlLogin__IdBook'>
            <input name='ctl00$MainContent$ctlLogin$Redir' type='hidden' id='ctl00_MainContent_ctlLogin_Redir' value='wager/welcome.aspx'>
                <input name='ctl00$MainContent$ctlLogin$_Password' type='password' size='15' id='ctl00_MainContent_ctlLogin__Password' accesskey='p' tabindex='61' class='login_input'>
            </td>
        </tr>
        <tr>
        <input type='submit' name='ctl00$MainContent$ctlLogin$BtnSubmit' value='Login' id='ctl00_MainContent_ctlLogin_BtnSubmit' class='login_input' style='text-transform: uppercase;'>
        </tr>
    </table>
</form> 
```

此代码----所有输入框和表单均来自实际站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:36:24.807

你有错误

```
onkeypress='javascript:return WebForm_FireDefaultButton(event, 'ctl00_MainContent_ctlLogin_BtnSubmit')' 
```

将其更改为

```
onkeypress='javascript:return WebForm_FireDefaultButton(event, "ctl00_MainContent_ctlLogin_BtnSubmit")' 
```

注意引号，这不是`php`，它是`asp.net`。

# r - 在 data.frame 中按行拆分并按列分配结果

> ID：12946883
> 
> 赞同：10
> 
> 时间：2012-10-18T03:59:19.193
> 
> 标签：r, data.table, strsplit

所以我有data.frame

```
dat = data.frame(x = c('Sir Lancelot the Brave', 'King Arthur',  
                       'The Black Knight', 'The Rabbit'), stringsAsFactors=F)

> dat
                       x
1 Sir Lancelot the Brave
2            King Arthur
3       The Black Knight
4             The Rabbit 
```

我想把它转换成数据框

```
> dat2
                       x    1            2       3      4
1 Sir Lancelot the Brave    Sir   Lancelot     the  Brave
2            King Arthur    King    Arthur
3       The Black Knight    The      Black  Knight 
4             The Rabbit    The     Rabbit 
```

strsplit 将数据作为列表返回

```
sbt <- strsplit(dat$x, " ")
> sbt
[[1]]
[1] "Sir"      "Lancelot" "the"      "Brave"   

[[2]]
[1] "King"   "Arthur"

[[3]]
[1] "The"    "Black"  "Knight"

[[4]]
[1] "The"    "Rabbit" 
```

并且 as.data.table 不会在应该的地方创建 NULL 值，而是重复值

```
> t(as.data.table(sbt))
   [,1]   [,2]       [,3]     [,4]    
V1 "Sir"  "Lancelot" "the"    "Brave" 
V2 "King" "Arthur"   "King"   "Arthur"
V3 "The"  "Black"    "Knight" "The"   
V4 "The"  "Rabbit"   "The"    "Rabbit" 
```

我想我真的很想为 as.data.table(x, repeat=FALSE) 提供一个参数，否则我该如何完成这项工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-02T10:16:32.157

这是一个老问题，我知道，但我想我会分享两个额外的选择。

### 选项1

`concat.split`我的“splitstackshape”包是专为这种类型的东西设计的。

```
library(splitstackshape)
concat.split(dat, "x", " ")
#                        x  x_1      x_2    x_3   x_4
# 1 Sir Lancelot the Brave  Sir Lancelot    the Brave
# 2            King Arthur King   Arthur             
# 3       The Black Knight  The    Black Knight      
# 4             The Rabbit  The   Rabbit 
```

* * *

### 选项 2

`data.table`最近（我相信从 1.8.11 版开始）对其武器库进行了一些补充，特别是在这种情况下`dcast.data.table`。要使用它，`unlist`拆分数据（如@mnel's answer中所做的那样），使用`.N`（每行有多少新值）创建一个“时间”变量，并用于`dcast.data.table`将数据转换为您正在寻找的形式。

```
library(data.table)
library(reshape2)
packageVersion("data.table")
# [1] ‘1.8.11’

DT <- data.table(dat)
S1 <- DT[, list(X = unlist(strsplit(x, " "))), by = seq_len(nrow(DT))]
S1[, Time := sequence(.N), by = seq_len]
dcast.data.table(S1, seq_len ~ Time, value.var="X")
#    seq_len    1        2      3     4
# 1:       1  Sir Lancelot    the Brave
# 2:       2 King   Arthur     NA    NA
# 3:       3  The    Black Knight    NA
# 4:       4  The   Rabbit     NA    NA 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T04:10:48.210

这是一种选择。唯一的复杂之处是您需要首先将每个向量转换为具有一行的 data.frame，因为 data.frames 是`rbind.fill()`预期的。

```
library(plyr)
rbind.fill(lapply(sbt, function(X) data.frame(t(X))))
#     X1       X2     X3    X4
# 1  Sir Lancelot    the Brave
# 2 King   Arthur   <NA>  <NA>
# 3  The    Black Knight  <NA>
# 4  The   Rabbit   <NA>  <NA> 
```

不过，我自己的倾向是只使用基础 R，如下所示：

```
n <- max(sapply(sbt, length))
l <- lapply(sbt, function(X) c(X, rep(NA, n - length(X))))
data.frame(t(do.call(cbind, l)))
#     X1       X2     X3    X4
# 1  Sir Lancelot    the Brave
# 2 King   Arthur   <NA>  <NA>
# 3  The    Black Knight  <NA>
# 4  The   Rabbit   <NA>  <NA> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-18T09:48:32.740

```
sbt = strsplit(dat$x, " ")
sbt
#[[1]]
#[1] "Sir"      "Lancelot" "the"      "Brave"   
#[[2]]
#[1] "King"   "Arthur"
#[[3]]
#[1] "The"    "Black"  "Knight"
#[[4]]
#[1] "The"    "Rabbit"

ncol = max(sapply(sbt,length))
ncol
# [1] 4

as.data.table(lapply(1:ncol,function(i)sapply(sbt,"[",i)))
#      V1       V2     V3    V4
# 1:  Sir Lancelot    the Brave
# 2: King   Arthur     NA    NA
# 3:  The    Black Knight    NA
# 4:  The   Rabbit     NA    NA 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T04:21:39.370

使用`data.table`看起来你正在尝试使用它。

```
library(data.table)
DT <- data.table(dat)
DTB <- DT[, list(y = unlist(strsplit(x, ' '))), by = x]

new <- rep(NA_character_,  DTB[,.N,by =x][which.max(N), N])
names(new) <- paste0('V', seq_along(new))
DTB[,{.new <- new 
      .new[seq_len(.N)] <- y 
       as.list(.new)} ,by= x] 
```

或使用`reshape2` `dcast`重塑

```
library(reshape2)

dcast(DTB[,list(id = seq_len(.N),y),by= x ], x ~id, value.var = 'y') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-06T21:21:53.630

这是一个很好且简单的方法`tidyr`。

```
library(tidyr)

ncol <- max(sapply(dat, length))

dat %>%
  separate(x, paste0("V", seq(1,ncol))) 
```

注意：你会得到一个警告，但是，它基本上是告诉你`separate`用`NA`'s 填充数据。所以你可以忽略警告。

# extjs - Store.findBy() 表现得很疯狂？

> ID：12946890
> 
> 赞同：2
> 
> 时间：2012-10-18T03:59:45.810
> 
> 标签：extjs

我已经调试了好几天了。`Store.findBy(function (record, id)` 没有表现。或者也许是我行为不端。已将 JSON 放入代码中，以便于测试。FindBy() 匹配 12345，但没有 12345，它返回索引 0 和 foo。我在做什么？

```
Ext.application({
    name: 'MyApp',
    launch: function() {

        var theJson = {
            "users": [{
                "user": {
                    "id": 0 ,
                    "name": "foo" ,
                    "age": 22 ,
                    "skills": [{
                        "type": "bowcrafting" ,
                        "skillLevel": 50 ,
                        "levels": [10, 25, 50, 75, 90, 95, 99, 100]
                    }]
                }} , {
                "user": {
                    "id": 1 ,
                    "name": "bar" ,
                    "age": 71 ,
                    "skills": [{
                        "type": "fencing" ,
                        "skillLevel": 32 ,
                        "levels": [10, 25, 50, 90, 95, 99, 100]
                    } , {
                        "type": "swordsmanship" ,
                        "skillLevel": 73 ,
                        "levels": [10, 25, 50, 75, 80, 85, 90, 95, 99, 100]
                    }]
                }} , {
                "user": {
                    "id": 2 ,
                    "name": "foobar" ,
                    "age": 132 ,
                    "skills": [{
                        "type": "tactics" ,
                        "skillLevel": 90 ,
                        "levels": [10, 25, 50, 90, 95, 99, 100]
                    } , {
                        "type": "carpentery" ,
                        "skillLevel": 86 ,
                        "levels": [10, 25, 50, 75, 90, 95, 99, 100]
                    } , {
                        "type": "hiding" ,
                        "skillLevel": 100 ,
                        "levels": [10, 25, 50, 65, 75, 80, 85, 90, 95, 99, 100]
                    }]
                }
            }]
        };

        var jstore = Ext.create ('Ext.data.Store', {
            fields: ['id', 'name', 'age', 'skills'] ,
            data : theJson,
            proxy: {
                type: 'memory' ,
                reader: {
                    type: 'json' ,
                    root: 'users' ,
                    record: 'user' ,
                    idProperty: 'id'
                }
            } ,

            autoLoad: true
        });

        Ext.create ('Ext.button.Button', {
            text: 'Push me' ,
            renderTo: Ext.getBody () ,
            handler: function (btn) {
                var index = jstore.findBy (function (user, id) {
                    // Here's the hint
                    if (user.data.skills.skillLevel === 12345) return id;
                    else return -1;
                });

                console.log ('index = ', index);

                if (index != -1) {
                    // It will print 'foo' because it's the user
                    // that has the skillLevel equal to 50
                    console.log (jstore.getAt(index).get ('name'));
                };

                if (index === -1) {
                    // It will print 'foo' because it's the user
                    // that has the skillLevel equal to 50
                    console.log ('Failed');
                }
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T05:19:38.203

你[读过文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-findBy)吗？你的`findBy`方法不符合合同。特别是，`-1`如果不匹配，则返回，并且由于 this 是 JavaScript，因此`-1`is `true`，因此找到了第一条记录。

```
 handler: function (btn) {
            var index = jstore.findBy (function (user, id) {
                // Here's the hint
                console.log(id);
                console.log(user);

                if (user.data.skills.skillLevel === 12345) return true;
                else return false;
            }); 
```

（这解决了您的误报问题，我并不是说您的支票会找到任何东西）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T05:00:55.817

你有嵌套数组的 json 数据。

`store.findBy(function(user,id)` 将为存储中的每条记录调用。记录`skills`是一个数组。所以你需要再次迭代它。

```
 var skills = user.get('skills');

   Ext.each(skills,function(skill,idx){
         if(skill.skillLevel == 100)
             console.log('found....',skill);
   }); 
```

# vb.net - 在运行时在连接字符串之间切换

> ID：12946904
> 
> 赞同：0
> 
> 时间：2012-10-18T04:03:27.407
> 
> 标签：vb.net, sql-server-2005

我需要同时在一些数据库之间切换（使用 VB.net）。据我所知，我必须创建一些连接字符串并在不同的条件下使用它们。

例如

```
If ( condition )  then 
  use connection String 1
elseif (condition)  then 
  use connection String 2 
end if 
```

谁能帮我处理这个问题？我正在使用 MSSQL 2005 和 VB.net

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:08:18.013

`If-Else`在条件之外声明一个变量。试试这样的，

```
Dim ConnectionStr As String = String.empty
If (condition) Then
    ConnectionStr = 'conString 1'
ElseIf (condition) Then
    ConnectionStr = 'conString 2'
Else
    ConnectionStr = 'others....'
End if

' ConnectionStr hold your latest connection string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:37:38.803

在 VB.NET 中，您需要添加一个模块并在那里编写一些函数。并使用这些功能建立和关闭与数据库的连接。

**变量：** ConnectionString 变量（两者）

**职能：**

*   Close_Database_Connection()：如果连接打开则关闭它。
*   Create_Database_Connection(condition_param)：在这里，您将
    条件放入 If Else 结构中。像：

**代码：**

```
If ( condition ) Then
        use connection String 1 
    ElseIf (condition) Then
        use connection String 2 
    End If 
```

Use this "Create_Database_Connection(condition_param)" Method where you need to establish connection in code depending upon you conditional parameters.

# c# - Windows Media Player 在新线程上无法正常工作

> ID：12946905
> 
> 赞同：0
> 
> 时间：2012-10-18T04:03:33.820
> 
> 标签：c#, wpf, multithreading

我做了一个音乐课如下：

```
public class Music
{
    public void StartMusic()
    {                        
        WMPLib.WindowsMediaPlayer wplayer = new WMPLib.WindowsMediaPlayer();
        wplayer.URL = "Resources/music3.MID";
        wplayer.controls.play();                            
    }
} 
```

在主屏幕上，我开始一个新线程，如下所示：

```
Music music = new Music();
thread = new Thread( new ThreadStart(music.StartMusic));            
thread.Start(); 
```

现在，音乐在启动屏幕时按需要播放，但问题是，只要我在 UI 上进行交互，单击按钮或扩展器，音乐线程就会停止。有趣的是，如果我使用 SoundPlayer 而不是 MusicPlayer，一切正常。这是 SoundPlayer 的代码：

```
public void StartMusic()
{
    SoundPlayer sound = new SoundPlayer("Resources/music1.wav");
    sound.PlayLooping();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:05:10.360

我只是通过在 startMusic() 方法之外创建 WindowsMediaPlayer 对象解决了这个问题。这么愚蠢的错误。

# javascript - 如何隐藏未选中复选框的父级？

> ID：12946912
> 
> 赞同：1
> 
> 时间：2012-10-18T04:04:45.980
> 
> 标签：javascript, jquery

我有一组随机/动态生成的 div 复选框：

```
<div>A1 <input type='checkbox' name='A[]' value='A1'> </div>
<div>A2 <input type='checkbox' name='A[]' value='A2'> </div>
<div>A3 <input type='checkbox' name='A[]' value='A3'> </div>
<div>B1 <input type='checkbox' name='B[]' value='B1'> </div>
<div>B2 <input type='checkbox' name='B[]' value='B2'> </div>
<div>C1 <input type='checkbox' name='C[]' value='C1'> </div> 
```

我想要做的是当用户：

1.  检查任何 A 然后其他人将隐藏（整个 div），但所有 A 仍将显示。
2.  取消选中复选框，然后所有 A、B、C 将再次显示。

这是因为我阻止用户检查混合选项。

PS：您可以提供可能需要我修改生成的复选框输出的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:09:16.853

您可以使用一些 JQuery 遍历来隐藏不匹配的元素：

```
// add the event handler
$("input[type=checkbox]").on("change", function() {
    // get whether checked or unchecked
    var checked = $(this).prop("checked") === true;

    // get the name of the clicked element (eg, "A[]")
    var thisName = $(this).prop("name");

    // get the name of the clicked element (eg, "A[]")
    var thisName = $(this).prop("name");

    // get the grandparent element
    $(this).parent().parent()
        // get all the checkboxes
        .find("input[type=checkbox]")
        // filter to only the ones that don't match the current name
        .filter(function(i, e) { return e.name != thisName; })
         // hide or display them
        .css("display", checked ? "none" : "");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:18:33.857

试试这个[小提琴](http://jsfiddle.net/pintu31/RS4T7/1/)

```
$("input[type=checkbox]").on("change", function() {
var thisName = $(this).attr("name");
if($(this).is(':checked')){
    $(':checkbox').parent().hide();
$('input:checkbox[name|="'+thisName+'"]').parent().show();
} else {
    $(':checkbox').parent().show();
}    
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T04:22:45.273

试试下面的代码：

```
$(":checkbox").click(function() {
    var identifier = $(this).val().substring(0, 1);

    $("input[type='checkbox']").each(function() {
        if ($(this).val().indexOf(identifier) != -1) {
            $(this).parent().show();
        } else {
            $(this).parent().hide();
        }
    });

    if ($("input:checked").length == 0) {
        $("input[type='checkbox']").parent().show();
    }

}); 
```

你可以试试[jsFiddle](http://jsfiddle.net/MULJQ/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T04:24:39.573

试试这个，

```
$('input:checkbox').click(function(){
  if($(this).attr('checked') == 'checked'){
     $('input:checkbox').parent('div').hide();
     $('input:checkbox[name="'+$(this).attr('name')+'"]').parent('div').show();
  }else{
      if(!$('input:checkbox[checked="checked"]').length){
         $('input:checkbox').parent('div').show();
      }
  }
}) 
```

​</p>

演示：http: [//jsfiddle.net/muthkum/uRd3e/3/](http://jsfiddle.net/muthkum/uRd3e/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T04:28:39.287

你可以像这样简单地做到这一点

```
$('input[type=checkbox]').change(function () {
    if ($(this).attr('checked')) {
       var Name = $(this).prop("name");    
        $('div').filter(function(){
            return $(this).find('input[type=checkbox]').prop("name") != Name;
}).hide(); 
    }
    else
    {
      $('input[type=checkbox]').attr('checked',false);
      $('input[type=checkbox]').parent('div').show();
    }

});​ 
```

[现场演示](http://jsfiddle.net/5YK3s/3/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T04:34:23.903

谢谢大家，特别是 dbaseman（让我很理想）：好的，这是我的代码，经过大家的推荐。

```
$("input[type=checkbox]").on("click", function() {
    var sta = $(this).is(":checked"); sta=(sta==true?1:0);
    if(sta==1){
        var thisName = $(this).prop("name"); thisName=thisName.replace("[]","");
        $("div input[type=checkbox]:not([name^=" + thisName + "])").parent().hide();
    }else{
        var num = $("[type=checkbox]:checked").length;
    if(num==0){
            $("div input[type=checkbox]").parent().show();
    }
    }
}); 
```

到目前为止，代码能够按照我的需要执行。
Ps：我对jquery旅行部分仍然很弱

Ps：编辑重新打开所有复选框部分
再次感谢！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T04:39:57.503

这将在选中类型的 FIRST 时隐藏所有其他复选框类型，并在未选中所有复选框类型时显示所有其他复选框类型：

```
$("input:checkbox").on("change", function() {
    // get the name attribute
    var nameAttr = $(this).prop("name");
    // check how many checkbox inputs of that name attribute are checked
    var checkedLength = $("input:checkbox[name=\"" + nameAttr + "\"]:checked").length;
    // if 0, display other checkbox inputs, else if 1 hide all of the rest
    if(checkedLength == 0) {
        $("input:checkbox[name!=\"" + nameAttr + "\"]").parent().show();    
    }else if(checkedLength == 1) {
        $("input:checkbox[name!=\"" + nameAttr + "\"]").parent().hide();
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-18T05:34:47.700

被选择淹没！这是一个简单的 JS 版本，它只是禁用非选定组的成员。

我认为这比隐藏它们更好，以便用户在选择一个选项后可以看到其他选项。否则，要再次查看其他选项，他们必须取消选择组中的所有复选框。

请注意，`div`作为输入的父级，侦听器传递对元素和相关事件对象的引用，根据需要进行修改。

```
<script>
function doStuff(div, evt) {
  var checked, el, group, j, inputs, name, re;
  var t = evt.target || evt.srcElement;

  if (t.nodeName && t.nodeName.toLowerCase() == 'input' && t.type == 'checkbox') {
    inputs = div.getElementsByTagName('input');
    name = t.name;

    // Set checked to true if any input with this name is checked
    group = document.getElementsByName(name);
    j = group.length;
    while (j-- && !checked) {
        checked = group[j].checked;
    }

    // Loop over inputs, hide or show depending on tests
    for (var i=0, iLen=inputs.length; i<iLen; i++) {
      el = inputs[i];

      // If name doesn't match, disable
      el.disabled = checked? (el.name != name) : false;
    }
  } 
}
</script>

<div onclick="doStuff(this, event)">
<div>A1 <input type='checkbox' name='A[]' value='A1'></div>
<div>A2 <input type='checkbox' name='A[]' value='A2'></div>
<div>A3 <input type='checkbox' name='A[]' value='A3'></div>
<div>B1 <input type='checkbox' name='B[]' value='B1'></div>
<div>B2 <input type='checkbox' name='B[]' value='B2'></div>
<div>C1 <input type='checkbox' name='C[]' value='C1'></div>
</div> 
```

# jquery - 花式框的 jQuery 验证引擎失败

> ID：12946919
> 
> 赞同：0
> 
> 时间：2012-10-18T04:05:34.723
> 
> 标签：jquery, fancybox, jquery-validation-engine

我有一个带有 2 个不可见 DIV 的表单，一旦单击一个按钮，就会显示该 DIV，它会弹出 fancybox 窗口。我有 jQuery 验证器引擎插件，它完成了所有的验证工作。问题是验证引擎对普通字段工作正常，但对花式框窗口内的隐藏字段不工作，一旦它们可见。我怀疑这是因为 fancybox 在运行时将它们放在`<form/>`导致验证引擎失败的范围之外，因为它不能在表单标记之外的元素上工作。

```
$(document).ready(function() {  
  $("#category").validationEngine('validate');
  $('#wrapper #addCat').live('click', function() {
  $('<a href="#addCategoryDiv"/>').fancybox({
    'autoDimensions' : false,
    'hideOnContentClick' : false,
    'height' : 450,
    'width' : 500,
    'scrolling' : 'no'
    }).click();
  });
  $('#wrapper #editCat').live('click', function() {
    $('<a href="#editCategory"/>').fancybox({
      'autoDimensions' : false,
      'hideOnContentClick' : false,
      'height' : 450,
      'width' : 500,
      'scrolling' : 'no'
      }).click();
  });
}); 
```

有人可以帮我解决这个问题吗？我可以在 Firebug 中看到，fancybox在标签`<div style="display:none">`之外制作了部分代码`<form></form>`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T04:12:59.400

您需要将您的验证引擎初始化代码放在 fancybox`onComplete`方法中：

```
$('<a href="#editCategory"/>').fancybox({
                'autoDimensions'        : false,    
                'hideOnContentClick'    : false,
                'height'                : 450,
                'width'                 : 500,
                'scrolling'             : 'no'
                'onComplete'            : function(){
                                              $("#category").validationEngine('validate');   
                                          }
            }).click(); 
```

# android - 只下载新图片

> ID：12946927
> 
> 赞同：1
> 
> 时间：2012-10-18T04:06:13.657
> 
> 标签：android, image

我正在我的应用程序中实现一个新闻页面。我希望该页面下载任何新图像并将其存储在手机上。

我的问题是：**我如何知道哪些图像已下载，哪些尚未下载？**

我正在考虑将图像保存为 yymmddhhss.png 但这似乎很草率。我看到有人使用 url.hashCode() 实现，但我不确定它的作用，所以我不确定它是否适用于我的应用程序。

我希望实现使用内置函数或文件名技巧。我宁愿不设置数据库或首选项来存储上次下载图像的名称/日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:10:57.853

不要使用 hashCode()。那是Java特定的。如果你更深入地研究 - hashCode()

每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。**该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。**

* * *

最简单的解决方案是`md5`使用完整 URL 并使用它来命名文件。它将为您提供一致的文件名长度，并最大限度地减少与其他图像冲突的机会。您不需要在名称中添加日期，因为您可以直接从文件写入时检索它。

获取 MD5 的简单示例 -[示例](http://www.codeobsessed.com/code/viewtopic.php?f=6&t=25)

# iphone - IOS应用内非消耗品购买后可以修改吗？

> ID：12946928
> 
> 赞同：6
> 
> 时间：2012-10-18T04:06:21.713
> 
> 标签：iphone, ios, in-app-purchase, itunes

如果我在我的应用中提供应用内非消耗性购买（比如一本书或一首歌），然后在它发布 2-3 个月后我意识到我的数字内容有问题，我可以做一个更新数字内容？因此，如果我以 1.99 美元的价格将数字文章作为应用内购买并售出 1,000 份，然后我意识到我在第 3 页有拼写错误。我能否上传更新的文章以发给所有人谁买了这篇文章并阻止人们下载旧版本？如果不是，这种情况在现实世界中是如何处理的？我查看了苹果文档，但找不到答案。

编辑：假设我正在使用通过苹果托管内容的新 io6 功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T22:21:08.050

是的，事实上，只要您执行几个步骤，您就可以跟踪并系统、有效地跟踪下载的内容。

> 1.是的，这是可能的。如果您跟踪谁购买了哪个包（即，将布尔值保留为 NSUserDefault），那么他们仍然可以访问它（即使您向其添加更多内容/级别）。
> 
> 2.这取决于你的意思是通知; 他们会知道他们在安装更新时是否阅读了更新评论。您也可以选择在更新后加载应用程序时提醒他们 - 您的电话。
> 
> 3.如果您提交代码，Apple 将对其进行审核。只需将其视为应用程序的任何其他更新即可。

这直接取自这里：[更新 iOS 应用的应用内购买内容？](https://stackoverflow.com/questions/7780133/update-in-app-purchase-content-for-ios-app)

为应用商店更新内容后，您可以允许您的用户**恢复购买**并获取更新的内容！

总的来说，有一个机制来跟踪应用内购买的版本，然后在需要时更新！

总是有，苹果自己的文档： [给你！:)](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKDownload_Ref/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011851)

我希望这是清楚和有帮助的！

编辑：检查用户的内容版本号并发现它已过时后，您将调用该方法（顺便说一下，您可能会在您的应用程序委托中实现此检查机制。

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

这将恢复事务，但请确保您还需要包含其余的实现代码！

我假设您知道在应用程序购买中恢复的代码，但如果不知道，这里有几个很好的链接！

[恢复已经在 iPhone 上购买的应用内购买？](https://stackoverflow.com/questions/7761556/restore-already-bought-in-app-purchases-on-iphone)

[http://www.iosdeveloperguide.com/in-app-purchase-heads-up-to-avoid-app-rejection/](http://www.iosdeveloperguide.com/in-app-purchase-heads-up-to-avoid-app-rejection/)

[http://appotography.com/2011/07/06/restoreing-purchases-on-iphone-and-ipad/](http://appotography.com/2011/07/06/restoring-purchases-on-iphone-and-ipad/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T21:43:10.957

**关于 AppStore 托管内容**

我没有尝试过，但是在 Apple 文档中浏览时，我发现[这](https://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/13_ManagingIn-AppPurchases/ManagingIn-AppPurchases.html#//apple_ref/doc/uid/TP40011225-CH4-SW37)证实了您可以上传 Apple 托管的数字内容的多个版本。

> “您可以拥有多个版本的托管内容，但每个版本都需要经过 Apple 的批准才能被用户购买。”

此外，您可以查看[本](http://www.absoluteripple.com/1/post/2013/01/apple-in-app-purchase-creating-app-store-hosted-content.html)教程和[本](http://www.techotopia.com/index.php/Configuring_and_Creating_App_Store_Hosted_Content_for_iOS_6_In-App_Purchases)教程，这表明您必须在使用 Xcode 创建 App Store 托管内容时指定`Content Version`和。`IAP ProductIdentifier``ContentInfo.plist`

![IAPHostedContentPlist](../Images/dc8cc007a705e36b2236d6fc1eee39d1.png)

**如何通知用户内容已更改**

这取决于您如何实施您的购买系统、内容交付，以及您如何跟踪“您购买的产品的状态”。通常我们会跟踪购买的产品的版本，也就是说，我们在下载购买的内容时将 product_id 与内容版本一起保存。我们可以将这些数据保存在文件中或本地数据库中。此外，您不必担心未下载（和未购买）的产品，这些产品不需要更新。当您使用可用产品的最新信息（通过更新按钮、应用启动或您实施的任何方式）更新应用内商店时，您应该将最新内容版本与您下载的内容版本进行比较，然后您可以通知用户他购买的产品的更新可用。最后，您必须启用该产品的下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:26:51.677

这一切都取决于您如何使内容对用户可用。当用户最初购买应用内内容时，内容来自哪里？

如果它是应用程序包的一部分，那么向这些用户获取更新内容的唯一方法是向您的应用程序提交包含更新内容的更新。当用户安装更新的应用程序时，他们将看到更新的内容。

如果在购买时，应用程序从您的服务器下载内容，那么您可以在应用程序中构建一种机制，检查您的服务器以获取内容的更新版本。如果它检测到有更新，并且用户有 IAP，则应用程序可以下载更新的内容。

编辑：这不包括 Apple 托管的可下载内容的新 iOS 6 功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T14:57:18.680

对于上述问题：请查看以下网址以获取单独的内容：

**以下链接是 SKDownload API 的链接：http:** [//developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKDownload_Ref/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011851](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKDownload_Ref/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011851)

**以下链接是一篇精彩文章的链接，该文章解释了 SKDownload API 的工作原理：** [如何下载应用内托管内容？](https://stackoverflow.com/questions/12994550/how-to-download-in-app-hosted-content)

现在，在您的位置上，我们可以按照以下步骤操作：

1.  在要托管的 Apple 帐户上推送另一个包（带有更正）。
2.  使用以下更改在 App Store 上推送更新应用程序：（**这会处理来自新用户的任何新下载。**）使用文件的新标识符更新 InAppPurchase 的代码
3.  现在我们要处理老用户，我们可以考虑以下两种做法： a．我们可以通过点击用户将再次下载文章的方式向用户显示一个**恢复按钮。**

    湾。在 iOS 中，为了自动发送给所有现有用户，我们确实有一种推送通知机制，在收到此通知后，用户将触发事件再次从 Apple 主机下载数据。

# entity-framework - EF Power Tools：modelEntityContainerName 无效字符

> ID：12946930
> 
> 赞同：1
> 
> 时间：2012-10-18T04:06:43.817
> 
> 标签：entity-framework, reverse-engineering

我知道之前有人问过这个问题，但我正在尝试对具有连字符名称的数据库使用 EF Power Tools Beta 2，并且我不断收到“modelEntityContainerName 参数'DBName-ContinuedContext'包含无效字符”。生成模板中是否有简单的修复程序来避免此错误？有人吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:31:15.130

我永远无法让 Power Tools 使用带连字符的数据库名称，所以我放弃了，并坚持使用 EDMX 方法。祝所有遇到同样问题的人好运。

# c++ - 比较通过 char *argv[] 在终端中传递的参数

> ID：12946932
> 
> 赞同：1
> 
> 时间：2012-10-18T04:07:26.873
> 
> 标签：c++

我一直在使用终端时遇到问题，但我想知道这样的事情是否合法：

```
int main(int argc, char *argv[])
{
    if(argv[3] = "today")
    {
        //do something
    }
} 
```

否则，我可以使用 c-strings 比较它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T04:09:17.433

不，这在语法或逻辑上是不合法的。

你需要使用[`strcmp`](http://en.cppreference.com/w/c/string/byte/strcmp).

```
if (argc >= 4 && strcmp(argv[3], "today") == 0) {
    //matched
} 
```

（或者，正如 Dietmar Kühl 建议的那样，您可以使用 std::string 并大大简化您的编码生活。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T04:09:16.127

程序参数只是指向`char`数组的指针。您正在比较指针而不是字符串内容。最简单的方法是使用 比较参数`std::string`，例如：

```
if (argv[3] == std::string("today")) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T04:32:42.487

```
int main(int argc, char *argv[])
{
    std::vector<std::string> arguments(argv, argv + argc);
    if (arguments[3] == "today")
    {
        //do something
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T04:11:42.333

`char* or arrays`无法与`=`运营商相提并论。你需要使用`strcmp()`函数

```
int main(int argc, char *argv[])
{
    if(strcmp(argv[3], "today") == 0)
    {
        //do something
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T04:12:25.467

那将始终返回错误。您正在比较两个地址，而不是两个字符串。您要做的是比较这些地址的内容，或比较字符串本身。

在 C 中，首选方法是使用函数`strcmp`：

```
if (strcmp(argv[3], "today") == 0) {
   // Do something
} 
```

在 C++ 中，使用字符串：

```
if (std::string("today") == argv[3]) {
   // Do something
} 
```

# android - 如何在android模拟器上访问主机互联网连接

> ID：12946937
> 
> 赞同：-3
> 
> 时间：2012-10-18T04:08:08.463
> 
> 标签：android

我想在我的 android 模拟器上运行我的 windows 主机 pc wifi internet 请给出一些源代码示例。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:23:14.050

当您启动模拟器时，如果您的系统连接到网络，则相同的网络将应用于模拟器，如果您的系统连接到互联网，则模拟器中的 wifi 指示器最初显示 wifi“ON”.. 无需授予特殊权限即可连接。 . 您可以通过按 F8 按钮来打开和关闭模拟器 wifi... 如果您的应用程序正在使用互联网，那么您必须在清单文件中授予互联网权限..

对于更多模拟器控制，我们可以使用：DDMS 并使用命令提示符：telnet localhost 554

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T04:28:35.193

Imdad，你只是想从你的模拟器上的应用程序连接互联网吗？这应该会自动工作，无需任何更改或代码。

# image - 傅立叶和零填充

> ID：12946955
> 
> 赞同：4
> 
> 时间：2012-10-18T04:09:18.507
> 
> 标签：image, matlab, filtering, padding, dft

我正在使用蒙版和离散傅里叶变换过滤图像，直到现在我有这个

```
A=double(imread('C:\Users\samsung\Documents\Lab Imagenes\CHE.jpg','jpg'));
B=[1 4 6 4 1; 4 16 24 16 4; 6 24 36 24 6; 4 16 24 16 4; 1 4 6 4 1];
F=(1/256).*(B);
DFT_A=fftshift(fft2(A));
imshow(DFT_A);
DFT_A_F=DFT_A.*F;
figure
imshow(DFT_A_F) 
```

但是当我想看到部分结果时，我得到了这个错误

```
??? Error using ==> times
Matrix dimensions must agree.

Error in ==> fourier1 at 10 
DFT_A_F=DFT_A.*F; 
```

我知道我需要对面具进行零填充，但我不知道该怎么做，请我需要帮助谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:32:47.643

在您定义 DFT_A 之后，您想要的称为 'padarray' ：

```
padsize= [round(0.5*size(DFT_A,1)-0.5*size(F,1)) round(0.5*size(DFT_A,2)-0.5*size(F,2))];
F = padarray(F, padsize);
DFT_A_F=DFT_A.*F;
... 
```

但是你为什么不这样做（因为 A 是一个二维矩阵，所以如果需要的话 rgb2gray ）：

```
DFT_A_F = conv2(A,B,'same'); 
```

它更快，因为您不需要将所有这些零相乘，并且应该得到相同的结果。

# linux - ARM 系统调用的接口是什么，它在 Linux 内核中定义在哪里？

> ID：12946958
> 
> 赞同：11
> 
> 时间：2012-10-18T04:09:21.643
> 
> 标签：linux, linux-kernel, arm, system-calls

我已经阅读了 Linux 中的系统调用，并且到处都给出了关于 x86 架构（`0x80`中断和`SYSENTER`）的描述。但我无法追踪 ARM 架构中系统调用的文件和进程。任何人都可以请帮忙。

我知道的几个相关文件是：

**拱/臂/内核/calls.S**

**arch/arm/kernel/entry-common.S（需要解释）**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-08-11T20:56:42.693

比你问的更通用的答案。

在 Linux 上，这[`man syscall (2)`](http://man7.org/linux/man-pages/man2/syscall.2.html)是了解如何在各种体系结构中进行系统调用的良好开端。

[从该手册页](http://man7.org/linux/man-pages/man2/syscall.2.html)复制：

```
Architecture calling conventions
    Every architecture has its own way of invoking and passing arguments
    to the kernel.  The details for various architectures are listed in
    the two tables below.

    The first table lists the instruction used to transition to kernel
    mode (which might not be the fastest or best way to transition to the
    kernel, so you might have to refer to vdso(7)), the register used to
    indicate the system call number, the register used to return the sys‐
    tem call result, and the register used to signal an error.

    arch/ABI    instruction           syscall #  retval  error    Notes
    ────────────────────────────────────────────────────────────────────
    alpha       callsys               v0         a0      a3       [1]
    arc         trap0                 r8         r0      -
    arm/OABI    swi NR                -          a1      -        [2]
    arm/EABI    swi 0x0               r7         r0      -
    arm64       svc #0                x8         x0      -
    blackfin    excpt 0x0             P0         R0      -
    i386        int $0x80             eax        eax     -
    ia64        break 0x100000        r15        r8      r10      [1]
    m68k        trap #0               d0         d0      -
    microblaze  brki r14,8            r12        r3      -
    mips        syscall               v0         v0      a3       [1]
    nios2       trap                  r2         r2      r7
    parisc      ble 0x100(%sr2, %r0)  r20        r28     -
    powerpc     sc                    r0         r3      r0       [1]
    riscv       scall                 a7         a0      -
    s390        svc 0                 r1         r2      -        [3]
    s390x       svc 0                 r1         r2      -        [3]
    superh      trap #0x17            r3         r0      -        [4]
    sparc/32    t 0x10                g1         o0      psr/csr  [1]
    sparc/64    t 0x6d                g1         o0      psr/csr  [1]
    tile        swint1                R10        R00     R01      [1]
    x86-64      syscall               rax        rax     -        [5]
    x32         syscall               rax        rax     -        [5]
    xtensa      syscall               a2         a2      -

    Notes:

        [1] On a few architectures, a register is used as a boolean (0
            indicating no error, and -1 indicating an error) to signal
            that the system call failed.  The actual error value is still
            contained in the return register.  On sparc, the carry bit
            (csr) in the processor status register (psr) is used instead
            of a full register.

        [2] NR is the system call number.

        [3] For s390 and s390x, NR (the system call number) may be passed
            directly with svc NR if it is less than 256.

        [4] On SuperH, the trap number controls the maximum number of
            arguments passed.  A trap #0x10 can be used with only 0-argu‐
            ment system calls, a trap #0x11 can be used with 0- or
            1-argument system calls, and so on up to trap #0x17 for
            7-argument system calls.

        [5] The x32 ABI uses the same instruction as the x86-64 ABI and
            is used on the same processors.  To differentiate between
            them, the bit mask __X32_SYSCALL_BIT is bitwise-ORed into the
            system call number for system calls under the x32 ABI.  Both
            system call tables are available though, so setting the bit
            is not a hard requirement.

    The second table shows the registers used to pass the system call
    arguments.

    arch/ABI      arg1  arg2  arg3  arg4  arg5  arg6  arg7  Notes
    ──────────────────────────────────────────────────────────────
    alpha         a0    a1    a2    a3    a4    a5    -
    arc           r0    r1    r2    r3    r4    r5    -
    arm/OABI      a1    a2    a3    a4    v1    v2    v3
    arm/EABI      r0    r1    r2    r3    r4    r5    r6
    arm64         x0    x1    x2    x3    x4    x5    -
    blackfin      R0    R1    R2    R3    R4    R5    -
    i386          ebx   ecx   edx   esi   edi   ebp   -
    ia64          out0  out1  out2  out3  out4  out5  -
    m68k          d1    d2    d3    d4    d5    a0    -
    microblaze    r5    r6    r7    r8    r9    r10   -
    mips/o32      a0    a1    a2    a3    -     -     -     [1]
    mips/n32,64   a0    a1    a2    a3    a4    a5    -
    nios2         r4    r5    r6    r7    r8    r9    -
    parisc        r26   r25   r24   r23   r22   r21   -
    powerpc       r3    r4    r5    r6    r7    r8    r9
    riscv         a0    a1    a2    a3    a4    a5    -
    s390          r2    r3    r4    r5    r6    r7    -
    s390x         r2    r3    r4    r5    r6    r7    -
    superh        r4    r5    r6    r7    r0    r1    r2
    sparc/32      o0    o1    o2    o3    o4    o5    -
    sparc/64      o0    o1    o2    o3    o4    o5    -
    tile          R00   R01   R02   R03   R04   R05   -
    x86-64        rdi   rsi   rdx   r10   r8    r9    -
    x32           rdi   rsi   rdx   r10   r8    r9    -
    xtensa        a6    a3    a4    a5    a8    a9    -

    Notes:

        [1] The mips/o32 system call convention passes arguments 5
            through 8 on the user stack.

    Note that these tables don't cover the entire calling convention—some
    architectures may indiscriminately clobber other registers not listed
    here. 
```

所以这取决于系统是使用OABI还是EABI。

所以在 EABI 中你`r7`用来传递系统调用号，`r0-r6`用来传递参数，`SWI 0`用来进行系统调用，期望结果在`r0`.

`SWI <number>`在 OABI 中，除了您用于进行系统调用之外，一切都相同。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-18T09:35:27.033

在 ARM 世界中，您通过（以前称为 SWI）执行`software interrupt`（向内核发出信号的机制）。`supervisor call / svc`

ARM 程序集 (UAL) 语法如下所示：

```
SVC{<c>}{<q>} {#}<imm> 
```

（在 Linux 中你需要通过 #0）

您应该从[仿生](https://github.com/aosp-mirror/platform_bionic/blob/master/libc/arch-arm/bionic/syscall.S)或[uClibc](http://git.uclibc.org/uClibc/tree/libc/sysdeps/linux/arm/syscall.c)等其他项目中作弊。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T04:21:45.527

n900中hello world的拆解显示`svc #0`

[http://brnz.org/hbr/?m=201102](http://brnz.org/hbr/?m=201102)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-14T09:06:02.717

如果您正在寻找 Linux 系统中的系统调用号，请查看 [w3challs](https://syscalls.w3challs.com/)。

该站点有助于找出用于传递参数的系统调用号和寄存器。它支持下面列出的许多架构：

*   [Linux x86](https://syscalls.w3challs.com/?arch=x86)
*   [Linux x86_64](https://syscalls.w3challs.com/?arch=x86_64)
*   [Linux ARM](https://syscalls.w3challs.com/?arch=arm_strong)
*   [Linux ARM（拇指模式）](https://syscalls.w3challs.com/?arch=arm_thumb)
*   [Linux IA64（安腾）](https://syscalls.w3challs.com/?arch=ia64)
*   [Linux Mips o32](https://syscalls.w3challs.com/?arch=mips_o32)
*   [Linux Mips n32](https://syscalls.w3challs.com/?arch=mips_n32)
*   [Linux Mips n64](https://syscalls.w3challs.com/?arch=mips_n64)
*   [Linux Sparc（32 位）](https://syscalls.w3challs.com/?arch=sparc_32)
*   [Linux Sparc64](https://syscalls.w3challs.com/?arch=sparc_64)
*   [Linux PowerPC（32 位）](https://syscalls.w3challs.com/?arch=powerpc_32)
*   [Linux PowerPC64](https://syscalls.w3challs.com/?arch=powerpc_64)
*   [视窗 x86](http://j00ru.vexillium.org/ntapi/)
*   [视窗 x86_64](http://j00ru.vexillium.org/ntapi_64/)
*   [OS X BSD](https://sigsegv.pl/osx-bsd-syscalls/)

* * *

**编辑**：提交[https://w3challs.com/forum/general/dev/bugs#04](https://w3challs.com/forum/general/dev/bugs#04)以跟踪错误的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-20T16:59:21.423

**arm 系统调用号**

v4.19 将它们定义在`arch/arm/tools/syscall.tbl`：[https ://github.com/torvalds/linux/blob/v4.19/arch/arm/tools/syscall.tbl](https://github.com/torvalds/linux/blob/v4.19/arch/arm/tools/syscall.tbl)

摘抄：

```
0   common  restart_syscall     sys_restart_syscall
1   common  exit            sys_exit
2   common  fork            sys_fork
3   common  read            sys_read
4   common  write           sys_write
5   common  open            sys_open
6   common  close           sys_close 
```

我已经对此进行了测试，`exit`并且在 QEMU 用户模式下的[这个 Linux 程序集 hello world](https://github.com/cirosantilli/arm-assembly-cheat/blob/ef10fb4cbc4c5bd76ce1f90b7863597175de3b90/v7/linux/hello.S)`write`上有了这些确切的数字。

**arm64 系统调用号**

aarch64 使用了新的机制，参见：[https ://reverseengineering.stackexchange.com/questions/16917/arm64-syscalls-table/18834#18834](https://reverseengineering.stackexchange.com/questions/16917/arm64-syscalls-table/18834#18834)

# android - 使用正在运行的应用程序更改模式锁定时钟小部件

> ID：12946960
> 
> 赞同：1
> 
> 时间：2012-10-18T04:10:04.757
> 
> 标签：android, android-widget

我正在寻找使用正在运行的应用程序或与之关联的任何组件（例如服务）的自定义小部件替换出现在安全锁定屏幕上（例如使用模式锁时）的时钟小部件。我不打算彻底替换 Android 系统中的时钟小部件，也不打算用 WidgetLocker 之类的东西替换锁定屏幕。但是，我一直无法找到如何编写这样的东西。

我已经在[DI.FM](https://play.google.com/store/apps/details?id=com.audioaddict.di)和 Sky.FM 应用程序中看到了这一点，它们能够用自定义媒体控制器替换通常出现在图案上方的时钟。我要强调的最好的例子是下面链接的图像，其中在应用程序运行时，时钟显然被某种媒体播放器控制器替换，而无需修改系统文件。

如果有人对此有任何见解，将不胜感激。谢谢你。

[示例图像：图像比较显示通常出现在安全锁定屏幕上的图案上方的时钟，以及在 DI.FM 应用程序运行时出现的用于替换时钟的自定义小部件。](http://i.imgur.com/5K6xL.png)

# java - 打印我的递归阶乘结果

> ID：12946965
> 
> 赞同：0
> 
> 时间：2012-10-18T04:10:43.110
> 
> 标签：java, methods, factorial, println

我需要为我的方法打印我的最终答案。但是，它显示了整个计算到最后！我怎样才能消除只得到结果的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:12:48.820

相反，从另一个调用你的方法，只打印最终值：

```
System.out.println(getFactorial(5)); 
```

如果您真的需要从方法内部执行此操作，您可以创建一种“蹦床”方法，如下所示：

```
private static int getFactorial(int userInput) {
    int fact = _getFactorial(userInput);
    System.out.println(fact);
    return fact;
}

private static int _getFactorial(int userInput) {
    // real implementation
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:14:46.530

```
// Calculate the factorial value
private static int getFactorial(int userInput){
    int ans = userInput;
    if(userInput >1 ){

    ans*= (getFactorial(userInput-1));

    }

     return ans;
} 
```

并在函数外打印

```
System.out.println("The value of "+ b +"! is "+ getFactorial(b)); 
```

只打印一次，当您得到最终答案时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:16:47.353

这是一个递归函数调用，它在所有情况下执行，无需特殊条件检查。从另一种方法打印是一个不错的选择。

```
private static int getFactorial(int userInput){
    int ans = userInput;
    if(userInput >1 ){

    ans*= (getFactorial(userInput-1));
    }
    return ans;

}
// New method;
private static void printFactorial(int userInput){
    System.out.println("The value of " + userInput + "! is " + getFactorial(userInput));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T04:19:49.200

由于您不喜欢只返回一个值并从调用者代码打印的想法，您可以添加一个“打印答案”标志作为参数：

```
// Calculate the factorial value
private static int getFactorial(int value, boolean print){
    if (value > 1) {

        value *= getFactorial(value-1, false);

        if (print) {
            System.out.println("The value of "+ b +"! is "+ value);
        }
    }
    return value;
} 
```

不过，就我个人而言，我更喜欢[Jake King 回答](https://stackoverflow.com/a/12946989/535871)的“蹦床方法” 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T04:28:57.557

```
// Calculate the factorial value
private static int getFactorial(int userInput){
    int ans = userInput;
    if(userInput >1 ){

    ans*= (getFactorial(userInput-1));

    //System.out.println("The value of "+ b +"! is "+ ans);
    }
    return ans;
}

public static void main(String[] args)
{
    int ans;
    //get input
    ans = getFactorial(input);
    System.out.println("The value of "+ b +"! is "+ ans);
} 
```

# javascript - 如何在 Javascript 中验证大于、小于？

> ID：12946966
> 
> 赞同：1
> 
> 时间：2012-10-18T04:10:46.323
> 
> 标签：javascript, validation

再次回到另一个绝对初学者的问题。我正在验证一个表单，并且我希望将文本输入限制为 2 个以上且少于 15 个字符。我试过了：

```
function validateForm(formElement) {
var valid = true;
if (formElement.first_name.value.length < 2) return focusElement(formElement.first_name, 'Please enter a First Name that is more than 2 characters long.');
if (formElement.first_name.value.length > 15) return focusElement(formElement.first_name, 'Please enter a First Name that is less than 15 characters long.'); 
```

也

```
if (formElement.first_name.value.length < 2 && formElement.first_name.value.length > 15) return focusElement(formElement.first_name, 'Please enter a First Name that is more than 2 and less than 15 characters long.'); 
```

两者都会导致错误。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:14:14.783

这里有一个逻辑问题 - 长度不能小于 2 并且大于 15。你应该使用的是小于 2 或大于 15：

```
if (formElement.first_name.value.length < 2 || formElement.first_name.value.length > 15) return focusElement(formElement.first_name, 'Please enter a First Name that is more than 2 and less than 15 characters long.'); 
```

我也不确定您在`valid = true`这里使用的变量是什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:17:35.440

您的第二个验证码不正确。

没有什么可以是 <2 并且同时 >15。

您应该在两者之间使用 'OR'`||`操作，而不是 'AND' `&&`。

是什么`FocusElement`。显示代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:40:37.147

你得到哪个错误？我认为 FocusElement 是您的用户定义函数。我像下面一样测试你的代码，没关系。

```
<form name="frm">
  <input type="text" name="first_name">
  <input type="button" onClick="validateForm(frm)" value="Submit">
</form> 
```

我使用您的 validateForm 函数并编写 FocusElement javascript 函数，如下所示。

```
function focusElement(control,message)
{
   control.focus();
   alert(message);
} 
```

如果你想使用第二个验证码，你应该使用 || 代替 ＆＆。

# c# - C# Encoding.Convert 与 C++ MultiByteToWideChar

> ID：12946974
> 
> 赞同：1
> 
> 时间：2012-10-18T04:11:37.270
> 
> 标签：c#, character-encoding, utf-16

我有一个 C++ 代码片段，它使用 MultiByteToWideChar 将 UTF-8 字符串转换为 UTF-16

对于 C++，如果输入是“Hôtel”，则输出是“Hôtel”，这是正确的

对于 C#，如果输入是“HÃ´tel”，则输出是“HÃ´tel”，这是不正确的。

从 UTF8 转换为 UTF16 的 C# 代码看起来像

```
Encoding.Unicode.GetString(
            Encoding.Convert(
                Encoding.UTF8,
                Encoding.Unicode,
                Encoding.UTF8.GetBytes(utf8))); 
```

在 C++ 中，转换代码看起来像

```
MultiByteToWideChar(
    CP_UTF8,            // convert from UTF-8
    0,                  // default flags
    utf8.data(),        // source UTF-8 string
    utf8.length(),      // length (in chars) of source UTF-8 string
    &utf16[0],          // destination buffer
    utf16.length()      // size of destination buffer, in wchar_t's
    ) 
```

我希望在 C# 中获得与在 C++ 中相同的结果。C#代码有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T23:40:14.383

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T07:19:22.050

也许这个：

```
private static string Utf8ToUnicode(string input)
{
  return   Encoding.UTF8.GetString(input.Select(item => (byte)item).ToArray()); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T04:23:45.637

试试这个

```
 string str = "abc!";

            Encoding unicode = Encoding.Unicode;
            Encoding utf8 = Encoding.UTF8;

            byte[] unicodeBytes = unicode.GetBytes(str);

            byte[] utf8Bytes = Encoding.Convert( unicode,
                                                 utf8,
                                                 unicodeBytes );

            Console.WriteLine( "UTF Bytes:" );
            StringBuilder sb = new StringBuilder();
            foreach( byte b in utf8Bytes ) {
                sb.Append( b ).Append(" : ");
            }
            Console.WriteLine( sb.ToString() ); 
```

[此链接](http://www.utf8everywhere.org/)将有助于您了解编码及其转换

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T05:01:23.107

采用`System.Text.Encoding.UTF8.GetString().`

将您的 UTF-8 编码文本作为字节数组传入。该函数返回一个以 UTF-16 编码的标准 .net 字符串。

示例功能如下：

```
private string ReadData(Stream binary_file) {
  System.Text.Encoding encoding = System.Text.Encoding.UTF8;
  // Read string from binary file with UTF8 encoding
  byte[] buffer = new byte[30];
  binary_file.Read(buffer, 0, 30);
  return encoding.GetString(buffer);
} 
```

# javascript - 不显示使用 webkitPeerConnection00 的远程网络摄像头流

> ID：12946979
> 
> 赞同：2
> 
> 时间：2012-10-18T04:12:00.883
> 
> 标签：javascript, html, html5-video, webrtc

我正在[http://www.html5rocks.com/en/tutorials/webrtc/basics/](http://www.html5rocks.com/en/tutorials/webrtc/basics/)中尝试对等网络摄像头通信的示例代码，其中两个客户端都在同一页面中实现。

“本地”网络摄像头流正确显示。但是，“远程”流上没有任何显示，我不确定为什么。

下面是我的代码。我目前正在托管服务器上对其进行测试。谢谢！

```
var localStream;

navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia ||
    navigator.mozGetUserMedia || navigator.msGetUserMedia;

window.URL = window.URL || window.webkitURL;

navigator.getUserMedia({'audio':true, 'video':true}, onMediaSuccess, onMediaFail);

function onMediaSuccess(stream) {
    var localVideo = document.getElementById("localVideo");
    var url = window.URL.createObjectURL(stream);
    localVideo.autoplay = true;
    localVideo.src = url;
    localStream = stream;
    console.log('Local stream established: ' + url);
}

function onMediaFail() {
    alert('Could not connect stream');
}

function iceCallback1(){}
function iceCallback2(){}

function gotRemoteStream(e) {
    var remoteVideo = document.getElementById("remoteVideo");
    var stream = e.stream;
    var url = window.URL.createObjectURL(stream);
    remoteVideo.autoplay = true;
    remoteVideo.src = url;
    console.log('Remote stream received: ' + url);
}   

function call(){

    pc1 = new webkitPeerConnection00(null, iceCallback1);   // create the 'sending' PeerConnection
    pc2 = new webkitPeerConnection00(null, iceCallback2);   // create the 'receiving' PeerConnection

    pc2.onaddstream = gotRemoteStream;                      // set the callback for the receiving PeerConnection to display video

    console.log("Adding local stream to pc1");
    pc1.addStream(localStream);                             // add the local stream for the sending PeerConnection

    console.log("Creating offer");
    var offer = pc1.createOffer({audio:true, video:true});  // create an offer, with the local stream

    console.log("Setting local description for pc1");
    pc1.setLocalDescription(pc1.SDP_OFFER, offer);          // set the offer for the sending and receiving PeerConnection

    console.log("Start pc1 ICE");
    pc1.startIce();

    console.log("Setting remote description for pc2");
    pc2.setRemoteDescription(pc2.SDP_OFFER, offer);

    // gotRemoteStream Triggers here

    console.log("Creating answer");                         // create an answer
    var answer = pc2.createAnswer(offer.toSdp(), {has_audio:true, has_video:true});

    console.log("Setting local description for pc2");   
    pc2.setLocalDescription(pc2.SDP_ANSWER, answer);        // set it on the sending and receiving PeerConnection 

    console.log("Setting remote description for pc1");
    pc1.setRemoteDescription(pc1.SDP_ANSWER, answer);

    console.log("Start pc2 ICE");
    pc2.startIce();                                         // start the connection process

    console.log("script done");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-12T20:17:32.010

尝试这个：

 **Vikas Marwaha 和 Justin Uberti 的**simpl.info RTCPeerConnection****

 **[http://www.simpl.info/rtcpeerconnection/](http://www.simpl.info/rtcpeerconnection/)

它对我来说效果很好，而且非常干净和简单。**

# c# - 检测顶级帧 BHO

> ID：12946980
> 
> 赞同：2
> 
> 时间：2012-10-18T04:12:05.120
> 
> 标签：c#, visual-studio-2012, bho

对不起我的无知。你必须向我解释事情，我正在涉足新领域。我有一些 JAVA 背景，但主要是 php、javascript。

[http://www.codeproject.com/Articles/19971/How-to-attach-to-Browser-Helper-Object-BHO-with-C](http://www.codeproject.com/Articles/19971/How-to-attach-to-Browser-Helper-Object-BHO-with-C)

我对这篇文章进行了一些自己的修改，我的问题是，我如何检测网页的“顶级框架”，即父文档。`OnDocumentComplete`当页面上的任何 iframe 也完成时，我执行的任何代码都将运行。

我的功能和我实施的解决方案实际上并没有产生正确的结果。

```
public class BHO:IObjectWithSite
{
    WebBrowser webBrowser;
    HTMLDocument document;

    public void OnDocumentComplete(object pDisp, ref object URL)
    {
        document = (HTMLDocument)webBrowser.Document;
        string href = document.location.href;

        //get top level page
        if (href == URL.ToString())
        {
            HttpWebRequest WebReq = (HttpWebRequest)WebRequest.Create("http://mysite.com");
            WebReq.Method = "POST";
            WebReq.ContentType = "application/x-www-form-urlencoded";
            byte[] buffer = Encoding.ASCII.GetBytes("string");
            WebReq.ContentLength = buffer.Length;
            Stream PostData = WebReq.GetRequestStream();
            PostData.Write(buffer, 0, buffer.Length);
            PostData.Close();
            // Prepare web request and send the data.
            HttpWebResponse WebResp = (HttpWebResponse)WebReq.GetResponse();
            StreamReader streamResponse = new StreamReader(WebResp.GetResponseStream(), true);
            string Response = streamResponse.ReadToEnd();

            Newtonsoft.Json.Linq.JObject json = Newtonsoft.Json.Linq.JObject.Parse(Response);
            string active = json["active"].ToString();
            //print to screen
            System.Windows.Forms.MessageBox.Show(active, "Title");

        }
    } 
```

检查`document.location.href`匹配是否`URL`在大多数情况下有效，但不能保证。所以结果是我最终在 1 个页面加载时出现了多个 web 请求和弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:00:36.023

最简单的方法是将 Web 浏览器对象 ( `IWebBrowser2`) 存储在方法中的对象属性中`SetSite`（C++ 中的示例，但应该可以直接转换为 C#）：

```
CComQIPtr<IServiceProvider> pServiceProvider(pUnkSite);
if (!pServiceProvider) {
  return E_FAIL;
}

pServiceProvider->QueryService(SID_SWebBrowserApp, IID_IWebBrowser2, (LPVOID*)&m_WebBrowser.p);
if (!m_WebBrowser) {
  return E_FAIL;
} 
```

这会将浏览器指针存储在对象成员`m_WebBrowser`中。然后您可以与`pDisp`参数进行比较`OnDocumentComplete`：

```
CComQIPtr<IWebBrowser2> webBrowser(pDisp);
if (webBrowser == m_WebBrowser) {
    // This is the top-level page.
} 
```

# php - 使用 PHP 输出使用 COUNT(*) 的 MySQL 查询

> ID：12946984
> 
> 赞同：0
> 
> 时间：2012-10-18T04:12:20.677
> 
> 标签：php, mysql, sql

> **可能重复：**
> [mysql 计数到 PHP 变量中](https://stackoverflow.com/questions/797335/mysql-count-into-php-variable)

从 MySQL 命令提示符运行时，我有以下查询成功返回：

```
SELECT `from_email`, COUNT(*) 
FROM `user_log` 
GROUP BY `from_email` 
ORDER BY COUNT(*) DESC 
```

此查询返回具有以下列的结果集

```
`from_email` | COUNT(*) 
```

我的问题是，如何遍历结果集并输出结果。我已经格式化了我的表格，我只需要一个表格单元格中的 from_email 和另一个表格单元格中的每条记录的关联 COUNT 。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T04:13:25.827

添加`ALIAS`一个

```
SELECT `from_email`, COUNT(*) AS totalCount 
FROM `user_log` 
GROUP BY `from_email` 
ORDER BY totalCount DESC 
```

你现在可以获取值

```
 $row["from_email"]
 $row["totalCount"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:15:16.723

以下是连接数据库并检索结果并显示在表格中的代码。

```
<?
$conn = mysqli_connect("localhost", "root","root", "test");
$query="SELECT `from_email`, COUNT(*) AS emailCount FROM `user_log` GROUP BY `from_email` ORDER BY COUNT(*) DESC";
$result = mysqli_query($conn, $query);
if ($result) {
   while ($row = mysqli_fetch_array($result, MYSQLI_BOTH))
   {
      $table[] = $row;
   }
}
?>

<table border="1">
<tr>
   <td width="200">From Email</td>
   <td width="50">Count</td>
</tr>

<?
if($table){
    for($i=0;$i<count($table);$i++){
?>

<tr>
   <td><?=htmlentities($table[$i]["from_email"])?>&nbsp;</td>
   <td><?=htmlentities($table[$i]["emailCount"])?>&nbsp;</td>
</tr>

<?
    }
}
?>

</table> 
```

# java - 无法根据某些条件对某些值进行分组

> ID：12946986
> 
> 赞同：0
> 
> 时间：2012-10-18T04:12:43.500
> 
> 标签：java

我有一些从数据库返回的值作为结果集，如下所示

```
**resource_name         menu_name       menu_group_name**
DepartmentAction        Department      Admin Operation
PositionAction          Position        Admin Operation
FoodHabitAction         FoodHabits      Admin Operation
ReligiousAction         Religious       Admin Operation
NationalitiesAction     Nationlities    Admin Operation 
```

我想根据 menu_group_name 对 resource_name 和 menu_name 进行分组，如下所示

如果 menu_group_name 与将所有相应的 resource_name 和 menu_mane 分组到 menu_group_name 相同。

这是我试过的方法，

```
public Map<String,List> getMenuForLoggedinRole(int roleid){
        Map<String,List> menuListMap = new LinkedHashMap<String,List>();
        List<MenuListViewModel> menuNamesList = new ArrayList<MenuListViewModel>();
        MenuListViewModel menuViewModel;
        Connection connection = getConnection();
        PreparedStatement ps = null;
        ResultSet rs = null;
        if (connection != null) {
            try {
                ps = connection.prepareStatement(" select ar.resource_name,ar.menu_name,mg.menu_group_name "
                        + " from m_application_resources as ar,"
                        + " m_menu_groups as mg,m_access_matrix as amatrix "
                        + " where ar.resourceid = amatrix.resourceid and amatrix.roleid=?");
                ps.setInt(1, roleid);
                rs = ps.executeQuery();
                if(rs.next()) {
                   String menu_group_name = rs.getString("menu_group_name");
                   String resource_name = rs.getString("resource_name");
                   String menu_name = rs.getString("menu_name");
                   if(menuListMap.containsKey(menu_group_name)){
                       menuNamesList =(List) menuListMap.get(menu_group_name);
                       menuViewModel = new MenuListViewModel();
                       menuViewModel.setResource_name(resource_name);
                       menuViewModel.setMenu_name(menu_name);
                       menuNamesList.add(menuViewModel);
                       menuListMap.put(menu_group_name, menuNamesList);
                   }else{
                       menuViewModel = new MenuListViewModel();
                       menuViewModel.setResource_name(resource_name);
                       menuViewModel.setMenu_name(menu_name);
                       menuNamesList.add(menuViewModel);
                       menuListMap.put(menu_group_name, menuNamesList);
                   }
                } 
            } catch (Exception ex) {
                ex.printStackTrace();
            }finally {
                try {
                    closeConnection(connection, rs, ps);
                } catch (Exception ex) {
                    ex.printStackTrace();
                    //use logger here
                }
            }
        }

        printMap(menuListMap);
        return menuListMap;
    } 
```

但这并没有给我不想要的输出。

我的视图模型：

```
public class MenuListViewModel {

    private String resource_name = "";
    private String menu_name = "";

    public String getResource_name() {
        return resource_name;
    }

    public void setResource_name(String resource_name) {
        this.resource_name = resource_name;
    }

    public String getMenu_name() {
        return menu_name;
    }

    public void setMenu_name(String menu_name) {
        this.menu_name = menu_name;
    }

} 
```

和

```
 public static void printMap(Map mp) {
        List menuList = new ArrayList();
        MenuListViewModel model;
        Iterator it = mp.entrySet().iterator();
        while (it.hasNext()) {
            Map.Entry pairs = (Map.Entry)it.next();
            menuList =(List) pairs.getValue();
            for(int i=0;i<=menuList.size();i++){
                model =(MenuListViewModel) menuList.get(i);
                System.out.println("Resource_name :  "+model.getResource_name());
                System.out.println("Menu_name :  "+model.getMenu_name());
            }
            System.out.println(pairs.getKey() + " = " + pairs.getValue());
            it.remove(); // avoids a ConcurrentModificationException
        }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:25:59.683

如果键不包含在地图中，那么您将实例化新列表。否则它将使用先前的列表对象（如果存在）。

```
 if(menuListMap.containsKey(menu_group_name)){
                       menuNamesList =(List) menuListMap.get(menu_group_name);
                       menuViewModel = new MenuListViewModel();
                       menuViewModel.setResource_name(resource_name);
                       menuViewModel.setMenu_name(menu_name);
                       menuNamesList.add(menuViewModel);
                       menuListMap.put(menu_group_name, menuNamesList);
                   }else{
                       menuNamesList = new ArrayList<MenuListViewModel>();
                       menuViewModel = new MenuListViewModel();
                       menuViewModel.setResource_name(resource_name);
                       menuViewModel.setMenu_name(menu_name);
                       menuNamesList.add(menuViewModel);
                       menuListMap.put(menu_group_name, menuNamesList);
                   } 
```

# windows - 如何在 Windows 中从 Unicode 文件名创建 Gdk.Pixbuf？

> ID：12946991
> 
> 赞同：2
> 
> 时间：2012-10-18T04:13:01.310
> 
> 标签：windows, unicode, mono, gtk, filenames

我有一个 C#/Mono/Gtk# 程序，它只是将放在窗口中的文件加载为 Gdk.Pixbuf 并显示它们。

它在 Ubuntu 上运行良好。但在 Windows 上，如果我尝试删除具有非 ASCII 文件名的文件，例如 C:\áéíóú.jpg，程序将崩溃。我首先认为这是我的代码有问题。所以我做了一个简单的测试用例。

```
Console.WriteLine("{0} exists? {1}", Filename, File.Exists(Filename));
Pixbuf pixels = new Pixbuf (Filename) 
```

输出

> C:\áéíóú.jpg 存在吗？True
> GLib.GException: 无法打开文件 'C:\áéíóú.jpg': 没有这样的文件或目录

事实证明，Glib 无法找出存在的文件，存在。而且我不知道如何修复它，以便我可以从 Unicode 文件名将图像文件加载到 Windows 上的 Pixbuf 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:38:50.913

这似乎是 gtk-sharp<->gdk-pixbuf 互操作中的问题。

显然，在除 windows 之外的每个操作系统上，`gdk_pixbuf_new_from_file`都采用 utf8 编码的文件名。但是，在 Windows 上，此函数被重命名`gdk_pixbuf_new_from_file_utf8`并替换为一个包装器，该包装器进行区域设置转换并继续调用 utf8 版本。gtk-sharp 不知道这一点并使用`gdk_pixbuf_new_from_file`传递 utf8 参数，因此 Windows 上意外的额外语言环境转换会破坏文件名。

作为一种解决方法，我建议使用`Pixbuf`采用 a`Stream`而不是文件名的构造函数，但张贴者报告说不能正确加载他的图像。

**更新：** 幸运的是，Pixbuf 包装类有一个构造函数，它接受现有 pixbuf 对象的原始 IntPtr。因此，错误构造函数中的代码可以在一些辅助方法中复制、修复和隐藏，例如：

```
[DllImport("libgdk_pixbuf-2.0-0.dll")]
static extern IntPtr gdk_pixbuf_new_from_file_utf8(IntPtr filename, out IntPtr error);

static Pixbuf CreatePixbufWin32(string filename)
{
    IntPtr native_filename = GLib.Marshaller.StringToPtrGStrdup(filename);
    IntPtr error = IntPtr.Zero;
    IntPtr raw = gdk_pixbuf_new_from_file_utf8(native_filename, out error);
    GLib.Marshaller.Free(native_filename);
    if (error != IntPtr.Zero) throw new GLib.GException(error);
    return new Pixbuf(raw);
}

static Pixbuf CreatePixbuf(string filename)
{
    if (Environment.OSVersion.Platform == PlatformID.Win32NT)
    {
        return CreatePixbufWin32(filename);
    }
    return new Pixbuf(filename);
} 
```

我已经成功地测试了这一点。希望这可以帮助。

# php - 从表列中获取多个值到重复行中

> ID：12946994
> 
> 赞同：-1
> 
> 时间：2012-10-18T04:13:11.927
> 
> 标签：php, sql, wordpress

我正在使用 Wordpress，我必须弄清楚如何从同一列中获取多个值并将它们转换为变量。

最后一步是我只希望数据显示在一个表格中，如下所示：

```
Bob Company1 <br>
Alex Company2 
```

相反，我得到`Bob Alex Company1 Company 2`要么

```
Bob <br>
Alex<br>
Company1<br>
Company2 
```

这是我正在使用的两个不同版本：

```
$sql = "SELECT meta_value as guest from wp_postmeta INNER JOIN wp_posts ON wp_posts.ID  = wp_postmeta.post_id WHERE post_type='guests' AND meta_key='guest_name' UNION SELECT meta_value as company from wp_postmeta INNER JOIN wp_posts ON wp_posts.ID = wp_postmeta.post_id WHERE post_type='guests' AND meta_key='guests_company'";
$result = mysql_query($sql);
$NumberOfResults=mysql_num_rows($result);

if (mysql_num_rows($result) == 0) {
    echo "No Guests yet... stay tuned!";
    exit;
}

while(list($guest,$company)= mysql_fetch_row($result)) 
{ 
    echo "<table><tr><td>".$guest."</td><td>".$company."</td></tr></table>";
} 
```

或者

```
$sql = mysql_query("SELECT meta_value as guest from wp_postmeta INNER JOIN wp_posts ON wp_posts.ID = wp_postmeta.post_id WHERE post_type='guests' AND meta_key='guest_name' LIMIT 2 UNION SELECT meta_value as company from wp_postmeta INNER JOIN wp_posts ON wp_posts.ID = wp_postmeta.post_id WHERE post_type='guests' AND meta_key='guests_company'");

$i = 1;
while ($get = mysql_fetch_array($sql))
{
    echo '<table><tr><td>'.$get["guest"].'</td><td>'.$get["company"].'</td></tr></table>';

    $i++;
} 
```

任何帮助将不胜感激！！！谢谢！

编辑：如果将来有人想使用 Wordpress 中的高级自定义字段创建自己的小部件，这里或多或少是最终产品：

```
$sql = "SELECT p.ID AS post_id, g.meta_value as guest, c.meta_value as company, d.meta_value as date
FROM wp_posts p
JOIN wp_postmeta g ON g.post_id = p.id AND g.meta_key = 'guest_name'
JOIN wp_postmeta c ON c.post_id = p.id AND c.meta_key = 'guests_company'
JOIN wp_postmeta d ON d.post_id = p.id AND d.meta_key = 'show_date'
WHERE p.post_status = 'publish'
ORDER by d.meta_value DESC";

$query = mysql_query($sql);

echo '<table><tr><th>Guest</th><th>Company</th><th>Show Date</th></tr>';
while ($get = mysql_fetch_array($query)) {$newDate = date("m-d-Y", strtotime($get["date"]));
    echo '<tr><td><a href="http://yoururl.com/?p='.$get["post_id"].'">'.$get["guest"].'</a></td><td>'.$get["company"].'</td><td>'.$newDate.'</td></tr>';
}
echo '</table>'; 
```

非常感谢 doublesharp 在这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:21:08.810

如果我正确理解您的问题，您必须编写代码以显示如下表格：

```
echo '<table>';
while ($get = mysql_fetch_array($sql))
{
    echo '<tr><td>'.$get["guest"].'</td><td>'.$get["company"].'</td></tr>';

}
echo '</table>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:28:55.927

如果 postmeta 值附加到不同的帖子，如查询中不同的“post_type”值所示，那么您将需要一些其他识别信息将它们链接在一起。如果有一个 post_id 同时具有 a`guest_name`和`guest_company`meta_value 那么您可以加入它两次以获得结果。使用 a`UNION`总是会导致它们以不同的行返回。

```
// Join the postmeta table to posts twice, once for each meta_key. 
$sql = <<<SQL
SELECT p.ID AS post_id, g.meta_value as guest, c.meta_value as company
FROM wp_posts p
JOIN wp_postmeta g ON g.post_id = p.id AND g.meta_key = 'guest_name'
JOIN wp_postmeta c ON c.post_id = p.id AND c.meta_key = 'guests_company'
WHERE p.post_status = 'publish'
SQL;

// Execute the query
$query = mysql_query($sql);

// Start your table for output
echo '<table>';
while ($get = mysql_fetch_array($query)) {
    // Write the output of each row
    echo '<tr><td>'.$get["guest"].'</td><td>'.$get["company"].'</td></tr>';
}
// Close the table
echo '</table>'; 
```

如果这是在 Wordpress 中，我建议您使用该`$wpdb`对象进行查询。

# cuda - 如何获得编译器“Cuda Fortran”的免费版本（非试用版）？

> ID：12946996
> 
> 赞同：6
> 
> 时间：2012-10-18T04:13:24.180
> 
> 标签：cuda, fortran

我搜索了免费的 cuda fortran 编译器，发现只有 PGI 编译器，它是非免费的。也许我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T06:09:35.887

事实上，目前没有免费的 CUDA Fortran 实现。作为替代方案，如果您愿意只用 C/C++ 编写程序的 CUDA 内核，则可以从 Fortran 调用 C 函数。例如，参见[这篇文章](http://www.computationalmathematics.org/topics/files/calling_cuda_from_fortran.html)。

作为一个成本较低的选项，CAPS[为 Fortran 提供了一个 OpenACC 编译器，价格为 199 美元](http://blogs.nvidia.com/2012/06/openacc-complier-fast-portable-just-199-from-caps/)。我意识到它不完全是 CUDA Fortran，而且它不是免费的，但它可能对您或其他 Fortran 程序员有用。

# html - CSS下拉菜单不起作用

> ID：12946999
> 
> 赞同：-2
> 
> 时间：2012-10-18T04:13:29.953
> 
> 标签：html, css, wordpress

每当我尝试将下拉代码添加到我的菜单链接（即关于、投资组合）中时，它们只会出现在右侧而不显示为下拉菜单。

检查网站：

CSS中一定有冲突。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T04:19:08.960

可以这样用吗：

### HTML

```
<ul class="nav">
    <li>
        <a href="#">Menu 1</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 2</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 3</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
</ul> 
```

### CSS

```
* {font-family: "Segoe UI", Tahoma;}
ul.nav {border-bottom: 1px solid #999;}
ul.nav li a {display: block; text-decoration: none; color: #333; padding: 5px; border: 1px solid #fff;}
ul.nav > li:hover {border: 1px solid #666; border-bottom: 1px solid #fff;}
ul.nav li a:hover {background: #ccc; border: 1px solid #999;}
ul.nav > li {display: inline-block; position: relative; border: 1px solid #fff;}
ul.nav > li ul {display: none; position: absolute; left: -1px; width: 150px; border: 1px solid #666; border-top-color: #fff; margin-top: 1px;}
ul.nav > li:hover ul {display: block;}
ul.nav > li ul li {display: block;} /* Vertical Menu */
ul.nav > li ul li {display: inline-block;} /* Horizontal Menu */ 
```

### 小提琴： http:
[//jsfiddle.net/vMuxA/](http://jsfiddle.net/vMuxA/)（垂直菜单）
[http://jsfiddle.net/vMuxA/1/](http://jsfiddle.net/vMuxA/1/)（水平菜单）