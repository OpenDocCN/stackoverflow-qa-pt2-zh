# StackOverflow 问答 14009000-14009999

# javascript - 如何判断一首歌曲是否已结束或使用 spotify API 单击下一个按钮？

> ID：14009006
> 
> 赞同：1
> 
> 时间：2012-12-23T06:02:50.237
> 
> 标签：javascript, spotify

我正在使用 Spotify API 为 OSX 上的桌面 Spotify 应用程序开发一个应用程序。我一直在拼命想弄清楚如何判断一首歌曲是否已经结束并触发另一首曲目播放。

这是我的事件监听器代码：

```
models.player.observe(models.EVENT.CHANGE, function(event) {
    console.debug(event);
    if(event.data.playstate == false){
        $('.wholikes').remove();
        getTrack();
    }               
}); 
```

我想我需要查看 event.data，但是当我检查检查器时，无论它观察到什么变化，它都具有相同的属性。类型设置为不特定的“playerStateChanged”。我希望在歌曲结尾或按下下一个按钮时触发新曲目，但不是当用户将洗涤器更改为歌曲的不同部分时。有任何想法吗？我已经彻底检查了文档，但在任何地方都找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:53:58.243

当您正在观察的事件触发时，请检查播放器对象的`track`属性 ( `models.player.track`)。当曲目更改时，您应该会发现它已更改为下一个曲目（如果有），或`null`。此时，您可以开始下一个曲目。

# java - HashMap java中键数的硬限制/上限

> ID：14009007
> 
> 赞同：2
> 
> 时间：2012-12-23T06:02:52.530
> 
> 标签：java

> **可能重复：**
> [在 Java 中限制 HashMap 的最大大小](https://stackoverflow.com/questions/5601333/limiting-the-max-size-of-a-hashmap-in-java)

当键数超过容量时，如何确保 Java 中的 HashMap 不会重新散列。我想限制存储在 hashmap 中的键数量（额外的键应该根据 hashmap 的默认驱逐策略被驱逐，但 hashmap 不应该被重新哈希/增加容量）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T06:15:42.967

您可以使用`java.util.LinkedHashMap`，用法示例

```
Map m = new LinkedHashMap() {
    int max = 2;
    @Override
    protected boolean removeEldestEntry(Map.Entry eldest) {
        return size() > max;
    }
};
m.put(1, 1);
m.put(2, 1);
m.put(3, 1);
System.out.println(m.size()); 
```

输出

```
2 
```

`accessOrder = true`如果您在其构造函数中设置，您也可以使其成为 LRU 缓存

```
public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:07:24.840

我认为没有任何内置支持，但您可能希望自己实现自定义限制：

```
 private Map<K,V> myMap = new HashMap<K,V>();
    private int MAX_SIZE = 100;

    public void addElement(K k, V v){
       if(myMap.size() == MAX_SIZE){
             throw new Exception("Size Exceeded");
             //if don't want'to throw exception then remove the above statement
       }else{
          myMap.put(k,v);
       }
    }
    ...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T06:08:51.800

您可以扩展[`LinkedHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)并提供实现`removeEldestEntry`

> 可以重写 removeEldestEntry(Map.Entry) 方法，以在将新映射添加到映射时自动删除陈旧映射的策略。

# c++ - C++的本地持续集成系统？

> ID：14009010
> 
> 赞同：4
> 
> 时间：2012-12-23T06:03:27.383
> 
> 标签：c++, continuous-integration

“本地持续集成系统”可能不是正确的术语，但我希望找到的是一个持续集成系统，可以配置为监视本地文件（特别是 C++ 文件）的更改，并且 1）尝试编译受影响的目标文件（在第一次失败时停止），如果成功并且没有新的源文件更改 2) 链接受影响的二进制文件，如果成功并且没有新的源文件更改 3) 运行受影响的测试。

通过监控本地文件的更改，我并不是指监控对修订控制系统的提交，而是本地文件在保存时的状态。理想情况下，系统将提供与源编辑器的集成，以便它可以监视编辑器中甚至尚未保存到磁盘的更改。

理想情况下，它还将提供当前和最近状态的图形指示（最好在 Windows 7 上），以便在需要时快速钻取故障。

我发现的最接近的东西是[此处](http://dabapps.com/blog/python-tools-local-continuous-integration/)描述的[鼻子](http://nose.readthedocs.org/en/latest/)，但这仅涵盖运行 Python 测试而不是构建 C++ 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:43:28.770

继续集成是当今一个新兴的概念，因此您并不孤单。

假设您在 Windows 上进行开发，如果您使用 Microsoft Visual Studio
，您可以考虑使用 Microsoft 的**[Visual Studio Team Foundation Server (TFS)](http://www.microsoft.com/visualstudio/eng/products/visual-studio-team-foundation-server-2012)**
（以前称为*[Visual Studio Team System](http://msdn.microsoft.com/en-us/library/fda2bad5%28v=vs.80%29.aspx)*）。
这将在一个软件包中为您提供**源代码控制**和**构建自动化**
， 并与 Microsoft 产品完美集成，当然
（我认为 MSDN 用户有免费版本）。

如果不热衷于 Microsoft 产品，或者只是在寻找构建自动化，
我会推荐一个很棒**的开源继续集成**工具：
**[Jenkins CI](http://jenkins-ci.org/)**。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T06:25:20.223

与您正在寻找的最接近的是[cdash](http://www.cdash.org/)和[Boost 测试台](http://www.boost.org/doc/libs/1_52_0/libs/test/doc/html/index.html)；我认为像您正在寻找的工具这样的工具永远不会存在于 C++ 中，因为在编辑单个文件后编译每个项目只会浪费时间在高效的 C++ 工作流程中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T12:15:02.873

我会看一下 Jenkins CI——它是一个很好的工具，可以在任何平台上运行，并且可以配置为做几乎任何事情。我用它来运行与手机通话、拨打电话并记录这些电话的 Python 代码（并测试了通话的“质量”，尽管我的项目从未获得过真正质量的软件，因为我们只是展示了一个概念)，然后 Jenkins 会生成“效果如何”的图表。

你也可以做你描述的“链接” - 所以它会发现你的源代码已经改变，尝试构建它[通常这是使用 make 完成的，所以它会自动停止在第一个错误文件（尽管它可能是数百个一个文件中的错误！）]。编译并构建成功，然后链接到运行测试。不完全确定您如何确定什么是“相关的”。如果您的测试周期不是很大，我会全部运行它们！

# encoding - Mime 消息中的主题标头何时被编码？

> ID：14009013
> 
> 赞同：0
> 
> 时间：2012-12-23T06:04:00.567
> 
> 标签：encoding, mime

我正在尝试理解 mime 编码。我有 2 个带有主题标头的消息实例：

1) 在 ICS Webtop 更新中回复评论`Is my stone dead? Constantly quick-flashing white side-LED =?=`= 没用的笔记本电脑？

2）在ICS Webtop更新中回复评论`Is? white side-LED =?=`=没用的lapdock

我在这两种情况下都看到了不同的行为，而前者正在被编码，而后者则没有。阅读了一些 Mime 文档后，我理解了当没有 7 位非 ASCII 字符时客户端可以对消息进行编码的理论。但是为什么上面的消息有区别？消息长度也是一个因素吗？

# cocoa - 带有 Core-Plot 和 NSViewController 的模糊文本

> ID：14009014
> 
> 赞同：2
> 
> 时间：2012-12-23T06:04:26.683
> 
> 标签：cocoa, core-plot, nsviewcontroller

我正在使用 NSViewController 来加载一个带有呈现核心绘图图表的视图的笔尖。我使用以下代码替换“目标视图”：

```
NSViewController* aViewController = [[NSViewController alloc] initWithNibName:@"nib name" bundle:nil];
if (aViewController != nil)
{
    myCurrentViewController = aViewController;
}

// embed the current view to our host view
[myTargetView addSubview: [myCurrentViewController view]];
[[myCurrentViewController view] setFrame: [myTargetView bounds]]; 
```

这导致图表中的所有内容基本上看起来都有些模糊。我注释掉了 setFrame 并尝试了 setFrame 的整数值，但没有任何区别。目标视图也没有分层。

如果我摆脱视图控制器并将 myTargetView 更改为实际的图表视图类（PlotView），那么它不再是模糊的。这是10.8。知道为什么使用 NSViewController 路由会弄乱图表视图吗？

更新 #1：我使用 Plot_Gallery_Mac 示例项目中的 PlotGalleryController、PlotView、PlotItem 和 VerticalBarChart 通过 NSViewController 生成图表。我猜测示例 PlotItem 类中的设置（特别是 renderInView 方法）与将其与 NSViewController 一起使用不兼容。

# android - 了解 Android 中的多点触控

> ID：14009016
> 
> 赞同：0
> 
> 时间：2012-12-23T06:04:52.513
> 
> 标签：android

我一直在研究 android 上的多点触控，但我无法理解我找到的一些行。我搜索了谷歌，但找不到可以理解的资源。我正在发布代码。

`onTouch`我理解除了“前两行方法”之外的大部分内容，`if (event.getAction() != MotionEvent.ACTION_MOVE && i != pointerIndex)`并且`case MotionEvent.ACTION_MOVE:`

请解释一下。谢谢你的帮助~~

```
package --- ;

--imports--

@TargetApi(5)
public class MultiTouchTest extends Activity implements OnTouchListener {
StringBuilder builder = new StringBuilder();
TextView textView;
float[] x = new float[10];
float[] y = new float[10];
boolean[] touched = new boolean[10];
int[] id = new int[10];

private void updateTextView() {
    builder.setLength(0);
    for (int i = 0; i < 10; i++) { 
        builder.append(touched[i]);
        builder.append(", ");
        builder.append(id[i]);
        builder.append(", ");
        builder.append(x[i]);
        builder.append(", ");
        builder.append(y[i]);
        builder.append("\n");
    }
    textView.setText(builder.toString());
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    textView = new TextView(this);
    textView.setText("Touch and drag(multiple fingers supported!");
    textView.setOnTouchListener(this);
    setContentView(textView);
    for (int i = 0; i < 10; i++) {
        id[i] = -1; 
    }
    updateTextView();
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    int action = event.getAction() & MotionEvent.ACTION_MASK; 
    int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_ID_MASK) >> MotionEvent.ACTION_POINTER_ID_SHIFT; 
    int pointerCount = event.getPointerCount(); 
    for (int i = 0; i < 10; i++) { 
        if (i >= pointerCount) {
            touched[i] = false;
            id[i] = -1;
            continue;
        }

        if (event.getAction() != MotionEvent.ACTION_MOVE
                && i != pointerIndex) { 

            continue;
        }
        int pointerId = event.getPointerId(i);
        switch (action) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_POINTER_DOWN:
            touched[i] = true;
            id[i] = pointerId;
            x[i] = (int) event.getX(i);
            y[i] = (int) event.getY(i);
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
        case MotionEvent.ACTION_OUTSIDE:
        case MotionEvent.ACTION_CANCEL:
            touched[i] = false;
            id[i] = -1;
            x[i] = (int) event.getX(i);
            y[i] = (int) event.getY(i);
            break;
        case MotionEvent.ACTION_MOVE:
            touched[i] = true;
            id[i] = pointerId;
            x[i] = (int) event.getX(i);
            y[i] = (int) event.getY(i);
            break;
        }

    }
    updateTextView();

    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:29:24.610

```
 /*Extract the index of the pointer that touch the sensor
    Return the masked action being performed, without pointer index 
     information.
    May be any of the actions: ACTION_DOWN, ACTION_MOVE, ACTION_UP,
     ACTION_CANCEL, ACTION_POINTER_DOWN, or ACTION_POINTER_UP.
    And return the index associated with pointer actions.*/

 **int action = event.getAction() & MotionEvent.ACTION_MASK;** 

     /* Extract the index of the pointer that left the touch sensor
     For ACTION_POINTER_DOWN or ACTION_POINTER_UP as returned by getActionMasked(),
     this returns the associated pointer index. The index may be used with 
getPointerId(int), getX(int), getY(int), getPressure(int), and getSize(int)
to get information about the pointer that has gone down or up.*/

**int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_ID_MASK) >> MotionEvent.ACTION_POINTER_ID_SHIFT;** 
```

更多详情请参考： [链接 1](http://android-developers.blogspot.in/2010/06/making-sense-of-multitouch.html) [链接 2](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-3-understanding-touch-events/1775)

# php - 在 SQL 中显示组合表

> ID：14009017
> 
> 赞同：0
> 
> 时间：2012-12-23T06:04:59.363
> 
> 标签：php, mysql, sql

假设我有一个如下所示的 MySQL 表：

```
 BookTitle    Chapter    DateAdded  
  Book1          3       2012-12-15
  Book1          2       2012-12-16 
  Book1          1       2012-12-15
  Book2          2       2012-12-16 
```

我想用 HTML 显示它，所以它看起来像这样：

```
 Book2      2
 Book1      2,3,1 
```

基本上我想摆脱这本书的标题，如果存在的话！并将所有章节组合在一起并按日期排序

我正在考虑使用`Group By`，但我所有的实验都没有奏效。请给我一个解决方案或建议。我能够使用 PHP 和 MySQL 我目前在这个项目中使用 Smarty 模板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T06:07:45.820

实际上，您可以在`MySQL`. 使用`GROUP_CONCAT`功能。

```
SELECT BookTitle, GROUP_CONCAT(Chapter) ChapterList
FROM tableName
GROUP BY BookTitle 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/eb760/8)

其他来源

*   [GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

# php - Socket.io 仅在浏览器端？

> ID：14009025
> 
> 赞同：0
> 
> 时间：2012-12-23T06:05:47.010
> 
> 标签：php, javascript, linux, node.js, socket.io

> **可能重复：**
> [在没有 node.js 的情况下独立使用 socket.io](https://stackoverflow.com/questions/8182631/using-socket-io-standalone-without-node-js)
> [如何在 apache 服务器上运行 socket.io（仅限客户端）](https://stackoverflow.com/questions/11622853/how-to-run-socket-io-client-side-only-on-apache-server)

我在`Linux`服务器上使用共享主机。

所以，我无法安装`node.js`在我的共享主机上。

我只想`socket.io`在客户端运行。有可能吗？

如果有任何可用的替代选项，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:22:46.007

不，socket.io 的全部目的是连接到服务器——将它用作仅客户端组件是没有意义的。

# c - perror 分段错误

> ID：14009026
> 
> 赞同：-1
> 
> 时间：2012-12-23T06:05:54.857
> 
> 标签：c, segmentation-fault

代码：

```
void w(char* c, int i)
{
    char * t;
    sprintf(t, "%d", i);
    perror(c);
    perror(t);
}

int main(void)
{
    w("qwe", 5);
    return 0;
} 
```

导致分段错误，但是

```
int main(void)
{
    perror("qwdasda");
    w("qwe", 5);
} 
```

作品。为什么？我的问题不符合你们的质量标准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T06:12:42.573

这是您的分段错误：

```
char *t;
sprintf(t,"%d",i); 
```

在此代码中，`t`输入到`sprintf()`. 但是，`t`未初始化，因此`sprintf()`会在您的记忆中乱涂乱画。几乎不建议使用`sprintf()`，`snprintf()`而是使用：

```
char buf[32];
snprintf(buf, sizeof(buf), "%d", i); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T06:12:15.450

由于未初始化为特别指向任何存储，因此该`sprintf()`调用正在踩踏一些随机内存。`t`这可能就是崩溃的原因。

# php - 如何在 Android 应用程序中调用 PHP Web 服务？

> ID：14009027
> 
> 赞同：0
> 
> 时间：2012-12-23T06:06:10.103
> 
> 标签：php, android, web-services

我正在开发一个 Android 应用程序，其中所有数据都来自 PHP Web 服务。现在我很困惑如何做到这一点。我应该在 PHP 中开发哪个 Web 服务（ksoap、soap、rest 等），以便当我在 Android 中调用该 Web 服务时它是轻量级的？我需要为这种类型的应用程序做些什么？目前我也在本地制作应用程序，所以 PHP 将从 mysql 数据库中获取数据。请建议我应该开发哪个网络服务。如何在 Android 应用程序中调用它？另外我想知道无论如何我可以在 Android 本身中开发 Web 服务，因为我只有静态数据要传递，可能需要输入 2 或 3 个数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:31:37.960

我不建议您使用 SOAP，实施起来不舒服。我花了很多时间来解析这些来自 SOAP 服务的元素，我建议你实现`JSON`webservice。

```
 /*web service parameters*/
    private static final String TAG = RestSearchResultList.class.getSimpleName();
    private static final String SOAP_ACTION = "http://tempuri.org/GetSomething";
    private static final String METHOD_NAME = "GetSomething";
    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://www.yoursite.com /Services/webservice.asmx"; 
```

调用服务：

```
private SoapObject CallWebService() {
    try {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("lang", Language);
            request.addProperty("restTitle", mSearchText);          
            request.addProperty("x", mLongitude);
            request.addProperty("y", mLatitude);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.implicitTypes = true;
            envelope.dotNet = true;
            envelope.encodingStyle = SoapSerializationEnvelope.XSD;
            envelope.setOutputSoapObject(request);

            MarshalDouble md = new MarshalDouble();
            md.register(envelope);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapObject result = (SoapObject) envelope.getResponse();

            SearchingMap.getInstance().Clear();
            return result;
        } catch (Exception ex) {
            Log.e(TAG, ex.getMessage());
        }
        return null;
} 
```

这只是调用服务，而不解析它和其他东西。

JSON 示例：

```
 public class AsyncJsonDataTask extends AsyncTask<String, Integer, JSONArray> {
    private JsonLoader _jsonHelper;
    private IJsonDataListener _dataListener;
    private ProgressDialog _dialog;

    /*Progress bar widget initialize*/
    public AsyncJsonDataTask(IJsonDataListener dataListener, ProgressDialog dialog) {
        _dataListener = dataListener;
        _jsonHelper = new JsonLoader();
        _dialog = dialog;
    }

    @Override
    protected JSONArray doInBackground(String... urls) {
        JSONArray result = _jsonHelper.GetJSONArray(urls[0]);
        return result;
    }

    @Override
    protected void onPostExecute(JSONArray result) {
        if (_dialog != null) {
            if (_dialog.isShowing()) {
                _dialog.dismiss();
            }
        }
        _dataListener.OnJsonDataLoadComplete(result); //gets data oncomplete
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
    }

    @Override
    protected void onPreExecute() {
        if (_dialog != null) {
            _dialog.setMessage("Load Data");
            _dialog.show();
        }
    }
}

public class JsonHelper {
    /* public static Object toJSON(Object object) throws JSONException {
            if (object instanceof Map) {
                JSONObject json = new JSONObject();
                Map map = (Map) object;
                for (Object key : map.keySet()) {
                    json.put(key.toString(), toJSON(map.get(key)));
                }
                return json;
            } else if (object instanceof Iterable) {
                JSONArray json = new JSONArray();
                for (Object value : ((Iterable)object)) {
                    json.put(value);
                }
                return json;
            } else {
                return object;
            }
        }

        public static boolean isEmptyObject(JSONObject object) {
            return object.names() == null;
        }

        public static Map<String, Object> getMap(JSONObject object, String key) throws JSONException {
            return toMap(object.getJSONObject(key));
        }

        public static Map<String, Object> toMap(JSONObject object) throws JSONException {
            Map<String, Object> map = new HashMap();
            Iterator keys = object.keys();
            while (keys.hasNext()) {
                String key = (String) keys.next();
                map.put(key, fromJson(object.get(key)));
            }
            return map;
        }

        public static List toList(JSONArray array) throws JSONException {
            List list = new ArrayList();
            for (int i = 0; i < array.length(); i++) {
                list.add(fromJson(array.get(i)));
            }
            return list;
        }

        private static Object fromJson(Object json) throws JSONException {
            if (json == JSONObject.NULL) {
                return null;
            } else if (json instanceof JSONObject) {
                return toMap((JSONObject) json);
            } else if (json instanceof JSONArray) {
                return toList((JSONArray) json);
            } else {
                return json;
            }
        }*/
} 
```

我在整个项目中写过一次，没有配置和东西，我保存`SRP`在这里，你可以检查你需要什么并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:39:33.237

由于您需要小数据并且这也是本地的，因此最好选择 REST，因为它不需要任何额外的东西，例如 KSOAP 或其他任何东西。如果存在分布式环境，那么 SOAP 更好。在您的情况下，我认为 REST 是好的。

[这](http://davidwalsh.name/web-service-php-mysql-xml-json)是您可以检查的链接。

# javascript - Google Chart 中的动态饼图不起作用

> ID：14009028
> 
> 赞同：0
> 
> 时间：2012-12-23T06:06:12.763
> 
> 标签：javascript, charts

我是 Google Chart 的新手，我正在尝试在动态 webproject（Java EE）中创建一个动态饼图。我已阅读教程（[https://developers.google.com/chart/interactive/docs/queries](https://developers.google.com/chart/interactive/docs/queries)）并在谷歌代码游乐场复制饼图代码。

```
function initialize() 
{
    // Replace the data source URL on next line with your data source URL.
    // Specify that we want to use the XmlHttpRequest object to make the query.
    var opts = {sendMethod: 'xhr'};
    var query = new google.visualization.Query('https://docs.google.com/spreadsheet/tq?range=A%3AB&key=0Aq4N8GK8re42dHlGMG0wM00tdE5PVjJZellXTEhFNEE&gid=0&headers=-1', opts);

    // Send the query with a callback function.
    query.send(handleQueryResponse);
}

function handleQueryResponse(response)
{
    if (response.isError()) 
    {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
    }

    var data = response.getDataTable();
    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, {width: 400, height: 240, is3D: true});
}

google.setOnLoadCallback(drawVisualization); 
```

但它不起作用，也没有饼图。可以请告诉我问题出在哪里。我的电子表格是[https://docs.google.com/spreadsheet/ccc?key=0Aq4N8GK8re42dHlGMG0wM00tdE5PVjJZellXTEhFNEE](https://docs.google.com/spreadsheet/ccc?key=0Aq4N8GK8re42dHlGMG0wM00tdE5PVjJZellXTEhFNEE) 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:25:37.213

由于某种原因，它发送 OPTION 请求而不是正确的 GET。这是因为您使用了`opts`参数，将其删除，一切都会正常工作。

您还可以在此处找到有关此参数的说明： [https ://developers.google.com/chart/interactive/docs/reference#Query](https://developers.google.com/chart/interactive/docs/reference#Query)

`opt_options [Optional, Object] A map of options for the request. Note: If you are accessing a restricted data source, you should not use this parameter.`

这是完整的代码：

```
<html>
    <head>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load('visualization', '1.0', {'packages':['corechart']});
            google.setOnLoadCallback(initialize);

            function initialize() {
                // removed the `var opts...` line
                var query = new google.visualization.Query('https://docs.google.com/spreadsheet/tq?range=A%3AB&key=0Aq4N8GK8re42dHlGMG0wM00tdE5PVjJZellXTEhFNEE&gid=0&headers=-1');

                query.send(handleQueryResponse);
            }

            function handleQueryResponse(response) {
                if (response.isError()) {
                    alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
                    return;
                }

                var data = response.getDataTable();
                var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
                chart.draw(data, {width: 400, height: 240, is3D: true});
            }
        </script>
    </head>
    <body>
        <div id="chart_div"></div>
    </body>
</html> 
```

# algorithm - 有没有一种有效的方法来计算一组给定线段之间的交叉点数量？

> ID：14009029
> 
> 赞同：8
> 
> 时间：2012-12-23T06:06:14.180
> 
> 标签：algorithm, language-agnostic, geometry, computational-geometry

假设我在一般位置有 n 个线段。对于我的 n 个片段中的每一个片段，我如何快速计算它与其他 n-1 个片段相交的数量？

我可以在 O(n ² ) 时间内天真地做到这一点。我可以在 O((n + k) log n) 时间内使用相当简单的扫描线算法 (Bentley-Ottmann) 找到所有交叉点，其中 k 是此类交叉点的数量，然后将我找到的交叉点聚合成一堆计数。

不过，我不需要*找到*交叉点；我只想知道有多少。我看不出如何将扫描线算法修改得更快，因为它需要为每个交叉点在树中重新排序两件事，而且我想不出任何其他不会遇到同样问题的技术。

我也有兴趣了解如何计算总共有多少个交叉口。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T08:03:35.087

在一般情况下，我很难相信您可以比 Bentley Ottman 做得更好。如果您不在乎线段相交的位置，您可以稍微简化计算，但我看不出如何在不找到交叉点的情况下计算交叉点。

从本质上讲，Bentley Ottman 是一种简化交叉路口搜索空间的方法。还有其他方法可能适用于线段的特定排列，但除非您的线段之间存在一些可预测的几何关系，否则您将无法比首先使用一些巧妙的方法找到候选交叉点并结合每个候选人的单独验证。

除非您的问题域具有一些可能提供可利用子结构的特定功能，否则我认为您最好的速度选择是采用 Bentley Ottman（或一些类似的扫描算法）进行并行执行。（将线段剪成条带很简单。找出一组最佳的条带也很有趣。）当然，这是一种实践而不是学术练习；并行算法很可能最终会做更多的工作；它只是利用硬件在（恒定因素）更少的时间内完成工作。

# tomcat - Myeclipse 无法在 Windows 8 中打开

> ID：14009033
> 
> 赞同：0
> 
> 时间：2012-12-23T06:06:49.313
> 
> 标签：tomcat, windows-8, myeclipse

Myeclipse 10 是否可以在 Windows 8 中运行。我遇到的问题很少，当我单击图标时，它大部分时间都不会打开，当它打开时，当我尝试运行 tomacat 时，它会完全消失。

任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:01:19.387

MyEclipse 已经在 Windows 8 上进行了测试，应该可以正常工作。

您使用的是哪个版本的 MyEclipse，双击图标会发生什么？

# c# - 使方法按值返回对象？

> ID：14009034
> 
> 赞同：2
> 
> 时间：2012-12-23T06:07:18.320
> 
> 标签：c#, methods, return-by-value

我有一本这样的字典：`Dictionary<string, SomeClass> template`

基本上，我想要做的是获取*包含*在`template`. 但是，我似乎无法创建一个按值检索对象的方法。我知道**ref**和**out**，但这些与我想要的完全相反。结构将是完美的，但不幸的是，`SomeClass`必须从另一个类和/或接口继承。

有什么方法可以做我想做的事吗？这看起来应该很简单。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T06:11:59.140

你需要一个[复制构造函数](http://msdn.microsoft.com/en-us/library/ms173116%28v=vs.80%29.aspx)

您还可以实现[ICloneable](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)接口或创建自己的接口

[这](https://stackoverflow.com/questions/3345389/copy-constructor-versus-clone)也会帮助你！

# performance - 是什么让 node.js SlowBuffers “慢”？

> ID：14009048
> 
> 赞同：9
> 
> 时间：2012-12-23T06:10:15.060
> 
> 标签：performance, node.js, buffer

我正在使用[node.js](http://nodejs.org/)来提供一些 PNG 图像，这些图像作为二进制 BLOB 存储在 SQLite 数据库中。这些图像很小，平均为 9500 字节。

我正在使用[sqlite3 npm 包](https://npmjs.org/package/sqlite3)，它似乎将二进制 BLOB 对象返回为[`SlowBuffers`](http://nodejs.org/api/buffer.html#buffer_class_slowbuffer). 我的 node.js 服务将这些保存`SlowBuffers`在内存中以减轻 IO 延迟，像这样为它们提供服务：

```
response.send(slowBuffer); 
```

似乎`SlowBuffer`有一个类似于`Buffer`; 转换`Buffer`为微不足道：

```
var f = function(slowBuffer) {
  var buffer = new Buffer(slowBuffer.length);
  slowBuffer.copy(buffer);
  return buffer;
} 
```

**我应该将这些转换`SlowBuffers`为`Buffers`吗？**

**帮助我理解为什么它们被称为“慢”缓冲区。**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T04:08:10.360

如果你会阅读这些帖子：

1.  [https://groups.google.com/forum/?fromgroups=#!topic/nodejs-dev/jd52ZsVSZNo](https://groups.google.com/forum/?fromgroups=#!topic/nodejs-dev/jd52ZsVSZNo)
2.  [https://groups.google.com/forum/?fromgroups=#!topic/nodejs/s1dnFbb-Rj8](https://groups.google.com/forum/?fromgroups=#!topic/nodejs/s1dnFbb-Rj8)

Node 提供了两种类型的缓冲区对象。`Buffer`是原生 Javascript 数据结构；`SlowBuffer`由 C++ 模块实现。在本机 Javascript 环境中使用 C++ 模块会花费额外的 CPU 时间，因此会“慢”。`Buffer`对象由`SlowBuffer`对象支持，但可以直接从 Javascript 读取/写入内容以获得更好的性能。

任何`Buffer`大于 8 KB 的对象都由单个`SlowBuffer`对象支持。单个对象可以支持多个`Buffer`小于 8 KB 的`SlowBuffer`对象。当`Buffer`内存中存在许多小于 8 KB 的对象时（由单个 支持`SlowBuffer`），如果您改为`SlowBuffer`对每个对象使用 a，则 C++ 模块的代价可能会非常高。小`Buffers`通常大量使用。

[`This class is primarily for internal use`](http://nodejs.org/api/buffer.html#buffer_class_slowbuffer)意味着如果您想自己管理服务器上的缓冲区，则使用`SlowBuffer`（要在较小的块中使用，您必须`SlowBuffer`自己分区）。除非您希望在处理缓冲区时进行细微级别的控制，否则您应该可以使用`Buffer`对象。

# cuda - CUDA 矩阵乘法：输出零

> ID：14009049
> 
> 赞同：-2
> 
> 时间：2012-12-23T06:10:17.927
> 
> 标签：cuda, matrix-multiplication

试图在 CUDA 中运行一个程序来做矩阵乘法。我想我已经正确设置了所有内容并且程序运行并执行。问题是输出。有人看到我的代码有什么问题吗？显然，无论输入是什么，输出矩阵的值都是 0。我认为问题是我必须从使用 int Width 作为 Kernal 函数中的参数转换为使用行数/列数。我不认为/应该是一个问题，但出了点问题......感谢您的帮助！

```
#define TILE_WIDTH 16

// Compute C = A * B
__global__ void matrixMultiply(float * A, float * B, float * C,
               int numARows, int numAColumns,
               int numBRows, int numBColumns,
               int numCRows, int numCColumns) 
{
    //@@ Insert code to implement matrix multiplication here
    float Cvalue = 0.0;
    int Row = blockIdx.y * blockDim.y + threadIdx.y;
    int Col = blockIdx.x * blockDim.x + threadIdx.x;

    if ((Row < numCRows) && (Col < numCColumns)) 
    {       
        float Pvalue = 0;
        for (int k = 0; k < numCRows; ++k) Pvalue += A[Row*numCColumns+k] * B[k*numCRows+Col];
        C[Row*numCRows+Col] = Cvalue;
    }

}

int main(int argc, char ** argv) {
wbArg_t args;
float * hostA; // The A matrix
float * hostB; // The B matrix
float * hostC; // The output C matrix
float * deviceA;
float * deviceB;
float * deviceC;
int numARows; // number of rows in the matrix A
int numAColumns; // number of columns in the matrix A
int numBRows; // number of rows in the matrix B
int numBColumns; // number of columns in the matrix B
int numCRows; // number of rows in the matrix C (you have to set this)
int numCColumns; // number of columns in the matrix C (you have to set this)

args = wbArg_read(argc, argv);
wbTime_start(Generic, "Importing data and creating memory on host");
hostA = (float *) wbImport(wbArg_getInputFile(args, 0), &numARows, &numAColumns);
hostB = (float *) wbImport(wbArg_getInputFile(args, 1), &numBRows, &numBColumns);
//@@ Set numCRows and numCColumns
numCRows = numBRows;
numCColumns = numAColumns;  
int sizeA = numARows * numAColumns * sizeof(float);
int sizeB = numBRows * numBColumns * sizeof(float);
int sizeC = numCRows * numCColumns * sizeof(float);
//@@ Allocate the hostC matrix
hostC = (float *) malloc(sizeC);
wbTime_stop(Generic, "Importing data and creating memory on host");

wbLog(TRACE, "The dimensions of A are ", numARows, " x ", numAColumns);
wbLog(TRACE, "The dimensions of B are ", numBRows, " x ", numBColumns);

wbTime_start(GPU, "Allocating GPU memory.");
//@@ Allocate GPU memory here
cudaMalloc((void **) &deviceA, sizeA);      
cudaMalloc((void **) &deviceB, sizeB);
cudaMalloc((void **) &deviceC, sizeC);
wbTime_stop(GPU, "Allocating GPU memory.");

wbTime_start(GPU, "Copying input memory to the GPU.");
//@@ Copy memory to the GPU here
cudaMemcpy(deviceA, hostA, sizeA, cudaMemcpyHostToDevice);
cudaMemcpy(deviceB, hostB, sizeB, cudaMemcpyHostToDevice);
wbTime_stop(GPU, "Copying input memory to the GPU.");

//@@ Initialize the grid and block dimensions here
dim3 dimGrid(numCRows/TILE_WIDTH, numCColumns/TILE_sWIDTH, 1);
dim3 dimBlock(TILE_WIDTH, TILE_WIDTH, 1);

wbTime_start(Compute, "Performing CUDA computation");
//@@ Launch the GPU Kernel here
matrixMultiply<<<dimGrid,dimBlock>>>(deviceA, deviceB, deviceC,
                                        numARows, numAColumns,
                                        numBRows, numBColumns,
                                        numCRows, numCColumns);
cudaThreadSynchronize();
wbTime_stop(Compute, "Performing CUDA computation");

wbTime_start(Copy, "Copying output memory to the CPU");
//@@ Copy the GPU memory back to the CPU here      
cudaMemcpy(hostC, deviceC, sizeC, cudaMemcpyDeviceToHost);
wbTime_stop(Copy, "Copying output memory to the CPU");

wbTime_start(GPU, "Freeing GPU Memory");
//@@ Free the GPU memory here    
cudaFree(deviceA);
cudaFree(deviceB);
cudaFree(deviceC);
wbTime_stop(GPU, "Freeing GPU Memory");

wbSolution(args, hostC, numCRows, numCColumns);

free(hostA);
free(hostB);
free(hostC);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:06:43.583

好的，所以它返回零的原因是因为我的结果从未保存到我的输出矩阵中，因为我的代码通过循环一遍又一遍地保存在一个未使用但已初始化的值中。我还搞砸了 numCRows 和 numCColumns 值，但在我的代码开始实际运行后更容易识别。

```
__global__ void matrixMultiply(float * A, float * B, float * C,
               int numARows, int numAColumns,
               int numBRows, int numBColumns,
               int numCRows, int numCColumns) 
{
    //@@ Insert code to implement matrix multiplication here
    int Row = blockIdx.y * blockDim.y + threadIdx.y;
    int Col = blockIdx.x * blockDim.x + threadIdx.x;

    if ((Row < numCRows) && (Col < numCColumns)) 
    {       
        float Cvalue = 0;
        for (int k = 0; k < numCRows; ++k) 
        {
          Cvalue += A[Row*numAColumns+k] * B[k*numBColumns+Col];
        }
          C[Row*numCColumns+Col] = Cvalue;
    }

} 
```

同样在主代码中：

```
numCRows = numARows;
numCColumns = numBColumns; 
```

# mysql - 基于表数的数据库效率

> ID：14009056
> 
> 赞同：-2
> 
> 时间：2012-12-23T06:11:38.330
> 
> 标签：mysql, database

对于像 facebook 这样的用户，他们将为每个用户提供单独的表，或者将所有用户都放在一个表中。哪个会高效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:24:45.773

SQL 不是那样工作的。范例是拥有存储有关实体组（例如公司、人员、光盘）的信息的表。每个实体有一个表，即每个用户一个表，实际上没有意义，而且很难使用。

# java - 如何为 2 个或更多通道绘制波形：从 2 个或更多通道获取幅度？

> ID：14009058
> 
> 赞同：0
> 
> 时间：2012-12-23T06:11:48.467
> 
> 标签：java, wav, javasound, waveform, amplitude

我正在做一个项目，需要在向我提供波形文件时对音频进行信号处理。我知道如何使用公式使用通道的样本值计算幅度

```
 20*log(Sample Value/Maximum attainable sample Value) 
```

但是该怎么办如果我说 6 个通道，我需要如何处理每个通道的样本值以获得绘制波形的幅度。我正在读取波形文件

```
 AudioInputStream 
```

这可能给了我帧中的样本值

```
 [1|2|3|4|5|6],[1|2|3|4|5|6],[3rd Frame] and so on... 
```

其中每个样本是一个 8 位或 16 位的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T22:20:48.027

我得到了答案：由于通道适用于多个扬声器系统，我们接收到的音频可能会受到来自其他扬声器的信号的建设性或破坏性干扰的影响。因此，必须将每个通道转换为波形，然后将其相加通道频谱以获得频谱，现在使用此频谱我必须制作一个波形，该波形将为我提供瞬时音频信号幅度的正确值。

# jquery - 不需要在使用 jQuery.mobile 的移动布局中的某些文本字段上继承 CSS（或重置它）

> ID：14009062
> 
> 赞同：1
> 
> 时间：2012-12-23T06:12:20.173
> 
> 标签：jquery, css, jquery-mobile, styles, textfield

我喜欢 jQuery 移动版……它真是太棒了。

但是，我有一个布局，我不想让我的文本字段使用 jquery mobile 对它们所做的事情（圆角，使它们 100% 宽度，添加轮廓等）。

我在那里说等等，因为我不知道 jQuery mobile 对他们所做的所有其他事情，如果我知道了，我只会创建一个新的 CSS 类并将所有属性更改为我想要的......唉，css文件和 jQuery mobile 附带的 js 文件不适合胆小的人....而且我胆小的。

我几乎 99% 确定没有办法简单地在 css 类上全部重置，但我希望最后 1% 固化。

如果没有（我很确定没有），谁能告诉我我需要从 jQuery mobile 的文本字段中重置的所有属性？

现在对我来说最重要的是文本字段的宽度。即使我明确地将宽度设置为 95%，它总是以 100% 的宽度填充父级。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:53:48.883

它可以很容易地完成，您只需要使用：

```
data-role="none" 
```

通缉领域的属性。

示例：http: [//jsfiddle.net/Gajotres/LqDke/](http://jsfiddle.net/Gajotres/LqDke/)

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T06:14:33.107

我会使用 chromes 检查元素工具来查看在元素上设置的位置和 CSS 属性（它甚至会为您提供 CSS 文件中的行号）。

然后，您可以编辑 jQuery 移动 CSS 文件，或覆盖另一个样式表中的 CSS 属性

# linux - 使用 netbeans 时 Ubuntu 上的 Javafx 错误

> ID：14009066
> 
> 赞同：3
> 
> 时间：2012-12-23T06:12:59.513
> 
> 标签：linux, netbeans, javafx

尝试在 ubuntu linux 上运行基本的 javafx 应用程序时，我看到以下错误。使用命令行或 netbeans 运行应用程序时出现错误。

```
Exception in thread "main" java.lang.RuntimeException: java.lang.UnsatisfiedLinkError: Can't load library: /home/venkat/.m2/repository/com/oracle/javafx/javafx/2.1.0-beta/i386/libglass.so
at com.sun.javafx.tk.quantum.QuantumToolkit.startup(QuantumToolkit.java:277)
at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:90)
at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:163)
at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.UnsatisfiedLinkError: Can't load library: /home/venkat/.m2/repository/com/oracle/javafx/javafx/2.1.0-beta/i386/libglass.so
at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1828)
at java.lang.Runtime.load0(Runtime.java:792)
at java.lang.System.load(System.java:1059)
at com.sun.glass.utils.NativeLibLoader.loadLibraryFullPath(NativeLibLoader.java:143)
at com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:56)
at com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:31)
at com.sun.glass.ui.Application$1.run(Application.java:75)
at java.security.AccessController.doPrivileged(Native Method)
at com.sun.glass.ui.Application.loadNativeLibrary(Application.java:73)
at com.sun.glass.ui.Application.loadNativeLibrary(Application.java:85)
at com.sun.glass.ui.gtk.GtkPlatformFactory.<clinit>(GtkPlatformFactory.java:23)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:186)
at com.sun.glass.ui.PlatformFactory.getPlatformFactory(PlatformFactory.java:20)
at com.sun.glass.ui.Application.Run(Application.java:108)
at com.sun.javafx.tk.quantum.QuantumToolkit.startup(QuantumToolkit.java:267)
... 5 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T06:12:59.513

这个异常是由于 maven 无法在类路径上找到原生库引起的。

**网豆**

您可以通过在运行配置文件中添加 JVM 参数来解决该问题。

`-Djava.library.path=/home/venkat/Programs/javafx/2.1.0-beta/rt/lib/i386/`

*图片*

![在此处输入图像描述](../Images/bdd2dcc82d4e3ad17657b62637be49fb.png)

**命令行**

如果您在尝试在命令行上运行应用程序时遇到同样的问题，以下导出应该可以解决它。

```
export JAVAFX_HOME=/home/venkat/Programs/javafx/2.1.0-beta

export CLASSPATH=\$JAVAFX_HOME/rt/lib/jfxrt.jar

export LD_LIBRARY_PATH=/home/venkat/Programs/javafx/2.1.0-beta/rt/lib/i386/ 
```

上面的前两个 env 变量修复了在找不到 javafx 运行时时出现的类路径问题。

# seo - 使用 htaccess 的 SEO 友好网址

> ID：14009068
> 
> 赞同：0
> 
> 时间：2012-12-23T06:13:43.090
> 
> 标签：seo

我的网站[www.sellGuru.in](http://www.sellGuru.in/)有很多 Google 网站管理员报告的 404 错误，但这些网址可以从浏览器访问。我无法弄清楚为什么网站管理员会报告这些错误。

我的网站 htaccess 文件将所有内容重定向到 index.php?page=pagename 但谷歌网站管理员无法使用 htaccess 文件找到像 sellguru.in/contact 重定向到 => sellguru.in/index.php?page=contact 这样的页面。

下面是我正在使用的 HTaccess 文件

```
ErrorDocument 404 /index.php
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T06:27:17.947

您必须在 RewriteRule 中明确。正如所写，它没有将任何内容传递给脚本的“页面”参数。它应该看起来像这样：

`RewriteRule ^(.*)$ index.php?page=$1 [L]`

`^(.*)$` 将在 RewriteBase 之后捕获内容，在您的示例中为“联系”，并将其存储在 $1 中。

`index.php?page=$1`告诉 Apache 如何处理 URL，在这种情况下，它会将 is 视为对 index.php?page=contact 的调用

# wpf - 将 TabControl ItemsSource 绑定到 ViewModel 集合

> ID：14009074
> 
> 赞同：9
> 
> 时间：2012-12-23T06:15:36.587
> 
> 标签：wpf, xaml, binding, tabcontrol

出于某种原因，当绑定到视图模型时，我有一段时间让我`TabControl`正确显示。我的设计基于此处的教程：http: [//msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)。我确实在这里找到了一些像我这样的问题，但没有一个能解决我的特殊情况。这是我在 xaml 中的。`ItemsSource``ObservableCollection``TabControl`

```
<TabControl ItemsSource="{Binding Workspaces}"
            SelectedIndex="{Binding ActiveWorkspaceIndex}"
            ItemTemplate="{StaticResource ClosableTabItemTemplate}"/> 
```

以下在哪里`ClosableTabItemTemplate`。

```
<DataTemplate x:Key="ClosableTabItemTemplate">
        <DockPanel Width="120">
          <Button 
              Command="{Binding Path=CloseCommand}"
              Content="X"
              Cursor="Hand"
              DockPanel.Dock="Right"
              Focusable="False"
              FontFamily="Courier" 
              FontSize="9"
              FontWeight="Bold"  
              Margin="0,1,0,0"
              Padding="0"
              VerticalContentAlignment="Bottom"
              Width="16" Height="16" 
              />
          <ContentPresenter 
              Content="{Binding Path=DisplayName}" 
              VerticalAlignment="Center" 
              />
        </DockPanel>
      </DataTemplate> 
```

`Workspaces`是`ObservableCollection`视图模型。`ActiveWorkspaceIndex`只是我在视图模型中跟踪的活动工作区索引。我通过 App.xaml 文件中的以下数据模板将我的视图模型与视图实例相关联。

```
<DataTemplate DataType="{x:Type vm:ViewModelStartPage}">
     <v:ViewStartPage/>
 </DataTemplate> 
```

我只将一个视图模型添加到我的工作区集合中。我看到选项卡控件中显示了 2 个视图，并且它们没有被标记。这几乎就像 TabControl 不知道将不同的视图视为 TabItems，它的行为更像一个堆栈面板，堆叠视图。如果我在代码中创建选项卡项，它可以像这样正常工作：

```
System.Windows.Controls.TabItem i = new System.Windows.Controls.TabItem();
i.Content = new Views.ViewStartPage();
i.Header = "A Tab Item";
this.xTabControl.Items.Add(i); 
```

我一定是缺少一些内容模板或其他东西。我稍后会为我的标签设置样式，但现在我很高兴能让基本的标签正常工作。此外，每个选项卡的选项卡内容中的视图可能不同，所以我不能使用我在各处看到的简单文本块 TabControl 模板示例......即不是这个......

```
<TabControl.ContentTemplate>
    <DataTemplate>
        <TextBlock
           Text="{Binding Content}" />
    </DataTemplate> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T20:55:35.167

我最终使用了`ContentControl`带有`TabControl`数据模板的 a（如原始教程项目）。这是我最终得到的 xaml 代码。我没有更改原始示例项目的代码隐藏来完成这项工作。在`ContentControl`我的 MainWindow.xaml 中，另外两段代码在`ResourceDictionary`.

```
<!-- Workspaces Tab Control -->
      <ContentControl Grid.Row="1"
                      VerticalAlignment="Stretch"
                      HorizontalAlignment="Stretch"
                      Content="{Binding Path=Workspaces}"
                      ContentTemplate="{StaticResource WorkspacesTemplate}"/>

<!-- Workspaces Template -->
  <DataTemplate x:Key="WorkspacesTemplate">
    <TabControl Style="{StaticResource ClosableTabControl}"
                IsSynchronizedWithCurrentItem="True"
                ItemsSource="{Binding}"
                ItemTemplate="{StaticResource WorkspaceTabItemTemplate}"
                Margin="1"/>
  </DataTemplate>

<!-- Workspace Tab Item Template -->
  <DataTemplate x:Key="WorkspaceTabItemTemplate">
    <Grid Width="Auto" Height="Auto">
      <ContentPresenter ContentSource="Header" Margin="3" 
                        Content="{Binding Path=DisplayName}"
                        HorizontalAlignment="Center" VerticalAlignment="Center">
        <ContentPresenter.Resources>
          <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource Foreground}"/>
          </Style>
        </ContentPresenter.Resources>
      </ContentPresenter>
    </Grid>
  </DataTemplate> 
```

# c# - 从动态创建的用户控件中的文本框中检索文本

> ID：14009076
> 
> 赞同：0
> 
> 时间：2012-12-23T06:15:59.657
> 
> 标签：c#, asp.net, sql-server-2012

我正在创建一个调查页面，该页面从数据库中提取以根据其类型显示问题，对于每种类型，我都创建了一个用户控件。在`Page_Load`，我将用户控件放在这样的占位符中：-（QNO 是我在上一页设置为 0 的会话，只是为了开始问题顺序）

```
protected void Page_Load(object sender, EventArgs e)
        {

            SqlConnection Connection = DatabaseConnection.GetSurveySystemConnection();

            string sqlquery = "SELECT Q.[ID], Q.[Question_Order], Q.[Question], QT.[Type_Desc] FROM [Questions] Q Inner join Question_Type QT On Q.Type_ID= QT.ID Where Q.[Survey_ID] =" + Session["Survey_ID"] + "Order by Question_Order";

            SqlCommand cmd = new SqlCommand(sqlquery, Connection);
            cmd.CommandType = CommandType.Text;
            SqlDataAdapter da = new SqlDataAdapter();
            da.SelectCommand = cmd;
            DataTable DT = new DataTable();
            da.Fill(DT);

            if (DT != null)
            {
                Session["Count"] = DT.Rows.Count;
                QuestionLabel.Text = String.Format("{0}.{1}", DT.Rows[Convert.ToInt32(Session["QNO"])]["Question_Order"].ToString(), DT.Rows[Convert.ToInt32(Session["QNO"])]["Question"].ToString());
                Session["Question_ID"] = DT.Rows[Convert.ToInt32(Session["QNO"])]["ID"].ToString();

                if (DT.Rows[Convert.ToInt32(Session["QNO"])]["Type_Desc"].ToString() == "Multiple Choice")
                {
                    Control uc = Page.LoadControl("UserControls/MultipleChoice.ascx");
                    PlaceHolder2.Controls.Add(uc);
                }
                else if (DT.Rows[Convert.ToInt32(Session["QNO"])]["Type_Desc"].ToString() == "Single Choice")
                {
                    Control uc = Page.LoadControl("UserControls/SingleChoice.ascx");
                    PlaceHolder2.Controls.Add(uc);
                }
                else if (DT.Rows[Convert.ToInt32(Session["QNO"])]["Type_Desc"].ToString() == "Yes/No")
                {
                    Control uc = Page.LoadControl("UserControls/YesOrNo.ascx");
                    PlaceHolder2.Controls.Add(uc);
                }
                else if (DT.Rows[Convert.ToInt32(Session["QNO"])]["Type_Desc"].ToString() == "Agree/Disagree")
                {
                    Control uc = Page.LoadControl("UserControls/AgreeDisagree");
                    PlaceHolder2.Controls.Add(uc);
                }
                else if (DT.Rows[Convert.ToInt32(Session["QNO"])]["Type_Desc"].ToString() == "Rating")
                {
                    Control uc = Page.LoadControl("UserControls/Rating.ascx");
                    PlaceHolder2.Controls.Add(uc);
                }
                else if (DT.Rows[Convert.ToInt32(Session["QNO"])]["Type_Desc"].ToString() == "Open Ended")
                {
                    Control uc = Page.LoadControl("UserControls/OpenEnded.ascx");
                    PlaceHolder2.Controls.Add(uc);
                }
            }
        } 
```

现在，假设类型为“Open Ended”，它在 中显示一个文本框`usercontrol`，我想访问此文本框并检索其中的文本，然后按一下按钮将其放入另一个文本框中，我创建了一个静态文本框该页面并调用它`ViewTextBox`。这是我尝试过的：-

```
 protected void Button1_Click(object sender, EventArgs e)
            {
    TextBox t = Controls[0].Controls[3].Controls[11].Controls[5].Controls[0].Controls[0] as TextBox;
    ViewTextBox.Text = t.Text; //"Object reference not set to an instance of an object."
            } 
```

有任何想法吗？我通过页面上的控件挖掘了我的方式以在用户控件中找到文本框：-

```
Response.Write(Controls[0].Controls[3].Controls[11].Controls[5].Controls[0].Controls[0].ID); 
```

并且 ID 作为我正在寻找的文本框出现。用户控件中的文本框称为“OpenEndedTextBox”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T06:44:08.253

我建议不要像那样挖掘，而是像这样创建一个`Method or Property in your user control`从您的用户控件中获取该文本

```
public string GetAnsweredText()
{
   return this.AnswerTextBox.Text;
} 
```

并在包含该用户控件的页面中的按钮单击事件中调用此方法，如下所示

```
protected void Button1_Click(object sender, EventArgs e)
{
   UC_SurveyControl control = this.Controls[0] as UC_SurveyControl;
   if (control != null)
       string answer = control.GetAnsweredText();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T07:06:10.957

我建议你在这里使用递归，它可能不是最好的性能解决方案，但它工作得很好。

这应该在`Page_PreRender()`事件中使用。

```
 public static T FindControlRecursive<T>(Control sourceControl, string targetControlId) 
  where T : class    
{    
   if (sourceControl == null)    
     throw new ArgumentNullException("sourceControl");    
   if (targetControlId == null)    
     throw new ArgumentNullException("targetControlId");    
   if (sourceControl.ID == targetControlId) return sourceControl as T;    
   foreach (Control control in sourceControl.Controls)    
   {    
     T controlToReturn = FindControlRecursive<T>(control, targetControlId);    
     if (controlToReturn != null) return controlToReturn as T;    
   }    
   return null;    
} 
```

Si vis 起搏点 DotNetnum。

# php - yii中的经典主题

> ID：14009077
> 
> 赞同：-1
> 
> 时间：2012-12-23T06:16:07.993
> 
> 标签：php, yii

我是 yii 框架的新手，我正在从在线教程和 yii 文档中学习它。我发现我在教程中看到的主题目录中没有一些文件。正如您在附件中看到的那样`layouts`和`site`文件夹包含文件（`main.php`和`index.php`），在我的电脑中我只有文件夹。

![在此处输入图像描述](../Images/bbe5b6d7021923a70a958358a1ad0eff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T06:58:22.427

更改主题的主文件位于`protected/views/layouts/main.php`

# objective-c - 集合视图：可以手动触发 cellForItemAtIndexPath 吗？

> ID：14009080
> 
> 赞同：-1
> 
> 时间：2012-12-23T06:16:29.293
> 
> 标签：objective-c, ios, uicollectionview

在我的**UICollectionViewController.m中，我在****(void)viewDidLoad**方法中构建了一个图像文件名字符串数组，我想稍后在**cellForItemAtIndexPath**方法中使用它来填充网格。然而，问题是**cellForItemAtIndexPath**似乎在**viewDidLoad**的数组有机会创建之前执行。

我是**Collection Views**的新手，想更好地了解它通常是如何使用/控制的。我想知道在构建数组之后是否可以调用**cellForItemAtIndexPath**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:28:17.410

创建数组后调用 collectionView 的 reloadData 实例方法。

//构建数组

```
[collectionView reloadData]; 
```

# html - Textarea 不会在所有主流浏览器中填充表格单元格

> ID：14009081
> 
> 赞同：0
> 
> 时间：2012-12-23T06:16:30.147
> 
> 标签：html, css

这很奇怪，但我有一个 jsFiddle，当用户单击“添加问题”按钮以附加表格行时，在附加行的“问题”列下，此表格单元格中 textarea 的高度和宽度是能够填充表格单元格。

[http://jsfiddle.net/LKB9e/12/](http://jsfiddle.net/LKB9e/12/)

但问题是我的应用程序中有完全相同的代码，但在我的应用程序中，textarea 没有填充 IE、Firefox 和 Opera 的表格单元格，但它在 safari 和 Chrome 中运行良好。

为什么它不能在其他浏览器中运行，它如何在这些浏览器中运行？

应用

下面是编译 textarea 的主要 css：

```
.question { 
    min-width:14%;
    max-width:14%;
    border:1px black solid;
    border-collapse:collapse;
      line-height: 0;
}

.question textarea {

        min-width:auto;
        max-width:auto;
        resize:none;
        height:100%;
        font-size:100%;
          display: block; 

    } 
```

其他浏览器的哪些小问题可能导致此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:01:19.280

请参阅更新的小提琴演示：http: [//jsfiddle.net/LKB9e/23/embedded/result/](http://jsfiddle.net/LKB9e/23/embedded/result/)

它适用于所有浏览器。

HTML：

```
<div id="details">
    <table id="qandatbl" align="center" cellpadding="0" cellspacing="0" border="0" width="100%">
      <thead>
        <tr>
          <th width="9%" class="qid">Question No</th>
          <th width="29%" class="question">Question</th>
          <th width="62%" class="optandans">Option and Answer</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div> 
```

**CSS：**

```
#qandatbl{
    border:1px black solid;
    border-collapse:collapse;
    table-layout:fixed;
}

.question {
    /*min-width:14%;
    max-width:14%;*/
    max-width:0.1%;
    border:1px black solid;
    border-collapse:collapse;
      line-height: 0;
} 
```

**查询：**

```
function insertQuestion(form) {
........
........
 // your entire function's code here
........

    setWidth(); calling this function will adjust the width and height of the text area accordin to its parent td.
}
function setWidth() {
    var questionCellWidth = $("#qandatbl tbody .question").width();
    var questionCellHeight = $("#qandatbl tbody .question").height();
    $(".textAreaQuestion").css({
        "width": (questionCellWidth - 6) + "px",
        "height": (questionCellHeight) + "px"
    });
} 
```

其余的取决于您如何使应用程序的外观感觉我刚刚解决了文本区域的整个宽度和高度问题。

# c - 用于打印 C 文件的函数详细信息的 C 程序

> ID：14009088
> 
> 赞同：-1
> 
> 时间：2012-12-23T06:18:20.447
> 
> 标签：c, linux, segmentation-fault, structure, coredump

对于给定的 C 代码，我想打印每个函数的函数名称和行数。

下面是我的代码：

```
struct fundetails
{
    int nooflines;
    char funcname[SIZE];
}s[SIZE];

char *ffname(char *line,char *name)
{

    int i=1,j=0;
    char *dt; 

    strtok(line,"("); 
    dt = strchr(line,' '); 
    if(dt[i] == '*')
        i++;
    while(dt[i] != '\0')
    {
        name[j]=dt[i];
        i++;
        j++;
    }
    name[j] ='\0';
    return NULL;  //...
}
int main(int argc, char **argv)
{
    if(argc < 2)
    {
        printf("Give the filename \n");
        printf("Usage: %s filename\n", argv[0]);
        return -1;
    }
    int i, lines =0, funlines =0,count =0, fn =0, flag =0, fg=0,size=0,emptyflag=0,commandflag=0;
    char c[SIZE],b[SIZE],st[SIZE],d[SIZE];
    char *fname;
    int command[]={};
    FILE *fd;
    fd = fopen(argv[1],"r");
    while(fgets(c,SIZE,fd))
    {
        emptyflag=0;    
        lines++;
        for(i=0;i<(sizeof(command)/4);i++)
        {
            if(lines == command[i])
            {
                commandflag=1;
                break;
            }   
        }
        strcpy(st,c);
        strtok(st," ");
        size = strlen(c);
        if(size == 1 && (strcmp(c,"\n"))== 0)// Checking for empty line
            emptyflag=1;
        if( !strcmp(st,"struct")) // Checking whether line is structure or struct function
            fg=1;
        for(i=0;i<size;i++)
        {
            if(commandflag)
            {
                break;
            }   
            while( c[i] =='\t' || c[i] == ' ')
            {
                i++;
            }
            if( c[i] == '{')
            {
                count++;
                if(flag)
                {
                    if(!emptyflag)
                        funlines++;
                    else
                        emptyflag=0;
                }
                if(count ==1 && fg ==1)
                {
                    if(b[strlen(b)-2] == ')')
                    {
                        fn++;
                        printf("Dhahira");
                        printf("Function %d is Started..............\n", fn); 

                        flag = 1;
                        printf("Dhahira");
                        ffname(b,fname);
                        printf("Function name is:%s\n",fname);
                    }   
                    else
                    {
                        count--;
                    }   
                }
                else if(count == 1)
                {
                    fn++;
                    printf("Function %d is Started..............\n", fn); 
                    flag = 1;
                    ffname(b,fname);//...
                    printf("Function name is:%s\n",fname);
                }
                break;
            }
            else if( c[i] == '}')
            {
                count--;
                if(count ==0 && fg ==1)
                { 
                    flag = 0;
                    printf("No of lines in the function %d is: %d\n", fn, funlines);
                    printf("Function %d is finished..........\n", fn);
                    s[fn-1].nooflines=funlines;//...
                    strcpy(s[fn-1].funcname,fname);//..
                    funlines = 0;
                    fg=0;
                }
                else if(count ==0)
                {
                    flag = 0;
                    printf("No of lines in the function %d is: %d\n", fn, funlines);
                    printf("Function %d is finished..........\n", fn);
                    s[fn-1].nooflines=funlines;//...
                    strcpy(s[fn-1].funcname,fname);//..
                    funlines = 0;
                }
                else if(count == -1)
                {
                    count=0;
                    fg=0;
                }
                else 
                {
                    if(!emptyflag)
                        funlines++;
                    else
                        emptyflag=0;
                }
                break;
            }
            else if(flag ==1 && fg==1)
            {
                if(!emptyflag)
                    funlines++;
                else
                    emptyflag=0;
                break;
            }
            else if(flag)
            {
                if(!emptyflag)
                    funlines++;
                else
                    emptyflag=0;
                break;
            }
            break;
        }
        if(commandflag == 1)
            commandflag = 0;
        else
            strcpy(b,c);
    }

    printf("FUN_NAME\tNO_OF_LINES\n");
    for(i=0;i<fn;i++)
    {
    printf("%s\t\t%d\n",s[i].funcname,s[i].nooflines);
    }
    return 0;
} 
```

我得到以下输出。

```
Function 1 is Started..............
Segmentation fault (core dumped) 
```

我认为该`ffname`功能可能是一个原因。但是，当我在该行上方包含一个 printf 语句时`printf("Function %d is Started..............\n", fn);`，它仍然不打印该行。所以，我无法弄清楚这个问题背后的真正原因。请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T06:23:58.080

分段错误是由于未初始化使用`fname`. 将其声明为数组：

```
char fname[256]; // or dynamically allocate 
```

它应该可以工作。您看不到 printf 输出，因为此函数写入缓冲区并且不会立即输出您写入的内容。在分段错误之后，缓冲的输出消失了。您可以通过紧跟`fflush(stdout)`在`printf`.

`-Wall`如果您使用标志编译代码，您也可以看到警告消息。

# iphone - 是否有任何谷歌 API 可以限制地图中街道的速度？

> ID：14009090
> 
> 赞同：0
> 
> 时间：2012-12-23T06:18:54.897
> 
> 标签：iphone, google-maps

我想开发一个 iPhone 应用程序，使用户能够跟踪他的速度和街道/道路的速度限制。是否有任何谷歌地图 API 可以为我们提供这些信息？如果没有，谁能告诉我任何替代的第 3 方解决方案。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:54:31.613

我认为目前不存在这样的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-02T15:02:27.230

现在谷歌已经开始提供可选的限速数据。

请参阅以下链接中的 Roads Web 服务部分。 [https://developers.google.com/maps/licensing](https://developers.google.com/maps/licensing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-13T16:13:59.770

Google现在*确实*提供了一个 Roads API，您可以在其中查询限速数据，但是，根据此处找到的页面[https://developers.google.com/maps/licensing](https://developers.google.com/maps/licensing)，您必须获得 Google Maps For Work 许可证。您不得免费查询限速数据。看起来营业执照每年运行 1 万美元。

# android - 映射外部字符串 android

> ID：14009097
> 
> 赞同：1
> 
> 时间：2012-12-23T06:20:59.167
> 
> 标签：android, string, map

我使用一个独立的库在 Android 中执行一个动作。如果出现错误，库会引发异常，其中包含整数可解析字符串错误代码（如`"233"`）。有几个错误代码。我想创建一个属性文件来将错误消息映射到错误代码。

这很容易，但是外部化字符串（如`R.string.divisionError = 2130968584`）的 ID 值可以在任何构建中重新生成，因此它们不稳定，可以更改值。

我不能像这样写入该属性文件 stg：

```
233=2130968584 
```

我可以把

```
233=divisionError 
```

然后使用反射查找`divisionError`在 R.string.class 中调用的字段，获取其值并使用`getString(int)`.

没有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:50:48.467

该类`android.content.res.Resources`有一个方法`getIdentifier(String name, String defType, String defPackage)`，当您知道其名称时，您可以使用该方法获取数字资源 ID。

因此，您可以将资源名称放入您的属性文件中，然后使用此方法获取 id。

# html - Ajax 调用不起作用

> ID：14009099
> 
> 赞同：-1
> 
> 时间：2012-12-23T06:21:59.693
> 
> 标签：html, ajax

我在使用我的代码时遇到了困难：

```
<input id="button"  type="button" value="Load"/>
<div id="content"> </div>

<script src="js/ajax.js" type="text/javascript"></script> 
```

使用 ajax：它似乎没有运行。

```
$('#button').click(function() { 
    $.ajax({ 
        url: 'page.html', 
        success: function(data) {
            $('#content').html(data);
        }
    });
}); 
```

页面 html 包含`<span>Hello</span>`

任何人都可以帮助我我不知道我已经用这个测试过并且工作正常：

```
<input type="text" onclick="$(this).hide();"/> 
```

**注意**我有`<script src="js/jquery.js" type="text/javascript"></script>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:26:22.167

您是否链接了 jquery.js 库？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T06:28:23.710

首先在页面顶部加载 jquery 库

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T07:22:12.803

尝试指定数据类型：

使用下面的代码

```
<script>
$(function($) {
    $('#button').click(function() { 
        $.get('page.html',function(data)
        {
            $("#content").html(data);
        },"html")
    });
});
</script> 
```

玩得开心：）

# heroku - 如何为本地开发与 Heroku 部署提供不同的 Procfile？

> ID：14009104
> 
> 赞同：1
> 
> 时间：2012-12-23T06:22:58.873
> 
> 标签：heroku, foreman

例如，在我的本地环境中，我想启动 MongoDB，但在 Heroku 上，不需要它。

与 Heroku 相比，我如何在本地环境中拥有一组不同的进程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T14:38:36.860

创建两个具有不同扩展名的 Procfile。

所以你会有

./Procfile 包含您希望它们用于 Heroku 的进程 ./Procfile.local 包含您在本地需要的进程

在本地启动工头时，您需要输入：foreman start -f Procfile.local

# javascript - Obj['var'] 和 Obj.prototype.var 有区别吗？

> ID：14009110
> 
> 赞同：1
> 
> 时间：2012-12-23T06:24:38.087
> 
> 标签：javascript, oop

我不太确定如何用单词来陈述这个问题，因为我不知道该怎么称呼它 -> `Obj['var] = something`。

我相信标题总结了它，以这两种不同的方式声明对象的变量或函数是否有任何区别，或者它们是否相同，做同一件事的不同方式。

**编辑：**

我的代码示例：

抱歉，变量名称令人困惑，请注意大写字符：/

```
buttons = document.getElementsByClassName('button');
Buttons = new Button_Objs();

for (i = 0 ; i < buttons.length ; i++){
    button = buttons[i];
    Buttons['button' + i] = new Button(button);
} 
```

* * *

```
var Button = function(elem){
    this.buttonType = elem.getAttribute('button-type');
    if (this.buttonType = 'safety'){
        constructSafetyButton(elem, this);
    }
} 
```

* * *

```
function constructSafetyButton(elem, button){

    button['setState'] = function(state){//do something} 
```

## }

尝试使用时被浏览器大喊大叫`button.prototype.setState = func...`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T06:33:49.430

`Obj['var'] = ...`（`Obj.var = ...`就此而言）将属性分配给`Obj`所引用的对象。

例子：

```
var obj = {};
obj['foo'] = 'bar';
// or obj.foo = 'bar';
console.log(obj.foo); // shows 'bar' 
```

* * *

`Obj.prototype.var = ...`很可能会抛出一个错误，除非`Obj`是一个**函数**。函数有一个特殊的属性`prototype`，当函数作为构造函数调用时，所有新实例都继承自该属性，即使用`new`关键字调用。

例子：

```
function Foo() {}
Foo.prototype.bar = 'baz';

var foo = new Foo();
console.log(foo.bar); // shows 'baz' 
```

由于函数本身也是对象，因此您也可以为它们分配属性

```
Foo.someProp = 'someVal'; 
```

但这根本不影响由创建的实例`Foo`。新实例仅继承自`Foo.prototype`：

```
console.log(foo.someProp); // shows undefined 
```

* * *

虽然这两个语句都将属性分配给对象（在这方面它们是“相同的”），但结果却完全不同。

如果您想了解更多关于 JavaScript 中原型继承的信息，请查看[MDN - 对象模型的详细信息](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model)和[MDN - 继承和原型链](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T06:29:25.280

根据标题中的问题，不，它们是不同的。

```
Obj['var'] = something 
```

相当于：

```
Obj.var = something; 
```

`prototype`这与在某个对象的属性上设置值完全不同。

```
Obj.prototype.var = somthing 
```

# javascript - 如何在 Google 应用程序脚本中使用复选框小部件？

> ID：14009115
> 
> 赞同：0
> 
> 时间：2012-12-23T06:25:18.670
> 
> 标签：javascript, google-apps-script

我想弄清楚如何创建一个函数，在选中时将“productInfoButton”的颜色变为石灰绿色，在未选中时变为灰色？有人可以帮忙吗？

```
function doGet(e) {
  var app = UiApp.createApplication();

  var productInfoButton = app.createButton("Products").setId('productInfoButton');

  var handlerL = app.createServerClickHandler('prodCompleteHandlerL');
  var productCompleteCheckBox = app.createCheckBox().setId("productCompleteCheckBox")
  .setName("productCompleteCheckBox");
  productCompleteCheckBox.addClickHandler(handlerL);
  handlerL.addCallbackElement(productInfoButton);

  app.add(productInfoButton);
  app.add(productCompleteCheckBox);

  return app;
}

function prodCompleteHandlerL(e) {
  var app = UiApp.getActiveApplication();
  app.getElementById('productInfoButton').setStyleAttribute('background', 'lime')
  return app;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:29:16.930

复选框的状态在使用小部件名称的事件信息参数中可用。在您的代码中，它将是：

```
function prodCompleteHandlerL(e) {
  var app = UiApp.getActiveApplication();
if(e.parameter.productCompleteCheckBox == 'true'){
  app.getElementById('productInfoButton').setStyleAttribute('background', 'lime')
}else{
  app.getElementById('productInfoButton').setStyleAttribute('background', '#dddddd') // is light grey
}
  return app;
} 
```

编辑：我没有注意到另一个问题（对此感到抱歉）：`CallbackElement`应该包括`productCompleteCheckBox`.... 所以你应该在主函数中使用`productCompleteCheckBox`as `callBackElement`（或者使用包含这个 wjidget 的父小部件（如果有的话））

**EDIT2** : *following your comment :* You can find documentation on colors and styles by looking for [CSS documentation](http://www.w3schools.com/css/css_background.asp) since it is what is used here... or you can have a look at the options available in the GUI builder to get inspiration and to see what happens in a WYSWYG environment. Everything that can be done with the GUI builder can of course be done using script (in fact script is even more powerful but it's nice to have an idea).

If you want to get a widget transparent simply use `.setStyleAttribute('background','transparent')`

**EDIT 3 :** getting the 'default look' for buttons:

Examinig the code from a page I noticed that it uses a .png file in a cache... since I couldn't find a way to use that I copied the file, put it on a public folder, get the url and used it in the style... quite a surprise : it's working. (the url found in the page seems to be specific to the script, I don't know if I could use it in another script)

Maybe someone smarter than me will find a more easy way to achieve the same goal, feel free to comment and/or suggest ;-)

Also : I copied all the parameters, some of them are useless in this use case, I know ^^

```
 var btn = app.getElementById('btn').setStyleAttributes({ 
  'margin': '5px',
  'padding': '3px 5px',
  'text-decoration': 'none',
  'font-size': 'small',
  'cursor': 'pointer',
  'cursor': 'hand',
  'background': 'url("https://dl.dropbox.com/u/211279/hborder.png") repeat-x 0px -27px',
  'border': '1px outset #ccc'
  }) 
```

# jquery - 一个自动滚动 NiceScroll JQuery 插件可以吗？

> ID：14009117
> 
> 赞同：1
> 
> 时间：2012-12-23T06:25:30.930
> 
> 标签：jquery

我的[nicescroll](http://areaaperta.com/nicescroll/)插件运行良好，但我需要它自动滚动到最新更新的底部。我不需要`resize()`上课，效果很好。插件似乎没有方法。

有没有类似的插件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:31:03.093

您不需要任何其他插件，您必须使用普通的 jquery 函数：

```
$("#yourdiv").scrollTop($("#yourdiv").prop("scrollHeight")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T11:45:08.667

$(element).getNiceScroll().doScrollPos(0,$(last-element).position().top);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T02:13:08.593

我遇到了同样的问题。但我需要做的是检测滚动条何时触及底部。我在github上找到了解决方案：

```
var nice = $("#yourDiv").getNiceScroll();
if(nice.getScrollTop() == nice.page.maxh) {
    // the scrollbar touches the bottom now
} 
```

另见：[https ://github.com/inuyaksa/jquery.nicescroll/issues/71](https://github.com/inuyaksa/jquery.nicescroll/issues/71)

希望能帮助到你。

PS：我的 nicescroll 版本是 3

# c++ - 将域的IP保存到txt文件/使用c++或批处理将我的动态ip保存到txt文件

> ID：14009118
> 
> 赞同：0
> 
> 时间：2012-12-23T06:25:32.723
> 
> 标签：c++, networking, batch-file, ip, hosts

^^^^

我需要将我的域 (xxx.noip.com) 的 IP 或我的外部 IP 保存到文本文件中。然后它将被上传到公共保管箱帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:49:50.640

您可以通过浏览[http://checkip.dyndns.org来获取您的外部 IP](http://checkip.dyndns.org)

**假设**您的 Dropbox 文件夹是**C:\dropbox**

这是一个批处理脚本，可将您的公共 IP 保存到您的保管箱文件夹中的文件中。

**get_my_public_ip.bat：**

```
wget -q -O - http://checkip.dyndns.org > C:\dropbox\my_public_ip.html 
```

您需要[wget](http://en.wikipedia.org/wiki/Wget)才能运行它，并且它应该被放置在您的[PATH](http://en.wikipedia.org/wiki/Path_%28variable%29)变量中的一个文件夹中（例如 C:\Windows）。[你可以在这里](http://users.ugent.be/~bpuype/wget/wget.exe)找到一个 Windows 端口。HTML 标记不会从文件中删除，因此其内容类似于：

`<html><head><title>Current IP Check</title></head><body>Current IP Address: 1.2.3.4</body></html>`

这是一个 Windows PowerShell 脚本，它执行相同的工作**并去除**不必要的文本。

**get_my_public_ip.ps1：**

```
(new-object System.Net.WebClient).DownloadString('http://checkip.dyndns.org')|% { $_ -replace '.*Current IP Address: ([0-9\.]+).*','$1' } > C:\dropbox\my_public_ip.txt 
```

[在此处](http://technet.microsoft.com/en-us/library/ee176949.aspx)查看有关如何运行 Windows PowerShell 脚本的一些帮助。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T18:30:48.257

这是一个可以做到这一点的脚本。使用 cron 设置自动任务以更新 ip。

```
#!/bin/bash
# Script to write external ip to ip.txt in Dropbox folder
curl icanhazip.com >> ~/Dropbox/ip.txt
echo "The Ip for $HOSTNAME" >> ~/Dropbox/ip.txt
date >> ~/Dropbox/ip.txt
echo "" >> ~/Dropbox/ip.txt 
```

# java - 在 JPA 中限制集合的大小

> ID：14009119
> 
> 赞同：4
> 
> 时间：2012-12-23T06:25:35.570
> 
> 标签：java, mysql, hibernate, jpa

假设我有这样的实体

```
@Entity
Class A{
//fields

@Onetomany
Set<B> b; // 
} 
```

现在，我如何限制集合中“B”的数量，以便当集合中有新条目时，删除最旧的条目，例如我们在 LinkedHashMap 中的[removeEldestEntry 。](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashMap.html#removeEldestEntry%28java.util.Map.Entry%29)

我将 MySQL 5.5 DB 与 Hibernate 一起使用。提前致谢。

**编辑**

我的目标是在任何时候该表中的条目数不超过 N 个。我有一个解决方案是使用 Set 并安排一个作业来删除旧条目。但我觉得它很脏。我正在寻找更清洁的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:23:30.757

我会使用代码手动执行此规则。主要思想是集合 B 应该被很好地封装，以便客户端只能通过公共方法（即`addB()`）更改其内容。只需在此方法 ( `addB()`) 中确保此规则，以确保集合 B 中的条目数不能大于一个值。

A：

```
@Entity
public class A {

    public static int MAX_NUM_B = 4;

    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
    private Set<B> b= new LinkedHashSet<B>();

    public void addB(B b) {
        if (this.b.size() == MAX_NUM_B) {
            Iterator<B> it = this.b.iterator();
            it.next();
            it.remove();
        }
        this.b.add(b);
    }

    public Set<B> getB() {
        return Collections.unmodifiableSet(this.b);
    }
} 
```

乙：

```
@Entity 
public class B{

    @ManyToOne
    private A a;
} 
```

要点：

*   A 应该是关系的所有者。
*   在 A 中，不要简单地返回 B，因为客户端可以绕过其中实现的检查逻辑`addB(B b)` 并自由更改其内容。相反，返回 B 的不可修改视图。
*   在 @OneToMany 中，设置`orphanRemoval`为 true 以告诉 JPA 在从 B 集合中删除其相应实例后删除 B 的 DB 记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T06:46:03.763

[Apache Commons Collection](http://commons.apache.org/collections/)提供了一个 API 。在这里，您可以使用类[CircularFifoBuffer](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/buffer/CircularFifoBuffer.html)来参考您遇到的相同问题，如果您想要如下所示的示例，您可以实现

```
Buffer buf = new CircularFifoBuffer(4);
buf.add("A");
buf.add("B");
buf.add("C");
buf.add("D"); //ABCD
buf.add("E"); //BCDE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T06:38:14.697

我认为您将不得不手动执行此操作。

想到的一种解决方案是在 entity 中使用`@PrePersist`事件`@PreUpdate`侦听器`A`。

在使用上述注释注释的方法中，您检查 的大小`Set<B>`，如果它超过最大限制，则删除最旧的 B 条目（可能由`created_time`B 的时间戳属性跟踪）

# c++ - “可分配”的真正含义是什么？

> ID：14009120
> 
> 赞同：27
> 
> 时间：2012-12-23T06:25:47.507
> 
> 标签：c++, c++11, language-lawyer

C++11 删除了所有容器的值类型是 CopyConstructible 和 Assignable 的要求（尽管容器上的特定操作可能会施加这些要求）。从理论上讲，这应该可以定义例如 ，`std::deque<const Foo>`这在 C++03 中是不可能的。

出乎意料的是，当我尝试这样做时，gcc 4.7.2 产生了它通常吐出的难以理解的错误 [1]，但 clang 至少使错误可读，并且使用 libc++ 编译它时没有错误。

现在，当两个不同的编译器产生不同的结果时，我总是想知道正确的答案是什么，所以我搜索了所有我能找到的关于 const/assignable/value types/containers 等的引用。我发现几乎十年来非常相似的问题和答案，其中一些在 SO 上，其他在各种 C++ 邮件列表中，在其他地方，包括 Gnu buganizer，所有这些基本上都可以总结为以下对话。

问：为什么我不能申报`std::vector<const int>`（作为一个简化的例子）

A：你到底为什么要这么做？这是荒谬的。

问：嗯，这对我来说很有意义。为什么我做不到？

答：因为标准要求值类型是可分配的。

问：但我不打算分配他们。在我创建它们之后，我希望它们成为 const 。

答：这不是它的工作方式。下一个问题！

伴随着温和的冲刺：

A2：C++11 已经决定允许这样做。你只需要等待。与此同时，重新考虑你荒谬的设计。

这些似乎不是很有说服力的答案，尽管我可能有偏见，因为我属于“但对我来说有意义”的类别。就我而言，我希望有一个类似堆栈的容器，其中推入堆栈的东西在弹出之前是不可变的，这对我来说并不是一件特别奇怪的事情，希望能够用一种类型来表达系统。

无论如何，我开始思考答案，“标准要求所有容器的值类型都是可分配的。” 而且，据我所知，现在我找到了 C++03 标准草案的旧副本，这是真的；它做了。

另一方面， is 的值类型在`std::map`我看来不像是可分配的。尽管如此，我还是再次尝试了，并且 gcc 继续编译它而没有眨眼。所以至少我有某种解决方法。`std::pair<**const** Key, T>``std::deque<std::tuple<const Foo>>`

然后我尝试打印出`std::is_assignable<const Foo, const Foo>`and的值`std::is_assignable<std::tuple<const Foo>, const std::tuple<const Foo>>`，结果发现前者被报告为不可分配，正如您所期望的，但后者被报告为可分配（由 clang 和 gcc 报告）。当然，它并不是真正可分配的。尝试编译`a = b;`被 gcc 拒绝并抱怨`error: assignment of read-only location`（这只是我在此任务中遇到的唯一错误消息，实际上很容易理解）。但是，如果不尝试进行分配，clang 和 gcc 都同样乐意实例化`deque<const>`，并且代码似乎运行良好。

现在，如果`std::tuple<const int>`真的是可分配的，那么我不能抱怨`C++03`标准中的不一致——而且，真的，谁在乎——但我发现两个不同的标准库实现报告一个类型实际上是可分配的，这令人不安，试图分配给它的引用将导致（非常明智的）编译器错误。我可能在某个时候想在模板 SFINAE 中使用测试，根据我今天看到的，它看起来不太可靠。

那么有没有人可以阐明这个问题（在标题中）：*Assignable 的真正含义是什么？*还有两个额外的问题：

1) 委员会是否真的打算允许实例化具有`const`值类型的容器，或者他们是否有其他不可分配的情况？

`const Foo`2)和的常数之间真的存在显着差异`std::tuple<const Foo>`吗？

* * *

[1] 对于真正好奇的人，这里是 gcc 在尝试编译声明时产生的错误消息`std::deque<const std::string>`（添加了一些行尾，如果向下滚动足够远，则会给出解释）：

```
In file included from /usr/include/x86_64-linux-gnu/c++/4.7/./bits/c++allocator.h:34:0,
                 from /usr/include/c++/4.7/bits/allocator.h:48,
                 from /usr/include/c++/4.7/string:43,
                 from /usr/include/c++/4.7/random:41,
                 from /usr/include/c++/4.7/bits/stl_algo.h:67,
                 from /usr/include/c++/4.7/algorithm:63,
                 from const_stack.cc:1:
/usr/include/c++/4.7/ext/new_allocator.h: In instantiation of ‘class __gnu_cxx::new_allocator<const std::basic_string<char> >’:
/usr/include/c++/4.7/bits/allocator.h:89:11:   required from ‘class std::allocator<const std::basic_string<char> >’
/usr/include/c++/4.7/bits/stl_deque.h:489:61:   required from ‘class std::_Deque_base<const std::basic_string<char>, std::allocator<const std::basic_string<char> > >’
/usr/include/c++/4.7/bits/stl_deque.h:728:11:   required from ‘class std::deque<const std::basic_string<char> >’
const_stack.cc:112:27:   required from here
/usr/include/c++/4.7/ext/new_allocator.h:83:7:
  error: ‘const _Tp* __gnu_cxx::new_allocator< <template-parameter-1-1> >::address(
  __gnu_cxx::new_allocator< <template-parameter-1-1> >::const_reference) const [
  with _Tp = const std::basic_string<char>;
  __gnu_cxx::new_allocator< <template-parameter-1-1> >::const_pointer =
    const std::basic_string<char>*;
  __gnu_cxx::new_allocator< <template-parameter-1-1> >::const_reference =
    const std::basic_string<char>&]’ cannot be overloaded
/usr/include/c++/4.7/ext/new_allocator.h:79:7:
  error: with ‘_Tp* __gnu_cxx::new_allocator< <template-parameter-1-1> >::address(
  __gnu_cxx::new_allocator< <template-parameter-1-1> >::reference) const [
  with _Tp = const std::basic_string<char>;
  __gnu_cxx::new_allocator< <template-parameter-1-1> >::pointer = const std::basic_string<char>*;
  __gnu_cxx::new_allocator< <template-parameter-1-1> >::reference = const std::basic_string<char>&]’ 
```

所以这里发生的事情是标准（第 20.6.9.1 节）坚持默认分配器具有成员函数：

```
pointer address(reference x) const noexcept;
const_pointer address(const_reference x) const noexcept; 
```

但是如果您使用`const`模板参数（显然是 UB）实例化它，那么`reference`和`const_reference`是相同的类型，因此声明是重复的。（定义的主体是相同的，因为它的价值。）因此，没有分配器感知容器可以处理显式`const`值类型。隐藏`const`内部 a`tuple`允许分配器实例化。标准中的这个分配器要求被用来证明至少关闭几个关于 `std::vector<const int>`. libc++ 也以一种明显简单的方式解决了这个问题，即提供一种特殊化的方法，`allocator<const T>`删除了重复的函数声明。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-23T08:14:29.787

在 C++03 中，`Assignable`由 §23.1/4 中的表 64 定义，

```
    表达式 返回类型 后置条件
    t = u T& t 等价于 u

```

一方面，这个要求没有得到满足`std::map`。另一方面，它的要求太严格了`std::list`。并且 C++11 证明了`std::vector`，一般来说，它甚至不是必需的，而是通过使用某些操作（例如赋值）来强加的。

在 C++11 中，相应的要求被命名`CopyAssignable`并由 §17.6.3.1/2 中的表 23 定义，

```
    表达式 返回类型 返回值 后置条件
    t = v T& tt 等价于 v，即
                                                 v 的值不变

```

主要区别在于不再需要容器元素`CopyAssignable`，并且有相应的要求`MoveAssignable`。

无论如何，具有`const`数据成员的结构显然是不可分配的，除非人们选择以非常奇特的解释来阅读“等价于”。

C++11 中唯一与操作无关的元素类型要求是，据我所知（来自 §23.2.1/4 中的表 96）它必须是`Destructible`.

* * *

关于`std::is_assignable`，它并没有完全测试`CopyAssignable`标准。

根据 C++11 §20.9.4.3/3 中的表 49，这`std::is_assignable<T, U>`意味着：

> “ `declval<T>() = declval<U>()`当被视为未评估的操作数时，表达式是格式良好的（第 5 条）。访问检查就像在与`T` 和无关的上下文中执行`U`。只考虑赋值表达式的直接上下文的有效性。[*注意：*表达式的编译可能会产生副作用，例如类模板特化和函数模板特化的实例化、隐式定义函数的生成等。这种副作用不在“直接上下文”中，并且可能导致程序格式错误。*——尾注*]”

本质上，这意味着对 的访问/存在 + 参数类型兼容性检查`operator=`，仅此而已。

然而，Visual C++ 11.0 似乎并没有进行访问检查，而 g++ 4.7.1 则扼杀了它：

```
#include <iostream>
#include <type_traits>
#include <tuple>
using namespace std;

struct A {};
struct B { private: B& operator=( B const& ); };

template< class Type >
bool isAssignable() { return is_assignable< Type, Type >::value;  }

int main()
{
    wcout << boolalpha;
    wcout << isAssignable< A >() << endl;              // OK.
    wcout << isAssignable< B >() << endl;              // Uh oh.
} 
```

使用 Visual C++ 11.0 构建：

```
[D:\dev\test\so\assignable]
> *cl 可分配.cpp*
可分配的.cpp

[D:\dev\test\so\assignable]
> _

```

使用 g++ 4.7.1 构建：

```
[D:\dev\test\so\assignable]
> *g++ 可分配的.cpp*
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/type_traits：替代'模板静态 decltype (((declval)()=(declval)(), std::__sfinae_types::__one()))std::__is_assignable_helper::__test(int) [with _
Tp1 = _Tp1; _Up1 = _Up1; _Tp = B; _Up = B] [与_Tp1 = B; _Up1 = B]'：
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/type_traits:1055: 68：'constexpr const bool std::__is_assignable_helper::value' 需要
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/type_traits:1060: 12：从“struct std::is_assignable”中需要
assignable.cpp:10:59：'bool isAssignable() [with Type = B]' 需要
assignable.cpp:16:32：从这里需要
assignable.cpp:7:24：错误：'B& B::operator=(const B&)' 是私有的
在 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/ 中包含的文件中位/move.h:57:0,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/bits/stl_pair .h:61,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/bits/stl_algobase .h:65,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/bits/char_traits .h:41,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/ios:41 ,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/ostream:40 ,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/iostream:40 ,
                 来自assignable.cpp:1：
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/type_traits:1049: 2：错误：在这种情况下
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/type_traits：替代'模板静态 decltype (((declval)()=(declval)(), std::__sfinae_types::__one())) std::__is_assignable_helper::__test(int) [with _
Tp1 = _Tp1; _Up1 = _Up1; _Tp = B; _Up = B] [与_Tp1 = B; _Up1 = B]'：
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/type_traits:1055: 68：'constexpr const bool std::__is_assignable_helper::value' 需要
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/type_traits:1060: 12：从“struct std::is_assignable”中需要
assignable.cpp:10:59：'bool isAssignable() [with Type = B]' 需要
assignable.cpp:16:32：从这里需要
assignable.cpp:7:24：错误：'B& B::operator=(const B&)' 是私有的
在 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/ 中包含的文件中位/move.h:57:0,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/bits/stl_pair .h:61,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/bits/stl_algobase .h:65,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/bits/char_traits .h:41,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/ios:41 ,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/ostream:40 ,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/iostream:40 ,
                 来自assignable.cpp:1：
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/type_traits:1049: 2：错误：在这种情况下
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/type_traits：在实例化中'constexpr const bool std::__is_assignable_helper::value':
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/type_traits:1060: 12：从“struct std::is_assignable”中需要
assignable.cpp:10:59：'bool isAssignable() [with Type = B]' 需要
assignable.cpp:16:32：从这里需要
assignable.cpp:7:24：错误：'B& B::operator=(const B&)' 是私有的
在 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/ 中包含的文件中位/move.h:57:0,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/bits/stl_pair .h:61,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/bits/stl_algobase .h:65,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/bits/char_traits .h:41,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/ios:41 ,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/ostream:40 ,
                 来自 d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/iostream:40 ,
                 来自assignable.cpp:1：
d:\bin\mingw\bin\../lib/gcc/i686-pc-mingw32/4.7.1/../../../../include/c++/4.7.1/type_traits:1055: 68：错误：在这种情况下

[D:\dev\test\so\assignable]
> _

```

因此，总而言之，该标准的`std::is_assignable`实用性似乎非常有限，并且在撰写本文时，它不能依赖于可移植代码。

* * *

**编辑：**替换`<utility>`为正确的`<type_traits`. 有趣的是，这对 g++ 无关紧要。甚至没有错误消息，所以我就让它保持原样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T16:43:14.340

我把这个给了[Alf](https://stackoverflow.com/users/464581/cheers-and-hth-alf)，但我想添加一些注释以供将来参考。

正如 Alf 所说，`std::is_*_assignable`实际上只检查是否存在（显式或隐式）适当的赋值运算符。他们不一定会检查它是否会在实例化时形成良好的格式。这适用于默认赋值运算符。如果声明了成员`const`，则默认的赋值运算符将被删除。如果基类有一个已删除的赋值运算符，则默认的赋值运算符将被删除。因此，如果您只是让默认值做他们的事情，那应该没问题。

但是，如果您确实 declare `operator=`，您有责任（如果您关心的话）确保它被适当地删除。例如，这将编译并运行（至少使用 clang），并报告`C`is_assignable：

```
#include <iostream>
#include <type_traits>
#include <tuple>
using namespace std;

struct A { const int x; A() : x() {}};

struct C { 
  struct A a;
  C& operator=( C const& other);
};

template< class Type >
bool isAssignable() { return is_assignable< Type&, const Type& >::value;  }

int main()
{
    wcout << boolalpha;
    wcout << isAssignable< A >() << endl; // false
    wcout << isAssignable< C >() << endl; // true
    C c1;
    C c2;
} 
```

直到链接时才注意到缺少赋值运算符的定义，在这种情况下根本没有，因为从未使用过赋值运算符。但请注意，使用`C::operator=`contingent on`std::is_assignable`将被允许编译。当然，我不能`C::operator=`以一种导致分配给其成员的方式进行定义`a`，因为该成员是不可分配的。

不过，这并不是一个特别有趣的例子。有趣的是模板的使用，例如`std::tuple`引发整个问题的问题。让我们在上面添加几个模板，并`C::operator=`通过分配给它的成员来实际定义`a`：

```
using namespace std;

template<bool> struct A {
  A() : x() {}
  const int x;
};

template<bool B> struct C {
  struct A<B> a;
  C& operator=( C const& other) {
    this->a = other.a;
    return *this;
  }
};  

template< class Type >
bool isAssignable() { return is_assignable< Type&, const Type& >::value;  }

int main()
{   
    wcout << boolalpha;
    wcout << isAssignable< A<false> >() << endl; // false
    wcout << isAssignable< C<false> >() << endl; // true
    C<false> c1;
    C<false> c2;
    c1 = c2;                                     // Bang
    return 0;
} 
```

最后没有赋值，代码编译并运行（在clang 3.3下）并报告`A<false>`不可赋值（正确）但`C<false>`可赋值（惊喜！）。实际使用的尝试`C::operator=`揭示了真相，因为直到那时编译器才尝试实际实例化该运算符。到那时，通过 的实例化`is_assignable`，操作符只是一个公共接口的声明，正如 Alf 所说，这`std::is_assignable`就是真正要寻找的一切。

呸。

所以最重要的是，我认为这是标准和标准库实现中关于标准聚合对象的缺陷，`operator=`如果任何组件类型不可分配，则应将其删除。对于`std::tuple`，第 20.4.2.2 节列出`operator=`了所有组件类型都可以分配的要求，并且对其他类型也有类似的要求，但我认为该要求不需要库实现者删除 inapplicable `operator=`。

但是，据我所知，没有什么能阻止库实现进行删除（除了有条件地删除赋值运算符的烦恼因素）。在我纠结了几天之后，我认为他们应该这样做，而且标准应该要求他们这样做。否则，可靠使用是`is_assignable`不可能的。

# java - JSP，“无法将用户解析为类型”

> ID：14009126
> 
> 赞同：1
> 
> 时间：2012-12-23T06:28:33.867
> 
> 标签：java, html, jsp, tomcat, servlets

我正在研究第 4 章中的 Murach 的 Java Servlet 和 JSP，当我加载 http:// 按钮时，我得到了错误。谁能看到导致问题的原因，我将所有文件都存储在 tomcat/webapps/MailList 中。我已经浏览了这段代码几个小时，找不到任何导致问题的语法，只是认为另一双眼睛可能会抓住它。或者有人可以解释一下，非常感谢任何帮助，这是我第一天弄乱 Servlets/JSP 和 tomcat。

**join_email_list.html** _

 **```
<!DOCTYPE html>
<html>
    <head>
        <title>Chapter 4 - Email List application</title>
    </head>
    <body background="C:\Users\Public\Pictures\Sample Pictures\Lighthouse.jpg" >
        <h1>Join the Murach's mailing list</h1>
        <p>To join the Murach's mailing list, enter your name and email address below.<br>
            Then, click n the submit to recieve special offers.</p>
        <form action="show_email_entry.jsp" method="get">
            <table cellspacing="5">
                <tr>
                    <td align="right" >First name</td>
                    <td><input type="text" name="firstName"></td>
                </tr>
                <tr>
                    <td align="right">Last name</td>
                    <td><input type="text" name="lastName"></td>
                </tr>
                <tr>
                    <td align="right">email address</td>
                    <td><input type="text" name="emailAddress"></td>
                </tr>
                <tr>
                    <td></td>
                    <td><br><input type="submit" value="Submit"></td>
                </tr>
            </table>
        </form>
    </body>
</html> 
```

**show_email_list.jsp** _

 **```
<!DOCTYPE html public"-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title>Chapter 4 - Email List</title>
    </head>
    <body>
        <%@page import="business.*, data.*" %>
        <%
            String firstName = request.getParameter("firstName");
            String lastName = request.getParameter("lastName");
            String emailAddress = request.getParameter("emailAddress");
            User user = new User(firstName, lastName, emailAddress);
            UserIO.addRecord(user, "..webapps/MailingList/UserEmail.txt");
        %>
        <h1>Thanks for joining</h1>
        <table cellspacing="5">
            <tr>
                <td align="right">First Name: </td>
                <td><%= user.getFirstName() %></td>
            </tr>
            <tr>
                <td align="right">Last Name: </td>
                <td><%= user.getLastName() %></td>
            </tr>
            <tr>
                <td align="right">Email Address: </td>
                <td><%= user.getEmailAddress() %></td>
            </tr>
        </table>

        <form action="join_email_list.html" method="post">
            <input type="submit" value="Return">
        </form>
    </body>
</html> 
```

**User.java**类_

```
package business;

public class User {
    private String firstName;
    private String lastName;
    private String emailAddress;
    //this class defines a user, what we can get from a user to store
    public User(){}
    public User(String first, String last, String email){
        firstName=first;
        lastName=last;
        emailAddress=email;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getEmailAddress() {
        return emailAddress;
    }

    public void setEmailAddress(String emailAddress) {
        this.emailAddress = emailAddress;
    }

} 
```

**UserIO.java**类_

```
package data;

import business.User;
import java.io.*;

public class UserIO { //the user io class adds the entered info to a txt file a.k.a psuedo db
    public synchronized static void addRecord(User user, String fileName) 
            throws IOException{
        PrintWriter out = new PrintWriter( //open the printwriter
                new FileWriter(fileName, true)); //write to file
        out.println(user.getEmailAddress()+"|"//write these things to file
                +user.getFirstName()+"|"
                +user.getLastName());
        out.close();//close out to free resources
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:30:14.067

`user`在您尝试的范围内也不是不可访问的

```
C:\Users\Public\Pictures\Sample Pictures\Lighthouse.jpg 
```

不会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T05:13:49.483

利用

```
UserIO.addRecord(user, "MailingList/UserEmail.txt"); 
```

代替

```
UserIO.addRecord(user, "..webapps/MailingList/UserEmail.txt"); 
```****

# networking - 游戏中多个用户之间的网络通信需要什么？

> ID：14009134
> 
> 赞同：1
> 
> 时间：2012-12-23T06:30:28.377
> 
> 标签：networking, webserver

我以前从未做过网络工作，所以我有点困惑。例如，假设我有一个简单的乒乓球游戏设置。如果我想在某种意义上制作多人游戏，让使用不同手机的两个人可以互相对战，那么忽略设置我还需要什么的代码。所以我需要一个专用服务器来处理多个用户之间的通信对吗？我可以以某种方式将我的 mac 变成处理该通信的服务器吗？我还有哪些其他选择？是否有我可以在游戏中使用的免费服务器。我只需要将各个部分组合在一起，因为尽管我对整个项目的各个部分都有相当的了解，但我不确定如何将所有内容组合在一起并将所有内容组合在一起。有人可以为我清除不确定性吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:35:29.820

对于这些情况，我使用[Nodejs](http://nodejs.org/)、[Socket.IO](http://socket.io/)和[Expressjs](http://expressjs.com/)，但通常免费主机没有安装这些软件。但是您可以从 Mac 和内部网络进行本地测试。

评论帖子类似于：

*   [多人 HTML5、Node.js、Socket.IO](https://stackoverflow.com/questions/6244230/multiplayer-html5-node-js-socket-io)
*   [node.js 和 socket.io](https://stackoverflow.com/questions/7849393/node-js-and-socket-io?rq=1)

问候。

# c - 重定向标准输入

> ID：14009139
> 
> 赞同：1
> 
> 时间：2012-12-23T06:30:55.997
> 
> 标签：c

如果您正在为已编译的 c 程序重定向输入，那么在程序中读取此输入的典型方法是什么。它只是scanf吗？假设您有如下文本文件：

```
1
2
3
4 
```

有 4 个数字，每行一个。如何在程序中重定向标准输入以读取此文件，并将其复制到另一个文本文件？每个新行都是通过scanf发送的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:33:49.560

流的重定向是一个*操作系统的概念，它与***C**语言无关。*如果您从标准输入流*中读取`stdin`，您将正确处理它。像use这样的函数隐式使用，因此无论它是从控制台还是从重定向文件获取输入，您的程序都可以正常工作。*`scanf``stdin`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:04:25.687

如果您在 Linux 上，重定向非常容易。如果您的可执行文件名称是`a.out`

```
$ echo `a.out` > file.txt 
```

将所有输出重定向`a.out`到`file.txt`*

# database - 找不到需要 ibm_db 指定的模块

> ID：14009143
> 
> 赞同：2
> 
> 时间：2012-12-23T06:32:33.750
> 
> 标签：database, ruby-on-rails-3, rubygems, ibm-midrange

我正在尝试安装“ibm_db”gem 并验证安装。我在 Windows 7 上运行，我正在尝试使用 32 位来处理一切。我需要连接的数据库是 IBM iSeries 上的 DB2。以下是我目前使用的步骤。

```
•   gem install “ibm_db”
•   irb
•   require “ibm_db” 
```

我得到以下结果：

```
c:\Users\Bob\RubymineProjects\beginruby>gem install ibm_db
Fetching: ibm_db-2.5.11-x86-mingw32.gem (100%)
Successfully installed ibm_db-2.5.11-x86-mingw32
1 gem installed
Installing ri documentation for ibm_db-2.5.11-x86-mingw32...
Installing RDoc documentation for ibm_db-2.5.11-x86-mingw32...

c:\Users\Bob\RubymineProjects\beginruby>gem list

*** LOCAL GEMS ***

abstract (1.0.0)
actionmailer (3.2.9, 3.2.7, 3.2.3, 3.1.8, 3.0.12, 3.0.1)
actionpack (3.2.9, 3.2.7, 3.2.3, 3.1.8, 3.0.12, 3.0.1)
activemodel (3.2.9, 3.2.7, 3.2.3, 3.1.8, 3.0.12, 3.0.1)
activerecord (3.2.9, 3.2.7, 3.2.3, 3.1.8, 3.0.12, 3.0.1)
activeresource (3.2.9, 3.2.7, 3.2.3, 3.1.8, 3.0.12, 3.0.1)
activesupport (3.2.9, 3.2.7, 3.2.3, 3.1.8, 3.0.12, 3.0.1)
addressable (2.3.2)
annotate (2.5.0, 2.4.1.beta1, 2.4.0)
archive-tar-minitar (0.5.2)
arel (3.0.2, 2.2.3, 2.0.10, 1.0.1)
autotest (4.4.6, 4.3.2)
autotest-fsevent (0.2.8)
autotest-growl (0.2.16)
autotest-rails (4.1.2)
autotest-rails-pure (4.1.2, 4.1.0)
bcrypt-ruby (3.0.1 x86-mingw32)
bigdecimal (1.1.0)
bootstrap-sass (2.2.1.1, 2.0.0)
bootstrap-will_paginate (0.0.9, 0.0.6)
builder (3.1.4, 3.0.4, 2.1.2)
bundler (1.2.3, 1.0.22)
capybara (2.0.1, 2.0.0, 1.1.3, 1.1.2)
childprocess (0.3.6)
coderay (1.0.8)
coffee-rails (3.2.2, 3.1.1)
coffee-script (2.2.0)
coffee-script-source (1.4.0)
columnize (0.3.6)
cucumber (1.2.1)
cucumber-rails (1.3.0, 1.2.1)
database_cleaner (0.9.1, 0.7.0)
debugger-ruby_core_source (1.1.5)
diff-lcs (1.1.3)
erubis (2.7.0, 2.6.6)
excon (0.16.10)
execjs (1.4.0)
factory_girl (4.1.0, 2.3.2, 1.3.3)
factory_girl_rails (4.1.0, 1.4.0, 1.0)
faker (1.1.2, 1.0.1, 0.3.1)
ffi (1.2.0 x86-mingw32, 1.1.5 x86-mingw32)
gherkin (2.11.5 x86-mingw32)
gravatar_image_tag (1.1.3, 1.0.0.pre2, 0.1.0)
guard (1.5.4)
guard-rspec (2.3.1, 2.3.0, 0.5.5)
guard-spork (1.4.0, 0.3.2)
heroku (2.33.3, 2.33.2, 2.33.1)
heroku-api (0.3.7, 0.3.6)
hike (1.2.1)
hpricot (0.8.6)
i18n (0.6.1, 0.5.0, 0.4.2)
ibm_db (2.5.11 x86-mingw32)
io-console (0.3)
journey (1.0.4)
jquery-rails (2.1.4, 2.1.3)
json (1.7.5, 1.5.4)
launchy (2.1.2)
libwebsocket (0.1.7.1, 0.1.6.1, 0.1.6)
linecache19 (0.5.13, 0.5.12)
listen (0.6.0, 0.5.3)
lumberjack (1.0.2)
mail (2.5.3, 2.5.2, 2.4.4, 2.3.3, 2.2.19)
method_source (0.8.1)
mime-types (1.19)
minitest (4.3.3, 4.3.2, 2.5.1)
multi_json (1.5.0, 1.4.0, 1.3.7, 1.2.0)
netrc (0.7.7)
nokogiri (1.5.5 x86-mingw32)
pg (0.14.1 x86-mingw32, 0.12.2 x86-mingw32)
polyglot (0.3.3)
pry (0.9.10 i386-mingw32)
rack (1.4.1, 1.3.6, 1.2.5)
rack-cache (1.2)
rack-mount (0.8.3, 0.6.14)
rack-ssl (1.3.2)
rack-test (0.6.2, 0.5.7)
rails (3.2.9, 3.0.12, 3.0.1)
railties (3.2.9, 3.2.7, 3.2.3, 3.1.8, 3.0.12, 3.0.1)
rake (10.0.3, 10.0.2, 10.0.1, 0.9.2.2)
rbx-require-relative (0.0.9)
rdiscount (1.6.8)
rdoc (3.12, 3.9.4)
RedCloth (4.2.9 x86-mingw32)
rest-client (1.6.7)
rspec (2.12.0, 2.6.0)
rspec-core (2.6.4)
rspec-expectations (2.12.0, 2.6.0)
rspec-mocks (2.12.0, 2.10.1, 2.9.0, 2.6.0)
rspec-rails (2.12.0, 2.6.1)
ruby-debug-base19x (0.11.30.pre10)
ruby-debug-ide (0.4.17.beta14)
ruby_core_source (0.1.5)
rubyzip (0.9.9)
sass (3.3.0.alpha.16, 3.2.4, 3.2.3)
sass-rails (3.2.5, 3.2.4, 3.1.6)
selenium-webdriver (2.27.1, 2.26.0)
slop (3.3.3)
spork (0.9.2, 0.9.0.rc8 x86-mingw32)
sprockets (2.8.1, 2.2.2, 2.2.1, 2.1.3, 2.0.4)
sqlite3 (1.3.6 x86-mingw32, 1.3.5 x86-mingw32, 1.3.4 x86-mingw32)
sqlite3-ruby (1.3.3)
sys-uname (0.9.0 x86-mingw32)
thor (0.16.0, 0.14.6)
tilt (1.3.3)
treetop (1.4.12)
tzinfo (0.3.35)
uglifier (1.3.0, 1.2.3)
webrat (0.7.3, 0.7.1)
websocket (1.0.4, 1.0.3, 1.0.2)
will_paginate (3.0.3, 3.0.pre2)
win32-process (0.7.0)
win32console (1.3.2 x86-mingw32)
xpath (1.0.0, 0.1.4)
ZenTest (4.8.3, 4.8.2)

c:\Users\Bob\RubymineProjects\beginruby>irb
irb(main):001:0> gem 'ibm_db'
=> true

rb(main):002:0> require 'ibm_db'
LoadError: 126: The specified module could not be found.   - C:/Ruby193/lib/ruby
/gems/1.9.1/gems/ibm_db-2.5.11-x86-mingw32/lib/mswin32/rb19x/ibm_db.so
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:i
n `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:i
n `rescue in require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:i
n `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/ibm_db-2.5.11-x86-mingw32/lib/m
swin32/ibm_db.rb:1:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:i
n `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:i
n `require'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/ibm_db-2.5.11-x86-mingw32/lib/i
bm_db.rb:1:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:i
n `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:i
n `require'
        from (irb):2
        from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):003:0> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-06T21:32:00.800

放入您的 irb 控制台（Windows）：

```
require 'mswin32/ibm_db'

conn = IBM_DB::connect("DATABASE","db2admin","password") 
```

当然，您可以使用来自 irb 的此连接执行任何操作，以测试您的 ibm_db gem，例如它是否正常工作。

# python - Exif 阅读库

> ID：14009148
> 
> 赞同：7
> 
> 时间：2012-12-23T06:33:46.193
> 
> 标签：python, image, python-3.x, exif

是否有适用于 Python 3.x 的 exif 库？似乎我遇到的每个 exif 库都仅适用于 Python 2.x。我不需要太花哨的东西。只需阅读这些值就足够了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-26T21:11:11.973

选项 1\. 使用 pyexiv2。请参阅：[pyexiv2 错误 #824440：Python 3 支持](https://bugs.launchpad.net/pyexiv2/+bug/824440) 您需要 boost-python 用于 py3k，并且还需要手动应用在上述错误末尾发布的补丁，但除此之外它还可以工作。在最新的 Ubuntu 下可能最容易启动和运行。

选项 2\. 使用[PIL](https://github.com/sloonz/pil-py3k) 缺点：这个分支/分支似乎没有被积极开发。

```
from PIL import Image
from PIL.ExifTags import TAGS

image = Image.open("test.jpg")
exif = image._getexif()
# decode exif using TAGS 
```

选项 3\. 使用 PythonMagick

```
from PythonMagick import Image

img = Image("image.jpg")
print img.attribute("EXIF:Orientation") 
```

另请参阅：[python 的 Exif 操作库](https://stackoverflow.com/questions/765396/exif-manipulation-library-for-python)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-28T20:53:16.497

作为参考，[pyexiv2 主页](http://tilloy.net/dev/pyexiv2/)现在有一个弃用警告，它指向[Gexiv2](https://wiki.gnome.org/Projects/gexiv2)，这是一个基于 GObject-introspection 的围绕 libexiv2 的包装器（相同的库 pyexiv2 包装器），专门用于 Python 3.x 支持。

不幸的是，在撰写本文时，Gexiv2 的安装仍然很痛苦，到目前为止，我一直无法让它在 Ubuntu Precise 上运行（看起来库已经过时了 - 可能适合我坚持使用 LTS。 ..)，所以 PIL 仍然是在 Python 3 中读取 EXIF 标签的最佳选择。

# objective-c - 写入 .plist 会返回“成功！” 但最终空白

> ID：14009152
> 
> 赞同：0
> 
> 时间：2012-12-23T06:33:55.163
> 
> 标签：objective-c, plist, writetofile

这是我的代码：

```
-(IBAction)btnSaveInfo:(UIButton *)sender {
    NSMutableArray *data = [[NSMutableArray alloc] init];
    NSDictionary *appInfo = [NSDictionary dictionaryWithObjectsAndKeys: fieldAPI.text, @"App API", fieldID.text, @"App ID", fieldName.text, @"App Name", nil];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *newPath = [documentsDirectory stringByAppendingPathComponent:@"AppData.plist"];

    NSMutableArray *appdata = [NSMutableArray arrayWithContentsOfFile:newPath];
    [appdata addObject:appInfo];
    NSLog(@"%@",appdata);
    [appdata writeToFile:newPath atomically:YES];

    if ([data writeToFile:newPath atomically:YES]) {
        NSLog(@"Success!");
        NSMutableArray *finalData = [NSMutableArray arrayWithContentsOfFile:newPath];
        NSLog(@"Final array:\n\n%@",finalData);
        [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];
    }
    else {
        NSLog(@"Error...");
    }
    [data release];
    } 
```

我的 NSLogs 返回

```
2012-12-23 01:20:37.628 Parse Push[38052:c07] (
        {
        "App API" = asdf;
        "App ID" = adsf;
        "App Name" = asdf;
    }
)
2012-12-23 01:20:37.932 Parse Push[38052:c07] Success!
2012-12-23 01:20:37.933 Parse Push[38052:c07] Final array:

(
) 
```

我的代码有错误，还是我遗漏了什么？我是与 .plists 交互的新手，因此我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:39:10.200

问题就在这里

```
if ([data writeToFile:newPath atomically:YES]) { 
```

你在这里又写了一个空数组

用这个

```
[appdata addObject:appInfo];
NSLog(@"%@",appdata);
if ([appdata writeToFile:newPath atomically:YES]){ 
```

# asp.net-mvc - ASP.Net MVC 3 自定义 HTML 助手

> ID：14009153
> 
> 赞同：2
> 
> 时间：2012-12-23T06:34:11.790
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, razor-2

我正在使用 ASP.Net MVC 3 和 Razor

如何为以下结构创建自定义 HTML 帮助程序。这应该绑定到模型属性，我也应该将参数传递给标签、跨度、输入。

以下标记的任何代码示例？

```
 <label class="field">
       <span class="td">User Name</span>
       <input type="text" name="UserName" class="highlight">
    </label> 
```

更新：

我在下面尝试但显示文本不显示我在模型中使用的文本

```
 <label for="login_field">
      <span class="td"> @Html.DisplayTextFor(m=>m.UserName)</span>
        @Html.TextBoxFor(model => model.UserName, 
           new { style = "width:21em", @class = "text" })

   </label> 
```

我的视图模型在下面并使用资源文件来获取文本

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.ComponentModel.DataAnnotations;
using System.Globalization;
using System.Web.Mvc;
using System.Web;

namespace MVC.ViewModel
{
    public class LoginViewModel
    { 
        [Required]
        [Display(Name = "UserName", ResourceType = typeof(Resources.Global))]
        public string UserName { get; set; }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:08:57.900

最好创建一个调用助手的函数。这应该给你一个提示如何实现你的

```
@functions
{
public HelperResult CustomFormTextboxFor<TModel,TProperty>(HtmlHelper<TModel> html, Expression<Func<TModel, TProperty>> expression)
{
    var textBox= html.TextBoxFor(expression, new {@class = "highlight"});
    var modelsMetaDatas = ModelMetadata.FromLambdaExpression(expression, html.ViewData);
    string displayValue = modelsMetaDatas.DisplayName ?? (metaData.PropertyName ??   ExpressionHelper.GetExpressionText(expression));
    return RenderCustomControl(textBox, displayValue);
}
}

@helper RenderCustomFormTextbox(MvcHtmlString input, string labeltext)
{
   <label class="field">
       <span class="td">@labeltext</span>
       @input
    </label> 
} 
```

您视图中的函数调用将如下所示。

```
@CustomFormTextboxFor(Html, model => model.FirstName) 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:56:02.123

替换这个

```
@Html.DisplayTextFor(m=>m.UserName) 
```

和

```
@Html.LabelFor(m=>m.UserName) 
```

有关**DisplayTextFor**的更多详细信息，请点击以下链接

[Html.DisplayTextFor() 的意义何在？](https://stackoverflow.com/questions/3473624/whats-the-point-of-html-displaytextfor)

# php - 使用 XmlHttpRequest 对发布的数据进行完整性检查？

> ID：14009156
> 
> 赞同：1
> 
> 时间：2012-12-23T06:34:50.363
> 
> 标签：php, javascript, post, xmlhttprequest

Ajax Post`XmlHttpRequest`是否对发送到服务器的数据执行完整性检查，以便服务器可以看到它在传输过程中没有损坏..？

如果没有，我如何完成这种类型的完整性检查以确保数据在传输过程中没有损坏..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:43:27.930

除了通过 TCP/IP 执行的常规数据包损坏测试外，不，没有进行完整性检查（在正常情况下）。

监听 s 的脚本`XmlHttpRequest`负责执行任何类型的奇偶校验或数据完整性。假设在传输离散参数的情况下，可以对该传入数据执行某些测试。

例如，如果一个字段应该包含一个整数，那么突然出现一个字母数字值可以作为一个简单的测试。可以对值的范围、单个参数的长度、字段是否属于一组枚举（“cat”、“dog”、“horse”、“cow”）等进行测试。

当然，在需要一段文本或其他可变数据的情况下，测试特定值会变得更加困难。

另一种可能性是根据实际连接的数据计算一些奇偶校验，并将其与数据本身一起发送。在接收端重新计算并将结果与​​奇偶校验值进行比较将是一件简单的事情。

一旦发生任何故障，将向调用脚本发送一条关于该效果的消息。

# filepicker.io - 将 Web url 保存到 filepicker.io

> ID：14009158
> 
> 赞同：0
> 
> 时间：2012-12-23T06:35:23.487
> 
> 标签：filepicker.io

给定一些图片网址，是否有一种简单的方法可以将其上传到文件选择器？我想这样做有两个原因：

1.  这样我就不会消耗图像主机的带宽/窃听它们
2.  这样我就可以轻松调整图像大小

我觉得这可以通过读取然后存储对文件选择器的调用来完成；这是我应该做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:39:31.490

storeUrl，当然！

我错过了这个，因为它在“store”部分下，并且没有“storeUrl”部分。我还希望 store 只获取一个 url，我不确定为什么这是两种不同的方法，但我认为有一些很好的理由。

# analytics - 包含混合数据类型（离散和连续）的向量的相似性度量

> ID：14009161
> 
> 赞同：4
> 
> 时间：2012-12-23T06:36:36.397
> 
> 标签：analytics, computational-geometry, similarity

我有一组向量，每个向量都包含文本和数字元素。我正在寻找此类向量的相似性度量，并在可能的情况下寻找它们实现的框架。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T07:57:05.483

对我来说，这是一个数据建模问题，而不是寻找合适的相似度指标。

例如，您可以使用***欧几里得距离***，前提是您

*   重新调整您的数据（例如，以均值为中心和单位方差）；和

*   重新编码“文本”元素（我假设您的意思是*离散变量*，例如存储性别为男性和女性值的字段）

例如，想象一个由数据向量组成的数据集，每个数据向量具有四个特征（列或字段）：

```
minutes_per_session, sessions_per_week, registered_user, sex 
```

前两个是*连续的（又名“数字”）变量*——即，正确的值是 12.5、4.7 等等。

后两个是离散的，显然需要转换。

### 第 1 步：重新编码离散变量

常用的技术是将每个离散特征重新编码为一系列特征，一个特征对应于为该特征记录的每个值（并且其中每个特征都被赋予该原始特征的值的名称）。

因此，存储每个用户的性别的单个列可能具有 M 和 F 的值，这将被转换为两个特征（字段或列），因为性别有两个可能的值。

所以用户性别的值列：

```
 ['M']
 ['M']
 ['F']
 ['M']
 ['M']
 ['F']
 ['F']
 ['M']
 ['M']
 ['M'] 
```

变成两列

```
[1, 0]
[1, 0]
[0, 1]
[1, 0]
[1, 0]
[0, 1]
[0, 1]
[1, 0]
[1, 0]
[1, 0] 
```

* * *

### 第 2 步：重新缩放数据（例如，以均值为中心和单位方差）

用于合成数据的随机生成的二维数组：

```
 array([[ 3.,  5.,  2.,  4.],
            [ 9.,  2.,  0.,  8.],
            [ 5.,  1.,  8.,  0.],
            [ 9.,  9.,  7.,  4.],
            [ 3.,  1.,  6.,  2.]])

for each column: calculate the mean
then subtract the mean from each value in that column:

>>> A -= A.mean(axis=0)
>>> A
      array([[-2.8,  1.4, -2.6,  0.4],
             [ 3.2, -1.6, -4.6,  4.4],
             [-0.8, -2.6,  3.4, -3.6],
             [ 3.2,  5.4,  2.4,  0.4],
             [-2.8, -2.6,  1.4, -1.6]])

for each column:now calculate the *standard deviation*
then divide each value in that column by this std:

>>> A /= A.std(axis=0)

verify:

>>> A.mean(axis=0)
      array([ 0., -0.,  0., -0.])

>>> A.std(axis=0)
      array([ 1.,  1.,  1.,  1.]) 
```

所以由四列组成的原始数组现在有六列；成对相似度可以通过欧几里得距离来衡量，如下所示：

```
take the first data vectors (rows):
>>> v1, v2 = A1[:2,:] 
```

欧几里得距离，对于 2 特征空间：

```
dist = ( (x2 - x1)**2 + (y2 - y1)**2 )**0.5

>>> sm = NP.sum((v2 - v1)**2)**.5
>>> sm
      3.79 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T02:21:32.047

文本数据的一个很好的度量是[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)（或编辑距离），它计算您应该更改多少字符串以获取另一个字符串。以一种计算量较小的方式，[汉明距离](http://en.wikipedia.org/wiki/Hamming_distance)提供了类似的度量，但要求字符串具有相同的大小。将字母转换为它们的 ASCII 表示不太可能给出相关结果（或者这取决于您的应用程序和您对距离的使用）：“Z”更接近“S”还是“A”？

结合数值数据的欧几里得距离（如果您希望它们位于欧几里德平面内……如果它们表示地球上的坐标、角度等，则可能不是这种情况），您可以对所有平方进行求和和加权距离以获得最终度量。例如，您将得到 d(A,B) = sqrt( weight1*Levenshtein(textA, textB)^2 + weight2*Euclidean(numericA, numericB)^2)

现在出现了如何设置这些权重的问题。例如，如果您正在测量以公里为单位的微小数字数据，并且您使用非常长的字符串计算编辑距离，则数字数据几乎无关紧要，因此您需要更多地权衡它们。这是特定领域的，只有您可以根据您的数据和应用程序选择此类权重。

最后，一切都取决于您未指定的应用程序，以及您未提及它们所代表的数据。一个应用程序可以构建一个加速结构——在这种情况下，任何不太愚蠢的度量都可以工作（包括将字母转换为 ASCII 数字）；或者可能是查询数据库或显示这些点，这更重要。对于您的数据，数字数据可以表示平面或地球上的坐标（这会改变度量），而文本数据可以是单个字母，您想检查它与另一个字母的相似程度，或完整的可能与另一个文本相差几个字母的文本......如果没有更精确，很难分辨。

# php - 函数爆炸简单文本文件

> ID：14009162
> 
> 赞同：0
> 
> 时间：2012-12-23T06:37:15.297
> 
> 标签：php, explode

我有一个简单的文本文件（见下文）。

```
abc|1356243309
zzz|1356239986
yyy|1356242423 
```

我想简单地提取 | 之前的所有名称。所以输出应该是这样的：

```
abc
zzz
yyy 
```

下面是我尝试使用的字符串。我也尝试过 file('visitornames.txt') 等。我不确定我做错了什么:(。尝试了很多东西。

```
$string = file_get_contents('visitornames.txt');
$names = explode('|', $string);
foreach($names as $key) {

echo $key . '"<br/>';

} 
```

没有错误，但它根本没有正确执行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T06:39:30.980

我会使用文件函数而不是 file_get_contents。它将文件作为数组返回，其中每一行都是自己的项目。然后你可以 foreach 文件内容数组。您正在寻找的变量是该行的第一部分，这就是您可以回显 $names[0] 的原因。

```
$file = file('visitornames.txt');
foreach ($file AS $line) {
    $names = explode('|', $line);
    echo $names[0] . '<br/>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:44:58.443

您可以使用该函数提取文件的所有行`file`，然后获取爆炸的每个第一部分并将其分配给结果：

```
$names = array();
foreach (file('visitornames.txt') as $line)
{
    list($names[]) = explode('|', $line, 2);
} 
```

或者有`SplFileObject`类似的，但你可以更容易地从它扩展：

```
class Names extends SplFileObject
{
    public function current() {
        list($name) = explode('|', parent::current(), 2);
        return $name;
    }
}

$names = new Names('visitornames.txt');

foreach ($names as $name)
{
    echo $name, "<br />\n";
} 
```

# javascript - 尝试延迟 for 循环，直到加载 div

> ID：14009165
> 
> 赞同：3
> 
> 时间：2012-12-23T06:38:11.230
> 
> 标签：javascript, jquery

我正在玩加载和移动页面上的 div 元素。我试图淡入一个字符串然后反转它。反向循环需要等到初始淡入循环完成之后。这是我到目前为止所拥有的，但它不执行反向循环。我假设是因为它还看不到最初的 div。

```
var string_to_reverse = "Reverse",
i;

for (i = 0; i < string_to_reverse.length; i++) {
    $("<div>" + string_to_reverse[i] + "</div>").hide()
        .appendTo("body").delay(500 * i).fadeIn(1000);
}

$("body div:last").load(function () {
    for (i = 1; i <= $("body div").length; i++) {
        $("body div:eq(" + i + ")").detach().prependTo($("body"));
    }
}); 
```

[http://jsfiddle.net/vk45U/](http://jsfiddle.net/vk45U/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T06:56:51.783

div 上没有加载事件，所以`$("body div:last").load`不会做任何事情。您可以在操作完成后将函数传递给fadeIn 以触发。尝试将回调添加到最后一个动画 div。有点乱，但我相信你可以清理它

```
var string_to_reverse = "Reverse",
i;

for (i = 0; i < string_to_reverse.length; i++) {
    var dummy = function(){};
    $("<div>" + string_to_reverse[i] + "</div>").hide()
        .appendTo("body").delay(500 * i).fadeIn(1000, (i == string_to_reverse.length - 1)?rev:dummy);
}

function rev () {console.log('rev');
    for (var i = 1; i <= $("body div").length; i++) {
        $("body div:eq(" + i + ")").detach().prependTo($("body"));
    }
} 
```

[http://jsfiddle.net/mowglisanu/wXrC9/](http://jsfiddle.net/mowglisanu/wXrC9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T06:59:04.177

您尝试做的事情是错误的：您真的不知道某件事将花费多少时间（您只能猜测，有时只是有根据的猜测，但这仍然是猜测）。

不要依赖当前的方法，请看一下**基于事件的编程方法**。在您的情况下，它可能正在使用事件处理程序（例如，`onload`如果您正在加载一些外部内容，请使用“”事件处理程序）或高阶函数（使用将在您执行某些操作后调用的回调，也可能通过将它们作为一部分附加也有通风口处理程序）。

更多阅读：

*   [事件驱动的 JavaScript](http://www.slideshare.net/fgalassi/event-driven-javascript) ,

# css - 在 CSS 中重新定位菜单（使用列表）

> ID：14009168
> 
> 赞同：1
> 
> 时间：2012-12-23T06:38:40.733
> 
> 标签：css, menu, positioning

我无法将菜单重新定位到我喜欢的位置。我如何能够获取整个列表并将其放置在我想要的页面上？对不起，一个简单的问题，我不是很有经验。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
    <title></title>
    <style>
    body {
        background-color: lightgrey;
    }
    .menu {
        list-style: none;
        font-family: "futura", sans-serif;
    }
     .menu li {
        float: left;
        border-left: 2px solid black;
        padding-left: 10px;
        margin-right: 10px;
    }
    a {
        text-decoration: none;
    }
    a:link {
        color: grey;
     }
    a:hover {
        color: white;
    }
    a:visited {
        color: darkgrey;
    }
    .menu li:first-child {
        border: none;
    }
    div.title {
        float: left;
        font-family: "futura", sans-serif;
        padding-left: 10px;
        margin-right: 10px;
        font-size: 36px;
    }
    </style>
    </head>
    <body>
    <div class="title">Dan's Cupcakes</div>
    <ul class="menu">
    <li><a href="http://blah.com">Home</a></li>
    <li><a href="http://ilovetoeatgrapes.com">Cupcakes</a></li>
    <li><a href="http://thehouseisonfire.com">Contact</a></li>
    <li><a href="http://cars.com">About Us</a></li>
    </ul>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T06:46:31.387

你到底想把菜单放在哪里？？

无论如何，我已经编辑了一些东西并为您提供了它的 jsfiddle。看看它是否是您希望它出现的方式。

您只需更改菜单 css 的边距值。

```
 .menu {
margin: top_position, right_position, bottom_position, left_position;
}

http://jsfiddle.net/DGjG9/ 
```

查看该链接并做出决定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T06:47:03.210

这是一个链接，可以了解使用 css 定位元素。

[http://www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

有几种方法可以做到这一点。根据您希望它在屏幕上显示的位置，是如何确定使用哪种方法。

# java - 如何在运行时实现参数化接口？

> ID：14009177
> 
> 赞同：1
> 
> 时间：2012-12-23T06:40:30.343
> 
> 标签：java, generics, proxy, cglib

我已经检查了 Java 代理和 cglib，但我还没有找到任何关于我将如何开始这个项目的示例。

这是我需要做的。

我有一个界面：

```
public interface RoadMap<T extends City>{
    public void map(T city);
} 
```

我有一堆不同类型的城市作为一个名为的类的内部类`Cities`

我希望能够通过循环遍历类的不同内部类来在运行时实现接口，`Cities`如下所示：

```
for(Class clazz : Cities.class.getDeclaredClasses()){
   //implement RoadMap interface 
} 
```

除了类型参数需要是 clazz 类型（在 for 循环中）之外，所有实现都是相同的。

这甚至可能吗？如果是这样，我应该从哪里开始。Java 代理和 cglib 谈论了很多方法拦截，但这并不是我真正想要做的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T07:50:10.287

如果所有实现都相同，则只需要一个实现。这是一个不关心泛型类型的实现，不使用动态代理（但您可以使用动态代理做同样的事情）：

```
public class RoadMapFactory {
    @SuppressWarnings("unchecked")
    public <T extends City> RoadMap<T> createWithRawTypes() {
        return new RoadMap() {
            @Override
            public void map(City city) {
                System.out.println("I mapped this city : " + city);

            }
        };
    }

    public static void main(String... args) {
        RoadMapFactory factory = new RoadMapFactory();
        RoadMap<SubCity1> map1 = factory.createWithRawTypes();
        map1.map(new SubCity1());
        RoadMap<SubCity2> map2 = factory.createWithRawTypes();
        map2.map(new SubCity2());
    }
} 
```

# twitter-bootstrap - 增加引导模态高度的正确方法

> ID：14009178
> 
> 赞同：8
> 
> 时间：2012-12-23T06:40:32.057
> 
> 标签：twitter-bootstrap

我正在尝试找到一种解决方法来增加我的引导模式的高度。我确实尝试了模态体中的最大修复方式，但是如果它变得过大，那只会切断我的模态。我试图找到一种方法让它像模态在 pinterest 上的工作方式一样工作。

当模式打开时，我已经禁用了主页正文滚动。但是我在调​​整大小时遇到​​了麻烦。

有没有人有任何解决方法？

我尝试将高度添加到我的模态（高度：95%；）和 modal_body（最大高度：75%；），内容溢出父 div（模态）

我附上了一个截图来演示相同的

![截屏](../Images/f6c2f482312fc27d6736139fe11ca870.png)

# 更新

我最终用 pintrest 类型的属性制作了自己的模态。[这个](https://stackoverflow.com/questions/11405238/modal-window-that-takes-over-browsers-scrollbar-like-on-pinterest)问题对我帮助很大

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-27T01:40:29.477

尝试使用此 js 计算模态高度：

```
$(document).ready(function() {
    $(".showcomments").click(function() {
        $('#myModal').modal('show');
        rescale();
    });
    $("[rel=tooltip]").tooltip();
});
function rescale(){
    var size = {width: $(window).width() , height: $(window).height() }
    /*CALCULATE SIZE*/
    var offset = 20;
    var offsetBody = 150;
    $('#myModal').css('height', size.height - offset );
    $('.modal-body').css('height', size.height - (offset + offsetBody));
    $('#myModal').css('top', 0);
}
$(window).bind("resize", rescale); 
```

**测试：http:** [//jsfiddle.net/fUZxA/23/](http://jsfiddle.net/fUZxA/23/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T01:26:01.903

使用这个 CSS 对我来说效果很好：

```
.my-modal {
  width:600px;
  height:300px;

  .modal-header {
    background-color:#ccc;
    button {
      font-size:30px;
    }
  }
  .modal-body {
    overflow-y: hidden;
    height: 100%;
    max-height:190px;
  }

} 
```

更新：我看了你的小提琴。尝试将“高度”添加到您的模态中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T18:18:07.803

引导模式在`position: fixed`. 这样，无论您滚动多少，它都将始终保持在同一个地方。所以你可能看不到它的一部分。如果您想查看模态的其余部分，则需要制作它`position: absolute`。但问题是它总是会出现在页面顶部。但如果你想知道，我有一个解决办法

# c++ - 将数据从 C++ 类传递到 Xcode 中的 Objective-C 类

> ID：14009179
> 
> 赞同：0
> 
> 时间：2012-12-23T06:41:50.133
> 
> 标签：c++, objective-c, arduino

我是 Arduino 新手，我遇到的一件事是这个名为 Embedxcode 的酷工具，它基本上允许您从 Xcode 而不是普通的 Arduino 编译器在 Arduino 上编译和运行草图。

我使用它的原因是因为我希望用户能够在 Arduino 上做某事（即按下按钮）并且计算机做出响应（即在 Objective-C 中调用某些函数）。因为据我所知你不能从 Arduino 编译器中做到这一点，所以我决定使用 Xcode，因为它可以编译 Objective-C 并使用 OSX SDK。

我让 Embedxcode 工作（Arduino 代码可以编译并上传到开发板），但我无法让 Objective-C 工作。如，我无法创建一个新的 Objective-C 类来传递数据，而 Xcode 不会给我错误（不，将 C++ 文件重命名为 .mm 不起作用）。

有谁知道如何解决这个问题？或者有没有更好的方法让 Arduino 直接与 OSX 事件交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:58:54.643

embedXcode 允许使用 Xcode IDE 进行嵌入式开发，但这不包括 OS X SDK 或 OS X 构建工具链。您仍在使用 AVR 工具链，但在前面使用 Xcode 来管理项目。话虽如此，您仅限于 avr-gcc 和 avr-g++，没有 Objective-C。可以在 C++ 和 Objective-C 类之间传递数据，但不能在您所指的上下文中传递。

编辑：如果你真的想使用 Objective-C 和 Arduino，我建议研究 avr-gcc 和 Objective-C。根据[avr-gcc 手册页](http://ccrma.stanford.edu/planetccrma/man/man1/avr-gcc.1.html)，支持 Objective-C。虽然，完成这项工作需要远离舒适的 Arduino 工作区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T01:28:41.843

您似乎误解了 Arduino 和微控制器 <-> PC 的关系。Arduino（和任何微控制器）是一台运行自己的微型操作系统的小型独立计算机。因此，鉴于此，您的问题是：我如何让一台计算机与另一台计算机通信。

IDE（XCode、Arduino 环境等）与此无关。这些只是用于编写和编译代码并将其上传到 Arduino 处理器的工具。

要连接任何两台计算机，您有两种选择：通过电线或通过无线电波。有线选项是最容易实现和理解的。这里有两个选项，直接 USB 连接和以太网。USB 是最容易实现和理解的，而准系统 Arduino 能够做到这一点。以太网需要额外的硬件。

无线选项包括蓝牙、WiFi、XBee 无线电。这些工作良好，但实现起来很复杂，并且需要额外的硬件。

所以...我建议您从 USB 开始。那里有很多教程。在 OSX 方面，您需要编写一些软件来与 Arduino 进行通信。这可以是用ObjectiveC 或Java（例如使用Processing）或Python 或任何数量的其他编程语言编写的应用程序。我建议处理，因为网上有很多 Arduino <-> 处理教程。

查找教程的关键搜索词：[Arduino 串口处理](https://www.google.com/search?q=Arduino%20serial%20port%20Processing&ie=utf-8&oe=utf-8&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a&gbv=1&sei=q6_XUI6VOOqz0QHT0IHoDA)

# c# - C# 不可变整数

> ID：14009180
> 
> 赞同：15
> 
> 时间：2012-12-23T06:41:54.413
> 
> 标签：c#, int, immutability

在 Java 中，字符串是不可变的。如果我们有一个字符串并对其进行更改，我们将获得由同一变量引用的新字符串：

```
String str = "abc";
str += "def"; // now str refers to another piece in the heap containing "abcdef"
              // while "abc" is still somewhere in the heap until taken by GC 
```

[据说](https://stackoverflow.com/questions/3981827/why-are-c-sharp-number-types-immutable)int 和 double 在 C# 中是不可变的。这是否意味着当我们拥有 int 并稍后对其进行更改时，我们将获得由同一变量“指向”的新 int？同样的东西，但有堆栈。

```
int i = 1;
i += 1; // same thing: in the stack there is value 2 to which variable
        // i is attached, and somewhere in the stack there is value 1 
```

那是对的吗？如果不是， int 以什么方式不可变？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-23T07:09:14.527

To follow up on Marc's (perfectly acceptable) answer: Integer *values* are immutable but integer *variables* may vary. **That's why they're called "variables".**

Integer *values* are immutable: if you have the value that is the number 12, there's no way to make it odd, no way to paint it blue, and so on. If you try to make it odd by, say, adding one, then you end up with a different value, 13\. Maybe you store that value in the variable that used to contain 12, but that doesn't change any property of 12\. 12 stays exactly the same as it was before.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-23T06:46:18.180

你没有改变（*也不*能改变）关于 int 的一些东西；您已经分配了一个**新**的int 值（并丢弃了旧值）。因此它是不可变的。

考虑一个更复杂的结构：

```
var x = new FooStruct(123);
x.Value = 456; // mutate
x.SomeMethodThatChangedInternalState(); // mutate

x = new FooStruct(456); // **not** a mutate; this is a *reassignment* 
```

但是，这里没有“指向”。结构直接在堆栈上（在这种情况下）：不涉及引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T22:04:12.633

虽然这听起来很明显，但我会添加几行帮助我理解的内容，以防有人有同样的困惑。

可变性有很[多种，](http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx)但一般来说，当人们说“不可变”时，他们的意思是类有不能改变的成员。

字符串可能将字符存储在数组中，该数组不可访问且无法通过方法更改，这就是字符串不可变的原因。对字符串的操作 + 总是返回一个新字符串。

int 可能将它的值存储在成员“Value”中，无论如何都无法访问，这就是为什么不能更改的原因。所有对 int 的操作都返回新的 int，并且这个值被复制到变量中，因为它是一个值类型。

# php - 如何在给定时间后从任何页面调用 HTML 页面？

> ID：14009187
> 
> 赞同：-3
> 
> 时间：2012-12-23T06:43:58.083
> 
> 标签：php, html

我想在给定时间（例如 1 分钟 2 分钟等）之后调用一个包含许多 html 标签的 PHP 页面。如果我使用标题，那么它会工作一次。当它找到一个 html 标签时，它第二次不起作用。但我想调用该页面，直到我离线。请任何人帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T06:57:38.250

你说的是不是这个：

```
<head>
<meta http-equiv='refresh' content='60'/>
</head> 
```

这将导致页面每 60 秒重新加载一次。

# java - JavaEE 面向对象的网络

> ID：14009189
> 
> 赞同：0
> 
> 时间：2012-12-23T06:44:33.107
> 
> 标签：java, sockets, network-programming, serversocket

我想澄清一下网络 OOP。例如，使用客户端-服务器模型，如信使，您有两个程序。当客户端程序运行时，它的一个对象被实例化。然后在客户端程序中实例化A并使用'方法`Socket`连接到服务器程序。根据在服务器程序内部创建新的文档。根据我的经验，在 Java 中使用 create 这个词时，它指的是一个对象，所以现在一个客户端有两个对象吗？一个在客户端程序上，一个在服务器上？是否可以从服务器程序或其他方式实例化客户端程序中的对象？`ServerSocket``ServerSocket``accept()``Socket``Socket`

最后，如果我通常使用`static`修饰符在客户端程序中创建我`Socket`的，那将只允许创建它的一个对象，因此如果客户端程序中的`Socket`on`Socket`通常`Socket`与服务器程序中的不同，则指的是对象创建后，现在两个程序之间是否只有一个对象共享？

为了清楚起见，我不是在谈论多个客户端连接，我只是想了解客户端`Socket`与服务器连接的基本机制，`ServerSocket`并弄清楚我可以通过该连接做什么和不能做什么，但一旦我理解我可以在自己的时间进行实验。

我希望我没有想太多。在此先感谢您的帮助 ：-）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:59:51.617

首先，是的，您绝对正确，您最终会`Socket`为同一连接获得两个对象，一个在客户端程序中，一个在服务器中。但是，将这些视为“相同”对象是错误的。在普通语言中，“套接字”是连接插入某物的地方。两个事物之间的连接有两个套接字，每端一个。网络`Socket`也是一样的——客户端程序中有一个，服务器程序中有一个。

你也有`ServerSocket`in server 程序，但那是完全不同的东西。那不是真正的插座，它是一种制造插座的设备。在最初的 Berkeley 套接字 API 中，这被建模为一种套接字（错误地如此？），因此它在 Java 中被相应地命名。

您询问服务器程序是否可以在客户端程序中创建对象。您暗示带有套接字的业务是客户端在服务器程序中创建对象的示例。这两种情况都不是。服务器中的`Socket`程序完全由服务器代码创建。

现在，有一种叫做[序列化](http://docs.oracle.com/javase/6/docs/technotes/guides/serialization/index.html)的东西，它可以让你在一个程序中获取对象，将它们编码为字节以使用套接字通过网络发送，然后在另一端从这些字节重构新对象。这不允许一个程序远程操作另一个程序，并且它不会同时创建两个程序中的对象，但它确实允许两个协作程序将对象从一个程序复制到另一个程序。

至于`static`，是的，正如JB所说，你误解了这一点。如果您声明一个变量`static`，则意味着它属于声明它的类，而不是声明它的类的实例，因此该程序中只有一个变量副本，而不是每个类实例一个。但是，它对跨程序没有影响。不同的程序具有完全独立的变量域，因此每个程序都有自己的`static`变量副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T10:15:57.100

首先，您的问题与 Java EE 无关。套接字是 Java SE 的一部分。

你也不明白什么`static`意思。`static`将变量范围限定为类，而不是将其范围限定为类的实例。它不限制创建的对象数量。每个 JVM 都有自己的对象和类，它们不与网络上的任何其他 JVM 共享。在客户端 JVM 中将对象存储到 A 类的静态变量中不会对服务器上`foo`存储的内容产生任何影响。`A.foo`

我不明白您为什么如此关心创建的套接字对象的数量。套接字就是这样：两方之间通信的端点。每一方都有自己的端点，连接到另一方的端点。有点像给朋友打电话：你用一部手机，你的朋友也用一部，两部手机是连在一起的。

# jquery - 如何使用 CSS 类使 jQuery 幻灯片打开和关闭

> ID：14009197
> 
> 赞同：0
> 
> 时间：2012-12-23T06:46:19.607
> 
> 标签：jquery, css, slidetoggle

如何让我的 CSS 样式背景和文本顺利滑入 jQuery 动作？现在再次单击关闭时，背景颜色将消失，然后文本将向上滑动。我希望背景保持不变并随着文本向上滑动。

我还试图弄清楚如何在单击另一个动作时关闭一个动作。我的代码在[这里](http://codepen.io/wragen22/pen/rmeat)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:04:16.620

这并不完全明显，但是在这行代码中：

```
 $(this).siblings().slideToggle('slow').parent().toggleClass('expanded'); 
```

该`slideToggle`函数实际上将以异步方式运行。也就是说，它很可能`toggleClass`会在动画完成之前运行。如果您阅读了有关[slideToggle 的 jQuery 文档，](http://api.jquery.com/slideToggle/)您会看到它接受一个`callback`函数作为可选参数。任何时候你想确保一段代码在动画完成后运行，然后使用回调。例如：

```
var _this = this; // because this will point to a different object inside the callback
$(this).siblings().slideToggle('slow', function() {
   $(_this).parent().toggleClass('expanded');
}); 
```

或类似的东西。您正在寻求的最终结果不是很明显。但希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T07:12:14.633

**对于背景问题：**

尝试将 box type css 属性添加到您希望保留其背景颜色的容器中；

```
// I.e.,
box-sizing: border-box
// @see https://developer.mozilla.org/en-US/docs/CSS/box-sizing 
```

如果这不起作用，请尝试浮动元素并从内部清除其浮动：

```
<div style="float: left; position: relative; width: 320px; height: 240px; margin: 10px; background: #ff0000;">
  <p>Content</p>
  <br style="clear: both;" />
</div> 
```

浮动将强制执行宽度和背景颜色，而不考虑其他任何内容。

**至于在下一个操作打开之前关闭您的操作：** 请查看以下链接中的脚本。这是我几年前写的一个脚本，但它有你想做的基本框架思想：

[http://abi.edu/js/resources-page.js](http://abi.edu/js/resources-page.js)

切换信息项隐藏所有信息项并显示传递了 id 的信息项；即，对于每个链接点击隐藏所有显示一次点击。

大约一年前还有另一个更干净的例子：http: [//abitribeca.com/index/about](http://abitribeca.com/index/about)

单击左侧栏中的链接以查看内容区域的更改。

还要记住这些是简单的例子，你也可以做一些更复杂的事情，比如：

[http://elycruz.com/portfolio](http://elycruz.com/portfolio)

@注意最后一个例子有点混乱，因为我正在学习如何从 php 后端处理 json（虽然很好）。

# java - 如何检查整个数组？

> ID：14009205
> 
> 赞同：2
> 
> 时间：2012-12-23T06:47:10.367
> 
> 标签：java, arrays

我希望我的程序检查整个`int[]`数组中的每个元素是否都非零。

我目前拥有的：

```
for(int i=0; i<myArray.length; i++)
{
  if(myArray[i] == 0)
  {
    completed = false;
  }
  else
  {
    completed = true;
  }
} 
```

`else statement`但是如果中间只有一个数组非零并且不会检查数组的其余部分，则循环会继续执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T06:49:01.223

一旦找到 0，就需要让它跳出 for 循环：

```
if(myArray[i] == 0)
  {
    completed = false;
    break;
  } 
```

这样，如果您稍后发现一个非 0 元素，您将不会错误地将已完成设置回 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T06:50:53.783

您可以使用`break`语句在第一次出现零值时中断循环，如下所示：

```
 boolean completed = true;
  for(int i=0; i<myArray.length; i++) {
    if(myArray[i] == 0) {
       completed = false;
       break;
     }   
  }

 if(!completed){
     //array has zero values
 } 
```

**其他重要提示：**

1.  Arrays.binarySearch():**仅适用于排序数组**，因此在您的情况下没有用。

    > 使用二进制搜索算法在指定的字节数组中搜索指定的值。在进行此调用之前，必须对数组进行排序（如通过 sort(byte[]) 方法）。如果未排序，则结果未定义。如果数组包含多个具有指定值的元素，则无法保证会找到哪一个。

2.  `indexOf`方法在内部执行相同的循环和比较。因此，我认为您的原始模式和新语法没有太大区别。虽然它可能会让你的代码看起来很紧凑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T06:53:57.280

无需遍历每个元素：**[JSBIN Demo](http://jsbin.com/usecan/1/edit)**

使用 IndexOf();

```
var myArray = [1,2,1,3];
var completed = myArray.indexOf(0) != -1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T06:50:12.070

你可以`break;`在找到第一个 0 元素后放入语句，这样它就会跳出循环。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-23T06:52:57.393

或者，你可以做

```
var completed = true;
for(int i=0; i<myArray.length; i++)
{
   if(myArray[i] == 0)
   {
       completed = false;
   }
} 
```

哪个会做同样的事情。

# c++ - 双链表 - 添加/显示

> ID：14009207
> 
> 赞同：0
> 
> 时间：2012-12-23T06:48:54.360
> 
> 标签：c++, linked-list

## 所以我的大部分代码都写下来了，问题是当我尝试将一个新节点添加到我的列表中时，如我的主目录所示，它似乎不起作用。我会添加它，但是当我尝试打印它时，什么也没有出现。

如果您出于某种奇怪的原因需要它，我需要为实验室做的事情就在那里，但它不应该是必要的。[注意：我的很多 gui 代码不起作用，因为我只是从代码的其他部分复制和粘贴]。

说明：编写一个面向对象的 C++ 程序来创建一个双向链接。每个节点都应该能够存储一个人的名字和姓氏，以及他们各自的年龄。用 5 个节点初始化列表。该程序应包含一个成员函数，该函数允许用户打印出所有年龄小于用户输入值的节点（在任一方向）。它还应该允许用户搜索特定人的姓名。它应该能够输出列表的平均年龄。最后，它应该允许删除名称。该程序应允许用户从菜单中进行选择。

```
#include <iostream>
#include <string>
using namespace std;

 typedef string Elem;               // list element type
  class DNode {                 // doubly linked list node
  private:
    Elem elem;                  // node element value
    DNode* prev;                // previous node in list
    DNode* next;                // next node in list
    friend class DLinkedList;           // allow DLinkedList access
  };

class DLinkedList {             // doubly linked list
  public:
    DLinkedList();              // constructor
    ~DLinkedList();             // destructor
    bool empty() const;             // is list empty?
    const Elem& front() const;          // get front element
    const Elem& back() const;           // get back element
    void addFront(const Elem& name);        // add to front of list
    void addBack(const Elem& name);     // add to back of list
    void removeFront();             // remove from front
    void removeBack();              // remove from back
    void displayViaAge();
    void displayViaName();
  private:                  // local type definitions
    DNode* header;              // list sentinels
    DNode* trailer;
  protected:                    // local utilities
    void add(DNode* v, const Elem& name);       // insert new node before v
    void remove(DNode* v);          // remove node v
  };

  DLinkedList::DLinkedList() {          // constructor
    header = new DNode;             // create sentinels
    trailer = new DNode;
    header->next = trailer;         // have them point to each other
    trailer->prev = header;
  }

    DLinkedList::~DLinkedList() {           // destructor
    while (!empty()) removeFront();     // remove all but sentinels
    delete header;              // remove the sentinels
    delete trailer;
  }
                                // insert new node before v
  void DLinkedList::add(DNode* v, const Elem& name) {
    DNode* u = new DNode;  u->elem = name;      // create a new node for e
    u->next = v;                // link u in between v
    u->prev = v->prev;              // ...and v->prev
    v->prev->next = v->prev = u;
  }

  void DLinkedList::addFront(const Elem& name)  // add to front of list
    { add(header->next, name); }

  void DLinkedList::addBack(const Elem& name)   // add to back of list
    { add(trailer, name); }

   void DLinkedList::remove(DNode* v) {     // remove node v
    DNode* u = v->prev;             // predecessor
    DNode* w = v->next;             // successor
    u->next = w;                // unlink v from list
    w->prev = u;
    delete v;
  }

  void DLinkedList::removeFront()       // remove from font
    { remove(header->next); }

  void DLinkedList::removeBack()        // remove from back
    { remove(trailer->prev); }

     bool DLinkedList::empty() const        // is list empty?
    { return (header->next == trailer); }

  const Elem& DLinkedList::front() const    // get front element
    { return header->next->elem; }

  const Elem& DLinkedList::back() const     // get back element
    { return trailer->prev->elem; }

  void DLinkedList::displayViaAge() {                     //Displays person via age

      DNode*temp = header;

       while(temp!=trailer)
       {

           //if(howold = age)
              cout << temp->elem <<endl;
              temp = temp -> next;
       }

       cout << temp->elem<<endl;
  }

int main(){
    char input = 'z';
    string entry;
    int age;
    DLinkedList person;

    person.addFront("Takkun Bradly");
    person.add("Devindra Ardnived");
    person.add("SeboY Wang");
    person.add("DoubleX Slash");
    person.add("Uncle Jelly");

    cout << "What would you like to do?" << endl;
    cout << "Enter 'A' to: Add a new person" << endl;
    cout << "Enter 'B' to: Remove a person" << endl;
    cout << "Enter 'C' to: Search for people via age" << endl;
    cout << "Enter 'D' to: Search for people via name" << endl;
    cout << "Enter 'E' to: Average all the total ages" << endl;
    cout << "Enter 'F' to: Quit" << endl;

while(input != 'f') {

    cin >> input;
    cout << endl;

        while ((input != 'a')&&(input != 'b')&&(input != 'c')&&(input != 'd')&&(input != 'e')&&(input != 'f')) {

            cout << "Please enter a valid selection" << endl;           
            cin >> input;
        }

        if ((input == 'a')){
            cout << "Please enter their name: ";
            cin.ignore();
            getline(cin, entry);

            cout << "Please enter their age: ";
            cin >> age;
            person.addFront(entry);

        }

        if ((input == 'b')){
            cout << "Who would you like to remove: ";
            cin.ignore();
            getline(cin, entry);
            person.removeFront();
        }

        if ((input == 'c')){
            cout << "What is the age of the person you are looking for?: ";
            person.displayViaAge();
        }

        if ((input == 'd')){
            cout << "What is the name of the person you are looking for?: ";
            cin.ignore();
            getline(cin, entry);
            person.addFront(entry);
        }

        if ((input == 'e')){
            return 0;
        }

        cout << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:30:56.753

我认为您的错误在您的 add 方法中的这一行中：

```
 v->prev->next = v->prev = u; 
```

此行中的此分配将从右到左执行。所以`v->prev`设置为`u`，然后`v->prev->next`设置`v->prev`为 现在指向`u`。所以现在你`u->next`指向`u`，这不是你想要的。

我想你想要这样的东西：

```
// insert new node before node v
void DLinkedList::add(DNode* v, const Elem& name) {
    DNode* u = new DNode;   u->elem = name;      // create a new node and set name
    u->next = v;                 // make v the successor of u
    u->prev = v->prev;           // set u's predecessor to v's current predecessor
    u->prev->next = u;           // make u the successor of v's predecessor
    v->prev = u;                 // finally make u the predecessor of v
} 
```

# c# - 如何在 .net 中设置 CI 环境？

> ID：14009209
> 
> 赞同：1
> 
> 时间：2012-12-23T06:49:04.090
> 
> 标签：c#, .net

我对.net 完全陌生。实际上，我使用的主要语言是 Java。所以我更熟悉Java中的CI管道。

在我们的 java 开发环境中，我们有 1\. 一个 SVN 存储库来存储代码 2\. 一个竹服务器来触发构建（代码编译和 UT，这里使用一个名为 maven 的工具）以及测试自动化 3\. 一个声纳服务器将分析代码覆盖率、代码规则、代码复杂度等...

与 .net 相比，现在我们只有 1\. 一个 TFS 存储库来存储代码

但是其他两件事呢？.net 是否有任何 CI 工具可以自动监视代码存储库以按需构建并分析代码质量？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:16:44.047

I like [TeamCity](http://www.jetbrains.com/teamcity/). It can monitor a TFS server and kick off an MSBuild command when it detects new commits to your repository. It can do code coverage via unit test integration as well.

# c# - 如何使用默认构造函数参数 Moq 抽象类？

> ID：14009210
> 
> 赞同：1
> 
> 时间：2012-12-23T06:49:06.207
> 
> 标签：c#, unit-testing, nunit, moq

我想 Moq 一个在其构造函数中具有默认参数的抽象类。这样我就可以测试设置的默认值以及 testnig 特定值。例如（注意，这纯粹是一个示例类）

```
public abstract class AbstractClassToTest
  {
      private string _name;
      private int _someInt;
      private int _anotherInt;

      public AbstractClassToTest(string name, int someInt = 10, int anotherInt = 20)
      {
          _name = name;
          _someInt = someInt;
          _anotherInt = anotherInt;
      }
  } 
```

并按如下方式设置 Moq 对象：

```
var act = new Mock<AbstractClassToTest>(MockBehavior.Loose, "namestring"); 
```

但这会引发错误...

```
Message "Can not instantiate proxy of class:
Test.AbstractClassToTest.
Could not find a constructor that would match given arguments:
System.String
Parameter name: constructorArguments" 
```

如何创建最小起订量对象并保持其默认值？

最小起订量：v 4.0.10827.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:00:47.830

~~Moq 不会模拟类类型，只会模拟接口。可能是因为即使是抽象类也可能有很多“具体”实现，以及很多状态。~~

相反，制作你自己的模拟类：

```
class AbstractClassToTestMOCK : AbstractClassToTest
{
  internal AbstractClassToTestMOCK(string name, int someInt = 10, int anotherInt = 20)
    : base(name, someInt, anotherInt)
  {
  }
} 
```

**编辑：**

我原来答案的第一段全错了。我已经验证可以模拟一个（非静态）类类型（必须是`public`，并且它嵌套在里面的所有类/结构也必须是`public`，就像接口一样），前提是有问题的实例构造函数是`public`或`protected`（或`protected internal`）。然后，您可以使用 或 的`Setup`所有`virtual`（包括`abstract`）方法（和属性、索引器等`public`）`protected`。

回到最初的问题，问题只是命名参数和可选参数是一种语法糖，没有得到很好的反射支持。

如果允许您修改原始的`AbstractClassToTest`，解决此问题的另一种策略是重载实例构造函数，即将其添加到*原始*类中：

```
protected AbstractClassToTest(string name)
    : this(name, someInt: 10, anotherInt: 20)
{
} 
```

在这种情况下，您可能希望也可能不希望保留（原始构造函数的）参数可选。

PS！类的实例构造函数`abstract`不应该是`public`. 改为使用`protected`。

# android - Bluestacks 作为更智能的 apk 测试工具 - 从硬盘安装应用程序

> ID：14009214
> 
> 赞同：0
> 
> 时间：2012-12-23T06:49:36.003
> 
> 标签：android, installation, bluestacks

从 eclipse 等导出的 apk 应用程序需要满足哪些条件才能从硬盘安装到 Bluestacks？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T07:10:07.130

## To install your own program's .APK

By your mention of `"say eclipse"` I am going to assume you are working in Eclipse. Just run the BlueStacks App Player and it will show up in your list of running devices.

`Windows -> Show View -> Other -> Devices` (or the list the automatically shows up at run)

Use run (or run with debugging) to deploy your .APK to BlueStacks. It's just like any other emulator, really.

## To install any other .APK (not so much a programming question)

The most convenient way is to use the application `HD-ApkHandler.exe` the comes pre-installed in the BlueStacks folder.

# emacs - 在 Emacs 中设置视觉线条的列宽

> ID：14009223
> 
> 赞同：10
> 
> 时间：2012-12-23T06:51:15.970
> 
> 标签：emacs, word-wrap

是否有等效于 Emacs`fill-column`中“Wrap”模式 () 的变量？`visual-line-mode`如果没有，当缓冲区的窗口/框架更宽时，我如何设置视线长度的限制？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T07:55:59.390

为了回答这个问题，我创建了一个名为[window-margin](https://github.com/aculich/window-margin.el)的次要模式，它完成了@Stefan 在[他的回答](https://stackoverflow.com/a/14012111/462302)中建议的内容。

开启`window-margin-mode`：

```
(add-hook 'text-mode-hook 'turn-on-window-margin-mode) 
```

您仍然可以在不安装 window-margin 的情况下执行此操作的方法是使用Emacs 附带的，但由于[longlines-mode 存在一些问题](http://lists.gnu.org/archive/html/emacs-pretest-bug/2005-08/msg00233.html)`longlines-mode`而正在逐步淘汰，但如果您愿意，可以使用旧方法：

打开`longlines-mode`类似的东西：

```
(add-hook 'text-mode-hook 'longlines-mode) 
```

它将文本包装在`fill-column`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T15:18:16.547

`longlines-mode`已被删除。对于`visual-line-mode`，最简单的方法是使窗口尽可能窄。您可以这样做，`C-x 3`然后调整窗口的大小。或者，您可以设置宽边距或宽边。

# concatenation - Yeoman 和 RequireJS 使用动态生成的 HTML 构建？

> ID：14009226
> 
> 赞同：3
> 
> 时间：2012-12-23T06:51:38.030
> 
> 标签：concatenation, requirejs, yeoman, r.js

我正在尝试将由 Yeoman 生成/管理的前端上的 RequireJS 设置与后端的 Laravel PHP 框架集成。除了在 Yeoman / r.js 中为我的 javascript 文件构建步骤的连接部分之外，一切都是金色的。

我的问题很简单：Yeoman 中的 r.js 构建步骤会查找 index.html 文件，其中包含`<!-- build:js scripts/amd-app.js -->`RequireJS 脚本标记周围的 HTML 注释，这会启动 RequireJS 优化器中的优化和连接例程。但是：我使用的是 Laravel 框架，所以没有 index.html，因为它是动态生成的。

我已经设法通过做一个丑陋的黑客并在应用程序目录文件中添加一个 index.html 来使该过程正常工作，它只有：

```
<!-- build:js scripts/amd-app.js -->
<script data-main="scripts/main" src="scripts/vendor/require.js"></script>
<!-- endbuild --> 
```

这让 Yeoman / r.js 可以找到带有适当标签和文件路径的 index.html 文件，对我的 AMD 模块进行所有令人敬畏的连接并将其输出到 dist 目录。

只有这是一个可怕的黑客攻击，我敢肯定有一个更简单的实现相同的目的。我认为这与编辑包含 Yeoman 构建设置的 Gruntfile 以反映上述信息有关。我只是不确定如何:(

任何有集成 Yeoman / RequireJS 设置和后端框架经验的人可能会有所帮助？（我想这个问题也同样适用于导轨）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:46:12.757

如果您检查（至少在 Mac/linux 上）：

```
/usr/local/lib/node_modules/yeoman/tasks/rjs.js 
```

你会看到一行：

```
var appIndexPath  = path.resolve('mainFile' in options ? '../app/' + options.mainFile : '../app/index.html'); 
```

我的猜测是您可以指定另一个 html 文件来启动该过程

```
rjs: {
  // no minification, is done by the min task
  optimize: 'none',
  baseUrl: './scripts',
  wrap: true,
  name: 'main'
  mainFile: 'kickoff.html'
}, 
```

实际上，

```
<!-- build:js scripts/amd-app.js --> 
```

这由 usemin 任务使用，而不是 rjs。

要完全跳过对 html 文件的需求，我必须深入挖掘。

# android - 相对布局权重

> ID：14009230
> 
> 赞同：22
> 
> 时间：2012-12-23T06:52:13.727
> 
> 标签：android, android-layout

在布局资源 XML 中，我有 3 个 RelativeLayout(s)，它们位于主 RelativeLayout 内。视图将垂直显示。这 3 个 RelativeLayout() 彼此相邻设置，我希望它们填满整个屏幕，不管屏幕大小是多少。我的布局视图：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/backg"
 >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="@dimen/top_mr_image"
    android:src="@drawable/temp" />

<RelativeLayout
    android:id="@+id/r1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/imageView1"
    android:layout_marginLeft="10dp"
    android:background="@drawable/r1bg"
    android:layout_weight="1"

     >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="@dimen/txt_mr_right"
        android:layout_marginRight="@dimen/txt_mr_right"
        android:layout_marginTop="39dp"
        android:text="S"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/textView1"
        android:layout_marginLeft="@dimen/txt_mr_right"
        android:layout_marginRight="@dimen/txt_mr_right"
        android:text="T"
        android:textAppearance="?android:attr/textAppearanceLarge" />
</RelativeLayout>

    <RelativeLayout
        android:id="@+id/r2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignTop="@+id/r1"
        android:layout_toRightOf="@+id/r1"
        android:layout_weight="1" >
    </RelativeLayout>

            <RelativeLayout
        android:id="@+id/r3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignTop="@+id/r2"
        android:layout_toRightOf="@+id/r2"
        android:layout_weight="1" >

    </RelativeLayout> 
```

我为每个 relativeLayout 设置`weight=1`and`layout_width=0dp`并且这种技术适用于按钮，我认为 relativeLayout 也是如此，看来我的想法是错误的。任何的想法？

UPD1：我添加了一张我想要的图片

![在此处输入图像描述](../Images/5e24a1d0d0cb2b29b1ed39e2abcbf282.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-23T07:01:00.607

`RelativeLayout`不注意`android:layout_weight`。（这是 的属性[`LinearLayout.LayoutParams`](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)，但不是 的属性[`RelativeLayout.LayoutParams`](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)。）

您应该能够使用更简单的视图层次结构获得所需的布局。目前尚不清楚您要做什么，因为最后两个`RelativeLayout`s 是空的。如果您需要一个纯粹的垂直组织，我建议您使用`LinearLayout`而不是`RelativeLayout`.

**编辑**根据您的编辑，看起来您想要三个复合视图的水平布局，每个视图都可单击。我认为类似以下的方法会起作用：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <!-- First column -->
    <LinearLayout
        android:id="@+id/firstColumn"
        android:orientation="vertical"
        android:gravity="center_horizontal"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="..." />
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:text="text 1"
            . . . />
    </LinearLayout>

    <!-- Second column -->
    <LinearLayout . . . >
        . . .
    </LinearLayout>
</LinearLayout> 
```

如果按钮的内容不正确，您可以将二级`LinearLayout`视图替换为`RelativeLayout`是否有助于更好地组织布局。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-23T06:59:02.260

相对布局不支持权重。如果要使用权重，则需要使用 LinearLayout 作为父容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T21:47:00.530

解决方案非常简单。我一直在寻找相对布局的重量分布。

对于所有这些类型的情况，这是一个小技巧。

使用带有 **android:orientation=" horizo​​ntal" 的 LinearLayout**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-25T06:14:59.847

您可以在 中使用orient `Horizontally`，并将其放置在每个项目中。`LinearLayout Manager``Recycler View``RelativeLayout``Adapter`

**链接：[如何使用 RecyclerView 构建水平 ListView？](https://stackoverflow.com/a/28460399/787399)**

如果您`RelativeLayouts`设置为固定的宽度和高度，即屏幕的大小，您可以从中获取`DisplayMatrics`，那就可以了。

**链接：[获取屏幕宽度和高度](https://stackoverflow.com/a/4744499/787399)**

如果您的 RelativeLayouts 的内容不同，那么您可以使用`getItemViewType()`方法。

**请参阅：[如何创建具有多种视图类型的 RecyclerView？](https://stackoverflow.com/questions/26245139/how-to-create-recyclerview-with-multiple-view-type)**

快乐编码:-)

# windows-phone-7 - 如何使用 Bing 地图获取我的当前位置？

> ID：14009231
> 
> 赞同：0
> 
> 时间：2012-12-23T06:52:24.377
> 
> 标签：windows-phone-7, geolocation, bing-maps

我的代码不起作用，它显示了整个世界地图。我只想获取当前位置并在其上放置一个图钉。我已经通过谷歌，没有一个例子有效。

这是我的代码。

```
GeoCoordinateWatcher watcher;

    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        if (watcher == null)
        {
            Console.WriteLine(watcher);
            watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.Default);
            watcher.MovementThreshold = 20;
            watcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(watcher_StatusChanged);
            watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(watcher_PositionChanged);

        }
        watcher.Start();
    }

    private void watcher_StatusChanged(object sender, GeoPositionStatusChangedEventArgs e)
    {
        Pushpin pin = new Pushpin();
        pin.Template = this.Resources["currentPushPin"] as ControlTemplate;
        pin.Location = watcher.Position.Location;
        mapControl.Items.Add(pin);
        myMap.SetView(watcher.Position.Location, 15.0);
        watcher.Stop();
    }

    void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
    {
        if (e.Position.Location.IsUnknown)
        {
            MessageBox.Show("Please wait while your prosition is determined....");
            return;
        }
        Pushpin pin = new Pushpin();
        myMap.Center = new GeoCoordinate(e.Position.Location.Latitude, e.Position.Location.Longitude);
        pin.Template = this.Resources["currentPushPin"] as ControlTemplate;
        pin.Location = new GeoCoordinate(e.Position.Location.Latitude, e.Position.Location.Longitude);
        myMap.SetView(watcher.Position.Location, 18.0);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:30:51.010

您在 PhoneApplicationPage_Loaded 中启动 GeoCordinateWatcher，但永远不会调用此方法。添加

```
Loaded+=PhoneApplicationPage_Loaded 
```

在构造函数的末尾。

# php - 如何从php中的变量中删除字符

> ID：14009238
> 
> 赞同：-1
> 
> 时间：2012-12-23T06:54:09.447
> 
> 标签：php, html, variables

这很简单。目前我需要从变量中删除前 12 个字符，`$mess[1]`但似乎我找到的所有命令都集中在按短语删除它。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T06:55:53.647

您可以使用[`substr()`](http://php.net/manual/en/function.substr.php)，它返回一个新字符串，因此只需将该新字符串分配给您的变量...

```
$everythingExceptTheFirstTwelveCharacters = substr($str, 12); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T07:06:23.673

如果您碰巧使用了多字节字符编码，或者您得到了这样的结果，您可以改用多字节版本的 mb_substr。它适用于多字节和单字节字符串。 [http://php.net/mb_substr](http://php.net/mb_substr)

使用 11 作为第一个字符位置为 0。

```
$mess[1] = mb_substr($mess[1],11); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T07:00:39.013

```
 $mess[1] = substr($mess[1],12) 
```

# javascript - 使用 JavaScript 函数转发页面请求返回值？

> ID：14009239
> 
> 赞同：0
> 
> 时间：2012-12-23T06:54:17.537
> 
> 标签：javascript

这是代码的相关部分：

```
<form id="frmDemo" name="frmDemo" action="temp.jsp" method="post" > 
   <div>
        <hr/><a name="d2"></a>
        <h2>CMS Sign In Page</h2>
        <p>Passing parameters to the Web Service:</p> 
        <label>Your username: </label><input type="text" name="username" id="username" value="elthefar" />

    <label>Your password: </label><input type="password" name="password" id="password" value="workandwork" />
    <input type="button" value="Sign In" onclick="var r = SignIn(); if (r == 0) document.forms[0].action = 'temp2.jsp'; return true;" /> 
```

我希望我的表单转发到`temp2.jsp`if SignIn `return 0`，否则转发到`temp.jsp`. 但上面的代码不会转发到任何页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T07:07:59.190

你的意思是使用`input type="submit"`？还是打电话`document.forms[0].submit();`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T07:15:13.080

您可以`onsubmit`像这样向您的表单添加事件：

```
<form id="frmDemo" name="frmDemo" action="temp.jsp" method="post" onsubmit="return myfunction();"> 
```

然后在您的表单中使用一个简单的提交按钮。

```
<input type='submit' value='Sign In' /> 
```

在这种情况下，当您单击提交按钮时，该函数将触发，并且在该函数中您可以执行任何您想做的事情，如下所示：

```
<script language='javascript'>
function myfunction(){
var r = SignIn();
if(r == 0)
  document.forms[0].action = 'temp2.jsp';
return true;
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T07:23:24.553

将您的表格更改为此

```
<form id="frmDemo" name="frmDemo" method="post"> 
```

并更改 `button`为`submit`

```
<input type="submit" name="Submit" onClick="Validate()" value="Submit" /> 
```

并使用你的`javaScript`

```
<script language='javascript'>
        function Validate(){
            var r = SignIn();  // assuming, you have some implementation for SignIn() method
            var frm = document.getElementById("frmDemo") || null;
            if(frm) {
                if(r != 0)
                {
                    frm.action = 'temp.jsp';
                }else{
                    frm.action = 'temp2.jsp';
                }
            }
        }

    </script> 
```

# linux - 无法从 CentOS 中的源构建 Mercurial

> ID：14009241
> 
> 赞同：0
> 
> 时间：2012-12-23T06:55:24.107
> 
> 标签：linux, build, mercurial, centos, rpm

我正在尝试在 CentOS 6 上构建 Mercurial，所以这是我目前所做的：

我得到了 mercurial 的最新资源，文件名为`mercurial-2.4.1.tar.gz`

我尝试在其上运行 rpmbuild 并得到以下信息：

```
# rpmbuild -tb mercurial-2.4.1.tar.gz
error: File /home/someuser/rpms/mercurial/mercurial-snapshot.tar.gz: No such file or directory 
```

所以我尝试通过从另一个人那里复制来创建它想要的文件：

```
# cp mercurial-2.4.1.tar.gz mercurial-snapshot.tar.gz 
```

我再试一次，似乎通过了之前的错误：

```
# rpmbuild -tb mercurial-2.4.1.tar.gz
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.vV9ZXc
+ umask 022
+ cd /root/rpmbuild/BUILD
+ cd /root/rpmbuild/BUILD
+ rm -rf mercurial-snapshot
+ /usr/bin/gzip -dc /home/someuser/rpms/mercurial/mercurial-snapshot.tar.gz
+ /bin/tar -xf -
+ STATUS=0
+ '[' 0 -ne 0 ']'
+ cd mercurial-snapshot
/var/tmp/rpm-tmp.vV9ZXc: line 34: cd: mercurial-snapshot: No such file or directory
error: Bad exit status from /var/tmp/rpm-tmp.vV9ZXc (%prep)

RPM build errors:
    Bad exit status from /var/tmp/rpm-tmp.vV9ZXc (%prep) 
```

我不确定发生了什么，我的猜测是 rpmbuild 无法创建文件......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:32:11.593

我发现为尚不可用的 CentOS 构建 RPM 的最简单方法是从 Fedora 找到源 RPM 并`rpmbuild --rebuild`在其上进行操作。CentOS[在这里记录了它，](http://wiki.centos.org/HowTos/RebuildSRPM)但现在似乎已经关闭。

[这](http://rpmfind.net//linux/RPM/fedora/devel/rawhide/src/m/mercurial-2.4.1-1.fc19.src.html)是一个 src RPM，您可以尝试开始使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T05:25:34.163

问题是捆绑的规范文件的版本默认为“snapshot”，因此它将查找名为“mercurial-snapshot.tar.gz”的 tar 文件，并且还期望提取的目录为“mercurial-snapshot” （所以你不能只重命名 tar 文件）。

处理此问题的最佳方法（或至少**一种**方法）是提取规范文件，使用正确的版本和发布号对其进行更新，然后从中构建 rpm。

这是过程：

```
tar fxz mercurial-X.Y.tar.gz --strip-components=2 mercurial-X.Y/contrib/mercurial.spec 
```

将规范文件放在 rpmbuild/SPECS 并编辑它。将“Version: snapshot”行替换为“Version: XY”，将“Release: 0”行替换为“Release: 1.xyz”，其中xyz 是自定义标签，因此您知道您自己构建了包。

然后运行 ​​rpmbuild：

```
rpmbuild -bb --target=i686 SPECS/mercurial.spec 
```

如果您正在构建 64 位系统，请使用 --target=x86_64。

然后，您应该在 RPMS/$target 目录中有一个正确构建和命名的 rpm 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T11:57:42.003

您没有 /var/tmp/ 目录或无法写入它。尝试创建它：`mkdir /var/tmp`- 您可能必须使用“sudo”才能使其工作，具体取决于您的系统设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T01:47:47.917

我认为通过 cp 命令创建 tarball 并不好。

您应该将解压官方 tarball 后生成的 mercurial-[version]/ 目录重命名为 mercuial-snapshot/，然后创建名为 mercurial-snapshot.tar.gz 的目录的压缩 tar 存档。

```
$ tar zxvf mercurial-2.4.1.tar.gz 
$ mv mercurial-2.4.1 mercurial-snapshot
$ tar zcvf mercurial-snapshot.tar.gz mercurial-snapshot 
```

# model-view-controller - 在 MVC 中 - 会话处理和身份验证是否由用户模型处理？

> ID：14009242
> 
> 赞同：3
> 
> 时间：2012-12-23T06:55:49.543
> 
> 标签：model-view-controller, zend-framework, session

我想知道像身份验证和登录这样的会话处理是否最好由用户模型处理（假设用户模型指的是用户）并具有电子邮件和密码等属性。还是应该由另一个模型进行会话处理？

究竟什么是最好的方法 - 我的代码几乎部分散布在函数文件的控制器中，并希望重构我的代码以更多地遵守 MVC 原则。我的项目基于 Zend 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:16:48.477

在 MVC 概念中，模型代表应用程序的业务部分。

管理用户的身份验证、保存、删除、激活是业务问题。

因此，直接在您的用户模型中创建方法验证、保存、删除、激活是有意义的。

因此，在您的用户模型中，最好将**静态**方法实现为

```
public static function authenticate ($ username, $ password)
{
     $authService = $this-> getServiceLocator()->get('Zend\Authentication\AuthenticationService');
     $adapter = $authService->getAdapter();
     $adapter->setIdentityValue($username);
     $adapter->setCredentialValue($password);
     $authResult = $authService->authenticate();

     return $authResult->isValid();
} 
```

在您的控制器中，您可以直接执行以下操作：

```
User/Entity/User::authenticate($username, $password); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T07:45:01.260

我将身份验证和会话管理视为*应用程序级别的*问题。

我经常应用的一个通用标准是：“我可以在另一个应用程序（可能是命令行应用程序）或另一个网站中使用我的模型吗？

例如，在您的情况下，我会将 User 模型视为代表用户。无论他是否实际访问和/或登录/退出您的网站，该用户都存在。他可以在命令行应用程序中被引用（例如：一个在所有用户生日那天向他们发送电子邮件的 cron 作业；一个统计所有个人资料不完整的用户的报告实用程序）；等等。因此，我会将身份验证会话管理保持在控制器级别或服务级别的下一级。

但与大多数事情一样，[YMMV](http://en.wiktionary.org/wiki/your_mileage_may_vary)。

# javascript - 将外部引用的类属性设为本地和内联？

> ID：14009249
> 
> 赞同：2
> 
> 时间：2012-12-23T06:57:18.547
> 
> 标签：javascript, jquery

我有一个有效的网页，一切都很好。它主要使用外部 css 文件的良好实践和最少的内联样式/代码进行编码。一切都很好。

但是，现在我只想通过 HTML 文本发送该页面，例如在电子邮件中。所以根本不应该有对外部站点的外部引用。这意味着我现在必须在内部移动我漂亮的外部参考。

我想我可以编写一个 javascript 函数来查找对象的每个类，将其从该类中删除，然后赋予该对象内联“样式”属性等于该类所具有的属性。

但我想知道是否有人有其他建议。

最终目标是获得一堵文本墙，当粘贴到没有缓存或任何东西的非互联网连接浏览器中时，将准确显示我在“正常操作”页面屏幕上的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:03:38.023

为此有一个 perl **CPAN 模块**：

[**`CSS::Inliner`**](http://search.cpan.org/~kamelkev/CSS-Inliner/lib/CSS/Inliner.pm)

你也可以在github上找到源码：

[https://github.com/kamelkev/CSS-Inliner](https://github.com/kamelkev/CSS-Inliner)

# c++ - 在不引用 DLL/程序集的情况下加载 WinRT 组件

> ID：14009250
> 
> 赞同：4
> 
> 时间：2012-12-23T06:57:19.723
> 
> 标签：c++, windows-8, windows-runtime, wrl

我一直在用 C++ 中的 C#、C++/CX 和 WRL 试验 WinRT 组件。到目前为止，我设法做了所有我尝试过的事情，即使与 COM 相比，有些东西已经改变，或者令人困惑或令人沮丧。

我正在尝试的最后一件事是 COM 的基本架构模式，但到目前为止我还做不到。我只是想创建一个 WRL 组件的实例，而不引用正在使用该组件的项目中的 DLL。据我所知，这是COM的基本行为，提供COM的CoClass的GUID，使用程序只知道接口，CoCreateInstance将动态加载COM并创建一个附加到您请求的接口的实例.

我找不到如何使用 WRL 做到这一点。我定义了几个简单的接口，我什至在注册表中都找不到它们。但是，由于 COM 可以在没有注册表的情况下使用对象并且现在有窗口元数据，我想这就是原因。

有人知道这是否不是对 WinRT 的限制（这将使其成为一个非常糟糕的架构......），或者如果有可能如何实现与 WRL 的后期绑定。

为了清楚起见，在调用程序中，我只想提供接口的信息（这可以是 .h），然后我需要能够使用其 GUID 或名字对象名称创建 WinRT 组件的实例。这是我在 C++/COM、C# 和 Java 中使用的架构模式，因为您可以编写应用程序并支持新功能，而无需触及应用程序的任何一行，甚至无需重新编译它。

谢谢 O. Rouit

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T01:03:45.337

到目前为止，尚不清楚您实际上要做什么。WRL 只是 WinRT 的 C++ 帮助程序库，如果您使用 C++（将其视为 WRL-is-to-WinRT-as-ATL-is-to-COM）。

让我们以 C++ 为例，因为它是“最原始的”，并且没有像 C# 或 JS 这样的虚拟机或运行时。您正在尝试实例化未链接的 WinRT 对象？如果是这样，那很简单——ActivateInstance(activateableclassid)。真正的问题是**您要实例化**什么？如果它是第一方（收件箱/Windows）组件，它应该可以正常工作。这与 COM 非常相似，其中 ACID 类似于 CLSID，ActivateInstance() 类似于 CoCreateInstance()。

如果您尝试实例化第 3 方 WinRT 组件（未随 Windows 提供），它会更简单一些。注册第 3 方 WinRT 组件的**唯一方法是将它们包含在您的包中。**包是相互隔离的，所以你不能让例如 AngryBirds 提供一个 FOO WinRT 对象并在 Scrabble 包中的应用程序中使用它。**与注册在机器范围内的 COM 不同**（或者在极少数情况下，即使您在 HKCU 而不是 HKLM 下注册，用户范围内），WinRT 3rd 方（打包）WinRT 对象仅注册供该包中的应用程序使用。(1)

(1) 这是一个善意的谎言。从技术上讲，您的应用程序可以实例化随 Windows 提供的 WinRT 组件以及**包图中的包**提供的 WinRT 组件。您*可以*制作一个包含 WinRT 对象的框架包，并让您的应用程序包依赖于它。Windows 认为我们的包取决于框架，因此您的“包图”中有**2 个**包 - 您的应用程序包和框架包。**但**您不能将框架包提交到商店。本地开发和企业/侧载部署可以做到这一点（它们不通过 Store，因此不需要满足 Store 提交条件），但任何提交到 Store 的应用程序包只能依赖于 Windows 提供的框架（WinJS、VCLibs、PlayReady/DRM）。这就是 PlayReady 的工作原理——它是一个包含（除其他外）一些 WinRT 对象的框架包；如果您的应用程序包在其上声明了 a，则您的包图将包含 2 个包（您的应用程序包 + playready 的包），并且 ActivateInstance() 可以跨包图中的包联合解析 ACID。

应用程序模型中内置了很多保护措施。这是其中之一。这可以防止“COM Hell”和“DLL Hell”——一切都很好，然后 6 个月后您安装了应用程序 Y，并且应用程序 X 无缘无故不再工作。新的 appmodel 旨在防止这种情况。

另一个保护措施是限制可以找到打包的 WinRT 对象的位置。即使您将文件放入应用程序的本地文件夹（例如 ApplicationData.current.localFolder），ActivateInstance() 也不会找到它。WinRT 不会在 AppData（或其他许多地方）下查找已注册的 WinRT 对象——仅在您的包图中（以及操作系统提供的第一方 (Windows) 组件，例如 StorageFolder）中查找。

> 提供 COM 的 CoClass 的 GUID，使用程序只知道接口，并且 CoCreateInstance 将动态加载 COM 并创建一个附加到您请求的接口的实例。**WinRT**等效项是提供 WinRT [组件] 的运行时类的**ACID**，使用**程序**只知道接口，并且**ActivateInstance()**将动态加载**WinRT** [组件] 并创建一个附加到您请求的接口的实例.

 ******需要注意的是，WinRT 组件的实现必须在您的包图中注册，即必须在您的应用程序包的 AppXManifest.xml 或依赖项的 AppXManifest.xml 中列出。

如果您在 ABI 级别直接处理 WinRT，那是最原始的级别。C++ 投影是等价的，只是语法更方便。CLR 和 JS 运行时提供了它们自己的附加和强制执行的变体（例如搜索“windows 8 javascript local vs web 隔间”），但它们只是进一步为行为着色。他们不能推翻底层操作系统的基线行为。

正如达米尔所说

> 您将无法以任何其他方式将新文件放入安装文件夹，这是应用程序可以从中加载可执行代码的唯一位置。“可执行代码”有多种形式，具体取决于您的定义。

WinRT 组件可以从其他地方加载（Windows 提供的 WinRT 组件、依赖包，例如 PlayReady 框架包）。

（非 WinRT、非 COM）“本机”DLL 可以从其他位置（可执行文件的目录、System32 等）加载。请参阅[Windows 商店应用程序的搜索顺序](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx#standard_search_order_for_windows_store_apps)。

DLL 中的 .NET 程序集有它们自己的类似限制，例如 Assembly.Load()。

有些人认为 Javascript 是“代码”，并且有整个本地与网络隔间的东西来进一步着色可以从中解析代码的地方。

作为一般规则，您可以通过多种方式动态加载代码，但它需要是*已知*代码。没有受支持的方式可以创建例如将加载在应用商店提交时未知的 DLL（WinRT 或非 WinRT）的 C++ 应用程序。您**可以**使用可选（条件加载）代码编写应用程序，您**可以**拥有“插件”——但当您提交到商店时，它们需要在您的包中。

您不能像现在这样构建例如 Outlook，其中 Outlook 使用开放式插件模型提交到应用商店，并且稍后安装 Outlook 可以找到和使用的 OutlookNiftyCalendar 插件。不在 Windows 8 中。

（有一些方法可以通过 web 隔间在 Javascript 应用程序中稍微改变这个规则，但这本身就是一个复杂的话题，即使这也有硬性和软性/策略的限制。如果你不写，那就无关紧要了Javascript 应用程序）******

# c# - IHttpAsyncHandler 卸载

> ID：14009253
> 
> 赞同：0
> 
> 时间：2012-12-23T06:57:51.673
> 
> 标签：c#, iis, ihttphandler

我有一个需要从 Web 服务调用的大型 COM 对象。所以我实现了一个 IHttpAsyncHandler 类，希望持有对 COM 对象的引用。这样，请求之间的加载时间就会减少。我在 Windows 2003 服务器上运行 IIS 6。

看起来 HttpHandler 程序集（？）在处理后会卸载，因为我的静态列表在后续调用中是空的。即使第二次调用非常直接，它也会发生：

```
 public class x2Handler : IHttpAsyncHandler, System.Web.SessionState.IRequiresSessionState
{
    public bool IsReusable { get { return true; } }
    private static List<AsynchOperation> _asynch = new List<AsynchOperation>();
    public IAsyncResult BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData)
    {
        AsynchOperation asynch = null;
        foreach( AsynchOperation op in _asynch){
            if (op.Completed){
                asynch = op;
                break;
            }
        }
        if (asynch == null)
        {
            asynch = new AsynchOperation();
            _asynch.Add(asynch);
        }
        asynch.Context = context;
        asynch.Callback = cb;
        asynch.State = extraData;
        asynch.StartAsyncWork();
        return asynch;
    }

    public void EndProcessRequest(IAsyncResult result)
    {
    }

    public void ProcessRequest(HttpContext context)
    {
        throw new InvalidOperationException();
    }

} 
```

每当调用进程时，_asynch 都是空的。应用程序池似乎没有任何会导致程序集卸载的设置。

如何使静态变量在调用之间保持其值？

编辑：我不知道它是否有助于解决这个问题，但如果我有一个断点并且它被击中，然后我删除断点，当代码再次执行时（因为另一个 HTTP 请求）断点仍然是放。

编辑：我在类中添加了一个析构函数并在其中放置了一个断点来确定是什么杀死了这个类，它是从“Appdomain Transition”中调用的。

编辑：我尝试从 IRequiresSessionState 继承，然后将测试值分配给 context.Session 和 context.Application，两者在调用之间都不保存它们的值。那么应用程序池是否有可能在调用之间被释放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:24:44.270

实际问题是无关的。在调用 COM 对象之前，我编写了一个 COM 对象可以访问的文本文件。然后我将文本文件的名称传递给 COM 对象。问题是我正在将文件写入安装 HTTPHandler 的当前目录。

冒险猜测 ASP.Net 监视目录，并且 bin 文件夹中的任何更改都会导致应用程序在当前处理完成后卸载。所以应用程序会为每次调用卸载。移动文本文件解决了问题

# sqlite - SQLite 不区分重音搜索

> ID：14009261
> 
> 赞同：12
> 
> 时间：2012-12-23T06:59:21.200
> 
> 标签：sqlite, qt, diacritics, sql-like, accent-insensitive

有什么方法可以在 SQLite 中进行不区分重音的 LIKE 查询？例如，这个查询：

```
SELECT * FROM users WHERE name LIKE "Andre%" 
```

会返回：

```
安德烈巨人
安德烈·阿加西
等等

```

如果有任何区别，我将 Qt 与 QSqlDatabase 一起使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T07:19:51.450

使用设置[排序规则](http://www.sqlite.org/datatype3.html#collation)[`sqlite3_create_collation`](http://www.sqlite.org/c3ref/create_collation.html)，然后像这样使用它：

```
SELECT * FROM users WHERE name LIKE "Andre%" COLLATE NOACCENTS 
```

# android - Android ListView 文本在加载时消失

> ID：14009262
> 
> 赞同：2
> 
> 时间：2012-12-23T07:00:27.593
> 
> 标签：android, android-listview

当我的活动在三星 Galaxy Y 和 Ace Plus 上加载时 - mDPI/Ldpi 屏幕。列表视图文本和内容不加载。在触摸并尝试滚动内容时出现。

但它在我的开发手机三星 S2 上完美运行

经过一些测试，我发现这只发生在 2.X 版本的 Android 上。

![在此处输入图像描述](../Images/6be820a560db4fc5358ca6218235040c.png)

![在此处输入图像描述](../Images/24aae34d2389a1b0f1f9535b270f1b69.png)

**MainActivity.java**

```
private final String[] places = new String[] { "Mysore", "Bangalore",
        "Mangalore", "Wayanad", "Bandipur National Park National Park",
        "Chickmaglur", "Bandipura", "Coorg", "Kodaikanal", "Hampi",
        "Ghati Subramanya", "Mekedatu", "Muththathhi", "Shivasamudram",
        "Talakadu", "Savana Durga" };

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().requestFeature(Window.FEATURE_ACTION_BAR);
    setContentView(R.layout.activity_main);

    context = this;

    Log.i("Nomad", "onCreate");

    List<Place> thePlaces = new ArrayList<Place>();
    for (int i = 0; i < places.length; i++) {
        Place pl = new Place("NO_ID", places[i], "NO_DISTANCE",
                "NO_CATEGORYICON");
        thePlaces.add(pl);
    }

    listView = (ListView) findViewById(R.id.place_list);
    listView.setEmptyView(findViewById(R.id.empty));

    adapter = new PlacesListAdapter(MainActivity.this,
            R.layout.list_item_place, thePlaces);

    listView.setAdapter(adapter);
    listView.setTextFilterEnabled(true);

    mSearchView = (SearchView) findViewById(R.id.action_search);

    listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> a, View view, int position,
                long id) {

            startActivity(new Intent(MainActivity.this, PlaceActivity.class));
        }
    });

} 
```

**PlacesListAdapter.java**

```
public class PlacesListAdapter extends ArrayAdapter<Place> implements
        Filterable {
    public Context context;
    private List<Place> orig, itemDetailsrrayList;
    private PlaceFilter filter;

    public PlacesListAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public PlacesListAdapter(Context context, int resource, List<Place> places) {
        super(context, resource, places);
        this.context = context;
        // this.places = places;

        itemDetailsrrayList = places;
        orig = new ArrayList<Place>(itemDetailsrrayList);

        filter = new PlaceFilter();
        // imageLoader = new ImageLoader(context.getApplicationContext());

    }

    public int getCount() {
        return itemDetailsrrayList.size();
    }

    public Place getItem(int position) {
        return itemDetailsrrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;
        // View view = convertView;
        // Place p = places.get(position);

        if (convertView == null) {
            LayoutInflater viewInflater;
            viewInflater = LayoutInflater.from(getContext());
            convertView = viewInflater.inflate(R.layout.list_item_place, null);

            holder = new ViewHolder();
            holder.placeTitle = (TextView) convertView
                    .findViewById(R.id.place_title);
            holder.placeDistance = (TextView) convertView
                    .findViewById(R.id.place_distance);
            holder.placeCategoryIcon = (ImageView) convertView
                    .findViewById(R.id.place_category_icon);

            convertView.setTag(holder);

        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.placeTitle.setText(itemDetailsrrayList.get(position)
                .getPlaceTitle());
        holder.placeDistance.setText("200");
        holder.placeCategoryIcon.setImageResource(R.drawable.icon_category);

        // Setting Alternative Row Colors
        if (position % 2 == 0) {
            convertView.setBackgroundResource(R.drawable.list_view_place_row_1);
        } else {
            convertView.setBackgroundResource(R.drawable.list_view_place_row_2);
        }

        return convertView;
    }

    static class ViewHolder {
        TextView placeId;
        TextView placeTitle;
        TextView placeDistance;
        ImageView placeCategoryIcon;
    }

    @Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
        return filter;
    }

    private class PlaceFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults oReturn = new FilterResults();
            ArrayList<Place> results = new ArrayList<Place>();
            if (orig == null)
                orig = itemDetailsrrayList;
            if (constraint != null) {
                if (orig != null && orig.size() > 0) {
                    for (Place g : orig) {
                        if (g.getPlaceTitle()
                                .toLowerCase()
                                .startsWith(constraint.toString().toLowerCase()))
                            results.add(g);
                    }
                }
                oReturn.values = results;
            }
            return oReturn;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
            itemDetailsrrayList = (ArrayList<Place>) results.values;
            notifyDataSetChanged();
        }

    }
} 
```

**aactivity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/primary_white"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/place_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:cacheColorHint="#00000000"
        android:fadingEdge="none" >
    </ListView>

    <TextView
        android:id="@+id/empty"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:padding="20dp"
        android:text="@string/list_view_place_empty"
        android:textColor="@color/black"
        android:textSize="18sp" />

</LinearLayout> 
```

**列表视图行 XML**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="10dp"
    android:paddingTop="10dp" >

    <ImageView
        android:id="@+id/place_category_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:contentDescription="ss"
        android:paddingLeft="10dp"
        android:paddingRight="15dp"
        android:src="@drawable/icon_category" />

    <TextView
        android:id="@+id/place_distance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:paddingRight="15dp"
        android:text="320" />

    <TextView
        android:id="@+id/place_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@+id/place_category_icon"
        android:ellipsize="end"
        android:paddingRight="50dp"
        android:singleLine="true"
        android:text="Place Name"
        android:textColor="#191919"
        android:textSize="18sp" />

</RelativeLayout> 
```

在 Logcat 中找到了这个

```
12-23 19:58:28.033: E/ResourceType(631): Style contains key with bad entry: 0x010102f3
12-23 19:58:28.083: E/ResourceType(631): Style contains key with bad entry: 0x0101030b
12-23 19:58:28.083: E/ResourceType(631): Style contains key with bad entry: 0x0101039c
12-23 19:58:28.083: E/ResourceType(631): Style contains key with bad entry: 0x010103e1
12-23 19:58:31.852: E/ResourceType(631): Style contains key with bad entry: 0x010102f3
12-23 19:58:31.852: E/ResourceType(631): Style contains key with bad entry: 0x0101030b
12-23 19:58:31.852: E/ResourceType(631): Style contains key with bad entry: 0x0101039c
12-23 19:58:31.852: E/ResourceType(631): Style contains key with bad entry: 0x010103e1
12-23 19:58:31.934: I/Nomad(631): onCreate
12-23 19:58:32.074: I/Nomad(631): onCreateOptionsMenu
12-23 19:58:32.144: D/dalvikvm(631): GC_EXTERNAL_ALLOC freed 140K, 50% free 2834K/5639K, external 2844K/2844K, paused 59ms
12-23 19:58:32.264: I/Nomad(631): after setupSearchView()
12-23 19:58:32.264: W/KeyCharacterMap(631): No keyboard for id -1
12-23 19:58:32.264: W/KeyCharacterMap(631): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
12-23 19:58:32.473: D/dalvikvm(631): GC_EXTERNAL_ALLOC freed 41K, 50% free 2847K/5639K, external 3060K/3369K, paused 60ms 
```

**颜色.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <color name="white">#FFFFFF</color>
    <color name="black">#333333</color>
    <color name="primary_white">#f2f2f2</color>
    <color name="dark_bg">#161616</color>

    <!-- Place List View -->
    <color name="list_view_place_row_1">#f2f2f2</color>
    <color name="list_view_place_row_2">#e7e7e7</color>
    <color name="list_view_place_selected">#CFCFCF</color>

    <!-- Place List View -->
    <color name="primary_color">#E5492A</color>
    <color name="primary_color_inverse">#c33518</color>

</resources> 
```

**样式.xml**

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Nomad Theme -->
    <style name="Theme.Nomad" parent="Theme.Sherlock.Light">
        <item name="android:actionBarStyle">@style/Widget.Nomad.ActionBar</item>
        <item name="actionBarStyle">@style/Widget.Nomad.ActionBar</item>
        <item name="android:actionBarItemBackground">@drawable/actionbar_selectable_background</item>
        <item name="actionBarItemBackground">@drawable/actionbar_selectable_background</item>
        <item name="android:actionBarTabStyle">@style/MyActionBarTabStyle</item>
        <item name="actionBarTabStyle">@style/MyActionBarTabStyle</item>
        <item name="android:homeAsUpIndicator">@drawable/abs__ic_ab_back_holo_light</item>
        <item name="homeAsUpIndicator">@drawable/abs__ic_ab_back_holo_light</item>
        <item name="*android:actionModeShareDrawable">@drawable/ic_menu_share</item>
        <item name="actionModeShareDrawable">@drawable/ic_menu_share</item>
        <item name="searchViewSearchIcon">@drawable/ic_menu_search</item>
    </style>

    <style name="Widget.Nomad.ActionBar" parent="Widget.Sherlock.ActionBar">
        <item name="android:background">#E5492A</item>
        <item name="background">#E5492A</item>
        <item name="android:titleTextStyle">@style/TitleText</item>
        <item name="titleTextStyle">@style/TitleText</item>
    </style>

    <style name="TitleText" parent="TextAppearance.Sherlock.Widget.ActionBar.Title">
        <item name="android:textColor">@color/white</item>
    </style>

    <style name="MyActionBarTabStyle" parent="Widget.Sherlock.Light.ActionBar.TabBar">
        <item name="android:background">@drawable/actionbar_tab_bg</item>
        <item name="android:textAlignment">center</item>
        <item name="android:gravity">center</item>
    </style>

</resources> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T09:23:27.027

请尝试将此属性添加到您的 xml 中的 ListView

```
android:cacheColorHint = "@android:color/transparent" 
```

并删除黑色区域， `android:fadingEdge="none"`在您的`ListView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:30:58.223

嗨@Harsha，我尝试了一些基本功能的代码，并且在我的 Galaxy Y 上一切正常。可能是你的 color.xml 文件引起了一些问题。你可以[下载](https://dl.dropbox.com/u/79064878/BugTestListView.rar)这个测试项目，看看它是否有帮助。

# ruby-on-rails - 选择特定帖子的所有评论 mongoid 2 rails 3.1

> ID：14009264
> 
> 赞同：0
> 
> 时间：2012-12-23T07:00:42.990
> 
> 标签：ruby-on-rails, mongodb, mongoid

假设一个作者有很多帖子，而一个帖子有很多评论。您如何选择特定作者特定少数帖子的所有评论？

用例：我想要最近对带有标签“rails”的作者帖子的评论

```
@author = Author.find(params[:author_id])
@posts = @author.posts.where(:tag => 'rails') 
```

现在

```
@comments = @posts.?????.where(:created_at.gte = 1.month.ago) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:53:26.023

没有办法通过`@posts.?????`

您应该获取帖子 ID 并选择评论

```
post_ids = @author.posts.where(:tag => 'rails').map(&:id)
# In rails >= 3.2.1 you can use pluck(:id) instead of map(&:id)

@comments = Comment.where(:post_id => post_ids, :created_at.gte = 1.month.ago) 
```

**更新：**或

```
@posts = @author.posts.where(:tag => 'rails')
@comments = Comment.where(:post_id => @posts.map(&:id), :created_at.gte = 1.month.ago) 
```

# ios - 以编程方式删除子视图

> ID：14009268
> 
> 赞同：0
> 
> 时间：2012-12-23T07:02:41.947
> 
> 标签：ios, cocoa-touch, uiview

我在 appdelegate 中的 didReceiveRemoteNotification: 方法中得到了这段代码

我想知道如何使用延迟删除此子视图，假设子视图显示来自推送通知的信息，但我希望它们在 3.5 秒后消失（延迟 2）

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    NSLog(@"remote notification: %@",[userInfo description]);
    NSDictionary *apsInfo = [userInfo objectForKey:@"aps"];
    NSString *alert = [apsInfo objectForKey:@"alert"];
    NSLog(@"Received Push Alert: %@", alert);

    NSString *sound = [apsInfo objectForKey:@"sound"];
    NSLog(@"Received Push Sound: %@", sound);
    AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);

    NSString *badge = [apsInfo objectForKey:@"badge"];
    NSLog(@"Received Push Badge: %@", badge);
    application.applicationIconBadgeNumber = [[apsInfo objectForKey:@"badge"] integerValue];
    // Create the UILabel instance

    CGRect myFrame = CGRectMake(0, 20, 320, 50);
    UIView *myView = [[UIView alloc] initWithFrame:myFrame];
    myView.backgroundColor = [UIColor blueColor];
    [self.window addSubview:myView];
    [myView release];

    UILabel *aLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 35, 300, 20)];
    [aLabel setText:alert];
    [self.window addSubview:aLabel];
    [aLabel release];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"sound"ofType:@"mp3"];

    AVAudioPlayer* theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

    [theAudio play];
    //SONAR//
    [self performSelector:@selector(delay2) withObject:nil afterDelay:3.5];
}

-(void)delay2 {

    NSString *path = [[NSBundle mainBundle] pathForResource:@"sound"ofType:@"mp3"];

    AVAudioPlayer* theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];

    [theAudio play];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T07:19:27.503

您可以使用 UIView 的 removeFromSuperview 实例方法。在将窗口集标签上的视图添加到所有人时。并在 delay2 方法中使用 tag 和 removeFromSuperview 方法删除它们。

```
CGRect myFrame = CGRectMake(0, 20, 320, 50);
UIView *myView = [[UIView alloc] initWithFrame:myFrame];
myView.backgroundColor = [UIColor blueColor];
[myView setTag:999];
[self.window addSubview:myView];
[myView release];

UILabel *aLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 35, 300, 20)];
[aLabel setText:alert];
[aLabel setTag:999];
[self.window addSubview:aLabel];
[aLabel release];

-(void)delay2 {

for(UIView *subView in window.subviews)
{
    if(subView.tag == 999)
        [subView removeFromSuperview];
} 
```

}

# html - 如果在 textarea 中键入单词“echo”，则 HTML 多部分表单不会发布

> ID：14009269
> 
> 赞同：2
> 
> 时间：2012-12-23T07:02:44.190
> 
> 标签：html, forms, post, multipart

我正面临一个奇怪的情况。

我有一个表格，用于上传文件和文本。

这是我的表格的样子：

```
<form name="frmGems" method="post" action="item.php?gem_id=9" enctype="multipart/form-data">
<textarea name="txtText" id="txtText" cols="30" rows="5"></textarea>
<input type="file" name="flGemImage" id="flGemImage" />
<input type="submit" id="btnSubmit" value="Save" />
</form> 
```

我的问题是，如果在我在“textarea”中输入的文本中，存在一个与**echo**完全拼写的单词，当我单击“保存”按钮时，什么也没有发生。

假设我在 textarea 中输入：“你所做的就像一个**echo**。”

我什至没有选择要上传的文件，只需单击“保存”按钮。

我的浏览器开始做某事，但没有任何反应。我的表单未提交，过了一会儿，我收到此错误：“连接已重置”

我尝试过使用 Safari、FireFox 和 Chrome。并且所有这些结果都相同。

但是，如果我删除**echo**词，表单就会提交并且一切正常。

问题是这段代码在我的电脑上运行良好，但是当我将它上传到互联网上的主机时，它在主机上的行为就像这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:11:23.180

This is a bit of a guess since I can't see your code receiving the `POST` but I think you are using `$_POST["txtText"]` (with **double quotes**), or possibly appending/inserting into a string with double quotes? Use single quotes otherwise the string is interpreted, or escape the quotes.

[Here is an interesting post](https://stackoverflow.com/questions/3446216/difference-between-single-quote-and-double-quote-string-in-php) about double quotes/single quotes in PHP

If possible post the code used to receive the `POST` and we can give you an exact answer :)

# jquery - Rails & jQuery Datepicker - 选择日期时保存表单

> ID：14009271
> 
> 赞同：3
> 
> 时间：2012-12-23T07:03:25.230
> 
> 标签：jquery, ruby-on-rails, datepicker

当用户从日期选择器弹出窗口中选择日期（或为此进行任何更改，无论是日期还是时间）时，我想自动保存一个表单。在 Rails 中，我使用表单`:remote => true`来简单地更改截止日期属性。这只是一个字段，所以让用户在选择日期后点击“提交”按钮感觉有点过头了。我目前已将其设置为在用户更新表单后使用 AJAX 显示更新日期，但同样，我希望在不实际单击提交按钮的情况下完成此操作。

**这是我的erb：**

```
<%= form_for todo, :remote => true, :url => update_todo_project_path, :html => {:id => "todo#{todo.id}" } do |f| %>
   <%= f.hidden_field :id %>
   <%= f.text_field :due %>
   <%= f.submit %>
<% end %> 
```

**Javascript（只是一个外部 js 文件）：**

```
$('input#project_todo_due').datetimepicker({
    dateFormat: 'yy-mm-dd',
    timeFormat: 'hh:mm'
}); 
```

**和 update_todo.js.erb：**

```
$("#dueon<%= @todo.id%>").html("<%= raw escape_javascript(render(:partial => 'duedate')) %>"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T07:28:38.553

我要试一试：

```
$('input#project_todo_due').datetimepicker({
  dateFormat: 'yy-mm-dd',
  timeFormat: 'hh:mm',
  onClose: function(strDate, datepicker) {
    // According to the docs this situation occurs when 
    // the dialog closes without the user making a selection
    if(strDate == "") {
      return;
    }

    // According to the docs this refers to the input
    // Some digging in jquery-ujs on github make it
    // look like triggering the 'submit.rails' event
    // on the form will cause the normal unobtrusive
    // js helpers to post the form.
    // What's not clear is if the input element has the
    // updated value at this point.
    $(this).parent().trigger('submit.rails')
  }
}); 
```

我使用的文档：

[jQuery UI 日期选择器 -- onClose](http://api.jqueryui.com/datepicker/#option-onClose)

[Github 上的 jquery-ujs -- 相关行从 362 开始](https://github.com/rails/jquery-ujs/blob/master/src/rails.js)

# c++ - 尝试使用 OTL 连接到我的 PostgreSQL 服务器

> ID：14009274
> 
> 赞同：2
> 
> 时间：2012-12-23T07:04:11.010
> 
> 标签：c++, sql, postgresql, odbc, otl

我正在尝试将我的 c++ 客户端连接到 PostgreSQL 数据库。我不断收到 otlv4.h|12406|undefined reference to `SQLFreeHandle@8' 和许多其他未定义的引用错误。

要获取头文件，请访问[http://otl.sourceforge.net/otl3_down.htm](http://otl.sourceforge.net/otl3_down.htm)

```
#include <iostream>

using namespace std;

#include <stdio.h>
#include <string.h>
#include <stdlib.h>
// #define OTL_ODBC_UNIX // uncomment this line if UnixODBC is used
#define OTL_ODBC_ALTERNATE_RPC
#if !defined(_WIN32) && !defined(_WIN64)
#define OTL_ODBC
#else
#define OTL_ODBC_POSTGRESQL // required with PG ODBC on Windows
#endif
#include "otlv4.h" // include the OTL 4.0 header file

otl_connect db; // connect object

int main()
{

    otl_connect::otl_initialize(); // initialize ODBC environment

    db.rlogon("postgres/changeme@numbers");

    db.commit();

    cout << "Hello world!" << endl;

    db.logoff(); // disconnect from ODBC
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T07:55:06.857

当我使用 ODBC 从 Windows 连接到 PostgreSQL 时，我使用了无 DSN 的方法。从用户的角度来看，它需要零输入——用户不需要知道什么是 ODBC 以及如何配置 ODBC 源 (DSN)。

使用 DSN-less 连接的典型方法是使用如下字符串作为 ODBC 连接字符串：

```
Driver=PostgreSQL;Server=hostname;Database=mypgdb;UID=username;PWD=password 
```

请注意，驱动程序名称可能需要根据版本和 ANSI 与 Unicode 风格进行调整。

# php - 不显示给定的数据

> ID：14009276
> 
> 赞同：-3
> 
> 时间：2012-12-23T07:04:37.417
> 
> 标签：php, mysql

PHP 文件不显示任何错误，但不显示要从 MySQL 数据库获取的数据。这并不是说它无法连接到数据库所以我不知道这次我是如何破坏它的 :( 搜索引擎

```
<body>
    <h2>Search Engine</h2>
    <form action='./search.php' method='get'>
        <input type='text' name='k' size='50' value='<?php echo $_GET['k'] ?>' />
        <input type='submit' value='Search'/>
    </form>
        <hr />
    <?php
        $k = $_GET['k'];
        $terms = explode(" ", $k);
        $query = "SELECT * FROM search WHERE ";

        foreach ($terms as $each)
        {
            //....
        }

        //connect
        mysql_connect("localhost", "root", "");
        mysql_select_db("search");

        $query = mysql_query($query);

        $num_rows = 0;
        if ($query){
            while($row = mysql_fetch_assoc($query)){
                $id = $row['id'];
                $title = $row['title'];
                $description = $row['description'];
                $k = $row['Keywords'];
                $link = $row['link'];
                echo "<h2><a href='$link'>$title</a></h2>
                $description<br /><br />";
            }
        }
        else
            echo "No results found for \"<b>$k</b>\"";

        //disconnect
        mysql_close();

    ?>
</body>
</html> 
```

然后我有 MySQL 数据库设置 ![数据库](../Images/a5191dc8b60f9c328085af9286b9e268.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:07:14.420

尝试改变

```
$query = mysql_query($query); 
```

到

```
$query = mysql_query($query) or die(mysql_error()); 
```

看看会发生什么

# java - BufferedImage Java 中的简单正方形识别

> ID：14009279
> 
> 赞同：1
> 
> 时间：2012-12-23T07:05:03.373
> 
> 标签：java, image-recognition

我目前正在为我学校的机器人俱乐部开发一个图像识别软件，其中一个部分真的让我很难过：形状识别。在尝试检测竞技场中的形状之前，我需要能够检测到此图像中的正方形。

我查找了一些库，如 JavaCV，但我真的找不到适合我口味的东西。作为参考，这是我试图确定形状的图像

![要检查的文件](../Images/bfec08a12b5210c4aee8f0594aefed95.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T12:35:42.713

您是否尝试过应用**[霍夫变换](https://en.wikipedia.org/wiki/Hough_transform)**？

这似乎是您所需要的，因为您的正方形有直边。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:29:33.037

我正在做与您的任务类似的事情，但我需要识别物体的类别（电阻器、电容器等）以及它们在真实黑白照片中的边界是什么：

![黑白照片](../Images/46451393454d3dd623c265d797565da3.png)

基本上，该方法是这样的：

1.  预处理——校正对比度、亮度、腐蚀、膨胀、中值等——这一步可以适应整个/部分照片。
2.  分割 - 现在找到照片的某些部分，其中可能存在“某些东西”，具有一定的面积​​、像素强度等阈值。
3.  表征 - 为每个找到的潜在段计算一些特性 - 最大长度、面积、W、M - 行列式等。
4.  分类 - 有几个分类器检查给定特征是否属于此类，如果答案是肯定的 - 给定特征与理想模型特征的“距离”是多少。分类是使用模糊逻辑推理完成的。
5.  当然 - 对于每一个成功的分类，如果存在最好的匹配。

在您的情况下 - 正方形的最简单表征是找出它的面积以及属于找到的段的两点之间的最大距离。在此之前，您应该使用[“关闭”操作（膨胀->侵蚀）对图像进行预处理](http://micro.magnet.fsu.edu/primer/java/digitalimaging/russ/erosiondilation/index.html)

您还可以创建很好的算法来识别一个正方形是否被一条线切割（并删除该线 - 然后再次识别）并检查一个正方形是否与其他正方形重叠，等等。

* * *

就个人而言，我不知道有任何图书馆可以做如此复杂的事情，例如`library.recognizeSquaresOnImage(params)`. 为您提供了一些有用的方法来准备用于识别的图像 - 这是您任务的核心 - 您必须自己完成。

每个识别问题都有其独特的特征，可用于缩小“识别管道”中每一步的不确定结果。例如，在我的任务中，我知道物体在相当白的背景上是黑色的，并且或多或少地彼此分离，等等。

我的项目是使用 OpenCV 库用 C++ 编写的，我使用 OpenCV 库仅用于读取/写入图像并将其显示在窗口中 - 我不允许使用该库的任何其他方法。

作为参考，您如何做到这一点 -[这里](https://bitbucket.org/pdrzewin/opencv-recognition/overview)是整个项目。即使现在它也不能完美地工作——它需要对分类器进行一些校准。

为了更好地掌握它在更高级别上的工作原理 - 查看[main.cpp](https://bitbucket.org/pdrzewin/opencv-recognition/src/940a46ea91b96f40b1ffdf06a038715def9c69cc/src/main.cpp?at=default)文件。

# c++ - How can I pass a parameter to a default constructor when it is generated in the derived constructor?

> ID：14009290
> 
> 赞同：0
> 
> 时间：2012-12-23T07:08:03.673
> 
> 标签：c++, class, opengl, constructor, sfml

I have a class called RenderObject that holds 3 variables: a position, an int that holds the length of an array pointed to, and the pointer to an array of "Faces"

Face is just a class that holds its type (quad or triangle), its colour, and a pointer to an array of vertices (stored as Vector3f).

My RenderObject class has a constructor that requires a position, an array of faces, and and int that is the number of faces in the array.

I also have a class called Cube, it is derived from RenderObject (so I could easily generate a cube of width, height and depth dimensions.

The problem is, Cube's constructor only needs the position and dimensions, so when it comes to calling the default constructor:

```
Cube::Cube( sf::Vector3f *positionVector, float width, float height, float depth ) : RenderObject( positionVector, /*can't supply this*/, 6 ) { 
```

I can't pass the array of faces because the Cube class runs GenerateFaces(); to automatically create the faces according to the dimensions.

So my question is, how do I pass the generated faces to RenderObject's constructor? Or is there a better way to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:15:49.833

There are a couple of ways to solve this. Some of the most common are to either make the array of faces `protected` so it can be accessed by the child classes, make a protected function `SetFaces` in the base class to set the array, or make the `GenerateFaces` a method in the base class that can access the private variables.

Oh and a last tip: Don't use raw arrays/pointers, use [`std::vector`](http://en.cppreference.com/w/cpp/container/vector) instead.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T07:11:57.127

Make the method GenerateFaces a static method. You can then call it from within the base-constructor call.

I'm assuming here that the GenerateFaces method can do it's work with just the parameters from the Cube-constructor. You will have to add these as parameters to the GenerateFaces method.

Edit: just saw the C++ tag while I had C# in mind. Should still be applicable though.

# iphone - 数据： 从方法返回获取请求对象时

> ID：14009295
> 
> 赞同：0
> 
> 时间：2012-12-23T07:09:17.797
> 
> 标签：iphone, ios, core-data, nsmanagedobject

当我将我的应用程序转换为新技术 ARC（自动引用计数）时，当我从 CoreData 获取时出现了错误。以下是我的方法并呼吁它：

```
NSArray *userinfo =[self checkData:self.username];

//This return fault data in array
-(NSArray*) checkData:(NSString*)loginUsername{
  id appDelegate = (id)[[UIApplication sharedApplication] delegate]; 

  NSManagedObjectContext *managedObjectContext = [[NSManagedObjectContext alloc] init];
  [managedObjectContext setPersistentStoreCoordinator:[[appDelegate managedObjectContext] persistentStoreCoordinator]];

  NSFetchRequest *request = [[NSFetchRequest alloc] init];
  NSEntityDescription *userEntity = [NSEntityDescription entityForName:@"User" inManagedObjectContext:managedObjectContext];

  [request setEntity:userEntity];
  [request setPredicate:[NSPredicate predicateWithFormat:@"userName == %@",loginUsername ]];
  NSError *error;

  NSArray *userInfo =[managedObjectContext executeFetchRequest:request error:&error];
  //NSLog(@"Number of account%@",[userInfo valueForKey:@"userName"]);

  if ([userInfo valueForKey:@"userName"] != nil && userInfo.count != 0)
    return userInfo;
  else return nil;
} 
```

这是崩溃日志：

```
<User: 0x12b73db0> (entity: User; id: 0x12b6dc20 <x-coredata://7388F0B7-E583-4BF0-BE64-08AD014EC583/User/p2> ; data: <fault>)
2012-12-23 10:09:18.802 test[78839:c07] -[NSNull isEqualToString:]: unrecognized selector sent to instance 0x28ac678
2012-12-23 10:09:18.803 test[78839:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSNull isEqualToString:]: unrecognized selector sent to instance 0x28ac678'
*** First throw call stack:
(0x277b012 0x2018e7e 0x28064bd 0x276abbc 0x276a94e 0xb4028 0x3e3be 0x1812e59 0x1810f22 0x181216a 0x1810edd 0x1811055 0x175e338 0x5d3a81 0x5d2d33 0x610e3a 0x271d8fd 0x6114bc 0x611435 0x4fb3a0 0x26fef3f 0x26fea39 0x2721734 0x2720f44 0x2720e1b 0x31027e3 0x3102668 0xc5465c 0x2806 0x2735 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:21:13.193

尝试使用您的 AppDelegate 的 managedObjectContext：

所以更换

```
id appDelegate = (id)[[UIApplication sharedApplication] delegate]; 

NSManagedObjectContext *managedObjectContext = [[NSManagedObjectContext alloc] init];
[managedObjectContext setPersistentStoreCoordinator:[[appDelegate managedObjectContext] persistentStoreCoordinator]]; 
```

到

```
NSManagedObjectContext *managedObjectContext = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:38:52.127

崩溃日志似乎说那`loginUsername`是零。无论如何，您最好在尝试使用它之前检查它是否确实存在。

# java - Creating Array of weapons for Math.Random to choose from

> ID：14009298
> 
> 赞同：1
> 
> 时间：2012-12-23T07:10:53.607
> 
> 标签：java, arrays, class, random, interface

I am just a little bit confused as of what to do. I have Two Weapons Classes. One for the M16 and another for the M4\. I then have those Classes implementing an interface named Armory. But I am having issues with the Combat class. In the combat class I have a Random number Generator that will generate a random number and depending on what number it is, will either give the player a weapon or do nothing. I will post the Code Below:

Interface:

```
public interface Armory {

public Integer weaponAmmo(int wepAmmo);
public Integer weaponDamage(int wepDamage);
public String weaponName(String wepName);   
} 
```

M4 Class(M4 and M16 Classes are the same except for damage and ammo amounts):

```
public class M4 implements Armory {

public Integer weaponAmmo(int wepAmmo) {
    wepAmmo = 10;
    return wepAmmo;
}

public Integer weaponDamage(int wepDamage) {
    wepDamage = 2;
    return wepDamage;
}

public String weaponName(String wepName) {
    wepName = "M4";
    return wepName;
} 
```

And Finally, the Combat Class(This is where I am having Issues):

```
public class Combat {
final int chanceOfDrop = 3;

Weapons[] wepArray = {new M4(), new M16()};  //Issues here.. Don't really know how to implement this.

static boolean[] hasWeapon = {false, true};

public static int  ranNumberGen(int chanceOfDrop) {
    return (int) (Math.random()*1); 
}

private void enemyDead() {
    boolean canDrop = false;
    if(ranNumberGen(chanceOfDrop)==0){
        canDrop = true;

    }

    if(canDrop == true){
        givePlayerWeapon(wepArray[Combat.ranNumberGen(wepArray.length)] } //Issues here also.
    private static void givePlayerWeapon(int w) {
        hasWeapon[w] = true;

        for (int i = 0; i < hasWeapon.length; ++i)
        {
            if (hasWeapon[i]) System.out.println(( wepArray[i]).weaponName());  //And, last but not least, I am having Issues here
        }
            }

} 
```

NOTE: I have a Weapons Class, But nothing is in it. I don't really know what to put in it.

Any Suggestions?

Thanks in advance: Shandan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:51:13.147

几个问题 -

A. 要将 m16 和 m14 元素放入武器数组中，这些类必须扩展（如果武器是类）或实现（如果武器是接口）武器。
另一种选择是 `Weapons toWeapons()`在 M16 和 M14 类中都有一个方法。

B. 如果我错了，请纠正我（不是以英语为母语的人 - 但军械库是一个提供武器的地方，所以你选择的名字不好
。M16 和 M14 应该实现一个名为“Weapon”的接口，而这个（以我的谦虚意见）应该是数组的类型

。C.如果我理解，你想在某些情况下不向用户提供武器 ​​-
完成此操作的一种方法是让 NoWeapon 类实现武器（在您当前的代码中 - 实现军械库），而不是变得丑陋（检查是否存在）。
它的方法将具有“什么都不做”的应用意义。
例如 - WeaponAmmo 将始终返回 0。

# r - 在 R 中创建特定的日期/时间序列

> ID：14009301
> 
> 赞同：2
> 
> 时间：2012-12-23T07:11:25.503
> 
> 标签：r, datetime, sequence

我想创建一个单列，其日期/时间序列每小时增加一年或一个月（例如）。我正在使用这样的代码来生成这个序列：

```
start.date<-"2012-01-15"
start.time<-"00:00:00"
interval<-60 # 60 minutes
increment.mins<-interval*60 
x<-paste(start.date,start.time)

for(i in 1:365){
   print(strptime(x, "%Y-%m-%d %H:%M:%S")+i*increment.mins)
} 
```

但是，我不确定如何指定日期和时间序列的范围。另外，我在处理第一个小时“00:00:00”时遇到了问题？不确定指定月份、年份等日期/时间序列长度的最佳方法是什么？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T07:17:16.370

我强烈建议您使用`POSIXct`数据类型。这样您就可以`seq`毫无问题地使用这些数据，并根据需要使用这些数据。

```
start <- as.POSIXct("2012-01-15")
interval <- 60

end <- start + as.difftime(1, units="days")

seq(from=start, by=interval*60, to=end) 
```

现在你可以用你的时间戳做任何你想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T22:00:25.023

试试这个。 `mondate`提前一个月非常聪明。例如，它将 1 月的最后一天提前到 2 月的最后一天，而其他日期/时间类往往会超过 3 月。 `chron`不使用时区，因此您无法像使用 POSIXct 那样获得编码的时区错误. 这`x`是问题。

```
library(chron)
library(mondate)

start.time.num <- as.numeric(as.chron(x))

# +1 means one month.  Use +12 if you want one year.
end.time.num <- as.numeric(as.chron(paste(mondate(x)+1, start.time)))

# 1/24 means one hour.  Change as needed.
hours <- as.chron(seq(start.time.num, end.time.num, 1/24)) 
```

# c# - How to print RichEditBox content (RTF file) in windows store app

> ID：14009309
> 
> 赞同：1
> 
> 时间：2012-12-23T07:13:39.390
> 
> 标签：c#, printing, windows-8, microsoft-metro, windows-runtime

I have an app which contains a `RichEditBox` and image element and some textblocks. I want to print those data in appropriate format. I have already seen print sample of MSDN, but I am not getting a way to print `RichEditBox` content as it is in RTF format, So how can I paginate that and print that ? I will feel glad if you help me on this issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:39:45.553

这是您的问题的解决方案：

```
 string str = null;
        rtBox.Document.GetText(Windows.UI.Text.TextGetOptions.NoHidden, out str); 
```

# jquery - run $(element).pulsate() under .live()

> ID：14009310
> 
> 赞同：2
> 
> 时间：2012-12-23T07:13:47.850
> 
> 标签：jquery

I have dynamically created elements on my page. I want these elements to be pulstated using the `$(element).pulsate()`

The thing is it doesn't work because they we created after running the page load. I've notices there is a jquery `.live()` command. How do I run the `pulsate()` under the live command?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:17:25.580

If you need to make it pulsate based on the click event, you can use `.on()`:

```
$(container).on('click', selector, function() {
    $(this).pulsate(...);
}); 
```

*The use of `.live()` has been deprecated since 1.7*

Where `container` is an element up in the DOM tree that's not removed while your app is running and `selector` is the relative query (anchored to the container) that's used to match elements you wish to pulsate when clicked.

**Example**

```
<div id="container"></div> 
```

Some code would append a new element.

```
$('#container').append('<div class="bla">bla</div>'); 
```

Then this code could be used to achieve what you want:

```
$('#container').on('click', '.bla', function() {
    $(this).pulsate(...);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T07:16:57.063

> The thing is it doesn't work because they we created after running the page load.

So use `$(element).pulsate();` with an appropriate selector or element instances after you've created the elements. You haven't said how/when you're creating them, so I don't know whether it's on an event or a timer or what, but either way eventually you have code running that creates the elements. So tell them to pulsate as part of that code. E.g.:

```
/* ...add a bunch of content to #foo... */
$("#foo").pulsate(); 
```

You might use a class when creating the new elements (`class="new"`) so you can just blindly do this:

```
$(".new").pulsate().removeClass("new"); 
```

# svn - svn: do we need a test branch

> ID：14009311
> 
> 赞同：0
> 
> 时间：2012-12-23T07:14:30.287
> 
> 标签：svn, branch

I am trying to migrate my project to SVN. in my previous projects we used to have Trunk as the dev area where the developer used to check out and commit to (unless there is a branch for a special release). Then we used to have a branch for Test area.

Looking at SVN now i dont see the need for a test branch, we can make a build upon the Dev trunk and most examples i am getting dont even mention a Test branch specifically.

In my previous companies and projects, the test branches were there because we had different configurations for test servers so the config.xml files were different for each environment so we ahd different branches for each environemnt.

Can any one help me how to tackle this issue. do we need to have a Test branch just cos of different config files or hwo do people Test?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:19:44.943

Branches are useful if two versions of the code base are evolving independently, for example if you want to do bug fixing of the released version but at the same time also continue with development.

If you just have a test version, a tag would be sufficient most of the time. (Technically tags and branches are the same in subversion, but there is a semantic difference).

# ruby-on-rails - 良好的第三方分析，用于通过 URL 跟踪页面浏览量

> ID：14009313
> 
> 赞同：0
> 
> 时间：2012-12-23T07:15:10.243
> 
> 标签：ruby-on-rails, language-agnostic

我的应用程序中有用户，简单地说，每个用户都有很多图片。这些图片在其他地方查看 - 不在我的网站上（我的网站仅用于管理它们 - 创建、删除、显示视图统计等）。在其他网站上，它们的显示方式如下：

```
<img src="http://mywebsite.com/mypicture_132.png" /> 
```

每次有人打开图像时，我都需要收集一些分析，例如：

```
- http referrer
- IP of the viewer
- time the picture was viewed 
```

然后在我的网站上向用户展示。

我一直在做这一切（通过简单地将每个图像视图保存到数据库），但现在服务太大而无法维护这些数据（这就像每张图片每天有数百条记录，每个用户 50-70 张图片，大量数据）。所以我正在考虑寻找一些强大的外部服务来为我做到这一点。

也许像[http://goo.gl](http://goo.gl)之类的（因为它每天/每周/每月/每年都有很好的统计数据，图表，所有内容都存储在 Google 服务器上，等等）。但是那个应该附加到 gmail 帐户，我也不认为它支持该数据的简单导出。我还需要能够获得所选图片的总统计信息，这样用户就不必单独点击每一张。主要是我希望其他人记录和存储数据。不介意支付合理的价格。

你知道这样的服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:48:32.077

事实证明，Google 有一个 Url Shortener API 可以满足我的需要。

# push-notification - Can I invoke functions in PhoneGap Pushwoosh

> ID：14009314
> 
> 赞同：0
> 
> 时间：2012-12-23T07:15:11.363
> 
> 标签：push-notification, phonegap-plugins

I have function Called `SaveDateAndTime();`

This function store date and time inside my application in `Localstorage`,

But my question, when Pushwoosh notifications Occurred, can I invoke my function `SaveDateAndTime()` even my application is *not running*? and save date and time in `LocalStorage`?

Please note :`SaveDateAndTime()` this function inside my application .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T09:58:32.017

当应用程序将启动以响应用户与推送通知的交互时，您的代码将运行。您可以在推送通知处理程序中使用此功能。

# asp.net-mvc-4 - 将额外数据传递给后控制器 - MVC

> ID：14009325
> 
> 赞同：2
> 
> 时间：2012-12-23T07:17:13.063
> 
> 标签：asp.net-mvc-4, model-binding

假设我有模型

```
public class ViewModel 
{
    [Required]
    [Display(Name = "Email address")]
    public string Email { get; set; }

    public string ExtraData{ get; set; }
} 
```

在`ExtraData`GET 操作中添加的一些额外文本在哪里：

```
 [HttpGet] 
    public ActionResult ActionMethod()
    {
        ViewModel modelWithExtraData= new ViewModel{ ExtraData = "Some extra data." };
        return PartialView("MyView", modelWithExtraData);
    } 
```

并在视图中呈现如下：

```
<form>
    @Html.TextBoxFor(m => m.Email)
    <div>@Model.ExtraData</div>
<form> 
```

当此表单发布到控制器时，我希望额外数据“一些额外数据”完好无损并与模型一起发布，但这不会发生。

```
 [HttpPost]
    public ActionResult ActionMethod(ViewModel model)
    {
        //model.ExtraData = null ... Not good
    } 
```

我查看了所有 @Html 辅助方法，但似乎找不到合适的方法来简单地显示文本（**不可编辑**）并将其发回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T07:19:27.233

您可以将额外数据作为隐藏字段包含在表单中以及文本框旁边：

```
<form>
    @Html.TextBoxFor(m => m.Email)
    @Html.HiddenFor(m => m.ExtraData)
    <div>@Model.ExtraData</div>
<form> 
```

# python - 如何在 python nltk 中使用麦芽解析器

> ID：14009330
> 
> 赞同：14
> 
> 时间：2012-12-23T07:18:02.897
> 
> 标签：python, parsing, nlp, nltk

作为我学术项目的一部分，我需要将一堆任意句子解析成依赖图。经过大量搜索后，我得到了可以使用 Malt Parser 及其预先训练的语法分析文本的解决方案。

[我已经从http://www.maltparser.org/mco/mco.html](http://www.maltparser.org/mco/mco.html)下载了预训练模型 (engmalt.linear-1.7.mco) 。但是我不知道如何使用这个语法文件和麦芽解析器（通过麦芽的 python 接口）来解析我的句子。我已经下载了最新版本的 malt parser (1.7.2) 并将其移至“/usr/lib/”

```
import nltk; 
parser =nltk.parse.malt.MaltParser()
txt="This is a test sentence"
parser.train_from_file('/home/rohith/malt-1.7.2/engmalt.linear-1.7.mco')
parser.raw_parse(txt) 
```

执行最后一行后，显示以下错误消息

```
Traceback (most recent call last):
File "<pyshell#7>", line 1, in <module>
parser.raw_parse(txt)
File "/usr/local/lib/python2.7/dist-packages/nltk-2.0b5-py2.7.egg/nltk/parse/malt.py", line 88, in raw_parse
return self.parse(words, verbose)
File "/usr/local/lib/python2.7/dist-packages/nltk-2.0b5-py2.7.egg/nltk/parse/malt.py", line 75, in parse
return self.tagged_parse(taggedwords, verbose)
File "/usr/local/lib/python2.7/dist-packages/nltk-2.0b5-py2.7.egg/nltk/parse/malt.py", line 122, in tagged_parse
return DependencyGraph.load(output_file)
File "/usr/local/lib/python2.7/dist-packages/nltk-2.0b5-py2.7.egg/nltk/parse/dependencygraph.py", line 121, in load
return DependencyGraph(open(file).read())
IOError: [Errno 2] No such file or directory: '/tmp/malt_output.conll' 
```

请帮助我使用这个麦芽解析器来解析那个句子。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-28T05:46:52.230

# 已编辑

请注意，由于自 2015 年 8 月以来 NLTK 中 MaltParser API 的更新版本，答案不再有效。此答案保留为旧版。

请参阅此答案以使 MaltParser 与 NLTK 一起使用：

*   [逐步让 NLTK 中的麦芽解析器工作？](https://stackoverflow.com/questions/13207394/step-by-step-to-getting-malt-parser-in-nltk-to-work)

**免责声明**：这不是一个永恒的解决方案。上述链接（2016 年 2 月发布）中的答案现在可以使用。但是当 MaltParser 或 NLTK API 发生变化时，它也可能将语法更改为在 NLTK 中使用 MaltParser。

* * *

您的设置有几个问题：

*   输入`train_from_file`必须是 CoNLL 格式的文件，而不是预训练的模型。对于文件，您可以使用and参数`mco`将其传递给`MaltParser`构造函数。`mco``working_directory`
*   默认的 java 堆分配不足以加载该特定`mco`文件，因此您必须通过`-Xmx`参数告诉 java 使用更多堆空间。不幸的是，现有代码无法做到这一点，所以我只是签入了一个更改，以允许为 java args 提供额外的构造函数参数。见[这里](https://github.com/nltk/nltk/commit/f63cdccca48c39141f18f79a2cd182f3964eaa93)。

所以这就是你需要做的：

首先，获取最新的 NLTK 修订版：

```
git clone https://github.com/nltk/nltk.git 
```

（注意：如果你不能使用 NLTK 的 git 版本，那么你必须`malt.py`手动更新文件或从[这里](https://github.com/nltk/nltk/blob/master/nltk/parse/malt.py)复制它以获得你自己的版本。）

其次，将 jar 文件重命名为`malt.jar`，这是 NLTK 所期望的：

```
cd /usr/lib/
ln -s maltparser-1.7.2.jar malt.jar 
```

然后添加一个指向 malt 解析器的环境变量：

```
export MALTPARSERHOME="/Users/dhg/Downloads/maltparser-1.7.2" 
```

最后，在 python 中加载和使用 malt 解析器：

```
>>> import nltk
>>> parser = nltk.parse.malt.MaltParser(working_dir="/home/rohith/malt-1.7.2", 
...                                     mco="engmalt.linear-1.7", 
...                                     additional_java_args=['-Xmx512m'])
>>> txt = "This is a test sentence"
>>> graph = parser.raw_parse(txt)
>>> graph.tree().pprint()
'(This (sentence is a test))' 
```

# java - 无法从 Runnable.run 方法更新摆动组件

> ID：14009332
> 
> 赞同：2
> 
> 时间：2012-12-23T07:18:18.263
> 
> 标签：java, swing, sockets, concurrency, event-dispatch-thread

我在从代码中更新 Jlabel、JTextArea 时遇到问题。但它不起作用。

**解释：**

我有 3 节课

```
package chatgui4;
//worked on it
import java.io.DataInputStream;
import java.io.PrintStream;
import java.io.IOException;
import java.net.Socket;
import java.net.ServerSocket;

public class MultiThreadChatServer {

  private static ServerSocket serverSocket = null;
  private static Socket clientSocket = null;

  // This chat server can accept up to maxClientsCount clients' connections.
  private static final int maxClientsCount = 10;
  private static final clientThread[] threads = new clientThread[maxClientsCount];

  public static void main(String args[]) {

    int portNumber = 2222;

    try {
      serverSocket = new ServerSocket(portNumber);
      System.out.println("Server Started at port: 2222");
    } catch (IOException e) {
      System.out.println(e);
    }

    // Create a client socket for each connection and pass it to a new client thread
    while (true) {
      try {
        clientSocket = serverSocket.accept();
        int i ;
        for (i = 0; i < maxClientsCount; i++) {
          if (threads[i] == null) {
            (threads[i] = new clientThread(clientSocket, threads)).start();
            break;
          }
        }
      } catch (IOException e) {
        System.out.println(e);
      }//end catch
    }//end while
  }//end main
}//end public class MultiThreadChatServer

class clientThread extends Thread {

  private DataInputStream is = null;
  private PrintStream os = null;
  private Socket clientSocket = null;
  private final clientThread[] threads;
  private int maxClientsCount;
  private  String fromClient;
  boolean closed=false;

  public clientThread(Socket clientSocket, clientThread[] threads) {
    this.clientSocket = clientSocket;
    this.threads = threads;
    maxClientsCount = threads.length;    
  }

  public void run() {
   // maxClientsCount = this.maxClientsCount;
    clientThread[] threads = this.threads;

    try {
      is = new DataInputStream(clientSocket.getInputStream());
      os = new PrintStream(clientSocket.getOutputStream());
      while(!is.readLine().isEmpty()){

       fromClient = is.readLine().trim();
       //System.out.println(fromClient);
       String[] decodedFromClient=fromClient.split("@!");

       if(decodedFromClient[1].trim().equals("server")){
         if (decodedFromClient[3].trim().equals("iamonline")){
            System.out.println(decodedFromClient[0]+ " connected.");
            os.println("Server@!"+ decodedFromClient[0]+"@!Hello " + decodedFromClient[0]+ "@!all");

            for (int i = 0; i < maxClientsCount; i++) {
                if (threads[i] != null && threads[i] != this) {
                threads[i].os.println("User " + decodedFromClient[0]
                    + " entered.@!populateOnline@!"+"decodedFromClient[0]");
                }
            }
            }//end if iamonline
        else if(decodedFromClient[3].trim().equals("quit")){
           for (int i = 0; i < maxClientsCount; i++) {
            if (threads[i] != null && threads[i] != this) {
                threads[i].os.println("server@!all@!" + decodedFromClient[0]
                + " left chat room @!removeOnline@!decodedFromClient[0]");
          //from @! to @! msg @! work @! extra/whom==5
        }
      }
       }

       }//end if to server

       else {
      //while (true) {
        //String line = is.readLine();
        //String[] decodedLine=line.split("@!");
        for (int i = 0; i < maxClientsCount; i++) {
          if (threads[i] != null) {
            //threads[i].os.println(decodedFromClient[0]+"@!"+decodedFromClient[1] +"@!"+chatMsg@!" +  decodedFromClient[0]+": " + line);
              System.out.println(fromClient);
              threads[i].os.println(fromClient);
          }
        }
      //}
       }//end else if not server
}

      /*temp coment
      is.close();
      os.close();
      clientSocket.close();
      */
    } catch (IOException e) {
        System.out.println(e.getMessage());
    }
//}//close while
  }
} 
```

iii. [客户端GUI.java](http://pastebin.com/tZ1DypNb)

包chatgui4；

```
import java.awt.EventQueue;
import java.io.*;
import java.net.Socket;
import java.net.UnknownHostException;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

/**
 *
 * @author sulav
 */
public class ClientGUI extends javax.swing.JFrame implements Runnable {

    /**
     * Creates new form ClientGUI
     */
    private static Socket clientSocket = null;
    // The output stream
    private static PrintStream os = null;
    // The input stream
    private static DataInputStream is = null;
    private static BufferedReader inputLine = null;
    private static boolean closed = false;
    public static String uname;

    public ClientGUI() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jTextField1 = new javax.swing.JTextField();
        jButton3 = new javax.swing.JButton();
        jScrollPane3 = new javax.swing.JScrollPane();
        jList2 = new javax.swing.JList();
        jLabel3 = new javax.swing.JLabel();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        jMenu2 = new javax.swing.JMenu();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));

        jTextArea1.setColumns(20);
        jTextArea1.setEditable(false);
        jTextArea1.setRows(5);
        jScrollPane1.setViewportView(jTextArea1);

        jLabel1.setText("Online Users");

        jLabel2.setText("Terminal");

        jButton1.setText("Connect");
        jButton1.setMargin(new java.awt.Insets(2, 2, 2, 2));
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jButton2.setText("Disconnect");
        jButton2.setMargin(new java.awt.Insets(2, 2, 2, 2));

        jTextField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });

        jButton3.setText("Send");
        jButton3.setMargin(new java.awt.Insets(2, 2, 2, 2));
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });

        jList2.setModel(new javax.swing.AbstractListModel() {
            String[] strings = { "ram", "a", "Item 3", "Item 4", "Item 5" };
            public int getSize() { return strings.length; }
            public Object getElementAt(int i) { return strings[i]; }
        });
        jScrollPane3.setViewportView(jList2);

        jLabel3.setText("jLabel3");

        jMenu1.setText("File");
        jMenuBar1.add(jMenu1);

        jMenu2.setText("Availability");
        jMenuBar1.add(jMenu2);

        setJMenuBar(jMenuBar1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 269, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(24, 24, 24)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel1)
                            .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 154, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 343, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(layout.createSequentialGroup()
                                .addGap(20, 20, 20)
                                .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 220, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(7, 7, 7)
                        .addComponent(jButton3, javax.swing.GroupLayout.PREFERRED_SIZE, 51, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel2)
                        .addGap(230, 230, 230)
                        .addComponent(jButton1)
                        .addGap(11, 11, 11)
                        .addComponent(jButton2)))
                .addContainerGap(28, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(10, 10, 10)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jButton1)
                    .addComponent(jButton2)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(5, 5, 5)
                        .addComponent(jLabel2)))
                .addGap(7, 7, 7)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addGap(6, 6, 6)
                        .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 183, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(36, 36, 36)
                        .addComponent(jButton3))
                    .addGroup(layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(15, 15, 15)
                        .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(23, Short.MAX_VALUE))
        );

        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((screenSize.width-491)/2, (screenSize.height-381)/2, 491, 381);
    }// </editor-fold>                        

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        int portNumber = 2222;
        String host = "localhost";
        try {
            clientSocket = new Socket(host, portNumber);
           // System.out.println(clientSocket);
            System.out.println("connected");
            inputLine = new BufferedReader(new InputStreamReader(System.in));
            os = new PrintStream(clientSocket.getOutputStream());
            is = new DataInputStream(clientSocket.getInputStream());
            //"from @! to @! message@! type of msg";
            os.println(uname + " @! server @! " + uname + " @! iamonline");//@!@!
            this.setTitle("Talk to me: "+uname);

        } catch (UnknownHostException e) {
            System.err.println("Don't know about host " + host);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to the host "+ host);
        }

        if (clientSocket != null && os != null && is != null) {
            try {

              new Thread(new ClientGUI()).start();

            } catch (Exception e) {
                System.err.println("IOException:  " + e);
            }
        }        
    }                                        

    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {                                            
        String typeMsg = jTextField1.getText();//@!
        String selected = jList2.getSelectedValue().toString();
        //System.out.print("msg sent to: "+selected+" "+typeMsg);
        //os.println(uname + "@!" + selected + "@!" + typeMsg + "@!msg");
        String Quit="quit";
        //System.out.println(selected);                          
        if(Quit.equalsIgnoreCase(typeMsg.trim()))
        {os.println(uname + "@!" + selected + "@!" + typeMsg + "@!quit");
        System.out.print("oi quit vo re");
        jTextArea1.append(typeMsg);
        }
        else{
        os.println(uname + "@!" + selected + "@!" + typeMsg + "@!msg");
        //System.out.print("msg sent to: "+selected+" "+typeMsg);
        jTextArea1.append(typeMsg+"\n");
        }
        jTextField1.setText("");
    }                                           

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        String typeMsg = jTextField1.getText();//@!
        String selected = jList2.getSelectedValue().toString();
        String Quit="quit";
        //System.out.println(selected);                          
        if(Quit.equalsIgnoreCase(typeMsg.trim()))
        {os.println(uname + "@!" + selected + "@!" + typeMsg + "@!quit");
        System.out.print("oi quit vo re");
        jTextArea1.append(typeMsg);
        }
        else{
        os.println(uname + "@!" + selected + "@!" + typeMsg + "@!msg");
       // System.out.print("msg sent to: "+selected+" "+typeMsg);
        jTextArea1.append(typeMsg+"\n");
        }
        jTextField1.setText("");
    }                                        

    public static void main(String args[]) {

         System.out.println("lau main() vitra po chirecha ta.achamma hai:0)");

        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(ClientGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(ClientGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(ClientGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(ClientGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new ClientGUI().setVisible(true);
                System.out.println("lau yo ni printed lol");

            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JList jList2;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JTextField jTextField1;
    // End of variables declaration                   
String responseLine;
    @Override
    public  void run() {
        /*
         * Keep on reading from the socket till we receive "Bye" from the
         * server. Once we received that then we want to break.
         */
        System.out.println("aba yo print vayo hai");
//        String responseLine;
        try {
            while ((responseLine = is.readLine().trim()) != null) {
                String[] decodedResponseLine = responseLine.split("@!");

                if (decodedResponseLine.length == 4) {
                    if (decodedResponseLine[1].trim().equals(uname)) {
                        System.out.println("jkjlkjkljjjjjjjjjj"+java.awt.EventQueue.isDispatchThread());
                        jTextArea1.setText("aayooooooooo hai");
                        jLabel3.setText(decodedResponseLine[2].toString().trim());

                    }
                } else if (decodedResponseLine.length == 3) {
                    //jList1.
                } else if (decodedResponseLine.length == 5) {
                }

                java.awt.EventQueue.invokeLater(new Runnable() {
                public void run() {
                System.out.println("EDT running here "+java.awt.EventQueue.isDispatchThread());
                System.out.println("from invokelater");
                jTextArea1.append(responseLine);
                jLabel3.setText("suleman");
            }
        });
                System.out.println("jkjlkjkl"+java.awt.EventQueue.isDispatchThread());

                if (responseLine.indexOf("*** Bye") != -1) {
                    break;
                }
            }
            closed = true;
        } catch (IOException e) {
            System.err.println("IOException:  " + e);
        }
    }
} 
```

首先运行 Multithreadchatserver 类，然后运行welcomescreen。如果需要，以“a”用户名和“a”密码登录。我认为这行不通，因为我的日期库不在您的计算机中。

您能否告诉我，为什么我无法从 ClientGui.java 行号中的代码更新 JTextArea 和 JLabel。320 和 321。我将非常感谢任何帮助。提前致谢。上帝会祝福你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T09:19:54.547

问题出在 ClientGUI 类中。

第 193 行：

```
new Thread(new ClientGUI()).start() 
```

应该

```
new Thread(this).start() 
```

您的代码确实更新了 UI 组件，并且在 EDT 上正确地更新了一个不可见的新 ClientGUI，而不是已经显示的 ClientGUI。

# html - How to let width of a table depend on the td's width?

> ID：14009338
> 
> 赞同：0
> 
> 时间：2012-12-23T07:19:35.003
> 
> 标签：html, html-table, width

I have a table which has a inner table. I don't want to set the `table`'s width, but the `td`'s width:

```
<table border="1">
    <tr>
        <td width="200">left menus (200px)</td>
        <td>
            <table border="1" class="table-fixed" style="background-color:#ddd" >
                <tr>
                    <td width="2000">2000px</td>
                    <td width="2000">2000px</td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

You can see the inner table has two `td`s, the total width is `4000`, which is wider than the browser.

But in the browser, the table is automatically shrank to fit the browser. How to let the table displays by it's actual width ( 200+2000+2000 here ).

If I set the table's width as:

```
<table width="4200">
    ...
            <table width="4000">
    ...
</table> 
```

It will be displayed as I expected, but I don't want to. Since the columns of inner table are dynamic, I don't get the total width before running.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:24:59.623

You can use CSS min-width to force that.

[http://jsfiddle.net/kM6DQ/](http://jsfiddle.net/kM6DQ/)

```
<table border="1">
    <tr>
        <td width="200">left menus (200px)</td>
        <td>
            <table border="1" class="table-fixed" style="background-color:#ddd" >
                <tr>
                    <td class="wide">2000px</td>
                    <td class="wide">2000px</td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<style>
td.wide { width:2000px; min-width:2000px; }

</style> 
```

# python - 我可以使用 Ivy 发布目录吗？

> ID：14009339
> 
> 赞同：0
> 
> 时间：2012-12-23T07:19:38.313
> 
> 标签：python, ivy

我有一个 python 库，我想使用 Ivy 来管理我的私有库。

我的python lib文件结构如下：

```
mylib\
    __init__.py
    f1.py
    f2.py
    ... 
```

现在我想`mylib`作为一个整体发布，而不是一个文件一个文件。在 Ivy 中，我知道如何使用`artifact`标签发布一个文件。但是我怎样才能发布整个目录呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:33:59.603

目录的问题在于它不是很容易对其内容进行版本控制......这个问题的最常见解决方案是创建一个 tar 或 zip 包并将其发布到您的存储库。

使用该目录的第 3 方构建可以下载并解压缩它，或者使用[打包](http://ant.apache.org/ivy/history/latest-milestone/resolver/packager.html)程序解析器访问包内的文件。

[打包](http://ant.apache.org/ivy/history/latest-milestone/resolver/packager.html)解析器确实增加了一些复杂性，但它是 ivy的 一个非常强大的特性。[ivy 综述](http://code.google.com/p/ivyroundup/)是 ivy 存储库的一个示例，旨在保存打包程序文件，从而更容易使用通过普通存储库无法获得的工件。

最后，以下答案给出了[打包](http://ant.apache.org/ivy/history/latest-milestone/resolver/packager.html)解析器示例：

*   [gradle - 如何在 jar 中声明 jar 的依赖关系](https://stackoverflow.com/questions/3445696/gradle-how-to-declare-a-dependency-of-a-jar-in-a-jar/3454359#3454359)
*   [使用常春藤的问题](https://stackoverflow.com/questions/2876160/issues-using-ivy/2878131#2878131)
*   [ivy 对外部 JAR 的依赖](https://stackoverflow.com/questions/2987108/ivy-dependency-on-external-jar/7464028#7464028)
*   [用于 Git 或 TFS 的 Ivy 自定义解析器](https://stackoverflow.com/questions/9294996/ivy-custom-resolvers-for-git-or-tfs/9351126#9351126)
*   [Apache Ivy：解决嵌入在安装程序中的依赖项](https://stackoverflow.com/questions/908371/apache-ivy-resolving-dependencies-embedded-in-an-installer/2149883#2149883)

# php - 2个表单在一个页面中，从另一个表单获取值

> ID：14009344
> 
> 赞同：0
> 
> 时间：2012-12-23T07:20:18.747
> 
> 标签：php, html

我在一个页面中有 2 个 HTML 表单

```
<form action="my-page.php" method="post" id="savedata" name="savedata">
    <input class="text" name="myname" value="" type="text" />
    <input class="text" name="myaddress" value="" type="text" />
    <input type="submit" value="Save" />
</form>

<form action="my-page.php" method="post" id="previewdata" name="previewdata">
    <input type="submit" value="Preview" />
</form> 
```

第一个【savedata】点击【保存按钮】后将数据保存到MySQL

单击 [Preview Button] 后，第二个 [previewdata] 将预览（意味着仅使用 HTML 在页面中显示）数据

第二种形式如何从第一种形式中获取数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T07:23:43.973

作为使用 2 个不同表单的替代方法，您可以使用一个带有 2 个提交按钮的表单：

```
<form action="my-page.php" method="post">
    <input class="text" name="myname" value="" type="text" />
    <button type="submit" name="action" value="save">Save</button>
    <button type="submit" name="action" value="preview">Preview</button>
</form> 
```

现在在您的服务器端脚本中查找`$_POST["action"]`并采取相应措施。

同样在 HTML5 中[`formaction`](http://www.w3.org/TR/html-markup/button.submit.html#button.submit.attrs.formaction)，可以在提交按钮上指定属性以调用不同的服务器端脚本。

# excel - 有没有什么好方法可以将非连续数组作为连续的一维数组？

> ID：14009346
> 
> 赞同：0
> 
> 时间：2012-12-23T07:20:31.147
> 
> 标签：excel, vbscript, vba

只是出于好奇-有什么好方法可以将非连续数组制作为连续的一维数组？

说 Arr(9)=(2,5,,,,25,14,,) 到 Arr(4)=(2,5,25,14)

请指导

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:53:59.383

*   你首先如何填充你的数组？如果您没有将范围直接转换到数组中，那么您可能会验证空单元格并将其从那里删除，而不是在稍后阶段执行此操作。

这是一个基于循环的代码来删除空项目：

```
Dim Arr as Variant , vArr2 as Variant
Dim d as Object
Dim i as integer, j as integer

Set d = CreateObject("Scripting.Dictionary")

'-- populate data array
vArr(1) = "10"
vArr(2) = "55"
vArr(3) = ""
vArr(4) = "27"
vArr(5) = ""

j = 1
For i = LBound(vArr) To UBound(vArr)
    If vArr(i) <> "" Then
       d.Add vArr(i), j
       j = j + 1
    End If
Next i

'-- pass into a new array
vArr2 = d.Keys

'-- output into sheet
    Sheets(1).Range("B4").Resize(1, _
             UBound(Application.Transpose(d.Keys))) = d.Keys 
```

# android - 画布没有正确重绘

> ID：14009348
> 
> 赞同：1
> 
> 时间：2012-12-23T07:21:05.360
> 
> 标签：android

我正在编写一个简单的视图，它将显示一个点，经过一些操作后，显示下一个点。这些点位于垂直条上。所以我创建了一个可以清除条带的函数。然后在我想要点的位置画一个圆圈。代码段如下。

```
private void clear_strip(){
    paint.setColor(Color.BLACK);
    paint.setStyle(Paint.Style.FILL_AND_STROKE);
    m_canvas.drawRect( 0, 0,width/8, height, paint);
    paint.setColor(Color.GREEN);
}

private void set_dot(){
    clear_strip();
    m_canvas.drawCircle(width/10, (int) (font_height*(scoreboard.current_batter_position()+0.5))/1, font_height/4, paint);
}

@Override
protected void onDraw(Canvas canvas) {
    set_dot();
    canvas.drawBitmap(m_bitmap, 0, 0, paint);
} 
```

但其中一个点只是没有更新。它会保留旧点，跳过那个点，然后移动到下一个点。我试图在 drawCircle 调用之前将位置打印到 logcat，并且位置是正确的，它只是没有绘制（也没有清除）......请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:28:34.497

你得到一个画布来绘制传入你的`onDraw`方法。但是点绘图代码使用 canvas `m_canvas`。将画布作为参数传递给您的点绘图代码以解决该问题。

# android - org.json.JSONException：字符 550 处的预期文字值

> ID：14009352
> 
> 赞同：8
> 
> 时间：2012-12-23T07:21:23.067
> 
> 标签：android, jsonexception

我正在尝试从资产文件夹中读取 JSON 文件。但是我得到了以下异常
`org.json.JSONException: Expected literal value at character 550`
，我搜索了很多东西，但没有找到任何相关的东西。这是我的 JSON 文件。

我发现 550 上的 JSON 对象是`"names": ["Santosh","Sandip","Arvind"],`. 我正在尝试解决它，但不知道我的代码中发生了什么。
这是我的代码。

我也调试我的代码，但是当控制继续时，`JSONObject jsonObject = new JSONObject(text);`它会抛出异常并进入第一个 catch 块。
请给我任何参考或提示来解决这个问题。
任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-23T07:27:15.697

您的 JSON 无效。
你的 JSON 应该是这样的

```
{
    "resultCount": 3,
    "SearchedTerm": "Wada Pav",
    "results": [
        {
            "locationname": "Mahableshwar Hotel",
            "locationid": "12345",
            "locationaddress": "baner, Pune",
            "dishrating": "4",
            "dishname": "Wada Pav",
            "dishid": "234",
            "dishcategory": "Snacks",
            "dishnotes": "Spicy Wada Pav",
            "dishpreviewurl": "http://xxx.yyy.zzz/mahableshwar/1.jpg",
            "dishtotalvotes": "9999",
            "friendslistvoted": {
                "friendscount": "3",
                "names": [
                    "Santosh",
                    "Sandip",
                    "Arvind"
                ]
            },
            "dishimageurl": "http://xxx.yyy.zzz/mahableshwar/2.jpg",
            "mylastrating": "4"
        }
    ]
} 
```

在使用它之前尝试使用 JSON 验证器（如[JSLint](http://jsonlint.com/)）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-12T10:35:25.650

我正在使用以下内容来获取标准的 JSON 格式。这个更好。

```
 public static String convertStandardJSONString(String data_json) {
        data_json = data_json.replaceAll("\\\\r\\\\n", "");
        data_json = data_json.replace("\"{", "{");
        data_json = data_json.replace("}\",", "},");
        data_json = data_json.replace("}\"", "}");
        return data_json;
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-23T07:38:59.167

我使用`[jsoneditoronline](http://www.jsoneditoronline.org/)`效果很好的在线工具。

![在此处输入图像描述](../Images/486c19705dc060ff4bb7f033f1839e10.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-17T08:54:07.097

这对我有用

```
 public static String convertJSONString(String data) {
    data = data.replace("\\", "");
    return data; } 
```

# c - While 循环跳过 scanf 的条件。

> ID：14009353
> 
> 赞同：1
> 
> 时间：2012-12-23T07:21:24.503
> 
> 标签：c, loops, while-loop, char

我不明白为什么 While 循环会加快速度并跳过 char 的 scanf？它甚至不会询问我的意见，只是像没有明天一样循环。

```
#include <stdio.h>

int main()
{
    int number;
    int multiply, ans;
    char choice;

    printf("-------------------------------------");
    printf("\n      MULTIPLICATION TABLE           ");
    printf("\n-------------------------------------");

    do
    {

         printf("\nEnter an integer number:");
         scanf("%d", &number);

        printf("\nMultiplication of %d is :-\n", number);
        printf("\n");

        for(multiply=1; multiply<11; multiply++){
            ans = number * multiply;
            printf(" %d", ans);
        }

        printf("\n");
        printf("\nWould you like to continue? [Y] for Yes,[N] for no : ");
        scanf("%c", &choice);
        printf("\n");

    } 
    while(choice='Y');

    printf("Thank You");
    return 0; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T07:23:37.360

`scanf()`不做你认为的事情（换行符、缓冲等）。最好使用`fgetc()`：

```
choice = fgetc(stdin); 
```

出于同样的原因，您需要摆脱尾随换行符

```
scanf("%d", &number"); 
```

留在标准输入缓冲区中。要解决此问题，请插入

```
fgetc(stdin); 
```

在那个特定的调用之后`scanf()`.

此外，C 不是帕斯卡。相等比较运算符 - 和条件 - 您正在寻找的是

```
while (choice == 'Y') 
```

单个等式标记表示分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T07:23:08.073

我认为您需要在条件检查中使用`==`运算符进行比较：`while`

```
 while(choice=='Y'); 
```

目前您正在使用分配给变量的`=`运算符。`Y``choice`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T07:26:37.853

我已经很久没有用那种语言编程了，但乍一看，你有：

```
while(choice='Y'); 
```

代替：

```
while(choice=='Y'); 
```

== 比较，= 设置等于。因此，while 循环实际上并没有检查您要设置的条件。

# python - 无法在具有无限循环的 boost.python 模块中通过 Ctrl-c 终止进程

> ID：14009354
> 
> 赞同：3
> 
> 时间：2012-12-23T07:21:36.233
> 
> 标签：python, c++, boost-python

我制作了一个带有无限循环的 boost.python 模块。但是我无法通过 ctrl-c 终止该进程。以下是一个示例。

C++

```
#include <boost/python.hpp>
#include <boost/python.module.hpp>
#include <boost/python.def.hpp>
#include <iostream>
usring namespace boost::python;

void foo() {
   int it=0;
   while (true) {                     //endless loop
       ++it;
       std::cout<< it <<std::endl;
       sleep(3);
   }
}

BOOST_PYTHON_MODULE(ctopy)
{
    def("foo",foo);
} 
```

Python：

```
import ctopy
ctopy.foo() 
```

结果：

```
1
2
3
4
..................... 
```

我无法通过 Ctrl-c 终止前台进程。为什么模块不接受 Ctrl-c 发送的信号“SIGINT”。如何使其工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T08:53:43.390

您应该在扩展代码中定期调用[PyErr_CheckSignals()](http://docs.python.org/2/c-api/exceptions.html#PyErr_CheckSignals)`exit()`并在它返回时调用`-1`：

```
 while (true) { //endless loop
       ++it;
       std::cout<< it <<std::endl;
       sleep(3);
       if(PyErr_CheckSignals() == -1) {
           exit(1);
       }
   } 
```

# c# - 是否可以使用反射从构造函数中获取可选参数值？

> ID：14009359
> 
> 赞同：5
> 
> 时间：2012-12-23T07:22:43.990
> 
> 标签：c#, reflection

给定这样的类：

```
public abstract class SomeClass
  {
      private string _name;
      private int _someInt;
      private int _anotherInt;

      public SomeClass(string name, int someInt = 10, int anotherInt = 20)
      {
          _name = name;
          _someInt = someInt;
          _anotherInt = anotherInt;
      }
  } 
```

是否可以使用反射来获取可选参数的默认值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T07:37:57.317

让我们看一个基本程序：

```
class Program
{
    static void Main(string[] args)
    {
        Foo();
    }
    public static void Foo(int i = 5)
    {
        Console.WriteLine("hi"   +i);
    }
} 
```

并查看一些 IL 代码。

对于福：

```
.method public hidebysig static void  Foo([opt] int32 i) cil managed
{
  .param [1] = int32(0x00000005)
  // Code size       24 (0x18)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ldstr      "hi"
  IL_0006:  ldarg.0
  IL_0007:  box        [mscorlib]System.Int32
  IL_000c:  call       string [mscorlib]System.String::Concat(object,
                                                              object)
  IL_0011:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_0016:  nop
  IL_0017:  ret
} // end of method Program::Foo 
```

对于主要：

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       9 (0x9)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ldc.i4.5
  IL_0002:  call       void ConsoleApplication3.Program::Foo(int32)
  IL_0007:  nop
  IL_0008:  ret
} // end of method Program::Main 
```

*请注意， main 有 5 硬编码作为调用的一部分，并且在 Foo 中*。调用方法实际上是对可选值进行硬编码！该值同时存在于调用站点和被调用站点。

**您将能够使用以下表格获得可选值：**

`typeof(SomeClass).GetConstructor(new []{typeof(string),typeof(int),typeof(int)}) .GetParameters()[1].RawDefaultValue`

在 MSDN 上的 DefaultValue （在另一个答案中提到）：

*此属性仅在执行上下文中使用。在仅反射上下文中，请改用 RawDefaultValue 属性。[MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.parameterinfo.defaultvalue.aspx)*

最后是 POC：

```
static void Main(string[] args)
{
   var optionalParameterInformation = typeof(SomeClass).GetConstructor(new[] { typeof(string), typeof(int), typeof(int) })
   .GetParameters().Select(p => new {p.Name,  OptionalValue = p.RawDefaultValue});

   foreach (var p in optionalParameterInformation)
      Console.WriteLine(p.Name+":"+p.OptionalValue);

   Console.ReadKey();
} 
```

[http://bartdesmet.net/blogs/bart/archive/2008/10/31/c-4-0-feature-focus-part-1-optional-parameters.aspx](http://bartdesmet.net/blogs/bart/archive/2008/10/31/c-4-0-feature-focus-part-1-optional-parameters.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T07:29:32.683

`DefaultValue`的`ParameterInfo`类是你正在寻找的：

```
var defaultValues = typeof(SomeClass).GetConstructors()[0].GetParameters().Select(t => t.DefaultValue).ToList(); 
```

# c# - 使用加权值随机执行操作

> ID：14009360
> 
> 赞同：4
> 
> 时间：2012-12-23T07:23:01.417
> 
> 标签：c#, random

假设我有 5 个结果

```
Console.WriteLine("1");
Console.WriteLine("2");
Console.WriteLine("3");
Console.WriteLine("4");
Console.WriteLine("5"); 
```

我想使用权重随机执行上述操作之一，所以假设它们的权重从 100 开始。

它随机打印 1 并将其权重降低 5，使其权重为 95。

所以在这完成之后，权重按升序排列为 (95, 100, 100, 100, 100) 所以所有 100 个权重都有 5% 的机会被随机选择超过 95 但 95 仍然有机会被随机选择但不是和其他人一样多。

样本输出：（控制台输出）

```
1 (weight = 95)
3 (weight = 95)
1 (weight = 90)
5 (weight = 95)
1 (weight = 85)
2 (weight = 95) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:01:34.530

不知道为什么你会搞乱嵌套的 case 语句。

每次你需要生成一个新的随机数时，把你的权重加起来。

然后使用[`Random.Next(sumOfWeights)`](http://msdn.microsoft.com/en-us/library/zd1bc8e5.aspx).

然后将你返回的随机数与第一个权重、前两个权重之和、前三个权重之和等进行比较，直到小于。

那是你的选择。然后将该重量减少5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T08:02:04.497

这是一个简单的代码，如果我理解得很好，您需要什么，您可以使用它作为起点：

```
class Program
{
    static void Main(string[] args)
    {
        List<ActionWithChance> list = new List<ActionWithChance>()
                                          {
                                              new ActionWithChance("1", 100),
                                              new ActionWithChance("2", 100),
                                              new ActionWithChance("3", 100),
                                              new ActionWithChance("4", 100),
                                              new ActionWithChance("5", 100)
                                          };

        for (int i = 0; i < 10; i++)
        {
            RandomHandler.CreateIntervals(list);
            RandomHandler.GetRandom(list);
        }

    }
}

static class RandomHandler
{
   public static void CreateIntervals(List<ActionWithChance> list)
    {
        int currentBorderMin = 1;
        int currentBorderMax = 0;
        foreach (var actionWithChance in list)
        {
            actionWithChance.TempMin = currentBorderMin;
            actionWithChance.TempMax = currentBorderMax 
                              + actionWithChance.Chance;

            currentBorderMax = actionWithChance.TempMax;
            currentBorderMin = currentBorderMax;
        }
    }

    public static void GetRandom(List<ActionWithChance> list)
    {
        Thread.Sleep(20);
        int allChance = list.Sum(i => i.Chance);
        Random rand = new Random();
        int nextValue = rand.Next(1, allChance + 1);
        ActionWithChance selectedAction = 
list.FirstOrDefault(i => i.TempMin <= nextValue && i.TempMax >= nextValue);

        selectedAction.Chance = selectedAction.Chance > 5 
            ? selectedAction.Chance - 5 : 100;

        selectedAction.DoSomething();
    }
}

class ActionWithChance
{
    public string Name { get; set; }
    public int Chance { get; set; }
    public int TempMin { get; set; }
    public int TempMax { get; set; }

    public void DoSomething()
    {
        Console.WriteLine(Name);
    }

    public ActionWithChance(string name, int chance)
    {
        Name = name;
        Chance = chance;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T08:48:53.690

另一种方法：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Collections.Generic;

namespace RandomWeights
{
    public class WeightedItem
    {
        public string Text { get; set; }
        public int Weight { get; set; }

        public WeightedItem(string text, int weight)
        {
            Text = text; 
            Weight = weight;
        }
    }
    public class WeightedOutput
    {
        public static readonly int _decreaseIncrement = 5;
        List<WeightedItem> items = new System.Collections.Generic.List<WeightedItem>();

        public WeightedOutput()
        {
            //initialize the five items with weight = 100
            for (int i = 1; i <= 5; i++)
                items.Add(new WeightedItem(i.ToString(), 100));

            for (int x = 0; x < 50; x++)
                WriteSelected();

            Console.ReadLine();
        }

        public void WriteSelected()
        {
            WeightedItem selectedItem = GetItem();
            if (selectedItem != null)
                Console.WriteLine(selectedItem.Text + ": " + selectedItem.Weight);
            else
                Console.WriteLine("All items have 0 probability of getting selected");
        }

        public WeightedItem GetItem()
        {
            int totalWeight = items.Sum(x=>x.Weight);
            Random rnd = new Random((int)DateTime.Now.Ticks);
            int random = rnd.Next(0, totalWeight);

            WeightedItem selected = null;
            foreach (var item in items)
            {
                if (random < item.Weight && item.Weight > 0)
                {
                    //need a new item and not a reference to get the right weights
                    selected = new WeightedItem(item.Text, item.Weight);
                    //decrease item's weight
                    item.Weight -= _decreaseIncrement;
                    break;
                }

                random -= item.Weight;
            }
            return selected;
        }
    }
} 
```

# filepicker.io - Filepicker.io storeUrl mimetype

> ID：14009363
> 
> 赞同：0
> 
> 时间：2012-12-23T07:23:15.397
> 
> 标签：filepicker.io

storeUrl 似乎没有 mimetype；默认值似乎也是八位字节流；如何将其转换为 image/png 或某些图像？我尝试了 filepicker.convert，但得到了 142 错误。

PS进入调试模式，我得到这个网址： [https ://developers.filepicker.io/answers/jsErrors/142](https://developers.filepicker.io/answers/jsErrors/142)

不是很有帮助：/我认为这是在你的管道中。

谢谢！

# javascript - 通过单击按钮仅返回一个值

> ID：14009364
> 
> 赞同：3
> 
> 时间：2012-12-23T07:23:18.930
> 
> 标签：javascript, jquery

如何只返回我们点击的对象，而不是整个集合？

```
 $('[id^=opener]').click(function() {
     document.write($('[id^=opener]').find(this));
 }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T07:24:53.900

只需使用`$(this)`：

```
 $('[id^=opener]').click(function() {
     console.log($(this)); // this refers the target you clicked.
 }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T07:28:54.960

利用 ：    

```
 $('[id^=opener]').click(function() {
     console.log(this);
    event.stopPropagation();
 }); 
```

或者

```
$('[id^=opener]').click(function(event) {
    console.log(event.target);
    event.stopPropagation();
}); 
```

# ruby-on-rails - 为什么我的部分不能正确接收参数？

> ID：14009370
> 
> 赞同：2
> 
> 时间：2012-12-23T07:24:14.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view

渲染一个名为“成员”的部分时，它说错误

> #<#:0x000000095ec8c0> 的未定义局部变量或方法“用户”

为什么？？

我的代码是

**看法**

```
<% @users.each do |user| %>  
    <%= render 'member', :locals => {:user => user} %>      
<% end %> 
```

**部分的**

```
<div class="chapter">
  <p class="title">
    <%= user.user_profile.nickname %>(<%= user.username %>)
  </p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T07:28:41.753

你应该使用：

```
<%= render :partial => 'member', :locals => { :user => user } %> 
```

或者只是：

```
<%= render 'member', :user => user %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T08:09:41.143

我的建议是尽可能地遵守约定；如果你这样做，对你来说一切都会顺利得多。

如果你有一个`_user.html.erb`部分，你可以使用这个 rails 约定

```
<% @users.each do |user| %>
 <%= render user %>
<% end %> 
```

但你甚至可以缩短这个

```
<%= render @users %> 
```

嘘！

我强烈建议您查看[布局和渲染指南](http://guides.rubyonrails.org/layouts_and_rendering.html)

# javascript - 使用 Ant 连接 JavaScript 文件

> ID：14009371
> 
> 赞同：3
> 
> 时间：2012-12-23T07:24:26.310
> 
> 标签：javascript, ant

我有大约 50-60 个 js 文件，它们之间存在依赖关系，所以我需要在连接时保持顺序。在“files”属性中写入所有名称会使 build.xml 变得混乱，并且将来添加任何 js 文件都需要相应地添加。所以，我想将订单写在一个单独的 txt 文件中，然后按照该订单使用 Ant 复制内容。可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:51:25.593

您可以使用 做您想做的事情[`resourcelist`](http://ant.apache.org/manual/Types/resources.html#resourcelist)，例如：

```
<concat destfile="concatenated.js">
    <resourcelist>
        <file file="js.files.txt"/>
        <filterchain>
            <striplinecomments>
                <comment value="#"/>
            </striplinecomments>
        </filterchain>
    </resourcelist>
</concat> 
```

不是必需的[`filterchain`](http://ant.apache.org/manual/Types/filterchain.html)，但很有用，因为您可以在文件列表中包含注释行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T11:01:53.047

您可以使用与订单无关的声明，如下所示：

```
// in every file
if(!("myLib" in window))myLib = {};
if(!("canvas" in myLib))myLib.canvas = { .... };

//next file
if(!("myLib" in window))myLib = {};
myLib = $.extend(myLib, true, {
   init: function(){},
   move: function(){}
});
//in index
myLib.init(); 
```

# php - 显示最受欢迎的 QUERY_STRING

> ID：14009372
> 
> 赞同：1
> 
> 时间：2012-12-23T07:24:48.317
> 
> 标签：php, mysql

我有一个页面显示我的数据库中的数据。在用户看到数据之前，他们有几个选择框，因此他们可以选择以多种不同方式过滤数据，例如选择在特定时间段内显示数据。当我使用 get 方法时，url 看起来类似于下面的内容。

```
http://www.example/com?report=2&days=7&etc=2 
```

这一切都很好，用户可以过滤数据以获得他们想要的不同结果。我一直在查看我的分析帐户，可以看到某些查询比其他查询更受欢迎。我如何让用户知道哪些查询最受欢迎（例如，过去 24 小时内查看最多的查询）。目前我已经制作了一个手动 html 表，我会在早上根据 Analytics 数据进行更新。

例如

```
<table>
<tbody>
<tr><th>query</th><th>link</th></tr>
<tr><td>Show data from last 7 days</td><td><a href="http://www.example/com?report=2&days=7&etc=2">View</a></td></tr>
</tbody>
</table> 
```

我考虑过添加一个名为 count 的表，它有 id、query、timestamp 和 say

```
$a='report=';
$b=$_SERVER['QUERY_STRING'];
if($b == $a . $report['id'])
{}
else
{//Insert id, query, timestamp into the database} 
```

这样，我可以对具有附加排序参数的查询在特定时间段内进行计数。这是实现这一目标的最佳方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:32:14.830

我会多走一点，并考虑以下几点：

```
http://www.example/com?report=2&days=7&etc=2 
```

基本上是一样的：

```
http://www.example/com?report=2&etc=2&days=7 
```

关于它表达的内容，但是您提到的算法会将它们记录为2个不同的报告，因为它们`$_SERVER['QUERY_STRING'];`是不同的。

此外，从您的应用程序业务逻辑的角度来看，可能不会使用额外的参数，但会出现：

```
http://www.example/com?report=2&etc=2&days=7&utm_source=feed 
```

因此，我将对构成查询键的参数进行一些处理：

1.  按参数名称排序
2.  只考虑实际重要的参数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T07:40:54.670

创建一个存储 url 的查询部分和时间戳的表。它不需要其他字段，因为您将获得最新呼叫的运行总和。

然后得到类似的东西

```
select url, 
       count(*) as reqs 
  from queries 
 where ts > now() - interval 24 hour 
 group by url 
 order by reqs desc 
```

获取过去 24 小时内请求最多的网址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T08:13:08.373

我认为您应该创建一个带有时间戳、报告、天数等的表，并将它们用作键。

如果：

*   任何时候参数都可以通过 POST（表单）发送，它们不会出现在 url 中。

*   任何时候，其中一些可能来自 COOKIES 或其他来源，它们不会出现在 URL 中。

*   您决定向 URL 添加其他选项，这些选项可能会因页面而异，但不会修改显示的报告类型，例如样式选项，例如 &viewkind=2&colorset=3 或添加随机以使缓存无效，例如 &rnd=83732 或其他任何内容你可能会在未来做出决定。

*   像哈希 #name 这样添加到 url 的任何其他内容都可能会干扰（跳转到页面半底部的命名锚点将被视为不同的报告）

*   此外，伪造一个完整的 URL 来攻击您的数据库可能比伪造单个整数或字符串名称参数容易得多

*   您的网站也可能以不同的方式调用，从而使网址不同。前面带 www 或不带 www，如果安全则带 https。某些参数可能具有默认值，例如，未指定天数可能与天数 = 1 相同，因此报告可能相同但 URL 不同。

# google-chrome-extension - 每当我们使用crossrider单击浏览器的按钮（browserAction）时如何打开一个弹出窗口（popup.html）

> ID：14009375
> 
> 赞同：1
> 
> 时间：2012-12-23T07:25:13.540
> 
> 标签：google-chrome-extension, crossrider

我正在努力使用 crossrider 开发扩展。我已将 popup.html 文件添加到我的扩展程序的资源中，但是如何将其链接到浏览器按钮的 onclick 事件。我一直在尝试使用 appAPI.tabs.create('popup.html') 至少打开弹出文件一个新标签，但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:36:23.580

如果您已按如下方式注册[清单](https://developer.chrome.com/extensions/browserAction.html#manifest)，则无需将 popup.html 显式链接到浏览器按钮的 onclick 事件。

```
{
  "name": "My extension",
  ...
  "browser_action": {
    "default_title": "Google Mail",      // optional; shown in tooltip
    "default_popup": "popup.html"        // This registers to onclick event of browser icon
  },
  ...
} 
```

## 参考：

[浏览器动作](https://developer.chrome.com/extensions/browserAction.html)

如果您需要更多信息，请与我们联系。

# c# - 向上和向下键不触发 datagridview 单元格中的按键事件文本框

> ID：14009377
> 
> 赞同：1
> 
> 时间：2012-12-23T07:25:50.320
> 
> 标签：c#, winforms

我试图在datagridview单元格按键事件上弹出一个选择框。选择框弹出工作但向上和向下键没有触发我想在从datagridview单元格按下向上和向下键时向下和向上移动选择框数据

这些代码正在使用

```
 private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        DataGridView dttmp = (DataGridView)sender;
        csearch = "";
        var txtbox = e.Control as TextBox;
        if (txtbox != null)
        {
            txtbox.KeyPress -= new KeyPressEventHandler(textBoxPart_TextChanged);
            txtbox.KeyPress += new KeyPressEventHandler(textBoxPart_TextChanged);
            txtbox.Validating -= new CancelEventHandler(txtbox_Validating);
            txtbox.Validating += new CancelEventHandler(txtbox_Validating);
            txtbox.LostFocus += new EventHandler(txtbox_LostFocus);
        }
    }
 private void textBoxPart_TextChanged(object sender, KeyPressEventArgs e)
    {
        if (dataGridView1.CurrentCell.ColumnIndex == 1)
        {
            if (e.KeyChar == Convert.ToChar(Keys.Up))
            {
                if (srchbox.Rows.Count > 1)
                {
                    int curind = srchbox.CurrentRow.Index;
                    //srchbox.Rows[curind - 1].Selected = true;
                    if (curind - 1 >= 0)
                    {
                        srchbox.CurrentCell = srchbox.Rows[curind - 1].Cells[1];
                        srchbox.Refresh();
                    }
                }
                e.Handled = true;
            } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:30:03.603

请改用 keydown 或 keyup 事件。

[Control.KeyPress 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx)状态：

> 非字符键不会引发 KeyPress 事件；但是，非字符键确实会引发 KeyDown 和 KeyUp 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T07:50:58.540

尝试使用[`DataGridView.CellEnter`](http://msdn.microsoft.com/en-US/library/system.windows.forms.datagridview.cellenter.aspx)事件：

> 当控件中的当前单元格更改`DataGridView`或控件接收到输入焦点时发生。

或[`DataGridView.CellLeave`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellleave.aspx)事件

> 当单元格失去输入焦点并且不再是当前单元格时发生。

# jquery - 如何使用 jQuery 在移动设备上调整图像大小？

> ID：14009378
> 
> 赞同：3
> 
> 时间：2012-12-23T07:26:24.337
> 
> 标签：jquery, mobile-website

我正在开发一个移动网站，里面有一个 div 和图像，如下所示：

```
<div id="wrapper">
    <div id="content">My img tag here</div>
</div> 
```

我想知道，如何在任何手机/平板电脑上调整图像大小，而不用担心其分辨率、大小或方向。在这里，我正在寻找基于上述场景的最佳解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:29:09.650

您可以使用媒体查询根据方向提供 CSS 属性：

```
@media screen and (orientation:portrait) {
    img {
        // css attributes
    }
}

@media screen and (orientation:landscape) {
    img {
        // css attributes
    }
} 
```

或者您可以为屏幕宽度执行此操作：

```
@media screen and (max-width: 500px) {
    img {
        // css attributes
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T07:45:10.100

上述技术是最普遍的，但据我所知，所需的解决方案不应依赖于设备尺寸、屏幕分辨率或方向。

我只提到了两个聪明的解决方案，它们都没有在 CSS 上处理这项工作：

[https://github.com/adamdbradley/foresight.js](https://github.com/adamdbradley/foresight.js)

[http://adaptive-images.com/](http://adaptive-images.com/)

第二种解决方案很聪明，因为它捕获访问者设备的屏幕分辨率，自动创建缓存并提供最合适的嵌入 html`<img>`标记的图像大小。

**注意**：不过要提一下：这是依赖于服务器的解决方案，只能在 PHP 代码环境中使用。

...这是一个用于相同目的的 jquery 插件： [https ://github.com/teleject/hisrc](https://github.com/teleject/hisrc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T13:36:20.333

我找到了一个使用 jquery 的简单解决方案......

```
$(document).ready(function() {

    $width = $('#content').width();

    $('#content img').css({
        'max-width': $width,
        'height': 'auto'
    });
}); 
```

​</p>

# sql - 在 SQL Server 中创建 db 函数

> ID：14009383
> 
> 赞同：1
> 
> 时间：2012-12-23T07:27:33.873
> 
> 标签：sql, sql-server, sql-server-2008

请问我的解释有什么错误，需要创建一个表值函数。

```
CREATE FUNCTION [dbo].[RetrieveEntityParent] (@FK_EntityId int (max))

   with p as
    (SELECT     EntityId, FK_ParentId , EntityName ,EntityArabicName 
     FROM         OrgEntity
     WHERE OrgEntity.EntityId=14 

   UNION ALL      
    SELECT       PA.EntityId, PA.FK_ParentId, PA.EntityName,PA.EntityArabicName 
    FROM         OrgEntity as PA 
    inner join p
    ON p.FK_ParentId = PA.EntityId)

   SELECT * from p 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T07:30:38.823

[内联表值函数](http://msdn.microsoft.com/en-us/library/aa175924%28v=sql.80%29.aspx)的语法是：

```
CREATE FUNCTION [dbo].[RetrieveEntityParent] (@FK_EntityId int (max))
RETURNS TABLE
AS RETURN
    ... your query here ... 
```

# java - 很惊讶这个程序的 v1 编译但不是 v2。这是设计使然吗？如果是这样，为什么？

> ID：14009386
> 
> 赞同：0
> 
> 时间：2012-12-23T07:27:48.650
> 
> 标签：java, generics, inheritance, covariance

**第一个版本：**

```
public interface DeepCopyable<T>
{
  T deepCopy();
}

public interface Statement extends DeepCopyable<Statement>
{
}

public interface Expression
{
  Expression deepCopy(); // forgot I have an interface for this
}

public class Invocation implements Expression, Statement
{
  public final String Field;

  public Invocation(String field)
  {
    Field = field;
  }

  public Invocation deepCopy()
  {
    return new Invocation(Field);
  }
} 
```

**第二版，更新表达式接口：**

```
public interface Expression extends DeepCopyable<Expression>
{
} 
```

但现在我得到编译错误

```
Error: C:\temp\Invocation.java:1: DeepCopyable cannot be inherited with different arguments: <Expression> and <Statement> 
```

在返回类型不变的一般情况下，我可以理解此错误消息；但是，如果我两次使用返回类型 A 和 B 继承相同的接口，并且进一步，实现方法返回 C，其中 C 与 A 和 B 是协变的，这不应该是安全的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:01:00.570

在 Invocation 类中，您正在扩展两个接口 Expression 和 Statement，在您的代码的第二个版本中，您的 Expression 接口正在扩展 DeepcCopyable 接口，如下所示。

```
class Invocation implements Expression, Statement {...}

interface Statement extends DeepCopyable<Statement> {
}

interface Expression extends DeepCopyable<Expression> {
} 
```

在您的代码中，当您实现扩展到不同泛型的两个接口 Expression 和 Statement 时会发生什么，这里发生的情况是编译器对要考虑的内容感到困惑，因此它不允许您同时实现接口 Expression、Statement班级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T20:56:49.257

您不能使用不同的参数两次实现一个接口。这就是第二个版本的问题。

第一个版本的问题是它的两个接口都指定`deepCopy`了稍微不同的签名。但是，它实现的签名与它们都兼容，因此没有问题。

# javascript - WebGL 中的索引缓冲区？

> ID：14009388
> 
> 赞同：12
> 
> 时间：2012-12-23T07:28:02.763
> 
> 标签：javascript, html, graphics, opengl-es, webgl

我正在尝试学习一些 WebGL（来自本教程[http://learningwebgl.com/blog/?page_id=1217](http://learningwebgl.com/blog/?page_id=1217)）。我按照指南进行操作，现在我正在尝试实现自己的演示。我想创建一个图形对象，其中包含要出现在场景中的每个单独对象的缓冲区和数据。目前，我有一个位置顶点缓冲区、一个纹理坐标缓冲区和一个法线缓冲区。在本教程中，他使用了另一个缓冲区，即索引缓冲区，但仅适用于多维数据集。索引缓冲区的实际用途是什么？我应该实现它吗？它对多维数据集以外的任何东西有用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T11:29:21.193

对象的顶点由 3D 坐标系（[欧几里得坐标系](http://en.wikipedia.org/wiki/Euclidean_space)）中的位置定义。[因此，在您的 3D 坐标系通过光栅化过程](http://en.wikipedia.org/wiki/Rasterisation)投影到 2D 光栅（屏幕或某些目标图像）之后，您可以将每两个以下顶点与线连接起来。你会得到所谓的[线框](http://en.wikipedia.org/wiki/Wireframe_model)。

![立方体线框](../Images/73f40f018c09a541f061cb8dc46e8ad4.png)

线框的问题是它不明确。如果您以特定角度查看线框立方体，您无法说出立方体是如何精确旋转的。那是因为您需要使用[可见性算法](http://groups.csail.mit.edu/graphics/classes/6.838/S98/meetings/m23/alglist.html)来确定立方体的哪个部分更靠近观察者的位置（相机的位置）。

但是线本身不能定义表面，这是确定立方体的哪一侧更接近观察者所必需的。如何在计算机图形中定义曲面的最佳方法是多边形，确切地说是三角形（它对计算机图形有很多缺点）。

所以你现在有由三角形定义的立方体（所以称为三角形网格）。

![立方体三角形网格](../Images/ab7bb9a00bde4d87842b6b15e7613fae.png)

但是如何定义哪些顶点形成三角形呢？通过索引缓冲区。它包含顶点缓冲区的索引（包含您的顶点的列表），并告诉光栅化算法三个顶点形成三角形。有很多方法，如何解释索引缓冲区中的索引以减少相同顶点的重复（一个顶点可能是许多三角形的一部分），您可以在[有关图形基元的文章](http://openglbook.com/the-book/chapter-3-index-buffer-objects-and-primitive-types/)中找到一些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T09:11:43.630

从技术上讲，您不需要索引缓冲区。有两种渲染几何图形的方法，使用 [`glDrawArrays`](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glDrawArrays.xml)和[`glDrawElements`](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glDrawElements.xml)。`glDrawArrays`不使用索引缓冲区。您只需将顶点一个接一个地写入缓冲区，然后告诉 GL 如何处理这些元素。如果您`GL_TRIANGLES`在调用中使用 as 模式，则必须将三组数据（顶点、法线、...）放入缓冲区，因此当一个顶点被多次使用时，您必须将其多次添加到缓冲区中。

`glDrawElements`相反可以用来存储一个顶点一次，然后多次使用它。但是有一个问题，单个索引的参数集是固定的，所以当你有一个顶点时，你需要两个不同的法线（或另一个属性，如纹理坐标或颜色），你必须为每组属性存储它.

对于球体`glDrawElements`来说很有意义，因为参数匹配，但对于立方体，法线不同，正面需要与顶面不同的法线，但两个顶点的位置相同。您仍然必须将位置放入缓冲区两次。对于这种情况`glDrawArrays`是有道理的。

这取决于数据，哪个调用需要更少的数据，但`glDrawElements`更灵活（因为您始终可以`glDrawArrays`使用包含数字 0、1、2、3、4 ......的索引缓冲区进行模拟）。

# batch-file - 如何批量修改 MP4 视频文件的时间戳元数据

> ID：14009389
> 
> 赞同：3
> 
> 时间：2012-12-23T07:28:07.833
> 
> 标签：batch-file, timestamp, metadata, mp4, exiftool

我最近发现我的一台相机的内部时钟设置比实际日期/时间晚了近两年，这打乱了我图书馆时间轴中照片和视频的顺序。[我很快发现了日期/时间转换功能](https://ExifTool.org/#shift)`exiftool`的美妙的批量更新功能。然而不幸的是，它还不支持修改 MP4 视频文件：

```
$ exiftool -AllDates+="0:0:729 3:17:0" test.mp4
Error: Writing of MP4 files is not yet supported - test.mp4
    0 image files updated
    1 files weren't updated due to errors 
```

如何为 MP4 视频文件执行类似的批处理日期转换功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:28:07.833

基于[QuickTime 文件格式规范](http://developer.apple.com/library/mac/#documentation/QuickTime/QTFF/QTFFChap2/qtff2.html)，我整理了一个概念验证 Python 脚本，用于粗略地转换时间戳，让我现在可以通过：

```
#!/usr/bin/env python
import datetime
import sys

def int_bytes(raw):
    value = 0
    for byte in raw:
        value <<= 8
        value += ord(byte)
    return value

def bytes_int(value, size=4):
    raw = []
    for byte in range(size):
        raw.append(chr((value >> 8*byte) % 256))
    return ''.join(reversed(raw))

ATOM_FORMAT = (
    ('atom_size', 4, int_bytes),
    ('type', 4, str),
    ('version', 1, int_bytes),
    ('flags', 3, int_bytes),
    ('creation_time', 4, int_bytes),
    ('modification_time', 4, int_bytes),
    # that's all I need for now, and is common
    # between tkhd, mvhd and mdhd
    # ...
)

ATOM_TYPES = ('tkhd', 'mvhd', 'mdhd')

TIMESTAMP_EPOCH = datetime.datetime(1904, 1, 1, 0, 0)

def from_timestamp(timestamp):
    return TIMESTAMP_EPOCH + datetime.timedelta(0, timestamp)

def to_timestamp(datetime_obj):
    return int((datetime_obj - TIMESTAMP_EPOCH).total_seconds())

def shift_dates(mp4, atom_type, delta):
    # TODO: refactor
    mp4.seek(0)
    data = mp4.read() # TODO: don't load whole file
    type_index = -1
    while True:
        try:
            type_index = data.index(atom_type, type_index+1)
        except ValueError:
            if type_index < 0:
                raise RuntimeError('Cannot find atom: {}'.format(atom_type))
            else:
                break
        else:
            sys.stdout.write(
                '  Found {} at {}\n'.format(atom_type, type_index))
        offset = type_index - ATOM_FORMAT[0][1]

        header_data = {}
        offsets = {}
        for field, size, convert in ATOM_FORMAT:
            offsets[field] = offset
            offset += size
            header_data[field] = convert(data[offsets[field]:][:size])

        for field in ('creation_time', 'modification_time'):
            original = from_timestamp(header_data[field])
            shifted = original + delta
            mp4.seek(offsets[field])
            mp4.write(bytes_int(to_timestamp(shifted)))
            sys.stdout.write(
                '    {}: {} -> {}\n'.format(field, original, shifted))

if __name__ == '__main__':
    try:
        filename = sys.argv[1]
        days, seconds = map(int, sys.argv[2:])
    except (IndexError, TypeError, ValueError):
        sys.stderr.write(
            "USAGE: {} mp4_file days seconds\n".format(
                sys.argv[0]
            )
        )
        sys.exit(1)

    try:
        f = open(filename, 'rwb+')
    except IOError:
        sys.stderr.write("ERROR: cannot open {}\n".format(filename))
        sys.exit(1)
    else:
        delta = datetime.timedelta(days, seconds)
        sys.stdout.write(
            'Shifting timestamps of {} by {!r}:\n'.format(filename, delta))
        for atom_type in ATOM_TYPES:
            shift_dates(f, atom_type, delta)
        f.close()
        sys.stdout.write('Done.\n') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-13T20:10:37.930

ExifTool 现在能够编辑 MP4/MOV 视频文件中的时间戳和许多其他标签。但由于`AllDates`标签只编辑三个特定标签，其中两个不经常出现在视频文件中，因此上述命令很可能只编辑视频文件中的一个标签（参见[快捷方式标签名称页面](https://exiftool.org/TagNames/Shortcuts.html)`AllDates`上的注释） .

要编辑所有与时间相关的标签，可以使用以下命令：
`exiftool -Time:All+="0:0:729 3:17:0" test.mp4`

# jquery - JQuery 响应似乎什么也没返回

> ID：14009390
> 
> 赞同：1
> 
> 时间：2012-12-23T07:28:08.683
> 
> 标签：jquery, asp.net

嗨，我是一个问题，似乎帖子没有返回对 Jquery 的任何回复，有人能指出我的错误吗？我的 HTML

```
<head runat="server">
    <title>Untitle</title>

    <script src="./script/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="./script/jquery.masonry.min.js" type="text/javascript"></script>
    <script src="./script/missingkids.js" type="text/javascript"></script>
</head>

<body>
    <form id="form1" runat="server" method="post">
        <div>Call to JS and return <br />
            <div id="retnTxt">Return Info</div>
            <input type="button" id="btnCallJs" onclick="BtnCal()" value="CallJS" />
        </div>

    </form>
</body>
</html> 
```

我的 JS 失踪儿童

```
var rtnObj = null;
var ds_handler = "ds_handle.aspx";
function BtnCal()
{
    //alert("asdf");
    $.post(ds_handler,
        {"Action":"MainAct", "SubAction":"SubAct"},
             function(response)
             {
                alert(response); //no alert running here??
                rtnObj = response.Data

                $("#retnTxt").html(rtnObj);
             }, "json"); 

} 
```

我的句柄 aspx.cs

```
public partial class MissingKids_handle : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {

            if (Request.Form["Action"] == "MainAct")
            {
                if (Request.Form["SubAction"] == "SubAct")
                {

                    string ans = "Hello";
                    Response.Clear();
                    Response.Write(ans);
                    Response.End();
                }
            }
        }
    }
} 
```

我只想将值返回到 Return Info，但似乎不起作用。有人可以指出我的失误吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T00:45:04.383

替代答案（Musa's）并且**仅**基于您上面的代码：

您的“处理程序”返回 a `string`，而不是`JSON`：

1.  更改`$.post`to的最后一个参数`text`（因为那是你`ds_handle.aspx`返回的）。这应该使您的`alert`工作。

2.  但是，`rtnObj`将是`undefined`因为您的返回数据`response`不是 JSON（没有`response.Data`，返回的值是 a `string: Hello`。所以**仅**基于您上面的代码，它返回一个字符串，`$("#retnTxt").html(response);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T07:34:24.223

您可能在响应中收到错误消息。您使用的功能`$.post()`唯一响应成功。

尝试为`.error()`和添加函数`.complete()`：

```
$.post(...)
.error(function(){...})
.complete(function(){...}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T07:37:55.933

您的响应`Hello`不是 json，因此当 jQuery 尝试解析它时会出现错误，因此成功回调永远不会触发。为避免错误 json 编码您的响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T07:38:18.960

我认为，您只忘记了以下行中的分号：

```
rtnObj = response.Data 
```

问候，

# python - 在 Windows 上安装 theano 包

> ID：14009400
> 
> 赞同：0
> 
> 时间：2012-12-23T07:29:56.640
> 
> 标签：python, easy-install

我正在尝试在我的 Windows 机器上安装 theano 包。我似乎在通过键入以下命令安装 pip 时遇到问题：easy_install pip

python shell 抱怨：SyntaxError：pip 上的语法无效。

我正在尝试在 EPD 上安装它，并且在输入 easy_install pip 之前我已经导入了 numpy。我一直在使用以下指南： [http ://deeplearning.net/software/theano/install.html](http://deeplearning.net/software/theano/install.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:22:35.063

`easy_install`是一个程序，你应该从系统 shell 中运行，而不是从 Python 中运行。它通常位于 中`<your python folder>/Scripts/`，尽管我尚未验证 Enthought 发行版是否如此。

# sql-server - 存储过程中的全文搜索和作为查询的全文搜索之间的区别

> ID：14009402
> 
> 赞同：3
> 
> 时间：2012-12-23T07:30:04.067
> 
> 标签：sql-server, stored-procedures

我想在存储过程中使用全文搜索，但我不知道为什么在存储过程中搜索时的结果与作为查询执行时的结果如此不同。

这是查询：

```
SELECT 
       ItemRevisions.ItemId, ItemRevisions.NameSearch, 
       ItemRevisions.Phone, ItemRevisions.RevisionStateId 
    FROM
       ItemRevisions
    WHERE 
       ItemRevisions.CategoryId = '198' 
       AND CONTAINS(ItemRevisions.*, 'Viện') 
```

这是使用此查询的存储产品

```
ALTER PROCEDURE [dbo].[GetListPlaceByCategory]
    @categoryID int,
    @searchstring varchar(200)
AS
BEGIN
   SELECT 
      ItemRevisions.ItemId,
      ItemRevisions.NameSearch,
      ItemRevisions.Phone,
      ItemRevisions.RevisionStateId 
   FROM 
      ItemRevisions
   WHERE 
      ItemRevisions.CategoryId = @categoryID 
      AND CONTAINS(ItemRevisions.*,@searchstring)
END 
```

存储产品的输入是：`198 , "Viện"`

查询的结果是，`18`但存储过程是`3`。

# sql - 打印玩家和他（她）邻居的排名

> ID：14009410
> 
> 赞同：3
> 
> 时间：2012-12-23T07:31:42.900
> 
> 标签：sql, sql-server, database, tsql

有一个表格存储了每个玩家的最高得分：

```
select * from TMP_TABLE 
```

结果：

```
USERID     SCORE
---------- -----------
aaa         10
bbb         30
ccc         50
ddd         90
eee         80
fff         50
ggg         20
hhh         40
iii         50

(9 row(s) affected) 
```

好的，现在我想显示每个玩家的排名：

```
select *,r=rank() over(order by score desc) from TMP_TABLE 
```

结果

```
USERID     SCORE       r
---------- ----------- --------------------
ddd        90          1
eee        80          2
fff        50          3
ccc        50          3
iii        50          3
hhh        40          6
bbb        30          7
ggg        20          8
aaa        10          9

(9 row(s) affected) 
```

现在我想打印用户'bbb'的排名以及他（她）相邻玩家的姓名和分数，如下所示：

```
USERID     SCORE       r
---------- ----------- --------------------
hhh        40          6
bbb        30          7
ggg        20          8
(3 row(s) affected) 
```

但是，我无法弄清楚哪个查询语句显示了这个结果。当然，还要考虑处理性能。请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T07:40:31.083

如果你的`RDBMS`支持`Common Table Expression`，这是我的第一次尝试，

```
WITH ranking AS
(
  SELECT *,
         RANK() OVER (ORDER BY score DESC) userRank
  FROM   TableName  
)
SELECT *
FROM   ranking
WHERE  userRank BETWEEN
        (SELECT userRank - 1 FROM ranking WHERE userID = 'bbb') AND
        (SELECT userRank + 1 FROM ranking WHERE userID = 'bbb') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/e804d/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T10:30:54.390

另一种选择

```
;WITH cte AS
 (
  SELECT *,
         RANK() OVER(ORDER BY score DESC) AS r,
         CASE WHEN USERID = 'bbb' THEN RANK() OVER(ORDER BY score DESC) - 1 END AS bRank,
         CASE WHEN USERID = 'bbb' THEN RANK() OVER(ORDER BY score DESC) + 1 END AS eRank
  FROM dbo.TMP_TABLE
  )
  SELECT USERID, SCORE, r
  FROM cte c
  WHERE USERID = 'bbb' OR EXISTS (SELECT 1 FROM cte WHERE c.r BETWEEN bRank AND eRank) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/3f12a/1/0)上的演示[](http://sqlfiddle.com/#!3/3f12a/1/0)

 **当 hhh 和 bbb 相等时，可以使用最佳方式 DENSE_RANK

[**SQLFiddle**](http://sqlfiddle.com/#!3/1f30e/2/0)上的 DENSE_RANK 演示[](http://sqlfiddle.com/#!3/1f30e/2/0)**

# node.js - Express app.use

> ID：14009415
> 
> 赞同：6
> 
> 时间：2012-12-23T07:32:34.237
> 
> 标签：node.js, express

我一直在阅读文档/网址，但真的不了解 app.use 及其用法。我知道这是连接的一部分，但我真的不明白。

例子：

```
// ignore GET /favicon.ico
app.use(express.favicon());
// add req.session cookie support
app.use(express.cookieSession());
// do something with the session
app.use(count); 
```

你能解释一下这三个吗？他们是什么意思？这是否意味着基于 (1) app.use 注意到但 => app.get？app.use(count) 这个计数什么时候执行（或）调用/

看起来很基本，但没有得到答案

```
// ignore GET /favicon.ico
app.use(express.favicon());

// pass a secret to cookieParser() for signed cookies 
app.use(express.cookieParser('manny is cool'));

// add req.session cookie support
app.use(express.cookieSession());

// do something with the session
app.use(count);

// custom middleware
function count(req, res) { 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T07:41:11.427

当你调用 时`app.use()`，你传入一个函数来处理请求。当请求进来时，Express 会按顺序执行所有功能，直到请求被处理。

`express.favicon`是一个简单的函数，它在被请求时返回 favicon.ico。它实际上是如何开始使用这种模式的一个很好的例子。您可以通过查看源代码来查看源代码： `node_modules/express/node_modules/connect/lib/middleware/favicon.js`

`express.cookieSession`是用于支持会话数据的更多中间件，由 cookie 从客户端键入。

我不知道是什么`count`......那是你自己的代码吗？无论如何，如果不清楚，请告诉我。

# java - 使用 JInternalFrame 在客户端/服务器应用程序中创建聊天窗口

> ID：14009419
> 
> 赞同：5
> 
> 时间：2012-12-23T07:33:33.880
> 
> 标签：java, swing, jinternalframe, jdesktoppane

如何在 a 中使用`JInternalFrame`a `JFrame`？

我想创建一个客户端/服务器应用程序。我知道`JInternalFrame`应该使用它，`JDeskTopPane`但我想要一个可以在应用程序内移动的聊天窗口（就像在 Facebook 中聊天一样）。

1.  这个怎么用`JInternalFrame`？
2.  您是否为此建议任何其他 Swing 组件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T08:01:05.320

![在此处输入图像描述](../Images/56e329d5ed306cba3471f6b6e5d97d17.png)

这是您正在寻找的简短工作示例。代码：

```
public class NewJFrame extends javax.swing.JFrame {

public NewJFrame() {
    initComponents();
}

@SuppressWarnings("unchecked")
    private void initComponents() {

    jPanel1 = new javax.swing.JPanel();
    jInternalFrame1 = new javax.swing.JInternalFrame();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jInternalFrame1.setBackground(new java.awt.Color(0, 0, 204));
    jInternalFrame1.setBorder(javax.swing.BorderFactory.createMatteBorder(7, 7, 7, 7, new java.awt.Color(0, 0, 0)));
    jInternalFrame1.setTitle("This is JInternal Frame");
    jInternalFrame1.setVisible(true);

    javax.swing.GroupLayout jInternalFrame1Layout = new javax.swing.GroupLayout(jInternalFrame1.getContentPane());
    jInternalFrame1.getContentPane().setLayout(jInternalFrame1Layout);
    jInternalFrame1Layout.setHorizontalGroup(
        jInternalFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 386, Short.MAX_VALUE)
    );
    jInternalFrame1Layout.setVerticalGroup(
        jInternalFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 304, Short.MAX_VALUE)
    );

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jInternalFrame1)
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addComponent(jInternalFrame1)
            .addContainerGap())
    );

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
    );

    pack();
}
   public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new NewJFrame().setVisible(true);
        }
    });
 }

private javax.swing.JInternalFrame jInternalFrame1;
private javax.swing.JPanel jPanel1;

} 
```

有关更多信息，请参阅[*如何使用内部框架*](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)。

**编辑：**

PS-我得到了帮助`JPanel`。如果您希望随时隐藏组件，请使用`setVisible(false)`insted of `foo.setVisible(false)`。

# iphone - 如何使用 tbxml 遍历这个 xml

> ID：14009424
> 
> 赞同：0
> 
> 时间：2012-12-23T07:34:14.610
> 
> 标签：iphone, xml, tbxml

有人可以告诉我如何使用 tbxml 正确遍历给定的 xml 结构吗？我正在使用附加的代码进行 TBXML 解析。我能够获得 id 和 name 标签的值。但是该方法没有检测到标题和描述标签中的值。

```
-(void)traverseElement:(TBXMLElement *)element
{
 do
 {
    [TBXML iterateAttributesOfElement:element withBlock:^(TBXMLAttribute *attribute, NSString *name, NSString   *value) {
        NSLog(@"%@->%@ = %@",[TBXML elementName:element], name, value);
    }];

    if (element->firstChild)
        [self traverseElement:element->firstChild];
 }
while ((element = element->nextSibling)); 
```

}

xml结构是 -

```
 <allresponse>
  <responses>
      <response id="123" name ="myname1">
          <title> Some Title1 </title>
          <description>Some decription 1</description>
      </response>
      <response id="456" name ="myname2">
          <title> Some Title2 </title>
          <description>Some decription 2</description>
      </response>
   </responses>
</allresponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:29:48.480

好吧，我终于找到了我在这里缺少的东西。

```
TBXMLElement *title = [TBXML childElementNamed:@"title" parentElement:element];
            NSLog(@"Title is %@",[TBXML textForElement:title]);

TBXMLElement *description = [TBXML childElementNamed:@"description" parentElement:element];
            NSLog(@"Description is %@",[TBXML textForElement:description]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T17:45:35.580

您还可以从遍历所有元素的递归函数开始

```
- (void) traverseElement:(TBXMLElement *)element {

    do {
       if (element->firstChild)
          [self traverseElement:element->firstChild];

        //do whatever you think is useful to you here

     } while ((element = element->nextSibling));
} 
```

# jython - 添加python插件后无法运行netbeans IDE

> ID：14009428
> 
> 赞同：1
> 
> 时间：2012-12-23T07:34:53.147
> 
> 标签：jython, netbeans-7, netbeans-plugins

我将此[插件](https://techknowhow.library.emory.edu/blogs/sturnbu/2011/05/12/netbeans-7-and-python-ide)添加到我的 netbeans 7.2 IDE 中。然后，当我重新启动程序并尝试再次打开它时，它没有打开

如图所示

![NetBeans 加载页面](../Images/8b6da541020073de6ea4f43fe011457d.png)

我试图将我的 Windows 系统还原到以前的还原点，但问题仍然存在。

任何想法如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:55:38.363

我已经测试了他们建议您在 Netbeans 安装中添加的存储库。

但是确实参考了更多插件和功能安装，如果您在升级 NetBeansIDE 后添加此存储库，您会看到所有基本模块**都将被开发版本替换**，实际上您将安装另一个版本的 netbeans。

我建议您在不删除工作区的情况下卸载当前的 netbeans，然后重新安装直接从官方网站下载的 netbeans。

> *而且我建议您将来应该在测试环境中尝试非官方插件。在引入您的工作环境之前*

# c - 更改标准输出的文件位置指示器

> ID：14009429
> 
> 赞同：3
> 
> 时间：2012-12-23T07:34:58.003
> 
> 标签：c, stdout

我试图弄乱文件位置指示器并覆盖屏幕上已经存在的内容。

```
 #include <stdio.h>

    int main ()
    {
       fpos_t position;

       fgetpos (stdout, &position);
       fputs ("That is a sample",stdout);
       fsetpos (stdout, &position);
       fputs ("This",stdout);

       return 0;
    } 
```

我想要这个“这是一个样本”。我从[cplusplus.com](http://www.cplusplus.com/reference/cstdio/fsetpos/)获得了类似的代码，唯一的区别是它们使用的是实际文件而不是标准输出。标准输出是否有一些我不知道的特殊例外。

我以为我可以将标准输出视为文件。出于某种原因，我将其作为输出：`That is a sampleThisPress any key to continue . . .` 我真的很想知道为什么。 [这家伙](http://www.cplusplus.com/forum/beginner/73984/)甚至在 cplusplus.com 上问了同样的问题而没有回应

我知道 fseek 和 lseek ，如果它们有效，我可能会使用它们，但不管我想知道为什么上述方法不起作用。如果您有更好的方法，我愿意接受建议，但我仍然想知道我在这里做错了什么。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T11:05:52.547

如果您要实现的是将输出修改为屏幕，您可能需要查看 ncurses （或类似的东西）。

或者，如果你只是想要这样的东西（一个进度条，显示到目前为止完成的“总”工作中有多少“第 2 部分”）：

```
....
cout << part * 100 / total << "% done\r"; cout.flush();
.... 
```

\r 是“回车”，将光标移回行首，而不向下移动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T07:39:32.453

当指向 tty 风格的设备时，Stdout 没有文件位置的概念，想想过去的 tty 调制解调器等，一旦发送一个字符，它就会被发送。您可以发送一系列字符以在事件发生后重新定位光标并覆盖屏幕上的文本，但具体操作方式取决于输出设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T07:47:24.217

`stdout`如果重定向到文件，您的程序将正常工作。终端不可搜索，但磁盘文件和其他一些类型的流是可搜索的。

有一个系统调用库调用[`isatty(1)`](http://linux.die.net/man/3/isatty)，它被广泛支持。如果它返回 true，`stdout`则连接到类似终端的设备，并且不可搜索。如果为假，您通常可以依靠它工作。我以为有一个`isapipe()`电话，但我从未使用过它（只记得我记得在手册页中看到过），但现在我在任何地方都找不到它。管道也往往不可搜索（在大多数情况下）。

# php - 登录表单 - 无法使用 php 登录

> ID：14009431
> 
> 赞同：2
> 
> 时间：2012-12-23T07:35:46.003
> 
> 标签：php, mysql, login-script

我正在尝试使用以下代码编写登录脚本：

**一个 Jquery 片段**：

```
<script type="text/javascript">
$(function(){

$('div#login-button').click(function(){
            var email = $("#login_email").val();
            var password = $("#login_password").val();
            $.post("functions/login.php?email="+email+"&password="+password, {
            }, function(response){
                if($(response).html() == "correct")
                    window.location.href = "home.php";
                else window.alert($(response).html());
            });
});

});
</script> 
```

**HTML 代码**：

```
<div id="login-type-1">
            E-mail:<input type="text" id="login_email" name="email" value="Type your Email ID" class="input" maxlength="100"/><br />
            Password:<input type="password" id="login_password" name="password" value="password" class="input" maxlength="30"/>
        <a href="#"><div id="login-button"><span>Log in</span></div></a>
</div> 
```

**函数/login.php**：

```
<?php
    require_once('db.php');

        session_start();

        $email = $_REQUEST['email'];
        $password = $_REQUEST['password'];

        if(!$email || $email == "Type your Email ID")
            echo "<p>Please input your email id.</p>";
        if(!$password)
            echo "<p>Please input your password.</p>";

        if($email && $password && $email != "Type your Email ID"){
            $check = mysql_query("SELECT u_id, u_fname, u_lname, u_email FROM user_data WHERE u_password = '".md5($password)."' AND u_email = '".$email."'");
            $result = mysql_num_rows($check);
            if ($result == 1){

                $row = mysql_fetch_assoc($check);

                $_SESSION['u_id'] = $row['u_id'];
                $_SESSION['u_fname'] = $row['u_fname'];
                $_SESSION['u_lname'] = $row['u_lname'];
                $_SESSION['u_email'] = $row['u_email'];
                $_SESSION['u_name'] = $row['u_fname']." ".$row['u_lname'];

                echo "<p>correct</p>";

            }
            else {
                echo "<p>Invalid Authentication</p>";
            }
        }
?> 
```

**数据库连接：**

```
class db {
    public static $hostname_adminconn = "localhost";
    public static $database_adminconn = "masterdb";
    public static $username_adminconn = "root";
    public static $password_adminconn = "qwerty";
    public static $adminconn;

    public static function dbDb() {
        return db::$database_adminconn;
    }
    public static function dbConn() {
        return db::$adminconn;
    }
}
db::$adminconn = mysql_connect(db::$hostname_adminconn, db::$username_adminconn, db::$password_adminconn) or trigger_error(mysql_error(),E_USER_ERROR); 
```

尽管如此，我还是无法登录。有人可以帮我调试吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T07:39:18.743

你的 PHP 返回这个：

```
echo "<p>correct</p>"; 
```

但是 JavaScript 会对此进行检查：

```
if($(response).html() == "correct") 
```

这种比较是行不通的。

话虽如此，您应该返回更合适的响应类型，例如[`JSON`](http://www.json.org/)：

```
header('Content-Type: application/json');

echo json_encode(array(
    'res' => 'ok',
)); 
```

在您的 JavaScript 中：

```
if (response.res === 'ok') { 
```

# c++ - 带有 EDSDK 2.11 的佳能 t2i rebel 上的 EDS_ERR_NOT_SUPPORTED

> ID：14009433
> 
> 赞同：1
> 
> 时间：2012-12-23T07:36:24.017
> 
> 标签：c++, edsdk

想知道是否有人遇到过这个问题或者可能知道如何解决......当我调用 EdsOpenSession（相机）时，我在带有 EDSDK 2.11 的佳能 t2i rebel 上得到了 EDS_ERR_NOT_SUPPORTED。

奇怪的是，我有随 SDK 一起提供的示例代码，它可以正常编译和运行，并且可以很好地与我的相机接口。我编写的所有代码都是从原始工作示例中复制的相关行的简单框架，我现在正用头撞墙。我的代码，最小化没有错误通知如下：

```
EdsError     err = EDS_ERR_OK;
EdsCameraListRef cameraList = NULL;
EdsCameraRef camera = NULL;
EdsUInt32    count = 0; 

EdsInitializeSDK();
EdsGetCameraList(&cameraList);
EdsGetChildCount(cameraList, &count);
EdsGetChildAtIndex(cameraList , 0 , &camera);   

EdsDeviceInfo deviceInfo;
EdsGetDeviceInfo(camera , &deviceInfo); 
EdsRelease(cameraList);

err=EdsOpenSession(camera);
//err returns EDS_ERR_NOT_SUPPORTED here 
```

此示例也符合 Canon SDK 文档。

# javascript - 在 KineticJS 中按类名从阶段获取多个对象

> ID：14009448
> 
> 赞同：6
> 
> 时间：2012-12-23T07:39:29.397
> 
> 标签：javascript, jquery, html, canvas, kineticjs

我正在`Kinetic.js`为 HTML5 画布使用 JavaScript 库。这是`stage.get()`从舞台（画布）获取对象的方法。我已经为每个对象分配了 id 或类名

如果我通过 id 获取对象，`var obj = stage.get('#obj_id')`它可以工作，但是如果尝试通过类名获取多个对象，`var objs = stage.get('.obj_class_name')`它将返回一个空 `[]`对象

如何从 stage 获取多个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:03:00.733

好吧，您可以只执行 .getChildren() 来获取所有子项，然后使用循环和条件遍历数组以添加您创建的新数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T15:55:21.883

您可以使用该`name`属性。它`class`在 HTML 中工作。使用舞台/图层功能`find('.<name>')`选择所有具有名称的元素`<name>`（点是必需的）。

# java - 如何将元素编组到 JAXB Axis2 响应对象

> ID：14009454
> 
> 赞同：2
> 
> 时间：2012-12-23T07:41:23.940
> 
> 标签：java, jaxb, axis2, saml

我正在使用带有 JAXB 数据绑定的 Axis2 wsdl2java 来为返回 SAML 断言的 Web 服务创建响应对象。如您所料，响应对象是使用特定于 SAML 断言模式的数据类型生成的。但是，我正在与之集成的生成断言的系统和 SDK 将其作为 org.w3c.dom.Element 返回。

（所以流程是服务消费者 -> 我的 Web 服务 -> SAML 身份提供者 -（将断言作为元素返回）-> 将断言返回给消费者）

我的问题是如何将断言从元素编组到 Axis2 响应对象，而不必手动映射每个元素和属性？虽然我确信它可以工作，但它似乎很脆弱并且容易出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:25:01.963

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现是按异常配置的，这意味着您只需在需要 XML 表示不同于基于 Java 类的默认值的地方添加注释。

*   [http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html](http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html)

`unmarshal`JAXB 为来自许多不同来源的（XML 到对象）提供 API 。您可以使用以下方法之一从[`javax.xml.bind.Unmarshaller`](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html).

*   [`unmarshal(org.w3c.dom.Node)`](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html#unmarshal%28org.w3c.dom.Node%29)
*   [`unmarshal(javax.xml.transform.Source, Class)`](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html#unmarshal%28javax.xml.transform.Source,%20java.lang.Class%29)并给它一个实例[`javax.xml.transform.dom.DOMSource`](http://docs.oracle.com/javase/6/docs/api/javax/xml/transform/dom/DOMSource.html)

# ios - 如何在 ios 中打开一个 sqlite 文件进行阅读而不复制到文档？

> ID：14009457
> 
> 赞同：0
> 
> 时间：2012-12-23T07:42:30.443
> 
> 标签：ios, ipad, cocoa-touch, sqlite

我有一个正在开发的应用程序，它使用来自 sqlite 数据库的静态数据来做各种事情，虽然我只需要对数据库的只读访问权限，但取决于他们从第一个屏幕选择的情节，我希望它使用不同的数据库文件，我希望可用剧集的列表可以即时更新。我得到了更新可用剧集列表的帮助，并将正确的内容下载并存储在单独的文件夹中，所以我知道我可以在选择剧集时删除文档文件夹中的 sql 文件并每次复制新的这对于我正在尝试做的事情来说已经足够好了。但是检查文件、删除文件、复制新文件似乎有点额外的工作。然后每次用户想要选择不同的剧集时从那里打开它。我不

所以我的问题是：我是否可以至少获得对我下载的 sql 文件（或用于测试的捆绑包中的一个）的只读访问权限，而不必先将其复制到文档中？如果是这样，我将如何打开文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:08:50.650

> 我是否可以至少获得对已下载的 SQL 文件（或用于测试的捆绑包中的一个）的只读访问权限，而无需先将其复制到文档目录？

是的。应用程序包中的文件是可读的（如果不是，则将文件存储在包中没有意义）。

> 如果是这样，我将如何打开文件？

不清楚你在这里问什么 - 如果你想对文件执行 SQL 查询，你应该使用`sqlite3`iOS 上可用的库。

# android - Android - 显示选定的共享选项

> ID：14009459
> 
> 赞同：0
> 
> 时间：2012-12-23T07:43:18.150
> 
> 标签：android, android-intent, share

我想问我如何才能在弹出共享菜单中只显示选定的共享选项，而不是在弹出菜单中显示所有可用选项。（以编程方式）

谢谢。

# algorithm - 如何找到在 x 时间运行的最大任务？

> ID：14009465
> 
> 赞同：1
> 
> 时间：2012-12-23T07:46:08.417
> 
> 标签：algorithm

问题描述如下：

特定日期 d 有 n 个事件，具有开始时间和持续时间。例子：

```
e1 10:15:06 11ms (ms = milli seconds)
e2 10:16:07 12ms
...... 
```

我需要找出时间x和n。其中 x 是执行最大事件的时间。

**我在想的解决方案是：** 在第 d 天扫描所有毫秒。但是该请求总共计算了 86400000*n。例子

```
Check at 00::00::00::001 How many events are running
Check at 00::00::00::002 How many events are running
Take max of Range(00::00::00::01,00::00::00::00) 
```

**我想的第二个解决方案是：**

```
For eventi in all events
   Set running_event=1
   eventj in all events Where eventj!=eventi
        if eventj.start_time in Range (eventi.start_time,eventi.execution_time)
           running_event++ 
```

然后取最大的 running_event

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:59:00.870

这个可以及时解决`O(n log n)`：

*   制作所有事件的数组。该数组已经部分排序：`O(n)`
*   对数组进行排序：`O(n log n)`; 您的图书馆应该能够利用部分排序（[timSort](http://en.wikipedia.org/wiki/Timsort)做得很好）；研究[基于分布的排序算法](http://en.wikipedia.org/wiki/Spreadsort)以获得更好的预期运行时间。
    *   按边界时间升序对事件边界进行排序
    *   如果触摸间隔被认为不重叠，排序事件在排序开始之前结束（如果触摸间隔被认为重叠，排序事件在排序开始后结束）
*   初始化`running`= 0, `running_best`= 0, `best_at`= 0
*   对于每个事件边界：
    *   如果是事件的开始，则递增`running`
    *   如果`running > running_best`, 设置`best_at`= 当前事件时间
    *   如果是事件的结束，则递减`running`
*   输出`best_at`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T07:58:34.863

您可以通过仅检查所有间隔的结束来减少检查的点数，对于从到`I`持续的每个间隔（任务） ，您只需要检查有多少任务正在运行（假设任务从到包含，如果是独占的，请检查.`t1``t2``t1``t2``t1``t2``t1-EPSILON, t1+EPSILON, t2-EPSILON, T2+EPSILON`

很容易看出（说服自己为什么），如果这些案例没有涵盖，您将无法得到更好的结果。

**例子：**

```
tasks run in `[0.5,1.5],[0,1.2],[1,3]`
candidates: 0,0.5,1,1.2,1.5,3
0 -> 1 tasks
0.5 -> 2 tasks
1 -> 3 tasks
1.2 -> 3 tasks (assuming inclusive, end of interval)
1.5 -> 2 tasks (assuming inclusive, end of interval)
3 -> 1 task (assuming inclusive, end of interval) 
```

# android - Android - 测量通过意图打开活动和收到结果之间的时间

> ID：14009466
> 
> 赞同：1
> 
> 时间：2012-12-23T07:46:24.060
> 
> 标签：android, qr-code, zxing, nanotime

我有一个简单的应用程序，可以打开 ZXing 的条形码扫描仪应用程序。

现在，我想知道完成一次扫描需要多少时间。基本上是从意图启动到获得结果的时间。现在，我知道这很简单，只需在执行意图时放置一个 nanoTime 对象，当我得到结果时放置另一个 nanoTime，将两者相减并相乘以秒/毫秒为单位。

但是，我有循环的意图，因为我想扫描一系列二维码，我认为 for 循环是最好的方法。

所以我有几个全局时间变量long start、end、time；

这是意图的代码：

```
//Multi Scan Button
public Button.OnClickListener onMultiScan = new Button.OnClickListener() {
    public void onClick(View v) {

        //start = System.nanoTime();

        for(int i = 0 ; i < 5 ; i++){
            Intent intent = new Intent("com.google.zxing.client.android.SCAN");
            intent.setPackage("com.google.zxing.client.android");
            intent.putExtra("SCAN_MODE", "QR_CODE_MODE");

            //start = System.nanoTime();                

            startActivityForResult(intent, multiScan);

            }

    }
}; 
```

这是获取输入的代码。

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    //ordinary scan
    if (requestCode == ordinaryScan) {

        if (resultCode == RESULT_OK) {

            end = System.nanoTime();
            time = (end - start) / 1000000;
            System.out.println("Time" + " " + /*i +  +*/ time);

            String contents = data.getStringExtra("SCAN_RESULT");
            Toast.makeText(getApplicationContext(), contents, Toast.LENGTH_SHORT).show();

        }

        else if (resultCode == RESULT_CANCELED) {
            // Handle cancel
        }
    }

    //multiple scan
    if (requestCode == multiScan) {
        end = System.nanoTime();
        time = (end - start) / 1000000;
        System.out.println("Time" + " " + /*i +  +*/ time);

        if (resultCode == RESULT_OK) {
            String content = data.getStringExtra("SCAN_RESULT");
            //codes = codes + contents + " ";
            inputs[counter] = content;
            counter += 1;

            if(counter == 5){
                //output();
                verify();
            }

        }

        else if (resultCode == RESULT_CANCELED) {
            // Handle cancel
        }
    }
 } 
```

我注释掉了我启动计时器的部分，因为我不确定将它们放在哪里。发生的情况是，如果我在循环之前调用它，我只会得到一个结果，如果我把它放在循环内，我会得到多个彼此相距不远的结果。

如果仅调用一次，则获取意图完成所需的时间很容易，但如果在循环中多次调用它，则变得很棘手。

那么，有没有办法适当地花费意图打开并获得结果所需的时间？我愿意接受建议，即使这意味着重写我多次调用活动的方式（我目前正在使用循环）。

我还希望能够在扫描代码后立即获得时间，这样我就知道活动调用和活动结果之间的时间。我不想在每次通话完成之前等待每个通话完成。我要实时更新。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:06:02.300

如果您仍想使用循环，一种可能的方法是不使用单个多扫描请求代码，而是为循环的每次运行使用一个。

就像是`startActivityForResult(intent, MULTISCAN_BASE + i);`

通过这种方式，您将能够单独跟踪所有运行，因为您将能够识别结果指的是哪个运行：

```
i = requestCode - MULTISCAN_BASE 
```

最后一步是将您的开始时间放入一个数组中，每个循环循环一个。

```
int[] start = new int[5]; 
```

检查何时完成并获得时间的总和是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T03:19:09.020

好的，找到了让它工作的方法。老实说，这有点不完善，但它可以实时工作和更新。基本概念是有一个 multiScan requestCode，每次它给出在 onActivityResult 方法中处理的结果时都会递增。然后有一个 if 语句检查 multiScan requestCode 是否已达到所需的最大迭代次数。

所以这里是全局变量：

```
int multiScan = 1;
int multiScanBase = 1;
long start, end, time; 
```

然后`multiScanButton`看起来像：

```
//Multi Scan Button
public Button.OnClickListener onMultiScan = new Button.OnClickListener() {
    public void onClick(View v) {

        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.setPackage("com.google.zxing.client.android");
        intent.putExtra("SCAN_MODE", "QR_CODE_MODE");

        start = System.nanoTime();
        startActivityForResult(intent, multiScan);

    }
}; 
```

然后该`onActivityResult`方法将如下所示：

```
//multiple scan
if (requestCode < multiScanBase + 5 ) {
        end = System.nanoTime();

        time = (end - start) / 1000000;
        System.out.println("Request Code = " + multiScan);

        System.out.println("Time" + " " + /*i +  +*/ time);

        if (resultCode == RESULT_OK) {
            String content = data.getStringExtra("SCAN_RESULT");
            //codes = codes + contents + " ";
            inputs[counter] = content;
            counter += 1;

            if(counter == 5){
                //output();
                verify();
            }

        }   
        else if (resultCode == RESULT_CANCELED) {
            // Handle cancel
        }

            //This is the part where I check for the requestCode
            //In this example, I wanted to iterate the activity 5 times
            //So if the request code is still less than the base + number of iterations
            //Increment the multiScan requestCode and run the method again
            //In this way, the time for each scan is given in real time
        if(requestCode < multiScanBase + 5){
            multiScan += 1;
            Intent intent = new Intent("com.google.zxing.client.android.SCAN");
            intent.setPackage("com.google.zxing.client.android");
            intent.putExtra("SCAN_MODE", "QR_CODE_MODE");

            startActivityForResult(intent, multiScan);

        }
 } 
```

所以在那里。该代码对我有用，并且更新是实时给出的。感谢您提供有关如何执行此操作的想法。

大家圣诞快乐。

# android - 如何更新列表视图项目单元格？

> ID：14009468
> 
> 赞同：0
> 
> 时间：2012-12-23T07:47:26.467
> 
> 标签：android, android-layout

我在更新 android listview 项目单元格时遇到问题。

listview_item.xml 是一个普通的列表视图项，只是它在底部有一个隐藏面板。所以 listview_item.xml 的最后一部分是 LinearLayout，里面有另一个按钮。这整个布局设置为消失，直到用户单击列表项中的可见按钮。这会将隐藏的 LinearLayout 设置为可见并显示。到目前为止，一切都很好。现在隐藏的 LinearLayout 已打开，并且正在显示，我想将其关闭。因此，我单击了这个先前隐藏的线性布局内的按钮，并将可见性设置为 GONE，这是其先前的状态。结果是什么都没有立即发生。面板保持打开状态，直到我将其滚动出站点并再次返回。然后它不再显示。对不起，我没有要发布的代码，但这就是全部情况。我只是无法当场刷新列表项。使用可见按钮打开工作正常。但是从面板中的按钮关闭同一个面板似乎什么都不做。我已经尝试从适配器内部运行 dataSetChanged() 等，但只有滚动到视图中才会关闭面板。有谁知道为什么关闭与打开不同？为什么我会立即对设置为可见而不是其他方式做出反应。似乎唯一的区别是我从先前隐藏的面板上的按钮触发事件。对不起，它罗嗦，但目前没有代码在我面前。有谁知道为什么关闭与打开不同？为什么我会立即对设置为可见而不是其他方式做出反应。似乎唯一的区别是我从先前隐藏的面板上的按钮触发事件。对不起，它罗嗦，但目前没有代码在我面前。有谁知道为什么关闭与打开不同？为什么我会立即对设置为可见而不是其他方式做出反应。似乎唯一的区别是我从先前隐藏的面板上的按钮触发事件。对不起，它罗嗦，但目前没有代码在我面前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:54:38.773

我认为这里没有人可以在没有代码的情况下帮助您。`notifyDataSetChaged()`是必须帮助你的方法，但如果不是 - 很明显你做错了什么。您必须保存与此列表项对象（或模型）关联的每个列表项的元素的可见性状态。再次检查您的代码并进行调试。

# html - 如何在Struts2中并排排列两个按钮

> ID：14009470
> 
> 赞同：1
> 
> 时间：2012-12-23T07:48:12.353
> 
> 标签：html, css, struts2

我正在 struts2 上开发网页 如果我在 Struts2 中设置了正确的主题，则所有标签最终都将位于表格内，因此所有标签将在另一个下方对齐。

在我的网页中，我有带有提交和重置按钮的登录页面，我希望两者并排（彼此相邻）而不是单独的一行。我尝试谷歌搜索，我得到了一些答案 `{ display : inline; }`，比如 CSS 和`{ position : float}`表单`theme="simple"`。没有任何效果

```
<table><tr><td><s:submit method="CheckUser" value="Login" align="center" /></td><td><s:reset value="Clear" align="center" /></td></tr> 
```

如果我设置，我会根据需要获得 2 个按钮（提交 + 重置），但尽管`label="User Id"`给出了我只得到没有标签的文本字段

```
<tr><td><s:textfield name="userid" label="User Id" size="25" /></td></tr>
<tr><td><s:password name="password" label="Password" size="25" /></td></tr> 
```

请建议我哪里出了问题以及如何将标签与文本字段并排提交

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:09:24.877

只需保留默认`xhtml`的 Struts2 主题，顺便说一下，只需更改您的`<s:submit>`and`<s:reset>`标记添加到它们`theme`的属性 value `simple`。

```
<s:form>
  ... 
  <tr>
    <td colspan="2">
      <s:submit value="Login" theme="simple"/>
      <s:reset value="Clear" theme="simple"/>
    </td>
  </tr> 
</s:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:46:22.120

在 struts.xml 中将主题设置为简单

```
<struts>
   ...
   <constant name="struts.ui.theme" value="simple" />
   ...
<struts> 
```

现在一切都会如您所愿。

如果您不希望简单成为默认值（页面和每个标签很常见），主题也可以以其他方式限定范围，请参见此处：[http ://struts.apache.org/2.3.8/docs/selecting-主题.html](http://struts.apache.org/2.3.8/docs/selecting-themes.html)

# objective-c - 在 Objective C 中使用 sysctl 获取所有 tcp/udp 连接

> ID：14009471
> 
> 赞同：0
> 
> 时间：2012-12-23T07:48:19.383
> 
> 标签：objective-c, tcp, netstat, sysctl

正如我们所知，要获得所有 tcp 连接，我们可以使用带有“net.inet.tcp.pcblist”作为 MIB 变量的 sysctl。但它的输出是二进制数据，必须转换为描述 IP 地址、活动端口和连接状态的人类可读上下文. Netstat 程序可以完成这项工作，但我无法意识到这一点。任何人都可以提供一个类似于 netsat 但在目标 C 中的简单代码？提前致谢！

# performance - 如何让这些嵌套的 for 循环更高效？

> ID：14009473
> 
> 赞同：0
> 
> 时间：2012-12-23T07:48:36.053
> 
> 标签：performance, optimization, for-loop, python-2.7

我有两个清单：

> > 1.  活动交换 = []
> > 2.  活跃库存 = []

我的代码本质上是非常连续的，我正在尝试优化它：

```
for exchange in ActiveExchange:
    for stock in Activestock:
        ...
        ...
        ... 
```

但是，由于 for 循环，它似乎效率很低。我该怎么做才能让它更有效地运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T03:25:45.393

C/C++ 和 Python 具有行优先数组。如果您正在单步执行数组、列表、向量等，请务必执行以下操作：

```
for i in range(25):
  for j in range(25):
    A[j][i] *= 1 
```

而不是：

```
for i in range(25):
  for j in range(25):
    A[i][j] *= 1 
```

这可以在性能上产生 3-6 倍的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T08:00:16.660

1.  它只是看起来效率低下，还是您运行它并且花费了太长时间？如果您只是认为它效率低下 - 测试它。并且不要优化不存在的问题。你可以更有效地利用你的时间。

其他任何事情都将视情况而定。喜欢：

1.  如果您在 ActiveStack 中为 ActiveExchange 中的每个元素搜索一个或两个项目，请将 ActiveStack 设为哈希。
2.  如果您有 if 语句，并且该语句仅依赖于一个变量，请将其设为外部变量。这样你就可以优化分支预测。这可以由编译器自动完成。
3.  如果您想操作/读取所有对 - 您无法优化它。

# url - 如何完成这种特定的 url 重写

> ID：14009476
> 
> 赞同：-1
> 
> 时间：2012-12-23T07:49:24.853
> 
> 标签：url, mod-rewrite

我有一个网站，以下两个 URL 都转到同一页面。

```
www.mydomain.com/pd/Children_Products/Toys/1/
www.mydomain.com/pd/Children_Products/Toys_/1/ 
```

第一个网址有`Toys`，第二个有`Toys_`。

这对搜索引擎不利。我希望在访问第二个 URL 时，返回 404 not found 页面，或者只是重定向到第一个 URL。

我不是在寻找这个特定 url 的解决方案，而是在我的站点中针对不同目录发生这种情况的所有此类实例。

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:27:21.757

您应该提供有关您的设置的更多详细信息。你使用 Apache HTTPD 吗？您的页面中是否包含某种代码，例如 PHP？

您可以查看[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)，它可以使用匹配`_`URL 中任何内容的正则表达式进行配置。例如：

```
RewriteEngine On
RewriteRule ^(.*)_/(.*)$ /$1/$2 [R] 
```

# c - 如何使用 c 获取使用 dd 命令创建的文件的大小

> ID：14009478
> 
> 赞同：1
> 
> 时间：2012-12-23T07:50:14.473
> 
> 标签：c, linux, file-io, dd

我使用 dd 命令创建一个文件，如下所示：

```
dd if=/dev/zero of=1g.dd bs=1M count=512 seek=512 
```

当我运行命令时`ls 1g.dd`，它的大小是 1G，运行`du 1g.dd`，它是 512M。

c 库中有一个`struct stat`读取文件大小的库，但它只能读出 1G 大小，现在我怎样才能得到 512M 大小，这是该文件的实际大小？

现在我知道的唯一方法是解析 shell 命令`du`的输出。我可以直接从文件中读出大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T07:57:29.530

你可以使用 的`st_blocks`成员`struct stat`，它告诉你有多少 512 字节块（这在 Linux 上有效，在其他操作系统上可能不同，并且可能取决于文件系统）已分配给文件。

# javascript - 每个图像的新页面？

> ID：14009479
> 
> 赞同：0
> 
> 时间：2012-12-23T07:50:41.210
> 
> 标签：javascript, html, button, next

我目前正在开发一个包含大量图片的网站，主要只使用 javascript 和 HTML。我的网站将在主页上显示很多图像，当点击一个时，它将把用户带到一个显示他们点击的图像的页面，以及一个分享到 Facebook 按钮，一个评论部分，和描述。

问题是我的网站将有很多图像，并且为每一个图像创建一个单独的 html 文件需要很长时间。我确实意识到我可以使用 javascript 轻松地做到这一点，但是我真的需要每张图片都有一个不同的 url，这样分享到 Facebook 按钮才会起作用。

我查看了其他一些图片网站，9gag 正是我在我的网站上想要的，每张图片在 url 中都有一个分配给它的数字，每当我点击下一个按钮时，它所做的只是更改 url 末尾的数字，除了 9gag 图像是由用户上传的，所以每次有人上传新图像时，网站必须以某种方式创建另一个 url，我正在寻找一种方法来做到这一点，除非我是选择所有图像的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T07:54:11.687

通常，URL 中的数字是存储在数据库中的帖子的 ID。这些数字是自动分配的（假设您的 ID 是自动递增的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T08:00:56.087

将您的图片名称索引到一个数组中，然后在 url 中发布变量，以便页面将显示该图像。像 showimage.html?image_path=picture1

# sql - 主题视图不显示在 jTable 中

> ID：14009483
> 
> 赞同：0
> 
> 时间：2012-12-23T07:51:44.100
> 
> 标签：sql, swing, ms-access

我尝试使用 java swing 编写一个论坛。首先，在点击jTable时，它会导致eForumContent.class一起传入id。

```
 jTable.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent e) {
                int id = 0;
                eForumTopics topics = new eForumTopics(id);
                topics.retrieveDiscussion();
                eForumThreadContent myWindow = new eForumThreadContent(id);
                myWindow.getJFrame().setVisible(true);
            }
        }); 
```

我先初始化id。但是我将数据库表中的 id 设置为自动编号。然后我调用retrieveDiscussion 方法从数据库中获取id 并将其传递给eForumThreadContent。这是我的retrieveDiscussion 方法的代码。

```
 public boolean retrieveDiscussion(){
    boolean success = false;
    ResultSet rs = null;
    DBController db = new DBController();
    db.setUp("IT Innovation Project");
    String dbQuery = "SELECT * FROM forumTopics WHERE topic_id = '" + id
            + "'";
    rs = db.readRequest(dbQuery);
    db.terminate();
    return success;
}
    } 
```

然后，在 eForumThreadContent 中，我想使用表格显示所选线程的内容。所以我使用我刚才传入的id并插入到我的sql语句中。这是我的代码。

```
 public eForumThreadContent(int id) {
    this.id = id;
}

    if (jTable == null) {
        Vector columnNames = new Vector(); // Vector class allows dynamic
                                            // array of objects
        Vector data = new Vector();
        try {
            DBController db = new DBController();
            db.setUp("IT Innovation Project");
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();
            String dsn = "IT Innovation Project";
            String s = "jdbc:odbc:" + dsn;
            Connection con = DriverManager.getConnection(s, "", "");
            String sql = "Select topic_title,topic_description,topic_by from forumTopics WHERE topic_id = '"+id+"'";
            java.sql.Statement statement = con.createStatement();
            ResultSet resultSet = statement.executeQuery(sql);
            ResultSetMetaData metaData = resultSet.getMetaData();
            int columns = metaData.getColumnCount();
            for (int i = 1; i <= columns; i++) {
                columnNames.addElement(metaData.getColumnName(i));
            }
            while (resultSet.next()) {
                Vector row = new Vector(columns);
                for (int i = 1; i <= columns; i++) {
                    row.addElement(resultSet.getObject(i));
                }
                data.addElement(row);
            }
            resultSet.close();
            ((Connection) statement).close();
        } catch (Exception e) {
            System.out.println(e);
        }
        jTable = new JTable(data, columnNames);
        TableColumn column;
        for (int i = 0; i < jTable.getColumnCount(); i++) {
            column = jTable.getColumnModel().getColumn(i);
            if (i == 1) {
                column.setPreferredWidth(400); // second column is bigger
            }else {
                column.setPreferredWidth(200);
            }
        }
        String header[] = { "Title", "Description", "Posted by" };

        for (int i = 0; i < jTable.getColumnCount(); i++) {
            TableColumn column1 = jTable.getTableHeader().getColumnModel()
                    .getColumn(i);

            column1.setHeaderValue(header[i]);
        }
        jTable.getTableHeader().setFont( new Font( "Dialog" , Font.PLAIN, 20 ));
        jTable.getTableHeader().setForeground(Color.white);
        jTable.getTableHeader().setBackground(new Color(102, 102, 102));
        jTable.setEnabled(false);
        jTable.setRowHeight(100);
        jTable.getRowHeight();
        jTable.setFont( new Font( "Dialog" , Font.PLAIN, 18 ));
    }
    return jTable;
} 
```

但是，即使我单击了某个线程，eForumThreadContent 中的表格也是空的。它还给了我一条错误消息。

```
 [Microsoft][ODBC Microsoft Access Driver] Data type mismatch in criteria expression.
at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)
at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)
at sun.jdbc.odbc.JdbcOdbc.SQLExecDirect(Unknown Source)
at sun.jdbc.odbc.JdbcOdbcStatement.execute(Unknown Source)
at sun.jdbc.odbc.JdbcOdbcStatement.executeQuery(Unknown Source)
at DBController.database.DBController.readRequest(DBController.java:27)
at kioskeForum.entity.eForumTopics.retrieveDiscussion(eForumTopics.java:67)
at kioskeForum.ui.eForumDiscussion$3.mouseClicked(eForumDiscussion.java:296) 
```

我在线研究以了解使用 id 的主题视图。但我的桌子没有显示任何东西。有人可以告诉我如何解决它吗？或者在java swing中显示主题视图的任何其他方式？提前致谢。

# c# - 计算特定半径处的最大点

> ID：14009484
> 
> 赞同：0
> 
> 时间：2012-12-23T07:51:48.830
> 
> 标签：c#, google-maps, coordinates

我在地图上有一个点（谷歌地图），

我想得到一定半径内的所有点，

有没有办法知道特定半径的最大点？

（C#代码上的计算）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:23:47.407

我找到了一个可以回答我要求的网站：

[http://janmatuschek.de/LatitudeLongitudeBoundingCoordinates](http://janmatuschek.de/LatitudeLongitudeBoundingCoordinates)

# .htaccess - .htaccess rewriterule 不适用于单页

> ID：14009487
> 
> 赞同：0
> 
> 时间：2012-12-23T07:52:14.317
> 
> 标签：.htaccess, mod-rewrite, redirect, subdomain

我有几页：

```
http://waleyqiao.com/about/
http://waleyqiao.com/index/
http://waleyqiao.com/contact/
http://waleyqiao.com/blog/
http://waleyqiao.com/portfolio/ 
```

真正的页面是 waleyqiao.com/about.html

**访问：**

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^([^/]+)/$ $1.html 

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ /$1/ [R=301,L] 
```

出于某种原因， waleyqiao.com/portfolio/ 似乎不起作用，但 waleyqiao.com/portfolio.html 确实...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:46:47.967

这是因为您`.html`在 URI 的末尾添加了右边：

```
/portfolio/.html 
```

这显然不存在。您需要创建一个没有斜杠的分组。试试这个：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1\.html -f
RewriteRule ^ /%1.html 
```

同样对于 php 扩展：

```
RewriteCond %{REQUEST_URI} !/$
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1\.php -f
RewriteRule (.*) /%1.php [L] 
```

# php - 使用 AJAX 下拉字段搜索并添加到数组以实时显示结果

> ID：14009491
> 
> 赞同：-2
> 
> 时间：2012-12-23T07:52:56.030
> 
> 标签：php, mysql, ajax

我有一个用户选择公司和日期的表单。然后用户需要从数据库中选择一些库存并将记录 id 添加到数组中以供以后使用。我的想法是简单地获取每个库存项目的 id 并将其传递给一个数组，这样我就可以稍后循环插入到 mysql 中。我希望能够让用户从某个字段中搜索库存，然后结果显示在该字段下方，然后用户可以选择该特定库存项目。当他们单击/选择它时，它将将该记录 id 添加到我以后可以使用的数组中。

```
<form action="" method="post">
    <div>
    <select>
        <option>Company 1</option>
        <option>Company 2</option>
    </select>
    </div>
    <div>
        <input type="text" name="date">
    </div>
    <div>
        <input type="text" name="search">
        // Here is where I need to display the results from the db based on what the user typed in a drop down, then when that user selects that item then it will add that records id to an array. Then I need the array to display below and how the records based on the id. 
    </div>
    <div>
    // The array is shown here and as the user selects multiple items. It might look something like this
    <? $thisarray = array() - as users select items from drop down then the records ids are added to the array. Then as they are added to the array I can use a mysql SELECT to display those records. Then when the user submits the form I can pass that array as well.
    </div>
</form> 
```

请让我知道这是否有意义。如果不是，我会改变我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:37:13.200

如果您的序列号可以是字符串，也许您可​​以使用带前缀的 uuid（通用唯一标识符）。

[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

# c++ - Qt - 从网络下载图像

> ID：14009492
> 
> 赞同：1
> 
> 时间：2012-12-23T07:53:14.753
> 
> 标签：c++, qt

我正在尝试使用 Qt/C++ 编写一个应用程序来从 Web 下载图像。该程序将以文本文件的形式提供 URL 列表，并且应该打开每个 URL 并下载每个网站中的所有图像。

为此，我将 QNetworkAccessManager 子类化并覆盖`createRequest`方法/函数，如下所示：

```
QNetworkReply* clsNAM::createRequest(Operation op,const QNetworkRequest & req,
                                                    QIODevice * outgoingData )
{
    return new clsNR(QNetworkAccessManager::createRequest(_op,_req,_outgoingData));
} 
```

我的 QNetworkReply 类 clsNR 的子类从其原始标头识别回复的类型，例如：

```
bool clsNR::isImage()
{
    if(this->rawHeader("Content-Type").toLower().startsWith("image"))
       return true;
    else
       return false;
} 
```

当我得到 readyRead 信号（这意味着有数据可供读取）时，我将传入的数据存储在 QbyteArray 中。我在 clsNR 中连接了一个插槽以在 QNetworkReply 完成时保存图像。看起来像：

```
void clsNR::slotCloseConnection()
{
    if(isImage())
    {
      QImage image;
      bool bool1 = image.loadFromData(ContentData);
      QString name(QDir::homePath());
      name.append(this->url().path());
      bool bool2 = image.save(name,0,-1);
    }
} 
```

我的储蓄有问题。`bool1`是`true`，但是`bool2`是`false`。我使用 url 路径作为名称的原因是为图像生成唯一名称。当我打印出名称时，它类似于：

```
"/home/guest/images/splash/3.jpg" 
```

所以我的问题是：

1.  QImage 我做错了什么？
2.  我可以使用 QFile 和 QStream 来写下图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T12:28:55.617

我会添加其他内容，就像 Mat 在您的评论中所说的那样。如果你需要检查目录是否存在使用[Qdir::exists()](http://qt-project.org/doc/qt-4.8/qdir.html#exists-2)并且如果你需要创建它使用[QDir::mkdir()](http://qt-project.org/doc/qt-4.8/qdir.html#mkdir)

# python - ImportError：/home/test/test_1.so：来自 cython 构建的错误 ELF 类

> ID：14009498
> 
> 赞同：1
> 
> 时间：2012-12-23T07:54:52.533
> 
> 标签：python, cython, elf, importerror

[正如教程](http://www.behnel.de/cython200910/talk.html)所说（） ，我已经构建`.so`了 cython 。在我构建的那个系统上工作正常；不; 但是当我在其他系统上使用它时，它会给我一个错误消息 `python setup.py build_ext --inplace``ImportError`
`ImportError: /home/test/test_1.so: wrong ELF class: ELFCLASS32`

我认为它在 32 位和 64 位库之间不匹配；那么我如何在 cythonizing 时修复它？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:51:16.143

你不能。您需要`.so`在 64 位系统上重新构建，并确保始终在正确的系统上使用正确的版本。由于这些体系结构的差异，cython 实际上不可能允许 32 位库在 64 位系统上使用，反之亦然。例如Ruby FFI 也会有同样的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T12:45:57.770

您不能在不同的架构中共享相同的二进制文件。但是只要你在任一系统上安装了python和所需的库，你就可以编译Cython生成的.c文件，而不需要在其他机器上安装Cython（即，将.pyx转换为.c ）。

# php - 不要回滚使用 PHP、PDO 和 Postgres 的事务中的错误

> ID：14009506
> 
> 赞同：3
> 
> 时间：2012-12-23T07:57:09.453
> 
> 标签：php, postgresql, pdo, yii

我有一个非常广泛的基于 PHP/Yii 的 PHP 更新脚本，它可以更新不同数据库类型（MSSQL、Postgres 和 MySQL）上的数据库。

整个脚本在事务中运行。但是，有些语句会导致查询错误（例如，如果某个键已存在于表上）。我用语句包围了这些`try/catch`——到目前为止，这在 MySQL 中运行良好

但是，在 Postgres 上，一旦发出无效查询，事务就会自动失败。以下所有语句均显示以下错误消息：

```
CDbCommand failed to execute the SQL statement: SQLSTATE[25P02]: In failed sql transaction: ERROR: current transaction is aborted, commands ignored until end of transaction block 
```

但是我需要 Postgres 来继续事务，因为我想在应用程序中决定何时回滚 - 或者以某种方式清除错误并继续事务。

怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T11:21:57.243

为此目的使用保存点：

```
BEGIN; -- transaction starts here

-- do things if you want

SAVEPOINT my_savepoint;

-- failing statement here
-- all other statements are ignored

ROLLBACK TO SAVEPOINT my_savepoint;

-- continue your transaction starting from my_savepoint

COMMIT; 
```

# google-maps - 如何在谷歌地图 api 上获得具有自由形状的城市轮廓？

> ID：14009511
> 
> 赞同：1
> 
> 时间：2012-12-23T07:57:35.630
> 
> 标签：google-maps, google-maps-api-3

我需要用谷歌地图 api 塑造城市，就像提供的图片一样： ![带有城市形状的谷歌地图api](../Images/ec58cc8bd9f3bea5066128b1b11b208b.png)

你知道我可以从哪里得到这些城市的形状吗？（我只需要美国和加拿大的城市。）我只能找到谷歌提供的矩形区域边界。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:57:00.983

您可以创建多边形，然后将它们保存在数据库中，以便稍后在地图上进行娱乐。

# css - 使用引导程序时，如何仅从其他站点获取 CSS 的一部分？

> ID：14009512
> 
> 赞同：2
> 
> 时间：2012-12-23T07:57:36.203
> 
> 标签：css, stylesheet

我的网站使用引导程序作为其 css 样式。
如果我想从其他网站获取一小部分 CSS 怎么办？
最好的方法是什么？我尝试在 Firefox 中使用“检查”功能之一。
它显示了为每个类声明的所有层次结构及其样式。

我真正关心的是引导程序和新 css 之间的冲突。
如果您只想使用其他 css 的一小部分，你们将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:06:04.810

首先，在获得网站管理员的事先许可之前，不要从其他网站获取样式...

对于引导程序..我从未使用过它，但根据我的说法，您仍然可以使用 CSS 覆盖默认引导程序样式[！重要](http://coding.smashingmagazine.com/2010/11/02/the-important-css-declaration-how-and-when-to-use-it/)

> 我尝试在 Firefox 中使用“检查”功能之一。它显示了为每个类声明的所有层次结构及其样式。

单个元素的样式从不依赖于单个类，它也继承了父类的一些属性......例如

```
<style>
.wrapper {
   color: #ff0000;
}

.hello {
   background-color: #aaaaaa;
   / *Width and color of the parent div is inherited */
}
</style>

<div class="wrapper">
   <div class="hello">Hello World</div> <!-- So actually this uses color and width of .wrapper and background-color of .hello -->
</div> 
```

# c# - Windows phone 8 life tile 使用标题向用户显示一些信息

> ID：14009519
> 
> 赞同：1
> 
> 时间：2012-12-23T08:00:31.843
> 
> 标签：c#, windows-phone, windows-phone-8

我想知道生命瓷砖的字体颜色是否在所有情况下都必须是白色的。

基本上我喜欢在特定时间使用 TileUpdateManager 和 TileNotification 更新我的磁贴标题，以向用户显示一些信息（如闹钟时间）

我现在已经下载了这么多应用程序，所有的磁贴标题都是白色的。

我不确定我是否在正确的轨道上想要使用另一种字体颜色更新应用程序磁贴标题。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T15:17:28.947

正如您在[http://msdn.microsoft.com/en-US/library/windowsphone/design/jj662929(v=vs.105).aspx](http://msdn.microsoft.com/en-US/library/windowsphone/design/jj662929(v=vs.105).aspx)上看到的那样，不可能更改动态磁贴中的默认文本颜色- 字体颜色是白色，因为它是唯一匹配所有强调色的颜色。

这个选择的原因是很清楚的。你只需要想象一个手机在磁贴上带有深蓝色的强调色和黑色的文字：这会使磁贴的内容不可读。

顺便说一句，使用字体颜色来通知用户某些事情是最糟糕的方式，当你有一个完整的动态磁贴可以使用时。您可以选择显示不同的图像、编写不同的文本等；这种改变对用户来说比仅仅改变字体颜色更有效。

我的建议是阅读 MSDN 上的这篇文章：http: [//msdn.microsoft.com/en-us/library/windowsphone/design/jj662929](http://msdn.microsoft.com/en-us/library/windowsphone/design/jj662929(v=vs.105).aspx) (v=vs.105).aspx 。在这里，您可以找到许多有关如何设计动态磁贴以及如何有效地向用户显示信息的相关建议。

我还建议您不要将 Tiles 用于重要通知，例如警报，如 MSDN 文档所述：

> “不要依赖 Tiles 向用户发送紧急的实时信息。例如，Tile 不是通信应用通知用户来电的正确表面。Toast 通知是更好的真实媒介-时间消息。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T20:43:57.733

您不能直接执行此操作，但您可以生成图像并将其用作您的图块 - 然后您可以根据需要显示它。有关示例，请参阅[此博客文章。](http://windcape.posterous.com/how-to-generate-a-custom-live-tile-directly-o)

不过，我会回应 threddeveloper 的建议，不要让我们使用磁贴来显示重要通知。

# string - 如何从 Qt 中的字符串中删除重音符号/变音符号？

> ID：14009522
> 
> 赞同：5
> 
> 时间：2012-12-23T08:01:02.247
> 
> 标签：string, qt, diacritics, qstring

如何从 Qt 中的字符串中删除变音符号。例如，这个：

```
QString test = QString::fromUtf8("éçàÖœ");
qDebug() << StringUtil::removeAccents(test); 
```

应该输出：

```
ecaOoe 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T08:04:10.050

Qt 中没有直接的内置解决方案。一个在大多数情况下都可以使用的简单解决方案是遍历字符串并将每个字符替换为对应的字符：

```
QString StringUtil::diacriticLetters_;
QStringList StringUtil::noDiacriticLetters_;

QString StringUtil::removeAccents(QString s) {
    if (diacriticLetters_.isEmpty()) {
        diacriticLetters_ = QString::fromUtf8("ŠŒŽšœžŸ¥µÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýÿ");
        noDiacriticLetters_ << "S"<<"OE"<<"Z"<<"s"<<"oe"<<"z"<<"Y"<<"Y"<<"u"<<"A"<<"A"<<"A"<<"A"<<"A"<<"A"<<"AE"<<"C"<<"E"<<"E"<<"E"<<"E"<<"I"<<"I"<<"I"<<"I"<<"D"<<"N"<<"O"<<"O"<<"O"<<"O"<<"O"<<"O"<<"U"<<"U"<<"U"<<"U"<<"Y"<<"s"<<"a"<<"a"<<"a"<<"a"<<"a"<<"a"<<"ae"<<"c"<<"e"<<"e"<<"e"<<"e"<<"i"<<"i"<<"i"<<"i"<<"o"<<"n"<<"o"<<"o"<<"o"<<"o"<<"o"<<"o"<<"u"<<"u"<<"u"<<"u"<<"y"<<"y";
    }

    QString output = "";
    for (int i = 0; i < s.length(); i++) {
        QChar c = s[i];
        int dIndex = diacriticLetters_.indexOf(c);
        if (dIndex < 0) {
            output.append(c);
        } else {
            QString replacement = noDiacriticLetters_[dIndex];
            output.append(replacement);
        }
    }

    return output;
} 
```

请注意，`noDiacriticLetters_`必须是 a `QStringList`，因为某些带有变音符号的字符可以匹配两个单个字符。例如`œ`=>`oe`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-25T14:09:52.663

你的问题有点误导。您似乎想要做的不仅仅是删除变音符号（– 是没有变音符号的连字字母）。我猜您想将任何 Unicode 字符串转换为大致对应的 ASCII 字符串？

对于变音符号，您可以执行分解的 Unicode 规范化（NFD 或 NFKD，取决于您的具体需要），然后删除“标记”类别的所有字符（`QChar::Mark_NonSpacing`和`QChar::Mark_SpacingCombining`）`QChar::Mark_Enclosing`。

对于其他所有内容（例如 –），我不知道通用解决方案。创建一个包含所有您想要的替换的查找表，然后搜索和替换（请参阅 Laurent 的答案）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:38:06.120

部分解决方案是使用 QString::normalized，而不是删除特殊字符。

```
QString test = QString::fromUtf8("éçàÖœ");
QString stringNormalized = test.normalized (QString::NormalizationForm_KD);
stringNormalized.remove(QRegExp("[^a-zA-Z\\s]")); 
```

然而，这是一个部分解决方案，因为它不会将“œ”转换为“oe”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T09:59:43.233

有一种粗略的方法可以部分解决您的问题（只是重音，而不是诸如“oe”之类的连字）。

```
QString title=QString::fromUtf8("éçàÖ");
qDebug("%s\n", title.toLocal8Bit().data()); 
```

# javascript - 防止圆在 KineticJS 中闪烁

> ID：14009524
> 
> 赞同：4
> 
> 时间：2012-12-23T08:01:10.307
> 
> 标签：javascript, jquery, html, canvas, kineticjs

当用户将鼠标光标放在多边形的轮廓上/附近时，应该会出现一个锚点并跟随鼠标的位置，但会捕捉到多边形的轮廓。

**问题：**`mousemove`当处理函数更新此锚点的位置时，锚点似乎闪烁。是什么导致闪烁和更新缓慢？[这里](http://www.html5canvastutorials.com/kineticjs/html5-canvas-path-mouseover/)的 KineticJS 示例似乎更新得很快。

此外，锚不会捕捉到多边形的轮廓/笔划。怎样才能达到这种效果？

**[JSfiddle](http://jsfiddle.net/yZFFJ/)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:19:57.260

你的`mousemove`功能是移动锚。移动锚点后，您的鼠标不再位于上方，`polyHitArea`因此您的`mouseleave`事件正在触发并隐藏锚点。

**编辑**

我能想到的防止这种情况发生的最好方法是将`setVisible(false)`代码放入`setTimeout`调用中，并在调用中设置一个`mouseenter`事件。`mouseoverAnchor``clearTimeout`

```
var polyHitArea._timeout = 0;

polyHitArea.on('mouseover', function(e) {
    clearTiemout(polyHitArea._timeout);
    mouseoverAnchor.setVisible(true);
    stage.draw();
});

polyHitArea.on('mouseleave', function(e) {
    clearTimeout(polyHitArea._timeout);
    polyHitArea._timeout = setTimeout(function(){
        mouseoverAnchor.setVisible(false);
    }, 25); // 25 ms enough time?
    stage.draw();
});

mouseoverAnchor.on('mouseenter', function(e) {
    clearTimeout(polyHitArea._timeout);
}); 
```

# java - 在 Java 中抛出自定义异常与内置异常

> ID：14009528
> 
> 赞同：2
> 
> 时间：2012-12-23T08:02:00.797
> 
> 标签：java, exception

我有点困惑，因为我希望能够在 Java 中引发自定义异常。要在函数中执行此操作，我必须添加`throws MyException`到函数的标题中。

然后任何依次调用该函数的东西都必须添加`throws MyException`或有一个 try-catch 块。但这是为什么呢？

例如，当在 java 中创建一个 Stack 并调用 pop 函数时，我不必有一个 try-catch，但`NoSuchElementException`如果没有元素，Java 中的 pop 方法会抛出一个（或 w/e 它是）在堆栈上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T08:04:18.943

`NoSuchElementException`是一个`RuntimeException`（未经检查的异常），我们不需要处理或声明`RuntimeException`S，因此编译器不会抱怨，而是在运行时抛出它。

在检查异常的情况下，即所有不是 的子类型的异常，`RuntimeException`编译器将检查一个合适的`catch`子句，使程序能够在执行`catch`; 中的操作后继续其执行过程。为此，您需要使用`try/catch`块来处理它们或使用子句声明它们`throws`- 将处理异常的责任委托给调用链更高层。如果您的自定义异常不是已`RuntimeException`检查异常的规则，则也适用于您的自定义异常。

> 已检查的异常 ---> 由编译器强制处理或传播
> 
> 未经检查的异常 ---> 编译器未检查因此出现在运行时

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T08:05:07.043

Java 有所谓的已检查异常和未检查异常。已检查的异常必须在方法签名中声明，未检查的异常不需要声明。

如果你想定义一个未经检查的异常，你自己从`RuntimeException`insted派生它`Exception`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T08:04:39.130

您应该抛出或尝试捕获所有已检查的 Exceptions ，它不是必需的，`RunTimeException`并且您正在谈论的异常是 RuntimeException

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T09:01:33.813

请参阅我对[这个](https://stackoverflow.com/questions/13797705/why-there-is-checked-and-unchecked-exception-in-java/13797913#13797913)问题的回答。

作为一般经验法则，在决定是否创建自定义异常类时，我会尝试尽可能多地使用内置异常类，如果这样做是有意义的，例如`IllegalArgumentException`，等等。

这是一个如何创建自定义的示例`RuntimeException`，正​​如您所发现的，它不需要`try/catch/finally`块或`throws`子句。

```
public class MyRuntimeException extends RuntimeException {
    public MyRuntimeException() {
        super();
    }

    public MyRuntimeException(String message) {
        super(message);
    }
}

public class MyClass {
    public void go(int val) {
        if(val <= 0) throw new MyRuntimeException("Val must be greater than 0.");
    }
} 
```

# jquery - 使用 jQuery 的点击事件

> ID：14009532
> 
> 赞同：1
> 
> 时间：2012-12-23T08:03:03.360
> 
> 标签：jquery, html, css

你好朋友，我是新手`jQuery`，正在尝试制作切换效果。我的代码工作正常，但我也想在其中切换文本请检查以下代码

**脚本**

```
$('.read_more_list').click(function() {
    $(".design_list").slideToggle();
    if ($(this).children('a').html() == 'more') {
        $(this).children('a').html('less');
    }
    if ($(this).children('a').html() == 'less') {
        $(this).children('a').html('more');
    }
})​ 
```

**HTML**

```
<ul class="design_list" style="display: none;">
            <li><a href="#">eCommerce</a></li>
            <li><a href="#">Display  Creatives</a></li>
            <li><a href="#">Logo Design  Services</a></li>
            <li><a href="#">Microsites</a></li>
          </ul>
<div class="read_more_list"><a href="javascript:void(0);">more</a></div> 
```

我希望当用户点击时`more`它会转换成`less`，当用户再次点击它时它会变成`more`

请帮助我的朋友提前谢谢... :))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:06:33.453

您可以使用[**`conditional operator ? :`**](http://msdn.microsoft.com/en-us/library/ie/be21c7hw%28v=vs.94%29.aspx)在文本之间切换以及切换。

```
$(this).text($(this).text() == "more" ? "less" : "more"); 
```

**[现场演示](http://jsfiddle.net/6CDHQ/2/)**

```
$('.read_more_list').click(function() {
    $(".design_list").slideToggle();
    $('a', this).text($(this).text() == "more" ? "less" : "more");   
})​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T08:11:26.567

***[jsBin 演示](http://jsbin.com/inilip/1/edit)***

```
$('.read_more_list a').click(function(e){  
    e.preventDefault();

    $(".design_list").slideToggle();
    $(this).text( $(this).text()=='more'?'less':'more' );

}); 
```

HTML：

```
<a href="#">more</a> 
```

*   您的按钮不需要内联 JS void 或任何东西`A`，只需使用事件处理程序即可`event.preventDefault()`。

*   要切换文本，您可以使用简单的三元运算符`$(this).text()=='more'?'less':'more'`

只是提醒您有关三元：`[statement] ? [if true] : [if false] ;`

# javascript - jQuery表单验证插件：错误返回false

> ID：14009533
> 
> 赞同：0
> 
> 时间：2012-12-23T08:03:24.077
> 
> 标签：javascript, jquery, forms, validation, plugins

在阅读了有关如何制作 jQuery 插件的教程后，我决定试一试并制作一个表单验证插件。到目前为止，我已经成功实现了我所希望的 90%，剩下的唯一一件事就是让表单在找到空字段时返回 false。

[**JSFIDDLE**](http://jsfiddle.net/tHMMj/8/)

我已将整个代码放在 jsfiddle 中，但它似乎不起作用。也许是因为我需要包含我的插件文件而不是将其粘贴到脚本部分。但我分享它以防您需要查看整个代码。

### 插件工作流程

```
(function(jQuery) {
    window.cnt = 0;

    jQuery.fn.border = function() {

       this.each(function() {
        var ele = jQuery(this);
        var cur_val, ele_name;
        if(// element is input, select, or textarea)
        {
           cur_val = ele.val();
        }
        else if(// element is radio)
        {
           ele_name = ele.attr('name');
           cur_val = $('input:radio[name="'+ele_name+'"]:checked').val();
        }
        else if(// element is checkbox)
        {
           ele_name = ele.attr('name');
          cur_val = $('input:checkbox[name="'+ele_name+'"]:checked').val();
        }

        if(! cur_val) // need to do something here to prevent form submission
        {
            cnt++;
            if(// input, textarea, select element)
            {
               ele.addClass('border');
            }
            else if(// radio or checkbox element)
            {
               ele.parent().addClass('border');
            }               
        }
        else // need to do something here to make the form submission happen
        {               
            if(// input, select, textarea)
            {
                ele.removeClass('border');
            }
            else if(radio or checkbox)
            {
                ele.parent().removeClass('border');
            }
        }

        });         
        return this;            
    };
})(jQuery);// JavaScript Document 
```

### 我尝试了什么

```
<script type="text/javascript">
    $(function(){
        $('form').submit(function(){
            $('.required').border();
            if(window.cnt > 0)
            {               
                return false;
            }
            else
            {               
                return true;
            }
        });
    });
</script> 
```

我创建了一个全局变量`cnt`并尝试在表单提交函数中使用它。它在有空元素时起作用，但`false`即使在所有元素都填满后它也会返回。在提醒 的值之后`cnt`，我发现在每个按钮上单击 的值会`cnt`不断从其先前的值附加，因此`cnt > 0`总是返回`true`。

因此，我试图找到一种`false`从插件函数本身返回的方法，这样我就不必`if-else`在调用插件函数后添加条件。

简而言之，我想要实现的是

```
$(function(){
    $('form').submit(function(){
        $('.required').border(); // this line should take care of returning true or false for the submit function           
    });
}); 
```

因此，用户应该只打电话`$('.required').border();`，其余的事情应该由它来处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T09:21:23.463

请参阅下面代码中我使用`valid`变量的方式，而不是`window.cnt`.

```
jQuery.fn.border = function() {

   var valid = true;

   this.each(function() {
    var ele = jQuery(this);
    var cur_val, ele_name;
    if(// element is input, select, or textarea)
    {
       cur_val = ele.val();
    }
    else if(// element is radio)
    {
       ele_name = ele.attr('name');
       cur_val = $('input:radio[name="'+ele_name+'"]:checked').val();
    }
    else if(// element is checkbox)
    {
       ele_name = ele.attr('name');
      cur_val = $('input:checkbox[name="'+ele_name+'"]:checked').val();
    }

    if(! cur_val) // need to do something here to prevent form submission
    {
        valid = false;
        if(// input, textarea, select element)
        {
           ele.addClass('border');
        }
        else if(// radio or checkbox element)
        {
           ele.parent().addClass('border');
        }               
    }
    else // need to do something here to make the form submission happen
    {               
        if(// input, select, textarea)
        {
            ele.removeClass('border');
        }
        else if(radio or checkbox)
        {
            ele.parent().removeClass('border');
        }
    }

    });
    return valid;       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:24:03.497

当您调用 $.border 函数时，您是否尝试过重置 cnt 变量？

# jquery - jQuery 或 PHP 在单击时刷新随机图像脚本

> ID：14009538
> 
> 赞同：0
> 
> 时间：2012-12-23T08:03:56.430
> 
> 标签：jquery, html

我一直在寻找和寻找没有解决方案。我有这个html：

```
<div class="content_wrap"> 
  <script src="jslib/random_image.js"></script>
</div> 
```

和一个链接：

```
<li><a href="javascript:location.reload();" target="_self">Random image</a></li> 
```

但是，我不想重新加载整个页面（la脚），而是想刷新 div （不确定是否可能）或至少 refresh `random_image.js`。

你怎么能用 jQuery 做到这一点？或者 PHP，或者别的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:18:56.637

您首先需要一种方法来引用您的 DIV，例如 id：

```
<div class="content_wrap" id="randomImage">
    <script src="jslib/random_image.js"></script>
</div> 
```

然后重新加载 DIV 你可以简单地重写它的内容。这可能会被浏览器缓存，因此，根据脚本的工作方式，您可能会被迫在调用中添加一个虚拟参数。

您可以使用 重新声明整个 DIV 清空并重新创建`append()`，或者您可以使用`.load()`提供更多控制权：

```
$('#randomImage').load('jslib/random_image.js?dummy='+Math.random(),
    function(res, status, xhr){
        if ('success' != status)
        {
            // Do something with the image, maybe load a default one
            return;
        }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T08:09:00.270

假设你在 div 中有 img

```
<div class="content_wrap"> 
  <script src="jslib/random_image.js"></script>
  <img id="random_image" href="">
</div>

function updateNewImage(){
//make ajax to server 
// get new url store it in variable new_href
// update random_image  $("$random_image").attr("href",new_href);
}
<li><a href="javascript:updateNewImage();" target="_self">Random image</a></li> 
```

您可以在 onclick 上调用一个函数，该函数将使用 ajax 获取新的图像 url，然后您可以更新 img href 位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T08:13:07.997

尚未测试代码，但假设没有重大错误，应该这样做。我假设你有 jQuery（也可以使用简单的 js，但也可以使用 jq）：

```
<div class="content_wrap" id="content_wrap"> 
  <img id="rndImg1" src="clicktorelodme.png"/>
</div>

<script>
function reloadImage(imgId) {
    String randomImgSrc = "anewimgsrc.png";
    $("#content_wrap").find("#"+imgId).attr("src", randomImgSrc);
}
</script>

<li><a href="#" onclick="reloadImage('rndImg1'); return false;">Random image</a></li> 
```

查看您对另一个答案的回复，我知道您想要做的不仅仅是刷新图像，您想要加载执行“东西”的代码，例如设置图像、设置标题等。

为此，您需要执行其他操作，例如向页面添加新的脚本元素，它可以做任何您想做的事情。查看[这个答案](https://stackoverflow.com/questions/1199676/can-i-create-script-tag-by-jquery)以了解如何做到这一点。

# ruby - 来自 torrent 文件的 Ruby Magnet 链接

> ID：14009541
> 
> 赞同：3
> 
> 时间：2012-12-23T08:04:27.193
> 
> 标签：ruby, bittorrent, base32, magnet-uri

如何从给定的 torrent 文件生成磁力链接？与此类似：[给定一个 .torrent 文件，如何在 python 中生成磁力链接？](https://stackoverflow.com/questions/12479570/given-a-torrent-file-how-do-i-generate-a-magnet-link-in-python)

如果您解释磁力链接的工作原理，则加分。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T20:43:45.420

你可能对这个脚本感兴趣：[一个 ruby​​ 脚本，用于从 .torrent 文件中构建磁力链接](https://gist.github.com/Burgestrand/1733611)

此外，还有一个相关的 Stack Overflow 问题：[BitTorrent 磁力链接如何工作？](https://stackoverflow.com/questions/3844502/how-do-bittorrent-magnet-links-work)

# android - 如何在操作栏搜索小部件中触发操作？

> ID：14009545
> 
> 赞同：0
> 
> 时间：2012-12-23T08:05:51.293
> 
> 标签：android

`actionbar`如何在搜索小部件中触发操作？

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.menu_search:
                finish();
                return true;

            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:13:33.730

进行布局搜索并将 EditText 添加到其中。

```
<EditText
        android:id="@+id/txt_search"
        android:layout_width="400dp"
        android:layout_height="wrap_content"
        android:drawableRight="@drawable/ic_action_search"
        /> 
```

并且**菜单**activity_main.xml的那个项目使xml像这样

```
<item android:id="@+id/ser"
        android:icon="@drawable/ic_action_search"
        android:title="Search"
        android:showAsAction="always" 
        android:actionLayout="@layout/search">

    </item> 
```

在代码中

```
public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        View v = (View) menu.findItem(R.id.ser).getActionView();
        final EditText txtSearch = ( EditText ) v.findViewById(R.id.txt_search);

        txtSearch.setOnEditorActionListener(new OnEditorActionListener() {

            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) 
            {
                // TODO Auto-generated method stub
                    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(txtSearch.getWindowToken(), 0);
                    String mname=v.getText().toString().replaceAll("\\s","");
                    StringBuilder sn=new StringBuilder();
                    sn.append("http://www....");
                    Intent intent=new Intent(getApplicationContext(),Moviesearch.class);

                    final String finurl=sn.toString();
                    intent.putExtra("urlid",finurl);

                    startActivity(intent);

                return false;
            }
        });
        return true; 
```

# qt - 如何使用 Qt Quick 2.0 制作透明窗口

> ID：14009549
> 
> 赞同：4
> 
> 时间：2012-12-23T08:07:01.730
> 
> 标签：qt, window, transparent, qt5, qtquick2

我已经知道如何使用 Qt Quick 1.0 制作透明窗口。但是我最近开始使用 Qt 5.0 和 Qt Quick 2.0 并且不知道如何使用它。

setAttribute setWindowFlags setStyleSheet

上述功能已从 QtQuick2ApplicationViewer(QQuickView) 中删除。所以我想知道我是否可以使用 Qt Quick 2 制作一个透明窗口（是否因为它基于 OpenGL？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T20:55:53.033

这是一个Qt5代码：

```
QSurfaceFormat surfaceFormat;
surfaceFormat.setAlphaBufferSize(8);
viewer.setFormat(surfaceFormat);
viewer.setClearBeforeRendering(true);
viewer.setColor(QColor(Qt::transparent)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T13:45:21.290

~~在这里寻找可能的解决方案：~~

~~[http://code.google.com/p/quickwidget/](http://code.google.com/p/quickwidget/)~~

但是，有了`Qt 5.3`，就可以使用内置`QQuickWidget`类。

# mysql - SQL：使用系统日期为列选择数据

> ID：14009553
> 
> 赞同：-1
> 
> 时间：2012-12-23T08:08:18.560
> 
> 标签：mysql, sql

我有一个包含 2 列的表（DBname）。column1 (datatype =dates) 包含未来 2 年的日期。column2 (datatype = integer) 我分配的一些数据。如何让 SQL 选择与当前系统日期对应的 column2 中的数据。我已经尝试了以下但没有成功它返回一个空白......我正在使用 MySQL

```
SELECT column2 FROM DBname WHERE column1 = CURRENT_DATE 
```

如果我将其更改为

```
SELECT column2 FROM DBname WHERE column1 > CURRENT_DATE 
```

它返回`column2 rowid1`

如果我将其更改为

```
SELECT column2 FROM DBname WHERE column1 > CURRENT_DATE 
```

它返回`column2 rowid3`......真的很困惑......问题可能出在数据库本身吗？

至于数据..我导入了一个excel文件，其中包含column1中的日期..我写了第一个日期并对其进行格式化，然后向下拖动大约2年以填充其余部分..至于column2数据，它只是数字我已经放在......一个例子是

```
column1 1-dec-12, 2-dec-12, 3-dec-12, 4-dec-12     
column2   2,  4, 18, 19 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:20:59.680

我认为你`column1`持有日期是一个**STRING**。您需要先将其转换为`DATE`使用`STR_TO_DATE`函数，

```
SELECT *
FROM table1
WHERE STR_TO_DATE(column1, '%e-%b-%y') > CURDATE() 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/bdcf7/1)

其他来源

*   [STR_TO_DATE()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

# android - 如何在 xml 中将整个 LinearLayout 居中？

> ID：14009554
> 
> 赞同：1
> 
> 时间：2012-12-23T08:08:45.767
> 
> 标签：android, xml, layout, android-linearlayout

我在 LinearLayout 中有一些垂直方向的元素

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:orientation="vertical" >

    <TextView
            ... />

    <Button
            ... />
</LinearLayout> 
```

这些元素不会占用应用程序的整个垂直空间，我希望它们垂直居中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T09:41:57.027

试试这种方式：

> ```
> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>     android:layout_width="match_parent"
>     android:layout_height="wrap_content"
>     android:layout_gravity="center_vertical"
>     android:orientation="vertical" >    
> <TextView
>     android:id="@+id/title"
>     android:layout_width="fill_parent"
>     android:layout_height="wrap_content"
>     android:gravity="center"
>     android:text="lhkabhfksbj" />    
> </LinearLayout> 
> ```

只需将视图的重力设置为 "center" 。我想这就是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T08:22:35.167

Layout_gravity="center_vertical" 不适用于垂直 LinearLayout。

我会说你可以设置`android:layout_height="match_parent"`和`android:gravity="center_vertical"`线性布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T11:08:48.293

属性[android:layout_gravity](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#attr_android%3alayout_gravity)相对于其父视图定位视图，这意味着它们的封闭布局。在您的情况下，问题是您没有封闭布局。我知道，这很令人困惑，因为人们可能认为 LinearLayout 会在根窗口中居中，但即使涉及基本上引用其父级的属性，例如“ [android:layout_centerInParent](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android%3alayout_centerInParent) ”，它们也总是引用其封闭布局（“父级” ）。顺便说一句，“LinearLayout”不支持这些属性。

我的想法来解决你的问题：

**解决方案 1：将您的 LinearLayout 放在封闭布局中：**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

     <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Textbox1"  />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Textbox2"  />     

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button1" />

    </LinearLayout>

</FrameLayout> 
```

**解决方案 2：让包含的视图自行对齐**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textview_1"
        android:layout_centerVertical="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="Textbox1" />

    <TextView
        android:id="@+id/textview_2"
        android:layout_below="@id/textview_1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="Textbox2" />      

    <Button
        android:layout_below="@id/textview_2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button1" />

</RelativeLayout> 
```

希望有帮助！

# excel - 我们可以将像普通一维数组一样的 ArrayList 分配给 Excel 范围吗？

> ID：14009560
> 
> 赞同：0
> 
> 时间：2012-12-23T08:09:27.407
> 
> 标签：excel, vbscript, wsh, vba

考虑下面的 ArrayList：

```
 Dim myAL As New ArrayList()
    myAL.Add("The")
    myAL.Add("quick")
    myAL.Add("brown")
    myAL.Add("fox")
    myAL.Add("jumped")
    myAL.Add("over")
    myAL.Add("the")
    myAL.Add("lazy")
    myAL.Add("dog") 
```

那么现在我们可以将其值设置为水平的 Excel 范围吗？还是在此之前我们需要执行任何转换？

**代码**

```
Option Explicit

    Dim myQueue,i
    Set myQueue = CreateObject("System.Collections.ArrayList")
    'Dim Set Dic = CreateObject("Scripting.Dictionary

    myQueue.Add("jumped")
    myQueue.Add("over")
    myQueue.Add("")
    myQueue.Add("")
    myQueue.Add("dog")
    myQueue.Add("Cat")

    i=0
    Do While myQueue.Count > i

      MsgBox(myQueue(i))
    i=i+1
    Loop

    MsgBox("Capacity=" & myQueue.Capacity & "Count:" & myQueue.Count)

    myQueue.Remove("dog")

    MsgBox("Capacity=" & myQueue.Capacity & "Count:" & myQueue.Count)

    i=0
    Do While myQueue.Count > i

      MsgBox(myQueue(i))
    i=i+1
    Loop 
```

当我们执行任何删除操作时，ArrayList 的大小会像字典对象一样自动调整，还是我们需要使用任何`(Re)Dim`语句来处理大小？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:32:02.077

首先，您需要将 ArrayList 设置为数组：

```
listArray = myAl.ToArray() 
```

然后水平粘贴：

```
Range("A1").Resize(, UBound(listArray, 1) + 1) = listArray 
```

垂直粘贴：

```
Range("A1").Resize(UBound(listArray, 1) + 1) = Application.Transpose(listArray) 
```

当您使用 Remove / RemoveRange 删除项目时，您可以调用该`.Count`属性来获取数组的更新大小。数组列表上没有 Ubound/LBound。

# javascript - dataTables - 在使用 fnReloadAjax 更新表之前处理 div 隐藏

> ID：14009561
> 
> 赞同：1
> 
> 时间：2012-12-23T08:09:27.907
> 
> 标签：javascript, jquery, jquery-ui, jquery-datatables

我正在使用启用了服务器端处理的[DataTables 。](http://www.datatables.net/)在使用方法刷新表数据`fnReloadAjax()`时，处理div出现，然后请求完成后隐藏（表仍然显示旧数据），然后大约2秒后新数据出现在表中。

所以有几秒钟的时间，插件似乎已经完成了新数据的加载，但它仍然显示旧数据。有没有办法保持处理 div 直到新数据被绘制到表中？

# javascript - 捕获发送到浏览器窗口/从浏览器窗口发送的数据

> ID：14009564
> 
> 赞同：1
> 
> 时间：2012-12-23T08:09:46.287
> 
> 标签：javascript, http, browser

我正在尝试从扑克游戏网站捕获数据。游戏是通过一个新的浏览器窗口进行的，我想以某种方式“记录”进出浏览器的任何/所有数据。最终，我想解析数据以进行分析和统计，以创建某种“工具”来帮助新手玩家。

但是我在这个挑战中的第一步是能够捕获传输到浏览器/从浏览器传输的数据。

有人对如何捕捉这个有任何想法吗？

谢谢，杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:07:43.510

如果连接未使用 https 加密，请使用 wireshark 捕获传出连接

# mysql - 如何使用准备好的语句插入 1 个 ID 和几个项目？

> ID：14009567
> 
> 赞同：-1
> 
> 时间：2012-12-23T08:11:00.933
> 
> 标签：mysql, stored-procedures, prepared-statement

我在mysql中有一个这样的存储过程：

```
SET @q1= CONCAT('INSERT INTO tblPermissionRole (IdRole , IdPermission) VALUES (p_IdRole', p_Permission, ')');
PREPARE stmt FROM @q1;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

我想用一个 idRole 插入几个 idPermission，但是使用准备好的语句我不知道这怎么可能。请帮我。tnx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:25:05.940

您需要为这两个值添加参数占位符

```
SET @q1= 'INSERT INTO tblPermissionRole (IdRole , IdPermission) VALUES (?, ?)';
PREPARE stmt FROM @q1;

set @id := 1;
<some kind of iteration that sets @perm>
  EXECUTE stmt USING @id, @perm;
</some kind ... >

DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T08:22:59.787

您可以使用`insert into`..`select`语句。[这篇文章](http://blogs.msdn.com/b/amitjet/archive/2009/12/11/sql-server-comma-separated-string-to-table.aspx)可能会对你有所帮助。这个想法是，您将创建一个函数来拆分逗号分隔的参数值并返回一个表。您将在插入语句中的表。

# javascript - 如何将隐藏的 var 从 html5 发送到 jsf (xhmtl)

> ID：14009576
> 
> 赞同：0
> 
> 时间：2012-12-23T08:13:47.817
> 
> 标签：javascript, html, post, jsf-2, hidden

我正在为学校做一个项目。项目主题是 T 恤设计。我正在使用 jsf 和 primefaces。在一个div中，设计完成了，然后我想将div中的内容保存为图像文件。这是在 html5 画布中完成的。设计保存为 base64。我有个问题。我想将一个隐藏的（dataURL，base64）变量从 html5 发送到 xxx.xhtml。隐藏包括 base64 数据。我能怎么做？

我做以下方面。但它不起作用。我做错了什么？

在 my-jquery.js 中：

```
 $(document).ready(
    function() {
        $("#sendToServer").click(
                function() {
                    var canvas = document.getElementById("design");
                    var dataUrl = canvas.toDataURL("image/png;base64");

                    var hidden = document.getElementById("dataURL");
                    hidden.value = dataURL;
                }); 
}); 
```

在 design.html 中：

```
 <body>
<canvas id="design" width="320" height="260"></canvas>
<form id="sendForm" method="post" action="/Tshirt/demo.xhtml">
    <input type="hidden" id="dataURL"/> 
    <input type="submit"  id="sendToServer" value="Send To Server">
</form>
 </body> 
```

在 xxx.xhtml 中：

```
<h:form>
       <h:inputHidden id="dataURL" value="#{imageBean.dataURL}" />
       <h:commandButton value="Submit" action="#{imageBean.submit}"/>
     </h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T20:45:34.943

JSF 在 webserver 中运行并生成发送到 webbrowser 的 HTML。JS 在 webbrowser 中运行，只能访问 HTML DOM 树。它对JSF 源代码*一无所知。*

在为 JSF Web 应用程序编写 JS 代码时，您无法一目了然地知道 JSF 究竟会生成什么 HTML 代码，那么您应该在 webbrowser 中打开 JSF 页面并右键单击并*查看源代码*。你会看到这样的东西

```
<form id="j_idt42" ...>
    <input type="hidden" id="j_idt42:dataURL" ... /> 
```

这就解释了为什么`document.getElementById("dataURL")`没有给你任何东西。如果您密切关注浏览器的 webdeveloper 工具集中的 JS 控制台（在 Chrome/IE9/Firebug 中按 F12），那么您应该已经注意到了。

您基本上需要这样做`document.getElementById("j_idt42:dataURL")`，但您应该给 JSF`NamingContainer`组件（例如`<h:form>`）一个固定 ID，以便 JSF 不会自动生成一个，然后您不需要在每次添加/删除组件时更改脚本视图，导致自动生成的 ID 发生变化。例如

```
<h:form id="form">
    <h:inputHidden id="dataURL" ... /> 
```

这将产生

```
<form id="form" ...>
    <input type="hidden" id="form:dataURL" ... /> 
```

然后你就可以得到它

```
var hidden = document.getElementById("form:dataURL"); 
```

# jquery - 处理未使用 DOM 加载的元素

> ID：14009577
> 
> 赞同：0
> 
> 时间：2012-12-23T08:13:51.560
> 
> 标签：jquery, dom

我有一个图像，每次都在屏幕上显示我要附加声音的图像。

我的问题是图像没有加载页面 DOM，她在一个 DIV 中，用户需要单击以查看 div 的内容。

如何管理一个 jQuery 代码，该代码将在 DOM 加载后检查图片是否显示，

播放声音的代码：

```
 $('img#alertSound').load(function(){
    $('#imgLoadedSound').get(0).play();
  }); 
```

图像代码：

```
 <div class='bell_img'><img id='alertSound' class='bell' src='bell.png'/> 
```

声音代码：

```
 <audio id="imgLoadedSound" src="bell.mp3"></audio> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:00:58.447

`<img>`在将标签附加到`.bell_img`DIV的函数中运行用于播放声音的代码。如果您发布该代码，我们可以更具体。

# wpf - 将数据库连接（绑定）到 WPF 应用程序

> ID：14009580
> 
> 赞同：0
> 
> 时间：2012-12-23T08:14:58.940
> 
> 标签：wpf, database, visual-studio-2012, sql-server-2012-express

我在 WPF (VS2012) 中创建了一个前端应用程序，我必须将数据库连接到它。

不知道如何将 SQL 数据库与 WPF 应用程序连接。请指导我

提前致谢！

# android - Android 如何处理点击？

> ID：14009582
> 
> 赞同：0
> 
> 时间：2012-12-23T08:15:34.403
> 
> 标签：android

毫无疑问，Android 有一些可靠的方法来确定用户的意思：点击或滚动/移动。是否有任何简单的规则足以构建相同的行为？

这是我的问题。

我有一个控件，它应该被单击并运行它自己的单击处理程序，或者滚动（点击并移动）并使整个视图滚动（我有一个可以双向滚动的自定义视图，如果这很重要，[这就是想法](https://stackoverflow.com/questions/12130999/how-to-make-a-dynamic-layout-that-is-larger-than-screen)）。因此，我设置了一个简单的触摸侦听器，它会记住 MotionEvent.ACTION_DOWN 上的 onTouch 中的点，并在该点未更改时调用 MotionEvent.ACTION_UP 上的单击处理程序。

这在模拟器中运行良好，因为鼠标点击很精确，所以我没有注意到任何危险，而且我在三星 Galaxy S Plus 上也没有遇到任何问题——也许我在点击屏幕时真的很准确。

然而，我的第一个 beta 测试人员抱怨按钮不起作用——不是 100%，而是大多数时候，所以他们需要多次点击按钮，直到它处理点击。他们中的一些人还告诉我，如果用指尖触摸屏幕，按钮的效果会更好。

经过一番思考，我假设他们在单击时可能会移动手指，因此 DOWN 和 UP 上的点不同，并且处理程序没有确定单击。为了验证这一点，我添加了一个允许小漂移的简单改进——这很有帮助！测试人员证实，这个技巧让事情变得更好。这是处理程序的最终代码：

```
// This interface is for a real click handler that may differ depending on control.
interface Clicker {
    boolean click(View v);
}

class ButtonTouchListener implements OnTouchListener {
    private boolean _trackingButtonClick = false;
    private Clicker _clicker;
    // These two integers are the improvement.
    private int downX = 0;
    private int downY = 0;

    public ButtonTouchListener(Clicker clicker) {
        _clicker = clicker;
    }

    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                downX = (int) event.getRawX();
                downY = (int) event.getRawY();
                trackingButtonClick = true;
                // Calling the onTouchEvent of the main view that handles the global scrolling.
                return onTouchEvent(event);
            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_OUTSIDE:
                int newX = (int) event.getRawX();
                int newY = (int) event.getRawY();
                int xOffset = downX - newX;
                int yOffset = downY - newY;
                // These two lines are the improvement also.
                // 10 is a max move distance that I've simply guessed.
                if (Math.abs(xOffset) >= 10 || Math.abs(yOffset) >= 10)
                    _trackingButtonClick = false;
                // Calling the onTouchEvent of the main view that handles the global scrolling.
                return onTouchEvent(event);
            case MotionEvent.ACTION_UP:
                if (_trackingButtonClick) {
                    _trackingButtonClick = false;
                    // Calling the click handler of the control.
                    return _clicker.click((View)v.getTag());
                }
                _trackingButtonClick = false;
                return true;
            default :
                return onTouchEvent(event);
            }
        }
    }
} 
```

所以看起来我猜对了，Android 内部可能有类似的东西。但真的吗？有人知道吗？我不熟悉该平台的任何来源，希望不要在那里挖掘，所以如果有人分享经验，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:38:30.370

你在找一个[`GestureDetector`](http://developer.android.com/reference/android/view/GestureDetector.html)吗？

# javascript - 优化 javascript 代码在数组中搜索匹配项

> ID：14009583
> 
> 赞同：0
> 
> 时间：2012-12-23T08:16:02.093
> 
> 标签：javascript, optimization

基本上，我需要从包含在主字符串中的数组中获取单词

我在这里有一个循环代码，但我认为有一个单行代码可以做到这一点。我需要对代码进行优化，不仅要优化代码长度，还要优化性能。

谢谢

```
var aValidWords = ["ex", "exes", "expert", 
                   "experts", "expertise", "sex", "sexes", 
                   "exchange", "change", "changes"];
var sMainWord = "expertsExchange";
var aPossibleWords = new Array();

var sMainWordLower = sMainWord.toLowerCase();
for(i=0; i < aValidWords.length; i++){
    var sCurrentWord = aValidWords[i].toLowerCase();
    if(sMainWordLower.indexOf(sCurrentWord) != -1){
        aPossibleWords.push(aValidWords[i]);
    }
}

document.write(aPossibleWords.join("<br />")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T16:43:50.507

我比较了三种可能的实现：

**备选方案 1** - 使用 for 循环：

```
function alternative1(aValidWords, sMainWordLower) {
    var aPossibleWords1 = [];
    for(i=0; i < aValidWords.length; i++){
        if(sMainWordLower.indexOf(aValidWords[i]) != -1){
            aPossibleWords1.push(aValidWords[i]);
        }
    }
    return aPossibleWords1;
} 
```

**备选方案 2** - 使用 jQuery [grep](http://api.jquery.com/jQuery.grep/)函数：

```
function alternative2(aValidWords, sMainWordLower) {
    return $.grep(aValidWords, function(word) {
              return sMainWordLower.indexOf(word) != -1;                    
         }
    )
} 
```

**备选方案 3** - 使用 JavaScript 原生[过滤](http://api.jquery.com/jQuery.grep/)方法（IE9、Chrome、Firefox、Opera、Safari）：

```
function alternative3(aValidWords, sMainWordLower) {
    return aValidWords.filter(function(word) {
              return sMainWordLower.indexOf(word) != -1;                    
         }
    )
} 
```

我用 Chrome Profile 工具测量了执行时间。每个备选方案使用随机的百万字数组执行 10 次。结果是：

*   **备选方案**1：20 次执行 -> 21,68 秒
*   **备选方案**2：20 次处决 -> 26,31 秒
*   **备选方案**3：20 次处决 -> 34,66 秒

令我惊讶的是，原生 JavaScript[过滤器](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)功能如此之慢。

如果您不想自己测量执行时间，可以[使用 jsFiddle](http://jsfiddle.net/hfhRC/18/) - 脚本需要一些时间才能完成。

一般来说，这三种选择是最简单的。如果这些执行时间适合您，请使用其中之一，否则@Pumbaa80 的答案是正确的。

## [更新]

有关结果的解释（为什么 JQuery grep 函数比原生 JavaScript 过滤函数更快），请查看这个[问题/答案](https://stackoverflow.com/q/14091065/617996)。 [感谢@Alexander， jsFiddle](http://jsfiddle.net/hfhRC/18/)代码也被移植到了[jsPerf](http://jsperf.com/filterings)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T16:21:20.817

这个循环肯定比你所拥有的更简洁，但值得在各种浏览器中运行一些测试以找出哪个更快。我想正则表达式*匹配*可能更快，但我很好奇编译正则表达式是否会降低性能。

```
for(var i=0; i<aValidWords.length; i++) {
    if (new RegExp(aValidWords[i], 'i').test(sMainWord))
        aPossibleWords.push(aValidWords[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T17:01:41.737

我认为你的代码很不错。

If you're really worried about performance, you may want to try some sophisticated method like [Boyer-Moore](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm). But, if you just have a handful of patterns and relatively short strings, then the initialization overhead is higher than the benefit, so you should stick with the simple approach. See Wikipedia's comparison table [http://en.wikipedia.org/wiki/String_searching_algorithm#Single_pattern_algorithms](http://en.wikipedia.org/wiki/String_searching_algorithm#Single_pattern_algorithms)

# pascal - 帕斯卡最大查找程序

> ID：14009586
> 
> 赞同：0
> 
> 时间：2012-12-23T08:16:36.660
> 
> 标签：pascal

我正在尝试在 Pascal 中实现以下算法。帕斯卡对我来说是新的，所以我不明白问题是什么。该程序试图找到两个整数之间的最大值，如下所示：

```
program maqsimaluri;
function max(a,b:integer):integer;
begin
if a>=b then
max:=a
else
max:=b;
end;
negon
var a:=5;
var b:=4;
write(max(a,b));
end. 
```

但我收到以下错误

```
Free Pascal Compiler version 2.2.0 [2009/11/16] for i386
Copyright (c) 1993-2007 by Florian Klaempfl
Target OS: Linux for i386
Compiling prog.pas
prog.pas(10,5) Error: Illegal expression
prog.pas(10,9) Error: Illegal expression
prog.pas(10,9) Fatal: Syntax error, ";" expected but "identifier A" found
Fatal: Compilation aborted
Error: /usr/bin/ppc386 returned an error exitcode (normal if you did not specify a source file to be compiled) 
```

见[http://ideone.com/0NH6Km](http://ideone.com/0NH6Km)

什么可能导致此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T11:50:02.800

在说出什么问题之前，我建议您缩进您的代码。例如，你的函数体应该向右移动两个空格。这可以帮助您捕获一些错误并提高可读性。

现在的错误：我真的不知道，为什么你的代码中有一个“negon”指令，但在 ideone 上它不存在。但这不是问题，因为您的变量声明是错误的。首先，它们放错了位置，因为它们应该放在主程序的关键字“开始”之前。据我所知，你不能在 Pascal 的代码中声明变量，但你必须事先做。其次，你必须指定类型，变量都有。Pascal 是一种强大的类型安全语言，它会检查变量值是否适合其类型。在这种情况下，它可能是“整数”。第三，您不能在其声明中给变量值。您必须稍后在代码中执行此操作。

我建议您阅读一些有关 Pascal 编程的基本文章。对于基础知识，即使是[来自 Wikipedia 的 wikibook Pascal Tutorial](http://en.wikibooks.org/wiki/Pascal)也足够了。

这是您的代码的一个版本，它实际运行并提供正确的输出：

```
program maqsimaluri;

  function max(a,b:integer):integer;
  begin
    if a>=b then
      max:=a
    else
      max:=b
  end;

var
  a,b: Integer;

begin
  a:=5;
  b:=4;
  write(max(a,b))
end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:58:26.350

当然，单元数学为各种类型预定义了 MAX（作为内联）

```
uses math;

var
  a,b: Integer;

begin
  a:=5;
  b:=4;
  write(max(a,b))
end. 
```

# sql-server-ce - 无法在 Webmatrix 的 SQL Server Compact 表格 单元格中粘贴多行文本

> ID：14009587
> 
> 赞同：0
> 
> 时间：2012-12-23T08:16:49.037
> 
> 标签：sql-server-ce, copy-paste, webmatrix

我正在学习使用 ASP.NET 网页和 SQL Server Compact 在 Webmatrix 中创建一个数据库驱动的网站。我想在数据库表中手动输入数据，但是当我尝试在表格单元格中粘贴带有换行符的文本块时，只粘贴了第一行。

如何将带有换行符的文本粘贴到 SQL Server Compact 数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:18:55.783

如果您有 MS Office，那么您可以使用 Access 甚至 Excel 使用 ODBC 连接到 SQL Server。

# php - 从 javascript 编码 json 并使用 php 解码

> ID：14009588
> 
> 赞同：4
> 
> 时间：2012-12-23T08:16:58.443
> 
> 标签：php, javascript, json

我必须使用 javascript 将一组电子邮件地址编码为 json 字符串并使用 ajax 发送到 abc.php。在 abc.php 中，我必须对其进行解码并将电子邮件发送到该数组中的所有地址。

目前我正在使用将数组编码为json

```
var json_string = JSON.stringify(myarray); 
```

在 abc.php 我正在解码它使用

```
$emails = json_decode($_POST['json_string']);
// json_string was passed as POST variable using ajax 
```

但它在打印时给出 NULL..

我如何对其进行解码并访问 php 文件中的单个电子邮件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:52:10.267

如果您可以访问网络服务器的 php.ini，最好的办法是完全禁用 magic_quotes，因为它们已被*弃用*：

```
; Magic quotes
;

; Magic quotes for incoming GET/POST/Cookie data.
magic_quotes_gpc = Off

; Magic quotes for runtime-generated data, e.g. data from SQL, from exec(), etc.
magic_quotes_runtime = Off

; Use Sybase-style magic quotes (escape ' with '' instead of \').
magic_quotes_sybase = Off 
```

如果您没有服务器访问权限，请使用带有以下选项的 .htaccess 文件

```
php_flag magic_quotes_gpc Off 
```

如果您不想使用它，剩下的最后一件事就是使用 unescape 函数，例如

```
function ref_stripslashes(&$value,$key) {
    $value = stripslashes($value);
}

if((function_exists("get_magic_quotes_gpc") && get_magic_quotes_gpc()) || (ini_get('magic_quotes_sybase') && (strtolower(ini_get('magic_quotes_sybase'))!="off")) ) {
    array_walk_recursive($_GET,'ref_stripslashes');
    array_walk_recursive($_POST,'ref_stripslashes');
    array_walk_recursive($_COOKIE,'ref_stripslashes');
} 
```

这取自[php 手册，路西法的评论](http://php.net/manual/en/function.get-magic-quotes-gpc.php)

`json_decode($_POST['json_string'])`然后应该工作。

# javascript - 使用 Greasemonkey 从 YouTube 中删除列表项

> ID：14009590
> 
> 赞同：0
> 
> 时间：2012-12-23T08:17:04.573
> 
> 标签：javascript, youtube, greasemonkey

正如标题所解释的，我正在尝试主要为 Greasemonkey 创建一个脚本，以摆脱`</li>`YouTube 中空白的第一个列表项。我不太擅长 JavaScript，但了解全部基础知识。

我知道我必须做一个`document.body.(etc)`，但不知道该怎么做。下图显示了树，`</li>`我要删除的标签突出显示。对不起，它有点小，但只是放大它，放大时可能有点模糊，但它是可读的。

![OP的图像太小](../Images/be469e156ab93f851f63dee0593e46f8.png)

如果您能为我可以使用的代码提供一些基础，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:57:59.530

`li`您希望删除的元素似乎已经有一个`id`, 即`feed-pyv-container`.
因此，您可以简单地使用以下代码将其删除。

```
var li = document.getElementById('feed-pyv-container');
li.parentNode.removeChild(li); 
```

# java - 具有单向 @OneToMany 和 @OrderColumn 的 JPA 插入顺序

> ID：14009591
> 
> 赞同：0
> 
> 时间：2012-12-23T08:17:13.450
> 
> 标签：java, orm, jpa-2.0, eclipselink

我们使用 JPA 2.0 和 EclipseLink 作为我们的 ORM 提供者。数据库是oracle 11g。

在我们的数据模型中，我们有两个实体，如下所示，由单向 @OneToMany 关系映射。

```
@Entity
@Table(name = "v_page")
public class Page {

    @Id
    @GeneratedValue(generator = "g_page")
    @SequenceGenerator(name = "g_page", sequenceName = "sq_page")
    private long id;

    @Column(name = "navigation_id")
    private String navigationId;

    @Column
    private String title;

    @OneToMany(cascade = ALL, fetch = EAGER)
    @JoinColumn(name = "page_id")
    @OrderColumn(name = "position")
    private List<Section> sections = new ArrayList<>();
} 
```

第二个实体，部分：

```
@Entity
@Table(name = "v_section")
public class Section {

    @Id
    @GeneratedValue(generator = "g_section")
    @SequenceGenerator(name = "g_section", sequenceName = "sq_section")
    private long id;

    @Column
    private String title;

    @Column
    @Lob
    private String content;
} 
```

创建带有部分的页面并将它们插入数据库可以正常工作。唯一的问题是 EclipseLink 为每个插入部分生成两个 SQL 语句。

```
INSERT INTO v_page (ID, navigation_id, TITLE, manual_id) VALUES (?, ?, ?, ?)
INSERT INTO v_section (ID, CONTENT, TITLE) VALUES (?, ?, ?)
INSERT INTO v_section (ID, CONTENT, TITLE) VALUES (?, ?, ?)
UPDATE v_section SET position = ?, page_id = ? WHERE (ID = ?)
UPDATE v_section SET position = ?, page_id = ? WHERE (ID = ?) 
```

这可以防止我们在 page_id 和 position 列上设置非空约束。

我不明白为什么 EclipseLink 不应该能够将插入和更新组合到单个插入中，因为此时已经创建了拥有实体页面。我们可以做些什么来让 EclipseLink 只生成单个插入？

# jquery - 调整大小和定位图像不起作用

> ID：14009592
> 
> 赞同：0
> 
> 时间：2012-12-23T08:17:21.567
> 
> 标签：jquery

我正在根据用户的屏幕尺寸在加载时调整一些叠加图像的大小。但问题是每次加载时它都不起作用。如果我刷新太多次，它会工作一次。不知道问题出在哪里，因为也没有错误。我也签入了 chrome 和 firefox 开发人员工具。这是我的代码，任何人都可以建议这里有什么问题。

```
(function($){ 
$(window).load(function() {
var Height=$(window).height(); // New height
var Width=$(window).width(); // New width
$('.content-container').css('background-size', Width + 'px' + ' ' + Height + 'px');
$('.weare_map').height(Height*.54);
$('.invent_div').height(Height*.4);
var top2= ($(window).scrollTop());
$('.invent_div img').css('top',top2*.4);
$('.weare_map.map1').css('top',top2*.3);
$('.weare_map.pixels').css('top',top2*.2);
$('.weare_map.wearefaces').css('top',top2*.05);
  $('.content').css('height',Height + 'px');

});

$(window).resize(function() {
  // This will execute whenever the window is resized

var Height=$(window).height(); // New height
var Width=$(window).width(); // New width
$('.content-container').css('background-size', Width + 'px' + ' ' + Height + 'px');
var overlayw=$('.content-container').width();
var overlayh=$('.content-container').height();
$('.weare_map').height(Height*.54);
$('.invent_div').height(Height*.4);
var top2= ($(window).scrollTop());
$('.invent_div img').css('top',top2*.4);
$('.weare_map.map1').css('top',top2*.3);
$('.weare_map.pixels').css('top',top2*.2);
$('.weare_map.wearefaces').css('top',top2*.05);
$('.overlay').css('background-size', overlayw + 'px' + ' ' + Height + 'px');
$('.content').css('height',Height + 'px');

});

        })(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:58:28.717

我可以看到您正在尝试使用滚动条位置来实现视差效果（对话证实了这一点），但您没有对其更改做出反应（即，`scrollTop`页面加载时几乎总是 0）。你也应该听听这些[`scroll`事件](http://api.jquery.com/scroll/)。尝试：

```
$(window).on("load resize scroll", function(){
  var height=$(window).height(); // New height
  var width=$(window).width(); // New width
  ...

}); 
```

交替：

```
function recalculatePositions(){
  var Height=$(window).height(); // New height
  var Width=$(window).width(); // New width
  ...

}

$(window).on("load resize scroll", recalculatePositions);
  // $(window).load(function) has been deprecated 
```

# c# - 文本框空文本

> ID：14009593
> 
> 赞同：3
> 
> 时间：2012-12-23T08:17:24.270
> 
> 标签：c#, silverlight

我希望在文本框中有一个灰色的信息文本，以避免需要所有内容的标签。

像这样的东西：
![](../Images/3f6ad69d35f5f0c82eedf67f99bd7854.png)

在 WPF 中，我会使用触发器等，但在 Silverlight 中，我不确定应该如何完成。Silverlight 在某处是否有这样的现有控件？

这是使用 WPF 和触发器完成的链接：[https ://stackoverflow.com/a/7433840/184746](https://stackoverflow.com/a/7433840/184746)

# sql - 从员工表查询中检索工资

> ID：14009594
> 
> 赞同：2
> 
> 时间：2012-12-23T08:17:56.133
> 
> 标签：sql, db2

我正在通过这个链接[http://javarevisited.blogspot.in/2012/12/how-to-find-second-highest-or-maximum-salary-sql.html](http://javarevisited.blogspot.in/2012/12/how-to-find-second-highest-or-maximum-salary-sql.html)显示从 Employee 表中检索第二高薪水, 参考示例中的表模式，请教如何从员工表本身中找到第三高或第四高的薪水

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T09:37:08.970

那里有一个示例说明对于 MySQL，您可以通过

```
SELECT salary FROM 
  (SELECT salary FROM Employee ORDER BY salary DESC LIMIT 2) AS emp 
ORDER BY salary LIMIT 1 
```

如果您替换`2`为`3`，您将获得第三高。子查询选择`n`最高薪水，然后外部查询选择该结果中最低的。

该方案可以与任何 RDBMS 一起使用，只是语法略有不同。对于 DB2，我认为以下应该有效（但我目前无法验证）：

```
SELECT salary FROM 
  (SELECT salary FROM Employee ORDER BY salary DESC FETCH FIRST 2 ROWS ONLY) AS emp 
ORDER BY salary FETCH FIRST ROW ONLY 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T09:39:32.967

```
select * from (
  select * from employee
  order by salary desc
  limit 4) x
order by salary
limit 1; 
```

您应用两个限制：一个用于内部查询以获取前 4 行，然后另一个限制用于从中获取最低行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T15:13:06.233

您最好的办法是使用`DENSE_RANK`OLAP 函数来定义排名，然后选择您需要的任何有序值。例如，要查找第三高的薪水：

```
SELECT MAX(salary)
FROM (
   SELECT DENSE_RANK() OVER (ORDER BY salary DESC) AS rank
        , salary 
   FROM employee
   ) AS xxx
WHERE rank = 3 
```

`DENSE_RANK`将处理数据中的任何“关系”。由于可能有不止一名员工具有相同的薪水，因此请使用该`MAX`功能仅保留一名。该`limit 1`语法也可能有效，但我从未使用过。

# php - 如何从文本创建可点击按钮

> ID：14009595
> 
> 赞同：-1
> 
> 时间：2012-12-23T08:17:56.997
> 
> 标签：php, html

我的目标是从文本创建一个可点击的按钮。我想拍摄一张图片 - 一个圆形按钮，并将其与文本结合起来。我知道在 HTML5 中有一种超级简单的方法可以做到这一点，但我不确定我是否愿意不支持旧版浏览器。

有没有办法获取圆形按钮的图像，从其他地方（在本例中为数据库）获取文本，并使整个内容可点击？

请注意，这将是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:22:53.630

有很多方法可以做到这一点，例如，您可以创建一个包含两个元素的 div，一个是图像，另一个是文本，并动态加载两者，您可以将 div 作为图像的背景并将文本作为内容，您可以在服务器端生成整个东西并返回完整的图像等。

哦，您还可以创建一个带有文本的按钮元素；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T08:26:24.240

一种可能的解决方案是通过 PHP 图形库简单地生成按钮图像。这样，您的服务器处理图像和文本，您不必担心浏览器（尽管您可能想检查按钮的大小是否不会破坏您的站点布局，如果它真的是动态的）。

# javascript - EmberJS Action 以数组中的对象为目标

> ID：14009597
> 
> 赞同：2
> 
> 时间：2012-12-23T08:18:10.783
> 
> 标签：javascript, ember.js

鉴于以下 jsfiddle：http: [//jsfiddle.net/EasyCo/KTmKh/5/](http://jsfiddle.net/EasyCo/KTmKh/5/)

我认为这很简单，但我很挣扎。

我有一个对象，在对象中我有一个属性，它是具有属性的对象数组。

```
// Create an instance
var drt = window.App.TowelObj.create({
    name: "Dry Towel",
    availableIn: [
        {
        color: "red",
        size: "small"},
    {
        color: "blue",
        size: "medium"}
    ],
    wetness: 0,
    isEditing: true
}); 
```

我遍历数组并列出属性值。

```
<script type="text/x-handlebars" id="towels">

{{#each availableIn}}
    <div>
        <a {{action doStuff target="controller" context="color"}}>{{color}}</a>
    </div>
{{/each}}

</script> 
```

当有人单击属性值时，我只想能够将其更新为任何值。例如，当他们单击颜色时，我希望颜色属性值更新为...紫色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T09:07:21.280

如此接近，您必须参考过时的文档。动作助手现在将可选的第三个（或更多）参数作为上下文。

```
<a {{action doStuff color target="controller"}}>{{color}}</a> 
```

见[http://jsfiddle.net/4EyB8/](http://jsfiddle.net/4EyB8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T22:49:59.887

好吧，我将不得不在这个问题上回答我自己的问题。正如@peter-wagenet 和@bradley-priest 所建议的那样，我确实需要利用动作助手发送上下文的能力。

这与`{{#each item in list}}`我一起使用可以将上下文设置为正在查看的特定对象。

我还必须为对象的 availableIn 数组创建 Ember.Object(s)，以便我可以使用 .set 方法。

因此，事不宜迟，这是我的工作解决方案。如果您有更好的解决方案，我会很高兴看到它。

模板

```
<script type="text/x-handlebars" id="application">
    <h1>If you're gonna survive out here, you've got to know where your towel is.</h1>
    {{outlet}}
</script>
<script type="text/x-handlebars" id="towel">
    <h2>The availableIn:</h2>
    {{outlet}}
</script>
<script type="text/x-handlebars" id="towels">

{{#each item in availableIn}}
    <div>
        {{! The default click action will find the controller and look for doStuff and send it the event with the context set to item }}
        <a {{action doStuff item target="controller"}}>{{item.color}}</a>
    </div>
{{/each}}

</script> 
```

Javascript

```
window.App = Ember.Application.create({
    ready: function() {
        this.initialize();
    }
});

window.App.Router = Ember.Router.extend({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            connectOutlets: function(router) {
                var controller = router.get('applicationController');
                controller.connectOutlet('towel');
                controller = router.get('towelController');
                controller.connectOutlet('towels');
            }
        })
    })
});

window.App.ApplicationView = Ember.View.extend({
    templateName: 'application'
});

window.App.ApplicationController = Ember.Controller.extend();

window.App.TowelController = Ember.ObjectController.extend();

window.App.TowelView = Ember.View.extend({
    templateName: 'towel'
});

// Towel Object model
window.App.Towel = Ember.Object.extend({
    name: null,
    availableIn: [],
    wetness: 0,
    isEditing: false
});

// Style Object model
window.App.Style = Ember.Object.extend({
    color: null,
    size: null
});

// Create some style instances
var style1 = window.App.Style.create({
    color: "red",
    size: "small"
});

var style2 = window.App.Style.create({
    color: "blue",
    size: "medium"
});

// Create a towel instance
var drt = window.App.Towel.create({
    name: "Dry Towel",
    availableIn: [style1, style2],
    wetness: 0,
    isEditing: true
});

// The Towels Controller
window.App.TowelsController = Ember.ObjectController.extend({
    // Set the content to our dummy data
    content: drt,

    // Define the action doStuff
    doStuff: function(event) {

        // Grab the context which is the object being cliked and change it's color property to 'purple'
        event.context.set('color', 'purple');         
    }
});

// The Towels View
window.App.TowelsView = Ember.View.extend({
    templateName: 'towels'
});​ 
```

工作小提琴：http: [//jsfiddle.net/EasyCo/cE2xP/](http://jsfiddle.net/EasyCo/cE2xP/)

# java - 如何将 Java 放入 GameMaker Studio？

> ID：14009598
> 
> 赞同：1
> 
> 时间：2012-12-23T08:19:06.840
> 
> 标签：java, android, game-maker

我正在使用 GameMaker Studio，并计划将它用于我的下一个 Android 项目。但是我不确定，如何将 java 库（jar 文件）添加到其中？

例如，如果我想在其中实现 LeadBolt 的 SDK……或者如果我有自己的库来录制进入麦克风的声音……我可以将这些库添加到 GameMaker Studio 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:17:50.230

你不能——至少现在还不能。

对于移动系统出口，GM:Studio 不支持扩展。
[在路线图](http://wiki.yoyogames.com/index.php/GameMaker%3aStudio_Roadmap)中，您可以看到计划从 1.3 版本开始支持扩展。当前版本线是“1.1”，所以这个功能还需要几个月的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T23:49:38.950

见[http://www.gmc.yoyogames.com/index.php?showtopic=566396](http://www.gmc.yoyogames.com/index.php?showtopic=566396)。但是，这个项目不是官方的，也不是完全支持的。我也不知道它是否支持JAR。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-10T16:23:37.727

我看到这是一个老话题，但是对于任何感兴趣的人来说，这样做的方法是右键单击您的扩展程序，选择在资源管理器中打开，然后转到 android 源文件夹并创建一个名为 libs 的文件夹（如果它还没有那里），接下来将您的 jar 文件放入该文件夹，并将您的 sdk 文件夹也放入其中。之后它应该可以工作了，如果没有，还有一件事要做，在 gamemaker 中回到你的扩展，这次双击它并选择 android 选项卡，并将这行代码添加到 gradle 依赖项部分：

```
 compile fileTree(dir: 'libs', include: ['*.jar']) 
```

这适用于 GMS 1.3 及更高版本，也适用于 GMS 2。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-28T15:20:36.553

这里接受的答案不再相关或正确。

GameMaker Studio 1.4 和 2.0（最新版本）以及较旧的 1.3，允许您将任何想要包含的 jar 文件放入扩展程序的*AndroidSource/libs*文件夹中。

所以这是**PROJECT_FOLDER/extensions/YOUR_EXTENSION_FOLDER/AndroidSource/libs**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-06T16:53:25.193

此功能在抢先体验 1.3 中。现在尝试在 Eclipse 和链接库中打开项目，这非常困难，但可能。

PS 在早期访问中为 C 添加了功能。它将是 .so 库。

# php - 尝试使用 mysqldump 和 exec 进行数据库备份时无法打开流错误

> ID：14009599
> 
> 赞同：0
> 
> 时间：2012-12-23T08:19:14.437
> 
> 标签：php, exec, mysqldump

使用以下代码，我得到*警告： file(filename.sql.gz) [function.file]: failed to open stream: No such file or directory*。我究竟做错了什么？

```
$command = "mysqldump -u $dbuser -h localhost --password=$dbpwd $dbname | gzip > $filename";
exec($command);

if ($sendEmail)
{
$attachmentname = basename($filename);

$message = "Compressed database backup file $attachmentname attached.";
$mime_boundary = "<<<:" . md5(time());
$data = chunk_split(base64_encode(implode("", file($filename))));

$headers = "From: $from\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-type: multipart/mixed;\r\n";
$headers .= " boundary=\"$mime_boundary\"\r\n";

$content = "This is a multi-part message in MIME format.\r\n\r\n";
$content.= "--$mime_boundary\r\n";
$content.= "Content-Type: text/plain; charset=\"iso-8859-1\"\r\n";
$content.= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$content.= $message."\r\n";
$content.= "--$mime_boundary\r\n";
$content.= "Content-Disposition: attachment;\r\n";
$content.= "Content-Type: Application/Octet-Stream; name=\"$attachmentname\"\r\n";
$content.= "Content-Transfer-Encoding: base64\r\n\r\n";
$content.= $data."\r\n";
$content.= "--$mime_boundary\r\n";

mail($to, $subject, $content, $headers);
}

if (!$keepFile) unlink($filename);
?> 
```

# jquery - 如何在页面加载后立即加载弹出窗口

> ID：14009601
> 
> 赞同：0
> 
> 时间：2012-12-23T08:19:32.767
> 
> 标签：jquery, popup, modal-dialog, pageload

我有一个脚本可以在单击时加载弹出窗口。是否可以在页面加载时自动加载弹出窗口？这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml">
   <head>
<title>A Simple Lightweight jQuery Modal Popup Box.</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<link href="modalPopLite.css" rel="stylesheet" type="text/css" />
<script src="modalPopLite.min.js" type="text/javascript"></script>

<style type="text/css">
    /* CSS Reset */
    body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td { 
        margin:0;
        padding:0;
        font-family: Verdana, Arial, "Lucida Grande", sans-serif;
    }        

    #clicker
    {
        font-size:20px;
        cursor:pointer;
    }
    #popup-wrapper
    {
        width:500px;
        height:300px;
        background-color:#ccc;
        padding:10px;

    }
    body
    {
        padding:10px;
    }
</style>

<script type="text/javascript">
    $(function () {

        $('#popup-wrapper').modalPopLite({ openButton: '#clicker', closeButton: '#close-btn', isModal: true });

    });
</script>

    </head>
     <body>    
<div id="clicker">
    Click Me!
</div>

<div id="popup-wrapper">
    I am a popup box. Content can be anything. <br />
    <a href="#" id="close-btn">Close</a>
</div>
</body>
</html> 
```

完整代码位于[http://www.mywebdeveloperblog.com/my-jquery-plugins/modalpoplite](http://www.mywebdeveloperblog.com/my-jquery-plugins/modalpoplite)

有什么建议么？:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-23T08:44:52.143

该插件似乎没有按需显示弹出窗口的方法。所以你必须模拟点击 clicker 元素：

```
$(function () {

    $('#popup-wrapper').modalPopLite({ openButton: '#clicker', closeButton: '#close-btn', isModal: true });

    $('#clicker').click(); /* Display popup */

}); 
```

# c++ - 具有两个值的双链表节点

> ID：14009602
> 
> 赞同：-4
> 
> 时间：2012-12-23T08:19:39.320
> 
> 标签：c++, linked-list

所以如果我有一个双链表，我想添加一个名字和一个年龄，这样我就可以分别搜索我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:12:07.087

链表非常适合在多个键中排序：

```
 item0:   age=1             item1:    age=99;
          name='z'                    name='a';
          next_age=item1              next_age=NULL;
          next_name=NULL              next_name=item0 
```

基本上唯一需要考虑的额外事情是如何安排列表遍历算法以共享并且不知道下一个/上一个链接的位置。

一种解决方案是将列表结构包装为：

```
 struct list_s {
        struct list_s *next;
        struct list_s *prev;
        void *key_ptr;
        struct master_struct_s *parent;
 }

 struct master_struct_s {
        struct list_s key1;
        struct list_s key2;
        struct list_s key3;
        int other_data;
 } 
```

现在列表排序算法可以与 &key1、&key2 或 &key3 一起使用，并且可能引用 other_data 的内容，因为每个列表结构都引用“父”结构或它们自己的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:00:58.133

你问，

> “所以如果我有一个双链表，我想添加一个名字和一个年龄，这样我就可以分别搜索，我该怎么做？”

实际上，您不会为此目的实现双向链表。相反，您将使用标准库容器，例如`std::vector`. 或`std::map`。

但鉴于这是为了学习，问题是问题是什么……

我*想*你在问，你怎么能让每个节点同时参与两个链表。

一种简单的方法是让列表节点只包含指向数据节点的指针。俗话说，任何计算机科学问题的解决方案都是额外的间接层。当然这也是解决过多间接问题的方法。:-p

# python - 构建 Boost Python 调试

> ID：14009603
> 
> 赞同：4
> 
> 时间：2012-12-23T08:19:39.853
> 
> 标签：python, boost, python-3.x, boost-python, python-embedding

我绝对不是`bjam`专家，所以如果它真的很愚蠢，请原谅我的无知。

我正在尝试构建一个使用[本教程](http://www.mantidproject.org/Building_Boost_Python)`debug`的版本。`boost::python`

我已经`Python 3.3.0`在我的文件夹中建立了`C:\Development\Python-3.3.0`。构建是有效的`.lib`，`.dll`和`.exe`都存在于`PCBuild`文件夹中。我测试了解释器，它工作正常。

我正在使用以下命令行：

```
bjam --user-config=user-config.jam --with-python python-debugging=on threading=multi variant=debug link=shared stage 
```

我的问题来自`user-config.jam`. 我尝试遵循本教程的规范，使用以下内容：

```
using python : 3.3 : C:\\Development\\Python-3.3.0\\PCBuild\\python_d.exe
    : C:\\Development\\Python-3.3.0\\Include C:\\Development\\Python-3.3.0\\PC
    : C:\\Development\\Python-3.3.0\\PCBuild
    : <python-debugging>on ; 
```

但是链接失败......由于某种原因，我希望它使用 3.3 似乎并没有发现，这是输出日志的一部分：

```
...updating 10 targets...
msvc.link.dll bin.v2\libs\python\build\msvc-11.0\debug\python-debugging-on\threa
ding-multi\boost_python-vc110-mt-gyd-1_52.dll
LINK : fatal error LNK1104: cannot open file 'python26_d.lib'

        call "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.b
at" x86 >nul
link /NOLOGO /INCREMENTAL:NO /DLL /DEBUG /MACHINE:X86 /subsystem:console /out:"b
in.v2\libs\python\build\msvc-11.0\debug\python-debugging-on\threading-multi\boos
t_python-vc110-mt-gyd-1_52.dll" /IMPLIB:"bin.v2\libs\python\build\msvc-11.0\debu
g\python-debugging-on\threading-multi\boost_python-vc110-mt-gyd-1_52.lib" /LIBPA
TH:"C:\Development\Python-3.3.0\PCBuild"   @"bin.v2\libs\python\build\msvc-11.0\
debug\python-debugging-on\threading-multi\boost_python-vc110-mt-gyd-1_52.dll.rsp
" 
```

我尝试对`user-config.jam`. 起初，我没有逃脱`\`，令人惊讶的是，它检测到我想构建 3.3 但`/LIBPATH`错误（没有反斜杠）：

```
...updating 10 targets...
msvc.link.dll bin.v2\libs\python\build\msvc-11.0\debug\python-debugging-on\threa
ding-multi\boost_python-vc110-mt-gyd-1_52.dll
LINK : fatal error LNK1181: cannot open input file 'python33_d.lib'

        call "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.b
at" x86 >nul
link /NOLOGO /INCREMENTAL:NO /DLL /DEBUG /MACHINE:X86 /subsystem:console /out:"b
in.v2\libs\python\build\msvc-11.0\debug\python-debugging-on\threading-multi\boos
t_python-vc110-mt-gyd-1_52.dll" /IMPLIB:"bin.v2\libs\python\build\msvc-11.0\debu
g\python-debugging-on\threading-multi\boost_python-vc110-mt-gyd-1_52.lib" /LIBPA
TH:"C:DevelopmentPython-3.3.0PCBuild"   @"bin.v2\libs\python\build\msvc-11.0\deb
ug\python-debugging-on\threading-multi\boost_python-vc110-mt-gyd-1_52.dll.rsp" 
```

如您所见，它正在寻找`python33_d.lib`，这是所需的，但`/LIBPATH`不包含`\`. 我也尝试用`/`which 再次返回尝试链接`python26_d.lib`。

如果它有用，我卸载了任何以前安装的 Python 版本。

如何使我的`jam`文件正确地需要 3.3 版并提供正确的路径？

**编辑：**玩得更多，我在...之前删除了“空格” `;`...只是这样做使它寻找正确的版本`3.3`，但它试图从相关`libs`文件夹链接发布版本...最坏的情况我不会不介意将库从复制`PCBuild`到`libs`

```
using python : 3.3 : C:\\Development\\Python-3.3.0\\PCBuild\\python_d.exe
    : C:\\Development\\Python-3.3.0\\Include C:\\Development\\Python-3.3.0\\PC
    : C:\\Development\\Python-3.3.0\\PCBuild
    : <python-debugging>on; 
```

有趣的是，它最接近我想要实现的目标，但它输出

```
C:\Development\boost_1_52_0\boost_1_52_0\user-config.jam:4: syntax error at EOF 
```

`jam`解析器似乎很弱......任何提示或提示都会有所帮助

**编辑 2：**试图简化问题，我将其更改`user-config.jam`为仅包含以下内容：

```
using python : 3.3 ; 
```

并使用以下命令行：

```
bjam --user-config=user-config.jam --with-python threading=multi variant=release link=shared stage 
```

正如预期的那样，它找不到`.lib`

```
...updating 4 targets...
msvc.link.dll bin.v2\libs\python\build\msvc-11.0\release\threading-multi\boost_p
ython3-vc110-mt-1_52.dll
LINK : fatal error LNK1181: cannot open input file 'python33.lib'

        call "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.b
at" x86 >nul
link /NOLOGO /INCREMENTAL:NO /DLL /MACHINE:X86 /subsystem:console /out:"bin.v2\l
ibs\python\build\msvc-11.0\release\threading-multi\boost_python3-vc110-mt-1_52.d
ll" /IMPLIB:"bin.v2\libs\python\build\msvc-11.0\release\threading-multi\boost_py
thon3-vc110-mt-1_52.lib" /LIBPATH:"C:\Development\Python-3.3.0\libs"   @"bin.v2\
libs\python\build\msvc-11.0\release\threading-multi\boost_python3-vc110-mt-1_52.
dll.rsp" 
```

所以我决定将我的`PCBuild`文件夹克隆到`libs`其中，以便可以访问我构建的所有库......但这样做之后，无需更改`.jam`或命令行......它现在正在寻找 Python 2.6？！？

```
...updating 4 targets...
msvc.link.dll bin.v2\libs\python\build\msvc-11.0\release\threading-multi\boost_p
ython3-vc110-mt-1_52.dll
LINK : fatal error LNK1104: cannot open file 'python26.lib'

        call "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\vcvarsall.b
at" x86 >nul
link /NOLOGO /INCREMENTAL:NO /DLL /MACHINE:X86 /subsystem:console /out:"bin.v2\l
ibs\python\build\msvc-11.0\release\threading-multi\boost_python3-vc110-mt-1_52.d
ll" /IMPLIB:"bin.v2\libs\python\build\msvc-11.0\release\threading-multi\boost_py
thon3-vc110-mt-1_52.lib" /LIBPATH:"C:\Development\Python-3.3.0\libs"   @"bin.v2\
libs\python\build\msvc-11.0\release\threading-multi\boost_python3-vc110-mt-1_52.
dll.rsp" 
```

我越深入，我就越困惑......而且，一个失败了，另一个失败`LNK1104`了`LNK1181`......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T07:04:56.390

好吧，我最终决定`bjam`从一开始就剥离所有可能的参数并构建。我终于`bjam`可以使用这个命令行构建每个可能的目标：

```
 bjam --user-config=user-config.jam --with-python 
```

其中`user-config.jam`仅包含以下内容：

```
using python : 3.3 : C:\\Development\\Python-3.3.0\\PCBuild\\python.exe
    : C:\\Development\\Python-3.3.0\\Include C:\\Development\\Python-3.3.0\\PC
    : C:\\Development\\Python-3.3.0\\PCBuild : ; 
```

它现在**似乎**工作正常。

谢谢

# macos - Homebrew R 构建缺少开罗

> ID：14009606
> 
> 赞同：5
> 
> 时间：2012-12-23T08:20:16.483
> 
> 标签：macos, r, homebrew, cairo, cran

我使用 brew 在 OSX 10.7.5 服务器上安装了 R：

```
brew install R 
```

到目前为止一切似乎都很好，但是开罗没有工作：

```
> svg(tempfile())
Warning messages:
1: In svg(tempfile()) :
  unable to load shared object '/usr/local/Cellar/r/2.15.2/R.framework/Resources/library/grDevices/libs//cairo.so':
  dlopen(/usr/local/Cellar/r/2.15.2/R.framework/Resources/library/grDevices/libs//cairo.so, 6): image not found
2: In svg(tempfile()) : failed to load cairo DLL 
```

共享对象文件似乎完全丢失了：

```
id-86-243:Resources jeroen$ ls -ltr library/grDevices/libs/
total 488
-rwxrwxr-x  1 jeroen  admin  245764 Dec 22 17:03 grDevices.so 
```

我很少使用 OSX，所以我不太确定这是否是这个特定 R 发行版中的错误，或者我在构建它时做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-10T22:45:22.317

我刚刚遇到了这个问题。在 R 配置阶段`pkg-config`定位似乎是一个问题。`cairo`解决方法似乎是：

```
export PKG_CONFIG_PATH=/opt/X11/lib/pkgconfig 
```

以便 R 可以正确使用`cairo`.

我直接从源代码安装 R，而不是使用`homebrew`.，但我确实用于`homebrew`使其他库保持最新。这解决了我的问题。

作为参考，我正在运行 OSX Mavericks。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-09T13:37:03.267

最终对我有用的是使用 cairo 显式构建 R（brew 的默认 R 水龙头使用`--without-cairo`并简单地编辑水龙头并不能解决我的问题）。

这一切都在这篇精彩的博客文章中进行了解释：[https ://luispuerto.net/blog/2018/05/11/installing-r-with-homebrew-with-all-the-capabilities/](https://luispuerto.net/blog/2018/05/11/installing-r-with-homebrew-with-all-the-capabilities/)

在 macOS Catalina 10.15.6 下使用 R 4.0.2、cairo 1.16.0_3 对我来说就像一个魅力。

# javascript - Javascript 用 jQuery 函数替换函数

> ID：14009609
> 
> 赞同：3
> 
> 时间：2012-12-23T08:20:29.600
> 
> 标签：javascript, jquery, javascript-framework, jquery-events

我有一个 Javascript 函数，当被调用时，它会显示 CSS div `#mapLoading`并附加 style `display:block`。完成此操作的代码行如下：

## **代码 #1**

```
 mapLoading.style.display = "block"; 
```

该功能的全部内容显示在此问题的底部。

* * *

我还有以下 jQuery 代码，`.weareloading`当鼠标悬停在元素上时附加 CSS 类，然后`.weareloading`在 CSS3 动画（旋转和淡入）完成后删除该类。

## **代码 #2**

```
$("#mapLoading").hover(function(){
  $(this).addClass("weareloading");})
$("#mapLoading").bind("webkitAnimationEnd mozAnimationEnd animationEnd", function(){
  $(this).removeClass("weareloading")  
}) 
```

* * *

我想做的 - 以及这个问题的原因 - 如下：

*   将**代码 #1**替换为 Javascript 函数中的**代码 #2**
*   **删除代码 #2**中的鼠标悬停要求，以便下面显示的函数简单地添加类，然后在动画完成`.weareloading`后删除该类。`.weareloading`

不幸的是，整个程序很复杂，包含很多文件，所以我无法在 jsFiddle 上提供一个实时示例。但是，这里是上面引用的 Javascript 函数，它有望为这个问题提供足够的上下文：

*第 2 行包含代码 #1*

```
function doSearch(keyword, type) {
 mapLoading.style.display = "block";
  currentCategory = type;
  var icon;

        if (markerGroups[type]) {

        for (var i = 0; i < markerGroups[type].length; i++) {
          markerGroups[type][i].setMap(null);
        }
        markerGroups[type].length = 0;
        }

  if (keyword.substr(0,3) == "db:"){ 
  var bounds = map.getBounds();
  var southWest = bounds.getSouthWest();
  var northEast = bounds.getNorthEast();
  var swLat = southWest.lat();
  var swLng = southWest.lng();
  var neLat = northEast.lat();
  var neLng = northEast.lng();
  var dbCat = keyword.substr(3);

  var filename = dbPath + "db.php?cat="+ dbCat + "&swLat="+ swLat + "&swLng="+ swLng + "&neLat="+ neLat + "&neLng="+ neLng + "&extendLat="+ extendLat + "&extendLng="+ extendLng;
    $.getJSON(filename, function(data) {
   var hider = document.getElementById(type).getAttribute("caption");
    if (hider != "hidden") {
        for (i = 0; i < data.results.length; i++) {
            var result = data.results[i];
                if (result.icon === "" ) {
                    icon = type;
                } else {
                    icon = result.icon;
                }
            cleanHTML = html_entity_decode(result.html);
            var xmlHTML = createXmlHTML(result.address, result.name, cleanHTML, result.url, result.geometry.location.lat, result.geometry.location.lng);
            var latlng = new google.maps.LatLng(parseFloat(result.geometry.location.lat), parseFloat(result.geometry.location.lng));
            createMarker(latlng, i, xmlHTML, type, icon, "db", result.name);
      }
  }
     mapLoading.style.display = "none";
});

  } else {
                var hider = document.getElementById(type).getAttribute("caption");
                if (type == "user") {
                var userName = document.getElementById(type).getAttribute("name");
                    if (userName === null) {
                            hider = "hidden";
                    } else {
                        keyword = "establishment";
                        searchName = userName;
                    }
                }
                if (hider != "hidden") {
                var searchName = document.getElementById(type).getAttribute("name");
                if (searchName === null){
                    searchName = "";
                } else {
                    searchName = "&name=" + searchName;
                }
                    var ctr = map.getCenter();
                    //alert("Center: " + ctr)
                    var jsonLAT = ctr.lat();
                    var jsonLNG = ctr.lng();
                    if (autoRadius === true){
                        searchRadius = distance( map.getBounds().getNorthEast().lat(), map.getBounds().getNorthEast().lng(), map.getBounds().getSouthWest().lat(), map.getBounds().getSouthWest().lng());
                    }
                    var JSON = dbPath + "jsonproxy.php?url=" + encodeURIComponent("https://maps.googleapis.com/maps/api/place/search/json?location=" + jsonLAT + "," + jsonLNG + "&radius=" + searchRadius + "&types=" + keyword + searchName + "&sensor=false");
                    $.getJSON(JSON, function(data) {
                            for (i = 0; i < data.results.length; i++) {
                              var result = data.results[i];
                              var latlng = new google.maps.LatLng(parseFloat(result.geometry.location.lat), parseFloat(result.geometry.location.lng));
                              var resultHTML = "api:" + result.reference;
                              createMarker(latlng, i, resultHTML, type, type, "api", result.name, result.icon);
                              if (hider == "hidden") {
                                markerGroups[type][i].hide();
                              }
                            }
                               mapLoading.style.display = "none";
                    });
                }
  }
  return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T08:35:06.393

第一部分很简单，将函数的第 2 行更改为：

```
$("#mapLoading").addClass("weareloading"); 
```

我看不到您在函数中的哪个位置制作动画，所以我不确定在哪里删除该类。如果您使用 jQuery 动画函数，它们应该有一个回调，当动画完成时会调用它。在这个回调函数中，输入：

```
$("#mapLoading").removeClass("weareloading"); 
```

顺便说一句，既然您使用的是 jQuery，为什么还要使用这么冗长的原始 JavaScript？例如为什么：

```
document.getElementById(type).getAttribute("caption"); 
```

什么时候可以：

```
$('#'+type).attr("caption"); 
```

# javascript - Zurb Foundation 中的 JQuery Accordion 问题

> ID：14009611
> 
> 赞同：0
> 
> 时间：2012-12-23T08:21:02.437
> 
> 标签：javascript, jquery, jquery-ui, css-transitions, zurb-foundation

我正在使用最新版本的 Zurb 的 Foundation 原型设计框架。尽管对上下文有所帮助，但您对这个特定产品有任何经验并不是完全必要的。

框架中包含的工具之一是 JQuery 手风琴 - 但是他们已经进行了一些自定义样式修改。这似乎造成的问题之一是，每当您在内容窗格中单击 ANYWHERE 时，该窗格就会折叠。我有一个基于 JQuery 的表单元素，我需要能够在这个手风琴中使用它。问题是，当您单击文本框或手风琴中的任何其他位置时，它会折叠面板。与 JQuery 的标准 UI 手风琴的另一个区别是所有面板可以一次折叠，我不想要或不需要这个。事实上，如果不是 Zurb 手风琴的样式，我只会下载 JQuery 的手风琴并使用它。然而，那不是' t 一个选项，在尝试解决问题几个小时后，我意识到是时候咨询专家了。任何建议将不胜感激。另外，我知道周围有几个与此类似的问题，但是没有一个解决这个特定问题，而且我的专长是 PHP，而不是 Jquery。如果可以的话，请看看并伸出援手！先感谢您。

Zurb 基金会： http: [//foundation.zurb.com/](http://foundation.zurb.com/) Zurb 基金会手风琴用户界面： http: [//foundation.zurb.com/docs/elements.php](http://foundation.zurb.com/docs/elements.php)（向下滚动到手风琴）

手风琴的实际 JQuery 脚本：

```
;(function ($, window, undefined){
  'use strict';

   $.fn.foundationAccordion = function (options) {
     var $accordion = $('.accordion');

     if ($accordion.hasClass('click') && !Modernizr.touch) {
      $('.accordion li', this).on({
        mouseenter : function () {
          var p = $(this).parent(),
            flyout = $(this).children('.content').first();

          $('.content', p).not(flyout).hide().parent('li').removeClass('active'); //changed this
          flyout.show(0, function () {
            flyout.parent('li').addClass('active');
          });
        }
      });
    } else {
      $('.accordion li', this).on('click.fndtn', function () {
        var li = $(this),
            p = $(this).parent(),
            flyout = $(this).children('.content').first();

        if (li.hasClass('active')) {
          p.find('li').removeClass('active').end().find('.content').hide();
        } else {
          $('.content', p).not(flyout).hide().parent('li').removeClass('active'); //changed this
          flyout.show(0, function () {
            flyout.parent('li').addClass('active');
          });
        }
      });
    }

  };

})( jQuery, this ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:59:41.157

亚历克斯·索托的想法是对的，但也有一些错别字。如果您使用的是 Foundation 默认类名“content”，那么这里的剪切和粘贴代码应该可以工作。

```
function handle_click(event) {
  event.stopPropagation();
}

$('.accordion .content').on('click', handle_click); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T03:36:06.137

我通过在手风琴内的元素上放置一个事件处理程序来解决这个问题，然后在事件上调用 stopPropagation() 以防止它冒泡到手风琴点击处理程序绑定到的元素。

例子：

```
function handle_click(event) {
  event.stopPropagation();
  // your event code
}

$('ul.accordion').('click', 'li div.my_class', handle_click); 
```

因此，在上面的示例中，您应该将表单包装在 div.my_class 元素中，以便在元素外部单击时，会发生常规手风琴折叠行为，但在表单内部，单击事件不会折叠手风琴。

# c# - 如何在 MVC 路由中启用特殊字符？

> ID：14009618
> 
> 赞同：8
> 
> 时间：2012-12-23T08:22:42.670
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我正在使用 asp.net MVC 4。

这些是我的路线：

```
 routes.MapRoute(
         name: "Default",
         url: "{controller}/{action}/{id}"
         ); 
```

我当前的控制器正确响应了以下请求：

`http://localhost:2020/PrivacyUrls/Details/ct14524`

我怎样才能验证这样的网址？

`http://localhost:2020/PrivacyUrls/Details/*ct14524`

`http://localhost:2020/PrivacyUrls/Details/&ct14524`

现在返回 404。

检测到来自客户端 (*) 的潜在危险 Request.Path 值。

从客户端 (&) 检测到潜在危险的 Request.Path 值。

我想添加这条路线，但它没有帮助：

```
 routes.MapRoute(
         "PivacyUrl/Details",
         "PrivacyUrls/Details/{*ctid}",// URL with parameters 
         new { controller = "PrivacyUrls", action = "Details" }
         ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T08:32:26.933

在 web.config 中：

```
<system.web>
    <httpRuntime requestPathInvalidCharacters="" requestValidationMode="2.0" />
    <pages validateRequest="false" />
</system.web> 
```

[从https://stackoverflow.com/a/6026291/299408](https://stackoverflow.com/a/6026291/299408)公然窃取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-18T21:19:32.720

答案对我不起作用。我不得不使用：

```
[ValidateInput(false)]
public ActionResult Index... 
```

希望这对其他人有帮助。

# android - 如何将方形图像视图正确缩放为矩形图像视图？

> ID：14009619
> 
> 赞同：0
> 
> 时间：2012-12-23T08:22:44.573
> 
> 标签：android

我在尝试将方形图像（大约 315dp x 315dp）缩放到应该填充宽度并具有大约 200dp 高度的图像时遇到了一些麻烦。

基本上，我要做的就是在将图像缩放为更矩形的形状时正确地保留图像的纵横比。有任何想法吗？这是我尝试过的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:adjustViewBounds="true"
        android:scaleType="centerCrop" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:46:09.307

```
It should be like that
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center" >
    <FrameLayout  
        android:layout_width="match_parent"
        android:layout_height="200dp">
    <ImageView
        android:id="@+id/image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:adjustViewBounds="true"
        android:scaleType="fitXY" />
    </FrameLayout>

</LinearLayout> 
```

FrameLayout 用于修复图像的大小，如果您需要更多帮助，请阅读 Android UI 手册

# c# - SOLID原理和编译？

> ID：14009620
> 
> 赞同：17
> 
> 时间：2012-12-23T08:22:47.603
> 
> 标签：c#, .net, design-patterns, compilation, solid-principles

*例如，关于`Single Responsibility`原则：*

让我们谈谈一个`Radio`类：

![在此处输入图像描述](../Images/37036064f6ed9185c9f867adba81790a.png)

有人可能会争辩说，该`Radio`课程有*两个*职责，即音量和电台管理。这些操作将从使用它的客户端的完全不同区域调用。

因此我们有这个：

![在此处输入图像描述](../Images/8f56ddd8abcd05607610c52d1e94159a.png)

一切都好。

但我总是看到这样的句子：

> 所以现在当**我们需要更改**时，所有依赖于损坏组件的代码甚至**都不**需要重新编译。

等一下 ！

如果我需要更改`VolumeManager` 类 - 我将不必重新编译`Radio`和`StationManager`. **但是**我必须停止（在网络中）iis 以便应用程序使用新的 DLL，这*将*导致*应用程序关闭*。

此外，`console`我将不得不终止整个程序以更改 dll，因为它已被进程锁定（当应用程序运行时您无法更改 dll - 文件已锁定）

即使我将使用 GAC - 我也必须停止程序才能更改 dll。

那么它拯救了我什么呢？编译只是 - 右键单击​​并构建。就这样

我没有看到提及的好处：“*您只需要编译损坏的类..* ”

我错过了什么？

[http://www.gontu.org/solid-single-responsibility-principle/](http://www.gontu.org/solid-single-responsibility-principle/)寻找“ `build`”这个词

[http://epic.tesio.it/doc/manual/solid_principles.html](http://epic.tesio.it/doc/manual/solid_principles.html)寻找单词“ `recompiled`”

[http://www.dananhudson.com/?tag=solid](http://www.dananhudson.com/?tag=solid)查找单词“ `recompile`”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-23T08:28:49.630

忘记编译时间，忘记应用程序重启。

SOLID 是关于干净的代码和可维护性的。它与运行时无关，它与代码随着时间的推移变得越来越复杂且难以维护有关，这就是真正的成本所在。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-23T08:46:49.563

在某些情况下，如果您可以证明更改的范围有限，则“政治上”更容易将更新部署到现有应用程序：例如，如果必须更新一个 DLL。（请注意，这并不意味着每个类都应该在自己的 DLL 中。但很可能，并非*所有*类都在同一个 DLL 中）

然而，另一个优势是更具**概念性**的：如果我不必重新编译 DLL，那么我肯定知道我没有破坏其中的任何内容。必须触及的代码越少，我引入错误的机会就越少。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T09:02:36.577

与 C++ 相比，编译时间在 C# 中不是问题。一个大型 C++ 项目可能需要很长时间才能编译。当试图在一个区域进行更改导致重新编译不相关的组件时，这变得非常令人沮丧。单一职责引导更紧凑的依赖关系以这种方式改进编译问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-23T09:56:22.360

我强烈推荐鲍勃叔叔关于 SOLID 原则的[干净编码器视频。](http://cleancoders.com)

独立部署背后的主要思想是，可以独立部署的模块也可以**独立开发**。通常您不会独立部署模块，但您确实受益于能够独立开发它们。

与对编译过程的影响有关，这可能与 C++ 相关，其中每个编译单元（cpp 文件）在代码依赖于更改时都需要重新编译，以及精心构建的依赖关系图，其中更改仅影响一个编译单元，会严重影响编译时间。无论如何，除非您使用的是较旧的硬件，否则您可能不应该优先考虑编译时间。

关于在修改和部署独立模块时必须停止应用程序（Web 或控制台） - 这可以通过使用插件框架来避免，该框架可以将新的/更改的程序集动态加载到应用程序中 - 并且可以将 SOLID 原则应用于构建插件及其接口的方式。请记住，这可能会增加更多的复杂性，我建议避免这种情况并在部署时重新启动应用程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-23T08:28:13.393

我不认为保存的编译是重要的，而是为什么没有它你*可以*逃脱。

因为某些更改包含在您的应用程序的有限区域中。这本身就是一件好事——在一个设计良好的系统中，我不必了解完整的应用程序就可以改变它的行为，我认为这很重要。

dll 被锁定或 IIS 重新启动受影响的 App-Pool（我可能会说它做得很好）的事实是可能在未来的某些系统中得到缓解的技术问题。

事实上，通过一些影子复制和 App-Domain hokey-pokey，您可以编写一个在交换 dll 时无需重新启动的程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-23T08:40:53.183

我认为设计模式要记住的重要一点是灵活性。如果您一旦决定实现各种类型的 StationManager 和 VolumeManager，则无需更改 Radio 类中的代码。唯一的变化将由 Radio 类的实例化产生。为此，您仍然需要重新启动您的应用程序，但您的课程中不会有任何意大利面条代码，并且有多个 if-else 语句。不会更改任何代码，您只需为新类*添加*新代码。这也遵循了另一个重要的设计原则：开闭原则（SOLID 中的 O）：代码应该对扩展开放，而不是对修改开放。即使您遵循所有良好的设计实践，您仍然必须重新启动您的应用程序以便进行更改

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-23T15:51:14.380

实际上，与编译和构建过程相关的参数对于 .NET 平台并不重要。但它对于其他一些平台或/和语言可能非常重要。

例如，在 C++ 世界中，这种好处可以显着提高开发团队的生产力，因为它可以节省编译时间*。*在 C++ 世界中，使用 Bridge Pattern 或[Pimpl](http://c2.com/cgi/wiki?PimplIdiom) idiom 可以节省大量时间，因为头文件中的每次更改（即使是私有部分）都会导致所有依赖项（直接或间接）的重新编译。在这种情况下，SOLID 原则的构建或编译方面可能非常有益。

长话短说：SOLID 原则与构建过程或重新编译无关，而是与依赖关系有关。但是，当您正确管理依赖项时，您肯定也会在这些领域受益（包括但限制构建和编译过程）。

# onclick - 在按钮单击时切换多个 div 的可见性

> ID：14009626
> 
> 赞同：0
> 
> 时间：2012-12-23T08:23:37.077
> 
> 标签：onclick, toggle, getelementbyid

我正在努力完成上述工作。这就是我所拥有的：

功能切换可见性（除法）{

```
if (divid="homepagecontent")
{
    document.getElementById("homepagecontent").style.visibility = "visible";
    document.getElementById("programmingcontent").style.visibility = "hidden";
    document.getElementById("mediacontent").style.visibility = "hidden";
    document.getElementById("contactcontent").style.visibility = "hidden";
    document.getElementById("aboutcontent").style.visibility = "hidden";
    document.getElementById("parentalcontent").style.visibility = "hidden";
    document.getElementById("sitedesigncontent").style.visibility = "hidden";
}

else if (divid="programmingcontent")

{
    document.getElementById("homepagecontent").style.visibility = "hidden";
    document.getElementById("programmingcontent").style.visibility = "visible";
    document.getElementById("mediacontent").style.visibility = "hidden";
    document.getElementById("contactcontent").style.visibility = "hidden";
    document.getElementById("aboutcontent").style.visibility = "hidden";
    document.getElementById("parentalcontent").style.visibility = "hidden";
    document.getElementById("sitedesigncontent").style.visibility = "hidden";
}

else if (divid="mediacontent")
{
    document.getElementById("homepagecontent").style.visibility = "hidden";
    document.getElementById("programmingcontent").style.visibility = "hidden";
    document.getElementById("mediacontent").style.visibility = "visible";
    document.getElementById("contactcontent").style.visibility = "hidden";
    document.getElementById("aboutcontent").style.visibility = "hidden";
    document.getElementById("parentalcontent").style.visibility = "hidden";
    document.getElementById("sitedesigncontent").style.visibility = "hidden";
}

else if (divid="contactcontent")
{
    document.getElementById("homepagecontent").style.visibility = "hidden";
    document.getElementById("programmingcontent").style.visibility = "hidden";
    document.getElementById("mediacontent").style.visibility = "hidden";
    document.getElementById("contactcontent").style.visibility = "visible";
    document.getElementById("aboutcontent").style.visibility = "hidden";
    document.getElementById("parentalcontent").style.visibility = "hidden";
    document.getElementById("sitedesigncontent").style.visibility = "hidden";
}
else if (divid="aboutcontent")
{
    document.getElementById("homepagecontent").style.visibility = "hidden";
    document.getElementById("programmingcontent").style.visibility = "hidden";
    document.getElementById("mediacontent").style.visibility = "hidden";
    document.getElementById("contactcontent").style.visibility = "hidden";
    document.getElementById("aboutcontent").style.visibility = "visible";
    document.getElementById("parentalcontent").style.visibility = "hidden";
    document.getElementById("sitedesigncontent").style.visibility = "hidden";
}
else if (divid="parentalcontent")
{
    document.getElementById("homepagecontent").style.visibility = "hidden";
    document.getElementById("programmingcontent").style.visibility = "hidden";
    document.getElementById("mediacontent").style.visibility = "hidden";
    document.getElementById("contactcontent").style.visibility = "hidden";
    document.getElementById("aboutcontent").style.visibility = "hidden";
    document.getElementById("parentalcontent").style.visibility = "visible";
    document.getElementById("sitedesigncontent").style.visibility = "hidden";
}
else if (divid="sitedesigncontent")
{
document.getElementById("homepagecontent").style.visibility = "hidden";
    document.getElementById("programmingcontent").style.visibility = "hidden";
    document.getElementById("mediacontent").style.visibility = "hidden";
    document.getElementById("contactcontent").style.visibility = "hidden";
    document.getElementById("aboutcontent").style.visibility = "hidden";
    document.getElementById("parentalcontent").style.visibility = "hidden";
    document.getElementById("sitedesigncontent").style.visibility = "visible";
}
}
</script>

i am calling the function with an onclick event:

(each of the seven buttons are different. this is just the first one)
 a href="#" onclick="toggleVisibility('homepagecontent');" onmouseout="MM_swapImgRestore()" 
onmouseover="MM_swapImage('home','','../img/nav_img/images/highlight-ui-kit_03.png',1)"><img
 src="../img/nav_img/images/ui-kit_03.png" name="home" width="149" height="63" id="home" /></a> 
```

我不能让它工作。我在搞什么鬼？？？我已经在板上查看了几个这样的问题，但是对于我的一生，我可以弄清楚我做错了什么......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T03:35:16.380

这就是我实现它的方式。它不是很优雅，但它确实有效。（我还在最后一行代码中收到了 SYNTAX ERROR 警报。但正如我所说，它有效。

```
<script type="text/javascript"> 
$(document).ready(function() {
    function functionToLoadFile(){
      jQuery.get('http://www.xxxx.com/nowplaying/NowPlaying.txt?t='+new Date().getTime(), function(data) {
       var myvar = data;
       var parts = myvar.split(/\n/);
       var songtitle = parts[0];
       var songartist = parts[1];
       var songalbum = parts[2];
       var songtime = parts[3];

       $('#songtitleholder').html(songtitle);
       $('#songartistholder').html(songartist);
       $('#songalbumholder').html(songalbum);
       setTimeout(functionToLoadFile, 60000);
    });
    }

    setTimeout(functionToLoadFile, 10)

})

      function homeButton(){  
    var homePage = document.getElementById("homepagecontent");  
    var programmingPage = document.getElementById("programmingcontent");
    var eventPage = document.getElementById("eventcontent");
    var mediaPage = document.getElementById("mediacontent");
    var contactPage = document.getElementById("contactcontent");
    var siteDesignPage = document.getElementById("sitedesigncontent");
    var parentalPage = document.getElementById("parentalcontent");
    var aboutPage = document.getElementById("aboutcontent");

    homePage.style.visibility = "visible";
    programmingPage.style.visibility = "hidden";
    eventPage.style.visibility = "hidden";   
    mediaPage.style.visibility = "hidden";
    contactPage.style.visibility = "hidden";
    siteDesignPage.style.visibility = "hidden";
    parentalPage.style.visibility = "hidden";
    aboutPage.style.visibility = "hidden";

    };

    function programmingButton(){  
    var homePage = document.getElementById("homepagecontent");  
    var programmingPage = document.getElementById("programmingcontent");
    var eventPage = document.getElementById("eventcontent");
    var mediaPage = document.getElementById("mediacontent");
    var contactPage = document.getElementById("contactcontent");
    var siteDesignPage = document.getElementById("sitedesigncontent");
    var parentalPage = document.getElementById("parentalcontent");
    var aboutPage = document.getElementById("aboutcontent");

    homePage.style.visibility = "hidden";
    programmingPage.style.visibility = "visible";
    eventPage.style.visibility = "hidden";  
    mediaPage.style.visibility = "hidden";
    contactPage.style.visibility = "hidden";
    siteDesignPage.style.visibility = "hidden";
    parentalPage.style.visibility = "hidden";
    aboutPage.style.visibility = "hidden";     
    };

    function eventButton(){  
    var homePage = document.getElementById("homepagecontent");  
    var programmingPage = document.getElementById("programmingcontent");
    var eventPage = document.getElementById("eventcontent");
    var mediaPage = document.getElementById("mediacontent");
    var contactPage = document.getElementById("contactcontent");
    var siteDesignPage = document.getElementById("sitedesigncontent");
    var parentalPage = document.getElementById("parentalcontent");
    var aboutPage = document.getElementById("aboutcontent");

    homePage.style.visibility = "hidden";
    programmingPage.style.visibility = "hidden";
    eventPage.style.visibility = "visible";  
    mediaPage.style.visibility = "hidden";
    contactPage.style.visibility = "hidden";
    siteDesignPage.style.visibility = "hidden";
    parentalPage.style.visibility = "hidden";
    aboutPage.style.visibility = "hidden";     
    };

        function mediaButton(){  
    var homePage = document.getElementById("homepagecontent");  
    var programmingPage = document.getElementById("programmingcontent");
    var eventPage = document.getElementById("eventcontent");
    var mediaPage = document.getElementById("mediacontent");
    var contactPage = document.getElementById("contactcontent");
    var siteDesignPage = document.getElementById("sitedesigncontent");
    var parentalPage = document.getElementById("parentalcontent");
    var aboutPage = document.getElementById("aboutcontent");

    homePage.style.visibility = "hidden";
    programmingPage.style.visibility = "hidden";
    eventPage.style.visibility = "hidden";  
    mediaPage.style.visibility = "visible";
    contactPage.style.visibility = "hidden";
    siteDesignPage.style.visibility = "hidden";
    parentalPage.style.visibility = "hidden";
    aboutPage.style.visibility = "hidden";     
    };

        function contactButton(){  
    var homePage = document.getElementById("homepagecontent");  
    var programmingPage = document.getElementById("programmingcontent");
    var eventPage = document.getElementById("eventcontent");
    var mediaPage = document.getElementById("mediacontent");
    var contactPage = document.getElementById("contactcontent");
    var siteDesignPage = document.getElementById("sitedesigncontent");
    var parentalPage = document.getElementById("parentalcontent");
    var aboutPage = document.getElementById("aboutcontent");

    homePage.style.visibility = "hidden";
    programmingPage.style.visibility = "hidden";
    eventPage.style.visibility = "hidden";  
    mediaPage.style.visibility = "hidden";
    contactPage.style.visibility = "visible";
    siteDesignPage.style.visibility = "hidden";
    parentalPage.style.visibility = "hidden";
    aboutPage.style.visibility = "hidden";     
    };

        function aboutButton(){  
    var homePage = document.getElementById("homepagecontent");  
    var programmingPage = document.getElementById("programmingcontent");
    var eventPage = document.getElementById("eventcontent");
    var mediaPage = document.getElementById("mediacontent");
    var contactPage = document.getElementById("contactcontent");
    var siteDesignPage = document.getElementById("sitedesigncontent");
    var parentalPage = document.getElementById("parentalcontent");
    var aboutPage = document.getElementById("aboutcontent");

    homePage.style.visibility = "hidden";
    programmingPage.style.visibility = "hidden";
    eventPage.style.visibility = "hidden";  
    mediaPage.style.visibility = "hidden";
    contactPage.style.visibility = "hidden";
    siteDesignPage.style.visibility = "hidden";
    parentalPage.style.visibility = "hidden";
    aboutPage.style.visibility = "visible";     
    };

        function parentalButton(){  
    var homePage = document.getElementById("homepagecontent");  
    var programmingPage = document.getElementById("programmingcontent");
    var eventPage = document.getElementById("eventcontent");
    var mediaPage = document.getElementById("mediacontent");
    var contactPage = document.getElementById("contactcontent");
    var siteDesignPage = document.getElementById("sitedesigncontent");
    var parentalPage = document.getElementById("parentalcontent");
    var aboutPage = document.getElementById("aboutcontent");

    homePage.style.visibility = "hidden";
    programmingPage.style.visibility = "hidden";
    eventPage.style.visibility = "hidden";  
    mediaPage.style.visibility = "hidden";
    contactPage.style.visibility = "hidden";
    siteDesignPage.style.visibility = "hidden";
    parentalPage.style.visibility = "visible";
    aboutPage.style.visibility = "hidden";     
    };

    function designButton(){  
    var homePage = document.getElementById("homepagecontent");  
    var programmingPage = document.getElementById("programmingcontent");
    var eventPage = document.getElementById("eventcontent");
    var mediaPage = document.getElementById("mediacontent");
    var contactPage = document.getElementById("contactcontent");
    var siteDesignPage = document.getElementById("sitedesigncontent");
    var parentalPage = document.getElementById("parentalcontent");
    var aboutPage = document.getElementById("aboutcontent");

    homePage.style.visibility = "hidden";
    programmingPage.style.visibility = "hidden";
    eventPage.style.visibility = "hidden";  
    mediaPage.style.visibility = "hidden";
    contactPage.style.visibility = "hidden";
    siteDesignPage.style.visibility = "visible";
    parentalPage.style.visibility = "hidden";
    aboutPage.style.visibility = "hidden"   
    }

</script> 
```

# android - 从android中的不同布局屏幕访问项目

> ID：14009628
> 
> 赞同：0
> 
> 时间：2012-12-23T08:24:30.387
> 
> 标签：android, layout, accessibility

我在我的应用程序中添加了两个布局屏幕。1\. main.xml 2\. second.xml。两个类 Main.java 和 Second.java。Main.java 有`setContentView(R.layout.main);`，Second.java 有`setContentView(R.layout.second);`. main.xml 包含一个按钮和一个 EditText 视图。而 second.xml 包含 TextView。我面临的问题是，当我尝试在 Second.java 中访问 TextView 时，它没有显示在选项中，唯一显示的选项是 main.xml 文件中的项目。知道如何解决这个问题吗？我已经修改了`AndroidManifest.xml`。Second.java 还扩展了活动，它与 Main.java 位于同一包下。在这里需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:25:58.103

请检查任何布局或清单文件中没有错误。因为如果您的项目在布局或任何资源文件中包含任何错误，它将不会生成 R.java 文件。只需尝试项目>清理..项目和项目>自动构建。

我希望它会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T11:34:41.453

我很困惑，因为我是新用户。我创建了两个布局，每个布局上有两个按钮。因此，每当我尝试在 Eclipse 中访问它时，它都会向我显示两个屏幕上的所有对象。问题是，如果您想访问使用的布局访问中的任何对象`findViewById()`，android 将自动访问您正在访问的该布局类中的本地对象。不要像我一样对访问哪个 Button 或 TextView 感到困惑，因为两种布局都有这些项目。

# php - 使用 Zend_Form Zend_Form_Element_File 作为 Zend_Mail 附件

> ID：14009629
> 
> 赞同：0
> 
> 时间：2012-12-23T08:24:51.353
> 
> 标签：php, zend-framework

我正在使用 Zend_Form 和 Zend_Form_Element_File 向电子邮件表单添加附件。我的文件表单元素是这样的：

> ```
>  $file = new Zend_Form_Element_File('file');
>     $file->setLabel('File')
>              ->setRequired(true)
>               ->addValidator('NotEmpty'); 
> ```

我的发送表单控制器附件部分是：

```
 $at = $mail->createAttachment(file_get_contents($value['file']));
            $at->disposition = Zend_Mime::DISPOSITION_INLINE;
            $at->encoding    = Zend_Mime::ENCODING_BASE64;
            $at->filename    = $value['file']; // get this from posted form
            $mail->send(); 
```

我的问题是：向控制器女巫发送文件名的表单是无用的，并且发送带有空文件的电子邮件。

我的问题是：如何通过 Zend_Form 将完整的文件内容发送到控制器？或者文件应该在发送前上传？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T14:25:52.743

从文件夹中获取`tmp`文件。尝试添加以下内容：

```
$fname = $_FILES['file']['name'];
$ftempname = $_FILES['file']['tmp_name']; 
```

并将以下几行更改为：

```
$at = $mail->createAttachment(file_get_contents($ftempname));
$at->filename    = $fname; 
```

# php - 如何为 htmlentities 设置标签例外？

> ID：14009633
> 
> 赞同：1
> 
> 时间：2012-12-23T08:25:16.253
> 
> 标签：php, mysql

我正在运行一个 MySql 和 PHP 驱动的博客/评论风格的网站，并且希望它可以让用户可以在他们的帖子中添加格式化标签，例如`<bold>`，`<italics>`等标签，但是，同时运行类似 htmlentities 这样用户可以不要发布类似`<a>`或`<div id="footer">`破坏网站的内容。

所以问题是我该如何解决这个问题？我是否将其设置为 htmlentities 或类似功能具有允许标签的白名单？我无法找到有关此问题的任何结果或帮助。目前我对数据库实体的分层顺序是：

```
$content = nl2br ($_POST["content"]);
$content = mysql_real_escape_string($content);
$content = trim($content);
$content = htmlentities($content); 
```

谢谢你的帮助。同样，我想知道 htmlentities 是否甚至是我想要用来完成此任务的功能，所以任何建议或查看的地方将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T08:32:50.313

白名单是必须...使用[strip_tags()](http://php.net/manual/en/function.strip-tags.php)函数，带有第二个参数。

```
// Allow <p> and <a>
echo strip_tags($text, '<p><a>'); 
```

不要将编码的 html 保存在数据库中。

# c++ - C++11 随机数

> ID：14009637
> 
> 赞同：22
> 
> 时间：2012-12-23T08:26:17.703
> 
> 标签：c++, random, c++11

我需要生成随机数，但范围尽可能广（至少 64 位）。我不在乎分布是否完美，所以`std::rand()`会起作用，但它只返回一个`int`. 我知道 c++11 具有一些随机数生成能力，可以给出任何大小的数字，但使用起来非常复杂。有人可以发布一个简单的示例，说明如何尽可能简单地使用它以尽可能简单的方式（例如）获得所描述的功能（64 位或更多随机数`std::rand()`）？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-23T08:34:00.463

这是为此目的使用 C++11 随机数生成的方法（从[http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution](http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution)调整）：

```
#include <random>
#include <iostream>
int main()
{
  /* Initialise. Do this once (not for every
     random number). */
  std::random_device rd;
  std::mt19937_64 gen(rd());

  /* This is where you define the number generator for unsigned long long: */
  std::uniform_int_distribution<unsigned long long> dis;

  /* A few random numbers: */    
  for (int n=0; n<10; ++n)
    std::cout << dis(gen) << ' ';
  std::cout << std::endl;
  return 0;
} 
```

而不是`unsigned long long`，您可以使用`std::uintmax_t`from`cstdint`来获得最大可能的整数范围（不使用实际的大整数库）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-23T08:36:17.943

我们可以轻松地将随机数生成器引擎包装到类似 srand/rand 的方法中，如下所示：

```
#include <random>
#include <iostream>

struct MT19937 {
private:
    static std::mt19937_64 rng;
public:
    // This is equivalent to srand().
    static void seed(uint64_t new_seed = std::mt19937_64::default_seed) {
        rng.seed(new_seed);
    }

    // This is equivalent to rand().
    static uint64_t get() {
        return rng();
    }
};

std::mt19937_64 MT19937::rng;

int main() {
    MT19937::seed(/*put your seed here*/);

    for (int i = 0; i < 10; ++ i)
        std::cout << MT19937::get() << std::endl;
} 
```

（就像`srand`and `rand`，这个实现不关心线程安全。）

包装函数非常简单，你可以直接使用引擎。

```
#include <random>
#include <iostream>

static std::mt19937_64 rng;

int main() {
    rng.seed(/*put your seed here*/);

    for (int i = 0; i < 10; ++ i)
        std::cout << rng() << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T08:32:08.993

不是 C++11，但足够简单

`((unsigned long long)rand() << 32) + rand()`这里我们将 int64 的两部分生成为 int32

正如所`JasonD`指出的，它假设`rand()`生成 32 位整数。可以 xor `rand() << x`、`rand() << (2*x)`、`rand() << (3*x)`等，其中`x`<= 位在按数字生成`rand()`。也应该没问题。

# jquery - 如何在 jQuery UI 手风琴中将背景颜色设置为测试的长度？

> ID：14009649
> 
> 赞同：0
> 
> 时间：2012-12-23T08:28:55.400
> 
> 标签：jquery, html, css

我正在尝试在我的网页中使用 jQuery UI 手风琴（版本 1.9.2）。但是，我想将`p`元素的 CSS 的 background-color 属性设置为文本的长度（类似于内联外观），但我不知道该怎么做。我试过`display:inline;`, `display:inline-block`，使用 span 而不是 div，甚至设置每个段落的宽度。所有这些要么主要与手风琴有关，要么根本不起作用。

这是我的 HTML：

```
 <div id="accordion">
      <h3>Sample</h3>
      <div id="accordion-section">
        <p>TEXT TEXT TEXT<br>
        TEXT TEXT TEXT<br>
        TEXT TEXT TEXT</p>
        <p>TEXT TEXT TEXT<br>
        TEXT TEXT TEXT</p>
        <p>TEXT TEXT TEXT<br>
        TEXT TEXT TEXT</p>
      </div>
    <div> 
```

这是我的CSS：

```
#header{
  font-family:cursive;
  text-align:center;
}
#accordion div{
  padding-left: 110px;
}
p{
  background-color:#68FF53;
  border-radius:5px;
  padding: 0 10px;
  text-indent: -10px;
  padding-left: 20px
}
#education p{
  padding-bottom: 10px;
  display:inline-block;
}
ul li{
  list-style-type: none;
  display: inline-block;
  background: #75A3EE;
  padding: 0 10px;
  border-radius: 5px;
} 
```

jQuery 只是设置了基本的手风琴，仅此而已。

有人对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:22:45.103

我真的不明白这个问题，

```
..to set the background-color property ... of the p elements to be the length of the text 
```

对我来说，这意味着您正在尝试将颜色属性设置为数字长度？

如果您试图确定`<p>`它的容器文本的长度，那么也许使用`white-space:nowrap`它将阻止文本进入新行。

至于设置背景颜色，那么你的线`background-color:#68FF53;`应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:28:04.067

您可以在段落中使用 span 标签并在 span 上提供背景。所以背景属性只会是文本的长度。

```
<div id="accordion-section">
        <p><span>TEXT TEXT TEXT<br>
        TEXT TEXT TEXT<br>
        TEXT TEXT TEXT</span></p>
        <p><span>TEXT TEXT TEXT<br>
        TEXT TEXT TEXT</span></p>
        <p><span>TEXT TEXT TEXT<br>
        TEXT TEXT TEXT</span></p>
      </div> 
```

**CSS**

```
#accordion-section p span{
background-color:#68FF53;
} 
```

# multithreading - 具有分布式后台工作的 Azure Web 角色

> ID：14009652
> 
> 赞同：2
> 
> 时间：2012-12-23T08:30:17.667
> 
> 标签：multithreading, azure, scalability, distributed-computing, azure-web-roles

我想创建一个 web 角色的 wcf 来服务智能手机客户端。

此外，我需要创建迭代每个成员的无限后台任务，并在需要时向成员发送推送通知（决定是基于每个成员的一些 facebook 查询做出的）。

目前，该应用程序是新的，我没有客户端，所以我不想要超过一个 VM（为了节省成本..），但我将来可能需要扩展，所以我想支持它。我唯一的要求是对所有成员的迭代将在不到 30 分钟的时间间隔内完成。

我在考虑2个解决方案：

1\. 运行仅在一个 VM 中运行的经典 Windows 服务（如果我横向扩展，此 Windows 服务的一个实例仍将仅在其中一个上运行）。此外，我将在 wcf 服务中添加一个“void Handle(Member member) 方法。Windows 服务将有无限循环向该方法发送 wcf 请求。这样，如果我扩展我的实例，负载平衡将分配工作。

问题：windows 服务不知道他可以向 wcf 服务发送多少并发请求。我真的需要对成员进行并发处理（当然，服务器可以并行处理它们的限制）因为当我等待一个 facebook 查询完成时，我可以为其他成员发送更多 facebook 请求（这需要几秒钟每个 facebook 查询都要响应，因为我使用 facebook 批处理请求）。

2.每个webrole实例将负责处理不同的成员（我说的只是后台工作）。例如，如果我有 2 个实例（因为我曾经横向扩展过），第一个实例将负责 id % 2 == 0 的成员，第二个实例负责 id % 2 == 1 的成员。为了实现它，我是认为在每个实例启动时，我在某个 sql 表中注册当前实例。

此外，每个 Web 角色实例都会有后台线程：

1.  检查 sql 表以了解哪些成员是他的责任
2.  处理那些成员
3.  设置 LastHandleTime 日期
4.  检查是否有一个实例的记录在 5 分钟内没有更新其 LastHandleTime，删除它的记录（这样其他人下次会带走它的成员）

编辑：这个解决方案也有问题。我无法在我的 wcf 服务的整个生命周期中保持后台线程运行 - 如果我的服务中没有任何活动，IIS 可能会杀死它 [更多详细信息：http://forums.asp.net/t/1830688.aspx/ 1]

Edit2：为了解决它，我会将后台线程作为单独的 Windows 服务运行。将来，如果需要，我可以轻松地将其转换为工人角色。由于 Web 角色和 Windows 服务使用相同的处理逻辑，除了从第一个开始有响应，从第二个开始有推送通知（如果需要），我将使用一个共享 dll 和它们的处理逻辑.

哪种解决方案更好？我如何解决我提出的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:06:18.727

我不会在云中使用 Windows 服务，并且也会避免使用您的 #2 设计，因为它不能很好地扩展。这是我处理您的场景的方式：

我想建立一个分发服务（DS）和一个处理服务（SP）。DS 的作用是在 Azure Queue 中发布需要接收通知的用户/成员列表。DS 可以按照您的建议从数据库中读取。使用 Azure 队列可以更轻松地跨辅助角色分布工作负载，并使用内置冗余，如果队列中的项目未在特定时间范围内处理，它们会重新出现。DS 可能是您的 WCF 服务中的后台线程，尽管我可能会为此目的创建一个专用的工作角色。如果需要 1 个以上的 DS 来实现冗余，请使用共享锁定机制（例如租用公共 Blob 或使用 Azure Table），以便只有 1 个 DS 发布要在队列中通知的成员列表。每个需要接收通知的成员都由 Azure 队列中的一条消息表示。例如，您可以将用户 ID 存储在队列中：2019932 - 因此，如果您有 10,000 条消息要发送，那么 Azure 队列中将有 10,000 条消息。

SP 是另一个工作角色，它从队列中读取并处理队列中的每个项目。SP 可以一次从队列中取出 N 个项目（例如 10 个）并处理它们。SP 也可以有多个线程（假设是 T 个线程），因此每个 SP 一次可以并行处理大约 N * P 个请求。让我们进一步假设您的代码需要 S 秒来处理每条消息（检查 Facebook、发送通知、更新数据库）。要扩展，您需要做的就是部署更多的 SP。部署 X 个 SP 将为您提供平均每秒 X * N * P / (N * S ) 条消息的吞吐量。

从技术上讲，您可以让 DS 和 SP 处于相同的工作角色；只要您处理共享锁定机制，当您在多台机器上部署角色时，您就不必担心重复消息。

As usual, when you deal with large number of requests, you enter the world of sharding. See this link for the current scalability targets of Azure. For example a single queue can process up to 2,000 messages per second. It's a target... not a guarantee... :) If you think you will need more than this, you can always use multiple queues.

# c# - C#，实体框架和用户权限，如何在 WPF 应用程序中做到这一点

> ID：14009656
> 
> 赞同：1
> 
> 时间：2012-12-23T08:31:16.073
> 
> 标签：c#, entity-framework-4, permissions

我有一个主要的 WPF 应用程序，它使用存储库来访问数据库。此存储库具有所有可以执行的操作，但是某些用户不应该执行某些操作：添加、删除等。

我想知道哪种方法最好。我是否需要在主应用程序中实现这一点，禁用按钮并检查用户是否有权限或者是在存储库中控制它的最佳选择？如果我在存储库中执行此操作，也许我总是需要对数据库进行额外查询以检查用户是否具有权限，并且我总是需要将用户和密码作为参数传递。

其他的选择？

# android - 在 Android 中使用 Preference 小部件创建输入表单？

> ID：14009669
> 
> 赞同：1
> 
> 时间：2012-12-23T08:34:27.177
> 
> 标签：android, android-preferences

任何人都知道如何在 Android 中使用偏好小部件创建输入表单？Android 的原生闹钟应用程序有一个“设置闹钟”表单，具有类似偏好的布局（见截图[1](https://i.stack.imgur.com/DkkgN.png)），所以我认为应该是可能的。

我的计划是派生一个 PreferenceActivity 类，构造一组 Preference 小部件，并禁用每个小部件的持久性以避免在 SharedPreference 中保存值。但是，我仍然不知道如何将“保存”和“取消”按钮放在 PreferenceScreen 的底部。如果我使用 PreferenceFragment 可能会更容易布局，但我仍然需要支持最低 API 级别 8。

**研究更新**：可以通过 PreferenceActivity 类中的 setListFooter 方法将“保存”和“取消”按钮添加到首选项屏幕。但是，这需要最低 API 级别 11。

![Android的报警app输入表单](../Images/2b648ffb24223f9388ab2266ea465321.png)

# android - .GPS program code shows no error but 'unfortunately application stopped ' message coming on emulator . Please help me out

> ID：14009670
> 
> 赞同：0
> 
> 时间：2012-12-23T08:34:27.663
> 
> 标签：android, gps, android-manifest

GPS program code shows no error but `unfortunately application stopped` message coming on emulator.
My GPS code for WhereAmI.java .

```
package com.example.whereami;
import java.io.IOException;
import java.util.List;
import com.marakana.R;
import android.app.Activity;
import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class WhereAmI extends Activity implements LocationListener { //
LocationManager locationManager; //
Geocoder geocoder; //
TextView textOut; //

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
textOut = (TextView) findViewById(R.id.textOut);
locationManager = (LocationManager) getSystemService(LOCATION_SERVICE); //
geocoder = new Geocoder(this); //
// Initialize with the last known location
Location lastLocation = locationManager
.getLastKnownLocation(LocationManager.GPS_PROVIDER); //
if (lastLocation != null)
onLocationChanged(lastLocation);
}

@Override
protected void onResume() { //
super.onRestart();
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000,
10, this);
}

@Override
protected void onPause() { //
super.onPause();
locationManager.removeUpdates(this);
}

//Called when location has changed
public void onLocationChanged(Location location) { //
String text = String.format(
"Lat:\t %f\nLong:\t %f\nAlt:\t %f\nBearing:\t %f", location
.getLatitude(), location.getLongitude(), location.getAltitude(),
location.getBearing()); //
textOut.setText(text);
//Perform geocoding for this location
try {
List<Address> addresses = geocoder.getFromLocation(
location.getLatitude(), location.getLongitude(), 10); //
for (Address address : addresses) {
textOut.append("\n" + address.getAddressLine(0)); //
}
} catch (IOException e) {
Log.e("WhereAmI", "Couldn't get Geocoder data", e);
}
}
//Methods required by LocationListener
public void onProviderDisabled(String provider) {
}
public void onProviderEnabled(String provider) {
}
public void onStatusChanged(String provider, int status, Bundle extras) {
}
} 
```

My manifest file : AndroidManifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.marakana" android:versionCode="1" android:versionName="1.0">
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
<activity android:name=".WhereAmI" android:label="@string/app_name">
<intent-filter>
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
</activity>
</application>
<uses-sdk android:minSdkVersion="4" />
<!-- -->
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
</manifest> 
```

my main.xml file : it also is error free

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="fill_parent" android:layout_width="fill_parent"
android:background="#fff" android:orientation="vertical">
<!-- -->
<TextView android:layout_width="wrap_content"
android:layout_height="wrap_content" android:layout_gravity="center"
android:textColor="#333" android:textSize="30dp" android:text="@string/hello_world"/>
<!-- -->
<ScrollView android:layout_height="fill_parent"
android:layout_width="fill_parent">
<!-- -->
<TextView android:textColor="#333" android:layout_gravity="center"
android:layout_height="fill_parent" android:layout_width="fill_parent"
android:gravity="center" android:textSize="25dp" android:text="Waiting..."
android:id="@+id/textOut"></TextView>
</ScrollView>
</LinearLayout> 
```

Logcat errors for the above programfor which i am getting the message 'unfortunately application stopped ':

```
 12-23 10:04:43.288: E/ActivityThread(641): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cd3350 that was originally bound here
12-23 10:04:43.288: E/ActivityThread(641): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cd3350 that was originally bound here
12-23 10:04:43.288: E/ActivityThread(641):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
12-23 10:04:43.288: E/ActivityThread(641):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
12-23 10:04:43.288: E/ActivityThread(641):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
12-23 10:04:43.288: E/ActivityThread(641):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
12-23 10:04:43.288: E/ActivityThread(641):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
12-23 10:04:43.288: E/ActivityThread(641):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
12-23 10:04:43.288: E/ActivityThread(641):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
12-23 10:04:43.288: E/ActivityThread(641):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
12-23 10:04:43.288: E/ActivityThread(641):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
12-23 10:04:43.288: E/ActivityThread(641):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
12-23 10:04:43.288: E/ActivityThread(641):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
12-23 10:04:43.288: E/ActivityThread(641):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
12-23 10:04:43.288: E/ActivityThread(641):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-23 10:04:43.288: E/ActivityThread(641):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-23 10:04:43.288: E/ActivityThread(641):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-23 10:04:43.288: E/ActivityThread(641):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-23 10:04:43.288: E/ActivityThread(641):  at java.lang.Thread.run(Thread.java:856)
12-23 10:04:43.309: E/StrictMode(641): null
12-23 10:04:43.309: E/StrictMode(641): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cd3350 that was originally bound here
12-23 10:04:43.309: E/StrictMode(641):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
12-23 10:04:43.309: E/StrictMode(641):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
12-23 10:04:43.309: E/StrictMode(641):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
12-23 10:04:43.309: E/StrictMode(641):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
12-23 10:04:43.309: E/StrictMode(641):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
12-23 10:04:43.309: E/StrictMode(641):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
12-23 10:04:43.309: E/StrictMode(641):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
12-23 10:04:43.309: E/StrictMode(641):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
12-23 10:04:43.309: E/StrictMode(641):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
12-23 10:04:43.309: E/StrictMode(641):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
12-23 10:04:43.309: E/StrictMode(641):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
12-23 10:04:43.309: E/StrictMode(641):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
12-23 10:04:43.309: E/StrictMode(641):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-23 10:04:43.309: E/StrictMode(641):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-23 10:04:43.309: E/StrictMode(641):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-23 10:04:43.309: E/StrictMode(641):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-23 10:04:43.309: E/StrictMode(641):  at java.lang.Thread.run(Thread.java:856)
12-23 10:04:43.318: E/ActivityThread(641): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ce41c8 that was originally bound here
12-23 10:04:43.318: E/ActivityThread(641): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ce41c8 that was originally bound here
12-23 10:04:43.318: E/ActivityThread(641):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
12-23 10:04:43.318: E/ActivityThread(641):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
12-23 10:04:43.318: E/ActivityThread(641):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
12-23 10:04:43.318: E/ActivityThread(641):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
12-23 10:04:43.318: E/ActivityThread(641):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
12-23 10:04:43.318: E/ActivityThread(641):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
12-23 10:04:43.318: E/ActivityThread(641):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
12-23 10:04:43.318: E/ActivityThread(641):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
12-23 10:04:43.318: E/ActivityThread(641):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
12-23 10:04:43.318: E/ActivityThread(641):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
12-23 10:04:43.318: E/ActivityThread(641):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
12-23 10:04:43.318: E/ActivityThread(641):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-23 10:04:43.318: E/ActivityThread(641):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-23 10:04:43.318: E/ActivityThread(641):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-23 10:04:43.318: E/ActivityThread(641):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-23 10:04:43.318: E/ActivityThread(641):  at java.lang.Thread.run(Thread.java:856)
12-23 10:04:43.338: E/StrictMode(641): null
12-23 10:04:43.338: E/StrictMode(641): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40ce41c8 that was originally bound here
12-23 10:04:43.338: E/StrictMode(641):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
12-23 10:04:43.338: E/StrictMode(641):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
12-23 10:04:43.338: E/StrictMode(641):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
12-23 10:04:43.338: E/StrictMode(641):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
12-23 10:04:43.338: E/StrictMode(641):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
12-23 10:04:43.338: E/StrictMode(641):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
12-23 10:04:43.338: E/StrictMode(641):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
12-23 10:04:43.338: E/StrictMode(641):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
12-23 10:04:43.338: E/StrictMode(641):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
12-23 10:04:43.338: E/StrictMode(641):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
12-23 10:04:43.338: E/StrictMode(641):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
12-23 10:04:43.338: E/StrictMode(641):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-23 10:04:43.338: E/StrictMode(641):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-23 10:04:43.338: E/StrictMode(641):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-23 10:04:43.338: E/StrictMode(641):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-23 10:04:43.338: E/StrictMode(641):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-23T08:42:18.993

You manifest showing

```
 Package = "com.marakana" 
```

In your class (whereami) the package that you declared is "com.example.whereami;"

Change package name in manifest ("com.example.whereami") from ("com.marakana")

Try this manifest after removing "import com.marakana.R;" from your imports

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.whereami"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="16" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.whereami.WhereAmI"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

     </activity>
    <uses-library android:name="com.google.android.maps" /> 

</application>

<uses-feature android:name="android.hardware.location.gps"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

</manifest> 
```

# actionscript-3 - 如何使用 actionscript 更改文本字段注册点

> ID：14009674
> 
> 赞同：0
> 
> 时间：2012-12-23T08:35:47.997
> 
> 标签：actionscript-3, flash

晕...我使用动作脚本制作了一个文本字段。这是代码：

```
var tf:TextField; 
```

但是当我想把它放在一些坐标中时，默认注册点在文本字段的左上角......如何将其更改为文本字段的中间。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:48:43.867

动态生成内容时，注册点始终位于 (0,0)。

您可以按照@randunel 的建议进行矩阵变换，也可以简单地找到“tf”的中间并在那里设置坐标：

```
var fieldWidth=tf.textWidth;
tf.x=20+(fieldWidth/2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:27:27.663

如果你想移动注册点，你实际上必须移动**内容**，而不是容器的点（这是固定的）。为此，您必须使用转换矩阵 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html)

在您的情况下，仅移动没有比例的内容，您需要：

```
tf.transform.matrix = new Matrix(1, 0, 0, 1, leftValue, upValue); 
```

其中`leftValue`和`upValue`是**负**数值，等于文本字段大小的一半。因此，文本字段被移动，容器的注册点位于文本字段的中间。

# c# - StreamWriter.WriteLine() 不工作

> ID：14009683
> 
> 赞同：10
> 
> 时间：2012-12-23T08:37:27.753
> 
> 标签：c#, file-io, text-files, vs-unit-testing-framework

我正在尝试使用 StreamWriter.WriteLine （非静态）一次将几行写入 .txt 文件。

```
const string filename = "BasicTestInfo.txt";
        using (var writer = new StreamWriter(filename, false))
        {
            writer.WriteLine("{0} 350 200 200 10 2 28 20 200 2500 1200 1 1", Player1);
            writer.WriteLine("{0} 300 150 150 4 2 15 18 150 2500 1000 1 0", Player2);
            writer.WriteLine("{0} 200 140 450 25 14 10 70 4500 2500 750 1 1", Player3);
            writer.WriteLine("{0} 175 120 400 15 3 8 50 3000 2500 850 1 0", Player4);
            writer.WriteLine("{0} 300 100 300 8 1 4 30 1000 2500 1200 1 0", Player5);
            writer.WriteLine("{0} 450 310 450 20 5 5 35 1500 2500 700 1 1", Player6);
        } 
```

每个播放器对象都是字符串余数。如果我使用不同的文件名（又名 BasicTestInfo2.txt）运行它，它会在 bin.Debug 中创建该文件，但它是空的。我知道我到达了 using 块的内部（我在那里放了一个 Console.WriteLine），并且我知道我想截断这就是为什么我使用 false 进行追加（尽管用 true 或没有参数替换 false根本不能解决问题）。

基本问题是即使创建了文件，文件中也没有文本行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-21T03:47:32.287

是的，在 VB.net 中，默认设置不需要此（独占刷新），但对于 C#，您需要 Writer.Flush 调用来强制写入。当然 - Writer.Close() 也会强制刷新。或者，我们可以设置 StreamWriter 实例的 AutoFlush 属性：

```
sw.AutoFlush = true;
// Gets or sets a value indicating whether the StreamWriter 
// will flush its buffer to the underlying stream after every  
// call to StreamWriter.Write. 
```

来自： http: [//msdn.microsoft.com/en-us/library/system.io.streamwriter.autoflush (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.autoflush(v=vs.110).aspx)

请注意：“使用”构造将避免排他同花，但是很多人只是基于这个问题的主题登陆这里，这是面对这个问题时最容易实现的目标。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-21T14:22:05.110

关闭作者

writer.close();

这对我有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T09:40:44.977

显示的代码看起来不错。

如果我不得不猜测，我会怀疑您正在某个地方吞下一个异常（可能来自一个狡猾的`ToString`实现）。`Player`

单步执行代码以查看当您遍历每个连续的 时会发生什么`WriteLine`，以及它是否一直到`using`块的末尾而没有错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-25T13:27:58.560

我有类似的问题。

我以这种方式修复了它，只需将您的字符串放入 String.Format()：

```
writer.WriteLine(String.Format("{0} 350 200 200 10 2 28 20 200 2500 1200 1 1", Player1)); 
```

# mysql - MySql 和 Web 缓存

> ID：14009688
> 
> 赞同：2
> 
> 时间：2012-12-23T08:38:07.407
> 
> 标签：mysql, proxy-server

猜猜这个问题已经被问过很多次了，但它们可能是在 Mysql 或 squid/其他代理服务器上的一些新发展。

1.  我已将 squid 配置为转发代理，并将其用于 LAN 中的 Web 缓存。
2.  我需要通过 Web 服务器（远程）连接到 MySql 数据库。
3.  Squid 不支持远程连接到 Mysql。

那么，如果我必须同时从网络内连接到远程服务器上的 MySql 数据库，我应该使用什么作为 Web 缓存的转发代理呢？

ps：一个。我试过 polipo 没有运气。湾。ISA 就像一个魅力，但在微软平台上，因此不是一个免费的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:35:31.137

Squid 看不到任何由 Web 服务器执行以生成其响应的后端代码（例如使用数据库的代码），因此它不能代表 Web 服务器执行此类操作。

如果下一次响应（对同一请求）可能发生变化，则 Web 服务器应在其 HTTP 响应标头中[指出：](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Avoiding_caching)

```
Expires: 0 
```

它还可以为代理提供具体说明：

```
Cache-Control: no-cache 
```

因此，未来对相同内容的请求将被转发到 Web 服务器，并且不会被代理满足。

另一方面，如果您试图减少单个 Web 服务器面临的负载，您可能会考虑引入具有负载平衡器的多个 Web 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T17:52:24.693

我正在使用 ODBC/MySQL 连接器从桌面应用程序连接到远程服务器上的数据库。我的要求不是代理/缓存记录或表，而是代理网站并让 ODBC/MySQL 连接器建立直接连接。

直接连接比编写 Web 服务更快。

# jquery - 如何使用 jquery 选择器从 IFrame 内的表中检索特定的 td

> ID：14009692
> 
> 赞同：-1
> 
> 时间：2012-12-23T08:40:40.940
> 
> 标签：jquery, jquery-selectors

我正在尝试使用“title”属性值检索 td，但似乎无法使用下面的代码示例使其工作：

```
var iframe = $("#iframe1");
var tr = iframe.contents().find("td[title='2015-02-06']").text();
alert(tr); 
```

下面是我正在测试代码的 HTML 源代码。最好我希望代码在选择器中也使用表 ID，因为我在 iframe 中有其他表。请问有什么想法吗？

```
 <iframe id=iframe1>
<TABLE id=table1>
<TBODY>
<TR>
<TD title=2015-02-01>1</TD>
<TD title=2015-02-02>2</TD>
<TD title=2015-02-03>3</TD>
<TD title=2015-02-04>4</TD>
<TD title=2015-02-05>5</TD>
<TD title=2015-02-06>6</TD>
<TD title=2015-02-07>7</TD>
</TR>
<TR>
<TD title=2015-02-08>8</TD>
<TD title=2015-02-09>9</TD>
<TD title=2015-02-10>10</TD>
<TD title=2015-02-11>11</TD>
<TD title=2015-02-12>12</TD>
<TD title=2015-02-13>13</TD>
<TD title=2015-02-14>14</TD>
</TR>
<TR>
<TD title=2015-02-15>15</TD>
<TD title=2015-02-16>16</TD>
<TD title=2015-02-17>17</TD>
<TD title=2015-02-18>18</TD>
<TD title=2015-02-19>19</TD>
<TD title=2015-02-20>20</TD>
<TD title=2015-02-21>21</TD>
</TR>

    </TBODY>
     </TABLE>
    </iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:46:41.837

[**iframe**](http://www.w3schools.com/tags/tag_iframe.asp)应该嵌入`documents`但不是`plain`html。将 html 放在某个文件中，假设 test.html 并将该文档导入 iframe，然后您的选择器将带来内容。

IFRAME 元素允许作者在文本块中插入框架。在一段文本中插入内联框架很像通过 OBJECT 元素插入对象：它们都允许您在另一个中间插入 HTML 文档，它们都可以与周围的文本对齐等，您可以阅读更多通过[**w3.org**](http://www.w3.org/TR/html4/present/frames.html)

*您可以在* **[此处检查选择器的工作情况](http://jsfiddle.net/9cFpe/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T08:49:04.023

`<iframe>`[元素里面](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html)不应该有任何东西：

> iframe 元素永远不会有回退内容，因为它总是会创建一个嵌套的浏览上下文，无论指定的初始内容是否被成功使用。
> 
> **iframe 元素的后代不代表任何内容。**（在不支持 iframe 元素的旧版用户代理中，内容将被解析为可以充当后备内容的标记。）

我不确定你为什么首先使用 iframe。这看起来像是一个`<div>`标签的工作，但如果您绝对需要 iframe 中的内容，请将 HTML 放入一个新文件中，然后`src`将 iframe 的属性更改为指向它。

此外，该`title`属性不属于 iframe 元素。使用`data-`属性（`data-date`也许？）或`id`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-23T08:46:13.200

为什么不把TD中的“title”换成“id”属性直接使用呢。

HTML：

```
<TD id="2015-02-06">6</TD> 
```

jQuery：

```
$("#2015-02-06").text(); 
```

# iphone - iOS 使用 PullToRefreshView 使 UICollectionView 可滚动

> ID：14009693
> 
> 赞同：6
> 
> 时间：2012-12-23T08:40:46.397
> 
> 标签：iphone, ios, scroll, uicollectionview

当您只有几个单元格时，如何使 UICollectionView 可滚动？

我已经实现了一个 UICollectionView，它以网格的形式布置单元格。如果只有几个单元格，则默认情况下 UICollectionView 不可滚动（所有单元格都适合手机屏幕）。

但是，我还实现了 PullToRefreshView。当我有很多单元格时，这非常有效，因为 UICollectionView 是可滚动的，我可以拉动和刷新。

尽管只有几个单元格，我该怎么做才能使 UICollectionView 可滚动？

这是我初始化 PullToRefreshView 的方式

```
self.pull = [[PullToRefreshView alloc] initWithScrollView:self.collectionView];
[self.collectionView addSubview:self.pull]; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-23T08:55:49.133

`self.collectionView.alwaysBounceVertical = YES`因为 UICollectionView 继承自 UIScrollView，所以无论你的 collection view 有多少个单元格，它就像设置持久弹跳一样简单。

# java - java - 如何在Java中将字节[]数组中的原始字节内容打印到标准输出？

> ID：14009695
> 
> 赞同：14
> 
> 时间：2012-12-23T08:41:01.083
> 
> 标签：java, bytearray

我正在做与这里描述的相同的项目：

[以 gzip 格式包装压缩数据](https://stackoverflow.com/questions/13105481/wrap-deflated-data-in-gzip-format)

我的问题是，当我尝试打印字节时，我得到了奇怪的结果。我的问题出现在以下代码中（对不起，我选择了错误的变量）：

```
 for(int k = 0; k < head.length; k++){
        System.out.write(head[k]);
    }

    for(int m = 0; m < a.size(); m++){
        int comprlength = a.get(m).getclength();
        for(int ii = 0; ii < comprlength; ii++){
            System.out.write(a.get(m).getcompr()[ii]);
        }
    }
    for(int j = 0; j < f1.length; j++){
        System.out.write(f1[j]);
    }
    for(int ll = 0; ll < total_d.length; ll++){
        System.out.write(total_d[ll]);
    } 
```

最后两个 for 循环不会打印出它们的字节数组的内容。因此，使用 gzip 时出现意外的文件结束错误。奇怪的是，如果我注释掉第二个 for 循环块（带有变量 m 和 ii 的块），什么都不会打印出来。

那么如何正确打印出我的字节数组的内容呢？当第二个 for 循环没有被注释时，为什么第一个 for 循环正确打印出来，如果第二个 for 循环被注释，为什么它不打印任何东西？

编辑：

更加具体：

我想写出原始字节。我想这样做，以便我的每个字节数组都紧随其后

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-23T08:45:21.247

假设您的字节数组称为**buf**：

```
 System.out.println(Arrays.toString(buf)); 
```

编辑：听起来您真正想做的是将字节写入标准输出，而不是打印它们。请参阅[http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html)了解打印到流和写入流之间的区别。最简单的方法应该是调用 write(byte[] b) 方法：

```
System.out.write(buf); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-01-19T06:34:32.300

```
 /* There is an image / ic_launcher in the drawable folder for which I am making ByteArray   */

    Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.img);
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
    byte[] mByteArray = stream.toByteArray(); 
```

/* 这里我显示的不是十六进制格式的原始数据 */

```
 System.out.println(Arrays.toString(mByteArray)); 
```

我想这会对你们有所帮助！

# c++ - 文件不会打开，即使 stat() 可以找到它

> ID：14009697
> 
> 赞同：1
> 
> 时间：2012-12-23T08:41:31.597
> 
> 标签：c++, file-io, stat

我有一个 C++ 文档，我需要在其中打开一个文件。我没有使用相对路径来引用我的文件。我目前正在使用硬盘驱动器上的完整文件路径，但稍后我将切换到仅使用当前目录。在任何情况下，我都知道这个文件被正确引用并且可以打开，因为我已经对文件名执行了 stat() 并且它返回了有关该文件的所有正确信息。这是正在发生的基本过程：

```
string fName = "C:\\Users\\[user]\\Downloads\\file.DAT";
ifstream inFile;
inFile.open(fName);

struct _stat buf;                        // I put these lines here to test that
int result = _stat(fName.c_str(), &buf); // the file is being referred-to right

inFile >> levelnumber;
if(inFile.fail())  // inFile.fail() keeps evaluating to TRUE
    ThrowError("Corrupt or inaccesible .DAT file."); // I wrote ThrowError 
```

无论如何， inFile.fail() 一直评估为真，即使文件**肯定**被正确引用（这就是对 _stat() 的调用检查的内容）。

我究竟做错了什么？:P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:41:05.553

您的测试不会告诉您文件是否可以打开。您的测试告诉您文件无法打开或`levelnumber`无法读取。要测试您的文件是否已打开，您可以在调用`open()`. 如果文件确实可读，则应转换为`true`：

```
std::ifstream inFile(fName);
if (!inFile) {
    std::cerr << "failed to open '" << fName << "' for reading\n";
} 
```

# asp.net - 如何访问 Web API 中的 URL 参数？

> ID：14009700
> 
> 赞同：1
> 
> 时间：2012-12-23T08:42:46.627
> 
> 标签：asp.net, asp.net-web-api

我正在尝试使用 .NET Web API 创建 REST 服务。我要映射的 URL 是

```
/api/<controller>/<videoId>/chapters 
```

我有一个如下所示的路线设置：

```
RouteTable.Routes.MapHttpRoute(name: "Route1",
  routeTemplate: "api/video/{id}/{action}",
  defaults: new { controller = "Video", action = "Chapters"}); 
```

它在控制器中映射以下功能：

```
[HttpGet]
[ActionName("Chapters")]
public string GetChapters() {
  return "get chapters";
} 
```

一切都正确映射，但是如何`<video_id>`从 GetChapters 函数中访问 URL 中的参数？

作为一个具体示例，URL 如下所示：

```
http://localhost/api/video/1/chapters 
```

如何在此 1 中访问控制器后的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:47:39.730

只需将`id`参数添加到您的 Web 服务方法 - ASP.NET Web API 会自动将其蒙蔽到查询字符串参数或`{id}`路由中定义的参数：

```
public string GetChapters(int id) {
    return "get chapters by video id";
} 
```

您也可以省略`[HttpGet]`和`[ActionName]`属性，因为在 Web API 中，名称以“Get”开头的操作方法将映射到 GET 请求（“Post”到 POST 等），而方法名称的其他部分（“Chapters”）是视为动作名称。

# php - .htaccess RewriteRule 不起作用

> ID：14009704
> 
> 赞同：0
> 
> 时间：2012-12-23T08:43:50.890
> 
> 标签：php, .htaccess, mod-rewrite

我需要做以下工作：
源地址：[http](http://myurl.com/news.php?s=searchkey)
: //myurl.com/news.php?s=searchkey Resault 地址：[http](http://myurl.com/searchnews/searchkey/)
://myurl.com/searchnews/searchkey/ 我使用此代码：

```
RewriteRule ^searchnews/(.*)/$ news.php?s=$1 
```

但是当我在 news.php 中搜索时，url 没有以 Resault 格式显示。
注意：我没有为这种格式编写任何 php 代码，我使用如下简单的 php 代码：

```
<?php
$sk=$_GET['s'];
$res=SearchNews($sk);
// Show Resault Rules
?> 
```

我的问题是什么？我应该写一些 php 代码来获得顶级 url 格式？
这是我完整的 htaccess 语法：

```
<IFModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^shownews/([0-9]+)/$ news.php?id=$1
RewriteRule ^searchnews/(.*)/$ news.php?s=$1 [NC]
</IFModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:58:32.147

RewriteRules 区分大小写，但我在您的 URL 中看到大写字母 将 URL 更改为全小写或使用

```
RewriteRule ^searchnews/(.*)/$ news.php?s=$1 [NC] 
```

如果你想保留大写字母

# c++ - 如何在 BB10 中实现带有滚动的 GRID/TILED Image View

> ID：14009707
> 
> 赞同：2
> 
> 时间：2012-12-23T08:45:00.537
> 
> 标签：c++, blackberry-10

我想实现 GRID/TILED 图像视图，其中瓷砖图像将在下载后动态绘制。我希望能够在其中进行捏合/缩放和其他触摸操作。说，如果我平移视图，新的图块将被加载并完全或部分地绘制在视图上。我找不到使用任何现有 UI 控件的方法。此外，那些现有的 UI 控件不能被子类化，并且没有任何 paint()/onDraw 方法（如 android 中的 view/canvas）可以覆盖。可能是imageView和scrollview可以解决问题。另一个选项可能是使用外部窗口。在这两种情况下，我不确定如何实现它们或在这些情况下如何处理手势。或者是否有任何其他方法可以做到这一点。请给我一些见解来解决它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T12:21:22.900

创建一个 CustomImageView，它将从远程加载图像并将该 CustomImageView 放入具有 GridListLayout 的 ListView 中。您可以使用 ListItemProvider 类来自定义您的 ListView。我已经为下面所有必要的类提供了代码。

**//main.qml**

```
import bb.cascades 1.0
import my.library 1.0 //Custom library where CustomImageView and our ListProvider resides

Page {
    content: ScrollView {
        gestureHandlers: [
            PinchHandler {
                onPinchUpdated: {
                    scrollView.zoomToPoint(event.midPointX, event.midPointY, event.pinchRatio)
                }
            }
        ]
        id: scrollView
        scrollViewProperties {
            scrollMode: ScrollMode.None
            pinchToZoomEnabled: true
        }
        ListView {
            overlapTouchPolicy: OverlapTouchPolicy.Allow
            objectName: "listView"
            layout: GridListLayout {
                columnCount: 2
            }
            listItemProvider: CustomImageViewProvider { //Our list item provider
            }
            listItemComponents: [
                ListItemComponent {
                    CustomImageView { //CustomImageView to load image from remote via internet
                    }
                }
            ]
            dataModel: XmlDataModel {
                source: "model/path.xml"
            }
        }
    }
} 
```

**//CustomImageView.cpp** CustomControl 通过互联网加载图像表单远程位置

```
CustomImageView::CustomImageView(Container *parent) :
    CustomControl(parent) {
    Container *contentContainer = new Container();
    DockLayout *contentLayout = new DockLayout();
    contentContainer->setLayout(contentLayout);

    mItemImage = ImageView::create("");
    mItemImage->setHorizontalAlignment(HorizontalAlignment::Fill);
    mItemImage->setVerticalAlignment(VerticalAlignment::Fill);

    contentContainer->add(mItemImage);

    setRoot(contentContainer);
}

void CustomImageView::updateItem(const QString imagePath) {
    WebServiceRequest *webServiceRequest = new WebServiceRequest(imagePath);
    connect(webServiceRequest, SIGNAL(complete(QByteArray, bool)), this,
            SLOT(onComplete(QByteArray, bool)));
    webServiceRequest->getResponse();
}

void CustomImageView::onComplete(QByteArray data, bool success) {
    if (success) {
        mItemImage->setImage(Image(data));
        mItemImage->setVisible(true);
    } else {
        qDebug() << "Request failed";
    }
}

void CustomImageView::select(bool select) {
}

void CustomImageView::reset(bool selected, bool activated) {
    mItemImage->setVisible(false);
}

void CustomImageView::activate(bool activate) {
} 
```

**//WebServiceRequest.cpp** CustomImageView 使用此类通过互联网发送图像请求

```
WebServiceRequest::WebServiceRequest(QString url) {
    webServiceUrl = url;
}

WebServiceRequest::~WebServiceRequest() {
}

void WebServiceRequest::getResponse() {
    QNetworkAccessManager* netManager = new QNetworkAccessManager();
    if (!netManager) {
        qDebug() << "Unable to create QNetworkAccessManager!";
        emit complete("Unable to create QNetworkAccessManager!", false);
        return;
    }

    QUrl url(webServiceUrl);
    QNetworkRequest req(url);

    QNetworkReply* ipReply = netManager->get(req);
    connect(ipReply, SIGNAL(finished()), this, SLOT(onReply()));
}

void WebServiceRequest::onReply() {
    QNetworkReply* reply = qobject_cast<QNetworkReply*>(sender());
    QString response;
    bool success = false;
    if (reply) {
        if (reply->error() == QNetworkReply::NoError) {
            int available = reply->bytesAvailable();
            if (available > 0) {
                success = true;
                emit complete(reply->readAll(), success);
            }
        } else {
            response =
                    QString("Error: ") + reply->errorString()
                        + QString(" status:")
                        + reply->attribute(
                                    QNetworkRequest::HttpStatusCodeAttribute).toString();
        }
        reply->deleteLater();
    }
} 
```

**//CustomImageViewProvider.cpp**这是我们的ListItemProvider 用来自定义我们的ListView

```
CustomImageViewProvider::CustomImageViewProvider() {
}

VisualNode * CustomImageViewProvider::createItem(ListView* list,
        const QString &type) {
    CustomImageView *myCustomImageView = new CustomImageView();
    return myCustomImageView;
}

void CustomImageViewProvider::updateItem(ListView* list,
        bb::cascades::VisualNode *listItem, const QString &type,
        const QVariantList &indexPath, const QVariant &data) {
    QVariantMap map = data.value<QVariantMap>();
    CustomImageView *myCustomImageView = static_cast<CustomImageView *>(listItem);
    qDebug() << indexPath;
    QString imagePath = map["path"].toString();
    myCustomImageView->updateItem(imagePath);
} 
```

在构造函数中创建和设置 main.qml 的根之前，向 qml 注册 CustomImageView 和 CustomImageViewProvider。以便它们在我们的 qml 中可用

```
qmlRegisterType < CustomImageView > ("my.library", 1, 0, "CustomImageView");
qmlRegisterType < CustomImageViewProvider > ("my.library", 1, 0, "CustomImageViewProvider"); 
```

// **Path.xml**所有路径都存储在这个文件中，该文件用作列表视图中的DataModel

```
<root>
    <image path="http://upload.wikimedia.org/wikipedia/commons/e/eb/A_landscape_in_Peradeniya,_Sri_Lanka.jpg"/>
    <image path="http://lejournaldelaphotographie.com/system/photos/54840/med_fernando-brito_lost-in-the-landscape_1-jpg.jpg"/>
    <image path="http://st.houzz.com/simgs/17713aee00b8b8b7_15-7678/modern-landscape.jpg"/>

    <image path="http://cdn.c.photoshelter.com/img-get/I0000kRJbKDHBT30/s/900/720/Landscape-sunset-15.jpg"/>
    <image path="http://www.cashmoredesign.com/images/large/landscape-5.jpg"/>
    <image path="http://ad009cdnb.archdaily.net/wp-content/uploads/2012/11/50b7d0ddb3fc4b239a0000f2_arteology-atelier-37-2_-atelier37-2_arteologie-34-528x396.jpg"/>

    <image path="http://upload.wikimedia.org/wikipedia/en/e/e8/Berchem,_Nicolaes_~_Landscape_with_Herdsmen_Gathering_Sticks,_early_1650s,_oil_on_panel,_private_collection,_New_York.jpg"/>
    <image path="http://www.taschen.com/media/images/960/teaser_mi_arch_now_landscape_top_1203301047_id_536230.jpg"/>
    <image path="http://lasersandlights.com/images/medium/landscape%20bliss%20spright.jpg"/>

    <image path="http://uploads0.wikipaintings.org/images/pieter-bruegel-the-elder/landscape-with-the-flight-into-egypt-1563.jpg"/>
    <image path="http://middo.me/wp-content/uploads/2012/07/Landscape-with-calm-river-1024x640.jpg"/>
    <image path="http://ad009cdnb.archdaily.net/wp-content/uploads/2012/07/500de84928ba0d609d000038_fort-werk-aan-t-spoel-rietveld-landscape_rob6999kopierl-528x352.jpg"/>

        <image path="http://upload.wikimedia.org/wikipedia/commons/e/eb/A_landscape_in_Peradeniya,_Sri_Lanka.jpg"/>
    <image path="http://lejournaldelaphotographie.com/system/photos/54840/med_fernando-brito_lost-in-the-landscape_1-jpg.jpg"/>
    <image path="http://st.houzz.com/simgs/17713aee00b8b8b7_15-7678/modern-landscape.jpg"/>

    <image path="http://cdn.c.photoshelter.com/img-get/I0000kRJbKDHBT30/s/900/720/Landscape-sunset-15.jpg"/>
    <image path="http://www.cashmoredesign.com/images/large/landscape-5.jpg"/>
    <image path="http://ad009cdnb.archdaily.net/wp-content/uploads/2012/11/50b7d0ddb3fc4b239a0000f2_arteology-atelier-37-2_-atelier37-2_arteologie-34-528x396.jpg"/>

    <image path="http://upload.wikimedia.org/wikipedia/en/e/e8/Berchem,_Nicolaes_~_Landscape_with_Herdsmen_Gathering_Sticks,_early_1650s,_oil_on_panel,_private_collection,_New_York.jpg"/>
    <image path="http://www.taschen.com/media/images/960/teaser_mi_arch_now_landscape_top_1203301047_id_536230.jpg"/>
    <image path="http://lasersandlights.com/images/medium/landscape%20bliss%20spright.jpg"/>

    <image path="http://uploads0.wikipaintings.org/images/pieter-bruegel-the-elder/landscape-with-the-flight-into-egypt-1563.jpg"/>
    <image path="http://middo.me/wp-content/uploads/2012/07/Landscape-with-calm-river-1024x640.jpg"/>
    <image path="http://ad009cdnb.archdaily.net/wp-content/uploads/2012/07/500de84928ba0d609d000038_fort-werk-aan-t-spoel-rietveld-landscape_rob6999kopierl-528x352.jpg"/>

        <image path="http://upload.wikimedia.org/wikipedia/commons/e/eb/A_landscape_in_Peradeniya,_Sri_Lanka.jpg"/>
    <image path="http://lejournaldelaphotographie.com/system/photos/54840/med_fernando-brito_lost-in-the-landscape_1-jpg.jpg"/>
    <image path="http://st.houzz.com/simgs/17713aee00b8b8b7_15-7678/modern-landscape.jpg"/>

    <image path="http://cdn.c.photoshelter.com/img-get/I0000kRJbKDHBT30/s/900/720/Landscape-sunset-15.jpg"/>
    <image path="http://www.cashmoredesign.com/images/large/landscape-5.jpg"/>
    <image path="http://ad009cdnb.archdaily.net/wp-content/uploads/2012/11/50b7d0ddb3fc4b239a0000f2_arteology-atelier-37-2_-atelier37-2_arteologie-34-528x396.jpg"/>

    <image path="http://upload.wikimedia.org/wikipedia/en/e/e8/Berchem,_Nicolaes_~_Landscape_with_Herdsmen_Gathering_Sticks,_early_1650s,_oil_on_panel,_private_collection,_New_York.jpg"/>
    <image path="http://www.taschen.com/media/images/960/teaser_mi_arch_now_landscape_top_1203301047_id_536230.jpg"/>
    <image path="http://lasersandlights.com/images/medium/landscape%20bliss%20spright.jpg"/>

    <image path="http://uploads0.wikipaintings.org/images/pieter-bruegel-the-elder/landscape-with-the-flight-into-egypt-1563.jpg"/>
    <image path="http://middo.me/wp-content/uploads/2012/07/Landscape-with-calm-river-1024x640.jpg"/>
    <image path="http://ad009cdnb.archdaily.net/wp-content/uploads/2012/07/500de84928ba0d609d000038_fort-werk-aan-t-spoel-rietveld-landscape_rob6999kopierl-528x352.jpg"/>

        <image path="http://upload.wikimedia.org/wikipedia/commons/e/eb/A_landscape_in_Peradeniya,_Sri_Lanka.jpg"/>
    <image path="http://lejournaldelaphotographie.com/system/photos/54840/med_fernando-brito_lost-in-the-landscape_1-jpg.jpg"/>
    <image path="http://st.houzz.com/simgs/17713aee00b8b8b7_15-7678/modern-landscape.jpg"/>

    <image path="http://cdn.c.photoshelter.com/img-get/I0000kRJbKDHBT30/s/900/720/Landscape-sunset-15.jpg"/>
    <image path="http://www.cashmoredesign.com/images/large/landscape-5.jpg"/>
    <image path="http://ad009cdnb.archdaily.net/wp-content/uploads/2012/11/50b7d0ddb3fc4b239a0000f2_arteology-atelier-37-2_-atelier37-2_arteologie-34-528x396.jpg"/>

    <image path="http://upload.wikimedia.org/wikipedia/en/e/e8/Berchem,_Nicolaes_~_Landscape_with_Herdsmen_Gathering_Sticks,_early_1650s,_oil_on_panel,_private_collection,_New_York.jpg"/>
    <image path="http://www.taschen.com/media/images/960/teaser_mi_arch_now_landscape_top_1203301047_id_536230.jpg"/>
    <image path="http://lasersandlights.com/images/medium/landscape%20bliss%20spright.jpg"/>

    <image path="http://uploads0.wikipaintings.org/images/pieter-bruegel-the-elder/landscape-with-the-flight-into-egypt-1563.jpg"/>
    <image path="http://middo.me/wp-content/uploads/2012/07/Landscape-with-calm-river-1024x640.jpg"/>
    <image path="http://ad009cdnb.archdaily.net/wp-content/uploads/2012/07/500de84928ba0d609d000038_fort-werk-aan-t-spoel-rietveld-landscape_rob6999kopierl-528x352.jpg"/>
</root> 
```

# nhibernate - 休眠行级锁定

> ID：14009710
> 
> 赞同：1
> 
> 时间：2012-12-23T08:45:26.130
> 
> 标签：nhibernate, session, transactions

如何在 Nhibernate 中实现记录锁定。
我试过了

1.  具有隔离级别的事务和
2.  会话锁定。

哪种方法更适合行级锁定？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T19:32:52.800

给出的选项不是相互排斥的。您需要指定具有适当隔离级别的事务，否则您将根本没有任何锁。如果您所说的“会话锁定”是指调用 session.Lock()，这是一种在预先存在的事务中获取或升级锁的方法。

如果您通过“具有隔离级别的事务”专门表示“可序列化隔离级别”，则可能的缺点是它可能需要比所需更多的锁，因为它会在所有读取行上放置一些锁。

# javascript - 不明白为什么 ajax 不直接更新我的按钮

> ID：14009711
> 
> 赞同：1
> 
> 时间：2012-12-23T08:45:52.147
> 
> 标签：javascript, html, ruby-on-rails, ajax, jquery

我的 ajax 的目标是关注和取消关注某人。问题是，当我点击按钮后，请求被发送，但我需要将页面刷新到新按钮没有关注看到它。我如何确保它直接工作而不刷新。

```
<script type="text/javascript">
$(function() {
    $('.ajax_button').click(function() {
        $.ajax({
            type: "POST",
            url: "/" +$(this).attr('name') + "/toggle_follow_via_ajax",
            success: function(msg){
                elm = $('#btn_' + msg);
                if (elm.val() == "Stop Following") {
                    elm.val("Follow");
                } else {
                        elm.val("Stop Following");
                        }
            }
        });
    })
});
</script> 
```

**这是生成按钮的 html.erb**

```
<div class="button_container">
        <input type="button" name="<%= friend.username %>" id="btn_<%=friend.username %>" class="button ajax_button" 
        value="<% if current_user.is_friend? friend %>Stop Following<% else %>Follow<% end %>"/>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:40:40.653

您可以在调用 ajax 方法之前获取它的句柄，而不是使用从服务器返回的值来获取按钮的句柄（因为您已经在按钮对象的范围内）。像这样：

```
<script type="text/javascript">
$(function() {
    $('.ajax_button').click(function() {
        var btn = $(this);
        $.ajax({
            type: "POST",
            url: "/" +$(this).attr('name') + "/toggle_follow_via_ajax",
            success: function(msg) {
                var val = btn.val() == 'Follow' ? 'Stop Following' : 'Follow';
                btn.val(val);
            }
        });
    })
});
</script> 
```

我没有测试过这段代码，但它应该可以工作

# python - raw_input 的奇怪重定向效果

> ID：14009714
> 
> 赞同：10
> 
> 时间：2012-12-23T08:46:21.367
> 
> 标签：python

根据[手册](http://docs.python.org/2/library/functions.html#raw_input)，`raw_input`写入标准输出。我有这个小程序（`test_raw_input.py`）：

```
# Test if rawinput writes to stdout or stderr
raw_input('This is my prompt > ') 
```

无论我如何运行它：

```
$ python test_raw_input.py > xxx 
```

或者

```
$ python test_raw_input.py 2> xxx 
```

提示总是以`xxx`. 为什么会这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-23T09:06:54.933

从您对 KennyTM 的回复中，我收集到您了解

```
python test_raw_input.py > xxx 
```

这只是您不了解的第二种用法：

```
python test_raw_input.py 2> xxx 
```

我认为您遇到了此处描述的行为[http://mail.python.org/pipermail/python-dev/2008-January/076446.html](http://mail.python.org/pipermail/python-dev/2008-January/076446.html)，这导致了错误报告[http://bugs.python.org/issue1927](http://bugs.python.org/issue1927)，其中有一条评论说它在去年 9 月尚未修复。

但是，有一个解决方法：来自[https://groups.google.com/forum/?fromgroups=#!topic/chennaipy/R_VJYNdel-o](https://groups.google.com/forum/?fromgroups=#!topic/chennaipy/R_VJYNdel-o)，如果你

```
import readline 
```

在使用之前`raw_input`，行为将如您所愿。

# visual-studio-2012 - 提取本地 xml 文件并将其应用于 windows 8 java 脚本网格布局模板 data.js 文件的最简单方法是什么？

> ID：14009720
> 
> 赞同：0
> 
> 时间：2012-12-23T08:47:28.300
> 
> 标签：visual-studio-2012, xmlhttprequest, winjs

如果问题过于简单或要求太多，我深表歉意，但我觉得我非常接近一个简单的答案，但仍然太远了。我要做的就是使用 Visual Studio 2012 express 中的网格布局模板将 xml 数据集成到网格布局模板中。

winjs.xhr 作为提取 xml 数据的一种方式，我真的很困惑。

我的 xml 文件具有匹配组标题、项目标题和页面内容的节点。

我部分编辑的 data.js 文件如下：

```
(function () {
"use strict";

var list = new WinJS.Binding.List();
var groupedItems = list.createGrouped(
    function groupKeySelector(item) { return item.group.key; },
    function groupDataSelector(item) { return item.group; }
);

// TODO: Replace the data with your real data.
// You can add data from asynchronous sources whenever it becomes available.
generateRulesData().forEach(function (item) {
    list.push(item);
    return WinJS.xhr({ url: "/data/myfile.xml" });
});

WinJS.Namespace.define("Data", {
    items: groupedItems,
    groups: groupedItems.groups,
    getItemReference: getItemReference,
    getItemsFromGroup: getItemsFromGroup,
    resolveGroupReference: resolveGroupReference,
    resolveItemReference: resolveItemReference
});

// Get a reference for an item, using the group key and item title as a
// unique reference to the item that can be easily serialized.
function getItemReference(item) {
    return [item.group.key, item.title];
}

// This function returns a WinJS.Binding.List containing only the items
// that belong to the provided group.
function getItemsFromGroup(group) {
    return list.createFiltered(function (item) { return item.group.key === group.key; });
}

// Get the unique group corresponding to the provided group key.
function resolveGroupReference(key) {
    for (var i = 0; i < groupedItems.groups.length; i++) {
        if (groupedItems.groups.getAt(i).key === key) {
            return groupedItems.groups.getAt(i);
        }
    }
}

// Get a unique item from the provided string array, which should contain a
// group key and an item title.
function resolveItemReference(reference) {
    for (var i = 0; i < groupedItems.length; i++) {
        var item = groupedItems.getAt(i);
        if (item.group.key === reference[0] && item.title === reference[1]) {
            return item;
        }
    }
}

// Returns an array of sample data that can be added to the application's
// data list. 
function generateRulesData() {
    var itemContent = "INSERT CONTENT HERE";
    var itemDescription = "DESCRIPTION FOR EACH RULE";
    var groupDescription = "Group Description: INSERT";

    // These three strings encode placeholder images. You will want to set the
    // backgroundImage property in your real data to be URLs to images.
    var darkGray = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXY3B0cPoPAANMAcOba1BlAAAAAElFTkSuQmCC";
    var lightGray = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXY7h4+cp/AAhpA3h+ANDKAAAAAElFTkSuQmCC";
    var mediumGray = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXY5g8dcZ/AAY/AsAlWFQ+AAAAAElFTkSuQmCC";

    // Each of these sample groups must have a unique key to be displayed
    // separately.
    var sampleGroups = [
        { key: "group1", title: "Group Title: 1", subtitle: "Group Subtitle: 1", backgroundImage: darkGray, description: groupDescription },
        { key: "group2", title: "Group Title: 2", subtitle: "Group Subtitle: 2", backgroundImage: lightGray, description: groupDescription }
    ];

    // Each of these sample items should have a reference to a particular
    // group.
    var sampleItems = [
        { group: sampleGroups[0], title: "Item Title: 1", subtitle: "Item Subtitle: 1", description: itemDescription, content: itemContent, backgroundImage: lightGray },
        { group: sampleGroups[0], title: "Item Title: 2", subtitle: "Item Subtitle: 2", description: itemDescription, content: itemContent, backgroundImage: darkGray },
        { group: sampleGroups[0], title: "Item Title: 3", subtitle: "Item Subtitle: 3", description: itemDescription, content: itemContent, backgroundImage: mediumGray },
        { group: sampleGroups[0], title: "Item Title: 4", subtitle: "Item Subtitle: 4", description: itemDescription, content: itemContent, backgroundImage: darkGray },
        { group: sampleGroups[0], title: "Item Title: 5", subtitle: "Item Subtitle: 5", description: itemDescription, content: itemContent, backgroundImage: mediumGray },

        { group: sampleGroups[1], title: "Item Title: 1", subtitle: "Item Subtitle: 1", description: itemDescription, content: itemContent, backgroundImage: darkGray },
        { group: sampleGroups[1], title: "Item Title: 2", subtitle: "Item Subtitle: 2", description: itemDescription, content: itemContent, backgroundImage: mediumGray },
        { group: sampleGroups[1], title: "Item Title: 3", subtitle: "Item Subtitle: 3", description: itemDescription, content: itemContent, backgroundImage: lightGray }
    ];

    return sampleItems;
}
 })(); 
```

非常感谢具有将 xml 拉入网格模板的简单方法的页面链接。我查看了一个有助于将 rss 拉入博客的 msdn 页面，但我希望能得到更多——更简单的（http://msdn.microsoft.com/en-us/library/windows/apps/hh974582\. ASP）。代码、链接甚至 pdf 参考将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T20:10:21.467

WinJS.xhr 调用的结果将是一个*异步*承诺，一旦你得到响应，它将像任何其他异步 XHR 一样完成。它将在 responseXML 属性中可用——它有一个类似 DOM 的 API，用于从 XML 中获取数据——例如查询选择器、节点内容等。

在您的示例中，关键是`list.push`使用提取 XML 数据的适当推送来更新调用。一旦你完成了这个，剩下的样本就剩下了，它应该允许你在网格中显示你的数据。

如果我们以您的代码为例，并使用以下 XML 示例：

```
<Data>
  <Stuff>A</Stuff>
  <Stuff>B</Stuff>
  <Stuff>C</Stuff>
  <Stuff>D</Stuff>
  <Stuff>E</Stuff>
  <Stuff>F</Stuff>
</Data> 
```

在文件`Data.xml`中，然后加载它将是：

var 节点 = r.responseXML.querySelectorAll("Stuff");

```
for (var i = 0; i < nodes.length; i++) {
    list.push({
        data: nodes[i].textContent,
    });
} 
```

# github - github上的“谨慎合并”

> ID：14009722
> 
> 赞同：3
> 
> 时间：2012-12-23T08:47:52.460
> 
> 标签：github

我注意到，在我在 github 上的拉取请求中，它现在说“谨慎合并”，同时仍然允许我自动合并。似乎与[https://circleci.com](https://circleci.com)有关，上面的 Failed(details) 链接重定向到该链接。有谁知道这是怎么一回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T08:57:23.653

该项目可能已配置为与在线持续集成服务链接，该服务对拉取请求执行质量检查（单元测试是否通过等）。

所以消息可能意味着：没有冲突，你可以合并，但结果将是一个测试失败的项目。如果您单击链接（或告诉我们链接指向的确切位置），也许您会发现更多信息。

# android - android中的MediaPlayer问题

> ID：14009724
> 
> 赞同：0
> 
> 时间：2012-12-23T08:47:56.093
> 
> 标签：android, media-player

第一个活动完成后，我正在开发一个应用程序。我正在`mediaplayer`通过上一个活动中的许多活动开始音乐并导航。我无法停止媒体播放器。我已经调用了第一个活动类方法来停止媒体播放器，但它显示空指针异常，任何人都可以为我提供相关解决方案，我没有使用服务类。

下面显示的是我启动媒体播放器的第一个活动。

```
public class GamemenuActivity extends Activity implements OnClickListener {
        Button newgame, highscore, help,sound;
        MediaPlayer mp;
        int i=0;
        TranslateAnimation anim, anim511, anim2511,animsound;
        BounceInterpolator bo;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.menuscreen);
            media();
            newgame = (Button) findViewById(R.id.newgamebutton);
            highscore = (Button) findViewById(R.id.highscoresButton);
            help = (Button) findViewById(R.id.helpbutton);
            sound=(Button)findViewById(R.id.soundbutton);
            anim = new TranslateAnimation(3250, 0, 100, 0);
            anim511 = new TranslateAnimation(3250, 0, 100, 0);
            anim2511 = new TranslateAnimation(3250, 0, 100, 0);
            animsound=new TranslateAnimation(3250, 0,100,0);
            anim.setFillAfter(true);

            newgame.startAnimation(anim);

            anim511.setDuration(3000);

            anim.setDuration(3000);
            anim511.setFillAfter(true);
            highscore.startAnimation(anim511);

            anim2511.setDuration(3000);
            anim2511.setFillAfter(true);
            help.startAnimation(anim2511);

            animsound.setDuration(3000);
            animsound.setFillAfter(true);
            sound.startAnimation(animsound);

            newgame.setOnClickListener(this);
            highscore.setOnClickListener(this);
            help.setOnClickListener(this);
            sound.setOnClickListener(this);
        }

        public void media() {
             /* Intent i=new Intent(GamemenuActivity.this,Background.class);
              startService(i);*/

            mp = MediaPlayer.create(getApplicationContext(), R.raw.gameback);

            mp.start();
            mp.setVolume(1, 1);
            mp.setLooping(true);

        }

            public void stopmedia(){
                mp.stop();
                mp.release();
           } 
```

我想结束音乐的活动如下

```
public class Highpage extends Activity{
    TextView name,score;
    int sli;
    Button sub;
    Bundle base;
    SQLiteHelper sqdb;
    String data,val;
    GamemenuActivity gm; 
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
            gm=new GamemenuActivity();
        TextView name=new TextView(this);
            TextView score=new TextView(this);
            base=getIntent().getExtras();
        data=base.getString("a");
        val=base.getString("b");
        sli=base.getInt("brk");
        name.setText(data);
        score.setText(val);
        System.out.println("values are"+data  +val);
        sqdb=new SQLiteHelper(this);
            sqdb.insertvalues(data, val,sli);
        Toast.makeText(Highpage.this, "values updated successfully", 30).show();

        //stopping media player
        gm.stopmedia();

        Intent hm=new Intent(Highpage.this,GamemenuActivity.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        startActivity(hm);
        finish();
    }

} 
```

这是logcat中的错误

```
12-23 14:54:37.179: E/AndroidRuntime(11970):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-23 14:54:37.179: E/AndroidRuntime(11970):    at dalvik.system.NativeStart.main(Native Method)
12-23 14:54:37.179: E/AndroidRuntime(11970): Caused by: java.lang.NullPointerException
12-23 14:54:37.179: E/AndroidRuntime(11970):    at mobbi.Stallion.imageteaser.GamemenuActivity.stopmedia(GamemenuActivity.java:80) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:59:45.603

你在这里编码真的很奇怪。

您必须了解创建活动的对象与运行活动不同。（通过任何方法，例如意图）

所以当你创建它的对象时，`GameMenuActivity`它只会运行Activity的构造函数。

它不会运行该`onCreate()`方法。

因此没有`MediaPlayer`停止或释放的对象。因此发生空指针异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T23:29:25.800

您说您没有使用服务，但在您的场景中，最好的办法是使用服务，因为您正在创建 2 个不同的媒体播放器实例。您在尚未启动的媒体播放器上调用停止，从而获得空指针。将媒体播放器放入服务中，它会让您停止它。

[http://www.java2s.com/Code/Android/Media/UsingServicetoplaymediafile.htm](http://www.java2s.com/Code/Android/Media/UsingServicetoplaymediafile.htm)

此外，您可能想要绑定它，您可能不想在 mainActivity 中忘记这段代码。

```
private ServiceConnection mediaServiceConnection = new ServiceConnection() {
    @Override
    public void onServiceConnected(ComponentName arg0, IBinder binder) 
    {
        mp3Service = ((LocalBinder) binder).getService();
    }

    @Override
    public void onServiceDisconnected(ComponentName arg0) 
    {
    }

}; 
```

您将能够通过执行以下操作来弄乱媒体播放器：

mp3Service.stop();

# c - 一个简单的 OpenGL 应用程序中的“访问冲突读取位置 0x000000000”

> ID：14009726
> 
> 赞同：0
> 
> 时间：2012-12-23T08:48:40.420
> 
> 标签：c, opengl

使用缓冲区对象存储顶点数组时，我在 openGL 中遇到问题。当我运行代码时，会出现一个窗口，显示消息“*访问冲突读取位置 0x000000000* ”，当我将光标移动到 glGenBuufers 函数旁边的箭头时，我看到了描述：*这是该线程从当前函数返回时要执行的下一条语句*。

![IDE 快照](../Images/41f8f14e55efe203415156b285bcd1dc.png)

代码：

```
int frame=0;
void display();
void datasource();

 GLuint vbo;

void datasource()
{
    GLfloat vertex1[]={-1.000000 ,0.500000 ,-0.700000 ,0.500000 ,-1.000000 ,0.800000 ,-0.700000 ,0.800000 ,-0.400000 ,0.500000 ,-0.100000 ,0.500000 ,-0.400000 ,0.800000 ,-0.100000 ,0.200000 ,0.500000 ,0.500000 ,0.500000 ,0.200000 ,0.800000 ,0.500000,0.800000 ,0.800000 ,0.800000 ,0.500000 ,1.100000 ,0.500000 ,0.800000 ,0.800000 ,1.100000,0.800000  };

    glGenBuffers(1,&vbo);
    glBindBuffer(GL_ARRAY_BUFFER,vbo);
    glBufferData(GL_ARRAY_BUFFER,sizeof(vertex1),vertex1,GL_STATIC_DRAW);
}

void init(int arc,char **arch)
{
    glutInit(&arc,arch);
    glutInitWindowSize(800,800);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
    glutCreateWindow("chess");
    glClearColor(0.0,0.0,0.0,0.0);
    glutDisplayFunc(display);
}

int main(int arc,char **arch)
{
    init(arc,arch);
    datasource();
    glutMainLoop();
    return 0;
}

void display()
{
    frame++;
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
    glDrawArrays(GL_TRIANGLE_STRIP,0,8);
    glutSwapBuffers();
    glutPostRedisplay();
} 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T10:58:19.483

glGenBuffers、glBindBuffer 和 glBufferData 是顶点缓冲区对象*扩展*或 OpenGL-1.5 的函数。默认系统 ABI 仅适用于 OpenGL-1.2，因此您需要先加载扩展的 OpenGL 功能，然后才能使用它。仅包含标题是不够的，因为它们只是为您提供未初始化的符号。

最简单的方法：

1.  [从http://glew.sf.net](http://glew.sf.net)下载并安装 GLEW
2.  将所有出现的 替换`#include <GL/gl.h>`为`#include <GL/glew.h>`
3.  立即调用`glewInit()`并`glutCreateWindow`检查错误代码
4.  检查 VBO 是否可用（即至少 GL_ARB_vertex_buffer_object 或 OpenGL 版本 >= 1.5）
5.  将 GLEW 库添加到您的链接器设置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T09:41:38.097

函数指针本身 ( `glGenBuffers`) 可能是`NULL`( [source](http://www.opengl.org/discussion_boards/showthread.php/170104-glGenBuffers-segfault) )。这发生在 OpenGL 系统尚未正确初始化时，调用`NULL`函数指针显然会导致段错误。看看地址`glGenBuffers`，是`NULL`吗？如果是，那么你在初始化代码的某个地方犯了一个错误。

# jquery - 黑莓设备上未显示加载程序 (Gif)

> ID：14009730
> 
> 赞同：0
> 
> 时间：2012-12-23T08:48:56.473
> 
> 标签：jquery, html, blackberry-webworks

“我有这个加载器 gif，当我在 Ripple Emulator 上测试它时，它显示得很好，但是当被放置在设备上时，只显示加载文本而不显示 loader.gif

```
function getData()
{
  $.ajax({
  type: 'GET',
  url: 'http://www.somedomain.com/somedirectory/webservice​s',
  data&colon; { some data },
  beforeSend:function() 
  {
    var strLoader = "";

    strLoader += '<div id="loaderContainer">';
    strLoader += '<div id="loaderWord">Loading.....</div>';
    strLoader += '<div id="loaderImage"><img src="images/loader.gif" /></div>';
    strLoader += '</div>';//end of loaderContainer

    $('#content').html(strLoader);
  },
  success:function(data) 
  {
    //retrieve data if retrieval is successful
  }
  error:function()
  {
    //display message if there's error
  }
});
} 
```

有人可以帮忙吗？

谢谢你。

**编辑以反映示例代码上的拼写错误**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:13:55.003

在下面的行中，您使用了错误的引号， ' 而不是 "

```
strLoader += '<div id="loaderWord'>Loading.....</div>';
//_______________________________^ Change this to a " 
```

在下面的行中，您缺少报价。

```
$('#content).html(strLoader);
//________^ Add a ' 
```

# asp.net-mvc-3 - 从另一个操作重定向到发布操作

> ID：14009732
> 
> 赞同：5
> 
> 时间：2012-12-23T08:49:34.927
> 
> 标签：asp.net-mvc-3, post, action

我想从 MVC3 控制器中的另一个操作重定向到发布操作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T08:56:03.253

有两种基本方法可以做到这一点：

*   创建一个`<form>`将`action`URL 设置为指向您要调用的操作的 URL。

*   从客户端执行 POST ajax 请求

**更新**

~~要重定向，您可以简单地返回一个`RedirectToRouteResult`. 通常这是[`RedirectToAction`使用`Controller`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx).~~

**更新 2**

如果目标操作仅是 POST（假设它被称为`TargetAction`），您可以创建一个允许 GET 和 do 的新操作`return TargetAction()`。

纯重定向是不可能的，因为 AFAIK 重定向意味着：

*   服务器返回 3xx 重定向状态以及资源的新位置
*   浏览器向上一步指示的位置发出 GET 请求。

但是，我建议您重新考虑控制器操作的设计，以尽可能避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:27:02.000

为什么？您不能通过 http 动词定义重定向到发布操作。

为什么不直接调用您的其他操作方法而不是使用重定向？

# c++ - 使用 while 循环读取文件如何在 C++ 中工作？

> ID：14009737
> 
> 赞同：5
> 
> 时间：2012-12-23T08:51:29.200
> 
> 标签：c++, file, while-loop

为什么可以使用 while 循环读取文件，例如

```
while (file >> variable) 
```

或者

```
while (getline(xx, yy)) 
```

`>>`和函数是否`getline`返回布尔值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T09:01:57.193

流运算符评估为对流本身的引用。这允许*链接*例如`file >> variable >> variable >> variable`。

当您将它与流对象可转换为布尔值的事实结合起来时（`true`如果没有设置错误标志，则其值是），是的，您会得到这种效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T10:34:23.023

如果我们有类似的东西：

包含数据的文件：

```
11 
22 
13
45
19 
```

* * *

然后是一个 C++ 文件：

```
int variable;
int count = 0;
while(!file.eof())
{
    count ++;
    file >> variable;
}
cout << "there are  " << count << " numbers in the file"; 
```

输出将是 6，因为当我们读取 19 时，eof 为假，只有当我们尝试读取 NEXT 数字时，才会设置 eof。我们可以通过将 count++ 移动到 if 语句来解决这个问题，所以我们有`if (file >> variable) count++;`。但这变得相当笨拙。

如果我们改为：

```
while(file >> variable)
{
   count++;
} 
```

当我们尝试读取 19 之后的下一个数字时，循环退出。

编辑：修复“错误计数的原因”以澄清 eof() 是在“读取失败”之后设置的。

还应该指出，在`while(!file.eof())`输入错误的情况下效果不佳。假设我们有上面的代码，但是输入是`11 22 aa ...`- 当输入是 .eof() 时没有设置`aa`。输入只是停止并返回错误。但是由于 eof() 仍然是错误的[从技术上讲，我们可以从文件中读取更多内容，只要我们不尝试将其读取为数字]。所以这会导致无限循环！该`while (file >> variable)`解决方案避免了这个问题 - 当然，您可能仍然需要添加一些额外的代码来表示“我希望这里有一个数字，但我得到了其他东西”。但是您不必担心循环会一直持续下去，什么也不读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T08:56:26.340

有时它们是为了方便而制作的；或者，它们返回一个可转换为 bool 的类型。您应该参考这些函数（或流操作符）的文档。

# c# - 从矩形渲染线

> ID：14009739
> 
> 赞同：-1
> 
> 时间：2012-12-23T08:51:51.813
> 
> 标签：c#, line, overlapping, bresenham

我目前已经为我正在开发的基于图块的世界编辑器实现了 Bresenham 线算法。对于`Shift`+`Click`功能，我想根据图块集中的选择矩形渲染一条线。`point1`这很简单，因为我可以使用算法找到线上的点`point2`并在每个点处绘制选择。

The issue with this is that the points overlap when the selection rectangle is larger than one tile. 结果如下所示。

![当前的](../Images/59594ca5e1082c455e7fdc12b7a27f86.png)

我的问题是给出一条线上的所有点，以及选择大小，我怎样才能得到这样的结果？请注意，一旦选择过去，我想停止绘制选择`point2`。

![期望的](../Images/3fecdffec7173ed4af05746b386a7fb2.png)

这是我目前用于渲染线条而不考虑选择大小的内容。

```
void renderPoint(Point point, bool invalidate = false)
{
    Rectangle selection = world.SelectionRectangle;

    int width = selection.Width / world.Settings.TileSize.Width,
        height = selection.Height / world.Settings.TileSize.Height,
        offsetX = (int)Math.Floor((float)width / 2),
        offsetY = (int)Math.Floor((float)height / 2);

    for (int x = point.X, sx = 0; x < point.X + width; x++, sx++)
    {
        for (int y = point.Y, sy = 0; y < point.Y + height; y++, sy++)
        {
            Point change = new Point(x - offsetX, y - offsetY);

            if (!changesUndo.ContainsKey(change))
                changesUndo[change] = world.GetTile(change);

            WorldTile tile = new WorldTile(selection.X + (sx * world.Settings.TileSize.Width), selection.Y + (sy * world.Settings.TileSize.Height), 0);

            world.SetTile(change.X, change.Y, tile);

            changesRedo[change] = tile;
        }
    }

    lastRenderedPoint = point;

    if (invalidate)
        world.InvalidateCanvas();
}

void renderLine(Point p1, Point p2)
{
    List<Point> points = pointsOnLine(p1, p2);

    for (int i = 0; i < points.Count; i++)
        renderPoint(points[i], i == points.Count - 1);
} 
```

如果您需要我的代码的更多上下文，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:09:10.733

如果这些点是用 Bresenham 渲染的，那么您必须跳过“n”个点中的每个“n-1”个，其中“n”是线的主要方向上的选择大小（即，如果它是一条大部分水平线，宽度）。

像这样的东西？：

```
void renderLine(Point p1, Point p2)
{
    List<Point> points = pointsOnLine(p1, p2);

    int dx = Abs(p2.x - p1.x);
    int dy = Abs(p2.y - p1.y);

    Rectangle selection = world.SelectionRectangle;

    int incr = selection.Width / world.Settings.TileSize.Width;
    if(dy > dx)
    {
        incr = selection.Height / world.Settings.TileSize.Height;
    }

    int lastPoint = (points.Count-1) / incr;
    lastPoint *= incr;

    for (int i = 0; i <= lastPoint; i+=incr)
        renderPoint(points[i], i == lastPoint);
} 
```

# ruby - 如何自定义 Ruby pry gem 的颜色？

> ID：14009740
> 
> 赞同：1
> 
> 时间：2012-12-23T08:52:10.970
> 
> 标签：ruby, colors, pry

见下图。我想知道有没有办法改变颜色？谢谢。

![](../Images/3e5779002eba280918b0269780e197e9.png)

* * *

编辑：

我的操作系统是 Win7 64 位企业版。我在设置为黑色背景的 PowerShell 命令行窗口中使用 Pry。

![](../Images/99a5adcfa12f2e515a8f561ad982904c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T08:56:28.823

试试这个 gem，或者尝试他们在这个 gem 中使用的方法[https://github.com/kyrylo/pry-theme](https://github.com/kyrylo/pry-theme)

# python - 如果数据类型错误，则删除 ndarray numpy 行

> ID：14009741
> 
> 赞同：-1
> 
> 时间：2012-12-23T08:52:24.480
> 
> 标签：python, numpy, multidimensional-array

我从 CSV 文件加载了这个巨大的 500 万 * 42 ndarray。在我进行一些处理并尝试将其保存到另一个 CSV 文件中，其类型为`float`.

我收到以下错误：

```
np.savetxt("inputFiles/fixed_X_"+self.file_name, X.astype(np.float), delimiter=",", fmt="%10.0f")
ValueError: could not convert string to float: 
```

我想删除任何包含无法转换为浮点数的值的行（我相信它是 csv 文件中的空白单元格）但由于文件大小太大而我无法找到它（我不能甚至用excel打开它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T23:06:54.403

Numpy 数组不包含多种数据类型。我假设在这种情况下，您有一个类型为 str 或类型对象的数组。

如果您知道要删除的单元格是空白的，则可以使用以下内容删除这些行的数组：

```
X[ all(X != '',axis=1) ].astype(float) 
```

本质上，给出 True/False 值列表的索引将为您提供仅包含 True 行的视图。这比实际删除行要快得多。你可以用任何你想要的测试来代替 X != ''。

A `X !=`or `X =`test 可能是您可以做到这一点的最快方法之一，因为一切都将在 numpy 内部完成。但是，您可以做的事情是有限的。

如果您真的想检查每个项目是否可以转换为浮点数，以下将起作用：

```
def canbefloat(x):
    try:
        float(x)
    except:
        return False
    else:
        return True
ucanbefloat = np.frompyfunc( canbefloat, 1, 1 )
X[ all( ucanbefloat(X.astype(object)), axis=1 ).astype(bool) ].astype(float) 
```

然而，这大约慢了三倍。

# ruby-on-rails - Rails]Carrierwave 与 OmniAuth

> ID：14009745
> 
> 赞同：0
> 
> 时间：2012-12-23T08:53:46.387
> 
> 标签：ruby-on-rails, omniauth, carrierwave

我的应用程序使用carrierwave 和omniauth (facebook)，我有一个小问题。

1.  当用户第一次使用 Facebook 帐户登录时，我将他的 Facebook 个人资料图片设为他的默认图片。（他不需要注册FB账号什么的。当他登录时，他已经注册了我的应用程序，没有提供任何更多信息）
2.  当用户首次从我的应用程序“本地”创建帐户时，他可以选择上传个人资料图片。因此，`profile_image`在 User 模型中有一个字段，并且`ProfileUploader`从carrierwave 安装在该字段上。

问题：**当我将 facebook 图片 url 保存到这个字段时，它给了我错误。**我认为发生这种情况是因为该字段安装了一个上传器，尽管该字段是*字符串类型*，但我不能只保存一个 URL 到该字段而不通过carrierwave 上传图像。

我通过将 FB 图像 url 存储到不同的字段来解决此问题`other_profile_image`，并且每当从 FB 创建用户帐户时，我都会从该字段调用他的图像。

例如，

```
<% if @user.provider == "local" %>
        <% if @user.profile_image.blank? %>
            <%= link_to image_tag('default.jpg'), '/users/'+@user.id.to_s %>
        <% else %>
            <%= link_to image_tag(@user.profile_image_url(:thumb)), '/users/'+@user.id.to_s %>
        <% end %>
<% elsif @user.provider == "facebook" %>
        <%= link_to image_tag(@user.other_profile_image), '/users/'+@user.id.to_s %>
<% end %> 
```

`provider=local specifies accounts created on the application, not from other third-parties like FB`

我的解决方法确实有效，但它困扰着我，因为我知道必须有更好的解决方案来处理这个问题。我需要了解如何处理以下简单任务：

1.  用户在*本地*注册时，可以选择上传头像。如果他没有，我想将我的默认图片的 url 存储到他的个人资料图片 url 字段中。
2.  当用户使用他的 FB 帐户时，他的 facebook 图像应该设置为他的初始个人资料图片。现在，我正在使用两个不同的字段，`profile_image`因为`other_profile_image`当我尝试将 URL 字符串存储到 profile_image 字段中时，carrierwave 引发了错误，在该字段上安装了carrierwave 上传器。

我希望有一个很好的方法来解决这个问题！我提前感谢任何帮助。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:02:40.710

您可以从远程网址上传照片。

```
class User < ActiveRecord::Base
  attr_accessible :profile_image, :remote_profile_image_url

  mount_uploader :profile_image, ProfileUploader
end

# somethere
user.remote_profile_image_url = "http://example.com/userpic.png"
user.save 
```

# java - 使用 for 循环生成不同的字母组合

> ID：14009747
> 
> 赞同：0
> 
> 时间：2012-12-23T08:53:50.110
> 
> 标签：java, for-loop

```
static void generator7(String fileName) throws IOException {

    FileWriter fw = new FileWriter(fileName);
    String[] list = { "a", "b", "c", "d" };

    for (int o = 0; o < list.length; o++) {
        for (int n = 0; n < list.length; n++) {
            for (int m = 0; m < list.length; m++) {
                for (int l = 0; l < list.length; l++) {
                    for (int k = 0; k < list.length; k++) {
                        for (int j = 0; j < list.length; j++) {
                            for (int i = 0; i < list.length; i++) {
                                fw.append(list[i] + list[j] + list[k]
                                        + list[l] + list[m] + list[n]
                                        + list[o]);
                                fw.append("\n");

                            }
                        }

                    }
                }
            }
        }
    }

} 
```

我有这段代码用来生成不同的字母组合（a、b、c、d）。我希望它能够生成 aaaaaaa、aaaaaac、aaaaaaag、aaaaaaat 到 tttttt。然而，产生的组合在 tttttgt 处停止。没有异常抛出。我不知道我的代码的哪一部分出错了。请帮忙。

```
static void generator7(String fileName) throws IOException {

FileWriter fw = new FileWriter(fileName);
String[] list = { "a", "b", "c", "d" };

for (int o = 0; o < list.length; o++) {
    for (int n = 0; n < list.length; n++) {
        for (int m = 0; m < list.length; m++) {
            for (int l = 0; l < list.length; l++) {
                for (int k = 0; k < list.length; k++) {
                    for (int j = 0; j < list.length; j++) {
                        for (int i = 0; i < list.length; i++) {
                            fw.append(list[i] + list[j] + list[k]
                                    + list[l] + list[m] + list[n]
                                    + list[o]);
                            fw.append("\n");

                        }
                    }

                }
            }
        }
    }
}
fw.flush();
fw.close();

} 
```

编辑：第一个代码是问题所在。第二个代码是解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T08:58:22.533

看起来你没有冲洗`FileWriter`. 剩下的字符串几乎肯定还在内存中，还没有写入磁盘。确保在`FileWriter`完成后冲洗并关闭它。

事实上，只调用该`close`方法是绝对必要的，因为它会调用`flush`自己，但是由于您被缺乏刷新所吸引，认为这里强调一下很重要......

# c++ - 函数返回数组但主要显示垃圾

> ID：14009752
> 
> 赞同：0
> 
> 时间：2012-12-23T08:54:37.510
> 
> 标签：c++, arrays, function, pointers, return

以下代码正在打印垃圾值。我将一个数组传递给一个向每个元素添加 5 的函数，但是当它返回该数组的指针时，主要显示垃圾。

我已经在 main 中尝试过索引和指针，但结果仍然相同。我怎样才能解决这个问题？

```
# include <conio.h>
# include <iostream>
using namespace std;

int * add5ToEveryElement(int arr[], int size)
{
    int theArray[5];
    for(int i=0; i<size; i++)
    {
        theArray[i] = arr[i] + 5;
        cout<<theArray[i]<<endl;
    }
    return theArray;
}

void main()
{
    const int size = 5;
    int noArr[size];
    for(int i=0; i<size; i++)
    {
        noArr[i] = i;
    }
    int *arr = add5ToEveryElement(noArr, size);
    cout<<endl;cout<<endl;
    for(int i=0; i<size; i++)
    {
        cout<<arr[i]<<endl;
    }
    cout<<endl;cout<<endl;cout<<endl;cout<<endl;
    for(int i=0; i<size; i++)
    {
        cout<<*arr<<endl;
        *arr++;
    }
    getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T09:00:10.120

`theArray``add5ToEveryElement()`是返回给 main()的函数中的一个本地数组。这是未定义的行为。

最低限度您可以更改此行：

```
int theArray[5]; 
```

到：

```
int *theArray = new int[5]; 
```

它会正常工作的。`delete`稍后在 main() 中不要忘记它。因为你修改了原始指针，保存它：

```
int *arr = add5ToEveryElement(noArr, size);
int *org = arr;
// Rest of the code

//Finally

 delete[] org; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:24:42.053

从函数返回数组通常被认为是不好的。

除非您必须有一个“新”数组，否则我建议 C 和 C++ 中的典型情况是修改输入数组。如果 CALLING 函数想要有两个单独的数组，那么它可以通过制作自己的副本来实现。或者，您可以编写代码以将两个数组传递给您的函数，例如

```
void add5ToEveryElement(int arr[], int arr2[], int size)
{
    for(int i=0; i<size; i++)
    {
        arr2[i] = arr[i] + 5;
        cout<<theArray[i]<<endl;
    }
} 
```

那么您的 main 将使用两个数组参数调用，如果您希望使用与输入和输出相同的参数，它也会这样做。

当然，这不完全是您问题的答案，但它为您的问题提供了“更好”的解决方案。

我通常不喜欢函数中的分配——尤其是“隐藏”分配（这个函数说它向每个元素添加 5，而不是“向每个元素添加 5 的分配数组”。代码永远不应该做令人惊讶的事情，分配内存有点如果您只要求为每个元素添加 5，这将是一个惊喜）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T10:32:29.420

这是完美的代码

```
# include <conio.h>
# include <iostream>
using namespace std;

int * add5ToEveryElement(int arr[], int size)
{
    int *theArray = new int[5];
    for(int i=0; i<size; i++)
    {
        theArray[i] = arr[i] + 5;
        cout<<theArray[i]<<endl;
    }
    return theArray;
}

void main()
{
    const int size = 5;
    int noArr[size];
    for(int i=0; i<size; i++)
    {
        noArr[i] = i;
    }
    int *arr = add5ToEveryElement(noArr, size);
    int *p = arr;
    cout<<endl;cout<<endl;
    for(int i=0; i<size; i++)
    {
        cout<<arr[i]<<endl;
    }
    cout<<endl;cout<<endl;cout<<endl;cout<<endl;
    for(int i=0; i<size; i++)
    {
        cout<<*arr<<endl;
        *arr++;
    }
    getch();
    delete[] p;
} 
```

# visual-c++ - MFC ShellTreeCtrl 选定元素完整路径

> ID：14009754
> 
> 赞同：1
> 
> 时间：2012-12-23T08:55:11.983
> 
> 标签：visual-c++, mfc

我正在尝试构建一个简单的应用程序来显示我选择的目录的完整路径，但是到目前为止我唯一能得到的是目录的名称：

```
void CFolderBrowserDlg::OnTvnSelchangedMfcshelltree1(NMHDR *pNMHDR, LRESULT *pResult)
{
    LPNMTREEVIEW pNMTreeView = reinterpret_cast<LPNMTREEVIEW>(pNMHDR);
// TODO: Add your control notification handler code here
*pResult = 0;
TVITEMW hItem = pNMTreeView->itemNew;
TCHAR szText[256];
hItem.pszText= szText;
hItem.cchTextMax= 256*sizeof(TCHAR);
hItem.mask= TVIF_TEXT;
TreeView_GetItem(pNMTreeView->hdr.hwndFrom,&hItem);
m_Folder= szText;
UpdateData(FALSE);
} 
```

这是我的代码。你能告诉我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-14T04:48:03.513

你在编码它。这对我有用：

```
void CMFCdlg1Dlg::OnTvnSelchangedMfcshelltree1(NMHDR *pNMHDR, LRESULT *pResult)
{
    LPNMTREEVIEW pNMTreeView = reinterpret_cast<LPNMTREEVIEW>(pNMHDR);
    m_Tree.GetItemPath(m_EditString, pNMTreeView->itemNew.hItem);
    UpdateData(false);
} 
```

成员变量是：

```
m_Tree, type CMFCShelltreeCtrl attached to the ShellTree control
m_EditString, type CString attached to the Edit control 
```

如果你需要它，你甚至可以得到一个 C 风格的字符串：

```
LPTSTR path = m_EditString.GetBuffer(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:36:26.197

```
CString fullpath;
HTREEITEM current = hItem.hItem;
while (current != NULL) 
{
   CString thistext = GetTreeCtrl()->GetItemText(current);
   fullpath = thistext + _T("\\") + fullpath;
   current = GetTreeCtrl()->GetParentItem(current);
} 
```

这是一般的想法，虽然我没有实际测试过，但它应该让你朝着正确的方向前进。

# excel - 字典对象是否允许在运行时添加键为 null 或抛出异常或跳过它们？

> ID：14009755
> 
> 赞同：0
> 
> 时间：2012-12-23T08:55:19.537
> 
> 标签：excel, vbscript, wsh, vba

假设我确实有一个数组列表说：

```
 Dim Set myQueue= CreateObject("System.Collections.ArrayList")
 Dim Set Dic = CreateObject("Scripting.Dictionary") 
```

现在我执行以下操作：

```
 myQueue.Enqueue("jumped")
    myQueue.Enqueue("over")
    myQueue.Enqueue("the")
    myQueue.Enqueue("lazy")
    myQueue.Enqueue("dog")
    myQueue.Enqueue("Cat") 
```

然后执行删除操作：

```
 myQueue .RemoveRange(2,4) 
```

所以数组列表包含像 = (jumped,over,,,,Cat) 这样的值。

现在下面的操作会通过任何异常或在添加键期间，项目会`null`自动跳过值吗？

```
 For i=0 to myQueue.Capacity - 1

     Dic(i)=0

   next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:51:25.053

当您在 ArrayList 上调用 RemoveRange() 时，它不会留下 NULL 值，而是删除请求的元素并重新定位数组。因此，在您的示例中，您将留下`jumped,over,Cat`. 您还可以使用该`.Count`属性返回数组中的元素，这将与任何添加/删除一起保存在最新数据中。

# django - Heroku 主从“跟随者”postgresql

> ID：14009759
> 
> 赞同：0
> 
> 时间：2012-12-23T08:56:07.417
> 
> 标签：django, postgresql, heroku

我有一个关于 Postgresql Heroku “追随者”的小问题：它们似乎是经典的主从配置。

但我想知道我所要做的是否只是将一个新数据库配置为另一个数据库的追随者？读取流量会在主从之间自动分派吗？或者我应该在我的应用程序（它是一个 django 应用程序）中提供有关新的只读跟随服务器的信息吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:53:35.670

不，应用程序不会平衡流量。这将是负载平衡的应用程序逻辑/配置，heroku 追随者只是为了高可用性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T13:22:49.117

Django 执行“自动数据库路由”以使用多个数据库。默认路由方案确保对象对它们的原始数据库保持“粘性”（即，从 foo 数据库检索的对象将保存在同一数据库中）。默认路由方案确保如果未指定数据库，所有查询都回退到默认数据库。

请参阅此处的[文档](https://docs.djangoproject.com/en/1.9/topics/db/multi-db/#automatic-database-routing)。

# assembly - x86和x64中标签地址加载的区别

> ID：14009764
> 
> 赞同：0
> 
> 时间：2012-12-23T08:57:20.000
> 
> 标签：assembly, x86, 64-bit, nasm, masm

我使用 NASM [bits 64] 在 64 位 linux 中编写了代码

```
section .text
global main
main:                  ; ELF entry point

mov rax, 1
mov rdi, 1
mov rsi, message       ; buffer
mov rdx, [messageLen]  ; length of buffer
syscall

mov rax, 60            ; sys_exit
mov rdi, 0             ; 0
syscall

ret

section .data
data1:  db 35,36,37

messageLen: dq message.end-message
message: db 'Hello 999  World!!!', 10
.end: 
```

现在，在

```
mov rax, message 
```

rax 保存“消息”的地址（例如 0x402044），类似于说做这样的事情

```
lea rax, [message] 
```

我查看了反汇编，发现代码执行如下

```
movabs rax, 0x402044 
```

在 32 位 MASM 中执行 mov reg, label 命令只是从标签所指的数组中移动了第一个数据

```
mov ax, label ; same as mov ax, [label] 
```

所以最后！！，我的问题是**为什么 32 位加载数据值而 64 位加载地址？**如果说我想在 32 位系统中使用 64 位编写的代码，这不会产生向后兼容性问题吗？

如果问题非常基本和/或微不足道，我感到非常抱歉。几个小时以来，我一直在摸不着头脑，并不太了解加载标签的两种不同实现背后的逻辑。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:44:56.253

这不是 32 位和 64 位之间的区别。这是两个不同的汇编程序之间的区别。

在 NASM 中，`mov eax, var`将地址`var`放入`eax`. 在 MASM 中，相同的代码将 in 的内容`var`放入`eax`.

要获取`var`MASM 中的地址，您需要使用`offset`运算符：

```
mov eax, offset var 
```

另请参阅解释差异的 NASM 文档的[这一部分](http://www.nasm.us/doc/nasmdoc2.html#section-2.2.2)。

# c - 最快的位数计数方法

> ID：14009765
> 
> 赞同：9
> 
> 时间：2012-12-23T08:57:21.873
> 
> 标签：c, assembly

> **可能重复：**
> [如何计算 32 位整数中设置的位数？](https://stackoverflow.com/questions/109023/how-to-count-the-number-of-set-bits-in-a-32-bit-integer)

给出一个无符号字符类型的值，计算其中的总位数。最快的方法是什么？我写了三个函数如下，最好的方法是什么，有人能想出一个更快的吗？（我只想要极快的）

```
const int tbl[] =
{
#define B2(n)   n, n+1, n+1, n+2
#define B4(n) B2(n), B2(n+1), B2(n+1), B2(n+2)
#define B6(n) B4(n), B4(n+1), B4(n+1), B4(n+2)
    B6(0), B6(1), B6(1), B6(2)
};

char naivecount (unsigned char val)
{
    char cnt = 0;
    while (val)
    {
        cnt += (val & 1);
        val = val >> 1;
    }
    return cnt;
}

inline tableLookUp(int val)
{
    assert(val >= 0 && val <= 255);
    return tbl[val];
}

int asmCount(int val)
{
    int res = 0;
    asm volatile("xor %0, %0\n\t"
            "begin:\n\t"
            "cmp $0x0, %1\n\t"
            "jle end\n\t"
            "movl %1, %%ecx\n\t"
            "and $0x1, %%ecx\n\t"
            "addl %%ecx, %0\n\t"
            "shrl %1\n\t"
            "jmp begin\n\t"
            "end:"
            : "=r"(res)
            : "r" (val));
    return res;
} 
```

## 编辑：

我已经测试了所有方法，最快的一种是使用 `popcntl`指令。在没有指令的平台上，我将使用查表。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T10:35:58.393

如果你想手动编码，试试这个：

```
#include <stdint.h>

int popcnt8(uint8_t x) {

    x = (x & 0x55) + (x >> 1 & 0x55);
    x = (x & 0x33) + (x >> 2 & 0x33);
    x = (x & 0x0f) + (x >> 4 & 0x0f);

    return x;
} 
```

在 x86 上，这编译为（AT&T 语法）：

```
popcnt8:
    movl    %edi, %eax
    shrb    %dil
    andl    $85, %eax
    andl    $85, %edi
    addl    %eax, %edi
    movl    %edi, %eax
    shrb    $2, %dil
    andl    $51, %eax
    andl    $51, %edi
    addl    %eax, %edi
    movl    %edi, %eax
    shrb    $4, %dil
    andl    $15, %eax
    addl    %edi, %eax
    movzbl  %al, %eax
    ret 
```

将此与 gcc 使用内在函数生成的内容进行比较：

```
#include <stdint.h>

int popcnt8_intrin(uint8_t x) { return __builtin_popcount(x); } 
```

在带有 SSE 4.2 的 x86 上：

```
popcnt8_intrin:
movzbl  %dil, %eax
popcntl %eax, %eax
ret 
```

这不是最优的；铿锵生成：

```
popcnt8_intrin:
    popcntl %edi,%eax
    ret 
```

将计算减少到一个（！）指令。

在没有 SSE 4.2 的 x86 上：

```
popcnt8_intrin:
subq    $8, %rsp
movzbl  %dil, %edi
call    __popcountdi2
addq    $8, %rsp
ret 
```

gcc 基本上在这里调用它的库。不是很理想。clang 做得更好一点：

```
popcnt8_intrin:                         # @popcnt8_intrin
movl    %edi, %eax
shrl    %eax
andl    $85, %eax
subl    %eax, %edi
movl    %edi, %eax
andl    $858993459, %eax        # imm = 0x33333333
shrl    $2, %edi
andl    $858993459, %edi        # imm = 0x33333333
addl    %eax, %edi
movl    %edi, %eax
shrl    $4, %eax
addl    %edi, %eax
andl    $252645135, %eax        # imm = 0xF0F0F0F
imull   $16843009, %eax, %eax   # imm = 0x1010101
shrl    $24, %eax
ret 
```

clang 计算一个完整的 32 位数字的 popcnt。这不是最佳的恕我直言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T10:09:04.153

如果您没有进行太多的比较和分支，这些比较和分支会因采用和未采用而有所不同，那么您的汇编代码会更快。

但显然，最快的方法是进行字节查找，特别是当您只处理 256 个值时（您可以使用 naive 方法编写值列表，然后`static const table[256] = { ... }; return table[value];`在您的函数中添加一个。

对不同的解决方案进行基准测试。

如果您的汇编代码比编译器生成的代码慢，我不会感到惊讶！

编辑：通过执行以下操作，您的汇编代码会稍微快一点：

```
int asmCount(int val)
{
    int res = 0;
    asm volatile("begin:\n\t"
            "movl %1, %%ecx\n\t"
            "and $0x1, %%ecx\n\t"
            "addl %%ecx, %0\n\t"
            "shrl %1\n\t"
            "jnz begin\n\t"
            "end:"
            : "=r"(res)
            : "r" (val)
            : "ecx");      // Important: clobbers ecx!
    return res;
} 
```

我删除了 xor（res = 0 无论如何都应该这样做），并比较（当然，如果 val 为零，我们执行一些额外的指令，但是对于任何设置了高位的东西，情况要糟糕得多，因为它是两个额外的指令每次迭代，这意味着可能有 16 条额外的指令——其中一条是分支！），并在循环结束时将跳转更改为 jnz。这可能是编译器在您的第一种情况下生成的大致内容。试图在简单的代码上击败编译器并不是那么容易！

# ruby - rails install: xcrun: Error: failed to exec real xcrun

> ID：14009767
> 
> 赞同：0
> 
> 时间：2012-12-23T08:57:27.497
> 
> 标签：ruby

我正在尝试使用以下教程：[http ://ruby.railstutorial.org/ruby-on-rails-tutorial-book?version=3.2#sec-install_ruby](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book?version=3.2#sec-install_ruby)

当我这样做时，`sudo gem install rails -v 3.2.9`我收到此错误：

> ```
> Building native extensions.  This could take a while... ERROR:  Error installing rails:   ERROR: Failed to build gem native extension.
> 
>     /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
> extconf.rb creating Makefile
> 
> make xcrun cc -I.
> -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0
> -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin12.0
> -I. -DJSON_GENERATOR  -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -O3 -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common   -c generator.c xcrun: Error: failed to exec real xcrun. (No such file or directory) cc -arch i386 -arch
> x86_64 -pipe -bundle -undefined dynamic_lookup -o generator.bundle
> generator.o -L.
> -L/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib -L. -arch i386 -arch x86_64     -lruby  -lpthread -ldl -lobjc   clang: error: no such file or directory: 'generator.o' make: ***
> [generator.bundle] Error 1
> 
> Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/json-1.7.5 for inspection.
> Results logged to /Library/Ruby/Gems/1.8/gems/json-1.7.5/ext/json/ext/generator/gem_make.out 
> ```

我已经安装了命令行工具

我已经设置了 sudo xcode-select -switch /usr/bin

哪个 xcode-select /usr/bin/xcode-select

哪个抄送/usr/bin/cc

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T01:14:19.747

您需要安装完整的 XCode 应用程序才能使用系统 Ruby 为 gems 构建 C 扩展。

如果您不想安装 XCode，另一种选择是使用[rvm](http://rvm.io/)、[ruby-build](https://github.com/sstephenson/ruby-build)或[ruby](https://github.com/postmodern/ruby-install) ​​-install 编译您自己的 Ruby 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T19:52:39.843

如果有人使用 Xcode 5：

1.  从 Xcode 的设置菜单安装命令行
2.  使用“mac 端口”安装 ruby​​ 1.8.7
3.  重试“gem install cocopods”

这解决了我的相同问题。

# c++ - 如何在我的驱动程序中验证 PE 的签名？

> ID：14009769
> 
> 赞同：0
> 
> 时间：2012-12-23T08:57:48.463
> 
> 标签：c++, api, kernel, driver, signature

我正在编写一个驱动程序，我需要检查其中的 PE 文件的签名。我知道如何在用户模式下执行此操作，并且根据 http://forum.sysinternals.com/topic19247.html[^] 可以正常工作，但现在我需要在我的驱动程序中执行相同操作，我不能使用像“wintrust.h”在我的驱动程序中，所以我一无所知。有关如何在内核模式下验证 PE 签名的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:24:50.367

不幸的是，自我检查不会给你任何东西 - 篡改司机的人也会删除检查。然而，对于教育需求，这是一项有趣但具有挑战性的任务。

您需要自己实现 Authenticode 验证。Authenticode 基于 PKCS#7/CMS 和 X.509 证书。您需要在内核模式下重新实现所有这些东西。

虽然实现 RSA 很简单，但 ASN.1 解析器和 PKCS7 格式处理要复杂得多。您可能希望找到一些可适用于内核模式的现有 C 代码。例如，您可以检查[cryptlib](http://www.cs.auckland.ac.nz/~pgut001/cryptlib/)。Cryptlib 支持 CMS（这正是您所需要的）并且是高度跨平台的，因此您应该不会遇到将其调整为内核模式的问题。

# grails - GRAILS 检查是否设置了多个属性中的至少一个

> ID：14009771
> 
> 赞同：0
> 
> 时间：2012-12-23T08:58:15.330
> 
> 标签：grails, grails-orm, grails-2.0

假设我在 Grails 2.x 中有类似的域类

```
class CurrentReading {

    DateTime timestamp
    Sensor sensor
    Integer valueInt
    Boolean valueBool
    Float valueFloat

    static constraints = {
        timestamp blank: false 
        sensor blank: false
    }

} 
```

是否有一个开箱即用的 GORM / Validation 功能，可以让我确保恰好是其中一个属性`valueInt`，`valueFloat`或者`valueBool`已设置？

我已经做了一些实验`grails install-plugin constraints`，但未能将额外的域属性传递给自定义验证器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:20:35.147

你需要做这样的事情：

```
static constraints = {
    type inList:['Foo', 'Bar', 'FooBar']
    idStr blank: false, validator: { val, obj ->
        def result
        if(obj.type == "FooBar") {
            result = val =~ /[a-zA-Z]{2}[0-9]{8}/
        } else if(['Foo', 'Bar'].contains(obj.type)) {
            result = val =~ /\d+/
        }
        result.matches()
    }
} 
```

# string - MVC 4 中的 Db 连接字符串

> ID：14009777
> 
> 赞同：1
> 
> 时间：2012-12-23T08:59:10.807
> 
> 标签：string, asp.net-mvc-4, connection

我有以下问题：

当我运行我的代码时：

```
 public ActionResult Index()
    {
        return View(db.Movies.ToList());
    } 
```

我收到一条错误消息：无法完成操作。提供的 SqlConnection 未指定初始目录。

你能帮我修复连接字符串吗这是我的连接字符串：

```
 <connectionStrings>
      <add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-MvcMovie-20121214234752;Integrated Security=SSPI" providerName="System.Data.SqlClient" />
  <add name="MovieDBContext" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Movies.mdf;Integrated Security=SSPI" providerName="System.Data.SqlClient" /> 
```

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;

namespace MvcMovie.Models
{
    public class Movie
    {
        public int ID { get; set; }
        public string Title { get; set; }
        public DateTime ReleaseDate { get; set; }
        public string Genre { get; set; }
        public decimal Price { get; set; }
    }

    public class MovieDBContext : DbContext
    {
        public DbSet<Movie> Movies { get; set; }
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:59:06.627

您是否调试过它拾取的连接字符串？

下面是我的应用程序的连接字符串，它在开发和生产端都运行

```
 <add name="connectionString" connectionString="server=.\SqlExpress;database=ABC; Connect Timeout=180;Integrated Security=true;" providerName="System.Data.SqlClient" />
    <add name="ApplicationServices" connectionString="data source=.;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" /> 
```

# redis - HSET 如果键存在

> ID：14009778
> 
> 赞同：5
> 
> 时间：2012-12-23T09:00:05.737
> 
> 标签：redis

Redis 仅在 key 存在时才支持 HSET。 [http://redis.io/commands#hash](http://redis.io/commands#hash) 在客户端实现该功能的最佳方式是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T09:20:50.197

使用事务在客户端很容易实现它。

```
WATCH hkey
isKeyExists = EXISTS hkey
if isKeyExists
  MULTI
  HSET hkey field value
  EXEC
else
  UNWATCH 
```

当 WATCH 后移除 hkey 时，事务将失败。

您还可以使用 Redis 2.6 中引入的脚本。

# android - 使用 4.1 版与 2.3 版 Android SDK 编译的好处？

> ID：14009782
> 
> 赞同：1
> 
> 时间：2012-12-23T09:01:15.083
> 
> 标签：android

如果我不使用任何需要 4.1 的 android 的东西，我有什么好的理由应该用最新的 SDK 编译应用程序而不是用旧的 SDK 编译它？

如果我使用 4.1 SDK 而不是 2.3 SDK 编译我的应用程序，我的应用程序会运行得更快吗？还是会因为我没有使用 ICS 中引入的任何新功能而相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:21:58.050

您可能正在“幕后”使用新功能，例如性能改进。由于它们并不总是严格向后兼容，因此请确保在增加目标版本后测试您的应用程序。

如果您指定较低的目标版本，设备通常会回退到以前的实现，以免破坏现有的应用程序。

# gwt - GWT 单元格表从一行中取值

> ID：14009789
> 
> 赞同：0
> 
> 时间：2012-12-23T09:01:34.390
> 
> 标签：gwt

我有个问题

我有一个 GWT celltable，每一行都有很多信息，我需要为每一行提取一个信息；

可以解释一下我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:25:00.647

您必须在“CellTable”小部件中添加“SelectionModel”：

1.  选择一个标准的 SelectionModel 或编写自己的。
2.  使用 setSelectionModel(SelectionModel) 将此 SelectionModel 添加到单元格小部件。
3.  创建一个实现 onSelectionChange 的 SelectionChangeEvent.Handler。
4.  使用 addSelectionChangeHandler 将此处理程序添加到 SelectionModel。

有关详细信息，请参阅[此示例](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets#selection)。

# flash - Actionscript 2 对象外部的实例名称

> ID：14009798
> 
> 赞同：0
> 
> 时间：2012-12-23T09:02:55.837
> 
> 标签：flash, actionscript-2

**我如何在当前对象之外使用实例名称？我想在这个对象命中具有实例名称的对象时进行 - level1 以跟踪 Hit**

```
onClipEvent(load){
    var gravity = 9.8;
    var velocity = 0;
    var fps = 24;
}
onClipEvent(enterFrame){
    if (this.hitTest(level1)){
    trace("Hit");
    } else {

    }
    velocity = velocity+1/fps;
    this._y += velocity*5;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:23:43.290

您需要使用“_root”作为父级...就像您为输入框架函数声明的一样。

尝试将 hitTest 行更改为：

```
if (this.hitTest(_root.level1)){ 
```

# google-app-engine - GAE 上的 HTTP 请求状态使页面输出翻倍

> ID：14009800
> 
> 赞同：0
> 
> 时间：2012-12-23T09:03:59.310
> 
> 标签：google-app-engine

当新实例在 GAE 上启动时，我的页面呈现双倍状态字符串。

像这样 ![GAE 上的页面输出翻倍](../Images/94743c233df5a03c401e1e942e94bb47.png)

加载实例后，一切正常。

如何防止实例启动时输出加倍？

代码 id 尽可能简单

```
class IndexHandler(BaseHandler):
    def get(self):
        context = {'message': 'Wellcome to the NailedGames',
                   'page_description': 'Some blabla',
                   'ngames': NGame.all().order('-publish_date')}
        self.render_response('ngames/index.html', **context) 
```

以及 BaseHandler 的代码

```
import webapp2
from webapp2_extras import jinja2

class BaseHandler(webapp2.RequestHandler):
    @webapp2.cached_property
    def jinja2(self):
        # Returns a Jinja2 renderer cached in the app registry.
        return jinja2.get_jinja2(app=self.app)

    def render_response(self, _template, **context):
        # Renders a template and writes the result to the response.
        rv = self.jinja2.render_template(_template, **context)
        self.response.write(rv) 
```

# javascript - 如何修复javascript中未定义的属性？

> ID：14009808
> 
> 赞同：2
> 
> 时间：2012-12-23T09:06:52.707
> 
> 标签：javascript, jquery, methods, prototype, undefined

我有这个脚本：

```
var Tord = (function () {

    Tord.prototype.getHeader = function () {
        alert('test');
    };

    return Tord;
})();

$(document).ready(function() {

    var tod = new Tord();
    tod.getHeader();
}); 
```

我收到错误`Uncaught TypeError: Cannot read property 'prototype' of undefined`第 3 行

我不明白为什么？

这是我的js文件的加载方式：

```
 <link rel="stylesheet" href="public/jquery.mobile/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="public/style.css" />
    <script src="public/jquery-1.8.3.min.js"></script>
    <script src="public/jquery.mobile/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="public/cordova-2.2.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="public/script.js"></script> 
```

`script.js`有上面的脚本。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T09:10:00.763

因为正是您显示的代码。看，当这条线被调用时......

```
Tord.prototype.getHeader = function () { 
```

... Tord未定义*。*但是当你设置它时 Tord 应该是一个函数（因为它`prototype`应该是构造函数的一个属性以便有任何用途）——而且你根本没有努力让 Tord 成为一个函数。

我认为您想做的事情*可以*通过以下方式实现：

```
var Tord = (function () {
    var Tord = function() {}; // to properly name the constructor
    Tord.prototype.getHeader = function () {
        alert('test');
    };
    return Tord;
})(); 
```

有了这个，您可以根据一些外部逻辑定义不同的构造函数（但仍然定义一次）。但是在您的代码的当前状态下，没有必要让它变得那么复杂：这个......

```
var Tord = function() {};
Tord.prototype.getHeader = function() { ... }; 
```

......在我看来应该足够了。

# javascript - 在 jquery/js 中将元素从数组插入到表中

> ID：14009810
> 
> 赞同：9
> 
> 时间：2012-12-23T09:06:58.617
> 
> 标签：javascript, jquery, arrays

我有一个名为 reservations.js 的 js 文件，在这个文件中我有一个预订数组，例如：

```
var reservations = [
  { "HotelId": "01", "HotelName": "SPA", "ReservNum": "0166977", "Guest Name": "Jonny", "Room": null, "Type": "SUIT", "Rooms": "1", "Board": "BB", "Status": "IH", "Pax": "2,0,0,0", "Arrival": "07/08/12", "Departure": "09/08/12", "AgentDesc": "FIT", "AgentCode": "FIT", "Group": null, "Balance": "0", "Requests": "", "Remarks": null, "Fit/Group": "FIT", "ReturnGuestName": "", "StatusColor": "LightCoral" },
  { "HotelId": "01", "HotelName": "SPA", "ReservNum": "H000192", "Guest Name": null, "Room": null, "Type": "Folio", "Rooms": "0", "Board": "", "Status": "IH", "Pax": "0,0,0,0", "Arrival": "07/08/12", "Departure": "10/09/12", "AgentDesc": "movies", "AgentCode": "001", "Group": null, "Balance": "0", "Requests": "", "Remarks": "", "Fit/Group": "FIT", "ReturnGuestName": "", "StatusColor": "LightCoral" }
]; 
```

我需要做的是创建一个包含 6 个列的表（在 html 中）：Res。号码、客人姓名、状态、到达日期、离开日期、房间类型。并将数组中的元素插入到表中匹配的 col 中。

> 示例：ReservNum": "0166977"，因此数字 0166977 将在第一列 Res. Number 中。

我的桌子是这样的：

```
<table id="reservations">
        <thead>
            <tr>
                <th>Res. Number</th><th>Guest Name</th><th>Status</th><th>Arrival Date</th><th>Departure Date</th><th>Room Type</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>resnum</td><td>guestname</td><td>status</td><td>arrivaldate</td><td>departuredate</td><td>roomtype</td>
            </tr>
        </tbody>
    </table> 
```

我不知道该怎么做。我试图在 js 文件中做这样的事情：

```
$('#reservations tr').each(function (i) {
    $(this).find('td').html(reservations[i]);
}); 
```

但它不起作用。（也许我的 html 表是错误的或者是 js，甚至两者都有）。

我是 js/jquery 的新手，所以我有点不确定自己在做什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-23T09:18:46.430

如下所示（***[检查工作演示](http://jsfiddle.net/FunvZ/1/)***）：

```
var tbody = $('#reservations tbody'),
    props = ["ReservNum", "Guest Name", "Status", "Arrival", "Departure", "Type"];
$.each(reservations, function(i, reservation) {
  var tr = $('<tr>');
  $.each(props, function(i, prop) {
    $('<td>').html(reservation[prop]).appendTo(tr);  
  });
  tbody.append(tr);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T09:17:12.160

我不确定这是否是您想要的，但有[jqGrid](http://www.trirand.com/blog/)。它可以接收 JSON 并制作网格。

或者你也可以在 Github 上使用这个简单的项目：[Json-To-HTML-Table](http://www.trirand.com/blog/)

或者您也可以使用 jQuery 自己制作，这会更简单。

以下将采用数组数组并将它们存储转换为行和单元格。

```
$.getJSON(url , function(data) {
    var tbl_body = "";
    $.each(data, function() {
        var tbl_row = "";
        $.each(this, function(k , v) {
            tbl_row += "<td>"+v+"</td>";
        })
        tbl_body += "<tr>"+tbl_row+"</tr>";                 
    })
    $("#target_table_id tbody").html(tbl_body);
}); 
```

您可以通过添加类似的内容来检查要排除的键

```
var expected_keys = { key_1 : true, key_2 : true, key_3 : false, key_4 : true }; 
```

在 getJSON cbf 的开头并添加

```
if ( ( k in expected_keys ) && expected_keys[k] ) {
...
} 
```

在 tbl_row += 线周围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T09:25:19.273

像这样：

```
$('#reservations tr').each(function (i) {
   var td = $(this).find('td');
   td.html(reservations[i]['ReservNum']);
   td = td.next();
   td.html(reservations[i]['Guest Name']);
   td = td.next();
   td.html(reservations[i]['Status']);
   td = td.next();
   td.html(reservations[i]['Arrival']);
   td = td.next();
   td.html(reservations[i]['Departure']);
   td = td.next();
   td.html(reservations[i]['Type']);
   td = td.next();
   td.html(reservations[i]['Rooms']);
   td = td.next();
   td.html(reservations[i]['Board']);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-23T09:23:47.120

我建议使用[jquery.tmpl](http://api.jquery.com/jquery.tmpl/)方法。

在 HTML 中

```
<script id="template-table" type="text/x-jquery-tmpl">
        <tr>
            <th>Res. Number</th><th>Guest Name</th><th>Status</th><th>${Arrival}</th><th>${Departure}</th><th>Room Type</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>${ReservNum}</td><td>${Guest_Name}</td><td>${Status}</td><td>arrivaldate</td><td>departuredate</td><td>${Type}</td>
        </tr>
    </tbody> 
</script> 
```

在 JS 中：

```
var reservations = [...];
$("#template-table").tmpl(reservations); 
```

# c# - 选择复选框列表选中的项目

> ID：14009814
> 
> 赞同：0
> 
> 时间：2012-12-23T09:08:53.197
> 
> 标签：c#, checkboxlist

我试图四处寻找解决我的问题的方法，但没有找到一个，因为似乎每个人都比我的问题提前一两步。

我正在尝试从复选框列表中选择一个项目，而不是从中选择一个项目。

我打算这样做是为了使结果事件在单击按钮并选中选中的选项后触发，以在选中项目的标签中显示文本。

该程序基于装饰器模式，将允许用户从一组 3/4 可检查选项中进行选择，当按下按钮时，这些选项将在基本文本末尾的标签中显示与这些项目相关的文本。目前，我所做的只是让它在选定的项目上一次执行一个，仅类似于第一个示例。

例如，当一个名为 Monitor 的选项被选中时，它会显示在标签中：

你得到一台电脑和一台显示器。

如果有多个检查项目，例如监视器和键盘，那么它会说：

你得到一台电脑、一台显示器和一个键盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:44:58.540

您可以在触发事件时根据新的选中项值更改`Label.Text`目标的属性。`Label``ItemCheck``CheckedListBox`

**例子**

假设您有 a `Label`of name `label1`、 a `CheckedListBox`of name`checkedListBox1`和 a `Form`of name `Form1`，以下可能适用

```
public class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        label1.Text = "You are getting "; //Change the Text property of label1 to "You are getting "
        checkedListBox1.ItemCheck += new ItemCheckEventHandler(checkedListBox1_ItemCheck); //Link the ItemCheck event of checkedListBox1 to checkedListBox1_ItemCheck; not required as long as you link the event through the designer
    }
    private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
    {
        if (e.NewValue == CheckState.Checked && e.CurrentValue == CheckState.Unchecked) //Continue if the new CheckState value of the item is changing to Checked
        {
            label1.Text += "a " + checkedListBox1.Items[e.Index].ToString() + ", "; //Append ("a " + the item's value + ", ") to the label1 Text property
        }
        else if (e.NewValue == CheckState.Unchecked && e.CurrentValue == CheckState.Checked) //Continue if the new CheckState value of the item is changing to Unchecked
        {
            label1.Text = label1.Text.Replace("a " + checkedListBox1.Items[e.Index].ToString() + ", ", ""); //Replace ("a " + the item's value + ", ") with an empty string and assign this value to the label1 Text property
        }
    }
} 
```

^(**样本输入**)

```
[x] Monitor
[x] Keyboard
[ ] Mouse
[x] Computer 
```

^(**样本输出**)

```
You are getting a Monitor, a Keyboard, a Computer, 
```

谢谢，
我希望你觉得这有帮助:)

# shell - 根据广播监听器计数运行命令

> ID：14009815
> 
> 赞同：1
> 
> 时间：2012-12-23T09:08:54.827
> 
> 标签：shell, command, shoutcast, listeners

我遇到了少量损坏的 MP3 在 Shoutcast 流上使 Ices 崩溃的问题。我正在寻找一种方法来检查连接到流的侦听器的数量，如果它低于可能表明它（Ices）可能已经崩溃的值，则在 shell 上执行命令。

# c - 如果短类型溢出，如何将浮点类型转换为短类型并截断浮点类型？

> ID：14009819
> 
> 赞同：0
> 
> 时间：2012-12-23T09:09:11.647
> 
> 标签：c, types, casting

我有一个代码：

```
 if (Ly0 > 32767) {
        buffer[index] = 32767;
    } else if (Ly0 < -32768) {
        buffer[index] = -32768;
    } else {
        buffer[index] = (short) Ly0;
   } 
```

*   `buffer`是短类型。
*   `Ly0`是浮点型。

我需要将浮点数转换为短，如果浮点数的整数部分大于短最大值短应该等于短最大值，并且如果浮点数的整数部分小于短最小值短应该等于短最小值，在其他情况下我需要将 float 转换为 short 并仅获取 float 的整数值。

换句话说，我需要从浮点数转换为短浮点数，如果浮点数超出短值范围，则截断浮点数。

问题是这种方法不够快速和持久。

将浮动转换为短的任何更快和最干净的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:48:00.800

使用 sse 内在函数，您可以首先转换为整数，然后执行 long int 到 short int 饱和转换（使用[PACKSSDW](http://www.jaist.ac.jp/iscenter-new/mpc/altix/altixdata/opt/intel/vtune/doc/users_guide/mergedProjects/analyzer_ec/mergedProjects/reference_olh/mergedProjects/instructions/instruct32_hh/vc221.htm)）。

一种“可移植”的方式是使用例如[ORC](http://code.entropywave.com/orc/)，这是一个用于运行时编译的库，用于优化使用 mmx、sse、neon 和 avs 的内循环；以及提供兼容的串行实现。

甚至在此之前，可能需要检查编译器输出。例如。with `gcc -ffast-math -O3` etc. 编译器通常可以生成已经 xmm 指令并并行化大型循环，其迭代次数在编译时是已知的。使用“luck == brute force”，可以将 c 代码调整为编译器可以识别饱和包模式的形式。通常它只取决于对中间计算类型的微观管理。（比较是有符号还是无符号，是 int 还是 short 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:03:27.193

如果您有一个相当聪明的编译器，并且您实际上是在循环中执行此操作 - 并且假设您给编译器“优化它”的良好提示，那么它应该能够弄清楚您在做什么并使用“聪明”指令，例如 SSE/SSE2 - 当然，假设您正在编译的处理器支持它。

否则，使用编译器特定的扩展或内联汇编器将是您的选择——gcc 和 MS 编译器都具有执行此类操作的内在函数——或者，如建议的那样，可能有外部库可以很好地执行此操作。同样，假设处理器支持这种操作。

最后的建议，可能是这样做更快（在某些处理器上）：

```
int x = Ly0;
if (x > 32767) x = 32767;
else if (x < -32768) x = -32768;
buffer[index] = (short)x; 
```

原因是浮点比较有时比整数比较昂贵 - 编译器可能会更好地优化此代码。但这并不能保证 - 一如既往地进行基准测试和比较。查看编译器输出并看看您是否认为它也有意义！

编辑：上面的代码假设这些值离您的预期范围不是很远。对于 40 亿以外的价值，它会出错。如果发生这种情况，那么无论如何您都需要使用浮点比较。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-23T09:45:30.407

可能没有办法优化这种代码的和平。我猜这个代码在某个周期内执行了很多次，因为你有性能问题。您需要考虑优化周期。例如，如果 Ly0 值在随机访问容器中，则优化后可能会产生良好的结果。

```
for (int index = 0; index < (Ly0s.size() - 4); idx += 4) {
    do_conversion_for(index);
    do_conversion_for(index + 1);
    do_conversion_for(index + 2);
    do_conversion_for(index + 3);
}
switch (Ly0s.size() % 4){
    case 3:
        do_conversion_for(index + 3);
    case 2:
        do_conversion_for(index + 2);
    case 1:
        do_conversion_for(index + 1);
} 
```

代替

```
for (int index = 0; index < Ly0s.size(); ++idx) {
    do_conversion_for(index);
} 
```

# java - 是否可以取消装饰网络浏览器？

> ID：14009821
> 
> 赞同：0
> 
> 时间：2012-12-23T09:09:38.237
> 
> 标签：java, swing, browser, webpage

我正在尝试用 Java 播放 YouTube 视频，我希望浏览器的 Frame 不装饰，就像我们可以选择`UI`使用`setUndecorated(true)`. 我在用：

```
Process p=Runtime.getRuntime().exec("cmd /c start http://www.youtube/foo vide/..."); 
```

打开网页。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:37:19.490

您可以使用 JBrowser 等库，而不是尝试启动外部浏览器。它提供了一个基于 Mozilla Embedded API 的 Java Swing 组件。

我过去使用它，效果很好。您可以在[http://code.google.com/p/jbrowser/找到它](http://code.google.com/p/jbrowser/)

# javascript - javascript中的警报未按预期工作

> ID：14009825
> 
> 赞同：-2
> 
> 时间：2012-12-23T09:10:15.847
> 
> 标签：javascript, alert

我不知道为什么 javascript 不起作用。不显示警报消息。这是一个简单的 html 文件，用于验证用于将书籍添加到数据库的表单。在点击提交按钮时，页面将自己定向到以下链接，而不显示警报窗口。请帮帮我。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Add Book</title>
   <link rel="stylesheet" type="text/css" media="screen" href="css/default.css" />
</head>
<body id="index_page">
 <div id="wrapper">
    <div id="header">
        <h1 align="left">Library</h1>
    </div> 
    <ul id="navigation">
        <li id="index"><a href="http://localhost/UID/FAQ.php">FAQ</a></li>
    </ul>
    <div id="content">
    <div id="main_content">
    <h2>Add book</h2>
  <h4>Enter details of the book</h4>
  <FORM action="add_book_action.php" method="post" >
   <TABLE WIDTH="50%" >

    <TR>
      <TH width="50%">Book ID:</TH>
      <TD width="50%"><INPUT TYPE="text" name="id" id="book_id"></TD>
  </tr>
  <TR>
      <TH width="50%">Book Name:</TH>
      <TD width="50%"><INPUT TYPE="text" name="name" id="book_name"></TD>
  </tr>
  <TR>
      <TH width="50%">Book Author:</TH>
      <TD width="50%"><INPUT TYPE="text" NAME="author" id="book_author"></TD>
  </tr>  
  <TR>
      <TH width="50%">Year of Publication:</TH>
      <TD width="50%"><INPUT TYPE="text" NAME="pub" id="book_year"></TD>
  </tr>
  <TR>
      <TH></TH>
      <TD width="50%"><INPUT TYPE="submit" Value="Submit" onclick="return   validate_fun()"></TD>
  </tr>
  </TABLE>
  </FORM>

  </div>
     <p id="footer"><a href="http://localhost/UID/UID.php">@AntonyAjay,2012</a></p>
    </div>

 <script language="javascript">
 function validate_fun()
 {
  var x=document.getElementById("book_id").value;
   if(x==""||isNaN(x))
{
alert("Book Id should be numeric");
return false;   
}
  var x=document.getElementById("book_name").value;
 var regex = /^[a-zA-Z ]*$/;
 if(!(regex.test(x)))
{
alert("Book Name should be only characters and spaces");
return false;   
}
  var x=document.getElementById("book_author").value;
  var regex = /^[a-zA-Z ]*$/;
  if(!(regex.test(x)))
{
alert("Author Name should be only characters and spaces");
return false;   
}
  }

  var x = document.getElementById("book_year").value;

  var regExp = /^([1][6-9][0-9][0-9]|[2][0][01][0-9]\/|-([1-9]|[1][0-9]|[2][0-9]|[3][01])\/|-([1-9]|[1][012])$/;

   if(!(regExp.test(x)))
   {
alert("Enter date in yyyy-mm-dd format");
return false;
   }
  }
 </script>
  </body> 
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T09:44:43.163

除了额外的`}`，你的代码缺少`<div #wrapper>`close ，这个 RegExp 也有一个不成对的括号：

```
var regExp = /^([1][6-9][0-9][0-9]|[2][0][01][0-9]\/|-([1-9]|[1][0-9]|[2][0-9]|[3][01])\/|-([1-9]|[1][012])$/; 
```

使用浏览器的开发工具，两秒就能找到所有这些...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:25:26.897

正如每个人已经建议的那样，请使用任何现代浏览器的开发人员工具，它将能够告诉您更多信息。如果您仍在苦苦挣扎，请修改下面的代码，但这些都是愚蠢的错误，因此请确保您有一个 IDE 可以进行缩进并检查是否缺少或多余的大括号。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Add Book</title>
   <link rel="stylesheet" type="text/css" media="screen" href="css/default.css" />
</head>
<body id="index_page">
 <div id="wrapper">
    <div id="header">
        <h1 align="left">Library</h1>
    </div> 
    <ul id="navigation">
        <li id="index"><a href="http://localhost/UID/FAQ.php">FAQ</a></li>
    </ul>
    <div id="content">
    <div id="main_content">
    <h2>Add book</h2>
  <h4>Enter details of the book</h4>
  <FORM action="add_book_action.php" method="post" >
   <TABLE WIDTH="50%" >

    <TR>
      <TH width="50%">Book ID:</TH>
      <TD width="50%"><INPUT TYPE="text" name="id" id="book_id"></TD>
  </tr>
  <TR>
      <TH width="50%">Book Name:</TH>
      <TD width="50%"><INPUT TYPE="text" name="name" id="book_name"></TD>
  </tr>
  <TR>
      <TH width="50%">Book Author:</TH>
      <TD width="50%"><INPUT TYPE="text" NAME="author" id="book_author"></TD>
  </tr>  
  <TR>
      <TH width="50%">Year of Publication:</TH>
      <TD width="50%"><INPUT TYPE="text" NAME="pub" id="book_year"></TD>
  </tr>
  <TR>
      <TH></TH>
      <TD width="50%"><INPUT TYPE="submit" Value="Submit" onclick="return   validate_fun()"></TD>
  </tr>
  </TABLE>
  </FORM>

  </div>
     <p id="footer"><a href="http://localhost/UID/UID.php">@AntonyAjay,2012</a></p>
    </div>

 <script language="javascript">
 function validate_fun()
 {
    var x=document.getElementById("book_id").value;
    if(x==""||isNaN(x))
    {
        alert("Book Id should be numeric");
        return false;   
    }
    var x=document.getElementById("book_name").value;
    var regex = /^[a-zA-Z ]*$/;
    if(!(regex.test(x)))
    {
        alert("Book Name should be only characters and spaces");
        return false;   
    }
    var x=document.getElementById("book_author").value;
    var regex = /^[a-zA-Z ]*$/;
    if(!(regex.test(x)))
    {
        alert("Author Name should be only characters and spaces");
        return false;   
    }
    var x = document.getElementById("book_year").value;
    var regExp = /^([1][6-9][0-9][0-9]|[2][0][01][0-9]\/|-([1-9]|[1][0-9]|[2][0-9]|[3][01])\/|-([1-9]|[1][012])$/;

    if(!(regExp.test(x)))
    {
        alert("Enter date in yyyy-mm-dd format");
        return false;
    }
  }
 </script>
  </body> 
 </html> 
```

# c++ - C++ 对非 ASCII 数据文件的支持

> ID：14009829
> 
> 赞同：1
> 
> 时间：2012-12-23T09:11:56.000
> 
> 标签：c++, c, file-io, format

我找不到任何关于如何在 C++ 中编写和读取非 ASCII 文件的参考。

我想创建我的文件格式，同时表达文件内信息的精确模式和标记，但基本上`fstream`我只能创建文本文件。文本模式或二进制模式对于这个目的并不重要，结果总是一个 ASCII 文件。

如何逐字节编写文件，就像您不能简单地用文本编辑器解析并且它们有自己的定义的文件一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T09:44:49.577

您想要的是将文件视为字节流，这可以通过使用 read() 和 write() 来实现。`<< >>`当文件不是文本时，直接处理文件时不能使用普通流运算符。

通常你会在 read()/write() 之上创建你自己的读/写函数来重载流操作符

另一种方法是使用 fread() fwrite() 在其中创建具有记录布局的结构，然后在 fread()/fwrite() 中使用它

```
typedef struct
{
   short id;
   char name[64];
} rec;

rec A;

fread( &A, sizeof(A), 1, fp ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T09:49:30.057

如果您有一个无法“使用编辑器读取”的文件，则仅表示数据未以文本形式存储。正如其他人所说，C 和 C++ 在文本和二进制形式的文件之间没有太大区别——它只是一些关于转换（例如行尾）和约定（例如文件结尾可以用字符标记）的简单规则，因为文件长度以块为单位，但我们不希望文本文件中有 512 字节块的精确倍数，因此使用 CTRL-D 或 CTRL-Z 来标记文件的结尾）。在二进制模式下，“任何事情都会发生”。

在许多方面，二进制文件在编译器不知道您的数据代表什么方面非常类似于文本文件。如果文本文件包含：

```
12345 Glurg 12.88
1Ab9Z Flarf 6.89 
```

将由您的程序决定第一列是产品 ID（读取第一行，您会认为它是一个整数，但由于第二个不能表示为整数，它必须存储为字符串)，第二个是产品名称，第三个是价格，也许吧？还是重量？（以公斤、克、磅、吨为单位？）

因此，同样对于二进制文件，您的程序需要知道每个字节或字节集合的含义。

如果它是一种众所周知的格式（PDF、Excel 电子表格或类似的格式），则可能有可以免费或购买的库来处理该格式。如果没有，您需要对文件本身的格式进行很好的描述，并使用上面描述的读/写或 streambuf 功能。

如果格式是您自己做的，或者至少不是超级可移植的，您可以形成具有正确格式的结构，并将这些结构作为一个读取操作读取，并将这些结构作为一个写入操作写入。如果该格式旨在是可移植的，那可能不起作用 - 并且要注意读取和写入结构的方法不是那么可移植，因为编译器可能会在结构中放置间隙，这取决于机器的体系结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T09:35:57.943

C++ 不直接支持任何二进制格式。主要原因是没有普遍使用的二进制格式，但有许多不同的格式。流缓冲区（即派生自 的类`std::streambuf`）可用于从外部目的地读取字节或将字节写入外部目的地，但您需要创建一组合适的二进制格式输入和输出函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T13:46:54.727

对此没有本机支持，如果您想实现类似的功能，请使用序列化。

# machine-learning - 如何确定具有非线性训练集的 NN 的假设函数？

> ID：14009834
> 
> 赞同：1
> 
> 时间：2012-12-23T09:12:31.820
> 
> 标签：machine-learning, artificial-intelligence, neural-network, scientific-computing

我们有 4 个彼此非线性相关的数字输入。我们的目标是通过使用反向传播模型来预测输出。我们正在成像的场景如下， ![在此处输入图像描述](../Images/fd5585ca0f3e1abb5dd9bc7738bf8f44.png)

据我们所知（我们没有透彻的理解），我们正在考虑计算任何神经元的输出（Y）的方程是，

```
 Y  =  w1 * X1  + w2 * X2 + w3 * X3 + w4  * X4 ? 
```

其中，
Y 是输出 X 是输入 ( X1,X2,X3,X4) w 是权重

因此，在输出层，如果输出（Y）与预期不同，我们将使用纠错来修改权重。

非线性数据集是否需要特定的输出函数（假设函数）？或者上面的功能可以用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:27:51.657

这是用数学思考的好方法，但我不同意你上面列出的等式。

对于隐藏神经元 1 (HN1)，其输入 (inputHN1) 为 `w11*X1 + w21*X2 + w31*X3 + w41*X4`; 输出是 `f(inputHN1)`。请注意，它`f()`可能是非线性函数（也可以是线性函数）。

对于 HN2，我们有`f(inputHN2)`

`Y = beta1*f(inputHN1) + beta2*f(inputHN2)`

MLP 的权重（w 和 beta）将通过反向传播进行训练。

您会看到，如果`f()`它是非线性的，那么对非线性函数进行建模是完美的。

当然如果`f()`是线性的，它只能对线性函数给出很好的近似。

好吧，如果您对要建模的内容有先验知识，那么该假设总是有帮助的。例如，除了一阶，您可以使用二阶，例如 X1X2、X1^2 等。

# ruby-on-rails - 查询返回 ActiveRecord::Relation，而不是实际数据

> ID：14009839
> 
> 赞同：0
> 
> 时间：2012-12-23T09:14:26.297
> 
> 标签：ruby-on-rails, activerecord

所以，我对编程很陌生，但是我爱上了 Rails 而不是其他应用程序，但是我尝试过 Railscasts、rubyonrails.org 和其他几个地方，但我真的迷路了。

在控制器“weekly_review_controller.rb”中，我有：

```
def show
  @weeklyReviewData = []
  currentBusinessEmployees = current_user.thisUsersBusiness.employees.uniq
  @weekStart = "Sun, 2 Dec 2012 00:00 -0500".to_datetime
  @weekEnd = @weekStart+7.days-1.second
  currentBusinessEmployees.each do |t|
    # Vars
    @employeeWeeklyData = []
    # Names
    @employeeWeeklyData << t.firstName + " " + t.lastName
    # DailyData
    dStop = t.dailyData.select("deliveryStop").where( "startTime > ? AND endTime < ?", @weekStart, @weekEnd )
    dPkg = t.dailyData.select("deliveryPackage").where( "startTime > ? AND endTime < ?", @weekStart, @weekEnd )
    pStop = t.dailyData.select("pickupStop").where( "startTime > ? AND endTime < ?", @weekStart, @weekEnd )
    pPkg = t.dailyData.select("pickupPackage").where( "startTime > ? AND endTime < ?", @weekStart, @weekEnd )
    iLS = t.dailyData.select("inboundLocalService").where( "startTime > ? AND endTime < ?", @weekStart, @weekEnd )
    @employeeWeeklyData << dStop << dPkg << pStop << pPkg << iLS
    @weeklyReviewData << @employeeWeeklyData
  end

  respond_to do |format|
    format.html # index.html.haml
    format.json { render json: @weeklyReviewData }
  end
end 
```

所以我还没有想出传递 url `param`（因此开始和结束日期的静态定义，即使我确实有传递 UTC 时间码“ `/weekly_review/2012-12-02%2013:00:00%20UTC`”的 URL），但是当我多学一点。我关注的是，因为我有一个非常漂亮的视图，（问我会发布），我想用我收集的数据填充我在视图中制作的表格。问题是传递给视图的变量很好地`@weeklyReviewData`填充了员工姓名（`t.firstName + " " + t.lastName`），但其余数据都是`Active:Relation:`混乱的。我已经看过/读过，并且很确定这样做的目的是在缓存中存储一​​些来自数据库的数据`lazy lookups`（或者人们似乎将其称为），但这也是另一天。我只想要数据库中的数据就像名称一样。

那么我的以下查询有什么问题？：

```
 dStop = t.dailyData.select("deliveryStop").where( "startTime > ? AND endTime < ?", @weekStart, @weekEnd )
  dPkg = t.dailyData.select("deliveryPackage").where( "startTime > ? AND endTime < ?", @weekStart, @weekEnd )
  pStop = t.dailyData.select("pickupStop").where( "startTime > ? AND endTime < ?", @weekStart, @weekEnd )
  pPkg = t.dailyData.select("pickupPackage").where( "startTime > ? AND endTime < ?", @weekStart, @weekEnd )
  iLS = t.dailyData.select("inboundLocalService").where( "startTime > ? AND endTime < ?", @weekStart, @weekEnd ) 
```

试验/笔记：

我什至使用了 rails 控制台中的查询并完成了`puts t.dailyData.select("deliveryStop").where( "startTime > ? AND endTime < ?", "Sun, 2 Dec 2012 00:00 -0500".to_datetime, "Sat, 9 Dec 2012 11:59 -0500".to_datetime ).to_sql`，SQL 查询似乎很合法，但显然我遗漏了一些东西。

SQL put 是：`SELECT deliveryStop FROM "daily_data" INNER JOIN "daily_data_employees" ON "daily_data"."id" = "daily_data_employees"."dailyDatum_id" WHERE "daily_data_employees"."employee_id" = 2 AND (startTime > '2012-12-02 05:00:00' AND endTime < '2012-12-09 16:59:00')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:23:11.630

尝试通过明确告诉`ActiveRecord`获取一条记录：

```
dStop = t.dailyData.select("deliveryStop").where( "startTime > ? AND endTime < ?", @weekStart, @weekEnd ).first 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T09:29:40.177

很可能，您想要/需要的所有数据都存在于`ActiveRecord::Relation`. An`ActiveRecord::Relation`可以（大部分）被视为一个数组，因此您可以对其进行迭代以获取数据。`to_a`如果您愿意，可以使用该方法将其显式转换为数组。如果您只期望一场比赛，Tudo Constantin 的回答很有用。

# java - 如何读取网页的某些部分并将其文本存储在 Excel 文件中

> ID：14009841
> 
> 赞同：-1
> 
> 时间：2012-12-23T09:14:40.353
> 
> 标签：java, html, webpage, html-content-extraction

我通过网站复印机软件下载了一些网站。我想从所有页面中提取一些信息。

假设有很多产品页面，我只想从所有页面收集产品信息并将其存储在 excel 文件中。

我想知道有什么可能的方法来做到这一点。我的朋友告诉我，他可以编写一些脚本并实现它，但我不明白任何脚本如何解决这整个目的。

是否有任何免费软件或任何代码可以完成这项工作。我对java非常了解，如果我可以通过编写代码通过java实现它，那么请提供一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:22:05.613

您可能不想使用 Java，而是使用 JavaScript，因为产品页面是网页，因此您可能更喜欢浏览器原生语言。如果是我，我会这样处理：

1 - 编写一个加载所有页面的主 JS 脚本，一次一个。

2 - 在每一页中，选择该产品信息（可能带有 $('#productID') 等）

3 - 将它们转换为 JSON 格式并使用一些第三方库导出为 CSV（或者自己编写一些代码）。一个此类库的示例：[http ://www.zachhunter.com/2011/06/json-to-csv/](http://www.zachhunter.com/2011/06/json-to-csv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:37:43.063

看看[JSoup](http://jsoup.org)，一个用于 HTML 文档的 Java 库。

您会在他们的网站上找到大量文档。

您将需要了解 CSS 选择器以从文档中选择特定元素，示例参见[http://jsoup.org/cookbook/extracting-data/selector-syntax](http://jsoup.org/cookbook/extracting-data/selector-syntax)

然后将收集到的数据以逗号分隔值的形式写入可以加载到 Excel 中的文本文件中。

# brunch - 将文件分开以进行开发

> ID：14009844
> 
> 赞同：1
> 
> 时间：2012-12-23T09:15:54.173
> 
> 标签：brunch

brunch.io 的早午餐是否可以不将所有文件合并到一个 app.js 中？

如果发生错误，我发现查看脚本的名称非常有帮助，但我无法像那样配置它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T17:00:20.637

不，您不能强制 brunch 逐个编译文件。

不过，您可以连接到一些确切数量的文件。请参阅[文档](http://brunch.readthedocs.org/en/latest/config.html#files)。

# java - Java中的指针逻辑

> ID：14009850
> 
> 赞同：0
> 
> 时间：2012-12-23T09:17:21.720
> 
> 标签：java, pointers

我需要找到一种通过getter函数直接修改Java中类的私有成员的方法。我知道我可以使用这样的指针在 C++ 中做到这一点；

```
class FooBar
{
    private:
        Foo foo;

    public:
        Foo* getFoo()
        {
            return &foo;
        }
} 
```

`foo`然后我可以通过公共函数直接操作私有变量，`getFoo()`因为 getFoo() 返回一个指针（例如。`getFoo()->callFunction();`）

所以我想知道的是，有没有办法在Java中复制这种完全相同的效果？？....有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T09:23:19.587

```
class FooBar {
    private Foo foo;

    public Foo getFoo() {
        return foo;
    }
} 
```

Java 中的所有对象变量都是对对象的引用，因此您可以将它们视为“锁定”指针。“锁定”的意思是你不能用它做任何指针算术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T09:19:16.327

因为，Java 没有`Pointer`. 但是，你可以这样做，使用**getter**和**setter**，它会帮助你喜欢这样

```
class myclass{
private myclass val;  // private field

//get the private field
public myclass getVal(){
return val;
}

//set/change the member field value
public void setVal(myclass val){
this.val=val;
}

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T09:20:05.657

在 java 中，您的 getter 返回对对象的引用，因此您可以依靠返回对象的公共方法来修改它。如果您详细说明您想要做什么，我可以进一步详细说明。举个例子，

如果 getter 返回一个列表，则调用者可以使用 add 或 remove 方法修改列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-23T09:32:09.683

您必须提供一个 getter 和一个 setter

```
class FooBar {

    private Foo foo;

    public Foo getFoo() {
        return foo;
    }

    public void setFoo(Foo foo) {
        this.foo = foo;
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-23T10:44:14.077

您需要什么可以通过简单的 getter 访问，如已经显示的那样。一些重要的细节：

如果你想像

```
getFoo()->callFunction(); 
```

确保：

*   *Foo*类是可见的（如果您在同一个包中，则*默认*修饰符，如果调用者是子类或*public则**受保护*）
**   callFunction() 是可见的（相同的规则）*

 *如果你想像

```
getFoo().value = newValue; 
```

确保 value 是可修改的，这意味着 Foo 类没有将 value 定义为 final：

```
class Foo {
    // in this case value is immutable
    final Bar value;
} 
```

在最后一种情况下，编译器会告诉您“无法分配最终字段 Foo.value”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-23T09:48:26.270

Java 是*按值传递*，或者更具体地说，*按值传递引用*。这意味着所有引用类型都被传递，这样：

```
List<String> a = myObj.getList();
a.add("My String"); // this modifies the source list

List<String> b = new ArrayList<String>();
a = b; // this doesn't change the source list's reference 
```

在使用 Java 编程时，大多数人尝试尽可能实现最高级别的封装，将可变类型转换为不可变类型（例如使用复制构造函数习语）。这是在 OOP 空间中编程的好方法。

如果你没有 setter，你可能想使用 Java 的内置反射：

```
public class Test {
    private String NAME = "OLD NAME";

    public String getName() {
        return this.NAME;
    }

    public static void main(String[] args) throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException {
        Test t = new Test();
        System.out.println(t.getName()); // OLD NAME

        Field f = t.getClass().getDeclaredField("NAME");
        f.setAccessible(true); // allows access to private field 
        f.set(t, "NEW NAME");

        System.out.println(t.getName()); // NEW NAME
    }
} 
```

但请注意，反射是一个高级主题，在大多数情况下是糟糕编程的症状。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-23T10:54:58.830

即使在 C++ 中，这也是一个坏主意，因为如果对象被释放，您的指针现在将指向无效的内存位置。这是您在 Java 中没有指针的原因之一；为了保护要从流氓指针访问的内存。因此，在 Java 中，对私有字段的所有访问都必须通过封闭对象本身进行，通常使用 get/set 组合。

但是，我认为使用 set() 不是您想要的解决方案；可能是因为您有来自不同类的对象集合，这些对象不共享除 Object 之外的公共层次结构。如果是这种情况，那么一个潜在的解决方案是创建和使用一个通用接口。这样，您可以使用这个通用接口来存储这些不同对象的引用并以相同的通用方式操作它们；例如：

```
static void test() {

    List<IntegerGetSet> list = new ArrayList<IntegerGetSet>();
    list.add (new A1(1));
    list.add (new B1(2));

    for (IntegerGetSet igs: list) {
        igs.set (igs.get() * 10);               
        System.out.println(igs.get()); 
    }
}

interface IntegerGetSet {   
    public int get();
    public void set (int i);
}

static class A1 implements IntegerGetSet {

    private int i;

    public A1 (int i) { this.i = i; }

    @Override
    public int get() {
        return i;
    }

    @Override
    public void set(int i) {
        this.i = i;
    }       
}

static class B1 implements IntegerGetSet {
    private int i;

    public B1 (int i) { this.i = i; }

    @Override
    public int get() {
        return i;
    }

    @Override
    public void set(int i) {
        this.i = i;
    }       
} 
```

如果你不能修改这些类，那么你将有一些更复杂的东西来做；例如，通过使用另一篇文章中建议的反射。*

# wpf - 使用绑定填充 WPF 数据网格（MVVM 样式）

> ID：14009853
> 
> 赞同：0
> 
> 时间：2012-12-23T09:17:58.293
> 
> 标签：wpf, wcf, entity-framework, mvvm, wpfdatagrid

我希望有人能指导我解决我的问题。

两年前，我在 Rainer Stropek 的 youtube 频道上关注了[一系列关于“WPF 和 Silverlight 中的 MVVM”的视频。](http://www.youtube.com/watch?v=g53__vPihFY)
他使用 MVVM 模型展示了非常清晰的关注点分离。我已经搞定了。

现在我的问题是当我必须显示来自多个实体的数据时。例如。我有 2 个表（工作和状态）。

工作表 jobId, jobNo, jobDate, jobStatus =>(状态表的主键)

状态表 statusId、statusCaption

如果我想在 datagird 上显示所有作业并用其各自的 statusCaption 替换 jobStatus，我该如何编写 ServiceContract 和/或 OperationContract 以从 wcf 服务公开这些数据以供 ViewModel 访问以填充和更新数据网格。

**更多细节**

我在 WCF 中创建了一个方法“GetAllJobs”（用“OperationContract”装饰），它返回一个 IEnumerable。这是因为如果我要从两个实体中选择字段，则返回的类型将是匿名的。

```
[OperationContract]
    public IEnumerable<Object> GetAllJobs()
    {
        using (var context = new logisticDBEntities())
        {

            var result = context.Jobs
                .Select(job => new{
                    j = job,
                    jobStatus = job.Status.statusCaption}).ToList();
            return result;
        } 
```

在我的 ViewModel 上，我创建了一个 Objs 属性来实现 INotifyedPropertyChanged 以及一个 refreshAllJobs 方法来更新视图上的数据网格

```
 private PMServiceClient serviceClient =
    new PMServiceClient();

public MaintenanceFormViewModel()
{
    this.RefreshAllJobs();
}

private IEnumerable<Job> jobs;
public IEnumerable<Job> Jobs
{
    get
    {
        return this.jobs;
    }

        set
        {
            this.jobs = value;
                OnPropertyChanged("Jobs");
        }
}

private void RefreshAllJobs()
{
    this.serviceClient.GetAllJobsCompleted += (s, e) =>
        {
            this.Objs = e.Result;
        };
        this.serviceClient.GetAllJobsAsync();
}

private void OnPropertyChanged(string propertyName)
{
    if (this.PropertyChanged != null)
    {
        this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
}
public event PropertyChangedEventHandler PropertyChanged; 
```

在视图上，我将 DataGrid 绑定到相应的属性

```
 <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Path=Objs}" Margin="10,10,6,6">
                    <DataGrid.Columns>
                        <DataGridTextColumn Binding="{Binding Path=jobNo}" Header="Job #" />
                        <DataGridTextColumn Binding="{Binding Path=statusCaption}" Header="Status" />
                        <DataGridTextColumn Binding="{Binding Path=jobDate}" Header="Date" />
                    </DataGrid.Columns>
                </DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T00:30:28.473

这是一些我希望你会发现有用的代码：

```
namespace SilverlightApplication1
{
    public partial class MainPage : UserControl
    {
        public MainPage()
        {
            InitializeComponent();
            FillDataGrid();
        }

        private void FillDataGrid()
        {
            Service1Client client = new Service1Client();
            client.GetAllEmpCompleted += new
                EventHandler<GetAllEmpCompletedEventArgs>(client_GetAllEmpCompleted);
            client.GetAllEmpAsync();
        }

        void client_GetAllEmpCompleted(object sender, GetAllEmpCompletedEventArgs e)
        {
            GridTest.ItemsSource = e.Result;

        }
    }
} 
```

来源：[https ://chandradev819.wordpress.com/2010/09/21/easyest-way-to-consume-wcf-service-and-fill-datagrid-from-database-in-silverlight/](https://chandradev819.wordpress.com/2010/09/21/easiest-way-to-consume-wcf-service-and-fill-datagrid-from-database-in-silverlight/)

# html - 尽管我设置了宽度，但为什么我的图像会缩小？

> ID：14009854
> 
> 赞同：0
> 
> 时间：2012-12-23T09:18:19.067
> 
> 标签：html, css, twitter-bootstrap

我已经设置了宽度和高度，但它忽略了这一点，并显示为原始尺寸。为什么？？？Bootstrap Css是防止还是什么？？？

```
 <p class="responsive-img">  
                <img alt="2011-08-16_20.01.51" class="img-polaroid" height="100" src="/system/user_avatars/1/thumb/2011-08-16_20.01.51.jpg?1355911975" width="100" />
            </p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:37:18.550

是的，[Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html) CSS 会覆盖该`height`属性（并且，取决于浏览器及其模式，该`width`属性也是如此）。它设置`height: auto`和`width: auto\9`。CSS 设置会覆盖 HTML 属性，因此您需要使用 CSS 来覆盖 Bootstrap 设置。在内联 CSS 中，您将使用

```
 <img ... style="width: 100px; height: 100px" ...> 
```

但您也可以在`style`元素中使用样式表或外部样式表。Bootstrap 代码使用`img`选择器，因此很容易被级联规则击败。

# windows-phone-7 - 如何更改 ApplicationBar 字体家族？

> ID：14009856
> 
> 赞同：1
> 
> 时间：2012-12-23T09:18:26.350
> 
> 标签：windows-phone-7, application-bar

我正在开发 Windows Phone 7 应用程序。我需要更改 applicationBar 字体系列。如果有人知道这里的ans帖子。

我的代码：

```
 <shell:ApplicationBar BackgroundColor="#5a4d26" ForegroundColor="White" Opacity="0.9"  IsVisible="True" Mode="Minimized" IsMenuEnabled="True"  >
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="about us"  Click="PageClicked1"/>
                <shell:ApplicationBarMenuItem Text="subscribe" Click="PageClicked2"/>
                <shell:ApplicationBarMenuItem Text="terms and conditions" Click="PageClicked3"/>                 
                <shell:ApplicationBarMenuItem Text="privacy policy" Click="PageClicked4"/>    
            </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:51:21.510

我认为您不能更改菜单​​项的字体，因为应用程序栏不是 silverlight 控件。

以下是应用程序栏的最佳实践：

[http://msdn.microsoft.com/en-us/library/ff431813(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff431813(v=vs.92).aspx)

# c# - 使用 Aforge.net 将 Ycbcr 图像转换为灰度

> ID：14009862
> 
> 赞同：0
> 
> 时间：2012-12-23T09:18:59.500
> 
> 标签：c#, aforge

我是 Aforge.net 的新手。
我已经使用 Aforge.Net 使用 YCbCr 过滤器进行了过滤和图像处理

```
YCbCrFilter.Y = new Range(0, 1);
YCbCrFilter.Cb = new Range(-0.1862745098039216f, 0.0294117647058824f);
YCbCrFilter.Cr = new Range(0.0137254901960784f, 0.2254901960784314f);
// apply the filter
var YCbCrFilteredImage = YCbCrFilter.Apply(bitmap); 
```

我需要将结果图像（即`YCbCrFilteredImage`）转换为`Grayscale`图像，以便稍后将其转换为黑白图像。
那么如何进行灰度转换呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-15T19:02:41.630

Salam Ruba 使用这个灰度值 Grayscale(0.2125, 0.7154, 0.0721) 和阈值 BradleyLocalThresholding 是这个库中最好的。也可以代替 YCbCrFilter 也许你想使用[HSL 过滤](http://www.aforgenet.com/framework/docs/html/743311a9-6c27-972d-39d2-ddc383dd1dd4.htm)，这里是你的代码

```
 YCbCrFiltering YCbCrFilter = new YCbCrFiltering();
    YCbCrFilter.Y = new Range(0, 1);
    YCbCrFilter.Cb = new Range(-0.1862745098039216f, 0.0294117647058824f);
    YCbCrFilter.Cr = new Range(0.0137254901960784f, 0.2254901960784314f);
    // apply the filter
    var YCbCrFilteredImage = YCbCrFilter.Apply(bitmap);
    Grayscale gfilter = new Grayscale(0.2125, 0.7154, 0.0721);
    YCbCrFilteredImage = gfilter.Apply(YCbCrFilteredImage);
    BradleyLocalThresholding thfilter = new BradleyLocalThresholding();
    thfilter.ApplyInPlace(YCbCrFilteredImage); 
```

您现在可以搜索 blob；）

# asynchronous - 异步 MPI 主从模型

> ID：14009865
> 
> 赞同：2
> 
> 时间：2012-12-23T09:19:30.380
> 
> 标签：asynchronous, parallel-processing, mpi, master-slave

主服务器有大量任务，它会将其分发给任何发出就绪信号的从服务器。

这些任务在计算时间上并不相等，但都在计算一些值。作为输出，master 需要计算所有任务中的最小值。

这里的问题是我不想使用同步 send-recv 调用来分发作业，因为我不想等待一个进程完成，然后再将作业发送到下一个进程。

那么，我怎样才能收集结果呢？我需要知道每个返回值才能返回最小值，但我不知道该值何时会被发送回主控器，或者以什么顺序。

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T09:48:27.260

在主服务器上使用非阻塞发送/接收，在从服务器上使用阻塞发送/接收。基本上：

掌握：

1.  通过非阻塞发送发送作业。
2.  为每个结果发布一个非阻塞接收
3.  定期检查是否有任何结果。如果是这样，请发送一个新作业并为其发布一个非阻塞接收。
4.  重复步骤 3。直到所有结果都已到达。

奴隶：

1.  等待具有阻塞接收的作业
2.  使用阻塞发送发送结果
3.  转到 1。

# delphi - 从 Delphi 打开和编辑 Word 模板

> ID：14009866
> 
> 赞同：4
> 
> 时间：2012-12-23T09:19:47.953
> 
> 标签：delphi, templates, ms-word, edit

我需要能够从 Delphi 打开和编辑 Word 模板（使用 Word） 我可以打开模板 OK 但 Word 假定它是文档而不是模板。

问题是我需要编辑模板而不是将其用作新文档的模板。我将模板用作文档处理系统的一部分，并且我希望用户能够从我的应用程序中编辑模板。因为现在他们必须打开 Word，然后从那里打开模板并进行编辑——从我的应用程序中进行操作会更容易、更安全。

实验代码

```
fWordApp: WordApplication;
TempName: OleVariant;
WordDoc: WordDocument;
TemplateFile: string;
begin
  TemplateFile := Settings.Directories.RootInsert(qryTemplates.FieldByName('fldtemplate_path').AsString);
  if TemplateFile <> '' then
    begin
      if not Assigned(fWordApp) then
        begin
          fWordApp := CreateOleObject('Word.Application') as WordApplication;
          while fWordApp.Templates.Count = 0 do
            Sleep(200);                                 // Normal.dot must be loaded
        end;
      if Assigned(fWordApp) then
        fWordApp.Visible := True
      else
        raise Exception.Create('Cannot initialize Word application');
      TempName := TemplateFile;
      WordDoc := fWordApp.Documents.Add(TempName, EmptyParam, wdFormatTemplate, EmptyParam); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T15:27:44.823

据我了解，您使用了错误的方法。该`Add`方法用于创建新文档。您可以传递模板文件名以使新文档基于该模板。

但是您想打开现有文档并对其进行编辑。文档是模板并不重要。你仍然需要打开它。为此，您需要该`Open`方法。这是一个相当琐碎的例子。

```
var
  WordApp, Doc: Variant;
begin
  WordApp := CreateOleObject('Word.Application');
  WordApp.Visible := True;
  Doc := WordApp.Documents.Open('path\to\my\template.dotx');
  Doc.Range.Text := 'Merry Christmas everyone';
  Doc.Save;
  WordApp.Quit;
end; 
```

我使用了后期绑定，因为我发现这个例子更容易。但是你应该坚持你的早期绑定方法。您必须了解 open 方法需要大量参数这一事实。我认为您可以简单地传递`EmptyParam`给除第一个参数之外的所有参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T12:38:40.267

这里有数以千计的 Delphi 函数可用于 Word： [http ://delphimagic.blogspot.com.es/2013/03/funciones-para-trabajar-con-word.html](http://delphimagic.blogspot.com.es/2013/03/funciones-para-trabajar-con-word.html)

# android - android 错误或配置对象的滥用？

> ID：14009870
> 
> 赞同：1
> 
> 时间：2012-12-23T09:20:36.643
> 
> 标签：android, configuration, locale

我们在 Application 对象的 onCreate 方法中有一些代码，用于更改 ApplicationContext 配置中的默认本地。

它看起来像：

```
Locale locale = new Locale(sSavedLocale);
Locale.setDefault(locale);
Configuration config = new Configuration();
config.locale = locale;
getResources().updateConfiguration(config, getResources().getDisplayMetrics()); 
```

然后我们开始我们的主要活动，然后从那里开始我们的其他活动和任务。只要我不导致屏幕旋转等配置更改，一切都可以。如果我旋转屏幕，区域设置将返回到设备默认值，即使应用程序对象保持不变。

深入研究 ActivityThread 和其他内部类的 android 源代码，我可以看到 ApplicationContext 本身，并且 mainThread 中的上下文在配置更改事件中更改回默认值。

这对我来说似乎是一个错误，因为 ii 在应用程序启动时在应用程序级别设置配置我可能希望保持更改，除非发生本地配置更改，即使那样......

我没有检查开放的错误，我确实想应用一个。有人认为我错了，这是可以的行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T09:52:14.077

您可以添加`onConfigurationChanged`到您的`Application`班级。

```
 @Override
    public void onConfigurationChanged(Configuration newConfig)
    {
        super.onConfigurationChanged(newConfig);
        if (newConfig.locale != null)
        {
            Locale locale = new Locale(sSavedLocale);
            Locale.setDefault(locale);
            Configuration config = new Configuration();
            config.locale = locale;
            getResources().updateConfiguration(config, getResources().getDisplayMetrics());
        }
    } 
```

# c++ - 从不同的字符串输出文件名

> ID：14009871
> 
> 赞同：1
> 
> 时间：2012-12-23T09:20:52.617
> 
> 标签：c++, file, text-files, filepath

嗨，我在使用此代码时遇到了一些问题

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main()
{
    string line;
    //const char* test = "connect";
    #define test "connect"
    string con("c:\\filepath\\%s.txt", test);
    ifstream file;
    file.open(con.c_str());
    if (file.is_open()) {
        while (file.good()) {
            getline(file, line);
            printf("setc %s\n", line.c_str());
            //cout << "setc " << line << endl;
        }
        file.close();
    } else
        cout << "Unable to open file";
    return 0;
} 
```

有人可以告诉我我出了什么问题

这就是我所追求的

'con' 意味着从 'test' 中获取文件名

如果你能帮助我，我将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:28:51.387

有很多方法可以做到这一点。这里有两个：

```
std::string con1("c:\\filepath\\" test ".txt");
std::string con2("c:\\filepath\\" + std::string(test) + ".txt"); 
```

`con1`requires的初始化`test`通过宏扩展成为字符串文字，因为它依赖于字符串文字的合并。第二种形式更通用，`test`可以是任何可以转换为 a 的形式`std::string`，例如 a `char const*`。

# android - 在发送电子邮件之前显示电子邮件客户端列表

> ID：14009877
> 
> 赞同：0
> 
> 时间：2012-12-23T09:21:44.147
> 
> 标签：android, xamarin.android, email-client

我使用此代码在我的 monodroid 应用程序中发送电子邮件：

```
try {
                Intent i = new Intent (Intent.ActionSend);
                i.SetType ("message/rfc822");
                i.PutExtra (Intent.ExtraEmail, new string[]{TxtEmail .Text });
                i.PutExtra (Intent.ExtraSubject, "My Subject");
                i.PutExtra (Intent.ExtraText, "");
                try {
                    StartActivity (Intent .CreateChooser (i, "Sending Email"));
                } catch (System.Exception ex) {
                    Toast .MakeText (this, "There are no mail client available", ToastLength.Long).Show ();
                }

            } catch (Exception ex) {
                Common .HandleException (ex);
            } 
```

我希望此代码显示所有电子邮件客户端的列表，用户选择想要的，然后转到电子邮件客户端并用户发送电子邮件。但是，当我触发此代码时，它会直接转到设备的 Gmail 应用程序（虽然我有其他电子邮件客户端，如 android 默认邮件客户端），并且不会向用户显示其他电子邮件客户端选择哪个想要的。我该怎么做？也许用户想要选择另一个电子邮件客户端。

谢谢

# html - CSS - 如何隐藏额外的图像

> ID：14009880
> 
> 赞同：0
> 
> 时间：2012-12-23T09:21:59.720
> 
> 标签：html, css

我有一个 div，其中包含 3 个 720x360px 的大图像，它们对用户都是可见的，但我想要一次只显示 1 个图像。

我的html代码：

```
<div class="main-slider">

        <div class="slider-large-image">
            <img src="images/floor_guide.png" alt="" width="727px" height="360px" />
            <img src="images/ice_planet.jpg" alt="" width="727px" height="360px" />
            <img src="images/buddy_work.jpg" alt="" width="727px" height="360px" />
        </div>

        <div class="slider-sidebar">
            <img class="image1" src="images/floor_guide.png" alt="" width="240px" height="180px" />
            <img class="image2"  src="images/ice_planet.jpg" alt="" width="240px" height="180px" />
            <img class="image3"  src="images/buddy_work.jpg" alt="" width="240px" height="180px" />
        </div>

    </div> 
```

我的 CSS 代码：

```
.main-slider{
    height:360px;
    width:1281px;
}

.slider-large-image{
    width:720px;
    display:inline-block;
    white-space:nowrap;
}

.slider-large-image img{
    display:inline-block;
} 
```

你可以在这里看到输出：http: [//jsfiddle.net/mareebsiddiqui/dPAnr/](http://jsfiddle.net/mareebsiddiqui/dPAnr/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:27:16.593

使用`display :none;`那些你不想显示的图像

你可以这样做

```
.dis_none{
   display :none;
} 
```

并将类添加 `dis_none`到您不想显示的图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:29:35.863

好的，我认为您想要的是带有类的 div`slider-large-image`并且`slider-sidebar`只显示一个图像。

顺便说一句，您没有`slider-sidebar`.

所以假设这是你想要的，你基本上需要设置这些 div 的宽度，以便它们只显示一个图像，并设置`overflow`为`hidden`或`scroll`

例如：

```
css

    .main-slider{
    height:360px;
    width:1281px;
}

.slider-large-image{
    width:360px;  /* CHANGED TO SMALLER WIDTH, to match the width of one image */
    display: inline-block;
    overflow: scroll; /* set overflow to scroll */
    white-space:nowrap;
}

.slider-large-image img{
     display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:14:41.400

您可以对要隐藏的图像使用可见性属性。像这样：可见性：隐藏；

# android - 在适用于 Android 的 Google Analytics v2 中丢失了异常堆栈跟踪？

> ID：14009883
> 
> 赞同：8
> 
> 时间：2012-12-23T09:22:20.657
> 
> 标签：android, exception-handling, google-analytics

堆栈跟踪对于解决问题至关重要。在 Android 中，您可以在 Play 商店控制台中找到不错的报告。除非您使用 Google Analytics V2。在这种情况下，Analytics 似乎吞下了这些例外。更糟糕的是，Analytics 似乎只记录了异常的第一行，因此丢失了堆栈跟踪。至少它没有显示在错误报告中。

这是我们的analytics.xml 中的一个片段：

```
<!-- Enable automatic exception tracking -->
<bool name="ga_reportUncaughtExceptions">true</bool>
<bool name="ga_debug">false</bool> 
```

另请参阅：[https ://developers.google.com/analytics/devguides/collection/android/v2/exceptions#easytracker](https://developers.google.com/analytics/devguides/collection/android/v2/exceptions#easytracker)

那么，我们的应用程序中是否存在某些缺失/错误？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T13:32:14.890

正如先前的答案 (user857661) 所说，请参阅 Google Analytics 文档关于创建新的[ExceptionReporter](https://developers.google.com/analytics/devguides/collection/android/v2/exceptions#exception-reporter)，或查看[我的博客文章](http://dandar3.blogspot.com/2013/03/google-analytics-easytracker-detailed.html)，了解如何将自定义 ExceptionParser 分配到默认处理程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T06:14:56.020

如果您想在 GA V3.0 及更高版本上查看完整的异常跟踪，请发送您的异常，例如

```
String exceptionTrace = "Any custom string as well " + getExceptionDescription(Ex);    
EasyTracker.getInstance(context).send(MapBuilder.createException(exceptionTrace, false).build()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T11:31:44.783

您可以覆盖 ExceptionParser 类以获取有关堆栈跟踪的更多信息：[https](https://developers.google.com/analytics/devguides/collection/android/v2/exceptions#exception-parser) ://developers.google.com/analytics/devguides/collection/android/v2/exceptions#exception-parser 。不过，我不确定堆栈跟踪在 Google Analytics Web 界面中是否非常易读。

# jquery - 使用 .append() 或 .html() 插入时，由 .val() 从 textform 检索的文本消失

> ID：14009888
> 
> 赞同：3
> 
> 时间：2012-12-23T09:23:15.743
> 
> 标签：jquery, forms, textbox, get

我正在尝试学习如何一起使用表单和 jQuery。

我正在尝试将文本输入文本表单并将其附加或插入到另一个元素中

我创建了一个 jsFiddle：http: [//jsfiddle.net/B9weu/5/](http://jsfiddle.net/B9weu/5/)

出于某种原因，我使用 .val() 检索到的文本在它附加到的元素中出现了片刻，然后消失了。为什么是这样？

通过简单地使用 .val() 作为 .submit() 事件中的处理程序，我在使用表单方面是否走在正确的道路上？

编码：

```
 <form id="target">
   <div>
    <textarea id="blogentry" name="d" rows="8" cols="40">4</textarea>
  </div>
  <div>
    <input type="submit" name="g" value="Submit" id="g" />
  </div>
</form>

<script>
$('#target').submit(function() {
  var blogtext = $('#blogentry').val();
  $('#printbodytexthere').append('<p>' + blogtext + '</p>');
});
</script>

<div id="printbodytexthere">
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T09:24:40.250

您的表单正在提交（页面刷新）

USE：`event.preventDefault();`防止默认*提交*行为

```
$('#target').submit(function( e ) {
    e.preventDefault();
  var blogtext = $('#blogentry').val();
  $('#printbodytexthere').append('<p>' + blogtext + '</p>');
}); 
```

文档：http : [//api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# java - 字符编码过滤器，韩文字符编码问题

> ID：14009904
> 
> 赞同：1
> 
> 时间：2012-12-23T09:26:07.977
> 
> 标签：java, jakarta-ee, spring-mvc, character-encoding

我们有一个基于 Spring MVC 的多语言 Web 应用程序。我们在 web.xml 中设置了 CharacterEncodingFilter，如下所述

```
<filter>
        <filter-name>SetCharacterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>SetCharacterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

使用这些配置，应用程序可以按预期正常工作。

当我们从 jsp "직원의상세미니" 传递这个韩国字符时，在我们的服务层中，我们发现这个字符被编码为 "ì§ìììì¸ë¯¸ë"

我们具有使用接收到的所有者名称查询 jdbc 元数据的功能，以获取其中可用的表，如下所述

```
ResultSet resultSetTables = dbMetadata.getTables(owner,owner, "%", tableTypes); 
```

1) 这个函数

```
ResultSet resultSetTables = dbMetadata.getTables("직원의상세미니","직원의상세미니", "%", tableTypes); 
```

返回模式“직원의상세미니”下的 7 个可用表

当使用编码字符串“ì§ìììì¸ë¯¸ë”运行时

```
ResultSet resultSetTables = dbMetadata.getTables("ì§ìììì¸ë¯¸ë","ì§ìììì¸ë¯¸ë", "%", tableTypes); 
```

返回在相同模式“직원의상세미니”下可用的 0 个表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:37:39.673

我认为 Tomcat 是您的问题，您的 URI 编码可能在 HTTP 连接器中默认为 ISO-8859-1。

[http://tomcat.apache.org/tomcat-5.5-doc/config/http.html](http://tomcat.apache.org/tomcat-5.5-doc/config/http.html)，您可能必须将 URIEncoding 设置为 UTF-8 并查看是否有帮助。

我在 python 控制台上快速尝试，如果我使用您提供的 iso-8859-1 字符串，我会得到与您发布的相同的乱码。

```
>>> a = '직원의상세미니'
>>> print a.decode("iso-8859-1")
ì§ìììì¸ë¯¸ë 
```

# html - div 在调整浏览器大小时下降

> ID：14009905
> 
> 赞同：1
> 
> 时间：2012-12-23T09:26:08.460
> 
> 标签：html, css, wordpress, floating

我的问题在于，当我调整页面大小时，欢迎 div 低于 profileImg div，而不仅仅是调整大小。我知道这是非常基本的，但我需要一些帮助。

我有以下屏幕截图标本 A [http://grab.by/iwam](http://grab.by/iwam) 标本 B [http://grab.by/iwak](http://grab.by/iwak)

和下面的代码

**wordpress 爵士乐**

```
<div id="container">
    <section id="profileImg">
    </section>
    <section id="welcome">
    <?php
    // The Query
    query_posts( 'category_name=welcome' );

    // The Loop
    while ( have_posts() ) : the_post();
    ?>
    <h1><?php the_title();?></h1>
    <p><?php the_content();?></p>
    <?php
    endwhile;

    // Reset Query
    wp_reset_query();

    ?>
    </section>
    <section id="skills">
    <?php
    // The Query
    query_posts( 'category_name=skills' );

    // The Loop
    while ( have_posts() ) : the_post();
    ?>
    <h1><?php the_title();?></h1>
    <p><?php the_content();?></p>
    <?php
    endwhile;

    // Reset Query
    wp_reset_query();

    ?>
    </section>
    <section id="what">
    <?php
    // The Query
    query_posts( 'category_name=what i can do' );

    // The Loop
    while ( have_posts() ) : the_post();
    ?>
    <h1><?php the_title();?></h1>
    <p><?php the_content();?></p>
    <?php
    endwhile;

    // Reset Query
    wp_reset_query();

    ?>
    </section> 
```

**css**

```
html{font-size: 62.5%;}
#container{
    margin-left: 5%;
    margin-right:auto;
    overflow:scroll;
}
#profileImg{
    float:left;
    background:url(../images/austinProfile.jpg) no-repeat center center; width:352px; height:349px;
    background-size: 100%;
    -webkit-transition: 0.1s;
    -moz-transition: 0.1s;
    transition: 0.1s;
    opacity: 0.5;
    -webkit-border-radius: 50%;
    -moz-border-radius: 50%;
    border-radius: 50%;
    -webkit-transform: rotate(-5deg);
    -moz-transform: rotate(-5deg);
    -ms-transform: rotate(-5deg);
    -o-transform: rotate(-5deg);
    transform: rotate(-5deg);
}
#profileImg:hover{
    opacity: 1.0;
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);

}
/*typography*/
#welcome h1{
    font-size: 4em;
}
#welcome p{
    font-size: 2.4em;
    line-height: 1.2em;
    font-weight: 700;
}
#skills h1, #what h1{

}
/*typography*/
#welcome{float:left; width:70%; clear:none;}
#skills{clear: both;}
#what{} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:08:41.073

如果您将前两个部分放在一个具有固定宽度的容器中，则在调整屏幕大小时它们不会错位。

如果您尝试制作响应式布局，则可以使用 CSS3 中的媒体查询。请参见下面的示例：

```
@media screen and (max-width: 600px) {
  #profileImg {background-size: 50%;}
} 
```

# sharepoint - 是否可以在没有访问权限的情况下从站点获取结果？

> ID：14009911
> 
> 赞同：1
> 
> 时间：2012-12-23T09:28:14.130
> 
> 标签：sharepoint, search, sharepoint-2010

我正在尝试解决许多文档存储在不同共享点站点中的问题（不一定在同一服务器上，这意味着它们不是同一站点的子站点）。

我正在考虑创建某种自定义共享点搜索，但我的问题是 - 无权访问特定共享点站点的用户是否可以从该站点获取搜索结果？

这意味着如果他们搜索“文档 X”并且该文档位于他们无权访问的站点上，我希望他们在搜索结果页面上看到该文档位于那里，但仍然不允许他们访问它未经许可（只要看到它存在）。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T22:13:41.000

这是一个关于如何模拟特定用户并将用户看到的搜索结果返回给所有用户的示例。不用说，这当然是一个安全风险，所以谨慎使用：

```
using System;
using System.ComponentModel;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using Microsoft.SharePoint;
using Microsoft.SharePoint.WebControls;
using System.Data;
using System.Security.Principal;

using Microsoft.Office.Server.Search.Administration;
using Microsoft.Office.Server.Search.Query;
using Microsoft.SharePoint.Administration;

namespace SharePointSearchImpersonation.WebPart1
{ 
    [ToolboxItemAttribute(false)]
    public class QuerySearchImpersonatedWebPart : WebPart
    {
        protected override void CreateChildControls()
        {
            try
            {
                // Run elevated since the user, the apppool account, that impersonate other users needs the following 
                // local policies (run secpol.msc): "Impersonate a client after authentication" & "Act as part of the operating system"
                // The apppool account must be granted above rights. 
                SPSecurity.RunWithElevatedPrivileges(
                    delegate
                        {
                            // Setup the windows identity to impersonate the search as. 
                            WindowsIdentity identity = new WindowsIdentity("user3@dev.local");
                            // Create a new ImpersonationContext for the identity
                            using (WindowsImpersonationContext wic = identity.Impersonate())
                            {
                                SearchQueryAndSiteSettingsServiceProxy settingsProxy = SPFarm.Local.ServiceProxies.GetValue<SearchQueryAndSiteSettingsServiceProxy>();
                                // Get the search proxy by service application name
                                SearchServiceApplicationProxy searchProxy = settingsProxy.ApplicationProxies.GetValue<SearchServiceApplicationProxy>("Search Service Application");
                                KeywordQuery query = new KeywordQuery(searchProxy);
                                query.ResultTypes = ResultType.RelevantResults;
                                query.QueryText = "test";
                                query.RowLimit = 25;
                                ResultTableCollection result = query.Execute();
                                DataTable dt = new DataTable();
                                dt.Load(result[ResultType.RelevantResults]);

                                GridView gv = new GridView();
                                Controls.Add(gv);
                                gv.AutoGenerateColumns = true;
                                gv.DataSource = dt;
                                gv.DataBind();

                            }
                        });
            }
            catch (Exception ex)
            {
                Controls.Add(new LiteralControl() {Text = ex.ToString()});
            }
        }
    }
} 
```

# .htaccess - 锚符号在 htaccess 文件中不起作用

> ID：14009912
> 
> 赞同：0
> 
> 时间：2012-12-23T09:28:14.973
> 
> 标签：.htaccess, anchor

我在 .htaccess 中有论文行：

```
RewriteRule ^page-([0-9]+)-pg-1\.html$ page.php?b=$1&pg=1 [L,NC,NS]
RewriteRule ^page-([0-9]+)-pg-([0-9]+)\.html$ page.php?b=$1&pg=$2#nv [NE,L,NC,NS]
RewriteRule ^page-([0-9]+)-pg-([0-9]+)-lo\.html$ page.php?b=$1&pg=$2&lo=1 [L,NC,NS] 
```

但它不像我预期的那样工作。似乎它没有转到页面中的#nv。这条规则有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:31:56.983

您不能用哈希重写 URL：它们是在客户端解析的，而不是在服务器端解析的。但是您可以通过以下方式组织对此类页面的重定向`R`：

```
RewriteRule ^page-([0-9]+)-pg-([0-9]+)\.html$  page.php?b=$1&pg=$2#nv [NE,L,NC,NS,R=302] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T13:00:14.020

我遇到了同样的问题，最后用 jQuery 解决了。

```
$("html, body").animate({ scrollTop: YPosition}, 3000 ); 
```

不知道对你有没有用。

如果您不知道盒子的高度，您可以使用 ID 来引用该地点：

```
$("html, body").animate({ scrollTop: $("#ElementID").offset().top-XXX }, 1000); 
```

我必须在顶部减去一些像素，因为我有一个固定的导航栏。

# ios - 表格视图单元格中的按钮没有响应其索引路径

> ID：14009914
> 
> 赞同：0
> 
> 时间：2012-12-23T09:28:36.833
> 
> 标签：ios, uitableview

我在每个名为 ad edit and cancel 的单元格中有一个表格视图和两个按钮。当用户同时单击编辑时，同一行取消按钮图像应更改。代码工作正常，但是当我单击第一个单元格编辑按钮时，第三个单元格图像的取消按钮正在更改 insted od 第一个单元格。我该怎么办？这样它就会改变同一个单元格取消按钮的图像..

这是我的代码！！

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath    
{

simpleTableIdentifier = @"MenuNameCell";
cell = (MenuNameCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
if (cell== nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MenuNameCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
    NSLog(@"---------new cell agin");   
}

 else
{
    NSArray *arrayView = [cell.contentView subviews];
    for (UIView *vTemp in arrayView)
    {
        [vTemp removeFromSuperview];
    }

    NSLog(@"---No New Cell hiiii");
    // Setting Tag To UIButton
    _checkButton = (UIButton *)[cell.contentView viewWithTag:indexPath.row];
    _cancelButton = (UIButton *)[cell.contentView viewWithTag:indexPath.row];

}
// Creating Label Menu Name
_nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(8, 11, 82, 21)];  
_nameLabel.backgroundColor = [UIColor clearColor];
_nameLabel.text =  [_hotel._orderedMenus objectAtIndex:indexPath.row];

// Creating Label Menu Cost
_amountMenu   = [[UILabel alloc] initWithFrame:CGRectMake(167, 13, 44, 21)];
_amountMenu.backgroundColor = [UIColor clearColor];
_amountMenu.text  = [[_hotel._menuPrices objectAtIndex:indexPath.row] stringValue];

// Creating Text Field For Order Quantity
_textFieldQuantity = [[UITextField alloc] initWithFrame:CGRectMake(125,14,42,21)];
_textFieldQuantity.userInteractionEnabled = NO;
_textFieldQuantity.text = [[_hotel._selectedQuantity objectAtIndex:indexPath.row] stringValue];

// Creating Button For Check Order
_checkButton  = [UIButton buttonWithType:UIButtonTypeCustom];
[_checkButton setFrame:CGRectMake(232, 13, 25, 28)];
[_checkButton setTag:indexPath.row];
_checkButton.titleLabel.tag = indexPath.row;
[_checkButton setBackgroundImage:[UIImage imageNamed:@"edit.png"]forState:UIControlStateNormal];
[_checkButton addTarget:self action:@selector(editQuantity:) forControlEvents:UIControlEventTouchUpInside];

// Creating Button For CANCEL Order
_cancelButton  = [UIButton buttonWithType:UIButtonTypeCustom];
[_cancelButton setFrame:CGRectMake(265, 13, 25, 28)];
[_cancelButton setBackgroundImage:[UIImage imageNamed:@"cancel.png"] forState:UIControlStateNormal];
[_cancelButton setTag:indexPath.row];
_cancelButton.titleLabel.tag = indexPath.row;
[_cancelButton addTarget:self  action:@selector(cancelOreder:) forControlEvents:UIControlEventTouchUpInside];

// Adding All To Content View
[cell.contentView addSubview:_nameLabel];
[cell.contentView addSubview:_amountMenu];
[cell.contentView addSubview:_textFieldQuantity];
[cell.contentView addSubview:_checkButton];
[cell.contentView addSubview:_cancelButton];

//objc_setAssociatedObject(_checkButton, iindex, indexPath,OBJC_ASSOCIATION_RETAIN );

return cell; 
```

}

```
-(void)editQuantity:(id)sender{
button = (UIButton *)sender;
row = button.tag;
col = button.titleLabel.tag;
NSLog(@"Check Button index is %d",row);
NSLog(@"cehck title is %d",col);
_textFieldQuantity.userInteractionEnabled = YES;
 _textFieldQuantity.text = [[_hotel._selectedQuantity objectAtIndex:row] stringValue];

UIImage *buttonImage = [UIImage imageNamed:@"edit_over.png"];
[_checkButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
UIImage *buttonImageCancel = [UIImage imageNamed:@"check.png"];
[_cancelButton setBackgroundImage:buttonImageCancel forState:UIControlStateNormal];
_cancelButton.tag =  0; 
```

} -(void)cancelOreder:(id)sender{

```
button = (UIButton *)sender;
row = button.tag;
NSLog(@"The Row Selected iS At Cancel Order ISSSS----%d", row);
if (_cancelButton.tag ==  0){
    _textFieldQuantity.userInteractionEnabled = NO;
    UIImage *buttonImageCancel = [UIImage imageNamed:@"check_over.png"];
    [_cancelButton setBackgroundImage:buttonImageCancel  forState:UIControlStateNormal];
    UIImage *buttonImageCancel1 = [UIImage imageNamed:@"cancel.png"];
    [_cancelButton setBackgroundImage:buttonImageCancel1 forState:UIControlStateNormal];
    UIImage *buttonImage = [UIImage imageNamed:@"edit.png"];
    [_checkButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
    _cancelButton.tag = 1;
}
else
{
    UIAlertView *alert =  [[UIAlertView alloc] initWithTitle:@"iHomeDelivery" message:@"Do You Want To Cancel the Order" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T01:37:28.187

在 editQuantity 中，看起来您正在更改 _checkButton 和 _cancelButton 的背景图像，但您没有通过它们的标签指定特定实例。

您提到第三行的取消按钮正在更改。这是添加到表中的最后一行吗？

EDITED 在 editQuantity 方法中尝试这样的操作；

```
UIView *buttonToEdit;
buttonToEdit = [_cancelButton viewWithTag:row];
[buttonToEdit setBackgroundImage:buttonImageCancel forState:UIControlStateNormal]; 
```

我尚未对其进行测试，但在这种情况下，buttonToEdit 应该指向您单击的行中的按钮。因此，您将在同一行的按钮上设置背景图像。

希望对你有效。

# arrays - 查找具有给定总和的 K 个元素的子序列

> ID：14009919
> 
> 赞同：2
> 
> 时间：2012-12-23T09:29:48.360
> 
> 标签：arrays, algorithm, language-agnostic

> **可能的重复：**
> [具有固定子集大小的 Sum-subset](https://stackoverflow.com/questions/8916539/sum-subset-with-a-fixed-subset-size)

所以我有一个数组`A`，有元素`A[1], A[2] .. A[N]`

我想找到一个子序列（不一定是连续的），正好有`K`元素，其总和正好是`Sum`.

我最好的猜测是 O(N ^K )，如果你运行 K 个嵌套循环，并测试每一种可能性。

这可以更快地完成吗？

的所有元素`A`都是整数，大于 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:45:24.007

我认为这不能在多项式时间内解决。@Anderson 是对的，它确实类似于背包问题。

[虽然您可以通过分支定界](http://en.wikipedia.org/wiki/Branch_and_bound "分支和绑定")算法使其更快，但它的有效性将基于您的实际值。（例如：如果超过总和，则不要进一步测试）

**编辑：** 基于主题，@amit 链接的内容，O(n^k) 确实是最佳答案，对于任何固定的 k 值，它是 n 中的多项式。

# c# - 用c#编辑xml文件

> ID：14009922
> 
> 赞同：0
> 
> 时间：2012-12-23T09:30:54.860
> 
> 标签：c#, xml-parsing

我有以下 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfParams xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Params Key="Domain" Value="User123">
    <Variable>
      <Name>Domain</Name>
      <Type>String</Type>
      <Value>User123</Value>
    </Variable>
  </Params>
  <Params Key="Password" Value="Password123">
    <Variable>
      <Name>Password</Name>
      <Type>String</Type>
      <Value>Password123</Value>
    </Variable>
  </Params>
  <Params Key="Username" Value="Domain123">
    <Variable>
      <Name>Username</Name>
      <Type>String</Type>
      <Value>Domain123</Value>
    </Variable>
  </Params>
</ArrayOfParams> 
```

我想将密码从更改`Password123`为`NewPassword123` xml 应该在 2 个地方更改：

```
<Params Key="Password" Value="Password123"> 
```

和

```
<Value>Password123</Value> 
```

如何才能做到这一点？

**编辑**XML 已经存在，而不是我的设计。我只需要改变它

我尝试使用 XDocument，但查询时遇到问题。你能提供一个知道如何查询它的 linq 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:45:35.340

使用 LINQ to XML 怎么样？

```
var doc = XDocument.Parse(xmlString);

var passwordParams = doc.Root.Elements("Params").SingleOrDefault(e => (string)e.Attribute("Key") == "Password");

if(passwordParams != null)
{
    passwordParams.Attribute("Value").Value = newPasswordString;
    passwordParams.Element("Variable").Element("Value").Value = ewPasswordString;
} 
```

之后，您可以将文档保存在您想要的任何位置。

我现在无法测试它，但总体思路应该很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:45:55.917

这将是一种方法 - 使用“旧”样式`XmlDocument`类将整个 XML 加载到内存中并允许您“导航”其结构。如果您的 XML 不是太大（如这里），则可以正常工作。

```
// create XML document and load contents from file
XmlDocument xdoc = new XmlDocument();
xdoc.Load(@"D:\temp\test.xml");   // adapt this to your own path!

// get the <Params> node with the Key=Password attribute
XmlNode paramsNode = xdoc.SelectSingleNode("/ArrayOfParams/Params[@Key='Password']");

if (paramsNode != null)
{
    // set the value of the "Value" attribute to the new password
    paramsNode.Attributes["Value"].Value = "NewPassword123";

    // get the "Variable/Value" subnode under that <Params> node
    XmlNode valueSubnode = paramsNode.SelectSingleNode("Variable/Value");

    if (valueSubnode != null)
    {
       valueSubnode.InnerText = "NewPassword123";

       // save XmlDocument back out to a new file name
       xdoc.Save(@"D:\temp\modified.xml");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T09:46:05.610

使用 System.Xml.XmlDocument 非常简单：

```
XmlDocument xmlDocument = new XmlDocument();
xmlDocument.LoadXml(source);
XmlNode password = xmlDocument.SelectSingleNode("//Params[@Key='Password']");
password.Attributes["Value"] = "NewPassword123";
XmlNode value = password.SelectSingleNode("./Value");
value.InnerXml = "NewPassword123";
string source = xmlDocument.OuterXml;
xmlDocument.Save(destPath); 
```

希望这对您有所帮助。

# objective-c - cocos2d mac 项目警告窗口在全屏模式下主窗口下方

> ID：14009924
> 
> 赞同：2
> 
> 时间：2012-12-23T09:31:44.440
> 
> 标签：objective-c, macos, cocos2d-iphone, fullscreen

我正在为我的 mac 游戏使用 cocos2d。在全屏模式下，警报窗口位于主窗口下方，无法点击。这是我的代码：

```
NSAlert* alert = [[NSAlert alloc] init];
alert.alertStyle = NSWarningAlertStyle;
[alert addButtonWithTitle:[Helper getLocalizedStringWithString:@"ok"]];
alert.messageText = [Helper getLocalizedStringWithString:@"you need to play through classic game and expert mode"];

switch ([alert runModal]) {
    case NSAlertFirstButtonReturn:
        break;

    default:
        break;
}    

[alert release]; 
```

我尝试将`[alert window]`s zOrder 设置为 MaxInteger，但仍未显示在顶部。

这里有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T04:07:44.883

我会使用这个 NSAlert 的方法来展示它：

```
- (void)beginSheetModalForWindow:(NSWindow *)window modalDelegate:(id)modalDelegate  
    didEndSelector:(SEL)alertDidEndSelector contextInfo:(void *)contextInfo; 
```

所以你肯定会看到它，因为它附在窗户上。

**编辑**

如果您仍想将其作为单独的面板，请尝试以下操作：

```
[[NSRunningApplication currentApplication] activateWithOptions:NSApplicationActivateIgnoringOtherApps];
[alert runModal]; 
```

# php - 显示计数百分比并计算两个布尔值

> ID：14009925
> 
> 赞同：1
> 
> 时间：2012-12-23T09:31:50.510
> 
> 标签：php, mysql

我有一张学生表，其中包含一些关于他们是否参加教程等的数据。下面有一个摘录。

```
|   id |   studentid | name |  present | 
|   1  |   111       | John |       1  | 
|   2  |   222       | Kate |       0  | 
|   3  |   333       | Matt |       1  | 
|   4  |   111       | John |       0  | 
|   5  |   111       | John |       1  | 
```

我可以计算一下，例如 studentid=111 和 present = 1 以及 studentid=111 和 present = 0 的时间。但我无法解决这两件事。

一世。我可以只做一个计数查询而不是对每个做一个单独的计数吗？目前，我收到了两个单独的查询，例如

studentid=111 并且现在 = 1

```
| name |  present | 
| John |       12 | 
```

studentid=111 并且现在 = 0

```
| name |  absent | 
| John |       4 | 
```

但理想情况下我会喜欢

```
| name |  present |  absent | 
| John |       12 |       4 | 
```

ii.我想看看那些上过不到 75% 课程的学生。我已经阅读了一些关于 avg 函数的内容，但是我不确定如何为此实现一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:12:52.930

列出参加过少于 75% 课程的学生：

```
SELECT
  studentid,
  name, 
  SUM(present) AS present,
  SUM(present = 0) AS absent
FROM your_table
GROUP BY studentid, name
HAVING present < .75 * (present+absent) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T09:37:49.647

你可以这样做：

```
SELECT
  studentid,
  name, 
  SUM(present = 1) AS present,
  SUM(present = 0) AS absent
FROM your_table
GROUP BY studentid, name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/7b2b1/1)

# mongodb - 有没有办法从 MongoDB capped/TTL 集合中监听自动删除？

> ID：14009926
> 
> 赞同：1
> 
> 时间：2012-12-23T09:31:52.303
> 
> 标签：mongodb

有没有办法从 MongoDB 中的 capped 或 TTL 集合中获取在清理操作期间自动删除的文档？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:59:26.150

不。

（我相信您会在 ttl 集合的复制 oplog local.oplog.rs 中找到已删除文档的 _id ——而不是整个文档。但对于有上限的集合却没有。）

# php - PHP 条件语句

> ID：14009931
> 
> 赞同：0
> 
> 时间：2012-12-23T09:32:58.500
> 
> 标签：php

嗨，有人可以帮我解决我在条件陈述中做错了什么。

```
if(isset($_GET['input'] or $_GET['input2'] or $_GET['input3']))
{
  $release=$_GET['input'].$_GET['input2'].$_GET['input3'];
  echo $release;
} 
```

编辑：错误是`syntax error, unexpected T_LOGICAL_OR, expecting ',' or ')'`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-23T09:35:41.930

您需要多次调用`isset`，为要检查的每个参数调用一次！

请记住，它`or`与 具有不同的优先级`||`，您通常需要后者。

您会收到解析错误，因为您将复合表达式传递给`isset`而不是变量。它不是一个常规函数，而是一个单独的语言结构，这就是为什么它有自己的任意规则，正如文档所指出的那样：

> isset() 仅适用于变量，因为传递其他任何内容都会导致解析错误。

* * *

也许您认为 PHP 模拟自然语言，因此您将其解读为`"Is input or input2 or input3 set?"`.

那将是一个误解。*如果*它在语法上是有效的，它首先会在逻辑上将`OR`值放在一起，然后它会将那个*值*传递给——到`isset`那时，与变量的所有连接都将丢失，唯一剩下的`true`就是然后被应用。`false``isset`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T09:36:02.283

```
if(isset($_GET['input']) || isset($_GET['input2']) || isset($_GET['input3'])) 
```

但我实际上认为你需要 AND 在这里，而不是 OR，所以改变 || && 如果我是正确的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-23T09:41:37.253

您必须分别调用`isset`每个参数。`isset()`接受单个参数并相应地响应..

有关更多详细信息，请查看[isset](http://php.net/manual/en/function.isset.php)。

**额外提示：** 如果您在数据库查询中使用这些变量，则必须使用[mysqli_real_escape_string()](http://php.net/manual/en/mysqli.real-escape-string.php)以避免可能的 sql 注入

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-23T12:48:04.493

这个问题的所有当前答案都错过了一个重要特性`isset`：它可以同时检查多个变量。从[手册](http://php.net/manual/en/function.isset.php)：

> 如果提供了多个参数，则仅当设置了所有参数时 isset() 才会返回 TRUE。评估从左到右进行，并在遇到未设置的变量时立即停止。

因此，在这种情况下，您可以执行以下操作：

```
if (isset($_GET['input'], $_GET['input2'], $_GET['input3'])) { 
```

`_GET`只有设置了所有元素，此条件才会通过。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-23T12:43:07.723

这将解决您的错误：

```
if(isset($_GET['input']) or isset($_GET['input2']) or isset($_GET['input3']))
{
    $release=$_GET['input'].$_GET['input2'].$_GET['input3'];
    echo $release;
} 
```

但是因为您正在测试 OR 而不是 AND，所以您只需要其中一个 OR 测试返回 true 以进入 if 条件 - 如果其他 2 个未设置，您仍然会发出通知 /错误。

要检查所有三个都存在，你会做类似的事情

```
if (isset($_GET['input']) && isset($_GET['input2']) && isset($_GET['input3'])) { 
    //...
} 
```

这可能会在没有混乱测试的情况下完成您想要实现的目标：

```
// count will return however many key=>val pairs are in the array, 
// 0 will fail
if (count($_GET)) {
    // an empty array and an empty string to hold iterated results
    $get = array();
    $release = '';
    // iterate through $_GET and append each key=>val pair to the local array, 
    // then concat onto the string
    foreach($_GET as $key=>$val) {
        $get[$key] = $val;
        $release .= $get[$key];
    }
    echo $release;
} 
```

HTH :)

* * *

编辑：正如其他人指出的那样，如果您需要测试以确保设置所有这些数组键，请跳过`foreach`循环并执行以下操作：

```
 // extract imports all of the array keys into the symbol table. 
 // It returns the number of symbls imported, and automatically
 // sets vars using keys for var name: 
 if (extract($_GET) && isset($input,$input2,$input3)) {
     echo $release = $input.$input2.$input3;
 } 
```

（使用传递给 isset 的多个参数。）

*   HTH :)

# java - ActiveMQ 队列编码

> ID：14009934
> 
> 赞同：3
> 
> 时间：2012-12-23T09:33:08.793
> 
> 标签：java, jms, activemq

我正在向 ActiveMQ 队列发送消息。

当我在消息中发送希伯来字母时，它们没有正确显示，而是“？？？” 被呈现。

我确信这是编码的问题。

如何设置队列编码？

现在我正在发送编码为“utf-8”的消息，如下所示：

```
 message = "אבגדהוז";
            TextMessage mes = session.createTextMessage(message);
            System.out.println(mes);
            producer.send(mes); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T13:38:20.650

对于特殊的 chrecters，ActiveMQ 在从管理控制台发送消息时编码为“utf-16”。

当不从控制台发送消息时，应使用“utf-8”编码发送和接收消息。

# mongodb - MongoDB 特定 ID

> ID：14009936
> 
> 赞同：0
> 
> 时间：2012-12-23T09:33:29.077
> 
> 标签：mongodb, mongoid, spring-data, spring-data-mongodb

我找不到如何在 MongoDB 中设置格式“id”。我使用 SpringData Mongo 并看到 id 不正常。我想做 id 作为 postgres "BIGSERIAL" 和自动增量。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T10:50:13.130

MongoDB 不自动递增 ID 是有充分理由的，如果您出于某种原因不需要它们，我建议您不要亲自使用它们。

除此之外，您可以创建一个自动增量 ID，如文档中所示：http: [//docs.mongodb.org/manual/tutorial/create-an-auto-incrementing-field/](http://docs.mongodb.org/manual/tutorial/create-an-auto-incrementing-field/)

它不会是“BIGSERIAL”，但会自动递增（前提是您管理它......）。

# ruby-on-rails - 在页面的最底部包含 javascript 文件

> ID：14009940
> 
> 赞同：6
> 
> 时间：2012-12-23T09:34:56.007
> 
> 标签：ruby-on-rails, ruby, asset-pipeline

我有一个 Rails 应用程序。还有一个 javascript ( `javascript1.js`) 文件必须包含在每个视图的最底部。我把它放到 /assets/javascripts 文件夹中。`Application.js`包含以下代码

```
//= require jquery
//= require jquery_ujs
//= some other files

//= require_directory . 
```

即使不包含`javascript1.js`在`Application.js`，它也会自动包含，不是吗？

那么我怎么能做我想做的事呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-23T09:41:18.570

单独定义、包含和执行您的 javascript。

这是我要做的：

*   将您的代码包装`javascript1.js`在一个函数中。现在解释javascript文件的时间并不重要，因为解释该文件只是添加一个函数供以后使用
*   将“javascript_footer”视图添加到布局中（例如通过`render`call 或 a `javascript_include_tag`），然后自动包含在每个视图中
*   在该页脚中，调用`javascript1.js`.

*回应第一条评论：*

当然，您可以跳过第 1 步和第 3 步，并将 javascript 添加到您的`layouts/application.html.erb`使用中，例如

```
<%= javascript_include_tag "javascript1" %> 
```

（假设您正在使用 erb 模板并假设文件位于该`javascript_include_tag`方法会自动找到它的位置（请参阅[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)）。

*针对第二条评论：*

诚然，我对您的第一条评论的回复并没有解决这个问题。没有简单的方法可以从资产管道中排除文件，因为清单文件明确列出了要*包含的*内容。一个解决方案是移动除`javascript1.js`to`assets/javascripts/all`和 change `//= require_directory .`to之外的所有内容`//= require_directory all`。另一个丑陋但实用的解决方案是`//= require_self`在底部添加并将内容添加`javascript1.js`到`application.js`

# flash - Flex 使用 assql 连接数据库，Flex - 安全沙箱违规

> ID：14009941
> 
> 赞同：0
> 
> 时间：2012-12-23T09:35:06.897
> 
> 标签：flash, apache-flex, crossdomain.xml, cross-domain-policy

我编写了一个连接到本地数据库的小型 flex 项目

代码如下：

```
 _dbData=new DataBaseData();
    _dbData.username="root";
    _dbData.password="woxnsk";
    _dbData.host="192.168.2.225";
    _dbData.port=3306;
    _dbData.database="query";
    _db=new MyDataBase(_dbData);
    _db.addEventListener(Event.CONNECT, onConnected);
    _db.connect();

    _isDBConnecting=true; 
```

该项目在 flex builder 中运行良好，然后我将其部署在我的 wamp 服务器中，但出现了问题。

当我使用 localhost/myproject/login.html 之类的 url 时，我可以访问数据库，但是如果我将 localhost 更改为 127.0.0.1 或 ip 192.168.2.225，它无法连接到数据库，并且错误是违反安全沙箱。

> 错误 #2044：未处理的 ioError：文本=错误 #2048：违反安全沙箱。：http: [//192.168.2.225/bin-debug/QuestionCollector.swf](http://192.168.2.225/bin-debug/QuestionCollecter.swf)无法从 192.168.2.225:3306 加载数据

我已将 crossdomain.xml 放在服务器的根目录中（C:\wamp\www 或 C:\apache-tomcat-6.0.35\webapps\ROOT），crossdomain.xml 文件为：

```
 <xml version="1.0"?>
    <cross-domain-policy>
        <allow-access-from domain="*" to-ports="*" />
    </cross-domain-policy> 
```

它不起作用....所以有什么问题吗？谁能帮帮我~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:05:31.547

1）您可以检查`allowScriptAccess`和`allowNetworking`选项将您的 swf 嵌入页面：

[http://livedocs.adobe.com/flex/3/html/help.html?content=wrapper_13.html](http://livedocs.adobe.com/flex/3/html/help.html?content=wrapper_13.html)

确保授予对您的 swf 的不受限制的访问权限。

`url`2）您可以从应用程序的属性中提取您的服务器地址。

3）您可以查看应用程序的请求`Charles`或`HTTPAnalyzer`发生的情况，`crossdomain.xml`以及 wamp 是否使该文件可用于所有 IP。

4) 您的数据库是否允许非本地连接？

# actionscript-3 - AS3 中动态属性的隐式 getter 和 setter？

> ID：14009954
> 
> 赞同：0
> 
> 时间：2012-12-23T09:37:31.893
> 
> 标签：actionscript-3, getter-setter

定义 AS3 类时，您可以使用隐式 getter 和 setter 调用函数以进行简单的属性获取/设置操作。例如，我可以像这样创建一个温度类：

```
public var celsius:Number;

public function get fahrenheit():Number {
    return 9/5 * celsius + 32;
}

public function set fahrenheit(fahrenheit:Number):void {
    celsius = 5/9 * (fahrenheit - 32);
} 
```

然后，我可以像任何其他属性一样获取/设置华氏温度：

```
temperature.fahrenheit = 69.2; 
```

这真的很有用，但据我所知，它只适用于类定义中声明的属性。但是，我发现能够在动态创建的属性上定义 getter 和 setter 非常有用。像这样的东西：

```
var obj:Object = new Object();
obj._foo = "bar";
obj.foo = function get () { return this._foo; };
obj.foo = function set (foo:String) { this._foo = foo; }; 
```

不幸的是，这样的语法不存在，所以我的问题是：是否可以在 AS3 中动态创建属性 getter 和 setter？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T17:12:33.260

就像一个练习一样，还有另一种方法*可以*完成类似的事情——尽管不是直接等效的——还有一个“间接”。考虑以下代码

```
class DynamicProperty {

    private var _getter:Function, _setter:Function;
    private var _source:*, _prop:String;

    public function DynamicProperty(source:*, prop:String, getter:Function, setter:Function):void {
        _getter = getter;
        _setter = setter;
        _source = source;
        _prop = prop;
    }

    public function get value():* {
        return _getter(_source[_prop]);
    }

    public function set value(val:*):void {
        _source[_prop] = _setter(val);
    }
} 
```

这个小类接受一个实例、一个属性的名称，然后是两个函数（一个 getter 和一个 setter）。它只提供一个名为“value”的公共属性。公共 getter 和 setter 由传入的函数支持。

然后要使用它们，您可以执行以下操作：

```
 var data:Object = {
           celsius: 0
       };

       data.kelvin = new DynamicProperty(data,"celsius", 
           function(v:Number):Number { return v + 273.15; }, 
           function(v:Number):Number { return v - 273.15; }); 
```

然后访问`kelvin`，你会使用：

```
data.kelvin.value 
```

和

```
data.kelvin.value = 0; // absolute zero 
```

现在，我并不是建议它是一种很好的方法，但它是我能想到的在语言限制范围内最接近的方法。可以进行一些明显的改进，即将传入的 getter 和 setter 抽象为静态方法以供重用。另一件可能受益的事情是，由于 ActionScript 不支持用户泛型，因此创建特定类来强类型化`value`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T21:01:29.003

您可以查看 Proxy 类 (http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Proxy.html) 来实现这一点。当然，这样的 getter 和 setter 没有智能感知。此外，您需要扩展 Proxy 类，因此任何其他适合该设计的继承都无法使用此类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T09:51:17.210

不幸的是，这是不可能的。仅使用自定义的旧式设置器和获取器，例如`setFahrenheit(value:int)`和`getFahrenheit():int`

# python - Django manage.py 返回 AttributeError

> ID：14009959
> 
> 赞同：0
> 
> 时间：2012-12-23T09:37:55.837
> 
> 标签：python, django, ubuntu

我是 Django 的新手，我正在按照有关启动和运行项目的说明进行操作。我遵循的说明告诉我创建一个项目，`django-admin.py startproject`然后在创建的目录中导航，并尝试`python manage.py help`确保一切正常运行。但是，运行该命令会溢出此错误：

```
Traceback (most recent call last):
 File "manage.py", line 10, in <module>
  execute_from_command_line(sys.argv)
 File "/var/lib/python-support/python2.5/django/core/management.py", line 1522, in execute_from_command_line
  parser = DjangoOptionParser(usage=get_usage(action_mapping), version=get_version())
 File "/var/lib/python-support/python2.5/django/core/management.py", line 1503, in get_usage
  available_actions = action_mapping.keys()
AttributeError: 'list' object has no attribute 'keys' 
```

有人可以告诉我发生了什么事吗？谢谢。这是来自 Ubuntu 存储库中全新安装的 django。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T10:52:32.557

你没有说你运行的是哪个版本的 Ubuntu，但由于你运行的是 Python 2.5，它可能已经很老了。

同样，您从 repo 安装的 Django 版本可能很旧并且可能不受支持。

我会尝试另一种安装方法，例如 pip（使用 virtualenv 获得奖励积分），以便您获得最新的 Django 版本。

当前的 Django 1.4 支持 Python 2.5，但下一版本 1.5 需要 Python 2.6。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T04:51:48.283

我想到了。对于遇到此问题的其他任何人，这就是发生的事情：

事实证明，我的系统上安装了多个版本的 python - pip 配置为使用 python2.7，而默认的 bash python 命令配置为使用 python 2.5。因此，如果您遇到此问题，请检查安装了哪个版本的 python django 并使用该版本。在我的具体情况下，更改命令以`python2.7 manage.py help`使其运行良好。

感谢帮助过的人！

# wpf - 解析 XML 文件并收集想要的值

> ID：14009962
> 
> 赞同：0
> 
> 时间：2012-12-23T09:38:28.803
> 
> 标签：wpf, xml-parsing

我尝试解析一个 XML 文件并从中收集所需的值。我有以下 XML：

```
<?xml version="1.0"?>
<TDXItem>
    <PROJECT_NAME name="Project_MNG_Test">
            <PROJECT_ID>1022</PROJECT_ID>
            <DOMAIN_NAME>PROJECTS_MNG</DOMAIN_NAME>
            <DB_NAME>projects_mng_project_mng_test_</DB_NAME>
    </PROJECT_NAME>
    <PROJECT_NAME name="Project_MNG_Test1">
            <PROJECT_ID>1023</PROJECT_ID>
            <DOMAIN_NAME>PROJECTS_MNG</DOMAIN_NAME>
            <DB_NAME>projects_mng_project_mng_test1_</DB_NAME>
    </PROJECT_NAME>
</TDXItem> 
```

我尝试了很多代码，最近的代码如下：

```
public static void RunQuery(){
            string UserName = null;
            string xmlURI = "Sites_Name.xml";
            XDocument doc = XDocument.Load(xmlURI);
            var field = doc.Descendants("PROJECT_NAME").Where(x => (string)x.Attribute("name") == "PROJECT_MNG_Test").FirstOrDefault();
            if (field != null)
            {
        // Use value here                    
        string value = (string)field.Element("DB_NAME");

             }    
 } 
```

但我的价值一直在变空，我尝试了很多约定俗成的工作。我知道这是我的错，但我不知道在哪里，在我的代码中或在我构建 XML 文件的方式中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T10:07:03.093

您不应在此处指定命名空间，例如使用：

```
var field = doc.Descendants("PROJECT_NAME")
   .Where(x => (string)x.Attribute("name") == "Project_MNG_Test").FirstOrDefault(); 
```

# c# - C#如何创建一个构造函数来初始化对列表框的引用，然后启动一个新的arrayList？

> ID：14009963
> 
> 赞同：0
> 
> 时间：2012-12-23T09:38:57.943
> 
> 标签：c#, reference, listbox

我有一个表单，在表单里面有一个叫做 lstbox 的列表框，我还有另一个叫做 Test 的类，在这个 Test 类中我怎么能做到标题中的上述要求。

在公众里面`Test()`，我需要在这个（ ）

我有另一个类`Data`，我还需要`ArrayList`在这个 Test 类中创建一个来存储大量数据对象......是吗`Data data = new Data();`？？？

```
 namespace TEST

{

 class Test

    {
       Data data = new Data(); ?????????ArrayList store Data object.

       public Test()
       {

       }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:42:06.257

如果您是 C# 新手，我会从*避免*使用GUI 开始。是的，它们在视觉上是有益的——但是 GUI 编码的许多方面会让你更难学习 C#。我建议你从简单的控制台应用程序开始——了解集合、IO 和语言特性。

除此之外，您的问题不是很清楚，但我怀疑您只需要将代码放入构造函数中，听起来您还需要声明另一个字段：

```
class Test
{
    private ArrayList list;

    public Test()
    {
        list = new ArrayList(); // You could initialize at the point of declaration, too
        list.Add(new Data());
    } 
} 
```

我还*强烈*建议您使用泛型`List<T>`类型而不是非泛型`ArrayList`类型。（早在 2005 年，非泛型集合几乎完全被泛型集合所取代。）您可能还希望将变量设为只读，并且可以使用*集合初始化器*来初始化列表：

```
class Test
{
    // The initialization could go in the constructor if you wanted...
    private List<Data> list = new List<Data>{ new Data() };

    public Test()
    {
    } 
} 
```

（顺便说一下，列表框在哪里出现的地方还不清楚......）

# r - 根据 ID 将频率表与现有数据框合并

> ID：14009965
> 
> 赞同：1
> 
> 时间：2012-12-23T09:39:32.213
> 
> 标签：r, dataframe

### 我有的：

根据我最初的观察......</p>

```
video_id  user_id keyword
1         1       foo
2         1       bar
3         1       baz
4         1       yak
1         2       foo
2         2       bar
3         2       blah
4         2       yak
1         3       foo
2         3       bar
3         3       blah
4         3       yak 
```

…我有一个频率表（称为`tab`），它以我想要的确切格式显示，例如

```
video_id  foo bar baz yak blah
1         4   0   0   0   0
2         0   4   0   0   0
3         0   0   2   0   2
4         0   0   0   4   0 
```

我想`data`根据 ID 列将此表与现有数据框（称为 ）合并。因此，例如，它还包含另外两列：

```
video_id  col1  col2
1         123   412
2         652   633
3         749   144
4         1738  1763 
```

### 我需要的：

我需要根据视频ID合并频率表和现有数据帧。请注意，它不一定是排序的，所以我不能只是`cbind`它们。这是我需要的结果：

```
video_id  col1  col2  foo bar baz yak blah
1         123   412   4   0   0   0   0
2         652   633   0   4   0   0   0
3         749   144   0   0   2   0   2
4         1738  1763  0   0   0   4   0 
```

现在，我知道我可以得到这样的数据框矩阵：

```
as.data.frame.matrix(table(…)) 
```

但是这个矩阵缺少`video_id`列，当我只是查看表格时，它实际上是显示的。那么，我该如何获取仍然包含`video_id`列或行名称的数据框呢？

我需要`video_id`列首先出现在数据框中，然后是原始列，*然后*是附加的表格数据，如上面的示例所示。

### 我试过的：

*   我知道我可以通过 获取表的行名`rownames(table(…))`，并且可以得到我想要的结果

    ```
    cbind(data.frame(video_id=rownames(tab)), as.data.frame.matrix(tab)) 
    ```

    但这对我来说似乎不够干净（足够）。

*   直接合并

    ```
    merge(data, as.data.frame.matrix(tab)) 
    ```

    给了我所有的结果，但是`video_id`列在表格数据和原始数据之间，所以顺序不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T12:11:42.503

我做了什么：

```
data <- read.table(text = "video_id  col1  col2
1         123   412
2         652   633
3         749   144
4         1738  1763", header = TRUE)

tab <- read.table(text = "video_id  user_id keyword
1         1       foo
2         1       bar
3         1       baz
4         1       yak
1         2       foo
2         2       bar
3         2       blah
4         2       yak
1         3       foo
2         3       bar
3         3       blah
4         3       yak", header = TRUE)

tt <- aggregate(keyword ~ video_id, data = tab, FUN = table)
mrg <- merge(data, tt)
mrg

  video_id col1 col2 keyword.bar keyword.baz keyword.blah keyword.foo keyword.yak
1        1  123  412           0           0            0           3           0
2        2  652  633           3           0            0           0           0
3        3  749  144           0           1            2           0           0
4        4 1738 1763           0           0            0           0           3 
```

现在我们有了“奇怪”的列名。如果你不能忍受，这里有一个“黑客”。

```
tmp <- data.frame(mrg$keyword)
mrg$keyword <- NULL
mrg <- cbind(mrg, tmp)

  video_id col1 col2 bar baz blah foo yak
1        1  123  412   0   0    0   3   0
2        2  652  633   3   0    0   0   0
3        3  749  144   0   1    2   0   0
4        4 1738 1763   0   0    0   0   3 
```

*编辑*

这是另一种方式：

```
tt2 <- tapply(X = tab$keyword, INDEX = tab$video_id, FUN = table, simplify = FALSE)
video_ajdi <- factor(names(tt2))
tt2 <- cbind(video_id = video_ajdi, do.call("rbind", tt2))
mrg <- merge(data, tt2)
mrg

  video_id col1 col2 bar baz blah foo yak
1        1  123  412   0   0    0   3   0
2        2  652  633   3   0    0   0   0
3        3  749  144   0   1    2   0   0
4        4 1738 1763   0   0    0   0   3 
```

*编辑2*

还有一个：

```
tt <- aggregate(keyword ~ video_id, data = tab, FUN = table)
tt3 <- do.call("cbind", tt)
merge(data, tt3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T12:21:50.320

这是一种方法，包括`cbind`and `match`：

数据：

```
df1 <- read.table(text="video_id  user_id keyword
1         1       foo
2         1       bar
3         1       baz
4         1       yak
1         2       foo
2         2       bar
3         2       blah
4         2       yak
1         3       foo
2         3       bar
3         3       blah
4         3       yak", header = TRUE)

tab <- table(df1[c("video_id", "keyword")])

        keyword
video_id bar baz blah foo yak
       1   0   0    0   3   0
       2   3   0    0   0   0
       3   0   1    2   0   0
       4   0   0    0   0   3

df2 <- read.table(text="video_id  col1  col2
1         123   412
2         652   633
3         749   144
4         1738  1763", header = TRUE) 
```

这是解决方案：

```
cbind(df2, tab[match(df2$video_id, rownames(tab)), ]) 
```

结果：

```
 video_id col1 col2 bar baz blah foo yak
1        1  123  412   0   0    0   3   0
2        2  652  633   3   0    0   0   0
3        3  749  144   0   1    2   0   0
4        4 1738 1763   0   0    0   0   3 
```

# zend-framework - 教义没有正确映射关系

> ID：14009970
> 
> 赞同：0
> 
> 时间：2012-12-23T09:40:31.173
> 
> 标签：zend-framework, doctrine, doctrine-orm, zend-framework2

我有一个实体，其中包含与另一个实体的 OneToOne 关系：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="tb_promocao")
 */
class Promocao {
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $codigo;

       /**
     * @ORM\OneToOne(targetEntity="Application\Model\Produto\Produto")
     * @ORM\JoinColumn(name="cod_produto", referencedColumnName="codigo")
     */
    private $produto;
}

/**
 * @ORM\Entity
 * @ORM\Table(name="tb_produto")
 */
class Produto {

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $codigo;

        (...)

} 
```

问题是，当我尝试在 Promocao 中提供 fetch 实体时，属性 $produto 未正确填充 Produto 实体。

Produto 实体未正确映射到接收关系的属性上。

> 对象：EntityProxy__CG__\Application\Model\Produto\Produto

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T13:12:57.327

这是正常操作。您加入的模型是延迟加载的，因此当您不调用它时，您将只有一个代理。

您可以修改加载连接模型的类型，将其设置为 EAGER 模式：

```
@ORM\OneToOne(targetEntity="Application\Model\Produto\Produto")
@ORM\JoinColumn(name="cod_produto", referencedColumnName="codigo", **fetch='EAGER'**) 
```

但这里并不是真的推荐，除非你每次都需要这个连接数据。

检查Doctrine文档，对此有很多精确度。

希望这可以帮助。

# javascript - 使用 Django 的客户端 Javascript/JQuery 过滤

> ID：14009975
> 
> 赞同：-1
> 
> 时间：2012-12-23T09:41:17.203
> 
> 标签：javascript, jquery, django, frontend

jQuery 和 Javascript 的新手，但假设我当前正在返回 QuerySet 的 JSON，其中包含员工列表的以下字段（姓名、年龄、位置）：

```
return render_to_response("index.html", {"employees": values}, context_instance = RequestContext(request)) 
```

编写下拉菜单的正确方法是什么，它首先仅列出 JSON 中的不同年龄（即 17、30、43、45），然后呈现第二个下拉菜单，允许我选择名称的员工年龄大于第一个菜单中选择的年龄？我可以通过发出额外的请求来做到这一点，但我不确定如何在客户端使用 js/jQuery 完全做到这一点。此外，如何在不向服务器发出任何额外请求的情况下动态更改第二个下拉菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:49:51.850

如果您有很多员工，我认为首选的方法是向服务器发出额外的请求，看看这些链接：

[http://blog.devinterface.com/2011/02/how-to-implement-two-dropdowns-dependent-on-each-other-using-django-and-jquery/](http://blog.devinterface.com/2011/02/how-to-implement-two-dropdowns-dependent-on-each-other-using-django-and-jquery/)

[http://www.nerdydork.com/dynamic-filtered-drop-down-choice-fields-with-django.html](http://www.nerdydork.com/dynamic-filtered-drop-down-choice-fields-with-django.html)

# c - 我在这个 for 循环中做错了什么？

> ID：14009986
> 
> 赞同：0
> 
> 时间：2012-12-23T09:43:00.820
> 
> 标签：c, random, for-loop, sdl

我正在使用 SDL 编写一段 C 代码，该代码应该用黑色和白色像素填充屏幕......它使用 for 循环填充屏幕和一个随机数来决定每个像素是黑色还是白色。

它开始工作一秒钟，但它慢慢开始显示越来越多的白色像素，直到屏幕完全变白并保持这种状态。我不明白我在这里做错了什么。我让它在控制台中打印 num 中的数字，即使屏幕是白色的，它也会继续显示随机的 1 和 0，所以我认为问题存在于 if else 语句或 for 循环中的某个地方。

这是相关的代码...

```
 /*outside main program loop*/
 17   int x, y, num;
 18   srand(time(0));

 /*inside main program loop*/
 28     for(y=0;y<=480;y++) { 
 29       for(x=0;x<=640;x++) {
 30         num = rand() % 2;
 31         if(num == 0) {
 32           pixelRGBA(screen, x, y, 255, 255, 255, 255);
 33         }
 34         else {
 35           pixelRGBA(screen, x, y, 0, 0, 0, 0);
 36         }
 37       }
 38     } 
 39     SDL_Flip(screen); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T09:45:32.090

两个问题：

```
pixelRGBA(screen, x, y, 0, 0, 0, 0); 
```

RGBA 意味着您有 alpha，并且您已将 alpha 设置为透明，因此它不会渲染任何黑色像素。当 alpha 混合时，像素将乘以 alpha，现有像素乘以逆，然后将两个像素相加。因此，如果 alpha 为零，您将不会获得任何新像素和所有现有像素。

此外，您的循环是 <= 而不仅仅是 <，因此您绘制的像素太多。

```
for(y=0;y<480;y++)
{ 
    for(x=0;x<640;x++)
    {
        num = rand() % 2;
        if(num == 0) {
            pixelRGBA(screen, x, y, 255, 255, 255, 255);
        } else {
            pixelRGBA(screen, x, y, 0, 0, 0, 255);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T09:45:40.083

在一种情况下，您使颜色完全不透明，而在另一种情况下则完全透明。虽然 RGB 值确实应该在一种情况下为 0，在另一种情况下为 255，但我认为这两种情况下的 Alpha 值应该相同。

# maven - Maven 不会警告损坏的 jars

> ID：14009990
> 
> 赞同：0
> 
> 时间：2012-12-23T09:43:27.717
> 
> 标签：maven

我刚刚修复了另一个奇怪的错误。将 spring-core 添加到 pom.xml 后，我在使用 maven 构建项目时出现“找不到对象 scala”。在谷歌上搜索这个错误很长一段时间后，我很高兴尝试使用 Eclipse 构建项目。瞧！它报告说 spring-core jar 已损坏。

所以，我的问题是：为什么 maven 没有报告呢？它不仅可以测试 jar 文件是否有效，还可以检查哈希和。而且我相信它应该检查哈希和。我错过了什么吗？

顺便说一句，这不是唯一的情况，不幸的是我不记得其他几个人的细节。

更新：看起来 checksumPolicy 标签解决了这个问题。但由于某种原因，它不起作用。

更新2：这是重现我最初描述的错误的测试用例：

```
cd "<maven_local_repo>\org\springframework\spring-core\3.1.3.RELEASE"
cp spring-core-3.1.3.RELEASE.jar spring-core-3.1.3.RELEASE.jar.old
#corrupt file manually
dd skip=100 if=spring-core-3.1.3.RELEASE.jar.old of=spring-core-3.1.3.RELEASE.jar
cd "<my_project_dir>"
mvn clean package 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:52:01.650

看看 JBoss Tattletale.我相信它有你正在寻找的东西：

1.  识别 JAR 文件之间的依赖关系
2.  从类路径中查找缺失的类
3.  发现一个类是否位于多个 JAR 文件中
4.  发现同一个 JAR 文件是否位于多个位置 列出每个 JAR 文件需要和提供的内容
5.  验证类的 SerialVersionUID
6.  查找具有不同版本号的类似 JAR 文件
7.  Find JAR files without a version number
8.  Locate a class in a JAR file
9.  Get the OSGi status of your project
10.  Remove black listed API usage

You can integrate it in maven build as explained [here](https://community.jboss.org/thread/149486?_sscc=t).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T09:08:42.980

Maven 检查哈希和。

运行 maven 时，您可以使用命令行选项。
如果校验和不匹配，则构建失败：
-C,--strict-checksums
如果校验和不匹配，则发出警告：
-c,--lax-checksums

# c# - 使用 LINQ to XML 删除项目

> ID：14009993
> 
> 赞同：0
> 
> 时间：2012-12-23T09:44:33.530
> 
> 标签：c#, xml, linq-to-xml

我想使用 LINQ to XML 删除文件中的设备元素

我的文件是这样的

```
<?xml version="1.0" encoding="utf-8"?>
<settings>
  <IncomingConfig>
    <ip>10.100.101.18</ip>
    <port>5060</port>
  </IncomingConfig>
  <Device>
    <username>xxx</username>
    <password>Pa$$w0rd1</password>
    <domain>go</domain>
    <Uri>xxxx@xxx.com</Uri>
  </Device>
   <Device>
    <username>yyy</username>
    <password>Pa$$w0rd1</password>
    <domain>go</domain>
    <Uri>yyyy@yyyy.com</Uri>
  </Device>

</settings> 
```

我正在尝试这个，但它给了我一个`NullReferenceException`

```
public void DeleteDevice(List<Device> devices)
{
    var doc = XDocument.Load(PATH);

    foreach (Device device in devices)
    {
        doc.Element("Settings").Elements("Device").Where(c => c.Element("URI").Value == device.URI).Remove();
    }
    doc.Save(PATH);
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T09:45:58.250

因为这个，你得到了一个例外：

```
c.Element("URI").Value 
```

您的`<Device>`元素没有名为 的元素`<URI>`，因此`c.Element("URI")`返回 null。

您可以将其更改为：

```
c.Element("Uri").Value 
```

但我个人会改变整个方法：

```
public void DeleteDevice(IEnumerable<Device> devices)
{
    var uris = new HashSet<string>(devices.Select(x => x.URI));
    var doc = XDocument.Load(FULL_PATH);
    doc.Element("settings")
       .Elements("Device")
       .Where(c => uris.Contains((string)c.Element("Uri")))
       .Remove();
    doc.Save(PATH);
} 
```

这使用了[`Remove`扩展方法](http://msdn.microsoft.com/en-us/library/bb357554.aspx)，并且通过转换为`string`而不是使用`.Value`，如果有任何元素没有`sipUri`子元素，您将不会得到异常。（如果这代表了一个错误情况，您可能希望使用`.Value`它，这样您就不会继续使用无效数据，请注意。）

（我还将更改`FULL_PATH`和`PATH`标识符以遵循 .NET 命名约定。）

# c# - 如何在 Metro 应用程序中序列化 Windows.Storage.StorageFile

> ID：14009999
> 
> 赞同：5
> 
> 时间：2012-12-23T09:45:29.180
> 
> 标签：c#, windows-8, xml-serialization, microsoft-metro, windows-runtime

我正在开发一个音乐地铁风格的应用程序。我从`music library`想要存储`StorageFile`对象的用户那里获取所有音乐文件，因为我不想一次又一次地检索。为此，我尝试序列化`StorageFile`对象并将其存储到`XML`. 从[这里](https://stackoverflow.com/questions/11118910/how-to-serialize-and-deserliaze-a-dictionarystring-object-in-winrt-metro-app)和[这里](http://www.irisclasson.com/2012/07/09/example-metro-app-winrt-serializing-and-deseralizing-objects-to-storagefile-and-localfolder-using-generics-and-asyncawait-threading/)的示例中， 我尝试生成`XML`文件，但是在创建 XML 文件时会引发异常说

> 无法序列化类型“Windows.Storage.StorageFile”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。

到目前为止，我的代码如下，

```
namespace CloudMusic.AppSettings
{
    [KnownType(typeof(CloudMusic.AppSettings.MusicFileDict))]
    [DataContractAttribute]
    public class MusicFileDict
    {
        [DataMember]
        public object musicStorageFile { get; set; }

        [DataMember]
        public int id { get; set; }
    }
} 
```

从下面的班级我正在生成`XML`

```
class GenerateMusicDict
{    
        private const string filename = "musiclist.xml";
        static private List<MusicFileDict> _data = new List<MusicFileDict>();

        static public List<MusicFileDict> Data
        {
            get { return _data; }
        }
        static async public Task Save<T>()
        {
            await Windows.System.Threading.ThreadPool.RunAsync((sender) => GenerateMusicDict.SaveAsync<T>().Wait(), Windows.System.Threading.WorkItemPriority.Normal);
        }        

        internal static async Task SaveAsync<T>()
        {           
            GenerateMusicDict.GenerateMusicFileDict();           
            try
            {
                StorageFile sessionFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(filename, CreationCollisionOption.ReplaceExisting);
                IRandomAccessStream sessionRandomAccess = await sessionFile.OpenAsync(FileAccessMode.ReadWrite);
                IOutputStream sessionOutputStream = sessionRandomAccess.GetOutputStreamAt(0);

                var sessionSerializer = new DataContractSerializer(typeof(List<MusicFileDict>), new Type[] { typeof(T) });
                sessionSerializer.WriteObject(sessionOutputStream.AsStreamForWrite(), _data);
                await sessionOutputStream.FlushAsync();
            }
            catch (Exception)
            {
            }

        }
        /// <summary>
        /// Generate music file dictonary according to songs ID
        /// </summary>
        /// <param name="musicFileList"></param>
        private static void GenerateMusicFileDict()
        {
            List<StorageFile> music_file_list = MusicFileDict.GetMusicList(); // At this stage i'll get all my music files,GetMusicList() function returns List<StorageFile>
            for (int i = 0; i < music_file_list.Count; i++)
            {
                _data.Add(new MusicFileDict { id = i, musicStorageFile = music_file_list[i]});          
            } 
        }
} 
```

并使用我的主类调用 Save 方法

```
 await GenerateMusicDict.Save<MusicFileDict>(); 
```

在这一行的 SaveAsync() 函数上

```
 sessionSerializer.WriteObject(sessionOutputStream.AsStreamForWrite(), _data); 
```

这是一句`Exception`谚语

> 无法序列化类型“Windows.Storage.StorageFile”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。那么我该如何序列化呢？或者有什么方法可以存储和重复使用。请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:11:05.080

利用 FutureAccessList [http://msdn.microsoft.com/library/windows/apps/BR207457](http://msdn.microsoft.com/library/windows/apps/BR207457)它应该提供您正在寻找的功能。

您可以通过引用文件的路径来检索和访问文件。这些路径可以很容易地存储和序列化（例如作为列表）。

如果您希望您的应用能够访问音乐库之外的用户内容，这也可以缓解您可能遇到的任何权限问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T12:56:09.320

显然，从您的代码来看，您似乎正在尝试将音乐文件序列化到另一个文件中，这有点矫枉过正。因此，与其尝试序列化音乐，不如使用 URI 对其进行引用。

```
[DataContractAttribute]
public class MusicFileDict
{
    [DataMember]
    public Uri MusicFileUri { get; set; }

    [DataMember]
    public int Id { get; set; }
} 
```

然后像这样创建你的对象

```
private static void GenerateMusicFileDict()
{
     List<StorageFile> music_file_list = MusicFileDict.GetMusicList(); 
     for (int i = 0; i < music_file_list.Count; i++)
     {
          StorageFile currentFile = music_file_list[i];

          _data.Add(new MusicFileDict 
                    { 
                        Id = i,
                        MusicFileUri = new Uri(currentFile.Path)
                    });          
     } 
} 
```

如果您需要保留对您可以管理的音乐文件的引用，您可以将音乐文件复制到本地文件夹并引用此 URI 路径。但请记住，音乐文件可能很重，而且存储空间可能很宝贵，尤其是在 WinRT 设备上。

另一方面，**请关闭您的流！**

```
IRandomAccessStream sessionRandomAccess = null;

try
{
    StorageFile sessionFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(filename, CreationCollisionOption.ReplaceExisting);
    sessionRandomAccess = await sessionFile.OpenAsync(FileAccessMode.ReadWrite);
    IOutputStream sessionOutputStream = sessionRandomAccess.GetOutputStreamAt(0);

    var sessionSerializer = new DataContractSerializer(typeof(List<MusicFileDict>), new Type[] { typeof(T) });
    sessionSerializer.WriteObject(sessionOutputStream.AsStreamForWrite(), _data);
    await sessionOutputStream.FlushAsync();
}
catch (Exception)
{
}
finally
{
    sessionRandomAccess.Dispose();
} 
```