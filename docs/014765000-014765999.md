# StackOverflow 问答 14765000-14765999

# wso2 - WSO2 ESB - 通过管理控制台功能添加数据库

> ID：14765008
> 
> 赞同：1
> 
> 时间：2013-02-08T03:00:15.177
> 
> 标签：wso2, wso2esb, wso2carbon

我是 WSO2 ESB 的新手，然后我按照 WSO2 ESB 产品文档页面上描述的初始步骤开始。在第一个示例成功运行后，我陷入了尝试使用数据库机制的困境。

根据 WSO2 ESB 文档 - [http://docs.wso2.org/wiki/display/ESB460/Databases](http://docs.wso2.org/wiki/display/ESB460/Databases) - 必须安装管理控制台功能才能添加新数据库。因此，我尝试通过创建多个存储库（[http://dist.wso2.org/p2/carbon/releases/3.0.0](http://dist.wso2.org/p2/carbon/releases/3.0.0)到 4.0.5 甚至本地版本 4.0来将该功能添加到我的 ESB 安装中） .5 p2-repo.zip) ，但毕竟我没有成功找到管理控制台功能，所以我没有数据库选项。即使添加了数据源功能，数据库选项也没有出现。

我在这里想念什么？文档是否已过时？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:50:22.563

Otmar，您称为管理控制台功能的特定数据库配置功能已重命名为“rss manager”。请在 p2 功能存储库中查找具有该名称的功能。

# php - preg_replace with style format issue

> ID：14765013
> 
> 赞同：0
> 
> 时间：2013-02-08T03:00:46.923
> 
> 标签：php

I have this text stored in my databse:

```
 <div style=\"font-family:arial black;font-size:20px;text-align:center;color:#3333ff;font-weight:700;\">testing editor</div> 
```

now when trying to process it to my website editor I'm using this function:

```
function striplen($Text)
{
// strip slashes
$Text = stripslashes($Text);
// find the errors quote
$errors = array("#\r\n#", '#"#');
// find the correct self content
$corrected = array('\r\n', '');

return preg_replace($errors, $corrected, $Text);
} 
```

this out put the text like this:

```
<div style=font-family:arial black;font-size:20px;text-align:center;color:#3333ff;font-weight:700;>testing editor</div> 
```

as you can see the double quotes from the style tag disappeared?

any suggestions?

many thanks,

# opengl-es - WebGL 中的 OpenGL 点功能

> ID：14765017
> 
> 赞同：4
> 
> 时间：2013-02-08T03:01:26.397
> 
> 标签：opengl-es, webgl

在 OpenGL 中，您可以像这样~~绘制~~定义点：

```
glBegin(GL_POINTS);
for(float theta=0, radius=60.0; radius>1.0; theta+=0.1, radius-=0.3){
   glColor3f(radius/60.0,0.3,1-(radius/60.0));
   glVertex2i(200+radius*cos(theta),200+radius*sin(theta));
}
glEnd(); 
```

你如何在 WebGL 中完成同样的功能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T11:51:22.010

你写的代码除了定义一些点之外真的没什么用。在 WebGL 中做到这一点可以这样做

```
var colors = [];
var verts = [];
var theta=0 
for(var radius=60.0; radius>1.0; radius-=0.3) {
  colors.push(radius/60.0, 0.3, 1-(radius/60.0));
  verts.push(200+radius*Math.cos(theta),200+radius*Math.sin(theta));
  theta+=0.1;
}
var numPoints = colors.length / 3; 
```

这将生成 2 个 JavaScript 数组。然后你需要把它们放到 WebGLBuffers

```
var colorBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);

var vertBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW); 
```

之后，尽管您需要编写一个着色器并进行设置。着色器是一个巨大的话题。对于您的特定数据，我猜这些着色器会做

顶点着色器

```
uniform mat4 u_matrix;
attribute vec4 a_vertex;
attribute vec4 a_color;
varying vec4 v_color;

void main() {
  // Set the size of the point
  gl_PointSize = 3.0;

  // multiply each vertex by a matrix.
  gl_Position = u_matrix * a_vertex;

  // pass the color to the fragment shader
  v_color = a_color;
} 
```

片段着色器

```
precision mediump float;
varying vec4 v_color;
void main() {
  gl_FragColor = v_color;
} 
```

接下来，您需要初始化着色器和参数。我将假设我将着色器放在 ID 为“vshader”和“fshader”的脚本标签中，并[使用此样板代码](http://greggman.github.com/webgl-fundamentals/webgl/lessons/webgl-boilerplate.html)加载它们。

```
var program = createProgramFromScriptTags(gl, "vshader", "fshader");
gl.useProgram(program);

// look up the locations for the inputs to our shaders.
var u_matLoc = gl.getUniformLocation(program, "u_matrix");
var colorLoc = gl.getAttribLocation(program, "a_color");
var vertLoc = gl.getAttribLocation(program, "a_vertex");

// Set the matrix to some that makes 1 unit 1 pixel.
gl.uniformMatrix4fv(u_matLoc, false, [
  2 / width, 0, 0, 0,
  0, 2 / height, 0, 0,
  0, 0, 1, 0,
  0, 0, 0, 1
]);

// Tell the shader how to get data out of the buffers.
gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
gl.vertexAttribPointer(colorLoc, 3, gl.FLOAT, false, 0, 0);
gl.enableVertexAttribArray(colorLoc);
gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
gl.vertexAttribPointer(vertLoc, 2, gl.FLOAT, false, 0, 0);
gl.enableVertexAttribArray(vertLoc); 
```

最后画点

```
gl.drawArrays(gl.POINTS, 0, numPoints); 
```

这是一个片段

```
var canvas = document.getElementById("c");
var gl = canvas.getContext("webgl");
if (!gl) {
    alert("no WebGL");
    //return;
}

var colors = [];
var verts = [];
var theta=0 
for(var radius=160.0; radius>1.0; radius-=0.3) {
    colors.push(radius/160.0, 0.3, 1-(radius/160.0));
    verts.push(radius*Math.cos(theta),radius*Math.sin(theta));
    theta+=0.1;
}
var numPoints = colors.length / 3;

var colorBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);

var vertBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verts), gl.STATIC_DRAW);

var program = twgl.createProgramFromScripts(gl, ["vshader", "fshader"]);
gl.useProgram(program);

// look up the locations for the inputs to our shaders.
var u_matLoc = gl.getUniformLocation(program, "u_matrix");
var colorLoc = gl.getAttribLocation(program, "a_color");
var vertLoc = gl.getAttribLocation(program, "a_vertex");

function draw() {
    gl.clear(gl.COLOR_BUFFER_BIT);
    gl.clearColor(1.0, 1.0, 1.0, 1.0);

 // Set the matrix to some that makes 1 unit 1 pixel.
gl.uniformMatrix4fv(u_matLoc, false, [
    2 / canvas.width, 0, 0, 0,
    0, -2 / canvas.height, 0, 0,
    0, 0, 1, 0,
    0, 0, 0, 1
]);

    gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);
    gl.vertexAttribPointer(colorLoc, 3, gl.FLOAT, false, 0, 0);
    gl.enableVertexAttribArray(colorLoc);
    gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);
    gl.vertexAttribPointer(vertLoc, 2, gl.FLOAT, false, 0, 0);
    gl.enableVertexAttribArray(vertLoc);

    gl.drawArrays(gl.POINTS, 0, numPoints);

    requestAnimationFrame(draw, canvas);
}

draw();
```

```
canvas { border: 1px solid black; }
```

```
<script src="https://twgljs.org/dist/3.x/twgl.min.js"></script>
<script id="vshader" type="whatever">
    uniform mat4 u_matrix;
    attribute vec4 a_vertex;
    attribute vec4 a_color;
    varying vec4 v_color;

    void main() {
      // Set the size of the point
      gl_PointSize = length(a_vertex) * 0.1;

      // multiply each vertex by a matrix.
      gl_Position = u_matrix * a_vertex;

      // pass the color to the fragment shader
      v_color = a_color;
    }    
</script>
<script id="fshader" type="whatever">
precision mediump float;
varying vec4 v_color;
void main() {
    gl_FragColor = v_color;
}
</script>
<canvas id="c" width="400" height="400"></canvas>
```

您可能会发现[这些 WebGL 教程很有帮助](https://webglfundamentals.org)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T04:41:41.893

WebGL 基于 OpenGL ES 2.0（请参阅[此处](https://www.khronos.org/registry/webgl/specs/1.0/)），它放弃了立即模式支持。

> 本规范描述了 HTML 5 画布元素 [CANVAS] 的附加渲染上下文和支持对象。此上下文允许使用非常符合 OpenGL ES 2.0 API 的 API 进行渲染。

您需要使用顶点缓冲区来存储顶点数据。有关在保留模式下如何工作的很好的解释，请参见[此处](http://greggman.github.com/webgl-fundamentals/webgl/lessons/webgl-how-it-works.html)^(1 。)还有一个很好的小例子可以帮助您入门[。](http://greggman.github.com/webgl-fundamentals/webgl/webgl-fundamentals.html)

¹：向在这里发布此内容的人表示敬意。

# for-loop - Directory list for FOR loop in msdos .bat file

> ID：14765023
> 
> 赞同：4
> 
> 时间：2013-02-08T03:02:03.457
> 
> 标签：for-loop, batch-file, directory, dos

I am looking how to get list of all directories to be used in FOR loop.

So far I have work around:

```
set folderList = (folder1 folder2 folder3 folder4)
FOR %%i in %folderList% do zip %%i D:\...my_path...\%%i\*.* 
```

is it possible that folderList would be generated dynamically ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T08:57:06.883

假设您要列出 c:\temp 的子目录

```
for /f %%i in ('dir c:\temp /ad /b') do echo %%i 
```

这将列出 c:\temp 的文件夹名称，如果要递归获取它，只需将 /s 添加到 dir 命令：

```
for /f %%i in ('dir c:\temp /ad /b /s') do echo %%i 
```

至于@dbenham 评论（谢谢）要正确处理带空格的目录，只需将 tokens=* 添加到 for ：

```
 for /f "tokens=*" %%i in ('dir c:\temp /ad /b') do echo %%i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:11:13.260

请尝试以下代码：

```
for /d %%F in ("d:\...my_path...\*") do zip "%%~nxF" "%%F\*.*" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-25T22:08:16.163

我不确定有什么不同，但上面列出的双 %% 都无法正常工作。

但是，这对我有用：

```
for /f "tokens=*" %i in ('dir c:\temp /ad /b') do echo %I 
```

# sed - 缩短 sed 命令 - 使用它来制作星号呼叫日志

> ID：14765029
> 
> 赞同：0
> 
> 时间：2013-02-08T03:02:55.540
> 
> 标签：sed, asterisk

我知道星号以 csv 文件的形式创建自己的通话记录。出于我的目的，我需要如下所示格式化的通话记录。我用：

`ls -l /var/spool/asterisk/monitor`作为我的通话记录的基础，这会产生：

```
-rw------- 1 asterisk asterisk  112684 2013-02-07 17:24 20130207-172424-+15551235566-IN.wav
-rw------- 1 asterisk asterisk      44 2013-02-07 17:53 20130207-175311-+15554561122-IN.wav
-rw------- 1 asterisk asterisk 2019564 2013-02-07 18:00 20130207-175828-15554561122-OUT.wav
-rw------- 1 asterisk asterisk      44 2013-02-07 22:09 20130207-220805-15554561122-OUT.wav
-rw------- 1 asterisk asterisk      44 2013-02-07 22:12 20130207-221204-15551235566-OUT.wav
-rw------- 1 asterisk asterisk  111084 2013-02-07 22:13 20130207-221255-15551235566-OUT.wav
-rw------- 1 asterisk asterisk  364844 2013-02-07 22:39 20130207-223843-15558271212-OUT.wav
-rw------- 1 asterisk asterisk 4279404 2013-02-07 23:53 20130207-234836-5552785454-OUT.wav
-rw------- 1 asterisk asterisk      44 2013-02-08 00:00 20130208-000026-+15559813232-IN.wav 
```

我需要帮助的部分是下面的命令。它可以工作并产生我想要的确切结果；但是，它对我来说似乎很笨重。可以缩短吗？

变量

```
YESTER=$(date -d "-24 hours" +"%Y-%m-%d-%H%M")
TODAY=$(date +"%Y-%m-%d-%H%M_UTC") 
```

创建通话记录（我想更改的命令）

```
ls -l /var/spool/asterisk/monitor/ |grep '\.wav'|awk '{print $8 " " $5/1000000}'|sed -e 's/4\.4e\-05/NOT RECORDED/g' -e 's/\.wav//g' -e 's/-/ /g' -e 's/OUT/OUT - Approx Minutes:/g' -e 's/IN/IN - Approx Minutes:/g' -e 's/\(\.[0-9]\).*$/\1/g' -e 's/^.\{15\}/& UTC -/' -e 's/^.\{13\}/&:/' -e 's/^.\{11\}/&:/' -e 's/^.\{6\}/&-/' -e 's/^.\{4\}/& /' -e 's/+//g' > /var/spool/asterisk/monitor/call_logs/${YESTER}__${TODAY}-call-log.txt 
```

为了便于阅读，这里是由行分隔的命令（不带 | ）：

```
ls -l /var/spool/asterisk/monitor/
grep '\.wav'
awk '{print $8 " " $5/1000000}'
sed -e 's/4\.4e\-05/NOT RECORDED/g' 
-e 's/\.wav//g' 
-e 's/-/ /g' 
-e 's/OUT/OUT - Approx Minutes:/g'
-e 's/IN/IN - Approx Minutes:/g' 
-e 's/\(\.[0-9]\).*$/\1/g' 
-e 's/^.\{15\}/& UTC -/' 
-e 's/^.\{13\}/&:/' 
-e 's/^.\{11\}/&:/' 
-e 's/^.\{6\}/&-/' 
-e 's/^.\{4\}/& /' 
-e 's/+//g' 
> /var/spool/asterisk/monitor/call_logs/${YESTER}__${TODAY}-call-log.txt 
```

输出：

```
2013 02-07 17:24:24 UTC - 15551235566 IN - Approx Minutes: 0.1
2013 02-07 17:53:11 UTC - 15554561122 IN - Approx Minutes: NOT RECORDED
2013 02-07 17:58:28 UTC - 15554561122 OUT - Approx Minutes: 2.0
2013 02-07 22:08:05 UTC - 15554561122 OUT - Approx Minutes: NOT RECORDED
2013 02-07 22:12:04 UTC - 15551235566 OUT - Approx Minutes: NOT RECORDED
2013 02-07 22:12:55 UTC - 15551235566 OUT - Approx Minutes: 0.1
2013 02-07 22:38:43 UTC - 15558271212 OUT - Approx Minutes: 0.3
2013 02-07 23:48:36 UTC - 5552785454 OUT - Approx Minutes: 4.2
2013 02-08 00:00:26 UTC - 15559813232 IN - Approx Minutes: NOT RECORDED 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T23:48:40.010

```
$ cat tst.awk
{
   mins = $5 / 1000000
   mins = ( mins == "4.4e-05" ? "NOT RECORDED" : sprintf("%.1f",mins) )

   split($8,fname,/-\+?|\./)
   date = fname[1]
   time = fname[2]
   nrs  = fname[3]
   dir  = fname[4]

   printf "%s %s-%s ",substr(date,1,4),substr(date,5,2),substr(date,7,2)
   printf "%s:%s:%s UTC - ",substr(time,1,2),substr(time,3,2),substr(time,5,2)
   printf "%s %s - Approx Minutes: %s\n",nrs,dir,mins
}

$ awk -f tst.awk file
2013 02-07 17:24:24 UTC - 15551235566 IN - Approx Minutes: 0.1
2013 02-07 17:53:11 UTC - 15554561122 IN - Approx Minutes: NOT RECORDED
2013 02-07 17:58:28 UTC - 15554561122 OUT - Approx Minutes: 2.0
2013 02-07 22:08:05 UTC - 15554561122 OUT - Approx Minutes: NOT RECORDED
2013 02-07 22:12:04 UTC - 15551235566 OUT - Approx Minutes: NOT RECORDED
2013 02-07 22:12:55 UTC - 15551235566 OUT - Approx Minutes: 0.1
2013 02-07 22:38:43 UTC - 15558271212 OUT - Approx Minutes: 0.4
2013 02-07 23:48:36 UTC - 5552785454 OUT - Approx Minutes: 4.3
2013 02-08 00:00:26 UTC - 15559813232 IN - Approx Minutes: NOT RECORDED 
```

所以就这样做：

```
ls -l /var/spool/asterisk/monitor/*.wav | awk -f tst.awk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:07:18.663

尽管在您的情况下可行，但您通常应该避免[解析`ls`](http://mywiki.wooledge.org/ParsingLs). 我更希望看到一个解决方案，`find`而不是使用。如果您有权访问`GNU awk`，那么您可以大大简化您的管道。像这样运行：

```
awk -f script.awk <(find /var/spool/asterisk/monitor/ -maxdepth 1 -type f -name "*.wav" -printf "%p %s\n" | sort -n) 
```

内容`script.awk`：

```
BEGIN {
    t = systime()
    y = t - 60 * 60 * 24

    t = strftime("%Y-%m-%d-%H%M_UTC", t)
    y = strftime("%Y-%m-%d-%H%M", y)
}

{
    p = "^..(....)(..)(..)-(..)(..)(..)-\\+?([^-]*)-([^\\.]*).*$"
    r = "\\1 \\2-\\3 \\4:\\5:\\6 UTC - \\7 \\8 - Approx Minutes:"

    s = ($2 != 44 ? sprintf("%.1f", $2/1000000) : "NOT RECORDED")

    print gensub(p, r, "", $1) FS s > y "__" t "-call-log.txt"
} 
```

在我的测试中，这会生成一个包含您所需输出的日志文件。因为您现在正在使用`find`，所以如果您的文件名开始包含空格或换行符，则可以轻松修改该方法。请让我知道情况如何。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:13:50.937

你可以把所有的格式化都放到AWK里，为什么要用sed？

为了简单起见，请使用

```
[root@gleb monitor]# ls -l --time-style="+%Y-%m-%d %H:%M -"
-rw-r--r-- 1 asterisk asterisk    5195 2013-01-09 21:42 - 20130109-214242-1357756962.1658.WAV
-rw-r--r-- 1 asterisk asterisk   13450 2013-01-13 22:33 - 20130113-223350-1358105630.4124.WAV 
```

不幸的是，我不能提供完整的脚本，因为我还有其他文件。基于这样的 ls 命令输出，您现在不需要重写数据，因此可以将其用作列。您可以进行完整的功能处理，包括在单个 awk 表达式中进行格式化。 [http://www.gnu.org/software/gawk/manual/html_node/Printf-Examples.html](http://www.gnu.org/software/gawk/manual/html_node/Printf-Examples.html)

# c# - 如果违反列值唯一性约束，则通过 OData 上传到 SharePoint 2013 的意外行为

> ID：14765031
> 
> 赞同：1
> 
> 时间：2013-02-08T03:03:12.767
> 
> 标签：c#, sharepoint, odata

我使用由 Visual Studio 生成的服务参考代理的`OData`服务将文档上传到 SharePoint 2010 和 2013 。`ListData.svc`执行此任务的代码类似于下面的 C# 片段：

```
public static void Upload<T>(string libraryName, string localFilePath, string targetLibraryRelativePath, T document)
{
    string fullLibraryPath = ContextFactory.ROOT + LibraryName + targetLibraryRelativePath);
    var ctx = ContextFactory.GetODataContext();
    FileInfo fi = new FileInfo(localFilePath);
    document.Path = fullLibraryPath ;
    document.Name = fi.Name;
    document.ContentType = "Document";
    var mimeType = DeriveMIMEType(localFilePath);
    using (FileStream sourceFile = System.IO.File.Open(localFilePath, FileMode.Open, FileAccess.Read))
    {
        ctx.AddObject(libraryName, document);
        ctx.SetSaveStream(document, sourceFile, true, mimeType, fullLibraryPath + "/" + document.Name);
        ctx.SaveChanges();
    }
} 
```

最近出现了一个新的业务需求：防止文档副本进入库。我想到的第一个方法是引入一个具有强制性唯一值的新列，并在那里放置类似 MD5 哈希的内容：

```
document.MD5 = CalculateMD5Hash(File.ReadAllBytes(sourceFile)); 
```

我希望，如果尝试使用相同的 MD5 哈希进行新上传，该服务必须通过唯一哈希列值约束来防止文档内容重复到达库。

我的期望只是部分正确：虽然服务确实在这种尝试中引发了异常，但重复的内容最终被上传，但缺乏任何原始属性，`document`从而损害了我的文档库的完整性。

虽然在调用它**之前**稍微更改实现并检查文档库是否存在相等的 MD5 哈希值并不是问题，`SetSaveStream`但感觉像是一种过度的努力，完全违背了为 MD5 哈希值列声明唯一约束的目的。

我的问题是：我在这里遗漏了什么吗？有什么方法可以让系统为我执行文档内容唯一性要求，而不会因为将不一致的项目放入文档库而受到惩罚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T00:16:35.933

目前我能想到的最佳选择是：

1.  在尝试添加文档之前检查库中是否存在 MD5 哈希（正如您在 OP 中已经建议的那样）：

    ```
    var md5 = GetMd5Hash(File.ReadAllBytes(fi.FullName));

    // check that the MD5 hash doesn't exist in the library
    if (ctx.Test.Where(i => i.MD5 == md5).Count() == 0)
    {
        try
        {
            document.Path = fullLibraryPath;
            document.Name = fi.Name;
            document.ContentType = "Document";
            var mimeType = DeriveMIMEType(localFilePath);
            using (FileStream sourceFile = System.IO.File.Open(localFilePath, FileMode.Open, FileAccess.Read))
            {
                ctx.AddObject(libraryName, document);
                ctx.SetSaveStream(document, sourceFile, true, mimeType, fullLibraryPath + "/" + document.Name);
                ctx.SaveChanges();
            }
        }
        catch (DataServiceRequestException)
        {
            // TODO: log the exception
        }
    } 
    ```

2.  使用`try{...}catch{...}`语句来捕获异常并删除添加的项目：

    ```
    using (FileStream sourceFile = System.IO.File.Open(localFilePath, FileMode.Open, FileAccess.Read))
    {
        ctx.AddObject(libraryName, document);
        ctx.SetSaveStream(document, sourceFile, true, mimeType, fullLibraryPath + "/" + document.Name);
        try
        {
            ctx.SaveChanges();
        }
        catch (Exception)
        {
            _ctx.DeleteObject(document);
            _ctx.SaveChanges();
            // TODO: log the exception
        }
    } 
    ```

# .net - 在 x64 配置下正确的程序集复制，但不是 x86

> ID：14765032
> 
> 赞同：3
> 
> 时间：2013-02-08T03:03:18.590
> 
> 标签：.net, dll, msbuild, visual-studio-2012, x86-64

我有一个两个项目的 .NET 4.5 C# 解决方案，一个项目 (projectA) 是一个类库，它有 5 个引用的 .dll（非 COM）文件。这些文件是 32/64 位特定的，所以我的构建路径中有两个 include/ 文件夹（include/x86/ 和 include/x64/），每个文件夹中都有各自的 .dll 文件。.dll 在 32 位和 64 位版本之间的名称完全相同。另一个项目 (projectB) 是一个引用 projectA 的控制台应用程序。当我配置为调试（或发布，没关系）x64 模式并构建时，一切正常。它将所有 5 个 .dll 复制到 bin/x64/ 目录，程序按预期工作。但是，当我将配置切换到 x86 模式并构建时，五个 .dll 中只有两个被复制到 bin/x86/ 目录，并且程序显然无法运行。它抛出 FileNotFoundException 并抱怨程序集不是

如果我手动将丢失的 .dll 文件复制（或在构建后事件中使用 xcopy）到 bin/x86/ 文件夹，则程序可以工作。因此，该问题似乎与 Visual Studios (2012 Update 1) 在构建期间未正确复制文件有关。projectA 中的所有 5 个引用都设置为 Copy: Local，并且它们在 Visual Studio 的“属性”框中的路径对于 x86 和 x64 模式都是正确的。当我在 x86-64 模式下自行构建 projectA 时，所有 5 个 .dll 都被正确复制到正确的 bin/ 文件夹中。所以这个问题还必须处理引用projectA的projectB。

以下是 projectA.csproj 文件的摘录：

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|x64'">
   <PlatformTarget>x64</PlatformTarget>
</PropertyGroup>
<PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|x86'">
   <PlatformTarget>x86</PlatformTarget>
</PropertyGroup>

<ItemGroup>
<Reference Include="BaseCommon">
  <HintPath>include\$(Platform)\BaseCommon.dll</HintPath>
</Reference>
<Reference Include="BaseDataAccess">
  <HintPath>include\$(Platform)\BaseDataAccess.dll</HintPath>
</Reference>
<Reference Include="BaseError">
  <HintPath>include\$(Platform)\BaseError.dll</HintPath>
</Reference>
<Reference Include="BaseTof">
  <HintPath>include\$(Platform)\BaseTof.dll</HintPath>
</Reference>
<Reference Include="MassSpecDataReader">
  <HintPath>include\$(Platform)\MassSpecDataReader.dll</HintPath>
</Reference>
<Reference Include="System" /> 
```

关于这个问题的任何想法？我假设我可以执行 xcopy 命令，但这似乎不是必需的，特别是如果它在 x64 模式下正确工作。

在三台不同的计算机上使用 windows 8 和 windows 7 64 位进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:03:08.057

在意识到某些 .dll 文件是错误的版本后，我解决了这个问题。我在 .dll 上使用了 il​​dasm.exe，打开清单，并意识到某些 .dll 引用了其他 .dll 文件的错误版本。所以 msbuild 没有按预期执行二进制文件的副本。当我手动复制丢失的 .dll 文件时代码工作的原因是 API 在两个版本之间没有变化。

# css - CSS :hover 仅适用于类的第一个实例

> ID：14765034
> 
> 赞同：0
> 
> 时间：2013-02-08T03:03:35.607
> 
> 标签：css

```
.Row:hover .Contents  { background-color:Blue; }

<div class="Row">
   <span class="Contents">Row Contents</span>
</div>
<div class="Row">
    <span class="Contents">Row Contents</span>
</div> 
```

在上面的示例中，只有第一行内容响应悬停。请参阅[http://jsfiddle.net/3JRTQ/](http://jsfiddle.net/3JRTQ/)。我不确定我做错了什么，特别是因为 .Row .Contents {} 适用于所有实例都很好。

我不想突出显示整行 - 只是带有文本的跨度，但我希望整行响应悬停。

仅使用 CSS 是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:32:45.370

您[在 Chrome 25（和 26）中遇到了一个错误](https://code.google.com/p/chromium/issues/detail?id=171867)。请记住，始终尝试其他浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:08:28.217

修复此示例。使跨度悬停

```
.Row .Contents:hover  { background-color:Blue; } 
```

或使 Div 成为将要更改的元素：

```
.Row:hover { background-color:Blue; } 
```

希望这可以帮助

# javascript - d3 折线图在任意线处填充

> ID：14765036
> 
> 赞同：14
> 
> 时间：2013-02-08T03:04:06.233
> 
> 标签：javascript, d3.js

我正在尝试使用 d3 创建一个简单的折线图，但是由于某种原因，它在线和某个中点之间填充。这是输出：

![折线图](../Images/6618a283ed4a28ac2044b8c3cd43d32b.png)

我的javascript如下：

```
 var width = 500,
            height = 500,
            padding = 10;

        var extentVisits = d3.extent(visits, function(obj){
            return obj['visits'];
        });

        var extentDates = d3.extent(visits, function(obj){
            return obj['datestamp'];
        });

        var yScale = d3.scale.linear()
            .domain(extentVisits)
            .range([height - padding, padding]);

        var xScale = d3.time.scale()
            .domain(extentDates)
            .range([0, width]);

        var line = d3.svg.line()
            .x(function(d) {
                return xScale(d['datestamp']);
            })
            .y(function(d) {
                return yScale(d['visits']);
            })

        d3.select('#chart')
            .append('svg')
            .attr('width', width)
            .attr('height', height)
            .append("g")
            .attr("transform", "translate(5,5)")
            .append('path')
            .datum(visits)
            .attr("class", "line")
            .attr('d', line); 
```

访问的形式为：

```
 visits = [{'datestamp': timestampA, 'visits': 1000},
                  {'datestamp': timestampB, 'visits': 1500}] 
```

我是 d3 的新手，所以我确信这很简单，但这让我发疯。

提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-08T04:38:35.377

您看到的中点只是第一个点和最后一个点的连接。这是因为您创建的路径（默认情况下）具有黑色填充。即使它是一条开放路径（即第一个点和最后一个点实际上并没有连接），如果被填充，它也会显示为封闭的：

> 填充操作通过执行填充操作来填充打开的子路径，就好像在路径中添加了一个附加的“closepath”命令以连接子路径的最后一个点和子路径的第一个点。

资料来源：通过[这个 SO 答案的](https://stackoverflow.com/a/10213649/1411510)[SVG 规范](http://www.w3.org/TR/SVG/painting.html#FillProperties)

这里的解决方案是消除填充，而是设置描边。您可以使用 d3 或通过 CSS 在 JS 中直接执行此操作。

```
path.line
{
    fill: none;
    stroke: #000;
} 
```

[演示在 jsFiddle 上同时显示 CSS 和 JS 方法（已注释掉）](http://jsfiddle.net/Q4Mfc/1/)

# javascript - 如何判断 Microsoft IE10 中是否只有一根手指触摸

> ID：14765042
> 
> 赞同：4
> 
> 时间：2013-02-08T03:05:15.957
> 
> 标签：javascript, touch, internet-explorer-10

我们正在模拟无限列表的滚动，我们希望检测单指滚动或用户开始手势之间的区别。

理论上，IE10 中的手指计数可以为每个事件 +1`MSPointerDown`和 -1`MSPointerUp`事件（和/或使用 event.msPointerId 匹配的手指）。

在实践中，至少存在一个错误，即 IE10 会生成 MSPointerDown 事件，但永远不会发送匹配的 MSPointerUp 事件。（抱歉，我无法创建一个简单的测试用例来展示这一点，但我确实花了很多时间检查 MSPointerUp 事件是否*确实*丢失。可能是由于在触摸过程中删除了子元素）。

也许使用 MSGesture 事件来查看是否有多个手指向下？（我尝试了这个但收效甚微，但也许其他人已经解决了它）。

有任何想法吗？

PS：在 webkit 中，等效于检查`event.touches.length === 1`touchstart 事件（请注意，您需要一个不明显的技巧才能使其正常工作： document.ontouchstart 必须注册一个事件，然后 event.touches.length 对于注册的 touchstart 事件将是正确的*其他*元素）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:31:22.943

确保您还跟踪 MSPointerOut。我发现如果您在可跟踪区域之外放开屏幕，则不会调用 MSPointerUp。

如果有帮助，我有一个 WinJS 类，我一直在使用它来跟踪多点触控状态。

```
var TouchState = WinJS.Class.define(
function () {
    this.pointers = [];
    this.primaryPointerId = 0;

    this.touchzones = [];
}, {
    touchHandler: function (eventType, e) {
        if (eventType == "MSPointerDown") {
            if (!this.pointers[this.primaryPointerId] || !this.pointers[this.primaryPointerId].touching) {
                this.primaryPointerId = e.pointerId;
            }
            e.target.msSetPointerCapture(e.pointerId);
            this.pointers[e.pointerId] = {
                touching: true,
                coords: {
                    x: e.currentPoint.rawPosition.x,
                    y: e.currentPoint.rawPosition.y
                }
            };
            this.checkTouchZones(this.pointers[e.pointerId].coords.x, this.pointers[e.pointerId].coords.y, e);
        }
        else if (eventType == "MSPointerMove") {
            if (this.pointers[e.pointerId]) {
                this.pointers[e.pointerId].coords.x = e.currentPoint.rawPosition.x;
                this.pointers[e.pointerId].coords.y = e.currentPoint.rawPosition.y;
            }
        }
        else if (eventType == "MSPointerUp") {
            if (this.pointers[e.pointerId]) {
                this.pointers[e.pointerId].touching = false;
                this.pointers[e.pointerId].coords.x = e.currentPoint.rawPosition.x;
                this.pointers[e.pointerId].coords.y = e.currentPoint.rawPosition.y;                    
            }
        }
        else if (eventType == "MSPointerOut") {
            if (this.pointers[e.pointerId]) {
                this.pointers[e.pointerId].touching = false;
                this.pointers[e.pointerId].coords.x = e.currentPoint.rawPosition.x;
                this.pointers[e.pointerId].coords.y = e.currentPoint.rawPosition.y;
            }
        }
    },
    checkTouchZones: function (x, y, e) {
        for (var zoneIndex in this.touchzones) {
            var zone = this.touchzones[zoneIndex];
            if (x >= zone.hitzone.x1 && x < zone.hitzone.x2 && y > zone.hitzone.y1 && y < zone.hitzone.y2) {
                zone.callback(e);
            }
        }
    },
    addTouchZone: function (id, hitzone, callback) {
        this.touchzones[id] = {
            hitzone: hitzone,
            callback: callback
        };
    },
    removeTouchZone: function (id) {
        this.touchzones[id] = null;
    }
}); 
```

# javascript - 使用ajax增量加载大量数据

> ID：14765045
> 
> 赞同：3
> 
> 时间：2013-02-08T03:05:35.477
> 
> 标签：javascript, ajax, json, charts, highcharts

我将使用图表（可能是 Highstock）来显示数据库中的数据。通常会检索到大量记录（数万条）。我希望图表在下载数据时开始显示数据，而不必等待检索所有数据。

我知道我可以通过对服务器使用多个请求来获取较小的数据位来手动执行此操作，但这似乎效率很低。

Javascript 中是否有工具或其他代码可以让您在数据到达时使用对服务器的单个请求来处理数据（一些缓冲是可以的）？

编辑：虽然我特别询问了仅限客户端的解决方案，但如果唯一可用的解决方案需要服务器上的某些东西，我正在 LAMP（Linux、Apache、MySQL、PHP）环境中工作。

编辑：由于这个问题已关闭，我无法发布答案，但我已将问题的解决方案作为评论包含在内。希望它对其他人有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:51:47.870

我不知道您将使用什么后端从数据库中获取数据，但如果它是 .NET，您可以使用[SignalR](https://github.com/SignalR/SignalR)之类的东西从服务器中获取数据。

# wpf - WPF ComboBox 将 itemssource 绑定到 MVVM 中的不同数据上下文

> ID：14765046
> 
> 赞同：6
> 
> 时间：2013-02-08T03:05:38.110
> 
> 标签：wpf, data-binding, mvvm, combobox

我有一个用户控件，它的数据上下文设置为一个名为**EmployeeList_VM**的视图模型。然后，我在该用户控件中有一个 ContentControl，它的 datacontect 设置为视图模型的公共属性 ( ***EmployeeSelection*** )。ContentControl 的数据上下文与同一用户控件中列表框的选定项绑定相同。

我想在 ContentControl 中有一个组合框（一个名为**EmployeeStatus**的 observblecollection ）将其选定项绑定到 ContentControl 的 EmployeeSelection 数据上下文的**属性**。我希望组合框的 itemssource 绑定到“父”视图模型**EmployeeList_VM的公共属性****EmployeeStatus**。

 **我可以获取显示在组合框中的员工状态列表。我无法将其绑定到**EmployeeSelection**的 idStatus 属性。

这是我到目前为止所拥有的（为了便于阅读，删除了一些代码）：

```
<UserControl x:Class="FTC.View.EmployeeListView"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
            xmlns:local="clr-namespace:FTC_Application"
            xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
            xmlns:cmd="http://www.galasoft.ch/mvvmlight"
            mc:Ignorable="d" 
            DataContext="{Binding EmployeeList_VM, Source={StaticResource Locator}}"
            d:DesignHeight="900" d:DesignWidth="1000">

        <Expander x:Name="DetailExpander" Grid.Column="2" Header="employee detail" Style="{DynamicResource ExpanderStyle_FTC}" IsExpanded="True" Padding="8,0,0,10" >
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Vertical" HorizontalAlignment="Left" >
                    <Button Content="" Style="{DynamicResource ButtonSave}" Command="{Binding SaveCommand}" ToolTip="Save Changes" Margin="0,0,10,10"/>
                    <Button Content="" Style="{DynamicResource ButtonUndo}" Command="{Binding UndoCommand}" ToolTip="Undo Changes" Margin="0,0,10,10"/>
                </StackPanel>
                <ScrollViewer Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <ContentControl DataContext="{Binding Path=EmployeeSelection, Mode=TwoWay}" >
                            <!-- FTC SETTINGS GRID CONTENT-->
                            <Grid Grid.ColumnSpan="6" Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock x:Name="SettingsHeading" Text="FTC Settings" Style="{StaticResource FTC_DetailHeading}" Grid.ColumnSpan="5"/>

                                <TextBlock Text="Status" Style="{StaticResource FTC_DetailLabelSub}" Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1"/>
                                <ComboBox Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="2"
                                          Margin="5,5,16,5" Height="37"
                                          ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},Path=DataContext.EmployeeStatus}"
                                          SelectedItem="{Binding idStatus, Mode=TwoWay}"
                                          SelectedValuePath="idStatus"
                                          DisplayMemberPath="chrCode" FontSize="18"/>

                           </Grid>
                    </ContentControl>
                </ScrollViewer>
            </Grid>
        </Expander>
</UserControl> 
```

我什至为组合框的选定项尝试了以下更改（我将 ContentControl 命名为 DetailControl）：

```
SelectedItem="{Binding ElementName=DetailControl, Path=DataContext.idStatus}" 
```

有人可以帮我正确连接选定的项目绑定吗？组合框显示所有正确的项目，但它们不绑定到 EmployeeSelection.idStatus。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T23:35:37.337

所以这对我有用，希望它可以帮助别人

```
<ComboBox Name="cbStatus" Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="2"
                                          Style="{StaticResource FTC_DetailComboBox}"
                                          ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}},Path=DataContext.EmployeeStatus}"
                                          SelectedItem="{Binding ElementName=DetailControl, Path=DataContext.employee_status}"
                                          SelectedValuePath="idStatus"
                                          SelectedValue="{Binding idStatus, Mode=TwoWay, ValidatesOnDataErrors=True}"
                                          DisplayMemberPath="chrCode"/> 
```**

# c# - 稍后/手动将更改应用于数据库

> ID：14765047
> 
> 赞同：-1
> 
> 时间：2013-02-08T03:05:40.390
> 
> 标签：c#, oracle, compact-framework, sql-server-ce

有可能实现这一目标吗？

1.  从数据库下载/获取数据，然后在本地保存到 Windows Mobile 应用程序以供以后使用（无需 Internet 连接）。

2.  在本地对数据库进行更改。

3.  上传本地数据库的更改以手动从服务器更新数据库。

我正在考虑同步功能，但我在服务器上使用 Oracle 数据库，而 Oracle DB 和 SQL Server Compact 自然不支持彼此同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:38:23.223

请阅读有关 ADO.NET 技术的信息。
它是为实现您的场景而设计的 - 维护服务器数据的断开连接的缓存。

例如看 [这篇文章](http://www.codeproject.com/Articles/8477/Using-ADO-NET-for-beginners)

这是更具体的示例-> [ADO.NET 中的断开连接架构](http://www.programcall.com/3/adonet/disconnected-architecture-in-adonet.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:36:14.360

以下是 Microsoft 提供的关于执行此操作的精彩演练：

[演练：创建偶尔连接的智能设备应用程序](http://msdn.microsoft.com/en-us/library/cc488004%28v=vs.90%29)

请注意，据报道该技术并非 100% 可靠，这意味着它可能“忘记”发布最新数据。

为了解决这个问题，您可以在每个表中添加一个`TimeStamp` [DateTime](http://msdn.microsoft.com/en-us/library/ms187819.aspx)字段来存储最新数据的写入或更新时间，然后修改您的查询以仅拉/推最新记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:10:30.463

当然这是完全可能的，但不幸的是，您将需要自己编写同步功能。您也许可以合并[此](http://oracle-apps-dba.blogspot.com/2008/04/oracle-transparent-gateway-for-ms-sql_16.html)功能，但目前还没有适合您的附加解决方案，因此您需要添加同步功能。

快乐编码！

# javascript - mongodb出错。属性列表后缺少“}”

> ID：14765048
> 
> 赞同：4
> 
> 时间：2013-02-08T03:05:52.670
> 
> 标签：javascript, json, mongodb, bson

使用以下代码，我收到此错误：

```
SyntaxError: missing } after property list <shell>:3 
```

有谁知道我做错了什么？花括号看起来很平衡，所以我想知道我是否在其他地方犯了错误。

```
db.test.save(
{
     "name":"John Doe"
     "attribute":"false"
     "num1":99
     "num2":85
     "num3"{
            "n1":11
            "n2":9
            "n3":8
            "n4":9
     }
     "num4"{
            "m1":15
            "m2":6
            "m3":5
            "m4":12
     }
}
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T03:06:41.487

缺少冒号。

```
 "num3":{
       ^

 "num4":{
       ^ 
```

还有逗号。

```
 "name":"John Doe",
                  ^
 "attribute":"false",
                    ^
 "num3"{
        "n1":11, //commas to separate these object properties too
        "n2":9,
        "n3":8,
        "n4":9
 },
  ^
 //etc 
```

这应该执行：

```
{
     "name":"John Doe",
     "attribute":"false",
     "num1":99,
     "num2":85,
     "num3":{
            "n1":11,
            "n2":9,
            "n3":8,
            "n4":9
     },
     "num4":{
            "m1":15,
            "m2":6,
            "m3":5,
            "m4":12
     }
} 
```

[MongoDB 更新文档](http://docs.mongodb.org/manual/applications/update/)中还有一些有效`document`s 的示例。

# java - 用于传感器数据收集的基于 Java 的库

> ID：14765053
> 
> 赞同：12
> 
> 时间：2013-02-08T03:06:36.397
> 
> 标签：java, real-time, sensors, data-stream

我正在寻找适合以通用方式收集**实时传感器数据流的可嵌入 Java 库。**我计划用它来开发一个“集线器”应用程序，用于报告多个不同的传感器流，在基于 JVM 的服务器上运行（也将为此使用 Clojure）。

它需要具备的关键条件：

*   各种常见传感器类型/API 的接口。我很高兴自己构建我需要的东西，但如果一些标准的东西开箱即用，那就太好了。
*   适合“软实时”使用，即相当低的延迟和低开销。
*   能够在运行时监控和管理流、收集统计数据等。
*   在合理许可的许可下开源，以便我可以将它与其他代码集成（Apache、EPL、BSD、LGPL 都可以）
*   一个相当活跃的社区/开发者生态系统

您可以推荐一些适合此个人资料的东西吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-12T18:28:47.963

**1\. 循环数据库（[维基百科](http://en.wikipedia.org/wiki/RRDtool)）**

> RRDtool（循环数据库工具的缩写）旨在处理时间序列数据，如网络带宽、温度、CPU 负载等。数据存储在循环数据库（循环缓冲区）中，因此系统存储空间保持不变随着时间的推移。

这种方法/数据库格式被广泛使用，足够稳定和简单。开箱即用，它可以生成漂亮的图：

![在此处输入图像描述](../Images/1c7078a1b80d3cd1840e3bc3129c0ac7.png)

有 Java 实现[——RRD4J](http://code.google.com/p/rrd4j/)：

> RRD4J 是用于时间序列数据的高性能数据记录和图形系统，在 Java 中实现了 RRDTool 的功能。它遵循许多相同的逻辑，并使用与 RRDTool 相同的数据源、存档类型和定义。在 Apache 2.0 许可下开源。

**更新**

忘记提及 Clojure RRD API（[示例](https://github.com/maoe/rrd4clj/blob/master/src/clj/rrd4clj/examples.clj)）。

**2\. 对于一些实时数据的实验，我建议考虑[Perst](http://www.mcobject.com/perst_database_spec)**

它体积小、速度快且足够可靠，但在 GPLv3 下分发。Perst 提供了几种索引算法：

1.  B树
2.  T-Tree（针对内存数据库进行了优化）
3.  R-Tree（空间索引）
4.  Patricia Trie（前缀搜索）
5.  KD-Tree（多维索引）
6.  **时间序列（带有时间戳的大量固定大小的对象）**

最后一个非常适合您的需求。

**3.带有[关系索引的](http://docs.neo4j.org/chunked/milestone/indexing-relationships.html)[Neo4J](http://neo4j.org)**

> 这种方法带来好处的一个很好的例子是时间序列数据，其中我们将读数表示为每次出现的关系。

**4\. [Oracle Berkeley DB Java 版](http://docs.oracle.com/cd/E17277_02/html/index.html)**

> Oracle Berkeley DB Java 版是一个完全用 Java 编写的开源、可嵌入的事务存储引擎。它充分利用 Java 环境来简化开发和部署。Oracle Berkeley DB Java 版的体系结构支持读取密集型和写入密集型工作负载的非常高的性能和并发性。

**建议**

试试[RRD4J](http://code.google.com/p/rrd4j/)：

1.  这很简单
2.  它提供了相当不错的情节
3.  它有 Clojure API
4.  它支持多个后端，包括[Oracle Berkeley DB Java 版](http://docs.oracle.com/cd/E17277_02/html/index.html)
5.  它可以存储/可视化详细的数据集

![在此处输入图像描述](../Images/984fed4902cf6849fefcec4af8ccccbc.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T19:13:04.207

对于收集传感器数据的实时流，以下可能会有所帮助

你检查过 LeJos API 的。这个[http://lejos.sourceforge.net/nxt/nxj/api/index.html](http://lejos.sourceforge.net/nxt/nxj/api/index.html)

此外，值得检查 Oracle Java ME Embedded 及其所针对的目标市场[http://www.unitask.com/oracledaily/2012/10/04/at-the-java-demogrounds-oracle-java-me-embedded-启用物联网/](http://www.unitask.com/oracledaily/2012/10/04/at-the-java-demogrounds-oracle-java-me-embedded-enables-the-internet-of-things/)

可以从[http://www.oracle.com/technetwork/java/embedded/downloads/javame/index.html下载](http://www.oracle.com/technetwork/java/embedded/downloads/javame/index.html)

对于存储时间序列数据，cassandra [http://cassandra.apache.org/](http://cassandra.apache.org/)并回答为什么 cassandra 参考[http://www.datastax.com/why-cassandra](http://www.datastax.com/why-cassandra)

要从 Java 访问 Cassandra，请参阅[https://github.com/jmctee/Cassandra-Client-Tutorial](https://github.com/jmctee/Cassandra-Client-Tutorial) 这很有帮助，并且在 cassandra db 中应用时间序列概念请参阅
[http://www.datastax.com/wp-content/uploads /2012/08/C2012-ColumnsandEnoughTime-JohnAkred.pdf](http://www.datastax.com/wp-content/uploads/2012/08/C2012-ColumnsandEnoughTime-JohnAkred.pdf)

# c - 使用 ANTLRWorks 生成 C 文件时出现 ANTLR 错误

> ID：14765057
> 
> 赞同：0
> 
> 时间：2013-02-08T03:07:31.937
> 
> 标签：c, antlr, antlrworks

我正在使用 ANTLRWorks 1.5 for C (ANTLR 3.5)。我创建了一个词法分析器和解析器文件。尝试生成代码时，它返回错误`<[18:52:50] error(100): Script.g:57:2: syntax error: antlr: MissingTokenException(inserted [@-1,0:0='<missing EOF>',<-1>,57:1] at options {)>`。

这是代码，请告诉我缺少什么。

```
/* ############################## L E X E R ############################ */

grammar Lexer;

options { 

    language = C;
    output = AST; //generating an AST
    ASTLabelType = pANTLT3_BASE_TREE; //specifying a tree walker

    k=1;    // Only 1 lookahead character required

}

// Define string values - either simple unquoted or complex quoted
STRING : ('a'..'z'|'A'..'Z'|'0'..'9'|'_' | '+')+ 
        | ('"' (~'"')* '"');

// Ignore all whitespace
WS :(' ' 
    | '\t' 
    | '\r' '\n' { newline(); } 
    | '\n'      { newline(); }
    ) 
    { $setType(Token.SKIP); } ;

// TODO:Single-line comment
LINE_COMMENT : '/*' (~('\n'|'\r'))* ('\n'|'\r'('\n')?)? 
    { $setType(Token.SKIP); newline(); } ;

// Punctuation     
LBRACE : '<';
RBRACE : '>';
SLASH : '/';
EQUALS : '=';
SEMI : ';';

TRIGGER : ('Trigger');
TRIGGERTYPE : ('Fall') SLASH ('Rise')|('Rise') SLASH ('Fall')|('Fall')|('Rise'); 
DEFAULT : ('Default TimeSet');
TIMESETVAL : ('TSET_')('0..9')*; 
```

```
/* ############################## P A R S E R ############################ */

grammar Script;

options { 
        language=C;
    output=AST;         // Automatically build the AST while parsing
    ASTLabelType=pANTLR3_BASE_TREE;
    //k=2;              // Need lookahead of two for props without keys (to check for the =)
}

/*tokens {
    SCRIPT;             // Imaginary token inserted at the root of the script
    BLOCK;              // Imaginary token inserted at the root of a block
    COMMAND;            // Imaginary token inserted at the root of a command
    PROPERTY;           // Imaginary token inserted at the root of a property
}*/

/** Rule to parse Trigger line
*/

trigger : TRIGGER EQUALS TRIGGERTYPE SEMI;

/** Rule to parse TimeSet line
*/

timeset : DEFAULT TIMESETVAL; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:10:42.387

您的“组合”语法`Lexer`只有词法分析器规则，而当您只定义时`grammar`，ANTLR 至少需要 1 个解析器规则。

有 3 种不同类型的语法

*   组合语法：`grammar Foo`，生成：
    *   `class FooParser extends Parser`和
    *   `class FooLexer extends Lexer`
*   解析器语法：`parser grammar Bar`，生成：
    *   `class Bar extends Parser`
*   词法分析器语法：`lexer grammar Baz`，生成：
    *   `class Baz extends Lexer`

因此，在您的情况下，更改`grammar Lexer;`为`lexer grammar ScriptLexer;`（不要命名您的词法分析器语法`Lexer`，因为它是 ANTLR 中的基本词法分析器类！）并在您的解析器语法中导入这个词法分析器：

```
parser grammar ScriptParser;

import ScriptLexer;    

options { 
  language=C;
  output=AST;
  ASTLabelType=pANTLR3_BASE_TREE;
}

// ... 
```

* * *

有关的：

*   [ANTLR3 Wiki：复合语法](http://www.antlr.org/wiki/display/ANTLR3/Composite+Grammars)

# variables - 捕获 Lua 中的变量变化

> ID：14765058
> 
> 赞同：2
> 
> 时间：2013-02-08T03:07:58.347
> 
> 标签：variables, lua, external, record, capture

我不确定在哪里可以看到我可以用来捕获另一个程序中加载的程序中的变量更改。

这是我的代码，虽然很乱：

```
function launch()
    shell.run("clear")
    print("Preparing for first time run.")
    sleep(1)
    print("")
    local program = netTest()
    local file = loadstring(program)
    file()
    sleep(3)
    shell.run("clear")
end

function netTest()
  local output = http.get("http://pastebin.com/raw.php?i=hzZv3YH2")
  if output then
        local contents = output.readAll()
        output.close()
        return contents
  else
        print("Empty response")
        return false
  end
end

local program = netTest()
local file = loadstring(program)

launch() 
```

这是它调用的代码：

```
function ping()
fails = 0
pingResult = 0
print("Testing Internet Connection.")
print("")
oldx, oldy = term.getCursorPos()
print("Connection Test 1")
http.request("http://www.google.com/")
        if os.pullEvent() == "http_success" then
                local oldx, oldy = term.getCursorPos()
                term.setCursorPos(46,oldy-1)
                io.write("Passed")
        else
                local oldx, oldy = term.getCursorPos()
                term.setCursorPos(46,oldy-1)
                io.write("Failed")
                fails = fails+1
        end
sleep(1)
print("Connection Test 2")
http.request("http://www.microsoft.com/")
        if os.pullEvent() == "http_success" then
                local oldx, oldy = term.getCursorPos()
                term.setCursorPos(46,oldy-1)
                io.write("Passed")
        else
                local oldx, oldy = term.getCursorPos()
                term.setCursorPos(46,oldy-1)
                io.write("Failed")
                fails = fails+1
        end
sleep(1)
print("Connection Test 3")
http.request("http://www.example-failure.com/")
        if os.pullEvent() == "http_success" then
                local oldx, oldy = term.getCursorPos()
                term.setCursorPos(46,oldy-1)
                io.write("Passed")
        else
                local oldx, oldy = term.getCursorPos()
                term.setCursorPos(46,oldy-1)
                io.write("Failed")
                fails = fails+1
        end
sleep(1)
        if fails == 0 then
                print("")
                print("")
                print("Test Complete, no failures detected.")
                sleep(1.5)
        elseif fails == 1 then
                print("")
                print("")
                print("1 connection failures detected. A Website Host might be down however connectivity is still there.")
                print("")
                print("Test Complete.")
                sleep(1.5)
        elseif fails == 2 then
                print("")
                print("")
                print("2 connection failures detected. Possible limited web connectivity.")
                print("")
                print("Test Complete.")
                sleep(1.5)
        elseif fails == 3 then
                print("")
                print("")
                print("Catastrophic connection failure detected. A firewall or improper internet settings may be the problem.")
                print("")
                print("Test Complete.")
                pingResult = __pingResult + 3
                sleep(1.5)
        end
end

ping() 
```

正如您所看到的，它在外部运行一个程序，该程序将通过向几个页面发出 http 请求来测试连接，以确保连接到 Internet。（我知道，这有点蹩脚，但我还在学习）。

基本上，如果连接在所有 3 个阶段都读取失败，它将使我的 pingResult 变量 = 3。我想要从第一个调用我的 Internet 实用程序的程序中做的是记录该变量的设置。如果在关闭时将其设置为 3，则记录该变量的设置，然后为简单起见，打印该变量，以便我可以看到它是 0 或 3。我稍后会用它做一些事情，但你会明白它的要点.

我已经尝试了其他几件事，但似乎无法弄清楚我是如何做到这一点的。看到我还是新手，我尝试了随机的东西，但似乎没有任何效果，或者我只是做错了，所以我不知道该怎么做。这几天一直在尝试，但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T22:55:56.897

首先，您发布的大部分代码都是噪音——打印语句、光标操作、从 pastebin（？）获取 Lua 代码，各种与您的问题完全无关的逻辑，包括实际上什么都不做的代码。这就是为什么你还没有得到回应。

请参阅：[如何以聪明的方式提问：数量不是精确的](http://www.catb.org/esr/faqs/smart-questions.html#volume)。

* * *

如果我们从您的帖子中删除所有无关的内容，我们将得到：

```
-- main.lua
local file = loadfile('nettest.lua')
file()

-- nettest.lua
pingResult = 123 
```

现在来解决您的问题：

> 如您所见，它正在做的是在外部运行程序：

它没有在外部运行任何东西。您已经获取了外部*代码*，但它是在本地执行的。您可以看到代码对全局状态所做的任何更改。在这种情况下， main.lua 可以访问`pingResult`. 例如，您可以编写：

```
-- main.lua
local file = loadfile('nettest.lua')
file()
print(pingResult) 
```

当然，如果您想在脚本和 ping 模块之间进行更清晰的分离，您可能应该让该代码*返回*一个值而不是写入全局：

```
-- main.lua
local file = loadfile('nettest.lua')
local pingResult = file()
print(pingResult)

-- nettest.lua
local pingResult
-- ... code the computes the result an stores it in pingResult ...
return pingResult 
```

# javascript - 如何在不使用下划线循环的情况下组合键和值？

> ID：14765059
> 
> 赞同：0
> 
> 时间：2013-02-08T03:08:01.043
> 
> 标签：javascript, underscore.js

```
var request = {
    headers: {
        "CONTENT-TYPE": "application/json",
        "accept": "application/json"
    }
}; 
```

目的是获取普通对象，但使用**“规范化”键**。如何将`keys`and`vals`与 Underscore 结合使用？

```
var normalize = function(h) { return h.toUpperCase(); },
    keys = _.map(_.keys(request.headers), normalize),
    vals = _.values(request.headers);

// Now combine (no obvious looping) keys and vals to obtain
// {
//     headers: {
//         "CONTENT-TYPE": "application/json",
//         "ACCEPT": "application/json"
//     }
// } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T03:15:33.690

你认为`_.each`是一个“明显的”循环结构吗？

```
var normalize = function(h) { return h.toUpperCase(); },
    normalizedHeaders = {};

_.each(request.headers, function(value, key) {
    normalizedHeaders[normalize(key)] = value;
}); 
```

如果您愿意，也可以通过减少来做到这一点：

```
var reducer = function(result, v, k) { result[normalize(k)] = v; return result; },
    normalizedHeaders = _.reduce(request.headers, reducer, {}); 
```

不过，无论哪种方式，幕后都会有一个循环。

# objective-c - 从 Cocoa 中的 Apple Mail 获取丢弃的邮件消息

> ID：14765063
> 
> 赞同：3
> 
> 时间：2013-02-08T03:08:48.463
> 
> 标签：objective-c, cocoa, drag-and-drop

我用谷歌搜索并阅读了文档。在 SO 上搜索，找到了建议使用 Applescript 的答案，但由于沙箱，我无法使用 Applescript。

我正在开发 Cocoa 应用程序（用 Objective-C 和沙盒编写）。我正在从 Apple Mail 应用程序实现拖放。应用程序应该像 Finder 一样接收或复制 eml 邮件消息。

我试着看，`NSPromisedFilesPboardType`但几乎无法弄清楚我应该如何使用它。我在方法中尝试了这样的代码`- (BOOL)acceptDrop:(id<NSDraggingInfo>)info`：

```
if ([info.draggingPasteboard.types containsObject:@"MV Super-secret message transfer pasteboard type"]) {
    NSURL *tempFolder = [FM createTempFolderInFolder:AppDataDir()];
    NSArray *filenames = [info namesOfPromisedFilesDroppedAtDestination:tempFolder];
    // tempFolder is filepath of generated temp folder in appdata directory so it is accessible for sandboxed app
    // filenames becomes nil
    return YES;
} 
```

当我尝试遍历粘贴板中的所有类型时，我看到的是：

```
Dropped types are:
Type: dyn.ah62d4rv4gu8y4zvanr41a3pwfz30n25wqz4ca5pfsr30c35feb4he2pssrxgn6vasbu1g7dfqm10c6xeeb4hw6df (null)
Type: MV Super-secret message transfer pasteboard type (null)
Type: dyn.ah62d4rv4gu8zg7puqz3c465fqr3gn7bakf41k55rqf4g86vasbu1g7dfqm10c6xeeb4hw6df (
        {
        account = Gmail;
        id = 6622;
        mailbox = INBOX;
        subject = "got SUV?";
    }
)
Type: Super-secret Automator pasteboard type (
        {
        account = Gmail;
        id = 6622;
        mailbox = INBOX;
        subject = "got SUV?";
    }
)
Type: dyn.ah62d4rv4gu8yc6durvwwa3xmrvw1gkdusm1044pxqyuha2pxsvw0e55bsmwca7d3sbwu (
    eml
)
Type: Apple files promise pasteboard type (
    eml
)
Type: public.url (null)
Type: CorePasteboardFlavorType 0x75726C20 (null)
Type: dyn.ah62d4rv4gu8yc6durvwwaznwmuuha2pxsvw0e55bsmwca7d3sbwu (
    "message:%3C1a392cb9-b78c-402d-8d7f-dbd1d4a9ec42@Neptune.do.losaltos.k12.ca.us%3E",
    ""
)
Type: Apple URL pasteboard type (
    "message:%3C1a392cb9-b78c-402d-8d7f-dbd1d4a9ec42@Neptune.do.losaltos.k12.ca.us%3E",
    ""
)
Type: public.url-name (null)
Type: CorePasteboardFlavorType 0x75726C6E (null)
Type: com.apple.pasteboard.promised-file-content-type com.apple.mail.email
Type: com.apple.pasteboard.promised-file-url (null)
Type: dyn.ah62d4rv4gu8y6y4usm1044pxqzb085xyqz1hk64uqm10c6xenv61a3k (null)
Type: NSPromiseContentsPboardType (null) 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T00:04:25.597

我刚刚经历了这个过程，实际上很容易。

在粘贴板类型中查找“com.apple.pasteboard.promised-file-content-type = com.apple.mail.email”，如果找到，只需使用放置目标 URL 调用 namesOfPromisedFilesDroppedAtDestination（来自 NSDraggingInfo），文件将被创建当拖动完成时。

# java - 使用静态连接时数据库挂起

> ID：14765066
> 
> 赞同：0
> 
> 时间：2013-02-08T03:09:01.907
> 
> 标签：java, database, static, database-connection

我在这里有一个基本问题 - 我正在使用一个名为`XpressMP`.

我编写了一个多线程程序来将大量记录插入数据库。在连接数据库时，我注意到一件最重要的事情：

在我的程序中，如果我使用类似下面的东西 -

```
class Task implements Runnable {

   private Connection dbConnection = null;
   private PreparedStatement preparedStatement = null;

   //other stuff

 @Override
  public void run() {

   try {

      dbConnection = getDBConnection();

   } finally {
        if (preparedStatement != null) {
            try {
                preparedStatement.close();
                preparedStatement = null;
            } catch (SQLException e) {
            }
        }
        if (dbConnection != null) {
            try {
                dbConnection.close();
                dbConnection = null;
            } catch (SQLException e) {
            }
        }
    }
  }
} 
```

它工作正常，我正在关闭最后一个块中的每个连接。而且我可以在数据库中插入更多行。

但是，一旦我开始有意地（我不应该这样做）使用多个线程的**静态连接-**

```
class Task implements Runnable {

   private static Connection dbConnection = null;
   private static PreparedStatement preparedStatement = null;

   //other stuff

 @Override
  public void run() {

  try {

    dbConnection = getDBConnection();

   } finally {
        if (preparedStatement != null) {
            try {
                preparedStatement.close();
                preparedStatement = null;
            } catch (SQLException e) {

            }
        }
        if (dbConnection != null) {
            try {
                dbConnection.close();
                dbConnection = null;
            } catch (SQLException e) {
            }
        }
    }
  }
} 
```

**整个数据库挂起。**在重新启动数据库之前，我无法使用该数据库。所以这意味着我的 JDBC 驱动程序存在一些问题。我已经将这个问题告诉了 DBA，他们正在与拥有该数据库的人交谈。

但我的问题是它为什么会挂起。是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:17:48.220

您在各个线程之间共享一个对象引用变量...有时，创建一个连接对象，然后在它关闭（并将其引用设置为空）之前，另一个线程启动，创建另一个对象并且从不关闭旧对象。因此，该连接仍然存在，并且在某个时间点，将打开太多连接，并且您的 DBMS 可能会崩溃，并出现诸如“连接过多”之类的错误。问题不在于您的驱动器，而在于您的代码。请注意，某些线程也可能关闭由另一个线程创建的连接！

我认为您没有看到正在抛出的异常，因为您没有 a `catch`in you outer `try`。当您尝试创建连接时将抛出异常。尝试在那里放置一个 catch 以显示堆栈跟踪。如果您的数据库检测到此问题，它将起作用（它可能会起作用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:42:43.077

JDBC 不是线程安全的，因此您不应并行使用来自多个线程的一个 Connection 对象，无论它是否存储在静态字段中。一旦你这样做了，一个线程可能会在另一个线程的查询中间发送它的查询，所以数据库将收到完整的垃圾，如果数据库不是坚如磐石，这些垃圾可能会破坏数据库。

# html - 编译html模板完成网站

> ID：14765067
> 
> 赞同：0
> 
> 时间：2013-02-08T03:09:07.520
> 
> 标签：html

我习惯使用 ASP.NET 和 Visual Studio 来开发网站。我正在尝试以类似的方式开发一个普通的 .html 网站。我的意思是使用母版页等，因此可以重用代码，并且可能将这些模板文件部署到一组 .html 文件中。

例如

头.html

```
<script src="jquery.js" type="text/javascript"></script>
<script src="jquery.ui.js" type="text/javascript"></script> 
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"> 
```

header.html

```
<div data-role="header">
    <h1>Page Title</h1>
</div><!-- /header --> 
```

页脚.html

```
<div data-role="footer">
    <h4>Page Footer</h4>
</div><!-- /footer --> 
```

布局.html

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Page Title</title> 
        #include(head.html)
</script>
</head> 
<body> 

<div data-role="page">

    #include(header.html)

    #include_body()

    #include(footer.html)

</div><!-- /page -->
</body>
</html> 
```

索引.html

```
<div data-role="content">   
    <p>Page content goes here.</p>      
</div><!-- /content --> 
```

并将所有这些组合到一个输出文件中......

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Page Title</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p>Page content goes here.</p>      
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->

</body>
</html> 
```

这样的事情存在吗？我不熟悉红宝石或任何东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:43:33.917

服务器端包含 (SSI) 可能会满足您的需求。满足一些基本的服务器要求后，您可以执行以下操作：

```
<!--#include virtual="includes/my_file.html" --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:48:54.030

您可以使用一点 PHP 来使用包含来执行此操作。

页眉、页脚等可以创建为新的 .php 文件，您可以在其中放置要在该部分中显示的所有内容。

然后，说你的 index.php 文件，你做类似的事情

```
<?php
    include ('header.php');
?>
<html>
    <head>
    </head>
    <body>
    </body>
<?php
    include ('footer.php');
?> 
```

将包括页眉和页脚 PHP 文件中的所有内容。

# python - Python 和真正的并发线程

> ID：14765071
> 
> 赞同：5
> 
> 时间：2013-02-08T03:09:56.570
> 
> 标签：python, multithreading, concurrency, gil, greenlets

我已经阅读了几个小时，我可以完全弄清楚 python 多线程是如何比单线程更快的。

这个问题确实源于 GIL。如果有 GIL，而且任何时候只有一个线程真正在运行，那么多线程怎么能比单线程快呢？

我读到了一些操作 GIL 被释放（比如写入文件）。这就是使多线程更快的原因吗？

关于绿叶。这些对并发有什么帮助？到目前为止，我看到的所有目的都是在函数和不太复杂的屈服函数之间轻松切换。

编辑：在世界上，像 Tornado 这样的服务器如何处理数千个同时连接？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T03:20:39.140

你是对的 - 当 python 等待 C 代码执行时，GIL 被释放，这就是你如何获得一些加速。但是一次只能执行一行python。请注意，这是一个 CPython（实现）细节，而不是严格地说是语言 python 本身的一部分。例如，[Jython 和 IronPython 没有 GIL，可以充分利用多处理器系统](http://wiki.python.org/moin/GlobalInterpreterLock)。

如果您需要在 CPython 中进行真正的并发编程，您应该考虑[多处理](http://docs.python.org/2/library/multiprocessing.html)而不是线程。

# java - Java - 特定数字的重复功能

> ID：14765072
> 
> 赞同：2
> 
> 时间：2013-02-08T03:10:18.640
> 
> 标签：java, loops, for-loop

我对编程非常陌生，但我正在努力提高我作为程序员的技能。最近，我给自己一个挑战来确定给定数字的哪些倍数由不同的数字组成。我已经完成了大部分工作，但我仍然需要使代码适用于每个输入数字的倍数的数字。到目前为止我工作的代码如下：

```
Integer numberA = 432143;
Integer numberB = numberA;
Integer[] digitArray = new Integer[numberA.toString().length()];
int index;
for (index = 0; index < digitArray.length; index++) {
    digitArray[index] = (numberA % 10);
numberA /= 10;
}
int repeats = 0;
for (int i = 0; i < digitArray.length; i++) {
    for (int j = 0; j < digitArray.length; j++) {
    if ((i != j) && (digitArray[i]==digitArray[j])) repeats = repeats + 1;
    }
}
if (repeats == 0) {
  System.out.println(numberB);
} 
```

这将确定该数字是否由不同的数字组成，如果是，则将其打印出来。我花了很多时间试图让其余的代码工作，这就是我想出的：

```
Integer number = 1953824;
Integer numberA = number;
Integer numberB = numberA;
for (Integer numberC = number; numberC.toString().length() < 11; 
            numberC = numberC + number) {
    Integer[] digitArray = new Integer[numberA.toString().length()];
    int index;
    for (index = 0; index < digitArray.length; index++) {
        digitArray[index] = (numberA % 10);
        numberA /= 10;
    }
    int repeats = 0;
    for (int i = 0; i < digitArray.length; i++) {
        for (int j = 0; j < digitArray.length; j++) {
            if ((i != j) && (digitArray[i]==digitArray[j])) repeats = repeats + 1;
        }
    }
    if (repeats == 0) {
        System.out.println(numberB); 
    }
} 
```

我不知道为什么，但是如果数字由不同的数字组成，他只会打印很多次，如果不是，则将其留空。如果有人能告诉我为什么会发生这种情况，或者甚至告诉我我需要做些什么来解决它，那就太好了。请记住，我对编程非常陌生，因此请对您使用的任何不寻常的术语进行简短解释。我渴望学习，但我目前知道的很少。感谢您的宝贵时间，我非常感谢您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:19:20.780

您在 for 循环之前将 numberA 的值分配给 numberB（这是 number 的值）。之后，numberB 永远不会被修改或分配给新值，因此对于每次通过 for 循环，您只需打印 numberB 的值，在这种情况下始终为 1953824。

可以进行一些更正以达到您想要的结果，同时稍微清理代码。首先是更改打印语句以打印正确的数字：

```
System.out.println(numberC); 
```

由于 numberC 是由 for 循环更新的变量，如果没有重复数字，这就是您想要有条件地打印出来的变量。由于我们已经将 numberB 替换为 numberC，这意味着不再需要 numberB，您可以删除它的声明。

现在，下一个问题是当你定义数字数组时——你应该使用 numberC 的长度，而不是 numberA。此外，在 for 循环中，您应该为 numberA 分配 numberC 的值，否则最终只会将 0 存储在您的 digitArray 中。总的来说，它应该是这样的。

```
 Integer number = 1953824;
    Integer numberA = number;

    for (Integer numberC = number; numberC.toString().length() < 11; 
                    numberC = numberC + number) {

        Integer[] digitArray = new Integer[numberC.toString().length()];
        numberA = numberC;
        int index;
        for (index = 0; index < digitArray.length; index++) {
            digitArray[index] = (numberA % 10);
            numberA /= 10;
        }
        int repeats = 0;
        for (int i = 0; i < digitArray.length; i++) {
            for (int j = 0; j < digitArray.length; j++) {
                if ((i != j) && (digitArray[i] == digitArray[j]))
                    repeats = repeats + 1;
            }
        }
        if (repeats == 0) {
            System.out.println(numberC);
        }
    } 
```

这应该会产生预期的结果。它似乎在我的机器上工作:)

如果需要，您可以采纳 Jeffrey 的建议，将 Integer 更改为原始 int 以避免装箱的开销。但是，您仍然需要使用 Integer 类来使用 toString() 方法，但是您可以使用 Integer 来完成。[值](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#valueOf%28int%29)（）：

```
Integer.valueOf(numberC).toString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:19:44.603

因此，如果我理解正确，您正在尝试找出您的号码中是否存在某些倍数。与其不断除以 10，不如使用模数符号。您甚至可以将其嵌入到条件语句中。

例如：

```
if(numberOne % 2 == 0) 
```

然后我们知道 numberOne 除以 2 余数为零，因此是 2 的倍数

# php - 通过 https:// 使用 GET 参数的 file_get_contents 的安全性如何

> ID：14765073
> 
> 赞同：1
> 
> 时间：2013-02-08T03:10:20.813
> 
> 标签：php, security, file-get-contents

我通过以下方式使用“file_get_contents”：

（下面的脚本发布在，例如[https://siteA.com/checkifvalid.php](https://siteA.com/checkifvalid.php) ...注意 URL 是 httpS）

```
<?php
//there is a login form on this URL and the entries put in the form are used to set the username & password variables below.
$username = "someusername";
$password = "somepassword";
$secretkey = "slkd89087235";

$yesorno = file_get_contents("httpS://siteB.com/checkdatabase.php?username=$username&password=$password&secretkey=$secretkey");

if ($yesorno == 'yes') {
//details are valid, so something 
} else {
//details aren't valid, display they aren't valid
}
?> 
```

“checkdatabase.php”脚本使用 _GET 获取用户名和密码，并从 URL 中获取变量，然后交叉引用这些登录详细信息以查看它们是否有效。如果是，则回显“是”，如果不是，则回显“否”。

checkdatabase.php 脚本设置为仅在用户名、密码和密钥参数都已传递的情况下运行，并且仅当已传递的密钥值与存储在该 php 脚本中的密钥匹配时才运行。

[在给定的时间范围内，“ http://siteA.com/checkifvalid.php](http://siteA.com/checkifvalid.php) ”的输入次数也将受到限制，以防止一种“暴力”攻击猜测用户/密码组合。

我的问题是，当两个 URL 都使用 httpS 时，上述方法的安全性如何？

我应该加密发送的值吗？或者上面的东西已经安全了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T03:26:39.893

[更新] 在发表了几条评论后，我意识到我阅读并回答您的问题太快了。我改变主意了。

# 回答您的确切问题

## HTTPS 与您的私钥一样安全

除非您的攻击者有权访问私有 SSL 密钥，否则 HTTPS 是安全的。如果您的服务器曾经受到威胁，那么 HTTPS 也会受到威胁，直到您生成新密钥。

## 比起 GET 更喜欢 POST

其次，如果你真的要为此使用 HTTP，你应该使用 POST 而不是 GET。

~~1）语义原因：您要求其他服务器做某事。该操作不是[幂等](http://en.wikipedia.org/wiki/Idempotence)的，但 GET 方法是（至少在理论上）。~~正如@Gumbo 在评论中指出的那样，您只是在进行检查，而不是在目标服务器上运行任何操作，因此关于幂等性的评论在这里不适用。

2) 您的密码可能会显示在访问日志中。尽管默认情况下不同的堆栈似乎以不同的方式处理 HTTPS 登录，但您不应该冒险并假设 GET 请求最终会出现在某个日志文件中。

您可以像这样使用[cURL](http://php.net/manual/en/book.curl.php)进行 POST：[PHP + curl, HTTP POST 示例代码？](https://stackoverflow.com/questions/2138527/php-curl-http-post-sample-code)

## 不要发布/存储纯文本密码

**存储和发布加密密码** 您的主数据库不应存储纯文本密码。相反，在保存之前对其进行加密，然后在比较之前对提交的用户输入进行加密。

**使用共享公钥**

您可以实现共享密钥，而不是发布纯文本用户名/密码/秘密。这与 HTTPS 使用的机制基本相同。使用此方法，您可以安全地通过 HTTP 发送此请求。

阅读[public-key cryptography](http://en.wikipedia.org/wiki/Public-key_cryptography)，它真的很容易理解。使用[`openssl_public_encrypt()`](http://php.net/manual/en/function.openssl-public-encrypt.php).

在此处阅读有关最后一个的更多信息：[openssl_public_encrypt() 和 openssl_private_encrypt() 的输出](https://stackoverflow.com/questions/10315420/output-of-openssl-public-encrypt-and-openssl-private-encrypt)

# 不同的方法

## 直接查询远程数据库

到目前为止，最简单的方法是在 siteB 上设置 Mysql 守护程序以仅接受来自 siteA 的远程连接，并直接从 siteA 查询 siteB 数据库。这根本不涉及 HTTP。只需确保您的 MySQL 密码是安全的，受 IP 限制，并且不要存储纯文本密码。

## 编写[OAUTH](http://en.wikipedia.org/wiki/OAuth)提供者服务

来自维基百科：

> [OAUTH] 为最终用户提供了一个流程，可以使用用户代理重定向授权第三方访问其服务器资源，而无需共享其凭据（通常是用户名和密码对）。

这是我发现的第一篇关于编写自己的文章：http: [//toys.lerdorf.com/archives/55-Writing-an-OAuth-Provider-Service.html](http://toys.lerdorf.com/archives/55-Writing-an-OAuth-Provider-Service.html)

如果这是你要走的路，你最好使用 Zend Framework 中的 OAUTH 组件或类似的东西。

# jquery - 在Global.asax.cs中设置cookie并在asp.net mvc c#的视图中获取

> ID：14765074
> 
> 赞同：0
> 
> 时间：2013-02-08T03:10:20.963
> 
> 标签：jquery, asp.net-mvc, cookies

我在 asp.net mvc 项目的 Global.asax.cs 的会话开始中注册了 cookie。然后我想在 View 中测试 cookie 的变量。

全球.asax.cs：

```
HttpCookie instock = new HttpCookie("instockV");
instock.Value = "1";
Response.Cookies.Add(instock); 
```

在我看来，我正在使用 jquery ：

```
<div id="test"></div>
$("#test").text($.cookie("instockV")); 
```

但我的 div 中的结果是`null`.

谁知道这个问题，请分享。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:28:37.557

你添加了jquery cookie的插件吗？如果你没有它，永远不要少，用纯javascript读取cookie它的代码很容易做到这一点

```
function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            return unescape(y);
        }
    }
} 
```

**更新**

在你 Global.asax 中尝试过这样的附加

```
HttpCookie instock = new HttpCookie("instockV");
instock.Value = "1";
Response.AppendCookie(instock); 
```

# servicestack - 您将如何使用 ServiceStack 实现部分请求和响应，例如 youtube api？

> ID：14765079
> 
> 赞同：5
> 
> 时间：2013-02-08T03:10:32.313
> 
> 标签：servicestack

在 Youtube API 中，可以请求[“部分供稿”](https://developers.google.com/youtube/2.0/developers_guide_protocol_partial)。

这允许应用程序开发人员通过指定要返回的“字段”来定制返回数据的大小和结构。

即将返回一个仅包含和字段`GET api/person/1?fields=(id,email)`的 DTO ，而不是整个人的响应。`id``email`

您将如何使用 ServiceStack 尝试此操作？是否有某种方法可以将回调附加到序列化程序以控制要包含在响应对象中的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:04:51.370

根据我的经验，servicestack 只返回实际包含数据的字段。如果我的经验是正确的，那么您需要做的就是找出构建请求的最佳方法，以便它要求返回特定的数据，这样您就只会用请求的数据填充响应，因此 servicestack 只会返回那个.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T23:40:25.440

我为只返回 JSON 的 API 实现了这一点。

首先，我创建了两个结构来（反）序列化和解释“字段”查询参数递归语法：

*   `FieldSelector`，它指定了一个字段以及可能`FieldSelection`包含在括号之间的子项；
*   `FieldsSelection`，这是一个逗号分隔的列表`FieldSelector`。

我使用了结构而不是类，因为根据 AFAIK，您无法覆盖 ServiceStack 中从/到 URL 的类（反）序列化。使用结构，您可以通过覆盖`ToString`（序列化程序）并提供一个接受字符串作为参数的构造函数（反序列化程序）来实现。

然后在每个返回 JSON 的请求 DTO 中包含它：

```
FieldsSelection Fields { get; set; } 
```

在自定义上`ServiceRunner<T>.OnAfterExecute`，您将响应 DTO 序列化为 JSON，使用 ServiceStack.Text 解析它，`JsonObject`并使用如下方法递归应用字段选择：

```
private static JsonObject Apply(this JsonObject json, FieldsSelection fieldMask)
{
  IEnumerable<string> keysToRemove = json.Keys.ToList().Except(fieldMask.Keys);

  foreach (var key in keysToRemove)
    json.Remove(key);

  foreach (var selector in fieldMask.Selectors.Values.Where(s => s.HasSubFieldsSelection))
  {
    var field = json[selector.Field];
    if (field == null)
      continue;

    switch (field[0])
    {
      case '{':
        json[selector.Field] = Apply(json.Object(selector.Field), selector.SubFieldsSelection).ToJson();
        break;
      case '[':
        var itensArray = json.ArrayObjects(selector.Field);
        for (int i = 0; i < itensArray.Count; i++)
          itensArray[i] = Apply(itensArray[i], selector.SubFieldsSelection);
        json[selector.Field] = itensArray.ToJson();
        break;
      default:
        throw new ArgumentException("Selection incompatible with object structure");
    }
  }

  return json;
} 
```

然后将结果作为响应 DTO 返回。我还实现了负字段选择器（`fields=-foo`选择除 foo 之外的所有 DTO 字段），但您明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:52:41.560

查看[ServiceStack.Text.JsConfig](https://github.com/ServiceStack/ServiceStack.Text/blob/master/src/ServiceStack.Text/JsConfig.cs)属性，它们具有 ServiceStack 的文本序列化程序支持的所有钩子和自定义项。具体来说，允许您自定义反序列化的钩子是：

```
JsConfig<T>.DeserializeFn 
JsConfig<T>.RawDeSerializeFn 
JsConfig<T>.OnDeserializedFn 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T10:36:43.670

我们能够通过添加自定义服务运行器并在其中使用一些反射来构建`ExpandoObject`由响应 DTO 设置的必填字段来实现所述过滤。有关服务运行器的更多信息，请参阅[此内容。](http://s5315.socode.info/question/51502526e8432c042626c650)

# javascript - jScrollPane 与 WooCommerce 和动态博客页面冲突

> ID：14765081
> 
> 赞同：-1
> 
> 时间：2013-02-08T03:10:37.193
> 
> 标签：javascript, jquery, wordpress, jscrollpane, woocommerce

我在我正在开发的 WordPress 网站上安装了 jScrollPane 插件。它在网站的静态页面上效果很好，我按照我想要的方式设置了它的样式。我的麻烦在两个地方。

第一个问题是在“商店”页面上，感谢 FireBug，我发现我正在使用的 WooCommerce 类别下拉小部件存在某种问题。我通过从侧边栏中删除小部件来确认这一点，并且页面很好。客户想要那个下拉菜单，所以我需要修复它。这个问题还没有开始我安装了jScrollPane。

第二个问题是在“观点”页面上。jScrollPane 没有替换标准滚动条，但 div ID 是相同的。FireBug 告诉我这与我正在使用的 lettering.js 脚本有关。嗯？为什么只在这个页面上？

这就是我所知道的，并且尽我所能。我不是程序员，所以我不知道下一步该做什么。任何帮助将不胜感激。这是该网站的网址：http: [//jeanliu.tempora.com](http://jeanliu.tempora.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:00:25.970

这是大多数其他页面上的字体：- [http://jeanliu.tempora.com/wp-includes/js/jquery/jquery.lettering-0.6.1.min.js](http://jeanliu.tempora.com/wp-includes/js/jquery/jquery.lettering-0.6.1.min.js)

这就是您的观点页面上的内容：- [http://jeanliu.tempora.com/category/wp-includes/js/jquery/jquery.lettering-0.6.1.min.js](http://jeanliu.tempora.com/category/wp-includes/js/jquery/jquery.lettering-0.6.1.min.js)

如果您修改位置，它应该可以工作。

# c - fgets 和不可打印字符

> ID：14765082
> 
> 赞同：3
> 
> 时间：2013-02-08T03:10:39.680
> 
> 标签：c, io

fgets 可以将不可打印的字符读入给定的 char*（看来我不能）吗？如果不是，那么允许最大数量的输入字符从流到 char* 的替代方法是什么？

**编辑**（对于我的特殊情况）

我有一个将“Le\D7”打印到标准输出的编码器，该编码器通过管道传输到解码器，该解码器使用以下方法从其标准输入中获取该解码器：

```
if( fgets( inputChars, MAX_BYTES_IN, stdin ) == NULL )
{
    fprintf( stderr, "Trouble getting input\n" );
    return 0;
}

while( inputChars[crntChar] != '\0' && inputChars[crntChar] != '\n' )
{
    printf( "Value %d: %d\n", crntChar, inputChars[crntChar]);
    crntChar++;
} 
```

这导致：

```
Value 0: 76
Value 1: 101
Value 2: -41 
```

使用 fgetc 具有相同的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:37:18.353

由于无符号到有符号整数的转换，您得到了一个奇怪的值。

```
char x = 198;

printf("x = %d\n", x);
printf("(unsigned) x = %u\n", (unsigned) x);
printf("(unsigned char) x = %d\n", (unsigned char) x); 
```

输出：

```
x = -58
（无符号）x = 4294967238
（无符号字符）x = 198

```

`(unsigned char)`演员阵容就是你想要的。

请忽略我的代码中的签名溢出。请注意，如果您使用 GCC 和`-funsigned-char`标志进行编译，则输出为：

```
x = 198
（无符号）x = 198
（无符号字符）x = 198

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:22:02.577

最简单的方法是使用`fgetc()`. `fgets()`内部依赖`fgetc()`.

但是有很多选择，`fread()`作为其中之一。`fscanf()`.

`fgetc()`和其他人将可打印和不可打印字符读取到`char`数组中。A`char`只是一个以 ASCII 编码的 1 字节数字（或 2 字节`wchar_t`）。C中没有`printable`和`non printable`字符的概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:31:49.070

`fgets()`将读取一行字符串，在这种情况下读取直到换行`\n`/`0x0A`或`NULL`/ `EOF`。

或者您可以将 unsigned char* 用于不可打印的 ASCII。

所以在我看来，是的，`fgets()`可以读取不可打印的 ASCII

# android - android phonegap FileTransfer.download() 收到错误代码 3

> ID：14765085
> 
> 赞同：2
> 
> 时间：2013-02-08T03:11:40.453
> 
> 标签：android, cordova, file-transfer

我正在尝试使用 FileTransfer.download() 但无论我尝试什么似乎都会得到“错误代码 3”。任何帮助是极大的赞赏。

我正在使用基于 ecipe 构建的 cordova 2.1 和 zend studio 10 来构建我的清单和 apk 文件。

下面是我的代码

```
var fileTransfer = new FileTransfer();
    fileTransfer.download(
            "http://www.w3.org/2011/web-apps-ws/papers/Nitobi.pdf",
            "file:///sdcard/theFile.pdf",
        function(entry) {
            alert("download complete: " + entry.fullPath);
        },
        function(error) {
            alert("download error source " + error.source);
            alert("download error target " + error.target);
            alert("upload error code" + error.code);
        }); 
```

下面是我的科尔多瓦 xml 文件

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<widget xmlns="http://www.w3.org/ns/widgets" xmlns:gap="http://phonegap.com/ns/1.0" id="com.phonegap.example" version="1.0.0" versionCode="1">
  <name>App</name>
  <feature name="http://api.phonegap.com/1.0/file"/>
  <feature name="http://api.phonegap.com/1.0/network"/>
  <feature name="http://api.phonegap.com/1.0/device"/>
  <access origin=".*" />
</widget> 
```

和我的 android manifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.phonegap.example"
    android:versionCode="1"
    android:versionName="1.0.0" 
    >

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:configChanges="orientation|keyboardHidden"
            android:name=".PhonegapActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我也尝试在我的应用程序标签中设置 android:debuggable="true"

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T16:07:25.130

所以我终于找到了问题所在。这是一个 CORS 问题

我在我的科尔多瓦 config.xml 中有正确的设置

```
<access origin=".*" /> 
```

然而，当 Zend studio 构建我的 android 项目时，这个设置并没有转移到我的 res/xml/config.xml

在该文件中添加访问源行后，一切都按预期开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-21T12:10:05.737

我解决了这个错误。需要在失败回调函数后添加 'true' 参数，请参见下面的代码并为大家加油。

```
fileTransfer.download(
            "http://www.w3.org/2011/web-apps-ws/papers/Nitobi.pdf",
            "file:///sdcard/theFile.pdf",
        function(entry) {
            alert("download complete: " + entry.fullPath);
        },
        function(error) {
            alert("download error s`enter code here`ource " + error.source);
            alert("download error target " + error.target);
            alert("upload error code" + error.code);
        }, true); 
```

# vb.net - 多维数组和列表框 (VB.Net)

> ID：14765091
> 
> 赞同：-1
> 
> 时间：2013-02-08T03:12:41.503
> 
> 标签：vb.net

我是 VB.Net 的新手，对某些事情感到有些困惑。我想要两个列表框，每个列表框我已经有项目。在我的第一个列表框中我有 4 个项目，在我的第二个列表框中我有 5 个项目。我还添加了一个文本框，用于存储我想要存储在数组中的值。

例如：如果我选择第一个文本框的第一个值，和第二个文本框的第二个值并在文本框中键入“5”，则 5 将存储在数组的 (0,1) 中。

然后，我希望第一个列表框的每个项目的所有值都显示在标签中，第二个项目、第三个项目和第四个项目相同。我想我需要一个循环。

我知道如何创建一个数组，以及如何在数组中存储值，但我似乎无法弄清楚如何使用列表框和文本框让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:31:07.420

我创建了一个包含以下控件的表单：

```
ComboBox1  
ComboBox2  
Button1  
TextBox1 
```

我向 Form_Load 和 Button1_Click 事件添加了代码，并创建了一个 ComboBox_SelectedIndexChanged 事件处理程序来处理两个组合框索引更改。

```
Public Class Form1
    Private _array(,) As String
    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        ReDim _array(0 To ComboBox1.Items.Count, 0 To ComboBox2.Items.Count)
    End Sub

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Dim c1 As Integer = If(ComboBox1.SelectedIndex = -1, 0, ComboBox1.SelectedIndex)
        Dim c2 As Integer = If(ComboBox2.SelectedIndex = -1, 0, ComboBox2.SelectedIndex)
        Debug.Print(String.Format("Set ({0},{1}) to {2}", c1, c2, TextBox1.Text))
        _array(c1, c2) = TextBox1.Text
    End Sub

    Private Sub ComboBox_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ComboBox1.SelectedIndexChanged, ComboBox2.SelectedIndexChanged
        Dim c1 As Integer = If(ComboBox1.SelectedIndex = -1, 0, ComboBox1.SelectedIndex)
        Dim c2 As Integer = If(ComboBox2.SelectedIndex = -1, 0, ComboBox2.SelectedIndex)
        Debug.Print(String.Format("Get ({0},{1}) to {2}", c1, c2, TextBox1.Text))
        TextBox1.Text = _array(c1, c2)
    End Sub
End Class 
```

我要演示的是：
1\. 加载表单时调整数组的大小以匹配组合框中的元素数量。
2\. 数据加载到数组中的一个事件（在本例中为按钮单击事件）。
3\. 当任一组合框更改时再次检索数据。

希望有帮助。

# android - 根据网页验证 PhoneGap 应用程序用户的过程

> ID：14765092
> 
> 赞同：0
> 
> 时间：2013-02-08T03:12:48.890
> 
> 标签：android, session, cordova

我有一个基于 Web 的应用程序 (PHP-MySQL-JavaScript)，现在我的任务是创建一个使用 PhoneGap 连接到 Web 应用程序并同步数据的 Android 应用程序；甚至可以离线使用。

问题是我不知道如何在 PhoneGap 中验证和创建会话。

我知道如何使用“localStorage”存储数据，但我不知道连接、发送和检索数据（JSON？）和管理会话的最佳方式是什么。

那么，以专业、高效和安全的方式执行此操作的最先进技术是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:37:54.280

您可以使用 jQuery。要从 JSP Web 服务中检索数据：

```
function usejQueryGetJSONData(connUrl, listName) {
 jQuery.getJSON(connUrl, function(data){                
 listData = JSON.stringify(data);
 localStorage.setItem(listName, listData);  
});
} 
```

使用 PhoneGap 发送数据：

```
function uploadFiles(fileURI) {
var options = new FileUploadOptions();
options.fileKey="file";
options.fileName=fileURI.substr(fileURI.lastIndexOf('/')+1);
options.mimeType="text/plain";
options.chunkedMode = false;
var params = new Object();
options.params = params;
var ft = new FileTransfer();
ft.upload(fileURI, "http://UrILink", win, failUpload, options);
} 
```

我有登录功能来进行身份验证，但不需要管理会话。

# windows-installer - 温莎安装人员应该坐在哪一层？

> ID：14765093
> 
> 赞同：0
> 
> 时间：2013-02-08T03:13:01.827
> 
> 标签：windows-installer, castle-windsor

在使用 Windsor 安装程序时，我们一直将它们视为配置，因为顶级应用程序负责它们，允许调用应用程序设置自己的生活方式等。

我开始怀疑这是正确的方法，例如我们有一个被许多应用程序使用的域 DLL，这意味着我们必须在使用该域的每个应用程序中重复相同的安装程序，并在新的依赖项时更新所有应用程序被添加。

我们的安装人员应该住在哪里？域应该是自我注册的吗？我们是否充分利用了金莎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:37:16.860

您可以为每个项目创建一个 WindsorInstaller，以便将所有项目特定的注册和配置封装在其中，而不是由使用程序集的项目决定。

然后，依赖程序集只需要在初始化容器时传入安装程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T01:52:23.357

安装程序是应用程序级别的引导程序，因此应该位于应用程序根目录中。

这有几个优点，我不会详细说明。

更重要的是这个：

> 即使您的多个应用程序最终会使用完全相同的一组给定组件的安装程序......那又如何？

这是**偶然**的，并且试图通过重用安装程序的几行代码来*“优化”*它是 IMO 明智的做法。

相反，通过使您的安装程序特定于应用程序，您获得的是轻松更改它们的灵活性，并且随着应用程序的成熟，您会发现您需要调整安装程序，以适应您的应用程序的特定需求。

希望有帮助

# c# - Xna 事件 忽略左键单击，然后立即双击

> ID：14765094
> 
> 赞同：2
> 
> 时间：2013-02-08T03:13:07.537
> 
> 标签：c#, xna, mouseevent

我有一个将鼠标事件分派到侦听器列表的方法。问题是，如果我只是使用

```
 [Obsolete]
    private void DispatchOld(MouseEvent e)
    {
        foreach (var listener in _listeners)
        {
            listener.OnMouse(e, _currentState);
        }
    } 
```

然后，当我双击鼠标时，立即触发左键单击，然后双击。我正在努力做到这一点，如果我双击，那是唯一触发的事件，没有左键单击。所以本质上，如果检测到左键单击，我想推迟调度该事件，直到我知道下一步是否双击，否则只处理诸如中键单击、右键单击等事件，通常没有任何延迟或修改。使用我的新代码，这几乎可以工作，除了当我单击左键时，该事件不会触发，而是等待并触发双击。有人可以提出解决此问题的方法吗，我想检测单击左键和双击，但不检测左键，然后立即双击。所以 LRLRLDLLLD 应该是 LRLRDLLD。事件是一个`Stack<MouseEvent>`. 添加事件后，在 Update 循环中调用 Dispatch。

```
 private void Dispatch()
    {
        bool wait = false;

        foreach (var item in Events)
        {
            if (!wait)
            {
                if (item == MouseEvent.LeftClick) { wait = true; } // Delay the left click
                else
                {
                    foreach (var listener in _listeners)
                    {
                        listener.OnMouse(item, _currentState);
                    }
                }
            }
            else
            {
                if (item == MouseEvent.DoubleClick)
                {
                    foreach (var listener in _listeners)
                    {
                        listener.OnMouse(MouseEvent.DoubleClick, _currentState);
                    }
                }
                else
                {
                    foreach (var listener in _listeners)
                    {
                        listener.OnMouse(MouseEvent.LeftClick, _currentState); // The delayed event
                        listener.OnMouse(item, _currentState);
                    }
                }

                wait = false; // Delt with wait, continue as normal
            }             
        }

        Events.Clear();
    } 
```

我想不出解决这个问题的方法，我的代码感觉混乱和重复，我可以重命名并使用 dispatchOld 来消除一些重复，但我想把所有东西都放在一个方法中。我的程序的另一部分正在触发事件流，该部分可以正常工作，检测事件并发送它们。

* * *

\\\\\\\\\\\\\\\\\\\\\\\ 已回答 \\\\\\\\\\\\\\\\\\\\\\\\\

编辑：我似乎已经使用`System.Diagnostics.StopWatch()`.

使用 System.Diagnostics 中包含的秒表，我能够获得所需的行为

```
 private Stopwatch _delayTimer = new Stopwatch();

    private void Dispatch(MouseEvent e)
    {
        foreach (var listener in _listeners)
        {
            listener.OnMouse(e, _currentState);
        }
    }

    private void Dispatcher()
    {
        const long maxDelay = 200;

        foreach (var item in Events)
        {
            if (_delayTimer.IsRunning) // Running because Left trigger
            {
                if (item == MouseEvent.DoubleClick)
                {
                    _delayTimer.Reset();
                    Dispatch(MouseEvent.DoubleClick);
                    return; // Delt with
                }

                if (_delayTimer.ElapsedMilliseconds >= maxDelay) // Waited too long, must be a real left click
                {
                    _delayTimer.Reset();
                    Dispatch(MouseEvent.LeftClick);
                    Dispatch(item);
                    return; // Delt with
                }
            }
            else
            {
                if (item == MouseEvent.LeftClick) // Ignore and return, but start timer from zero
                {
                    _delayTimer.Restart();
                    return;
                }
                Dispatch(item);
            }
        }           
    } 
```

它仍然有点乱，我将 Dispatch 重命名为 Dispatcher 并重命名 DispatchOld Dispatch。以免在Dispatcher方法中重复自己。我也开始意识到我可能不需要使用堆栈，因为每次在我的更新代码中检测到事件时，都会调用调度程序，因此永远不会有累积的堆栈。我正在优化代码。目前，上述作品如广告所示，我再次提出问题并亲自回答。

# java - 从 ListView 获取数据库 ID

> ID：14765097
> 
> 赞同：2
> 
> 时间：2013-02-08T03:13:16.100
> 
> 标签：java, android

我从数据库（id，name）中获取数据，我想在 ListView 中显示（name）。当用户单击时，我需要获取数据库（id）来执行操作。我让它工作，但我的解决方案对于这么简单的事情来说似乎很复杂。我想以某种方式将（id）以隐藏的方式存储在 ListView 中，并在用户选择项目时能够检索它。这是我的解决方案：

```
class Route { //structure to store the data in ListView
    public int id;
    public String name;
    public Route (int Id, String Name) {
        id = Id;
        name = Name;
    }
}

// Create a custom adapter, we also created a corresponding
// layout (route_row) for each item of the ListView
public class MySimpleArrayAdapter extends ArrayAdapter<Route> {
      private final Context context;
      private final String[] values;

      public MySimpleArrayAdapter(Context context, ArrayList<Route> routes) {
        super(context, R.layout.route_row, routes);
        this.context = context;
        //Get the list of string array to display in the ListView
        String[] values = new String[routes.size()];
        //Loop around all the items to get the list of values to be displayed
        for (int i=0; i<routes.size(); i++) values[i] =  
                  routes.get(i).id + " - " + routes.get(i).name;
        //We added route.id to route.name for debugging but route.id is not necessary
        this.values = values; //String array used to display data in the ListView
      }

      @Override
      public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.route_row, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.routeName);
        textView.setText(values[position]);

        return rowView;
      }
    } 

//output is a JSON array composed of JSON object routes 
void DisplayListView(String output) { (id, name)
    ListView listView = (ListView) findViewById(R.id.listView1);

    ArrayList<Route> list = new ArrayList<Route>();

    //Convert the JSON to ArrayList<Route>
    try {
    JSONArray json = new JSONArray(output); //Get JSON array
    JSONObject jsonObj;
    int id;
    String name;
    for(int i=0;i<json.length();i++) {
        jsonObj = json.getJSONObject(i); //Get each JSON object
        id = jsonObj.getInt("Id");
        name = jsonObj.getString("Name");
        list.add( new Route(id, name));
    }
    }
     catch (Exception ex) {
        Log.w("Commute", ex.toString());
         ex.printStackTrace();
     } 

    //Create ArrayAdapter
    MySimpleArrayAdapter adapter = new MySimpleArrayAdapter(getApplicationContext(), 
                                                                    list);
    // Assign adapter to ListView
    listView.setAdapter(adapter); 

    //Set a listener
    listView.setOnItemClickListener(new OnItemClickListener() {
          @Override
          public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
            Toast.makeText(getApplicationContext(),
              "Click ListItem Number " +
                          ((Route)parent.getItemAtPosition(position)).id,
                           Toast.LENGTH_LONG)
              .show();
            //It works when user clicks we display route.id 
          }
        }); 
    } 
```

有没有更简单的方法来做到这一点？我发现了类似的问题，但没有简单或明确的答案。
我可以避免使用自定义适配器吗？我只想显示一个简单的 ListView，每行都有一个文本。
我可以避免循环 ArrayAdapter 为 adpater 创建 String 数组吗？这似乎确实是一种低效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:57:22.307

使用 View 的 setTag() 方法将您自己的对象附加到视图。然后你可以使用这样的东西：

```
 vh.favourite.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            ForumThread th = (((ViewHolder) view.getTag()).thread);
            th.setWatched(!th.isWatched());
            th.saveLater();
            notifyDataSetChanged();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T06:13:37.540

我稍后会详细说明答案，但这里是答案的一部分。

*   创建 ListActivity 是一种更好的开始方式（将负责注册监听器以进行项目点击）

*   在自定义数组适配器中，覆盖：以在被调用`public long getItemId (int position)`时返回适当的 id 。`onListItemClick`

*   使用 SimpleCursorAdapter 时，似乎数据库 ID 将由`onListItemClick`. 这可能是因为我们在绑定 SimpleCursorAdapter 时提供了 id：
    `new String[] { "Name", "IsOffer", "Distance", BaseColumns._ID }, //Columns from table BaseColumns._ID new int[] { R.id.name, R.id.isOffer, R.id.distance, R.id.id },`

# ruby - 我可以将参数值添加到哈希中吗？

> ID：14765102
> 
> 赞同：0
> 
> 时间：2013-02-08T03:13:50.173
> 
> 标签：ruby, ruby-on-rails-3

我有一个用户模型。我还有一个 form_for(@user...) 表单。这种形式跨越 3 个部分。为了让每个部分都记住值，我在 UsersController 的创建操作中使用以下命令：

```
session[:user_params].deep_merge!(params[:user]) if params[:user] 
```

这样每个部分都将 params[:user] 添加到 session[:user_params]。我还在 params 散列中存储了其他表单值，它们不属于 User 模型的一部分。是否有一个命令可以让我将所有单个参数值（不仅仅是 :user 哈希）添加到 session[:user_params] 哈希中，而无需像这样一一添加每个值：

```
session[:num_children] = params[:num_children] if params[:num_children]
...etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:20:56.583

尝试：

```
params.each {|key,value| session.deep_merge!(key=>value)} 
```

# r - R中的泰勒近似

> ID：14765103
> 
> 赞同：12
> 
> 时间：2013-02-08T02:33:13.163
> 
> 标签：r

**R**中是否有一个函数/包，它接受一个函数 f 和一个参数 k，然后返回 k 次 f 的泰勒近似值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T03:26:38.660

您可以使用[`Ryacas`](http://cran.r-project.org/web/packages/Ryacas/) yacas[计算机](http://yacas.sourceforge.net/homepage.html)代数系统（您也需要安装）

使用小插图中的示例

```
 library(Ryacas)
 # run   yacasInstall() if prompted to install yacas
 #
 yacas("texp := Taylor(x,0,3) Exp(x)")
 ## expression(x + x^2/2 + x^3/6 + 1)
 # or 
```

现在，如果你想把它变成一个你可以给出值的函数`x`

```
myTaylor <- function(f, k, var,...){
  .call <- sprintf('texp := Taylor( %s, 0, %s) %s', var,k,f)
  result <- yacas(.call)
  foo <- function(..., print = FALSE){
    if(print){print(result)}
    Eval(result, list(...))}
  return(foo)
}
# create the function
foo <- myTaylor('Exp(x)', 3, 'x')
foo(x=1:5)
## [1]  2.666667  6.333333 13.000000 23.666667 39.333333
foo(x=1:5, print = TRUE)
## expression(x + x^2/2 + x^3/6 + 1)
## [1]  2.666667  6.333333 13.000000 23.666667 39.333333 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T08:47:17.107

将上述符号解与数值泰勒近似进行比较：

```
library(pracma)

p <- taylor(f = exp, x0 = 0, n = 4)             # Numerical coefficients 
# 0.1666667 0.5000000 1.0000000 1.0000000       # x^3/6 + x^2/2 + x + 1

polyval(p, 1:5)                                 # Evaluate the polynomial
# 2.66667  6.33333 13.00000 23.66667 39.33334   # exp(x) at x = 1:5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T09:55:37.410

如果您在误差传播的背景下要求泰勒近似，您可以尝试我的包的“传播”函数，它以（著名的误差传播矩阵表示法）`qpcR`的形式评估符号梯度向量和协方差矩阵，`g * V * t(g)`相当于一阶泰勒展开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T17:54:16.287

作为后续，请考虑：

```
 foo <- myTaylor('Exp(x)', 3, 'x')
sprintf('%2.15f',foo(x=1:5))
[1] "2.666666666666667"  "6.333333333333333"  "13.000000000000000"
[4] "23.666666666666664" "39.333333333333329"

p <- taylor(f = exp, x0 = 0, n = 3)
sprintf('%2.15f',polyval(p,1:5))
[1] "2.666666721845557"  "6.333333789579300"  "13.000001556539996"
[4] "23.666670376066413" "39.333340601497312" 
```

其中哪一个更准确，我将留给读者:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-21T15:55:15.410

下面的函数返回通过在点 a 处使用函数 f 的 n 阶的泰勒级数逼近获得的函数。

```
taylor <- function(f, n, a) {

    ith_derivative <- as.expression(body(f))
    f_temp <- function(x) x
    series <- as.character(f(a))
    for (i in seq_len(n)) {
        ith_derivative <- body(f_temp) <- D(ith_derivative, "x")
        series <- paste0(series, "+", f_temp(a) / factorial(i), "*(x - ", a, ")^", i)
    }
    f_output <- function(x) x
    body(f_output) <- parse(text = series)
    f_output

}

taylor(f = function(x) sin(x), n = 3, a = 0) 
```

# java - JAVA - 在没有文件名/位置弹出窗口的情况下打印 XPS

> ID：14765105
> 
> 赞同：2
> 
> 时间：2013-02-08T03:13:52.533
> 
> 标签：java, printing, xps

所以我为我爸爸写了一个java程序来打印收据和东西。我的初衷是向他的收据打印机打印一些关于他所做的每笔交易的信息。但是，打印机在打印我发送的内容时遇到了一些问题，而没有将其剪裁到一个极点。

我的下一个想法，效果很好，是将“收据”保存到 XPS 文件中，然后打印 XPS，它不会剪辑它，并且会使一切变得美好。现在，我可以使用 Microsoft 的 XPS Document Writer PrintService 打印到 XPS 文件中。问题是，当我这样做时，它总是会弹出一个框，询问文件名和保存位置。

无论如何设置它以便根本不显示该弹出窗口？

当前代码：

```
PrinterJob job = PrinterJob.getPrinterJob();
job.setPrintable(this);
try {
    job.print();
} catch (PrinterException ex) {
    // The job did not successfully complete 
} 
```

-

```
@Override
public int print(Graphics g, PageFormat pf, int page) throws PrinterException {
     String temp;

    if (page > 0) { /* We have only one page, and 'page' is zero-based */
        return NO_SUCH_PAGE;
    }

    Graphics2D g2d = (Graphics2D)g;
    g2d.translate(pf.getImageableX(), pf.getImageableY());
    int lineSize=20;

    Font testFont=new Font("Lucida Console", 0, 20);
    g.setFont(testFont);

    g.drawString("      Fatura/Recibo nº"+nmrRec+"      ", 5, 20);
    return PAGE_EXISTS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:43:51.643

您应该可以通过设置[Destination](http://docs.oracle.com/javase/7/docs/api/javax/print/attribute/standard/Destination.html)属性来做到这一点：

```
static void print(Printable printable, PrintService service)
throws PrintException,
       IOException {

    Path outputFile = Files.createTempFile(
        Paths.get(System.getProperty("user.home")), null, ".xps");

    Doc doc = new SimpleDoc(printable,
        DocFlavor.SERVICE_FORMATTED.PRINTABLE, null);

    PrintRequestAttributeSet attributes =
        new HashPrintRequestAttributeSet();
    attributes.add(new Destination(outputFile.toUri()));

    DocPrintJob job = service.createPrintJob();
    job.print(doc, attributes);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T16:55:02.897

所以我听从了 VGR 的建议，我得到了它的工作。这是我的最终代码，以防有人遇到同样的问题：

```
Date data = new Date();                                         //Data
DateFormat dataform = new SimpleDateFormat("dd-MM-yyyy");       //Data

PrintService service=getPrinterService("Microsoft XPS Document Writer");
if(service!=null){
    try{
        File outputFile = new File(dataform.format(data)+"-Recibo"+nmrRec+".xps");

        Doc doc = new SimpleDoc(new myReceipt(), DocFlavor.SERVICE_FORMATTED.PRINTABLE, null);

        PrintRequestAttributeSet attributes = new HashPrintRequestAttributeSet();
        attributes.add(new Destination(outputFile.toURI()));

        DocPrintJob job = service.createPrintJob();
        job.print(doc, attributes);
    } catch(Exception e){
        System.out.println("kaboom"+e);
    }
}
else{
    System.out.println("XPS Printer not found");
} 
```

还有我的收据类：

```
class myReceipt implements Printable{

    @Override
    public int print(Graphics g, PageFormat pf, int page) throws PrinterException {
        String temp;

        if (page > 0) { /* We have only one page, and 'page' is zero-based */
            return NO_SUCH_PAGE;
        }

        /* User (0,0) is typically outside the imageable area, so we must
         * translate by the X and Y values in the PageFormat to avoid clipping
         */
        Graphics2D g2d = (Graphics2D)g;
        g2d.translate(pf.getImageableX(), pf.getImageableY());
        int lineSize=20;

        Font testFont=new Font("Lucida Console", Font.BOLD, 20);
        // font name, style (0 for Plain), font size
        g.setFont(testFont);
        int line=20;

        g.drawString("        Fatura/Recibo nº"+nmrRec+"      ", 5, line);
        return PAGE_EXISTS;
    }
} 
```

# javascript - 如何快速加载jquery nicescroll

> ID：14765109
> 
> 赞同：0
> 
> 时间：2013-02-08T03:14:26.633
> 
> 标签：javascript, jquery

我在使用 ajax 选项卡jquery 的可能网页中使用 jquery nicescroll ( [http://areaaperta.com/nicescroll/ )。](http://areaaperta.com/nicescroll/)

我有调用 news.html 加载的 main.php 页面。

主文件

```
<nav>
<ul>
...
<li><a href="news.html">News</a></li>
...
</nav>
<section id="cont1">
...
</section>
<section id="cont2" style="display:none">
</section> 
```

ajax-load.js

```
$(document).ready(function() {
$("ul li a").click(function() {
;
    $("section#cont2").fadeIn(200).siblings().hide();
        $("ul li a").removeClass('current');
        $(this).addClass('current');

        $.ajax({ url: this.href, success: function(html) {
            $("section#cont2").empty().append(html);

            }
        });
    return false;
    }); 
```

新闻.html css

```
#content-scroll{
    height:500px;
    overflow-y: scroll;
} 
```

这是我的 news.html

```
<script type="text/javascript" src="assets/js/jquery.nicescroll.js"></script>

<script>
  $(document).ready(function() {

    $("#content-scroll").niceScroll({cursorcolor:"#000",background:"#ccc",autohidemode:false});
  });

</script>

<div id="content-scroll">
 .... long text ....
</div> 
```

我现在的问题是，在现场，当我调用 news.html 时，默认滚动将首先显示，然后在 jquery nicescroll 上显示。

该演示没有显示默认滚动，我认为这是因为 ajax tabbing jquery。

有什么方法不会显示默认滚动，而是快速加载 jquery nicescroll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:16:36.713

如果在 jQuery 调用之后加载默认滚动，它会起作用吗？

# c# - C# ToolStrip 插入标准菜单标准图标位置

> ID：14765110
> 
> 赞同：3
> 
> 时间：2013-02-08T03:14:42.187
> 
> 标签：c#, visual-studio-2012, icons

我在 stackoverflow 上找到了这篇文章[VS-2010_Location](https://stackoverflow.com/questions/14238151/net-toolstrip-menustrip-focus-issues)，关于创建工具条并在工具条中“插入标准项目”（如新建、打印、剪切、粘贴等）时使用的标准图标的位置。

但也许这对于 VS 2012 已经改变，因为我找不到这些图标。您在哪里可以找到 VS 2012 中的图标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T03:21:00.777

Visual Studio 2012 中缺少它，您可以从此处手动下载它[http://www.microsoft.com/en-us/download/details.aspx?id=35825](http://www.microsoft.com/en-us/download/details.aspx?id=35825)

# android - Android - “您的内容必须有一个 id 属性为 android.R.id.list 的 ListView”

> ID：14765113
> 
> 赞同：0
> 
> 时间：2013-02-08T03:14:55.240
> 
> 标签：android, android-activity, listactivity

我浏览了所有其他相同/相似的问题：

[Android：您的内容必须有一个 id 属性为 android.R.id.list 的 ListView](https://stackoverflow.com/questions/6647831/android-your-content-must-have-a-listview-whose-id-attribute-is-android-r-id-li)

[您的内容必须有一个 ID 属性为“android.R.id.list”的 ListView](https://stackoverflow.com/questions/11050817/your-content-must-have-a-listview-whose-id-attribute-is-android-r-id-list)

没有任何帮助。

不同之处在于我的 Activity 没有扩展 ListActivitiy （在上述情况下这似乎是问题）。

我的活动扩展了 FragmentActivity （我不能真正将其更改为 Activity，因为我有依赖项）。

```
public class MainActivity extends FragmentActivity 
```

... 列表显示

```
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:divider="#b5b5b5"
    android:dividerHeight="1dp"
    android:listSelector="@drawable/list_selector" >
</ListView> 
```

...片段视图。

```
<fragment
    android:id="@+id/contentFragment"
    android:name="com.landa.fragment.ContentFragment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/include1" /> 
```

我还尝试按照上述问题中的建议更改 ListView 的“id”格式 - Android 不同意该表示法。

内容片段扩展 ListFragment：

```
public class ContentFragment extends ListFragment { 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T03:41:25.300

第一个问题：

```
android:id="@+id/list" 
```

需要是

```
android:id="@android:id/list" 
```

然后，当您想要访问 时`ListView`，如果您在 Activity 中工作并且您有对 Fragment 的引用，则可以通过这种方式进行操作：

```
ListView l = fragment.getListView(); 
```

或者

```
ListView l = (ListView) fragment.getView().findViewById (android.R.id.list); 
```

如果你在片段中，调用`getListView()`就足够了。

也不要忘记，您可以`Fragment -> Activity`通过始终转换`getActivity()`为`YourActivity`调用您的逻辑方法或通过创建一个接口来处理它来进行通信。

# html - 内部填充不会归零

> ID：14765116
> 
> 赞同：1
> 
> 时间：2013-02-08T03:15:58.773
> 
> 标签：html, padding

我无法删除包含另一个的 a 的填充。我的网站是 www.housecallgeek.com/index.html。div 元素具有我无法删除的左右边距。源代码如下

```
<style>

html{height:100%; background: url("http://www.housecallgeek.com/gdb.png") no-repeat center center fixed
; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: 100% 100%;
}

div.title{height:20%; width:100%; border-style:solid; border-width:0; margin:auto;

background: url("cropped merged finished smaller.png") no-repeat 49% 4% fixed;
    -webkit-background-size: 63%;
    -moz-background-size: 63%;
    -o-background-size: 63%;
    background-size: 63%;
}

body {margin: 0px; padding: 0px; border: 0px; height: 100%;}

div.main{border:0px; margin:0px; padding:0px; width:80%; min-height:76%; border-style:solid; border-width:1;margin:auto;

background: url("md.png") no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: 100% 100%;

box-sizing: border-box;
ms-box-sizing: border-box;
webkit-box-sizing: border-box;
moz-box-sizing: border-box;
}

img.m{margin: 0px; padding: 0px; border: 0px; width: 100%; height:100%;}

div.menu{margin:0px; padding:0px; min-width:100%; height:50px; display:box ;}

</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:20:58.303

您的图像 m.png 似乎有透明的边。尝试对图像进行干净的裁剪。

# python - 使用管道进行 ruby -python 通信的可行性

> ID：14765120
> 
> 赞同：0
> 
> 时间：2013-02-08T03:16:28.637
> 
> 标签：python, ruby

目前，我有两个程序，一个在 Ruby 上运行，另一个在 Python 上运行。我需要用 Ruby 读取一个文件，但我首先需要一个用 Python 编写的库来解析文件。目前，我使用 XMLRPC 让两个程序进行通信。将 Python 库移植到 Ruby 是毫无疑问的。但是，我发现并阅读到使用 XMLRPC 会产生一些性能开销。最近，我读到另一个解决 Ruby-Python 难题的方法是使用管道。所以我试着在那个上做实验。例如，我用 ruby​​ 编写了这个主脚本：

```
 (0..2).each do
      slave = IO.popen(['python','slave.py'],mode='r+')
      slave.write "master"
      slave.close_write
      line = slave.readline
      while line do
        sleep 1
        p eval line
        break if slave.eof
        line = slave.readline
      end
    end 
```

以下是 Python 从站：

```
 import sys

    cmd = sys.stdin.read()
    while cmd:
      x = cmd
      for i in range(0,5):
        print "{'%i'=>'%s'}" % (i, x)
        sys.stdout.flush()
        cmd = sys.stdin.read() 
```

一切似乎都很好：

```
 ~$ ruby master.rb
    {"0"=>"master"}
    {"1"=>"master"}
    {"2"=>"master"}
    {"3"=>"master"}
    {"4"=>"master"}
    {"0"=>"master"}
    {"1"=>"master"}
    {"2"=>"master"}
    {"3"=>"master"}
    {"4"=>"master"}
    {"0"=>"master"}
    {"1"=>"master"}
    {"2"=>"master"}
    {"3"=>"master"}
    {"4"=>"master"} 
```

我的问题是，在 Ruby 和 Python 之间实现使用管道处理对象真的可行吗？一种考虑是可能有多个 master.rb 实例正在运行。并发会是一个问题吗？管道可以处理广泛的操作和要在其间传递的对象吗？如果是这样，它会是 RPC 的更好选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:23:50.057

是的。不，如果你实施它，是的。取决于您的应用程序需要什么。

基本上，如果您只需要简单的数据传递管道就可以了，如果您需要在远程进程中不断调用对象上的函数，那么您可能会更好地使用某种形式的现有 RPC，而不是重新发明轮子。应该是 XMLRPC 还是其他什么是另一回事。

请注意，RPC 必须使用一些底层 IPC 机制，这很可能是管道。但也可能是套接字、消息队列、共享内存等。

# xcode - 如何提交带有命令行助手的 OSX 应用程序

> ID：14765124
> 
> 赞同：5
> 
> 时间：2013-02-08T03:17:30.997
> 
> 标签：xcode, macos, sandbox, code-signing

因此，我基本上处于与[**此处讨论的相同情况，**](https://stackoverflow.com/questions/11230168/submit-an-osx-app-with-helper-app-in-its-bundle) **但**我无法应用建议的解决方案，因为我正在构建的帮助应用程序添加到我的主应用程序包中，它是命令行可执行文件，并且它自己的 XCode 项目没有t 具有捆绑名称、embedded.provisionfile 或权利。

我的应用程序被“没有那个可执行的沙盒”拒绝了两次。好吧，主应用程序是沙盒的，命令行可执行文件似乎是代码签名的。

如果我运行：

`$ codesign --display --verbose=4 ./myFile`

我得到：

```
Executable=/path/to/my/executable/myFile
Identifier=myFile
Format=Mach-O thin (i386)
CodeDirectory v=20100 size=43918 flags=0x0(none) hashes=2188+5 location=embedded
Hash type=sha1 size=20
CDHash=f28731c0d2482e0b0252efe0f1d33525a292f7c0
Signature size=4358
Authority=3rd Party Mac Developer Application: My name
Authority=Apple Worldwide Developer Relations Certification Authority
Authority=Apple Root CA
Signed Time=08/02/2013 03:15:58
Info.plist=not bound
Sealed Resources=none
Internal requirements count=1 size=188 
```

所以我认为该命令已经签署。沙箱和代码设计这种文件的正确方法是什么？

# asp.net-mvc-3 - 淘汰赛 sammy.js 导航问题

> ID：14765127
> 
> 赞同：1
> 
> 时间：2013-02-08T03:17:44.737
> 
> 标签：asp.net-mvc-3, knockout.js, sammy.js

我有这样的场景。

1.  当页面导航到#Action 时初始加载。
2.  一旦选择动作被执行 data-bind="with tag is loaded"
3.  执行用户点击“做某事”动作。它取代了整个“parentNode”
4.  现在当用户点击返回时，sammy.js 注意到井号标签#Action/:id，我需要加载#Action 以返回主视图，然后选择 id 以加载 data-bind="with"再次标记。

我怎样才能做到这一点？

目前该页面确实返回到“Action/:id”，但由于未加载主视图，它不会执行任何操作。我使用了 "this.redirect("#Action") 然后选择了节点，但它不起作用。

```
<div id="parentNode">
    <ul data-bind="foreach: items">
       <li data-bind="click: $root.selectItem">
          <h2><span data-bind="text: Sometext"></span></h2>
       </li>
    </ul>
    <div data-bind="with: selectedItem">
       <a data-bind="click: loadSomething">Do Something</a>
    </div>
</div> 
```

在我的视图模型中，我有这个：

```
viewModel.selectItem= function (item) {
    location.hash = "Action/" + item.id();
}

viewModel.loadSomething = function () {
    location.hash = "Action/" + viewModel.someSelectedItem().id() +"/SubAction";
}

$.sammy(function () {

  this.get('#Action', function () {
     $.ajax({
         url: '@Url.Action("GetMainView")',
         type: "GET",
         data: self.someId(),
         dataType: "json",
         success: function (result) {
           $("#parentNode").html(result.message);
         }
   });

  this.get('#Action/:id', function () {
      var id = this.params["id"];
      var matchItem = ko.utils.arrayFirst(viewModel.MainItems(), function (item) {
                return item.id() == id;
       });

       viewModel.someSelectedItem(matchItem);
  });

  this.get('#Action/:id/SubAction', function () {
    var id = this.params['id'];
    $.ajax({
         url: '@Url.Action("ViewSomething")',
         type: "GET",
         data: { id: id },
         success: function (result) {
             $('#parentNode').html(result.message);
         }
    });
 });
}); 
```

示例代码：[https ://skydrive.live.com/redir?resid=33048714B5BF3B4B!913](https://skydrive.live.com/redir?resid=33048714B5BF3B4B!913)

重现步骤：

1.  在列出的任何项目下选择“子项目”（项目 1、项目 2、项目 3）
2.  选择任何带有标签的子项（子项 1、子项 2）
3.  部分视图将显示为带有“下一个视图”链接的“子项目 {x}”
4.  单击“下一个视图”链接。
5.  将显示“下一个局部视图”。
6.  按下返回按钮。

我要做的事情是加载 SubItems 并选择“Sub Item 1”视图。

1.  项目清单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:52:16.427

我不确定这是否可行，但您能否创建一个单独的辅助函数来加载主视图。那么就会出现以下情况：

```
this.get('#Action', function () {
    LoadMainView();
}

this.get('#Action/:id', function () {
    if($('#parentNode').length == 0) {
        LoadMainView(function() {
             var id = this.params["id"];
             var matchItem = ko.utils.arrayFirst(viewModel.MainItems(), function (item) {
                 return item.id() == id;
             });

             viewModel.someSelectedItem(matchItem);
        })
    }
} 
```

然后，您的 LoadMainView 函数将接受回调并如下所示：

```
function LoadMainView(callback) {
    $.ajax({
        url: '@Url.Action("GetMainView")',
        type: "GET",
        data: self.someId(),
        dataType: "json",
        success: function (result) {
            $("#parentNode").html(result.message);
            if(typeof callback == "function") {
                callback();
            }
        }
    });
} 
```

我无法在您的解决方案中对此进行测试（打开它时出错），但我相信这是执行您所要求的一般结构。

# jquery - jQuery ui 菜单没有正确定位

> ID：14765128
> 
> 赞同：3
> 
> 时间：2013-02-08T03:17:47.693
> 
> 标签：jquery, css, jquery-ui

这是我的jsfiddle。

[http://jsfiddle.net/jgreen/K6QSd/2/](http://jsfiddle.net/jgreen/K6QSd/2/)

菜单似乎不尊重我的定位。

```
.menu({
    position: {
        my: "right top",
        at: "right bottom",
        of: $('#button1'),
        collision: "none"
    }
}) 
```

我试图让菜单与按钮的右侧对齐，而不是它当前正在做的左侧。

提前致谢。

编辑：snowp 提供了一种使用 css 获取行为的方法，但我真的在寻找为什么它不能与 jquery ui 一起使用。

编辑#2：我没有完全理解文档的关键部分。位置选项“标识**子菜单**的位置...”。子菜单！=菜单。多哈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T07:30:55.480

@jgreen Jquery 为您提供所需菜单的解决方案

```
 $(this).next().show().menu().position({

            my: "right top",
            at: "right bottom",
            of: $('#button1'),
            collision: "none" 
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:07:22.563

像这样的菜单添加以下css [点击这里](http://i.stack.imgur.com/3WwkP.jpg)

```
 #subMenu
    {
        float:right; top:0px;right:-80px;
        z-index:1;
    } 
```

（或者）

像这样的菜单添加以下css [点击这里](http://i.stack.imgur.com/erFR3.jpg)

```
#subMenu
{
   float:right; top:32px;right:40px;
} 
```

# java - 使图像适合背景

> ID：14765131
> 
> 赞同：2
> 
> 时间：2013-02-08T03:18:17.840
> 
> 标签：java, android, background

我想使用小于屏幕宽度但高度大于屏幕的图像。我正在考虑使用滚动视图，可以使用整个图像，但拟合会改变图片的原始比例。如何以相同的比例调整宽度和增加高度？这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="@drawable/tutorial"
  > 
  <ScrollView
    android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
  <ImageView
    android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:scaleType="fitXY"
  android:src="@drawable/tutorial">
  </ImageView>
  </ScrollView>   
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:06:17.867

> 你不使用**fill_parent**你想使用**match_parent**
> 
> `<ImageView android:layout_width="match_parent" android:layout_height="match_parent" android:backround="@drawable/tutorial"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:52:29.150

用`android:scaleType="CENTER_INSIDE"`在你的`Imageview`就是它。

有关更多详细信息 [，请在此处阅读有关 CENTER_INSIDE的更多信息](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

# c# - 如何将数组放入datagridview？

> ID：14765132
> 
> 赞同：0
> 
> 时间：2013-02-08T03:18:18.817
> 
> 标签：c#, arrays, datagridview

我有一个问题，我需要在 DataGridView 中放置一个数组，我有下一个代码，但只有我用行获取数组的位置，但行是空的......

谁能帮我？

```
int[] arrays = new int [CaminoHormiga.Length];
string periodohorario = string.Empty;

for (int i = 0; i < CaminoHormiga.Length; i++)
{
    arrays = CaminoHormiga;
    periodohorario = arrays[i].ToString();

    hg.dgHorarioGen.DataSource = arrays;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:12:46.663

尝试这个

```
List<int> arrays = new List<int>();

for (int i = 0; i < CaminoHormiga.Length; i++)
{
   arrays.Add(CaminoHormiga);
}

hg.dgHorarioGen.DataSource = arrays; 
```

# javascript - 无法让 Android 设备成为 Worklight 应用程序部署的目标

> ID：14765133
> 
> 赞同：0
> 
> 时间：2013-02-08T03:18:20.923
> 
> 标签：javascript, android, ibm-mobilefirst

我有一个摩托罗拉 DroidX，我想用它来测试我在 Worklight 下运行的 Javascript 应用程序。DroidX 运行的是 Android 2.3.4。我的 Worklight 项目针对 Android-8 (Android 2.2) 进行了配置。我按照教程下载了 Goggle USB 驱动程序并将其包含在 Windows 7 设备驱动程序搜索中。我还下载并安装了最新的摩托罗拉 USB 驱动程序。我想我现在有合适的驱动程序来处理 DroidX 的 USB。我更改了我的 DroidX 设置以包括 USB 调试，并且我尝试使用 PC 模式和 MASS 存储连接到 Worklight。我发出了 ADB devices 命令，它显示 Android 设备已连接到 PC。但是，当我执行 Build All 和 Deploy 时，我从来没有得到任何 DroidX 的部署对话框......看起来我'

我该如何进行调试 - 出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:58:18.833

Did you add an Android environment to your app?

After hitting "Build All and Deploy", are you going to the Android native project (it should be a folder below your WL project) and right-click "Run As > Android Application"?

After you do all that, do you get an errors/warnings in the console or in LogCat?

Can you see LogCat?

Finally, to make sure this is a WL issue, can you please create a Native HelloWorld Android app, and see if you can deploy that into your Droid X from your Eclipse environment. You may have an issue that has nothing to do with WL.

# python - 找到前n条边，广度优先搜索

> ID：14765137
> 
> 赞同：1
> 
> 时间：2013-02-08T03:18:40.007
> 
> 标签：python, algorithm, breadth-first-search, directed-graph

问题：在有向循环图中给定一个边对象，找到前 n 个最近边（2000）。

数据结构：链接类和节点类。链接类有一个 from 和 to 节点，指向各自的节点对象。节点对象具有链接对象的传入和传出列表。

错误：我遇到了**RuntimeError: maximum recursion depth exceeded**。你能帮我找到解决方法吗。如果逻辑有问题或代码需要优化，请告诉我。我相信我遵循 BFS 策略，即从对象相关节点中创建一个队列，我可以遍历这些节点并查看它是否已被访问并尝试递归。

```
def start_search(self,link_object,neighbour_links):
    buffer_links=[]
    link_object.visited_flag=1
    neighbour_links.append(link_object)
    from_node=link_object.from_node
    to_node=link_object.to_node
    [buffer_links.append(link_object) for link_object in from_node.incoming_links]
    [buffer_links.append(link_object) for link_object in from_node.outgoing_links]
    [buffer_links.append(link_object) for link_object in to_node.outgoing_links]
    [buffer_links.append(link_object) for link_object in to_node.incoming_links]
    while len(buffer_links)>0 and len(neighbour_links)<1000:
        link_object=buffer_links.pop()
        if link_object.visited_flag==0:
           self.start_search(link_object,neighbour_links)
    return neighbour_links 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:55:16.467

您可以通过在节点上使用先进的波前算法（广度优先搜索）来避免使用递归。这是算法的概述，它是一个小的适应，使其适用于边缘：

1.  `top_dist`使用最初为空的字典跟踪拓扑距离。
2.  让`dist = 0`
3.  将初始节点放入 set `wavefront`。
4.  `top_dist[node] = dist`为 中的每个节点设置`wavefront`。
5.  `wavefront`对于与该节点相邻的每个节点`top_dist`，将该节点添加到 set`next_wavefront`中。
6.  增量`dist`
7.  放`wavefront = next_wavefront`
8.  从 4 开始重复，直到无法访问更多节点。

如果某些节点仍未访问，则该图具有多个弱组件。

如果步骤 3 中的初始节点是您的初始边的端点，那么您可以使用`top_dist`边节点上的地图来获取到边的距离。我认为到边缘的距离的一个有用定义是`min(top_dist(e1), top_dist(e2)) + 1`. 现在你已经有了到每条边的距离，你可以抓取最近的 2000。

该算法是 O(|N|+|E|)——在边数和节点数的总和上是线性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:54:46.173

使用 DAG 表示为映射到其后继节点的节点字典，您可以在发现节点时遍历它们：

```
>>> def bfs(dag, start, maximum):
        'Breadth-first search up to a given maximum number of nearest nodes'
        nearest = [start]
        seen = {start}
        for pred in nearest:
            for succ in dag.get(pred, ()):
                if succ not in seen:
                    seen.add(succ)
                    nearest.append(succ)
                    if len(nearest) == maximum:
                        return nearest
        return nearest
>>> dag = {'start': ['a', 'b', 'c'],
           'b': ['m', 'n'],
           'c': ['n', 'z'],
           'n': ['z'],
          }
>>> bfs(dag, 'start', 5)
['start', 'a', 'c', 'b', 'z'] 
```

# tortoisesvn - 在乌龟 svn 中撤消结帐

> ID：14765140
> 
> 赞同：0
> 
> 时间：2013-02-08T03:19:05.790
> 
> 标签：tortoisesvn

我错误地检查了几个项目，但我只需要其中一个。如何撤消龟 SVN 中的结帐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:23:15.883

只需删除您错误签出的文件夹的本地副本即可解决此问题。如果每个项目都在它自己的目录中，这将起作用。

# ms-access - Access 2010 中的 VBA 导入位于 Outlook 公共（子）文件夹中的电子邮件 - 包括文件夹名称和附件？

> ID：14765142
> 
> 赞同：2
> 
> 时间：2013-02-08T03:19:12.730
> 
> 标签：ms-access, import, vba, outlook-2010

我正在尝试开发一个 Access 数据库来跟踪 Outlook 中的电子邮件。通过组合来自许多互联网搜索的点点滴滴，我能够开发以下代码。附加的代码终于起作用了，我花了比我想承认的更多的时间来开发。我是 VBA 编程的新手，我正试图通过这个过程咕哝着。无论如何，出于沮丧和担心这个项目最终会花费比我想要的时间更长的时间，我想我最终会寻求一些帮助。以下是我最终希望添加到以下代码中的功能，按优先级顺序排列：

高优先级：

(1) 需要递归 VBA 代码来导入位于所有子文件夹中的电子邮件。(2) 需要 VBA 代码将电子邮件所在的文件夹名称插入 Access 数据库。文件夹路径不是必需的。(3) 需要 VBA 代码来插入任何用户附加文档的文件名。

低优先级（访问可用于删除重复，直到问题得到解决）：

(4) 希望 VBA 代码在运行宏时将数据附加到新电子邮件中。

美好的未来选择：

(5) VBA 代码允许我选择一个文件夹。选项将允许未来的灵活性。

我在 Window 7（64 位计算机）上运行 Access 和 Outlook 2010。到目前为止，以下是我的代码：

```
Sub ImportContactsFromOutlook()

   ' This code is based in Microsoft Access.

   ' Set up DAO objects (uses existing "tblContacts" table)
   Dim rst As DAO.Recordset
   Set rst = CurrentDb.OpenRecordset("Email")

   ' Set up Outlook objects.
   Dim ol As New Outlook.Application
   Dim olns As Outlook.NameSpace
   Dim cf As Outlook.MAPIFolder
   Dim c As Outlook.MailItem
   Dim objItems As Outlook.Items
   Dim Prop As Outlook.UserProperty

   Set olns = ol.GetNamespace("MAPI")
   '--- (5) --- VBA code to allow me to pick a folder. Option would allow for future     flexability.
   Set cf = olns.GetDefaultFolder(olPublicFoldersAllPublicFolders)
   '--- (1) --- Need recursive VBA code to import emails located in all subfolders.
   Set objItems = cf.Items
   iNumMessages = objItems.Count
   If iNumMessages <> 0 Then
      For i = 1 To iNumMessages
         If TypeName(objItems(i)) = "MailItem" Then
            Set c = objItems(i)
            rst.AddNew
            rst!EntryID = c.EntryID
            rst!ConversationID = c.ConversationID
            rst!Sender = c.Sender
            rst!SenderName = c.SenderName
            rst!SentOn = c.SentOn
            rst!To = c.To
            rst!CC = c.CC
            rst!BCC = c.BCC
            rst!Subject = c.Subject
            rst!Attachments = c.Attachments.Count
            '--- (3) --- Need VBA code to insert the file name of any user attached     documents. ".Count" is used to avoid error and can be replaced.
            rst!Body = c.Body
            rst!HTMLBody = c.HTMLBody
            rst!Importance = c.Importance
            rst!Size = c.Size
            rst!CreationTime = c.CreationTime
            rst!ReceivedTime = c.ReceivedTime
            rst!ExpiryTime = c.ExpiryTime
            '--- (2) --- Need VBA code to insert the Folder name where the email is     located into Access Database. Folder Path is not necessary.
            rst.Update
         End If
      Next i
      rst.Close
      MsgBox "Finished."
   Else
      MsgBox "No e-mails to export."
   End If
   '--- (4) --- Want VBA code to append data with new emails when macro is run.

End Sub 
```

以下是我尝试使用的一些有用的参考资料。其中一些拥有看起来像花哨的工具。因为我正在学习，所以我要么无法实施，要么不理解其中的一些..

*   msdn.microsoft.com/en-us/library/ee861519(v=office.14).aspx
*   msdn.microsoft.com/en-us/library/office/ee861520(v=office.14).aspx
*   accessexperts.net/blog/2011/07/07/importing-outlook-emails-into-access/
*   add-in-express.com/creating-addins-blog/2011/08/15/how-to-get-list-of-attachments/
*   databasejournal.com/features/msaccess/article.php/3827996/Working-With-Outlook-from-Access.htm
*   stackoverflow.com/questions/7298591/copying-all-incoming-emails-in-outlook-inbox-and-personal-subfolders-to-excel-th

欢迎任何建议或方向。谢谢您的帮助。值得赞赏。

* * *

这是我现在的代码（见下文）。我运行它时仍然存在一些问题。第一次运行代码时，由于 Access 数据库表中没有记录，我收到以下错误：

运行时错误“3021”：没有当前记录。

是否有错误检查或我可以对此进行编码的方法？此外，在填充 Access 数据库后，以下代码仅排除在主文件夹中找到的那些电子邮件，而不是子文件夹：

```
If ([rst]![EmailLocation] <> ofProp.Name) And ([rst]![EntryID] <> cMail.EntryID) Then 
```

我试图找出原因。最后，我还需要知道如何将用户附加文档列表拉入访问数据库。以下代码提取所有附件，包括嵌入的附件，并且仅返回文档中的第一个附件：

```
 Set cAtch = cMail.Attachments
                    cntAtch = cAtch.Count
                    If cntAtch > 0 Then
                        For j = cntAtch To 1 Step -1
                            strAtch = cAtch.Item(j).FileName
                            rst!Attachments = strAtch
                        Next
                    Else
                        rst!Attachments = "No Attachments"
                    End If 
```

同样，任何帮助将不胜感激。谢谢。

```
Sub ImportMailPropFromOutlook()

    ' Code for specifing top level folder and initializing routine.

    ' Set up Outlook objects.
    Dim ol As New Outlook.Application
    Dim olns As Outlook.NameSpace
    Dim ofO As Outlook.MAPIFolder
    Dim ofSubO As Outlook.MAPIFolder
    Dim objItems As Outlook.Items

    Set olns = ol.GetNamespace("MAPI")
    Set ofO = olns.GetDefaultFolder(olFolderInbox) '--- Specifies top level folder for     importing Oultook mail.
    'Set of = olns.PickFolder '--- Allows user to select top level folder for importing     Outlook mail.

    'Set info and call GetMailProp code.
    Set objItems = ofO.Items
    GetMailProp objItems, ofO

    'Set info and call ProcessSubFolders.
    For Each ofSubO In of.Folders
        Set objItems = ofSubO.Items
        ProcessSubFolders objItems, ofSubO
    Next

End Sub

Sub GetMailProp(objProp As Outlook.Items, ofProp As Outlook.MAPIFolder)

    ' Code for writeing Outlook mail properties to Access.

    ' Set up DAO objects (uses existing Access "Email" table).
    Dim rst As DAO.Recordset
    Set rst = CurrentDb.OpenRecordset("Email")

    'Set Up Outlook objects.
    Dim cMail As Outlook.MailItem
    Dim cAtch As Outlook.Attachments

    'Write Outlook mail properties to Access "Email" table.
    iNumMessages = objProp.Count
    If iNumMessages <> 0 Then
        For i = 1 To iNumMessages
            If TypeName(objProp(i)) = "MailItem" Then
                Set cMail = objProp(i)
                If ([rst]![EmailLocation] <> ofProp.Name) And ([rst]![EntryID] <>     cMail.EntryID) Then
                    rst.AddNew
                    rst!EntryID = cMail.EntryID
                    rst!ConversationID = cMail.ConversationID
                    rst!Sender = cMail.Sender
                    rst!SenderName = cMail.SenderName
                    rst!SentOn = cMail.SentOn
                    rst!To = cMail.To
                    rst!CC = cMail.CC
                    rst!BCC = cMail.BCC
                    rst!Subject = cMail.Subject
                    Set cAtch = cMail.Attachments
                    cntAtch = cAtch.Count
                    If cntAtch > 0 Then
                        For j = cntAtch To 1 Step -1
                            strAtch = cAtch.Item(j).FileName
                            rst!Attachments = strAtch
                        Next
                    Else
                        rst!Attachments = "No Attachments"
                    End If
                    rst!Count = cMail.Attachments.Count
                    rst!Body = cMail.Body
                    rst!HTMLBody = cMail.HTMLBody
                    rst!Importance = cMail.Importance
                    rst!Size = cMail.Size
                    rst!CreationTime = cMail.CreationTime
                    rst!ReceivedTime = cMail.ReceivedTime
                    rst!ExpiryTime = cMail.ExpiryTime
                    rst!EmailLocation = ofProp.Name
                    rst.Update
                End If
            End If
        Next i
    End If

End Sub

Sub ProcessSubFolders(objItemsR As Outlook.Items, OfR As Outlook.MAPIFolder)

    'Code for processing subfolders

    ' Set up Outlook objects.
    Dim ofSubR As Outlook.MAPIFolder

    'Set info and call GetMailProp code.
    GetMailProp objItemsR, OfR

    'Set info and call ProcessSubFolders. Recursive.
    For Each ofSubR In OfR.Folders
        Set objItemsR = ofSubR.Items
        ProcessSubFolders objItemsR, ofSubR
    Next

End Sub 
```

* * *

我有机会在代码上多做一些工作。我想要做的是将位于我的 Outlook 帐户的所有子文件夹中的电子邮件导入 Access。VBA 代码在 Access 中。我只需要某些邮件项目属性。大多数情况下，您需要在 Outlook 中复制打印备忘录功能。

我添加了一些我认为需要帮助排除位于同一文件夹中的重复项的内容。这些是不同公共子文件夹中的重复电子邮件，但我需要在我的数据库记录中知道这一点。

我仍然需要一个递归子或函数来确保我得到所有的子文件夹。我尝试了 For/Next 循环，但这仅搜索一级子文件夹。我可以大胆地使用一些帮助。这似乎是困难的部分。

我更新的代码是：

```
Sub ImportContactsFromOutlook()

   ' This code is based in Microsoft Access.

   ' Set up DAO objects (uses existing "Email" table)
   Dim rst As DAO.Recordset
   Set rst = CurrentDb.OpenRecordset("Email")

   ' Set up Outlook objects.
   Dim ol As New Outlook.Application
   Dim olns As Outlook.NameSpace
   Dim cf As Outlook.MAPIFolder
   Dim cMail As Outlook.MailItem
   Dim cAtch As Outlook.Attachments
   Dim objItems As Outlook.Items
   Dim of As Outlook.Folder
   Dim ofSub As Outlook.Folder

   Set olns = ol.GetNamespace("MAPI")
   '--- (5) ---
   'Would eventually be nice to allow a user to select a folder. Folderpicker? Lowest     priority.

   Set of = olns.GetDefaultFolder(olFolderInbox)
   '--- (1) ---
   'Loop only searches one level down. I will need all subfolders. Most examples I saw     call external Sub? Recursive?
   For Each ofSub In of.Folders
   Set objItems = ofSub.Items
   iNumMessages = objItems.Count
   If iNumMessages <> 0 Then
      For i = 1 To iNumMessages
         If TypeName(objItems(i)) = "MailItem" Then
            Set cMail = objItems(i)
            rst.AddNew
            rst!EntryID = cMail.EntryID
            rst!ConversationID = cMail.ConversationID
            rst!Sender = cMail.Sender
            rst!SenderName = cMail.SenderName
            rst!SentOn = cMail.SentOn
            rst!To = cMail.To
            rst!CC = cMail.CC
            rst!BCC = cMail.BCC
            rst!Subject = cMail.Subject
            '--- (3) ---
            'Code only inserts first attachment. Code Also inserts embedded     attachments.
            'Need code to insert all user selected attachments (ex. PDF Document) and     no embedded attachments.
            Set cAtch = cMail.Attachments
            cntAtch = cAtch.Count
                If cntAtch > 0 Then
                    For j = cntAtch To 1 Step -1
                    strAtch = cAtch.Item(j).FileName
                    rst!Attachments = strAtch
                    Next
                Else
                    rst!Attachments = "No Attachments"
                End If
            rst!Count = cMail.Attachments.Count
            rst!Body = cMail.Body
            rst!HTMLBody = cMail.HTMLBody
            rst!Importance = cMail.Importance
            rst!Size = cMail.Size
            rst!CreationTime = cMail.CreationTime
            rst!ReceivedTime = cMail.ReceivedTime
            rst!ExpiryTime = cMail.ExpiryTime
            '--- (2) ---
            ' Solved - Figured out how to call folder location into databse.
            rst!EmailLocation = ofSub.Name
            rst.Update
         End If
      Next i
   End If
   Next
   '--- (4) ---
   'Still need code to append Access database with only new records.
   'Duplicate email can exist in differenc subfolders but not same subfolder.
End Sub 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T14:03:44.910

I was able to find some examples on the web to resolve the exclude duplicate mail records and Run-time error '3021' with the following code:

```
' If code checks outlook mail for and excludes duplicate records based on table fields [EntryID] and [EmailLocation].
If Cnt = DCount("[EntryID] & [EmailLocation]", "Email", "[EntryID] = """ & cMail.EntryID & """ And [EmailLocation] = """ & ofProp.Name & """") = 0 Then
    'Code used to insert individual outlook mail properties.
End If 
```

Still need to resolve the issue with attachments. Any help would be appreciated. Thank you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T09:44:29.460

检查此示例以从 Helen Feddema 编写的代码中选择 Outlook 联系人。“将日历项目导出到 Excel” [http://www.helenfeddema.com/Code%20Samples.htm](http://www.helenfeddema.com/Code%20Samples.htm)

# ios - 我是否需要为每个 Apple AppStore 提交单独分发？

> ID：14765146
> 
> 赞同：1
> 
> 时间：2013-02-08T03:19:52.790
> 
> 标签：ios, iphone, xcode, appstore-approval

我很混乱 -

经过一整天的努力，我终于弄清楚了如何通过从 xcode 归档和分发将我的应用程序提交给 Apple。

...那是我的免费版本

现在我进行了代码更改，在我的 pList 文件中，我将 Bundle Identifier 更改`com.blah.mygame.pro`为`com.blah.mygame.lite`

我还将捆绑包名称更改`My Game Pro`为`My Game Lite`

但现在我很困惑 - 当我在 Xcode 中单击项目时，我点击“目标”而不是“项目”，我找不到我的发布/分发配置文件！（我的开发/调试配置文件）仍然存在。

如果我点击`Project`而不是`Targets`然后我实际上确实看到了我以前的分发配置文件。

然而，在我的开发者门户中，我实际上已经将我的分发配置文件设置为与“com.blah.mygame.lite”标识符相关联。我不应该这样做吗？？？

奇怪的是，当我今天早些时候制作我的分发配置文件时，我说诸如“mygame * -”之类的东西，或者我可以将它链接到的东西。但我只是`com.blah.mygame.lite`不假思索地选择了

你应该有多个分布配置文件吗？每个应用程序一个？我只想要一个精简版和专业版？

* ***编辑：

奖励积分：

如果我只需要 1 个配置文件，（并且因为我搞砸了我以前的配置文件的命名）......我如何重命名我的所有分发配置文件而不会干扰/弄乱我的应用程序？它已经提交并等待批准

***编辑＃2：

好的，我提交了两个应用程序，并带有 2 个单独的分发配置文件。

但是，有什么方法可以在提交的应用程序仍在使用时重命名分发配置文件？

我错误地将其命名为“我的公司分发配置文件”，而我应该将其命名为“我的 Game Pro 版本的分发配置文件”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:37:31.213

您有两种修复方法：

*   使用点`AppId`赞。`com.blah.mygame.*`. 您可以用任意数量的字符串替换 * 并将其用于创建不同的应用程序。

    **我不会推荐这种方法，因为这样做的问题是您将无法使用推送服务或应用内购买。您现在可能不打算使用这些服务，但如果您改变主意，您将无法在不创建新应用的情况下更改您的应用 ID。**

*   为不同的应用程序创建不同`AppId`的。这将是一个很好的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:49:45.650

听起来您对两个应用程序都使用了一个 AppID。仅当绑定到该配置文件的 AppID 具有通配符（例如“com.sample.*”）时，您才能为多个应用程序使用一个配置文件。

引用自[iOS Provisioning Portal](https://developer.apple.com/ios/manage/bundles/index.action)：

> App ID 的 Bundle Identifier 部分可以替换为通配符（星号“*”），以便可以使用单个 App ID 来构建和安装多个应用程序。**如果不使用通配符，则必须在 Xcode 中输入 App ID 的 Bundle Identifier 部分作为 CF Bundle ID，**以允许应用程序安装在您的设备上。您的 App ID 的 Bundle Seed ID 部分不需要输入到 Xcode 中。通配符应用 ID 不能与推送通知或应用内购买一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T04:17:30.397

我希望你已经`AppId`用这个`bundle identifier` **com.blah.mygame.lite**创建了一个并创建了一个与这个链接的分发配置文件`AppId`。通过这样做，您可以运行或归档您的应用程序，只有当它具有`same AppId`这样的`com.blah.mygame.lite`. 如果你想创建一个`AppId`运行所有应用程序，那么你需要一个`Wildcard AppId`这样的`com.*`. 如果您认为需要运行该应用程序，`AppId com.blah.mygame.pro`那么您需要创建另一个`appId`类似的应用程序并将其`appId`与**另一个分发配置文件相关联，或者修改旧的配置文件**并下载并安装它并使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T03:26:19.970

每个应用程序都不需要分发配置文件......每次一个就足够了，但是

您的捆绑标识符与您在分发配置文件中给出的相同

你第一次创建它....

# c - mpi_comm_spawn 错误：MPI 应用程序等级 0 在 MPI_Finalize() 信号 11 之前被杀死

> ID：14765148
> 
> 赞同：1
> 
> 时间：2013-02-08T03:20:17.380
> 
> 标签：c, mpi

我正在尝试使用 MPI_Comm_Spawn 运行 mpi 程序。我生成了 1 个工作程序，然后在两个程序中调用 MPI_reduce 来添加一些结果。由于某种原因，应用程序在 MPI_Comm_spawn 处挂起，然后在一分钟后中止。生成的进程仅到达其代码段，在此发生后调用 MPI_reduce。然后应用程序继续挂起，然后在命令提示符中给出更多错误。应该发生的是衍生程序和主程序*都*到达 MPI_Reduce 调用，并且主程序得到一个总和，并输出该总和。

这是输出，我在其 MPI 的输出位置放了一个 <>，而不是我自己的

```
world size = 1   
About to call MPI_Comm_spawn with 2 workers...   
parent result is 3.141668952    
numDarts for child: 500000000  
argv[1] = 500000000  
<>MPI Application rank 0 killed before MPI_Finalize() with signal 11  
spawned process got result: 3.141668952  
Spawned process about to send message back to parent  
<>piworker: Rank 1:0: MPI_Finalize: IBV connection to 0 on card 0 is broken
<>piworker: Rank 1:0: MPI_Finalize: ibv_poll_cq(): bad status 12  
<>piworker: Rank 1:0: MPI_Finalize: self n93 peer n93 (rank: 0)  
<>piworker: Rank 1:0: MPI_Finalize: error message: transport retry exceeded error 
```

这是主程序的代码：

```
#include "mpi.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "globals.h"

int randSign();
double randFloat();
double dboard();

int main(int argc, char *argv[])
{
    int world_size, flag;
    MPI_Comm everyone;           /* intercommunicator */
    char worker_program[100];
    int universe_size;

    //  MPI_Comm_get_attr(MPI_COMM_WORLD, MPI_UNIVERSE_SIZE, &universe_size, &flag);
    //   printf("universe size: %i\n", universe_size);

    int numDarts = 1000000000;
    int numWorkers = 2;

    char* args[1];
    if(argc >= 2)
    {
      numWorkers = atoi(argv[1]);
    }
      if(argc >= 3)
    numDarts = atoi(argv[2]);

   MPI_Init(&argc, &argv);
   MPI_Comm_size(MPI_COMM_WORLD, &world_size);

   printf("world size = %i\n", world_size);
   if (world_size != 1)
        printf("Top heavy with management\n");

   int numDartsWorker = numDarts/numWorkers;
   int numDartsMaster = numDarts/numWorkers + (numDarts % numWorkers); //the master computes the leftover
   args[0] = malloc(256 * sizeof(char));
   sprintf(args[0], "%i", numDartsWorker);
   printf("argument passing to workers: %s\n", args[0]);
   /*
    * Now spawn the workers. Note that there is a run-time determination
    * of what type of worker to spawn, and presumably this calculation must
    * be done at run time and cannot be calculated before starting
    * the program. If everything is known when the application is
    * first started, it is generally better to start them all at once
    * in a single MPI_COMM_WORLD.
    */
   printf("About to call MPI_Comm_spawn with %i workers...\n", numWorkers);
   int resultLen = 0;

   double myresult = dboard(numDartsMaster);
   printf("parent result is %.9f\n", myresult);

   //the master counts as a worker, hence the -1
   MPI_Comm_spawn("piworker", args, numWorkers-1, MPI_INFO_NULL, 0, MPI_COMM_SELF,
                   &everyone, MPI_ERRCODES_IGNORE);

   double pisum = 24;
   int rc = MPI_Reduce(&myresult, &pisum, 1, MPI_DOUBLE, MPI_SUM, 0, everyone);

   if (rc != MPI_SUCCESS)
        printf("failure on mpi_reduce\n");

   free(args);
   /*
    * Parallel code here. The communicator "everyone" can be used
    * to communicate with the spawned processes, which have ranks 0,..
    * MPI_UNIVERSE_SIZE-1 in the remote group of the intercommunicator
    * "everyone".
    */

   //receive the results
   int i=1;
   MPI_Status status;
   double avgpi = pisum/(double)numWorkers;
   printf("With %i workers, %i darts, estimated value of pi is: %.9f\n", numWorkers, numDarts, avgpi);

   MPI_Finalize();
   return 0;
} 
```

工人（衍生）程序的代码

```
int main(int argc, char *argv[])
{
   int size;
   MPI_Comm parent;
   MPI_Init(&argc, &argv);
   MPI_Comm_get_parent(&parent);
   if (parent == MPI_COMM_NULL)
        printf("No parent!");
   int taskid;
   MPI_Comm_remote_size(parent, &size);
   MPI_Comm_rank(MPI_COMM_WORLD,&taskid);
   double pisum = 0;
   int resultLen = 0;
   char parentName[256];
   int numDarts;

   if (size != 1)
   {
        printf("Something's wrong with the parent");
        return 1;
   }
   /*
    * Parallel code here.
    * The manager is represented as the process with rank 0 in (the remote
    * group of) the parent communicator.  If the workers need to communicate
    * among themselves, they can use MPI_COMM_WORLD.
    */
   if(argc >= 2)
        numDarts = atoi(argv[1]);
   else
   {
      printf("Error for: %i, number of darts not specified.\n", taskid);
   }
   printf("numDarts for child: %i\n", numDarts);
   printf("argv[1] = %s\n", argv[1]);
   double myPiSum = dboard(numDarts);
   printf("spawned process got result: %.9f\n", myPiSum);
   printf("Spawned process about to send message back to parent\n");
 //MPI_Send((void *)&myPiSum, 1, MPI_DOUBLE, 0, 1, parent);

   int rc = MPI_Reduce(&myPiSum, &pisum, 1, MPI_DOUBLE, MPI_SUM, 0, parent);
   if(rc != MPI_SUCCESS)
        printf("%d: Problem with mpi_reduce\n");

   printf("Sent message back to parent");
   MPI_Finalize();
   return 0;
} 
```

希望对于对此有更多经验的人来说，其原因会更加明显。我一直在尝试各种各样的事情，这就是为什么我有这么多 printf 调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:53:43.853

问题是主进程由于不正确使用而死亡`free()`：

```
char* args[1];
...
args[0] = malloc(256 * sizeof(char));
...
free(args); 
```

您正在尝试释放非堆（堆栈）内存并在现代版本`free(args)`中触发中止。`glibc`正确的调用应该是：

```
free(args[0]); 
```

除此之外，`MPI_Reduce`当使用互通器调用时，它不会按照您期望的方式工作。您必须更改主代码，以便它`MPI_ROOT`作为根参数传递给`MPI_Reduce`，然后您必须手动添加主值，因为它不会在减少期间使用（只有来自远程组中的进程的值正在减少 - 请参见[此处](https://stackoverflow.com/a/14734028/1374437)） .

# javascript - jQuery .each 循环没有运行

> ID：14765154
> 
> 赞同：0
> 
> 时间：2013-02-08T03:21:07.370
> 
> 标签：javascript, jquery, loops

我正在尝试执行以下一点点 jQuery：

```
 var c = 1;
$("#bench-box .pid-switch").each(function(){
    $(this).attr('name', 'pidsarray['+c+']');
    c = c + 1;
}); 
```

如果我将它输入到萤火虫控制台并以这种方式运行，它会完美运行。这告诉我选择器正在寻找我想要它找到的东西，并且它正在按照我想要的方式执行。

但是，如果我在代码中将其作为函数调用，而不是通过控制台调用，则它不起作用。它不会导致错误，它只是不会执行。我一个接一个调用的函数列表中的其余代码继续正常工作。

我无法弄清楚为什么它通过控制台工作而不是其他方式。这是我在代码中的调用方式：

```
$("#button").click(function() {
    adjustPids();
});

function adjustPids() {
var c = 1;
$("#bench-box .pid-switch").each(function(){
    $(this).attr('name', 'pidsarray['+c+']');
    c = c + 1;
});    
} 
```

有什么想法吗？

编辑：

上面的 jQuery 代码按照正常情况包装在 $(document).ready(function () 中。我在原来的问题中没有提到这一点很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:40:33.710

据我所知，您发布的代码没有任何问题，控制台中是否有错误？如果您打算调试而不是我建议将 Firefox 与 Firebug 或 Chrome 一起使用（不需要插件）；按 f12 打开开发人员工具并在控制台中查看输出：

```
<!DOCTYPE html>
<html>
<head>
<script src="jquery.js"></script>
<script>
    $(document).ready(function(){
        $("#button").click(function() {
            console.log("ok, clicked");
            adjustPids();
        });

        function adjustPids() {
            var c = 1;
            console.log("adjustPids");
            $("#bench-box .pid-switch").each(function(){
               console.log("and this is",this);
               $(this).attr('name', 'pidsarray['+c+']');
                c = c + 1;
            });         
        };
    });
</script>
</head>
<body >
<div id="bench-box">
    <div class="pid-switch">hello</div>
    <div class="pid-switch">hello</div>
    <div class="pid-switch">hello</div>
</div>
<input type="button" id="button" value="click me" />
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:43:04.633

我很抱歉。现在一切正常。我只是重写了它并移动了一些东西。（虽然我重写了完全相同的代码，但我找不到从以前到现在的任何差异......非常令人困惑）。

所以我不确定它为什么起作用，但我很高兴它起作用了，我将继续我的下一个任务。

感谢您的所有帮助，无论如何。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T03:39:31.267

```
 var c = 1;
$("#bench-box .pid-switch").each(function(i,elm){
    $(elm).attr('name', 'pidsarray['+c+']');
    c = c + 1;
}); 
```

# c++ - 如何轻松地在 C++ 中格式化我的数据表？

> ID：14765155
> 
> 赞同：35
> 
> 时间：2013-02-08T03:21:25.040
> 
> 标签：c++

我不确定，但我想我记得Java中有一些东西可以指定字符串或数字从窗口左侧开始的距离。

如何轻松格式化表格？我有这个（使用setw）：

```
Bob Doe     10.96      7.61     14.39      2.11     47.30     14.21     44.58      5.00     60.23
Helen City     10.44      7.78     16.27      1.99     48.92     13.93     53.79      5.00     70.97
Joe Green     10.90      7.33     14.49      2.05     47.91     14.15     44.45      4.70     73.98 
```

理想情况下希望：

```
Bob           Doe        BLR  10.96   7.61  14.39   2.11  47.30  14.21  44.58   5.00  60.23  4:27.47
Helen         City       CUB  10.90   7.33  14.49   2.05  47.91  14.15  44.45   4.70  73.98  4:29.17
Joe           Green      USA  10.44   7.78  16.27   1.99  48.92  13.93  53.79   5.00  70.97  5:06.59 
```

是唯一的计算方法吗？还是有一些更神奇更简单的方法？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-10T10:44:13.607

在 C++ 中，您可以使用三个函数来帮助您做您想做的事。中有定义[`<iomanip>`](http://en.cppreference.com/w/cpp/io/manip)。
- [setw()](http://en.cppreference.com/w/cpp/io/manip/setw)帮助您定义输出的宽度。
- [setfill()](http://en.cppreference.com/w/cpp/io/manip/setfill)用你想要的字符填充其余部分（在你的情况下是''）。
-[左](http://en.cppreference.com/w/cpp/io/manip/left)（或右）允许您定义对齐方式。

这是编写第一行的代码：

```
#include <iostream>
#include <iomanip>

using namespace std;

int main() {
    const char separator    = ' ';
    const int nameWidth     = 6;
    const int numWidth      = 8;

    cout << left << setw(nameWidth) << setfill(separator) << "Bob";
    cout << left << setw(nameWidth) << setfill(separator) << "Doe";
    cout << left << setw(numWidth) << setfill(separator) << 10.96;
    cout << left << setw(numWidth) << setfill(separator) << 7.61;
    cout << left << setw(numWidth) << setfill(separator) << 14.39;
    cout << left << setw(numWidth) << setfill(separator) << 2.11;
    cout << left << setw(numWidth) << setfill(separator) << 47.30;
    cout << left << setw(numWidth) << setfill(separator) << 14.21;
    cout << left << setw(numWidth) << setfill(separator) << 44.58;
    cout << left << setw(numWidth) << setfill(separator) << 5.00;
    cout << left << setw(numWidth) << setfill(separator) << 60.23;
    cout << endl;

    cin.get();
} 
```

**编辑：** 要减少代码，您可以使用模板函数：

```
template<typename T> void printElement(T t, const int& width)
{
    cout << left << setw(width) << setfill(separator) << t;
} 
```

你可以这样使用：

```
printElement("Bob", nameWidth);
printElement("Doe", nameWidth);
printElement(10.96, numWidth);
printElement(17.61, numWidth);
printElement(14.39, numWidth);
printElement(2.11, numWidth);
printElement(47.30, numWidth);
printElement(14.21, numWidth);
printElement(44.58, numWidth);
printElement(5.00, numWidth);
printElement(60.23, numWidth);
cout << endl; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-01-04T18:23:52.903

以下是我用来以有组织的表格形式显示数据的各种函数，以及一个演示可能使用场景的示例。

因为这些函数使用字符串流，所以它们没有其他解决方案那么快，但对我来说这并不重要——计算瓶颈在别处。

使用字符串流的一个优点是函数会改变它们自己（内部范围）字符串流的精度，而不是改变静态 cout 精度。因此，您永远不必担心无意中修改精度会持续影响代码的其他部分。

* * *

**显示任意精度**

这个`prd`函数（“print double”的缩写）简单地打印一个具有指定精度的双精度值。

```
/* Convert double to string with specified number of places after the decimal. */
std::string prd(const double x, const int decDigits) {
    stringstream ss;
    ss << fixed;
    ss.precision(decDigits); // set # places after decimal
    ss << x;
    return ss.str();
} 
```

以下只是一个变体，它允许您在数字左侧指定一个空格填充。这有助于显示表格。

```
/* Convert double to string with specified number of places after the decimal
   and left padding. */
std::string prd(const double x, const int decDigits, const int width) {
    stringstream ss;
    ss << fixed << right;
    ss.fill(' ');        // fill space around displayed #
    ss.width(width);     // set  width around displayed #
    ss.precision(decDigits); // set # places after decimal
    ss << x;
    return ss.str();
} 
```

**中心对齐功能**

此函数只是将文本居中对齐，左右填充空格，直到返回的字符串与指定的宽度一样大。

```
/*! Center-aligns string within a field of width w. Pads with blank spaces
    to enforce alignment. */
std::string center(const string s, const int w) {
    stringstream ss, spaces;
    int padding = w - s.size();                 // count excess room to pad
    for(int i=0; i<padding/2; ++i)
        spaces << " ";
    ss << spaces.str() << s << spaces.str();    // format with padding
    if(padding>0 && padding%2!=0)               // if odd #, add 1 space
        ss << " ";
    return ss.str();
} 
```

**表格输出示例**

因此，我们可以使用上面的`prd`and`center`函数以下列方式输出表格。

编码：

```
std::cout << center("x",10)       << " | "
          << center("x^2",10)     << " | "
          << center("(x^2)/8",10) << "\n";

std::cout << std::string(10*3 + 2*3, '-') << "\n";

for(double x=1.5; x<200; x +=x*2) {
    std::cout << prd(x,1,10)       << " | "
              << prd(x*x,2,10)     << " | "
              << prd(x*x/8.0,4,10) << "\n";
} 
```

将打印表格：

```
 x      |    x^2     |  (x^2)/8  
------------------------------------
       1.5 |       2.25 |     0.2812
       4.5 |      20.25 |     2.5312
      13.5 |     182.25 |    22.7812
      40.5 |    1640.25 |   205.0312
     121.5 |   14762.25 |  1845.2812 
```

* * *

**右对齐和左对齐功能**

而且，当然，您可以轻松地构造函数的变体`center`，右对齐或左对齐，并添加填充空间以填充所需的宽度。以下是这样的功能：

```
/* Right-aligns string within a field of width w. Pads with blank spaces
   to enforce alignment. */
string right(const string s, const int w) {
    stringstream ss, spaces;
    int padding = w - s.size();                 // count excess room to pad
    for(int i=0; i<padding; ++i)
        spaces << " ";
    ss << spaces.str() << s;                    // format with padding
    return ss.str();
}

/*! Left-aligns string within a field of width w. Pads with blank spaces
    to enforce alignment. */
string left(const string s, const int w) {
    stringstream ss, spaces;
    int padding = w - s.size();                 // count excess room to pad
    for(int i=0; i<padding; ++i)
        spaces << " ";
    ss << s << spaces.str();                    // format with padding
    return ss.str();
} 
```

我敢肯定有很多更优雅的方式来做这种事情——当然还有更简洁的方式。但这就是我所做的。对我来说效果很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T13:51:59.440

只需使用带有[格式说明符](http://www.cplusplus.com/reference/cstdio/printf/#compatibility)的 sprintf来格式化字段。您还可以使用 MFC CString

```
#include <iostream>
#include "stdio.h"

using namespace std;

int main()
{
    char buf[256];
    char pattern[]  = "%10s %10s     %7.2f %7.2f %7.2f %7.2f %7.2f %7.2f %7.2f %7.2f %7.2f";
    sprintf(buf, pattern, "Bob",  "Doe",     10.96,      7.61,     14.39,      2.11,     47.30,     14.21,     44.58,      5.00,     60.23);
    cout << buf << endl;
    sprintf(buf, pattern, "Helen", "City",     10.44,      7.78,     16.27,      1.99,     48.92,     13.93,     53.79,      5.00,     70.97);
    cout << buf << endl;
    sprintf(buf, pattern, "Joe", "Green",     10.90,      7.33,     14.49,      2.05,     47.91,     14.15,     44.45,      4.70,     73.98);
    cout << buf << endl;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T03:36:50.407

你可以做这样的事情来简化这个过程。

```
#include <iomanip>
#include <iostream>

struct TableFormat {
    int width;
    char fill;
    TableFormat(): width(14), fill(' ') {}
    template<typename T>
    TableFormat& operator<<(const T& data) {
        std::cout << data << std::setw(width) << std::setfill(fill);
        return *this;
    }
    TableFormat& operator<<(std::ostream&(*out)(std::ostream&)) {
        std::cout << out;
        return *this;
    }
};

int main() {
    TableFormat out;
    out << "Bob" << "Doe";
    out.width = 8;
    out << "BLR" << 10.96 << 7.61 << 14.39 << 2.11 << 47.30;
} 
```

哪个会打印出来（在我的情况下很可怕，但它在一定程度上是“可定制的”）：

```
Bob           Doe           BLR   10.96    7.61   14.39    2.11    47.3 
```

代码非常不言自明，它只是一个包装器`std::cout`，让您可以更轻松地进行繁琐的调用，第二个重载`operator<<`是允许您发送`std::endl`..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T03:37:36.960

考虑一个例子：

```
string firstname = "Bob";
string lastname = "Doe";
string country = "BLR";
float f1 = 10.96f, f2=7.61f, f3=14.39f, f4=2.11f, f5=47.30f, f6=14.21f, f7=44.58f, f8=5.00f, f9=60.23f;
string time = "4:27.47";
cout << setw(12) << firstname << set(12) << lastname;
cout << setw(5) << country << setprecision(2) << f1 << setprecision(2) << f2 << setprecision(2) << f3.. 
```

1.  用于`setw()`在打印字符串时设置宽度
2.  用于`setprecision`设置浮点值的精度
3.  阅读[MSDN](http://msdn.microsoft.com/en-US/library/daeb650d(v=vs.80).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T03:39:00.037

我不确定你写了什么，所以我看不出有什么问题，但你可以使用 std::setw 得到你想要的结果：

```
#include <iostream>
#include <iomanip>

int main() {
   std::cout << std::left << std::setw(20) << "BoB" << std::setw(20) << 123.456789 << '\n';
   std::cout << std::left << std::setw(20) << "Richard" << std::setw(20) << 1.0 << '\n';
} 
```

[http://ideone.com/Iz5RXr](http://ideone.com/Iz5RXr)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-08T03:22:47.253

假设您要将输出格式化为类似于表格，您需要的是**[I/O manipulators](http://www.cplusplus.com/reference/iomanip/?kw=iomanip)**。
您可以使用**[setw()](http://www.cplusplus.com/reference/iomanip/setw/)**操纵器来设置输出宽度和**[setfill()](http://www.cplusplus.com/reference/iomanip/setfill/)**来设置填充字符。

# c# - 接口中通用集合的协方差问题

> ID：14765156
> 
> 赞同：0
> 
> 时间：2013-02-08T03:21:26.183
> 
> 标签：c#, generics, mono, covariance, xamarin

我有点困惑为什么我在这里遇到这个错误。既然我声明`T`了 as `out`，返回它的类型不应该是可以的吗？

```
public interface IWebFeed<out T> where T : BaseItem
{
    List<T> getItems();

    void loadFeed();
} 
```

相反，我得到：

> 协变类型参数`T' must be invariantly valid on` Shared.Service.Feed.IWebFeed.getItems()'

**编辑：**所以，正如 mbeckish 指出的那样，在他的链接中，更改`List<T>`to`IEnumberable<T>`应该可以解决这个问题，但是当我遵循 的声明时`IEnumerable`，我得到以下信息：

```
using System;
namespace System.Collections.Generic
{
    public interface IEnumerable<T> : IEnumerable
    {
        //
        // Methods
        //

        IEnumerator<T> GetEnumerator();
    }
} 
```

这是 Xamarin 或他们的 PCL 中的错误吗？事实`T`并非如此`out`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:19:27.130

MonoTouch ( Xamarin ) 中尚不支持接口变化，并且应该在未来的版本中出现，因为 Mono 最近添加了接口变化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T03:42:51.663

您需要将 GetItems 方法的定义更改为以下...

```
List<BaseItem> GetItems(); 
```

这是因为您声明了`T`它必须符合形状的限制`BaseItem`，因此为了保持方差，您必须限制列表中项目的类型。这允许您创建多个`BaseItem`类列表并交换它们，而无需显式转换。

# android - 不使用标准 api 将日志写入 Android logcat

> ID：14765158
> 
> 赞同：-1
> 
> 时间：2013-02-08T03:21:39.783
> 
> 标签：android, logging, android-logcat

我想使用 write() 或 libc 中可用的一些 api（实际上是 ulibc）来实现 __android_log_write() 功能。原因是我不能使用任何与 android 相关的库，因为这会增加所需的内存。我的内存量非常有限，因为我的代码在启动期间保留的单独内存区域中运行。主要目标是将我的调试日志附加到 logcat。

我正在寻找类似的东西：

```
write(1,"sandy",6); 
```

以上代码我可以直接写入标准输出。同样，我想使用 write() 或其他东西并写入 logcat。什么是干净的方法。

希望我很清楚。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:47:24.760

得到了答案。我们需要打开 /dev/radio 并写入它们。

谢谢

# jenkins - 使用 Jenkins 节点时，Firefox 驱动程序在创建时挂起

> ID：14765163
> 
> 赞同：1
> 
> 时间：2013-02-08T03:22:48.037
> 
> 标签：jenkins, selenium-webdriver, selenium-grid

我刚刚为 Jenkins 安装了 Selenium Grid 插件，并开始探索用它分发测试。我创建了一个简单的测试，它只打开一个浏览器，获取一个 url，然后关闭浏览器。这似乎适用于 Chrome（在 Mac 上）和 IE（在 Windows 上），但由于某种原因，在 Mac 上使用 Firefox 18.0.2 时，我看到浏览器窗口打开，但我应该加载的 url 从未出现在 url 中酒吧和东西挂起，我得到一个错误：

```
WebDriverException: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms. Firefox console output: 
```

它挂在构造函数中的某个位置以创建 RemoteDriver。我在构造函数之后添加了一个跟踪语句，代码永远不会到达那里。

奇怪的是，如果我在失败的同一台机器上启动本地 Selenium Grid 节点并将我的测试定向到那里而不是 Jenkins Selenium Grid 集线器，那么测试执行得很好。所以这似乎是我如何设置 Jenkins 节点的问题，但我不知道如何解决这个问题。任何帮助，将不胜感激。

我的代码是这样的：

```
WebDriver driver = null;

public Browser(String gridUrl) {
     driver = makeFirefox(gridUrl);
     driver.get(url);
}

private WebDriver makeFirefox(String gridUrl) {

      FirefoxProfile prof = new FirefoxProfile();
      prof.setEnableNativeEvents(true);

      DesiredCapabilities capabilities = DesiredCapabilities.firefox();
      capabilities.setCapability(FirefoxDriver.PROFILE, prof);

      WebDriver driver = null;
      try{
         driver = new RemoteWebDriver(new URL(gridUrl), capabilities);
      } catch (MalformedURLException e) {
         e.printStackTrace();
      }

      return driver;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:35:17.487

对于遇到这种情况的任何人，我至少可以通过降级到 Firefox 17 来暂时“解决”这个问题。那里一切正常，只是 Firefox 18 不行。

# c++ - 如何从边缘制作二叉树？

> ID：14765164
> 
> 赞同：0
> 
> 时间：2013-02-08T03:22:53.043
> 
> 标签：c++, algorithm, data-structures, tree, binary-tree

我从 from 的输入中获取二叉树的所有边

```
 parentId childId
   e.g. 0 3 // means from node 0 to node 3
   // 0 does not mean root of the tree. 
```

我如何从中构造树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:26:43.080

一种方法是分两次执行：

1.  组装树中的所有链接。
2.  找到树的根。

要组装所有链接，您可以首先构建一个以每个节点的 ID 为键的哈希表（如果您知道 ID 都在 0 ... N 范围内，则可以构建一个适当大小的巨型数组以供选择） N)。每当您从文件中读取一行时，您都可以执行以下操作：

1.  如果节点不存在由起点和终点指定的 ID，则创建这些节点并最初将它们的左右指针设置为 NULL。
2.  将第二个节点添加为第一个节点的子节点。（我假设这不是二叉搜索树，所以孩子的顺序无关紧要。如果这是二叉搜索树，那么您可以根据找到的内容设置适当的孩子指针）。

要找到树的根，您可以创建一组节点作为根节点的候选节点，最初是树中的每个节点。然后，您可以遍历到目前为止已构建的节点。每次你发现一个节点 v 是另一个节点 u 的子节点时，你可以从候选根集合中删除节点 v（因为它是一个子节点）。完成后，您将得到所有可能的根集。如果边列表确实定义了一棵二叉树，那么这将只是一个节点。如果它定义了一个二叉树的森林，这将为您提供森林中所有树的根。

总的来说，这需要 O(n) 时间，其中 n 是边数（也是树中的节点数，因为二叉树中的边数是节点数减一）。

如果您愿意，可以将这两个通道合并为一个通道；为了便于展示，我只是分别描述了它们。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:27:44.290

首先你建立一个节点ID的地图，连接节点的列表，
然后遍历地图并创建从你的信息到地图中的链接

如果是二叉树，则文件中缺少信息，格式中应该有

parent、leftChild、rightChild 或
or 和 left 和 right 总是按相同的顺序（左在前），每个节点两行，第二行在下一行。

# javascript - Aptana Studio 3.3.1。Javascript代码完成

> ID：14765166
> 
> 赞同：3
> 
> 时间：2013-02-08T03:22:58.553
> 
> 标签：javascript, aptana, aptana3

我是 Aptana 的新手，我刚刚开始了一个自然是 Web 的项目。

我有两个代码完成问题，在网上做了一些研究，但没有找到解决方案。

1）我有这两行代码。

```
 var script = document.createElement("script");
         script.type = "text/javascript"; 
```

我希望在输入“script.”时在第二行中完成代码，并且我有一些建议。但我没有建议脚本的属性，特别是在这个例子中，没有建议属性“类型”。

2）我不能在“文档”对象或“createElement”函数上“转到声明”。

我不知道这些是自动完成功能不受支持还是我遗漏了一些东西，也许是一些配置。

只是为了比较，我在 RubyMine 中都有这两个功能。

提前致谢 ！罗多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:01:20.247

I am going to assume you are writing Javascript inside the HTML editor, because I think if you were editing in the Javascript Source editor you would not be having this problem. Assuming that you are unwilling or unable to separate your Javascript out into .js files, [newbie](https://stackoverflow.com/users/1133660/newbie) answered a similar (the same?) question [here](https://stackoverflow.com/questions/12990955/code-assist-for-javascript-in-html-files-not-working-well-in-aptana-3) with [a patch](https://github.com/JockiHendry/aptanastudio-contentassist-patch) that I have not tried.

So you have a couple of options (if my assumptions are right):

```
* Use the Javascript Source editor (by right clicking and choosing Open With > Other)
* Try the patch 
```

# javascript - 这个 html 中如何触发 checkDisplay？

> ID：14765167
> 
> 赞同：2
> 
> 时间：2013-02-08T03:23:09.390
> 
> 标签：javascript, html

似乎每次单击复选框都会触发页面正文中的 checkDisplay 。但是怎么做？该功能似乎没有与复选框绑定......

```
<!DOCTYPE html>
<html>
<head>
<title>Checkbox</title>
<script type="text/javascript">
    var checkDisplay = function(check, form) { //check ID, form ID
        form = document.getElementById(form), check =         document.getElementById(check);
        check.onclick = function(){
            form.style.display = (this.checked) ? "block" : "none";
            form.reset();
        };
        check.onclick();
    };
</script>
</head>
<body>
<input type="checkbox" id="check" />
<form id="form">
    <input type="checkbox" /><input type="text" />
</form>
<script type="text/javascript">
checkDisplay("check", "form");
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:26:08.957

这是因为你在打电话：

```
<script type="text/javascript">
checkDisplay("check", "form");
</script> 
```

您正在传递“检查”，它正在为您的复选框创建一个 onclick 事件：

```
check = document.getElementById(check);
check.onclick = function(){
    form.style.display = (this.checked) ? "block" : "none";
    form.reset();
}; 
```

请注意将检查从值“检查”重置为具有该 ID 的页面上的复选框控件的行。

祝你好运。

# php - 一个带有两个提交按钮和每个按钮的不同操作的表单

> ID：14765170
> 
> 赞同：33
> 
> 时间：2013-02-08T03:23:20.140
> 
> 标签：php, forms

我花了几个小时试图找到解决问题的方法，但似乎找不到合适的解决方案。提前感谢你的帮助！

我有一个 html 表单：

```
<form id="columnarForm"  action="formindb_hoh_1.php" enctype="multipart/form-data" method="post" /> 
```

我想要两个提交按钮：

```
<input type="image" name="camper" value="camper" src="../images/apps/camperBtn.png" class="submit_button" />
<input type="image" name="medical" value="medical" src="../images/apps/medicalBtn.png"class="submit_button" /> 
```

我希望第一个提交按钮在单击时具有formindb_hoh_1.php 的动作，而第二个提交按钮具有formindb_hoh_2.php 的动作，但我不确定如何使一个按钮具有一个动作而另一个按钮具有不同的动作行动。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2015-01-28T20:23:51.827

没有 JS，使用 HTML5。

更改提交按钮以使用新的 HMTL5 按钮属性**formaction**：

```
<button type="submit" name="camper" formaction="formindb_hoh_1.php">Camper</button>
<button type="submit" name="camper" formaction="formindb_hoh_2.php">Medical</button> 
```

参考：[http ://devdocs.io/html/element/button](http://devdocs.io/html/element/button)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-08T03:26:01.880

参考这个：

[多个提交按钮php不同的动作](https://stackoverflow.com/questions/10691653/multiple-submit-buttons-php-different-actions)

将此脚本放在您的页面中：

```
<script>
    function submitForm(action)
    {
        document.getElementById('columnarForm').action = action;
        document.getElementById('columnarForm').submit();
    }
</script> 
```

修改您的输入代码：

```
<input type="image" name="camper" onclick="submitForm('formindb_hoh_1.php')" value="camper" src="../images/apps/camperBtn.png" class="submit_button" />
<input type="image" name="medical" onclick="submitForm('formindb_hoh_2.php')" value="medical" src="../images/apps/medicalBtn.png"class="submit_button" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-19T05:47:14.077

终于，我花了一个多小时得到了答案。我尝试了各种方法，例如 switch case、jquery 和 JavaScript。但我只使用了 HTML5`formaction`标记，现在我的表单两个提交按钮在两个位置工作。

代码 ：

```
 <input type="submit" class="btn btn-success" value="Pay Now" name="submit"  style="width: 100%; letter-spacing: 1px; color: #fff; border: none;padding:  10px;" formaction="example.php">

   <button type="submit" class="btn btn-success" name="submit" style="width: 100%; letter-spacing: 1px; color: #fff; border: none;padding: 10px; margin-top: 15px;" formaction="mail.php"> Button</buttton>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-15T10:45:16.567

我有同样的问题。但问题是第一个按钮功能是在 JS 中，而另一个是使用 PHP。

```
$('#add-bookingid').submit(function(e){
e.preventDefault();
calculateDistance();
}); 
```

您会看到 $('#add-bookingid').submit ，因此两个按钮的按钮类型与提交相同。

[主要目的](https://i.stack.imgur.com/vEDGd.png)

[按钮#1](https://i.stack.imgur.com/VozRb.png)

[按钮#2](https://i.stack.imgur.com/Qc6ee.png)

# python - 对字典进行排序并将其写入 CSV 文件

> ID：14765173
> 
> 赞同：3
> 
> 时间：2013-02-08T03:23:30.853
> 
> 标签：python, csv, dictionary

我有一个字典，其中元组作为键，列表作为值

```
myDict = {
 (1, 9078752378): [('Smith', 'Bob'), 'Head guard'],
 (2, 9097615707): [('Burdell', 'George'), 'Lifeguard'],
 (3, 9048501430): [('Smith', 'Amanda'), 'Lifeguard'],
 (4, 9026450912): [('Brown', 'John'), 'Lifeguard'],
 (5, 9027603006): [('Flowers', 'Claudia'), 'Lifeguard'],
 (6, 9055520890): [('Smith', 'Brown'), 'Head guard'],
 (7, 9008197785): [('Rice', 'Sarah'), 'Lifeguard'],
 (8, 9063479070): [('Dodd', 'Alex'), 'New Lifeguard'],
 (9, 9072301498): [('Sparrow', 'Jack'), 'New Lifeguard'],
 (10, 9084389677): [('Windsor', 'Harry'), 'New Lifeguard']
} 
```

我完全坚持如何将此字典写入 csv 文件，以便以这种格式编写

```
1 9078752378 Smith Bob Head guard 
```

..等等到9

请帮忙！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T03:34:04.603

假设您的格式是一致的，这应该可以解决问题：

```
with open('youfile.csv', 'w') as f:
  for k,v in sorted(myDict.iteritems()):
    f.write('{} {} {} {} {}\n'.format(k[0], k[1], v[0][0], v[0][1], v[1])) 
```

不过，我应该警告您输出格式中的潜在问题，如果您需要再次解析它，您想引用值，或使用不同的分隔符，例如：

`1 9078752378 Smith Bob "Head guard"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T03:32:18.330

```
with open("CSV", 'w') as f:
   f.write('\n'.join([",".join(map(str,[a,b,c,d,e])) for (a, b), ((c, d), e) in sorted(myDict.items())])) 
```

解释 -

`sorted(myDict.items())`将根据键对字典进行排序。

`for (a, b), ((c, d), e) in sorted(myDict.items())`将解开你的价值观。

`",".join(map(str,[a,b,c,d,e]))`将通过逗号加入解压缩的值。

`[",".join(map(str,[a,b,c,d,e])) for (a, b), ((c, d), e) in sorted(myDict.items())]`是上述逗号连接值的列表理解。

`'\n'.join([",".join(map(str,[a,b,c,d,e])) for (a, b), ((c, d), e) in sorted(myDict.items())]`将用换行符加入上述列表。

# android-image - BitmapFactory.decodeStream 返回 null 读取本地文件

> ID：14765177
> 
> 赞同：1
> 
> 时间：2013-02-08T03:23:52.720
> 
> 标签：android-image

我的问题的快速总结：我正在尝试读取本地图像文件。如果我将文件包含在我的资产目录中并将其视为资产，那么一切正常。但是，如果我尝试从外部 sd 卡读取它，BitmapFactory.decode 流返回 null。我对 .jpeg 和 .png 文件都有相同的结果。

这就是我从资产文件中获取 InputStream 的方式：

```
InputStream isa = context.getAssets().open("Boulder.jpg"); 
```

这就是我从资产文件中获取 InputStream 的方式：

```
File f = new File( "/mnt/extSdCard/Maps/Colorado/Boulder.jpg" );
InputStream isf = new BufferedInputStream( new FileInputStream( f.toString() ) ); 
```

在任何一种情况下，InputStream 都会传递给这段代码：（如果这段代码看起来很熟悉，它是从互联网示例中借来的）

```
this.decoder = BitmapRegionDecoder.newInstance(inputStream, false);

tmpOptions.inJustDecodeBounds = true;   
Bitmap temp = BitmapFactory.decodeStream(inputStream, null, tmpOptions);
setSceneSize(tmpOptions.outWidth, tmpOptions.outHeight);

tmpOptions.inJustDecodeBounds = false;
tmpOptions.inSampleSize = (1<<downShift);
sampleBitmap = BitmapFactory.decodeStream(inputStream, null, tmpOptions); 
```

同样，使用资产文件派生的 InputStream，一切正常。相反，对于 sdCard 文件，第一次调用后 outWidth 和 outHeight 均为 -1，第二次调用后 sampleBitmap 为空。

我真的被这个问题缠住了，花了很多时间浏览这个论坛并尝试了建议的解决方案，但都无济于事。我还编写了一些测试代码来打开文件的两个版本，创建如上所示的 InputStreams，然后读取每个流的内容并比较每个字节，发现它们是相同的。

我已经在不同的设备上尝试了相同结果的代码。我目前正在使用 AndroidManifest 中的以下版本信息在 Galaxy Note II (Android 4.1.1) 上进行测试：

```
<uses-sdk android:minSdkVersion="16" android:targetSdkVersion="16"/> 
```

我需要能够将文件动态添加到系统中，因此不能将所有内容都包含为资产。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-19T11:15:03.463

你可以简单地使用

```
 BitmapFactory.decodeFile(file.getAbsolutePath(), tmpOptions); 
```

而不是

文件 f = 新文件（“/mnt/extSdCard/Maps/Colorado/Boulder.jpg”）；InputStream isf = new BufferedInputStream( new FileInputStream( f.toString() ) ); BitmapFactory.decodeStream(inputStream, null, tmpOptions)

# sas - PROC Lifereg - 固定一个参数

> ID：14765179
> 
> 赞同：1
> 
> 时间：2013-02-08T03:24:19.787
> 
> 标签：sas

在 LIFEREG 过程中，您可以使用选项指定广义 gamma 分布，该`dist = gamma`选项基于三参数广义 gamma 分布生成估计值。SAS 声明标准的两个参数 gamma 分布不可用，但如果可以根据[http://en.wikipedia.org/wiki/Generalized_gamma_distribution](http://en.wikipedia.org/wiki/Generalized_gamma_distribution)将 Shape 参数固定为等于 1 就可以了。

是否可以在 LIFEREG 中修复特定参数的值，或者是否有类似 NLMIXED 的设置可能有效。作为参考，我将使用的完整代码如下所示：

```
proc lifereg data=work.data;
    model t*event(0) = X  / D= Gamma;   
run; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:10:37.810

您可以在数据步骤中对 2 参数伽马分布进行 MLE。片段：

```
s = log(meanvar) - meanlogvar;
k = (3 - s + sqrt( (s - 3)**2 + 24 * s )) / (12 * s);

do j=1 to &iterations until( abs(k - ki) < &condition );
  ki = k;
  k = ki - ( (log(ki) - digamma(ki) - s) / ((1/ki) - trigamma(ki)) );
end;
theta = meanvar / k; 
```

请参阅：[http ://en.wikipedia.org/wiki/Gamma_distribution#Maximum_likelihood_estimation](http://en.wikipedia.org/wiki/Gamma_distribution#Maximum_likelihood_estimation)

# codeigniter - CodeIgniter：了解路由

> ID：14765180
> 
> 赞同：0
> 
> 时间：2013-02-08T03:24:20.193
> 
> 标签：codeigniter, routes

我在**routes.php** `$route['user'] = "user_controller";`中定义了这条路线。用户控制器有一个方法`logout()`，但是当我尝试这个 URI 时，`user/logout`我得到一个 404。以同样的方式，当我使用这个 URI 时，`user/index`我得到一个 404。

**路由.php**

```
// custom routes
$route['start'] = "start_controller";
$route['register'] = "register_controller";
$route['user'] = "user_controller";

// other routes
$route['default_controller'] = "start_controller";
$route['404_override'] = ''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:45:01.367

**根据 CI**

> 注意：路由将按照定义的顺序运行。较高的路线总是优先于较低的路线。

`$route['default_controller']`并且`$route['404_override']`必须始终高于其他人

```
$route['user/logout'] = "user_controller/logout";
$route['user/index'] = "user_controller"; 
```

示例我将输入 a`user/logout`然后它将继续`user_controller/logout`您必须定义`URL`您要重定向的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T08:35:04.993

是的，您必须为每种特定方法指定一条路线。

这是我的 routes.php 中的一个示例：

```
/* User Authentication Controller */
$route['login']     = "auth/login";
$route['logout']    = "auth/logout";
$route['register']  = "auth/register";
$route['forgot']    = "auth/forgot"; 
```

# php - php mysqli FRUSTRATION

> ID：14765186
> 
> 赞同：0
> 
> 时间：2013-02-08T03:25:39.160
> 
> 标签：php, mysqli

我必须遵循代码：

```
session_start();
if(isset($_SESSION['Username']))
{
    //User has selected auto sign-in re-fill session variables.
    $mysqli = new mysqli('****','****','****','****');
    if($mysqli->errno)
    {
        //Error connecting
    }
    else 
    {
        //No error connecting to database
        $stmt = $mysqli->prepare("SELECT Expires FROM Subscribers WHERE UName=?");
        $stmt->bind_param('s', $_SESSION['Username']);
        $stmt->execute();
        $stmt->bind_result($Expires);
        $stmt->store_result();
        while($row = $stmt->fetch())
        {
            if($Expires < time())
            {
                //Deny user
                $pageToShow = "Payment";
            }
            else 
            {
                //Accept    
                $pageToShow = "Content";
            }
        }
    }
}
else 
    { ... } 
```

我收到错误`Fatal error: Call to a member function bind_param() on a non-object in /home/content/42/7401242/html/****/wp-content/themes/****/archive.php on line 15`

大约 30 分钟前，我在另一个页面上遇到了这样的错误，我已经`FROM`从 sql 查询中得到了这个错误，但是我一遍又一遍地阅读、重新阅读、重新检查了代码的每一个字母。我要把我所有的头发都拔掉...

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:58:25.117

这很简单。
你没有处理错误。
甚至没有问如何做到这一点。

在您的另一个问题中，他们向您展示了错误本身，而不是向您展示如何自己查看错误的方式。
在目前的问题中，答案是“检查您的查询”，这也不太有用。

与其要求其他人在您的查询中查找拼写错误，不如请 mysqli 来做。这样更有效率，特别是因为可能有另一个错误，不是在查询中，而是在其他地方。

因此，您必须检查每个数据库交互结果并将其转换为 PHP 错误。

```
$sql = "SELECT Expires FROM Subscribers WHERE UName=?";
$stmt = $mysqli->prepare($sql) or trigger_error($mysqli->error);
...
$stmt->execute() or trigger_error($mysqli->error); 
```

因此，您将立即知道出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:34:02.997

该错误告诉您您的`SQL`查询返回一个空结果。你必须做的两件事：

1.  检查您是否正确连接到数据库以及您是否有权访问数据库中的数据

2.  检查您的查询，看看它是否在您的`SQL` 数据库中返回任何结果。

# php - 如何编写零售调度程序

> ID：14765187
> 
> 赞同：0
> 
> 时间：2013-02-08T03:25:41.203
> 
> 标签：php, javascript, html, mysql

在查看网络时，我收到了关于如何处理这个问题的混合报告，所以我想我应该问你们所有人。我不确定它是否可以使用 JavaScript、PHP 和 MySql，但这是我想做的。

我是一家小型零售商的经理，我每周必须安排 20 人。我们每天都有不同的时间，有些人是兼职的，有些人是全职的，等等。

我可以创建一个可以处理这个问题的网页吗？我正在考虑创建一个员工数据库，其状态为 FT 或 PT 等，但不知道哪种语言最适合用于功能齐全的调度程序。此外，我希望最终添加将休假请求输入表单的选项，以便调度程序不允许他们在请求的日期工作。

调度程序必须是自动化的，当然可能需要在生成后进行一些用户调整。

我不是在寻找代码......只是关于你将从哪里开始的建议和想法（什么语言，格式等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T18:09:19.280

就像@gilly3 所说，您使用的语言实际上取决于您的个人喜好以及您已经拥有的知识。以下是我认为可以接受的一些概述：

*   **Python**可能是更容易学习的语言之一，主要是因为它易于阅读。
    *   有很多很好的学习方法。我喜欢[这个 nettuts+ 系列](http://net.tutsplus.com/tutorials/python-tutorials/python-from-scratch-creating-a-dynamic-website/)。该系列是关于使用 Django 创建动态网站的，但在此之前，它会彻底了解 Python 语言。您还可以访问其他网站了解 Python，例如[python.org](http://www.python.org/doc/)等。
    *   Python 最适合创建本地应用程序，而不是在线应用程序。但是，有一些方法可以在 Web 开发中使用 python。
    *   您很可能会在一个文件中记录人们的统计数据（兼职、全职...等），可以是 python 文件，也可以是其他可以由 python 解析的文件（例如 XML 或 JSON）。
    *   对于结果，您可以让它打印到命令行/终端或使用 tkinter 库。打开一个窗口并直观地显示时间表。

* * *

*   **如果您打算在 MySQL 数据库中记录人们的统计数据， PHP**将是您的最佳选择，也许使用 phpMyAdmin 或类似的东西。

    *   PHP 需要托管在服务器（Apache、IIS...等）上，但这应该不是问题。
    *   这也是一门非常容易学习的语言，由于可用的大量资源，[php.net](http://www.php.net/docs.php)是我认为最好的地方之一，但你可能会找到另一个你更喜欢的地方。

* * *

*   如果您喜欢**HTML**、**CSS**和**JavaScript**，那么您可以简单地创建一个网页并让用户在他们的浏览器中打开它。
    *   If you used this option, you would write out the people's stats in a file (probably JSON if you're working with JavaScript or it could be just plain JavaScript), and simply reference it with a `<script>` tag or and Ajax call.
    *   There are *so* may resources out there for learning these that I can't even remember my favorites.
    *   JavaScript is probably the best if you want the user to be able to edit the schedule right in the program.
*   If you like **HTML**, **CSS** and **JavaScript**, but want a desktop application, check out [TideSDK](http://www.tidesdk.org/)

Keep in mind that if you use PHP and MySQL, you will also have the full power of HTML, CSS and JavaScript in your hands. For that reason, I would recommend PHP. It's only drawback is needing a server, but there are many ways to get around that ([XAMPP (windows/linux)](http://www.apachefriends.org/en/xampp.html), [WAMP (windows)](http://www.wampserver.com/en/), [MAMP (mac)](http://www.mamp.info/en/index.html) and probably others, but those are the most famous.

Sorry if I've left anything out, feel free to edit.

# sql - 用于矩形棱镜体积计算的 PL/SQL 绑定变量

> ID：14765191
> 
> 赞同：0
> 
> 时间：2013-02-08T03:26:02.887
> 
> 标签：sql, oracle, plsql

我已经解决了这个问题，并让它在声明的替换变量上正常工作，但我无法让它为 BIND 变量正确计算。我被告知它与 SQL*PLUS 和 Oracle 的开发人员混淆了。这是我最初回答正确的问题，但 BIND 变量部分不起作用。 [学习绑定变量问题](https://stackoverflow.com/questions/14667242/learning-bind-variables-in-pl-sql-along-with-calculation-input-and-output-dbms-o)

所以我有使用替换变量计算矩形棱镜体积的代码，但想使用像这样声明的 BIND 变量。我的教科书说我必须使用 PRINT 并在结束后打印；/ 命令并且不显示 dbms_output 所以这可能是一个问题。这不是一种非常实际的做事方式，我理解这一点。

```
SET SERVEROUTPUT ON
VARIABLE d_length NUMBER;
VARIABLE d_height NUMBER;
VARIABLE d_width NUMBER;

DECLARE 
    d_volume    NUMBER;
BEGIN
    :d_length := &q_length;
    :d_height := &q_height;
    :d_width := &q_width;

    DBMS_OUTPUT.PUT_LINE('The length dimension is: ' || :d_length);
    DBMS_OUTPUT.PUT_LINE('The height dimension is: ' || :d_height);
    DBMS_OUTPUT.PUT_LINE('The width dimension is: ' || :d_width);  

    d_volume := :d_length * :d_height * :d_width;

    DBMS_OUTPUT.PUT_LINE(
        'The rectangular prism volume for the swimming pool is: ' 
           || d_volume);

END;
/ 
```

所以我的问题是，如何让它与 BIND 变量一起使用，我将变量放在块之外作为 VARIABLES，然后声明 d_volume，执行该计算，并使用这些绑定变量打印出游泳池的体积。我就在这附近，但有些不对劲。它打印出 dbms_output 语句，但不显示任何变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:00:09.400

正如[您对上一个问题的回答](https://stackoverflow.com/a/14667626/266304)以及 APC 的评论中所述，绑定变量在这里并没有给您太多帮助，但这似乎是一个练习，所以......您拥有的代码显示了 OK 的值`dbms_output`。要[`PRINT`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve031.htm)改为使用，您不能`d_volume`在 PL/SQL 块中声明，因为当您退出该块时它将超出范围，因此您还需要将其`variable`设为 a：

```
VARIABLE d_length NUMBER;
VARIABLE d_height NUMBER;
VARIABLE d_width NUMBER;
VARIABLE d_volume NUMBER;

BEGIN
    :d_length := &q_length;
    :d_height := &q_height;
    :d_width := &q_width;

    :d_volume := :d_length * :d_height * :d_width;
END;
/

print d_length
print d_height
print d_width
print d_volume 
```

在 SQL*Plus 中，`set verify off`除去一些杂物，它给出：

```
Enter value for q_length: 3
Enter value for q_height: 4
Enter value for q_width: 5

PL/SQL procedure successfully completed.

  D_LENGTH
----------
         3

  D_HEIGHT
----------
         4

   D_WIDTH
----------
         5

  D_VOLUME
----------
        60

SQL> 
```

奇怪的是，这在 SQL Developer（3.1.07 或 3.2.20）中不太适用；该行`:d_volume := :d_length * :d_height * :d_width;`未按预期分配值，因此报告为空。您可以`select :d_length * :d_height * :d_width into :d_volume from dual;`改为这样做，这很有意义，因为它们是“SQL 语句中的占位符”。看来您仍然无法`:d_volume`在块内引用（即，如果您`dbms_output`这样做，则报告为 null），但它显示为`print`.

```
BEGIN
    :d_length := &q_length;
    :d_height := &q_height;
    :d_width := &q_width;

    select :d_length * :d_height * :d_width into :d_volume from dual;
    dbms_output.put_line('d_volume inside the block: ' || :d_volume);
END;
/

anonymous block completed
d_volume inside the block: 

D_LENGTH
-
3

D_HEIGHT
-
4

D_WIDTH
-
5

D_VOLUME
--
60 
```

* * *

有趣的是，在 SQL Developer 中`dbms_output.put_line(':d_volume');`显示了类似的内容；`:ZSqlDevUnIq8`在 SQL*Plus 中，它显示`:d_volume`.

# c - 为什么我在全新的套接字上收到 EPOLLHUP 事件

> ID：14765203
> 
> 赞同：3
> 
> 时间：2013-02-08T03:27:13.423
> 
> 标签：c, linux, sockets, epoll

我有一些代码在虚拟机上运行时由于某种原因行为不端。

初始化顺序为：

```
s_listen = socket(...)
bind(s_listen, ...)
epoll_ctl(epfd, EPOLL_CTL_ADD, s_listen, ...)
listen(s_listen, SOMAXCONN) 
```

在调用 bind 之前，有一个事件循环/线程在 epoll 文件描述符上运行和处理事件。

该事件循环在调用新创建的 s_listen 套接字上的 listen() 之前获得一个 EPOLLHUP。

所以我的问题是，为什么我要在一个全新的套接字上获得 EPOLLHUP 事件？

当我在调用listen（）之后放置epoll_ctl时错误消失了，但是如果它们在套接字添加到epoll之前进入，会导致错过一些潜在的连接事件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T05:07:52.833

正如我在评论中的示例所示，您似乎无法在正确初始化套接字之前轮询套接字，除非您想处理`EPOLLHUP`.

至于问题，不，您不会错过任何活动。调用`listen()`then`epoll()`与您必须执行的操作相同（`listen()`+ 阻塞`accept()`）；这些调用之间的实际传入连接由内核处理并一直等待直到您的代码处理它们。

# vhdl - 如何加快 VHDL 中的数学运算速度？

> ID：14765205
> 
> 赞同：4
> 
> 时间：2013-02-08T03:27:18.880
> 
> 标签：vhdl, fpga

我目前在 75MHz 像素时钟的上升沿进行一些计算，以在屏幕上输出 720p 视频。一些数学运算（比如一些模数）花费的时间太长（20+ns，而 75MHz 是 13.3ns），所以我的时序约束没有得到满足。我是 FPGA 新手，但我想知道是否有办法以比当前像素时钟更快的速度运行计算，以便在 75MHz 时钟的下一个滴答声之前完成它们。顺便说一句，我正在使用 VHDL。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T16:52:29.113

按照今天的 FPGA 标准，75 MHz 已经很慢了。

问题是模运算，它实际上涉及除法；并且分裂很慢。

仔细考虑您需要的操作，以及是否有任何方法可以重新组织计算。如果您正在为像素计时，就好像您有 32 位整数要处理；限制值更容易处理。

马丁暗示了一种选择：降低强度。如果您有 1280 像素/线并且需要对每三分之一进行操作，则无需计算 1280 mod 3！改为计数 0,1,2,0,...。

另一个，如果您需要 8 位（或 12 位）数的模 3，则将所有可能的值存储在查找表中，这将足够快。

或者有时您可以乘以 1/3 (X"5555") 而不是除以 3，然后乘以 3（这是一次加法）并减去以获得模数。这个管道非常好，但由于 X"5555" 只是 1/3 的近似值，您需要在模拟中验证它是否为每个输入提供了正确的输出。（对于 16 位输入，这不是一个大的模拟！）模 9 的扩展很容易。

编辑：

您的评论中有两点：您的另一个选择是使用 Spartan 的时钟发生器创建一个 X2 时钟（150MHz），它为每个像素提供 2 个周期。良好的流水线代码应该可以轻松满足 150 MHz。

[怎么*不*流水线！](http://vhdlguru.blogspot.co.uk/2011/01/what-is-pipelining-explanation-with.html)

```
PROCESS(Clk)
BEGIN
    if(rising_edge(Clk)) then
        for i in 0 to 2 loop
            case i is
                when 0 => temp1 <= a*data;
                when 1 => temp2 <= temp1*b;
                when 2 => result <= temp2*c;
                when others => null;
            end case;
        end loop;
    end if;
END PROCESS; 
```

首先要意识到循环和 case 语句相互抵消，所以这简化为

```
PROCESS(Clk)
BEGIN
    if rising_edge(Clk) then
        temp1 <= a*data;
        temp2 <= temp1*b;
        result <= temp2*c;
    end if;
END PROCESS; 
```

这是越野车！测试台也有问题，隐藏了问题。

在循环 1 中，显示 Data,a,b,c，并计算 temp1 = Data*a。
在循环 2 中，temp1 乘以新的 b 值，而不是正确的值！
在第 3 循环中再次相同！

由于测试台设置输入并使其保持不变，因此它不会发现问题！

```
PROCESS(Clk)
BEGIN
    if rising_edge(Clk) then
        -- cycle 1
        temp1   <= a*data;
        b_copy  <= b;
        c_copy1 <= c;
        -- cycle 2
        temp2   <= temp1*b_copy;
        c_copy2 <= c_copy1;
        -- cycle 3
        result  <= temp2*c_copy2;
    end if;
END PROCESS; 
```

我喜欢评论每个周期；我在一个周期中使用的每个术语都必须来自前一个周期，无论是通过计算还是来自副本。

至少这是可行的，但它可以减少到 2 个周期深度和更少的复制寄存器，因为在这个例子中，四个输入是独立的（我假设不需要采取措施来避免溢出）。所以：

```
PROCESS(Clk)
BEGIN
    if rising_edge(Clk) then
        -- cycle 1
        temp1   <= a * data;
        temp2   <= b * c;
        -- cycle 2
        result  <= temp1 * temp2;
    end if;
END PROCESS; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-08T13:43:13.240

这里有一些技巧：

*   流水线 - 将逻辑拆分为在多个时钟周期内运行
*   多周期路径 - 如果您不需要每个周期的答案，您可以告诉工具它可以花费更长的时间。需要注意不要告诉工具错误的事情！
*   再想一想——例如，你真的需要`x mod 3`在 very wide上做`x`，或者你可以使用不断更新的模 3 计数器吗？
*   使用更好的工具 - 我有过使用昂贵的合成器可以满足深度逻辑路径上的时序的实例，而使用供应商的合成器则不能满足相同代码的时序。

更极端的解决方案包括更换硅片，以获得更快的设备、更新的设备或更新、更快的设备。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T05:28:24.263

通常 FPGA 中的复杂数学运算是流水线的。流水线意味着您将操作划分为多个阶段。假设你有一个乘法器，它对你的时钟速度来说太长了。您将乘数分为 3 个阶段。基本上，您的乘法器由三个不同的部分（它们有自己的时钟输入）组成，一个接一个。这三个部分将小于一个部分，因此它们的延迟更小，因此您可以为它们使用更快的时钟。

这样做的一个缺点是“延迟”。您的流水线系统将提供具有延迟的输出。在上面的乘法器示例中，要获得正确的输出，您必须等到输入通过所有 3 个阶段。但这通常非常小（当然取决于您的设计）并且可以忽略。

*这是一个很好的（！）帖子：http: [//vhdlguru.blogspot.com/2011/01/what-is-pipelining-explanation-with.html](http://vhdlguru.blogspot.com/2011/01/what-is-pipelining-explanation-with.html)*编辑：请参阅 Brian 的帖子。

此外，供应商通常在其设计软件中将数学运算的优化和流水线版本作为 IP 内核提供。寻找他们。

# php - 它没有正确循环答案吗？

> ID：14765210
> 
> 赞同：0
> 
> 时间：2013-02-08T03:27:50.057
> 
> 标签：php, mysqli

我在下面有一个带有动态 where 子句的查询，它根据所选的下拉菜单输出结果。现在 where 子句可以根据所选选项正确添加和删除某些条件。

但是我有点意识到，如果我想查看所有问题，它没有很好的`QuestionId = ?`条件，但是当它假设显示每个问题的答案时，而不是像这样显示它：

```
D (this is for question 1)
B,C,E (this is for question 2) 
```

它将它们全部显示为一个答案，如下所示，这是不正确的：

```
D,B,C,E 
```

我的问题是导致这种情况的原因是查询还是循环？

var_dump($questions): 显示：

`array(1) { [39]=> array(1) { [72]=> array(1) { ["answer"]=> string(7) "B,C,D,E" } } }`

72 是 QuestionId，所以出于某种奇怪的原因，它没有解决所有问题（应该有第二个问题，即 73）

下面是代码：

```
 $selectedstudentanswerqry = "
            SELECT sa.StudentId, q.QuestionId,
            GROUP_CONCAT( DISTINCT Answer ORDER BY Answer SEPARATOR ',' ) AS Answer
            FROM Student st
            INNER JOIN Student_Answer sa ON (st.StudentId = sa.StudentId)
            INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
            INNER JOIN Answer an ON q.QuestionId = an.QuestionId
            ";

            // Initially empty
            $where = array('q.SessionId = ?');
            $parameters = array($_POST["session"]);
            $parameterTypes = 'i';

            //check if POST is empty

            // Check whether a specific student was selected
            $p_student = empty($_POST["student"])?'':$_POST["student"];

            switch($p_student){
            case 0:
                //dont' add where filters
                break;
            default:
                $where[] = 'sa.StudentId = ?';
                $parameters[] .= $_POST["student"];
                $parameterTypes .= 'i';
            }

            // Check whether a specific question was selected
            $p_question = empty($_POST["question"])?'':$_POST["question"];

            switch($p_question){
            case 0:
                //dont' add where filters
                break;
            default:
                $where[] = 'q.QuestionId = ?';
                $parameters[] .= $_POST["question"];
                $parameterTypes .= 'i';
            }

            // If we added to $where in any of the conditionals, we need a WHERE clause in
            // our query
            if(!empty($where)) {
                $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
                global $mysqli;
                $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
                // You only need to call bind_param once

                if (count($where) == 1) {
                $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0]);
            }
            else if (count($where) == 2) {
                $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
            }
            else if (count($where) == 3) {
                $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1], $parameters[2]);
            }

            }

            $selectedstudentanswerqry .= "
              GROUP BY sa.StudentId, q.QuestionId
              ORDER BY StudentAlias, q.SessionId
            ";

        // get result and assign variables (prefix with db)
        $selectedstudentanswerstmt->execute(); 
        $selectedstudentanswerstmt->bind_result($detailsStudentId,$detailsQuestionId,$detailsAnswer);   

        $selectedstudentanswerstmt->store_result();
        $selectedstudentanswernum = $selectedstudentanswerstmt->num_rows(); 

    $questions = array();

    while ($selectedstudentanswerstmt->fetch()) {

        $questions[$detailsStudentId][$detailsQuestionId] = array(

        'answer'=>$detailsAnswer,

);

}

...

<?php   

var_dump($questions);

        foreach ($questions as $studentId => $student)
{

foreach ($student as $questionId => $question) {

echo '<p><strong>Answer:</strong> ' .htmlspecialchars($question['answer']).  '</p>' . PHP_EOL;

}

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:59:55.210

看起来问题实际上是：

```
GROUP_CONCAT( DISTINCT Answer ORDER BY Answer SEPARATOR ',' ) AS Answer 
```

查询的一部分。如果没有看到实际的表结构和数据，就很难在脑海中形成正在发生的事情。“答案”可能是一个模棱两可的列，因此会导致不可预知的结果。

您可能会考虑为此编写子查询或创建视图。

```
SELECT sa.StudentID, q.QuestionId, sa.Student_Answers
FROM (
     SELECT GROUP_CONCAT(DISTINCT a.Answer SEPERATOR ',') as Question_Answers
     FROM Student_Answer a
     GROUP BY a.QuestionID
) AS sa
INNER JOIN Question q ON (sa.QuestionId = q.QuestionId) 
```

查看您的代码，似乎不需要加入学生表，因为他们的答案中已经存在 ID。尽管我确信在某些时候您会将名称与 ID 相关联。

# r - “不对称”成对距离矩阵

> ID：14765211
> 
> 赞同：6
> 
> 时间：2013-02-07T08:36:51.433
> 
> 标签：r, matrix, symmetry, traminer

假设要比较三个序列：a、b 和 c。传统上，生成的 3×3 成对距离矩阵是**对称**的，表明从 a 到 b 的距离等于从 b 到 a 的距离。

我想知道 TraMineR 是否提供了一些方法来生成**不对称**的成对距离矩阵。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T13:31:19.317

不，由于 Pat 评论中强调的原因，TraMineR 不会产生“不对称”差异。

计算序列之间的成对差异的主要兴趣在于，一旦我们有了这样的差异，我们就可以例如

*   测量序列之间的差异，确定邻域，找到中心点，......
*   运行集群算法，自组织地图，MDS，...
*   对序列进行类似方差分析的分析
*   为序列生长回归树

在这些过程中输入非对称相异矩阵很可能会产生不相关的结果。

正是由于这种对称性要求，用于计算最佳匹配距离的替代成本必须是对称的。重要的是不要将替代成本解释为从一种状态转换到另一种状态的成本，而是要了解它们的本质，即编辑成本。当比较两个序列时，例如 `aabcc`和`aadcc`，我们可以通过任意替换`b`第`d`一个序列中的 with 或`d`第二个序列中的 with 来使它们相等`b`。那么，不为这两个替换付出相同的成本是没有意义的。

希望这可以帮助。

# windows-7 - 设置路径在 Windows 7 中不起作用

> ID：14765215
> 
> 赞同：2
> 
> 时间：2013-02-08T03:28:26.493
> 
> 标签：windows-7, path

我的系统路径`D:\Program Files\Java\jdk1.7.0_05\bin`作为第一个路径组件。

我以管理员身份打开了命令提示符。

然后运行 ​​java -version

运行下`D:\Program Files\Java\jdk1.7.0_05\bin`的 java.exe 是路径中的第一个 java.exe。一切都很好。

然后我使用以下命令更改路径：

```
set PATH=D:\Program Files\Java\jdk1.7.0_01\bin;%PATH% 
```

这添加`jdk1.7.0_01\bin`为路径中的第一个组件

现在我运行 java -version

我期待它`D:\Program Files\Java\jdk1.7.0_01\bin\java.exe`能够运行，因为这是 PATH 中的第一个。但它实际上运行了`jdk1.7.0_05\bin\java.exe`，这意味着 set PATH 命令确实有任何效果。

当我做 echo`%PATH%`时，`D:\Program Files\Java\jdk1.7.0_01\bin`确实显示为路径中的第一个组件。

为什么 java.exe 没有从 jdk1.7.0_01\bin 位置运行？

我从没有以管理员身份运行的命令提示符尝试了同样的事情，并且一切都按预期工作，即在运行 set PATH 命令后，java 是从`jdk1.7.0_01\bin`.

这是否意味着以管理员身份打开命令提示符时 set PATH 不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:18:56.487

也许尝试使用[`path`](http://ss64.com/nt/path.html)

```
path D:\Program Files\Java\jdk1.7.0_01\bin;%PATH% 
```

# ruby-on-rails - Rails 中的联系表

> ID：14765216
> 
> 赞同：0
> 
> 时间：2013-02-08T03:28:29.203
> 
> 标签：ruby-on-rails, routes

这是一个非常基本的问题，但我很难将它整合到我的应用程序中。我已经查看了关于 SO 的其他类似问题，但它们都将联系页面用作单独的页面。

我有一个 Rails 应用程序的前端，它只是一个面向公众的小型网站，使用 stellar.js 进行视差滚动。

在页面的最后部分，我想要一个“联系我们”表格，但我得到了一个

```
NoMethodError in Welcome#index undefined method `model_name' for NilClass:Class 
```

以下是相关文件：

路线.rb

```
TestApp::Application.routes.draw do
   get "welcome/index"
   root :to => 'welcome#index'
   match 'contact' => 'contact#new', :as => 'contact', :via => :get
   match 'contact' => 'contact#create', :as => 'contact', :via => :post 
```

app/views/welcome/index.html.erb

```
<%= render "contact" %> 
```

页面 app/views/welcome/_contact.html.erb 的联系人部分的部分

```
 <%= form_for @message, :url => contact_path do |form| %>
  <fieldset class="fields">
     <div class="field">
        <%= form.label :name %>
        <%= form.text_field :name %>
     </div>

     <div class="field">
        <%= form.label :email %>
        <%= form.text_field :email %>
     </div>
     <div class="field">
        <%= form.label :subject %>
        <%= form.text_field :subject %>
     </div>

     <div class="field">
        <%= form.label :body %>
        <%= form.text_area :body %>
     </div>
  </fieldset>

  <fieldset class="actions">
     <%= form.submit "Send" %>
  </fieldset>
  <% end %> 
```

应用程序/控制器/contact_controller.rb

```
class ContactController < ApplicationController
   def new
      @message = Message.new
   end

   def create
      @message = Message.new(params[:message])

      if @message.valid?
         NotificationsMailer.new_message(@message).deliver
         redirect_to(root_path, :notice => "Message was successfully sent.")
      else
         flash.now.alert = "Please fill all fields."
         render :new
      end
   end
end 
```

消息.rb

```
class Message

   include ActiveModel::Validations
   include ActiveModel::Conversion
   extend ActiveModel::Naming

   attr_accessor :name, :email, :subject, :body

   validates :name, :email, :subject, :body, :presence => true
   validates :email, :format => { :with => %r{.+@.+\..+} }, :allow_blank => true

   def initialize(attributes = {})
     attributes.each do |name, value|
         send("#{name}=", value)
     end 
   end

   def persisted?
      false
   end
end 
```

问题是我需要做什么才能使此表单在welcome#index 视图中正常运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:39:06.973

您需要在需要存在`@message = Message.new`的每个操作中进行定义`@message`。

所以这意味着你需要这个`WelcomeController`：

```
def index
  @message = Message.new
end 
```

一个快捷方式是将其添加到部分的顶部，以防它未设置：

```
<% @message ||= Message.new %> 
```

（但您需要确定在您的视图中混合调用模型是否是您的风格。有些开发人员对此没有问题，有些则有。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:31:13.403

您可以更改以下内容：

在路线：

消除：

```
match 'contact' => 'contact#new', :as => 'contact', :via => :get
match 'contact' => 'contact#create', :as => 'contact', :via => :post 
```

添加：

```
resources :contact   # It will add 7 default REST routes and standard practice model name should be plural if you created your model with singular then keep it singular 
```

在`_contact.html.erb`部分`form path`需要`new_contact_path`

```
<%= form_for Message.new, :url => contact_path do |form| %> 
```

类`Message`应该继承`ActiveRecord::Base`

```
class Message < ActiveRecord::Base

end 
```

在`create`行动中，其他部分应该是：

```
if @message.valid?
     NotificationsMailer.new_message(@message).deliver
     redirect_to(root_path, :notice => "Message was successfully sent.")
else
     flash.now.alert = "Please fill all fields."
     render :template => "welcome/index"
end 
```

# php - Feedburner - 限制显示的项目？

> ID：14765221
> 
> 赞同：0
> 
> 时间：2013-02-08T03:29:14.493
> 
> 标签：php, rss, feed, yahoo-pipes, feedburner

我想通过 feedburner 放一个饲料（我不拥有）。在某个地方，我希望将其限制为例如 10 个提要项目。提要通常包含 1,000 个项目，这实在是太多了。

我考虑过雅虎！管道，这将是我最后的手段，因为雅虎管道需要一段时间才能更新新信息。（根据个人经验，页面在再次获取信息之前被缓存了一个多小时）。

如果有任何更好的方法，或者甚至是我在 feedburner 中错过的工具，可以让我做到这一点……太好了，在此先感谢。

编辑：也许我可以用 php 做点什么，拿前十个项目并重新发布自己使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:02:54.847

如果您使用 Drupal，请考虑[聚合器模块](http://www.drupalgardens.com/videos/110716 "如本视频所示")。

对于不使用 Drupal 的任何人，Yahoo! 如果您不介意更新时间，管道可能适合您。设置简单的管道非常容易。您只需要“修剪”功能。有一个饲料输入框，修剪，管道输出，和中提琴。

来自#drupal-support 的 ShawnRisk 属性

# java - 如何找到，oracle 11g 安装的端口号

> ID：14765222
> 
> 赞同：11
> 
> 时间：2013-02-08T03:29:21.067
> 
> 标签：java, oracle11g

当我尝试使用基本连接类型访问我的 oracle 实例时。它给了我一个错误，告诉我“网络采用者无法建立连接”，但我可以使用 TNS 连接连接到同一个用户。怎么了？我猜这不是我默认的 1521 端口号中的 oracle 实例。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-08T04:21:36.503

如果你知道 SID 运行 TNSPing util

```
tnsping sid 
```

它会告诉你这个信息

```
(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = Windows7)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = XE))) 
```

# ruby-on-rails - 耙子中止，在 add_index(:users, :email, {:unique=>true})

> ID：14765223
> 
> 赞同：3
> 
> 时间：2013-02-08T03:29:22.607
> 
> 标签：ruby-on-rails

我目前正在研究 michael hartl 的 ruby​​ on rails 3 教程。当我尝试调用 db:migrate 时遇到了这个问题。有人可以帮我弄清楚它为什么会中止。谢谢！

`** Invoke db:migrate (first_time) ** Invoke environment (first_time) ** Execute environment ** Invoke db:load_config (first_time) ** Execute db:load_config ** Execute db:migrate == AddEmailUniquenessIndex: migrating ======================================== -- add_index(:users, :email, {:unique=>true}) rake aborted! An error has occurred, this and all later migrations canceled: SQLite3::ConstraintException: indexed columns are not unique: CREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")`

代码

```
class AddEmailUniquenessIndex < ActiveRecord::Migration
  def up
    add_index :users, :email, :unique => true
  end

  def down
    remove_index :users, :email
  end
end 
```

用户代码

```
# == Schema Information
#
# Table name: users
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  email      :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

class User < ActiveRecord::Base
  attr_accessor :password
  attr_accessible :email, :name, :password, :password_confirmation

  email_regex = /\A[\W+\-.]+@[a-z\d\-.]+\.|[a-z]+\z/i

  validates :name, :presence => true,
                   :length => { :maximum => 50 }
  validates :email, :presence => true,
                    :format => { :with => email_regex },
                    :uniqueness => { :case_sensitive => false }
  validates :password, :presence => true,
                       :confirmation => true,
                       :length => { :within => 6..40 }

end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T03:44:44.553

您的迁移没有任何问题。该错误仅表示您在 db 中有现有的电子邮件重复数据。

检查您的用户表，为现有行设置唯一电子邮件或删除这些行。然后再次运行迁移。

更新：请注意，即使您从迁移中删除唯一约束并添加`validates_uniqueness_of :email`到您的活动模型中，问题仍然会在未来吞噬您。

根本问题是您的数据处于“不良”状态。如果您有两行具有相同的电子邮件地址（或者它们也可能都有空白电子邮件），则在为这两行添加`validates_uniqueness_of :email`模型`User`实例后将无效。所以它仍然是你必须解决的数据问题。

# c - 为什么 getchar() 在 printf 语句后读取 '\n'？

> ID：14765226
> 
> 赞同：3
> 
> 时间：2013-02-08T03:29:34.607
> 
> 标签：c, newline, printf, getchar

我提示用户输入数组的长度，用这个输入初始化一个 char[] 数组，然后提示用户输入一条消息以输入 char[] 数组。

我正在阅读用户消息的第一个字符`getchar()`。

但是，在读取任何用户输入之前读取`getchar()`换行符。`'\n'`似乎是`'\n'`从前面`printf`提示用户的语句中得到的……

下面是相关代码：

```
#include <stdio.h>

int main(void) {

    int len = 0,
        originalLen = 0;

    printf("\n\nWhat is the length of the array? ");
    scanf("%d", &originalLen);
    char str[originalLen]; // intitializing the array

    printf("Enter a message to enter into the array: ");
    char target = getchar();
    str[len] = target;

    // why is getchar() reading '\n'?
    if (target == '\n') {
        printf("\n...what happened?\n");
    }
    return 0;
} // end of main 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T03:31:08.380

*这*是因为前一个`scanf`不读取数字后的换行符。

 *这可以通过两种方式解决：

1.  使用例如`getchar`阅读它
2.  `scanf`在格式后添加一个空格（例如`scanf("%d ", ...)`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T03:33:48.557

您可以`getchar`在循环中使用以在读取下一个字符之前清除标准输入。

```
while((target = getchar()) != '\n' && target != EOF) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T03:32:05.627

当您输入数字并按 ENTER 键时，一个数字和一个字符被放置在输入缓冲区中，它们分别是：

*   输入的号码和
*   换行符 ( `\n`)。

该数字被 消耗，`scanf`但换行符保留在输入缓冲区中，由 读取`getchar()`。

您需要`\n`在调用之前`getchar()`使用：

```
scanf("%d ", &originalLen);
         ^^^ 
```

这告诉`scanf`读取数字和一个附加字符，即`\n`.*

# python - 生成器卡在列表理解内的无限循环中？

> ID：14765229
> 
> 赞同：0
> 
> 时间：2013-02-08T03:30:06.867
> 
> 标签：python, generator, list-comprehension

这工作正常：

```
>>> def my_range(stop):
    i = 0
    while i < stop:
        yield i
        i += 1

>>> [k for k in my_range(10) if k < 5]
[0, 1, 2, 3, 4] 
```

现在我修改我的生成器：

```
>>> def my_range():
    i = 0
    while True:
        yield i
        i += 1

>>> result = []
>>> for k in my_range():
    if k < 5:
        result.append(k)
    else:
        break

>>> print(result)
[0, 1, 2, 3, 4] 
```

现在，为什么会陷入无限循环？即使我有 k < 5。生成器不应该只在调用 next 时迭代吗？

```
>>> [k for k in my_range() if k < 5] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T03:33:47.510

LC 中的条件并不意味着它`break`何时返回 false；如果您想要这种行为`itertools`，请特别调查`takewhile()`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T03:39:38.150

[这个答案](https://stackoverflow.com/a/4406777/139010)很好地解释了它：

> 请记住以下几点：
> 
> ```
> [ expression for item in list if conditional ] 
> ```
> 
> 相当于：
> 
> ```
> for item in list:
>     if conditional:
>         expression 
> ```

这意味着您的列表理解：

```
[k for k in my_range() if k < 5] 
```

相当于：

```
for k in my_range():
    if k < 5:
        k 
```

现在应该清楚为什么这永远不会终止：实际上`break`无限循环没有任何意义。

# .htaccess - htaccess 中的动态 RewriteBase

> ID：14765230
> 
> 赞同：1
> 
> 时间：2013-02-08T03:30:14.403
> 
> 标签：.htaccess, mod-rewrite

我的 .htaccess 中有这个规则：

```
RewriteEngine On
RewriteBase / 
```

我想反省 HTTP_HOST，如果它以“localhost”开头，我想要：

```
RewriteBase /my-website/ 
```

我可以这样做吗？

# python - 在python中参数化测试的最简单方法？

> ID：14765235
> 
> 赞同：0
> 
> 时间：2013-02-08T03:30:54.167
> 
> 标签：python, testing, nose, pytest

我有一个库，其中包含一堆具有相似预期行为的不同对象，因此我想对它们运行类似的测试，但不一定对它们进行相同的测试。

具体来说，假设我有一些排序功能，以及检查排序功能是否实际排序的测试。某些排序功能旨在处理某些输入，但不适用于其他输入。

我想写一些接近下面代码的东西。但是，nose 不能很好地告诉我测试失败的确切位置以及输入的内容。如果 case2 上的 sort2 的 check_sort 失败，我将看不到这一点。

```
def check_sort(sortalg, vals):
     assert sortalg(vals) == sort(vals)

def test_sorts(): 
    case1 = [1,3,2]
    case2 = [2,31,1]

    check_sort(sort1, case1)

    for c in [case1, case2]: 
        check_sort(sort2, c) 
```

我希望能够简单地向 check_sort 添加一个装饰器来告诉鼻子它是一个嵌套测试。就像是

```
@nested_test
def check_sort(sortalg, vals):
     assert sortalg(vals) == sort(vals) 
```

这个想法是，当它被调用时，它会向nose注册自己，如果失败将报告它的输入。

看起来 pytest 提供了[pytest.mark.parameterized](http://pytest.org/latest/parametrize.html#parametrized-test-functions)，但这对我来说似乎很尴尬。我必须将所有参数放在函数上方的一个位置，所以我不能在测试中重复调用它。我也不认为这支持嵌套超过一层。

Nose 还提供了[测试生成器](https://nose.readthedocs.org/en/latest/#test-generators)，看起来更接近，但仍然没有我希望的那么清晰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:49:56.613

使用提供的[*生成测试*](http://blog.devork.be/2008/09/generative-tests.html)功能可能是使用nose 和py.test 执行此操作的预期方式。

也就是说，您可以在创建类后将函数（测试）动态添加到类中。这是[`Lib/test/test_decimal.py`](http://hg.python.org/cpython/file/649937bb8f1c/Lib/test/test_decimal.py#l2317)标准库中的代码使用的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-30T11:12:45.717

您可以使用[nose-ittr](https://github.com/taykey/nose-ittr)，它是一个支持参数化测试的鼻子扩展。

例子：

```
@ittr(case1=[1,3,2],case2=[2,31,1])
def test_sorts(): 

check_sort(sort1, self.case1)
check_sort(sort2, self.case2) 
```

# asp.net-mvc - 在 MVC 中使用枚举作为键创建 EF 控件

> ID：14765240
> 
> 赞同：0
> 
> 时间：2013-02-08T03:31:11.550
> 
> 标签：asp.net-mvc, entity-framework, visual-studio-2012, entity-framework-5

好的，这里有一些上下文：我正在使用 EF5、MVC4 和 SQL CE4 来构建一个 Web 应用程序。我一直在松散地遵循本[教程](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4)，但有一些不同之处。

1.  我的上下文类和 POCO 对象在它们自己的程序集中。
2.  我正在使用 SQL CE4 而不是 SQL Express Local DB
3.  我的课不像教程那么简单

我已经使用了一种[解决方法](https://stackoverflow.com/questions/12165185/mvc4-scaffolding-add-controller-gives-error-unable-to-retrieve-metadata/14576216#14576216)来让简单的类可以注册。

我曾认为 EF5[支持](http://msdn.microsoft.com/en-us/data/hh859576.aspx)在 EF5 中使用枚举，但它们可以在 Keys 中使用吗？

当我尝试为一个简单的类（1 个 int 键属性，1 个字符串属性）**添加一个控件**（添加控制器，具有读/写操作和视图的 MVC 控制器，使用实体框架）时，它可以工作。尝试添加具有作为键（主键或外键）一部分的属性的类时，出现各种错误

```
Unable to retrieve metadata for 'blah'.  Using the 
same DbCompiledModel to create contexts against different types of 
database servers is not supported. Instead, create a separate 
DbCompiledModel for each type of server being used.

Index was out of range. Must be non-negative and less than the size of
the collection.
Parameter name: index

C:\Program Files (x86)\Microsoft Visual Studio\11.0\Common7\IDE\ItemTemplates\CSharp\Web\MVC 4\
CodeTemplates\AddController\ControllerWithContext.tt(0,0) : error :
Running transformation: System.IndexOutOfRangeException: Index was outside the bounds of the
array.
---StackTrace--- 
```

我在这些类之间发现的唯一相似之处是它们有一个绑定到键的 emun。其他具有非键枚举的类正确生成。这是问题还是我完全错过了标记？

编辑：失败的类的示例

```
public class A
{
    public virtual AIdEnum Id { get; set; }
    public virtual string Name { get; set; }

    public virtual ICollection<B> Bs { get; set; }
    public virtual ICollection<C> Cs { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:31:27.317

看来我的问题是控制器创建不适用于 SQLCE 4.0 连接字符串，因此使用 System.Data.SqlClient 提供者的连接字符串处理了该问题。

我遇到的下一个问题是 connectionString 值（例如加密）没有通过这种方式得到尊重，所以我现在有 2 个不同的构造函数来解决这个错误。

```
#if DEBUG
    public Context()
        : base("name=DefaultConnection")
    { ; }
#else
    /// <summary>
    /// Default Constructor
    /// </summary>
    public Context()
        : base("name=CompactConnection")
    { ; }
#endif 
```

这是我的配置：

```
<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlCeConnectionFactory, EntityFramework">
        <parameters>
            <parameter value="System.Data.SqlServerCe.4.0" />
        </parameters>
    </defaultConnectionFactory>
</entityFramework>
<connectionStrings>
    <add name="CompactConnection" providerName="System.Data.SqlServerCe.4.0"
        connectionString="Data Source=&quot;|DataDirectory|\DB.sdf&quot;;encryption mode=platform default;password=&quot;P4$$w0rd!&quot;"/>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-MsSqlCe-20121028004432;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-MsSqlCe-20121028004432.mdf" />
</connectionStrings> 
```

当然，这只是解决更深层次问题的一种解决方法。如果其他人知道这个问题的根本原因，我很想知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:55:59.407

好的，所以我刚刚使用 SQL CE 4 快速运行了它，它似乎工作得很好：

```
public class EnumTestContext : DbContext
{
    public EnumTestContext() : base("CEDB")
    {

    }

    public DbSet<MyClass> MyClasses { get; set; }

}

public enum MyEnum
{
    EnumValue1,
    EnumValue2
}

public class MyClass
{
    [Key, Column(Order = 0)]
    public MyEnum MyEnumKey { get; set; }

    [Key, Column(Order = 1)]
    public int MyIntKey { get; set; }

    [Column(Order = 2)]
    public string Name { get; set; }

} 
```

然后我添加一个这样的实体：

```
using (var context = new EnumTestContext())
{
    context.MyClasses.Add(new MyClass()
        {
        MyEnumKey = MyEnum.EnumValue1,
        MyIntKey = 22,
        Name = "Hello World"
        });
    context.SaveChanges();
} 
```

这对我来说一切正常 - 这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T18:01:35.537

你需要把这一行：

Database.DefaultConnectionFactory = new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0");

在 DbContext 生命周期开始之前。

可以[在 MSDN Gallery中下载的示例](http://code.msdn.microsoft.com/Using-SqlServer-Compact-a476bf83)

# c++ - C 中的复杂符号

> ID：14765242
> 
> 赞同：-1
> 
> 时间：2013-02-08T03:31:16.613
> 
> 标签：c++, c

这些符号指的是什么？我在声明什么？我很难确定要声明的内容

```
1 - double (*b)[n];  
2 - double (*c[n])();  
3 - double (*d())[n]; 
```

我什至无法理解这个

```
double (*foo(double (*) (double, double[]),double)) (double, ...); 
```

总的来说，如果有任何逻辑或一步一步的我可以用于几乎所有（或最好是所有）情况，那真的很高兴知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T03:37:46.020

```
double (*b)[n]; 
```

这是一个名为的指针`b`，它指向一个`double`长度为 s的数组`n`。

```
double (*c[n])(); 
```

`c`这是一个以指向函数的指针命名的数组，`n`这些函数接受未指定的参数（在 C 中）或没有参数（在 C++ 中）并返回`double`s。

```
double (*d())[n]; 
```

这是一个名为`d`返回指向 s 数组的指针的函数`n` `double`。

希望这可以帮助！

# c++ - 考虑负数的模数

> ID：14765243
> 
> 赞同：0
> 
> 时间：2013-02-08T03:31:35.290
> 
> 标签：c++

我正在尝试为模数编写代码，但是当我为负数编写代码时，我没有得到正确的结果，我的代码：

```
double mod (double X, double Y)
{
    double result = X;
    if (X>0){
    do
    {
      result =  result - Y;
    }while(result >= Y);
    }

    if (X<0){
    do
    {
      result =  result + Y;
        }while(0 >= result);
    }
} 
```

当您执行 mod(-5,2) 之类的操作时，它应该返回 -1 但它返回 1，为什么它不能大于 0 时返回 1？

在我看来，我认为它的工作方式类似于 -5 + 2 = -3 + 2 = -1。对于正数，它将是 5 - 2 = 3 - 2 = 1。

谢谢。

编辑：我正在尝试使用我自己的数学库而不使用 CMATH 来做到这一点。

编辑：我的返回结果在程序的后面部分并显示输出。这只是整个程序本身的一个块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:35:27.847

你不见了

```
return result; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T03:36:11.623

仅检查这部分代码：

```
if (X<0){
    do
    {
      result =  result + Y;
    }while(0 >= result);
} 
```

假设 X 为 -5，`result`为 0。

`do`循环将被执行：

```
1\. pass - result = -3
2\. pass - result = -1 
3\. pass - result = -1 + 2 = 1 
```

`3\. pass`将被执行，因为结果 from`2\. pass`仍然小于零。

您需要将循环条件更改为`while(0 >= result + Y)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T03:46:44.973

考虑整数序列

```
-7 -6 -5 -4 -3 -2 -1 0 1 2 3 4 5 6 7 
```

取时，`mod(5,2)`我们取 2 的倍数小于或等于 5，然后返回与 5 的差值。即这里`1 (5-4)`

对于根据这个概念的负数

为`mod(-5, 2)`. 小于 -5 且可被 2 整除的数字是 -6（不是 -4；-4 > -5）。它的区别是`(-5 - -6)`是`1`。这就是您的代码中发生的事情

# python - 如何定义 int 和 defaultdict 列表

> ID：14765250
> 
> 赞同：0
> 
> 时间：2013-02-08T03:32:28.587
> 
> 标签：python, list, dictionary, function

我想在 python 中定义一个整数和 defaultdict 的列表。我正在创建一个父字典，它将返回上面的列表。

我无法定义列表类型。

```
def index_struct():return defaultdict(list_struct)
def list_struct(): return list(int,post_struct)
def post_struct(): return defaultdict(list) 
```

当前出现错误，因为列表不能接受两个参数..

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:43:05.967

你说得对，*list()*只接受一个论点。请改用方括号表示法。另请注意，`[int, post_struct]`这不起作用，因为没有调用这两个构造函数。您需要通过添加括号手动调用构造函数：

```
from collections import defaultdict

def index_struct():return defaultdict(list_struct)
def list_struct(): return [int(), post_struct()]
def post_struct(): return defaultdict(list)

>>> d = index_struct()
>>> d['somekey'][0] = 5
>>> d['somekey'][1]['anotherkey'] = 6
>>> d
defaultdict(<function list_struct at 0x10252ff50>, {'somekey': [5, defaultdict(<type 'list'>, {'anotherkey': 6})]}) 
```

# javascript - 需要帮助从网站修改 javascript

> ID：14765256
> 
> 赞同：1
> 
> 时间：2013-02-08T03:33:02.297
> 
> 标签：javascript, html, templates

我下载了一个 html5 模板并尝试对其进行自定义，但我无法理解。我想要的网站很简单。您可以在此处查看演示： [演示网站](http://demo.html5xcss3.com/demo.php?cat=html5themes&host=templatesmonster&temp=hathayoga)

正如您在单击菜单时所看到的那样，右侧会出现滑入式内容。所以有两件事我希望我能得到建议：

1.) 我想修改此内容的宽度和高度，但不知道该怎么做。

这是我认为对此负责的javascript：

```
$(window).load(function() { 
var act='';

$('#content > ul > li').css({position:'absolute', display:'none'});
$('#content > ul > li').find('.box1').css({height:'0'})

$('#menu > li > a span').css({opacity:'0'})

$('#menu > li > a').hover(function(){
    $(this).find(' > span').stop().animate({opacity:'1'},600);                         
}, function(){
    if (!$(this).hasClass('active')) {
        $(this).find(' > span').stop().animate({opacity:'0'},600);                         
    }
})

$('#menu > li').each(function(num){
    $(this).data({num:num})
})
if (location.hash.slice(0,3)=='#!/') {
    page=location.hash.slice(3);
    open_page('#'+page);
}
if ((location.hash=='#')||(location.hash=='')) {
    open_page('');
}
$('#menu a').click(function(){
    $('#menu a').removeClass('active').find(' > span').stop().animate({opacity:'0'},600);
    Cufon.replace('#menu a', { fontFamily: 'Questrial', hover:true });
    $(this).addClass('active').find(' > span').stop().animate({opacity:'1'},600);   
})
$('a').click(function(){
    if ($(this).attr('href').slice(0,3)=='#!/') {
        page=$(this).attr('href').slice(3); 
        open_page('#'+page);
        return false;
    }
    if ($(this).attr('data-type')=='close') {
        close_page()    
    }
})
function open_page(page){
    location.hash='#!/'+page.slice(1);
    if (act!='') {
        $(act).find('.box1').stop().animate({height:'0'},700,'easeOutCirc', function(){
            $(act).css({display:'none'});
            $(page).css({display:'block'}).find('.box1').stop().animate({height:'100%'},700, 'easeOutCirc', function(){
                act=page;           
            }); 
        })
    } else {
        $(page).css({display:'block'}).find('.box1').stop().animate({height:'100%'},700, 'easeOutCirc', function(){
            act=page;           
        });     
    }
}
function close_page(page){
    $('#menu a').removeClass('active').find(' > span').stop().animate({opacity:'0'},600);
    Cufon.replace('#menu a', { fontFamily: 'Questrial', hover:true });
    location.hash='#';
    $(act).find('.box1').stop().animate({height:'0'},700,'easeOutCirc', function(){
        $(act).css({display:'none'});
        act='';
    }); 
    return false;
} 
```

})

2.）我想在该滑入式内容空间中打开另一个页面（未托管在同一服务器上），例如 jquery 弹出窗口，但嵌入在该滑入式窗口中。目前，所有内容都写在 index.html 中

我应该用 iframe 这样做吗？我还没有尝试过，因为我需要先弄清楚第 1 步。

像这样：

```
<li id="page_Teachers">
                    <div class="box1">
                        <div class="inner">
                            <a href="#" class="close" data-type="close"><span></span></a>
                            <div class="wrapper">
                                <h2>Our Staff</h2>
                                <div class="wrapper pad_bot2">
                                    <figure class="left marg_right1"><img src="images/page2_img1.jpg" alt=""></figure>
                                    <p class="pad_bot2"><strong>Helen Williams</strong></p>
                                    <p class="pad_bot1">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor inciddunt ut labore et dolore magna aliqua nostrud exercitation.</p>
                                    <p class="pad_bot2"><a href="#!/page_More" class="link1">Read More</a></p>
                                </div>
                                <div class="wrapper pad_bot2">
                                    <figure class="left marg_right1"><img src="images/page2_img2.jpg" alt=""></figure>
                                    <p class="pad_bot2"><strong>Jessy Hamper</strong></p>
                                    <p class="pad_bot1">Ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolorreprehenderit in voluptate velit esse cillum dolore.</p>
                                    <p class="pad_bot2"><a href="#!/page_More" class="link1">Read More</a></p>
                                </div>
                                <div class="wrapper pad_bot2">
                                    <figure class="left marg_right1"><img src="images/page2_img3.jpg" alt=""></figure>
                                    <p class="pad_bot2"><strong>Chester Hamper</strong></p>
                                    <p class="pad_bot1">Cupidatat non proident sunt culpa officia deserunt mollit anim idst laborum. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.</p>
                                    <p class="pad_bot2"><a href="#!/page_More" class="link1">Read More</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:39:28.723

您还需要考虑您的 CSS。也许从玩你的 css 值开始，例如：

```
.main { width: 980; }
#content { width: xxx } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:44:20.387

这些容器的 CSS`id`选择器是：

`page_about, page_teachers, page_schedule, page_prices, page_more`. 如此处所示：

```
<li id="page_About" style="position: absolute; display: block;height: 400px;width: 600px;">
<li id="page_Teachers" style="position: absolute; display: none;">
<li id="page_Schedule" style="position: absolute; display: none;">
... 
```

所以，你需要添加一些 CSS`width`和`height`它们。例如：

```
#page_about, #page_teachers, #page_schedules, #page_prices, #page_more {
    height: 200px;
    width: 300px;
} 
```

# java - 找不到 appengine 1.7.4 sdk 和 com.google.appengine.datanucleus.DatastoreManager

> ID：14765259
> 
> 赞同：0
> 
> 时间：2013-02-08T03:33:46.943
> 
> 标签：java, google-app-engine, datanucleus

我已经升级到 appengine 1.7.4，现在有些东西坏了。

部署到本地开发时，appengine 出现以下错误。

```
Class "com.google.appengine.datanucleus.DatastoreManager" was not found in the C
LASSPATH. Please check your specification and your CLASSPATH.
org.datanucleus.exceptions.ClassNotResolvedException: Class "com.google.appengin
e.datanucleus.DatastoreManager" was not found in the CLASSPATH. Please check you
r specification and your CLASSPATH. 
```

这不是 java.lang.ClassNotFoundException 而是 org.datanucleus.exceptions.ClassNotResolvedException

我的库是

```
appengine-api-1.0-sdk-1.7.4  
appengine-api-labs-1.7.4  
datanucleus-api-jdo-3.2.0-m3  
datanucleus-api-jpa-3.2.0-m3  
datanucleus-appengine-2.1.1  
datanucleus-core-3.2.0-m3  
datanucleus-enhancer-3.1.1 
```

它是使用 Maven 构建的。

DataNucleus App Engine 插件兼容性 [http://code.google.com/p/datanucleus-appengine/wiki/Compatibility](http://code.google.com/p/datanucleus-appengine/wiki/Compatibility) 状态

```
3.0:
Requires DataNucleus 3.2+ (core, api-jdo, api-jpa).
Requires SDK 1.7.0+ 
```

datanucleus-appengine-2.1.1 pom 依赖于

```
org.datanucleus datanucleus-api-jdo [3.1.1, 3.2)  
org.datanucleus datanucleus-api-jpa [3.1.1, 3.2)  
org.datanucleus datanucleus-core    [3.1.1, 3.2)  
org.datanucleus datanucleus-enhancer    [3.1.0-release, ) 
```

库的版本有问题，但我无法确定。
DN 插件和 sdk 1.7.4 的正确依赖关系是什么？

-lp

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:39:49.467

为什么在 CLASSPATH 中有“datanucleus-api-jdo”和“datanucleus-api-jpa”？确定您正在使用的 API 并使用该 API。其他依赖项在哪里？持久性 api.jar 的 jdo-api.jar ？

除非您使用 datanucleus-appengine 插件的 SVN 主干，否则您不能使用 DataNUcleus 3.2，如[http://code.google.com/p/datanucleus-appengine/wiki/Compatibility上清楚显示](http://code.google.com/p/datanucleus-appengine/wiki/Compatibility)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:13:57.140

好的，问题是插件 2.1.1 依赖于 DN 3.2x。正如@datanucleus 提到的那样，这是不正确的，它应该限制在 DN 3.1.1 以内。

通过手动将插件的依赖项设置为 DN 3.1.1。现在一切正常。

谢谢@Datanucleus

# java - Java - 比较值的数组

> ID：14765263
> 
> 赞同：1
> 
> 时间：2013-02-08T03:34:00.877
> 
> 标签：java, arrays, compare

```
String isoArray[] = {"020","784","004","028"};

if(!("020".equals(element[2]) || "784".equals(element[2]) || "004".equals(element[2]) || "028".equals(element[2]))){
            country a = new country(element[4], element[5], element[7]);
            countries.add(a);
} 
```

有没有更简单的方法来比较这些字符串而不使用循环？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T03:39:04.057

试试下面的代码。

```
if (Arrays.asList(isoArray).contains("YOUR_STRING")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:39:18.917

如果您使用的是 Java 7，那么您也可以在 String 常量上使用 switch-case。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:40:45.553

在不了解问题的背景的情况下，很难给出答案。

比较/搜索/组织数组最流行的方法（也是广泛教授的方法）是循环。一种这样的解决方案是冒泡排序算法类型循环。

```
for(int x = 0; x < array1.size(); x++){
   for(int y = 0; y < array2.size(); y++){
       if(array1[x].compare(array2[y]==0)
           Then they are equal 
       else
           They are not equal
    }
} 
```

这是迄今为止对多个数组进行简单操作的最快方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T04:14:13.523

看起来您要使用的类型是 Set

```
Set<String> mySet = new HashSet<String>();
mySet.add("020");
mySet.add("784");
mySet.add("004");
mySet.add("028");

if(!mySet.contains(element[2])){
    country a = new country(element[4], element[5], element[7]);
    countries.add(a);
} 
```

*   `HashSet`将使用散列来查找值。
*   `TreeSet`将进行二叉树搜索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T04:16:09.707

我的朋友，从您的示例来看，您似乎正在尝试查看是否`element[2]`包含在值数组中。正如@Real 所说，您可以将数组转换为列表，以便您可以使用列表的`contains`谓词。你猜怎么着？`contains`谓词只是一个循环。

我鄙视像这样包含无偿多次转换的代码。它会产生垃圾。这是今天运行良好的代码，因为您的数据规模很大`N`，并且五年后当您的公司上市并且数据现在规模很大时就会消失`100000 * N`。不要和它一起死。

所以选择是显而易见的。您可以使用`ArrayList`一次转换来从一开始就保存您的数组：

```
ArrayList<String> isoArray = Arrays.asList(new String [] {"020", "784", "004", "028"});

...

    if (!isoArray.contains(element[2])) {
        country a = new country(element[4], element[5], element[7]);
        countries.add(a);
    } 
```

或者您可以实现自己的 contains 方法，该方法适用于裸数组：

```
static public boolean contains(Object [] a, Object item) {
    for (Object aItem : a) if (item.equals(aItem)) return true;
    return false;
} 
```

您需要将这样的实用程序函数合并到一个名为 (tada!) 的类（主要是静态函数）`Utility`中。顺便说一句，这就是为什么上帝给了我们循环和函数。现在，

```
String isoArray[] = {"020", "784", "004", "028"};

...

    if (!contains(isoArray, element[2])) {
        country a = new country(element[4], element[5], element[7]);
        countries.add(a);
    } 
```

世界上一切都好……

如果您可以按排序顺序排列值表，还有另一种方法：使用`Arrays`二进制搜索例程。

```
String isoArray[] = {"004", "020", "028", "784"};

...

    if (Arrays.binarySearch(isoArray, element[2]) >= 0) {
        country a = new country(element[4], element[5], element[7]);
        countries.add(a);
    } 
```

# mysql - 如何在 mySQL 中使用 SELECT 将不可转换的字符删除为 ascii

> ID：14765269
> 
> 赞同：2
> 
> 时间：2013-02-08T03:34:50.033
> 
> 标签：mysql

我在我的语句中使用了一个`CONVERT`函数`SELECT` 来避免 utf8 错误，但是 MySQL 留下了问号。有没有办法将不可转换的字符转换为空白或空格字符？

```
SELECT  MeetId,
        ResId,
        Special,
        CONVERT(proposal USING ascii) as Proposal,
        Analysis,
        Vote,
        Vote_for,
        Oppose,
        Discret,
        Abstain,
        gpVote %s
        FROM RESO
        WHERE RESO.MeetId = %s 
```

例如，一个典型的结果可能在一个字段中有这个：`'The current issue ?A? is on the table '`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T03:39:47.777

只是使用怎么样`REPLACE`：

```
SELECT  
  REPLACE(CONVERT('§123' USING ascii), '?', '') 
```

还有[小提琴](http://sqlfiddle.com/#!2/d41d8/7119)。

祝你好运。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-04-23T07:07:56.037

请注意，sgeddes 解决方案还会从您的字符串中删除所有问号（如果存在）！

例如 ：

```
SELECT REPLACE(CONVERT('§How are you?' USING ascii), '?', '') 
```

输出将是：`How are you`

# html - 使用 CSS 将网页与文字处理器匹配

> ID：14765271
> 
> 赞同：0
> 
> 时间：2013-02-08T03:34:53.457
> 
> 标签：html, css, margins

我正在尝试将网页的尺寸、边距、文本大小、行高等与文字处理器（在本例中为 OpenOffice）的尺寸、边距、文本大小、行高等相匹配，以便在您打印网页或制作 PDF 时它看起来和文档一模一样。

到目前为止，我已经将高度和宽度设置为 11 英寸/8.5 英寸，每个边距设置为 0.79 英寸，字体与文档大小相同。（也就是说，如果文档使用 pt。）

那怎么只占了一半呢？？

该站点是为打印/PDF 制作的，因此它不必使用灵活的值。

谢谢！

这是一个示例文档的链接，我很快就会有一些代码 [http://i.stack.imgur.com/l2Dl1.png](http://i.stack.imgur.com/l2Dl1.png)

```
/*The rules go here*/
            #page-container {
                background: blue;
margin: 0.79in 0.79in 0.79in 0.79;
                width: 7.5in;
                height: 11in;
            }
            .name {
                font-size:22pt;
                font-weight:bold;
            }
            .sections {
                margin: 10px 0 0 0;
                font-weight:bold;
                text-decoration:underline;
                clear:right;
            }
            .jobtitles {
                font-weight:bold;
            }
            .leftside {
                float:left;
            }
            .rightside {
                float:right;
                width:50%;
            }
            .years {
                float: right;
                font-weight:bold;
                padding-right: 1%;
            }
            .desc {
                width: 760px;
            }
            ul {
                list-style-type: none;
                padding:0;
                margin:0;
            }
            #footer {
                text-align: center;
                font-weight: bold;
            } 
```

它的蓝色的唯一原因是我可以看到容器。

# database - 选择多行，其中日期大于前一行的 X 分钟

> ID：14765276
> 
> 赞同：2
> 
> 时间：2013-02-08T03:36:00.060
> 
> 标签：database, sql-server-2008, tsql, datetime, select

我需要`SELECT`表中的所有行，其中所选行比先前选择的行的日期时间大给定的恒定分钟数。一个例子可能最能说明问题。

下面代表数据表——我们称之为myTable。

```
guid     fkGuid   myDate
-------  -------  ---------------------
1        100      2013-01-10 11:00:00.0
2        100      2013-01-10 11:05:00.0
3        100      2013-01-10 11:10:00.0
4        100      2013-01-10 11:15:00.0
5        100      2013-01-10 11:20:00.0
6        100      2013-01-10 11:25:00.0
7        100      2013-01-10 11:30:00.0
8        100      2013-01-10 11:35:00.0
9        100      2013-01-10 11:40:00.0
10       100      2013-01-10 11:50:00.0
11       100      2013-01-10 11:55:00.0 
```

我想要做的是提供一个恒定的增量（比如 10 分钟），并从第一行取回所有与前一行相差 10 分钟或更长时间的行。因此，10 分钟后，结果集应如下所示：

```
guid     myDate
-------  ---------------------
1        2013-01-10 11:00:00.0
3        2013-01-10 11:10:00.0
5        2013-01-10 11:20:00.0
7        2013-01-10 11:30:00.0
9        2013-01-10 11:40:00.0
11       2013-01-10 11:55:00.0 
```

常量作为变量传入，所以它可以是任何东西。假设是 23 分钟，那么结果集应该如下所示：

```
guid     myDate
-------  ---------------------
1        2013-01-10 11:00:00.0
6        2013-01-10 11:25:00.0
10       2013-01-10 11:50:00.0 
```

最后一个示例显示我从第 0 行的时间 (11:00:00) 开始添加 23 分钟并获得下一个 >= 行，即 11:25:00，将 23 分钟添加到新行的时间，然后获得下一个 ( 11:50:00）等等。

我曾尝试使用 CTE 执行此操作，但尽管我可以很容易地找回所有时间或没有时间，但我似乎无法弄清楚如何获得我需要的行。我当前的测试代码使用 23 分钟硬编码到 WHERE 子句中：

```
WITH myCTE AS
(
    SELECT guid,
           myDate,
           ROW_NUMBER() OVER (PARTITION BY guid ORDER BY myDate ASC) AS rowNum
    FROM myTable
    WHERE fkGuid = 100
)

SELECT currentRow.guid, currentRow.myDate
FROM myCTE AS currentRow
LEFT OUTER JOIN
    myCTE AS previousRow
    ON currentRow.guid = previousRow.guid
    AND currentRow.rowNum = previousRow.rowNum + 1
WHERE
    currentRow.myDate > DATEADD(minute, 23, previousRow.myDate)
ORDER BY
    currentRow.myDate ASC 
```

这不返回任何内容。如果我省略该`WHERE`子句，我会返回所有行（显然是因为我没有过滤）。

我错过了什么？

任何和所有的帮助都将非常感激，因为它总是如此！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:06:12.553

@gilly3，几乎没有 SQL 巫术

```
WITH CTE
AS
(
  SELECT TOP 1
         guid 
        ,fkGuid
        ,myDate
        ,ROW_NUMBER() OVER (ORDER BY myDate) RowNum
  FROM MyTable
  UNION ALL
  SELECT mt.guid
        ,mt.fkGuid
        ,mt.myDate
        ,ROW_NUMBER() OVER (ORDER BY mt.myDate)
  FROM  MyTable mt
        INNER JOIN
        CTE ON mt.myDate>=DATEADD(minute,23,CTE.myDate)
  WHERE RowNum=1
)
SELECT guid
       ,fkGuid
       ,myDate
FROM   CTE
WHERE  RowNum=1 
```

SQL Fiddle 在[这里](http://sqlfiddle.com/#!3/fe632/8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:52:35.727

`where`首先，无论子句如何，您的联接都不会返回任何行。Guid 和 rowNum 都是每行的唯一键，因此如果 guid 相同，则 rowNum 也相同。`previousRow`您可以通过将字段 from 添加到您的选择列表并在没有该`where`子句的情况下运行您的查询来看到连接总是失败。

接下来，加入`rowNum + 1`防止跳过行。您将只选择满足日期过滤器的相邻行。

可能有一些带有递归查询的 SQL 巫术可以使这项工作发挥作用，但会对性能造成巨大影响。过滤应用程序代码中的数据。例如，在 C# 中：

```
List<DataRow> FilterByInterval(IEnumerable<DataRow> rows, string dateColumn, int minutes)
{
    List<DataRow> filteredRows = new List<DataRow>();
    DateTime lastDate = DateTime.MinValue;
    foreach (DataRow row in rows)
    {
        DateTime dt = row.Field<DateTime>(dateColumn);
        TimeSpan diff = dt - lastDate;
        if (diff.TotalMinutes >= minutes)
        {
            filteredRows.Add(row);
            lastDate = dt;
        }
    }
    return rows;
} 
```

# python - 关于python循环的基本查询

> ID：14765284
> 
> 赞同：0
> 
> 时间：2013-02-08T03:37:21.767
> 
> 标签：python, python-3.x

所以，我有这个代码片段：

```
import sys

while True:
  print("Make sure the number of digits are exactly 12 : ")
  x = input()
  if str(x) == 12:
      break

  code = []

  for i in range(12):
      code[i] = int(x[i]) 
```

如果未输入 12 位数字，我希望程序重复这些行，“确保 .... 12 :”。之后，我将它们复制到一个数组中，以访问其中的每个单独元素，以进行非常基本的算术计算。我是否朝着正确的方向前进？我对 python 完全陌生，我该如何解决这个问题？上面的代码显示以下错误。

```
Traceback (most recent call last):
  File "C:\Users\Arjo\Desktop\hw2a.py", line 14, in <module>
    code[i] = int(x[i])
IndexError: list assignment index out of range 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T03:41:25.817

您不是用 来创建输入数组`x`，而是每次都覆盖它。你的比较也是错误的；你不想看到字符串`x` *是*12，但它的长度是 12：

```
x = []
while True:
  print("Make sure the number of digits are exactly 12 : ")
  x.append(input())
  if len(x) == 12:
      break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:56:23.893

`IndexError: list assignment index out of range`发生是因为您有一个空列表并尝试*更新*第一个元素。由于列表为空，因此没有第一个元素，因此引发了异常。

解决此问题的一种方法是使用`code.append(x[i])`，但在这种情况下有一种更简单的方法。默认`list`构造函数将完全按照您的意愿行事

我想你可能想要这样的东西

```
while True:
  print("Make sure the number of digits are exactly 12 : ")
  x = input()
  if len(x) != 12:   # if the length is not 12
      continue       # ask again

  code = list(x) 
```

这将继续要求更多输入，直到输入正好 12 个字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:42:06.090

不，这看起来行不通...尝试更改此：

```
if str(x) == 12:
      break 
```

进入这个：

```
if len(str(x)) == 12: 
    break 
```

希望有帮助...

# php - $modx->query 似乎没有执行

> ID：14765285
> 
> 赞同：2
> 
> 时间：2013-02-08T03:37:22.507
> 
> 标签：php, mysql, pdo, modx, modx-revolution

根据此处的文档：[http ://rtfm.modx.com/display/xPDO20/xPDO.query](http://rtfm.modx.com/display/xPDO20/xPDO.query)

其中显示以下示例：

```
$result = $modx->query("SELECT * FROM modx_users WHERE id=1");
if (!is_object($result)) {
   return 'No result!';
} 
```

我会假设这个陈述会起作用：

```
$checkUnique = $modx->query("SELECT * FROM my_table_name WHERE guid = '$unique' AND used = 0");

//guid already used, or non-existant
if(!is_object($checkUnique)){
  $result = array(
    "result" => false
  );
  return json_encode($result);
} 
```

当我执行`var_dump`(of `$checkUnique`) 时，我得到以下结果：

```
object(PDOStatement)#22 (1) { ["queryString"]=> string(70) "SELECT * FROM my_table_name WHERE guid='5114722f24870' AND used=0"} 
```

我知道该`used`列已设置为`1`，但它永远不会触发我的`if`阻止。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:03:22.697

看来 MODx doco 可以使用一些帮助。我只是在本地尝试过，一个空的结果集仍然返回一个`PDOStatement`对象。

您可以尝试使用[`PDOStatement::rowCount()`](http://us1.php.net/manual/en/pdostatement.rowcount.php)来检查返回的行数

```
$count = $checkUnique->rowCount(); 
```

或像这样更改您的查询

```
$check = $modx->query("SELECT COUNT(1) FROM my_table_name WHERE guid = '$unique' AND used = 0");
$count = $check->fetchColumn();
if (!$count) {
    // etc 
```

我在 MODx 文档中提出了一个错误 - [http://tracker.modx.com/issues/9502](http://tracker.modx.com/issues/9502)

# android - Android - OnObbStateChangeListener.MOUNTED 为真，但 isObbMounted() 为假，有什么问题？

> ID：14765294
> 
> 赞同：4
> 
> 时间：2013-02-08T03:38:37.090
> 
> 标签：android, storage, mount

我在“/sdcard/Android/obb/com.example.obbtest/vid-exp1.obb”下有一个扩展文件。它包含一个 MP4 文件，我想挂载 .obb 来读取该文件。

这就是我正在做的安装它：

```
String obbDir = "/sdcard/Android/obb/com.example.obbtest/vid-exp1.obb"; 
```

.

```
StorageManager storage = (StorageManager) getApplicationContext().getSystemService(STORAGE_SERVICE);
storage.mountObb(obbDir, null, listener); 
```

这是监听器代码：

```
OnObbStateChangeListener listener = new OnObbStateChangeListener() {
        @Override
            public void onObbStateChange(String path, int state) {
                if (state == OnObbStateChangeListener.MOUNTED) {
                    toastString("Mounted! According to the listener");
                    //Test it with the isObbMounted()
                    if (storage.isObbMounted(obbDir)) {
                        toastString("Efectively mounted!");
                    } else {
                        toastString("Not really :(");
                    }
                    toastString(storage.getMountedObbPath(obbDir));
                } else {
                    tuestameString("NOT mounted according to the listener");
                } 
            }
        }; 
```

不幸的是，我得到的输出是一个吐司，上面写着“已安装！根据听众”，然后是“不是真的:(”。我设计了这个测试，因为当我尝试 getMountedObbPath(obbDir) 时，我得到一个空字符串而不是路径。我已确保 .obb 文件存在以及所有这些，没有它或没有正确的加密密钥，我不会得到“已安装！...”。

我不明白为什么 OnObbStateChangeListener.MOUNTED 是真的，但 isObbMounted(obbDir) 是假的。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T13:47:15.953

在三星设备上遇到此问题。当`/mnt/sdcard/`不是目录而是指向另一个目录的符号链接（在我的情况下是`/storage/sdcard0`）时，就会发生这种情况。

在这种情况下`StorageManager`，不使用您指定的 obb 的路径，而是使用已解析符号链接的路径：`isObbMounted("/mnt/sdcard/my.obb")`返回`false`和`isObbMounted("/storage/sdcard0/my.obb")`is `true`。

要访问挂载的 obb，您不能使用路径 obbDir，而应使用`onObbStateChange()`第一个参数中传递给的路径：`isObbMounted(path)`.

# java - 尝试创建一个数组数组

> ID：14765295
> 
> 赞同：1
> 
> 时间：2013-02-08T03:38:49.987
> 
> 标签：java, arrays

我正在做一个学校项目，该项目要求我为 10 个 n 值排序 50 组 n 大小的整数。我已经解决了所有排序方法，但我不知道如何打包这些怪物数组以便将它们循环通过排序。

我最初的想法是二维数组。我试图远离 ArrayList，因为我不想处理向下转换整数的头痛。所以我的问题是，有没有办法做类似的事情：

```
private array[] fullList; //this is where I would store my 2-dimensional arrays
private int[n][50] sets; //this is where I would have my 50 sets of n length 
```

想法？

好的，因为我想不出把它放在评论中，这就是我想出的：

```
 public BenchmarkSorts(int[] sizes) {
        for (int i=0; i < sizes.length; i++){
           set = int[(sizes[i])][50]
              for (int row=0; row < sizes[i]; j++)
                 for (int column=0; column < 50; column++)
                    set[row][column] = rdm.nextInt();    
        fullList.add(i, set);
        } 
```

我希望我可以使用 ArrayList 排序，但它是一个算法设计类，我必须努力做到这一点。

但是，现在它不会让我`sizes[i]`在第二行中使用来初始化数组的值`set`......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:52:14.183

`Arrays.sort(`您可以使用)对 int 数组进行排序
`ArrayList`更方便。但它至少需要 4 倍的内存，但这仅在您的数组很大时才重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:48:40.013

ArrayList 会是更好的选择。您可以创建整数的通用数组列表，这应该可以完成这项工作。

# c - C语言中的精确计时

> ID：14765301
> 
> 赞同：10
> 
> 时间：2013-02-08T03:39:09.990
> 
> 标签：c, linux, time

我在下面有一个小代码。我使用此代码`unsigned output[38]`从嵌入式板的 GPIO 输出一些 1 和 0 ( )。

我的问题：两个输出值（1、0 或 0、1）之间的时间应该是**416 微秒**`clock_nanosleep`，正如我在下面的代码中定义的那样，我还使用`sched_priority()`了更好的时间分辨率。但是，示波器（下图）测量显示两个输出值之间的时间为**770 微秒**。我想知道为什么我的信号之间有这么多的不准确？

PS。该板（beagleboard）具有 Linux 3.2.0-23-omap #36-Ubuntu Tue Apr 10 20:24:21 UTC 2012 armv7l armv7l armv7l GNU/Linux 内核，它具有 750 MHz CPU，`top`几乎没有 CPU（~1 %) 和内存(~0.5%) 在我运行我的代码之前被消耗。我使用没有校准问题的电子示波器。

```
#include <stdio.h>
#include <stdlib.h> //exit();
#include <sched.h>
#include <time.h>

void msg_send();
struct sched_param sp;

int main(void){
      sp.sched_priority = sched_get_priority_max(SCHED_FIFO);
      sched_setscheduler(0, SCHED_FIFO, &sp);
      msg_send();
    return 0;
}

void msg_send(){
    unsigned output[38] = {0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,1}; 

    FILE *fp8;
    if ((fp8 = fopen("/sys/class/gpio/export", "w")) == NULL){  //echo 139 > export
           fprintf(stderr,"Cannot open export file: line844.\n"); fclose(fp8);exit(1);
    }
    fprintf(fp8, "%d", 139);  //pin 3
    fclose(fp8);

    if ((fp8 = fopen("/sys/class/gpio/gpio139/direction", "rb+")) == NULL){
       fprintf(stderr,"Cannot open direction file - GPIO139 - line851.\n");fclose(fp8); exit(1);
    }
    fprintf(fp8, "out");
    fclose(fp8);

   if((fp8 = fopen("/sys/class/gpio/gpio139/value", "w")) == NULL) {
        fprintf(stderr,"error in openning value\n");  fclose(fp8); exit(1);
}

struct timespec req = { .tv_sec=0, .tv_nsec = 416000 }; //416 usec

/* here is the part that my question focus*/
    while(1){
        for(i=0;i<38;i++){
        rewind(fp8);
        fprintf(fp8, "%d", output[i]);
        clock_nanosleep(CLOCK_MONOTONIC ,0, &req, NULL);

        }
    }
} 
```

![在此处输入图像描述](../Images/0ae7f96a05e24657b5ac0ec882d498c0.png)

**编辑：**我几天来一直在阅读 clock_nanosleep() 或其他 nanosleep、usleep 等不能保证准时醒来。他们通常会在定义的时间内让代码休眠，但唤醒进程取决于 CPU。我发现绝对时间提供了更好的分辨率（`TIMER_ABSTIME`标志）。我找到了与 Maxime 建议的相同的解决方案。但是，当 for 循环完成时，我的信号出现故障。在我看来，在嵌入式平台上创建 PWM 或数据输出对任何睡眠功能都不好。花一些时间学习平台提供的 CPU 计时器以生成具有良好精度的 PWM 或数据输出是很好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:43:36.780

我不知道如何调用 clock_getres() 可以解决您的问题。在手册页中，据说只读取时钟的分辨率。

正如 Geoff 所说，使用绝对睡眠时钟应该是一个更好的解决方案。这可以避免来自其他代码的意外时序延迟。

```
struct timespec Time;
clock_gettime(CLOCK_REALTIME, &(Time));

while(1){
    Time.tv_nsec += 416000;
    if(Time.tv_nsec > 999999999){
        (Time.tv_sec)++;
        Time.tv_nsec -= 1000000000;
    }
    clock_nanosleep(CLOCK_REALTIME, TIMER_ABSTIME, &(Time), NULL);
    //Do something
} 
```

我在一些程序上使用它来在以太网上生成一些常规消息。它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:58:18.123

If you are doing time sensitive I/O, you probably shouldn't use the stuff in `stdio.h` but instead the I/O system calls because of the buffering done by stdio. It looks like you might be getting the worst effect of the buffering too because your program does these steps:

1.  fill the buffer
2.  sleep
3.  rewind, which I believe will flush the buffer

What you want is for the kernel to service the write while you are sleeping, instead the buffer is flushed after you sleep and you have to wait for the kernel to process it.

I think your best bet is to use `open("/sys/class/gpio/gpio139/value", O_WRONLY|O_DIRECT)` to minimize delays due to caching.

if you still need to flush buffers to force the write through you probably want to use `clock_gettime` to compute the time spent flushing the data and subtract that from the sleep time. Alternatively add the desired interval to the result of `clock_gettime` and pass that to `clock_nanosleep` and use the `TIMER_ABSTIME` flag to wait for that absolute time to occur.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:44:05.540

我猜问题是`clock_nanosleep`睡眠时间为 416 微秒，循环中的其他命令以及循环和`clock_nanosleep`架构本身需要 354 微秒。操作系统也可能提出要求。

如果你设置 sleep = 0，你会得到什么时间间隔？

您是在计算机还是 PLC 上运行它？

**回应评论**

似乎您在硬件/软件中有些东西正在做一些意想不到的事情 - 这可能是一个错误的发现。

根据时期的关键程度，我有 2 条建议：

1.  低临界 - 在你的程序中放置一个数字，使循环花费你想要的时间。但是，如果这是瞬态或时间/温度相关的影响，您将需要定期检查漂移。
2.  高临界 - 在硬件中构建温度稳定的振荡器。这些可以现成购买。

# google-app-engine - 将我的代码部署到 Google App Engine 时出错

> ID：14765315
> 
> 赞同：1
> 
> 时间：2013-02-08T03:40:55.533
> 
> 标签：google-app-engine, python-2.7

我的简单应用程序仅从给定 URL 获取内容在本地服务器上运行良好，但在部署时会出错。[在这里检查](http://compare-hatke.appspot.com/)

该应用程序仅包含我在此处包含的两个文件

比较-hatke.py

```
from google.appengine.api import urlfetch

url = "http://www.google.com/"
result = urlfetch.fetch(url)
if result.status_code == 200:
  print(result.content) 
```

应用程序.yaml

```
application: compare-hatke
version: 3
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: compare-hatke.app 
```

日志 - 版本 1

```
Traceback (most recent call last):
  File "/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 196, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 269, in _LoadHandler
    raise ImportError('%s has no attribute %s' % (handler, name))
ImportError: <module 'compare-hatke' from '/base/data/home/apps/s~compare-hatke/1.365150810067162164/compare-hatke.pyc'> has no attribute app 
```

现在，我完全不知道为什么这不起作用。任何建议或帮助都是至关重要的。

谢谢 ！

# c - 请求非结构或联合的成员“类型”

> ID：14765316
> 
> 赞同：0
> 
> 时间：2013-02-08T03:40:59.887
> 
> 标签：c, pointers, struct

编译时出现错误：

请求非结构或联合的成员“类型”，

当 strcmp() 函数用于传递的 char 数组和指向结构的指针时，会发生此错误。

我要做的是传入一个“字符串”并让它返回“字符串”所在的数组中的索引。

```
int returnDuplicate(char word , struct data *value)
{

int i = 0;
int placefinder = -60;

for (i ; i <= 50 ; i++)
{

  if ( strcmp(word, value.type[i]) == 0)
     {
       placefinder = i;

     }
}

return placefinder;
}

struct data {
             char type[50][16];
             double whole[50];
             double retail[50];
             double profit[50];
          }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T03:43:08.050

你有两个我看到的问题：

1.  如果您希望它是 (C) 字符串，您希望将其`char*`用作参数的类型。`word`不是`char`。

    `int returnDuplicate(char* word , struct data *value)`

2.  `value`是指向 a 的指针`struct data`。因此，您必须使用`->`运算符，而不是`.`访问其成员。

    `strcmp(word, value->type[i])`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T03:42:43.567

在这一行：

```
if ( strcmp(word, value.type[i]) == 0) 
```

您正在尝试访问 的`type`字段`value`，但`value`它是指向 a 的指针`struct`，而不是 a`struct`本身。尝试将该行更改为

```
 if ( strcmp(word, value->type[i]) == 0) 
```

您收到的`.`错误是`->`来自`gcc`. 一旦你看过足够多的时间，你就会明白它的含义。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T03:43:01.590

当您`value`作为指向结构的指针传递时，因此您需要使用`->`运算符来访问结构的字段而不是`.`：

```
if ( strcmp(word, value->type[i]) == 0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T03:44:45.733

在原型中添加 *： `char * word`

# javascript - JayData：尝试使用 1 到多插入，得到默认错误回调

> ID：14765317
> 
> 赞同：0
> 
> 时间：2013-02-08T03:41:11.770
> 
> 标签：javascript, sqlite, jaydata

我已经将我的应用程序和数据库上下文剥离到最简单的部分。我有两张桌子，地图和标记。每张地图都存在许多标记。使用现有的地图，我似乎无法插入新的标记；我得到了默认的错误回调。

跟踪 jaydata.js，我在`exec`函数中的 SqLiteProvider.js 文件中遇到错误。这是一个 SQL 失败，正在尝试将 Map（带有主键集）插入到表中，但失败了。我究竟做错了什么？

我的背景：

```
$data.Entity.extend("$org.types.Marker", {
    Id: { type: "int", key: true, computed: true },
    Left: { type: "int", required: true },
    Top: { type: "int", required: true },
    Color: { type: "string", required: true },
    Name: { type: "string", required: true },
    Map: { type: "$org.types.Map", inverseProperty: "Markers" }
});

$data.Entity.extend("$org.types.Map", {
    Id: { type: "int", key: true, computed: true },
    Title: { type: "string", required: true },
    Src: { type: "string", required: true },
    Height: { type: "int", required: true },
    Width: { type: "int", required: true },
    Markers: { type: "Array", elementType: "$org.types.Marker", inverseProperty: "Map" }
});

$data.EntityContext.extend("$org.types.OrgContext", {
    Maps: { type: $data.EntitySet, elementType: $org.types.Map },
    Markers: { type: $data.EntitySet, elementType: $org.types.Marker },
 });

var DB = new $org.types.OrgContext({ name: "webSql", databaseName: "Testing"}); 
```

我的测试代码：

```
DB.Maps.single( function (map) { return map.Id == 1; }, {}, function(map) {
        var marker = new $org.types.Marker({
            Left: 250,
            Top: 350,
            Color: 'green',
            Name: 'Example',
            Map: map});

        DB.Markers.add(marker);
        DB.saveChanges(function() {
            alert(marker.Id);
        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:21:39.060

该示例不插入地图对象。如果您已经拥有它，这不是问题。

有一个普遍的问题，被遗忘了很多次：`context.onReady()`应该在使用提供者访问数据之前使用。

这本身并不能解决问题，在保存 ne 标记对象之前应该添加一行：

```
DB.Maps.attach(map); 
```

这是将对象移动到上下文范围并将映射的 entityState 属性设置为 $data.EntityState.Unchanged 所必需的。如果您从 DB 中读取实体，则 entityState 将是未知的，并且提供者会尝试将其保存为新记录。尝试将地图实体保存为新记录会导致 SQL 错误，因为存在 ID=1 的现有记录。

更新后的代码如下所示：

```
var DB = new $org.types.OrgContext({ name: "webSql", databaseName: "Testing" });

        DB.onReady(function () {
            DB.Maps.single(function (map) { return map.Id == 1; }, {}, function (map) {
                DB.Maps.attach(map); //this sets map.entityState = $data.EntityState.Unchanged;
                var marker = new $org.types.Marker({
                    Left: 250,
                    Top: 350,
                    Color: 'green',
                    Name: 'Example',
                    Map: map
                });
                DB.Markers.add(marker);
                DB.saveChanges(function () {
                    alert(marker.Id)
                });
            });
        }); 
```

**更新**：如果您使用新的地图实体保存新的制造商，则无需附加，您的代码只需要 DB.onReady()

# algorithm - 具有大且不可预测的异常的 PID 控制回路

> ID：14765323
> 
> 赞同：4
> 
> 时间：2013-02-08T03:42:29.647
> 
> 标签：algorithm, embedded, controls, pid

**简短的问题**
是否有一种通用方法可以在其他统一的控制区域内处理非常大的异常（数量级）？

**背景**
我正在研究一种控制算法，该算法可以驱动电机穿过一个大致一致的控制区域。在没有/最小负载的情况下，PID 控制效果很好（快速响应，几乎没有超调）。我遇到的问题是通常至少会有一个高负载位置。该位置由用户在安装过程中确定，因此我无法合理地知道何时/何处可以期待它。

当我调整 PID 以处理高负载位置时，它会导致非负载区域出现较大的过冲（这是我完全预料到的）。虽然超出中间行程是*可以*的，但外壳上没有机械硬停止。缺少硬停止意味着任何显着​​的过冲都可能/确实导致控制臂与电机断开连接（产生死机）。

**我正在制作原型的东西**

*   嵌套 PID（远离目标时非常激进，靠近时保守）
*   远时固定增益，近时PID
*   保守 PID（无负载工作）+ 一个外部控制，用于寻找 PID 停止并施加额外的能量，直到：达到目标或检测到快速变化率（即离开高负载区域）

**硬件限制**

*   全行程定义
*   无法添加硬停止（此时）

**更新**
我的回答并不表明这是最佳解决方案。这只是我认为我会分享的当前解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:41:30.817

# 初步解决方案

stalled_pwm_output = PWM / | ΔE |

PWM = 最大 PWM 值
ΔE = last_error - new_error

基于电机**没有变化，初始关系成功地提高了 PWM 输出。**有关示例输出，请参见下图。

这种方法适用于非侵略性 PID 停滞的情况。然而，它有一个不幸（且明显）的问题，即当非主动 PID 能够达到设定值并尝试减慢速度时，stalled_pwm_output 会上升。当行驶到空载位置时，这种上升会导致较大的超调。

![1/ΔE 与 ΔE](../Images/cf0232133210fcb232234860a99e329d.png)

# 当前解决方案

## 理论

**stalled_pwm_output = (kE * PID_PWM) / | ΔE |**

kE = 比例常数
PID_PWM = 来自非主动 PID 的当前 PWM 请求
ΔE = last_error - new_error

我目前的关系仍然使用 1/ΔE 概念，但使用非侵略性 PID PWM 输出来确定stall_pwm_output。这允许 PID 在开始接近目标设定点时限制stall_pwm_output，但在停止时允许 100% PWM 输出。需要缩放常数 kE 以确保 PWM 进入饱和点（下图中的 10,000 以上）。

## 伪代码

请注意，来自 cal_stall_pwm 的结果被**添加**到我当前控制逻辑中的 PID PWM 输出中。

```
int calc_stall_pwm(int pid_pwm, int new_error)
{
    int ret = 0;
    int dE = 0;
    static int last_error = 0;
    const int kE = 1;

    // Allow the stall_control until the setpoint is achived
    if( FALSE == motor_has_reached_target())
    {
        // Determine the error delta
        dE = abs(last_error - new_error);
        last_error = new_error;

        // Protect from divide by zeros
        dE = (dE == 0) ? 1 : dE;

        // Determine the stall_pwm_output
        ret = (kE * pid_pwm) / dE;
    }

    return ret;
} 
```

## 输出数据

*停滞的 PWM 输出* ![停滞的 PWM 输出](../Images/46d73ded9de6e3f012a6d7743e50ae5d.png)

请注意，在停止的 PWM 输出图中，大约 3400 处的突然 PWM 下降是激活的内置安全功能，因为电机无法在给定时间内到达位置。

*空载 PWM 输出* ![空载 PWM 输出](../Images/786fe3f279e26b2534fb76a75ad5ddce.png)

# gridview - QML 遍历 GridView 中的委托项目

> ID：14765324
> 
> 赞同：0
> 
> 时间：2013-02-08T03:42:36.857
> 
> 标签：gridview, qml

我有一个使用 ListModel 的 QML GridView。每个 ListElement 只定义一个颜色，委托读取并创建一个彩色方块。

有没有办法遍历委托实例并调用委托中定义的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:16:36.233

恐怕这个问题对细节有点轻描淡写。如果您可以多解释一下您正在尝试做的事情，那可能会有所帮助。为什么要遍历委托并在其上调用函数？请记住，视图用于为列表模型中的每个元素呈现 QML，其中模型仅提供数据，它们并非旨在执行功能。因为 QML（我上次检查）不支持将函数分配给属性，所以您甚至不能将函数分配给 ListModel 元素。

# java - hibernate 只读查询缓存机制

> ID：14765337
> 
> 赞同：1
> 
> 时间：2013-02-08T03:43:44.067
> 
> 标签：java, spring, hibernate, caching

这个问题与我的另一个[问题有关](https://stackoverflow.com/questions/14682395/hibernate-cache-for-scalar-queries)

我正在构建一个使用休眠从数据库读取数据的 Spring Web 应用程序。我的应用程序不会知道对数据库所做的任何更改（更新/插入）。在这种情况下有没有办法使用查询缓存？

我配置了查询缓存，当我从不同的应用程序更新数据库时，它不会使缓存失效。我*认为*这是预期的行为。

当数据库中有更新时，我需要缓存查询并使其失效。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:11:08.367

我不确定是否有任何自动刷新缓存的方法。但我在上一个项目中解决了这个问题。公开如下方法并授予管理员访问权限。一旦在 DB 中完成任何修改，外部调用此方法来刷新缓存。

```
public void refreshCache()
    {
        try {
            Map<String, ClassMetadata> classesMetadata = sessionFactory.getAllClassMetadata();
            for (String entityName : classesMetadata.keySet()) {

                sessionFactory.evictEntity(entityName);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:13:13.103

好吧，如果您使用的是 Oracle，以下命令将为您提供表上最后更新的唯一 scn

```
select max(ora_rowscn) from TableName; 
```

**输出**

```
10772982279880 
```

如果需要，您可以进一步将其转换为时间戳

```
select scn_to_timestamp(10772982279880) from dual 
```

但我认为您不需要将其转换为时间，只需单独缓存rowscn并定期检查表，如果有变化您可以驱逐缓存区域。

```
Please note that this supports version > 10g 
```

# crystal-reports - Crystal Reports JDBC 未连接

> ID：14765342
> 
> 赞同：0
> 
> 时间：2013-02-08T03:44:08.297
> 
> 标签：crystal-reports, driver, installation, crystal-reports-2008

我正在运行水晶报告 2008 和 oracle11g。我已经在 SQL developer 中测试了连接，我可以很好地连接。
但是，如果我尝试在 Crystal Reports 中创建新的 JDBC 连接，则会出现错误

> 无法打开连接。
> 
> 详细信息：未找到 JDBC 驱动程序。

我有以下设置：

*   Oracle 主页：C:\Oracle\product\11.1.0\client_2\jdbc\lib\ojdbc6.jar
*   路径：C:\Oracle\product\11.1.0\client_2\bin；+ 还有更多
*   我已将 C:\Program Files (x86)\Business Objects\Common\4.0\java/lib/external/ojdbc6.jar;$ 添加到 CRConfig.xml 文件的类路径中。

为什么我无法创建连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T23:49:15.807

问题是我有一台 Windows 7 64 位机器，带有 64 位水晶和 64 位 Oracle。64 位的预言机与水晶的交互不是很好。一旦我安装了 32 位版本的 Oracle，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-29T07:27:51.333

我使用以下步骤解决了这个问题：

1.  将 jar 文件复制到“外部”文件夹。
2.  将 jar 添加到 CRConfig.xml 中的类路径。
3.  最重要的是，我修改了 CRConfig.xml 中的“JavaDir”以引用我当前的 java/bin 文件夹，在我的情况下，它如下：C:\Program Files\Java\jre1.8.0_301\bin

# jquery - 无缘无故的“SyntaxError：无效量词”

> ID：14765348
> 
> 赞同：1
> 
> 时间：2013-02-08T03:44:48.793
> 
> 标签：jquery, html, firefox, firebug

这发生在带有 Firebug 1.11.1 的 Mozilla Firefox 18.0.2 中。

完全没有任何理由，也与正则表达式无关，我到处都收到“无效量词”错误，当我尝试调试它时，它指向 jQuery，通常与通过变量调用对象属性有关，例如：-

```
var propValue = elem[prop]; 
```

我的网站是一个有效的 HTML5，这个错误只发生在 Firefox 中。Chrome、Opera、Safari 和令人惊讶的 IE 运行良好，没有任何错误。

我已经在谷歌上搜索了一段时间，但仍然找不到解决方案。我什至不确定它是 Firefox 还是 Firebug 中的错误。绝对不是脚本，因为它在所有其他浏览器中都可以正常工作。我尝试将 js 移到头部，但最糟糕的是，显然 jQuery`prop`似乎在 dom 完全加载之前开始运行，从而导致更多错误。

当我清除缓存时，错误似乎也没有中断。但是当我再次重新加载页面时，错误就会中断。

有人知道是什么原因造成的吗？

屏幕一：

![在此处输入图像描述](../Images/6362bf4e347bb848ba25f920fff60bd5.png)

屏幕 2：

![在此处输入图像描述](../Images/f3cd02c09a618019062b4054f5ff2d56.png)

# php - ErrorException [错误]：找不到类“Model_Search”

> ID：14765350
> 
> 赞同：0
> 
> 时间：2013-02-08T03:45:03.333
> 
> 标签：php, orm, fuelphp

我从我的本地主机移动到我的网络主机以测试应用程序，一切都按预期工作，但是当我尝试使用通过 oil 生成的模型时，它会抛出该错误，说该类不存在，但它确实存在.

我正在使用的代码：

```
use \Model\Search;

class Controller_Search extends Controller_Template
{
    public function action_search()
    {
        if ($_POST['Search']) {
            $name['communities'] = Model_Search::query()->where('zip', '=', $_POST['Search'])->get();
            $name['count'] = count($name['communities']);
            $this->template->title = 'Search &raquo; Search';
            $name['canShow'] = true;
            $this->template->content = View::forge('search/search', $name);

        } else {
            $name['count'] = 0;
            $this->template->title = 'Search &raquo; Search';
            $name['canShow'] = false;
            $this->template->content = View::forge('search/search', $name);
        }
    }

} 
```

问题是，这是什么原因造成的？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:06:40.457

在定义和自动加载器中，\Model\Search 都不同于 \Model_Search，即使它们都指向同一个文件。

因此，请下定决心要如何使用模型，并保持一致。

# python - Python - 套接字错误，地址正在使用中

> ID：14765351
> 
> 赞同：2
> 
> 时间：2013-02-08T03:45:07.687
> 
> 标签：python, sockets, ssl

我目前正在尝试在 Xubuntu 12.10 x64 上设置 SiriServer（这不是重点），当我运行服务器时 python 返回错误

`socket.error: [Errno 98] Address already in use.`

默认情况下，服务器尝试在端口 443 上运行，不幸的是，该应用程序需要该端口才能运行。

要仔细检查端口 443 上是否正在运行任何东西，我执行以下命令：

```
lsof -i :443 
```

没有结果，除非我打开了 Chrome 或 Firefox 之类的东西，我最终关闭了它们。这是尝试运行服务器应用程序的全部回报。

```
dustin@dustin-xubuntu:~/Applications/SiriServer$ sudo python siriServer.py
CRITICAL load_plugins Failed loading plugin due to missing module: 'Wordnik library not found. Please install wordnik library! e.g. sudo easy_install wordnik'
INFO <module> Starting Server
Traceback (most recent call last):
  File "siriServer.py", line 493, in <module>
    server = SiriServer('', options.port)
  File "siriServer.py", line 425, in __init__
    self.bind((host, port))
  File "/usr/lib/python2.7/asyncore.py", line 342, in bind
    return self.socket.bind(addr)
  File "/usr/lib/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
socket.error: [Errno 98] Address already in use 
```

我不知道该怎么做，因为这是设置此应用程序的最后一部分。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T13:46:27.373

当按下 ^C 或 ^Z 时 python 程序没有正确退出时，通常会发生这种情况。您可以尝试重置终端或退出终端。你也可以做`killall -9 server.py`

另一种有效的方法来帮助防止这种情况，即使你有 root 权限，如果套接字没有正确关闭，也会发生这种情况，这里有一个修复：

```
s=socket.socket( )
s.bind(("0.0.0.0", 8080))
while 1:
    try:
        c, addr = s.accept()
    except KeyBoardInterrupt:
        s.close()
        exit(0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T03:48:06.957

你不是root - 那是你的问题。要在 Unix 上绑定到 1024 以下的端口，您必须是超级用户。所以，`su`再次点击并尝试 python 代码。或者，绑定到从 1024 到 65535 的端口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-07T08:21:00.490

即使端口号超过 1024，我也会收到该错误

您可以使用

```
 pkill -9 python 
```

运行命令两次，它将列出所有被杀死的python文件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-02T02:17:05.773

列出您正在运行的所有进程

```
ps -a 
```

获取与 python 对应的 PID 并将其通过管道传递到 kill 命令中（示例 PID 2770）

```
kill -9 2770 
```

# javascript - 如何通过从外部源（数据库）中提取值来动态调整 chrome 扩展的 manifest.json 的“匹配”键？

> ID：14765354
> 
> 赞同：1
> 
> 时间：2013-02-08T03:46:09.323
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试创建一个 chrome 扩展，我只想让我的 content_scripts 仅在用户访问某些页面时运行。

对可以访问的网页进行硬编码似乎不是正确的做法。如何修改 manifest.json 脚本以从外部源中提取 content_script“匹配项”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:33:00.333

`"content_scripts": [{"matches": ["*://*/*"]`你应该在你的清单中写一些类似的东西。有能力在所有页面上执行脚本。在扩展代码中跟踪用户导航，当用户导航到特定页面（您感兴趣）时，将脚本插入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:57:17.207

我会做类似的事情

```
"content_scripts": {"matches": ["http://*/", "https://*/"]} 
```

然后在您的脚本中，您可以加载外部匹配模式列表以在您的脚本中进行检查。

我在最近的扩展中这样做了，方法是将我的站点列表的匹配模式列表放在一个 json 文件中，然后将其内容加载到 localStorage 以供过滤器使用。

我写了[一个扩展源代码的演练](http://jdstraughan.com/2013/02/07/nonews-part-2-the-source/)，它可以帮助你了解我是如何完成类似的事情的。

# c# - c# AD计算机账号DN

> ID：14765355
> 
> 赞同：-3
> 
> 时间：2013-02-08T03:46:11.853
> 
> 标签：c#

我如何使用主体在 c# 中获取 AD 计算机帐户 DN

```
public string GetcomputerExtededProperty(string fieldName)
    {
        try
        {
            ComputerPrincipal oGroupPrincipal = GetComputer();
            return GetProperty((DirectoryEntry)oGroupPrincipal.GetUnderlyingObject(), fieldName);

        }
        catch
        {
            return "";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:37:03.607

不确定这是否是您要查找的内容，但您可以使用类的`FindByIdentity`方法和`DistinguishedName`属性[`ComputerPrincipal`](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.computerprincipal.aspx)（在 `System.DirectoryServices.AccountManagement`命名空间和程序集中）：

```
PrincipalContext oCtx = new PrincipalContext(ContextType.Domain);
ComputerPrincipal oPrincipal = ComputerPrincipal.FindByIdentity(oCtx, computerName);
string dn = oPrincipal.DistinguishedName; 
```

# ios - 在 UITableView 中自动更新背景

> ID：14765356
> 
> 赞同：1
> 
> 时间：2013-02-08T03:46:22.370
> 
> 标签：ios, objective-c, uitableview

我正在制作一个 iOS 应用程序，它基于 UITableView。我设置了背景，这样当没有 TableViewCell 时，背景是自定义背景。当有 TableViewCells 时，应用程序会将背景更改为颜色。问题是，应用程序必须强制退出并重新启动才能改变背景。无论如何我可以这样做，以便自动更新背景？这是我的代码：

```
// Check if table view has any cells
int sections = [self.tableView numberOfSections];
BOOL hasRows = NO;
for (int i = 0; i < sections; i++)
    hasRows = ([self.tableView numberOfRowsInSection:i] > 0) ? YES : NO;

if (sections == 0 || hasRows == NO)
{
    self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background-app.png"]];

}
else
{
 self.tableView.backgroundColor = [UIColor whiteColor];
    self.tableView.backgroundView = nil;
} 
```

我把它放在我的 viewDidLoad

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:53:13.190

是`self.view`和`self.tableView`同一个视图对象吗？

您正在将图像设置为的背景`self.tableView`和背景的颜色`self.view`。如果 table view 是 的子视图`self.view`，一旦设置了背景图片，它总是会遮挡 的背景颜色`self.view`。

强制退出可能会起作用，因为您重新运行逻辑并且从未首先设置图像背景。尝试将表格视图的背景视图设置为`nil`：

```
if (sections == 0 || hasRows == NO)
{
    UIImage *image = [UIImage imageNamed:@"background-app.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    // Set the background view of the table view
    self.tableView.backgroundView = imageView;
}
else
{
    [[self view] setBackgroundColor:[UIColor whiteColor]];   
    self.tableView.backgroundView = nil;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:06:51.927

我想到了！基本上，我将以下代码放入我的`viewDidLoad`：

```
// Check if table view has any cells
int sections = [self.tableView numberOfSections];
BOOL hasRows = NO;
for (int i = 0; i < sections; i++)
    hasRows = ([self.tableView numberOfRowsInSection:i] > 0) ? YES : NO;

if (sections == 0 || hasRows == NO)
{

    self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background-app.png"]];
}
else
{
    self.tableView.backgroundColor = [UIColor whiteColor];
    self.tableView.backgroundView = nil;
} 
```

我要做的就是把这段代码放在我的`viewDidLoad`

```
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background-app.png"]]; 
```

并将代码放在上面，`controllerDidChangeContent`如下所示

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView endUpdates];

    // Check if table view has any cells
    int sections = [self.tableView numberOfSections];
    BOOL hasRows = NO;
    for (int i = 0; i < sections; i++)
        hasRows = ([self.tableView numberOfRowsInSection:i] > 0) ? YES : NO;

    if (sections == 0 || hasRows == NO)
    {

        self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background-app.png"]];
    }
    else
    {
        self.tableView.backgroundColor = [UIColor whiteColor];
        self.tableView.backgroundView = nil;
    }
} 
```

所以当应用程序启动时它会加载背景图片“background-app.png”。然后，一旦它识别出应用程序中有数据，它就会自动变为正常的白色背景。然后当你删除所有数据时，它会回到背景图片“background-app.png”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:31:39.340

*两者都使用`self.tableView.backgroundColor`，可能有助于解决您的问题*

```
if (sections == 0 || hasRows == NO)
{
    self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"YourImage.png"]];

}
else
{
    [[self view] setBackgroundColor:[UIColor whiteColor]];   
    self.tableView.backgroundView = nil;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T07:45:41.340

如果你使用然后使用这个

```
 if (sections == 0 || hasRows == NO)
{
    self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"YourImage.png"]];

}
else
{
   self.tableView.backgroundColor = [UIColor whiteColor];   
    self.tableView.backgroundView = nil;
} 
```

# android - Android数据下载实验

> ID：14765358
> 
> 赞同：0
> 
> 时间：2013-02-08T03:46:26.040
> 
> 标签：android, http, exception

我对 Android 比较陌生，我正在尝试遵循[本](http://developer.android.com/training/basics/network-ops/connecting.html)教程。

我用以下代码创建了一个小项目：

```
package com.example.revivaltimesv1;

import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.io.UnsupportedEncodingException;
import java.net.HttpURLConnection;
import java.net.URL;

import android.app.Activity;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    private static final int LENGTH_LONG = 10;
    private TextView message;// = (TextView)findViewById(R.id.message);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        message = (TextView)findViewById(R.id.message);

        Log.i("mine", "TESTING ... TESTING!!!");

        ConnectivityManager conManager = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = conManager.getActiveNetworkInfo();
        if( networkInfo != null && networkInfo.isConnected() ){
            Toast.makeText(this, "Established Network Connection!", LENGTH_LONG).show();
            String stringURL = "http://178.79.128.76/GTK/node/7";
            new DownloadStuff().execute(stringURL);
//          new test().execute();
            //message.setText("WORKING");
        }else{
            Toast.makeText(this, "No Network Connection!", LENGTH_LONG).show();
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

//}

/*    private class test extends AsyncTask<String, String, String>{
        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            return null;
        }
    }
*/
    private class DownloadStuff extends AsyncTask<String, String, String>{

        protected String doInBackground(String... url) {
            // TODO Auto-generated method stub
            Log.i("CHECK", "OUTSIDE");
            try{
                Log.i("CHECK", "SUCCESS: " + url[0]);
                downloadUrl(url[0]);
                Toast.makeText(getApplicationContext(), "WORKING !!!", LENGTH_LONG).show();
            }catch(IOException i){
                Log.i("CHECK", "NOT so successful");
                Toast.makeText(getApplicationContext(), "ERROR: unable to establish contact with URL", LENGTH_LONG).show();     
            }
            return null;
        }

        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
//          super.onPostExecute(result);
            message.setText("Hurray!");
        }

        // Given a URL, establishes an HttpUrlConnection and retrieves
        // the web page content as a InputStream, which it returns as
        // a string.
        private String downloadUrl(String myurl) throws IOException {
            InputStream is = null;
            // Only display the first 500 characters of the retrieved
            // web page content.
            int len = 500;

            try {
                URL url = new URL(myurl);
                HttpURLConnection conn = (HttpURLConnection) url.openConnection();
                conn.setReadTimeout(10000 /* milliseconds */);
                conn.setConnectTimeout(15000 /* milliseconds */);
                conn.setRequestMethod("GET");
                conn.setDoInput(true);
                // Starts the query
                conn.connect();
                int response = conn.getResponseCode();
                Log.d("DEBUG_TAG", "The response is: " + response);
                is = conn.getInputStream();

                // Convert the InputStream into a string
                String contentAsString = readIt(is, len);
                return contentAsString;

            // Makes sure that the InputStream is closed after the app is
            // finished using it.
            } finally {
                if (is != null) {
                    is.close();
                } 
            }
        }
        public String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {
            Reader reader = null;
            reader = new InputStreamReader(stream, "UTF-8");        
            char[] buffer = new char[len];
            reader.read(buffer);
            return new String(buffer);
        }
    }

} 
```

该应用程序运行短暂，但随后崩溃给我以下反馈：

```
02-08 03:39:16.316: E/AndroidRuntime(5106): FATAL EXCEPTION: AsyncTask #1
02-08 03:39:16.316: E/AndroidRuntime(5106): java.lang.RuntimeException: An error occured while executing doInBackground()
02-08 03:39:16.316: E/AndroidRuntime(5106):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at java.lang.Thread.run(Thread.java:1102)
02-08 03:39:16.316: E/AndroidRuntime(5106): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
02-08 03:39:16.316: E/AndroidRuntime(5106):     at android.os.Handler.<init>(Handler.java:121)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at android.widget.Toast.<init>(Toast.java:68)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at android.widget.Toast.makeText(Toast.java:231)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at com.example.revivaltimesv1.MainActivity$DownloadStuff.doInBackground(MainActivity.java:74)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at com.example.revivaltimesv1.MainActivity$DownloadStuff.doInBackground(MainActivity.java:1)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
02-08 03:39:16.316: E/AndroidRuntime(5106):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-08 03:39:16.316: E/AndroidRuntime(5106):     ... 4 more 
```

我查看了错误堆栈的底部，但**... 4 more**似乎隐藏了与我的代码相关的部分 - 我认为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:51:42.987

您不能在**非 ui 线程**中显示 Toast 。

您可以向 UI 线程发布消息，并让 UI 线程处理该消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:53:00.643

您不能在非 UI 线程中使用 Toast。您可以从 onPostExecute() 显示 toast，因为它是从 UI 线程调用的，但不能从 doInBackground() 显示，因为它在自己的线程中运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T03:51:11.147

实际上，错误在 logcat 堆栈跟踪中清楚地显示：`02-08 03:39:16.316: E/AndroidRuntime(5106): at com.example.revivaltimesv1.MainActivity$DownloadStuff.doInBackground(MainActivity.java:74)`

理想情况下，任何`Toasts`/UI 功能都应在`onPostExecute()`. 但是如果你必须在 中做`doInBackground()`，把它放在 a`Runnable`中，如代码所示。

```
Runnable run = new Runnable() {

    @Override
    public void run() {
        Toast.makeText(getApplicationContext(), "WORKING !!!", LENGTH_LONG).show();

    }
}; MainActivity.this.runOnUiThread(run); 
```

在此处阅读有关[AsyncTasks](http://developer.android.com/reference/android/os/AsyncTask.html)的更多信息，特别是标题为**The 4 Steps的部分**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T03:56:38.937

当您使用 Async Task 时，请确保它不在主线程上工作，因此您无法显示`Toast`.

`AsyncTask`类有五个方法

*   `onPreExecute()`— 此方法在后台处理开始之前在 UI 线程上运行。
*   `doInBackground()`—此方法在后台运行，是所有实际工作完成的地方。
*   `publishProgress()`——这个方法，从方法中调用`doInBackground()` ，周期性的通知UI线程后台进程的进度。此方法将信息发送到 UI 进程。
*   `onProgressUpdate()`— 只要 `doInBackground()`方法调用，此方法就会在 UI 线程上运行`publishProgress()`。此方法从后台进程接收信息。
*   `onPostExecute()`— 一旦后台处理完成，此方法在 UI 线程上运行。

因此，每当您想要执行诸如显示进程状态之类的操作时，您都应该使用`OnProcessUpdate()`方法，因为它允许您与主线程进行交互。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T03:50:12.897

不要尝试`Toast`在后台线程中显示 a 。

```
private class DownloadStuff extends AsyncTask<String, String, String>{

        protected String doInBackground(String... url) {
            // TODO Auto-generated method stub
            Log.i("CHECK", "OUTSIDE");
            try{
                // ....
                Toast.makeText(getApplicationContext(), "WORKING !!!", LENGTH_LONG).show();
            }catch(IOException i){

                Toast.makeText(getApplicationContext(), "ERROR: unable to establish contact with URL", LENGTH_LONG).show();     
            }
            return null;
} 
```

# java - LWJGL：glMatrixMode() 是否已弃用？还是我错过了什么？

> ID：14765360
> 
> 赞同：0
> 
> 时间：2013-02-08T03:46:38.293
> 
> 标签：java, deprecated, lwjgl

所以我正在阅读LWJGL wiki 上的[这篇](http://www.lwjgl.org/wiki/index.php?title=Version_selection#Display.create.28.29)文章，它提到，“当使用‘前向兼容’上下文时，任何标记为已弃用的功能都将被删除。”

现在，当我实现与显示器的前向兼容性时，每当我调用 glMatrixMode() 以及其他渲染函数时，编译器都会抛出 IllegalStateExceptionError。当我删除前向兼容性时，它工作得很好。那么 glMatrixMode() 是否已弃用？如果是这样，初始化我的渲染模式的新方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:54:52.613

[http://java.net/projects/vecmath](http://java.net/projects/vecmath)

这是一个推荐用于矩阵运算的 java 库，因为较新的 OpenGL 规范不再支持矩阵运算。

为了向前兼容，没有旧代码可以使用这些函数。

# javascript - 从 Node.js 更新客户端 DOM

> ID：14765362
> 
> 赞同：2
> 
> 时间：2013-02-08T03:46:54.433
> 
> 标签：javascript, node.js

我已经重写了这个描述，因为原来的描述根本不清楚，我想我可以更容易地总结一下：

使用node.js，是否可以在不打开创建页面标题和正文的原始连接的情况下更新客户端DOM，并且每次新更新都执行response.write（）？

实际上，我希望在页面加载并关闭连接后从 node.js 更新浏览器中的页面？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:40:48.703

在我看来，这与您使用 node.js 还是 PHP 或其他无关，如果您想在客户端修改 DOM，在 HTTP 请求完成后，这是您的两个选择。无论是你

*   使用 javascript`setTimeout()`和对 XHR 对象的请求的组合来轮询 JSON 或 HTML 片段（我不会在这里进行 AJAX 轮询），或者

*   使用网络套接字。这些是保持打开状态的连接，因此您可以在页面运行时来回传递消息。查一下。

# java - 用户输入仅发生一次或在循环期间永不停止

> ID：14765363
> 
> 赞同：0
> 
> 时间：2013-02-08T03:47:23.713
> 
> 标签：java, while-loop, do-while

我正在尝试一个程序，它读取未指定数量的整数，找到总和、正数、负数和平均值。我的问题是它要么只运行并允许输入一个整数然后什么都不做，要么使用下面的代码，它永远不会停止让你输入数字，因此我无法通过。我的 number = 0 输出正确。

```
public class Compute {

// Count positive and negative numbers and compute the average of numbers
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        int sum = 0;
        positive = 0;
        negative = 0;
        total = 0;

        System.out.println("Enter an integer, the input ends if it is 0: ");
        int numbers = input.nextInt();

        do {
            if (numbers > 0) {
                positive++;//add 1 to positive count
            } else if (numbers < 0) {
                negative++;//add 1 to negative count
            }//end else if

            sum += numbers; //add integer input to sum

            numbers = input.nextInt();
            total++;
        } while (numbers != 0);

        if (numbers == 0) {
            System.out.println("No numbers are entered except " + numbers);
        }//end if
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:01:58.277

试试下面的代码。在执行的任何时候终止循环并查看输出类型 0 作为输入。

```
import java.util.Scanner;

public class Compute {

    // Count positive and negative numbers and compute the average of numbers
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        int sum = 0;
        int positive = 0;
        int negative = 0;
        int total = 0;

        System.out.println("Enter an integer, the input ends if it is 0: ");
        int numbers = input.nextInt();

        do {

            if (numbers > 0) {
                positive++;// add 1 to positive count
                sum += numbers; // add integer input to sum
            }

            else if (numbers < 0) {
                negative++;// add 1 to negative count
                sum -= numbers; // add integer input to sum
            }

            numbers = input.nextInt();
            total++;

        } while (numbers != 0);

        System.out.println("The number of positives is \t " + positive);
        System.out.println("The number of negatives is \t " + negative);
        System.out.println("The total count of number is \t " + total);
        System.out.println("The sum of all number is    \t" + sum);
        System.out.println("The average is           \t"
                + ((double) sum / (positive + negative)));

    }// end main
}// end Compute 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:08:40.600

下面的代码片段应该给你一个关于如何从控制台读取整数的好例子：

```
Scanner scanner = new Scanner(System.in);
do {
  int i = scanner.nextInt();
  // ...
} while (scanner.hasNext()); 
```

方法调用将`scanner.hasNext()`阻塞，直到用户在控制台上输入下一个数字

# javascript - 在 ng-repeat 中嵌入 ng-switch 时出现角度错误

> ID：14765364
> 
> 赞同：4
> 
> 时间：2013-02-08T03:47:37.280
> 
> 标签：javascript, angularjs, angularjs-ng-repeat

是否可以在**ng-repeat**内部嵌套**ng-switch-when**？

 **```
<div ng-controller="UserController">
                            <div ng-switch on="renderPath">
                                <div ng-repeat="route in routes">
                                    <div ng-switch-when="route.path">
                                        <div ng-include src="route.url"></div>
                                    </div>
                                </div>
                            </div>
                        </div> 
```

运行时出现以下异常：

```
 Error: Argument '?' is required
pa@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular.min.js:16 ...

<!-- ngSwitchWhen: route.path --> 
```

谢谢！

**编辑**

我想要完成的是以下

```
<div ng-switch on="renderPath">
                                    <div ng-switch-when="path1">
                                        <div ng-include src="url1"></div>
                                    </div>
                                    <div ng-switch-when="path2">
                                        <div ng-include src="url2"></div>
                                    </div>
                                    <div ng-switch-when="path3">
                                        <div ng-include src="url3"></div>
                                    </div>
                                </div>
                            </div> 
```

所以我想知道我是否可以使用**ng-repeat**来帮助减少上面多余的 HTML 模板代码（**ng-switch-when**）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:57:59.633

不，你不能嵌套它们。ng-switch 在 ng-controller $scope 上的 $$watchers 数组中添加一个条目。ng-repeat 为每次迭代创建一个新的子作用域。当遇到 ng-switch-when 时，（我在这里猜测）它在当前 $scope （现在是 ng-repeat 子范围）中找不到任何 ng-switch 信息，所以它失败了。

**更新**：我对此进行了更多研究。错误发生在 1.0.3，但不是 1.0.4（但它也不适用于 1.0.4）。实际发生的是 ng-switch-when 范围是控制器范围的子范围，而不是 ng-repeat 迭代子范围。因此，`route`ng-switch-when 指令不可见。这是[一个使用 1.0.4 的小提琴](http://jsfiddle.net/kqsrk/1/)——您可以单击一些链接来查看控制器、ng-repeat 和 ng-switch-default 范围。检查 ng-switch-default 范围，您可以看到它的 $parent 是控制器的范围，而不是 ng-repeat 范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T07:27:42.193

我认为 ng-switch on 应该跟在 ng-switch-when 之后。在你的情况下，你有一个

`<div ng-repeat="route in routes">`介于两者之间。

您显示的逻辑不需要 ng-switch 或者我可能遗漏了一些东西。**

# ruby-on-rails - Rails - 在项目模型的索引页面上显示来自客户端模型的数据

> ID：14765366
> 
> 赞同：0
> 
> 时间：2013-02-08T03:47:53.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, views

我试图解决这个问题，但似乎无法弄清楚。所以我有一个带有`project`模型和`client`模型的 Rails 应用程序。一个客户`has_many`项目，一个项目`belongs_to`一个客户。我创建了一个迁移来加入两个表，如下所示：

```
class AddClientsProjectsTable < ActiveRecord::Migration
  def up
    create_table :clients_projects do |t|
        t.integer :client_id
        t.integer :project_id
    end
  end

  def down
    drop_table :clients_projects
  end
end 
```

我要做的就是在项目循环内的项目索引视图上显示项目属于哪个客户端。我可以通过项目控制器的 show 方法在项目的 SHOW 页面`<% @project.clients.each do |client|%><%= client.name %><% end%>`上轻松完成此操作。`@project = Project.find(params[:id])`

但是将这样的实例变量添加到索引方法然后尝试在`<% @projects.each do |project| %>`循环中调用它是行不通的！

我至少知道数据被正确保存，因为我可以在显示页面上显示项目的客户名称，但我无法让它显示在索引视图上。

如果有帮助，这就是我将项目分配给客户的方式（通过项目索引页面完成）：

```
<%= form_for @project, :html => { :multipart => true } do |f| %>
   <% for client in Client.find(:all) %>
   <%= check_box_tag "project[client_ids][]", client.id, @project.clients.include?(client) %>
      <label><%= client.name %></label>
   <% end %>
<%= f.submit %>
<% end %> 
```

最后，这是我一直在循环内的项目索引页面上使用的代码，以显示每个项目分配给哪个客户端：

`<% Client.all do |client| %><%= client.name %><% end %>`

它不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:03:47.030

如果我没有错，这就是您想要实现的目标？？？

```
@projects = Project.all

@projects.each do |project|   #looping on all projects
     project.clients.each do |client|  #looping on clients for a project
          client.name 
     end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:05:58.180

I a project belongs_to a client, you just need to add `client_id` on the projects table. no need for a join table :) you can access a list of projects for a client by client.projects without doing anything fancy. on the other hand, if a project can be shared by different clients, you have the right table structure but you need to change your associations.

# php - 向随机图像页面添加上一个和下一个功能

> ID：14765367
> 
> 赞同：0
> 
> 时间：2013-02-08T03:47:56.347
> 
> 标签：php, mysql

我继承的一个脚本在主页上显示了一个随机图像。当前通过抓取所有图像的数组来确定随机图像（呃），然后

```
$rand_keys = array_rand($array_photoid, 2);
$photoid = $photo_rows[$rand_keys[0]]; 
```

毫无疑问，当只有几十张图像时，这会很有效，但现在有 5000 张，这需要修复。

在重写此内容时，我想添加一些功能，允许用户转到上一张和下一张图像。前进很容易，只需从表中绘制另一个随机 ID。

我将如何允许用户**返回**以前显示的*随机*图像？这甚至可能不诉诸上面的黑客攻击（将所有 id 存储在会话数组中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T03:53:09.887

您可能希望为此使用 jQuery，并使用支持 ajax 的图像滑块插件。因此，您通过 ajax 请求加载下一个图像。返回上一个图像时，它之前已经加载，因此无需担心“上一个”功能。（[https://www.google.com.sg/search?q=photo+slider](https://www.google.com.sg/search?q=photo+slider)）。

然后将页面加载到幻灯片上的随机图像。

# java - Java中的图形问题

> ID：14765371
> 
> 赞同：1
> 
> 时间：2013-02-08T03:48:38.157
> 
> 标签：java, graphics, java.util.scanner

我正在做一个学校项目，我必须在 java 中创建一个人脸，我的应用程序的用户可以编辑它。每个面部特征应该有几个选项，所以我尝试做的第一个是眼睛。但是，当我尝试在 eyeComponent 类中与用户交互时遇到了麻烦。

它在 JVM 中打印用户颜色选项 (1-4)，并打开一个空白 JFrame 窗口，但在 JVM 中，它不允许用户响应。打印出颜色选项后，程序就结束了，我不确定为什么它不允许用户响应。我在下面发布了 EyeComponent 和 PersonViewer 类的代码。

`EyeComponent`

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Line2D;
import javax.swing.JComponent;
import java.util.Scanner;  

public class EyeComponent extends JComponent
  { 
    public void paintComponent(Graphics g)
  {
    Scanner in = new Scanner(System.in);
    Graphics2D g2 = (Graphics2D) g;
    Ellipse2D.Double head = new Ellipse2D.Double(5,20,100,150);
    System.out.println("What color would you like the eyes to be?"); 
    System.out.println("Select \n1:blue \n2:red \n3:yellow \n4:green"); 
    int response = in.nextInt(); 
    if (response == 1)
        { g2.setColor(Color.BLUE);}
        else if (response == 2)
        { g2.setColor(Color.RED);}
    else if (response == 3)
        { g2.setColor(Color.YELLOW);}
    else if (response == 4)
        { g2.setColor(Color.GREEN);}
    g2.draw(head); 
 }   
} 
```

`PersonViewer`

```
import javax.swing.*;
import java.util.Scanner;
public class personViewer //creates class called engine of scope public
  {
     public static void main (String [] args) //main method for engine class
     {
        JFrame frame = new JFrame();
        frame.setSize(150, 250);
        frame.setTitle("Face");
        EyeComponent component = new EyeComponent();
        frame.add(component);
        frame.setVisible(true);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:57:43.803

切勿在paintComponent 中使用扫描仪或任何阻塞代码。曾经。事实上，这个阻塞代码永远不应该在 Swing 事件线程上调用，尤其是在paintComponent 中，因为它会使你的程序的图形停止运行。只是不要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T03:57:57.720

这是（另一个）事件调度线程问题。

您永远不应该从 GUI 程序中通过控制台请求用户输入，除了破坏 GUI 的全部要点之外，您已经知道当您阻塞主事件/重绘线程时会发生什么。

Swing（像所有的 GUI 一样）是事件驱动的环境。用户单击或键入某些内容，程序会对其做出响应。在这种形式下，它们与控制台程序不同，后者在本质上更趋于线性。

Swing 使用单个线程来执行它的所有绘制和事件通知。执行任何阻止此线程运行的操作都会导致您的应用程序看起来好像它已挂起并变得无响应。

首先阅读[使用 Swing 创建 GUI，](http://docs.oracle.com/javase/tutorial/uiswing/)然后阅读[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)，最后我强烈建议您看一下[在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

**简单示例**

![在此处输入图像描述](../Images/bdd653fc06c750ec6e9581696a575a59.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:42:44.360

不要让您的扫描仪采用您无法控制的方式。我将您的代码重构为更多的 OOP 方法。

```
 import javax.swing.*;

import java.awt.Color;
import java.util.Scanner;

public class PersonViewer // creates class called engine of scope public
{

    public static void main(String[] args) // main method for engine class
    {

        Configurator conf = Configurator.getInstance();
        Scanner in = new Scanner(System.in);
        System.out.println("What color would you like the eyes to be?");
        System.out.println("Select \n1:blue \n2:red \n3:yellow \n4:green");
        int response = in.nextInt();
        switch (response) {
        case 1:
            conf.setEyeColor(Color.BLUE);
            break;
        case 2:
            conf.setEyeColor(Color.RED);
            break;
        case 3:
            conf.setEyeColor(Color.YELLOW);
            break;
        case 4:
            conf.setEyeColor(Color.GREEN);
            break;

        }
        JFrame frame = new JFrame();
        frame.setSize(150, 250);
        frame.setTitle("Face");
        EyeComponent component = new EyeComponent();
        frame.add(component);
        frame.setVisible(true);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

```
 import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.Ellipse2D;

import javax.swing.JComponent;

public class EyeComponent extends JComponent {

    Configurator conf = Configurator.getInstance();

    public void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;
        Ellipse2D.Double head = new Ellipse2D.Double(5, 20, 100, 150);
        g2.setColor(conf.getEyeColor());
        System.out.println(conf.getEyeColor());
        g2.draw(head);
    }
}

    import java.awt.Color;

public class Configurator {

    private static Configurator instance = null;
    public static Configurator getInstance() {
        if (instance==null) {
            instance = new Configurator();
            System.out.println("first called");
        }
        else {
            System.out.println("next calls");
        }
        return instance;
    }
    private Color eyeColor;

    public Color getEyeColor() {
        return eyeColor;
    }

    public void setEyeColor(Color eyeColor) {
        this.eyeColor = eyeColor;
    }

} 
```

希望这有助于得到一点。它有效。

# magento - 如何在 footer.phtml 文件中调用 calendar.phtml

> ID：14765376
> 
> 赞同：0
> 
> 时间：2013-02-08T03:49:18.100
> 
> 标签：magento, calendar

如何调用 footer.phtml 文件中的内置日历块？

```
app/design/frontend/base/default/template/page/js/calendar.phtml. 
```

如何在我的 footer.phtml 中将该文件称为块？（即：我们写的时事通讯

```
<?php echo $this->getLayout()->createBlock('newsletter/subscribe')->setTemplate('newsletter‌​/subscribe.phtml')->toHtml(); ?> 
```

在页脚.phtml 中）

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:57:05.153

尝试

```
<reference name="head">
        <action method="addItem"><type>js_css</type><name>calendar/calendar-win2k-1.css</name><params/><!--<if/><condition>can_load_calendar_js</condition>--></action>
        <action method="addItem"><type>js</type><name>calendar/calendar.js</name><!--<params/><if/><condition>can_load_calendar_js</condition>--></action>
        <action method="addItem"><type>js</type><name>calendar/calendar-setup.js</name><!--<params/><if/><condition>can_load_calendar_js</condition>--></action>
</reference> 
```

在你的 calendar.phtml

```
<input type="text" name="date_from" id="date_from" value="" />

<script type="text/javascript">
Calendar.setup({
    inputField : 'date_from',
    ifFormat : '%m/%e/%y',
    button : 'date_from_trig',
    align : 'Bl',
    singleClick : true
});
</script> 
```

在页脚.phtml

```
echo $this->getLayout()->createBlock(
    'core/template',
    'calendar_block',
    array('template' => 'path/to/calendar.phtml')
)->toHtml(); 
```

请参阅[Magento - 如何添加返回 DD/MM/YY 而不是 MM/DD/YY 的前端日期选择器？](https://stackoverflow.com/questions/8335456/magento-how-do-i-add-a-frontend-date-picker-that-returns-dd-mm-yy-instead-of-m)

# tfs - 团队领导的最佳 TFS 查看器

> ID：14765377
> 
> 赞同：3
> 
> 时间：2013-02-08T03:49:30.473
> 
> 标签：tfs

有没有一种工具可以让您快速查看一整天内的所有 TFS 更改。

本质上，我不想看到**一次提交**的所有更改，**而是希望看到一天中完成的所有更改。**本质上，查看器将所有更改合并到一个视图中。 *我们正在使用新的 VisualStudio.com 托管的 TFS*

 **** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T09:42:51.500

[Team Foundation Sidekicks](http://www.attrice.info/cm/tfs/)是一个很棒的工具，可以在 Visual Studio 之外使用，以快速查看文件的更改和当前状态。

以下是简要概述：

*   历史 Sidekick 应用程序窗格提供以下功能：

    查看带有文件和文件夹的版本控制树（类似于源代码管理资源管理器） 按名称搜索项目（文件或文件夹）并在版本控制树中选择找到的项目 查看所有用户或按用户过滤的选定项目历史 将历史列表导出到 CSV 文件比较历史中选择的文件版本查看选定项属性和待定更改查看选定项分支树和选定分支属性查看选定项合并历史记录；可以单独查看以选定项目作为合并目标（合并到）或以选定项目作为源（合并自）执行的所有合并

*   比较历史中的合并目标和源文件版本 在树视图中查看选定的项目合并候选；可以从列表中选择单个合并源比较合并候选文件版本与目标文件的最新版本查看所有用户或按用户过滤的选定项目标签；显示的信息包括标签中的项目版本比较两个标签之间的文件版本查看包含变更集的所有列表中支持的变更集详细信息状态 Sidekick 应用程序窗格提供以下功能：
*   查看按特定用户名过滤的挂起更改树（用户可以从有效用户列表中选择）、TFS 项目名称和更改创建日期范围 查看挂起更改树中的锁定图标指示以轻松识别锁定 查看选定项中挂起更改的详细列表树中的文件夹 自定义详细列表格式并将列表导出到 CSV 文件 解锁一个或多个锁定的文件/文件夹 撤消对文件/文件夹的一项或多项待定更改

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:56:12.477

在 VS“源代码管理资源管理器”中，您可以右键单击文件夹并选择“比较”。在该对话框中，您可以选择将源代码管理文件夹与其自身进行比较，为第二个实例选择特定的变更集或日期。这将为您提供最后一天更改内容的差异。

![在此处输入图像描述](../Images/6eabcc678ed99ecdba1d5ec9d04e6219.png)***

# jquery - jquery setTimeout 或 setInterval

> ID：14765379
> 
> 赞同：0
> 
> 时间：2013-02-08T03:49:41.077
> 
> 标签：jquery, html, css

我有以下带有 if 条件的代码

```
if(oldMembership++ <= newMembership) {
    var digit;
    $('ul#indexSiteCounterBottom').empty();

    for(i = 0; i < 9; i++) {
        if(membership.toString()[i] == '_') {
            digit = '&nbsp;';
        } else {
            digit = membership.toString()[i];
        }

        $('ul#indexSiteCounterBottom').append('<li>'+digit+'</li>');
        $('ul#indexSiteCounterBottom li:nth-child(3n)').addClass('extra-margin');
    }
} 
```

如果满足“if”条件，则运行其余代码。

对于“if”的每个循环，我希望能够将以下代码的运行速度减慢大约 500 毫秒。

我尝试放入 setInterval 和 setTimeout 但我之前没有使用过它们，并且“if”条件立即完成了所有循环。

如何向其中添加 setInterval 或 SetTimeout 以便每个“if”循环延迟 500 毫秒？一旦满足“if”条件，它应该退出计时器/if 条件。

非常感谢你...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T03:53:07.510

```
if(membership.toString()[i] == '_') {
    digit = '&nbsp;';
    setTimeout(function () {
        digitThing(digit);
    }, 500);
}
else {
    digit = membership.toString()[i];
    digitThing(digit);
}
function digitThing(digit) {
    $('ul#indexSiteCounterBottom').append('<li>'+digit+'</li>');
    $('ul#indexSiteCounterBottom li:nth-child(3n)').addClass('extra-margin');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:58:47.273

`setTimeout`是用于延迟函数执行的函数

你可以像这样使用它：

```
var to = setTimeout(function() {

    // Your code that will be executed after 500 ms

}, 500); 
```

如果您想在 500 毫秒之前取消呼叫，您可以使用`to`var 并调用`clearTimout(to)`. 这将取消超时，并且您的函数将不会在 500 毫秒后运行。

`setInterval`与 不同，`setTimeout`因为它将每 500 毫秒运行一次您的函数，无需任何操作。它可以被视为一个调度器。

你可以像这样使用它：

```
var iv = setInterval(function() {

    // Your code that will be executed every 500ms

}, 500); 
```

如果要停止计划的进程，可以使用`iv`var 并调用`clearInterval(iv)`. 这将取消 qscheduler。

`setTimeout`在您的情况下，如果您想在每次通话中保持联系，您应该使用。

例如，您可以编写如下内容：

```
// Launch the task if the main test is ok
if(oldMembership++ <= newMembership) {

    // Empty your main UL
    $('ul#indexSiteCounterBottom').empty();

    // Run the first process without timeout
    runProcess(0, 500);
}

// Run one process
function runProcess(i, ms)
{
    // Stop the recursivity when the end of the string is reached
    if (i >= membership.toString().length)
        return;

    // Set default value for the digit
    var digit = membership.toString()[i];

    // Override the digit if requiered
    if(digit == '_')
        digit = '&nbsp;';

    // Finally process the digit
    $('ul#indexSiteCounterBottom').append('<li>'+digit+'</li>');
    $('ul#indexSiteCounterBottom li:nth-child(3n)').addClass('extra-margin');

    // Run the next process in 500ms
    setTimout(function() {
        runProcess(i+1, ms);
    }, ms);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T04:42:47.340

我认为这可以解决您的问题...

```
function execute_if_membership(){
    setTimeout(function(){
        var digit;
        $('ul#indexSiteCounterBottom').empty();

        for(i = 0; i < 9; i++) {
            if(membership.toString()[i] == '_') {
                digit = '&nbsp;';
            } else {
                digit = membership.toString()[i];
            }

            $('ul#indexSiteCounterBottom').append('<li>'+digit+'</li>');
            $('ul#indexSiteCounterBottom li:nth-child(3n)').addClass('extra-margin');
        }

        // Execute again if needed
        if(oldMembership++ <= newMembership) {execute_if_membership();}
        else{ /* what to do else? maybe call another function */ }
    },500);
}

// execute by the first time
if(oldMembership++ <= newMembership) {execute_if_membership();} 
```

**编辑：**使用此代码，您可以第一次调用该函数。函数等待 500 毫秒并执行，在函数的最后，它检查是否需要调用另一个时间（循环），如果需要，它会再次执行。后面如果要执行一些代码，需要把它放在condition的ELSE里面，因为如果下面再放一个代码，它会不等待就执行。那是因为`setTimeout`and`setInterval`使代码异步并继续执行代码。

# c# - 尝试将值设置为 html 控件时出现错误

> ID：14765380
> 
> 赞同：0
> 
> 时间：2013-02-08T03:49:41.490
> 
> 标签：c#, asp.net

我接下来做：

在 Page_Load 事件中：

```
string linkPatches = "PageProcessor.aspx?Page=Patches.aspx&system=" + Request.QueryString["system"]; 
```

在 html 中：

```
<li><a href="<% =linkPatches %>" style="color:White;">Патчи</a></li> 
```

我得到下一个错误：

```
CS0103: The name 'linkPatches' does not exist in the current context 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T03:53:42.760

您的变量`linkPatches`是`Page_Load`事件范围的本地变量。

您必须在类级别声明它才能工作：

```
public class Your_Page_Name_Here : Page {
    /* public or */ protected string linkPatches;

    public void Page_Load(/*etc*/) {
        linkPatches = "PageProcessor.aspx?Page=Patches.aspx&system=" + Request.QueryString["system"];
    }
} 
```

这意味着它现在可用于页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:56:22.220

您要么需要像 Simon 展示的那样将变量设为 public/protected，要么可以使用 asp 控件：

代码正面：

```
<asp:HyperLink ID="_linkPatches" runat="server">Патчи</asp:HyperLink> 
```

后面的代码：

```
_linkPatches.NavigateUrl = "PageProcessor.aspx?Page=Patches.aspx&system=" + Request.QueryString["system"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T03:55:48.293

确保页面中有一个具有该名称的控件，并且它包含在 .designer 文件中。如果没有，则根据需要添加或删除它。

设计师有时会与页面的标记不同步。或者，右键单击导致错误的页面并选择“转换为 Web 应用程序”以强制同步。

# input - 读取未知长度的字符串

> ID：14765382
> 
> 赞同：15
> 
> 时间：2013-02-08T03:49:48.070
> 
> 标签：input, fortran, character, string-length, fortran95

我的任务是编写一个 Fortran 95 程序，该程序将从文件中读取字符输入，然后（开始）简单地将其再次吐出。棘手的部分是这些输入行的长度不同（没有给出最大长度）并且文件中可以有任意数量的行。

我用过

```
 do
      read( 1, *, iostat = IO ) DNA    ! reads to EOF -- GOOD!!
      if ( IO < 0 ) exit               ! if EOF is reached, exit do
      I = I + 1
      NumRec = I                       ! used later for total no. of records
      allocate( Seq(I) )
      Seq(I) = DNA
      print*, I, Seq(I)
      X = Len_Trim( Seq(I) )           ! length of individual sequence
      print*, 'Sequence size: ', X
      print*
    end do 
```

但是，我最初的陈述清单

```
 character(100), dimension(:), allocatable :: Seq
    character(100)  DNA 
```

和适当的整数等。

我想我要问的是是否有任何方法不首先列出字符串的大小。假设我有一个 200 多个字符的 DNA 字符串，然后另一个只有 25 个字符，有没有一种方法可以让程序只读取其中的内容而不需要包含所有额外的空白？这可以在不需要使用的情况下完成`len_trim`吗，因为它不能在声明语句中引用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T06:34:38.197

要在 Fortran 95 中逐步读取记录，请使用非高级输入。例如：

```
CHARACTER(10) :: buffer
INTEGER :: size
READ (unit, "(A)", ADVANCE='NO', SIZE=size, EOR=10, END=20) buffer 
```

每次调用时将读取最多 10 个字符（缓冲区的长度）。一旦整个记录被一系列一个或多个非前进读取读取，文件位置只会前进到下一条记录（下一行）。

除非文件结束条件，`size`否则变量将定义为`buffer`每次执行 read 语句时读入的实际字符数。

和`EOR`和`END`说明符用于分别在记录结束或文件结束条件发生时控制执行流程（执行将跳转到适当标记的语句）。您也可以使用`IOSTAT`说明符来检测这些条件，但用于这两个条件的特定负值取决于处理器。

`size`您可以在特定记录中求和以计算出该特定记录的长度。

将这样的非高级读取包装在一个适当地检测文件结尾和记录结尾的循环中，并且您拥有增量读取部分。

在 Fortran 95 中，局部字符变量的长度规范必须是规范表达式 - 本质上是一个可以在包含变量声明的范围的第一个可执行语句之前安全评估的表达式。常量代表最简单的情况，但过程中的规范表达式可能涉及该过程的虚拟参数等。

读取任意长度的整个记录​​是一个多阶段的过程：

*   通过使用一系列增量读取来确定当前记录的长度。当记录结束条件发生时，对特定记录的这些增量读取完成，此时文件位置将移动到下一条记录。
*   `Backspace`文件返回到感兴趣的记录。
*   调用一个过程，将当前记录的长度作为虚拟参数传递。在该过程内部有一个字符变量，其长度由虚拟参数给出。
*   在该调用过程中，使用正常的前进输入将当前记录读入该字符变量。
*   对该字符变量进行进一步处理！

请注意，每条记录最终都会被读取两次——一次是为了确定它的长度，第二次是为了将数据实际读取到正确的“长度”字符变量中。

存在使用长度为 1 的可分配（或自动）字符数组的替代方法。总体策略是一样的。以常见的 ISO_VARYING_STRING 实现中的 Get 过程的[代码](http://www.fortran.com/iso_varying_string.f95)为例。

Fortran 2003 引入了延迟长度字符变量，其长度可以由分配语句中的任意表达式指定，或者对于可分配变量，由赋值语句中右侧的长度指定。这（与其他“可分配”增强功能结合使用）允许确定记录长度的渐进式读取也可以构建保存记录内容的字符变量。您的主管需要更新他的 Fortran 环境。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-22T11:23:35.030

这是 Fortran 2003 的一个函数，它设置一个与输入字符串长度完全相同的可分配字符串 (InLine)（可选修剪），或者返回 .false。如果文件结束

```
function ReadLine(aunit, InLine, trimmed) result(OK)
integer, intent(IN) :: aunit
character(LEN=:), allocatable, optional :: InLine
logical, intent(in), optional :: trimmed
integer, parameter :: line_buf_len= 1024*4
character(LEN=line_buf_len) :: InS
logical :: OK, set
integer status, size

OK = .false.
set = .true.
do
    read (aunit,'(a)',advance='NO',iostat=status, size=size) InS
    OK = .not. IS_IOSTAT_END(status)
    if (.not. OK) return
    if (present(InLine)) then
        if (set) then
            InLine = InS(1:size)
            set=.false.
        else
            InLine = InLine // InS(1:size)
        end if
    end if
    if (IS_IOSTAT_EOR(status)) exit
end do
if (present(trimmed) .and. present(InLine)) then
    if (trimmed) InLine = trim(adjustl(InLine))
end if

end function ReadLine 
```

例如，用单位“aunit”对文件中的所有行做一些事情

```
 character(LEN=:), allocatable :: InLine

 do while (ReadLine(aunit, InLine))
   [.. something with InLine]
 end do 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T09:39:43.750

我使用了以下内容。让我知道它是否比您的更好或更差。

```
!::::::::::::::::::::: SUBROUTINE OR FUNCTION :::::::::::::::::::::::::::::::::::::::                                                                                                                                   
!__________________ SUBROUTINE lineread(filno,cargout,ios) __________________________                                                                                                                                   
subroutine lineread(filno,cargout,ios)                                                                                                                                                                                  
Use reallocate,ErrorMsg,SumStr1,ChCount                                                                                                                                                                                 
! this subroutine reads                                                                                                                                                                                                 
! 1\. following row in a file except a blank line or the line begins with a !#*                                                                                                                                          
! 2\. the part of the string until first !#*-sign is found or to end of string                                                                                                                                           
!                                                                                                                                                                                                                       
! input Arguments:                                                                                                                                                                                                      
! filno (integer)             input file number                                                                                                                                                                         
!                                                                                                                                                                                                                       
! output Arguments:                                                                                                                                                                                                     
! cargout (character)     output chArActer string, converted so that all unecessay spaces/tabs/control characters removed.                                                                                              

implicit none                                                                                                                                                                                                           
integer,intent(in)::filno                                                                                                                                                                                               
character*(*),intent(out)::cargout                                                                                                                                                                                      
integer,intent(out)::ios                                                                                                                                                                                                
integer::nlen=0,i,ip,ich,isp,nsp,size                                                                                                                                                                                   
character*11,parameter::sep='=,;()[]{}*~'                                                                                                                                                                               
character::ch,temp*100                                                                                                                                                                                                  
character,pointer::crad(:)                                                                                                                                                                                              

nullify(crad)                                                                                                                                                                                                           
cargout=''; nlen=0; isp=0; nsp=0; ich=-1; ios=0                                                                                                                                                                         
Do While(ios/=-1) !The eof() isn't standard Fortran.                                                                                                                                                                    
READ(filno,"(A)",ADVANCE='NO',SIZE=size,iostat=ios,ERR=9,END=9)ch ! start reading file                                                                                                                                  
! read(filno,*,iostat=ios,err=9)ch;                                                                                                                                                                                     
    if(size>0.and.ios>=0)then                                                                                                                                                                                           
     ich=iachar(ch)                                                                                                                                                                                                     
    else                                                                                                                                                                                                                
     READ(filno,"(A)",ADVANCE='no',SIZE=size,iostat=ios,EOR=9); if(nlen>0)exit                                                                                                                                          
    end if                                                                                                                                                                                                              
    if(ich<=32)then        ! tab(9) or space(32) character                                                                                                                                                              
        if(nlen>0)then                                                                                                                                                                                                  
     if(isp==2)then                                                                                                                                                                                                       
        isp=0;                                                                                                                                                                                                            
     else                                                                                                                                                                                                                 
        isp=1;                                                                                                                                                                                                            
     end if                                                                                                                                                                                                               
eend if; cycle;                                                                                                                                                                                                         
    elseif(ich==33.or.ich==35.or.ich==38)then !if char is comment !# or continue sign &                                                                                                                                 
     READ(filno,"(A)",ADVANCE='yes',SIZE=size,iostat=ios,EOR=9)ch; if(nlen>0.and.ich/=38)exit;                                                                                                                          
    else                                                                                                                                                                                                                
     ip=scan(ch,sep);                                                                                                                                                                                                   
     if(isp==1.and.ip==0)then; nlen=nlen+1; crad=>reallocate(crad,nlen); nsp=nsp+1; endif                                                                                                                               
     nlen=nlen+1; crad=>reallocate(crad,nlen); crad(nlen)=ch;                                                                                                                                                           
     isp=0; if(ip==1)isp=2;                                                                                                                                                                                             
    end if                                                                                                                                                                                                              
end do                                                                                                                                                                                                                  
9 if(size*ios>0)call ErrorMsg('Met error in reading file in [lineread]',-1)                                                                                                                                             
! ios<0: Indicating an end-of-file or end-of-record condition occurred.                                                                                                                                                 
if(nlen==0)return                                                                                                                                                                                                       
!write(6,'(a,l)')SumStr1(crad),eof(filno)                                                                                                                                                                               
!do i=1,nlen-1; write(6,'(a,$)')crad(i:i); end do; if(nlen>0)write(6,'(a)')crad(i:i)                                                                                                                                    
 cargout=SumStr1(crad)                                                                                                                                                                                                  
 nsp=nsp+1; i=ChCount(SumStr1(crad),' ',',')+1;                                                                                                                                                                         
if(len(cargout)<nlen)then                                                                                                                                                                                               
 call ErrorMsg(SumStr1(crad)// " is too long!",-1)                                                                                                                                                                      
!elseif(i/=nsp.and.nlen>=0)then                                                                                                                                                                                         
! call ErrorMsg(SumStr1(crad)// " has unrecognizable data number!",-1)                                                                                                                                                  
end if                                                                                                                                                                                                                  
end subroutine lineread 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-01T18:17:32.643

我正在使用 Fortran 90 来执行此操作：

```
X = Len_Trim( Seq(I) )           ! length of individual sequence
write(*,'(a<X>)') Seq(I)(1:X) 
```

您可以简单地将 Seq 声明为一个大字符串，然后在写出它时对其进行修剪。我不知道这个解决方案有多洁净，但它确实适用于我的目的。我知道有些编译器不支持“可变格式表达式”，但是有各种变通方法几乎可以简单地做同样的事情。

[GNU Fortran 变量表达式解决方法。](https://gcc.gnu.org/onlinedocs/gfortran/Variable-FORMAT-expressions.html)

# spring - Spring - 依赖注入的好处

> ID：14765386
> 
> 赞同：1
> 
> 时间：2013-02-08T03:50:35.110
> 
> 标签：spring

我是 Spring Framework 的新手，当然，关于 Spring 的第一件事就是依赖注入。现在我可能错了，因为我刚开始学习 Spring 框架（尤其是关于依赖注入），但我认为将 bean 依赖注入到所述对象并不意味着事务数据。由于 bean 定义例如在 spring.xml（蓝图）中定义，因此它不是用于事务数据，而是用于静态和少量数据。我没有看到有任何方法可以使用动态 XML（在运行时创建）将数千个事务对象注入另一个对象。

那么我做对了吗？如果是这样，依赖注入的真正好处是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T06:21:28.433

使用依赖注入容器而不是让组件满足它们自己的依赖有几个好处。其中一些好处是：

1.  减少依赖

2.  减少依赖携带

3.  更多可重用代码

4.  更可测试的代码

5.  更具可读性的代码

[此处](http://tutorials.jenkov.com/dependency-injection/dependency-injection-benefits.html)更详细地解释了这些好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T05:27:14.993

没错，事务数据（例如：表示表行的数据）通常不会以声明方式注入。Spring DI（依赖注入）通常用于处理多个类之间的协作。

我见过的常见示例是 DAO（数据访问对象）和 MVC（模型视图控制器）模式。在企业环境中，通常有一个项目包含数十个或数百个数据库表——因此有数十个/数百个 DAO 类被注入到控制器类中。

如果不使用 DI，则需要有意识地管理应该首先创建哪个 DAO，以及应该将哪个 DAO 注入到哪个控制器等。（这是一场噩梦）

代码重构（应该）也很常见。业务需求总是在不断变化。如果没有 DI，一个简单的重构可能会导致“哪个类取决于什么和在哪里”的巨大而棘手的解开

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-01T06:52:17.720

在我读过的所有关于依赖注入的文章中，[这](http://www.javacreed.com/why-should-we-use-dependency-injection/)是迄今为止最好的。

如果您将**Spring**用于 DI，我建议您阅读有关**@primary**注释的信息。Spring 使为给定服务选择所需的实现（从多个实现中）变得更加容易。[这篇](https://www.baeldung.com/spring-primary)文章不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-12T08:20:13.350

依赖注入和控制反转改变了控制流，为特定组件增加了管理去依赖图和管理它的连接方式的责任。结果是依赖和依赖之间的极大解耦，提高了代码的可维护性、应用程序的可靠性和可测试性。

# java - 这是对全局变量的可接受使用吗？

> ID：14765387
> 
> 赞同：2
> 
> 时间：2013-02-08T03:50:42.610
> 
> 标签：java, design-patterns

我正在编写一个相当复杂的翻译模块，它本质上是在一种逻辑表示形式和 Java 代码之间进行翻译。它跨越了几个相互分离的类。

我的问题是我需要跟踪一组相当广泛的关键字，这些关键字需要插入到变量名中。这些关键字必须可供模块中的所有类访问，并且易于更改。

我知道就设计而言，使用全局变量是一个危险信号，但是在这种情况下，创建一个除了提供对所述关键字的静态访问之外什么都不做的类是否可以接受？例如：

```
public final class KeyWords {
    public static final String SELF = "self";
    public static final String RESULT = "callResult";
    // etc
} 
```

我自己的想法是它的工作方式有点像一个简单的配置类。我发现这比使用调解器或在方法调用之间传递一些其他存储桶类更合理，因为数据定义得相当好，重要的是，在运行时不受修改。

或者，将所有这些关键字放入接口中，让我的所有类都继承它会更好吗？虽然它可以工作，但感觉不对劲。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T04:11:42.733

这不是有史以来最糟糕的事情，但它有点过时了。如果你使用的是 Java 1.5 或更高版本，an`enum`会更好；例如，它为您提供类型安全性。

```
public enum KeyWord {
    SELF("self"),
    RESULT("callResult")
    ;

    public String getKeyword() {
        return keyword;
    }

    private KeyWord(String keyword) {
        this.keyword = keyword;
    }

    private final String keyword;
} 
```

你是对的，“将它们塞进界面”的方法感觉不对。接口是关于指定*行为*的，具有静态终结的无方法接口不提供。从 Java 1.5 开始，您可以使用[静态导入](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)来获得同样的好处，而不会出现“代码污染”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:23:05.730

如果您要跨多个不相互继承的类使用相同的关键字集，那么我建议只创建一个静态类，该类读取包含所有这些关键字的文本文件。

如果您使用这种方法，那么您可以使用专业人士总是喋喋不休的“代码一次使用无处不在”的意识形态。

- 创建一个静态类

- 读入一个保存了所有关键字的文本文件

- 编写几个检索和比较关键字的函数

- 在您想要的每个课程中使用它，而不必担心碎片化。

使用此方法还可以轻松更新快照，因为您可以简单地打开文本文件更改添加或删除您想要的内容，然后在每个实现它的类中修复它。

# php - 仅出现在第一个和最后一个选项的复选框

> ID：14765391
> 
> 赞同：0
> 
> 时间：2013-02-08T03:51:21.260
> 
> 标签：php

下面的代码的作用是检索完整选项类型中的各个选项。例如，如果 $option 是 AD，那么通过使用explode，它将能够显示每个单独的选项以输出 ABC D。

现在在这个例子中，我希望 ABCD 每个都有自己的复选框。但是使用下面的代码，它只是为 A 和 D 创建复选框，它应该为`A`, `B`, `C`,执行第一个和最后一个选项`D`。如何才能做到这一点？

```
function ExpandOptionType($option) { 
    $options = explode('-', $option);
    foreach($options as $indivOption) {
        echo '<p><input type="checkbox" name="options[]" id="option-' . $indivOption . '" value="' . $indivOption . '" /><label for="option-' . $indivOption . '">' . $indivOption . '</label></p>';
    }
    if(count($options) > 1) {
        $start = array_shift($options);
        $end = array_shift($options);
        do {
            $options[] = $start;
        }while(++$start <= $end);
     }
     else{
        $options = explode(' or ', $option);
     }
     return implode(" ", $options);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:16:22.183

好吧，我不太确定`if-else`你的函数的作用是什么，但这是你在想的吗？

```
<?php foreach (range('A','D') as $letter): ?>
  <p>
    <input type="checkbox" name="options[]" id="option-<?php echo $letter ?>" value="<?php echo $letter ?>" />
    <label for="option-<?php echo $letter ?>"><?php echo $letter ?></label>
  </p>
<?php endforeach ?> 
```

或者，在一个函数中：

```
function ExpandOptionType($from, $to) {
    $output = '';
    $range = range($from, $to);
    foreach ($range as $letter) {
        $output .= '<p>';
        $output .= "<input type=\"checkbox\" name=\"options[]\" id=\"option-{$letter}\" value=\"{$letter}\" />";
        $output .= "<label for=\"option-{$letter}\">{$letter}</label>";
        $output .= '</p>';
    }
    return $output;
}
echo ExpandOptionType('A', 'D'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T07:20:05.630

```
function ExpandOptionType($option) { 
    $options = explode('-', $option);
    if(count($options) > 1) {
        $start = array_shift($options);
        $end = array_shift($options);
        do {
            $options[] = $start;
        }while(++$start <= $end);
     }
     else{
        $options = explode(' or ', $option);
     }
     foreach($options as $indivOption) {
         echo '<p><input type="checkbox" name="options[]" id="option-' . $indivOption . '" value="' . $indivOption . '" /><label for="option-' . $indivOption . '">' . $indivOption . '</label></p>';
     }
     return implode(" ", $options);
} 
```

这样，您首先更改选项数组，然后创建复选框。

# go - 为什么我在 Go HTML 模板输出中看到 ZgotmplZ？

> ID：14765395
> 
> 赞同：35
> 
> 时间：2013-02-08T03:51:50.260
> 
> 标签：go, go-templates

当我调用 Go 模板函数来输出 HTML 时，它会显示`ZgotmplZ`.

示例代码：

[http://play.golang.org/p/tfuJa_pFkm](http://play.golang.org/p/tfuJa_pFkm)

```
package main

import (
    "html/template"
    "os"
)

func main() {
    funcMap := template.FuncMap{
        "printSelected": func(s string) string {
            if s == "test" {
                return `selected="selected"`
            }
            return ""
        },

        "safe": func(s string) template.HTML {
            return template.HTML(s)
        },
    }
    template.Must(template.New("Template").Funcs(funcMap).Parse(`
    <option {{ printSelected "test" }} {{ printSelected "test" | safe }} >test</option>
    `)).Execute(os.Stdout, nil)

} 
```

输出：

```
<option ZgotmplZ ZgotmplZ >test</option> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-10T10:11:24.283

“ZgotmplZ”是一个特殊值，表示不安全的内容在运行时到达了 CSS 或 URL 上下文。该示例的输出将是：

```
 <img src="#ZgotmplZ"> 
```

您可以在模板 funcMap 中添加一个 safe 和 attr 函数：

包主

```
import (
    "html/template"
    "os"
)

func main() {
    funcMap := template.FuncMap{
        "attr":func(s string) template.HTMLAttr{
            return template.HTMLAttr(s)
        },
        "safe": func(s string) template.HTML {
            return template.HTML(s)
         },
    }

    template.Must(template.New("Template").Funcs(funcMap).Parse(`
    <option {{  .attr |attr }} >test</option>
        {{.html|safe}}
     `)).Execute(os.Stdout,   map[string]string{"attr":`selected="selected"`,"html":`<option selected="selected">option</option>`})
} 
```

输出将如下所示：

```
<option selected="selected" >test</option>
<option selected="selected">option</option> 
```

你可能想要定义一些其他的函数，可以将字符串转换为 template.CSS、template.JS、template.JSStr、template.URL 等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-18T18:07:50.357

`<img src="{{myfunction}}">`我在 myfunction 返回编码图像的位置遇到了类似的问题。

最后我解决了这个问题，而不是字符串函数 return `template.URL(mystring)`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T03:51:50.260

您试图在 template/html 认为不安全的地方输出 HTML（例如，在 HTML 元素内，如下所示：

```
<option {{ printSelected }}> 
```

我找不到任何方法来说服它是安全的（包括返回 template.HTML 而不是字符串）；我发现的唯一替代方法是重写模板，在此示例中使用 bool 输出代替：

```
<option {{ if printSelected }}selected{{ end }}> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-07T20:46:56.373

```
package main

import (
    "html/template"
    "os"
)

type T struct {
    HTML template.HTML
    ATTR template.HTMLAttr
    URL  template.URL
    JS   template.JS
    CSS  template.CSS
}

func main() {

    data := T{
        HTML: `<div>test div</div>`,
        ATTR: `selected="selected"`,
        URL:  `https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg`,
        CSS:  `font-size: 15px`,
        JS:   `console.log("hello world")`,
    }

    template.Must(template.New("Template").Parse(`
        {{.HTML}}
        <option {{.ATTR}} style="{{.CSS}}">test</option>
        <script>{{.JS}}</script>
        <img src="{{.URL}}">
    `)).Execute(os.Stdout, data)
} 
```

输出

```
<div>test div</div>
<option selected="selected" style="font-size: 15px">test</option>
<script>console.log("hello world")</script>
<img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg"> 
```

[操场示例](https://play.golang.org/p/-OiQWkQuqkv)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-25T13:39:32.453

最简单的方法：

```
import "html/template"
yourhref = template.URL(yourhref) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-12T17:59:05.227

您应该将字符串包装在一个`HTMLAttr`中，该字符串专为插入尖括号之间的文本而设计。根据文档：

[https://golang.org/pkg/html/template/#HTMLAttr](https://golang.org/pkg/html/template/#HTMLAttr)

> HTMLAttr 封装来自可信来源的 HTML 属性，例如` dir="ltr"`.
> 
> 使用这种类型会带来安全风险：封装的内容应该来自受信任的来源，因为它将逐字包含在模板输出中。
> 
> `type HTMLAttr string`

# python - 识别或统计列表中连续重复的数字（实际缺失值：nan）

> ID：14765401
> 
> 赞同：1
> 
> 时间：2013-02-08T03:52:30.350
> 
> 标签：python, run-length-encoding

基本上，我想确定数据集中的缺失值是否连续重复。如果数据集中有无数重复的缺失值，我想知道每个连续重复的缺失值集的长度是否高于某个数字。

例如：

```
data =['1', '0', '9', '31', '11', '12', 'nan', '10', '44', '53', '12', '66', '99', '3', '2', '6.75833',....., 'nan', 'nan', 'nan', '3', '7', 'nan', 'nan'] 
```

在`data`上面，总数`'nan'`为 6，可以用 来计算`data.count('nan')`。但是，我想知道的是缺失值可以连续重复多少。对于这个数据，答案是 3。

很抱歉我没有展示我的示例代码，但我在这方面是一个非常新手，我对编码一无所知。

任何想法、帮助或提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T04:11:43.323

这看起来像是[*itertools.groupby()*](http://docs.python.org/2.7/library/itertools.html#itertools.groupby)的工作：

```
>>> from itertools import groupby
>>> data =['1', '0', '9', '31', '11', '12', 'nan', '10', '44', '53', 
           '12', '66', '99', '3', '2', '6.75833', 'nan', 'nan', 'nan', 
           '3', '7', 'nan', 'nan']
>>> [len(list(group)) for key, group in groupby(data) if key == 'nan']
[1, 3, 2] 
```

请注意，如果您的代码实际上具有真正的 NaN 而不是字符串，`if key == 'nan'`则应将相等性测试替换为`math.isnan(key)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-04T12:26:03.760

或者你可以试试这个更快：

```
grouped_L = [sum(1 for i in group) for k,group in groupby(L)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-29T12:06:26.173

使用[pyrle](https://github.com/pyranges/pyrle)提高速度。在此解决方案中，我将 nan 替换为不在数据中的数字 (-42)。这是因为 nan 对于 rles 来说是一个困难的值，`np.nan != np.nan`因此没有 nan 被视为连续的。

```
import numpy as np

data =['1', '0', '9', '31', '11', '12', 'nan', '10', '44', '53', '12', '66', '99', '3', '2', '6.75833', 'nan', 'nan', 'nan', '3', '7', 'nan', 'nan']
arr = np.array([np.float(f) for f in data])
assert not -42 in arr

from pyrle import Rle

r = Rle(arr)
arr[np.isnan(arr)] = -42
is_nan = r.values == -42
np.max(r.runs[is_nan])
# 3 
```

# android - android录制视频并立即播放

> ID：14765404
> 
> 赞同：1
> 
> 时间：2013-02-08T03:52:50.273
> 
> 标签：android, orientation, android-videoview, mediarecorder

大家好，我一直在尝试用前置摄像头录制视频并使用 videoview 和 mediacontroller 播放。但是面对方向问题，当我将相机方向设置为 90 度（肖像）录制视频时，但是当播放录制的视频时，它不会以纵向模式播放，而是以横向模式播放。还尝试将媒体记录器对象的 setOrientationHint 方法设置为 180 度。仍然没有成功。希望有人能够面对或解决这个问题，并希望得到更好的回应。提前致谢。如果需要，我也可以发布我的代码片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:56:16.223

将视频视图旋转 90 度。

# c++ - C中的函数序言和结语

> ID：14765406
> 
> 赞同：15
> 
> 时间：2013-02-08T03:53:06.187
> 
> 标签：c++, c, assembly, stack-frame, epilogue

我知道嵌套函数调用中的数据会进入堆栈。堆栈本身实现了一个分步方法，用于在函数被调用或返回时从堆栈中存储和检索数据。这些方法的名称最广为人知的是 Prologue 和结语。

我尝试搜索有关此主题的材料但没有成功。你们知道关于函数序言和结尾如何在 C 中通常工作的任何资源（站点、视频、文章）吗？或者如果你能解释会更好。

PS：我只是想要一些一般的看法，而不是太详细。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-08T03:56:31.397

有很多资源可以解释这一点：

*   [**功能序言**](http://en.wikipedia.org/wiki/Function_prologue)（维基百科）
*   [**x86 反汇编/调用约定**](http://en.wikibooks.org/wiki/X86_Disassembly/Calling_Conventions)（WikiBooks）
*   [**编写 Prolog/Epilog 代码的注意事项**](http://msdn.microsoft.com/en-us/library/6xy06s51(v=vs.80).aspx)(MSDN)

仅举几例。

基本上，正如您所描述的，“堆栈”在执行程序时有多种用途：

1.  在调用函数时跟踪返回的位置
2.  在函数调用的上下文中存储局部变量
3.  将参数从调用函数传递给被调用者。

序言是函数开始时发生的事情。它的职责是设置被调用函数的*栈帧*。结语正好相反：它是函数中最后发生的事情，其目的是恢复调用（父）函数的堆栈帧。

在 IA-32 (x86) cdecl 中，`ebp`语言使用寄存器来跟踪函数的堆栈帧。处理器使用该`esp`寄存器来指向堆栈上最近添加的值（顶部值）。（在优化的代码中，`ebp`用作帧指针是可选的；其他展开堆栈的方法是可能的，因此实际上不需要花费指令来设置它。）

该`call`指令做了两件事：首先它将返回地址压入堆栈，然后跳转到被调用的函数。紧跟在`call`, 之后`esp`指向堆栈上的返回地址。（所以在函数入口处，设置了一些东西，以便`ret`可以执行将返回地址弹出回 EIP。序言将 ESP 指向其他地方，这也是我们需要尾声的部分原因。）

然后执行序言：

```
push  ebp         ; Save the stack-frame base pointer (of the calling function).
mov   ebp, esp    ; Set the stack-frame base pointer to be the current
                  ; location on the stack.
sub   esp, N      ; Grow the stack by N bytes to reserve space for local variables 
```

此时，我们有：

```
...
ebp + 4:    Return address
ebp + 0:    Calling function's old ebp value
ebp - 4:    (local variables)
... 
```

结语：

```
mov   esp, ebp    ; Put the stack pointer back where it was when this function
                  ; was called.
pop   ebp         ; Restore the calling function's stack frame.
ret               ; Return to the calling function. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T03:58:11.413

1.  [**C 函数调用约定和堆栈**](http://www.csee.umbc.edu/~chang/cs313.s02/stack.shtml)很好地解释了调用堆栈的概念

2.  [**函数序言**](http://en.wikipedia.org/wiki/Function_prologue)简要解释了汇编代码及其方法和原因。

3.  [**功能上的一代**](http://homepage.ntlworld.com./jonathan.deboynepollard/FGA/function-perilogues.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-19T15:37:47.063

我参加聚会已经很晚了，我相信在提出问题后的过去 7 年中，您会对事情有更清晰的理解，当然，如果您选择进一步追问这个问题。但是，我想我仍然会试一试，**尤其是**序言和结语的部分原因。

此外，接受的答案优雅而简单地解释了*结语*和序言的方式，并提供了很好的参考。我只打算用*为什么*（至少是逻辑上的为什么）部分来补充这个答案。

我将从接受的答案中引用以下内容并尝试扩展它的解释。

> 在 IA-32 (x86) cdecl 中，语言使用 ebp 寄存器来跟踪函数的堆栈帧。处理器使用 esp 寄存器指向堆栈中最近添加的值（顶部值）。
> 
> call 指令做了两件事：首先它将返回地址压入堆栈，然后跳转到被调用的函数。调用后， esp 立即指向堆栈上的返回地址。

上面引用的最后一行说`immediately after the call, esp points to the return address on the stack.`

# 为什么？

因此，假设我们当前正在执行的代码有以下情况，如下图（*画得非常糟糕*）所示

[![在此处输入图像描述](../Images/93a1e712db74526e07c738045849464d.png)](https://i.stack.imgur.com/1XrDs.png)

所以我们要执行的下一条指令是，比如地址 2。这就是 EIP 指向的地方。当前指令有一个函数调用（将在内部转换为汇编`call`指令）。

现在理想情况下，因为 EIP 指向下一条指令，那确实是下一条要执行的指令。但是由于当前执行流程路径存在某种转移，（由于 ，现在可以预期`call`）EIP 的值会发生变化。为什么？因为现在可能需要执行另一条指令，可能在其他地方，比如地址 1234（或其他）。但是为了按照程序员的意图完成程序的执行流程，在转移活动完成后，控制必须返回到地址2，因为如果转移没有发生，那应该是接下来应该执行的。让我们将此地址 2 称为`return address`正在生成的上下文中的`call`。

**问题 1**

因此，在转移实际发生之前，返回地址 2 需要临时存储在某个地方。

可以有很多选择将它存储在任何可用的寄存器或某个内存位置等中。但是（我相信有充分的理由）决定将返回地址存储到堆栈中。

所以现在需要做的是递增 ESP（堆栈指针），使得堆栈的顶部现在指向堆栈上的下一个地址。因此，指向地址（例如 292）的 TOS'（增量前的 TOS）现在递增并开始指向地址 293。这就是我们放置`return address 2`. 所以是这样的：

[![在此处输入图像描述](../Images/69906093338d0cead47b5b309321590c.png)](https://i.stack.imgur.com/x40EV.png)

所以看起来现在我们已经实现了将返回地址临时存储在某个地方的目标。我们现在应该开始转移注意力`call`。我们可以。但是有一个小问题。在被调用函数的执行过程中，堆栈指针以及其他寄存器值可以被多次操作。

**问题 2**

因此，尽管我们的返回地址仍然存储在堆栈中的位置 293，但在被调用函数完成执行后，执行流程如何知道它现在应该转到 293 并且它会找到返回地址？

所以（我再次相信有充分的理由）解决上述问题的方法之一可能是将堆栈地址 293（返回地址所在的位置）存储在称为 EBP 的（指定）寄存器中。那么EBP的内容呢？那不会被覆盖吗？当然，这是一个有效的观点。因此，让我们将 EBP 的当前内容存储到堆栈中，然后将此堆栈地址存储到 EBP 中。像这样的东西：

[![在此处输入图像描述](../Images/5a099cab6113337544985185ccfdcebb.png)](https://i.stack.imgur.com/4FAoV.png)

堆栈指针递增。EBP 的当前值（表示为 EBP'），即 xxx，存储在栈顶，即地址 294。现在我们已经对 EBP 的当前内容进行了备份，我们可以放心地将EBP 上的任何其他值。所以我们把当前栈顶地址，也就是地址294，放到EBP中。

有了上述策略，我们就解决了上面讨论的问题 2。如何？所以现在当执行流程想知道它应该从哪里获取返回地址时，它会：

*   首先从 EBP 中获取值并将 ESP 指向该值。在我们的例子中，这将使 TOS（栈顶）指向地址 294（因为这是存储在 EBP 中的内容）。

*   然后它将恢复 EBP 的先前值。为此，它只需取 294（TOS）的值，即 xxx（实际上是 EBP 的旧值），并将其放回 EBP。

*   然后它将递减堆栈指针以转到堆栈中的下一个较低地址，在我们的例子中是 293。因此最终达到 293（请参阅我们的问题 2）。在那里它会找到返回地址，即 2。

*   它最终会将这 2 弹出到 EIP 中，这就是如果没有发生转移，理想情况下应该执行的指令，记住。

而我们刚刚看到的步骤，以及所有杂耍，临时存储返回地址然后检索它正是函数 prolog（在 function 之前`call`）和 epilog（在 function 之前）所做的事情`ret`。*如何*已经回答了，我们也只是回答了*为什么*。

**只是一个结束说明：**为了简洁起见，我没有注意到堆栈地址可能会反过来增长的事实。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2015-03-05T13:50:56.417

每个函数都有相同的序言（函数代码的开头）和结尾（函数的结尾）。

Prologue：Prologue 的结构是这样的： push ebp mov esp,ebp

Epilogue：Prologue 的结构是这样的：leave ret

更详细：[什么是 Prologue 和 Epilogue](http://programmingethicalhackerway.blogspot.in/2015/07/concept-of-function-in-c-hacker-section.html)

# jquery - Jquery自动完成在IE8中不起作用

> ID：14765410
> 
> 赞同：1
> 
> 时间：2013-02-08T03:53:20.367
> 
> 标签：jquery, jquery-ui-autocomplete

[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

```
function getclassno(cat){   
    $.ajax({ 
        type: "POST", 
        url:"reg/data/data.php", 
        data:{
            catogery:cat  
        },
        success: function(data){     
            $.each(data, function (i, elem) {        
                $('#classno').append( new Option(elem.id) );            
            });              
        }
    );

    $result = mysql_query("SELECT SUBJECTCODE  FROM subjectmaster WHERE CATCODE = '$cat'");  
    header('Content-type: application/json');
    $return_arr = array(); 

    while($row = mysql_fetch_array($result))
    {
        $row_array['id']=$row[0];     
        array_push($return_arr,$row_array);    
    }

    echo json_encode($return_arr);         
} 
```

我使用上面的代码来填充数据自动完成。它适用于 Firefox 和 Chrome，但不适用于 IE8

# php - 使用jQuery表单插件上传ajax文件时的错误处理

> ID：14765411
> 
> 赞同：0
> 
> 时间：2013-02-08T03:53:39.477
> 
> 标签：php, file-upload, jquery-forms-plugin

我有一种情况，我坚持在 jquery form-plugin 的 ajax 响应中的文件上传期间捕获适当的错误的想法。

我会通过一些伪代码来了解我想要实现的目标。

我的PHP是：

```
 $file = strtolower($_FILES["myfile"]["name"]);
 $extension = substr($file, strrpos($file, '.') + 1);
 if($extension == 'jpg'){
  // upload the file
 if(move_uploaded_file($_FILES["myfile"]["tmp_name"], $folder . $finalFilename)){
  // do something here like
 echo "<div id='statusContainer'>
<table><tr><td>
<img src='uploads/".$finalFilename."'>
</td></tr>
<tr><td>".$finalts."</td></tr></table>
</div>";
       }
  } else {
  $error = 1; // will give numbers to different errors like filetype error, size error etc..
  } 
```

现在我的 JS 代码是：

```
 (function() {
 var status = $('#status');   
 $('form').ajaxForm({
complete: function(xhr) {
if(xhr.responseText == "// what do i get echoed here so i can run an array and show user appropriate error like size error, type error etc. // "){
     // i want to open a dialog box with correct error message//
} else{
    status.hide().html(xhr.responseText).fadeIn(1000);
    }
  }
   }); 

 })(); 
```

我应该得到在 ajax 响应中回显的错误号并通过一个数组来获取消息吗？但随后我将不得不在 ajax 响应中使用不同的错误号添加很多 if 条件。

请问有人有更合乎逻辑的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:43:49.353

您可以创建一个数组并传递错误[json_encode()](http://php.net/manual/en/function.json-encode.php)并解析来自 ajaxForm 的 json 响应，如 **php 部分：**

```
$responseArr = array();
if( file_is_uploaded ) {
  $responseArr["error"] = "0";
  $responseArr["message"] = "File uploaded success message";
}
else {
  $responseArr["error"] = "1";
  $responseArr["message"] = "Error message here";
}
echo json_encode($responseArr); //pass it as response 
```

**js部分::**

```
$('form').ajaxForm({
  dataType: "json",
  success: function(response) {
      //parse json response and perform accordingly
      console.log( response );
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:45:08.400

为了减少在 JS 中遍历数组并将错误 ID 与描述匹配，您能否将错误描述本身关联到在 ajax 响应中中继？这将使您的 JS 保持精简并保持服务器端的错误处理。

例子：

```
<tr><td>".$finalts."</td></tr></table>
</div>";
}

$error_descriptions = array("Filesize Error", "Extension Error");

} else {
$error = error_descriptions[1]; 
} 
```

# android - java - 如何将类数组的对象从Java返回到JNI？

> ID：14765416
> 
> 赞同：2
> 
> 时间：2013-02-08T03:54:39.240
> 
> 标签：android, native

我正在尝试基于本机库制作一个应用程序。我需要在 jni 中调用 java 方法，但 jni 给出运行时错误。

Java方法代码：这里是Texture是java类。

```
private Texture[] getProductTexture() {
    return mBookDataTexture;
} 
```

JNI代码

```
getProductTextureID = env->GetMethodID(activityClass, "getProductTexture", "()[Lcom/qualcomm/QCARSamples/CloudRecognition/Texture;");
jobjectArray  textureObjectArray =(jobjectArray) env->CallObjectMethod(activityObj, getProductTextureID);
jsize length = (*env)->GetArrayLength(env, jobjectArray);
for(jint i=0; i<length;i++){
    jobject = (*env)->GetObjectArrayElement(env, textureObjectArray , i);
} 
```

# regex - gsub 的倒数

> ID：14765418
> 
> 赞同：6
> 
> 时间：2013-02-08T03:54:45.657
> 
> 标签：regex, r

我有一些我正在使用的 html 代码。我想提取某些字符串。

我想使用**base R**从字符串 x 中提取它：`coleman_l, SMOG4`

这是我所拥有的：

```
x <- "<code>(hi)<a href=\"Read\">auto</a></code>(coleman_l, SMOG4)<br />Read</li>" 
#remove the string (this works)
gsub("a></code>(.+?)<br", "a></code><br", x)

#> gsub("a></code>(.+?)<br", "a></code><br", x)
#[1] "<code>(hi)<a href=\"Read\">auto</a></code><br />Read</li>"

#attempt to extract that information (doesn't work)
re <- "(?<=a></code>().*?(?=)<br)"
regmatches(x, gregexpr(re, x, perl=TRUE)) 
```

错误信息：

```
> regmatches(x, gregexpr(re, x, perl=TRUE)) 
Error in gregexpr(re, x, perl = TRUE) : 
  invalid regular expression '(?<=a></code>().*?(?=)<br)'
In addition: Warning message:
In gregexpr(re, x, perl = TRUE) : PCRE pattern compilation error
        'lookbehind assertion is not fixed length'
        at ')'

    enter code here 
```

**注意**：*标记为正则表达式，但这是 R 特定的正则表达式。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T04:27:03.123

对于这些类型的问题，我会使用反向引用来提取我想要的部分。

```
x <- 
  "<code>(hi)<a href=\"Read\">auto</a></code>(coleman_l, SMOG4)<br />Read</li>" 
gsub(".*a></code>(.+?)<br.*", "\\1", x)
# [1] "(coleman_l, SMOG4)" 
```

如果还应该删除括号，请将它们添加到您要匹配的“纯文本”部分，但请记住它们需要被转义：

```
gsub(".*a></code>\\((.+?)\\)<br.*", "\\1", x)
# [1] "coleman_l, SMOG4" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T04:37:15.240

FWIW，OP 的原始方法只需稍加调整即可。

```
> x
[1] "<code>(hi)<a href=\"Read\">auto</a></code>(coleman_l, SMOG4)<br />Read</li>"
> re <- "(?<=a></code>\\().*?(?=\\)<br)"
> regmatches(x, gregexpr(re, x, perl=TRUE))
[[1]]
[1] "coleman_l, SMOG4" 
```

与其他建议的解决方案相比，这样做的一个优点是，如果有多个匹配的可能性，那么它们都会出现。

```
> x <- '<code>(hi)<a href=\"Read\">auto</a></code>(coleman_l, SMOG4)<br />Read</li><code>(hi)<a href=\"Read\">auto</a></code>(coleman_l_2, SMOG4_2)<br />Read</li>'
> regmatches(x, gregexpr(re, x, perl=TRUE))
[[1]]
[1] "coleman_l, SMOG4"     "coleman_l_2, SMOG4_2" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-08T04:23:36.640

这会奏效，尽管很丑。

```
x<-"<code>(hi)<a href=\"Read\">auto</a></code>(coleman_l, SMOG4)<br />Read</li>"

x2 <- gsub("^.+(\\(.+\\)).+\\((.+)\\).+$","\\2",x)
x2
[1] "coleman_l, SMOG4" 
```

# jquery - 如何使用 CSS 在 HTML 表格中具有垂直记录和标题

> ID：14765432
> 
> 赞同：0
> 
> 时间：2013-02-08T03:56:40.757
> 
> 标签：jquery, html, css

我有这样的 HTML 结构：

```
<table border="1">
<tbody>
    <tr>
        <td>header1</td><td>header2</td><td>header3</td>
    </tr>
    <tr>
        <td>1</td><td>2</td><td>3</td>
    </tr>
    <tr>
        <td>11</td><td>22</td><td>33</td>
    </tr>

</tbody> 
```

我如何使用 CSS 使该表具有像这样的垂直行布局（垂直记录和标题）： http: [//pastebay.net/1181219](http://pastebay.net/1181219)

顺便说一句，是否可以重新定义 HTML 结构，以便问题易于解决？我希望我可以使用 CSS 而不是 JavaScript 来解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T04:03:01.977

使用 JavaScript，您可以通过在单元格上循环来将行转换为列。在第一行，您可以根据第一行的单元格数确定所需的行数。这假设所有行都有相同数量的单元格。

```
var $table = $("<table>");
$("tr").each(function (row) {
    $(this).find("td").each(function (idx) {
        if (row === 0) {
            $table.append($("<tr>").append(this));
        }
        else {
            $table.find('tr').eq(idx).append(this);
        }
    });
});
$table.appendTo("body"); 
```

[http://jsfiddle.net/ExplosionPIlls/tkqRa/](http://jsfiddle.net/ExplosionPIlls/tkqRa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:14:08.940

**HTML**

```
<table id="mytable">
    <tr>
        <th> Header 1

        <td> L1 C2
        <td> L1 C3
        <td> L1 C4

    <tr>
        <th> Header 2

        <td> L2 C2
        <td> L2 C3
        <td> L2 C4

    <tr>
        <th> Header 3

        <td> L3 C2
        <td> L3 C3
        <td> L3 C4
</table> 
```

**CSS**

```
#mytable tr > th{
    background:#69B;
    color:#FFF;
} 
```

# google-chrome - Chrome 扩展 options.js 通知 content_script.js 设置更改

> ID：14765434
> 
> 赞同：2
> 
> 时间：2013-02-08T03:57:05.003
> 
> 标签：google-chrome, google-chrome-extension

通知我的 content_script.js 设置更改的正确方法是什么？

当我将设置写入 localStorage 时，我想对内容脚本执行 sendMessage/sendRequest，以便它可以相应地应用它们。

我必须做 options.js > background.js > content_script.js

想法？

选项.js

```
$('#add-filter-button')
    .button()
    .click(function(event) {
        event.preventDefault();
        var userFilters = new Array();
        var newFilter = $('#add-filter').val();
        if (newFilter !== undefined && newFilter.length > 0) {
            $('#filters-box').append(new Option(newFilter, newFilter));
            $('#add-filter').val('');
            $('#filters-box option').each(function() {
                userFilters.push( $(this).text() );
            });
            localStorage['userFilters'] = JSON.stringify(userFilters);
            chrome.storage.sync.set({'userFilters': userFilters});
        }
    }); 
```

内容.js

```
chrome.storage.onChanged.addListener(function(changes, namespace) {
    for (key in changes) {
        var storageChange = changes[key];
        console.log('Storage key "%s" in namespace "%s" changed. ' +
            'Old value was "%s", new value is "%s".',
            key,
            namespace,
            storageChange.oldValue,
            storageChange.newValue);
        }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:30:48.673

使用`chrome.storage.local` [https://developer.chrome.com/extensions/storage.html](https://developer.chrome.com/extensions/storage.html)

它有事件`onChanged`

例如：

设置.js

```
chrome.storage.sync.set({'value': theValue}); 
```

内容.js

```
chrome.storage.onChanged.addListener(function(changes, namespace) {
  for (key in changes) {
    var storageChange = changes[key];
    console.log('Storage key "%s" in namespace "%s" changed. ' +
                'Old value was "%s", new value is "%s".',
                key,
                namespace,
                storageChange.oldValue,
                storageChange.newValue);
  }
}); 
```

# android - Android Ormlite 映射到 Sqlite

> ID：14765438
> 
> 赞同：0
> 
> 时间：2013-02-08T03:57:25.303
> 
> 标签：android, android-sqlite, ormlite

我找不到 Android 到 Sqlite 的 Ormlite DataType 映射。我找到[了 OrmLite SQL 数据类型](http://ormlite.com/data_types.shtml)，但 Sqlite 列是空白的。有谁知道我能找到他们吗？

我需要他们更新我的数据库架构，即：

```
 meetingDao.executeRaw("ALTER TABLE meeting ADD closed ????"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:36:11.870

我不确定你在问什么，但 Sqlite 是一个无类型数据库。基本上所有内容都存储为字符串，其中某些函数允许在运行时对这些字符串进行数值、时间等计算。

引用[Sqlite 数据类型文档](http://www.sqlite.org/datatypes.html)：

> SQLite 是“无类型”的。这意味着您可以在任何表的任何列中存储任何类型的数据，而不管该列的声明数据类型如何。（请参阅下面第 2.0 节中此规则的一个例外。）此行为是一项功能，而不是错误。假设数据库存储和检索数据，并且该数据的格式对数据库无关紧要。在大多数其他 SQL 引擎中发现并在 SQL 语言规范中编码的强类型系统是一个错误功能 - 它是一个示例实现显示在界面中。SQLite 试图通过允许您将任何类型的数据存储到任何类型的列中并允许数据类型规范的灵活性来克服这个错误功能。

在您提到的 SQL 数据类型页面中，Sqlite 列是空白的，因为它使用基本数据列而无需覆盖它们。即使我更改了类的基本类型，Sqlite 也不会覆盖任何类型，因为它还是一个无类型数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T14:37:17.860

实际上，原始问题链接的映射表：[OrmLite SQL Data Types](http://ormlite.com/data_types.shtml)显示了 ORMLite 正在使用的正确类型，尽管它只显示了**Base Database**列中每个数据库的差异。例如，Java`long`被创建为具有该`BIGINT`类型的列。

虽然 SQLite3 没有类型，但它具有ORMLite 在创建表时使用的[类型亲和性的概念。](http://www.sqlite.org/datatype3.html)

您可能还应该在数据库升级中包含这些类型，否则当 ORMLite 自动创建表形式从头开始和升级时，您将获得不同的表定义。

# android - 如何找到外部 sdcard(mnt/exdsdcard) 路径 android？

> ID：14765441
> 
> 赞同：0
> 
> 时间：2013-02-08T03:57:53.790
> 
> 标签：android, android-sdcard

# exdsdcard 路径查找

> 我需要找出外部 sdcard 路径（mnt/exdsdcard）。我想将一些图像与 exdsdcard 相同，我也去访问数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:45:11.397

试试这个

```
File extStore = Environment.getExternalStorageDirectory(); 
```

然后指定文件夹名和文件名

例如：

"/LazyList/"+serialno.get(位置).trim()+".jpg"

# javascript - 正则表达式分析转义字符？

> ID：14765444
> 
> 赞同：0
> 
> 时间：2013-02-08T03:58:11.263
> 
> 标签：javascript, regex

我想在使用正则表达式时分析转义字符。

例如，如果字符串中包含字符 (a)，则正则表达式模式应该匹配，但如果字符 a 前面有撇号 ('a)，则它不应该匹配

例如：

“a” - 真，“aba” - 真，“汽车” - 真，“foo” - 假，“c'ar” - 假

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:01:09.980

使用[否定的lookbehind](http://www.regular-expressions.info/lookaround.html)仅匹配`a`前面没有s 的`'`s。

```
(?<!')a 
```

警告：一些正则表达式（JavaScript、Ruby、Tcl）[不支持lookbehind](http://www.regular-expressions.info/lookaround.html#limitbehind)。

> 我想要在 Javascript 中运行的解决方案

然后我将向您推荐我的样板参考：[在 JavaScript 中模仿 Lookbehind](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)。或者，只需自己扫描字符串，而不使用正则表达式。这是一个非常简单的方法，而且很可能比任何后视模仿版本都快。

```
function matches_a_not_preceded_by_apos(str)
{
    var found_an_a = false;
    for (var i=1; i<str.length; i++)
    {

        if (str.charAt(i) === "a")
        {
            found_an_a = true;
            if (str.charAt(i-1) === "'")
            {
                return false;
            }
        }
    }
    return found_an_a;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:04:02.100

您可以使用此模式：

```
(?<!\')a 
```

这是演示：[http ://regexr.com?33mue](http://regexr.com?33mue)

`(?<!\')`是否定的后视，`a`如果前面没有. 则表示匹配`\'`。

# wordpress - 解析错误：语法错误，文件意外结束 - PHP 5

> ID：14765451
> 
> 赞同：0
> 
> 时间：2013-02-08T03:59:27.657
> 
> 标签：wordpress, parsing, syntax

我已经调试了我的索引文件并过滤掉了我的代码。事实证明，如果我使用以下代码，该站点会返回“意外的文件结尾”错误。如果我删除它，该站点将显示没有错误。所以我不确定我是否遗漏了任何语法代码或者是否有错字。

```
 <?php

 // The Query
 query_posts( 'cat=9614&posts_per_page=5&tag=review' );

 // The Loop
 while ( have_posts() ) : the_post();
 ?>
 <li>
 <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
 </li>
 <?
 endwhile;

 // Reset Query
 wp_reset_query();

 ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T04:22:27.687

使用`<?php`代替`<?`

```
<?php

 // The Query
 query_posts( 'cat=9614&posts_per_page=5&tag=review' );

 // The Loop
 while ( have_posts() ) : the_post();
 ?>
 <li>
 <a href="<?php the_permalink(); ?>"><?php the_title(); ?></a>
 </li>
 <?php // error is here
 endwhile;

 // Reset Query
 wp_reset_query();

 ?> 
```

# android - 仅应用内通知/交互式祝酒词

> ID：14765453
> 
> 赞同：0
> 
> 时间：2013-02-08T03:59:47.940
> 
> 标签：android, toast, android-notifications

我们的 Android 应用目前有大量的对话框和警告框。我想将这些切换为 toast，但有一个问题 - 其中一些要求用户选择是查看更多信息还是关闭弹出窗口。看起来没有办法用敬酒来做到这一点。

是否有任何现有的支持可点击 toast 的 Android 库（即，您点击它并触发对应用程序中侦听器的函数调用，有点像通知）？如果没有，对于这种“点击这里做某事，否则我将在几秒钟内消失”的 UI 模式，是否有推荐的替代方案，或者我应该只是滚动我自己的片段上课呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:31:39.110

我必须做一些类似于我的应用程序的事情，所以我写了[DropViewNotification](https://github.com/zodio/DropViewNotification)，这是一个样板，通过将所谓的通知动画到屏幕上来实现它。它不会自动关闭，因为它只能作为一种工具。

它接受任何类型的视图以使其具有通用性，因为我需要在其中放置至少两个或三个明显的视图（TextView、ProgressBar、ImageView）。如果您愿意，您可以随时切换它的内容。还可以自定义动画以显示和关闭通知和主要内容。

在现实生活中，您可能需要考虑添加控制器类来处理内容的显示和自动关闭等。希望它对您有所帮助。

# php - 如何使用 ob_start 在 PHP 中的另一个脚本中获取脚本输出和处理？

> ID：14765455
> 
> 赞同：0
> 
> 时间：2013-02-08T04:00:05.530
> 
> 标签：php, http, output, ob-start

好的看：

我想要做的是以下（这是一个例子）：

1.  $output = 要求（“script_execution.php”）；
2.  回声str_replace（“你好”，“再见”，$输出）；

我有的解决方案：

(script_execution.php)

```
<?php
   echo "hello world....";
?> 
```

（解决方案.php）

```
<?php

  ob_start();
  require( "script_execution.php" );
  $output = ob_get_contents();
  ob_end_clean();
  echo $output; // WOW!!! but.......................

?> 
```

（输出）

**再见世界……**

问题是：该解决方案工作正常，但是，¿如果“script_execution.php”有一个（exit;）会发生什么？最终输出将是错误的，因为在第三条指令之前，所有执行运行都停止了。

¿ 在不退出我的脚本 (solution.php) 的情况下，如何获得“script_execution.php”的最终输出？因为如您所知，script_execution.php 的最终输出（独立于 exit; 指令）是：

**你好世界....**

谢谢！（也许使用线程？？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:06:36.223

如果您使用`include`or评估脚本`require`，并且它调用`exit()`，您的脚本将终止。

我看到你有两个选择：

1.  在调用时使用关闭处理程序[`register_shutdown_function()`](http://php.net/manual/en/function.register-shutdown-function.php)运行`exit()`，然后在函数中捕获输出缓冲区并打印它。

2.  仅`script_execution.php`通过向您的服务器发出 HTTP 请求来执行，类似于：

    ```
    $output = file_get_contents( 'http://www.yoursite.com/script_execution.php'); 
    ```

# c# - 解析彩信内容

> ID：14765456
> 
> 赞同：0
> 
> 时间：2013-02-08T04:00:17.360
> 
> 标签：c#, parsing, mms

我有 GSM 调制解调器，可以从用户那里获取 SMS/MMS 消息。收到短信时效果很好。但是，如果我收到彩信，PDU 消息（只有没有 UDH 等的用户数据）会变成如下所示：

```
E706246170706C69636174696F6E2F766E642E7761702E6D6D732D6D65737361676500B487AF848C8298583130333630303030303730353836313330323037313032313535303031008D9083687474703A2F2F6D6D7363723A383030322F30333630303030303730353836313330323037313032313535303031008805810302A300890E802B3739303938363534353735008A808E02018D 
```

然后我尝试将其转换为ANSI（8位八位字节为ANSI符号），因此将其修改为：

```
00E70006$application/vnd.wap.mms-message000000B4008700AF0084008C00820098X103600000705861302071021550010000008D00900083http://mmscr:8002/036000007058613020710215500100000088000500810003000200A300000089000E0080+790986545750000008A0080008E00020001008D 
```

在我看来转换是错误的！如何正确转换并使用这种消息？提前致谢。

# javascript - 隐藏插入点-插入点-输入栏-闪烁的垂直小栏

> ID：14765458
> 
> 赞同：0
> 
> 时间：2013-02-08T04:00:33.253
> 
> 标签：javascript, css

在我的设计中有一些我不喜欢的东西，当我使用 div 中的图像作为按钮时，总会有这个闪烁的小竖线，就像有文字或要标记的东西一样，我想知道是否有一种在某些类或 id 中使用 css 或 JavaScript 隐藏插入符号（闪烁的小条）的方法，例如`#myDiv{ caret: no-caret / NO blinking bar :) }`. 例如，我真的不喜欢导航按钮中的这个栏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T04:36:44.640

在 Firefox 中，确保未选中“始终使用光标键在页面内导航”。

```
Tools > Options > Advanced > General 
```

这是一个用户定义的设置，因此它仅适用于特定的浏览器实例，并且只会影响您的计算机。

# android - 如何在警报对话框android中使用电话号码？

> ID：14765459
> 
> 赞同：2
> 
> 时间：2013-02-08T04:00:39.400
> 
> 标签：android, android-intent, android-emulator, android-widget

我想使用默认电话号码并将其传递到警报对话框中。这怎么可能。我试过了，但它强制关闭。请解决我的问题。提前致谢。我的编码如下：

```
case R.id.menu_settings:
String phoneNo ="123456789";
AlertDialog.Builder alert = new AlertDialog.Builder(this);
alert.setMessage("Do you want to call us?"+phoneNo);
alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
String uri = "123456789";
public void onClick(DialogInterface dialog, int whichButton) {
    Intent intent = new Intent(Intent.ACTION_CALL);
    intent.setData(Uri.parse(uri));
    startActivity(intent);
 }
});
alert.setNegativeButton("Ok", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        finish();
    }

  });
  alert.show();
return true;
}
return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:08:54.560

Uri 的格式应为`tel:########`

```
String uri = "tel:123456789"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:15:06.447

发生这种情况是因为 2 个原因中的至少 1 个。

1.  `<uses-permission android:name="android.permission.CALL_PHONE"/>`您在清单中没有权限

2.  您`Uri`的格式不正确。将其更改
    `String uri = "123456789"`为
    `String uri = "tel:123456789"`

# objective-c - 不依赖中心定位 UI 控件

> ID：14765462
> 
> 赞同：0
> 
> 时间：2013-02-08T04:01:05.533
> 
> 标签：objective-c, ios6, interface-builder, constraints, autolayout

我正在创建一个示例登录屏幕来练习自动布局。在纵向模式下，它看起来像这样。

![在此处输入图像描述](../Images/4b2a6c5d6f8f6b42b62e2a0f0d53845a.png)

但是，当我旋转到陆地空间模式时，它看起来像这样。

![在此处输入图像描述](../Images/a0e18f91d8d0317e0f06804741e43ddc.png)

以下是我在此布局中设置的约束。

![在此处输入图像描述](../Images/74ba82ed966e49d4312f86c9e1268bea.png)

我明白为什么会这样。这是因为我对用户 ID UILabel [ Vertical Space(196) ] 有一个约束。切换到横向时，如何将设置的 UIlabel+UITextField 设置为略低于屏幕的水平中心线？

我假设我可以将中间标签设置为容器中的水平中心，然后将其他 2 个标签相对于该标签定位。但我正在寻找的是一种无需容器中心定位帮助即可定位它们的方法。我希望它们的位置略低于水平中心线。我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:03:28.230

我认为在 IB 中没有任何方法可以做到这一点，而不使用 center 属性——您可以通过在用户 ID 上方放置另一个标签来使您的视图显示在中心下方，但其中没有文本，因此它将是不可见的. 将那个居中，并让所有其他人相对于它定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:32:04.413

选择所有控件并选择`Top space to superview`

![在此处输入图像描述](../Images/a38ddd9bdcaeb9516855fbe0be48fe29.png)

现在只选择文本字段并选择`Widths Equally`

![在此处输入图像描述](../Images/804a2981e893f090c565a52b226223ef.png)

这应该有效。如果没有，请告诉我，我将向您发送示例代码或约束屏幕。

# wpf - 将 wpf 应用程序转换为 wpf 浏览器应用程序

> ID：14765464
> 
> 赞同：2
> 
> 时间：2013-02-08T04:01:29.183
> 
> 标签：wpf

是否可以将 wpf 桌面应用程序转换为 wpf 浏览器应用程序？我想让我的应用程序从浏览器运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:50:53.737

根据我的经验，没有可以将 WPF 转换为 XBAP 的转换器。

但我确实在我的项目中多次与多个平台一起工作。我确实在具有单一代码库的单一解决方案中同时维护 3 个平台 WPF、Silverlight 和 XBAP。我保留一个通用代码库并在 3 个平台之间共享文件。为此，我建议您创建一个 Hello world XBAP 应用程序并首先运行它。您需要对 XBAP 应用程序的工作原理有一些基本了解。初步了解应用程序的入口和出口点对您来说就足够了。尝试在 Page 中添加一个按钮并了解其工作原理。完成后，尝试将现有项目文件（XAML 和 CS）一一链接到 XBAP 项目中。了解您要添加的内容以及添加的原因。是的，这是您需要做的一项艰巨的工作。但不用担心 XBAP、WPF XAML 和 C# 代码几乎相似。您需要知道条件编译符号可以在项目属性中设置。这样你就可以写了**#if XBAP** & **#endif**有时会在您的代码中使用，因为 XBAP 可能不支持少数类或功能，您需要为 XBAP 编写特定代码。例如，与 Dropshadow 相关的功能在 XBAP 中不可用。

希望这能回答您的疑问！

# qt - 如何使用 poco c++ 库将程序交叉编译到 ARM-Linux 中？

> ID：14765468
> 
> 赞同：0
> 
> 时间：2013-02-08T04:01:46.997
> 
> 标签：qt, ubuntu-10.04, poco-libraries

我正在使用 poco c++ 库编写 c++ 程序并在 PC 环境中成功执行。但是如何交叉编译成 ARM-Linux 。

我正在关注 poco GMakeBuildNotes，但我不知道我在哪里犯了错误。任何人都可以帮助我如何逐步交叉编译。以下是我目前正在执行的步骤：

1.  `./configure --config=ARM-Linux --no-samples --no-tests`
2.  `make`
3.  QT框架中的交叉编译

请问有什么改进这些步骤的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T19:01:21.730

这篇文章很旧，您并没有真正说明问题所在，但我仍然会分享。我开始为我们的嵌入式系统使用 poco，这就是我为 ARM linux 编译它的方式：

如果你下载并解压 poco 包，你会找到一个目录： build/config
在这里你可以找到 poco 构建的各种预设配置。我制作了“ARM-linux”的副本并对其进行了编辑以满足我的需要（这些只是更改）：

```
 LINKMODE          ?= STATIC # since we are statically linking poco...
    ...
    TOOL               = arm-none-linux-gnueabi # this is the compiler we use 
```

其余的对我来说还好！
然后我像这样编译 poco：

```
 $ ./configure --config=MY_OWN_CONFIG --prefix=/absolute/path/to/target/dir --no-samples --no-tests
    $ make (compiles without a problem for me)
    $ make install 
```

在“make install”之后（如果一切正常），编译的库将位于“--prefix”选项指定的目录中，并且它们已准备好链接到您的 ARM 应用程序。

我希望它有帮助！

# jquery - Twitter 引导时间选择器问题

> ID：14765474
> 
> 赞同：4
> 
> 时间：2013-02-08T04:03:01.053
> 
> 标签：jquery, twitter-bootstrap, timepicker

我正在尝试让 Twitter Bootstrap 时间选择器工作。我的代码如下：

```
$('.timepicker').timepicker({
    // defaultTime: 'current',
    defaultTime: $(this).val(),
    minuteStep: 1,
    disableFocus: true,
    template: 'dropdown'
}); 
```

默认时间从数据库中正确显示，但是当我单击该字段以尝试更改时间时，时间选择器为空白。如果我尝试移动小时或分钟输入，它们会显示“NaN”。移动后 AM/PM 输入正确显示。是否需要调整设置才能使其正常工作？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T17:41:43.073

试试这个：**defaultTime：false，**

```
$('#time_app').timepicker({
    defaultTime: false,
    minuteStep: 30,
    showInputs: false,
    disableFocus: true,
    modalBackdrop: true
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:57:04.437

You can try to update the default time in the input field

```
<input id="timepicker1" type="text" class="input-small" value="00:00 AM"/> 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/R9ChY/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:19:21.433

使用`value`并`defaultTime`分配`value`给`input`它会起作用

```
<input class="timepicker" type="text" class="input-small" value="00:00"> 
```

jQuery

```
$(document).ready(function(){
   $('.timepicker').timepicker({
       defaultTime: 'value',
       minuteStep: 1,
       disableFocus: true,
       template: 'dropdown'
   });
}); 
```

# java - 简单的边缘检测方法Java

> ID：14765479
> 
> 赞同：3
> 
> 时间：2013-02-08T04:03:30.273
> 
> 标签：java, pixel

我正在研究一种 Java 方法来进行一些简单的边缘检测。我想获取两种颜色强度的差异，一种在一个像素上，另一种在其正下方的像素上。无论我为该方法设置什么阈值，我正在使用的图片都是黑色的。我不确定我当前的方法是否只是没有计算我需要的东西，但我不知道我应该追踪什么来找到问题。

到目前为止，这是我的方法：

```
public void edgeDetection(double threshold)
{

  Color white = new Color(1,1,1);
  Color black = new Color(0,0,0);

  Pixel topPixel = null;
  Pixel lowerPixel = null;

  double topIntensity;
  double lowerIntensity;

  for(int y = 0; y < this.getHeight()-1; y++){
    for(int x = 0; x < this.getWidth(); x++){

      topPixel = this.getPixel(x,y);
      lowerPixel = this.getPixel(x,y+1);

      topIntensity =  (topPixel.getRed() + topPixel.getGreen() + topPixel.getBlue()) / 3;
      lowerIntensity =  (lowerPixel.getRed() + lowerPixel.getGreen() + lowerPixel.getBlue()) / 3;

      if(Math.abs(topIntensity - lowerIntensity) < threshold)
        topPixel.setColor(white);
      else
        topPixel.setColor(black);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T04:10:48.213

`new Color(1,1,1)`调用它的`Color(int,int,int)`构造函数，`Color`其取值介于 0 和 255 之间。所以你`Color white`仍然基本上是黑色的（嗯，很深的灰色，但不足以引起注意）。

如果要使用`Color(float,float,float)`构造函数，则需要浮点文字：

```
Color white = new Color(1.0f,1.0f,1.0f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T03:13:34.597

```
public void edgeDetection(int edgeDist)
  {
Pixel leftPixel = null;
Pixel rightPixel = null;
Pixel bottomPixel=null;
Pixel[][] pixels = this.getPixels2D();
Color rightColor = null;
boolean black;
for (int row = 0; row < pixels.length; row++)
{
  for (int col = 0; 
       col < pixels[0].length; col++)
  {
    black=false;
    leftPixel = pixels[row][col];
    if (col<pixels[0].length-1)
    {
      rightPixel = pixels[row][col+1];
      rightColor = rightPixel.getColor();
      if (leftPixel.colorDistance(rightColor) > 
          edgeDist)
        black=true;
    }
    if (row<pixels.length-1)
    {
      bottomPixel =pixels[row+1][col];
      if (leftPixel.colorDistance(bottomPixel.getColor())>edgeDist)
        black=true;

    }
    if (black)
      leftPixel.setColor(Color.BLACK);
    else
      leftPixel.setColor(Color.WHITE);
  }
} 
```

}

# c# - 如何将 DLL 文件放入 .NET 框架

> ID：14765481
> 
> 赞同：0
> 
> 时间：2013-02-08T04:03:40.583
> 
> 标签：c#, .net, dll

抱歉，如果这是一个明显的问题，但我是 C# 新手，我正在尝试将 2 个 dll 用于项目。我把它们放在哪里？

我试图在一个空的 C# 项目中添加 SoundTouch.dll 作为引用，但 Visual Studio 说要确保该文件是可访问的并且它是一个有效的程序集或 COM 组件。有人建议我将 dll 放入 \bin\debug 路径，但那在哪里？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:06:42.563

每个项目都应该在它的项目目录下有它自己的\bin\debug（和\bin\release）目录结构，但是在你构建项目之前它们不会被创建。至于无效程序集，听起来您的 dll 已损坏或不是有效的 .NET 程序集。

编辑：查看 SoundTouch 网站，有人已经为这个适用于 C# 的 dll 创建了一个包装器，可以在[这里找到](http://code.google.com/p/practicesharp/source/browse/trunk/PracticeSharpApp/SoundTouch/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:10:22.843

如果您的 DLL 是 .NET 或 COM DLL，您可以简单地在 Visual Studio 中添加一个引用。有关该程序的详细信息，请参阅

[http://msdn.microsoft.com/en-us/library/wkze6zky(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/wkze6zky(v=vs.110).aspx)

如果 DLL 是 Win32 DLL（不公开 COM 接口），您可以通过 Platform Invoke (P/Invoke) 机制与其交互。

[http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx)

使用 P/Invoke 时，DLL 必须位于可由 .NET 运行时解析的位置，并且您使用 DllImport 属性将入口点从 DLL“拉”到您的 C# 代码中，例如

```
[DllImport("msvcrt.dll", EntryPoint="puts")] 
```

.NET 将在 .exe 所在的同一目录中搜索 Win32 DLL。如果您在 Visual Studio 下构建，则会在您的项目文件夹下创建一个文件夹

> 斌\调试

用于调试版本或发布版本

> 垃圾箱\释放

# c# - nuget 包没有 pdb 文件

> ID：14765484
> 
> 赞同：1
> 
> 时间：2013-02-08T04:04:18.443
> 
> 标签：c#, debugging, nuget, packages

继我之前的[问题](https://stackoverflow.com/questions/14764572/using-nuget-symbols-servers)之后，在我看来，当 pdb 文件不可用时，nuget 的“附加值”会大大降低。

示例：我使用 nuget 使用引用设置了我的 c# 项目。我开始编码，但无法弄清楚为什么外部包会引发错误。我想调试。如果那个包没有 pdb 文件，那我就不走运了。好吧。我可以继续下载该包的源代码并自己构建它。没问题，但是我必须通过并更改我在项目中的引用以指向此源。嗯，我一定是错过了什么。否则，我自己管理外部引用会更快。我一定做错了。

**更新：**

所以我的问题是：当 nuget 包没有 pdb 文件时，人们如何使用 nuget 和调试？或者使用 nuget 时调试 3rd 方库的最佳方式。

**更新 2：**

我不确定为什么这个问题被否决了？也许我没有正确表达它。简而言之，人们如何使用通过 nuget 交付的没有 pdb 文件的包。他们想调查为什么他们的代码会抛出错误？

我没有装袋 3rd 方库或 OSS 或 nuget - 我只是想确保我正确使用 nuget。

# c - 链表维护根指针地址，以便在构建后稍后读取

> ID：14765485
> 
> 赞同：1
> 
> 时间：2013-02-08T04:04:22.410
> 
> 标签：c

我是一个新学习者，正在尝试建立链表。我可以这样做，但我试图保留根节点或第一个节点的指针，因此在构建链表后，我可以读取列表或执行模式匹配，但我无法成功。你能在这里帮忙吗？

```
#include <stdio.h>
#include <stdlib.h>

struct node {    
    int x;
    struct node *next;
};

int main(){

    int d;
    struct node *linked;
    struct node *head;

    linked = malloc (sizeof(struct node));

    head = linked;   <<<< As this is pointer, in while loop whenever malloc executes it changes the value of head as well.
    printf ("Location of head %p \n", head->next);

    d = 1;
    while (d>0){

        printf ("Enter the value of X: ");
        scanf ("%d", &linked->x);

        linked->next = malloc (sizeof(struct node));
        printf ("Location of linked %p \n", linked->next);

        printf ("Location of head %p \n", head->next);

        printf ("To enter further value enter non zero: ");
        scanf ("%d", &d);

        if (d==0)
            linked->next = NULL;
    }

    //linked->next = NULL;

    printf("Value of Next is %p\n", linked->next);        
    printf ("Location of head %p \n", head->next);        
} 
```

输出：

> MacBook-Air:cprog jimdev$ ./a.out
> 
> 头部位置 0x7fff90ab952c <<<< 这个值不应该改变，但在随后的输出中它是。
> 
> 输入 X 的值：0
> 
> 链接 0x7ff0624039c0 ​​的位置
> 
> 头部位置 0x7ff0624039c0 ​​<<<< 与前一个不同的值
> 
> 要输入更多值，请输入非零：3
> 
> 输入 X 的值：3
> 
> 链接 0x7ff0624039d0 的位置
> 
> 头部位置 0x7ff0624039d0 <<<< 与前一个不同的值
> 
> 要输入更多值，请输入非零：0
> 
> Next 的值为 0x0
> 
> 头 0x0 的位置

我刚刚尝试了这个新的，它也执行链表元素的 printf，如果你们想到任何改进，请告诉我。我知道递归是实现它的快速而简洁的方法，但我想用 while 循环尝试一些东西。

# 包括

# 包括

结构节点{

```
 int x;
    struct node *next;
    }; 
```

诠释主要（）{

```
 int d, hold, i;
    struct node *list;
    struct node *head;
    struct node *current;

    list = (node *)malloc(sizeof(struct node));
    head = list;
    printf ("Location of list is %p \n", head);
    d = 1; 
```

而（d>0）{

```
 printf ("Enter the value of X: ");
    scanf ("%d", &list->x);
    printf ("Location of list is %p\n", list);
    current = (node *)malloc (sizeof (struct node));
    list->next = current;
    list = current;

    printf ("Location of head is %p\n", head);

    printf ("Enter zero to terminate the loop: ");
    scanf ("%d", &d);

    }
    list->next = NULL;
    printf ("Value of last next is %d\n", list->next);

    current = head;

    i = 1;
    while (current->next != 0){
          printf ("Location of list is %p \n", current);
          printf ("Value of linked list %d elements %d \n", i, current->x);
          current = current->next;
          i++;
          }

    scanf ("%d", &hold); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:40:54.183

2件事：

1.  你正在输出`head->next`而不是仅仅`head`

2.  你没有更新`linked`到`linked->next`

链表的头节点是链表的第一个元素。head->next，当链表格式正确时，是第二个元素。无论哪种方式，它都不应该改变，因为列表是在创建后创建的。

如果您没有更新`linked`，那么`linked->next`您只是在丢弃刚刚分配的内存`linked->next`而不是创建列表。

这有效：

```
int d;
struct node *linked;
struct node *head;

linked = malloc(sizeof(struct node));

head = linked;
printf ("Location of head %p \n", head);//changed head->next to head

d = 1;
while (d>0){

    printf ("Enter the value of X: ");
    scanf ("%d", &linked->x);

    linked->next = malloc (sizeof(struct node));
    printf ("Location of linked %p \n", linked->next);

    printf ("Location of head %p \n", head);// changed head->next to head

    printf ("To enter further value enter non zero: ");
    scanf ("%d", &d);

    linked = linked->next; //this was added
    if (d==0)
        linked->next = NULL;
} 
```

您的代码，因为它没有更新，所以`linked`保持不变。您的列表如下所示：`head``linked`

节点 {x:next}

```
 -> {x2:NULL}
           -> {x3:NULL}
{x1:node2} -> {x4:NULL}
    ^^            ^^
(head and linked)   you're outputing this node both times 
```

由于您没有任何指向 node2 或 node3 的指针，因此您会丢失这些节点（内存泄漏）。

你几乎是对的。这是使用此代码生成的列表的样子：

```
{x1:node2} -> {x2:node3} -> {x3:node4} -> {x4:node5}
   ^^           ^^                           ^^
  head        head->next                   linked 
```

**更新：**

我为您的代码更改了图表，以更好地反映正在发生的事情。

`ptr->varname`运算符在 指向的位置查找的`ptr`值`varname`。因此，如果指针的值相同，那么您将在相同的空间中查找变量。在您的情况下，`head=linked`意味着如果您设置`linked->next = ptr`then `head->next = ptr`，并且因为`linked`从未更新为`linked->next`（因此`head->next`），那么您只是在分配和重新分配`linked->next`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:12:18.597

head 的值只能在使用链表时设置并且永远不要更改。如果你改变 head 的值，那么所有的链接都会“脱落”并且垃圾收集器会吃掉它们。链表应该遵循这种格式。

第一个节点是头，设置为当前节点

节点二设置为头节点的下一个指针INSIDE，节点二也设置为当前节点

节点三设置为节点二的下一个指针INSIDE，节点三设置为当前节点指针。

洗涤/漂洗/重复

永远不要改变头节点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T04:16:01.063

你并不是真的在这里“建立”一个链表，原因我将在下一段解释......至于你关于`head`指针的问题，你一直在打印与指针不同的`head->next`值`head`。如果您打印出 的值`head`，您会发现它从未随着时间的推移而改变，因为您从未明确修改过它。

我可以看到您犯的最大错误是，在分配内存并将指针值分配`linked`给. 所以发生的事情是你不断地为 分配新的内存块，这与 的值相同，反过来又造成内存泄漏，因为你失去了对先前分配的由 指向的内存块的引用。所以你会想要这样的东西：`linked->next``linked->next``linked->next``head->next``linked->next`

```
linked->next = malloc(sizeof(struct node));
linked = linked->next; 
```

使用这种方法，您将保持循环不变，其中`linked`始终指向列表中的最后一个节点，因此，您将新节点附加到列表的末尾，并且不会丢失对节点的引用。此外，您将能够从`head`指针遍历列表，因为它从未更改过（它指向列表中的第一个节点）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T04:51:24.933

这是我为想要编写双向链表程序的新手编写的示例。您可以参考它。正如 AMR 已经正确指出的那样，您的 Head 应该保持不变（假设您在列表的末尾而不是在前面插入元素）。

这里 head 被实现为 global 。拥有全局变量可能并不总是一个好主意。在这种情况下，将头传递给您的 insert_element_into_list 函数（），例如

插入元素（头部，项目）

```
struct node {
    int d;
    node *llink;
    node *rlink;
};
typedef struct node* Node;
Node head = NULL;

void linked_list_init(int);
void linked_list_print();

void linked_list_init(int data) {

    Node newnode = (Node) malloc(sizeof (Node));
    newnode->d = data;

    Node curr;

    if (head == NULL) {

        newnode->llink = NULL;
        newnode->rlink = NULL;
        head = newnode;

    } else {
        curr = head;
        while (curr->rlink) {
            curr = curr->rlink;
        }
        curr->rlink = newnode;
        newnode->rlink = NULL;
        newnode->llink = curr;       
    }
}

void linked_list_print() {
    Node curr;
    curr = head;
    while (curr) {
        printf("Element Data : %d", curr->d);
        curr = curr->rlink;
    }
} 
```

# c# - 传递实现的模板化类型：无法从实现转换为接口

> ID：14765489
> 
> 赞同：1
> 
> 时间：2013-02-08T04:04:59.127
> 
> 标签：c#, generics

有人可以向我解释为什么这在 C# 中不正确：

```
namespace NamespaceA
{
    public class ClassA<T1>
    {
        T1 mT1;
        public T1 Type1
        {
            get { return mT1; }
        }
    }

    public class IOForClassA
    {
        public interface ICanOutput
        {
            void OutputFunction();
        }

        public static void Output(ClassA<ICanOutput> aClassA_WithOutputCapabilities)
        {
            aClassA_WithOutputCapabilities.Type1.OutputFunction();
        }
    }
}

namespace NamespaceB
{
    public class ClassB
    {
        public class OutputableClassA : NamespaceA.IOForClassA.ICanOutput
        {
            public void OutputFunction()
            {
            }
        }
        public ClassB()
        {
            NamespaceA.ClassA<OutputableClassA> aOutputableA = new NamespaceA.ClassA<OutputableClassA>();
            NamespaceA.IOForClassA.Output(aOutputableA);
        }
    }
} 
```

这将导致以下编译错误：

参数 1：无法从 'NamespaceA.ClassA"<"NamespaceB.ClassB.OutputableClassA">" 转换为 NamespaceA.ClassA"<"NamespaceA.IOForClassA.ICanOutput">"

...但是 NamespaceB.ClassB.OutputableClassA 实现了 NameSpaceA.IoForClassA.ICanOutput，所以我不明白为什么这是一个问题...

我试图允许用户创建他/她希望的任何类型的 ClassA。但是，如果他们希望 ClassA “可输出”，则其模板类型必须实现特定接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:26:10.440

您正在解决[协方差/逆变](http://msdn.microsoft.com/en-us/library/dd997386%28v=vs.100%29.aspx)问题。基本上，只有接口可以允许泛型类型是更派生的类型，并且只有使用 in/out 关键字明确指定它们（在链接文章中概述）。

阅读您的代码，似乎您想在不知道其类型的情况下调用一个类的已知命名成员，这可能更适合[类型约束。](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)不过，您可能需要稍微更改您的设计。

```
namespace NamespaceA
{
    public class ClassA<T1> where T1 : IOForClassA.ICanOutput
    {
        T1 mT1;
        public T1 Type1
        {
            get { return mT1; }
        }
    }

    public class IOForClassA
    {
        public interface ICanOutput
        {
            void OutputFunction();
        }

        public static void Output<T>(ClassA<T> aClassA_WithOutputCapabilities) where T : IOForClassA.ICanOutput
        {
            aClassA_WithOutputCapabilities.Type1.OutputFunction();
        }
    }
}

namespace NamespaceB
{
    public class ClassB
    {
        public class OutputableClassA : NamespaceA.IOForClassA.ICanOutput
        {
            public void OutputFunction()
            {
            }
        }
        public ClassB()
        {
            NamespaceA.ClassA<OutputableClassA> aOutputableA = new NamespaceA.ClassA<OutputableClassA>();
            NamespaceA.IOForClassA.Output(aOutputableA);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:33:12.453

`OutputableClassA`源自`ICanOutput`。但这并不意味着`ClassA<OutputableClassA>`也来源于`ClassA<ICanOutput>`。这就是你的代码不起作用的原因。

[泛型中的](http://msdn.microsoft.com/en-us/library/dd799517.aspx)链接协方差和逆变可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T05:59:36.030

@syazdani 关于它是一个协方差问题是正确的（他链接到一篇有用的文章），但他的示例没有使用协方差，这将实现您正在寻找的内容。尽管他的回答是正确的（并且可能更可取，因为它具有将实际类型带入方法中的额外好处，以防您需要将其带入`Output`方法中，但我想我会向您展示如何使用协变接口来执行此操作以防万一您在任何其他可能使用它们的情况下：

```
namespace NamespaceA
{
    public interface IClassA<out T1>
    {
        T1 Type1 { get; }
    }

    public class ClassA<T1> : IClassA<T1>
    {
        T1 mT1;
        public T1 Type1
        {
            get { return mT1; }
        }
    }

    public class IOForClassA
    {
        public interface ICanOutput
        {
            void OutputFunction();
        }

        public static void Output(IClassA<ICanOutput> aClassA_WithOutputCapabilities)
        {
            aClassA_WithOutputCapabilities.Type1.OutputFunction();
        }
    }
}

namespace NamespaceB
{
    public class ClassB
    {
        public class OutputableClassA : NamespaceA.IOForClassA.ICanOutput
        {
            public void OutputFunction()
            {
            }
        }
        public ClassB()
        {
            NamespaceA.ClassA<OutputableClassA> aOutputableA = new NamespaceA.ClassA<OutputableClassA>();
            NamespaceA.IOForClassA.Output(aOutputableA);
        }
    }
} 
```

# php - php javascript cleartimeout（）不起作用

> ID：14765490
> 
> 赞同：0
> 
> 时间：2013-02-08T04:05:03.167
> 
> 标签：php, javascript, jquery

我有一个 setTimeout 和 clearTimeout，其中 setTimeout 工作正常，但 clearTimeout 不工作，谁能帮助我？

代码：

```
<script type="text/javascript">
  var i = 0;
  var status = setTimeout(function () {
    if (i <= 2) {
      metrics_status();
      i++;
    } else {
      clearTimeout(status);
    };
  }, 3000);
</script>
<div id="ReloadMetrics"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:24:02.467

看看给定的例子[http://jsfiddle.net/jogesh_pi/qTGPT/](http://jsfiddle.net/jogesh_pi/qTGPT/)

```
<div id="status"></div> 
```

**JS：**

```
var i = 0;
var status = setInterval(function() {
    if (i <= 5) {
        //metrics_status();
        document.getElementById('status').innerHTML = i;
    } else {
      document.getElementById('status').innerHTML = "done";
      _clearTime();
    }
    i++;
  }, 1000);

function _clearTime(){
    return clearInterval(status);
} 
```

希望这应该根据您的需要工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:08:25.933

你应该像这样`clearTimeout`在外面使用`setTimeout`

```
var status;
if(status){ 
   clearTimeout(status);
}
status = setTimeout(function () { } 
```

[示例 1 示例](http://www.w3schools.com/js/js_timing.asp) [2](http://www.w3schools.com/jsref/met_win_cleartimeout.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:13:10.363

我假设你需要`setInterval`。它将以指定的时间间隔调用您的函数，直到您调用`clearInterval`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T04:17:30.960

`setTimeout`函数只调用一次，如果它是递归的，那么你需要调用`clearTimeout` 要多次调用一个函数然后你使用`setInterval`然后你可以调用`clearTimeout`

例如[http://www.w3schools.com/jsref/met_win_cleartimeout.asp](http://www.w3schools.com/jsref/met_win_cleartimeout.asp)`setTimeout and clearTimeout` _

计时功能[http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T04:17:43.260

我认为这会达到你的目的。请检查

```
<script type="text/javascript">
  var i = 0;
  var status;
  status = setTimeout(Fun, 3000);
  function Fun() {
    if (i <= 2) {
      metrics_status();
      i++;
      status = setTimeout(Fun, 3000);

    } else {
      //clearTimeout(status);
    };
  }
</script>
<div id="ReloadMetrics"></div> 
```

# php - 为什么我的 htmlspecialchars 和 str_replace 不起作用？

> ID：14765492
> 
> 赞同：3
> 
> 时间：2013-02-08T04:05:51.363
> 
> 标签：php

对于我的示例，请访问[http://jflagher.mystudentsite.net/cmweb241/cmweb241_lab2.html](http://jflaugher.mystudentsite.net/cmweb241/cmweb241_lab2.html)

我只需要 htmlspecialchars 和 str_replace 函数来删除双引号和单引号。为什么这对我不起作用？我对 PHP 很陌生：/

```
 <?php
  $username = str_replace(array("'", "\""), "", htmlspecialchars($_POST['username']));
  $password = str_replace(array("'", "\""), "", htmlspecialchars($_POST['password']));
  $comment = str_replace(array("'", "\""), "", htmlspecialchars($_POST['comment']));

  echo " <p>Your Username is: $username . </p>";
  echo " <p>Your Password is: $password . </p>";
  echo " <p>Your Comment was: $comment . </p>";

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T04:20:06.150

**按Alex Lunix**指定的相反顺序使用它

 **```
$username = htmlspecialchars(str_replace(array("'", "\""), "", $_POST['username'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:39:10.867

前面的答案是正确的。

您应用第一个 htmlspecialchars 函数。它将每个双引号转换为 " 以及 ' 的每一个单引号。这些特殊字符在 Web 浏览器中分别显示为双引号和单引号。

您应该首先应用 str_replace。下面的代码是正确的：

```
<?php
foreach(array('comment', 'password', 'username') as $key) {
    $$key = empty($_POST[$key]) ? null : htmlspecialchars(str_replace(array("'", '"'), '', $_POST[$key]));
    echo " <p>Your " . $key. " is: " . $$key . "</p>";
}
?> 
```**

# django - django/python 中的电子邮件未发送

> ID：14765494
> 
> 赞同：-1
> 
> 时间：2013-02-08T04:06:02.493
> 
> 标签：django, email

我正在尝试使用 django 发送直接电子邮件。它不会产生任何错误，但消息不会发送到收件人电子邮件。我的代码有问题吗？

**意见.PY**

```
def contact(request):
if request.method == 'POST': # If the form has been submitted...
    form = ContactForm(request.POST) # A form bound to the POST data
    if form.is_valid():
        subject = form.cleaned_data['subject']
        message = form.cleaned_data['message']
        sender = form.cleaned_data['sender']
        cc_myself = form.cleaned_data['cc_myself']

        recipients = ['canonizadocharm@ymail.com']
        if cc_myself:
            recipients.append(sender)

        from django.core.mail import send_mail
        send_mail(subject, message, sender, recipients)
        return HttpResponseRedirect('/thanks/') # Redirect after POST
else:
    form = ContactForm() # An unbound form

return render(request, 'contact.html', {
    'form': form,
}) 
```

**模型.PY**

```
class ContactForm(forms.Form):
subject = forms.CharField(max_length=100)
message = forms.CharField()
sender = forms.EmailField()
cc_myself = forms.BooleanField(required=False) 
```

**设置.py**

```
EMAIL_BACKEND = 'django.core.mail.backends.filebased.EmailBackend'
EMAIL_FILE_PATH = '/tmp/app-messages' # change this to a proper location

# Sending mail
EMAIL_USE_TLS = False
EMAIL_HOST='localhost'
EMAIL_PORT= 25
EMAIL_HOST_USER=''
EMAIL_HOST_PASSWORD='' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:50:02.853

```
recipients = ['canonizadocharm@ymail.com',]

EMAIL_USE_TLS = True
EMAIL_HOST='smtp.gmail.com'
EMAIL_PORT=587
EMAIL_HOST_USER='your gmail account'
EMAIL_HOST_PASSWORD='your gmail password' 
```

# php - 从 Code Igniter 调用 Curl(ed) json 内容

> ID：14765502
> 
> 赞同：1
> 
> 时间：2013-02-08T04:07:09.903
> 
> 标签：php, codeigniter

这是我在模型中的功能

```
<?php
    class Clothes_model extends CI_Model {

    public function __construct()
    {
        $this->load->database();
    }

    public function get_clothes()
    {
        $url="http://192.168.0.105/ci/json_source/clothes.php";//clothes.php contain json data
        $data= this->curl->simple_get($url);
        $result = json_decode($data,true);
        return $result;
    }
} 
```

这是我的控制器

```
<?php
class Clothes extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('clothes_model');
    }

    public function view($result)
    {
        $data['clothes_item'] = $this->clothes_model->get_clothes();

        if (empty($data['clothes_item']))
        {
            show_404();
        }

        $data['title'] = $data['clothes_item']['title'];

        $this->load->view('templates/header', $data);
        $this->load->view('clothes/view', $data);
        $this->load->view('templates/footer');
    }
} 
```

当我尝试运行时出现此错误

> 解析错误：语法错误，第 12 行 /var/www/ci/application/models/clothes_model.php 中的意外 T_OBJECT_OPERATOR

有什么不对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:11:46.323

尝试改变：

```
this->curl->simple_get($url); 
```

到

```
$this->curl->simple_get($url); 
```

并确保您`$this->curl`的有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T20:17:28.897

我确实喜欢这个并且为我工作

```
 $string=file_get_contents("proj-data/food_query.php"); //place where json file is
    $decoded=json_decode($string,TRUE); 
```

# c# - Ajax 调用页面加载两次 Asp.net

> ID：14765504
> 
> 赞同：-1
> 
> 时间：2013-02-08T04:07:22.967
> 
> 标签：c#, jquery, asp.net, ajax

我有一个 AjaxCall.aspx 页面，该页面将由 .ajax() 使用 jquery 调用另一个页面。在 AjaxCall.aspx 我删除了所有的 html 标签，只留下了

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="AjaxCall.aspx.cs" Inherits="_AjaxCall" %> 
```

在它背后的代码是一个简单的页面加载事件。

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.write("{ \"Testing\": \"Hello World!\" }");
} 
```

我在网络中的 Chrome 开发人员工具中监视 ajax 请求，我注意到每次我向 AjaxCall.aspx 页面发出 ajax 请求时，它都会连续请求两次。后来我进入调试模式检查并发现页面加载事件触发了两次。我做了一些挖掘，发现一个空的img src与此有关，但问题是我在AjaxCall.aspx页面中没有任何html标签！

后来我尝试添加回 HTML 正文和表单标记，并尝试再次调用该页面，好消息是它加载了一次，但是一旦我将这些 html 标记添加回 AjaxCall.aspx，它又加载了两次。

我的 AjaxCall.aspx 中不能有这些 html 标记，因为它假设在请求时返回 json 格式的数据，拥有这些 html 标记将在调用它的任何页面上导致错误。同时，我不希望它在每次调用时都继续加载两次。那么有没有办法克服这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:27:13.483

如果您想使用应用程序页面（.aspx 和代码隐藏）传递 JSON 响应，您必须刷新响应并关闭它以停止该过程。

如果您不这样做，页面 .aspx 将被返回，可能带有一些 HTML 标记生成多个请求（例如带有错误 src 的 img）

试试这个：

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.write("{ \"Testing\": \"Hello World!\" }");
    Response.Flush();
    Response.End();
} 
```

此外，您还可以在`Response.write`a之前使用`Response.Clear`以清除可能由任何代码注入的可选内容，以确保仅发送此内容。

# list - Xlrd 列表索引超出范围

> ID：14765506
> 
> 赞同：0
> 
> 时间：2013-02-08T04:07:38.467
> 
> 标签：list, indexing, xlrd

我刚刚开始探索 Xlrd，老实说，我对编程完全陌生，并且一直在研究他们的一些简单示例，但无法让这个简单的代码工作：

```
import xlrd

book=open_workbook('C:\\Users\\M\\Documents\\trial.xlsx')
sheet=book.sheet_by_index(1)
cell=sheet.cell(0,0)
print cell 
```

我收到一个错误：列表索引超出范围（指代码的第二位到最后一位）我从 pdf 中剪切并粘贴了大部分代码……有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:51:31.773

我会在控制台中使用它。

一次执行一个语句，然后查看每个语句的结果。工作表索引从 0 开始计数，因此如果您只有一个工作表，那么您将要求第二个工作表，这会给您一个列表索引超出范围错误。

您可能缺少的另一件事是，如果单元格中没有数据，则并非所有单元格都存在。有些会，但有些不会。基本上，从 xlrd 的角度来看，存在的单元格是矩阵`nrows`x中的单元格`ncols`。

另一件事是，如果您真的想要单元格中的值，请使用该`cell_value`方法。这将返回一个字符串或一个浮点数。

旁注，你可以这样写你的路径：`'C:/Users/M/Documents/trial.xlsx'`. Python 将完美地处理后端的`/`vs `\`，您不必使用转义字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:13:19.600

你说：

> 我收到一个错误：列表索引超出范围（指代码的倒数第二位）

我对此表示怀疑。文件中有多少张纸？我怀疑只有一张纸。Python 中的索引从 0 开始，而不是 1。请编辑您的问题以显示完整的回溯和完整的错误消息。我怀疑它会显示`IndexError`发生在倒数第三行：

```
sheet=book.sheet_by_index(1) 
```

# middleman - Middleman 的 LiveReload 扩展正在重新加载整个页面，而不仅仅是 CSS。

> ID：14765509
> 
> 赞同：4
> 
> 时间：2013-02-08T04:08:01.133
> 
> 标签：middleman, livereload

当我使用 LiveReload mac 的应用程序时，它可以正常工作。所以这不是一个真正的问题，但不禁认为我遗漏了一些明显的东西。

有谁知道为什么会发生这种情况或如何解决？

# android - Roman Nurik 的向导寻呼机 - 如何访问收集的数据？

> ID：14765510
> 
> 赞同：7
> 
> 时间：2013-02-08T04:08:07.013
> 
> 标签：android, nullpointerexception, wizard

我正在尝试使用 Roman Nurik 的库（[https://plus.google.com/113735310430199015092/posts/6cVymZvn3f4](https://plus.google.com/113735310430199015092/posts/6cVymZvn3f4)）制作一个向导。

我无法访问从评论片段收集的数据。我在 ReviewFragment 中公开了 mCurrentReviewItems，然后我像这样尝试

```
mNextButton.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        if (mPager.getCurrentItem() == mCurrentPageSequence.size()) {
            ReviewFragment reviewFragment = (ReviewFragment)  mPagerAdapter.getItem(mPager.getCurrentItem());

            for (ReviewItem item : reviewFragment.mCurrentReviewItems)
                Log.d(MainActivity.TAG, "Item: " + item.getDisplayValue());
            }

        } else {
            if (mEditingAfterReview) {
                mPager.setCurrentItem(mPagerAdapter.getCount() - 1);
            } else {
                    mPager.setCurrentItem(mPager.getCurrentItem() + 1);
            }
        }
   }
}); 
```

但是它始终为空。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-04T17:13:04.873

里面`if (mPager.getCurrentItem() == mCurrentPageSequence.size()) { }`

对于单页变量：

```
String data = mWizardModel.findByKey("Sandwich:Bread").getData().getString(Page.SIMPLE_DATA_KEY); 
```

对于自定义页面：

```
String data = 
mWizardModel.findByKey(THE_KEY).getData().getString(CustomerInfoPage.YOUR_DATA_KEY); 
```

如果要将数据分配回向导，请将其放在 FragmentActivity 中 onCreate 的末尾：

```
Bundle data = new Bundle();
if (!TextUtils.isEmpty(DATA_STRING)) {
    data.putString(Page.SIMPLE_DATA_KEY, DATA_STRING);
    mWizardModel.findByKey("Sandwich:Bread"").resetData(data);
} 
```

关键“三明治：面包”来自示例，改变任何适合你的东西。永远不要尝试多一个，我认为它或多或少是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-16T09:07:17.527

抱歉耽搁了这么久，但我认为有人会发现此信息很有用。我找到了一种获取所有内容的方法，`ReviewItems`因为您可以拥有很多分支并且您将无法使用第一个答案。

我很确定，您的`mPagerAdapter::getItem`代码看起来像示例中的（所以它只是返回了新的片段，而不是返回当前的寻呼机片段）。您必须使用`instantiateItem`来获取您的`ReviewFragment`.

```
Object o = mPager.getAdapter().instantiateItem(mPager, mPager.getCurrentItem());
if(o instanceof ReviewFragment) {
  List<ReviewItem> items = ((ReviewFragment) o).getCurrentReviewItems();
  if(items != null) {
    Log.v(TAG, "Items are: " + items.toString());
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-23T11:25:46.663

任何仍在寻找此问题的解决方案的人都可以使用以下代码

```
 ArrayList<ReviewItem> reviewItems = new ArrayList<ReviewItem>();
    for (Page page : mWizardModel.getCurrentPageSequence()) {
        page.getReviewItems(reviewItems);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-13T23:45:05.780

最好的解决方案是将此库作为模块包含在您的项目中，并实现您自己的方法来获取 ReviewFragment 中的评论项目。

```
public List<ReviewItem> getReviewItems() {
    return mCurrentReviewItems;
} 
```

我不确定为什么开发人员没有添加它。这是项目中最重要的事情。选择物品并用它们做一些事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-25T09:21:13.170

这是我的代码@Anton_Shkurenko

```
mNextButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            if (mPager.getCurrentItem() == mCurrentPageSequence.size()) {
                Object o = mPager.getAdapter().instantiateItem(mPager, mPager.getCurrentItem());
                if(o instanceof ReviewFragment) {
                    List<ReviewItem> items = ((ReviewFragment) o).getCurrentReviewItems();
                    if(items != null) {
                        Log.v(TAG, "Items are: " + items.toString());
                    }
                }
            }
        }
    }); 
```

# ruby-on-rails - ActionView::Template::Error（nil:NilClass 的未定义方法 `+'）：

> ID：14765512
> 
> 赞同：1
> 
> 时间：2013-02-08T04:08:22.843
> 
> 标签：ruby-on-rails, ruby

我的一个页面不断出现此错误：

```
ActionView::Template::Error (undefined method `+' for nil:NilClass):
    15:   <div class="look_list">
    16:     <% collection.each do |look| %>
    17:       <div class="look_book" id="<%= look.content_id %>">
    18:         <% thumbnail_image = (look.processing? ? "/assets/processing_placeholder.gif" : (look.image.url(:thumb) + "?#{look.updated_at.to_i}")) %>
    19:         <%= image_tag thumbnail_image || "/assets/processing_placeholder.gif",:class=> "look_image", :size => "118x118" %>
    20:         <script type="text/javascript">
    21:
  app/views/looks/index.html.erb:18:in `block in _app_views_looks_index_html_erb__3409922204803071014_68666020'
  app/views/looks/index.html.erb:16:in `_app_views_looks_index_html_erb__3409922204803071014_68666020' 
```

一些背景，我的网站两天前进入了 502 bad gateway。我们设法重新启动了站点。但是，它导致了与 mongodb 的一些连接问题。这在我们重新启动数据库后得到解决。但是，这一页不断出现上述错误。这是以前从未发生过的。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:11:36.663

`look.image.url(:thumb)`第 18 行执行之前的值是多少？那是引发错误的地方，这是我看到的唯一地方`+`

我会检查您的数据，看看崩溃是否导致某处数据丢失，特别是该方法所需的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:22:29.840

试试这样的东西......

```
<div class="look_list">
        <% collection.each do |look| %>
         <div class="look_book" id="<%= look.content_id %>">
            <% thumbnail_image = look.image.url(:thumb) unless look.processing? %>
                  <% thumbnail_image.nil? ? "/assets/processing_placeholder.gif" : (look.image.url(:thumb) + "?#{look.updated_at.to_i}") %>
            <%= image_tag thumbnail_image ,:class=> "look_image", :size => "118x118" %>
        </div>
        <% end %>
</div> 
```

# python - 循环的问题是 django

> ID：14765515
> 
> 赞同：1
> 
> 时间：2013-02-08T04:08:38.417
> 
> 标签：python, django, loops

我从数据库中获取太多用户的数据，收集所有数据的数组对于每个用户有两行，只有最后一列值不同，其余值相同

```
r1 --> a , b , c , d , 1 (user1)
r2 -- > a , b , c , d , 2 (user1)
r3 --> z , x , v , n , 3 (user2)
r4 -- > z , x , v , n , 4 (user2) 
```

现在我想创建一个数组，其中仅包含与每个用户对应的一行，但包含每个值，例如

```
r1 --> a , b , c , d , 1 , 2 (user1)
r2 -- >z , x , v , n , 3 , 4 (user2) 
```

我试过 for loop ，但结果数组只包含最后一条记录，我想要一个包含所有用户的所有记录的数组。

例如

```
cursor.execute("some query ")
    numrows = int(cursor.rowcount) 
```

让这 num 行返回值 4。

然后

```
for I in range(numrows): 
```

经过

将循环 4 次，但实际上它包含两个用户的值。

但是当我返回结果数组时，它只包含最后一个用户的值。

所以请给我一些建议，这样当我这样做时`for I in range(numrows):`，它返回的数组包含所有记录，而不仅仅是最后一个用户记录

**编辑：**

我也尝试过while循环

```
arr=[]
while arr in row:
   arr= row[0][1] 
```

但是当我返回这个 arr 时，它是空的，但是如果我返回 row[0][1] 那么它会显示该列的值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:59:13.133

假设您的数据按前 4 个条目排序（您可以在 SQL 中执行此操作），您可以使用以下代码转换数据：

```
from itertools import groupby
from operator import itemgetter

rows=[
    ('a' , 'b' , 'c' , 'd' , 1),
    ('a' , 'b' , 'c' , 'd' , 2),
    ('z' , 'x' , 'v' , 'n' , 3),
    ('z' , 'x' , 'v' , 'n' , 4)]

out = []
for key,group in groupby(rows, itemgetter(0,1,2,3)):
    new_row = list(key)
    for v in group:
        new_row.append(v[4])
    out.append(new_row)

print out 
```

哪个打印

```
[['a', 'b', 'c', 'd', 1, 2], ['z', 'x', 'v', 'n', 3, 4]] 
```

* * *

这是给您的另一个想法：使用您的前 4 个条目作为字典中的键。

```
from collections import defaultdict

rows=[
    ('a' , 'b' , 'c' , 'd' , 1),
    ('a' , 'b' , 'c' , 'd' , 2),
    ('z' , 'x' , 'v' , 'n' , 3),
    ('z' , 'x' , 'v' , 'n' , 4)]

d = defaultdict(list)
for r in rows:
    d[tuple(r[0:4])].append(r[4])

print d[('a' , 'b' , 'c' , 'd')]
print d[('z' , 'x' , 'v' , 'n')] 
```

印刷

```
[1, 2]
[3, 4] 
```

使用这种方法，您的行是否按前 4 列排序并不重要

# opengl-es - 如何从 mipmapping 中消除纹理接缝

> ID：14765517
> 
> 赞同：5
> 
> 时间：2013-02-08T04:08:45.313
> 
> 标签：opengl-es, webgl, textures, mipmaps

我在地形的片段着色器中使用纹理混合来从一个纹理混合到下一个纹理。就在仅使用我的草纹理和混合泥土/草或雪/草纹理之间的接缝处，mipmap 似乎造成了丑陋的接缝（见下图）。禁用 mipmapping 可以解决问题，但会使我的地形在远处变得非常粗糙/难看。有没有办法在不禁用 mipmapping 的情况下消除这种接缝？

* * *

地形-vs.glsl：

```
precision mediump float;

attribute vec3 Position;
attribute vec2 TextureCoord;

uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

varying vec2 texCoord;
varying float y;

void main(void) {
  gl_Position = uPMatrix * uMVMatrix * vec4(Position, 1.0);
  texCoord = TextureCoord;
  y = Position.y;
} 
```

地形-fs.glsl：

```
precision mediump float;

uniform sampler2D dirt_texture;
uniform sampler2D grass_texture;
uniform sampler2D snow_texture;

varying vec2 texCoord;
varying float y;

void main(void) {
  if (y < -5.0) {
    gl_FragColor = texture2D(dirt_texture, texCoord);
  } else if (y < 0.0) {
    gl_FragColor = mix(
      texture2D(dirt_texture, texCoord),
      texture2D(grass_texture, texCoord),
      (y + 5.0) / 5.0
    );
  } else if (y < 3.0) {
    gl_FragColor = texture2D(grass_texture, texCoord);
  } else if (y < 5.0) {
    gl_FragColor = mix(
      texture2D(grass_texture, texCoord),
      texture2D(snow_texture, texCoord),
      (y - 3.0) / 2.0
    );
  } else {
    gl_FragColor = texture2D(snow_texture, texCoord);
  }
} 
```

* * *

纹理管理器::初始化

```
gl.bindTexture(gl.TEXTURE_2D, texture.texture);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.image);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
gl.generateMipmap(gl.TEXTURE_2D);
gl.bindTexture(gl.TEXTURE_2D, null); 
```

* * *

配置：

*   视窗 7 专业版 SP1
*   谷歌浏览器 24.0.1312.57 m
*   英伟达 GTX 680

* * *

正常视图 ![正常视图](../Images/3d2d50bd1d800100fa1948c2fe249af4.png)

放大 ![放大](../Images/5d0f051542bfd986e9dd0a948de47ddc.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T17:25:21.753

## 解释原始片段着色器产生伪影的原因

GPU 需要知道梯度才能对纹理进行采样。您要么显式提供渐变（textureGrad），要么让 GPU 为您计算渐变。使用局部差分计算自动计算的梯度。有关详细信息，请参阅函数 dFdx ( [http://www.opengl.org/sdk/docs/manglsl/xhtml/dFdx.xml](http://www.opengl.org/sdk/docs/manglsl/xhtml/dFdx.xml) )。

当函数计算一个像素而不是附近像素（非均匀控制流）时，计算导数会产生未定义的结果。

答案 1 中的着色器效果很好，因为纹理总是被采样的，无论是否使用它们的结果。

更多信息在这里[http://www.opengl.org/wiki/Sampler_(GLSL)#Non-uniform_flow_control](http://www.opengl.org/wiki/Sampler_(GLSL)#Non-uniform_flow_control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T21:49:53.093

据我所知，下面的片段着色器与我上面提供的基本相同，但是当传入的参数`a`接近 1.0 或 0.0 时，显然 mix 会做一些时髦的事情。不使用混合和手动混合着色器似乎可以解决这个问题。

* * *

更新片段着色器：

```
precision mediump float;

uniform sampler2D dirt_texture;
uniform sampler2D grass_texture;
uniform sampler2D snow_texture;

varying vec2 texCoord;
varying float y;
void main(void) {
  vec4 dirt = texture2D(dirt_texture, texCoord);
  vec4 grass = texture2D(grass_texture, texCoord);
  vec4 snow = texture2D(snow_texture, texCoord);
  float dirt_weight = 0.0;
  float grass_weight = 0.0;
  float snow_weight = 0.0;
  if (y < -5.0) {
    dirt_weight = 1.0;
  } else if (y < 0.0) {
    grass_weight = (y + 5.0) / 5.0;
    dirt_weight = 1.0 - grass_weight;
  } else if (y < 3.0) {
    grass_weight = 1.0;
  } else if (y < 5.0) {
    snow_weight = (y - 3.0) / 2.0;
    grass_weight = 1.0 - snow_weight;
  } else {
    snow_weight = 1.0;
  }
  gl_FragColor = dirt * dirt_weight + grass * grass_weight + snow * snow_weight;
} 
```

# c++ - ofstream 将数据写入文件：如何将先前定义的字符串作为文件名传递

> ID：14765519
> 
> 赞同：-1
> 
> 时间：2013-02-08T04:08:57.617
> 
> 标签：c++, string, csv, ofstream, qstring

我有一个用 C++、OpenCV 和 Qt 编写的程序，我正在尝试将数据写入 csv 文件。在我的 Qt Widget 中，我创建了一个 QFileDialog，它允许我选择保存 csv 文件的位置。

然后将该路径存储为 QString，并转换为 std::string，如下所示；

```
std::string OutputFileName = OutputFile.toUtf8().constData(); 
```

然后我尝试将此 std::string 传递给我的 ofstream::open 函数，如下所示：

```
ofstream CSVFile;
CSVFile.open(OutputFileName); 
```

这就是问题所在；它拒绝编译，给出错误

> 没有匹配函数调用'std::basic_ofstream >::open(std::string&)'

我对编程很陌生，因此我不知道这里到底是什么问题。我试过看[这个](https://stackoverflow.com/questions/9284349/how-to-pass-a-string-to-ofstreamopen-for-the-file-name)，但据我所知，这是一个 Windows 特定的解决方案，我正在使用 OSX。

谁能告诉我如何成功地将存储在 QString 中的文件路径传递给 CSVFile.open() 术语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:10:01.103

在 C++03 中，[ofstream::open](http://en.cppreference.com/w/cpp/io/basic_ofstream/open)接受`const char*`参数。

如果 OutputFileName 是 std::string。

尝试：

```
CSVFile.open(OutputFileName.c_str()); 
```

如果 outputFileName 是 Qstring

```
CSVFile.open(OutputFileName.toStdString().c_str()); 
```

请参阅[QString::toStdString](http://qt-project.org/doc/qt-4.8/qstring.html#toStdString)参考

# android - android eclipse中读取项目文件失败

> ID：14765520
> 
> 赞同：0
> 
> 时间：2013-02-08T04:09:38.873
> 
> 标签：android, eclipse, github, rss-reader

嗨，我已经从[这里导入了 android BBC_NEWS_READER 应用程序](https://github.com/okey666/BBC-News-Reader)

在这里，我从[这里添加了库](https://github.com/ahorn/android-rss)

但是当我导入 RSSFeed 应用程序时，我收到以下错误。

错误是：

```
Failed to read the project file in android eclipse (.project) for 'android-rss-master'.
The file has been changed on disk,and it contains invalid information.
The project will not function properly until the description file is restored to a valid state. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:26:55.227

*   下载 Zip 文件。（BBC-News-Reader）和图书馆（android-rss）。
*   将应用程序（BBC-News-Reader）和库（android-rss）保存在一个文件夹中，然后选择该文件夹进行导入。
*   右键单击 ReaderActivity(BBC-News-Reader)->properties->android
*   添加“android-rss-master”库。如果存在目标解析问题，请选择其他目标 SDK。

*   注意：您还需要 ActionBarSherlock 和 View Pager 库才能使其工作。

# javascript - Javascript正则表达式 - 百分号前的数字

> ID：14765521
> 
> 赞同：0
> 
> 时间：2013-02-08T04:09:43.597
> 
> 标签：javascript, regex

我有一个字符串说：

```
 var currentLabel = "Uploading file... 0%" 
```

这是上传开始时的初始状态，我需要在操作运行时对其进行更新。我需要取那个 0 并用一个新数字替换它，但是我不能只得到一个子字符串，因为它最终会变成 2 位数字并且长度会改变......

如果长度是恒定的，我可以这样做：

```
var newLabel = currentLabel.substring(0, currentLabel.length - 2) + percent + "%"; 
```

我猜我需要一个正则表达式或任何其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:16:07.483

您可能可以使用`indexOf`and的组合来做到这一点`substring`，但正则表达式确实使它更简单：

```
newLabel = currentLabel.replace(/\d+$/, percent + "%"); 
```

字符串中没有其他数字，对吗？

您也可以再次编写字符串.. 它可能比正则表达式更便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:16:16.147

当然可以通过正则表达式和简单的替换来完成

```
([\S\s]+?[\d]+([%]) 
```

替换字符串

```
$1 "new percentage" $2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:17:15.250

/.*([0-9]+)\%/ 这样的东西会给你这个数字。但实际上，要做到这一点还有很长的路要走。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T04:21:24.637

在这种情况下，你真的不需要正则表达式：

```
var currentLabel = "Uploading file... ";
var newLabel = currentLabel + percent + "%"; 
```

# php - APC 无法正常工作

> ID：14765524
> 
> 赞同：0
> 
> 时间：2013-02-08T04:09:51.970
> 
> 标签：php, caching, apc

我刚刚用 PHP Handler FastCGI 安装了 APC。但似乎缓存永远不会工作。

```
if(($t=apc_fetch('key_4321'))===FALSE){
    $t=time();
    apc_add('key_4321', $t, 24*60*60);
}

echo $t; 
```

**几乎每次我运行它时，我都会得到一个不同的时间戳。只有几次它仍然是相同的结果。可能的原因是什么？**

我正在使用 PHP 版本 5.3.21，服务器 API 是 CGI/FastCGI。下面是我的 APC 设置。

```
Configuration

apc

APC Support enabled
Version 3.1.13
APC Debugging   Disabled
MMAP Support    Enabled
MMAP File Mask  no value
Locking type    File Locks
Serialization Support   php
Revision    $Revision: 327136 $
Build Date  Feb 7 2013 21:44:30

Directive   Local Value Master Value
apc.cache_by_default    On  On
apc.canonicalize    On  On
apc.coredump_unmap  Off Off
apc.enable_cli  On  On
apc.enabled On  On
apc.file_md5    Off Off
apc.file_update_protection  2   2
apc.filters no value    no value
apc.gc_ttl  36000   36000
apc.include_once_override   On  On
apc.lazy_classes    Off Off
apc.lazy_functions  Off Off
apc.max_file_size   1M  1M
apc.mmap_file_mask  no value    no value
apc.num_files_hint  1000    1000
apc.preload_path    no value    no value
apc.report_autofilter   Off Off
apc.rfc1867 Off Off
apc.rfc1867_freq    0   0
apc.rfc1867_name    APC_UPLOAD_PROGRESS APC_UPLOAD_PROGRESS
apc.rfc1867_prefix  upload_ upload_
apc.rfc1867_ttl 3600    3600
apc.serializer  default default
apc.shm_segments    1   1
apc.shm_size    256M    256M
apc.slam_defense    On  On
apc.stat    On  On
apc.stat_ctime  Off Off
apc.ttl 36000   36000
apc.use_request_time    On  On
apc.user_entries_hint   4096    4096
apc.user_ttl    72000   72000
apc.write_lock  On  On

cgi-fcgi

Directive   Local Value Master Value
cgi.check_shebang_line  1   1
cgi.discard_path    0   0
cgi.fix_pathinfo    1   1
cgi.force_redirect  1   1
cgi.nph 0   0
cgi.redirect_status_env no value    no value
cgi.rfc2616_headers 0   0
fastcgi.logging 1   1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:17:48.067

你确定你是通过 FastCGI 而不仅仅是 CGI 运行的吗？根据这篇文章，如果您在 CGI 下运行，那么它将解释您的问题。

[APC 不缓存文件，但缓存用户数据](https://stackoverflow.com/questions/5509962/apc-doesnt-cache-files-but-caches-user-data)

# c++ - cvCamShift 如何运作良好

> ID：14765525
> 
> 赞同：0
> 
> 时间：2013-02-08T04:09:54.403
> 
> 标签：c++, opencv, tracking

我正在尝试在 opencv 中使用 cvCamShift 函数。我为此编写了一个类。这是它的代码：

```
#include <cv.h>
#include <highgui.h>
using namespace std;

class Tracker{

    // File-level variables
    IplImage * pHSVImg; // the input image converted to HSV color mode
    IplImage * pHueImg; // the Hue channel of the HSV image
    IplImage * pMask; // this image is used for masking pixels
    IplImage * pProbImg; // the face probability estimates for each pixel
    CvHistogram * pHist; // histogram of hue in the original face image

    CvRect prevFaceRect;  // location of face in previous frame
    CvBox2D faceBox;      // current face-location estimate

    int vmin;
    int vmax;
    int smin;

    void updateHueImage(IplImage* pImg);
public:
    Tracker(IplImage * pImg, CvRect  pFaceRect);
    ~Tracker();
    CvBox2d track(IplImage* pImg);

};

Tracker::Tracker(IplImage * pImg, CvRect pFaceRect){
    // File-level variables
    int   nHistBins = 30;                 // number of histogram bins
    float rangesArr[] = {0,180};          // histogram range
    vmin = 10;
    vmax = 256;
    smin = 55;
    float * pRanges = rangesArr;

    pHSVImg  = cvCreateImage( cvGetSize(pImg), 8, 3 );
    pHueImg  = cvCreateImage( cvGetSize(pImg), 8, 1 );
    pMask    = cvCreateImage( cvGetSize(pImg), 8, 1 );
    pProbImg = cvCreateImage( cvGetSize(pImg), 8, 1 );

    pHist = cvCreateHist( 1, &nHistBins, CV_HIST_ARRAY, &pRanges, 1 );

    float maxVal = 0.f;

    // Create a new hue image
    updateHueImage(pImg);

    // Create a histogram representation for the face
    cvSetImageROI( pHueImg, pFaceRect );
    cvSetImageROI( pMask,   pFaceRect );
    cvCalcHist( &pHueImg, pHist, 0, pMask );
    cvGetMinMaxHistValue( pHist, 0, &maxVal, 0, 0 );
    cvConvertScale( pHist->bins, pHist->bins, maxVal? 255.0/maxVal : 0, 0 );
    cvResetImageROI( pHueImg );
    cvResetImageROI( pMask );

    // Store the previous face location
    prevFaceRect = pFaceRect;

}

Tracker::~Tracker(){
    cvReleaseImage( &pHSVImg );
    cvReleaseImage( &pHueImg );
    cvReleaseImage( &pMask );
    cvReleaseImage( &pProbImg );

    cvReleaseHist( &pHist );
}

void Tracker::updateHueImage(IplImage * pImg)
{
    // Convert to HSV color model
    cvCvtColor( pImg, pHSVImg, CV_BGR2HSV );

    // Mask out-of-range values
    cvInRangeS( pHSVImg, cvScalar(0, smin, MIN(vmin,vmax), 0),
                cvScalar(180, 256, MAX(vmin,vmax) ,0), pMask );

    // Extract the hue channel
    cvSplit( pHSVImg, pHueImg, 0, 0, 0 );
}

CvBox2D Tracker::track(IplImage * pImg)
{
    CvConnectedComp components;

    updateHueImage(pImg);

    cvCalcBackProject( &pHueImg, pProbImg, pHist );
    cvAnd( pProbImg, pMask, pProbImg, 0 );

    cvCamShift( pProbImg, prevFaceRect,
                cvTermCriteria( CV_TERMCRIT_EPS | CV_TERMCRIT_ITER, 10, 1 ),
                &components, &faceBox );

    prevFaceRect = components.rect;
    faceBox.angle = -faceBox.angle;

    return faceBox;
} 
```

它工作得很好，但是当被跟踪的对象超出框架或有东西出现在它前面时，它会产生运行时错误。我的一个朋友的代码与我的代码非常相似，即使在最坏的情况下也不会产生任何运行时错误。请指导我如何调试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:03:36.157

我认为当被跟踪的对象超出框架或前面有东西时，参数`prevFaceRect`将为空，可能正因为如此，它显示错误。所以在调用这个函数之前

```
cvCamShift( pProbImg, prevFaceRect,
                cvTermCriteria( CV_TERMCRIT_EPS | CV_TERMCRIT_ITER, 10, 1 ),
                &components, &faceBox ); 
```

添加一个检查，以了解是否`prevFaceRect`为空

# c++ - 如何最有效地从具有大小的 char * 构造 std::string

> ID：14765528
> 
> 赞同：3
> 
> 时间：2013-02-08T04:10:03.110
> 
> 标签：c++, std, stdstring

我正在寻找一种实现`sprintf()`功能的方法，并从[std::string 格式（如 sprintf](https://stackoverflow.com/a/8098080/369450)`std::string` ）中找到了一个很好的答案。虽然这有点 hacky，因为它直接写入从. 所以我使用with和重新实现了它。`string.c_str()``char *``malloc()``realloc()`

```
std::string string_format(const char * format, ...) {
    size_t size;
    size_t n;
    va_list args;
    char * buffer;
    std::string str;

    size = 100;
    buffer = malloc(size);
    for (;;) {
        va_start(args, format);
        n = vsnprintf(buffer, size, format, args);
        va_end(args);
        if (n > -1) {
            if (n < size) {
                size = n;
                break;
            }
            size = n + 1;
        } else {
            size *= 2;
        }
        buffer = realloc(buffer, size);
    }

    str = std::string(buffer, size);

    free(buffer);
    return str;
} 
```

我知道我可以这样做：

```
str = std::string(buffer); 
```

但是，它必须基本上做`strlen(buffer)`。我可以通过以下方式使它变得更好：

```
str = std::string(buffer, size); 
```

但是`string.swap()`通过交换内部缓冲区而不是复制它会更有效吗？

```
str.swap(std::string(buffer, size)); 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T07:28:27.570

只需使用`str.assign(buffer, size);`

# ruby-on-rails - 保存数据并重新填充表单，而不为每个字段创建列

> ID：14765529
> 
> 赞同：0
> 
> 时间：2013-02-08T04:10:05.533
> 
> 标签：ruby-on-rails, forms

我有一种情况，我需要从用户那里收集数据、保存数据，然后才能返回并查看数据。在这种情况下，它是一项调查。通常我会创建一个模型并进行一些验证，这将非常简单。

但是在这种情况下，问题变化如此频繁，以至于如果我这样做了，我可能会发现自己正在编写新的迁移并不断地执行各种维护。由于我们真正想要的只是数据本身，所以我想到我应该只创建一个具有 id 字段和 form_data 字段的模型，然后将任何参数粘贴到该 form_data 字段中。这样我所要做的就是改变视图而不是弄乱模型。

但后来如果我想编辑调查中的数据，我将如何填充表单字段？目标是仅在我的老板想要添加新问题时更改视图。

PS我不想使用Surveyor来完成这项任务，因为我希望能够做一些在Surveyor中不容易做到的事情，据我所知。

所以这就是它的样子

```
SurveySubmissions
  id : integer
  form_data: string

SurveySubmissions.find(1).form_data
   "name":"Kevin"
   "gender":"Male"
   "favorite_color":"blue" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:05:28.060

如果您使用的是 PostgreSQL，您可以查看 Hstore。一个不错的起点是 Railscast：[http](http://railscasts.com/episodes/345-hstore) ://railscasts.com/episodes/345-hstore （专业剧集，因此需要付费）。它允许您将所有问题/答案对存储在单个数据库列中。

您还可以将数据序列化为 json/yml 的单个数据库列，并在模型上使用虚拟属性来轻松填充表单字段（关于虚拟属性的 Railscast 插曲：[http ://railscasts.com/episodes/16-virtual-属性修改](http://railscasts.com/episodes/16-virtual-attributes-revised)，还有老剧免费）

另一个解决方案（也是我最喜欢的）是使用 MongoDB + Mongoid 及其动态属性。如果您还没有开始编码，这可能是最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:28:54.680

这可能对您有帮助：

用户模型

```
has_many :surveys 
```

调查模型

```
belongs_to :user
has_many :questions 
```

提交模型

```
has_many :questions
belongs_to :user
belongs_to :survey 
```

问题模型

```
has_many :answers
polymorphic => belongs_to "survey and submissions" 
```

答案模型

```
belongs_to :submission
belongs_to :question 
```

最重要的是，您可以根据您的要求建立关系和其他您需要的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:47:15.593

我认为最好的选择是将表单字段保存到数据库中，然后在编辑时使用 javascript 重新填充表单。因此，我将所有字段值拉入一个变量，然后使用 JQuery.each 填充字段。

```
surveySubmissionData = {"incident_id":"2013BaconSupreme",
    "_confirmed":"No",
    "_date_began":"2/26/2013"}

// Put some code here that loops through the surveySubmissionData 
// and populates the form.

jQuery.each(surveySubmissionData, function(i, val) {
    $("#" + i).val(val);
}); 
```

# sql - 获得指数值

> ID：14765533
> 
> 赞同：0
> 
> 时间：2013-02-08T04:10:53.667
> 
> 标签：sql, sql-server-2008

在将浮点值转换为 varchar 时，它给了我指数值。例如 -

```
if '313185515' is float value then its varchar 
value I am getting is **3.13186e+008** 
```

我不想要指数值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:19:16.350

看看使用`STR`：

```
SELECT LTRIM(STR(313185515, 10)) 
```

或者如果你想要小数：

```
SELECT LTRIM(STR(313185515, 10, 2)) 
```

[http://sqlfiddle.com/#!3/d41d8/8588](http://sqlfiddle.com/#!3/d41d8/8588)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:27:11.650

我们也可以这样做——

```
CONVERT(VARCHAR(50),Cast (ColumnName as Decimal(18,0))) 
```

# c++ - 如何在 CWinApp 中获取 WM_POWERBROADCAST 消息？

> ID：14765534
> 
> 赞同：1
> 
> 时间：2013-02-08T04:10:57.023
> 
> 标签：c++, mfc, power-management, visual-c++-2010, windows-messages

我创建了继承的类，`CWinApp`并且这个类有一个计时器（使用窗口计时器）。

当 PC 进入睡眠模式并唤醒时，定时器回调称为准确的唤醒时间。当 PC 从挂起恢复时，我想不调用计时器回调。

所以我尝试使用`WM_POWERBROADCAST`消息。但这条消息没有在`PreTranslateMessage()`API 中捕获。我也尝试`SetWindowLong()`使用自己的 API，但仍然没有收到 `WM_POWERBROADCAST`消息。

有什么办法进去`WM_POWERBROADCAST`吗`CWinApp`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-25T00:48:35.797

在 Visual Studio C++ MFC 应用程序中，您需要向`ON_MESSAGE()`消息映射中添加一个以查找`WM_POWERBROADCAST`消息，如下例所示：

```
BEGIN_MESSAGE_MAP(CFrameworkWndApp, CWinApp)
    //{{AFX_MSG_MAP(CFrameworkWndApp)
    ON_WM_CHAR()
    ON_WM_TIMER()
    //}}AFX_MSG_MAP
    ON_MESSAGE(WM_POWERBROADCAST, OnPowerMsgRcvd)
END_MESSAGE_MAP() 
```

然后，您将需要添加消息处理函数以及类定义更改，以声明消息处理程序的成员函数，以便您可以`wParam`像在此框架中一样检查消息类型的变量。请记住返回一个`LRESULT`值，指示您是否处理了该消息。

```
// Handle the WM_POWERBROADCAST message to process a message concerning power management
// such as going to Sleep or Waking Up.
LRESULT CFrameworkWndApp::OnPowerMsgRcvd(WPARAM wParam, LPARAM lParam)
{
    LRESULT  lrProcessed = 0;  // indicate if message processed or not

    switch (wParam) {
        case PBT_APMPOWERSTATUSCHANGE:
            TRACE0("PBT_APMPOWERSTATUSCHANGE  received\n");
            break;
        case PBT_APMRESUMEAUTOMATIC:
            TRACE0("PBT_APMRESUMEAUTOMATIC  received\n");
            break;
        case PBT_APMRESUMESUSPEND:
            TRACE0("PBT_APMRESUMESUSPEND  received\n");
            break;
        case PBT_APMSUSPEND:
            TRACE0("PBT_APMSUSPEND  received\n");
            break;
    }

    // indicate if framework needs to handle message or we did ourselves.
    return lrProcessed;
} 
```

有关处理消息的详细信息，请参阅[Microsoft 文档 - 电源管理](https://docs.microsoft.com/en-us/windows/desktop/Power/power-management-portal)以及该文档的特定小节[Microsoft 文档 - WM_POWERBROADCAST](https://docs.microsoft.com/en-us/windows/desktop/Power/wm-powerbroadcast-messages)消息。

另请参阅影响 Windows 如何确定应用程序是否处于活动状态以及是否应进入睡眠模式的[SetThreadExecutionState() 函数。](https://docs.microsoft.com/en-us/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate)

另请参阅以下 Stack Overflow 帖子：

*   [WM_POWERBROADCAST 消息未在 MFC Dlg 中捕获](https://stackoverflow.com/questions/867682/wm-powerbroadcast-message-not-caught-in-mfc-dlg)
*   [Windows XP 中的仅消息窗口未收到 WM_POWERBROADCAST](https://stackoverflow.com/questions/5884622/wm-powerbroadcast-not-received-by-message-only-window-in-windows-xp)
*   [如何在线程内接收 WM_POWERBROADCAST？](https://stackoverflow.com/questions/42739404/how-to-receive-wm-powerbroadcast-inside-of-a-thread)
*   [如何检测 Windows Mobile 上的挂起？](https://stackoverflow.com/questions/586683/how-can-i-detect-suspend-on-windows-mobile)
*   [如何检测 Windows 挂起消息？](https://stackoverflow.com/questions/21178137/how-to-detect-windows-suspend-message)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:35:18.630

这是一条 Windows 消息。它被发送到所有顶级窗口。因此，为了捕获此消息，请在主窗口中创建一个处理程序

# .net - .net 应用程序无法使用 Windows 2008 服务器或 Windows 8 中的 asmx Web 服务

> ID：14765536
> 
> 赞同：0
> 
> 时间：2013-02-08T04:11:00.847
> 
> 标签：.net, web-services, windows-8, .net-3.5, asmx

我有一个问题让我很沮丧！

我有一个托管在 Windows 2007 R2 服务器上的 .NET asmx Web 服务。此 Web 服务使用 .NET 框架的 3.5 版。

当安装在 Windows XP、Vista 和 Windows 7 上时，我可以从我的基于 Windows 窗体的应用程序（也使用 .NET 框架的 3.5 版）实例化并从此 Web 服务调用一个简单的 WebMethod，而不会出错。

但是，当我在运行 Windows 8 或 Windows Server 2008 R2 的计算机上安装同一应用程序时尝试从同一应用程序执行相同调用时，我会收到实例化错误（对象未设置...）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:39:34.257

在您的 Windows 8 上安装 .NET Framework 3.5 以查看它是否有帮助。查找有关[在 Windows 8 上安装 .NET Framework 3.5 的](http://msdn.microsoft.com/en-us/library/hh506443.aspx)更多信息。

# php - 如何将选择列表值与 mysql 表值同步

> ID：14765545
> 
> 赞同：0
> 
> 时间：2013-02-08T04:12:22.870
> 
> 标签：php, mysql, database, forms

当我输入长度和宽度选择的项目时，平方英尺是正确的，但在定价时，它总是将总平方英尺乘以第一个项目的价格......价格在一段时间内，但它与产品不同步。 ..我应该在哪里寻找任何想法？

```
while($info = mysql_fetch_array( $data )) 
 { 
$resim = $info[resim];
$isim = $info[isim];
$boyut = $info[boyut];
$pcs = $info[adet];
$sqft = $info[sqft];
$TileNameList .= "<option value=\"$sqft\">$isim $boyut</option>";
$price .= $info[price];
}
/////////Formdan gelen yada Giden//////////////
$length =htmlspecialchars(stripslashes($_POST['Length'])); 
$width =htmlspecialchars(stripslashes($_POST['Width'])); 
$TileSqft =htmlspecialchars(stripslashes($_POST['TileName'])); 

/////Matematiksel islemler/////////

$equals = $length * $width;
$box = round($equals / $TileSqft);
$TotalSqft = $box * $TileSqft;
$TotalPrice = $TotalSqft * $price; 
```

这就是我获得长度*宽度但总价格错误的表格。

```
 <td><form id="form5" name="form5" method="post" action="">
        <select name="TileName" id="TileName">
        <option>Select</option>
<?php  echo ($TileNameList); ?>
        </select>
      </td>
      <td><input name="Length" type="text" id="Length"/></td>
      <td><input type="text" name="Width" id="Width"/></td>
      <td><input type="text" name="Sqft" id="Sqft" value="<?php echo ($equals); ?>"/></td>
      <td><?php echo "You will need <span style=\"color:red\">$box</span> Boxes<br> Which is <span style=\"color:red\">$TotalSqft</span> "; ?></td>
      <td><?php echo "$$TotalPrice"; ?></td>
    </tr>
    <tr >
      <td colspan="6" align="center">
        <input type="submit" name="Submit" id="Submit" value="Submit" />
      </form></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:31:56.017

您正在附加`$price`我认为您应该添加的`price` 代码是

```
$price=0;//Add this line
while($info = mysql_fetch_array( $data )) 
{ 
$resim = $info[resim];
$isim = $info[isim];
$boyut = $info[boyut];
$pcs = $info[adet];
$sqft = $info[sqft];
$TileNameList .= "<option value=\"$sqft\">$isim $boyut</option>";
$price += $info[price];//change this line
}
/////////Formdan gelen yada Giden//////////////
$length =htmlspecialchars(stripslashes($_POST['Length'])); 
$width =htmlspecialchars(stripslashes($_POST['Width'])); 
$TileSqft =htmlspecialchars(stripslashes($_POST['TileName'])); 

/////Matematiksel islemler/////////

$equals = $length * $width;
$box = round($equals / $TileSqft);
$TotalSqft = $box * $TileSqft;
$TotalPrice = $TotalSqft * $price; 
```

# python - Django 教程（使用 Heroku 上的指南），“请提供 ENGINE 值”（是的，我已阅读其他主题）

> ID：14765546
> 
> 赞同：1
> 
> 时间：2013-02-08T04:12:33.907
> 
> 标签：python, django, web-applications, heroku

我已经阅读了很多类似的问题，并且我花了很多时间试图自己解决这个问题，但我仍然陷入困境。这是我的情况：

我正在浏览 Heroku 上的 Django 指南（[https://devcenter.heroku.com/articles/django](https://devcenter.heroku.com/articles/django)）。我最初是从 windows 开始的，但在遇到各种问题后，我决定切换到 linux 会容易得多。我擦了擦硬盘，并排安装了 Ubuntu 12.10 和 Win 7 以实现双启动。一切都已经用 pip 安装了（同样，遵循 Heroku 指南）。我正在使用 PostgreSQL，因为它（据说）与 Heroku 很好地集成了。在我开始尝试之前，这里是错误（它来自本教程的末尾）：

```
(venv)wtodom@wubuntu:~/hellodjango$ python manage.py syncdb
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/db/backends/dummy/base.py", line 15, in complain
    raise ImproperlyConfigured("settings.DATABASES is improperly configured. "
django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details. 
```

如果我尝试使用其绝对路径指定设置文件以确保它使用正确的文件，我会得到：

```
(venv)wtodom@wubuntu:~/hellodjango$ python manage.py syncdb --settings=/home/wtodom/hellodjango/hellodjango/settings.py
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 8, in <module>
    from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/core/management/sql.py", line 6, in <module>
    from django.db import models
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/db/__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/home/wtodom/hellodjango/venv/local/lib/python2.7/site-packages/django/conf/__init__.py", line 95, in __init__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings '/home/wtodom/hellodjango/hellodjango/settings.py' (Is it on sys.path?): Import by filename is not supported. 
```

许多类似的问题让人们编辑了错误的 settings.py 文件。我知道我编辑了正确的。这是它的一只猫（因为它有点长） - [https://gist.github.com/wtodom/4736303](https://gist.github.com/wtodom/4736303)。对于其中的数据，我已经尝试了所有我能想到的组合，包括空字符串——没有区别。

我读过的其他帖子有人对他们运行的 Django 版本有问题。我的是一个全新的安装，所以不是那样的。

有些人遇到了 Django 不在路上的问题。如果我从项目根目录打开一个 python shell，我可以导入东西，所以不是这样。

有些人的 settings.py 文件中没有值，但正如您从要点中看到的那样，我有。`python manage.py syncdb`我还尝试在运行和不运行 pgadmin 并登录的情况下运行命令 ( )。

在那张纸条上，这里是一个 pgadmin 的屏幕截图，显示我已经创建了数据库：http: [//i.imgur.com/CXD2AWo.png](http://i.imgur.com/CXD2AWo.png)

这是我在 PostgreSQL 中 \l 时得到的结果（自从 SO 杀死格式后的另一个要点）：[https ://gist.github.com/wtodom/4736359](https://gist.github.com/wtodom/4736359)

当我在这里时，这里有一个 \du 列表：[https ://gist.github.com/wtodom/4736442](https://gist.github.com/wtodom/4736442)

我确保我的 manage.py 包含`os.environ.setdefault("DJANGO_SETTINGS_MODULE", "hellodjango.settings")`在其中。

Heroku 教程中的所有内容都可以在 Ubuntu 中顺利运行，直到我尝试在本地同步数据库（python manage.py syncdb）。我可以通过 heroku 运行相同的命令，它工作正常（`heroku run python manage.py syncdb`）。

我确定我可能忘记了我尝试或阅读过的相关内容。我花了大约 6 个小时阅读并试图让这件事继续下去，就在这个错误上。我真的不知道还能尝试什么。

另外，我对数据库和非 .NET Web 开发非常陌生（我从事过项目，但从未设置过），所以如果您知道我的设置有什么问题，请尽量弄清楚。非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-21T16:46:17.303

Heroku 和您的本地计算机通常需要不同的数据库设置。一种常见的处理方法是首先在 settings.py 文件中列出您的本地数据库设置，然后检查您的代码当前是否在 Heroku 上运行，如果是，则使用 Heroku 需要的内容覆盖您的数据库设置. 这允许单个 settings.py 文件在两种环境中工作。

Heroku 创建一个名为 DATABASE_URL 的环境变量，其中包含数据库 URL 字符串。检查您的代码是否在 Heroku 上运行的常用方法是检查该环境变量。然后，如果存在，请使用 dj_database_url 模块，该模块知道如何将该字符串解析到 Django 配置所需的字典中。

您的代码中唯一不正确的是您在调用 dj_database_url.config() 之前没有先检查环境变量。这意味着通常只能在 Heroku 中运行的 dj_database_url 也在您的本地计算机上运行。由于您的本地计算机几乎可以肯定没有设置 DATABASE_URL 环境变量，因此 dj_database_url 返回一个空字典。因此，当您的代码未在 Heroku 上运行时，它会使用空字典覆盖您的本地数据库配置。Django 在该字典中查找它需要的信息，但找不到它并引发错误。

要解决此问题，请在使用 dj_database_url 之前添加对 DATABASE_URL 的检查。

在 settings.py 的末尾更改此部分：

```
import dj_database_url
DATABASES['default'] = dj_database_url.config() 
```

对此：

```
if os.environ.get('DATABASE_URL', None):
    import dj_database_url
    DATABASES['default'] = dj_database_url.config() 
```

# javascript - 在 Android 上使用 java8 lib（带有 v8 引擎的 Java 脚本）

> ID：14765548
> 
> 赞同：2
> 
> 时间：2013-02-08T04:12:52.250
> 
> 标签：javascript, android, v8

我需要从 Java 执行 JavaScript 代码，所以我尝试使用[java8](http://code.google.com/p/jav8/) lib。是基于 Google V8 Javascript 引擎的 Java Scripting API 的实现。

我将 jav8.jar 和 jsr223.jar 作为引用库链接到项目，我可以导入我需要的所有类。但是当我运行应用程序时，它会在第一行中断：

```
ScriptEngineManager manager = new ScriptEngineManager();
ScriptEngine engine = manager.getEngineByName("jav8"); 
```

调试器是这样说的：

```
NoClassDefFoundError 
```

提前致谢。

# php - 包含数据库完整性

> ID：14765550
> 
> 赞同：0
> 
> 时间：2013-02-08T04:13:06.833
> 
> 标签：php, mysql

好的，这是一个直截了当的问题，但我在如何实施解决方案方面遇到了问题。

所以这就是数据库结构的样子，对于所有需要的东西都大大减少了。

表事件、联系人、contact_event_role、event_roles。

```
create table events(
  event_id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  name VARCHAR(200) NOT NULL,
  PRIMARY KEY(event_id)
);

INSERT INTO events VALUES(1, 'stackoverflow');
INSERT INTO events VALUES(2, 'throwsanerror');

create table contacts(
  contact_id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  fname VARCHAR(40) NOT NULL,
  lname VARCHAR(40) NOT NULL,
  email VARCHAR(90) NOT NULL,
  PRIMARY KEY(contact_id)
);

INSERT INTO contacts VALUES(1, 'bill', 'smith', 'bsmith@email.com');
INSERT INTO contacts VALUES(2, 'amy', 'lee', 'amylee@email.com');

event_roles(
  role_id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  description VARCHAR(80),
  PRIMARY KEY(role_id)
);

//The roles look something like this
INSERT INTO event_roles VALUES(1, 'Event Coordinator');
INSERT INTO event_roles VALUES(2, 'Decision Maker');
INSERT INTO event_roles VALUES(3, 'Inquiry Contact');

contacts_event_role(
  event_id INTEGER UNSIGNED NOT NULL,
  contact_id INTEGER UNSIGNED NOT NULL,
  role_id INTEGER UNSIGNED NOT NULL,
  FOREIGN KEY(event_id) REFERENCES events(event_id),
  FOREIGN KEY(contact_id) REFERENCES contacts(contact_id),
  FOREIGN KEY(role_id) REFERENCES event_roles(role_id),
  PRIMARY KEY(event_id, role_id)
);

INSERT INTO event_role VALUES(1, 1, 1);
INSERT INTO event_role VALUES(1, 1, 2);
INSERT INTO event_role VALUES(2, 2, 1); 
```

这就是数据库的要点。带有一些虚拟数据。很确定那里一切都很好。

所以这是我的逻辑

我要做的是插入/更新客户端和角色，并在必要时让客户端填充多个角色。

所以我的伪代码看起来像这样

```
//perform a check to see if the event_role is being filled...
check4role = SELECT * FROM contacts_event_role WHERE role_id = 1 AND event_id = 1

//perform a check to see if the contact already exists.
check4contact = SELECT * FROM contacts WHERE fname = :fname AND lname = :lname AND email = :email; 

//if the role is already being filled && contact exists 

if( check4role == true && check4contact == true)
  UPDATE contact_event_role

//else if the role exists and contact does not exists

elseif( check4role == true && check4contact == false)
  INSERT INTO contacts 
  UPDATE contact_event_role

//else if the role does not exists and the contact does exist

elseif( check4role == false && check4contact == true)
  INSERT INTO contact_event_role

//else if the role does not exists and the contact does not exist

elseif( check4role == false && check4contact == false)
  INSERT INTO contacts
  INSERT INTO contact_event_role 
```

你知道我不确定，但我想我只是说出了正确的逻辑，但我真的很想得到一些反馈，比如这是否应该这样做，或者我的逻辑是否有缺陷。我觉得我错过了什么。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:41:57.477

它对我来说看起来不错 - 但是您可以通过将代码更改为如下所示来使代码更易于阅读：

```
if (check4contact == false)
{
    insert into contacts
}

if (check4role == false)
{
    INSERT INTO contact_event_role
}
else
{
    UPDATE contact_event_role
} 
```

我通过将它分成两个单独的检查来解决这个问题。我没有尝试处理所有可能的情况，而是将代码分解为“你要做什么”块。第一个只是确保联系人存在。如果他们不这样做，我们就会创建它们。

然后第二部分是更新contact_event_role 表。

您也可以通过移出通用代码来完成此操作 - 例如，您调用了两次“INSERT INTO 联系人”，两次都因为“check4contact”为假而被调用。所以这是清理逻辑的一种方法。

# vim - 如何在 ubuntu 10.04 上设置 vim 透明

> ID：14765554
> 
> 赞同：0
> 
> 时间：2013-02-08T04:13:21.723
> 
> 标签：vim, ubuntu

我尝试通过右键单击设置菜单将 vim(VIM - Vi IMproved 7.2) 设置为透明，它可以工作。

但是背景只是显示桌面，而不是pdf或它下面的浏览器。

我的环境：

*   Ubuntu 10.04
*   7.2

在我做这些事情之前我应该​​知道什么关于 ubuntu GUI 的知识吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:21:34.460

```
gconftool-2 -s '/apps/metacity/general/compositing_manager' --type bool true 
```

# objective-c - 删除 NSTokenField 令牌的回调

> ID：14765555
> 
> 赞同：2
> 
> 时间：2013-02-08T04:13:24.763
> 
> 标签：objective-c, macos, nstokenfield, nstokenfieldcell

在 NSTokenField 中，似乎在删除令牌时不存在委托方法。

我试过制作包装器代表：

```
#import "tokenDelegate.h"

@implementation tokenDelegate
@synthesize token,owner; 

-(id)initWithWrappedToken:(id)token1 owner:(id<TokenWrapperDelegate>)owner1
{
    self.owner = owner1;
    self.token = token1;
    return self;

}

-(void)dealloc {
    [owner tokenWasDeleted:self.token];
    self.token = nil;
    [super dealloc];
}

@end 
```

对于所有者，我尝试过：

```
- (NSString *)tokenField:(NSTokenField *)tokenField editingStringForRepresentedObject:(id)representedObject;
{ 
    del = [[tokenDelegate alloc] initWithWrappedToken:nil owner:self];
    del.token = representedObject;
    [del release];
    return [representedObject description];

}

-(void)tokenWasDeleted:(id)token
{
    NSLog(@"token %@",token);
} 
```

问题是：

在编辑“tokenWasDeleted”时正在调用。（那也行）。但是当我选择一个令牌然后直接删除“tokenWasDeleted”时不会调用。

任何人都可以帮助如何处理这个问题，以便**我可以获得被删除的令牌的索引。**

谢谢，尼拉姆维尔马

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-17T17:01:21.963

只需为 tokenfeilds 更改添加一个观察者： [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(actionhere) name:NSControlTextDidChangeNotification object:nil];

这将在添加和删除令牌时调用。

# parallel-processing - 奇怪的 MPI 和 OMP 减速

> ID：14765557
> 
> 赞同：0
> 
> 时间：2013-02-08T04:14:00.247
> 
> 标签：parallel-processing, mpi, openmp

我有两个非常简单的代码。我试图将它们并行如下：

```
double sk = 0, ed = 0;
        #pragma omp parallel shared(Z,Zo,U1,U2,U3) private(i) reduction(+: sk, ed)
        {
            #pragma omp for
            for (i=0;i<imgDim;i++)
            {
                sk += (Z[i]-Zo[i])*(Z[i]-Zo[i]);
                ed += U1[i]*U1[i] + U2[i]*U2[i] + U3[i]*U3[i];
            }
        } 
```

///////////////////////////////////////// ///////////////////////////////

```
double rk = 0, epri = 0, ex = 0, ez = 0;
            #pragma omp parallel shared(X,Z) private(i) reduction(+: rk, ex,ez)
            {
                #pragma omp for
                for(i = 0; i<imgDim; i++)
                {
                    rk += (X[0][i]-Z[i])*(X[0][i]-Z[i]) + (X[1][i]-Z[i])*(X[1][i]-Z[i]) + (X[2][i]-Z[i])*(X[2][i]-Z[i]);    
                    ex += X[0][i]*X[0][i] + X[1][i]*X[1][i] + X[2][i]*X[2][i];
                    ez += Z[i]*Z[i];
                }
            } 
```

Z、Zo、U1、U2、U3、X 都是大矩阵。imgDim 是 400 万。速度没有想象中那么快。在一台16核的机器上，这两条小代码的速度只有两倍。我不明白为什么 OMP 会出现这种行为，因为这两个代码只是加起来而已。这应该是OMP擅长的。

更奇怪的行为是，当我尝试使用 MPI 并行这些代码时，MPI 会减慢速度，如下所示：

```
int startval = imgDim*pid/np;
int endval = imgDim*(pid+1)/np-1;
int ierr;
double p_sum_sk = 0;
double p_sum_ed = 0;

for (i=startval;i<=endval;i++)
{
    sk += (Z[i]-Zo[i])*(Z[i]-Zo[i]);
    ed += U1[i]*U1[i] + U2[i]*U2[i] + U3[i]*U3[i];
}

MPI_Reduce(&sk, &p_sum_sk, 1, MPI_DOUBLE, MPI_SUM, 0, MPI_COMM_WORLD);
MPI_Reduce(&ed, &p_sum_ed, 1, MPI_DOUBLE, MPI_SUM, 0, MPI_COMM_WORLD);
MPI_Bcast(&sk, 1, MPI_DOUBLE, 0, MPI_COMM_WORLD);
MPI_Bcast(&ed, 1, MPI_DOUBLE, 0, MPI_COMM_WORLD); 
```

///////////////////////////////////////// //////////////////////////////

```
int startval = imgDim*pid/np;
int endval = imgDim*(pid+1)/np-1;
double p_sum_rk = 0.;
double p_sum_ex = 0.;
double p_sum_ez = 0.;

for(i = startval; i<=endval; i++)
{
    rk = rk + (X[0][i]-Z[i])*(X[0][i]-Z[i]) + (X[1][i]-Z[i])*(X[1][i]-Z[i]) + (X[2][i]-Z[i])*(X[2][i]-Z[i]);
    ex += X[0][i]*X[0][i] + X[1][i]*X[1][i] + X[2][i]*X[2][i];
    ez += Z[i]*Z[i];
}

MPI_Reduce(&rk,&p_sum_rk,1,MPI_DOUBLE,MPI_SUM,0,MPI_COMM_WORLD);
MPI_Reduce(&ex,&p_sum_ex,1,MPI_DOUBLE,MPI_SUM,0,MPI_COMM_WORLD);
MPI_Reduce(&ez,&p_sum_ez,1,MPI_DOUBLE,MPI_SUM,0,MPI_COMM_WORLD);
MPI_Bcast(&rk,1,MPI_INT,0,MPI_COMM_WORLD);
MPI_Bcast(&rk,1,MPI_INT,0,MPI_COMM_WORLD);
MPI_Bcast(&epri,1,MPI_INT,0,MPI_COMM_WORLD); 
```

np 是处理器的数量，pid 是当前处理器的 id。在我使用 32 甚至 64 处理器后，它并没有显示出任何加速。它甚至比顺序代码还要慢。我不懂为什么。这些代码只是在添加东西。OMP 和 MPI 应该擅长它。谁能帮我一把？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:48:45.630

您的代码受内存限制 - 您在每次迭代中加载大量数据并对其进行简单（即快速）计算。如果`imgDim`是 400 万，那么即使`Z`, `Zo`, `U1`, `U2`,的每个元素`U3`短至 4 个字节（例如，它们是`float`或`int`数组），它们的总大小也将是 80 MiB，即使给定，这也不适合最后一级 CPU 缓存双插座系统。`double`如果这些数组保存值（正如您减少为变量的事实所暗示的那样），情况会更糟`double`，因为它会使内存大小增加两倍。此外，如果您使用一个体面的编译器，它能够对代码进行矢量化（例如`icc`，默认情况下会这样做，GCC 需要`-ftree-vectorize`)，即使是单个线程也能够使 CPU 插槽的内存带宽饱和，然后使用多个线程运行将不会带来任何好处。

我想说的是，您在 16 核系统上观察到的 2 倍 OpenMP 加速来自这样一个事实，即该系统有两个 CPU 插槽并且是 NUMA，即它在每个插槽上都有一个单独的内存控制器，因此在运行 16您使用两倍于单个套接字的内存带宽的线程。如果您仅使用两个线程运行代码，但以不同的方式绑定它们，则可以验证这一点：同一套接字上的每个内核一个线程或每个内核一个线程但在不同的套接字上。在第一种情况下应该没有加速，而在第二种情况下，加速应该是大约 2 倍。将线程绑定到内核是（还）依赖于实现的——如果你碰巧使用英特尔编译器，你可以看看[GOMP_CPU_AFFINITY](http://gcc.gnu.org/onlinedocs/libgomp/GOMP_005fCPU_005fAFFINITY.html) for GCC 和[KMP_AFFINITY 。](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011Update/compiler_c/optaps/common/optaps_openmp_thread_affinity.htm)

这同样适用于 MPI 案例。现在您有进程而不是线程，但内存带宽限制仍然存在。情况更糟，因为现在还增加了通信开销，如果问题规模太小，它可能会超过计算时间（该比率取决于网络互连 - 随着 QDR InfiniBand 结构等更快和更少潜在的互连，它会更低）。但是使用 MPI，您可以访问更多 CPU 插槽，从而获得更高的总内存带宽。您可以使用每个套接字一个 MPI 进程来启动您的代码，以从您的系统中获得最佳性能。在这种情况下，进程绑定（或英特尔术语中的固定）也很重要。

# ember.js - 目录下 EmberJS 模板的控制器常规名称？

> ID：14765562
> 
> 赞同：1
> 
> 时间：2013-02-08T04:14:14.933
> 
> 标签：ember.js

应该为子目录中的模板调用 EmberJS pre 4 控制器，比如 sample/header.hbs 我不能命名控制器 HeaderController ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T07:59:29.087

> 应该为子目录中的模板调用 EmberJS pre 4 控制器，例如 sample/header.hbs

约定将控制器命名为`SampleHeaderController`.

> 我不能命名控制器 HeaderController ？

当然可以，但是如果您决定使用非常规名称，则需要进行额外的配置。如果您想使用与路由处理程序的控制器不同的控制器，请在渲染路由时传递控制器选项：

```
App.SampleHeaderRoute = Ember.Route.extend({
  renderTemplate: function() {
    this.render({ controller: 'header' });
  }
}); 
```

有关更多详细信息，请参阅[http://emberjs.com/guides/routing/rendering-a-template/](http://emberjs.com/guides/routing/rendering-a-template/)。

# azure - 文件监控的文件名无效：'E:\sitesroot\0\CustomControls'。失败的常见原因包括

> ID：14765563
> 
> 赞同：2
> 
> 时间：2013-02-08T04:14:23.043
> 
> 标签：azure

我的应用程序已从 ASP.net 迁移到 Azure。在 Compute Emulator 中运行时，它会给出以下异常：

```
Server.GetLastError().GetBaseException()
{"Response is not available in this context."}
    [System.Web.HttpException]: {"Response is not available in this context."}
    Data: {System.Collections.ListDictionaryInternal}
    HelpLink: null
    InnerException: null
    Message: "Response is not available in this context."
    Source: "System.Web"

    StackTrace: "   at System.Web.UI.Page.get_Response()\r\n   at Writehome_aspxToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )\r\n   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declare
dType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WritePlaceHolderToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )\r\n   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.S
erializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WriteArrayOfControlToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , Collection
DataContract )\r\n   at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDec
laredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WriteArrayOfanyTypeToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract )\r\n   at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteDataContractValue(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithoutXsiType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle declaredTypeHandle)\r\n   a
t System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at System.Runtime.Serialization.XmlObjectSerializerWriteContextComplex.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)\r\n   at WriteSerializableSessionStateStoreDataToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )\r\n   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)\r\n   at System.Runtime.Serialization.NetDataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContract contract, Hashtable surrogateDataContracts)\r\n   at System.Runtime.Serialization.NetDataContractSerializer.InternalWr
iteObject(XmlWriterDelegator writer, Object graph)\r\n   at System.Runtime.Serialization.XmlObjectSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\r\n   at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)\r\n   at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)\r\n   at Microsoft.ApplicationServer.Caching.NetDataContractCacheObjectSerializer.Serialize(Stream stream, Object value)\r\n   at Microsoft.ApplicationServer.Caching.DataCacheObjectSerializationProvider.SerializeUserObject(Object userObject, Boolean isCompressionEnabled, ValueFlagsVersion flagsType)\r\n   at Microsoft.ApplicationServer.Caching.SocketClientProtocol.SerializeValue(Object obj)\r\n   at Microsoft.ApplicationServer.Caching.SocketClientProtocol.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle,
 TimeSpan timeout, DataCacheTag[] tags, String region, IMonitoringListener listener)\r\n   at Microsoft.ApplicationServer.Caching.DataCache.InternalPutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout, DataCacheTag[] tags, String region, IMonitoringListener listener)\r\n   at Microsoft.ApplicationServer.Caching.DataCache.<>c__DisplayClass9c.<PutAndUnlock>b__9b()\r\n   at Microsoft.ApplicationServer.Caching.MonitoringListenerFactory.EmptyListener.Microsoft.ApplicationServer.Caching.IMonitoringListener.Listen[TResult](Func`1 innerDelegate)\r\n   at Microsoft.ApplicationServer.Caching.DataCache.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout)\r\n   at Microsoft.Web.DistributedCache.DataCacheWrapper.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout)\r\n   at Microsoft.Web.DistributedCache.DataCacheForwarderBase.<>c__DisplayClass1c.<PutAndUnlock>b__1b()\r\n   at Microsoft.Web.DistributedCache.DataCacheFo
rwarderBase.<>c__DisplayClass31`1.<PerformCacheOperation>b__30()\r\n   at Microsoft.Web.DistributedCache.DataCacheRetryWrapper.PerformCacheOperation(Action action)\r\n   at Microsoft.Web.DistributedCache.DataCacheForwarderBase.PerformCacheOperation[TResult](Func`1 func)\r\n   at Microsoft.Web.DistributedCache.DataCacheForwarderBase.PutAndUnlock(String key, Object value, DataCacheLockHandle lockHandle, TimeSpan timeout)\r\n   at Microsoft.Web.DistributedCache.BlobBasedSessionStoreProvider.SetAndReleaseItemExclusive(HttpContextBase context, String id, SessionStateStoreData item, Object lockId, Boolean newItem)\r\n   at Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider.SetAndReleaseItemExclusive(HttpContext context, String id, SessionStateStoreData item, Object lockId, Boolean newItem)\r\n   at System.Web.SessionState.SessionStateModule.OnReleaseState(Object source, EventArgs eventArgs)\r\n   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Exec
ute()\r\n   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)"
    TargetSite: {System.Web.HttpResponse get_Response()} 
```

所以我尝试将它部署在带有 IntelliTrace 日志的 Azure 订阅中，所以它显示以下异常，

```
System.Web.HttpException

Invalid file name for file monitoring: 'E:\sitesroot\0\CustomControls'. Common reasons for failure include:
The filename is not a valid Win32 file name.
The filename is not a absolute path.
The filename contains wildcard characters.
The file specified is a directory.
Access denied.

Invalid file name for file monitoring: 'E:\sitesroot\0\MasterPages. Common reasons for failure include:
The filename is not a valid Win32 file name.
The filename is not a absolute path.
The filename contains wildcard characters.
The file specified is a directory.
Access denied. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T18:58:32.080

克里斯蒂安在上述评论中的回答对我有用。而且我什至没有使用 Azure，只是想调试一个 asp.net mvc4 项目。

> 在工具/选项/调试/常规下选中“仅启用我的代码”使其在我的情况下消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:18:35.900

按照[这个链接](http://social.msdn.microsoft.com/Forums/en/vsdebug/thread/dff3d7fa-5264-4f8d-af1e-19e1c132bd10)

> 根本不是解决方案，但清除我所有的临时文件 C:\Windows\Microsoft.NET\Framework\v4\Temporary ASP.NET 文件（或足够接近的文件） -**可能有效**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T21:03:55.163

清除临时文件对我不起作用，因为该文件夹中没有临时文件……哈哈！让 API 不从 System.Web.HttpException 抛出异常是一种解决方法，但是这些错误仍然存​​在于后台消耗进程。在地毯下扫除错误是非常糟糕的做法。

[在stackoverflow上找到了这个相关的帖子，这可能会有所帮助](https://stackoverflow.com/questions/3565280/vs-2010-fails-debugging-httpexception-invalid-file-name-for-file-monitoring-in)

# sql - 能够连接到链接服务器，但我无法从任何表中选择

> ID：14765565
> 
> 赞同：0
> 
> 时间：2013-02-08T04:14:29.313
> 
> 标签：sql, sql-server, tsql, linked-server

我有一个使用 ODBC 从我的 sql server 2012 64bit 到普遍的 sql 11 数据库的链接服务器

我能够看到此服务器上的数据库，但是当我从任何表中选择 * 时，我收到此错误：

```
OLE DB provider "MSDASQL" for linked server "kslap208" returned message "[Pervasive][ODBC Client Interface][LNA][Pervasive][ODBC Engine Interface][Data Record Manager]The MicroKernel cannot find the specified file(Btrieve Error 12)".
OLE DB provider "MSDASQL" for linked server "kslap208" returned message "[Pervasive][ODBC Client Interface][LNA][Pervasive][ODBC Engine Interface]Unable to open table: aactual.".
Msg 7306, Level 16, State 2, Line 1
Cannot open the table ""sbxc003"."aactual"" from OLE DB provider "MSDASQL" for linked server "kslap208". 
```

我怎么可能成功测试连接并查看所有数据库？但是，我无法选择？

# bash - 测试是否存在多个文件

> ID：14765569
> 
> 赞同：23
> 
> 时间：2013-02-08T04:15:27.710
> 
> 标签：bash

我如何对任意数量的文件使用测试命令，通过正则表达式传入参数

例如：

```
test -f /var/log/apache2/access.log.* && echo "exists one or more files" 
```

但割打印错误：*bash：测试：参数太多*

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-08-05T13:52:25.130

这个解决方案在我看来更直观：

```
if [ `ls -1 /var/log/apache2/access.log.* 2>/dev/null | wc -l ` -gt 0 ];
then
    echo "ok"
else
    echo "ko"
fi 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T04:27:46.333

为避免“参数过多错误”，您需要 xargs。不幸的是，`test -f`不支持多个文件。以下单行应该工作：

```
for i in /var/log/apache2/access.log.*; do test -f "$i" && echo "exists one or more files" && break; done 
```

顺便说一句，`/var/log/apache2/access.log.*`称为 shell-globbing，而不是 regexp，请检查：[Confusion with shell-globbing wildcards and Regex](https://stackoverflow.com/questions/1323805/confusion-with-shell-globbing-wildcards-and-regex)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-02T20:55:07.267

First, store files in the directory as an array:

```
logfiles=(/var/log/apache2/access.log.*) 
```

Then perform a test on the count of the array:

```
if [[ ${#logfiles[@]} -gt 0 ]]; then
  echo 'At least one file found'
fi 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-25T18:24:35.147

如果您希望将文件列表作为批处理进行处理，而不是对每个文件执行单独的操作，您可以使用 find，将结果存储在变量中，然后检查变量是否不为空。例如，我使用以下代码编译源目录中的所有 .java 文件。

```
SRC=`find src -name "*.java"`
if [ ! -z $SRC ]; then
    javac -classpath $CLASSPATH -d obj $SRC
    # stop if compilation fails
    if [ $? != 0 ]; then exit; fi
fi 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-27T12:22:01.820

这个适用于[Unofficial Bash Strict Mode](http://redsymbol.net/articles/unofficial-bash-strict-mode/)，没有找到文件时没有非零退出状态。

该数组`logfiles=(/var/log/apache2/access.log.*)`将始终至少包含未扩展的 glob，因此可以简单地测试第一个元素的存在：

```
logfiles=(/var/log/apache2/access.log.*)

if [[ -f ${logfiles[0]} ]]
then 
  echo 'At least one file found'
else
  echo 'No file found'
fi 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-18T08:11:22.830

您只需要测试是否`ls`有要列出的内容：

```
ls /var/log/apache2/access.log.* >/dev/null 2>&1 && echo "exists one or more files" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-23T10:24:49.627

主题变奏：

```
if ls /var/log/apache2/access.log.* >/dev/null 2>&1
then 
  echo 'At least one file found'
else
  echo 'No file found'
fi 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-17T10:59:32.663

```
ls -1 /var/log/apache2/access.log.* | grep . && echo "One or more files exist." 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-04T12:43:49.467

更简单：

```
if ls /var/log/apache2/access.log.* 2>/dev/null 1>&2; then
   echo "ok"
else
   echo "ko"
fi 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-17T13:05:53.250

或使用查找

```
if [ $(find /var/log/apache2/ -type f -name "access.log.*" | wc -l) -gt 0 ]; then
  echo "ok"
else
  echo "ko"
fi 
```

# javascript - 在另一个 JS 文件中调用同名函数

> ID：14765571
> 
> 赞同：5
> 
> 时间：2013-02-08T04:15:33.013
> 
> 标签：javascript, function, variables, count

我在这里有点困惑......如果我有一个`.js`文件具有这样的功能：

```
function myMain() {
    var count=0;
    count++;               
    myHelper(count);
    alert(count);
}

function myHelper(count) {
    alert(count);
    count++;
} 
```

我还能`myHelper()`在另一个 .js 文件上调用另一个方法吗？或者有没有其他方法可以将计数变量从一个函数传递到另一个函数，然后它将被调用到其他 .js 文件。你对这个有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T04:54:32.213

Update: Nowadays you should prefer to use ES6 `import`/`export` in a `<script>` tag with `type="module"` or via a module bundler like [webpack](https://webpack.js.org).

* * *

When both script files are included in the same page, they run in the same global JavaScript context, so the two names will overwrite each other. So no, you can not have two functions in different .js files with the same name and access both of them as you've written it.

The simplest solution would be to just rename one of the functions.

A better solution would be for you to write your JavaScript modularly with namespaces, so that each script file adds the minimum possible (preferably 1) objects to the global scope to avoid naming conflicts between separate scripts.

There are a number of ways to do this in JavaScript. The simplest way is to just define a single object in each file:

```
// In your first script file
var ModuleName = {
    myMain: function () {
        var count=0;
        count++;               
        myHelper(count);
        alert(count);
    },

    myHelper: function (count) {
        alert(count);
        count++;
    }
} 
```

In a later script file, call the function `ModuleName.myMain();`

A more popular method is to use a self-evaluating function, similar to the following:

```
(function (window, undefined) {

    // Your code, defining various functions, etc.
    function myMain() { ... }
    function myHelper(count) { ... }

    // More code...

    // List functions you want other scripts to access
    window.ModuleName = {
        myHelper: myHelper,
        myMain: myMain  
    };
})(window) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-07-24T08:31:26.617

如果您知道要覆盖一个方法，您可以先将旧方法存储在一个变量中，然后通过该变量调用该函数的另一个实现。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-08T04:20:24.620

是的，只要将两个 js 文件都包含在一个 html 或 jsp 页面中，就可以从任何其他 js 文件调用 myHelper()

你可能想看看这个： [我们可以在另一个 JS 文件中调用用一个 JavaScript 编写的函数吗？](https://stackoverflow.com/questions/3809862/can-we-call-the-function-written-in-one-javascript-in-another-js-file)

# arrays - 随机解析垃圾值数组

> ID：14765574
> 
> 赞同：0
> 
> 时间：2013-02-08T04:15:58.567
> 
> 标签：arrays, random, multidimensional-array

我正在生成随机值并解析为数组。知道哪个部分导致了问题吗？

谢谢大家！:)

```
for(x=0; x<numberOfSboxes; x++)
{
    vecCheck.clear();
    for (y=0;y<sbox_Size; y++)
    {       
        int secondTemp = y;
        int firstTemp;
        firstTemp = rand() % numberRange;

        int mycount = (int) std::count (vecCheck.begin(), vecCheck.end(), y); // count if number is in vector
        if( (mycount==1) || (firstTemp==y)  )
        {
            continue;
        }
        else
        {
            if(vecCheck.size()==0)
            {
                vecCheck.push_back(firstTemp); // first number
                sBox[x][y] = firstTemp;
                sBox[x][firstTemp] = secondTemp;
                vecCheck.push_back(secondTemp); //second number 
            }
            else
            {                   
                int mycount = (int) std::count (vecCheck.begin(), vecCheck.end(), firstTemp); // count if number is in vector
                if(mycount==1)
                {
                    //if number generated is found, then break loop and restart
                    --y;
                    continue;
                }
                else
                {
                    //if number generated is not found
                    sBox[x][y] = firstTemp; // first number generated
                    sBox[x][firstTemp] = secondTemp;
                    vecCheck.push_back(firstTemp); //push back to record
                    vecCheck.push_back(secondTemp); //push back to record
                }
            }
        }
    }
} 
```

它并不总是生成垃圾值，但有时会。下面将显示一个示例。

```
 sBox[0][16] = {9,12,15,5,7,3,12765952,4,13,0,11,10,1,8,12688216,2};
  sBox[1][16] = {6,11,3,2,8,10,0,15,4,134514593,5,1,14,-1075,0,78827,12,7};
  sBox[2][16] = {3,4,7,0,1,13,11,2,10,14,8,6,15,5,9,12}; 
```

我认为它在 rand() 上没有问题。

编辑：

firstTemp 一代没有问题。数字始终在 0-15 的范围内。任何人都知道为什么这些值的输出往往是上述的？

# python - 在 OS X 中使用相对（而不是绝对）鼠标移动的方法？

> ID：14765578
> 
> 赞同：1
> 
> 时间：2013-02-08T04:16:10.307
> 
> 标签：python, macos, core-graphics, mouse, quartz-graphics

我正在开发一个控制鼠标移动的 python 应用程序。

我使用 Quartz.CoreGraphics 库使绝对鼠标位置工作得很好，该库公开了一些用于鼠标控制的 CGEvent 命令（如“CGEventCreateMouseEvent”和“CGEventPost”）。

但是，我在文档中找不到有关相对鼠标移动的任何内容。我真的很想模拟实际的鼠标移动（即“x sideways，y up”而不是“x，y”），因为使用我的应用程序的一些人有多个监视器，我想这会容易得多通知操作系统有鼠标移动，而不是自己设置位置。

我的界面的性质也适用于相对的鼠标移动。

在 Windows 中，win32 API 中有一个函数允许“原始”鼠标命令执行我正在寻找的操作。有没有办法在 OS X 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T03:26:05.697

我认为管理事件的方式不可能。您需要捕获旧的 (X,Y) 并自己计算增量。这意味着当您点击屏幕末尾时会遇到问题。

好消息是您可以移动鼠标。因此，如果鼠标碰到边缘，您可以将其重新定位到中心。您还可以使鼠标指针不可见。最后，您可以使用覆盖整个屏幕的跟踪矩形来捕捉鼠标移动。所以好消息是你可以精确地模拟你想做的事情，但坏消息是这需要一些工作。

有用的 API 包括：

*   `CGEventTap`（参见[Quartz 事件服务参考](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)
*   `CGPostEvent`
*   `CGDisplayMoveCursorToPoint`（请参阅[石英显示服务参考](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGDisplayMoveCursorToPoint)）

其他 SO 参考资料包括：

*   [将鼠标限制在 Mac 上的一个显示器上（可能使用 Cocoa）](https://stackoverflow.com/questions/8188193/limiting-mouse-to-one-display-on-mac-potentially-using-cocoa)
*   [Cocoa：将鼠标限制在屏幕上](https://stackoverflow.com/questions/4471910/cocoa-limit-mouse-to-screen)
*   [可可移动鼠标](https://stackoverflow.com/questions/4421273/cocoa-move-mouse)

# svn - 如何迁移到 1 或 2 个 hg + svn 存储库主机？

> ID：14765579
> 
> 赞同：0
> 
> 时间：2013-02-08T04:16:13.873
> 
> 标签：svn, mercurial, repository, google-code

我使用svn + hg。我应该合并到一个或两个存储库主机吗？合并到一个或两个存储库主机是否有缺点？我使用了 hg（bitbucket、googlecode）和 svn（xp-dev.com 和 googlecode）。因此，如果在 bitbucket、xp-dev.com 和 googlecode 之间进行选择很重要，哪一个最好？我认为 code.google 的缺点是它是开源的，我对似乎都能做我想做的事情的 bitbucket 和 xp-dev 漠不关心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:13:53.773

好吧，这是主观问题（和答案），不适合 SO 格式。但我会试着回答

1.  没用过XP-Dev，无话可说
2.  GCode - 仅限公共回购，空间限制小
3.  BitBucket - 私人回购（但免费纯仅适用于 5 个用户的小团队），没有空间限制，只有 hg/git 没有 Subversion

从这一点开始 - BitBucket 获胜

但是，如果还必须使用 Subversion，您可以在[Assembla](https://www.assembla.com/home)中看到“多合一解决方案”（或[Assembla Portfoli](http://portfolio.assembla.com/) o）：

*   私人和公共“空间”，
*   任何数量的单独空间总共 1Gb（免费平原，付费平原不同），
*   Git-Github repo/SVN-external SVN repo/HG/Perforce 作为 SCM，
*   丰富的 ALM 工具集（好的 Wiki、智能票证）

# android - ICS 和 JellyBean 之间的 Android Wifi Direct 互通性

> ID：14765599
> 
> 赞同：1
> 
> 时间：2013-02-08T04:19:36.493
> 
> 标签：android, android-wifi, wifi-direct

我在我的 Android 设备上测试 WiFi Direct。我有一个运行 4.0.4 的 Galaxy Note 和一个运行 4.2.1 的 Nexus 7。我完全遵循[WiFiDirect 上的官方 API](http://developer.android.com/guide/topics/connectivity/wifip2p.html)。设备找到彼此后，如果我尝试让它们“连接”，我将能够看到 WifiDirect 连接的邀请，但是在我“接受”此邀请后，该设备的状态变为“已邀请”，而在另一台设备（最初发送邀请）上没有回应。因此，永远无法在两个设备之间建立 wifi 直接连接。

然后我尝试了官方的 Wifi-Direct 演示程序......但它似乎也不起作用。

在我将 Galaxy Note 植根并将其升级到 4.1.2 后，这个问题就消失了。

但我想知道是否有人遇到和我一样的问题？如果是这样，您是如何解决的？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T12:29:21.463

要找到确切的原因，您必须查看 wpa_supplicant 的日志报告（这可以从使用 android 调试桥（adb）的日志报告中看到，该日志报告使用 eclipse @ [http://developer.android.com/sdk/ index.html](http://developer.android.com/sdk/index.html)）。

我在尝试将 androd 4.0 平板电脑与 ubuntu 笔记本电脑连接时遇到了类似的问题。问题出在 dhcp 服务器上，该服务器应该在组协商成功后分配 IP 地址，但没有响应可能是由于不同版本或其他原因。这不是 wifi direct 的错误。

我通过为两个设备上的 p2p_wlan0 接口分配一个静态 IP 地址来修复它。

# c# - 从 Request.Files 中删除文件

> ID：14765600
> 
> 赞同：2
> 
> 时间：2013-02-08T04:19:36.910
> 
> 标签：c#, javascript, asp.net, image

我有一个 asp 上传器，当用户上传图像时，它会显示出来，但用户可以删除图像，但它不会从 Request.Files 中删除，然后图像将被上传。如何从 javascript 的 Request.Files 中删除它？

StepOne.aspx：[http ://pastebin.com/EUCX783r StepOne.aspx.cs：](http://pastebin.com/EUCX783r) [http](http://pastebin.com/aZ3UtV2F) : //pastebin.com/aZ3UtV2F

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:39:47.820

您不能直接从 FileList 中删除文件，因为它是只读的。您可以通过将其设置为 "" 来删除 Files 集合中的所有文件：

```
document.getElementById('files').value = ""; //Removes all files in the input 
```

但这不适用于单个文件。

**建议的解决方法**

您可以通过在表单中​​包含隐藏的输入元素并监视在此隐藏输入中标记为删除的文件来处理此问题。

```
<input id='filesToDelete' name='filesToDelete' runat='server' type='hidden' /> 
```

执行删除后（*假设使用 Javascript*），您可以将文件名添加到 filesToDelete 字段（将以逗号分隔）：

```
//Within your delete Javascript method
document.getElementById('filesToDelete').value += (yourImg.title + ","); 
```

将上传内容发布到服务器时，您可以指定仅上传文件列表中未包含的内容。只需将逗号分隔的值存储到集合中，如果您愿意，可以使用 LINQ 检查集合并将其与发布的文件进行比较：

```
protected void YourUploadButton_Click(object sender, EventArgs e)
{
        //Get files to be deleted
        string[] filesToDelete = this.filesToDelete.Value.Split(',');

        //Your collection of files
        HttpFileCollection uploadFiles = Request.Files;
        for (int i = 0; i < uploadFiles.Count; i++)
        {
            //Checks the Posted File
            HttpPostedFile postedFile = uploadFiles[i];
            //If it isn't a file meant for deletion - don't upload
            if (!filesToDelete.Any(c => c == postedFile.FileName))
            {
                UploadToFTP(postedFile, i);
            }

        }
} 
```

您只需要在代码隐藏页面的顶部包含对 LINQ 的引用：

```
using System.Linq; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:37:12.350

好吧，也许我错了，但是通过检查您的代码，我只找到了删除图像 HTML 标记的代码，但看不到从 FileList 中删除文件的任何代码，我想这就是原因

# excel - 如何将sql查询结果保存到excel中？

> ID：14765601
> 
> 赞同：5
> 
> 时间：2013-02-08T04:19:37.600
> 
> 标签：excel, sql-server-2008, export-to-excel

如何将 SQL Server 2008 R2 的 sql 查询结果保存到 Microsoft Excel 2008？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T04:28:20.773

如果您在 SQL Server Management Studio (SSMS) 中，手动方式是仅突出显示行和列并将其粘贴到 Excel 中，或者您可以右键单击并保存为 CSV 文件并在 Excel 中打开它。

要引入标题，您需要：

1.  单击**工具**菜单选项。
2.  单击**选项**->**查询结果**-> **Sql Server** ->**结果到网格**
3.  勾选**复制或保存结果时包括列标题**

然后进行复制和粘贴。

# silverlight - 使用 silverlight 4.0 探索图表到 Pdf？

> ID：14765605
> 
> 赞同：0
> 
> 时间：2013-02-08T04:20:07.443
> 
> 标签：silverlight, silverlight-4.0, infragistics

我正在使用 Infragistics 控件在 Silverlight 4.0 中设计图表。我创造了那个。现在我想探索从该数据图表到 PDf 的数据。我该怎么做？你能请任何人提供有关这方面的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:44:52.227

您可以将 UIElements 添加到 Teleriks `RadRichTextBox`，然后将文档导出为 PDF。这也使您能够在保存之前向 PDF 文档添加一些额外的样式（标题、边框、描述等）。

[这应该让你开始](http://www.telerik.com/community/forums/silverlight/general-discussions/export-uielement-to-pdf-in-silverlight.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-18T13:43:01.383

如果将 XamDataChart 呈现为位图，则可以使用[Infragistics Document Engine](https://www.infragistics.com/help/winforms/waw-infragistics-document-engine)将其添加到 PDF 。有一个[WPF Data Chart to PDF](https://www.infragistics.com/community/blogs/b/tom_puglisi/posts/wpf-data-chart-to-pdf) blog post 演示了这一点并有一个示例。请注意，这是使用 WPF，您可能需要使用 Web 服务器上的 WPF XamDataChart 来生成图表并将其添加到 PDF 文档以供最终用户下载。

# linux-kernel - 从 x86 交叉编译 arm

> ID：14765606
> 
> 赞同：5
> 
> 时间：2013-02-08T04:20:15.337
> 
> 标签：linux-kernel, cross-platform, arm

我正在尝试将`.ko`内核模块插入在 arm 处理器中运行的 linux 中。我在我的台式 PC 中构建了一个`.ko`文件，它是 x86 的。我如何交叉编译它来武装规格。我是这个领域的新手。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T06:15:48.713

为此，您需要先下载 ARM 编译器。[我建议您从http://www.linaro.org/downloads/](http://www.linaro.org/downloads/)下载编译器，然后将 CROSS_COMPILE 环境变量设置为 arm-linux-gcc。

在 PATH 变量中设置 bin 目录路径。您可以通过 export PATH=$PATH:/path/to/arm/binaries/ 来完成

最后编译代码然后在ARM中运行。

使用`file <filename>`它是否是 ARM 可执行文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T07:30:42.017

为此，您必须执行以下步骤。

1.  检查您是否有交叉编译器工具链。如果您没有交叉编译器工具链，您可以从网上免费的 ARM 交叉编译器之一下载。您可以使用 Buildroot 工具生成自己的交叉工具链。下面你可以得到 Buildroot 用户手册的链接。 [http://buildroot.uclibc.org/downloads/manual/manual.html#_using_buildroot](http://buildroot.uclibc.org/downloads/manual/manual.html#_using_buildroot)

2.  在您的主机 PC 中安装交叉工具链。

3.  使用导出命令导出主机 PC 中的交叉工具链路径。

4.  更改内核模块的 make 文件，将编译器设置为 CROSS_COMPILE。

5.  做吧。

6.  将`.ko`文件移动到目标并插入它。

# java - java中的多个服务器TCP

> ID：14765608
> 
> 赞同：1
> 
> 时间：2013-02-08T04:20:27.990
> 
> 标签：java, tcp, tcpserver, java-server

我正在编写一个网络多人游戏，玩家使用自己的客户端和服务器处理所有数据处理......

我已经用一台服务器完成了游戏的编写。

我想要做的是，我将拥有一个主服务器，它将发送有关不同游戏房间的信息，玩家将能够连接到他们想要的游戏房间。

我的想法是，如果玩家单击设置新游戏房间，客户端将告诉服务器设置新游戏，这将创建一个新服务器并将有关该服务器的信息添加到主服务器。

我将辅助服务器保留为`ArrayList`...

```
String line = in.nextLine();

if (line.equalsIgnoreCase("new game")) {
servers.add(new SecondaryServers(secondaryPort)); // starting secondary server
secondaryPort++; // this is to keep track of port number
System.out.println(i + " secondary server(s) started"); // printout in main server's console
 } 
```

当我这样做时，它第一次启动了一个新服务器，但它永远不会进入打印到控制台的状态。

请帮我从主服务器创建新服务器:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:43:07.740

我认为有一种`ServerSocket.accept()`方法是从内部调用的`SecondaryServers`。`accept()`是一种阻塞方法，因此您应该从`SecondaryServers`一个新线程开始。

# ms-access - 选择特定记录的打开访问表单键入日期

> ID：14765612
> 
> 赞同：0
> 
> 时间：2013-02-08T04:21:20.803
> 
> 标签：ms-access, vba

我正在创建一个小应用程序来跟踪我的销售活动，但我被困在记录数据的表单上。到目前为止，我已经花了大约 9 或 10 个小时来研究和尝试事物，所以我需要一点帮助。

我有一张表格，记录了我在某一天进行了多少销售电话、电子邮件、会议、提案等。“日期”是我的主键。该表格应该可以帮助我输入/编辑数据。

我的基本形式如下所示：

哎呀！Stack 不允许我发布图片——我可以通过电子邮件将其发送给在hammerwings.com 上向 steve 提问的任何人

有一个小日历弹出窗口可以选择不同的数据输入日期：

哎呀！Stack 不允许我发布图片——我可以通过电子邮件将其发送给在hammerwings.com 上向 steve 提问的任何人

我可以在弹出窗口中选择一个新日期，当我单击“设置日期”按钮时，它将 (1) 将记录保存在跟踪项目表单中 (2) 关闭跟踪项目表单 (3) 重新打开跟踪项目表单并将日期设置为我在弹出窗口中选择的日期。

问题是它想用该日期创建一条新记录，而不是编辑现有记录。我的现有数据未加载，保存时出现重复的主键错误。

这是不起作用的：

(1) Form_DailyItemsTracked.Date = CalObject.Value '这会改变父窗体中的日期而不刷新任何数据

(2) 关闭然后重新打开选中记录的父窗体 这将打开设置日期的父窗体，但不加载现有记录——它仍然想创建一条新记录

```
DoCmd.OpenForm "DailyItemsTracked", , , "Date = " & CalObject.Value 
```

（日期是表中字段的名称）

这些都会引发某种类型的语法错误。MyDate 是日期字段控制的表单上文本框的名称。我已经验证 CalObject.Value 在弹出窗口中设置正确，并且它是 ShortDate 格式，与 MyDate 文本框和 Date 字段相同。

```
DoCmd.OpenForm "DailyItemsTracked", , , "[MyDate] = '" & Format(CalObject.Value, "Short Date") & "'"

DoCmd.OpenForm "DailyItemsTracked", , , "[MyDate] = " & Format(CalObject.Value, "Short Date")

DoCmd.OpenForm "DailyItemsTracked", , , "[Date] = " & CalObject.Value

DoCmd.OpenForm "DailyItemsTracked", , , "Tracked_items.[Date] = " & CalObject.Value

DoCmd.OpenForm "DailyItemsTracked", acNormal, , , acFormEdit, acWindowNormal, CalObject.Value

DoCmd.OpenForm "DailyItemsTracked", , , "MyDate = " & CalObject.Value 
```

(3)

```
Forms!DailyItemsTracked.Requery 
```

这也会引发语法错误。

(4) 我还创建了一个以日期为参数的查询，并用查询控制了表单。我可以打开它，但它仍然想创建一个新记录。

(5) 我添加了一个自动编号字段并将其设为主键，并在表单上隐藏了一个控件。这消除了重复的主键错误，但是当我打开表单时它仍然没有加载现有数据。

是否无法打开选择了特定记录的表单？或者如果日期是控制就不可能吗？

有没有一种完全不同的方法可以更简单？

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:24:57.107

您的日期分隔符语法错误。试试这个。

```
DoCmd.OpenForm "DailyItemsTracked", , , "Date = #" & CalObject.Value & "#" 
```

# google-calendar-api - 从“谷歌日历”获取数据 - 有趣的日历

> ID：14765615
> 
> 赞同：1
> 
> 时间：2013-02-08T04:21:37.397
> 
> 标签：google-calendar-api

谷歌有这些很棒的公共日历，你可以订阅。一个例子是“节日”。因此，如果有一些节日，您的 Google 日历会自动将其添加到您的约会中。

这是他们的帮助页面[http://support.google.com/calendar/bin/answer.py?hl=en&answer=37098](http://support.google.com/calendar/bin/answer.py?hl=en&answer=37098)

我的问题是，我怎样才能得到任何活动的日期？

我还没有找到任何 url 或 rss 提要来获取该数据。是否有任何 JSON 提要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:41:47.737

如果你去感兴趣的日历的日历设置，你可以在日历详细信息下找到日历地址。

在那里，您应该可以找到所有格式（XML、ICAL 和 HTML）的地址以及日历 ID。

# html - 绝对中心水平，负边距，IE6

> ID：14765616
> 
> 赞同：1
> 
> 时间：2013-02-08T04:21:37.723
> 
> 标签：html, css, position, internet-explorer-6, css-position

使用负边距将元素置于中心在所有支持它的现代浏览器中都可以正常工作。

但是在 IE6 中，我们能做什么呢？

例如，此代码在 IE6 中失败：

**HTML：**

```
<div id="parent">
    <div id="child"></div>
</div> 
```

**CSS：**

```
#parent{
    position: relative;
    width: 500px;
    height: 500px;
    margin: 25px auto;
    background: skyblue;
}

#child{
    position: absolute;
    width: 300px;
    height: 100px;
    left: 50%;
    margin-left: -150px;
    top: 25px;
    background: orange;
} 
```

看到[这个小提琴](http://jsfiddle.net/QmLJv/2/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:30:17.830

这可能不适用于您的特定场景，但您可以尝试使用边距和填充而不是定位吗？

```
#parent{
    width: 500px;
    height: 500px;
    margin: 25px auto;
    padding-top: 25px;
    background: skyblue;
}

#child{
    width: 300px;
    height: 100px;
    margin-left: auto;
    margin-right: auto;
    background: orange;
} 
```

# c++ - lzma从内存c ++中压缩/解压缩

> ID：14765617
> 
> 赞同：1
> 
> 时间：2013-02-08T04:21:52.387
> 
> 标签：c++, 7zip, lzma

我有一个代码工作，但我对结果并不完全满意，所以我想我可以在这里问一些问题。

这是我的两个功能：

```
void compress(string nameSrc, string nameDst){

    ifstream input;
    input.open(nameSrc,fstream::in | fstream::binary);

    size_t propsSize = LZMA_PROPS_SIZE;
    size_t srcLen = getLength(input);
    size_t dstLen = srcLen; //??? no idea how to know to right value here

    unsigned char* src = new unsigned char[srcLen];
    unsigned char* dst = new unsigned char[dstLen + propsSize];

    input.read((char*)src, srcLen);

    int res = LzmaCompress(
        &dst[LZMA_PROPS_SIZE], &dstLen,
        src, srcLen,
        dst, &propsSize,
        -1, 0, -1, -1, -1, -1, -1);

    delete [] src;
    input.close();

    ofstream output(nameDst, ios::binary);
    output.write((char*)dst, dstLen + propsSize);

    delete [] dst;

} 
```

和 ：

```
void unCompress(string nameSrc, string nameDst){

    ifstream input;
    input.open(nameSrc,fstream::in | fstream::binary);

    size_t srcLen = getLength(input);
    size_t dstLen = srcLen*5; //??? no idea how to know to right value here

    unsigned char* src = new unsigned char[srcLen];
    unsigned char* dst = new unsigned char[dstLen];

    input.read((char*)src,srcLen);

    int res = LzmaUncompress(dst,&dstLen,&src[LZMA_PROPS_SIZE],&srcLen, src, LZMA_PROPS_SIZE);

    delete [] src;
    input.close();

    ofstream output(nameDst, ios::binary);
    output.write((char*)dst, dstLen);

    delete [] dst;
} 
```

* * *

1.  在这两个函数中，我应该如何知道将什么值放入 dstLen ？我不想白白分配大量内存。
2.  我必须转换为 char* 是不是很糟糕？我真的必须使用 unsigned char 吗？
3.  我尝试更改 LzmaCompress (numThreads) 的最后一个参数，但它并没有提高性能，甚至一点也没有。还有其他事情要做吗？
4.  如果您有任何提示，请随时告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-07T12:08:18.320

使用以下函数获取目标大小：

```
INT32
EFIAPI
LzmaGetInfo(
CONST VOID  *Source,
UINT32      SourceSize,
UINT32      *DestinationSize
)
{
    UInt64  DecodedSize;

    ASSERT(SourceSize >= LZMA_HEADER_SIZE); (void)SourceSize;

    DecodedSize = GetDecodedSizeOfBuf((UINT8*)Source);

    *DestinationSize = (UINT32)DecodedSize;
    return ERR_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-03T10:56:56.743

我认为您可以将源文件的长度保存到压缩文件中。解压时可以通过压缩文件读取源文件的长度。

当然，你可以用这个来压缩，这是我多次搜索的结果

> dstLen = LZMA_PROPS_SIZE + srcLen + srcLen/3 + 128

# sql-server - Access 2007 到 SQL Server 安全连接

> ID：14765624
> 
> 赞同：1
> 
> 时间：2013-02-08T04:22:35.000
> 
> 标签：sql-server, security, ms-access-2007

是否可以让 Access 2007 通过安全连接链接到 SQLServer，从而加密局域网流量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:36:11.503

I haven't used it myself but it looks like you can use ssl encryption on network traffic through odbc:

[http://support.microsoft.com/kb/316898/en-us](http://support.microsoft.com/kb/316898/en-us)

# c# - 如何将系统日期与数据库表中存在的日期进行比较

> ID：14765629
> 
> 赞同：1
> 
> 时间：2013-02-08T04:23:20.743
> 
> 标签：c#, asp.net, sql-server

## 我的表 TimeTable 中有 2 列

1.  `start_date`（格式为`DD-MM-YYYY`）
2.  `end_date`

如果我从我的登录页面登录，我想检查当前日期是否在`start_date`和之间`end_date`；如果是这样，我可以登录。

如何在 C#..asp.net.. 中进行比较？

我已成功在登录页面中打印当前日期。

```
lblMsg.Text= DateTime.Now.ToString("dd-MM-yyyy"); 
```

我在 c# 中使用 asp.net

```
 start_date              end_date
8/2/2013 12:00:00 AM    10/2/2013 12:00:00 AM 
```

## 以 DD/MM/YYYY 格式存储日期的代码

CultureInfo 提供者 = CultureInfo.InvariantCulture；

```
 DateTime startdate = DateTime.ParseExact(tbstartdate.Text.ToString().Trim(), "dd/MM/yyyy", provider);
        DateTime enddate = DateTime.ParseExact(tbenddate.Text.ToString().Trim(),"dd/MM/yyyy",provider);
        string sql = "INSERT INTO TimeTable(start_date,end_date)"
     + "VALUES (@startdate,@enddate)";
        SqlConnection conn = new SqlConnection(ConnectionString);
        conn.Open();
        SqlCommand cmd = new SqlCommand(sql, conn);

        cmd.Parameters.Add("@startdate", SqlDbType.DateTime).Value = startdate;
        cmd.Parameters.Add("@enddate", SqlDbType.DateTime).Value = enddate;

        cmd.Prepare();
        n = cmd.ExecuteNonQuery();

        conn.Close(); 
```

## 登录页面查看日期代码

CultureInfo 提供者 = CultureInfo.InvariantCulture；

```
 DateTime date = DateTime.ParseExact(DateTime.Now.ToString("dd/mm/yyyy"), "dd/MM/yyyy", provider);
      //  DateTime date=DateTime.Now.ToString("dd/mm/yyyy");

        string query1 = "select * from TimeTable where ((start_date >= @date1 and End_date<= @date2) and UserType=@type)";
        SqlConnection conn = new SqlConnection(ConnectionString);
        conn.Open();
        SqlCommand com = new SqlCommand(query1, conn);
        com.Parameters.Add("@type",dpusertype.SelectedItem.Text.ToString());
        com.Parameters.Add("@date1",date);
        com.Parameters.Add("@date2", date);
        com.CommandType = CommandType.Text;
        SqlDataAdapter da = new SqlDataAdapter(com);
        DataTable dt = new DataTable();
        da.Fill(dt); 
```

`if (dt.Rows.Count > 0) // 比较表中的用户

```
 {

            FormsAuthentication.RedirectFromLoginPage(txtFcode.Text, Persist.Checked);
            Response.Redirect("~/DeptCoordinator/DeptCoordinator_homepage.aspx");  
        } 
```

## 出现错误

日历 System.Globalization.GregorianCalendar 不支持字符串表示的 DateTime。描述`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T04:29:22.137

假设您已经从表中加载了 start_date 和 end_from。然后

```
var now = DateTime.Now.Date;
var allowLogin = start_date <= now && now <= end_date; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:41:01.380

`DateTime.Ticks`会占时间。
使用`.Ticks`将`DateTime`您的日期转换为`longs`.
然后只需使用一个简单的 if stmt 来查看您的目标日期是否介于两者之间。

```
var now = DateTime.Now.Date;

 // Assuming you know d2 > d1
if (now .Ticks > start_date.Ticks && now.Ticks < end_date.Ticks)
{
    // targetDt is in between d1 and d2
} 
```

## 编辑 1

但我建议你在`database`而不是比较它`c#`。

```
 select 
        columnName1, 
        columnName2,
        ....
   from 
       tableName
   where
       GETDATE() between start_date and end_date; 
```

一些有用的链接：-
[在 DateTime 字段中的两个日期之间进行选择 - SQL Server](https://stackoverflow.com/questions/1945722/selecting-between-two-dates-within-a-datetime-field-sql-server)
[检查 datetime 实例是否位于其他两个 datetime 对象之间](https://stackoverflow.com/questions/5672862/check-if-datetime-instance-falls-in-between-other-two-datetime-objects)

# django - 如何计算在 Django 中共享文件的用户数？

> ID：14765630
> 
> 赞同：0
> 
> 时间：2013-02-08T04:23:29.013
> 
> 标签：django, django-queryset

我有两个这样的模型：

```
class File(models.Model):
    users = models.ForeignKey(User)
    file_name = models.CharField(max_length=100)
    type = models.CharField(max_length=10)
    source = models.CharField(max_length=100)
    start_date = models.TextField()
    end_date = models.TextField()
    duration = models.TextField()
    size_overview = models.IntegerField()
    size = models.TextField()
    flag = models.TextField()
    #delete_date = models.CharField(max_length=100, null=True, blank=True)

class Share(models.Model):
    users = models.ForeignKey(User)
    files = models.ForeignKey(File)
    shared_user_id = models.IntegerField()
    shared_date = models.TextField() 
```

我想计算共享文件的人。例如，如果文件 ok.t​​xt 与 2 人共享，我想显示 file_information 并显示 shared_with coloumn 2 的值。我这样做：

```
 file_s = Share.objects.filter(users_id=log_id)
 shared_with = Share.objects.filter(files_id__in = file_s).values_list('shared_user_id', flat=True).distinct().count() 
```

但它为每个文件显示相同的 shared_with 编号。我究竟做错了什么？

**编辑：**实际上我的查询是正确的，但我不知道如何在模板中调用它：

```
#views.py
def shared_by_me(request):
    try: 
        log_id = request.user.id
        username = request.user.username

        #Shared by me file information
        file_s = Share.objects.filter(users_id=log_id)

        b = [i.files_id for i in file_s]
        c = map(str, b)
        c = ''.join(c)
        shared_with = Share.objects.filter(files_id__in = file_s).values_list('shared_user_id', flat=True).distinct().count() 
        shared_file = File.objects.filter(id__in= Share.objects.filter(users_id = log_id).values_list('files', flat=True))
        #shared_username = User.objects.filter(id__in= Share.objects.filter(users_id = log_id).values_list('shared_user_id', flat=True))
        shared_username = Share.objects.filter(shared_user_id=log_id)
        #shared_file = File.objects.filter(id__in = c, users__id = log_id)
        return render_to_response('shared_by_me.html', {'shared_by_me':shared_file, 'shared_with':shared_with, 'username':username, 'shared_username':shared_username}, context_instance=RequestContext(request))
    except ValueError:
        return render_to_response('shared_by_me.html', {'username':username}, context_instance=RequestContext(request))

#template:
    {% for choice in shared_by_me %}
            <tr class="oddclass">
              <td><input type="checkbox" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" onchange="checkChecked()"/></td>
              <td><label for="choice{{ forloop.counter }}">{{ choice.file_name }}</label></td>
              <td>{{ choice.type }}</td>
              <td>{{ choice.size }}</td>
              <td>{{ choice.end_date }}</td>
              <td><a href="#" onclick="share()">{{ shared_with }}</a></td>
              {% endfor %}

            </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:36:38.833

也许试试这个？

```
file_s = Share.objects.filter(files__pk = somePk).count() 
```

由于每个共享对象只对应一个用户，这给出了有多少`Share`对象具有`files`主键`somePk`

然后`count()`只计算数字

# python - 确定一个句子是英语的概率的相对简单的方法是什么？

> ID：14765632
> 
> 赞同：8
> 
> 时间：2013-02-08T04:23:51.153
> 
> 标签：python, string, nlp, bayesian

我有许多字符串（字符集合）代表不同语言的句子，比如：

> > 你好，我的名字是乔治。
> > 
> > Das brot ist 肠道。
> > 
> > ... ETC。

我想为每个人分配分数（从 0 .. 1 开始），表明它们是英语句子的可能性。是否有公认的算法（或 Python 库）可以用来执行此操作？

注意：我不在乎英语句子的语法是否完美。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T04:25:56.887

[贝叶斯分类器](http://en.wikipedia.org/wiki/Baysian_classifier)将是此任务的不错选择：

```
>>> from reverend.thomas import Bayes
>>> g = Bayes()    # guesser
>>> g.train('french','La souris est rentrÃ©e dans son trou.')
>>> g.train('english','my tailor is rich.')
>>> g.train('french','Je ne sais pas si je viendrai demain.')
>>> g.train('english','I do not plan to update my website soon.')

>>> print g.guess('Jumping out of cliffs it not a good idea.')
[('english', 0.99990000000000001), ('french', 9.9999999999988987e-005)]

>>> print g.guess('Demain il fera trÃ¨s probablement chaud.')
[('french', 0.99990000000000001), ('english', 9.9999999999988987e-005)] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T10:07:38.517

我知道答案已被接受，但是......通常语言 id 是使用字符 n-gram 模型完成的，而不是 Raymond 建议的词袋模型。这与在分类器中使用 n-gram 特征不同（实际上，通常不使用分类器，或者确实没有必要，至少在传统意义上不是）。这样做的原因是，通常只有几个字符就足以进行语言识别，而基于词袋的分类器（以及更多的 ngram 袋）需要使用与在训练。另一方面，基于字符的模型可以在几乎没有训练的情况下使用，并且几乎没有用于识别的数据。

这是它的工作原理。我们将字符串视为它包含的字符序列（包括空格和标点符号）。我们为这些字符序列构建了一个 n-gram 语言模型，其中 n=3 应该就足够了，但是使用 n=5 或 n=6 可以获得更高的准确度（以需要进行适当的平滑为代价，这可能会或可能并不容易，具体取决于您最终如何做到这一点）！假设我们有一个字符 n-gram 模型，其中 n=3，用于两种语言，法语和英语。在这个模型下，一个字符串的概率：

*c* = c_1, c_2 ... c_n

其中每个 c_i 是一个*字符*（包括空格、标点符号等）是：

p(c) = p(c_1) * p(c_2 | c_1) * p(c_3|c_2,c_1)...p(c_n|c_n-1,c_n-2)

现在，如果我们有法语和英语的模型，这转化为每种语言的分布的一组参数。这些实际上只是给出 c_i 给定 (c_i-1,c_i-2) 的条件概率的表，其中最大似然估计量只是：

计数（c_i-2，c_i-1，c）/计数（c_i-2，c_i-1）

尽管由于获得 0 概率的问题，语言建模基本上从未进行最大似然估计，但上面的似然函数将在参数估计中发挥重要作用（它只需要平滑）。

所以，你要做的就是决定字符串*c*是哪种语言，在你为你感兴趣的语言训练的语言模型下评估它的概率，并判断这个字符串来自分配它最高概率的模型（这相当于一个贝叶斯分类器，在类（即语言）上具有统一的先验，但假设分布是 n-gram 模型的分布，*而不是*朴素贝叶斯/多项式）。

有*很多*地方可以阅读有关语言建模的内容：可以在[Josh Goodman 的史诗](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDYQFjAA&url=http://research.microsoft.com/en-us/um/redmond/groups/srg/papers/2001-joshuago-tr72.pdf&ei=NMIYUfWvFIWr0AWLnYHwAg&usg=AFQjCNGbBosptmvPGlm3aCnGZDPwWkyVRA&sig2=dbhmKChUg_GoBgphfGXRXA&bvm=bv.42080656,d.d2k)中找到一个非常好的教程（虽然现在有点过时了，但这些想法保持不变，并且足以满足您的目的）。您可以查看[wikipedia page](http://en.wikipedia.org/wiki/Language_model)，在那里您会看到一元模型等效于多项分布。

最后，如果您正在寻找语言模型的 Python 实现，可能最广泛使用的是[NLTK](http://nltk.org/_modules/nltk/model/ngram.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T04:44:53.687

[你可以在这里](https://stackoverflow.com/questions/2024934/is-there-a-python-library-class-that-can-take-a-piece-of-text-and-determine-the)和[这里](http://code.activestate.com/recipes/326576/)找到一些关于 python 库的建议。

另一个简单的算法，如果你有每种语言的语料库，你可以通过在词频表中的简单查找来检测句子语言。

# c - 将 char 指针重置为数组的顶部

> ID：14765633
> 
> 赞同：0
> 
> 时间：2013-02-08T04:24:01.930
> 
> 标签：c

我正在编写一个函数，我需要计算数组的长度：

```
while(*substring){
    substring++;
    length++;
} 
```

现在当我退出循环时。该指针是否仍指向数组的开头？例如：

如果数组是“你好”

当我退出循环时，指针指向：

H 还是 NULL？

如果它指向NULL，我如何让它指向H？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:37:58.043

C 中的字符串以空字符（表示为`\0`）结尾存储。

因此，可以如下声明一个字符串。

```
char *str="Hello!"; 
```

在内存中，这看起来像`Hello!0`（或者更确切地说，对应于每个字母后跟零的一串数字）。

您的代码如下所示：

```
substring=str;
length=0;
while(*substring){
    substring++;
    length++;
} 
```

当你到达这个循环的末尾时，`*substring`将等于`0`并`substring`包含`0`上面提到的字符的地址。除非您明确这样做，否则的值`substring`不会改变。

要使其指向字符串的开头，您可以使用`substring-length`，因为指针是整数并且可以这样操作。或者，您可以在开始之前记住该位置：

```
beginning=str;
substring=str;
length=0;
while(*substring){
    substring++;
    length++;
}
substring=beginning; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:26:03.810

它指向数组的 NULL 终止符。只需记住另一个变量中的位置，或从指针中减去长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:15:35.427

指针一旦移动将不会自动移动到任何其他位置。因此，一旦 while 循环越过指针将指向 NULL 或精确地 '\0'，这是字符串的终止序列。为了回到字符串的长度，只需计算字符串长度，您已经通过增加长度变量来执行此操作。示例代码：

```
#include<stdio.h>
int main()
{
  char name1[10] = "test program";
  char *name = '\0';
  name = name1;
  int len = strlen(name);
  while(*name)
  {
    name++;
  }
  name=name-len;
  printf("\n%s\n",name);
} 
```

希望这可以帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T04:31:34.037

在循环结束时，`*substring`将是`0`. 这是循环结束的条件：

```
while(*substring) 
```

所以`while( (the value pointed to by substring) is not equal to 0), do stuff`

但随后`*substring`变为 0（即字符串结尾），因此`*substring`将指向 NULL。

如果你想把它带回H，做`substring - length`

但是，您正在编写的函数已经[存在](http://www.cplusplus.com/reference/cstring/strlen/)。它在`string.h`里面，它`size_t strlen(const char*)` `size_t`是一个指针大小的整数（即 32 位操作系统上的 32 位和 64 位操作系统上的 64 位）。

# pycharm - 我可以全局关闭 PyCharm 来处理我的版本控制吗？

> ID：14765639
> 
> 赞同：1
> 
> 时间：2013-02-08T04:24:43.720
> 
> 标签：pycharm

我不想在每个项目上都取消设置 git 处理，是否有全局配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:55:14.447

您可以在 File¦Settings¦Plugins 中禁用特定版本控制系统的插件。

# ruby - Bash I/O 重定向可以在 Ruby 脚本中工作吗？

> ID：14765645
> 
> 赞同：1
> 
> 时间：2013-02-08T04:25:12.343
> 
> 标签：ruby, bash, shell

在 Bash 中，我想比较 2 个不同 CSV 的字段（file1 的字段 2 和 file2 的字段 3）：

```
diff <(cut -d, -f2 file1) <(cut -d, -f3 file2) 
```

我尝试在 Ruby 中更普遍地实现这一点：

```
def identical_files?(file1, field1, file2, field2)                                                                                                              
  %x{diff <(cut -d, -f#{field1} #{file1}) <(cut -d, -f#{field2} #{file2})}.blank?                                   
end 
```

打印`%x{}`块的输出，我看到了`sh: Syntax error: "(" unexpected`。在 Ruby 中运行 shell 命令时，I/O 重定向是否不起作用？这是因为它只支持 bash 而不是 sh？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T04:33:24.267

它不起作用，因为正如您收到的错误所示，Ruby 向 sh 发送，而不是 Bash。而且，当然， sh 不支持该语法。

您可以改为显式调用 Bash：

```
`bash -c 'cat <(echo foo)'`  #=> "foo" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:33:10.053

> 这是因为它只支持 bash 而不是 sh？

是的。

sh 不支持进程替换，即使 sh 实际上是 bash（为了兼容性）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:06:50.110

不要尝试使用像`cut`处理 CSV 文件中的字段这样简单的东西。CSV 文件可以在字段内嵌入逗号，这样会傻瓜式地剪切，导致您的代码做错事。

相反，使用专门设计用于处理 CSV 文件的东西，例如 Ruby 的[CSV](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)类。像这样未经测试的代码会让你开始：

```
需要'csv'

csv_file1 = CSV.open('file1')
csv_file2 = CSV.open('file2')

直到 (csv_file1.eof?|| csv_file2.eof?) 做
  row1 = csv_file1.shift
  row2 = csv_file2.shift

  # 做一些事情来区分字段
  提出“#{ csv_file1.lineno }: #{ row1[1] } == #{ row2[2] } --> #{ row1[1] == row2[2] }”
结尾

[
  [csv_file1, 'file1'],
  [csv_file2, 'file2']
].每个都做 |f, fn|
  如果 f.eof? 将 "Hit EOF for #{ fn }"
  f.close
结尾

```

# javascript - jQuery 插件与 this.each 中断

> ID：14765646
> 
> 赞同：0
> 
> 时间：2013-02-08T04:25:21.047
> 
> 标签：javascript, jquery, jquery-plugins

我正在编写一个插件并尝试将函数包装在每个方法中，但它破坏了插件。如果块内容未包含在“this.each”插件中。我知道为了传递多个选择器，我需要“返回 this.each”吗？我还想消除在插件中使用选择器的需要，例如“#the_lead”，而不是使用“this”。

```
(function($) {
    $.fn.scroll_lead = function (options) {
        var defaults = {
            speedup: 500
        };
        var options = $.extend({}, defaults, options);
        return this.each(function () {
            var $window_height = $(window).height();
            var $document_height = $(document).height();
            var $hide_lead;
            $(window).scroll(function () {
                var $scrollTop = $(window).scrollTop();
                if (!$hide_lead) {
                    if ($scrollTop > ($document_height / 2)) {
                        $("#the_lead").slideDown(options.speedup);
                    } else {
                        $("#the_lead").slideUp(500, function () {
                            $(this).hide();
                        });
                    }
                }
            });
            $('#hide_lead').click(function (e) {
                $(this).parent().parents('div').hide();
                hide_lead = true;
                e.preventDefault();
            });
        });
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:03:28.813

首先，您的语法不正确。

`each`不会存在，`this`因为这是函数的上下文，而不是 jquery 知道的元素。

试试`$(this).each`哪个会让你更接近。

请记住[Jquery.Each](http://api.jquery.com/jQuery.each/)不能迭代不是对象或数组的东西，因此请确保您尝试实现的目标是有意义的。

你想在这里达到什么目的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T20:25:21.300

一些事情;

1.  将 $(this) 分配给 $this 并在插件内的任何函数中使用它，如教程[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)中所述。

    ```
    return this.each(function () {
        var window_height = $(window).height();
        var document_height = $(document).height();
        var hide_lead;
        $this = $(this);
        $(window).scroll(function () {
            var scrollTop = $(window).scrollTop();
            if (!hide_lead) {
                if (scrollTop > (document_height / 2)) {
                    $this.slideDown(options.speedup);
                } else {
                    $this.slideUp(500, function () {
                        //$(this).hide();
                    });
                }
            }
        });
        $this.click(function (e) {
            $(this).parent().parents('div').hide();
            hide_lead = true;
            e.preventDefault();
        });
    }); 
    ```

2.  尽量避免在插件中操作父对象，包括 $(window) 和 $(document)。

    可以读取窗口和文档的属性，但是如果在您的插件中对其进行操作，它将根据您的选择器的次数进行操作。

    在您的代码中，因为您使用 this.each，所以您绑定了窗口的滚动功能多次。例如， $("div").scroll_lead() 会将 'scroll' 方法绑定到与文档标签一样多的窗口。这同样适用于 $(document) 和插件目标的所有父元素。

3.  如果可能并且这是您的意图，请使用元素滚动方法，而不是窗口滚动。

    获取滚动值 $(el).scrollTop()

    要向下滚动，$(el).scrollTop(NUMBER)

    要绑定 onScroll 方法， $(el).scroll( function() {...} )

希望能帮助到你

# jquery - jquery加载图片

> ID：14765650
> 
> 赞同：0
> 
> 时间：2013-02-08T04:25:50.363
> 
> 标签：jquery

我有以下 html 代码，如果我单击图像按钮“button.png”，则相应的图像“image.png”将显示在“内容”div中：

HTML：

```
<div>
  <a href="/static/images/image.png" class="content">
      <img src="/static/images/button.png" class="button">
  </a>
</div>
<div id="content"></div> 
```

jQuery：

```
$(document).ready(function() {
  $('a.content').click(function() {
    var url = $(this).attr('href');
    $('#content').load(url);
      return false
  }); 
```

但是，我无法正确显示图像（出现一堆代码）。请帮忙。谢谢。});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T04:27:06.290

[该`load`方法](http://api.jquery.com/load/)将尝试将给定的 URL 加载为 HTML 并将该 HTML 插入到选定的节点中。PNG 不是 HTML，因此`load`无法正常工作。相反，添加一个`img`带有适当`src`. 这可能是这样实现的：

```
$('<img>').attr('src', url).appendTo('#content'); 
```

但是，您可能希望`content` `div`在附加之前清除 ，这样就不会建立图像。为此，您可以使用[`empty`](http://api.jquery.com/empty/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:28:32.717

```
$(document).ready(function() {
$('a.content').click(function() {
    var url = $(this).attr('href');
    $('<img src="'+url+'">').appandTo("#content");
}); 
```

因为要显示图像，您必须使用`<img>`标签。appendTo [()](http://api.jquery.com/appendTo/)有助于创建一个新的 DOM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T05:31:58.777

你是如此接近完成它。

```
$(document).ready(function() {
  $('a.content').click(function() {
    var url = $(this).attr('href');
    $('#content').html($("<img/>").attr('src',url));
    return false
  }
); 
```

您可以使用 html() 方法清空/替换整个 div 内容。

# git - GIT 使用 Unfuddle 错误

> ID：14765653
> 
> 赞同：2
> 
> 时间：2013-02-08T04:26:01.153
> 
> 标签：git

嗨，我正在使用 GIT @ Unfuddle.com 作为我的代码的存储库。但是，当我尝试使用适用于 Mac 的 SourceTree 应用程序克隆存储库时，我收到以下错误/警告

警告：带有指纹 78:be:b6:a5:7a:a2:7f:59:3b:d8:8c:df:87:e6:22:c1:7e:5b:a7:a5 的 apdigital.unfuddle.com 证书不是已验证（检查 hostfingerprints 或 web.cacerts 配置设置）用户：Authentihttp 授权所需领域：2013-02-08 09:31:38.609 Askpass[10452:707] 错误（internetKeychainItemForServer:withUsername:path:port:protocol:) - 指定在钥匙串中找不到项目。致命：[https](https://mycompany.unfuddle.com/git/repositoryname) ://mycompany.unfuddle.com/git/repositoryname not found：你在服务器上运行了 git update-server-info 吗？

任何人都可以帮助如何解决这个问题。我无法在我的机器上克隆存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:27:33.800

从[Git Unfundle 文档](https://unfuddle.com/support/docs/git)中，远程 url 似乎是：

```
 git clone https://subdomain.unfuddle.com/git/subdomain_abbreviation/ 
```

请注意最后的 ' `/`'，并记住这些地址区分大小写，因此请仔细检查 URL 中的小写 - 大写。

# c# - 在 C# 中获取注册表项和值

> ID：14765656
> 
> 赞同：1
> 
> 时间：2013-02-08T04:26:15.570
> 
> 标签：c#

对不起，如果这很简单，我从大学起就没有编码。我正在尝试编写一个程序来查看 Windows 7 中的注册表项。我想先检查注册表值是否存在，然后检查该值是什么。如果它不存在，我想要一条消息，如果它确实存在，我想要一条消息反映值 1，另一条反映值 0。如果注册表项不存在，我让代码工作，但是如果我添加键和值，它就会崩溃。不知道我在这里做错了什么。任何建议，将不胜感激。这是我的代码。

```
using (RegistryKey Key = Registry.LocalMachine.OpenSubKey(@"SYSTEM\CurrentControlSet\services\LanmanServer\Parameters"))
if (Key != null)
{
    string val = (string)Key.GetValue("EnableOplocks");
    if (val == null)
    {
        oplockTextBox.Text = "Not Present In Registry";
        oplockTextBox.BackColor = Color.Yellow;
    }
    else if (val == "1")
    {
        opslockTextBox.Text = "NO";
        opslockTextBox.BackColor = Color.Red;
    }
    else
    {
        oplockTextBox.Text = "YES";
        oplockTextBox.BackColor = Color.Green;
    }
}
else
{
    MessageBox.Show("");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T04:43:15.197

据我所知，该[`EnableOplocks`](https://support.microsoft.com/en-us/help/296264/configuring-opportunistic-locking-in-windows)注册表项的值是一个`DWORD`值，它会`int`在您使用时`GetValue()`为您提供检索它的值。尝试将 an 强制转换`int`为 a`string`会产生`InvalidCastException`.

相反，你应该试试这个：

```
int? val = Key.GetValue("EnableOplocks") as int?;
if (val == null)
{
    // ..
}
else if (val == 1)
{
    // ...
} 
```

或这个：

```
object val = Key.GetValue("EnableOplocks");
if (val == null)
{
    // ...
}
else
{
    string strVal = val.ToString();
    if (strVal == "1")
    {
        // ...
    }
} 
```

一般来说，请记住提供您拥有的*所有*错误信息。说“它崩溃了”并不是很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:42:30.283

注册表可以保存字符串以外的数据类型。正在发生的事情是您可能会得到一个`int`返回，这就是为什么当您尝试将 a`int`转换为 a时会崩溃的原因`string`

取回值并将其存储在 a 中`object`并让您的调试器中断。然后，您应该能够查看对象中存储的数据类型并更改代码以进行正确的转换。

另一个选项是使用`.ToString()`而不是强制转换，您需要比较字符串 1（就像您现在一样）而不是值 1。但是，我总是更喜欢只使用正确的类型而不是将所有内容都转换为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T04:43:04.250

使用跟随；

```
string val = Key.GetValue("EnableOplocks").ToString(); 
```

**编辑**

```
using (RegistryKey Key = Registry.LocalMachine.OpenSubKey(@"SYSTEM\CurrentControlSet\services\LanmanServer\Parameters"))
if (Key != null)
{
    var val = Key.GetValue("EnableOplocks");
    if (val == null)
    {
        oplockTextBox.Text = "Not Present In Registry";
        oplockTextBox.BackColor = Color.Yellow;
    }
    else if (val.ToString() == "1")
    {
        opslockTextBox.Text = "NO";
        opslockTextBox.BackColor = Color.Red;
    }
    else
    {
        oplockTextBox.Text = "YES";
        oplockTextBox.BackColor = Color.Green;
    }
}
else
{
    MessageBox.Show("");
} 
```

# sql - 项目的 dbms sql 查询

> ID：14765661
> 
> 赞同：-3
> 
> 时间：2013-02-08T04:26:29.100
> 
> 标签：sql

这是手稿台

```
BOOKID  AUTHORID    BOOKNAME            GENRE   NOOFCOPIES  AMOUNT
B105    A102        Diagnosis           Journal     500 10000
B102    A102        The Essence Of Life Fiction     110 11000
B106    A102        Clinical Science    Educational 125 18750
B104    A103        Mind Games          Fiction     200 20000
B100    A102        Sublime             Fiction     100 10000
B101    A105        C Programming       Educational 125 18750
B103    A101        Scribe              Journal     500 10000
B107    A101        Clinical Chemistry  Educational 125 54646
B108    A103        Clinical Chemistry  Educational 125 54646 
```

如何编写查询来检索已出版最少图书数量的作者和作者名列表？

**例外的输出是 A105 的详细信息...**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:44:35.450

使用[TOP](http://msdn.microsoft.com/en-us/library/ms189463.aspx)关键字

```
Select TOP 1 BOOKID,AUTHORID from manuscript ORDER BY NOOFCOPIES ASC 
```

使用子查询

SELECT m.AuthorId, a.AuthorName FROM Author a, Manuscript m WHERE (a.AuthorID = m.AuthorID) AND (m.Numberofcopies IN (SELECT MIN(Numberofcopies) FROM Manuscript));

# android - 侧导航栏未在移动设备中显示？

> ID：14765664
> 
> 赞同：0
> 
> 时间：2013-02-08T04:26:52.343
> 
> 标签：android, html, css, google-chrome, mobile

所以我对整个 css 和 div 还是很陌生，请原谅我糟糕的编码。:/ 不管怎样，我已经完成了一个网站，但奇怪的是侧导航栏没有出现在移动浏览器上，比如 Chrome 和默认的 android 浏览器。关于为什么的任何想法？感谢所有帮助。

[http://escobarboxing.com/](http://escobarboxing.com/)

此外，我已经通过 Chrome、FF 和 Opera 在我的桌面上对其进行了测试，它似乎工作正常，但另一个使用 Chrome 的用户说他没有看到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:46:17.837

是的，这是因为：#menu{position: absolute;}

因为位置是绝对的，并且主要内容是居中的，所以当你得到一个小屏幕尺寸时，菜单会放在内容的后面。您可以通过将屏幕大小调整为非常窄来进行试验。

要快速修复，请删除 position: absolute，这将解决您的问题，但这是我的建议：

从#menu 和#container 中删除绝对位置和相对位置。从#container 中删除左右边距：auto，然后向左浮动#container (float:left;)。最后，将自动左右边距应用到#site（您需要先指定宽度，看起来 920px 应该可以工作）。#menu 将保留在#container 旁边，并且两者都将相对于页面居中。

为了更好地衡量，我会在网站上方添加一个 100% 的高度和宽度 div (#wrapper)。

另外，请注意，如果您输入“位置：绝对；” 在任何情况下，它都会从元素的“流”中删除，因此边距不会影响它。这是一篇很棒的文章，帮助我弄清楚了位置：[http ://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

欢迎来到 CSS！这很有趣，有时甚至会加重。我希望你喜欢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:41:27.733

您应该尝试将菜单 div 添加到容器并删除绝对位置。我看到太多 div 所以尝试使用更少的 div。为什么需要那个 cssmenu div？

```
 <div id="container">
    <div id="menu">
    <div id="cssmenu">
    </div>
    </div>
    <div class="insta">
    </div>
      rest of content
    </div> end container

                .insta {
                color: #333333;
                width: 100%;
                margin-left: auto;
                margin-right: auto;
                -webkit-border-radius: 7px;
                -moz-border-radius: 7px;
                border-radius: 7px;
                -moz-box-shadow: 0 0 10px 0 #000;
                -webkit-box-shadow: 0 0 10px 0 #000;
                box-shadow: 0 0 10px 0 #000;
                background: #EDEDED;
                float:right;
                width:770px;
                }
                #container {
                overflow: auto;
                height: auto;
                width:920px;
                                    margin:0 auto;
                }
            #menu {
            float: left;
            margin-top: 25px;
            } 
```

希望这个答案有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:37:42.993

尝试使用 %'s 而不是固定宽度。正在发生的事情是在较小的屏幕上，菜单被您的内容块覆盖，因为该块对于屏幕来说太大了。要了解我的意思，请使用您的智能手机打开网站，然后将容器的大小调小。当您刷新时，您将看到您的菜单出现。我在这台笔记本电脑上有 Firefox，菜单也没有显示给我。

# java - 具有不同时差的调度程序

> ID：14765667
> 
> 赞同：1
> 
> 时间：2013-02-08T04:27:05.767
> 
> 标签：java, spring, cronexpression

我每 15 分钟创建了一个带有 cron 表达式的调度程序

```
file.schedule=0 0/15 * * * ? 
```

它每 15 分钟安排一次

现在我需要更改它，因为它应该运行：

*   从上午 12 点（即 00:00）到上午 9 点（09:00）每 15 分钟一班。
*   从上午 9 点（即 9.00）到晚上 11 点（23:00）每隔一小时

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:45:01.720

这会做，

从上午 12 点（即 00:00）到上午 9 点（09:00）每 15 分钟一班。

```
0 0/15 0-9 * * ? 
```

从上午 9 点（即 9.00）到晚上 11 点（23:00）每隔一小时

```
0 0   9-23 * * ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:31:54.550

将[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)与[ScheduledFuture一起使用](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledFuture.html)

定时器详细[教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

# eclipse - Eclipse 无法启动——可能是因为安装了新的 JRE

> ID：14765669
> 
> 赞同：1
> 
> 时间：2013-02-08T04:27:07.227
> 
> 标签：eclipse, startup

**环境：**

```
Windows XP
Eclipse Java EE Juno 
```

有一天，我尝试启动 Eclipse： 我单击了 Eclipse 的快捷方式 出现了通常的启动屏幕和工作区选择器。我选择一个工作区。我收到以下错误：

```
An error has occurred. See the log file
C:\local-work\Java\.metadata\.log 
```

日志文件包含一长串异常。有关完整列表，请参阅此帖子的末尾。

我记得做的最后一件事可能导致这个问题是通过 Oracle 的自动下载弹出窗口之一下载新版本的 jre (jre1.6.0_01)。

我尝试查看 jre 目录，但它已损坏，因此我再次下载了它。我在启动 Eclipse 时遇到了同样的错误，所以我卸载了 Eclipse 然后再次安装它，但问题仍然存在。我也尝试过创建一个新的工作区。

附加信息：我使用 JDK 1.7 运行我的项目。我看过与此类似的帖子，但它们不包含适用于我的案例的解决方案。

这是日志的开始。为了发布此消息，我不得不删除很多内容。

```
!SESSION 2013-02-04 22:11:20.078 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.7.0_13
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.jee.product

!ENTRY org.eclipse.osgi 4 0 2013-02-04 22:11:53.187
!MESSAGE An error occurred while automatically activating bundle org.eclipse.core.resources (76).
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.core.resources.ResourcesPlugin.start() of bundle org.eclipse.core.resources.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:125)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
Caused by: java.lang.InternalError: Currency data is possibly corrupted
    at java.util.Currency$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.Currency.<clinit>(Unknown Source)
    at java.text.DecimalFormatSymbols.initialize(Unknown Source)
    at java.text.DecimalFormatSymbols.<init>(Unknown Source)
    at java.text.DecimalFormatSymbols.getInstance(Unknown Source)
    at java.text.NumberFormat.getInstance(Unknown Source)
    at java.text.NumberFormat.getIntegerInstance(Unknown Source)
    at java.text.SimpleDateFormat.initialize(Unknown Source)
    at java.text.SimpleDateFormat.<init>(Unknown Source)
    at java.text.SimpleDateFormat.<init>(Unknown Source)
    at org.eclipse.osgi.framework.debug.EclipseDebugTrace.<clinit>(EclipseDebugTrace.java:51)
    at org.eclipse.osgi.framework.debug.FrameworkDebugOptions.setFile(FrameworkDebugOptions.java:439)
    at org.eclipse.core.internal.runtime.DataArea.createLocation(DataArea.java:185)
    at org.eclipse.core.internal.runtime.DataArea.initializeLocation(DataArea.java:147)
    at org.eclipse.core.internal.runtime.DataArea.assertLocationInitialized(DataArea.java:59)
    at org.eclipse.core.internal.runtime.DataArea.getStateLocation(DataArea.java:120)
    at org.eclipse.core.internal.runtime.InternalPlatform.getStateLocation(InternalPlatform.java:546)
    at org.eclipse.core.runtime.Plugin.getStateLocation(Plugin.java:313)
    at org.eclipse.core.internal.resources.LocalMetaArea.<init>(LocalMetaArea.java:57)
    at org.eclipse.core.resources.ResourcesPlugin.start(ResourcesPlugin.java:430)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 28 more
Root exception:
java.lang.InternalError: Currency data is possibly corrupted
    at java.util.Currency$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.Currency.<clinit>(Unknown Source)
    at java.text.DecimalFormatSymbols.initialize(Unknown Source)
    at java.text.DecimalFormatSymbols.<init>(Unknown Source)
    at java.text.DecimalFormatSymbols.getInstance(Unknown Source)
    at java.text.NumberFormat.getInstance(Unknown Source)
    at java.text.NumberFormat.getIntegerInstance(Unknown Source)
    at java.text.SimpleDateFormat.initialize(Unknown Source)
    at java.text.SimpleDateFormat.<init>(Unknown Source)
    at java.text.SimpleDateFormat.<init>(Unknown Source)
    at org.eclipse.osgi.framework.debug.EclipseDebugTrace.<clinit>(EclipseDebugTrace.java:51)
    at org.eclipse.osgi.framework.debug.FrameworkDebugOptions.setFile(FrameworkDebugOptions.java:439)
    at org.eclipse.core.internal.runtime.DataArea.createLocation(DataArea.java:185)
    at org.eclipse.core.internal.runtime.DataArea.initializeLocation(DataArea.java:147)
    at org.eclipse.core.internal.runtime.DataArea.assertLocationInitialized(DataArea.java:59)
    at org.eclipse.core.internal.runtime.DataArea.getStateLocation(DataArea.java:120)
    at org.eclipse.core.internal.runtime.InternalPlatform.getStateLocation(InternalPlatform.java:546)
    at org.eclipse.core.runtime.Plugin.getStateLocation(Plugin.java:313)
    at org.eclipse.core.internal.resources.LocalMetaArea.<init>(LocalMetaArea.java:57)
    at org.eclipse.core.resources.ResourcesPlugin.start(ResourcesPlugin.java:430)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:125)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)

!ENTRY org.eclipse.osgi 4 0 2013-02-04 22:11:53.250
!MESSAGE Application error
!STACK 1
java.lang.NoClassDefFoundError: org/eclipse/core/resources/IContainer
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:125)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.core.resources (76).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:469)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 13 more
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.core.resources.ResourcesPlugin.start() of bundle org.eclipse.core.resources.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:300)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:263)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 22 more
Caused by: java.lang.InternalError: Currency data is possibly corrupted
    at java.util.Currency$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.Currency.<clinit>(Unknown Source)
    at java.text.DecimalFormatSymbols.initialize(Unknown Source)
    at java.text.DecimalFormatSymbols.<init>(Unknown Source)
    at java.text.DecimalFormatSymbols.getInstance(Unknown Source)
    at java.text.NumberFormat.getInstance(Unknown Source)
    at java.text.NumberFormat.getIntegerInstance(Unknown Source)
    at java.text.SimpleDateFormat.initialize(Unknown Source)
    at java.text.SimpleDateFormat.<init>(Unknown Source)
    at java.text.SimpleDateFormat.<init>(Unknown Source)
    at org.eclipse.osgi.framework.debug.EclipseDebugTrace.<clinit>(EclipseDebugTrace.java:51)
    at org.eclipse.osgi.framework.debug.FrameworkDebugOptions.setFile(FrameworkDebugOptions.java:439)
    at org.eclipse.core.internal.runtime.DataArea.createLocation(DataArea.java:185)
    at org.eclipse.core.internal.runtime.DataArea.initializeLocation(DataArea.java:147)
    at org.eclipse.core.internal.runtime.DataArea.assertLocationInitialized(DataArea.java:59)
    at org.eclipse.core.internal.runtime.DataArea.getStateLocation(DataArea.java:120)
    at org.eclipse.core.internal.runtime.InternalPlatform.getStateLocation(InternalPlatform.java:546)
    at org.eclipse.core.runtime.Plugin.getStateLocation(Plugin.java:313)
    at org.eclipse.core.internal.resources.LocalMetaArea.<init>(LocalMetaArea.java:57)
    at org.eclipse.core.resources.ResourcesPlugin.start(ResourcesPlugin.java:430)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 28 more

!ENTRY org.eclipse.ui.ide 4 0 2013-02-04 22:11:53.468
!MESSAGE FrameworkEvent ERROR
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.ui.internal.ide.IDEWorkbenchPlugin.stop() of bundle org.eclipse.ui.ide.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.stop(BundleContextImpl.java:791)
    at org.eclipse.osgi.framework.internal.core.BundleHost.stopWorker(BundleHost.java:510)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.suspend(AbstractBundle.java:566)
    at org.eclipse.osgi.framework.internal.core.Framework.suspendBundle(Framework.java:1206)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.decFWSL(StartLevelManager.java:592)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:257)
    at org.eclipse.osgi.framework.internal.core.StartLevelManager.shutdown(StartLevelManager.java:215)
    at org.eclipse.osgi.framework.internal.core.InternalSystemBundle.suspend(InternalSystemBundle.java:284)
    at org.eclipse.osgi.framework.internal.core.Framework.shutdown(Framework.java:692)
    at org.eclipse.osgi.framework.internal.core.Framework.close(Framework.java:600)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.shutdown(EclipseStarter.java:399)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:199)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.eclipse.osgi.framework.debug.EclipseDebugTrace
    at org.eclipse.osgi.framework.debug.FrameworkDebugOptions.setFile(FrameworkDebugOptions.java:439)
    at org.eclipse.core.internal.runtime.DataArea.createLocation(DataArea.java:185)
    at org.eclipse.core.internal.runtime.DataArea.initializeLocation(DataArea.java:147)
    at org.eclipse.core.internal.runtime.DataArea.assertLocationInitialized(DataArea.java:59)
    at org.eclipse.core.internal.runtime.DataArea.getStateLocation(DataArea.java:125)
    at org.eclipse.core.internal.preferences.InstancePreferences.getBaseLocation(InstancePreferences.java:44)
    at o
    at 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:37:58.230

事实证明我的 Java 安装已损坏。我检查了 .metadata 目录中的日志文件，它暗示了一个错误的货币代码。我卸载了jdk并重新安装了它。然后我对 Eclipse 做了同样的事情，现在它工作正常。我不知道 Java 安装是如何损坏的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T19:37:56.853

通过键入 java -version 转到 cmd 提示检查 java 版本，它将显示 java1.7，但在您的路径中，您已经给出了 jdk1.6。输入路径它会显示你给的路径。然后检查包含 java.exe、javac.exe 或 javaw.exe 的所有路径，删除它并启动 eclipse。

通常，此文件应为 c:\windows 或 c:\windows\system32。

# sql - 使用存储过程解析 xml 文件并获取节点的父名称

> ID：14765673
> 
> 赞同：0
> 
> 时间：2013-02-08T04:27:33.573
> 
> 标签：sql, sql-server, xml, sql-server-2008

我有一个 xml 文件，它作为 SQL Server 中存储过程的输入。我有一个表，其中包含列`element name`和`parent id`. 根元素父 id 为 0，第一个元素父 id 为 1，依此类推。我如何实现这一目标？

我的 xml 中有几种复杂类型

```
<VoyageOrderMessage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="voyage.xsd">
    <MessageHeader>
            <MessageId>ID</MessageId>
            <MessageDate>2009-11-01T11:42:07.414+03:00</MessageDate>
            <MessageTypeVersion>Version</MessageTypeVersion>
            <SenderId>SI</SenderId>
            <ReceiverDetails>
                <ReceiverMethod />
                <ReceiverFormat />
                <ReceiverAddress></ReceiverAddress>
                </ReceiverDetails>
    </MessageHeader>
    <VoyageOrder>
            <VoyageID>RG-FUW-001</VoyageID>
            <Amendment>4</Amendment>
            <IMO>9256200</IMO>
            <VesselName>Fuwairit</VesselName>
            <ShipMasterName />
            <OrderDate>2009-11-01T11:41:59.149+03:00</OrderDate>
            <Passage>
                <PassageNumber>1</PassageNumber>
                <PassageType>Laden</PassageType>
                <DeparturePortName>Ras Laffan</DeparturePortName>
                <DeparturePortCode>RLF</DeparturePortCode>
                <DepartureTime>2009-10-06T19:06:00.000+03:00</DepartureTime>
                <ArrivalPortName>Suez</ArrivalPortName>
                <ArrivalPortCode>SUZ</ArrivalPortCode>
                <ArrivalTime>2009-10-13T03:00:00.000+02:00</ArrivalTime>
            </Passage> 
```

示例输出

```
elementname parent id column
------------------------------
voyageorder   0             1
messageheader 1           2
messageid     2           3
etc 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:34:46.300

在回答问题作者的第一条评论

```
CREATE TABLE Blah
(SomeData XML)

INSERT Blah
SELECT MyXMLinfo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:42:58.243

看起来您可以使用[OPENXML返回的边缘表格式。](http://msdn.microsoft.com/en-us/library/ms175160.aspx)

[SQL小提琴](http://sqlfiddle.com/#!6/d41d8/2458)

**MS SQL Server 2012 架构设置**：

**查询 1**：

```
declare @xml xml = '
<VoyageOrderMessage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="voyage.xsd">
    <MessageHeader>
            <MessageId>ID</MessageId>
            <MessageDate>2009-11-01T11:42:07.414+03:00</MessageDate>
    </MessageHeader>
    <VoyageOrder>
            <VoyageID>RG-FUW-001</VoyageID>
            <Amendment>4</Amendment>
            <OrderDate>2009-11-01T11:41:59.149+03:00</OrderDate>
            <Passage>
                <PassageNumber>1</PassageNumber>
                <PassageType>Laden</PassageType>
            </Passage>
    </VoyageOrder>
</VoyageOrderMessage>'

declare @idoc int

exec sp_xml_preparedocument @idoc output, @xml

select *
from openxml(@idoc, '*')

exec sp_xml_removedocument @idoc 
```

**[结果](http://sqlfiddle.com/#!6/d41d8/2458/0)**：

```
| ID | PARENTID | NODETYPE |                 LOCALNAME | PREFIX |                              NAMESPACEURI | DATATYPE |   PREV |                                      TEXT |
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|  0 |   (null) |        1 |        VoyageOrderMessage | (null) |                                    (null) |   (null) | (null) |                                    (null) |
|  2 |        0 |        2 |                       xsi |  xmlns |                                    (null) |   (null) | (null) |                                    (null) |
| 14 |        2 |        3 |                     #text | (null) |                                    (null) |   (null) | (null) | http://www.w3.org/2001/XMLSchema-instance |
|  3 |        0 |        2 | noNamespaceSchemaLocation |    xsi | http://www.w3.org/2001/XMLSchema-instance |   (null) | (null) |                                    (null) |
| 15 |        3 |        3 |                     #text | (null) |                                    (null) |   (null) | (null) |                                voyage.xsd |
|  4 |        0 |        1 |             MessageHeader | (null) |                                    (null) |   (null) | (null) |                                    (null) |
|  5 |        4 |        1 |                 MessageId | (null) |                                    (null) |   (null) | (null) |                                    (null) |
| 16 |        5 |        3 |                     #text | (null) |                                    (null) |   (null) | (null) |                                        ID |
|  6 |        4 |        1 |               MessageDate | (null) |                                    (null) |   (null) |      5 |                                    (null) |
| 17 |        6 |        3 |                     #text | (null) |                                    (null) |   (null) | (null) |             2009-11-01T11:42:07.414+03:00 |
|  7 |        0 |        1 |               VoyageOrder | (null) |                                    (null) |   (null) |      4 |                                    (null) |
|  8 |        7 |        1 |                  VoyageID | (null) |                                    (null) |   (null) | (null) |                                    (null) |
| 18 |        8 |        3 |                     #text | (null) |                                    (null) |   (null) | (null) |                                RG-FUW-001 |
|  9 |        7 |        1 |                 Amendment | (null) |                                    (null) |   (null) |      8 |                                    (null) |
| 19 |        9 |        3 |                     #text | (null) |                                    (null) |   (null) | (null) |                                         4 |
| 10 |        7 |        1 |                 OrderDate | (null) |                                    (null) |   (null) |      9 |                                    (null) |
| 20 |       10 |        3 |                     #text | (null) |                                    (null) |   (null) | (null) |             2009-11-01T11:41:59.149+03:00 |
| 11 |        7 |        1 |                   Passage | (null) |                                    (null) |   (null) |     10 |                                    (null) |
| 12 |       11 |        1 |             PassageNumber | (null) |                                    (null) |   (null) | (null) |                                    (null) |
| 21 |       12 |        3 |                     #text | (null) |                                    (null) |   (null) | (null) |                                         1 |
| 13 |       11 |        1 |               PassageType | (null) |                                    (null) |   (null) |     12 |                                    (null) |
| 22 |       13 |        3 |                     #text | (null) |                                    (null) |   (null) | (null) |                                     Laden | 
```

# c#-4.0 - 设计库以生成动态 MDX 查询

> ID：14765680
> 
> 赞同：0
> 
> 时间：2013-02-08T04:28:37.490
> 
> 标签：c#-4.0, design-patterns, mdx

我们正在动态生成 MDX 查询。我们传递列列表（[DimesnionName].[Attribute.Name] 格式）、行（[DimesnionName].[Attribute.Name] 格式）和过滤器（[DimesnionName].[Attribute.Name].[Member Name] 格式）以及其他输入，如多维数据集名称、页码、度量等。

此信息被传递到 C# 库，然后我们使用大量“If”和“Else”条件来处理此输入并将 MDX 查询生成为字符串。它需要大量的字符串操作。

你可以说它有一个工作流程。在经历每个条件后，系统会生成一些输出。我想知道是否有更聪明的方法来设计这个库。

1.  我想删除 if else 条件。
2.  我想让它更具可读性。
3.  我想让它更易于管理

**我的问题是：我可以使用任何设计原则吗？我可以考虑使用 Windows WorkFlow。请提供您的建议**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T13:45:46.570

我实际上是在这里看看是否有人这样做，所以我不必这样做。到目前为止没有运气。但是在我的脑海中，您可能想要查看的是某种形式的规则引擎，它将评估目标字符串的状态并添加您的各种标准。

现在我什至还没有开始研究 MDX 的语法。我并没有那么远，但是如果我想创建一个引擎来创建 sql 查询，我会查看部分（首先是最简单的情况），您需要列列表、表和 where 子句列表。因此，您可以拥有三个或可能只有两个基本引擎类，其中一个接受字符串列表和（或更好的是表达式列表）并将它们连接起来（或评估然后连接它们）。如果目标字符串为空，则 targetString = "select "+ x else targetString = ", " + x。然后用 where 表达式做类似的事情。对于实现不同形式的 where 表达式等的构建类，您可以获得更多的幻想。然后最终你会通过你的引擎像

```
MySqlEngine(new[] {"FirstName", "LastName", "GirlFriendsAddress"},
           new []{EqualsExpression("FirstName","Brown"), EqualsExpression("LastName",Dynamite")},
           "People"); 
```

它会返回

```
"SELECT FirstName, LastName, GirlFriendsAddress From People Where FirstName = \"Brown\" AND LastName = \"Dynamite\"" 
```

我强烈建议使用表达式来评估与您的表匹配的目标模型上的属性。然后，您可以使 MySqlEnigine(...) 不必提供给表名，因为您的模型可以命名相同，并且除了 where 子句的目标值之外，您不使用任何字符串。

我知道这不是您想要的引擎，但我还不知道 MDX，因此您必须将其用作类比。

最后的想法不要使用窗口工作流。你会想半途而废，如果你一直坚持下去，那么未来很多年都会有开发者诅咒你的名字。

祝你好运

哦，如果您构建了请开源它并告诉我，这样我就不必这样做了。

# c - 将双指针传递给函数时会发生什么

> ID：14765683
> 
> 赞同：1
> 
> 时间：2013-02-08T04:28:57.377
> 
> 标签：c, stack, double-pointer

我在理解 c 中如何使用指针传递值机制时遇到了一些麻烦。这是我人为的例子......

* * *

在我的`main`函数中，我`malloc`指向一个数组的指针`int`：

```
int ** checkMe;
checkMe = malloc(sizeof(int *) * 10); 
```

我知道这个操作设置了一个由 10 块内存组成的块，每个块都足够大以保存指向指针的`int`指针。我在这 10 个块的开始处收到指针。

我有另一个函数将该双指针作为参数：

```
void test2dArray(int ** arr, int size) {
    int i, j;

    for (i = 0; i < size; i++) {
        // arr[i] = malloc(sizeof(int) * size);
        for (j = 0; j < size; j++) {
            arr[i][j] = i * j;
        }
    }
} 
```

* * *

每当我按原样离开评论部分时，并尝试像这样进入`malloc`空间：`int``main`

```
int ** checkMe;
checkMe = malloc(sizeof(int *) * 10);

for (i = 0; i < 10; i++) {
    checkMe[i] = malloc(sizeof(int));
}

test2dArray(checkMe, 10); 
```

每当我`checkMe`在`test2dArray`调用`main`.

**但是**，如果我改为in`malloc`的空间（通过取消注释上面的注释行）并将我的调用更改为：`int``test2dArray``main`

```
int ** checkMe;
checkMe = malloc(sizeof(int *) * 10);

test2dArray(checkMe, 10); 
```

内存崩溃消失了，我可以`checkMe`在函数调用后很好地引用。

* * *

我知道这`checkMe`是`test2dArray`按价值传递的。我认为这意味着返回的地址`checkMe = malloc(sizeof(int *) * 10);`被复制到函数中。

我不明白为什么如果我没有内部空间`int *`，商店会丢失`checkMe``malloc``test2dArray`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:35:28.740

当您分配时，`main`您不会分配 10 个整数，

```
checkMe[i] = malloc(sizeof(int)); 
```

将其更改为

```
checkMe[i] = malloc(sizeof(int) * 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:35:43.580

```
for (i = 0; i < 10; i++) {
    checkMe[i] = malloc(sizeof(int));
} 
```

您只`int`在每次循环迭代中为 1 分配内存。所以你有一个由 10 个指针组成的数组，每个指针都指向`sizeof(int)`内存字节。

```
test2dArray(checkMe, 10); 
```

仅适用于至少指向`10*sizeof(int)`内存的 10 个指针的数组。您应该将上面的行更改为`checkMe[i] = malloc(sizeof(int)*10)`;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T04:35:51.390

您的错误是这之间的区别：

```
checkMe[i] = malloc(sizeof(int)); 
```

还有这个：

```
arr[i] = malloc(sizeof(int) * size); // size = 10 
```

# python - 我可以根据提交时提供的其他信息覆盖新的 Trac 票证自定义字段吗？

> ID：14765684
> 
> 赞同：0
> 
> 时间：2013-02-08T04:28:59.830
> 
> 标签：python, customization, trac

在我们的 0.12.3 Trac 安装上安装 TracJsGantt 后，我​​正在尝试改进为 TracJsGantt 所需的自定义日期字段设置智能默认值的过程，以在某些操作后跟踪工单的开始和结束日期：创建或编辑工单。

我希望 Trac 在执行某些工单工作流操作时自动填充或清除这些自定义字段，例如在工单被接受或分配时使用当前日期填写 start_date，并在工单关闭时将完成日期设置为当前日期.

是否有另一个插件可以让我在工单更改后定义自定义操作，或者在创建或更新工单后执行操作并使用一些逻辑注入这些数据，是否有我可以操作的模板或者我们是否需要编写自己的模板这种情况的插件？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:54:37.287

[DynamicFieldsPlugin](http://trac-hacks.org/wiki/DynamicFieldsPlugin)允许您在编辑期间设置默认值或修改字段。

以下是从主页复制的一些配置示例，让您了解可能性：

```
[ticket-custom]
effort.show_when_type = enhancement|defect

[ticket-custom]
version.clear_on_change_of = milestone

[ticket-custom]
captain.copy_from = owner (overwrite)

[ticket-custom]
cc.default_value = (pref)
cc.append = true

[ticket-custom]
milestone.set_to_milestone3_when_phase = implementation|verifying|releasing 
```

# https - 将 Rails 3.2 应用程序部署到 Cloud Foundry，连接被拒绝和空日志

> ID：14765685
> 
> 赞同：0
> 
> 时间：2013-02-08T04:29:08.237
> 
> 标签：https, ruby-on-rails-3.2, cloud-foundry

我已将 Rails 3.2 应用程序部署到在 VM 中本地运行的 Micro Cloud Foundry。成功完成，`vmc push`运行`vmc logs`显示

```
=> Booting Thin
=> Rails 3.2.11 application starting in production on http://0.0.0.0:54263
=> Call with -d to detach
=> Ctrl-C to shutdown server
>> Thin web server (v1.5.0 codename Knife)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:54263, CTRL+C to stop 
```

日志中没有提到其他错误甚至警告。当我使用 URL 连接到应用程序时`blah.myname.cloudfoundry.me`，我注意到应用程序重定向到 HTTPS，然后显示连接被拒绝。

为了确保问题不在于我的 Micro Cloud Foundry 设置，我部署了一个简单的 Sinatra Hello World 应用程序，它运行良好。

我可以采取哪些步骤来帮助调试它，因为`vmc logs`没有提供任何帮助？我是否可以通过 SSH 从 Micro Cloud Foundry VM 访问其他日志，这些日志可能有问题的线索？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:58:58.683

您可以看到 Thin 被绑定到 VM 上的端口 54263，可能值得通过 SSH 连接到 vm 并使用 curl 打开 127.0.0.1:54263

检查 Rails 应用程序日志也是值得的，您可以使用“vmc files”命令并传递路径 app/logs/production.log 来执行此操作

# objective-c - 在 Interface Builder 中向 NSPopUpButton 添加选项

> ID：14765687
> 
> 赞同：8
> 
> 时间：2013-02-08T04:29:32.370
> 
> 标签：objective-c, xcode, macos, interface-builder

因此，当我在 Xcode 的 Interface builder 中添加 NSPopUpButton 时，它会自动在下拉列表中有 3 个选项，可以在 IB 中使用；但是，我想在弹出窗口中有 8 个选项。我知道我可以在代码中添加这些，但如果有一种方法可以直接在 IB 中添加它们，而无需将弹出按钮设为属性，那将更加方便。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-08T06:50:18.420

如果展开 NSPopupButton，则会出现一个“弹出按钮单元”。展开它，你会发现一个“菜单”。您可以将新的 NSMenuItems 拖到 Interface Builder 中的该菜单中。

![在此处输入图像描述](../Images/89d5ac2ee0cea21e62e86fc2ac8bb11c.png)

# powershell - SQLite3 无法在 Powershell 上运行

> ID：14765688
> 
> 赞同：2
> 
> 时间：2013-02-08T04:29:47.723
> 
> 标签：powershell, sqlite

在代码方面我是一个相对新手，所以如果我遗漏了明显的内容，请原谅；我的问题是让 SQLite3（确切地说是版本 3.7.15.2）在 Powershell 中工作。我在我的计算机上安装了 SQLite3，并且 SQLite3 shell 本身可以正常工作，但是当我尝试通过 Powershell 使用 SQLite3 时，我收到错误消息。

如果我只是`sqlite3`在 Powershell 中输入，则表明它不是可识别的命令；但是，当我尝试通过 Powershell 中的以下命令运行基本 SQL 脚本时，却收到了以下错误消息：

`sqlite3 ex1.db < ex1.sql`

`error message: "The '<' operator is reserved for future use`

说了这么多，可能是什么问题？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T04:58:10.030

"<" (stdin) redirection is not supported in Powershell.

Perhaps you can try to put your cammands in a file `sqlcmd.txt` and try :

```
Get-Content sqlcmd.txt | sqlite3.exe > output.txt 
```

Be careful to use the full path for your exe if it's not into the PATH.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-03T18:17:34.767

以下命令适用于 OSX 和 Linux：

```
sqlite3 ex1.db < ex1.sql 
```

但不知何故，它不适用于 Windows 10 PowerShell :(

[Zed Shaw](https://twitter.com/zedshaw)在他的[“Learn SQL The Hard Way”一书中](https://learncodethehardway.org/sql/)为 PowerShell 提供了这个解决方案：

```
sqlite3 ex1.db -init ex1.sql 
```

替换`"<"`为`"-init"`

“-init”必须在 .sql 脚本之前，因此该命令也可以写成：

```
sqlite3 -init ex1.sql ex1.db 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T07:07:01.410

在 Powershell 中，如果要运行位于当前目录中的 exe，则必须为其添加前缀`.\`，如下所示：

```
.\sqlite3 ex1.db 
```

您也可以使用完整路径：

```
"drive-letter:\path_to_sqlite\sqlite3" ex1.db 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-09-09T04:21:54.087

经过明智的谷歌搜索，我确定这实际上是正确的答案：

`get-content ext1.sql | sqlite3 ext1.db`

最初在这里找到：[https ://stackoverflow.com/a/17077104/1469375](https://stackoverflow.com/a/17077104/1469375)

JP 的答案将创建一个名为“output.txt”的空文件，但不会将 sqlcmd.txt 的内容放入文件中。

# php - 警告：无法修改标头信息 - 标头已由... PHP 发送

> ID：14765689
> 
> 赞同：0
> 
> 时间：2013-02-08T04:29:53.123
> 
> 标签：php, cookies, header

我知道上述错误意味着某些东西正在通过 HTTP 协议发送它的输出（如果我理解正确的话）。它给我错误的行是 setcookie 之一和标题之一（最后一个）。任何人都可以帮我解决这个问题吗？谢谢你。

```
<?php
$a = 'thisissomestring=='; 
$b = 'thisissomestring==';
$encryptedData = base64_decode($a);
$iv = base64_decode($b);
$appKey ='thisissomestring';
$td = mcrypt_module_open(MCRYPT_SERPENT, '', MCRYPT_MODE_CBC, '');
$ks = mcrypt_enc_get_key_size($td);
$key = substr($appKey, 0, $ks);
mcrypt_generic_init($td, $key, $iv);
$decrypted = mdecrypt_generic($td, $encryptedData);
$str = $decrypted;
mcrypt_generic_deinit($td);
mcrypt_module_close($td);
$file = file($decrypted);
$output = $file[0];
if( !isset( $_COOKIE['thisismycookie'] ) )
{
    setcookie('thisismycookie', $output, time() + 600, "/", $_SERVER['HTTP_HOST']);
}
else
{
    echo 'Action not allowed [3]';
    die();
}
unset($file[0]);
file_put_contents($str, $file);
header("Location: http://www.mysite.com/something"); 
```

?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:34:21.520

设置 cookie 需要向浏览器发送数据。一旦你这样做了，你就不能使用 PHP 重定向，否则你会得到你所看到的错误。尝试改用会话。

# php - Cakephp - 在视图页面的不同位置显示 Flash 消息

> ID：14765692
> 
> 赞同：7
> 
> 时间：2013-02-08T04:30:25.660
> 
> 标签：php, cakephp, cakephp-2.0

我有一个视图文件，它在不同的位置有两种形式，说，

一种形式在左上角，另一种在右下角。

成功提交表单后，将使用以下方式闪烁成功消息

```
$this->Session->setFlash(); 
```

问题是如果 Form1 被触发，我想在 Form1 下显示消息闪烁，即在左下角。

或者如果 Form2 被触发，我想在 Form2 下显示消息闪烁，即在右上角。

但是现在这两条消息都显示在顶部，因为我已经输入了布局

```
<?php echo $this->Session->flash(); ?> 
```

我想改变这一点，但不知道如何实现这一点.... :'(

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T04:42:06.053

当您调用[setFlash](http://api.cakephp.org/class/session-component#method-SessionComponentsetFlash)时，您可以提供一个键值。例如，

```
$this->Session->setFlash('This message is for form 1.', 'default', array(), 'form1'); 
```

然后您可以打印每个表格上方的闪光灯。只有当指定的键有值时才会显示。

```
<?php echo $this->Session->flash('form1') ?> 
```

[您可以在此处](http://book.cakephp.org/2.0/en/core-libraries/components/sessions.html#creating-notification-messages)找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:40:40.647

`echo $this->Session->flash();`从 default.ctp中删除

然后将其添加到不同部门的不同表格中

例如在 Form1

```
<div class="leftflash">
<?php echo $this->Session->flash();?>
</div> 
```

在 Form2 中

```
<div class="rightflash">
<?php echo $this->Session->flash();?>
</div> 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-31T07:35:45.253

你也可以这样做

```
<?php echo $this->Flash->render(); ?> 
```

在此之前，您需要像这样在控制器中上传闪存

```
$this->loadComponent('Flash'); 
```

# jsf - Java EE Web 应用架构可能的解决方案

> ID：14765696
> 
> 赞同：0
> 
> 时间：2013-02-08T04:31:12.607
> 
> 标签：jsf, jakarta-ee, architecture

我正在开始一个新项目。这将是一个 Java EE Web 应用程序。该应用程序将由 3 个部分组成，每个部分具有不同的功能，但它们都属于一个应用程序。我正在考虑使用以下架构：

将有 4 个独立的项目（JSF Web 应用程序）。第一个将负责与数据库的通信并公开远程 EJB。我们将第一个项目称为“DataLayerProject”。我上面提到的其他 3 个应用程序将使用“DataLayerProject”中的 EJB 以便与数据库进行通信。它们将代表应用程序的表示层。

在我看来，这种方法将允许彼此独立地维护和开发这 3 个部分。这将使项目更具可扩展性（以防需要向主应用程序添加另一个子项目）。

这是一个可行的解决方案吗？

我应该使用 REST 服务而不是远程 EJB。（对不起，如果我在这里误解了一些东西）？

将有一个主页，我将从该主页访问其他 3 个部分。问题是我需要对每个应用程序进行单点登录。因此，通过在主页上登录，用户会自动登录其他 3 个应用程序。

我应该使用任何门户解决方案来使单独的 Web 应用程序一起工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:46:07.730

如果您的所有应用程序都部署在单个服务器上，那么您可以为 EJB 使用本地接口而不是远程接口，这将是最快的实现。

# javascript - 带有 jQ uery 评级的引导弹出窗口（未显示在弹出窗口中......）

> ID：14765697
> 
> 赞同：0
> 
> 时间：2013-02-08T04:31:19.797
> 
> 标签：javascript, jquery, twitter-bootstrap, yii, popover

我正在使用带有这个 Jquery 评级的引导弹出窗口。 [http://www.fyneworks.com/jquery/star-rating/](http://www.fyneworks.com/jquery/star-rating/) 现在评分没有显示在弹出窗口中（显示为单选按钮），我意识到这是因为我需要再次加载评分，所以我尝试了以下代码，仍然无法正常工作...

有任何想法吗？

```
 <script>
    $(function(){
    $('.review').popover({ 
    placement: 'in right',
    html: true,
    title: 'Reviews',
    content: $('.review-content').html()
    }).click(function(id,data){
    ("input").rating({"readOnly":true}); 

    });

    });

    </script> 
```

以下是 .review 和 review-content 的一些标记

```
<a class="review" style="color:black; position:relative;" href="#">Review</a>

<div class="review-content" style="display:none;" >

<span id="avg1">

<span class="star-rating-control"><div class="rating-cancel" style="display: none;"><a title="Cancel Rating"></a></div><div class="star-rating rater-0 star-rating-applied star-rating-readonly star-rating-on" id="avg1_0"><a title="1">1</a></div><div class="star-rating rater-0 star-rating-applied star-rating-readonly star-rating-on" id="avg1_1"><a title="2">2</a></div><div class="star-rating rater-0 star-rating-applied star-rating-readonly star-rating-on" id="avg1_2"><a title="3">3</a></div><div class="star-rating rater-0 star-rating-applied star-rating-readonly star-rating-on" id="avg1_3"><a title="4">4</a></div><div class="star-rating rater-0 star-rating-applied star-rating-readonly star-rating-on" id="avg1_4"><a title="5">5</a></div></span><input type="radio" name="avg1" value="1" id="avg1_0" class="star-rating-applied star-rating-readonly" style="display: none;">
<input type="radio" name="avg1" value="2" id="avg1_1" class="star-rating-applied star-rating-readonly" style="display: none;">
<input type="radio" name="avg1" value="3" id="avg1_2" class="star-rating-applied star-rating-readonly" style="display: none;">
<input type="radio" name="avg1" value="4" id="avg1_3" class="star-rating-applied star-rating-readonly" style="display: none;">
<input type="radio" name="avg1" checked="checked" value="5" id="avg1_4" class="star-rating-applied star-rating-readonly" style="display: none;">
</span>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:09:51.030

这行得通吗？

```
$(function(){
    $('.review').popover({ 
        placement: 'in right',
        html: true,
        title: 'Reviews',
        content: function(){
           return $('.review-content').html()
        }
    }).click(function(id,data){
        (".popover-content input").rating({"readOnly":true}); 
    });    
}); 
```

# svm - 在 Visual Studio 上使用 SVMlight 时出错

> ID：14765698
> 
> 赞同：1
> 
> 时间：2013-02-08T04:31:20.773
> 
> 标签：svm

我正在使用 svmlight 将它与 HOG 描述符一起使用。[我从这里](https://github.com/DaHoC/trainHOG)下载了 hog 程序。我正在使用最新版本的 SVMlight。

我收到以下错误`svmlight.h`：

```
'WORD' : ambiguous symbol                           
cannot convert from 'svmlight::WORD' to 'WORD'
left of '.wnum' must have class/struct/union        
left of '.weight' must have class/struct/union      
cannot open source file "svm_common.h"
cannot open source file "svm_learn.h"                       
"WORD" is ambiguous 
```

我真的不知道如何解决这个问题，因为这是一个图书馆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T16:42:45.907

我有类似的问题，

我所做的是，将 svmlight.h 中的 WORD 更改为 svmlight::word 并解决了问题。

但后来它给了我一些链接错误。

所以，然后我使用 svmlight 头文件和 c 文件创建一个 lib 文件并包含它。

（我用的是视觉工作室 2010）

# php - 从 PHP 脚本调用“php”命令导致奇怪的进程行为

> ID：14765708
> 
> 赞同：4
> 
> 时间：2013-02-08T04:31:56.667
> 
> 标签：php, process, command-line-interface

我刚刚将一个站点从一个主机移动到另一个主机。服务器环境非常相似（LAMP 堆栈），所有代码在传输时都可以正常工作，除了一行。我已经对其进行了一些突变以进行测试，但仍然得到非常奇怪的结果：

```
<?php
$out = `php ../test/test.php 123 abc`;
?> 
```

从 SSH 中的命令行运行`php ../test/test.php 123 abc`时，它可以正常工作，正如预期的那样。当我`php testrunner.php`在 SSH 中运行：（上面只有“$out”行的文件）时，它也可以按预期工作。

`testrunner.php`但是一旦我从浏览器加载，它就会挂起。用于`ps aux | grep php`监视进程，进程似乎产生并消亡（为简洁起见截断）：

```
myuser   12790  0.0  0.3 259016 45284  . . . 0:00 php ../test/test.php 123 abc 
```

如果我将“$out”行修改为：

```
<?php
$out = `php ../test/test.php 123 abc &`;
?> 
```

然后我使该脚本在后台运行。令人惊讶的是，几秒钟后，当我`ps aux | grep php`再次运行时，它显示了相同的内容，但使用了新的 PID。我继续运行 ps aux 并继续使用不同的 PID 看到它。这会持续相当长的一段时间（几秒钟，甚至一分钟）。

这对我来说很奇怪，因为 test.php 只有一行来回显一些用于测试目的的文本。

从终端工作正常。从网络调用时挂起并有其他奇怪的行为。我错过了什么吗？

（我通过将输出重定向到一个日志文件来证明，当从 Web 浏览器运行时，PHP 脚本似乎调用了 ITSELF 而不是其他脚本 test.php。当它的行为像这样时，它不会收到任何`$argv`参数...但是当我从命令行运行它时，一切都很好！奇怪？）

更新：天啊...我只是在观察服务器进程，而 test.php 的 PHP 进程开始失控。它们增加了数百甚至数千个进程：服务器被关闭了一分钟，SSH 等等。它现在恢复了，但我无法解释发生了什么。代码中没有循环，所涉及的两个文件都非常简单，为了测试目的而隔离......

我正在与我的主机合作，因为他们回复了我的支持票，以查看这是否与环境相关或什么......什么可能导致这种情况发生，只需更改服务器环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:06:47.317

我的主人 A Small Orange 提供了帮助，但最后，我或他们所能想到的只是（来自我的支持票）：

> ... SuPHP 或我们作为堆栈的一部分运行的其他一些基于安全的软件正在阻止您的进程产生新进程（因为这种行为由于显而易见的原因可能是不安全的）...

无论如何，这些脚本在我的 Macbook（与 nginx 的配置非常不同）和我的旧主机的 LAMP 堆栈上运行良好，ASO 具有类似的设置。

也许我会问关于在不调用命令行的情况下生成长时间运行的进程，以便调用脚本不会在另一个问题中被阻塞。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-08T04:50:32.517

删除空格并加上下划线

```
$out = `php ../test/test.php_123_abc`; 
```

# django - Django 无空间模板标签的优点

> ID：14765709
> 
> 赞同：6
> 
> 时间：2013-02-08T04:32:02.187
> 
> 标签：django, html, django-templates

我最近一直在想这个问题，Django 的[spaceless](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#spaceless)模板标签的目的到底是什么？

显然它从 HTML 标记中删除了空格，但除此之外，它是否提高了页面加载的速度？

我要问的是，从 html 文件中删除空格是否有任何帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T05:17:48.970

换行符/空格是一个字符，是的，它会增加文件大小，特别是对于大循环和人类可读性优化的模板文件（如大型 FK 列表）。

在基本模板中加入 {% spaceless %} 也非常容易和安全。

它还允许您保持模板代码缩进以提高可读性，但适当地为 HTML 呈现无空格（我认为逗号是一种常见情况）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T08:32:36.647

拥有一个跨越边界（ala Ifs 和 Fors）的 {%spaceless%} 版本是有意义的，遗憾的是 Django 不支持这个简单的功能。我有一个由我添加的动态类，并且空格中有几十行（所有空格都与模板匹配）。这对于 Django 的开发人员来说应该不会太难添加。为每个 if 添加 spaceless 将是非常愚蠢的。

如果他们真的很担心，你也可以有一个深度参数。

# facebook - 从 facebook 广告 url 中删除的参数

> ID：14765711
> 
> 赞同：1
> 
> 时间：2013-02-08T04:32:11.470
> 
> 标签：facebook, parameters, facebook-ads-api

我使用 facebook 广告来推广我的应用程序。为了能够跟踪新玩家来自哪个 url 的广告，我向 facebook 广告中使用的每个 url 添加了一个带有特定数字的参数。

示例： [https ://apps.facebook.com/myapp?ori=123456](https://apps.facebook.com/myapp?ori=123456)

有时，facebook 会从 url 中删除该参数，并且应用程序将新用户视为来自 [https://apps.facebook.com/myapp](https://apps.facebook.com/myapp)的新用户 在途中丢失了信息。

如何确保通过 facebook 广告获取 facebook 传递给应用程序的参数？

# javascript - 如何在 AngularJS 中观察路线变化？

> ID：14765719
> 
> 赞同：212
> 
> 时间：2013-02-08T04:33:14.223
> 
> 标签：javascript, angularjs

一个人如何观察/触发路线变化的事件？

* * *

## 回答 #1

> 赞同：333
> 
> 时间：2013-02-08T04:57:50.703

**注意**：这是 AngularJS 旧版本的正确答案。请参阅[此问题](https://stackoverflow.com/questions/16344223/angularjs-cancel-route-change-event)以获取更新版本。

```
$scope.$on('$routeChangeStart', function($event, next, current) { 
   // ... you could trigger something here ...
 }); 
```

以下事件也可用（它们的回调函数采用不同的参数）：

*   $routeChangeSuccess
*   $routeChangeError
*   $routeUpdate - 如果[reloadOnSearch](http://code.angularjs.org/1.0.8/docs/api/ng.$routeProvider#when)属性已设置为 false

请参阅[$route](http://code.angularjs.org/1.0.8/docs/api/ng.$route)文档。

还有另外两个[未记录](https://stackoverflow.com/questions/14700325/what-are-the-undocumented-features-of-angular)的事件：

*   $locationChangeStart
*   $locationChangeSuccess

请参阅[$locationChangeSuccess 和 $locationChangeStart 有什么区别？](https://stackoverflow.com/questions/15006849/angularjs-whats-the-difference-between-locationchangesuccess-and-locationch)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-05-08T13:59:34.780

如果您不想将手表放在特定的控制器中，您可以在 Angular 应用程序中为整个应用程序添加手表[`run()`](https://docs.angularjs.org/guide/module)

```
var myApp = angular.module('myApp', []);

myApp.run(function($rootScope) {
    $rootScope.$on("$locationChangeStart", function(event, next, current) { 
        // handle route changes     
    });
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-09-29T12:55:17.550

```
$rootScope.$on( "$routeChangeStart", function(event, next, current) {
  //..do something
  //event.stopPropagation();  //if you don't want event to bubble up 
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-03T06:25:17.970

```
$rootScope.$on( "$routeChangeStart", function(event, next, current) {
  //if you want to interrupt going to another location.
  event.preventDefault();  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-14T06:19:49.377

由于某种原因，建议的解决方案对我使用*$routeChangeStart*事件不起作用

如果您遇到同样的问题，请尝试：

```
$scope.$on('$stateChangeStart', function(evt, toState, toParams, fromState, fromParams) { 
   // ... you could trigger something here ...
 }); 
```

在我的配置中，我使用来自节点包管理器（又名 npm）的@ui-router/angularjs（又名 angular-ui-router）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-11-01T08:14:46.897

这是给初学者的……像我一样：

HTML：

```
 <ul>
    <li>
      <a href="#"> Home </a>
    </li>
    <li>
      <a href="#Info"> Info </a>
    </li>
  </ul>

  <div ng-app="myApp" ng-controller="MainCtrl">
    <div ng-view>

    </div>
  </div> 
```

角度：

```
//Create App
var app = angular.module("myApp", ["ngRoute"]);

//Configure routes
app.config(function ($routeProvider) {
    $routeProvider
      .otherwise({ template: "<p>Coming soon</p>" })
      .when("/", {
        template: "<p>Home information</p>"
      })
      .when("/Info", {
        template: "<p>Basic information</p>"
        //templateUrl: "/content/views/Info.html"
      });
});

//Controller
app.controller('MainCtrl', function ($scope, $rootScope, $location) {
  $scope.location = $location.path();
  $rootScope.$on('$routeChangeStart', function () {
    console.log("routeChangeStart");
   //Place code here:....
   });
}); 
```

希望这对像我这样的初学者有所帮助。这是完整的工作示例：

```
<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular-route.min.js"></script>
</head>
<body>
  <ul>
    <li>
      <a href="#"> Home </a>
    </li>
    <li>
      <a href="#Info"> Info </a>
    </li>
  </ul>

  <div ng-app="myApp" ng-controller="MainCtrl">
    <div ng-view>

    </div>
  </div>
  <script>
//Create App
var app = angular.module("myApp", ["ngRoute"]);

//Configure routes
app.config(function ($routeProvider) {
    $routeProvider
      .otherwise({ template: "<p>Coming soon</p>" })
      .when("/", {
        template: "<p>Home information</p>"
      })
      .when("/Info", {
        template: "<p>Basic information</p>"
        //templateUrl: "/content/views/Info.html"
      });
});

//Controller
app.controller('MainCtrl', function ($scope, $rootScope, $location) {
  $scope.location = $location.path();
  $rootScope.$on('$routeChangeStart', function () {
    console.log("routeChangeStart");
   //Place code here:....
   });
});
  </script>
</body>
</html>
```

# excel - Excel if 公式

> ID：14765722
> 
> 赞同：1
> 
> 时间：2013-02-08T04:33:40.863
> 
> 标签：excel, if-statement

下面是我想要的结果，基本上我希望 B1 到 B4 可以自动检测从 A1 到 A4 的字符串，并在匹配字符串时返回相同的字符串加上严重级别。

例如，如果 A1= 严重，则 B1 应显示严重性 1，如果 A1 更改为高，则 B1 应显示严重性高 2

当前我正在使用

```
=IF(A1="Critical","Critical Severity 1",""),IF(A1="High","High Severity 2",""),IF(A1="Medium","Medium Severity 3",""),IF(A1="Low","Low Severity 4","") 
```

![在此处输入图像描述](../Images/df489d6e899ffb2074e1a0f47a29b7df.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:46:15.987

你需要的是`VLOOKUP()`在 cell 上`B1`。请参见下面的示例：

![截图1](../Images/01385934caf16e57347dbb84f9fa2573.png)

![截图3](../Images/160f11aff8d1ef8b5575856d90b25ecb.png)

**奖金**

*如何创建带有选项的单元内下拉菜单*

选择单元格`A1`并选择数据验证

![截图4](../Images/081e09b222870556168aa65345191e39.png)

然后选择`List`Allow: 下的值范围 $B$4:$B$7 在 source:

![截图5](../Images/690c1122f9070d10adf2047d92f7809f.png)

要创建下拉单元格：

![截图2](../Images/0700d0c932bbdbcd8bff9fa5effc2342.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:49:02.117

如果你想使用`IF`条件（你正在尝试），你可以这样做：

```
=IF(A1="Critical","Critical Severity 1",IF(A1="High","High Severity 2",IF(A1="Medium","Medium Severity 3",IF(A1="Low","Low Severity 4","")))) 
```

# python - 在win 7（64位）上安装scrapy

> ID：14765723
> 
> 赞同：7
> 
> 时间：2013-02-08T04:33:43.273
> 
> 标签：python, windows-7, installation, scrapy

我正在尝试为python2.6安装scrapy，但似乎进展不顺利。这是安装的软件包：

```
G:\Python26\Scripts>pip freeze
Scrapy==0.16.4
Twisted==12.3.0
libxml2-python==2.7.7
lxml==2.3.6
pyopenssl==0.13
w3lib==1.2
zope.interface==3.8.0 
```

我也有 iconv 和 zlib。这是使用 pip 安装 scrapy 时的日志。我不知道我接下来应该做什么，我错过了什么吗？需要指导，谢谢。

win 7 64位，安装Visual C++

```
C:\Users\d>pip install scrapy
Downloading/unpacking scrapy
  Downloading Scrapy-0.16.4.tar.gz (679kB): 679kB downloaded
  Running setup.py egg_info for package scrapy
    warning: no files found matching 'license.txt' under directory 'scrapy'
    no previously-included directories found matching 'docs\build'
Requirement already satisfied (use --upgrade to upgrade): Twisted>=8.0 in g:\pyt
hon26\lib\site-packages (from scrapy)
Requirement already satisfied (use --upgrade to upgrade): w3lib>=1.2 in g:\pytho
n26\lib\site-packages (from scrapy)
Requirement already satisfied (use --upgrade to upgrade): lxml in g:\python26\li
b\site-packages\lxml-2.3.6-py2.6-win32.egg (from scrapy)
Requirement already satisfied (use --upgrade to upgrade): pyOpenSSL in g:\python
26\lib\site-packages\pyopenssl-0.13-py2.6-win32.egg (from scrapy)
Requirement already satisfied (use --upgrade to upgrade): zope.interface>=3.6.0
in g:\python26\lib\site-packages\zope.interface-3.8.0-py2.6-win32.egg (from Twis
ted>=8.0->scrapy)
Requirement already satisfied (use --upgrade to upgrade): setuptools in g:\pytho
n26\lib\site-packages (from zope.interface>=3.6.0->Twisted>=8.0->scrapy)
Installing collected packages: scrapy
  Running setup.py install for scrapy
    warning: no files found matching 'license.txt' under directory 'scrapy'
    no previously-included directories found matching 'docs\build'
Successfully installed scrapy
Cleaning up...

C:\Users\d>scrapy
Traceback (most recent call last):
  File "G:\Python26\lib\runpy.py", line 122, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "G:\Python26\lib\runpy.py", line 34, in _run_code
    exec code in run_globals
  File "G:\Python26\lib\site-packages\scrapy\cmdline.py", line 7, in <module>
    from scrapy.crawler import CrawlerProcess
  File "G:\Python26\lib\site-packages\scrapy\crawler.py", line 5, in <module>
    from scrapy.core.engine import ExecutionEngine
  File "G:\Python26\lib\site-packages\scrapy\core\engine.py", line 14, in <modul
e>
    from scrapy.core.downloader import Downloader
  File "G:\Python26\lib\site-packages\scrapy\core\downloader\__init__.py", line
16, in <module>
    from .middleware import DownloaderMiddlewareManager
  File "G:\Python26\lib\site-packages\scrapy\core\downloader\middleware.py", lin
e 7, in <module>
    from scrapy.http import Request, Response
  File "G:\Python26\lib\site-packages\scrapy\http\__init__.py", line 11, in <mod
ule>
    from scrapy.http.request.form import FormRequest
  File "G:\Python26\lib\site-packages\scrapy\http\request\form.py", line 9, in <
module>
    import lxml.html
  File "G:\Python26\lib\site-packages\lxml-2.3.6-py2.6-win32.egg\lxml\html\__ini
t__.py", line 12, in <module>
    from lxml import etree
ImportError: DLL load failed: %1 is not a valid Win32 application 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-20T15:11:26.570

您需要按照[此处](http://steamforge.net/wiki/index.php/How_to_Install_Scrapy_in_64-bit_Windows_7)的说明进行操作（也在上面列出）。

问题中列出的特定 DLL 错误是由于（至少在我的情况下）安装 32 位 OpenSSL 和 64 位其他所有内容。在我安装了正确的 OpenSSL 之后（顺便说一下，我不得不卸载上面链接中的所有包并开始为依赖项 msi 安装程序过度排序问题），scrapy 在 python27、windows7、64 位上运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T08:07:47.263

阅读本[指南以在 Windows 7 上安装 scrapy](http://steamforge.net/wiki/index.php/How_to_Install_Scrapy_in_64-bit_Windows_7)。egenix-pyopenssl 被列为必需的软件包，另外安装 pywin32 也可能有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-27T09:14:57.837

就我而言，我确实升级了导致此问题的python。
一个简单的scrapy升级就可以了

> pip install --upgrade Scrapy

还要安装正确版本的 pywin： [http ://doc.scrapy.org/en/latest/intro/install.html#windows](http://doc.scrapy.org/en/latest/intro/install.html#windows)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-22T21:31:54.500

我在 Windows 10（64 位）上遇到了同样的问题。该错误可以通过以下方式在 Python 中重现：

```
>>> import OpenSSL
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "c:\Python27\lib\site-packages\OpenSSL\__init__.py", line 8, in <module>
    from OpenSSL import crypto, SSL
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

安装 pyOpenSSL 后，我得到了错误`ImportError: DLL load failed: The operating system cannot run %1.`，这是通过复制`libeay32.dll`和`ssleay32.dll`到我的路径来解决的（[这](https://stackoverflow.com/a/47443884/2314737)是我的另一个答案）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-05T14:03:51.147

我的解决方案是`pip install --upgrade PyopenSSL`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-16T03:45:31.003

我刚刚设法解决了这个问题，对于可能偶然发现这个问题的人来说，问题是你需要 PyWin32。对于 Windows 用户：

1.  pip install PyWin32 [here](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pywin32)，选择正确的python版本和32/64bit。现在在cmd中：

    > pip install c:\users\desktop\pywin32-220.1-cp27-cp27m-win_amd64.whl

2.  现在，安装 pywin32 系统文件，从提升的命令提示符运行“python.exe Scripts\pywin32_postinstall.py -install”。**以管理员**身份在命令提示符下 运行 cmd

    > python "C:\Python27\Scripts\pywin32_postinstall.py" -install

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-10-22T14:17:45.640

安装`scrapy`并不难。我刚刚在我的 64 位 Windows 7 机器上完成了它：

[从http://python.org/download/](http://python.org/download/)安装 Python 2.7 ：您需要调整 PATH 环境变量以包含 Python 可执行文件和其他脚本的路径。需要将以下路径添加到 PATH：

```
C:\Python2.7\;C:\Python2.7\Scripts\; 
```

要更新 PATH，请打开命令提示符并运行：

```
c:\python27\python.exe c:\python27\tools\scripts\win_add2path.py 
```

关闭命令提示符窗口并重新打开它以使更改生效，运行以下命令并检查它是否显示预期的 Python 版本：

```
python --version 
```

从[https://pip.pypa.io/en/latest/installing.html](https://pip.pypa.io/en/latest/installing.html)安装 pip 现在打开命令提示符以检查 pip 是否安装正确：

```
pip --version 
```

此时 Python 2.7 和 pip 包管理器必须工作，让我们安装 Scrapy：

```
pip install Scrapy 
```

检查scrapy是否有效：

```
scrapy fetch http://www.google.com 
```

这一切都源于：`http://doc.scrapy.org/en/latest/intro/install.html`

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-11-08T09:50:53.510

我刚刚遇到了同样的问题，但我已经解决了。

请检查您安装的 Python 包的版本（32/64 位）是否与您的 Python 安装版本匹配。

由于我现在在一个 Scrapy 项目中工作并且我在我的计算机上安装了一个 64 位的 lxml 包，但是我刚刚发现我的计算机中 Python 的默认安装版本是 32 位。因此，版本不匹配，就会出现您发布的问题。

# c - C - 如何在没有包含语句的情况下包含 c 源文件

> ID：14765724
> 
> 赞同：3
> 
> 时间：2013-02-08T04:33:59.070
> 
> 标签：c, include

我已经冒险并正在学习 C。这是一个非常好的但易于管理的学习曲线，来自脚本（php，perl）背景，只有一点点 C#。

我已经使用了网站“Learn C The Hard Way”并且到目前为止掌握得相当好（我认为）但我无法理解其中一个练习的这一部分：

[http://c.learncodethehardway.org/book/ex19.html](http://c.learncodethehardway.org/book/ex19.html)

他创建了四个源文件——object.h、object.c、ex19.h、ex19.c

但我不明白 object.c 文件是如何包含的。

main 函数位于 ex19.c 中，它有一行

```
#include "ex19.h" 
```

文件 ex19.h 有一行

```
#include "object.h" 
```

但是 object.h 没有提及包含 object.c。有趣的是 object.c 包含该行

```
#include "object.h" 
```

是否存在某种隐含的包含，如果包含头文件，它将自动包含同名的 c 源代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T04:36:57.137

*这是一个称为链接器*的单独程序的工作。在 C 中，源文件需要访问其他 C 源文件的头文件，以便它们可以查看有关第一个文件可能想要使用的第二个 C 文件定义的函数、类型和变量的信息。然后每个 C 文件独立于其余文件进行编译。编译器的输出是一个*目标文件*。

为了构建最终的程序，第二个称为*链接器*的程序进入并将所有目标文件组合在一起成为整个可执行文件。该程序的任务是获取所有不同 C 文件的实现并将它们相互交叉引用，以便每次一个 C 文件引用不同 C 文件中的函数或变量时，实际上可以对适当的对象进行引用.

这就是您不需要包含`.c`文件的原因。一旦一个源文件有一个头文件，它就对另一个文件有足够的了解，以便使用它为编译器提供的函数来验证它是否正确使用它们。然后链接器处理实际进行交叉引用的工作。您可以将编译器视为一个程序，它检查*是否*定义了函数，然后程序可以工作。然后，链接器实际上会检查以确保首先定义了这些函数，并在可执行文件中设置了适当的链接。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:38:10.837

不包括 Object.c。

它被编译为它自己的单元，它包括 object.h

查看制作文件：

```
CFLAGS=-Wall -g

all: ex19

ex19: object.o

clean:
  rm -f ex19 
```

`ex19: object.o`告诉您必须在构建 ex19 之前创建 object.o，并且默认情况下，这是从 make 文件中提取的，因为 object.c 存在。

所以这个make文件说

要构建所有你需要的 ex19，要获得 ex19，你需要 object.o，而要创建 object.o，makefile 会选择从 object.c 构建的 object.o

从您参考的页面：

> make 看不到 object.o 文件中的任何内容，但它确实看到了 object.c 文件，并且它知道如何将 .c 转换为 .o，因此它会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:58:01.127

整个逻辑在于生成文件和智能编译器。创建的最终二进制文件有一个名为 object.o 的目标文件，理想情况下，该文件将包含 object.h 文件中定义的所有函数定义。它是将 .h 文件中声明的函数与 .o 文件中可用的定义链接的链接器。

# ruby - 如何自动增加 gem 版本并将 gem 推送到服务器？

> ID：14765725
> 
> 赞同：3
> 
> 时间：2013-02-08T04:34:00.740
> 
> 标签：ruby, deployment, gem, continuous-integration

有没有办法自动化增加 gem 的版本号（比如在 Rake 任务中）并将其推送到本地 gem 服务器以便其他人都可以使用它的过程？

我看过[gem-release](https://github.com/svenfuchs/gem-release)和[gem_version](https://github.com/jeffp/gem_version)，但它们依赖于使用 git 作为你的 VCS。我不使用 git，所以这些宝石对我不起作用。

关于这个过程，普遍接受的最新技术是什么？

# simulation - 在 NS2 中可以做什么，不能做什么？

> ID：14765726
> 
> 赞同：1
> 
> 时间：2013-02-08T04:34:06.557
> 
> 标签：simulation, ns2

在问这个问题之前，我想告诉你我已经搜索了一个多月。我会说我知道 ns2，但我肯定能够理解您所说的任何内容 [希望]

我想在 NS2 的无线移动节点拓扑中实现广度优先搜索 (BFS) 并创建 BFS 树。[让我们先为静态系统做。]

我的挑战：向节点的所有邻居多播消息。

现在我在我的想象中认为

1.  节点将设置在那里的位置。[可行]
2.  每个节点都能够找到它的邻居。[可行吗？] 或者我必须自己创建“组”并进行“加入组”以形成这些邻居。
3.  向邻居多播消息。[可以使用“组”]，但我希望节点知道我可以连接什么并自行完成。

其中有哪些可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T23:07:47.400

好的，所以在完成我的项目后，我想分享一下我是如何做到的。我还在学习，但是是的，我是这样做的。

场景是无线的。

在 NS 中生成节点很简单：

> 设置节点（0）[$ns 节点]
> 
> 设置节点（1）[$ns 节点]

其中节点是一个数组。

设置节点位置：

> $nodes(0) 设置 X_ 20.0
> 
> $nodes(0) 设置 Y_ 100.0

您可以使用某种数学方程来生成节点的拓扑。即他们的定位。查看 ns2-directory/tcl/ex/wireless-flooding.tcl。

为每个节点生成一个代理并将其附加到该节点。

> 设置代理（0）[新代理/MyAgent]
> 
> $nodes(0) 附加代理 $agents(0) $MESSAGE_PORT

由于我们对协议的所有逻辑工作都是在 Agents 中完成的，因此我们创建了一个 MyAgent 的 cpp 类。还将它添加到 Makefile 中。

> 类MyAgent：公共代理{
> 
> // 重写 recv() 函数。
> 
> // 为这个类添加命令函数，每当要求这个类的对象在 tcl 文件中做一些工作时调用它。
> 
> // 用于存储我从 PING 和 PING_REPLY 获得的邻居地址 std::vector myNeighbors;
> 
> }

然后每个代理广播 PING 消息并用 PING_REPLY 消息回复发送者。

这可以通过使用参数 addr_ = -1 发​​送地址 ns_addr_t 来完成

```
 ns_addr_t naddr;
 naddr.addr_ = -1 
```

这些消息是不同类型的数据包，并在 cpp 类中再次创建，例如

> 枚举类型 {PING, PING_REPLY}；
> 
> 类 HdrPing {
> 
> 类型类型；
> 
> // getter 和 setter 函数以及偏移量等其他变量。
> 
> }

为了编写接收任何消息的逻辑，这与我们的分布式协议的制作方式完全相同，我们重写了 Agent 的 recv()

> void MyAgent :: recv(Packet*p, Handle*h) {
> 
> 开关（HdrPing::访问（p）->类型）{

```
 case PING:
    // send PING_REPLY back to sender and add the source of the packet p 
    // to my neighbor list. 

    // we can get it from ipHdr->saddr(), which is source address in the 
    // IP header of the packet.

    break;

    case PING_REPLY:
    // add the sender of messge to my neighbor list.
    break;

    // other types of messages are also programmed here. 
```

> } //关闭开关
> 
> }

通过这种方式，我知道谁是我的邻居。

可以添加更多类型的消息和更多功能。

# ubuntu - beaglebone 上可怕的以太网速度

> ID：14765728
> 
> 赞同：0
> 
> 时间：2013-02-08T04:34:17.353
> 
> 标签：ubuntu, ethernet, beagleboard, ubuntu-12.10

我正在使用[eLinux 的嵌入式 Ubuntu 12.10](http://elinux.org/BeagleBoardUbuntu)运行 BeagleBone 。它通过以太网连接，运行速度非常慢——通常在 3KBps 范围内。我的电脑也通过以太网连接到同一个网络，可以达到 90MBps 的范围（当然是从同一个服务器下载）。

我检查了 ifconfig，这是输出：

```
eth0      Link encap:Ethernet  HWaddr 50:56:63:c6:87:15  
          inet addr:10.0.1.10  Bcast:10.0.1.255  Mask:255.255.255.0
          inet6 addr: fe80::5256:63ff:fec6:8715/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2113 errors:0 dropped:0 overruns:0 frame:0
          TX packets:856 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:297502 (297.5 KB)  TX bytes:118738 (118.7 KB) 
```

我从哪里开始调试呢？我不知道是什么导致速度慢！

# ios - NSIndexpath.item 与 NSIndexpath.row

> ID：14765730
> 
> 赞同：85
> 
> 时间：2013-02-08T04:34:43.160
> 
> 标签：ios, uitableview, nsindexpath

有谁知道和的`NSIndexpath.row`区别`NSIndexpath.item`？

具体来说，我在哪一个中使用：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2013-06-19T03:03:57.147

好吧，这里没有人给出好的答案。

在 NSIndexPath 中，索引存储在一个名为“_indexes”的简单 c 数组中，定义为 NSUInteger*，数组的长度存储在定义为 NSUInteger 的“_length”中。访问器“section”是“_indexes[0]”的别名，“item”和“row”都是“_indexes[1]”的别名。因此两者在功能上是相同的。

就编程风格（也许还有定义链）而言，您最好在表的上下文中使用“行”，在集合的上下文中使用“项目”。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-08T04:40:06.170

```
indexPath.row is best in your case 
```

**关于 NSIndexPath 的第一条信息**

该类`NSIndexPath`表示嵌套数组集合树中特定节点的路径。此路径称为索引路径。

indexPath 中的每个索引都表示从树中的一个节点到另一个更深节点的子数组的索引。

**例如**indexPath **1.4.3.2**指定如图所示的路径 ![在此处输入图像描述](../Images/8e8fcbdd72c344faa2463782bb75722e.png)

在您的情况下，此处`indexPath.row`返回特定 `indexPath`.

**之间的差异** `indexPath.row and indexPath.item`

一般`indexPath`有**两个属性**

> 1 -**行**
> 
> 2 -**项目**

**row -**属性`UITableView`用于获取基于 indexPath的特定**行。**它也是只读属性

> ```
>  Available in iOS 2.0 and later. 
> ```

**item -**正确使用`UICollectionView`for get **item** in section。它是一个只读属性。要使用此属性，您需要在
**UICollectionView.h中声明它**

```
>     Available in iOS 6.0 and later. 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-08T04:38:51.790

你需要使用`indexPath.row`

区别在于：

**indexPath.row 用于 tableView ， indexPath.item 用于 collectionView**。

> **物品**
> 
> 标识集合视图部分中的项目的索引号。（只读）`@property (nonatomic, readonly) NSInteger item;`
> 
> *讨论*
> 
> 项目所在的部分由 section 的值标识。可用性
> 
> ```
> Available in iOS 6.0 and later. 
> ```
> 
> 在 UICollectionView.h 中声明

* * *

> **排**
> 
> 标识表视图部分中的行的索引号。（只读）`@property(nonatomic, readonly) NSInteger row;`
> 
> *讨论*
> 
> 行所在的部分由 section 的值标识。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```

详情请查看[**NSIndexPath Additions**](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSIndexPath_UIKitAdditions/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-22T10:26:34.977

@Owen Godfrey 的回答比@iPatel 接受的回答要好。这里有一些进一步的说明，我无法对他的回答发表评论，所以我将复制他的回答并在此处添加。信用属于欧文。

* * *

来自@Owen Godfrey：

在 NSIndexPath 中，索引存储在一个名为“_indexes”的简单 c 数组中，定义为 NSUInteger*，数组的长度存储在定义为 NSUInteger 的“_length”中。访问器“section”是“_indexes[0]”的别名，“item”和“row”都是“_indexes [1](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/) ”的别名。因此两者在功能上是相同的。

就编程风格（也许还有定义链）而言，您最好在表的上下文中使用“行”，在集合的上下文中使用“项目”。

* * *

NSIndexPath 的核心接口在 NSIndexPath.h 中定义。索引的存储在 _indexes 中，它是 NSUInteger 的私有一维数组。NSIndexPath 本身可以表示任意数量的维度。NSIndexPath 上有两个相关的类别来扩展功能，一个来自 UICollectionView.h “NSIndexPath (UICollectionViewAdditions)”，另一个来自 UITableView.h “NSIndexPath (UITableView)”。UICollectionView.h 中的一个添加了只读属性“item”和相关的便利方法。UITableView.h 中的一个添加了只读属性“row”和相关的便利方法。然而，这两个属性都只是访问 _indexes[1] 中基础值的包装器。

由于 UIKit 与这两个类别都链接，因此无论您在 IOS 的哪个位置使用它们，这两组便利功能始终可用。因此，您可以从 [NSIndexPath indexPathForRow:inSection:] 创建一个 NSIndexPath，但从 indexPath.item 检索第二个索引。无论是通过 indexPath.item 还是 indexPath.row 访问，基础值都完全相同。

从风格上讲，如果您将“item”与 UICollectionView 一起使用，而将“row”与 UITableView 一起使用，则会更简洁，因为这就是它们的用途，这使得代码更具可读性。但是，如果您交换它们，您的程序不会崩溃。

参考：[NSIndexPath](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-18T17:20:02.260

查看 UICollectionView.h 的底部，您将看到扩展 NSIndexPath 以`item`在用于 UICollectionView 实例时添加为属性的类别。

在 UITableView.h 的底部有一个类似的部分，它为 UITableViews 中使用的 NSIndexPaths 添加`row`和`section`属性。

如果您尝试访问类中的 NSIndexPath 实例的这些属性并且 NSIndexPathInstance 不相信它们存在，只需将定义它们的类的标题导入到类的顶部，您将神奇地能够访问这些属性。

UICollectionView.h

```
@interface NSIndexPath (UICollectionViewAdditions)

+ (instancetype)indexPathForItem:(NSInteger)item inSection:(NSInteger)section NS_AVAILABLE_IOS(6_0);

@property (nonatomic, readonly) NSInteger item NS_AVAILABLE_IOS(6_0);

@end 
```

UITableView.h

```
//_______________________________________________________________________________________________________________

// This category provides convenience methods to make it easier to use an NSIndexPath to represent a section and row
@interface NSIndexPath (UITableView)

+ (instancetype)indexPathForRow:(NSInteger)row inSection:(NSInteger)section;

@property (nonatomic, readonly) NSInteger section;
@property (nonatomic, readonly) NSInteger row;

@end 
```

要在您的类中使用这些属性，您必须将所需的属性导入到您的类中，如下所示：

`@import "UIKit/UITableView.h"`

然后您可以执行以下操作：`myIndexPath.row`和`[myIndexPath row]`

# java - Java 侦听器会在同步期间等待还是丢弃？

> ID：14765731
> 
> 赞同：1
> 
> 时间：2013-02-08T04:34:45.220
> 
> 标签：java, events, synchronized

在事件监听器中，我有：

```
public void keyPressed(KeyEvent e) { //the same logic for mouse events, etc.
   synchronized(lockFoo) {...}
} 
```

在代码中的其他地方，在不同的线程上：

```
public void bar() {
   synchronized(lockFoo) {...}
} 
```

如果在 lockFoo 被锁定时触发*了两个*或更多事件，它们是 FIFO 提示并等待轮到它们还是会被丢弃？FIFO 提示是更理想的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:05:25.563

如果您想使用 FIFO - 然后使用[ReentrantLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)并将公平构造函数参数设置为“true”。使用通用同步根本不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:36:59.420

他们将等待轮到他们，最终将以不可预测的顺序执行（没有严格的 FIFO）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:46:08.153

线程肯定会排队，但顺序取决于`Thread Priority`，否则是随机的。不保证 FIFO。

# php - 从两个 MySQL 表创建一个过滤数组

> ID：14765732
> 
> 赞同：0
> 
> 时间：2013-02-08T04:35:00.907
> 
> 标签：php, mysql

这是情况。

我在数据库中有两个表：（`tblcustomfieldsvalues`用于自定义字段条目）和`tblclients`（包含客户列表）。

`tblcustomfieldsvalues`具有以下数据结构：

`id`=> `10` `relid`=> `13` `data`=>`somedataentry`

`id`=> `10` `relid`=> `21` `data`=>`someotherdataentry`

`tblclients`具有以下数据结构：

`id`=> `13` `firstname`=> `somename` `lastname`=>`somelastname`

我有这段代码来创建一个数组，`relids`其中有`id`= 10：

```
$sql = mysqli_fetch_array(mysqli_query("SELECT * FROM `tblcustomfieldsvalues` WHERE `id` = '10'"));

$cids = array();

while ($row = $sql)
{
    array_push($cids, $row['relid']);
} 
```

既然我已经有了那些用`$cids`数组中的一些数据填充了他们的自定义字段的用户 ID，我如何从这些用户那里获取详细信息`tblclients`？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:39:17.413

```
$sql = mysqli_fetch_array(mysqli_query("SELECT * FROM `tblcustomfieldsvalues` WHERE `id` = '10'"));

$cids = array();

while ($row = $sql)
{
    //array_push($cids, $row['relid']);
    $sql1 = mysqli_fetch_array(mysqli_query("SELECT * FROM `tblclients ` WHERE `id` = '$row['relid']'"));
    while ($row1 = $sql1)
    {
          //echo your output
    }
} 
```

**或者**

```
 SELECT * FROM
 tblcustomfieldsvalues cv,tblclients c WHERE
 cv.id = 10 and cv.id = c.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:42:23.623

听起来你只需要使用一个`INNER JOIN`：

```
SELECT t2.*
FROM tblcustomfieldsvalues t
  INNER JOIN tblclients t2 ON t.relid = t2.id 
WHERE t.ID = 10 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T04:38:18.843

`tblclients`在不知道我不能确定的表结构的情况下，但听起来你可以只使用连接，而不是进行单独的查询和循环：

```
SELECT
    *
FROM
    tblcustomfieldsvalues
    NATURAL JOIN tblclients
WHERE
    id = 10 
```

# c# - 输入控制，如 4 x 25 LCD 显示器

> ID：14765733
> 
> 赞同：0
> 
> 时间：2013-02-08T04:35:07.123
> 
> 标签：c#, input, lcd

在 .net 应用程序中

我需要一个 4 行 @ 25 个字符的控件 - 看起来像 LCD 显示器。实际上，输入稍后会显示在汽车的液晶显示屏上..

我想只使用一个datagridview，每列只能保存一个字符，输入字符后将焦点转移到下一个单元格等。

任何（更好的）想法？

谢谢奥斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:49:24.063

您可以为屏幕使用多维数组：

```
char[,] display = new char[4, 25]; 
```

# unix - unix 复制隐藏和非隐藏的一个复制命令

> ID：14765747
> 
> 赞同：0
> 
> 时间：2013-02-08T04:36:55.517
> 
> 标签：unix

我了解如何复制隐藏文件夹：

```
cp ./[^.]stringmatch /destination 
```

我了解如何复制非隐藏文件夹

```
cp *stringmatch /desination 
```

但是如何复制具有特定字符串匹配的隐藏和非隐藏文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:39:33.753

试试`cp {.,}*stringmatch* /destination`...希望有帮助！

# android - 优化 Android 的内存使用

> ID：14765751
> 
> 赞同：0
> 
> 时间：2013-02-08T04:37:21.207
> 
> 标签：android, performance, android-layout, android-intent, android-widget

```
02-08 12:18:11.294: E/AndroidRuntime(25243): java.lang.OutOfMemoryError: (Heap Size=36771KB, Allocated=7320KB) 
```

如何优化内存的使用？我经常遇到上述问题。

1）如果我需要做addToBackStack，我如何清除imageAdapter、gridview、imageview和任何处理片段中大数据的东西。对于片段，替换用于传输页面。

2）有没有其他方法可以允许返回按钮单击上一页（片段），同时在转移到下一页时清除片段页面上的所有内容？

# delphi - 使用两个 With 语句

> ID：14765752
> 
> 赞同：0
> 
> 时间：2013-02-08T04:37:29.053
> 
> 标签：delphi, with-statement

首先，我在 onselect 期间让 combobox1 填充了 combobox2。我开始了很长的路，见下文。

```
 procedure TFGetZoneDept.ComboBox1Select(Sender: TObject);
begin
  Combobox2.Clear;
  with Combobox1 do
  begin
      if text = '3' then
      begin
        with combobox2 do
        begin
          Add('Zone 3 depts');
          Add('Zone 3 depts');
          Add('Zone 3 depts');
          Add('Zone 3 depts');
          Add('Zone 3 depts');
          Add('Zone 3 depts');
        end;   {with combobox2}
      end;  {If }
      if text = '4' then
      begin
        with ComboBox2 do
        begin
          add('Zone 4 depts');
          add('Zone 4 depts');
          add('Zone 4 depts');
          add('Zone 4 depts');
          add('Zone 4 depts)';
        end;{combobox2 with}
      end;{IF}
      if text ='1' then
      begin
        with ComboBox2 do
        begin
          add('Zone 1 depts');
          add('Zone 1 depts');
          add('Zone 1 depts');
          add('Zone 1 depts');
          add('Zone 1 depts');
          add('Zone 1 depts');
        end; {combobox2 with}
      end; {IF}
      if text ='2' then
      begin
        with ComboBox2 do
        begin
          add('Zone 2 depts');
          add('Zone 2 depts');
          add('Zone 2 depts');
          add('Zone 2 depts');
          add('Zone 2 depts');
          add('Zone 2 depts');
        end; {Combobox2 with}
      end; {IF}
      if text ='BoneYard' then
      begin
        with ComboBox2 do
        begin
          add('BoneYard depts');
          add('BoneYard depts');
          add('BoneYard depts');
          add('BoneYard depts');
          add('BoneYard depts');
          add('BoneYard depts');
        end; {combobox2 with}
      end; {IF}
      if text = 'Misc' then
      begin
        with ComboBox2 do
          begin
            add('Misc Depts');
            add('Misc Depts');
            add('Misc Depts');
            add('Misc Depts');
            add('Misc Depts');
            add('Misc Depts');
          end; {combobox2 with}
      end; {IF}
  end;{combobox1 with}
  Combobox2.Enabled := true;
end; 
```

我注意到你不能在里面使用`with`另一个`with`......或者我做错了。其次，我开始认为必须有更好的方法 :D 所以任何一个答案都可以。如何解决这个问题或以更好的方式做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T04:44:35.117

`with`嵌套语句是完全可能的。这通常不是一个好主意，因为`with`语句的坏处是复合的，但是编译器在解释代码时没有问题。解析标识符时，编译器简单地从内部语句到外部语句，直到找到一个具有它正在寻找的方法或属性的对象。

编译器找到的可能与您期望的不同。

* * *

您可以通过使用一些变量和循环来避免重复代码以及消除对`with`语句的需要，从而使您的代码更加简洁。

```
procedure TFGetZoneDept.ComboBox1Select(Sender: TObject);
var
  text1, text2: string;
  i: Integer;
begin
  Combobox2.Clear;
  text1 := Combobox1.Text;
  if text1 = '3' then
    text2 := 'Zone 3 depots'
  else if text1 = '4' then
    text2 := 'Zone 4 depts'
  else if text ='1' then
    text2 := 'Zone 1 depts'
  else if text ='2' then
    text2 := 'Zone 2 depts'
  else if text ='BoneYard' then
    text2 := 'BoneYard depts'
  else if text = 'Misc' then
    text2 := 'Misc Depts';
  for i := 1 to 6 do
    Combobox2.Items.add(text2);
  Combobox2.Enabled := true;
end; 
```

当你避免重复代码时，你也避免了错误。除非您*打算*让所有案例都有六个选项，*但*第 4 区只有五个选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T04:58:45.753

如果您使用嵌套的 With 语句，请打自己的脸以节省时间。

人们对 GOTO 和 WITH 语句有强烈的争论。WITH 语句更糟糕，因为它们可以嵌套，在每次使用时都加剧了它们的邪恶。

With的第一条规则，没有人谈论它（或使用它。）

# android - 如何更改 setError 方法中文本的 颜色？

> ID：14765758
> 
> 赞同：2
> 
> 时间：2013-02-08T04:38:03.180
> 
> 标签：android

我目前正在使用一个 Android 应用程序，我正在使用该`setError`方法进行`EditText`验证。问题是我想更改方法内文本的颜色。

```
 EditText UserNameEdt, PasswordEdt;
 String UserName;

 @Override
 protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.login);
     UserName = UserNameEdt.getText().toString();
     Password = PasswordEdt.getText().toString();

     if (UserName.equals("")) {
         UserNameEdt.setError("Enter UserName");    
     } 
 } 
```

我想将字符串“输入用户名”的颜色更改为黑色，而不是 EditText 中的文本。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-24T06:27:53.207

带有应用主题颜色的错误文本：

```
UserNameEdt.setError("Enter UserName"); 
```

您可以使用 HTML 标记来更改文本颜色。设置如下：

```
UserNameEdt.setError(Html.fromHtml("<font color='green'>hello</font>")); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-08T04:47:00.723

尝试这个：

```
UserNameEdt.setTextColor(Color.GREEN); 
```

# jquery - 使用恒星js的jquery水平视差效果？

> ID：14765760
> 
> 赞同：1
> 
> 时间：2013-02-08T04:38:11.900
> 
> 标签：jquery, horizontal-scrolling, parallax

我阅读了 stellar.js 的文档，示例显示了垂直滚动的工作原理，我尝试了简单的水平滚动视差，但我不确定我哪里出错了。对于称为元素的小对象，我设置了 data-stellar-ratio，对于背景，我设置了 data-background-stellar-js。我看过很多关于垂直滚动而不是水平滚动的教程。是否有其他方法可以单独通过 jquery 来实现？

```
 <!DOCTYPE html> 
```

```
<head>
    <title></title>
    <style type="text/css">
        * {
            margin:0;
            padding:0;
        }
        body {
            height:100%;
            margin:0px;
        }
        #bg1 {
            background:red;
        }
        #bg2 {
            background:green;
        }
        #bg3 {
            background:yellow;
        }
        .elements {
            width:40px;
            height:40px;
            background:black;
            position:fixed;
        }
    </style>
</head>

<body>
    <div id="bg1" data-stellar-background-ratio="0.5">
        <div class="elements" data-stellar-ratio="0.5"></div>
    </div>
    <div id="bg2" data-stellar-background-ratio="0.5">
        <div class="elements" data-stellar-ratio="0.5"></div>
    </div>
    <div id="bg3" data-stellar-background-ratio="0.5">
        <div class="elements" data-stellar-ratio="0.5"></div>
    </div>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="stellar.js"></script>
    <script type="text/javascript">
        $(function () {
            $.stellar({
                horizontalScrolling: true,
                verticalOffset: 40
            });
        });
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T04:59:01.013

有用的网址：

[http://dev.jonraasch.com/scrolling-parallax/docs](http://dev.jonraasch.com/scrolling-parallax/docs)

[http://www.egstudio.biz/easy-parallax-with-jquery/](http://www.egstudio.biz/easy-parallax-with-jquery/)

有很多不同的方法可以做到这一点，你甚至可以在没有另一个文件的情况下做到这一点。

[http://jsfiddle.net/4kG6s/1/](http://jsfiddle.net/4kG6s/1/)

HTML

```
<div id="background">
</div>

<div id="middleground">
</div>

<div id="foreground">
</div> 
```

CSS

```
div{
    position:absolute;
    top:0;
    left:0;
    right:0;
    bottom:0;
}

#background{
    z-index:1;
    background:url('http://placehold.it/100x100&text=Background');
}
#middleground{
    z-index:2;
    background:url('http://placehold.it/250x250&text=Middleground');
    opacity:.5;
}
#foreground{
    z-index:3;
    background:url('http://placehold.it/350x350&text=Foreground');
    opacity:.25;
} 
```

JS

```
/*
function AnimateMe(){
    $("#background").css("background-position", "-=2");
    $("#middleground").css("background-position", "-=4");
    $("#foreground").css("background-position", "-=8");    
}

setInterval(AnimateMe, 1000/60);
*/

var strength1 = 50;
var strength2 = 100;
var strength3 = 200;
$("html").mousemove(function(e){
    var pageX = e.pageX - ($(window).width() / 2);
    var pageY = e.pageY - ($(window).height() / 2);
    var newvalueX = 1* pageX * -1;
    var newvalueY = 1* pageY * -1;
    $('#background').css("background-position", (strength1 / $(window).width() * pageX * -1)+"px "+(strength1  / $(window).height() * pageY * -1)+"px");
    $('#middleground').css("background-position", (strength2 / $(window).width() * pageX * -1)+"px "+(strength2  / $(window).height() * pageY * -1)+"px");
    $('#foreground').css("background-position", (strength3 / $(window).width() * pageX * -1)+"px "+(strength3  / $(window).height() * pageY * -1)+"px");
}); 
```

希望这一切都有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:02:39.070

试试这个代码看演示[http://jsfiddle.net/nilesh026/4eBDE/1/](http://jsfiddle.net/nilesh026/4eBDE/1/)

```
 <html>
 <head>
<title></title>
 <script type="text/javascript" src="jquery-1.6.1.js"></script>
<script type="text/javascript" src="jquery.stellar.js"></script>

<style type="text/css">
    * {
        margin:0;
        padding:0;
    }
    body {
        height:100%;
        margin:0px;
    }
    .photo {
        background-attachment: fixed;
        background-position: 50% 0;
        background-repeat: no-repeat;
        height: 450px;
        position: relative;
    }
    #bg1 {
        background:red;
    }
    #bg2 {
        background:green;
    }
    #bg3 {
        background:yellow;
    }
    .elements {
        width:400px;
        height:400px;
        background:black;
        position:fixed;
    }
</style> 
```

```
<div class="photo" id="bg1" data-stellar-background-ratio="0.5">
    <div class="elements" data-stellar-ratio="0.5"></div>
</div>
<div class="photo" id="bg2" data-stellar-background-ratio="0.5">
   <div class="elements" data-stellar-ratio="0.5"></div>
</div>
<div class="photo" id="bg3" data-stellar-background-ratio="0.5">
   <div class="elements" data-stellar-ratio="0.5"></div>
</div>
<script type="text/javascript">
    $(function () {
        $.stellar({
            horizontalScrolling: true,
            verticalOffset: 40
        });
    });
</script> 
```

# mysql - select * 将行值转换为表列名

> ID：14765765
> 
> 赞同：1
> 
> 时间：2013-02-08T04:38:41.863
> 
> 标签：mysql, select, group-concat

我正在尝试将行值转换为列名。在 stackoverflow 上搜索后，我了解到可以使用 GROUP_CONCAT() 来完成。我试过但没有结果。

**我想要的是？？**

我有一张这样的桌子：

```
id  |    staff_id_staff     |   leave_type_id_leave_type    |    days
1   |    41                 |   Casual                      |    7
2   |    41                 |   Earned                      |    1
3   |    41                 |   Sick                        |    4 
```

并想要这样的结果：

```
Casual    |    Earned   |   Sick
7         |       1     |   4 
```

请注意：我不知道`leave_type_id_leave_type`（它会是任何东西）的价值

**这是 leave_remain 表的代码：**

```
CREATE TABLE IF NOT EXISTS `leave_remain` (
  `id_leave_remain` int(11) NOT NULL AUTO_INCREMENT,
  `staff_id_staff` int(11) NOT NULL,
  `leave_type_id_leave_type` int(11) NOT NULL,
  `days` float DEFAULT NULL,
  `updated` date DEFAULT NULL,
  PRIMARY KEY (`id_leave_remain`),
  UNIQUE KEY `leave_type_id_leave_type_UNIQUE` (`leave_type_id_leave_type`),
  KEY `fk_leave_remain_staff1` (`staff_id_staff`),
  KEY `fk_leave_remain_leave_type1` (`leave_type_id_leave_type`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=108 ;

--
-- Dumping data for table `leave_remain`
--

INSERT INTO `leave_remain` (`id_leave_remain`, `staff_id_staff`, `leave_type_id_leave_type`, `days`, `updated`) VALUES
(82, 41, 16, 16, '2013-02-04'),
(89, 41, 17, 178, '2013-02-06'),
(107, 41, 18, 0, '2013-02-04'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:52:36.503

看到您需要处理类似于此查询的内容：

```
SELECT GROUP_CONCAT(CONVERT(leave_type_id_leave_type,char(10)))
FROM leave_remain
GROUP BY staff_id_staff
UNION
SELECT GROUP_CONCAT(CONVERT(days,char(10)))
FROM leave_remain
GROUP BY staff_id_staff 
```

检查[SqlFiddle上的演示](http://www.sqlfiddle.com/#!2/c54b5/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:51:40.800

试试下面的代码

```
SELECT 
max(DECODE(leave_type_id_leave_type,'Casual',days)) Casual,
max(DECODE(leave_type_id_leave_type,'Earned',days)) Earned,
max(DECODE(leave_type_id_leave_type,'Sick',days)) Sick
FROM table_name; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T05:09:40.667

```
 select leave_type_id_leave_type,days,  
count(case when leave_type_id_leave_type = 'Casual' THEN 1 END) Casual,
count(case when leave_type_id_leave_type = 'Earned' THEN 1 END) Earned,
count(case when leave_type_id_leave_type = 'Sick' THEN 1 END) Sick 
from leave_remain GROUP BY id_leave_remain 
```

见[SqlFiddle](http://www.sqlfiddle.com/#!2/f6e38/5)

# java - 当我需要转义 Html 字符串时？

> ID：14765766
> 
> 赞同：14
> 
> 时间：2013-02-08T04:38:44.567
> 
> 标签：java, escaping, stringescapeutils

在我的旧项目中，我可以在将字符串发送到浏览器之前看到 escapeHtml 的用法。

```
StringEscapeUtils.escapeHtml(stringBody); 
```

我从 api doc 知道 escapeHtml 做了什么。这是给出的示例：-

```
For example: 
"bread" & "butter"
becomes: 
&quot;bread&quot; &amp; &quot;butter&quot;. 
```

我的理解是，当我们在转义 html 后发送字符串时，浏览器的职责是转换回原始字符。是对的吗？

**但是我不知道为什么以及何时需要它，如果我们发送字符串正文而不转义 html 会发生什么？如果我们在将其发送到浏览器之前不执行 escapeHtml，成本是多少**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-08T04:42:38.057

我可以想到几种可能性来解释为什么有时字符串没有被转义：

*   也许最初的程序员确信在某些地方字符串没有特殊字符（但是，在我看来，这将是不好的编程习惯；为了防止将来发生变化，转义字符串的成本很低）
*   该字符串已经在代码中的那一点进行了转义。您绝对不想两次转义字符串；用户最终会看到转义序列而不是预期的文本。
*   该字符串是实际的 html 本身。您不想转义 html；你想让浏览器处理它！

编辑 - 转义的原因是特殊字符喜欢`&`并且`<`最终可能导致浏览器显示与您预期不同的内容。裸露`&`在技术上是 html 中的错误。大多数浏览器会尝试智能地处理此类错误，并在大多数情况下正确显示它们。（例如，如果字符串是 a 中的文本，这几乎肯定会发生在您的示例文本中`<div>`。）但是，由于它是错误的标记，因此某些浏览器将无法正常工作；辅助技术（例如，文本转语音）可能会失败；并且可能还有其他问题。

尽管浏览器尽最大努力从错误的标记中恢复，但仍有几种情况会失败。如果您的示例字符串是一个属性值，则绝对需要转义引号。浏览器无法正确处理以下内容：

```
<img alt=""bread" & "butter"" ... > 
```

一般规则是，任何不是标记但可能被混淆为标记的字符都需要转义。

请注意，有几种情况下文本可以出现在 html 文档中，并且它们对转义有不同的要求。应转义以下内容：

*   在文档的字符集中没有表示的所有字符（如果您使用的是 UTF-8，则不太可能，但情况并非总是如此）
*   在属性值内，引号（`'`或`"`，与用于属性值本身的分隔符匹配）和与号 ( `&`)，但不`<`
*   在文本节点内，只有`&`和`<`
*   在 href 值中，需要在 url 中转义的字符（有时这些需要双重转义，因此在浏览器将它们转义一次后它们仍然被转义）
*   在 CDATA 块内，通常没有任何内容（在 HTML 级别）。

最后，除了双重转义的危险之外，转义所有文本的成本是最小的：一点点额外的处理和网络上的一些额外字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T04:50:54.840

HTML（现在我们最好说 XML）定义了许多所谓的“特殊”字符，这意味着这些字符对于浏览器具有特殊含义，而“普通”字符仅表示它们自己。例如，字符串`"Hello, World!"`只包含“普通”字符，因此它的字面意思`"Hello, World!"`是浏览器。String `"<b>Hello, World!</b>"`, 包含特殊字符`'<'`, `'>'`and `'/'`, 对于浏览器来说意味着：`typeset string "Hello, World!" in bold`而不是`typeset "<b>Hello, World!</b>"`.

方法`escapeHtml (String)`可能（我无法确定，因为我不知道它是如何实现的）将任意字符串转换为 HTML 代码，该代码将指示浏览器逐字排版该字符串。例如，`escapeHtml ("<b>Hello, World!</b>")`whill 返回的 HTML 代码将被浏览器解释为`typeset "<b>Hello, World!</b>" normally`而不是`typeset string "Hello, World!" in bold`. 如果方法`escapeHtml (String)`被正确实现，你不应该关心这个方法生成的 HTML 代码是什么样子的。只需在您想要求浏览器按字面意思排版某些字符串的地方使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T04:41:33.297

当 html 或 xml 有可能与页面生成的 html（读取 jsp）一起被解释时，您必须转义它。

这个好[问题](https://stackoverflow.com/questions/4948532/where-should-i-escape-html-strings-jsp-page-or-servlets)也解释了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T04:53:05.923

根据我的经验，所有字符串都应该在显示在页面上之前从 Html 中转义。我们当前的项目是关于管理 Active Directory 中的所有组织单元，这些单元可以包含任何特殊字符（包括 Html 字符）。在页面上显示时，您最终可能会使用以下代码来显示一条名为`User <Marketing>`

```
<a href="viewDetail.do"> <%=request.getAttribute("Name");%> </a> 
```

页面渲染后会变成

```
<a href="viewDetail.do"> User <Marketing> </a> 
```

它实际上`User`在页面上显示为超链接。

但是，如果您在发送到页面之前转义 Html 值

```
request.setAttribute("Name", StringEscapeUtils.escapeHtml("User <Marketing>")); 
```

页面渲染后会变成

```
 <a href="viewDetail.do"> User &lt;Marketing&gt; </a> 
```

在 JSP 页面上正确显示

很快，您使用转义 Html 字符来防止特殊输入。如果输入包含 Html 字符，您的页面在渲染过程中会出现错误

# javascript - servlet 中的 JavaScript 用于重定向页面。这是一个好习惯吗？

> ID：14765769
> 
> 赞同：4
> 
> 时间：2013-02-08T04:39:01.097
> 
> 标签：javascript, jsp, servlets, redirect, request

我有一个普遍的问题。我见过有人在 Servlet 或提交页面中编写 javascript 以将请求重定向到另一个页面。像

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class SomeServlet extends HttpServlet {
  public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
      throws ServletException, IOException {  
out.println( "<script> location.replace('myPage.jsp'); </script>" );
  }
} 
```

我的问题是，这样写是个好习惯吗（认为不是）？如果这不是一个好习惯，这有什么缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:21:37.773

这是非常糟糕的做法，因为：

*   客户端（浏览器）需要在重定向完成之前下载整个页面
*   这不适用于关闭 Javascript 的浏览器
*   不确定这一点，但也许搜索引擎可能会遇到这种技术的问题

要发送重定向，最好使用`response.sendRedirect(...)`. 这是一个 HTTP 重定向（状态代码 3xx），它不需要任何 Javascript，并且肯定适用于所有浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:56:35.107

它不是专业的编码方式。

在`Servlet`JSP 中，您可以将放置的任何内容（作为要在响应中发送的字符串）放置在`HTML`将由`Servlet`or形成的最终页面中`JSP`。当然，对于 servlet，它只是一个字符串。

在这个字符串中，您可以放置​​ HTML`Javascript`或任何您想要的内容，它将在导航器中工作，但在 Java 级别它只是一个字符串。

尽管我们有办法做到这一点，但在大多数情况下尽量避免。

如果我们这样做会出现诸如客户端调试之类的问题，并且对于新开发人员来说，要准确查看您在何处添加此脚本会变得更加复杂（如果他们不知道我们可以将脚本`servlet`作为字符串包含在内）

# android - JNI 错误（应用程序错误）：访问过时的本地引用 0xbc00021（大小为 8 的表中的索引 8）

> ID：14765776
> 
> 赞同：12
> 
> 时间：2013-02-08T04:39:42.943
> 
> 标签：android

[我从这里](http://www.vogella.com/articles/Android/article.html)为 Absolute Beginners 和 Temperature Converter 应用程序制作了 hello world 应用程序 两者都在模拟器上运行良好，但是当我尝试在三星 Note 2 上运行它时，LogCat 出现以下错误

```
02-08 07:22:18.665: E/dalvikvm(30944): JNI ERROR (app bug): accessed stale local reference 0xbc00021 (index 8 in a table of size 8)
02-08 07:22:18.665: E/dalvikvm(30944): VM aborting
02-08 07:22:18.665: A/libc(30944): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1), thread 30944 (oid.temperature) 
```

两个应用程序都打开显示带有标题的布局，但不显示布局中的任何其他视图

样品运行良好

> 设备：note 2 Samsung-gt_n7100
> 
> IDE：Eclipse 3.8 版
> 
> 操作系统：64位Windows 7

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-07-03T13:18:13.997

由于 android 4.0 垃圾收集器已更改。现在它在垃圾收集期间移动对象，这可能会导致很多问题。

想象一下，你有一个静态变量指向一个对象，然后这个对象被 gc 移动了。由于 android 使用 java 对象的直接指针，这意味着您的静态变量现在指向内存中的随机地址，未被任何对象占用或被不同类型的对象占用。这几乎可以保证您下次使用此变量时将获得 EXC_BAD_ACCESS。

所以android给你JNI ERROR（app bug）错误，以防止你得到不可调试的EXC_BAD_ACCESS。现在有两种方法可以避免这个错误。

1.  您可以将清单中的 targetSdkVersion 设置为版本 11 或更低版本。这将启用 JNI 错误兼容模式并完全防止任何问题。这就是您的旧示例有效的原因。

2.  您可以通过调用 env->NewGlobalRef(ref) 在存储它们之前避免使用指向 java 对象的静态变量或使对象引用全局。
    也许这里最大的例子之一是保留 jclass 对象。通常，您将在 JNI_OnLoad 期间初始化静态 jclass 变量，因为只要应用程序正在运行，类对象就会保留在内存中。

此代码将导致崩溃：

```
static jclass myClass;

JNIEXPORT jint JNICALL JNI_OnLoad (JavaVM * vm, void * reserved) {  
    myClass = env->FindClass("com/example/company/MyClass");  
    return JNI_VERSION_1_6;  
} 
```

虽然这段代码运行良好：

```
static jclass myClass;

JNIEXPORT jint JNICALL JNI_OnLoad (JavaVM * vm, void * reserved) {  
    jclass tmp = env->FindClass("com/example/company/MyClass");  
    myClass = (jclass)env->NewGlobalRef(tmp);
    return JNI_VERSION_1_6;  
} 
```

有关更多示例，请参见 Marek Sebera 提供的链接：[http ://android-developers.blogspot.cz/2011/11/jni-local-reference-changes-in-ics.html](http://android-developers.blogspot.cz/2011/11/jni-local-reference-changes-in-ics.html)

# php - php未定义变量session_register问题

> ID：14765777
> 
> 赞同：0
> 
> 时间：2013-02-08T04:39:43.873
> 
> 标签：php, session-variables, session-cookies

有一个 php 项目已经在实时服务器中。现在我的工作是改变一些风格问题。因此，为此我只是从服务器下载了所有文件以及数据库。之后，我在本地主机（LAMP）上进行了所有必要的设置。现在，当我浏览页面时，我遇到了一些错误，例如

```
Notice: Undefined variable: _session_register in path to the folder/file session.php on line 8 
```

现在在第 8 行我可以看到这段代码

```
$_session_register["esb2b_username"];
$_session_register["esb2b_userid"];
$_session_register["esb2b_memtype"];
$_session_register["esb2b_adv_id"];
$_session_register["esb2b_adv_email"];
$_session_register["lang"]; 
```

在谷歌搜索后，我知道 php 中的 session_register 已被弃用。那么，以一种好的方式解决这个问题的最佳解决方案是什么？任何帮助和建议都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:42:18.987

有一个名为的函数`session_register`已被弃用，但您在问题中所拥有的是一个变量。您收到此通知是因为您在其上使用数组访问并且它未定义。这可行，但最好先将其定义为空数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:45:18.977

`$_session_register`这是错误的使用`$_SESSION`

`session_register`是一个已弃用的函数。（你现在写的方式也是错误的）

`$_session_register["esb2b_username"];`将其更改为`$_SESSION["esb2b_username"] = "";`

# r - 如何实现可从 JVM 内的多个 R 会话访问的内存数据库？

> ID：14765778
> 
> 赞同：2
> 
> 时间：2013-02-08T04:39:55.923
> 
> 标签：r, jvm, h2, in-memory-database, rjdbc

我正在编写一个在单个 JVM 中生成多个 R 会话的程序。我需要在这些会话之间共享数据，并且我现在正在将文件 (RData/txt) 写入磁盘。我做了一些阅读，发现内存数据库是正确的方法，并且将注意力集中在 H2 上。我下载并安装了 RH2 包，文档说它包含一个 H2 实例——我不需要单独安装一个。

所以我继续尝试创建我的数据库：

```
con <- dbConnect(H2(), "jdbc:h2:mem:test", "sa", " ") 
```

并得到一个错误：

```
Error in .local(drv, ...) : could not find function ".verify.JDBC.result" 
```

我阅读了这个[StackOverflow 问题](https://stackoverflow.com/questions/13907092/rh2-using-r-cannot-connect-to-my-h2-database)，并尝试了：

```
> con <- dbConnect(H2(), "jdbc:h2:mem:test")
Error in .local(drv, ...) : could not find function ".verify.JDBC.result"
> con <- dbConnect(H2(), "jdbc:h2:mem:test;DB_CLOSE_DELAY=-1")
Error in .local(drv, ...) : could not find function ".verify.JDBC.result"
> con <- dbConnect(H2(), "jdbc:h2:~/test", "sa", "")
Error in .local(drv, ...) : could not find function ".verify.JDBC.result" 
```

我浏览了文档，但没有太大帮助。我检查了我的驱动程序，它给出了：

```
> H2()
An object of class "H2Driver"
Slot "identifier.quote":
[1] "\""

Slot "jdrv":
[1] "Java-Object{org.h2.Driver@25e01f19}" 
```

如何继续从 R 中创建数据库？另外，是否可以在不同的会话之间共享这个数据库？

更新：我切换到 RJDBC 和 RH2 的旧实例，但结果相同。

# python - 元类中是类还是实例？

> ID：14765780
> 
> 赞同：2
> 
> 时间：2013-02-08T04:39:57.967
> 
> 标签：python, instance, metaclass

```
from time import ctime
import inspect

class  MetaC(type):
  def  __init__(cls,name,bases,attrd):
    print   isinstance(cls,MetaC) 
    print   inspect.isclass(cls)
    super(MetaC,cls).__init__(name,bases,attrd)
    print "careated %s" %ctime()

class  Foo(object):
  __metaclass__=MetaC
  def  __init__(self):
    print "i am here " 
```

我得到这个输出：

```
True  
True  
careated Fri Feb  8 12:33:32 2013 
```

类 方法 中的argument( `cls`) ，`MetaC``__init__`

是`cls` 一个`class`还是一个`instance`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:44:16.050

`cls`既是类*又*是实例。类只是元类的一个实例。

```
>>> class MetaC(type):
...   def  __init__(cls, name, bases, attrs):
...     print 'cls: ', cls
...     print 'cls is instance of MetaC: ', isinstance(cls, MetaC)
... 
>>> class C(object):
...   __metaclass__ = MetaC
... 
cls: <class '__main__.C'>
cls is instance of MetaC: True 
```

# c - 分配给类型时不兼容的类型 - C

> ID：14765788
> 
> 赞同：0
> 
> 时间：2013-02-08T04:40:42.893
> 
> 标签：c, pointers, types, double

我在 C 中的一个项目的 Code::Blocks 中工作。

当我编译时，我在第 81、85、90、91 行收到错误：“从类型 'double' 分配给类型 'double *' 时类型不兼容”。

该项目是采取一个单位转换工具并合并多个功能而不是main（）下的所有内容。

[http://pastebay.net/1181184](http://pastebay.net/1181184)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T04:42:36.727

尝试取消引用指针：

```
*pKelvin = PROD((fahrenheit+459.67),ytemp);
^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T04:43:42.550

您遇到的所有错误都是主题的变体。以这条线为例：

```
pKelvin = PROD((fahrenheit+459.67),ytemp); 
```

在这里，`pKelvin`has type `double*`，意味着它是一个指向 type 对象的指针`double`。另一方面，右侧有 type `double`，这意味着它是一个实际的`double`。C 抱怨是因为你不能将`double`s 分配给`double*`s，因为它们代表了根本不同的类型。

要解决这个问题，你可能想写

```
*pKelvin = PROD((fahrenheit+459.67),ytemp); 
```

这表示“将 的值存储`PROD((fahrenheit+459.67),ytemp)`在`double`指向的`pKelvin`。这是有效的，因为您现在将 a 分配给`double`类型的对象`double`。

更一般地说，如果您看到这样的错误，这可能意味着您正在将指针分配给非指针，反之亦然。

希望这可以帮助！

# css - 如何让 div 扩展过去的浮动图像

> ID：14765790
> 
> 赞同：1
> 
> 时间：2013-02-08T04:40:54.717
> 
> 标签：css, background

嘿，当我向左或向右浮动文本时，我正在尝试让我在 CSS 中制作的不透明背景扩展到图像的底部。

**CSS**

```
.gamebackground {
  border-bottom-right-radius: 50px 50px;
  position:absolute;
  top:0px;
  left:0px;
  width:80%;
  height:10%;
  background-color:Black;
  z-index:1;
  /* These three lines are for transparency in all browsers. */
  -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
  filter: alpha(opacity=50);
  opacity:.5;
} 
```

**HTML**

```
<div class="gamebackground"></div>
<img src="images/download.jpg"width=50% class="floatRight">
  text
</div> 
```

几年前我做过，但我忘记了，如果你能帮助我，将非常感激！谢谢。

# asp.net - 如果在下拉列表中选择了特定值，则防止回发

> ID：14765794
> 
> 赞同：3
> 
> 时间：2013-02-08T04:41:05.120
> 
> 标签：asp.net, updatepanel, html-select

我有一个带有 Autopostback 属性的下拉列表，我想要，如果选择`Select Week`选项，那么它不应该回发，否则它应该回发。下面是函数。

JAVASCRIPT

```
function OnWeekChange() {
        var value = $("#DropDownListWeeks option:selected").val();
        if (value == "-1")
         return false; 
        else return true;
    } 
```

ASPX

```
 <asp:DropDownList ID="DropDownListWeeks" runat="server" Height="23px" Width="252px"
                    OnSelectedIndexChanged="DropDownListWeeks_SelectedIndexChanged" AutoPostBack="true" ClientIDMode="Static"
                    AppendDataBoundItems="true"  onchange="return OnWeekChange();"> 
                </asp:DropDownList> 
```

。CS

```
 weeks = client.GetWeeks(true);
        foreach (Roaster_Week week in weeks)
        {
            //Add weeks in the dropdowns with formatting 
            DropDownListWeeks.Items.Add(new ListItem(string.Format("{0:MMM d, yyyy}", week.StartDate) + " - " + string.Format("{0:MMM d, yyyy}", week.EndDate),week.WeekID.ToString()));
        }
        client.Close();
        DropDownListWeeks.Items.Insert(0, new ListItem("Select Week","-1")); 
```

在我的情况下，即使我选择了*除*`-1`. 您能否为我的方案提供适当的解决方案。`Jquery`

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:36:42.113

我遇到了类似的问题，但是我使用此代码解决了。它对我有用。

```
function OnWeekChange() {
            var value = $("#DropDownListWeeks option:selected").val();
            if (value == "-1")
             return false; 
            else {
             __doPostBack(value , '');
            }
         }

<asp:DropDownList ID="DropDownListWeeks" runat="server" Height="23px" Width="252px"
                        OnSelectedIndexChanged="DropDownListWeeks_SelectedIndexChanged" AutoPostBack="true" ClientIDMode="Static"
                        AppendDataBoundItems="true"  onchange="return OnWeekChange();"> 
                    </asp:DropDownList> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:20:49.133

删除`onchange="return OnWeekChange();"`并添加下面的功能将起作用。

```
 $(document).ready(function () {
        $("#DropDownListWeeks").change(function () {
            var value = $("#DropDownListWeeks option:selected").val();
            alert(value);
            if (value == "-1")
                return false;
            else
                return true;
        });
    }); 
```*

# jquery - jQuery .fadeTo 添加元素

> ID：14765796
> 
> 赞同：2
> 
> 时间：2013-02-08T04:41:06.950
> 
> 标签：jquery, html, css, hover

我试图在我的工作中对一个小的 div 对象添加一个小的 .fadeTo 效果，但不确定我是否可以以及在哪里添加它。我想将此效果添加到所有 div 中。我想要 .fadeTo (500)

这是我的[jsfiddle](http://jsfiddle.net/Fd7L3/1/)的链接：

```
$(document).ready(function() {
    $('div').bind("mouseenter", function(){
        var color  = $(this).css("background-color");

        $(this).css("background", "#53b9ab");

        $(this).bind("mouseleave", function(){
            $(this).css("background", color);

        })    
    })    
}) 
```

我正在寻找的效果将用于社交媒体图标 我想要的确切效果可以在这些社交媒体图标上[找到 http://www.coletownsend.com](http://www.coletownsend.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:09:56.247

您可以使用 。[动画](http://api.jquery.com/animate/)jQuery 函数。

> 描述：执行一组 CSS 属性的自定义动画。

请参阅[此](http://jqueryui.com/animate/)示例。

我已经编辑了你的代码。[在此处](http://goo.gl/fOfmu)查看结果，并检查 HTML 和 Javascript 代码。

这是 jQuery 代码：

```
var color;
var fadeTime = 200;

$('div').bind("mouseenter", function(){
    color  = $(this).css("background-color");
    $(this).animate({backgroundColor: "#53b9ab"}, fadeTime);
});

$("div").bind("mouseleave", function(){
    $(this).animate({backgroundColor: color}, fadeTime);           
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:34:22.853

通过将这两行添加到您现有的代码中，如果我正确理解您想要的内容，您可以实现它。

```
$(document).ready(function() {
    $('div').bind("mouseenter", function(){
        var color  = $(this).css("background-color");

      $(this).css("background", "red");
      $(this).css("opacity", 0);  
      $(this).fadeTo(500,1);

    })    
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:09:06.760

如果我正确理解您的问题，您需要将其应用于悬停功能，

```
$("div").hover(function(){
    $("div").css("background-color", "orange").fadeIn("slow");
}, function() {
    $("div").css("background-color", "lime").fadeOut("slow");
}); 
```

根据您的代码，您可以像下面这样调整它，

```
$(document).ready(function() {
     $('div').bind("mouseenter", function(){
            var color  = $(this).css("background-color");
            $(this).css("background", "#53b9ab").fadeIn('slow', 0.7); 
            $(this).bind("mouseleave", function(){
                $(this).css("background", color).fadeTo('slow', 0.5); // partial fading
            });    
        });   
}); 
```

# cakephp - 包含记录的 SUM 字段

> ID：14765803
> 
> 赞同：1
> 
> 时间：2013-02-08T04:42:03.767
> 
> 标签：cakephp, group-by, sum

在蛋糕 2.1 中，我需要从包含的记录中求和一个字段。

目前我得到子表上所有记录的总和，但需要按我的主表（员工）的 id 分组。

参加属于员工

```
 $agents = $this->Employee->find('all', array(
        'fields' => array('Employee.FullNameNoId'),
        'conditions' => $conditions,
        'contain' => array(
            'Attend' => array(
                'conditions' => array(
                    'Attend.as_date BETWEEN ? AND ?' => array(
                        date('Y-m-d', strtotime($this->passedArgs['date1'])), 
                        date('Y-m-d', strtotime($this->passedArgs['date2']))
                    )
                ),
                'fields' => array('sum(Attend.as_labormin) AS total'),
                //'group' => array('Attend.employee_id') // This gets sql errors below
            )
        )
     )); 
```

尝试了几种 SQL 错误的组合：

```
'group' => array('Attend.employee.id') // Model "Attend" is not associated with model "Attend" 
                                      //Column not found: 1054 Unknown column                     
'group' => array('employee_id')        // Model "Attend" is not associated with model "employee_id"
                                      // Column not found: 1054 Unknown column 'Attend.group' in 'field list'

'group' => array('Employee.id')           //Column not found: 1054 Unknown column Attend.group' in 'field list' 
```

表之间的关系很好，我可以得到相关的记录，问题是通过员工ID得到一个总和。

检查[了相关字段的 Cakephp SUM](https://stackoverflow.com/questions/5570635/cakephp-sum-of-related-field)，但是使用 SELECT SUM 似乎很麻烦，并且他们遗漏了所需的分组。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:54:23.860

Try disabling 'autoFields'. It is known to cause SQL errors with aggregate functions and 'group by' statements. [Find out more here](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html#containablebehavior-options)

# drupal-7 - 向网站添加两个网络表单

> ID：14765806
> 
> 赞同：-1
> 
> 时间：2013-02-08T04:42:17.323
> 
> 标签：drupal-7, drupal-webform

我在我的drupal 7网站上使用了一个网络表单。现在我想将一个网络表单放到另一个页面（不同网页中的两个网络表单）。我该如何配置网络表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:52:05.003

你用过，webform 作为节点，还是块？如果你使用过，webform 作为块，那么你去 admin/block 然后配置。

从该页面，您可以配置您希望页面在哪里显示 Web 表单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T08:26:27.450

就像您创建前一个 Web 表单一样创建另一个 Web 表单。

以管理员权限登录您的网站，然后从管理员菜单中单击**添加内容 > 网络表单。**在此处创建一个新的网络表单。保存后，您可以添加所需的表单元素。

这个新的网络表单是一个节点，将在内容列表页面中列出。如果您想将此网络表单呈现为块，请转到特定**网络表单，> 编辑 > 表单设置**，然后在“高级设置”选项卡中，选中“**作为块可用**”复选框。

希望这可以帮助..

# html - 使用 CSS td 绝对宽度，位置

> ID：14765817
> 
> 赞同：103
> 
> 时间：2013-02-08T04:42:49.847
> 
> 标签：html, css, html-table

请看这个[JSFIDDLE](http://jsfiddle.net/Mkq8L/)

```
td.rhead { width: 300px; } 
```

为什么 CSS 宽度不起作用？

```
<table>
<thead>
<tr>
<td class="rhead">need 300px</td>
<td colspan="7">Week #0</td>
<td colspan="7">Week #1</td>
<!-- etc..-->
</tr>
<tr>
<td class="rhead"></td>
<td>S</td><td>M</td><td>T</td><td>W</td><td>T</td><td>F</td><td>S</td>
<td>S</td><td>M</td><td>T</td><td>W</td><td>T</td><td>F</td><td>S</td>
<!-- etc... -->
</tr>
<thead>
</table> 
```

另外，position:fixed、absolute 等对 td 宽度有什么影响（如果有的话）？我正在寻找一个不仅仅是解决问题的原因。我希望了解它是如何工作的。

![td 宽度不是所需的 300px](../Images/edf1324e7f913c8170221aa0e5eb1bb0.png)

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-02-08T04:58:14.570

这可能不是你想听到的，但`display: table-cell`不尊重宽度，会根据整个表格的宽度折叠。您可以通过在`display: block`您指定宽度的表格单元格本身内添加一个元素来轻松解决这个问题，例如

```
<td><div style="width: 300px;">wide</div></td> 
```

`<table>`如果它本身是或绝对的，这不应该有太大的区别，`position: fixed`因为单元格的位置相对于表格都是静态的。

[http://jsfiddle.net/ExplosionPIlls/Mkq8L/4/](http://jsfiddle.net/ExplosionPIlls/Mkq8L/4/)

编辑：我不能相信，但正如评论所说，你可以使用`min-width`而不是`width`在表格单元格上。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-09-17T09:33:34.417

你最好使用`table-layout: fixed`

**Auto**是默认值，对于大型表可能会导致一些客户端延迟，因为浏览器会遍历它以检查所有尺寸是否合适。

**固定**要好得多，并且可以更快地呈现到页面。表格的结构取决于表格的整体宽度和每列的宽度。

这里它应用于原始示例：[JSFIDDLE](http://jsfiddle.net/CatmanDoes/Mkq8L/125/)，您会注意到剩余的列被压碎并重叠它们的内容。我们可以用更多的 CSS 来解决这个问题（我所要做的就是在第一个 TR 中添加一个类）：

```
 table {
        width: 100%;
        table-layout: fixed;
    }

    .header-row > td {
        width: 100px;
    }

    td.rhead {
        width: 300px
    } 
```

在这里看到的行动：[JSFIDDLE](http://jsfiddle.net/CatmanDoes/Mkq8L/126/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-08T04:46:48.887

它在您提供的链接中不起作用的原因是因为您试图显示 300px 列加上 52 列，每列跨度 7 列。减少列数，它可以工作。你不能在屏幕上放那么多。

如果要强制列适合尝试设置：

```
body {min-width:4150px;} 
```

看我的 jsfiddle：http: [//jsfiddle.net/Mkq8L/6/](http://jsfiddle.net/Mkq8L/6/) @mike 我还不能评论。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-08T05:03:16.857

原因是，因为您没有指定表格的宽度，并且您的整个 td 都溢出了。

[例如](http://jsfiddle.net/5ecXY/)，我给表格设置了 5000 像素的宽度，我认为这符合您的要求。

```
table{
    width:5000px;
} 
```

这是您提供的完全相同的代码，我只是在表格宽度中添加了它。

我相信正在发生的事情是因为您的 TD 超出了默认表格宽度。您可以看到，如果您在每个 tr 中拉出大约 45 个 td（即您在问题中提供的代码，而不是 jsfiddle），它工作得很好

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-08T04:46:46.860

试试这个它工作。

```
<table>
<thead>
<tr>
<td width="300">need 300px</td> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-08-14T17:52:44.273

尝试使用

```
table {
  table-layout: auto;
} 
```

如果您使用 Bootstrap，`table`则`table-layout: fixed;`默认情况下具有类。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-02-18T13:39:13.423

我的疯狂解决方案。）

```
$(document).ready(function() {
    $("td").each(function(index) { 
    var htmlText = "<div style='width:300px;'>" + $(this).text() +"</div>";
    $(this).html(htmlText);
  });
}); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-12-28T05:52:30.630

使用表格布局属性和表格上的“固定”值。

```
table {
   table-layout: fixed;
   width: 300px; /* your desired width */
} 
```

设置完表格的整个宽度后，您现在可以设置宽度为 td 的百分比。

```
td:nth-child(1), td:nth-child(2) {
   width: 15%;  
} 
```

您可以在此链接中了解更多信息：http: [//www.w3schools.com/cssref/pr_tab_table-layout.asp](http://www.w3schools.com/cssref/pr_tab_table-layout.asp)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-10-07T09:30:18.287

例如，如果表格宽度为 100%，请尝试在 td 上使用百分比宽度，例如 20%。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-04-05T12:17:49.070

将 div 中第一个单元格的内容包装起来，例如：

HTML：

```
<td><div class="rhead">a little space</div></td> 
```

CSS：

```
.rhead {
  width: 300px;
} 
```

这是一个[jsfiddle](http://jsfiddle.net/adamgoszka/Mkq8L/626/)。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-02-08T04:53:40.703

您还可以使用：

```
.rhead {
    width:300px;
} 
```

但这仅适用于某些浏览器，如果我没记错的话 IE8 不允许这样做。总而言之，将`width=""`属性放在`<td>`自身中更安全。

# jqgrid - jqgrid搜索中的多个AND/OR选项

> ID：14765818
> 
> 赞同：0
> 
> 时间：2013-02-08T04:42:49.910
> 
> 标签：jqgrid

我在我的项目中使用 JQGRID 高级搜索。每个搜索规则是否可以有多个 AND/OR 条件。那是

```
Name = John AND
Amount < 500 OR
Tax > 30. 
```

基本上我想在每个搜索规则之后都有 AND/OR 条件。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:20:23.653

可以通过使用搜索选项来实现`multipleSearch:true, multipleGroup:true`

# javascript - js滑块的Firefox问题

> ID：14765819
> 
> 赞同：0
> 
> 时间：2013-02-08T04:42:52.753
> 
> 标签：javascript, jquery

我有这个滑块，它在 IE 和 chrome 中运行良好，但在 Firefox 中出现问题，它会一次性加载所有图片，但不会再次返回并加载它们，在控制台中我收到此错误“SyntaxError：missing ] after setTimeout(func,900) 行中的元素 lis"

这是代码

```
function pic_loader() {
    //alert('s');
    var func = new function () {}
    $folder = $('#foldername').attr('value');
    $files = document.getElementById('filename').value;
    $num = document.getElementById('num').value;
    $filenames = $files.split("##");
    var $img = [];
    var $link = [];
    if ($num > 1) {
        for ($i = 1; $i <= $num; $i++) {
            $img[$i] = $folder + "/" + $filenames[$i];
            if ($i == 1) {
                $link[$i] = "<img id='slide[" + $i + "]' width=380 src=" + $img[$i] + ">";
                $("#load_here").append($link[$i]);
                $first = document.getElementById('slide[1]');
                $first.style.display = "none";
                $($first).fadeIn(800);
            } else {
                $link[$i] = "<img id='slide[" + $i + "]' width=380 src=" + $img[$i] + " style='display:none'>";
                $("#load_here").append($link[$i]);
            }

        }
        $i = 1;
        var $loop = setInterval(function () {
            //alert('x');
            $j = $i + 1;
            $current = document.getElementById('slide[' + ($i++) + ']');
            $next = document.getElementById('slide[' + ($j) + ']');
            $($current).fadeOut(800, function () {
                $($next).fadeIn(800);
            });
            if ($j > $num) {
                $($next).fadeOut(800);
                setTimeout(func, 900);

                function func() {
                    clearInterval($loop);
                    $("#load_here").html("");
                    pic_loader();
                }

            }
        }, 4500);
    } else {
        $i = 1;
        $img[$i] = $folder + "/" + $filenames[$i];
        $link[$i] = "<img id='slide[" + $i + "]' width=380 src=" + $img[$i] + ">";
        $("#load_here").append($link[$i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:05:40.010

您粘贴的代码中没有语法错误。它必须在其他地方。将其粘贴到 jsfiddle 中，它不会引发语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:10:01.783

首先，`id`属性不能包含`[`或`]`字符。

您可以`name atrribute`就地使用 od`id`或创建`id`类似`slide_1,slide_2,....`

使用`name`属性，您可以使用如下功能： `$current = document.getElementsByName('slide[' + ($i++) + ']');`

这篇文章可以帮助您更多地了解您的问题[使用 jQuery 或纯 Javascript 访问 HTML 输入文本框数组](https://stackoverflow.com/questions/2192091/accessing-an-array-of-html-input-text-boxes-using-jquery-or-plain-javascript)

# php - 字符串中的php函数参数到数组

> ID：14765822
> 
> 赞同：0
> 
> 时间：2013-02-08T04:43:08.257
> 
> 标签：php, function, parsing, arguments

我有字符串

```
$argsInString = '"%s hello", \'%s world\', $foo->bar("anything", array(\'foo\' => 5 , \'bar\' => $a)),5, foo($s) ,$foo'; 
```

我想像这样转换为数组：

```
$argsInArray = array('"%s hello"', '\'%s world\'', '$foo->bar("anything", array(\'foo\' => 5 , \'bar\' => $a))', '5', 'foo($s)', '$foo'); 
```

我尝试这样的事情：

```
eval('$argsInArray = array(' . $argsInString . ');'); 
```

但这执行变量。

**你能帮我如何从 $argsInString 创建 $argsInArray 吗？**

编辑：如果它成功地编写了一个正则表达式，该正则表达式将在字符串中使用单引号 (') 覆盖单个参数，则 eval 如上所述工作。

或者你可以写正则表达式 preg_match_all('...', $argsInString, $argsInArray); 这是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:02:22.583

这是一个正则表达式，可以处理这样的样本：

```
/(?: ?)([^,]*\(.*?\)|.+?)(?: ?)(?:,|$)/ 
```

在这里解释演示：[http ://regex101.com/r/hK6nN0](http://regex101.com/r/hK6nN0)

更新：
*还匹配包含以下内容的单引号和双引号字符串`,`：
`"%s, hello", \'%s, world\', 5`*

**`/(?: ?)([^,]*\(.*?\)|[^,]*'[^']*'|[^,]*"[^"]*"|.+?)(?: ?)(?:,|$)/`**

在这里解释演示：[http ://regex101.com/r/tD3cN9](http://regex101.com/r/tD3cN9)

# c++11 - 在依赖注入中移动语义

> ID：14765824
> 
> 赞同：2
> 
> 时间：2013-02-08T04:43:42.360
> 
> 标签：c++11, dependency-injection, inversion-of-control, move-semantics, hypodermic

在执行构造函数注入时使用移动语义是否可能或有帮助？

如果是这样，皮下设置是否允许这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:12:03.380

Hypodermic 可以*自动*使用移动构造函数，它可以节省您更新依赖项的引用计数器的成本。除了提供相关对象的移动构造函数之外，您没有什么特别的事情要做。

目前，Hypodermic 无法解析提供两个版本的构造函数（移动与非移动）的对象，也就是说，编译器会抱怨不明确的调用。

# java - 当文件确实存在时，ProcessBuilder 给出“找不到文件”异常

> ID：14765828
> 
> 赞同：5
> 
> 时间：2013-02-08T04:43:55.633
> 
> 标签：java, processbuilder

处理将在 Linux Web 服务器上运行的应用程序以从某个目录中删除日志，但是我不断收到 FileNotFound 异常。

这是代码：

```
public static void deleteLOG() {
    try {
        ProcessBuilder probuilder = new ProcessBuilder("find /home/root/multicraft/servers/ -name '*.log' -delete");
        probuilder.start();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

和例外

```
java.io.IOException: Cannot run program "find . -name '*CoreData*' -delete" (in directory "/home/root/multicraft/servers"): error=2, No such file or directory
        at java.lang.ProcessBuilder.start(Unknown Source)
        at com.mcprohosting.com.nodecleanup.Preprocess.deleteCoreData(Preprocess.java:23)
        at com.mcprohosting.com.nodecleanup.handlers.CleanupHandler.executeCleanup(CleanupHandler.java:36)
        at com.mcprohosting.com.main.NodeCleaner.init(NodeCleaner.java:29)
        at com.mcprohosting.com.main.NodeCleaner.main(NodeCleaner.java:25)
Caused by: java.io.IOException: error=2, No such file or directory
        at java.lang.UNIXProcess.forkAndExec(Native Method)
        at java.lang.UNIXProcess.<init>(Unknown Source)
        at java.lang.ProcessImpl.start(Unknown Source)
        ... 5 more 
```

但是命令 cd /home/root/multicraft/servers 工作得很好。

我也试过：

```
 ProcessBuilder probuilder = new ProcessBuilder("find . -name '*Backup*' -delete");
    probuilder.directory(new File("/home/root/multicraft/servers/"));
    probuilder.start(); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-08T04:46:54.590

构造`ProcessBuilder`函数接收多个字符串 - 作为一个`List<String>`或可变数量的参数，每个类型`String`：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html#ProcessBuilder(java.util.List)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html#ProcessBuilder(java.util.List)) [http://docs.oracle.com/javase/1.5。 0/docs/api/java/lang/ProcessBuilder.html#ProcessBuilder(java.lang.String...)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html#ProcessBuilder(java.lang.String...))

您遇到了困难，因为您将整个命令作为一个字符串传递，导致 JVM 寻找一个名为“ `find /home/root/multicraft/servers/ -name '*.log' -delete`”的程序，而不是`find`.

您必须将长命令分成几部分。如：

```
ProcessBuilder pb = new ProcessBuilder("find", ".", "-name", "'*CoreData*"...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:51:25.440

```
 try {
        ProcessBuilder probuilder = new ProcessBuilder("<Absolute Path To>/find /home/root/multicraft/servers/ -name '*.log' -delete");
        probuilder.start();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

`<Absolute Path To>`理想情况下应该是 /bin 或 /usr/bin

```
ProcessBuilder probuilder = new ProcessBuilder("find /home/root/multicraft/servers/ -name '*Backup*' -delete");
probuilder.directory(new File("<Absolute Path To>"));
probuilder.start(); 
```

`probuilder.directory`期望工作目录在哪里`find`。

# jquery - RequireJs 仅在我配置路径选项时加载 JQuery

> ID：14765830
> 
> 赞同：1
> 
> 时间：2013-02-08T04:44:03.810
> 
> 标签：jquery, requirejs

我的应用程序结构如下所示：

```
 ...
 javascripts/
    - main.js
    lib/
        - jquery-1.9.0.min.js
        - require.js 
```

我有一个 HTML 页面，例如：

```
<script type="text/javascript" data-main='/assets/javascripts/main' src='/assets/javascripts/lib/require.js'></script> 
```

我的 main.js 看起来像：

```
//main.js
require.config({
    paths: {
    jquery: 'lib/jquery-1.9.0.min' }});

require(['jquery'], function($) {
    return $(function() {
        return console.log('dom ready');
    });
}); 
```

这一切正常，HTML 页面在控制台中显示“dom ready”。问题是当我删除路径配置并尝试像这样加载 jquery 时：

```
//Updated main.js
require(['lib/jquery-1.9.0.min'], function($) {
    return $(function() {
        return console.log('dom ready');
    });
}); 
```

我已删除路径配置并尝试通过指定其路径来加载 jquery。这给了我关于 $ 变量的“未定义不是函数”。奇怪的是，我仍然看到 jquery-1.9.0.min 来自 require.js 发起的网络。这里发生了什么？这是一个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T07:31:03.147

不是错误。jQuery 将自身导出为命名模块。这意味着您必须将其作为路径配置选项。

```
// Expose jQuery as an AMD module, but only for AMD loaders that
// understand the issues with loading multiple versions of jQuery
// in a page that all might call define(). The loader will indicate
// they have special allowances for multiple jQuery versions by
// specifying define.amd.jQuery = true. Register as a named module,
// since jQuery can be concatenated with other files that may use define,
// but not use a proper concatenation script that understands anonymous
// AMD modules. A named AMD is safest and most robust way to register.
// Lowercase jquery is used because AMD module names are derived from
// file names, and jQuery is normally delivered in a lowercase file name.
// Do this after creating the global so that if an AMD module wants to call
// noConflict to hide this version of jQuery, it will work.
if ( typeof define === "function" && define.amd && define.amd.jQuery ) {
    define( "jquery", [], function () { return jQuery; } );
} 
```

[https://github.com/jquery/jquery/blob/master/src/exports.js](https://github.com/jquery/jquery/blob/master/src/exports.js)

如果你不这样做，那么库仍然会加载（如你所见），但它不会正确返回给你需要/定义回调

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:55:43.053

改为`define`而不是`require`。

```
define(['lib/jquery-1.9.0.min'], function($) {
    return $(function() {
        return console.log('dom ready');
    });
}); 
```

# android - dropbox-android-sync-sdk-1.0 中的问题

> ID：14765832
> 
> 赞同：2
> 
> 时间：2013-02-08T04:44:22.153
> 
> 标签：android, dropbox, dropbox-api

[Android Sync SDK](https://www.dropbox.com/sh/xiw2rsk3hcjcney/jeDsth_hUD)中“Hello Dropbox”示例类中的`onClickLinkToDropbox()`方法中的以下代码显示错误为`HelloDropboxActivity`

> `android.app.Fragment`无法解析类型。它是从所需`.class`文件中间接引用的。

我该如何解决这个问题？我使用的是安卓 2.3.3。

```
mDbxAcctMgr.startLink(this,REQUEST_LINK_TO_DBX); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T05:00:08.087

这似乎是编译器在重载解析期间过于挑剔。我看到了两种可能的解决方案：

1.  使用更高版本的 SDK（11 或更高版本）构建。您只需要更改用于构建的 SDK（在 Eclipse 项目属性对话框中设置目标，或在 project.properties 中设置 target=android-11）。您可以在 AndroidManifest.xml 中将最小值和目标都设置为 10，这样您的应用仍将与旧版本兼容。一般来说，使用最新的 SDK 构建应该始终是安全的。如果您使用清单定义的目标中不存在的 API，您将收到警告。

2.  通过像这样强制重载解决方案来解决它： `mDbxAcctMgr.startLink((Activity)this, REQUEST_LINK_TO_DBX);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T08:07:33.433

> 如果您还没有使用它，您还需要 Android 支持库。在 Eclipse 中，打开项目的上下文菜单并选择 Android Tools → Add support library... 并按照提示将库添加到项目中。

[https://www.dropbox.com/developers/sync/tutorial/android](https://www.dropbox.com/developers/sync/tutorial/android)

# google-apps-script - GAS 小工具插入到 googleSite... 用于非 Google 帐户

> ID：14765835
> 
> 赞同：0
> 
> 时间：2013-02-08T04:44:36.467
> 
> 标签：google-apps-script

我认为这与我的问题相同：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=852](http://code.google.com/p/google-apps-script-issues/issues/detail?id=852)

但要明确一点： **如果没有 google/gmail 用户登录，Google 应用程序脚本就不会在 Google 站点上运行？**

...是否有其他谷歌产品可以为非谷歌账户部署 GAS？

谢谢，内森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:46:05.490

如果不是三个或更多，你有两个不同级别的用户身份在这里工作。我将尝试以清晰的方式为您将它们分开。

1.  Google 协作平台可以为 Google 用户和非用户工作。这完全取决于该站点的共享设置。如果您与世界分享它，它将被搜索引擎共享和索引。如果您与任何有链接的人共享，搜索引擎不会将其编入索引，但用户无需登录即可使用该网站。

2.  您在 Google 网站中嵌入的内容可能有它自己的用户身份问题。管理这些最简单的方法是进入“发布”菜单，然后“部署为 Webapp”。然后，您将看到一个菜单，询问脚本应该在哪个帐户下运行，基本上是您或用户。然后允许哪些人访问，您可以选择“任何人，甚至匿名”。

这将作为您的帐户运行该应用程序，但允许任何人调用它。非常适合允许公众访问在 GAS 中创建的表单。

现在其他问题。您的 GAS 中可能有专门调用用户的代码。在这种情况下，所有先前的设置都无关紧要。当脚本查找用户但没有找到任何有效的内容时，它会出错。这些调用非常明显，并且很少使用。（至少根据我的经验。）

但是，简而言之，是的！您当然可以将 GAS 嵌入到 Google 网站中以供匿名用户调用。

我的例子：[https ://sites.google.com/site/greenmountainretreat/sign-up](https://sites.google.com/site/greenmountainretreat/sign-up)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:40:36.627

错误的。您可以使用插入 > 脚本小工具在 Google 站点中嵌入 Apps 脚本。只需确保发布设置设置为“任何人，甚至匿名”即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T07:20:44.963

[您所指](http://code.google.com/p/google-apps-script-issues/issues/detail?id=852)的问题是关于将 i-frame 小工具插入**非 Google**网站...请不要混淆...并仔细阅读问题报告。

*如果你想要另一个[例子](https://sites.google.com/site/appsscriptexperiments/home)......*

# php - 如何在不转义斜杠的情况下进行 json_encode？

> ID：14765836
> 
> 赞同：7
> 
> 时间：2013-02-08T04:44:50.523
> 
> 标签：php, escaping, json

我像这样编码它..

```
json_encode($array_list, JSON_UNESCAPED_SLASHES) 
```

例如：\n 变成 \\n，\r\n 变成 \\r\\n

但是，它仍然逃脱了斜线！出了什么问题以及如何解决？谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-08T04:48:40.443

我认为是因为`single and double quotes`，看例子

```
$arr = array("\n\r");
echo json_encode($arr,JSON_UNESCAPED_SLASHES);  // ["\n\r"]

$arr = array('\n\r');
echo json_encode($arr,JSON_UNESCAPED_SLASHES);  //["\\n\\r"] 
```

工作示例[http://codepad.viper-7.com/LvWMhq](http://codepad.viper-7.com/LvWMhq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T10:41:52.570

如果在执行任何 MySQL 查询时存在问题，那么您可以像这样使用它：

`mysql_real_escape_string(json_encode($array))`

`$array`在此之前无需转义本身的任何内容，只需`mysql_real_escape_string`转义 json_encoded 字符串即可。

# python - 将python项目与virtualenv链接

> ID：14765837
> 
> 赞同：0
> 
> 时间：2013-02-08T04:44:52.193
> 
> 标签：python, ubuntu, virtualenv, virtualbox

我有一个 ubuntu 服务器 12 作为 Windows 7 主机上的 virtualbox 中的来宾运行。在共享文件夹/workspace 中，我有一个 python 项目 project01。由于 virtualbox 在共享文件夹中创建符号链接时存在问题，因此我在用户主目录中创建了 virtualenv。/home/user1/venv. 我可以激活虚拟环境没有问题。

```
source ~/venv/bin/activate 
```

但是当我尝试运行 manage.py 时，出现错误

```
~/venv/bin/python manage.py runserver
Traceback (most recent call last):
  File "manage.py", line 8, in <module>
    from django.core.management import execute_from_command_line
ImportError: No module named django.core.management 
```

我确定我缺少路径或其他东西，但我不确定要添加什么路径以及添加到哪里。我尝试在激活脚本中设置 PYTHONPATH，但这没有用。是否需要在activate脚本中添加django核心管理的路径？我在 venv/build 下看到一堆 django 目录

```
Django
django-appconf
django-celery
django-celery-email
django-celery-transactions
django-debug-toolbar
django-filebrowser
django-grappelli
djangohelpers
django-imagekit
django-pipeline
django-redis
django-sslify
django-storages
django-widget-tweaks 
```

我需要指向那里的某个地方吗？我非常喜欢 django 和 virtualenv 菜鸟。

***更新*** 看起来没有安装软件包。所以这完全是另一回事。感谢您的回复。我还有一些其他问题需要在这里解决。

我在 virtualenv 中运行 pip install -r requirements.txt ，它只有 1 个 postgres 错误，但我没有使用本地 postgres 服务器，所以这没什么大不了的。除非该错误阻止了所有内容的安装，否则这是一件大事。

当我检查站点包时，我只看到以下内容：easy-install.pth pip-1.2.1-py2.7.egg setuptools-0.6c11-py2.7.egg setuptools.pth

pip freeze 告诉我：argparse==1.2.1 wsgiref==0.1.2

pip install 的错误是：异常信息：回溯（最后一次调用）：文件“venv/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg/pip/basecommand. py”，第 107 行，主要状态 = self.run(options, args) 文件“venv/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg/pip/commands/ install.py”，第 256 行，运行中 require_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle) 文件“venv/local/lib/python2.7/site-packages/pip-1.2.1- py2.7.egg/pip/req.py”，第 1042 行，在 prepare_files req_to_install.run_egg_info() 文件“venv/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg /pip/req.py”，第 236 行，在 run_egg_info command_desc='python setup.py egg_info') 文件“venv/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg /点子/实用程序。py", line 612, in call_subprocess % (command_desc, proc.returncode, cwd)) InstallationError: Command python setup.py egg_info failed with error code 1 in venv/build/psycopg2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:14:12.010

该错误看起来好像您在 venv python 路径中没有 Django。

您可以使用以下几种方式确认它是您的 venv python 安装的一部分：

如果您使用 PIP 安装，您可以使用以下方式验证软件包是否已安装`pip freeze`

还要检查`lib/python2.7/site-packages/`venv，那里应该有一个 django 目录。这是您的 venv 的 PYTHONPATH 的一部分的目录。

如果您在其中找不到模块，则将它们安装在不同的路径中。然后您需要确保该路径是 venv 的 PYTHONPATH 的一部分。

# iphone - iOS Fill 使用应用程序数据（字符串、整数、图像等）填写 pdf 表单并通过电子邮件发送

> ID：14765840
> 
> 赞同：0
> 
> 时间：2013-02-08T04:45:04.223
> 
> 标签：iphone, ios, pdf

所以我对一个项目有了这个想法，并且正在寻找一些关于如何完成它的解决方案。现在，我设置了一个 iphone 应用程序来接收一堆用户信息和他们绘制的签名图像。我有一份 pdf 弃权书，需要填写此数据和签名。有没有办法在表格上覆盖这些数据？有没有办法创建一个以表单为背景的 html 文档，然后用 css 将数据放在顶部？

如果这是可能的，那么将新的 pdf 或 html 页面添加到网站/文件夹/电子邮件的最佳方法是什么。

将不胜感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:11:34.460

有关参考和理论解释..您可以查看 Apple 页面[https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf/dq_pdf.html](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf/dq_pdf.html)

一些不错的教程：

*   [http://www.raywenderlich.com/6581/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-1](http://www.raywenderlich.com/6581/how-to-create-a-pdf-with-quartz-2d-in-ios-5-tutorial-part-1)
*   [http://www.ioslearner.com/convert-html-uiwebview-pdf-iphone-ipad/](http://www.ioslearner.com/convert-html-uiwebview-pdf-iphone-ipad/)
*   [http://www.ioslearner.com/generate-pdf-programmatically-iphoneipad/](http://www.ioslearner.com/generate-pdf-programmatically-iphoneipad/)

# openscenegraph - 为什么是模型->asGeode(); 返回 NULL？

> ID：14765841
> 
> 赞同：1
> 
> 时间：2013-02-08T04:45:06.503
> 
> 标签：openscenegraph

这些天我正在研究 OpenSceneGraph：

```
// Assumes the Cessna's root node is a group node.
osg::ref_ptr<osg::Node> model = osgDB::readNodeFile("cessna.osg");
osg::Group* convModel1 = model->asGroup(); // OK!
osg::Geode* convModel2 = model->asGeode(); // Returns NULL? 
```

为什么是模型->asGeode(); 返回 NULL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T05:26:51.813

如果您在文本编辑器中查看 cessna.osg：

```
Group {
  UniqueID Group_0
  DataVariance STATIC
  cullingActive TRUE
  num_children 1
  Geode {
    DataVariance DYNAMIC
    name "cessna.osg"
    cullingActive TRUE
    num_drawables 1
    Geometry { 
```

您会看到顶级实体是组，而不是 Geode。您需要在从 readNodeFile 返回的节点上 getChild()，然后您应该能够 asGeode()。

# c# - 使用随机数在一个列表中选择一个项目并将其移动到另一个列表

> ID：14765845
> 
> 赞同：3
> 
> 时间：2013-02-08T04:45:13.307
> 
> 标签：c#

我正在设计一款名为 Snap 的纸牌游戏（这里有一个显示规则的链接[http://boardgames.about.com/od/cardgames/a/snap.htm](http://boardgames.about.com/od/cardgames/a/snap.htm)），在我的版本中，玩家必须点击如果一对出现在中间。我目前有 4 个类，一个用于卡片（这是一个名为 cardValue_ 的 int），一个用于玩家手牌，一个用于原始纸牌，一个用于中间的一堆卡片。所以 Deck、Pile 和 Hand 类中有一个卡片列表。我现在正在尝试为包含卡片列表的 Deck 类编写一个 shuffle 方法。它将随机选择一张卡片并将其移动到新列表，直到所有卡片都被挑选出来，然后将它们移回原始列表，从而进行简单的洗牌。到目前为止，我的方法看起来像这样......

```
public List<Deck> Shuffle(List<Card> cardDeck)
    {
        int index = 0;
        Random randomCard = new Random();
        List<Card> newDeck = new List<Card>();

        while (index < cardDeck.Count)
        {
            int ran = randomCard.Next(0, cardDeck.Count);
            foreach (Card card in cardDeck)
            {

            }
        }
    } 
```

我正在尝试找出 foreach 循环中应该做什么（除非整个方法是错误的），但现在我想我已经在错误的地方声明了我的所有卡片，所有 52 张卡片当前都在表单中声明，或者应该我要在 Deck 类中声明它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:58:38.770

You where fairly close to how I would solve it, what I would do is copy out of the source list randomly until it is empty and then just refill it. You don't need to return a list as this will just shuffle the list you pass in.

```
//Move this out of the function, if you are wondering why search SO for "Not random" and choose any of the 100's of people asking "why is random not random?" :)
private static Random randomCard = new Random(); //Not thread safe, if multi-threading use locks!!!

public static void Shuffle(List<Card> cardDeck)
{
    int index = 0;
    List<Card> tempDeck = new List<Card>();

    while (cardDeck.Count > 0)
    {
        int removal = randomCard.Next(0, cardDeck.Count);
        Card tempCard = cardDeck[removal];
        cardDeck.RemoveAt(removal);
        tempDeck.Add(tempCard);
    }

    //cardDeck is empty at this point, now we refill it with our randomized deck.
    cardDeck.AddRange(tempDeck);
} 
```

* * *

If you want to not modify the original list and you do want a new randomized list just copy the source list first.

```
public static List<Card> Shuffle(List<Card> cardDeck)
{
    int index = 0;
    List<Card> tempDeck = new List<Card>();
    List<Card> localCopy = new List<Card>(cardDeck);   //Creates a shallow copy of the list.      

    while (localCopy.Count > 0)
    {
        int removal = randomCard.Next(0, cardDeck.Count);
        Card tempCard = localCopy[removal];
        localCopy.RemoveAt(removal);
        tempDeck.Add(tempCard);
    }

    return tempDeck;
} 
```

* * *

I would recommend using [Richard's method](https://stackoverflow.com/a/14766143/80274). it is much simpler.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T05:15:38.673

阅读 Jeff 的[关于洗牌的博客以](http://www.codinghorror.com/blog/2007/12/shuffling.html)了解所有详细信息。

```
public List<Card> Shuffle(List<Card> cards)
{
  return new List<Card>(cards)
   .OrderBy(a => Guid.NewGuid());
} 
```

**更新**

Scott 建议 Guid 可能不够随机，而 Crypto RNG 会更好。所以使用 BigInteger 因为它实现了 IComparable 我们得到：

```
RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();

public List<Card> Shuffle(List<Card> cards)
{
  var r = new byte[32];
  return new List<Card>(cards)
   .OrderBy(a => new BigInteger(rng.GetBytes(r));
} 
```

# java - servlet request.getParameter 无法解析

> ID：14765850
> 
> 赞同：0
> 
> 时间：2013-02-08T04:45:42.253
> 
> 标签：java, servlets

下面是一个用于从 jsp 页面获取参数的 servlet。

我正在尝试运行以下代码-

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.swing.JFrame;

public class oneServlet extends HttpServlet {

public static Connection getConnection() throws Exception {

    String driver = "org.postgresql.Driver";
    String url = "jdbc:postgresql://10.1.11.112:5432/pack";
    String username = "pack";
    String password = "pack";
    Class.forName(driver);
    Connection conn = DriverManager.getConnection(url, username, password);
    return conn;
}

public static void main(String[] args) throws Exception {
    String user=request.getParameter("t1");
    String pass=request.getParameter("t2");
    Connection conn = null;
    PreparedStatement pstmt = null;
    try {
        conn = getConnection();
        String queryTest = "select username,password from login";
        pstmt = conn.prepareStatement(queryTest);

        ResultSet rs = pstmt.executeQuery();
        while (rs.next()) {
         String username=rs.getString(1);
         String password=rs.getString(2);    

   if(user.equals(username) && pass.equals(password))
       {

     JFrame frame = new JFrame("/LoginSuccess.jsp");

       }    
        else
        {

            System.out.println("Login Failed,Please try Againe");
        }
        }}

     catch (Exception e) {
        e.printStackTrace();
    } finally {
        pstmt.close();
        conn.close();
    }
} 
```

}

它在 request.getParameter 中显示“请求无法解析”的错误。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:47:12.913

当你 extends `HttpServlet`，你需要覆盖`doGet`和`doPost()`which take`HttpServletRequest`和`HttpServletResponse`作为参数。

例子：

```
public void doPost(HttpServletRequest request, HttpServletResponse response)
           throws IOException, ServletException {
  .......
       String user=request.getParameter("t1"); //Use request variable to do get...
} 
```

[在这里](http://www3.ntu.edu.sg/home/ehchua/programming/java/JavaServletExamples.html)和[这里](http://docs.oracle.com/javaee/5/tutorial/doc/bnafe.html)阅读更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:56:04.390

Servlet 没有 main() ，它们由 SelvletContainer 或 Webserver 执行（如 tomcat）

在你的场景中。

```
public void doGet(){
    String user=request.getParameter("t1");
    String pass=request.getParameter("t2");
    Connection conn = null;
    PreparedStatement pstmt = null;
    try {
        conn = getConnection();
        String queryTest = "select username,password from login";
        pstmt = conn.prepareStatement(queryTest);

        ResultSet rs = pstmt.executeQuery();
        while (rs.next()) {
         String username=rs.getString(1);
         String password=rs.getString(2);    

       if(user.equals(username) && pass.equals(password))
           {
     //JFrame frame = new JFrame("/LoginSuccess.jsp");
     request.getRequestDispatcher().redirect("/LoginSuccess.jsp");

       }    
        else
        {

            System.out.println("Login Failed,Please try Againe");//This will print at the console
        }
        }}

     catch (Exception e) {
        e.printStackTrace();
    } finally {
        pstmt.close();
        conn.close();
    } 
```

了解有关[servlet的更多信息](http://www.tutorialspoint.com/servlets/index.htm)

# mysql - SQL Query比较不同行中的数据

> ID：14765854
> 
> 赞同：3
> 
> 时间：2013-02-08T04:46:08.470
> 
> 标签：mysql, sql

我昨天在一次工作面试中遇到了这个问题，虽然它看起来很直接，但我无法弄清楚，这让我整晚都在想它。

系统记录有关拼字游戏联赛的数据，其中有一个 members 表、一个 games 表和一个加入 member_games 表。

```
members: member_id, name : pk(member_id)
member_games: game_id, member_id, score : pk(game_id, member_id)
games: game_id, location, date : pk(game_id)

members
1, mick
2, keith
3, charlie

member_games
1, 1, 50
1, 2, 60
2, 1, 45
2, 3, 105
3, 1, 30
3, 3, 120

game
1, london, 2012-12-01
2, richmond, 2012-12-02
3, leeds, 2012-12-03 
```

你如何制定一个 SQL 查询来找出`member_id`= 1 的获胜次数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T04:58:53.247

查询以查找 的获胜次数`member_id = 1`，

```
SELECT COUNT(1) "No. of Wins"
  FROM (SELECT game_id, member_id, score
          FROM member_games b
         WHERE score =
               (SELECT max(score) from member_games WHERE game_id = b.game_id)) A
 WHERE member_id = 1; 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/72632/11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T04:58:13.943

关键是先将 member_games 分组并获得最高分，然后将其加入 member_games 表以获取 member_id。

事实上，您需要左连接才能看到 Member_id 赢得了 0 场比赛。

```
SELECT
    member_games.member_id
    ,COUNT(BestScore.game_id)
FROM member_games
LEFT JOIN
    (
    SELECT game_id, MAX(score) AS HighestScore FROM member_games GROUP BY Game_ID
    ) BestScore ON member_games.Score = BestScore.HighestScore
AND member_games.game_id = BestScore.game_id
WHERE member_games.member_id = 1
GROUP BY member_games.member_id; 
```

这是在[SQL Fiddle](http://sqlfiddle.com/#!2/c96a2/21/0)上作为 MySQL

此解决方案将平局视为胜利，但它应该适用于任何 SQL 服务器。Rank 函数在 Microsoft SQL Server 2005 及更高版本中可用。

为了完整起见，这是一个更复杂的查询，它不将平局视为胜利：

```
SELECT
    member_games.member_id
    ,COUNT(BestScore.game_id)
FROM member_games
LEFT JOIN
    (
    SELECT member_games.game_id, HighestScore
    FROM member_games
    LEFT JOIN
        (
          SELECT game_id, MAX(score) AS HighestScore FROM member_games GROUP BY Game_ID
        ) BestScore ON member_games.Score = BestScore.HighestScore
        AND member_games.game_id = BestScore.game_id
        GROUP BY game_id, HighestScore
        HAVING count(1) = 1
    ) BestScore ON member_games.Score = BestScore.HighestScore
WHERE member_games.member_id = 1
GROUP BY member_games.member_id; 
```

[在SQL Fiddle](http://sqlfiddle.com/#!2/b8c59/8/0)和 MySQL上的平局是损失

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T04:56:50.470

应该这样做（SQL Server 语法）

```
SELECT member_id
      ,COUNT(*) Wins
FROM   (
       SELECT member_id
             ,RANK() OVER (PARTITION BY Game_Id ORDER BY score DESC) Position
       FROM  member_games
       ) Positions
WHERE Position=1
      AND
      member_id=1
GROUP BY member_id 
```

这`RANK()`允许在拼字游戏中可能（如果不太可能）建立联系的可能性。`ROW_NUMBER()`可能会在无法打平的游戏中提供小的性能提升。

此方法可以轻松扩展以将所有排名显示为

```
SELECT member_id
      ,Position
      ,COUNT(*) Games
FROM   (
       SELECT member_id
             ,RANK() OVER (PARTITION BY Game_Id ORDER BY score DESC) Position
       FROM  member_games
       ) Positions
WHERE member_id=1
GROUP BY member_id
        ,Position 
```

看到[这个](http://sqlfiddle.com/#!3/c96a2/7)SQL Fiddle

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T05:04:52.663

以下查询将为您提供 member_id 1 的获胜次数。

```
select count(*) as number_of_wins
    from member_games as mg1
    where member_id = 1
    and not exists (select 1
        from member_games as mg2
        where mg2.game_id = mg1.game_id
        and mg2.member_id <> mg1.member_id
        and mg2.score >= mg1.score); 
```

以下查询将为您提供成员列表及其各自的获胜次数。

```
select m.*,
    (select count(*) from member_games as mg1
        where member_id = m.member_id
        and not exists (select 1
            from member_games as mg2
            where mg2.game_id = mg1.game_id
            and mg2.member_id <> mg1.member_id
            and mg2.score >= mg1.score)
    ) as number_of_wins
    from members as m; 
```

这些查询不会将第一名的平局视为获胜。

我创建了一个[MySQL SQL Fiddle 演示](http://sqlfiddle.com/#!2/c96a2/25)和一个[SQL Server SQL Fiddle 演示](http://sqlfiddle.com/#!6/c96a2/6)。

# java - g.drawLine 什么都不做

> ID：14765862
> 
> 赞同：0
> 
> 时间：2013-02-08T04:46:56.870
> 
> 标签：java, swing, drawing, jpanel

到目前为止，这是我的代码，其中包含一些打印行，只是为了确保它实际上甚至进入了该方法。出于某种原因，在画布上没有绘制任何东西，就绘图而言，我有一个与此类似的程序，它工作正常。这个有什么问题？

```
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;
import java.util.Scanner;
import javax.swing.*;

public class gameOfLife implements ActionListener {
  private int height;
  private int width;
  private Graphics g;
  private JPanel panel;
  private JFrame frame;
  int[][] board= new int[40][40];

  /**
  * @param args
  */
  public static void main(String[] args) {
    // TODO Auto-generated method stub
    gameOfLife gui = new gameOfLife();
  }

  public gameOfLife() {
    int height=400;
    int width=400;
    frame= new JFrame("Keegan's Game Of Life");
    frame.setSize(new Dimension(height,width));
    frame.setLayout(new BorderLayout());
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE );
    g=frame.getGraphics();
    drawBoard();
  } 

  public void drawBoard() {
    g.setColor(Color.BLUE);
    g.drawLine(0, 0, 50, 50);
    g.fillOval(50,50,10,10);
    System.out.println("Done Drawing");
    g.drawString("IT WORKED!", 100, 100);
  }

  @Override
  public void actionPerformed(ActionEvent arg0) {
    // TODO Auto-generated method stub
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T04:53:58.030

Let's start with `g=frame.getGraphics();`

This is a very bad idea and not how custom painting is performed. `getGraphics` may return `null` and is generally only a snap shot of the last paint cycle. Anything painted to the `Graphics` context via this method will be destroyed on the next repaint cycle.

You should never maintain a reference to any `Graphics` context, they are transient and may not be the same object between paint cycles

Instead, create yourself a custom component (something like `JPanel`) and override it's `paintComponent` method

Check out [Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/) for more details

**Updated**

You can check out this [simple example](https://stackoverflow.com/questions/12931326/graphics-not-drawn-appearing/12932156#12932156) for an idea...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:53:14.613

You can override `paint(Graphics g)` in your canvas, otherwise the drawing will disappear once the canvas is invalidated (e.g. moved or covered by another windows).

It might be easier to let your class extends `JFrame` and override the `paint` methods, otherwise you can use anonymous class e.g.

`frame = new JFrame("Keegan's Game Of Life") { //override paint here }`

However, if your application aims to create animation for [Game Of Life](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life), you should not be doing this in a JFrame, consider using `JPanel` or `Canvas`

# python - Python中的包装类

> ID：14765866
> 
> 赞同：5
> 
> 时间：2013-02-08T04:47:13.973
> 
> 标签：python, wrapper

我想要一个包装类，它的行为与它包装的对象完全相同，只是它添加或覆盖了一些选择方法。

我的代码目前如下所示：

```
# Create a wrapper class that equips instances with specified functions
def equipWith(**methods):

  class Wrapper(object):
    def __init__(self, instance):
      object.__setattr__(self, 'instance',instance)

    def __setattr__(self, name, value):
      object.__setattr__(object.__getattribute__(self,'instance'), name, value)

    def __getattribute__(self, name):
      instance = object.__getattribute__(self, 'instance')

      # If this is a wrapped method, return a bound method
      if name in methods: return (lambda *args, **kargs: methods[name](self,*args,**kargs))

      # Otherwise, just return attribute of instance
      return instance.__getattribute__(name)

  return Wrapper 
```

为了测试这一点，我写道：

```
class A(object):
  def __init__(self,a):
    self.a = a

a = A(10)
W = equipWith(__add__ = (lambda self, other: self.a + other.a))
b = W(a)
b.a = 12
print(a.a)
print(b.__add__(b))
print(b + b) 
```

在最后一行时，我的口译员抱怨说：

```
Traceback (most recent call last):
  File "metax.py", line 39, in <module>
    print(b + b)
TypeError: unsupported operand type(s) for +: 'Wrapper' and 'Wrapper' 
```

为什么是这样？如何让我的包装类按照我想要的方式运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T05:45:28.593

看来你想要的只能用非同凡响的新型物件来完成。请参阅[https://stackoverflow.com/a/9059858/380231](https://stackoverflow.com/a/9059858/380231)、[此博客文章](http://kos.gd/2012/12/special-member-lookup-in-python/)和[文档](http://docs.python.org/2/reference/datamodel.html#special-method-lookup-for-new-style-classes)。

基本上，“特殊”功能缩短了对新型对象的查找过程。

# ios - 使用 CFCreateArray 创建的 CFArray 在访问时崩溃

> ID：14765870
> 
> 赞同：0
> 
> 时间：2013-02-08T04:48:01.820
> 
> 标签：ios, xcode, macos, core-foundation, exc-bad-access

```
unsigned char _MyString[] = {0xda, 0xe5, 0x18, ..., 0x00};

CFArrayRef array = CFArrayCreate(NULL,
                               (const void**) CFStringCreateWithBytes(NULL,
                                                                      _MyString,
                                                                      sizeof(_MyString),
                                                                      kCFStringEncodingASCII,
                                                                      FALSE),
                               1,
                               &kCFTypeArrayCallBacks);

CFShow(arr); // <-- EXEC_BAD_ACCESS ERROR 
```

调试器显示其失败

> CoreFoundation`CFGetTypeID:

调试器的输出

> __NSCFString
> 
> (lldb)

我不确定内存错误在哪里，我认为这一定是由于在 CFArrayCreate() 中传递了字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:51:04.513

将 CFStringCreateWithBytes 的返回值转换为 const void ** 是不正确的，这就是它崩溃的原因。它不是指向指针的指针，而是指向 CFString 的指针。

# javascript - 是否可以根据浏览器控制台日志触发 jQuery 事件？

> ID：14765873
> 
> 赞同：1
> 
> 时间：2013-02-08T04:48:27.027
> 
> 标签：javascript

当曲目在 iframe 中播放完毕时，Firefox 和 Chrome 中会出现以下消息。

```
11:12:13.403: changestate PLAYING -> COMPLETED yahoo-dom-event_4491e143881eeb195e4dba0566c8d496.js:985 
```

记录此消息（“PLAYING -> COMPLETED”）时是否可以触发 jquery 事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:21:45.197

不幸的是，在这种情况下，答案是否定的。出于安全原因，链接到与主窗口不同的域的 iframe 会被沙盒化。除非已明确设置它们，否则您无法将信息输入/输出它们。由于这些相同的安全限制，评论中链接的答案将不起作用。

在这种情况下，将由 BandCamp 以外部可用的方式公开播放/完成的信息，而他们似乎没有。

# image-processing - 如何将相对大小的标签附加到图像？

> ID：14765874
> 
> 赞同：0
> 
> 时间：2013-02-08T04:48:30.310
> 
> 标签：image-processing, imagemagick, image-manipulation

我有大量不同尺寸的图像，从 16x16 到 512x512。

我想为这些图像中的每一个附加一个黑色标签，上面写着“演示版”。

由于图像的大小差异很大，我希望标签大小与图像相关。我不想让图像更宽。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:29:17.003

这是一个 php 版本，因为这是我使用的 - 你也没有说你正在使用什么平台等。这将在图像下方添加一个标签，因为我认为这是您想要的 - 如果这是您想要的第二个示例，您可以改为添加水印。

![在此处输入图像描述](../Images/9c067fb0920c5bfa5623b6cb96d33269.png)

```
exec("montage -geometry +0+0 -background skyblue -label \"Sunflower\" original.jpg output.jpg"); 
```

带有浮雕文字的水印

![在此处输入图像描述](../Images/bcb45d320bb7dca1687c422217f18a50.png)

```
// Get the size of the image 
$size = getimagesize("$input14"); 

// Size for watermark - scaled to fit the image 
$width = $size[0]*.9; 
$height = $size[0]*.25; 

// Create an image with the text
$cmd = "-size {$width}x{$height} -background none -font Utopia-bold ". 
" -fill white -gravity center caption:\"Copyright of Rubblewebs\" ". 
" -shade 240x40"; 

exec("convert $cmd font.png "); 

// Add the text image to the photo 
exec("composite -watermark 30% -gravity south font.png $input14 embossed.png"); 

// Delete the tempory image 
unlink ('font.png'); 
```

# ios6 - AVAssetWriter finishWritingWithCompletionHandler 错误未知错误

> ID：14765875
> 
> 赞同：11
> 
> 时间：2013-02-08T04:48:33.327
> 
> 标签：ios6, avfoundation, grand-central-dispatch, avassetwriter

我已经为这个问题苦苦挣扎了一个多星期。我希望有人看到我做错了什么。我正在尝试使用 finishWritingWithCompletionHandler: 方法，因为现在不推荐使用 finishWriting 方法。使用新方法我没有取得任何成功。它失败并出现未知错误 -11800。我可以使用不推荐使用的方法很好地保存我的 MOV 文件，但是当我使用新方法创建等效文件时，它每次都会失败。

这是我的原始代码：

```
dispatch_async(movieWritingQueue, ^{
    if ([self.assetWriter finishWriting]) {
        self.assetWriterAudioIn = nil;
        self.assetWriterVideoIn = nil;
        //[assetWriter release];  ARC will not allow this line.
        self.assetWriter = nil;

        self.readyToRecordVideo = NO;
        self.readyToRecordAudio = NO;

        [self.delegate movieReadyToSaveForMovieProcessor:self];
    }
    else {
        [self displayError:[assetWriter error]];
        dispatch_async(dispatch_get_main_queue(), ^{
            [self resumeCaptureSession];
        });
    }
}]; 
```

我的新方法如下：

```
dispatch_async(movieWritingQueue, ^{
    [self.assetWriter finishWritingWithCompletionHandler:^{
        if (self.assetWriter.status != AVAssetWriterStatusFailed && self.assetWriter.status == AVAssetWriterStatusCompleted) {
            self.assetWriterAudioIn = nil;
            self.assetWriterVideoIn = nil;
            self.assetWriter = nil;

            self.readyToRecordAudio = NO;
            self.readyToRecordVideo = NO;

            [self.delegate movieReadyToSaveForMovieProcessor:self];
        } else {
            [self displayError:self.assetWriter.error];
            dispatch_async(dispatch_get_main_queue(), ^{
                [self resumeCaptureSession];
            });
        }
    }];
}]; 
```

我不认为我错过了任何东西，而且我没有从它抛出的错误中得到太多。任何帮助将不胜感激。

谢谢，罗伯

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-11T03:55:48.213

我终于找到了答案。`finishWritingWithCompletionHandler:`失败是因为我没有在对象`markAsFinished`上运行。`AVAssetWriterInput`一旦我在**之前**运行这些`markAsFinished`方法，该过程就能够完成而没有错误。**`finishWritingWithCompletionHandler:`**

 *** * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-20T05:39:46.357

我有类似的问题，发现处理程序没有被调用，因为我`AVAssetWriter`在调用后立即释放了`finishWritingWithCompletionHandler:`，例如

```
[self.assetWriter finishWritingWithCompletionHandler:^{
    ...
}]

self.assetWriter = nil; 
```

要修复它，只需将释放行移动到完成处理程序内部：

```
[self.assetWriter finishWritingWithCompletionHandler:^{
    ...
    self.assetWriter = nil;
}] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-30T13:29:29.667

答案是让我删除 call `finishWritingWithCompletionHandler`。显然该函数已经被调用过一次。**

# vim - 如何在 vim 之外获取 Vim 运行时路径

> ID：14765879
> 
> 赞同：0
> 
> 时间：2013-02-08T04:48:50.460
> 
> 标签：vim

我想制作一个脚本，它可以快速替换 unix 类型机器上的 .vimrc 文件。问题是在我正在工作的机器上，vim 不在 home 中，它不会在 home 文件夹中搜索 vimrc。

基本上，终端命令模拟什么是 Vim 中的 :echo $VIMRUNTIME。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-16T05:42:48.593

```
vim --cmd 'echo $VIMRUNTIME|q' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:59:52.620

根据[VIM 对 vimrc 的帮助](http://vimdoc.sourceforge.net/htmldoc/starting.html#.vimrc)：

```
Four places are searched for initializations.  The first that exists
is used, the others are ignored.  The $MYVIMRC environment variable is
set to the file that was first found, unless $MYVIMRC was already set
and when using VIMINIT.
-  The environment variable VIMINIT (see also |compatible-default|) (*)
   The value of $VIMINIT is used as an Ex command line.
-  The user vimrc file(s):
        "$HOME/.vimrc"  (for Unix and OS/2) (*)
        "s:.vimrc"      (for Amiga) (*)
        "home:.vimrc"   (for Amiga) (*)
        "$VIM/.vimrc"   (for OS/2 and Amiga) (*)
        "$HOME/_vimrc"  (for MS-DOS and Win32) (*)
        "$VIM/_vimrc"   (for MS-DOS and Win32) (*)
    Note: For Unix, OS/2 and Amiga, when ".vimrc" does not exist,
    "_vimrc" is also tried, in case an MS-DOS compatible file
    system is used.  For MS-DOS and Win32 ".vimrc" is checked
    after "_vimrc", in case long file names are used.
    Note: For MS-DOS and Win32, "$HOME" is checked first.  If no
    "_vimrc" or ".vimrc" is found there, "$VIM" is tried.
    See |$VIM| for when $VIM is not set.
-  The environment variable EXINIT.
   The value of $EXINIT is used as an Ex command line.
-  The user exrc file(s).  Same as for the user vimrc file, but with
   "vimrc" replaced by "exrc".  But only one of ".exrc" and "_exrc" is
   used, depending on the system.  And without the (*)! 
```

因此，您系统上的每个用户都可以将 .vimrc 隐藏在不同的位置，甚至可能以不同的方式命名。

你真的想剥夺用户随意定制 VIM 的自由吗？

# c - 在 C 中有效地“包装”常量字符串

> ID：14765880
> 
> 赞同：0
> 
> 时间：2013-02-08T04:48:51.333
> 
> 标签：c

我目前正在用 C 编写一个解析器，我在设计它时需要一个可变字符串“类”（一组对表示实例的不透明结构进行操作的函数），我称之为`my_string`. string 类的实例只不过是包装 a 的结构`char *`以及一些元数据。

但是，使用常量字符串会出现问题。例如，我有几个返回`my_string *`指针的方法，但有时我想返回一个常量字符串。考虑这个人为的伪代码：

```
my_string *element_get_data(my_element *el)
{
    if (element_has_character_data(el))
        return element_get_character_data(el); /* returns a (my_string *) */
    else
        return my_string_constant("#data");    /* ditto */
} 
```

…在某些情况下，我想获取预构建的`my_string`实例，但在其他情况下，我只想返回包装在`my_string`结构中的字符串“#data”。

这段代码的问题是`my_string`每次`element_get_data(...)`调用它都会创建一个新的（堆分配的）实例。C 常量字符串具有很好的语义，因为它们在程序的 DATA 部分中静态分配，因此每次遇到常量字符串时，该字符串的地址总是相同的。

因此，有几个不同`my_string`的实例都指向完全相同的实例似乎很愚蠢`char *`。什么是消除重复数据的有效方法？我应该保留`const char * -> my_string *`映射的哈希表吗？或者有没有办法使用与 C 常量字符串类似的语义？在 Mac 上，Core Foundation 设法使用`CFSTR(...)`宏来做到这一点。

**对我来说，理想的解决方案**是以某种方式制作一个类似的宏`my_string_constant(...)`，将`my_string`结构存储在程序的 DATA 部分中，因此它也可以是常量。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:48:51.333

当我在写这个问题时（或者更确切地说，几乎是在我完成之后），我以[GNUStep 对 Core Foundation 的 CFSTR() 宏的实现](http://lists.gnu.org/archive/html/gnustep-dev/2010-01/msg00054.html)的形式找到了我的问题的答案。我的类似实现如下所示：

```
#define MY_STR(str) ({\
    static struct { const char *buffer; my_bool shouldFree; my_bool mutable; my_bool constant; } s = {NULL, MY_FALSE, MY_FALSE, MY_TRUE};\
    s.buffer = str;\
    (my_string *)&s;\
}) 
```

这样做的原因是代码块在编译期间被内联，这意味着它创建了一个相对于本地范围的静态分配的结构。`MY_STR("Hello, world!")`因此，如果（例如）多次调用包含的函数，将始终返回相同的静态分配结构，从而产生我们想要的行为。

这个概念可以很容易地扩展到字符串之外，允许您轻松创建自己的静态分配对象类型。整洁的！

# python - Python中的图像平滑

> ID：14765891
> 
> 赞同：15
> 
> 时间：2013-02-08T04:50:00.143
> 
> 标签：python, numpy, image-processing, smoothing

我想尝试编写一个简单的函数来平滑输入的图像。我试图使用 Image 和 numpy 库来做到这一点。我在想使用卷积掩码将是解决这个问题的一种方法，我知道 numpy 内置了一个卷积函数。

如何使用[numpy.convolve](http://docs.scipy.org/doc/numpy/reference/generated/numpy.convolve.html)平滑图像？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-08T05:37:21.213

好问题！ **tcaswell**在这里的帖子是一个很好的建议，但是您不会通过这种方式学到很多东西，因为 scipy 正在为您完成所有工作！由于您的问题说您想*尝试编写函数*，我将向您展示一种更粗略和基本的手动方式，希望您能更好地理解卷积等背后的数学，然后您可以改进用你自己的想法和努力吧！

注意：使用不同形状/大小的内核，您会得到不同的结果，高斯是常用的方法，但您可以尝试其他一些有趣的方法（余弦、三角形等！）。这个是我现场编的，我觉得是一种金字塔形的。

```
import scipy.signal
import numpy as np
import matplotlib.pyplot as plt

im = plt.imread('example.jpg')
im /= 255\.   # normalise to 0-1, it's easier to work in float space

# make some kind of kernel, there are many ways to do this...
t = 1 - np.abs(np.linspace(-1, 1, 21))
kernel = t.reshape(21, 1) * t.reshape(1, 21)
kernel /= kernel.sum()   # kernel should sum to 1!  :) 

# convolve 2d the kernel with each channel
r = scipy.signal.convolve2d(im[:,:,0], kernel, mode='same')
g = scipy.signal.convolve2d(im[:,:,1], kernel, mode='same')
b = scipy.signal.convolve2d(im[:,:,2], kernel, mode='same')

# stack the channels back into a 8-bit colour depth image and plot it
im_out = np.dstack([r, g, b])
im_out = (im_out * 255).astype(np.uint8) 

plt.subplot(2,1,1)
plt.imshow(im)
plt.subplot(2,1,2)
plt.imshow(im_out)
plt.show() 
```

![在此处输入图像描述](../Images/13c93daedfd9935bc862ee70a5a51267.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-08T05:04:29.613

你想看看[`ndimage`](http://docs.scipy.org/doc/scipy/reference/ndimage.html)，这是一个模块`scipy`。它有许多过滤器都设置为函数，以及用于卷积任意内核的漂亮包装器。

例如，

```
img_gaus = ndimage.filters.gaussian_filter(img, 2, mode='nearest') 
```

将您的图像与 sigma 为 2 的高斯卷积。

如果你想卷积一个任意内核，比如说一个交叉

```
k = np.array([[0, 1, 0],
              [1, 1, 1],
              [0, 1, 0]])

img2 = ndimage.convolve(img, k, mode='constant') 
```

这些函数也适用于更高维度，因此您可以使用几乎相同的代码（只是扩大内核的维度）来平滑更高维度的数据。

和参数控制卷积如何处理图像边缘的像素（对于边缘上的像素，内核需要查看的一半区域不存在，因此您需要选择一些东西来填充`mode`图像`cval`和）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T05:23:56.533

如果你不想使用 scipy，你有三个选择：

1）您可以将卷积定理与傅里叶变换结合使用，因为 numpy 具有 2D FFT。

2）您可以使用可分离的内核，然后您可以在展平的阵列上进行两个一维卷积，一个在 x 方向，另一个在 y 方向（拉开转置），这将得到与 2D 相同的结果卷积。

3）如果你有一个小内核，比如 3x3，只需将卷积写成乘法和求和就很容易了。这听起来很麻烦，但还不错。

如果你确实想使用 scipy，你可以使用 ngimage，就像 tcaswell 建议的那样。scipy 也有 convolve2d。

# ios6 - 如何使用 ios 中的 libyuv 库将 kCVPixelFormatType_420YpCbCr8BiPlanarFullRange 缓冲区转换为 YUV420？

> ID：14765892
> 
> 赞同：1
> 
> 时间：2013-02-08T04:50:01.197
> 
> 标签：ios6, avfoundation, libyuv

我已经使用 AVFoundation 捕获了视频。我已经设置（视频设置）并进入 outputsamplebuffer kCVPixelFormatType_420YpCbCr8BiPlanarFullRange 格式。但我需要 YUV420 格式进行进一步处理。

为此，我使用 libyuv 框架。

```
LIBYUV_API
int NV12ToI420(const uint8* src_y, int src_stride_y,
           const uint8* src_uv, int src_stride_uv,
           uint8* dst_y, int dst_stride_y,
           uint8* dst_u, int dst_stride_u,
           uint8* dst_v, int dst_stride_v,
           int width, int height);

 libyuv::NV12ToI420(src_yplane, inWidth ,
                   src_uvplane, inWidth,
                   dst_yplane, inWidth,
                   dst_vplane, inWidth / 2,
                   dst_uplane, inWidth / 2,
                   inWidth,  inHeight); 
```

但我得到的输出缓冲区是全绿色的？我在这个过程中犯了任何错误，请帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T14:56:50.277

这是我从 AVCaptureSession(kCVPixelFormatType_420YpCbCr8BiPlanarFullRange) 获得原始视频帧后，在我的 captureOutput 中的 iOS 上执行此操作的方法：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
{

    CVImageBufferRef videoFrame = CMSampleBufferGetImageBuffer(sampleBuffer);

    CFRetain(sampleBuffer);

    CVPixelBufferLockBaseAddress(videoFrame, 0);
    size_t _width = CVPixelBufferGetWidth(videoFrame);
    size_t _height = CVPixelBufferGetHeight(videoFrame);

    const uint8* plane1 = (uint8*)CVPixelBufferGetBaseAddressOfPlane(videoFrame,0);
    const uint8* plane2 = (uint8*)CVPixelBufferGetBaseAddressOfPlane(videoFrame,1);
    size_t plane1_stride = CVPixelBufferGetBytesPerRowOfPlane (videoFrame, 0);
    size_t plane2_stride = CVPixelBufferGetBytesPerRowOfPlane (videoFrame, 1);

    size_t plane1_size = plane1_stride * CVPixelBufferGetHeightOfPlane(videoFrame, 0);
    size_t plane2_size = CVPixelBufferGetBytesPerRowOfPlane (videoFrame, 1) * CVPixelBufferGetHeightOfPlane(videoFrame, 1);

    size_t frame_size = plane1_size + plane2_size;

    uint8* buffer = new uint8[ frame_size ];
    uint8* dst_u = buffer + plane1_size;
    uint8* dst_v = dst_u + plane1_size/4;

    // Let libyuv convert
    libyuv::NV12ToI420(/*const uint8* src_y=*/plane1, /*int src_stride_y=*/plane1_stride,
                /*const uint8* src_uv=*/plane2, /*int src_stride_uv=*/plane2_stride,
                   /*uint8* dst_y=*/buffer, /*int dst_stride_y=*/plane1_stride,
                   /*uint8* dst_u=*/dst_u, /*int dst_stride_u=*/plane2_stride/2,
                   /*uint8* dst_v=*/dst_v, /*int dst_stride_v=*/plane2_stride/2,
                   _width, _height);

    CVPixelBufferUnlockBaseAddress(videoFrame, 0);
    CFRelease( sampleBuffer)

    // TODO: call your method here with 'buffer' variable. note that you need to deallocated the buffer after using it
  } 
```

为了清楚起见，我使代码更具描述性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:18:00.570

您需要将数据转换为 I420，我也在处理相机，但在 Android 上。我认为它应该在 iOS 上类似。Android raw camera是NV21或者NV16格式，我从NV21或者NV16转换成YV12，I420和YV12差不多：

```
BYTE m_y[BIG_VIDEO_CX * BIG_VIDEO_CY], 
     m_u[(BIG_VIDEO_CX/2) * (BIG_VIDEO_CY/2)],
     m_v[(BIG_VIDEO_CX/2) * (BIG_VIDEO_CY/2)];

    void NV21_TO_YV12(BYTE *data)
{
    int width = BIG_VIDEO_CX;
    int height = BIG_VIDEO_CY;
        m_y2=data;
    data=&data[width*height];
    for (uint32_t i=0; i<(width/2)*(height/2); ++i)
    {
        m_v[i]=*data;
        m_u[i]=*(data+1);
        data+=2;
    }
}
void NV16_TO_YV12(BYTE *data)
{
    int width = BIG_VIDEO_CX;
    int height = BIG_VIDEO_CY;
    m_y2=data;
    const BYTE* src_uv = (const BYTE*)&data[width*height];
    BYTE* dst_u = m_u;
    BYTE* dst_v = m_v;
    for (uint32_t y=0; y<height/2; ++y)
    {
        const BYTE* src_uv2 = src_uv + width;
        for (uint32_t x=0; x<width/2; ++x)
        {
            dst_u[x]=(src_uv[0]+src_uv2[0]+1)>>1;
            dst_v[x]=(src_uv[1]+src_uv2[1]+1)>>1;
            src_uv+=2;
            src_uv2+=2;
        }
        src_uv=src_uv2;
        dst_u+=width/2;
        dst_v+=width/2;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T03:42:12.883

看起来不错。确保您的 src_uvplane 指向 src_yplane + inWidth * inHeight

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T06:14:04.230

Android 是 NV21，libyuv 支持 Arm 和 Intel。如果需要定向，它还可以旋转 90、180 或 270 作为转换的一部分。Arm 优化版本比 C 快约 2 倍

C
NV12ToI420_Opt (782 毫秒)
NV21ToI420_Opt (764 毫秒)

Arm（霓虹灯优化）
NV12ToI420_Opt（398 毫秒）
NV21ToI420_Opt（381 毫秒）

好奇你在 Android 上使用 NV16。我希望 NV61 与 NV21 保持一致。您的代码看起来是正确的，但可以使用 vrhadd.u8 很好地优化为 Neon。如果您想查看，请提交 libyuv 问题。[https://code.google.com/p/libyuv/issues/list](https://code.google.com/p/libyuv/issues/list)

# android - android中的MapView是全黑的

> ID：14765893
> 
> 赞同：0
> 
> 时间：2013-02-08T04:50:01.177
> 
> 标签：android

我在我的应用程序中使用 mapView。在我的模拟器上，我得到的是黑屏而不是这张地图。我已经添加了权限并添加了`<uses-library android:name="com.google.android.maps"/>`标签。当我在模拟器上运行我的应用程序时，它显示黑屏而不是地图。

```
public class MainActivity extends MapActivity {

    MapView mv;
    MapController mc;
    GeoPoint mPoint;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mv = (MapView) findViewById(R.id.map);
        mv.setBuiltInZoomControls(true);
        mv.setSatellite(true);
        mc = mv.getController();
        mPoint = new GeoPoint(70, 30);
        mc.animateTo(mPoint);
        Bitmap bitmap = BitmapFactory.decodeResource(getResources(), android.R.drawable.sym_action_email);
        MarkerOverlay mo = new MarkerOverlay(bitmap);
        mv.getOverlays().add(mo);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
    class MarkerOverlay extends Overlay{
        Bitmap marker;
        public MarkerOverlay(Bitmap bitmap) {
            this.marker = bitmap;
        }
        @Override
        public void draw(Canvas canvas, MapView mapView, boolean shadow) {
            super.draw(canvas, mapView, shadow);
            Point p = new Point();
            mapView.getProjection().toPixels(mPoint, p);
            canvas.drawBitmap(marker, p.x, p.y,null);
        }
    }

} 
```

布局.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.google.android.maps.MapView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/map"
        android:apiKey="0N2w90XW-PeM2vP4D4yfM2CoLRfIF6nnZAr2Cqg" />

</LinearLayout> 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.overlays"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="5"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps"/>
        <activity
            android:name="com.example.overlays.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:26:20.227

好的。我认为我的项目出了点问题。我删除了我当前的项目并建立了一个新项目，它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:08:57.873

```
mc.setZoom(17); 
```

> 设置您的缩放级别，他们获得默认缩放级别 1.Refer 文章[https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/MapView](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/MapView)

# c++ - 如何在 Blackberry 10 中设置从 QML 到 CPP 的属性变量？

> ID：14765897
> 
> 赞同：0
> 
> 时间：2013-02-08T04:50:58.380
> 
> 标签：c++, qml, blackberry-10, blackberry-cascades

我参考[pullmybeard](https://github.com/blackberry/Cascades-Samples/blob/master/pullmybeard/assets/pullmybeard.qml)来处理拖放效果。

要以编程方式做某事，我会使用 cpp 而不是 QML 本身。

但是我在设置属性变量时遇到了问题。这是我的代码段：

```
Container *playerContainer = Container::create();
           playerContainer->setLayout(new AbsoluteLayout);
           playerContainer->setLayoutProperties(AbsoluteLayoutProperties::create().x(posX).y(posY));` 
```

我会为此设置一个变量以`playerContainer`存储 positionX 和 Y。像[pullmybeard](https://github.com/blackberry/Cascades-Samples/blob/master/pullmybeard/assets/pullmybeard.qml)一样，在 ImageView id:beard 中，它设置属性 real dy。因此，它可以用于 onTouch 处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:18:02.673

我认为您正在寻找一种将属性从 C++ 传递到 QML 的方法。
为此，您可以使用**setContextProperty("propertyName", property)**
您可以在那里查看如何实现它：http: [//developer.blackberry.com/cascades/documentation/dev/integrating_cpp_qml/](http://developer.blackberry.com/cascades/documentation/dev/integrating_cpp_qml/)

# jaxb - 如何解锁被 JAXB 的 unmarhsaller 锁定的文件

> ID：14765898
> 
> 赞同：6
> 
> 时间：2013-02-08T04:51:03.517
> 
> 标签：jaxb

我正在使用以下代码在 Windows 7 x64 上使用带有 Java 1.7.0_03 的 JAXB 解组 XML 文件：

```
 try (InputStream xsdStream = ConfigurationService.class.getClassLoader().getResourceAsStream(CONFIG_XSD_FILE_NAME)) {
            configFile = new File(configFilePath);
            if (configFile.exists()) {
                context = JAXBContext.newInstance(Config.class);
                Unmarshaller unMarshaller = context.createUnmarshaller();

                SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
                StreamSource xsdStreamSource = new StreamSource(xsdStream);
                Schema schema = sf.newSchema(xsdStreamSource);

                unMarshaller.setSchema(schema);
                Object xmlObject = Config.class.cast(unMarshaller.unmarshal(configFile));
                myConfig = (Config) xmlObject;
            } else {
                log.severe(configFile.getAbsolutePath() + " does not exist, can not parse configuration info from it.");
            }
  } 
```

调用此方法的代码随后会删除 XML 文件。

如果解组成功，XML 文件将正确删除。但是，如果上面的代码抛出异常，例如。SAXException，XML 文件无限期保持锁定，调用代码无法使用 File.delete() 将其删除。

在这种情况下，这感觉就像 JAXB 没有关闭资源/文件。以某种方式这样做是我的责任还是这是一个错误？

审查 Unmarshaller 的[javadoc](http://docs.oracle.com/javase/7/docs/api/)并没有对此有所了解，谷歌搜索这个问题揭示了这个 2008 年的老[问题](http://www.java.net/node/677902)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T11:12:19.400

**简短的回答**

您描述的行为听起来像是 JAXB 参考实现中的错误。您可以使用以下链接开票：

*   [http://java.net/jira/browse/JAXB/](http://java.net/jira/browse/JAXB/)

**解决问题**

`File`您可以从 a 解组`FileInputStream`并控制它在解组后自己正确关闭，而不是从 a解组。

* * *

**长答案**

我无法重现您所看到的问题。我在下面包含了我尝试过的内容。我在 Mac 上使用 JDK 1.7.0_07 x64。

**配置服务**

下面的大部分代码都是从您的问题中复制而来的。我添加了删除输入文件的调用，如果文件仍然存在则输出。

```
package forum14765898;

import java.io.*;

import javax.xml.XMLConstants;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import javax.xml.validation.*;

public class ConfigurationService {

    private static final String CONFIG_XSD_FILE_NAME = "forum14765898/schema.xsd";

    public static void main(String[] args) throws Exception {
        File configFile = null;
        String configFilePath = "src/forum14765898/input.xml";
        JAXBContext context;
        Config myConfig;

        try (InputStream xsdStream = ConfigurationService.class.getClassLoader().getResourceAsStream(CONFIG_XSD_FILE_NAME)) {
            configFile = new File(configFilePath);
            if (configFile.exists()) {
                context = JAXBContext.newInstance(Config.class);
                Unmarshaller unMarshaller = context.createUnmarshaller();

                SchemaFactory sf = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
                StreamSource xsdStreamSource = new StreamSource(xsdStream);
                Schema schema = sf.newSchema(xsdStreamSource);

                unMarshaller.setSchema(schema);
                Object xmlObject = Config.class.cast(unMarshaller.unmarshal(configFile));
                myConfig = (Config) xmlObject;
            } else {
                //log.severe(configFile.getAbsolutePath() + " does not exist, can not parse configuration info from it.");
            }
        } catch(Exception e) {
            e.printStackTrace(System.out);
        }

        configFile.delete();
        System.out.println(configFile.exists());

    }

} 
```

**架构.xsd**

下面是我正在使用的简单 XML 模式。

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema">
    <element name="config">
        <complexType>
            <sequence>
                <element name="bar" type="int"/>
            </sequence>
        </complexType>
    </element>
</schema> 
```

**输入.xml**

下面是 XML 输入。根据 XML 模式，该`bar`元素无效。当`Schema`在此文档上设置a 时，`Unmarshaller`将足以导致`Exception`在执行解组操作时抛出 an。

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <bar>INVALID</bar>
</config> 
```

**配置**

```
package forum14765898;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Config {

    public int bar;

} 
```

**输出**

下面是运行演示代码的输出。它显示了验证异常，在最后一行我们看到 XML 文件已被成功删除，因为它不再存在。

```
javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException; systemId: file:/Users/bdoughan/Scratch/src/forum14765898/input.xml; lineNumber: 3; columnNumber: 23; cvc-datatype-valid.1.2.1: 'INVALID' is not a valid value for 'integer'.]
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.createUnmarshalException(AbstractUnmarshallerImpl.java:335)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.createUnmarshalException(UnmarshallerImpl.java:512)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:209)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:175)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:157)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:162)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:171)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:189)
    at forum14765898.ConfigurationService.main(ConfigurationService.java:31)
Caused by: org.xml.sax.SAXParseException; systemId: file:/Users/bdoughan/Scratch/src/forum14765898/input.xml; lineNumber: 3; columnNumber: 23; cvc-datatype-valid.1.2.1: 'INVALID' is not a valid value for 'integer'.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:437)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:368)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:325)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:453)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3232)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.elementLocallyValidType(XMLSchemaValidator.java:3147)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processElementContent(XMLSchemaValidator.java:3057)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleEndElement(XMLSchemaValidator.java:2135)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.endElement(XMLSchemaValidator.java:854)
    at com.sun.org.apache.xerces.internal.jaxp.validation.ValidatorHandlerImpl.endElement(ValidatorHandlerImpl.java:579)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.ValidatingUnmarshaller.endElement(ValidatingUnmarshaller.java:91)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.endElement(SAXConnector.java:143)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:606)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1742)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2900)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:203)
    ... 6 more
false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-04T11:55:56.310

```
 public CashCountCompleted CashDeposit(String path) throws Exception {
      // TODO Auto-generated method stub
      CashCountCompleted cashCountCompleted = null;
      File file = null;
      FileInputStream inputStram = null;
      try {
            file = new File(path);
      inputStram = new FileInputStream(file);
      JAXBContext jaxbContext = JAXBContext.newInstance(CashCountCompleted.class);
      Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
      cashCountCompleted = (CashCountCompleted) jaxbUnmarshaller.unmarshal(inputStram);         
      }catch (JAXBException e) {
          //throw new...        
      } catch (FileNotFoundException e) {
           //throw new...
      }finally{         
            try{
                if(inputStram !=null){
                    inputStram.close();
                }
            }catch(Exception exception){
               //throw new...
            }                 
      }
      return cashCountCompleted;    
} 
```

# c++ - 调试程序列出用户选择的 emirp 数的数量（质数也反过来质数）

> ID：14765899
> 
> 赞同：0
> 
> 时间：2013-02-08T04:51:03.747
> 
> 标签：c++, compiler-errors, primes

这个程序是为一堂课。我需要使用两个功能。这些是列出的 3 个错误：

1.  错误 C2601：“isPrime”：本地函数定义非法
2.  错误 C2601: 'reverse' : 局部函数定义是非法的
3.  错误 C1075：在 e 的左大括号“{”之前找到文件结尾。

任何其他帮助和提示也非常感谢。谢谢！

```
/* 
* 2/07/2013
* Computer Science II
* Homework #1
*/

//Purpose: Display first 'n' (user chosen) number if emirps to the console, five per line.
//Note: An "emirp" is a prime number that is also prime when reversed. 

#include <iostream>
using namespace std;
int isPrime(int value); //Prototyle for "prime number function"
int reverse (int value2); //Prototype for "emirp function"

int main()
{

//Ask the user for a positive number

    enter code here`enter code here`cout << "Please enter a positive number: ";
    int n;
    cin >> n;

    //Reject negative value input
    if ( n < 1) 
    {
    cout << "INVALID NUMBER \n"; 
    }
    else

    //Calculate all emirps up to 'n'. 
    for (int test = 0; test < n; test++)
    {
    int number = 2;

    if (isPrime(number))
    {
    cout << "\n" << reverse(number) << "\t\t\t";
    }
    }

    return 0;
    }

    int isPrime(int value)
    {
    //If value is prime, the remainder (count) will be zero twice--for 1 and itself. 
    int divisor = 1;
    int count = 0;
    int prime = 0;
    if (value % divisor == 0)
    {
    count++;
    ++divisor;
    }
    if (count = 2)
    {
    int prime = value; //store prime value in new variable
    }

    return prime;
    }

    int reverse(int value2)
    {
    //reverse the number
    value2*=10;
    value2 = value2 %10;
    value2/=10;

    //same procedure as prime function
    int divisor2 = 1;   
    int count2 = 0;
    int emirp = 0;
    if (value2 % divisor2 == 0)
    {
    {
    count2++;
    ++divisor2;
    }

    if (count2 = 2)
    {
    int emirp = value2;
    }
    }
    return emirp;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:55:23.077

Problem with you syntax in `reverse` function :

```
//same procedure as prime function
int divisor2 = 1;   
int count2 = 0;
int emirp = 0;
if (value2 % divisor2 == 0)
{//if
{// ? why this 
count2++;
++divisor2;
}//if 
```

# android - onActivityResult() 当应用程序在后台被杀死时

> ID：14765906
> 
> 赞同：0
> 
> 时间：2013-02-08T04:51:47.437
> 
> 标签：android, android-intent, background, android-activity, kill

当我运行应用程序时，活动因内存问题而被终止。

我在我的活动中调用 startActivityForResult() 方法来启动相机。当调用活动在后台被杀死时，它显示出异常行为。有时，意图在输入 onRestoreInstance() 后返回到 onActivityResult() 并返回结果。但在某些其他情况下，它在输入 onRestoreInstance() 后没有输入 onActivityResult()。

谁能解释一下为什么会发生这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:21:22.460

您可以使用此代码运行您的新活动

```
 Intent i = new Intent(this, DatabaseEditor.class);
        //You may pass value on another activity
        i.putExtra("xCoordinate", String.valueOf(o));
        i.putExtra("yCoordinate", String.valueOf(p));
        i.putExtra("scale", scaleTest);

        startActivity(i); 
```

然后覆盖 onActivityResult

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (requestCode == 1) {

        if (resultCode == RESULT_OK) {

            // Write your code on result ok return
        }
        if (resultCode == RESULT_CANCELED) {
            // Write your code on no result return
        }
    }
} 
```

在您的新活动中，您可以使用此代码获取传递的值

```
 Bundle b = getIntent().getExtras();
    if (b != null) {
        editTextX.setText(String.valueOf(b.getString("xCoordinate")));
        editTextY.setText(String.valueOf(b.getString("yCoordinate")));
        editTextScale.setText(Float.toString(b.getFloat("scale")));
    } 
```

如果您想返回上一个活动，只需调用 finish();

```
 //if you want to pass a value from this activity to you mainActivity use this  
            Intent returnIntent = new Intent(
        "com.example.activity.MainActivity");
            returnIntent.putExtra("id", streetID.intValue());
            setResult(RESULT_OK, returnIntent);
            finish(); 
```

由于您设置了使用的 setResult(RESULT_OK, returnIntent); 然后你的代码

```
 if (resultCode == RESULT_OK) {

            // Write your code on result ok return
        } 
```

被处决..干杯！！！:D

# java - 如何在 Java 中创建数组的简单图形显示？

> ID：14765909
> 
> 赞同：1
> 
> 时间：2013-02-08T04:52:01.013
> 
> 标签：java, arrays, 2d, graphic

在过去的几天里，我用 Java 编写了一个（拼凑在一起的）文本 RPG 游戏。世界中的定位几乎由一个简单的 100x100 2D 字符串数组控制。然后，当玩家真正来到网格时，我将字符串转换为实际对象。

我的想法是有一个图形显示来显示这个 100x100 网格，网格的每个部分都有一个与数组中的内容相对应的图像。

例如，如果 block[10][15] 处的字符串是“rock”，则第 10 行第 15 列的网格图形显示部分将显示岩石的图片。

理想情况下，每次我在 do-while 循环中循环时，此图形都会刷新。奇怪的是，我想到的东西看起来与早期的口袋妖怪游戏非常相似。

如果我的描述措辞不当或我的问题太模棱两可，我深表歉意。我的计算机科学课程只学了半个学期的java，所以我的知识仅限于我们一个学期所学的基础知识。我确实喜欢在课外从事各种项目，比如我（自豪地）编写的文字象棋游戏。我更喜欢从头开始创建所有东西，这样我就可以在使用各种库之前学习基础知识。

有人可以为我正在寻找的东西指明正确的方向或提供更好的方法来完成这个展示吗？

非常感谢您提前。请让我知道对我的代码的引用是否能更好地帮助回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:56:09.067

根据我的个人经验，处理此类任务最容易使用的是[Processing](http://processing.org/)，它是一个轻量级框架，能够提供简单的 API 来绘制事物。

有[参考资料](http://processing.org/reference/)和许多[教程](http://processing.org/learning/)，因此即使您不是专家，上手也不难。

作为一个侧节点：你为什么使用字符串来存储各种块？你能用更好的东西[`enum`](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:56:08.987

首先，您可以使用枚举而不是上面杰克提到的字符串。例如

私有枚举对象{ Rock(1),Coin(8),Med(45)...等等 }

在您的数组中，您可以将这些对象存储为数字而不是字符串。

例如：

```
 boolean stopFlag=false;    
do{  
  //check each element of your world array with the enum and draw it  
  for(int i=0;i<yourObjectsArray.length;i++)
   {
      for(int j=0;j<yourObjectsArray[i].length;j++){
        switch(yourObjectsArray[i][j])
        {
          case Objects.Rock: drawRock(i,j);
                             break;
          case Objects.Coin: drawCoin(i,j);
                             break;
          //and so on....
        }
     }
   }
  //you can also put this into a separate function as drawWorld() and pass the objects.

//Key press checking logic here. If user presses exit key [esc] then you set the stopFlag  as true
  if(keypress==KEY_ESC){ stopFlag=true;}  
}while(!stopFlag); 
```

画石的一个例子：

```
private void drawRock(int i,int j){
      //i and j are the cols and row values so you need to resolve them to coordinates.
      //I am assuming u have a 800*600 screen and you mentioned that your world is 100x100 array. Then each of your object is 8*6 units in size so
     xCoord=i*8;
     yCoord=j*6; 
        //So if you have to draw a rock on [10][15] it will resolve as
        //xCoord=10*8-> 80
        //yCoord=15*6-> 90  so it will draw your rock in (80,90) on the screen

//Now you can either open the rock image from your disk now or u maintain one instance of rock at the beginning of the program so that you can use the same image later rather than opening it everytime you encounter a new Rock object in your array.For now I will open it here.

   String path = "C:\\YourGameDirectory\\rock.jpg";
    URL url = new File(path).toURI().toURL();
    BufferedImage rockImg = ImageIO.read(url);

   //draw it to the screen now if you have the graphics instance.
    yourUIPanel.getGraphics().drawImage(rockImg,xCoord,yCoord,yourUIPanel);

  // You may find many resources that teach you how to draw an image on the screen in         Java. You may repeat the same for all the objects.

 } 
```

我希望以上代码对您有所帮助。如果没有，那是我的坏事。

您可以尝试[本](http://www.youtube.com/watch?v=86sDrOcNGUA "优酷系列")教程系列以开始使用。虽然它在 C 中，但它的概念可以帮助你实现上面提到的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:11:38.603

您可能想查看我的旧 roguelike 游戏 Tyrant 的源代码：

*   [https://github.com/mikera/tyrant](https://github.com/mikera/tyrant)

关键思想：

*   有一个`Map`类负责存储表示地图的数据。在 Tyrant 中，`Map`封装了地形和对象在地图上的存储。
*   有一个`MapPanel`类`Map`在 GUI 中显示。这与地图本身是分开的——将 GUI 与核心引擎数据分开通常是个好主意。
*   有一个`Thing`类表示地图上的对象。这包括从怪物、物品、树木和烟雾到玩家角色本身的一切。基本上任何不是地形的东西。

至于刷新，其工作方式是 MapPanel 根据需要重新绘制自身，查看地图的内容。查看`MapPanel.paint(Graphics g)`它调用的各种方法。

# android - 找不到从方法 XXX 引用的类 XXX。

> ID：14765910
> 
> 赞同：30
> 
> 时间：2013-02-08T04:52:15.320
> 
> 标签：android, libgdx

我正在开发一个 libGDX 项目，我有一个名为 CheerVArachnids 的类，它有另一个内联类，它是一个事件侦听器。当我在桌面上运行这个项目时，它工作正常。但是当我在我的 Android 设备上运行时，它找不到该内联类，并且我收到以下错误：

```
Could not find class 'com.bbj.cva.CheerVArachnids$PlaceUnitListener', referenced from method com.bbj.cva.CheerVArachnids.<init> 
```

以下是我课堂上的重要部分：

```
package com.bbj.cva;

public class CheerVArachnids implements ApplicationListener {

    class PlaceUnitListener implements EventSubscriber<PlaceUnitEvent> {

        @Override
        public void onEvent(PlaceUnitEvent event) 
        {   
            //
        }
    }

    public CheerVArachnids() {

        EventBus.subscribe(PlaceUnitEvent.class, new PlaceUnitListener());
        EventBus.subscribe(RemoveScreenObjectEvent.class,
                new RemoveScreenObjectListener());
    }
} 
```

任何想法为什么在Android上，在运行时它找不到那个内联类？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-08T10:19:25.527

由于某些 ADT 版本，您必须设置也应该导出哪些库/项目。

Project-Propiertes -> Java Build Path -> Order and Export -> 检查您正在使用的源代码和其他库。

为您的核心项目和 Android 项目执行这些导出设置。

然后它应该在Android上正常工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-30T11:34:10.940

就我而言，一切正常，直到我为 SDK 和 Eclipse 安装了新的更新。

我收到一个错误：“找不到课程...”

我在另一个 stackoverflow 站点中找到了解决方案。

> 使用外部 jar（在我的情况下为 openCSV）时我遇到了类似的问题。我遇到问题的原因是由于 ADT 17（或更高版本）的变化。为了解决这个问题，我需要做的是在 Eclipse 中转到 Properties -> Java build path -> Order and export。标记我的罐子。将 jar 移到列表顶部。解决方案在[以下页面](https://stackoverflow.com/questions/10005206/twitter4j-androidruntime446-java-lang-noclassdeffounderror-twitter4j-http)中找到，该页面 引用了一篇非常好的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-28T08:44:20.367

首先你应该：导入 XXX(Class).java，如果你添加了外部库 jar 文件，将它们导入到 LIB 文件夹中。之后：右键单击您的项目-> 属性-> Java 构建路径-> 订购和导出（选项卡）-> 选择全部-> 按确定-> 清理您的项目。

希望这能解决这个问题

# android - 如何将过滤器应用于customlistview

> ID：14765911
> 
> 赞同：0
> 
> 时间：2013-02-08T04:52:20.327
> 
> 标签：android, search, filter, custom-adapter

我正在为我的列表视图使用自定义适配器，并且我想应用过滤器从列表中搜索特定项目怎么做？我知道如何为扩展 ArrayAdapter 的适配器执行此操作，但在我的情况下，它是 simplesectionadapter。我在列表视图上方有一个 editText，来自我想要搜索项目的 edittext 中输入的文本。

```
Collections.sort(contents, new Comparator<CategoryPojo>() {
            @Override
            public int compare(CategoryPojo s1, CategoryPojo s2) {
                return s1.getCategoryName().compareToIgnoreCase(
                        s2.getCategoryName());
            }
        });

        final CategoryAdapter adapter = new CategoryAdapter(this,
                android.R.layout.simple_list_item_1, contents);

        Sectionizer<CategoryPojo> alphabetSectionizer = new Sectionizer<CategoryPojo>() {

            @Override
            public String getSectionTitleForItem(CategoryPojo instance) {
                return instance.getCategoryName().substring(0, 1);
            }
        };

        final SimpleSectionAdapter<CategoryPojo> sectionAdapter = new SimpleSectionAdapter<CategoryPojo>(
                this, adapter, R.layout.section_header, R.id.title,
                alphabetSectionizer);

        listView.setFastScrollEnabled(true);
        listView.setTextFilterEnabled(true);
        listView.setAdapter(sectionAdapter); 
```

这是简单的sectionadapter

```
public class SimpleSectionAdapter<T> extends BaseAdapter implements Filterable{
    static final boolean DEBUG = false;
    static final String TAG = SimpleSectionAdapter.class.getSimpleName();

    // Constants
    private static final int VIEW_TYPE_SECTION_HEADER = 0;

    // Attributes
    private Context mContext;
    private BaseAdapter mListAdapter;
    private int mSectionHeaderLayoutId;
    private int mSectionTitleTextViewId;
    private Sectionizer<T> mSectionizer;
    private LinkedHashMap<String, Integer> mSections;
    AlphabetIndexer alphaIndexer;
    private Filter filter;

    /**
     * Constructs a {@linkplain SimpleSectionAdapter}.
     * 
     * @param context The context for this adapter.
     * @param listAdapter A {@link ListAdapter} that has to be sectioned.
     * @param sectionHeaderLayoutId Layout Id of the layout that is to be used for the header. 
     * @param sectionTitleTextViewId Id of a TextView present in the section header layout.
     * @param sectionizer Sectionizer for sectioning the {@link ListView}.
     */
    public SimpleSectionAdapter(Context context, BaseAdapter listAdapter, 
            int sectionHeaderLayoutId, int sectionTitleTextViewId, 
            Sectionizer<T> sectionizer) {

        if(context == null) { 
            throw new IllegalArgumentException("context cannot be null.");
        } else if(listAdapter == null) {
            throw new IllegalArgumentException("listAdapter cannot be null.");
        } else if(sectionizer == null) {
            throw new IllegalArgumentException("sectionizer cannot be null.");
        } else if(!isTextView(context, sectionHeaderLayoutId, sectionTitleTextViewId)) {
            throw new IllegalArgumentException("sectionTitleTextViewId should be a TextView.");
        }

        this.mContext = context;
        this.mListAdapter = listAdapter;
        this.mSectionHeaderLayoutId = sectionHeaderLayoutId;
        this.mSectionTitleTextViewId = sectionTitleTextViewId;
        this.mSectionizer = sectionizer;
        this.mSections = new LinkedHashMap<String, Integer>();

        // Find sections
        findSections();
    }

    private boolean isTextView(Context context, int layoutId, int textViewId) {
        View inflatedView = View.inflate(context, layoutId, null);
        View foundView = inflatedView.findViewById(textViewId);

        return foundView instanceof TextView;
    }

    @Override
    public int getCount() {
        return mListAdapter.getCount() + getSectionCount();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        SectionHolder sectionHolder = null;

        switch (getItemViewType(position)) {
        case VIEW_TYPE_SECTION_HEADER:
            if(view == null) {
                view = View.inflate(mContext, mSectionHeaderLayoutId, null);

                sectionHolder = new SectionHolder();
                sectionHolder.titleTextView = (TextView) view.findViewById(mSectionTitleTextViewId);

                view.setTag(sectionHolder);
            } else {
                sectionHolder = (SectionHolder) view.getTag();
            }
            break;

        default:
            view = mListAdapter.getView(getIndexForPosition(position), 
                    convertView, parent);
            break;
        }

        if(sectionHolder != null) {
            String sectionName = sectionTitleForPosition(position);
            sectionHolder.titleTextView.setText(sectionName);
        }

        return view;
    }

    @Override
    public boolean areAllItemsEnabled() {
        return mListAdapter.areAllItemsEnabled() ? 
                mSections.size() == 0 : false;
    }

    @Override
    public int getItemViewType(int position) {
        int positionInCustomAdapter = getIndexForPosition(position);
        return mSections.values().contains(position) ? 
                VIEW_TYPE_SECTION_HEADER : 
                    mListAdapter.getItemViewType(positionInCustomAdapter) + 1;
    }

    @Override
    public int getViewTypeCount() {
        return mListAdapter.getViewTypeCount() + 1;
    }

    @Override
    public boolean isEnabled(int position) {
        return mSections.values().contains(position) ? 
                false : mListAdapter.isEnabled(getIndexForPosition(position));
    }

    @Override
    public Object getItem(int position) {
        return mListAdapter.getItem(getIndexForPosition(position));
    }

    @Override
    public long getItemId(int position) {
        return mListAdapter.getItemId(getIndexForPosition(position));
    }

    @Override
    public void notifyDataSetChanged() {
        mListAdapter.notifyDataSetChanged();
        findSections();
        super.notifyDataSetChanged();
    }

    /**
     * Returns the actual index of the object in the data source linked to the this list item.
     * 
     * @param position List item position in the {@link ListView}.
     * @return Index of the item in the wrapped list adapter's data source.
     */
     public int getIndexForPosition(int position) {
         int nSections = 0;

         Set<Entry<String, Integer>> entrySet = mSections.entrySet();
         for(Entry<String, Integer> entry : entrySet) {
             if(entry.getValue() < position) {
                 nSections++;
             }
         }

         return position - nSections;
     }

     static class SectionHolder {
         public TextView titleTextView;
     }

     private void findSections() {
         int n = mListAdapter.getCount();
         int nSections = 0;
         mSections.clear();

         for(int i=0; i<n; i++) {
             String sectionName = mSectionizer.getSectionTitleForItem((T) mListAdapter.getItem(i));

             if(!mSections.containsKey(sectionName)) {
                 mSections.put(sectionName, i + nSections);
                 nSections ++;
             }
         }

         if(DEBUG) {
             Log.d(TAG, String.format("Found %d sections.", mSections.size()));
         }
     }

     private int getSectionCount() {
         return mSections.size();
     }

     private String sectionTitleForPosition(int position) {
         String title = null;

         Set<Entry<String, Integer>> entrySet = mSections.entrySet();
         for(Entry<String, Integer> entry : entrySet) {
             if(entry.getValue() == position) {
                 title = entry.getKey();
                 break;
             }
         }

         return title;
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:08:41.920

您可以使用`addTextChangedListener`& in`onTextChanged`方法获取您的搜索字符串并将此字符串与您的 listItems 匹配并准备新的搜索项目列表。然后重新初始化您的适配器并将其设置为`ListView`.

# android - Android 将操作栏菜单项向左对齐

> ID：14765914
> 
> 赞同：3
> 
> 时间：2013-02-08T04:52:33.197
> 
> 标签：android, android-actionbar

我在包含子菜单的操作栏上使用 java 而不是 xml 创建了一个菜单项。我想知道有什么办法可以移动到极左

![在此处输入图像描述](../Images/1dcb0173722715e0c709de711eae2b5a.png)

用于创建菜单项和子菜单的 JAVA 代码

```
 public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    SubMenu subMenu = menu.addSubMenu("Navigation Menu");
    subMenu.add("Library").setIcon(R.drawable.ic_action_book);
    subMenu.add("On Device").setIcon(R.drawable.ic_action_tablet);
    subMenu.add("My Shelf").setIcon(R.drawable.ic_action_laptop);
    MenuItem subMenu1Item = subMenu.getItem();
    subMenu1Item.setIcon(R.drawable.ic_action_home);
    subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    getMenuInflater().inflate(R.menu.activity_main, menu);      
    return true;
} 
```

# java - Corrupt form data: premature ending on Alcatel OT900A

> ID：14765923
> 
> 赞同：2
> 
> 时间：2013-02-08T04:53:46.580
> 
> 标签：java, forms, servlets, stripes, alcatel-ot

I am trying to submit a form using an Alcatel OT900A but I am getting this error

ava.io.IOException: Corrupt form data: premature ending at com.oreilly.servlet.multipart.MultipartParser.(MultipartParser.java:205) at com.oreilly.servlet.MultipartRequest.(MultipartRequest.java:222) at com.oreilly.servlet.MultipartRequest.(MultipartRequest.java:173) at net.sourceforge.stripes.controller.multipart.CosMultipartWrapper.build(CosMultipartWrapper.java:63) at net.sourceforge.stripes.controller.multipart.DefaultMultipartWrapperFactory.wrap(DefaultMultipartWrapperFactory.java:125) at net.sourceforge.stripes.controller.StripesRequestWrapper.constructMultipartWrapper(StripesRequestWrapper.java:109) at net.sourceforge.stripes.controller.StripesRequestWrapper.(StripesRequestWrapper.java:95) at net.sourceforge.stripes.controller.StripesFilter.wrapRequest(StripesFilter.java:202) at net.sourceforge.stripes.controller.StripesFilter.doFilter(StripesFilter.java:171) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188) at com.colibria.imps.clients.xhtml.filter.LoggerFilter.doFilter(LoggerFilter.java:39) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:875) at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665) at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528) at org.apache.tomcat.util.net.MasterSlaveWorkerThread.run(MasterSlaveWorkerThread.java:113) at java.lang.Thread.run(Thread.java:619)

Do you have any idea what is this error? Something wrong in the server or is it the device? I've tried testing this on other devices and it is working. It's only in Alcatel OT900A that I get this error.

My form looks like this (ofcourse I omitted some of the codes):

```
<stripes:form action="Some_Action_Bean" method="post">
   <stripes:text name="somemessage" class="someclass"/>
   <stripes:file name="someFile" class="someClass"/>
</stripes:form> 
```

there were some text entered in "somemessage" field but no file was chosen so basically "someFile" is null. I just have a checking in the backend if the value of the file is null.

I was thinking if the error occurred because no enctype="multipart/form-data" in the form, or maybe the stripes framework has an error itself or maybe the device doesn't support file sending.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:08:22.680

上传的文件不正确，`errror parsing multipart data...` 这不仅仅是表单，而是与请求一起上传的文件已损坏或不完整。

# jquery - sliding page inside div onclick instead of on load

> ID：14765932
> 
> 赞同：-1
> 
> 时间：2013-02-08T04:54:48.560
> 
> 标签：jquery, html

## jQuery

```
$(document).ready(function () {
    $(".slideContent").animate({
        marginLeft: $(".slideContent").css('margin-left') == '903px' ?
            '0px' : '0px'
    }, function () {
        // Animation complete.
        $(".contentWrapper").css('z-index', '1');
    }); 
```

## HTML

```
<div class="contentWrapper">
    <div class="content slideContent homeContent">
        <div class="content-text slideContentWrapper">    
        </div>
    </div>               
</div> 
```

Right Now `onload` I did this. I do not want to reload page. I just want slide should happen on click.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T04:58:31.073

```
$(document).ready(function(){
  $("#id").click(function(){
    $(".slideContent").animate({        
      marginLeft : $(".slideContent").css('margin-left') == '903px' ? '0px' : '0px'                      
    }, function() {
      // Animation complete.
      $(".contentWrapper").css('z-index','1');
  });
}); 
```

# java - 将 JSON 数组[array[String]] 转换为 Java 数组

> ID：14765936
> 
> 赞同：2
> 
> 时间：2013-02-08T04:55:25.580
> 
> 标签：java, javascript, arrays, json, multidimensional-array

我有一个 JavaScript JSON array[array[String]]`jsonArray`在我的`JSP1.jsp`.

我正在使用in转换`jsonArray`为字符串。`jsonArrayStr``JSON.stringify(jsonArray)``JSP1.jsp`

我在以这种方式`jsonArrayStr`调用另一个 JSP 时作为参数传递 -`JSP2.jsp`

```
"JSP2.do?jsonArrayStr="+jsonArrayStr 
```

在`JSP2.jsp`，我正在这样做-

```
String jsonArrayStr = request.getParameter("jsonArrayStr"); 
```

现在如何转换`jsonArrayStr`为**Java 数组**（`JSP2.jsp`不包含任何 JavaScript 代码）

概括-

我在 a 中有一个 JavaScript JSON 数组`JSP1.jsp`，我想在`JSP2.jsp`. 我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T00:50:01.727

好的，所以你有一个表示为 JSON 的二维字符串数组，像这样存储在 Java 字符串中：

```
[["a", "b", "c"],["x"],["y","z"]] 
```

您需要以某种方式将该值解析或“反序列化”为 Java String[][]。您可以使用[http://www.json.org/java/index.html](http://www.json.org/java/index.html)或[http://jackson.codehaus.org/](http://jackson.codehaus.org/)之类的库，也可以尝试手动操作。手动可能有点棘手，但并非不可能。json.org 库非常简单，可能已经足够好了。代码将是这样的（我没有尝试/测试过）：

```
JSONArray jsonArray = new JSONArray(jsonArrayStr); // JSONArray is from the json.org library
String[][] arrayOfArrays = new String[jsonArray.length()][];
for (int i = 0; i < jsonArray.length(); i++) {
    JSONArray innerJsonArray = (JSONArray) jsonArray.get(i);
    String[] stringArray = new String[innerJsonArray.length()];
    for (int j = 0; j < innerJsonArray.length(); j++) {
        stringArray[j] = innerJsonArray.get(j);
    }
    arrayOfArrays[i] = stringArray;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T04:59:00.640

像这样的东西

```
ArrayList<String> strings= new ArrayList<String>();     
JSONArray jsonArray = (JSONArray)jsonObject; 
if (jsonArray != null) { 
   int len = jsonArray.length();
   for (int i=0;i<len;i++){ 
    list.add(jsonArray.get(i).toString());
   } 
} 

String[] Stringarray = strings.toArray(new String[strings.size()]); 
```

# sql-server - CTE 和 FOR XML 生成嵌套 XML

> ID：14765937
> 
> 赞同：11
> 
> 时间：2013-02-08T04:55:25.953
> 
> 标签：sql-server, xml, tsql, common-table-expression, for-xml

我在数据库中有一个邻接列表，并希望通过 SQL SP 将 XML 格式的数据传递给客户端。我正在尝试使用 CTE 和 FOR XML，但我没有让 XML 节点嵌套。

仅供参考，这将代表一个站点地图。

表结构：

```
CREATE TABLE [dbo].[PageHierarchy](
    [ModuleId] [int] NOT NULL,
    [PageId] [int] IDENTITY(1,1) NOT NULL,
    [ParentPageId] [int] NULL,
    [PageUrl] [nvarchar](100) NULL,
    [PageTitle] [nvarchar](50) NOT NULL,
    [PageOrder] [int] NULL) 
```

以及 CTE 的开始：

```
;WITH cte AS
(
    select * from PageHierarchy where ParentPageId is null
    union all
    select child.* from PageHierarchy child inner join cte parent on parent.PageId = child.ParentPageId
)
SELECT ModuleId, PageId, ParentPageId, PageUrl, PageTitle, PageOrder FROM cte
group by ModuleId, PageId, ParentPageId, PageUrl, PageTitle, PageOrder
order by PageOrder
for xml auto, root ('bob') 
```

生成如下所示的 XML：

```
<bob>
  <cte ModuleId="1" PageId="1" PageUrl="~/Admin/" PageTitle="Administration" PageOrder="1000" />
  <cte ModuleId="1" PageId="4" ParentPageId="1" PageTitle="Manage Users" PageOrder="1030" />
  <cte ModuleId="1" PageId="5" ParentPageId="4" PageUrl="~/Admin/AddUser" PageTitle="Add Users" PageOrder="1040" />
  <cte ModuleId="1" PageId="8" ParentPageId="4" PageUrl="~/Admin/EditUser" PageTitle="Edit/Search User" PageOrder="1070" />
</bob> 
```

当我想要的是看起来像这样的 XML 时：

```
<bob>
  <cte ModuleId="1" PageId="1" PageUrl="~/Admin/" PageTitle="Administration" PageOrder="1000" />
  <cte ModuleId="1" PageId="4" ParentPageId="1" PageTitle="Manage Users" PageOrder="1030" >
    <cte ModuleId="1" PageId="5" ParentPageId="4" PageUrl="~/Admin/AddUser" PageTitle="Add Users" PageOrder="1040" />
    <cte ModuleId="1" PageId="8" ParentPageId="4" PageUrl="~/Admin/EditUser" PageTitle="Edit/Search User" PageOrder="1070" />
  </cte>
</bob> 
```

我猜问题不在于 CTE，而在于 select，但我不知道从哪里开始修复它。另外，我不知道嵌套有多深，所以我假设我需要它来支持至少 10 层深度。

**编辑1：**
我想我越来越近了......在查看[此](http://msdn.microsoft.com/en-us/library/ms345137%28SQL.90%29.aspx#forxml2k5_topic8)页面时，我创建了一个UDF，但仍然存在一些问题：

```
CREATE FUNCTION PageHierarchyNode(@PageId int)
RETURNS XML
WITH RETURNS NULL ON NULL INPUT 
BEGIN RETURN 
  (SELECT ModuleId AS "@ModuleId", PageId AS "@PageId",
    ParentPageId AS "@ParentPageId", PageUrl AS "@PageUrl",
    PageTitle AS "@PageTitle", PageOrder AS "@PageOrder", 
      CASE WHEN ParentPageId=@PageId
      THEN dbo.PageHierarchyNode(PageId)
      END
   FROM dbo.PageHierarchy WHERE ParentPageId=@PageId
   FOR XML PATH('Page'), TYPE)
END 
```

以及调用 UDF 的 SQL

```
SELECT ModuleId AS "@ModuleId", PageId AS "@PageId",
    ParentPageId AS "@ParentPageId", PageUrl AS "@PageUrl",
    PageTitle AS "@PageTitle", PageOrder AS "@PageOrder", 
    dbo.PageHierarchyNode(PageId)
FROM PageHierarchy
FOR XML PATH('Page'), ROOT('SiteMap'), TYPE 
```

这将为我嵌套 XML，但它正在复制节点，这不是我想要的..

**编辑2：**

我只需要在调用 UDF 的 SELECT 中添加一个 WHERE 子句：

```
...
WHERE ParentPageId IS NULL 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T18:04:52.303

原来我根本不想要 CTE，只是我递归调用的 UDF

```
CREATE FUNCTION PageHierarchyNode(@PageId int)
RETURNS XML
WITH RETURNS NULL ON NULL INPUT 
BEGIN RETURN 
  (SELECT ModuleId AS "@ModuleId", PageId AS "@PageId",
    ParentPageId AS "@ParentPageId", PageUrl AS "@PageUrl",
    PageTitle AS "@PageTitle", PageOrder AS "@PageOrder", 
      CASE WHEN ParentPageId=@PageId
      THEN dbo.PageHierarchyNode(PageId)
      END
   FROM dbo.PageHierarchy WHERE ParentPageId=@PageId
   FOR XML PATH('Page'), TYPE)
END 
```

使用将 UDF 调用为的 SQL

```
SELECT ModuleId AS "@ModuleId", PageId AS "@PageId",
    ParentPageId AS "@ParentPageId", PageUrl AS "@PageUrl",
    PageTitle AS "@PageTitle", PageOrder AS "@PageOrder", 
    dbo.PageHierarchyNode(PageId)
FROM PageHierarchy
WHERE ParentPageId IS NULL
FOR XML PATH('Page'), ROOT('SiteMap'), TYPE 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-10T13:26:04.167

这个问题以及OP的回答对我帮助很大。由于我缺少一些上下文，我花了一点时间来掌握答案。所以这里有一个单独的答案和更通用的解释（我试图删除与在 XML 输出中获取分层数据没有*直接关系的每一段代码）。*

* * *

假设分层数据有以下典型表：

```
CREATE TABLE Employee (Id INT, BossId INT, Name NVARCHAR(50)); 
```

假设它有以下数据：

```
INSERT INTO Employee (Id, BossId, Name) VALUES
(1, NULL, 'Boss Pancone'),
(2, 1, 'Capioregime Luciano'),
(3, 1, 'Capioregime Bruno'),
(4, 2, 'Johnny'),
(5, 2, 'Luca'),
(6, 2, 'Luciano jr.'),
(7, 3, 'Marco'),
(8, 3, 'Mario'),
(9, 3, 'Giacomo'); 
```

要获取分层 XML 数据，我们可以使用以下函数：

```
ALTER FUNCTION dbo.fn_EmployeeHierarchyNode (@BossId INT) RETURNS XML
BEGIN RETURN
    (SELECT Id, 
            BossId, 
            Name,
            dbo.fn_EmployeeHierarchyNode(Id)
        FROM Employee
        WHERE BossId = @BossId
        FOR XML AUTO)
END; 
```

可以这样调用：

```
SELECT dbo.fn_EmployeeHierarchyNode(1) 
```

或者，如果您也想要根节点，如下所示：

```
SELECT  Id,
        BossId,
        Name,
        dbo.fn_EmployeeHierarchyNode(Id)
FROM    Employee
WHERE   BossId IS NULL
FOR     XML AUTO 
```

这会产生：

```
<Employee Id="1" Name="Boss Pancone">
  <Employee Id="2" BossId="1" Name="Capioregime Luciano">
    <Employee Id="4" BossId="2" Name="Johnny" />
    <Employee Id="5" BossId="2" Name="Luca" />
    <Employee Id="6" BossId="2" Name="Luciano jr." />
  </Employee>
  <Employee Id="3" BossId="1" Name="Capioregime Bruno">
    <Employee Id="7" BossId="3" Name="Marco" />
    <Employee Id="8" BossId="3" Name="Mario" />
    <Employee Id="9" BossId="3" Name="Giacomo" />
  </Employee>
</Employee> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-08T04:59:42.293

递归 CTE 不像“嵌套”那样递归，它们的工作方式不同，您尝试做的事情不适用于 CTE。（认为​​它们总是[尾递归的](http://en.wikipedia.org/wiki/Tail_call)。）

我发现在 SQL Server 中构建递归 XML 的唯一方法是创建一个递归呈现节点的标量函数；函数可以进行递归调用，以便按预期工作。

# c# - Highlight specific text in richtextbox

> ID：14765947
> 
> 赞同：0
> 
> 时间：2013-02-08T04:56:38.510
> 
> 标签：c#, richtextbox, highlighting

I have a window form that contain a `listbox` and some `richtextboxex`. `listbox` contains some values. When I select any value from `listbox`, `richtextboxex` bind with data according to selected value.

I have to highlight some text which is bind to `richtextbox` when I select a value from listbox, e.g.:

> Just a friendly reminder that you have <<OverdueInvCount>> overdue invoice(s), with an overdue balance of <<OverdueInvTotal>>. If you have any questions about the amount you owe, please give us a call and we’ll be happy to discuss it. If you’ve already sent your payment, please disregard this reminder.

All data is coming from database.

I want to highlight `<<OverdueInvCount>>` and `<<OverdueInvTotal>>` these words.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:50:16.000

一种不强制转换为具有所需功能的新对象的方法是覆盖`ListBox` `DrawItem`

```
void listBox1_DrawItem(object sender, DrawItemEventArgs e)
{
    var item = listBox1.Items[e.Index] as <Your_Item>;

    e.DrawBackground();
    if (item.fIsTemplate)
    {
        e.Graphics.DrawString(item.Text + "(Default)", new Font("Microsoft Sans Serif", 8, FontStyle.Regular), Brushes.Black, e.Bounds);
    }
    else
    {
        e.Graphics.DrawString(item.Text, new Font("Microsoft Sans Serif", 8, FontStyle.Regular), Brushes.Black, e.Bounds);
    }
    e.DrawFocusRectangle();
} 
```

并将其添加到您的构造函数中（`InitializeComponent();`调用后）

```
listBox1.DrawMode = DrawMode.OwnerDrawFixed;
listBox1.DrawItem += new DrawItemEventHandler(listBox1_DrawItem); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:15:21.400

像这样的东西应该可以工作（刚刚测试过这个..似乎工作正常）：

```
int openBrace = richTextBox.Text.IndexOf("<");
while (openBrace > -1) {
    int endBrace = richTextBox.Text.IndexOf(">", openBrace);
    if (endBrace > -1) {
        richTextBox.SelectionStart = openBrace;
        richTextBox.SelectionLength = endBrace - openBrace;
        richTextBox.SelectionColor = Color.Blue;
    }
    openBrace = richTextBox.Text.IndexOf("<", openBrace + 1);
} 
```

# jquery-ui - jQuery Mobile app not not displaying elements correctly

> ID：14765952
> 
> 赞同：0
> 
> 时间：2013-02-08T04:57:35.790
> 
> 标签：jquery-ui, jquery-mobile

SO...my app has a few issues, but I am DESPERATE to solve this one first. Any thoughts and suggestions are welcomed. Here is the app:

[http://pocketfacilitator.com](http://pocketfacilitator.com)

Here's the issue - (NOTE, Firefox doesn't even allow this issue to fire, so maybe try Chrome or Safari, or a mobile browser): From the home page, click on Portables > List All Portables. Now, click on any of the PLUS signs on the right (or two or three, doesn't matter). Now, check the "TODAY" page (in the very bottom nav bar). It will display the list of games you clicked on, but the way they are displayed is totally jacked. BUT...if you RELOAD the page (or just click the red CLEAR button), and repeat the process, it looks normal. What have I done wrong?

If you dare: in Firefox, it won't even let me add an activity -- clicking on the "+" button yield NO effect.

I appreciate any help. Cheers!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:57:29.993

动态添加项目后尝试`refresh()`在列表视图上调用方法

```
$(this).parent().appendTo('#todaylist');
$('#todaylist').listview('refresh'); 
```

请参阅[更新列表](http://jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html)

> 如果将项目添加到列表视图，则需要对其调用**refresh()** 方法来更新样式并创建添加的任何嵌套列表。

# matplotlib - eps cmyk 颜色 matplotlib 输出

> ID：14765953
> 
> 赞同：4
> 
> 时间：2013-02-08T04:57:48.150
> 
> 标签：matplotlib, python-3.2, eps, cmyk

我需要使用 CMYK 颜色空间以 EPS 格式输出我的图。不幸的是，我提交作品的期刊要求使用这种特殊格式！

[这个讨论](http://matplotlib.1069221.n5.nabble.com/CMYK-images-td16339.html "本次讨论")是我能找到的唯一一个解决了这个问题的讨论，但它已经超过 2 年了。我希望现在可能有一些更新可以解决这个问题。

我所有的编程都在 Python3 中，到目前为止，我一直将我的绘图保存在没有问题的 PDF 中。但是现在我想绘制 EPS 有一个问题。例如，下面的代码以 .png 和 .pdf 格式打印简单图，但 .eps 输出完全空白！

```
import numpy as np
import matplotlib.pyplot as plt

X=[1,2,3]
Y=[4,5,6]

fig = plt.figure()
ax = fig.add_subplot(111)
ax.plot(X,Y)

fig.savefig('test.eps')
fig.savefig('test.pdf')
fig.savefig('test.png') 
```

所以我有两个问题：

1.  如何修复 eps 输出？

2.  如何将 eps 输出颜色空间设置为 CMYK？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T01:35:34.770

我也有同样的问题。我发现的一种解决方法是将绘图另存为`.svg`，然后使用[Inkscape](http://inkscape.org/%20Inkscape)之类的程序转换为 eps。我曾经能够`.eps`毫无问题地保存，然后在更新后失去了能力。

**更新**我能够通过更改我的几行来解决我的特定设置的这个问题`.matplotlibrc`，所以我将在此处发布相关行，希望它也可能对您有所帮助。请注意，这要求您已经安装`xpdf`并且`ghostscript`已经安装。

对我来说最重要的是

```
##Saving Figures
ps.usedistiller : xpdf 
```

但我也有

```
path.simplify : True 
savefig.format : eps 
```

现在我可以直接将`.eps`它们保存到 LaTeX 的期刊文章中并将它们包含在内......

# c# - 如何修改我的代码以将总计存储到我的 decArray？

> ID：14765956
> 
> 赞同：0
> 
> 时间：2013-02-08T04:57:59.787
> 
> 标签：c#

我烦了。我是一个正在做作业的新手，我似乎无法弄清楚为什么我的消息框只显示五次相同的数字（计算的最后一个小计数字）。我不明白如何使用 for 循环将我的值存储到数组中而不重置它。有人可以帮忙吗？先感谢您。

```
 using System;
 using System.Collections.Generic;
 using System.ComponentModel;
 using System.Data;
 using System.Drawing;
 using System.Linq;
 using System.Text;
 using System.Windows.Forms;

 namespace InvoiceTotal
 {
 public partial class frmInvoiceTotal : Form
{
    public frmInvoiceTotal()
    {
        InitializeComponent();
    }

    // TODO: declare class variables for array and list here
   decimal[] decArray = new decimal[5];
   int intIndex = 0;

    private void btnCalculate_Click(object sender, EventArgs e)
    {

       try
        {

            if (txtSubtotal.Text == "")
            {
                MessageBox.Show(
                    "Subtotal is a required field.", "Entry Error");
            }
            else
            {
                decimal subtotal = Decimal.Parse(txtSubtotal.Text);
                if (subtotal > 0 && subtotal < 10000)
                {
                    decimal discountPercent = 0m;
                    if (subtotal >= 500)
                        discountPercent = .2m;
                    else if (subtotal >= 250 & subtotal < 500)
                        discountPercent = .15m;
                    else if (subtotal >= 100 & subtotal < 250)
                        discountPercent = .1m;
                    decimal discountAmount = subtotal * discountPercent;
                    decimal invoiceTotal = subtotal - discountAmount;

                    discountAmount = Math.Round(discountAmount, 2);
                    invoiceTotal = Math.Round(invoiceTotal, 2);

                    txtDiscountPercent.Text = discountPercent.ToString("p1");
                    txtDiscountAmount.Text = discountAmount.ToString();
                    txtTotal.Text = invoiceTotal.ToString();

                    for (intIndex = 0; intIndex <= decArray.Length - 1; intIndex++)
                    {
                         decArray[intIndex] = invoiceTotal;
                    }

                }
                else
                {
                    MessageBox.Show(
                        "Subtotal must be greater than 0 and less than 10,000.", 
                        "Entry Error");
                }
            }
        }
        catch (FormatException)
        {
            MessageBox.Show(
                "Please enter a valid number for the Subtotal field.", 
                "Entry Error");
        }
        txtSubtotal.Focus();
    }

    private void btnExit_Click(object sender, EventArgs e)
    {
        // TODO: add code that displays dialog boxes here
     string totalstring = "";
     foreach (decimal value in decArray)
     {
        totalstring += value + "\n";

     }
     MessageBox.Show(totalstring + "\n", "Order Totals");

     this.Close();
    } 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:02:58.447

Since its a homework, I can only give you a clue, your loop is currently taking only one `invoiceTotal`, You don't have to use loop at all, When your control enter `btnCalculate_Click` event then after calculating `invoiceTotal`, you can put it to the `decArray` using your class level `intIndex`. Increment the `intIndex` and before entering the value in `decArray` you must check if the `intIndex` is less then `array length`. Another idea would be to use `List<decimal>` instead of array if you are expecting unknown numbers of input.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:10:10.730

Your `for...loop` sets every index of the array to the total.

```
for (intIndex = 0; intIndex <= decArray.Length - 1; intIndex++)
{
    decArray[intIndex] = invoiceTotal;
} 
```

Ask yourself: what is its purpose? You could safely change it to this:

```
decArray[intIndex++] = invoiceTotal; 
```

I will leave it up to you to determine how that changes it (since it's homework).

# authentication - 服务器如何发现 OpenId 提供者的身份验证端点？

> ID：14765964
> 
> 赞同：0
> 
> 时间：2013-02-08T04:58:29.590
> 
> 标签：authentication, oauth, openid

如果一个人在他们的 OpenId 身份验证提供程序中输入为：`http://www.myopenid.com`......我如何发现我需要 302 将他们重定向到的真正端点是`https://www.myopenid.com/server`？

顺便说一句：我只知道`https://www.myopenid.com/server`端点是因为我一直在**手动**监听浏览器中的流量（例如，当我尝试通过他们的 MyOpenId 图标/图片登录 StackOverflow 时）。

请问有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T05:14:04.030

OpenID 2.0 规范解释了发现过程 [1]。规范中讨论了三种发现方法。

1.  XRI 分辨率
2.  雅迪斯协议
3.  基于 HTML 的发现

您用于实现 OpenID 依赖方的库应该支持这些方法，因此它们将计算 OP 端点。

[1]。[http://openid.net/specs/openid-authentication-2_0.html#discovery](http://openid.net/specs/openid-authentication-2_0.html#discovery)

# python - django中的while循环

> ID：14765969
> 
> 赞同：-2
> 
> 时间：2013-02-08T04:58:52.043
> 
> 标签：python, while-loop

我想对包含多个记录的多数组使用while循环。但是while循环不起作用， *假设我有一个数组行*

```
arr={}
row=[1,2,3,4,5,6]
while arr in row:
    print "sucess" 
```

但是当这个返回的 arr 为空并且也不打印任何东西时，意味着它不会进入 while 循环。

实际数组如下所示，我想在 while 循环中执行一些操作，但正如我所解释的，while 循环不起作用

```
((2L, u'admin', u'admin', u'admin', u'admin@qw.com', u'pbkdf2_sha256$10000$eXj6MA955ZvX$rkgR4UNRozcJZJ/CJWw4OEN9ZIPcDoUwM8uvsjKH8og=', 1, 1, 1, datetime.datetime(2013, 2, 6, 4, 12, 6, tzinfo=<UTC>), datetime.datetime(2012, 12, 12, 10, 54, 55, tzinfo=<UTC>)), (3L, u'nej', u'Neeraj', u'Dhiman', u'ndhiman08@gmail.com', u'pbkdf2_sha256$10000$WvkaiQNgwKOR$wbI/mwroDHvtjy8qTB0ftUDLfIA0h2OTMzLybtB3pZU=', 0, 1, 0, datetime.datetime(2013, 2, 5, 8, 52, 32, tzinfo=<UTC>), datetime.datetime(2012, 12, 14, 4, 52, 16, tzinfo=<UTC>)), (4L, u'suresh', u's', u'p', u's', u'pbkdf2_sha256$10000$WvkaiQNgwKOR$wbI/mwroDHvtjy8qTB0ftUDLfIA0h2OTMzLybtB3pZU=', 0, 1, 0, datetime.datetime(2013, 1, 24, 6, 40, 23, tzinfo=<UTC>), None)) 
```

有人可以告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:14:30.607

一段时间在 python 中遍历数组的正确格式是：

```
arr = [1,2,3,4,5,6]
i = 0
while i < len(arr):
    print arr[i]
    i = i + 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T05:17:05.333

```
i = 1
while True:
   if(i == len(row)):
        break;
   else:
       print "Success"
       ++i 
```

# jquery - 使用jquery添加表记录

> ID：14765974
> 
> 赞同：-1
> 
> 时间：2013-02-08T04:59:18.983
> 
> 标签：jquery, html, css

我的 HTML 结构如下：

```
<button type="button">Add Column Record</button>
<table border="1">
<tr>
    <th> Header 1</th>

    <td> L1</td>
    <td> L1</td>

</tr>
<tr>
<th> Header 2</th>

    <td> L2 </td>
    <td> L2 </td>

</tr>
<tr>
    <th> Header 3</th>

    <td> L3</td>
    <td> L3</td>

</tr> 
```

我想在按下按钮后将垂直记录添加到最右边的列。我应该如何使用 jQuery 实现这个效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:08:52.477

你可以尝试这样的事情：

```
$('button').on('click', function() {
    var table = $('table');
    var newCell = null;

    table.find('tr').each(function(index) {
        newCell = $('<td/>');
        newCell.text('L' + (index+1));
        $(this).append(newCell);
    });
}); 
```

演示在这里：http: [//jsfiddle.net/8RmS8/](http://jsfiddle.net/8RmS8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:09:25.053

看看这个：http: [//jsfiddle.net/MMXnY/1/](http://jsfiddle.net/MMXnY/1/)

```
$('button').click(function(){
   $('table tr').each(function(i, v){
     $(this).append($('td:last',this).clone().text('L'+parseInt(i+1)));
   });
}); 
```

你可以遍历每个`tr`然后`make a clone of the last td and then put text and increase the number by parsing it then append it after last td.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:03:13.633

[http://api.jquery.com/append/](http://api.jquery.com/append/)

[http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)

[http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

每个函数都执行略有不同的附加。阅读它们并找出您要使用的内容。

例子：

前

```
<div class="area"></div> 
```

脚本

```
$('<p>Test</p>').appendTo('.area'); 
```

后

```
<div class="area"><p>Test</p></div> 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T05:07:01.637

如果要添加一列，可以迭代每个`tr`表并添加一个新的`td`

例子：

```
$("#id_of_your_table > tbody > tr").each(function(index, trElement) {

    // Add a new TD at the end
    $(trElement).append($(document.createElement("td")));

}); 
```

**注意**：不要忘记`tbody`在你`table`的行为中添加一个（如果它不存在，某些浏览器会默认添加它）

例子：

```
<table id="myTable">
    <tbody>
        <tr>
            ..... 
```

这是一个完整的例子：

```
<button id="addColumn">Add new column</button>
<table id="myTable">
    <tbody>
        <tr>
            <td>col 1</td>
            <td>col 2</td>
            <td>col 3</td>
        </tr>
        <tr>
            <td> col 1</td>
            <td> col 2</td>
            <td> col 3</td>
        </tr>
    </tbody>
</table>

<script>

    // When DOM is ready
    $(document).ready(function() {

        // Listen on the click on the button
        $("#addColumn").on('click', function(mouseEvent) {

            // Iterate on all TR of the table
            $("#id_of_your_table > tbody > tr").each(function(index, trElement) {

                // Add a new TD at the end
                $(trElement).append($(document.createElement("td")));

            });
        });

    });

</script> 
```

# android - 如何在android中使用斑马打印机进行打印？

> ID：14765976
> 
> 赞同：13
> 
> 时间：2013-02-08T04:59:35.383
> 
> 标签：android

我正在开发一个需要打印账单的 android 应用程序。我打算用 Zebra 打印机打印这张账单。我以前从来没有这样做过。所以我不知道该怎么做。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T15:58:20.927

Zebra 发布了有关如何在 Android 上使用 ZSDK API 进行打印的完整教程：[https ://km.zebra.com/resources/sites/ZEBRA/content/live/WHITE_PAPERS/0/WH62/en_US/AndroidSDK_Java_GettingStarted_WH.pdf#xml =https://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1360598145375&answerid=16777216&iqaction=6&url=https%3A%2F%2Fkm.zebra.com%2Fresources%2Fsites%2FZEBRA%2Fcontent%2Flive%2FWHITE_PAPERS %2F0%2FWH62%2Fen_US%2FAndroidSDK_Java_GettingStarted_WH.pdf&highlightinfo=8388708,9,19](https://km.zebra.com/resources/sites/ZEBRA/content/live/WHITE_PAPERS/0/WH62/en_US/AndroidSDK_Java_GettingStarted_WH.pdf#xml=https://km.zebra.com/kb/index?page=answeropen&type=open&searchid=1360598145375&answerid=16777216&iqaction=6&url=https%3A%2F%2Fkm.zebra.com%2Fresources%2Fsites%2FZEBRA%2Fcontent%2Flive%2FWHITE_PAPERS%2F0%2FWH62%2Fen_US%2FAndroidSDK_Java_GettingStarted_WH.pdf&highlightinfo=8388708,9,19)。此外，他们的知识库包含许多示例代码，可以帮助您找到正确的方向： http: [//km.zebra.com](http://km.zebra.com)。一般来说，如果您有更具体的问题，Stackoverflow 应该能够提供帮助！

# sql - 在 sql 中不使用 between 语句访问值

> ID：14765977
> 
> 赞同：1
> 
> 时间：2013-02-08T04:59:40.500
> 
> 标签：sql, date, varchar, between

我将日期作为 varchar 存储在数据库中。当我尝试使用`between`sql 中的运算符访问某些数据以获取某些日期之间的某些值时，它没有给出正确的输出，因为我将日期存储为 varchar。日期就是这种格式`(01/12/2013)(dd/mm/yyyy)`。

在不将日期从 varchar 更改为日期格式的情况下使用 between 语句访问正确数据的任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:08:02.440

不要对数据类型感到困惑——它与您的问题无关。如果您删除日期中的 /，您会看到这一点 - 获得实数：20/02/2013 实际上比 01/02/2014 高出 2100 万多

2013 年 2 月 20 日 = 20022013 年1 月 2 日 2014
= 1022014

如果您的 varchar 的数字按日期、月份、年份的顺序排列 - 您必须在字段或查询中对它们重新排序以获得正确的值，但如果它们在年月日中，您将有一个 varchar 仅排序像一个日期时间。

**解决方案 1：** 如果您必须将其保留在表格中，您必须这样做：

数据库表：

```
CREATE TABLE `dates` (
  `date_varchar` varchar(15) DEFAULT NULL,
  `date_datetime` datetime DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

数据：

```
date_varchar  date_datetime        
01/02/2013    2013-02-01 00:00:00  
02/02/2013    2013-02-02 00:00:00  
03/02/2013    2013-02-03 00:00:00  
03/02/2014    2014-02-03 00:00:00  
03/03/2013    2013-03-03 00:00:00  
04/02/2013    2013-02-04 00:00:00  
05/02/2013    2013-02-05 00:00:00 
```

查询：

```
SELECT * 
FROM dates 
WHERE STR_TO_DATE(date_varchar,'%d/%m/%Y') 
BETWEEN '2013-02-03' AND  '2013-02-04' 
```

将返回两条记录：

```
date_varchar  date_datetime        
03/02/2013    2013-02-03 00:00:00  
04/02/2013    2013-02-04 00:00:00 
```

**解决方案 2：**

将 varchar 中的顺序更改为字段中的年、月、日。见下表数据：

```
date_varchar  date_datetime        
2013/02/01    2013-02-01 00:00:00  
2013/02/02    2013-02-02 00:00:00  
2013/02/03    2013-02-03 00:00:00  
2013/02/04    2013-02-04 00:00:00  
2013/02/05    2013-02-05 00:00:00  
2013/03/03    2013-03-03 00:00:00  
2014/02/03    2014-02-03 00:00:00 
```

现在您可以选择：

```
SELECT * 
FROM dates 
WHERE date_varchar 
BETWEEN '2013/02/02' AND '2013/02/03' 
```

现在数字的排序方式与日期时间相同 - 您只需删除 / 和 - 即可查看数字。所以 varchars 的排序与 date_time 相同

查询返回相同的两行：

```
date_varchar  date_datetime        
2013/02/02    2013-02-02 00:00:00  
2013/02/03    2013-02-03 00:00:00 
```

**解决方案 3：**

这不适合您，因为您不想更改表格，但我将其包括在内以使其完整。通过将数据类型更改为 datetime，您必须将数字按正确的顺序排列，并使用此查询来获取日期之间的范围：

```
SELECT * 
FROM dates 
WHERE date_datetime 
BETWEEN '2013-02-03' AND  '2013-02-04' 
```

同样的两条记录：

```
date_varchar  date_datetime        
03/02/2013    2013-02-03 00:00:00  
04/02/2013    2013-02-04 00:00:00 
```

**问题示例：**

现在只需选择日期作为 varchar 返回 - 你猜对了 - 就像第一个查询**和更多**一样的两条记录，就像发生在你身上的事情一样：

数据：

```
date_varchar  date_datetime        
01/02/2013    2013-02-01 00:00:00  
02/02/2013    2013-02-02 00:00:00  
03/02/2013    2013-02-03 00:00:00  
03/02/2014    2014-02-03 00:00:00  
03/03/2013    2013-03-03 00:00:00  
04/02/2013    2013-02-04 00:00:00  
05/02/2013    2013-02-05 00:00:00

SELECT * 
FROM dates 
WHERE date_varchar 
BETWEEN '03/02/2013' AND  '04/02/2013'

date_varchar  date_datetime        
03/02/2013    2013-02-05 00:00:00  
03/02/2014    2014-02-03 00:00:00  
03/03/2013    2013-02-05 00:00:00  
04/02/2013    2013-02-03 00:00:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:04:07.810

您将日期存储为 varchar，然后使用 to_date 函数转换为日期格式，然后在运算符之间使用：

尝试这个

```
SELECT *
FROM orders
WHERE to_date(order_date, 'dd/mm/yyyy') between to_date ('01/12/2012', 'dd/mm/yyyy')
AND to_date ('31/12/2012', 'dd/mm/yyyy'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:06:41.920

以防万一您使用 MS SQL：

```
SELECT *
FROM orders
WHERE CONVERT(DATETIME,order_date,101) between CONVERT(DATETIME,'01/12/2012',101)
AND CONVERT(DATETIME,'31/12/2012',101); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T05:11:10.133

只需编写以下查询

```
select * 
from table 
where str_to_date('01/01/2013','%m%d%Y') between '2012-01-02' and '2013-01-02' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T05:14:41.567

基本上，如果我没记错的话，您正在尝试在不更改数据格式的情况下寻找解决方案。如果没有明确提及，Between 操作员无法理解数据是日期。所以你不得不说这个字段是日期。每个数据库中都有类似的函数，例如 date()、to_date()。由于我不知道您使用的是哪个数据库，因此我无法为您提供如何解决它的确切语法。但我相信你可以很容易地找到它。如果需要更多详细信息，请告诉我。

# zend-framework2 - 如何将翻译器放入 Zend2 形式

> ID：14765982
> 
> 赞同：0
> 
> 时间：2013-02-08T05:00:02.600
> 
> 标签：zend-framework2

我是 Zend 框架的新手，目前正在研究 Zend2...我想询问 Zend 表单中的翻译器使用情况...如果我想使用翻译器，我直接在表单视图 ieform_view.php 中使用标签

```
$this->formLabel()->setTranslator($translator, 'date_of_birth'); 
```

但我想在表单中添加翻译器，例如 src/my_module/Form/UserForm.php

```
$this->add(array(
        'name' => 'date_of_birth',
        'attributes' => array(
            'type'  => 'text',
            'id' => 'date_of_birth',
        ),
        'options' => array(
            'label' => 'DateOfBirth',
        ),                                 //Here there is any option to put translator
    )); 
```

请帮助我......任何答案都会像我问的那样对我有帮助

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T11:18:24.130

你真的不需要这样做。由于使用 factory-key 设置的 Translator`translator`会自动注入到 Form 中。

最好的方法（在我看来）是广泛使用翻译器`text_domain`：

```
'translator' => array(
    'locale' => 'de_DE',
    'translation_file_patterns' => array(
        array(
            'type'        => 'phparray',
            'base_dir'    => __DIR__ . '/../language',
            'pattern'     => '%s.php',
            'text_domain' => 'MyModuleTextDomain'
        ),
    ),
), 
```

通过这个设置，你的模块文件将自动插入到每个 Zend\Form 都知道的默认 TranslatorService 中。

因此，最终您所要做的就是`ViewHelpers`了解`TextDomain`您正在使用的内容。这是通过以下方式完成的：

```
$this->formLabel()->setTranslatorTextDomain('MyModuleTextDomain');
$this->formButton()->setTranslatorTextDomain('MyModuleTextDomain');
$this->formElementErrors()->setTranslatorTextDomain('MyModuleTextDomain'); 
```

您需要在各自的`view.phtml`before(!) 中使用 ViewHelpers 像`$this->formElement($element)`或`$this->formCollection($form)`

这就是它的全部。我记得在某处看到过关于使传递文本域数据更容易的讨论，但我现在找不到。所以将来事情可能会变得容易一些；）现在，虽然只需要 3 行！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:09:27.597

上面的答案是完全没有必要的......因为您的翻译器已自动添加到 zend 表单以呈现表单标签并且......仅在您的模块配置中使用此代码：

```
'translator' => array(
        'locale' => 'en_US',
        'translation_file_patterns' => array(
            array(
                'type'     => 'phparray',
                'base_dir' => __DIR__ . '/../language',
                'pattern'  => '%s.php',
            ),
        ),
    ), 
```

如果您使用正确的视图助手来呈现表单元素（或整个表单），它将自动翻译

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:23:45.413

**这不是推荐的方法，因为如果您配置了翻译器（如果您使用 Skeleton 应用程序，您会这样做），则会自动翻译表单。但是，由于您询问如何在表单中直接使用翻译器，我将向您展示如何做到这一点。请仔细考虑您是否真的想这样做，因为我无法想象有必要的用例。**

要完全按照您的要求进行操作，您可以将翻译器注入您的表单中。您可以在控制器或工厂中执行此操作。我将在此示例中使用工厂，因为它更[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

```
// In your module's config file
'service_manager' => array(
    'factories' => array(
        'YourModule\Form\YourForm' => function($sm) {
            $translator = $sm->get('Translator');
            return new \YourModule\Form\YourForm($translator);
        },
    ),
), 
```

然后在您的表单类中，您可以这样做：

```
namespace YourModule\Form;

class RegisterForm extends \Zend\Form\Form {
    public function __construct($translator) {
        // Do something

        $translated_string = $translator->translate('string to translate');
    }
} 
```

然后在你的控制器中，你可以这样做：

`$your_form = $this->servicelocator->get('YourModule\Form\YourForm');`

或者如果你不想使用工厂，你可以选择不添加它，而是这样做：

`$your_form = new \YourModule\Form\YourForm($this->servicelocator->get('Translator'));`

不过我还是建议去工厂。

# php - 与仅处理 ob_get_clean() 的结果相比，将回调传递给 ob_start 有什么好处？

> ID：14765983
> 
> 赞同：2
> 
> 时间：2013-02-08T05:00:12.743
> 
> 标签：php, performance, coding-style, output-buffering

我想知道使用它是否有任何真正的好处......

```
function getSomeContent() {
    ob_start(function($content) {
        // ... modify content ...
        return $content;
    }
    // ... output stuff ...
    return ob_get_clean();
} 
```

……与此相反……

```
function getSomeContent() {
    ob_start();
    // ... output stuff ...
    $result = ob_get_clean();
    // ... modify content ...
    return $result;
} 
```

...？

假设“输出内容”和“修改内容”部分在每种情况下都是相同的。关键是“修改内容”的位置发生了变化，第一种情况是在回调中，第二种情况是“内联”。

一个比另一个有性能优势吗？例如，当第一种形式只使用一个时，第二种形式是否会复制两个缓冲区内容？还是纯粹是编码风格决定？为什么*你*会选择一种形式而不是另一种形式？

我可以看到范围访问存在差异，因为封闭范围中的任何变量都将在第二个示例的“修改内容”部分中可用，在第一个示例中，它们必须通过`use`子句“传入”。事实上，这正是我通常会选择第二种形式的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:08:04.263

现在您的代码很清楚，是的，在您的第一个示例中，您给出了一个使用`$result`两次的案例（这不是一个好主意）。

我的主要想法是：仅当您*不需要*在当前范围内使用`ob_start`时才使用回调调用。您的第一个示例变为：*`$result`*

 *```
ob_start(function($content) {
    // ... modify content ...
    return $content;
}
// ... output stuff ...
ob_end_clean(); 
```

在这种情况下，工作`$result`是在一个新的范围内完成的，这可以使您的代码更清晰（例如：您调用），并且您`ob_start(array($this, 'method'));`不需要在工作结束时将其从主范围中释放（我假设你当然在做其他事情）。`unset``$result`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:30:38.300

只是为了稍微澄清一下Ninsuo的正确答案。

我的两个代码示例实际上**不会**产生相同的结果。事实上，结合使用回调`ob_get_clean()`是完全没用的。

这是因为在*清理*或*刷新*缓冲区时应用了回调。

但是`ob_get_clean()`首先检索内容，*然后*清理缓冲区。这意味着返回的内容不是回调返回的结果，而是传递*给*回调的输入。

我写了这两个简单（和hacky）的脚本来演示。

这个使用`ob_get_clean()`并不会产生正确的结果：

```
// Tests the use of callbacks with ob_get_clean().
class TestWithGetClean {
    // This variable is set when obcallback is called.
    public $foo = null;

    // The output buffer callback.
    public function obcallback($value) { 
        $this->foo = 'set';
        return $value . '(modified)'; 
    }

    // Main method.
    public function run() {
        ob_start(array($this, 'obcallback'));
        echo 'this is the output', PHP_EOL;
        return ob_get_clean();
    }
}

// Run the test with ob_get_clean().
$t = new TestWithGetClean();
echo $t->run(); // This method returns a value in this test. (But not the correct value!)
echo $t->foo, PHP_EOL; 
```

运行它的输出是：

> 这是输出
> 
> 放

文本`'(modified)'`不会出现在任何地方。但是请注意，实例变量`$foo` *已设置*，因此肯定会调用回调，但是输出与我最初预期的不同。

与使用的这个比较`ob_end_flush()`：

```
// Tests the use of callbacks with ob_end_flush().
class TestWithEndFlush {
    // This variable is set when obcallback is called.
    public $foo = null;

    // The output buffer callback.
    public function obcallback($value) { 
        $this->foo = 'set';
        return $value . '(modified)' . PHP_EOL; 
    }

    // Main method.
    public function run() {
        ob_start(array($this, 'obcallback'));
        echo 'this is the output', PHP_EOL;
        ob_end_flush();
    }
}

// Run the test with ob_end_flush().
$t2 = new TestWithEndFlush();
$t2->run(); // This method produces output in this test.
echo $t2->foo, PHP_EOL; 
```

这个产生以下输出：

> 这是输出
> 
> （修改的）
> 
> 放

但是，这当然没有那么有用，因为输出直接发送到客户端，因此我们无法进一步操纵结果。（例如，将文本包装在 Symfony HttpFoundation 组件请求对象中）。*

# jquery - NHibernate 与 ASHX 和 TransactionScope

> ID：14765984
> 
> 赞同：0
> 
> 时间：2013-02-08T05:00:16.250
> 
> 标签：jquery, ajax, nhibernate, transactionscope, ashx

有一个 IHttpModule 设置来打开和关闭，开始和提交 NH isession 和事务等。在 ASHX 处理程序中有一段类似于此的代码，由一些 ajax 调用：

```
using (var transactionScope = new TransactionScope(...)) {
   // Do some NH stuff and write to a few transactional queues.
   transactionScope.Complete();
} 
```

我面临以下错误并且有一些解决它的问题：此 SqlTransaction 已完成；它不再可用。提交失败。

任何人都可以解释为什么会这样。据我所知，NH 事务在 TransactionScope 中登记，尽管 TranasctionScope 是在创建 ISession 的 IHttpModule BeginRequest 之后创建的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:53:01.073

嗯......几个小时后......原来是我的分布式事务协调器导致了我的问题......

重新启动它，它恢复正常...

希望这对其他人有帮助。

# iphone - 如何在双击 UITableViewCell 时显示子视图？

> ID：14765985
> 
> 赞同：1
> 
> 时间：2013-02-08T05:00:25.500
> 
> 标签：iphone, objective-c, uitableview, subview

我想显示所选单元格的子视图。选定的单元格应在双击单元格时展开，并且子视图应显示在该展开的区域中。我能够在单元格扩展区域中显示的子视图中显示图像。但是，当我在双击单元格后滚动 UITableView 时，子视图中显示的图像正在消失。

请建议我......

展开单元格：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (selectedRow && indexPath.row == tappedRow && (tapCount == 2 || tapCount ==3))
        return 210;

    return 62;
} 
```

显示所选行的子视图的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    //UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"ChooseAPlayer"];
    if(tapCount == 1 && tappedRow == indexPath.row){

        tapCount = tapCount + 1;
        imgView.hidden =YES;

        selectedRow = [self.tableView indexPathForSelectedRow];
        [self.tableView reloadRowsAtIndexPaths:@[indexPath]withRowAnimation:UITableViewRowAnimationNone];
        imgView.hidden = NO;
        button.frame = CGRectMake(245,18,image.size.width, image.size.height);
        //  cell.accessoryView.hidden = YES;
        [UIView commitAnimations];

    }
    else if (tapCount == 0){

        tapCount = tapCount +1;
        tappedRow = indexPath.row;
    }
    else if (tapCount ==2 && tappedRow == indexPath.row){

        tapCount = tapCount + 1;
        imgView.hidden =YES;

        selectedRow = [self.tableView indexPathForSelectedRow];
        [self.tableView reloadRowsAtIndexPaths:@[indexPath]withRowAnimation:UITableViewRowAnimationNone];
        imgView.hidden = NO;
        button.frame = CGRectMake(245,18,image.size.width, image.size.height);
        //  cell.accessoryView.hidden = YES;
        [UIView commitAnimations];
    }
    else if (tapCount ==3 && tappedRow == indexPath.row){
        tapCount = 0;
        //cell.accessoryView.hidden = NO;
        imgView.hidden = YES;

        [self.tableView setRowHeight:62];
        [self.tableView beginUpdates];
        [self.tableView endUpdates];
        [imgView release];
    }
    else if (tappedRow != indexPath.row){
        tapCount = 1;
        tappedRow = indexPath.row;
        imgView.hidden = YES;

        [imgView release];
    }

}

- (UITableViewCell *)tableView: (UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath
{
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"ChooseAPlayer"];

    imgView.hidden = YES;

    if ( indexPath.row == tappedRow && (tapCount == 2 || tapCount ==3))
    {
        imgView.tag = indexPath.row;
        imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 50, 320,150)];
        imgView.backgroundColor = [UIColor clearColor];
        [imgView setImage:[UIImage imageNamed:@"Playersdetails.png"]];
        [cell.contentView addSubview:imgView];
        imgView.hidden= NO;
    }

    UILabel *lblName = (UILabel *)[cell viewWithTag:101];
    [lblName setText:[inputPlayersList objectAtIndex:[indexPath row]]];
    UILabel *Teams = (UILabel *)[cell viewWithTag:103];
    [Teams setText:[inputPlayersTeams objectAtIndex:[indexPath row]]];

    UILabel *AwayTeams = (UILabel *)[cell viewWithTag:104];
    [AwayTeams setText:[inputPlayersAwayteams objectAtIndex:[indexPath row]]];

    UILabel *PlayersPrice = (UILabel *)[cell viewWithTag:105];
    [PlayersPrice setText:[inputPlayersPrice objectAtIndex:[indexPath row]]];

    image = [UIImage   imageNamed:@"Select_white.png"];
                      button = [UIButton buttonWithType:UIButtonTypeCustom];
                      CGRect frame = CGRectMake(0, 0, image.size.width, image.size.height);
                      button.frame = frame;
                      [button setBackgroundImage:image forState:UIControlStateNormal];

                      [button addTarget:self action:@selector(accessoryButtonTapped:event:) forControlEvents:UIControlEventTouchUpInside];
                      button.backgroundColor = [UIColor clearColor];
                      cell.accessoryView = button;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:05:55.580

试试这个`cellForRowAtIndexPath`

```
 //    imgView.hidden = YES; //comment this line

 if ( indexPath.row == tappedRow && (tapCount == 2 || tapCount ==3))
            {
                imgView.tag = indexPath.row;
                imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 50, 320,150)];
                imgView.backgroundColor = [UIColor clearColor];
                [imgView setImage:[UIImage imageNamed:@"Playersdetails.png"]];
                [cell.contentView addSubview:imgView];
                imgView.hidden= NO;
            }
            else
            {
                imgView.hidden = YES;

            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:13:58.573

要获取 UITableView 上的单击/双击操作，请按照以下步骤操作：

**1.**创建一个`CustomTableViewCell`, 的子类`UITableViewCell`。并覆盖上述方法。

```
 #import "CustomTableViewCell.h"

                @implementation CustomTableViewCell

                - (void)dealloc {
                    [super dealloc];
                }

                - (void)drawRect:(CGRect)rect {
                    CGContextRef ctx = UIGraphicsGetCurrentContext();
                    // Use the same color and width as the default cell separator for now
                    CGContextSetRGBStrokeColor(ctx, 0.5, 0.5, 0.5, 1.0);
                    CGContextSetLineWidth(ctx, 0.5);

                    for (int i = 0; i < [columns count]; i++) {
                        CGFloat f = [((NSNumber*) [columns objectAtIndex:i]) floatValue];
                        CGContextMoveToPoint(ctx, f, 0);
                        CGContextAddLineToPoint(ctx, f, self.bounds.size.height);
                    }

                    CGContextStrokePath(ctx);

                    [super drawRect:rect];
                }

                - (void)addColumn:(CGFloat)position {
                    [columns addObject:[NSNumber numberWithFloat:position]];
                }

                - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
                    UITouch *aTouch = [touches anyObject];
                    NSLog(@"touchesBegan tapCount = %d", [aTouch tapCount]);
                    ////
                       imgView.tag = indexPath.row;
                imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 50, 320,150)];
                imgView.backgroundColor = [UIColor clearColor];
                [imgView setImage:[UIImage imageNamed:@"Playersdetails.png"]];
                [cell.contentView addSubview:imgView];
                imgView.hidden= NO;

                /////
            } 

            - (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
                UITouch *aTouch = [touches anyObject];
                NSLog(@"touchesCancelled tapCount = %d", [aTouch tapCount]);
            }

     - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
            UITouch *aTouch = [touches anyObject];
            NSLog(@"touchesEnded tapCount = %d", [aTouch tapCount]);
        }

        - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
            UITouch *aTouch = [touches anyObject];
            NSLog(@"touchesMoved tapCount = %d", [aTouch tapCount]);
        } 
```

**2.**在`UITableView's` `cellForRowAtIndexPath`方法中，添加 `CustomTableViewCell`代替`UITableViewCell`。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        NSString *MyIdentifier = [NSString stringWithFormat:@"MyIdentifier %i", indexPath.row];

        CustomTableViewCell *cell = (CustomTableViewCell *)[tableView dequeueReusableCellWithIdentifier:MyIdentifier];

        if (cell == nil) {
            cell = [[[CustomTableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier] autorelease];
        }

        UILabel *regNoLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, 3, 150, 15)];
        //regNoLabel.text = [[self.resultArray objectAtIndex:indexPath.section] valueForKey:@"Ent_Regn_Nbr"];
        regNoLabel.text = @"Apple";
        regNoLabel.font = [UIFont systemFontOfSize:12.0];
        [cell addSubview:regNoLabel];
        [regNoLabel release];
            return cell;

    } 
```

# flash - 如何在 Actionscript 中播放短哔声？

> ID：14765986
> 
> 赞同：1
> 
> 时间：2013-02-08T05:00:31.280
> 
> 标签：flash, audio, actionscript, beep

我可以播放这样的哔声：

```
private var beep:Sound = new Sound();

private function beepInit():void {
    var beepHandler:Function = new Function();

        beepHandler = function(event:SampleDataEvent):void {
            for (var i:uint = 0; i < 2048; i++) {
                var wavePos:Number = 20 * Math.PI * i / 2048;
                event.data.writeFloat(Math.sin(wavePos));
                event.data.writeFloat(Math.sin(wavePos));
            }
        }

        beep.addEventListener(SampleDataEvent.SAMPLE_DATA, beepHandler);
} 
```

在应用程序启动时，我调用 beepInit();

要播放，请调用： beep.play();

这是连续的声音。我怎样才能做到前。500 毫秒。短哔声？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:49:43.897

一旦达到要播放的长度，您就需要停止创建样本。您可以通过检查创建的样本数量与要播放的样本数量来做到这一点。

您要播放的样本量是样本频率（44100/秒）乘以您要播放的声音长度（以秒为单位）。

```
private const sampleFrequency:uint = 44100;
private var samplesCreated:uint = 0;
private var lengthInSeconds:Number = 0.5;
private var beep:Sound = new Sound();

private function beepInit():void {
  var beepHandler:Function = function ( event:SampleDataEvent ):void {
    for (var i:uint = 0; i < 2048; i++) {
      if (samplesCreated >= sampleFrequency * lengthInSeconds) {
        return;
      }
      var wavePos:Number = 20 * Math.PI * i / 2048;
      event.data.writeFloat( Math.sin( wavePos ) );
      event.data.writeFloat( Math.sin( wavePos ) );
      samplesCreated++;
    }
  };

  beep.addEventListener( SampleDataEvent.SAMPLE_DATA, beepHandler );
} 
```

# mysql - 基于用户id的mysql排名系统

> ID：14765988
> 
> 赞同：1
> 
> 时间：2013-02-08T05:00:43.900
> 
> 标签：mysql, system, ranking

[我对最初来自http://jimmod.com/blog/2008/09/displaying-row-number-rownum-in-mysql/](http://jimmod.com/blog/2008/09/displaying-row-number-rownum-in-mysql/)的查询有疑问

```
SELECT IF(@points=p.points, @rownum, @rownum:=@rownum+1) rank, 
       p.*, (@points:=p.points) dummy 
FROM `ranking` p, (SELECT @rownum:=0) x, (SELECT @points:=0) y 
ORDER BY `points` DESC 
```

查询的结果是：

```
rank user_id name score
-----------------------
1      4    Barney  100
2      2    Ted      88
3      1    Marshall 76
3      3    Robin    76
4      5    Lily     68 
```

如何根据用户 ID 获得相同的排名结果？

下面的查询是基于用户 id 的，但 Robin 的排名将是 4，而不是应该的 3。

```
SELECT rank FROM (SELECT @rownum:=@rownum+1 rank, p.* 
FROM `ranking` p, (SELECT @rownum:=0) r 
ORDER BY `points` DESC) a WHERE a.user_id = 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:05:11.113

如果不对其进行测试，似乎这应该使用子查询来工作：

```
SELECT rank
FROM (
    SELECT IF(@points=p.points, @rownum, @rownum:=@rownum+1) rank, 
       p.*, (@points:=p.points) dummy 
    FROM `ranking` p, (SELECT @rownum:=0) x, (SELECT @points:=0) y 
    ORDER BY `points` DESC
) t
WHERE user_id = 3 
```

您上面的查询显示 4，因为您没有使用 RANK，而只是使用 ROW NUMBER，并且 Robin 出现在 Marshall 之后（即使它们具有相同的分数）。

祝你好运。

# ember.js - EmberJs 链接到外键模型

> ID：14765989
> 
> 赞同：1
> 
> 时间：2013-02-08T05:01:10.283
> 
> 标签：ember.js

我有一个联系人模型，其中包含联系人的 id (id) 和客户端的外键 (clientid)。

```
{"id":131568,
"lastname":"Hansen",
"firstname":"Hans",
"client_id":75264,
"clientname":75264,
}

{{#each contact in controller.contacts}}
   {#linkTo "contact.show" contact href="true" }} {{firstname}} {{lastname}}{{/linkTo}}
   {#linkTo "client.show" contact href="true" }} {{clientname}} {{/linkTo}}
{{/each}} 
```

如何告诉 linkTo 助手指向外键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:03:02.543

答案在于模型的结构。客户端需要是一个单独的对象。

```
{"id":131568,
"lastname":"Hansen",
"firstname":"Hans",
 "client": {
     "id":75264,
     "clientname":75264,
  }
}

{{#each contact in controller.contacts}}
   {#linkTo "contact.show" contact href="true" }} {{firstname}} {{lastname}}{{/linkTo}}
   {#linkTo "client.show" contact.client href="true" }} {{clientname}} {{/linkTo}}
{{/each}} 
```

# ios - AVQueuePlayer：循环队列中的最后一项（并消除打嗝）或循环视频的最后几秒

> ID：14765990
> 
> 赞同：3
> 
> 时间：2013-02-08T05:01:11.277
> 
> 标签：ios, video, sequence, layer, avqueueplayer

我正在使用 AVQueuePlayer 按顺序播放视频（尽管我在播放之间有打嗝）。现在我想：

1）循环该序列中的最后一项（不是完整的）。

2）这样做，我也想消除打嗝。

下面是我播放视频序列的代码。我怎样才能实现我的 2 个目标？

```
[super viewDidLoad];

NSString *secondVideoPath = [[NSBundle mainBundle] pathForResource:@"vid_1" ofType:@"mov"];
NSString *firstVideoPath = [[NSBundle mainBundle] pathForResource:@"vid_2" ofType:@"mov"];

AVPlayerItem *firstVideoItem = [AVPlayerItem playerItemWithURL:[NSURL fileURLWithPath:firstVideoPath]];
AVPlayerItem *secondVideoItem = [AVPlayerItem playerItemWithURL:[NSURL fileURLWithPath:secondVideoPath]];

queuePlayer = [AVQueuePlayer queuePlayerWithItems:[NSArray arrayWithObjects:firstVideoItem, secondVideoItem,nil]];

AVPlayerLayer *layer = [AVPlayerLayer playerLayerWithPlayer:queuePlayer];
avPlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone;
layer.frame = CGRectMake(0, 0, 1024, 768);

[self.view.layer addSublayer:layer];

[queuePlayer play]; 
```

我正在考虑的另一种方法是播放 1 长视频并循环播放最后几秒钟。也许我也可以这样避免打嗝。这种方法可以实现吗？如果是这样，如何调整下面的代码（播放 1 个视频）？

```
[super viewDidLoad];
NSString *filepath = [[NSBundle mainBundle] pathForResource:@"vid_long" ofType:@"mov"];
NSURL *fileURL = [NSURL fileURLWithPath:filepath];
avPlayer = [AVPlayer playerWithURL:fileURL];

AVPlayerLayer *layer = [AVPlayerLayer playerLayerWithPlayer:avPlayer];
avPlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone;
layer.frame = CGRectMake(0, 0, 1024, 768);
[self.view.layer addSublayer: layer];

[avPlayer play]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:39:17.760

这是循环播放视频的解决方案：-

```
queuePlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone; 
int k=0;
 [[NSNotificationCenter defaultCenter] addObserver:self
                                           selector:@selector(itemPlayEnded:)
                                               name:AVPlayerItemDidPlayToEndTimeNotification
                                             object:[queuePlayer currentItem]];

- (void)itemPlayEnded:(NSNotification *)notification 
{
 k++;
 if(k<10-15 times)
 {
  AVPlayerItem *p = [notification object];
  [p seekToTime:kCMTimeZero];
 }
} 
```

通过编辑的答案：- 上面的答案播放相同的文件，但这对我有用。它循环播放最后添加的文件：

```
- (void)itemPlayEnded1:(NSNotification *)notification
{
    NSString *secondVideoPath = [[NSBundle mainBundle] pathForResource:@"video2" ofType:@"mp4"];
      k=0;
    AVPlayerItem *secondVideoItem = [AVPlayerItem playerItemWithURL:[NSURL fileURLWithPath:secondVideoPath]];
    // AVPlayerItem *p = [notification object];
    NSMutableArray *currentItemArray = [NSMutableArray arrayWithObjects:secondVideoItem,nil];
    AVQueuePlayer* queuePlayer = [[AVQueuePlayer alloc] initWithItems:currentItemArray];
    [queuePlayer play];
    queuePlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone;

    AVPlayerLayer *layer = [AVPlayerLayer playerLayerWithPlayer:queuePlayer];
    avPlayer.actionAtItemEnd = AVPlayerItemStatusReadyToPlay;
    layer.frame = CGRectMake(0, 0, 1024, 768);        
    [self.view.layer addSublayer:layer];       

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(itemPlayEnded:)
                                                 name:AVPlayerItemDidPlayToEndTimeNotification
                                               object:[queuePlayer currentItem]];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T12:29:52.180

我能找到的最好方法是这个

观察 AVQueuePlayer 中的每个播放项。

```
queuePlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone;
for(AVPlayerItem *item in items) {
    [[NSNotificationCenter defaultCenter] addObserver:self 
            selector:@selector(nextVideo:) 
            name:AVPlayerItemDidPlayToEndTimeNotification 
            object:item ];
} 
```

在每个 nextVideo 上再次插入 currentItem 以将其排队播放。确保为每个项目寻求零。在 AdvanceToNextItem 之后，AVQueuePlayer 将从队列中删除 currentItem。我们只是重新插入。

```
-(void) nextVideo:(NSNotification*)notif {
    AVPlayerItem *currItem = notif.userInfo[@"object"];
    [currItem seekToTime:kCMTimeZero];
    [queuePlayer advanceToNextItem];
    [queuePlayer insertItem:currItem afterItem:nil];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-07T17:01:17.797

我发现这样做实际上可靠的唯一方法是采用 Apple 的[Using AVQueuePlayer 来演示循环播放](https://developer.apple.com/library/mac/samplecode/avloopplayer/Introduction/Intro.html)示例。您需要添加自己的代码来播放初始视频，然后循环播放不同的视频，但该方法比我尝试过的任何其他方法都更好。

# php - 下拉菜单中的“其他”，html

> ID：14765991
> 
> 赞同：0
> 
> 时间：2013-02-08T05:01:27.303
> 
> 标签：php, html

我有一个 html 表单，它接受输入并进行一些计算。我想做的是有一个包含一些选项的下拉菜单，但如果用户的选项不存在，他们可以输入自己的选项。

对于这个例子，我们假设它需要所有条目的总和：

```
<form action="action.php">
    <input type="text" name="int1" value="1">
    <select name="dropdown">
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="NULL">Other</option>
    </select>
    <input type="text" name="other" value="other">
    <input type="submit" value="go">
</form> 
```

我的想法是，如果下拉菜单设置为其他，它将使用下拉菜单或“其他”输入。有没有办法在 html 中处理这个问题，或者这是用 php 中的 if 语句完成的？只是我的一些想法。

感谢帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:06:39.787

只是做类似的事情

```
if (isset($_GET['dropdown']) 
    && $_GET['dropdown'] == 'NULL'
    && isset($_GET['other'])
) {
    $value = $_GET['other'];
}
elseif (isset($_GET['dropdown'])) {
    $value = $_GET['dropdown'];
}
else {
    // Something went wrong. Handle error
} 
```

如果您正在寻找客户端解决方案，您还可以使用 JavaScript 提交表单，以便只将一个值传递给 PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:37:21.073

你可以使用 jquery 做这样的事情

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<html><body>
<form action="" method="POST">
    <input type="text" name="int1" value="1">
    <select name="dropdown" id="dropdown">
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="NULL">Other</option>
    </select>

    <input type="text" name="other" value="other" id="other">
    <input type="submit" value="go">
</form>
</body></html>
<script>
$(document).ready(function(){
    $("#other").hide();
        $('#dropdown').change(function(){

            if($(this).val()=='NULL'){
                $("#other").show();
            }
            else{
                $("#other").hide();
            }
        }); 
})
</script> 
```

并使用 php 捕捉正确的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:05:39.753

我会在那里嵌入一个 PHP 语句，说明如果下拉值等于其他值，则在下拉框下添加输入文本字段以供用户输入。

# java - servlet过滤器中的弹簧注入

> ID：14765992
> 
> 赞同：9
> 
> 时间：2013-02-08T05:01:33.123
> 
> 标签：java, spring, spring-mvc, spring-security

我正在尝试对 servlet 过滤器进行弹簧注入。过滤器是引用的 jar 文件的一部分。所以。我无法将其更改为拦截器。在我的插件项目的 web.xml 中

```
<filter>
    <filter-name>CustomFilter</filter-name>    
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>    
    <init-param>    
        <param-name>someinitparam</param-name>    
        <param-value>value to it</param-value>    
    </init-param>
</filter>
<filter-mapping>
    <filter-name>CustomFilter</filter-name>
    <url-pattern>/mywebservices/*</url-pattern>
</filter-mapping> 
```

在 spring.xml 我会这样使用

```
<bean id="CustomFilter" class="com.abc.CustomFilter"></bean> 
```

spring.xml 中已经配置了一些过滤器

```
<bean id="filterChainProxy" class="org.acegisecurity.util.FilterChainProxy">
    <property name="filterInvocationDefinitionSource">
        <value>
            CONVERT_URL_TO_LOWERCASE_BEFORE_COMPARISON
            PATTERN_TYPE_APACHE_ANT
            /mywebservices/*=some existing filters
        </value>              
    </property>
</bean> 
```

由于我已经在 web.xml 中指定了我的 url 模式，我是否需要在 filterChainProxy 中再次添加为

```
/mywebservices/**=CustomFilter, some existing filters 
```

它会起作用吗。

请建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T08:06:46.400

您可以像在 web.xml 中一样配置过滤器

```
<filter>
   <filter-name>CustomFilter</filter-name>
   <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
   <filter-name>CustomFilter</filter-name>
   <url-pattern>/mywebservices/*</url-pattern>
</filter-mapping> 
```

然后在 spring.xml 中注入属性

```
<bean id="CustomFilter" class="com.abc.CustomFilter">
   <property name="someParameter">
      <value>some value</value>
   </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:39:49.650

我认为你不能在 spring 上下文之外注入 bean，并且你的 servlet 过滤器在 spring 上下文之外。如果您想在上下文中使用过滤器，那么我建议您使用 spring web 拦截器。这些拦截器在 spring 上下文中，您可以通过这些拦截器利用 spring 容器功能。

# string - 在 Rebol 中计算行数最快/最有效的方法是什么？

> ID：14765993
> 
> 赞同：9
> 
> 时间：2013-02-08T05:02:01.850
> 
> 标签：string, performance, newline, rebol

给定一个字符串`string`，计算其中行数的最快/最有效方法是什么？将接受任何 Rebol 风格的最佳答案。我一直在假设该`parse [some [thru]]`组合是遍历字符串的最快方式，但后来我不确定，因此转向 SO：

```
count-lines: func [string [string!] /local count][
    parse/all string [
        (count: 1) some [thru newline (count: count + 1)]
    ]
    count
] 
```

或者：

```
count-lines: func [string [string!] /local count][
    count: 0
    until [
        count: count + 1
        not string: find/tail string newline
    ]
    count
] 
```

那么柜台呢？重复效率如何？

```
count-lines: func [string [string!]][
    repeat count length? string [
        unless string: find/tail string newline [
            break/return count
        ]
    ]
] 
```

**更新：**行数遵循文本编辑器原则：

![空的 TextMate 文档](../Images/9100f4d90a7f4e69db339517c38c875c.png)

空文档的行数仍然为 1。所以：

```
>> count-lines ""
== 1
>> count-lines "^/"
== 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T22:44:26.557

正如 BrianH 所建议的，增强的 PARSE 版本：

```
i: 1 ; add one as TextMate
parse text [any [thru newline (++ i)]]
print i 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T12:12:03.473

```
count-lines: func [
    str
    /local sort-str ][
sort-str: sort join str "^/"
1 + subtract index? find/last sort-str "^/" index? find sort-str "^/"
] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T18:37:08.673

`parse`这是我能想到的最简单的非版本：

```
count-lines: function [text [string!]] [
    i: 1
    find-all text newline [++ i]
    i
] 
```

它使用`function`和`++`来自 Rebol 的更新版本，以及`find-all`来自 R3 或 R2/Forward。您可以查看`find-all`并内联您找到和优化的内容，但这样的情况正是我们所写`find-all`的，所以为什么不使用它呢？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T12:15:54.200

为什么没有人提供我想知道的最简单的解决方案:)

```
t: "abc^/de^/f^/ghi"
i: 0 until [i: i + 1 not t: find/tail t newline] i
== 4 
```

不确定性能，但我认为它很快，因为 UNTIL 和 FIND 是本地人。WHILE 也可以使用。

```
i: 1 while [t: find/tail t newline] [i: i + 1] i
== 4 
```

只需要检查空字符串。如果它是一个函数，则需要对参数系列进行 HEADed。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-18T08:57:19.673

remove-each 可以很快，因为它是原生的

```
s: "1^/2^/3"
a: length? s
print a - length? remove-each v s [v = #"^/"]
; >> 2 
```

或作为一个函数

```
>> f: func [s] [print [(length? s) - (length? remove-each v s [v = #"^/"])]]
>> f "1^/2^/3"
== 2 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-08T08:49:10.017

这对我来说是最好的：

```
temp: read/lines %mytext.txt
length? temp 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-26T15:04:45.183

不是最有效的，但可能是最快的解决方案之一（无论如何，如果运行基准测试，我想看看这个解决方案是如何执行的）：

```
>> s: "1^/2^/ ^/^/3"
>> (length? s) - length? trim/with copy s newline
== 4 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-11T01:39:38.990

不知道性能和最后一行规则（r3）。

```
>> length? parse "1^/2^/3" "^/"
== 3 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-16T18:28:57.127

hehehe 读/行长度？temp 是我认为关于 read/lines -> foreach 行 temps [ count: count + 1] 的一件好事

另一种方法是做

```
temp: "line 1 ^M line2 ^M  line3 ^M "
length? parse temp newline ; that cuts the strings into a block 
;of multiple strings that represent each a line [ "line 1" "line2" "line3" ] 
:then you count how much  strings you have in the block with length? 
```

我喜欢用 rebol 编码，这太有趣了

编辑我没有阅读整篇文章，所以我的解决方案已经以不同的方式提出......

可以修改我发布已发布解决方案的罪过，我将对该解决方案的意外行为提出洞察评论。不计算多个链式回车（使用 rebol3 linux ...）

```
>> a: "line1 ^M line2 ^M line3 ^M^M"
== "line1 ^M line2 ^M line3 ^M^M"

>> length? parse a newline 
== 3 
```

# java - 从“SunMonTueWedThuFriSat”形式的字符串中获取给定数字的周

> ID：14765998
> 
> 赞同：-2
> 
> 时间：2013-02-08T05:02:51.147
> 
> 标签：java, string, integer

好吧，我被难住了。我真的对此进行了调查，似乎无法具体找到我想要做的事情。我在学校学习 Java 已经两周了，并且是编程新手，所以请原谅我可能犯的任何错误。

我正在开发一个字符串操作程序，在其中的其他任务中，我要创建一个名为 names 的字符串`SunMonTueWedThuFriSat`，现在我需要弄清楚如何在**JOptionPane**中抓取和显示该字符串中与数字一起出现的 3 个字符我应该与他们关联`(0=Sun, 1=Mon, etc.)`所以如果用户输入 2 它应该显示 Tue。我对如何在字符串中显示这些字符有基本的了解，但是对于我的生活，我似乎无法弄清楚如何将这些数字与这些字符相关联。每次我尝试做某事时，我都会不断遇到错误和沮丧。

感谢你的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:05:33.253

如果一周中的日期必须在单个字符串中，您可以为每个 3 个字符的子字符串解析字符串，然后将其存储在 ArrayList 中。然后，提供的数字将匹配列表中星期几的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:13:24.583

检查[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)。

例如：

```
HashMap<int, String> aWeekMap = new HashMap();
aWeekMap.put(0, "Mon");
aWeekMap.put(1, "Tue");

System.out.println(aWeekMap.get(0)); // prints Mon. 
```

在内存中，您可以想象如下：

![在此处输入图像描述](../Images/6764ea352145a6563be0781fd9210478.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:13:57.663

如果你可以使用一个字符串数组，它会更容易：

```
String[] names = {"Sun","Mon","Tue","Wed","Thu","Fri","Sat"};

int input = 2;

System.out.println("The day is " + names[input]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T05:25:55.673

您应该可以只使用子字符串，因为所有缩写都是三个字符。

```
String s = "SunMonTueWedThuFriSat"; 
```

提示用户输入一个数字（0-6）：

```
String in = JOptionPane.showInputDialog("Please input a number (0-6)"); 
```

现在将其转换为数字

```
int choice = Integer.parseInt(in); 
```

并选择字符串的正确部分：

```
String day = s.substring(choice*3, choice*3+3); 
```

现在只需在 JOptionPane 中显示这一天：

```
JOptionPane.showMessageDialog(null, "Information", "You chose: " + day, 
    JOptionPane.INFORMATION_MESSAGE)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T05:51:00.597

使用以下代码

```
private ArrayList arr=new ArrayList();
arr.Add(0,names.subString(0,2);
arr.Add(0,names.subString(3,5);
arr.Add(0,names.subString(6,8);
arr.Add(0,names.subString(9,11);
arr.Add(0,names.subString(12,14);
arr.Add(0,names.subString(15,17);
arr.Add(0,names.subString(18,20); 
```

和

```
JOptionPane.showInputDialog(null, "Please choose a name", "Example 1",
        JOptionPane.QUESTION_MESSAGE, null, arr); 
```